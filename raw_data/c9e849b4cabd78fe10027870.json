{
    "url": "http://localhost:9999/luscus/ol2-scripts/OpenLayers.js",
    "host": "localhost",
    "port": 9999,
    "protocol": "http",
    "name": "Link manipulation (DOM-based)",
    "issueType": 5246976,
    "severity": "Low",
    "confidence": "Firm",
    "issueBackground": "DOM-based link manipulation vulnerabilities arise when a client-side script within an application's response reads data from a controllable part of the DOM (for example, the URL), and writes this to a navigation target within the current page, such as a clickable link or the submission URL of a form. An attacker may be able to use the vulnerability to construct a URL which, if visited by another application user, will modify the target of links within the response. An attacker may be able to leverage this to perform various attacks, including:<ul><li>Causing the user to redirect to an arbitrary external URL, to facilitate a phishing attack.</li><li>Causing the user to submit sensitive form data to a server controlled by the attacker.</li><li>Causing the user to perform an unintended action within the application, by changing the file or query string associated with a link.</li><li>Bypassing browser anti-XSS defenses by injecting on-site links containing XSS exploits, since browser anti-XSS defenses typically do not operate on on-site links.</li></ul>",
    "remediationBackground": "Static analysis of code to identify vulnerabilities of this kind may lead to false positives that are not actually exploitable. You should review the highlighted code and related execution paths to determine whether the application is indeed vulnerable, or whether mitigations are in place that would prevent exploitation.<br><br>The most effective way to avoid DOM-based link manipulation vulnerabilities is not to dynamically set the target URLs of links or forms using data that originated from any untrusted source. If the desired functionality of the application means that this behavior is unavoidable, then defenses must be implemented within the client-side code to prevent malicious data from introducing an arbitrary URL as a link target. In general, this is best achieved by using a whitelist of URLs that are permitted link targets, and strictly validating the target against this list before setting the link target.",
    "issueDetail": "The application may be vulnerable to DOM-based link manipulation. Data is read from <b>window.location</b> and written to <b>the 'href' property of a DOM element</b> via the following statements:<ul><li>var c=window.location,d=c.port?\":\"+c.port:\"\",d=c.protocol+\"//\"+c.host.split(\":\").shift()+d;</li><li>0===a.indexOf(\"/\")?a=d+a:(c=c.pathname.split(\"/\"),c.pop(),a=d+c.join(\"/\")+\"/\"+a)</li><li>b.ignoreCase&amp;&amp;(a=a.toLowerCase());</li><li>c.href=a;</li></ul>",
    "requestResponses": [
        {
            "request": {
                "host": "localhost",
                "port": 9999,
                "protocol": "http",
                "url": "http://localhost:9999/luscus/ol2-scripts/OpenLayers.js",
                "path": "/luscus/ol2-scripts/OpenLayers.js",
                "httpVersion": "HTTP/1.1",
                "method": "GET",
                "headers": {
                    "Host": "localhost:9999"
                },
                "body": "",
                "raw": "R0VUIC9sdXNjdXMvb2wyLXNjcmlwdHMvT3BlbkxheWVycy5qcyBIVFRQLzEuMQ0KSG9zdDogbG9jYWxob3N0Ojk5OTkNCg0K",
                "inScope": true,
                "toolFlag": 16962,
                "referenceID": 0,
                "messageType": "request"
            },
            "response": {
                "statusCode": 200,
                "raw": "SFRUUC8xLjEgMjAwIE9LDQpDb250ZW50LUxlbmd0aDogNzcwMjU1DQpBY2NlcHQtUmFuZ2VzOiBieXRlcw0KQ29udGVudC1UeXBlOiBhcHBsaWNhdGlvbi9qYXZhc2NyaXB0DQpEYXRlOiBGcmksIDA3IE5vdiAyMDE0IDIxOjE5OjUxIEdNVA0KTGFzdC1Nb2RpZmllZDogRnJpLCAwNyBOb3YgMjAxNCAyMToxOTo1MSBHTVQNCg0KLyoKCiAgT3BlbkxheWVycy5qcyAtLSBPcGVuTGF5ZXJzIE1hcCBWaWV3ZXIgTGlicmFyeQoKICBDb3B5cmlnaHQgKGMpIDIwMDYtMjAxMyBieSBPcGVuTGF5ZXJzIENvbnRyaWJ1dG9ycwogIFB1Ymxpc2hlZCB1bmRlciB0aGUgMi1jbGF1c2UgQlNEIGxpY2Vuc2UuCiAgU2VlIGh0dHA6Ly9vcGVubGF5ZXJzLm9yZy9kZXYvbGljZW5zZS50eHQgZm9yIHRoZSBmdWxsIHRleHQgb2YgdGhlIGxpY2Vuc2UsIGFuZCBodHRwOi8vb3BlbmxheWVycy5vcmcvZGV2L2F1dGhvcnMudHh0IGZvciBmdWxsIGxpc3Qgb2YgY29udHJpYnV0b3JzLgoKICBJbmNsdWRlcyBjb21wcmVzc2VkIGNvZGUgdW5kZXIgdGhlIGZvbGxvd2luZyBsaWNlbnNlczoKCiAgKEZvciB1bmNvbXByZXNzZWQgdmVyc2lvbnMgb2YgdGhlIGNvZGUgdXNlZCwgcGxlYXNlIHNlZSB0aGUKICBPcGVuTGF5ZXJzIEdpdGh1YiByZXBvc2l0b3J5OiA8aHR0cHM6Ly9naXRodWIuY29tL29wZW5sYXllcnMvb3BlbmxheWVycz4pCgoqLwoKLyoqCiAqIENvbnRhaW5zIFhNTEh0dHBSZXF1ZXN0LmpzIDxodHRwOi8vY29kZS5nb29nbGUuY29tL3AveG1saHR0cHJlcXVlc3QvPgogKiBDb3B5cmlnaHQgMjAwNyBTZXJnZXkgSWxpbnNreSAoaHR0cDovL3d3dy5pbGluc2t5LmNvbSkKICoKICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKi8KCi8qKgogKiBPcGVuTGF5ZXJzLlV0aWwucGFnZVBvc2l0aW9uIGlzIGJhc2VkIG9uIFlhaG9vJ3MgZ2V0WFkgbWV0aG9kLCB3aGljaCBpcwogKiBDb3B5cmlnaHQgKGMpIDIwMDYsIFlhaG9vISBJbmMuCiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuCiAqIAogKiBSZWRpc3RyaWJ1dGlvbiBhbmQgdXNlIG9mIHRoaXMgc29mdHdhcmUgaW4gc291cmNlIGFuZCBiaW5hcnkgZm9ybXMsIHdpdGggb3IKICogd2l0aG91dCBtb2RpZmljYXRpb24sIGFyZSBwZXJtaXR0ZWQgcHJvdmlkZWQgdGhhdCB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnMKICogYXJlIG1ldDoKICogCiAqICogUmVkaXN0cmlidXRpb25zIG9mIHNvdXJjZSBjb2RlIG11c3QgcmV0YWluIHRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlLAogKiAgIHRoaXMgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIuCiAqIAogKiAqIFJlZGlzdHJpYnV0aW9ucyBpbiBiaW5hcnkgZm9ybSBtdXN0IHJlcHJvZHVjZSB0aGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSwKICogICB0aGlzIGxpc3Qgb2YgY29uZGl0aW9ucyBhbmQgdGhlIGZvbGxvd2luZyBkaXNjbGFpbWVyIGluIHRoZSBkb2N1bWVudGF0aW9uCiAqICAgYW5kL29yIG90aGVyIG1hdGVyaWFscyBwcm92aWRlZCB3aXRoIHRoZSBkaXN0cmlidXRpb24uCiAqIAogKiAqIE5laXRoZXIgdGhlIG5hbWUgb2YgWWFob28hIEluYy4gbm9yIHRoZSBuYW1lcyBvZiBpdHMgY29udHJpYnV0b3JzIG1heSBiZQogKiAgIHVzZWQgdG8gZW5kb3JzZSBvciBwcm9tb3RlIHByb2R1Y3RzIGRlcml2ZWQgZnJvbSB0aGlzIHNvZnR3YXJlIHdpdGhvdXQKICogICBzcGVjaWZpYyBwcmlvciB3cml0dGVuIHBlcm1pc3Npb24gb2YgWWFob28hIEluYy4KICogCiAqIFRISVMgU09GVFdBUkUgSVMgUFJPVklERUQgQlkgVEhFIENPUFlSSUdIVCBIT0xERVJTIEFORCBDT05UUklCVVRPUlMgIkFTIElTIgogKiBBTkQgQU5ZIEVYUFJFU1MgT1IgSU1QTElFRCBXQVJSQU5USUVTLCBJTkNMVURJTkcsIEJVVCBOT1QgTElNSVRFRCBUTywgVEhFCiAqIElNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFkgQU5EIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFCiAqIEFSRSBESVNDTEFJTUVELiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQ09QWVJJR0hUIE9XTkVSIE9SIENPTlRSSUJVVE9SUyBCRQogKiBMSUFCTEUgRk9SIEFOWSBESVJFQ1QsIElORElSRUNULCBJTkNJREVOVEFMLCBTUEVDSUFMLCBFWEVNUExBUlksIE9SCiAqIENPTlNFUVVFTlRJQUwgREFNQUdFUyAoSU5DTFVESU5HLCBCVVQgTk9UIExJTUlURUQgVE8sIFBST0NVUkVNRU5UIE9GCiAqIFNVQlNUSVRVVEUgR09PRFMgT1IgU0VSVklDRVM7IExPU1MgT0YgVVNFLCBEQVRBLCBPUiBQUk9GSVRTOyBPUiBCVVNJTkVTUwogKiBJTlRFUlJVUFRJT04pIEhPV0VWRVIgQ0FVU0VEIEFORCBPTiBBTlkgVEhFT1JZIE9GIExJQUJJTElUWSwgV0hFVEhFUiBJTgogKiBDT05UUkFDVCwgU1RSSUNUIExJQUJJTElUWSwgT1IgVE9SVCAoSU5DTFVESU5HIE5FR0xJR0VOQ0UgT1IgT1RIRVJXSVNFKQogKiBBUklTSU5HIElOIEFOWSBXQVkgT1VUIE9GIFRIRSBVU0UgT0YgVEhJUyBTT0ZUV0FSRSwgRVZFTiBJRiBBRFZJU0VEIE9GIFRIRSAKICogUE9TU0lCSUxJVFkgT0YgU1VDSCBEQU1BR0UuCiAqLwp2YXIgT3BlbkxheWVycz17VkVSU0lPTl9OVU1CRVI6IlJlbGVhc2UgMi4xMy4xIixzaW5nbGVGaWxlOiEwLF9nZXRTY3JpcHRMb2NhdGlvbjpmdW5jdGlvbigpe2Zvcih2YXIgYT0vKF58KC4qP1wvKSkoT3BlbkxheWVyc1teXC9dKj9cLmpzKShcP3wkKS8sYj1kb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgic2NyaXB0IiksYyxkPSIiLGU9MCxmPWIubGVuZ3RoO2U8ZjtlKyspaWYoYz1iW2VdLmdldEF0dHJpYnV0ZSgic3JjIikpaWYoYz1jLm1hdGNoKGEpKXtkPWNbMV07YnJlYWt9cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGR9fSgpLEltZ1BhdGg6IiJ9O09wZW5MYXllcnMuQ2xhc3M9ZnVuY3Rpb24oKXt2YXIgYT1hcmd1bWVudHMubGVuZ3RoLGI9YXJndW1lbnRzWzBdLGM9YXJndW1lbnRzW2EtMV0sZD0iZnVuY3Rpb24iPT10eXBlb2YgYy5pbml0aWFsaXplP2MuaW5pdGlhbGl6ZTpmdW5jdGlvbigpe2IucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxhcmd1bWVudHMpfTsxPGE/KGE9W2QsYl0uY29uY2F0KEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cykuc2xpY2UoMSxhLTEpLGMpLE9wZW5MYXllcnMuaW5oZXJpdC5hcHBseShudWxsLGEpKTpkLnByb3RvdHlwZT1jO3JldHVybiBkfTsKT3BlbkxheWVycy5pbmhlcml0PWZ1bmN0aW9uKGEsYil7dmFyIGM9ZnVuY3Rpb24oKXt9O2MucHJvdG90eXBlPWIucHJvdG90eXBlO2EucHJvdG90eXBlPW5ldyBjO3ZhciBkLGUsYz0yO2ZvcihkPWFyZ3VtZW50cy5sZW5ndGg7YzxkO2MrKyllPWFyZ3VtZW50c1tjXSwiZnVuY3Rpb24iPT09dHlwZW9mIGUmJihlPWUucHJvdG90eXBlKSxPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKGEucHJvdG90eXBlLGUpfTtPcGVuTGF5ZXJzLlV0aWw9T3BlbkxheWVycy5VdGlsfHx7fTtPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kPWZ1bmN0aW9uKGEsYil7YT1hfHx7fTtpZihiKXtmb3IodmFyIGMgaW4gYil7dmFyIGQ9YltjXTt2b2lkIDAhPT1kJiYoYVtjXT1kKX0iZnVuY3Rpb24iPT10eXBlb2Ygd2luZG93LkV2ZW50JiZiIGluc3RhbmNlb2Ygd2luZG93LkV2ZW50fHwoIWIuaGFzT3duUHJvcGVydHl8fCFiLmhhc093blByb3BlcnR5KCJ0b1N0cmluZyIpKXx8KGEudG9TdHJpbmc9Yi50b1N0cmluZyl9cmV0dXJuIGF9O09wZW5MYXllcnMuU3RyaW5nPXtzdGFydHNXaXRoOmZ1bmN0aW9uKGEsYil7cmV0dXJuIDA9PWEuaW5kZXhPZihiKX0sY29udGFpbnM6ZnVuY3Rpb24oYSxiKXtyZXR1cm4tMSE9YS5pbmRleE9mKGIpfSx0cmltOmZ1bmN0aW9uKGEpe3JldHVybiBhLnJlcGxhY2UoL15cc1xzKi8sIiIpLnJlcGxhY2UoL1xzXHMqJC8sIiIpfSxjYW1lbGl6ZTpmdW5jdGlvbihhKXthPWEuc3BsaXQoIi0iKTtmb3IodmFyIGI9YVswXSxjPTEsZD1hLmxlbmd0aDtjPGQ7YysrKXZhciBlPWFbY10sYj1iKyhlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpK2Uuc3Vic3RyaW5nKDEpKTtyZXR1cm4gYn0sZm9ybWF0OmZ1bmN0aW9uKGEsYixjKXtifHwoYj13aW5kb3cpO3JldHVybiBhLnJlcGxhY2UoT3BlbkxheWVycy5TdHJpbmcudG9rZW5SZWdFeCxmdW5jdGlvbihhLGUpe2Zvcih2YXIgZixnPWUuc3BsaXQoL1wuKy8pLGg9MDtoPGcubGVuZ3RoO2grKyl7MD09aCYmKGY9Yik7aWYodm9pZCAwPT09ZilicmVhazsKZj1mW2dbaF1dfSJmdW5jdGlvbiI9PXR5cGVvZiBmJiYoZj1jP2YuYXBwbHkobnVsbCxjKTpmKCkpO3JldHVybiJ1bmRlZmluZWQiPT10eXBlb2YgZj8idW5kZWZpbmVkIjpmfSl9LHRva2VuUmVnRXg6L1wkXHsoW1x3Ll0rPylcfS9nLG51bWJlclJlZ0V4Oi9eKFsrLV0/KSg/PVxkfFwuXGQpXGQqKFwuXGQqKT8oW0VlXShbKy1dP1xkKykpPyQvLGlzTnVtZXJpYzpmdW5jdGlvbihhKXtyZXR1cm4gT3BlbkxheWVycy5TdHJpbmcubnVtYmVyUmVnRXgudGVzdChhKX0sbnVtZXJpY0lmOmZ1bmN0aW9uKGEsYil7dmFyIGM9YTshMD09PWImJihudWxsIT1hJiZhLnJlcGxhY2UpJiYoYT1hLnJlcGxhY2UoL15ccyp8XHMqJC9nLCIiKSk7cmV0dXJuIE9wZW5MYXllcnMuU3RyaW5nLmlzTnVtZXJpYyhhKT9wYXJzZUZsb2F0KGEpOmN9fTsKT3BlbkxheWVycy5OdW1iZXI9e2RlY2ltYWxTZXBhcmF0b3I6Ii4iLHRob3VzYW5kc1NlcGFyYXRvcjoiLCIsbGltaXRTaWdEaWdzOmZ1bmN0aW9uKGEsYil7dmFyIGM9MDswPGImJihjPXBhcnNlRmxvYXQoYS50b1ByZWNpc2lvbihiKSkpO3JldHVybiBjfSxmb3JtYXQ6ZnVuY3Rpb24oYSxiLGMsZCl7Yj0idW5kZWZpbmVkIiE9dHlwZW9mIGI/YjowO2M9InVuZGVmaW5lZCIhPXR5cGVvZiBjP2M6T3BlbkxheWVycy5OdW1iZXIudGhvdXNhbmRzU2VwYXJhdG9yO2Q9InVuZGVmaW5lZCIhPXR5cGVvZiBkP2Q6T3BlbkxheWVycy5OdW1iZXIuZGVjaW1hbFNlcGFyYXRvcjtudWxsIT1iJiYoYT1wYXJzZUZsb2F0KGEudG9GaXhlZChiKSkpO3ZhciBlPWEudG9TdHJpbmcoKS5zcGxpdCgiLiIpOzE9PWUubGVuZ3RoJiZudWxsPT1iJiYoYj0wKTthPWVbMF07aWYoYylmb3IodmFyIGY9LygtP1swLTldKykoWzAtOV17M30pLztmLnRlc3QoYSk7KWE9YS5yZXBsYWNlKGYsIiQxIitjKyIkMiIpOwowPT1iP2I9YTooYz0xPGUubGVuZ3RoP2VbMV06IjAiLG51bGwhPWImJihjKz1BcnJheShiLWMubGVuZ3RoKzEpLmpvaW4oIjAiKSksYj1hK2QrYyk7cmV0dXJuIGJ9LHplcm9QYWQ6ZnVuY3Rpb24oYSxiLGMpe2ZvcihhPWEudG9TdHJpbmcoY3x8MTApO2EubGVuZ3RoPGI7KWE9IjAiK2E7cmV0dXJuIGF9fTsKT3BlbkxheWVycy5GdW5jdGlvbj17YmluZDpmdW5jdGlvbihhLGIpe3ZhciBjPUFycmF5LnByb3RvdHlwZS5zbGljZS5hcHBseShhcmd1bWVudHMsWzJdKTtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgZD1jLmNvbmNhdChBcnJheS5wcm90b3R5cGUuc2xpY2UuYXBwbHkoYXJndW1lbnRzLFswXSkpO3JldHVybiBhLmFwcGx5KGIsZCl9fSxiaW5kQXNFdmVudExpc3RlbmVyOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGZ1bmN0aW9uKGMpe3JldHVybiBhLmNhbGwoYixjfHx3aW5kb3cuZXZlbnQpfX0sRmFsc2U6ZnVuY3Rpb24oKXtyZXR1cm4hMX0sVHJ1ZTpmdW5jdGlvbigpe3JldHVybiEwfSxWb2lkOmZ1bmN0aW9uKCl7fX07Ck9wZW5MYXllcnMuQXJyYXk9e2ZpbHRlcjpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9W107aWYoQXJyYXkucHJvdG90eXBlLmZpbHRlcilkPWEuZmlsdGVyKGIsYyk7ZWxzZXt2YXIgZT1hLmxlbmd0aDtpZigiZnVuY3Rpb24iIT10eXBlb2YgYil0aHJvdyBuZXcgVHlwZUVycm9yO2Zvcih2YXIgZj0wO2Y8ZTtmKyspaWYoZiBpbiBhKXt2YXIgZz1hW2ZdO2IuY2FsbChjLGcsZixhKSYmZC5wdXNoKGcpfX1yZXR1cm4gZH19O09wZW5MYXllcnMuQm91bmRzPU9wZW5MYXllcnMuQ2xhc3Moe2xlZnQ6bnVsbCxib3R0b206bnVsbCxyaWdodDpudWxsLHRvcDpudWxsLGNlbnRlckxvbkxhdDpudWxsLGluaXRpYWxpemU6ZnVuY3Rpb24oYSxiLGMsZCl7T3BlbkxheWVycy5VdGlsLmlzQXJyYXkoYSkmJihkPWFbM10sYz1hWzJdLGI9YVsxXSxhPWFbMF0pO251bGwhPWEmJih0aGlzLmxlZnQ9T3BlbkxheWVycy5VdGlsLnRvRmxvYXQoYSkpO251bGwhPWImJih0aGlzLmJvdHRvbT1PcGVuTGF5ZXJzLlV0aWwudG9GbG9hdChiKSk7bnVsbCE9YyYmKHRoaXMucmlnaHQ9T3BlbkxheWVycy5VdGlsLnRvRmxvYXQoYykpO251bGwhPWQmJih0aGlzLnRvcD1PcGVuTGF5ZXJzLlV0aWwudG9GbG9hdChkKSl9LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLkJvdW5kcyh0aGlzLmxlZnQsdGhpcy5ib3R0b20sdGhpcy5yaWdodCx0aGlzLnRvcCl9LGVxdWFsczpmdW5jdGlvbihhKXt2YXIgYj0hMTtudWxsIT0KYSYmKGI9dGhpcy5sZWZ0PT1hLmxlZnQmJnRoaXMucmlnaHQ9PWEucmlnaHQmJnRoaXMudG9wPT1hLnRvcCYmdGhpcy5ib3R0b209PWEuYm90dG9tKTtyZXR1cm4gYn0sdG9TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm5bdGhpcy5sZWZ0LHRoaXMuYm90dG9tLHRoaXMucmlnaHQsdGhpcy50b3BdLmpvaW4oKX0sdG9BcnJheTpmdW5jdGlvbihhKXtyZXR1cm4hMD09PWE/W3RoaXMuYm90dG9tLHRoaXMubGVmdCx0aGlzLnRvcCx0aGlzLnJpZ2h0XTpbdGhpcy5sZWZ0LHRoaXMuYm90dG9tLHRoaXMucmlnaHQsdGhpcy50b3BdfSx0b0JCT1g6ZnVuY3Rpb24oYSxiKXtudWxsPT1hJiYoYT02KTt2YXIgYz1NYXRoLnBvdygxMCxhKSxkPU1hdGgucm91bmQodGhpcy5sZWZ0KmMpL2MsZT1NYXRoLnJvdW5kKHRoaXMuYm90dG9tKmMpL2MsZj1NYXRoLnJvdW5kKHRoaXMucmlnaHQqYykvYyxjPU1hdGgucm91bmQodGhpcy50b3AqYykvYztyZXR1cm4hMD09PWI/ZSsiLCIrZCsiLCIrYysiLCIrZjpkKwoiLCIrZSsiLCIrZisiLCIrY30sdG9HZW9tZXRyeTpmdW5jdGlvbigpe3JldHVybiBuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2x5Z29uKFtuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5MaW5lYXJSaW5nKFtuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludCh0aGlzLmxlZnQsdGhpcy5ib3R0b20pLG5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KHRoaXMucmlnaHQsdGhpcy5ib3R0b20pLG5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KHRoaXMucmlnaHQsdGhpcy50b3ApLG5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KHRoaXMubGVmdCx0aGlzLnRvcCldKV0pfSxnZXRXaWR0aDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnJpZ2h0LXRoaXMubGVmdH0sZ2V0SGVpZ2h0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudG9wLXRoaXMuYm90dG9tfSxnZXRTaXplOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLlNpemUodGhpcy5nZXRXaWR0aCgpLHRoaXMuZ2V0SGVpZ2h0KCkpfSwKZ2V0Q2VudGVyUGl4ZWw6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IE9wZW5MYXllcnMuUGl4ZWwoKHRoaXMubGVmdCt0aGlzLnJpZ2h0KS8yLCh0aGlzLmJvdHRvbSt0aGlzLnRvcCkvMil9LGdldENlbnRlckxvbkxhdDpmdW5jdGlvbigpe3RoaXMuY2VudGVyTG9uTGF0fHwodGhpcy5jZW50ZXJMb25MYXQ9bmV3IE9wZW5MYXllcnMuTG9uTGF0KCh0aGlzLmxlZnQrdGhpcy5yaWdodCkvMiwodGhpcy5ib3R0b20rdGhpcy50b3ApLzIpKTtyZXR1cm4gdGhpcy5jZW50ZXJMb25MYXR9LHNjYWxlOmZ1bmN0aW9uKGEsYil7bnVsbD09YiYmKGI9dGhpcy5nZXRDZW50ZXJMb25MYXQoKSk7dmFyIGMsZDsiT3BlbkxheWVycy5Mb25MYXQiPT1iLkNMQVNTX05BTUU/KGM9Yi5sb24sZD1iLmxhdCk6KGM9Yi54LGQ9Yi55KTtyZXR1cm4gbmV3IE9wZW5MYXllcnMuQm91bmRzKCh0aGlzLmxlZnQtYykqYStjLCh0aGlzLmJvdHRvbS1kKSphK2QsKHRoaXMucmlnaHQtYykqYStjLCh0aGlzLnRvcC1kKSphKwpkKX0sYWRkOmZ1bmN0aW9uKGEsYil7aWYobnVsbD09YXx8bnVsbD09Yil0aHJvdyBuZXcgVHlwZUVycm9yKCJCb3VuZHMuYWRkIGNhbm5vdCByZWNlaXZlIG51bGwgdmFsdWVzIik7cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLkJvdW5kcyh0aGlzLmxlZnQrYSx0aGlzLmJvdHRvbStiLHRoaXMucmlnaHQrYSx0aGlzLnRvcCtiKX0sZXh0ZW5kOmZ1bmN0aW9uKGEpe2lmKGEpc3dpdGNoKGEuQ0xBU1NfTkFNRSl7Y2FzZSAiT3BlbkxheWVycy5Mb25MYXQiOnRoaXMuZXh0ZW5kWFkoYS5sb24sYS5sYXQpO2JyZWFrO2Nhc2UgIk9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQiOnRoaXMuZXh0ZW5kWFkoYS54LGEueSk7YnJlYWs7Y2FzZSAiT3BlbkxheWVycy5Cb3VuZHMiOnRoaXMuY2VudGVyTG9uTGF0PW51bGw7aWYobnVsbD09dGhpcy5sZWZ0fHxhLmxlZnQ8dGhpcy5sZWZ0KXRoaXMubGVmdD1hLmxlZnQ7aWYobnVsbD09dGhpcy5ib3R0b218fGEuYm90dG9tPHRoaXMuYm90dG9tKXRoaXMuYm90dG9tPQphLmJvdHRvbTtpZihudWxsPT10aGlzLnJpZ2h0fHxhLnJpZ2h0PnRoaXMucmlnaHQpdGhpcy5yaWdodD1hLnJpZ2h0O2lmKG51bGw9PXRoaXMudG9wfHxhLnRvcD50aGlzLnRvcCl0aGlzLnRvcD1hLnRvcH19LGV4dGVuZFhZOmZ1bmN0aW9uKGEsYil7dGhpcy5jZW50ZXJMb25MYXQ9bnVsbDtpZihudWxsPT10aGlzLmxlZnR8fGE8dGhpcy5sZWZ0KXRoaXMubGVmdD1hO2lmKG51bGw9PXRoaXMuYm90dG9tfHxiPHRoaXMuYm90dG9tKXRoaXMuYm90dG9tPWI7aWYobnVsbD09dGhpcy5yaWdodHx8YT50aGlzLnJpZ2h0KXRoaXMucmlnaHQ9YTtpZihudWxsPT10aGlzLnRvcHx8Yj50aGlzLnRvcCl0aGlzLnRvcD1ifSxjb250YWluc0xvbkxhdDpmdW5jdGlvbihhLGIpeyJib29sZWFuIj09PXR5cGVvZiBiJiYoYj17aW5jbHVzaXZlOmJ9KTtiPWJ8fHt9O3ZhciBjPXRoaXMuY29udGFpbnMoYS5sb24sYS5sYXQsYi5pbmNsdXNpdmUpLGQ9Yi53b3JsZEJvdW5kcztkJiYhYyYmKGM9ZC5nZXRXaWR0aCgpLApkPU1hdGgucm91bmQoKGEubG9uLShkLmxlZnQrZC5yaWdodCkvMikvYyksYz10aGlzLmNvbnRhaW5zTG9uTGF0KHtsb246YS5sb24tZCpjLGxhdDphLmxhdH0se2luY2x1c2l2ZTpiLmluY2x1c2l2ZX0pKTtyZXR1cm4gY30sY29udGFpbnNQaXhlbDpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLmNvbnRhaW5zKGEueCxhLnksYil9LGNvbnRhaW5zOmZ1bmN0aW9uKGEsYixjKXtudWxsPT1jJiYoYz0hMCk7aWYobnVsbD09YXx8bnVsbD09YilyZXR1cm4hMTthPU9wZW5MYXllcnMuVXRpbC50b0Zsb2F0KGEpO2I9T3BlbkxheWVycy5VdGlsLnRvRmxvYXQoYik7dmFyIGQ9ITE7cmV0dXJuIGQ9Yz9hPj10aGlzLmxlZnQmJmE8PXRoaXMucmlnaHQmJmI+PXRoaXMuYm90dG9tJiZiPD10aGlzLnRvcDphPnRoaXMubGVmdCYmYTx0aGlzLnJpZ2h0JiZiPnRoaXMuYm90dG9tJiZiPHRoaXMudG9wfSxpbnRlcnNlY3RzQm91bmRzOmZ1bmN0aW9uKGEsYil7ImJvb2xlYW4iPT09dHlwZW9mIGImJihiPQp7aW5jbHVzaXZlOmJ9KTtiPWJ8fHt9O2lmKGIud29ybGRCb3VuZHMpe3ZhciBjPXRoaXMud3JhcERhdGVMaW5lKGIud29ybGRCb3VuZHMpO2E9YS53cmFwRGF0ZUxpbmUoYi53b3JsZEJvdW5kcyl9ZWxzZSBjPXRoaXM7bnVsbD09Yi5pbmNsdXNpdmUmJihiLmluY2x1c2l2ZT0hMCk7dmFyIGQ9ITEsZT1jLmxlZnQ9PWEucmlnaHR8fGMucmlnaHQ9PWEubGVmdHx8Yy50b3A9PWEuYm90dG9tfHxjLmJvdHRvbT09YS50b3A7aWYoYi5pbmNsdXNpdmV8fCFlKXZhciBkPWEudG9wPj1jLmJvdHRvbSYmYS50b3A8PWMudG9wfHxjLnRvcD5hLmJvdHRvbSYmYy50b3A8YS50b3AsZT1hLmxlZnQ+PWMubGVmdCYmYS5sZWZ0PD1jLnJpZ2h0fHxjLmxlZnQ+PWEubGVmdCYmYy5sZWZ0PD1hLnJpZ2h0LGY9YS5yaWdodD49Yy5sZWZ0JiZhLnJpZ2h0PD1jLnJpZ2h0fHxjLnJpZ2h0Pj1hLmxlZnQmJmMucmlnaHQ8PWEucmlnaHQsZD0oYS5ib3R0b20+PWMuYm90dG9tJiZhLmJvdHRvbTw9Yy50b3B8fGMuYm90dG9tPj0KYS5ib3R0b20mJmMuYm90dG9tPD1hLnRvcHx8ZCkmJihlfHxmKTtpZihiLndvcmxkQm91bmRzJiYhZCl7dmFyIGc9Yi53b3JsZEJvdW5kcyxlPWcuZ2V0V2lkdGgoKSxmPSFnLmNvbnRhaW5zQm91bmRzKGMpLGc9IWcuY29udGFpbnNCb3VuZHMoYSk7ZiYmIWc/KGE9YS5hZGQoLWUsMCksZD1jLmludGVyc2VjdHNCb3VuZHMoYSx7aW5jbHVzaXZlOmIuaW5jbHVzaXZlfSkpOmcmJiFmJiYoYz1jLmFkZCgtZSwwKSxkPWEuaW50ZXJzZWN0c0JvdW5kcyhjLHtpbmNsdXNpdmU6Yi5pbmNsdXNpdmV9KSl9cmV0dXJuIGR9LGNvbnRhaW5zQm91bmRzOmZ1bmN0aW9uKGEsYixjKXtudWxsPT1iJiYoYj0hMSk7bnVsbD09YyYmKGM9ITApO3ZhciBkPXRoaXMuY29udGFpbnMoYS5sZWZ0LGEuYm90dG9tLGMpLGU9dGhpcy5jb250YWlucyhhLnJpZ2h0LGEuYm90dG9tLGMpLGY9dGhpcy5jb250YWlucyhhLmxlZnQsYS50b3AsYyk7YT10aGlzLmNvbnRhaW5zKGEucmlnaHQsYS50b3AsYyk7cmV0dXJuIGI/CmR8fGV8fGZ8fGE6ZCYmZSYmZiYmYX0sZGV0ZXJtaW5lUXVhZHJhbnQ6ZnVuY3Rpb24oYSl7dmFyIGI9IiIsYz10aGlzLmdldENlbnRlckxvbkxhdCgpLGI9YisoYS5sYXQ8Yy5sYXQ/ImIiOiJ0Iik7cmV0dXJuIGIrPWEubG9uPGMubG9uPyJsIjoiciJ9LHRyYW5zZm9ybTpmdW5jdGlvbihhLGIpe3RoaXMuY2VudGVyTG9uTGF0PW51bGw7dmFyIGM9T3BlbkxheWVycy5Qcm9qZWN0aW9uLnRyYW5zZm9ybSh7eDp0aGlzLmxlZnQseTp0aGlzLmJvdHRvbX0sYSxiKSxkPU9wZW5MYXllcnMuUHJvamVjdGlvbi50cmFuc2Zvcm0oe3g6dGhpcy5yaWdodCx5OnRoaXMuYm90dG9tfSxhLGIpLGU9T3BlbkxheWVycy5Qcm9qZWN0aW9uLnRyYW5zZm9ybSh7eDp0aGlzLmxlZnQseTp0aGlzLnRvcH0sYSxiKSxmPU9wZW5MYXllcnMuUHJvamVjdGlvbi50cmFuc2Zvcm0oe3g6dGhpcy5yaWdodCx5OnRoaXMudG9wfSxhLGIpO3RoaXMubGVmdD1NYXRoLm1pbihjLngsZS54KTt0aGlzLmJvdHRvbT1NYXRoLm1pbihjLnksCmQueSk7dGhpcy5yaWdodD1NYXRoLm1heChkLngsZi54KTt0aGlzLnRvcD1NYXRoLm1heChlLnksZi55KTtyZXR1cm4gdGhpc30sd3JhcERhdGVMaW5lOmZ1bmN0aW9uKGEsYil7Yj1ifHx7fTt2YXIgYz1iLmxlZnRUb2xlcmFuY2V8fDAsZD1iLnJpZ2h0VG9sZXJhbmNlfHwwLGU9dGhpcy5jbG9uZSgpO2lmKGEpe2Zvcih2YXIgZj1hLmdldFdpZHRoKCk7ZS5sZWZ0PGEubGVmdCYmZS5yaWdodC1kPD1hLmxlZnQ7KWU9ZS5hZGQoZiwwKTtmb3IoO2UubGVmdCtjPj1hLnJpZ2h0JiZlLnJpZ2h0PmEucmlnaHQ7KWU9ZS5hZGQoLWYsMCk7Yz1lLmxlZnQrYztjPGEucmlnaHQmJihjPmEubGVmdCYmZS5yaWdodC1kPmEucmlnaHQpJiYoZT1lLmFkZCgtZiwwKSl9cmV0dXJuIGV9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuQm91bmRzIn0pOwpPcGVuTGF5ZXJzLkJvdW5kcy5mcm9tU3RyaW5nPWZ1bmN0aW9uKGEsYil7dmFyIGM9YS5zcGxpdCgiLCIpO3JldHVybiBPcGVuTGF5ZXJzLkJvdW5kcy5mcm9tQXJyYXkoYyxiKX07T3BlbkxheWVycy5Cb3VuZHMuZnJvbUFycmF5PWZ1bmN0aW9uKGEsYil7cmV0dXJuITA9PT1iP25ldyBPcGVuTGF5ZXJzLkJvdW5kcyhhWzFdLGFbMF0sYVszXSxhWzJdKTpuZXcgT3BlbkxheWVycy5Cb3VuZHMoYVswXSxhWzFdLGFbMl0sYVszXSl9O09wZW5MYXllcnMuQm91bmRzLmZyb21TaXplPWZ1bmN0aW9uKGEpe3JldHVybiBuZXcgT3BlbkxheWVycy5Cb3VuZHMoMCxhLmgsYS53LDApfTtPcGVuTGF5ZXJzLkJvdW5kcy5vcHBvc2l0ZVF1YWRyYW50PWZ1bmN0aW9uKGEpe3ZhciBiO2I9IiIrKCJ0Ij09YS5jaGFyQXQoMCk/ImIiOiJ0Iik7cmV0dXJuIGIrPSJsIj09YS5jaGFyQXQoMSk/InIiOiJsIn07T3BlbkxheWVycy5FbGVtZW50PXt2aXNpYmxlOmZ1bmN0aW9uKGEpe3JldHVybiJub25lIiE9T3BlbkxheWVycy5VdGlsLmdldEVsZW1lbnQoYSkuc3R5bGUuZGlzcGxheX0sdG9nZ2xlOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPTAsYj1hcmd1bWVudHMubGVuZ3RoO2E8YjthKyspe3ZhciBjPU9wZW5MYXllcnMuVXRpbC5nZXRFbGVtZW50KGFyZ3VtZW50c1thXSksZD1PcGVuTGF5ZXJzLkVsZW1lbnQudmlzaWJsZShjKT8ibm9uZSI6IiI7Yy5zdHlsZS5kaXNwbGF5PWR9fSxyZW1vdmU6ZnVuY3Rpb24oYSl7YT1PcGVuTGF5ZXJzLlV0aWwuZ2V0RWxlbWVudChhKTthLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYSl9LGdldEhlaWdodDpmdW5jdGlvbihhKXthPU9wZW5MYXllcnMuVXRpbC5nZXRFbGVtZW50KGEpO3JldHVybiBhLm9mZnNldEhlaWdodH0saGFzQ2xhc3M6ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLmNsYXNzTmFtZTtyZXR1cm4hIWMmJlJlZ0V4cCgiKF58XFxzKSIrYisiKFxcc3wkKSIpLnRlc3QoYyl9LAphZGRDbGFzczpmdW5jdGlvbihhLGIpe09wZW5MYXllcnMuRWxlbWVudC5oYXNDbGFzcyhhLGIpfHwoYS5jbGFzc05hbWUrPShhLmNsYXNzTmFtZT8iICI6IiIpK2IpO3JldHVybiBhfSxyZW1vdmVDbGFzczpmdW5jdGlvbihhLGIpe3ZhciBjPWEuY2xhc3NOYW1lO2MmJihhLmNsYXNzTmFtZT1PcGVuTGF5ZXJzLlN0cmluZy50cmltKGMucmVwbGFjZShSZWdFeHAoIihefFxccyspIitiKyIoXFxzK3wkKSIpLCIgIikpKTtyZXR1cm4gYX0sdG9nZ2xlQ2xhc3M6ZnVuY3Rpb24oYSxiKXtPcGVuTGF5ZXJzLkVsZW1lbnQuaGFzQ2xhc3MoYSxiKT9PcGVuTGF5ZXJzLkVsZW1lbnQucmVtb3ZlQ2xhc3MoYSxiKTpPcGVuTGF5ZXJzLkVsZW1lbnQuYWRkQ2xhc3MoYSxiKTtyZXR1cm4gYX0sZ2V0U3R5bGU6ZnVuY3Rpb24oYSxiKXthPU9wZW5MYXllcnMuVXRpbC5nZXRFbGVtZW50KGEpO3ZhciBjPW51bGw7aWYoYSYmYS5zdHlsZSl7Yz1hLnN0eWxlW09wZW5MYXllcnMuU3RyaW5nLmNhbWVsaXplKGIpXTsKY3x8KGRvY3VtZW50LmRlZmF1bHRWaWV3JiZkb2N1bWVudC5kZWZhdWx0Vmlldy5nZXRDb21wdXRlZFN0eWxlP2M9KGM9ZG9jdW1lbnQuZGVmYXVsdFZpZXcuZ2V0Q29tcHV0ZWRTdHlsZShhLG51bGwpKT9jLmdldFByb3BlcnR5VmFsdWUoYik6bnVsbDphLmN1cnJlbnRTdHlsZSYmKGM9YS5jdXJyZW50U3R5bGVbT3BlbkxheWVycy5TdHJpbmcuY2FtZWxpemUoYildKSk7dmFyIGQ9WyJsZWZ0IiwidG9wIiwicmlnaHQiLCJib3R0b20iXTt3aW5kb3cub3BlcmEmJigtMSE9T3BlbkxheWVycy5VdGlsLmluZGV4T2YoZCxiKSYmInN0YXRpYyI9PU9wZW5MYXllcnMuRWxlbWVudC5nZXRTdHlsZShhLCJwb3NpdGlvbiIpKSYmKGM9ImF1dG8iKX1yZXR1cm4iYXV0byI9PWM/bnVsbDpjfX07T3BlbkxheWVycy5Mb25MYXQ9T3BlbkxheWVycy5DbGFzcyh7bG9uOjAsbGF0OjAsaW5pdGlhbGl6ZTpmdW5jdGlvbihhLGIpe09wZW5MYXllcnMuVXRpbC5pc0FycmF5KGEpJiYoYj1hWzFdLGE9YVswXSk7dGhpcy5sb249T3BlbkxheWVycy5VdGlsLnRvRmxvYXQoYSk7dGhpcy5sYXQ9T3BlbkxheWVycy5VdGlsLnRvRmxvYXQoYil9LHRvU3RyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuImxvbj0iK3RoaXMubG9uKyIsbGF0PSIrdGhpcy5sYXR9LHRvU2hvcnRTdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sb24rIiwgIit0aGlzLmxhdH0sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IE9wZW5MYXllcnMuTG9uTGF0KHRoaXMubG9uLHRoaXMubGF0KX0sYWRkOmZ1bmN0aW9uKGEsYil7aWYobnVsbD09YXx8bnVsbD09Yil0aHJvdyBuZXcgVHlwZUVycm9yKCJMb25MYXQuYWRkIGNhbm5vdCByZWNlaXZlIG51bGwgdmFsdWVzIik7cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLkxvbkxhdCh0aGlzLmxvbisKT3BlbkxheWVycy5VdGlsLnRvRmxvYXQoYSksdGhpcy5sYXQrT3BlbkxheWVycy5VdGlsLnRvRmxvYXQoYikpfSxlcXVhbHM6ZnVuY3Rpb24oYSl7dmFyIGI9ITE7bnVsbCE9YSYmKGI9dGhpcy5sb249PWEubG9uJiZ0aGlzLmxhdD09YS5sYXR8fGlzTmFOKHRoaXMubG9uKSYmaXNOYU4odGhpcy5sYXQpJiZpc05hTihhLmxvbikmJmlzTmFOKGEubGF0KSk7cmV0dXJuIGJ9LHRyYW5zZm9ybTpmdW5jdGlvbihhLGIpe3ZhciBjPU9wZW5MYXllcnMuUHJvamVjdGlvbi50cmFuc2Zvcm0oe3g6dGhpcy5sb24seTp0aGlzLmxhdH0sYSxiKTt0aGlzLmxvbj1jLng7dGhpcy5sYXQ9Yy55O3JldHVybiB0aGlzfSx3cmFwRGF0ZUxpbmU6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jbG9uZSgpO2lmKGEpe2Zvcig7Yi5sb248YS5sZWZ0OyliLmxvbis9YS5nZXRXaWR0aCgpO2Zvcig7Yi5sb24+YS5yaWdodDspYi5sb24tPWEuZ2V0V2lkdGgoKX1yZXR1cm4gYn0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Mb25MYXQifSk7Ck9wZW5MYXllcnMuTG9uTGF0LmZyb21TdHJpbmc9ZnVuY3Rpb24oYSl7YT1hLnNwbGl0KCIsIik7cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLkxvbkxhdChhWzBdLGFbMV0pfTtPcGVuTGF5ZXJzLkxvbkxhdC5mcm9tQXJyYXk9ZnVuY3Rpb24oYSl7dmFyIGI9T3BlbkxheWVycy5VdGlsLmlzQXJyYXkoYSk7cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLkxvbkxhdChiJiZhWzBdLGImJmFbMV0pfTtPcGVuTGF5ZXJzLlBpeGVsPU9wZW5MYXllcnMuQ2xhc3Moe3g6MCx5OjAsaW5pdGlhbGl6ZTpmdW5jdGlvbihhLGIpe3RoaXMueD1wYXJzZUZsb2F0KGEpO3RoaXMueT1wYXJzZUZsb2F0KGIpfSx0b1N0cmluZzpmdW5jdGlvbigpe3JldHVybiJ4PSIrdGhpcy54KyIseT0iK3RoaXMueX0sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IE9wZW5MYXllcnMuUGl4ZWwodGhpcy54LHRoaXMueSl9LGVxdWFsczpmdW5jdGlvbihhKXt2YXIgYj0hMTtudWxsIT1hJiYoYj10aGlzLng9PWEueCYmdGhpcy55PT1hLnl8fGlzTmFOKHRoaXMueCkmJmlzTmFOKHRoaXMueSkmJmlzTmFOKGEueCkmJmlzTmFOKGEueSkpO3JldHVybiBifSxkaXN0YW5jZVRvOmZ1bmN0aW9uKGEpe3JldHVybiBNYXRoLnNxcnQoTWF0aC5wb3codGhpcy54LWEueCwyKStNYXRoLnBvdyh0aGlzLnktYS55LDIpKX0sYWRkOmZ1bmN0aW9uKGEsYil7aWYobnVsbD09YXx8bnVsbD09Yil0aHJvdyBuZXcgVHlwZUVycm9yKCJQaXhlbC5hZGQgY2Fubm90IHJlY2VpdmUgbnVsbCB2YWx1ZXMiKTsKcmV0dXJuIG5ldyBPcGVuTGF5ZXJzLlBpeGVsKHRoaXMueCthLHRoaXMueStiKX0sb2Zmc2V0OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY2xvbmUoKTthJiYoYj10aGlzLmFkZChhLngsYS55KSk7cmV0dXJuIGJ9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuUGl4ZWwifSk7T3BlbkxheWVycy5TaXplPU9wZW5MYXllcnMuQ2xhc3Moe3c6MCxoOjAsaW5pdGlhbGl6ZTpmdW5jdGlvbihhLGIpe3RoaXMudz1wYXJzZUZsb2F0KGEpO3RoaXMuaD1wYXJzZUZsb2F0KGIpfSx0b1N0cmluZzpmdW5jdGlvbigpe3JldHVybiJ3PSIrdGhpcy53KyIsaD0iK3RoaXMuaH0sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IE9wZW5MYXllcnMuU2l6ZSh0aGlzLncsdGhpcy5oKX0sZXF1YWxzOmZ1bmN0aW9uKGEpe3ZhciBiPSExO251bGwhPWEmJihiPXRoaXMudz09YS53JiZ0aGlzLmg9PWEuaHx8aXNOYU4odGhpcy53KSYmaXNOYU4odGhpcy5oKSYmaXNOYU4oYS53KSYmaXNOYU4oYS5oKSk7cmV0dXJuIGJ9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuU2l6ZSJ9KTtPcGVuTGF5ZXJzLkNvbnNvbGU9e2xvZzpmdW5jdGlvbigpe30sZGVidWc6ZnVuY3Rpb24oKXt9LGluZm86ZnVuY3Rpb24oKXt9LHdhcm46ZnVuY3Rpb24oKXt9LGVycm9yOmZ1bmN0aW9uKCl7fSx1c2VyRXJyb3I6ZnVuY3Rpb24oYSl7YWxlcnQoYSl9LGFzc2VydDpmdW5jdGlvbigpe30sZGlyOmZ1bmN0aW9uKCl7fSxkaXJ4bWw6ZnVuY3Rpb24oKXt9LHRyYWNlOmZ1bmN0aW9uKCl7fSxncm91cDpmdW5jdGlvbigpe30sZ3JvdXBFbmQ6ZnVuY3Rpb24oKXt9LHRpbWU6ZnVuY3Rpb24oKXt9LHRpbWVFbmQ6ZnVuY3Rpb24oKXt9LHByb2ZpbGU6ZnVuY3Rpb24oKXt9LHByb2ZpbGVFbmQ6ZnVuY3Rpb24oKXt9LGNvdW50OmZ1bmN0aW9uKCl7fSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkNvbnNvbGUifTsKKGZ1bmN0aW9uKCl7Zm9yKHZhciBhPWRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJzY3JpcHQiKSxiPTAsYz1hLmxlbmd0aDtiPGM7KytiKWlmKC0xIT1hW2JdLnNyYy5pbmRleE9mKCJmaXJlYnVnLmpzIikmJmNvbnNvbGUpe09wZW5MYXllcnMuVXRpbC5leHRlbmQoT3BlbkxheWVycy5Db25zb2xlLGNvbnNvbGUpO2JyZWFrfX0pKCk7T3BlbkxheWVycy5MYW5nPXtjb2RlOm51bGwsZGVmYXVsdENvZGU6ImVuIixnZXRDb2RlOmZ1bmN0aW9uKCl7T3BlbkxheWVycy5MYW5nLmNvZGV8fE9wZW5MYXllcnMuTGFuZy5zZXRDb2RlKCk7cmV0dXJuIE9wZW5MYXllcnMuTGFuZy5jb2RlfSxzZXRDb2RlOmZ1bmN0aW9uKGEpe3ZhciBiO2F8fChhPSJtc2llIj09T3BlbkxheWVycy5CUk9XU0VSX05BTUU/bmF2aWdhdG9yLnVzZXJMYW5ndWFnZTpuYXZpZ2F0b3IubGFuZ3VhZ2UpO2E9YS5zcGxpdCgiLSIpO2FbMF09YVswXS50b0xvd2VyQ2FzZSgpOyJvYmplY3QiPT10eXBlb2YgT3BlbkxheWVycy5MYW5nW2FbMF1dJiYoYj1hWzBdKTtpZihhWzFdKXt2YXIgYz1hWzBdKyItIithWzFdLnRvVXBwZXJDYXNlKCk7Im9iamVjdCI9PXR5cGVvZiBPcGVuTGF5ZXJzLkxhbmdbY10mJihiPWMpfWJ8fChPcGVuTGF5ZXJzLkNvbnNvbGUud2FybigiRmFpbGVkIHRvIGZpbmQgT3BlbkxheWVycy5MYW5nLiIrYS5qb2luKCItIikrIiBkaWN0aW9uYXJ5LCBmYWxsaW5nIGJhY2sgdG8gZGVmYXVsdCBsYW5ndWFnZSIpLApiPU9wZW5MYXllcnMuTGFuZy5kZWZhdWx0Q29kZSk7T3BlbkxheWVycy5MYW5nLmNvZGU9Yn0sdHJhbnNsYXRlOmZ1bmN0aW9uKGEsYil7dmFyIGM9T3BlbkxheWVycy5MYW5nW09wZW5MYXllcnMuTGFuZy5nZXRDb2RlKCldOyhjPWMmJmNbYV0pfHwoYz1hKTtiJiYoYz1PcGVuTGF5ZXJzLlN0cmluZy5mb3JtYXQoYyxiKSk7cmV0dXJuIGN9fTtPcGVuTGF5ZXJzLmkxOG49T3BlbkxheWVycy5MYW5nLnRyYW5zbGF0ZTtPcGVuTGF5ZXJzLlV0aWw9T3BlbkxheWVycy5VdGlsfHx7fTtPcGVuTGF5ZXJzLlV0aWwuZ2V0RWxlbWVudD1mdW5jdGlvbigpe2Zvcih2YXIgYT1bXSxiPTAsYz1hcmd1bWVudHMubGVuZ3RoO2I8YztiKyspe3ZhciBkPWFyZ3VtZW50c1tiXTsic3RyaW5nIj09dHlwZW9mIGQmJihkPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGQpKTtpZigxPT1hcmd1bWVudHMubGVuZ3RoKXJldHVybiBkO2EucHVzaChkKX1yZXR1cm4gYX07T3BlbkxheWVycy5VdGlsLmlzRWxlbWVudD1mdW5jdGlvbihhKXtyZXR1cm4hKCFhfHwxIT09YS5ub2RlVHlwZSl9O09wZW5MYXllcnMuVXRpbC5pc0FycmF5PWZ1bmN0aW9uKGEpe3JldHVybiJbb2JqZWN0IEFycmF5XSI9PT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoYSl9O09wZW5MYXllcnMuVXRpbC5yZW1vdmVJdGVtPWZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPWEubGVuZ3RoLTE7MDw9YztjLS0pYVtjXT09YiYmYS5zcGxpY2UoYywxKTtyZXR1cm4gYX07Ck9wZW5MYXllcnMuVXRpbC5pbmRleE9mPWZ1bmN0aW9uKGEsYil7aWYoImZ1bmN0aW9uIj09dHlwZW9mIGEuaW5kZXhPZilyZXR1cm4gYS5pbmRleE9mKGIpO2Zvcih2YXIgYz0wLGQ9YS5sZW5ndGg7YzxkO2MrKylpZihhW2NdPT1iKXJldHVybiBjO3JldHVybi0xfTtPcGVuTGF5ZXJzLlV0aWwuZG90bGVzcz0vXC4vZzsKT3BlbkxheWVycy5VdGlsLm1vZGlmeURPTUVsZW1lbnQ9ZnVuY3Rpb24oYSxiLGMsZCxlLGYsZyxoKXtiJiYoYS5pZD1iLnJlcGxhY2UoT3BlbkxheWVycy5VdGlsLmRvdGxlc3MsIl8iKSk7YyYmKGEuc3R5bGUubGVmdD1jLngrInB4IixhLnN0eWxlLnRvcD1jLnkrInB4Iik7ZCYmKGEuc3R5bGUud2lkdGg9ZC53KyJweCIsYS5zdHlsZS5oZWlnaHQ9ZC5oKyJweCIpO2UmJihhLnN0eWxlLnBvc2l0aW9uPWUpO2YmJihhLnN0eWxlLmJvcmRlcj1mKTtnJiYoYS5zdHlsZS5vdmVyZmxvdz1nKTswPD1wYXJzZUZsb2F0KGgpJiYxPnBhcnNlRmxvYXQoaCk/KGEuc3R5bGUuZmlsdGVyPSJhbHBoYShvcGFjaXR5PSIrMTAwKmgrIikiLGEuc3R5bGUub3BhY2l0eT1oKToxPT1wYXJzZUZsb2F0KGgpJiYoYS5zdHlsZS5maWx0ZXI9IiIsYS5zdHlsZS5vcGFjaXR5PSIiKX07Ck9wZW5MYXllcnMuVXRpbC5jcmVhdGVEaXY9ZnVuY3Rpb24oYSxiLGMsZCxlLGYsZyxoKXt2YXIgaz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTtkJiYoay5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2U9InVybCgiK2QrIikiKTthfHwoYT1PcGVuTGF5ZXJzLlV0aWwuY3JlYXRlVW5pcXVlSUQoIk9wZW5MYXllcnNEaXYiKSk7ZXx8KGU9ImFic29sdXRlIik7T3BlbkxheWVycy5VdGlsLm1vZGlmeURPTUVsZW1lbnQoayxhLGIsYyxlLGYsZyxoKTtyZXR1cm4ga307Ck9wZW5MYXllcnMuVXRpbC5jcmVhdGVJbWFnZT1mdW5jdGlvbihhLGIsYyxkLGUsZixnLGgpe3ZhciBrPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImltZyIpO2F8fChhPU9wZW5MYXllcnMuVXRpbC5jcmVhdGVVbmlxdWVJRCgiT3BlbkxheWVyc0RpdiIpKTtlfHwoZT0icmVsYXRpdmUiKTtPcGVuTGF5ZXJzLlV0aWwubW9kaWZ5RE9NRWxlbWVudChrLGEsYixjLGUsZixudWxsLGcpO2gmJihrLnN0eWxlLmRpc3BsYXk9Im5vbmUiLGI9ZnVuY3Rpb24oKXtrLnN0eWxlLmRpc3BsYXk9IiI7T3BlbkxheWVycy5FdmVudC5zdG9wT2JzZXJ2aW5nRWxlbWVudChrKX0sT3BlbkxheWVycy5FdmVudC5vYnNlcnZlKGssImxvYWQiLGIpLE9wZW5MYXllcnMuRXZlbnQub2JzZXJ2ZShrLCJlcnJvciIsYikpO2suc3R5bGUuYWx0PWE7ay5nYWxsZXJ5SW1nPSJubyI7ZCYmKGsuc3JjPWQpO3JldHVybiBrfTtPcGVuTGF5ZXJzLklNQUdFX1JFTE9BRF9BVFRFTVBUUz0wOwpPcGVuTGF5ZXJzLlV0aWwuYWxwaGFIYWNrTmVlZGVkPW51bGw7T3BlbkxheWVycy5VdGlsLmFscGhhSGFjaz1mdW5jdGlvbigpe2lmKG51bGw9PU9wZW5MYXllcnMuVXRpbC5hbHBoYUhhY2tOZWVkZWQpe3ZhciBhPW5hdmlnYXRvci5hcHBWZXJzaW9uLnNwbGl0KCJNU0lFIiksYT1wYXJzZUZsb2F0KGFbMV0pLGI9ITE7dHJ5e2I9ISFkb2N1bWVudC5ib2R5LmZpbHRlcnN9Y2F0Y2goYyl7fU9wZW5MYXllcnMuVXRpbC5hbHBoYUhhY2tOZWVkZWQ9YiYmNS41PD1hJiY3PmF9cmV0dXJuIE9wZW5MYXllcnMuVXRpbC5hbHBoYUhhY2tOZWVkZWR9OwpPcGVuTGF5ZXJzLlV0aWwubW9kaWZ5QWxwaGFJbWFnZURpdj1mdW5jdGlvbihhLGIsYyxkLGUsZixnLGgsayl7T3BlbkxheWVycy5VdGlsLm1vZGlmeURPTUVsZW1lbnQoYSxiLGMsZCxmLG51bGwsbnVsbCxrKTtiPWEuY2hpbGROb2Rlc1swXTtlJiYoYi5zcmM9ZSk7T3BlbkxheWVycy5VdGlsLm1vZGlmeURPTUVsZW1lbnQoYixhLmlkKyJfaW5uZXJJbWFnZSIsbnVsbCxkLCJyZWxhdGl2ZSIsZyk7T3BlbkxheWVycy5VdGlsLmFscGhhSGFjaygpJiYoIm5vbmUiIT1hLnN0eWxlLmRpc3BsYXkmJihhLnN0eWxlLmRpc3BsYXk9ImlubGluZS1ibG9jayIpLG51bGw9PWgmJihoPSJzY2FsZSIpLGEuc3R5bGUuZmlsdGVyPSJwcm9naWQ6RFhJbWFnZVRyYW5zZm9ybS5NaWNyb3NvZnQuQWxwaGFJbWFnZUxvYWRlcihzcmM9JyIrYi5zcmMrIicsIHNpemluZ01ldGhvZD0nIitoKyInKSIsMDw9cGFyc2VGbG9hdChhLnN0eWxlLm9wYWNpdHkpJiYxPnBhcnNlRmxvYXQoYS5zdHlsZS5vcGFjaXR5KSYmCihhLnN0eWxlLmZpbHRlcis9IiBhbHBoYShvcGFjaXR5PSIrMTAwKmEuc3R5bGUub3BhY2l0eSsiKSIpLGIuc3R5bGUuZmlsdGVyPSJhbHBoYShvcGFjaXR5PTApIil9O09wZW5MYXllcnMuVXRpbC5jcmVhdGVBbHBoYUltYWdlRGl2PWZ1bmN0aW9uKGEsYixjLGQsZSxmLGcsaCxrKXt2YXIgbD1PcGVuTGF5ZXJzLlV0aWwuY3JlYXRlRGl2KCk7az1PcGVuTGF5ZXJzLlV0aWwuY3JlYXRlSW1hZ2UobnVsbCxudWxsLG51bGwsbnVsbCxudWxsLG51bGwsbnVsbCxrKTtrLmNsYXNzTmFtZT0ib2xBbHBoYUltZyI7bC5hcHBlbmRDaGlsZChrKTtPcGVuTGF5ZXJzLlV0aWwubW9kaWZ5QWxwaGFJbWFnZURpdihsLGEsYixjLGQsZSxmLGcsaCk7cmV0dXJuIGx9O09wZW5MYXllcnMuVXRpbC51cHBlckNhc2VPYmplY3Q9ZnVuY3Rpb24oYSl7dmFyIGI9e30sYztmb3IoYyBpbiBhKWJbYy50b1VwcGVyQ2FzZSgpXT1hW2NdO3JldHVybiBifTsKT3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHM9ZnVuY3Rpb24oYSxiKXthPWF8fHt9O3ZhciBjPSJmdW5jdGlvbiI9PXR5cGVvZiB3aW5kb3cuRXZlbnQmJmIgaW5zdGFuY2VvZiB3aW5kb3cuRXZlbnQsZDtmb3IoZCBpbiBiKWlmKHZvaWQgMD09PWFbZF18fCFjJiZiLmhhc093blByb3BlcnR5JiZiLmhhc093blByb3BlcnR5KGQpJiYhYS5oYXNPd25Qcm9wZXJ0eShkKSlhW2RdPWJbZF07IWMmJihiJiZiLmhhc093blByb3BlcnR5JiZiLmhhc093blByb3BlcnR5KCJ0b1N0cmluZyIpJiYhYS5oYXNPd25Qcm9wZXJ0eSgidG9TdHJpbmciKSkmJihhLnRvU3RyaW5nPWIudG9TdHJpbmcpO3JldHVybiBhfTsKT3BlbkxheWVycy5VdGlsLmdldFBhcmFtZXRlclN0cmluZz1mdW5jdGlvbihhKXt2YXIgYj1bXSxjO2ZvcihjIGluIGEpe3ZhciBkPWFbY107aWYobnVsbCE9ZCYmImZ1bmN0aW9uIiE9dHlwZW9mIGQpe2lmKCJvYmplY3QiPT10eXBlb2YgZCYmZC5jb25zdHJ1Y3Rvcj09QXJyYXkpe2Zvcih2YXIgZT1bXSxmLGc9MCxoPWQubGVuZ3RoO2c8aDtnKyspZj1kW2ddLGUucHVzaChlbmNvZGVVUklDb21wb25lbnQobnVsbD09PWZ8fHZvaWQgMD09PWY/IiI6ZikpO2Q9ZS5qb2luKCIsIil9ZWxzZSBkPWVuY29kZVVSSUNvbXBvbmVudChkKTtiLnB1c2goZW5jb2RlVVJJQ29tcG9uZW50KGMpKyI9IitkKX19cmV0dXJuIGIuam9pbigiJiIpfTtPcGVuTGF5ZXJzLlV0aWwudXJsQXBwZW5kPWZ1bmN0aW9uKGEsYil7dmFyIGM9YTtpZihiKXZhciBkPShhKyIgIikuc3BsaXQoL1s/Jl0vKSxjPWMrKCIgIj09PWQucG9wKCk/YjpkLmxlbmd0aD8iJiIrYjoiPyIrYik7cmV0dXJuIGN9OwpPcGVuTGF5ZXJzLlV0aWwuZ2V0SW1hZ2VzTG9jYXRpb249ZnVuY3Rpb24oKXtyZXR1cm4gT3BlbkxheWVycy5JbWdQYXRofHxPcGVuTGF5ZXJzLl9nZXRTY3JpcHRMb2NhdGlvbigpKyJpbWcvIn07T3BlbkxheWVycy5VdGlsLmdldEltYWdlTG9jYXRpb249ZnVuY3Rpb24oYSl7cmV0dXJuIE9wZW5MYXllcnMuVXRpbC5nZXRJbWFnZXNMb2NhdGlvbigpK2F9O09wZW5MYXllcnMuVXRpbC5Ucnk9ZnVuY3Rpb24oKXtmb3IodmFyIGE9bnVsbCxiPTAsYz1hcmd1bWVudHMubGVuZ3RoO2I8YztiKyspe3ZhciBkPWFyZ3VtZW50c1tiXTt0cnl7YT1kKCk7YnJlYWt9Y2F0Y2goZSl7fX1yZXR1cm4gYX07Ck9wZW5MYXllcnMuVXRpbC5nZXRYbWxOb2RlVmFsdWU9ZnVuY3Rpb24oYSl7dmFyIGI9bnVsbDtPcGVuTGF5ZXJzLlV0aWwuVHJ5KGZ1bmN0aW9uKCl7Yj1hLnRleHQ7Ynx8KGI9YS50ZXh0Q29udGVudCk7Ynx8KGI9YS5maXJzdENoaWxkLm5vZGVWYWx1ZSl9LGZ1bmN0aW9uKCl7Yj1hLnRleHRDb250ZW50fSk7cmV0dXJuIGJ9O09wZW5MYXllcnMuVXRpbC5tb3VzZUxlZnQ9ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9YS5yZWxhdGVkVGFyZ2V0P2EucmVsYXRlZFRhcmdldDphLnRvRWxlbWVudDtjIT1iJiZudWxsIT1jOyljPWMucGFyZW50Tm9kZTtyZXR1cm4gYyE9Yn07T3BlbkxheWVycy5VdGlsLkRFRkFVTFRfUFJFQ0lTSU9OPTE0O09wZW5MYXllcnMuVXRpbC50b0Zsb2F0PWZ1bmN0aW9uKGEsYil7bnVsbD09YiYmKGI9T3BlbkxheWVycy5VdGlsLkRFRkFVTFRfUFJFQ0lTSU9OKTsibnVtYmVyIiE9PXR5cGVvZiBhJiYoYT1wYXJzZUZsb2F0KGEpKTtyZXR1cm4gMD09PWI/YTpwYXJzZUZsb2F0KGEudG9QcmVjaXNpb24oYikpfTsKT3BlbkxheWVycy5VdGlsLnJhZD1mdW5jdGlvbihhKXtyZXR1cm4gYSpNYXRoLlBJLzE4MH07T3BlbkxheWVycy5VdGlsLmRlZz1mdW5jdGlvbihhKXtyZXR1cm4gMTgwKmEvTWF0aC5QSX07T3BlbkxheWVycy5VdGlsLlZpbmNlbnR5Q29uc3RhbnRzPXthOjYzNzgxMzcsYjo2MzU2NzUyLjMxNDIsZjoxLzI5OC4yNTcyMjM1NjN9OwpPcGVuTGF5ZXJzLlV0aWwuZGlzdFZpbmNlbnR5PWZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPU9wZW5MYXllcnMuVXRpbC5WaW5jZW50eUNvbnN0YW50cyxkPWMuYSxlPWMuYixjPWMuZixmPU9wZW5MYXllcnMuVXRpbC5yYWQoYi5sb24tYS5sb24pLGc9TWF0aC5hdGFuKCgxLWMpKk1hdGgudGFuKE9wZW5MYXllcnMuVXRpbC5yYWQoYS5sYXQpKSksaD1NYXRoLmF0YW4oKDEtYykqTWF0aC50YW4oT3BlbkxheWVycy5VdGlsLnJhZChiLmxhdCkpKSxrPU1hdGguc2luKGcpLGc9TWF0aC5jb3MoZyksbD1NYXRoLnNpbihoKSxoPU1hdGguY29zKGgpLG09ZixuPTIqTWF0aC5QSSxwPTIwOzFFLTEyPE1hdGguYWJzKG0tbikmJjA8LS1wOyl7dmFyIHE9TWF0aC5zaW4obSkscj1NYXRoLmNvcyhtKSxzPU1hdGguc3FydChoKnEqaCpxKyhnKmwtaypoKnIpKihnKmwtaypoKnIpKTtpZigwPT1zKXJldHVybiAwO3ZhciByPWsqbCtnKmgqcix0PU1hdGguYXRhbjIocyxyKSx1PU1hdGguYXNpbihnKmgqCnEvcyksdj1NYXRoLmNvcyh1KSpNYXRoLmNvcyh1KSxxPXItMiprKmwvdix3PWMvMTYqdiooNCtjKig0LTMqdikpLG49bSxtPWYrKDEtdykqYypNYXRoLnNpbih1KSoodCt3KnMqKHErdypyKigtMSsyKnEqcSkpKX1pZigwPT1wKXJldHVybiBOYU47ZD12KihkKmQtZSplKS8oZSplKTtjPWQvMTAyNCooMjU2K2QqKC0xMjgrZCooNzQtNDcqZCkpKTtyZXR1cm4oZSooMStkLzE2Mzg0Kig0MDk2K2QqKC03NjgrZCooMzIwLTE3NSpkKSkpKSoodC1jKnMqKHErYy80KihyKigtMSsyKnEqcSktYy82KnEqKC0zKzQqcypzKSooLTMrNCpxKnEpKSkpKS50b0ZpeGVkKDMpLzFFM307Ck9wZW5MYXllcnMuVXRpbC5kZXN0aW5hdGlvblZpbmNlbnR5PWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1PcGVuTGF5ZXJzLlV0aWwsZT1kLlZpbmNlbnR5Q29uc3RhbnRzLGY9ZS5hLGc9ZS5iLGg9ZS5mLGU9YS5sb247YT1hLmxhdDt2YXIgaz1kLnJhZChiKTtiPU1hdGguc2luKGspO2s9TWF0aC5jb3Moayk7YT0oMS1oKSpNYXRoLnRhbihkLnJhZChhKSk7dmFyIGw9MS9NYXRoLnNxcnQoMSthKmEpLG09YSpsLG49TWF0aC5hdGFuMihhLGspO2E9bCpiO2Zvcih2YXIgcD0xLWEqYSxmPXAqKGYqZi1nKmcpLyhnKmcpLHE9MStmLzE2Mzg0Kig0MDk2K2YqKC03NjgrZiooMzIwLTE3NSpmKSkpLHI9Zi8xMDI0KigyNTYrZiooLTEyOCtmKig3NC00NypmKSkpLGY9Yy8oZypxKSxzPTIqTWF0aC5QSTsxRS0xMjxNYXRoLmFicyhmLXMpOyl2YXIgdD1NYXRoLmNvcygyKm4rZiksdT1NYXRoLnNpbihmKSx2PU1hdGguY29zKGYpLHc9cip1Kih0K3IvNCoodiooLTErMip0KnQpLXIvNip0KigtMys0Kgp1KnUpKigtMys0KnQqdCkpKSxzPWYsZj1jLyhnKnEpK3c7Yz1tKnUtbCp2Kms7Zz1NYXRoLmF0YW4yKG0qditsKnUqaywoMS1oKSpNYXRoLnNxcnQoYSphK2MqYykpO2I9TWF0aC5hdGFuMih1KmIsbCp2LW0qdSprKTtrPWgvMTYqcCooNCtoKig0LTMqcCkpO3Q9Yi0oMS1rKSpoKmEqKGYrayp1Kih0K2sqdiooLTErMip0KnQpKSk7TWF0aC5hdGFuMihhLC1jKTtyZXR1cm4gbmV3IE9wZW5MYXllcnMuTG9uTGF0KGUrZC5kZWcodCksZC5kZWcoZykpfTsKT3BlbkxheWVycy5VdGlsLmdldFBhcmFtZXRlcnM9ZnVuY3Rpb24oYSxiKXtiPWJ8fHt9O2E9bnVsbD09PWF8fHZvaWQgMD09PWE/d2luZG93LmxvY2F0aW9uLmhyZWY6YTt2YXIgYz0iIjtpZihPcGVuTGF5ZXJzLlN0cmluZy5jb250YWlucyhhLCI/IikpdmFyIGQ9YS5pbmRleE9mKCI/IikrMSxjPU9wZW5MYXllcnMuU3RyaW5nLmNvbnRhaW5zKGEsIiMiKT9hLmluZGV4T2YoIiMiKTphLmxlbmd0aCxjPWEuc3Vic3RyaW5nKGQsYyk7Zm9yKHZhciBkPXt9LGM9Yy5zcGxpdCgvWyY7XS8pLGU9MCxmPWMubGVuZ3RoO2U8ZjsrK2Upe3ZhciBnPWNbZV0uc3BsaXQoIj0iKTtpZihnWzBdKXt2YXIgaD1nWzBdO3RyeXtoPWRlY29kZVVSSUNvbXBvbmVudChoKX1jYXRjaChrKXtoPXVuZXNjYXBlKGgpfWc9KGdbMV18fCIiKS5yZXBsYWNlKC9cKy9nLCIgIik7dHJ5e2c9ZGVjb2RlVVJJQ29tcG9uZW50KGcpfWNhdGNoKGwpe2c9dW5lc2NhcGUoZyl9ITEhPT1iLnNwbGl0QXJncyYmKGc9Zy5zcGxpdCgiLCIpKTsKMT09Zy5sZW5ndGgmJihnPWdbMF0pO2RbaF09Z319cmV0dXJuIGR9O09wZW5MYXllcnMuVXRpbC5sYXN0U2VxSUQ9MDtPcGVuTGF5ZXJzLlV0aWwuY3JlYXRlVW5pcXVlSUQ9ZnVuY3Rpb24oYSl7YT1udWxsPT1hPyJpZF8iOmEucmVwbGFjZShPcGVuTGF5ZXJzLlV0aWwuZG90bGVzcywiXyIpO09wZW5MYXllcnMuVXRpbC5sYXN0U2VxSUQrPTE7cmV0dXJuIGErT3BlbkxheWVycy5VdGlsLmxhc3RTZXFJRH07T3BlbkxheWVycy5JTkNIRVNfUEVSX1VOSVQ9e2luY2hlczoxLGZ0OjEyLG1pOjYzMzYwLG06MzkuMzcsa206MzkzNzAsZGQ6NDM3NDc1NCx5ZDozNn07T3BlbkxheWVycy5JTkNIRVNfUEVSX1VOSVRbImluIl09T3BlbkxheWVycy5JTkNIRVNfUEVSX1VOSVQuaW5jaGVzO09wZW5MYXllcnMuSU5DSEVTX1BFUl9VTklULmRlZ3JlZXM9T3BlbkxheWVycy5JTkNIRVNfUEVSX1VOSVQuZGQ7T3BlbkxheWVycy5JTkNIRVNfUEVSX1VOSVQubm1pPTE4NTIqT3BlbkxheWVycy5JTkNIRVNfUEVSX1VOSVQubTsKT3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0g9MC4wMjU0MDAwNTA4MDAxMDE2OwpPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKE9wZW5MYXllcnMuSU5DSEVTX1BFUl9VTklULHtJbmNoOk9wZW5MYXllcnMuSU5DSEVTX1BFUl9VTklULmluY2hlcyxNZXRlcjoxL09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILEZvb3Q6MC4zMDQ4MDA2MDk2MDEyMTkyL09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILElGb290OjAuMzA0OC9PcGVuTGF5ZXJzLk1FVEVSU19QRVJfSU5DSCxDbGFya2VGb290OjAuMzA0Nzk3MjY1MTE1MS9PcGVuTGF5ZXJzLk1FVEVSU19QRVJfSU5DSCxTZWFyc0Zvb3Q6MC4zMDQ3OTk0NzE1Mzg2NzYyNi9PcGVuTGF5ZXJzLk1FVEVSU19QRVJfSU5DSCxHb2xkQ29hc3RGb290OjAuMzA0Nzk5NzEwMTgxNTA4OC9PcGVuTGF5ZXJzLk1FVEVSU19QRVJfSU5DSCxJSW5jaDowLjAyNTQvT3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0gsTWljcm9JbmNoOjIuNTRFLTUvT3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0gsTWlsOjIuNTRFLTgvT3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0gsCkNlbnRpbWV0ZXI6MC4wMS9PcGVuTGF5ZXJzLk1FVEVSU19QRVJfSU5DSCxLaWxvbWV0ZXI6MUUzL09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILFlhcmQ6MC45MTQ0MDE4Mjg4MDM2NTc2L09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILFNlYXJzWWFyZDowLjkxNDM5ODQxNDYxNjAyOS9PcGVuTGF5ZXJzLk1FVEVSU19QRVJfSU5DSCxJbmRpYW5ZYXJkOjAuOTE0Mzk4NTMwNzQ0NDQwOC9PcGVuTGF5ZXJzLk1FVEVSU19QRVJfSU5DSCxJbmRpYW5ZZDM3OjAuOTE0Mzk1MjMvT3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0gsSW5kaWFuWWQ2MjowLjkxNDM5ODgvT3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0gsSW5kaWFuWWQ3NTowLjkxNDM5ODUvT3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0gsSW5kaWFuRm9vdDowLjMwNDc5OTUxL09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILEluZGlhbkZ0Mzc6MC4zMDQ3OTg0MS9PcGVuTGF5ZXJzLk1FVEVSU19QRVJfSU5DSCxJbmRpYW5GdDYyOjAuMzA0Nzk5Ni8KT3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0gsSW5kaWFuRnQ3NTowLjMwNDc5OTUvT3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0gsTWlsZToxNjA5LjM0NzIxODY5NDQzNzMvT3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0gsSVlhcmQ6MC45MTQ0L09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILElNaWxlOjE2MDkuMzQ0L09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILE5hdXRNOjE4NTIvT3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0gsIkxhdC02NiI6MTEwOTQzLjMxNjQ4ODkzMjczL09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILCJMYXQtODMiOjExMDk0Ni4yNTczNjg3MjIzNS9PcGVuTGF5ZXJzLk1FVEVSU19QRVJfSU5DSCxEZWNpbWV0ZXI6MC4xL09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILE1pbGxpbWV0ZXI6MC4wMDEvT3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0gsRGVrYW1ldGVyOjEwL09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILERlY2FtZXRlcjoxMC9PcGVuTGF5ZXJzLk1FVEVSU19QRVJfSU5DSCwKSGVjdG9tZXRlcjoxMDAvT3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0gsR2VybWFuTWV0ZXI6MS4wMDAwMTM1OTY1L09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILENhR3JpZDowLjk5OTczOC9PcGVuTGF5ZXJzLk1FVEVSU19QRVJfSU5DSCxDbGFya2VDaGFpbjoyMC4xMTY2MTk0OTc2L09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILEd1bnRlckNoYWluOjIwLjExNjg0MDIzMzY4MDQ3L09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILEJlbm9pdENoYWluOjIwLjExNjc4MjQ5NDM3NTg3Mi9PcGVuTGF5ZXJzLk1FVEVSU19QRVJfSU5DSCxTZWFyc0NoYWluOjIwLjExNjc2NTEyMTU1L09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILENsYXJrZUxpbms6MC4yMDExNjYxOTQ5NzYvT3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0gsR3VudGVyTGluazowLjIwMTE2ODQwMjMzNjgwNDcvT3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0gsQmVub2l0TGluazowLjIwMTE2NzgyNDk0Mzc1ODczL09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILApTZWFyc0xpbms6MC4yMDExNjc2NTEyMTU1L09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILFJvZDo1LjAyOTIxMDA1ODQyMDEyL09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILEludG5sQ2hhaW46MjAuMTE2OC9PcGVuTGF5ZXJzLk1FVEVSU19QRVJfSU5DSCxJbnRubExpbms6MC4yMDExNjgvT3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0gsUGVyY2g6NS4wMjkyMTAwNTg0MjAxMi9PcGVuTGF5ZXJzLk1FVEVSU19QRVJfSU5DSCxQb2xlOjUuMDI5MjEwMDU4NDIwMTIvT3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0gsRnVybG9uZzoyMDEuMTY4NDAyMzM2ODA0Ni9PcGVuTGF5ZXJzLk1FVEVSU19QRVJfSU5DSCxSb29kOjMuNzc4MjY2ODk4L09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILENhcGVGb290OjAuMzA0Nzk3MjYxNS9PcGVuTGF5ZXJzLk1FVEVSU19QRVJfSU5DSCxCcmVhbGV5OjM3NS9PcGVuTGF5ZXJzLk1FVEVSU19QRVJfSU5DSCxNb2RBbUZ0OjAuMzA0ODEyMjUyOTg0NTA2LwpPcGVuTGF5ZXJzLk1FVEVSU19QRVJfSU5DSCxGYXRob206MS44Mjg4L09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILCJOYXV0TS1VSyI6MTg1My4xODQvT3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0gsIjUwa2lsb21ldGVycyI6NUU0L09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILCIxNTBraWxvbWV0ZXJzIjoxNUU0L09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNIfSk7Ck9wZW5MYXllcnMuVXRpbC5leHRlbmQoT3BlbkxheWVycy5JTkNIRVNfUEVSX1VOSVQse21tOk9wZW5MYXllcnMuSU5DSEVTX1BFUl9VTklULk1ldGVyLzFFMyxjbTpPcGVuTGF5ZXJzLklOQ0hFU19QRVJfVU5JVC5NZXRlci8xMDAsZG06MTAwKk9wZW5MYXllcnMuSU5DSEVTX1BFUl9VTklULk1ldGVyLGttOjFFMypPcGVuTGF5ZXJzLklOQ0hFU19QRVJfVU5JVC5NZXRlcixrbWk6T3BlbkxheWVycy5JTkNIRVNfUEVSX1VOSVQubm1pLGZhdGg6T3BlbkxheWVycy5JTkNIRVNfUEVSX1VOSVQuRmF0aG9tLGNoOk9wZW5MYXllcnMuSU5DSEVTX1BFUl9VTklULkludG5sQ2hhaW4sbGluazpPcGVuTGF5ZXJzLklOQ0hFU19QRVJfVU5JVC5JbnRubExpbmssInVzLWluIjpPcGVuTGF5ZXJzLklOQ0hFU19QRVJfVU5JVC5pbmNoZXMsInVzLWZ0IjpPcGVuTGF5ZXJzLklOQ0hFU19QRVJfVU5JVC5Gb290LCJ1cy15ZCI6T3BlbkxheWVycy5JTkNIRVNfUEVSX1VOSVQuWWFyZCwidXMtY2giOk9wZW5MYXllcnMuSU5DSEVTX1BFUl9VTklULkd1bnRlckNoYWluLAoidXMtbWkiOk9wZW5MYXllcnMuSU5DSEVTX1BFUl9VTklULk1pbGUsImluZC15ZCI6T3BlbkxheWVycy5JTkNIRVNfUEVSX1VOSVQuSW5kaWFuWWQzNywiaW5kLWZ0IjpPcGVuTGF5ZXJzLklOQ0hFU19QRVJfVU5JVC5JbmRpYW5GdDM3LCJpbmQtY2giOjIwLjExNjY5NTA2L09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNIfSk7T3BlbkxheWVycy5ET1RTX1BFUl9JTkNIPTcyO09wZW5MYXllcnMuVXRpbC5ub3JtYWxpemVTY2FsZT1mdW5jdGlvbihhKXtyZXR1cm4gMTxhPzEvYTphfTtPcGVuTGF5ZXJzLlV0aWwuZ2V0UmVzb2x1dGlvbkZyb21TY2FsZT1mdW5jdGlvbihhLGIpe3ZhciBjO2EmJihudWxsPT1iJiYoYj0iZGVncmVlcyIpLGM9MS8oT3BlbkxheWVycy5VdGlsLm5vcm1hbGl6ZVNjYWxlKGEpKk9wZW5MYXllcnMuSU5DSEVTX1BFUl9VTklUW2JdKk9wZW5MYXllcnMuRE9UU19QRVJfSU5DSCkpO3JldHVybiBjfTsKT3BlbkxheWVycy5VdGlsLmdldFNjYWxlRnJvbVJlc29sdXRpb249ZnVuY3Rpb24oYSxiKXtudWxsPT1iJiYoYj0iZGVncmVlcyIpO3JldHVybiBhKk9wZW5MYXllcnMuSU5DSEVTX1BFUl9VTklUW2JdKk9wZW5MYXllcnMuRE9UU19QRVJfSU5DSH07Ck9wZW5MYXllcnMuVXRpbC5wYWdlUG9zaXRpb249ZnVuY3Rpb24oYSl7dmFyIGI9WzAsMF0sYz1PcGVuTGF5ZXJzLlV0aWwuZ2V0Vmlld3BvcnRFbGVtZW50KCk7aWYoIWF8fGE9PXdpbmRvd3x8YT09YylyZXR1cm4gYjt2YXIgZD1PcGVuTGF5ZXJzLklTX0dFQ0tPJiZkb2N1bWVudC5nZXRCb3hPYmplY3RGb3ImJiJhYnNvbHV0ZSI9PU9wZW5MYXllcnMuRWxlbWVudC5nZXRTdHlsZShhLCJwb3NpdGlvbiIpJiYoIiI9PWEuc3R5bGUudG9wfHwiIj09YS5zdHlsZS5sZWZ0KSxlPW51bGw7aWYoYS5nZXRCb3VuZGluZ0NsaWVudFJlY3QpYT1hLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLGU9d2luZG93LnBhZ2VZT2Zmc2V0fHxjLnNjcm9sbFRvcCxiWzBdPWEubGVmdCsod2luZG93LnBhZ2VYT2Zmc2V0fHxjLnNjcm9sbExlZnQpLGJbMV09YS50b3ArZTtlbHNlIGlmKGRvY3VtZW50LmdldEJveE9iamVjdEZvciYmIWQpYT1kb2N1bWVudC5nZXRCb3hPYmplY3RGb3IoYSksYz1kb2N1bWVudC5nZXRCb3hPYmplY3RGb3IoYyksCmJbMF09YS5zY3JlZW5YLWMuc2NyZWVuWCxiWzFdPWEuc2NyZWVuWS1jLnNjcmVlblk7ZWxzZXtiWzBdPWEub2Zmc2V0TGVmdDtiWzFdPWEub2Zmc2V0VG9wO2U9YS5vZmZzZXRQYXJlbnQ7aWYoZSE9YSlmb3IoO2U7KWJbMF0rPWUub2Zmc2V0TGVmdCxiWzFdKz1lLm9mZnNldFRvcCxlPWUub2Zmc2V0UGFyZW50O2M9T3BlbkxheWVycy5CUk9XU0VSX05BTUU7aWYoIm9wZXJhIj09Y3x8InNhZmFyaSI9PWMmJiJhYnNvbHV0ZSI9PU9wZW5MYXllcnMuRWxlbWVudC5nZXRTdHlsZShhLCJwb3NpdGlvbiIpKWJbMV0tPWRvY3VtZW50LmJvZHkub2Zmc2V0VG9wO2ZvcihlPWEub2Zmc2V0UGFyZW50O2UmJmUhPWRvY3VtZW50LmJvZHk7KXtiWzBdLT1lLnNjcm9sbExlZnQ7aWYoIm9wZXJhIiE9Y3x8IlRSIiE9ZS50YWdOYW1lKWJbMV0tPWUuc2Nyb2xsVG9wO2U9ZS5vZmZzZXRQYXJlbnR9fXJldHVybiBifTsKT3BlbkxheWVycy5VdGlsLmdldFZpZXdwb3J0RWxlbWVudD1mdW5jdGlvbigpe3ZhciBhPWFyZ3VtZW50cy5jYWxsZWUudmlld3BvcnRFbGVtZW50O3ZvaWQgMD09YSYmKGE9Im1zaWUiPT1PcGVuTGF5ZXJzLkJST1dTRVJfTkFNRSYmIkNTUzFDb21wYXQiIT1kb2N1bWVudC5jb21wYXRNb2RlP2RvY3VtZW50LmJvZHk6ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LGFyZ3VtZW50cy5jYWxsZWUudmlld3BvcnRFbGVtZW50PWEpO3JldHVybiBhfTsKT3BlbkxheWVycy5VdGlsLmlzRXF1aXZhbGVudFVybD1mdW5jdGlvbihhLGIsYyl7Yz1jfHx7fTtPcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyhjLHtpZ25vcmVDYXNlOiEwLGlnbm9yZVBvcnQ4MDohMCxpZ25vcmVIYXNoOiEwLHNwbGl0QXJnczohMX0pO2E9T3BlbkxheWVycy5VdGlsLmNyZWF0ZVVybE9iamVjdChhLGMpO2I9T3BlbkxheWVycy5VdGlsLmNyZWF0ZVVybE9iamVjdChiLGMpO2Zvcih2YXIgZCBpbiBhKWlmKCJhcmdzIiE9PWQmJmFbZF0hPWJbZF0pcmV0dXJuITE7Zm9yKGQgaW4gYS5hcmdzKXtpZihhLmFyZ3NbZF0hPWIuYXJnc1tkXSlyZXR1cm4hMTtkZWxldGUgYi5hcmdzW2RdfWZvcihkIGluIGIuYXJncylyZXR1cm4hMTtyZXR1cm4hMH07Ck9wZW5MYXllcnMuVXRpbC5jcmVhdGVVcmxPYmplY3Q9ZnVuY3Rpb24oYSxiKXtiPWJ8fHt9O2lmKCEvXlx3KzpcL1wvLy50ZXN0KGEpKXt2YXIgYz13aW5kb3cubG9jYXRpb24sZD1jLnBvcnQ/IjoiK2MucG9ydDoiIixkPWMucHJvdG9jb2wrIi8vIitjLmhvc3Quc3BsaXQoIjoiKS5zaGlmdCgpK2Q7MD09PWEuaW5kZXhPZigiLyIpP2E9ZCthOihjPWMucGF0aG5hbWUuc3BsaXQoIi8iKSxjLnBvcCgpLGE9ZCtjLmpvaW4oIi8iKSsiLyIrYSl9Yi5pZ25vcmVDYXNlJiYoYT1hLnRvTG93ZXJDYXNlKCkpO2M9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYSIpO2MuaHJlZj1hO2Q9e307ZC5ob3N0PWMuaG9zdC5zcGxpdCgiOiIpLnNoaWZ0KCk7ZC5wcm90b2NvbD1jLnByb3RvY29sO2QucG9ydD1iLmlnbm9yZVBvcnQ4MD8iODAiPT1jLnBvcnR8fCIwIj09Yy5wb3J0PyIiOmMucG9ydDoiIj09Yy5wb3J0fHwiMCI9PWMucG9ydD8iODAiOmMucG9ydDtkLmhhc2g9Yi5pZ25vcmVIYXNofHwiIyI9PT0KYy5oYXNoPyIiOmMuaGFzaDt2YXIgZT1jLnNlYXJjaDtlfHwoZT1hLmluZGV4T2YoIj8iKSxlPS0xIT1lP2Euc3Vic3RyKGUpOiIiKTtkLmFyZ3M9T3BlbkxheWVycy5VdGlsLmdldFBhcmFtZXRlcnMoZSx7c3BsaXRBcmdzOmIuc3BsaXRBcmdzfSk7ZC5wYXRobmFtZT0iLyI9PWMucGF0aG5hbWUuY2hhckF0KDApP2MucGF0aG5hbWU6Ii8iK2MucGF0aG5hbWU7cmV0dXJuIGR9O09wZW5MYXllcnMuVXRpbC5yZW1vdmVUYWlsPWZ1bmN0aW9uKGEpe3ZhciBiPW51bGwsYj1hLmluZGV4T2YoIj8iKSxjPWEuaW5kZXhPZigiIyIpO3JldHVybiBiPS0xPT1iPy0xIT1jP2Euc3Vic3RyKDAsYyk6YTotMSE9Yz9hLnN1YnN0cigwLE1hdGgubWluKGIsYykpOmEuc3Vic3RyKDAsYil9O09wZW5MYXllcnMuSVNfR0VDS089ZnVuY3Rpb24oKXt2YXIgYT1uYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCk7cmV0dXJuLTE9PWEuaW5kZXhPZigid2Via2l0IikmJi0xIT1hLmluZGV4T2YoImdlY2tvIil9KCk7Ck9wZW5MYXllcnMuQ0FOVkFTX1NVUFBPUlRFRD1mdW5jdGlvbigpe3ZhciBhPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImNhbnZhcyIpO3JldHVybiEoIWEuZ2V0Q29udGV4dHx8IWEuZ2V0Q29udGV4dCgiMmQiKSl9KCk7T3BlbkxheWVycy5CUk9XU0VSX05BTUU9ZnVuY3Rpb24oKXt2YXIgYT0iIixiPW5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKTstMSE9Yi5pbmRleE9mKCJvcGVyYSIpP2E9Im9wZXJhIjotMSE9Yi5pbmRleE9mKCJtc2llIik/YT0ibXNpZSI6LTEhPWIuaW5kZXhPZigic2FmYXJpIik/YT0ic2FmYXJpIjotMSE9Yi5pbmRleE9mKCJtb3ppbGxhIikmJihhPS0xIT1iLmluZGV4T2YoImZpcmVmb3giKT8iZmlyZWZveCI6Im1vemlsbGEiKTtyZXR1cm4gYX0oKTtPcGVuTGF5ZXJzLlV0aWwuZ2V0QnJvd3Nlck5hbWU9ZnVuY3Rpb24oKXtyZXR1cm4gT3BlbkxheWVycy5CUk9XU0VSX05BTUV9OwpPcGVuTGF5ZXJzLlV0aWwuZ2V0UmVuZGVyZWREaW1lbnNpb25zPWZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGY9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7Zi5zdHlsZS52aXNpYmlsaXR5PSJoaWRkZW4iO2Zvcih2YXIgZz1jJiZjLmNvbnRhaW5lckVsZW1lbnQ/Yy5jb250YWluZXJFbGVtZW50OmRvY3VtZW50LmJvZHksaD0hMSxrPW51bGwsbD1nO2wmJiJib2R5IiE9bC50YWdOYW1lLnRvTG93ZXJDYXNlKCk7KXt2YXIgbT1PcGVuTGF5ZXJzLkVsZW1lbnQuZ2V0U3R5bGUobCwicG9zaXRpb24iKTtpZigiYWJzb2x1dGUiPT1tKXtoPSEwO2JyZWFrfWVsc2UgaWYobSYmInN0YXRpYyIhPW0pYnJlYWs7bD1sLnBhcmVudE5vZGV9IWh8fDAhPT1nLmNsaWVudEhlaWdodCYmMCE9PWcuY2xpZW50V2lkdGh8fChrPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpLGsuc3R5bGUudmlzaWJpbGl0eT0iaGlkZGVuIixrLnN0eWxlLnBvc2l0aW9uPSJhYnNvbHV0ZSIsay5zdHlsZS5vdmVyZmxvdz0KInZpc2libGUiLGsuc3R5bGUud2lkdGg9ZG9jdW1lbnQuYm9keS5jbGllbnRXaWR0aCsicHgiLGsuc3R5bGUuaGVpZ2h0PWRvY3VtZW50LmJvZHkuY2xpZW50SGVpZ2h0KyJweCIsay5hcHBlbmRDaGlsZChmKSk7Zi5zdHlsZS5wb3NpdGlvbj0iYWJzb2x1dGUiO2ImJihiLnc/KGQ9Yi53LGYuc3R5bGUud2lkdGg9ZCsicHgiKTpiLmgmJihlPWIuaCxmLnN0eWxlLmhlaWdodD1lKyJweCIpKTtjJiZjLmRpc3BsYXlDbGFzcyYmKGYuY2xhc3NOYW1lPWMuZGlzcGxheUNsYXNzKTtiPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO2IuaW5uZXJIVE1MPWE7Yi5zdHlsZS5vdmVyZmxvdz0idmlzaWJsZSI7aWYoYi5jaGlsZE5vZGVzKWZvcihhPTAsYz1iLmNoaWxkTm9kZXMubGVuZ3RoO2E8YzthKyspYi5jaGlsZE5vZGVzW2FdLnN0eWxlJiYoYi5jaGlsZE5vZGVzW2FdLnN0eWxlLm92ZXJmbG93PSJ2aXNpYmxlIik7Zi5hcHBlbmRDaGlsZChiKTtrP2cuYXBwZW5kQ2hpbGQoayk6Zy5hcHBlbmRDaGlsZChmKTsKZHx8KGQ9cGFyc2VJbnQoYi5zY3JvbGxXaWR0aCksZi5zdHlsZS53aWR0aD1kKyJweCIpO2V8fChlPXBhcnNlSW50KGIuc2Nyb2xsSGVpZ2h0KSk7Zi5yZW1vdmVDaGlsZChiKTtrPyhrLnJlbW92ZUNoaWxkKGYpLGcucmVtb3ZlQ2hpbGQoaykpOmcucmVtb3ZlQ2hpbGQoZik7cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLlNpemUoZCxlKX07Ck9wZW5MYXllcnMuVXRpbC5nZXRTY3JvbGxiYXJXaWR0aD1mdW5jdGlvbigpe3ZhciBhPU9wZW5MYXllcnMuVXRpbC5fc2Nyb2xsYmFyV2lkdGg7aWYobnVsbD09YSl7dmFyIGI9bnVsbCxjPW51bGwsYj1hPTAsYj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTtiLnN0eWxlLnBvc2l0aW9uPSJhYnNvbHV0ZSI7Yi5zdHlsZS50b3A9Ii0xMDAwcHgiO2Iuc3R5bGUubGVmdD0iLTEwMDBweCI7Yi5zdHlsZS53aWR0aD0iMTAwcHgiO2Iuc3R5bGUuaGVpZ2h0PSI1MHB4IjtiLnN0eWxlLm92ZXJmbG93PSJoaWRkZW4iO2M9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7Yy5zdHlsZS53aWR0aD0iMTAwJSI7Yy5zdHlsZS5oZWlnaHQ9IjIwMHB4IjtiLmFwcGVuZENoaWxkKGMpO2RvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYik7YT1jLm9mZnNldFdpZHRoO2Iuc3R5bGUub3ZlcmZsb3c9InNjcm9sbCI7Yj1jLm9mZnNldFdpZHRoO2RvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoZG9jdW1lbnQuYm9keS5sYXN0Q2hpbGQpOwpPcGVuTGF5ZXJzLlV0aWwuX3Njcm9sbGJhcldpZHRoPWEtYjthPU9wZW5MYXllcnMuVXRpbC5fc2Nyb2xsYmFyV2lkdGh9cmV0dXJuIGF9OwpPcGVuTGF5ZXJzLlV0aWwuZ2V0Rm9ybWF0dGVkTG9uTGF0PWZ1bmN0aW9uKGEsYixjKXtjfHwoYz0iZG1zIik7YT0oYSs1NDApJTM2MC0xODA7dmFyIGQ9TWF0aC5hYnMoYSksZT1NYXRoLmZsb29yKGQpLGY9ZD0oZC1lKS8oMS82MCksZD1NYXRoLmZsb29yKGQpLGY9TWF0aC5yb3VuZCgxMCooKGYtZCkvKDEvNjApKSksZj1mLzEwOzYwPD1mJiYoZi09NjAsZCs9MSw2MDw9ZCYmKGQtPTYwLGUrPTEpKTsxMD5lJiYoZT0iMCIrZSk7ZSs9Ilx1MDBiMCI7MDw9Yy5pbmRleE9mKCJkbSIpJiYoMTA+ZCYmKGQ9IjAiK2QpLGUrPWQrIiciLDA8PWMuaW5kZXhPZigiZG1zIikmJigxMD5mJiYoZj0iMCIrZiksZSs9ZisnIicpKTtyZXR1cm4gZT0ibG9uIj09Yj9lKygwPmE/T3BlbkxheWVycy5pMThuKCJXIik6T3BlbkxheWVycy5pMThuKCJFIikpOmUrKDA+YT9PcGVuTGF5ZXJzLmkxOG4oIlMiKTpPcGVuTGF5ZXJzLmkxOG4oIk4iKSl9O09wZW5MYXllcnMuRm9ybWF0PU9wZW5MYXllcnMuQ2xhc3Moe29wdGlvbnM6bnVsbCxleHRlcm5hbFByb2plY3Rpb246bnVsbCxpbnRlcm5hbFByb2plY3Rpb246bnVsbCxkYXRhOm51bGwsa2VlcERhdGE6ITEsaW5pdGlhbGl6ZTpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHRoaXMsYSk7dGhpcy5vcHRpb25zPWF9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt9LHJlYWQ6ZnVuY3Rpb24oYSl7dGhyb3cgRXJyb3IoIlJlYWQgbm90IGltcGxlbWVudGVkLiIpO30sd3JpdGU6ZnVuY3Rpb24oYSl7dGhyb3cgRXJyb3IoIldyaXRlIG5vdCBpbXBsZW1lbnRlZC4iKTt9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuRm9ybWF0In0pO09wZW5MYXllcnMuRm9ybWF0LkNTV0dldFJlY29yZHM9ZnVuY3Rpb24oYSl7YT1PcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyhhLE9wZW5MYXllcnMuRm9ybWF0LkNTV0dldFJlY29yZHMuREVGQVVMVFMpO3ZhciBiPU9wZW5MYXllcnMuRm9ybWF0LkNTV0dldFJlY29yZHNbInYiK2EudmVyc2lvbi5yZXBsYWNlKC9cLi9nLCJfIildO2lmKCFiKXRocm93IlVuc3VwcG9ydGVkIENTV0dldFJlY29yZHMgdmVyc2lvbjogIithLnZlcnNpb247cmV0dXJuIG5ldyBiKGEpfTtPcGVuTGF5ZXJzLkZvcm1hdC5DU1dHZXRSZWNvcmRzLkRFRkFVTFRTPXt2ZXJzaW9uOiIyLjAuMiJ9O09wZW5MYXllcnMuQ29udHJvbD1PcGVuTGF5ZXJzLkNsYXNzKHtpZDpudWxsLG1hcDpudWxsLGRpdjpudWxsLHR5cGU6bnVsbCxhbGxvd1NlbGVjdGlvbjohMSxkaXNwbGF5Q2xhc3M6IiIsdGl0bGU6IiIsYXV0b0FjdGl2YXRlOiExLGFjdGl2ZTpudWxsLGhhbmRsZXJPcHRpb25zOm51bGwsaGFuZGxlcjpudWxsLGV2ZW50TGlzdGVuZXJzOm51bGwsZXZlbnRzOm51bGwsaW5pdGlhbGl6ZTpmdW5jdGlvbihhKXt0aGlzLmRpc3BsYXlDbGFzcz10aGlzLkNMQVNTX05BTUUucmVwbGFjZSgiT3BlbkxheWVycy4iLCJvbCIpLnJlcGxhY2UoL1wuL2csIiIpO09wZW5MYXllcnMuVXRpbC5leHRlbmQodGhpcyxhKTt0aGlzLmV2ZW50cz1uZXcgT3BlbkxheWVycy5FdmVudHModGhpcyk7aWYodGhpcy5ldmVudExpc3RlbmVycyBpbnN0YW5jZW9mIE9iamVjdCl0aGlzLmV2ZW50cy5vbih0aGlzLmV2ZW50TGlzdGVuZXJzKTtudWxsPT10aGlzLmlkJiYodGhpcy5pZD1PcGVuTGF5ZXJzLlV0aWwuY3JlYXRlVW5pcXVlSUQodGhpcy5DTEFTU19OQU1FKwoiXyIpKX0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuZXZlbnRzJiYodGhpcy5ldmVudExpc3RlbmVycyYmdGhpcy5ldmVudHMudW4odGhpcy5ldmVudExpc3RlbmVycyksdGhpcy5ldmVudHMuZGVzdHJveSgpLHRoaXMuZXZlbnRzPW51bGwpO3RoaXMuZXZlbnRMaXN0ZW5lcnM9bnVsbDt0aGlzLmhhbmRsZXImJih0aGlzLmhhbmRsZXIuZGVzdHJveSgpLHRoaXMuaGFuZGxlcj1udWxsKTtpZih0aGlzLmhhbmRsZXJzKXtmb3IodmFyIGEgaW4gdGhpcy5oYW5kbGVycyl0aGlzLmhhbmRsZXJzLmhhc093blByb3BlcnR5KGEpJiYiZnVuY3Rpb24iPT10eXBlb2YgdGhpcy5oYW5kbGVyc1thXS5kZXN0cm95JiZ0aGlzLmhhbmRsZXJzW2FdLmRlc3Ryb3koKTt0aGlzLmhhbmRsZXJzPW51bGx9dGhpcy5tYXAmJih0aGlzLm1hcC5yZW1vdmVDb250cm9sKHRoaXMpLHRoaXMubWFwPW51bGwpO3RoaXMuZGl2PW51bGx9LHNldE1hcDpmdW5jdGlvbihhKXt0aGlzLm1hcD1hO3RoaXMuaGFuZGxlciYmCnRoaXMuaGFuZGxlci5zZXRNYXAoYSl9LGRyYXc6ZnVuY3Rpb24oYSl7bnVsbD09dGhpcy5kaXYmJih0aGlzLmRpdj1PcGVuTGF5ZXJzLlV0aWwuY3JlYXRlRGl2KHRoaXMuaWQpLHRoaXMuZGl2LmNsYXNzTmFtZT10aGlzLmRpc3BsYXlDbGFzcyx0aGlzLmFsbG93U2VsZWN0aW9ufHwodGhpcy5kaXYuY2xhc3NOYW1lKz0iIG9sQ29udHJvbE5vU2VsZWN0Iix0aGlzLmRpdi5zZXRBdHRyaWJ1dGUoInVuc2VsZWN0YWJsZSIsIm9uIiwwKSx0aGlzLmRpdi5vbnNlbGVjdHN0YXJ0PU9wZW5MYXllcnMuRnVuY3Rpb24uRmFsc2UpLCIiIT10aGlzLnRpdGxlJiYodGhpcy5kaXYudGl0bGU9dGhpcy50aXRsZSkpO251bGwhPWEmJih0aGlzLnBvc2l0aW9uPWEuY2xvbmUoKSk7dGhpcy5tb3ZlVG8odGhpcy5wb3NpdGlvbik7cmV0dXJuIHRoaXMuZGl2fSxtb3ZlVG86ZnVuY3Rpb24oYSl7bnVsbCE9YSYmbnVsbCE9dGhpcy5kaXYmJih0aGlzLmRpdi5zdHlsZS5sZWZ0PWEueCsicHgiLHRoaXMuZGl2LnN0eWxlLnRvcD0KYS55KyJweCIpfSxhY3RpdmF0ZTpmdW5jdGlvbigpe2lmKHRoaXMuYWN0aXZlKXJldHVybiExO3RoaXMuaGFuZGxlciYmdGhpcy5oYW5kbGVyLmFjdGl2YXRlKCk7dGhpcy5hY3RpdmU9ITA7dGhpcy5tYXAmJk9wZW5MYXllcnMuRWxlbWVudC5hZGRDbGFzcyh0aGlzLm1hcC52aWV3UG9ydERpdix0aGlzLmRpc3BsYXlDbGFzcy5yZXBsYWNlKC8gL2csIiIpKyJBY3RpdmUiKTt0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoImFjdGl2YXRlIik7cmV0dXJuITB9LGRlYWN0aXZhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hY3RpdmU/KHRoaXMuaGFuZGxlciYmdGhpcy5oYW5kbGVyLmRlYWN0aXZhdGUoKSx0aGlzLmFjdGl2ZT0hMSx0aGlzLm1hcCYmT3BlbkxheWVycy5FbGVtZW50LnJlbW92ZUNsYXNzKHRoaXMubWFwLnZpZXdQb3J0RGl2LHRoaXMuZGlzcGxheUNsYXNzLnJlcGxhY2UoLyAvZywiIikrIkFjdGl2ZSIpLHRoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgiZGVhY3RpdmF0ZSIpLAohMCk6ITF9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuQ29udHJvbCJ9KTtPcGVuTGF5ZXJzLkNvbnRyb2wuVFlQRV9CVVRUT049MTtPcGVuTGF5ZXJzLkNvbnRyb2wuVFlQRV9UT0dHTEU9MjtPcGVuTGF5ZXJzLkNvbnRyb2wuVFlQRV9UT09MPTM7T3BlbkxheWVycy5FdmVudD17b2JzZXJ2ZXJzOiExLEtFWV9TUEFDRTozMixLRVlfQkFDS1NQQUNFOjgsS0VZX1RBQjo5LEtFWV9SRVRVUk46MTMsS0VZX0VTQzoyNyxLRVlfTEVGVDozNyxLRVlfVVA6MzgsS0VZX1JJR0hUOjM5LEtFWV9ET1dOOjQwLEtFWV9ERUxFVEU6NDYsZWxlbWVudDpmdW5jdGlvbihhKXtyZXR1cm4gYS50YXJnZXR8fGEuc3JjRWxlbWVudH0saXNTaW5nbGVUb3VjaDpmdW5jdGlvbihhKXtyZXR1cm4gYS50b3VjaGVzJiYxPT1hLnRvdWNoZXMubGVuZ3RofSxpc011bHRpVG91Y2g6ZnVuY3Rpb24oYSl7cmV0dXJuIGEudG91Y2hlcyYmMTxhLnRvdWNoZXMubGVuZ3RofSxpc0xlZnRDbGljazpmdW5jdGlvbihhKXtyZXR1cm4gYS53aGljaCYmMT09YS53aGljaHx8YS5idXR0b24mJjE9PWEuYnV0dG9ufSxpc1JpZ2h0Q2xpY2s6ZnVuY3Rpb24oYSl7cmV0dXJuIGEud2hpY2gmJjM9PWEud2hpY2h8fGEuYnV0dG9uJiYyPT1hLmJ1dHRvbn0sc3RvcDpmdW5jdGlvbihhLApiKXtifHxPcGVuTGF5ZXJzLkV2ZW50LnByZXZlbnREZWZhdWx0KGEpO2Euc3RvcFByb3BhZ2F0aW9uP2Euc3RvcFByb3BhZ2F0aW9uKCk6YS5jYW5jZWxCdWJibGU9ITB9LHByZXZlbnREZWZhdWx0OmZ1bmN0aW9uKGEpe2EucHJldmVudERlZmF1bHQ/YS5wcmV2ZW50RGVmYXVsdCgpOmEucmV0dXJuVmFsdWU9ITF9LGZpbmRFbGVtZW50OmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPU9wZW5MYXllcnMuRXZlbnQuZWxlbWVudChhKTtjLnBhcmVudE5vZGUmJighYy50YWdOYW1lfHxjLnRhZ05hbWUudG9VcHBlckNhc2UoKSE9Yi50b1VwcGVyQ2FzZSgpKTspYz1jLnBhcmVudE5vZGU7cmV0dXJuIGN9LG9ic2VydmU6ZnVuY3Rpb24oYSxiLGMsZCl7YT1PcGVuTGF5ZXJzLlV0aWwuZ2V0RWxlbWVudChhKTtkPWR8fCExOyJrZXlwcmVzcyI9PWImJihuYXZpZ2F0b3IuYXBwVmVyc2lvbi5tYXRjaCgvS29ucXVlcm9yfFNhZmFyaXxLSFRNTC8pfHxhLmF0dGFjaEV2ZW50KSYmKGI9ImtleWRvd24iKTsKdGhpcy5vYnNlcnZlcnN8fCh0aGlzLm9ic2VydmVycz17fSk7aWYoIWEuX2V2ZW50Q2FjaGVJRCl7dmFyIGU9ImV2ZW50Q2FjaGVJRF8iO2EuaWQmJihlPWEuaWQrIl8iK2UpO2EuX2V2ZW50Q2FjaGVJRD1PcGVuTGF5ZXJzLlV0aWwuY3JlYXRlVW5pcXVlSUQoZSl9ZT1hLl9ldmVudENhY2hlSUQ7dGhpcy5vYnNlcnZlcnNbZV18fCh0aGlzLm9ic2VydmVyc1tlXT1bXSk7dGhpcy5vYnNlcnZlcnNbZV0ucHVzaCh7ZWxlbWVudDphLG5hbWU6YixvYnNlcnZlcjpjLHVzZUNhcHR1cmU6ZH0pO2EuYWRkRXZlbnRMaXN0ZW5lcj9hLmFkZEV2ZW50TGlzdGVuZXIoYixjLGQpOmEuYXR0YWNoRXZlbnQmJmEuYXR0YWNoRXZlbnQoIm9uIitiLGMpfSxzdG9wT2JzZXJ2aW5nRWxlbWVudDpmdW5jdGlvbihhKXthPU9wZW5MYXllcnMuVXRpbC5nZXRFbGVtZW50KGEpLl9ldmVudENhY2hlSUQ7dGhpcy5fcmVtb3ZlRWxlbWVudE9ic2VydmVycyhPcGVuTGF5ZXJzLkV2ZW50Lm9ic2VydmVyc1thXSl9LApfcmVtb3ZlRWxlbWVudE9ic2VydmVyczpmdW5jdGlvbihhKXtpZihhKWZvcih2YXIgYj1hLmxlbmd0aC0xOzA8PWI7Yi0tKXt2YXIgYz1hW2JdO09wZW5MYXllcnMuRXZlbnQuc3RvcE9ic2VydmluZy5hcHBseSh0aGlzLFtjLmVsZW1lbnQsYy5uYW1lLGMub2JzZXJ2ZXIsYy51c2VDYXB0dXJlXSl9fSxzdG9wT2JzZXJ2aW5nOmZ1bmN0aW9uKGEsYixjLGQpe2Q9ZHx8ITE7YT1PcGVuTGF5ZXJzLlV0aWwuZ2V0RWxlbWVudChhKTt2YXIgZT1hLl9ldmVudENhY2hlSUQ7ImtleXByZXNzIj09YiYmKG5hdmlnYXRvci5hcHBWZXJzaW9uLm1hdGNoKC9Lb25xdWVyb3J8U2FmYXJpfEtIVE1MLyl8fGEuZGV0YWNoRXZlbnQpJiYoYj0ia2V5ZG93biIpO3ZhciBmPSExLGc9T3BlbkxheWVycy5FdmVudC5vYnNlcnZlcnNbZV07aWYoZylmb3IodmFyIGg9MDshZiYmaDxnLmxlbmd0aDspe3ZhciBrPWdbaF07aWYoay5uYW1lPT1iJiZrLm9ic2VydmVyPT1jJiZrLnVzZUNhcHR1cmU9PWQpe2cuc3BsaWNlKGgsCjEpOzA9PWcubGVuZ3RoJiZkZWxldGUgT3BlbkxheWVycy5FdmVudC5vYnNlcnZlcnNbZV07Zj0hMDticmVha31oKyt9ZiYmKGEucmVtb3ZlRXZlbnRMaXN0ZW5lcj9hLnJlbW92ZUV2ZW50TGlzdGVuZXIoYixjLGQpOmEmJmEuZGV0YWNoRXZlbnQmJmEuZGV0YWNoRXZlbnQoIm9uIitiLGMpKTtyZXR1cm4gZn0sdW5sb2FkQ2FjaGU6ZnVuY3Rpb24oKXtpZihPcGVuTGF5ZXJzLkV2ZW50JiZPcGVuTGF5ZXJzLkV2ZW50Lm9ic2VydmVycyl7Zm9yKHZhciBhIGluIE9wZW5MYXllcnMuRXZlbnQub2JzZXJ2ZXJzKU9wZW5MYXllcnMuRXZlbnQuX3JlbW92ZUVsZW1lbnRPYnNlcnZlcnMuYXBwbHkodGhpcyxbT3BlbkxheWVycy5FdmVudC5vYnNlcnZlcnNbYV1dKTtPcGVuTGF5ZXJzLkV2ZW50Lm9ic2VydmVycz0hMX19LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuRXZlbnQifTsKT3BlbkxheWVycy5FdmVudC5vYnNlcnZlKHdpbmRvdywidW5sb2FkIixPcGVuTGF5ZXJzLkV2ZW50LnVubG9hZENhY2hlLCExKTsKT3BlbkxheWVycy5FdmVudHM9T3BlbkxheWVycy5DbGFzcyh7QlJPV1NFUl9FVkVOVFM6Im1vdXNlb3ZlciBtb3VzZW91dCBtb3VzZWRvd24gbW91c2V1cCBtb3VzZW1vdmUgY2xpY2sgZGJsY2xpY2sgcmlnaHRjbGljayBkYmxyaWdodGNsaWNrIHJlc2l6ZSBmb2N1cyBibHVyIHRvdWNoc3RhcnQgdG91Y2htb3ZlIHRvdWNoZW5kIGtleWRvd24iLnNwbGl0KCIgIiksbGlzdGVuZXJzOm51bGwsb2JqZWN0Om51bGwsZWxlbWVudDpudWxsLGV2ZW50SGFuZGxlcjpudWxsLGZhbGxUaHJvdWdoOm51bGwsaW5jbHVkZVhZOiExLGV4dGVuc2lvbnM6bnVsbCxleHRlbnNpb25Db3VudDpudWxsLGNsZWFyTW91c2VMaXN0ZW5lcjpudWxsLGluaXRpYWxpemU6ZnVuY3Rpb24oYSxiLGMsZCxlKXtPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHRoaXMsZSk7dGhpcy5vYmplY3Q9YTt0aGlzLmZhbGxUaHJvdWdoPWQ7dGhpcy5saXN0ZW5lcnM9e307dGhpcy5leHRlbnNpb25zPXt9O3RoaXMuZXh0ZW5zaW9uQ291bnQ9Cnt9O3RoaXMuX21zVG91Y2hlcz1bXTtudWxsIT1iJiZ0aGlzLmF0dGFjaFRvRWxlbWVudChiKX0sZGVzdHJveTpmdW5jdGlvbigpe2Zvcih2YXIgYSBpbiB0aGlzLmV4dGVuc2lvbnMpImJvb2xlYW4iIT09dHlwZW9mIHRoaXMuZXh0ZW5zaW9uc1thXSYmdGhpcy5leHRlbnNpb25zW2FdLmRlc3Ryb3koKTt0aGlzLmV4dGVuc2lvbnM9bnVsbDt0aGlzLmVsZW1lbnQmJihPcGVuTGF5ZXJzLkV2ZW50LnN0b3BPYnNlcnZpbmdFbGVtZW50KHRoaXMuZWxlbWVudCksdGhpcy5lbGVtZW50Lmhhc1Njcm9sbEV2ZW50JiZPcGVuTGF5ZXJzLkV2ZW50LnN0b3BPYnNlcnZpbmcod2luZG93LCJzY3JvbGwiLHRoaXMuY2xlYXJNb3VzZUxpc3RlbmVyKSk7dGhpcy5ldmVudEhhbmRsZXI9dGhpcy5mYWxsVGhyb3VnaD10aGlzLm9iamVjdD10aGlzLmxpc3RlbmVycz10aGlzLmVsZW1lbnQ9bnVsbH0sYWRkRXZlbnRUeXBlOmZ1bmN0aW9uKGEpe30sYXR0YWNoVG9FbGVtZW50OmZ1bmN0aW9uKGEpe3RoaXMuZWxlbWVudD8KT3BlbkxheWVycy5FdmVudC5zdG9wT2JzZXJ2aW5nRWxlbWVudCh0aGlzLmVsZW1lbnQpOih0aGlzLmV2ZW50SGFuZGxlcj1PcGVuTGF5ZXJzLkZ1bmN0aW9uLmJpbmRBc0V2ZW50TGlzdGVuZXIodGhpcy5oYW5kbGVCcm93c2VyRXZlbnQsdGhpcyksdGhpcy5jbGVhck1vdXNlTGlzdGVuZXI9T3BlbkxheWVycy5GdW5jdGlvbi5iaW5kKHRoaXMuY2xlYXJNb3VzZUNhY2hlLHRoaXMpKTt0aGlzLmVsZW1lbnQ9YTtmb3IodmFyIGI9ISF3aW5kb3cubmF2aWdhdG9yLm1zTWF4VG91Y2hQb2ludHMsYyxkPTAsZT10aGlzLkJST1dTRVJfRVZFTlRTLmxlbmd0aDtkPGU7ZCsrKWM9dGhpcy5CUk9XU0VSX0VWRU5UU1tkXSxPcGVuTGF5ZXJzLkV2ZW50Lm9ic2VydmUoYSxjLHRoaXMuZXZlbnRIYW5kbGVyKSxiJiYwPT09Yy5pbmRleE9mKCJ0b3VjaCIpJiZ0aGlzLmFkZE1zVG91Y2hMaXN0ZW5lcihhLGMsdGhpcy5ldmVudEhhbmRsZXIpO09wZW5MYXllcnMuRXZlbnQub2JzZXJ2ZShhLCJkcmFnc3RhcnQiLApPcGVuTGF5ZXJzLkV2ZW50LnN0b3ApfSxvbjpmdW5jdGlvbihhKXtmb3IodmFyIGIgaW4gYSkic2NvcGUiIT1iJiZhLmhhc093blByb3BlcnR5KGIpJiZ0aGlzLnJlZ2lzdGVyKGIsYS5zY29wZSxhW2JdKX0scmVnaXN0ZXI6ZnVuY3Rpb24oYSxiLGMsZCl7YSBpbiBPcGVuTGF5ZXJzLkV2ZW50cyYmIXRoaXMuZXh0ZW5zaW9uc1thXSYmKHRoaXMuZXh0ZW5zaW9uc1thXT1uZXcgT3BlbkxheWVycy5FdmVudHNbYV0odGhpcykpO2lmKG51bGwhPWMpe251bGw9PWImJihiPXRoaXMub2JqZWN0KTt2YXIgZT10aGlzLmxpc3RlbmVyc1thXTtlfHwoZT1bXSx0aGlzLmxpc3RlbmVyc1thXT1lLHRoaXMuZXh0ZW5zaW9uQ291bnRbYV09MCk7Yj17b2JqOmIsZnVuYzpjfTtkPyhlLnNwbGljZSh0aGlzLmV4dGVuc2lvbkNvdW50W2FdLDAsYiksIm9iamVjdCI9PT10eXBlb2YgZCYmZC5leHRlbnNpb24mJnRoaXMuZXh0ZW5zaW9uQ291bnRbYV0rKyk6ZS5wdXNoKGIpfX0scmVnaXN0ZXJQcmlvcml0eTpmdW5jdGlvbihhLApiLGMpe3RoaXMucmVnaXN0ZXIoYSxiLGMsITApfSx1bjpmdW5jdGlvbihhKXtmb3IodmFyIGIgaW4gYSkic2NvcGUiIT1iJiZhLmhhc093blByb3BlcnR5KGIpJiZ0aGlzLnVucmVnaXN0ZXIoYixhLnNjb3BlLGFbYl0pfSx1bnJlZ2lzdGVyOmZ1bmN0aW9uKGEsYixjKXtudWxsPT1iJiYoYj10aGlzLm9iamVjdCk7YT10aGlzLmxpc3RlbmVyc1thXTtpZihudWxsIT1hKWZvcih2YXIgZD0wLGU9YS5sZW5ndGg7ZDxlO2QrKylpZihhW2RdLm9iaj09YiYmYVtkXS5mdW5jPT1jKXthLnNwbGljZShkLDEpO2JyZWFrfX0scmVtb3ZlOmZ1bmN0aW9uKGEpe251bGwhPXRoaXMubGlzdGVuZXJzW2FdJiYodGhpcy5saXN0ZW5lcnNbYV09W10pfSx0cmlnZ2VyRXZlbnQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmxpc3RlbmVyc1thXTtpZihjJiYwIT1jLmxlbmd0aCl7bnVsbD09YiYmKGI9e30pO2Iub2JqZWN0PXRoaXMub2JqZWN0O2IuZWxlbWVudD10aGlzLmVsZW1lbnQ7Yi50eXBlfHwoYi50eXBlPQphKTtmb3IodmFyIGM9Yy5zbGljZSgpLGQsZT0wLGY9Yy5sZW5ndGg7ZTxmJiYoZD1jW2VdLGQ9ZC5mdW5jLmFwcGx5KGQub2JqLFtiXSksdm9pZCAwPT1kfHwhMSE9ZCk7ZSsrKTt0aGlzLmZhbGxUaHJvdWdofHxPcGVuTGF5ZXJzLkV2ZW50LnN0b3AoYiwhMCk7cmV0dXJuIGR9fSxoYW5kbGVCcm93c2VyRXZlbnQ6ZnVuY3Rpb24oYSl7dmFyIGI9YS50eXBlLGM9dGhpcy5saXN0ZW5lcnNbYl07aWYoYyYmMCE9Yy5sZW5ndGgpe2lmKChjPWEudG91Y2hlcykmJmNbMF0pe2Zvcih2YXIgZD0wLGU9MCxmPWMubGVuZ3RoLGcsaD0wO2g8ZjsrK2gpZz10aGlzLmdldFRvdWNoQ2xpZW50WFkoY1toXSksZCs9Zy5jbGllbnRYLGUrPWcuY2xpZW50WTthLmNsaWVudFg9ZC9mO2EuY2xpZW50WT1lL2Z9dGhpcy5pbmNsdWRlWFkmJihhLnh5PXRoaXMuZ2V0TW91c2VQb3NpdGlvbihhKSk7dGhpcy50cmlnZ2VyRXZlbnQoYixhKX19LGdldFRvdWNoQ2xpZW50WFk6ZnVuY3Rpb24oYSl7dmFyIGI9d2luZG93Lm9sTW9ja1dpbnx8CndpbmRvdyxjPWIucGFnZVhPZmZzZXQsYj1iLnBhZ2VZT2Zmc2V0LGQ9YS5jbGllbnRYLGU9YS5jbGllbnRZO2lmKDA9PT1hLnBhZ2VZJiZNYXRoLmZsb29yKGUpPk1hdGguZmxvb3IoYS5wYWdlWSl8fDA9PT1hLnBhZ2VYJiZNYXRoLmZsb29yKGQpPk1hdGguZmxvb3IoYS5wYWdlWCkpZC09YyxlLT1iO2Vsc2UgaWYoZTxhLnBhZ2VZLWJ8fGQ8YS5wYWdlWC1jKWQ9YS5wYWdlWC1jLGU9YS5wYWdlWS1iO2Eub2xDbGllbnRYPWQ7YS5vbENsaWVudFk9ZTtyZXR1cm57Y2xpZW50WDpkLGNsaWVudFk6ZX19LGNsZWFyTW91c2VDYWNoZTpmdW5jdGlvbigpe3RoaXMuZWxlbWVudC5zY3JvbGxzPW51bGw7dGhpcy5lbGVtZW50LmxlZnR0b3A9bnVsbDt0aGlzLmVsZW1lbnQub2Zmc2V0cz1udWxsfSxnZXRNb3VzZVBvc2l0aW9uOmZ1bmN0aW9uKGEpe3RoaXMuaW5jbHVkZVhZP3RoaXMuZWxlbWVudC5oYXNTY3JvbGxFdmVudHx8KE9wZW5MYXllcnMuRXZlbnQub2JzZXJ2ZSh3aW5kb3csInNjcm9sbCIsCnRoaXMuY2xlYXJNb3VzZUxpc3RlbmVyKSx0aGlzLmVsZW1lbnQuaGFzU2Nyb2xsRXZlbnQ9ITApOnRoaXMuY2xlYXJNb3VzZUNhY2hlKCk7aWYoIXRoaXMuZWxlbWVudC5zY3JvbGxzKXt2YXIgYj1PcGVuTGF5ZXJzLlV0aWwuZ2V0Vmlld3BvcnRFbGVtZW50KCk7dGhpcy5lbGVtZW50LnNjcm9sbHM9W3dpbmRvdy5wYWdlWE9mZnNldHx8Yi5zY3JvbGxMZWZ0LHdpbmRvdy5wYWdlWU9mZnNldHx8Yi5zY3JvbGxUb3BdfXRoaXMuZWxlbWVudC5sZWZ0dG9wfHwodGhpcy5lbGVtZW50LmxlZnR0b3A9W2RvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRMZWZ0fHwwLGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRUb3B8fDBdKTt0aGlzLmVsZW1lbnQub2Zmc2V0c3x8KHRoaXMuZWxlbWVudC5vZmZzZXRzPU9wZW5MYXllcnMuVXRpbC5wYWdlUG9zaXRpb24odGhpcy5lbGVtZW50KSk7cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLlBpeGVsKGEuY2xpZW50WCt0aGlzLmVsZW1lbnQuc2Nyb2xsc1swXS0KdGhpcy5lbGVtZW50Lm9mZnNldHNbMF0tdGhpcy5lbGVtZW50LmxlZnR0b3BbMF0sYS5jbGllbnRZK3RoaXMuZWxlbWVudC5zY3JvbGxzWzFdLXRoaXMuZWxlbWVudC5vZmZzZXRzWzFdLXRoaXMuZWxlbWVudC5sZWZ0dG9wWzFdKX0sYWRkTXNUb3VjaExpc3RlbmVyOmZ1bmN0aW9uKGEsYixjKXtmdW5jdGlvbiBkKGEpe2MoT3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoe3N0b3BQcm9wYWdhdGlvbjpmdW5jdGlvbigpe2Zvcih2YXIgYT1lLmxlbmd0aC0xOzA8PWE7LS1hKWVbYV0uc3RvcFByb3BhZ2F0aW9uKCl9LHByZXZlbnREZWZhdWx0OmZ1bmN0aW9uKCl7Zm9yKHZhciBhPWUubGVuZ3RoLTE7MDw9YTstLWEpZVthXS5wcmV2ZW50RGVmYXVsdCgpfSx0eXBlOmJ9LGEpKX12YXIgZT10aGlzLl9tc1RvdWNoZXM7c3dpdGNoKGIpe2Nhc2UgInRvdWNoc3RhcnQiOnJldHVybiB0aGlzLmFkZE1zVG91Y2hMaXN0ZW5lclN0YXJ0KGEsYixkKTtjYXNlICJ0b3VjaGVuZCI6cmV0dXJuIHRoaXMuYWRkTXNUb3VjaExpc3RlbmVyRW5kKGEsCmIsZCk7Y2FzZSAidG91Y2htb3ZlIjpyZXR1cm4gdGhpcy5hZGRNc1RvdWNoTGlzdGVuZXJNb3ZlKGEsYixkKTtkZWZhdWx0OnRocm93IlVua25vd24gdG91Y2ggZXZlbnQgdHlwZSI7fX0sYWRkTXNUb3VjaExpc3RlbmVyU3RhcnQ6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXRoaXMuX21zVG91Y2hlcztPcGVuTGF5ZXJzLkV2ZW50Lm9ic2VydmUoYSwiTVNQb2ludGVyRG93biIsZnVuY3Rpb24oYSl7Zm9yKHZhciBiPSExLGc9MCxoPWQubGVuZ3RoO2c8aDsrK2cpaWYoZFtnXS5wb2ludGVySWQ9PWEucG9pbnRlcklkKXtiPSEwO2JyZWFrfWJ8fGQucHVzaChhKTthLnRvdWNoZXM9ZC5zbGljZSgpO2MoYSl9KTtPcGVuTGF5ZXJzLkV2ZW50Lm9ic2VydmUoYSwiTVNQb2ludGVyVXAiLGZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0wLGM9ZC5sZW5ndGg7YjxjOysrYilpZihkW2JdLnBvaW50ZXJJZD09YS5wb2ludGVySWQpe2Quc3BsaWNlKGIsMSk7YnJlYWt9fSl9LGFkZE1zVG91Y2hMaXN0ZW5lck1vdmU6ZnVuY3Rpb24oYSwKYixjKXt2YXIgZD10aGlzLl9tc1RvdWNoZXM7T3BlbkxheWVycy5FdmVudC5vYnNlcnZlKGEsIk1TUG9pbnRlck1vdmUiLGZ1bmN0aW9uKGEpe2lmKGEucG9pbnRlclR5cGUhPWEuTVNQT0lOVEVSX1RZUEVfTU9VU0V8fDAhPWEuYnV0dG9ucylpZigxIT1kLmxlbmd0aHx8ZFswXS5wYWdlWCE9YS5wYWdlWHx8ZFswXS5wYWdlWSE9YS5wYWdlWSl7Zm9yKHZhciBiPTAsZz1kLmxlbmd0aDtiPGc7KytiKWlmKGRbYl0ucG9pbnRlcklkPT1hLnBvaW50ZXJJZCl7ZFtiXT1hO2JyZWFrfWEudG91Y2hlcz1kLnNsaWNlKCk7YyhhKX19KX0sYWRkTXNUb3VjaExpc3RlbmVyRW5kOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD10aGlzLl9tc1RvdWNoZXM7T3BlbkxheWVycy5FdmVudC5vYnNlcnZlKGEsIk1TUG9pbnRlclVwIixmdW5jdGlvbihhKXtmb3IodmFyIGI9MCxnPWQubGVuZ3RoO2I8ZzsrK2IpaWYoZFtiXS5wb2ludGVySWQ9PWEucG9pbnRlcklkKXtkLnNwbGljZShiLDEpO2JyZWFrfWEudG91Y2hlcz0KZC5zbGljZSgpO2MoYSl9KX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5FdmVudHMifSk7T3BlbkxheWVycy5FdmVudHMuYnV0dG9uY2xpY2s9T3BlbkxheWVycy5DbGFzcyh7dGFyZ2V0Om51bGwsZXZlbnRzOiJtb3VzZWRvd24gbW91c2V1cCBjbGljayBkYmxjbGljayB0b3VjaHN0YXJ0IHRvdWNobW92ZSB0b3VjaGVuZCBrZXlkb3duIi5zcGxpdCgiICIpLHN0YXJ0UmVnRXg6L15tb3VzZWRvd258dG91Y2hzdGFydCQvLGNhbmNlbFJlZ0V4Oi9edG91Y2htb3ZlJC8sY29tcGxldGVSZWdFeDovXm1vdXNldXB8dG91Y2hlbmQkLyxpbml0aWFsaXplOmZ1bmN0aW9uKGEpe3RoaXMudGFyZ2V0PWE7Zm9yKGE9dGhpcy5ldmVudHMubGVuZ3RoLTE7MDw9YTstLWEpdGhpcy50YXJnZXQucmVnaXN0ZXIodGhpcy5ldmVudHNbYV0sdGhpcyx0aGlzLmJ1dHRvbkNsaWNrLHtleHRlbnNpb246ITB9KX0sZGVzdHJveTpmdW5jdGlvbigpe2Zvcih2YXIgYT10aGlzLmV2ZW50cy5sZW5ndGgtMTswPD1hOy0tYSl0aGlzLnRhcmdldC51bnJlZ2lzdGVyKHRoaXMuZXZlbnRzW2FdLHRoaXMsdGhpcy5idXR0b25DbGljayk7CmRlbGV0ZSB0aGlzLnRhcmdldH0sZ2V0UHJlc3NlZEJ1dHRvbjpmdW5jdGlvbihhKXt2YXIgYj0zLGM7ZG97aWYoT3BlbkxheWVycy5FbGVtZW50Lmhhc0NsYXNzKGEsIm9sQnV0dG9uIikpe2M9YTticmVha31hPWEucGFyZW50Tm9kZX13aGlsZSgwPC0tYiYmYSk7cmV0dXJuIGN9LGlnbm9yZTpmdW5jdGlvbihhKXt2YXIgYj0zLGM9ITE7ZG97aWYoImEiPT09YS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpKXtjPSEwO2JyZWFrfWE9YS5wYXJlbnROb2RlfXdoaWxlKDA8LS1iJiZhKTtyZXR1cm4gY30sYnV0dG9uQ2xpY2s6ZnVuY3Rpb24oYSl7dmFyIGI9ITAsYz1PcGVuTGF5ZXJzLkV2ZW50LmVsZW1lbnQoYSk7aWYoYyYmKE9wZW5MYXllcnMuRXZlbnQuaXNMZWZ0Q2xpY2soYSl8fCF+YS50eXBlLmluZGV4T2YoIm1vdXNlIikpKWlmKGM9dGhpcy5nZXRQcmVzc2VkQnV0dG9uKGMpKXtpZigia2V5ZG93biI9PT1hLnR5cGUpc3dpdGNoKGEua2V5Q29kZSl7Y2FzZSBPcGVuTGF5ZXJzLkV2ZW50LktFWV9SRVRVUk46Y2FzZSBPcGVuTGF5ZXJzLkV2ZW50LktFWV9TUEFDRTp0aGlzLnRhcmdldC50cmlnZ2VyRXZlbnQoImJ1dHRvbmNsaWNrIiwKe2J1dHRvbkVsZW1lbnQ6Y30pLE9wZW5MYXllcnMuRXZlbnQuc3RvcChhKSxiPSExfWVsc2UgaWYodGhpcy5zdGFydEV2dCl7aWYodGhpcy5jb21wbGV0ZVJlZ0V4LnRlc3QoYS50eXBlKSl7dmFyIGI9T3BlbkxheWVycy5VdGlsLnBhZ2VQb3NpdGlvbihjKSxkPU9wZW5MYXllcnMuVXRpbC5nZXRWaWV3cG9ydEVsZW1lbnQoKSxlPXdpbmRvdy5wYWdlWU9mZnNldHx8ZC5zY3JvbGxUb3A7YlswXS09d2luZG93LnBhZ2VYT2Zmc2V0fHxkLnNjcm9sbExlZnQ7YlsxXS09ZTt0aGlzLnRhcmdldC50cmlnZ2VyRXZlbnQoImJ1dHRvbmNsaWNrIix7YnV0dG9uRWxlbWVudDpjLGJ1dHRvblhZOnt4OnRoaXMuc3RhcnRFdnQuY2xpZW50WC1iWzBdLHk6dGhpcy5zdGFydEV2dC5jbGllbnRZLWJbMV19fSl9dGhpcy5jYW5jZWxSZWdFeC50ZXN0KGEudHlwZSkmJmRlbGV0ZSB0aGlzLnN0YXJ0RXZ0O09wZW5MYXllcnMuRXZlbnQuc3RvcChhKTtiPSExfXRoaXMuc3RhcnRSZWdFeC50ZXN0KGEudHlwZSkmJgoodGhpcy5zdGFydEV2dD1hLE9wZW5MYXllcnMuRXZlbnQuc3RvcChhKSxiPSExKX1lbHNlIGI9IXRoaXMuaWdub3JlKE9wZW5MYXllcnMuRXZlbnQuZWxlbWVudChhKSksZGVsZXRlIHRoaXMuc3RhcnRFdnQ7cmV0dXJuIGJ9fSk7T3BlbkxheWVycy5VdGlsPU9wZW5MYXllcnMuVXRpbHx8e307Ck9wZW5MYXllcnMuVXRpbC52ZW5kb3JQcmVmaXg9ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGEpe3JldHVybiBhP2EucmVwbGFjZSgvKFtBLVpdKS9nLGZ1bmN0aW9uKGEpe3JldHVybiItIithLnRvTG93ZXJDYXNlKCl9KS5yZXBsYWNlKC9ebXMtLywiLW1zLSIpOm51bGx9ZnVuY3Rpb24gYihhLGIpe2lmKHZvaWQgMD09PWdbYl0pe3ZhciBjLGU9MCxmPWQubGVuZ3RoLHA9InVuZGVmaW5lZCIhPT10eXBlb2YgYS5jc3NUZXh0O2ZvcihnW2JdPW51bGw7ZTxmO2UrKylpZigoYz1kW2VdKT8ocHx8KGM9Yy50b0xvd2VyQ2FzZSgpKSxjPWMrYi5jaGFyQXQoMCkudG9VcHBlckNhc2UoKStiLnNsaWNlKDEpKTpjPWIsdm9pZCAwIT09YVtjXSl7Z1tiXT1jO2JyZWFrfX1yZXR1cm4gZ1tiXX1mdW5jdGlvbiBjKGEpe3JldHVybiBiKGUsYSl9dmFyIGQ9WyIiLCJPIiwibXMiLCJNb3oiLCJXZWJraXQiXSxlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpLnN0eWxlLGY9e30sZz17fTtyZXR1cm57Y3NzOmZ1bmN0aW9uKGIpe2lmKHZvaWQgMD09PQpmW2JdKXt2YXIgZD1iLnJlcGxhY2UoLygtW1xzXFNdKS9nLGZ1bmN0aW9uKGEpe3JldHVybiBhLmNoYXJBdCgxKS50b1VwcGVyQ2FzZSgpfSksZD1jKGQpO2ZbYl09YShkKX1yZXR1cm4gZltiXX0sanM6YixzdHlsZTpjLGNzc0NhY2hlOmYsanNDYWNoZTpnfX0oKTtPcGVuTGF5ZXJzLkFuaW1hdGlvbj1mdW5jdGlvbihhKXt2YXIgYj1PcGVuTGF5ZXJzLlV0aWwudmVuZG9yUHJlZml4LmpzKGEsInJlcXVlc3RBbmltYXRpb25GcmFtZSIpLGM9ISFiLGQ9ZnVuY3Rpb24oKXt2YXIgYz1hW2JdfHxmdW5jdGlvbihiLGMpe2Euc2V0VGltZW91dChiLDE2KX07cmV0dXJuIGZ1bmN0aW9uKGIsZCl7Yy5hcHBseShhLFtiLGRdKX19KCksZT0wLGY9e307cmV0dXJue2lzTmF0aXZlOmMscmVxdWVzdEZyYW1lOmQsc3RhcnQ6ZnVuY3Rpb24oYSxiLGMpe2I9MDxiP2I6TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZO3ZhciBsPSsrZSxtPStuZXcgRGF0ZTtmW2xdPWZ1bmN0aW9uKCl7ZltsXSYmK25ldyBEYXRlLW08PWI/KGEoKSxmW2xdJiZkKGZbbF0sYykpOmRlbGV0ZSBmW2xdfTtkKGZbbF0sYyk7cmV0dXJuIGx9LHN0b3A6ZnVuY3Rpb24oYSl7ZGVsZXRlIGZbYV19fX0od2luZG93KTtPcGVuTGF5ZXJzLlR3ZWVuPU9wZW5MYXllcnMuQ2xhc3Moe2Vhc2luZzpudWxsLGJlZ2luOm51bGwsZmluaXNoOm51bGwsZHVyYXRpb246bnVsbCxjYWxsYmFja3M6bnVsbCx0aW1lOm51bGwsbWluRnJhbWVSYXRlOm51bGwsc3RhcnRUaW1lOm51bGwsYW5pbWF0aW9uSWQ6bnVsbCxwbGF5aW5nOiExLGluaXRpYWxpemU6ZnVuY3Rpb24oYSl7dGhpcy5lYXNpbmc9YT9hOk9wZW5MYXllcnMuRWFzaW5nLkV4cG8uZWFzZU91dH0sc3RhcnQ6ZnVuY3Rpb24oYSxiLGMsZCl7dGhpcy5wbGF5aW5nPSEwO3RoaXMuYmVnaW49YTt0aGlzLmZpbmlzaD1iO3RoaXMuZHVyYXRpb249Yzt0aGlzLmNhbGxiYWNrcz1kLmNhbGxiYWNrczt0aGlzLm1pbkZyYW1lUmF0ZT1kLm1pbkZyYW1lUmF0ZXx8MzA7dGhpcy50aW1lPTA7dGhpcy5zdGFydFRpbWU9KG5ldyBEYXRlKS5nZXRUaW1lKCk7T3BlbkxheWVycy5BbmltYXRpb24uc3RvcCh0aGlzLmFuaW1hdGlvbklkKTt0aGlzLmFuaW1hdGlvbklkPW51bGw7CnRoaXMuY2FsbGJhY2tzJiZ0aGlzLmNhbGxiYWNrcy5zdGFydCYmdGhpcy5jYWxsYmFja3Muc3RhcnQuY2FsbCh0aGlzLHRoaXMuYmVnaW4pO3RoaXMuYW5pbWF0aW9uSWQ9T3BlbkxheWVycy5BbmltYXRpb24uc3RhcnQoT3BlbkxheWVycy5GdW5jdGlvbi5iaW5kKHRoaXMucGxheSx0aGlzKSl9LHN0b3A6ZnVuY3Rpb24oKXt0aGlzLnBsYXlpbmcmJih0aGlzLmNhbGxiYWNrcyYmdGhpcy5jYWxsYmFja3MuZG9uZSYmdGhpcy5jYWxsYmFja3MuZG9uZS5jYWxsKHRoaXMsdGhpcy5maW5pc2gpLE9wZW5MYXllcnMuQW5pbWF0aW9uLnN0b3AodGhpcy5hbmltYXRpb25JZCksdGhpcy5hbmltYXRpb25JZD1udWxsLHRoaXMucGxheWluZz0hMSl9LHBsYXk6ZnVuY3Rpb24oKXt2YXIgYT17fSxiO2ZvcihiIGluIHRoaXMuYmVnaW4pe3ZhciBjPXRoaXMuYmVnaW5bYl0sZD10aGlzLmZpbmlzaFtiXTtpZihudWxsPT1jfHxudWxsPT1kfHxpc05hTihjKXx8aXNOYU4oZCkpdGhyb3cgbmV3IFR5cGVFcnJvcigiaW52YWxpZCB2YWx1ZSBmb3IgVHdlZW4iKTsKYVtiXT10aGlzLmVhc2luZy5hcHBseSh0aGlzLFt0aGlzLnRpbWUsYyxkLWMsdGhpcy5kdXJhdGlvbl0pfXRoaXMudGltZSsrO3RoaXMuY2FsbGJhY2tzJiZ0aGlzLmNhbGxiYWNrcy5lYWNoU3RlcCYmKChuZXcgRGF0ZSkuZ2V0VGltZSgpLXRoaXMuc3RhcnRUaW1lKS90aGlzLnRpbWU8PTFFMy90aGlzLm1pbkZyYW1lUmF0ZSYmdGhpcy5jYWxsYmFja3MuZWFjaFN0ZXAuY2FsbCh0aGlzLGEpO3RoaXMudGltZT50aGlzLmR1cmF0aW9uJiZ0aGlzLnN0b3AoKX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Ud2VlbiJ9KTtPcGVuTGF5ZXJzLkVhc2luZz17Q0xBU1NfTkFNRToiT3BlbkxheWVycy5FYXNpbmcifTtPcGVuTGF5ZXJzLkVhc2luZy5MaW5lYXI9e2Vhc2VJbjpmdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gYyphL2QrYn0sZWFzZU91dDpmdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gYyphL2QrYn0sZWFzZUluT3V0OmZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiBjKmEvZCtifSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkVhc2luZy5MaW5lYXIifTsKT3BlbkxheWVycy5FYXNpbmcuRXhwbz17ZWFzZUluOmZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiAwPT1hP2I6YypNYXRoLnBvdygyLDEwKihhL2QtMSkpK2J9LGVhc2VPdXQ6ZnVuY3Rpb24oYSxiLGMsZCl7cmV0dXJuIGE9PWQ/YitjOmMqKC1NYXRoLnBvdygyLC0xMCphL2QpKzEpK2J9LGVhc2VJbk91dDpmdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gMD09YT9iOmE9PWQ/YitjOjE+KGEvPWQvMik/Yy8yKk1hdGgucG93KDIsMTAqKGEtMSkpK2I6Yy8yKigtTWF0aC5wb3coMiwtMTAqLS1hKSsyKStifSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkVhc2luZy5FeHBvIn07Ck9wZW5MYXllcnMuRWFzaW5nLlF1YWQ9e2Vhc2VJbjpmdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gYyooYS89ZCkqYStifSxlYXNlT3V0OmZ1bmN0aW9uKGEsYixjLGQpe3JldHVybi1jKihhLz1kKSooYS0yKStifSxlYXNlSW5PdXQ6ZnVuY3Rpb24oYSxiLGMsZCl7cmV0dXJuIDE+KGEvPWQvMik/Yy8yKmEqYStiOi1jLzIqKC0tYSooYS0yKS0xKStifSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkVhc2luZy5RdWFkIn07T3BlbkxheWVycy5Qcm9qZWN0aW9uPU9wZW5MYXllcnMuQ2xhc3Moe3Byb2o6bnVsbCxwcm9qQ29kZTpudWxsLHRpdGxlUmVnRXg6L1wrdGl0bGU9W15cK10qLyxpbml0aWFsaXplOmZ1bmN0aW9uKGEsYil7T3BlbkxheWVycy5VdGlsLmV4dGVuZCh0aGlzLGIpO3RoaXMucHJvakNvZGU9YTsib2JqZWN0Ij09dHlwZW9mIFByb2o0anMmJih0aGlzLnByb2o9bmV3IFByb2o0anMuUHJvaihhKSl9LGdldENvZGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wcm9qP3RoaXMucHJvai5zcnNDb2RlOnRoaXMucHJvakNvZGV9LGdldFVuaXRzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHJvaj90aGlzLnByb2oudW5pdHM6bnVsbH0sdG9TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRDb2RlKCl9LGVxdWFsczpmdW5jdGlvbihhKXt2YXIgYj0hMTthJiYoYSBpbnN0YW5jZW9mIE9wZW5MYXllcnMuUHJvamVjdGlvbnx8KGE9bmV3IE9wZW5MYXllcnMuUHJvamVjdGlvbihhKSksIm9iamVjdCI9PQp0eXBlb2YgUHJvajRqcyYmdGhpcy5wcm9qLmRlZkRhdGEmJmEucHJvai5kZWZEYXRhP2I9dGhpcy5wcm9qLmRlZkRhdGEucmVwbGFjZSh0aGlzLnRpdGxlUmVnRXgsIiIpPT1hLnByb2ouZGVmRGF0YS5yZXBsYWNlKHRoaXMudGl0bGVSZWdFeCwiIik6YS5nZXRDb2RlJiYoYj10aGlzLmdldENvZGUoKSxhPWEuZ2V0Q29kZSgpLGI9Yj09YXx8ISFPcGVuTGF5ZXJzLlByb2plY3Rpb24udHJhbnNmb3Jtc1tiXSYmT3BlbkxheWVycy5Qcm9qZWN0aW9uLnRyYW5zZm9ybXNbYl1bYV09PT1PcGVuTGF5ZXJzLlByb2plY3Rpb24ubnVsbFRyYW5zZm9ybSkpO3JldHVybiBifSxkZXN0cm95OmZ1bmN0aW9uKCl7ZGVsZXRlIHRoaXMucHJvajtkZWxldGUgdGhpcy5wcm9qQ29kZX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Qcm9qZWN0aW9uIn0pO09wZW5MYXllcnMuUHJvamVjdGlvbi50cmFuc2Zvcm1zPXt9OwpPcGVuTGF5ZXJzLlByb2plY3Rpb24uZGVmYXVsdHM9eyJFUFNHOjQzMjYiOnt1bml0czoiZGVncmVlcyIsbWF4RXh0ZW50OlstMTgwLC05MCwxODAsOTBdLHl4OiEwfSwiQ1JTOjg0Ijp7dW5pdHM6ImRlZ3JlZXMiLG1heEV4dGVudDpbLTE4MCwtOTAsMTgwLDkwXX0sIkVQU0c6OTAwOTEzIjp7dW5pdHM6Im0iLG1heEV4dGVudDpbLTIuMDAzNzUwODM0RTcsLTIuMDAzNzUwODM0RTcsMi4wMDM3NTA4MzRFNywyLjAwMzc1MDgzNEU3XX19OwpPcGVuTGF5ZXJzLlByb2plY3Rpb24uYWRkVHJhbnNmb3JtPWZ1bmN0aW9uKGEsYixjKXtpZihjPT09T3BlbkxheWVycy5Qcm9qZWN0aW9uLm51bGxUcmFuc2Zvcm0pe3ZhciBkPU9wZW5MYXllcnMuUHJvamVjdGlvbi5kZWZhdWx0c1thXTtkJiYhT3BlbkxheWVycy5Qcm9qZWN0aW9uLmRlZmF1bHRzW2JdJiYoT3BlbkxheWVycy5Qcm9qZWN0aW9uLmRlZmF1bHRzW2JdPWQpfU9wZW5MYXllcnMuUHJvamVjdGlvbi50cmFuc2Zvcm1zW2FdfHwoT3BlbkxheWVycy5Qcm9qZWN0aW9uLnRyYW5zZm9ybXNbYV09e30pO09wZW5MYXllcnMuUHJvamVjdGlvbi50cmFuc2Zvcm1zW2FdW2JdPWN9OwpPcGVuTGF5ZXJzLlByb2plY3Rpb24udHJhbnNmb3JtPWZ1bmN0aW9uKGEsYixjKXtpZihiJiZjKWlmKGIgaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLlByb2plY3Rpb258fChiPW5ldyBPcGVuTGF5ZXJzLlByb2plY3Rpb24oYikpLGMgaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLlByb2plY3Rpb258fChjPW5ldyBPcGVuTGF5ZXJzLlByb2plY3Rpb24oYykpLGIucHJvaiYmYy5wcm9qKWE9UHJvajRqcy50cmFuc2Zvcm0oYi5wcm9qLGMucHJvaixhKTtlbHNle2I9Yi5nZXRDb2RlKCk7Yz1jLmdldENvZGUoKTt2YXIgZD1PcGVuTGF5ZXJzLlByb2plY3Rpb24udHJhbnNmb3JtcztpZihkW2JdJiZkW2JdW2NdKWRbYl1bY10oYSl9cmV0dXJuIGF9O09wZW5MYXllcnMuUHJvamVjdGlvbi5udWxsVHJhbnNmb3JtPWZ1bmN0aW9uKGEpe3JldHVybiBhfTsKKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhKXthLng9MTgwKmEueC9kO2EueT0xODAvTWF0aC5QSSooMipNYXRoLmF0YW4oTWF0aC5leHAoYS55L2QqTWF0aC5QSSkpLU1hdGguUEkvMik7cmV0dXJuIGF9ZnVuY3Rpb24gYihhKXthLng9YS54KmQvMTgwO3ZhciBiPU1hdGgubG9nKE1hdGgudGFuKCg5MCthLnkpKk1hdGguUEkvMzYwKSkvTWF0aC5QSSpkO2EueT1NYXRoLm1heCgtMi4wMDM3NTA4MzRFNyxNYXRoLm1pbihiLDIuMDAzNzUwODM0RTcpKTtyZXR1cm4gYX1mdW5jdGlvbiBjKGMsZCl7dmFyIGU9T3BlbkxheWVycy5Qcm9qZWN0aW9uLmFkZFRyYW5zZm9ybSxmPU9wZW5MYXllcnMuUHJvamVjdGlvbi5udWxsVHJhbnNmb3JtLGcscCxxLHIscztnPTA7Zm9yKHA9ZC5sZW5ndGg7ZzxwOysrZylmb3IocT1kW2ddLGUoYyxxLGIpLGUocSxjLGEpLHM9ZysxO3M8cDsrK3Mpcj1kW3NdLGUocSxyLGYpLGUocixxLGYpfXZhciBkPTIuMDAzNzUwODM0RTcsZT1bIkVQU0c6OTAwOTEzIiwiRVBTRzozODU3IiwKIkVQU0c6MTAyMTEzIiwiRVBTRzoxMDIxMDAiXSxmPVsiQ1JTOjg0IiwidXJuOm9nYzpkZWY6Y3JzOkVQU0c6Ni42OjQzMjYiLCJFUFNHOjQzMjYiXSxnO2ZvcihnPWUubGVuZ3RoLTE7MDw9ZzstLWcpYyhlW2ddLGYpO2ZvcihnPWYubGVuZ3RoLTE7MDw9ZzstLWcpYyhmW2ddLGUpfSkoKTtPcGVuTGF5ZXJzLk1hcD1PcGVuTGF5ZXJzLkNsYXNzKHtaX0lOREVYX0JBU0U6e0Jhc2VMYXllcjoxMDAsT3ZlcmxheTozMjUsRmVhdHVyZTo3MjUsUG9wdXA6NzUwLENvbnRyb2w6MUUzfSxpZDpudWxsLGZyYWN0aW9uYWxab29tOiExLGV2ZW50czpudWxsLGFsbE92ZXJsYXlzOiExLGRpdjpudWxsLGRyYWdnaW5nOiExLHNpemU6bnVsbCx2aWV3UG9ydERpdjpudWxsLGxheWVyQ29udGFpbmVyT3JpZ2luOm51bGwsbGF5ZXJDb250YWluZXJEaXY6bnVsbCxsYXllcnM6bnVsbCxjb250cm9sczpudWxsLHBvcHVwczpudWxsLGJhc2VMYXllcjpudWxsLGNlbnRlcjpudWxsLHJlc29sdXRpb246bnVsbCx6b29tOjAscGFuUmF0aW86MS41LG9wdGlvbnM6bnVsbCx0aWxlU2l6ZTpudWxsLHByb2plY3Rpb246IkVQU0c6NDMyNiIsdW5pdHM6bnVsbCxyZXNvbHV0aW9uczpudWxsLG1heFJlc29sdXRpb246bnVsbCxtaW5SZXNvbHV0aW9uOm51bGwsbWF4U2NhbGU6bnVsbCxtaW5TY2FsZTpudWxsLAptYXhFeHRlbnQ6bnVsbCxtaW5FeHRlbnQ6bnVsbCxyZXN0cmljdGVkRXh0ZW50Om51bGwsbnVtWm9vbUxldmVsczoxNix0aGVtZTpudWxsLGRpc3BsYXlQcm9qZWN0aW9uOm51bGwsZmFsbFRocm91Z2g6ITEsYXV0b1VwZGF0ZVNpemU6ITAsZXZlbnRMaXN0ZW5lcnM6bnVsbCxwYW5Ud2VlbjpudWxsLHBhbk1ldGhvZDpPcGVuTGF5ZXJzLkVhc2luZy5FeHBvLmVhc2VPdXQscGFuRHVyYXRpb246NTAsem9vbVR3ZWVuOm51bGwsem9vbU1ldGhvZDpPcGVuTGF5ZXJzLkVhc2luZy5RdWFkLmVhc2VPdXQsem9vbUR1cmF0aW9uOjIwLHBhZGRpbmdGb3JQb3B1cHM6bnVsbCxsYXllckNvbnRhaW5lck9yaWdpblB4Om51bGwsbWluUHg6bnVsbCxtYXhQeDpudWxsLGluaXRpYWxpemU6ZnVuY3Rpb24oYSxiKXsxPT09YXJndW1lbnRzLmxlbmd0aCYmIm9iamVjdCI9PT10eXBlb2YgYSYmKGE9KGI9YSkmJmIuZGl2KTt0aGlzLnRpbGVTaXplPW5ldyBPcGVuTGF5ZXJzLlNpemUoT3BlbkxheWVycy5NYXAuVElMRV9XSURUSCwKT3BlbkxheWVycy5NYXAuVElMRV9IRUlHSFQpO3RoaXMucGFkZGluZ0ZvclBvcHVwcz1uZXcgT3BlbkxheWVycy5Cb3VuZHMoMTUsMTUsMTUsMTUpO3RoaXMudGhlbWU9T3BlbkxheWVycy5fZ2V0U2NyaXB0TG9jYXRpb24oKSsidGhlbWUvZGVmYXVsdC9zdHlsZS5jc3MiO3RoaXMub3B0aW9ucz1PcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHt9LGIpO09wZW5MYXllcnMuVXRpbC5leHRlbmQodGhpcyxiKTtPcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyh0aGlzLE9wZW5MYXllcnMuUHJvamVjdGlvbi5kZWZhdWx0c1t0aGlzLnByb2plY3Rpb24gaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLlByb2plY3Rpb24/dGhpcy5wcm9qZWN0aW9uLnByb2pDb2RlOnRoaXMucHJvamVjdGlvbl0pOyF0aGlzLm1heEV4dGVudHx8dGhpcy5tYXhFeHRlbnQgaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLkJvdW5kc3x8KHRoaXMubWF4RXh0ZW50PW5ldyBPcGVuTGF5ZXJzLkJvdW5kcyh0aGlzLm1heEV4dGVudCkpOwohdGhpcy5taW5FeHRlbnR8fHRoaXMubWluRXh0ZW50IGluc3RhbmNlb2YgT3BlbkxheWVycy5Cb3VuZHN8fCh0aGlzLm1pbkV4dGVudD1uZXcgT3BlbkxheWVycy5Cb3VuZHModGhpcy5taW5FeHRlbnQpKTshdGhpcy5yZXN0cmljdGVkRXh0ZW50fHx0aGlzLnJlc3RyaWN0ZWRFeHRlbnQgaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLkJvdW5kc3x8KHRoaXMucmVzdHJpY3RlZEV4dGVudD1uZXcgT3BlbkxheWVycy5Cb3VuZHModGhpcy5yZXN0cmljdGVkRXh0ZW50KSk7IXRoaXMuY2VudGVyfHx0aGlzLmNlbnRlciBpbnN0YW5jZW9mIE9wZW5MYXllcnMuTG9uTGF0fHwodGhpcy5jZW50ZXI9bmV3IE9wZW5MYXllcnMuTG9uTGF0KHRoaXMuY2VudGVyKSk7dGhpcy5sYXllcnM9W107dGhpcy5pZD1PcGVuTGF5ZXJzLlV0aWwuY3JlYXRlVW5pcXVlSUQoIk9wZW5MYXllcnMuTWFwXyIpO3RoaXMuZGl2PU9wZW5MYXllcnMuVXRpbC5nZXRFbGVtZW50KGEpO3RoaXMuZGl2fHwodGhpcy5kaXY9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2IiksCnRoaXMuZGl2LnN0eWxlLmhlaWdodD0iMXB4Iix0aGlzLmRpdi5zdHlsZS53aWR0aD0iMXB4Iik7T3BlbkxheWVycy5FbGVtZW50LmFkZENsYXNzKHRoaXMuZGl2LCJvbE1hcCIpO3ZhciBjPXRoaXMuaWQrIl9PcGVuTGF5ZXJzX1ZpZXdQb3J0Ijt0aGlzLnZpZXdQb3J0RGl2PU9wZW5MYXllcnMuVXRpbC5jcmVhdGVEaXYoYyxudWxsLG51bGwsbnVsbCwicmVsYXRpdmUiLG51bGwsImhpZGRlbiIpO3RoaXMudmlld1BvcnREaXYuc3R5bGUud2lkdGg9IjEwMCUiO3RoaXMudmlld1BvcnREaXYuc3R5bGUuaGVpZ2h0PSIxMDAlIjt0aGlzLnZpZXdQb3J0RGl2LmNsYXNzTmFtZT0ib2xNYXBWaWV3cG9ydCI7dGhpcy5kaXYuYXBwZW5kQ2hpbGQodGhpcy52aWV3UG9ydERpdik7dGhpcy5ldmVudHM9bmV3IE9wZW5MYXllcnMuRXZlbnRzKHRoaXMsdGhpcy52aWV3UG9ydERpdixudWxsLHRoaXMuZmFsbFRocm91Z2gse2luY2x1ZGVYWTohMH0pO09wZW5MYXllcnMuVGlsZU1hbmFnZXImJm51bGwhPT0KdGhpcy50aWxlTWFuYWdlciYmKHRoaXMudGlsZU1hbmFnZXIgaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLlRpbGVNYW5hZ2VyfHwodGhpcy50aWxlTWFuYWdlcj1uZXcgT3BlbkxheWVycy5UaWxlTWFuYWdlcih0aGlzLnRpbGVNYW5hZ2VyKSksdGhpcy50aWxlTWFuYWdlci5hZGRNYXAodGhpcykpO2M9dGhpcy5pZCsiX09wZW5MYXllcnNfQ29udGFpbmVyIjt0aGlzLmxheWVyQ29udGFpbmVyRGl2PU9wZW5MYXllcnMuVXRpbC5jcmVhdGVEaXYoYyk7dGhpcy5sYXllckNvbnRhaW5lckRpdi5zdHlsZS56SW5kZXg9dGhpcy5aX0lOREVYX0JBU0UuUG9wdXAtMTt0aGlzLmxheWVyQ29udGFpbmVyT3JpZ2luUHg9e3g6MCx5OjB9O3RoaXMuYXBwbHlUcmFuc2Zvcm0oKTt0aGlzLnZpZXdQb3J0RGl2LmFwcGVuZENoaWxkKHRoaXMubGF5ZXJDb250YWluZXJEaXYpO3RoaXMudXBkYXRlU2l6ZSgpO2lmKHRoaXMuZXZlbnRMaXN0ZW5lcnMgaW5zdGFuY2VvZiBPYmplY3QpdGhpcy5ldmVudHMub24odGhpcy5ldmVudExpc3RlbmVycyk7CiEwPT09dGhpcy5hdXRvVXBkYXRlU2l6ZSYmKHRoaXMudXBkYXRlU2l6ZURlc3Ryb3k9T3BlbkxheWVycy5GdW5jdGlvbi5iaW5kKHRoaXMudXBkYXRlU2l6ZSx0aGlzKSxPcGVuTGF5ZXJzLkV2ZW50Lm9ic2VydmUod2luZG93LCJyZXNpemUiLHRoaXMudXBkYXRlU2l6ZURlc3Ryb3kpKTtpZih0aGlzLnRoZW1lKXtmb3IodmFyIGM9ITAsZD1kb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgibGluayIpLGU9MCxmPWQubGVuZ3RoO2U8ZjsrK2UpaWYoT3BlbkxheWVycy5VdGlsLmlzRXF1aXZhbGVudFVybChkLml0ZW0oZSkuaHJlZix0aGlzLnRoZW1lKSl7Yz0hMTticmVha31jJiYoYz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJsaW5rIiksYy5zZXRBdHRyaWJ1dGUoInJlbCIsInN0eWxlc2hlZXQiKSxjLnNldEF0dHJpYnV0ZSgidHlwZSIsInRleHQvY3NzIiksYy5zZXRBdHRyaWJ1dGUoImhyZWYiLHRoaXMudGhlbWUpLGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJoZWFkIilbMF0uYXBwZW5kQ2hpbGQoYykpfW51bGw9PQp0aGlzLmNvbnRyb2xzJiYodGhpcy5jb250cm9scz1bXSxudWxsIT1PcGVuTGF5ZXJzLkNvbnRyb2wmJihPcGVuTGF5ZXJzLkNvbnRyb2wuTmF2aWdhdGlvbj90aGlzLmNvbnRyb2xzLnB1c2gobmV3IE9wZW5MYXllcnMuQ29udHJvbC5OYXZpZ2F0aW9uKTpPcGVuTGF5ZXJzLkNvbnRyb2wuVG91Y2hOYXZpZ2F0aW9uJiZ0aGlzLmNvbnRyb2xzLnB1c2gobmV3IE9wZW5MYXllcnMuQ29udHJvbC5Ub3VjaE5hdmlnYXRpb24pLE9wZW5MYXllcnMuQ29udHJvbC5ab29tP3RoaXMuY29udHJvbHMucHVzaChuZXcgT3BlbkxheWVycy5Db250cm9sLlpvb20pOk9wZW5MYXllcnMuQ29udHJvbC5QYW5ab29tJiZ0aGlzLmNvbnRyb2xzLnB1c2gobmV3IE9wZW5MYXllcnMuQ29udHJvbC5QYW5ab29tKSxPcGVuTGF5ZXJzLkNvbnRyb2wuQXJnUGFyc2VyJiZ0aGlzLmNvbnRyb2xzLnB1c2gobmV3IE9wZW5MYXllcnMuQ29udHJvbC5BcmdQYXJzZXIpLE9wZW5MYXllcnMuQ29udHJvbC5BdHRyaWJ1dGlvbiYmCnRoaXMuY29udHJvbHMucHVzaChuZXcgT3BlbkxheWVycy5Db250cm9sLkF0dHJpYnV0aW9uKSkpO2U9MDtmb3IoZj10aGlzLmNvbnRyb2xzLmxlbmd0aDtlPGY7ZSsrKXRoaXMuYWRkQ29udHJvbFRvTWFwKHRoaXMuY29udHJvbHNbZV0pO3RoaXMucG9wdXBzPVtdO3RoaXMudW5sb2FkRGVzdHJveT1PcGVuTGF5ZXJzLkZ1bmN0aW9uLmJpbmQodGhpcy5kZXN0cm95LHRoaXMpO09wZW5MYXllcnMuRXZlbnQub2JzZXJ2ZSh3aW5kb3csInVubG9hZCIsdGhpcy51bmxvYWREZXN0cm95KTtiJiZiLmxheWVycyYmKGRlbGV0ZSB0aGlzLmNlbnRlcixkZWxldGUgdGhpcy56b29tLHRoaXMuYWRkTGF5ZXJzKGIubGF5ZXJzKSxiLmNlbnRlciYmIXRoaXMuZ2V0Q2VudGVyKCkmJnRoaXMuc2V0Q2VudGVyKGIuY2VudGVyLGIuem9vbSkpO3RoaXMucGFuTWV0aG9kJiYodGhpcy5wYW5Ud2Vlbj1uZXcgT3BlbkxheWVycy5Ud2Vlbih0aGlzLnBhbk1ldGhvZCkpO3RoaXMuem9vbU1ldGhvZCYmdGhpcy5hcHBseVRyYW5zZm9ybS50cmFuc2Zvcm0mJgoodGhpcy56b29tVHdlZW49bmV3IE9wZW5MYXllcnMuVHdlZW4odGhpcy56b29tTWV0aG9kKSl9LGdldFZpZXdwb3J0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudmlld1BvcnREaXZ9LHJlbmRlcjpmdW5jdGlvbihhKXt0aGlzLmRpdj1PcGVuTGF5ZXJzLlV0aWwuZ2V0RWxlbWVudChhKTtPcGVuTGF5ZXJzLkVsZW1lbnQuYWRkQ2xhc3ModGhpcy5kaXYsIm9sTWFwIik7dGhpcy52aWV3UG9ydERpdi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMudmlld1BvcnREaXYpO3RoaXMuZGl2LmFwcGVuZENoaWxkKHRoaXMudmlld1BvcnREaXYpO3RoaXMudXBkYXRlU2l6ZSgpfSx1bmxvYWREZXN0cm95Om51bGwsdXBkYXRlU2l6ZURlc3Ryb3k6bnVsbCxkZXN0cm95OmZ1bmN0aW9uKCl7aWYoIXRoaXMudW5sb2FkRGVzdHJveSlyZXR1cm4hMTt0aGlzLnBhblR3ZWVuJiYodGhpcy5wYW5Ud2Vlbi5zdG9wKCksdGhpcy5wYW5Ud2Vlbj1udWxsKTt0aGlzLnpvb21Ud2VlbiYmKHRoaXMuem9vbVR3ZWVuLnN0b3AoKSwKdGhpcy56b29tVHdlZW49bnVsbCk7T3BlbkxheWVycy5FdmVudC5zdG9wT2JzZXJ2aW5nKHdpbmRvdywidW5sb2FkIix0aGlzLnVubG9hZERlc3Ryb3kpO3RoaXMudW5sb2FkRGVzdHJveT1udWxsO3RoaXMudXBkYXRlU2l6ZURlc3Ryb3kmJk9wZW5MYXllcnMuRXZlbnQuc3RvcE9ic2VydmluZyh3aW5kb3csInJlc2l6ZSIsdGhpcy51cGRhdGVTaXplRGVzdHJveSk7dGhpcy5wYWRkaW5nRm9yUG9wdXBzPW51bGw7aWYobnVsbCE9dGhpcy5jb250cm9scyl7Zm9yKHZhciBhPXRoaXMuY29udHJvbHMubGVuZ3RoLTE7MDw9YTstLWEpdGhpcy5jb250cm9sc1thXS5kZXN0cm95KCk7dGhpcy5jb250cm9scz1udWxsfWlmKG51bGwhPXRoaXMubGF5ZXJzKXtmb3IoYT10aGlzLmxheWVycy5sZW5ndGgtMTswPD1hOy0tYSl0aGlzLmxheWVyc1thXS5kZXN0cm95KCExKTt0aGlzLmxheWVycz1udWxsfXRoaXMudmlld1BvcnREaXYmJnRoaXMudmlld1BvcnREaXYucGFyZW50Tm9kZSYmdGhpcy52aWV3UG9ydERpdi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMudmlld1BvcnREaXYpOwp0aGlzLnZpZXdQb3J0RGl2PW51bGw7dGhpcy50aWxlTWFuYWdlciYmKHRoaXMudGlsZU1hbmFnZXIucmVtb3ZlTWFwKHRoaXMpLHRoaXMudGlsZU1hbmFnZXI9bnVsbCk7dGhpcy5ldmVudExpc3RlbmVycyYmKHRoaXMuZXZlbnRzLnVuKHRoaXMuZXZlbnRMaXN0ZW5lcnMpLHRoaXMuZXZlbnRMaXN0ZW5lcnM9bnVsbCk7dGhpcy5ldmVudHMuZGVzdHJveSgpO3RoaXMub3B0aW9ucz10aGlzLmV2ZW50cz1udWxsfSxzZXRPcHRpb25zOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMubWluUHgmJmEucmVzdHJpY3RlZEV4dGVudCE9dGhpcy5yZXN0cmljdGVkRXh0ZW50O09wZW5MYXllcnMuVXRpbC5leHRlbmQodGhpcyxhKTtiJiZ0aGlzLm1vdmVUbyh0aGlzLmdldENhY2hlZENlbnRlcigpLHRoaXMuem9vbSx7Zm9yY2Vab29tQ2hhbmdlOiEwfSl9LGdldFRpbGVTaXplOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGlsZVNpemV9LGdldEJ5OmZ1bmN0aW9uKGEsYixjKXt2YXIgZD0iZnVuY3Rpb24iPT0KdHlwZW9mIGMudGVzdDtyZXR1cm4gT3BlbkxheWVycy5BcnJheS5maWx0ZXIodGhpc1thXSxmdW5jdGlvbihhKXtyZXR1cm4gYVtiXT09Y3x8ZCYmYy50ZXN0KGFbYl0pfSl9LGdldExheWVyc0J5OmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuZ2V0QnkoImxheWVycyIsYSxiKX0sZ2V0TGF5ZXJzQnlOYW1lOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmdldExheWVyc0J5KCJuYW1lIixhKX0sZ2V0TGF5ZXJzQnlDbGFzczpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5nZXRMYXllcnNCeSgiQ0xBU1NfTkFNRSIsYSl9LGdldENvbnRyb2xzQnk6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5nZXRCeSgiY29udHJvbHMiLGEsYil9LGdldENvbnRyb2xzQnlDbGFzczpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5nZXRDb250cm9sc0J5KCJDTEFTU19OQU1FIixhKX0sZ2V0TGF5ZXI6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPW51bGwsYz0wLGQ9dGhpcy5sYXllcnMubGVuZ3RoO2M8ZDtjKyspe3ZhciBlPQp0aGlzLmxheWVyc1tjXTtpZihlLmlkPT1hKXtiPWU7YnJlYWt9fXJldHVybiBifSxzZXRMYXllclpJbmRleDpmdW5jdGlvbihhLGIpe2Euc2V0WkluZGV4KHRoaXMuWl9JTkRFWF9CQVNFW2EuaXNCYXNlTGF5ZXI/IkJhc2VMYXllciI6Ik92ZXJsYXkiXSs1KmIpfSxyZXNldExheWVyc1pJbmRleDpmdW5jdGlvbigpe2Zvcih2YXIgYT0wLGI9dGhpcy5sYXllcnMubGVuZ3RoO2E8YjthKyspdGhpcy5zZXRMYXllclpJbmRleCh0aGlzLmxheWVyc1thXSxhKX0sYWRkTGF5ZXI6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPTAsYz10aGlzLmxheWVycy5sZW5ndGg7YjxjO2IrKylpZih0aGlzLmxheWVyc1tiXT09YSlyZXR1cm4hMTtpZighMT09PXRoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgicHJlYWRkbGF5ZXIiLHtsYXllcjphfSkpcmV0dXJuITE7dGhpcy5hbGxPdmVybGF5cyYmKGEuaXNCYXNlTGF5ZXI9ITEpO2EuZGl2LmNsYXNzTmFtZT0ib2xMYXllckRpdiI7YS5kaXYuc3R5bGUub3ZlcmZsb3c9CiIiO3RoaXMuc2V0TGF5ZXJaSW5kZXgoYSx0aGlzLmxheWVycy5sZW5ndGgpO2EuaXNGaXhlZD90aGlzLnZpZXdQb3J0RGl2LmFwcGVuZENoaWxkKGEuZGl2KTp0aGlzLmxheWVyQ29udGFpbmVyRGl2LmFwcGVuZENoaWxkKGEuZGl2KTt0aGlzLmxheWVycy5wdXNoKGEpO2Euc2V0TWFwKHRoaXMpO2EuaXNCYXNlTGF5ZXJ8fHRoaXMuYWxsT3ZlcmxheXMmJiF0aGlzLmJhc2VMYXllcj9udWxsPT10aGlzLmJhc2VMYXllcj90aGlzLnNldEJhc2VMYXllcihhKTphLnNldFZpc2liaWxpdHkoITEpOmEucmVkcmF3KCk7dGhpcy5ldmVudHMudHJpZ2dlckV2ZW50KCJhZGRsYXllciIse2xheWVyOmF9KTthLmV2ZW50cy50cmlnZ2VyRXZlbnQoImFkZGVkIix7bWFwOnRoaXMsbGF5ZXI6YX0pO2EuYWZ0ZXJBZGQoKTtyZXR1cm4hMH0sYWRkTGF5ZXJzOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0wLGM9YS5sZW5ndGg7YjxjO2IrKyl0aGlzLmFkZExheWVyKGFbYl0pfSxyZW1vdmVMYXllcjpmdW5jdGlvbihhLApiKXtpZighMSE9PXRoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgicHJlcmVtb3ZlbGF5ZXIiLHtsYXllcjphfSkpe251bGw9PWImJihiPSEwKTthLmlzRml4ZWQ/dGhpcy52aWV3UG9ydERpdi5yZW1vdmVDaGlsZChhLmRpdik6dGhpcy5sYXllckNvbnRhaW5lckRpdi5yZW1vdmVDaGlsZChhLmRpdik7T3BlbkxheWVycy5VdGlsLnJlbW92ZUl0ZW0odGhpcy5sYXllcnMsYSk7YS5yZW1vdmVNYXAodGhpcyk7YS5tYXA9bnVsbDtpZih0aGlzLmJhc2VMYXllcj09YSYmKHRoaXMuYmFzZUxheWVyPW51bGwsYikpZm9yKHZhciBjPTAsZD10aGlzLmxheWVycy5sZW5ndGg7YzxkO2MrKyl7dmFyIGU9dGhpcy5sYXllcnNbY107aWYoZS5pc0Jhc2VMYXllcnx8dGhpcy5hbGxPdmVybGF5cyl7dGhpcy5zZXRCYXNlTGF5ZXIoZSk7YnJlYWt9fXRoaXMucmVzZXRMYXllcnNaSW5kZXgoKTt0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoInJlbW92ZWxheWVyIix7bGF5ZXI6YX0pO2EuZXZlbnRzLnRyaWdnZXJFdmVudCgicmVtb3ZlZCIsCnttYXA6dGhpcyxsYXllcjphfSl9fSxnZXROdW1MYXllcnM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sYXllcnMubGVuZ3RofSxnZXRMYXllckluZGV4OmZ1bmN0aW9uKGEpe3JldHVybiBPcGVuTGF5ZXJzLlV0aWwuaW5kZXhPZih0aGlzLmxheWVycyxhKX0sc2V0TGF5ZXJJbmRleDpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuZ2V0TGF5ZXJJbmRleChhKTswPmI/Yj0wOmI+dGhpcy5sYXllcnMubGVuZ3RoJiYoYj10aGlzLmxheWVycy5sZW5ndGgpO2lmKGMhPWIpe3RoaXMubGF5ZXJzLnNwbGljZShjLDEpO3RoaXMubGF5ZXJzLnNwbGljZShiLDAsYSk7Zm9yKHZhciBjPTAsZD10aGlzLmxheWVycy5sZW5ndGg7YzxkO2MrKyl0aGlzLnNldExheWVyWkluZGV4KHRoaXMubGF5ZXJzW2NdLGMpO3RoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgiY2hhbmdlbGF5ZXIiLHtsYXllcjphLHByb3BlcnR5OiJvcmRlciJ9KTt0aGlzLmFsbE92ZXJsYXlzJiYoMD09PWI/dGhpcy5zZXRCYXNlTGF5ZXIoYSk6CnRoaXMuYmFzZUxheWVyIT09dGhpcy5sYXllcnNbMF0mJnRoaXMuc2V0QmFzZUxheWVyKHRoaXMubGF5ZXJzWzBdKSl9fSxyYWlzZUxheWVyOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5nZXRMYXllckluZGV4KGEpK2I7dGhpcy5zZXRMYXllckluZGV4KGEsYyl9LHNldEJhc2VMYXllcjpmdW5jdGlvbihhKXtpZihhIT10aGlzLmJhc2VMYXllciYmLTEhPU9wZW5MYXllcnMuVXRpbC5pbmRleE9mKHRoaXMubGF5ZXJzLGEpKXt2YXIgYj10aGlzLmdldENhY2hlZENlbnRlcigpLGM9T3BlbkxheWVycy5VdGlsLmdldFJlc29sdXRpb25Gcm9tU2NhbGUodGhpcy5nZXRTY2FsZSgpLGEudW5pdHMpO251bGw9PXRoaXMuYmFzZUxheWVyfHx0aGlzLmFsbE92ZXJsYXlzfHx0aGlzLmJhc2VMYXllci5zZXRWaXNpYmlsaXR5KCExKTt0aGlzLmJhc2VMYXllcj1hO2lmKCF0aGlzLmFsbE92ZXJsYXlzfHx0aGlzLmJhc2VMYXllci52aXNpYmlsaXR5KXRoaXMuYmFzZUxheWVyLnNldFZpc2liaWxpdHkoITApLAohMT09PXRoaXMuYmFzZUxheWVyLmluUmFuZ2UmJnRoaXMuYmFzZUxheWVyLnJlZHJhdygpO251bGwhPWImJihhPXRoaXMuZ2V0Wm9vbUZvclJlc29sdXRpb24oY3x8dGhpcy5yZXNvbHV0aW9uLCEwKSx0aGlzLnNldENlbnRlcihiLGEsITEsITApKTt0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoImNoYW5nZWJhc2VsYXllciIse2xheWVyOnRoaXMuYmFzZUxheWVyfSl9fSxhZGRDb250cm9sOmZ1bmN0aW9uKGEsYil7dGhpcy5jb250cm9scy5wdXNoKGEpO3RoaXMuYWRkQ29udHJvbFRvTWFwKGEsYil9LGFkZENvbnRyb2xzOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTE9PT1hcmd1bWVudHMubGVuZ3RoP1tdOmIsZD0wLGU9YS5sZW5ndGg7ZDxlO2QrKyl0aGlzLmFkZENvbnRyb2woYVtkXSxjW2RdP2NbZF06bnVsbCl9LGFkZENvbnRyb2xUb01hcDpmdW5jdGlvbihhLGIpe2Eub3V0c2lkZVZpZXdwb3J0PW51bGwhPWEuZGl2O3RoaXMuZGlzcGxheVByb2plY3Rpb24mJiFhLmRpc3BsYXlQcm9qZWN0aW9uJiYKKGEuZGlzcGxheVByb2plY3Rpb249dGhpcy5kaXNwbGF5UHJvamVjdGlvbik7YS5zZXRNYXAodGhpcyk7dmFyIGM9YS5kcmF3KGIpO2MmJiFhLm91dHNpZGVWaWV3cG9ydCYmKGMuc3R5bGUuekluZGV4PXRoaXMuWl9JTkRFWF9CQVNFLkNvbnRyb2wrdGhpcy5jb250cm9scy5sZW5ndGgsdGhpcy52aWV3UG9ydERpdi5hcHBlbmRDaGlsZChjKSk7YS5hdXRvQWN0aXZhdGUmJmEuYWN0aXZhdGUoKX0sZ2V0Q29udHJvbDpmdW5jdGlvbihhKXtmb3IodmFyIGI9bnVsbCxjPTAsZD10aGlzLmNvbnRyb2xzLmxlbmd0aDtjPGQ7YysrKXt2YXIgZT10aGlzLmNvbnRyb2xzW2NdO2lmKGUuaWQ9PWEpe2I9ZTticmVha319cmV0dXJuIGJ9LHJlbW92ZUNvbnRyb2w6ZnVuY3Rpb24oYSl7YSYmYT09dGhpcy5nZXRDb250cm9sKGEuaWQpJiYoYS5kaXYmJmEuZGl2LnBhcmVudE5vZGU9PXRoaXMudmlld1BvcnREaXYmJnRoaXMudmlld1BvcnREaXYucmVtb3ZlQ2hpbGQoYS5kaXYpLE9wZW5MYXllcnMuVXRpbC5yZW1vdmVJdGVtKHRoaXMuY29udHJvbHMsCmEpKX0sYWRkUG9wdXA6ZnVuY3Rpb24oYSxiKXtpZihiKWZvcih2YXIgYz10aGlzLnBvcHVwcy5sZW5ndGgtMTswPD1jOy0tYyl0aGlzLnJlbW92ZVBvcHVwKHRoaXMucG9wdXBzW2NdKTthLm1hcD10aGlzO3RoaXMucG9wdXBzLnB1c2goYSk7aWYoYz1hLmRyYXcoKSljLnN0eWxlLnpJbmRleD10aGlzLlpfSU5ERVhfQkFTRS5Qb3B1cCt0aGlzLnBvcHVwcy5sZW5ndGgsdGhpcy5sYXllckNvbnRhaW5lckRpdi5hcHBlbmRDaGlsZChjKX0scmVtb3ZlUG9wdXA6ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5VdGlsLnJlbW92ZUl0ZW0odGhpcy5wb3B1cHMsYSk7aWYoYS5kaXYpdHJ5e3RoaXMubGF5ZXJDb250YWluZXJEaXYucmVtb3ZlQ2hpbGQoYS5kaXYpfWNhdGNoKGIpe31hLm1hcD1udWxsfSxnZXRTaXplOmZ1bmN0aW9uKCl7dmFyIGE9bnVsbDtudWxsIT10aGlzLnNpemUmJihhPXRoaXMuc2l6ZS5jbG9uZSgpKTtyZXR1cm4gYX0sdXBkYXRlU2l6ZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZ2V0Q3VycmVudFNpemUoKTsKaWYoYSYmIWlzTmFOKGEuaCkmJiFpc05hTihhLncpKXt0aGlzLmV2ZW50cy5jbGVhck1vdXNlQ2FjaGUoKTt2YXIgYj10aGlzLmdldFNpemUoKTtudWxsPT1iJiYodGhpcy5zaXplPWI9YSk7aWYoIWEuZXF1YWxzKGIpKXt0aGlzLnNpemU9YTthPTA7Zm9yKGI9dGhpcy5sYXllcnMubGVuZ3RoO2E8YjthKyspdGhpcy5sYXllcnNbYV0ub25NYXBSZXNpemUoKTthPXRoaXMuZ2V0Q2FjaGVkQ2VudGVyKCk7bnVsbCE9dGhpcy5iYXNlTGF5ZXImJm51bGwhPWEmJihiPXRoaXMuZ2V0Wm9vbSgpLHRoaXMuem9vbT1udWxsLHRoaXMuc2V0Q2VudGVyKGEsYikpfX10aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoInVwZGF0ZXNpemUiKX0sZ2V0Q3VycmVudFNpemU6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgT3BlbkxheWVycy5TaXplKHRoaXMuZGl2LmNsaWVudFdpZHRoLHRoaXMuZGl2LmNsaWVudEhlaWdodCk7aWYoMD09YS53JiYwPT1hLmh8fGlzTmFOKGEudykmJmlzTmFOKGEuaCkpYS53PXRoaXMuZGl2Lm9mZnNldFdpZHRoLAphLmg9dGhpcy5kaXYub2Zmc2V0SGVpZ2h0O2lmKDA9PWEudyYmMD09YS5ofHxpc05hTihhLncpJiZpc05hTihhLmgpKWEudz1wYXJzZUludCh0aGlzLmRpdi5zdHlsZS53aWR0aCksYS5oPXBhcnNlSW50KHRoaXMuZGl2LnN0eWxlLmhlaWdodCk7cmV0dXJuIGF9LGNhbGN1bGF0ZUJvdW5kczpmdW5jdGlvbihhLGIpe3ZhciBjPW51bGw7bnVsbD09YSYmKGE9dGhpcy5nZXRDYWNoZWRDZW50ZXIoKSk7bnVsbD09YiYmKGI9dGhpcy5nZXRSZXNvbHV0aW9uKCkpO2lmKG51bGwhPWEmJm51bGwhPWIpdmFyIGM9dGhpcy5zaXplLncqYi8yLGQ9dGhpcy5zaXplLmgqYi8yLGM9bmV3IE9wZW5MYXllcnMuQm91bmRzKGEubG9uLWMsYS5sYXQtZCxhLmxvbitjLGEubGF0K2QpO3JldHVybiBjfSxnZXRDZW50ZXI6ZnVuY3Rpb24oKXt2YXIgYT1udWxsLGI9dGhpcy5nZXRDYWNoZWRDZW50ZXIoKTtiJiYoYT1iLmNsb25lKCkpO3JldHVybiBhfSxnZXRDYWNoZWRDZW50ZXI6ZnVuY3Rpb24oKXshdGhpcy5jZW50ZXImJgp0aGlzLnNpemUmJih0aGlzLmNlbnRlcj10aGlzLmdldExvbkxhdEZyb21WaWV3UG9ydFB4KHt4OnRoaXMuc2l6ZS53LzIseTp0aGlzLnNpemUuaC8yfSkpO3JldHVybiB0aGlzLmNlbnRlcn0sZ2V0Wm9vbTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnpvb219LHBhbjpmdW5jdGlvbihhLGIsYyl7Yz1PcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyhjLHthbmltYXRlOiEwLGRyYWdnaW5nOiExfSk7aWYoYy5kcmFnZ2luZykwPT1hJiYwPT1ifHx0aGlzLm1vdmVCeVB4KGEsYik7ZWxzZXt2YXIgZD10aGlzLmdldFZpZXdQb3J0UHhGcm9tTG9uTGF0KHRoaXMuZ2V0Q2FjaGVkQ2VudGVyKCkpO2E9ZC5hZGQoYSxiKTtpZih0aGlzLmRyYWdnaW5nfHwhYS5lcXVhbHMoZCkpZD10aGlzLmdldExvbkxhdEZyb21WaWV3UG9ydFB4KGEpLGMuYW5pbWF0ZT90aGlzLnBhblRvKGQpOih0aGlzLm1vdmVUbyhkKSx0aGlzLmRyYWdnaW5nJiYodGhpcy5kcmFnZ2luZz0hMSx0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoIm1vdmVlbmQiKSkpfX0sCnBhblRvOmZ1bmN0aW9uKGEpe2lmKHRoaXMucGFuVHdlZW4mJnRoaXMuZ2V0RXh0ZW50KCkuc2NhbGUodGhpcy5wYW5SYXRpbykuY29udGFpbnNMb25MYXQoYSkpe3ZhciBiPXRoaXMuZ2V0Q2FjaGVkQ2VudGVyKCk7aWYoIWEuZXF1YWxzKGIpKXt2YXIgYj10aGlzLmdldFBpeGVsRnJvbUxvbkxhdChiKSxjPXRoaXMuZ2V0UGl4ZWxGcm9tTG9uTGF0KGEpLGQ9MCxlPTA7dGhpcy5wYW5Ud2Vlbi5zdGFydCh7eDowLHk6MH0se3g6Yy54LWIueCx5OmMueS1iLnl9LHRoaXMucGFuRHVyYXRpb24se2NhbGxiYWNrczp7ZWFjaFN0ZXA6T3BlbkxheWVycy5GdW5jdGlvbi5iaW5kKGZ1bmN0aW9uKGEpe3RoaXMubW92ZUJ5UHgoYS54LWQsYS55LWUpO2Q9TWF0aC5yb3VuZChhLngpO2U9TWF0aC5yb3VuZChhLnkpfSx0aGlzKSxkb25lOk9wZW5MYXllcnMuRnVuY3Rpb24uYmluZChmdW5jdGlvbihiKXt0aGlzLm1vdmVUbyhhKTt0aGlzLmRyYWdnaW5nPSExO3RoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgibW92ZWVuZCIpfSwKdGhpcyl9fSl9fWVsc2UgdGhpcy5zZXRDZW50ZXIoYSl9LHNldENlbnRlcjpmdW5jdGlvbihhLGIsYyxkKXt0aGlzLnBhblR3ZWVuJiZ0aGlzLnBhblR3ZWVuLnN0b3AoKTt0aGlzLnpvb21Ud2VlbiYmdGhpcy56b29tVHdlZW4uc3RvcCgpO3RoaXMubW92ZVRvKGEsYix7ZHJhZ2dpbmc6Yyxmb3JjZVpvb21DaGFuZ2U6ZH0pfSxtb3ZlQnlQeDpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuc2l6ZS53LzIsZD10aGlzLnNpemUuaC8yLGU9YythLGY9ZCtiLGc9dGhpcy5iYXNlTGF5ZXIud3JhcERhdGVMaW5lLGg9MCxrPTA7dGhpcy5yZXN0cmljdGVkRXh0ZW50JiYoaD1jLGs9ZCxnPSExKTthPWd8fGU8PXRoaXMubWF4UHgueC1oJiZlPj10aGlzLm1pblB4LngraD9NYXRoLnJvdW5kKGEpOjA7Yj1mPD10aGlzLm1heFB4LnktayYmZj49dGhpcy5taW5QeC55K2s/TWF0aC5yb3VuZChiKTowO2lmKGF8fGIpe3RoaXMuZHJhZ2dpbmd8fCh0aGlzLmRyYWdnaW5nPSEwLHRoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgibW92ZXN0YXJ0IikpOwp0aGlzLmNlbnRlcj1udWxsO2EmJih0aGlzLmxheWVyQ29udGFpbmVyT3JpZ2luUHgueC09YSx0aGlzLm1pblB4LngtPWEsdGhpcy5tYXhQeC54LT1hKTtiJiYodGhpcy5sYXllckNvbnRhaW5lck9yaWdpblB4LnktPWIsdGhpcy5taW5QeC55LT1iLHRoaXMubWF4UHgueS09Yik7dGhpcy5hcHBseVRyYW5zZm9ybSgpO2Q9MDtmb3IoZT10aGlzLmxheWVycy5sZW5ndGg7ZDxlOysrZCljPXRoaXMubGF5ZXJzW2RdLGMudmlzaWJpbGl0eSYmKGM9PT10aGlzLmJhc2VMYXllcnx8Yy5pblJhbmdlKSYmKGMubW92ZUJ5UHgoYSxiKSxjLmV2ZW50cy50cmlnZ2VyRXZlbnQoIm1vdmUiKSk7dGhpcy5ldmVudHMudHJpZ2dlckV2ZW50KCJtb3ZlIil9fSxhZGp1c3Rab29tOmZ1bmN0aW9uKGEpe2lmKHRoaXMuYmFzZUxheWVyJiZ0aGlzLmJhc2VMYXllci53cmFwRGF0ZUxpbmUpe3ZhciBiPXRoaXMuYmFzZUxheWVyLnJlc29sdXRpb25zLGM9dGhpcy5nZXRNYXhFeHRlbnQoKS5nZXRXaWR0aCgpL3RoaXMuc2l6ZS53OwppZih0aGlzLmdldFJlc29sdXRpb25Gb3Jab29tKGEpPmMpaWYodGhpcy5mcmFjdGlvbmFsWm9vbSlhPXRoaXMuZ2V0Wm9vbUZvclJlc29sdXRpb24oYyk7ZWxzZSBmb3IodmFyIGQ9YXwwLGU9Yi5sZW5ndGg7ZDxlOysrZClpZihiW2RdPD1jKXthPWQ7YnJlYWt9fXJldHVybiBhfSxnZXRNaW5ab29tOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYWRqdXN0Wm9vbSgwKX0sbW92ZVRvOmZ1bmN0aW9uKGEsYixjKXtudWxsPT1hfHxhIGluc3RhbmNlb2YgT3BlbkxheWVycy5Mb25MYXR8fChhPW5ldyBPcGVuTGF5ZXJzLkxvbkxhdChhKSk7Y3x8KGM9e30pO251bGwhPWImJihiPXBhcnNlRmxvYXQoYiksdGhpcy5mcmFjdGlvbmFsWm9vbXx8KGI9TWF0aC5yb3VuZChiKSkpO3ZhciBkPWI7Yj10aGlzLmFkanVzdFpvb20oYik7YiE9PWQmJihhPXRoaXMuZ2V0Q2VudGVyKCkpO3ZhciBkPWMuZHJhZ2dpbmd8fHRoaXMuZHJhZ2dpbmcsZT1jLmZvcmNlWm9vbUNoYW5nZTt0aGlzLmdldENhY2hlZENlbnRlcigpfHwKdGhpcy5pc1ZhbGlkTG9uTGF0KGEpfHwoYT10aGlzLm1heEV4dGVudC5nZXRDZW50ZXJMb25MYXQoKSx0aGlzLmNlbnRlcj1hLmNsb25lKCkpO2lmKG51bGwhPXRoaXMucmVzdHJpY3RlZEV4dGVudCl7bnVsbD09YSYmKGE9dGhpcy5jZW50ZXIpO251bGw9PWImJihiPXRoaXMuZ2V0Wm9vbSgpKTt2YXIgZj10aGlzLmdldFJlc29sdXRpb25Gb3Jab29tKGIpLGY9dGhpcy5jYWxjdWxhdGVCb3VuZHMoYSxmKTtpZighdGhpcy5yZXN0cmljdGVkRXh0ZW50LmNvbnRhaW5zQm91bmRzKGYpKXt2YXIgZz10aGlzLnJlc3RyaWN0ZWRFeHRlbnQuZ2V0Q2VudGVyTG9uTGF0KCk7Zi5nZXRXaWR0aCgpPnRoaXMucmVzdHJpY3RlZEV4dGVudC5nZXRXaWR0aCgpP2E9bmV3IE9wZW5MYXllcnMuTG9uTGF0KGcubG9uLGEubGF0KTpmLmxlZnQ8dGhpcy5yZXN0cmljdGVkRXh0ZW50LmxlZnQ/YT1hLmFkZCh0aGlzLnJlc3RyaWN0ZWRFeHRlbnQubGVmdC1mLmxlZnQsMCk6Zi5yaWdodD50aGlzLnJlc3RyaWN0ZWRFeHRlbnQucmlnaHQmJgooYT1hLmFkZCh0aGlzLnJlc3RyaWN0ZWRFeHRlbnQucmlnaHQtZi5yaWdodCwwKSk7Zi5nZXRIZWlnaHQoKT50aGlzLnJlc3RyaWN0ZWRFeHRlbnQuZ2V0SGVpZ2h0KCk/YT1uZXcgT3BlbkxheWVycy5Mb25MYXQoYS5sb24sZy5sYXQpOmYuYm90dG9tPHRoaXMucmVzdHJpY3RlZEV4dGVudC5ib3R0b20/YT1hLmFkZCgwLHRoaXMucmVzdHJpY3RlZEV4dGVudC5ib3R0b20tZi5ib3R0b20pOmYudG9wPnRoaXMucmVzdHJpY3RlZEV4dGVudC50b3AmJihhPWEuYWRkKDAsdGhpcy5yZXN0cmljdGVkRXh0ZW50LnRvcC1mLnRvcCkpfX1lPWV8fHRoaXMuaXNWYWxpZFpvb21MZXZlbChiKSYmYiE9dGhpcy5nZXRab29tKCk7Zj10aGlzLmlzVmFsaWRMb25MYXQoYSkmJiFhLmVxdWFscyh0aGlzLmNlbnRlcik7aWYoZXx8Znx8ZCl7ZHx8dGhpcy5ldmVudHMudHJpZ2dlckV2ZW50KCJtb3Zlc3RhcnQiLHt6b29tQ2hhbmdlZDplfSk7ZiYmKCFlJiZ0aGlzLmNlbnRlciYmdGhpcy5jZW50ZXJMYXllckNvbnRhaW5lcihhKSwKdGhpcy5jZW50ZXI9YS5jbG9uZSgpKTthPWU/dGhpcy5nZXRSZXNvbHV0aW9uRm9yWm9vbShiKTp0aGlzLmdldFJlc29sdXRpb24oKTtpZihlfHxudWxsPT10aGlzLmxheWVyQ29udGFpbmVyT3JpZ2luKXt0aGlzLmxheWVyQ29udGFpbmVyT3JpZ2luPXRoaXMuZ2V0Q2FjaGVkQ2VudGVyKCk7dGhpcy5sYXllckNvbnRhaW5lck9yaWdpblB4Lng9MDt0aGlzLmxheWVyQ29udGFpbmVyT3JpZ2luUHgueT0wO3RoaXMuYXBwbHlUcmFuc2Zvcm0oKTt2YXIgZj10aGlzLmdldE1heEV4dGVudCh7cmVzdHJpY3RlZDohMH0pLGg9Zi5nZXRDZW50ZXJMb25MYXQoKSxnPXRoaXMuY2VudGVyLmxvbi1oLmxvbixoPWgubGF0LXRoaXMuY2VudGVyLmxhdCxrPU1hdGgucm91bmQoZi5nZXRXaWR0aCgpL2EpLGw9TWF0aC5yb3VuZChmLmdldEhlaWdodCgpL2EpO3RoaXMubWluUHg9e3g6KHRoaXMuc2l6ZS53LWspLzItZy9hLHk6KHRoaXMuc2l6ZS5oLWwpLzItaC9hfTt0aGlzLm1heFB4PXt4OnRoaXMubWluUHgueCsKTWF0aC5yb3VuZChmLmdldFdpZHRoKCkvYSkseTp0aGlzLm1pblB4LnkrTWF0aC5yb3VuZChmLmdldEhlaWdodCgpL2EpfX1lJiYodGhpcy56b29tPWIsdGhpcy5yZXNvbHV0aW9uPWEpO2E9dGhpcy5nZXRFeHRlbnQoKTt0aGlzLmJhc2VMYXllci52aXNpYmlsaXR5JiYodGhpcy5iYXNlTGF5ZXIubW92ZVRvKGEsZSxjLmRyYWdnaW5nKSxjLmRyYWdnaW5nfHx0aGlzLmJhc2VMYXllci5ldmVudHMudHJpZ2dlckV2ZW50KCJtb3ZlZW5kIix7em9vbUNoYW5nZWQ6ZX0pKTthPXRoaXMuYmFzZUxheWVyLmdldEV4dGVudCgpO2ZvcihiPXRoaXMubGF5ZXJzLmxlbmd0aC0xOzA8PWI7LS1iKWY9dGhpcy5sYXllcnNbYl0sZj09PXRoaXMuYmFzZUxheWVyfHxmLmlzQmFzZUxheWVyfHwoZz1mLmNhbGN1bGF0ZUluUmFuZ2UoKSxmLmluUmFuZ2UhPWcmJigoZi5pblJhbmdlPWcpfHxmLmRpc3BsYXkoITEpLHRoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgiY2hhbmdlbGF5ZXIiLHtsYXllcjpmLHByb3BlcnR5OiJ2aXNpYmlsaXR5In0pKSwKZyYmZi52aXNpYmlsaXR5JiYoZi5tb3ZlVG8oYSxlLGMuZHJhZ2dpbmcpLGMuZHJhZ2dpbmd8fGYuZXZlbnRzLnRyaWdnZXJFdmVudCgibW92ZWVuZCIse3pvb21DaGFuZ2VkOmV9KSkpO3RoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgibW92ZSIpO2R8fHRoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgibW92ZWVuZCIpO2lmKGUpe2I9MDtmb3IoYz10aGlzLnBvcHVwcy5sZW5ndGg7YjxjO2IrKyl0aGlzLnBvcHVwc1tiXS51cGRhdGVQb3NpdGlvbigpO3RoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgiem9vbWVuZCIpfX19LGNlbnRlckxheWVyQ29udGFpbmVyOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZ2V0Vmlld1BvcnRQeEZyb21Mb25MYXQodGhpcy5sYXllckNvbnRhaW5lck9yaWdpbiksYz10aGlzLmdldFZpZXdQb3J0UHhGcm9tTG9uTGF0KGEpO2lmKG51bGwhPWImJm51bGwhPWMpe3ZhciBkPXRoaXMubGF5ZXJDb250YWluZXJPcmlnaW5QeC54O2E9dGhpcy5sYXllckNvbnRhaW5lck9yaWdpblB4Lnk7CnZhciBlPU1hdGgucm91bmQoYi54LWMueCksYj1NYXRoLnJvdW5kKGIueS1jLnkpO3RoaXMuYXBwbHlUcmFuc2Zvcm0odGhpcy5sYXllckNvbnRhaW5lck9yaWdpblB4Lng9ZSx0aGlzLmxheWVyQ29udGFpbmVyT3JpZ2luUHgueT1iKTtkLT1lO2EtPWI7dGhpcy5taW5QeC54LT1kO3RoaXMubWF4UHgueC09ZDt0aGlzLm1pblB4LnktPWE7dGhpcy5tYXhQeC55LT1hfX0saXNWYWxpZFpvb21MZXZlbDpmdW5jdGlvbihhKXtyZXR1cm4gbnVsbCE9YSYmMDw9YSYmYTx0aGlzLmdldE51bVpvb21MZXZlbHMoKX0saXNWYWxpZExvbkxhdDpmdW5jdGlvbihhKXt2YXIgYj0hMTtudWxsIT1hJiYoYj10aGlzLmdldE1heEV4dGVudCgpLGI9Yi5jb250YWluc0xvbkxhdChhLHt3b3JsZEJvdW5kczp0aGlzLmJhc2VMYXllci53cmFwRGF0ZUxpbmUmJmJ9KSk7cmV0dXJuIGJ9LGdldFByb2plY3Rpb246ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmdldFByb2plY3Rpb25PYmplY3QoKTtyZXR1cm4gYT9hLmdldENvZGUoKToKbnVsbH0sZ2V0UHJvamVjdGlvbk9iamVjdDpmdW5jdGlvbigpe3ZhciBhPW51bGw7bnVsbCE9dGhpcy5iYXNlTGF5ZXImJihhPXRoaXMuYmFzZUxheWVyLnByb2plY3Rpb24pO3JldHVybiBhfSxnZXRNYXhSZXNvbHV0aW9uOmZ1bmN0aW9uKCl7dmFyIGE9bnVsbDtudWxsIT10aGlzLmJhc2VMYXllciYmKGE9dGhpcy5iYXNlTGF5ZXIubWF4UmVzb2x1dGlvbik7cmV0dXJuIGF9LGdldE1heEV4dGVudDpmdW5jdGlvbihhKXt2YXIgYj1udWxsO2EmJmEucmVzdHJpY3RlZCYmdGhpcy5yZXN0cmljdGVkRXh0ZW50P2I9dGhpcy5yZXN0cmljdGVkRXh0ZW50Om51bGwhPXRoaXMuYmFzZUxheWVyJiYoYj10aGlzLmJhc2VMYXllci5tYXhFeHRlbnQpO3JldHVybiBifSxnZXROdW1ab29tTGV2ZWxzOmZ1bmN0aW9uKCl7dmFyIGE9bnVsbDtudWxsIT10aGlzLmJhc2VMYXllciYmKGE9dGhpcy5iYXNlTGF5ZXIubnVtWm9vbUxldmVscyk7cmV0dXJuIGF9LGdldEV4dGVudDpmdW5jdGlvbigpe3ZhciBhPQpudWxsO251bGwhPXRoaXMuYmFzZUxheWVyJiYoYT10aGlzLmJhc2VMYXllci5nZXRFeHRlbnQoKSk7cmV0dXJuIGF9LGdldFJlc29sdXRpb246ZnVuY3Rpb24oKXt2YXIgYT1udWxsO251bGwhPXRoaXMuYmFzZUxheWVyP2E9dGhpcy5iYXNlTGF5ZXIuZ2V0UmVzb2x1dGlvbigpOiEwPT09dGhpcy5hbGxPdmVybGF5cyYmMDx0aGlzLmxheWVycy5sZW5ndGgmJihhPXRoaXMubGF5ZXJzWzBdLmdldFJlc29sdXRpb24oKSk7cmV0dXJuIGF9LGdldFVuaXRzOmZ1bmN0aW9uKCl7dmFyIGE9bnVsbDtudWxsIT10aGlzLmJhc2VMYXllciYmKGE9dGhpcy5iYXNlTGF5ZXIudW5pdHMpO3JldHVybiBhfSxnZXRTY2FsZTpmdW5jdGlvbigpe3ZhciBhPW51bGw7bnVsbCE9dGhpcy5iYXNlTGF5ZXImJihhPXRoaXMuZ2V0UmVzb2x1dGlvbigpLGE9T3BlbkxheWVycy5VdGlsLmdldFNjYWxlRnJvbVJlc29sdXRpb24oYSx0aGlzLmJhc2VMYXllci51bml0cykpO3JldHVybiBhfSxnZXRab29tRm9yRXh0ZW50OmZ1bmN0aW9uKGEsCmIpe3ZhciBjPW51bGw7bnVsbCE9dGhpcy5iYXNlTGF5ZXImJihjPXRoaXMuYmFzZUxheWVyLmdldFpvb21Gb3JFeHRlbnQoYSxiKSk7cmV0dXJuIGN9LGdldFJlc29sdXRpb25Gb3Jab29tOmZ1bmN0aW9uKGEpe3ZhciBiPW51bGw7dGhpcy5iYXNlTGF5ZXImJihiPXRoaXMuYmFzZUxheWVyLmdldFJlc29sdXRpb25Gb3Jab29tKGEpKTtyZXR1cm4gYn0sZ2V0Wm9vbUZvclJlc29sdXRpb246ZnVuY3Rpb24oYSxiKXt2YXIgYz1udWxsO251bGwhPXRoaXMuYmFzZUxheWVyJiYoYz10aGlzLmJhc2VMYXllci5nZXRab29tRm9yUmVzb2x1dGlvbihhLGIpKTtyZXR1cm4gY30sem9vbVRvOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcztpZihjLmlzVmFsaWRab29tTGV2ZWwoYSkpaWYoYy5iYXNlTGF5ZXIud3JhcERhdGVMaW5lJiYoYT1jLmFkanVzdFpvb20oYSkpLGMuem9vbVR3ZWVuKXt2YXIgZD1jLmdldFJlc29sdXRpb24oKSxlPWMuZ2V0UmVzb2x1dGlvbkZvclpvb20oYSksZj17c2NhbGU6MX0sCmQ9e3NjYWxlOmQvZX07Yy56b29tVHdlZW4ucGxheWluZyYmYy56b29tVHdlZW4uZHVyYXRpb248MypjLnpvb21EdXJhdGlvbj9jLnpvb21Ud2Vlbi5maW5pc2g9e3NjYWxlOmMuem9vbVR3ZWVuLmZpbmlzaC5zY2FsZSpkLnNjYWxlfTooYnx8KGU9Yy5nZXRTaXplKCksYj17eDplLncvMix5OmUuaC8yfSksYy56b29tVHdlZW4uc3RhcnQoZixkLGMuem9vbUR1cmF0aW9uLHttaW5GcmFtZVJhdGU6NTAsY2FsbGJhY2tzOntlYWNoU3RlcDpmdW5jdGlvbihhKXt2YXIgZD1jLmxheWVyQ29udGFpbmVyT3JpZ2luUHg7YT1hLnNjYWxlO2MuYXBwbHlUcmFuc2Zvcm0oZC54KygoYS0xKSooZC54LWIueCl8MCksZC55KygoYS0xKSooZC55LWIueSl8MCksYSl9LGRvbmU6ZnVuY3Rpb24oYSl7Yy5hcHBseVRyYW5zZm9ybSgpO2E9Yy5nZXRSZXNvbHV0aW9uKCkvYS5zY2FsZTt2YXIgZD1jLmdldFpvb21Gb3JSZXNvbHV0aW9uKGEsITApO2MubW92ZVRvKGMuZ2V0Wm9vbVRhcmdldENlbnRlcihiLAphKSxkLCEwKX19fSkpfWVsc2UgZj1iP2MuZ2V0Wm9vbVRhcmdldENlbnRlcihiLGMuZ2V0UmVzb2x1dGlvbkZvclpvb20oYSkpOm51bGwsYy5zZXRDZW50ZXIoZixhKX0sem9vbUluOmZ1bmN0aW9uKCl7dGhpcy56b29tVG8odGhpcy5nZXRab29tKCkrMSl9LHpvb21PdXQ6ZnVuY3Rpb24oKXt0aGlzLnpvb21Ubyh0aGlzLmdldFpvb20oKS0xKX0sem9vbVRvRXh0ZW50OmZ1bmN0aW9uKGEsYil7YSBpbnN0YW5jZW9mIE9wZW5MYXllcnMuQm91bmRzfHwoYT1uZXcgT3BlbkxheWVycy5Cb3VuZHMoYSkpO3ZhciBjPWEuZ2V0Q2VudGVyTG9uTGF0KCk7aWYodGhpcy5iYXNlTGF5ZXIud3JhcERhdGVMaW5lKXtjPXRoaXMuZ2V0TWF4RXh0ZW50KCk7Zm9yKGE9YS5jbG9uZSgpO2EucmlnaHQ8YS5sZWZ0OylhLnJpZ2h0Kz1jLmdldFdpZHRoKCk7Yz1hLmdldENlbnRlckxvbkxhdCgpLndyYXBEYXRlTGluZShjKX10aGlzLnNldENlbnRlcihjLHRoaXMuZ2V0Wm9vbUZvckV4dGVudChhLGIpKX0sCnpvb21Ub01heEV4dGVudDpmdW5jdGlvbihhKXthPXRoaXMuZ2V0TWF4RXh0ZW50KHtyZXN0cmljdGVkOmE/YS5yZXN0cmljdGVkOiEwfSk7dGhpcy56b29tVG9FeHRlbnQoYSl9LHpvb21Ub1NjYWxlOmZ1bmN0aW9uKGEsYil7dmFyIGM9T3BlbkxheWVycy5VdGlsLmdldFJlc29sdXRpb25Gcm9tU2NhbGUoYSx0aGlzLmJhc2VMYXllci51bml0cyksZD10aGlzLnNpemUudypjLzIsYz10aGlzLnNpemUuaCpjLzIsZT10aGlzLmdldENhY2hlZENlbnRlcigpLGQ9bmV3IE9wZW5MYXllcnMuQm91bmRzKGUubG9uLWQsZS5sYXQtYyxlLmxvbitkLGUubGF0K2MpO3RoaXMuem9vbVRvRXh0ZW50KGQsYil9LGdldExvbkxhdEZyb21WaWV3UG9ydFB4OmZ1bmN0aW9uKGEpe3ZhciBiPW51bGw7bnVsbCE9dGhpcy5iYXNlTGF5ZXImJihiPXRoaXMuYmFzZUxheWVyLmdldExvbkxhdEZyb21WaWV3UG9ydFB4KGEpKTtyZXR1cm4gYn0sZ2V0Vmlld1BvcnRQeEZyb21Mb25MYXQ6ZnVuY3Rpb24oYSl7dmFyIGI9Cm51bGw7bnVsbCE9dGhpcy5iYXNlTGF5ZXImJihiPXRoaXMuYmFzZUxheWVyLmdldFZpZXdQb3J0UHhGcm9tTG9uTGF0KGEpKTtyZXR1cm4gYn0sZ2V0Wm9vbVRhcmdldENlbnRlcjpmdW5jdGlvbihhLGIpe3ZhciBjPW51bGwsZD10aGlzLmdldFNpemUoKSxlPWQudy8yLWEueCxkPWEueS1kLmgvMixmPXRoaXMuZ2V0TG9uTGF0RnJvbVBpeGVsKGEpO2YmJihjPW5ldyBPcGVuTGF5ZXJzLkxvbkxhdChmLmxvbitlKmIsZi5sYXQrZCpiKSk7cmV0dXJuIGN9LGdldExvbkxhdEZyb21QaXhlbDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5nZXRMb25MYXRGcm9tVmlld1BvcnRQeChhKX0sZ2V0UGl4ZWxGcm9tTG9uTGF0OmZ1bmN0aW9uKGEpe2E9dGhpcy5nZXRWaWV3UG9ydFB4RnJvbUxvbkxhdChhKTthLng9TWF0aC5yb3VuZChhLngpO2EueT1NYXRoLnJvdW5kKGEueSk7cmV0dXJuIGF9LGdldEdlb2Rlc2ljUGl4ZWxTaXplOmZ1bmN0aW9uKGEpe3ZhciBiPWE/dGhpcy5nZXRMb25MYXRGcm9tUGl4ZWwoYSk6CnRoaXMuZ2V0Q2FjaGVkQ2VudGVyKCl8fG5ldyBPcGVuTGF5ZXJzLkxvbkxhdCgwLDApLGM9dGhpcy5nZXRSZXNvbHV0aW9uKCk7YT1iLmFkZCgtYy8yLDApO3ZhciBkPWIuYWRkKGMvMiwwKSxlPWIuYWRkKDAsLWMvMiksYj1iLmFkZCgwLGMvMiksYz1uZXcgT3BlbkxheWVycy5Qcm9qZWN0aW9uKCJFUFNHOjQzMjYiKSxmPXRoaXMuZ2V0UHJvamVjdGlvbk9iamVjdCgpfHxjO2YuZXF1YWxzKGMpfHwoYS50cmFuc2Zvcm0oZixjKSxkLnRyYW5zZm9ybShmLGMpLGUudHJhbnNmb3JtKGYsYyksYi50cmFuc2Zvcm0oZixjKSk7cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLlNpemUoT3BlbkxheWVycy5VdGlsLmRpc3RWaW5jZW50eShhLGQpLE9wZW5MYXllcnMuVXRpbC5kaXN0VmluY2VudHkoZSxiKSl9LGdldFZpZXdQb3J0UHhGcm9tTGF5ZXJQeDpmdW5jdGlvbihhKXt2YXIgYj1udWxsO251bGwhPWEmJihiPWEuYWRkKHRoaXMubGF5ZXJDb250YWluZXJPcmlnaW5QeC54LHRoaXMubGF5ZXJDb250YWluZXJPcmlnaW5QeC55KSk7CnJldHVybiBifSxnZXRMYXllclB4RnJvbVZpZXdQb3J0UHg6ZnVuY3Rpb24oYSl7dmFyIGI9bnVsbDtudWxsIT1hJiYoYj1hLmFkZCgtdGhpcy5sYXllckNvbnRhaW5lck9yaWdpblB4LngsLXRoaXMubGF5ZXJDb250YWluZXJPcmlnaW5QeC55KSxpc05hTihiLngpfHxpc05hTihiLnkpKSYmKGI9bnVsbCk7cmV0dXJuIGJ9LGdldExvbkxhdEZyb21MYXllclB4OmZ1bmN0aW9uKGEpe2E9dGhpcy5nZXRWaWV3UG9ydFB4RnJvbUxheWVyUHgoYSk7cmV0dXJuIHRoaXMuZ2V0TG9uTGF0RnJvbVZpZXdQb3J0UHgoYSl9LGdldExheWVyUHhGcm9tTG9uTGF0OmZ1bmN0aW9uKGEpe2E9dGhpcy5nZXRQaXhlbEZyb21Mb25MYXQoYSk7cmV0dXJuIHRoaXMuZ2V0TGF5ZXJQeEZyb21WaWV3UG9ydFB4KGEpfSxhcHBseVRyYW5zZm9ybTpmdW5jdGlvbihhLGIsYyl7Yz1jfHwxO3ZhciBkPXRoaXMubGF5ZXJDb250YWluZXJPcmlnaW5QeCxlPTEhPT1jO2E9YXx8ZC54O2I9Ynx8ZC55O3ZhciBmPXRoaXMubGF5ZXJDb250YWluZXJEaXYuc3R5bGUsCmc9dGhpcy5hcHBseVRyYW5zZm9ybS50cmFuc2Zvcm0saD10aGlzLmFwcGx5VHJhbnNmb3JtLnRlbXBsYXRlO2lmKHZvaWQgMD09PWcmJihnPU9wZW5MYXllcnMuVXRpbC52ZW5kb3JQcmVmaXguc3R5bGUoInRyYW5zZm9ybSIpLHRoaXMuYXBwbHlUcmFuc2Zvcm0udHJhbnNmb3JtPWcpKXt2YXIgaz1PcGVuTGF5ZXJzLkVsZW1lbnQuZ2V0U3R5bGUodGhpcy52aWV3UG9ydERpdixPcGVuTGF5ZXJzLlV0aWwudmVuZG9yUHJlZml4LmNzcygidHJhbnNmb3JtIikpO2smJiJub25lIj09PWt8fChoPVsidHJhbnNsYXRlM2QoIiwiLDApICIsInNjYWxlM2QoIiwiLDEpIl0sZltnXT1baFswXSwiMCwwIixoWzFdXS5qb2luKCIiKSk7aCYmfmZbZ10uaW5kZXhPZihoWzBdKXx8KGg9WyJ0cmFuc2xhdGUoIiwiKSAiLCJzY2FsZSgiLCIpIl0pO3RoaXMuYXBwbHlUcmFuc2Zvcm0udGVtcGxhdGU9aH1udWxsPT09Z3x8InRyYW5zbGF0ZTNkKCIhPT1oWzBdJiYhMCE9PWU/KGYubGVmdD1hKyJweCIsZi50b3A9CmIrInB4IixudWxsIT09ZyYmKGZbZ109IiIpKTooITA9PT1lJiYidHJhbnNsYXRlKCI9PT1oWzBdJiYoYS09ZC54LGItPWQueSxmLmxlZnQ9ZC54KyJweCIsZi50b3A9ZC55KyJweCIpLGZbZ109W2hbMF0sYSwicHgsIixiLCJweCIsaFsxXSxoWzJdLGMsIiwiLGMsaFszXV0uam9pbigiIikpfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLk1hcCJ9KTtPcGVuTGF5ZXJzLk1hcC5USUxFX1dJRFRIPTI1NjtPcGVuTGF5ZXJzLk1hcC5USUxFX0hFSUdIVD0yNTY7T3BlbkxheWVycy5IYW5kbGVyPU9wZW5MYXllcnMuQ2xhc3Moe2lkOm51bGwsY29udHJvbDpudWxsLG1hcDpudWxsLGtleU1hc2s6bnVsbCxhY3RpdmU6ITEsZXZ0Om51bGwsdG91Y2g6ITEsaW5pdGlhbGl6ZTpmdW5jdGlvbihhLGIsYyl7T3BlbkxheWVycy5VdGlsLmV4dGVuZCh0aGlzLGMpO3RoaXMuY29udHJvbD1hO3RoaXMuY2FsbGJhY2tzPWI7KGE9dGhpcy5tYXB8fGEubWFwKSYmdGhpcy5zZXRNYXAoYSk7dGhpcy5pZD1PcGVuTGF5ZXJzLlV0aWwuY3JlYXRlVW5pcXVlSUQodGhpcy5DTEFTU19OQU1FKyJfIil9LHNldE1hcDpmdW5jdGlvbihhKXt0aGlzLm1hcD1hfSxjaGVja01vZGlmaWVyczpmdW5jdGlvbihhKXtyZXR1cm4gbnVsbD09dGhpcy5rZXlNYXNrPyEwOigoYS5zaGlmdEtleT9PcGVuTGF5ZXJzLkhhbmRsZXIuTU9EX1NISUZUOjApfChhLmN0cmxLZXk/T3BlbkxheWVycy5IYW5kbGVyLk1PRF9DVFJMOjApfChhLmFsdEtleT9PcGVuTGF5ZXJzLkhhbmRsZXIuTU9EX0FMVDoKMCl8KGEubWV0YUtleT9PcGVuTGF5ZXJzLkhhbmRsZXIuTU9EX01FVEE6MCkpPT10aGlzLmtleU1hc2t9LGFjdGl2YXRlOmZ1bmN0aW9uKCl7aWYodGhpcy5hY3RpdmUpcmV0dXJuITE7Zm9yKHZhciBhPU9wZW5MYXllcnMuRXZlbnRzLnByb3RvdHlwZS5CUk9XU0VSX0VWRU5UUyxiPTAsYz1hLmxlbmd0aDtiPGM7YisrKXRoaXNbYVtiXV0mJnRoaXMucmVnaXN0ZXIoYVtiXSx0aGlzW2FbYl1dKTtyZXR1cm4gdGhpcy5hY3RpdmU9ITB9LGRlYWN0aXZhdGU6ZnVuY3Rpb24oKXtpZighdGhpcy5hY3RpdmUpcmV0dXJuITE7Zm9yKHZhciBhPU9wZW5MYXllcnMuRXZlbnRzLnByb3RvdHlwZS5CUk9XU0VSX0VWRU5UUyxiPTAsYz1hLmxlbmd0aDtiPGM7YisrKXRoaXNbYVtiXV0mJnRoaXMudW5yZWdpc3RlcihhW2JdLHRoaXNbYVtiXV0pO3RoaXMuYWN0aXZlPXRoaXMudG91Y2g9ITE7cmV0dXJuITB9LHN0YXJ0VG91Y2g6ZnVuY3Rpb24oKXtpZighdGhpcy50b3VjaCl7dGhpcy50b3VjaD0hMDsKZm9yKHZhciBhPSJtb3VzZWRvd24gbW91c2V1cCBtb3VzZW1vdmUgY2xpY2sgZGJsY2xpY2sgbW91c2VvdXQiLnNwbGl0KCIgIiksYj0wLGM9YS5sZW5ndGg7YjxjO2IrKyl0aGlzW2FbYl1dJiZ0aGlzLnVucmVnaXN0ZXIoYVtiXSx0aGlzW2FbYl1dKX19LGNhbGxiYWNrOmZ1bmN0aW9uKGEsYil7YSYmdGhpcy5jYWxsYmFja3NbYV0mJnRoaXMuY2FsbGJhY2tzW2FdLmFwcGx5KHRoaXMuY29udHJvbCxiKX0scmVnaXN0ZXI6ZnVuY3Rpb24oYSxiKXt0aGlzLm1hcC5ldmVudHMucmVnaXN0ZXJQcmlvcml0eShhLHRoaXMsYik7dGhpcy5tYXAuZXZlbnRzLnJlZ2lzdGVyUHJpb3JpdHkoYSx0aGlzLHRoaXMuc2V0RXZlbnQpfSx1bnJlZ2lzdGVyOmZ1bmN0aW9uKGEsYil7dGhpcy5tYXAuZXZlbnRzLnVucmVnaXN0ZXIoYSx0aGlzLGIpO3RoaXMubWFwLmV2ZW50cy51bnJlZ2lzdGVyKGEsdGhpcyx0aGlzLnNldEV2ZW50KX0sc2V0RXZlbnQ6ZnVuY3Rpb24oYSl7dGhpcy5ldnQ9YTtyZXR1cm4hMH0sCmRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmRlYWN0aXZhdGUoKTt0aGlzLmNvbnRyb2w9dGhpcy5tYXA9bnVsbH0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5IYW5kbGVyIn0pO09wZW5MYXllcnMuSGFuZGxlci5NT0RfTk9ORT0wO09wZW5MYXllcnMuSGFuZGxlci5NT0RfU0hJRlQ9MTtPcGVuTGF5ZXJzLkhhbmRsZXIuTU9EX0NUUkw9MjtPcGVuTGF5ZXJzLkhhbmRsZXIuTU9EX0FMVD00O09wZW5MYXllcnMuSGFuZGxlci5NT0RfTUVUQT04O09wZW5MYXllcnMuSGFuZGxlci5DbGljaz1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuSGFuZGxlcix7ZGVsYXk6MzAwLHNpbmdsZTohMCwiZG91YmxlIjohMSxwaXhlbFRvbGVyYW5jZTowLGRibGNsaWNrVG9sZXJhbmNlOjEzLHN0b3BTaW5nbGU6ITEsc3RvcERvdWJsZTohMSx0aW1lcklkOm51bGwsZG93bjpudWxsLGxhc3Q6bnVsbCxmaXJzdDpudWxsLHJpZ2h0Y2xpY2tUaW1lcklkOm51bGwsdG91Y2hzdGFydDpmdW5jdGlvbihhKXt0aGlzLnN0YXJ0VG91Y2goKTt0aGlzLmRvd249dGhpcy5nZXRFdmVudEluZm8oYSk7dGhpcy5sYXN0PXRoaXMuZ2V0RXZlbnRJbmZvKGEpO3JldHVybiEwfSx0b3VjaG1vdmU6ZnVuY3Rpb24oYSl7dGhpcy5sYXN0PXRoaXMuZ2V0RXZlbnRJbmZvKGEpO3JldHVybiEwfSx0b3VjaGVuZDpmdW5jdGlvbihhKXt0aGlzLmRvd24mJihhLnh5PXRoaXMubGFzdC54eSxhLmxhc3RUb3VjaGVzPXRoaXMubGFzdC50b3VjaGVzLHRoaXMuaGFuZGxlU2luZ2xlKGEpLAp0aGlzLmRvd249bnVsbCk7cmV0dXJuITB9LG1vdXNlZG93bjpmdW5jdGlvbihhKXt0aGlzLmRvd249dGhpcy5nZXRFdmVudEluZm8oYSk7dGhpcy5sYXN0PXRoaXMuZ2V0RXZlbnRJbmZvKGEpO3JldHVybiEwfSxtb3VzZXVwOmZ1bmN0aW9uKGEpe3ZhciBiPSEwO3RoaXMuY2hlY2tNb2RpZmllcnMoYSkmJih0aGlzLmNvbnRyb2wuaGFuZGxlUmlnaHRDbGlja3MmJk9wZW5MYXllcnMuRXZlbnQuaXNSaWdodENsaWNrKGEpKSYmKGI9dGhpcy5yaWdodGNsaWNrKGEpKTtyZXR1cm4gYn0scmlnaHRjbGljazpmdW5jdGlvbihhKXtpZih0aGlzLnBhc3Nlc1RvbGVyYW5jZShhKSl7aWYobnVsbCE9dGhpcy5yaWdodGNsaWNrVGltZXJJZClyZXR1cm4gdGhpcy5jbGVhclRpbWVyKCksdGhpcy5jYWxsYmFjaygiZGJscmlnaHRjbGljayIsW2FdKSwhdGhpcy5zdG9wRG91YmxlO2E9dGhpc1siZG91YmxlIl0/T3BlbkxheWVycy5VdGlsLmV4dGVuZCh7fSxhKTp0aGlzLmNhbGxiYWNrKCJyaWdodGNsaWNrIiwKW2FdKTthPU9wZW5MYXllcnMuRnVuY3Rpb24uYmluZCh0aGlzLmRlbGF5ZWRSaWdodENhbGwsdGhpcyxhKTt0aGlzLnJpZ2h0Y2xpY2tUaW1lcklkPXdpbmRvdy5zZXRUaW1lb3V0KGEsdGhpcy5kZWxheSl9cmV0dXJuIXRoaXMuc3RvcFNpbmdsZX0sZGVsYXllZFJpZ2h0Q2FsbDpmdW5jdGlvbihhKXt0aGlzLnJpZ2h0Y2xpY2tUaW1lcklkPW51bGw7YSYmdGhpcy5jYWxsYmFjaygicmlnaHRjbGljayIsW2FdKX0sY2xpY2s6ZnVuY3Rpb24oYSl7dGhpcy5sYXN0fHwodGhpcy5sYXN0PXRoaXMuZ2V0RXZlbnRJbmZvKGEpKTt0aGlzLmhhbmRsZVNpbmdsZShhKTtyZXR1cm4hdGhpcy5zdG9wU2luZ2xlfSxkYmxjbGljazpmdW5jdGlvbihhKXt0aGlzLmhhbmRsZURvdWJsZShhKTtyZXR1cm4hdGhpcy5zdG9wRG91YmxlfSxoYW5kbGVEb3VibGU6ZnVuY3Rpb24oYSl7dGhpcy5wYXNzZXNEYmxjbGlja1RvbGVyYW5jZShhKSYmKHRoaXNbImRvdWJsZSJdJiZ0aGlzLmNhbGxiYWNrKCJkYmxjbGljayIsClthXSksdGhpcy5jbGVhclRpbWVyKCkpfSxoYW5kbGVTaW5nbGU6ZnVuY3Rpb24oYSl7dGhpcy5wYXNzZXNUb2xlcmFuY2UoYSkmJihudWxsIT10aGlzLnRpbWVySWQ/KHRoaXMubGFzdC50b3VjaGVzJiYxPT09dGhpcy5sYXN0LnRvdWNoZXMubGVuZ3RoJiYodGhpc1siZG91YmxlIl0mJk9wZW5MYXllcnMuRXZlbnQucHJldmVudERlZmF1bHQoYSksdGhpcy5oYW5kbGVEb3VibGUoYSkpLHRoaXMubGFzdC50b3VjaGVzJiYyPT09dGhpcy5sYXN0LnRvdWNoZXMubGVuZ3RofHx0aGlzLmNsZWFyVGltZXIoKSk6KHRoaXMuZmlyc3Q9dGhpcy5nZXRFdmVudEluZm8oYSksYT10aGlzLnNpbmdsZT9PcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHt9LGEpOm51bGwsdGhpcy5xdWV1ZVBvdGVudGlhbENsaWNrKGEpKSl9LHF1ZXVlUG90ZW50aWFsQ2xpY2s6ZnVuY3Rpb24oYSl7dGhpcy50aW1lcklkPXdpbmRvdy5zZXRUaW1lb3V0KE9wZW5MYXllcnMuRnVuY3Rpb24uYmluZCh0aGlzLmRlbGF5ZWRDYWxsLAp0aGlzLGEpLHRoaXMuZGVsYXkpfSxwYXNzZXNUb2xlcmFuY2U6ZnVuY3Rpb24oYSl7dmFyIGI9ITA7aWYobnVsbCE9dGhpcy5waXhlbFRvbGVyYW5jZSYmdGhpcy5kb3duJiZ0aGlzLmRvd24ueHkmJihiPXRoaXMucGl4ZWxUb2xlcmFuY2U+PXRoaXMuZG93bi54eS5kaXN0YW5jZVRvKGEueHkpKSYmdGhpcy50b3VjaCYmdGhpcy5kb3duLnRvdWNoZXMubGVuZ3RoPT09dGhpcy5sYXN0LnRvdWNoZXMubGVuZ3RoKXthPTA7Zm9yKHZhciBjPXRoaXMuZG93bi50b3VjaGVzLmxlbmd0aDthPGM7KythKWlmKHRoaXMuZ2V0VG91Y2hEaXN0YW5jZSh0aGlzLmRvd24udG91Y2hlc1thXSx0aGlzLmxhc3QudG91Y2hlc1thXSk+dGhpcy5waXhlbFRvbGVyYW5jZSl7Yj0hMTticmVha319cmV0dXJuIGJ9LGdldFRvdWNoRGlzdGFuY2U6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gTWF0aC5zcXJ0KE1hdGgucG93KGEuY2xpZW50WC1iLmNsaWVudFgsMikrTWF0aC5wb3coYS5jbGllbnRZLWIuY2xpZW50WSwKMikpfSxwYXNzZXNEYmxjbGlja1RvbGVyYW5jZTpmdW5jdGlvbihhKXthPSEwO3RoaXMuZG93biYmdGhpcy5maXJzdCYmKGE9dGhpcy5kb3duLnh5LmRpc3RhbmNlVG8odGhpcy5maXJzdC54eSk8PXRoaXMuZGJsY2xpY2tUb2xlcmFuY2UpO3JldHVybiBhfSxjbGVhclRpbWVyOmZ1bmN0aW9uKCl7bnVsbCE9dGhpcy50aW1lcklkJiYod2luZG93LmNsZWFyVGltZW91dCh0aGlzLnRpbWVySWQpLHRoaXMudGltZXJJZD1udWxsKTtudWxsIT10aGlzLnJpZ2h0Y2xpY2tUaW1lcklkJiYod2luZG93LmNsZWFyVGltZW91dCh0aGlzLnJpZ2h0Y2xpY2tUaW1lcklkKSx0aGlzLnJpZ2h0Y2xpY2tUaW1lcklkPW51bGwpfSxkZWxheWVkQ2FsbDpmdW5jdGlvbihhKXt0aGlzLnRpbWVySWQ9bnVsbDthJiZ0aGlzLmNhbGxiYWNrKCJjbGljayIsW2FdKX0sZ2V0RXZlbnRJbmZvOmZ1bmN0aW9uKGEpe3ZhciBiO2lmKGEudG91Y2hlcyl7dmFyIGM9YS50b3VjaGVzLmxlbmd0aDtiPUFycmF5KGMpO2Zvcih2YXIgZCwKZT0wO2U8YztlKyspZD1hLnRvdWNoZXNbZV0sYltlXT17Y2xpZW50WDpkLm9sQ2xpZW50WCxjbGllbnRZOmQub2xDbGllbnRZfX1yZXR1cm57eHk6YS54eSx0b3VjaGVzOmJ9fSxkZWFjdGl2YXRlOmZ1bmN0aW9uKCl7dmFyIGE9ITE7T3BlbkxheWVycy5IYW5kbGVyLnByb3RvdHlwZS5kZWFjdGl2YXRlLmFwcGx5KHRoaXMsYXJndW1lbnRzKSYmKHRoaXMuY2xlYXJUaW1lcigpLHRoaXMubGFzdD10aGlzLmZpcnN0PXRoaXMuZG93bj1udWxsLGE9ITApO3JldHVybiBhfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkhhbmRsZXIuQ2xpY2sifSk7T3BlbkxheWVycy5IYW5kbGVyLkRyYWc9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkhhbmRsZXIse3N0YXJ0ZWQ6ITEsc3RvcERvd246ITAsZHJhZ2dpbmc6ITEsbGFzdDpudWxsLHN0YXJ0Om51bGwsbGFzdE1vdmVFdnQ6bnVsbCxvbGRPbnNlbGVjdHN0YXJ0Om51bGwsaW50ZXJ2YWw6MCx0aW1lb3V0SWQ6bnVsbCxkb2N1bWVudERyYWc6ITEsZG9jdW1lbnRFdmVudHM6bnVsbCxpbml0aWFsaXplOmZ1bmN0aW9uKGEsYixjKXtPcGVuTGF5ZXJzLkhhbmRsZXIucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxhcmd1bWVudHMpO2lmKCEwPT09dGhpcy5kb2N1bWVudERyYWcpe3ZhciBkPXRoaXM7dGhpcy5fZG9jTW92ZT1mdW5jdGlvbihhKXtkLm1vdXNlbW92ZSh7eHk6e3g6YS5jbGllbnRYLHk6YS5jbGllbnRZfSxlbGVtZW50OmRvY3VtZW50fSl9O3RoaXMuX2RvY1VwPWZ1bmN0aW9uKGEpe2QubW91c2V1cCh7eHk6e3g6YS5jbGllbnRYLHk6YS5jbGllbnRZfX0pfX19LApkcmFnc3RhcnQ6ZnVuY3Rpb24oYSl7dmFyIGI9ITA7dGhpcy5kcmFnZ2luZz0hMTt0aGlzLmNoZWNrTW9kaWZpZXJzKGEpJiYoT3BlbkxheWVycy5FdmVudC5pc0xlZnRDbGljayhhKXx8T3BlbkxheWVycy5FdmVudC5pc1NpbmdsZVRvdWNoKGEpKT8odGhpcy5zdGFydGVkPSEwLHRoaXMubGFzdD10aGlzLnN0YXJ0PWEueHksT3BlbkxheWVycy5FbGVtZW50LmFkZENsYXNzKHRoaXMubWFwLnZpZXdQb3J0RGl2LCJvbERyYWdEb3duIiksdGhpcy5kb3duKGEpLHRoaXMuY2FsbGJhY2soImRvd24iLFthLnh5XSksT3BlbkxheWVycy5FdmVudC5wcmV2ZW50RGVmYXVsdChhKSx0aGlzLm9sZE9uc2VsZWN0c3RhcnR8fCh0aGlzLm9sZE9uc2VsZWN0c3RhcnQ9ZG9jdW1lbnQub25zZWxlY3RzdGFydD9kb2N1bWVudC5vbnNlbGVjdHN0YXJ0Ok9wZW5MYXllcnMuRnVuY3Rpb24uVHJ1ZSksZG9jdW1lbnQub25zZWxlY3RzdGFydD1PcGVuTGF5ZXJzLkZ1bmN0aW9uLkZhbHNlLGI9IXRoaXMuc3RvcERvd24pOgoodGhpcy5zdGFydGVkPSExLHRoaXMubGFzdD10aGlzLnN0YXJ0PW51bGwpO3JldHVybiBifSxkcmFnbW92ZTpmdW5jdGlvbihhKXt0aGlzLmxhc3RNb3ZlRXZ0PWE7IXRoaXMuc3RhcnRlZHx8KHRoaXMudGltZW91dElkfHxhLnh5Lng9PXRoaXMubGFzdC54JiZhLnh5Lnk9PXRoaXMubGFzdC55KXx8KCEwPT09dGhpcy5kb2N1bWVudERyYWcmJnRoaXMuZG9jdW1lbnRFdmVudHMmJihhLmVsZW1lbnQ9PT1kb2N1bWVudD8odGhpcy5hZGp1c3RYWShhKSx0aGlzLnNldEV2ZW50KGEpKTp0aGlzLnJlbW92ZURvY3VtZW50RXZlbnRzKCkpLDA8dGhpcy5pbnRlcnZhbCYmKHRoaXMudGltZW91dElkPXNldFRpbWVvdXQoT3BlbkxheWVycy5GdW5jdGlvbi5iaW5kKHRoaXMucmVtb3ZlVGltZW91dCx0aGlzKSx0aGlzLmludGVydmFsKSksdGhpcy5kcmFnZ2luZz0hMCx0aGlzLm1vdmUoYSksdGhpcy5jYWxsYmFjaygibW92ZSIsW2EueHldKSx0aGlzLm9sZE9uc2VsZWN0c3RhcnR8fCh0aGlzLm9sZE9uc2VsZWN0c3RhcnQ9CmRvY3VtZW50Lm9uc2VsZWN0c3RhcnQsZG9jdW1lbnQub25zZWxlY3RzdGFydD1PcGVuTGF5ZXJzLkZ1bmN0aW9uLkZhbHNlKSx0aGlzLmxhc3Q9YS54eSk7cmV0dXJuITB9LGRyYWdlbmQ6ZnVuY3Rpb24oYSl7aWYodGhpcy5zdGFydGVkKXshMD09PXRoaXMuZG9jdW1lbnREcmFnJiZ0aGlzLmRvY3VtZW50RXZlbnRzJiYodGhpcy5hZGp1c3RYWShhKSx0aGlzLnJlbW92ZURvY3VtZW50RXZlbnRzKCkpO3ZhciBiPXRoaXMuc3RhcnQhPXRoaXMubGFzdDt0aGlzLmRyYWdnaW5nPXRoaXMuc3RhcnRlZD0hMTtPcGVuTGF5ZXJzLkVsZW1lbnQucmVtb3ZlQ2xhc3ModGhpcy5tYXAudmlld1BvcnREaXYsIm9sRHJhZ0Rvd24iKTt0aGlzLnVwKGEpO3RoaXMuY2FsbGJhY2soInVwIixbYS54eV0pO2ImJnRoaXMuY2FsbGJhY2soImRvbmUiLFthLnh5XSk7ZG9jdW1lbnQub25zZWxlY3RzdGFydD10aGlzLm9sZE9uc2VsZWN0c3RhcnR9cmV0dXJuITB9LGRvd246ZnVuY3Rpb24oYSl7fSxtb3ZlOmZ1bmN0aW9uKGEpe30sCnVwOmZ1bmN0aW9uKGEpe30sb3V0OmZ1bmN0aW9uKGEpe30sbW91c2Vkb3duOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmRyYWdzdGFydChhKX0sdG91Y2hzdGFydDpmdW5jdGlvbihhKXt0aGlzLnN0YXJ0VG91Y2goKTtyZXR1cm4gdGhpcy5kcmFnc3RhcnQoYSl9LG1vdXNlbW92ZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5kcmFnbW92ZShhKX0sdG91Y2htb3ZlOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmRyYWdtb3ZlKGEpfSxyZW1vdmVUaW1lb3V0OmZ1bmN0aW9uKCl7dGhpcy50aW1lb3V0SWQ9bnVsbDt0aGlzLmRyYWdnaW5nJiZ0aGlzLm1vdXNlbW92ZSh0aGlzLmxhc3RNb3ZlRXZ0KX0sbW91c2V1cDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5kcmFnZW5kKGEpfSx0b3VjaGVuZDpmdW5jdGlvbihhKXthLnh5PXRoaXMubGFzdDtyZXR1cm4gdGhpcy5kcmFnZW5kKGEpfSxtb3VzZW91dDpmdW5jdGlvbihhKXtpZih0aGlzLnN0YXJ0ZWQmJk9wZW5MYXllcnMuVXRpbC5tb3VzZUxlZnQoYSwKdGhpcy5tYXAudmlld1BvcnREaXYpKWlmKCEwPT09dGhpcy5kb2N1bWVudERyYWcpdGhpcy5hZGREb2N1bWVudEV2ZW50cygpO2Vsc2V7dmFyIGI9dGhpcy5zdGFydCE9dGhpcy5sYXN0O3RoaXMuZHJhZ2dpbmc9dGhpcy5zdGFydGVkPSExO09wZW5MYXllcnMuRWxlbWVudC5yZW1vdmVDbGFzcyh0aGlzLm1hcC52aWV3UG9ydERpdiwib2xEcmFnRG93biIpO3RoaXMub3V0KGEpO3RoaXMuY2FsbGJhY2soIm91dCIsW10pO2ImJnRoaXMuY2FsbGJhY2soImRvbmUiLFthLnh5XSk7ZG9jdW1lbnQub25zZWxlY3RzdGFydCYmKGRvY3VtZW50Lm9uc2VsZWN0c3RhcnQ9dGhpcy5vbGRPbnNlbGVjdHN0YXJ0KX1yZXR1cm4hMH0sY2xpY2s6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuc3RhcnQ9PXRoaXMubGFzdH0sYWN0aXZhdGU6ZnVuY3Rpb24oKXt2YXIgYT0hMTtPcGVuTGF5ZXJzLkhhbmRsZXIucHJvdG90eXBlLmFjdGl2YXRlLmFwcGx5KHRoaXMsYXJndW1lbnRzKSYmKHRoaXMuZHJhZ2dpbmc9CiExLGE9ITApO3JldHVybiBhfSxkZWFjdGl2YXRlOmZ1bmN0aW9uKCl7dmFyIGE9ITE7T3BlbkxheWVycy5IYW5kbGVyLnByb3RvdHlwZS5kZWFjdGl2YXRlLmFwcGx5KHRoaXMsYXJndW1lbnRzKSYmKHRoaXMuZHJhZ2dpbmc9dGhpcy5zdGFydGVkPSExLHRoaXMubGFzdD10aGlzLnN0YXJ0PW51bGwsYT0hMCxPcGVuTGF5ZXJzLkVsZW1lbnQucmVtb3ZlQ2xhc3ModGhpcy5tYXAudmlld1BvcnREaXYsIm9sRHJhZ0Rvd24iKSk7cmV0dXJuIGF9LGFkanVzdFhZOmZ1bmN0aW9uKGEpe3ZhciBiPU9wZW5MYXllcnMuVXRpbC5wYWdlUG9zaXRpb24odGhpcy5tYXAudmlld1BvcnREaXYpO2EueHkueC09YlswXTthLnh5LnktPWJbMV19LGFkZERvY3VtZW50RXZlbnRzOmZ1bmN0aW9uKCl7T3BlbkxheWVycy5FbGVtZW50LmFkZENsYXNzKGRvY3VtZW50LmJvZHksIm9sRHJhZ0Rvd24iKTt0aGlzLmRvY3VtZW50RXZlbnRzPSEwO09wZW5MYXllcnMuRXZlbnQub2JzZXJ2ZShkb2N1bWVudCwibW91c2Vtb3ZlIiwKdGhpcy5fZG9jTW92ZSk7T3BlbkxheWVycy5FdmVudC5vYnNlcnZlKGRvY3VtZW50LCJtb3VzZXVwIix0aGlzLl9kb2NVcCl9LHJlbW92ZURvY3VtZW50RXZlbnRzOmZ1bmN0aW9uKCl7T3BlbkxheWVycy5FbGVtZW50LnJlbW92ZUNsYXNzKGRvY3VtZW50LmJvZHksIm9sRHJhZ0Rvd24iKTt0aGlzLmRvY3VtZW50RXZlbnRzPSExO09wZW5MYXllcnMuRXZlbnQuc3RvcE9ic2VydmluZyhkb2N1bWVudCwibW91c2Vtb3ZlIix0aGlzLl9kb2NNb3ZlKTtPcGVuTGF5ZXJzLkV2ZW50LnN0b3BPYnNlcnZpbmcoZG9jdW1lbnQsIm1vdXNldXAiLHRoaXMuX2RvY1VwKX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5IYW5kbGVyLkRyYWcifSk7T3BlbkxheWVycy5Db250cm9sLk92ZXJ2aWV3TWFwPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Db250cm9sLHtlbGVtZW50Om51bGwsb3ZtYXA6bnVsbCxzaXplOnt3OjE4MCxoOjkwfSxsYXllcnM6bnVsbCxtaW5SZWN0U2l6ZToxNSxtaW5SZWN0RGlzcGxheUNsYXNzOiJSZWN0UmVwbGFjZW1lbnQiLG1pblJhdGlvOjgsbWF4UmF0aW86MzIsbWFwT3B0aW9uczpudWxsLGF1dG9QYW46ITEsaGFuZGxlcnM6bnVsbCxyZXNvbHV0aW9uRmFjdG9yOjEsbWF4aW1pemVkOiExLG1heGltaXplVGl0bGU6IiIsbWluaW1pemVUaXRsZToiIixpbml0aWFsaXplOmZ1bmN0aW9uKGEpe3RoaXMubGF5ZXJzPVtdO3RoaXMuaGFuZGxlcnM9e307T3BlbkxheWVycy5Db250cm9sLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsW2FdKX0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMubWFwRGl2JiYodGhpcy5oYW5kbGVycy5jbGljayYmdGhpcy5oYW5kbGVycy5jbGljay5kZXN0cm95KCksCnRoaXMuaGFuZGxlcnMuZHJhZyYmdGhpcy5oYW5kbGVycy5kcmFnLmRlc3Ryb3koKSx0aGlzLm92bWFwJiZ0aGlzLm92bWFwLnZpZXdQb3J0RGl2LnJlbW92ZUNoaWxkKHRoaXMuZXh0ZW50UmVjdGFuZ2xlKSx0aGlzLmV4dGVudFJlY3RhbmdsZT1udWxsLHRoaXMucmVjdEV2ZW50cyYmKHRoaXMucmVjdEV2ZW50cy5kZXN0cm95KCksdGhpcy5yZWN0RXZlbnRzPW51bGwpLHRoaXMub3ZtYXAmJih0aGlzLm92bWFwLmRlc3Ryb3koKSx0aGlzLm92bWFwPW51bGwpLHRoaXMuZWxlbWVudC5yZW1vdmVDaGlsZCh0aGlzLm1hcERpdiksdGhpcy5tYXBEaXY9bnVsbCx0aGlzLmRpdi5yZW1vdmVDaGlsZCh0aGlzLmVsZW1lbnQpLHRoaXMuZWxlbWVudD1udWxsLHRoaXMubWF4aW1pemVEaXYmJih0aGlzLmRpdi5yZW1vdmVDaGlsZCh0aGlzLm1heGltaXplRGl2KSx0aGlzLm1heGltaXplRGl2PW51bGwpLHRoaXMubWluaW1pemVEaXYmJih0aGlzLmRpdi5yZW1vdmVDaGlsZCh0aGlzLm1pbmltaXplRGl2KSwKdGhpcy5taW5pbWl6ZURpdj1udWxsKSx0aGlzLm1hcC5ldmVudHMudW4oe2J1dHRvbmNsaWNrOnRoaXMub25CdXR0b25DbGljayxtb3ZlZW5kOnRoaXMudXBkYXRlLGNoYW5nZWJhc2VsYXllcjp0aGlzLmJhc2VMYXllckRyYXcsc2NvcGU6dGhpc30pLE9wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuZGVzdHJveS5hcHBseSh0aGlzLGFyZ3VtZW50cykpfSxkcmF3OmZ1bmN0aW9uKCl7T3BlbkxheWVycy5Db250cm9sLnByb3RvdHlwZS5kcmF3LmFwcGx5KHRoaXMsYXJndW1lbnRzKTtpZigwPT09dGhpcy5sYXllcnMubGVuZ3RoKWlmKHRoaXMubWFwLmJhc2VMYXllcil0aGlzLmxheWVycz1bdGhpcy5tYXAuYmFzZUxheWVyLmNsb25lKCldO2Vsc2UgcmV0dXJuIHRoaXMubWFwLmV2ZW50cy5yZWdpc3RlcigiY2hhbmdlYmFzZWxheWVyIix0aGlzLHRoaXMuYmFzZUxheWVyRHJhdyksdGhpcy5kaXY7dGhpcy5lbGVtZW50PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO3RoaXMuZWxlbWVudC5jbGFzc05hbWU9CnRoaXMuZGlzcGxheUNsYXNzKyJFbGVtZW50Ijt0aGlzLmVsZW1lbnQuc3R5bGUuZGlzcGxheT0ibm9uZSI7dGhpcy5tYXBEaXY9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7dGhpcy5tYXBEaXYuc3R5bGUud2lkdGg9dGhpcy5zaXplLncrInB4Ijt0aGlzLm1hcERpdi5zdHlsZS5oZWlnaHQ9dGhpcy5zaXplLmgrInB4Ijt0aGlzLm1hcERpdi5zdHlsZS5wb3NpdGlvbj0icmVsYXRpdmUiO3RoaXMubWFwRGl2LnN0eWxlLm92ZXJmbG93PSJoaWRkZW4iO3RoaXMubWFwRGl2LmlkPU9wZW5MYXllcnMuVXRpbC5jcmVhdGVVbmlxdWVJRCgib3ZlcnZpZXdNYXAiKTt0aGlzLmV4dGVudFJlY3RhbmdsZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTt0aGlzLmV4dGVudFJlY3RhbmdsZS5zdHlsZS5wb3NpdGlvbj0iYWJzb2x1dGUiO3RoaXMuZXh0ZW50UmVjdGFuZ2xlLnN0eWxlLnpJbmRleD0xRTM7dGhpcy5leHRlbnRSZWN0YW5nbGUuY2xhc3NOYW1lPXRoaXMuZGlzcGxheUNsYXNzKwoiRXh0ZW50UmVjdGFuZ2xlIjt0aGlzLmVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5tYXBEaXYpO3RoaXMuZGl2LmFwcGVuZENoaWxkKHRoaXMuZWxlbWVudCk7aWYodGhpcy5vdXRzaWRlVmlld3BvcnQpdGhpcy5lbGVtZW50LnN0eWxlLmRpc3BsYXk9IiI7ZWxzZXt0aGlzLmRpdi5jbGFzc05hbWUrPSIgIit0aGlzLmRpc3BsYXlDbGFzcysiQ29udGFpbmVyIjt2YXIgYT1PcGVuTGF5ZXJzLlV0aWwuZ2V0SW1hZ2VMb2NhdGlvbigibGF5ZXItc3dpdGNoZXItbWF4aW1pemUucG5nIik7dGhpcy5tYXhpbWl6ZURpdj1PcGVuTGF5ZXJzLlV0aWwuY3JlYXRlQWxwaGFJbWFnZURpdih0aGlzLmRpc3BsYXlDbGFzcysiTWF4aW1pemVCdXR0b24iLG51bGwsbnVsbCxhLCJhYnNvbHV0ZSIpO3RoaXMubWF4aW1pemVEaXYuc3R5bGUuZGlzcGxheT0ibm9uZSI7dGhpcy5tYXhpbWl6ZURpdi5jbGFzc05hbWU9dGhpcy5kaXNwbGF5Q2xhc3MrIk1heGltaXplQnV0dG9uIG9sQnV0dG9uIjt0aGlzLm1heGltaXplVGl0bGUmJgoodGhpcy5tYXhpbWl6ZURpdi50aXRsZT10aGlzLm1heGltaXplVGl0bGUpO3RoaXMuZGl2LmFwcGVuZENoaWxkKHRoaXMubWF4aW1pemVEaXYpO2E9T3BlbkxheWVycy5VdGlsLmdldEltYWdlTG9jYXRpb24oImxheWVyLXN3aXRjaGVyLW1pbmltaXplLnBuZyIpO3RoaXMubWluaW1pemVEaXY9T3BlbkxheWVycy5VdGlsLmNyZWF0ZUFscGhhSW1hZ2VEaXYoIk9wZW5MYXllcnNfQ29udHJvbF9taW5pbWl6ZURpdiIsbnVsbCxudWxsLGEsImFic29sdXRlIik7dGhpcy5taW5pbWl6ZURpdi5zdHlsZS5kaXNwbGF5PSJub25lIjt0aGlzLm1pbmltaXplRGl2LmNsYXNzTmFtZT10aGlzLmRpc3BsYXlDbGFzcysiTWluaW1pemVCdXR0b24gb2xCdXR0b24iO3RoaXMubWluaW1pemVUaXRsZSYmKHRoaXMubWluaW1pemVEaXYudGl0bGU9dGhpcy5taW5pbWl6ZVRpdGxlKTt0aGlzLmRpdi5hcHBlbmRDaGlsZCh0aGlzLm1pbmltaXplRGl2KTt0aGlzLm1pbmltaXplQ29udHJvbCgpfXRoaXMubWFwLmdldEV4dGVudCgpJiYKdGhpcy51cGRhdGUoKTt0aGlzLm1hcC5ldmVudHMub24oe2J1dHRvbmNsaWNrOnRoaXMub25CdXR0b25DbGljayxtb3ZlZW5kOnRoaXMudXBkYXRlLHNjb3BlOnRoaXN9KTt0aGlzLm1heGltaXplZCYmdGhpcy5tYXhpbWl6ZUNvbnRyb2woKTtyZXR1cm4gdGhpcy5kaXZ9LGJhc2VMYXllckRyYXc6ZnVuY3Rpb24oKXt0aGlzLmRyYXcoKTt0aGlzLm1hcC5ldmVudHMudW5yZWdpc3RlcigiY2hhbmdlYmFzZWxheWVyIix0aGlzLHRoaXMuYmFzZUxheWVyRHJhdyl9LHJlY3REcmFnOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuaGFuZGxlcnMuZHJhZy5sYXN0LngtYS54LGM9dGhpcy5oYW5kbGVycy5kcmFnLmxhc3QueS1hLnk7aWYoMCE9Ynx8MCE9Yyl7dmFyIGQ9dGhpcy5yZWN0UHhCb3VuZHMudG9wLGU9dGhpcy5yZWN0UHhCb3VuZHMubGVmdDthPU1hdGguYWJzKHRoaXMucmVjdFB4Qm91bmRzLmdldEhlaWdodCgpKTt2YXIgZj10aGlzLnJlY3RQeEJvdW5kcy5nZXRXaWR0aCgpLGM9TWF0aC5tYXgoMCwKZC1jKSxjPU1hdGgubWluKGMsdGhpcy5vdm1hcC5zaXplLmgtdGhpcy5oQ29tcC1hKSxiPU1hdGgubWF4KDAsZS1iKSxiPU1hdGgubWluKGIsdGhpcy5vdm1hcC5zaXplLnctdGhpcy53Q29tcC1mKTt0aGlzLnNldFJlY3RQeEJvdW5kcyhuZXcgT3BlbkxheWVycy5Cb3VuZHMoYixjK2EsYitmLGMpKX19LG1hcERpdkNsaWNrOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMucmVjdFB4Qm91bmRzLmdldENlbnRlclBpeGVsKCksYz1hLnh5LngtYi54LGQ9YS54eS55LWIueSxlPXRoaXMucmVjdFB4Qm91bmRzLnRvcCxmPXRoaXMucmVjdFB4Qm91bmRzLmxlZnQ7YT1NYXRoLmFicyh0aGlzLnJlY3RQeEJvdW5kcy5nZXRIZWlnaHQoKSk7Yj10aGlzLnJlY3RQeEJvdW5kcy5nZXRXaWR0aCgpO2Q9TWF0aC5tYXgoMCxlK2QpO2Q9TWF0aC5taW4oZCx0aGlzLm92bWFwLnNpemUuaC1hKTtjPU1hdGgubWF4KDAsZitjKTtjPU1hdGgubWluKGMsdGhpcy5vdm1hcC5zaXplLnctYik7dGhpcy5zZXRSZWN0UHhCb3VuZHMobmV3IE9wZW5MYXllcnMuQm91bmRzKGMsCmQrYSxjK2IsZCkpO3RoaXMudXBkYXRlTWFwVG9SZWN0KCl9LG9uQnV0dG9uQ2xpY2s6ZnVuY3Rpb24oYSl7YS5idXR0b25FbGVtZW50PT09dGhpcy5taW5pbWl6ZURpdj90aGlzLm1pbmltaXplQ29udHJvbCgpOmEuYnV0dG9uRWxlbWVudD09PXRoaXMubWF4aW1pemVEaXYmJnRoaXMubWF4aW1pemVDb250cm9sKCl9LG1heGltaXplQ29udHJvbDpmdW5jdGlvbihhKXt0aGlzLmVsZW1lbnQuc3R5bGUuZGlzcGxheT0iIjt0aGlzLnNob3dUb2dnbGUoITEpO251bGwhPWEmJk9wZW5MYXllcnMuRXZlbnQuc3RvcChhKX0sbWluaW1pemVDb250cm9sOmZ1bmN0aW9uKGEpe3RoaXMuZWxlbWVudC5zdHlsZS5kaXNwbGF5PSJub25lIjt0aGlzLnNob3dUb2dnbGUoITApO251bGwhPWEmJk9wZW5MYXllcnMuRXZlbnQuc3RvcChhKX0sc2hvd1RvZ2dsZTpmdW5jdGlvbihhKXt0aGlzLm1heGltaXplRGl2JiYodGhpcy5tYXhpbWl6ZURpdi5zdHlsZS5kaXNwbGF5PWE/IiI6Im5vbmUiKTt0aGlzLm1pbmltaXplRGl2JiYKKHRoaXMubWluaW1pemVEaXYuc3R5bGUuZGlzcGxheT1hPyJub25lIjoiIil9LHVwZGF0ZTpmdW5jdGlvbigpe251bGw9PXRoaXMub3ZtYXAmJnRoaXMuY3JlYXRlTWFwKCk7IXRoaXMuYXV0b1BhbiYmdGhpcy5pc1N1aXRhYmxlT3ZlcnZpZXcoKXx8dGhpcy51cGRhdGVPdmVydmlldygpO3RoaXMudXBkYXRlUmVjdFRvTWFwKCl9LGlzU3VpdGFibGVPdmVydmlldzpmdW5jdGlvbigpe3ZhciBhPXRoaXMubWFwLmdldEV4dGVudCgpLGI9dGhpcy5tYXAuZ2V0TWF4RXh0ZW50KCksYT1uZXcgT3BlbkxheWVycy5Cb3VuZHMoTWF0aC5tYXgoYS5sZWZ0LGIubGVmdCksTWF0aC5tYXgoYS5ib3R0b20sYi5ib3R0b20pLE1hdGgubWluKGEucmlnaHQsYi5yaWdodCksTWF0aC5taW4oYS50b3AsYi50b3ApKTt0aGlzLm92bWFwLmdldFByb2plY3Rpb24oKSE9dGhpcy5tYXAuZ2V0UHJvamVjdGlvbigpJiYoYT1hLnRyYW5zZm9ybSh0aGlzLm1hcC5nZXRQcm9qZWN0aW9uT2JqZWN0KCksdGhpcy5vdm1hcC5nZXRQcm9qZWN0aW9uT2JqZWN0KCkpKTsKYj10aGlzLm92bWFwLmdldFJlc29sdXRpb24oKS90aGlzLm1hcC5nZXRSZXNvbHV0aW9uKCk7cmV0dXJuIGI+dGhpcy5taW5SYXRpbyYmYjw9dGhpcy5tYXhSYXRpbyYmdGhpcy5vdm1hcC5nZXRFeHRlbnQoKS5jb250YWluc0JvdW5kcyhhKX0sdXBkYXRlT3ZlcnZpZXc6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm1hcC5nZXRSZXNvbHV0aW9uKCksYj10aGlzLm92bWFwLmdldFJlc29sdXRpb24oKSxjPWIvYTtjPnRoaXMubWF4UmF0aW8/Yj10aGlzLm1pblJhdGlvKmE6Yzw9dGhpcy5taW5SYXRpbyYmKGI9dGhpcy5tYXhSYXRpbyphKTt0aGlzLm92bWFwLmdldFByb2plY3Rpb24oKSE9dGhpcy5tYXAuZ2V0UHJvamVjdGlvbigpPyhhPXRoaXMubWFwLmNlbnRlci5jbG9uZSgpLGEudHJhbnNmb3JtKHRoaXMubWFwLmdldFByb2plY3Rpb25PYmplY3QoKSx0aGlzLm92bWFwLmdldFByb2plY3Rpb25PYmplY3QoKSkpOmE9dGhpcy5tYXAuY2VudGVyO3RoaXMub3ZtYXAuc2V0Q2VudGVyKGEsCnRoaXMub3ZtYXAuZ2V0Wm9vbUZvclJlc29sdXRpb24oYip0aGlzLnJlc29sdXRpb25GYWN0b3IpKTt0aGlzLnVwZGF0ZVJlY3RUb01hcCgpfSxjcmVhdGVNYXA6ZnVuY3Rpb24oKXt2YXIgYT1PcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHtjb250cm9sczpbXSxtYXhSZXNvbHV0aW9uOiJhdXRvIixmYWxsVGhyb3VnaDohMX0sdGhpcy5tYXBPcHRpb25zKTt0aGlzLm92bWFwPW5ldyBPcGVuTGF5ZXJzLk1hcCh0aGlzLm1hcERpdixhKTt0aGlzLm92bWFwLnZpZXdQb3J0RGl2LmFwcGVuZENoaWxkKHRoaXMuZXh0ZW50UmVjdGFuZ2xlKTtPcGVuTGF5ZXJzLkV2ZW50LnN0b3BPYnNlcnZpbmcod2luZG93LCJ1bmxvYWQiLHRoaXMub3ZtYXAudW5sb2FkRGVzdHJveSk7dGhpcy5vdm1hcC5hZGRMYXllcnModGhpcy5sYXllcnMpO3RoaXMub3ZtYXAuem9vbVRvTWF4RXh0ZW50KCk7dGhpcy53Q29tcD0odGhpcy53Q29tcD1wYXJzZUludChPcGVuTGF5ZXJzLkVsZW1lbnQuZ2V0U3R5bGUodGhpcy5leHRlbnRSZWN0YW5nbGUsCiJib3JkZXItbGVmdC13aWR0aCIpKStwYXJzZUludChPcGVuTGF5ZXJzLkVsZW1lbnQuZ2V0U3R5bGUodGhpcy5leHRlbnRSZWN0YW5nbGUsImJvcmRlci1yaWdodC13aWR0aCIpKSk/dGhpcy53Q29tcDoyO3RoaXMuaENvbXA9KHRoaXMuaENvbXA9cGFyc2VJbnQoT3BlbkxheWVycy5FbGVtZW50LmdldFN0eWxlKHRoaXMuZXh0ZW50UmVjdGFuZ2xlLCJib3JkZXItdG9wLXdpZHRoIikpK3BhcnNlSW50KE9wZW5MYXllcnMuRWxlbWVudC5nZXRTdHlsZSh0aGlzLmV4dGVudFJlY3RhbmdsZSwiYm9yZGVyLWJvdHRvbS13aWR0aCIpKSk/dGhpcy5oQ29tcDoyO3RoaXMuaGFuZGxlcnMuZHJhZz1uZXcgT3BlbkxheWVycy5IYW5kbGVyLkRyYWcodGhpcyx7bW92ZTp0aGlzLnJlY3REcmFnLGRvbmU6dGhpcy51cGRhdGVNYXBUb1JlY3R9LHttYXA6dGhpcy5vdm1hcH0pO3RoaXMuaGFuZGxlcnMuY2xpY2s9bmV3IE9wZW5MYXllcnMuSGFuZGxlci5DbGljayh0aGlzLHtjbGljazp0aGlzLm1hcERpdkNsaWNrfSwKe3NpbmdsZTohMCwiZG91YmxlIjohMSxzdG9wU2luZ2xlOiEwLHN0b3BEb3VibGU6ITAscGl4ZWxUb2xlcmFuY2U6MSxtYXA6dGhpcy5vdm1hcH0pO3RoaXMuaGFuZGxlcnMuY2xpY2suYWN0aXZhdGUoKTt0aGlzLnJlY3RFdmVudHM9bmV3IE9wZW5MYXllcnMuRXZlbnRzKHRoaXMsdGhpcy5leHRlbnRSZWN0YW5nbGUsbnVsbCwhMCk7dGhpcy5yZWN0RXZlbnRzLnJlZ2lzdGVyKCJtb3VzZW92ZXIiLHRoaXMsZnVuY3Rpb24oYSl7dGhpcy5oYW5kbGVycy5kcmFnLmFjdGl2ZXx8dGhpcy5tYXAuZHJhZ2dpbmd8fHRoaXMuaGFuZGxlcnMuZHJhZy5hY3RpdmF0ZSgpfSk7dGhpcy5yZWN0RXZlbnRzLnJlZ2lzdGVyKCJtb3VzZW91dCIsdGhpcyxmdW5jdGlvbihhKXt0aGlzLmhhbmRsZXJzLmRyYWcuZHJhZ2dpbmd8fHRoaXMuaGFuZGxlcnMuZHJhZy5kZWFjdGl2YXRlKCl9KTtpZih0aGlzLm92bWFwLmdldFByb2plY3Rpb24oKSE9dGhpcy5tYXAuZ2V0UHJvamVjdGlvbigpKXt2YXIgYT10aGlzLm1hcC5nZXRQcm9qZWN0aW9uT2JqZWN0KCkuZ2V0VW5pdHMoKXx8CnRoaXMubWFwLnVuaXRzfHx0aGlzLm1hcC5iYXNlTGF5ZXIudW5pdHMsYj10aGlzLm92bWFwLmdldFByb2plY3Rpb25PYmplY3QoKS5nZXRVbml0cygpfHx0aGlzLm92bWFwLnVuaXRzfHx0aGlzLm92bWFwLmJhc2VMYXllci51bml0czt0aGlzLnJlc29sdXRpb25GYWN0b3I9YSYmYj9PcGVuTGF5ZXJzLklOQ0hFU19QRVJfVU5JVFthXS9PcGVuTGF5ZXJzLklOQ0hFU19QRVJfVU5JVFtiXToxfX0sdXBkYXRlUmVjdFRvTWFwOmZ1bmN0aW9uKCl7dmFyIGE7YT10aGlzLm92bWFwLmdldFByb2plY3Rpb24oKSE9dGhpcy5tYXAuZ2V0UHJvamVjdGlvbigpP3RoaXMubWFwLmdldEV4dGVudCgpLnRyYW5zZm9ybSh0aGlzLm1hcC5nZXRQcm9qZWN0aW9uT2JqZWN0KCksdGhpcy5vdm1hcC5nZXRQcm9qZWN0aW9uT2JqZWN0KCkpOnRoaXMubWFwLmdldEV4dGVudCgpOyhhPXRoaXMuZ2V0UmVjdEJvdW5kc0Zyb21NYXBCb3VuZHMoYSkpJiZ0aGlzLnNldFJlY3RQeEJvdW5kcyhhKX0sdXBkYXRlTWFwVG9SZWN0OmZ1bmN0aW9uKCl7dmFyIGE9CnRoaXMuZ2V0TWFwQm91bmRzRnJvbVJlY3RCb3VuZHModGhpcy5yZWN0UHhCb3VuZHMpO3RoaXMub3ZtYXAuZ2V0UHJvamVjdGlvbigpIT10aGlzLm1hcC5nZXRQcm9qZWN0aW9uKCkmJihhPWEudHJhbnNmb3JtKHRoaXMub3ZtYXAuZ2V0UHJvamVjdGlvbk9iamVjdCgpLHRoaXMubWFwLmdldFByb2plY3Rpb25PYmplY3QoKSkpO3RoaXMubWFwLnBhblRvKGEuZ2V0Q2VudGVyTG9uTGF0KCkpfSxzZXRSZWN0UHhCb3VuZHM6ZnVuY3Rpb24oYSl7dmFyIGI9TWF0aC5tYXgoYS50b3AsMCksYz1NYXRoLm1heChhLmxlZnQsMCksZD1NYXRoLm1pbihhLnRvcCtNYXRoLmFicyhhLmdldEhlaWdodCgpKSx0aGlzLm92bWFwLnNpemUuaC10aGlzLmhDb21wKTthPU1hdGgubWluKGEubGVmdCthLmdldFdpZHRoKCksdGhpcy5vdm1hcC5zaXplLnctdGhpcy53Q29tcCk7dmFyIGU9TWF0aC5tYXgoYS1jLDApLGY9TWF0aC5tYXgoZC1iLDApO2U8dGhpcy5taW5SZWN0U2l6ZXx8Zjx0aGlzLm1pblJlY3RTaXplPwoodGhpcy5leHRlbnRSZWN0YW5nbGUuY2xhc3NOYW1lPXRoaXMuZGlzcGxheUNsYXNzK3RoaXMubWluUmVjdERpc3BsYXlDbGFzcyxlPWMrZS8yLXRoaXMubWluUmVjdFNpemUvMix0aGlzLmV4dGVudFJlY3RhbmdsZS5zdHlsZS50b3A9TWF0aC5yb3VuZChiK2YvMi10aGlzLm1pblJlY3RTaXplLzIpKyJweCIsdGhpcy5leHRlbnRSZWN0YW5nbGUuc3R5bGUubGVmdD1NYXRoLnJvdW5kKGUpKyJweCIsdGhpcy5leHRlbnRSZWN0YW5nbGUuc3R5bGUuaGVpZ2h0PXRoaXMubWluUmVjdFNpemUrInB4Iix0aGlzLmV4dGVudFJlY3RhbmdsZS5zdHlsZS53aWR0aD10aGlzLm1pblJlY3RTaXplKyJweCIpOih0aGlzLmV4dGVudFJlY3RhbmdsZS5jbGFzc05hbWU9dGhpcy5kaXNwbGF5Q2xhc3MrIkV4dGVudFJlY3RhbmdsZSIsdGhpcy5leHRlbnRSZWN0YW5nbGUuc3R5bGUudG9wPU1hdGgucm91bmQoYikrInB4Iix0aGlzLmV4dGVudFJlY3RhbmdsZS5zdHlsZS5sZWZ0PU1hdGgucm91bmQoYykrCiJweCIsdGhpcy5leHRlbnRSZWN0YW5nbGUuc3R5bGUuaGVpZ2h0PU1hdGgucm91bmQoZikrInB4Iix0aGlzLmV4dGVudFJlY3RhbmdsZS5zdHlsZS53aWR0aD1NYXRoLnJvdW5kKGUpKyJweCIpO3RoaXMucmVjdFB4Qm91bmRzPW5ldyBPcGVuTGF5ZXJzLkJvdW5kcyhNYXRoLnJvdW5kKGMpLE1hdGgucm91bmQoZCksTWF0aC5yb3VuZChhKSxNYXRoLnJvdW5kKGIpKX0sZ2V0UmVjdEJvdW5kc0Zyb21NYXBCb3VuZHM6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5nZXRPdmVydmlld1B4RnJvbUxvbkxhdCh7bG9uOmEubGVmdCxsYXQ6YS5ib3R0b219KTthPXRoaXMuZ2V0T3ZlcnZpZXdQeEZyb21Mb25MYXQoe2xvbjphLnJpZ2h0LGxhdDphLnRvcH0pO3ZhciBjPW51bGw7YiYmYSYmKGM9bmV3IE9wZW5MYXllcnMuQm91bmRzKGIueCxiLnksYS54LGEueSkpO3JldHVybiBjfSxnZXRNYXBCb3VuZHNGcm9tUmVjdEJvdW5kczpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmdldExvbkxhdEZyb21PdmVydmlld1B4KHt4OmEubGVmdCwKeTphLmJvdHRvbX0pO2E9dGhpcy5nZXRMb25MYXRGcm9tT3ZlcnZpZXdQeCh7eDphLnJpZ2h0LHk6YS50b3B9KTtyZXR1cm4gbmV3IE9wZW5MYXllcnMuQm91bmRzKGIubG9uLGIubGF0LGEubG9uLGEubGF0KX0sZ2V0TG9uTGF0RnJvbU92ZXJ2aWV3UHg6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5vdm1hcC5zaXplLGM9dGhpcy5vdm1hcC5nZXRSZXNvbHV0aW9uKCksZD10aGlzLm92bWFwLmdldEV4dGVudCgpLmdldENlbnRlckxvbkxhdCgpO3JldHVybntsb246ZC5sb24rKGEueC1iLncvMikqYyxsYXQ6ZC5sYXQtKGEueS1iLmgvMikqY319LGdldE92ZXJ2aWV3UHhGcm9tTG9uTGF0OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMub3ZtYXAuZ2V0UmVzb2x1dGlvbigpLGM9dGhpcy5vdm1hcC5nZXRFeHRlbnQoKTtpZihjKXJldHVybnt4Ok1hdGgucm91bmQoMS9iKihhLmxvbi1jLmxlZnQpKSx5Ok1hdGgucm91bmQoMS9iKihjLnRvcC1hLmxhdCkpfX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Db250cm9sLk92ZXJ2aWV3TWFwIn0pO09wZW5MYXllcnMuTGF5ZXI9T3BlbkxheWVycy5DbGFzcyh7aWQ6bnVsbCxuYW1lOm51bGwsZGl2Om51bGwsb3BhY2l0eToxLGFsd2F5c0luUmFuZ2U6bnVsbCxSRVNPTFVUSU9OX1BST1BFUlRJRVM6InNjYWxlcyByZXNvbHV0aW9ucyBtYXhTY2FsZSBtaW5TY2FsZSBtYXhSZXNvbHV0aW9uIG1pblJlc29sdXRpb24gbnVtWm9vbUxldmVscyBtYXhab29tTGV2ZWwiLnNwbGl0KCIgIiksZXZlbnRzOm51bGwsbWFwOm51bGwsaXNCYXNlTGF5ZXI6ITEsYWxwaGE6ITEsZGlzcGxheUluTGF5ZXJTd2l0Y2hlcjohMCx2aXNpYmlsaXR5OiEwLGF0dHJpYnV0aW9uOm51bGwsaW5SYW5nZTohMSxpbWFnZVNpemU6bnVsbCxvcHRpb25zOm51bGwsZXZlbnRMaXN0ZW5lcnM6bnVsbCxndXR0ZXI6MCxwcm9qZWN0aW9uOm51bGwsdW5pdHM6bnVsbCxzY2FsZXM6bnVsbCxyZXNvbHV0aW9uczpudWxsLG1heEV4dGVudDpudWxsLG1pbkV4dGVudDpudWxsLG1heFJlc29sdXRpb246bnVsbCxtaW5SZXNvbHV0aW9uOm51bGwsCm51bVpvb21MZXZlbHM6bnVsbCxtaW5TY2FsZTpudWxsLG1heFNjYWxlOm51bGwsZGlzcGxheU91dHNpZGVNYXhFeHRlbnQ6ITEsd3JhcERhdGVMaW5lOiExLG1ldGFkYXRhOm51bGwsaW5pdGlhbGl6ZTpmdW5jdGlvbihhLGIpe3RoaXMubWV0YWRhdGE9e307Yj1PcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHt9LGIpO251bGwhPXRoaXMuYWx3YXlzSW5SYW5nZSYmKGIuYWx3YXlzSW5SYW5nZT10aGlzLmFsd2F5c0luUmFuZ2UpO3RoaXMuYWRkT3B0aW9ucyhiKTt0aGlzLm5hbWU9YTtpZihudWxsPT10aGlzLmlkJiYodGhpcy5pZD1PcGVuTGF5ZXJzLlV0aWwuY3JlYXRlVW5pcXVlSUQodGhpcy5DTEFTU19OQU1FKyJfIiksdGhpcy5kaXY9T3BlbkxheWVycy5VdGlsLmNyZWF0ZURpdih0aGlzLmlkKSx0aGlzLmRpdi5zdHlsZS53aWR0aD0iMTAwJSIsdGhpcy5kaXYuc3R5bGUuaGVpZ2h0PSIxMDAlIix0aGlzLmRpdi5kaXI9Imx0ciIsdGhpcy5ldmVudHM9bmV3IE9wZW5MYXllcnMuRXZlbnRzKHRoaXMsCnRoaXMuZGl2KSx0aGlzLmV2ZW50TGlzdGVuZXJzIGluc3RhbmNlb2YgT2JqZWN0KSl0aGlzLmV2ZW50cy5vbih0aGlzLmV2ZW50TGlzdGVuZXJzKX0sZGVzdHJveTpmdW5jdGlvbihhKXtudWxsPT1hJiYoYT0hMCk7bnVsbCE9dGhpcy5tYXAmJnRoaXMubWFwLnJlbW92ZUxheWVyKHRoaXMsYSk7dGhpcy5vcHRpb25zPXRoaXMuZGl2PXRoaXMubmFtZT10aGlzLm1hcD10aGlzLnByb2plY3Rpb249bnVsbDt0aGlzLmV2ZW50cyYmKHRoaXMuZXZlbnRMaXN0ZW5lcnMmJnRoaXMuZXZlbnRzLnVuKHRoaXMuZXZlbnRMaXN0ZW5lcnMpLHRoaXMuZXZlbnRzLmRlc3Ryb3koKSk7dGhpcy5ldmVudHM9dGhpcy5ldmVudExpc3RlbmVycz1udWxsfSxjbG9uZTpmdW5jdGlvbihhKXtudWxsPT1hJiYoYT1uZXcgT3BlbkxheWVycy5MYXllcih0aGlzLm5hbWUsdGhpcy5nZXRPcHRpb25zKCkpKTtPcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyhhLHRoaXMpO2EubWFwPW51bGw7cmV0dXJuIGF9LApnZXRPcHRpb25zOmZ1bmN0aW9uKCl7dmFyIGE9e30sYjtmb3IoYiBpbiB0aGlzLm9wdGlvbnMpYVtiXT10aGlzW2JdO3JldHVybiBhfSxzZXROYW1lOmZ1bmN0aW9uKGEpe2EhPXRoaXMubmFtZSYmKHRoaXMubmFtZT1hLG51bGwhPXRoaXMubWFwJiZ0aGlzLm1hcC5ldmVudHMudHJpZ2dlckV2ZW50KCJjaGFuZ2VsYXllciIse2xheWVyOnRoaXMscHJvcGVydHk6Im5hbWUifSkpfSxhZGRPcHRpb25zOmZ1bmN0aW9uKGEsYil7bnVsbD09dGhpcy5vcHRpb25zJiYodGhpcy5vcHRpb25zPXt9KTthJiYoInN0cmluZyI9PXR5cGVvZiBhLnByb2plY3Rpb24mJihhLnByb2plY3Rpb249bmV3IE9wZW5MYXllcnMuUHJvamVjdGlvbihhLnByb2plY3Rpb24pKSxhLnByb2plY3Rpb24mJk9wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKGEsT3BlbkxheWVycy5Qcm9qZWN0aW9uLmRlZmF1bHRzW2EucHJvamVjdGlvbi5nZXRDb2RlKCldKSwhYS5tYXhFeHRlbnR8fGEubWF4RXh0ZW50IGluc3RhbmNlb2YKT3BlbkxheWVycy5Cb3VuZHN8fChhLm1heEV4dGVudD1uZXcgT3BlbkxheWVycy5Cb3VuZHMoYS5tYXhFeHRlbnQpKSwhYS5taW5FeHRlbnR8fGEubWluRXh0ZW50IGluc3RhbmNlb2YgT3BlbkxheWVycy5Cb3VuZHN8fChhLm1pbkV4dGVudD1uZXcgT3BlbkxheWVycy5Cb3VuZHMoYS5taW5FeHRlbnQpKSk7T3BlbkxheWVycy5VdGlsLmV4dGVuZCh0aGlzLm9wdGlvbnMsYSk7T3BlbkxheWVycy5VdGlsLmV4dGVuZCh0aGlzLGEpO3RoaXMucHJvamVjdGlvbiYmdGhpcy5wcm9qZWN0aW9uLmdldFVuaXRzKCkmJih0aGlzLnVuaXRzPXRoaXMucHJvamVjdGlvbi5nZXRVbml0cygpKTtpZih0aGlzLm1hcCl7dmFyIGM9dGhpcy5tYXAuZ2V0UmVzb2x1dGlvbigpLGQ9dGhpcy5SRVNPTFVUSU9OX1BST1BFUlRJRVMuY29uY2F0KFsicHJvamVjdGlvbiIsInVuaXRzIiwibWluRXh0ZW50IiwibWF4RXh0ZW50Il0pLGU7Zm9yKGUgaW4gYSlpZihhLmhhc093blByb3BlcnR5KGUpJiYwPD1PcGVuTGF5ZXJzLlV0aWwuaW5kZXhPZihkLAplKSl7dGhpcy5pbml0UmVzb2x1dGlvbnMoKTtiJiZ0aGlzLm1hcC5iYXNlTGF5ZXI9PT10aGlzJiYodGhpcy5tYXAuc2V0Q2VudGVyKHRoaXMubWFwLmdldENlbnRlcigpLHRoaXMubWFwLmdldFpvb21Gb3JSZXNvbHV0aW9uKGMpLCExLCEwKSx0aGlzLm1hcC5ldmVudHMudHJpZ2dlckV2ZW50KCJjaGFuZ2ViYXNlbGF5ZXIiLHtsYXllcjp0aGlzfSkpO2JyZWFrfX19LG9uTWFwUmVzaXplOmZ1bmN0aW9uKCl7fSxyZWRyYXc6ZnVuY3Rpb24oKXt2YXIgYT0hMTtpZih0aGlzLm1hcCl7dGhpcy5pblJhbmdlPXRoaXMuY2FsY3VsYXRlSW5SYW5nZSgpO3ZhciBiPXRoaXMuZ2V0RXh0ZW50KCk7YiYmKHRoaXMuaW5SYW5nZSYmdGhpcy52aXNpYmlsaXR5KSYmKHRoaXMubW92ZVRvKGIsITAsITEpLHRoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgibW92ZWVuZCIse3pvb21DaGFuZ2VkOiEwfSksYT0hMCl9cmV0dXJuIGF9LG1vdmVUbzpmdW5jdGlvbihhLGIsYyl7YT10aGlzLnZpc2liaWxpdHk7CnRoaXMuaXNCYXNlTGF5ZXJ8fChhPWEmJnRoaXMuaW5SYW5nZSk7dGhpcy5kaXNwbGF5KGEpfSxtb3ZlQnlQeDpmdW5jdGlvbihhLGIpe30sc2V0TWFwOmZ1bmN0aW9uKGEpe251bGw9PXRoaXMubWFwJiYodGhpcy5tYXA9YSx0aGlzLm1heEV4dGVudD10aGlzLm1heEV4dGVudHx8dGhpcy5tYXAubWF4RXh0ZW50LHRoaXMubWluRXh0ZW50PXRoaXMubWluRXh0ZW50fHx0aGlzLm1hcC5taW5FeHRlbnQsdGhpcy5wcm9qZWN0aW9uPXRoaXMucHJvamVjdGlvbnx8dGhpcy5tYXAucHJvamVjdGlvbiwic3RyaW5nIj09dHlwZW9mIHRoaXMucHJvamVjdGlvbiYmKHRoaXMucHJvamVjdGlvbj1uZXcgT3BlbkxheWVycy5Qcm9qZWN0aW9uKHRoaXMucHJvamVjdGlvbikpLHRoaXMudW5pdHM9dGhpcy5wcm9qZWN0aW9uLmdldFVuaXRzKCl8fHRoaXMudW5pdHN8fHRoaXMubWFwLnVuaXRzLHRoaXMuaW5pdFJlc29sdXRpb25zKCksdGhpcy5pc0Jhc2VMYXllcnx8KHRoaXMuaW5SYW5nZT10aGlzLmNhbGN1bGF0ZUluUmFuZ2UoKSwKdGhpcy5kaXYuc3R5bGUuZGlzcGxheT10aGlzLnZpc2liaWxpdHkmJnRoaXMuaW5SYW5nZT8iIjoibm9uZSIpLHRoaXMuc2V0VGlsZVNpemUoKSl9LGFmdGVyQWRkOmZ1bmN0aW9uKCl7fSxyZW1vdmVNYXA6ZnVuY3Rpb24oYSl7fSxnZXRJbWFnZVNpemU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuaW1hZ2VTaXplfHx0aGlzLnRpbGVTaXplfSxzZXRUaWxlU2l6ZTpmdW5jdGlvbihhKXt0aGlzLnRpbGVTaXplPWE9YT9hOnRoaXMudGlsZVNpemU/dGhpcy50aWxlU2l6ZTp0aGlzLm1hcC5nZXRUaWxlU2l6ZSgpO3RoaXMuZ3V0dGVyJiYodGhpcy5pbWFnZVNpemU9bmV3IE9wZW5MYXllcnMuU2l6ZShhLncrMip0aGlzLmd1dHRlcixhLmgrMip0aGlzLmd1dHRlcikpfSxnZXRWaXNpYmlsaXR5OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudmlzaWJpbGl0eX0sc2V0VmlzaWJpbGl0eTpmdW5jdGlvbihhKXthIT10aGlzLnZpc2liaWxpdHkmJih0aGlzLnZpc2liaWxpdHk9YSx0aGlzLmRpc3BsYXkoYSksCnRoaXMucmVkcmF3KCksbnVsbCE9dGhpcy5tYXAmJnRoaXMubWFwLmV2ZW50cy50cmlnZ2VyRXZlbnQoImNoYW5nZWxheWVyIix7bGF5ZXI6dGhpcyxwcm9wZXJ0eToidmlzaWJpbGl0eSJ9KSx0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoInZpc2liaWxpdHljaGFuZ2VkIikpfSxkaXNwbGF5OmZ1bmN0aW9uKGEpe2EhPSgibm9uZSIhPXRoaXMuZGl2LnN0eWxlLmRpc3BsYXkpJiYodGhpcy5kaXYuc3R5bGUuZGlzcGxheT1hJiZ0aGlzLmNhbGN1bGF0ZUluUmFuZ2UoKT8iYmxvY2siOiJub25lIil9LGNhbGN1bGF0ZUluUmFuZ2U6ZnVuY3Rpb24oKXt2YXIgYT0hMTt0aGlzLmFsd2F5c0luUmFuZ2U/YT0hMDp0aGlzLm1hcCYmKGE9dGhpcy5tYXAuZ2V0UmVzb2x1dGlvbigpLGE9YT49dGhpcy5taW5SZXNvbHV0aW9uJiZhPD10aGlzLm1heFJlc29sdXRpb24pO3JldHVybiBhfSxzZXRJc0Jhc2VMYXllcjpmdW5jdGlvbihhKXthIT10aGlzLmlzQmFzZUxheWVyJiYodGhpcy5pc0Jhc2VMYXllcj0KYSxudWxsIT10aGlzLm1hcCYmdGhpcy5tYXAuZXZlbnRzLnRyaWdnZXJFdmVudCgiY2hhbmdlYmFzZWxheWVyIix7bGF5ZXI6dGhpc30pKX0saW5pdFJlc29sdXRpb25zOmZ1bmN0aW9uKCl7dmFyIGEsYixjLGQ9e30sZT0hMDthPTA7Zm9yKGI9dGhpcy5SRVNPTFVUSU9OX1BST1BFUlRJRVMubGVuZ3RoO2E8YjthKyspYz10aGlzLlJFU09MVVRJT05fUFJPUEVSVElFU1thXSxkW2NdPXRoaXMub3B0aW9uc1tjXSxlJiZ0aGlzLm9wdGlvbnNbY10mJihlPSExKTtudWxsPT10aGlzLm9wdGlvbnMuYWx3YXlzSW5SYW5nZSYmKHRoaXMuYWx3YXlzSW5SYW5nZT1lKTtudWxsPT1kLnJlc29sdXRpb25zJiYoZC5yZXNvbHV0aW9ucz10aGlzLnJlc29sdXRpb25zRnJvbVNjYWxlcyhkLnNjYWxlcykpO251bGw9PWQucmVzb2x1dGlvbnMmJihkLnJlc29sdXRpb25zPXRoaXMuY2FsY3VsYXRlUmVzb2x1dGlvbnMoZCkpO2lmKG51bGw9PWQucmVzb2x1dGlvbnMpe2E9MDtmb3IoYj10aGlzLlJFU09MVVRJT05fUFJPUEVSVElFUy5sZW5ndGg7YTwKYjthKyspYz10aGlzLlJFU09MVVRJT05fUFJPUEVSVElFU1thXSxkW2NdPW51bGwhPXRoaXMub3B0aW9uc1tjXT90aGlzLm9wdGlvbnNbY106dGhpcy5tYXBbY107bnVsbD09ZC5yZXNvbHV0aW9ucyYmKGQucmVzb2x1dGlvbnM9dGhpcy5yZXNvbHV0aW9uc0Zyb21TY2FsZXMoZC5zY2FsZXMpKTtudWxsPT1kLnJlc29sdXRpb25zJiYoZC5yZXNvbHV0aW9ucz10aGlzLmNhbGN1bGF0ZVJlc29sdXRpb25zKGQpKX12YXIgZjt0aGlzLm9wdGlvbnMubWF4UmVzb2x1dGlvbiYmImF1dG8iIT09dGhpcy5vcHRpb25zLm1heFJlc29sdXRpb24mJihmPXRoaXMub3B0aW9ucy5tYXhSZXNvbHV0aW9uKTt0aGlzLm9wdGlvbnMubWluU2NhbGUmJihmPU9wZW5MYXllcnMuVXRpbC5nZXRSZXNvbHV0aW9uRnJvbVNjYWxlKHRoaXMub3B0aW9ucy5taW5TY2FsZSx0aGlzLnVuaXRzKSk7dmFyIGc7dGhpcy5vcHRpb25zLm1pblJlc29sdXRpb24mJiJhdXRvIiE9PXRoaXMub3B0aW9ucy5taW5SZXNvbHV0aW9uJiYKKGc9dGhpcy5vcHRpb25zLm1pblJlc29sdXRpb24pO3RoaXMub3B0aW9ucy5tYXhTY2FsZSYmKGc9T3BlbkxheWVycy5VdGlsLmdldFJlc29sdXRpb25Gcm9tU2NhbGUodGhpcy5vcHRpb25zLm1heFNjYWxlLHRoaXMudW5pdHMpKTtkLnJlc29sdXRpb25zJiYoZC5yZXNvbHV0aW9ucy5zb3J0KGZ1bmN0aW9uKGEsYil7cmV0dXJuIGItYX0pLGZ8fChmPWQucmVzb2x1dGlvbnNbMF0pLGd8fChnPWQucmVzb2x1dGlvbnNbZC5yZXNvbHV0aW9ucy5sZW5ndGgtMV0pKTtpZih0aGlzLnJlc29sdXRpb25zPWQucmVzb2x1dGlvbnMpe2I9dGhpcy5yZXNvbHV0aW9ucy5sZW5ndGg7dGhpcy5zY2FsZXM9QXJyYXkoYik7Zm9yKGE9MDthPGI7YSsrKXRoaXMuc2NhbGVzW2FdPU9wZW5MYXllcnMuVXRpbC5nZXRTY2FsZUZyb21SZXNvbHV0aW9uKHRoaXMucmVzb2x1dGlvbnNbYV0sdGhpcy51bml0cyk7dGhpcy5udW1ab29tTGV2ZWxzPWJ9aWYodGhpcy5taW5SZXNvbHV0aW9uPWcpdGhpcy5tYXhTY2FsZT0KT3BlbkxheWVycy5VdGlsLmdldFNjYWxlRnJvbVJlc29sdXRpb24oZyx0aGlzLnVuaXRzKTtpZih0aGlzLm1heFJlc29sdXRpb249Zil0aGlzLm1pblNjYWxlPU9wZW5MYXllcnMuVXRpbC5nZXRTY2FsZUZyb21SZXNvbHV0aW9uKGYsdGhpcy51bml0cyl9LHJlc29sdXRpb25zRnJvbVNjYWxlczpmdW5jdGlvbihhKXtpZihudWxsIT1hKXt2YXIgYixjLGQ7ZD1hLmxlbmd0aDtiPUFycmF5KGQpO2ZvcihjPTA7YzxkO2MrKyliW2NdPU9wZW5MYXllcnMuVXRpbC5nZXRSZXNvbHV0aW9uRnJvbVNjYWxlKGFbY10sdGhpcy51bml0cyk7cmV0dXJuIGJ9fSxjYWxjdWxhdGVSZXNvbHV0aW9uczpmdW5jdGlvbihhKXt2YXIgYixjLGQ9YS5tYXhSZXNvbHV0aW9uO251bGwhPWEubWluU2NhbGU/ZD1PcGVuTGF5ZXJzLlV0aWwuZ2V0UmVzb2x1dGlvbkZyb21TY2FsZShhLm1pblNjYWxlLHRoaXMudW5pdHMpOiJhdXRvIj09ZCYmbnVsbCE9dGhpcy5tYXhFeHRlbnQmJihiPXRoaXMubWFwLmdldFNpemUoKSwKYz10aGlzLm1heEV4dGVudC5nZXRXaWR0aCgpL2IudyxiPXRoaXMubWF4RXh0ZW50LmdldEhlaWdodCgpL2IuaCxkPU1hdGgubWF4KGMsYikpO2M9YS5taW5SZXNvbHV0aW9uO251bGwhPWEubWF4U2NhbGU/Yz1PcGVuTGF5ZXJzLlV0aWwuZ2V0UmVzb2x1dGlvbkZyb21TY2FsZShhLm1heFNjYWxlLHRoaXMudW5pdHMpOiJhdXRvIj09YS5taW5SZXNvbHV0aW9uJiZudWxsIT10aGlzLm1pbkV4dGVudCYmKGI9dGhpcy5tYXAuZ2V0U2l6ZSgpLGM9dGhpcy5taW5FeHRlbnQuZ2V0V2lkdGgoKS9iLncsYj10aGlzLm1pbkV4dGVudC5nZXRIZWlnaHQoKS9iLmgsYz1NYXRoLm1heChjLGIpKTsibnVtYmVyIiE9PXR5cGVvZiBkJiYoIm51bWJlciIhPT10eXBlb2YgYyYmbnVsbCE9dGhpcy5tYXhFeHRlbnQpJiYoZD10aGlzLm1hcC5nZXRUaWxlU2l6ZSgpLGQ9TWF0aC5tYXgodGhpcy5tYXhFeHRlbnQuZ2V0V2lkdGgoKS9kLncsdGhpcy5tYXhFeHRlbnQuZ2V0SGVpZ2h0KCkvZC5oKSk7Yj1hLm1heFpvb21MZXZlbDsKYT1hLm51bVpvb21MZXZlbHM7Im51bWJlciI9PT10eXBlb2YgYyYmIm51bWJlciI9PT10eXBlb2YgZCYmdm9pZCAwPT09YT9hPU1hdGguZmxvb3IoTWF0aC5sb2coZC9jKS9NYXRoLmxvZygyKSkrMTp2b2lkIDA9PT1hJiZudWxsIT1iJiYoYT1iKzEpO2lmKCEoIm51bWJlciIhPT10eXBlb2YgYXx8MD49YXx8Im51bWJlciIhPT10eXBlb2YgZCYmIm51bWJlciIhPT10eXBlb2YgYykpe2I9QXJyYXkoYSk7dmFyIGU9MjsibnVtYmVyIj09dHlwZW9mIGMmJiJudW1iZXIiPT10eXBlb2YgZCYmKGU9TWF0aC5wb3coZC9jLDEvKGEtMSkpKTt2YXIgZjtpZigibnVtYmVyIj09PXR5cGVvZiBkKWZvcihmPTA7ZjxhO2YrKyliW2ZdPWQvTWF0aC5wb3coZSxmKTtlbHNlIGZvcihmPTA7ZjxhO2YrKyliW2EtMS1mXT1jKk1hdGgucG93KGUsZik7cmV0dXJuIGJ9fSxnZXRSZXNvbHV0aW9uOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5tYXAuZ2V0Wm9vbSgpO3JldHVybiB0aGlzLmdldFJlc29sdXRpb25Gb3Jab29tKGEpfSwKZ2V0RXh0ZW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWFwLmNhbGN1bGF0ZUJvdW5kcygpfSxnZXRab29tRm9yRXh0ZW50OmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5tYXAuZ2V0U2l6ZSgpLGM9TWF0aC5tYXgoYS5nZXRXaWR0aCgpL2MudyxhLmdldEhlaWdodCgpL2MuaCk7cmV0dXJuIHRoaXMuZ2V0Wm9vbUZvclJlc29sdXRpb24oYyxiKX0sZ2V0RGF0YUV4dGVudDpmdW5jdGlvbigpe30sZ2V0UmVzb2x1dGlvbkZvclpvb206ZnVuY3Rpb24oYSl7YT1NYXRoLm1heCgwLE1hdGgubWluKGEsdGhpcy5yZXNvbHV0aW9ucy5sZW5ndGgtMSkpO2lmKHRoaXMubWFwLmZyYWN0aW9uYWxab29tKXt2YXIgYj1NYXRoLmZsb29yKGEpLGM9TWF0aC5jZWlsKGEpO2E9dGhpcy5yZXNvbHV0aW9uc1tiXS0oYS1iKSoodGhpcy5yZXNvbHV0aW9uc1tiXS10aGlzLnJlc29sdXRpb25zW2NdKX1lbHNlIGE9dGhpcy5yZXNvbHV0aW9uc1tNYXRoLnJvdW5kKGEpXTtyZXR1cm4gYX0sZ2V0Wm9vbUZvclJlc29sdXRpb246ZnVuY3Rpb24oYSwKYil7dmFyIGMsZDtpZih0aGlzLm1hcC5mcmFjdGlvbmFsWm9vbSl7dmFyIGU9MCxmPXRoaXMucmVzb2x1dGlvbnNbZV0sZz10aGlzLnJlc29sdXRpb25zW3RoaXMucmVzb2x1dGlvbnMubGVuZ3RoLTFdLGg7Yz0wO2ZvcihkPXRoaXMucmVzb2x1dGlvbnMubGVuZ3RoO2M8ZDsrK2MpaWYoaD10aGlzLnJlc29sdXRpb25zW2NdLGg+PWEmJihmPWgsZT1jKSxoPD1hKXtnPWg7YnJlYWt9Yz1mLWc7Yz0wPGM/ZSsoZi1hKS9jOmV9ZWxzZXtmPU51bWJlci5QT1NJVElWRV9JTkZJTklUWTtjPTA7Zm9yKGQ9dGhpcy5yZXNvbHV0aW9ucy5sZW5ndGg7YzxkO2MrKylpZihiKXtlPU1hdGguYWJzKHRoaXMucmVzb2x1dGlvbnNbY10tYSk7aWYoZT5mKWJyZWFrO2Y9ZX1lbHNlIGlmKHRoaXMucmVzb2x1dGlvbnNbY108YSlicmVhaztjPU1hdGgubWF4KDAsYy0xKX1yZXR1cm4gY30sZ2V0TG9uTGF0RnJvbVZpZXdQb3J0UHg6ZnVuY3Rpb24oYSl7dmFyIGI9bnVsbCxjPXRoaXMubWFwO2lmKG51bGwhPQphJiZjLm1pblB4KXt2YXIgYj1jLmdldFJlc29sdXRpb24oKSxkPWMuZ2V0TWF4RXh0ZW50KHtyZXN0cmljdGVkOiEwfSksYj1uZXcgT3BlbkxheWVycy5Mb25MYXQoKGEueC1jLm1pblB4LngpKmIrZC5sZWZ0LChjLm1pblB4LnktYS55KSpiK2QudG9wKTt0aGlzLndyYXBEYXRlTGluZSYmKGI9Yi53cmFwRGF0ZUxpbmUodGhpcy5tYXhFeHRlbnQpKX1yZXR1cm4gYn0sZ2V0Vmlld1BvcnRQeEZyb21Mb25MYXQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz1udWxsO251bGwhPWEmJihiPWJ8fHRoaXMubWFwLmdldFJlc29sdXRpb24oKSxjPXRoaXMubWFwLmNhbGN1bGF0ZUJvdW5kcyhudWxsLGIpLGM9bmV3IE9wZW5MYXllcnMuUGl4ZWwoMS9iKihhLmxvbi1jLmxlZnQpLDEvYiooYy50b3AtYS5sYXQpKSk7cmV0dXJuIGN9LHNldE9wYWNpdHk6ZnVuY3Rpb24oYSl7aWYoYSE9dGhpcy5vcGFjaXR5KXt0aGlzLm9wYWNpdHk9YTtmb3IodmFyIGI9dGhpcy5kaXYuY2hpbGROb2RlcyxjPTAsZD1iLmxlbmd0aDtjPApkOysrYyl7dmFyIGU9YltjXS5maXJzdENoaWxkfHxiW2NdLGY9YltjXS5sYXN0Q2hpbGQ7ZiYmImlmcmFtZSI9PT1mLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkmJihlPWYucGFyZW50Tm9kZSk7T3BlbkxheWVycy5VdGlsLm1vZGlmeURPTUVsZW1lbnQoZSxudWxsLG51bGwsbnVsbCxudWxsLG51bGwsbnVsbCxhKX1udWxsIT10aGlzLm1hcCYmdGhpcy5tYXAuZXZlbnRzLnRyaWdnZXJFdmVudCgiY2hhbmdlbGF5ZXIiLHtsYXllcjp0aGlzLHByb3BlcnR5OiJvcGFjaXR5In0pfX0sZ2V0WkluZGV4OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGl2LnN0eWxlLnpJbmRleH0sc2V0WkluZGV4OmZ1bmN0aW9uKGEpe3RoaXMuZGl2LnN0eWxlLnpJbmRleD1hfSxhZGp1c3RCb3VuZHM6ZnVuY3Rpb24oYSl7aWYodGhpcy5ndXR0ZXIpe3ZhciBiPXRoaXMuZ3V0dGVyKnRoaXMubWFwLmdldFJlc29sdXRpb24oKTthPW5ldyBPcGVuTGF5ZXJzLkJvdW5kcyhhLmxlZnQtYixhLmJvdHRvbS1iLGEucmlnaHQrCmIsYS50b3ArYil9dGhpcy53cmFwRGF0ZUxpbmUmJihiPXtyaWdodFRvbGVyYW5jZTp0aGlzLmdldFJlc29sdXRpb24oKSxsZWZ0VG9sZXJhbmNlOnRoaXMuZ2V0UmVzb2x1dGlvbigpfSxhPWEud3JhcERhdGVMaW5lKHRoaXMubWF4RXh0ZW50LGIpKTtyZXR1cm4gYX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5MYXllciJ9KTtPcGVuTGF5ZXJzLkxheWVyLlNwaGVyaWNhbE1lcmNhdG9yPXtnZXRFeHRlbnQ6ZnVuY3Rpb24oKXt2YXIgYT1udWxsO3JldHVybiBhPXRoaXMuc3BoZXJpY2FsTWVyY2F0b3I/dGhpcy5tYXAuY2FsY3VsYXRlQm91bmRzKCk6T3BlbkxheWVycy5MYXllci5GaXhlZFpvb21MZXZlbHMucHJvdG90eXBlLmdldEV4dGVudC5hcHBseSh0aGlzKX0sZ2V0TG9uTGF0RnJvbVZpZXdQb3J0UHg6ZnVuY3Rpb24oYSl7cmV0dXJuIE9wZW5MYXllcnMuTGF5ZXIucHJvdG90eXBlLmdldExvbkxhdEZyb21WaWV3UG9ydFB4LmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sZ2V0Vmlld1BvcnRQeEZyb21Mb25MYXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIE9wZW5MYXllcnMuTGF5ZXIucHJvdG90eXBlLmdldFZpZXdQb3J0UHhGcm9tTG9uTGF0LmFwcGx5KHRoaXMsYXJndW1lbnRzKX0saW5pdE1lcmNhdG9yUGFyYW1ldGVyczpmdW5jdGlvbigpe3RoaXMuUkVTT0xVVElPTlM9W107Zm9yKHZhciBhPTA7YTw9dGhpcy5NQVhfWk9PTV9MRVZFTDsrK2EpdGhpcy5SRVNPTFVUSU9OU1thXT0KMTU2NTQzLjAzMzkwNjI1L01hdGgucG93KDIsYSk7dGhpcy51bml0cz0ibSI7dGhpcy5wcm9qZWN0aW9uPXRoaXMucHJvamVjdGlvbnx8IkVQU0c6OTAwOTEzIn0sZm9yd2FyZE1lcmNhdG9yOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IE9wZW5MYXllcnMuUHJvamVjdGlvbigiRVBTRzo0MzI2IiksYj1uZXcgT3BlbkxheWVycy5Qcm9qZWN0aW9uKCJFUFNHOjkwMDkxMyIpO3JldHVybiBmdW5jdGlvbihjLGQpe3ZhciBlPU9wZW5MYXllcnMuUHJvamVjdGlvbi50cmFuc2Zvcm0oe3g6Yyx5OmR9LGEsYik7cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLkxvbkxhdChlLngsZS55KX19KCksaW52ZXJzZU1lcmNhdG9yOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IE9wZW5MYXllcnMuUHJvamVjdGlvbigiRVBTRzo0MzI2IiksYj1uZXcgT3BlbkxheWVycy5Qcm9qZWN0aW9uKCJFUFNHOjkwMDkxMyIpO3JldHVybiBmdW5jdGlvbihjLGQpe3ZhciBlPU9wZW5MYXllcnMuUHJvamVjdGlvbi50cmFuc2Zvcm0oe3g6YywKeTpkfSxiLGEpO3JldHVybiBuZXcgT3BlbkxheWVycy5Mb25MYXQoZS54LGUueSl9fSgpfTtPcGVuTGF5ZXJzLkxheWVyLkV2ZW50UGFuZT1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuTGF5ZXIse3Ntb290aERyYWdQYW46ITAsaXNCYXNlTGF5ZXI6ITAsaXNGaXhlZDohMCxwYW5lOm51bGwsbWFwT2JqZWN0Om51bGwsaW5pdGlhbGl6ZTpmdW5jdGlvbihhLGIpe09wZW5MYXllcnMuTGF5ZXIucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxhcmd1bWVudHMpO251bGw9PXRoaXMucGFuZSYmKHRoaXMucGFuZT1PcGVuTGF5ZXJzLlV0aWwuY3JlYXRlRGl2KHRoaXMuZGl2LmlkKyJfRXZlbnRQYW5lIikpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5wYW5lPXRoaXMubWFwT2JqZWN0PW51bGw7T3BlbkxheWVycy5MYXllci5wcm90b3R5cGUuZGVzdHJveS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LHNldE1hcDpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLkxheWVyLnByb3RvdHlwZS5zZXRNYXAuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMucGFuZS5zdHlsZS56SW5kZXg9CnBhcnNlSW50KHRoaXMuZGl2LnN0eWxlLnpJbmRleCkrMTt0aGlzLnBhbmUuc3R5bGUuZGlzcGxheT10aGlzLmRpdi5zdHlsZS5kaXNwbGF5O3RoaXMucGFuZS5zdHlsZS53aWR0aD0iMTAwJSI7dGhpcy5wYW5lLnN0eWxlLmhlaWdodD0iMTAwJSI7Im1zaWUiPT1PcGVuTGF5ZXJzLkJST1dTRVJfTkFNRSYmKHRoaXMucGFuZS5zdHlsZS5iYWNrZ3JvdW5kPSJ1cmwoIitPcGVuTGF5ZXJzLlV0aWwuZ2V0SW1hZ2VMb2NhdGlvbigiYmxhbmsuZ2lmIikrIikiKTt0aGlzLmlzRml4ZWQ/dGhpcy5tYXAudmlld1BvcnREaXYuYXBwZW5kQ2hpbGQodGhpcy5wYW5lKTp0aGlzLm1hcC5sYXllckNvbnRhaW5lckRpdi5hcHBlbmRDaGlsZCh0aGlzLnBhbmUpO3RoaXMubG9hZE1hcE9iamVjdCgpO251bGw9PXRoaXMubWFwT2JqZWN0JiZ0aGlzLmxvYWRXYXJuaW5nTWVzc2FnZSgpfSxyZW1vdmVNYXA6ZnVuY3Rpb24oYSl7dGhpcy5wYW5lJiZ0aGlzLnBhbmUucGFyZW50Tm9kZSYmdGhpcy5wYW5lLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5wYW5lKTsKT3BlbkxheWVycy5MYXllci5wcm90b3R5cGUucmVtb3ZlTWFwLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sbG9hZFdhcm5pbmdNZXNzYWdlOmZ1bmN0aW9uKCl7dGhpcy5kaXYuc3R5bGUuYmFja2dyb3VuZENvbG9yPSJkYXJrYmx1ZSI7dmFyIGE9dGhpcy5tYXAuZ2V0U2l6ZSgpLGI9TWF0aC5taW4oYS53LDMwMCksYz1NYXRoLm1pbihhLmgsMjAwKSxiPW5ldyBPcGVuTGF5ZXJzLlNpemUoYixjKSxhPShuZXcgT3BlbkxheWVycy5QaXhlbChhLncvMixhLmgvMikpLmFkZCgtYi53LzIsLWIuaC8yKSxhPU9wZW5MYXllcnMuVXRpbC5jcmVhdGVEaXYodGhpcy5uYW1lKyJfd2FybmluZyIsYSxiLG51bGwsbnVsbCxudWxsLCJhdXRvIik7YS5zdHlsZS5wYWRkaW5nPSI3cHgiO2Euc3R5bGUuYmFja2dyb3VuZENvbG9yPSJ5ZWxsb3ciO2EuaW5uZXJIVE1MPXRoaXMuZ2V0V2FybmluZ0hUTUwoKTt0aGlzLmRpdi5hcHBlbmRDaGlsZChhKX0sZ2V0V2FybmluZ0hUTUw6ZnVuY3Rpb24oKXtyZXR1cm4iIn0sCmRpc3BsYXk6ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5MYXllci5wcm90b3R5cGUuZGlzcGxheS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5wYW5lLnN0eWxlLmRpc3BsYXk9dGhpcy5kaXYuc3R5bGUuZGlzcGxheX0sc2V0WkluZGV4OmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuTGF5ZXIucHJvdG90eXBlLnNldFpJbmRleC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5wYW5lLnN0eWxlLnpJbmRleD1wYXJzZUludCh0aGlzLmRpdi5zdHlsZS56SW5kZXgpKzF9LG1vdmVCeVB4OmZ1bmN0aW9uKGEsYil7T3BlbkxheWVycy5MYXllci5wcm90b3R5cGUubW92ZUJ5UHguYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMuZHJhZ1Bhbk1hcE9iamVjdD90aGlzLmRyYWdQYW5NYXBPYmplY3QoYSwtYik6dGhpcy5tb3ZlVG8odGhpcy5tYXAuZ2V0Q2FjaGVkQ2VudGVyKCkpfSxtb3ZlVG86ZnVuY3Rpb24oYSxiLGMpe09wZW5MYXllcnMuTGF5ZXIucHJvdG90eXBlLm1vdmVUby5hcHBseSh0aGlzLAphcmd1bWVudHMpO2lmKG51bGwhPXRoaXMubWFwT2JqZWN0KXt2YXIgZD10aGlzLm1hcC5nZXRDZW50ZXIoKSxlPXRoaXMubWFwLmdldFpvb20oKTtpZihudWxsIT1kKXt2YXIgZj10aGlzLmdldE1hcE9iamVjdENlbnRlcigpLGY9dGhpcy5nZXRPTExvbkxhdEZyb21NYXBPYmplY3RMb25MYXQoZiksZz10aGlzLmdldE1hcE9iamVjdFpvb20oKSxnPXRoaXMuZ2V0T0xab29tRnJvbU1hcE9iamVjdFpvb20oZyk7ZC5lcXVhbHMoZikmJmU9PWd8fCghYiYmZiYmdGhpcy5kcmFnUGFuTWFwT2JqZWN0JiZ0aGlzLnNtb290aERyYWdQYW4/KGU9dGhpcy5tYXAuZ2V0Vmlld1BvcnRQeEZyb21Mb25MYXQoZiksZD10aGlzLm1hcC5nZXRWaWV3UG9ydFB4RnJvbUxvbkxhdChkKSx0aGlzLmRyYWdQYW5NYXBPYmplY3QoZC54LWUueCxlLnktZC55KSk6KGQ9dGhpcy5nZXRNYXBPYmplY3RMb25MYXRGcm9tT0xMb25MYXQoZCksZT10aGlzLmdldE1hcE9iamVjdFpvb21Gcm9tT0xab29tKGUpLHRoaXMuc2V0TWFwT2JqZWN0Q2VudGVyKGQsCmUsYykpKX19fSxnZXRMb25MYXRGcm9tVmlld1BvcnRQeDpmdW5jdGlvbihhKXt2YXIgYj1udWxsO251bGwhPXRoaXMubWFwT2JqZWN0JiZudWxsIT10aGlzLmdldE1hcE9iamVjdENlbnRlcigpJiYoYT10aGlzLmdldE1hcE9iamVjdFBpeGVsRnJvbU9MUGl4ZWwoYSksYT10aGlzLmdldE1hcE9iamVjdExvbkxhdEZyb21NYXBPYmplY3RQaXhlbChhKSxiPXRoaXMuZ2V0T0xMb25MYXRGcm9tTWFwT2JqZWN0TG9uTGF0KGEpKTtyZXR1cm4gYn0sZ2V0Vmlld1BvcnRQeEZyb21Mb25MYXQ6ZnVuY3Rpb24oYSl7dmFyIGI9bnVsbDtudWxsIT10aGlzLm1hcE9iamVjdCYmbnVsbCE9dGhpcy5nZXRNYXBPYmplY3RDZW50ZXIoKSYmKGE9dGhpcy5nZXRNYXBPYmplY3RMb25MYXRGcm9tT0xMb25MYXQoYSksYT10aGlzLmdldE1hcE9iamVjdFBpeGVsRnJvbU1hcE9iamVjdExvbkxhdChhKSxiPXRoaXMuZ2V0T0xQaXhlbEZyb21NYXBPYmplY3RQaXhlbChhKSk7cmV0dXJuIGJ9LGdldE9MTG9uTGF0RnJvbU1hcE9iamVjdExvbkxhdDpmdW5jdGlvbihhKXt2YXIgYj0KbnVsbDtudWxsIT1hJiYoYj10aGlzLmdldExvbmdpdHVkZUZyb21NYXBPYmplY3RMb25MYXQoYSksYT10aGlzLmdldExhdGl0dWRlRnJvbU1hcE9iamVjdExvbkxhdChhKSxiPW5ldyBPcGVuTGF5ZXJzLkxvbkxhdChiLGEpKTtyZXR1cm4gYn0sZ2V0TWFwT2JqZWN0TG9uTGF0RnJvbU9MTG9uTGF0OmZ1bmN0aW9uKGEpe3ZhciBiPW51bGw7bnVsbCE9YSYmKGI9dGhpcy5nZXRNYXBPYmplY3RMb25MYXRGcm9tTG9uTGF0KGEubG9uLGEubGF0KSk7cmV0dXJuIGJ9LGdldE9MUGl4ZWxGcm9tTWFwT2JqZWN0UGl4ZWw6ZnVuY3Rpb24oYSl7dmFyIGI9bnVsbDtudWxsIT1hJiYoYj10aGlzLmdldFhGcm9tTWFwT2JqZWN0UGl4ZWwoYSksYT10aGlzLmdldFlGcm9tTWFwT2JqZWN0UGl4ZWwoYSksYj1uZXcgT3BlbkxheWVycy5QaXhlbChiLGEpKTtyZXR1cm4gYn0sZ2V0TWFwT2JqZWN0UGl4ZWxGcm9tT0xQaXhlbDpmdW5jdGlvbihhKXt2YXIgYj1udWxsO251bGwhPWEmJihiPXRoaXMuZ2V0TWFwT2JqZWN0UGl4ZWxGcm9tWFkoYS54LAphLnkpKTtyZXR1cm4gYn0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5MYXllci5FdmVudFBhbmUifSk7T3BlbkxheWVycy5MYXllci5GaXhlZFpvb21MZXZlbHM9T3BlbkxheWVycy5DbGFzcyh7aW5pdGlhbGl6ZTpmdW5jdGlvbigpe30saW5pdFJlc29sdXRpb25zOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPVsibWluWm9vbUxldmVsIiwibWF4Wm9vbUxldmVsIiwibnVtWm9vbUxldmVscyJdLGI9MCxjPWEubGVuZ3RoO2I8YztiKyspe3ZhciBkPWFbYl07dGhpc1tkXT1udWxsIT10aGlzLm9wdGlvbnNbZF0/dGhpcy5vcHRpb25zW2RdOnRoaXMubWFwW2RdfWlmKG51bGw9PXRoaXMubWluWm9vbUxldmVsfHx0aGlzLm1pblpvb21MZXZlbDx0aGlzLk1JTl9aT09NX0xFVkVMKXRoaXMubWluWm9vbUxldmVsPXRoaXMuTUlOX1pPT01fTEVWRUw7YT10aGlzLk1BWF9aT09NX0xFVkVMLXRoaXMubWluWm9vbUxldmVsKzE7Yj1udWxsPT10aGlzLm9wdGlvbnMubnVtWm9vbUxldmVscyYmbnVsbCE9dGhpcy5vcHRpb25zLm1heFpvb21MZXZlbHx8bnVsbD09dGhpcy5udW1ab29tTGV2ZWxzJiZudWxsIT10aGlzLm1heFpvb21MZXZlbD8KdGhpcy5tYXhab29tTGV2ZWwtdGhpcy5taW5ab29tTGV2ZWwrMTp0aGlzLm51bVpvb21MZXZlbHM7dGhpcy5udW1ab29tTGV2ZWxzPW51bGwhPWI/TWF0aC5taW4oYixhKTphO3RoaXMubWF4Wm9vbUxldmVsPXRoaXMubWluWm9vbUxldmVsK3RoaXMubnVtWm9vbUxldmVscy0xO2lmKG51bGwhPXRoaXMuUkVTT0xVVElPTlMpe2E9MDt0aGlzLnJlc29sdXRpb25zPVtdO2ZvcihiPXRoaXMubWluWm9vbUxldmVsO2I8PXRoaXMubWF4Wm9vbUxldmVsO2IrKyl0aGlzLnJlc29sdXRpb25zW2ErK109dGhpcy5SRVNPTFVUSU9OU1tiXTt0aGlzLm1heFJlc29sdXRpb249dGhpcy5yZXNvbHV0aW9uc1swXTt0aGlzLm1pblJlc29sdXRpb249dGhpcy5yZXNvbHV0aW9uc1t0aGlzLnJlc29sdXRpb25zLmxlbmd0aC0xXX19LGdldFJlc29sdXRpb246ZnVuY3Rpb24oKXtpZihudWxsIT10aGlzLnJlc29sdXRpb25zKXJldHVybiBPcGVuTGF5ZXJzLkxheWVyLnByb3RvdHlwZS5nZXRSZXNvbHV0aW9uLmFwcGx5KHRoaXMsCmFyZ3VtZW50cyk7dmFyIGE9bnVsbCxiPXRoaXMubWFwLmdldFNpemUoKSxjPXRoaXMuZ2V0RXh0ZW50KCk7bnVsbCE9YiYmbnVsbCE9YyYmKGE9TWF0aC5tYXgoYy5nZXRXaWR0aCgpL2IudyxjLmdldEhlaWdodCgpL2IuaCkpO3JldHVybiBhfSxnZXRFeHRlbnQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm1hcC5nZXRTaXplKCksYj10aGlzLmdldExvbkxhdEZyb21WaWV3UG9ydFB4KHt4OjAseTowfSksYT10aGlzLmdldExvbkxhdEZyb21WaWV3UG9ydFB4KHt4OmEudyx5OmEuaH0pO3JldHVybiBudWxsIT1iJiZudWxsIT1hP25ldyBPcGVuTGF5ZXJzLkJvdW5kcyhiLmxvbixhLmxhdCxhLmxvbixiLmxhdCk6bnVsbH0sZ2V0Wm9vbUZvclJlc29sdXRpb246ZnVuY3Rpb24oYSl7aWYobnVsbCE9dGhpcy5yZXNvbHV0aW9ucylyZXR1cm4gT3BlbkxheWVycy5MYXllci5wcm90b3R5cGUuZ2V0Wm9vbUZvclJlc29sdXRpb24uYXBwbHkodGhpcyxhcmd1bWVudHMpO3ZhciBiPU9wZW5MYXllcnMuTGF5ZXIucHJvdG90eXBlLmdldEV4dGVudC5hcHBseSh0aGlzLApbXSk7cmV0dXJuIHRoaXMuZ2V0Wm9vbUZvckV4dGVudChiKX0sZ2V0T0xab29tRnJvbU1hcE9iamVjdFpvb206ZnVuY3Rpb24oYSl7dmFyIGI9bnVsbDtudWxsIT1hJiYoYj1hLXRoaXMubWluWm9vbUxldmVsLHRoaXMubWFwLmJhc2VMYXllciE9PXRoaXMmJihiPXRoaXMubWFwLmJhc2VMYXllci5nZXRab29tRm9yUmVzb2x1dGlvbih0aGlzLmdldFJlc29sdXRpb25Gb3Jab29tKGIpKSkpO3JldHVybiBifSxnZXRNYXBPYmplY3Rab29tRnJvbU9MWm9vbTpmdW5jdGlvbihhKXt2YXIgYj1udWxsO251bGwhPWEmJihiPWErdGhpcy5taW5ab29tTGV2ZWwsdGhpcy5tYXAuYmFzZUxheWVyIT09dGhpcyYmKGI9dGhpcy5nZXRab29tRm9yUmVzb2x1dGlvbih0aGlzLm1hcC5iYXNlTGF5ZXIuZ2V0UmVzb2x1dGlvbkZvclpvb20oYikpKSk7cmV0dXJuIGJ9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuTGF5ZXIuRml4ZWRab29tTGV2ZWxzIn0pO09wZW5MYXllcnMuTGF5ZXIuR29vZ2xlPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5MYXllci5FdmVudFBhbmUsT3BlbkxheWVycy5MYXllci5GaXhlZFpvb21MZXZlbHMse01JTl9aT09NX0xFVkVMOjAsTUFYX1pPT01fTEVWRUw6MjEsUkVTT0xVVElPTlM6WzEuNDA2MjUsMC43MDMxMjUsMC4zNTE1NjI1LDAuMTc1NzgxMjUsMC4wODc4OTA2MjUsMC4wNDM5NDUzMTI1LDAuMDIxOTcyNjU2MjUsMC4wMTA5ODYzMjgxMjUsMC4wMDU0OTMxNjQwNjI1LDAuMDAyNzQ2NTgyMDMxMjUsMC4wMDEzNzMyOTEwMTU2MjUsNi44NjY0NTUwNzgxMjVFLTQsMy40MzMyMjc1MzkwNjI1RS00LDEuNzE2NjEzNzY5NTMxMjVFLTQsOC41ODMwNjg4NDc2NTYyNUUtNSw0LjI5MTUzNDQyMzgyODEyNUUtNSwyLjE0NTc2NzIxMTkxNDA2MkUtNSwxLjA3Mjg4MzYwNTk1NzAzMUUtNSw1LjM2NDQxODAyOTc4NTE1RS02LDIuNjgyMjA5MDE0ODkyNTdFLTYsMS4zNDExMDQ1MDc0NDYyODlFLTYsNi43MDU1MjI1MzcyMzE0NDVFLTddLAp0eXBlOm51bGwsd3JhcERhdGVMaW5lOiEwLHNwaGVyaWNhbE1lcmNhdG9yOiExLHZlcnNpb246bnVsbCxpbml0aWFsaXplOmZ1bmN0aW9uKGEsYil7Yj1ifHx7fTtiLnZlcnNpb258fChiLnZlcnNpb249ImZ1bmN0aW9uIj09PXR5cGVvZiBHTWFwMj8iMiI6IjMiKTt2YXIgYz1PcGVuTGF5ZXJzLkxheWVyLkdvb2dsZVsidiIrYi52ZXJzaW9uLnJlcGxhY2UoL1wuL2csIl8iKV07aWYoYylPcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyhiLGMpO2Vsc2UgdGhyb3ciVW5zdXBwb3J0ZWQgR29vZ2xlIE1hcHMgQVBJIHZlcnNpb246ICIrYi52ZXJzaW9uO09wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKGIsYy5ERUZBVUxUUyk7Yi5tYXhFeHRlbnQmJihiLm1heEV4dGVudD1iLm1heEV4dGVudC5jbG9uZSgpKTtPcGVuTGF5ZXJzLkxheWVyLkV2ZW50UGFuZS5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLFthLGJdKTtPcGVuTGF5ZXJzLkxheWVyLkZpeGVkWm9vbUxldmVscy5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLApbYSxiXSk7dGhpcy5zcGhlcmljYWxNZXJjYXRvciYmKE9wZW5MYXllcnMuVXRpbC5leHRlbmQodGhpcyxPcGVuTGF5ZXJzLkxheWVyLlNwaGVyaWNhbE1lcmNhdG9yKSx0aGlzLmluaXRNZXJjYXRvclBhcmFtZXRlcnMoKSl9LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLkxheWVyLkdvb2dsZSh0aGlzLm5hbWUsdGhpcy5nZXRPcHRpb25zKCkpfSxzZXRWaXNpYmlsaXR5OmZ1bmN0aW9uKGEpe3ZhciBiPW51bGw9PXRoaXMub3BhY2l0eT8xOnRoaXMub3BhY2l0eTtPcGVuTGF5ZXJzLkxheWVyLkV2ZW50UGFuZS5wcm90b3R5cGUuc2V0VmlzaWJpbGl0eS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5zZXRPcGFjaXR5KGIpfSxkaXNwbGF5OmZ1bmN0aW9uKGEpe3RoaXMuX2RyYWdnaW5nfHx0aGlzLnNldEdNYXBWaXNpYmlsaXR5KGEpO09wZW5MYXllcnMuTGF5ZXIuRXZlbnRQYW5lLnByb3RvdHlwZS5kaXNwbGF5LmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sbW92ZVRvOmZ1bmN0aW9uKGEsCmIsYyl7dGhpcy5fZHJhZ2dpbmc9YztPcGVuTGF5ZXJzLkxheWVyLkV2ZW50UGFuZS5wcm90b3R5cGUubW92ZVRvLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtkZWxldGUgdGhpcy5fZHJhZ2dpbmd9LHNldE9wYWNpdHk6ZnVuY3Rpb24oYSl7YSE9PXRoaXMub3BhY2l0eSYmKG51bGwhPXRoaXMubWFwJiZ0aGlzLm1hcC5ldmVudHMudHJpZ2dlckV2ZW50KCJjaGFuZ2VsYXllciIse2xheWVyOnRoaXMscHJvcGVydHk6Im9wYWNpdHkifSksdGhpcy5vcGFjaXR5PWEpO2lmKHRoaXMuZ2V0VmlzaWJpbGl0eSgpKXt2YXIgYj10aGlzLmdldE1hcENvbnRhaW5lcigpO09wZW5MYXllcnMuVXRpbC5tb2RpZnlET01FbGVtZW50KGIsbnVsbCxudWxsLG51bGwsbnVsbCxudWxsLG51bGwsYSl9fSxkZXN0cm95OmZ1bmN0aW9uKCl7aWYodGhpcy5tYXApe3RoaXMuc2V0R01hcFZpc2liaWxpdHkoITEpO3ZhciBhPU9wZW5MYXllcnMuTGF5ZXIuR29vZ2xlLmNhY2hlW3RoaXMubWFwLmlkXTthJiYxPj1hLmNvdW50JiYKdGhpcy5yZW1vdmVHTWFwRWxlbWVudHMoKX1PcGVuTGF5ZXJzLkxheWVyLkV2ZW50UGFuZS5wcm90b3R5cGUuZGVzdHJveS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LHJlbW92ZUdNYXBFbGVtZW50czpmdW5jdGlvbigpe3ZhciBhPU9wZW5MYXllcnMuTGF5ZXIuR29vZ2xlLmNhY2hlW3RoaXMubWFwLmlkXTtpZihhKXt2YXIgYj10aGlzLm1hcE9iamVjdCYmdGhpcy5nZXRNYXBDb250YWluZXIoKTtiJiZiLnBhcmVudE5vZGUmJmIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChiKTsoYj1hLnRlcm1zT2ZVc2UpJiZiLnBhcmVudE5vZGUmJmIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChiKTsoYT1hLnBvd2VyZWRCeSkmJmEucGFyZW50Tm9kZSYmYS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGEpO3RoaXMubWFwT2JqZWN0JiYod2luZG93Lmdvb2dsZSYmZ29vZ2xlLm1hcHMmJmdvb2dsZS5tYXBzLmV2ZW50JiZnb29nbGUubWFwcy5ldmVudC5jbGVhckxpc3RlbmVycykmJmdvb2dsZS5tYXBzLmV2ZW50LmNsZWFyTGlzdGVuZXJzKHRoaXMubWFwT2JqZWN0LAoidGlsZXNsb2FkZWQiKX19LHJlbW92ZU1hcDpmdW5jdGlvbihhKXt0aGlzLnZpc2liaWxpdHkmJnRoaXMubWFwT2JqZWN0JiZ0aGlzLnNldEdNYXBWaXNpYmlsaXR5KCExKTt2YXIgYj1PcGVuTGF5ZXJzLkxheWVyLkdvb2dsZS5jYWNoZVthLmlkXTtiJiYoMT49Yi5jb3VudD8odGhpcy5yZW1vdmVHTWFwRWxlbWVudHMoKSxkZWxldGUgT3BlbkxheWVycy5MYXllci5Hb29nbGUuY2FjaGVbYS5pZF0pOi0tYi5jb3VudCk7ZGVsZXRlIHRoaXMudGVybXNPZlVzZTtkZWxldGUgdGhpcy5wb3dlcmVkQnk7ZGVsZXRlIHRoaXMubWFwT2JqZWN0O2RlbGV0ZSB0aGlzLmRyYWdPYmplY3Q7T3BlbkxheWVycy5MYXllci5FdmVudFBhbmUucHJvdG90eXBlLnJlbW92ZU1hcC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGdldE9MQm91bmRzRnJvbU1hcE9iamVjdEJvdW5kczpmdW5jdGlvbihhKXt2YXIgYj1udWxsO251bGwhPWEmJihiPWEuZ2V0U291dGhXZXN0KCksYT1hLmdldE5vcnRoRWFzdCgpLHRoaXMuc3BoZXJpY2FsTWVyY2F0b3I/CihiPXRoaXMuZm9yd2FyZE1lcmNhdG9yKGIubG5nKCksYi5sYXQoKSksYT10aGlzLmZvcndhcmRNZXJjYXRvcihhLmxuZygpLGEubGF0KCkpKTooYj1uZXcgT3BlbkxheWVycy5Mb25MYXQoYi5sbmcoKSxiLmxhdCgpKSxhPW5ldyBPcGVuTGF5ZXJzLkxvbkxhdChhLmxuZygpLGEubGF0KCkpKSxiPW5ldyBPcGVuTGF5ZXJzLkJvdW5kcyhiLmxvbixiLmxhdCxhLmxvbixhLmxhdCkpO3JldHVybiBifSxnZXRXYXJuaW5nSFRNTDpmdW5jdGlvbigpe3JldHVybiBPcGVuTGF5ZXJzLmkxOG4oImdvb2dsZVdhcm5pbmciKX0sZ2V0TWFwT2JqZWN0Q2VudGVyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWFwT2JqZWN0LmdldENlbnRlcigpfSxnZXRNYXBPYmplY3Rab29tOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWFwT2JqZWN0LmdldFpvb20oKX0sZ2V0TG9uZ2l0dWRlRnJvbU1hcE9iamVjdExvbkxhdDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5zcGhlcmljYWxNZXJjYXRvcj90aGlzLmZvcndhcmRNZXJjYXRvcihhLmxuZygpLAphLmxhdCgpKS5sb246YS5sbmcoKX0sZ2V0TGF0aXR1ZGVGcm9tTWFwT2JqZWN0TG9uTGF0OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnNwaGVyaWNhbE1lcmNhdG9yP3RoaXMuZm9yd2FyZE1lcmNhdG9yKGEubG5nKCksYS5sYXQoKSkubGF0OmEubGF0KCl9LGdldFhGcm9tTWFwT2JqZWN0UGl4ZWw6ZnVuY3Rpb24oYSl7cmV0dXJuIGEueH0sZ2V0WUZyb21NYXBPYmplY3RQaXhlbDpmdW5jdGlvbihhKXtyZXR1cm4gYS55fSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkxheWVyLkdvb2dsZSJ9KTtPcGVuTGF5ZXJzLkxheWVyLkdvb2dsZS5jYWNoZT17fTsKT3BlbkxheWVycy5MYXllci5Hb29nbGUudjI9e3Rlcm1zT2ZVc2U6bnVsbCxwb3dlcmVkQnk6bnVsbCxkcmFnT2JqZWN0Om51bGwsbG9hZE1hcE9iamVjdDpmdW5jdGlvbigpe3RoaXMudHlwZXx8KHRoaXMudHlwZT1HX05PUk1BTF9NQVApO3ZhciBhLGIsYyxkPU9wZW5MYXllcnMuTGF5ZXIuR29vZ2xlLmNhY2hlW3RoaXMubWFwLmlkXTtpZihkKWE9ZC5tYXBPYmplY3QsYj1kLnRlcm1zT2ZVc2UsYz1kLnBvd2VyZWRCeSwrK2QuY291bnQ7ZWxzZXt2YXIgZD10aGlzLm1hcC52aWV3UG9ydERpdixlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO2UuaWQ9dGhpcy5tYXAuaWQrIl9HTWFwMkNvbnRhaW5lciI7ZS5zdHlsZS5wb3NpdGlvbj0iYWJzb2x1dGUiO2Uuc3R5bGUud2lkdGg9IjEwMCUiO2Uuc3R5bGUuaGVpZ2h0PSIxMDAlIjtkLmFwcGVuZENoaWxkKGUpO3RyeXthPW5ldyBHTWFwMihlKSxiPWUubGFzdENoaWxkLGQuYXBwZW5kQ2hpbGQoYiksYi5zdHlsZS56SW5kZXg9CiIxMTAwIixiLnN0eWxlLnJpZ2h0PSIiLGIuc3R5bGUuYm90dG9tPSIiLGIuY2xhc3NOYW1lPSJvbExheWVyR29vZ2xlQ29weXJpZ2h0IixjPWUubGFzdENoaWxkLGQuYXBwZW5kQ2hpbGQoYyksYy5zdHlsZS56SW5kZXg9IjExMDAiLGMuc3R5bGUucmlnaHQ9IiIsYy5zdHlsZS5ib3R0b209IiIsYy5jbGFzc05hbWU9Im9sTGF5ZXJHb29nbGVQb3dlcmVkQnkgZ21ub3ByaW50In1jYXRjaChmKXt0aHJvdyBmO31PcGVuTGF5ZXJzLkxheWVyLkdvb2dsZS5jYWNoZVt0aGlzLm1hcC5pZF09e21hcE9iamVjdDphLHRlcm1zT2ZVc2U6Yixwb3dlcmVkQnk6Yyxjb3VudDoxfX10aGlzLm1hcE9iamVjdD1hO3RoaXMudGVybXNPZlVzZT1iO3RoaXMucG93ZXJlZEJ5PWM7LTE9PT1PcGVuTGF5ZXJzLlV0aWwuaW5kZXhPZih0aGlzLm1hcE9iamVjdC5nZXRNYXBUeXBlcygpLHRoaXMudHlwZSkmJnRoaXMubWFwT2JqZWN0LmFkZE1hcFR5cGUodGhpcy50eXBlKTsiZnVuY3Rpb24iPT10eXBlb2YgYS5nZXREcmFnT2JqZWN0Pwp0aGlzLmRyYWdPYmplY3Q9YS5nZXREcmFnT2JqZWN0KCk6dGhpcy5kcmFnUGFuTWFwT2JqZWN0PW51bGw7ITE9PT10aGlzLmlzQmFzZUxheWVyJiZ0aGlzLnNldEdNYXBWaXNpYmlsaXR5KCJub25lIiE9PXRoaXMuZGl2LnN0eWxlLmRpc3BsYXkpfSxvbk1hcFJlc2l6ZTpmdW5jdGlvbigpe2lmKHRoaXMudmlzaWJpbGl0eSYmdGhpcy5tYXBPYmplY3QuaXNMb2FkZWQoKSl0aGlzLm1hcE9iamVjdC5jaGVja1Jlc2l6ZSgpO2Vsc2V7aWYoIXRoaXMuX3Jlc2l6ZWQpdmFyIGE9dGhpcyxiPUdFdmVudC5hZGRMaXN0ZW5lcih0aGlzLm1hcE9iamVjdCwibG9hZCIsZnVuY3Rpb24oKXtHRXZlbnQucmVtb3ZlTGlzdGVuZXIoYik7ZGVsZXRlIGEuX3Jlc2l6ZWQ7YS5tYXBPYmplY3QuY2hlY2tSZXNpemUoKTthLm1vdmVUbyhhLm1hcC5nZXRDZW50ZXIoKSxhLm1hcC5nZXRab29tKCkpfSk7dGhpcy5fcmVzaXplZD0hMH19LHNldEdNYXBWaXNpYmlsaXR5OmZ1bmN0aW9uKGEpe3ZhciBiPU9wZW5MYXllcnMuTGF5ZXIuR29vZ2xlLmNhY2hlW3RoaXMubWFwLmlkXTsKaWYoYil7dmFyIGM9dGhpcy5tYXBPYmplY3QuZ2V0Q29udGFpbmVyKCk7ITA9PT1hPyh0aGlzLm1hcE9iamVjdC5zZXRNYXBUeXBlKHRoaXMudHlwZSksYy5zdHlsZS5kaXNwbGF5PSIiLHRoaXMudGVybXNPZlVzZS5zdHlsZS5sZWZ0PSIiLHRoaXMudGVybXNPZlVzZS5zdHlsZS5kaXNwbGF5PSIiLHRoaXMucG93ZXJlZEJ5LnN0eWxlLmRpc3BsYXk9IiIsYi5kaXNwbGF5ZWQ9dGhpcy5pZCk6KGIuZGlzcGxheWVkPT09dGhpcy5pZCYmZGVsZXRlIGIuZGlzcGxheWVkLGIuZGlzcGxheWVkfHwoYy5zdHlsZS5kaXNwbGF5PSJub25lIix0aGlzLnRlcm1zT2ZVc2Uuc3R5bGUuZGlzcGxheT0ibm9uZSIsdGhpcy50ZXJtc09mVXNlLnN0eWxlLmxlZnQ9Ii05OTk5cHgiLHRoaXMucG93ZXJlZEJ5LnN0eWxlLmRpc3BsYXk9Im5vbmUiKSl9fSxnZXRNYXBDb250YWluZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tYXBPYmplY3QuZ2V0Q29udGFpbmVyKCl9LGdldE1hcE9iamVjdEJvdW5kc0Zyb21PTEJvdW5kczpmdW5jdGlvbihhKXt2YXIgYj0KbnVsbDtudWxsIT1hJiYoYj10aGlzLnNwaGVyaWNhbE1lcmNhdG9yP3RoaXMuaW52ZXJzZU1lcmNhdG9yKGEuYm90dG9tLGEubGVmdCk6bmV3IE9wZW5MYXllcnMuTG9uTGF0KGEuYm90dG9tLGEubGVmdCksYT10aGlzLnNwaGVyaWNhbE1lcmNhdG9yP3RoaXMuaW52ZXJzZU1lcmNhdG9yKGEudG9wLGEucmlnaHQpOm5ldyBPcGVuTGF5ZXJzLkxvbkxhdChhLnRvcCxhLnJpZ2h0KSxiPW5ldyBHTGF0TG5nQm91bmRzKG5ldyBHTGF0TG5nKGIubGF0LGIubG9uKSxuZXcgR0xhdExuZyhhLmxhdCxhLmxvbikpKTtyZXR1cm4gYn0sc2V0TWFwT2JqZWN0Q2VudGVyOmZ1bmN0aW9uKGEsYil7dGhpcy5tYXBPYmplY3Quc2V0Q2VudGVyKGEsYil9LGRyYWdQYW5NYXBPYmplY3Q6ZnVuY3Rpb24oYSxiKXt0aGlzLmRyYWdPYmplY3QubW92ZUJ5KG5ldyBHU2l6ZSgtYSxiKSl9LGdldE1hcE9iamVjdExvbkxhdEZyb21NYXBPYmplY3RQaXhlbDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5tYXBPYmplY3QuZnJvbUNvbnRhaW5lclBpeGVsVG9MYXRMbmcoYSl9LApnZXRNYXBPYmplY3RQaXhlbEZyb21NYXBPYmplY3RMb25MYXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMubWFwT2JqZWN0LmZyb21MYXRMbmdUb0NvbnRhaW5lclBpeGVsKGEpfSxnZXRNYXBPYmplY3Rab29tRnJvbU1hcE9iamVjdEJvdW5kczpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5tYXBPYmplY3QuZ2V0Qm91bmRzWm9vbUxldmVsKGEpfSxnZXRNYXBPYmplY3RMb25MYXRGcm9tTG9uTGF0OmZ1bmN0aW9uKGEsYil7dmFyIGM7dGhpcy5zcGhlcmljYWxNZXJjYXRvcj8oYz10aGlzLmludmVyc2VNZXJjYXRvcihhLGIpLGM9bmV3IEdMYXRMbmcoYy5sYXQsYy5sb24pKTpjPW5ldyBHTGF0TG5nKGIsYSk7cmV0dXJuIGN9LGdldE1hcE9iamVjdFBpeGVsRnJvbVhZOmZ1bmN0aW9uKGEsYil7cmV0dXJuIG5ldyBHUG9pbnQoYSxiKX19O09wZW5MYXllcnMuRm9ybWF0LlhNTD1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuRm9ybWF0LHtuYW1lc3BhY2VzOm51bGwsbmFtZXNwYWNlQWxpYXM6bnVsbCxkZWZhdWx0UHJlZml4Om51bGwscmVhZGVyczp7fSx3cml0ZXJzOnt9LHhtbGRvbTpudWxsLGluaXRpYWxpemU6ZnVuY3Rpb24oYSl7d2luZG93LkFjdGl2ZVhPYmplY3QmJih0aGlzLnhtbGRvbT1uZXcgQWN0aXZlWE9iamVjdCgiTWljcm9zb2Z0LlhNTERPTSIpKTtPcGVuTGF5ZXJzLkZvcm1hdC5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLFthXSk7dGhpcy5uYW1lc3BhY2VzPU9wZW5MYXllcnMuVXRpbC5leHRlbmQoe30sdGhpcy5uYW1lc3BhY2VzKTt0aGlzLm5hbWVzcGFjZUFsaWFzPXt9O2Zvcih2YXIgYiBpbiB0aGlzLm5hbWVzcGFjZXMpdGhpcy5uYW1lc3BhY2VBbGlhc1t0aGlzLm5hbWVzcGFjZXNbYl1dPWJ9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLnhtbGRvbT1udWxsO09wZW5MYXllcnMuRm9ybWF0LnByb3RvdHlwZS5kZXN0cm95LmFwcGx5KHRoaXMsCmFyZ3VtZW50cyl9LHNldE5hbWVzcGFjZTpmdW5jdGlvbihhLGIpe3RoaXMubmFtZXNwYWNlc1thXT1iO3RoaXMubmFtZXNwYWNlQWxpYXNbYl09YX0scmVhZDpmdW5jdGlvbihhKXt2YXIgYj1hLmluZGV4T2YoIjwiKTswPGImJihhPWEuc3Vic3RyaW5nKGIpKTtiPU9wZW5MYXllcnMuVXRpbC5UcnkoT3BlbkxheWVycy5GdW5jdGlvbi5iaW5kKGZ1bmN0aW9uKCl7dmFyIGI7Yj13aW5kb3cuQWN0aXZlWE9iamVjdCYmIXRoaXMueG1sZG9tP25ldyBBY3RpdmVYT2JqZWN0KCJNaWNyb3NvZnQuWE1MRE9NIik6dGhpcy54bWxkb207Yi5sb2FkWE1MKGEpO3JldHVybiBifSx0aGlzKSxmdW5jdGlvbigpe3JldHVybihuZXcgRE9NUGFyc2VyKS5wYXJzZUZyb21TdHJpbmcoYSwidGV4dC94bWwiKX0sZnVuY3Rpb24oKXt2YXIgYj1uZXcgWE1MSHR0cFJlcXVlc3Q7Yi5vcGVuKCJHRVQiLCJkYXRhOnRleHQveG1sO2NoYXJzZXQ9dXRmLTgsIitlbmNvZGVVUklDb21wb25lbnQoYSksITEpO2Iub3ZlcnJpZGVNaW1lVHlwZSYmCmIub3ZlcnJpZGVNaW1lVHlwZSgidGV4dC94bWwiKTtiLnNlbmQobnVsbCk7cmV0dXJuIGIucmVzcG9uc2VYTUx9KTt0aGlzLmtlZXBEYXRhJiYodGhpcy5kYXRhPWIpO3JldHVybiBifSx3cml0ZTpmdW5jdGlvbihhKXtpZih0aGlzLnhtbGRvbSlhPWEueG1sO2Vsc2V7dmFyIGI9bmV3IFhNTFNlcmlhbGl6ZXI7aWYoMT09YS5ub2RlVHlwZSl7dmFyIGM9ZG9jdW1lbnQuaW1wbGVtZW50YXRpb24uY3JlYXRlRG9jdW1lbnQoIiIsIiIsbnVsbCk7Yy5pbXBvcnROb2RlJiYoYT1jLmltcG9ydE5vZGUoYSwhMCkpO2MuYXBwZW5kQ2hpbGQoYSk7YT1iLnNlcmlhbGl6ZVRvU3RyaW5nKGMpfWVsc2UgYT1iLnNlcmlhbGl6ZVRvU3RyaW5nKGEpfXJldHVybiBhfSxjcmVhdGVFbGVtZW50TlM6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy54bWxkb20/InN0cmluZyI9PXR5cGVvZiBhP3RoaXMueG1sZG9tLmNyZWF0ZU5vZGUoMSxiLGEpOnRoaXMueG1sZG9tLmNyZWF0ZU5vZGUoMSxiLCIiKTpkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoYSwKYil9LGNyZWF0ZURvY3VtZW50RnJhZ21lbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy54bWxkb20/dGhpcy54bWxkb20uY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpOmRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKX0sY3JlYXRlVGV4dE5vZGU6ZnVuY3Rpb24oYSl7InN0cmluZyIhPT10eXBlb2YgYSYmKGE9U3RyaW5nKGEpKTtyZXR1cm4gdGhpcy54bWxkb20/dGhpcy54bWxkb20uY3JlYXRlVGV4dE5vZGUoYSk6ZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoYSl9LGdldEVsZW1lbnRzQnlUYWdOYW1lTlM6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPVtdO2lmKGEuZ2V0RWxlbWVudHNCeVRhZ05hbWVOUylkPWEuZ2V0RWxlbWVudHNCeVRhZ05hbWVOUyhiLGMpO2Vsc2V7YT1hLmdldEVsZW1lbnRzQnlUYWdOYW1lKCIqIik7Zm9yKHZhciBlLGYsZz0wLGg9YS5sZW5ndGg7ZzxoOysrZylpZihlPWFbZ10sZj1lLnByZWZpeD9lLnByZWZpeCsiOiIrYzpjLCIqIj09Y3x8Zj09ZS5ub2RlTmFtZSkiKiIhPQpiJiZiIT1lLm5hbWVzcGFjZVVSSXx8ZC5wdXNoKGUpfXJldHVybiBkfSxnZXRBdHRyaWJ1dGVOb2RlTlM6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPW51bGw7aWYoYS5nZXRBdHRyaWJ1dGVOb2RlTlMpZD1hLmdldEF0dHJpYnV0ZU5vZGVOUyhiLGMpO2Vsc2V7YT1hLmF0dHJpYnV0ZXM7Zm9yKHZhciBlLGYsZz0wLGg9YS5sZW5ndGg7ZzxoOysrZylpZihlPWFbZ10sZS5uYW1lc3BhY2VVUkk9PWImJihmPWUucHJlZml4P2UucHJlZml4KyI6IitjOmMsZj09ZS5ub2RlTmFtZSkpe2Q9ZTticmVha319cmV0dXJuIGR9LGdldEF0dHJpYnV0ZU5TOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD0iIjtpZihhLmdldEF0dHJpYnV0ZU5TKWQ9YS5nZXRBdHRyaWJ1dGVOUyhiLGMpfHwiIjtlbHNlIGlmKGE9dGhpcy5nZXRBdHRyaWJ1dGVOb2RlTlMoYSxiLGMpKWQ9YS5ub2RlVmFsdWU7cmV0dXJuIGR9LGdldENoaWxkVmFsdWU6ZnVuY3Rpb24oYSxiKXt2YXIgYz1ifHwiIjtpZihhKWZvcih2YXIgZD1hLmZpcnN0Q2hpbGQ7ZDtkPQpkLm5leHRTaWJsaW5nKXN3aXRjaChkLm5vZGVUeXBlKXtjYXNlIDM6Y2FzZSA0OmMrPWQubm9kZVZhbHVlfXJldHVybiBjfSxpc1NpbXBsZUNvbnRlbnQ6ZnVuY3Rpb24oYSl7dmFyIGI9ITA7Zm9yKGE9YS5maXJzdENoaWxkO2E7YT1hLm5leHRTaWJsaW5nKWlmKDE9PT1hLm5vZGVUeXBlKXtiPSExO2JyZWFrfXJldHVybiBifSxjb250ZW50VHlwZTpmdW5jdGlvbihhKXt2YXIgYj0hMSxjPSExLGQ9T3BlbkxheWVycy5Gb3JtYXQuWE1MLkNPTlRFTlRfVFlQRS5FTVBUWTtmb3IoYT1hLmZpcnN0Q2hpbGQ7YTthPWEubmV4dFNpYmxpbmcpe3N3aXRjaChhLm5vZGVUeXBlKXtjYXNlIDE6Yz0hMDticmVhaztjYXNlIDg6YnJlYWs7ZGVmYXVsdDpiPSEwfWlmKGMmJmIpYnJlYWt9aWYoYyYmYilkPU9wZW5MYXllcnMuRm9ybWF0LlhNTC5DT05URU5UX1RZUEUuTUlYRUQ7ZWxzZXtpZihjKXJldHVybiBPcGVuTGF5ZXJzLkZvcm1hdC5YTUwuQ09OVEVOVF9UWVBFLkNPTVBMRVg7aWYoYilyZXR1cm4gT3BlbkxheWVycy5Gb3JtYXQuWE1MLkNPTlRFTlRfVFlQRS5TSU1QTEV9cmV0dXJuIGR9LApoYXNBdHRyaWJ1dGVOUzpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9ITE7cmV0dXJuIGQ9YS5oYXNBdHRyaWJ1dGVOUz9hLmhhc0F0dHJpYnV0ZU5TKGIsYyk6ISF0aGlzLmdldEF0dHJpYnV0ZU5vZGVOUyhhLGIsYyl9LHNldEF0dHJpYnV0ZU5TOmZ1bmN0aW9uKGEsYixjLGQpe2lmKGEuc2V0QXR0cmlidXRlTlMpYS5zZXRBdHRyaWJ1dGVOUyhiLGMsZCk7ZWxzZSBpZih0aGlzLnhtbGRvbSliPyhiPWEub3duZXJEb2N1bWVudC5jcmVhdGVOb2RlKDIsYyxiKSxiLm5vZGVWYWx1ZT1kLGEuc2V0QXR0cmlidXRlTm9kZShiKSk6YS5zZXRBdHRyaWJ1dGUoYyxkKTtlbHNlIHRocm93InNldEF0dHJpYnV0ZU5TIG5vdCBpbXBsZW1lbnRlZCI7fSxjcmVhdGVFbGVtZW50TlNQbHVzOmZ1bmN0aW9uKGEsYil7Yj1ifHx7fTt2YXIgYz1iLnVyaXx8dGhpcy5uYW1lc3BhY2VzW2IucHJlZml4XTtjfHwoYz1hLmluZGV4T2YoIjoiKSxjPXRoaXMubmFtZXNwYWNlc1thLnN1YnN0cmluZygwLGMpXSk7Y3x8CihjPXRoaXMubmFtZXNwYWNlc1t0aGlzLmRlZmF1bHRQcmVmaXhdKTtjPXRoaXMuY3JlYXRlRWxlbWVudE5TKGMsYSk7Yi5hdHRyaWJ1dGVzJiZ0aGlzLnNldEF0dHJpYnV0ZXMoYyxiLmF0dHJpYnV0ZXMpO3ZhciBkPWIudmFsdWU7bnVsbCE9ZCYmYy5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZVRleHROb2RlKGQpKTtyZXR1cm4gY30sc2V0QXR0cmlidXRlczpmdW5jdGlvbihhLGIpe3ZhciBjLGQsZTtmb3IoZSBpbiBiKW51bGwhPWJbZV0mJmJbZV0udG9TdHJpbmcmJihjPWJbZV0udG9TdHJpbmcoKSxkPXRoaXMubmFtZXNwYWNlc1tlLnN1YnN0cmluZygwLGUuaW5kZXhPZigiOiIpKV18fG51bGwsdGhpcy5zZXRBdHRyaWJ1dGVOUyhhLGQsZSxjKSl9LHJlYWROb2RlOmZ1bmN0aW9uKGEsYil7Ynx8KGI9e30pO3ZhciBjPXRoaXMucmVhZGVyc1thLm5hbWVzcGFjZVVSST90aGlzLm5hbWVzcGFjZUFsaWFzW2EubmFtZXNwYWNlVVJJXTp0aGlzLmRlZmF1bHRQcmVmaXhdO2lmKGMpe3ZhciBkPQphLmxvY2FsTmFtZXx8YS5ub2RlTmFtZS5zcGxpdCgiOiIpLnBvcCgpOyhjPWNbZF18fGNbIioiXSkmJmMuYXBwbHkodGhpcyxbYSxiXSl9cmV0dXJuIGJ9LHJlYWRDaGlsZE5vZGVzOmZ1bmN0aW9uKGEsYil7Ynx8KGI9e30pO2Zvcih2YXIgYz1hLmNoaWxkTm9kZXMsZCxlPTAsZj1jLmxlbmd0aDtlPGY7KytlKWQ9Y1tlXSwxPT1kLm5vZGVUeXBlJiZ0aGlzLnJlYWROb2RlKGQsYik7cmV0dXJuIGJ9LHdyaXRlTm9kZTpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZT1hLmluZGV4T2YoIjoiKTswPGU/KGQ9YS5zdWJzdHJpbmcoMCxlKSxhPWEuc3Vic3RyaW5nKGUrMSkpOmQ9Yz90aGlzLm5hbWVzcGFjZUFsaWFzW2MubmFtZXNwYWNlVVJJXTp0aGlzLmRlZmF1bHRQcmVmaXg7Yj10aGlzLndyaXRlcnNbZF1bYV0uYXBwbHkodGhpcyxbYl0pO2MmJmMuYXBwZW5kQ2hpbGQoYik7cmV0dXJuIGJ9LGdldENoaWxkRWw6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBhJiZ0aGlzLmdldFRoaXNPck5leHRFbChhLmZpcnN0Q2hpbGQsCmIsYyl9LGdldE5leHRFbDpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGEmJnRoaXMuZ2V0VGhpc09yTmV4dEVsKGEubmV4dFNpYmxpbmcsYixjKX0sZ2V0VGhpc09yTmV4dEVsOmZ1bmN0aW9uKGEsYixjKXthOmZvcig7YTthPWEubmV4dFNpYmxpbmcpc3dpdGNoKGEubm9kZVR5cGUpe2Nhc2UgMTppZighKGImJmIhPT0oYS5sb2NhbE5hbWV8fGEubm9kZU5hbWUuc3BsaXQoIjoiKS5wb3AoKSl8fGMmJmMhPT1hLm5hbWVzcGFjZVVSSSkpYnJlYWsgYTthPW51bGw7YnJlYWsgYTtjYXNlIDM6aWYoL15ccyokLy50ZXN0KGEubm9kZVZhbHVlKSlicmVhaztjYXNlIDQ6Y2FzZSA2OmNhc2UgMTI6Y2FzZSAxMDpjYXNlIDExOmE9bnVsbDticmVhayBhfXJldHVybiBhfHxudWxsfSxsb29rdXBOYW1lc3BhY2VVUkk6ZnVuY3Rpb24oYSxiKXt2YXIgYz1udWxsO2lmKGEpaWYoYS5sb29rdXBOYW1lc3BhY2VVUkkpYz1hLmxvb2t1cE5hbWVzcGFjZVVSSShiKTtlbHNlIGE6c3dpdGNoKGEubm9kZVR5cGUpe2Nhc2UgMTppZihudWxsIT09CmEubmFtZXNwYWNlVVJJJiZhLnByZWZpeD09PWIpe2M9YS5uYW1lc3BhY2VVUkk7YnJlYWsgYX1pZihjPWEuYXR0cmlidXRlcy5sZW5ndGgpZm9yKHZhciBkLGU9MDtlPGM7KytlKWlmKGQ9YS5hdHRyaWJ1dGVzW2VdLCJ4bWxucyI9PT1kLnByZWZpeCYmZC5uYW1lPT09InhtbG5zOiIrYil7Yz1kLnZhbHVlfHxudWxsO2JyZWFrIGF9ZWxzZSBpZigieG1sbnMiPT09ZC5uYW1lJiZudWxsPT09Yil7Yz1kLnZhbHVlfHxudWxsO2JyZWFrIGF9Yz10aGlzLmxvb2t1cE5hbWVzcGFjZVVSSShhLnBhcmVudE5vZGUsYik7YnJlYWsgYTtjYXNlIDI6Yz10aGlzLmxvb2t1cE5hbWVzcGFjZVVSSShhLm93bmVyRWxlbWVudCxiKTticmVhayBhO2Nhc2UgOTpjPXRoaXMubG9va3VwTmFtZXNwYWNlVVJJKGEuZG9jdW1lbnRFbGVtZW50LGIpO2JyZWFrIGE7Y2FzZSA2OmNhc2UgMTI6Y2FzZSAxMDpjYXNlIDExOmJyZWFrIGE7ZGVmYXVsdDpjPXRoaXMubG9va3VwTmFtZXNwYWNlVVJJKGEucGFyZW50Tm9kZSwKYil9cmV0dXJuIGN9LGdldFhNTERvYzpmdW5jdGlvbigpe09wZW5MYXllcnMuRm9ybWF0LlhNTC5kb2N1bWVudHx8dGhpcy54bWxkb218fChkb2N1bWVudC5pbXBsZW1lbnRhdGlvbiYmZG9jdW1lbnQuaW1wbGVtZW50YXRpb24uY3JlYXRlRG9jdW1lbnQ/T3BlbkxheWVycy5Gb3JtYXQuWE1MLmRvY3VtZW50PWRvY3VtZW50LmltcGxlbWVudGF0aW9uLmNyZWF0ZURvY3VtZW50KCIiLCIiLG51bGwpOiF0aGlzLnhtbGRvbSYmd2luZG93LkFjdGl2ZVhPYmplY3QmJih0aGlzLnhtbGRvbT1uZXcgQWN0aXZlWE9iamVjdCgiTWljcm9zb2Z0LlhNTERPTSIpKSk7cmV0dXJuIE9wZW5MYXllcnMuRm9ybWF0LlhNTC5kb2N1bWVudHx8dGhpcy54bWxkb219LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuRm9ybWF0LlhNTCJ9KTtPcGVuTGF5ZXJzLkZvcm1hdC5YTUwuQ09OVEVOVF9UWVBFPXtFTVBUWTowLFNJTVBMRToxLENPTVBMRVg6MixNSVhFRDozfTsKT3BlbkxheWVycy5Gb3JtYXQuWE1MLmxvb2t1cE5hbWVzcGFjZVVSST1PcGVuTGF5ZXJzLkZ1bmN0aW9uLmJpbmQoT3BlbkxheWVycy5Gb3JtYXQuWE1MLnByb3RvdHlwZS5sb29rdXBOYW1lc3BhY2VVUkksT3BlbkxheWVycy5Gb3JtYXQuWE1MLnByb3RvdHlwZSk7T3BlbkxheWVycy5Gb3JtYXQuWE1MLmRvY3VtZW50PW51bGw7T3BlbkxheWVycy5Gb3JtYXQuV0ZTVD1mdW5jdGlvbihhKXthPU9wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKGEsT3BlbkxheWVycy5Gb3JtYXQuV0ZTVC5ERUZBVUxUUyk7dmFyIGI9T3BlbkxheWVycy5Gb3JtYXQuV0ZTVFsidiIrYS52ZXJzaW9uLnJlcGxhY2UoL1wuL2csIl8iKV07aWYoIWIpdGhyb3ciVW5zdXBwb3J0ZWQgV0ZTVCB2ZXJzaW9uOiAiK2EudmVyc2lvbjtyZXR1cm4gbmV3IGIoYSl9O09wZW5MYXllcnMuRm9ybWF0LldGU1QuREVGQVVMVFM9e3ZlcnNpb246IjEuMC4wIn07T3BlbkxheWVycy5GZWF0dXJlPU9wZW5MYXllcnMuQ2xhc3Moe2xheWVyOm51bGwsaWQ6bnVsbCxsb25sYXQ6bnVsbCxkYXRhOm51bGwsbWFya2VyOm51bGwscG9wdXBDbGFzczpudWxsLHBvcHVwOm51bGwsaW5pdGlhbGl6ZTpmdW5jdGlvbihhLGIsYyl7dGhpcy5sYXllcj1hO3RoaXMubG9ubGF0PWI7dGhpcy5kYXRhPW51bGwhPWM/Yzp7fTt0aGlzLmlkPU9wZW5MYXllcnMuVXRpbC5jcmVhdGVVbmlxdWVJRCh0aGlzLkNMQVNTX05BTUUrIl8iKX0sZGVzdHJveTpmdW5jdGlvbigpe251bGwhPXRoaXMubGF5ZXImJm51bGwhPXRoaXMubGF5ZXIubWFwJiZudWxsIT10aGlzLnBvcHVwJiZ0aGlzLmxheWVyLm1hcC5yZW1vdmVQb3B1cCh0aGlzLnBvcHVwKTtudWxsIT10aGlzLmxheWVyJiZudWxsIT10aGlzLm1hcmtlciYmdGhpcy5sYXllci5yZW1vdmVNYXJrZXIodGhpcy5tYXJrZXIpO3RoaXMuZGF0YT10aGlzLmxvbmxhdD10aGlzLmlkPXRoaXMubGF5ZXI9bnVsbDtudWxsIT10aGlzLm1hcmtlciYmCih0aGlzLmRlc3Ryb3lNYXJrZXIodGhpcy5tYXJrZXIpLHRoaXMubWFya2VyPW51bGwpO251bGwhPXRoaXMucG9wdXAmJih0aGlzLmRlc3Ryb3lQb3B1cCh0aGlzLnBvcHVwKSx0aGlzLnBvcHVwPW51bGwpfSxvblNjcmVlbjpmdW5jdGlvbigpe3ZhciBhPSExO251bGwhPXRoaXMubGF5ZXImJm51bGwhPXRoaXMubGF5ZXIubWFwJiYoYT10aGlzLmxheWVyLm1hcC5nZXRFeHRlbnQoKS5jb250YWluc0xvbkxhdCh0aGlzLmxvbmxhdCkpO3JldHVybiBhfSxjcmVhdGVNYXJrZXI6ZnVuY3Rpb24oKXtudWxsIT10aGlzLmxvbmxhdCYmKHRoaXMubWFya2VyPW5ldyBPcGVuTGF5ZXJzLk1hcmtlcih0aGlzLmxvbmxhdCx0aGlzLmRhdGEuaWNvbikpO3JldHVybiB0aGlzLm1hcmtlcn0sZGVzdHJveU1hcmtlcjpmdW5jdGlvbigpe3RoaXMubWFya2VyLmRlc3Ryb3koKX0sY3JlYXRlUG9wdXA6ZnVuY3Rpb24oYSl7bnVsbCE9dGhpcy5sb25sYXQmJih0aGlzLnBvcHVwfHwodGhpcy5wb3B1cD1uZXcgKHRoaXMucG9wdXBDbGFzcz8KdGhpcy5wb3B1cENsYXNzOk9wZW5MYXllcnMuUG9wdXAuQW5jaG9yZWQpKHRoaXMuaWQrIl9wb3B1cCIsdGhpcy5sb25sYXQsdGhpcy5kYXRhLnBvcHVwU2l6ZSx0aGlzLmRhdGEucG9wdXBDb250ZW50SFRNTCx0aGlzLm1hcmtlcj90aGlzLm1hcmtlci5pY29uOm51bGwsYSkpLG51bGwhPXRoaXMuZGF0YS5vdmVyZmxvdyYmKHRoaXMucG9wdXAuY29udGVudERpdi5zdHlsZS5vdmVyZmxvdz10aGlzLmRhdGEub3ZlcmZsb3cpLHRoaXMucG9wdXAuZmVhdHVyZT10aGlzKTtyZXR1cm4gdGhpcy5wb3B1cH0sZGVzdHJveVBvcHVwOmZ1bmN0aW9uKCl7dGhpcy5wb3B1cCYmKHRoaXMucG9wdXAuZmVhdHVyZT1udWxsLHRoaXMucG9wdXAuZGVzdHJveSgpLHRoaXMucG9wdXA9bnVsbCl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuRmVhdHVyZSJ9KTtPcGVuTGF5ZXJzLlN0YXRlPXtVTktOT1dOOiJVbmtub3duIixJTlNFUlQ6Ikluc2VydCIsVVBEQVRFOiJVcGRhdGUiLERFTEVURToiRGVsZXRlIn07Ck9wZW5MYXllcnMuRmVhdHVyZS5WZWN0b3I9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkZlYXR1cmUse2ZpZDpudWxsLGdlb21ldHJ5Om51bGwsYXR0cmlidXRlczpudWxsLGJvdW5kczpudWxsLHN0YXRlOm51bGwsc3R5bGU6bnVsbCx1cmw6bnVsbCxyZW5kZXJJbnRlbnQ6ImRlZmF1bHQiLG1vZGlmaWVkOm51bGwsaW5pdGlhbGl6ZTpmdW5jdGlvbihhLGIsYyl7T3BlbkxheWVycy5GZWF0dXJlLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsW251bGwsbnVsbCxiXSk7dGhpcy5sb25sYXQ9bnVsbDt0aGlzLmdlb21ldHJ5PWE/YTpudWxsO3RoaXMuc3RhdGU9bnVsbDt0aGlzLmF0dHJpYnV0ZXM9e307YiYmKHRoaXMuYXR0cmlidXRlcz1PcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHRoaXMuYXR0cmlidXRlcyxiKSk7dGhpcy5zdHlsZT1jP2M6bnVsbH0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMubGF5ZXImJih0aGlzLmxheWVyLnJlbW92ZUZlYXR1cmVzKHRoaXMpLHRoaXMubGF5ZXI9Cm51bGwpO3RoaXMubW9kaWZpZWQ9dGhpcy5nZW9tZXRyeT1udWxsO09wZW5MYXllcnMuRmVhdHVyZS5wcm90b3R5cGUuZGVzdHJveS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLkZlYXR1cmUuVmVjdG9yKHRoaXMuZ2VvbWV0cnk/dGhpcy5nZW9tZXRyeS5jbG9uZSgpOm51bGwsdGhpcy5hdHRyaWJ1dGVzLHRoaXMuc3R5bGUpfSxvblNjcmVlbjpmdW5jdGlvbihhKXt2YXIgYj0hMTt0aGlzLmxheWVyJiZ0aGlzLmxheWVyLm1hcCYmKGI9dGhpcy5sYXllci5tYXAuZ2V0RXh0ZW50KCksYT8oYT10aGlzLmdlb21ldHJ5LmdldEJvdW5kcygpLGI9Yi5pbnRlcnNlY3RzQm91bmRzKGEpKTpiPWIudG9HZW9tZXRyeSgpLmludGVyc2VjdHModGhpcy5nZW9tZXRyeSkpO3JldHVybiBifSxnZXRWaXNpYmlsaXR5OmZ1bmN0aW9uKCl7cmV0dXJuISh0aGlzLnN0eWxlJiYibm9uZSI9PXRoaXMuc3R5bGUuZGlzcGxheXx8IXRoaXMubGF5ZXJ8fAp0aGlzLmxheWVyJiZ0aGlzLmxheWVyLnN0eWxlTWFwJiYibm9uZSI9PXRoaXMubGF5ZXIuc3R5bGVNYXAuY3JlYXRlU3ltYm9saXplcih0aGlzLHRoaXMucmVuZGVySW50ZW50KS5kaXNwbGF5fHx0aGlzLmxheWVyJiYhdGhpcy5sYXllci5nZXRWaXNpYmlsaXR5KCkpfSxjcmVhdGVNYXJrZXI6ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbH0sZGVzdHJveU1hcmtlcjpmdW5jdGlvbigpe30sY3JlYXRlUG9wdXA6ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbH0sYXRQb2ludDpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9ITE7dGhpcy5nZW9tZXRyeSYmKGQ9dGhpcy5nZW9tZXRyeS5hdFBvaW50KGEsYixjKSk7cmV0dXJuIGR9LGRlc3Ryb3lQb3B1cDpmdW5jdGlvbigpe30sbW92ZTpmdW5jdGlvbihhKXtpZih0aGlzLmxheWVyJiZ0aGlzLmdlb21ldHJ5Lm1vdmUpe2E9Ik9wZW5MYXllcnMuTG9uTGF0Ij09YS5DTEFTU19OQU1FP3RoaXMubGF5ZXIuZ2V0Vmlld1BvcnRQeEZyb21Mb25MYXQoYSk6YTt2YXIgYj0KdGhpcy5sYXllci5nZXRWaWV3UG9ydFB4RnJvbUxvbkxhdCh0aGlzLmdlb21ldHJ5LmdldEJvdW5kcygpLmdldENlbnRlckxvbkxhdCgpKSxjPXRoaXMubGF5ZXIubWFwLmdldFJlc29sdXRpb24oKTt0aGlzLmdlb21ldHJ5Lm1vdmUoYyooYS54LWIueCksYyooYi55LWEueSkpO3RoaXMubGF5ZXIuZHJhd0ZlYXR1cmUodGhpcyk7cmV0dXJuIGJ9fSx0b1N0YXRlOmZ1bmN0aW9uKGEpe2lmKGE9PU9wZW5MYXllcnMuU3RhdGUuVVBEQVRFKXN3aXRjaCh0aGlzLnN0YXRlKXtjYXNlIE9wZW5MYXllcnMuU3RhdGUuVU5LTk9XTjpjYXNlIE9wZW5MYXllcnMuU3RhdGUuREVMRVRFOnRoaXMuc3RhdGU9YX1lbHNlIGlmKGE9PU9wZW5MYXllcnMuU3RhdGUuSU5TRVJUKXN3aXRjaCh0aGlzLnN0YXRlKXtjYXNlIE9wZW5MYXllcnMuU3RhdGUuVU5LTk9XTjpicmVhaztkZWZhdWx0OnRoaXMuc3RhdGU9YX1lbHNlIGlmKGE9PU9wZW5MYXllcnMuU3RhdGUuREVMRVRFKXN3aXRjaCh0aGlzLnN0YXRlKXtjYXNlIE9wZW5MYXllcnMuU3RhdGUuVU5LTk9XTjpjYXNlIE9wZW5MYXllcnMuU3RhdGUuVVBEQVRFOnRoaXMuc3RhdGU9CmF9ZWxzZSBhPT1PcGVuTGF5ZXJzLlN0YXRlLlVOS05PV04mJih0aGlzLnN0YXRlPWEpfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkZlYXR1cmUuVmVjdG9yIn0pOwpPcGVuTGF5ZXJzLkZlYXR1cmUuVmVjdG9yLnN0eWxlPXsiZGVmYXVsdCI6e2ZpbGxDb2xvcjoiI2VlOTkwMCIsZmlsbE9wYWNpdHk6MC40LGhvdmVyRmlsbENvbG9yOiJ3aGl0ZSIsaG92ZXJGaWxsT3BhY2l0eTowLjgsc3Ryb2tlQ29sb3I6IiNlZTk5MDAiLHN0cm9rZU9wYWNpdHk6MSxzdHJva2VXaWR0aDoxLHN0cm9rZUxpbmVjYXA6InJvdW5kIixzdHJva2VEYXNoc3R5bGU6InNvbGlkIixob3ZlclN0cm9rZUNvbG9yOiJyZWQiLGhvdmVyU3Ryb2tlT3BhY2l0eToxLGhvdmVyU3Ryb2tlV2lkdGg6MC4yLHBvaW50UmFkaXVzOjYsaG92ZXJQb2ludFJhZGl1czoxLGhvdmVyUG9pbnRVbml0OiIlIixwb2ludGVyRXZlbnRzOiJ2aXNpYmxlUGFpbnRlZCIsY3Vyc29yOiJpbmhlcml0Iixmb250Q29sb3I6IiMwMDAwMDAiLGxhYmVsQWxpZ246ImNtIixsYWJlbE91dGxpbmVDb2xvcjoid2hpdGUiLGxhYmVsT3V0bGluZVdpZHRoOjN9LHNlbGVjdDp7ZmlsbENvbG9yOiJibHVlIixmaWxsT3BhY2l0eTowLjQsCmhvdmVyRmlsbENvbG9yOiJ3aGl0ZSIsaG92ZXJGaWxsT3BhY2l0eTowLjgsc3Ryb2tlQ29sb3I6ImJsdWUiLHN0cm9rZU9wYWNpdHk6MSxzdHJva2VXaWR0aDoyLHN0cm9rZUxpbmVjYXA6InJvdW5kIixzdHJva2VEYXNoc3R5bGU6InNvbGlkIixob3ZlclN0cm9rZUNvbG9yOiJyZWQiLGhvdmVyU3Ryb2tlT3BhY2l0eToxLGhvdmVyU3Ryb2tlV2lkdGg6MC4yLHBvaW50UmFkaXVzOjYsaG92ZXJQb2ludFJhZGl1czoxLGhvdmVyUG9pbnRVbml0OiIlIixwb2ludGVyRXZlbnRzOiJ2aXNpYmxlUGFpbnRlZCIsY3Vyc29yOiJwb2ludGVyIixmb250Q29sb3I6IiMwMDAwMDAiLGxhYmVsQWxpZ246ImNtIixsYWJlbE91dGxpbmVDb2xvcjoid2hpdGUiLGxhYmVsT3V0bGluZVdpZHRoOjN9LHRlbXBvcmFyeTp7ZmlsbENvbG9yOiIjNjZjY2NjIixmaWxsT3BhY2l0eTowLjIsaG92ZXJGaWxsQ29sb3I6IndoaXRlIixob3ZlckZpbGxPcGFjaXR5OjAuOCxzdHJva2VDb2xvcjoiIzY2Y2NjYyIsc3Ryb2tlT3BhY2l0eToxLApzdHJva2VMaW5lY2FwOiJyb3VuZCIsc3Ryb2tlV2lkdGg6MixzdHJva2VEYXNoc3R5bGU6InNvbGlkIixob3ZlclN0cm9rZUNvbG9yOiJyZWQiLGhvdmVyU3Ryb2tlT3BhY2l0eToxLGhvdmVyU3Ryb2tlV2lkdGg6MC4yLHBvaW50UmFkaXVzOjYsaG92ZXJQb2ludFJhZGl1czoxLGhvdmVyUG9pbnRVbml0OiIlIixwb2ludGVyRXZlbnRzOiJ2aXNpYmxlUGFpbnRlZCIsY3Vyc29yOiJpbmhlcml0Iixmb250Q29sb3I6IiMwMDAwMDAiLGxhYmVsQWxpZ246ImNtIixsYWJlbE91dGxpbmVDb2xvcjoid2hpdGUiLGxhYmVsT3V0bGluZVdpZHRoOjN9LCJkZWxldGUiOntkaXNwbGF5OiJub25lIn19O09wZW5MYXllcnMuU3R5bGU9T3BlbkxheWVycy5DbGFzcyh7aWQ6bnVsbCxuYW1lOm51bGwsdGl0bGU6bnVsbCxkZXNjcmlwdGlvbjpudWxsLGxheWVyTmFtZTpudWxsLGlzRGVmYXVsdDohMSxydWxlczpudWxsLGNvbnRleHQ6bnVsbCxkZWZhdWx0U3R5bGU6bnVsbCxkZWZhdWx0c1BlclN5bWJvbGl6ZXI6ITEscHJvcGVydHlTdHlsZXM6bnVsbCxpbml0aWFsaXplOmZ1bmN0aW9uKGEsYil7T3BlbkxheWVycy5VdGlsLmV4dGVuZCh0aGlzLGIpO3RoaXMucnVsZXM9W107YiYmYi5ydWxlcyYmdGhpcy5hZGRSdWxlcyhiLnJ1bGVzKTt0aGlzLnNldERlZmF1bHRTdHlsZShhfHxPcGVuTGF5ZXJzLkZlYXR1cmUuVmVjdG9yLnN0eWxlWyJkZWZhdWx0Il0pO3RoaXMuaWQ9T3BlbkxheWVycy5VdGlsLmNyZWF0ZVVuaXF1ZUlEKHRoaXMuQ0xBU1NfTkFNRSsiXyIpfSxkZXN0cm95OmZ1bmN0aW9uKCl7Zm9yKHZhciBhPTAsYj10aGlzLnJ1bGVzLmxlbmd0aDthPGI7YSsrKXRoaXMucnVsZXNbYV0uZGVzdHJveSgpLAp0aGlzLnJ1bGVzW2FdPW51bGw7dGhpcy5kZWZhdWx0U3R5bGU9dGhpcy5ydWxlcz1udWxsfSxjcmVhdGVTeW1ib2xpemVyOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj10aGlzLmRlZmF1bHRzUGVyU3ltYm9saXplcj97fTp0aGlzLmNyZWF0ZUxpdGVyYWxzKE9wZW5MYXllcnMuVXRpbC5leHRlbmQoe30sdGhpcy5kZWZhdWx0U3R5bGUpLGEpLGM9dGhpcy5ydWxlcyxkLGU9W10sZj0hMSxnPTAsaD1jLmxlbmd0aDtnPGg7ZysrKWQ9Y1tnXSxkLmV2YWx1YXRlKGEpJiYoZCBpbnN0YW5jZW9mIE9wZW5MYXllcnMuUnVsZSYmZC5lbHNlRmlsdGVyP2UucHVzaChkKTooZj0hMCx0aGlzLmFwcGx5U3ltYm9saXplcihkLGIsYSkpKTtpZighMT09ZiYmMDxlLmxlbmd0aClmb3IoZj0hMCxnPTAsaD1lLmxlbmd0aDtnPGg7ZysrKXRoaXMuYXBwbHlTeW1ib2xpemVyKGVbZ10sYixhKTswPGMubGVuZ3RoJiYhMT09ZiYmKGIuZGlzcGxheT0ibm9uZSIpO251bGwhPWIubGFiZWwmJiJzdHJpbmciIT09dHlwZW9mIGIubGFiZWwmJgooYi5sYWJlbD1TdHJpbmcoYi5sYWJlbCkpO3JldHVybiBifSxhcHBseVN5bWJvbGl6ZXI6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWMuZ2VvbWV0cnk/dGhpcy5nZXRTeW1ib2xpemVyUHJlZml4KGMuZ2VvbWV0cnkpOk9wZW5MYXllcnMuU3R5bGUuU1lNQk9MSVpFUl9QUkVGSVhFU1swXTthPWEuc3ltYm9saXplcltkXXx8YS5zeW1ib2xpemVyOyEwPT09dGhpcy5kZWZhdWx0c1BlclN5bWJvbGl6ZXImJihkPXRoaXMuZGVmYXVsdFN0eWxlLE9wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKGEse3BvaW50UmFkaXVzOmQucG9pbnRSYWRpdXN9KSwhMCE9PWEuc3Ryb2tlJiYhMCE9PWEuZ3JhcGhpY3x8T3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoYSx7c3Ryb2tlV2lkdGg6ZC5zdHJva2VXaWR0aCxzdHJva2VDb2xvcjpkLnN0cm9rZUNvbG9yLHN0cm9rZU9wYWNpdHk6ZC5zdHJva2VPcGFjaXR5LHN0cm9rZURhc2hzdHlsZTpkLnN0cm9rZURhc2hzdHlsZSxzdHJva2VMaW5lY2FwOmQuc3Ryb2tlTGluZWNhcH0pLAohMCE9PWEuZmlsbCYmITAhPT1hLmdyYXBoaWN8fE9wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKGEse2ZpbGxDb2xvcjpkLmZpbGxDb2xvcixmaWxsT3BhY2l0eTpkLmZpbGxPcGFjaXR5fSksITA9PT1hLmdyYXBoaWMmJk9wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKGEse3BvaW50UmFkaXVzOnRoaXMuZGVmYXVsdFN0eWxlLnBvaW50UmFkaXVzLGV4dGVybmFsR3JhcGhpYzp0aGlzLmRlZmF1bHRTdHlsZS5leHRlcm5hbEdyYXBoaWMsZ3JhcGhpY05hbWU6dGhpcy5kZWZhdWx0U3R5bGUuZ3JhcGhpY05hbWUsZ3JhcGhpY09wYWNpdHk6dGhpcy5kZWZhdWx0U3R5bGUuZ3JhcGhpY09wYWNpdHksZ3JhcGhpY1dpZHRoOnRoaXMuZGVmYXVsdFN0eWxlLmdyYXBoaWNXaWR0aCxncmFwaGljSGVpZ2h0OnRoaXMuZGVmYXVsdFN0eWxlLmdyYXBoaWNIZWlnaHQsZ3JhcGhpY1hPZmZzZXQ6dGhpcy5kZWZhdWx0U3R5bGUuZ3JhcGhpY1hPZmZzZXQsZ3JhcGhpY1lPZmZzZXQ6dGhpcy5kZWZhdWx0U3R5bGUuZ3JhcGhpY1lPZmZzZXR9KSk7CnJldHVybiB0aGlzLmNyZWF0ZUxpdGVyYWxzKE9wZW5MYXllcnMuVXRpbC5leHRlbmQoYixhKSxjKX0sY3JlYXRlTGl0ZXJhbHM6ZnVuY3Rpb24oYSxiKXt2YXIgYz1PcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHt9LGIuYXR0cmlidXRlc3x8Yi5kYXRhKTtPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKGMsdGhpcy5jb250ZXh0KTtmb3IodmFyIGQgaW4gdGhpcy5wcm9wZXJ0eVN0eWxlcylhW2RdPU9wZW5MYXllcnMuU3R5bGUuY3JlYXRlTGl0ZXJhbChhW2RdLGMsYixkKTtyZXR1cm4gYX0sZmluZFByb3BlcnR5U3R5bGVzOmZ1bmN0aW9uKCl7dmFyIGE9e307dGhpcy5hZGRQcm9wZXJ0eVN0eWxlcyhhLHRoaXMuZGVmYXVsdFN0eWxlKTtmb3IodmFyIGI9dGhpcy5ydWxlcyxjLGQsZT0wLGY9Yi5sZW5ndGg7ZTxmO2UrKyl7Yz1iW2VdLnN5bWJvbGl6ZXI7Zm9yKHZhciBnIGluIGMpaWYoZD1jW2ddLCJvYmplY3QiPT10eXBlb2YgZCl0aGlzLmFkZFByb3BlcnR5U3R5bGVzKGEsZCk7ZWxzZXt0aGlzLmFkZFByb3BlcnR5U3R5bGVzKGEsCmMpO2JyZWFrfX1yZXR1cm4gYX0sYWRkUHJvcGVydHlTdHlsZXM6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkO2ZvcihkIGluIGIpYz1iW2RdLCJzdHJpbmciPT10eXBlb2YgYyYmYy5tYXRjaCgvXCRce1x3K1x9LykmJihhW2RdPSEwKTtyZXR1cm4gYX0sYWRkUnVsZXM6ZnVuY3Rpb24oYSl7QXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkodGhpcy5ydWxlcyxhKTt0aGlzLnByb3BlcnR5U3R5bGVzPXRoaXMuZmluZFByb3BlcnR5U3R5bGVzKCl9LHNldERlZmF1bHRTdHlsZTpmdW5jdGlvbihhKXt0aGlzLmRlZmF1bHRTdHlsZT1hO3RoaXMucHJvcGVydHlTdHlsZXM9dGhpcy5maW5kUHJvcGVydHlTdHlsZXMoKX0sZ2V0U3ltYm9saXplclByZWZpeDpmdW5jdGlvbihhKXtmb3IodmFyIGI9T3BlbkxheWVycy5TdHlsZS5TWU1CT0xJWkVSX1BSRUZJWEVTLGM9MCxkPWIubGVuZ3RoO2M8ZDtjKyspaWYoLTEhPWEuQ0xBU1NfTkFNRS5pbmRleE9mKGJbY10pKXJldHVybiBiW2NdfSxjbG9uZTpmdW5jdGlvbigpe3ZhciBhPQpPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHt9LHRoaXMpO2lmKHRoaXMucnVsZXMpe2EucnVsZXM9W107Zm9yKHZhciBiPTAsYz10aGlzLnJ1bGVzLmxlbmd0aDtiPGM7KytiKWEucnVsZXMucHVzaCh0aGlzLnJ1bGVzW2JdLmNsb25lKCkpfWEuY29udGV4dD10aGlzLmNvbnRleHQmJk9wZW5MYXllcnMuVXRpbC5leHRlbmQoe30sdGhpcy5jb250ZXh0KTtiPU9wZW5MYXllcnMuVXRpbC5leHRlbmQoe30sdGhpcy5kZWZhdWx0U3R5bGUpO3JldHVybiBuZXcgT3BlbkxheWVycy5TdHlsZShiLGEpfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLlN0eWxlIn0pO09wZW5MYXllcnMuU3R5bGUuY3JlYXRlTGl0ZXJhbD1mdW5jdGlvbihhLGIsYyxkKXsic3RyaW5nIj09dHlwZW9mIGEmJi0xIT1hLmluZGV4T2YoIiR7IikmJihhPU9wZW5MYXllcnMuU3RyaW5nLmZvcm1hdChhLGIsW2MsZF0pLGE9aXNOYU4oYSl8fCFhP2E6cGFyc2VGbG9hdChhKSk7cmV0dXJuIGF9OwpPcGVuTGF5ZXJzLlN0eWxlLlNZTUJPTElaRVJfUFJFRklYRVM9WyJQb2ludCIsIkxpbmUiLCJQb2x5Z29uIiwiVGV4dCIsIlJhc3RlciJdO09wZW5MYXllcnMuRmlsdGVyPU9wZW5MYXllcnMuQ2xhc3Moe2luaXRpYWxpemU6ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5VdGlsLmV4dGVuZCh0aGlzLGEpfSxkZXN0cm95OmZ1bmN0aW9uKCl7fSxldmFsdWF0ZTpmdW5jdGlvbihhKXtyZXR1cm4hMH0sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbH0sdG9TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gT3BlbkxheWVycy5Gb3JtYXQmJk9wZW5MYXllcnMuRm9ybWF0LkNRTD9PcGVuTGF5ZXJzLkZvcm1hdC5DUUwucHJvdG90eXBlLndyaXRlKHRoaXMpOk9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0aGlzKX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5GaWx0ZXIifSk7T3BlbkxheWVycy5GaWx0ZXIuU3BhdGlhbD1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuRmlsdGVyLHt0eXBlOm51bGwscHJvcGVydHk6bnVsbCx2YWx1ZTpudWxsLGRpc3RhbmNlOm51bGwsZGlzdGFuY2VVbml0czpudWxsLGV2YWx1YXRlOmZ1bmN0aW9uKGEpe3ZhciBiPSExO3N3aXRjaCh0aGlzLnR5cGUpe2Nhc2UgT3BlbkxheWVycy5GaWx0ZXIuU3BhdGlhbC5CQk9YOmNhc2UgT3BlbkxheWVycy5GaWx0ZXIuU3BhdGlhbC5JTlRFUlNFQ1RTOmlmKGEuZ2VvbWV0cnkpe3ZhciBjPXRoaXMudmFsdWU7Ik9wZW5MYXllcnMuQm91bmRzIj09dGhpcy52YWx1ZS5DTEFTU19OQU1FJiYoYz10aGlzLnZhbHVlLnRvR2VvbWV0cnkoKSk7YS5nZW9tZXRyeS5pbnRlcnNlY3RzKGMpJiYoYj0hMCl9YnJlYWs7ZGVmYXVsdDp0aHJvdyBFcnJvcigiZXZhbHVhdGUgaXMgbm90IGltcGxlbWVudGVkIGZvciB0aGlzIGZpbHRlciB0eXBlLiIpO31yZXR1cm4gYn0sY2xvbmU6ZnVuY3Rpb24oKXt2YXIgYT0KT3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoe3ZhbHVlOnRoaXMudmFsdWUmJnRoaXMudmFsdWUuY2xvbmUmJnRoaXMudmFsdWUuY2xvbmUoKX0sdGhpcyk7cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLkZpbHRlci5TcGF0aWFsKGEpfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkZpbHRlci5TcGF0aWFsIn0pO09wZW5MYXllcnMuRmlsdGVyLlNwYXRpYWwuQkJPWD0iQkJPWCI7T3BlbkxheWVycy5GaWx0ZXIuU3BhdGlhbC5JTlRFUlNFQ1RTPSJJTlRFUlNFQ1RTIjtPcGVuTGF5ZXJzLkZpbHRlci5TcGF0aWFsLkRXSVRISU49IkRXSVRISU4iO09wZW5MYXllcnMuRmlsdGVyLlNwYXRpYWwuV0lUSElOPSJXSVRISU4iO09wZW5MYXllcnMuRmlsdGVyLlNwYXRpYWwuQ09OVEFJTlM9IkNPTlRBSU5TIjtPcGVuTGF5ZXJzLkZpbHRlci5GZWF0dXJlSWQ9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkZpbHRlcix7ZmlkczpudWxsLHR5cGU6IkZJRCIsaW5pdGlhbGl6ZTpmdW5jdGlvbihhKXt0aGlzLmZpZHM9W107T3BlbkxheWVycy5GaWx0ZXIucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxbYV0pfSxldmFsdWF0ZTpmdW5jdGlvbihhKXtmb3IodmFyIGI9MCxjPXRoaXMuZmlkcy5sZW5ndGg7YjxjO2IrKylpZigoYS5maWR8fGEuaWQpPT10aGlzLmZpZHNbYl0pcmV0dXJuITA7cmV0dXJuITF9LGNsb25lOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IE9wZW5MYXllcnMuRmlsdGVyLkZlYXR1cmVJZDtPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKGEsdGhpcyk7YS5maWRzPXRoaXMuZmlkcy5zbGljZSgpO3JldHVybiBhfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkZpbHRlci5GZWF0dXJlSWQifSk7T3BlbkxheWVycy5Gb3JtYXQuV0ZTVC52MT1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuRm9ybWF0LlhNTCx7bmFtZXNwYWNlczp7eGxpbms6Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiLHhzaToiaHR0cDovL3d3dy53My5vcmcvMjAwMS9YTUxTY2hlbWEtaW5zdGFuY2UiLHdmczoiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC93ZnMiLGdtbDoiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9nbWwiLG9nYzoiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9vZ2MiLG93czoiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9vd3MifSxkZWZhdWx0UHJlZml4OiJ3ZnMiLHZlcnNpb246bnVsbCxzY2hlbWFMb2NhdGlvbnM6bnVsbCxzcnNOYW1lOm51bGwsZXh0cmFjdEF0dHJpYnV0ZXM6ITAseHk6ITAsc3RhdGVOYW1lOm51bGwsaW5pdGlhbGl6ZTpmdW5jdGlvbihhKXt0aGlzLnN0YXRlTmFtZT17fTt0aGlzLnN0YXRlTmFtZVtPcGVuTGF5ZXJzLlN0YXRlLklOU0VSVF09IndmczpJbnNlcnQiO3RoaXMuc3RhdGVOYW1lW09wZW5MYXllcnMuU3RhdGUuVVBEQVRFXT0KIndmczpVcGRhdGUiO3RoaXMuc3RhdGVOYW1lW09wZW5MYXllcnMuU3RhdGUuREVMRVRFXT0id2ZzOkRlbGV0ZSI7T3BlbkxheWVycy5Gb3JtYXQuWE1MLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsW2FdKX0sZ2V0U3JzTmFtZTpmdW5jdGlvbihhLGIpe3ZhciBjPWImJmIuc3JzTmFtZTtjfHwoYz1hJiZhLmxheWVyP2EubGF5ZXIucHJvamVjdGlvbi5nZXRDb2RlKCk6dGhpcy5zcnNOYW1lKTtyZXR1cm4gY30scmVhZDpmdW5jdGlvbihhLGIpe2I9Ynx8e307T3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoYix7b3V0cHV0OiJmZWF0dXJlcyJ9KTsic3RyaW5nIj09dHlwZW9mIGEmJihhPU9wZW5MYXllcnMuRm9ybWF0LlhNTC5wcm90b3R5cGUucmVhZC5hcHBseSh0aGlzLFthXSkpO2EmJjk9PWEubm9kZVR5cGUmJihhPWEuZG9jdW1lbnRFbGVtZW50KTt2YXIgYz17fTthJiZ0aGlzLnJlYWROb2RlKGEsYywhMCk7Yy5mZWF0dXJlcyYmImZlYXR1cmVzIj09PWIub3V0cHV0JiYKKGM9Yy5mZWF0dXJlcyk7cmV0dXJuIGN9LHJlYWRlcnM6e3dmczp7RmVhdHVyZUNvbGxlY3Rpb246ZnVuY3Rpb24oYSxiKXtiLmZlYXR1cmVzPVtdO3RoaXMucmVhZENoaWxkTm9kZXMoYSxiKX19fSx3cml0ZTpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMud3JpdGVOb2RlKCJ3ZnM6VHJhbnNhY3Rpb24iLHtmZWF0dXJlczphLG9wdGlvbnM6Yn0pLGQ9dGhpcy5zY2hlbWFMb2NhdGlvbkF0dHIoKTtkJiZ0aGlzLnNldEF0dHJpYnV0ZU5TKGMsdGhpcy5uYW1lc3BhY2VzLnhzaSwieHNpOnNjaGVtYUxvY2F0aW9uIixkKTtyZXR1cm4gT3BlbkxheWVycy5Gb3JtYXQuWE1MLnByb3RvdHlwZS53cml0ZS5hcHBseSh0aGlzLFtjXSl9LHdyaXRlcnM6e3dmczp7R2V0RmVhdHVyZTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoIndmczpHZXRGZWF0dXJlIix7YXR0cmlidXRlczp7c2VydmljZToiV0ZTIix2ZXJzaW9uOnRoaXMudmVyc2lvbixoYW5kbGU6YSYmYS5oYW5kbGUsCm91dHB1dEZvcm1hdDphJiZhLm91dHB1dEZvcm1hdCxtYXhGZWF0dXJlczphJiZhLm1heEZlYXR1cmVzLCJ4c2k6c2NoZW1hTG9jYXRpb24iOnRoaXMuc2NoZW1hTG9jYXRpb25BdHRyKGEpfX0pO2lmKCJzdHJpbmciPT10eXBlb2YgdGhpcy5mZWF0dXJlVHlwZSl0aGlzLndyaXRlTm9kZSgiUXVlcnkiLGEsYik7ZWxzZSBmb3IodmFyIGM9MCxkPXRoaXMuZmVhdHVyZVR5cGUubGVuZ3RoO2M8ZDtjKyspYS5mZWF0dXJlVHlwZT10aGlzLmZlYXR1cmVUeXBlW2NdLHRoaXMud3JpdGVOb2RlKCJRdWVyeSIsYSxiKTtyZXR1cm4gYn0sVHJhbnNhY3Rpb246ZnVuY3Rpb24oYSl7YT1hfHx7fTt2YXIgYj1hLm9wdGlvbnN8fHt9LGM9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJ3ZnM6VHJhbnNhY3Rpb24iLHthdHRyaWJ1dGVzOntzZXJ2aWNlOiJXRlMiLHZlcnNpb246dGhpcy52ZXJzaW9uLGhhbmRsZTpiLmhhbmRsZX19KSxkLGU9YS5mZWF0dXJlcztpZihlKXshMD09PWIubXVsdGkmJk9wZW5MYXllcnMuVXRpbC5leHRlbmQodGhpcy5nZW9tZXRyeVR5cGVzLAp7Ik9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQiOiJNdWx0aVBvaW50IiwiT3BlbkxheWVycy5HZW9tZXRyeS5MaW5lU3RyaW5nIjohMD09PXRoaXMubXVsdGlDdXJ2ZT8iTXVsdGlDdXJ2ZSI6Ik11bHRpTGluZVN0cmluZyIsIk9wZW5MYXllcnMuR2VvbWV0cnkuUG9seWdvbiI6ITA9PT10aGlzLm11bHRpU3VyZmFjZT8iTXVsdGlTdXJmYWNlIjoiTXVsdGlQb2x5Z29uIn0pO3ZhciBmLGc7YT0wO2ZvcihkPWUubGVuZ3RoO2E8ZDsrK2EpZz1lW2FdLChmPXRoaXMuc3RhdGVOYW1lW2cuc3RhdGVdKSYmdGhpcy53cml0ZU5vZGUoZix7ZmVhdHVyZTpnLG9wdGlvbnM6Yn0sYyk7ITA9PT1iLm11bHRpJiZ0aGlzLnNldEdlb21ldHJ5VHlwZXMoKX1pZihiLm5hdGl2ZUVsZW1lbnRzKWZvcihhPTAsZD1iLm5hdGl2ZUVsZW1lbnRzLmxlbmd0aDthPGQ7KythKXRoaXMud3JpdGVOb2RlKCJ3ZnM6TmF0aXZlIixiLm5hdGl2ZUVsZW1lbnRzW2FdLGMpO3JldHVybiBjfSxOYXRpdmU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygid2ZzOk5hdGl2ZSIsCnthdHRyaWJ1dGVzOnt2ZW5kb3JJZDphLnZlbmRvcklkLHNhZmVUb0lnbm9yZTphLnNhZmVUb0lnbm9yZX0sdmFsdWU6YS52YWx1ZX0pfSxJbnNlcnQ6ZnVuY3Rpb24oYSl7dmFyIGI9YS5mZWF0dXJlO2E9YS5vcHRpb25zO2E9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJ3ZnM6SW5zZXJ0Iix7YXR0cmlidXRlczp7aGFuZGxlOmEmJmEuaGFuZGxlfX0pO3RoaXMuc3JzTmFtZT10aGlzLmdldFNyc05hbWUoYik7dGhpcy53cml0ZU5vZGUoImZlYXR1cmU6X3R5cGVOYW1lIixiLGEpO3JldHVybiBhfSxVcGRhdGU6ZnVuY3Rpb24oYSl7dmFyIGI9YS5mZWF0dXJlO2E9YS5vcHRpb25zO2E9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJ3ZnM6VXBkYXRlIix7YXR0cmlidXRlczp7aGFuZGxlOmEmJmEuaGFuZGxlLHR5cGVOYW1lOih0aGlzLmZlYXR1cmVOUz90aGlzLmZlYXR1cmVQcmVmaXgrIjoiOiIiKSt0aGlzLmZlYXR1cmVUeXBlfX0pO3RoaXMuZmVhdHVyZU5TJiZhLnNldEF0dHJpYnV0ZSgieG1sbnM6IisKdGhpcy5mZWF0dXJlUHJlZml4LHRoaXMuZmVhdHVyZU5TKTt2YXIgYz1iLm1vZGlmaWVkO251bGw9PT10aGlzLmdlb21ldHJ5TmFtZXx8YyYmdm9pZCAwPT09Yy5nZW9tZXRyeXx8KHRoaXMuc3JzTmFtZT10aGlzLmdldFNyc05hbWUoYiksdGhpcy53cml0ZU5vZGUoIlByb3BlcnR5Iix7bmFtZTp0aGlzLmdlb21ldHJ5TmFtZSx2YWx1ZTpiLmdlb21ldHJ5fSxhKSk7Zm9yKHZhciBkIGluIGIuYXR0cmlidXRlcyl2b2lkIDA9PT1iLmF0dHJpYnV0ZXNbZF18fGMmJmMuYXR0cmlidXRlcyYmKCFjLmF0dHJpYnV0ZXN8fHZvaWQgMD09PWMuYXR0cmlidXRlc1tkXSl8fHRoaXMud3JpdGVOb2RlKCJQcm9wZXJ0eSIse25hbWU6ZCx2YWx1ZTpiLmF0dHJpYnV0ZXNbZF19LGEpO3RoaXMud3JpdGVOb2RlKCJvZ2M6RmlsdGVyIixuZXcgT3BlbkxheWVycy5GaWx0ZXIuRmVhdHVyZUlkKHtmaWRzOltiLmZpZF19KSxhKTtyZXR1cm4gYX0sUHJvcGVydHk6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJ3ZnM6UHJvcGVydHkiKTsKdGhpcy53cml0ZU5vZGUoIk5hbWUiLGEubmFtZSxiKTtudWxsIT09YS52YWx1ZSYmdGhpcy53cml0ZU5vZGUoIlZhbHVlIixhLnZhbHVlLGIpO3JldHVybiBifSxOYW1lOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoIndmczpOYW1lIix7dmFsdWU6YX0pfSxWYWx1ZTpmdW5jdGlvbihhKXt2YXIgYjthIGluc3RhbmNlb2YgT3BlbkxheWVycy5HZW9tZXRyeT8oYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoIndmczpWYWx1ZSIpLGE9dGhpcy53cml0ZU5vZGUoImZlYXR1cmU6X2dlb21ldHJ5IixhKS5maXJzdENoaWxkLGIuYXBwZW5kQ2hpbGQoYSkpOmI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJ3ZnM6VmFsdWUiLHt2YWx1ZTphfSk7cmV0dXJuIGJ9LERlbGV0ZTpmdW5jdGlvbihhKXt2YXIgYj1hLmZlYXR1cmU7YT1hLm9wdGlvbnM7YT10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoIndmczpEZWxldGUiLHthdHRyaWJ1dGVzOntoYW5kbGU6YSYmCmEuaGFuZGxlLHR5cGVOYW1lOih0aGlzLmZlYXR1cmVOUz90aGlzLmZlYXR1cmVQcmVmaXgrIjoiOiIiKSt0aGlzLmZlYXR1cmVUeXBlfX0pO3RoaXMuZmVhdHVyZU5TJiZhLnNldEF0dHJpYnV0ZSgieG1sbnM6Iit0aGlzLmZlYXR1cmVQcmVmaXgsdGhpcy5mZWF0dXJlTlMpO3RoaXMud3JpdGVOb2RlKCJvZ2M6RmlsdGVyIixuZXcgT3BlbkxheWVycy5GaWx0ZXIuRmVhdHVyZUlkKHtmaWRzOltiLmZpZF19KSxhKTtyZXR1cm4gYX19fSxzY2hlbWFMb2NhdGlvbkF0dHI6ZnVuY3Rpb24oYSl7YT1PcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHtmZWF0dXJlUHJlZml4OnRoaXMuZmVhdHVyZVByZWZpeCxzY2hlbWE6dGhpcy5zY2hlbWF9LGEpO3ZhciBiPU9wZW5MYXllcnMuVXRpbC5leHRlbmQoe30sdGhpcy5zY2hlbWFMb2NhdGlvbnMpO2Euc2NoZW1hJiYoYlthLmZlYXR1cmVQcmVmaXhdPWEuc2NoZW1hKTthPVtdO3ZhciBjLGQ7Zm9yKGQgaW4gYikoYz10aGlzLm5hbWVzcGFjZXNbZF0pJiYKYS5wdXNoKGMrIiAiK2JbZF0pO3JldHVybiBhLmpvaW4oIiAiKXx8dm9pZCAwfSxzZXRGaWx0ZXJQcm9wZXJ0eTpmdW5jdGlvbihhKXtpZihhLmZpbHRlcnMpZm9yKHZhciBiPTAsYz1hLmZpbHRlcnMubGVuZ3RoO2I8YzsrK2IpT3BlbkxheWVycy5Gb3JtYXQuV0ZTVC52MS5wcm90b3R5cGUuc2V0RmlsdGVyUHJvcGVydHkuY2FsbCh0aGlzLGEuZmlsdGVyc1tiXSk7ZWxzZSBhIGluc3RhbmNlb2YgT3BlbkxheWVycy5GaWx0ZXIuU3BhdGlhbCYmIWEucHJvcGVydHkmJihhLnByb3BlcnR5PXRoaXMuZ2VvbWV0cnlOYW1lKX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Gb3JtYXQuV0ZTVC52MSJ9KTtPcGVuTGF5ZXJzLkZvcm1hdC5PR0NFeGNlcHRpb25SZXBvcnQ9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkZvcm1hdC5YTUwse25hbWVzcGFjZXM6e29nYzoiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9vZ2MifSxyZWdFeGVzOnt0cmltU3BhY2U6L15ccyp8XHMqJC9nLHJlbW92ZVNwYWNlOi9ccyovZyxzcGxpdFNwYWNlOi9ccysvLHRyaW1Db21tYTovXHMqLFxzKi9nfSxkZWZhdWx0UHJlZml4OiJvZ2MiLHJlYWQ6ZnVuY3Rpb24oYSl7InN0cmluZyI9PXR5cGVvZiBhJiYoYT1PcGVuTGF5ZXJzLkZvcm1hdC5YTUwucHJvdG90eXBlLnJlYWQuYXBwbHkodGhpcyxbYV0pKTt2YXIgYj17ZXhjZXB0aW9uUmVwb3J0Om51bGx9O2EuZG9jdW1lbnRFbGVtZW50JiYodGhpcy5yZWFkQ2hpbGROb2RlcyhhLGIpLG51bGw9PT1iLmV4Y2VwdGlvblJlcG9ydCYmKGI9KG5ldyBPcGVuTGF5ZXJzLkZvcm1hdC5PV1NDb21tb24pLnJlYWQoYSkpKTtyZXR1cm4gYn0scmVhZGVyczp7b2djOntTZXJ2aWNlRXhjZXB0aW9uUmVwb3J0OmZ1bmN0aW9uKGEsCmIpe2IuZXhjZXB0aW9uUmVwb3J0PXtleGNlcHRpb25zOltdfTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYi5leGNlcHRpb25SZXBvcnQpfSxTZXJ2aWNlRXhjZXB0aW9uOmZ1bmN0aW9uKGEsYil7dmFyIGM9e2NvZGU6YS5nZXRBdHRyaWJ1dGUoImNvZGUiKSxsb2NhdG9yOmEuZ2V0QXR0cmlidXRlKCJsb2NhdG9yIiksdGV4dDp0aGlzLmdldENoaWxkVmFsdWUoYSl9O2IuZXhjZXB0aW9ucy5wdXNoKGMpfX19LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuRm9ybWF0Lk9HQ0V4Y2VwdGlvblJlcG9ydCJ9KTtPcGVuTGF5ZXJzLkZvcm1hdC5YTUwuVmVyc2lvbmVkT0dDPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Gb3JtYXQuWE1MLHtkZWZhdWx0VmVyc2lvbjpudWxsLHZlcnNpb246bnVsbCxwcm9maWxlOm51bGwsYWxsb3dGYWxsYmFjazohMSxuYW1lOm51bGwsc3RyaW5naWZ5T3V0cHV0OiExLHBhcnNlcjpudWxsLGluaXRpYWxpemU6ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5Gb3JtYXQuWE1MLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsW2FdKTthPXRoaXMuQ0xBU1NfTkFNRTt0aGlzLm5hbWU9YS5zdWJzdHJpbmcoYS5sYXN0SW5kZXhPZigiLiIpKzEpfSxnZXRWZXJzaW9uOmZ1bmN0aW9uKGEsYil7dmFyIGM7YT8oYz10aGlzLnZlcnNpb24sY3x8KGM9YS5nZXRBdHRyaWJ1dGUoInZlcnNpb24iKSxjfHwoYz10aGlzLmRlZmF1bHRWZXJzaW9uKSkpOmM9YiYmYi52ZXJzaW9ufHx0aGlzLnZlcnNpb258fHRoaXMuZGVmYXVsdFZlcnNpb247cmV0dXJuIGN9LGdldFBhcnNlcjpmdW5jdGlvbihhKXthPQphfHx0aGlzLmRlZmF1bHRWZXJzaW9uO3ZhciBiPXRoaXMucHJvZmlsZT8iXyIrdGhpcy5wcm9maWxlOiIiO2lmKCF0aGlzLnBhcnNlcnx8dGhpcy5wYXJzZXIuVkVSU0lPTiE9YSl7dmFyIGM9T3BlbkxheWVycy5Gb3JtYXRbdGhpcy5uYW1lXVsidiIrYS5yZXBsYWNlKC9cLi9nLCJfIikrYl07aWYoIWMmJigiIiE9PWImJnRoaXMuYWxsb3dGYWxsYmFjayYmKGI9IiIsYz1PcGVuTGF5ZXJzLkZvcm1hdFt0aGlzLm5hbWVdWyJ2IithLnJlcGxhY2UoL1wuL2csIl8iKV0pLCFjKSl0aHJvdyJDYW4ndCBmaW5kIGEgIit0aGlzLm5hbWUrIiBwYXJzZXIgZm9yIHZlcnNpb24gIithK2I7dGhpcy5wYXJzZXI9bmV3IGModGhpcy5vcHRpb25zKX1yZXR1cm4gdGhpcy5wYXJzZXJ9LHdyaXRlOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5nZXRWZXJzaW9uKG51bGwsYik7dGhpcy5wYXJzZXI9dGhpcy5nZXRQYXJzZXIoYyk7Yz10aGlzLnBhcnNlci53cml0ZShhLGIpO3JldHVybiExPT09dGhpcy5zdHJpbmdpZnlPdXRwdXQ/CmM6T3BlbkxheWVycy5Gb3JtYXQuWE1MLnByb3RvdHlwZS53cml0ZS5hcHBseSh0aGlzLFtjXSl9LHJlYWQ6ZnVuY3Rpb24oYSxiKXsic3RyaW5nIj09dHlwZW9mIGEmJihhPU9wZW5MYXllcnMuRm9ybWF0LlhNTC5wcm90b3R5cGUucmVhZC5hcHBseSh0aGlzLFthXSkpO3ZhciBjPXRoaXMuZ2V0VmVyc2lvbihhLmRvY3VtZW50RWxlbWVudCk7dGhpcy5wYXJzZXI9dGhpcy5nZXRQYXJzZXIoYyk7dmFyIGQ9dGhpcy5wYXJzZXIucmVhZChhLGIpLGU9dGhpcy5wYXJzZXIuZXJyb3JQcm9wZXJ0eXx8bnVsbDtudWxsIT09ZSYmdm9pZCAwPT09ZFtlXSYmKGU9bmV3IE9wZW5MYXllcnMuRm9ybWF0Lk9HQ0V4Y2VwdGlvblJlcG9ydCxkLmVycm9yPWUucmVhZChhKSk7ZC52ZXJzaW9uPWM7cmV0dXJuIGR9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuRm9ybWF0LlhNTC5WZXJzaW9uZWRPR0MifSk7T3BlbkxheWVycy5GaWx0ZXIuTG9naWNhbD1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuRmlsdGVyLHtmaWx0ZXJzOm51bGwsdHlwZTpudWxsLGluaXRpYWxpemU6ZnVuY3Rpb24oYSl7dGhpcy5maWx0ZXJzPVtdO09wZW5MYXllcnMuRmlsdGVyLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsW2FdKX0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuZmlsdGVycz1udWxsO09wZW5MYXllcnMuRmlsdGVyLnByb3RvdHlwZS5kZXN0cm95LmFwcGx5KHRoaXMpfSxldmFsdWF0ZTpmdW5jdGlvbihhKXt2YXIgYixjO3N3aXRjaCh0aGlzLnR5cGUpe2Nhc2UgT3BlbkxheWVycy5GaWx0ZXIuTG9naWNhbC5BTkQ6Yj0wO2ZvcihjPXRoaXMuZmlsdGVycy5sZW5ndGg7YjxjO2IrKylpZighMT09dGhpcy5maWx0ZXJzW2JdLmV2YWx1YXRlKGEpKXJldHVybiExO3JldHVybiEwO2Nhc2UgT3BlbkxheWVycy5GaWx0ZXIuTG9naWNhbC5PUjpiPTA7Zm9yKGM9dGhpcy5maWx0ZXJzLmxlbmd0aDtiPApjO2IrKylpZighMD09dGhpcy5maWx0ZXJzW2JdLmV2YWx1YXRlKGEpKXJldHVybiEwO3JldHVybiExO2Nhc2UgT3BlbkxheWVycy5GaWx0ZXIuTG9naWNhbC5OT1Q6cmV0dXJuIXRoaXMuZmlsdGVyc1swXS5ldmFsdWF0ZShhKX19LGNsb25lOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPVtdLGI9MCxjPXRoaXMuZmlsdGVycy5sZW5ndGg7YjxjOysrYilhLnB1c2godGhpcy5maWx0ZXJzW2JdLmNsb25lKCkpO3JldHVybiBuZXcgT3BlbkxheWVycy5GaWx0ZXIuTG9naWNhbCh7dHlwZTp0aGlzLnR5cGUsZmlsdGVyczphfSl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuRmlsdGVyLkxvZ2ljYWwifSk7T3BlbkxheWVycy5GaWx0ZXIuTG9naWNhbC5BTkQ9IiYmIjtPcGVuTGF5ZXJzLkZpbHRlci5Mb2dpY2FsLk9SPSJ8fCI7T3BlbkxheWVycy5GaWx0ZXIuTG9naWNhbC5OT1Q9IiEiO09wZW5MYXllcnMuRmlsdGVyLkNvbXBhcmlzb249T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkZpbHRlcix7dHlwZTpudWxsLHByb3BlcnR5Om51bGwsdmFsdWU6bnVsbCxtYXRjaENhc2U6ITAsbG93ZXJCb3VuZGFyeTpudWxsLHVwcGVyQm91bmRhcnk6bnVsbCxpbml0aWFsaXplOmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuRmlsdGVyLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsW2FdKTt0aGlzLnR5cGU9PT1PcGVuTGF5ZXJzLkZpbHRlci5Db21wYXJpc29uLkxJS0UmJnZvaWQgMD09PWEubWF0Y2hDYXNlJiYodGhpcy5tYXRjaENhc2U9bnVsbCl9LGV2YWx1YXRlOmZ1bmN0aW9uKGEpe2EgaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLkZlYXR1cmUuVmVjdG9yJiYoYT1hLmF0dHJpYnV0ZXMpO3ZhciBiPSExO2E9YVt0aGlzLnByb3BlcnR5XTtzd2l0Y2godGhpcy50eXBlKXtjYXNlIE9wZW5MYXllcnMuRmlsdGVyLkNvbXBhcmlzb24uRVFVQUxfVE86Yj10aGlzLnZhbHVlOwpiPXRoaXMubWF0Y2hDYXNlfHwic3RyaW5nIiE9dHlwZW9mIGF8fCJzdHJpbmciIT10eXBlb2YgYj9hPT1iOmEudG9VcHBlckNhc2UoKT09Yi50b1VwcGVyQ2FzZSgpO2JyZWFrO2Nhc2UgT3BlbkxheWVycy5GaWx0ZXIuQ29tcGFyaXNvbi5OT1RfRVFVQUxfVE86Yj10aGlzLnZhbHVlO2I9dGhpcy5tYXRjaENhc2V8fCJzdHJpbmciIT10eXBlb2YgYXx8InN0cmluZyIhPXR5cGVvZiBiP2EhPWI6YS50b1VwcGVyQ2FzZSgpIT1iLnRvVXBwZXJDYXNlKCk7YnJlYWs7Y2FzZSBPcGVuTGF5ZXJzLkZpbHRlci5Db21wYXJpc29uLkxFU1NfVEhBTjpiPWE8dGhpcy52YWx1ZTticmVhaztjYXNlIE9wZW5MYXllcnMuRmlsdGVyLkNvbXBhcmlzb24uR1JFQVRFUl9USEFOOmI9YT50aGlzLnZhbHVlO2JyZWFrO2Nhc2UgT3BlbkxheWVycy5GaWx0ZXIuQ29tcGFyaXNvbi5MRVNTX1RIQU5fT1JfRVFVQUxfVE86Yj1hPD10aGlzLnZhbHVlO2JyZWFrO2Nhc2UgT3BlbkxheWVycy5GaWx0ZXIuQ29tcGFyaXNvbi5HUkVBVEVSX1RIQU5fT1JfRVFVQUxfVE86Yj0KYT49dGhpcy52YWx1ZTticmVhaztjYXNlIE9wZW5MYXllcnMuRmlsdGVyLkNvbXBhcmlzb24uQkVUV0VFTjpiPWE+PXRoaXMubG93ZXJCb3VuZGFyeSYmYTw9dGhpcy51cHBlckJvdW5kYXJ5O2JyZWFrO2Nhc2UgT3BlbkxheWVycy5GaWx0ZXIuQ29tcGFyaXNvbi5MSUtFOmI9UmVnRXhwKHRoaXMudmFsdWUsImdpIikudGVzdChhKTticmVhaztjYXNlIE9wZW5MYXllcnMuRmlsdGVyLkNvbXBhcmlzb24uSVNfTlVMTDpiPW51bGw9PT1hfXJldHVybiBifSx2YWx1ZTJyZWdleDpmdW5jdGlvbihhLGIsYyl7aWYoIi4iPT1hKXRocm93IEVycm9yKCInLicgaXMgYW4gdW5zdXBwb3J0ZWQgd2lsZENhcmQgY2hhcmFjdGVyIGZvciBPcGVuTGF5ZXJzLkZpbHRlci5Db21wYXJpc29uIik7YT1hP2E6IioiO2I9Yj9iOiIuIjt0aGlzLnZhbHVlPXRoaXMudmFsdWUucmVwbGFjZShSZWdFeHAoIlxcIisoYz9jOiIhIikrIigufCQpIiwiZyIpLCJcXCQxIik7dGhpcy52YWx1ZT10aGlzLnZhbHVlLnJlcGxhY2UoUmVnRXhwKCJcXCIrCmIsImciKSwiLiIpO3RoaXMudmFsdWU9dGhpcy52YWx1ZS5yZXBsYWNlKFJlZ0V4cCgiXFwiK2EsImciKSwiLioiKTt0aGlzLnZhbHVlPXRoaXMudmFsdWUucmVwbGFjZShSZWdFeHAoIlxcXFwuXFwqIiwiZyIpLCJcXCIrYSk7cmV0dXJuIHRoaXMudmFsdWU9dGhpcy52YWx1ZS5yZXBsYWNlKFJlZ0V4cCgiXFxcXFxcLiIsImciKSwiXFwiK2IpfSxyZWdleDJ2YWx1ZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMudmFsdWUsYT1hLnJlcGxhY2UoLyEvZywiISEiKSxhPWEucmVwbGFjZSgvKFxcKT9cXFwuL2csZnVuY3Rpb24oYSxjKXtyZXR1cm4gYz9hOiIhLiJ9KSxhPWEucmVwbGFjZSgvKFxcKT9cXFwqL2csZnVuY3Rpb24oYSxjKXtyZXR1cm4gYz9hOiIhKiJ9KSxhPWEucmVwbGFjZSgvXFxcXC9nLCJcXCIpO3JldHVybiBhPWEucmVwbGFjZSgvXC5cKi9nLCIqIil9LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuIE9wZW5MYXllcnMuVXRpbC5leHRlbmQobmV3IE9wZW5MYXllcnMuRmlsdGVyLkNvbXBhcmlzb24sCnRoaXMpfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkZpbHRlci5Db21wYXJpc29uIn0pO09wZW5MYXllcnMuRmlsdGVyLkNvbXBhcmlzb24uRVFVQUxfVE89Ij09IjtPcGVuTGF5ZXJzLkZpbHRlci5Db21wYXJpc29uLk5PVF9FUVVBTF9UTz0iIT0iO09wZW5MYXllcnMuRmlsdGVyLkNvbXBhcmlzb24uTEVTU19USEFOPSI8IjtPcGVuTGF5ZXJzLkZpbHRlci5Db21wYXJpc29uLkdSRUFURVJfVEhBTj0iPiI7T3BlbkxheWVycy5GaWx0ZXIuQ29tcGFyaXNvbi5MRVNTX1RIQU5fT1JfRVFVQUxfVE89Ijw9IjtPcGVuTGF5ZXJzLkZpbHRlci5Db21wYXJpc29uLkdSRUFURVJfVEhBTl9PUl9FUVVBTF9UTz0iPj0iO09wZW5MYXllcnMuRmlsdGVyLkNvbXBhcmlzb24uQkVUV0VFTj0iLi4iO09wZW5MYXllcnMuRmlsdGVyLkNvbXBhcmlzb24uTElLRT0ifiI7T3BlbkxheWVycy5GaWx0ZXIuQ29tcGFyaXNvbi5JU19OVUxMPSJOVUxMIjtPcGVuTGF5ZXJzLkZvcm1hdC5GaWx0ZXI9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkZvcm1hdC5YTUwuVmVyc2lvbmVkT0dDLHtkZWZhdWx0VmVyc2lvbjoiMS4wLjAiLENMQVNTX05BTUU6Ik9wZW5MYXllcnMuRm9ybWF0LkZpbHRlciJ9KTtPcGVuTGF5ZXJzLkZpbHRlci5GdW5jdGlvbj1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuRmlsdGVyLHtuYW1lOm51bGwscGFyYW1zOm51bGwsQ0xBU1NfTkFNRToiT3BlbkxheWVycy5GaWx0ZXIuRnVuY3Rpb24ifSk7T3BlbkxheWVycy5EYXRlPXtkYXRlUmVnRXg6L14oPzooXGR7NH0pKD86LShcZHsyfSkoPzotKFxkezJ9KSk/KT8pPyg/Oig/OlQoXGR7MSwyfSk6KFxkezJ9KTooXGR7Mn0oPzpcLlxkKyk/KShafCg/OlsrLV1cZHsxLDJ9KD86OihcZHsyfSkpPykpKXxaKT8kLyx0b0lTT1N0cmluZzpmdW5jdGlvbigpe3JldHVybiJ0b0lTT1N0cmluZyJpbiBEYXRlLnByb3RvdHlwZT9mdW5jdGlvbihhKXtyZXR1cm4gYS50b0lTT1N0cmluZygpfTpmdW5jdGlvbihhKXtyZXR1cm4gaXNOYU4oYS5nZXRUaW1lKCkpPyJJbnZhbGlkIERhdGUiOmEuZ2V0VVRDRnVsbFllYXIoKSsiLSIrT3BlbkxheWVycy5OdW1iZXIuemVyb1BhZChhLmdldFVUQ01vbnRoKCkrMSwyKSsiLSIrT3BlbkxheWVycy5OdW1iZXIuemVyb1BhZChhLmdldFVUQ0RhdGUoKSwyKSsiVCIrT3BlbkxheWVycy5OdW1iZXIuemVyb1BhZChhLmdldFVUQ0hvdXJzKCksMikrIjoiK09wZW5MYXllcnMuTnVtYmVyLnplcm9QYWQoYS5nZXRVVENNaW51dGVzKCksCjIpKyI6IitPcGVuTGF5ZXJzLk51bWJlci56ZXJvUGFkKGEuZ2V0VVRDU2Vjb25kcygpLDIpKyIuIitPcGVuTGF5ZXJzLk51bWJlci56ZXJvUGFkKGEuZ2V0VVRDTWlsbGlzZWNvbmRzKCksMykrIloifX0oKSxwYXJzZTpmdW5jdGlvbihhKXt2YXIgYjtpZigoYT1hLm1hdGNoKHRoaXMuZGF0ZVJlZ0V4KSkmJihhWzFdfHxhWzddKSl7Yj1wYXJzZUludChhWzFdLDEwKXx8MDt2YXIgYz1wYXJzZUludChhWzJdLDEwKS0xfHwwLGQ9cGFyc2VJbnQoYVszXSwxMCl8fDE7Yj1uZXcgRGF0ZShEYXRlLlVUQyhiLGMsZCkpO2lmKGM9YVs3XSl7dmFyIGQ9cGFyc2VJbnQoYVs0XSwxMCksZT1wYXJzZUludChhWzVdLDEwKSxmPXBhcnNlRmxvYXQoYVs2XSksZz1mfDAsZj1NYXRoLnJvdW5kKDFFMyooZi1nKSk7Yi5zZXRVVENIb3VycyhkLGUsZyxmKTsiWiIhPT1jJiYoYz1wYXJzZUludChjLDEwKSxhPXBhcnNlSW50KGFbOF0sMTApfHwwLGE9LTFFMyooNjAqNjAqYys2MCphKSxiPW5ldyBEYXRlKGIuZ2V0VGltZSgpKwphKSl9fWVsc2UgYj1uZXcgRGF0ZSgiaW52YWxpZCIpO3JldHVybiBifX07T3BlbkxheWVycy5Gb3JtYXQuRmlsdGVyLnYxPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Gb3JtYXQuWE1MLHtuYW1lc3BhY2VzOntvZ2M6Imh0dHA6Ly93d3cub3Blbmdpcy5uZXQvb2djIixnbWw6Imh0dHA6Ly93d3cub3Blbmdpcy5uZXQvZ21sIix4bGluazoiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIseHNpOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxL1hNTFNjaGVtYS1pbnN0YW5jZSJ9LGRlZmF1bHRQcmVmaXg6Im9nYyIsc2NoZW1hTG9jYXRpb246bnVsbCxpbml0aWFsaXplOmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuRm9ybWF0LlhNTC5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLFthXSl9LHJlYWQ6ZnVuY3Rpb24oYSl7dmFyIGI9e307dGhpcy5yZWFkZXJzLm9nYy5GaWx0ZXIuYXBwbHkodGhpcyxbYSxiXSk7cmV0dXJuIGIuZmlsdGVyfSxyZWFkZXJzOntvZ2M6e19leHByZXNzaW9uOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0iIixjPWEuZmlyc3RDaGlsZDtjO2M9CmMubmV4dFNpYmxpbmcpc3dpdGNoKGMubm9kZVR5cGUpe2Nhc2UgMTphPXRoaXMucmVhZE5vZGUoYyk7YS5wcm9wZXJ0eT9iKz0iJHsiK2EucHJvcGVydHkrIn0iOnZvaWQgMCE9PWEudmFsdWUmJihiKz1hLnZhbHVlKTticmVhaztjYXNlIDM6Y2FzZSA0OmIrPWMubm9kZVZhbHVlfXJldHVybiBifSxGaWx0ZXI6ZnVuY3Rpb24oYSxiKXt2YXIgYz17ZmlkczpbXSxmaWx0ZXJzOltdfTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYyk7MDxjLmZpZHMubGVuZ3RoP2IuZmlsdGVyPW5ldyBPcGVuTGF5ZXJzLkZpbHRlci5GZWF0dXJlSWQoe2ZpZHM6Yy5maWRzfSk6MDxjLmZpbHRlcnMubGVuZ3RoJiYoYi5maWx0ZXI9Yy5maWx0ZXJzWzBdKX0sRmVhdHVyZUlkOmZ1bmN0aW9uKGEsYil7dmFyIGM9YS5nZXRBdHRyaWJ1dGUoImZpZCIpO2MmJmIuZmlkcy5wdXNoKGMpfSxBbmQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz1uZXcgT3BlbkxheWVycy5GaWx0ZXIuTG9naWNhbCh7dHlwZTpPcGVuTGF5ZXJzLkZpbHRlci5Mb2dpY2FsLkFORH0pOwp0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYyk7Yi5maWx0ZXJzLnB1c2goYyl9LE9yOmZ1bmN0aW9uKGEsYil7dmFyIGM9bmV3IE9wZW5MYXllcnMuRmlsdGVyLkxvZ2ljYWwoe3R5cGU6T3BlbkxheWVycy5GaWx0ZXIuTG9naWNhbC5PUn0pO3RoaXMucmVhZENoaWxkTm9kZXMoYSxjKTtiLmZpbHRlcnMucHVzaChjKX0sTm90OmZ1bmN0aW9uKGEsYil7dmFyIGM9bmV3IE9wZW5MYXllcnMuRmlsdGVyLkxvZ2ljYWwoe3R5cGU6T3BlbkxheWVycy5GaWx0ZXIuTG9naWNhbC5OT1R9KTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYyk7Yi5maWx0ZXJzLnB1c2goYyl9LFByb3BlcnR5SXNMZXNzVGhhbjpmdW5jdGlvbihhLGIpe3ZhciBjPW5ldyBPcGVuTGF5ZXJzLkZpbHRlci5Db21wYXJpc29uKHt0eXBlOk9wZW5MYXllcnMuRmlsdGVyLkNvbXBhcmlzb24uTEVTU19USEFOfSk7dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGMpO2IuZmlsdGVycy5wdXNoKGMpfSxQcm9wZXJ0eUlzR3JlYXRlclRoYW46ZnVuY3Rpb24oYSwKYil7dmFyIGM9bmV3IE9wZW5MYXllcnMuRmlsdGVyLkNvbXBhcmlzb24oe3R5cGU6T3BlbkxheWVycy5GaWx0ZXIuQ29tcGFyaXNvbi5HUkVBVEVSX1RIQU59KTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYyk7Yi5maWx0ZXJzLnB1c2goYyl9LFByb3BlcnR5SXNMZXNzVGhhbk9yRXF1YWxUbzpmdW5jdGlvbihhLGIpe3ZhciBjPW5ldyBPcGVuTGF5ZXJzLkZpbHRlci5Db21wYXJpc29uKHt0eXBlOk9wZW5MYXllcnMuRmlsdGVyLkNvbXBhcmlzb24uTEVTU19USEFOX09SX0VRVUFMX1RPfSk7dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGMpO2IuZmlsdGVycy5wdXNoKGMpfSxQcm9wZXJ0eUlzR3JlYXRlclRoYW5PckVxdWFsVG86ZnVuY3Rpb24oYSxiKXt2YXIgYz1uZXcgT3BlbkxheWVycy5GaWx0ZXIuQ29tcGFyaXNvbih7dHlwZTpPcGVuTGF5ZXJzLkZpbHRlci5Db21wYXJpc29uLkdSRUFURVJfVEhBTl9PUl9FUVVBTF9UT30pO3RoaXMucmVhZENoaWxkTm9kZXMoYSxjKTtiLmZpbHRlcnMucHVzaChjKX0sClByb3BlcnR5SXNCZXR3ZWVuOmZ1bmN0aW9uKGEsYil7dmFyIGM9bmV3IE9wZW5MYXllcnMuRmlsdGVyLkNvbXBhcmlzb24oe3R5cGU6T3BlbkxheWVycy5GaWx0ZXIuQ29tcGFyaXNvbi5CRVRXRUVOfSk7dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGMpO2IuZmlsdGVycy5wdXNoKGMpfSxMaXRlcmFsOmZ1bmN0aW9uKGEsYil7Yi52YWx1ZT1PcGVuTGF5ZXJzLlN0cmluZy5udW1lcmljSWYodGhpcy5nZXRDaGlsZFZhbHVlKGEpLCEwKX0sUHJvcGVydHlOYW1lOmZ1bmN0aW9uKGEsYil7Yi5wcm9wZXJ0eT10aGlzLmdldENoaWxkVmFsdWUoYSl9LExvd2VyQm91bmRhcnk6ZnVuY3Rpb24oYSxiKXtiLmxvd2VyQm91bmRhcnk9T3BlbkxheWVycy5TdHJpbmcubnVtZXJpY0lmKHRoaXMucmVhZGVycy5vZ2MuX2V4cHJlc3Npb24uY2FsbCh0aGlzLGEpLCEwKX0sVXBwZXJCb3VuZGFyeTpmdW5jdGlvbihhLGIpe2IudXBwZXJCb3VuZGFyeT1PcGVuTGF5ZXJzLlN0cmluZy5udW1lcmljSWYodGhpcy5yZWFkZXJzLm9nYy5fZXhwcmVzc2lvbi5jYWxsKHRoaXMsCmEpLCEwKX0sSW50ZXJzZWN0czpmdW5jdGlvbihhLGIpe3RoaXMucmVhZFNwYXRpYWwoYSxiLE9wZW5MYXllcnMuRmlsdGVyLlNwYXRpYWwuSU5URVJTRUNUUyl9LFdpdGhpbjpmdW5jdGlvbihhLGIpe3RoaXMucmVhZFNwYXRpYWwoYSxiLE9wZW5MYXllcnMuRmlsdGVyLlNwYXRpYWwuV0lUSElOKX0sQ29udGFpbnM6ZnVuY3Rpb24oYSxiKXt0aGlzLnJlYWRTcGF0aWFsKGEsYixPcGVuTGF5ZXJzLkZpbHRlci5TcGF0aWFsLkNPTlRBSU5TKX0sRFdpdGhpbjpmdW5jdGlvbihhLGIpe3RoaXMucmVhZFNwYXRpYWwoYSxiLE9wZW5MYXllcnMuRmlsdGVyLlNwYXRpYWwuRFdJVEhJTil9LERpc3RhbmNlOmZ1bmN0aW9uKGEsYil7Yi5kaXN0YW5jZT1wYXJzZUludCh0aGlzLmdldENoaWxkVmFsdWUoYSkpO2IuZGlzdGFuY2VVbml0cz1hLmdldEF0dHJpYnV0ZSgidW5pdHMiKX0sRnVuY3Rpb246ZnVuY3Rpb24oYSxiKXt9LFByb3BlcnR5SXNOdWxsOmZ1bmN0aW9uKGEsYil7dmFyIGM9bmV3IE9wZW5MYXllcnMuRmlsdGVyLkNvbXBhcmlzb24oe3R5cGU6T3BlbkxheWVycy5GaWx0ZXIuQ29tcGFyaXNvbi5JU19OVUxMfSk7CnRoaXMucmVhZENoaWxkTm9kZXMoYSxjKTtiLmZpbHRlcnMucHVzaChjKX19fSxyZWFkU3BhdGlhbDpmdW5jdGlvbihhLGIsYyl7Yz1uZXcgT3BlbkxheWVycy5GaWx0ZXIuU3BhdGlhbCh7dHlwZTpjfSk7dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGMpO2MudmFsdWU9Yy5jb21wb25lbnRzWzBdO2RlbGV0ZSBjLmNvbXBvbmVudHM7Yi5maWx0ZXJzLnB1c2goYyl9LGVuY29kZUxpdGVyYWw6ZnVuY3Rpb24oYSl7YSBpbnN0YW5jZW9mIERhdGUmJihhPU9wZW5MYXllcnMuRGF0ZS50b0lTT1N0cmluZyhhKSk7cmV0dXJuIGF9LHdyaXRlT2djRXhwcmVzc2lvbjpmdW5jdGlvbihhLGIpe2EgaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLkZpbHRlci5GdW5jdGlvbj90aGlzLndyaXRlTm9kZSgiRnVuY3Rpb24iLGEsYik6dGhpcy53cml0ZU5vZGUoIkxpdGVyYWwiLGEsYik7cmV0dXJuIGJ9LHdyaXRlOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLndyaXRlcnMub2djLkZpbHRlci5hcHBseSh0aGlzLFthXSl9LAp3cml0ZXJzOntvZ2M6e0ZpbHRlcjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoIm9nYzpGaWx0ZXIiKTt0aGlzLndyaXRlTm9kZSh0aGlzLmdldEZpbHRlclR5cGUoYSksYSxiKTtyZXR1cm4gYn0sX2ZlYXR1cmVJZHM6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPXRoaXMuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLGM9MCxkPWEuZmlkcy5sZW5ndGg7YzxkOysrYyl0aGlzLndyaXRlTm9kZSgib2djOkZlYXR1cmVJZCIsYS5maWRzW2NdLGIpO3JldHVybiBifSxGZWF0dXJlSWQ6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygib2djOkZlYXR1cmVJZCIse2F0dHJpYnV0ZXM6e2ZpZDphfX0pfSxBbmQ6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygib2djOkFuZCIpLGMsZD0wLGU9YS5maWx0ZXJzLmxlbmd0aDtkPGU7KytkKWM9YS5maWx0ZXJzW2RdLHRoaXMud3JpdGVOb2RlKHRoaXMuZ2V0RmlsdGVyVHlwZShjKSwKYyxiKTtyZXR1cm4gYn0sT3I6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygib2djOk9yIiksYyxkPTAsZT1hLmZpbHRlcnMubGVuZ3RoO2Q8ZTsrK2QpYz1hLmZpbHRlcnNbZF0sdGhpcy53cml0ZU5vZGUodGhpcy5nZXRGaWx0ZXJUeXBlKGMpLGMsYik7cmV0dXJuIGJ9LE5vdDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoIm9nYzpOb3QiKTthPWEuZmlsdGVyc1swXTt0aGlzLndyaXRlTm9kZSh0aGlzLmdldEZpbHRlclR5cGUoYSksYSxiKTtyZXR1cm4gYn0sUHJvcGVydHlJc0xlc3NUaGFuOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygib2djOlByb3BlcnR5SXNMZXNzVGhhbiIpO3RoaXMud3JpdGVOb2RlKCJQcm9wZXJ0eU5hbWUiLGEsYik7dGhpcy53cml0ZU9nY0V4cHJlc3Npb24oYS52YWx1ZSxiKTtyZXR1cm4gYn0sUHJvcGVydHlJc0dyZWF0ZXJUaGFuOmZ1bmN0aW9uKGEpe3ZhciBiPQp0aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoIm9nYzpQcm9wZXJ0eUlzR3JlYXRlclRoYW4iKTt0aGlzLndyaXRlTm9kZSgiUHJvcGVydHlOYW1lIixhLGIpO3RoaXMud3JpdGVPZ2NFeHByZXNzaW9uKGEudmFsdWUsYik7cmV0dXJuIGJ9LFByb3BlcnR5SXNMZXNzVGhhbk9yRXF1YWxUbzpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoIm9nYzpQcm9wZXJ0eUlzTGVzc1RoYW5PckVxdWFsVG8iKTt0aGlzLndyaXRlTm9kZSgiUHJvcGVydHlOYW1lIixhLGIpO3RoaXMud3JpdGVPZ2NFeHByZXNzaW9uKGEudmFsdWUsYik7cmV0dXJuIGJ9LFByb3BlcnR5SXNHcmVhdGVyVGhhbk9yRXF1YWxUbzpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoIm9nYzpQcm9wZXJ0eUlzR3JlYXRlclRoYW5PckVxdWFsVG8iKTt0aGlzLndyaXRlTm9kZSgiUHJvcGVydHlOYW1lIixhLGIpO3RoaXMud3JpdGVPZ2NFeHByZXNzaW9uKGEudmFsdWUsYik7CnJldHVybiBifSxQcm9wZXJ0eUlzQmV0d2VlbjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoIm9nYzpQcm9wZXJ0eUlzQmV0d2VlbiIpO3RoaXMud3JpdGVOb2RlKCJQcm9wZXJ0eU5hbWUiLGEsYik7dGhpcy53cml0ZU5vZGUoIkxvd2VyQm91bmRhcnkiLGEsYik7dGhpcy53cml0ZU5vZGUoIlVwcGVyQm91bmRhcnkiLGEsYik7cmV0dXJuIGJ9LFByb3BlcnR5TmFtZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJvZ2M6UHJvcGVydHlOYW1lIix7dmFsdWU6YS5wcm9wZXJ0eX0pfSxMaXRlcmFsOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoIm9nYzpMaXRlcmFsIix7dmFsdWU6KHRoaXMuZW5jb2RlTGl0ZXJhbHx8T3BlbkxheWVycy5Gb3JtYXQuRmlsdGVyLnYxLnByb3RvdHlwZS5lbmNvZGVMaXRlcmFsKShhKX0pfSxMb3dlckJvdW5kYXJ5OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygib2djOkxvd2VyQm91bmRhcnkiKTsKdGhpcy53cml0ZU9nY0V4cHJlc3Npb24oYS5sb3dlckJvdW5kYXJ5LGIpO3JldHVybiBifSxVcHBlckJvdW5kYXJ5OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygib2djOlVwcGVyQm91bmRhcnkiKTt0aGlzLndyaXRlTm9kZSgiTGl0ZXJhbCIsYS51cHBlckJvdW5kYXJ5LGIpO3JldHVybiBifSxJTlRFUlNFQ1RTOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLndyaXRlU3BhdGlhbChhLCJJbnRlcnNlY3RzIil9LFdJVEhJTjpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy53cml0ZVNwYXRpYWwoYSwiV2l0aGluIil9LENPTlRBSU5TOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLndyaXRlU3BhdGlhbChhLCJDb250YWlucyIpfSxEV0lUSElOOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMud3JpdGVTcGF0aWFsKGEsIkRXaXRoaW4iKTt0aGlzLndyaXRlTm9kZSgiRGlzdGFuY2UiLGEsYik7cmV0dXJuIGJ9LERpc3RhbmNlOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoIm9nYzpEaXN0YW5jZSIsCnthdHRyaWJ1dGVzOnt1bml0czphLmRpc3RhbmNlVW5pdHN9LHZhbHVlOmEuZGlzdGFuY2V9KX0sRnVuY3Rpb246ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJvZ2M6RnVuY3Rpb24iLHthdHRyaWJ1dGVzOntuYW1lOmEubmFtZX19KTthPWEucGFyYW1zO2Zvcih2YXIgYz0wLGQ9YS5sZW5ndGg7YzxkO2MrKyl0aGlzLndyaXRlT2djRXhwcmVzc2lvbihhW2NdLGIpO3JldHVybiBifSxQcm9wZXJ0eUlzTnVsbDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoIm9nYzpQcm9wZXJ0eUlzTnVsbCIpO3RoaXMud3JpdGVOb2RlKCJQcm9wZXJ0eU5hbWUiLGEsYik7cmV0dXJuIGJ9fX0sZ2V0RmlsdGVyVHlwZTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmZpbHRlck1hcFthLnR5cGVdO2lmKCFiKXRocm93IkZpbHRlciB3cml0aW5nIG5vdCBzdXBwb3J0ZWQgZm9yIHJ1bGUgdHlwZTogIithLnR5cGU7cmV0dXJuIGJ9LGZpbHRlck1hcDp7IiYmIjoiQW5kIiwKInx8IjoiT3IiLCIhIjoiTm90IiwiPT0iOiJQcm9wZXJ0eUlzRXF1YWxUbyIsIiE9IjoiUHJvcGVydHlJc05vdEVxdWFsVG8iLCI8IjoiUHJvcGVydHlJc0xlc3NUaGFuIiwiPiI6IlByb3BlcnR5SXNHcmVhdGVyVGhhbiIsIjw9IjoiUHJvcGVydHlJc0xlc3NUaGFuT3JFcXVhbFRvIiwiPj0iOiJQcm9wZXJ0eUlzR3JlYXRlclRoYW5PckVxdWFsVG8iLCIuLiI6IlByb3BlcnR5SXNCZXR3ZWVuIiwifiI6IlByb3BlcnR5SXNMaWtlIixOVUxMOiJQcm9wZXJ0eUlzTnVsbCIsQkJPWDoiQkJPWCIsRFdJVEhJTjoiRFdJVEhJTiIsV0lUSElOOiJXSVRISU4iLENPTlRBSU5TOiJDT05UQUlOUyIsSU5URVJTRUNUUzoiSU5URVJTRUNUUyIsRklEOiJfZmVhdHVyZUlkcyJ9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuRm9ybWF0LkZpbHRlci52MSJ9KTtPcGVuTGF5ZXJzLkdlb21ldHJ5PU9wZW5MYXllcnMuQ2xhc3Moe2lkOm51bGwscGFyZW50Om51bGwsYm91bmRzOm51bGwsaW5pdGlhbGl6ZTpmdW5jdGlvbigpe3RoaXMuaWQ9T3BlbkxheWVycy5VdGlsLmNyZWF0ZVVuaXF1ZUlEKHRoaXMuQ0xBU1NfTkFNRSsiXyIpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5ib3VuZHM9dGhpcy5pZD1udWxsfSxjbG9uZTpmdW5jdGlvbigpe3JldHVybiBuZXcgT3BlbkxheWVycy5HZW9tZXRyeX0sc2V0Qm91bmRzOmZ1bmN0aW9uKGEpe2EmJih0aGlzLmJvdW5kcz1hLmNsb25lKCkpfSxjbGVhckJvdW5kczpmdW5jdGlvbigpe3RoaXMuYm91bmRzPW51bGw7dGhpcy5wYXJlbnQmJnRoaXMucGFyZW50LmNsZWFyQm91bmRzKCl9LGV4dGVuZEJvdW5kczpmdW5jdGlvbihhKXt0aGlzLmdldEJvdW5kcygpP3RoaXMuYm91bmRzLmV4dGVuZChhKTp0aGlzLnNldEJvdW5kcyhhKX0sZ2V0Qm91bmRzOmZ1bmN0aW9uKCl7bnVsbD09dGhpcy5ib3VuZHMmJnRoaXMuY2FsY3VsYXRlQm91bmRzKCk7CnJldHVybiB0aGlzLmJvdW5kc30sY2FsY3VsYXRlQm91bmRzOmZ1bmN0aW9uKCl7fSxkaXN0YW5jZVRvOmZ1bmN0aW9uKGEsYil7fSxnZXRWZXJ0aWNlczpmdW5jdGlvbihhKXt9LGF0UG9pbnQ6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPSExO251bGwhPXRoaXMuZ2V0Qm91bmRzKCkmJm51bGwhPWEmJihiPW51bGwhPWI/YjowLGM9bnVsbCE9Yz9jOjAsZD0obmV3IE9wZW5MYXllcnMuQm91bmRzKHRoaXMuYm91bmRzLmxlZnQtYix0aGlzLmJvdW5kcy5ib3R0b20tYyx0aGlzLmJvdW5kcy5yaWdodCtiLHRoaXMuYm91bmRzLnRvcCtjKSkuY29udGFpbnNMb25MYXQoYSkpO3JldHVybiBkfSxnZXRMZW5ndGg6ZnVuY3Rpb24oKXtyZXR1cm4gMH0sZ2V0QXJlYTpmdW5jdGlvbigpe3JldHVybiAwfSxnZXRDZW50cm9pZDpmdW5jdGlvbigpe3JldHVybiBudWxsfSx0b1N0cmluZzpmdW5jdGlvbigpe3JldHVybiBPcGVuTGF5ZXJzLkZvcm1hdCYmT3BlbkxheWVycy5Gb3JtYXQuV0tUP09wZW5MYXllcnMuRm9ybWF0LldLVC5wcm90b3R5cGUud3JpdGUobmV3IE9wZW5MYXllcnMuRmVhdHVyZS5WZWN0b3IodGhpcykpOgpPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodGhpcyl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuR2VvbWV0cnkifSk7T3BlbkxheWVycy5HZW9tZXRyeS5mcm9tV0tUPWZ1bmN0aW9uKGEpe3ZhciBiO2lmKE9wZW5MYXllcnMuRm9ybWF0JiZPcGVuTGF5ZXJzLkZvcm1hdC5XS1Qpe3ZhciBjPU9wZW5MYXllcnMuR2VvbWV0cnkuZnJvbVdLVC5mb3JtYXQ7Y3x8KGM9bmV3IE9wZW5MYXllcnMuRm9ybWF0LldLVCxPcGVuTGF5ZXJzLkdlb21ldHJ5LmZyb21XS1QuZm9ybWF0PWMpO2E9Yy5yZWFkKGEpO2lmKGEgaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLkZlYXR1cmUuVmVjdG9yKWI9YS5nZW9tZXRyeTtlbHNlIGlmKE9wZW5MYXllcnMuVXRpbC5pc0FycmF5KGEpKXtiPWEubGVuZ3RoO2Zvcih2YXIgYz1BcnJheShiKSxkPTA7ZDxiOysrZCljW2RdPWFbZF0uZ2VvbWV0cnk7Yj1uZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Db2xsZWN0aW9uKGMpfX1yZXR1cm4gYn07Ck9wZW5MYXllcnMuR2VvbWV0cnkuc2VnbWVudHNJbnRlcnNlY3Q9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWMmJmMucG9pbnQ7Yz1jJiZjLnRvbGVyYW5jZTt2YXIgZT0hMSxmPWEueDEtYi54MSxnPWEueTEtYi55MSxoPWEueDItYS54MSxrPWEueTItYS55MSxsPWIueTItYi55MSxtPWIueDItYi54MSxuPWwqaC1tKmssbD1tKmctbCpmLGc9aCpnLWsqZjswPT1uPzA9PWwmJjA9PWcmJihlPSEwKTooZj1sL24sbj1nL24sMDw9ZiYmKDE+PWYmJjA8PW4mJjE+PW4pJiYoZD8oaD1hLngxK2YqaCxuPWEueTErZiprLGU9bmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoaCxuKSk6ZT0hMCkpO2lmKGMpaWYoZSl7aWYoZClhOmZvcihhPVthLGJdLGI9MDsyPmI7KytiKWZvcihmPWFbYl0saz0xOzM+azsrK2spaWYoaD1mWyJ4IitrXSxuPWZbInkiK2tdLGQ9TWF0aC5zcXJ0KE1hdGgucG93KGgtZS54LDIpK01hdGgucG93KG4tZS55LDIpKSxkPGMpe2UueD1oO2UueT1uO2JyZWFrIGF9fWVsc2UgYTpmb3IoYT0KW2EsYl0sYj0wOzI+YjsrK2IpZm9yKGg9YVtiXSxuPWFbKGIrMSklMl0saz0xOzM+azsrK2spaWYoZj17eDpoWyJ4IitrXSx5OmhbInkiK2tdfSxnPU9wZW5MYXllcnMuR2VvbWV0cnkuZGlzdGFuY2VUb1NlZ21lbnQoZixuKSxnLmRpc3RhbmNlPGMpe2U9ZD9uZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludChmLngsZi55KTohMDticmVhayBhfXJldHVybiBlfTtPcGVuTGF5ZXJzLkdlb21ldHJ5LmRpc3RhbmNlVG9TZWdtZW50PWZ1bmN0aW9uKGEsYil7dmFyIGM9T3BlbkxheWVycy5HZW9tZXRyeS5kaXN0YW5jZVNxdWFyZWRUb1NlZ21lbnQoYSxiKTtjLmRpc3RhbmNlPU1hdGguc3FydChjLmRpc3RhbmNlKTtyZXR1cm4gY307Ck9wZW5MYXllcnMuR2VvbWV0cnkuZGlzdGFuY2VTcXVhcmVkVG9TZWdtZW50PWZ1bmN0aW9uKGEsYil7dmFyIGM9YS54LGQ9YS55LGU9Yi54MSxmPWIueTEsZz1iLngyLGg9Yi55MixrPWctZSxsPWgtZixtPShrKihjLWUpK2wqKGQtZikpLyhNYXRoLnBvdyhrLDIpK01hdGgucG93KGwsMikpOzA+PW18fCgxPD1tPyhlPWcsZj1oKTooZSs9bSprLGYrPW0qbCkpO3JldHVybntkaXN0YW5jZTpNYXRoLnBvdyhlLWMsMikrTWF0aC5wb3coZi1kLDIpLHg6ZSx5OmYsYWxvbmc6bX19O09wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQ9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkdlb21ldHJ5LHt4Om51bGwseTpudWxsLGluaXRpYWxpemU6ZnVuY3Rpb24oYSxiKXtPcGVuTGF5ZXJzLkdlb21ldHJ5LnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLng9cGFyc2VGbG9hdChhKTt0aGlzLnk9cGFyc2VGbG9hdChiKX0sY2xvbmU6ZnVuY3Rpb24oYSl7bnVsbD09YSYmKGE9bmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQodGhpcy54LHRoaXMueSkpO09wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKGEsdGhpcyk7cmV0dXJuIGF9LGNhbGN1bGF0ZUJvdW5kczpmdW5jdGlvbigpe3RoaXMuYm91bmRzPW5ldyBPcGVuTGF5ZXJzLkJvdW5kcyh0aGlzLngsdGhpcy55LHRoaXMueCx0aGlzLnkpfSxkaXN0YW5jZVRvOmZ1bmN0aW9uKGEsYil7dmFyIGM9IShiJiYhMT09PWIuZWRnZSkmJmImJmIuZGV0YWlscyxkLGUsZixnLGg7YSBpbnN0YW5jZW9mCk9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQ/KGU9dGhpcy54LGY9dGhpcy55LGc9YS54LGg9YS55LGQ9TWF0aC5zcXJ0KE1hdGgucG93KGUtZywyKStNYXRoLnBvdyhmLWgsMikpLGQ9Yz97eDA6ZSx5MDpmLHgxOmcseTE6aCxkaXN0YW5jZTpkfTpkKTooZD1hLmRpc3RhbmNlVG8odGhpcyxiKSxjJiYoZD17eDA6ZC54MSx5MDpkLnkxLHgxOmQueDAseTE6ZC55MCxkaXN0YW5jZTpkLmRpc3RhbmNlfSkpO3JldHVybiBkfSxlcXVhbHM6ZnVuY3Rpb24oYSl7dmFyIGI9ITE7bnVsbCE9YSYmKGI9dGhpcy54PT1hLngmJnRoaXMueT09YS55fHxpc05hTih0aGlzLngpJiZpc05hTih0aGlzLnkpJiZpc05hTihhLngpJiZpc05hTihhLnkpKTtyZXR1cm4gYn0sdG9TaG9ydFN0cmluZzpmdW5jdGlvbigpe3JldHVybiB0aGlzLngrIiwgIit0aGlzLnl9LG1vdmU6ZnVuY3Rpb24oYSxiKXt0aGlzLngrPWE7dGhpcy55Kz1iO3RoaXMuY2xlYXJCb3VuZHMoKX0scm90YXRlOmZ1bmN0aW9uKGEsYil7YSo9Ck1hdGguUEkvMTgwO3ZhciBjPXRoaXMuZGlzdGFuY2VUbyhiKSxkPWErTWF0aC5hdGFuMih0aGlzLnktYi55LHRoaXMueC1iLngpO3RoaXMueD1iLngrYypNYXRoLmNvcyhkKTt0aGlzLnk9Yi55K2MqTWF0aC5zaW4oZCk7dGhpcy5jbGVhckJvdW5kcygpfSxnZXRDZW50cm9pZDpmdW5jdGlvbigpe3JldHVybiBuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludCh0aGlzLngsdGhpcy55KX0scmVzaXplOmZ1bmN0aW9uKGEsYixjKXt0aGlzLng9Yi54K2EqKHZvaWQgMD09Yz8xOmMpKih0aGlzLngtYi54KTt0aGlzLnk9Yi55K2EqKHRoaXMueS1iLnkpO3RoaXMuY2xlYXJCb3VuZHMoKTtyZXR1cm4gdGhpc30saW50ZXJzZWN0czpmdW5jdGlvbihhKXt2YXIgYj0hMTtyZXR1cm4gYj0iT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludCI9PWEuQ0xBU1NfTkFNRT90aGlzLmVxdWFscyhhKTphLmludGVyc2VjdHModGhpcyl9LHRyYW5zZm9ybTpmdW5jdGlvbihhLGIpe2EmJmImJihPcGVuTGF5ZXJzLlByb2plY3Rpb24udHJhbnNmb3JtKHRoaXMsCmEsYiksdGhpcy5ib3VuZHM9bnVsbCk7cmV0dXJuIHRoaXN9LGdldFZlcnRpY2VzOmZ1bmN0aW9uKGEpe3JldHVyblt0aGlzXX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludCJ9KTtPcGVuTGF5ZXJzLkdlb21ldHJ5LkNvbGxlY3Rpb249T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkdlb21ldHJ5LHtjb21wb25lbnRzOm51bGwsY29tcG9uZW50VHlwZXM6bnVsbCxpbml0aWFsaXplOmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuR2VvbWV0cnkucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMuY29tcG9uZW50cz1bXTtudWxsIT1hJiZ0aGlzLmFkZENvbXBvbmVudHMoYSl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmNvbXBvbmVudHMubGVuZ3RoPTA7dGhpcy5jb21wb25lbnRzPW51bGw7T3BlbkxheWVycy5HZW9tZXRyeS5wcm90b3R5cGUuZGVzdHJveS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGNsb25lOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPWV2YWwoIm5ldyAiK3RoaXMuQ0xBU1NfTkFNRSsiKCkiKSxiPTAsYz10aGlzLmNvbXBvbmVudHMubGVuZ3RoO2I8YztiKyspYS5hZGRDb21wb25lbnQodGhpcy5jb21wb25lbnRzW2JdLmNsb25lKCkpOwpPcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyhhLHRoaXMpO3JldHVybiBhfSxnZXRDb21wb25lbnRzU3RyaW5nOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPVtdLGI9MCxjPXRoaXMuY29tcG9uZW50cy5sZW5ndGg7YjxjO2IrKylhLnB1c2godGhpcy5jb21wb25lbnRzW2JdLnRvU2hvcnRTdHJpbmcoKSk7cmV0dXJuIGEuam9pbigiLCIpfSxjYWxjdWxhdGVCb3VuZHM6ZnVuY3Rpb24oKXt0aGlzLmJvdW5kcz1udWxsO3ZhciBhPW5ldyBPcGVuTGF5ZXJzLkJvdW5kcyxiPXRoaXMuY29tcG9uZW50cztpZihiKWZvcih2YXIgYz0wLGQ9Yi5sZW5ndGg7YzxkO2MrKylhLmV4dGVuZChiW2NdLmdldEJvdW5kcygpKTtudWxsIT1hLmxlZnQmJihudWxsIT1hLmJvdHRvbSYmbnVsbCE9YS5yaWdodCYmbnVsbCE9YS50b3ApJiZ0aGlzLnNldEJvdW5kcyhhKX0sYWRkQ29tcG9uZW50czpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLlV0aWwuaXNBcnJheShhKXx8KGE9W2FdKTtmb3IodmFyIGI9MCxjPWEubGVuZ3RoO2I8CmM7YisrKXRoaXMuYWRkQ29tcG9uZW50KGFbYl0pfSxhZGRDb21wb25lbnQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz0hMTtpZihhJiYobnVsbD09dGhpcy5jb21wb25lbnRUeXBlc3x8LTE8T3BlbkxheWVycy5VdGlsLmluZGV4T2YodGhpcy5jb21wb25lbnRUeXBlcyxhLkNMQVNTX05BTUUpKSl7aWYobnVsbCE9YiYmYjx0aGlzLmNvbXBvbmVudHMubGVuZ3RoKXt2YXIgYz10aGlzLmNvbXBvbmVudHMuc2xpY2UoMCxiKSxkPXRoaXMuY29tcG9uZW50cy5zbGljZShiLHRoaXMuY29tcG9uZW50cy5sZW5ndGgpO2MucHVzaChhKTt0aGlzLmNvbXBvbmVudHM9Yy5jb25jYXQoZCl9ZWxzZSB0aGlzLmNvbXBvbmVudHMucHVzaChhKTthLnBhcmVudD10aGlzO3RoaXMuY2xlYXJCb3VuZHMoKTtjPSEwfXJldHVybiBjfSxyZW1vdmVDb21wb25lbnRzOmZ1bmN0aW9uKGEpe3ZhciBiPSExO09wZW5MYXllcnMuVXRpbC5pc0FycmF5KGEpfHwoYT1bYV0pO2Zvcih2YXIgYz1hLmxlbmd0aC0xOzA8PWM7LS1jKWI9CnRoaXMucmVtb3ZlQ29tcG9uZW50KGFbY10pfHxiO3JldHVybiBifSxyZW1vdmVDb21wb25lbnQ6ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5VdGlsLnJlbW92ZUl0ZW0odGhpcy5jb21wb25lbnRzLGEpO3RoaXMuY2xlYXJCb3VuZHMoKTtyZXR1cm4hMH0sZ2V0TGVuZ3RoOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPTAsYj0wLGM9dGhpcy5jb21wb25lbnRzLmxlbmd0aDtiPGM7YisrKWErPXRoaXMuY29tcG9uZW50c1tiXS5nZXRMZW5ndGgoKTtyZXR1cm4gYX0sZ2V0QXJlYTpmdW5jdGlvbigpe2Zvcih2YXIgYT0wLGI9MCxjPXRoaXMuY29tcG9uZW50cy5sZW5ndGg7YjxjO2IrKylhKz10aGlzLmNvbXBvbmVudHNbYl0uZ2V0QXJlYSgpO3JldHVybiBhfSxnZXRHZW9kZXNpY0FyZWE6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPTAsYz0wLGQ9dGhpcy5jb21wb25lbnRzLmxlbmd0aDtjPGQ7YysrKWIrPXRoaXMuY29tcG9uZW50c1tjXS5nZXRHZW9kZXNpY0FyZWEoYSk7cmV0dXJuIGJ9LGdldENlbnRyb2lkOmZ1bmN0aW9uKGEpe2lmKCFhKXJldHVybiB0aGlzLmNvbXBvbmVudHMubGVuZ3RoJiYKdGhpcy5jb21wb25lbnRzWzBdLmdldENlbnRyb2lkKCk7YT10aGlzLmNvbXBvbmVudHMubGVuZ3RoO2lmKCFhKXJldHVybiExO2Zvcih2YXIgYj1bXSxjPVtdLGQ9MCxlPU51bWJlci5NQVhfVkFMVUUsZixnPTA7ZzxhOysrZyl7Zj10aGlzLmNvbXBvbmVudHNbZ107dmFyIGg9Zi5nZXRBcmVhKCk7Zj1mLmdldENlbnRyb2lkKCEwKTtpc05hTihoKXx8KGlzTmFOKGYueCl8fGlzTmFOKGYueSkpfHwoYi5wdXNoKGgpLGQrPWgsZT1oPGUmJjA8aD9oOmUsYy5wdXNoKGYpKX1hPWIubGVuZ3RoO2lmKDA9PT1kKXtmb3IoZz0wO2c8YTsrK2cpYltnXT0xO2Q9Yi5sZW5ndGh9ZWxzZXtmb3IoZz0wO2c8YTsrK2cpYltnXS89ZTtkLz1lfWZvcih2YXIgaz1lPTAsZz0wO2c8YTsrK2cpZj1jW2ddLGg9YltnXSxlKz1mLngqaCxrKz1mLnkqaDtyZXR1cm4gbmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoZS9kLGsvZCl9LGdldEdlb2Rlc2ljTGVuZ3RoOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0wLApjPTAsZD10aGlzLmNvbXBvbmVudHMubGVuZ3RoO2M8ZDtjKyspYis9dGhpcy5jb21wb25lbnRzW2NdLmdldEdlb2Rlc2ljTGVuZ3RoKGEpO3JldHVybiBifSxtb3ZlOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTAsZD10aGlzLmNvbXBvbmVudHMubGVuZ3RoO2M8ZDtjKyspdGhpcy5jb21wb25lbnRzW2NdLm1vdmUoYSxiKX0scm90YXRlOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTAsZD10aGlzLmNvbXBvbmVudHMubGVuZ3RoO2M8ZDsrK2MpdGhpcy5jb21wb25lbnRzW2NdLnJvdGF0ZShhLGIpfSxyZXNpemU6ZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZD0wO2Q8dGhpcy5jb21wb25lbnRzLmxlbmd0aDsrK2QpdGhpcy5jb21wb25lbnRzW2RdLnJlc2l6ZShhLGIsYyk7cmV0dXJuIHRoaXN9LGRpc3RhbmNlVG86ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9IShiJiYhMT09PWIuZWRnZSkmJmImJmIuZGV0YWlscyxkLGUsZixnPU51bWJlci5QT1NJVElWRV9JTkZJTklUWSxoPTAsaz10aGlzLmNvbXBvbmVudHMubGVuZ3RoO2g8CmsmJiEoZD10aGlzLmNvbXBvbmVudHNbaF0uZGlzdGFuY2VUbyhhLGIpLGY9Yz9kLmRpc3RhbmNlOmQsZjxnJiYoZz1mLGU9ZCwwPT1nKSk7KytoKTtyZXR1cm4gZX0sZXF1YWxzOmZ1bmN0aW9uKGEpe3ZhciBiPSEwO2lmKGEmJmEuQ0xBU1NfTkFNRSYmdGhpcy5DTEFTU19OQU1FPT1hLkNMQVNTX05BTUUpaWYoT3BlbkxheWVycy5VdGlsLmlzQXJyYXkoYS5jb21wb25lbnRzKSYmYS5jb21wb25lbnRzLmxlbmd0aD09dGhpcy5jb21wb25lbnRzLmxlbmd0aClmb3IodmFyIGM9MCxkPXRoaXMuY29tcG9uZW50cy5sZW5ndGg7YzxkOysrYyl7aWYoIXRoaXMuY29tcG9uZW50c1tjXS5lcXVhbHMoYS5jb21wb25lbnRzW2NdKSl7Yj0hMTticmVha319ZWxzZSBiPSExO2Vsc2UgYj0hMTtyZXR1cm4gYn0sdHJhbnNmb3JtOmZ1bmN0aW9uKGEsYil7aWYoYSYmYil7Zm9yKHZhciBjPTAsZD10aGlzLmNvbXBvbmVudHMubGVuZ3RoO2M8ZDtjKyspdGhpcy5jb21wb25lbnRzW2NdLnRyYW5zZm9ybShhLApiKTt0aGlzLmJvdW5kcz1udWxsfXJldHVybiB0aGlzfSxpbnRlcnNlY3RzOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0hMSxjPTAsZD10aGlzLmNvbXBvbmVudHMubGVuZ3RoO2M8ZCYmIShiPWEuaW50ZXJzZWN0cyh0aGlzLmNvbXBvbmVudHNbY10pKTsrK2MpO3JldHVybiBifSxnZXRWZXJ0aWNlczpmdW5jdGlvbihhKXtmb3IodmFyIGI9W10sYz0wLGQ9dGhpcy5jb21wb25lbnRzLmxlbmd0aDtjPGQ7KytjKUFycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KGIsdGhpcy5jb21wb25lbnRzW2NdLmdldFZlcnRpY2VzKGEpKTtyZXR1cm4gYn0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5HZW9tZXRyeS5Db2xsZWN0aW9uIn0pO09wZW5MYXllcnMuR2VvbWV0cnkuTXVsdGlQb2ludD1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuR2VvbWV0cnkuQ29sbGVjdGlvbix7Y29tcG9uZW50VHlwZXM6WyJPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50Il0sYWRkUG9pbnQ6ZnVuY3Rpb24oYSxiKXt0aGlzLmFkZENvbXBvbmVudChhLGIpfSxyZW1vdmVQb2ludDpmdW5jdGlvbihhKXt0aGlzLnJlbW92ZUNvbXBvbmVudChhKX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5HZW9tZXRyeS5NdWx0aVBvaW50In0pO09wZW5MYXllcnMuR2VvbWV0cnkuQ3VydmU9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkdlb21ldHJ5Lk11bHRpUG9pbnQse2NvbXBvbmVudFR5cGVzOlsiT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludCJdLGdldExlbmd0aDpmdW5jdGlvbigpe3ZhciBhPTA7aWYodGhpcy5jb21wb25lbnRzJiYxPHRoaXMuY29tcG9uZW50cy5sZW5ndGgpZm9yKHZhciBiPTEsYz10aGlzLmNvbXBvbmVudHMubGVuZ3RoO2I8YztiKyspYSs9dGhpcy5jb21wb25lbnRzW2ItMV0uZGlzdGFuY2VUbyh0aGlzLmNvbXBvbmVudHNbYl0pO3JldHVybiBhfSxnZXRHZW9kZXNpY0xlbmd0aDpmdW5jdGlvbihhKXt2YXIgYj10aGlzO2lmKGEpe3ZhciBjPW5ldyBPcGVuTGF5ZXJzLlByb2plY3Rpb24oIkVQU0c6NDMyNiIpO2MuZXF1YWxzKGEpfHwoYj10aGlzLmNsb25lKCkudHJhbnNmb3JtKGEsYykpfWE9MDtpZihiLmNvbXBvbmVudHMmJjE8Yi5jb21wb25lbnRzLmxlbmd0aClmb3IodmFyIGQsZT0xLGY9Yi5jb21wb25lbnRzLmxlbmd0aDtlPApmO2UrKyljPWIuY29tcG9uZW50c1tlLTFdLGQ9Yi5jb21wb25lbnRzW2VdLGErPU9wZW5MYXllcnMuVXRpbC5kaXN0VmluY2VudHkoe2xvbjpjLngsbGF0OmMueX0se2xvbjpkLngsbGF0OmQueX0pO3JldHVybiAxRTMqYX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5HZW9tZXRyeS5DdXJ2ZSJ9KTtPcGVuTGF5ZXJzLkdlb21ldHJ5LkxpbmVTdHJpbmc9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkdlb21ldHJ5LkN1cnZlLHtyZW1vdmVDb21wb25lbnQ6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jb21wb25lbnRzJiYyPHRoaXMuY29tcG9uZW50cy5sZW5ndGg7YiYmT3BlbkxheWVycy5HZW9tZXRyeS5Db2xsZWN0aW9uLnByb3RvdHlwZS5yZW1vdmVDb21wb25lbnQuYXBwbHkodGhpcyxhcmd1bWVudHMpO3JldHVybiBifSxpbnRlcnNlY3RzOmZ1bmN0aW9uKGEpe3ZhciBiPSExLGM9YS5DTEFTU19OQU1FO2lmKCJPcGVuTGF5ZXJzLkdlb21ldHJ5LkxpbmVTdHJpbmciPT1jfHwiT3BlbkxheWVycy5HZW9tZXRyeS5MaW5lYXJSaW5nIj09Y3x8Ik9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQiPT1jKXt2YXIgZD10aGlzLmdldFNvcnRlZFNlZ21lbnRzKCk7YT0iT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludCI9PWM/W3t4MTphLngseTE6YS55LHgyOmEueCx5MjphLnl9XTphLmdldFNvcnRlZFNlZ21lbnRzKCk7CnZhciBlLGYsZyxoLGssbCxtLG49MCxwPWQubGVuZ3RoO2E6Zm9yKDtuPHA7KytuKXtjPWRbbl07ZT1jLngxO2Y9Yy54MjtnPWMueTE7aD1jLnkyO3ZhciBxPTAscj1hLmxlbmd0aDtmb3IoO3E8cjsrK3Epe2s9YVtxXTtpZihrLngxPmYpYnJlYWs7aWYoIShrLngyPGV8fChsPWsueTEsbT1rLnkyLE1hdGgubWluKGwsbSk+TWF0aC5tYXgoZyxoKXx8TWF0aC5tYXgobCxtKTxNYXRoLm1pbihnLGgpfHwhT3BlbkxheWVycy5HZW9tZXRyeS5zZWdtZW50c0ludGVyc2VjdChjLGspKSkpe2I9ITA7YnJlYWsgYX19fX1lbHNlIGI9YS5pbnRlcnNlY3RzKHRoaXMpO3JldHVybiBifSxnZXRTb3J0ZWRTZWdtZW50czpmdW5jdGlvbigpe2Zvcih2YXIgYT10aGlzLmNvbXBvbmVudHMubGVuZ3RoLTEsYj1BcnJheShhKSxjLGQsZT0wO2U8YTsrK2UpYz10aGlzLmNvbXBvbmVudHNbZV0sZD10aGlzLmNvbXBvbmVudHNbZSsxXSxiW2VdPWMueDxkLng/e3gxOmMueCx5MTpjLnkseDI6ZC54LHkyOmQueX06Cnt4MTpkLngseTE6ZC55LHgyOmMueCx5MjpjLnl9O3JldHVybiBiLnNvcnQoZnVuY3Rpb24oYSxiKXtyZXR1cm4gYS54MS1iLngxfSl9LHNwbGl0V2l0aFNlZ21lbnQ6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9IShiJiYhMT09PWIuZWRnZSksZD1iJiZiLnRvbGVyYW5jZSxlPVtdLGY9dGhpcy5nZXRWZXJ0aWNlcygpLGc9W10saD1bXSxrPSExLGwsbSxuLHA9e3BvaW50OiEwLHRvbGVyYW5jZTpkfSxxPW51bGwscj0wLHM9Zi5sZW5ndGgtMjtyPD1zOysrcilpZihkPWZbcl0sZy5wdXNoKGQuY2xvbmUoKSksbD1mW3IrMV0sbT17eDE6ZC54LHkxOmQueSx4MjpsLngseTI6bC55fSxtPU9wZW5MYXllcnMuR2VvbWV0cnkuc2VnbWVudHNJbnRlcnNlY3QoYSxtLHApLG0gaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50JiYoKG49bS54PT09YS54MSYmbS55PT09YS55MXx8bS54PT09YS54MiYmbS55PT09YS55Mnx8bS5lcXVhbHMoZCl8fG0uZXF1YWxzKGwpPyEwOiExKXx8YykpbS5lcXVhbHMoaFtoLmxlbmd0aC0KMV0pfHxoLnB1c2gobS5jbG9uZSgpKSwwPT09ciYmbS5lcXVhbHMoZCl8fG0uZXF1YWxzKGwpfHwoaz0hMCxtLmVxdWFscyhkKXx8Zy5wdXNoKG0pLGUucHVzaChuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5MaW5lU3RyaW5nKGcpKSxnPVttLmNsb25lKCldKTtrJiYoZy5wdXNoKGwuY2xvbmUoKSksZS5wdXNoKG5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LkxpbmVTdHJpbmcoZykpKTtpZigwPGgubGVuZ3RoKXZhciB0PWEueDE8YS54Mj8xOi0xLHU9YS55MTxhLnkyPzE6LTEscT17bGluZXM6ZSxwb2ludHM6aC5zb3J0KGZ1bmN0aW9uKGEsYil7cmV0dXJuIHQqYS54LXQqYi54fHx1KmEueS11KmIueX0pfTtyZXR1cm4gcX0sc3BsaXQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz1udWxsLGQ9YiYmYi5tdXR1YWwsZSxmLGcsaDtpZihhIGluc3RhbmNlb2YgT3BlbkxheWVycy5HZW9tZXRyeS5MaW5lU3RyaW5nKXt2YXIgaz10aGlzLmdldFZlcnRpY2VzKCksbCxtLG4scCxxLHI9W107Zz1bXTtmb3IodmFyIHM9CjAsdD1rLmxlbmd0aC0yO3M8PXQ7KytzKXtsPWtbc107bT1rW3MrMV07bj17eDE6bC54LHkxOmwueSx4MjptLngseTI6bS55fTtoPWh8fFthXTtkJiZyLnB1c2gobC5jbG9uZSgpKTtmb3IodmFyIHU9MDt1PGgubGVuZ3RoOysrdSlpZihwPWhbdV0uc3BsaXRXaXRoU2VnbWVudChuLGIpKWlmKHE9cC5saW5lcywwPHEubGVuZ3RoJiYocS51bnNoaWZ0KHUsMSksQXJyYXkucHJvdG90eXBlLnNwbGljZS5hcHBseShoLHEpLHUrPXEubGVuZ3RoLTIpLGQpZm9yKHZhciB2PTAsdz1wLnBvaW50cy5sZW5ndGg7djx3OysrdilxPXAucG9pbnRzW3ZdLHEuZXF1YWxzKGwpfHwoci5wdXNoKHEpLGcucHVzaChuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5MaW5lU3RyaW5nKHIpKSxyPXEuZXF1YWxzKG0pP1tdOltxLmNsb25lKCldKX1kJiYoMDxnLmxlbmd0aCYmMDxyLmxlbmd0aCkmJihyLnB1c2gobS5jbG9uZSgpKSxnLnB1c2gobmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuTGluZVN0cmluZyhyKSkpfWVsc2UgYz0KYS5zcGxpdFdpdGgodGhpcyxiKTtoJiYxPGgubGVuZ3RoP2Y9ITA6aD1bXTtnJiYxPGcubGVuZ3RoP2U9ITA6Zz1bXTtpZihmfHxlKWM9ZD9bZyxoXTpoO3JldHVybiBjfSxzcGxpdFdpdGg6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYS5zcGxpdCh0aGlzLGIpfSxnZXRWZXJ0aWNlczpmdW5jdGlvbihhKXtyZXR1cm4hMD09PWE/W3RoaXMuY29tcG9uZW50c1swXSx0aGlzLmNvbXBvbmVudHNbdGhpcy5jb21wb25lbnRzLmxlbmd0aC0xXV06ITE9PT1hP3RoaXMuY29tcG9uZW50cy5zbGljZSgxLHRoaXMuY29tcG9uZW50cy5sZW5ndGgtMSk6dGhpcy5jb21wb25lbnRzLnNsaWNlKCl9LGRpc3RhbmNlVG86ZnVuY3Rpb24oYSxiKXt2YXIgYz0hKGImJiExPT09Yi5lZGdlKSYmYiYmYi5kZXRhaWxzLGQsZT17fSxmPU51bWJlci5QT1NJVElWRV9JTkZJTklUWTtpZihhIGluc3RhbmNlb2YgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludCl7Zm9yKHZhciBnPXRoaXMuZ2V0U29ydGVkU2VnbWVudHMoKSwKaD1hLngsaz1hLnksbCxtPTAsbj1nLmxlbmd0aDttPG47KyttKWlmKGw9Z1ttXSxkPU9wZW5MYXllcnMuR2VvbWV0cnkuZGlzdGFuY2VUb1NlZ21lbnQoYSxsKSxkLmRpc3RhbmNlPGYpe2lmKGY9ZC5kaXN0YW5jZSxlPWQsMD09PWYpYnJlYWt9ZWxzZSBpZihsLngyPmgmJihrPmwueTEmJms8bC55Mnx8azxsLnkxJiZrPmwueTIpKWJyZWFrO2U9Yz97ZGlzdGFuY2U6ZS5kaXN0YW5jZSx4MDplLngseTA6ZS55LHgxOmgseTE6a306ZS5kaXN0YW5jZX1lbHNlIGlmKGEgaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLkdlb21ldHJ5LkxpbmVTdHJpbmcpe3ZhciBnPXRoaXMuZ2V0U29ydGVkU2VnbWVudHMoKSxoPWEuZ2V0U29ydGVkU2VnbWVudHMoKSxwLHEscj1oLmxlbmd0aCxzPXtwb2ludDohMH0sbT0wLG49Zy5sZW5ndGg7YTpmb3IoO208bjsrK20pe2s9Z1ttXTtsPWsueDE7cT1rLnkxO2Zvcih2YXIgdD0wO3Q8cjsrK3QpaWYoZD1oW3RdLHA9T3BlbkxheWVycy5HZW9tZXRyeS5zZWdtZW50c0ludGVyc2VjdChrLApkLHMpKXtmPTA7ZT17ZGlzdGFuY2U6MCx4MDpwLngseTA6cC55LHgxOnAueCx5MTpwLnl9O2JyZWFrIGF9ZWxzZSBkPU9wZW5MYXllcnMuR2VvbWV0cnkuZGlzdGFuY2VUb1NlZ21lbnQoe3g6bCx5OnF9LGQpLGQuZGlzdGFuY2U8ZiYmKGY9ZC5kaXN0YW5jZSxlPXtkaXN0YW5jZTpmLHgwOmwseTA6cSx4MTpkLngseTE6ZC55fSl9Y3x8KGU9ZS5kaXN0YW5jZSk7MCE9PWYmJmsmJihkPWEuZGlzdGFuY2VUbyhuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludChrLngyLGsueTIpLGIpLG09Yz9kLmRpc3RhbmNlOmQsbTxmJiYoZT1jP3tkaXN0YW5jZTpmLHgwOmQueDEseTA6ZC55MSx4MTpkLngwLHkxOmQueTB9Om0pKX1lbHNlIGU9YS5kaXN0YW5jZVRvKHRoaXMsYiksYyYmKGU9e2Rpc3RhbmNlOmUuZGlzdGFuY2UseDA6ZS54MSx5MDplLnkxLHgxOmUueDAseTE6ZS55MH0pO3JldHVybiBlfSxzaW1wbGlmeTpmdW5jdGlvbihhKXtpZih0aGlzJiZudWxsIT09dGhpcyl7dmFyIGI9dGhpcy5nZXRWZXJ0aWNlcygpOwppZigzPmIubGVuZ3RoKXJldHVybiB0aGlzO3ZhciBjPWZ1bmN0aW9uKGEsYixkLGspe2Zvcih2YXIgbD0wLG09MCxuPWIscDtuPGQ7bisrKXtwPWFbYl07dmFyIHE9YVtkXSxyPWFbbl0scj1NYXRoLmFicygwLjUqKHAueCpxLnkrcS54KnIueStyLngqcC55LXEueCpwLnktci54KnEueS1wLngqci55KSk7cD1NYXRoLnNxcnQoTWF0aC5wb3cocC54LXEueCwyKStNYXRoLnBvdyhwLnktcS55LDIpKTtwPTIqKHIvcCk7cD5sJiYobD1wLG09bil9bD5rJiZtIT1iJiYoZS5wdXNoKG0pLGMoYSxiLG0sayksYyhhLG0sZCxrKSl9LGQ9Yi5sZW5ndGgtMSxlPVtdO2UucHVzaCgwKTtmb3IoZS5wdXNoKGQpO2JbMF0uZXF1YWxzKGJbZF0pOylkLS0sZS5wdXNoKGQpO2MoYiwwLGQsYSk7YT1bXTtlLnNvcnQoZnVuY3Rpb24oYSxiKXtyZXR1cm4gYS1ifSk7Zm9yKGQ9MDtkPGUubGVuZ3RoO2QrKylhLnB1c2goYltlW2RdXSk7cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LkxpbmVTdHJpbmcoYSl9cmV0dXJuIHRoaXN9LApDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkdlb21ldHJ5LkxpbmVTdHJpbmcifSk7T3BlbkxheWVycy5HZW9tZXRyeS5NdWx0aUxpbmVTdHJpbmc9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkdlb21ldHJ5LkNvbGxlY3Rpb24se2NvbXBvbmVudFR5cGVzOlsiT3BlbkxheWVycy5HZW9tZXRyeS5MaW5lU3RyaW5nIl0sc3BsaXQ6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9bnVsbCxkPWImJmIubXV0dWFsLGUsZixnLGgsaz1bXSxsPVthXSxtPTAsbj10aGlzLmNvbXBvbmVudHMubGVuZ3RoO208bjsrK20pe2Y9dGhpcy5jb21wb25lbnRzW21dO2c9ITE7Zm9yKHZhciBwPTA7cDxsLmxlbmd0aDsrK3ApaWYoZT1mLnNwbGl0KGxbcF0sYikpe2lmKGQpe2c9ZVswXTtmb3IodmFyIHE9MCxyPWcubGVuZ3RoO3E8cjsrK3EpMD09PXEmJmsubGVuZ3RoP2tbay5sZW5ndGgtMV0uYWRkQ29tcG9uZW50KGdbcV0pOmsucHVzaChuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5NdWx0aUxpbmVTdHJpbmcoW2dbcV1dKSk7Zz0hMDtlPWVbMV19aWYoZS5sZW5ndGgpe2UudW5zaGlmdChwLAoxKTtBcnJheS5wcm90b3R5cGUuc3BsaWNlLmFwcGx5KGwsZSk7YnJlYWt9fWd8fChrLmxlbmd0aD9rW2subGVuZ3RoLTFdLmFkZENvbXBvbmVudChmLmNsb25lKCkpOms9W25ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5Lk11bHRpTGluZVN0cmluZyhmLmNsb25lKCkpXSl9ayYmMTxrLmxlbmd0aD9nPSEwOms9W107bCYmMTxsLmxlbmd0aD9oPSEwOmw9W107aWYoZ3x8aCljPWQ/W2ssbF06bDtyZXR1cm4gY30sc3BsaXRXaXRoOmZ1bmN0aW9uKGEsYil7dmFyIGM9bnVsbCxkPWImJmIubXV0dWFsLGUsZixnLGgsayxsO2lmKGEgaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLkdlb21ldHJ5LkxpbmVTdHJpbmcpe2w9W107az1bYV07Zm9yKHZhciBtPTAsbj10aGlzLmNvbXBvbmVudHMubGVuZ3RoO208bjsrK20pe2c9ITE7Zj10aGlzLmNvbXBvbmVudHNbbV07Zm9yKHZhciBwPTA7cDxrLmxlbmd0aDsrK3ApaWYoZT1rW3BdLnNwbGl0KGYsYikpe2QmJihnPWVbMF0sZy5sZW5ndGgmJihnLnVuc2hpZnQocCwKMSksQXJyYXkucHJvdG90eXBlLnNwbGljZS5hcHBseShrLGcpLHArPWcubGVuZ3RoLTIpLGU9ZVsxXSwwPT09ZS5sZW5ndGgmJihlPVtmLmNsb25lKCldKSk7Zz0wO2Zvcih2YXIgcT1lLmxlbmd0aDtnPHE7KytnKTA9PT1nJiZsLmxlbmd0aD9sW2wubGVuZ3RoLTFdLmFkZENvbXBvbmVudChlW2ddKTpsLnB1c2gobmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuTXVsdGlMaW5lU3RyaW5nKFtlW2ddXSkpO2c9ITB9Z3x8KGwubGVuZ3RoP2xbbC5sZW5ndGgtMV0uYWRkQ29tcG9uZW50KGYuY2xvbmUoKSk6bD1bbmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuTXVsdGlMaW5lU3RyaW5nKFtmLmNsb25lKCldKV0pfX1lbHNlIGM9YS5zcGxpdCh0aGlzKTtrJiYxPGsubGVuZ3RoP2g9ITA6az1bXTtsJiYxPGwubGVuZ3RoP2c9ITA6bD1bXTtpZihofHxnKWM9ZD9bayxsXTpsO3JldHVybiBjfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkdlb21ldHJ5Lk11bHRpTGluZVN0cmluZyJ9KTtPcGVuTGF5ZXJzLkdlb21ldHJ5LkxpbmVhclJpbmc9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkdlb21ldHJ5LkxpbmVTdHJpbmcse2NvbXBvbmVudFR5cGVzOlsiT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludCJdLGFkZENvbXBvbmVudDpmdW5jdGlvbihhLGIpe3ZhciBjPSExLGQ9dGhpcy5jb21wb25lbnRzLnBvcCgpO251bGw9PWImJmEuZXF1YWxzKGQpfHwoYz1PcGVuTGF5ZXJzLkdlb21ldHJ5LkNvbGxlY3Rpb24ucHJvdG90eXBlLmFkZENvbXBvbmVudC5hcHBseSh0aGlzLGFyZ3VtZW50cykpO09wZW5MYXllcnMuR2VvbWV0cnkuQ29sbGVjdGlvbi5wcm90b3R5cGUuYWRkQ29tcG9uZW50LmFwcGx5KHRoaXMsW3RoaXMuY29tcG9uZW50c1swXV0pO3JldHVybiBjfSxyZW1vdmVDb21wb25lbnQ6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jb21wb25lbnRzJiYzPHRoaXMuY29tcG9uZW50cy5sZW5ndGg7YiYmKHRoaXMuY29tcG9uZW50cy5wb3AoKSxPcGVuTGF5ZXJzLkdlb21ldHJ5LkNvbGxlY3Rpb24ucHJvdG90eXBlLnJlbW92ZUNvbXBvbmVudC5hcHBseSh0aGlzLAphcmd1bWVudHMpLE9wZW5MYXllcnMuR2VvbWV0cnkuQ29sbGVjdGlvbi5wcm90b3R5cGUuYWRkQ29tcG9uZW50LmFwcGx5KHRoaXMsW3RoaXMuY29tcG9uZW50c1swXV0pKTtyZXR1cm4gYn0sbW92ZTpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz0wLGQ9dGhpcy5jb21wb25lbnRzLmxlbmd0aDtjPGQtMTtjKyspdGhpcy5jb21wb25lbnRzW2NdLm1vdmUoYSxiKX0scm90YXRlOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTAsZD10aGlzLmNvbXBvbmVudHMubGVuZ3RoO2M8ZC0xOysrYyl0aGlzLmNvbXBvbmVudHNbY10ucm90YXRlKGEsYil9LHJlc2l6ZTpmdW5jdGlvbihhLGIsYyl7Zm9yKHZhciBkPTAsZT10aGlzLmNvbXBvbmVudHMubGVuZ3RoO2Q8ZS0xOysrZCl0aGlzLmNvbXBvbmVudHNbZF0ucmVzaXplKGEsYixjKTtyZXR1cm4gdGhpc30sdHJhbnNmb3JtOmZ1bmN0aW9uKGEsYil7aWYoYSYmYil7Zm9yKHZhciBjPTAsZD10aGlzLmNvbXBvbmVudHMubGVuZ3RoO2M8ZC0xO2MrKyl0aGlzLmNvbXBvbmVudHNbY10udHJhbnNmb3JtKGEsCmIpO3RoaXMuYm91bmRzPW51bGx9cmV0dXJuIHRoaXN9LGdldENlbnRyb2lkOmZ1bmN0aW9uKCl7aWYodGhpcy5jb21wb25lbnRzKXt2YXIgYT10aGlzLmNvbXBvbmVudHMubGVuZ3RoO2lmKDA8YSYmMj49YSlyZXR1cm4gdGhpcy5jb21wb25lbnRzWzBdLmNsb25lKCk7aWYoMjxhKXt2YXIgYj0wLGM9MCxkPXRoaXMuY29tcG9uZW50c1swXS54LGU9dGhpcy5jb21wb25lbnRzWzBdLnksZj0tMSp0aGlzLmdldEFyZWEoKTtpZigwIT1mKXtmb3IodmFyIGc9MDtnPGEtMTtnKyspdmFyIGg9dGhpcy5jb21wb25lbnRzW2ddLGs9dGhpcy5jb21wb25lbnRzW2crMV0sYj1iKyhoLngray54LTIqZCkqKChoLngtZCkqKGsueS1lKS0oay54LWQpKihoLnktZSkpLGM9YysoaC55K2sueS0yKmUpKigoaC54LWQpKihrLnktZSktKGsueC1kKSooaC55LWUpKTtiPWQrYi8oNipmKTthPWUrYy8oNipmKX1lbHNle2ZvcihnPTA7ZzxhLTE7ZysrKWIrPXRoaXMuY29tcG9uZW50c1tnXS54LGMrPXRoaXMuY29tcG9uZW50c1tnXS55OwpiLz1hLTE7YT1jLyhhLTEpfXJldHVybiBuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludChiLGEpfXJldHVybiBudWxsfX0sZ2V0QXJlYTpmdW5jdGlvbigpe3ZhciBhPTA7aWYodGhpcy5jb21wb25lbnRzJiYyPHRoaXMuY29tcG9uZW50cy5sZW5ndGgpe2Zvcih2YXIgYj1hPTAsYz10aGlzLmNvbXBvbmVudHMubGVuZ3RoO2I8Yy0xO2IrKyl2YXIgZD10aGlzLmNvbXBvbmVudHNbYl0sZT10aGlzLmNvbXBvbmVudHNbYisxXSxhPWErKGQueCtlLngpKihlLnktZC55KTthPS1hLzJ9cmV0dXJuIGF9LGdldEdlb2Rlc2ljQXJlYTpmdW5jdGlvbihhKXt2YXIgYj10aGlzO2lmKGEpe3ZhciBjPW5ldyBPcGVuTGF5ZXJzLlByb2plY3Rpb24oIkVQU0c6NDMyNiIpO2MuZXF1YWxzKGEpfHwoYj10aGlzLmNsb25lKCkudHJhbnNmb3JtKGEsYykpfWE9MDtjPWIuY29tcG9uZW50cyYmYi5jb21wb25lbnRzLmxlbmd0aDtpZigyPGMpe2Zvcih2YXIgZCxlLGY9MDtmPGMtMTtmKyspZD1iLmNvbXBvbmVudHNbZl0sCmU9Yi5jb21wb25lbnRzW2YrMV0sYSs9T3BlbkxheWVycy5VdGlsLnJhZChlLngtZC54KSooMitNYXRoLnNpbihPcGVuTGF5ZXJzLlV0aWwucmFkKGQueSkpK01hdGguc2luKE9wZW5MYXllcnMuVXRpbC5yYWQoZS55KSkpO2E9NDA2ODA2MzE1OTA3NjkqYS8yfXJldHVybiBhfSxjb250YWluc1BvaW50OmZ1bmN0aW9uKGEpe3ZhciBiPU9wZW5MYXllcnMuTnVtYmVyLmxpbWl0U2lnRGlncyxjPWIoYS54LDE0KTthPWIoYS55LDE0KTtmb3IodmFyIGQ9dGhpcy5jb21wb25lbnRzLmxlbmd0aC0xLGUsZixnLGgsayxsPTAsbT0wO208ZDsrK20paWYoZT10aGlzLmNvbXBvbmVudHNbbV0sZz1iKGUueCwxNCksZT1iKGUueSwxNCksZj10aGlzLmNvbXBvbmVudHNbbSsxXSxoPWIoZi54LDE0KSxmPWIoZi55LDE0KSxlPT1mKXtpZihhPT1lJiYoZzw9aCYmYz49ZyYmYzw9aHx8Zz49aCYmYzw9ZyYmYz49aCkpe2w9LTE7YnJlYWt9fWVsc2V7az1iKChhLWYpKigoaC1nKS8oZi1lKSkraCwxNCk7aWYoaz09CmMmJihlPGYmJmE+PWUmJmE8PWZ8fGU+ZiYmYTw9ZSYmYT49Zikpe2w9LTE7YnJlYWt9azw9Y3x8ZyE9aCYmKGs8TWF0aC5taW4oZyxoKXx8az5NYXRoLm1heChnLGgpKXx8KGU8ZiYmYT49ZSYmYTxmfHxlPmYmJmE8ZSYmYT49ZikmJisrbH1yZXR1cm4tMT09bD8xOiEhKGwmMSl9LGludGVyc2VjdHM6ZnVuY3Rpb24oYSl7dmFyIGI9ITE7aWYoIk9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQiPT1hLkNMQVNTX05BTUUpYj10aGlzLmNvbnRhaW5zUG9pbnQoYSk7ZWxzZSBpZigiT3BlbkxheWVycy5HZW9tZXRyeS5MaW5lU3RyaW5nIj09YS5DTEFTU19OQU1FKWI9YS5pbnRlcnNlY3RzKHRoaXMpO2Vsc2UgaWYoIk9wZW5MYXllcnMuR2VvbWV0cnkuTGluZWFyUmluZyI9PWEuQ0xBU1NfTkFNRSliPU9wZW5MYXllcnMuR2VvbWV0cnkuTGluZVN0cmluZy5wcm90b3R5cGUuaW50ZXJzZWN0cy5hcHBseSh0aGlzLFthXSk7ZWxzZSBmb3IodmFyIGM9MCxkPWEuY29tcG9uZW50cy5sZW5ndGg7YzwKZCYmIShiPWEuY29tcG9uZW50c1tjXS5pbnRlcnNlY3RzKHRoaXMpKTsrK2MpO3JldHVybiBifSxnZXRWZXJ0aWNlczpmdW5jdGlvbihhKXtyZXR1cm4hMD09PWE/W106dGhpcy5jb21wb25lbnRzLnNsaWNlKDAsdGhpcy5jb21wb25lbnRzLmxlbmd0aC0xKX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5HZW9tZXRyeS5MaW5lYXJSaW5nIn0pO09wZW5MYXllcnMuR2VvbWV0cnkuUG9seWdvbj1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuR2VvbWV0cnkuQ29sbGVjdGlvbix7Y29tcG9uZW50VHlwZXM6WyJPcGVuTGF5ZXJzLkdlb21ldHJ5LkxpbmVhclJpbmciXSxnZXRBcmVhOmZ1bmN0aW9uKCl7dmFyIGE9MDtpZih0aGlzLmNvbXBvbmVudHMmJjA8dGhpcy5jb21wb25lbnRzLmxlbmd0aClmb3IodmFyIGE9YStNYXRoLmFicyh0aGlzLmNvbXBvbmVudHNbMF0uZ2V0QXJlYSgpKSxiPTEsYz10aGlzLmNvbXBvbmVudHMubGVuZ3RoO2I8YztiKyspYS09TWF0aC5hYnModGhpcy5jb21wb25lbnRzW2JdLmdldEFyZWEoKSk7cmV0dXJuIGF9LGdldEdlb2Rlc2ljQXJlYTpmdW5jdGlvbihhKXt2YXIgYj0wO2lmKHRoaXMuY29tcG9uZW50cyYmMDx0aGlzLmNvbXBvbmVudHMubGVuZ3RoKWZvcih2YXIgYj1iK01hdGguYWJzKHRoaXMuY29tcG9uZW50c1swXS5nZXRHZW9kZXNpY0FyZWEoYSkpLGM9MSxkPXRoaXMuY29tcG9uZW50cy5sZW5ndGg7YzwKZDtjKyspYi09TWF0aC5hYnModGhpcy5jb21wb25lbnRzW2NdLmdldEdlb2Rlc2ljQXJlYShhKSk7cmV0dXJuIGJ9LGNvbnRhaW5zUG9pbnQ6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jb21wb25lbnRzLmxlbmd0aCxjPSExO2lmKDA8YiYmKGM9dGhpcy5jb21wb25lbnRzWzBdLmNvbnRhaW5zUG9pbnQoYSksMSE9PWMmJmMmJjE8YikpZm9yKHZhciBkLGU9MTtlPGI7KytlKWlmKGQ9dGhpcy5jb21wb25lbnRzW2VdLmNvbnRhaW5zUG9pbnQoYSkpe2M9MT09PWQ/MTohMTticmVha31yZXR1cm4gY30saW50ZXJzZWN0czpmdW5jdGlvbihhKXt2YXIgYj0hMSxjLGQ7aWYoIk9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQiPT1hLkNMQVNTX05BTUUpYj10aGlzLmNvbnRhaW5zUG9pbnQoYSk7ZWxzZSBpZigiT3BlbkxheWVycy5HZW9tZXRyeS5MaW5lU3RyaW5nIj09YS5DTEFTU19OQU1FfHwiT3BlbkxheWVycy5HZW9tZXRyeS5MaW5lYXJSaW5nIj09YS5DTEFTU19OQU1FKXtjPTA7Zm9yKGQ9CnRoaXMuY29tcG9uZW50cy5sZW5ndGg7YzxkJiYhKGI9YS5pbnRlcnNlY3RzKHRoaXMuY29tcG9uZW50c1tjXSkpOysrYyk7aWYoIWIpZm9yKGM9MCxkPWEuY29tcG9uZW50cy5sZW5ndGg7YzxkJiYhKGI9dGhpcy5jb250YWluc1BvaW50KGEuY29tcG9uZW50c1tjXSkpOysrYyk7fWVsc2UgZm9yKGM9MCxkPWEuY29tcG9uZW50cy5sZW5ndGg7YzxkJiYhKGI9dGhpcy5pbnRlcnNlY3RzKGEuY29tcG9uZW50c1tjXSkpOysrYyk7aWYoIWImJiJPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvbHlnb24iPT1hLkNMQVNTX05BTUUpe3ZhciBlPXRoaXMuY29tcG9uZW50c1swXTtjPTA7Zm9yKGQ9ZS5jb21wb25lbnRzLmxlbmd0aDtjPGQmJiEoYj1hLmNvbnRhaW5zUG9pbnQoZS5jb21wb25lbnRzW2NdKSk7KytjKTt9cmV0dXJuIGJ9LGRpc3RhbmNlVG86ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYiYmITE9PT1iLmVkZ2UmJnRoaXMuaW50ZXJzZWN0cyhhKT8wOk9wZW5MYXllcnMuR2VvbWV0cnkuQ29sbGVjdGlvbi5wcm90b3R5cGUuZGlzdGFuY2VUby5hcHBseSh0aGlzLApbYSxiXSl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuR2VvbWV0cnkuUG9seWdvbiJ9KTtPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvbHlnb24uY3JlYXRlUmVndWxhclBvbHlnb249ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9TWF0aC5QSSooMS9jLTAuNSk7ZCYmKGUrPWQvMTgwKk1hdGguUEkpO2Zvcih2YXIgZixnPVtdLGg9MDtoPGM7KytoKWY9ZSsyKmgqTWF0aC5QSS9jLGQ9YS54K2IqTWF0aC5jb3MoZiksZj1hLnkrYipNYXRoLnNpbihmKSxnLnB1c2gobmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoZCxmKSk7YT1uZXcgT3BlbkxheWVycy5HZW9tZXRyeS5MaW5lYXJSaW5nKGcpO3JldHVybiBuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2x5Z29uKFthXSl9O09wZW5MYXllcnMuR2VvbWV0cnkuTXVsdGlQb2x5Z29uPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5HZW9tZXRyeS5Db2xsZWN0aW9uLHtjb21wb25lbnRUeXBlczpbIk9wZW5MYXllcnMuR2VvbWV0cnkuUG9seWdvbiJdLENMQVNTX05BTUU6Ik9wZW5MYXllcnMuR2VvbWV0cnkuTXVsdGlQb2x5Z29uIn0pO09wZW5MYXllcnMuRm9ybWF0LkdNTD1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuRm9ybWF0LlhNTCx7ZmVhdHVyZU5TOiJodHRwOi8vbWFwc2VydmVyLmdpcy51bW4uZWR1L21hcHNlcnZlciIsZmVhdHVyZVByZWZpeDoiZmVhdHVyZSIsZmVhdHVyZU5hbWU6ImZlYXR1cmVNZW1iZXIiLGxheWVyTmFtZToiZmVhdHVyZXMiLGdlb21ldHJ5TmFtZToiZ2VvbWV0cnkiLGNvbGxlY3Rpb25OYW1lOiJGZWF0dXJlQ29sbGVjdGlvbiIsZ21sbnM6Imh0dHA6Ly93d3cub3Blbmdpcy5uZXQvZ21sIixleHRyYWN0QXR0cmlidXRlczohMCx4eTohMCxpbml0aWFsaXplOmZ1bmN0aW9uKGEpe3RoaXMucmVnRXhlcz17dHJpbVNwYWNlOi9eXHMqfFxzKiQvZyxyZW1vdmVTcGFjZTovXHMqL2csc3BsaXRTcGFjZTovXHMrLyx0cmltQ29tbWE6L1xzKixccyovZ307T3BlbkxheWVycy5Gb3JtYXQuWE1MLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsW2FdKX0scmVhZDpmdW5jdGlvbihhKXsic3RyaW5nIj09CnR5cGVvZiBhJiYoYT1PcGVuTGF5ZXJzLkZvcm1hdC5YTUwucHJvdG90eXBlLnJlYWQuYXBwbHkodGhpcyxbYV0pKTthPXRoaXMuZ2V0RWxlbWVudHNCeVRhZ05hbWVOUyhhLmRvY3VtZW50RWxlbWVudCx0aGlzLmdtbG5zLHRoaXMuZmVhdHVyZU5hbWUpO2Zvcih2YXIgYj1bXSxjPTA7YzxhLmxlbmd0aDtjKyspe3ZhciBkPXRoaXMucGFyc2VGZWF0dXJlKGFbY10pO2QmJmIucHVzaChkKX1yZXR1cm4gYn0scGFyc2VGZWF0dXJlOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0iTXVsdGlQb2x5Z29uIFBvbHlnb24gTXVsdGlMaW5lU3RyaW5nIExpbmVTdHJpbmcgTXVsdGlQb2ludCBQb2ludCBFbnZlbG9wZSIuc3BsaXQoIiAiKSxjLGQsZSxmPTA7ZjxiLmxlbmd0aDsrK2YpaWYoYz1iW2ZdLGQ9dGhpcy5nZXRFbGVtZW50c0J5VGFnTmFtZU5TKGEsdGhpcy5nbWxucyxjKSwwPGQubGVuZ3RoKXtpZihlPXRoaXMucGFyc2VHZW9tZXRyeVtjLnRvTG93ZXJDYXNlKCldKWU9ZS5hcHBseSh0aGlzLApbZFswXV0pLHRoaXMuaW50ZXJuYWxQcm9qZWN0aW9uJiZ0aGlzLmV4dGVybmFsUHJvamVjdGlvbiYmZS50cmFuc2Zvcm0odGhpcy5leHRlcm5hbFByb2plY3Rpb24sdGhpcy5pbnRlcm5hbFByb2plY3Rpb24pO2Vsc2UgdGhyb3cgbmV3IFR5cGVFcnJvcigiVW5zdXBwb3J0ZWQgZ2VvbWV0cnkgdHlwZTogIitjKTticmVha312YXIgZztjPXRoaXMuZ2V0RWxlbWVudHNCeVRhZ05hbWVOUyhhLHRoaXMuZ21sbnMsIkJveCIpO2ZvcihmPTA7ZjxjLmxlbmd0aDsrK2YpYj1jW2ZdLGQ9dGhpcy5wYXJzZUdlb21ldHJ5LmJveC5hcHBseSh0aGlzLFtiXSksYj1iLnBhcmVudE5vZGUsImJvdW5kZWRCeSI9PT0oYi5sb2NhbE5hbWV8fGIubm9kZU5hbWUuc3BsaXQoIjoiKS5wb3AoKSk/Zz1kOmU9ZC50b0dlb21ldHJ5KCk7dmFyIGg7dGhpcy5leHRyYWN0QXR0cmlidXRlcyYmKGg9dGhpcy5wYXJzZUF0dHJpYnV0ZXMoYSkpO2g9bmV3IE9wZW5MYXllcnMuRmVhdHVyZS5WZWN0b3IoZSxoKTtoLmJvdW5kcz0KZztoLmdtbD17ZmVhdHVyZVR5cGU6YS5maXJzdENoaWxkLm5vZGVOYW1lLnNwbGl0KCI6IilbMV0sZmVhdHVyZU5TOmEuZmlyc3RDaGlsZC5uYW1lc3BhY2VVUkksZmVhdHVyZU5TUHJlZml4OmEuZmlyc3RDaGlsZC5wcmVmaXh9O2E9YS5maXJzdENoaWxkO2Zvcih2YXIgazthJiYoMSE9YS5ub2RlVHlwZXx8IShrPWEuZ2V0QXR0cmlidXRlKCJmaWQiKXx8YS5nZXRBdHRyaWJ1dGUoImlkIikpKTspYT1hLm5leHRTaWJsaW5nO2guZmlkPWs7cmV0dXJuIGh9LHBhcnNlR2VvbWV0cnk6e3BvaW50OmZ1bmN0aW9uKGEpe3ZhciBiLGM7Yz1bXTtiPXRoaXMuZ2V0RWxlbWVudHNCeVRhZ05hbWVOUyhhLHRoaXMuZ21sbnMsInBvcyIpOzA8Yi5sZW5ndGgmJihjPWJbMF0uZmlyc3RDaGlsZC5ub2RlVmFsdWUsYz1jLnJlcGxhY2UodGhpcy5yZWdFeGVzLnRyaW1TcGFjZSwiIiksYz1jLnNwbGl0KHRoaXMucmVnRXhlcy5zcGxpdFNwYWNlKSk7MD09Yy5sZW5ndGgmJihiPXRoaXMuZ2V0RWxlbWVudHNCeVRhZ05hbWVOUyhhLAp0aGlzLmdtbG5zLCJjb29yZGluYXRlcyIpLDA8Yi5sZW5ndGgmJihjPWJbMF0uZmlyc3RDaGlsZC5ub2RlVmFsdWUsYz1jLnJlcGxhY2UodGhpcy5yZWdFeGVzLnJlbW92ZVNwYWNlLCIiKSxjPWMuc3BsaXQoIiwiKSkpOzA9PWMubGVuZ3RoJiYoYj10aGlzLmdldEVsZW1lbnRzQnlUYWdOYW1lTlMoYSx0aGlzLmdtbG5zLCJjb29yZCIpLDA8Yi5sZW5ndGgmJihhPXRoaXMuZ2V0RWxlbWVudHNCeVRhZ05hbWVOUyhiWzBdLHRoaXMuZ21sbnMsIlgiKSxiPXRoaXMuZ2V0RWxlbWVudHNCeVRhZ05hbWVOUyhiWzBdLHRoaXMuZ21sbnMsIlkiKSwwPGEubGVuZ3RoJiYwPGIubGVuZ3RoJiYoYz1bYVswXS5maXJzdENoaWxkLm5vZGVWYWx1ZSxiWzBdLmZpcnN0Q2hpbGQubm9kZVZhbHVlXSkpKTsyPT1jLmxlbmd0aCYmKGNbMl09bnVsbCk7cmV0dXJuIHRoaXMueHk/bmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoY1swXSxjWzFdLGNbMl0pOm5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KGNbMV0sCmNbMF0sY1syXSl9LG11bHRpcG9pbnQ6ZnVuY3Rpb24oYSl7YT10aGlzLmdldEVsZW1lbnRzQnlUYWdOYW1lTlMoYSx0aGlzLmdtbG5zLCJQb2ludCIpO3ZhciBiPVtdO2lmKDA8YS5sZW5ndGgpZm9yKHZhciBjLGQ9MDtkPGEubGVuZ3RoOysrZCkoYz10aGlzLnBhcnNlR2VvbWV0cnkucG9pbnQuYXBwbHkodGhpcyxbYVtkXV0pKSYmYi5wdXNoKGMpO3JldHVybiBuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5NdWx0aVBvaW50KGIpfSxsaW5lc3RyaW5nOmZ1bmN0aW9uKGEsYil7dmFyIGMsZDtkPVtdO3ZhciBlPVtdO2M9dGhpcy5nZXRFbGVtZW50c0J5VGFnTmFtZU5TKGEsdGhpcy5nbWxucywicG9zTGlzdCIpO2lmKDA8Yy5sZW5ndGgpe2Q9dGhpcy5nZXRDaGlsZFZhbHVlKGNbMF0pO2Q9ZC5yZXBsYWNlKHRoaXMucmVnRXhlcy50cmltU3BhY2UsIiIpO2Q9ZC5zcGxpdCh0aGlzLnJlZ0V4ZXMuc3BsaXRTcGFjZSk7dmFyIGY9cGFyc2VJbnQoY1swXS5nZXRBdHRyaWJ1dGUoImRpbWVuc2lvbiIpKSwKZyxoLGs7Zm9yKGM9MDtjPGQubGVuZ3RoL2Y7KytjKWc9YypmLGg9ZFtnXSxrPWRbZysxXSxnPTI9PWY/bnVsbDpkW2crMl0sdGhpcy54eT9lLnB1c2gobmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoaCxrLGcpKTplLnB1c2gobmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoayxoLGcpKX1pZigwPT1kLmxlbmd0aCYmKGM9dGhpcy5nZXRFbGVtZW50c0J5VGFnTmFtZU5TKGEsdGhpcy5nbWxucywiY29vcmRpbmF0ZXMiKSwwPGMubGVuZ3RoKSlmb3IoZD10aGlzLmdldENoaWxkVmFsdWUoY1swXSksZD1kLnJlcGxhY2UodGhpcy5yZWdFeGVzLnRyaW1TcGFjZSwiIiksZD1kLnJlcGxhY2UodGhpcy5yZWdFeGVzLnRyaW1Db21tYSwiLCIpLGY9ZC5zcGxpdCh0aGlzLnJlZ0V4ZXMuc3BsaXRTcGFjZSksYz0wO2M8Zi5sZW5ndGg7KytjKWQ9ZltjXS5zcGxpdCgiLCIpLDI9PWQubGVuZ3RoJiYoZFsyXT1udWxsKSx0aGlzLnh5P2UucHVzaChuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludChkWzBdLApkWzFdLGRbMl0pKTplLnB1c2gobmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoZFsxXSxkWzBdLGRbMl0pKTtkPW51bGw7MCE9ZS5sZW5ndGgmJihkPWI/bmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuTGluZWFyUmluZyhlKTpuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5MaW5lU3RyaW5nKGUpKTtyZXR1cm4gZH0sbXVsdGlsaW5lc3RyaW5nOmZ1bmN0aW9uKGEpe2E9dGhpcy5nZXRFbGVtZW50c0J5VGFnTmFtZU5TKGEsdGhpcy5nbWxucywiTGluZVN0cmluZyIpO3ZhciBiPVtdO2lmKDA8YS5sZW5ndGgpZm9yKHZhciBjLGQ9MDtkPGEubGVuZ3RoOysrZCkoYz10aGlzLnBhcnNlR2VvbWV0cnkubGluZXN0cmluZy5hcHBseSh0aGlzLFthW2RdXSkpJiZiLnB1c2goYyk7cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5Lk11bHRpTGluZVN0cmluZyhiKX0scG9seWdvbjpmdW5jdGlvbihhKXthPXRoaXMuZ2V0RWxlbWVudHNCeVRhZ05hbWVOUyhhLHRoaXMuZ21sbnMsIkxpbmVhclJpbmciKTsKdmFyIGI9W107aWYoMDxhLmxlbmd0aClmb3IodmFyIGMsZD0wO2Q8YS5sZW5ndGg7KytkKShjPXRoaXMucGFyc2VHZW9tZXRyeS5saW5lc3RyaW5nLmFwcGx5KHRoaXMsW2FbZF0sITBdKSkmJmIucHVzaChjKTtyZXR1cm4gbmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9seWdvbihiKX0sbXVsdGlwb2x5Z29uOmZ1bmN0aW9uKGEpe2E9dGhpcy5nZXRFbGVtZW50c0J5VGFnTmFtZU5TKGEsdGhpcy5nbWxucywiUG9seWdvbiIpO3ZhciBiPVtdO2lmKDA8YS5sZW5ndGgpZm9yKHZhciBjLGQ9MDtkPGEubGVuZ3RoOysrZCkoYz10aGlzLnBhcnNlR2VvbWV0cnkucG9seWdvbi5hcHBseSh0aGlzLFthW2RdXSkpJiZiLnB1c2goYyk7cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5Lk11bHRpUG9seWdvbihiKX0sZW52ZWxvcGU6ZnVuY3Rpb24oYSl7dmFyIGI9W10sYyxkLGU9dGhpcy5nZXRFbGVtZW50c0J5VGFnTmFtZU5TKGEsdGhpcy5nbWxucywibG93ZXJDb3JuZXIiKTtpZigwPGUubGVuZ3RoKXtjPQpbXTswPGUubGVuZ3RoJiYoYz1lWzBdLmZpcnN0Q2hpbGQubm9kZVZhbHVlLGM9Yy5yZXBsYWNlKHRoaXMucmVnRXhlcy50cmltU3BhY2UsIiIpLGM9Yy5zcGxpdCh0aGlzLnJlZ0V4ZXMuc3BsaXRTcGFjZSkpOzI9PWMubGVuZ3RoJiYoY1syXT1udWxsKTt2YXIgZj10aGlzLnh5P25ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KGNbMF0sY1sxXSxjWzJdKTpuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludChjWzFdLGNbMF0sY1syXSl9YT10aGlzLmdldEVsZW1lbnRzQnlUYWdOYW1lTlMoYSx0aGlzLmdtbG5zLCJ1cHBlckNvcm5lciIpO2lmKDA8YS5sZW5ndGgpe2M9W107MDxhLmxlbmd0aCYmKGM9YVswXS5maXJzdENoaWxkLm5vZGVWYWx1ZSxjPWMucmVwbGFjZSh0aGlzLnJlZ0V4ZXMudHJpbVNwYWNlLCIiKSxjPWMuc3BsaXQodGhpcy5yZWdFeGVzLnNwbGl0U3BhY2UpKTsyPT1jLmxlbmd0aCYmKGNbMl09bnVsbCk7dmFyIGc9dGhpcy54eT9uZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludChjWzBdLApjWzFdLGNbMl0pOm5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KGNbMV0sY1swXSxjWzJdKX1mJiZnJiYoYi5wdXNoKG5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KGYueCxmLnkpKSxiLnB1c2gobmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoZy54LGYueSkpLGIucHVzaChuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludChnLngsZy55KSksYi5wdXNoKG5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KGYueCxnLnkpKSxiLnB1c2gobmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoZi54LGYueSkpLGI9bmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuTGluZWFyUmluZyhiKSxkPW5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvbHlnb24oW2JdKSk7cmV0dXJuIGR9LGJveDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmdldEVsZW1lbnRzQnlUYWdOYW1lTlMoYSx0aGlzLmdtbG5zLCJjb29yZGluYXRlcyIpLGM9YT1udWxsOzA8Yi5sZW5ndGgmJihiPWJbMF0uZmlyc3RDaGlsZC5ub2RlVmFsdWUsCmI9Yi5zcGxpdCgiICIpLDI9PWIubGVuZ3RoJiYoYT1iWzBdLnNwbGl0KCIsIiksYz1iWzFdLnNwbGl0KCIsIikpKTtpZihudWxsIT09YSYmbnVsbCE9PWMpcmV0dXJuIG5ldyBPcGVuTGF5ZXJzLkJvdW5kcyhwYXJzZUZsb2F0KGFbMF0pLHBhcnNlRmxvYXQoYVsxXSkscGFyc2VGbG9hdChjWzBdKSxwYXJzZUZsb2F0KGNbMV0pKX19LHBhcnNlQXR0cmlidXRlczpmdW5jdGlvbihhKXt2YXIgYj17fTthPWEuZmlyc3RDaGlsZDtmb3IodmFyIGMsZCxlO2E7KXtpZigxPT1hLm5vZGVUeXBlKXthPWEuY2hpbGROb2Rlcztmb3IoYz0wO2M8YS5sZW5ndGg7KytjKWlmKGQ9YVtjXSwxPT1kLm5vZGVUeXBlKWlmKGU9ZC5jaGlsZE5vZGVzLDE9PWUubGVuZ3RoKXtpZihlPWVbMF0sMz09ZS5ub2RlVHlwZXx8ND09ZS5ub2RlVHlwZSlkPWQucHJlZml4P2Qubm9kZU5hbWUuc3BsaXQoIjoiKVsxXTpkLm5vZGVOYW1lLGU9ZS5ub2RlVmFsdWUucmVwbGFjZSh0aGlzLnJlZ0V4ZXMudHJpbVNwYWNlLAoiIiksYltkXT1lfWVsc2UgYltkLm5vZGVOYW1lLnNwbGl0KCI6IikucG9wKCldPW51bGw7YnJlYWt9YT1hLm5leHRTaWJsaW5nfXJldHVybiBifSx3cml0ZTpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLlV0aWwuaXNBcnJheShhKXx8KGE9W2FdKTtmb3IodmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlMoImh0dHA6Ly93d3cub3Blbmdpcy5uZXQvd2ZzIiwid2ZzOiIrdGhpcy5jb2xsZWN0aW9uTmFtZSksYz0wO2M8YS5sZW5ndGg7YysrKWIuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVGZWF0dXJlWE1MKGFbY10pKTtyZXR1cm4gT3BlbkxheWVycy5Gb3JtYXQuWE1MLnByb3RvdHlwZS53cml0ZS5hcHBseSh0aGlzLFtiXSl9LGNyZWF0ZUZlYXR1cmVYTUw6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5idWlsZEdlb21ldHJ5Tm9kZShhLmdlb21ldHJ5KSxjPXRoaXMuY3JlYXRlRWxlbWVudE5TKHRoaXMuZmVhdHVyZU5TLHRoaXMuZmVhdHVyZVByZWZpeCsiOiIrdGhpcy5nZW9tZXRyeU5hbWUpO2MuYXBwZW5kQ2hpbGQoYik7CnZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TKHRoaXMuZ21sbnMsImdtbDoiK3RoaXMuZmVhdHVyZU5hbWUpLGQ9dGhpcy5jcmVhdGVFbGVtZW50TlModGhpcy5mZWF0dXJlTlMsdGhpcy5mZWF0dXJlUHJlZml4KyI6Iit0aGlzLmxheWVyTmFtZSk7ZC5zZXRBdHRyaWJ1dGUoImZpZCIsYS5maWR8fGEuaWQpO2QuYXBwZW5kQ2hpbGQoYyk7Zm9yKHZhciBlIGluIGEuYXR0cmlidXRlcyl7dmFyIGM9dGhpcy5jcmVhdGVUZXh0Tm9kZShhLmF0dHJpYnV0ZXNbZV0pLGY9ZS5zdWJzdHJpbmcoZS5sYXN0SW5kZXhPZigiOiIpKzEpLGY9dGhpcy5jcmVhdGVFbGVtZW50TlModGhpcy5mZWF0dXJlTlMsdGhpcy5mZWF0dXJlUHJlZml4KyI6IitmKTtmLmFwcGVuZENoaWxkKGMpO2QuYXBwZW5kQ2hpbGQoZil9Yi5hcHBlbmRDaGlsZChkKTtyZXR1cm4gYn0sYnVpbGRHZW9tZXRyeU5vZGU6ZnVuY3Rpb24oYSl7dGhpcy5leHRlcm5hbFByb2plY3Rpb24mJnRoaXMuaW50ZXJuYWxQcm9qZWN0aW9uJiYKKGE9YS5jbG9uZSgpLGEudHJhbnNmb3JtKHRoaXMuaW50ZXJuYWxQcm9qZWN0aW9uLHRoaXMuZXh0ZXJuYWxQcm9qZWN0aW9uKSk7dmFyIGI9YS5DTEFTU19OQU1FLGI9Yi5zdWJzdHJpbmcoYi5sYXN0SW5kZXhPZigiLiIpKzEpO3JldHVybiB0aGlzLmJ1aWxkR2VvbWV0cnlbYi50b0xvd2VyQ2FzZSgpXS5hcHBseSh0aGlzLFthXSl9LGJ1aWxkR2VvbWV0cnk6e3BvaW50OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TKHRoaXMuZ21sbnMsImdtbDpQb2ludCIpO2IuYXBwZW5kQ2hpbGQodGhpcy5idWlsZENvb3JkaW5hdGVzTm9kZShhKSk7cmV0dXJuIGJ9LG11bHRpcG9pbnQ6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlModGhpcy5nbWxucywiZ21sOk11bHRpUG9pbnQiKTthPWEuY29tcG9uZW50cztmb3IodmFyIGMsZCxlPTA7ZTxhLmxlbmd0aDtlKyspYz10aGlzLmNyZWF0ZUVsZW1lbnROUyh0aGlzLmdtbG5zLCJnbWw6cG9pbnRNZW1iZXIiKSwKZD10aGlzLmJ1aWxkR2VvbWV0cnkucG9pbnQuYXBwbHkodGhpcyxbYVtlXV0pLGMuYXBwZW5kQ2hpbGQoZCksYi5hcHBlbmRDaGlsZChjKTtyZXR1cm4gYn0sbGluZXN0cmluZzpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROUyh0aGlzLmdtbG5zLCJnbWw6TGluZVN0cmluZyIpO2IuYXBwZW5kQ2hpbGQodGhpcy5idWlsZENvb3JkaW5hdGVzTm9kZShhKSk7cmV0dXJuIGJ9LG11bHRpbGluZXN0cmluZzpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROUyh0aGlzLmdtbG5zLCJnbWw6TXVsdGlMaW5lU3RyaW5nIik7YT1hLmNvbXBvbmVudHM7Zm9yKHZhciBjLGQsZT0wO2U8YS5sZW5ndGg7KytlKWM9dGhpcy5jcmVhdGVFbGVtZW50TlModGhpcy5nbWxucywiZ21sOmxpbmVTdHJpbmdNZW1iZXIiKSxkPXRoaXMuYnVpbGRHZW9tZXRyeS5saW5lc3RyaW5nLmFwcGx5KHRoaXMsW2FbZV1dKSxjLmFwcGVuZENoaWxkKGQpLGIuYXBwZW5kQ2hpbGQoYyk7CnJldHVybiBifSxsaW5lYXJyaW5nOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TKHRoaXMuZ21sbnMsImdtbDpMaW5lYXJSaW5nIik7Yi5hcHBlbmRDaGlsZCh0aGlzLmJ1aWxkQ29vcmRpbmF0ZXNOb2RlKGEpKTtyZXR1cm4gYn0scG9seWdvbjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROUyh0aGlzLmdtbG5zLCJnbWw6UG9seWdvbiIpO2E9YS5jb21wb25lbnRzO2Zvcih2YXIgYyxkLGU9MDtlPGEubGVuZ3RoOysrZSljPTA9PWU/Im91dGVyQm91bmRhcnlJcyI6ImlubmVyQm91bmRhcnlJcyIsYz10aGlzLmNyZWF0ZUVsZW1lbnROUyh0aGlzLmdtbG5zLCJnbWw6IitjKSxkPXRoaXMuYnVpbGRHZW9tZXRyeS5saW5lYXJyaW5nLmFwcGx5KHRoaXMsW2FbZV1dKSxjLmFwcGVuZENoaWxkKGQpLGIuYXBwZW5kQ2hpbGQoYyk7cmV0dXJuIGJ9LG11bHRpcG9seWdvbjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROUyh0aGlzLmdtbG5zLAoiZ21sOk11bHRpUG9seWdvbiIpO2E9YS5jb21wb25lbnRzO2Zvcih2YXIgYyxkLGU9MDtlPGEubGVuZ3RoOysrZSljPXRoaXMuY3JlYXRlRWxlbWVudE5TKHRoaXMuZ21sbnMsImdtbDpwb2x5Z29uTWVtYmVyIiksZD10aGlzLmJ1aWxkR2VvbWV0cnkucG9seWdvbi5hcHBseSh0aGlzLFthW2VdXSksYy5hcHBlbmRDaGlsZChkKSxiLmFwcGVuZENoaWxkKGMpO3JldHVybiBifSxib3VuZHM6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlModGhpcy5nbWxucywiZ21sOkJveCIpO2IuYXBwZW5kQ2hpbGQodGhpcy5idWlsZENvb3JkaW5hdGVzTm9kZShhKSk7cmV0dXJuIGJ9fSxidWlsZENvb3JkaW5hdGVzTm9kZTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROUyh0aGlzLmdtbG5zLCJnbWw6Y29vcmRpbmF0ZXMiKTtiLnNldEF0dHJpYnV0ZSgiZGVjaW1hbCIsIi4iKTtiLnNldEF0dHJpYnV0ZSgiY3MiLCIsIik7Yi5zZXRBdHRyaWJ1dGUoInRzIiwKIiAiKTt2YXIgYz1bXTtpZihhIGluc3RhbmNlb2YgT3BlbkxheWVycy5Cb3VuZHMpYy5wdXNoKGEubGVmdCsiLCIrYS5ib3R0b20pLGMucHVzaChhLnJpZ2h0KyIsIithLnRvcCk7ZWxzZXthPWEuY29tcG9uZW50cz9hLmNvbXBvbmVudHM6W2FdO2Zvcih2YXIgZD0wO2Q8YS5sZW5ndGg7ZCsrKWMucHVzaChhW2RdLngrIiwiK2FbZF0ueSl9Yz10aGlzLmNyZWF0ZVRleHROb2RlKGMuam9pbigiICIpKTtiLmFwcGVuZENoaWxkKGMpO3JldHVybiBifSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkZvcm1hdC5HTUwifSk7T3BlbkxheWVycy5Gb3JtYXQuR01MfHwoT3BlbkxheWVycy5Gb3JtYXQuR01MPXt9KTsKT3BlbkxheWVycy5Gb3JtYXQuR01MLkJhc2U9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkZvcm1hdC5YTUwse25hbWVzcGFjZXM6e2dtbDoiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9nbWwiLHhsaW5rOiJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIix4c2k6Imh0dHA6Ly93d3cudzMub3JnLzIwMDEvWE1MU2NoZW1hLWluc3RhbmNlIix3ZnM6Imh0dHA6Ly93d3cub3Blbmdpcy5uZXQvd2ZzIn0sZGVmYXVsdFByZWZpeDoiZ21sIixzY2hlbWFMb2NhdGlvbjpudWxsLGZlYXR1cmVUeXBlOm51bGwsZmVhdHVyZU5TOm51bGwsZ2VvbWV0cnlOYW1lOiJnZW9tZXRyeSIsZXh0cmFjdEF0dHJpYnV0ZXM6ITAsc3JzTmFtZTpudWxsLHh5OiEwLGdlb21ldHJ5VHlwZXM6bnVsbCxzaW5nbGVGZWF0dXJlVHlwZTpudWxsLHJlZ0V4ZXM6e3RyaW1TcGFjZTovXlxzKnxccyokL2cscmVtb3ZlU3BhY2U6L1xzKi9nLHNwbGl0U3BhY2U6L1xzKy8sdHJpbUNvbW1hOi9ccyosXHMqL2csZmVhdHVyZU1lbWJlcjovXiguKjopP2ZlYXR1cmVNZW1iZXJzPyQvfSwKaW5pdGlhbGl6ZTpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLkZvcm1hdC5YTUwucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxbYV0pO3RoaXMuc2V0R2VvbWV0cnlUeXBlcygpO2EmJmEuZmVhdHVyZU5TJiZ0aGlzLnNldE5hbWVzcGFjZSgiZmVhdHVyZSIsYS5mZWF0dXJlTlMpO3RoaXMuc2luZ2xlRmVhdHVyZVR5cGU9IWF8fCJzdHJpbmciPT09dHlwZW9mIGEuZmVhdHVyZVR5cGV9LHJlYWQ6ZnVuY3Rpb24oYSl7InN0cmluZyI9PXR5cGVvZiBhJiYoYT1PcGVuTGF5ZXJzLkZvcm1hdC5YTUwucHJvdG90eXBlLnJlYWQuYXBwbHkodGhpcyxbYV0pKTthJiY5PT1hLm5vZGVUeXBlJiYoYT1hLmRvY3VtZW50RWxlbWVudCk7dmFyIGI9W107dGhpcy5yZWFkTm9kZShhLHtmZWF0dXJlczpifSwhMCk7aWYoMD09Yi5sZW5ndGgpe3ZhciBjPXRoaXMuZ2V0RWxlbWVudHNCeVRhZ05hbWVOUyhhLHRoaXMubmFtZXNwYWNlcy5nbWwsImZlYXR1cmVNZW1iZXIiKTtpZihjLmxlbmd0aCl7YT0KMDtmb3IodmFyIGQ9Yy5sZW5ndGg7YTxkOysrYSl0aGlzLnJlYWROb2RlKGNbYV0se2ZlYXR1cmVzOmJ9LCEwKX1lbHNlIGM9dGhpcy5nZXRFbGVtZW50c0J5VGFnTmFtZU5TKGEsdGhpcy5uYW1lc3BhY2VzLmdtbCwiZmVhdHVyZU1lbWJlcnMiKSxjLmxlbmd0aCYmdGhpcy5yZWFkTm9kZShjWzBdLHtmZWF0dXJlczpifSwhMCl9cmV0dXJuIGJ9LHJlYWROb2RlOmZ1bmN0aW9uKGEsYixjKXshMD09PWMmJiEwPT09dGhpcy5hdXRvQ29uZmlnJiYodGhpcy5mZWF0dXJlVHlwZT1udWxsLGRlbGV0ZSB0aGlzLm5hbWVzcGFjZUFsaWFzW3RoaXMuZmVhdHVyZU5TXSxkZWxldGUgdGhpcy5uYW1lc3BhY2VzLmZlYXR1cmUsdGhpcy5mZWF0dXJlTlM9bnVsbCk7dGhpcy5mZWF0dXJlTlN8fChhLnByZWZpeCBpbiB0aGlzLm5hbWVzcGFjZXN8fGEucGFyZW50Tm9kZS5uYW1lc3BhY2VVUkkhPXRoaXMubmFtZXNwYWNlcy5nbWx8fCF0aGlzLnJlZ0V4ZXMuZmVhdHVyZU1lbWJlci50ZXN0KGEucGFyZW50Tm9kZS5ub2RlTmFtZSkpfHwKKHRoaXMuZmVhdHVyZVR5cGU9YS5ub2RlTmFtZS5zcGxpdCgiOiIpLnBvcCgpLHRoaXMuc2V0TmFtZXNwYWNlKCJmZWF0dXJlIixhLm5hbWVzcGFjZVVSSSksdGhpcy5mZWF0dXJlTlM9YS5uYW1lc3BhY2VVUkksdGhpcy5hdXRvQ29uZmlnPSEwKTtyZXR1cm4gT3BlbkxheWVycy5Gb3JtYXQuWE1MLnByb3RvdHlwZS5yZWFkTm9kZS5hcHBseSh0aGlzLFthLGJdKX0scmVhZGVyczp7Z21sOntfaW5oZXJpdDpmdW5jdGlvbihhLGIsYyl7fSxmZWF0dXJlTWVtYmVyOmZ1bmN0aW9uKGEsYil7dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGIpfSxmZWF0dXJlTWVtYmVyczpmdW5jdGlvbihhLGIpe3RoaXMucmVhZENoaWxkTm9kZXMoYSxiKX0sbmFtZTpmdW5jdGlvbihhLGIpe2IubmFtZT10aGlzLmdldENoaWxkVmFsdWUoYSl9LGJvdW5kZWRCeTpmdW5jdGlvbihhLGIpe3ZhciBjPXt9O3RoaXMucmVhZENoaWxkTm9kZXMoYSxjKTtjLmNvbXBvbmVudHMmJjA8Yy5jb21wb25lbnRzLmxlbmd0aCYmCihiLmJvdW5kcz1jLmNvbXBvbmVudHNbMF0pfSxQb2ludDpmdW5jdGlvbihhLGIpe3ZhciBjPXtwb2ludHM6W119O3RoaXMucmVhZENoaWxkTm9kZXMoYSxjKTtiLmNvbXBvbmVudHN8fChiLmNvbXBvbmVudHM9W10pO2IuY29tcG9uZW50cy5wdXNoKGMucG9pbnRzWzBdKX0sY29vcmRpbmF0ZXM6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9dGhpcy5nZXRDaGlsZFZhbHVlKGEpLnJlcGxhY2UodGhpcy5yZWdFeGVzLnRyaW1TcGFjZSwiIiksYz1jLnJlcGxhY2UodGhpcy5yZWdFeGVzLnRyaW1Db21tYSwiLCIpLGM9Yy5zcGxpdCh0aGlzLnJlZ0V4ZXMuc3BsaXRTcGFjZSksZCxlPWMubGVuZ3RoLGY9QXJyYXkoZSksZz0wO2c8ZTsrK2cpZD1jW2ddLnNwbGl0KCIsIiksZltnXT10aGlzLnh5P25ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KGRbMF0sZFsxXSxkWzJdKTpuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludChkWzFdLGRbMF0sZFsyXSk7Yi5wb2ludHM9Zn0sY29vcmQ6ZnVuY3Rpb24oYSwKYil7dmFyIGM9e307dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGMpO2IucG9pbnRzfHwoYi5wb2ludHM9W10pO2IucG9pbnRzLnB1c2gobmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoYy54LGMueSxjLnopKX0sWDpmdW5jdGlvbihhLGIpe2IueD10aGlzLmdldENoaWxkVmFsdWUoYSl9LFk6ZnVuY3Rpb24oYSxiKXtiLnk9dGhpcy5nZXRDaGlsZFZhbHVlKGEpfSxaOmZ1bmN0aW9uKGEsYil7Yi56PXRoaXMuZ2V0Q2hpbGRWYWx1ZShhKX0sTXVsdGlQb2ludDpmdW5jdGlvbihhLGIpe3ZhciBjPXtjb21wb25lbnRzOltdfTt0aGlzLnJlYWRlcnMuZ21sLl9pbmhlcml0LmFwcGx5KHRoaXMsW2EsYyxiXSk7dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGMpO2IuY29tcG9uZW50cz1bbmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuTXVsdGlQb2ludChjLmNvbXBvbmVudHMpXX0scG9pbnRNZW1iZXI6ZnVuY3Rpb24oYSxiKXt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYil9LExpbmVTdHJpbmc6ZnVuY3Rpb24oYSwKYil7dmFyIGM9e307dGhpcy5yZWFkZXJzLmdtbC5faW5oZXJpdC5hcHBseSh0aGlzLFthLGMsYl0pO3RoaXMucmVhZENoaWxkTm9kZXMoYSxjKTtiLmNvbXBvbmVudHN8fChiLmNvbXBvbmVudHM9W10pO2IuY29tcG9uZW50cy5wdXNoKG5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LkxpbmVTdHJpbmcoYy5wb2ludHMpKX0sTXVsdGlMaW5lU3RyaW5nOmZ1bmN0aW9uKGEsYil7dmFyIGM9e2NvbXBvbmVudHM6W119O3RoaXMucmVhZGVycy5nbWwuX2luaGVyaXQuYXBwbHkodGhpcyxbYSxjLGJdKTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYyk7Yi5jb21wb25lbnRzPVtuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5NdWx0aUxpbmVTdHJpbmcoYy5jb21wb25lbnRzKV19LGxpbmVTdHJpbmdNZW1iZXI6ZnVuY3Rpb24oYSxiKXt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYil9LFBvbHlnb246ZnVuY3Rpb24oYSxiKXt2YXIgYz17b3V0ZXI6bnVsbCxpbm5lcjpbXX07dGhpcy5yZWFkZXJzLmdtbC5faW5oZXJpdC5hcHBseSh0aGlzLApbYSxjLGJdKTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYyk7Yy5pbm5lci51bnNoaWZ0KGMub3V0ZXIpO2IuY29tcG9uZW50c3x8KGIuY29tcG9uZW50cz1bXSk7Yi5jb21wb25lbnRzLnB1c2gobmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9seWdvbihjLmlubmVyKSl9LExpbmVhclJpbmc6ZnVuY3Rpb24oYSxiKXt2YXIgYz17fTt0aGlzLnJlYWRlcnMuZ21sLl9pbmhlcml0LmFwcGx5KHRoaXMsW2EsY10pO3RoaXMucmVhZENoaWxkTm9kZXMoYSxjKTtiLmNvbXBvbmVudHM9W25ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LkxpbmVhclJpbmcoYy5wb2ludHMpXX0sTXVsdGlQb2x5Z29uOmZ1bmN0aW9uKGEsYil7dmFyIGM9e2NvbXBvbmVudHM6W119O3RoaXMucmVhZGVycy5nbWwuX2luaGVyaXQuYXBwbHkodGhpcyxbYSxjLGJdKTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYyk7Yi5jb21wb25lbnRzPVtuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5NdWx0aVBvbHlnb24oYy5jb21wb25lbnRzKV19LApwb2x5Z29uTWVtYmVyOmZ1bmN0aW9uKGEsYil7dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGIpfSxHZW9tZXRyeUNvbGxlY3Rpb246ZnVuY3Rpb24oYSxiKXt2YXIgYz17Y29tcG9uZW50czpbXX07dGhpcy5yZWFkZXJzLmdtbC5faW5oZXJpdC5hcHBseSh0aGlzLFthLGMsYl0pO3RoaXMucmVhZENoaWxkTm9kZXMoYSxjKTtiLmNvbXBvbmVudHM9W25ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LkNvbGxlY3Rpb24oYy5jb21wb25lbnRzKV19LGdlb21ldHJ5TWVtYmVyOmZ1bmN0aW9uKGEsYil7dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGIpfX0sZmVhdHVyZTp7IioiOmZ1bmN0aW9uKGEsYil7dmFyIGMsZD1hLmxvY2FsTmFtZXx8YS5ub2RlTmFtZS5zcGxpdCgiOiIpLnBvcCgpO2IuZmVhdHVyZXM/dGhpcy5zaW5nbGVGZWF0dXJlVHlwZXx8LTE9PT1PcGVuTGF5ZXJzLlV0aWwuaW5kZXhPZih0aGlzLmZlYXR1cmVUeXBlLGQpP2Q9PT10aGlzLmZlYXR1cmVUeXBlJiYoYz0iX3R5cGVOYW1lIik6Yz0KIl90eXBlTmFtZSI6MD09YS5jaGlsZE5vZGVzLmxlbmd0aHx8MT09YS5jaGlsZE5vZGVzLmxlbmd0aCYmMz09YS5maXJzdENoaWxkLm5vZGVUeXBlP3RoaXMuZXh0cmFjdEF0dHJpYnV0ZXMmJihjPSJfYXR0cmlidXRlIik6Yz0iX2dlb21ldHJ5IjtjJiZ0aGlzLnJlYWRlcnMuZmVhdHVyZVtjXS5hcHBseSh0aGlzLFthLGJdKX0sX3R5cGVOYW1lOmZ1bmN0aW9uKGEsYil7dmFyIGM9e2NvbXBvbmVudHM6W10sYXR0cmlidXRlczp7fX07dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGMpO2MubmFtZSYmKGMuYXR0cmlidXRlcy5uYW1lPWMubmFtZSk7dmFyIGQ9bmV3IE9wZW5MYXllcnMuRmVhdHVyZS5WZWN0b3IoYy5jb21wb25lbnRzWzBdLGMuYXR0cmlidXRlcyk7dGhpcy5zaW5nbGVGZWF0dXJlVHlwZXx8KGQudHlwZT1hLm5vZGVOYW1lLnNwbGl0KCI6IikucG9wKCksZC5uYW1lc3BhY2U9YS5uYW1lc3BhY2VVUkkpO3ZhciBlPWEuZ2V0QXR0cmlidXRlKCJmaWQiKXx8dGhpcy5nZXRBdHRyaWJ1dGVOUyhhLAp0aGlzLm5hbWVzcGFjZXMuZ21sLCJpZCIpO2UmJihkLmZpZD1lKTt0aGlzLmludGVybmFsUHJvamVjdGlvbiYmKHRoaXMuZXh0ZXJuYWxQcm9qZWN0aW9uJiZkLmdlb21ldHJ5KSYmZC5nZW9tZXRyeS50cmFuc2Zvcm0odGhpcy5leHRlcm5hbFByb2plY3Rpb24sdGhpcy5pbnRlcm5hbFByb2plY3Rpb24pO2MuYm91bmRzJiYoZC5ib3VuZHM9Yy5ib3VuZHMpO2IuZmVhdHVyZXMucHVzaChkKX0sX2dlb21ldHJ5OmZ1bmN0aW9uKGEsYil7dGhpcy5nZW9tZXRyeU5hbWV8fCh0aGlzLmdlb21ldHJ5TmFtZT1hLm5vZGVOYW1lLnNwbGl0KCI6IikucG9wKCkpO3RoaXMucmVhZENoaWxkTm9kZXMoYSxiKX0sX2F0dHJpYnV0ZTpmdW5jdGlvbihhLGIpe3ZhciBjPWEubG9jYWxOYW1lfHxhLm5vZGVOYW1lLnNwbGl0KCI6IikucG9wKCksZD10aGlzLmdldENoaWxkVmFsdWUoYSk7Yi5hdHRyaWJ1dGVzW2NdPWR9fSx3ZnM6e0ZlYXR1cmVDb2xsZWN0aW9uOmZ1bmN0aW9uKGEsYil7dGhpcy5yZWFkQ2hpbGROb2RlcyhhLApiKX19fSx3cml0ZTpmdW5jdGlvbihhKXt2YXIgYjtiPU9wZW5MYXllcnMuVXRpbC5pc0FycmF5KGEpPyJmZWF0dXJlTWVtYmVycyI6ImZlYXR1cmVNZW1iZXIiO2E9dGhpcy53cml0ZU5vZGUoImdtbDoiK2IsYSk7dGhpcy5zZXRBdHRyaWJ1dGVOUyhhLHRoaXMubmFtZXNwYWNlcy54c2ksInhzaTpzY2hlbWFMb2NhdGlvbiIsdGhpcy5zY2hlbWFMb2NhdGlvbik7cmV0dXJuIE9wZW5MYXllcnMuRm9ybWF0LlhNTC5wcm90b3R5cGUud3JpdGUuYXBwbHkodGhpcyxbYV0pfSx3cml0ZXJzOntnbWw6e2ZlYXR1cmVNZW1iZXI6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJnbWw6ZmVhdHVyZU1lbWJlciIpO3RoaXMud3JpdGVOb2RlKCJmZWF0dXJlOl90eXBlTmFtZSIsYSxiKTtyZXR1cm4gYn0sTXVsdGlQb2ludDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoImdtbDpNdWx0aVBvaW50Iik7YT1hLmNvbXBvbmVudHN8fFthXTsKZm9yKHZhciBjPTAsZD1hLmxlbmd0aDtjPGQ7KytjKXRoaXMud3JpdGVOb2RlKCJwb2ludE1lbWJlciIsYVtjXSxiKTtyZXR1cm4gYn0scG9pbnRNZW1iZXI6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJnbWw6cG9pbnRNZW1iZXIiKTt0aGlzLndyaXRlTm9kZSgiUG9pbnQiLGEsYik7cmV0dXJuIGJ9LE11bHRpTGluZVN0cmluZzpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoImdtbDpNdWx0aUxpbmVTdHJpbmciKTthPWEuY29tcG9uZW50c3x8W2FdO2Zvcih2YXIgYz0wLGQ9YS5sZW5ndGg7YzxkOysrYyl0aGlzLndyaXRlTm9kZSgibGluZVN0cmluZ01lbWJlciIsYVtjXSxiKTtyZXR1cm4gYn0sbGluZVN0cmluZ01lbWJlcjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoImdtbDpsaW5lU3RyaW5nTWVtYmVyIik7dGhpcy53cml0ZU5vZGUoIkxpbmVTdHJpbmciLGEsYik7cmV0dXJuIGJ9LApNdWx0aVBvbHlnb246ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJnbWw6TXVsdGlQb2x5Z29uIik7YT1hLmNvbXBvbmVudHN8fFthXTtmb3IodmFyIGM9MCxkPWEubGVuZ3RoO2M8ZDsrK2MpdGhpcy53cml0ZU5vZGUoInBvbHlnb25NZW1iZXIiLGFbY10sYik7cmV0dXJuIGJ9LHBvbHlnb25NZW1iZXI6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJnbWw6cG9seWdvbk1lbWJlciIpO3RoaXMud3JpdGVOb2RlKCJQb2x5Z29uIixhLGIpO3JldHVybiBifSxHZW9tZXRyeUNvbGxlY3Rpb246ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygiZ21sOkdlb21ldHJ5Q29sbGVjdGlvbiIpLGM9MCxkPWEuY29tcG9uZW50cy5sZW5ndGg7YzxkOysrYyl0aGlzLndyaXRlTm9kZSgiZ2VvbWV0cnlNZW1iZXIiLGEuY29tcG9uZW50c1tjXSxiKTtyZXR1cm4gYn0sZ2VvbWV0cnlNZW1iZXI6ZnVuY3Rpb24oYSl7dmFyIGI9CnRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygiZ21sOmdlb21ldHJ5TWVtYmVyIik7YT10aGlzLndyaXRlTm9kZSgiZmVhdHVyZTpfZ2VvbWV0cnkiLGEpO2IuYXBwZW5kQ2hpbGQoYS5maXJzdENoaWxkKTtyZXR1cm4gYn19LGZlYXR1cmU6e190eXBlTmFtZTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoImZlYXR1cmU6Iit0aGlzLmZlYXR1cmVUeXBlLHthdHRyaWJ1dGVzOntmaWQ6YS5maWR9fSk7YS5nZW9tZXRyeSYmdGhpcy53cml0ZU5vZGUoImZlYXR1cmU6X2dlb21ldHJ5IixhLmdlb21ldHJ5LGIpO2Zvcih2YXIgYyBpbiBhLmF0dHJpYnV0ZXMpe3ZhciBkPWEuYXR0cmlidXRlc1tjXTtudWxsIT1kJiZ0aGlzLndyaXRlTm9kZSgiZmVhdHVyZTpfYXR0cmlidXRlIix7bmFtZTpjLHZhbHVlOmR9LGIpfXJldHVybiBifSxfZ2VvbWV0cnk6ZnVuY3Rpb24oYSl7dGhpcy5leHRlcm5hbFByb2plY3Rpb24mJnRoaXMuaW50ZXJuYWxQcm9qZWN0aW9uJiYoYT0KYS5jbG9uZSgpLnRyYW5zZm9ybSh0aGlzLmludGVybmFsUHJvamVjdGlvbix0aGlzLmV4dGVybmFsUHJvamVjdGlvbikpO3ZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygiZmVhdHVyZToiK3RoaXMuZ2VvbWV0cnlOYW1lKTthPXRoaXMud3JpdGVOb2RlKCJnbWw6Iit0aGlzLmdlb21ldHJ5VHlwZXNbYS5DTEFTU19OQU1FXSxhLGIpO3RoaXMuc3JzTmFtZSYmYS5zZXRBdHRyaWJ1dGUoInNyc05hbWUiLHRoaXMuc3JzTmFtZSk7cmV0dXJuIGJ9LF9hdHRyaWJ1dGU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygiZmVhdHVyZToiK2EubmFtZSx7dmFsdWU6YS52YWx1ZX0pfX0sd2ZzOntGZWF0dXJlQ29sbGVjdGlvbjpmdW5jdGlvbihhKXtmb3IodmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJ3ZnM6RmVhdHVyZUNvbGxlY3Rpb24iKSxjPTAsZD1hLmxlbmd0aDtjPGQ7KytjKXRoaXMud3JpdGVOb2RlKCJnbWw6ZmVhdHVyZU1lbWJlciIsCmFbY10sYik7cmV0dXJuIGJ9fX0sc2V0R2VvbWV0cnlUeXBlczpmdW5jdGlvbigpe3RoaXMuZ2VvbWV0cnlUeXBlcz17Ik9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQiOiJQb2ludCIsIk9wZW5MYXllcnMuR2VvbWV0cnkuTXVsdGlQb2ludCI6Ik11bHRpUG9pbnQiLCJPcGVuTGF5ZXJzLkdlb21ldHJ5LkxpbmVTdHJpbmciOiJMaW5lU3RyaW5nIiwiT3BlbkxheWVycy5HZW9tZXRyeS5NdWx0aUxpbmVTdHJpbmciOiJNdWx0aUxpbmVTdHJpbmciLCJPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvbHlnb24iOiJQb2x5Z29uIiwiT3BlbkxheWVycy5HZW9tZXRyeS5NdWx0aVBvbHlnb24iOiJNdWx0aVBvbHlnb24iLCJPcGVuTGF5ZXJzLkdlb21ldHJ5LkNvbGxlY3Rpb24iOiJHZW9tZXRyeUNvbGxlY3Rpb24ifX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Gb3JtYXQuR01MLkJhc2UifSk7T3BlbkxheWVycy5Gb3JtYXQuR01MLnYzPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Gb3JtYXQuR01MLkJhc2Use3NjaGVtYUxvY2F0aW9uOiJodHRwOi8vd3d3Lm9wZW5naXMubmV0L2dtbCBodHRwOi8vc2NoZW1hcy5vcGVuZ2lzLm5ldC9nbWwvMy4xLjEvcHJvZmlsZXMvZ21sc2ZQcm9maWxlLzEuMC4wL2dtbHNmLnhzZCIsY3VydmU6ITEsbXVsdGlDdXJ2ZTohMCxzdXJmYWNlOiExLG11bHRpU3VyZmFjZTohMCxpbml0aWFsaXplOmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuRm9ybWF0LkdNTC5CYXNlLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsW2FdKX0scmVhZGVyczp7Z21sOk9wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKHtfaW5oZXJpdDpmdW5jdGlvbihhLGIsYyl7aWYoYT1wYXJzZUludChhLmdldEF0dHJpYnV0ZSgic3JzRGltZW5zaW9uIiksMTApfHxjJiZjLnNyc0RpbWVuc2lvbiliLnNyc0RpbWVuc2lvbj1hfSxmZWF0dXJlTWVtYmVyczpmdW5jdGlvbihhLApiKXt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYil9LEN1cnZlOmZ1bmN0aW9uKGEsYil7dmFyIGM9e3BvaW50czpbXX07dGhpcy5yZWFkZXJzLmdtbC5faW5oZXJpdC5hcHBseSh0aGlzLFthLGMsYl0pO3RoaXMucmVhZENoaWxkTm9kZXMoYSxjKTtiLmNvbXBvbmVudHN8fChiLmNvbXBvbmVudHM9W10pO2IuY29tcG9uZW50cy5wdXNoKG5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LkxpbmVTdHJpbmcoYy5wb2ludHMpKX0sc2VnbWVudHM6ZnVuY3Rpb24oYSxiKXt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYil9LExpbmVTdHJpbmdTZWdtZW50OmZ1bmN0aW9uKGEsYil7dmFyIGM9e307dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGMpO2MucG9pbnRzJiZBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShiLnBvaW50cyxjLnBvaW50cyl9LHBvczpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuZ2V0Q2hpbGRWYWx1ZShhKS5yZXBsYWNlKHRoaXMucmVnRXhlcy50cmltU3BhY2UsIiIpLnNwbGl0KHRoaXMucmVnRXhlcy5zcGxpdFNwYWNlKSwKYz10aGlzLnh5P25ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KGNbMF0sY1sxXSxjWzJdKTpuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludChjWzFdLGNbMF0sY1syXSk7Yi5wb2ludHM9W2NdfSxwb3NMaXN0OmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPXRoaXMuZ2V0Q2hpbGRWYWx1ZShhKS5yZXBsYWNlKHRoaXMucmVnRXhlcy50cmltU3BhY2UsIiIpLnNwbGl0KHRoaXMucmVnRXhlcy5zcGxpdFNwYWNlKSxkPWIuc3JzRGltZW5zaW9ufHxwYXJzZUludChhLmdldEF0dHJpYnV0ZSgic3JzRGltZW5zaW9uIil8fGEuZ2V0QXR0cmlidXRlKCJkaW1lbnNpb24iKSwxMCl8fDIsZSxmLGcsaD1BcnJheShjLmxlbmd0aC9kKSxrPTAsbD1jLmxlbmd0aDtrPGw7ays9ZCllPWNba10sZj1jW2srMV0sZz0yPT1kP3ZvaWQgMDpjW2srMl0saFtrL2RdPXRoaXMueHk/bmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoZSxmLGcpOm5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KGYsCmUsZyk7Yi5wb2ludHM9aH0sU3VyZmFjZTpmdW5jdGlvbihhLGIpe3RoaXMucmVhZENoaWxkTm9kZXMoYSxiKX0scGF0Y2hlczpmdW5jdGlvbihhLGIpe3RoaXMucmVhZENoaWxkTm9kZXMoYSxiKX0sUG9seWdvblBhdGNoOmZ1bmN0aW9uKGEsYil7dGhpcy5yZWFkZXJzLmdtbC5Qb2x5Z29uLmFwcGx5KHRoaXMsW2EsYl0pfSxleHRlcmlvcjpmdW5jdGlvbihhLGIpe3ZhciBjPXt9O3RoaXMucmVhZENoaWxkTm9kZXMoYSxjKTtiLm91dGVyPWMuY29tcG9uZW50c1swXX0saW50ZXJpb3I6ZnVuY3Rpb24oYSxiKXt2YXIgYz17fTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYyk7Yi5pbm5lci5wdXNoKGMuY29tcG9uZW50c1swXSl9LE11bHRpQ3VydmU6ZnVuY3Rpb24oYSxiKXt2YXIgYz17Y29tcG9uZW50czpbXX07dGhpcy5yZWFkZXJzLmdtbC5faW5oZXJpdC5hcHBseSh0aGlzLFthLGMsYl0pO3RoaXMucmVhZENoaWxkTm9kZXMoYSxjKTswPGMuY29tcG9uZW50cy5sZW5ndGgmJihiLmNvbXBvbmVudHM9CltuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5NdWx0aUxpbmVTdHJpbmcoYy5jb21wb25lbnRzKV0pfSxjdXJ2ZU1lbWJlcjpmdW5jdGlvbihhLGIpe3RoaXMucmVhZENoaWxkTm9kZXMoYSxiKX0sTXVsdGlTdXJmYWNlOmZ1bmN0aW9uKGEsYil7dmFyIGM9e2NvbXBvbmVudHM6W119O3RoaXMucmVhZGVycy5nbWwuX2luaGVyaXQuYXBwbHkodGhpcyxbYSxjLGJdKTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYyk7MDxjLmNvbXBvbmVudHMubGVuZ3RoJiYoYi5jb21wb25lbnRzPVtuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5NdWx0aVBvbHlnb24oYy5jb21wb25lbnRzKV0pfSxzdXJmYWNlTWVtYmVyOmZ1bmN0aW9uKGEsYil7dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGIpfSxzdXJmYWNlTWVtYmVyczpmdW5jdGlvbihhLGIpe3RoaXMucmVhZENoaWxkTm9kZXMoYSxiKX0scG9pbnRNZW1iZXJzOmZ1bmN0aW9uKGEsYil7dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGIpfSxsaW5lU3RyaW5nTWVtYmVyczpmdW5jdGlvbihhLApiKXt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYil9LHBvbHlnb25NZW1iZXJzOmZ1bmN0aW9uKGEsYil7dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGIpfSxnZW9tZXRyeU1lbWJlcnM6ZnVuY3Rpb24oYSxiKXt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYil9LEVudmVsb3BlOmZ1bmN0aW9uKGEsYil7dmFyIGM9e3BvaW50czpBcnJheSgyKX07dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGMpO2IuY29tcG9uZW50c3x8KGIuY29tcG9uZW50cz1bXSk7dmFyIGQ9Yy5wb2ludHNbMF0sYz1jLnBvaW50c1sxXTtiLmNvbXBvbmVudHMucHVzaChuZXcgT3BlbkxheWVycy5Cb3VuZHMoZC54LGQueSxjLngsYy55KSl9LGxvd2VyQ29ybmVyOmZ1bmN0aW9uKGEsYil7dmFyIGM9e307dGhpcy5yZWFkZXJzLmdtbC5wb3MuYXBwbHkodGhpcyxbYSxjXSk7Yi5wb2ludHNbMF09Yy5wb2ludHNbMF19LHVwcGVyQ29ybmVyOmZ1bmN0aW9uKGEsYil7dmFyIGM9e307dGhpcy5yZWFkZXJzLmdtbC5wb3MuYXBwbHkodGhpcywKW2EsY10pO2IucG9pbnRzWzFdPWMucG9pbnRzWzBdfX0sT3BlbkxheWVycy5Gb3JtYXQuR01MLkJhc2UucHJvdG90eXBlLnJlYWRlcnMuZ21sKSxmZWF0dXJlOk9wZW5MYXllcnMuRm9ybWF0LkdNTC5CYXNlLnByb3RvdHlwZS5yZWFkZXJzLmZlYXR1cmUsd2ZzOk9wZW5MYXllcnMuRm9ybWF0LkdNTC5CYXNlLnByb3RvdHlwZS5yZWFkZXJzLndmc30sd3JpdGU6ZnVuY3Rpb24oYSl7dmFyIGI7Yj1PcGVuTGF5ZXJzLlV0aWwuaXNBcnJheShhKT8iZmVhdHVyZU1lbWJlcnMiOiJmZWF0dXJlTWVtYmVyIjthPXRoaXMud3JpdGVOb2RlKCJnbWw6IitiLGEpO3RoaXMuc2V0QXR0cmlidXRlTlMoYSx0aGlzLm5hbWVzcGFjZXMueHNpLCJ4c2k6c2NoZW1hTG9jYXRpb24iLHRoaXMuc2NoZW1hTG9jYXRpb24pO3JldHVybiBPcGVuTGF5ZXJzLkZvcm1hdC5YTUwucHJvdG90eXBlLndyaXRlLmFwcGx5KHRoaXMsW2FdKX0sd3JpdGVyczp7Z21sOk9wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKHtmZWF0dXJlTWVtYmVyczpmdW5jdGlvbihhKXtmb3IodmFyIGI9CnRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygiZ21sOmZlYXR1cmVNZW1iZXJzIiksYz0wLGQ9YS5sZW5ndGg7YzxkOysrYyl0aGlzLndyaXRlTm9kZSgiZmVhdHVyZTpfdHlwZU5hbWUiLGFbY10sYik7cmV0dXJuIGJ9LFBvaW50OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygiZ21sOlBvaW50Iik7dGhpcy53cml0ZU5vZGUoInBvcyIsYSxiKTtyZXR1cm4gYn0scG9zOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoImdtbDpwb3MiLHt2YWx1ZTp0aGlzLnh5P2EueCsiICIrYS55OmEueSsiICIrYS54fSl9LExpbmVTdHJpbmc6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJnbWw6TGluZVN0cmluZyIpO3RoaXMud3JpdGVOb2RlKCJwb3NMaXN0IixhLmNvbXBvbmVudHMsYik7cmV0dXJuIGJ9LEN1cnZlOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygiZ21sOkN1cnZlIik7CnRoaXMud3JpdGVOb2RlKCJzZWdtZW50cyIsYSxiKTtyZXR1cm4gYn0sc2VnbWVudHM6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJnbWw6c2VnbWVudHMiKTt0aGlzLndyaXRlTm9kZSgiTGluZVN0cmluZ1NlZ21lbnQiLGEsYik7cmV0dXJuIGJ9LExpbmVTdHJpbmdTZWdtZW50OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygiZ21sOkxpbmVTdHJpbmdTZWdtZW50Iik7dGhpcy53cml0ZU5vZGUoInBvc0xpc3QiLGEuY29tcG9uZW50cyxiKTtyZXR1cm4gYn0scG9zTGlzdDpmdW5jdGlvbihhKXtmb3IodmFyIGI9YS5sZW5ndGgsYz1BcnJheShiKSxkLGU9MDtlPGI7KytlKWQ9YVtlXSxjW2VdPXRoaXMueHk/ZC54KyIgIitkLnk6ZC55KyIgIitkLng7cmV0dXJuIHRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygiZ21sOnBvc0xpc3QiLHt2YWx1ZTpjLmpvaW4oIiAiKX0pfSxTdXJmYWNlOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygiZ21sOlN1cmZhY2UiKTsKdGhpcy53cml0ZU5vZGUoInBhdGNoZXMiLGEsYik7cmV0dXJuIGJ9LHBhdGNoZXM6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJnbWw6cGF0Y2hlcyIpO3RoaXMud3JpdGVOb2RlKCJQb2x5Z29uUGF0Y2giLGEsYik7cmV0dXJuIGJ9LFBvbHlnb25QYXRjaDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoImdtbDpQb2x5Z29uUGF0Y2giLHthdHRyaWJ1dGVzOntpbnRlcnBvbGF0aW9uOiJwbGFuYXIifX0pO3RoaXMud3JpdGVOb2RlKCJleHRlcmlvciIsYS5jb21wb25lbnRzWzBdLGIpO2Zvcih2YXIgYz0xLGQ9YS5jb21wb25lbnRzLmxlbmd0aDtjPGQ7KytjKXRoaXMud3JpdGVOb2RlKCJpbnRlcmlvciIsYS5jb21wb25lbnRzW2NdLGIpO3JldHVybiBifSxQb2x5Z29uOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygiZ21sOlBvbHlnb24iKTt0aGlzLndyaXRlTm9kZSgiZXh0ZXJpb3IiLGEuY29tcG9uZW50c1swXSwKYik7Zm9yKHZhciBjPTEsZD1hLmNvbXBvbmVudHMubGVuZ3RoO2M8ZDsrK2MpdGhpcy53cml0ZU5vZGUoImludGVyaW9yIixhLmNvbXBvbmVudHNbY10sYik7cmV0dXJuIGJ9LGV4dGVyaW9yOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygiZ21sOmV4dGVyaW9yIik7dGhpcy53cml0ZU5vZGUoIkxpbmVhclJpbmciLGEsYik7cmV0dXJuIGJ9LGludGVyaW9yOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygiZ21sOmludGVyaW9yIik7dGhpcy53cml0ZU5vZGUoIkxpbmVhclJpbmciLGEsYik7cmV0dXJuIGJ9LExpbmVhclJpbmc6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJnbWw6TGluZWFyUmluZyIpO3RoaXMud3JpdGVOb2RlKCJwb3NMaXN0IixhLmNvbXBvbmVudHMsYik7cmV0dXJuIGJ9LE11bHRpQ3VydmU6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJnbWw6TXVsdGlDdXJ2ZSIpOwphPWEuY29tcG9uZW50c3x8W2FdO2Zvcih2YXIgYz0wLGQ9YS5sZW5ndGg7YzxkOysrYyl0aGlzLndyaXRlTm9kZSgiY3VydmVNZW1iZXIiLGFbY10sYik7cmV0dXJuIGJ9LGN1cnZlTWVtYmVyOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygiZ21sOmN1cnZlTWVtYmVyIik7dGhpcy5jdXJ2ZT90aGlzLndyaXRlTm9kZSgiQ3VydmUiLGEsYik6dGhpcy53cml0ZU5vZGUoIkxpbmVTdHJpbmciLGEsYik7cmV0dXJuIGJ9LE11bHRpU3VyZmFjZTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoImdtbDpNdWx0aVN1cmZhY2UiKTthPWEuY29tcG9uZW50c3x8W2FdO2Zvcih2YXIgYz0wLGQ9YS5sZW5ndGg7YzxkOysrYyl0aGlzLndyaXRlTm9kZSgic3VyZmFjZU1lbWJlciIsYVtjXSxiKTtyZXR1cm4gYn0sc3VyZmFjZU1lbWJlcjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoImdtbDpzdXJmYWNlTWVtYmVyIik7CnRoaXMuc3VyZmFjZT90aGlzLndyaXRlTm9kZSgiU3VyZmFjZSIsYSxiKTp0aGlzLndyaXRlTm9kZSgiUG9seWdvbiIsYSxiKTtyZXR1cm4gYn0sRW52ZWxvcGU6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJnbWw6RW52ZWxvcGUiKTt0aGlzLndyaXRlTm9kZSgibG93ZXJDb3JuZXIiLGEsYik7dGhpcy53cml0ZU5vZGUoInVwcGVyQ29ybmVyIixhLGIpO3RoaXMuc3JzTmFtZSYmYi5zZXRBdHRyaWJ1dGUoInNyc05hbWUiLHRoaXMuc3JzTmFtZSk7cmV0dXJuIGJ9LGxvd2VyQ29ybmVyOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoImdtbDpsb3dlckNvcm5lciIse3ZhbHVlOnRoaXMueHk/YS5sZWZ0KyIgIithLmJvdHRvbTphLmJvdHRvbSsiICIrYS5sZWZ0fSl9LHVwcGVyQ29ybmVyOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoImdtbDp1cHBlckNvcm5lciIse3ZhbHVlOnRoaXMueHk/CmEucmlnaHQrIiAiK2EudG9wOmEudG9wKyIgIithLnJpZ2h0fSl9fSxPcGVuTGF5ZXJzLkZvcm1hdC5HTUwuQmFzZS5wcm90b3R5cGUud3JpdGVycy5nbWwpLGZlYXR1cmU6T3BlbkxheWVycy5Gb3JtYXQuR01MLkJhc2UucHJvdG90eXBlLndyaXRlcnMuZmVhdHVyZSx3ZnM6T3BlbkxheWVycy5Gb3JtYXQuR01MLkJhc2UucHJvdG90eXBlLndyaXRlcnMud2ZzfSxzZXRHZW9tZXRyeVR5cGVzOmZ1bmN0aW9uKCl7dGhpcy5nZW9tZXRyeVR5cGVzPXsiT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludCI6IlBvaW50IiwiT3BlbkxheWVycy5HZW9tZXRyeS5NdWx0aVBvaW50IjoiTXVsdGlQb2ludCIsIk9wZW5MYXllcnMuR2VvbWV0cnkuTGluZVN0cmluZyI6ITA9PT10aGlzLmN1cnZlPyJDdXJ2ZSI6IkxpbmVTdHJpbmciLCJPcGVuTGF5ZXJzLkdlb21ldHJ5Lk11bHRpTGluZVN0cmluZyI6ITE9PT10aGlzLm11bHRpQ3VydmU/Ik11bHRpTGluZVN0cmluZyI6Ik11bHRpQ3VydmUiLCJPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvbHlnb24iOiEwPT09CnRoaXMuc3VyZmFjZT8iU3VyZmFjZSI6IlBvbHlnb24iLCJPcGVuTGF5ZXJzLkdlb21ldHJ5Lk11bHRpUG9seWdvbiI6ITE9PT10aGlzLm11bHRpU3VyZmFjZT8iTXVsdGlQb2x5Z29uIjoiTXVsdGlTdXJmYWNlIiwiT3BlbkxheWVycy5HZW9tZXRyeS5Db2xsZWN0aW9uIjoiR2VvbWV0cnlDb2xsZWN0aW9uIn19LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuRm9ybWF0LkdNTC52MyJ9KTtPcGVuTGF5ZXJzLkZvcm1hdC5GaWx0ZXIudjFfMV8wPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Gb3JtYXQuR01MLnYzLE9wZW5MYXllcnMuRm9ybWF0LkZpbHRlci52MSx7VkVSU0lPTjoiMS4xLjAiLHNjaGVtYUxvY2F0aW9uOiJodHRwOi8vd3d3Lm9wZW5naXMubmV0L29nYy9maWx0ZXIvMS4xLjAvZmlsdGVyLnhzZCIsaW5pdGlhbGl6ZTpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLkZvcm1hdC5HTUwudjMucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxbYV0pfSxyZWFkZXJzOntvZ2M6T3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoe1Byb3BlcnR5SXNFcXVhbFRvOmZ1bmN0aW9uKGEsYil7dmFyIGM9YS5nZXRBdHRyaWJ1dGUoIm1hdGNoQ2FzZSIpLGM9bmV3IE9wZW5MYXllcnMuRmlsdGVyLkNvbXBhcmlzb24oe3R5cGU6T3BlbkxheWVycy5GaWx0ZXIuQ29tcGFyaXNvbi5FUVVBTF9UTyxtYXRjaENhc2U6ISgiZmFsc2UiPT09Y3x8IjAiPT09Yyl9KTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsCmMpO2IuZmlsdGVycy5wdXNoKGMpfSxQcm9wZXJ0eUlzTm90RXF1YWxUbzpmdW5jdGlvbihhLGIpe3ZhciBjPWEuZ2V0QXR0cmlidXRlKCJtYXRjaENhc2UiKSxjPW5ldyBPcGVuTGF5ZXJzLkZpbHRlci5Db21wYXJpc29uKHt0eXBlOk9wZW5MYXllcnMuRmlsdGVyLkNvbXBhcmlzb24uTk9UX0VRVUFMX1RPLG1hdGNoQ2FzZTohKCJmYWxzZSI9PT1jfHwiMCI9PT1jKX0pO3RoaXMucmVhZENoaWxkTm9kZXMoYSxjKTtiLmZpbHRlcnMucHVzaChjKX0sUHJvcGVydHlJc0xpa2U6ZnVuY3Rpb24oYSxiKXt2YXIgYz1uZXcgT3BlbkxheWVycy5GaWx0ZXIuQ29tcGFyaXNvbih7dHlwZTpPcGVuTGF5ZXJzLkZpbHRlci5Db21wYXJpc29uLkxJS0V9KTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYyk7dmFyIGQ9YS5nZXRBdHRyaWJ1dGUoIndpbGRDYXJkIiksZT1hLmdldEF0dHJpYnV0ZSgic2luZ2xlQ2hhciIpLGY9YS5nZXRBdHRyaWJ1dGUoImVzY2FwZUNoYXIiKTtjLnZhbHVlMnJlZ2V4KGQsZSwKZik7Yi5maWx0ZXJzLnB1c2goYyl9fSxPcGVuTGF5ZXJzLkZvcm1hdC5GaWx0ZXIudjEucHJvdG90eXBlLnJlYWRlcnMub2djKSxnbWw6T3BlbkxheWVycy5Gb3JtYXQuR01MLnYzLnByb3RvdHlwZS5yZWFkZXJzLmdtbCxmZWF0dXJlOk9wZW5MYXllcnMuRm9ybWF0LkdNTC52My5wcm90b3R5cGUucmVhZGVycy5mZWF0dXJlfSx3cml0ZXJzOntvZ2M6T3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoe1Byb3BlcnR5SXNFcXVhbFRvOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygib2djOlByb3BlcnR5SXNFcXVhbFRvIix7YXR0cmlidXRlczp7bWF0Y2hDYXNlOmEubWF0Y2hDYXNlfX0pO3RoaXMud3JpdGVOb2RlKCJQcm9wZXJ0eU5hbWUiLGEsYik7dGhpcy53cml0ZU9nY0V4cHJlc3Npb24oYS52YWx1ZSxiKTtyZXR1cm4gYn0sUHJvcGVydHlJc05vdEVxdWFsVG86ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJvZ2M6UHJvcGVydHlJc05vdEVxdWFsVG8iLAp7YXR0cmlidXRlczp7bWF0Y2hDYXNlOmEubWF0Y2hDYXNlfX0pO3RoaXMud3JpdGVOb2RlKCJQcm9wZXJ0eU5hbWUiLGEsYik7dGhpcy53cml0ZU9nY0V4cHJlc3Npb24oYS52YWx1ZSxiKTtyZXR1cm4gYn0sUHJvcGVydHlJc0xpa2U6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJvZ2M6UHJvcGVydHlJc0xpa2UiLHthdHRyaWJ1dGVzOnttYXRjaENhc2U6YS5tYXRjaENhc2Usd2lsZENhcmQ6IioiLHNpbmdsZUNoYXI6Ii4iLGVzY2FwZUNoYXI6IiEifX0pO3RoaXMud3JpdGVOb2RlKCJQcm9wZXJ0eU5hbWUiLGEsYik7dGhpcy53cml0ZU5vZGUoIkxpdGVyYWwiLGEucmVnZXgydmFsdWUoKSxiKTtyZXR1cm4gYn0sQkJPWDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoIm9nYzpCQk9YIik7YS5wcm9wZXJ0eSYmdGhpcy53cml0ZU5vZGUoIlByb3BlcnR5TmFtZSIsYSxiKTt2YXIgYz10aGlzLndyaXRlTm9kZSgiZ21sOkVudmVsb3BlIiwKYS52YWx1ZSk7YS5wcm9qZWN0aW9uJiZjLnNldEF0dHJpYnV0ZSgic3JzTmFtZSIsYS5wcm9qZWN0aW9uKTtiLmFwcGVuZENoaWxkKGMpO3JldHVybiBifSxTb3J0Qnk6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygib2djOlNvcnRCeSIpLGM9MCxkPWEubGVuZ3RoO2M8ZDtjKyspdGhpcy53cml0ZU5vZGUoIm9nYzpTb3J0UHJvcGVydHkiLGFbY10sYik7cmV0dXJuIGJ9LFNvcnRQcm9wZXJ0eTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoIm9nYzpTb3J0UHJvcGVydHkiKTt0aGlzLndyaXRlTm9kZSgib2djOlByb3BlcnR5TmFtZSIsYSxiKTt0aGlzLndyaXRlTm9kZSgib2djOlNvcnRPcmRlciIsIkRFU0MiPT1hLm9yZGVyPyJERVNDIjoiQVNDIixiKTtyZXR1cm4gYn0sU29ydE9yZGVyOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoIm9nYzpTb3J0T3JkZXIiLHt2YWx1ZTphfSl9fSwKT3BlbkxheWVycy5Gb3JtYXQuRmlsdGVyLnYxLnByb3RvdHlwZS53cml0ZXJzLm9nYyksZ21sOk9wZW5MYXllcnMuRm9ybWF0LkdNTC52My5wcm90b3R5cGUud3JpdGVycy5nbWwsZmVhdHVyZTpPcGVuTGF5ZXJzLkZvcm1hdC5HTUwudjMucHJvdG90eXBlLndyaXRlcnMuZmVhdHVyZX0sd3JpdGVTcGF0aWFsOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJvZ2M6IitiKTt0aGlzLndyaXRlTm9kZSgiUHJvcGVydHlOYW1lIixhLGMpO2lmKGEudmFsdWUgaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLkZpbHRlci5GdW5jdGlvbil0aGlzLndyaXRlTm9kZSgiRnVuY3Rpb24iLGEudmFsdWUsYyk7ZWxzZXt2YXIgZDtkPWEudmFsdWUgaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLkdlb21ldHJ5P3RoaXMud3JpdGVOb2RlKCJmZWF0dXJlOl9nZW9tZXRyeSIsYS52YWx1ZSkuZmlyc3RDaGlsZDp0aGlzLndyaXRlTm9kZSgiZ21sOkVudmVsb3BlIixhLnZhbHVlKTthLnByb2plY3Rpb24mJgpkLnNldEF0dHJpYnV0ZSgic3JzTmFtZSIsYS5wcm9qZWN0aW9uKTtjLmFwcGVuZENoaWxkKGQpfXJldHVybiBjfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkZvcm1hdC5GaWx0ZXIudjFfMV8wIn0pO09wZW5MYXllcnMuRm9ybWF0Lk9XU0NvbW1vbj1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuRm9ybWF0LlhNTC5WZXJzaW9uZWRPR0Mse2RlZmF1bHRWZXJzaW9uOiIxLjAuMCIsZ2V0VmVyc2lvbjpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMudmVyc2lvbjtpZighYyl7dmFyIGQ9YS5nZXRBdHRyaWJ1dGUoInhtbG5zOm93cyIpO2QmJiIxLjEiPT09ZC5zdWJzdHJpbmcoZC5sYXN0SW5kZXhPZigiLyIpKzEpJiYoYz0iMS4xLjAiKTtjfHwoYz10aGlzLmRlZmF1bHRWZXJzaW9uKX1yZXR1cm4gY30sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Gb3JtYXQuT1dTQ29tbW9uIn0pO09wZW5MYXllcnMuRm9ybWF0Lk9XU0NvbW1vbi52MT1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuRm9ybWF0LlhNTCx7cmVnRXhlczp7dHJpbVNwYWNlOi9eXHMqfFxzKiQvZyxyZW1vdmVTcGFjZTovXHMqL2csc3BsaXRTcGFjZTovXHMrLyx0cmltQ29tbWE6L1xzKixccyovZ30scmVhZDpmdW5jdGlvbihhLGIpe09wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKGIsdGhpcy5vcHRpb25zKTt2YXIgYz17fTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYyk7cmV0dXJuIGN9LHJlYWRlcnM6e293czp7RXhjZXB0aW9uOmZ1bmN0aW9uKGEsYil7dmFyIGM9e2NvZGU6YS5nZXRBdHRyaWJ1dGUoImV4Y2VwdGlvbkNvZGUiKSxsb2NhdG9yOmEuZ2V0QXR0cmlidXRlKCJsb2NhdG9yIiksdGV4dHM6W119O2IuZXhjZXB0aW9ucy5wdXNoKGMpO3RoaXMucmVhZENoaWxkTm9kZXMoYSxjKX0sRXhjZXB0aW9uVGV4dDpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuZ2V0Q2hpbGRWYWx1ZShhKTtiLnRleHRzLnB1c2goYyl9LApTZXJ2aWNlSWRlbnRpZmljYXRpb246ZnVuY3Rpb24oYSxiKXtiLnNlcnZpY2VJZGVudGlmaWNhdGlvbj17fTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYi5zZXJ2aWNlSWRlbnRpZmljYXRpb24pfSxUaXRsZTpmdW5jdGlvbihhLGIpe2IudGl0bGU9dGhpcy5nZXRDaGlsZFZhbHVlKGEpfSxBYnN0cmFjdDpmdW5jdGlvbihhLGIpe2JbImFic3RyYWN0Il09dGhpcy5nZXRDaGlsZFZhbHVlKGEpfSxLZXl3b3JkczpmdW5jdGlvbihhLGIpe2Iua2V5d29yZHM9e307dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGIua2V5d29yZHMpfSxLZXl3b3JkOmZ1bmN0aW9uKGEsYil7Ylt0aGlzLmdldENoaWxkVmFsdWUoYSldPSEwfSxTZXJ2aWNlVHlwZTpmdW5jdGlvbihhLGIpe2Iuc2VydmljZVR5cGU9e2NvZGVTcGFjZTphLmdldEF0dHJpYnV0ZSgiY29kZVNwYWNlIiksdmFsdWU6dGhpcy5nZXRDaGlsZFZhbHVlKGEpfX0sU2VydmljZVR5cGVWZXJzaW9uOmZ1bmN0aW9uKGEsYil7Yi5zZXJ2aWNlVHlwZVZlcnNpb249CnRoaXMuZ2V0Q2hpbGRWYWx1ZShhKX0sRmVlczpmdW5jdGlvbihhLGIpe2IuZmVlcz10aGlzLmdldENoaWxkVmFsdWUoYSl9LEFjY2Vzc0NvbnN0cmFpbnRzOmZ1bmN0aW9uKGEsYil7Yi5hY2Nlc3NDb25zdHJhaW50cz10aGlzLmdldENoaWxkVmFsdWUoYSl9LFNlcnZpY2VQcm92aWRlcjpmdW5jdGlvbihhLGIpe2Iuc2VydmljZVByb3ZpZGVyPXt9O3RoaXMucmVhZENoaWxkTm9kZXMoYSxiLnNlcnZpY2VQcm92aWRlcil9LFByb3ZpZGVyTmFtZTpmdW5jdGlvbihhLGIpe2IucHJvdmlkZXJOYW1lPXRoaXMuZ2V0Q2hpbGRWYWx1ZShhKX0sUHJvdmlkZXJTaXRlOmZ1bmN0aW9uKGEsYil7Yi5wcm92aWRlclNpdGU9dGhpcy5nZXRBdHRyaWJ1dGVOUyhhLHRoaXMubmFtZXNwYWNlcy54bGluaywiaHJlZiIpfSxTZXJ2aWNlQ29udGFjdDpmdW5jdGlvbihhLGIpe2Iuc2VydmljZUNvbnRhY3Q9e307dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGIuc2VydmljZUNvbnRhY3QpfSxJbmRpdmlkdWFsTmFtZTpmdW5jdGlvbihhLApiKXtiLmluZGl2aWR1YWxOYW1lPXRoaXMuZ2V0Q2hpbGRWYWx1ZShhKX0sUG9zaXRpb25OYW1lOmZ1bmN0aW9uKGEsYil7Yi5wb3NpdGlvbk5hbWU9dGhpcy5nZXRDaGlsZFZhbHVlKGEpfSxDb250YWN0SW5mbzpmdW5jdGlvbihhLGIpe2IuY29udGFjdEluZm89e307dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGIuY29udGFjdEluZm8pfSxQaG9uZTpmdW5jdGlvbihhLGIpe2IucGhvbmU9e307dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGIucGhvbmUpfSxWb2ljZTpmdW5jdGlvbihhLGIpe2Iudm9pY2U9dGhpcy5nZXRDaGlsZFZhbHVlKGEpfSxBZGRyZXNzOmZ1bmN0aW9uKGEsYil7Yi5hZGRyZXNzPXt9O3RoaXMucmVhZENoaWxkTm9kZXMoYSxiLmFkZHJlc3MpfSxEZWxpdmVyeVBvaW50OmZ1bmN0aW9uKGEsYil7Yi5kZWxpdmVyeVBvaW50PXRoaXMuZ2V0Q2hpbGRWYWx1ZShhKX0sQ2l0eTpmdW5jdGlvbihhLGIpe2IuY2l0eT10aGlzLmdldENoaWxkVmFsdWUoYSl9LEFkbWluaXN0cmF0aXZlQXJlYTpmdW5jdGlvbihhLApiKXtiLmFkbWluaXN0cmF0aXZlQXJlYT10aGlzLmdldENoaWxkVmFsdWUoYSl9LFBvc3RhbENvZGU6ZnVuY3Rpb24oYSxiKXtiLnBvc3RhbENvZGU9dGhpcy5nZXRDaGlsZFZhbHVlKGEpfSxDb3VudHJ5OmZ1bmN0aW9uKGEsYil7Yi5jb3VudHJ5PXRoaXMuZ2V0Q2hpbGRWYWx1ZShhKX0sRWxlY3Ryb25pY01haWxBZGRyZXNzOmZ1bmN0aW9uKGEsYil7Yi5lbGVjdHJvbmljTWFpbEFkZHJlc3M9dGhpcy5nZXRDaGlsZFZhbHVlKGEpfSxSb2xlOmZ1bmN0aW9uKGEsYil7Yi5yb2xlPXRoaXMuZ2V0Q2hpbGRWYWx1ZShhKX0sT3BlcmF0aW9uc01ldGFkYXRhOmZ1bmN0aW9uKGEsYil7Yi5vcGVyYXRpb25zTWV0YWRhdGE9e307dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGIub3BlcmF0aW9uc01ldGFkYXRhKX0sT3BlcmF0aW9uOmZ1bmN0aW9uKGEsYil7dmFyIGM9YS5nZXRBdHRyaWJ1dGUoIm5hbWUiKTtiW2NdPXt9O3RoaXMucmVhZENoaWxkTm9kZXMoYSxiW2NdKX0sRENQOmZ1bmN0aW9uKGEsCmIpe2IuZGNwPXt9O3RoaXMucmVhZENoaWxkTm9kZXMoYSxiLmRjcCl9LEhUVFA6ZnVuY3Rpb24oYSxiKXtiLmh0dHA9e307dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGIuaHR0cCl9LEdldDpmdW5jdGlvbihhLGIpe2IuZ2V0fHwoYi5nZXQ9W10pO3ZhciBjPXt1cmw6dGhpcy5nZXRBdHRyaWJ1dGVOUyhhLHRoaXMubmFtZXNwYWNlcy54bGluaywiaHJlZiIpfTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYyk7Yi5nZXQucHVzaChjKX0sUG9zdDpmdW5jdGlvbihhLGIpe2IucG9zdHx8KGIucG9zdD1bXSk7dmFyIGM9e3VybDp0aGlzLmdldEF0dHJpYnV0ZU5TKGEsdGhpcy5uYW1lc3BhY2VzLnhsaW5rLCJocmVmIil9O3RoaXMucmVhZENoaWxkTm9kZXMoYSxjKTtiLnBvc3QucHVzaChjKX0sUGFyYW1ldGVyOmZ1bmN0aW9uKGEsYil7Yi5wYXJhbWV0ZXJzfHwoYi5wYXJhbWV0ZXJzPXt9KTt2YXIgYz1hLmdldEF0dHJpYnV0ZSgibmFtZSIpO2IucGFyYW1ldGVyc1tjXT17fTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsCmIucGFyYW1ldGVyc1tjXSl9LENvbnN0cmFpbnQ6ZnVuY3Rpb24oYSxiKXtiLmNvbnN0cmFpbnRzfHwoYi5jb25zdHJhaW50cz17fSk7dmFyIGM9YS5nZXRBdHRyaWJ1dGUoIm5hbWUiKTtiLmNvbnN0cmFpbnRzW2NdPXt9O3RoaXMucmVhZENoaWxkTm9kZXMoYSxiLmNvbnN0cmFpbnRzW2NdKX0sVmFsdWU6ZnVuY3Rpb24oYSxiKXtiW3RoaXMuZ2V0Q2hpbGRWYWx1ZShhKV09ITB9LE91dHB1dEZvcm1hdDpmdW5jdGlvbihhLGIpe2IuZm9ybWF0cy5wdXNoKHt2YWx1ZTp0aGlzLmdldENoaWxkVmFsdWUoYSl9KTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYil9LFdHUzg0Qm91bmRpbmdCb3g6ZnVuY3Rpb24oYSxiKXt2YXIgYz17fTtjLmNycz1hLmdldEF0dHJpYnV0ZSgiY3JzIik7Yi5Cb3VuZGluZ0JveD9iLkJvdW5kaW5nQm94LnB1c2goYyk6KGIucHJvamVjdGlvbj1jLmNycyxjPWIpO3RoaXMucmVhZENoaWxkTm9kZXMoYSxjKX0sQm91bmRpbmdCb3g6ZnVuY3Rpb24oYSxiKXt0aGlzLnJlYWRlcnMub3dzLldHUzg0Qm91bmRpbmdCb3guYXBwbHkodGhpcywKW2EsYl0pfSxMb3dlckNvcm5lcjpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuZ2V0Q2hpbGRWYWx1ZShhKS5yZXBsYWNlKHRoaXMucmVnRXhlcy50cmltU3BhY2UsIiIpLGM9Yy5yZXBsYWNlKHRoaXMucmVnRXhlcy50cmltQ29tbWEsIiwiKSxjPWMuc3BsaXQodGhpcy5yZWdFeGVzLnNwbGl0U3BhY2UpO2IubGVmdD1jWzBdO2IuYm90dG9tPWNbMV19LFVwcGVyQ29ybmVyOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5nZXRDaGlsZFZhbHVlKGEpLnJlcGxhY2UodGhpcy5yZWdFeGVzLnRyaW1TcGFjZSwiIiksYz1jLnJlcGxhY2UodGhpcy5yZWdFeGVzLnRyaW1Db21tYSwiLCIpLGM9Yy5zcGxpdCh0aGlzLnJlZ0V4ZXMuc3BsaXRTcGFjZSk7Yi5yaWdodD1jWzBdO2IudG9wPWNbMV07Yi5ib3VuZHM9bmV3IE9wZW5MYXllcnMuQm91bmRzKGIubGVmdCxiLmJvdHRvbSxiLnJpZ2h0LGIudG9wKTtkZWxldGUgYi5sZWZ0O2RlbGV0ZSBiLmJvdHRvbTtkZWxldGUgYi5yaWdodDtkZWxldGUgYi50b3B9LApMYW5ndWFnZTpmdW5jdGlvbihhLGIpe2IubGFuZ3VhZ2U9dGhpcy5nZXRDaGlsZFZhbHVlKGEpfX19LHdyaXRlcnM6e293czp7Qm91bmRpbmdCb3g6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoYnx8Im93czpCb3VuZGluZ0JveCIse2F0dHJpYnV0ZXM6e2NyczphLnByb2plY3Rpb259fSk7dGhpcy53cml0ZU5vZGUoIm93czpMb3dlckNvcm5lciIsYSxjKTt0aGlzLndyaXRlTm9kZSgib3dzOlVwcGVyQ29ybmVyIixhLGMpO3JldHVybiBjfSxMb3dlckNvcm5lcjpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJvd3M6TG93ZXJDb3JuZXIiLHt2YWx1ZTphLmJvdW5kcy5sZWZ0KyIgIithLmJvdW5kcy5ib3R0b219KX0sVXBwZXJDb3JuZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygib3dzOlVwcGVyQ29ybmVyIix7dmFsdWU6YS5ib3VuZHMucmlnaHQrIiAiK2EuYm91bmRzLnRvcH0pfSwKSWRlbnRpZmllcjpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJvd3M6SWRlbnRpZmllciIse3ZhbHVlOmF9KX0sVGl0bGU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygib3dzOlRpdGxlIix7dmFsdWU6YX0pfSxBYnN0cmFjdDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJvd3M6QWJzdHJhY3QiLHt2YWx1ZTphfSl9LE91dHB1dEZvcm1hdDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJvd3M6T3V0cHV0Rm9ybWF0Iix7dmFsdWU6YX0pfX19LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuRm9ybWF0Lk9XU0NvbW1vbi52MSJ9KTtPcGVuTGF5ZXJzLkZvcm1hdC5PV1NDb21tb24udjFfMF8wPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Gb3JtYXQuT1dTQ29tbW9uLnYxLHtuYW1lc3BhY2VzOntvd3M6Imh0dHA6Ly93d3cub3Blbmdpcy5uZXQvb3dzIix4bGluazoiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayJ9LHJlYWRlcnM6e293czpPcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyh7RXhjZXB0aW9uUmVwb3J0OmZ1bmN0aW9uKGEsYil7Yi5zdWNjZXNzPSExO2IuZXhjZXB0aW9uUmVwb3J0PXt2ZXJzaW9uOmEuZ2V0QXR0cmlidXRlKCJ2ZXJzaW9uIiksbGFuZ3VhZ2U6YS5nZXRBdHRyaWJ1dGUoImxhbmd1YWdlIiksZXhjZXB0aW9uczpbXX07dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGIuZXhjZXB0aW9uUmVwb3J0KX19LE9wZW5MYXllcnMuRm9ybWF0Lk9XU0NvbW1vbi52MS5wcm90b3R5cGUucmVhZGVycy5vd3MpfSx3cml0ZXJzOntvd3M6T3BlbkxheWVycy5Gb3JtYXQuT1dTQ29tbW9uLnYxLnByb3RvdHlwZS53cml0ZXJzLm93c30sCkNMQVNTX05BTUU6Ik9wZW5MYXllcnMuRm9ybWF0Lk9XU0NvbW1vbi52MV8wXzAifSk7T3BlbkxheWVycy5Gb3JtYXQuV0ZTVC52MV8xXzA9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkZvcm1hdC5GaWx0ZXIudjFfMV8wLE9wZW5MYXllcnMuRm9ybWF0LldGU1QudjEse3ZlcnNpb246IjEuMS4wIixzY2hlbWFMb2NhdGlvbnM6e3dmczoiaHR0cDovL3NjaGVtYXMub3Blbmdpcy5uZXQvd2ZzLzEuMS4wL3dmcy54c2QifSxpbml0aWFsaXplOmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuRm9ybWF0LkZpbHRlci52MV8xXzAucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxbYV0pO09wZW5MYXllcnMuRm9ybWF0LldGU1QudjEucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxbYV0pfSxyZWFkTm9kZTpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIE9wZW5MYXllcnMuRm9ybWF0LkdNTC52My5wcm90b3R5cGUucmVhZE5vZGUuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxyZWFkZXJzOnt3ZnM6T3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoe0ZlYXR1cmVDb2xsZWN0aW9uOmZ1bmN0aW9uKGEsCmIpe2IubnVtYmVyT2ZGZWF0dXJlcz1wYXJzZUludChhLmdldEF0dHJpYnV0ZSgibnVtYmVyT2ZGZWF0dXJlcyIpKTtPcGVuTGF5ZXJzLkZvcm1hdC5XRlNULnYxLnByb3RvdHlwZS5yZWFkZXJzLndmcy5GZWF0dXJlQ29sbGVjdGlvbi5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LFRyYW5zYWN0aW9uUmVzcG9uc2U6ZnVuY3Rpb24oYSxiKXtiLmluc2VydElkcz1bXTtiLnN1Y2Nlc3M9ITE7dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGIpfSxUcmFuc2FjdGlvblN1bW1hcnk6ZnVuY3Rpb24oYSxiKXtiLnN1Y2Nlc3M9ITB9LEluc2VydFJlc3VsdHM6ZnVuY3Rpb24oYSxiKXt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYil9LEZlYXR1cmU6ZnVuY3Rpb24oYSxiKXt2YXIgYz17ZmlkczpbXX07dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGMpO2IuaW5zZXJ0SWRzLnB1c2goYy5maWRzWzBdKX19LE9wZW5MYXllcnMuRm9ybWF0LldGU1QudjEucHJvdG90eXBlLnJlYWRlcnMud2ZzKSxnbWw6T3BlbkxheWVycy5Gb3JtYXQuR01MLnYzLnByb3RvdHlwZS5yZWFkZXJzLmdtbCwKZmVhdHVyZTpPcGVuTGF5ZXJzLkZvcm1hdC5HTUwudjMucHJvdG90eXBlLnJlYWRlcnMuZmVhdHVyZSxvZ2M6T3BlbkxheWVycy5Gb3JtYXQuRmlsdGVyLnYxXzFfMC5wcm90b3R5cGUucmVhZGVycy5vZ2Msb3dzOk9wZW5MYXllcnMuRm9ybWF0Lk9XU0NvbW1vbi52MV8wXzAucHJvdG90eXBlLnJlYWRlcnMub3dzfSx3cml0ZXJzOnt3ZnM6T3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoe0dldEZlYXR1cmU6ZnVuY3Rpb24oYSl7dmFyIGI9T3BlbkxheWVycy5Gb3JtYXQuV0ZTVC52MS5wcm90b3R5cGUud3JpdGVycy53ZnMuR2V0RmVhdHVyZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7YSYmdGhpcy5zZXRBdHRyaWJ1dGVzKGIse3Jlc3VsdFR5cGU6YS5yZXN1bHRUeXBlLHN0YXJ0SW5kZXg6YS5zdGFydEluZGV4LGNvdW50OmEuY291bnR9KTtyZXR1cm4gYn0sUXVlcnk6ZnVuY3Rpb24oYSl7YT1PcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHtmZWF0dXJlTlM6dGhpcy5mZWF0dXJlTlMsCmZlYXR1cmVQcmVmaXg6dGhpcy5mZWF0dXJlUHJlZml4LGZlYXR1cmVUeXBlOnRoaXMuZmVhdHVyZVR5cGUsc3JzTmFtZTp0aGlzLnNyc05hbWV9LGEpO3ZhciBiPWEuZmVhdHVyZVByZWZpeCxjPXRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygid2ZzOlF1ZXJ5Iix7YXR0cmlidXRlczp7dHlwZU5hbWU6KGI/YisiOiI6IiIpK2EuZmVhdHVyZVR5cGUsc3JzTmFtZTphLnNyc05hbWV9fSk7YS5mZWF0dXJlTlMmJmMuc2V0QXR0cmlidXRlKCJ4bWxuczoiK2IsYS5mZWF0dXJlTlMpO2lmKGEucHJvcGVydHlOYW1lcylmb3IodmFyIGI9MCxkPWEucHJvcGVydHlOYW1lcy5sZW5ndGg7YjxkO2IrKyl0aGlzLndyaXRlTm9kZSgid2ZzOlByb3BlcnR5TmFtZSIse3Byb3BlcnR5OmEucHJvcGVydHlOYW1lc1tiXX0sYyk7YS5maWx0ZXImJihPcGVuTGF5ZXJzLkZvcm1hdC5XRlNULnYxXzFfMC5wcm90b3R5cGUuc2V0RmlsdGVyUHJvcGVydHkuY2FsbCh0aGlzLGEuZmlsdGVyKSx0aGlzLndyaXRlTm9kZSgib2djOkZpbHRlciIsCmEuZmlsdGVyLGMpKTtyZXR1cm4gY30sUHJvcGVydHlOYW1lOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoIndmczpQcm9wZXJ0eU5hbWUiLHt2YWx1ZTphLnByb3BlcnR5fSl9fSxPcGVuTGF5ZXJzLkZvcm1hdC5XRlNULnYxLnByb3RvdHlwZS53cml0ZXJzLndmcyksZ21sOk9wZW5MYXllcnMuRm9ybWF0LkdNTC52My5wcm90b3R5cGUud3JpdGVycy5nbWwsZmVhdHVyZTpPcGVuTGF5ZXJzLkZvcm1hdC5HTUwudjMucHJvdG90eXBlLndyaXRlcnMuZmVhdHVyZSxvZ2M6T3BlbkxheWVycy5Gb3JtYXQuRmlsdGVyLnYxXzFfMC5wcm90b3R5cGUud3JpdGVycy5vZ2N9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuRm9ybWF0LldGU1QudjFfMV8wIn0pO09wZW5MYXllcnMuUHJvdG9jb2w9T3BlbkxheWVycy5DbGFzcyh7Zm9ybWF0Om51bGwsb3B0aW9uczpudWxsLGF1dG9EZXN0cm95OiEwLGRlZmF1bHRGaWx0ZXI6bnVsbCxpbml0aWFsaXplOmZ1bmN0aW9uKGEpe2E9YXx8e307T3BlbkxheWVycy5VdGlsLmV4dGVuZCh0aGlzLGEpO3RoaXMub3B0aW9ucz1hfSxtZXJnZVdpdGhEZWZhdWx0RmlsdGVyOmZ1bmN0aW9uKGEpe3JldHVybiBhJiZ0aGlzLmRlZmF1bHRGaWx0ZXI/bmV3IE9wZW5MYXllcnMuRmlsdGVyLkxvZ2ljYWwoe3R5cGU6T3BlbkxheWVycy5GaWx0ZXIuTG9naWNhbC5BTkQsZmlsdGVyczpbdGhpcy5kZWZhdWx0RmlsdGVyLGFdfSk6YXx8dGhpcy5kZWZhdWx0RmlsdGVyfHx2b2lkIDB9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmZvcm1hdD10aGlzLm9wdGlvbnM9bnVsbH0scmVhZDpmdW5jdGlvbihhKXthPWF8fHt9O2EuZmlsdGVyPXRoaXMubWVyZ2VXaXRoRGVmYXVsdEZpbHRlcihhLmZpbHRlcil9LGNyZWF0ZTpmdW5jdGlvbigpe30sCnVwZGF0ZTpmdW5jdGlvbigpe30sImRlbGV0ZSI6ZnVuY3Rpb24oKXt9LGNvbW1pdDpmdW5jdGlvbigpe30sYWJvcnQ6ZnVuY3Rpb24oYSl7fSxjcmVhdGVDYWxsYmFjazpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIE9wZW5MYXllcnMuRnVuY3Rpb24uYmluZChmdW5jdGlvbigpe2EuYXBwbHkodGhpcyxbYixjXSl9LHRoaXMpfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLlByb3RvY29sIn0pO09wZW5MYXllcnMuUHJvdG9jb2wuUmVzcG9uc2U9T3BlbkxheWVycy5DbGFzcyh7Y29kZTpudWxsLHJlcXVlc3RUeXBlOm51bGwsbGFzdDohMCxmZWF0dXJlczpudWxsLGRhdGE6bnVsbCxyZXFGZWF0dXJlczpudWxsLHByaXY6bnVsbCxlcnJvcjpudWxsLGluaXRpYWxpemU6ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5VdGlsLmV4dGVuZCh0aGlzLGEpfSxzdWNjZXNzOmZ1bmN0aW9uKCl7cmV0dXJuIDA8dGhpcy5jb2RlfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLlByb3RvY29sLlJlc3BvbnNlIn0pOwpPcGVuTGF5ZXJzLlByb3RvY29sLlJlc3BvbnNlLlNVQ0NFU1M9MTtPcGVuTGF5ZXJzLlByb3RvY29sLlJlc3BvbnNlLkZBSUxVUkU9MDtPcGVuTGF5ZXJzLkZvcm1hdC5KU09OPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Gb3JtYXQse2luZGVudDoiICAgICIsc3BhY2U6IiAiLG5ld2xpbmU6IlxuIixsZXZlbDowLHByZXR0eTohMSxuYXRpdmVKU09OOmZ1bmN0aW9uKCl7cmV0dXJuISghd2luZG93LkpTT058fCJmdW5jdGlvbiIhPXR5cGVvZiBKU09OLnBhcnNlfHwiZnVuY3Rpb24iIT10eXBlb2YgSlNPTi5zdHJpbmdpZnkpfSgpLHJlYWQ6ZnVuY3Rpb24oYSxiKXt2YXIgYztpZih0aGlzLm5hdGl2ZUpTT04pYz1KU09OLnBhcnNlKGEsYik7ZWxzZSB0cnl7aWYoL15bXF0sOnt9XHNdKiQvLnRlc3QoYS5yZXBsYWNlKC9cXFsiXFxcL2JmbnJ0dV0vZywiQCIpLnJlcGxhY2UoLyJbXiJcXFxuXHJdKiJ8dHJ1ZXxmYWxzZXxudWxsfC0/XGQrKD86XC5cZCopPyg/OltlRV1bK1wtXT9cZCspPy9nLCJdIikucmVwbGFjZSgvKD86Xnw6fCwpKD86XHMqXFspKy9nLCIiKSkmJihjPWV2YWwoIigiK2ErIikiKSwiZnVuY3Rpb24iPT09CnR5cGVvZiBiKSl7dmFyIGQ9ZnVuY3Rpb24oYSxjKXtpZihjJiYib2JqZWN0Ij09PXR5cGVvZiBjKWZvcih2YXIgZSBpbiBjKWMuaGFzT3duUHJvcGVydHkoZSkmJihjW2VdPWQoZSxjW2VdKSk7cmV0dXJuIGIoYSxjKX07Yz1kKCIiLGMpfX1jYXRjaChlKXt9dGhpcy5rZWVwRGF0YSYmKHRoaXMuZGF0YT1jKTtyZXR1cm4gY30sd3JpdGU6ZnVuY3Rpb24oYSxiKXt0aGlzLnByZXR0eT0hIWI7dmFyIGM9bnVsbCxkPXR5cGVvZiBhO2lmKHRoaXMuc2VyaWFsaXplW2RdKXRyeXtjPSF0aGlzLnByZXR0eSYmdGhpcy5uYXRpdmVKU09OP0pTT04uc3RyaW5naWZ5KGEpOnRoaXMuc2VyaWFsaXplW2RdLmFwcGx5KHRoaXMsW2FdKX1jYXRjaChlKXtPcGVuTGF5ZXJzLkNvbnNvbGUuZXJyb3IoIlRyb3VibGUgc2VyaWFsaXppbmc6ICIrZSl9cmV0dXJuIGN9LHdyaXRlSW5kZW50OmZ1bmN0aW9uKCl7dmFyIGE9W107aWYodGhpcy5wcmV0dHkpZm9yKHZhciBiPTA7Yjx0aGlzLmxldmVsOysrYilhLnB1c2godGhpcy5pbmRlbnQpOwpyZXR1cm4gYS5qb2luKCIiKX0sd3JpdGVOZXdsaW5lOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHJldHR5P3RoaXMubmV3bGluZToiIn0sd3JpdGVTcGFjZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnByZXR0eT90aGlzLnNwYWNlOiIifSxzZXJpYWxpemU6e29iamVjdDpmdW5jdGlvbihhKXtpZihudWxsPT1hKXJldHVybiJudWxsIjtpZihhLmNvbnN0cnVjdG9yPT1EYXRlKXJldHVybiB0aGlzLnNlcmlhbGl6ZS5kYXRlLmFwcGx5KHRoaXMsW2FdKTtpZihhLmNvbnN0cnVjdG9yPT1BcnJheSlyZXR1cm4gdGhpcy5zZXJpYWxpemUuYXJyYXkuYXBwbHkodGhpcyxbYV0pO3ZhciBiPVsieyJdO3RoaXMubGV2ZWwrPTE7dmFyIGMsZCxlLGY9ITE7Zm9yKGMgaW4gYSlhLmhhc093blByb3BlcnR5KGMpJiYoZD1PcGVuTGF5ZXJzLkZvcm1hdC5KU09OLnByb3RvdHlwZS53cml0ZS5hcHBseSh0aGlzLFtjLHRoaXMucHJldHR5XSksZT1PcGVuTGF5ZXJzLkZvcm1hdC5KU09OLnByb3RvdHlwZS53cml0ZS5hcHBseSh0aGlzLApbYVtjXSx0aGlzLnByZXR0eV0pLG51bGwhPWQmJm51bGwhPWUmJihmJiZiLnB1c2goIiwiKSxiLnB1c2godGhpcy53cml0ZU5ld2xpbmUoKSx0aGlzLndyaXRlSW5kZW50KCksZCwiOiIsdGhpcy53cml0ZVNwYWNlKCksZSksZj0hMCkpO3RoaXMubGV2ZWwtPTE7Yi5wdXNoKHRoaXMud3JpdGVOZXdsaW5lKCksdGhpcy53cml0ZUluZGVudCgpLCJ9Iik7cmV0dXJuIGIuam9pbigiIil9LGFycmF5OmZ1bmN0aW9uKGEpe3ZhciBiLGM9WyJbIl07dGhpcy5sZXZlbCs9MTtmb3IodmFyIGQ9MCxlPWEubGVuZ3RoO2Q8ZTsrK2QpYj1PcGVuTGF5ZXJzLkZvcm1hdC5KU09OLnByb3RvdHlwZS53cml0ZS5hcHBseSh0aGlzLFthW2RdLHRoaXMucHJldHR5XSksbnVsbCE9YiYmKDA8ZCYmYy5wdXNoKCIsIiksYy5wdXNoKHRoaXMud3JpdGVOZXdsaW5lKCksdGhpcy53cml0ZUluZGVudCgpLGIpKTt0aGlzLmxldmVsLT0xO2MucHVzaCh0aGlzLndyaXRlTmV3bGluZSgpLHRoaXMud3JpdGVJbmRlbnQoKSwKIl0iKTtyZXR1cm4gYy5qb2luKCIiKX0sc3RyaW5nOmZ1bmN0aW9uKGEpe3ZhciBiPXsiXGIiOiJcXGIiLCJcdCI6IlxcdCIsIlxuIjoiXFxuIiwiXGYiOiJcXGYiLCJcciI6IlxcciIsJyInOidcXCInLCJcXCI6IlxcXFwifTtyZXR1cm4vWyJcXFx4MDAtXHgxZl0vLnRlc3QoYSk/JyInK2EucmVwbGFjZSgvKFtceDAwLVx4MWZcXCJdKS9nLGZ1bmN0aW9uKGEsZCl7dmFyIGU9YltkXTtpZihlKXJldHVybiBlO2U9ZC5jaGFyQ29kZUF0KCk7cmV0dXJuIlxcdTAwIitNYXRoLmZsb29yKGUvMTYpLnRvU3RyaW5nKDE2KSsoZSUxNikudG9TdHJpbmcoMTYpfSkrJyInOiciJythKyciJ30sbnVtYmVyOmZ1bmN0aW9uKGEpe3JldHVybiBpc0Zpbml0ZShhKT9TdHJpbmcoYSk6Im51bGwifSwiYm9vbGVhbiI6ZnVuY3Rpb24oYSl7cmV0dXJuIFN0cmluZyhhKX0sZGF0ZTpmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEpe3JldHVybiAxMD5hPyIwIithOmF9cmV0dXJuJyInK2EuZ2V0RnVsbFllYXIoKSsKIi0iK2IoYS5nZXRNb250aCgpKzEpKyItIitiKGEuZ2V0RGF0ZSgpKSsiVCIrYihhLmdldEhvdXJzKCkpKyI6IitiKGEuZ2V0TWludXRlcygpKSsiOiIrYihhLmdldFNlY29uZHMoKSkrJyInfX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Gb3JtYXQuSlNPTiJ9KTtPcGVuTGF5ZXJzLkZvcm1hdC5HZW9KU09OPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Gb3JtYXQuSlNPTix7aWdub3JlRXh0cmFEaW1zOiExLHJlYWQ6ZnVuY3Rpb24oYSxiLGMpe2I9Yj9iOiJGZWF0dXJlQ29sbGVjdGlvbiI7dmFyIGQ9bnVsbCxlPW51bGwsZT0ic3RyaW5nIj09dHlwZW9mIGE/T3BlbkxheWVycy5Gb3JtYXQuSlNPTi5wcm90b3R5cGUucmVhZC5hcHBseSh0aGlzLFthLGNdKTphO2lmKCFlKU9wZW5MYXllcnMuQ29uc29sZS5lcnJvcigiQmFkIEpTT046ICIrYSk7ZWxzZSBpZigic3RyaW5nIiE9dHlwZW9mIGUudHlwZSlPcGVuTGF5ZXJzLkNvbnNvbGUuZXJyb3IoIkJhZCBHZW9KU09OIC0gbm8gdHlwZTogIithKTtlbHNlIGlmKHRoaXMuaXNWYWxpZFR5cGUoZSxiKSlzd2l0Y2goYil7Y2FzZSAiR2VvbWV0cnkiOnRyeXtkPXRoaXMucGFyc2VHZW9tZXRyeShlKX1jYXRjaChmKXtPcGVuTGF5ZXJzLkNvbnNvbGUuZXJyb3IoZil9YnJlYWs7Y2FzZSAiRmVhdHVyZSI6dHJ5e2Q9CnRoaXMucGFyc2VGZWF0dXJlKGUpLGQudHlwZT0iRmVhdHVyZSJ9Y2F0Y2goZyl7T3BlbkxheWVycy5Db25zb2xlLmVycm9yKGcpfWJyZWFrO2Nhc2UgIkZlYXR1cmVDb2xsZWN0aW9uIjpzd2l0Y2goZD1bXSxlLnR5cGUpe2Nhc2UgIkZlYXR1cmUiOnRyeXtkLnB1c2godGhpcy5wYXJzZUZlYXR1cmUoZSkpfWNhdGNoKGgpe2Q9bnVsbCxPcGVuTGF5ZXJzLkNvbnNvbGUuZXJyb3IoaCl9YnJlYWs7Y2FzZSAiRmVhdHVyZUNvbGxlY3Rpb24iOmE9MDtmb3IoYj1lLmZlYXR1cmVzLmxlbmd0aDthPGI7KythKXRyeXtkLnB1c2godGhpcy5wYXJzZUZlYXR1cmUoZS5mZWF0dXJlc1thXSkpfWNhdGNoKGspe2Q9bnVsbCxPcGVuTGF5ZXJzLkNvbnNvbGUuZXJyb3Ioayl9YnJlYWs7ZGVmYXVsdDp0cnl7dmFyIGw9dGhpcy5wYXJzZUdlb21ldHJ5KGUpO2QucHVzaChuZXcgT3BlbkxheWVycy5GZWF0dXJlLlZlY3RvcihsKSl9Y2F0Y2gobSl7ZD1udWxsLE9wZW5MYXllcnMuQ29uc29sZS5lcnJvcihtKX19fXJldHVybiBkfSwKaXNWYWxpZFR5cGU6ZnVuY3Rpb24oYSxiKXt2YXIgYz0hMTtzd2l0Y2goYil7Y2FzZSAiR2VvbWV0cnkiOi0xPT1PcGVuTGF5ZXJzLlV0aWwuaW5kZXhPZigiUG9pbnQgTXVsdGlQb2ludCBMaW5lU3RyaW5nIE11bHRpTGluZVN0cmluZyBQb2x5Z29uIE11bHRpUG9seWdvbiBCb3ggR2VvbWV0cnlDb2xsZWN0aW9uIi5zcGxpdCgiICIpLGEudHlwZSk/T3BlbkxheWVycy5Db25zb2xlLmVycm9yKCJVbnN1cHBvcnRlZCBnZW9tZXRyeSB0eXBlOiAiK2EudHlwZSk6Yz0hMDticmVhaztjYXNlICJGZWF0dXJlQ29sbGVjdGlvbiI6Yz0hMDticmVhaztkZWZhdWx0OmEudHlwZT09Yj9jPSEwOk9wZW5MYXllcnMuQ29uc29sZS5lcnJvcigiQ2Fubm90IGNvbnZlcnQgdHlwZXMgZnJvbSAiK2EudHlwZSsiIHRvICIrYil9cmV0dXJuIGN9LHBhcnNlRmVhdHVyZTpmdW5jdGlvbihhKXt2YXIgYixjLGQ7Yz1hLnByb3BlcnRpZXM/YS5wcm9wZXJ0aWVzOnt9O2Q9YS5nZW9tZXRyeSYmYS5nZW9tZXRyeS5iYm94fHwKYS5iYm94O3RyeXtiPXRoaXMucGFyc2VHZW9tZXRyeShhLmdlb21ldHJ5KX1jYXRjaChlKXt0aHJvdyBlO31iPW5ldyBPcGVuTGF5ZXJzLkZlYXR1cmUuVmVjdG9yKGIsYyk7ZCYmKGIuYm91bmRzPU9wZW5MYXllcnMuQm91bmRzLmZyb21BcnJheShkKSk7YS5pZCYmKGIuZmlkPWEuaWQpO3JldHVybiBifSxwYXJzZUdlb21ldHJ5OmZ1bmN0aW9uKGEpe2lmKG51bGw9PWEpcmV0dXJuIG51bGw7dmFyIGIsYz0hMTtpZigiR2VvbWV0cnlDb2xsZWN0aW9uIj09YS50eXBlKXtpZighT3BlbkxheWVycy5VdGlsLmlzQXJyYXkoYS5nZW9tZXRyaWVzKSl0aHJvdyJHZW9tZXRyeUNvbGxlY3Rpb24gbXVzdCBoYXZlIGdlb21ldHJpZXMgYXJyYXk6ICIrYTtiPWEuZ2VvbWV0cmllcy5sZW5ndGg7Zm9yKHZhciBjPUFycmF5KGIpLGQ9MDtkPGI7KytkKWNbZF09dGhpcy5wYXJzZUdlb21ldHJ5LmFwcGx5KHRoaXMsW2EuZ2VvbWV0cmllc1tkXV0pO2I9bmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuQ29sbGVjdGlvbihjKTsKYz0hMH1lbHNle2lmKCFPcGVuTGF5ZXJzLlV0aWwuaXNBcnJheShhLmNvb3JkaW5hdGVzKSl0aHJvdyJHZW9tZXRyeSBtdXN0IGhhdmUgY29vcmRpbmF0ZXMgYXJyYXk6ICIrYTtpZighdGhpcy5wYXJzZUNvb3Jkc1thLnR5cGUudG9Mb3dlckNhc2UoKV0pdGhyb3ciVW5zdXBwb3J0ZWQgZ2VvbWV0cnkgdHlwZTogIithLnR5cGU7dHJ5e2I9dGhpcy5wYXJzZUNvb3Jkc1thLnR5cGUudG9Mb3dlckNhc2UoKV0uYXBwbHkodGhpcyxbYS5jb29yZGluYXRlc10pfWNhdGNoKGUpe3Rocm93IGU7fX10aGlzLmludGVybmFsUHJvamVjdGlvbiYmKHRoaXMuZXh0ZXJuYWxQcm9qZWN0aW9uJiYhYykmJmIudHJhbnNmb3JtKHRoaXMuZXh0ZXJuYWxQcm9qZWN0aW9uLHRoaXMuaW50ZXJuYWxQcm9qZWN0aW9uKTtyZXR1cm4gYn0scGFyc2VDb29yZHM6e3BvaW50OmZ1bmN0aW9uKGEpe2lmKCExPT10aGlzLmlnbm9yZUV4dHJhRGltcyYmMiE9YS5sZW5ndGgpdGhyb3ciT25seSAyRCBwb2ludHMgYXJlIHN1cHBvcnRlZDogIisKYTtyZXR1cm4gbmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoYVswXSxhWzFdKX0sbXVsdGlwb2ludDpmdW5jdGlvbihhKXtmb3IodmFyIGI9W10sYz1udWxsLGQ9MCxlPWEubGVuZ3RoO2Q8ZTsrK2Qpe3RyeXtjPXRoaXMucGFyc2VDb29yZHMucG9pbnQuYXBwbHkodGhpcyxbYVtkXV0pfWNhdGNoKGYpe3Rocm93IGY7fWIucHVzaChjKX1yZXR1cm4gbmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuTXVsdGlQb2ludChiKX0sbGluZXN0cmluZzpmdW5jdGlvbihhKXtmb3IodmFyIGI9W10sYz1udWxsLGQ9MCxlPWEubGVuZ3RoO2Q8ZTsrK2Qpe3RyeXtjPXRoaXMucGFyc2VDb29yZHMucG9pbnQuYXBwbHkodGhpcyxbYVtkXV0pfWNhdGNoKGYpe3Rocm93IGY7fWIucHVzaChjKX1yZXR1cm4gbmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuTGluZVN0cmluZyhiKX0sbXVsdGlsaW5lc3RyaW5nOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1bXSxjPW51bGwsZD0wLGU9YS5sZW5ndGg7ZDxlOysrZCl7dHJ5e2M9CnRoaXMucGFyc2VDb29yZHMubGluZXN0cmluZy5hcHBseSh0aGlzLFthW2RdXSl9Y2F0Y2goZil7dGhyb3cgZjt9Yi5wdXNoKGMpfXJldHVybiBuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5NdWx0aUxpbmVTdHJpbmcoYil9LHBvbHlnb246ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPVtdLGMsZCxlPTAsZj1hLmxlbmd0aDtlPGY7KytlKXt0cnl7ZD10aGlzLnBhcnNlQ29vcmRzLmxpbmVzdHJpbmcuYXBwbHkodGhpcyxbYVtlXV0pfWNhdGNoKGcpe3Rocm93IGc7fWM9bmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuTGluZWFyUmluZyhkLmNvbXBvbmVudHMpO2IucHVzaChjKX1yZXR1cm4gbmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9seWdvbihiKX0sbXVsdGlwb2x5Z29uOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1bXSxjPW51bGwsZD0wLGU9YS5sZW5ndGg7ZDxlOysrZCl7dHJ5e2M9dGhpcy5wYXJzZUNvb3Jkcy5wb2x5Z29uLmFwcGx5KHRoaXMsW2FbZF1dKX1jYXRjaChmKXt0aHJvdyBmO31iLnB1c2goYyl9cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5Lk11bHRpUG9seWdvbihiKX0sCmJveDpmdW5jdGlvbihhKXtpZigyIT1hLmxlbmd0aCl0aHJvdyJHZW9KU09OIGJveCBjb29yZGluYXRlcyBtdXN0IGhhdmUgMiBlbGVtZW50cyI7cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvbHlnb24oW25ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LkxpbmVhclJpbmcoW25ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KGFbMF1bMF0sYVswXVsxXSksbmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoYVsxXVswXSxhWzBdWzFdKSxuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludChhWzFdWzBdLGFbMV1bMV0pLG5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KGFbMF1bMF0sYVsxXVsxXSksbmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoYVswXVswXSxhWzBdWzFdKV0pXSl9fSx3cml0ZTpmdW5jdGlvbihhLGIpe3ZhciBjPXt0eXBlOm51bGx9O2lmKE9wZW5MYXllcnMuVXRpbC5pc0FycmF5KGEpKXtjLnR5cGU9IkZlYXR1cmVDb2xsZWN0aW9uIjt2YXIgZD0KYS5sZW5ndGg7Yy5mZWF0dXJlcz1BcnJheShkKTtmb3IodmFyIGU9MDtlPGQ7KytlKXt2YXIgZj1hW2VdO2lmKCFmIGluc3RhbmNlb2YgT3BlbkxheWVycy5GZWF0dXJlLlZlY3Rvcil0aHJvdyJGZWF0dXJlQ29sbGVjdGlvbiBvbmx5IHN1cHBvcnRzIGNvbGxlY3Rpb25zIG9mIGZlYXR1cmVzOiAiK2Y7Yy5mZWF0dXJlc1tlXT10aGlzLmV4dHJhY3QuZmVhdHVyZS5hcHBseSh0aGlzLFtmXSl9fWVsc2UgMD09YS5DTEFTU19OQU1FLmluZGV4T2YoIk9wZW5MYXllcnMuR2VvbWV0cnkiKT9jPXRoaXMuZXh0cmFjdC5nZW9tZXRyeS5hcHBseSh0aGlzLFthXSk6YSBpbnN0YW5jZW9mIE9wZW5MYXllcnMuRmVhdHVyZS5WZWN0b3ImJihjPXRoaXMuZXh0cmFjdC5mZWF0dXJlLmFwcGx5KHRoaXMsW2FdKSxhLmxheWVyJiZhLmxheWVyLnByb2plY3Rpb24mJihjLmNycz10aGlzLmNyZWF0ZUNSU09iamVjdChhKSkpO3JldHVybiBPcGVuTGF5ZXJzLkZvcm1hdC5KU09OLnByb3RvdHlwZS53cml0ZS5hcHBseSh0aGlzLApbYyxiXSl9LGNyZWF0ZUNSU09iamVjdDpmdW5jdGlvbihhKXthPWEubGF5ZXIucHJvamVjdGlvbi50b1N0cmluZygpO3ZhciBiPXt9O2EubWF0Y2goL2Vwc2c6L2kpJiYoYT1wYXJzZUludChhLnN1YnN0cmluZyhhLmluZGV4T2YoIjoiKSsxKSksYj00MzI2PT1hP3t0eXBlOiJuYW1lIixwcm9wZXJ0aWVzOntuYW1lOiJ1cm46b2djOmRlZjpjcnM6T0dDOjEuMzpDUlM4NCJ9fTp7dHlwZToibmFtZSIscHJvcGVydGllczp7bmFtZToiRVBTRzoiK2F9fSk7cmV0dXJuIGJ9LGV4dHJhY3Q6e2ZlYXR1cmU6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5leHRyYWN0Lmdlb21ldHJ5LmFwcGx5KHRoaXMsW2EuZ2VvbWV0cnldKSxiPXt0eXBlOiJGZWF0dXJlIixwcm9wZXJ0aWVzOmEuYXR0cmlidXRlcyxnZW9tZXRyeTpifTtudWxsIT1hLmZpZCYmKGIuaWQ9YS5maWQpO3JldHVybiBifSxnZW9tZXRyeTpmdW5jdGlvbihhKXtpZihudWxsPT1hKXJldHVybiBudWxsO3RoaXMuaW50ZXJuYWxQcm9qZWN0aW9uJiYKdGhpcy5leHRlcm5hbFByb2plY3Rpb24mJihhPWEuY2xvbmUoKSxhLnRyYW5zZm9ybSh0aGlzLmludGVybmFsUHJvamVjdGlvbix0aGlzLmV4dGVybmFsUHJvamVjdGlvbikpO3ZhciBiPWEuQ0xBU1NfTkFNRS5zcGxpdCgiLiIpWzJdO2E9dGhpcy5leHRyYWN0W2IudG9Mb3dlckNhc2UoKV0uYXBwbHkodGhpcyxbYV0pO3JldHVybiJDb2xsZWN0aW9uIj09Yj97dHlwZToiR2VvbWV0cnlDb2xsZWN0aW9uIixnZW9tZXRyaWVzOmF9Ont0eXBlOmIsY29vcmRpbmF0ZXM6YX19LHBvaW50OmZ1bmN0aW9uKGEpe3JldHVyblthLngsYS55XX0sbXVsdGlwb2ludDpmdW5jdGlvbihhKXtmb3IodmFyIGI9W10sYz0wLGQ9YS5jb21wb25lbnRzLmxlbmd0aDtjPGQ7KytjKWIucHVzaCh0aGlzLmV4dHJhY3QucG9pbnQuYXBwbHkodGhpcyxbYS5jb21wb25lbnRzW2NdXSkpO3JldHVybiBifSxsaW5lc3RyaW5nOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1bXSxjPTAsZD1hLmNvbXBvbmVudHMubGVuZ3RoO2M8CmQ7KytjKWIucHVzaCh0aGlzLmV4dHJhY3QucG9pbnQuYXBwbHkodGhpcyxbYS5jb21wb25lbnRzW2NdXSkpO3JldHVybiBifSxtdWx0aWxpbmVzdHJpbmc6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPVtdLGM9MCxkPWEuY29tcG9uZW50cy5sZW5ndGg7YzxkOysrYyliLnB1c2godGhpcy5leHRyYWN0LmxpbmVzdHJpbmcuYXBwbHkodGhpcyxbYS5jb21wb25lbnRzW2NdXSkpO3JldHVybiBifSxwb2x5Z29uOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1bXSxjPTAsZD1hLmNvbXBvbmVudHMubGVuZ3RoO2M8ZDsrK2MpYi5wdXNoKHRoaXMuZXh0cmFjdC5saW5lc3RyaW5nLmFwcGx5KHRoaXMsW2EuY29tcG9uZW50c1tjXV0pKTtyZXR1cm4gYn0sbXVsdGlwb2x5Z29uOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1bXSxjPTAsZD1hLmNvbXBvbmVudHMubGVuZ3RoO2M8ZDsrK2MpYi5wdXNoKHRoaXMuZXh0cmFjdC5wb2x5Z29uLmFwcGx5KHRoaXMsW2EuY29tcG9uZW50c1tjXV0pKTtyZXR1cm4gYn0sY29sbGVjdGlvbjpmdW5jdGlvbihhKXtmb3IodmFyIGI9CmEuY29tcG9uZW50cy5sZW5ndGgsYz1BcnJheShiKSxkPTA7ZDxiOysrZCljW2RdPXRoaXMuZXh0cmFjdC5nZW9tZXRyeS5hcHBseSh0aGlzLFthLmNvbXBvbmVudHNbZF1dKTtyZXR1cm4gY319LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuRm9ybWF0Lkdlb0pTT04ifSk7T3BlbkxheWVycy5Qcm90b2NvbC5TY3JpcHQ9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLlByb3RvY29sLHt1cmw6bnVsbCxwYXJhbXM6bnVsbCxjYWxsYmFjazpudWxsLGNhbGxiYWNrVGVtcGxhdGU6Ik9wZW5MYXllcnMuUHJvdG9jb2wuU2NyaXB0LnJlZ2lzdHJ5LiR7aWR9IixjYWxsYmFja0tleToiY2FsbGJhY2siLGNhbGxiYWNrUHJlZml4OiIiLHNjb3BlOm51bGwsZm9ybWF0Om51bGwscGVuZGluZ1JlcXVlc3RzOm51bGwsc3JzSW5CQk9YOiExLGluaXRpYWxpemU6ZnVuY3Rpb24oYSl7YT1hfHx7fTt0aGlzLnBhcmFtcz17fTt0aGlzLnBlbmRpbmdSZXF1ZXN0cz17fTtPcGVuTGF5ZXJzLlByb3RvY29sLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLmZvcm1hdHx8KHRoaXMuZm9ybWF0PW5ldyBPcGVuTGF5ZXJzLkZvcm1hdC5HZW9KU09OKTtpZighdGhpcy5maWx0ZXJUb1BhcmFtcyYmT3BlbkxheWVycy5Gb3JtYXQuUXVlcnlTdHJpbmdGaWx0ZXIpe3ZhciBiPQpuZXcgT3BlbkxheWVycy5Gb3JtYXQuUXVlcnlTdHJpbmdGaWx0ZXIoe3Nyc0luQkJPWDp0aGlzLnNyc0luQkJPWH0pO3RoaXMuZmlsdGVyVG9QYXJhbXM9ZnVuY3Rpb24oYSxkKXtyZXR1cm4gYi53cml0ZShhLGQpfX19LHJlYWQ6ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5Qcm90b2NvbC5wcm90b3R5cGUucmVhZC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7YT1PcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyhhLHRoaXMub3B0aW9ucyk7YS5wYXJhbXM9T3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoYS5wYXJhbXMsdGhpcy5vcHRpb25zLnBhcmFtcyk7YS5maWx0ZXImJnRoaXMuZmlsdGVyVG9QYXJhbXMmJihhLnBhcmFtcz10aGlzLmZpbHRlclRvUGFyYW1zKGEuZmlsdGVyLGEucGFyYW1zKSk7dmFyIGI9bmV3IE9wZW5MYXllcnMuUHJvdG9jb2wuUmVzcG9uc2Uoe3JlcXVlc3RUeXBlOiJyZWFkIn0pLGM9dGhpcy5jcmVhdGVSZXF1ZXN0KGEudXJsLGEucGFyYW1zLE9wZW5MYXllcnMuRnVuY3Rpb24uYmluZChmdW5jdGlvbihjKXtiLmRhdGE9CmM7dGhpcy5oYW5kbGVSZWFkKGIsYSl9LHRoaXMpKTtiLnByaXY9YztyZXR1cm4gYn0sY3JlYXRlUmVxdWVzdDpmdW5jdGlvbihhLGIsYyl7Yz1PcGVuTGF5ZXJzLlByb3RvY29sLlNjcmlwdC5yZWdpc3RlcihjKTt2YXIgZD1PcGVuTGF5ZXJzLlN0cmluZy5mb3JtYXQodGhpcy5jYWxsYmFja1RlbXBsYXRlLHtpZDpjfSk7Yj1PcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHt9LGIpO2JbdGhpcy5jYWxsYmFja0tleV09dGhpcy5jYWxsYmFja1ByZWZpeCtkO2E9T3BlbkxheWVycy5VdGlsLnVybEFwcGVuZChhLE9wZW5MYXllcnMuVXRpbC5nZXRQYXJhbWV0ZXJTdHJpbmcoYikpO2I9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic2NyaXB0Iik7Yi50eXBlPSJ0ZXh0L2phdmFzY3JpcHQiO2Iuc3JjPWE7Yi5pZD0iT3BlbkxheWVyc19Qcm90b2NvbF9TY3JpcHRfIitjO3RoaXMucGVuZGluZ1JlcXVlc3RzW2IuaWRdPWI7ZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImhlYWQiKVswXS5hcHBlbmRDaGlsZChiKTsKcmV0dXJuIGJ9LGRlc3Ryb3lSZXF1ZXN0OmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuUHJvdG9jb2wuU2NyaXB0LnVucmVnaXN0ZXIoYS5pZC5zcGxpdCgiXyIpLnBvcCgpKTtkZWxldGUgdGhpcy5wZW5kaW5nUmVxdWVzdHNbYS5pZF07YS5wYXJlbnROb2RlJiZhLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYSl9LGhhbmRsZVJlYWQ6ZnVuY3Rpb24oYSxiKXt0aGlzLmhhbmRsZVJlc3BvbnNlKGEsYil9LGhhbmRsZVJlc3BvbnNlOmZ1bmN0aW9uKGEsYil7Yi5jYWxsYmFjayYmKGEuZGF0YT8oYS5mZWF0dXJlcz10aGlzLnBhcnNlRmVhdHVyZXMoYS5kYXRhKSxhLmNvZGU9T3BlbkxheWVycy5Qcm90b2NvbC5SZXNwb25zZS5TVUNDRVNTKTphLmNvZGU9T3BlbkxheWVycy5Qcm90b2NvbC5SZXNwb25zZS5GQUlMVVJFLHRoaXMuZGVzdHJveVJlcXVlc3QoYS5wcml2KSxiLmNhbGxiYWNrLmNhbGwoYi5zY29wZSxhKSl9LHBhcnNlRmVhdHVyZXM6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZm9ybWF0LnJlYWQoYSl9LAphYm9ydDpmdW5jdGlvbihhKXtpZihhKXRoaXMuZGVzdHJveVJlcXVlc3QoYS5wcml2KTtlbHNlIGZvcih2YXIgYiBpbiB0aGlzLnBlbmRpbmdSZXF1ZXN0cyl0aGlzLmRlc3Ryb3lSZXF1ZXN0KHRoaXMucGVuZGluZ1JlcXVlc3RzW2JdKX0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuYWJvcnQoKTtkZWxldGUgdGhpcy5wYXJhbXM7ZGVsZXRlIHRoaXMuZm9ybWF0O09wZW5MYXllcnMuUHJvdG9jb2wucHJvdG90eXBlLmRlc3Ryb3kuYXBwbHkodGhpcyl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuUHJvdG9jb2wuU2NyaXB0In0pOyhmdW5jdGlvbigpe3ZhciBhPU9wZW5MYXllcnMuUHJvdG9jb2wuU2NyaXB0LGI9MDthLnJlZ2lzdHJ5PXt9O2EucmVnaXN0ZXI9ZnVuY3Rpb24oYyl7dmFyIGQ9ImMiKyArK2I7YS5yZWdpc3RyeVtkXT1mdW5jdGlvbigpe2MuYXBwbHkodGhpcyxhcmd1bWVudHMpfTtyZXR1cm4gZH07YS51bnJlZ2lzdGVyPWZ1bmN0aW9uKGIpe2RlbGV0ZSBhLnJlZ2lzdHJ5W2JdfX0pKCk7T3BlbkxheWVycy5Gb3JtYXQuRW5jb2RlZFBvbHlsaW5lPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Gb3JtYXQse2dlb21ldHJ5VHlwZToibGluZXN0cmluZyIsaW5pdGlhbGl6ZTpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLkZvcm1hdC5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLFthXSl9LHJlYWQ6ZnVuY3Rpb24oYSl7dmFyIGI7aWYoImxpbmVzdHJpbmciPT10aGlzLmdlb21ldHJ5VHlwZSliPU9wZW5MYXllcnMuR2VvbWV0cnkuTGluZVN0cmluZztlbHNlIGlmKCJsaW5lYXJyaW5nIj09dGhpcy5nZW9tZXRyeVR5cGUpYj1PcGVuTGF5ZXJzLkdlb21ldHJ5LkxpbmVhclJpbmc7ZWxzZSBpZigibXVsdGlwb2ludCI9PXRoaXMuZ2VvbWV0cnlUeXBlKWI9T3BlbkxheWVycy5HZW9tZXRyeS5NdWx0aVBvaW50O2Vsc2UgaWYoInBvaW50IiE9dGhpcy5nZW9tZXRyeVR5cGUmJiJwb2x5Z29uIiE9dGhpcy5nZW9tZXRyeVR5cGUpcmV0dXJuIG51bGw7YT10aGlzLmRlY29kZURlbHRhcyhhLAoyKTtmb3IodmFyIGM9YS5sZW5ndGgsZD1bXSxlPTA7ZSsxPGM7KXt2YXIgZj1hW2UrK10sZz1hW2UrK107ZC5wdXNoKG5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KGcsZikpfXJldHVybiJwb2ludCI9PXRoaXMuZ2VvbWV0cnlUeXBlP25ldyBPcGVuTGF5ZXJzLkZlYXR1cmUuVmVjdG9yKGRbMF0pOiJwb2x5Z29uIj09dGhpcy5nZW9tZXRyeVR5cGU/bmV3IE9wZW5MYXllcnMuRmVhdHVyZS5WZWN0b3IobmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9seWdvbihbbmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuTGluZWFyUmluZyhkKV0pKTpuZXcgT3BlbkxheWVycy5GZWF0dXJlLlZlY3RvcihuZXcgYihkKSl9LGRlY29kZTpmdW5jdGlvbihhLGIsYyl7YT10aGlzLmRlY29kZURlbHRhcyhhLGIsY3x8MUU1KTtjPWEubGVuZ3RoO2Zvcih2YXIgZD1bXSxlPTA7ZSsoYi0xKTxjOyl7Zm9yKHZhciBmPVtdLGc9MDtnPGI7KytnKWYucHVzaChhW2UrK10pO2QucHVzaChmKX1yZXR1cm4gZH0sCndyaXRlOmZ1bmN0aW9uKGEpe2E9KGEuY29uc3RydWN0b3I9PUFycmF5P2FbMF06YSkuZ2VvbWV0cnk7dmFyIGI9YS5DTEFTU19OQU1FLnNwbGl0KCIuIilbMl0udG9Mb3dlckNhc2UoKTtpZigicG9pbnQiPT1iKWE9QXJyYXkoYSk7ZWxzZSBpZigibGluZXN0cmluZyI9PWJ8fCJsaW5lYXJyaW5nIj09Ynx8Im11bHRpcG9pbnQiPT1iKWE9YS5jb21wb25lbnRzO2Vsc2UgaWYoInBvbHlnb24iPT1iKWE9YS5jb21wb25lbnRzWzBdLmNvbXBvbmVudHM7ZWxzZSByZXR1cm4gbnVsbDtmb3IodmFyIGI9W10sYz1hLmxlbmd0aCxkPTA7ZDxjOysrZCl7dmFyIGU9YVtkXTtiLnB1c2goZS55KTtiLnB1c2goZS54KX1yZXR1cm4gdGhpcy5lbmNvZGVEZWx0YXMoYiwyKX0sZW5jb2RlOmZ1bmN0aW9uKGEsYixjKXtjPWN8fDFFNTtmb3IodmFyIGQ9W10sZT1hLmxlbmd0aCxmPTA7ZjxlOysrZilmb3IodmFyIGc9YVtmXSxoPTA7aDxiOysraClkLnB1c2goZ1toXSk7cmV0dXJuIHRoaXMuZW5jb2RlRGVsdGFzKGQsCmIsYyl9LGVuY29kZURlbHRhczpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZT1BcnJheShiKTtmb3IoZD0wO2Q8YjsrK2QpZVtkXT0wO2Zvcih2YXIgZj1hLmxlbmd0aCxnPTA7ZzxmOylmb3IoZD0wO2Q8YjsrK2QsKytnKXt2YXIgaD1hW2ddLGs9aC1lW2RdO2VbZF09aDthW2ddPWt9cmV0dXJuIHRoaXMuZW5jb2RlRmxvYXRzKGEsY3x8MUU1KX0sZGVjb2RlRGVsdGFzOmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlPUFycmF5KGIpO2ZvcihkPTA7ZDxiOysrZCllW2RdPTA7YT10aGlzLmRlY29kZUZsb2F0cyhhLGN8fDFFNSk7Yz1hLmxlbmd0aDtmb3IodmFyIGY9MDtmPGM7KWZvcihkPTA7ZDxiOysrZCwrK2YpZVtkXSs9YVtmXSxhW2ZdPWVbZF07cmV0dXJuIGF9LGVuY29kZUZsb2F0czpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz1ifHwxRTUsZD1hLmxlbmd0aCxlPTA7ZTxkOysrZSlhW2VdPU1hdGgucm91bmQoYVtlXSpjKTtyZXR1cm4gdGhpcy5lbmNvZGVTaWduZWRJbnRlZ2VycyhhKX0sZGVjb2RlRmxvYXRzOmZ1bmN0aW9uKGEsCmIpe2Zvcih2YXIgYz1ifHwxRTUsZD10aGlzLmRlY29kZVNpZ25lZEludGVnZXJzKGEpLGU9ZC5sZW5ndGgsZj0wO2Y8ZTsrK2YpZFtmXS89YztyZXR1cm4gZH0sZW5jb2RlU2lnbmVkSW50ZWdlcnM6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPWEubGVuZ3RoLGM9MDtjPGI7KytjKXt2YXIgZD1hW2NdLGU9ZDw8MTswPmQmJihlPX5lKTthW2NdPWV9cmV0dXJuIHRoaXMuZW5jb2RlVW5zaWduZWRJbnRlZ2VycyhhKX0sZGVjb2RlU2lnbmVkSW50ZWdlcnM6ZnVuY3Rpb24oYSl7YT10aGlzLmRlY29kZVVuc2lnbmVkSW50ZWdlcnMoYSk7Zm9yKHZhciBiPWEubGVuZ3RoLGM9MDtjPGI7KytjKXt2YXIgZD1hW2NdO2FbY109ZCYxP34oZD4+MSk6ZD4+MX1yZXR1cm4gYX0sZW5jb2RlVW5zaWduZWRJbnRlZ2VyczpmdW5jdGlvbihhKXtmb3IodmFyIGI9IiIsYz1hLmxlbmd0aCxkPTA7ZDxjOysrZCliKz10aGlzLmVuY29kZVVuc2lnbmVkSW50ZWdlcihhW2RdKTtyZXR1cm4gYn0sZGVjb2RlVW5zaWduZWRJbnRlZ2VyczpmdW5jdGlvbihhKXtmb3IodmFyIGI9CltdLGM9MCxkPTAsZT1hLmxlbmd0aCxmPTA7ZjxlOysrZil7dmFyIGc9YS5jaGFyQ29kZUF0KGYpLTYzLGM9Y3woZyYzMSk8PGQ7MzI+Zz8oYi5wdXNoKGMpLGQ9Yz0wKTpkKz01fXJldHVybiBifSxlbmNvZGVGbG9hdDpmdW5jdGlvbihhLGIpe2E9TWF0aC5yb3VuZChhKihifHwxRTUpKTtyZXR1cm4gdGhpcy5lbmNvZGVTaWduZWRJbnRlZ2VyKGEpfSxkZWNvZGVGbG9hdDpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLmRlY29kZVNpZ25lZEludGVnZXIoYSkvKGJ8fDFFNSl9LGVuY29kZVNpZ25lZEludGVnZXI6ZnVuY3Rpb24oYSl7dmFyIGI9YTw8MTswPmEmJihiPX5iKTtyZXR1cm4gdGhpcy5lbmNvZGVVbnNpZ25lZEludGVnZXIoYil9LGRlY29kZVNpZ25lZEludGVnZXI6ZnVuY3Rpb24oYSl7YT10aGlzLmRlY29kZVVuc2lnbmVkSW50ZWdlcihhKTtyZXR1cm4gYSYxP34oYT4+MSk6YT4+MX0sZW5jb2RlVW5zaWduZWRJbnRlZ2VyOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYixjPSIiOzMyPD0KYTspYj0oMzJ8YSYzMSkrNjMsYys9U3RyaW5nLmZyb21DaGFyQ29kZShiKSxhPj49NTtyZXR1cm4gYys9U3RyaW5nLmZyb21DaGFyQ29kZShhKzYzKX0sZGVjb2RlVW5zaWduZWRJbnRlZ2VyOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0wLGM9MCxkPWEubGVuZ3RoLGU9MDtlPGQ7KytlKXt2YXIgZj1hLmNoYXJDb2RlQXQoZSktNjMsYj1ifChmJjMxKTw8YztpZigzMj5mKWJyZWFrO2MrPTV9cmV0dXJuIGJ9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuRm9ybWF0LkVuY29kZWRQb2x5bGluZSJ9KTtPcGVuTGF5ZXJzLkNvbnRyb2wuUGFuZWw9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkNvbnRyb2wse2NvbnRyb2xzOm51bGwsYXV0b0FjdGl2YXRlOiEwLGRlZmF1bHRDb250cm9sOm51bGwsc2F2ZVN0YXRlOiExLGFsbG93RGVwcmVzczohMSxhY3RpdmVTdGF0ZTpudWxsLGluaXRpYWxpemU6ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5Db250cm9sLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsW2FdKTt0aGlzLmNvbnRyb2xzPVtdO3RoaXMuYWN0aXZlU3RhdGU9e319LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLm1hcCYmdGhpcy5tYXAuZXZlbnRzLnVucmVnaXN0ZXIoImJ1dHRvbmNsaWNrIix0aGlzLHRoaXMub25CdXR0b25DbGljayk7T3BlbkxheWVycy5Db250cm9sLnByb3RvdHlwZS5kZXN0cm95LmFwcGx5KHRoaXMsYXJndW1lbnRzKTtmb3IodmFyIGEsYj10aGlzLmNvbnRyb2xzLmxlbmd0aC0xOzA8PWI7Yi0tKWE9dGhpcy5jb250cm9sc1tiXSxhLmV2ZW50cyYmCmEuZXZlbnRzLnVuKHthY3RpdmF0ZTp0aGlzLmljb25PbixkZWFjdGl2YXRlOnRoaXMuaWNvbk9mZn0pLGEucGFuZWxfZGl2PW51bGw7dGhpcy5hY3RpdmVTdGF0ZT1udWxsfSxhY3RpdmF0ZTpmdW5jdGlvbigpe2lmKE9wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuYWN0aXZhdGUuYXBwbHkodGhpcyxhcmd1bWVudHMpKXtmb3IodmFyIGEsYj0wLGM9dGhpcy5jb250cm9scy5sZW5ndGg7YjxjO2IrKylhPXRoaXMuY29udHJvbHNbYl0sKGE9PT10aGlzLmRlZmF1bHRDb250cm9sfHx0aGlzLnNhdmVTdGF0ZSYmdGhpcy5hY3RpdmVTdGF0ZVthLmlkXSkmJmEuYWN0aXZhdGUoKTshMD09PXRoaXMuc2F2ZVN0YXRlJiYodGhpcy5kZWZhdWx0Q29udHJvbD1udWxsKTt0aGlzLnJlZHJhdygpO3JldHVybiEwfXJldHVybiExfSxkZWFjdGl2YXRlOmZ1bmN0aW9uKCl7aWYoT3BlbkxheWVycy5Db250cm9sLnByb3RvdHlwZS5kZWFjdGl2YXRlLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl7Zm9yKHZhciBhLApiPTAsYz10aGlzLmNvbnRyb2xzLmxlbmd0aDtiPGM7YisrKWE9dGhpcy5jb250cm9sc1tiXSx0aGlzLmFjdGl2ZVN0YXRlW2EuaWRdPWEuZGVhY3RpdmF0ZSgpO3RoaXMucmVkcmF3KCk7cmV0dXJuITB9cmV0dXJuITF9LGRyYXc6ZnVuY3Rpb24oKXtPcGVuTGF5ZXJzLkNvbnRyb2wucHJvdG90eXBlLmRyYXcuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMub3V0c2lkZVZpZXdwb3J0Pyh0aGlzLmV2ZW50cy5hdHRhY2hUb0VsZW1lbnQodGhpcy5kaXYpLHRoaXMuZXZlbnRzLnJlZ2lzdGVyKCJidXR0b25jbGljayIsdGhpcyx0aGlzLm9uQnV0dG9uQ2xpY2spKTp0aGlzLm1hcC5ldmVudHMucmVnaXN0ZXIoImJ1dHRvbmNsaWNrIix0aGlzLHRoaXMub25CdXR0b25DbGljayk7dGhpcy5hZGRDb250cm9sc1RvTWFwKHRoaXMuY29udHJvbHMpO3JldHVybiB0aGlzLmRpdn0scmVkcmF3OmZ1bmN0aW9uKCl7Zm9yKHZhciBhPXRoaXMuZGl2LmNoaWxkTm9kZXMubGVuZ3RoLTE7MDw9YTthLS0pdGhpcy5kaXYucmVtb3ZlQ2hpbGQodGhpcy5kaXYuY2hpbGROb2Rlc1thXSk7CnRoaXMuZGl2LmlubmVySFRNTD0iIjtpZih0aGlzLmFjdGl2ZSlmb3IodmFyIGE9MCxiPXRoaXMuY29udHJvbHMubGVuZ3RoO2E8YjthKyspdGhpcy5kaXYuYXBwZW5kQ2hpbGQodGhpcy5jb250cm9sc1thXS5wYW5lbF9kaXYpfSxhY3RpdmF0ZUNvbnRyb2w6ZnVuY3Rpb24oYSl7aWYoIXRoaXMuYWN0aXZlKXJldHVybiExO2lmKGEudHlwZT09T3BlbkxheWVycy5Db250cm9sLlRZUEVfQlVUVE9OKWEudHJpZ2dlcigpO2Vsc2UgaWYoYS50eXBlPT1PcGVuTGF5ZXJzLkNvbnRyb2wuVFlQRV9UT0dHTEUpYS5hY3RpdmU/YS5kZWFjdGl2YXRlKCk6YS5hY3RpdmF0ZSgpO2Vsc2UgaWYodGhpcy5hbGxvd0RlcHJlc3MmJmEuYWN0aXZlKWEuZGVhY3RpdmF0ZSgpO2Vsc2V7Zm9yKHZhciBiLGM9MCxkPXRoaXMuY29udHJvbHMubGVuZ3RoO2M8ZDtjKyspYj10aGlzLmNvbnRyb2xzW2NdLGI9PWF8fGIudHlwZSE9PU9wZW5MYXllcnMuQ29udHJvbC5UWVBFX1RPT0wmJm51bGwhPWIudHlwZXx8Yi5kZWFjdGl2YXRlKCk7CmEuYWN0aXZhdGUoKX19LGFkZENvbnRyb2xzOmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuVXRpbC5pc0FycmF5KGEpfHwoYT1bYV0pO3RoaXMuY29udHJvbHM9dGhpcy5jb250cm9scy5jb25jYXQoYSk7Zm9yKHZhciBiPTAsYz1hLmxlbmd0aDtiPGM7YisrKXt2YXIgZD1hW2JdLGU9dGhpcy5jcmVhdGVDb250cm9sTWFya3VwKGQpO09wZW5MYXllcnMuRWxlbWVudC5hZGRDbGFzcyhlLGQuZGlzcGxheUNsYXNzKyJJdGVtSW5hY3RpdmUiKTtPcGVuTGF5ZXJzLkVsZW1lbnQuYWRkQ2xhc3MoZSwib2xCdXR0b24iKTsiIj09ZC50aXRsZXx8ZS50aXRsZXx8KGUudGl0bGU9ZC50aXRsZSk7ZC5wYW5lbF9kaXY9ZX10aGlzLm1hcCYmKHRoaXMuYWRkQ29udHJvbHNUb01hcChhKSx0aGlzLnJlZHJhdygpKX0sY3JlYXRlQ29udHJvbE1hcmt1cDpmdW5jdGlvbihhKXtyZXR1cm4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iil9LGFkZENvbnRyb2xzVG9NYXA6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiLApjPTAsZD1hLmxlbmd0aDtjPGQ7YysrKWI9YVtjXSwhMD09PWIuYXV0b0FjdGl2YXRlPyhiLmF1dG9BY3RpdmF0ZT0hMSx0aGlzLm1hcC5hZGRDb250cm9sKGIpLGIuYXV0b0FjdGl2YXRlPSEwKToodGhpcy5tYXAuYWRkQ29udHJvbChiKSxiLmRlYWN0aXZhdGUoKSksYi5ldmVudHMub24oe2FjdGl2YXRlOnRoaXMuaWNvbk9uLGRlYWN0aXZhdGU6dGhpcy5pY29uT2ZmfSl9LGljb25PbjpmdW5jdGlvbigpe3ZhciBhPXRoaXMucGFuZWxfZGl2O2EuY2xhc3NOYW1lPWEuY2xhc3NOYW1lLnJlcGxhY2UoUmVnRXhwKCJcXGIoIit0aGlzLmRpc3BsYXlDbGFzcysiSXRlbSlJbmFjdGl2ZVxcYiIpLCIkMUFjdGl2ZSIpfSxpY29uT2ZmOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5wYW5lbF9kaXY7YS5jbGFzc05hbWU9YS5jbGFzc05hbWUucmVwbGFjZShSZWdFeHAoIlxcYigiK3RoaXMuZGlzcGxheUNsYXNzKyJJdGVtKUFjdGl2ZVxcYiIpLCIkMUluYWN0aXZlIil9LG9uQnV0dG9uQ2xpY2s6ZnVuY3Rpb24oYSl7dmFyIGI9CnRoaXMuY29udHJvbHM7YT1hLmJ1dHRvbkVsZW1lbnQ7Zm9yKHZhciBjPWIubGVuZ3RoLTE7MDw9YzstLWMpaWYoYltjXS5wYW5lbF9kaXY9PT1hKXt0aGlzLmFjdGl2YXRlQ29udHJvbChiW2NdKTticmVha319LGdldENvbnRyb2xzQnk6ZnVuY3Rpb24oYSxiKXt2YXIgYz0iZnVuY3Rpb24iPT10eXBlb2YgYi50ZXN0O3JldHVybiBPcGVuTGF5ZXJzLkFycmF5LmZpbHRlcih0aGlzLmNvbnRyb2xzLGZ1bmN0aW9uKGQpe3JldHVybiBkW2FdPT1ifHxjJiZiLnRlc3QoZFthXSl9KX0sZ2V0Q29udHJvbHNCeU5hbWU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZ2V0Q29udHJvbHNCeSgibmFtZSIsYSl9LGdldENvbnRyb2xzQnlDbGFzczpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5nZXRDb250cm9sc0J5KCJDTEFTU19OQU1FIixhKX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Db250cm9sLlBhbmVsIn0pO09wZW5MYXllcnMuQ29udHJvbC5CdXR0b249T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkNvbnRyb2wse3R5cGU6T3BlbkxheWVycy5Db250cm9sLlRZUEVfQlVUVE9OLHRyaWdnZXI6ZnVuY3Rpb24oKXt9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuQ29udHJvbC5CdXR0b24ifSk7T3BlbkxheWVycy5Db250cm9sLlpvb21Jbj1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuQ29udHJvbC5CdXR0b24se3RyaWdnZXI6ZnVuY3Rpb24oKXt0aGlzLm1hcCYmdGhpcy5tYXAuem9vbUluKCl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuQ29udHJvbC5ab29tSW4ifSk7T3BlbkxheWVycy5Db250cm9sLlpvb21PdXQ9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkNvbnRyb2wuQnV0dG9uLHt0cmlnZ2VyOmZ1bmN0aW9uKCl7dGhpcy5tYXAmJnRoaXMubWFwLnpvb21PdXQoKX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Db250cm9sLlpvb21PdXQifSk7T3BlbkxheWVycy5Db250cm9sLlpvb21Ub01heEV4dGVudD1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuQ29udHJvbC5CdXR0b24se3RyaWdnZXI6ZnVuY3Rpb24oKXt0aGlzLm1hcCYmdGhpcy5tYXAuem9vbVRvTWF4RXh0ZW50KCl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuQ29udHJvbC5ab29tVG9NYXhFeHRlbnQifSk7T3BlbkxheWVycy5Db250cm9sLlpvb21QYW5lbD1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuQ29udHJvbC5QYW5lbCx7aW5pdGlhbGl6ZTpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLkNvbnRyb2wuUGFuZWwucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxbYV0pO3RoaXMuYWRkQ29udHJvbHMoW25ldyBPcGVuTGF5ZXJzLkNvbnRyb2wuWm9vbUluLG5ldyBPcGVuTGF5ZXJzLkNvbnRyb2wuWm9vbVRvTWF4RXh0ZW50LG5ldyBPcGVuTGF5ZXJzLkNvbnRyb2wuWm9vbU91dF0pfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkNvbnRyb2wuWm9vbVBhbmVsIn0pO09wZW5MYXllcnMuTGF5ZXIuSFRUUFJlcXVlc3Q9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkxheWVyLHtVUkxfSEFTSF9GQUNUT1I6KE1hdGguc3FydCg1KS0xKS8yLHVybDpudWxsLHBhcmFtczpudWxsLHJlcHJvamVjdDohMSxpbml0aWFsaXplOmZ1bmN0aW9uKGEsYixjLGQpe09wZW5MYXllcnMuTGF5ZXIucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxbYSxkXSk7dGhpcy51cmw9Yjt0aGlzLnBhcmFtc3x8KHRoaXMucGFyYW1zPU9wZW5MYXllcnMuVXRpbC5leHRlbmQoe30sYykpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5wYXJhbXM9dGhpcy51cmw9bnVsbDtPcGVuTGF5ZXJzLkxheWVyLnByb3RvdHlwZS5kZXN0cm95LmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sY2xvbmU6ZnVuY3Rpb24oYSl7bnVsbD09YSYmKGE9bmV3IE9wZW5MYXllcnMuTGF5ZXIuSFRUUFJlcXVlc3QodGhpcy5uYW1lLHRoaXMudXJsLHRoaXMucGFyYW1zLHRoaXMuZ2V0T3B0aW9ucygpKSk7CnJldHVybiBhPU9wZW5MYXllcnMuTGF5ZXIucHJvdG90eXBlLmNsb25lLmFwcGx5KHRoaXMsW2FdKX0sc2V0VXJsOmZ1bmN0aW9uKGEpe3RoaXMudXJsPWF9LG1lcmdlTmV3UGFyYW1zOmZ1bmN0aW9uKGEpe3RoaXMucGFyYW1zPU9wZW5MYXllcnMuVXRpbC5leHRlbmQodGhpcy5wYXJhbXMsYSk7YT10aGlzLnJlZHJhdygpO251bGwhPXRoaXMubWFwJiZ0aGlzLm1hcC5ldmVudHMudHJpZ2dlckV2ZW50KCJjaGFuZ2VsYXllciIse2xheWVyOnRoaXMscHJvcGVydHk6InBhcmFtcyJ9KTtyZXR1cm4gYX0scmVkcmF3OmZ1bmN0aW9uKGEpe3JldHVybiBhP3RoaXMubWVyZ2VOZXdQYXJhbXMoe19vbFNhbHQ6TWF0aC5yYW5kb20oKX0pOk9wZW5MYXllcnMuTGF5ZXIucHJvdG90eXBlLnJlZHJhdy5hcHBseSh0aGlzLFtdKX0sc2VsZWN0VXJsOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTEsZD0wLGU9YS5sZW5ndGg7ZDxlO2QrKyljKj1hLmNoYXJDb2RlQXQoZCkqdGhpcy5VUkxfSEFTSF9GQUNUT1IsCmMtPU1hdGguZmxvb3IoYyk7cmV0dXJuIGJbTWF0aC5mbG9vcihjKmIubGVuZ3RoKV19LGdldEZ1bGxSZXF1ZXN0U3RyaW5nOmZ1bmN0aW9uKGEsYil7dmFyIGM9Ynx8dGhpcy51cmwsZD1PcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHt9LHRoaXMucGFyYW1zKSxkPU9wZW5MYXllcnMuVXRpbC5leHRlbmQoZCxhKSxlPU9wZW5MYXllcnMuVXRpbC5nZXRQYXJhbWV0ZXJTdHJpbmcoZCk7T3BlbkxheWVycy5VdGlsLmlzQXJyYXkoYykmJihjPXRoaXMuc2VsZWN0VXJsKGUsYykpO3ZhciBlPU9wZW5MYXllcnMuVXRpbC51cHBlckNhc2VPYmplY3QoT3BlbkxheWVycy5VdGlsLmdldFBhcmFtZXRlcnMoYykpLGY7Zm9yKGYgaW4gZClmLnRvVXBwZXJDYXNlKClpbiBlJiZkZWxldGUgZFtmXTtlPU9wZW5MYXllcnMuVXRpbC5nZXRQYXJhbWV0ZXJTdHJpbmcoZCk7cmV0dXJuIE9wZW5MYXllcnMuVXRpbC51cmxBcHBlbmQoYyxlKX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5MYXllci5IVFRQUmVxdWVzdCJ9KTtPcGVuTGF5ZXJzLlRpbGU9T3BlbkxheWVycy5DbGFzcyh7ZXZlbnRzOm51bGwsZXZlbnRMaXN0ZW5lcnM6bnVsbCxpZDpudWxsLGxheWVyOm51bGwsdXJsOm51bGwsYm91bmRzOm51bGwsc2l6ZTpudWxsLHBvc2l0aW9uOm51bGwsaXNMb2FkaW5nOiExLGluaXRpYWxpemU6ZnVuY3Rpb24oYSxiLGMsZCxlLGYpe3RoaXMubGF5ZXI9YTt0aGlzLnBvc2l0aW9uPWIuY2xvbmUoKTt0aGlzLnNldEJvdW5kcyhjKTt0aGlzLnVybD1kO2UmJih0aGlzLnNpemU9ZS5jbG9uZSgpKTt0aGlzLmlkPU9wZW5MYXllcnMuVXRpbC5jcmVhdGVVbmlxdWVJRCgiVGlsZV8iKTtPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHRoaXMsZik7dGhpcy5ldmVudHM9bmV3IE9wZW5MYXllcnMuRXZlbnRzKHRoaXMpO2lmKHRoaXMuZXZlbnRMaXN0ZW5lcnMgaW5zdGFuY2VvZiBPYmplY3QpdGhpcy5ldmVudHMub24odGhpcy5ldmVudExpc3RlbmVycyl9LHVubG9hZDpmdW5jdGlvbigpe3RoaXMuaXNMb2FkaW5nJiYodGhpcy5pc0xvYWRpbmc9CiExLHRoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgidW5sb2FkIikpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5wb3NpdGlvbj10aGlzLnNpemU9dGhpcy5ib3VuZHM9dGhpcy5sYXllcj1udWxsO3RoaXMuZXZlbnRMaXN0ZW5lcnMmJnRoaXMuZXZlbnRzLnVuKHRoaXMuZXZlbnRMaXN0ZW5lcnMpO3RoaXMuZXZlbnRzLmRlc3Ryb3koKTt0aGlzLmV2ZW50cz10aGlzLmV2ZW50TGlzdGVuZXJzPW51bGx9LGRyYXc6ZnVuY3Rpb24oYSl7YXx8dGhpcy5jbGVhcigpO3ZhciBiPXRoaXMuc2hvdWxkRHJhdygpO2ImJighYSYmITE9PT10aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoImJlZm9yZWRyYXciKSkmJihiPW51bGwpO3JldHVybiBifSxzaG91bGREcmF3OmZ1bmN0aW9uKCl7dmFyIGE9ITEsYj10aGlzLmxheWVyLm1heEV4dGVudDtpZihiKXt2YXIgYz10aGlzLmxheWVyLm1hcCxjPWMuYmFzZUxheWVyLndyYXBEYXRlTGluZSYmYy5nZXRNYXhFeHRlbnQoKTt0aGlzLmJvdW5kcy5pbnRlcnNlY3RzQm91bmRzKGIsCntpbmNsdXNpdmU6ITEsd29ybGRCb3VuZHM6Y30pJiYoYT0hMCl9cmV0dXJuIGF8fHRoaXMubGF5ZXIuZGlzcGxheU91dHNpZGVNYXhFeHRlbnR9LHNldEJvdW5kczpmdW5jdGlvbihhKXthPWEuY2xvbmUoKTtpZih0aGlzLmxheWVyLm1hcC5iYXNlTGF5ZXIud3JhcERhdGVMaW5lKXt2YXIgYj10aGlzLmxheWVyLm1hcC5nZXRNYXhFeHRlbnQoKSxjPXRoaXMubGF5ZXIubWFwLmdldFJlc29sdXRpb24oKTthPWEud3JhcERhdGVMaW5lKGIse2xlZnRUb2xlcmFuY2U6YyxyaWdodFRvbGVyYW5jZTpjfSl9dGhpcy5ib3VuZHM9YX0sbW92ZVRvOmZ1bmN0aW9uKGEsYixjKXtudWxsPT1jJiYoYz0hMCk7dGhpcy5zZXRCb3VuZHMoYSk7dGhpcy5wb3NpdGlvbj1iLmNsb25lKCk7YyYmdGhpcy5kcmF3KCl9LGNsZWFyOmZ1bmN0aW9uKGEpe30sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5UaWxlIn0pO09wZW5MYXllcnMuVGlsZS5JbWFnZT1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuVGlsZSx7dXJsOm51bGwsaW1nRGl2Om51bGwsZnJhbWU6bnVsbCxpbWFnZVJlbG9hZEF0dGVtcHRzOm51bGwsbGF5ZXJBbHBoYUhhY2s6bnVsbCxhc3luY1JlcXVlc3RJZDpudWxsLG1heEdldFVybExlbmd0aDpudWxsLGNhbnZhc0NvbnRleHQ6bnVsbCxjcm9zc09yaWdpbktleXdvcmQ6bnVsbCxpbml0aWFsaXplOmZ1bmN0aW9uKGEsYixjLGQsZSxmKXtPcGVuTGF5ZXJzLlRpbGUucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMudXJsPWQ7dGhpcy5sYXllckFscGhhSGFjaz10aGlzLmxheWVyLmFscGhhJiZPcGVuTGF5ZXJzLlV0aWwuYWxwaGFIYWNrKCk7aWYobnVsbCE9dGhpcy5tYXhHZXRVcmxMZW5ndGh8fHRoaXMubGF5ZXIuZ3V0dGVyfHx0aGlzLmxheWVyQWxwaGFIYWNrKXRoaXMuZnJhbWU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2IiksdGhpcy5mcmFtZS5zdHlsZS5wb3NpdGlvbj0KImFic29sdXRlIix0aGlzLmZyYW1lLnN0eWxlLm92ZXJmbG93PSJoaWRkZW4iO251bGwhPXRoaXMubWF4R2V0VXJsTGVuZ3RoJiZPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHRoaXMsT3BlbkxheWVycy5UaWxlLkltYWdlLklGcmFtZSl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmltZ0RpdiYmKHRoaXMuY2xlYXIoKSx0aGlzLmZyYW1lPXRoaXMuaW1nRGl2PW51bGwpO3RoaXMuYXN5bmNSZXF1ZXN0SWQ9bnVsbDtPcGVuTGF5ZXJzLlRpbGUucHJvdG90eXBlLmRlc3Ryb3kuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxkcmF3OmZ1bmN0aW9uKCl7dmFyIGE9T3BlbkxheWVycy5UaWxlLnByb3RvdHlwZS5kcmF3LmFwcGx5KHRoaXMsYXJndW1lbnRzKTthPyh0aGlzLmxheWVyIT10aGlzLmxheWVyLm1hcC5iYXNlTGF5ZXImJnRoaXMubGF5ZXIucmVwcm9qZWN0JiYodGhpcy5ib3VuZHM9dGhpcy5nZXRCb3VuZHNGcm9tQmFzZUxheWVyKHRoaXMucG9zaXRpb24pKSx0aGlzLmlzTG9hZGluZz90aGlzLl9sb2FkRXZlbnQ9CiJyZWxvYWQiOih0aGlzLmlzTG9hZGluZz0hMCx0aGlzLl9sb2FkRXZlbnQ9ImxvYWRzdGFydCIpLHRoaXMucmVuZGVyVGlsZSgpLHRoaXMucG9zaXRpb25UaWxlKCkpOiExPT09YSYmdGhpcy51bmxvYWQoKTtyZXR1cm4gYX0scmVuZGVyVGlsZTpmdW5jdGlvbigpe2lmKHRoaXMubGF5ZXIuYXN5bmMpe3ZhciBhPXRoaXMuYXN5bmNSZXF1ZXN0SWQ9KHRoaXMuYXN5bmNSZXF1ZXN0SWR8fDApKzE7dGhpcy5sYXllci5nZXRVUkxhc3luYyh0aGlzLmJvdW5kcyxmdW5jdGlvbihiKXthPT10aGlzLmFzeW5jUmVxdWVzdElkJiYodGhpcy51cmw9Yix0aGlzLmluaXRJbWFnZSgpKX0sdGhpcyl9ZWxzZSB0aGlzLnVybD10aGlzLmxheWVyLmdldFVSTCh0aGlzLmJvdW5kcyksdGhpcy5pbml0SW1hZ2UoKX0scG9zaXRpb25UaWxlOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5nZXRUaWxlKCkuc3R5bGUsYj10aGlzLmZyYW1lP3RoaXMuc2l6ZTp0aGlzLmxheWVyLmdldEltYWdlU2l6ZSh0aGlzLmJvdW5kcyksCmM9MTt0aGlzLmxheWVyIGluc3RhbmNlb2YgT3BlbkxheWVycy5MYXllci5HcmlkJiYoYz10aGlzLmxheWVyLmdldFNlcnZlclJlc29sdXRpb24oKS90aGlzLmxheWVyLm1hcC5nZXRSZXNvbHV0aW9uKCkpO2EubGVmdD10aGlzLnBvc2l0aW9uLngrInB4IjthLnRvcD10aGlzLnBvc2l0aW9uLnkrInB4IjthLndpZHRoPU1hdGgucm91bmQoYypiLncpKyJweCI7YS5oZWlnaHQ9TWF0aC5yb3VuZChjKmIuaCkrInB4In0sY2xlYXI6ZnVuY3Rpb24oKXtPcGVuTGF5ZXJzLlRpbGUucHJvdG90eXBlLmNsZWFyLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt2YXIgYT10aGlzLmltZ0RpdjtpZihhKXt2YXIgYj10aGlzLmdldFRpbGUoKTtiLnBhcmVudE5vZGU9PT10aGlzLmxheWVyLmRpdiYmdGhpcy5sYXllci5kaXYucmVtb3ZlQ2hpbGQoYik7dGhpcy5zZXRJbWdTcmMoKTshMD09PXRoaXMubGF5ZXJBbHBoYUhhY2smJihhLnN0eWxlLmZpbHRlcj0iIik7T3BlbkxheWVycy5FbGVtZW50LnJlbW92ZUNsYXNzKGEsCiJvbEltYWdlTG9hZEVycm9yIil9dGhpcy5jYW52YXNDb250ZXh0PW51bGx9LGdldEltYWdlOmZ1bmN0aW9uKCl7aWYoIXRoaXMuaW1nRGl2KXt0aGlzLmltZ0Rpdj1PcGVuTGF5ZXJzLlRpbGUuSW1hZ2UuSU1BR0UuY2xvbmVOb2RlKCExKTt2YXIgYT10aGlzLmltZ0Rpdi5zdHlsZTtpZih0aGlzLmZyYW1lKXt2YXIgYj0wLGM9MDt0aGlzLmxheWVyLmd1dHRlciYmKGI9MTAwKih0aGlzLmxheWVyLmd1dHRlci90aGlzLmxheWVyLnRpbGVTaXplLncpLGM9MTAwKih0aGlzLmxheWVyLmd1dHRlci90aGlzLmxheWVyLnRpbGVTaXplLmgpKTthLmxlZnQ9LWIrIiUiO2EudG9wPS1jKyIlIjthLndpZHRoPTIqYisxMDArIiUiO2EuaGVpZ2h0PTIqYysxMDArIiUifWEudmlzaWJpbGl0eT0iaGlkZGVuIjthLm9wYWNpdHk9MDsxPnRoaXMubGF5ZXIub3BhY2l0eSYmKGEuZmlsdGVyPSJhbHBoYShvcGFjaXR5PSIrMTAwKnRoaXMubGF5ZXIub3BhY2l0eSsiKSIpO2EucG9zaXRpb249ImFic29sdXRlIjsKdGhpcy5sYXllckFscGhhSGFjayYmKGEucGFkZGluZ1RvcD1hLmhlaWdodCxhLmhlaWdodD0iMCIsYS53aWR0aD0iMTAwJSIpO3RoaXMuZnJhbWUmJnRoaXMuZnJhbWUuYXBwZW5kQ2hpbGQodGhpcy5pbWdEaXYpfXJldHVybiB0aGlzLmltZ0Rpdn0sc2V0SW1hZ2U6ZnVuY3Rpb24oYSl7dGhpcy5pbWdEaXY9YX0saW5pdEltYWdlOmZ1bmN0aW9uKCl7aWYodGhpcy51cmx8fHRoaXMuaW1nRGl2KXt0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoImJlZm9yZWxvYWQiKTt0aGlzLmxheWVyLmRpdi5hcHBlbmRDaGlsZCh0aGlzLmdldFRpbGUoKSk7dGhpcy5ldmVudHMudHJpZ2dlckV2ZW50KHRoaXMuX2xvYWRFdmVudCk7dmFyIGE9dGhpcy5nZXRJbWFnZSgpLGI9YS5nZXRBdHRyaWJ1dGUoInNyYyIpfHwiIjt0aGlzLnVybCYmT3BlbkxheWVycy5VdGlsLmlzRXF1aXZhbGVudFVybChiLHRoaXMudXJsKT90aGlzLl9sb2FkVGltZW91dD13aW5kb3cuc2V0VGltZW91dChPcGVuTGF5ZXJzLkZ1bmN0aW9uLmJpbmQodGhpcy5vbkltYWdlTG9hZCwKdGhpcyksMCk6KHRoaXMuc3RvcExvYWRpbmcoKSx0aGlzLmNyb3NzT3JpZ2luS2V5d29yZCYmYS5yZW1vdmVBdHRyaWJ1dGUoImNyb3Nzb3JpZ2luIiksT3BlbkxheWVycy5FdmVudC5vYnNlcnZlKGEsImxvYWQiLE9wZW5MYXllcnMuRnVuY3Rpb24uYmluZCh0aGlzLm9uSW1hZ2VMb2FkLHRoaXMpKSxPcGVuTGF5ZXJzLkV2ZW50Lm9ic2VydmUoYSwiZXJyb3IiLE9wZW5MYXllcnMuRnVuY3Rpb24uYmluZCh0aGlzLm9uSW1hZ2VFcnJvcix0aGlzKSksdGhpcy5pbWFnZVJlbG9hZEF0dGVtcHRzPTAsdGhpcy5zZXRJbWdTcmModGhpcy51cmwpKX1lbHNlIHRoaXMuaXNMb2FkaW5nPSExfSxzZXRJbWdTcmM6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5pbWdEaXY7YT8oYi5zdHlsZS52aXNpYmlsaXR5PSJoaWRkZW4iLGIuc3R5bGUub3BhY2l0eT0wLHRoaXMuY3Jvc3NPcmlnaW5LZXl3b3JkJiYoImRhdGE6IiE9PWEuc3Vic3RyKDAsNSk/Yi5zZXRBdHRyaWJ1dGUoImNyb3Nzb3JpZ2luIix0aGlzLmNyb3NzT3JpZ2luS2V5d29yZCk6CmIucmVtb3ZlQXR0cmlidXRlKCJjcm9zc29yaWdpbiIpKSxiLnNyYz1hKToodGhpcy5zdG9wTG9hZGluZygpLHRoaXMuaW1nRGl2PW51bGwsYi5wYXJlbnROb2RlJiZiLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYikpfSxnZXRUaWxlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZnJhbWU/dGhpcy5mcmFtZTp0aGlzLmdldEltYWdlKCl9LGNyZWF0ZUJhY2tCdWZmZXI6ZnVuY3Rpb24oKXtpZih0aGlzLmltZ0RpdiYmIXRoaXMuaXNMb2FkaW5nKXt2YXIgYTt0aGlzLmZyYW1lPyhhPXRoaXMuZnJhbWUuY2xvbmVOb2RlKCExKSxhLmFwcGVuZENoaWxkKHRoaXMuaW1nRGl2KSk6YT10aGlzLmltZ0Rpdjt0aGlzLmltZ0Rpdj1udWxsO3JldHVybiBhfX0sb25JbWFnZUxvYWQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmltZ0Rpdjt0aGlzLnN0b3BMb2FkaW5nKCk7YS5zdHlsZS52aXNpYmlsaXR5PSJpbmhlcml0IjthLnN0eWxlLm9wYWNpdHk9dGhpcy5sYXllci5vcGFjaXR5O3RoaXMuaXNMb2FkaW5nPQohMTt0aGlzLmNhbnZhc0NvbnRleHQ9bnVsbDt0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoImxvYWRlbmQiKTshMD09PXRoaXMubGF5ZXJBbHBoYUhhY2smJihhLnN0eWxlLmZpbHRlcj0icHJvZ2lkOkRYSW1hZ2VUcmFuc2Zvcm0uTWljcm9zb2Z0LkFscGhhSW1hZ2VMb2FkZXIoc3JjPSciK2Euc3JjKyInLCBzaXppbmdNZXRob2Q9J3NjYWxlJykiKX0sb25JbWFnZUVycm9yOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5pbWdEaXY7bnVsbCE9YS5zcmMmJih0aGlzLmltYWdlUmVsb2FkQXR0ZW1wdHMrKyx0aGlzLmltYWdlUmVsb2FkQXR0ZW1wdHM8PU9wZW5MYXllcnMuSU1BR0VfUkVMT0FEX0FUVEVNUFRTP3RoaXMuc2V0SW1nU3JjKHRoaXMubGF5ZXIuZ2V0VVJMKHRoaXMuYm91bmRzKSk6KE9wZW5MYXllcnMuRWxlbWVudC5hZGRDbGFzcyhhLCJvbEltYWdlTG9hZEVycm9yIiksdGhpcy5ldmVudHMudHJpZ2dlckV2ZW50KCJsb2FkZXJyb3IiKSx0aGlzLm9uSW1hZ2VMb2FkKCkpKX0sc3RvcExvYWRpbmc6ZnVuY3Rpb24oKXtPcGVuTGF5ZXJzLkV2ZW50LnN0b3BPYnNlcnZpbmdFbGVtZW50KHRoaXMuaW1nRGl2KTsKd2luZG93LmNsZWFyVGltZW91dCh0aGlzLl9sb2FkVGltZW91dCk7ZGVsZXRlIHRoaXMuX2xvYWRUaW1lb3V0fSxnZXRDYW52YXNDb250ZXh0OmZ1bmN0aW9uKCl7aWYoT3BlbkxheWVycy5DQU5WQVNfU1VQUE9SVEVEJiZ0aGlzLmltZ0RpdiYmIXRoaXMuaXNMb2FkaW5nKXtpZighdGhpcy5jYW52YXNDb250ZXh0KXt2YXIgYT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJjYW52YXMiKTthLndpZHRoPXRoaXMuc2l6ZS53O2EuaGVpZ2h0PXRoaXMuc2l6ZS5oO3RoaXMuY2FudmFzQ29udGV4dD1hLmdldENvbnRleHQoIjJkIik7dGhpcy5jYW52YXNDb250ZXh0LmRyYXdJbWFnZSh0aGlzLmltZ0RpdiwwLDApfXJldHVybiB0aGlzLmNhbnZhc0NvbnRleHR9fSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLlRpbGUuSW1hZ2UifSk7Ck9wZW5MYXllcnMuVGlsZS5JbWFnZS5JTUFHRT1mdW5jdGlvbigpe3ZhciBhPW5ldyBJbWFnZTthLmNsYXNzTmFtZT0ib2xUaWxlSW1hZ2UiO2EuZ2FsbGVyeUltZz0ibm8iO3JldHVybiBhfSgpO09wZW5MYXllcnMuTGF5ZXIuR3JpZD1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuTGF5ZXIuSFRUUFJlcXVlc3Qse3RpbGVTaXplOm51bGwsdGlsZU9yaWdpbkNvcm5lcjoiYmwiLHRpbGVPcmlnaW46bnVsbCx0aWxlT3B0aW9uczpudWxsLHRpbGVDbGFzczpPcGVuTGF5ZXJzLlRpbGUuSW1hZ2UsZ3JpZDpudWxsLHNpbmdsZVRpbGU6ITEscmF0aW86MS41LGJ1ZmZlcjowLHRyYW5zaXRpb25FZmZlY3Q6InJlc2l6ZSIsbnVtTG9hZGluZ1RpbGVzOjAsc2VydmVyUmVzb2x1dGlvbnM6bnVsbCxsb2FkaW5nOiExLGJhY2tCdWZmZXI6bnVsbCxncmlkUmVzb2x1dGlvbjpudWxsLGJhY2tCdWZmZXJSZXNvbHV0aW9uOm51bGwsYmFja0J1ZmZlckxvbkxhdDpudWxsLGJhY2tCdWZmZXJUaW1lcklkOm51bGwscmVtb3ZlQmFja0J1ZmZlckRlbGF5Om51bGwsY2xhc3NOYW1lOm51bGwsZ3JpZExheW91dDpudWxsLHJvd1NpZ246bnVsbCx0cmFuc2l0aW9uZW5kRXZlbnRzOlsidHJhbnNpdGlvbmVuZCIsCiJ3ZWJraXRUcmFuc2l0aW9uRW5kIiwib3RyYW5zaXRpb25lbmQiLCJvVHJhbnNpdGlvbkVuZCJdLGluaXRpYWxpemU6ZnVuY3Rpb24oYSxiLGMsZCl7T3BlbkxheWVycy5MYXllci5IVFRQUmVxdWVzdC5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5ncmlkPVtdO3RoaXMuX3JlbW92ZUJhY2tCdWZmZXI9T3BlbkxheWVycy5GdW5jdGlvbi5iaW5kKHRoaXMucmVtb3ZlQmFja0J1ZmZlcix0aGlzKTt0aGlzLmluaXRQcm9wZXJ0aWVzKCk7dGhpcy5yb3dTaWduPSJ0Ij09PXRoaXMudGlsZU9yaWdpbkNvcm5lci5zdWJzdHIoMCwxKT8xOi0xfSxpbml0UHJvcGVydGllczpmdW5jdGlvbigpe3ZvaWQgMD09PXRoaXMub3B0aW9ucy5yZW1vdmVCYWNrQnVmZmVyRGVsYXkmJih0aGlzLnJlbW92ZUJhY2tCdWZmZXJEZWxheT10aGlzLnNpbmdsZVRpbGU/MDoyNTAwKTt2b2lkIDA9PT10aGlzLm9wdGlvbnMuY2xhc3NOYW1lJiYodGhpcy5jbGFzc05hbWU9dGhpcy5zaW5nbGVUaWxlPwoib2xMYXllckdyaWRTaW5nbGVUaWxlIjoib2xMYXllckdyaWQiKX0sc2V0TWFwOmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuTGF5ZXIuSFRUUFJlcXVlc3QucHJvdG90eXBlLnNldE1hcC5jYWxsKHRoaXMsYSk7T3BlbkxheWVycy5FbGVtZW50LmFkZENsYXNzKHRoaXMuZGl2LHRoaXMuY2xhc3NOYW1lKX0scmVtb3ZlTWFwOmZ1bmN0aW9uKGEpe3RoaXMucmVtb3ZlQmFja0J1ZmZlcigpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5yZW1vdmVCYWNrQnVmZmVyKCk7dGhpcy5jbGVhckdyaWQoKTt0aGlzLnRpbGVTaXplPXRoaXMuZ3JpZD1udWxsO09wZW5MYXllcnMuTGF5ZXIuSFRUUFJlcXVlc3QucHJvdG90eXBlLmRlc3Ryb3kuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxjbGVhckdyaWQ6ZnVuY3Rpb24oKXtpZih0aGlzLmdyaWQpe2Zvcih2YXIgYT0wLGI9dGhpcy5ncmlkLmxlbmd0aDthPGI7YSsrKWZvcih2YXIgYz10aGlzLmdyaWRbYV0sZD0wLGU9Yy5sZW5ndGg7ZDxlO2QrKyl0aGlzLmRlc3Ryb3lUaWxlKGNbZF0pOwp0aGlzLmdyaWQ9W107dGhpcy5ncmlkTGF5b3V0PXRoaXMuZ3JpZFJlc29sdXRpb249bnVsbH19LGFkZE9wdGlvbnM6ZnVuY3Rpb24oYSxiKXt2YXIgYz12b2lkIDAhPT1hLnNpbmdsZVRpbGUmJmEuc2luZ2xlVGlsZSE9PXRoaXMuc2luZ2xlVGlsZTtPcGVuTGF5ZXJzLkxheWVyLkhUVFBSZXF1ZXN0LnByb3RvdHlwZS5hZGRPcHRpb25zLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLm1hcCYmYyYmKHRoaXMuaW5pdFByb3BlcnRpZXMoKSx0aGlzLmNsZWFyR3JpZCgpLHRoaXMudGlsZVNpemU9dGhpcy5vcHRpb25zLnRpbGVTaXplLHRoaXMuc2V0VGlsZVNpemUoKSx0aGlzLm1vdmVUbyhudWxsLCEwKSl9LGNsb25lOmZ1bmN0aW9uKGEpe251bGw9PWEmJihhPW5ldyBPcGVuTGF5ZXJzLkxheWVyLkdyaWQodGhpcy5uYW1lLHRoaXMudXJsLHRoaXMucGFyYW1zLHRoaXMuZ2V0T3B0aW9ucygpKSk7YT1PcGVuTGF5ZXJzLkxheWVyLkhUVFBSZXF1ZXN0LnByb3RvdHlwZS5jbG9uZS5hcHBseSh0aGlzLApbYV0pO251bGwhPXRoaXMudGlsZVNpemUmJihhLnRpbGVTaXplPXRoaXMudGlsZVNpemUuY2xvbmUoKSk7YS5ncmlkPVtdO2EuZ3JpZFJlc29sdXRpb249bnVsbDthLmJhY2tCdWZmZXI9bnVsbDthLmJhY2tCdWZmZXJUaW1lcklkPW51bGw7YS5sb2FkaW5nPSExO2EubnVtTG9hZGluZ1RpbGVzPTA7cmV0dXJuIGF9LG1vdmVUbzpmdW5jdGlvbihhLGIsYyl7T3BlbkxheWVycy5MYXllci5IVFRQUmVxdWVzdC5wcm90b3R5cGUubW92ZVRvLmFwcGx5KHRoaXMsYXJndW1lbnRzKTthPWF8fHRoaXMubWFwLmdldEV4dGVudCgpO2lmKG51bGwhPWEpe3ZhciBkPSF0aGlzLmdyaWQubGVuZ3RofHxiLGU9dGhpcy5nZXRUaWxlc0JvdW5kcygpLGY9dGhpcy5tYXAuZ2V0UmVzb2x1dGlvbigpO3RoaXMuZ2V0U2VydmVyUmVzb2x1dGlvbihmKTtpZih0aGlzLnNpbmdsZVRpbGUpe2lmKGR8fCFjJiYhZS5jb250YWluc0JvdW5kcyhhKSliJiYicmVzaXplIiE9PXRoaXMudHJhbnNpdGlvbkVmZmVjdCYmCnRoaXMucmVtb3ZlQmFja0J1ZmZlcigpLGImJiJyZXNpemUiIT09dGhpcy50cmFuc2l0aW9uRWZmZWN0fHx0aGlzLmFwcGx5QmFja0J1ZmZlcihmKSx0aGlzLmluaXRTaW5nbGVUaWxlKGEpfWVsc2UoZD1kfHwhZS5pbnRlcnNlY3RzQm91bmRzKGEse3dvcmxkQm91bmRzOnRoaXMubWFwLmJhc2VMYXllci53cmFwRGF0ZUxpbmUmJnRoaXMubWFwLmdldE1heEV4dGVudCgpfSkpPyghYnx8InJlc2l6ZSIhPT10aGlzLnRyYW5zaXRpb25FZmZlY3QmJnRoaXMuZ3JpZFJlc29sdXRpb24hPT1mfHx0aGlzLmFwcGx5QmFja0J1ZmZlcihmKSx0aGlzLmluaXRHcmlkZGVkVGlsZXMoYSkpOnRoaXMubW92ZUdyaWRkZWRUaWxlcygpfX0sZ2V0VGlsZURhdGE6ZnVuY3Rpb24oYSl7dmFyIGI9bnVsbCxjPWEubG9uLGQ9YS5sYXQsZT10aGlzLmdyaWQubGVuZ3RoO2lmKHRoaXMubWFwJiZlKXt2YXIgZj10aGlzLm1hcC5nZXRSZXNvbHV0aW9uKCk7YT10aGlzLnRpbGVTaXplLnc7dmFyIGc9dGhpcy50aWxlU2l6ZS5oLApoPXRoaXMuZ3JpZFswXVswXS5ib3VuZHMsaz1oLmxlZnQsaD1oLnRvcDtpZihjPGsmJnRoaXMubWFwLmJhc2VMYXllci53cmFwRGF0ZUxpbmUpdmFyIGw9dGhpcy5tYXAuZ2V0TWF4RXh0ZW50KCkuZ2V0V2lkdGgoKSxtPU1hdGguY2VpbCgoay1jKS9sKSxjPWMrbCptO2M9KGMtaykvKGYqYSk7ZD0oaC1kKS8oZipnKTtmPU1hdGguZmxvb3IoYyk7az1NYXRoLmZsb29yKGQpOzA8PWsmJms8ZSYmKGU9dGhpcy5ncmlkW2tdW2ZdKSYmKGI9e3RpbGU6ZSxpOk1hdGguZmxvb3IoKGMtZikqYSksajpNYXRoLmZsb29yKChkLWspKmcpfSl9cmV0dXJuIGJ9LGRlc3Ryb3lUaWxlOmZ1bmN0aW9uKGEpe3RoaXMucmVtb3ZlVGlsZU1vbml0b3JpbmdIb29rcyhhKTthLmRlc3Ryb3koKX0sZ2V0U2VydmVyUmVzb2x1dGlvbjpmdW5jdGlvbihhKXt2YXIgYj1OdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk7YT1hfHx0aGlzLm1hcC5nZXRSZXNvbHV0aW9uKCk7aWYodGhpcy5zZXJ2ZXJSZXNvbHV0aW9ucyYmCi0xPT09T3BlbkxheWVycy5VdGlsLmluZGV4T2YodGhpcy5zZXJ2ZXJSZXNvbHV0aW9ucyxhKSl7dmFyIGMsZCxlLGY7Zm9yKGM9dGhpcy5zZXJ2ZXJSZXNvbHV0aW9ucy5sZW5ndGgtMTswPD1jO2MtLSl7ZT10aGlzLnNlcnZlclJlc29sdXRpb25zW2NdO2Q9TWF0aC5hYnMoZS1hKTtpZihkPmIpYnJlYWs7Yj1kO2Y9ZX1hPWZ9cmV0dXJuIGF9LGdldFNlcnZlclpvb206ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmdldFNlcnZlclJlc29sdXRpb24oKTtyZXR1cm4gdGhpcy5zZXJ2ZXJSZXNvbHV0aW9ucz9PcGVuTGF5ZXJzLlV0aWwuaW5kZXhPZih0aGlzLnNlcnZlclJlc29sdXRpb25zLGEpOnRoaXMubWFwLmdldFpvb21Gb3JSZXNvbHV0aW9uKGEpKyh0aGlzLnpvb21PZmZzZXR8fDApfSxhcHBseUJhY2tCdWZmZXI6ZnVuY3Rpb24oYSl7bnVsbCE9PXRoaXMuYmFja0J1ZmZlclRpbWVySWQmJnRoaXMucmVtb3ZlQmFja0J1ZmZlcigpO3ZhciBiPXRoaXMuYmFja0J1ZmZlcjtpZighYil7Yj0KdGhpcy5jcmVhdGVCYWNrQnVmZmVyKCk7aWYoIWIpcmV0dXJuO2E9PT10aGlzLmdyaWRSZXNvbHV0aW9uP3RoaXMuZGl2Lmluc2VydEJlZm9yZShiLHRoaXMuZGl2LmZpcnN0Q2hpbGQpOnRoaXMubWFwLmJhc2VMYXllci5kaXYucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoYix0aGlzLm1hcC5iYXNlTGF5ZXIuZGl2KTt0aGlzLmJhY2tCdWZmZXI9Yjt2YXIgYz10aGlzLmdyaWRbMF1bMF0uYm91bmRzO3RoaXMuYmFja0J1ZmZlckxvbkxhdD17bG9uOmMubGVmdCxsYXQ6Yy50b3B9O3RoaXMuYmFja0J1ZmZlclJlc29sdXRpb249dGhpcy5ncmlkUmVzb2x1dGlvbn1mb3IodmFyIGM9dGhpcy5iYWNrQnVmZmVyUmVzb2x1dGlvbi9hLGQ9Yi5jaGlsZE5vZGVzLGUsZj1kLmxlbmd0aC0xOzA8PWY7LS1mKWU9ZFtmXSxlLnN0eWxlLnRvcD0oYyplLl9pKmUuX2h8MCkrInB4IixlLnN0eWxlLmxlZnQ9KGMqZS5faiplLl93fDApKyJweCIsZS5zdHlsZS53aWR0aD1NYXRoLnJvdW5kKGMqZS5fdykrCiJweCIsZS5zdHlsZS5oZWlnaHQ9TWF0aC5yb3VuZChjKmUuX2gpKyJweCI7YT10aGlzLmdldFZpZXdQb3J0UHhGcm9tTG9uTGF0KHRoaXMuYmFja0J1ZmZlckxvbkxhdCxhKTtjPXRoaXMubWFwLmxheWVyQ29udGFpbmVyT3JpZ2luUHgueTtiLnN0eWxlLmxlZnQ9TWF0aC5yb3VuZChhLngtdGhpcy5tYXAubGF5ZXJDb250YWluZXJPcmlnaW5QeC54KSsicHgiO2Iuc3R5bGUudG9wPU1hdGgucm91bmQoYS55LWMpKyJweCJ9LGNyZWF0ZUJhY2tCdWZmZXI6ZnVuY3Rpb24oKXt2YXIgYTtpZigwPHRoaXMuZ3JpZC5sZW5ndGgpe2E9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7YS5pZD10aGlzLmRpdi5pZCsiX2JiIjthLmNsYXNzTmFtZT0ib2xCYWNrQnVmZmVyIjthLnN0eWxlLnBvc2l0aW9uPSJhYnNvbHV0ZSI7dmFyIGI9dGhpcy5tYXA7YS5zdHlsZS56SW5kZXg9InJlc2l6ZSI9PT10aGlzLnRyYW5zaXRpb25FZmZlY3Q/dGhpcy5nZXRaSW5kZXgoKS0xOmIuWl9JTkRFWF9CQVNFLkJhc2VMYXllci0KKGIuZ2V0TnVtTGF5ZXJzKCktYi5nZXRMYXllckluZGV4KHRoaXMpKTtmb3IodmFyIGI9MCxjPXRoaXMuZ3JpZC5sZW5ndGg7YjxjO2IrKylmb3IodmFyIGQ9MCxlPXRoaXMuZ3JpZFtiXS5sZW5ndGg7ZDxlO2QrKyl7dmFyIGY9dGhpcy5ncmlkW2JdW2RdLGc9dGhpcy5ncmlkW2JdW2RdLmNyZWF0ZUJhY2tCdWZmZXIoKTtnJiYoZy5faT1iLGcuX2o9ZCxnLl93PWYuc2l6ZS53LGcuX2g9Zi5zaXplLmgsZy5pZD1mLmlkKyJfYmIiLGEuYXBwZW5kQ2hpbGQoZykpfX1yZXR1cm4gYX0scmVtb3ZlQmFja0J1ZmZlcjpmdW5jdGlvbigpe2lmKHRoaXMuX3RyYW5zaXRpb25FbGVtZW50KXtmb3IodmFyIGE9dGhpcy50cmFuc2l0aW9uZW5kRXZlbnRzLmxlbmd0aC0xOzA8PWE7LS1hKU9wZW5MYXllcnMuRXZlbnQuc3RvcE9ic2VydmluZyh0aGlzLl90cmFuc2l0aW9uRWxlbWVudCx0aGlzLnRyYW5zaXRpb25lbmRFdmVudHNbYV0sdGhpcy5fcmVtb3ZlQmFja0J1ZmZlcik7ZGVsZXRlIHRoaXMuX3RyYW5zaXRpb25FbGVtZW50fXRoaXMuYmFja0J1ZmZlciYmCih0aGlzLmJhY2tCdWZmZXIucGFyZW50Tm9kZSYmdGhpcy5iYWNrQnVmZmVyLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5iYWNrQnVmZmVyKSx0aGlzLmJhY2tCdWZmZXJSZXNvbHV0aW9uPXRoaXMuYmFja0J1ZmZlcj1udWxsLG51bGwhPT10aGlzLmJhY2tCdWZmZXJUaW1lcklkJiYod2luZG93LmNsZWFyVGltZW91dCh0aGlzLmJhY2tCdWZmZXJUaW1lcklkKSx0aGlzLmJhY2tCdWZmZXJUaW1lcklkPW51bGwpKX0sbW92ZUJ5UHg6ZnVuY3Rpb24oYSxiKXt0aGlzLnNpbmdsZVRpbGV8fHRoaXMubW92ZUdyaWRkZWRUaWxlcygpfSxzZXRUaWxlU2l6ZTpmdW5jdGlvbihhKXt0aGlzLnNpbmdsZVRpbGUmJihhPXRoaXMubWFwLmdldFNpemUoKSxhLmg9cGFyc2VJbnQoYS5oKnRoaXMucmF0aW8sMTApLGEudz1wYXJzZUludChhLncqdGhpcy5yYXRpbywxMCkpO09wZW5MYXllcnMuTGF5ZXIuSFRUUFJlcXVlc3QucHJvdG90eXBlLnNldFRpbGVTaXplLmFwcGx5KHRoaXMsW2FdKX0sZ2V0VGlsZXNCb3VuZHM6ZnVuY3Rpb24oKXt2YXIgYT0KbnVsbCxiPXRoaXMuZ3JpZC5sZW5ndGg7aWYoYil2YXIgYT10aGlzLmdyaWRbYi0xXVswXS5ib3VuZHMsYj10aGlzLmdyaWRbMF0ubGVuZ3RoKmEuZ2V0V2lkdGgoKSxjPXRoaXMuZ3JpZC5sZW5ndGgqYS5nZXRIZWlnaHQoKSxhPW5ldyBPcGVuTGF5ZXJzLkJvdW5kcyhhLmxlZnQsYS5ib3R0b20sYS5sZWZ0K2IsYS5ib3R0b20rYyk7cmV0dXJuIGF9LGluaXRTaW5nbGVUaWxlOmZ1bmN0aW9uKGEpe3RoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgicmV0aWxlIik7dmFyIGI9YS5nZXRDZW50ZXJMb25MYXQoKSxjPWEuZ2V0V2lkdGgoKSp0aGlzLnJhdGlvO2E9YS5nZXRIZWlnaHQoKSp0aGlzLnJhdGlvO2I9bmV3IE9wZW5MYXllcnMuQm91bmRzKGIubG9uLWMvMixiLmxhdC1hLzIsYi5sb24rYy8yLGIubGF0K2EvMik7Yz10aGlzLm1hcC5nZXRMYXllclB4RnJvbUxvbkxhdCh7bG9uOmIubGVmdCxsYXQ6Yi50b3B9KTt0aGlzLmdyaWQubGVuZ3RofHwodGhpcy5ncmlkWzBdPVtdKTsoYT10aGlzLmdyaWRbMF1bMF0pPwphLm1vdmVUbyhiLGMpOihhPXRoaXMuYWRkVGlsZShiLGMpLHRoaXMuYWRkVGlsZU1vbml0b3JpbmdIb29rcyhhKSxhLmRyYXcoKSx0aGlzLmdyaWRbMF1bMF09YSk7dGhpcy5yZW1vdmVFeGNlc3NUaWxlcygxLDEpO3RoaXMuZ3JpZFJlc29sdXRpb249dGhpcy5nZXRTZXJ2ZXJSZXNvbHV0aW9uKCl9LGNhbGN1bGF0ZUdyaWRMYXlvdXQ6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWMqdGhpcy50aWxlU2l6ZS53O2MqPXRoaXMudGlsZVNpemUuaDt2YXIgZT1NYXRoLmZsb29yKChhLmxlZnQtYi5sb24pL2QpLXRoaXMuYnVmZmVyLGY9dGhpcy5yb3dTaWduO2E9TWF0aFt+Zj8iZmxvb3IiOiJjZWlsIl0oZiooYi5sYXQtYS50b3ArYykvYyktdGhpcy5idWZmZXIqZjtyZXR1cm57dGlsZWxvbjpkLHRpbGVsYXQ6YyxzdGFydGNvbDplLHN0YXJ0cm93OmF9fSxnZXRUaWxlT3JpZ2luOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy50aWxlT3JpZ2luO2lmKCFhKXZhciBhPXRoaXMuZ2V0TWF4RXh0ZW50KCksCmI9e3RsOlsibGVmdCIsInRvcCJdLHRyOlsicmlnaHQiLCJ0b3AiXSxibDpbImxlZnQiLCJib3R0b20iXSxicjpbInJpZ2h0IiwiYm90dG9tIl19W3RoaXMudGlsZU9yaWdpbkNvcm5lcl0sYT1uZXcgT3BlbkxheWVycy5Mb25MYXQoYVtiWzBdXSxhW2JbMV1dKTtyZXR1cm4gYX0sZ2V0VGlsZUJvdW5kc0ZvckdyaWRJbmRleDpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuZ2V0VGlsZU9yaWdpbigpLGQ9dGhpcy5ncmlkTGF5b3V0LGU9ZC50aWxlbG9uLGY9ZC50aWxlbGF0LGc9ZC5zdGFydGNvbCxkPWQuc3RhcnRyb3csaD10aGlzLnJvd1NpZ247cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLkJvdW5kcyhjLmxvbisoZytiKSplLGMubGF0LShkK2EqaCkqZipoLGMubG9uKyhnK2IrMSkqZSxjLmxhdC0oZCsoYS0xKSpoKSpmKmgpfSxpbml0R3JpZGRlZFRpbGVzOmZ1bmN0aW9uKGEpe3RoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgicmV0aWxlIik7dmFyIGI9dGhpcy5tYXAuZ2V0U2l6ZSgpLGM9dGhpcy5nZXRUaWxlT3JpZ2luKCksCmQ9dGhpcy5tYXAuZ2V0UmVzb2x1dGlvbigpLGU9dGhpcy5nZXRTZXJ2ZXJSZXNvbHV0aW9uKCksZj1kL2UsZD10aGlzLnRpbGVTaXplLncvZixmPXRoaXMudGlsZVNpemUuaC9mLGc9TWF0aC5jZWlsKGIuaC9mKSsyKnRoaXMuYnVmZmVyKzEsYj1NYXRoLmNlaWwoYi53L2QpKzIqdGhpcy5idWZmZXIrMTt0aGlzLmdyaWRMYXlvdXQ9ZT10aGlzLmNhbGN1bGF0ZUdyaWRMYXlvdXQoYSxjLGUpO3ZhciBjPWUudGlsZWxvbixoPWUudGlsZWxhdCxlPXRoaXMubWFwLmxheWVyQ29udGFpbmVyT3JpZ2luUHgueCxrPXRoaXMubWFwLmxheWVyQ29udGFpbmVyT3JpZ2luUHgueSxsPXRoaXMuZ2V0VGlsZUJvdW5kc0ZvckdyaWRJbmRleCgwLDApLG09dGhpcy5tYXAuZ2V0Vmlld1BvcnRQeEZyb21Mb25MYXQobmV3IE9wZW5MYXllcnMuTG9uTGF0KGwubGVmdCxsLnRvcCkpO20ueD1NYXRoLnJvdW5kKG0ueCktZTttLnk9TWF0aC5yb3VuZChtLnkpLWs7dmFyIGU9W10saz10aGlzLm1hcC5nZXRDZW50ZXIoKSwKbj0wO2Rve3ZhciBwPXRoaXMuZ3JpZFtuXTtwfHwocD1bXSx0aGlzLmdyaWQucHVzaChwKSk7dmFyIHE9MDtkb3t2YXIgbD10aGlzLmdldFRpbGVCb3VuZHNGb3JHcmlkSW5kZXgobixxKSxyPW0uY2xvbmUoKTtyLngrPXEqTWF0aC5yb3VuZChkKTtyLnkrPW4qTWF0aC5yb3VuZChmKTt2YXIgcz1wW3FdO3M/cy5tb3ZlVG8obCxyLCExKToocz10aGlzLmFkZFRpbGUobCxyKSx0aGlzLmFkZFRpbGVNb25pdG9yaW5nSG9va3MocykscC5wdXNoKHMpKTtyPWwuZ2V0Q2VudGVyTG9uTGF0KCk7ZS5wdXNoKHt0aWxlOnMsZGlzdGFuY2U6TWF0aC5wb3coci5sb24tay5sb24sMikrTWF0aC5wb3coci5sYXQtay5sYXQsMil9KTtxKz0xfXdoaWxlKGwucmlnaHQ8PWEucmlnaHQrYyp0aGlzLmJ1ZmZlcnx8cTxiKTtuKz0xfXdoaWxlKGwuYm90dG9tPj1hLmJvdHRvbS1oKnRoaXMuYnVmZmVyfHxuPGcpO3RoaXMucmVtb3ZlRXhjZXNzVGlsZXMobixxKTt0aGlzLmdyaWRSZXNvbHV0aW9uPWQ9dGhpcy5nZXRTZXJ2ZXJSZXNvbHV0aW9uKCk7CmUuc29ydChmdW5jdGlvbihhLGIpe3JldHVybiBhLmRpc3RhbmNlLWIuZGlzdGFuY2V9KTthPTA7Zm9yKGQ9ZS5sZW5ndGg7YTxkOysrYSllW2FdLnRpbGUuZHJhdygpfSxnZXRNYXhFeHRlbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tYXhFeHRlbnR9LGFkZFRpbGU6ZnVuY3Rpb24oYSxiKXt2YXIgYz1uZXcgdGhpcy50aWxlQ2xhc3ModGhpcyxiLGEsbnVsbCx0aGlzLnRpbGVTaXplLHRoaXMudGlsZU9wdGlvbnMpO3RoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgiYWRkdGlsZSIse3RpbGU6Y30pO3JldHVybiBjfSxhZGRUaWxlTW9uaXRvcmluZ0hvb2tzOmZ1bmN0aW9uKGEpe2Eub25Mb2FkU3RhcnQ9ZnVuY3Rpb24oKXshMT09PXRoaXMubG9hZGluZyYmKHRoaXMubG9hZGluZz0hMCx0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoImxvYWRzdGFydCIpKTt0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoInRpbGVsb2Fkc3RhcnQiLHt0aWxlOmF9KTt0aGlzLm51bUxvYWRpbmdUaWxlcysrOwohdGhpcy5zaW5nbGVUaWxlJiYodGhpcy5iYWNrQnVmZmVyJiZ0aGlzLmdyaWRSZXNvbHV0aW9uPT09dGhpcy5iYWNrQnVmZmVyUmVzb2x1dGlvbikmJk9wZW5MYXllcnMuRWxlbWVudC5hZGRDbGFzcyhhLmdldFRpbGUoKSwib2xUaWxlUmVwbGFjaW5nIil9O2Eub25Mb2FkRW5kPWZ1bmN0aW9uKGIpe3RoaXMubnVtTG9hZGluZ1RpbGVzLS07Yj0idW5sb2FkIj09PWIudHlwZTt0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoInRpbGVsb2FkZWQiLHt0aWxlOmEsYWJvcnRlZDpifSk7aWYoIXRoaXMuc2luZ2xlVGlsZSYmIWImJnRoaXMuYmFja0J1ZmZlciYmdGhpcy5ncmlkUmVzb2x1dGlvbj09PXRoaXMuYmFja0J1ZmZlclJlc29sdXRpb24pe3ZhciBjPWEuZ2V0VGlsZSgpO2lmKCJub25lIj09PU9wZW5MYXllcnMuRWxlbWVudC5nZXRTdHlsZShjLCJkaXNwbGF5Iikpe3ZhciBkPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGEuaWQrIl9iYiIpO2QmJmQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChkKX1PcGVuTGF5ZXJzLkVsZW1lbnQucmVtb3ZlQ2xhc3MoYywKIm9sVGlsZVJlcGxhY2luZyIpfWlmKDA9PT10aGlzLm51bUxvYWRpbmdUaWxlcyl7aWYodGhpcy5iYWNrQnVmZmVyKWlmKDA9PT10aGlzLmJhY2tCdWZmZXIuY2hpbGROb2Rlcy5sZW5ndGgpdGhpcy5yZW1vdmVCYWNrQnVmZmVyKCk7ZWxzZXt0aGlzLl90cmFuc2l0aW9uRWxlbWVudD1iP3RoaXMuZGl2Lmxhc3RDaGlsZDphLmltZ0RpdjtiPXRoaXMudHJhbnNpdGlvbmVuZEV2ZW50cztmb3IoYz1iLmxlbmd0aC0xOzA8PWM7LS1jKU9wZW5MYXllcnMuRXZlbnQub2JzZXJ2ZSh0aGlzLl90cmFuc2l0aW9uRWxlbWVudCxiW2NdLHRoaXMuX3JlbW92ZUJhY2tCdWZmZXIpO3RoaXMuYmFja0J1ZmZlclRpbWVySWQ9d2luZG93LnNldFRpbWVvdXQodGhpcy5fcmVtb3ZlQmFja0J1ZmZlcix0aGlzLnJlbW92ZUJhY2tCdWZmZXJEZWxheSl9dGhpcy5sb2FkaW5nPSExO3RoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgibG9hZGVuZCIpfX07YS5vbkxvYWRFcnJvcj1mdW5jdGlvbigpe3RoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgidGlsZWVycm9yIiwKe3RpbGU6YX0pfTthLmV2ZW50cy5vbih7bG9hZHN0YXJ0OmEub25Mb2FkU3RhcnQsbG9hZGVuZDphLm9uTG9hZEVuZCx1bmxvYWQ6YS5vbkxvYWRFbmQsbG9hZGVycm9yOmEub25Mb2FkRXJyb3Isc2NvcGU6dGhpc30pfSxyZW1vdmVUaWxlTW9uaXRvcmluZ0hvb2tzOmZ1bmN0aW9uKGEpe2EudW5sb2FkKCk7YS5ldmVudHMudW4oe2xvYWRzdGFydDphLm9uTG9hZFN0YXJ0LGxvYWRlbmQ6YS5vbkxvYWRFbmQsdW5sb2FkOmEub25Mb2FkRW5kLGxvYWRlcnJvcjphLm9uTG9hZEVycm9yLHNjb3BlOnRoaXN9KX0sbW92ZUdyaWRkZWRUaWxlczpmdW5jdGlvbigpe2Zvcih2YXIgYT10aGlzLmJ1ZmZlcisxOzspe3ZhciBiPXRoaXMuZ3JpZFswXVswXSxjPWIucG9zaXRpb24ueCt0aGlzLm1hcC5sYXllckNvbnRhaW5lck9yaWdpblB4LngsYj1iLnBvc2l0aW9uLnkrdGhpcy5tYXAubGF5ZXJDb250YWluZXJPcmlnaW5QeC55LGQ9dGhpcy5nZXRTZXJ2ZXJSZXNvbHV0aW9uKCkvdGhpcy5tYXAuZ2V0UmVzb2x1dGlvbigpLApkPXt3Ok1hdGgucm91bmQodGhpcy50aWxlU2l6ZS53KmQpLGg6TWF0aC5yb3VuZCh0aGlzLnRpbGVTaXplLmgqZCl9O2lmKGM+LWQudyooYS0xKSl0aGlzLnNoaWZ0Q29sdW1uKCEwLGQpO2Vsc2UgaWYoYzwtZC53KmEpdGhpcy5zaGlmdENvbHVtbighMSxkKTtlbHNlIGlmKGI+LWQuaCooYS0xKSl0aGlzLnNoaWZ0Um93KCEwLGQpO2Vsc2UgaWYoYjwtZC5oKmEpdGhpcy5zaGlmdFJvdyghMSxkKTtlbHNlIGJyZWFrfX0sc2hpZnRSb3c6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmdyaWQsZD1hPzA6Yy5sZW5ndGgtMSxlPWE/LTE6MTt0aGlzLmdyaWRMYXlvdXQuc3RhcnRyb3crPWUqdGhpcy5yb3dTaWduO2Zvcih2YXIgZj1jW2RdLGc9Y1thPyJwb3AiOiJzaGlmdCJdKCksaD0wLGs9Zy5sZW5ndGg7aDxrO2grKyl7dmFyIGw9Z1toXSxtPWZbaF0ucG9zaXRpb24uY2xvbmUoKTttLnkrPWIuaCplO2wubW92ZVRvKHRoaXMuZ2V0VGlsZUJvdW5kc0ZvckdyaWRJbmRleChkLGgpLG0pfWNbYT8KInVuc2hpZnQiOiJwdXNoIl0oZyl9LHNoaWZ0Q29sdW1uOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5ncmlkLGQ9YT8wOmNbMF0ubGVuZ3RoLTEsZT1hPy0xOjE7dGhpcy5ncmlkTGF5b3V0LnN0YXJ0Y29sKz1lO2Zvcih2YXIgZj0wLGc9Yy5sZW5ndGg7ZjxnO2YrKyl7dmFyIGg9Y1tmXSxrPWhbZF0ucG9zaXRpb24uY2xvbmUoKSxsPWhbYT8icG9wIjoic2hpZnQiXSgpO2sueCs9Yi53KmU7bC5tb3ZlVG8odGhpcy5nZXRUaWxlQm91bmRzRm9yR3JpZEluZGV4KGYsZCksayk7aFthPyJ1bnNoaWZ0IjoicHVzaCJdKGwpfX0scmVtb3ZlRXhjZXNzVGlsZXM6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGMsZDt0aGlzLmdyaWQubGVuZ3RoPmE7KXt2YXIgZT10aGlzLmdyaWQucG9wKCk7Yz0wO2ZvcihkPWUubGVuZ3RoO2M8ZDtjKyspe3ZhciBmPWVbY107dGhpcy5kZXN0cm95VGlsZShmKX19Yz0wO2ZvcihkPXRoaXMuZ3JpZC5sZW5ndGg7YzxkO2MrKylmb3IoO3RoaXMuZ3JpZFtjXS5sZW5ndGg+CmI7KWU9dGhpcy5ncmlkW2NdLGY9ZS5wb3AoKSx0aGlzLmRlc3Ryb3lUaWxlKGYpfSxvbk1hcFJlc2l6ZTpmdW5jdGlvbigpe3RoaXMuc2luZ2xlVGlsZSYmKHRoaXMuY2xlYXJHcmlkKCksdGhpcy5zZXRUaWxlU2l6ZSgpKX0sZ2V0VGlsZUJvdW5kczpmdW5jdGlvbihhKXt2YXIgYj10aGlzLm1heEV4dGVudCxjPXRoaXMuZ2V0UmVzb2x1dGlvbigpLGQ9Yyp0aGlzLnRpbGVTaXplLncsYz1jKnRoaXMudGlsZVNpemUuaCxlPXRoaXMuZ2V0TG9uTGF0RnJvbVZpZXdQb3J0UHgoYSk7YT1iLmxlZnQrZCpNYXRoLmZsb29yKChlLmxvbi1iLmxlZnQpL2QpO2I9Yi5ib3R0b20rYypNYXRoLmZsb29yKChlLmxhdC1iLmJvdHRvbSkvYyk7cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLkJvdW5kcyhhLGIsYStkLGIrYyl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuTGF5ZXIuR3JpZCJ9KTtPcGVuTGF5ZXJzLkZvcm1hdC5BcmNYTUw9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkZvcm1hdC5YTUwse2ZvbnRTdHlsZUtleXM6ImFudGlhbGlhc2luZyBibG9ja291dCBmb250IGZvbnRjb2xvciBmb250c2l6ZSBmb250c3R5bGUgZ2xvd2luZyBpbnRlcnZhbCBvdXRsaW5lIHByaW50bW9kZSBzaGFkb3cgdHJhbnNwYXJlbmN5Ii5zcGxpdCgiICIpLHJlcXVlc3Q6bnVsbCxyZXNwb25zZTpudWxsLGluaXRpYWxpemU6ZnVuY3Rpb24oYSl7dGhpcy5yZXF1ZXN0PW5ldyBPcGVuTGF5ZXJzLkZvcm1hdC5BcmNYTUwuUmVxdWVzdDt0aGlzLnJlc3BvbnNlPW5ldyBPcGVuTGF5ZXJzLkZvcm1hdC5BcmNYTUwuUmVzcG9uc2U7aWYoYSlpZigiZmVhdHVyZSI9PWEucmVxdWVzdHR5cGUpe3RoaXMucmVxdWVzdC5nZXRfaW1hZ2U9bnVsbDt2YXIgYj10aGlzLnJlcXVlc3QuZ2V0X2ZlYXR1cmUucXVlcnk7dGhpcy5hZGRDb29yZFN5cyhiLmZlYXR1cmVjb29yZHN5cyxhLmZlYXR1cmVDb29yZFN5cyk7CnRoaXMuYWRkQ29vcmRTeXMoYi5maWx0ZXJjb29yZHN5cyxhLmZpbHRlckNvb3JkU3lzKTthLnBvbHlnb24/KGIuaXNzcGF0aWFsPSEwLGIuc3BhdGlhbGZpbHRlci5wb2x5Z29uPWEucG9seWdvbik6YS5lbnZlbG9wZSYmKGIuaXNzcGF0aWFsPSEwLGIuc3BhdGlhbGZpbHRlci5lbnZlbG9wZT17bWlueDowLG1pbnk6MCxtYXh4OjAsbWF4eTowfSx0aGlzLnBhcnNlRW52ZWxvcGUoYi5zcGF0aWFsZmlsdGVyLmVudmVsb3BlLGEuZW52ZWxvcGUpKX1lbHNlImltYWdlIj09YS5yZXF1ZXN0dHlwZT8odGhpcy5yZXF1ZXN0LmdldF9mZWF0dXJlPW51bGwsYj10aGlzLnJlcXVlc3QuZ2V0X2ltYWdlLnByb3BlcnRpZXMsdGhpcy5wYXJzZUVudmVsb3BlKGIuZW52ZWxvcGUsYS5lbnZlbG9wZSksdGhpcy5hZGRMYXllcnMoYi5sYXllcmxpc3QsYS5sYXllcnMpLHRoaXMuYWRkSW1hZ2VTaXplKGIuaW1hZ2VzaXplLGEudGlsZVNpemUpLHRoaXMuYWRkQ29vcmRTeXMoYi5mZWF0dXJlY29vcmRzeXMsCmEuZmVhdHVyZUNvb3JkU3lzKSx0aGlzLmFkZENvb3JkU3lzKGIuZmlsdGVyY29vcmRzeXMsYS5maWx0ZXJDb29yZFN5cykpOnRoaXMucmVxdWVzdD1udWxsO09wZW5MYXllcnMuRm9ybWF0LlhNTC5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLFthXSl9LHBhcnNlRW52ZWxvcGU6ZnVuY3Rpb24oYSxiKXtiJiY0PT1iLmxlbmd0aCYmKGEubWlueD1iWzBdLGEubWlueT1iWzFdLGEubWF4eD1iWzJdLGEubWF4eT1iWzNdKX0sYWRkTGF5ZXJzOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTAsZD1iLmxlbmd0aDtjPGQ7YysrKWEucHVzaChiW2NdKX0sYWRkSW1hZ2VTaXplOmZ1bmN0aW9uKGEsYil7bnVsbCE9PWImJihhLndpZHRoPWIudyxhLmhlaWdodD1iLmgsYS5wcmludHdpZHRoPWIudyxhLnByaW50aGVpZ2h0PWIuaCl9LGFkZENvb3JkU3lzOmZ1bmN0aW9uKGEsYil7InN0cmluZyI9PXR5cGVvZiBiPyhhLmlkPXBhcnNlSW50KGIpLGEuc3RyaW5nPWIpOiJvYmplY3QiPT10eXBlb2YgYiYmCm51bGwhPT1iLnByb2omJihhLmlkPWIucHJvai5zcnNQcm9qTnVtYmVyLGEuc3RyaW5nPWIucHJvai5zcnNDb2RlKX0saXNlcnJvcjpmdW5jdGlvbihhKXt2YXIgYj1udWxsO2E/KGE9T3BlbkxheWVycy5Gb3JtYXQuWE1MLnByb3RvdHlwZS5yZWFkLmFwcGx5KHRoaXMsW2FdKSxhPWEuZG9jdW1lbnRFbGVtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJFUlJPUiIpLGI9bnVsbCE9PWEmJjA8YS5sZW5ndGgpOmI9IiIhPT10aGlzLnJlc3BvbnNlLmVycm9yO3JldHVybiBifSxyZWFkOmZ1bmN0aW9uKGEpeyJzdHJpbmciPT10eXBlb2YgYSYmKGE9T3BlbkxheWVycy5Gb3JtYXQuWE1MLnByb3RvdHlwZS5yZWFkLmFwcGx5KHRoaXMsW2FdKSk7dmFyIGI9bnVsbDthJiZhLmRvY3VtZW50RWxlbWVudCYmKGI9IkFSQ1hNTCI9PWEuZG9jdW1lbnRFbGVtZW50Lm5vZGVOYW1lP2EuZG9jdW1lbnRFbGVtZW50OmEuZG9jdW1lbnRFbGVtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJBUkNYTUwiKVswXSk7CmlmKCFifHwicGFyc2VyZXJyb3IiPT09Yi5maXJzdENoaWxkLm5vZGVOYW1lKXt2YXIgYyxkO3RyeXtjPWEuZmlyc3RDaGlsZC5ub2RlVmFsdWUsZD1hLmZpcnN0Q2hpbGQuY2hpbGROb2Rlc1sxXS5maXJzdENoaWxkLm5vZGVWYWx1ZX1jYXRjaChlKXt9dGhyb3d7bWVzc2FnZToiRXJyb3IgcGFyc2luZyB0aGUgQXJjWE1MIHJlcXVlc3QiLGVycm9yOmMsc291cmNlOmR9O31yZXR1cm4gdGhpcy5wYXJzZVJlc3BvbnNlKGIpfSx3cml0ZTpmdW5jdGlvbihhKXthfHwoYT10aGlzLnJlcXVlc3QpO3ZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TKCIiLCJBUkNYTUwiKTtiLnNldEF0dHJpYnV0ZSgidmVyc2lvbiIsIjEuMSIpO3ZhciBjPXRoaXMuY3JlYXRlRWxlbWVudE5TKCIiLCJSRVFVRVNUIik7aWYobnVsbCE9YS5nZXRfaW1hZ2Upe3ZhciBkPXRoaXMuY3JlYXRlRWxlbWVudE5TKCIiLCJHRVRfSU1BR0UiKTtjLmFwcGVuZENoaWxkKGQpO3ZhciBlPXRoaXMuY3JlYXRlRWxlbWVudE5TKCIiLAoiUFJPUEVSVElFUyIpO2QuYXBwZW5kQ2hpbGQoZSk7YT1hLmdldF9pbWFnZS5wcm9wZXJ0aWVzO251bGwhPWEuZmVhdHVyZWNvb3Jkc3lzJiYoZD10aGlzLmNyZWF0ZUVsZW1lbnROUygiIiwiRkVBVFVSRUNPT1JEU1lTIiksZS5hcHBlbmRDaGlsZChkKSwwPT09YS5mZWF0dXJlY29vcmRzeXMuaWQ/ZC5zZXRBdHRyaWJ1dGUoInN0cmluZyIsYS5mZWF0dXJlY29vcmRzeXMuc3RyaW5nKTpkLnNldEF0dHJpYnV0ZSgiaWQiLGEuZmVhdHVyZWNvb3Jkc3lzLmlkKSk7bnVsbCE9YS5maWx0ZXJjb29yZHN5cyYmKGQ9dGhpcy5jcmVhdGVFbGVtZW50TlMoIiIsIkZJTFRFUkNPT1JEU1lTIiksZS5hcHBlbmRDaGlsZChkKSwwPT09YS5maWx0ZXJjb29yZHN5cy5pZD9kLnNldEF0dHJpYnV0ZSgic3RyaW5nIixhLmZpbHRlcmNvb3Jkc3lzLnN0cmluZyk6ZC5zZXRBdHRyaWJ1dGUoImlkIixhLmZpbHRlcmNvb3Jkc3lzLmlkKSk7bnVsbCE9YS5lbnZlbG9wZSYmKGQ9dGhpcy5jcmVhdGVFbGVtZW50TlMoIiIsCiJFTlZFTE9QRSIpLGUuYXBwZW5kQ2hpbGQoZCksZC5zZXRBdHRyaWJ1dGUoIm1pbngiLGEuZW52ZWxvcGUubWlueCksZC5zZXRBdHRyaWJ1dGUoIm1pbnkiLGEuZW52ZWxvcGUubWlueSksZC5zZXRBdHRyaWJ1dGUoIm1heHgiLGEuZW52ZWxvcGUubWF4eCksZC5zZXRBdHRyaWJ1dGUoIm1heHkiLGEuZW52ZWxvcGUubWF4eSkpO2Q9dGhpcy5jcmVhdGVFbGVtZW50TlMoIiIsIklNQUdFU0laRSIpO2UuYXBwZW5kQ2hpbGQoZCk7ZC5zZXRBdHRyaWJ1dGUoImhlaWdodCIsYS5pbWFnZXNpemUuaGVpZ2h0KTtkLnNldEF0dHJpYnV0ZSgid2lkdGgiLGEuaW1hZ2VzaXplLndpZHRoKTtpZihhLmltYWdlc2l6ZS5oZWlnaHQhPWEuaW1hZ2VzaXplLnByaW50aGVpZ2h0fHxhLmltYWdlc2l6ZS53aWR0aCE9YS5pbWFnZXNpemUucHJpbnR3aWR0aClkLnNldEF0dHJpYnV0ZSgicHJpbnRoZWlnaHQiLGEuaW1hZ2VzaXplLnByaW50aGVpZ2h0KSxkLnNldEFycnRpYnV0ZSgicHJpbnR3aWR0aCIsYS5pbWFnZXNpemUucHJpbnR3aWR0aCk7Cm51bGwhPWEuYmFja2dyb3VuZCYmKGQ9dGhpcy5jcmVhdGVFbGVtZW50TlMoIiIsIkJBQ0tHUk9VTkQiKSxlLmFwcGVuZENoaWxkKGQpLGQuc2V0QXR0cmlidXRlKCJjb2xvciIsYS5iYWNrZ3JvdW5kLmNvbG9yLnIrIiwiK2EuYmFja2dyb3VuZC5jb2xvci5nKyIsIithLmJhY2tncm91bmQuY29sb3IuYiksbnVsbCE9PWEuYmFja2dyb3VuZC50cmFuc2NvbG9yJiZkLnNldEF0dHJpYnV0ZSgidHJhbnNjb2xvciIsYS5iYWNrZ3JvdW5kLnRyYW5zY29sb3IucisiLCIrYS5iYWNrZ3JvdW5kLnRyYW5zY29sb3IuZysiLCIrYS5iYWNrZ3JvdW5kLnRyYW5zY29sb3IuYikpO2lmKG51bGwhPWEubGF5ZXJsaXN0JiYwPGEubGF5ZXJsaXN0Lmxlbmd0aClmb3IoZD10aGlzLmNyZWF0ZUVsZW1lbnROUygiIiwiTEFZRVJMSVNUIiksZS5hcHBlbmRDaGlsZChkKSxlPTA7ZTxhLmxheWVybGlzdC5sZW5ndGg7ZSsrKXt2YXIgZj10aGlzLmNyZWF0ZUVsZW1lbnROUygiIiwiTEFZRVJERUYiKTtkLmFwcGVuZENoaWxkKGYpOwpmLnNldEF0dHJpYnV0ZSgiaWQiLGEubGF5ZXJsaXN0W2VdLmlkKTtmLnNldEF0dHJpYnV0ZSgidmlzaWJsZSIsYS5sYXllcmxpc3RbZV0udmlzaWJsZSk7aWYoIm9iamVjdCI9PXR5cGVvZiBhLmxheWVybGlzdFtlXS5xdWVyeSl7dmFyIGc9YS5sYXllcmxpc3RbZV0ucXVlcnk7aWYoMD5nLndoZXJlLmxlbmd0aCljb250aW51ZTt2YXIgaD1udWxsLGg9ImJvb2xlYW4iPT10eXBlb2YgZy5zcGF0aWFsZmlsdGVyJiZnLnNwYXRpYWxmaWx0ZXI/dGhpcy5jcmVhdGVFbGVtZW50TlMoIiIsIlNQQVRJQUxRVUVSWSIpOnRoaXMuY3JlYXRlRWxlbWVudE5TKCIiLCJRVUVSWSIpO2guc2V0QXR0cmlidXRlKCJ3aGVyZSIsZy53aGVyZSk7Im51bWJlciI9PXR5cGVvZiBnLmFjY3VyYWN5JiYwPGcuYWNjdXJhY3kmJmguc2V0QXR0cmlidXRlKCJhY2N1cmFjeSIsZy5hY2N1cmFjeSk7Im51bWJlciI9PXR5cGVvZiBnLmZlYXR1cmVsaW1pdCYmMkUzPmcuZmVhdHVyZWxpbWl0JiZoLnNldEF0dHJpYnV0ZSgiZmVhdHVyZWxpbWl0IiwKZy5mZWF0dXJlbGltaXQpOyJzdHJpbmciPT10eXBlb2YgZy5zdWJmaWVsZHMmJiIjQUxMIyIhPWcuc3ViZmllbGRzJiZoLnNldEF0dHJpYnV0ZSgic3ViZmllbGRzIixnLnN1YmZpZWxkcyk7InN0cmluZyI9PXR5cGVvZiBnLmpvaW5leHByZXNzaW9uJiYwPGcuam9pbmV4cHJlc3Npb24ubGVuZ3RoJiZoLnNldEF0dHJpYnV0ZSgiam9pbmV4cHJlc3Npb24iLGcuam9pbmV4cHJlc3Npb24pOyJzdHJpbmciPT10eXBlb2YgZy5qb2ludGFibGVzJiYwPGcuam9pbnRhYmxlcy5sZW5ndGgmJmguc2V0QXR0cmlidXRlKCJqb2ludGFibGVzIixnLmpvaW50YWJsZXMpO2YuYXBwZW5kQ2hpbGQoaCl9Im9iamVjdCI9PXR5cGVvZiBhLmxheWVybGlzdFtlXS5yZW5kZXJlciYmdGhpcy5hZGRSZW5kZXJlcihmLGEubGF5ZXJsaXN0W2VdLnJlbmRlcmVyKX19ZWxzZSBudWxsIT1hLmdldF9mZWF0dXJlJiYoZD10aGlzLmNyZWF0ZUVsZW1lbnROUygiIiwiR0VUX0ZFQVRVUkVTIiksZC5zZXRBdHRyaWJ1dGUoIm91dHB1dG1vZGUiLAoibmV3eG1sIiksZC5zZXRBdHRyaWJ1dGUoImNoZWNrZXNjIiwidHJ1ZSIpLGEuZ2V0X2ZlYXR1cmUuZ2VvbWV0cnk/ZC5zZXRBdHRyaWJ1dGUoImdlb21ldHJ5IixhLmdldF9mZWF0dXJlLmdlb21ldHJ5KTpkLnNldEF0dHJpYnV0ZSgiZ2VvbWV0cnkiLCJmYWxzZSIpLGEuZ2V0X2ZlYXR1cmUuY29tcGFjdCYmZC5zZXRBdHRyaWJ1dGUoImNvbXBhY3QiLGEuZ2V0X2ZlYXR1cmUuY29tcGFjdCksIm51bWJlciI9PWEuZ2V0X2ZlYXR1cmUuZmVhdHVyZWxpbWl0JiZkLnNldEF0dHJpYnV0ZSgiZmVhdHVyZWxpbWl0IixhLmdldF9mZWF0dXJlLmZlYXR1cmVsaW1pdCksZC5zZXRBdHRyaWJ1dGUoImdsb2JhbGVudmVsb3BlIiwidHJ1ZSIpLGMuYXBwZW5kQ2hpbGQoZCksbnVsbCE9YS5nZXRfZmVhdHVyZS5sYXllciYmMDxhLmdldF9mZWF0dXJlLmxheWVyLmxlbmd0aCYmKGU9dGhpcy5jcmVhdGVFbGVtZW50TlMoIiIsIkxBWUVSIiksZS5zZXRBdHRyaWJ1dGUoImlkIixhLmdldF9mZWF0dXJlLmxheWVyKSwKZC5hcHBlbmRDaGlsZChlKSksYT1hLmdldF9mZWF0dXJlLnF1ZXJ5LG51bGwhPWEmJihlPW51bGwsZT1hLmlzc3BhdGlhbD90aGlzLmNyZWF0ZUVsZW1lbnROUygiIiwiU1BBVElBTFFVRVJZIik6dGhpcy5jcmVhdGVFbGVtZW50TlMoIiIsIlFVRVJZIiksZC5hcHBlbmRDaGlsZChlKSwibnVtYmVyIj09dHlwZW9mIGEuYWNjdXJhY3kmJmUuc2V0QXR0cmlidXRlKCJhY2N1cmFjeSIsYS5hY2N1cmFjeSksbnVsbCE9YS5mZWF0dXJlY29vcmRzeXMmJihkPXRoaXMuY3JlYXRlRWxlbWVudE5TKCIiLCJGRUFUVVJFQ09PUkRTWVMiKSwwPT1hLmZlYXR1cmVjb29yZHN5cy5pZD9kLnNldEF0dHJpYnV0ZSgic3RyaW5nIixhLmZlYXR1cmVjb29yZHN5cy5zdHJpbmcpOmQuc2V0QXR0cmlidXRlKCJpZCIsYS5mZWF0dXJlY29vcmRzeXMuaWQpLGUuYXBwZW5kQ2hpbGQoZCkpLG51bGwhPWEuZmlsdGVyY29vcmRzeXMmJihkPXRoaXMuY3JlYXRlRWxlbWVudE5TKCIiLCJGSUxURVJDT09SRFNZUyIpLAowPT09YS5maWx0ZXJjb29yZHN5cy5pZD9kLnNldEF0dHJpYnV0ZSgic3RyaW5nIixhLmZpbHRlcmNvb3Jkc3lzLnN0cmluZyk6ZC5zZXRBdHRyaWJ1dGUoImlkIixhLmZpbHRlcmNvb3Jkc3lzLmlkKSxlLmFwcGVuZENoaWxkKGQpKSwwPGEuYnVmZmVyJiYoZD10aGlzLmNyZWF0ZUVsZW1lbnROUygiIiwiQlVGRkVSIiksZC5zZXRBdHRyaWJ1dGUoImRpc3RhbmNlIixhLmJ1ZmZlciksZS5hcHBlbmRDaGlsZChkKSksYS5pc3NwYXRpYWwmJihkPXRoaXMuY3JlYXRlRWxlbWVudE5TKCIiLCJTUEFUSUFMRklMVEVSIiksZC5zZXRBdHRyaWJ1dGUoInJlbGF0aW9uIixhLnNwYXRpYWxmaWx0ZXIucmVsYXRpb24pLGUuYXBwZW5kQ2hpbGQoZCksYS5zcGF0aWFsZmlsdGVyLmVudmVsb3BlPyhmPXRoaXMuY3JlYXRlRWxlbWVudE5TKCIiLCJFTlZFTE9QRSIpLGYuc2V0QXR0cmlidXRlKCJtaW54IixhLnNwYXRpYWxmaWx0ZXIuZW52ZWxvcGUubWlueCksZi5zZXRBdHRyaWJ1dGUoIm1pbnkiLGEuc3BhdGlhbGZpbHRlci5lbnZlbG9wZS5taW55KSwKZi5zZXRBdHRyaWJ1dGUoIm1heHgiLGEuc3BhdGlhbGZpbHRlci5lbnZlbG9wZS5tYXh4KSxmLnNldEF0dHJpYnV0ZSgibWF4eSIsYS5zcGF0aWFsZmlsdGVyLmVudmVsb3BlLm1heHkpLGQuYXBwZW5kQ2hpbGQoZikpOiJvYmplY3QiPT10eXBlb2YgYS5zcGF0aWFsZmlsdGVyLnBvbHlnb24mJmQuYXBwZW5kQ2hpbGQodGhpcy53cml0ZVBvbHlnb25HZW9tZXRyeShhLnNwYXRpYWxmaWx0ZXIucG9seWdvbikpKSxudWxsIT1hLndoZXJlJiYwPGEud2hlcmUubGVuZ3RoJiZlLnNldEF0dHJpYnV0ZSgid2hlcmUiLGEud2hlcmUpKSk7Yi5hcHBlbmRDaGlsZChjKTtyZXR1cm4gT3BlbkxheWVycy5Gb3JtYXQuWE1MLnByb3RvdHlwZS53cml0ZS5hcHBseSh0aGlzLFtiXSl9LGFkZEdyb3VwUmVuZGVyZXI6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmNyZWF0ZUVsZW1lbnROUygiIiwiR1JPVVBSRU5ERVJFUiIpO2EuYXBwZW5kQ2hpbGQoYyk7Zm9yKHZhciBkPTA7ZDxiLmxlbmd0aDtkKyspdGhpcy5hZGRSZW5kZXJlcihjLApiW2RdKX0sYWRkUmVuZGVyZXI6ZnVuY3Rpb24oYSxiKXtpZihPcGVuTGF5ZXJzLlV0aWwuaXNBcnJheShiKSl0aGlzLmFkZEdyb3VwUmVuZGVyZXIoYSxiKTtlbHNle3ZhciBjPXRoaXMuY3JlYXRlRWxlbWVudE5TKCIiLGIudHlwZS50b1VwcGVyQ2FzZSgpKyJSRU5ERVJFUiIpO2EuYXBwZW5kQ2hpbGQoYyk7IlZBTFVFTUFQUkVOREVSRVIiPT1jLnRhZ05hbWU/dGhpcy5hZGRWYWx1ZU1hcFJlbmRlcmVyKGMsYik6IlZBTFVFTUFQTEFCRUxSRU5ERVJFUiI9PWMudGFnTmFtZT90aGlzLmFkZFZhbHVlTWFwTGFiZWxSZW5kZXJlcihjLGIpOiJTSU1QTEVMQUJFTFJFTkRFUkVSIj09Yy50YWdOYW1lP3RoaXMuYWRkU2ltcGxlTGFiZWxSZW5kZXJlcihjLGIpOiJTQ0FMRURFUEVOREVOVFJFTkRFUkVSIj09Yy50YWdOYW1lJiZ0aGlzLmFkZFNjYWxlRGVwZW5kZW50UmVuZGVyZXIoYyxiKX19LGFkZFNjYWxlRGVwZW5kZW50UmVuZGVyZXI6ZnVuY3Rpb24oYSxiKXsic3RyaW5nIiE9dHlwZW9mIGIubG93ZXImJgoibnVtYmVyIiE9dHlwZW9mIGIubG93ZXJ8fGEuc2V0QXR0cmlidXRlKCJsb3dlciIsYi5sb3dlcik7InN0cmluZyIhPXR5cGVvZiBiLnVwcGVyJiYibnVtYmVyIiE9dHlwZW9mIGIudXBwZXJ8fGEuc2V0QXR0cmlidXRlKCJ1cHBlciIsYi51cHBlcik7dGhpcy5hZGRSZW5kZXJlcihhLGIucmVuZGVyZXIpfSxhZGRWYWx1ZU1hcExhYmVsUmVuZGVyZXI6ZnVuY3Rpb24oYSxiKXthLnNldEF0dHJpYnV0ZSgibG9va3VwZmllbGQiLGIubG9va3VwZmllbGQpO2Euc2V0QXR0cmlidXRlKCJsYWJlbGZpZWxkIixiLmxhYmVsZmllbGQpO2lmKCJvYmplY3QiPT10eXBlb2YgYi5leGFjdHMpZm9yKHZhciBjPTAsZD1iLmV4YWN0cy5sZW5ndGg7YzxkO2MrKyl7dmFyIGU9Yi5leGFjdHNbY10sZj10aGlzLmNyZWF0ZUVsZW1lbnROUygiIiwiRVhBQ1QiKTsic3RyaW5nIj09dHlwZW9mIGUudmFsdWUmJmYuc2V0QXR0cmlidXRlKCJ2YWx1ZSIsZS52YWx1ZSk7InN0cmluZyI9PXR5cGVvZiBlLmxhYmVsJiYKZi5zZXRBdHRyaWJ1dGUoImxhYmVsIixlLmxhYmVsKTsic3RyaW5nIj09dHlwZW9mIGUubWV0aG9kJiZmLnNldEF0dHJpYnV0ZSgibWV0aG9kIixlLm1ldGhvZCk7YS5hcHBlbmRDaGlsZChmKTtpZigib2JqZWN0Ij09dHlwZW9mIGUuc3ltYm9sKXt2YXIgZz1udWxsOyJ0ZXh0Ij09ZS5zeW1ib2wudHlwZSYmKGc9dGhpcy5jcmVhdGVFbGVtZW50TlMoIiIsIlRFWFRTWU1CT0wiKSk7aWYobnVsbCE9Zyl7Zm9yKHZhciBoPXRoaXMuZm9udFN0eWxlS2V5cyxrPTAsbD1oLmxlbmd0aDtrPGw7aysrKXt2YXIgbT1oW2tdO2Uuc3ltYm9sW21dJiZnLnNldEF0dHJpYnV0ZShtLGUuc3ltYm9sW21dKX1mLmFwcGVuZENoaWxkKGcpfX19fSxhZGRWYWx1ZU1hcFJlbmRlcmVyOmZ1bmN0aW9uKGEsYil7YS5zZXRBdHRyaWJ1dGUoImxvb2t1cGZpZWxkIixiLmxvb2t1cGZpZWxkKTtpZigib2JqZWN0Ij09dHlwZW9mIGIucmFuZ2VzKWZvcih2YXIgYz0wLGQ9Yi5yYW5nZXMubGVuZ3RoO2M8ZDtjKyspe3ZhciBlPQpiLnJhbmdlc1tjXSxmPXRoaXMuY3JlYXRlRWxlbWVudE5TKCIiLCJSQU5HRSIpO2Yuc2V0QXR0cmlidXRlKCJsb3dlciIsZS5sb3dlcik7Zi5zZXRBdHRyaWJ1dGUoInVwcGVyIixlLnVwcGVyKTthLmFwcGVuZENoaWxkKGYpO2lmKCJvYmplY3QiPT10eXBlb2YgZS5zeW1ib2wpe3ZhciBnPW51bGw7InNpbXBsZXBvbHlnb24iPT1lLnN5bWJvbC50eXBlJiYoZz10aGlzLmNyZWF0ZUVsZW1lbnROUygiIiwiU0lNUExFUE9MWUdPTlNZTUJPTCIpKTtudWxsIT1nJiYoInN0cmluZyI9PXR5cGVvZiBlLnN5bWJvbC5ib3VuZGFyeWNvbG9yJiZnLnNldEF0dHJpYnV0ZSgiYm91bmRhcnljb2xvciIsZS5zeW1ib2wuYm91bmRhcnljb2xvciksInN0cmluZyI9PXR5cGVvZiBlLnN5bWJvbC5maWxsY29sb3ImJmcuc2V0QXR0cmlidXRlKCJmaWxsY29sb3IiLGUuc3ltYm9sLmZpbGxjb2xvciksIm51bWJlciI9PXR5cGVvZiBlLnN5bWJvbC5maWxsdHJhbnNwYXJlbmN5JiZnLnNldEF0dHJpYnV0ZSgiZmlsbHRyYW5zcGFyZW5jeSIsCmUuc3ltYm9sLmZpbGx0cmFuc3BhcmVuY3kpLGYuYXBwZW5kQ2hpbGQoZykpfX1lbHNlIGlmKCJvYmplY3QiPT10eXBlb2YgYi5leGFjdHMpZm9yKGM9MCxkPWIuZXhhY3RzLmxlbmd0aDtjPGQ7YysrKWU9Yi5leGFjdHNbY10sZj10aGlzLmNyZWF0ZUVsZW1lbnROUygiIiwiRVhBQ1QiKSwic3RyaW5nIj09dHlwZW9mIGUudmFsdWUmJmYuc2V0QXR0cmlidXRlKCJ2YWx1ZSIsZS52YWx1ZSksInN0cmluZyI9PXR5cGVvZiBlLmxhYmVsJiZmLnNldEF0dHJpYnV0ZSgibGFiZWwiLGUubGFiZWwpLCJzdHJpbmciPT10eXBlb2YgZS5tZXRob2QmJmYuc2V0QXR0cmlidXRlKCJtZXRob2QiLGUubWV0aG9kKSxhLmFwcGVuZENoaWxkKGYpLCJvYmplY3QiPT10eXBlb2YgZS5zeW1ib2wmJihnPW51bGwsInNpbXBsZW1hcmtlciI9PWUuc3ltYm9sLnR5cGUmJihnPXRoaXMuY3JlYXRlRWxlbWVudE5TKCIiLCJTSU1QTEVNQVJLRVJTWU1CT0wiKSksbnVsbCE9ZyYmKCJzdHJpbmciPT10eXBlb2YgZS5zeW1ib2wuYW50aWFsaWFzaW5nJiYKZy5zZXRBdHRyaWJ1dGUoImFudGlhbGlhc2luZyIsZS5zeW1ib2wuYW50aWFsaWFzaW5nKSwic3RyaW5nIj09dHlwZW9mIGUuc3ltYm9sLmNvbG9yJiZnLnNldEF0dHJpYnV0ZSgiY29sb3IiLGUuc3ltYm9sLmNvbG9yKSwic3RyaW5nIj09dHlwZW9mIGUuc3ltYm9sLm91dGxpbmUmJmcuc2V0QXR0cmlidXRlKCJvdXRsaW5lIixlLnN5bWJvbC5vdXRsaW5lKSwic3RyaW5nIj09dHlwZW9mIGUuc3ltYm9sLm92ZXJsYXAmJmcuc2V0QXR0cmlidXRlKCJvdmVybGFwIixlLnN5bWJvbC5vdmVybGFwKSwic3RyaW5nIj09dHlwZW9mIGUuc3ltYm9sLnNoYWRvdyYmZy5zZXRBdHRyaWJ1dGUoInNoYWRvdyIsZS5zeW1ib2wuc2hhZG93KSwibnVtYmVyIj09dHlwZW9mIGUuc3ltYm9sLnRyYW5zcGFyZW5jeSYmZy5zZXRBdHRyaWJ1dGUoInRyYW5zcGFyZW5jeSIsZS5zeW1ib2wudHJhbnNwYXJlbmN5KSwic3RyaW5nIj09dHlwZW9mIGUuc3ltYm9sLnVzZWNlbnRyb2lkJiZnLnNldEF0dHJpYnV0ZSgidXNlY2VudHJvaWQiLAplLnN5bWJvbC51c2VjZW50cm9pZCksIm51bWJlciI9PXR5cGVvZiBlLnN5bWJvbC53aWR0aCYmZy5zZXRBdHRyaWJ1dGUoIndpZHRoIixlLnN5bWJvbC53aWR0aCksZi5hcHBlbmRDaGlsZChnKSkpfSxhZGRTaW1wbGVMYWJlbFJlbmRlcmVyOmZ1bmN0aW9uKGEsYil7YS5zZXRBdHRyaWJ1dGUoImZpZWxkIixiLmZpZWxkKTtmb3IodmFyIGM9ImZlYXR1cmV3ZWlnaHQgaG93bWFueWxhYmVscyBsYWJlbGJ1ZmZlcnJhdGlvIGxhYmVscHJpb3JpdGllcyBsYWJlbHdlaWdodCBsaW5lbGFiZWxwb3NpdGlvbiByb3RhdGlvbmFsYW5nbGVzIi5zcGxpdCgiICIpLGQ9MCxlPWMubGVuZ3RoO2Q8ZTtkKyspe3ZhciBmPWNbZF07YltmXSYmYS5zZXRBdHRyaWJ1dGUoZixiW2ZdKX1pZigidGV4dCI9PWIuc3ltYm9sLnR5cGUpe3ZhciBnPWIuc3ltYm9sLGg9dGhpcy5jcmVhdGVFbGVtZW50TlMoIiIsIlRFWFRTWU1CT0wiKTthLmFwcGVuZENoaWxkKGgpO2M9dGhpcy5mb250U3R5bGVLZXlzO2Q9MDsKZm9yKGU9Yy5sZW5ndGg7ZDxlO2QrKylmPWNbZF0sZ1tmXSYmaC5zZXRBdHRyaWJ1dGUoZixiW2ZdKX19LHdyaXRlUG9seWdvbkdlb21ldHJ5OmZ1bmN0aW9uKGEpe2lmKCEoYSBpbnN0YW5jZW9mIE9wZW5MYXllcnMuR2VvbWV0cnkuUG9seWdvbikpdGhyb3d7bWVzc2FnZToiQ2Fubm90IHdyaXRlIHBvbHlnb24gZ2VvbWV0cnkgdG8gQXJjWE1MIHdpdGggYW4gIithLkNMQVNTX05BTUUrIiBvYmplY3QuIixnZW9tZXRyeTphfTtmb3IodmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlMoIiIsIlBPTFlHT04iKSxjPTAsZD1hLmNvbXBvbmVudHMubGVuZ3RoO2M8ZDtjKyspe2Zvcih2YXIgZT1hLmNvbXBvbmVudHNbY10sZj10aGlzLmNyZWF0ZUVsZW1lbnROUygiIiwiUklORyIpLGc9MCxoPWUuY29tcG9uZW50cy5sZW5ndGg7ZzxoO2crKyl7dmFyIGs9ZS5jb21wb25lbnRzW2ddLGw9dGhpcy5jcmVhdGVFbGVtZW50TlMoIiIsIlBPSU5UIik7bC5zZXRBdHRyaWJ1dGUoIngiLGsueCk7bC5zZXRBdHRyaWJ1dGUoInkiLAprLnkpO2YuYXBwZW5kQ2hpbGQobCl9Yi5hcHBlbmRDaGlsZChmKX1yZXR1cm4gYn0scGFyc2VSZXNwb25zZTpmdW5jdGlvbihhKXsic3RyaW5nIj09dHlwZW9mIGEmJihhPShuZXcgT3BlbkxheWVycy5Gb3JtYXQuWE1MKS5yZWFkKGEpKTt2YXIgYj1uZXcgT3BlbkxheWVycy5Gb3JtYXQuQXJjWE1MLlJlc3BvbnNlLGM9YS5nZXRFbGVtZW50c0J5VGFnTmFtZSgiRVJST1IiKTtpZihudWxsIT1jJiYwPGMubGVuZ3RoKWIuZXJyb3I9dGhpcy5nZXRDaGlsZFZhbHVlKGMsIlVua25vd24gZXJyb3IuIik7ZWxzZXtjPWEuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIlJFU1BPTlNFIik7aWYobnVsbD09Y3x8MD09Yy5sZW5ndGgpcmV0dXJuIGIuZXJyb3I9Ik5vIFJFU1BPTlNFIHRhZyBmb3VuZCBpbiBBcmNYTUwgcmVzcG9uc2UuIixiO3ZhciBkPWNbMF0uZmlyc3RDaGlsZC5ub2RlTmFtZTsiI3RleHQiPT1kJiYoZD1jWzBdLmZpcnN0Q2hpbGQubmV4dFNpYmxpbmcubm9kZU5hbWUpO2lmKCJJTUFHRSI9PQpkKWM9YS5nZXRFbGVtZW50c0J5VGFnTmFtZSgiRU5WRUxPUEUiKSxhPWEuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIk9VVFBVVCIpLG51bGw9PWN8fDA9PWMubGVuZ3RoP2IuZXJyb3I9Ik5vIEVOVkVMT1BFIHRhZyBmb3VuZCBpbiBBcmNYTUwgcmVzcG9uc2UuIjpudWxsPT1hfHwwPT1hLmxlbmd0aD9iLmVycm9yPSJObyBPVVRQVVQgdGFnIGZvdW5kIGluIEFyY1hNTCByZXNwb25zZS4iOihjPXRoaXMucGFyc2VBdHRyaWJ1dGVzKGNbMF0pLGQ9dGhpcy5wYXJzZUF0dHJpYnV0ZXMoYVswXSksYi5pbWFnZT0ic3RyaW5nIj09dHlwZW9mIGQudHlwZT97ZW52ZWxvcGU6YyxvdXRwdXQ6e3R5cGU6ZC50eXBlLGRhdGE6dGhpcy5nZXRDaGlsZFZhbHVlKGFbMF0pfX06e2VudmVsb3BlOmMsb3V0cHV0OmR9KTtlbHNlIGlmKCJGRUFUVVJFUyI9PWQpe2lmKGE9Y1swXS5nZXRFbGVtZW50c0J5VGFnTmFtZSgiRkVBVFVSRVMiKSxjPWFbMF0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoIkZFQVRVUkVDT1VOVCIpLApiLmZlYXR1cmVzLmZlYXR1cmVjb3VudD1jWzBdLmdldEF0dHJpYnV0ZSgiY291bnQiKSwwPGIuZmVhdHVyZXMuZmVhdHVyZWNvdW50KWZvcihjPWFbMF0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoIkVOVkVMT1BFIiksYi5mZWF0dXJlcy5lbnZlbG9wZT10aGlzLnBhcnNlQXR0cmlidXRlcyhjWzBdLCJudW1iZXIiKSxhPWFbMF0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoIkZFQVRVUkUiKSxjPTA7YzxhLmxlbmd0aDtjKyspe2Zvcih2YXIgZD1uZXcgT3BlbkxheWVycy5GZWF0dXJlLlZlY3RvcixlPWFbY10uZ2V0RWxlbWVudHNCeVRhZ05hbWUoIkZJRUxEIiksZj0wO2Y8ZS5sZW5ndGg7ZisrKXt2YXIgZz1lW2ZdLmdldEF0dHJpYnV0ZSgibmFtZSIpLGg9ZVtmXS5nZXRBdHRyaWJ1dGUoInZhbHVlIik7ZC5hdHRyaWJ1dGVzW2ddPWh9ZT1hW2NdLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJQT0xZR09OIik7aWYoMDxlLmxlbmd0aCl7ZT1lWzBdLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJSSU5HIik7CmY9W107Zm9yKGc9MDtnPGUubGVuZ3RoO2crKyl7aD1bXTtoLnB1c2godGhpcy5wYXJzZVBvaW50R2VvbWV0cnkoZVtnXSkpO2Zvcih2YXIgaz1lW2ddLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJIT0xFIiksbD0wO2w8ay5sZW5ndGg7bCsrKWgucHVzaCh0aGlzLnBhcnNlUG9pbnRHZW9tZXRyeShrW2xdKSk7Zi5wdXNoKG5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvbHlnb24oaCkpfWQuZ2VvbWV0cnk9MT09Zi5sZW5ndGg/ZlswXTpuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5NdWx0aVBvbHlnb24oZil9Yi5mZWF0dXJlcy5mZWF0dXJlLnB1c2goZCl9fWVsc2UgYi5lcnJvcj0iVW5pZGVudGlmaWVkIHJlc3BvbnNlIHR5cGUuIn1yZXR1cm4gYn0scGFyc2VBdHRyaWJ1dGVzOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPXt9LGQ9MDtkPGEuYXR0cmlidXRlcy5sZW5ndGg7ZCsrKWNbYS5hdHRyaWJ1dGVzW2RdLm5vZGVOYW1lXT0ibnVtYmVyIj09Yj9wYXJzZUZsb2F0KGEuYXR0cmlidXRlc1tkXS5ub2RlVmFsdWUpOgphLmF0dHJpYnV0ZXNbZF0ubm9kZVZhbHVlO3JldHVybiBjfSxwYXJzZVBvaW50R2VvbWV0cnk6ZnVuY3Rpb24oYSl7dmFyIGI9W10sYz1hLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJDT09SRFMiKTtpZigwPGMubGVuZ3RoKWZvcihhPXRoaXMuZ2V0Q2hpbGRWYWx1ZShjWzBdKSxhPWEuc3BsaXQoLzsvKSxjPTA7YzxhLmxlbmd0aDtjKyspe3ZhciBkPWFbY10uc3BsaXQoLyAvKTtiLnB1c2gobmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoZFswXSxkWzFdKSl9ZWxzZSBpZihhPWEuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIlBPSU5UIiksMDxhLmxlbmd0aClmb3IoYz0wO2M8YS5sZW5ndGg7YysrKWIucHVzaChuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludChwYXJzZUZsb2F0KGFbY10uZ2V0QXR0cmlidXRlKCJ4IikpLHBhcnNlRmxvYXQoYVtjXS5nZXRBdHRyaWJ1dGUoInkiKSkpKTtyZXR1cm4gbmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuTGluZWFyUmluZyhiKX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Gb3JtYXQuQXJjWE1MIn0pOwpPcGVuTGF5ZXJzLkZvcm1hdC5BcmNYTUwuUmVxdWVzdD1PcGVuTGF5ZXJzLkNsYXNzKHtpbml0aWFsaXplOmZ1bmN0aW9uKGEpe3JldHVybiBPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHRoaXMse2dldF9pbWFnZTp7cHJvcGVydGllczp7YmFja2dyb3VuZDpudWxsLGRyYXc6ITAsZW52ZWxvcGU6e21pbng6MCxtaW55OjAsbWF4eDowLG1heHk6MH0sZmVhdHVyZWNvb3Jkc3lzOntpZDowLHN0cmluZzoiIixkYXR1bXRyYW5zZm9ybWlkOjAsZGF0dW10cmFuc2Zvcm1zdHJpbmc6IiJ9LGZpbHRlcmNvb3Jkc3lzOntpZDowLHN0cmluZzoiIixkYXR1bXRyYW5zZm9ybWlkOjAsZGF0dW10cmFuc2Zvcm1zdHJpbmc6IiJ9LGltYWdlc2l6ZTp7aGVpZ2h0OjAsd2lkdGg6MCxkcGk6OTYscHJpbnRoZWlnaHQ6MCxwcmludHdpZHRoOjAsc2NhbGVzeW1ib2xzOiExfSxsYXllcmxpc3Q6W10sb3V0cHV0OntiYXNldXJsOiIiLGxlZ2VuZGJhc2V1cmw6IiIsbGVnZW5kbmFtZToiIixsZWdlbmRwYXRoOiIiLApsZWdlbmR1cmw6IiIsbmFtZToiIixwYXRoOiIiLHR5cGU6ImpwZyIsdXJsOiIifX19LGdldF9mZWF0dXJlOntsYXllcjoiIixxdWVyeTp7aXNzcGF0aWFsOiExLGZlYXR1cmVjb29yZHN5czp7aWQ6MCxzdHJpbmc6IiIsZGF0dW10cmFuc2Zvcm1pZDowLGRhdHVtdHJhbnNmb3Jtc3RyaW5nOiIifSxmaWx0ZXJjb29yZHN5czp7aWQ6MCxzdHJpbmc6IiIsZGF0dW10cmFuc2Zvcm1pZDowLGRhdHVtdHJhbnNmb3Jtc3RyaW5nOiIifSxidWZmZXI6MCx3aGVyZToiIixzcGF0aWFsZmlsdGVyOntyZWxhdGlvbjoiZW52ZWxvcGVfaW50ZXJzZWN0aW9uIixlbnZlbG9wZTpudWxsfX19LGVudmlyb25tZW50OntzZXBhcmF0b3JzOntjczoiICIsdHM6IjsifX0sbGF5ZXI6W10sd29ya3NwYWNlczpbXX0pfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkZvcm1hdC5BcmNYTUwuUmVxdWVzdCJ9KTsKT3BlbkxheWVycy5Gb3JtYXQuQXJjWE1MLlJlc3BvbnNlPU9wZW5MYXllcnMuQ2xhc3Moe2luaXRpYWxpemU6ZnVuY3Rpb24oYSl7cmV0dXJuIE9wZW5MYXllcnMuVXRpbC5leHRlbmQodGhpcyx7aW1hZ2U6e2VudmVsb3BlOm51bGwsb3V0cHV0OiIifSxmZWF0dXJlczp7ZmVhdHVyZWNvdW50OjAsZW52ZWxvcGU6bnVsbCxmZWF0dXJlOltdfSxlcnJvcjoiIn0pfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkZvcm1hdC5BcmNYTUwuUmVzcG9uc2UifSk7KGZ1bmN0aW9uKCl7ZnVuY3Rpb24gYSgpe3RoaXMuX29iamVjdD1mJiYhaz9uZXcgZjpuZXcgd2luZG93LkFjdGl2ZVhPYmplY3QoIk1pY3Jvc29mdC5YTUxIVFRQIik7dGhpcy5fbGlzdGVuZXJzPVtdfWZ1bmN0aW9uIGIoKXtyZXR1cm4gbmV3IGF9ZnVuY3Rpb24gYyhhKXtiLm9ucmVhZHlzdGF0ZWNoYW5nZSYmYi5vbnJlYWR5c3RhdGVjaGFuZ2UuYXBwbHkoYSk7YS5kaXNwYXRjaEV2ZW50KHt0eXBlOiJyZWFkeXN0YXRlY2hhbmdlIixidWJibGVzOiExLGNhbmNlbGFibGU6ITEsdGltZVN0YW1wOm5ldyBEYXRlKzB9KX1mdW5jdGlvbiBkKGEpe3RyeXthLnJlc3BvbnNlVGV4dD1hLl9vYmplY3QucmVzcG9uc2VUZXh0fWNhdGNoKGIpe310cnl7dmFyIGM7dmFyIGQ9YS5fb2JqZWN0LGU9ZC5yZXNwb25zZVhNTCxmPWQucmVzcG9uc2VUZXh0O2gmJihmJiZlJiYhZS5kb2N1bWVudEVsZW1lbnQmJmQuZ2V0UmVzcG9uc2VIZWFkZXIoIkNvbnRlbnQtVHlwZSIpLm1hdGNoKC9bXlwvXStcL1teXCtdK1wreG1sLykpJiYKKGU9bmV3IHdpbmRvdy5BY3RpdmVYT2JqZWN0KCJNaWNyb3NvZnQuWE1MRE9NIiksZS5hc3luYz0hMSxlLnZhbGlkYXRlT25QYXJzZT0hMSxlLmxvYWRYTUwoZikpO2M9ZSYmKGgmJjAhPWUucGFyc2VFcnJvcnx8IWUuZG9jdW1lbnRFbGVtZW50fHxlLmRvY3VtZW50RWxlbWVudCYmInBhcnNlcmVycm9yIj09ZS5kb2N1bWVudEVsZW1lbnQudGFnTmFtZSk/bnVsbDplO2EucmVzcG9uc2VYTUw9Y31jYXRjaChnKXt9dHJ5e2Euc3RhdHVzPWEuX29iamVjdC5zdGF0dXN9Y2F0Y2goayl7fXRyeXthLnN0YXR1c1RleHQ9YS5fb2JqZWN0LnN0YXR1c1RleHR9Y2F0Y2godSl7fX1mdW5jdGlvbiBlKGEpe2EuX29iamVjdC5vbnJlYWR5c3RhdGVjaGFuZ2U9bmV3IHdpbmRvdy5GdW5jdGlvbn12YXIgZj13aW5kb3cuWE1MSHR0cFJlcXVlc3QsZz0hIXdpbmRvdy5jb250cm9sbGVycyxoPXdpbmRvdy5kb2N1bWVudC5hbGwmJiF3aW5kb3cub3BlcmEsaz1oJiZ3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvTVNJRSA3LjAvKTsKYi5wcm90b3R5cGU9YS5wcm90b3R5cGU7ZyYmZi53cmFwcGVkJiYoYi53cmFwcGVkPWYud3JhcHBlZCk7Yi5VTlNFTlQ9MDtiLk9QRU5FRD0xO2IuSEVBREVSU19SRUNFSVZFRD0yO2IuTE9BRElORz0zO2IuRE9ORT00O2IucHJvdG90eXBlLnJlYWR5U3RhdGU9Yi5VTlNFTlQ7Yi5wcm90b3R5cGUucmVzcG9uc2VUZXh0PSIiO2IucHJvdG90eXBlLnJlc3BvbnNlWE1MPW51bGw7Yi5wcm90b3R5cGUuc3RhdHVzPTA7Yi5wcm90b3R5cGUuc3RhdHVzVGV4dD0iIjtiLnByb3RvdHlwZS5wcmlvcml0eT0iTk9STUFMIjtiLnByb3RvdHlwZS5vbnJlYWR5c3RhdGVjaGFuZ2U9bnVsbDtiLm9ucmVhZHlzdGF0ZWNoYW5nZT1udWxsO2Iub25vcGVuPW51bGw7Yi5vbnNlbmQ9bnVsbDtiLm9uYWJvcnQ9bnVsbDtiLnByb3RvdHlwZS5vcGVuPWZ1bmN0aW9uKGEsZixrLHAscSl7ZGVsZXRlIHRoaXMuX2hlYWRlcnM7Mz5hcmd1bWVudHMubGVuZ3RoJiYoaz0hMCk7dGhpcy5fYXN5bmM9azt2YXIgcj10aGlzLApzPXRoaXMucmVhZHlTdGF0ZSx0O2gmJmsmJih0PWZ1bmN0aW9uKCl7cyE9Yi5ET05FJiYoZShyKSxyLmFib3J0KCkpfSx3aW5kb3cuYXR0YWNoRXZlbnQoIm9udW5sb2FkIix0KSk7Yi5vbm9wZW4mJmIub25vcGVuLmFwcGx5KHRoaXMsYXJndW1lbnRzKTs0PGFyZ3VtZW50cy5sZW5ndGg/dGhpcy5fb2JqZWN0Lm9wZW4oYSxmLGsscCxxKTozPGFyZ3VtZW50cy5sZW5ndGg/dGhpcy5fb2JqZWN0Lm9wZW4oYSxmLGsscCk6dGhpcy5fb2JqZWN0Lm9wZW4oYSxmLGspO3RoaXMucmVhZHlTdGF0ZT1iLk9QRU5FRDtjKHRoaXMpO3RoaXMuX29iamVjdC5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKXtpZighZ3x8aylyLnJlYWR5U3RhdGU9ci5fb2JqZWN0LnJlYWR5U3RhdGUsZChyKSxyLl9hYm9ydGVkP3IucmVhZHlTdGF0ZT1iLlVOU0VOVDooci5yZWFkeVN0YXRlPT1iLkRPTkUmJihkZWxldGUgci5fZGF0YSxlKHIpLGgmJmsmJndpbmRvdy5kZXRhY2hFdmVudCgib251bmxvYWQiLHQpKSwKcyE9ci5yZWFkeVN0YXRlJiZjKHIpLHM9ci5yZWFkeVN0YXRlKX19O2IucHJvdG90eXBlLnNlbmQ9ZnVuY3Rpb24oYSl7Yi5vbnNlbmQmJmIub25zZW5kLmFwcGx5KHRoaXMsYXJndW1lbnRzKTthcmd1bWVudHMubGVuZ3RofHwoYT1udWxsKTthJiZhLm5vZGVUeXBlJiYoYT13aW5kb3cuWE1MU2VyaWFsaXplcj8obmV3IHdpbmRvdy5YTUxTZXJpYWxpemVyKS5zZXJpYWxpemVUb1N0cmluZyhhKTphLnhtbCx0aGlzLl9oZWFkZXJzWyJDb250ZW50LVR5cGUiXXx8dGhpcy5fb2JqZWN0LnNldFJlcXVlc3RIZWFkZXIoIkNvbnRlbnQtVHlwZSIsImFwcGxpY2F0aW9uL3htbCIpKTt0aGlzLl9kYXRhPWE7YTppZih0aGlzLl9vYmplY3Quc2VuZCh0aGlzLl9kYXRhKSxnJiYhdGhpcy5fYXN5bmMpZm9yKHRoaXMucmVhZHlTdGF0ZT1iLk9QRU5FRCxkKHRoaXMpO3RoaXMucmVhZHlTdGF0ZTxiLkRPTkU7KWlmKHRoaXMucmVhZHlTdGF0ZSsrLGModGhpcyksdGhpcy5fYWJvcnRlZClicmVhayBhfTsKYi5wcm90b3R5cGUuYWJvcnQ9ZnVuY3Rpb24oKXtiLm9uYWJvcnQmJmIub25hYm9ydC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5yZWFkeVN0YXRlPmIuVU5TRU5UJiYodGhpcy5fYWJvcnRlZD0hMCk7dGhpcy5fb2JqZWN0LmFib3J0KCk7ZSh0aGlzKTt0aGlzLnJlYWR5U3RhdGU9Yi5VTlNFTlQ7ZGVsZXRlIHRoaXMuX2RhdGF9O2IucHJvdG90eXBlLmdldEFsbFJlc3BvbnNlSGVhZGVycz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9vYmplY3QuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKCl9O2IucHJvdG90eXBlLmdldFJlc3BvbnNlSGVhZGVyPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLl9vYmplY3QuZ2V0UmVzcG9uc2VIZWFkZXIoYSl9O2IucHJvdG90eXBlLnNldFJlcXVlc3RIZWFkZXI9ZnVuY3Rpb24oYSxiKXt0aGlzLl9oZWFkZXJzfHwodGhpcy5faGVhZGVycz17fSk7dGhpcy5faGVhZGVyc1thXT1iO3JldHVybiB0aGlzLl9vYmplY3Quc2V0UmVxdWVzdEhlYWRlcihhLGIpfTsKYi5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lcj1mdW5jdGlvbihhLGIsYyl7Zm9yKHZhciBkPTAsZTtlPXRoaXMuX2xpc3RlbmVyc1tkXTtkKyspaWYoZVswXT09YSYmZVsxXT09YiYmZVsyXT09YylyZXR1cm47dGhpcy5fbGlzdGVuZXJzLnB1c2goW2EsYixjXSl9O2IucHJvdG90eXBlLnJlbW92ZUV2ZW50TGlzdGVuZXI9ZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZD0wLGU7KGU9dGhpcy5fbGlzdGVuZXJzW2RdKSYmKGVbMF0hPWF8fGVbMV0hPWJ8fGVbMl0hPWMpO2QrKyk7ZSYmdGhpcy5fbGlzdGVuZXJzLnNwbGljZShkLDEpfTtiLnByb3RvdHlwZS5kaXNwYXRjaEV2ZW50PWZ1bmN0aW9uKGEpe2E9e3R5cGU6YS50eXBlLHRhcmdldDp0aGlzLGN1cnJlbnRUYXJnZXQ6dGhpcyxldmVudFBoYXNlOjIsYnViYmxlczphLmJ1YmJsZXMsY2FuY2VsYWJsZTphLmNhbmNlbGFibGUsdGltZVN0YW1wOmEudGltZVN0YW1wLHN0b3BQcm9wYWdhdGlvbjpmdW5jdGlvbigpe30scHJldmVudERlZmF1bHQ6ZnVuY3Rpb24oKXt9LAppbml0RXZlbnQ6ZnVuY3Rpb24oKXt9fTsicmVhZHlzdGF0ZWNoYW5nZSI9PWEudHlwZSYmdGhpcy5vbnJlYWR5c3RhdGVjaGFuZ2UmJih0aGlzLm9ucmVhZHlzdGF0ZWNoYW5nZS5oYW5kbGVFdmVudHx8dGhpcy5vbnJlYWR5c3RhdGVjaGFuZ2UpLmFwcGx5KHRoaXMsW2FdKTtmb3IodmFyIGI9MCxjO2M9dGhpcy5fbGlzdGVuZXJzW2JdO2IrKyljWzBdIT1hLnR5cGV8fGNbMl18fChjWzFdLmhhbmRsZUV2ZW50fHxjWzFdKS5hcHBseSh0aGlzLFthXSl9O2IucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIltvYmplY3QgWE1MSHR0cFJlcXVlc3RdIn07Yi50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiJbWE1MSHR0cFJlcXVlc3RdIn07d2luZG93LkZ1bmN0aW9uLnByb3RvdHlwZS5hcHBseXx8KHdpbmRvdy5GdW5jdGlvbi5wcm90b3R5cGUuYXBwbHk9ZnVuY3Rpb24oYSxiKXtifHwoYj1bXSk7YS5fX2Z1bmM9dGhpczthLl9fZnVuYyhiWzBdLGJbMV0sYlsyXSxiWzNdLApiWzRdKTtkZWxldGUgYS5fX2Z1bmN9KTtPcGVuTGF5ZXJzLlJlcXVlc3R8fChPcGVuTGF5ZXJzLlJlcXVlc3Q9e30pO09wZW5MYXllcnMuUmVxdWVzdC5YTUxIdHRwUmVxdWVzdD1ifSkoKTtPcGVuTGF5ZXJzLlByb3h5SG9zdD0iIjtPcGVuTGF5ZXJzLlJlcXVlc3R8fChPcGVuTGF5ZXJzLlJlcXVlc3Q9e30pOwpPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKE9wZW5MYXllcnMuUmVxdWVzdCx7REVGQVVMVF9DT05GSUc6e21ldGhvZDoiR0VUIix1cmw6d2luZG93LmxvY2F0aW9uLmhyZWYsYXN5bmM6ITAsdXNlcjp2b2lkIDAscGFzc3dvcmQ6dm9pZCAwLHBhcmFtczpudWxsLHByb3h5Ok9wZW5MYXllcnMuUHJveHlIb3N0LGhlYWRlcnM6e30sZGF0YTpudWxsLGNhbGxiYWNrOmZ1bmN0aW9uKCl7fSxzdWNjZXNzOm51bGwsZmFpbHVyZTpudWxsLHNjb3BlOm51bGx9LFVSTF9TUExJVF9SRUdFWDovKFteOl0qOilcL1wvKFteOl0qOj9bXkBdKkApPyhbXjpcL1w/XSopOj8oW15cL1w/XSopLyxldmVudHM6bmV3IE9wZW5MYXllcnMuRXZlbnRzKHRoaXMpLG1ha2VTYW1lT3JpZ2luOmZ1bmN0aW9uKGEsYil7dmFyIGM9MCE9PWEuaW5kZXhPZigiaHR0cCIpLGQ9IWMmJmEubWF0Y2godGhpcy5VUkxfU1BMSVRfUkVHRVgpO2lmKGQpe3ZhciBlPXdpbmRvdy5sb2NhdGlvbixjPWRbMV09PWUucHJvdG9jb2wmJmRbM109PQplLmhvc3RuYW1lLGQ9ZFs0XSxlPWUucG9ydDtpZig4MCE9ZCYmIiIhPWR8fCI4MCIhPWUmJiIiIT1lKWM9YyYmZD09ZX1jfHxiJiYoYT0iZnVuY3Rpb24iPT10eXBlb2YgYj9iKGEpOmIrZW5jb2RlVVJJQ29tcG9uZW50KGEpKTtyZXR1cm4gYX0saXNzdWU6ZnVuY3Rpb24oYSl7dmFyIGI9T3BlbkxheWVycy5VdGlsLmV4dGVuZCh0aGlzLkRFRkFVTFRfQ09ORklHLHtwcm94eTpPcGVuTGF5ZXJzLlByb3h5SG9zdH0pO2E9YXx8e307YS5oZWFkZXJzPWEuaGVhZGVyc3x8e307YT1PcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyhhLGIpO2EuaGVhZGVycz1PcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyhhLmhlYWRlcnMsYi5oZWFkZXJzKTt2YXIgYj0hMSxjO2ZvcihjIGluIGEuaGVhZGVycylhLmhlYWRlcnMuaGFzT3duUHJvcGVydHkoYykmJiJ4LXJlcXVlc3RlZC13aXRoIj09PWMudG9Mb3dlckNhc2UoKSYmKGI9ITApOyExPT09YiYmKGEuaGVhZGVyc1siWC1SZXF1ZXN0ZWQtV2l0aCJdPQoiWE1MSHR0cFJlcXVlc3QiKTt2YXIgZD1uZXcgT3BlbkxheWVycy5SZXF1ZXN0LlhNTEh0dHBSZXF1ZXN0LGU9T3BlbkxheWVycy5VdGlsLnVybEFwcGVuZChhLnVybCxPcGVuTGF5ZXJzLlV0aWwuZ2V0UGFyYW1ldGVyU3RyaW5nKGEucGFyYW1zfHx7fSkpLGU9T3BlbkxheWVycy5SZXF1ZXN0Lm1ha2VTYW1lT3JpZ2luKGUsYS5wcm94eSk7ZC5vcGVuKGEubWV0aG9kLGUsYS5hc3luYyxhLnVzZXIsYS5wYXNzd29yZCk7Zm9yKHZhciBmIGluIGEuaGVhZGVycylkLnNldFJlcXVlc3RIZWFkZXIoZixhLmhlYWRlcnNbZl0pO3ZhciBnPXRoaXMuZXZlbnRzLGg9dGhpcztkLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpe2QucmVhZHlTdGF0ZT09T3BlbkxheWVycy5SZXF1ZXN0LlhNTEh0dHBSZXF1ZXN0LkRPTkUmJiExIT09Zy50cmlnZ2VyRXZlbnQoImNvbXBsZXRlIix7cmVxdWVzdDpkLGNvbmZpZzphLHJlcXVlc3RVcmw6ZX0pJiZoLnJ1bkNhbGxiYWNrcyh7cmVxdWVzdDpkLGNvbmZpZzphLApyZXF1ZXN0VXJsOmV9KX07ITE9PT1hLmFzeW5jP2Quc2VuZChhLmRhdGEpOndpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7MCE9PWQucmVhZHlTdGF0ZSYmZC5zZW5kKGEuZGF0YSl9LDApO3JldHVybiBkfSxydW5DYWxsYmFja3M6ZnVuY3Rpb24oYSl7dmFyIGI9YS5yZXF1ZXN0LGM9YS5jb25maWcsZD1jLnNjb3BlP09wZW5MYXllcnMuRnVuY3Rpb24uYmluZChjLmNhbGxiYWNrLGMuc2NvcGUpOmMuY2FsbGJhY2ssZTtjLnN1Y2Nlc3MmJihlPWMuc2NvcGU/T3BlbkxheWVycy5GdW5jdGlvbi5iaW5kKGMuc3VjY2VzcyxjLnNjb3BlKTpjLnN1Y2Nlc3MpO3ZhciBmO2MuZmFpbHVyZSYmKGY9Yy5zY29wZT9PcGVuTGF5ZXJzLkZ1bmN0aW9uLmJpbmQoYy5mYWlsdXJlLGMuc2NvcGUpOmMuZmFpbHVyZSk7ImZpbGU6Ij09T3BlbkxheWVycy5VdGlsLmNyZWF0ZVVybE9iamVjdChjLnVybCkucHJvdG9jb2wmJmIucmVzcG9uc2VUZXh0JiYoYi5zdGF0dXM9MjAwKTtkKGIpO2lmKCFiLnN0YXR1c3x8CjIwMDw9Yi5zdGF0dXMmJjMwMD5iLnN0YXR1cyl0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoInN1Y2Nlc3MiLGEpLGUmJmUoYik7Yi5zdGF0dXMmJigyMDA+Yi5zdGF0dXN8fDMwMDw9Yi5zdGF0dXMpJiYodGhpcy5ldmVudHMudHJpZ2dlckV2ZW50KCJmYWlsdXJlIixhKSxmJiZmKGIpKX0sR0VUOmZ1bmN0aW9uKGEpe2E9T3BlbkxheWVycy5VdGlsLmV4dGVuZChhLHttZXRob2Q6IkdFVCJ9KTtyZXR1cm4gT3BlbkxheWVycy5SZXF1ZXN0Lmlzc3VlKGEpfSxQT1NUOmZ1bmN0aW9uKGEpe2E9T3BlbkxheWVycy5VdGlsLmV4dGVuZChhLHttZXRob2Q6IlBPU1QifSk7YS5oZWFkZXJzPWEuaGVhZGVycz9hLmhlYWRlcnM6e307IkNPTlRFTlQtVFlQRSJpbiBPcGVuTGF5ZXJzLlV0aWwudXBwZXJDYXNlT2JqZWN0KGEuaGVhZGVycyl8fChhLmhlYWRlcnNbIkNvbnRlbnQtVHlwZSJdPSJhcHBsaWNhdGlvbi94bWwiKTtyZXR1cm4gT3BlbkxheWVycy5SZXF1ZXN0Lmlzc3VlKGEpfSxQVVQ6ZnVuY3Rpb24oYSl7YT0KT3BlbkxheWVycy5VdGlsLmV4dGVuZChhLHttZXRob2Q6IlBVVCJ9KTthLmhlYWRlcnM9YS5oZWFkZXJzP2EuaGVhZGVyczp7fTsiQ09OVEVOVC1UWVBFImluIE9wZW5MYXllcnMuVXRpbC51cHBlckNhc2VPYmplY3QoYS5oZWFkZXJzKXx8KGEuaGVhZGVyc1siQ29udGVudC1UeXBlIl09ImFwcGxpY2F0aW9uL3htbCIpO3JldHVybiBPcGVuTGF5ZXJzLlJlcXVlc3QuaXNzdWUoYSl9LERFTEVURTpmdW5jdGlvbihhKXthPU9wZW5MYXllcnMuVXRpbC5leHRlbmQoYSx7bWV0aG9kOiJERUxFVEUifSk7cmV0dXJuIE9wZW5MYXllcnMuUmVxdWVzdC5pc3N1ZShhKX0sSEVBRDpmdW5jdGlvbihhKXthPU9wZW5MYXllcnMuVXRpbC5leHRlbmQoYSx7bWV0aG9kOiJIRUFEIn0pO3JldHVybiBPcGVuTGF5ZXJzLlJlcXVlc3QuaXNzdWUoYSl9LE9QVElPTlM6ZnVuY3Rpb24oYSl7YT1PcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKGEse21ldGhvZDoiT1BUSU9OUyJ9KTtyZXR1cm4gT3BlbkxheWVycy5SZXF1ZXN0Lmlzc3VlKGEpfX0pO09wZW5MYXllcnMuTGF5ZXIuQXJjSU1TPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5MYXllci5HcmlkLHtERUZBVUxUX1BBUkFNUzp7Q2xpZW50VmVyc2lvbjoiOS4yIixTZXJ2aWNlTmFtZToiIn0sZmVhdHVyZUNvb3JkU3lzOiI0MzI2IixmaWx0ZXJDb29yZFN5czoiNDMyNiIsbGF5ZXJzOm51bGwsYXN5bmM6ITAsbmFtZToiQXJjSU1TIixpc0Jhc2VMYXllcjohMCxERUZBVUxUX09QVElPTlM6e3RpbGVTaXplOm5ldyBPcGVuTGF5ZXJzLlNpemUoNTEyLDUxMiksZmVhdHVyZUNvb3JkU3lzOiI0MzI2IixmaWx0ZXJDb29yZFN5czoiNDMyNiIsbGF5ZXJzOm51bGwsaXNCYXNlTGF5ZXI6ITAsYXN5bmM6ITAsbmFtZToiQXJjSU1TIn0saW5pdGlhbGl6ZTpmdW5jdGlvbihhLGIsYyl7dGhpcy50aWxlU2l6ZT1uZXcgT3BlbkxheWVycy5TaXplKDUxMiw1MTIpO3RoaXMucGFyYW1zPU9wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKHtTZXJ2aWNlTmFtZTpjLnNlcnZpY2VOYW1lfSwKdGhpcy5ERUZBVUxUX1BBUkFNUyk7dGhpcy5vcHRpb25zPU9wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKGMsdGhpcy5ERUZBVUxUX09QVElPTlMpO09wZW5MYXllcnMuTGF5ZXIuR3JpZC5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLFthLGIsdGhpcy5wYXJhbXMsY10pO3RoaXMudHJhbnNwYXJlbnQmJih0aGlzLmlzQmFzZUxheWVyfHwodGhpcy5pc0Jhc2VMYXllcj0hMSksImltYWdlL2pwZWciPT10aGlzLmZvcm1hdCYmKHRoaXMuZm9ybWF0PU9wZW5MYXllcnMuVXRpbC5hbHBoYUhhY2soKT8iaW1hZ2UvZ2lmIjoiaW1hZ2UvcG5nIikpO251bGw9PT10aGlzLm9wdGlvbnMubGF5ZXJzJiYodGhpcy5vcHRpb25zLmxheWVycz1bXSl9LGdldFVSTDpmdW5jdGlvbihhKXt2YXIgYj0iIjthPXRoaXMuYWRqdXN0Qm91bmRzKGEpO2E9bmV3IE9wZW5MYXllcnMuRm9ybWF0LkFyY1hNTChPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHRoaXMub3B0aW9ucyx7cmVxdWVzdHR5cGU6ImltYWdlIiwKZW52ZWxvcGU6YS50b0FycmF5KCksdGlsZVNpemU6dGhpcy50aWxlU2l6ZX0pKTthPW5ldyBPcGVuTGF5ZXJzLlJlcXVlc3QuUE9TVCh7dXJsOnRoaXMuZ2V0RnVsbFJlcXVlc3RTdHJpbmcoKSxkYXRhOmEud3JpdGUoKSxhc3luYzohMX0pO251bGwhPWEmJihiPWEucmVzcG9uc2VYTUwsYiYmYi5kb2N1bWVudEVsZW1lbnR8fChiPWEucmVzcG9uc2VUZXh0KSxiPShuZXcgT3BlbkxheWVycy5Gb3JtYXQuQXJjWE1MKS5yZWFkKGIpLGI9dGhpcy5nZXRVcmxPckltYWdlKGIuaW1hZ2Uub3V0cHV0KSk7cmV0dXJuIGJ9LGdldFVSTGFzeW5jOmZ1bmN0aW9uKGEsYixjKXthPXRoaXMuYWRqdXN0Qm91bmRzKGEpO2E9bmV3IE9wZW5MYXllcnMuRm9ybWF0LkFyY1hNTChPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHRoaXMub3B0aW9ucyx7cmVxdWVzdHR5cGU6ImltYWdlIixlbnZlbG9wZTphLnRvQXJyYXkoKSx0aWxlU2l6ZTp0aGlzLnRpbGVTaXplfSkpO09wZW5MYXllcnMuUmVxdWVzdC5QT1NUKHt1cmw6dGhpcy5nZXRGdWxsUmVxdWVzdFN0cmluZygpLAphc3luYzohMCxkYXRhOmEud3JpdGUoKSxjYWxsYmFjazpmdW5jdGlvbihhKXt2YXIgZT1hLnJlc3BvbnNlWE1MO2UmJmUuZG9jdW1lbnRFbGVtZW50fHwoZT1hLnJlc3BvbnNlVGV4dCk7YT0obmV3IE9wZW5MYXllcnMuRm9ybWF0LkFyY1hNTCkucmVhZChlKTtiLmNhbGwoYyx0aGlzLmdldFVybE9ySW1hZ2UoYS5pbWFnZS5vdXRwdXQpKX0sc2NvcGU6dGhpc30pfSxnZXRVcmxPckltYWdlOmZ1bmN0aW9uKGEpe3ZhciBiPSIiO2EudXJsP2I9YS51cmw6YS5kYXRhJiYoYj0iZGF0YTppbWFnZS8iK2EudHlwZSsiO2Jhc2U2NCwiK2EuZGF0YSk7cmV0dXJuIGJ9LHNldExheWVyUXVlcnk6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9MDtjPHRoaXMub3B0aW9ucy5sYXllcnMubGVuZ3RoO2MrKylpZihhPT10aGlzLm9wdGlvbnMubGF5ZXJzW2NdLmlkKXt0aGlzLm9wdGlvbnMubGF5ZXJzW2NdLnF1ZXJ5PWI7cmV0dXJufXRoaXMub3B0aW9ucy5sYXllcnMucHVzaCh7aWQ6YSx2aXNpYmxlOiEwLApxdWVyeTpifSl9LGdldEZlYXR1cmVJbmZvOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD1jLmJ1ZmZlcnx8MSxlPWMuY2FsbGJhY2t8fGZ1bmN0aW9uKCl7fSxmPWMuc2NvcGV8fHdpbmRvdyxnPXt9O09wZW5MYXllcnMuVXRpbC5leHRlbmQoZyx0aGlzLm9wdGlvbnMpO2cucmVxdWVzdHR5cGU9ImZlYXR1cmUiO2EgaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLkxvbkxhdD8oZy5wb2x5Z29uPW51bGwsZy5lbnZlbG9wZT1bYS5sb24tZCxhLmxhdC1kLGEubG9uK2QsYS5sYXQrZF0pOmEgaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvbHlnb24mJihnLmVudmVsb3BlPW51bGwsZy5wb2x5Z29uPWEpO3ZhciBoPW5ldyBPcGVuTGF5ZXJzLkZvcm1hdC5BcmNYTUwoZyk7T3BlbkxheWVycy5VdGlsLmV4dGVuZChoLnJlcXVlc3QuZ2V0X2ZlYXR1cmUsYyk7aC5yZXF1ZXN0LmdldF9mZWF0dXJlLmxheWVyPWIuaWQ7Im51bWJlciI9PXR5cGVvZiBiLnF1ZXJ5LmFjY3VyYWN5P2gucmVxdWVzdC5nZXRfZmVhdHVyZS5xdWVyeS5hY2N1cmFjeT0KYi5xdWVyeS5hY2N1cmFjeTooYT10aGlzLm1hcC5nZXRDZW50ZXIoKSxjPXRoaXMubWFwLmdldFZpZXdQb3J0UHhGcm9tTG9uTGF0KGEpLGMueCsrLGM9dGhpcy5tYXAuZ2V0TG9uTGF0RnJvbVBpeGVsKGMpLGgucmVxdWVzdC5nZXRfZmVhdHVyZS5xdWVyeS5hY2N1cmFjeT1jLmxvbi1hLmxvbik7aC5yZXF1ZXN0LmdldF9mZWF0dXJlLnF1ZXJ5LndoZXJlPWIucXVlcnkud2hlcmU7aC5yZXF1ZXN0LmdldF9mZWF0dXJlLnF1ZXJ5LnNwYXRpYWxmaWx0ZXIucmVsYXRpb249ImFyZWFfaW50ZXJzZWN0aW9uIjtPcGVuTGF5ZXJzLlJlcXVlc3QuUE9TVCh7dXJsOnRoaXMuZ2V0RnVsbFJlcXVlc3RTdHJpbmcoe0N1c3RvbVNlcnZpY2U6IlF1ZXJ5In0pLGRhdGE6aC53cml0ZSgpLGNhbGxiYWNrOmZ1bmN0aW9uKGEpe2E9aC5wYXJzZVJlc3BvbnNlKGEucmVzcG9uc2VUZXh0KTtoLmlzZXJyb3IoKT9lLmNhbGwoZixudWxsKTplLmNhbGwoZixhLmZlYXR1cmVzKX19KX0sY2xvbmU6ZnVuY3Rpb24oYSl7bnVsbD09CmEmJihhPW5ldyBPcGVuTGF5ZXJzLkxheWVyLkFyY0lNUyh0aGlzLm5hbWUsdGhpcy51cmwsdGhpcy5nZXRPcHRpb25zKCkpKTtyZXR1cm4gYT1PcGVuTGF5ZXJzLkxheWVyLkdyaWQucHJvdG90eXBlLmNsb25lLmFwcGx5KHRoaXMsW2FdKX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5MYXllci5BcmNJTVMifSk7T3BlbkxheWVycy5Db250cm9sLlBhblpvb209T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkNvbnRyb2wse3NsaWRlRmFjdG9yOjUwLHNsaWRlUmF0aW86bnVsbCxidXR0b25zOm51bGwscG9zaXRpb246bnVsbCxpbml0aWFsaXplOmZ1bmN0aW9uKGEpe3RoaXMucG9zaXRpb249bmV3IE9wZW5MYXllcnMuUGl4ZWwoT3BlbkxheWVycy5Db250cm9sLlBhblpvb20uWCxPcGVuTGF5ZXJzLkNvbnRyb2wuUGFuWm9vbS5ZKTtPcGVuTGF5ZXJzLkNvbnRyb2wucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5tYXAmJnRoaXMubWFwLmV2ZW50cy51bnJlZ2lzdGVyKCJidXR0b25jbGljayIsdGhpcyx0aGlzLm9uQnV0dG9uQ2xpY2spO3RoaXMucmVtb3ZlQnV0dG9ucygpO3RoaXMucG9zaXRpb249dGhpcy5idXR0b25zPW51bGw7T3BlbkxheWVycy5Db250cm9sLnByb3RvdHlwZS5kZXN0cm95LmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sCnNldE1hcDpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLkNvbnRyb2wucHJvdG90eXBlLnNldE1hcC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5tYXAuZXZlbnRzLnJlZ2lzdGVyKCJidXR0b25jbGljayIsdGhpcyx0aGlzLm9uQnV0dG9uQ2xpY2spfSxkcmF3OmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuZHJhdy5hcHBseSh0aGlzLGFyZ3VtZW50cyk7YT10aGlzLnBvc2l0aW9uO3RoaXMuYnV0dG9ucz1bXTt2YXIgYj17dzoxOCxoOjE4fSxjPW5ldyBPcGVuTGF5ZXJzLlBpeGVsKGEueCtiLncvMixhLnkpO3RoaXMuX2FkZEJ1dHRvbigicGFudXAiLCJub3J0aC1taW5pLnBuZyIsYyxiKTthLnk9Yy55K2IuaDt0aGlzLl9hZGRCdXR0b24oInBhbmxlZnQiLCJ3ZXN0LW1pbmkucG5nIixhLGIpO3RoaXMuX2FkZEJ1dHRvbigicGFucmlnaHQiLCJlYXN0LW1pbmkucG5nIixhLmFkZChiLncsMCksYik7dGhpcy5fYWRkQnV0dG9uKCJwYW5kb3duIiwic291dGgtbWluaS5wbmciLApjLmFkZCgwLDIqYi5oKSxiKTt0aGlzLl9hZGRCdXR0b24oInpvb21pbiIsInpvb20tcGx1cy1taW5pLnBuZyIsYy5hZGQoMCwzKmIuaCs1KSxiKTt0aGlzLl9hZGRCdXR0b24oInpvb213b3JsZCIsInpvb20td29ybGQtbWluaS5wbmciLGMuYWRkKDAsNCpiLmgrNSksYik7dGhpcy5fYWRkQnV0dG9uKCJ6b29tb3V0Iiwiem9vbS1taW51cy1taW5pLnBuZyIsYy5hZGQoMCw1KmIuaCs1KSxiKTtyZXR1cm4gdGhpcy5kaXZ9LF9hZGRCdXR0b246ZnVuY3Rpb24oYSxiLGMsZCl7Yj1PcGVuTGF5ZXJzLlV0aWwuZ2V0SW1hZ2VMb2NhdGlvbihiKTtjPU9wZW5MYXllcnMuVXRpbC5jcmVhdGVBbHBoYUltYWdlRGl2KHRoaXMuaWQrIl8iK2EsYyxkLGIsImFic29sdXRlIik7Yy5zdHlsZS5jdXJzb3I9InBvaW50ZXIiO3RoaXMuZGl2LmFwcGVuZENoaWxkKGMpO2MuYWN0aW9uPWE7Yy5jbGFzc05hbWU9Im9sQnV0dG9uIjt0aGlzLmJ1dHRvbnMucHVzaChjKTtyZXR1cm4gY30sX3JlbW92ZUJ1dHRvbjpmdW5jdGlvbihhKXt0aGlzLmRpdi5yZW1vdmVDaGlsZChhKTsKT3BlbkxheWVycy5VdGlsLnJlbW92ZUl0ZW0odGhpcy5idXR0b25zLGEpfSxyZW1vdmVCdXR0b25zOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPXRoaXMuYnV0dG9ucy5sZW5ndGgtMTswPD1hOy0tYSl0aGlzLl9yZW1vdmVCdXR0b24odGhpcy5idXR0b25zW2FdKX0sb25CdXR0b25DbGljazpmdW5jdGlvbihhKXtzd2l0Y2goYS5idXR0b25FbGVtZW50LmFjdGlvbil7Y2FzZSAicGFudXAiOnRoaXMubWFwLnBhbigwLC10aGlzLmdldFNsaWRlRmFjdG9yKCJoIikpO2JyZWFrO2Nhc2UgInBhbmRvd24iOnRoaXMubWFwLnBhbigwLHRoaXMuZ2V0U2xpZGVGYWN0b3IoImgiKSk7YnJlYWs7Y2FzZSAicGFubGVmdCI6dGhpcy5tYXAucGFuKC10aGlzLmdldFNsaWRlRmFjdG9yKCJ3IiksMCk7YnJlYWs7Y2FzZSAicGFucmlnaHQiOnRoaXMubWFwLnBhbih0aGlzLmdldFNsaWRlRmFjdG9yKCJ3IiksMCk7YnJlYWs7Y2FzZSAiem9vbWluIjp0aGlzLm1hcC56b29tSW4oKTticmVhaztjYXNlICJ6b29tb3V0Ijp0aGlzLm1hcC56b29tT3V0KCk7CmJyZWFrO2Nhc2UgInpvb213b3JsZCI6dGhpcy5tYXAuem9vbVRvTWF4RXh0ZW50KCl9fSxnZXRTbGlkZUZhY3RvcjpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5zbGlkZVJhdGlvP3RoaXMubWFwLmdldFNpemUoKVthXSp0aGlzLnNsaWRlUmF0aW86dGhpcy5zbGlkZUZhY3Rvcn0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Db250cm9sLlBhblpvb20ifSk7T3BlbkxheWVycy5Db250cm9sLlBhblpvb20uWD00O09wZW5MYXllcnMuQ29udHJvbC5QYW5ab29tLlk9NDtPcGVuTGF5ZXJzLkNvbnRyb2wuUGFuWm9vbUJhcj1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuQ29udHJvbC5QYW5ab29tLHt6b29tU3RvcFdpZHRoOjE4LHpvb21TdG9wSGVpZ2h0OjExLHNsaWRlcjpudWxsLHNsaWRlckV2ZW50czpudWxsLHpvb21iYXJEaXY6bnVsbCx6b29tV29ybGRJY29uOiExLHBhbkljb25zOiEwLGZvcmNlRml4ZWRab29tTGV2ZWw6ITEsbW91c2VEcmFnU3RhcnQ6bnVsbCxkZWx0YVk6bnVsbCx6b29tU3RhcnQ6bnVsbCxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5fcmVtb3ZlWm9vbUJhcigpO3RoaXMubWFwLmV2ZW50cy51bih7Y2hhbmdlYmFzZWxheWVyOnRoaXMucmVkcmF3LHVwZGF0ZXNpemU6dGhpcy5yZWRyYXcsc2NvcGU6dGhpc30pO09wZW5MYXllcnMuQ29udHJvbC5QYW5ab29tLnByb3RvdHlwZS5kZXN0cm95LmFwcGx5KHRoaXMsYXJndW1lbnRzKTtkZWxldGUgdGhpcy5tb3VzZURyYWdTdGFydDtkZWxldGUgdGhpcy56b29tU3RhcnR9LHNldE1hcDpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLkNvbnRyb2wuUGFuWm9vbS5wcm90b3R5cGUuc2V0TWFwLmFwcGx5KHRoaXMsCmFyZ3VtZW50cyk7dGhpcy5tYXAuZXZlbnRzLm9uKHtjaGFuZ2ViYXNlbGF5ZXI6dGhpcy5yZWRyYXcsdXBkYXRlc2l6ZTp0aGlzLnJlZHJhdyxzY29wZTp0aGlzfSl9LHJlZHJhdzpmdW5jdGlvbigpe251bGwhPXRoaXMuZGl2JiYodGhpcy5yZW1vdmVCdXR0b25zKCksdGhpcy5fcmVtb3ZlWm9vbUJhcigpKTt0aGlzLmRyYXcoKX0sZHJhdzpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLkNvbnRyb2wucHJvdG90eXBlLmRyYXcuYXBwbHkodGhpcyxhcmd1bWVudHMpO2E9dGhpcy5wb3NpdGlvbi5jbG9uZSgpO3RoaXMuYnV0dG9ucz1bXTt2YXIgYj17dzoxOCxoOjE4fTtpZih0aGlzLnBhbkljb25zKXt2YXIgYz1uZXcgT3BlbkxheWVycy5QaXhlbChhLngrYi53LzIsYS55KSxkPWIudzt0aGlzLnpvb21Xb3JsZEljb24mJihjPW5ldyBPcGVuTGF5ZXJzLlBpeGVsKGEueCtiLncsYS55KSk7dGhpcy5fYWRkQnV0dG9uKCJwYW51cCIsIm5vcnRoLW1pbmkucG5nIixjLGIpO2EueT1jLnkrYi5oOwp0aGlzLl9hZGRCdXR0b24oInBhbmxlZnQiLCJ3ZXN0LW1pbmkucG5nIixhLGIpO3RoaXMuem9vbVdvcmxkSWNvbiYmKHRoaXMuX2FkZEJ1dHRvbigiem9vbXdvcmxkIiwiem9vbS13b3JsZC1taW5pLnBuZyIsYS5hZGQoYi53LDApLGIpLGQqPTIpO3RoaXMuX2FkZEJ1dHRvbigicGFucmlnaHQiLCJlYXN0LW1pbmkucG5nIixhLmFkZChkLDApLGIpO3RoaXMuX2FkZEJ1dHRvbigicGFuZG93biIsInNvdXRoLW1pbmkucG5nIixjLmFkZCgwLDIqYi5oKSxiKTt0aGlzLl9hZGRCdXR0b24oInpvb21pbiIsInpvb20tcGx1cy1taW5pLnBuZyIsYy5hZGQoMCwzKmIuaCs1KSxiKTtjPXRoaXMuX2FkZFpvb21CYXIoYy5hZGQoMCw0KmIuaCs1KSk7dGhpcy5fYWRkQnV0dG9uKCJ6b29tb3V0Iiwiem9vbS1taW51cy1taW5pLnBuZyIsYyxiKX1lbHNlIHRoaXMuX2FkZEJ1dHRvbigiem9vbWluIiwiem9vbS1wbHVzLW1pbmkucG5nIixhLGIpLGM9dGhpcy5fYWRkWm9vbUJhcihhLmFkZCgwLGIuaCkpLAp0aGlzLl9hZGRCdXR0b24oInpvb21vdXQiLCJ6b29tLW1pbnVzLW1pbmkucG5nIixjLGIpLHRoaXMuem9vbVdvcmxkSWNvbiYmKGM9Yy5hZGQoMCxiLmgrMyksdGhpcy5fYWRkQnV0dG9uKCJ6b29td29ybGQiLCJ6b29tLXdvcmxkLW1pbmkucG5nIixjLGIpKTtyZXR1cm4gdGhpcy5kaXZ9LF9hZGRab29tQmFyOmZ1bmN0aW9uKGEpe3ZhciBiPU9wZW5MYXllcnMuVXRpbC5nZXRJbWFnZUxvY2F0aW9uKCJzbGlkZXIucG5nIiksYz10aGlzLmlkKyJfIit0aGlzLm1hcC5pZCxkPXRoaXMubWFwLmdldE1pblpvb20oKSxlPXRoaXMubWFwLmdldE51bVpvb21MZXZlbHMoKS0xLXRoaXMubWFwLmdldFpvb20oKSxlPU9wZW5MYXllcnMuVXRpbC5jcmVhdGVBbHBoYUltYWdlRGl2KGMsYS5hZGQoLTEsZSp0aGlzLnpvb21TdG9wSGVpZ2h0KSx7dzoyMCxoOjl9LGIsImFic29sdXRlIik7ZS5zdHlsZS5jdXJzb3I9Im1vdmUiO3RoaXMuc2xpZGVyPWU7dGhpcy5zbGlkZXJFdmVudHM9bmV3IE9wZW5MYXllcnMuRXZlbnRzKHRoaXMsCmUsbnVsbCwhMCx7aW5jbHVkZVhZOiEwfSk7dGhpcy5zbGlkZXJFdmVudHMub24oe3RvdWNoc3RhcnQ6dGhpcy56b29tQmFyRG93bix0b3VjaG1vdmU6dGhpcy56b29tQmFyRHJhZyx0b3VjaGVuZDp0aGlzLnpvb21CYXJVcCxtb3VzZWRvd246dGhpcy56b29tQmFyRG93bixtb3VzZW1vdmU6dGhpcy56b29tQmFyRHJhZyxtb3VzZXVwOnRoaXMuem9vbUJhclVwfSk7dmFyIGY9e3c6dGhpcy56b29tU3RvcFdpZHRoLGg6dGhpcy56b29tU3RvcEhlaWdodCoodGhpcy5tYXAuZ2V0TnVtWm9vbUxldmVscygpLWQpfSxiPU9wZW5MYXllcnMuVXRpbC5nZXRJbWFnZUxvY2F0aW9uKCJ6b29tYmFyLnBuZyIpLGM9bnVsbDtPcGVuTGF5ZXJzLlV0aWwuYWxwaGFIYWNrKCk/KGM9dGhpcy5pZCsiXyIrdGhpcy5tYXAuaWQsYz1PcGVuTGF5ZXJzLlV0aWwuY3JlYXRlQWxwaGFJbWFnZURpdihjLGEse3c6Zi53LGg6dGhpcy56b29tU3RvcEhlaWdodH0sYiwiYWJzb2x1dGUiLG51bGwsImNyb3AiKSxjLnN0eWxlLmhlaWdodD0KZi5oKyJweCIpOmM9T3BlbkxheWVycy5VdGlsLmNyZWF0ZURpdigiT3BlbkxheWVyc19Db250cm9sX1Bhblpvb21CYXJfWm9vbWJhciIrdGhpcy5tYXAuaWQsYSxmLGIpO2Muc3R5bGUuY3Vyc29yPSJwb2ludGVyIjtjLmNsYXNzTmFtZT0ib2xCdXR0b24iO3RoaXMuem9vbWJhckRpdj1jO3RoaXMuZGl2LmFwcGVuZENoaWxkKGMpO3RoaXMuc3RhcnRUb3A9cGFyc2VJbnQoYy5zdHlsZS50b3ApO3RoaXMuZGl2LmFwcGVuZENoaWxkKGUpO3RoaXMubWFwLmV2ZW50cy5yZWdpc3Rlcigiem9vbWVuZCIsdGhpcyx0aGlzLm1vdmVab29tQmFyKTtyZXR1cm4gYT1hLmFkZCgwLHRoaXMuem9vbVN0b3BIZWlnaHQqKHRoaXMubWFwLmdldE51bVpvb21MZXZlbHMoKS1kKSl9LF9yZW1vdmVab29tQmFyOmZ1bmN0aW9uKCl7dGhpcy5zbGlkZXJFdmVudHMudW4oe3RvdWNoc3RhcnQ6dGhpcy56b29tQmFyRG93bix0b3VjaG1vdmU6dGhpcy56b29tQmFyRHJhZyx0b3VjaGVuZDp0aGlzLnpvb21CYXJVcCwKbW91c2Vkb3duOnRoaXMuem9vbUJhckRvd24sbW91c2Vtb3ZlOnRoaXMuem9vbUJhckRyYWcsbW91c2V1cDp0aGlzLnpvb21CYXJVcH0pO3RoaXMuc2xpZGVyRXZlbnRzLmRlc3Ryb3koKTt0aGlzLmRpdi5yZW1vdmVDaGlsZCh0aGlzLnpvb21iYXJEaXYpO3RoaXMuem9vbWJhckRpdj1udWxsO3RoaXMuZGl2LnJlbW92ZUNoaWxkKHRoaXMuc2xpZGVyKTt0aGlzLnNsaWRlcj1udWxsO3RoaXMubWFwLmV2ZW50cy51bnJlZ2lzdGVyKCJ6b29tZW5kIix0aGlzLHRoaXMubW92ZVpvb21CYXIpfSxvbkJ1dHRvbkNsaWNrOmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuQ29udHJvbC5QYW5ab29tLnByb3RvdHlwZS5vbkJ1dHRvbkNsaWNrLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtpZihhLmJ1dHRvbkVsZW1lbnQ9PT10aGlzLnpvb21iYXJEaXYpe3ZhciBiPWEuYnV0dG9uWFkueS90aGlzLnpvb21TdG9wSGVpZ2h0O2lmKHRoaXMuZm9yY2VGaXhlZFpvb21MZXZlbHx8IXRoaXMubWFwLmZyYWN0aW9uYWxab29tKWI9Ck1hdGguZmxvb3IoYik7Yj10aGlzLm1hcC5nZXROdW1ab29tTGV2ZWxzKCktMS1iO2I9TWF0aC5taW4oTWF0aC5tYXgoYiwwKSx0aGlzLm1hcC5nZXROdW1ab29tTGV2ZWxzKCktMSk7dGhpcy5tYXAuem9vbVRvKGIpfX0scGFzc0V2ZW50VG9TbGlkZXI6ZnVuY3Rpb24oYSl7dGhpcy5zbGlkZXJFdmVudHMuaGFuZGxlQnJvd3NlckV2ZW50KGEpfSx6b29tQmFyRG93bjpmdW5jdGlvbihhKXtpZihPcGVuTGF5ZXJzLkV2ZW50LmlzTGVmdENsaWNrKGEpfHxPcGVuTGF5ZXJzLkV2ZW50LmlzU2luZ2xlVG91Y2goYSkpdGhpcy5tYXAuZXZlbnRzLm9uKHt0b3VjaG1vdmU6dGhpcy5wYXNzRXZlbnRUb1NsaWRlcixtb3VzZW1vdmU6dGhpcy5wYXNzRXZlbnRUb1NsaWRlcixtb3VzZXVwOnRoaXMucGFzc0V2ZW50VG9TbGlkZXIsc2NvcGU6dGhpc30pLHRoaXMubW91c2VEcmFnU3RhcnQ9YS54eS5jbG9uZSgpLHRoaXMuem9vbVN0YXJ0PWEueHkuY2xvbmUoKSx0aGlzLmRpdi5zdHlsZS5jdXJzb3I9CiJtb3ZlIix0aGlzLnpvb21iYXJEaXYub2Zmc2V0cz1udWxsLE9wZW5MYXllcnMuRXZlbnQuc3RvcChhKX0sem9vbUJhckRyYWc6ZnVuY3Rpb24oYSl7aWYobnVsbCE9dGhpcy5tb3VzZURyYWdTdGFydCl7dmFyIGI9dGhpcy5tb3VzZURyYWdTdGFydC55LWEueHkueSxjPU9wZW5MYXllcnMuVXRpbC5wYWdlUG9zaXRpb24odGhpcy56b29tYmFyRGl2KTswPGEuY2xpZW50WS1jWzFdJiZhLmNsaWVudFktY1sxXTxwYXJzZUludCh0aGlzLnpvb21iYXJEaXYuc3R5bGUuaGVpZ2h0KS0yJiYoYj1wYXJzZUludCh0aGlzLnNsaWRlci5zdHlsZS50b3ApLWIsdGhpcy5zbGlkZXIuc3R5bGUudG9wPWIrInB4Iix0aGlzLm1vdXNlRHJhZ1N0YXJ0PWEueHkuY2xvbmUoKSk7dGhpcy5kZWx0YVk9dGhpcy56b29tU3RhcnQueS1hLnh5Lnk7T3BlbkxheWVycy5FdmVudC5zdG9wKGEpfX0sem9vbUJhclVwOmZ1bmN0aW9uKGEpe2lmKChPcGVuTGF5ZXJzLkV2ZW50LmlzTGVmdENsaWNrKGEpfHwidG91Y2hlbmQiPT09CmEudHlwZSkmJnRoaXMubW91c2VEcmFnU3RhcnQpe3RoaXMuZGl2LnN0eWxlLmN1cnNvcj0iIjt0aGlzLm1hcC5ldmVudHMudW4oe3RvdWNobW92ZTp0aGlzLnBhc3NFdmVudFRvU2xpZGVyLG1vdXNldXA6dGhpcy5wYXNzRXZlbnRUb1NsaWRlcixtb3VzZW1vdmU6dGhpcy5wYXNzRXZlbnRUb1NsaWRlcixzY29wZTp0aGlzfSk7dmFyIGI9dGhpcy5tYXAuem9vbTshdGhpcy5mb3JjZUZpeGVkWm9vbUxldmVsJiZ0aGlzLm1hcC5mcmFjdGlvbmFsWm9vbT8oYis9dGhpcy5kZWx0YVkvdGhpcy56b29tU3RvcEhlaWdodCxiPU1hdGgubWluKE1hdGgubWF4KGIsMCksdGhpcy5tYXAuZ2V0TnVtWm9vbUxldmVscygpLTEpKTooYis9dGhpcy5kZWx0YVkvdGhpcy56b29tU3RvcEhlaWdodCxiPU1hdGgubWF4KE1hdGgucm91bmQoYiksMCkpO3RoaXMubWFwLnpvb21UbyhiKTt0aGlzLnpvb21TdGFydD10aGlzLm1vdXNlRHJhZ1N0YXJ0PW51bGw7dGhpcy5kZWx0YVk9MDtPcGVuTGF5ZXJzLkV2ZW50LnN0b3AoYSl9fSwKbW92ZVpvb21CYXI6ZnVuY3Rpb24oKXt2YXIgYT0odGhpcy5tYXAuZ2V0TnVtWm9vbUxldmVscygpLTEtdGhpcy5tYXAuZ2V0Wm9vbSgpKSp0aGlzLnpvb21TdG9wSGVpZ2h0K3RoaXMuc3RhcnRUb3ArMTt0aGlzLnNsaWRlci5zdHlsZS50b3A9YSsicHgifSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkNvbnRyb2wuUGFuWm9vbUJhciJ9KTtPcGVuTGF5ZXJzLkZvcm1hdC5XRlNDYXBhYmlsaXRpZXM9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkZvcm1hdC5YTUwuVmVyc2lvbmVkT0dDLHtkZWZhdWx0VmVyc2lvbjoiMS4xLjAiLENMQVNTX05BTUU6Ik9wZW5MYXllcnMuRm9ybWF0LldGU0NhcGFiaWxpdGllcyJ9KTtPcGVuTGF5ZXJzLkZvcm1hdC5XRlNDYXBhYmlsaXRpZXMudjE9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkZvcm1hdC5YTUwse25hbWVzcGFjZXM6e3dmczoiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC93ZnMiLHhsaW5rOiJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIix4c2k6Imh0dHA6Ly93d3cudzMub3JnLzIwMDEvWE1MU2NoZW1hLWluc3RhbmNlIixvd3M6Imh0dHA6Ly93d3cub3Blbmdpcy5uZXQvb3dzIn0sZXJyb3JQcm9wZXJ0eToiZmVhdHVyZVR5cGVMaXN0IixkZWZhdWx0UHJlZml4OiJ3ZnMiLHJlYWQ6ZnVuY3Rpb24oYSl7InN0cmluZyI9PXR5cGVvZiBhJiYoYT1PcGVuTGF5ZXJzLkZvcm1hdC5YTUwucHJvdG90eXBlLnJlYWQuYXBwbHkodGhpcyxbYV0pKTthJiY5PT1hLm5vZGVUeXBlJiYoYT1hLmRvY3VtZW50RWxlbWVudCk7dmFyIGI9e307dGhpcy5yZWFkTm9kZShhLGIpO3JldHVybiBifSxyZWFkZXJzOnt3ZnM6e1dGU19DYXBhYmlsaXRpZXM6ZnVuY3Rpb24oYSwKYil7dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGIpfSxGZWF0dXJlVHlwZUxpc3Q6ZnVuY3Rpb24oYSxiKXtiLmZlYXR1cmVUeXBlTGlzdD17ZmVhdHVyZVR5cGVzOltdfTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYi5mZWF0dXJlVHlwZUxpc3QpfSxGZWF0dXJlVHlwZTpmdW5jdGlvbihhLGIpe3ZhciBjPXt9O3RoaXMucmVhZENoaWxkTm9kZXMoYSxjKTtiLmZlYXR1cmVUeXBlcy5wdXNoKGMpfSxOYW1lOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5nZXRDaGlsZFZhbHVlKGEpO2MmJihjPWMuc3BsaXQoIjoiKSxiLm5hbWU9Yy5wb3AoKSwwPGMubGVuZ3RoJiYoYi5mZWF0dXJlTlM9dGhpcy5sb29rdXBOYW1lc3BhY2VVUkkoYSxjWzBdKSkpfSxUaXRsZTpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuZ2V0Q2hpbGRWYWx1ZShhKTtjJiYoYi50aXRsZT1jKX0sQWJzdHJhY3Q6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmdldENoaWxkVmFsdWUoYSk7YyYmKGJbImFic3RyYWN0Il09Yyl9fX0sCkNMQVNTX05BTUU6Ik9wZW5MYXllcnMuRm9ybWF0LldGU0NhcGFiaWxpdGllcy52MSJ9KTtPcGVuTGF5ZXJzLkZvcm1hdC5XRlNDYXBhYmlsaXRpZXMudjFfMV8wPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Gb3JtYXQuV0ZTQ2FwYWJpbGl0aWVzLnYxLHtyZWdFeGVzOnt0cmltU3BhY2U6L15ccyp8XHMqJC9nLHJlbW92ZVNwYWNlOi9ccyovZyxzcGxpdFNwYWNlOi9ccysvLHRyaW1Db21tYTovXHMqLFxzKi9nfSxyZWFkZXJzOnt3ZnM6T3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoe0RlZmF1bHRTUlM6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmdldENoaWxkVmFsdWUoYSk7YyYmKGIuc3JzPWMpfX0sT3BlbkxheWVycy5Gb3JtYXQuV0ZTQ2FwYWJpbGl0aWVzLnYxLnByb3RvdHlwZS5yZWFkZXJzLndmcyksb3dzOk9wZW5MYXllcnMuRm9ybWF0Lk9XU0NvbW1vbi52MS5wcm90b3R5cGUucmVhZGVycy5vd3N9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuRm9ybWF0LldGU0NhcGFiaWxpdGllcy52MV8xXzAifSk7T3BlbkxheWVycy5MYXllci5JbWFnZT1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuTGF5ZXIse2lzQmFzZUxheWVyOiEwLHVybDpudWxsLGV4dGVudDpudWxsLHNpemU6bnVsbCx0aWxlOm51bGwsYXNwZWN0UmF0aW86bnVsbCxpbml0aWFsaXplOmZ1bmN0aW9uKGEsYixjLGQsZSl7dGhpcy51cmw9Yjt0aGlzLm1heEV4dGVudD10aGlzLmV4dGVudD1jO3RoaXMuc2l6ZT1kO09wZW5MYXllcnMuTGF5ZXIucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxbYSxlXSk7dGhpcy5hc3BlY3RSYXRpbz10aGlzLmV4dGVudC5nZXRIZWlnaHQoKS90aGlzLnNpemUuaC8odGhpcy5leHRlbnQuZ2V0V2lkdGgoKS90aGlzLnNpemUudyl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLnRpbGUmJih0aGlzLnJlbW92ZVRpbGVNb25pdG9yaW5nSG9va3ModGhpcy50aWxlKSx0aGlzLnRpbGUuZGVzdHJveSgpLHRoaXMudGlsZT1udWxsKTtPcGVuTGF5ZXJzLkxheWVyLnByb3RvdHlwZS5kZXN0cm95LmFwcGx5KHRoaXMsCmFyZ3VtZW50cyl9LGNsb25lOmZ1bmN0aW9uKGEpe251bGw9PWEmJihhPW5ldyBPcGVuTGF5ZXJzLkxheWVyLkltYWdlKHRoaXMubmFtZSx0aGlzLnVybCx0aGlzLmV4dGVudCx0aGlzLnNpemUsdGhpcy5nZXRPcHRpb25zKCkpKTtyZXR1cm4gYT1PcGVuTGF5ZXJzLkxheWVyLnByb3RvdHlwZS5jbG9uZS5hcHBseSh0aGlzLFthXSl9LHNldE1hcDpmdW5jdGlvbihhKXtudWxsPT10aGlzLm9wdGlvbnMubWF4UmVzb2x1dGlvbiYmKHRoaXMub3B0aW9ucy5tYXhSZXNvbHV0aW9uPXRoaXMuYXNwZWN0UmF0aW8qdGhpcy5leHRlbnQuZ2V0V2lkdGgoKS90aGlzLnNpemUudyk7T3BlbkxheWVycy5MYXllci5wcm90b3R5cGUuc2V0TWFwLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sbW92ZVRvOmZ1bmN0aW9uKGEsYixjKXtPcGVuTGF5ZXJzLkxheWVyLnByb3RvdHlwZS5tb3ZlVG8uYXBwbHkodGhpcyxhcmd1bWVudHMpO3ZhciBkPW51bGw9PXRoaXMudGlsZTtpZihifHxkKXt0aGlzLnNldFRpbGVTaXplKCk7CnZhciBlPXRoaXMubWFwLmdldExheWVyUHhGcm9tTG9uTGF0KHtsb246dGhpcy5leHRlbnQubGVmdCxsYXQ6dGhpcy5leHRlbnQudG9wfSk7ZD8odGhpcy50aWxlPW5ldyBPcGVuTGF5ZXJzLlRpbGUuSW1hZ2UodGhpcyxlLHRoaXMuZXh0ZW50LG51bGwsdGhpcy50aWxlU2l6ZSksdGhpcy5hZGRUaWxlTW9uaXRvcmluZ0hvb2tzKHRoaXMudGlsZSkpOih0aGlzLnRpbGUuc2l6ZT10aGlzLnRpbGVTaXplLmNsb25lKCksdGhpcy50aWxlLnBvc2l0aW9uPWUuY2xvbmUoKSk7dGhpcy50aWxlLmRyYXcoKX19LHNldFRpbGVTaXplOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5leHRlbnQuZ2V0V2lkdGgoKS90aGlzLm1hcC5nZXRSZXNvbHV0aW9uKCksYj10aGlzLmV4dGVudC5nZXRIZWlnaHQoKS90aGlzLm1hcC5nZXRSZXNvbHV0aW9uKCk7dGhpcy50aWxlU2l6ZT1uZXcgT3BlbkxheWVycy5TaXplKGEsYil9LGFkZFRpbGVNb25pdG9yaW5nSG9va3M6ZnVuY3Rpb24oYSl7YS5vbkxvYWRTdGFydD0KZnVuY3Rpb24oKXt0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoImxvYWRzdGFydCIpfTthLmV2ZW50cy5yZWdpc3RlcigibG9hZHN0YXJ0Iix0aGlzLGEub25Mb2FkU3RhcnQpO2Eub25Mb2FkRW5kPWZ1bmN0aW9uKCl7dGhpcy5ldmVudHMudHJpZ2dlckV2ZW50KCJsb2FkZW5kIil9O2EuZXZlbnRzLnJlZ2lzdGVyKCJsb2FkZW5kIix0aGlzLGEub25Mb2FkRW5kKTthLmV2ZW50cy5yZWdpc3RlcigidW5sb2FkIix0aGlzLGEub25Mb2FkRW5kKX0scmVtb3ZlVGlsZU1vbml0b3JpbmdIb29rczpmdW5jdGlvbihhKXthLnVubG9hZCgpO2EuZXZlbnRzLnVuKHtsb2Fkc3RhcnQ6YS5vbkxvYWRTdGFydCxsb2FkZW5kOmEub25Mb2FkRW5kLHVubG9hZDphLm9uTG9hZEVuZCxzY29wZTp0aGlzfSl9LHNldFVybDpmdW5jdGlvbihhKXt0aGlzLnVybD1hO3RoaXMudGlsZS5kcmF3KCl9LGdldFVSTDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy51cmx9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuTGF5ZXIuSW1hZ2UifSk7T3BlbkxheWVycy5TdHJhdGVneT1PcGVuTGF5ZXJzLkNsYXNzKHtsYXllcjpudWxsLG9wdGlvbnM6bnVsbCxhY3RpdmU6bnVsbCxhdXRvQWN0aXZhdGU6ITAsYXV0b0Rlc3Ryb3k6ITAsaW5pdGlhbGl6ZTpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHRoaXMsYSk7dGhpcy5vcHRpb25zPWE7dGhpcy5hY3RpdmU9ITF9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmRlYWN0aXZhdGUoKTt0aGlzLm9wdGlvbnM9dGhpcy5sYXllcj1udWxsfSxzZXRMYXllcjpmdW5jdGlvbihhKXt0aGlzLmxheWVyPWF9LGFjdGl2YXRlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYWN0aXZlPyExOnRoaXMuYWN0aXZlPSEwfSxkZWFjdGl2YXRlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYWN0aXZlPyh0aGlzLmFjdGl2ZT0hMSwhMCk6ITF9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuU3RyYXRlZ3kifSk7T3BlbkxheWVycy5TdHJhdGVneS5TYXZlPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5TdHJhdGVneSx7ZXZlbnRzOm51bGwsYXV0bzohMSx0aW1lcjpudWxsLGluaXRpYWxpemU6ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5TdHJhdGVneS5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLFthXSk7dGhpcy5ldmVudHM9bmV3IE9wZW5MYXllcnMuRXZlbnRzKHRoaXMpfSxhY3RpdmF0ZTpmdW5jdGlvbigpe3ZhciBhPU9wZW5MYXllcnMuU3RyYXRlZ3kucHJvdG90eXBlLmFjdGl2YXRlLmNhbGwodGhpcyk7aWYoYSYmdGhpcy5hdXRvKWlmKCJudW1iZXIiPT09dHlwZW9mIHRoaXMuYXV0byl0aGlzLnRpbWVyPXdpbmRvdy5zZXRJbnRlcnZhbChPcGVuTGF5ZXJzLkZ1bmN0aW9uLmJpbmQodGhpcy5zYXZlLHRoaXMpLDFFMyp0aGlzLmF1dG8pO2Vsc2UgdGhpcy5sYXllci5ldmVudHMub24oe2ZlYXR1cmVhZGRlZDp0aGlzLnRyaWdnZXJTYXZlLGFmdGVyZmVhdHVyZW1vZGlmaWVkOnRoaXMudHJpZ2dlclNhdmUsCnNjb3BlOnRoaXN9KTtyZXR1cm4gYX0sZGVhY3RpdmF0ZTpmdW5jdGlvbigpe3ZhciBhPU9wZW5MYXllcnMuU3RyYXRlZ3kucHJvdG90eXBlLmRlYWN0aXZhdGUuY2FsbCh0aGlzKTthJiZ0aGlzLmF1dG8mJigibnVtYmVyIj09PXR5cGVvZiB0aGlzLmF1dG8/d2luZG93LmNsZWFySW50ZXJ2YWwodGhpcy50aW1lcik6dGhpcy5sYXllci5ldmVudHMudW4oe2ZlYXR1cmVhZGRlZDp0aGlzLnRyaWdnZXJTYXZlLGFmdGVyZmVhdHVyZW1vZGlmaWVkOnRoaXMudHJpZ2dlclNhdmUsc2NvcGU6dGhpc30pKTtyZXR1cm4gYX0sdHJpZ2dlclNhdmU6ZnVuY3Rpb24oYSl7dmFyIGI9YS5mZWF0dXJlO2Iuc3RhdGUhPT1PcGVuTGF5ZXJzLlN0YXRlLklOU0VSVCYmYi5zdGF0ZSE9PU9wZW5MYXllcnMuU3RhdGUuVVBEQVRFJiZiLnN0YXRlIT09T3BlbkxheWVycy5TdGF0ZS5ERUxFVEV8fHRoaXMuc2F2ZShbYS5mZWF0dXJlXSl9LHNhdmU6ZnVuY3Rpb24oYSl7YXx8KGE9dGhpcy5sYXllci5mZWF0dXJlcyk7CnRoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgic3RhcnQiLHtmZWF0dXJlczphfSk7dmFyIGI9dGhpcy5sYXllci5wcm9qZWN0aW9uLGM9dGhpcy5sYXllci5tYXAuZ2V0UHJvamVjdGlvbk9iamVjdCgpO2lmKCFjLmVxdWFscyhiKSl7Zm9yKHZhciBkPWEubGVuZ3RoLGU9QXJyYXkoZCksZixnLGg9MDtoPGQ7KytoKWY9YVtoXSxnPWYuY2xvbmUoKSxnLmZpZD1mLmZpZCxnLnN0YXRlPWYuc3RhdGUsZi51cmwmJihnLnVybD1mLnVybCksZy5fb3JpZ2luYWw9ZixnLmdlb21ldHJ5LnRyYW5zZm9ybShjLGIpLGVbaF09ZzthPWV9dGhpcy5sYXllci5wcm90b2NvbC5jb21taXQoYSx7Y2FsbGJhY2s6dGhpcy5vbkNvbW1pdCxzY29wZTp0aGlzfSl9LG9uQ29tbWl0OmZ1bmN0aW9uKGEpe3ZhciBiPXtyZXNwb25zZTphfTtpZihhLnN1Y2Nlc3MoKSl7Zm9yKHZhciBjPWEucmVxRmVhdHVyZXMsZCxlPVtdLGY9YS5pbnNlcnRJZHN8fFtdLGc9MCxoPTAsaz1jLmxlbmd0aDtoPGs7KytoKWlmKGQ9Y1toXSwKZD1kLl9vcmlnaW5hbHx8ZCxhPWQuc3RhdGUpYT09T3BlbkxheWVycy5TdGF0ZS5ERUxFVEU/ZS5wdXNoKGQpOmE9PU9wZW5MYXllcnMuU3RhdGUuSU5TRVJUJiYoZC5maWQ9ZltnXSwrK2cpLGQuc3RhdGU9bnVsbDswPGUubGVuZ3RoJiZ0aGlzLmxheWVyLmRlc3Ryb3lGZWF0dXJlcyhlKTt0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoInN1Y2Nlc3MiLGIpfWVsc2UgdGhpcy5ldmVudHMudHJpZ2dlckV2ZW50KCJmYWlsIixiKX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5TdHJhdGVneS5TYXZlIn0pO09wZW5MYXllcnMuRXZlbnRzLmZlYXR1cmVjbGljaz1PcGVuTGF5ZXJzLkNsYXNzKHtjYWNoZTpudWxsLG1hcDpudWxsLHByb3ZpZGVzOlsiZmVhdHVyZWNsaWNrIiwibm9mZWF0dXJlY2xpY2siLCJmZWF0dXJlb3ZlciIsImZlYXR1cmVvdXQiXSxpbml0aWFsaXplOmZ1bmN0aW9uKGEpe3RoaXMudGFyZ2V0PWE7aWYoYS5vYmplY3QgaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLk1hcCl0aGlzLnNldE1hcChhLm9iamVjdCk7ZWxzZSBpZihhLm9iamVjdCBpbnN0YW5jZW9mIE9wZW5MYXllcnMuTGF5ZXIuVmVjdG9yKWEub2JqZWN0Lm1hcD90aGlzLnNldE1hcChhLm9iamVjdC5tYXApOmEub2JqZWN0LmV2ZW50cy5yZWdpc3RlcigiYWRkZWQiLHRoaXMsZnVuY3Rpb24oYil7dGhpcy5zZXRNYXAoYS5vYmplY3QubWFwKX0pO2Vsc2UgdGhyb3ciTGlzdGVuZXJzIGZvciAnIit0aGlzLnByb3ZpZGVzLmpvaW4oIicsICciKSsiJyBldmVudHMgY2FuIG9ubHkgYmUgcmVnaXN0ZXJlZCBmb3IgT3BlbkxheWVycy5MYXllci5WZWN0b3Igb3IgT3BlbkxheWVycy5NYXAgaW5zdGFuY2VzIjsKZm9yKHZhciBiPXRoaXMucHJvdmlkZXMubGVuZ3RoLTE7MDw9YjstLWIpYS5leHRlbnNpb25zW3RoaXMucHJvdmlkZXNbYl1dPSEwfSxzZXRNYXA6ZnVuY3Rpb24oYSl7dGhpcy5tYXA9YTt0aGlzLmNhY2hlPXt9O2EuZXZlbnRzLnJlZ2lzdGVyKCJtb3VzZWRvd24iLHRoaXMsdGhpcy5zdGFydCx7ZXh0ZW5zaW9uOiEwfSk7YS5ldmVudHMucmVnaXN0ZXIoIm1vdXNldXAiLHRoaXMsdGhpcy5vbkNsaWNrLHtleHRlbnNpb246ITB9KTthLmV2ZW50cy5yZWdpc3RlcigidG91Y2hzdGFydCIsdGhpcyx0aGlzLnN0YXJ0LHtleHRlbnNpb246ITB9KTthLmV2ZW50cy5yZWdpc3RlcigidG91Y2htb3ZlIix0aGlzLHRoaXMuY2FuY2VsLHtleHRlbnNpb246ITB9KTthLmV2ZW50cy5yZWdpc3RlcigidG91Y2hlbmQiLHRoaXMsdGhpcy5vbkNsaWNrLHtleHRlbnNpb246ITB9KTthLmV2ZW50cy5yZWdpc3RlcigibW91c2Vtb3ZlIix0aGlzLHRoaXMub25Nb3VzZW1vdmUse2V4dGVuc2lvbjohMH0pfSwKc3RhcnQ6ZnVuY3Rpb24oYSl7dGhpcy5zdGFydEV2dD1hfSxjYW5jZWw6ZnVuY3Rpb24oYSl7ZGVsZXRlIHRoaXMuc3RhcnRFdnR9LG9uQ2xpY2s6ZnVuY3Rpb24oYSl7aWYodGhpcy5zdGFydEV2dCYmKCJ0b3VjaGVuZCI9PT1hLnR5cGV8fE9wZW5MYXllcnMuRXZlbnQuaXNMZWZ0Q2xpY2soYSkpKXthPXRoaXMuZ2V0RmVhdHVyZXModGhpcy5zdGFydEV2dCk7ZGVsZXRlIHRoaXMuc3RhcnRFdnQ7Zm9yKHZhciBiLGMsZD17fSxlPTAsZj1hLmxlbmd0aDtlPGYmJihiPWFbZV0sYz1iLmxheWVyLGRbYy5pZF09ITAsYj10aGlzLnRyaWdnZXJFdmVudCgiZmVhdHVyZWNsaWNrIix7ZmVhdHVyZTpifSksITEhPT1iKTsrK2UpO2U9MDtmb3IoZj10aGlzLm1hcC5sYXllcnMubGVuZ3RoO2U8ZjsrK2UpYz10aGlzLm1hcC5sYXllcnNbZV0sYyBpbnN0YW5jZW9mIE9wZW5MYXllcnMuTGF5ZXIuVmVjdG9yJiYhZFtjLmlkXSYmdGhpcy50cmlnZ2VyRXZlbnQoIm5vZmVhdHVyZWNsaWNrIix7bGF5ZXI6Y30pfX0sCm9uTW91c2Vtb3ZlOmZ1bmN0aW9uKGEpe2RlbGV0ZSB0aGlzLnN0YXJ0RXZ0O3ZhciBiPXRoaXMuZ2V0RmVhdHVyZXMoYSksYz17fTthPVtdO2Zvcih2YXIgZCxlPTAsZj1iLmxlbmd0aDtlPGY7KytlKWQ9YltlXSxjW2QuaWRdPWQsdGhpcy5jYWNoZVtkLmlkXXx8YS5wdXNoKGQpO3ZhciBiPVtdLGc7Zm9yKGcgaW4gdGhpcy5jYWNoZSlkPXRoaXMuY2FjaGVbZ10sZC5sYXllciYmZC5sYXllci5tYXA/Y1tkLmlkXXx8Yi5wdXNoKGQpOmRlbGV0ZSB0aGlzLmNhY2hlW2ddO2U9MDtmb3IoZj1hLmxlbmd0aDtlPGYmJihkPWFbZV0sdGhpcy5jYWNoZVtkLmlkXT1kLGc9dGhpcy50cmlnZ2VyRXZlbnQoImZlYXR1cmVvdmVyIix7ZmVhdHVyZTpkfSksITEhPT1nKTsrK2UpO2U9MDtmb3IoZj1iLmxlbmd0aDtlPGYmJihkPWJbZV0sZGVsZXRlIHRoaXMuY2FjaGVbZC5pZF0sZz10aGlzLnRyaWdnZXJFdmVudCgiZmVhdHVyZW91dCIse2ZlYXR1cmU6ZH0pLCExIT09Zyk7KytlKTt9LHRyaWdnZXJFdmVudDpmdW5jdGlvbihhLApiKXt2YXIgYz1iLmZlYXR1cmU/Yi5mZWF0dXJlLmxheWVyOmIubGF5ZXIsZD10aGlzLnRhcmdldC5vYmplY3Q7aWYoZCBpbnN0YW5jZW9mIE9wZW5MYXllcnMuTWFwfHxkPT09YylyZXR1cm4gdGhpcy50YXJnZXQudHJpZ2dlckV2ZW50KGEsYil9LGdldEZlYXR1cmVzOmZ1bmN0aW9uKGEpe3ZhciBiPWEuY2xpZW50WCxjPWEuY2xpZW50WSxkPVtdLGU9W10sZj1bXSxnLGgsayxsO2ZvcihsPXRoaXMubWFwLmxheWVycy5sZW5ndGgtMTswPD1sOy0tbClpZihnPXRoaXMubWFwLmxheWVyc1tsXSwibm9uZSIhPT1nLmRpdi5zdHlsZS5kaXNwbGF5KWlmKGcucmVuZGVyZXIgaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLlJlbmRlcmVyLkVsZW1lbnRzKXtpZihnIGluc3RhbmNlb2YgT3BlbkxheWVycy5MYXllci5WZWN0b3IpZm9yKGg9ZG9jdW1lbnQuZWxlbWVudEZyb21Qb2ludChiLGMpO2gmJmguX2ZlYXR1cmVJZDspKGs9Zy5nZXRGZWF0dXJlQnlJZChoLl9mZWF0dXJlSWQpKT8oZC5wdXNoKGspLApoLnN0eWxlLmRpc3BsYXk9Im5vbmUiLGUucHVzaChoKSxoPWRvY3VtZW50LmVsZW1lbnRGcm9tUG9pbnQoYixjKSk6aD0hMTtmLnB1c2goZyk7Zy5kaXYuc3R5bGUuZGlzcGxheT0ibm9uZSJ9ZWxzZSBnLnJlbmRlcmVyIGluc3RhbmNlb2YgT3BlbkxheWVycy5SZW5kZXJlci5DYW52YXMmJihrPWcucmVuZGVyZXIuZ2V0RmVhdHVyZUlkRnJvbUV2ZW50KGEpKSYmKGQucHVzaChrKSxmLnB1c2goZykpO2w9MDtmb3IoYT1lLmxlbmd0aDtsPGE7KytsKWVbbF0uc3R5bGUuZGlzcGxheT0iIjtmb3IobD1mLmxlbmd0aC0xOzA8PWw7LS1sKWZbbF0uZGl2LnN0eWxlLmRpc3BsYXk9ImJsb2NrIjtyZXR1cm4gZH0sZGVzdHJveTpmdW5jdGlvbigpe2Zvcih2YXIgYT10aGlzLnByb3ZpZGVzLmxlbmd0aC0xOzA8PWE7LS1hKWRlbGV0ZSB0aGlzLnRhcmdldC5leHRlbnNpb25zW3RoaXMucHJvdmlkZXNbYV1dO3RoaXMubWFwLmV2ZW50cy51bih7bW91c2Vtb3ZlOnRoaXMub25Nb3VzZW1vdmUsbW91c2Vkb3duOnRoaXMuc3RhcnQsCm1vdXNldXA6dGhpcy5vbkNsaWNrLHRvdWNoc3RhcnQ6dGhpcy5zdGFydCx0b3VjaG1vdmU6dGhpcy5jYW5jZWwsdG91Y2hlbmQ6dGhpcy5vbkNsaWNrLHNjb3BlOnRoaXN9KTtkZWxldGUgdGhpcy5jYWNoZTtkZWxldGUgdGhpcy5tYXA7ZGVsZXRlIHRoaXMudGFyZ2V0fX0pO09wZW5MYXllcnMuRXZlbnRzLm5vZmVhdHVyZWNsaWNrPU9wZW5MYXllcnMuRXZlbnRzLmZlYXR1cmVjbGljaztPcGVuTGF5ZXJzLkV2ZW50cy5mZWF0dXJlb3Zlcj1PcGVuTGF5ZXJzLkV2ZW50cy5mZWF0dXJlY2xpY2s7T3BlbkxheWVycy5FdmVudHMuZmVhdHVyZW91dD1PcGVuTGF5ZXJzLkV2ZW50cy5mZWF0dXJlY2xpY2s7T3BlbkxheWVycy5Gb3JtYXQuR1BYPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Gb3JtYXQuWE1MLHtkZWZhdWx0RGVzYzoiTm8gZGVzY3JpcHRpb24gYXZhaWxhYmxlIixleHRyYWN0V2F5cG9pbnRzOiEwLGV4dHJhY3RUcmFja3M6ITAsZXh0cmFjdFJvdXRlczohMCxleHRyYWN0QXR0cmlidXRlczohMCxuYW1lc3BhY2VzOntncHg6Imh0dHA6Ly93d3cudG9wb2dyYWZpeC5jb20vR1BYLzEvMSIseHNpOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxL1hNTFNjaGVtYS1pbnN0YW5jZSJ9LHNjaGVtYUxvY2F0aW9uOiJodHRwOi8vd3d3LnRvcG9ncmFmaXguY29tL0dQWC8xLzEgaHR0cDovL3d3dy50b3BvZ3JhZml4LmNvbS9HUFgvMS8xL2dweC54c2QiLGNyZWF0b3I6Ik9wZW5MYXllcnMiLGluaXRpYWxpemU6ZnVuY3Rpb24oYSl7dGhpcy5leHRlcm5hbFByb2plY3Rpb249bmV3IE9wZW5MYXllcnMuUHJvamVjdGlvbigiRVBTRzo0MzI2Iik7T3BlbkxheWVycy5Gb3JtYXQuWE1MLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsClthXSl9LHJlYWQ6ZnVuY3Rpb24oYSl7InN0cmluZyI9PXR5cGVvZiBhJiYoYT1PcGVuTGF5ZXJzLkZvcm1hdC5YTUwucHJvdG90eXBlLnJlYWQuYXBwbHkodGhpcyxbYV0pKTt2YXIgYj1bXTtpZih0aGlzLmV4dHJhY3RUcmFja3MpZm9yKHZhciBjPWEuZ2V0RWxlbWVudHNCeVRhZ05hbWUoInRyayIpLGQ9MCxlPWMubGVuZ3RoO2Q8ZTtkKyspe3ZhciBmPXt9O3RoaXMuZXh0cmFjdEF0dHJpYnV0ZXMmJihmPXRoaXMucGFyc2VBdHRyaWJ1dGVzKGNbZF0pKTtmb3IodmFyIGc9dGhpcy5nZXRFbGVtZW50c0J5VGFnTmFtZU5TKGNbZF0sY1tkXS5uYW1lc3BhY2VVUkksInRya3NlZyIpLGg9MCxrPWcubGVuZ3RoO2g8aztoKyspe3ZhciBsPXRoaXMuZXh0cmFjdFNlZ21lbnQoZ1toXSwidHJrcHQiKTtiLnB1c2gobmV3IE9wZW5MYXllcnMuRmVhdHVyZS5WZWN0b3IobCxmKSl9fWlmKHRoaXMuZXh0cmFjdFJvdXRlcylmb3IoZT1hLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJydGUiKSxjPTAsZD0KZS5sZW5ndGg7YzxkO2MrKylmPXt9LHRoaXMuZXh0cmFjdEF0dHJpYnV0ZXMmJihmPXRoaXMucGFyc2VBdHRyaWJ1dGVzKGVbY10pKSxnPXRoaXMuZXh0cmFjdFNlZ21lbnQoZVtjXSwicnRlcHQiKSxiLnB1c2gobmV3IE9wZW5MYXllcnMuRmVhdHVyZS5WZWN0b3IoZyxmKSk7aWYodGhpcy5leHRyYWN0V2F5cG9pbnRzKWZvcihhPWEuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIndwdCIpLGM9MCxlPWEubGVuZ3RoO2M8ZTtjKyspZj17fSx0aGlzLmV4dHJhY3RBdHRyaWJ1dGVzJiYoZj10aGlzLnBhcnNlQXR0cmlidXRlcyhhW2NdKSksZD1uZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludChhW2NdLmdldEF0dHJpYnV0ZSgibG9uIiksYVtjXS5nZXRBdHRyaWJ1dGUoImxhdCIpKSxiLnB1c2gobmV3IE9wZW5MYXllcnMuRmVhdHVyZS5WZWN0b3IoZCxmKSk7aWYodGhpcy5pbnRlcm5hbFByb2plY3Rpb24mJnRoaXMuZXh0ZXJuYWxQcm9qZWN0aW9uKWZvcihmPTAsYT1iLmxlbmd0aDtmPGE7ZisrKWJbZl0uZ2VvbWV0cnkudHJhbnNmb3JtKHRoaXMuZXh0ZXJuYWxQcm9qZWN0aW9uLAp0aGlzLmludGVybmFsUHJvamVjdGlvbik7cmV0dXJuIGJ9LGV4dHJhY3RTZWdtZW50OmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPXRoaXMuZ2V0RWxlbWVudHNCeVRhZ05hbWVOUyhhLGEubmFtZXNwYWNlVVJJLGIpLGQ9W10sZT0wLGY9Yy5sZW5ndGg7ZTxmO2UrKylkLnB1c2gobmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoY1tlXS5nZXRBdHRyaWJ1dGUoImxvbiIpLGNbZV0uZ2V0QXR0cmlidXRlKCJsYXQiKSkpO3JldHVybiBuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5MaW5lU3RyaW5nKGQpfSxwYXJzZUF0dHJpYnV0ZXM6ZnVuY3Rpb24oYSl7dmFyIGI9e307YT1hLmZpcnN0Q2hpbGQ7Zm9yKHZhciBjLGQ7YTspMT09YS5ub2RlVHlwZSYmYS5maXJzdENoaWxkJiYoYz1hLmZpcnN0Q2hpbGQsMz09Yy5ub2RlVHlwZXx8ND09Yy5ub2RlVHlwZSkmJihkPWEucHJlZml4P2Eubm9kZU5hbWUuc3BsaXQoIjoiKVsxXTphLm5vZGVOYW1lLCJ0cmtzZWciIT1kJiYicnRlcHQiIT1kJiYKKGJbZF09Yy5ub2RlVmFsdWUpKSxhPWEubmV4dFNpYmxpbmc7cmV0dXJuIGJ9LHdyaXRlOmZ1bmN0aW9uKGEsYil7YT1PcGVuTGF5ZXJzLlV0aWwuaXNBcnJheShhKT9hOlthXTt2YXIgYz10aGlzLmNyZWF0ZUVsZW1lbnROUyh0aGlzLm5hbWVzcGFjZXMuZ3B4LCJncHgiKTtjLnNldEF0dHJpYnV0ZSgidmVyc2lvbiIsIjEuMSIpO2Muc2V0QXR0cmlidXRlKCJjcmVhdG9yIix0aGlzLmNyZWF0b3IpO3RoaXMuc2V0QXR0cmlidXRlcyhjLHsieHNpOnNjaGVtYUxvY2F0aW9uIjp0aGlzLnNjaGVtYUxvY2F0aW9ufSk7YiYmIm9iamVjdCI9PXR5cGVvZiBiJiZjLmFwcGVuZENoaWxkKHRoaXMuYnVpbGRNZXRhZGF0YU5vZGUoYikpO2Zvcih2YXIgZD0wLGU9YS5sZW5ndGg7ZDxlO2QrKyljLmFwcGVuZENoaWxkKHRoaXMuYnVpbGRGZWF0dXJlTm9kZShhW2RdKSk7cmV0dXJuIE9wZW5MYXllcnMuRm9ybWF0LlhNTC5wcm90b3R5cGUud3JpdGUuYXBwbHkodGhpcyxbY10pfSxidWlsZE1ldGFkYXRhTm9kZTpmdW5jdGlvbihhKXtmb3IodmFyIGI9ClsibmFtZSIsImRlc2MiLCJhdXRob3IiXSxjPXRoaXMuY3JlYXRlRWxlbWVudE5TKHRoaXMubmFtZXNwYWNlcy5ncHgsIm1ldGFkYXRhIiksZD0wO2Q8Yi5sZW5ndGg7ZCsrKXt2YXIgZT1iW2RdO2lmKGFbZV0pe3ZhciBmPXRoaXMuY3JlYXRlRWxlbWVudE5TKHRoaXMubmFtZXNwYWNlcy5ncHgsZSk7Zi5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZVRleHROb2RlKGFbZV0pKTtjLmFwcGVuZENoaWxkKGYpfX1yZXR1cm4gY30sYnVpbGRGZWF0dXJlTm9kZTpmdW5jdGlvbihhKXt2YXIgYj1hLmdlb21ldHJ5LGI9Yi5jbG9uZSgpO3RoaXMuaW50ZXJuYWxQcm9qZWN0aW9uJiZ0aGlzLmV4dGVybmFsUHJvamVjdGlvbiYmYi50cmFuc2Zvcm0odGhpcy5pbnRlcm5hbFByb2plY3Rpb24sdGhpcy5leHRlcm5hbFByb2plY3Rpb24pO2lmKCJPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50Ij09Yi5DTEFTU19OQU1FKXt2YXIgYz10aGlzLmJ1aWxkV3B0Tm9kZShiKTt0aGlzLmFwcGVuZEF0dHJpYnV0ZXNOb2RlKGMsCmEpO3JldHVybiBjfWM9dGhpcy5jcmVhdGVFbGVtZW50TlModGhpcy5uYW1lc3BhY2VzLmdweCwidHJrIik7dGhpcy5hcHBlbmRBdHRyaWJ1dGVzTm9kZShjLGEpO2E9dGhpcy5idWlsZFRya1NlZ05vZGUoYik7YT1PcGVuTGF5ZXJzLlV0aWwuaXNBcnJheShhKT9hOlthXTtmb3IodmFyIGI9MCxkPWEubGVuZ3RoO2I8ZDtiKyspYy5hcHBlbmRDaGlsZChhW2JdKTtyZXR1cm4gY30sYnVpbGRUcmtTZWdOb2RlOmZ1bmN0aW9uKGEpe3ZhciBiLGMsZCxlO2lmKCJPcGVuTGF5ZXJzLkdlb21ldHJ5LkxpbmVTdHJpbmciPT1hLkNMQVNTX05BTUV8fCJPcGVuTGF5ZXJzLkdlb21ldHJ5LkxpbmVhclJpbmciPT1hLkNMQVNTX05BTUUpe2I9dGhpcy5jcmVhdGVFbGVtZW50TlModGhpcy5uYW1lc3BhY2VzLmdweCwidHJrc2VnIik7Yz0wO2ZvcihkPWEuY29tcG9uZW50cy5sZW5ndGg7YzxkO2MrKyllPWEuY29tcG9uZW50c1tjXSxiLmFwcGVuZENoaWxkKHRoaXMuYnVpbGRUcmtQdE5vZGUoZSkpOwpyZXR1cm4gYn1iPVtdO2M9MDtmb3IoZD1hLmNvbXBvbmVudHMubGVuZ3RoO2M8ZDtjKyspYi5wdXNoKHRoaXMuYnVpbGRUcmtTZWdOb2RlKGEuY29tcG9uZW50c1tjXSkpO3JldHVybiBifSxidWlsZFRya1B0Tm9kZTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROUyh0aGlzLm5hbWVzcGFjZXMuZ3B4LCJ0cmtwdCIpO2Iuc2V0QXR0cmlidXRlKCJsb24iLGEueCk7Yi5zZXRBdHRyaWJ1dGUoImxhdCIsYS55KTtyZXR1cm4gYn0sYnVpbGRXcHROb2RlOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TKHRoaXMubmFtZXNwYWNlcy5ncHgsIndwdCIpO2Iuc2V0QXR0cmlidXRlKCJsb24iLGEueCk7Yi5zZXRBdHRyaWJ1dGUoImxhdCIsYS55KTtyZXR1cm4gYn0sYXBwZW5kQXR0cmlidXRlc05vZGU6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmNyZWF0ZUVsZW1lbnROUyh0aGlzLm5hbWVzcGFjZXMuZ3B4LCJuYW1lIik7Yy5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZVRleHROb2RlKGIuYXR0cmlidXRlcy5uYW1lfHwKYi5pZCkpO2EuYXBwZW5kQ2hpbGQoYyk7Yz10aGlzLmNyZWF0ZUVsZW1lbnROUyh0aGlzLm5hbWVzcGFjZXMuZ3B4LCJkZXNjIik7Yy5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZVRleHROb2RlKGIuYXR0cmlidXRlcy5kZXNjcmlwdGlvbnx8dGhpcy5kZWZhdWx0RGVzYykpO2EuYXBwZW5kQ2hpbGQoYyl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuRm9ybWF0LkdQWCJ9KTtPcGVuTGF5ZXJzLkZvcm1hdC5XTVNEZXNjcmliZUxheWVyPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Gb3JtYXQuWE1MLlZlcnNpb25lZE9HQyx7ZGVmYXVsdFZlcnNpb246IjEuMS4xIixDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkZvcm1hdC5XTVNEZXNjcmliZUxheWVyIn0pO09wZW5MYXllcnMuRm9ybWF0LldNU0Rlc2NyaWJlTGF5ZXIudjFfMV8xPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Gb3JtYXQuV01TRGVzY3JpYmVMYXllcix7aW5pdGlhbGl6ZTpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLkZvcm1hdC5XTVNEZXNjcmliZUxheWVyLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsW2FdKX0scmVhZDpmdW5jdGlvbihhKXsic3RyaW5nIj09dHlwZW9mIGEmJihhPU9wZW5MYXllcnMuRm9ybWF0LlhNTC5wcm90b3R5cGUucmVhZC5hcHBseSh0aGlzLFthXSkpO2Zvcih2YXIgYj1hLmRvY3VtZW50RWxlbWVudC5jaGlsZE5vZGVzLGM9e2xheWVyRGVzY3JpcHRpb25zOltdfSxkLGUsZj0wO2Y8Yi5sZW5ndGg7KytmKWlmKGQ9YltmXSxlPWQubm9kZU5hbWUsIkxheWVyRGVzY3JpcHRpb24iPT1lKXtlPWQuZ2V0QXR0cmlidXRlKCJuYW1lIik7dmFyIGc9IiIsaD0iIixrPSIiO2QuZ2V0QXR0cmlidXRlKCJvd3NUeXBlIik/KGc9ZC5nZXRBdHRyaWJ1dGUoIm93c1R5cGUiKSwKaD1kLmdldEF0dHJpYnV0ZSgib3dzVVJMIikpOiIiIT1kLmdldEF0dHJpYnV0ZSgid2ZzIik/KGc9IldGUyIsaD1kLmdldEF0dHJpYnV0ZSgid2ZzIikpOiIiIT1kLmdldEF0dHJpYnV0ZSgid2NzIikmJihnPSJXQ1MiLGg9ZC5nZXRBdHRyaWJ1dGUoIndjcyIpKTtkPWQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIlF1ZXJ5Iik7MDxkLmxlbmd0aCYmKChrPWRbMF0uZ2V0QXR0cmlidXRlKCJ0eXBlTmFtZSIpKXx8KGs9ZFswXS5nZXRBdHRyaWJ1dGUoInR5cGVuYW1lIikpKTtkPXtsYXllck5hbWU6ZSxvd3NUeXBlOmcsb3dzVVJMOmgsdHlwZU5hbWU6a307Yy5sYXllckRlc2NyaXB0aW9ucy5wdXNoKGQpO2MubGVuZ3RoPWMubGF5ZXJEZXNjcmlwdGlvbnMubGVuZ3RoO2NbYy5sZW5ndGgtMV09ZH1lbHNlIGlmKCJTZXJ2aWNlRXhjZXB0aW9uIj09ZSlyZXR1cm57ZXJyb3I6KG5ldyBPcGVuTGF5ZXJzLkZvcm1hdC5PR0NFeGNlcHRpb25SZXBvcnQpLnJlYWQoYSl9O3JldHVybiBjfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkZvcm1hdC5XTVNEZXNjcmliZUxheWVyLnYxXzFfMSJ9KTsKT3BlbkxheWVycy5Gb3JtYXQuV01TRGVzY3JpYmVMYXllci52MV8xXzA9T3BlbkxheWVycy5Gb3JtYXQuV01TRGVzY3JpYmVMYXllci52MV8xXzE7T3BlbkxheWVycy5MYXllci5YWVo9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkxheWVyLkdyaWQse2lzQmFzZUxheWVyOiEwLHNwaGVyaWNhbE1lcmNhdG9yOiExLHpvb21PZmZzZXQ6MCxzZXJ2ZXJSZXNvbHV0aW9uczpudWxsLGluaXRpYWxpemU6ZnVuY3Rpb24oYSxiLGMpe2lmKGMmJmMuc3BoZXJpY2FsTWVyY2F0b3J8fHRoaXMuc3BoZXJpY2FsTWVyY2F0b3IpYz1PcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHtwcm9qZWN0aW9uOiJFUFNHOjkwMDkxMyIsbnVtWm9vbUxldmVsczoxOX0sYyk7T3BlbkxheWVycy5MYXllci5HcmlkLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsW2F8fHRoaXMubmFtZSxifHx0aGlzLnVybCx7fSxjXSl9LGNsb25lOmZ1bmN0aW9uKGEpe251bGw9PWEmJihhPW5ldyBPcGVuTGF5ZXJzLkxheWVyLlhZWih0aGlzLm5hbWUsdGhpcy51cmwsdGhpcy5nZXRPcHRpb25zKCkpKTtyZXR1cm4gYT1PcGVuTGF5ZXJzLkxheWVyLkdyaWQucHJvdG90eXBlLmNsb25lLmFwcGx5KHRoaXMsClthXSl9LGdldFVSTDpmdW5jdGlvbihhKXthPXRoaXMuZ2V0WFlaKGEpO3ZhciBiPXRoaXMudXJsO09wZW5MYXllcnMuVXRpbC5pc0FycmF5KGIpJiYoYj10aGlzLnNlbGVjdFVybCgiIithLngrYS55K2EueixiKSk7cmV0dXJuIE9wZW5MYXllcnMuU3RyaW5nLmZvcm1hdChiLGEpfSxnZXRYWVo6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5nZXRTZXJ2ZXJSZXNvbHV0aW9uKCksYz1NYXRoLnJvdW5kKChhLmxlZnQtdGhpcy5tYXhFeHRlbnQubGVmdCkvKGIqdGhpcy50aWxlU2l6ZS53KSk7YT1NYXRoLnJvdW5kKCh0aGlzLm1heEV4dGVudC50b3AtYS50b3ApLyhiKnRoaXMudGlsZVNpemUuaCkpO2I9dGhpcy5nZXRTZXJ2ZXJab29tKCk7aWYodGhpcy53cmFwRGF0ZUxpbmUpdmFyIGQ9TWF0aC5wb3coMixiKSxjPShjJWQrZCklZDtyZXR1cm57eDpjLHk6YSx6OmJ9fSxzZXRNYXA6ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5MYXllci5HcmlkLnByb3RvdHlwZS5zZXRNYXAuYXBwbHkodGhpcywKYXJndW1lbnRzKTt0aGlzLnRpbGVPcmlnaW58fCh0aGlzLnRpbGVPcmlnaW49bmV3IE9wZW5MYXllcnMuTG9uTGF0KHRoaXMubWF4RXh0ZW50LmxlZnQsdGhpcy5tYXhFeHRlbnQuYm90dG9tKSl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuTGF5ZXIuWFlaIn0pO09wZW5MYXllcnMuTGF5ZXIuT1NNPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5MYXllci5YWVose25hbWU6Ik9wZW5TdHJlZXRNYXAiLHVybDpbImh0dHA6Ly9hLnRpbGUub3BlbnN0cmVldG1hcC5vcmcvJHt6fS8ke3h9LyR7eX0ucG5nIiwiaHR0cDovL2IudGlsZS5vcGVuc3RyZWV0bWFwLm9yZy8ke3p9LyR7eH0vJHt5fS5wbmciLCJodHRwOi8vYy50aWxlLm9wZW5zdHJlZXRtYXAub3JnLyR7en0vJHt4fS8ke3l9LnBuZyJdLGF0dHJpYnV0aW9uOiImY29weTsgPGEgaHJlZj0naHR0cDovL3d3dy5vcGVuc3RyZWV0bWFwLm9yZy9jb3B5cmlnaHQnPk9wZW5TdHJlZXRNYXA8L2E+IGNvbnRyaWJ1dG9ycyIsc3BoZXJpY2FsTWVyY2F0b3I6ITAsd3JhcERhdGVMaW5lOiEwLHRpbGVPcHRpb25zOm51bGwsaW5pdGlhbGl6ZTpmdW5jdGlvbihhLGIsYyl7T3BlbkxheWVycy5MYXllci5YWVoucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMudGlsZU9wdGlvbnM9Ck9wZW5MYXllcnMuVXRpbC5leHRlbmQoe2Nyb3NzT3JpZ2luS2V5d29yZDoiYW5vbnltb3VzIn0sdGhpcy5vcHRpb25zJiZ0aGlzLm9wdGlvbnMudGlsZU9wdGlvbnMpfSxjbG9uZTpmdW5jdGlvbihhKXtudWxsPT1hJiYoYT1uZXcgT3BlbkxheWVycy5MYXllci5PU00odGhpcy5uYW1lLHRoaXMudXJsLHRoaXMuZ2V0T3B0aW9ucygpKSk7cmV0dXJuIGE9T3BlbkxheWVycy5MYXllci5YWVoucHJvdG90eXBlLmNsb25lLmFwcGx5KHRoaXMsW2FdKX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5MYXllci5PU00ifSk7T3BlbkxheWVycy5SZW5kZXJlcj1PcGVuTGF5ZXJzLkNsYXNzKHtjb250YWluZXI6bnVsbCxyb290Om51bGwsZXh0ZW50Om51bGwsbG9ja2VkOiExLHNpemU6bnVsbCxyZXNvbHV0aW9uOm51bGwsbWFwOm51bGwsZmVhdHVyZUR4OjAsaW5pdGlhbGl6ZTpmdW5jdGlvbihhLGIpe3RoaXMuY29udGFpbmVyPU9wZW5MYXllcnMuVXRpbC5nZXRFbGVtZW50KGEpO09wZW5MYXllcnMuVXRpbC5leHRlbmQodGhpcyxiKX0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMubWFwPXRoaXMucmVzb2x1dGlvbj10aGlzLnNpemU9dGhpcy5leHRlbnQ9dGhpcy5jb250YWluZXI9bnVsbH0sc3VwcG9ydGVkOmZ1bmN0aW9uKCl7cmV0dXJuITF9LHNldEV4dGVudDpmdW5jdGlvbihhLGIpe3RoaXMuZXh0ZW50PWEuY2xvbmUoKTtpZih0aGlzLm1hcC5iYXNlTGF5ZXImJnRoaXMubWFwLmJhc2VMYXllci53cmFwRGF0ZUxpbmUpe3ZhciBjPWEuZ2V0V2lkdGgoKS90aGlzLm1hcC5nZXRFeHRlbnQoKS5nZXRXaWR0aCgpOwphPWEuc2NhbGUoMS9jKTt0aGlzLmV4dGVudD1hLndyYXBEYXRlTGluZSh0aGlzLm1hcC5nZXRNYXhFeHRlbnQoKSkuc2NhbGUoYyl9YiYmKHRoaXMucmVzb2x1dGlvbj1udWxsKTtyZXR1cm4hMH0sc2V0U2l6ZTpmdW5jdGlvbihhKXt0aGlzLnNpemU9YS5jbG9uZSgpO3RoaXMucmVzb2x1dGlvbj1udWxsfSxnZXRSZXNvbHV0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmVzb2x1dGlvbj10aGlzLnJlc29sdXRpb258fHRoaXMubWFwLmdldFJlc29sdXRpb24oKX0sZHJhd0ZlYXR1cmU6ZnVuY3Rpb24oYSxiKXtudWxsPT1iJiYoYj1hLnN0eWxlKTtpZihhLmdlb21ldHJ5KXt2YXIgYz1hLmdlb21ldHJ5LmdldEJvdW5kcygpO2lmKGMpe3ZhciBkO3RoaXMubWFwLmJhc2VMYXllciYmdGhpcy5tYXAuYmFzZUxheWVyLndyYXBEYXRlTGluZSYmKGQ9dGhpcy5tYXAuZ2V0TWF4RXh0ZW50KCkpO2MuaW50ZXJzZWN0c0JvdW5kcyh0aGlzLmV4dGVudCx7d29ybGRCb3VuZHM6ZH0pP3RoaXMuY2FsY3VsYXRlRmVhdHVyZUR4KGMsCmQpOmI9e2Rpc3BsYXk6Im5vbmUifTtjPXRoaXMuZHJhd0dlb21ldHJ5KGEuZ2VvbWV0cnksYixhLmlkKTtpZigibm9uZSIhPWIuZGlzcGxheSYmYi5sYWJlbCYmITEhPT1jKXtkPWEuZ2VvbWV0cnkuZ2V0Q2VudHJvaWQoKTtpZihiLmxhYmVsWE9mZnNldHx8Yi5sYWJlbFlPZmZzZXQpe3ZhciBlPWlzTmFOKGIubGFiZWxYT2Zmc2V0KT8wOmIubGFiZWxYT2Zmc2V0LGY9aXNOYU4oYi5sYWJlbFlPZmZzZXQpPzA6Yi5sYWJlbFlPZmZzZXQsZz10aGlzLmdldFJlc29sdXRpb24oKTtkLm1vdmUoZSpnLGYqZyl9dGhpcy5kcmF3VGV4dChhLmlkLGIsZCl9ZWxzZSB0aGlzLnJlbW92ZVRleHQoYS5pZCk7cmV0dXJuIGN9fX0sY2FsY3VsYXRlRmVhdHVyZUR4OmZ1bmN0aW9uKGEsYil7dGhpcy5mZWF0dXJlRHg9MDtpZihiKXt2YXIgYz1iLmdldFdpZHRoKCk7dGhpcy5mZWF0dXJlRHg9TWF0aC5yb3VuZCgoKGEubGVmdCthLnJpZ2h0KS8yLSh0aGlzLmV4dGVudC5sZWZ0K3RoaXMuZXh0ZW50LnJpZ2h0KS8KMikvYykqY319LGRyYXdHZW9tZXRyeTpmdW5jdGlvbihhLGIsYyl7fSxkcmF3VGV4dDpmdW5jdGlvbihhLGIsYyl7fSxyZW1vdmVUZXh0OmZ1bmN0aW9uKGEpe30sY2xlYXI6ZnVuY3Rpb24oKXt9LGdldEZlYXR1cmVJZEZyb21FdmVudDpmdW5jdGlvbihhKXt9LGVyYXNlRmVhdHVyZXM6ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5VdGlsLmlzQXJyYXkoYSl8fChhPVthXSk7Zm9yKHZhciBiPTAsYz1hLmxlbmd0aDtiPGM7KytiKXt2YXIgZD1hW2JdO3RoaXMuZXJhc2VHZW9tZXRyeShkLmdlb21ldHJ5LGQuaWQpO3RoaXMucmVtb3ZlVGV4dChkLmlkKX19LGVyYXNlR2VvbWV0cnk6ZnVuY3Rpb24oYSxiKXt9LG1vdmVSb290OmZ1bmN0aW9uKGEpe30sZ2V0UmVuZGVyTGF5ZXJJZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRhaW5lci5pZH0sYXBwbHlEZWZhdWx0U3ltYm9saXplcjpmdW5jdGlvbihhKXt2YXIgYj1PcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHt9LE9wZW5MYXllcnMuUmVuZGVyZXIuZGVmYXVsdFN5bWJvbGl6ZXIpOwohMT09PWEuc3Ryb2tlJiYoZGVsZXRlIGIuc3Ryb2tlV2lkdGgsZGVsZXRlIGIuc3Ryb2tlQ29sb3IpOyExPT09YS5maWxsJiZkZWxldGUgYi5maWxsQ29sb3I7T3BlbkxheWVycy5VdGlsLmV4dGVuZChiLGEpO3JldHVybiBifSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLlJlbmRlcmVyIn0pO09wZW5MYXllcnMuUmVuZGVyZXIuZGVmYXVsdFN5bWJvbGl6ZXI9e2ZpbGxDb2xvcjoiIzAwMDAwMCIsc3Ryb2tlQ29sb3I6IiMwMDAwMDAiLHN0cm9rZVdpZHRoOjIsZmlsbE9wYWNpdHk6MSxzdHJva2VPcGFjaXR5OjEscG9pbnRSYWRpdXM6MCxsYWJlbEFsaWduOiJjbSJ9OwpPcGVuTGF5ZXJzLlJlbmRlcmVyLnN5bWJvbD17c3RhcjpbMzUwLDc1LDM3OSwxNjEsNDY5LDE2MSwzOTcsMjE1LDQyMywzMDEsMzUwLDI1MCwyNzcsMzAxLDMwMywyMTUsMjMxLDE2MSwzMjEsMTYxLDM1MCw3NV0sY3Jvc3M6WzQsMCw2LDAsNiw0LDEwLDQsMTAsNiw2LDYsNiwxMCw0LDEwLDQsNiwwLDYsMCw0LDQsNCw0LDBdLHg6WzAsMCwyNSwwLDUwLDM1LDc1LDAsMTAwLDAsNjUsNTAsMTAwLDEwMCw3NSwxMDAsNTAsNjUsMjUsMTAwLDAsMTAwLDM1LDUwLDAsMF0sc3F1YXJlOlswLDAsMCwxLDEsMSwxLDAsMCwwXSx0cmlhbmdsZTpbMCwxMCwxMCwxMCw1LDAsMCwxMF19O09wZW5MYXllcnMuUmVuZGVyZXIuQ2FudmFzPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5SZW5kZXJlcix7aGl0RGV0ZWN0aW9uOiEwLGhpdE92ZXJmbG93OjAsY2FudmFzOm51bGwsZmVhdHVyZXM6bnVsbCxwZW5kaW5nUmVkcmF3OiExLGNhY2hlZFN5bWJvbEJvdW5kczp7fSxpbml0aWFsaXplOmZ1bmN0aW9uKGEsYil7T3BlbkxheWVycy5SZW5kZXJlci5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5yb290PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImNhbnZhcyIpO3RoaXMuY29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMucm9vdCk7dGhpcy5jYW52YXM9dGhpcy5yb290LmdldENvbnRleHQoIjJkIik7dGhpcy5mZWF0dXJlcz17fTt0aGlzLmhpdERldGVjdGlvbiYmKHRoaXMuaGl0Q2FudmFzPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImNhbnZhcyIpLHRoaXMuaGl0Q29udGV4dD10aGlzLmhpdENhbnZhcy5nZXRDb250ZXh0KCIyZCIpKX0sCnNldEV4dGVudDpmdW5jdGlvbigpe09wZW5MYXllcnMuUmVuZGVyZXIucHJvdG90eXBlLnNldEV4dGVudC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7cmV0dXJuITF9LGVyYXNlR2VvbWV0cnk6ZnVuY3Rpb24oYSxiKXt0aGlzLmVyYXNlRmVhdHVyZXModGhpcy5mZWF0dXJlc1tiXVswXSl9LHN1cHBvcnRlZDpmdW5jdGlvbigpe3JldHVybiBPcGVuTGF5ZXJzLkNBTlZBU19TVVBQT1JURUR9LHNldFNpemU6ZnVuY3Rpb24oYSl7dGhpcy5zaXplPWEuY2xvbmUoKTt2YXIgYj10aGlzLnJvb3Q7Yi5zdHlsZS53aWR0aD1hLncrInB4IjtiLnN0eWxlLmhlaWdodD1hLmgrInB4IjtiLndpZHRoPWEudztiLmhlaWdodD1hLmg7dGhpcy5yZXNvbHV0aW9uPW51bGw7dGhpcy5oaXREZXRlY3Rpb24mJihiPXRoaXMuaGl0Q2FudmFzLGIuc3R5bGUud2lkdGg9YS53KyJweCIsYi5zdHlsZS5oZWlnaHQ9YS5oKyJweCIsYi53aWR0aD1hLncsYi5oZWlnaHQ9YS5oKX0sZHJhd0ZlYXR1cmU6ZnVuY3Rpb24oYSwKYil7dmFyIGM7aWYoYS5nZW9tZXRyeSl7Yj10aGlzLmFwcGx5RGVmYXVsdFN5bWJvbGl6ZXIoYnx8YS5zdHlsZSk7Yz1hLmdlb21ldHJ5LmdldEJvdW5kcygpO3ZhciBkO3RoaXMubWFwLmJhc2VMYXllciYmdGhpcy5tYXAuYmFzZUxheWVyLndyYXBEYXRlTGluZSYmKGQ9dGhpcy5tYXAuZ2V0TWF4RXh0ZW50KCkpO2Q9YyYmYy5pbnRlcnNlY3RzQm91bmRzKHRoaXMuZXh0ZW50LHt3b3JsZEJvdW5kczpkfSk7KGM9Im5vbmUiIT09Yi5kaXNwbGF5JiYhIWMmJmQpP3RoaXMuZmVhdHVyZXNbYS5pZF09W2EsYl06ZGVsZXRlIHRoaXMuZmVhdHVyZXNbYS5pZF07dGhpcy5wZW5kaW5nUmVkcmF3PSEwfXRoaXMucGVuZGluZ1JlZHJhdyYmIXRoaXMubG9ja2VkJiYodGhpcy5yZWRyYXcoKSx0aGlzLnBlbmRpbmdSZWRyYXc9ITEpO3JldHVybiBjfSxkcmF3R2VvbWV0cnk6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWEuQ0xBU1NfTkFNRTtpZigiT3BlbkxheWVycy5HZW9tZXRyeS5Db2xsZWN0aW9uIj09CmR8fCJPcGVuTGF5ZXJzLkdlb21ldHJ5Lk11bHRpUG9pbnQiPT1kfHwiT3BlbkxheWVycy5HZW9tZXRyeS5NdWx0aUxpbmVTdHJpbmciPT1kfHwiT3BlbkxheWVycy5HZW9tZXRyeS5NdWx0aVBvbHlnb24iPT1kKWZvcihkPTA7ZDxhLmNvbXBvbmVudHMubGVuZ3RoO2QrKyl0aGlzLmRyYXdHZW9tZXRyeShhLmNvbXBvbmVudHNbZF0sYixjKTtlbHNlIHN3aXRjaChhLkNMQVNTX05BTUUpe2Nhc2UgIk9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQiOnRoaXMuZHJhd1BvaW50KGEsYixjKTticmVhaztjYXNlICJPcGVuTGF5ZXJzLkdlb21ldHJ5LkxpbmVTdHJpbmciOnRoaXMuZHJhd0xpbmVTdHJpbmcoYSxiLGMpO2JyZWFrO2Nhc2UgIk9wZW5MYXllcnMuR2VvbWV0cnkuTGluZWFyUmluZyI6dGhpcy5kcmF3TGluZWFyUmluZyhhLGIsYyk7YnJlYWs7Y2FzZSAiT3BlbkxheWVycy5HZW9tZXRyeS5Qb2x5Z29uIjp0aGlzLmRyYXdQb2x5Z29uKGEsYixjKX19LGRyYXdFeHRlcm5hbEdyYXBoaWM6ZnVuY3Rpb24oYSwKYixjKXt2YXIgZD1uZXcgSW1hZ2UsZT1iLnRpdGxlfHxiLmdyYXBoaWNUaXRsZTtlJiYoZC50aXRsZT1lKTt2YXIgZj1iLmdyYXBoaWNXaWR0aHx8Yi5ncmFwaGljSGVpZ2h0LGc9Yi5ncmFwaGljSGVpZ2h0fHxiLmdyYXBoaWNXaWR0aCxmPWY/ZjoyKmIucG9pbnRSYWRpdXMsZz1nP2c6MipiLnBvaW50UmFkaXVzLGg9dm9pZCAwIT1iLmdyYXBoaWNYT2Zmc2V0P2IuZ3JhcGhpY1hPZmZzZXQ6LSgwLjUqZiksaz12b2lkIDAhPWIuZ3JhcGhpY1lPZmZzZXQ/Yi5ncmFwaGljWU9mZnNldDotKDAuNSpnKSxsPWIuZ3JhcGhpY09wYWNpdHl8fGIuZmlsbE9wYWNpdHk7ZC5vbmxvYWQ9T3BlbkxheWVycy5GdW5jdGlvbi5iaW5kKGZ1bmN0aW9uKCl7aWYodGhpcy5mZWF0dXJlc1tjXSl7dmFyIGI9dGhpcy5nZXRMb2NhbFhZKGEpLGU9YlswXSxiPWJbMV07aWYoIWlzTmFOKGUpJiYhaXNOYU4oYikpe3ZhciBlPWUraHwwLGI9YitrfDAscD10aGlzLmNhbnZhcztwLmdsb2JhbEFscGhhPWw7dmFyIHE9Ck9wZW5MYXllcnMuUmVuZGVyZXIuQ2FudmFzLmRyYXdJbWFnZVNjYWxlRmFjdG9yfHwoT3BlbkxheWVycy5SZW5kZXJlci5DYW52YXMuZHJhd0ltYWdlU2NhbGVGYWN0b3I9L2FuZHJvaWQgMi4xLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKSk/MzIwL3dpbmRvdy5zY3JlZW4ud2lkdGg6MSk7cC5kcmF3SW1hZ2UoZCxlKnEsYipxLGYqcSxnKnEpO3RoaXMuaGl0RGV0ZWN0aW9uJiYodGhpcy5zZXRIaXRDb250ZXh0U3R5bGUoImZpbGwiLGMpLHRoaXMuaGl0Q29udGV4dC5maWxsUmVjdChlLGIsZixnKSl9fX0sdGhpcyk7ZC5zcmM9Yi5leHRlcm5hbEdyYXBoaWN9LGRyYXdOYW1lZFN5bWJvbDpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZSxmLGc7Zj1NYXRoLlBJLzE4MDt2YXIgaD1PcGVuTGF5ZXJzLlJlbmRlcmVyLnN5bWJvbFtiLmdyYXBoaWNOYW1lXTtpZighaCl0aHJvdyBFcnJvcihiLmdyYXBoaWNOYW1lKyIgaXMgbm90IGEgdmFsaWQgc3ltYm9sIG5hbWUiKTsKaWYoISghaC5sZW5ndGh8fDI+aC5sZW5ndGh8fChhPXRoaXMuZ2V0TG9jYWxYWShhKSxlPWFbMF0sZz1hWzFdLGlzTmFOKGUpfHxpc05hTihnKSkpKXt0aGlzLmNhbnZhcy5saW5lQ2FwPSJyb3VuZCI7dGhpcy5jYW52YXMubGluZUpvaW49InJvdW5kIjt0aGlzLmhpdERldGVjdGlvbiYmKHRoaXMuaGl0Q29udGV4dC5saW5lQ2FwPSJyb3VuZCIsdGhpcy5oaXRDb250ZXh0LmxpbmVKb2luPSJyb3VuZCIpO2lmKGIuZ3JhcGhpY05hbWUgaW4gdGhpcy5jYWNoZWRTeW1ib2xCb3VuZHMpZD10aGlzLmNhY2hlZFN5bWJvbEJvdW5kc1tiLmdyYXBoaWNOYW1lXTtlbHNle2Q9bmV3IE9wZW5MYXllcnMuQm91bmRzO2ZvcihhPTA7YTxoLmxlbmd0aDthKz0yKWQuZXh0ZW5kKG5ldyBPcGVuTGF5ZXJzLkxvbkxhdChoW2FdLGhbYSsxXSkpO3RoaXMuY2FjaGVkU3ltYm9sQm91bmRzW2IuZ3JhcGhpY05hbWVdPWR9dGhpcy5jYW52YXMuc2F2ZSgpO3RoaXMuaGl0RGV0ZWN0aW9uJiZ0aGlzLmhpdENvbnRleHQuc2F2ZSgpOwp0aGlzLmNhbnZhcy50cmFuc2xhdGUoZSxnKTt0aGlzLmhpdERldGVjdGlvbiYmdGhpcy5oaXRDb250ZXh0LnRyYW5zbGF0ZShlLGcpO2E9ZipiLnJvdGF0aW9uO2lzTmFOKGEpfHwodGhpcy5jYW52YXMucm90YXRlKGEpLHRoaXMuaGl0RGV0ZWN0aW9uJiZ0aGlzLmhpdENvbnRleHQucm90YXRlKGEpKTtmPTIqYi5wb2ludFJhZGl1cy9NYXRoLm1heChkLmdldFdpZHRoKCksZC5nZXRIZWlnaHQoKSk7dGhpcy5jYW52YXMuc2NhbGUoZixmKTt0aGlzLmhpdERldGVjdGlvbiYmdGhpcy5oaXRDb250ZXh0LnNjYWxlKGYsZik7YT1kLmdldENlbnRlckxvbkxhdCgpLmxvbjtkPWQuZ2V0Q2VudGVyTG9uTGF0KCkubGF0O3RoaXMuY2FudmFzLnRyYW5zbGF0ZSgtYSwtZCk7dGhpcy5oaXREZXRlY3Rpb24mJnRoaXMuaGl0Q29udGV4dC50cmFuc2xhdGUoLWEsLWQpO2c9Yi5zdHJva2VXaWR0aDtiLnN0cm9rZVdpZHRoPWcvZjtpZighMSE9PWIuZmlsbCl7dGhpcy5zZXRDYW52YXNTdHlsZSgiZmlsbCIsCmIpO3RoaXMuY2FudmFzLmJlZ2luUGF0aCgpO2ZvcihhPTA7YTxoLmxlbmd0aDthKz0yKWQ9aFthXSxlPWhbYSsxXSwwPT1hJiZ0aGlzLmNhbnZhcy5tb3ZlVG8oZCxlKSx0aGlzLmNhbnZhcy5saW5lVG8oZCxlKTt0aGlzLmNhbnZhcy5jbG9zZVBhdGgoKTt0aGlzLmNhbnZhcy5maWxsKCk7aWYodGhpcy5oaXREZXRlY3Rpb24pe3RoaXMuc2V0SGl0Q29udGV4dFN0eWxlKCJmaWxsIixjLGIpO3RoaXMuaGl0Q29udGV4dC5iZWdpblBhdGgoKTtmb3IoYT0wO2E8aC5sZW5ndGg7YSs9MilkPWhbYV0sZT1oW2ErMV0sMD09YSYmdGhpcy5jYW52YXMubW92ZVRvKGQsZSksdGhpcy5oaXRDb250ZXh0LmxpbmVUbyhkLGUpO3RoaXMuaGl0Q29udGV4dC5jbG9zZVBhdGgoKTt0aGlzLmhpdENvbnRleHQuZmlsbCgpfX1pZighMSE9PWIuc3Ryb2tlKXt0aGlzLnNldENhbnZhc1N0eWxlKCJzdHJva2UiLGIpO3RoaXMuY2FudmFzLmJlZ2luUGF0aCgpO2ZvcihhPTA7YTxoLmxlbmd0aDthKz0yKWQ9aFthXSwKZT1oW2ErMV0sMD09YSYmdGhpcy5jYW52YXMubW92ZVRvKGQsZSksdGhpcy5jYW52YXMubGluZVRvKGQsZSk7dGhpcy5jYW52YXMuY2xvc2VQYXRoKCk7dGhpcy5jYW52YXMuc3Ryb2tlKCk7aWYodGhpcy5oaXREZXRlY3Rpb24pe3RoaXMuc2V0SGl0Q29udGV4dFN0eWxlKCJzdHJva2UiLGMsYixmKTt0aGlzLmhpdENvbnRleHQuYmVnaW5QYXRoKCk7Zm9yKGE9MDthPGgubGVuZ3RoO2ErPTIpZD1oW2FdLGU9aFthKzFdLDA9PWEmJnRoaXMuaGl0Q29udGV4dC5tb3ZlVG8oZCxlKSx0aGlzLmhpdENvbnRleHQubGluZVRvKGQsZSk7dGhpcy5oaXRDb250ZXh0LmNsb3NlUGF0aCgpO3RoaXMuaGl0Q29udGV4dC5zdHJva2UoKX19Yi5zdHJva2VXaWR0aD1nO3RoaXMuY2FudmFzLnJlc3RvcmUoKTt0aGlzLmhpdERldGVjdGlvbiYmdGhpcy5oaXRDb250ZXh0LnJlc3RvcmUoKTt0aGlzLnNldENhbnZhc1N0eWxlKCJyZXNldCIpfX0sc2V0Q2FudmFzU3R5bGU6ZnVuY3Rpb24oYSxiKXsiZmlsbCI9PT0KYT8odGhpcy5jYW52YXMuZ2xvYmFsQWxwaGE9Yi5maWxsT3BhY2l0eSx0aGlzLmNhbnZhcy5maWxsU3R5bGU9Yi5maWxsQ29sb3IpOiJzdHJva2UiPT09YT8odGhpcy5jYW52YXMuZ2xvYmFsQWxwaGE9Yi5zdHJva2VPcGFjaXR5LHRoaXMuY2FudmFzLnN0cm9rZVN0eWxlPWIuc3Ryb2tlQ29sb3IsdGhpcy5jYW52YXMubGluZVdpZHRoPWIuc3Ryb2tlV2lkdGgpOih0aGlzLmNhbnZhcy5nbG9iYWxBbHBoYT0wLHRoaXMuY2FudmFzLmxpbmVXaWR0aD0xKX0sZmVhdHVyZUlkVG9IZXg6ZnVuY3Rpb24oYSl7YT1OdW1iZXIoYS5zcGxpdCgiXyIpLnBvcCgpKSsxOzE2Nzc3MjE2PD1hJiYodGhpcy5oaXRPdmVyZmxvdz1hLTE2Nzc3MjE1LGE9YSUxNjc3NzIxNisxKTthPSIwMDAwMDAiK2EudG9TdHJpbmcoMTYpO3ZhciBiPWEubGVuZ3RoO3JldHVybiBhPSIjIithLnN1YnN0cmluZyhiLTYsYil9LHNldEhpdENvbnRleHRTdHlsZTpmdW5jdGlvbihhLGIsYyxkKXtiPXRoaXMuZmVhdHVyZUlkVG9IZXgoYik7CiJmaWxsIj09YT8odGhpcy5oaXRDb250ZXh0Lmdsb2JhbEFscGhhPTEsdGhpcy5oaXRDb250ZXh0LmZpbGxTdHlsZT1iKToic3Ryb2tlIj09YT8odGhpcy5oaXRDb250ZXh0Lmdsb2JhbEFscGhhPTEsdGhpcy5oaXRDb250ZXh0LnN0cm9rZVN0eWxlPWIsInVuZGVmaW5lZCI9PT10eXBlb2YgZD90aGlzLmhpdENvbnRleHQubGluZVdpZHRoPWMuc3Ryb2tlV2lkdGgrMjppc05hTihkKXx8KHRoaXMuaGl0Q29udGV4dC5saW5lV2lkdGg9Yy5zdHJva2VXaWR0aCsyL2QpKToodGhpcy5oaXRDb250ZXh0Lmdsb2JhbEFscGhhPTAsdGhpcy5oaXRDb250ZXh0LmxpbmVXaWR0aD0xKX0sZHJhd1BvaW50OmZ1bmN0aW9uKGEsYixjKXtpZighMSE9PWIuZ3JhcGhpYylpZihiLmV4dGVybmFsR3JhcGhpYyl0aGlzLmRyYXdFeHRlcm5hbEdyYXBoaWMoYSxiLGMpO2Vsc2UgaWYoYi5ncmFwaGljTmFtZSYmImNpcmNsZSIhPWIuZ3JhcGhpY05hbWUpdGhpcy5kcmF3TmFtZWRTeW1ib2woYSxiLGMpO2Vsc2V7dmFyIGQ9CnRoaXMuZ2V0TG9jYWxYWShhKTthPWRbMF07ZD1kWzFdO2lmKCFpc05hTihhKSYmIWlzTmFOKGQpKXt2YXIgZT0yKk1hdGguUEksZj1iLnBvaW50UmFkaXVzOyExIT09Yi5maWxsJiYodGhpcy5zZXRDYW52YXNTdHlsZSgiZmlsbCIsYiksdGhpcy5jYW52YXMuYmVnaW5QYXRoKCksdGhpcy5jYW52YXMuYXJjKGEsZCxmLDAsZSwhMCksdGhpcy5jYW52YXMuZmlsbCgpLHRoaXMuaGl0RGV0ZWN0aW9uJiYodGhpcy5zZXRIaXRDb250ZXh0U3R5bGUoImZpbGwiLGMsYiksdGhpcy5oaXRDb250ZXh0LmJlZ2luUGF0aCgpLHRoaXMuaGl0Q29udGV4dC5hcmMoYSxkLGYsMCxlLCEwKSx0aGlzLmhpdENvbnRleHQuZmlsbCgpKSk7ITEhPT1iLnN0cm9rZSYmKHRoaXMuc2V0Q2FudmFzU3R5bGUoInN0cm9rZSIsYiksdGhpcy5jYW52YXMuYmVnaW5QYXRoKCksdGhpcy5jYW52YXMuYXJjKGEsZCxmLDAsZSwhMCksdGhpcy5jYW52YXMuc3Ryb2tlKCksdGhpcy5oaXREZXRlY3Rpb24mJih0aGlzLnNldEhpdENvbnRleHRTdHlsZSgic3Ryb2tlIiwKYyxiKSx0aGlzLmhpdENvbnRleHQuYmVnaW5QYXRoKCksdGhpcy5oaXRDb250ZXh0LmFyYyhhLGQsZiwwLGUsITApLHRoaXMuaGl0Q29udGV4dC5zdHJva2UoKSksdGhpcy5zZXRDYW52YXNTdHlsZSgicmVzZXQiKSl9fX0sZHJhd0xpbmVTdHJpbmc6ZnVuY3Rpb24oYSxiLGMpe2I9T3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoe2ZpbGw6ITF9LGIpO3RoaXMuZHJhd0xpbmVhclJpbmcoYSxiLGMpfSxkcmF3TGluZWFyUmluZzpmdW5jdGlvbihhLGIsYyl7ITEhPT1iLmZpbGwmJih0aGlzLnNldENhbnZhc1N0eWxlKCJmaWxsIixiKSx0aGlzLnJlbmRlclBhdGgodGhpcy5jYW52YXMsYSxiLGMsImZpbGwiKSx0aGlzLmhpdERldGVjdGlvbiYmKHRoaXMuc2V0SGl0Q29udGV4dFN0eWxlKCJmaWxsIixjLGIpLHRoaXMucmVuZGVyUGF0aCh0aGlzLmhpdENvbnRleHQsYSxiLGMsImZpbGwiKSkpOyExIT09Yi5zdHJva2UmJih0aGlzLnNldENhbnZhc1N0eWxlKCJzdHJva2UiLGIpLHRoaXMucmVuZGVyUGF0aCh0aGlzLmNhbnZhcywKYSxiLGMsInN0cm9rZSIpLHRoaXMuaGl0RGV0ZWN0aW9uJiYodGhpcy5zZXRIaXRDb250ZXh0U3R5bGUoInN0cm9rZSIsYyxiKSx0aGlzLnJlbmRlclBhdGgodGhpcy5oaXRDb250ZXh0LGEsYixjLCJzdHJva2UiKSkpO3RoaXMuc2V0Q2FudmFzU3R5bGUoInJlc2V0Iil9LHJlbmRlclBhdGg6ZnVuY3Rpb24oYSxiLGMsZCxlKXtiPWIuY29tcG9uZW50cztjPWIubGVuZ3RoO2EuYmVnaW5QYXRoKCk7ZD10aGlzLmdldExvY2FsWFkoYlswXSk7dmFyIGY9ZFsxXTtpZighaXNOYU4oZFswXSkmJiFpc05hTihmKSl7YS5tb3ZlVG8oZFswXSxkWzFdKTtmb3IoZD0xO2Q8YzsrK2QpZj10aGlzLmdldExvY2FsWFkoYltkXSksYS5saW5lVG8oZlswXSxmWzFdKTsiZmlsbCI9PT1lP2EuZmlsbCgpOmEuc3Ryb2tlKCl9fSxkcmF3UG9seWdvbjpmdW5jdGlvbihhLGIsYyl7YT1hLmNvbXBvbmVudHM7dmFyIGQ9YS5sZW5ndGg7dGhpcy5kcmF3TGluZWFyUmluZyhhWzBdLGIsYyk7Zm9yKHZhciBlPTE7ZTwKZDsrK2UpdGhpcy5jYW52YXMuZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uPSJkZXN0aW5hdGlvbi1vdXQiLHRoaXMuaGl0RGV0ZWN0aW9uJiYodGhpcy5oaXRDb250ZXh0Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbj0iZGVzdGluYXRpb24tb3V0IiksdGhpcy5kcmF3TGluZWFyUmluZyhhW2VdLE9wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKHtzdHJva2U6ITEsZmlsbE9wYWNpdHk6MX0sYiksYyksdGhpcy5jYW52YXMuZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uPSJzb3VyY2Utb3ZlciIsdGhpcy5oaXREZXRlY3Rpb24mJih0aGlzLmhpdENvbnRleHQuZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uPSJzb3VyY2Utb3ZlciIpLHRoaXMuZHJhd0xpbmVhclJpbmcoYVtlXSxPcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyh7ZmlsbDohMX0sYiksYyl9LGRyYXdUZXh0OmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5nZXRMb2NhbFhZKGEpO3RoaXMuc2V0Q2FudmFzU3R5bGUoInJlc2V0Iik7CnRoaXMuY2FudmFzLmZpbGxTdHlsZT1iLmZvbnRDb2xvcjt0aGlzLmNhbnZhcy5nbG9iYWxBbHBoYT1iLmZvbnRPcGFjaXR5fHwxO3ZhciBkPVtiLmZvbnRTdHlsZT9iLmZvbnRTdHlsZToibm9ybWFsIiwibm9ybWFsIixiLmZvbnRXZWlnaHQ/Yi5mb250V2VpZ2h0OiJub3JtYWwiLGIuZm9udFNpemU/Yi5mb250U2l6ZToiMWVtIixiLmZvbnRGYW1pbHk/Yi5mb250RmFtaWx5OiJzYW5zLXNlcmlmIl0uam9pbigiICIpLGU9Yi5sYWJlbC5zcGxpdCgiXG4iKSxmPWUubGVuZ3RoO2lmKHRoaXMuY2FudmFzLmZpbGxUZXh0KXt0aGlzLmNhbnZhcy5mb250PWQ7dGhpcy5jYW52YXMudGV4dEFsaWduPU9wZW5MYXllcnMuUmVuZGVyZXIuQ2FudmFzLkxBQkVMX0FMSUdOW2IubGFiZWxBbGlnblswXV18fCJjZW50ZXIiO3RoaXMuY2FudmFzLnRleHRCYXNlbGluZT1PcGVuTGF5ZXJzLlJlbmRlcmVyLkNhbnZhcy5MQUJFTF9BTElHTltiLmxhYmVsQWxpZ25bMV1dfHwibWlkZGxlIjt2YXIgZz1PcGVuTGF5ZXJzLlJlbmRlcmVyLkNhbnZhcy5MQUJFTF9GQUNUT1JbYi5sYWJlbEFsaWduWzFdXTsKbnVsbD09ZyYmKGc9LTAuNSk7ZD10aGlzLmNhbnZhcy5tZWFzdXJlVGV4dCgiTWciKS5oZWlnaHR8fHRoaXMuY2FudmFzLm1lYXN1cmVUZXh0KCJ4eCIpLndpZHRoO2NbMV0rPWQqZyooZi0xKTtmb3IoZz0wO2c8ZjtnKyspYi5sYWJlbE91dGxpbmVXaWR0aCYmKHRoaXMuY2FudmFzLnNhdmUoKSx0aGlzLmNhbnZhcy5nbG9iYWxBbHBoYT1iLmxhYmVsT3V0bGluZU9wYWNpdHl8fGIuZm9udE9wYWNpdHl8fDEsdGhpcy5jYW52YXMuc3Ryb2tlU3R5bGU9Yi5sYWJlbE91dGxpbmVDb2xvcix0aGlzLmNhbnZhcy5saW5lV2lkdGg9Yi5sYWJlbE91dGxpbmVXaWR0aCx0aGlzLmNhbnZhcy5zdHJva2VUZXh0KGVbZ10sY1swXSxjWzFdK2QqZysxKSx0aGlzLmNhbnZhcy5yZXN0b3JlKCkpLHRoaXMuY2FudmFzLmZpbGxUZXh0KGVbZ10sY1swXSxjWzFdK2QqZyl9ZWxzZSBpZih0aGlzLmNhbnZhcy5tb3pEcmF3VGV4dCl7dGhpcy5jYW52YXMubW96VGV4dFN0eWxlPWQ7dmFyIGg9T3BlbkxheWVycy5SZW5kZXJlci5DYW52YXMuTEFCRUxfRkFDVE9SW2IubGFiZWxBbGlnblswXV07Cm51bGw9PWgmJihoPS0wLjUpO2c9T3BlbkxheWVycy5SZW5kZXJlci5DYW52YXMuTEFCRUxfRkFDVE9SW2IubGFiZWxBbGlnblsxXV07bnVsbD09ZyYmKGc9LTAuNSk7ZD10aGlzLmNhbnZhcy5tb3pNZWFzdXJlVGV4dCgieHgiKTtjWzFdKz1kKigxK2cqZik7Zm9yKGc9MDtnPGY7ZysrKXt2YXIgaz1jWzBdK2gqdGhpcy5jYW52YXMubW96TWVhc3VyZVRleHQoZVtnXSksbD1jWzFdK2cqZDt0aGlzLmNhbnZhcy50cmFuc2xhdGUoayxsKTt0aGlzLmNhbnZhcy5tb3pEcmF3VGV4dChlW2ddKTt0aGlzLmNhbnZhcy50cmFuc2xhdGUoLWssLWwpfX10aGlzLnNldENhbnZhc1N0eWxlKCJyZXNldCIpfSxnZXRMb2NhbFhZOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZ2V0UmVzb2x1dGlvbigpLGM9dGhpcy5leHRlbnQ7cmV0dXJuWyhhLngtdGhpcy5mZWF0dXJlRHgpL2IrLWMubGVmdC9iLGMudG9wL2ItYS55L2JdfSxjbGVhcjpmdW5jdGlvbigpe3ZhciBhPXRoaXMucm9vdC5oZWlnaHQsYj10aGlzLnJvb3Qud2lkdGg7CnRoaXMuY2FudmFzLmNsZWFyUmVjdCgwLDAsYixhKTt0aGlzLmZlYXR1cmVzPXt9O3RoaXMuaGl0RGV0ZWN0aW9uJiZ0aGlzLmhpdENvbnRleHQuY2xlYXJSZWN0KDAsMCxiLGEpfSxnZXRGZWF0dXJlSWRGcm9tRXZlbnQ6ZnVuY3Rpb24oYSl7dmFyIGI7aWYodGhpcy5oaXREZXRlY3Rpb24mJiJub25lIiE9PXRoaXMucm9vdC5zdHlsZS5kaXNwbGF5JiYhdGhpcy5tYXAuZHJhZ2dpbmcmJihhPWEueHksYT10aGlzLmhpdENvbnRleHQuZ2V0SW1hZ2VEYXRhKGEueHwwLGEueXwwLDEsMSkuZGF0YSwyNTU9PT1hWzNdJiYoYT1hWzJdKzI1NiooYVsxXSsyNTYqYVswXSkpKSl7YT0iT3BlbkxheWVyc19GZWF0dXJlX1ZlY3Rvcl8iKyhhLTErdGhpcy5oaXRPdmVyZmxvdyk7dHJ5e2I9dGhpcy5mZWF0dXJlc1thXVswXX1jYXRjaChjKXt9fXJldHVybiBifSxlcmFzZUZlYXR1cmVzOmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuVXRpbC5pc0FycmF5KGEpfHwoYT1bYV0pO2Zvcih2YXIgYj0wO2I8YS5sZW5ndGg7KytiKWRlbGV0ZSB0aGlzLmZlYXR1cmVzW2FbYl0uaWRdOwp0aGlzLnJlZHJhdygpfSxyZWRyYXc6ZnVuY3Rpb24oKXtpZighdGhpcy5sb2NrZWQpe3ZhciBhPXRoaXMucm9vdC5oZWlnaHQsYj10aGlzLnJvb3Qud2lkdGg7dGhpcy5jYW52YXMuY2xlYXJSZWN0KDAsMCxiLGEpO3RoaXMuaGl0RGV0ZWN0aW9uJiZ0aGlzLmhpdENvbnRleHQuY2xlYXJSZWN0KDAsMCxiLGEpO3ZhciBhPVtdLGMsZCxlPXRoaXMubWFwLmJhc2VMYXllciYmdGhpcy5tYXAuYmFzZUxheWVyLndyYXBEYXRlTGluZSYmdGhpcy5tYXAuZ2V0TWF4RXh0ZW50KCksZjtmb3IoZiBpbiB0aGlzLmZlYXR1cmVzKXRoaXMuZmVhdHVyZXMuaGFzT3duUHJvcGVydHkoZikmJihiPXRoaXMuZmVhdHVyZXNbZl1bMF0sYz1iLmdlb21ldHJ5LHRoaXMuY2FsY3VsYXRlRmVhdHVyZUR4KGMuZ2V0Qm91bmRzKCksZSksZD10aGlzLmZlYXR1cmVzW2ZdWzFdLHRoaXMuZHJhd0dlb21ldHJ5KGMsZCxiLmlkKSxkLmxhYmVsJiZhLnB1c2goW2IsZF0pKTtiPTA7Zm9yKGM9YS5sZW5ndGg7YjxjOysrYilmPQphW2JdLHRoaXMuZHJhd1RleHQoZlswXS5nZW9tZXRyeS5nZXRDZW50cm9pZCgpLGZbMV0pfX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5SZW5kZXJlci5DYW52YXMifSk7T3BlbkxheWVycy5SZW5kZXJlci5DYW52YXMuTEFCRUxfQUxJR049e2w6ImxlZnQiLHI6InJpZ2h0Iix0OiJ0b3AiLGI6ImJvdHRvbSJ9O09wZW5MYXllcnMuUmVuZGVyZXIuQ2FudmFzLkxBQkVMX0ZBQ1RPUj17bDowLHI6LTEsdDowLGI6LTF9O09wZW5MYXllcnMuUmVuZGVyZXIuQ2FudmFzLmRyYXdJbWFnZVNjYWxlRmFjdG9yPW51bGw7T3BlbkxheWVycy5Gb3JtYXQuT1NNPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Gb3JtYXQuWE1MLHtjaGVja1RhZ3M6ITEsaW50ZXJlc3RpbmdUYWdzRXhjbHVkZTpudWxsLGFyZWFUYWdzOm51bGwsaW5pdGlhbGl6ZTpmdW5jdGlvbihhKXt2YXIgYj17aW50ZXJlc3RpbmdUYWdzRXhjbHVkZToic291cmNlIHNvdXJjZV9yZWYgc291cmNlOnJlZiBoaXN0b3J5IGF0dHJpYnV0aW9uIGNyZWF0ZWRfYnkiLnNwbGl0KCIgIiksYXJlYVRhZ3M6ImFyZWEgYnVpbGRpbmcgbGVpc3VyZSB0b3VyaXNtIHJ1aW5zIGhpc3RvcmljIGxhbmR1c2UgbWlsaXRhcnkgbmF0dXJhbCBzcG9ydCIuc3BsaXQoIiAiKX0sYj1PcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKGIsYSksYz17fTtmb3IoYT0wO2E8Yi5pbnRlcmVzdGluZ1RhZ3NFeGNsdWRlLmxlbmd0aDthKyspY1tiLmludGVyZXN0aW5nVGFnc0V4Y2x1ZGVbYV1dPSEwO2IuaW50ZXJlc3RpbmdUYWdzRXhjbHVkZT1jO2M9e307Zm9yKGE9MDthPGIuYXJlYVRhZ3MubGVuZ3RoO2ErKyljW2IuYXJlYVRhZ3NbYV1dPQohMDtiLmFyZWFUYWdzPWM7dGhpcy5leHRlcm5hbFByb2plY3Rpb249bmV3IE9wZW5MYXllcnMuUHJvamVjdGlvbigiRVBTRzo0MzI2Iik7T3BlbkxheWVycy5Gb3JtYXQuWE1MLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsW2JdKX0scmVhZDpmdW5jdGlvbihhKXsic3RyaW5nIj09dHlwZW9mIGEmJihhPU9wZW5MYXllcnMuRm9ybWF0LlhNTC5wcm90b3R5cGUucmVhZC5hcHBseSh0aGlzLFthXSkpO3ZhciBiPXRoaXMuZ2V0Tm9kZXMoYSksYz10aGlzLmdldFdheXMoYSk7YT1BcnJheShjLmxlbmd0aCk7Zm9yKHZhciBkPTA7ZDxjLmxlbmd0aDtkKyspe2Zvcih2YXIgZT1BcnJheShjW2RdLm5vZGVzLmxlbmd0aCksZj10aGlzLmlzV2F5QXJlYShjW2RdKT8xOjAsZz0wO2c8Y1tkXS5ub2Rlcy5sZW5ndGg7ZysrKXt2YXIgaD1iW2NbZF0ubm9kZXNbZ11dLGs9bmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoaC5sb24saC5sYXQpO2sub3NtX2lkPXBhcnNlSW50KGNbZF0ubm9kZXNbZ10pOwplW2ddPWs7aC51c2VkPSEwfWg9bnVsbDtoPWY/bmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9seWdvbihuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5MaW5lYXJSaW5nKGUpKTpuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5MaW5lU3RyaW5nKGUpO3RoaXMuaW50ZXJuYWxQcm9qZWN0aW9uJiZ0aGlzLmV4dGVybmFsUHJvamVjdGlvbiYmaC50cmFuc2Zvcm0odGhpcy5leHRlcm5hbFByb2plY3Rpb24sdGhpcy5pbnRlcm5hbFByb2plY3Rpb24pO2U9bmV3IE9wZW5MYXllcnMuRmVhdHVyZS5WZWN0b3IoaCxjW2RdLnRhZ3MpO2Uub3NtX2lkPXBhcnNlSW50KGNbZF0uaWQpO2UuZmlkPSJ3YXkuIitlLm9zbV9pZDthW2RdPWV9Zm9yKHZhciBsIGluIGIpe2g9YltsXTtpZighaC51c2VkfHx0aGlzLmNoZWNrVGFncyl7Yz1udWxsO2lmKHRoaXMuY2hlY2tUYWdzKXtjPXRoaXMuZ2V0VGFncyhoLm5vZGUsITApO2lmKGgudXNlZCYmIWNbMV0pY29udGludWU7Yz1jWzBdfWVsc2UgYz10aGlzLmdldFRhZ3MoaC5ub2RlKTsKZT1uZXcgT3BlbkxheWVycy5GZWF0dXJlLlZlY3RvcihuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludChoLmxvbixoLmxhdCksYyk7dGhpcy5pbnRlcm5hbFByb2plY3Rpb24mJnRoaXMuZXh0ZXJuYWxQcm9qZWN0aW9uJiZlLmdlb21ldHJ5LnRyYW5zZm9ybSh0aGlzLmV4dGVybmFsUHJvamVjdGlvbix0aGlzLmludGVybmFsUHJvamVjdGlvbik7ZS5vc21faWQ9cGFyc2VJbnQobCk7ZS5maWQ9Im5vZGUuIitlLm9zbV9pZDthLnB1c2goZSl9aC5ub2RlPW51bGx9cmV0dXJuIGF9LGdldE5vZGVzOmZ1bmN0aW9uKGEpe2E9YS5nZXRFbGVtZW50c0J5VGFnTmFtZSgibm9kZSIpO2Zvcih2YXIgYj17fSxjPTA7YzxhLmxlbmd0aDtjKyspe3ZhciBkPWFbY10sZT1kLmdldEF0dHJpYnV0ZSgiaWQiKTtiW2VdPXtsYXQ6ZC5nZXRBdHRyaWJ1dGUoImxhdCIpLGxvbjpkLmdldEF0dHJpYnV0ZSgibG9uIiksbm9kZTpkfX1yZXR1cm4gYn0sZ2V0V2F5czpmdW5jdGlvbihhKXthPWEuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIndheSIpOwpmb3IodmFyIGI9W10sYz0wO2M8YS5sZW5ndGg7YysrKXt2YXIgZD1hW2NdLGU9e2lkOmQuZ2V0QXR0cmlidXRlKCJpZCIpfTtlLnRhZ3M9dGhpcy5nZXRUYWdzKGQpO2Q9ZC5nZXRFbGVtZW50c0J5VGFnTmFtZSgibmQiKTtlLm5vZGVzPUFycmF5KGQubGVuZ3RoKTtmb3IodmFyIGY9MDtmPGQubGVuZ3RoO2YrKyllLm5vZGVzW2ZdPWRbZl0uZ2V0QXR0cmlidXRlKCJyZWYiKTtiLnB1c2goZSl9cmV0dXJuIGJ9LGdldFRhZ3M6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9YS5nZXRFbGVtZW50c0J5VGFnTmFtZSgidGFnIiksZD17fSxlPSExLGY9MDtmPGMubGVuZ3RoO2YrKyl7dmFyIGc9Y1tmXS5nZXRBdHRyaWJ1dGUoImsiKTtkW2ddPWNbZl0uZ2V0QXR0cmlidXRlKCJ2Iik7YiYmKHRoaXMuaW50ZXJlc3RpbmdUYWdzRXhjbHVkZVtnXXx8KGU9ITApKX1yZXR1cm4gYj9bZCxlXTpkfSxpc1dheUFyZWE6ZnVuY3Rpb24oYSl7dmFyIGI9ITEsYz0hMTthLm5vZGVzWzBdPT1hLm5vZGVzW2Eubm9kZXMubGVuZ3RoLQoxXSYmKGI9ITApO2lmKHRoaXMuY2hlY2tUYWdzKWZvcih2YXIgZCBpbiBhLnRhZ3MpaWYodGhpcy5hcmVhVGFnc1tkXSl7Yz0hMDticmVha31yZXR1cm4gYiYmKHRoaXMuY2hlY2tUYWdzP2M6ITApfSx3cml0ZTpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLlV0aWwuaXNBcnJheShhKXx8KGE9W2FdKTt0aGlzLm9zbV9pZD0xO3RoaXMuY3JlYXRlZF9ub2Rlcz17fTt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROUyhudWxsLCJvc20iKTtiLnNldEF0dHJpYnV0ZSgidmVyc2lvbiIsIjAuNSIpO2Iuc2V0QXR0cmlidXRlKCJnZW5lcmF0b3IiLCJPcGVuTGF5ZXJzICIrT3BlbkxheWVycy5WRVJTSU9OX05VTUJFUik7Zm9yKHZhciBjPWEubGVuZ3RoLTE7MDw9YztjLS0pZm9yKHZhciBkPXRoaXMuY3JlYXRlRmVhdHVyZU5vZGVzKGFbY10pLGU9MDtlPGQubGVuZ3RoO2UrKyliLmFwcGVuZENoaWxkKGRbZV0pO3JldHVybiBPcGVuTGF5ZXJzLkZvcm1hdC5YTUwucHJvdG90eXBlLndyaXRlLmFwcGx5KHRoaXMsCltiXSl9LGNyZWF0ZUZlYXR1cmVOb2RlczpmdW5jdGlvbihhKXt2YXIgYj1bXSxjPWEuZ2VvbWV0cnkuQ0xBU1NfTkFNRSxjPWMuc3Vic3RyaW5nKGMubGFzdEluZGV4T2YoIi4iKSsxKSxjPWMudG9Mb3dlckNhc2UoKTsoYz10aGlzLmNyZWF0ZVhNTFtjXSkmJihiPWMuYXBwbHkodGhpcyxbYV0pKTtyZXR1cm4gYn0sY3JlYXRlWE1MOntwb2ludDpmdW5jdGlvbihhKXt2YXIgYj1udWxsLGM9YS5nZW9tZXRyeT9hLmdlb21ldHJ5OmE7dGhpcy5pbnRlcm5hbFByb2plY3Rpb24mJnRoaXMuZXh0ZXJuYWxQcm9qZWN0aW9uJiYoYz1jLmNsb25lKCksYy50cmFuc2Zvcm0odGhpcy5pbnRlcm5hbFByb2plY3Rpb24sdGhpcy5leHRlcm5hbFByb2plY3Rpb24pKTt2YXIgZD0hMTthLm9zbV9pZD8oYj1hLm9zbV9pZCx0aGlzLmNyZWF0ZWRfbm9kZXNbYl0mJihkPSEwKSk6KGI9LXRoaXMub3NtX2lkLHRoaXMub3NtX2lkKyspO3ZhciBlPWQ/dGhpcy5jcmVhdGVkX25vZGVzW2JdOnRoaXMuY3JlYXRlRWxlbWVudE5TKG51bGwsCiJub2RlIik7dGhpcy5jcmVhdGVkX25vZGVzW2JdPWU7ZS5zZXRBdHRyaWJ1dGUoImlkIixiKTtlLnNldEF0dHJpYnV0ZSgibG9uIixjLngpO2Uuc2V0QXR0cmlidXRlKCJsYXQiLGMueSk7YS5hdHRyaWJ1dGVzJiZ0aGlzLnNlcmlhbGl6ZVRhZ3MoYSxlKTt0aGlzLnNldFN0YXRlKGEsZSk7cmV0dXJuIGQ/W106W2VdfSxsaW5lc3RyaW5nOmZ1bmN0aW9uKGEpe3ZhciBiLGM9W10sZD1hLmdlb21ldHJ5O2Eub3NtX2lkP2I9YS5vc21faWQ6KGI9LXRoaXMub3NtX2lkLHRoaXMub3NtX2lkKyspO3ZhciBlPXRoaXMuY3JlYXRlRWxlbWVudE5TKG51bGwsIndheSIpO2Uuc2V0QXR0cmlidXRlKCJpZCIsYik7Zm9yKGI9MDtiPGQuY29tcG9uZW50cy5sZW5ndGg7YisrKXt2YXIgZj10aGlzLmNyZWF0ZVhNTC5wb2ludC5hcHBseSh0aGlzLFtkLmNvbXBvbmVudHNbYl1dKTtpZihmLmxlbmd0aCl7dmFyIGY9ZlswXSxnPWYuZ2V0QXR0cmlidXRlKCJpZCIpO2MucHVzaChmKX1lbHNlIGc9ZC5jb21wb25lbnRzW2JdLm9zbV9pZCwKZj10aGlzLmNyZWF0ZWRfbm9kZXNbZ107dGhpcy5zZXRTdGF0ZShhLGYpO2Y9dGhpcy5jcmVhdGVFbGVtZW50TlMobnVsbCwibmQiKTtmLnNldEF0dHJpYnV0ZSgicmVmIixnKTtlLmFwcGVuZENoaWxkKGYpfXRoaXMuc2VyaWFsaXplVGFncyhhLGUpO2MucHVzaChlKTtyZXR1cm4gY30scG9seWdvbjpmdW5jdGlvbihhKXt2YXIgYj1PcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHthcmVhOiJ5ZXMifSxhLmF0dHJpYnV0ZXMpLGI9bmV3IE9wZW5MYXllcnMuRmVhdHVyZS5WZWN0b3IoYS5nZW9tZXRyeS5jb21wb25lbnRzWzBdLGIpO2Iub3NtX2lkPWEub3NtX2lkO3JldHVybiB0aGlzLmNyZWF0ZVhNTC5saW5lc3RyaW5nLmFwcGx5KHRoaXMsW2JdKX19LHNlcmlhbGl6ZVRhZ3M6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGMgaW4gYS5hdHRyaWJ1dGVzKXt2YXIgZD10aGlzLmNyZWF0ZUVsZW1lbnROUyhudWxsLCJ0YWciKTtkLnNldEF0dHJpYnV0ZSgiayIsYyk7ZC5zZXRBdHRyaWJ1dGUoInYiLAphLmF0dHJpYnV0ZXNbY10pO2IuYXBwZW5kQ2hpbGQoZCl9fSxzZXRTdGF0ZTpmdW5jdGlvbihhLGIpe2lmKGEuc3RhdGUpe3ZhciBjPW51bGw7c3dpdGNoKGEuc3RhdGUpe2Nhc2UgT3BlbkxheWVycy5TdGF0ZS5VUERBVEU6Y2FzZSBPcGVuTGF5ZXJzLlN0YXRlLkRFTEVURTpjPSJkZWxldGUifWMmJmIuc2V0QXR0cmlidXRlKCJhY3Rpb24iLGMpfX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Gb3JtYXQuT1NNIn0pO09wZW5MYXllcnMuSGFuZGxlci5LZXlib2FyZD1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuSGFuZGxlcix7S0VZX0VWRU5UUzpbImtleWRvd24iLCJrZXl1cCJdLGV2ZW50TGlzdGVuZXI6bnVsbCxvYnNlcnZlRWxlbWVudDpudWxsLGluaXRpYWxpemU6ZnVuY3Rpb24oYSxiLGMpe09wZW5MYXllcnMuSGFuZGxlci5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5ldmVudExpc3RlbmVyPU9wZW5MYXllcnMuRnVuY3Rpb24uYmluZEFzRXZlbnRMaXN0ZW5lcih0aGlzLmhhbmRsZUtleUV2ZW50LHRoaXMpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5kZWFjdGl2YXRlKCk7dGhpcy5ldmVudExpc3RlbmVyPW51bGw7T3BlbkxheWVycy5IYW5kbGVyLnByb3RvdHlwZS5kZXN0cm95LmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sYWN0aXZhdGU6ZnVuY3Rpb24oKXtpZihPcGVuTGF5ZXJzLkhhbmRsZXIucHJvdG90eXBlLmFjdGl2YXRlLmFwcGx5KHRoaXMsCmFyZ3VtZW50cykpe3RoaXMub2JzZXJ2ZUVsZW1lbnQ9dGhpcy5vYnNlcnZlRWxlbWVudHx8ZG9jdW1lbnQ7Zm9yKHZhciBhPTAsYj10aGlzLktFWV9FVkVOVFMubGVuZ3RoO2E8YjthKyspT3BlbkxheWVycy5FdmVudC5vYnNlcnZlKHRoaXMub2JzZXJ2ZUVsZW1lbnQsdGhpcy5LRVlfRVZFTlRTW2FdLHRoaXMuZXZlbnRMaXN0ZW5lcik7cmV0dXJuITB9cmV0dXJuITF9LGRlYWN0aXZhdGU6ZnVuY3Rpb24oKXt2YXIgYT0hMTtpZihPcGVuTGF5ZXJzLkhhbmRsZXIucHJvdG90eXBlLmRlYWN0aXZhdGUuYXBwbHkodGhpcyxhcmd1bWVudHMpKXtmb3IodmFyIGE9MCxiPXRoaXMuS0VZX0VWRU5UUy5sZW5ndGg7YTxiO2ErKylPcGVuTGF5ZXJzLkV2ZW50LnN0b3BPYnNlcnZpbmcodGhpcy5vYnNlcnZlRWxlbWVudCx0aGlzLktFWV9FVkVOVFNbYV0sdGhpcy5ldmVudExpc3RlbmVyKTthPSEwfXJldHVybiBhfSxoYW5kbGVLZXlFdmVudDpmdW5jdGlvbihhKXt0aGlzLmNoZWNrTW9kaWZpZXJzKGEpJiYKdGhpcy5jYWxsYmFjayhhLnR5cGUsW2FdKX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5IYW5kbGVyLktleWJvYXJkIn0pO09wZW5MYXllcnMuQ29udHJvbC5Nb2RpZnlGZWF0dXJlPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Db250cm9sLHtkb2N1bWVudERyYWc6ITEsZ2VvbWV0cnlUeXBlczpudWxsLGNsaWNrb3V0OiEwLHRvZ2dsZTohMCxzdGFuZGFsb25lOiExLGxheWVyOm51bGwsZmVhdHVyZTpudWxsLHZlcnRleDpudWxsLHZlcnRpY2VzOm51bGwsdmlydHVhbFZlcnRpY2VzOm51bGwsaGFuZGxlcnM6bnVsbCxkZWxldGVDb2RlczpudWxsLHZpcnR1YWxTdHlsZTpudWxsLHZlcnRleFJlbmRlckludGVudDpudWxsLG1vZGU6bnVsbCxjcmVhdGVWZXJ0aWNlczohMCxtb2RpZmllZDohMSxyYWRpdXNIYW5kbGU6bnVsbCxkcmFnSGFuZGxlOm51bGwsb25Nb2RpZmljYXRpb25TdGFydDpmdW5jdGlvbigpe30sb25Nb2RpZmljYXRpb246ZnVuY3Rpb24oKXt9LG9uTW9kaWZpY2F0aW9uRW5kOmZ1bmN0aW9uKCl7fSxpbml0aWFsaXplOmZ1bmN0aW9uKGEsYil7Yj1ifHx7fTt0aGlzLmxheWVyPWE7dGhpcy52ZXJ0aWNlcz0KW107dGhpcy52aXJ0dWFsVmVydGljZXM9W107dGhpcy52aXJ0dWFsU3R5bGU9T3BlbkxheWVycy5VdGlsLmV4dGVuZCh7fSx0aGlzLmxheWVyLnN0eWxlfHx0aGlzLmxheWVyLnN0eWxlTWFwLmNyZWF0ZVN5bWJvbGl6ZXIobnVsbCxiLnZlcnRleFJlbmRlckludGVudCkpO3RoaXMudmlydHVhbFN0eWxlLmZpbGxPcGFjaXR5PTAuMzt0aGlzLnZpcnR1YWxTdHlsZS5zdHJva2VPcGFjaXR5PTAuMzt0aGlzLmRlbGV0ZUNvZGVzPVs0Niw2OF07dGhpcy5tb2RlPU9wZW5MYXllcnMuQ29udHJvbC5Nb2RpZnlGZWF0dXJlLlJFU0hBUEU7T3BlbkxheWVycy5Db250cm9sLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsW2JdKTtPcGVuTGF5ZXJzLlV0aWwuaXNBcnJheSh0aGlzLmRlbGV0ZUNvZGVzKXx8KHRoaXMuZGVsZXRlQ29kZXM9W3RoaXMuZGVsZXRlQ29kZXNdKTt2YXIgYz17ZG9jdW1lbnREcmFnOnRoaXMuZG9jdW1lbnREcmFnLHN0b3BEb3duOiExfTt0aGlzLmhhbmRsZXJzPQp7a2V5Ym9hcmQ6bmV3IE9wZW5MYXllcnMuSGFuZGxlci5LZXlib2FyZCh0aGlzLHtrZXlkb3duOnRoaXMuaGFuZGxlS2V5cHJlc3N9KSxkcmFnOm5ldyBPcGVuTGF5ZXJzLkhhbmRsZXIuRHJhZyh0aGlzLHtkb3duOmZ1bmN0aW9uKGEpe3RoaXMudmVydGV4PW51bGw7KGE9dGhpcy5sYXllci5nZXRGZWF0dXJlRnJvbUV2ZW50KHRoaXMuaGFuZGxlcnMuZHJhZy5ldnQpKT90aGlzLmRyYWdTdGFydChhKTp0aGlzLmNsaWNrb3V0JiYodGhpcy5fdW5zZWxlY3Q9dGhpcy5mZWF0dXJlKX0sbW92ZTpmdW5jdGlvbihhKXtkZWxldGUgdGhpcy5fdW5zZWxlY3Q7dGhpcy52ZXJ0ZXgmJnRoaXMuZHJhZ1ZlcnRleCh0aGlzLnZlcnRleCxhKX0sdXA6ZnVuY3Rpb24oKXt0aGlzLmhhbmRsZXJzLmRyYWcuc3RvcERvd249ITE7dGhpcy5fdW5zZWxlY3QmJih0aGlzLnVuc2VsZWN0RmVhdHVyZSh0aGlzLl91bnNlbGVjdCksZGVsZXRlIHRoaXMuX3Vuc2VsZWN0KX0sZG9uZTpmdW5jdGlvbihhKXt0aGlzLnZlcnRleCYmCnRoaXMuZHJhZ0NvbXBsZXRlKHRoaXMudmVydGV4KX19LGMpfX0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMubWFwJiZ0aGlzLm1hcC5ldmVudHMudW4oe3JlbW92ZWxheWVyOnRoaXMuaGFuZGxlTWFwRXZlbnRzLGNoYW5nZWxheWVyOnRoaXMuaGFuZGxlTWFwRXZlbnRzLHNjb3BlOnRoaXN9KTt0aGlzLmxheWVyPW51bGw7T3BlbkxheWVycy5Db250cm9sLnByb3RvdHlwZS5kZXN0cm95LmFwcGx5KHRoaXMsW10pfSxhY3RpdmF0ZTpmdW5jdGlvbigpe3RoaXMubW92ZUxheWVyVG9Ub3AoKTt0aGlzLm1hcC5ldmVudHMub24oe3JlbW92ZWxheWVyOnRoaXMuaGFuZGxlTWFwRXZlbnRzLGNoYW5nZWxheWVyOnRoaXMuaGFuZGxlTWFwRXZlbnRzLHNjb3BlOnRoaXN9KTtyZXR1cm4gdGhpcy5oYW5kbGVycy5rZXlib2FyZC5hY3RpdmF0ZSgpJiZ0aGlzLmhhbmRsZXJzLmRyYWcuYWN0aXZhdGUoKSYmT3BlbkxheWVycy5Db250cm9sLnByb3RvdHlwZS5hY3RpdmF0ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LApkZWFjdGl2YXRlOmZ1bmN0aW9uKCl7dmFyIGE9ITE7T3BlbkxheWVycy5Db250cm9sLnByb3RvdHlwZS5kZWFjdGl2YXRlLmFwcGx5KHRoaXMsYXJndW1lbnRzKSYmKHRoaXMubW92ZUxheWVyQmFjaygpLHRoaXMubWFwLmV2ZW50cy51bih7cmVtb3ZlbGF5ZXI6dGhpcy5oYW5kbGVNYXBFdmVudHMsY2hhbmdlbGF5ZXI6dGhpcy5oYW5kbGVNYXBFdmVudHMsc2NvcGU6dGhpc30pLHRoaXMubGF5ZXIucmVtb3ZlRmVhdHVyZXModGhpcy52ZXJ0aWNlcyx7c2lsZW50OiEwfSksdGhpcy5sYXllci5yZW1vdmVGZWF0dXJlcyh0aGlzLnZpcnR1YWxWZXJ0aWNlcyx7c2lsZW50OiEwfSksdGhpcy52ZXJ0aWNlcz1bXSx0aGlzLmhhbmRsZXJzLmRyYWcuZGVhY3RpdmF0ZSgpLHRoaXMuaGFuZGxlcnMua2V5Ym9hcmQuZGVhY3RpdmF0ZSgpLChhPXRoaXMuZmVhdHVyZSkmJihhLmdlb21ldHJ5JiZhLmxheWVyKSYmdGhpcy51bnNlbGVjdEZlYXR1cmUoYSksYT0hMCk7cmV0dXJuIGF9LGJlZm9yZVNlbGVjdEZlYXR1cmU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMubGF5ZXIuZXZlbnRzLnRyaWdnZXJFdmVudCgiYmVmb3JlZmVhdHVyZW1vZGlmaWVkIiwKe2ZlYXR1cmU6YX0pfSxzZWxlY3RGZWF0dXJlOmZ1bmN0aW9uKGEpe2lmKCEodGhpcy5mZWF0dXJlPT09YXx8dGhpcy5nZW9tZXRyeVR5cGVzJiYtMT09T3BlbkxheWVycy5VdGlsLmluZGV4T2YodGhpcy5nZW9tZXRyeVR5cGVzLGEuZ2VvbWV0cnkuQ0xBU1NfTkFNRSkpKXshMSE9PXRoaXMuYmVmb3JlU2VsZWN0RmVhdHVyZShhKSYmKHRoaXMuZmVhdHVyZSYmdGhpcy51bnNlbGVjdEZlYXR1cmUodGhpcy5mZWF0dXJlKSx0aGlzLmZlYXR1cmU9YSx0aGlzLmxheWVyLnNlbGVjdGVkRmVhdHVyZXMucHVzaChhKSx0aGlzLmxheWVyLmRyYXdGZWF0dXJlKGEsInNlbGVjdCIpLHRoaXMubW9kaWZpZWQ9ITEsdGhpcy5yZXNldFZlcnRpY2VzKCksdGhpcy5vbk1vZGlmaWNhdGlvblN0YXJ0KHRoaXMuZmVhdHVyZSkpO3ZhciBiPWEubW9kaWZpZWQ7IWEuZ2VvbWV0cnl8fGImJmIuZ2VvbWV0cnl8fCh0aGlzLl9vcmlnaW5hbEdlb21ldHJ5PWEuZ2VvbWV0cnkuY2xvbmUoKSl9fSx1bnNlbGVjdEZlYXR1cmU6ZnVuY3Rpb24oYSl7dGhpcy5sYXllci5yZW1vdmVGZWF0dXJlcyh0aGlzLnZlcnRpY2VzLAp7c2lsZW50OiEwfSk7dGhpcy52ZXJ0aWNlcz1bXTt0aGlzLmxheWVyLmRlc3Ryb3lGZWF0dXJlcyh0aGlzLnZpcnR1YWxWZXJ0aWNlcyx7c2lsZW50OiEwfSk7dGhpcy52aXJ0dWFsVmVydGljZXM9W107dGhpcy5kcmFnSGFuZGxlJiYodGhpcy5sYXllci5kZXN0cm95RmVhdHVyZXMoW3RoaXMuZHJhZ0hhbmRsZV0se3NpbGVudDohMH0pLGRlbGV0ZSB0aGlzLmRyYWdIYW5kbGUpO3RoaXMucmFkaXVzSGFuZGxlJiYodGhpcy5sYXllci5kZXN0cm95RmVhdHVyZXMoW3RoaXMucmFkaXVzSGFuZGxlXSx7c2lsZW50OiEwfSksZGVsZXRlIHRoaXMucmFkaXVzSGFuZGxlKTt0aGlzLmxheWVyLmRyYXdGZWF0dXJlKHRoaXMuZmVhdHVyZSwiZGVmYXVsdCIpO3RoaXMuZmVhdHVyZT1udWxsO09wZW5MYXllcnMuVXRpbC5yZW1vdmVJdGVtKHRoaXMubGF5ZXIuc2VsZWN0ZWRGZWF0dXJlcyxhKTt0aGlzLm9uTW9kaWZpY2F0aW9uRW5kKGEpO3RoaXMubGF5ZXIuZXZlbnRzLnRyaWdnZXJFdmVudCgiYWZ0ZXJmZWF0dXJlbW9kaWZpZWQiLAp7ZmVhdHVyZTphLG1vZGlmaWVkOnRoaXMubW9kaWZpZWR9KTt0aGlzLm1vZGlmaWVkPSExfSxkcmFnU3RhcnQ6ZnVuY3Rpb24oYSl7dmFyIGI9Ik9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQiPT1hLmdlb21ldHJ5LkNMQVNTX05BTUU7dGhpcy5zdGFuZGFsb25lfHwoYS5fc2tldGNofHwhYikmJmEuX3NrZXRjaHx8KHRoaXMudG9nZ2xlJiZ0aGlzLmZlYXR1cmU9PT1hJiYodGhpcy5fdW5zZWxlY3Q9YSksdGhpcy5zZWxlY3RGZWF0dXJlKGEpKTtpZihhLl9za2V0Y2h8fGIpdGhpcy52ZXJ0ZXg9YSx0aGlzLmhhbmRsZXJzLmRyYWcuc3RvcERvd249ITB9LGRyYWdWZXJ0ZXg6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLm1hcC5nZXRMb25MYXRGcm9tVmlld1BvcnRQeChiKSxkPWEuZ2VvbWV0cnk7ZC5tb3ZlKGMubG9uLWQueCxjLmxhdC1kLnkpO3RoaXMubW9kaWZpZWQ9ITA7Ik9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQiPT10aGlzLmZlYXR1cmUuZ2VvbWV0cnkuQ0xBU1NfTkFNRT8KdGhpcy5sYXllci5ldmVudHMudHJpZ2dlckV2ZW50KCJ2ZXJ0ZXhtb2RpZmllZCIse3ZlcnRleDphLmdlb21ldHJ5LGZlYXR1cmU6dGhpcy5mZWF0dXJlLHBpeGVsOmJ9KTooYS5faW5kZXg/KGEuZ2VvbWV0cnkucGFyZW50LmFkZENvbXBvbmVudChhLmdlb21ldHJ5LGEuX2luZGV4KSxkZWxldGUgYS5faW5kZXgsT3BlbkxheWVycy5VdGlsLnJlbW92ZUl0ZW0odGhpcy52aXJ0dWFsVmVydGljZXMsYSksdGhpcy52ZXJ0aWNlcy5wdXNoKGEpKTphPT10aGlzLmRyYWdIYW5kbGU/KHRoaXMubGF5ZXIucmVtb3ZlRmVhdHVyZXModGhpcy52ZXJ0aWNlcyx7c2lsZW50OiEwfSksdGhpcy52ZXJ0aWNlcz1bXSx0aGlzLnJhZGl1c0hhbmRsZSYmKHRoaXMubGF5ZXIuZGVzdHJveUZlYXR1cmVzKFt0aGlzLnJhZGl1c0hhbmRsZV0se3NpbGVudDohMH0pLHRoaXMucmFkaXVzSGFuZGxlPW51bGwpKTphIT09dGhpcy5yYWRpdXNIYW5kbGUmJnRoaXMubGF5ZXIuZXZlbnRzLnRyaWdnZXJFdmVudCgidmVydGV4bW9kaWZpZWQiLAp7dmVydGV4OmEuZ2VvbWV0cnksZmVhdHVyZTp0aGlzLmZlYXR1cmUscGl4ZWw6Yn0pLDA8dGhpcy52aXJ0dWFsVmVydGljZXMubGVuZ3RoJiYodGhpcy5sYXllci5kZXN0cm95RmVhdHVyZXModGhpcy52aXJ0dWFsVmVydGljZXMse3NpbGVudDohMH0pLHRoaXMudmlydHVhbFZlcnRpY2VzPVtdKSx0aGlzLmxheWVyLmRyYXdGZWF0dXJlKHRoaXMuZmVhdHVyZSx0aGlzLnN0YW5kYWxvbmU/dm9pZCAwOiJzZWxlY3QiKSk7dGhpcy5sYXllci5kcmF3RmVhdHVyZShhKX0sZHJhZ0NvbXBsZXRlOmZ1bmN0aW9uKGEpe3RoaXMucmVzZXRWZXJ0aWNlcygpO3RoaXMuc2V0RmVhdHVyZVN0YXRlKCk7dGhpcy5vbk1vZGlmaWNhdGlvbih0aGlzLmZlYXR1cmUpO3RoaXMubGF5ZXIuZXZlbnRzLnRyaWdnZXJFdmVudCgiZmVhdHVyZW1vZGlmaWVkIix7ZmVhdHVyZTp0aGlzLmZlYXR1cmV9KX0sc2V0RmVhdHVyZVN0YXRlOmZ1bmN0aW9uKCl7aWYodGhpcy5mZWF0dXJlLnN0YXRlIT1PcGVuTGF5ZXJzLlN0YXRlLklOU0VSVCYmCnRoaXMuZmVhdHVyZS5zdGF0ZSE9T3BlbkxheWVycy5TdGF0ZS5ERUxFVEUmJih0aGlzLmZlYXR1cmUuc3RhdGU9T3BlbkxheWVycy5TdGF0ZS5VUERBVEUsdGhpcy5tb2RpZmllZCYmdGhpcy5fb3JpZ2luYWxHZW9tZXRyeSkpe3ZhciBhPXRoaXMuZmVhdHVyZTthLm1vZGlmaWVkPU9wZW5MYXllcnMuVXRpbC5leHRlbmQoYS5tb2RpZmllZCx7Z2VvbWV0cnk6dGhpcy5fb3JpZ2luYWxHZW9tZXRyeX0pO2RlbGV0ZSB0aGlzLl9vcmlnaW5hbEdlb21ldHJ5fX0scmVzZXRWZXJ0aWNlczpmdW5jdGlvbigpezA8dGhpcy52ZXJ0aWNlcy5sZW5ndGgmJih0aGlzLmxheWVyLnJlbW92ZUZlYXR1cmVzKHRoaXMudmVydGljZXMse3NpbGVudDohMH0pLHRoaXMudmVydGljZXM9W10pOzA8dGhpcy52aXJ0dWFsVmVydGljZXMubGVuZ3RoJiYodGhpcy5sYXllci5yZW1vdmVGZWF0dXJlcyh0aGlzLnZpcnR1YWxWZXJ0aWNlcyx7c2lsZW50OiEwfSksdGhpcy52aXJ0dWFsVmVydGljZXM9W10pO3RoaXMuZHJhZ0hhbmRsZSYmCih0aGlzLmxheWVyLmRlc3Ryb3lGZWF0dXJlcyhbdGhpcy5kcmFnSGFuZGxlXSx7c2lsZW50OiEwfSksdGhpcy5kcmFnSGFuZGxlPW51bGwpO3RoaXMucmFkaXVzSGFuZGxlJiYodGhpcy5sYXllci5kZXN0cm95RmVhdHVyZXMoW3RoaXMucmFkaXVzSGFuZGxlXSx7c2lsZW50OiEwfSksdGhpcy5yYWRpdXNIYW5kbGU9bnVsbCk7dGhpcy5mZWF0dXJlJiYiT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludCIhPXRoaXMuZmVhdHVyZS5nZW9tZXRyeS5DTEFTU19OQU1FJiYodGhpcy5tb2RlJk9wZW5MYXllcnMuQ29udHJvbC5Nb2RpZnlGZWF0dXJlLkRSQUcmJnRoaXMuY29sbGVjdERyYWdIYW5kbGUoKSx0aGlzLm1vZGUmKE9wZW5MYXllcnMuQ29udHJvbC5Nb2RpZnlGZWF0dXJlLlJPVEFURXxPcGVuTGF5ZXJzLkNvbnRyb2wuTW9kaWZ5RmVhdHVyZS5SRVNJWkUpJiZ0aGlzLmNvbGxlY3RSYWRpdXNIYW5kbGUoKSx0aGlzLm1vZGUmT3BlbkxheWVycy5Db250cm9sLk1vZGlmeUZlYXR1cmUuUkVTSEFQRSYmCih0aGlzLm1vZGUmT3BlbkxheWVycy5Db250cm9sLk1vZGlmeUZlYXR1cmUuUkVTSVpFfHx0aGlzLmNvbGxlY3RWZXJ0aWNlcygpKSl9LGhhbmRsZUtleXByZXNzOmZ1bmN0aW9uKGEpe3ZhciBiPWEua2V5Q29kZTt0aGlzLmZlYXR1cmUmJi0xIT1PcGVuTGF5ZXJzLlV0aWwuaW5kZXhPZih0aGlzLmRlbGV0ZUNvZGVzLGIpJiYoYj10aGlzLmxheWVyLmdldEZlYXR1cmVGcm9tRXZlbnQodGhpcy5oYW5kbGVycy5kcmFnLmV2dCkpJiYoLTEhPU9wZW5MYXllcnMuVXRpbC5pbmRleE9mKHRoaXMudmVydGljZXMsYikmJiF0aGlzLmhhbmRsZXJzLmRyYWcuZHJhZ2dpbmcmJmIuZ2VvbWV0cnkucGFyZW50KSYmKGIuZ2VvbWV0cnkucGFyZW50LnJlbW92ZUNvbXBvbmVudChiLmdlb21ldHJ5KSx0aGlzLmxheWVyLmV2ZW50cy50cmlnZ2VyRXZlbnQoInZlcnRleHJlbW92ZWQiLHt2ZXJ0ZXg6Yi5nZW9tZXRyeSxmZWF0dXJlOnRoaXMuZmVhdHVyZSxwaXhlbDphLnh5fSksdGhpcy5sYXllci5kcmF3RmVhdHVyZSh0aGlzLmZlYXR1cmUsCnRoaXMuc3RhbmRhbG9uZT92b2lkIDA6InNlbGVjdCIpLHRoaXMubW9kaWZpZWQ9ITAsdGhpcy5yZXNldFZlcnRpY2VzKCksdGhpcy5zZXRGZWF0dXJlU3RhdGUoKSx0aGlzLm9uTW9kaWZpY2F0aW9uKHRoaXMuZmVhdHVyZSksdGhpcy5sYXllci5ldmVudHMudHJpZ2dlckV2ZW50KCJmZWF0dXJlbW9kaWZpZWQiLHtmZWF0dXJlOnRoaXMuZmVhdHVyZX0pKX0sY29sbGVjdFZlcnRpY2VzOmZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShjKXt2YXIgZCxlLGY7aWYoIk9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQiPT1jLkNMQVNTX05BTUUpZT1uZXcgT3BlbkxheWVycy5GZWF0dXJlLlZlY3RvcihjKSxlLl9za2V0Y2g9ITAsZS5yZW5kZXJJbnRlbnQ9Yi52ZXJ0ZXhSZW5kZXJJbnRlbnQsYi52ZXJ0aWNlcy5wdXNoKGUpO2Vsc2V7Zj1jLmNvbXBvbmVudHMubGVuZ3RoOyJPcGVuTGF5ZXJzLkdlb21ldHJ5LkxpbmVhclJpbmciPT1jLkNMQVNTX05BTUUmJihmLT0xKTtmb3IoZD0wO2Q8ZjsrK2QpZT0KYy5jb21wb25lbnRzW2RdLCJPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50Ij09ZS5DTEFTU19OQU1FPyhlPW5ldyBPcGVuTGF5ZXJzLkZlYXR1cmUuVmVjdG9yKGUpLGUuX3NrZXRjaD0hMCxlLnJlbmRlckludGVudD1iLnZlcnRleFJlbmRlckludGVudCxiLnZlcnRpY2VzLnB1c2goZSkpOmEoZSk7aWYoYi5jcmVhdGVWZXJ0aWNlcyYmIk9wZW5MYXllcnMuR2VvbWV0cnkuTXVsdGlQb2ludCIhPWMuQ0xBU1NfTkFNRSlmb3IoZD0wLGY9Yy5jb21wb25lbnRzLmxlbmd0aDtkPGYtMTsrK2Qpe2U9Yy5jb21wb25lbnRzW2RdO3ZhciBnPWMuY29tcG9uZW50c1tkKzFdOyJPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50Ij09ZS5DTEFTU19OQU1FJiYiT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludCI9PWcuQ0xBU1NfTkFNRSYmKGU9bmV3IE9wZW5MYXllcnMuRmVhdHVyZS5WZWN0b3IobmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoKGUueCtnLngpLzIsKGUueStnLnkpLzIpLG51bGwsYi52aXJ0dWFsU3R5bGUpLAplLmdlb21ldHJ5LnBhcmVudD1jLGUuX2luZGV4PWQrMSxlLl9za2V0Y2g9ITAsYi52aXJ0dWFsVmVydGljZXMucHVzaChlKSl9fX10aGlzLnZlcnRpY2VzPVtdO3RoaXMudmlydHVhbFZlcnRpY2VzPVtdO3ZhciBiPXRoaXM7YS5jYWxsKHRoaXMsdGhpcy5mZWF0dXJlLmdlb21ldHJ5KTt0aGlzLmxheWVyLmFkZEZlYXR1cmVzKHRoaXMudmlydHVhbFZlcnRpY2VzLHtzaWxlbnQ6ITB9KTt0aGlzLmxheWVyLmFkZEZlYXR1cmVzKHRoaXMudmVydGljZXMse3NpbGVudDohMH0pfSxjb2xsZWN0RHJhZ0hhbmRsZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZmVhdHVyZS5nZW9tZXRyeSxiPWEuZ2V0Qm91bmRzKCkuZ2V0Q2VudGVyTG9uTGF0KCksYj1uZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludChiLmxvbixiLmxhdCksYz1uZXcgT3BlbkxheWVycy5GZWF0dXJlLlZlY3RvcihiKTtiLm1vdmU9ZnVuY3Rpb24oYixjKXtPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50LnByb3RvdHlwZS5tb3ZlLmNhbGwodGhpcywKYixjKTthLm1vdmUoYixjKX07Yy5fc2tldGNoPSEwO3RoaXMuZHJhZ0hhbmRsZT1jO3RoaXMuZHJhZ0hhbmRsZS5yZW5kZXJJbnRlbnQ9dGhpcy52ZXJ0ZXhSZW5kZXJJbnRlbnQ7dGhpcy5sYXllci5hZGRGZWF0dXJlcyhbdGhpcy5kcmFnSGFuZGxlXSx7c2lsZW50OiEwfSl9LGNvbGxlY3RSYWRpdXNIYW5kbGU6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmZlYXR1cmUuZ2VvbWV0cnksYj1hLmdldEJvdW5kcygpLGM9Yi5nZXRDZW50ZXJMb25MYXQoKSxkPW5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KGMubG9uLGMubGF0KSxiPW5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KGIucmlnaHQsYi5ib3R0b20pLGM9bmV3IE9wZW5MYXllcnMuRmVhdHVyZS5WZWN0b3IoYiksZT10aGlzLm1vZGUmT3BlbkxheWVycy5Db250cm9sLk1vZGlmeUZlYXR1cmUuUkVTSVpFLGY9dGhpcy5tb2RlJk9wZW5MYXllcnMuQ29udHJvbC5Nb2RpZnlGZWF0dXJlLlJFU0hBUEUsZz10aGlzLm1vZGUmCk9wZW5MYXllcnMuQ29udHJvbC5Nb2RpZnlGZWF0dXJlLlJPVEFURTtiLm1vdmU9ZnVuY3Rpb24oYixjKXtPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50LnByb3RvdHlwZS5tb3ZlLmNhbGwodGhpcyxiLGMpO3ZhciBsPXRoaXMueC1kLngsbT10aGlzLnktZC55LG49bC1iLHA9bS1jO2lmKGcpe3ZhciBxPU1hdGguYXRhbjIocCxuKSxxPU1hdGguYXRhbjIobSxsKS1xLHE9cSooMTgwL01hdGguUEkpO2Eucm90YXRlKHEsZCl9aWYoZSl7dmFyIHI7Zj8obS89cCxyPWwvbi9tKToobj1NYXRoLnNxcnQobipuK3AqcCksbT1NYXRoLnNxcnQobCpsK20qbSkvbik7YS5yZXNpemUobSxkLHIpfX07Yy5fc2tldGNoPSEwO3RoaXMucmFkaXVzSGFuZGxlPWM7dGhpcy5yYWRpdXNIYW5kbGUucmVuZGVySW50ZW50PXRoaXMudmVydGV4UmVuZGVySW50ZW50O3RoaXMubGF5ZXIuYWRkRmVhdHVyZXMoW3RoaXMucmFkaXVzSGFuZGxlXSx7c2lsZW50OiEwfSl9LHNldE1hcDpmdW5jdGlvbihhKXt0aGlzLmhhbmRsZXJzLmRyYWcuc2V0TWFwKGEpOwpPcGVuTGF5ZXJzLkNvbnRyb2wucHJvdG90eXBlLnNldE1hcC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGhhbmRsZU1hcEV2ZW50czpmdW5jdGlvbihhKXsicmVtb3ZlbGF5ZXIiIT1hLnR5cGUmJiJvcmRlciIhPWEucHJvcGVydHl8fHRoaXMubW92ZUxheWVyVG9Ub3AoKX0sbW92ZUxheWVyVG9Ub3A6ZnVuY3Rpb24oKXt2YXIgYT1NYXRoLm1heCh0aGlzLm1hcC5aX0lOREVYX0JBU0UuRmVhdHVyZS0xLHRoaXMubGF5ZXIuZ2V0WkluZGV4KCkpKzE7dGhpcy5sYXllci5zZXRaSW5kZXgoYSl9LG1vdmVMYXllckJhY2s6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmxheWVyLmdldFpJbmRleCgpLTE7YT49dGhpcy5tYXAuWl9JTkRFWF9CQVNFLkZlYXR1cmU/dGhpcy5sYXllci5zZXRaSW5kZXgoYSk6dGhpcy5tYXAuc2V0TGF5ZXJaSW5kZXgodGhpcy5sYXllcix0aGlzLm1hcC5nZXRMYXllckluZGV4KHRoaXMubGF5ZXIpKX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Db250cm9sLk1vZGlmeUZlYXR1cmUifSk7Ck9wZW5MYXllcnMuQ29udHJvbC5Nb2RpZnlGZWF0dXJlLlJFU0hBUEU9MTtPcGVuTGF5ZXJzLkNvbnRyb2wuTW9kaWZ5RmVhdHVyZS5SRVNJWkU9MjtPcGVuTGF5ZXJzLkNvbnRyb2wuTW9kaWZ5RmVhdHVyZS5ST1RBVEU9NDtPcGVuTGF5ZXJzLkNvbnRyb2wuTW9kaWZ5RmVhdHVyZS5EUkFHPTg7T3BlbkxheWVycy5MYXllci5CaW5nPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5MYXllci5YWVose2tleTpudWxsLHNlcnZlclJlc29sdXRpb25zOlsxNTY1NDMuMDMzOTA2MjUsNzgyNzEuNTE2OTUzMTI1LDM5MTM1Ljc1ODQ3NjU2MjUsMTk1NjcuODc5MjM4MjgxMjUsOTc4My45Mzk2MTkxNDA2MjUsNDg5MS45Njk4MDk1NzAzMTI1LDI0NDUuOTg0OTA0Nzg1MTU2MiwxMjIyLjk5MjQ1MjM5MjU3ODEsNjExLjQ5NjIyNjE5NjI4OTEsMzA1Ljc0ODExMzA5ODE0NDUzLDE1Mi44NzQwNTY1NDkwNzIyNiw3Ni40MzcwMjgyNzQ1MzYxMywzOC4yMTg1MTQxMzcyNjgwNjYsMTkuMTA5MjU3MDY4NjM0MDMzLDkuNTU0NjI4NTM0MzE3MDE3LDQuNzc3MzE0MjY3MTU4NTA4LDIuMzg4NjU3MTMzNTc5MjU0LDEuMTk0MzI4NTY2Nzg5NjI3LDAuNTk3MTY0MjgzMzk0ODEzNSwwLjI5ODU4MjE0MTY5NzQwNjc3LDAuMTQ5MjkxMDcwODQ4NzAzMzgsMC4wNzQ2NDU1MzU0MjQzNTE2OV0sYXR0cmlidXRpb25UZW1wbGF0ZTonPHNwYW4gY2xhc3M9Im9sQmluZ0F0dHJpYnV0aW9uICR7dHlwZX0iPjxkaXY+PGEgdGFyZ2V0PSJfYmxhbmsiIGhyZWY9Imh0dHA6Ly93d3cuYmluZy5jb20vbWFwcy8iPjxpbWcgc3JjPSIke2xvZ299IiAvPjwvYT48L2Rpdj4ke2NvcHlyaWdodHN9PGEgc3R5bGU9IndoaXRlLXNwYWNlOiBub3dyYXAiIHRhcmdldD0iX2JsYW5rIiBocmVmPSJodHRwOi8vd3d3Lm1pY3Jvc29mdC5jb20vbWFwcy9wcm9kdWN0L3Rlcm1zLmh0bWwiPlRlcm1zIG9mIFVzZTwvYT48L3NwYW4+JywKbWV0YWRhdGE6bnVsbCxwcm90b2NvbFJlZ2V4Oi9eaHR0cDovaSx0eXBlOiJSb2FkIixjdWx0dXJlOiJlbi1VUyIsbWV0YWRhdGFQYXJhbXM6bnVsbCx0aWxlT3B0aW9uczpudWxsLHByb3RvY29sOn53aW5kb3cubG9jYXRpb24uaHJlZi5pbmRleE9mKCJodHRwIik/IiI6Imh0dHA6Iixpbml0aWFsaXplOmZ1bmN0aW9uKGEpe2E9T3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoe3NwaGVyaWNhbE1lcmNhdG9yOiEwfSxhKTtPcGVuTGF5ZXJzLkxheWVyLlhZWi5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLFthLm5hbWV8fCJCaW5nICIrKGEudHlwZXx8dGhpcy50eXBlKSxudWxsLGFdKTt0aGlzLnRpbGVPcHRpb25zPU9wZW5MYXllcnMuVXRpbC5leHRlbmQoe2Nyb3NzT3JpZ2luS2V5d29yZDoiYW5vbnltb3VzIn0sdGhpcy5vcHRpb25zLnRpbGVPcHRpb25zKTt0aGlzLmxvYWRNZXRhZGF0YSgpfSxsb2FkTWV0YWRhdGE6ZnVuY3Rpb24oKXt0aGlzLl9jYWxsYmFja0lkPQoiX2NhbGxiYWNrXyIrdGhpcy5pZC5yZXBsYWNlKC9cLi9nLCJfIik7d2luZG93W3RoaXMuX2NhbGxiYWNrSWRdPU9wZW5MYXllcnMuRnVuY3Rpb24uYmluZChPcGVuTGF5ZXJzLkxheWVyLkJpbmcucHJvY2Vzc01ldGFkYXRhLHRoaXMpO3ZhciBhPU9wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKHtrZXk6dGhpcy5rZXksanNvbnA6dGhpcy5fY2FsbGJhY2tJZCxpbmNsdWRlOiJJbWFnZXJ5UHJvdmlkZXJzIn0sdGhpcy5tZXRhZGF0YVBhcmFtcyksYT10aGlzLnByb3RvY29sKyIvL2Rldi52aXJ0dWFsZWFydGgubmV0L1JFU1QvdjEvSW1hZ2VyeS9NZXRhZGF0YS8iK3RoaXMudHlwZSsiPyIrT3BlbkxheWVycy5VdGlsLmdldFBhcmFtZXRlclN0cmluZyhhKSxiPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNjcmlwdCIpO2IudHlwZT0idGV4dC9qYXZhc2NyaXB0IjtiLnNyYz1hO2IuaWQ9dGhpcy5fY2FsbGJhY2tJZDtkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgiaGVhZCIpWzBdLmFwcGVuZENoaWxkKGIpfSwKaW5pdExheWVyOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5tZXRhZGF0YS5yZXNvdXJjZVNldHNbMF0ucmVzb3VyY2VzWzBdLGI9YS5pbWFnZVVybC5yZXBsYWNlKCJ7cXVhZGtleX0iLCIke3F1YWRrZXl9IiksYj1iLnJlcGxhY2UoIntjdWx0dXJlfSIsdGhpcy5jdWx0dXJlKSxiPWIucmVwbGFjZSh0aGlzLnByb3RvY29sUmVnZXgsdGhpcy5wcm90b2NvbCk7dGhpcy51cmw9W107Zm9yKHZhciBjPTA7YzxhLmltYWdlVXJsU3ViZG9tYWlucy5sZW5ndGg7KytjKXRoaXMudXJsLnB1c2goYi5yZXBsYWNlKCJ7c3ViZG9tYWlufSIsYS5pbWFnZVVybFN1YmRvbWFpbnNbY10pKTt0aGlzLmFkZE9wdGlvbnMoe21heFJlc29sdXRpb246TWF0aC5taW4odGhpcy5zZXJ2ZXJSZXNvbHV0aW9uc1thLnpvb21NaW5dLHRoaXMubWF4UmVzb2x1dGlvbnx8TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZKSxudW1ab29tTGV2ZWxzOk1hdGgubWluKGEuem9vbU1heCsxLWEuem9vbU1pbix0aGlzLm51bVpvb21MZXZlbHMpfSwKITApO3RoaXMuaXNCYXNlTGF5ZXJ8fHRoaXMucmVkcmF3KCk7dGhpcy51cGRhdGVBdHRyaWJ1dGlvbigpfSxnZXRVUkw6ZnVuY3Rpb24oYSl7aWYodGhpcy51cmwpe3ZhciBiPXRoaXMuZ2V0WFlaKGEpO2E9Yi54O2Zvcih2YXIgYz1iLnksYj1iLnosZD1bXSxlPWI7MDxlOy0tZSl7dmFyIGY9IjAiLGc9MTw8ZS0xOzAhPShhJmcpJiZmKys7MCE9KGMmZykmJihmKyssZisrKTtkLnB1c2goZil9ZD1kLmpvaW4oIiIpO2E9dGhpcy5zZWxlY3RVcmwoIiIrYStjK2IsdGhpcy51cmwpO3JldHVybiBPcGVuTGF5ZXJzLlN0cmluZy5mb3JtYXQoYSx7cXVhZGtleTpkfSl9fSx1cGRhdGVBdHRyaWJ1dGlvbjpmdW5jdGlvbigpe3ZhciBhPXRoaXMubWV0YWRhdGE7aWYoYS5yZXNvdXJjZVNldHMmJnRoaXMubWFwJiZ0aGlzLm1hcC5jZW50ZXIpe3ZhciBiPWEucmVzb3VyY2VTZXRzWzBdLnJlc291cmNlc1swXSxjPXRoaXMubWFwLmdldEV4dGVudCgpLnRyYW5zZm9ybSh0aGlzLm1hcC5nZXRQcm9qZWN0aW9uT2JqZWN0KCksCm5ldyBPcGVuTGF5ZXJzLlByb2plY3Rpb24oIkVQU0c6NDMyNiIpKSxkPWIuaW1hZ2VyeVByb3ZpZGVyc3x8W10sZT1PcGVuTGF5ZXJzLlV0aWwuaW5kZXhPZih0aGlzLnNlcnZlclJlc29sdXRpb25zLHRoaXMuZ2V0U2VydmVyUmVzb2x1dGlvbigpKSxiPSIiLGYsZyxoLGssbCxtLG47Zz0wO2ZvcihoPWQubGVuZ3RoO2c8aDsrK2cpZm9yKGY9ZFtnXSxrPTAsbD1mLmNvdmVyYWdlQXJlYXMubGVuZ3RoO2s8bDsrK2spbj1mLmNvdmVyYWdlQXJlYXNba10sbT1PcGVuTGF5ZXJzLkJvdW5kcy5mcm9tQXJyYXkobi5iYm94LCEwKSxjLmludGVyc2VjdHNCb3VuZHMobSkmJihlPD1uLnpvb21NYXgmJmU+PW4uem9vbU1pbikmJihiKz1mLmF0dHJpYnV0aW9uKyIgIik7YT1hLmJyYW5kTG9nb1VyaS5yZXBsYWNlKHRoaXMucHJvdG9jb2xSZWdleCx0aGlzLnByb3RvY29sKTt0aGlzLmF0dHJpYnV0aW9uPU9wZW5MYXllcnMuU3RyaW5nLmZvcm1hdCh0aGlzLmF0dHJpYnV0aW9uVGVtcGxhdGUse3R5cGU6dGhpcy50eXBlLnRvTG93ZXJDYXNlKCksCmxvZ286YSxjb3B5cmlnaHRzOmJ9KTt0aGlzLm1hcCYmdGhpcy5tYXAuZXZlbnRzLnRyaWdnZXJFdmVudCgiY2hhbmdlbGF5ZXIiLHtsYXllcjp0aGlzLHByb3BlcnR5OiJhdHRyaWJ1dGlvbiJ9KX19LHNldE1hcDpmdW5jdGlvbigpe09wZW5MYXllcnMuTGF5ZXIuWFlaLnByb3RvdHlwZS5zZXRNYXAuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMubWFwLmV2ZW50cy5yZWdpc3RlcigibW92ZWVuZCIsdGhpcyx0aGlzLnVwZGF0ZUF0dHJpYnV0aW9uKX0sY2xvbmU6ZnVuY3Rpb24oYSl7bnVsbD09YSYmKGE9bmV3IE9wZW5MYXllcnMuTGF5ZXIuQmluZyh0aGlzLm9wdGlvbnMpKTtyZXR1cm4gYT1PcGVuTGF5ZXJzLkxheWVyLlhZWi5wcm90b3R5cGUuY2xvbmUuYXBwbHkodGhpcyxbYV0pfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5tYXAmJnRoaXMubWFwLmV2ZW50cy51bnJlZ2lzdGVyKCJtb3ZlZW5kIix0aGlzLHRoaXMudXBkYXRlQXR0cmlidXRpb24pO09wZW5MYXllcnMuTGF5ZXIuWFlaLnByb3RvdHlwZS5kZXN0cm95LmFwcGx5KHRoaXMsCmFyZ3VtZW50cyl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuTGF5ZXIuQmluZyJ9KTtPcGVuTGF5ZXJzLkxheWVyLkJpbmcucHJvY2Vzc01ldGFkYXRhPWZ1bmN0aW9uKGEpe3RoaXMubWV0YWRhdGE9YTt0aGlzLmluaXRMYXllcigpO2E9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5fY2FsbGJhY2tJZCk7YS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGEpO3dpbmRvd1t0aGlzLl9jYWxsYmFja0lkXT12b2lkIDA7ZGVsZXRlIHRoaXMuX2NhbGxiYWNrSWR9O09wZW5MYXllcnMuU3R5bGVNYXA9T3BlbkxheWVycy5DbGFzcyh7c3R5bGVzOm51bGwsZXh0ZW5kRGVmYXVsdDohMCxpbml0aWFsaXplOmZ1bmN0aW9uKGEsYil7dGhpcy5zdHlsZXM9eyJkZWZhdWx0IjpuZXcgT3BlbkxheWVycy5TdHlsZShPcGVuTGF5ZXJzLkZlYXR1cmUuVmVjdG9yLnN0eWxlWyJkZWZhdWx0Il0pLHNlbGVjdDpuZXcgT3BlbkxheWVycy5TdHlsZShPcGVuTGF5ZXJzLkZlYXR1cmUuVmVjdG9yLnN0eWxlLnNlbGVjdCksdGVtcG9yYXJ5Om5ldyBPcGVuTGF5ZXJzLlN0eWxlKE9wZW5MYXllcnMuRmVhdHVyZS5WZWN0b3Iuc3R5bGUudGVtcG9yYXJ5KSwiZGVsZXRlIjpuZXcgT3BlbkxheWVycy5TdHlsZShPcGVuTGF5ZXJzLkZlYXR1cmUuVmVjdG9yLnN0eWxlWyJkZWxldGUiXSl9O2lmKGEgaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLlN0eWxlKXRoaXMuc3R5bGVzWyJkZWZhdWx0Il09YSx0aGlzLnN0eWxlcy5zZWxlY3Q9YSx0aGlzLnN0eWxlcy50ZW1wb3Jhcnk9YSx0aGlzLnN0eWxlc1siZGVsZXRlIl09CmE7ZWxzZSBpZigib2JqZWN0Ij09dHlwZW9mIGEpZm9yKHZhciBjIGluIGEpaWYoYVtjXWluc3RhbmNlb2YgT3BlbkxheWVycy5TdHlsZSl0aGlzLnN0eWxlc1tjXT1hW2NdO2Vsc2UgaWYoIm9iamVjdCI9PXR5cGVvZiBhW2NdKXRoaXMuc3R5bGVzW2NdPW5ldyBPcGVuTGF5ZXJzLlN0eWxlKGFbY10pO2Vsc2V7dGhpcy5zdHlsZXNbImRlZmF1bHQiXT1uZXcgT3BlbkxheWVycy5TdHlsZShhKTt0aGlzLnN0eWxlcy5zZWxlY3Q9bmV3IE9wZW5MYXllcnMuU3R5bGUoYSk7dGhpcy5zdHlsZXMudGVtcG9yYXJ5PW5ldyBPcGVuTGF5ZXJzLlN0eWxlKGEpO3RoaXMuc3R5bGVzWyJkZWxldGUiXT1uZXcgT3BlbkxheWVycy5TdHlsZShhKTticmVha31PcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHRoaXMsYil9LGRlc3Ryb3k6ZnVuY3Rpb24oKXtmb3IodmFyIGEgaW4gdGhpcy5zdHlsZXMpdGhpcy5zdHlsZXNbYV0uZGVzdHJveSgpO3RoaXMuc3R5bGVzPW51bGx9LGNyZWF0ZVN5bWJvbGl6ZXI6ZnVuY3Rpb24oYSwKYil7YXx8KGE9bmV3IE9wZW5MYXllcnMuRmVhdHVyZS5WZWN0b3IpO3RoaXMuc3R5bGVzW2JdfHwoYj0iZGVmYXVsdCIpO2EucmVuZGVySW50ZW50PWI7dmFyIGM9e307dGhpcy5leHRlbmREZWZhdWx0JiYiZGVmYXVsdCIhPWImJihjPXRoaXMuc3R5bGVzWyJkZWZhdWx0Il0uY3JlYXRlU3ltYm9saXplcihhKSk7cmV0dXJuIE9wZW5MYXllcnMuVXRpbC5leHRlbmQoYyx0aGlzLnN0eWxlc1tiXS5jcmVhdGVTeW1ib2xpemVyKGEpKX0sYWRkVW5pcXVlVmFsdWVSdWxlczpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1bXSxmO2ZvcihmIGluIGMpZS5wdXNoKG5ldyBPcGVuTGF5ZXJzLlJ1bGUoe3N5bWJvbGl6ZXI6Y1tmXSxjb250ZXh0OmQsZmlsdGVyOm5ldyBPcGVuTGF5ZXJzLkZpbHRlci5Db21wYXJpc29uKHt0eXBlOk9wZW5MYXllcnMuRmlsdGVyLkNvbXBhcmlzb24uRVFVQUxfVE8scHJvcGVydHk6Yix2YWx1ZTpmfSl9KSk7dGhpcy5zdHlsZXNbYV0uYWRkUnVsZXMoZSl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuU3R5bGVNYXAifSk7T3BlbkxheWVycy5MYXllci5WZWN0b3I9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkxheWVyLHtpc0Jhc2VMYXllcjohMSxpc0ZpeGVkOiExLGZlYXR1cmVzOm51bGwsZmlsdGVyOm51bGwsc2VsZWN0ZWRGZWF0dXJlczpudWxsLHVucmVuZGVyZWRGZWF0dXJlczpudWxsLHJlcG9ydEVycm9yOiEwLHN0eWxlOm51bGwsc3R5bGVNYXA6bnVsbCxzdHJhdGVnaWVzOm51bGwscHJvdG9jb2w6bnVsbCxyZW5kZXJlcnM6WyJTVkciLCJWTUwiLCJDYW52YXMiXSxyZW5kZXJlcjpudWxsLHJlbmRlcmVyT3B0aW9uczpudWxsLGdlb21ldHJ5VHlwZTpudWxsLGRyYXduOiExLHJhdGlvOjEsaW5pdGlhbGl6ZTpmdW5jdGlvbihhLGIpe09wZW5MYXllcnMuTGF5ZXIucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMucmVuZGVyZXImJnRoaXMucmVuZGVyZXIuc3VwcG9ydGVkKCl8fHRoaXMuYXNzaWduUmVuZGVyZXIoKTt0aGlzLnJlbmRlcmVyJiZ0aGlzLnJlbmRlcmVyLnN1cHBvcnRlZCgpfHwKKHRoaXMucmVuZGVyZXI9bnVsbCx0aGlzLmRpc3BsYXlFcnJvcigpKTt0aGlzLnN0eWxlTWFwfHwodGhpcy5zdHlsZU1hcD1uZXcgT3BlbkxheWVycy5TdHlsZU1hcCk7dGhpcy5mZWF0dXJlcz1bXTt0aGlzLnNlbGVjdGVkRmVhdHVyZXM9W107dGhpcy51bnJlbmRlcmVkRmVhdHVyZXM9e307aWYodGhpcy5zdHJhdGVnaWVzKWZvcih2YXIgYz0wLGQ9dGhpcy5zdHJhdGVnaWVzLmxlbmd0aDtjPGQ7YysrKXRoaXMuc3RyYXRlZ2llc1tjXS5zZXRMYXllcih0aGlzKX0sZGVzdHJveTpmdW5jdGlvbigpe2lmKHRoaXMuc3RyYXRlZ2llcyl7dmFyIGEsYixjO2I9MDtmb3IoYz10aGlzLnN0cmF0ZWdpZXMubGVuZ3RoO2I8YztiKyspYT10aGlzLnN0cmF0ZWdpZXNbYl0sYS5hdXRvRGVzdHJveSYmYS5kZXN0cm95KCk7dGhpcy5zdHJhdGVnaWVzPW51bGx9dGhpcy5wcm90b2NvbCYmKHRoaXMucHJvdG9jb2wuYXV0b0Rlc3Ryb3kmJnRoaXMucHJvdG9jb2wuZGVzdHJveSgpLHRoaXMucHJvdG9jb2w9Cm51bGwpO3RoaXMuZGVzdHJveUZlYXR1cmVzKCk7dGhpcy51bnJlbmRlcmVkRmVhdHVyZXM9dGhpcy5zZWxlY3RlZEZlYXR1cmVzPXRoaXMuZmVhdHVyZXM9bnVsbDt0aGlzLnJlbmRlcmVyJiZ0aGlzLnJlbmRlcmVyLmRlc3Ryb3koKTt0aGlzLmRyYXduPXRoaXMuZ2VvbWV0cnlUeXBlPXRoaXMucmVuZGVyZXI9bnVsbDtPcGVuTGF5ZXJzLkxheWVyLnByb3RvdHlwZS5kZXN0cm95LmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sY2xvbmU6ZnVuY3Rpb24oYSl7bnVsbD09YSYmKGE9bmV3IE9wZW5MYXllcnMuTGF5ZXIuVmVjdG9yKHRoaXMubmFtZSx0aGlzLmdldE9wdGlvbnMoKSkpO2E9T3BlbkxheWVycy5MYXllci5wcm90b3R5cGUuY2xvbmUuYXBwbHkodGhpcyxbYV0pO2Zvcih2YXIgYj10aGlzLmZlYXR1cmVzLGM9Yi5sZW5ndGgsZD1BcnJheShjKSxlPTA7ZTxjOysrZSlkW2VdPWJbZV0uY2xvbmUoKTthLmZlYXR1cmVzPWQ7cmV0dXJuIGF9LHJlZnJlc2g6ZnVuY3Rpb24oYSl7dGhpcy5jYWxjdWxhdGVJblJhbmdlKCkmJgp0aGlzLnZpc2liaWxpdHkmJnRoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgicmVmcmVzaCIsYSl9LGFzc2lnblJlbmRlcmVyOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPTAsYj10aGlzLnJlbmRlcmVycy5sZW5ndGg7YTxiO2ErKyl7dmFyIGM9dGhpcy5yZW5kZXJlcnNbYV07aWYoKGM9ImZ1bmN0aW9uIj09dHlwZW9mIGM/YzpPcGVuTGF5ZXJzLlJlbmRlcmVyW2NdKSYmYy5wcm90b3R5cGUuc3VwcG9ydGVkKCkpe3RoaXMucmVuZGVyZXI9bmV3IGModGhpcy5kaXYsdGhpcy5yZW5kZXJlck9wdGlvbnMpO2JyZWFrfX19LGRpc3BsYXlFcnJvcjpmdW5jdGlvbigpe3RoaXMucmVwb3J0RXJyb3ImJk9wZW5MYXllcnMuQ29uc29sZS51c2VyRXJyb3IoT3BlbkxheWVycy5pMThuKCJicm93c2VyTm90U3VwcG9ydGVkIix7cmVuZGVyZXJzOnRoaXMucmVuZGVyZXJzLmpvaW4oIlxuIil9KSl9LHNldE1hcDpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLkxheWVyLnByb3RvdHlwZS5zZXRNYXAuYXBwbHkodGhpcywKYXJndW1lbnRzKTtpZih0aGlzLnJlbmRlcmVyKXt0aGlzLnJlbmRlcmVyLm1hcD10aGlzLm1hcDt2YXIgYj10aGlzLm1hcC5nZXRTaXplKCk7Yi53Kj10aGlzLnJhdGlvO2IuaCo9dGhpcy5yYXRpbzt0aGlzLnJlbmRlcmVyLnNldFNpemUoYil9ZWxzZSB0aGlzLm1hcC5yZW1vdmVMYXllcih0aGlzKX0sYWZ0ZXJBZGQ6ZnVuY3Rpb24oKXtpZih0aGlzLnN0cmF0ZWdpZXMpe3ZhciBhLGIsYztiPTA7Zm9yKGM9dGhpcy5zdHJhdGVnaWVzLmxlbmd0aDtiPGM7YisrKWE9dGhpcy5zdHJhdGVnaWVzW2JdLGEuYXV0b0FjdGl2YXRlJiZhLmFjdGl2YXRlKCl9fSxyZW1vdmVNYXA6ZnVuY3Rpb24oYSl7dGhpcy5kcmF3bj0hMTtpZih0aGlzLnN0cmF0ZWdpZXMpe3ZhciBiLGM7Yj0wO2ZvcihjPXRoaXMuc3RyYXRlZ2llcy5sZW5ndGg7YjxjO2IrKylhPXRoaXMuc3RyYXRlZ2llc1tiXSxhLmF1dG9BY3RpdmF0ZSYmYS5kZWFjdGl2YXRlKCl9fSxvbk1hcFJlc2l6ZTpmdW5jdGlvbigpe09wZW5MYXllcnMuTGF5ZXIucHJvdG90eXBlLm9uTWFwUmVzaXplLmFwcGx5KHRoaXMsCmFyZ3VtZW50cyk7dmFyIGE9dGhpcy5tYXAuZ2V0U2l6ZSgpO2Eudyo9dGhpcy5yYXRpbzthLmgqPXRoaXMucmF0aW87dGhpcy5yZW5kZXJlci5zZXRTaXplKGEpfSxtb3ZlVG86ZnVuY3Rpb24oYSxiLGMpe09wZW5MYXllcnMuTGF5ZXIucHJvdG90eXBlLm1vdmVUby5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dmFyIGQ9ITA7aWYoIWMpe3RoaXMucmVuZGVyZXIucm9vdC5zdHlsZS52aXNpYmlsaXR5PSJoaWRkZW4iO3ZhciBkPXRoaXMubWFwLmdldFNpemUoKSxlPWQudyxkPWQuaCxlPWUvMip0aGlzLnJhdGlvLWUvMixkPWQvMip0aGlzLnJhdGlvLWQvMixlPWUrdGhpcy5tYXAubGF5ZXJDb250YWluZXJPcmlnaW5QeC54LGU9LU1hdGgucm91bmQoZSksZD1kK3RoaXMubWFwLmxheWVyQ29udGFpbmVyT3JpZ2luUHgueSxkPS1NYXRoLnJvdW5kKGQpO3RoaXMuZGl2LnN0eWxlLmxlZnQ9ZSsicHgiO3RoaXMuZGl2LnN0eWxlLnRvcD1kKyJweCI7ZT10aGlzLm1hcC5nZXRFeHRlbnQoKS5zY2FsZSh0aGlzLnJhdGlvKTsKZD10aGlzLnJlbmRlcmVyLnNldEV4dGVudChlLGIpO3RoaXMucmVuZGVyZXIucm9vdC5zdHlsZS52aXNpYmlsaXR5PSJ2aXNpYmxlIjshMD09PU9wZW5MYXllcnMuSVNfR0VDS08mJih0aGlzLmRpdi5zY3JvbGxMZWZ0PXRoaXMuZGl2LnNjcm9sbExlZnQpO2lmKCFiJiZkKWZvcih2YXIgZiBpbiB0aGlzLnVucmVuZGVyZWRGZWF0dXJlcyllPXRoaXMudW5yZW5kZXJlZEZlYXR1cmVzW2ZdLHRoaXMuZHJhd0ZlYXR1cmUoZSl9aWYoIXRoaXMuZHJhd258fGJ8fCFkKWZvcih0aGlzLmRyYXduPSEwLGY9MCxkPXRoaXMuZmVhdHVyZXMubGVuZ3RoO2Y8ZDtmKyspdGhpcy5yZW5kZXJlci5sb2NrZWQ9ZiE9PWQtMSxlPXRoaXMuZmVhdHVyZXNbZl0sdGhpcy5kcmF3RmVhdHVyZShlKX0sZGlzcGxheTpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLkxheWVyLnByb3RvdHlwZS5kaXNwbGF5LmFwcGx5KHRoaXMsYXJndW1lbnRzKTt2YXIgYj10aGlzLmRpdi5zdHlsZS5kaXNwbGF5O2IhPXRoaXMucmVuZGVyZXIucm9vdC5zdHlsZS5kaXNwbGF5JiYKKHRoaXMucmVuZGVyZXIucm9vdC5zdHlsZS5kaXNwbGF5PWIpfSxhZGRGZWF0dXJlczpmdW5jdGlvbihhLGIpe09wZW5MYXllcnMuVXRpbC5pc0FycmF5KGEpfHwoYT1bYV0pO3ZhciBjPSFifHwhYi5zaWxlbnQ7aWYoYyl7dmFyIGQ9e2ZlYXR1cmVzOmF9O2lmKCExPT09dGhpcy5ldmVudHMudHJpZ2dlckV2ZW50KCJiZWZvcmVmZWF0dXJlc2FkZGVkIixkKSlyZXR1cm47YT1kLmZlYXR1cmVzfWZvcih2YXIgZD1bXSxlPTAsZj1hLmxlbmd0aDtlPGY7ZSsrKXt0aGlzLnJlbmRlcmVyLmxvY2tlZD1lIT1hLmxlbmd0aC0xPyEwOiExO3ZhciBnPWFbZV07aWYodGhpcy5nZW9tZXRyeVR5cGUmJiEoZy5nZW9tZXRyeSBpbnN0YW5jZW9mIHRoaXMuZ2VvbWV0cnlUeXBlKSl0aHJvdyBuZXcgVHlwZUVycm9yKCJhZGRGZWF0dXJlczogY29tcG9uZW50IHNob3VsZCBiZSBhbiAiK3RoaXMuZ2VvbWV0cnlUeXBlLnByb3RvdHlwZS5DTEFTU19OQU1FKTtnLmxheWVyPXRoaXM7IWcuc3R5bGUmJnRoaXMuc3R5bGUmJgooZy5zdHlsZT1PcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHt9LHRoaXMuc3R5bGUpKTtpZihjKXtpZighMT09PXRoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgiYmVmb3JlZmVhdHVyZWFkZGVkIix7ZmVhdHVyZTpnfSkpY29udGludWU7dGhpcy5wcmVGZWF0dXJlSW5zZXJ0KGcpfWQucHVzaChnKTt0aGlzLmZlYXR1cmVzLnB1c2goZyk7dGhpcy5kcmF3RmVhdHVyZShnKTtjJiYodGhpcy5ldmVudHMudHJpZ2dlckV2ZW50KCJmZWF0dXJlYWRkZWQiLHtmZWF0dXJlOmd9KSx0aGlzLm9uRmVhdHVyZUluc2VydChnKSl9YyYmdGhpcy5ldmVudHMudHJpZ2dlckV2ZW50KCJmZWF0dXJlc2FkZGVkIix7ZmVhdHVyZXM6ZH0pfSxyZW1vdmVGZWF0dXJlczpmdW5jdGlvbihhLGIpe2lmKGEmJjAhPT1hLmxlbmd0aCl7aWYoYT09PXRoaXMuZmVhdHVyZXMpcmV0dXJuIHRoaXMucmVtb3ZlQWxsRmVhdHVyZXMoYik7T3BlbkxheWVycy5VdGlsLmlzQXJyYXkoYSl8fChhPVthXSk7YT09PXRoaXMuc2VsZWN0ZWRGZWF0dXJlcyYmCihhPWEuc2xpY2UoKSk7dmFyIGM9IWJ8fCFiLnNpbGVudDtjJiZ0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoImJlZm9yZWZlYXR1cmVzcmVtb3ZlZCIse2ZlYXR1cmVzOmF9KTtmb3IodmFyIGQ9YS5sZW5ndGgtMTswPD1kO2QtLSl7dGhpcy5yZW5kZXJlci5sb2NrZWQ9MCE9ZCYmYVtkLTFdLmdlb21ldHJ5PyEwOiExO3ZhciBlPWFbZF07ZGVsZXRlIHRoaXMudW5yZW5kZXJlZEZlYXR1cmVzW2UuaWRdO2MmJnRoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgiYmVmb3JlZmVhdHVyZXJlbW92ZWQiLHtmZWF0dXJlOmV9KTt0aGlzLmZlYXR1cmVzPU9wZW5MYXllcnMuVXRpbC5yZW1vdmVJdGVtKHRoaXMuZmVhdHVyZXMsZSk7ZS5sYXllcj1udWxsO2UuZ2VvbWV0cnkmJnRoaXMucmVuZGVyZXIuZXJhc2VGZWF0dXJlcyhlKTstMSE9T3BlbkxheWVycy5VdGlsLmluZGV4T2YodGhpcy5zZWxlY3RlZEZlYXR1cmVzLGUpJiZPcGVuTGF5ZXJzLlV0aWwucmVtb3ZlSXRlbSh0aGlzLnNlbGVjdGVkRmVhdHVyZXMsCmUpO2MmJnRoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgiZmVhdHVyZXJlbW92ZWQiLHtmZWF0dXJlOmV9KX1jJiZ0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoImZlYXR1cmVzcmVtb3ZlZCIse2ZlYXR1cmVzOmF9KX19LHJlbW92ZUFsbEZlYXR1cmVzOmZ1bmN0aW9uKGEpe2E9IWF8fCFhLnNpbGVudDt2YXIgYj10aGlzLmZlYXR1cmVzO2EmJnRoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgiYmVmb3JlZmVhdHVyZXNyZW1vdmVkIix7ZmVhdHVyZXM6Yn0pO2Zvcih2YXIgYyxkPWIubGVuZ3RoLTE7MDw9ZDtkLS0pYz1iW2RdLGEmJnRoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgiYmVmb3JlZmVhdHVyZXJlbW92ZWQiLHtmZWF0dXJlOmN9KSxjLmxheWVyPW51bGwsYSYmdGhpcy5ldmVudHMudHJpZ2dlckV2ZW50KCJmZWF0dXJlcmVtb3ZlZCIse2ZlYXR1cmU6Y30pO3RoaXMucmVuZGVyZXIuY2xlYXIoKTt0aGlzLmZlYXR1cmVzPVtdO3RoaXMudW5yZW5kZXJlZEZlYXR1cmVzPXt9O3RoaXMuc2VsZWN0ZWRGZWF0dXJlcz0KW107YSYmdGhpcy5ldmVudHMudHJpZ2dlckV2ZW50KCJmZWF0dXJlc3JlbW92ZWQiLHtmZWF0dXJlczpifSl9LGRlc3Ryb3lGZWF0dXJlczpmdW5jdGlvbihhLGIpe3ZvaWQgMD09YSYmKGE9dGhpcy5mZWF0dXJlcyk7aWYoYSl7dGhpcy5yZW1vdmVGZWF0dXJlcyhhLGIpO2Zvcih2YXIgYz1hLmxlbmd0aC0xOzA8PWM7Yy0tKWFbY10uZGVzdHJveSgpfX0sZHJhd0ZlYXR1cmU6ZnVuY3Rpb24oYSxiKXtpZih0aGlzLmRyYXduKXtpZigib2JqZWN0IiE9dHlwZW9mIGIpe2J8fGEuc3RhdGUhPT1PcGVuTGF5ZXJzLlN0YXRlLkRFTEVURXx8KGI9ImRlbGV0ZSIpO3ZhciBjPWJ8fGEucmVuZGVySW50ZW50OyhiPWEuc3R5bGV8fHRoaXMuc3R5bGUpfHwoYj10aGlzLnN0eWxlTWFwLmNyZWF0ZVN5bWJvbGl6ZXIoYSxjKSl9Yz10aGlzLnJlbmRlcmVyLmRyYXdGZWF0dXJlKGEsYik7ITE9PT1jfHxudWxsPT09Yz90aGlzLnVucmVuZGVyZWRGZWF0dXJlc1thLmlkXT1hOmRlbGV0ZSB0aGlzLnVucmVuZGVyZWRGZWF0dXJlc1thLmlkXX19LAplcmFzZUZlYXR1cmVzOmZ1bmN0aW9uKGEpe3RoaXMucmVuZGVyZXIuZXJhc2VGZWF0dXJlcyhhKX0sZ2V0RmVhdHVyZUZyb21FdmVudDpmdW5jdGlvbihhKXtpZighdGhpcy5yZW5kZXJlcil0aHJvdyBFcnJvcigiZ2V0RmVhdHVyZUZyb21FdmVudCBjYWxsZWQgb24gbGF5ZXIgd2l0aCBubyByZW5kZXJlci4gVGhpcyB1c3VhbGx5IG1lYW5zIHlvdSBkZXN0cm95ZWQgYSBsYXllciwgYnV0IG5vdCBzb21lIGhhbmRsZXIgd2hpY2ggaXMgYXNzb2NpYXRlZCB3aXRoIGl0LiIpO3ZhciBiPW51bGw7KGE9dGhpcy5yZW5kZXJlci5nZXRGZWF0dXJlSWRGcm9tRXZlbnQoYSkpJiYoYj0ic3RyaW5nIj09PXR5cGVvZiBhP3RoaXMuZ2V0RmVhdHVyZUJ5SWQoYSk6YSk7cmV0dXJuIGJ9LGdldEZlYXR1cmVCeTpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz1udWxsLGQ9MCxlPXRoaXMuZmVhdHVyZXMubGVuZ3RoO2Q8ZTsrK2QpaWYodGhpcy5mZWF0dXJlc1tkXVthXT09Yil7Yz10aGlzLmZlYXR1cmVzW2RdOwpicmVha31yZXR1cm4gY30sZ2V0RmVhdHVyZUJ5SWQ6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZ2V0RmVhdHVyZUJ5KCJpZCIsYSl9LGdldEZlYXR1cmVCeUZpZDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5nZXRGZWF0dXJlQnkoImZpZCIsYSl9LGdldEZlYXR1cmVzQnlBdHRyaWJ1dGU6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGU9dGhpcy5mZWF0dXJlcy5sZW5ndGgsZj1bXTtmb3IoYz0wO2M8ZTtjKyspKGQ9dGhpcy5mZWF0dXJlc1tjXSkmJmQuYXR0cmlidXRlcyYmZC5hdHRyaWJ1dGVzW2FdPT09YiYmZi5wdXNoKGQpO3JldHVybiBmfSxvbkZlYXR1cmVJbnNlcnQ6ZnVuY3Rpb24oYSl7fSxwcmVGZWF0dXJlSW5zZXJ0OmZ1bmN0aW9uKGEpe30sZ2V0RGF0YUV4dGVudDpmdW5jdGlvbigpe3ZhciBhPW51bGwsYj10aGlzLmZlYXR1cmVzO2lmKGImJjA8Yi5sZW5ndGgpZm9yKHZhciBjPW51bGwsZD0wLGU9Yi5sZW5ndGg7ZDxlO2QrKylpZihjPWJbZF0uZ2VvbWV0cnkpbnVsbD09PWEmJgooYT1uZXcgT3BlbkxheWVycy5Cb3VuZHMpLGEuZXh0ZW5kKGMuZ2V0Qm91bmRzKCkpO3JldHVybiBhfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkxheWVyLlZlY3RvciJ9KTtPcGVuTGF5ZXJzLkxheWVyLlBvaW50R3JpZD1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuTGF5ZXIuVmVjdG9yLHtkeDpudWxsLGR5Om51bGwscmF0aW86MS41LG1heEZlYXR1cmVzOjI1MCxyb3RhdGlvbjowLG9yaWdpbjpudWxsLGdyaWRCb3VuZHM6bnVsbCxpbml0aWFsaXplOmZ1bmN0aW9uKGEpe2E9YXx8e307T3BlbkxheWVycy5MYXllci5WZWN0b3IucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxbYS5uYW1lLGFdKX0sc2V0TWFwOmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuTGF5ZXIuVmVjdG9yLnByb3RvdHlwZS5zZXRNYXAuYXBwbHkodGhpcyxhcmd1bWVudHMpO2EuZXZlbnRzLnJlZ2lzdGVyKCJtb3ZlZW5kIix0aGlzLHRoaXMub25Nb3ZlRW5kKX0scmVtb3ZlTWFwOmZ1bmN0aW9uKGEpe2EuZXZlbnRzLnVucmVnaXN0ZXIoIm1vdmVlbmQiLHRoaXMsdGhpcy5vbk1vdmVFbmQpO09wZW5MYXllcnMuTGF5ZXIuVmVjdG9yLnByb3RvdHlwZS5yZW1vdmVNYXAuYXBwbHkodGhpcywKYXJndW1lbnRzKX0sc2V0UmF0aW86ZnVuY3Rpb24oYSl7dGhpcy5yYXRpbz1hO3RoaXMudXBkYXRlR3JpZCghMCl9LHNldE1heEZlYXR1cmVzOmZ1bmN0aW9uKGEpe3RoaXMubWF4RmVhdHVyZXM9YTt0aGlzLnVwZGF0ZUdyaWQoITApfSxzZXRTcGFjaW5nOmZ1bmN0aW9uKGEsYil7dGhpcy5keD1hO3RoaXMuZHk9Ynx8YTt0aGlzLnVwZGF0ZUdyaWQoITApfSxzZXRPcmlnaW46ZnVuY3Rpb24oYSl7dGhpcy5vcmlnaW49YTt0aGlzLnVwZGF0ZUdyaWQoITApfSxnZXRPcmlnaW46ZnVuY3Rpb24oKXt0aGlzLm9yaWdpbnx8KHRoaXMub3JpZ2luPXRoaXMubWFwLmdldEV4dGVudCgpLmdldENlbnRlckxvbkxhdCgpKTtyZXR1cm4gdGhpcy5vcmlnaW59LHNldFJvdGF0aW9uOmZ1bmN0aW9uKGEpe3RoaXMucm90YXRpb249YTt0aGlzLnVwZGF0ZUdyaWQoITApfSxvbk1vdmVFbmQ6ZnVuY3Rpb24oKXt0aGlzLnVwZGF0ZUdyaWQoKX0sZ2V0Vmlld0JvdW5kczpmdW5jdGlvbigpe3ZhciBhPXRoaXMubWFwLmdldEV4dGVudCgpOwppZih0aGlzLnJvdGF0aW9uKXt2YXIgYj10aGlzLmdldE9yaWdpbigpLGI9bmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoYi5sb24sYi5sYXQpLGE9YS50b0dlb21ldHJ5KCk7YS5yb3RhdGUoLXRoaXMucm90YXRpb24sYik7YT1hLmdldEJvdW5kcygpfXJldHVybiBhfSx1cGRhdGVHcmlkOmZ1bmN0aW9uKGEpe2lmKGF8fHRoaXMuaW52YWxpZEJvdW5kcygpKXt2YXIgYj10aGlzLmdldFZpZXdCb3VuZHMoKSxjPXRoaXMuZ2V0T3JpZ2luKCk7YT1uZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludChjLmxvbixjLmxhdCk7dmFyIGQ9Yi5nZXRXaWR0aCgpLGU9Yi5nZXRIZWlnaHQoKSxmPWQvZSxnPU1hdGguc3FydCh0aGlzLmR4KnRoaXMuZHkqdGhpcy5tYXhGZWF0dXJlcy9mKSxkPU1hdGgubWluKGQqdGhpcy5yYXRpbyxnKmYpLGU9TWF0aC5taW4oZSp0aGlzLnJhdGlvLGcpLGI9Yi5nZXRDZW50ZXJMb25MYXQoKTt0aGlzLmdyaWRCb3VuZHM9bmV3IE9wZW5MYXllcnMuQm91bmRzKGIubG9uLQpkLzIsYi5sYXQtZS8yLGIubG9uK2QvMixiLmxhdCtlLzIpO2Zvcih2YXIgYj1NYXRoLmZsb29yKGUvdGhpcy5keSksZD1NYXRoLmZsb29yKGQvdGhpcy5keCksZT1jLmxvbit0aGlzLmR4Kk1hdGguY2VpbCgodGhpcy5ncmlkQm91bmRzLmxlZnQtYy5sb24pL3RoaXMuZHgpLGM9Yy5sYXQrdGhpcy5keSpNYXRoLmNlaWwoKHRoaXMuZ3JpZEJvdW5kcy5ib3R0b20tYy5sYXQpL3RoaXMuZHkpLGc9QXJyYXkoYipkKSxoLGs9MDtrPGQ7KytrKWZvcih2YXIgZj1lK2sqdGhpcy5keCxsPTA7bDxiOysrbCloPWMrbCp0aGlzLmR5LGg9bmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoZixoKSx0aGlzLnJvdGF0aW9uJiZoLnJvdGF0ZSh0aGlzLnJvdGF0aW9uLGEpLGdbaypiK2xdPW5ldyBPcGVuTGF5ZXJzLkZlYXR1cmUuVmVjdG9yKGgpO3RoaXMuZGVzdHJveUZlYXR1cmVzKHRoaXMuZmVhdHVyZXMse3NpbGVudDohMH0pO3RoaXMuYWRkRmVhdHVyZXMoZyx7c2lsZW50OiEwfSl9fSxpbnZhbGlkQm91bmRzOmZ1bmN0aW9uKCl7cmV0dXJuIXRoaXMuZ3JpZEJvdW5kc3x8CiF0aGlzLmdyaWRCb3VuZHMuY29udGFpbnNCb3VuZHModGhpcy5nZXRWaWV3Qm91bmRzKCkpfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkxheWVyLlBvaW50R3JpZCJ9KTtPcGVuTGF5ZXJzLkhhbmRsZXIuTW91c2VXaGVlbD1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuSGFuZGxlcix7d2hlZWxMaXN0ZW5lcjpudWxsLGludGVydmFsOjAsbWF4RGVsdGE6TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZLGRlbHRhOjAsY3VtdWxhdGl2ZTohMCxpbml0aWFsaXplOmZ1bmN0aW9uKGEsYixjKXtPcGVuTGF5ZXJzLkhhbmRsZXIucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMud2hlZWxMaXN0ZW5lcj1PcGVuTGF5ZXJzLkZ1bmN0aW9uLmJpbmRBc0V2ZW50TGlzdGVuZXIodGhpcy5vbldoZWVsRXZlbnQsdGhpcyl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXtPcGVuTGF5ZXJzLkhhbmRsZXIucHJvdG90eXBlLmRlc3Ryb3kuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMud2hlZWxMaXN0ZW5lcj1udWxsfSxvbldoZWVsRXZlbnQ6ZnVuY3Rpb24oYSl7aWYodGhpcy5tYXAmJnRoaXMuY2hlY2tNb2RpZmllcnMoYSkpe2Zvcih2YXIgYj0KITEsYz0hMSxkPSExLGU9T3BlbkxheWVycy5FdmVudC5lbGVtZW50KGEpO251bGwhPWUmJiFkJiYhYjspe2lmKCFiKXRyeXt2YXIgZixiPShmPWUuY3VycmVudFN0eWxlP2UuY3VycmVudFN0eWxlLm92ZXJmbG93OmRvY3VtZW50LmRlZmF1bHRWaWV3LmdldENvbXB1dGVkU3R5bGUoZSxudWxsKS5nZXRQcm9wZXJ0eVZhbHVlKCJvdmVyZmxvdyIpKSYmImF1dG8iPT1mfHwic2Nyb2xsIj09Zn1jYXRjaChnKXt9aWYoIWMmJihjPU9wZW5MYXllcnMuRWxlbWVudC5oYXNDbGFzcyhlLCJvbFNjcm9sbGFibGUiKSwhYykpZm9yKHZhciBkPTAsaD10aGlzLm1hcC5sYXllcnMubGVuZ3RoO2Q8aDtkKyspe3ZhciBrPXRoaXMubWFwLmxheWVyc1tkXTtpZihlPT1rLmRpdnx8ZT09ay5wYW5lKXtjPSEwO2JyZWFrfX1kPWU9PXRoaXMubWFwLmRpdjtlPWUucGFyZW50Tm9kZX1pZighYiYmZCl7aWYoYylpZihiPTAsYS53aGVlbERlbHRhPyhiPWEud2hlZWxEZWx0YSwwPT09YiUxNjAmJihiKj0wLjc1KSwKYi89MTIwKTphLmRldGFpbCYmKGI9LShhLmRldGFpbC9NYXRoLmFicyhhLmRldGFpbCkpKSx0aGlzLmRlbHRhKz1iLHdpbmRvdy5jbGVhclRpbWVvdXQodGhpcy5fdGltZW91dElkKSx0aGlzLmludGVydmFsJiZNYXRoLmFicyh0aGlzLmRlbHRhKTx0aGlzLm1heERlbHRhKXt2YXIgbD1PcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHt9LGEpO3RoaXMuX3RpbWVvdXRJZD13aW5kb3cuc2V0VGltZW91dChPcGVuTGF5ZXJzLkZ1bmN0aW9uLmJpbmQoZnVuY3Rpb24oKXt0aGlzLndoZWVsWm9vbShsKX0sdGhpcyksdGhpcy5pbnRlcnZhbCl9ZWxzZSB0aGlzLndoZWVsWm9vbShhKTtPcGVuTGF5ZXJzLkV2ZW50LnN0b3AoYSl9fX0sd2hlZWxab29tOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZGVsdGE7dGhpcy5kZWx0YT0wO2ImJihhLnh5PXRoaXMubWFwLmV2ZW50cy5nZXRNb3VzZVBvc2l0aW9uKGEpLDA+Yj90aGlzLmNhbGxiYWNrKCJkb3duIixbYSx0aGlzLmN1bXVsYXRpdmU/TWF0aC5tYXgoLXRoaXMubWF4RGVsdGEsCmIpOi0xXSk6dGhpcy5jYWxsYmFjaygidXAiLFthLHRoaXMuY3VtdWxhdGl2ZT9NYXRoLm1pbih0aGlzLm1heERlbHRhLGIpOjFdKSl9LGFjdGl2YXRlOmZ1bmN0aW9uKGEpe2lmKE9wZW5MYXllcnMuSGFuZGxlci5wcm90b3R5cGUuYWN0aXZhdGUuYXBwbHkodGhpcyxhcmd1bWVudHMpKXt2YXIgYj10aGlzLndoZWVsTGlzdGVuZXI7T3BlbkxheWVycy5FdmVudC5vYnNlcnZlKHdpbmRvdywiRE9NTW91c2VTY3JvbGwiLGIpO09wZW5MYXllcnMuRXZlbnQub2JzZXJ2ZSh3aW5kb3csIm1vdXNld2hlZWwiLGIpO09wZW5MYXllcnMuRXZlbnQub2JzZXJ2ZShkb2N1bWVudCwibW91c2V3aGVlbCIsYik7cmV0dXJuITB9cmV0dXJuITF9LGRlYWN0aXZhdGU6ZnVuY3Rpb24oYSl7aWYoT3BlbkxheWVycy5IYW5kbGVyLnByb3RvdHlwZS5kZWFjdGl2YXRlLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl7dmFyIGI9dGhpcy53aGVlbExpc3RlbmVyO09wZW5MYXllcnMuRXZlbnQuc3RvcE9ic2VydmluZyh3aW5kb3csCiJET01Nb3VzZVNjcm9sbCIsYik7T3BlbkxheWVycy5FdmVudC5zdG9wT2JzZXJ2aW5nKHdpbmRvdywibW91c2V3aGVlbCIsYik7T3BlbkxheWVycy5FdmVudC5zdG9wT2JzZXJ2aW5nKGRvY3VtZW50LCJtb3VzZXdoZWVsIixiKTtyZXR1cm4hMH1yZXR1cm4hMX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5IYW5kbGVyLk1vdXNlV2hlZWwifSk7T3BlbkxheWVycy5TeW1ib2xpemVyPU9wZW5MYXllcnMuQ2xhc3Moe3pJbmRleDowLGluaXRpYWxpemU6ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5VdGlsLmV4dGVuZCh0aGlzLGEpfSxjbG9uZTpmdW5jdGlvbigpe3JldHVybiBuZXcgKGV2YWwodGhpcy5DTEFTU19OQU1FKSkoT3BlbkxheWVycy5VdGlsLmV4dGVuZCh7fSx0aGlzKSl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuU3ltYm9saXplciJ9KTtPcGVuTGF5ZXJzLlN5bWJvbGl6ZXIuUmFzdGVyPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5TeW1ib2xpemVyLHtpbml0aWFsaXplOmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuU3ltYm9saXplci5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuU3ltYm9saXplci5SYXN0ZXIifSk7T3BlbkxheWVycy5SdWxlPU9wZW5MYXllcnMuQ2xhc3Moe2lkOm51bGwsbmFtZTpudWxsLHRpdGxlOm51bGwsZGVzY3JpcHRpb246bnVsbCxjb250ZXh0Om51bGwsZmlsdGVyOm51bGwsZWxzZUZpbHRlcjohMSxzeW1ib2xpemVyOm51bGwsc3ltYm9saXplcnM6bnVsbCxtaW5TY2FsZURlbm9taW5hdG9yOm51bGwsbWF4U2NhbGVEZW5vbWluYXRvcjpudWxsLGluaXRpYWxpemU6ZnVuY3Rpb24oYSl7dGhpcy5zeW1ib2xpemVyPXt9O09wZW5MYXllcnMuVXRpbC5leHRlbmQodGhpcyxhKTt0aGlzLnN5bWJvbGl6ZXJzJiZkZWxldGUgdGhpcy5zeW1ib2xpemVyO3RoaXMuaWQ9T3BlbkxheWVycy5VdGlsLmNyZWF0ZVVuaXF1ZUlEKHRoaXMuQ0xBU1NfTkFNRSsiXyIpfSxkZXN0cm95OmZ1bmN0aW9uKCl7Zm9yKHZhciBhIGluIHRoaXMuc3ltYm9saXplcil0aGlzLnN5bWJvbGl6ZXJbYV09bnVsbDt0aGlzLnN5bWJvbGl6ZXI9bnVsbDtkZWxldGUgdGhpcy5zeW1ib2xpemVyc30sZXZhbHVhdGU6ZnVuY3Rpb24oYSl7dmFyIGI9CnRoaXMuZ2V0Q29udGV4dChhKSxjPSEwO2lmKHRoaXMubWluU2NhbGVEZW5vbWluYXRvcnx8dGhpcy5tYXhTY2FsZURlbm9taW5hdG9yKXZhciBkPWEubGF5ZXIubWFwLmdldFNjYWxlKCk7dGhpcy5taW5TY2FsZURlbm9taW5hdG9yJiYoYz1kPj1PcGVuTGF5ZXJzLlN0eWxlLmNyZWF0ZUxpdGVyYWwodGhpcy5taW5TY2FsZURlbm9taW5hdG9yLGIpKTtjJiZ0aGlzLm1heFNjYWxlRGVub21pbmF0b3ImJihjPWQ8T3BlbkxheWVycy5TdHlsZS5jcmVhdGVMaXRlcmFsKHRoaXMubWF4U2NhbGVEZW5vbWluYXRvcixiKSk7YyYmdGhpcy5maWx0ZXImJihjPSJPcGVuTGF5ZXJzLkZpbHRlci5GZWF0dXJlSWQiPT10aGlzLmZpbHRlci5DTEFTU19OQU1FP3RoaXMuZmlsdGVyLmV2YWx1YXRlKGEpOnRoaXMuZmlsdGVyLmV2YWx1YXRlKGIpKTtyZXR1cm4gY30sZ2V0Q29udGV4dDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNvbnRleHQ7Ynx8KGI9YS5hdHRyaWJ1dGVzfHxhLmRhdGEpOyJmdW5jdGlvbiI9PQp0eXBlb2YgdGhpcy5jb250ZXh0JiYoYj10aGlzLmNvbnRleHQoYSkpO3JldHVybiBifSxjbG9uZTpmdW5jdGlvbigpe3ZhciBhPU9wZW5MYXllcnMuVXRpbC5leHRlbmQoe30sdGhpcyk7aWYodGhpcy5zeW1ib2xpemVycyl7dmFyIGI9dGhpcy5zeW1ib2xpemVycy5sZW5ndGg7YS5zeW1ib2xpemVycz1BcnJheShiKTtmb3IodmFyIGM9MDtjPGI7KytjKWEuc3ltYm9saXplcnNbY109dGhpcy5zeW1ib2xpemVyc1tjXS5jbG9uZSgpfWVsc2V7YS5zeW1ib2xpemVyPXt9O2Zvcih2YXIgZCBpbiB0aGlzLnN5bWJvbGl6ZXIpYj10aGlzLnN5bWJvbGl6ZXJbZF0sYz10eXBlb2YgYiwib2JqZWN0Ij09PWM/YS5zeW1ib2xpemVyW2RdPU9wZW5MYXllcnMuVXRpbC5leHRlbmQoe30sYik6InN0cmluZyI9PT1jJiYoYS5zeW1ib2xpemVyW2RdPWIpfWEuZmlsdGVyPXRoaXMuZmlsdGVyJiZ0aGlzLmZpbHRlci5jbG9uZSgpO2EuY29udGV4dD10aGlzLmNvbnRleHQmJk9wZW5MYXllcnMuVXRpbC5leHRlbmQoe30sCnRoaXMuY29udGV4dCk7cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLlJ1bGUoYSl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuUnVsZSJ9KTtPcGVuTGF5ZXJzLkZvcm1hdC5TTEQ9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkZvcm1hdC5YTUwuVmVyc2lvbmVkT0dDLHtwcm9maWxlOm51bGwsZGVmYXVsdFZlcnNpb246IjEuMC4wIixzdHJpbmdpZnlPdXRwdXQ6ITAsbmFtZWRMYXllcnNBc0FycmF5OiExLENMQVNTX05BTUU6Ik9wZW5MYXllcnMuRm9ybWF0LlNMRCJ9KTtPcGVuTGF5ZXJzLlN5bWJvbGl6ZXIuUG9seWdvbj1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuU3ltYm9saXplcix7aW5pdGlhbGl6ZTpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLlN5bWJvbGl6ZXIucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLlN5bWJvbGl6ZXIuUG9seWdvbiJ9KTtPcGVuTGF5ZXJzLkZvcm1hdC5HTUwudjI9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkZvcm1hdC5HTUwuQmFzZSx7c2NoZW1hTG9jYXRpb246Imh0dHA6Ly93d3cub3Blbmdpcy5uZXQvZ21sIGh0dHA6Ly9zY2hlbWFzLm9wZW5naXMubmV0L2dtbC8yLjEuMi9mZWF0dXJlLnhzZCIsaW5pdGlhbGl6ZTpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLkZvcm1hdC5HTUwuQmFzZS5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLFthXSl9LHJlYWRlcnM6e2dtbDpPcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyh7b3V0ZXJCb3VuZGFyeUlzOmZ1bmN0aW9uKGEsYil7dmFyIGM9e307dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGMpO2Iub3V0ZXI9Yy5jb21wb25lbnRzWzBdfSxpbm5lckJvdW5kYXJ5SXM6ZnVuY3Rpb24oYSxiKXt2YXIgYz17fTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYyk7Yi5pbm5lci5wdXNoKGMuY29tcG9uZW50c1swXSl9LEJveDpmdW5jdGlvbihhLGIpe3ZhciBjPQp7fTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYyk7Yi5jb21wb25lbnRzfHwoYi5jb21wb25lbnRzPVtdKTt2YXIgZD1jLnBvaW50c1swXSxjPWMucG9pbnRzWzFdO2IuY29tcG9uZW50cy5wdXNoKG5ldyBPcGVuTGF5ZXJzLkJvdW5kcyhkLngsZC55LGMueCxjLnkpKX19LE9wZW5MYXllcnMuRm9ybWF0LkdNTC5CYXNlLnByb3RvdHlwZS5yZWFkZXJzLmdtbCksZmVhdHVyZTpPcGVuTGF5ZXJzLkZvcm1hdC5HTUwuQmFzZS5wcm90b3R5cGUucmVhZGVycy5mZWF0dXJlLHdmczpPcGVuTGF5ZXJzLkZvcm1hdC5HTUwuQmFzZS5wcm90b3R5cGUucmVhZGVycy53ZnN9LHdyaXRlOmZ1bmN0aW9uKGEpe3ZhciBiO2I9T3BlbkxheWVycy5VdGlsLmlzQXJyYXkoYSk/IndmczpGZWF0dXJlQ29sbGVjdGlvbiI6ImdtbDpmZWF0dXJlTWVtYmVyIjthPXRoaXMud3JpdGVOb2RlKGIsYSk7dGhpcy5zZXRBdHRyaWJ1dGVOUyhhLHRoaXMubmFtZXNwYWNlcy54c2ksInhzaTpzY2hlbWFMb2NhdGlvbiIsdGhpcy5zY2hlbWFMb2NhdGlvbik7CnJldHVybiBPcGVuTGF5ZXJzLkZvcm1hdC5YTUwucHJvdG90eXBlLndyaXRlLmFwcGx5KHRoaXMsW2FdKX0sd3JpdGVyczp7Z21sOk9wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKHtQb2ludDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoImdtbDpQb2ludCIpO3RoaXMud3JpdGVOb2RlKCJjb29yZGluYXRlcyIsW2FdLGIpO3JldHVybiBifSxjb29yZGluYXRlczpmdW5jdGlvbihhKXtmb3IodmFyIGI9YS5sZW5ndGgsYz1BcnJheShiKSxkLGU9MDtlPGI7KytlKWQ9YVtlXSxjW2VdPXRoaXMueHk/ZC54KyIsIitkLnk6ZC55KyIsIitkLngsdm9pZCAwIT1kLnomJihjW2VdKz0iLCIrZC56KTtyZXR1cm4gdGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJnbWw6Y29vcmRpbmF0ZXMiLHthdHRyaWJ1dGVzOntkZWNpbWFsOiIuIixjczoiLCIsdHM6IiAifSx2YWx1ZToxPT1iP2NbMF06Yy5qb2luKCIgIil9KX0sTGluZVN0cmluZzpmdW5jdGlvbihhKXt2YXIgYj0KdGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJnbWw6TGluZVN0cmluZyIpO3RoaXMud3JpdGVOb2RlKCJjb29yZGluYXRlcyIsYS5jb21wb25lbnRzLGIpO3JldHVybiBifSxQb2x5Z29uOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygiZ21sOlBvbHlnb24iKTt0aGlzLndyaXRlTm9kZSgib3V0ZXJCb3VuZGFyeUlzIixhLmNvbXBvbmVudHNbMF0sYik7Zm9yKHZhciBjPTE7YzxhLmNvbXBvbmVudHMubGVuZ3RoOysrYyl0aGlzLndyaXRlTm9kZSgiaW5uZXJCb3VuZGFyeUlzIixhLmNvbXBvbmVudHNbY10sYik7cmV0dXJuIGJ9LG91dGVyQm91bmRhcnlJczpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoImdtbDpvdXRlckJvdW5kYXJ5SXMiKTt0aGlzLndyaXRlTm9kZSgiTGluZWFyUmluZyIsYSxiKTtyZXR1cm4gYn0saW5uZXJCb3VuZGFyeUlzOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygiZ21sOmlubmVyQm91bmRhcnlJcyIpOwp0aGlzLndyaXRlTm9kZSgiTGluZWFyUmluZyIsYSxiKTtyZXR1cm4gYn0sTGluZWFyUmluZzpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoImdtbDpMaW5lYXJSaW5nIik7dGhpcy53cml0ZU5vZGUoImNvb3JkaW5hdGVzIixhLmNvbXBvbmVudHMsYik7cmV0dXJuIGJ9LEJveDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoImdtbDpCb3giKTt0aGlzLndyaXRlTm9kZSgiY29vcmRpbmF0ZXMiLFt7eDphLmxlZnQseTphLmJvdHRvbX0se3g6YS5yaWdodCx5OmEudG9wfV0sYik7dGhpcy5zcnNOYW1lJiZiLnNldEF0dHJpYnV0ZSgic3JzTmFtZSIsdGhpcy5zcnNOYW1lKTtyZXR1cm4gYn19LE9wZW5MYXllcnMuRm9ybWF0LkdNTC5CYXNlLnByb3RvdHlwZS53cml0ZXJzLmdtbCksZmVhdHVyZTpPcGVuTGF5ZXJzLkZvcm1hdC5HTUwuQmFzZS5wcm90b3R5cGUud3JpdGVycy5mZWF0dXJlLHdmczpPcGVuTGF5ZXJzLkZvcm1hdC5HTUwuQmFzZS5wcm90b3R5cGUud3JpdGVycy53ZnN9LApDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkZvcm1hdC5HTUwudjIifSk7T3BlbkxheWVycy5Gb3JtYXQuRmlsdGVyLnYxXzBfMD1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuRm9ybWF0LkdNTC52MixPcGVuTGF5ZXJzLkZvcm1hdC5GaWx0ZXIudjEse1ZFUlNJT046IjEuMC4wIixzY2hlbWFMb2NhdGlvbjoiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9vZ2MvZmlsdGVyLzEuMC4wL2ZpbHRlci54c2QiLGluaXRpYWxpemU6ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5Gb3JtYXQuR01MLnYyLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsW2FdKX0scmVhZGVyczp7b2djOk9wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKHtQcm9wZXJ0eUlzRXF1YWxUbzpmdW5jdGlvbihhLGIpe3ZhciBjPW5ldyBPcGVuTGF5ZXJzLkZpbHRlci5Db21wYXJpc29uKHt0eXBlOk9wZW5MYXllcnMuRmlsdGVyLkNvbXBhcmlzb24uRVFVQUxfVE99KTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYyk7Yi5maWx0ZXJzLnB1c2goYyl9LFByb3BlcnR5SXNOb3RFcXVhbFRvOmZ1bmN0aW9uKGEsCmIpe3ZhciBjPW5ldyBPcGVuTGF5ZXJzLkZpbHRlci5Db21wYXJpc29uKHt0eXBlOk9wZW5MYXllcnMuRmlsdGVyLkNvbXBhcmlzb24uTk9UX0VRVUFMX1RPfSk7dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGMpO2IuZmlsdGVycy5wdXNoKGMpfSxQcm9wZXJ0eUlzTGlrZTpmdW5jdGlvbihhLGIpe3ZhciBjPW5ldyBPcGVuTGF5ZXJzLkZpbHRlci5Db21wYXJpc29uKHt0eXBlOk9wZW5MYXllcnMuRmlsdGVyLkNvbXBhcmlzb24uTElLRX0pO3RoaXMucmVhZENoaWxkTm9kZXMoYSxjKTt2YXIgZD1hLmdldEF0dHJpYnV0ZSgid2lsZENhcmQiKSxlPWEuZ2V0QXR0cmlidXRlKCJzaW5nbGVDaGFyIiksZj1hLmdldEF0dHJpYnV0ZSgiZXNjYXBlIik7Yy52YWx1ZTJyZWdleChkLGUsZik7Yi5maWx0ZXJzLnB1c2goYyl9fSxPcGVuTGF5ZXJzLkZvcm1hdC5GaWx0ZXIudjEucHJvdG90eXBlLnJlYWRlcnMub2djKSxnbWw6T3BlbkxheWVycy5Gb3JtYXQuR01MLnYyLnByb3RvdHlwZS5yZWFkZXJzLmdtbCwKZmVhdHVyZTpPcGVuTGF5ZXJzLkZvcm1hdC5HTUwudjIucHJvdG90eXBlLnJlYWRlcnMuZmVhdHVyZX0sd3JpdGVyczp7b2djOk9wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKHtQcm9wZXJ0eUlzRXF1YWxUbzpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoIm9nYzpQcm9wZXJ0eUlzRXF1YWxUbyIpO3RoaXMud3JpdGVOb2RlKCJQcm9wZXJ0eU5hbWUiLGEsYik7dGhpcy53cml0ZU9nY0V4cHJlc3Npb24oYS52YWx1ZSxiKTtyZXR1cm4gYn0sUHJvcGVydHlJc05vdEVxdWFsVG86ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJvZ2M6UHJvcGVydHlJc05vdEVxdWFsVG8iKTt0aGlzLndyaXRlTm9kZSgiUHJvcGVydHlOYW1lIixhLGIpO3RoaXMud3JpdGVPZ2NFeHByZXNzaW9uKGEudmFsdWUsYik7cmV0dXJuIGJ9LFByb3BlcnR5SXNMaWtlOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygib2djOlByb3BlcnR5SXNMaWtlIiwKe2F0dHJpYnV0ZXM6e3dpbGRDYXJkOiIqIixzaW5nbGVDaGFyOiIuIixlc2NhcGU6IiEifX0pO3RoaXMud3JpdGVOb2RlKCJQcm9wZXJ0eU5hbWUiLGEsYik7dGhpcy53cml0ZU5vZGUoIkxpdGVyYWwiLGEucmVnZXgydmFsdWUoKSxiKTtyZXR1cm4gYn0sQkJPWDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoIm9nYzpCQk9YIik7YS5wcm9wZXJ0eSYmdGhpcy53cml0ZU5vZGUoIlByb3BlcnR5TmFtZSIsYSxiKTt2YXIgYz10aGlzLndyaXRlTm9kZSgiZ21sOkJveCIsYS52YWx1ZSxiKTthLnByb2plY3Rpb24mJmMuc2V0QXR0cmlidXRlKCJzcnNOYW1lIixhLnByb2plY3Rpb24pO3JldHVybiBifX0sT3BlbkxheWVycy5Gb3JtYXQuRmlsdGVyLnYxLnByb3RvdHlwZS53cml0ZXJzLm9nYyksZ21sOk9wZW5MYXllcnMuRm9ybWF0LkdNTC52Mi5wcm90b3R5cGUud3JpdGVycy5nbWwsZmVhdHVyZTpPcGVuTGF5ZXJzLkZvcm1hdC5HTUwudjIucHJvdG90eXBlLndyaXRlcnMuZmVhdHVyZX0sCndyaXRlU3BhdGlhbDpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygib2djOiIrYik7dGhpcy53cml0ZU5vZGUoIlByb3BlcnR5TmFtZSIsYSxjKTtpZihhLnZhbHVlIGluc3RhbmNlb2YgT3BlbkxheWVycy5GaWx0ZXIuRnVuY3Rpb24pdGhpcy53cml0ZU5vZGUoIkZ1bmN0aW9uIixhLnZhbHVlLGMpO2Vsc2V7dmFyIGQ7ZD1hLnZhbHVlIGluc3RhbmNlb2YgT3BlbkxheWVycy5HZW9tZXRyeT90aGlzLndyaXRlTm9kZSgiZmVhdHVyZTpfZ2VvbWV0cnkiLGEudmFsdWUpLmZpcnN0Q2hpbGQ6dGhpcy53cml0ZU5vZGUoImdtbDpCb3giLGEudmFsdWUpO2EucHJvamVjdGlvbiYmZC5zZXRBdHRyaWJ1dGUoInNyc05hbWUiLGEucHJvamVjdGlvbik7Yy5hcHBlbmRDaGlsZChkKX1yZXR1cm4gY30sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Gb3JtYXQuRmlsdGVyLnYxXzBfMCJ9KTtPcGVuTGF5ZXJzLkZvcm1hdC5XRlNULnYxXzBfMD1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuRm9ybWF0LkZpbHRlci52MV8wXzAsT3BlbkxheWVycy5Gb3JtYXQuV0ZTVC52MSx7dmVyc2lvbjoiMS4wLjAiLHNyc05hbWVJblF1ZXJ5OiExLHNjaGVtYUxvY2F0aW9uczp7d2ZzOiJodHRwOi8vc2NoZW1hcy5vcGVuZ2lzLm5ldC93ZnMvMS4wLjAvV0ZTLXRyYW5zYWN0aW9uLnhzZCJ9LGluaXRpYWxpemU6ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5Gb3JtYXQuRmlsdGVyLnYxXzBfMC5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLFthXSk7T3BlbkxheWVycy5Gb3JtYXQuV0ZTVC52MS5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLFthXSl9LHJlYWROb2RlOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gT3BlbkxheWVycy5Gb3JtYXQuR01MLnYyLnByb3RvdHlwZS5yZWFkTm9kZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LHJlYWRlcnM6e3dmczpPcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyh7V0ZTX1RyYW5zYWN0aW9uUmVzcG9uc2U6ZnVuY3Rpb24oYSwKYil7Yi5pbnNlcnRJZHM9W107Yi5zdWNjZXNzPSExO3RoaXMucmVhZENoaWxkTm9kZXMoYSxiKX0sSW5zZXJ0UmVzdWx0OmZ1bmN0aW9uKGEsYil7dmFyIGM9e2ZpZHM6W119O3RoaXMucmVhZENoaWxkTm9kZXMoYSxjKTtiLmluc2VydElkcz1iLmluc2VydElkcy5jb25jYXQoYy5maWRzKX0sVHJhbnNhY3Rpb25SZXN1bHQ6ZnVuY3Rpb24oYSxiKXt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYil9LFN0YXR1czpmdW5jdGlvbihhLGIpe3RoaXMucmVhZENoaWxkTm9kZXMoYSxiKX0sU1VDQ0VTUzpmdW5jdGlvbihhLGIpe2Iuc3VjY2Vzcz0hMH19LE9wZW5MYXllcnMuRm9ybWF0LldGU1QudjEucHJvdG90eXBlLnJlYWRlcnMud2ZzKSxnbWw6T3BlbkxheWVycy5Gb3JtYXQuR01MLnYyLnByb3RvdHlwZS5yZWFkZXJzLmdtbCxmZWF0dXJlOk9wZW5MYXllcnMuRm9ybWF0LkdNTC52Mi5wcm90b3R5cGUucmVhZGVycy5mZWF0dXJlLG9nYzpPcGVuTGF5ZXJzLkZvcm1hdC5GaWx0ZXIudjFfMF8wLnByb3RvdHlwZS5yZWFkZXJzLm9nY30sCndyaXRlcnM6e3dmczpPcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyh7UXVlcnk6ZnVuY3Rpb24oYSl7YT1PcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHtmZWF0dXJlTlM6dGhpcy5mZWF0dXJlTlMsZmVhdHVyZVByZWZpeDp0aGlzLmZlYXR1cmVQcmVmaXgsZmVhdHVyZVR5cGU6dGhpcy5mZWF0dXJlVHlwZSxzcnNOYW1lOnRoaXMuc3JzTmFtZSxzcnNOYW1lSW5RdWVyeTp0aGlzLnNyc05hbWVJblF1ZXJ5fSxhKTt2YXIgYj1hLmZlYXR1cmVQcmVmaXgsYz10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoIndmczpRdWVyeSIse2F0dHJpYnV0ZXM6e3R5cGVOYW1lOihiP2IrIjoiOiIiKSthLmZlYXR1cmVUeXBlfX0pO2Euc3JzTmFtZUluUXVlcnkmJmEuc3JzTmFtZSYmYy5zZXRBdHRyaWJ1dGUoInNyc05hbWUiLGEuc3JzTmFtZSk7YS5mZWF0dXJlTlMmJmMuc2V0QXR0cmlidXRlKCJ4bWxuczoiK2IsYS5mZWF0dXJlTlMpO2lmKGEucHJvcGVydHlOYW1lcylmb3IodmFyIGI9MCxkPWEucHJvcGVydHlOYW1lcy5sZW5ndGg7YjwKZDtiKyspdGhpcy53cml0ZU5vZGUoIm9nYzpQcm9wZXJ0eU5hbWUiLHtwcm9wZXJ0eTphLnByb3BlcnR5TmFtZXNbYl19LGMpO2EuZmlsdGVyJiYodGhpcy5zZXRGaWx0ZXJQcm9wZXJ0eShhLmZpbHRlciksdGhpcy53cml0ZU5vZGUoIm9nYzpGaWx0ZXIiLGEuZmlsdGVyLGMpKTtyZXR1cm4gY319LE9wZW5MYXllcnMuRm9ybWF0LldGU1QudjEucHJvdG90eXBlLndyaXRlcnMud2ZzKSxnbWw6T3BlbkxheWVycy5Gb3JtYXQuR01MLnYyLnByb3RvdHlwZS53cml0ZXJzLmdtbCxmZWF0dXJlOk9wZW5MYXllcnMuRm9ybWF0LkdNTC52Mi5wcm90b3R5cGUud3JpdGVycy5mZWF0dXJlLG9nYzpPcGVuTGF5ZXJzLkZvcm1hdC5GaWx0ZXIudjFfMF8wLnByb3RvdHlwZS53cml0ZXJzLm9nY30sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Gb3JtYXQuV0ZTVC52MV8wXzAifSk7T3BlbkxheWVycy5FbGVtZW50c0luZGV4ZXI9T3BlbkxheWVycy5DbGFzcyh7bWF4WkluZGV4Om51bGwsb3JkZXI6bnVsbCxpbmRpY2VzOm51bGwsY29tcGFyZTpudWxsLGluaXRpYWxpemU6ZnVuY3Rpb24oYSl7dGhpcy5jb21wYXJlPWE/T3BlbkxheWVycy5FbGVtZW50c0luZGV4ZXIuSW5kZXhpbmdNZXRob2RzLlpfT1JERVJfWV9PUkRFUjpPcGVuTGF5ZXJzLkVsZW1lbnRzSW5kZXhlci5JbmRleGluZ01ldGhvZHMuWl9PUkRFUl9EUkFXSU5HX09SREVSO3RoaXMuY2xlYXIoKX0saW5zZXJ0OmZ1bmN0aW9uKGEpe3RoaXMuZXhpc3RzKGEpJiZ0aGlzLnJlbW92ZShhKTt2YXIgYj1hLmlkO3RoaXMuZGV0ZXJtaW5lWkluZGV4KGEpO2Zvcih2YXIgYz0tMSxkPXRoaXMub3JkZXIubGVuZ3RoLGU7MTxkLWM7KWU9cGFyc2VJbnQoKGMrZCkvMiksMDx0aGlzLmNvbXBhcmUodGhpcyxhLE9wZW5MYXllcnMuVXRpbC5nZXRFbGVtZW50KHRoaXMub3JkZXJbZV0pKT9jPWU6ZD1lO3RoaXMub3JkZXIuc3BsaWNlKGQsCjAsYik7dGhpcy5pbmRpY2VzW2JdPXRoaXMuZ2V0WkluZGV4KGEpO3JldHVybiB0aGlzLmdldE5leHRFbGVtZW50KGQpfSxyZW1vdmU6ZnVuY3Rpb24oYSl7YT1hLmlkO3ZhciBiPU9wZW5MYXllcnMuVXRpbC5pbmRleE9mKHRoaXMub3JkZXIsYSk7MDw9YiYmKHRoaXMub3JkZXIuc3BsaWNlKGIsMSksZGVsZXRlIHRoaXMuaW5kaWNlc1thXSx0aGlzLm1heFpJbmRleD0wPHRoaXMub3JkZXIubGVuZ3RoP3RoaXMuaW5kaWNlc1t0aGlzLm9yZGVyW3RoaXMub3JkZXIubGVuZ3RoLTFdXTowKX0sY2xlYXI6ZnVuY3Rpb24oKXt0aGlzLm9yZGVyPVtdO3RoaXMuaW5kaWNlcz17fTt0aGlzLm1heFpJbmRleD0wfSxleGlzdHM6ZnVuY3Rpb24oYSl7cmV0dXJuIG51bGwhPXRoaXMuaW5kaWNlc1thLmlkXX0sZ2V0WkluZGV4OmZ1bmN0aW9uKGEpe3JldHVybiBhLl9zdHlsZS5ncmFwaGljWkluZGV4fSxkZXRlcm1pbmVaSW5kZXg6ZnVuY3Rpb24oYSl7dmFyIGI9YS5fc3R5bGUuZ3JhcGhpY1pJbmRleDsKbnVsbD09Yj8oYj10aGlzLm1heFpJbmRleCxhLl9zdHlsZS5ncmFwaGljWkluZGV4PWIpOmI+dGhpcy5tYXhaSW5kZXgmJih0aGlzLm1heFpJbmRleD1iKX0sZ2V0TmV4dEVsZW1lbnQ6ZnVuY3Rpb24oYSl7YSs9MTtpZihhPHRoaXMub3JkZXIubGVuZ3RoKXt2YXIgYj1PcGVuTGF5ZXJzLlV0aWwuZ2V0RWxlbWVudCh0aGlzLm9yZGVyW2FdKTt2b2lkIDA9PWImJihiPXRoaXMuZ2V0TmV4dEVsZW1lbnQoYSkpO3JldHVybiBifXJldHVybiBudWxsfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkVsZW1lbnRzSW5kZXhlciJ9KTsKT3BlbkxheWVycy5FbGVtZW50c0luZGV4ZXIuSW5kZXhpbmdNZXRob2RzPXtaX09SREVSOmZ1bmN0aW9uKGEsYixjKXtiPWEuZ2V0WkluZGV4KGIpO3ZhciBkPTA7YyYmKGE9YS5nZXRaSW5kZXgoYyksZD1iLWEpO3JldHVybiBkfSxaX09SREVSX0RSQVdJTkdfT1JERVI6ZnVuY3Rpb24oYSxiLGMpe2E9T3BlbkxheWVycy5FbGVtZW50c0luZGV4ZXIuSW5kZXhpbmdNZXRob2RzLlpfT1JERVIoYSxiLGMpO2MmJjA9PWEmJihhPTEpO3JldHVybiBhfSxaX09SREVSX1lfT1JERVI6ZnVuY3Rpb24oYSxiLGMpe2E9T3BlbkxheWVycy5FbGVtZW50c0luZGV4ZXIuSW5kZXhpbmdNZXRob2RzLlpfT1JERVIoYSxiLGMpO2MmJjA9PT1hJiYoYj1jLl9ib3VuZHNCb3R0b20tYi5fYm91bmRzQm90dG9tLGE9MD09PWI/MTpiKTtyZXR1cm4gYX19OwpPcGVuTGF5ZXJzLlJlbmRlcmVyLkVsZW1lbnRzPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5SZW5kZXJlcix7cmVuZGVyZXJSb290Om51bGwscm9vdDpudWxsLHZlY3RvclJvb3Q6bnVsbCx0ZXh0Um9vdDpudWxsLHhtbG5zOm51bGwseE9mZnNldDowLGluZGV4ZXI6bnVsbCxCQUNLR1JPVU5EX0lEX1NVRkZJWDoiX2JhY2tncm91bmQiLExBQkVMX0lEX1NVRkZJWDoiX2xhYmVsIixMQUJFTF9PVVRMSU5FX1NVRkZJWDoiX291dGxpbmUiLGluaXRpYWxpemU6ZnVuY3Rpb24oYSxiKXtPcGVuTGF5ZXJzLlJlbmRlcmVyLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLnJlbmRlcmVyUm9vdD10aGlzLmNyZWF0ZVJlbmRlclJvb3QoKTt0aGlzLnJvb3Q9dGhpcy5jcmVhdGVSb290KCJfcm9vdCIpO3RoaXMudmVjdG9yUm9vdD10aGlzLmNyZWF0ZVJvb3QoIl92cm9vdCIpO3RoaXMudGV4dFJvb3Q9dGhpcy5jcmVhdGVSb290KCJfdHJvb3QiKTt0aGlzLnJvb3QuYXBwZW5kQ2hpbGQodGhpcy52ZWN0b3JSb290KTsKdGhpcy5yb290LmFwcGVuZENoaWxkKHRoaXMudGV4dFJvb3QpO3RoaXMucmVuZGVyZXJSb290LmFwcGVuZENoaWxkKHRoaXMucm9vdCk7dGhpcy5jb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5yZW5kZXJlclJvb3QpO2ImJihiLnpJbmRleGluZ3x8Yi55T3JkZXJpbmcpJiYodGhpcy5pbmRleGVyPW5ldyBPcGVuTGF5ZXJzLkVsZW1lbnRzSW5kZXhlcihiLnlPcmRlcmluZykpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5jbGVhcigpO3RoaXMueG1sbnM9dGhpcy5yb290PXRoaXMucmVuZGVyZXJSb290PW51bGw7T3BlbkxheWVycy5SZW5kZXJlci5wcm90b3R5cGUuZGVzdHJveS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGNsZWFyOmZ1bmN0aW9uKCl7dmFyIGEsYj10aGlzLnZlY3RvclJvb3Q7aWYoYilmb3IoO2E9Yi5maXJzdENoaWxkOyliLnJlbW92ZUNoaWxkKGEpO2lmKGI9dGhpcy50ZXh0Um9vdClmb3IoO2E9Yi5maXJzdENoaWxkOyliLnJlbW92ZUNoaWxkKGEpO3RoaXMuaW5kZXhlciYmCnRoaXMuaW5kZXhlci5jbGVhcigpfSxzZXRFeHRlbnQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz1PcGVuTGF5ZXJzLlJlbmRlcmVyLnByb3RvdHlwZS5zZXRFeHRlbnQuYXBwbHkodGhpcyxhcmd1bWVudHMpLGQ9dGhpcy5nZXRSZXNvbHV0aW9uKCk7aWYodGhpcy5tYXAuYmFzZUxheWVyJiZ0aGlzLm1hcC5iYXNlTGF5ZXIud3JhcERhdGVMaW5lKXt2YXIgZSxmPWEuZ2V0V2lkdGgoKS90aGlzLm1hcC5nZXRFeHRlbnQoKS5nZXRXaWR0aCgpO2E9YS5zY2FsZSgxL2YpO2Y9dGhpcy5tYXAuZ2V0TWF4RXh0ZW50KCk7Zi5yaWdodD5hLmxlZnQmJmYucmlnaHQ8YS5yaWdodD9lPSEwOmYubGVmdD5hLmxlZnQmJmYubGVmdDxhLnJpZ2h0JiYoZT0hMSk7aWYoZSE9PXRoaXMucmlnaHRPZkRhdGVMaW5lfHxiKWM9ITEsdGhpcy54T2Zmc2V0PSEwPT09ZT9mLmdldFdpZHRoKCkvZDowO3RoaXMucmlnaHRPZkRhdGVMaW5lPWV9cmV0dXJuIGN9LGdldE5vZGVUeXBlOmZ1bmN0aW9uKGEsYil7fSxkcmF3R2VvbWV0cnk6ZnVuY3Rpb24oYSwKYixjKXt2YXIgZD1hLkNMQVNTX05BTUUsZT0hMDtpZigiT3BlbkxheWVycy5HZW9tZXRyeS5Db2xsZWN0aW9uIj09ZHx8Ik9wZW5MYXllcnMuR2VvbWV0cnkuTXVsdGlQb2ludCI9PWR8fCJPcGVuTGF5ZXJzLkdlb21ldHJ5Lk11bHRpTGluZVN0cmluZyI9PWR8fCJPcGVuTGF5ZXJzLkdlb21ldHJ5Lk11bHRpUG9seWdvbiI9PWQpe2Zvcih2YXIgZD0wLGY9YS5jb21wb25lbnRzLmxlbmd0aDtkPGY7ZCsrKWU9dGhpcy5kcmF3R2VvbWV0cnkoYS5jb21wb25lbnRzW2RdLGIsYykmJmU7cmV0dXJuIGV9ZD1lPSExOyJub25lIiE9Yi5kaXNwbGF5JiYoYi5iYWNrZ3JvdW5kR3JhcGhpYz90aGlzLnJlZHJhd0JhY2tncm91bmROb2RlKGEuaWQsYSxiLGMpOmQ9ITAsZT10aGlzLnJlZHJhd05vZGUoYS5pZCxhLGIsYykpOyExPT1lJiYoYj1kb2N1bWVudC5nZXRFbGVtZW50QnlJZChhLmlkKSkmJihiLl9zdHlsZS5iYWNrZ3JvdW5kR3JhcGhpYyYmKGQ9ITApLGIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChiKSk7CmQmJihiPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGEuaWQrdGhpcy5CQUNLR1JPVU5EX0lEX1NVRkZJWCkpJiZiLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYik7cmV0dXJuIGV9LHJlZHJhd05vZGU6ZnVuY3Rpb24oYSxiLGMsZCl7Yz10aGlzLmFwcGx5RGVmYXVsdFN5bWJvbGl6ZXIoYyk7YT10aGlzLm5vZGVGYWN0b3J5KGEsdGhpcy5nZXROb2RlVHlwZShiLGMpKTthLl9mZWF0dXJlSWQ9ZDthLl9ib3VuZHNCb3R0b209Yi5nZXRCb3VuZHMoKS5ib3R0b207YS5fZ2VvbWV0cnlDbGFzcz1iLkNMQVNTX05BTUU7YS5fc3R5bGU9YztiPXRoaXMuZHJhd0dlb21ldHJ5Tm9kZShhLGIsYyk7aWYoITE9PT1iKXJldHVybiExO2E9Yi5ub2RlO3RoaXMuaW5kZXhlcj8oYz10aGlzLmluZGV4ZXIuaW5zZXJ0KGEpKT90aGlzLnZlY3RvclJvb3QuaW5zZXJ0QmVmb3JlKGEsYyk6dGhpcy52ZWN0b3JSb290LmFwcGVuZENoaWxkKGEpOmEucGFyZW50Tm9kZSE9PXRoaXMudmVjdG9yUm9vdCYmdGhpcy52ZWN0b3JSb290LmFwcGVuZENoaWxkKGEpOwp0aGlzLnBvc3REcmF3KGEpO3JldHVybiBiLmNvbXBsZXRlfSxyZWRyYXdCYWNrZ3JvdW5kTm9kZTpmdW5jdGlvbihhLGIsYyxkKXtjPU9wZW5MYXllcnMuVXRpbC5leHRlbmQoe30sYyk7Yy5leHRlcm5hbEdyYXBoaWM9Yy5iYWNrZ3JvdW5kR3JhcGhpYztjLmdyYXBoaWNYT2Zmc2V0PWMuYmFja2dyb3VuZFhPZmZzZXQ7Yy5ncmFwaGljWU9mZnNldD1jLmJhY2tncm91bmRZT2Zmc2V0O2MuZ3JhcGhpY1pJbmRleD1jLmJhY2tncm91bmRHcmFwaGljWkluZGV4O2MuZ3JhcGhpY1dpZHRoPWMuYmFja2dyb3VuZFdpZHRofHxjLmdyYXBoaWNXaWR0aDtjLmdyYXBoaWNIZWlnaHQ9Yy5iYWNrZ3JvdW5kSGVpZ2h0fHxjLmdyYXBoaWNIZWlnaHQ7Yy5iYWNrZ3JvdW5kR3JhcGhpYz1udWxsO2MuYmFja2dyb3VuZFhPZmZzZXQ9bnVsbDtjLmJhY2tncm91bmRZT2Zmc2V0PW51bGw7Yy5iYWNrZ3JvdW5kR3JhcGhpY1pJbmRleD1udWxsO3JldHVybiB0aGlzLnJlZHJhd05vZGUoYSt0aGlzLkJBQ0tHUk9VTkRfSURfU1VGRklYLApiLGMsbnVsbCl9LGRyYXdHZW9tZXRyeU5vZGU6ZnVuY3Rpb24oYSxiLGMpe2M9Y3x8YS5fc3R5bGU7dmFyIGQ9e2lzRmlsbGVkOnZvaWQgMD09PWMuZmlsbD8hMDpjLmZpbGwsaXNTdHJva2VkOnZvaWQgMD09PWMuc3Ryb2tlPyEhYy5zdHJva2VXaWR0aDpjLnN0cm9rZX0sZTtzd2l0Y2goYi5DTEFTU19OQU1FKXtjYXNlICJPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50IjohMT09PWMuZ3JhcGhpYyYmKGQuaXNGaWxsZWQ9ITEsZC5pc1N0cm9rZWQ9ITEpO2U9dGhpcy5kcmF3UG9pbnQoYSxiKTticmVhaztjYXNlICJPcGVuTGF5ZXJzLkdlb21ldHJ5LkxpbmVTdHJpbmciOmQuaXNGaWxsZWQ9ITE7ZT10aGlzLmRyYXdMaW5lU3RyaW5nKGEsYik7YnJlYWs7Y2FzZSAiT3BlbkxheWVycy5HZW9tZXRyeS5MaW5lYXJSaW5nIjplPXRoaXMuZHJhd0xpbmVhclJpbmcoYSxiKTticmVhaztjYXNlICJPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvbHlnb24iOmU9dGhpcy5kcmF3UG9seWdvbihhLGIpO2JyZWFrOwpjYXNlICJPcGVuTGF5ZXJzLkdlb21ldHJ5LlJlY3RhbmdsZSI6ZT10aGlzLmRyYXdSZWN0YW5nbGUoYSxiKX1hLl9vcHRpb25zPWQ7cmV0dXJuITEhPWU/e25vZGU6dGhpcy5zZXRTdHlsZShhLGMsZCxiKSxjb21wbGV0ZTplfTohMX0scG9zdERyYXc6ZnVuY3Rpb24oYSl7fSxkcmF3UG9pbnQ6ZnVuY3Rpb24oYSxiKXt9LGRyYXdMaW5lU3RyaW5nOmZ1bmN0aW9uKGEsYil7fSxkcmF3TGluZWFyUmluZzpmdW5jdGlvbihhLGIpe30sZHJhd1BvbHlnb246ZnVuY3Rpb24oYSxiKXt9LGRyYXdSZWN0YW5nbGU6ZnVuY3Rpb24oYSxiKXt9LGRyYXdDaXJjbGU6ZnVuY3Rpb24oYSxiKXt9LHJlbW92ZVRleHQ6ZnVuY3Rpb24oYSl7dmFyIGI9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYSt0aGlzLkxBQkVMX0lEX1NVRkZJWCk7YiYmdGhpcy50ZXh0Um9vdC5yZW1vdmVDaGlsZChiKTsoYT1kb2N1bWVudC5nZXRFbGVtZW50QnlJZChhK3RoaXMuTEFCRUxfT1VUTElORV9TVUZGSVgpKSYmdGhpcy50ZXh0Um9vdC5yZW1vdmVDaGlsZChhKX0sCmdldEZlYXR1cmVJZEZyb21FdmVudDpmdW5jdGlvbihhKXt2YXIgYj1hLnRhcmdldCxjPWImJmIuY29ycmVzcG9uZGluZ1VzZUVsZW1lbnQ7cmV0dXJuKGM/YzpifHxhLnNyY0VsZW1lbnQpLl9mZWF0dXJlSWR9LGVyYXNlR2VvbWV0cnk6ZnVuY3Rpb24oYSxiKXtpZigiT3BlbkxheWVycy5HZW9tZXRyeS5NdWx0aVBvaW50Ij09YS5DTEFTU19OQU1FfHwiT3BlbkxheWVycy5HZW9tZXRyeS5NdWx0aUxpbmVTdHJpbmciPT1hLkNMQVNTX05BTUV8fCJPcGVuTGF5ZXJzLkdlb21ldHJ5Lk11bHRpUG9seWdvbiI9PWEuQ0xBU1NfTkFNRXx8Ik9wZW5MYXllcnMuR2VvbWV0cnkuQ29sbGVjdGlvbiI9PWEuQ0xBU1NfTkFNRSlmb3IodmFyIGM9MCxkPWEuY29tcG9uZW50cy5sZW5ndGg7YzxkO2MrKyl0aGlzLmVyYXNlR2VvbWV0cnkoYS5jb21wb25lbnRzW2NdLGIpO2Vsc2UoYz1PcGVuTGF5ZXJzLlV0aWwuZ2V0RWxlbWVudChhLmlkKSkmJmMucGFyZW50Tm9kZSYmKGMuZ2VvbWV0cnkmJihjLmdlb21ldHJ5LmRlc3Ryb3koKSwKYy5nZW9tZXRyeT1udWxsKSxjLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYyksdGhpcy5pbmRleGVyJiZ0aGlzLmluZGV4ZXIucmVtb3ZlKGMpLGMuX3N0eWxlLmJhY2tncm91bmRHcmFwaGljJiYoYz1PcGVuTGF5ZXJzLlV0aWwuZ2V0RWxlbWVudChhLmlkK3RoaXMuQkFDS0dST1VORF9JRF9TVUZGSVgpKSYmYy5wYXJlbnROb2RlJiZjLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYykpfSxub2RlRmFjdG9yeTpmdW5jdGlvbihhLGIpe3ZhciBjPU9wZW5MYXllcnMuVXRpbC5nZXRFbGVtZW50KGEpO2M/dGhpcy5ub2RlVHlwZUNvbXBhcmUoYyxiKXx8KGMucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChjKSxjPXRoaXMubm9kZUZhY3RvcnkoYSxiKSk6Yz10aGlzLmNyZWF0ZU5vZGUoYixhKTtyZXR1cm4gY30sbm9kZVR5cGVDb21wYXJlOmZ1bmN0aW9uKGEsYil7fSxjcmVhdGVOb2RlOmZ1bmN0aW9uKGEsYil7fSxtb3ZlUm9vdDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLnJvb3Q7YS5yb290LnBhcmVudE5vZGU9PQp0aGlzLnJlbmRlcmVyUm9vdCYmKGI9YS5yb290KTtiLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYik7YS5yZW5kZXJlclJvb3QuYXBwZW5kQ2hpbGQoYil9LGdldFJlbmRlckxheWVySWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yb290LnBhcmVudE5vZGUucGFyZW50Tm9kZS5pZH0saXNDb21wbGV4U3ltYm9sOmZ1bmN0aW9uKGEpe3JldHVybiJjaXJjbGUiIT1hJiYhIWF9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuUmVuZGVyZXIuRWxlbWVudHMifSk7T3BlbkxheWVycy5Db250cm9sLkFyZ1BhcnNlcj1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuQ29udHJvbCx7Y2VudGVyOm51bGwsem9vbTpudWxsLGxheWVyczpudWxsLGRpc3BsYXlQcm9qZWN0aW9uOm51bGwsZ2V0UGFyYW1ldGVyczpmdW5jdGlvbihhKXthPWF8fHdpbmRvdy5sb2NhdGlvbi5ocmVmO3ZhciBiPU9wZW5MYXllcnMuVXRpbC5nZXRQYXJhbWV0ZXJzKGEpLGM9YS5pbmRleE9mKCIjIik7MDxjJiYoYT0iPyIrYS5zdWJzdHJpbmcoYysxLGEubGVuZ3RoKSxPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKGIsT3BlbkxheWVycy5VdGlsLmdldFBhcmFtZXRlcnMoYSkpKTtyZXR1cm4gYn0sc2V0TWFwOmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuc2V0TWFwLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtmb3IodmFyIGI9MCxjPXRoaXMubWFwLmNvbnRyb2xzLmxlbmd0aDtiPGM7YisrKXt2YXIgZD10aGlzLm1hcC5jb250cm9sc1tiXTtpZihkIT10aGlzJiYKIk9wZW5MYXllcnMuQ29udHJvbC5BcmdQYXJzZXIiPT1kLkNMQVNTX05BTUUpe2QuZGlzcGxheVByb2plY3Rpb24hPXRoaXMuZGlzcGxheVByb2plY3Rpb24mJih0aGlzLmRpc3BsYXlQcm9qZWN0aW9uPWQuZGlzcGxheVByb2plY3Rpb24pO2JyZWFrfX1iPT10aGlzLm1hcC5jb250cm9scy5sZW5ndGgmJihiPXRoaXMuZ2V0UGFyYW1ldGVycygpLGIubGF5ZXJzJiYodGhpcy5sYXllcnM9Yi5sYXllcnMsdGhpcy5tYXAuZXZlbnRzLnJlZ2lzdGVyKCJhZGRsYXllciIsdGhpcyx0aGlzLmNvbmZpZ3VyZUxheWVycyksdGhpcy5jb25maWd1cmVMYXllcnMoKSksYi5sYXQmJmIubG9uJiYodGhpcy5jZW50ZXI9bmV3IE9wZW5MYXllcnMuTG9uTGF0KHBhcnNlRmxvYXQoYi5sb24pLHBhcnNlRmxvYXQoYi5sYXQpKSxiLnpvb20mJih0aGlzLnpvb209cGFyc2VGbG9hdChiLnpvb20pKSx0aGlzLm1hcC5ldmVudHMucmVnaXN0ZXIoImNoYW5nZWJhc2VsYXllciIsdGhpcyx0aGlzLnNldENlbnRlciksCnRoaXMuc2V0Q2VudGVyKCkpKX0sc2V0Q2VudGVyOmZ1bmN0aW9uKCl7dGhpcy5tYXAuYmFzZUxheWVyJiYodGhpcy5tYXAuZXZlbnRzLnVucmVnaXN0ZXIoImNoYW5nZWJhc2VsYXllciIsdGhpcyx0aGlzLnNldENlbnRlciksdGhpcy5kaXNwbGF5UHJvamVjdGlvbiYmdGhpcy5jZW50ZXIudHJhbnNmb3JtKHRoaXMuZGlzcGxheVByb2plY3Rpb24sdGhpcy5tYXAuZ2V0UHJvamVjdGlvbk9iamVjdCgpKSx0aGlzLm1hcC5zZXRDZW50ZXIodGhpcy5jZW50ZXIsdGhpcy56b29tKSl9LGNvbmZpZ3VyZUxheWVyczpmdW5jdGlvbigpe2lmKHRoaXMubGF5ZXJzLmxlbmd0aD09dGhpcy5tYXAubGF5ZXJzLmxlbmd0aCl7dGhpcy5tYXAuZXZlbnRzLnVucmVnaXN0ZXIoImFkZGxheWVyIix0aGlzLHRoaXMuY29uZmlndXJlTGF5ZXJzKTtmb3IodmFyIGE9MCxiPXRoaXMubGF5ZXJzLmxlbmd0aDthPGI7YSsrKXt2YXIgYz10aGlzLm1hcC5sYXllcnNbYV0sZD10aGlzLmxheWVycy5jaGFyQXQoYSk7CiJCIj09ZD90aGlzLm1hcC5zZXRCYXNlTGF5ZXIoYyk6IlQiIT1kJiYiRiIhPWR8fGMuc2V0VmlzaWJpbGl0eSgiVCI9PWQpfX19LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuQ29udHJvbC5BcmdQYXJzZXIifSk7T3BlbkxheWVycy5Db250cm9sLlBlcm1hbGluaz1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuQ29udHJvbCx7YXJnUGFyc2VyQ2xhc3M6T3BlbkxheWVycy5Db250cm9sLkFyZ1BhcnNlcixlbGVtZW50Om51bGwsYW5jaG9yOiExLGJhc2U6IiIsZGlzcGxheVByb2plY3Rpb246bnVsbCxpbml0aWFsaXplOmZ1bmN0aW9uKGEsYixjKXtudWxsPT09YXx8Im9iamVjdCIhPXR5cGVvZiBhfHxPcGVuTGF5ZXJzLlV0aWwuaXNFbGVtZW50KGEpPyhPcGVuTGF5ZXJzLkNvbnRyb2wucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxbY10pLHRoaXMuZWxlbWVudD1PcGVuTGF5ZXJzLlV0aWwuZ2V0RWxlbWVudChhKSx0aGlzLmJhc2U9Ynx8ZG9jdW1lbnQubG9jYXRpb24uaHJlZik6KHRoaXMuYmFzZT1kb2N1bWVudC5sb2NhdGlvbi5ocmVmLE9wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLFthXSksbnVsbCE9dGhpcy5lbGVtZW50JiYodGhpcy5lbGVtZW50PQpPcGVuTGF5ZXJzLlV0aWwuZ2V0RWxlbWVudCh0aGlzLmVsZW1lbnQpKSl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmVsZW1lbnQmJnRoaXMuZWxlbWVudC5wYXJlbnROb2RlPT10aGlzLmRpdiYmKHRoaXMuZGl2LnJlbW92ZUNoaWxkKHRoaXMuZWxlbWVudCksdGhpcy5lbGVtZW50PW51bGwpO3RoaXMubWFwJiZ0aGlzLm1hcC5ldmVudHMudW5yZWdpc3RlcigibW92ZWVuZCIsdGhpcyx0aGlzLnVwZGF0ZUxpbmspO09wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuZGVzdHJveS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LHNldE1hcDpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLkNvbnRyb2wucHJvdG90eXBlLnNldE1hcC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7Zm9yKHZhciBiPTAsYz10aGlzLm1hcC5jb250cm9scy5sZW5ndGg7YjxjO2IrKyl7dmFyIGQ9dGhpcy5tYXAuY29udHJvbHNbYl07aWYoZC5DTEFTU19OQU1FPT10aGlzLmFyZ1BhcnNlckNsYXNzLkNMQVNTX05BTUUpe2QuZGlzcGxheVByb2plY3Rpb24hPQp0aGlzLmRpc3BsYXlQcm9qZWN0aW9uJiYodGhpcy5kaXNwbGF5UHJvamVjdGlvbj1kLmRpc3BsYXlQcm9qZWN0aW9uKTticmVha319Yj09dGhpcy5tYXAuY29udHJvbHMubGVuZ3RoJiZ0aGlzLm1hcC5hZGRDb250cm9sKG5ldyB0aGlzLmFyZ1BhcnNlckNsYXNzKHtkaXNwbGF5UHJvamVjdGlvbjp0aGlzLmRpc3BsYXlQcm9qZWN0aW9ufSkpfSxkcmF3OmZ1bmN0aW9uKCl7T3BlbkxheWVycy5Db250cm9sLnByb3RvdHlwZS5kcmF3LmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLmVsZW1lbnR8fHRoaXMuYW5jaG9yfHwodGhpcy5lbGVtZW50PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImEiKSx0aGlzLmVsZW1lbnQuaW5uZXJIVE1MPU9wZW5MYXllcnMuaTE4bigiUGVybWFsaW5rIiksdGhpcy5lbGVtZW50LmhyZWY9IiIsdGhpcy5kaXYuYXBwZW5kQ2hpbGQodGhpcy5lbGVtZW50KSk7dGhpcy5tYXAuZXZlbnRzLm9uKHttb3ZlZW5kOnRoaXMudXBkYXRlTGluayxjaGFuZ2VsYXllcjp0aGlzLnVwZGF0ZUxpbmssCmNoYW5nZWJhc2VsYXllcjp0aGlzLnVwZGF0ZUxpbmssc2NvcGU6dGhpc30pO3RoaXMudXBkYXRlTGluaygpO3JldHVybiB0aGlzLmRpdn0sdXBkYXRlTGluazpmdW5jdGlvbigpe3ZhciBhPXRoaXMuYW5jaG9yPyIjIjoiPyIsYj10aGlzLmJhc2UsYz1udWxsOy0xIT1iLmluZGV4T2YoIiMiKSYmITE9PXRoaXMuYW5jaG9yJiYoYz1iLnN1YnN0cmluZyhiLmluZGV4T2YoIiMiKSxiLmxlbmd0aCkpOy0xIT1iLmluZGV4T2YoYSkmJihiPWIuc3Vic3RyaW5nKDAsYi5pbmRleE9mKGEpKSk7Yj1iLnNwbGl0KCIjIilbMF0rYStPcGVuTGF5ZXJzLlV0aWwuZ2V0UGFyYW1ldGVyU3RyaW5nKHRoaXMuY3JlYXRlUGFyYW1zKCkpO2MmJihiKz1jKTt0aGlzLmFuY2hvciYmIXRoaXMuZWxlbWVudD93aW5kb3cubG9jYXRpb24uaHJlZj1iOnRoaXMuZWxlbWVudC5ocmVmPWJ9LGNyZWF0ZVBhcmFtczpmdW5jdGlvbihhLGIsYyl7YT1hfHx0aGlzLm1hcC5nZXRDZW50ZXIoKTt2YXIgZD1PcGVuTGF5ZXJzLlV0aWwuZ2V0UGFyYW1ldGVycyh0aGlzLmJhc2UpOwppZihhKWZvcihkLnpvb209Ynx8dGhpcy5tYXAuZ2V0Wm9vbSgpLGI9YS5sYXQsYT1hLmxvbix0aGlzLmRpc3BsYXlQcm9qZWN0aW9uJiYoYj1PcGVuTGF5ZXJzLlByb2plY3Rpb24udHJhbnNmb3JtKHt4OmEseTpifSx0aGlzLm1hcC5nZXRQcm9qZWN0aW9uT2JqZWN0KCksdGhpcy5kaXNwbGF5UHJvamVjdGlvbiksYT1iLngsYj1iLnkpLGQubGF0PU1hdGgucm91bmQoMUU1KmIpLzFFNSxkLmxvbj1NYXRoLnJvdW5kKDFFNSphKS8xRTUsYz1jfHx0aGlzLm1hcC5sYXllcnMsZC5sYXllcnM9IiIsYT0wLGI9Yy5sZW5ndGg7YTxiO2ErKyl7dmFyIGU9Y1thXTtkLmxheWVycz1lLmlzQmFzZUxheWVyP2QubGF5ZXJzKyhlPT10aGlzLm1hcC5iYXNlTGF5ZXI/IkIiOiIwIik6ZC5sYXllcnMrKGUuZ2V0VmlzaWJpbGl0eSgpPyJUIjoiRiIpfXJldHVybiBkfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkNvbnRyb2wuUGVybWFsaW5rIn0pO09wZW5MYXllcnMuTGF5ZXIuVE1TPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5MYXllci5HcmlkLHtzZXJ2aWNlVmVyc2lvbjoiMS4wLjAiLGxheWVybmFtZTpudWxsLHR5cGU6bnVsbCxpc0Jhc2VMYXllcjohMCx0aWxlT3JpZ2luOm51bGwsc2VydmVyUmVzb2x1dGlvbnM6bnVsbCx6b29tT2Zmc2V0OjAsaW5pdGlhbGl6ZTpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9W107ZC5wdXNoKGEsYix7fSxjKTtPcGVuTGF5ZXJzLkxheWVyLkdyaWQucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxkKX0sY2xvbmU6ZnVuY3Rpb24oYSl7bnVsbD09YSYmKGE9bmV3IE9wZW5MYXllcnMuTGF5ZXIuVE1TKHRoaXMubmFtZSx0aGlzLnVybCx0aGlzLmdldE9wdGlvbnMoKSkpO3JldHVybiBhPU9wZW5MYXllcnMuTGF5ZXIuR3JpZC5wcm90b3R5cGUuY2xvbmUuYXBwbHkodGhpcyxbYV0pfSxnZXRVUkw6ZnVuY3Rpb24oYSl7YT10aGlzLmFkanVzdEJvdW5kcyhhKTt2YXIgYj10aGlzLmdldFNlcnZlclJlc29sdXRpb24oKSwKYz1NYXRoLnJvdW5kKChhLmxlZnQtdGhpcy50aWxlT3JpZ2luLmxvbikvKGIqdGhpcy50aWxlU2l6ZS53KSk7YT1NYXRoLnJvdW5kKChhLmJvdHRvbS10aGlzLnRpbGVPcmlnaW4ubGF0KS8oYip0aGlzLnRpbGVTaXplLmgpKTtiPXRoaXMuZ2V0U2VydmVyWm9vbSgpO2M9dGhpcy5zZXJ2aWNlVmVyc2lvbisiLyIrdGhpcy5sYXllcm5hbWUrIi8iK2IrIi8iK2MrIi8iK2ErIi4iK3RoaXMudHlwZTthPXRoaXMudXJsO09wZW5MYXllcnMuVXRpbC5pc0FycmF5KGEpJiYoYT10aGlzLnNlbGVjdFVybChjLGEpKTtyZXR1cm4gYStjfSxzZXRNYXA6ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5MYXllci5HcmlkLnByb3RvdHlwZS5zZXRNYXAuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMudGlsZU9yaWdpbnx8KHRoaXMudGlsZU9yaWdpbj1uZXcgT3BlbkxheWVycy5Mb25MYXQodGhpcy5tYXAubWF4RXh0ZW50LmxlZnQsdGhpcy5tYXAubWF4RXh0ZW50LmJvdHRvbSkpfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkxheWVyLlRNUyJ9KTtPcGVuTGF5ZXJzLkZvcm1hdC5XQ1NDYXBhYmlsaXRpZXM9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkZvcm1hdC5YTUwuVmVyc2lvbmVkT0dDLHtkZWZhdWx0VmVyc2lvbjoiMS4xLjAiLENMQVNTX05BTUU6Ik9wZW5MYXllcnMuRm9ybWF0LldDU0NhcGFiaWxpdGllcyJ9KTtPcGVuTGF5ZXJzLkZvcm1hdC5XQ1NDYXBhYmlsaXRpZXMudjE9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkZvcm1hdC5YTUwse3JlZ0V4ZXM6e3RyaW1TcGFjZTovXlxzKnxccyokL2csc3BsaXRTcGFjZTovXHMrL30sZGVmYXVsdFByZWZpeDoid2NzIixyZWFkOmZ1bmN0aW9uKGEpeyJzdHJpbmciPT10eXBlb2YgYSYmKGE9T3BlbkxheWVycy5Gb3JtYXQuWE1MLnByb3RvdHlwZS5yZWFkLmFwcGx5KHRoaXMsW2FdKSk7YSYmOT09YS5ub2RlVHlwZSYmKGE9YS5kb2N1bWVudEVsZW1lbnQpO3ZhciBiPXt9O3RoaXMucmVhZE5vZGUoYSxiKTtyZXR1cm4gYn0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Gb3JtYXQuV0NTQ2FwYWJpbGl0aWVzLnYxIn0pO09wZW5MYXllcnMuRm9ybWF0LldDU0NhcGFiaWxpdGllcy52MV8wXzA9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkZvcm1hdC5XQ1NDYXBhYmlsaXRpZXMudjEse25hbWVzcGFjZXM6e3djczoiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC93Y3MiLHhsaW5rOiJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIix4c2k6Imh0dHA6Ly93d3cudzMub3JnLzIwMDEvWE1MU2NoZW1hLWluc3RhbmNlIixvd3M6Imh0dHA6Ly93d3cub3Blbmdpcy5uZXQvb3dzIn0sZXJyb3JQcm9wZXJ0eToic2VydmljZSIscmVhZGVyczp7d2NzOntXQ1NfQ2FwYWJpbGl0aWVzOmZ1bmN0aW9uKGEsYil7dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGIpfSxTZXJ2aWNlOmZ1bmN0aW9uKGEsYil7Yi5zZXJ2aWNlPXt9O3RoaXMucmVhZENoaWxkTm9kZXMoYSxiLnNlcnZpY2UpfSxuYW1lOmZ1bmN0aW9uKGEsYil7Yi5uYW1lPXRoaXMuZ2V0Q2hpbGRWYWx1ZShhKX0sbGFiZWw6ZnVuY3Rpb24oYSxiKXtiLmxhYmVsPQp0aGlzLmdldENoaWxkVmFsdWUoYSl9LGtleXdvcmRzOmZ1bmN0aW9uKGEsYil7Yi5rZXl3b3Jkcz1bXTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYi5rZXl3b3Jkcyl9LGtleXdvcmQ6ZnVuY3Rpb24oYSxiKXtiLnB1c2godGhpcy5nZXRDaGlsZFZhbHVlKGEpKX0scmVzcG9uc2libGVQYXJ0eTpmdW5jdGlvbihhLGIpe2IucmVzcG9uc2libGVQYXJ0eT17fTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYi5yZXNwb25zaWJsZVBhcnR5KX0saW5kaXZpZHVhbE5hbWU6ZnVuY3Rpb24oYSxiKXtiLmluZGl2aWR1YWxOYW1lPXRoaXMuZ2V0Q2hpbGRWYWx1ZShhKX0sb3JnYW5pc2F0aW9uTmFtZTpmdW5jdGlvbihhLGIpe2Iub3JnYW5pc2F0aW9uTmFtZT10aGlzLmdldENoaWxkVmFsdWUoYSl9LHBvc2l0aW9uTmFtZTpmdW5jdGlvbihhLGIpe2IucG9zaXRpb25OYW1lPXRoaXMuZ2V0Q2hpbGRWYWx1ZShhKX0sY29udGFjdEluZm86ZnVuY3Rpb24oYSxiKXtiLmNvbnRhY3RJbmZvPXt9O3RoaXMucmVhZENoaWxkTm9kZXMoYSwKYi5jb250YWN0SW5mbyl9LHBob25lOmZ1bmN0aW9uKGEsYil7Yi5waG9uZT17fTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYi5waG9uZSl9LHZvaWNlOmZ1bmN0aW9uKGEsYil7Yi52b2ljZT10aGlzLmdldENoaWxkVmFsdWUoYSl9LGZhY3NpbWlsZTpmdW5jdGlvbihhLGIpe2IuZmFjc2ltaWxlPXRoaXMuZ2V0Q2hpbGRWYWx1ZShhKX0sYWRkcmVzczpmdW5jdGlvbihhLGIpe2IuYWRkcmVzcz17fTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYi5hZGRyZXNzKX0sZGVsaXZlcnlQb2ludDpmdW5jdGlvbihhLGIpe2IuZGVsaXZlcnlQb2ludD10aGlzLmdldENoaWxkVmFsdWUoYSl9LGNpdHk6ZnVuY3Rpb24oYSxiKXtiLmNpdHk9dGhpcy5nZXRDaGlsZFZhbHVlKGEpfSxwb3N0YWxDb2RlOmZ1bmN0aW9uKGEsYil7Yi5wb3N0YWxDb2RlPXRoaXMuZ2V0Q2hpbGRWYWx1ZShhKX0sY291bnRyeTpmdW5jdGlvbihhLGIpe2IuY291bnRyeT10aGlzLmdldENoaWxkVmFsdWUoYSl9LGVsZWN0cm9uaWNNYWlsQWRkcmVzczpmdW5jdGlvbihhLApiKXtiLmVsZWN0cm9uaWNNYWlsQWRkcmVzcz10aGlzLmdldENoaWxkVmFsdWUoYSl9LGZlZXM6ZnVuY3Rpb24oYSxiKXtiLmZlZXM9dGhpcy5nZXRDaGlsZFZhbHVlKGEpfSxhY2Nlc3NDb25zdHJhaW50czpmdW5jdGlvbihhLGIpe2IuYWNjZXNzQ29uc3RyYWludHM9dGhpcy5nZXRDaGlsZFZhbHVlKGEpfSxDb250ZW50TWV0YWRhdGE6ZnVuY3Rpb24oYSxiKXtiLmNvbnRlbnRNZXRhZGF0YT1bXTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYi5jb250ZW50TWV0YWRhdGEpfSxDb3ZlcmFnZU9mZmVyaW5nQnJpZWY6ZnVuY3Rpb24oYSxiKXt2YXIgYz17fTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYyk7Yi5wdXNoKGMpfSxuYW1lOmZ1bmN0aW9uKGEsYil7Yi5uYW1lPXRoaXMuZ2V0Q2hpbGRWYWx1ZShhKX0sbGFiZWw6ZnVuY3Rpb24oYSxiKXtiLmxhYmVsPXRoaXMuZ2V0Q2hpbGRWYWx1ZShhKX0sbG9uTGF0RW52ZWxvcGU6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmdldEVsZW1lbnRzQnlUYWdOYW1lTlMoYSwKImh0dHA6Ly93d3cub3Blbmdpcy5uZXQvZ21sIiwicG9zIik7aWYoMj09Yy5sZW5ndGgpe3ZhciBkPXt9LGU9e307T3BlbkxheWVycy5Gb3JtYXQuR01MLnYzLnByb3RvdHlwZS5yZWFkZXJzLmdtbC5wb3MuYXBwbHkodGhpcyxbY1swXSxkXSk7T3BlbkxheWVycy5Gb3JtYXQuR01MLnYzLnByb3RvdHlwZS5yZWFkZXJzLmdtbC5wb3MuYXBwbHkodGhpcyxbY1sxXSxlXSk7Yi5sb25MYXRFbnZlbG9wZT17fTtiLmxvbkxhdEVudmVsb3BlLnNyc05hbWU9YS5nZXRBdHRyaWJ1dGUoInNyc05hbWUiKTtiLmxvbkxhdEVudmVsb3BlLm1pbj1kLnBvaW50c1swXTtiLmxvbkxhdEVudmVsb3BlLm1heD1lLnBvaW50c1swXX19fX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Gb3JtYXQuV0NTQ2FwYWJpbGl0aWVzLnYxXzBfMCJ9KTtPcGVuTGF5ZXJzLlN0cmF0ZWd5LkZpeGVkPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5TdHJhdGVneSx7cHJlbG9hZDohMSxhY3RpdmF0ZTpmdW5jdGlvbigpe3ZhciBhPU9wZW5MYXllcnMuU3RyYXRlZ3kucHJvdG90eXBlLmFjdGl2YXRlLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtpZihhKWlmKHRoaXMubGF5ZXIuZXZlbnRzLm9uKHtyZWZyZXNoOnRoaXMubG9hZCxzY29wZTp0aGlzfSksITA9PXRoaXMubGF5ZXIudmlzaWJpbGl0eXx8dGhpcy5wcmVsb2FkKXRoaXMubG9hZCgpO2Vsc2UgdGhpcy5sYXllci5ldmVudHMub24oe3Zpc2liaWxpdHljaGFuZ2VkOnRoaXMubG9hZCxzY29wZTp0aGlzfSk7cmV0dXJuIGF9LGRlYWN0aXZhdGU6ZnVuY3Rpb24oKXt2YXIgYT1PcGVuTGF5ZXJzLlN0cmF0ZWd5LnByb3RvdHlwZS5kZWFjdGl2YXRlLmNhbGwodGhpcyk7YSYmdGhpcy5sYXllci5ldmVudHMudW4oe3JlZnJlc2g6dGhpcy5sb2FkLHZpc2liaWxpdHljaGFuZ2VkOnRoaXMubG9hZCwKc2NvcGU6dGhpc30pO3JldHVybiBhfSxsb2FkOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMubGF5ZXI7Yi5ldmVudHMudHJpZ2dlckV2ZW50KCJsb2Fkc3RhcnQiLHtmaWx0ZXI6Yi5maWx0ZXJ9KTtiLnByb3RvY29sLnJlYWQoT3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoe2NhbGxiYWNrOnRoaXMubWVyZ2UsZmlsdGVyOmIuZmlsdGVyLHNjb3BlOnRoaXN9LGEpKTtiLmV2ZW50cy51bih7dmlzaWJpbGl0eWNoYW5nZWQ6dGhpcy5sb2FkLHNjb3BlOnRoaXN9KX0sbWVyZ2U6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5sYXllcjtiLmRlc3Ryb3lGZWF0dXJlcygpO3ZhciBjPWEuZmVhdHVyZXM7aWYoYyYmMDxjLmxlbmd0aCl7dmFyIGQ9Yi5wcm9qZWN0aW9uLGU9Yi5tYXAuZ2V0UHJvamVjdGlvbk9iamVjdCgpO2lmKCFlLmVxdWFscyhkKSlmb3IodmFyIGYsZz0wLGg9Yy5sZW5ndGg7ZzxoOysrZykoZj1jW2ddLmdlb21ldHJ5KSYmZi50cmFuc2Zvcm0oZCxlKTtiLmFkZEZlYXR1cmVzKGMpfWIuZXZlbnRzLnRyaWdnZXJFdmVudCgibG9hZGVuZCIsCntyZXNwb25zZTphfSl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuU3RyYXRlZ3kuRml4ZWQifSk7T3BlbkxheWVycy5Db250cm9sLlpvb209T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkNvbnRyb2wse3pvb21JblRleHQ6IisiLHpvb21JbklkOiJvbFpvb21JbkxpbmsiLHpvb21PdXRUZXh0OiJcdTIyMTIiLHpvb21PdXRJZDoib2xab29tT3V0TGluayIsZHJhdzpmdW5jdGlvbigpe3ZhciBhPU9wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuZHJhdy5hcHBseSh0aGlzKSxiPXRoaXMuZ2V0T3JDcmVhdGVMaW5rcyhhKSxjPWIuem9vbUluLGI9Yi56b29tT3V0LGQ9dGhpcy5tYXAuZXZlbnRzO2IucGFyZW50Tm9kZSE9PWEmJihkPXRoaXMuZXZlbnRzLGQuYXR0YWNoVG9FbGVtZW50KGIucGFyZW50Tm9kZSkpO2QucmVnaXN0ZXIoImJ1dHRvbmNsaWNrIix0aGlzLHRoaXMub25ab29tQ2xpY2spO3RoaXMuem9vbUluTGluaz1jO3RoaXMuem9vbU91dExpbms9YjtyZXR1cm4gYX0sZ2V0T3JDcmVhdGVMaW5rczpmdW5jdGlvbihhKXt2YXIgYj1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLnpvb21JbklkKSwKYz1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLnpvb21PdXRJZCk7Ynx8KGI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYSIpLGIuaHJlZj0iI3pvb21JbiIsYi5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh0aGlzLnpvb21JblRleHQpKSxiLmNsYXNzTmFtZT0ib2xDb250cm9sWm9vbUluIixhLmFwcGVuZENoaWxkKGIpKTtPcGVuTGF5ZXJzLkVsZW1lbnQuYWRkQ2xhc3MoYiwib2xCdXR0b24iKTtjfHwoYz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJhIiksYy5ocmVmPSIjem9vbU91dCIsYy5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh0aGlzLnpvb21PdXRUZXh0KSksYy5jbGFzc05hbWU9Im9sQ29udHJvbFpvb21PdXQiLGEuYXBwZW5kQ2hpbGQoYykpO09wZW5MYXllcnMuRWxlbWVudC5hZGRDbGFzcyhjLCJvbEJ1dHRvbiIpO3JldHVybnt6b29tSW46Yix6b29tT3V0OmN9fSxvblpvb21DbGljazpmdW5jdGlvbihhKXthPWEuYnV0dG9uRWxlbWVudDsKYT09PXRoaXMuem9vbUluTGluaz90aGlzLm1hcC56b29tSW4oKTphPT09dGhpcy56b29tT3V0TGluayYmdGhpcy5tYXAuem9vbU91dCgpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5tYXAmJnRoaXMubWFwLmV2ZW50cy51bnJlZ2lzdGVyKCJidXR0b25jbGljayIsdGhpcyx0aGlzLm9uWm9vbUNsaWNrKTtkZWxldGUgdGhpcy56b29tSW5MaW5rO2RlbGV0ZSB0aGlzLnpvb21PdXRMaW5rO09wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuZGVzdHJveS5hcHBseSh0aGlzKX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Db250cm9sLlpvb20ifSk7T3BlbkxheWVycy5MYXllci5Qb2ludFRyYWNrPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5MYXllci5WZWN0b3Ise2RhdGFGcm9tOm51bGwsc3R5bGVGcm9tOm51bGwsYWRkTm9kZXM6ZnVuY3Rpb24oYSxiKXtpZigyPmEubGVuZ3RoKXRocm93IEVycm9yKCJBdCBsZWFzdCB0d28gcG9pbnQgZmVhdHVyZXMgaGF2ZSB0byBiZSBhZGRlZCB0byBjcmVhdGUgYSBsaW5lIGZyb20iKTtmb3IodmFyIGM9QXJyYXkoYS5sZW5ndGgtMSksZCxlLGYsZz0wLGg9YS5sZW5ndGg7ZzxoO2crKyl7ZD1hW2ddO2Y9ZC5nZW9tZXRyeTtpZighZilmPWQubG9ubGF0LGY9bmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoZi5sb24sZi5sYXQpO2Vsc2UgaWYoIk9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQiIT1mLkNMQVNTX05BTUUpdGhyb3cgbmV3IFR5cGVFcnJvcigiT25seSBmZWF0dXJlcyB3aXRoIHBvaW50IGdlb21ldHJpZXMgYXJlIHN1cHBvcnRlZC4iKTtpZigwPGcpe2Q9bnVsbCE9dGhpcy5kYXRhRnJvbT8KYVtnK3RoaXMuZGF0YUZyb21dLmRhdGF8fGFbZyt0aGlzLmRhdGFGcm9tXS5hdHRyaWJ1dGVzOm51bGw7dmFyIGs9bnVsbCE9dGhpcy5zdHlsZUZyb20/YVtnK3RoaXMuc3R5bGVGcm9tXS5zdHlsZTpudWxsO2U9bmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuTGluZVN0cmluZyhbZSxmXSk7Y1tnLTFdPW5ldyBPcGVuTGF5ZXJzLkZlYXR1cmUuVmVjdG9yKGUsZCxrKX1lPWZ9dGhpcy5hZGRGZWF0dXJlcyhjLGIpfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkxheWVyLlBvaW50VHJhY2sifSk7T3BlbkxheWVycy5MYXllci5Qb2ludFRyYWNrLlNPVVJDRV9OT0RFPS0xO09wZW5MYXllcnMuTGF5ZXIuUG9pbnRUcmFjay5UQVJHRVRfTk9ERT0wO09wZW5MYXllcnMuTGF5ZXIuUG9pbnRUcmFjay5kYXRhRnJvbT17U09VUkNFX05PREU6LTEsVEFSR0VUX05PREU6MH07T3BlbkxheWVycy5Qcm90b2NvbC5XRlM9ZnVuY3Rpb24oYSl7YT1PcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyhhLE9wZW5MYXllcnMuUHJvdG9jb2wuV0ZTLkRFRkFVTFRTKTt2YXIgYj1PcGVuTGF5ZXJzLlByb3RvY29sLldGU1sidiIrYS52ZXJzaW9uLnJlcGxhY2UoL1wuL2csIl8iKV07aWYoIWIpdGhyb3ciVW5zdXBwb3J0ZWQgV0ZTIHZlcnNpb246ICIrYS52ZXJzaW9uO3JldHVybiBuZXcgYihhKX07Ck9wZW5MYXllcnMuUHJvdG9jb2wuV0ZTLmZyb21XTVNMYXllcj1mdW5jdGlvbihhLGIpe3ZhciBjLGQ7Yz1hLnBhcmFtcy5MQVlFUlM7Yz0oT3BlbkxheWVycy5VdGlsLmlzQXJyYXkoYyk/Y1swXTpjKS5zcGxpdCgiOiIpOzE8Yy5sZW5ndGgmJihkPWNbMF0pO2M9Yy5wb3AoKTtkPXt1cmw6YS51cmwsZmVhdHVyZVR5cGU6YyxmZWF0dXJlUHJlZml4OmQsc3JzTmFtZTphLnByb2plY3Rpb24mJmEucHJvamVjdGlvbi5nZXRDb2RlKCl8fGEubWFwJiZhLm1hcC5nZXRQcm9qZWN0aW9uT2JqZWN0KCkuZ2V0Q29kZSgpLHZlcnNpb246IjEuMS4wIn07cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLlByb3RvY29sLldGUyhPcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyhiLGQpKX07T3BlbkxheWVycy5Qcm90b2NvbC5XRlMuREVGQVVMVFM9e3ZlcnNpb246IjEuMC4wIn07T3BlbkxheWVycy5MYXllci5NYXJrZXJzPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5MYXllcix7aXNCYXNlTGF5ZXI6ITEsbWFya2VyczpudWxsLGRyYXduOiExLGluaXRpYWxpemU6ZnVuY3Rpb24oYSxiKXtPcGVuTGF5ZXJzLkxheWVyLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLm1hcmtlcnM9W119LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmNsZWFyTWFya2VycygpO3RoaXMubWFya2Vycz1udWxsO09wZW5MYXllcnMuTGF5ZXIucHJvdG90eXBlLmRlc3Ryb3kuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxzZXRPcGFjaXR5OmZ1bmN0aW9uKGEpe2lmKGEhPXRoaXMub3BhY2l0eSl7dGhpcy5vcGFjaXR5PWE7YT0wO2Zvcih2YXIgYj10aGlzLm1hcmtlcnMubGVuZ3RoO2E8YjthKyspdGhpcy5tYXJrZXJzW2FdLnNldE9wYWNpdHkodGhpcy5vcGFjaXR5KX19LG1vdmVUbzpmdW5jdGlvbihhLGIsYyl7T3BlbkxheWVycy5MYXllci5wcm90b3R5cGUubW92ZVRvLmFwcGx5KHRoaXMsCmFyZ3VtZW50cyk7aWYoYnx8IXRoaXMuZHJhd24pe2Zvcih2YXIgZD0wLGU9dGhpcy5tYXJrZXJzLmxlbmd0aDtkPGU7ZCsrKXRoaXMuZHJhd01hcmtlcih0aGlzLm1hcmtlcnNbZF0pO3RoaXMuZHJhd249ITB9fSxhZGRNYXJrZXI6ZnVuY3Rpb24oYSl7dGhpcy5tYXJrZXJzLnB1c2goYSk7MT50aGlzLm9wYWNpdHkmJmEuc2V0T3BhY2l0eSh0aGlzLm9wYWNpdHkpO3RoaXMubWFwJiZ0aGlzLm1hcC5nZXRFeHRlbnQoKSYmKGEubWFwPXRoaXMubWFwLHRoaXMuZHJhd01hcmtlcihhKSl9LHJlbW92ZU1hcmtlcjpmdW5jdGlvbihhKXt0aGlzLm1hcmtlcnMmJnRoaXMubWFya2Vycy5sZW5ndGgmJihPcGVuTGF5ZXJzLlV0aWwucmVtb3ZlSXRlbSh0aGlzLm1hcmtlcnMsYSksYS5lcmFzZSgpKX0sY2xlYXJNYXJrZXJzOmZ1bmN0aW9uKCl7aWYobnVsbCE9dGhpcy5tYXJrZXJzKWZvcig7MDx0aGlzLm1hcmtlcnMubGVuZ3RoOyl0aGlzLnJlbW92ZU1hcmtlcih0aGlzLm1hcmtlcnNbMF0pfSwKZHJhd01hcmtlcjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLm1hcC5nZXRMYXllclB4RnJvbUxvbkxhdChhLmxvbmxhdCk7bnVsbD09Yj9hLmRpc3BsYXkoITEpOmEuaXNEcmF3bigpP2EuaWNvbiYmYS5pY29uLm1vdmVUbyhiKTooYT1hLmRyYXcoYiksdGhpcy5kaXYuYXBwZW5kQ2hpbGQoYSkpfSxnZXREYXRhRXh0ZW50OmZ1bmN0aW9uKCl7dmFyIGE9bnVsbDtpZih0aGlzLm1hcmtlcnMmJjA8dGhpcy5tYXJrZXJzLmxlbmd0aClmb3IodmFyIGE9bmV3IE9wZW5MYXllcnMuQm91bmRzLGI9MCxjPXRoaXMubWFya2Vycy5sZW5ndGg7YjxjO2IrKylhLmV4dGVuZCh0aGlzLm1hcmtlcnNbYl0ubG9ubGF0KTtyZXR1cm4gYX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5MYXllci5NYXJrZXJzIn0pO09wZW5MYXllcnMuQ29udHJvbC5QYW49T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkNvbnRyb2wuQnV0dG9uLHtzbGlkZUZhY3Rvcjo1MCxzbGlkZVJhdGlvOm51bGwsZGlyZWN0aW9uOm51bGwsaW5pdGlhbGl6ZTpmdW5jdGlvbihhLGIpe3RoaXMuZGlyZWN0aW9uPWE7dGhpcy5DTEFTU19OQU1FKz10aGlzLmRpcmVjdGlvbjtPcGVuTGF5ZXJzLkNvbnRyb2wucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxbYl0pfSx0cmlnZ2VyOmZ1bmN0aW9uKCl7aWYodGhpcy5tYXApe3ZhciBhPU9wZW5MYXllcnMuRnVuY3Rpb24uYmluZChmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5zbGlkZVJhdGlvP3RoaXMubWFwLmdldFNpemUoKVthXSp0aGlzLnNsaWRlUmF0aW86dGhpcy5zbGlkZUZhY3Rvcn0sdGhpcyk7c3dpdGNoKHRoaXMuZGlyZWN0aW9uKXtjYXNlIE9wZW5MYXllcnMuQ29udHJvbC5QYW4uTk9SVEg6dGhpcy5tYXAucGFuKDAsLWEoImgiKSk7YnJlYWs7Y2FzZSBPcGVuTGF5ZXJzLkNvbnRyb2wuUGFuLlNPVVRIOnRoaXMubWFwLnBhbigwLAphKCJoIikpO2JyZWFrO2Nhc2UgT3BlbkxheWVycy5Db250cm9sLlBhbi5XRVNUOnRoaXMubWFwLnBhbigtYSgidyIpLDApO2JyZWFrO2Nhc2UgT3BlbkxheWVycy5Db250cm9sLlBhbi5FQVNUOnRoaXMubWFwLnBhbihhKCJ3IiksMCl9fX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Db250cm9sLlBhbiJ9KTtPcGVuTGF5ZXJzLkNvbnRyb2wuUGFuLk5PUlRIPSJOb3J0aCI7T3BlbkxheWVycy5Db250cm9sLlBhbi5TT1VUSD0iU291dGgiO09wZW5MYXllcnMuQ29udHJvbC5QYW4uRUFTVD0iRWFzdCI7T3BlbkxheWVycy5Db250cm9sLlBhbi5XRVNUPSJXZXN0IjtPcGVuTGF5ZXJzLkZvcm1hdC5DU1dHZXREb21haW49ZnVuY3Rpb24oYSl7YT1PcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyhhLE9wZW5MYXllcnMuRm9ybWF0LkNTV0dldERvbWFpbi5ERUZBVUxUUyk7dmFyIGI9T3BlbkxheWVycy5Gb3JtYXQuQ1NXR2V0RG9tYWluWyJ2IithLnZlcnNpb24ucmVwbGFjZSgvXC4vZywiXyIpXTtpZighYil0aHJvdyJVbnN1cHBvcnRlZCBDU1dHZXREb21haW4gdmVyc2lvbjogIithLnZlcnNpb247cmV0dXJuIG5ldyBiKGEpfTtPcGVuTGF5ZXJzLkZvcm1hdC5DU1dHZXREb21haW4uREVGQVVMVFM9e3ZlcnNpb246IjIuMC4yIn07T3BlbkxheWVycy5Gb3JtYXQuQ1NXR2V0RG9tYWluLnYyXzBfMj1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuRm9ybWF0LlhNTCx7bmFtZXNwYWNlczp7eGxpbms6Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiLHhzaToiaHR0cDovL3d3dy53My5vcmcvMjAwMS9YTUxTY2hlbWEtaW5zdGFuY2UiLGNzdzoiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9jYXQvY3N3LzIuMC4yIn0sZGVmYXVsdFByZWZpeDoiY3N3Iix2ZXJzaW9uOiIyLjAuMiIsc2NoZW1hTG9jYXRpb246Imh0dHA6Ly93d3cub3Blbmdpcy5uZXQvY2F0L2Nzdy8yLjAuMiBodHRwOi8vc2NoZW1hcy5vcGVuZ2lzLm5ldC9jc3cvMi4wLjIvQ1NXLWRpc2NvdmVyeS54c2QiLFByb3BlcnR5TmFtZTpudWxsLFBhcmFtZXRlck5hbWU6bnVsbCxyZWFkOmZ1bmN0aW9uKGEpeyJzdHJpbmciPT10eXBlb2YgYSYmKGE9T3BlbkxheWVycy5Gb3JtYXQuWE1MLnByb3RvdHlwZS5yZWFkLmFwcGx5KHRoaXMsW2FdKSk7YSYmOT09CmEubm9kZVR5cGUmJihhPWEuZG9jdW1lbnRFbGVtZW50KTt2YXIgYj17fTt0aGlzLnJlYWROb2RlKGEsYik7cmV0dXJuIGJ9LHJlYWRlcnM6e2Nzdzp7R2V0RG9tYWluUmVzcG9uc2U6ZnVuY3Rpb24oYSxiKXt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYil9LERvbWFpblZhbHVlczpmdW5jdGlvbihhLGIpe09wZW5MYXllcnMuVXRpbC5pc0FycmF5KGIuRG9tYWluVmFsdWVzKXx8KGIuRG9tYWluVmFsdWVzPVtdKTtmb3IodmFyIGM9YS5hdHRyaWJ1dGVzLGQ9e30sZT0wLGY9Yy5sZW5ndGg7ZTxmOysrZSlkW2NbZV0ubmFtZV09Y1tlXS5ub2RlVmFsdWU7dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGQpO2IuRG9tYWluVmFsdWVzLnB1c2goZCl9LFByb3BlcnR5TmFtZTpmdW5jdGlvbihhLGIpe2IuUHJvcGVydHlOYW1lPXRoaXMuZ2V0Q2hpbGRWYWx1ZShhKX0sUGFyYW1ldGVyTmFtZTpmdW5jdGlvbihhLGIpe2IuUGFyYW1ldGVyTmFtZT10aGlzLmdldENoaWxkVmFsdWUoYSl9LExpc3RPZlZhbHVlczpmdW5jdGlvbihhLApiKXtPcGVuTGF5ZXJzLlV0aWwuaXNBcnJheShiLkxpc3RPZlZhbHVlcyl8fChiLkxpc3RPZlZhbHVlcz1bXSk7dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGIuTGlzdE9mVmFsdWVzKX0sVmFsdWU6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9YS5hdHRyaWJ1dGVzLGQ9e30sZT0wLGY9Yy5sZW5ndGg7ZTxmOysrZSlkW2NbZV0ubmFtZV09Y1tlXS5ub2RlVmFsdWU7ZC52YWx1ZT10aGlzLmdldENoaWxkVmFsdWUoYSk7Yi5wdXNoKHtWYWx1ZTpkfSl9LENvbmNlcHR1YWxTY2hlbWU6ZnVuY3Rpb24oYSxiKXtiLkNvbmNlcHR1YWxTY2hlbWU9e307dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGIuQ29uY2VwdHVhbFNjaGVtZSl9LE5hbWU6ZnVuY3Rpb24oYSxiKXtiLk5hbWU9dGhpcy5nZXRDaGlsZFZhbHVlKGEpfSxEb2N1bWVudDpmdW5jdGlvbihhLGIpe2IuRG9jdW1lbnQ9dGhpcy5nZXRDaGlsZFZhbHVlKGEpfSxBdXRob3JpdHk6ZnVuY3Rpb24oYSxiKXtiLkF1dGhvcml0eT10aGlzLmdldENoaWxkVmFsdWUoYSl9LApSYW5nZU9mVmFsdWVzOmZ1bmN0aW9uKGEsYil7Yi5SYW5nZU9mVmFsdWVzPXt9O3RoaXMucmVhZENoaWxkTm9kZXMoYSxiLlJhbmdlT2ZWYWx1ZXMpfSxNaW5WYWx1ZTpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz1hLmF0dHJpYnV0ZXMsZD17fSxlPTAsZj1jLmxlbmd0aDtlPGY7KytlKWRbY1tlXS5uYW1lXT1jW2VdLm5vZGVWYWx1ZTtkLnZhbHVlPXRoaXMuZ2V0Q2hpbGRWYWx1ZShhKTtiLk1pblZhbHVlPWR9LE1heFZhbHVlOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPWEuYXR0cmlidXRlcyxkPXt9LGU9MCxmPWMubGVuZ3RoO2U8ZjsrK2UpZFtjW2VdLm5hbWVdPWNbZV0ubm9kZVZhbHVlO2QudmFsdWU9dGhpcy5nZXRDaGlsZFZhbHVlKGEpO2IuTWF4VmFsdWU9ZH19fSx3cml0ZTpmdW5jdGlvbihhKXthPXRoaXMud3JpdGVOb2RlKCJjc3c6R2V0RG9tYWluIixhKTtyZXR1cm4gT3BlbkxheWVycy5Gb3JtYXQuWE1MLnByb3RvdHlwZS53cml0ZS5hcHBseSh0aGlzLFthXSl9LHdyaXRlcnM6e2Nzdzp7R2V0RG9tYWluOmZ1bmN0aW9uKGEpe3ZhciBiPQp0aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoImNzdzpHZXREb21haW4iLHthdHRyaWJ1dGVzOntzZXJ2aWNlOiJDU1ciLHZlcnNpb246dGhpcy52ZXJzaW9ufX0pO2EuUHJvcGVydHlOYW1lfHx0aGlzLlByb3BlcnR5TmFtZT90aGlzLndyaXRlTm9kZSgiY3N3OlByb3BlcnR5TmFtZSIsYS5Qcm9wZXJ0eU5hbWV8fHRoaXMuUHJvcGVydHlOYW1lLGIpOihhLlBhcmFtZXRlck5hbWV8fHRoaXMuUGFyYW1ldGVyTmFtZSkmJnRoaXMud3JpdGVOb2RlKCJjc3c6UGFyYW1ldGVyTmFtZSIsYS5QYXJhbWV0ZXJOYW1lfHx0aGlzLlBhcmFtZXRlck5hbWUsYik7dGhpcy5yZWFkQ2hpbGROb2RlcyhiLGEpO3JldHVybiBifSxQcm9wZXJ0eU5hbWU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygiY3N3OlByb3BlcnR5TmFtZSIse3ZhbHVlOmF9KX0sUGFyYW1ldGVyTmFtZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJjc3c6UGFyYW1ldGVyTmFtZSIsCnt2YWx1ZTphfSl9fX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Gb3JtYXQuQ1NXR2V0RG9tYWluLnYyXzBfMiJ9KTtPcGVuTGF5ZXJzLkZvcm1hdC5BcmNYTUwuRmVhdHVyZXM9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkZvcm1hdC5YTUwse3JlYWQ6ZnVuY3Rpb24oYSl7cmV0dXJuKG5ldyBPcGVuTGF5ZXJzLkZvcm1hdC5BcmNYTUwpLnJlYWQoYSkuZmVhdHVyZXMuZmVhdHVyZX19KTtPcGVuTGF5ZXJzLkNvbnRyb2wuU25hcHBpbmc9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkNvbnRyb2wse0RFRkFVTFRTOnt0b2xlcmFuY2U6MTAsbm9kZTohMCxlZGdlOiEwLHZlcnRleDohMH0sZ3JlZWR5OiEwLHByZWNlZGVuY2U6WyJub2RlIiwidmVydGV4IiwiZWRnZSJdLHJlc29sdXRpb246bnVsbCxnZW9Ub2xlcmFuY2VDYWNoZTpudWxsLGxheWVyOm51bGwsZmVhdHVyZTpudWxsLHBvaW50Om51bGwsaW5pdGlhbGl6ZTpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLkNvbnRyb2wucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxbYV0pO3RoaXMub3B0aW9ucz1hfHx7fTt0aGlzLm9wdGlvbnMubGF5ZXImJnRoaXMuc2V0TGF5ZXIodGhpcy5vcHRpb25zLmxheWVyKTthPU9wZW5MYXllcnMuVXRpbC5leHRlbmQoe30sdGhpcy5vcHRpb25zLmRlZmF1bHRzKTt0aGlzLmRlZmF1bHRzPU9wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKGEsdGhpcy5ERUZBVUxUUyk7dGhpcy5zZXRUYXJnZXRzKHRoaXMub3B0aW9ucy50YXJnZXRzKTsKMD09PXRoaXMudGFyZ2V0cy5sZW5ndGgmJnRoaXMubGF5ZXImJnRoaXMuYWRkVGFyZ2V0TGF5ZXIodGhpcy5sYXllcik7dGhpcy5nZW9Ub2xlcmFuY2VDYWNoZT17fX0sc2V0TGF5ZXI6ZnVuY3Rpb24oYSl7dGhpcy5hY3RpdmU/KHRoaXMuZGVhY3RpdmF0ZSgpLHRoaXMubGF5ZXI9YSx0aGlzLmFjdGl2YXRlKCkpOnRoaXMubGF5ZXI9YX0sc2V0VGFyZ2V0czpmdW5jdGlvbihhKXt0aGlzLnRhcmdldHM9W107aWYoYSYmYS5sZW5ndGgpZm9yKHZhciBiLGM9MCxkPWEubGVuZ3RoO2M8ZDsrK2MpYj1hW2NdLGIgaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLkxheWVyLlZlY3Rvcj90aGlzLmFkZFRhcmdldExheWVyKGIpOnRoaXMuYWRkVGFyZ2V0KGIpfSxhZGRUYXJnZXRMYXllcjpmdW5jdGlvbihhKXt0aGlzLmFkZFRhcmdldCh7bGF5ZXI6YX0pfSxhZGRUYXJnZXQ6ZnVuY3Rpb24oYSl7YT1PcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyhhLHRoaXMuZGVmYXVsdHMpO2Eubm9kZVRvbGVyYW5jZT0KYS5ub2RlVG9sZXJhbmNlfHxhLnRvbGVyYW5jZTthLnZlcnRleFRvbGVyYW5jZT1hLnZlcnRleFRvbGVyYW5jZXx8YS50b2xlcmFuY2U7YS5lZGdlVG9sZXJhbmNlPWEuZWRnZVRvbGVyYW5jZXx8YS50b2xlcmFuY2U7dGhpcy50YXJnZXRzLnB1c2goYSl9LHJlbW92ZVRhcmdldExheWVyOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYixjPXRoaXMudGFyZ2V0cy5sZW5ndGgtMTswPD1jOy0tYyliPXRoaXMudGFyZ2V0c1tjXSxiLmxheWVyPT09YSYmdGhpcy5yZW1vdmVUYXJnZXQoYil9LHJlbW92ZVRhcmdldDpmdW5jdGlvbihhKXtyZXR1cm4gT3BlbkxheWVycy5VdGlsLnJlbW92ZUl0ZW0odGhpcy50YXJnZXRzLGEpfSxhY3RpdmF0ZTpmdW5jdGlvbigpe3ZhciBhPU9wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuYWN0aXZhdGUuY2FsbCh0aGlzKTtpZihhJiZ0aGlzLmxheWVyJiZ0aGlzLmxheWVyLmV2ZW50cyl0aGlzLmxheWVyLmV2ZW50cy5vbih7c2tldGNoc3RhcnRlZDp0aGlzLm9uU2tldGNoTW9kaWZpZWQsCnNrZXRjaG1vZGlmaWVkOnRoaXMub25Ta2V0Y2hNb2RpZmllZCx2ZXJ0ZXhtb2RpZmllZDp0aGlzLm9uVmVydGV4TW9kaWZpZWQsc2NvcGU6dGhpc30pO3JldHVybiBhfSxkZWFjdGl2YXRlOmZ1bmN0aW9uKCl7dmFyIGE9T3BlbkxheWVycy5Db250cm9sLnByb3RvdHlwZS5kZWFjdGl2YXRlLmNhbGwodGhpcyk7YSYmdGhpcy5sYXllciYmdGhpcy5sYXllci5ldmVudHMmJnRoaXMubGF5ZXIuZXZlbnRzLnVuKHtza2V0Y2hzdGFydGVkOnRoaXMub25Ta2V0Y2hNb2RpZmllZCxza2V0Y2htb2RpZmllZDp0aGlzLm9uU2tldGNoTW9kaWZpZWQsdmVydGV4bW9kaWZpZWQ6dGhpcy5vblZlcnRleE1vZGlmaWVkLHNjb3BlOnRoaXN9KTt0aGlzLnBvaW50PXRoaXMuZmVhdHVyZT1udWxsO3JldHVybiBhfSxvblNrZXRjaE1vZGlmaWVkOmZ1bmN0aW9uKGEpe3RoaXMuZmVhdHVyZT1hLmZlYXR1cmU7dGhpcy5jb25zaWRlclNuYXBwaW5nKGEudmVydGV4LGEudmVydGV4KX0sb25WZXJ0ZXhNb2RpZmllZDpmdW5jdGlvbihhKXt0aGlzLmZlYXR1cmU9CmEuZmVhdHVyZTt2YXIgYj10aGlzLmxheWVyLm1hcC5nZXRMb25MYXRGcm9tVmlld1BvcnRQeChhLnBpeGVsKTt0aGlzLmNvbnNpZGVyU25hcHBpbmcoYS52ZXJ0ZXgsbmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoYi5sb24sYi5sYXQpKX0sY29uc2lkZXJTbmFwcGluZzpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz17cmFuazpOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFksZGlzdDpOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkseDpudWxsLHk6bnVsbH0sZD0hMSxlLGYsZz0wLGg9dGhpcy50YXJnZXRzLmxlbmd0aDtnPGg7KytnKWlmKGY9dGhpcy50YXJnZXRzW2ddLGU9dGhpcy50ZXN0VGFyZ2V0KGYsYikpaWYodGhpcy5ncmVlZHkpe2M9ZTtjLnRhcmdldD1mO2Q9ITA7YnJlYWt9ZWxzZSBpZihlLnJhbms8Yy5yYW5rfHxlLnJhbms9PT1jLnJhbmsmJmUuZGlzdDxjLmRpc3QpYz1lLGMudGFyZ2V0PWYsZD0hMDtkJiYoITEhPT10aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoImJlZm9yZXNuYXAiLAp7cG9pbnQ6YSx4OmMueCx5OmMueSxkaXN0YW5jZTpjLmRpc3QsbGF5ZXI6Yy50YXJnZXQubGF5ZXIsc25hcFR5cGU6dGhpcy5wcmVjZWRlbmNlW2MucmFua119KT8oYS54PWMueCxhLnk9Yy55LHRoaXMucG9pbnQ9YSx0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoInNuYXAiLHtwb2ludDphLHNuYXBUeXBlOnRoaXMucHJlY2VkZW5jZVtjLnJhbmtdLGxheWVyOmMudGFyZ2V0LmxheWVyLGRpc3RhbmNlOmMuZGlzdH0pKTpkPSExKTt0aGlzLnBvaW50JiYhZCYmKGEueD1iLngsYS55PWIueSx0aGlzLnBvaW50PW51bGwsdGhpcy5ldmVudHMudHJpZ2dlckV2ZW50KCJ1bnNuYXAiLHtwb2ludDphfSkpfSx0ZXN0VGFyZ2V0OmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5sYXllci5tYXAuZ2V0UmVzb2x1dGlvbigpO2lmKCJtaW5SZXNvbHV0aW9uImluIGEmJmM8YS5taW5SZXNvbHV0aW9ufHwibWF4UmVzb2x1dGlvbiJpbiBhJiZjPj1hLm1heFJlc29sdXRpb24pcmV0dXJuIG51bGw7Zm9yKHZhciBjPQp7bm9kZTp0aGlzLmdldEdlb1RvbGVyYW5jZShhLm5vZGVUb2xlcmFuY2UsYyksdmVydGV4OnRoaXMuZ2V0R2VvVG9sZXJhbmNlKGEudmVydGV4VG9sZXJhbmNlLGMpLGVkZ2U6dGhpcy5nZXRHZW9Ub2xlcmFuY2UoYS5lZGdlVG9sZXJhbmNlLGMpfSxkPU1hdGgubWF4KGMubm9kZSxjLnZlcnRleCxjLmVkZ2UpLGU9e3Jhbms6TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZLGRpc3Q6TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZfSxmPSExLGc9YS5sYXllci5mZWF0dXJlcyxoLGssbCxtLG4scCxxPXRoaXMucHJlY2VkZW5jZS5sZW5ndGgscj1uZXcgT3BlbkxheWVycy5Mb25MYXQoYi54LGIueSkscz0wLHQ9Zy5sZW5ndGg7czx0OysrcylpZihoPWdbc10saCE9PXRoaXMuZmVhdHVyZSYmKCFoLl9za2V0Y2gmJmguc3RhdGUhPT1PcGVuTGF5ZXJzLlN0YXRlLkRFTEVURSYmKCFhLmZpbHRlcnx8YS5maWx0ZXIuZXZhbHVhdGUoaCkpKSYmaC5hdFBvaW50KHIsZCxkKSlmb3IodmFyIHU9MCx2PU1hdGgubWluKGUucmFuaysKMSxxKTt1PHY7Kyt1KWlmKGs9dGhpcy5wcmVjZWRlbmNlW3VdLGFba10paWYoImVkZ2UiPT09ayl7aWYobD1oLmdlb21ldHJ5LmRpc3RhbmNlVG8oYix7ZGV0YWlsczohMH0pLG49bC5kaXN0YW5jZSxuPD1jW2tdJiZuPGUuZGlzdCl7ZT17cmFuazp1LGRpc3Q6bix4OmwueDAseTpsLnkwfTtmPSEwO2JyZWFrfX1lbHNle2w9aC5nZW9tZXRyeS5nZXRWZXJ0aWNlcygibm9kZSI9PT1rKTtwPSExO2Zvcih2YXIgdz0wLHg9bC5sZW5ndGg7dzx4OysrdyltPWxbd10sbj1tLmRpc3RhbmNlVG8oYiksbjw9Y1trXSYmKHU8ZS5yYW5rfHx1PT09ZS5yYW5rJiZuPGUuZGlzdCkmJihlPXtyYW5rOnUsZGlzdDpuLHg6bS54LHk6bS55fSxwPWY9ITApO2lmKHApYnJlYWt9cmV0dXJuIGY/ZTpudWxsfSxnZXRHZW9Ub2xlcmFuY2U6ZnVuY3Rpb24oYSxiKXtiIT09dGhpcy5yZXNvbHV0aW9uJiYodGhpcy5yZXNvbHV0aW9uPWIsdGhpcy5nZW9Ub2xlcmFuY2VDYWNoZT17fSk7dmFyIGM9dGhpcy5nZW9Ub2xlcmFuY2VDYWNoZVthXTsKdm9pZCAwPT09YyYmKGM9YSpiLHRoaXMuZ2VvVG9sZXJhbmNlQ2FjaGVbYV09Yyk7cmV0dXJuIGN9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmFjdGl2ZSYmdGhpcy5kZWFjdGl2YXRlKCk7ZGVsZXRlIHRoaXMubGF5ZXI7ZGVsZXRlIHRoaXMudGFyZ2V0cztPcGVuTGF5ZXJzLkNvbnRyb2wucHJvdG90eXBlLmRlc3Ryb3kuY2FsbCh0aGlzKX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Db250cm9sLlNuYXBwaW5nIn0pO09wZW5MYXllcnMuRm9ybWF0Lk9XU0NvbW1vbi52MV8xXzA9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkZvcm1hdC5PV1NDb21tb24udjEse25hbWVzcGFjZXM6e293czoiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9vd3MvMS4xIix4bGluazoiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayJ9LHJlYWRlcnM6e293czpPcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyh7RXhjZXB0aW9uUmVwb3J0OmZ1bmN0aW9uKGEsYil7Yi5leGNlcHRpb25SZXBvcnQ9e3ZlcnNpb246YS5nZXRBdHRyaWJ1dGUoInZlcnNpb24iKSxsYW5ndWFnZTphLmdldEF0dHJpYnV0ZSgieG1sOmxhbmciKSxleGNlcHRpb25zOltdfTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYi5leGNlcHRpb25SZXBvcnQpfSxBbGxvd2VkVmFsdWVzOmZ1bmN0aW9uKGEsYil7Yi5hbGxvd2VkVmFsdWVzPXt9O3RoaXMucmVhZENoaWxkTm9kZXMoYSxiLmFsbG93ZWRWYWx1ZXMpfSxBbnlWYWx1ZTpmdW5jdGlvbihhLGIpe2IuYW55VmFsdWU9CiEwfSxEYXRhVHlwZTpmdW5jdGlvbihhLGIpe2IuZGF0YVR5cGU9dGhpcy5nZXRDaGlsZFZhbHVlKGEpfSxSYW5nZTpmdW5jdGlvbihhLGIpe2IucmFuZ2U9e307dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGIucmFuZ2UpfSxNaW5pbXVtVmFsdWU6ZnVuY3Rpb24oYSxiKXtiLm1pblZhbHVlPXRoaXMuZ2V0Q2hpbGRWYWx1ZShhKX0sTWF4aW11bVZhbHVlOmZ1bmN0aW9uKGEsYil7Yi5tYXhWYWx1ZT10aGlzLmdldENoaWxkVmFsdWUoYSl9LElkZW50aWZpZXI6ZnVuY3Rpb24oYSxiKXtiLmlkZW50aWZpZXI9dGhpcy5nZXRDaGlsZFZhbHVlKGEpfSxTdXBwb3J0ZWRDUlM6ZnVuY3Rpb24oYSxiKXtiLnN1cHBvcnRlZENSUz10aGlzLmdldENoaWxkVmFsdWUoYSl9fSxPcGVuTGF5ZXJzLkZvcm1hdC5PV1NDb21tb24udjEucHJvdG90eXBlLnJlYWRlcnMub3dzKX0sd3JpdGVyczp7b3dzOk9wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKHtSYW5nZTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoIm93czpSYW5nZSIsCnthdHRyaWJ1dGVzOnsib3dzOnJhbmdlQ2xvc3VyZSI6YS5jbG9zdXJlfX0pO3RoaXMud3JpdGVOb2RlKCJvd3M6TWluaW11bVZhbHVlIixhLm1pblZhbHVlLGIpO3RoaXMud3JpdGVOb2RlKCJvd3M6TWF4aW11bVZhbHVlIixhLm1heFZhbHVlLGIpO3JldHVybiBifSxNaW5pbXVtVmFsdWU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygib3dzOk1pbmltdW1WYWx1ZSIse3ZhbHVlOmF9KX0sTWF4aW11bVZhbHVlOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoIm93czpNYXhpbXVtVmFsdWUiLHt2YWx1ZTphfSl9LFZhbHVlOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoIm93czpWYWx1ZSIse3ZhbHVlOmF9KX19LE9wZW5MYXllcnMuRm9ybWF0Lk9XU0NvbW1vbi52MS5wcm90b3R5cGUud3JpdGVycy5vd3MpfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkZvcm1hdC5PV1NDb21tb24udjFfMV8wIn0pO09wZW5MYXllcnMuRm9ybWF0LldDU0dldENvdmVyYWdlPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Gb3JtYXQuWE1MLHtuYW1lc3BhY2VzOntvd3M6Imh0dHA6Ly93d3cub3Blbmdpcy5uZXQvb3dzLzEuMSIsd2NzOiJodHRwOi8vd3d3Lm9wZW5naXMubmV0L3djcy8xLjEiLHhsaW5rOiJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIix4c2k6Imh0dHA6Ly93d3cudzMub3JnLzIwMDEvWE1MU2NoZW1hLWluc3RhbmNlIn0scmVnRXhlczp7dHJpbVNwYWNlOi9eXHMqfFxzKiQvZyxyZW1vdmVTcGFjZTovXHMqL2csc3BsaXRTcGFjZTovXHMrLyx0cmltQ29tbWE6L1xzKixccyovZ30sVkVSU0lPTjoiMS4xLjIiLHNjaGVtYUxvY2F0aW9uOiJodHRwOi8vd3d3Lm9wZW5naXMubmV0L3djcy8xLjEgaHR0cDovL3NjaGVtYXMub3Blbmdpcy5uZXQvd2NzLzEuMS93Y3NHZXRDb3ZlcmFnZS54c2QiLHdyaXRlOmZ1bmN0aW9uKGEpe2E9dGhpcy53cml0ZU5vZGUoIndjczpHZXRDb3ZlcmFnZSIsCmEpO3RoaXMuc2V0QXR0cmlidXRlTlMoYSx0aGlzLm5hbWVzcGFjZXMueHNpLCJ4c2k6c2NoZW1hTG9jYXRpb24iLHRoaXMuc2NoZW1hTG9jYXRpb24pO3JldHVybiBPcGVuTGF5ZXJzLkZvcm1hdC5YTUwucHJvdG90eXBlLndyaXRlLmFwcGx5KHRoaXMsW2FdKX0sd3JpdGVyczp7d2NzOntHZXRDb3ZlcmFnZTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoIndjczpHZXRDb3ZlcmFnZSIse2F0dHJpYnV0ZXM6e3ZlcnNpb246YS52ZXJzaW9ufHx0aGlzLlZFUlNJT04sc2VydmljZToiV0NTIn19KTt0aGlzLndyaXRlTm9kZSgib3dzOklkZW50aWZpZXIiLGEuaWRlbnRpZmllcixiKTt0aGlzLndyaXRlTm9kZSgid2NzOkRvbWFpblN1YnNldCIsYS5kb21haW5TdWJzZXQsYik7dGhpcy53cml0ZU5vZGUoIndjczpPdXRwdXQiLGEub3V0cHV0LGIpO3JldHVybiBifSxEb21haW5TdWJzZXQ6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJ3Y3M6RG9tYWluU3Vic2V0IiwKe30pO3RoaXMud3JpdGVOb2RlKCJvd3M6Qm91bmRpbmdCb3giLGEuYm91bmRpbmdCb3gsYik7YS50ZW1wb3JhbFN1YnNldCYmdGhpcy53cml0ZU5vZGUoIndjczpUZW1wb3JhbFN1YnNldCIsYS50ZW1wb3JhbFN1YnNldCxiKTtyZXR1cm4gYn0sVGVtcG9yYWxTdWJzZXQ6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygid2NzOlRlbXBvcmFsU3Vic2V0Iix7fSksYz0wLGQ9YS50aW1lUGVyaW9kcy5sZW5ndGg7YzxkOysrYyl0aGlzLndyaXRlTm9kZSgid2NzOlRpbWVQZXJpb2QiLGEudGltZVBlcmlvZHNbY10sYik7cmV0dXJuIGJ9LFRpbWVQZXJpb2Q6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJ3Y3M6VGltZVBlcmlvZCIse30pO3RoaXMud3JpdGVOb2RlKCJ3Y3M6QmVnaW5Qb3NpdGlvbiIsYS5iZWdpbixiKTt0aGlzLndyaXRlTm9kZSgid2NzOkVuZFBvc2l0aW9uIixhLmVuZCxiKTthLnJlc29sdXRpb24mJnRoaXMud3JpdGVOb2RlKCJ3Y3M6VGltZVJlc29sdXRpb24iLAphLnJlc29sdXRpb24sYik7cmV0dXJuIGJ9LEJlZ2luUG9zaXRpb246ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygid2NzOkJlZ2luUG9zaXRpb24iLHt2YWx1ZTphfSl9LEVuZFBvc2l0aW9uOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoIndjczpFbmRQb3NpdGlvbiIse3ZhbHVlOmF9KX0sVGltZVJlc29sdXRpb246ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygid2NzOlRpbWVSZXNvbHV0aW9uIix7dmFsdWU6YX0pfSxPdXRwdXQ6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJ3Y3M6T3V0cHV0Iix7YXR0cmlidXRlczp7Zm9ybWF0OmEuZm9ybWF0LHN0b3JlOmEuc3RvcmV9fSk7YS5ncmlkQ1JTJiZ0aGlzLndyaXRlTm9kZSgid2NzOkdyaWRDUlMiLGEuZ3JpZENSUyxiKTtyZXR1cm4gYn0sR3JpZENSUzpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoIndjczpHcmlkQ1JTIiwKe30pO3RoaXMud3JpdGVOb2RlKCJ3Y3M6R3JpZEJhc2VDUlMiLGEuYmFzZUNSUyxiKTthLnR5cGUmJnRoaXMud3JpdGVOb2RlKCJ3Y3M6R3JpZFR5cGUiLGEudHlwZSxiKTthLm9yaWdpbiYmdGhpcy53cml0ZU5vZGUoIndjczpHcmlkT3JpZ2luIixhLm9yaWdpbixiKTt0aGlzLndyaXRlTm9kZSgid2NzOkdyaWRPZmZzZXRzIixhLm9mZnNldHMsYik7YS5DUyYmdGhpcy53cml0ZU5vZGUoIndjczpHcmlkQ1MiLGEuQ1MsYik7cmV0dXJuIGJ9LEdyaWRCYXNlQ1JTOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoIndjczpHcmlkQmFzZUNSUyIse3ZhbHVlOmF9KX0sR3JpZE9yaWdpbjpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJ3Y3M6R3JpZE9yaWdpbiIse3ZhbHVlOmF9KX0sR3JpZFR5cGU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygid2NzOkdyaWRUeXBlIix7dmFsdWU6YX0pfSxHcmlkT2Zmc2V0czpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJ3Y3M6R3JpZE9mZnNldHMiLAp7dmFsdWU6YX0pfSxHcmlkQ1M6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygid2NzOkdyaWRDUyIse3ZhbHVlOmF9KX19LG93czpPcGVuTGF5ZXJzLkZvcm1hdC5PV1NDb21tb24udjFfMV8wLnByb3RvdHlwZS53cml0ZXJzLm93c30sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Gb3JtYXQuV0NTR2V0Q292ZXJhZ2UifSk7T3BlbkxheWVycy5Gb3JtYXQuS01MPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Gb3JtYXQuWE1MLHtuYW1lc3BhY2VzOntrbWw6Imh0dHA6Ly93d3cub3Blbmdpcy5uZXQva21sLzIuMiIsZ3g6Imh0dHA6Ly93d3cuZ29vZ2xlLmNvbS9rbWwvZXh0LzIuMiJ9LGttbG5zOiJodHRwOi8vZWFydGguZ29vZ2xlLmNvbS9rbWwvMi4wIixwbGFjZW1hcmtzRGVzYzoiTm8gZGVzY3JpcHRpb24gYXZhaWxhYmxlIixmb2xkZXJzTmFtZToiT3BlbkxheWVycyBleHBvcnQiLGZvbGRlcnNEZXNjOiJFeHBvcnRlZCBvbiAiK25ldyBEYXRlLGV4dHJhY3RBdHRyaWJ1dGVzOiEwLGt2cEF0dHJpYnV0ZXM6ITEsZXh0cmFjdFN0eWxlczohMSxleHRyYWN0VHJhY2tzOiExLHRyYWNrQXR0cmlidXRlczpudWxsLGludGVybmFsbnM6bnVsbCxmZWF0dXJlczpudWxsLHN0eWxlczpudWxsLHN0eWxlQmFzZVVybDoiIixmZXRjaGVkOm51bGwsbWF4RGVwdGg6MCxpbml0aWFsaXplOmZ1bmN0aW9uKGEpe3RoaXMucmVnRXhlcz0Ke3RyaW1TcGFjZTovXlxzKnxccyokL2cscmVtb3ZlU3BhY2U6L1xzKi9nLHNwbGl0U3BhY2U6L1xzKy8sdHJpbUNvbW1hOi9ccyosXHMqL2csa21sQ29sb3I6Lyhcd3syfSkoXHd7Mn0pKFx3ezJ9KShcd3syfSkvLGttbEljb25QYWxldHRlOi9yb290OlwvXC9pY29uc1wvcGFsZXR0ZS0oXGQrKShcLlx3KykvLHN0cmFpZ2h0QnJhY2tldDovXCRcWyguKj8pXF0vZ307dGhpcy5leHRlcm5hbFByb2plY3Rpb249bmV3IE9wZW5MYXllcnMuUHJvamVjdGlvbigiRVBTRzo0MzI2Iik7T3BlbkxheWVycy5Gb3JtYXQuWE1MLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsW2FdKX0scmVhZDpmdW5jdGlvbihhKXt0aGlzLmZlYXR1cmVzPVtdO3RoaXMuc3R5bGVzPXt9O3RoaXMuZmV0Y2hlZD17fTtyZXR1cm4gdGhpcy5wYXJzZURhdGEoYSx7ZGVwdGg6MCxzdHlsZUJhc2VVcmw6dGhpcy5zdHlsZUJhc2VVcmx9KX0scGFyc2VEYXRhOmZ1bmN0aW9uKGEsYil7InN0cmluZyI9PXR5cGVvZiBhJiYKKGE9T3BlbkxheWVycy5Gb3JtYXQuWE1MLnByb3RvdHlwZS5yZWFkLmFwcGx5KHRoaXMsW2FdKSk7Zm9yKHZhciBjPVsiTGluayIsIk5ldHdvcmtMaW5rIiwiU3R5bGUiLCJTdHlsZU1hcCIsIlBsYWNlbWFyayJdLGQ9MCxlPWMubGVuZ3RoO2Q8ZTsrK2Qpe3ZhciBmPWNbZF0sZz10aGlzLmdldEVsZW1lbnRzQnlUYWdOYW1lTlMoYSwiKiIsZik7aWYoMCE9Zy5sZW5ndGgpc3dpdGNoKGYudG9Mb3dlckNhc2UoKSl7Y2FzZSAibGluayI6Y2FzZSAibmV0d29ya2xpbmsiOnRoaXMucGFyc2VMaW5rcyhnLGIpO2JyZWFrO2Nhc2UgInN0eWxlIjp0aGlzLmV4dHJhY3RTdHlsZXMmJnRoaXMucGFyc2VTdHlsZXMoZyxiKTticmVhaztjYXNlICJzdHlsZW1hcCI6dGhpcy5leHRyYWN0U3R5bGVzJiZ0aGlzLnBhcnNlU3R5bGVNYXBzKGcsYik7YnJlYWs7Y2FzZSAicGxhY2VtYXJrIjp0aGlzLnBhcnNlRmVhdHVyZXMoZyxiKX19cmV0dXJuIHRoaXMuZmVhdHVyZXN9LHBhcnNlTGlua3M6ZnVuY3Rpb24oYSwKYil7aWYoYi5kZXB0aD49dGhpcy5tYXhEZXB0aClyZXR1cm4hMTt2YXIgYz1PcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHt9LGIpO2MuZGVwdGgrKztmb3IodmFyIGQ9MCxlPWEubGVuZ3RoO2Q8ZTtkKyspe3ZhciBmPXRoaXMucGFyc2VQcm9wZXJ0eShhW2RdLCIqIiwiaHJlZiIpO2YmJiF0aGlzLmZldGNoZWRbZl0mJih0aGlzLmZldGNoZWRbZl09ITAsKGY9dGhpcy5mZXRjaExpbmsoZikpJiZ0aGlzLnBhcnNlRGF0YShmLGMpKX19LGZldGNoTGluazpmdW5jdGlvbihhKXtpZihhPU9wZW5MYXllcnMuUmVxdWVzdC5HRVQoe3VybDphLGFzeW5jOiExfSkpcmV0dXJuIGEucmVzcG9uc2VUZXh0fSxwYXJzZVN0eWxlczpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz0wLGQ9YS5sZW5ndGg7YzxkO2MrKyl7dmFyIGU9dGhpcy5wYXJzZVN0eWxlKGFbY10pO2UmJih0aGlzLnN0eWxlc1soYi5zdHlsZUJhc2VVcmx8fCIiKSsiIyIrZS5pZF09ZSl9fSxwYXJzZUttbENvbG9yOmZ1bmN0aW9uKGEpe3ZhciBiPQpudWxsO2EmJihhPWEubWF0Y2godGhpcy5yZWdFeGVzLmttbENvbG9yKSkmJihiPXtjb2xvcjoiIyIrYVs0XSthWzNdK2FbMl0sb3BhY2l0eTpwYXJzZUludChhWzFdLDE2KS8yNTV9KTtyZXR1cm4gYn0scGFyc2VTdHlsZTpmdW5jdGlvbihhKXtmb3IodmFyIGI9e30sYz1bIkxpbmVTdHlsZSIsIlBvbHlTdHlsZSIsIkljb25TdHlsZSIsIkJhbGxvb25TdHlsZSIsIkxhYmVsU3R5bGUiXSxkLGUsZj0wLGc9Yy5sZW5ndGg7ZjxnOysrZilpZihkPWNbZl0sZT10aGlzLmdldEVsZW1lbnRzQnlUYWdOYW1lTlMoYSwiKiIsZClbMF0pc3dpdGNoKGQudG9Mb3dlckNhc2UoKSl7Y2FzZSAibGluZXN0eWxlIjpkPXRoaXMucGFyc2VQcm9wZXJ0eShlLCIqIiwiY29sb3IiKTtpZihkPXRoaXMucGFyc2VLbWxDb2xvcihkKSliLnN0cm9rZUNvbG9yPWQuY29sb3IsYi5zdHJva2VPcGFjaXR5PWQub3BhY2l0eTsoZD10aGlzLnBhcnNlUHJvcGVydHkoZSwiKiIsIndpZHRoIikpJiYoYi5zdHJva2VXaWR0aD0KZCk7YnJlYWs7Y2FzZSAicG9seXN0eWxlIjpkPXRoaXMucGFyc2VQcm9wZXJ0eShlLCIqIiwiY29sb3IiKTtpZihkPXRoaXMucGFyc2VLbWxDb2xvcihkKSliLmZpbGxPcGFjaXR5PWQub3BhY2l0eSxiLmZpbGxDb2xvcj1kLmNvbG9yOyIwIj09dGhpcy5wYXJzZVByb3BlcnR5KGUsIioiLCJmaWxsIikmJihiLmZpbGxDb2xvcj0ibm9uZSIpOyIwIj09dGhpcy5wYXJzZVByb3BlcnR5KGUsIioiLCJvdXRsaW5lIikmJihiLnN0cm9rZVdpZHRoPSIwIik7YnJlYWs7Y2FzZSAiaWNvbnN0eWxlIjp2YXIgaD1wYXJzZUZsb2F0KHRoaXMucGFyc2VQcm9wZXJ0eShlLCIqIiwic2NhbGUiKXx8MSk7ZD0zMipoO3ZhciBrPTMyKmgsbD10aGlzLmdldEVsZW1lbnRzQnlUYWdOYW1lTlMoZSwiKiIsIkljb24iKVswXTtpZihsKXt2YXIgbT10aGlzLnBhcnNlUHJvcGVydHkobCwiKiIsImhyZWYiKTtpZihtKXt2YXIgbj10aGlzLnBhcnNlUHJvcGVydHkobCwiKiIsInciKSxwPXRoaXMucGFyc2VQcm9wZXJ0eShsLAoiKiIsImgiKTshT3BlbkxheWVycy5TdHJpbmcuc3RhcnRzV2l0aChtLCJodHRwOi8vbWFwcy5nb29nbGUuY29tL21hcGZpbGVzL2ttbCIpfHwobnx8cCl8fChwPW49NjQsaC89Mik7bj1ufHxwO3A9cHx8bjtuJiYoZD1wYXJzZUludChuKSpoKTtwJiYoaz1wYXJzZUludChwKSpoKTtpZihwPW0ubWF0Y2godGhpcy5yZWdFeGVzLmttbEljb25QYWxldHRlKSluPXBbMV0scD1wWzJdLG09dGhpcy5wYXJzZVByb3BlcnR5KGwsIioiLCJ4IiksbD10aGlzLnBhcnNlUHJvcGVydHkobCwiKiIsInkiKSxtPSJodHRwOi8vbWFwcy5nb29nbGUuY29tL21hcGZpbGVzL2ttbC9wYWwiK24rIi9pY29uIisoOCoobD83LWwvMzI6NykrKG0/bS8zMjowKSkrcDtiLmdyYXBoaWNPcGFjaXR5PTE7Yi5leHRlcm5hbEdyYXBoaWM9bX19aWYoZT10aGlzLmdldEVsZW1lbnRzQnlUYWdOYW1lTlMoZSwiKiIsImhvdFNwb3QiKVswXSltPXBhcnNlRmxvYXQoZS5nZXRBdHRyaWJ1dGUoIngiKSksbD1wYXJzZUZsb2F0KGUuZ2V0QXR0cmlidXRlKCJ5IikpLApuPWUuZ2V0QXR0cmlidXRlKCJ4dW5pdHMiKSwicGl4ZWxzIj09bj9iLmdyYXBoaWNYT2Zmc2V0PS1tKmg6Imluc2V0UGl4ZWxzIj09bj9iLmdyYXBoaWNYT2Zmc2V0PS1kK20qaDoiZnJhY3Rpb24iPT1uJiYoYi5ncmFwaGljWE9mZnNldD0tZCptKSxlPWUuZ2V0QXR0cmlidXRlKCJ5dW5pdHMiKSwicGl4ZWxzIj09ZT9iLmdyYXBoaWNZT2Zmc2V0PS1rK2wqaCsxOiJpbnNldFBpeGVscyI9PWU/Yi5ncmFwaGljWU9mZnNldD0tKGwqaCkrMToiZnJhY3Rpb24iPT1lJiYoYi5ncmFwaGljWU9mZnNldD0tayooMS1sKSsxKTtiLmdyYXBoaWNXaWR0aD1kO2IuZ3JhcGhpY0hlaWdodD1rO2JyZWFrO2Nhc2UgImJhbGxvb25zdHlsZSI6KGU9T3BlbkxheWVycy5VdGlsLmdldFhtbE5vZGVWYWx1ZShlKSkmJihiLmJhbGxvb25TdHlsZT1lLnJlcGxhY2UodGhpcy5yZWdFeGVzLnN0cmFpZ2h0QnJhY2tldCwiJHskMX0iKSk7YnJlYWs7Y2FzZSAibGFiZWxzdHlsZSI6aWYoZD10aGlzLnBhcnNlUHJvcGVydHkoZSwKIioiLCJjb2xvciIpLGQ9dGhpcy5wYXJzZUttbENvbG9yKGQpKWIuZm9udENvbG9yPWQuY29sb3IsYi5mb250T3BhY2l0eT1kLm9wYWNpdHl9IWIuc3Ryb2tlQ29sb3ImJmIuZmlsbENvbG9yJiYoYi5zdHJva2VDb2xvcj1iLmZpbGxDb2xvcik7KGE9YS5nZXRBdHRyaWJ1dGUoImlkIikpJiZiJiYoYi5pZD1hKTtyZXR1cm4gYn0scGFyc2VTdHlsZU1hcHM6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9MCxkPWEubGVuZ3RoO2M8ZDtjKyspZm9yKHZhciBlPWFbY10sZj10aGlzLmdldEVsZW1lbnRzQnlUYWdOYW1lTlMoZSwiKiIsIlBhaXIiKSxlPWUuZ2V0QXR0cmlidXRlKCJpZCIpLGc9MCxoPWYubGVuZ3RoO2c8aDtnKyspe3ZhciBrPWZbZ10sbD10aGlzLnBhcnNlUHJvcGVydHkoaywiKiIsImtleSIpOyhrPXRoaXMucGFyc2VQcm9wZXJ0eShrLCIqIiwic3R5bGVVcmwiKSkmJiJub3JtYWwiPT1sJiYodGhpcy5zdHlsZXNbKGIuc3R5bGVCYXNlVXJsfHwiIikrIiMiK2VdPXRoaXMuc3R5bGVzWyhiLnN0eWxlQmFzZVVybHx8CiIiKStrXSl9fSxwYXJzZUZlYXR1cmVzOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPVtdLGQ9MCxlPWEubGVuZ3RoO2Q8ZTtkKyspe3ZhciBmPWFbZF0sZz10aGlzLnBhcnNlRmVhdHVyZS5hcHBseSh0aGlzLFtmXSk7aWYoZyl7dGhpcy5leHRyYWN0U3R5bGVzJiYoZy5hdHRyaWJ1dGVzJiZnLmF0dHJpYnV0ZXMuc3R5bGVVcmwpJiYoZy5zdHlsZT10aGlzLmdldFN0eWxlKGcuYXR0cmlidXRlcy5zdHlsZVVybCxiKSk7aWYodGhpcy5leHRyYWN0U3R5bGVzKXt2YXIgaD10aGlzLmdldEVsZW1lbnRzQnlUYWdOYW1lTlMoZiwiKiIsIlN0eWxlIilbMF07aCYmKGg9dGhpcy5wYXJzZVN0eWxlKGgpKSYmKGcuc3R5bGU9T3BlbkxheWVycy5VdGlsLmV4dGVuZChnLnN0eWxlLGgpKX10aGlzLmV4dHJhY3RUcmFja3M/KGY9dGhpcy5nZXRFbGVtZW50c0J5VGFnTmFtZU5TKGYsdGhpcy5uYW1lc3BhY2VzLmd4LCJUcmFjayIpKSYmMDxmLmxlbmd0aCYmKGc9e2ZlYXR1cmVzOltdLGZlYXR1cmU6Z30sCnRoaXMucmVhZE5vZGUoZlswXSxnKSwwPGcuZmVhdHVyZXMubGVuZ3RoJiZjLnB1c2guYXBwbHkoYyxnLmZlYXR1cmVzKSk6Yy5wdXNoKGcpfWVsc2UgdGhyb3ciQmFkIFBsYWNlbWFyazogIitkO310aGlzLmZlYXR1cmVzPXRoaXMuZmVhdHVyZXMuY29uY2F0KGMpfSxyZWFkZXJzOntrbWw6e3doZW46ZnVuY3Rpb24oYSxiKXtiLndoZW5zLnB1c2goT3BlbkxheWVycy5EYXRlLnBhcnNlKHRoaXMuZ2V0Q2hpbGRWYWx1ZShhKSkpfSxfdHJhY2tQb2ludEF0dHJpYnV0ZTpmdW5jdGlvbihhLGIpe3ZhciBjPWEubm9kZU5hbWUuc3BsaXQoIjoiKS5wb3AoKTtiLmF0dHJpYnV0ZXNbY10ucHVzaCh0aGlzLmdldENoaWxkVmFsdWUoYSkpfX0sZ3g6e1RyYWNrOmZ1bmN0aW9uKGEsYil7dmFyIGM9e3doZW5zOltdLHBvaW50czpbXSxhbmdsZXM6W119O2lmKHRoaXMudHJhY2tBdHRyaWJ1dGVzKXt2YXIgZDtjLmF0dHJpYnV0ZXM9e307Zm9yKHZhciBlPTAsZj10aGlzLnRyYWNrQXR0cmlidXRlcy5sZW5ndGg7ZTwKZjsrK2UpZD10aGlzLnRyYWNrQXR0cmlidXRlc1tlXSxjLmF0dHJpYnV0ZXNbZF09W10sZCBpbiB0aGlzLnJlYWRlcnMua21sfHwodGhpcy5yZWFkZXJzLmttbFtkXT10aGlzLnJlYWRlcnMua21sLl90cmFja1BvaW50QXR0cmlidXRlKX10aGlzLnJlYWRDaGlsZE5vZGVzKGEsYyk7aWYoYy53aGVucy5sZW5ndGghPT1jLnBvaW50cy5sZW5ndGgpdGhyb3cgRXJyb3IoImd4OlRyYWNrIHdpdGggdW5lcXVhbCBudW1iZXIgb2Ygd2hlbiAoIitjLndoZW5zLmxlbmd0aCsiKSBhbmQgZ3g6Y29vcmQgKCIrYy5wb2ludHMubGVuZ3RoKyIpIGVsZW1lbnRzLiIpO3ZhciBnPTA8Yy5hbmdsZXMubGVuZ3RoO2lmKGcmJmMud2hlbnMubGVuZ3RoIT09Yy5hbmdsZXMubGVuZ3RoKXRocm93IEVycm9yKCJneDpUcmFjayB3aXRoIHVuZXF1YWwgbnVtYmVyIG9mIHdoZW4gKCIrYy53aGVucy5sZW5ndGgrIikgYW5kIGd4OmFuZ2xlcyAoIitjLmFuZ2xlcy5sZW5ndGgrIikgZWxlbWVudHMuIik7Zm9yKHZhciBoLAplPTAsZj1jLndoZW5zLmxlbmd0aDtlPGY7KytlKXtoPWIuZmVhdHVyZS5jbG9uZSgpO2guZmlkPWIuZmVhdHVyZS5maWR8fGIuZmVhdHVyZS5pZDtkPWMucG9pbnRzW2VdO2guZ2VvbWV0cnk9ZDsieiJpbiBkJiYoaC5hdHRyaWJ1dGVzLmFsdGl0dWRlPWQueik7dGhpcy5pbnRlcm5hbFByb2plY3Rpb24mJnRoaXMuZXh0ZXJuYWxQcm9qZWN0aW9uJiZoLmdlb21ldHJ5LnRyYW5zZm9ybSh0aGlzLmV4dGVybmFsUHJvamVjdGlvbix0aGlzLmludGVybmFsUHJvamVjdGlvbik7aWYodGhpcy50cmFja0F0dHJpYnV0ZXMpZm9yKHZhciBrPTAsbD10aGlzLnRyYWNrQXR0cmlidXRlcy5sZW5ndGg7azxsOysraylkPXRoaXMudHJhY2tBdHRyaWJ1dGVzW2tdLGguYXR0cmlidXRlc1tkXT1jLmF0dHJpYnV0ZXNbZF1bZV07aC5hdHRyaWJ1dGVzLndoZW49Yy53aGVuc1tlXTtoLmF0dHJpYnV0ZXMudHJhY2tJZD1iLmZlYXR1cmUuaWQ7ZyYmKGQ9Yy5hbmdsZXNbZV0saC5hdHRyaWJ1dGVzLmhlYWRpbmc9CnBhcnNlRmxvYXQoZFswXSksaC5hdHRyaWJ1dGVzLnRpbHQ9cGFyc2VGbG9hdChkWzFdKSxoLmF0dHJpYnV0ZXMucm9sbD1wYXJzZUZsb2F0KGRbMl0pKTtiLmZlYXR1cmVzLnB1c2goaCl9fSxjb29yZDpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuZ2V0Q2hpbGRWYWx1ZShhKS5yZXBsYWNlKHRoaXMucmVnRXhlcy50cmltU3BhY2UsIiIpLnNwbGl0KC9ccysvKSxkPW5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KGNbMF0sY1sxXSk7MjxjLmxlbmd0aCYmKGQuej1wYXJzZUZsb2F0KGNbMl0pKTtiLnBvaW50cy5wdXNoKGQpfSxhbmdsZXM6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmdldENoaWxkVmFsdWUoYSkucmVwbGFjZSh0aGlzLnJlZ0V4ZXMudHJpbVNwYWNlLCIiKS5zcGxpdCgvXHMrLyk7Yi5hbmdsZXMucHVzaChjKX19fSxwYXJzZUZlYXR1cmU6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPVsiTXVsdGlHZW9tZXRyeSIsIlBvbHlnb24iLCJMaW5lU3RyaW5nIiwiUG9pbnQiXSwKYyxkLGUsZj0wLGc9Yi5sZW5ndGg7ZjxnOysrZilpZihjPWJbZl0sdGhpcy5pbnRlcm5hbG5zPWEubmFtZXNwYWNlVVJJP2EubmFtZXNwYWNlVVJJOnRoaXMua21sbnMsZD10aGlzLmdldEVsZW1lbnRzQnlUYWdOYW1lTlMoYSx0aGlzLmludGVybmFsbnMsYyksMDxkLmxlbmd0aCl7aWYoYj10aGlzLnBhcnNlR2VvbWV0cnlbYy50b0xvd2VyQ2FzZSgpXSllPWIuYXBwbHkodGhpcyxbZFswXV0pLHRoaXMuaW50ZXJuYWxQcm9qZWN0aW9uJiZ0aGlzLmV4dGVybmFsUHJvamVjdGlvbiYmZS50cmFuc2Zvcm0odGhpcy5leHRlcm5hbFByb2plY3Rpb24sdGhpcy5pbnRlcm5hbFByb2plY3Rpb24pO2Vsc2UgdGhyb3cgbmV3IFR5cGVFcnJvcigiVW5zdXBwb3J0ZWQgZ2VvbWV0cnkgdHlwZTogIitjKTticmVha312YXIgaDt0aGlzLmV4dHJhY3RBdHRyaWJ1dGVzJiYoaD10aGlzLnBhcnNlQXR0cmlidXRlcyhhKSk7Yz1uZXcgT3BlbkxheWVycy5GZWF0dXJlLlZlY3RvcihlLGgpO2E9YS5nZXRBdHRyaWJ1dGUoImlkIil8fAphLmdldEF0dHJpYnV0ZSgibmFtZSIpO251bGwhPWEmJihjLmZpZD1hKTtyZXR1cm4gY30sZ2V0U3R5bGU6ZnVuY3Rpb24oYSxiKXt2YXIgYz1PcGVuTGF5ZXJzLlV0aWwucmVtb3ZlVGFpbChhKSxkPU9wZW5MYXllcnMuVXRpbC5leHRlbmQoe30sYik7ZC5kZXB0aCsrO2Quc3R5bGVCYXNlVXJsPWM7IXRoaXMuc3R5bGVzW2FdJiYhT3BlbkxheWVycy5TdHJpbmcuc3RhcnRzV2l0aChhLCIjIikmJmQuZGVwdGg8PXRoaXMubWF4RGVwdGgmJiF0aGlzLmZldGNoZWRbY10mJihjPXRoaXMuZmV0Y2hMaW5rKGMpKSYmdGhpcy5wYXJzZURhdGEoYyxkKTtyZXR1cm4gT3BlbkxheWVycy5VdGlsLmV4dGVuZCh7fSx0aGlzLnN0eWxlc1thXSl9LHBhcnNlR2VvbWV0cnk6e3BvaW50OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZ2V0RWxlbWVudHNCeVRhZ05hbWVOUyhhLHRoaXMuaW50ZXJuYWxucywiY29vcmRpbmF0ZXMiKTthPVtdO2lmKDA8Yi5sZW5ndGgpe3ZhciBjPWJbMF0uZmlyc3RDaGlsZC5ub2RlVmFsdWUsCmM9Yy5yZXBsYWNlKHRoaXMucmVnRXhlcy5yZW1vdmVTcGFjZSwiIik7YT1jLnNwbGl0KCIsIil9Yj1udWxsO2lmKDE8YS5sZW5ndGgpMj09YS5sZW5ndGgmJihhWzJdPW51bGwpLGI9bmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoYVswXSxhWzFdLGFbMl0pO2Vsc2UgdGhyb3ciQmFkIGNvb3JkaW5hdGUgc3RyaW5nOiAiK2M7cmV0dXJuIGJ9LGxpbmVzdHJpbmc6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmdldEVsZW1lbnRzQnlUYWdOYW1lTlMoYSx0aGlzLmludGVybmFsbnMsImNvb3JkaW5hdGVzIiksZD1udWxsO2lmKDA8Yy5sZW5ndGgpe2Zvcih2YXIgYz10aGlzLmdldENoaWxkVmFsdWUoY1swXSksYz1jLnJlcGxhY2UodGhpcy5yZWdFeGVzLnRyaW1TcGFjZSwiIiksYz1jLnJlcGxhY2UodGhpcy5yZWdFeGVzLnRyaW1Db21tYSwiLCIpLGQ9Yy5zcGxpdCh0aGlzLnJlZ0V4ZXMuc3BsaXRTcGFjZSksZT1kLmxlbmd0aCxmPUFycmF5KGUpLGcsaCxrPTA7azxlOysraylpZihnPQpkW2tdLnNwbGl0KCIsIiksaD1nLmxlbmd0aCwxPGgpMj09Zy5sZW5ndGgmJihnWzJdPW51bGwpLGZba109bmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoZ1swXSxnWzFdLGdbMl0pO2Vsc2UgdGhyb3ciQmFkIExpbmVTdHJpbmcgcG9pbnQgY29vcmRpbmF0ZXM6ICIrZFtrXTtpZihlKWQ9Yj9uZXcgT3BlbkxheWVycy5HZW9tZXRyeS5MaW5lYXJSaW5nKGYpOm5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LkxpbmVTdHJpbmcoZik7ZWxzZSB0aHJvdyJCYWQgTGluZVN0cmluZyBjb29yZGluYXRlczogIitjO31yZXR1cm4gZH0scG9seWdvbjpmdW5jdGlvbihhKXthPXRoaXMuZ2V0RWxlbWVudHNCeVRhZ05hbWVOUyhhLHRoaXMuaW50ZXJuYWxucywiTGluZWFyUmluZyIpO3ZhciBiPWEubGVuZ3RoLGM9QXJyYXkoYik7aWYoMDxiKWZvcih2YXIgZD0wLGU9YS5sZW5ndGg7ZDxlOysrZClpZihiPXRoaXMucGFyc2VHZW9tZXRyeS5saW5lc3RyaW5nLmFwcGx5KHRoaXMsW2FbZF0sITBdKSljW2RdPQpiO2Vsc2UgdGhyb3ciQmFkIExpbmVhclJpbmcgZ2VvbWV0cnk6ICIrZDtyZXR1cm4gbmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9seWdvbihjKX0sbXVsdGlnZW9tZXRyeTpmdW5jdGlvbihhKXtmb3IodmFyIGIsYz1bXSxkPWEuY2hpbGROb2RlcyxlPTAsZj1kLmxlbmd0aDtlPGY7KytlKWE9ZFtlXSwxPT1hLm5vZGVUeXBlJiYoYj1hLnByZWZpeD9hLm5vZGVOYW1lLnNwbGl0KCI6IilbMV06YS5ub2RlTmFtZSwoYj10aGlzLnBhcnNlR2VvbWV0cnlbYi50b0xvd2VyQ2FzZSgpXSkmJmMucHVzaChiLmFwcGx5KHRoaXMsW2FdKSkpO3JldHVybiBuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Db2xsZWN0aW9uKGMpfX0scGFyc2VBdHRyaWJ1dGVzOmZ1bmN0aW9uKGEpe3ZhciBiPXt9LGM9YS5nZXRFbGVtZW50c0J5VGFnTmFtZSgiRXh0ZW5kZWREYXRhIik7Yy5sZW5ndGgmJihiPXRoaXMucGFyc2VFeHRlbmRlZERhdGEoY1swXSkpO3ZhciBkLGUsZjthPWEuY2hpbGROb2Rlcztmb3IodmFyIGM9CjAsZz1hLmxlbmd0aDtjPGc7KytjKWlmKGQ9YVtjXSwxPT1kLm5vZGVUeXBlJiYoZT1kLmNoaWxkTm9kZXMsMTw9ZS5sZW5ndGgmJjM+PWUubGVuZ3RoKSl7c3dpdGNoKGUubGVuZ3RoKXtjYXNlIDE6Zj1lWzBdO2JyZWFrO2Nhc2UgMjpmPWVbMF07ZT1lWzFdO2Y9Mz09Zi5ub2RlVHlwZXx8ND09Zi5ub2RlVHlwZT9mOmU7YnJlYWs7ZGVmYXVsdDpmPWVbMV19aWYoMz09Zi5ub2RlVHlwZXx8ND09Zi5ub2RlVHlwZSlpZihkPWQucHJlZml4P2Qubm9kZU5hbWUuc3BsaXQoIjoiKVsxXTpkLm5vZGVOYW1lLGY9T3BlbkxheWVycy5VdGlsLmdldFhtbE5vZGVWYWx1ZShmKSlmPWYucmVwbGFjZSh0aGlzLnJlZ0V4ZXMudHJpbVNwYWNlLCIiKSxiW2RdPWZ9cmV0dXJuIGJ9LHBhcnNlRXh0ZW5kZWREYXRhOmZ1bmN0aW9uKGEpe3ZhciBiPXt9LGMsZCxlLGYsZz1hLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJEYXRhIik7Yz0wO2ZvcihkPWcubGVuZ3RoO2M8ZDtjKyspe2U9Z1tjXTtmPWUuZ2V0QXR0cmlidXRlKCJuYW1lIik7CnZhciBoPXt9LGs9ZS5nZXRFbGVtZW50c0J5VGFnTmFtZSgidmFsdWUiKTtrLmxlbmd0aCYmKGgudmFsdWU9dGhpcy5nZXRDaGlsZFZhbHVlKGtbMF0pKTt0aGlzLmt2cEF0dHJpYnV0ZXM/YltmXT1oLnZhbHVlOihlPWUuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImRpc3BsYXlOYW1lIiksZS5sZW5ndGgmJihoLmRpc3BsYXlOYW1lPXRoaXMuZ2V0Q2hpbGRWYWx1ZShlWzBdKSksYltmXT1oKX1hPWEuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIlNpbXBsZURhdGEiKTtjPTA7Zm9yKGQ9YS5sZW5ndGg7YzxkO2MrKyloPXt9LGU9YVtjXSxmPWUuZ2V0QXR0cmlidXRlKCJuYW1lIiksaC52YWx1ZT10aGlzLmdldENoaWxkVmFsdWUoZSksdGhpcy5rdnBBdHRyaWJ1dGVzP2JbZl09aC52YWx1ZTooaC5kaXNwbGF5TmFtZT1mLGJbZl09aCk7cmV0dXJuIGJ9LHBhcnNlUHJvcGVydHk6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkO2E9dGhpcy5nZXRFbGVtZW50c0J5VGFnTmFtZU5TKGEsYixjKTt0cnl7ZD1PcGVuTGF5ZXJzLlV0aWwuZ2V0WG1sTm9kZVZhbHVlKGFbMF0pfWNhdGNoKGUpe2Q9Cm51bGx9cmV0dXJuIGR9LHdyaXRlOmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuVXRpbC5pc0FycmF5KGEpfHwoYT1bYV0pO2Zvcih2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROUyh0aGlzLmttbG5zLCJrbWwiKSxjPXRoaXMuY3JlYXRlRm9sZGVyWE1MKCksZD0wLGU9YS5sZW5ndGg7ZDxlOysrZCljLmFwcGVuZENoaWxkKHRoaXMuY3JlYXRlUGxhY2VtYXJrWE1MKGFbZF0pKTtiLmFwcGVuZENoaWxkKGMpO3JldHVybiBPcGVuTGF5ZXJzLkZvcm1hdC5YTUwucHJvdG90eXBlLndyaXRlLmFwcGx5KHRoaXMsW2JdKX0sY3JlYXRlRm9sZGVyWE1MOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5jcmVhdGVFbGVtZW50TlModGhpcy5rbWxucywiRm9sZGVyIik7aWYodGhpcy5mb2xkZXJzTmFtZSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlModGhpcy5rbWxucywibmFtZSIpLGM9dGhpcy5jcmVhdGVUZXh0Tm9kZSh0aGlzLmZvbGRlcnNOYW1lKTtiLmFwcGVuZENoaWxkKGMpO2EuYXBwZW5kQ2hpbGQoYil9dGhpcy5mb2xkZXJzRGVzYyYmCihiPXRoaXMuY3JlYXRlRWxlbWVudE5TKHRoaXMua21sbnMsImRlc2NyaXB0aW9uIiksYz10aGlzLmNyZWF0ZVRleHROb2RlKHRoaXMuZm9sZGVyc0Rlc2MpLGIuYXBwZW5kQ2hpbGQoYyksYS5hcHBlbmRDaGlsZChiKSk7cmV0dXJuIGF9LGNyZWF0ZVBsYWNlbWFya1hNTDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROUyh0aGlzLmttbG5zLCJuYW1lIiksYz1hLnN0eWxlJiZhLnN0eWxlLmxhYmVsP2Euc3R5bGUubGFiZWw6YS5pZDtiLmFwcGVuZENoaWxkKHRoaXMuY3JlYXRlVGV4dE5vZGUoYS5hdHRyaWJ1dGVzLm5hbWV8fGMpKTt2YXIgZD10aGlzLmNyZWF0ZUVsZW1lbnROUyh0aGlzLmttbG5zLCJkZXNjcmlwdGlvbiIpO2QuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVUZXh0Tm9kZShhLmF0dHJpYnV0ZXMuZGVzY3JpcHRpb258fHRoaXMucGxhY2VtYXJrc0Rlc2MpKTtjPXRoaXMuY3JlYXRlRWxlbWVudE5TKHRoaXMua21sbnMsIlBsYWNlbWFyayIpO251bGwhPQphLmZpZCYmYy5zZXRBdHRyaWJ1dGUoImlkIixhLmZpZCk7Yy5hcHBlbmRDaGlsZChiKTtjLmFwcGVuZENoaWxkKGQpO2I9dGhpcy5idWlsZEdlb21ldHJ5Tm9kZShhLmdlb21ldHJ5KTtjLmFwcGVuZENoaWxkKGIpO2EuYXR0cmlidXRlcyYmKGE9dGhpcy5idWlsZEV4dGVuZGVkRGF0YShhLmF0dHJpYnV0ZXMpKSYmYy5hcHBlbmRDaGlsZChhKTtyZXR1cm4gY30sYnVpbGRHZW9tZXRyeU5vZGU6ZnVuY3Rpb24oYSl7dmFyIGI9YS5DTEFTU19OQU1FLGI9Yi5zdWJzdHJpbmcoYi5sYXN0SW5kZXhPZigiLiIpKzEpLGI9dGhpcy5idWlsZEdlb21ldHJ5W2IudG9Mb3dlckNhc2UoKV0sYz1udWxsO2ImJihjPWIuYXBwbHkodGhpcyxbYV0pKTtyZXR1cm4gY30sYnVpbGRHZW9tZXRyeTp7cG9pbnQ6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlModGhpcy5rbWxucywiUG9pbnQiKTtiLmFwcGVuZENoaWxkKHRoaXMuYnVpbGRDb29yZGluYXRlc05vZGUoYSkpO3JldHVybiBifSwKbXVsdGlwb2ludDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5idWlsZEdlb21ldHJ5LmNvbGxlY3Rpb24uYXBwbHkodGhpcyxbYV0pfSxsaW5lc3RyaW5nOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TKHRoaXMua21sbnMsIkxpbmVTdHJpbmciKTtiLmFwcGVuZENoaWxkKHRoaXMuYnVpbGRDb29yZGluYXRlc05vZGUoYSkpO3JldHVybiBifSxtdWx0aWxpbmVzdHJpbmc6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuYnVpbGRHZW9tZXRyeS5jb2xsZWN0aW9uLmFwcGx5KHRoaXMsW2FdKX0sbGluZWFycmluZzpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROUyh0aGlzLmttbG5zLCJMaW5lYXJSaW5nIik7Yi5hcHBlbmRDaGlsZCh0aGlzLmJ1aWxkQ29vcmRpbmF0ZXNOb2RlKGEpKTtyZXR1cm4gYn0scG9seWdvbjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROUyh0aGlzLmttbG5zLCJQb2x5Z29uIik7YT1hLmNvbXBvbmVudHM7CmZvcih2YXIgYyxkLGU9MCxmPWEubGVuZ3RoO2U8ZjsrK2UpYz0wPT1lPyJvdXRlckJvdW5kYXJ5SXMiOiJpbm5lckJvdW5kYXJ5SXMiLGM9dGhpcy5jcmVhdGVFbGVtZW50TlModGhpcy5rbWxucyxjKSxkPXRoaXMuYnVpbGRHZW9tZXRyeS5saW5lYXJyaW5nLmFwcGx5KHRoaXMsW2FbZV1dKSxjLmFwcGVuZENoaWxkKGQpLGIuYXBwZW5kQ2hpbGQoYyk7cmV0dXJuIGJ9LG11bHRpcG9seWdvbjpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5idWlsZEdlb21ldHJ5LmNvbGxlY3Rpb24uYXBwbHkodGhpcyxbYV0pfSxjb2xsZWN0aW9uOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROUyh0aGlzLmttbG5zLCJNdWx0aUdlb21ldHJ5IiksYyxkPTAsZT1hLmNvbXBvbmVudHMubGVuZ3RoO2Q8ZTsrK2QpKGM9dGhpcy5idWlsZEdlb21ldHJ5Tm9kZS5hcHBseSh0aGlzLFthLmNvbXBvbmVudHNbZF1dKSkmJmIuYXBwZW5kQ2hpbGQoYyk7cmV0dXJuIGJ9fSxidWlsZENvb3JkaW5hdGVzTm9kZTpmdW5jdGlvbihhKXt2YXIgYj0KdGhpcy5jcmVhdGVFbGVtZW50TlModGhpcy5rbWxucywiY29vcmRpbmF0ZXMiKSxjO2lmKGM9YS5jb21wb25lbnRzKXtmb3IodmFyIGQ9Yy5sZW5ndGgsZT1BcnJheShkKSxmPTA7ZjxkOysrZilhPWNbZl0sZVtmXT10aGlzLmJ1aWxkQ29vcmRpbmF0ZXMoYSk7Yz1lLmpvaW4oIiAiKX1lbHNlIGM9dGhpcy5idWlsZENvb3JkaW5hdGVzKGEpO2M9dGhpcy5jcmVhdGVUZXh0Tm9kZShjKTtiLmFwcGVuZENoaWxkKGMpO3JldHVybiBifSxidWlsZENvb3JkaW5hdGVzOmZ1bmN0aW9uKGEpe3RoaXMuaW50ZXJuYWxQcm9qZWN0aW9uJiZ0aGlzLmV4dGVybmFsUHJvamVjdGlvbiYmKGE9YS5jbG9uZSgpLGEudHJhbnNmb3JtKHRoaXMuaW50ZXJuYWxQcm9qZWN0aW9uLHRoaXMuZXh0ZXJuYWxQcm9qZWN0aW9uKSk7cmV0dXJuIGEueCsiLCIrYS55fSxidWlsZEV4dGVuZGVkRGF0YTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROUyh0aGlzLmttbG5zLCJFeHRlbmRlZERhdGEiKSwKYztmb3IoYyBpbiBhKWlmKGFbY10mJiJuYW1lIiE9YyYmImRlc2NyaXB0aW9uIiE9YyYmInN0eWxlVXJsIiE9Yyl7dmFyIGQ9dGhpcy5jcmVhdGVFbGVtZW50TlModGhpcy5rbWxucywiRGF0YSIpO2Quc2V0QXR0cmlidXRlKCJuYW1lIixjKTt2YXIgZT10aGlzLmNyZWF0ZUVsZW1lbnROUyh0aGlzLmttbG5zLCJ2YWx1ZSIpO2lmKCJvYmplY3QiPT10eXBlb2YgYVtjXSl7aWYoYVtjXS52YWx1ZSYmZS5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZVRleHROb2RlKGFbY10udmFsdWUpKSxhW2NdLmRpc3BsYXlOYW1lKXt2YXIgZj10aGlzLmNyZWF0ZUVsZW1lbnROUyh0aGlzLmttbG5zLCJkaXNwbGF5TmFtZSIpO2YuYXBwZW5kQ2hpbGQodGhpcy5nZXRYTUxEb2MoKS5jcmVhdGVDREFUQVNlY3Rpb24oYVtjXS5kaXNwbGF5TmFtZSkpO2QuYXBwZW5kQ2hpbGQoZil9fWVsc2UgZS5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZVRleHROb2RlKGFbY10pKTtkLmFwcGVuZENoaWxkKGUpO2IuYXBwZW5kQ2hpbGQoZCl9cmV0dXJuIHRoaXMuaXNTaW1wbGVDb250ZW50KGIpPwpudWxsOmJ9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuRm9ybWF0LktNTCJ9KTtPcGVuTGF5ZXJzLkZvcm1hdC5XTVNDYXBhYmlsaXRpZXM9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkZvcm1hdC5YTUwuVmVyc2lvbmVkT0dDLHtkZWZhdWx0VmVyc2lvbjoiMS4xLjEiLHByb2ZpbGU6bnVsbCxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkZvcm1hdC5XTVNDYXBhYmlsaXRpZXMifSk7T3BlbkxheWVycy5Gb3JtYXQuV01TQ2FwYWJpbGl0aWVzLnYxPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Gb3JtYXQuWE1MLHtuYW1lc3BhY2VzOnt3bXM6Imh0dHA6Ly93d3cub3Blbmdpcy5uZXQvd21zIix4bGluazoiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIseHNpOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxL1hNTFNjaGVtYS1pbnN0YW5jZSJ9LGRlZmF1bHRQcmVmaXg6IndtcyIscmVhZDpmdW5jdGlvbihhKXsic3RyaW5nIj09dHlwZW9mIGEmJihhPU9wZW5MYXllcnMuRm9ybWF0LlhNTC5wcm90b3R5cGUucmVhZC5hcHBseSh0aGlzLFthXSkpO3ZhciBiPWE7YSYmOT09YS5ub2RlVHlwZSYmKGE9YS5kb2N1bWVudEVsZW1lbnQpO3ZhciBjPXt9O3RoaXMucmVhZE5vZGUoYSxjKTt2b2lkIDA9PT1jLnNlcnZpY2UmJihhPW5ldyBPcGVuTGF5ZXJzLkZvcm1hdC5PR0NFeGNlcHRpb25SZXBvcnQsYy5lcnJvcj1hLnJlYWQoYikpO3JldHVybiBjfSxyZWFkZXJzOnt3bXM6e1NlcnZpY2U6ZnVuY3Rpb24oYSwKYil7Yi5zZXJ2aWNlPXt9O3RoaXMucmVhZENoaWxkTm9kZXMoYSxiLnNlcnZpY2UpfSxOYW1lOmZ1bmN0aW9uKGEsYil7Yi5uYW1lPXRoaXMuZ2V0Q2hpbGRWYWx1ZShhKX0sVGl0bGU6ZnVuY3Rpb24oYSxiKXtiLnRpdGxlPXRoaXMuZ2V0Q2hpbGRWYWx1ZShhKX0sQWJzdHJhY3Q6ZnVuY3Rpb24oYSxiKXtiWyJhYnN0cmFjdCJdPXRoaXMuZ2V0Q2hpbGRWYWx1ZShhKX0sQm91bmRpbmdCb3g6ZnVuY3Rpb24oYSxiKXt2YXIgYz17fTtjLmJib3g9W3BhcnNlRmxvYXQoYS5nZXRBdHRyaWJ1dGUoIm1pbngiKSkscGFyc2VGbG9hdChhLmdldEF0dHJpYnV0ZSgibWlueSIpKSxwYXJzZUZsb2F0KGEuZ2V0QXR0cmlidXRlKCJtYXh4IikpLHBhcnNlRmxvYXQoYS5nZXRBdHRyaWJ1dGUoIm1heHkiKSldO3ZhciBkPXt4OnBhcnNlRmxvYXQoYS5nZXRBdHRyaWJ1dGUoInJlc3giKSkseTpwYXJzZUZsb2F0KGEuZ2V0QXR0cmlidXRlKCJyZXN5IikpfTtpc05hTihkLngpJiZpc05hTihkLnkpfHwoYy5yZXM9CmQpO3JldHVybiBjfSxPbmxpbmVSZXNvdXJjZTpmdW5jdGlvbihhLGIpe2IuaHJlZj10aGlzLmdldEF0dHJpYnV0ZU5TKGEsdGhpcy5uYW1lc3BhY2VzLnhsaW5rLCJocmVmIil9LENvbnRhY3RJbmZvcm1hdGlvbjpmdW5jdGlvbihhLGIpe2IuY29udGFjdEluZm9ybWF0aW9uPXt9O3RoaXMucmVhZENoaWxkTm9kZXMoYSxiLmNvbnRhY3RJbmZvcm1hdGlvbil9LENvbnRhY3RQZXJzb25QcmltYXJ5OmZ1bmN0aW9uKGEsYil7Yi5wZXJzb25QcmltYXJ5PXt9O3RoaXMucmVhZENoaWxkTm9kZXMoYSxiLnBlcnNvblByaW1hcnkpfSxDb250YWN0UGVyc29uOmZ1bmN0aW9uKGEsYil7Yi5wZXJzb249dGhpcy5nZXRDaGlsZFZhbHVlKGEpfSxDb250YWN0T3JnYW5pemF0aW9uOmZ1bmN0aW9uKGEsYil7Yi5vcmdhbml6YXRpb249dGhpcy5nZXRDaGlsZFZhbHVlKGEpfSxDb250YWN0UG9zaXRpb246ZnVuY3Rpb24oYSxiKXtiLnBvc2l0aW9uPXRoaXMuZ2V0Q2hpbGRWYWx1ZShhKX0sQ29udGFjdEFkZHJlc3M6ZnVuY3Rpb24oYSwKYil7Yi5jb250YWN0QWRkcmVzcz17fTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYi5jb250YWN0QWRkcmVzcyl9LEFkZHJlc3NUeXBlOmZ1bmN0aW9uKGEsYil7Yi50eXBlPXRoaXMuZ2V0Q2hpbGRWYWx1ZShhKX0sQWRkcmVzczpmdW5jdGlvbihhLGIpe2IuYWRkcmVzcz10aGlzLmdldENoaWxkVmFsdWUoYSl9LENpdHk6ZnVuY3Rpb24oYSxiKXtiLmNpdHk9dGhpcy5nZXRDaGlsZFZhbHVlKGEpfSxTdGF0ZU9yUHJvdmluY2U6ZnVuY3Rpb24oYSxiKXtiLnN0YXRlT3JQcm92aW5jZT10aGlzLmdldENoaWxkVmFsdWUoYSl9LFBvc3RDb2RlOmZ1bmN0aW9uKGEsYil7Yi5wb3N0Y29kZT10aGlzLmdldENoaWxkVmFsdWUoYSl9LENvdW50cnk6ZnVuY3Rpb24oYSxiKXtiLmNvdW50cnk9dGhpcy5nZXRDaGlsZFZhbHVlKGEpfSxDb250YWN0Vm9pY2VUZWxlcGhvbmU6ZnVuY3Rpb24oYSxiKXtiLnBob25lPXRoaXMuZ2V0Q2hpbGRWYWx1ZShhKX0sQ29udGFjdEZhY3NpbWlsZVRlbGVwaG9uZTpmdW5jdGlvbihhLApiKXtiLmZheD10aGlzLmdldENoaWxkVmFsdWUoYSl9LENvbnRhY3RFbGVjdHJvbmljTWFpbEFkZHJlc3M6ZnVuY3Rpb24oYSxiKXtiLmVtYWlsPXRoaXMuZ2V0Q2hpbGRWYWx1ZShhKX0sRmVlczpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuZ2V0Q2hpbGRWYWx1ZShhKTtjJiYibm9uZSIhPWMudG9Mb3dlckNhc2UoKSYmKGIuZmVlcz1jKX0sQWNjZXNzQ29uc3RyYWludHM6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmdldENoaWxkVmFsdWUoYSk7YyYmIm5vbmUiIT1jLnRvTG93ZXJDYXNlKCkmJihiLmFjY2Vzc0NvbnN0cmFpbnRzPWMpfSxDYXBhYmlsaXR5OmZ1bmN0aW9uKGEsYil7Yi5jYXBhYmlsaXR5PXtuZXN0ZWRMYXllcnM6W10sbGF5ZXJzOltdfTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYi5jYXBhYmlsaXR5KX0sUmVxdWVzdDpmdW5jdGlvbihhLGIpe2IucmVxdWVzdD17fTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYi5yZXF1ZXN0KX0sR2V0Q2FwYWJpbGl0aWVzOmZ1bmN0aW9uKGEsCmIpe2IuZ2V0Y2FwYWJpbGl0aWVzPXtmb3JtYXRzOltdfTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYi5nZXRjYXBhYmlsaXRpZXMpfSxGb3JtYXQ6ZnVuY3Rpb24oYSxiKXtPcGVuTGF5ZXJzLlV0aWwuaXNBcnJheShiLmZvcm1hdHMpP2IuZm9ybWF0cy5wdXNoKHRoaXMuZ2V0Q2hpbGRWYWx1ZShhKSk6Yi5mb3JtYXQ9dGhpcy5nZXRDaGlsZFZhbHVlKGEpfSxEQ1BUeXBlOmZ1bmN0aW9uKGEsYil7dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGIpfSxIVFRQOmZ1bmN0aW9uKGEsYil7dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGIpfSxHZXQ6ZnVuY3Rpb24oYSxiKXtiLmdldD17fTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYi5nZXQpO2IuaHJlZnx8KGIuaHJlZj1iLmdldC5ocmVmKX0sUG9zdDpmdW5jdGlvbihhLGIpe2IucG9zdD17fTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYi5wb3N0KTtiLmhyZWZ8fChiLmhyZWY9Yi5nZXQuaHJlZil9LEdldE1hcDpmdW5jdGlvbihhLGIpe2IuZ2V0bWFwPXtmb3JtYXRzOltdfTsKdGhpcy5yZWFkQ2hpbGROb2RlcyhhLGIuZ2V0bWFwKX0sR2V0RmVhdHVyZUluZm86ZnVuY3Rpb24oYSxiKXtiLmdldGZlYXR1cmVpbmZvPXtmb3JtYXRzOltdfTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYi5nZXRmZWF0dXJlaW5mbyl9LEV4Y2VwdGlvbjpmdW5jdGlvbihhLGIpe2IuZXhjZXB0aW9uPXtmb3JtYXRzOltdfTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYi5leGNlcHRpb24pfSxMYXllcjpmdW5jdGlvbihhLGIpe3ZhciBjLGQ7Yi5jYXBhYmlsaXR5PyhkPWIuY2FwYWJpbGl0eSxjPWIpOmQ9Yjt2YXIgZT1hLmdldEF0dHJpYnV0ZU5vZGUoInF1ZXJ5YWJsZSIpLGY9ZSYmZS5zcGVjaWZpZWQ/YS5nZXRBdHRyaWJ1dGUoInF1ZXJ5YWJsZSIpOm51bGwsZz0oZT1hLmdldEF0dHJpYnV0ZU5vZGUoImNhc2NhZGVkIikpJiZlLnNwZWNpZmllZD9hLmdldEF0dHJpYnV0ZSgiY2FzY2FkZWQiKTpudWxsLGU9KGU9YS5nZXRBdHRyaWJ1dGVOb2RlKCJvcGFxdWUiKSkmJmUuc3BlY2lmaWVkPwphLmdldEF0dHJpYnV0ZSgib3BhcXVlIik6bnVsbCxoPWEuZ2V0QXR0cmlidXRlKCJub1N1YnNldHMiKSxrPWEuZ2V0QXR0cmlidXRlKCJmaXhlZFdpZHRoIiksbD1hLmdldEF0dHJpYnV0ZSgiZml4ZWRIZWlnaHQiKSxtPWN8fHt9LG49T3BlbkxheWVycy5VdGlsLmV4dGVuZDtjPXtuZXN0ZWRMYXllcnM6W10sc3R5bGVzOmM/W10uY29uY2F0KGMuc3R5bGVzKTpbXSxzcnM6Yz9uKHt9LG0uc3JzKTp7fSxtZXRhZGF0YVVSTHM6W10sYmJveDpjP24oe30sbS5iYm94KTp7fSxsbGJib3g6bS5sbGJib3gsZGltZW5zaW9uczpjP24oe30sbS5kaW1lbnNpb25zKTp7fSxhdXRob3JpdHlVUkxzOmM/bih7fSxtLmF1dGhvcml0eVVSTHMpOnt9LGlkZW50aWZpZXJzOnt9LGtleXdvcmRzOltdLHF1ZXJ5YWJsZTpmJiYiIiE9PWY/IjEiPT09Znx8InRydWUiPT09ZjptLnF1ZXJ5YWJsZXx8ITEsY2FzY2FkZWQ6bnVsbCE9PWc/cGFyc2VJbnQoZyk6bS5jYXNjYWRlZHx8MCxvcGFxdWU6ZT8iMSI9PT0KZXx8InRydWUiPT09ZTptLm9wYXF1ZXx8ITEsbm9TdWJzZXRzOm51bGwhPT1oPyIxIj09PWh8fCJ0cnVlIj09PWg6bS5ub1N1YnNldHN8fCExLGZpeGVkV2lkdGg6bnVsbCE9az9wYXJzZUludChrKTptLmZpeGVkV2lkdGh8fDAsZml4ZWRIZWlnaHQ6bnVsbCE9bD9wYXJzZUludChsKTptLmZpeGVkSGVpZ2h0fHwwLG1pblNjYWxlOm0ubWluU2NhbGUsbWF4U2NhbGU6bS5tYXhTY2FsZSxhdHRyaWJ1dGlvbjptLmF0dHJpYnV0aW9ufTtiLm5lc3RlZExheWVycy5wdXNoKGMpO2MuY2FwYWJpbGl0eT1kO3RoaXMucmVhZENoaWxkTm9kZXMoYSxjKTtkZWxldGUgYy5jYXBhYmlsaXR5O2MubmFtZSYmKGY9Yy5uYW1lLnNwbGl0KCI6IiksZz1kLnJlcXVlc3QsZT1nLmdldGZlYXR1cmVpbmZvLDA8Zi5sZW5ndGgmJihjLnByZWZpeD1mWzBdKSxkLmxheWVycy5wdXNoKGMpLHZvaWQgMD09PWMuZm9ybWF0cyYmKGMuZm9ybWF0cz1nLmdldG1hcC5mb3JtYXRzKSx2b2lkIDA9PT1jLmluZm9Gb3JtYXRzJiYKZSYmKGMuaW5mb0Zvcm1hdHM9ZS5mb3JtYXRzKSl9LEF0dHJpYnV0aW9uOmZ1bmN0aW9uKGEsYil7Yi5hdHRyaWJ1dGlvbj17fTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYi5hdHRyaWJ1dGlvbil9LExvZ29VUkw6ZnVuY3Rpb24oYSxiKXtiLmxvZ289e3dpZHRoOmEuZ2V0QXR0cmlidXRlKCJ3aWR0aCIpLGhlaWdodDphLmdldEF0dHJpYnV0ZSgiaGVpZ2h0Iil9O3RoaXMucmVhZENoaWxkTm9kZXMoYSxiLmxvZ28pfSxTdHlsZTpmdW5jdGlvbihhLGIpe3ZhciBjPXt9O2Iuc3R5bGVzLnB1c2goYyk7dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGMpfSxMZWdlbmRVUkw6ZnVuY3Rpb24oYSxiKXt2YXIgYz17d2lkdGg6YS5nZXRBdHRyaWJ1dGUoIndpZHRoIiksaGVpZ2h0OmEuZ2V0QXR0cmlidXRlKCJoZWlnaHQiKX07Yi5sZWdlbmQ9Yzt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYyl9LE1ldGFkYXRhVVJMOmZ1bmN0aW9uKGEsYil7dmFyIGM9e3R5cGU6YS5nZXRBdHRyaWJ1dGUoInR5cGUiKX07CmIubWV0YWRhdGFVUkxzLnB1c2goYyk7dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGMpfSxEYXRhVVJMOmZ1bmN0aW9uKGEsYil7Yi5kYXRhVVJMPXt9O3RoaXMucmVhZENoaWxkTm9kZXMoYSxiLmRhdGFVUkwpfSxGZWF0dXJlTGlzdFVSTDpmdW5jdGlvbihhLGIpe2IuZmVhdHVyZUxpc3RVUkw9e307dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGIuZmVhdHVyZUxpc3RVUkwpfSxBdXRob3JpdHlVUkw6ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLmdldEF0dHJpYnV0ZSgibmFtZSIpLGQ9e307dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGQpO2IuYXV0aG9yaXR5VVJMc1tjXT1kLmhyZWZ9LElkZW50aWZpZXI6ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLmdldEF0dHJpYnV0ZSgiYXV0aG9yaXR5Iik7Yi5pZGVudGlmaWVyc1tjXT10aGlzLmdldENoaWxkVmFsdWUoYSl9LEtleXdvcmRMaXN0OmZ1bmN0aW9uKGEsYil7dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGIpfSxTUlM6ZnVuY3Rpb24oYSxiKXtiLnNyc1t0aGlzLmdldENoaWxkVmFsdWUoYSldPQohMH19fSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkZvcm1hdC5XTVNDYXBhYmlsaXRpZXMudjEifSk7T3BlbkxheWVycy5Gb3JtYXQuV01TQ2FwYWJpbGl0aWVzLnYxXzE9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkZvcm1hdC5XTVNDYXBhYmlsaXRpZXMudjEse3JlYWRlcnM6e3dtczpPcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyh7V01UX01TX0NhcGFiaWxpdGllczpmdW5jdGlvbihhLGIpe3RoaXMucmVhZENoaWxkTm9kZXMoYSxiKX0sS2V5d29yZDpmdW5jdGlvbihhLGIpe2Iua2V5d29yZHMmJmIua2V5d29yZHMucHVzaCh0aGlzLmdldENoaWxkVmFsdWUoYSkpfSxEZXNjcmliZUxheWVyOmZ1bmN0aW9uKGEsYil7Yi5kZXNjcmliZWxheWVyPXtmb3JtYXRzOltdfTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYi5kZXNjcmliZWxheWVyKX0sR2V0TGVnZW5kR3JhcGhpYzpmdW5jdGlvbihhLGIpe2IuZ2V0bGVnZW5kZ3JhcGhpYz17Zm9ybWF0czpbXX07dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGIuZ2V0bGVnZW5kZ3JhcGhpYyl9LEdldFN0eWxlczpmdW5jdGlvbihhLGIpe2IuZ2V0c3R5bGVzPQp7Zm9ybWF0czpbXX07dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGIuZ2V0c3R5bGVzKX0sUHV0U3R5bGVzOmZ1bmN0aW9uKGEsYil7Yi5wdXRzdHlsZXM9e2Zvcm1hdHM6W119O3RoaXMucmVhZENoaWxkTm9kZXMoYSxiLnB1dHN0eWxlcyl9LFVzZXJEZWZpbmVkU3ltYm9saXphdGlvbjpmdW5jdGlvbihhLGIpe3ZhciBjPXtzdXBwb3J0U0xEOjE9PXBhcnNlSW50KGEuZ2V0QXR0cmlidXRlKCJTdXBwb3J0U0xEIikpLHVzZXJMYXllcjoxPT1wYXJzZUludChhLmdldEF0dHJpYnV0ZSgiVXNlckxheWVyIikpLHVzZXJTdHlsZToxPT1wYXJzZUludChhLmdldEF0dHJpYnV0ZSgiVXNlclN0eWxlIikpLHJlbW90ZVdGUzoxPT1wYXJzZUludChhLmdldEF0dHJpYnV0ZSgiUmVtb3RlV0ZTIikpfTtiLnVzZXJTeW1ib2xzPWN9LExhdExvbkJvdW5kaW5nQm94OmZ1bmN0aW9uKGEsYil7Yi5sbGJib3g9W3BhcnNlRmxvYXQoYS5nZXRBdHRyaWJ1dGUoIm1pbngiKSkscGFyc2VGbG9hdChhLmdldEF0dHJpYnV0ZSgibWlueSIpKSwKcGFyc2VGbG9hdChhLmdldEF0dHJpYnV0ZSgibWF4eCIpKSxwYXJzZUZsb2F0KGEuZ2V0QXR0cmlidXRlKCJtYXh5IikpXX0sQm91bmRpbmdCb3g6ZnVuY3Rpb24oYSxiKXt2YXIgYz1PcGVuTGF5ZXJzLkZvcm1hdC5XTVNDYXBhYmlsaXRpZXMudjEucHJvdG90eXBlLnJlYWRlcnMud21zLkJvdW5kaW5nQm94LmFwcGx5KHRoaXMsW2EsYl0pO2Muc3JzPWEuZ2V0QXR0cmlidXRlKCJTUlMiKTtiLmJib3hbYy5zcnNdPWN9LFNjYWxlSGludDpmdW5jdGlvbihhLGIpe3ZhciBjPWEuZ2V0QXR0cmlidXRlKCJtaW4iKSxkPWEuZ2V0QXR0cmlidXRlKCJtYXgiKSxlPU1hdGgucG93KDIsMC41KSxmPU9wZW5MYXllcnMuSU5DSEVTX1BFUl9VTklULm07MCE9YyYmKGIubWF4U2NhbGU9cGFyc2VGbG9hdCgoYy9lKmYqT3BlbkxheWVycy5ET1RTX1BFUl9JTkNIKS50b1ByZWNpc2lvbigxMykpKTtkIT1OdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkmJihiLm1pblNjYWxlPXBhcnNlRmxvYXQoKGQvZSpmKgpPcGVuTGF5ZXJzLkRPVFNfUEVSX0lOQ0gpLnRvUHJlY2lzaW9uKDEzKSkpfSxEaW1lbnNpb246ZnVuY3Rpb24oYSxiKXt2YXIgYz17bmFtZTphLmdldEF0dHJpYnV0ZSgibmFtZSIpLnRvTG93ZXJDYXNlKCksdW5pdHM6YS5nZXRBdHRyaWJ1dGUoInVuaXRzIiksdW5pdHN5bWJvbDphLmdldEF0dHJpYnV0ZSgidW5pdFN5bWJvbCIpfTtiLmRpbWVuc2lvbnNbYy5uYW1lXT1jfSxFeHRlbnQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLmdldEF0dHJpYnV0ZSgibmFtZSIpLnRvTG93ZXJDYXNlKCk7aWYoYyBpbiBiLmRpbWVuc2lvbnMpe2M9Yi5kaW1lbnNpb25zW2NdO2MubmVhcmVzdFZhbD0iMSI9PT1hLmdldEF0dHJpYnV0ZSgibmVhcmVzdFZhbHVlIik7Yy5tdWx0aXBsZVZhbD0iMSI9PT1hLmdldEF0dHJpYnV0ZSgibXVsdGlwbGVWYWx1ZXMiKTtjLmN1cnJlbnQ9IjEiPT09YS5nZXRBdHRyaWJ1dGUoImN1cnJlbnQiKTtjWyJkZWZhdWx0Il09YS5nZXRBdHRyaWJ1dGUoImRlZmF1bHQiKXx8CiIiO3ZhciBkPXRoaXMuZ2V0Q2hpbGRWYWx1ZShhKTtjLnZhbHVlcz1kLnNwbGl0KCIsIil9fX0sT3BlbkxheWVycy5Gb3JtYXQuV01TQ2FwYWJpbGl0aWVzLnYxLnByb3RvdHlwZS5yZWFkZXJzLndtcyl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuRm9ybWF0LldNU0NhcGFiaWxpdGllcy52MV8xIn0pO09wZW5MYXllcnMuRm9ybWF0LldNU0NhcGFiaWxpdGllcy52MV8xXzA9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkZvcm1hdC5XTVNDYXBhYmlsaXRpZXMudjFfMSx7dmVyc2lvbjoiMS4xLjAiLHJlYWRlcnM6e3dtczpPcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyh7U1JTOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPXRoaXMuZ2V0Q2hpbGRWYWx1ZShhKS5zcGxpdCgvICsvKSxkPTAsZT1jLmxlbmd0aDtkPGU7ZCsrKWIuc3JzW2NbZF1dPSEwfX0sT3BlbkxheWVycy5Gb3JtYXQuV01TQ2FwYWJpbGl0aWVzLnYxXzEucHJvdG90eXBlLnJlYWRlcnMud21zKX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Gb3JtYXQuV01TQ2FwYWJpbGl0aWVzLnYxXzFfMCJ9KTtPcGVuTGF5ZXJzLlByb3RvY29sLldGUy52MT1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuUHJvdG9jb2wse3ZlcnNpb246bnVsbCxzcnNOYW1lOiJFUFNHOjQzMjYiLGZlYXR1cmVUeXBlOm51bGwsZmVhdHVyZU5TOm51bGwsZ2VvbWV0cnlOYW1lOiJ0aGVfZ2VvbSIsc2NoZW1hOm51bGwsZmVhdHVyZVByZWZpeDoiZmVhdHVyZSIsZm9ybWF0T3B0aW9uczpudWxsLHJlYWRGb3JtYXQ6bnVsbCxyZWFkT3B0aW9uczpudWxsLGluaXRpYWxpemU6ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5Qcm90b2NvbC5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLFthXSk7YS5mb3JtYXR8fCh0aGlzLmZvcm1hdD1PcGVuTGF5ZXJzLkZvcm1hdC5XRlNUKE9wZW5MYXllcnMuVXRpbC5leHRlbmQoe3ZlcnNpb246dGhpcy52ZXJzaW9uLGZlYXR1cmVUeXBlOnRoaXMuZmVhdHVyZVR5cGUsZmVhdHVyZU5TOnRoaXMuZmVhdHVyZU5TLGZlYXR1cmVQcmVmaXg6dGhpcy5mZWF0dXJlUHJlZml4LGdlb21ldHJ5TmFtZTp0aGlzLmdlb21ldHJ5TmFtZSwKc3JzTmFtZTp0aGlzLnNyc05hbWUsc2NoZW1hOnRoaXMuc2NoZW1hfSx0aGlzLmZvcm1hdE9wdGlvbnMpKSk7IWEuZ2VvbWV0cnlOYW1lJiYxPHBhcnNlRmxvYXQodGhpcy5mb3JtYXQudmVyc2lvbikmJnRoaXMuc2V0R2VvbWV0cnlOYW1lKG51bGwpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5vcHRpb25zJiYhdGhpcy5vcHRpb25zLmZvcm1hdCYmdGhpcy5mb3JtYXQuZGVzdHJveSgpO3RoaXMuZm9ybWF0PW51bGw7T3BlbkxheWVycy5Qcm90b2NvbC5wcm90b3R5cGUuZGVzdHJveS5hcHBseSh0aGlzKX0scmVhZDpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLlByb3RvY29sLnByb3RvdHlwZS5yZWFkLmFwcGx5KHRoaXMsYXJndW1lbnRzKTthPU9wZW5MYXllcnMuVXRpbC5leHRlbmQoe30sYSk7T3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoYSx0aGlzLm9wdGlvbnN8fHt9KTt2YXIgYj1uZXcgT3BlbkxheWVycy5Qcm90b2NvbC5SZXNwb25zZSh7cmVxdWVzdFR5cGU6InJlYWQifSksCmM9T3BlbkxheWVycy5Gb3JtYXQuWE1MLnByb3RvdHlwZS53cml0ZS5hcHBseSh0aGlzLmZvcm1hdCxbdGhpcy5mb3JtYXQud3JpdGVOb2RlKCJ3ZnM6R2V0RmVhdHVyZSIsYSldKTtiLnByaXY9T3BlbkxheWVycy5SZXF1ZXN0LlBPU1Qoe3VybDphLnVybCxjYWxsYmFjazp0aGlzLmNyZWF0ZUNhbGxiYWNrKHRoaXMuaGFuZGxlUmVhZCxiLGEpLHBhcmFtczphLnBhcmFtcyxoZWFkZXJzOmEuaGVhZGVycyxkYXRhOmN9KTtyZXR1cm4gYn0sc2V0RmVhdHVyZVR5cGU6ZnVuY3Rpb24oYSl7dGhpcy5mZWF0dXJlVHlwZT1hO3RoaXMuZm9ybWF0LmZlYXR1cmVUeXBlPWF9LHNldEdlb21ldHJ5TmFtZTpmdW5jdGlvbihhKXt0aGlzLmdlb21ldHJ5TmFtZT1hO3RoaXMuZm9ybWF0Lmdlb21ldHJ5TmFtZT1hfSxoYW5kbGVSZWFkOmZ1bmN0aW9uKGEsYil7Yj1PcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHt9LGIpO09wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKGIsdGhpcy5vcHRpb25zKTtpZihiLmNhbGxiYWNrKXt2YXIgYz0KYS5wcml2OzIwMDw9Yy5zdGF0dXMmJjMwMD5jLnN0YXR1cz8oYz10aGlzLnBhcnNlUmVzcG9uc2UoYyxiLnJlYWRPcHRpb25zKSkmJiExIT09Yy5zdWNjZXNzPyhiLnJlYWRPcHRpb25zJiYib2JqZWN0Ij09Yi5yZWFkT3B0aW9ucy5vdXRwdXQ/T3BlbkxheWVycy5VdGlsLmV4dGVuZChhLGMpOmEuZmVhdHVyZXM9YyxhLmNvZGU9T3BlbkxheWVycy5Qcm90b2NvbC5SZXNwb25zZS5TVUNDRVNTKTooYS5jb2RlPU9wZW5MYXllcnMuUHJvdG9jb2wuUmVzcG9uc2UuRkFJTFVSRSxhLmVycm9yPWMpOmEuY29kZT1PcGVuTGF5ZXJzLlByb3RvY29sLlJlc3BvbnNlLkZBSUxVUkU7Yi5jYWxsYmFjay5jYWxsKGIuc2NvcGUsYSl9fSxwYXJzZVJlc3BvbnNlOmZ1bmN0aW9uKGEsYil7dmFyIGM9YS5yZXNwb25zZVhNTDtjJiZjLmRvY3VtZW50RWxlbWVudHx8KGM9YS5yZXNwb25zZVRleHQpO2lmKCFjfHwwPj1jLmxlbmd0aClyZXR1cm4gbnVsbDtjPW51bGwhPT10aGlzLnJlYWRGb3JtYXQ/dGhpcy5yZWFkRm9ybWF0LnJlYWQoYyk6CnRoaXMuZm9ybWF0LnJlYWQoYyxiKTtpZighdGhpcy5mZWF0dXJlTlMpe3ZhciBkPXRoaXMucmVhZEZvcm1hdHx8dGhpcy5mb3JtYXQ7dGhpcy5mZWF0dXJlTlM9ZC5mZWF0dXJlTlM7ZC5hdXRvQ29uZmlnPSExO3RoaXMuZ2VvbWV0cnlOYW1lfHx0aGlzLnNldEdlb21ldHJ5TmFtZShkLmdlb21ldHJ5TmFtZSl9cmV0dXJuIGN9LGNvbW1pdDpmdW5jdGlvbihhLGIpe2I9T3BlbkxheWVycy5VdGlsLmV4dGVuZCh7fSxiKTtPcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyhiLHRoaXMub3B0aW9ucyk7dmFyIGM9bmV3IE9wZW5MYXllcnMuUHJvdG9jb2wuUmVzcG9uc2Uoe3JlcXVlc3RUeXBlOiJjb21taXQiLHJlcUZlYXR1cmVzOmF9KTtjLnByaXY9T3BlbkxheWVycy5SZXF1ZXN0LlBPU1Qoe3VybDpiLnVybCxoZWFkZXJzOmIuaGVhZGVycyxkYXRhOnRoaXMuZm9ybWF0LndyaXRlKGEsYiksY2FsbGJhY2s6dGhpcy5jcmVhdGVDYWxsYmFjayh0aGlzLmhhbmRsZUNvbW1pdCxjLGIpfSk7CnJldHVybiBjfSxoYW5kbGVDb21taXQ6ZnVuY3Rpb24oYSxiKXtpZihiLmNhbGxiYWNrKXt2YXIgYz1hLnByaXYsZD1jLnJlc3BvbnNlWE1MO2QmJmQuZG9jdW1lbnRFbGVtZW50fHwoZD1jLnJlc3BvbnNlVGV4dCk7Yz10aGlzLmZvcm1hdC5yZWFkKGQpfHx7fTthLmluc2VydElkcz1jLmluc2VydElkc3x8W107Yy5zdWNjZXNzP2EuY29kZT1PcGVuTGF5ZXJzLlByb3RvY29sLlJlc3BvbnNlLlNVQ0NFU1M6KGEuY29kZT1PcGVuTGF5ZXJzLlByb3RvY29sLlJlc3BvbnNlLkZBSUxVUkUsYS5lcnJvcj1jKTtiLmNhbGxiYWNrLmNhbGwoYi5zY29wZSxhKX19LGZpbHRlckRlbGV0ZTpmdW5jdGlvbihhLGIpe2I9T3BlbkxheWVycy5VdGlsLmV4dGVuZCh7fSxiKTtPcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyhiLHRoaXMub3B0aW9ucyk7bmV3IE9wZW5MYXllcnMuUHJvdG9jb2wuUmVzcG9uc2Uoe3JlcXVlc3RUeXBlOiJjb21taXQifSk7dmFyIGM9dGhpcy5mb3JtYXQuY3JlYXRlRWxlbWVudE5TUGx1cygid2ZzOlRyYW5zYWN0aW9uIiwKe2F0dHJpYnV0ZXM6e3NlcnZpY2U6IldGUyIsdmVyc2lvbjp0aGlzLnZlcnNpb259fSksZD10aGlzLmZvcm1hdC5jcmVhdGVFbGVtZW50TlNQbHVzKCJ3ZnM6RGVsZXRlIix7YXR0cmlidXRlczp7dHlwZU5hbWU6KGIuZmVhdHVyZU5TP3RoaXMuZmVhdHVyZVByZWZpeCsiOiI6IiIpK2IuZmVhdHVyZVR5cGV9fSk7Yi5mZWF0dXJlTlMmJmQuc2V0QXR0cmlidXRlKCJ4bWxuczoiK3RoaXMuZmVhdHVyZVByZWZpeCxiLmZlYXR1cmVOUyk7dmFyIGU9dGhpcy5mb3JtYXQud3JpdGVOb2RlKCJvZ2M6RmlsdGVyIixhKTtkLmFwcGVuZENoaWxkKGUpO2MuYXBwZW5kQ2hpbGQoZCk7Yz1PcGVuTGF5ZXJzLkZvcm1hdC5YTUwucHJvdG90eXBlLndyaXRlLmFwcGx5KHRoaXMuZm9ybWF0LFtjXSk7cmV0dXJuIE9wZW5MYXllcnMuUmVxdWVzdC5QT1NUKHt1cmw6dGhpcy51cmwsY2FsbGJhY2s6Yi5jYWxsYmFja3x8ZnVuY3Rpb24oKXt9LGRhdGE6Y30pfSxhYm9ydDpmdW5jdGlvbihhKXthJiZhLnByaXYuYWJvcnQoKX0sCkNMQVNTX05BTUU6Ik9wZW5MYXllcnMuUHJvdG9jb2wuV0ZTLnYxIn0pO09wZW5MYXllcnMuSGFuZGxlci5GZWF0dXJlPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5IYW5kbGVyLHtFVkVOVE1BUDp7Y2xpY2s6eyJpbiI6ImNsaWNrIixvdXQ6ImNsaWNrb3V0In0sbW91c2Vtb3ZlOnsiaW4iOiJvdmVyIixvdXQ6Im91dCJ9LGRibGNsaWNrOnsiaW4iOiJkYmxjbGljayIsb3V0Om51bGx9LG1vdXNlZG93bjp7ImluIjpudWxsLG91dDpudWxsfSxtb3VzZXVwOnsiaW4iOm51bGwsb3V0Om51bGx9LHRvdWNoc3RhcnQ6eyJpbiI6ImNsaWNrIixvdXQ6ImNsaWNrb3V0In19LGZlYXR1cmU6bnVsbCxsYXN0RmVhdHVyZTpudWxsLGRvd246bnVsbCx1cDpudWxsLGNsaWNrVG9sZXJhbmNlOjQsZ2VvbWV0cnlUeXBlczpudWxsLHN0b3BDbGljazohMCxzdG9wRG93bjohMCxzdG9wVXA6ITEsaW5pdGlhbGl6ZTpmdW5jdGlvbihhLGIsYyxkKXtPcGVuTGF5ZXJzLkhhbmRsZXIucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxbYSxjLGRdKTt0aGlzLmxheWVyPQpifSx0b3VjaHN0YXJ0OmZ1bmN0aW9uKGEpe3RoaXMuc3RhcnRUb3VjaCgpO3JldHVybiBPcGVuTGF5ZXJzLkV2ZW50LmlzTXVsdGlUb3VjaChhKT8hMDp0aGlzLm1vdXNlZG93bihhKX0sdG91Y2htb3ZlOmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuRXZlbnQucHJldmVudERlZmF1bHQoYSl9LG1vdXNlZG93bjpmdW5jdGlvbihhKXtpZihPcGVuTGF5ZXJzLkV2ZW50LmlzTGVmdENsaWNrKGEpfHxPcGVuTGF5ZXJzLkV2ZW50LmlzU2luZ2xlVG91Y2goYSkpdGhpcy5kb3duPWEueHk7cmV0dXJuIHRoaXMuaGFuZGxlKGEpPyF0aGlzLnN0b3BEb3duOiEwfSxtb3VzZXVwOmZ1bmN0aW9uKGEpe3RoaXMudXA9YS54eTtyZXR1cm4gdGhpcy5oYW5kbGUoYSk/IXRoaXMuc3RvcFVwOiEwfSxjbGljazpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5oYW5kbGUoYSk/IXRoaXMuc3RvcENsaWNrOiEwfSxtb3VzZW1vdmU6ZnVuY3Rpb24oYSl7aWYoIXRoaXMuY2FsbGJhY2tzLm92ZXImJiF0aGlzLmNhbGxiYWNrcy5vdXQpcmV0dXJuITA7CnRoaXMuaGFuZGxlKGEpO3JldHVybiEwfSxkYmxjbGljazpmdW5jdGlvbihhKXtyZXR1cm4hdGhpcy5oYW5kbGUoYSl9LGdlb21ldHJ5VHlwZU1hdGNoZXM6ZnVuY3Rpb24oYSl7cmV0dXJuIG51bGw9PXRoaXMuZ2VvbWV0cnlUeXBlc3x8LTE8T3BlbkxheWVycy5VdGlsLmluZGV4T2YodGhpcy5nZW9tZXRyeVR5cGVzLGEuZ2VvbWV0cnkuQ0xBU1NfTkFNRSl9LGhhbmRsZTpmdW5jdGlvbihhKXt0aGlzLmZlYXR1cmUmJiF0aGlzLmZlYXR1cmUubGF5ZXImJih0aGlzLmZlYXR1cmU9bnVsbCk7dmFyIGI9YS50eXBlLGM9ITEsZD0hIXRoaXMuZmVhdHVyZSxlPSJjbGljayI9PWJ8fCJkYmxjbGljayI9PWJ8fCJ0b3VjaHN0YXJ0Ij09YjsodGhpcy5mZWF0dXJlPXRoaXMubGF5ZXIuZ2V0RmVhdHVyZUZyb21FdmVudChhKSkmJiF0aGlzLmZlYXR1cmUubGF5ZXImJih0aGlzLmZlYXR1cmU9bnVsbCk7dGhpcy5sYXN0RmVhdHVyZSYmIXRoaXMubGFzdEZlYXR1cmUubGF5ZXImJih0aGlzLmxhc3RGZWF0dXJlPQpudWxsKTt0aGlzLmZlYXR1cmU/KCJ0b3VjaHN0YXJ0Ij09PWImJk9wZW5MYXllcnMuRXZlbnQucHJldmVudERlZmF1bHQoYSksYT10aGlzLmZlYXR1cmUhPXRoaXMubGFzdEZlYXR1cmUsdGhpcy5nZW9tZXRyeVR5cGVNYXRjaGVzKHRoaXMuZmVhdHVyZSk/KGQmJmE/KHRoaXMubGFzdEZlYXR1cmUmJnRoaXMudHJpZ2dlckNhbGxiYWNrKGIsIm91dCIsW3RoaXMubGFzdEZlYXR1cmVdKSx0aGlzLnRyaWdnZXJDYWxsYmFjayhiLCJpbiIsW3RoaXMuZmVhdHVyZV0pKTpkJiYhZXx8dGhpcy50cmlnZ2VyQ2FsbGJhY2soYiwiaW4iLFt0aGlzLmZlYXR1cmVdKSx0aGlzLmxhc3RGZWF0dXJlPXRoaXMuZmVhdHVyZSxjPSEwKToodGhpcy5sYXN0RmVhdHVyZSYmKGQmJmF8fGUpJiZ0aGlzLnRyaWdnZXJDYWxsYmFjayhiLCJvdXQiLFt0aGlzLmxhc3RGZWF0dXJlXSksdGhpcy5mZWF0dXJlPW51bGwpKTp0aGlzLmxhc3RGZWF0dXJlJiYoZHx8ZSkmJnRoaXMudHJpZ2dlckNhbGxiYWNrKGIsIm91dCIsClt0aGlzLmxhc3RGZWF0dXJlXSk7cmV0dXJuIGN9LHRyaWdnZXJDYWxsYmFjazpmdW5jdGlvbihhLGIsYyl7aWYoYj10aGlzLkVWRU5UTUFQW2FdW2JdKSJjbGljayI9PWEmJnRoaXMudXAmJnRoaXMuZG93bj8oTWF0aC5zcXJ0KE1hdGgucG93KHRoaXMudXAueC10aGlzLmRvd24ueCwyKStNYXRoLnBvdyh0aGlzLnVwLnktdGhpcy5kb3duLnksMikpPD10aGlzLmNsaWNrVG9sZXJhbmNlJiZ0aGlzLmNhbGxiYWNrKGIsYyksdGhpcy51cD10aGlzLmRvd249bnVsbCk6dGhpcy5jYWxsYmFjayhiLGMpfSxhY3RpdmF0ZTpmdW5jdGlvbigpe3ZhciBhPSExO09wZW5MYXllcnMuSGFuZGxlci5wcm90b3R5cGUuYWN0aXZhdGUuYXBwbHkodGhpcyxhcmd1bWVudHMpJiYodGhpcy5tb3ZlTGF5ZXJUb1RvcCgpLHRoaXMubWFwLmV2ZW50cy5vbih7cmVtb3ZlbGF5ZXI6dGhpcy5oYW5kbGVNYXBFdmVudHMsY2hhbmdlbGF5ZXI6dGhpcy5oYW5kbGVNYXBFdmVudHMsc2NvcGU6dGhpc30pLGE9ITApOwpyZXR1cm4gYX0sZGVhY3RpdmF0ZTpmdW5jdGlvbigpe3ZhciBhPSExO09wZW5MYXllcnMuSGFuZGxlci5wcm90b3R5cGUuZGVhY3RpdmF0ZS5hcHBseSh0aGlzLGFyZ3VtZW50cykmJih0aGlzLm1vdmVMYXllckJhY2soKSx0aGlzLnVwPXRoaXMuZG93bj10aGlzLmxhc3RGZWF0dXJlPXRoaXMuZmVhdHVyZT1udWxsLHRoaXMubWFwLmV2ZW50cy51bih7cmVtb3ZlbGF5ZXI6dGhpcy5oYW5kbGVNYXBFdmVudHMsY2hhbmdlbGF5ZXI6dGhpcy5oYW5kbGVNYXBFdmVudHMsc2NvcGU6dGhpc30pLGE9ITApO3JldHVybiBhfSxoYW5kbGVNYXBFdmVudHM6ZnVuY3Rpb24oYSl7InJlbW92ZWxheWVyIiE9YS50eXBlJiYib3JkZXIiIT1hLnByb3BlcnR5fHx0aGlzLm1vdmVMYXllclRvVG9wKCl9LG1vdmVMYXllclRvVG9wOmZ1bmN0aW9uKCl7dmFyIGE9TWF0aC5tYXgodGhpcy5tYXAuWl9JTkRFWF9CQVNFLkZlYXR1cmUtMSx0aGlzLmxheWVyLmdldFpJbmRleCgpKSsxO3RoaXMubGF5ZXIuc2V0WkluZGV4KGEpfSwKbW92ZUxheWVyQmFjazpmdW5jdGlvbigpe3ZhciBhPXRoaXMubGF5ZXIuZ2V0WkluZGV4KCktMTthPj10aGlzLm1hcC5aX0lOREVYX0JBU0UuRmVhdHVyZT90aGlzLmxheWVyLnNldFpJbmRleChhKTp0aGlzLm1hcC5zZXRMYXllclpJbmRleCh0aGlzLmxheWVyLHRoaXMubWFwLmdldExheWVySW5kZXgodGhpcy5sYXllcikpfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkhhbmRsZXIuRmVhdHVyZSJ9KTtPcGVuTGF5ZXJzLkxheWVyLlZlY3Rvci5Sb290Q29udGFpbmVyPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5MYXllci5WZWN0b3Ise2Rpc3BsYXlJbkxheWVyU3dpdGNoZXI6ITEsbGF5ZXJzOm51bGwsZGlzcGxheTpmdW5jdGlvbigpe30sZ2V0RmVhdHVyZUZyb21FdmVudDpmdW5jdGlvbihhKXtmb3IodmFyIGI9dGhpcy5sYXllcnMsYyxkPTA7ZDxiLmxlbmd0aDtkKyspaWYoYz1iW2RdLmdldEZlYXR1cmVGcm9tRXZlbnQoYSkpcmV0dXJuIGN9LHNldE1hcDpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLkxheWVyLlZlY3Rvci5wcm90b3R5cGUuc2V0TWFwLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLmNvbGxlY3RSb290cygpO2EuZXZlbnRzLnJlZ2lzdGVyKCJjaGFuZ2VsYXllciIsdGhpcyx0aGlzLmhhbmRsZUNoYW5nZUxheWVyKX0scmVtb3ZlTWFwOmZ1bmN0aW9uKGEpe2EuZXZlbnRzLnVucmVnaXN0ZXIoImNoYW5nZWxheWVyIix0aGlzLHRoaXMuaGFuZGxlQ2hhbmdlTGF5ZXIpOwp0aGlzLnJlc2V0Um9vdHMoKTtPcGVuTGF5ZXJzLkxheWVyLlZlY3Rvci5wcm90b3R5cGUucmVtb3ZlTWFwLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sY29sbGVjdFJvb3RzOmZ1bmN0aW9uKCl7Zm9yKHZhciBhLGI9MDtiPHRoaXMubWFwLmxheWVycy5sZW5ndGg7KytiKWE9dGhpcy5tYXAubGF5ZXJzW2JdLC0xIT1PcGVuTGF5ZXJzLlV0aWwuaW5kZXhPZih0aGlzLmxheWVycyxhKSYmYS5yZW5kZXJlci5tb3ZlUm9vdCh0aGlzLnJlbmRlcmVyKX0scmVzZXRSb290czpmdW5jdGlvbigpe2Zvcih2YXIgYSxiPTA7Yjx0aGlzLmxheWVycy5sZW5ndGg7KytiKWE9dGhpcy5sYXllcnNbYl0sdGhpcy5yZW5kZXJlciYmYS5yZW5kZXJlci5nZXRSZW5kZXJMYXllcklkKCk9PXRoaXMuaWQmJnRoaXMucmVuZGVyZXIubW92ZVJvb3QoYS5yZW5kZXJlcil9LGhhbmRsZUNoYW5nZUxheWVyOmZ1bmN0aW9uKGEpe3ZhciBiPWEubGF5ZXI7Im9yZGVyIj09YS5wcm9wZXJ0eSYmLTEhPU9wZW5MYXllcnMuVXRpbC5pbmRleE9mKHRoaXMubGF5ZXJzLApiKSYmKHRoaXMucmVzZXRSb290cygpLHRoaXMuY29sbGVjdFJvb3RzKCkpfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkxheWVyLlZlY3Rvci5Sb290Q29udGFpbmVyIn0pO09wZW5MYXllcnMuQ29udHJvbC5TZWxlY3RGZWF0dXJlPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Db250cm9sLHttdWx0aXBsZUtleTpudWxsLHRvZ2dsZUtleTpudWxsLG11bHRpcGxlOiExLGNsaWNrb3V0OiEwLHRvZ2dsZTohMSxob3ZlcjohMSxoaWdobGlnaHRPbmx5OiExLGJveDohMSxvbkJlZm9yZVNlbGVjdDpmdW5jdGlvbigpe30sb25TZWxlY3Q6ZnVuY3Rpb24oKXt9LG9uVW5zZWxlY3Q6ZnVuY3Rpb24oKXt9LHNjb3BlOm51bGwsZ2VvbWV0cnlUeXBlczpudWxsLGxheWVyOm51bGwsbGF5ZXJzOm51bGwsY2FsbGJhY2tzOm51bGwsc2VsZWN0U3R5bGU6bnVsbCxyZW5kZXJJbnRlbnQ6InNlbGVjdCIsaGFuZGxlcnM6bnVsbCxpbml0aWFsaXplOmZ1bmN0aW9uKGEsYil7T3BlbkxheWVycy5Db250cm9sLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsW2JdKTtudWxsPT09dGhpcy5zY29wZSYmKHRoaXMuc2NvcGU9dGhpcyk7dGhpcy5pbml0TGF5ZXIoYSk7dmFyIGM9CntjbGljazp0aGlzLmNsaWNrRmVhdHVyZSxjbGlja291dDp0aGlzLmNsaWNrb3V0RmVhdHVyZX07dGhpcy5ob3ZlciYmKGMub3Zlcj10aGlzLm92ZXJGZWF0dXJlLGMub3V0PXRoaXMub3V0RmVhdHVyZSk7dGhpcy5jYWxsYmFja3M9T3BlbkxheWVycy5VdGlsLmV4dGVuZChjLHRoaXMuY2FsbGJhY2tzKTt0aGlzLmhhbmRsZXJzPXtmZWF0dXJlOm5ldyBPcGVuTGF5ZXJzLkhhbmRsZXIuRmVhdHVyZSh0aGlzLHRoaXMubGF5ZXIsdGhpcy5jYWxsYmFja3Mse2dlb21ldHJ5VHlwZXM6dGhpcy5nZW9tZXRyeVR5cGVzfSl9O3RoaXMuYm94JiYodGhpcy5oYW5kbGVycy5ib3g9bmV3IE9wZW5MYXllcnMuSGFuZGxlci5Cb3godGhpcyx7ZG9uZTp0aGlzLnNlbGVjdEJveH0se2JveERpdkNsYXNzTmFtZToib2xIYW5kbGVyQm94U2VsZWN0RmVhdHVyZSJ9KSl9LGluaXRMYXllcjpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLlV0aWwuaXNBcnJheShhKT8odGhpcy5sYXllcnM9YSx0aGlzLmxheWVyPQpuZXcgT3BlbkxheWVycy5MYXllci5WZWN0b3IuUm9vdENvbnRhaW5lcih0aGlzLmlkKyJfY29udGFpbmVyIix7bGF5ZXJzOmF9KSk6dGhpcy5sYXllcj1hfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5hY3RpdmUmJnRoaXMubGF5ZXJzJiZ0aGlzLm1hcC5yZW1vdmVMYXllcih0aGlzLmxheWVyKTtPcGVuTGF5ZXJzLkNvbnRyb2wucHJvdG90eXBlLmRlc3Ryb3kuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMubGF5ZXJzJiZ0aGlzLmxheWVyLmRlc3Ryb3koKX0sYWN0aXZhdGU6ZnVuY3Rpb24oKXt0aGlzLmFjdGl2ZXx8KHRoaXMubGF5ZXJzJiZ0aGlzLm1hcC5hZGRMYXllcih0aGlzLmxheWVyKSx0aGlzLmhhbmRsZXJzLmZlYXR1cmUuYWN0aXZhdGUoKSx0aGlzLmJveCYmdGhpcy5oYW5kbGVycy5ib3gmJnRoaXMuaGFuZGxlcnMuYm94LmFjdGl2YXRlKCkpO3JldHVybiBPcGVuTGF5ZXJzLkNvbnRyb2wucHJvdG90eXBlLmFjdGl2YXRlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sZGVhY3RpdmF0ZTpmdW5jdGlvbigpe3RoaXMuYWN0aXZlJiYKKHRoaXMuaGFuZGxlcnMuZmVhdHVyZS5kZWFjdGl2YXRlKCksdGhpcy5oYW5kbGVycy5ib3gmJnRoaXMuaGFuZGxlcnMuYm94LmRlYWN0aXZhdGUoKSx0aGlzLmxheWVycyYmdGhpcy5tYXAucmVtb3ZlTGF5ZXIodGhpcy5sYXllcikpO3JldHVybiBPcGVuTGF5ZXJzLkNvbnRyb2wucHJvdG90eXBlLmRlYWN0aXZhdGUuYXBwbHkodGhpcyxhcmd1bWVudHMpfSx1bnNlbGVjdEFsbDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmxheWVyc3x8W3RoaXMubGF5ZXJdLGMsZCxlLGY7Zm9yKGU9MDtlPGIubGVuZ3RoOysrZSlpZihjPWJbZV0sZj0wLG51bGwhPWMuc2VsZWN0ZWRGZWF0dXJlcylmb3IoO2Muc2VsZWN0ZWRGZWF0dXJlcy5sZW5ndGg+ZjspZD1jLnNlbGVjdGVkRmVhdHVyZXNbZl0sYSYmYS5leGNlcHQ9PWQ/KytmOnRoaXMudW5zZWxlY3QoZCl9LGNsaWNrRmVhdHVyZTpmdW5jdGlvbihhKXt0aGlzLmhvdmVyfHwoLTE8T3BlbkxheWVycy5VdGlsLmluZGV4T2YoYS5sYXllci5zZWxlY3RlZEZlYXR1cmVzLAphKT90aGlzLnRvZ2dsZVNlbGVjdCgpP3RoaXMudW5zZWxlY3QoYSk6dGhpcy5tdWx0aXBsZVNlbGVjdCgpfHx0aGlzLnVuc2VsZWN0QWxsKHtleGNlcHQ6YX0pOih0aGlzLm11bHRpcGxlU2VsZWN0KCl8fHRoaXMudW5zZWxlY3RBbGwoe2V4Y2VwdDphfSksdGhpcy5zZWxlY3QoYSkpKX0sbXVsdGlwbGVTZWxlY3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tdWx0aXBsZXx8dGhpcy5oYW5kbGVycy5mZWF0dXJlLmV2dCYmdGhpcy5oYW5kbGVycy5mZWF0dXJlLmV2dFt0aGlzLm11bHRpcGxlS2V5XX0sdG9nZ2xlU2VsZWN0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudG9nZ2xlfHx0aGlzLmhhbmRsZXJzLmZlYXR1cmUuZXZ0JiZ0aGlzLmhhbmRsZXJzLmZlYXR1cmUuZXZ0W3RoaXMudG9nZ2xlS2V5XX0sY2xpY2tvdXRGZWF0dXJlOmZ1bmN0aW9uKGEpeyF0aGlzLmhvdmVyJiZ0aGlzLmNsaWNrb3V0JiZ0aGlzLnVuc2VsZWN0QWxsKCl9LG92ZXJGZWF0dXJlOmZ1bmN0aW9uKGEpe3ZhciBiPQphLmxheWVyO3RoaXMuaG92ZXImJih0aGlzLmhpZ2hsaWdodE9ubHk/dGhpcy5oaWdobGlnaHQoYSk6LTE9PU9wZW5MYXllcnMuVXRpbC5pbmRleE9mKGIuc2VsZWN0ZWRGZWF0dXJlcyxhKSYmdGhpcy5zZWxlY3QoYSkpfSxvdXRGZWF0dXJlOmZ1bmN0aW9uKGEpe2lmKHRoaXMuaG92ZXIpaWYodGhpcy5oaWdobGlnaHRPbmx5KXtpZihhLl9sYXN0SGlnaGxpZ2h0ZXI9PXRoaXMuaWQpaWYoYS5fcHJldkhpZ2hsaWdodGVyJiZhLl9wcmV2SGlnaGxpZ2h0ZXIhPXRoaXMuaWQpe2RlbGV0ZSBhLl9sYXN0SGlnaGxpZ2h0ZXI7dmFyIGI9dGhpcy5tYXAuZ2V0Q29udHJvbChhLl9wcmV2SGlnaGxpZ2h0ZXIpO2ImJmIuaGlnaGxpZ2h0KGEpfWVsc2UgdGhpcy51bmhpZ2hsaWdodChhKX1lbHNlIHRoaXMudW5zZWxlY3QoYSl9LGhpZ2hsaWdodDpmdW5jdGlvbihhKXt2YXIgYj1hLmxheWVyOyExIT09dGhpcy5ldmVudHMudHJpZ2dlckV2ZW50KCJiZWZvcmVmZWF0dXJlaGlnaGxpZ2h0ZWQiLHtmZWF0dXJlOmF9KSYmCihhLl9wcmV2SGlnaGxpZ2h0ZXI9YS5fbGFzdEhpZ2hsaWdodGVyLGEuX2xhc3RIaWdobGlnaHRlcj10aGlzLmlkLGIuZHJhd0ZlYXR1cmUoYSx0aGlzLnNlbGVjdFN0eWxlfHx0aGlzLnJlbmRlckludGVudCksdGhpcy5ldmVudHMudHJpZ2dlckV2ZW50KCJmZWF0dXJlaGlnaGxpZ2h0ZWQiLHtmZWF0dXJlOmF9KSl9LHVuaGlnaGxpZ2h0OmZ1bmN0aW9uKGEpe3ZhciBiPWEubGF5ZXI7dm9pZCAwPT1hLl9wcmV2SGlnaGxpZ2h0ZXI/ZGVsZXRlIGEuX2xhc3RIaWdobGlnaHRlcjooYS5fcHJldkhpZ2hsaWdodGVyIT10aGlzLmlkJiYoYS5fbGFzdEhpZ2hsaWdodGVyPWEuX3ByZXZIaWdobGlnaHRlciksZGVsZXRlIGEuX3ByZXZIaWdobGlnaHRlcik7Yi5kcmF3RmVhdHVyZShhLGEuc3R5bGV8fGEubGF5ZXIuc3R5bGV8fCJkZWZhdWx0Iik7dGhpcy5ldmVudHMudHJpZ2dlckV2ZW50KCJmZWF0dXJldW5oaWdobGlnaHRlZCIse2ZlYXR1cmU6YX0pfSxzZWxlY3Q6ZnVuY3Rpb24oYSl7dmFyIGI9CnRoaXMub25CZWZvcmVTZWxlY3QuY2FsbCh0aGlzLnNjb3BlLGEpLGM9YS5sYXllcjshMSE9PWImJihiPWMuZXZlbnRzLnRyaWdnZXJFdmVudCgiYmVmb3JlZmVhdHVyZXNlbGVjdGVkIix7ZmVhdHVyZTphfSksITEhPT1iJiYoYy5zZWxlY3RlZEZlYXR1cmVzLnB1c2goYSksdGhpcy5oaWdobGlnaHQoYSksdGhpcy5oYW5kbGVycy5mZWF0dXJlLmxhc3RGZWF0dXJlfHwodGhpcy5oYW5kbGVycy5mZWF0dXJlLmxhc3RGZWF0dXJlPWMuc2VsZWN0ZWRGZWF0dXJlc1swXSksYy5ldmVudHMudHJpZ2dlckV2ZW50KCJmZWF0dXJlc2VsZWN0ZWQiLHtmZWF0dXJlOmF9KSx0aGlzLm9uU2VsZWN0LmNhbGwodGhpcy5zY29wZSxhKSkpfSx1bnNlbGVjdDpmdW5jdGlvbihhKXt2YXIgYj1hLmxheWVyO3RoaXMudW5oaWdobGlnaHQoYSk7T3BlbkxheWVycy5VdGlsLnJlbW92ZUl0ZW0oYi5zZWxlY3RlZEZlYXR1cmVzLGEpO2IuZXZlbnRzLnRyaWdnZXJFdmVudCgiZmVhdHVyZXVuc2VsZWN0ZWQiLAp7ZmVhdHVyZTphfSk7dGhpcy5vblVuc2VsZWN0LmNhbGwodGhpcy5zY29wZSxhKX0sc2VsZWN0Qm94OmZ1bmN0aW9uKGEpe2lmKGEgaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLkJvdW5kcyl7dmFyIGI9dGhpcy5tYXAuZ2V0TG9uTGF0RnJvbVBpeGVsKHt4OmEubGVmdCx5OmEuYm90dG9tfSk7YT10aGlzLm1hcC5nZXRMb25MYXRGcm9tUGl4ZWwoe3g6YS5yaWdodCx5OmEudG9wfSk7Yj1uZXcgT3BlbkxheWVycy5Cb3VuZHMoYi5sb24sYi5sYXQsYS5sb24sYS5sYXQpO3RoaXMubXVsdGlwbGVTZWxlY3QoKXx8dGhpcy51bnNlbGVjdEFsbCgpO2E9dGhpcy5tdWx0aXBsZTt0aGlzLm11bHRpcGxlPSEwO3ZhciBjPXRoaXMubGF5ZXJzfHxbdGhpcy5sYXllcl07dGhpcy5ldmVudHMudHJpZ2dlckV2ZW50KCJib3hzZWxlY3Rpb25zdGFydCIse2xheWVyczpjfSk7Zm9yKHZhciBkLGU9MDtlPGMubGVuZ3RoOysrZSl7ZD1jW2VdO2Zvcih2YXIgZj0wLGc9ZC5mZWF0dXJlcy5sZW5ndGg7ZjxnOysrZil7dmFyIGg9CmQuZmVhdHVyZXNbZl07aC5nZXRWaXNpYmlsaXR5KCkmJihudWxsPT10aGlzLmdlb21ldHJ5VHlwZXN8fC0xPE9wZW5MYXllcnMuVXRpbC5pbmRleE9mKHRoaXMuZ2VvbWV0cnlUeXBlcyxoLmdlb21ldHJ5LkNMQVNTX05BTUUpKSYmYi50b0dlb21ldHJ5KCkuaW50ZXJzZWN0cyhoLmdlb21ldHJ5KSYmLTE9PU9wZW5MYXllcnMuVXRpbC5pbmRleE9mKGQuc2VsZWN0ZWRGZWF0dXJlcyxoKSYmdGhpcy5zZWxlY3QoaCl9fXRoaXMubXVsdGlwbGU9YTt0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoImJveHNlbGVjdGlvbmVuZCIse2xheWVyczpjfSl9fSxzZXRNYXA6ZnVuY3Rpb24oYSl7dGhpcy5oYW5kbGVycy5mZWF0dXJlLnNldE1hcChhKTt0aGlzLmJveCYmdGhpcy5oYW5kbGVycy5ib3guc2V0TWFwKGEpO09wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuc2V0TWFwLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sc2V0TGF5ZXI6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5hY3RpdmU7dGhpcy51bnNlbGVjdEFsbCgpOwp0aGlzLmRlYWN0aXZhdGUoKTt0aGlzLmxheWVycyYmKHRoaXMubGF5ZXIuZGVzdHJveSgpLHRoaXMubGF5ZXJzPW51bGwpO3RoaXMuaW5pdExheWVyKGEpO3RoaXMuaGFuZGxlcnMuZmVhdHVyZS5sYXllcj10aGlzLmxheWVyO2ImJnRoaXMuYWN0aXZhdGUoKX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Db250cm9sLlNlbGVjdEZlYXR1cmUifSk7T3BlbkxheWVycy5IYW5kbGVyLlBvaW50PU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5IYW5kbGVyLHtwb2ludDpudWxsLGxheWVyOm51bGwsbXVsdGk6ITEsY2l0ZUNvbXBsaWFudDohMSxtb3VzZURvd246ITEsc3RvcHBlZERvd246bnVsbCxsYXN0RG93bjpudWxsLGxhc3RVcDpudWxsLHBlcnNpc3Q6ITEsc3RvcERvd246ITEsc3RvcFVwOiExLGxheWVyT3B0aW9uczpudWxsLHBpeGVsVG9sZXJhbmNlOjUsbGFzdFRvdWNoUHg6bnVsbCxpbml0aWFsaXplOmZ1bmN0aW9uKGEsYixjKXtjJiZjLmxheWVyT3B0aW9ucyYmYy5sYXllck9wdGlvbnMuc3R5bGVNYXB8fCh0aGlzLnN0eWxlPU9wZW5MYXllcnMuVXRpbC5leHRlbmQoT3BlbkxheWVycy5GZWF0dXJlLlZlY3Rvci5zdHlsZVsiZGVmYXVsdCJdLHt9KSk7T3BlbkxheWVycy5IYW5kbGVyLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sYWN0aXZhdGU6ZnVuY3Rpb24oKXtpZighT3BlbkxheWVycy5IYW5kbGVyLnByb3RvdHlwZS5hY3RpdmF0ZS5hcHBseSh0aGlzLAphcmd1bWVudHMpKXJldHVybiExO3ZhciBhPU9wZW5MYXllcnMuVXRpbC5leHRlbmQoe2Rpc3BsYXlJbkxheWVyU3dpdGNoZXI6ITEsY2FsY3VsYXRlSW5SYW5nZTpPcGVuTGF5ZXJzLkZ1bmN0aW9uLlRydWUsd3JhcERhdGVMaW5lOnRoaXMuY2l0ZUNvbXBsaWFudH0sdGhpcy5sYXllck9wdGlvbnMpO3RoaXMubGF5ZXI9bmV3IE9wZW5MYXllcnMuTGF5ZXIuVmVjdG9yKHRoaXMuQ0xBU1NfTkFNRSxhKTt0aGlzLm1hcC5hZGRMYXllcih0aGlzLmxheWVyKTtyZXR1cm4hMH0sY3JlYXRlRmVhdHVyZTpmdW5jdGlvbihhKXthPXRoaXMubGF5ZXIuZ2V0TG9uTGF0RnJvbVZpZXdQb3J0UHgoYSk7YT1uZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludChhLmxvbixhLmxhdCk7dGhpcy5wb2ludD1uZXcgT3BlbkxheWVycy5GZWF0dXJlLlZlY3RvcihhKTt0aGlzLmNhbGxiYWNrKCJjcmVhdGUiLFt0aGlzLnBvaW50Lmdlb21ldHJ5LHRoaXMucG9pbnRdKTt0aGlzLnBvaW50Lmdlb21ldHJ5LmNsZWFyQm91bmRzKCk7CnRoaXMubGF5ZXIuYWRkRmVhdHVyZXMoW3RoaXMucG9pbnRdLHtzaWxlbnQ6ITB9KX0sZGVhY3RpdmF0ZTpmdW5jdGlvbigpe2lmKCFPcGVuTGF5ZXJzLkhhbmRsZXIucHJvdG90eXBlLmRlYWN0aXZhdGUuYXBwbHkodGhpcyxhcmd1bWVudHMpKXJldHVybiExO3RoaXMuY2FuY2VsKCk7bnVsbCE9dGhpcy5sYXllci5tYXAmJih0aGlzLmRlc3Ryb3lGZWF0dXJlKCEwKSx0aGlzLmxheWVyLmRlc3Ryb3koITEpKTt0aGlzLmxheWVyPW51bGw7cmV0dXJuITB9LGRlc3Ryb3lGZWF0dXJlOmZ1bmN0aW9uKGEpeyF0aGlzLmxheWVyfHwhYSYmdGhpcy5wZXJzaXN0fHx0aGlzLmxheWVyLmRlc3Ryb3lGZWF0dXJlcygpO3RoaXMucG9pbnQ9bnVsbH0sZGVzdHJveVBlcnNpc3RlZEZlYXR1cmU6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmxheWVyO2EmJjE8YS5mZWF0dXJlcy5sZW5ndGgmJnRoaXMubGF5ZXIuZmVhdHVyZXNbMF0uZGVzdHJveSgpfSxmaW5hbGl6ZTpmdW5jdGlvbihhKXt0aGlzLm1vdXNlRG93bj0KITE7dGhpcy5sYXN0VG91Y2hQeD10aGlzLmxhc3RVcD10aGlzLmxhc3REb3duPW51bGw7dGhpcy5jYWxsYmFjayhhPyJjYW5jZWwiOiJkb25lIixbdGhpcy5nZW9tZXRyeUNsb25lKCldKTt0aGlzLmRlc3Ryb3lGZWF0dXJlKGEpfSxjYW5jZWw6ZnVuY3Rpb24oKXt0aGlzLmZpbmFsaXplKCEwKX0sY2xpY2s6ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5FdmVudC5zdG9wKGEpO3JldHVybiExfSxkYmxjbGljazpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLkV2ZW50LnN0b3AoYSk7cmV0dXJuITF9LG1vZGlmeUZlYXR1cmU6ZnVuY3Rpb24oYSl7dGhpcy5wb2ludHx8dGhpcy5jcmVhdGVGZWF0dXJlKGEpO2E9dGhpcy5sYXllci5nZXRMb25MYXRGcm9tVmlld1BvcnRQeChhKTt0aGlzLnBvaW50Lmdlb21ldHJ5Lng9YS5sb247dGhpcy5wb2ludC5nZW9tZXRyeS55PWEubGF0O3RoaXMuY2FsbGJhY2soIm1vZGlmeSIsW3RoaXMucG9pbnQuZ2VvbWV0cnksdGhpcy5wb2ludCwhMV0pO3RoaXMucG9pbnQuZ2VvbWV0cnkuY2xlYXJCb3VuZHMoKTsKdGhpcy5kcmF3RmVhdHVyZSgpfSxkcmF3RmVhdHVyZTpmdW5jdGlvbigpe3RoaXMubGF5ZXIuZHJhd0ZlYXR1cmUodGhpcy5wb2ludCx0aGlzLnN0eWxlKX0sZ2V0R2VvbWV0cnk6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnBvaW50JiZ0aGlzLnBvaW50Lmdlb21ldHJ5O2EmJnRoaXMubXVsdGkmJihhPW5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5Lk11bHRpUG9pbnQoW2FdKSk7cmV0dXJuIGF9LGdlb21ldHJ5Q2xvbmU6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmdldEdlb21ldHJ5KCk7cmV0dXJuIGEmJmEuY2xvbmUoKX0sbW91c2Vkb3duOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmRvd24oYSl9LHRvdWNoc3RhcnQ6ZnVuY3Rpb24oYSl7dGhpcy5zdGFydFRvdWNoKCk7dGhpcy5sYXN0VG91Y2hQeD1hLnh5O3JldHVybiB0aGlzLmRvd24oYSl9LG1vdXNlbW92ZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5tb3ZlKGEpfSx0b3VjaG1vdmU6ZnVuY3Rpb24oYSl7dGhpcy5sYXN0VG91Y2hQeD1hLnh5OwpyZXR1cm4gdGhpcy5tb3ZlKGEpfSxtb3VzZXVwOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnVwKGEpfSx0b3VjaGVuZDpmdW5jdGlvbihhKXthLnh5PXRoaXMubGFzdFRvdWNoUHg7cmV0dXJuIHRoaXMudXAoYSl9LGRvd246ZnVuY3Rpb24oYSl7dGhpcy5tb3VzZURvd249ITA7dGhpcy5sYXN0RG93bj1hLnh5O3RoaXMudG91Y2h8fHRoaXMubW9kaWZ5RmVhdHVyZShhLnh5KTt0aGlzLnN0b3BwZWREb3duPXRoaXMuc3RvcERvd247cmV0dXJuIXRoaXMuc3RvcERvd259LG1vdmU6ZnVuY3Rpb24oYSl7dGhpcy50b3VjaHx8dGhpcy5tb3VzZURvd24mJiF0aGlzLnN0b3BwZWREb3dufHx0aGlzLm1vZGlmeUZlYXR1cmUoYS54eSk7cmV0dXJuITB9LHVwOmZ1bmN0aW9uKGEpe3RoaXMubW91c2VEb3duPSExO3RoaXMuc3RvcHBlZERvd249dGhpcy5zdG9wRG93bjtpZighdGhpcy5jaGVja01vZGlmaWVycyhhKXx8dGhpcy5sYXN0VXAmJnRoaXMubGFzdFVwLmVxdWFscyhhLnh5KXx8IXRoaXMubGFzdERvd258fAohdGhpcy5wYXNzZXNUb2xlcmFuY2UodGhpcy5sYXN0RG93bixhLnh5LHRoaXMucGl4ZWxUb2xlcmFuY2UpKXJldHVybiEwO3RoaXMudG91Y2gmJnRoaXMubW9kaWZ5RmVhdHVyZShhLnh5KTt0aGlzLnBlcnNpc3QmJnRoaXMuZGVzdHJveVBlcnNpc3RlZEZlYXR1cmUoKTt0aGlzLmxhc3RVcD1hLnh5O3RoaXMuZmluYWxpemUoKTtyZXR1cm4hdGhpcy5zdG9wVXB9LG1vdXNlb3V0OmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuVXRpbC5tb3VzZUxlZnQoYSx0aGlzLm1hcC52aWV3UG9ydERpdikmJih0aGlzLnN0b3BwZWREb3duPXRoaXMuc3RvcERvd24sdGhpcy5tb3VzZURvd249ITEpfSxwYXNzZXNUb2xlcmFuY2U6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPSEwO251bGwhPWMmJmEmJmImJmEuZGlzdGFuY2VUbyhiKT5jJiYoZD0hMSk7cmV0dXJuIGR9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuSGFuZGxlci5Qb2ludCJ9KTtPcGVuTGF5ZXJzLkhhbmRsZXIuUGF0aD1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuSGFuZGxlci5Qb2ludCx7bGluZTpudWxsLG1heFZlcnRpY2VzOm51bGwsZG91YmxlVG91Y2hUb2xlcmFuY2U6MjAsZnJlZWhhbmQ6ITEsZnJlZWhhbmRUb2dnbGU6InNoaWZ0S2V5Iix0aW1lcklkOm51bGwscmVkb1N0YWNrOm51bGwsY3JlYXRlRmVhdHVyZTpmdW5jdGlvbihhKXthPXRoaXMubGF5ZXIuZ2V0TG9uTGF0RnJvbVZpZXdQb3J0UHgoYSk7YT1uZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludChhLmxvbixhLmxhdCk7dGhpcy5wb2ludD1uZXcgT3BlbkxheWVycy5GZWF0dXJlLlZlY3RvcihhKTt0aGlzLmxpbmU9bmV3IE9wZW5MYXllcnMuRmVhdHVyZS5WZWN0b3IobmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuTGluZVN0cmluZyhbdGhpcy5wb2ludC5nZW9tZXRyeV0pKTt0aGlzLmNhbGxiYWNrKCJjcmVhdGUiLFt0aGlzLnBvaW50Lmdlb21ldHJ5LHRoaXMuZ2V0U2tldGNoKCldKTsKdGhpcy5wb2ludC5nZW9tZXRyeS5jbGVhckJvdW5kcygpO3RoaXMubGF5ZXIuYWRkRmVhdHVyZXMoW3RoaXMubGluZSx0aGlzLnBvaW50XSx7c2lsZW50OiEwfSl9LGRlc3Ryb3lGZWF0dXJlOmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuSGFuZGxlci5Qb2ludC5wcm90b3R5cGUuZGVzdHJveUZlYXR1cmUuY2FsbCh0aGlzLGEpO3RoaXMubGluZT1udWxsfSxkZXN0cm95UGVyc2lzdGVkRmVhdHVyZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMubGF5ZXI7YSYmMjxhLmZlYXR1cmVzLmxlbmd0aCYmdGhpcy5sYXllci5mZWF0dXJlc1swXS5kZXN0cm95KCl9LHJlbW92ZVBvaW50OmZ1bmN0aW9uKCl7dGhpcy5wb2ludCYmdGhpcy5sYXllci5yZW1vdmVGZWF0dXJlcyhbdGhpcy5wb2ludF0pfSxhZGRQb2ludDpmdW5jdGlvbihhKXt0aGlzLmxheWVyLnJlbW92ZUZlYXR1cmVzKFt0aGlzLnBvaW50XSk7YT10aGlzLmxheWVyLmdldExvbkxhdEZyb21WaWV3UG9ydFB4KGEpO3RoaXMucG9pbnQ9bmV3IE9wZW5MYXllcnMuRmVhdHVyZS5WZWN0b3IobmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoYS5sb24sCmEubGF0KSk7dGhpcy5saW5lLmdlb21ldHJ5LmFkZENvbXBvbmVudCh0aGlzLnBvaW50Lmdlb21ldHJ5LHRoaXMubGluZS5nZW9tZXRyeS5jb21wb25lbnRzLmxlbmd0aCk7dGhpcy5sYXllci5hZGRGZWF0dXJlcyhbdGhpcy5wb2ludF0pO3RoaXMuY2FsbGJhY2soInBvaW50IixbdGhpcy5wb2ludC5nZW9tZXRyeSx0aGlzLmdldEdlb21ldHJ5KCldKTt0aGlzLmNhbGxiYWNrKCJtb2RpZnkiLFt0aGlzLnBvaW50Lmdlb21ldHJ5LHRoaXMuZ2V0U2tldGNoKCldKTt0aGlzLmRyYXdGZWF0dXJlKCk7ZGVsZXRlIHRoaXMucmVkb1N0YWNrfSxpbnNlcnRYWTpmdW5jdGlvbihhLGIpe3RoaXMubGluZS5nZW9tZXRyeS5hZGRDb21wb25lbnQobmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoYSxiKSx0aGlzLmdldEN1cnJlbnRQb2ludEluZGV4KCkpO3RoaXMuZHJhd0ZlYXR1cmUoKTtkZWxldGUgdGhpcy5yZWRvU3RhY2t9LGluc2VydERlbHRhWFk6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmdldEN1cnJlbnRQb2ludEluZGV4KCktCjEsYz10aGlzLmxpbmUuZ2VvbWV0cnkuY29tcG9uZW50c1tjXTshY3x8KGlzTmFOKGMueCl8fGlzTmFOKGMueSkpfHx0aGlzLmluc2VydFhZKGMueCthLGMueStiKX0saW5zZXJ0RGlyZWN0aW9uTGVuZ3RoOmZ1bmN0aW9uKGEsYil7YSo9TWF0aC5QSS8xODA7dmFyIGM9YipNYXRoLmNvcyhhKSxkPWIqTWF0aC5zaW4oYSk7dGhpcy5pbnNlcnREZWx0YVhZKGMsZCl9LGluc2VydERlZmxlY3Rpb25MZW5ndGg6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmdldEN1cnJlbnRQb2ludEluZGV4KCktMTtpZigwPGMpe3ZhciBkPXRoaXMubGluZS5nZW9tZXRyeS5jb21wb25lbnRzW2NdLGM9dGhpcy5saW5lLmdlb21ldHJ5LmNvbXBvbmVudHNbYy0xXSxkPU1hdGguYXRhbjIoZC55LWMueSxkLngtYy54KTt0aGlzLmluc2VydERpcmVjdGlvbkxlbmd0aCgxODAqZC9NYXRoLlBJK2EsYil9fSxnZXRDdXJyZW50UG9pbnRJbmRleDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmxpbmUuZ2VvbWV0cnkuY29tcG9uZW50cy5sZW5ndGgtCjF9LHVuZG86ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmxpbmUuZ2VvbWV0cnksYj1hLmNvbXBvbmVudHMsYz10aGlzLmdldEN1cnJlbnRQb2ludEluZGV4KCktMSxkPWJbY10sZT1hLnJlbW92ZUNvbXBvbmVudChkKTtlJiYodGhpcy50b3VjaCYmMDxjJiYoYj1hLmNvbXBvbmVudHMsYT1iW2MtMV0sYz10aGlzLmdldEN1cnJlbnRQb2ludEluZGV4KCksYj1iW2NdLGIueD1hLngsYi55PWEueSksdGhpcy5yZWRvU3RhY2t8fCh0aGlzLnJlZG9TdGFjaz1bXSksdGhpcy5yZWRvU3RhY2sucHVzaChkKSx0aGlzLmRyYXdGZWF0dXJlKCkpO3JldHVybiBlfSxyZWRvOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5yZWRvU3RhY2smJnRoaXMucmVkb1N0YWNrLnBvcCgpO2EmJih0aGlzLmxpbmUuZ2VvbWV0cnkuYWRkQ29tcG9uZW50KGEsdGhpcy5nZXRDdXJyZW50UG9pbnRJbmRleCgpKSx0aGlzLmRyYXdGZWF0dXJlKCkpO3JldHVybiEhYX0sZnJlZWhhbmRNb2RlOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmZyZWVoYW5kVG9nZ2xlJiYKYVt0aGlzLmZyZWVoYW5kVG9nZ2xlXT8hdGhpcy5mcmVlaGFuZDp0aGlzLmZyZWVoYW5kfSxtb2RpZnlGZWF0dXJlOmZ1bmN0aW9uKGEsYil7dGhpcy5saW5lfHx0aGlzLmNyZWF0ZUZlYXR1cmUoYSk7dmFyIGM9dGhpcy5sYXllci5nZXRMb25MYXRGcm9tVmlld1BvcnRQeChhKTt0aGlzLnBvaW50Lmdlb21ldHJ5Lng9Yy5sb247dGhpcy5wb2ludC5nZW9tZXRyeS55PWMubGF0O3RoaXMuY2FsbGJhY2soIm1vZGlmeSIsW3RoaXMucG9pbnQuZ2VvbWV0cnksdGhpcy5nZXRTa2V0Y2goKSxiXSk7dGhpcy5wb2ludC5nZW9tZXRyeS5jbGVhckJvdW5kcygpO3RoaXMuZHJhd0ZlYXR1cmUoKX0sZHJhd0ZlYXR1cmU6ZnVuY3Rpb24oKXt0aGlzLmxheWVyLmRyYXdGZWF0dXJlKHRoaXMubGluZSx0aGlzLnN0eWxlKTt0aGlzLmxheWVyLmRyYXdGZWF0dXJlKHRoaXMucG9pbnQsdGhpcy5zdHlsZSl9LGdldFNrZXRjaDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmxpbmV9LGdldEdlb21ldHJ5OmZ1bmN0aW9uKCl7dmFyIGE9CnRoaXMubGluZSYmdGhpcy5saW5lLmdlb21ldHJ5O2EmJnRoaXMubXVsdGkmJihhPW5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5Lk11bHRpTGluZVN0cmluZyhbYV0pKTtyZXR1cm4gYX0sdG91Y2hzdGFydDpmdW5jdGlvbihhKXtpZih0aGlzLnRpbWVySWQmJnRoaXMucGFzc2VzVG9sZXJhbmNlKHRoaXMubGFzdFRvdWNoUHgsYS54eSx0aGlzLmRvdWJsZVRvdWNoVG9sZXJhbmNlKSlyZXR1cm4gdGhpcy5maW5pc2hHZW9tZXRyeSgpLHdpbmRvdy5jbGVhclRpbWVvdXQodGhpcy50aW1lcklkKSx0aGlzLnRpbWVySWQ9bnVsbCwhMTt0aGlzLnRpbWVySWQmJih3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMudGltZXJJZCksdGhpcy50aW1lcklkPW51bGwpO3RoaXMudGltZXJJZD13aW5kb3cuc2V0VGltZW91dChPcGVuTGF5ZXJzLkZ1bmN0aW9uLmJpbmQoZnVuY3Rpb24oKXt0aGlzLnRpbWVySWQ9bnVsbH0sdGhpcyksMzAwKTtyZXR1cm4gT3BlbkxheWVycy5IYW5kbGVyLlBvaW50LnByb3RvdHlwZS50b3VjaHN0YXJ0LmNhbGwodGhpcywKYSl9LGRvd246ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5zdG9wRG93bjt0aGlzLmZyZWVoYW5kTW9kZShhKSYmKGI9ITAsdGhpcy50b3VjaCYmKHRoaXMubW9kaWZ5RmVhdHVyZShhLnh5LCEhdGhpcy5sYXN0VXApLE9wZW5MYXllcnMuRXZlbnQuc3RvcChhKSkpO3RoaXMudG91Y2h8fHRoaXMubGFzdERvd24mJnRoaXMucGFzc2VzVG9sZXJhbmNlKHRoaXMubGFzdERvd24sYS54eSx0aGlzLnBpeGVsVG9sZXJhbmNlKXx8dGhpcy5tb2RpZnlGZWF0dXJlKGEueHksISF0aGlzLmxhc3RVcCk7dGhpcy5tb3VzZURvd249ITA7dGhpcy5sYXN0RG93bj1hLnh5O3RoaXMuc3RvcHBlZERvd249YjtyZXR1cm4hYn0sbW92ZTpmdW5jdGlvbihhKXtpZih0aGlzLnN0b3BwZWREb3duJiZ0aGlzLmZyZWVoYW5kTW9kZShhKSlyZXR1cm4gdGhpcy5wZXJzaXN0JiZ0aGlzLmRlc3Ryb3lQZXJzaXN0ZWRGZWF0dXJlKCksdGhpcy5tYXhWZXJ0aWNlcyYmdGhpcy5saW5lJiZ0aGlzLmxpbmUuZ2VvbWV0cnkuY29tcG9uZW50cy5sZW5ndGg9PT0KdGhpcy5tYXhWZXJ0aWNlcz8odGhpcy5yZW1vdmVQb2ludCgpLHRoaXMuZmluYWxpemUoKSk6dGhpcy5hZGRQb2ludChhLnh5KSwhMTt0aGlzLnRvdWNofHx0aGlzLm1vdXNlRG93biYmIXRoaXMuc3RvcHBlZERvd258fHRoaXMubW9kaWZ5RmVhdHVyZShhLnh5LCEhdGhpcy5sYXN0VXApO3JldHVybiEwfSx1cDpmdW5jdGlvbihhKXshdGhpcy5tb3VzZURvd258fHRoaXMubGFzdFVwJiZ0aGlzLmxhc3RVcC5lcXVhbHMoYS54eSl8fCh0aGlzLnN0b3BwZWREb3duJiZ0aGlzLmZyZWVoYW5kTW9kZShhKT8odGhpcy5wZXJzaXN0JiZ0aGlzLmRlc3Ryb3lQZXJzaXN0ZWRGZWF0dXJlKCksdGhpcy5yZW1vdmVQb2ludCgpLHRoaXMuZmluYWxpemUoKSk6dGhpcy5wYXNzZXNUb2xlcmFuY2UodGhpcy5sYXN0RG93bixhLnh5LHRoaXMucGl4ZWxUb2xlcmFuY2UpJiYodGhpcy50b3VjaCYmdGhpcy5tb2RpZnlGZWF0dXJlKGEueHkpLG51bGw9PXRoaXMubGFzdFVwJiZ0aGlzLnBlcnNpc3QmJnRoaXMuZGVzdHJveVBlcnNpc3RlZEZlYXR1cmUoKSwKdGhpcy5hZGRQb2ludChhLnh5KSx0aGlzLmxhc3RVcD1hLnh5LHRoaXMubGluZS5nZW9tZXRyeS5jb21wb25lbnRzLmxlbmd0aD09PXRoaXMubWF4VmVydGljZXMrMSYmdGhpcy5maW5pc2hHZW9tZXRyeSgpKSk7dGhpcy5zdG9wcGVkRG93bj10aGlzLnN0b3BEb3duO3RoaXMubW91c2VEb3duPSExO3JldHVybiF0aGlzLnN0b3BVcH0sZmluaXNoR2VvbWV0cnk6ZnVuY3Rpb24oKXt0aGlzLmxpbmUuZ2VvbWV0cnkucmVtb3ZlQ29tcG9uZW50KHRoaXMubGluZS5nZW9tZXRyeS5jb21wb25lbnRzW3RoaXMubGluZS5nZW9tZXRyeS5jb21wb25lbnRzLmxlbmd0aC0xXSk7dGhpcy5yZW1vdmVQb2ludCgpO3RoaXMuZmluYWxpemUoKX0sZGJsY2xpY2s6ZnVuY3Rpb24oYSl7dGhpcy5mcmVlaGFuZE1vZGUoYSl8fHRoaXMuZmluaXNoR2VvbWV0cnkoKTtyZXR1cm4hMX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5IYW5kbGVyLlBhdGgifSk7T3BlbkxheWVycy5TcGhlcmljYWw9T3BlbkxheWVycy5TcGhlcmljYWx8fHt9O09wZW5MYXllcnMuU3BoZXJpY2FsLkRFRkFVTFRfUkFESVVTPTYzNzgxMzc7T3BlbkxheWVycy5TcGhlcmljYWwuY29tcHV0ZURpc3RhbmNlQmV0d2Vlbj1mdW5jdGlvbihhLGIsYyl7Yz1jfHxPcGVuTGF5ZXJzLlNwaGVyaWNhbC5ERUZBVUxUX1JBRElVUzt2YXIgZD1NYXRoLnNpbihNYXRoLlBJKihiLmxvbi1hLmxvbikvMzYwKSxlPU1hdGguc2luKE1hdGguUEkqKGIubGF0LWEubGF0KS8zNjApO2E9ZSplK2QqZCpNYXRoLmNvcyhNYXRoLlBJKmEubGF0LzE4MCkqTWF0aC5jb3MoTWF0aC5QSSpiLmxhdC8xODApO3JldHVybiAyKmMqTWF0aC5hdGFuMihNYXRoLnNxcnQoYSksTWF0aC5zcXJ0KDEtYSkpfTsKT3BlbkxheWVycy5TcGhlcmljYWwuY29tcHV0ZUhlYWRpbmc9ZnVuY3Rpb24oYSxiKXt2YXIgYz1NYXRoLnNpbihNYXRoLlBJKihhLmxvbi1iLmxvbikvMTgwKSpNYXRoLmNvcyhNYXRoLlBJKmIubGF0LzE4MCksZD1NYXRoLmNvcyhNYXRoLlBJKmEubGF0LzE4MCkqTWF0aC5zaW4oTWF0aC5QSSpiLmxhdC8xODApLU1hdGguc2luKE1hdGguUEkqYS5sYXQvMTgwKSpNYXRoLmNvcyhNYXRoLlBJKmIubGF0LzE4MCkqTWF0aC5jb3MoTWF0aC5QSSooYS5sb24tYi5sb24pLzE4MCk7cmV0dXJuIDE4MCpNYXRoLmF0YW4yKGMsZCkvTWF0aC5QSX07T3BlbkxheWVycy5Db250cm9sLkNhY2hlV3JpdGU9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkNvbnRyb2wse2xheWVyczpudWxsLGltYWdlRm9ybWF0OiJpbWFnZS9wbmciLHF1b3RhUmVnRXg6L3F1b3RhL2ksc2V0TWFwOmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuc2V0TWFwLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt2YXIgYixjPXRoaXMubGF5ZXJzfHxhLmxheWVycztmb3IoYj1jLmxlbmd0aC0xOzA8PWI7LS1iKXRoaXMuYWRkTGF5ZXIoe2xheWVyOmNbYl19KTtpZighdGhpcy5sYXllcnMpYS5ldmVudHMub24oe2FkZGxheWVyOnRoaXMuYWRkTGF5ZXIscmVtb3ZlTGF5ZXI6dGhpcy5yZW1vdmVMYXllcixzY29wZTp0aGlzfSl9LGFkZExheWVyOmZ1bmN0aW9uKGEpe2EubGF5ZXIuZXZlbnRzLm9uKHt0aWxlbG9hZHN0YXJ0OnRoaXMubWFrZVNhbWVPcmlnaW4sdGlsZWxvYWRlZDp0aGlzLm9uVGlsZUxvYWRlZCxzY29wZTp0aGlzfSl9LHJlbW92ZUxheWVyOmZ1bmN0aW9uKGEpe2EubGF5ZXIuZXZlbnRzLnVuKHt0aWxlbG9hZHN0YXJ0OnRoaXMubWFrZVNhbWVPcmlnaW4sCnRpbGVsb2FkZWQ6dGhpcy5vblRpbGVMb2FkZWQsc2NvcGU6dGhpc30pfSxtYWtlU2FtZU9yaWdpbjpmdW5jdGlvbihhKXtpZih0aGlzLmFjdGl2ZSYmKGE9YS50aWxlLGEgaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLlRpbGUuSW1hZ2UmJiFhLmNyb3NzT3JpZ2luS2V5d29yZCYmImRhdGE6IiE9PWEudXJsLnN1YnN0cigwLDUpKSl7dmFyIGI9T3BlbkxheWVycy5SZXF1ZXN0Lm1ha2VTYW1lT3JpZ2luKGEudXJsLE9wZW5MYXllcnMuUHJveHlIb3N0KTtPcGVuTGF5ZXJzLkNvbnRyb2wuQ2FjaGVXcml0ZS51cmxNYXBbYl09YS51cmw7YS51cmw9Yn19LG9uVGlsZUxvYWRlZDpmdW5jdGlvbihhKXt0aGlzLmFjdGl2ZSYmKCFhLmFib3J0ZWQmJmEudGlsZSBpbnN0YW5jZW9mIE9wZW5MYXllcnMuVGlsZS5JbWFnZSYmImRhdGE6IiE9PWEudGlsZS51cmwuc3Vic3RyKDAsNSkpJiYodGhpcy5jYWNoZSh7dGlsZTphLnRpbGV9KSxkZWxldGUgT3BlbkxheWVycy5Db250cm9sLkNhY2hlV3JpdGUudXJsTWFwW2EudGlsZS51cmxdKX0sCmNhY2hlOmZ1bmN0aW9uKGEpe2lmKHdpbmRvdy5sb2NhbFN0b3JhZ2Upe2E9YS50aWxlO3RyeXt2YXIgYj1hLmdldENhbnZhc0NvbnRleHQoKTtiJiZ3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oIm9sQ2FjaGVfIisoT3BlbkxheWVycy5Db250cm9sLkNhY2hlV3JpdGUudXJsTWFwW2EudXJsXXx8YS51cmwpLGIuY2FudmFzLnRvRGF0YVVSTCh0aGlzLmltYWdlRm9ybWF0KSl9Y2F0Y2goYyl7KGI9Yy5uYW1lfHxjLm1lc3NhZ2UpJiZ0aGlzLnF1b3RhUmVnRXgudGVzdChiKT90aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoImNhY2hlZnVsbCIse3RpbGU6YX0pOk9wZW5MYXllcnMuQ29uc29sZS5lcnJvcihjLnRvU3RyaW5nKCkpfX19LGRlc3Ryb3k6ZnVuY3Rpb24oKXtpZih0aGlzLmxheWVyc3x8dGhpcy5tYXApe3ZhciBhLGI9dGhpcy5sYXllcnN8fHRoaXMubWFwLmxheWVycztmb3IoYT1iLmxlbmd0aC0xOzA8PWE7LS1hKXRoaXMucmVtb3ZlTGF5ZXIoe2xheWVyOmJbYV19KX10aGlzLm1hcCYmCnRoaXMubWFwLmV2ZW50cy51bih7YWRkbGF5ZXI6dGhpcy5hZGRMYXllcixyZW1vdmVMYXllcjp0aGlzLnJlbW92ZUxheWVyLHNjb3BlOnRoaXN9KTtPcGVuTGF5ZXJzLkNvbnRyb2wucHJvdG90eXBlLmRlc3Ryb3kuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkNvbnRyb2wuQ2FjaGVXcml0ZSJ9KTtPcGVuTGF5ZXJzLkNvbnRyb2wuQ2FjaGVXcml0ZS5jbGVhckNhY2hlPWZ1bmN0aW9uKCl7aWYod2luZG93LmxvY2FsU3RvcmFnZSl7dmFyIGEsYjtmb3IoYT13aW5kb3cubG9jYWxTdG9yYWdlLmxlbmd0aC0xOzA8PWE7LS1hKWI9d2luZG93LmxvY2FsU3RvcmFnZS5rZXkoYSksIm9sQ2FjaGVfIj09PWIuc3Vic3RyKDAsOCkmJndpbmRvdy5sb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShiKX19O09wZW5MYXllcnMuQ29udHJvbC5DYWNoZVdyaXRlLnVybE1hcD17fTtPcGVuTGF5ZXJzLkZvcm1hdC5Db250ZXh0PU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Gb3JtYXQuWE1MLlZlcnNpb25lZE9HQyx7bGF5ZXJPcHRpb25zOm51bGwsbGF5ZXJQYXJhbXM6bnVsbCxyZWFkOmZ1bmN0aW9uKGEsYil7dmFyIGM9T3BlbkxheWVycy5Gb3JtYXQuWE1MLlZlcnNpb25lZE9HQy5wcm90b3R5cGUucmVhZC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7aWYoYiYmYi5tYXApaWYodGhpcy5jb250ZXh0PWMsYi5tYXAgaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLk1hcCljPXRoaXMubWVyZ2VDb250ZXh0VG9NYXAoYyxiLm1hcCk7ZWxzZXt2YXIgZD1iLm1hcDtpZihPcGVuTGF5ZXJzLlV0aWwuaXNFbGVtZW50KGQpfHwic3RyaW5nIj09dHlwZW9mIGQpZD17ZGl2OmR9O2M9dGhpcy5jb250ZXh0VG9NYXAoYyxkKX1yZXR1cm4gY30sZ2V0TGF5ZXJGcm9tQ29udGV4dDpmdW5jdGlvbihhKXt2YXIgYixjLGQ9e3F1ZXJ5YWJsZTphLnF1ZXJ5YWJsZSx2aXNpYmlsaXR5OmEudmlzaWJpbGl0eSwKbWF4RXh0ZW50OmEubWF4RXh0ZW50LG1ldGFkYXRhOk9wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKGEubWV0YWRhdGEse3N0eWxlczphLnN0eWxlcyxmb3JtYXRzOmEuZm9ybWF0cywiYWJzdHJhY3QiOmFbImFic3RyYWN0Il0sZGF0YVVSTDphLmRhdGFVUkx9KSxudW1ab29tTGV2ZWxzOmEubnVtWm9vbUxldmVscyx1bml0czphLnVuaXRzLGlzQmFzZUxheWVyOmEuaXNCYXNlTGF5ZXIsb3BhY2l0eTphLm9wYWNpdHksZGlzcGxheUluTGF5ZXJTd2l0Y2hlcjphLmRpc3BsYXlJbkxheWVyU3dpdGNoZXIsc2luZ2xlVGlsZTphLnNpbmdsZVRpbGUsdGlsZVNpemU6YS50aWxlU2l6ZT9uZXcgT3BlbkxheWVycy5TaXplKGEudGlsZVNpemUud2lkdGgsYS50aWxlU2l6ZS5oZWlnaHQpOnZvaWQgMCxtaW5TY2FsZTphLm1pblNjYWxlfHxhLm1heFNjYWxlRGVub21pbmF0b3IsbWF4U2NhbGU6YS5tYXhTY2FsZXx8YS5taW5TY2FsZURlbm9taW5hdG9yLHNyczphLnNycyxkaW1lbnNpb25zOmEuZGltZW5zaW9ucywKbWV0YWRhdGFVUkw6YS5tZXRhZGF0YVVSTH07dGhpcy5sYXllck9wdGlvbnMmJk9wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKGQsdGhpcy5sYXllck9wdGlvbnMpO3ZhciBlPXtsYXllcnM6YS5uYW1lLHRyYW5zcGFyZW50OmEudHJhbnNwYXJlbnQsdmVyc2lvbjphLnZlcnNpb259O2lmKGEuZm9ybWF0cyYmMDxhLmZvcm1hdHMubGVuZ3RoKWZvcihlLmZvcm1hdD1hLmZvcm1hdHNbMF0udmFsdWUsYj0wLGM9YS5mb3JtYXRzLmxlbmd0aDtiPGM7YisrKXt2YXIgZj1hLmZvcm1hdHNbYl07aWYoITA9PWYuY3VycmVudCl7ZS5mb3JtYXQ9Zi52YWx1ZTticmVha319aWYoYS5zdHlsZXMmJjA8YS5zdHlsZXMubGVuZ3RoKWZvcihiPTAsYz1hLnN0eWxlcy5sZW5ndGg7YjxjO2IrKylpZihmPWEuc3R5bGVzW2JdLCEwPT1mLmN1cnJlbnQpe2YuaHJlZj9lLnNsZD1mLmhyZWY6Zi5ib2R5P2Uuc2xkX2JvZHk9Zi5ib2R5OmUuc3R5bGVzPWYubmFtZTticmVha310aGlzLmxheWVyUGFyYW1zJiYKT3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoZSx0aGlzLmxheWVyUGFyYW1zKTtiPW51bGw7Yz1hLnNlcnZpY2U7Yz09T3BlbkxheWVycy5Gb3JtYXQuQ29udGV4dC5zZXJ2aWNlVHlwZXMuV0ZTPyhkLnN0cmF0ZWdpZXM9W25ldyBPcGVuTGF5ZXJzLlN0cmF0ZWd5LkJCT1hdLGQucHJvdG9jb2w9bmV3IE9wZW5MYXllcnMuUHJvdG9jb2wuV0ZTKHt1cmw6YS51cmwsZmVhdHVyZVByZWZpeDphLm5hbWUuc3BsaXQoIjoiKVswXSxmZWF0dXJlVHlwZTphLm5hbWUuc3BsaXQoIjoiKS5wb3AoKX0pLGI9bmV3IE9wZW5MYXllcnMuTGF5ZXIuVmVjdG9yKGEudGl0bGV8fGEubmFtZSxkKSk6Yz09T3BlbkxheWVycy5Gb3JtYXQuQ29udGV4dC5zZXJ2aWNlVHlwZXMuS01MPyhkLnN0cmF0ZWdpZXM9W25ldyBPcGVuTGF5ZXJzLlN0cmF0ZWd5LkZpeGVkXSxkLnByb3RvY29sPW5ldyBPcGVuTGF5ZXJzLlByb3RvY29sLkhUVFAoe3VybDphLnVybCxmb3JtYXQ6bmV3IE9wZW5MYXllcnMuRm9ybWF0LktNTH0pLApiPW5ldyBPcGVuTGF5ZXJzLkxheWVyLlZlY3RvcihhLnRpdGxlfHxhLm5hbWUsZCkpOmM9PU9wZW5MYXllcnMuRm9ybWF0LkNvbnRleHQuc2VydmljZVR5cGVzLkdNTD8oZC5zdHJhdGVnaWVzPVtuZXcgT3BlbkxheWVycy5TdHJhdGVneS5GaXhlZF0sZC5wcm90b2NvbD1uZXcgT3BlbkxheWVycy5Qcm90b2NvbC5IVFRQKHt1cmw6YS51cmwsZm9ybWF0Om5ldyBPcGVuTGF5ZXJzLkZvcm1hdC5HTUx9KSxiPW5ldyBPcGVuTGF5ZXJzLkxheWVyLlZlY3RvcihhLnRpdGxlfHxhLm5hbWUsZCkpOmEuZmVhdHVyZXM/KGI9bmV3IE9wZW5MYXllcnMuTGF5ZXIuVmVjdG9yKGEudGl0bGV8fGEubmFtZSxkKSxiLmFkZEZlYXR1cmVzKGEuZmVhdHVyZXMpKTohMCE9PWEuY2F0ZWdvcnlMYXllciYmKGI9bmV3IE9wZW5MYXllcnMuTGF5ZXIuV01TKGEudGl0bGV8fGEubmFtZSxhLnVybCxlLGQpKTtyZXR1cm4gYn0sZ2V0TGF5ZXJzRnJvbUNvbnRleHQ6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPVtdLGM9CjAsZD1hLmxlbmd0aDtjPGQ7YysrKXt2YXIgZT10aGlzLmdldExheWVyRnJvbUNvbnRleHQoYVtjXSk7bnVsbCE9PWUmJmIucHVzaChlKX1yZXR1cm4gYn0sY29udGV4dFRvTWFwOmZ1bmN0aW9uKGEsYil7Yj1PcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyh7bWF4RXh0ZW50OmEubWF4RXh0ZW50LHByb2plY3Rpb246YS5wcm9qZWN0aW9uLHVuaXRzOmEudW5pdHN9LGIpO2IubWF4RXh0ZW50JiYoYi5tYXhSZXNvbHV0aW9uPWIubWF4RXh0ZW50LmdldFdpZHRoKCkvT3BlbkxheWVycy5NYXAuVElMRV9XSURUSCk7Yi5tZXRhZGF0YT17Y29udGFjdEluZm9ybWF0aW9uOmEuY29udGFjdEluZm9ybWF0aW9uLCJhYnN0cmFjdCI6YVsiYWJzdHJhY3QiXSxrZXl3b3JkczphLmtleXdvcmRzLGxvZ286YS5sb2dvLGRlc2NyaXB0aW9uVVJMOmEuZGVzY3JpcHRpb25VUkx9O3ZhciBjPW5ldyBPcGVuTGF5ZXJzLk1hcChiKTtjLmFkZExheWVycyh0aGlzLmdldExheWVyc0Zyb21Db250ZXh0KGEubGF5ZXJzQ29udGV4dCkpOwpjLnNldENlbnRlcihhLmJvdW5kcy5nZXRDZW50ZXJMb25MYXQoKSxjLmdldFpvb21Gb3JFeHRlbnQoYS5ib3VuZHMsITApKTtyZXR1cm4gY30sbWVyZ2VDb250ZXh0VG9NYXA6ZnVuY3Rpb24oYSxiKXtiLmFkZExheWVycyh0aGlzLmdldExheWVyc0Zyb21Db250ZXh0KGEubGF5ZXJzQ29udGV4dCkpO3JldHVybiBifSx3cml0ZTpmdW5jdGlvbihhLGIpe2E9dGhpcy50b0NvbnRleHQoYSk7cmV0dXJuIE9wZW5MYXllcnMuRm9ybWF0LlhNTC5WZXJzaW9uZWRPR0MucHJvdG90eXBlLndyaXRlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Gb3JtYXQuQ29udGV4dCJ9KTsKT3BlbkxheWVycy5Gb3JtYXQuQ29udGV4dC5zZXJ2aWNlVHlwZXM9e1dNUzoidXJuOm9nYzpzZXJ2aWNlVHlwZTpXTVMiLFdGUzoidXJuOm9nYzpzZXJ2aWNlVHlwZTpXRlMiLFdDUzoidXJuOm9nYzpzZXJ2aWNlVHlwZTpXQ1MiLEdNTDoidXJuOm9nYzpzZXJ2aWNlVHlwZTpHTUwiLFNMRDoidXJuOm9nYzpzZXJ2aWNlVHlwZTpTTEQiLEZFUzoidXJuOm9nYzpzZXJ2aWNlVHlwZTpGRVMiLEtNTDoidXJuOm9nYzpzZXJ2aWNlVHlwZTpLTUwifTtPcGVuTGF5ZXJzLkZvcm1hdC5XTUM9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkZvcm1hdC5Db250ZXh0LHtkZWZhdWx0VmVyc2lvbjoiMS4xLjAiLGxheWVyVG9Db250ZXh0OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZ2V0UGFyc2VyKCksYz17cXVlcnlhYmxlOmEucXVlcnlhYmxlLHZpc2liaWxpdHk6YS52aXNpYmlsaXR5LG5hbWU6YS5wYXJhbXMuTEFZRVJTLHRpdGxlOmEubmFtZSwiYWJzdHJhY3QiOmEubWV0YWRhdGFbImFic3RyYWN0Il0sZGF0YVVSTDphLm1ldGFkYXRhLmRhdGFVUkwsbWV0YWRhdGFVUkw6YS5tZXRhZGF0YVVSTCxzZXJ2ZXI6e3ZlcnNpb246YS5wYXJhbXMuVkVSU0lPTix1cmw6YS51cmx9LG1heEV4dGVudDphLm1heEV4dGVudCx0cmFuc3BhcmVudDphLnBhcmFtcy5UUkFOU1BBUkVOVCxudW1ab29tTGV2ZWxzOmEubnVtWm9vbUxldmVscyx1bml0czphLnVuaXRzLGlzQmFzZUxheWVyOmEuaXNCYXNlTGF5ZXIsb3BhY2l0eToxPT1hLm9wYWNpdHk/dm9pZCAwOgphLm9wYWNpdHksZGlzcGxheUluTGF5ZXJTd2l0Y2hlcjphLmRpc3BsYXlJbkxheWVyU3dpdGNoZXIsc2luZ2xlVGlsZTphLnNpbmdsZVRpbGUsdGlsZVNpemU6YS5zaW5nbGVUaWxlfHwhYS50aWxlU2l6ZT92b2lkIDA6e3dpZHRoOmEudGlsZVNpemUudyxoZWlnaHQ6YS50aWxlU2l6ZS5ofSxtaW5TY2FsZTphLm9wdGlvbnMucmVzb2x1dGlvbnN8fGEub3B0aW9ucy5zY2FsZXN8fGEub3B0aW9ucy5tYXhSZXNvbHV0aW9ufHxhLm9wdGlvbnMubWluU2NhbGU/YS5taW5TY2FsZTp2b2lkIDAsbWF4U2NhbGU6YS5vcHRpb25zLnJlc29sdXRpb25zfHxhLm9wdGlvbnMuc2NhbGVzfHxhLm9wdGlvbnMubWluUmVzb2x1dGlvbnx8YS5vcHRpb25zLm1heFNjYWxlP2EubWF4U2NhbGU6dm9pZCAwLGZvcm1hdHM6W10sc3R5bGVzOltdLHNyczphLnNycyxkaW1lbnNpb25zOmEuZGltZW5zaW9uc307YS5tZXRhZGF0YS5zZXJ2ZXJ0aXRsZSYmKGMuc2VydmVyLnRpdGxlPWEubWV0YWRhdGEuc2VydmVydGl0bGUpOwppZihhLm1ldGFkYXRhLmZvcm1hdHMmJjA8YS5tZXRhZGF0YS5mb3JtYXRzLmxlbmd0aClmb3IodmFyIGQ9MCxlPWEubWV0YWRhdGEuZm9ybWF0cy5sZW5ndGg7ZDxlO2QrKyl7dmFyIGY9YS5tZXRhZGF0YS5mb3JtYXRzW2RdO2MuZm9ybWF0cy5wdXNoKHt2YWx1ZTpmLnZhbHVlLGN1cnJlbnQ6Zi52YWx1ZT09YS5wYXJhbXMuRk9STUFUfSl9ZWxzZSBjLmZvcm1hdHMucHVzaCh7dmFsdWU6YS5wYXJhbXMuRk9STUFULGN1cnJlbnQ6ITB9KTtpZihhLm1ldGFkYXRhLnN0eWxlcyYmMDxhLm1ldGFkYXRhLnN0eWxlcy5sZW5ndGgpZm9yKGQ9MCxlPWEubWV0YWRhdGEuc3R5bGVzLmxlbmd0aDtkPGU7ZCsrKWI9YS5tZXRhZGF0YS5zdHlsZXNbZF0sYi5jdXJyZW50PWIuaHJlZj09YS5wYXJhbXMuU0xEfHxiLmJvZHk9PWEucGFyYW1zLlNMRF9CT0RZfHxiLm5hbWU9PWEucGFyYW1zLlNUWUxFUz8hMDohMSxjLnN0eWxlcy5wdXNoKGIpO2Vsc2UgYy5zdHlsZXMucHVzaCh7aHJlZjphLnBhcmFtcy5TTEQsCmJvZHk6YS5wYXJhbXMuU0xEX0JPRFksbmFtZTphLnBhcmFtcy5TVFlMRVN8fGIuZGVmYXVsdFN0eWxlTmFtZSx0aXRsZTpiLmRlZmF1bHRTdHlsZVRpdGxlLGN1cnJlbnQ6ITB9KTtyZXR1cm4gY30sdG9Db250ZXh0OmZ1bmN0aW9uKGEpe3ZhciBiPXt9LGM9YS5sYXllcnM7aWYoIk9wZW5MYXllcnMuTWFwIj09YS5DTEFTU19OQU1FKXt2YXIgZD1hLm1ldGFkYXRhfHx7fTtiLnNpemU9YS5nZXRTaXplKCk7Yi5ib3VuZHM9YS5nZXRFeHRlbnQoKTtiLnByb2plY3Rpb249YS5wcm9qZWN0aW9uO2IudGl0bGU9YS50aXRsZTtiLmtleXdvcmRzPWQua2V5d29yZHM7YlsiYWJzdHJhY3QiXT1kWyJhYnN0cmFjdCJdO2IubG9nbz1kLmxvZ287Yi5kZXNjcmlwdGlvblVSTD1kLmRlc2NyaXB0aW9uVVJMO2IuY29udGFjdEluZm9ybWF0aW9uPWQuY29udGFjdEluZm9ybWF0aW9uO2IubWF4RXh0ZW50PWEubWF4RXh0ZW50fWVsc2UgT3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoYixhKSx2b2lkIDAhPQpiLmxheWVycyYmZGVsZXRlIGIubGF5ZXJzO3ZvaWQgMD09Yi5sYXllcnNDb250ZXh0JiYoYi5sYXllcnNDb250ZXh0PVtdKTtpZih2b2lkIDAhPWMmJk9wZW5MYXllcnMuVXRpbC5pc0FycmF5KGMpKWZvcihhPTAsZD1jLmxlbmd0aDthPGQ7YSsrKXt2YXIgZT1jW2FdO2UgaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLkxheWVyLldNUyYmYi5sYXllcnNDb250ZXh0LnB1c2godGhpcy5sYXllclRvQ29udGV4dChlKSl9cmV0dXJuIGJ9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuRm9ybWF0LldNQyJ9KTtPcGVuTGF5ZXJzLkZvcm1hdC5XTUMudjE9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkZvcm1hdC5YTUwse25hbWVzcGFjZXM6e29sOiJodHRwOi8vb3BlbmxheWVycy5vcmcvY29udGV4dCIsd21jOiJodHRwOi8vd3d3Lm9wZW5naXMubmV0L2NvbnRleHQiLHNsZDoiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9zbGQiLHhsaW5rOiJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIix4c2k6Imh0dHA6Ly93d3cudzMub3JnLzIwMDEvWE1MU2NoZW1hLWluc3RhbmNlIn0sc2NoZW1hTG9jYXRpb246IiIsZ2V0TmFtZXNwYWNlUHJlZml4OmZ1bmN0aW9uKGEpe3ZhciBiPW51bGw7aWYobnVsbD09YSliPXRoaXMubmFtZXNwYWNlc1t0aGlzLmRlZmF1bHRQcmVmaXhdO2Vsc2UgZm9yKGIgaW4gdGhpcy5uYW1lc3BhY2VzKWlmKHRoaXMubmFtZXNwYWNlc1tiXT09YSlicmVhaztyZXR1cm4gYn0sZGVmYXVsdFByZWZpeDoid21jIixyb290UHJlZml4Om51bGwsZGVmYXVsdFN0eWxlTmFtZToiIiwKZGVmYXVsdFN0eWxlVGl0bGU6IkRlZmF1bHQiLGluaXRpYWxpemU6ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5Gb3JtYXQuWE1MLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsW2FdKX0scmVhZDpmdW5jdGlvbihhKXsic3RyaW5nIj09dHlwZW9mIGEmJihhPU9wZW5MYXllcnMuRm9ybWF0LlhNTC5wcm90b3R5cGUucmVhZC5hcHBseSh0aGlzLFthXSkpO2E9YS5kb2N1bWVudEVsZW1lbnQ7dGhpcy5yb290UHJlZml4PWEucHJlZml4O3ZhciBiPXt2ZXJzaW9uOmEuZ2V0QXR0cmlidXRlKCJ2ZXJzaW9uIil9O3RoaXMucnVuQ2hpbGROb2RlcyhiLGEpO3JldHVybiBifSxydW5DaGlsZE5vZGVzOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPWIuY2hpbGROb2RlcyxkLGUsZixnPTAsaD1jLmxlbmd0aDtnPGg7KytnKWQ9Y1tnXSwxPT1kLm5vZGVUeXBlJiYoZT10aGlzLmdldE5hbWVzcGFjZVByZWZpeChkLm5hbWVzcGFjZVVSSSksZj1kLm5vZGVOYW1lLnNwbGl0KCI6IikucG9wKCksCihlPXRoaXNbInJlYWRfIitlKyJfIitmXSkmJmUuYXBwbHkodGhpcyxbYSxkXSkpfSxyZWFkX3dtY19HZW5lcmFsOmZ1bmN0aW9uKGEsYil7dGhpcy5ydW5DaGlsZE5vZGVzKGEsYil9LHJlYWRfd21jX0JvdW5kaW5nQm94OmZ1bmN0aW9uKGEsYil7YS5wcm9qZWN0aW9uPWIuZ2V0QXR0cmlidXRlKCJTUlMiKTthLmJvdW5kcz1uZXcgT3BlbkxheWVycy5Cb3VuZHMoYi5nZXRBdHRyaWJ1dGUoIm1pbngiKSxiLmdldEF0dHJpYnV0ZSgibWlueSIpLGIuZ2V0QXR0cmlidXRlKCJtYXh4IiksYi5nZXRBdHRyaWJ1dGUoIm1heHkiKSl9LHJlYWRfd21jX0xheWVyTGlzdDpmdW5jdGlvbihhLGIpe2EubGF5ZXJzQ29udGV4dD1bXTt0aGlzLnJ1bkNoaWxkTm9kZXMoYSxiKX0scmVhZF93bWNfTGF5ZXI6ZnVuY3Rpb24oYSxiKXt2YXIgYz17dmlzaWJpbGl0eToiMSIhPWIuZ2V0QXR0cmlidXRlKCJoaWRkZW4iKSxxdWVyeWFibGU6IjEiPT1iLmdldEF0dHJpYnV0ZSgicXVlcnlhYmxlIiksZm9ybWF0czpbXSwKc3R5bGVzOltdLG1ldGFkYXRhOnt9fTt0aGlzLnJ1bkNoaWxkTm9kZXMoYyxiKTthLmxheWVyc0NvbnRleHQucHVzaChjKX0scmVhZF93bWNfRXh0ZW5zaW9uOmZ1bmN0aW9uKGEsYil7dGhpcy5ydW5DaGlsZE5vZGVzKGEsYil9LHJlYWRfb2xfdW5pdHM6ZnVuY3Rpb24oYSxiKXthLnVuaXRzPXRoaXMuZ2V0Q2hpbGRWYWx1ZShiKX0scmVhZF9vbF9tYXhFeHRlbnQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz1uZXcgT3BlbkxheWVycy5Cb3VuZHMoYi5nZXRBdHRyaWJ1dGUoIm1pbngiKSxiLmdldEF0dHJpYnV0ZSgibWlueSIpLGIuZ2V0QXR0cmlidXRlKCJtYXh4IiksYi5nZXRBdHRyaWJ1dGUoIm1heHkiKSk7YS5tYXhFeHRlbnQ9Y30scmVhZF9vbF90cmFuc3BhcmVudDpmdW5jdGlvbihhLGIpe2EudHJhbnNwYXJlbnQ9dGhpcy5nZXRDaGlsZFZhbHVlKGIpfSxyZWFkX29sX251bVpvb21MZXZlbHM6ZnVuY3Rpb24oYSxiKXthLm51bVpvb21MZXZlbHM9cGFyc2VJbnQodGhpcy5nZXRDaGlsZFZhbHVlKGIpKX0sCnJlYWRfb2xfb3BhY2l0eTpmdW5jdGlvbihhLGIpe2Eub3BhY2l0eT1wYXJzZUZsb2F0KHRoaXMuZ2V0Q2hpbGRWYWx1ZShiKSl9LHJlYWRfb2xfc2luZ2xlVGlsZTpmdW5jdGlvbihhLGIpe2Euc2luZ2xlVGlsZT0idHJ1ZSI9PXRoaXMuZ2V0Q2hpbGRWYWx1ZShiKX0scmVhZF9vbF90aWxlU2l6ZTpmdW5jdGlvbihhLGIpe3ZhciBjPXt3aWR0aDpiLmdldEF0dHJpYnV0ZSgid2lkdGgiKSxoZWlnaHQ6Yi5nZXRBdHRyaWJ1dGUoImhlaWdodCIpfTthLnRpbGVTaXplPWN9LHJlYWRfb2xfaXNCYXNlTGF5ZXI6ZnVuY3Rpb24oYSxiKXthLmlzQmFzZUxheWVyPSJ0cnVlIj09dGhpcy5nZXRDaGlsZFZhbHVlKGIpfSxyZWFkX29sX2Rpc3BsYXlJbkxheWVyU3dpdGNoZXI6ZnVuY3Rpb24oYSxiKXthLmRpc3BsYXlJbkxheWVyU3dpdGNoZXI9InRydWUiPT10aGlzLmdldENoaWxkVmFsdWUoYil9LHJlYWRfd21jX1NlcnZlcjpmdW5jdGlvbihhLGIpe2EudmVyc2lvbj1iLmdldEF0dHJpYnV0ZSgidmVyc2lvbiIpOwphLnVybD10aGlzLmdldE9ubGluZVJlc291cmNlX2hyZWYoYik7YS5tZXRhZGF0YS5zZXJ2ZXJ0aXRsZT1iLmdldEF0dHJpYnV0ZSgidGl0bGUiKX0scmVhZF93bWNfRm9ybWF0TGlzdDpmdW5jdGlvbihhLGIpe3RoaXMucnVuQ2hpbGROb2RlcyhhLGIpfSxyZWFkX3dtY19Gb3JtYXQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz17dmFsdWU6dGhpcy5nZXRDaGlsZFZhbHVlKGIpfTsiMSI9PWIuZ2V0QXR0cmlidXRlKCJjdXJyZW50IikmJihjLmN1cnJlbnQ9ITApO2EuZm9ybWF0cy5wdXNoKGMpfSxyZWFkX3dtY19TdHlsZUxpc3Q6ZnVuY3Rpb24oYSxiKXt0aGlzLnJ1bkNoaWxkTm9kZXMoYSxiKX0scmVhZF93bWNfU3R5bGU6ZnVuY3Rpb24oYSxiKXt2YXIgYz17fTt0aGlzLnJ1bkNoaWxkTm9kZXMoYyxiKTsiMSI9PWIuZ2V0QXR0cmlidXRlKCJjdXJyZW50IikmJihjLmN1cnJlbnQ9ITApO2Euc3R5bGVzLnB1c2goYyl9LHJlYWRfd21jX1NMRDpmdW5jdGlvbihhLGIpe3RoaXMucnVuQ2hpbGROb2RlcyhhLApiKX0scmVhZF9zbGRfU3R5bGVkTGF5ZXJEZXNjcmlwdG9yOmZ1bmN0aW9uKGEsYil7dmFyIGM9T3BlbkxheWVycy5Gb3JtYXQuWE1MLnByb3RvdHlwZS53cml0ZS5hcHBseSh0aGlzLFtiXSk7YS5ib2R5PWN9LHJlYWRfc2xkX0ZlYXR1cmVUeXBlU3R5bGU6ZnVuY3Rpb24oYSxiKXt2YXIgYz1PcGVuTGF5ZXJzLkZvcm1hdC5YTUwucHJvdG90eXBlLndyaXRlLmFwcGx5KHRoaXMsW2JdKTthLmJvZHk9Y30scmVhZF93bWNfT25saW5lUmVzb3VyY2U6ZnVuY3Rpb24oYSxiKXthLmhyZWY9dGhpcy5nZXRBdHRyaWJ1dGVOUyhiLHRoaXMubmFtZXNwYWNlcy54bGluaywiaHJlZiIpfSxyZWFkX3dtY19OYW1lOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5nZXRDaGlsZFZhbHVlKGIpO2MmJihhLm5hbWU9Yyl9LHJlYWRfd21jX1RpdGxlOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5nZXRDaGlsZFZhbHVlKGIpO2MmJihhLnRpdGxlPWMpfSxyZWFkX3dtY19NZXRhZGF0YVVSTDpmdW5jdGlvbihhLApiKXthLm1ldGFkYXRhVVJMPXRoaXMuZ2V0T25saW5lUmVzb3VyY2VfaHJlZihiKX0scmVhZF93bWNfS2V5d29yZExpc3Q6ZnVuY3Rpb24oYSxiKXthLmtleXdvcmRzPVtdO3RoaXMucnVuQ2hpbGROb2RlcyhhLmtleXdvcmRzLGIpfSxyZWFkX3dtY19LZXl3b3JkOmZ1bmN0aW9uKGEsYil7YS5wdXNoKHRoaXMuZ2V0Q2hpbGRWYWx1ZShiKSl9LHJlYWRfd21jX0Fic3RyYWN0OmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5nZXRDaGlsZFZhbHVlKGIpO2MmJihhWyJhYnN0cmFjdCJdPWMpfSxyZWFkX3dtY19Mb2dvVVJMOmZ1bmN0aW9uKGEsYil7YS5sb2dvPXt3aWR0aDpiLmdldEF0dHJpYnV0ZSgid2lkdGgiKSxoZWlnaHQ6Yi5nZXRBdHRyaWJ1dGUoImhlaWdodCIpLGZvcm1hdDpiLmdldEF0dHJpYnV0ZSgiZm9ybWF0IiksaHJlZjp0aGlzLmdldE9ubGluZVJlc291cmNlX2hyZWYoYil9fSxyZWFkX3dtY19EZXNjcmlwdGlvblVSTDpmdW5jdGlvbihhLGIpe2EuZGVzY3JpcHRpb25VUkw9CnRoaXMuZ2V0T25saW5lUmVzb3VyY2VfaHJlZihiKX0scmVhZF93bWNfQ29udGFjdEluZm9ybWF0aW9uOmZ1bmN0aW9uKGEsYil7dmFyIGM9e307dGhpcy5ydW5DaGlsZE5vZGVzKGMsYik7YS5jb250YWN0SW5mb3JtYXRpb249Y30scmVhZF93bWNfQ29udGFjdFBlcnNvblByaW1hcnk6ZnVuY3Rpb24oYSxiKXt2YXIgYz17fTt0aGlzLnJ1bkNoaWxkTm9kZXMoYyxiKTthLnBlcnNvblByaW1hcnk9Y30scmVhZF93bWNfQ29udGFjdFBlcnNvbjpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuZ2V0Q2hpbGRWYWx1ZShiKTtjJiYoYS5wZXJzb249Yyl9LHJlYWRfd21jX0NvbnRhY3RPcmdhbml6YXRpb246ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmdldENoaWxkVmFsdWUoYik7YyYmKGEub3JnYW5pemF0aW9uPWMpfSxyZWFkX3dtY19Db250YWN0UG9zaXRpb246ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmdldENoaWxkVmFsdWUoYik7YyYmKGEucG9zaXRpb249Yyl9LHJlYWRfd21jX0NvbnRhY3RBZGRyZXNzOmZ1bmN0aW9uKGEsCmIpe3ZhciBjPXt9O3RoaXMucnVuQ2hpbGROb2RlcyhjLGIpO2EuY29udGFjdEFkZHJlc3M9Y30scmVhZF93bWNfQWRkcmVzc1R5cGU6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmdldENoaWxkVmFsdWUoYik7YyYmKGEudHlwZT1jKX0scmVhZF93bWNfQWRkcmVzczpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuZ2V0Q2hpbGRWYWx1ZShiKTtjJiYoYS5hZGRyZXNzPWMpfSxyZWFkX3dtY19DaXR5OmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5nZXRDaGlsZFZhbHVlKGIpO2MmJihhLmNpdHk9Yyl9LHJlYWRfd21jX1N0YXRlT3JQcm92aW5jZTpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuZ2V0Q2hpbGRWYWx1ZShiKTtjJiYoYS5zdGF0ZU9yUHJvdmluY2U9Yyl9LHJlYWRfd21jX1Bvc3RDb2RlOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5nZXRDaGlsZFZhbHVlKGIpO2MmJihhLnBvc3Rjb2RlPWMpfSxyZWFkX3dtY19Db3VudHJ5OmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5nZXRDaGlsZFZhbHVlKGIpOwpjJiYoYS5jb3VudHJ5PWMpfSxyZWFkX3dtY19Db250YWN0Vm9pY2VUZWxlcGhvbmU6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmdldENoaWxkVmFsdWUoYik7YyYmKGEucGhvbmU9Yyl9LHJlYWRfd21jX0NvbnRhY3RGYWNzaW1pbGVUZWxlcGhvbmU6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmdldENoaWxkVmFsdWUoYik7YyYmKGEuZmF4PWMpfSxyZWFkX3dtY19Db250YWN0RWxlY3Ryb25pY01haWxBZGRyZXNzOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5nZXRDaGlsZFZhbHVlKGIpO2MmJihhLmVtYWlsPWMpfSxyZWFkX3dtY19EYXRhVVJMOmZ1bmN0aW9uKGEsYil7YS5kYXRhVVJMPXRoaXMuZ2V0T25saW5lUmVzb3VyY2VfaHJlZihiKX0scmVhZF93bWNfTGVnZW5kVVJMOmZ1bmN0aW9uKGEsYil7dmFyIGM9e3dpZHRoOmIuZ2V0QXR0cmlidXRlKCJ3aWR0aCIpLGhlaWdodDpiLmdldEF0dHJpYnV0ZSgiaGVpZ2h0IiksZm9ybWF0OmIuZ2V0QXR0cmlidXRlKCJmb3JtYXQiKSwKaHJlZjp0aGlzLmdldE9ubGluZVJlc291cmNlX2hyZWYoYil9O2EubGVnZW5kPWN9LHJlYWRfd21jX0RpbWVuc2lvbkxpc3Q6ZnVuY3Rpb24oYSxiKXthLmRpbWVuc2lvbnM9e307dGhpcy5ydW5DaGlsZE5vZGVzKGEuZGltZW5zaW9ucyxiKX0scmVhZF93bWNfRGltZW5zaW9uOmZ1bmN0aW9uKGEsYil7dmFyIGM9e25hbWU6Yi5nZXRBdHRyaWJ1dGUoIm5hbWUiKS50b0xvd2VyQ2FzZSgpLHVuaXRzOmIuZ2V0QXR0cmlidXRlKCJ1bml0cyIpfHwiIix1bml0U3ltYm9sOmIuZ2V0QXR0cmlidXRlKCJ1bml0U3ltYm9sIil8fCIiLHVzZXJWYWx1ZTpiLmdldEF0dHJpYnV0ZSgidXNlclZhbHVlIil8fCIiLG5lYXJlc3RWYWx1ZToiMSI9PT1iLmdldEF0dHJpYnV0ZSgibmVhcmVzdFZhbHVlIiksbXVsdGlwbGVWYWx1ZXM6IjEiPT09Yi5nZXRBdHRyaWJ1dGUoIm11bHRpcGxlVmFsdWVzIiksY3VycmVudDoiMSI9PT1iLmdldEF0dHJpYnV0ZSgiY3VycmVudCIpLCJkZWZhdWx0IjpiLmdldEF0dHJpYnV0ZSgiZGVmYXVsdCIpfHwKIiJ9LGQ9dGhpcy5nZXRDaGlsZFZhbHVlKGIpO2MudmFsdWVzPWQuc3BsaXQoIiwiKTthW2MubmFtZV09Y30sd3JpdGU6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmNyZWF0ZUVsZW1lbnREZWZhdWx0TlMoIlZpZXdDb250ZXh0Iik7dGhpcy5zZXRBdHRyaWJ1dGVzKGMse3ZlcnNpb246dGhpcy5WRVJTSU9OLGlkOmImJiJzdHJpbmciPT10eXBlb2YgYi5pZD9iLmlkOk9wZW5MYXllcnMuVXRpbC5jcmVhdGVVbmlxdWVJRCgiT3BlbkxheWVyc19Db250ZXh0XyIpfSk7dGhpcy5zZXRBdHRyaWJ1dGVOUyhjLHRoaXMubmFtZXNwYWNlcy54c2ksInhzaTpzY2hlbWFMb2NhdGlvbiIsdGhpcy5zY2hlbWFMb2NhdGlvbik7Yy5hcHBlbmRDaGlsZCh0aGlzLndyaXRlX3dtY19HZW5lcmFsKGEpKTtjLmFwcGVuZENoaWxkKHRoaXMud3JpdGVfd21jX0xheWVyTGlzdChhKSk7cmV0dXJuIE9wZW5MYXllcnMuRm9ybWF0LlhNTC5wcm90b3R5cGUud3JpdGUuYXBwbHkodGhpcyxbY10pfSxjcmVhdGVFbGVtZW50RGVmYXVsdE5TOmZ1bmN0aW9uKGEsCmIsYyl7YT10aGlzLmNyZWF0ZUVsZW1lbnROUyh0aGlzLm5hbWVzcGFjZXNbdGhpcy5kZWZhdWx0UHJlZml4XSxhKTtiJiZhLmFwcGVuZENoaWxkKHRoaXMuY3JlYXRlVGV4dE5vZGUoYikpO2MmJnRoaXMuc2V0QXR0cmlidXRlcyhhLGMpO3JldHVybiBhfSxzZXRBdHRyaWJ1dGVzOmZ1bmN0aW9uKGEsYil7dmFyIGMsZDtmb3IoZCBpbiBiKWM9YltkXS50b1N0cmluZygpLGMubWF0Y2goL1tBLVpdLyk/dGhpcy5zZXRBdHRyaWJ1dGVOUyhhLG51bGwsZCxjKTphLnNldEF0dHJpYnV0ZShkLGMpfSx3cml0ZV93bWNfR2VuZXJhbDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnREZWZhdWx0TlMoIkdlbmVyYWwiKTthLnNpemUmJmIuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVFbGVtZW50RGVmYXVsdE5TKCJXaW5kb3ciLG51bGwse3dpZHRoOmEuc2l6ZS53LGhlaWdodDphLnNpemUuaH0pKTt2YXIgYz1hLmJvdW5kcztiLmFwcGVuZENoaWxkKHRoaXMuY3JlYXRlRWxlbWVudERlZmF1bHROUygiQm91bmRpbmdCb3giLApudWxsLHttaW54OmMubGVmdC50b1ByZWNpc2lvbigxOCksbWlueTpjLmJvdHRvbS50b1ByZWNpc2lvbigxOCksbWF4eDpjLnJpZ2h0LnRvUHJlY2lzaW9uKDE4KSxtYXh5OmMudG9wLnRvUHJlY2lzaW9uKDE4KSxTUlM6YS5wcm9qZWN0aW9ufSkpO2IuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVFbGVtZW50RGVmYXVsdE5TKCJUaXRsZSIsYS50aXRsZSkpO2Eua2V5d29yZHMmJmIuYXBwZW5kQ2hpbGQodGhpcy53cml0ZV93bWNfS2V5d29yZExpc3QoYS5rZXl3b3JkcykpO2FbImFic3RyYWN0Il0mJmIuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVFbGVtZW50RGVmYXVsdE5TKCJBYnN0cmFjdCIsYVsiYWJzdHJhY3QiXSkpO2EubG9nbyYmYi5hcHBlbmRDaGlsZCh0aGlzLndyaXRlX3dtY19VUkxUeXBlKCJMb2dvVVJMIixhLmxvZ28uaHJlZixhLmxvZ28pKTthLmRlc2NyaXB0aW9uVVJMJiZiLmFwcGVuZENoaWxkKHRoaXMud3JpdGVfd21jX1VSTFR5cGUoIkRlc2NyaXB0aW9uVVJMIixhLmRlc2NyaXB0aW9uVVJMKSk7CmEuY29udGFjdEluZm9ybWF0aW9uJiZiLmFwcGVuZENoaWxkKHRoaXMud3JpdGVfd21jX0NvbnRhY3RJbmZvcm1hdGlvbihhLmNvbnRhY3RJbmZvcm1hdGlvbikpO2IuYXBwZW5kQ2hpbGQodGhpcy53cml0ZV9vbF9NYXBFeHRlbnNpb24oYSkpO3JldHVybiBifSx3cml0ZV93bWNfS2V5d29yZExpc3Q6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPXRoaXMuY3JlYXRlRWxlbWVudERlZmF1bHROUygiS2V5d29yZExpc3QiKSxjPTAsZD1hLmxlbmd0aDtjPGQ7YysrKWIuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVFbGVtZW50RGVmYXVsdE5TKCJLZXl3b3JkIixhW2NdKSk7cmV0dXJuIGJ9LHdyaXRlX3dtY19Db250YWN0SW5mb3JtYXRpb246ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50RGVmYXVsdE5TKCJDb250YWN0SW5mb3JtYXRpb24iKTthLnBlcnNvblByaW1hcnkmJmIuYXBwZW5kQ2hpbGQodGhpcy53cml0ZV93bWNfQ29udGFjdFBlcnNvblByaW1hcnkoYS5wZXJzb25QcmltYXJ5KSk7CmEucG9zaXRpb24mJmIuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVFbGVtZW50RGVmYXVsdE5TKCJDb250YWN0UG9zaXRpb24iLGEucG9zaXRpb24pKTthLmNvbnRhY3RBZGRyZXNzJiZiLmFwcGVuZENoaWxkKHRoaXMud3JpdGVfd21jX0NvbnRhY3RBZGRyZXNzKGEuY29udGFjdEFkZHJlc3MpKTthLnBob25lJiZiLmFwcGVuZENoaWxkKHRoaXMuY3JlYXRlRWxlbWVudERlZmF1bHROUygiQ29udGFjdFZvaWNlVGVsZXBob25lIixhLnBob25lKSk7YS5mYXgmJmIuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVFbGVtZW50RGVmYXVsdE5TKCJDb250YWN0RmFjc2ltaWxlVGVsZXBob25lIixhLmZheCkpO2EuZW1haWwmJmIuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVFbGVtZW50RGVmYXVsdE5TKCJDb250YWN0RWxlY3Ryb25pY01haWxBZGRyZXNzIixhLmVtYWlsKSk7cmV0dXJuIGJ9LHdyaXRlX3dtY19Db250YWN0UGVyc29uUHJpbWFyeTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnREZWZhdWx0TlMoIkNvbnRhY3RQZXJzb25QcmltYXJ5Iik7CmEucGVyc29uJiZiLmFwcGVuZENoaWxkKHRoaXMuY3JlYXRlRWxlbWVudERlZmF1bHROUygiQ29udGFjdFBlcnNvbiIsYS5wZXJzb24pKTthLm9yZ2FuaXphdGlvbiYmYi5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZUVsZW1lbnREZWZhdWx0TlMoIkNvbnRhY3RPcmdhbml6YXRpb24iLGEub3JnYW5pemF0aW9uKSk7cmV0dXJuIGJ9LHdyaXRlX3dtY19Db250YWN0QWRkcmVzczpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnREZWZhdWx0TlMoIkNvbnRhY3RBZGRyZXNzIik7YS50eXBlJiZiLmFwcGVuZENoaWxkKHRoaXMuY3JlYXRlRWxlbWVudERlZmF1bHROUygiQWRkcmVzc1R5cGUiLGEudHlwZSkpO2EuYWRkcmVzcyYmYi5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZUVsZW1lbnREZWZhdWx0TlMoIkFkZHJlc3MiLGEuYWRkcmVzcykpO2EuY2l0eSYmYi5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZUVsZW1lbnREZWZhdWx0TlMoIkNpdHkiLGEuY2l0eSkpO2Euc3RhdGVPclByb3ZpbmNlJiYKYi5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZUVsZW1lbnREZWZhdWx0TlMoIlN0YXRlT3JQcm92aW5jZSIsYS5zdGF0ZU9yUHJvdmluY2UpKTthLnBvc3Rjb2RlJiZiLmFwcGVuZENoaWxkKHRoaXMuY3JlYXRlRWxlbWVudERlZmF1bHROUygiUG9zdENvZGUiLGEucG9zdGNvZGUpKTthLmNvdW50cnkmJmIuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVFbGVtZW50RGVmYXVsdE5TKCJDb3VudHJ5IixhLmNvdW50cnkpKTtyZXR1cm4gYn0sd3JpdGVfb2xfTWFwRXh0ZW5zaW9uOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3JlYXRlRWxlbWVudERlZmF1bHROUygiRXh0ZW5zaW9uIik7aWYoYT1hLm1heEV4dGVudCl7dmFyIGM9dGhpcy5jcmVhdGVFbGVtZW50TlModGhpcy5uYW1lc3BhY2VzLm9sLCJvbDptYXhFeHRlbnQiKTt0aGlzLnNldEF0dHJpYnV0ZXMoYyx7bWlueDphLmxlZnQudG9QcmVjaXNpb24oMTgpLG1pbnk6YS5ib3R0b20udG9QcmVjaXNpb24oMTgpLG1heHg6YS5yaWdodC50b1ByZWNpc2lvbigxOCksCm1heHk6YS50b3AudG9QcmVjaXNpb24oMTgpfSk7Yi5hcHBlbmRDaGlsZChjKX1yZXR1cm4gYn0sd3JpdGVfd21jX0xheWVyTGlzdDpmdW5jdGlvbihhKXtmb3IodmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50RGVmYXVsdE5TKCJMYXllckxpc3QiKSxjPTAsZD1hLmxheWVyc0NvbnRleHQubGVuZ3RoO2M8ZDsrK2MpYi5hcHBlbmRDaGlsZCh0aGlzLndyaXRlX3dtY19MYXllcihhLmxheWVyc0NvbnRleHRbY10pKTtyZXR1cm4gYn0sd3JpdGVfd21jX0xheWVyOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3JlYXRlRWxlbWVudERlZmF1bHROUygiTGF5ZXIiLG51bGwse3F1ZXJ5YWJsZTphLnF1ZXJ5YWJsZT8iMSI6IjAiLGhpZGRlbjphLnZpc2liaWxpdHk/IjAiOiIxIn0pO2IuYXBwZW5kQ2hpbGQodGhpcy53cml0ZV93bWNfU2VydmVyKGEpKTtiLmFwcGVuZENoaWxkKHRoaXMuY3JlYXRlRWxlbWVudERlZmF1bHROUygiTmFtZSIsYS5uYW1lKSk7Yi5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZUVsZW1lbnREZWZhdWx0TlMoIlRpdGxlIiwKYS50aXRsZSkpO2FbImFic3RyYWN0Il0mJmIuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVFbGVtZW50RGVmYXVsdE5TKCJBYnN0cmFjdCIsYVsiYWJzdHJhY3QiXSkpO2EuZGF0YVVSTCYmYi5hcHBlbmRDaGlsZCh0aGlzLndyaXRlX3dtY19VUkxUeXBlKCJEYXRhVVJMIixhLmRhdGFVUkwpKTthLm1ldGFkYXRhVVJMJiZiLmFwcGVuZENoaWxkKHRoaXMud3JpdGVfd21jX1VSTFR5cGUoIk1ldGFkYXRhVVJMIixhLm1ldGFkYXRhVVJMKSk7cmV0dXJuIGJ9LHdyaXRlX3dtY19MYXllckV4dGVuc2lvbjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnREZWZhdWx0TlMoIkV4dGVuc2lvbiIpLGM9YS5tYXhFeHRlbnQsZD10aGlzLmNyZWF0ZUVsZW1lbnROUyh0aGlzLm5hbWVzcGFjZXMub2wsIm9sOm1heEV4dGVudCIpO3RoaXMuc2V0QXR0cmlidXRlcyhkLHttaW54OmMubGVmdC50b1ByZWNpc2lvbigxOCksbWlueTpjLmJvdHRvbS50b1ByZWNpc2lvbigxOCksbWF4eDpjLnJpZ2h0LnRvUHJlY2lzaW9uKDE4KSwKbWF4eTpjLnRvcC50b1ByZWNpc2lvbigxOCl9KTtiLmFwcGVuZENoaWxkKGQpO2EudGlsZVNpemUmJiFhLnNpbmdsZVRpbGUmJihjPXRoaXMuY3JlYXRlRWxlbWVudE5TKHRoaXMubmFtZXNwYWNlcy5vbCwib2w6dGlsZVNpemUiKSx0aGlzLnNldEF0dHJpYnV0ZXMoYyxhLnRpbGVTaXplKSxiLmFwcGVuZENoaWxkKGMpKTtmb3IodmFyIGM9InRyYW5zcGFyZW50IG51bVpvb21MZXZlbHMgdW5pdHMgaXNCYXNlTGF5ZXIgb3BhY2l0eSBkaXNwbGF5SW5MYXllclN3aXRjaGVyIHNpbmdsZVRpbGUiLnNwbGl0KCIgIiksZT0wLGY9Yy5sZW5ndGg7ZTxmOysrZSkoZD10aGlzLmNyZWF0ZU9MUHJvcGVydHlOb2RlKGEsY1tlXSkpJiZiLmFwcGVuZENoaWxkKGQpO3JldHVybiBifSxjcmVhdGVPTFByb3BlcnR5Tm9kZTpmdW5jdGlvbihhLGIpe3ZhciBjPW51bGw7bnVsbCE9YVtiXSYmKGM9dGhpcy5jcmVhdGVFbGVtZW50TlModGhpcy5uYW1lc3BhY2VzLm9sLCJvbDoiK2IpLGMuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVUZXh0Tm9kZShhW2JdLnRvU3RyaW5nKCkpKSk7CnJldHVybiBjfSx3cml0ZV93bWNfU2VydmVyOmZ1bmN0aW9uKGEpe2E9YS5zZXJ2ZXI7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50RGVmYXVsdE5TKCJTZXJ2ZXIiKSxjPXtzZXJ2aWNlOiJPR0M6V01TIix2ZXJzaW9uOmEudmVyc2lvbn07YS50aXRsZSYmKGMudGl0bGU9YS50aXRsZSk7dGhpcy5zZXRBdHRyaWJ1dGVzKGIsYyk7Yi5hcHBlbmRDaGlsZCh0aGlzLndyaXRlX3dtY19PbmxpbmVSZXNvdXJjZShhLnVybCkpO3JldHVybiBifSx3cml0ZV93bWNfVVJMVHlwZTpmdW5jdGlvbihhLGIsYyl7YT10aGlzLmNyZWF0ZUVsZW1lbnREZWZhdWx0TlMoYSk7YS5hcHBlbmRDaGlsZCh0aGlzLndyaXRlX3dtY19PbmxpbmVSZXNvdXJjZShiKSk7aWYoYyl7Yj1bIndpZHRoIiwiaGVpZ2h0IiwiZm9ybWF0Il07Zm9yKHZhciBkPTA7ZDxiLmxlbmd0aDtkKyspYltkXWluIGMmJmEuc2V0QXR0cmlidXRlKGJbZF0sY1tiW2RdXSl9cmV0dXJuIGF9LHdyaXRlX3dtY19EaW1lbnNpb25MaXN0OmZ1bmN0aW9uKGEpe3ZhciBiPQp0aGlzLmNyZWF0ZUVsZW1lbnREZWZhdWx0TlMoIkRpbWVuc2lvbkxpc3QiKSxjO2ZvcihjIGluIGEuZGltZW5zaW9ucyl7dmFyIGQ9e30sZT1hLmRpbWVuc2lvbnNbY10sZjtmb3IoZiBpbiBlKWRbZl09ImJvb2xlYW4iPT10eXBlb2YgZVtmXT9OdW1iZXIoZVtmXSk6ZVtmXTtlPSIiO2QudmFsdWVzJiYoZT1kLnZhbHVlcy5qb2luKCIsIiksZGVsZXRlIGQudmFsdWVzKTtiLmFwcGVuZENoaWxkKHRoaXMuY3JlYXRlRWxlbWVudERlZmF1bHROUygiRGltZW5zaW9uIixlLGQpKX1yZXR1cm4gYn0sd3JpdGVfd21jX0Zvcm1hdExpc3Q6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPXRoaXMuY3JlYXRlRWxlbWVudERlZmF1bHROUygiRm9ybWF0TGlzdCIpLGM9MCxkPWEuZm9ybWF0cy5sZW5ndGg7YzxkO2MrKyl7dmFyIGU9YS5mb3JtYXRzW2NdO2IuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVFbGVtZW50RGVmYXVsdE5TKCJGb3JtYXQiLGUudmFsdWUsZS5jdXJyZW50JiYhMD09ZS5jdXJyZW50P3tjdXJyZW50OiIxIn06Cm51bGwpKX1yZXR1cm4gYn0sd3JpdGVfd21jX1N0eWxlTGlzdDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnREZWZhdWx0TlMoIlN0eWxlTGlzdCIpO2lmKChhPWEuc3R5bGVzKSYmT3BlbkxheWVycy5VdGlsLmlzQXJyYXkoYSkpZm9yKHZhciBjLGQ9MCxlPWEubGVuZ3RoO2Q8ZTtkKyspe3ZhciBmPWFbZF0sZz10aGlzLmNyZWF0ZUVsZW1lbnREZWZhdWx0TlMoIlN0eWxlIixudWxsLGYuY3VycmVudCYmITA9PWYuY3VycmVudD97Y3VycmVudDoiMSJ9Om51bGwpO2YuaHJlZj8oYz10aGlzLmNyZWF0ZUVsZW1lbnREZWZhdWx0TlMoIlNMRCIpLGYubmFtZSYmYy5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZUVsZW1lbnREZWZhdWx0TlMoIk5hbWUiLGYubmFtZSkpLGYudGl0bGUmJmMuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVFbGVtZW50RGVmYXVsdE5TKCJUaXRsZSIsZi50aXRsZSkpLGYubGVnZW5kJiZjLmFwcGVuZENoaWxkKHRoaXMud3JpdGVfd21jX1VSTFR5cGUoIkxlZ2VuZFVSTCIsCmYubGVnZW5kLmhyZWYsZi5sZWdlbmQpKSxmPXRoaXMud3JpdGVfd21jX09ubGluZVJlc291cmNlKGYuaHJlZiksYy5hcHBlbmRDaGlsZChmKSxnLmFwcGVuZENoaWxkKGMpKTpmLmJvZHk/KGM9dGhpcy5jcmVhdGVFbGVtZW50RGVmYXVsdE5TKCJTTEQiKSxmLm5hbWUmJmMuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVFbGVtZW50RGVmYXVsdE5TKCJOYW1lIixmLm5hbWUpKSxmLnRpdGxlJiZjLmFwcGVuZENoaWxkKHRoaXMuY3JlYXRlRWxlbWVudERlZmF1bHROUygiVGl0bGUiLGYudGl0bGUpKSxmLmxlZ2VuZCYmYy5hcHBlbmRDaGlsZCh0aGlzLndyaXRlX3dtY19VUkxUeXBlKCJMZWdlbmRVUkwiLGYubGVnZW5kLmhyZWYsZi5sZWdlbmQpKSxmPU9wZW5MYXllcnMuRm9ybWF0LlhNTC5wcm90b3R5cGUucmVhZC5hcHBseSh0aGlzLFtmLmJvZHldKS5kb2N1bWVudEVsZW1lbnQsYy5vd25lckRvY3VtZW50JiZjLm93bmVyRG9jdW1lbnQuaW1wb3J0Tm9kZSYmKGY9Yy5vd25lckRvY3VtZW50LmltcG9ydE5vZGUoZiwKITApKSxjLmFwcGVuZENoaWxkKGYpLGcuYXBwZW5kQ2hpbGQoYykpOihnLmFwcGVuZENoaWxkKHRoaXMuY3JlYXRlRWxlbWVudERlZmF1bHROUygiTmFtZSIsZi5uYW1lKSksZy5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZUVsZW1lbnREZWZhdWx0TlMoIlRpdGxlIixmLnRpdGxlKSksZlsiYWJzdHJhY3QiXSYmZy5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZUVsZW1lbnREZWZhdWx0TlMoIkFic3RyYWN0IixmWyJhYnN0cmFjdCJdKSksZi5sZWdlbmQmJmcuYXBwZW5kQ2hpbGQodGhpcy53cml0ZV93bWNfVVJMVHlwZSgiTGVnZW5kVVJMIixmLmxlZ2VuZC5ocmVmLGYubGVnZW5kKSkpO2IuYXBwZW5kQ2hpbGQoZyl9cmV0dXJuIGJ9LHdyaXRlX3dtY19PbmxpbmVSZXNvdXJjZTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnREZWZhdWx0TlMoIk9ubGluZVJlc291cmNlIik7dGhpcy5zZXRBdHRyaWJ1dGVOUyhiLHRoaXMubmFtZXNwYWNlcy54bGluaywieGxpbms6dHlwZSIsCiJzaW1wbGUiKTt0aGlzLnNldEF0dHJpYnV0ZU5TKGIsdGhpcy5uYW1lc3BhY2VzLnhsaW5rLCJ4bGluazpocmVmIixhKTtyZXR1cm4gYn0sZ2V0T25saW5lUmVzb3VyY2VfaHJlZjpmdW5jdGlvbihhKXt2YXIgYj17fTthPWEuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIk9ubGluZVJlc291cmNlIik7MDxhLmxlbmd0aCYmdGhpcy5yZWFkX3dtY19PbmxpbmVSZXNvdXJjZShiLGFbMF0pO3JldHVybiBiLmhyZWZ9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuRm9ybWF0LldNQy52MSJ9KTtPcGVuTGF5ZXJzLkNvbnRyb2wuUGFuUGFuZWw9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkNvbnRyb2wuUGFuZWwse3NsaWRlRmFjdG9yOjUwLHNsaWRlUmF0aW86bnVsbCxpbml0aWFsaXplOmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuQ29udHJvbC5QYW5lbC5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLFthXSk7YT17c2xpZGVGYWN0b3I6dGhpcy5zbGlkZUZhY3RvcixzbGlkZVJhdGlvOnRoaXMuc2xpZGVSYXRpb307dGhpcy5hZGRDb250cm9scyhbbmV3IE9wZW5MYXllcnMuQ29udHJvbC5QYW4oT3BlbkxheWVycy5Db250cm9sLlBhbi5OT1JUSCxhKSxuZXcgT3BlbkxheWVycy5Db250cm9sLlBhbihPcGVuTGF5ZXJzLkNvbnRyb2wuUGFuLlNPVVRILGEpLG5ldyBPcGVuTGF5ZXJzLkNvbnRyb2wuUGFuKE9wZW5MYXllcnMuQ29udHJvbC5QYW4uRUFTVCxhKSxuZXcgT3BlbkxheWVycy5Db250cm9sLlBhbihPcGVuTGF5ZXJzLkNvbnRyb2wuUGFuLldFU1QsYSldKX0sCkNMQVNTX05BTUU6Ik9wZW5MYXllcnMuQ29udHJvbC5QYW5QYW5lbCJ9KTtPcGVuTGF5ZXJzLkNvbnRyb2wuQXR0cmlidXRpb249T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkNvbnRyb2wse3NlcGFyYXRvcjoiLCAiLHRlbXBsYXRlOiIke2xheWVyc30iLGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLm1hcC5ldmVudHMudW4oe3JlbW92ZWxheWVyOnRoaXMudXBkYXRlQXR0cmlidXRpb24sYWRkbGF5ZXI6dGhpcy51cGRhdGVBdHRyaWJ1dGlvbixjaGFuZ2VsYXllcjp0aGlzLnVwZGF0ZUF0dHJpYnV0aW9uLGNoYW5nZWJhc2VsYXllcjp0aGlzLnVwZGF0ZUF0dHJpYnV0aW9uLHNjb3BlOnRoaXN9KTtPcGVuTGF5ZXJzLkNvbnRyb2wucHJvdG90eXBlLmRlc3Ryb3kuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxkcmF3OmZ1bmN0aW9uKCl7T3BlbkxheWVycy5Db250cm9sLnByb3RvdHlwZS5kcmF3LmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLm1hcC5ldmVudHMub24oe2NoYW5nZWJhc2VsYXllcjp0aGlzLnVwZGF0ZUF0dHJpYnV0aW9uLGNoYW5nZWxheWVyOnRoaXMudXBkYXRlQXR0cmlidXRpb24sCmFkZGxheWVyOnRoaXMudXBkYXRlQXR0cmlidXRpb24scmVtb3ZlbGF5ZXI6dGhpcy51cGRhdGVBdHRyaWJ1dGlvbixzY29wZTp0aGlzfSk7dGhpcy51cGRhdGVBdHRyaWJ1dGlvbigpO3JldHVybiB0aGlzLmRpdn0sdXBkYXRlQXR0cmlidXRpb246ZnVuY3Rpb24oKXt2YXIgYT1bXTtpZih0aGlzLm1hcCYmdGhpcy5tYXAubGF5ZXJzKXtmb3IodmFyIGI9MCxjPXRoaXMubWFwLmxheWVycy5sZW5ndGg7YjxjO2IrKyl7dmFyIGQ9dGhpcy5tYXAubGF5ZXJzW2JdO2QuYXR0cmlidXRpb24mJmQuZ2V0VmlzaWJpbGl0eSgpJiYtMT09PU9wZW5MYXllcnMuVXRpbC5pbmRleE9mKGEsZC5hdHRyaWJ1dGlvbikmJmEucHVzaChkLmF0dHJpYnV0aW9uKX10aGlzLmRpdi5pbm5lckhUTUw9T3BlbkxheWVycy5TdHJpbmcuZm9ybWF0KHRoaXMudGVtcGxhdGUse2xheWVyczphLmpvaW4odGhpcy5zZXBhcmF0b3IpfSl9fSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkNvbnRyb2wuQXR0cmlidXRpb24ifSk7T3BlbkxheWVycy5LaW5ldGljPU9wZW5MYXllcnMuQ2xhc3Moe3RocmVzaG9sZDowLGRlY2VsZXJhdGlvbjowLjAwMzUsbmJQb2ludHM6MTAwLGRlbGF5OjIwMCxwb2ludHM6dm9pZCAwLHRpbWVySWQ6dm9pZCAwLGluaXRpYWxpemU6ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5VdGlsLmV4dGVuZCh0aGlzLGEpfSxiZWdpbjpmdW5jdGlvbigpe09wZW5MYXllcnMuQW5pbWF0aW9uLnN0b3AodGhpcy50aW1lcklkKTt0aGlzLnRpbWVySWQ9dm9pZCAwO3RoaXMucG9pbnRzPVtdfSx1cGRhdGU6ZnVuY3Rpb24oYSl7dGhpcy5wb2ludHMudW5zaGlmdCh7eHk6YSx0aWNrOihuZXcgRGF0ZSkuZ2V0VGltZSgpfSk7dGhpcy5wb2ludHMubGVuZ3RoPnRoaXMubmJQb2ludHMmJnRoaXMucG9pbnRzLnBvcCgpfSxlbmQ6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiLGM9KG5ldyBEYXRlKS5nZXRUaW1lKCksZD0wLGU9dGhpcy5wb2ludHMubGVuZ3RoLGY7ZDxlO2QrKyl7Zj10aGlzLnBvaW50c1tkXTtpZihjLQpmLnRpY2s+dGhpcy5kZWxheSlicmVhaztiPWZ9aWYoYiYmKGQ9KG5ldyBEYXRlKS5nZXRUaW1lKCktYi50aWNrLGM9TWF0aC5zcXJ0KE1hdGgucG93KGEueC1iLnh5LngsMikrTWF0aC5wb3coYS55LWIueHkueSwyKSksZD1jL2QsISgwPT1kfHxkPHRoaXMudGhyZXNob2xkKSkpcmV0dXJuIGM9TWF0aC5hc2luKChhLnktYi54eS55KS9jKSxiLnh5Lng8PWEueCYmKGM9TWF0aC5QSS1jKSx7c3BlZWQ6ZCx0aGV0YTpjfX0sbW92ZTpmdW5jdGlvbihhLGIpe3ZhciBjPWEuc3BlZWQsZD1NYXRoLmNvcyhhLnRoZXRhKSxlPS1NYXRoLnNpbihhLnRoZXRhKSxmPShuZXcgRGF0ZSkuZ2V0VGltZSgpLGc9MCxoPTA7dGhpcy50aW1lcklkPU9wZW5MYXllcnMuQW5pbWF0aW9uLnN0YXJ0KE9wZW5MYXllcnMuRnVuY3Rpb24uYmluZChmdW5jdGlvbigpe2lmKG51bGwhPXRoaXMudGltZXJJZCl7dmFyIGE9KG5ldyBEYXRlKS5nZXRUaW1lKCktZixsPS10aGlzLmRlY2VsZXJhdGlvbipNYXRoLnBvdyhhLAoyKS8yK2MqYSxtPWwqZCxsPWwqZSxuLHA7bj0hMTswPj0tdGhpcy5kZWNlbGVyYXRpb24qYStjJiYoT3BlbkxheWVycy5BbmltYXRpb24uc3RvcCh0aGlzLnRpbWVySWQpLHRoaXMudGltZXJJZD1udWxsLG49ITApO2E9bS1nO3A9bC1oO2c9bTtoPWw7YihhLHAsbil9fSx0aGlzKSl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuS2luZXRpYyJ9KTtPcGVuTGF5ZXJzLkZvcm1hdC5XUFNFeGVjdXRlPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Gb3JtYXQuWE1MLE9wZW5MYXllcnMuRm9ybWF0LkZpbHRlci52MV8xXzAse25hbWVzcGFjZXM6e293czoiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9vd3MvMS4xIixnbWw6Imh0dHA6Ly93d3cub3Blbmdpcy5uZXQvZ21sIix3cHM6Imh0dHA6Ly93d3cub3Blbmdpcy5uZXQvd3BzLzEuMC4wIix3ZnM6Imh0dHA6Ly93d3cub3Blbmdpcy5uZXQvd2ZzIixvZ2M6Imh0dHA6Ly93d3cub3Blbmdpcy5uZXQvb2djIix3Y3M6Imh0dHA6Ly93d3cub3Blbmdpcy5uZXQvd2NzIix4bGluazoiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIseHNpOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxL1hNTFNjaGVtYS1pbnN0YW5jZSJ9LHJlZ0V4ZXM6e3RyaW1TcGFjZTovXlxzKnxccyokL2cscmVtb3ZlU3BhY2U6L1xzKi9nLHNwbGl0U3BhY2U6L1xzKy8sdHJpbUNvbW1hOi9ccyosXHMqL2d9LFZFUlNJT046IjEuMC4wIiwKc2NoZW1hTG9jYXRpb246Imh0dHA6Ly93d3cub3Blbmdpcy5uZXQvd3BzLzEuMC4wIGh0dHA6Ly9zY2hlbWFzLm9wZW5naXMubmV0L3dwcy8xLjAuMC93cHNBbGwueHNkIixzY2hlbWFMb2NhdGlvbkF0dHI6ZnVuY3Rpb24oYSl7fSx3cml0ZTpmdW5jdGlvbihhKXt2YXIgYjt3aW5kb3cuQWN0aXZlWE9iamVjdD90aGlzLnhtbGRvbT1iPW5ldyBBY3RpdmVYT2JqZWN0KCJNaWNyb3NvZnQuWE1MRE9NIik6Yj1kb2N1bWVudC5pbXBsZW1lbnRhdGlvbi5jcmVhdGVEb2N1bWVudCgiIiwiIixudWxsKTthPXRoaXMud3JpdGVOb2RlKCJ3cHM6RXhlY3V0ZSIsYSxiKTt0aGlzLnNldEF0dHJpYnV0ZU5TKGEsdGhpcy5uYW1lc3BhY2VzLnhzaSwieHNpOnNjaGVtYUxvY2F0aW9uIix0aGlzLnNjaGVtYUxvY2F0aW9uKTtyZXR1cm4gT3BlbkxheWVycy5Gb3JtYXQuWE1MLnByb3RvdHlwZS53cml0ZS5hcHBseSh0aGlzLFthXSl9LHJlYWQ6ZnVuY3Rpb24oYSl7InN0cmluZyI9PXR5cGVvZiBhJiYoYT0KT3BlbkxheWVycy5Gb3JtYXQuWE1MLnByb3RvdHlwZS5yZWFkLmFwcGx5KHRoaXMsW2FdKSk7YSYmOT09YS5ub2RlVHlwZSYmKGE9YS5kb2N1bWVudEVsZW1lbnQpO3ZhciBiPXt9O3RoaXMucmVhZE5vZGUoYSxiKTtyZXR1cm4gYn0sd3JpdGVyczp7d3BzOntFeGVjdXRlOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygid3BzOkV4ZWN1dGUiLHthdHRyaWJ1dGVzOnt2ZXJzaW9uOnRoaXMuVkVSU0lPTixzZXJ2aWNlOiJXUFMifX0pO3RoaXMud3JpdGVOb2RlKCJvd3M6SWRlbnRpZmllciIsYS5pZGVudGlmaWVyLGIpO3RoaXMud3JpdGVOb2RlKCJ3cHM6RGF0YUlucHV0cyIsYS5kYXRhSW5wdXRzLGIpO3RoaXMud3JpdGVOb2RlKCJ3cHM6UmVzcG9uc2VGb3JtIixhLnJlc3BvbnNlRm9ybSxiKTtyZXR1cm4gYn0sUmVzcG9uc2VGb3JtOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygid3BzOlJlc3BvbnNlRm9ybSIse30pO2EucmF3RGF0YU91dHB1dCYmCnRoaXMud3JpdGVOb2RlKCJ3cHM6UmF3RGF0YU91dHB1dCIsYS5yYXdEYXRhT3V0cHV0LGIpO2EucmVzcG9uc2VEb2N1bWVudCYmdGhpcy53cml0ZU5vZGUoIndwczpSZXNwb25zZURvY3VtZW50IixhLnJlc3BvbnNlRG9jdW1lbnQsYik7cmV0dXJuIGJ9LFJlc3BvbnNlRG9jdW1lbnQ6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJ3cHM6UmVzcG9uc2VEb2N1bWVudCIse2F0dHJpYnV0ZXM6e3N0b3JlRXhlY3V0ZVJlc3BvbnNlOmEuc3RvcmVFeGVjdXRlUmVzcG9uc2UsbGluZWFnZTphLmxpbmVhZ2Usc3RhdHVzOmEuc3RhdHVzfX0pO2lmKGEub3V0cHV0cylmb3IodmFyIGM9MCxkPWEub3V0cHV0cy5sZW5ndGg7YzxkO2MrKyl0aGlzLndyaXRlTm9kZSgid3BzOk91dHB1dCIsYS5vdXRwdXRzW2NdLGIpO3JldHVybiBifSxPdXRwdXQ6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJ3cHM6T3V0cHV0Iix7YXR0cmlidXRlczp7YXNSZWZlcmVuY2U6YS5hc1JlZmVyZW5jZSwKbWltZVR5cGU6YS5taW1lVHlwZSxlbmNvZGluZzphLmVuY29kaW5nLHNjaGVtYTphLnNjaGVtYX19KTt0aGlzLndyaXRlTm9kZSgib3dzOklkZW50aWZpZXIiLGEuaWRlbnRpZmllcixiKTt0aGlzLndyaXRlTm9kZSgib3dzOlRpdGxlIixhLnRpdGxlLGIpO3RoaXMud3JpdGVOb2RlKCJvd3M6QWJzdHJhY3QiLGFbImFic3RyYWN0Il0sYik7cmV0dXJuIGJ9LFJhd0RhdGFPdXRwdXQ6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJ3cHM6UmF3RGF0YU91dHB1dCIse2F0dHJpYnV0ZXM6e21pbWVUeXBlOmEubWltZVR5cGUsZW5jb2Rpbmc6YS5lbmNvZGluZyxzY2hlbWE6YS5zY2hlbWF9fSk7dGhpcy53cml0ZU5vZGUoIm93czpJZGVudGlmaWVyIixhLmlkZW50aWZpZXIsYik7cmV0dXJuIGJ9LERhdGFJbnB1dHM6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygid3BzOkRhdGFJbnB1dHMiLHt9KSxjPTAsZD1hLmxlbmd0aDtjPApkOysrYyl0aGlzLndyaXRlTm9kZSgid3BzOklucHV0IixhW2NdLGIpO3JldHVybiBifSxJbnB1dDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoIndwczpJbnB1dCIse30pO3RoaXMud3JpdGVOb2RlKCJvd3M6SWRlbnRpZmllciIsYS5pZGVudGlmaWVyLGIpO2EudGl0bGUmJnRoaXMud3JpdGVOb2RlKCJvd3M6VGl0bGUiLGEudGl0bGUsYik7YS5kYXRhJiZ0aGlzLndyaXRlTm9kZSgid3BzOkRhdGEiLGEuZGF0YSxiKTthLnJlZmVyZW5jZSYmdGhpcy53cml0ZU5vZGUoIndwczpSZWZlcmVuY2UiLGEucmVmZXJlbmNlLGIpO2EuYm91bmRpbmdCb3hEYXRhJiZ0aGlzLndyaXRlTm9kZSgid3BzOkJvdW5kaW5nQm94RGF0YSIsYS5ib3VuZGluZ0JveERhdGEsYik7cmV0dXJuIGJ9LERhdGE6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJ3cHM6RGF0YSIse30pO2EubGl0ZXJhbERhdGE/dGhpcy53cml0ZU5vZGUoIndwczpMaXRlcmFsRGF0YSIsCmEubGl0ZXJhbERhdGEsYik6YS5jb21wbGV4RGF0YT90aGlzLndyaXRlTm9kZSgid3BzOkNvbXBsZXhEYXRhIixhLmNvbXBsZXhEYXRhLGIpOmEuYm91bmRpbmdCb3hEYXRhJiZ0aGlzLndyaXRlTm9kZSgib3dzOkJvdW5kaW5nQm94IixhLmJvdW5kaW5nQm94RGF0YSxiKTtyZXR1cm4gYn0sTGl0ZXJhbERhdGE6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygid3BzOkxpdGVyYWxEYXRhIix7YXR0cmlidXRlczp7dW9tOmEudW9tfSx2YWx1ZTphLnZhbHVlfSl9LENvbXBsZXhEYXRhOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygid3BzOkNvbXBsZXhEYXRhIix7YXR0cmlidXRlczp7bWltZVR5cGU6YS5taW1lVHlwZSxlbmNvZGluZzphLmVuY29kaW5nLHNjaGVtYTphLnNjaGVtYX19KSxjPWEudmFsdWU7InN0cmluZyI9PT10eXBlb2YgYz9iLmFwcGVuZENoaWxkKHRoaXMuZ2V0WE1MRG9jKCkuY3JlYXRlQ0RBVEFTZWN0aW9uKGEudmFsdWUpKToKYi5hcHBlbmRDaGlsZChjKTtyZXR1cm4gYn0sUmVmZXJlbmNlOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygid3BzOlJlZmVyZW5jZSIse2F0dHJpYnV0ZXM6e21pbWVUeXBlOmEubWltZVR5cGUsInhsaW5rOmhyZWYiOmEuaHJlZixtZXRob2Q6YS5tZXRob2QsZW5jb2Rpbmc6YS5lbmNvZGluZyxzY2hlbWE6YS5zY2hlbWF9fSk7YS5ib2R5JiZ0aGlzLndyaXRlTm9kZSgid3BzOkJvZHkiLGEuYm9keSxiKTtyZXR1cm4gYn0sQm91bmRpbmdCb3hEYXRhOmZ1bmN0aW9uKGEsYil7dGhpcy53cml0ZXJzLm93cy5Cb3VuZGluZ0JveC5hcHBseSh0aGlzLFthLGIsIndwczpCb3VuZGluZ0JveERhdGEiXSl9LEJvZHk6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJ3cHM6Qm9keSIse30pO2Eud2NzP3RoaXMud3JpdGVOb2RlKCJ3Y3M6R2V0Q292ZXJhZ2UiLGEud2NzLGIpOmEud2ZzPyh0aGlzLmZlYXR1cmVUeXBlPWEud2ZzLmZlYXR1cmVUeXBlLAp0aGlzLnZlcnNpb249YS53ZnMudmVyc2lvbix0aGlzLndyaXRlTm9kZSgid2ZzOkdldEZlYXR1cmUiLGEud2ZzLGIpKTp0aGlzLndyaXRlTm9kZSgid3BzOkV4ZWN1dGUiLGEsYik7cmV0dXJuIGJ9fSx3Y3M6T3BlbkxheWVycy5Gb3JtYXQuV0NTR2V0Q292ZXJhZ2UucHJvdG90eXBlLndyaXRlcnMud2NzLHdmczpPcGVuTGF5ZXJzLkZvcm1hdC5XRlNULnYxXzFfMC5wcm90b3R5cGUud3JpdGVycy53ZnMsb2djOk9wZW5MYXllcnMuRm9ybWF0LkZpbHRlci52MV8xXzAucHJvdG90eXBlLndyaXRlcnMub2djLG93czpPcGVuTGF5ZXJzLkZvcm1hdC5PV1NDb21tb24udjFfMV8wLnByb3RvdHlwZS53cml0ZXJzLm93c30scmVhZGVyczp7d3BzOntFeGVjdXRlUmVzcG9uc2U6ZnVuY3Rpb24oYSxiKXtiLmV4ZWN1dGVSZXNwb25zZT17bGFuZzphLmdldEF0dHJpYnV0ZSgibGFuZyIpLHN0YXR1c0xvY2F0aW9uOmEuZ2V0QXR0cmlidXRlKCJzdGF0dXNMb2NhdGlvbiIpLHNlcnZpY2VJbnN0YW5jZTphLmdldEF0dHJpYnV0ZSgic2VydmljZUluc3RhbmNlIiksCnNlcnZpY2U6YS5nZXRBdHRyaWJ1dGUoInNlcnZpY2UiKX07dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGIuZXhlY3V0ZVJlc3BvbnNlKX0sUHJvY2VzczpmdW5jdGlvbihhLGIpe2IucHJvY2Vzcz17fTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYi5wcm9jZXNzKX0sU3RhdHVzOmZ1bmN0aW9uKGEsYil7Yi5zdGF0dXM9e2NyZWF0aW9uVGltZTphLmdldEF0dHJpYnV0ZSgiY3JlYXRpb25UaW1lIil9O3RoaXMucmVhZENoaWxkTm9kZXMoYSxiLnN0YXR1cyl9LFByb2Nlc3NTdWNjZWVkZWQ6ZnVuY3Rpb24oYSxiKXtiLnByb2Nlc3NTdWNjZWVkZWQ9ITB9LFByb2Nlc3NPdXRwdXRzOmZ1bmN0aW9uKGEsYil7Yi5wcm9jZXNzT3V0cHV0cz1bXTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYi5wcm9jZXNzT3V0cHV0cyl9LE91dHB1dDpmdW5jdGlvbihhLGIpe3ZhciBjPXt9O3RoaXMucmVhZENoaWxkTm9kZXMoYSxjKTtiLnB1c2goYyl9LFJlZmVyZW5jZTpmdW5jdGlvbihhLGIpe2IucmVmZXJlbmNlPQp7aHJlZjphLmdldEF0dHJpYnV0ZSgiaHJlZiIpLG1pbWVUeXBlOmEuZ2V0QXR0cmlidXRlKCJtaW1lVHlwZSIpLGVuY29kaW5nOmEuZ2V0QXR0cmlidXRlKCJlbmNvZGluZyIpLHNjaGVtYTphLmdldEF0dHJpYnV0ZSgic2NoZW1hIil9fSxEYXRhOmZ1bmN0aW9uKGEsYil7Yi5kYXRhPXt9O3RoaXMucmVhZENoaWxkTm9kZXMoYSxiKX0sTGl0ZXJhbERhdGE6ZnVuY3Rpb24oYSxiKXtiLmxpdGVyYWxEYXRhPXtkYXRhVHlwZTphLmdldEF0dHJpYnV0ZSgiZGF0YVR5cGUiKSx1b206YS5nZXRBdHRyaWJ1dGUoInVvbSIpLHZhbHVlOnRoaXMuZ2V0Q2hpbGRWYWx1ZShhKX19LENvbXBsZXhEYXRhOmZ1bmN0aW9uKGEsYil7Yi5jb21wbGV4RGF0YT17bWltZVR5cGU6YS5nZXRBdHRyaWJ1dGUoIm1pbWVUeXBlIiksc2NoZW1hOmEuZ2V0QXR0cmlidXRlKCJzY2hlbWEiKSxlbmNvZGluZzphLmdldEF0dHJpYnV0ZSgiZW5jb2RpbmciKSx2YWx1ZToiIn07aWYodGhpcy5pc1NpbXBsZUNvbnRlbnQoYSkpe3ZhciBjOwpmb3IoYz1hLmZpcnN0Q2hpbGQ7YztjPWMubmV4dFNpYmxpbmcpc3dpdGNoKGMubm9kZVR5cGUpe2Nhc2UgMzpjYXNlIDQ6Yi5jb21wbGV4RGF0YS52YWx1ZSs9Yy5ub2RlVmFsdWV9fWVsc2UgZm9yKGM9YS5maXJzdENoaWxkO2M7Yz1jLm5leHRTaWJsaW5nKTE9PWMubm9kZVR5cGUmJihiLmNvbXBsZXhEYXRhLnZhbHVlPWMpfSxCb3VuZGluZ0JveDpmdW5jdGlvbihhLGIpe2IuYm91bmRpbmdCb3hEYXRhPXtkaW1lbnNpb25zOmEuZ2V0QXR0cmlidXRlKCJkaW1lbnNpb25zIiksY3JzOmEuZ2V0QXR0cmlidXRlKCJjcnMiKX07dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGIuYm91bmRpbmdCb3hEYXRhKX19LG93czpPcGVuTGF5ZXJzLkZvcm1hdC5PV1NDb21tb24udjFfMV8wLnByb3RvdHlwZS5yZWFkZXJzLm93c30sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Gb3JtYXQuV1BTRXhlY3V0ZSJ9KTtPcGVuTGF5ZXJzLkxheWVyLkdlb1JTUz1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuTGF5ZXIuTWFya2Vycyx7bG9jYXRpb246bnVsbCxmZWF0dXJlczpudWxsLGZvcm1hdE9wdGlvbnM6bnVsbCxzZWxlY3RlZEZlYXR1cmU6bnVsbCxpY29uOm51bGwscG9wdXBTaXplOm51bGwsdXNlRmVlZFRpdGxlOiEwLGluaXRpYWxpemU6ZnVuY3Rpb24oYSxiLGMpe09wZW5MYXllcnMuTGF5ZXIuTWFya2Vycy5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLFthLGNdKTt0aGlzLmxvY2F0aW9uPWI7dGhpcy5mZWF0dXJlcz1bXX0sZGVzdHJveTpmdW5jdGlvbigpe09wZW5MYXllcnMuTGF5ZXIuTWFya2Vycy5wcm90b3R5cGUuZGVzdHJveS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5jbGVhckZlYXR1cmVzKCk7dGhpcy5mZWF0dXJlcz1udWxsfSxsb2FkUlNTOmZ1bmN0aW9uKCl7dGhpcy5sb2FkZWR8fCh0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoImxvYWRzdGFydCIpLE9wZW5MYXllcnMuUmVxdWVzdC5HRVQoe3VybDp0aGlzLmxvY2F0aW9uLApzdWNjZXNzOnRoaXMucGFyc2VEYXRhLHNjb3BlOnRoaXN9KSx0aGlzLmxvYWRlZD0hMCl9LG1vdmVUbzpmdW5jdGlvbihhLGIsYyl7T3BlbkxheWVycy5MYXllci5NYXJrZXJzLnByb3RvdHlwZS5tb3ZlVG8uYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMudmlzaWJpbGl0eSYmIXRoaXMubG9hZGVkJiZ0aGlzLmxvYWRSU1MoKX0scGFyc2VEYXRhOmZ1bmN0aW9uKGEpe3ZhciBiPWEucmVzcG9uc2VYTUw7YiYmYi5kb2N1bWVudEVsZW1lbnR8fChiPU9wZW5MYXllcnMuRm9ybWF0LlhNTC5wcm90b3R5cGUucmVhZChhLnJlc3BvbnNlVGV4dCkpO2lmKHRoaXMudXNlRmVlZFRpdGxlKXthPW51bGw7dHJ5e2E9Yi5nZXRFbGVtZW50c0J5VGFnTmFtZU5TKCIqIiwidGl0bGUiKVswXS5maXJzdENoaWxkLm5vZGVWYWx1ZX1jYXRjaChjKXthPWIuZ2V0RWxlbWVudHNCeVRhZ05hbWUoInRpdGxlIilbMF0uZmlyc3RDaGlsZC5ub2RlVmFsdWV9YSYmdGhpcy5zZXROYW1lKGEpfWE9e307T3BlbkxheWVycy5VdGlsLmV4dGVuZChhLAp0aGlzLmZvcm1hdE9wdGlvbnMpO3RoaXMubWFwJiYhdGhpcy5wcm9qZWN0aW9uLmVxdWFscyh0aGlzLm1hcC5nZXRQcm9qZWN0aW9uT2JqZWN0KCkpJiYoYS5leHRlcm5hbFByb2plY3Rpb249dGhpcy5wcm9qZWN0aW9uLGEuaW50ZXJuYWxQcm9qZWN0aW9uPXRoaXMubWFwLmdldFByb2plY3Rpb25PYmplY3QoKSk7Yj0obmV3IE9wZW5MYXllcnMuRm9ybWF0Lkdlb1JTUyhhKSkucmVhZChiKTthPTA7Zm9yKHZhciBkPWIubGVuZ3RoO2E8ZDthKyspe3ZhciBlPXt9LGY9YlthXTtpZihmLmdlb21ldHJ5KXt2YXIgZz1mLmF0dHJpYnV0ZXMudGl0bGU/Zi5hdHRyaWJ1dGVzLnRpdGxlOiJVbnRpdGxlZCIsaD1mLmF0dHJpYnV0ZXMuZGVzY3JpcHRpb24/Zi5hdHRyaWJ1dGVzLmRlc2NyaXB0aW9uOiJObyBkZXNjcmlwdGlvbi4iLGs9Zi5hdHRyaWJ1dGVzLmxpbms/Zi5hdHRyaWJ1dGVzLmxpbms6IiIsZj1mLmdlb21ldHJ5LmdldEJvdW5kcygpLmdldENlbnRlckxvbkxhdCgpO2UuaWNvbj0KbnVsbD09dGhpcy5pY29uP09wZW5MYXllcnMuTWFya2VyLmRlZmF1bHRJY29uKCk6dGhpcy5pY29uLmNsb25lKCk7ZS5wb3B1cFNpemU9dGhpcy5wb3B1cFNpemU/dGhpcy5wb3B1cFNpemUuY2xvbmUoKTpuZXcgT3BlbkxheWVycy5TaXplKDI1MCwxMjApO2lmKGd8fGgpe2UudGl0bGU9ZztlLmRlc2NyaXB0aW9uPWg7dmFyIGw9JzxkaXYgY2xhc3M9Im9sTGF5ZXJHZW9SU1NDbG9zZSI+W3hdPC9kaXY+JyxsPWwrJzxkaXYgY2xhc3M9Im9sTGF5ZXJHZW9SU1NUaXRsZSI+JztrJiYobCs9JzxhIGNsYXNzPSJsaW5rIiBocmVmPSInK2srJyIgdGFyZ2V0PSJfYmxhbmsiPicpO2wrPWc7ayYmKGwrPSI8L2E+Iik7bCs9IjwvZGl2PiI7bCs9JzxkaXYgc3R5bGU9IiIgY2xhc3M9Im9sTGF5ZXJHZW9SU1NEZXNjcmlwdGlvbiI+JztsKz1oO2wrPSI8L2Rpdj4iO2UucG9wdXBDb250ZW50SFRNTD1sfWY9bmV3IE9wZW5MYXllcnMuRmVhdHVyZSh0aGlzLGYsZSk7dGhpcy5mZWF0dXJlcy5wdXNoKGYpOwplPWYuY3JlYXRlTWFya2VyKCk7ZS5ldmVudHMucmVnaXN0ZXIoImNsaWNrIixmLHRoaXMubWFya2VyQ2xpY2spO3RoaXMuYWRkTWFya2VyKGUpfX10aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoImxvYWRlbmQiKX0sbWFya2VyQ2xpY2s6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcz09dGhpcy5sYXllci5zZWxlY3RlZEZlYXR1cmU7dGhpcy5sYXllci5zZWxlY3RlZEZlYXR1cmU9Yj9udWxsOnRoaXM7Zm9yKHZhciBjPTAsZD10aGlzLmxheWVyLm1hcC5wb3B1cHMubGVuZ3RoO2M8ZDtjKyspdGhpcy5sYXllci5tYXAucmVtb3ZlUG9wdXAodGhpcy5sYXllci5tYXAucG9wdXBzW2NdKTtifHwoYj10aGlzLmNyZWF0ZVBvcHVwKCksT3BlbkxheWVycy5FdmVudC5vYnNlcnZlKGIuZGl2LCJjbGljayIsT3BlbkxheWVycy5GdW5jdGlvbi5iaW5kKGZ1bmN0aW9uKCl7Zm9yKHZhciBhPTAsYj10aGlzLmxheWVyLm1hcC5wb3B1cHMubGVuZ3RoO2E8YjthKyspdGhpcy5sYXllci5tYXAucmVtb3ZlUG9wdXAodGhpcy5sYXllci5tYXAucG9wdXBzW2FdKX0sCnRoaXMpKSx0aGlzLmxheWVyLm1hcC5hZGRQb3B1cChiKSk7T3BlbkxheWVycy5FdmVudC5zdG9wKGEpfSxjbGVhckZlYXR1cmVzOmZ1bmN0aW9uKCl7aWYobnVsbCE9dGhpcy5mZWF0dXJlcylmb3IoOzA8dGhpcy5mZWF0dXJlcy5sZW5ndGg7KXt2YXIgYT10aGlzLmZlYXR1cmVzWzBdO09wZW5MYXllcnMuVXRpbC5yZW1vdmVJdGVtKHRoaXMuZmVhdHVyZXMsYSk7YS5kZXN0cm95KCl9fSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkxheWVyLkdlb1JTUyJ9KTtPcGVuTGF5ZXJzLlN5bWJvbGl6ZXIuUG9pbnQ9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLlN5bWJvbGl6ZXIse2luaXRpYWxpemU6ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5TeW1ib2xpemVyLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5TeW1ib2xpemVyLlBvaW50In0pO09wZW5MYXllcnMuU3ltYm9saXplci5MaW5lPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5TeW1ib2xpemVyLHtpbml0aWFsaXplOmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuU3ltYm9saXplci5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuU3ltYm9saXplci5MaW5lIn0pO09wZW5MYXllcnMuU3ltYm9saXplci5UZXh0PU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5TeW1ib2xpemVyLHtpbml0aWFsaXplOmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuU3ltYm9saXplci5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuU3ltYm9saXplci5UZXh0In0pO09wZW5MYXllcnMuRm9ybWF0LlNMRC52MT1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuRm9ybWF0LkZpbHRlci52MV8wXzAse25hbWVzcGFjZXM6e3NsZDoiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9zbGQiLG9nYzoiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9vZ2MiLGdtbDoiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9nbWwiLHhsaW5rOiJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIix4c2k6Imh0dHA6Ly93d3cudzMub3JnLzIwMDEvWE1MU2NoZW1hLWluc3RhbmNlIn0sZGVmYXVsdFByZWZpeDoic2xkIixzY2hlbWFMb2NhdGlvbjpudWxsLG11bHRpcGxlU3ltYm9saXplcnM6ITEsZmVhdHVyZVR5cGVDb3VudGVyOm51bGwsZGVmYXVsdFN5bWJvbGl6ZXI6e2ZpbGxDb2xvcjoiIzgwODA4MCIsZmlsbE9wYWNpdHk6MSxzdHJva2VDb2xvcjoiIzAwMDAwMCIsc3Ryb2tlT3BhY2l0eToxLHN0cm9rZVdpZHRoOjEsc3Ryb2tlRGFzaHN0eWxlOiJzb2xpZCIscG9pbnRSYWRpdXM6MywKZ3JhcGhpY05hbWU6InNxdWFyZSJ9LHJlYWQ6ZnVuY3Rpb24oYSxiKXtiPU9wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKGIsdGhpcy5vcHRpb25zKTt2YXIgYz17bmFtZWRMYXllcnM6ITA9PT1iLm5hbWVkTGF5ZXJzQXNBcnJheT9bXTp7fX07dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGMpO3JldHVybiBjfSxyZWFkZXJzOk9wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKHtzbGQ6e1N0eWxlZExheWVyRGVzY3JpcHRvcjpmdW5jdGlvbihhLGIpe2IudmVyc2lvbj1hLmdldEF0dHJpYnV0ZSgidmVyc2lvbiIpO3RoaXMucmVhZENoaWxkTm9kZXMoYSxiKX0sTmFtZTpmdW5jdGlvbihhLGIpe2IubmFtZT10aGlzLmdldENoaWxkVmFsdWUoYSl9LFRpdGxlOmZ1bmN0aW9uKGEsYil7Yi50aXRsZT10aGlzLmdldENoaWxkVmFsdWUoYSl9LEFic3RyYWN0OmZ1bmN0aW9uKGEsYil7Yi5kZXNjcmlwdGlvbj10aGlzLmdldENoaWxkVmFsdWUoYSl9LE5hbWVkTGF5ZXI6ZnVuY3Rpb24oYSxiKXt2YXIgYz0Ke3VzZXJTdHlsZXM6W10sbmFtZWRTdHlsZXM6W119O3RoaXMucmVhZENoaWxkTm9kZXMoYSxjKTtmb3IodmFyIGQ9MCxlPWMudXNlclN0eWxlcy5sZW5ndGg7ZDxlOysrZCljLnVzZXJTdHlsZXNbZF0ubGF5ZXJOYW1lPWMubmFtZTtPcGVuTGF5ZXJzLlV0aWwuaXNBcnJheShiLm5hbWVkTGF5ZXJzKT9iLm5hbWVkTGF5ZXJzLnB1c2goYyk6Yi5uYW1lZExheWVyc1tjLm5hbWVdPWN9LE5hbWVkU3R5bGU6ZnVuY3Rpb24oYSxiKXtiLm5hbWVkU3R5bGVzLnB1c2godGhpcy5nZXRDaGlsZE5hbWUoYS5maXJzdENoaWxkKSl9LFVzZXJTdHlsZTpmdW5jdGlvbihhLGIpe3ZhciBjPXtkZWZhdWx0c1BlclN5bWJvbGl6ZXI6ITAscnVsZXM6W119O3RoaXMuZmVhdHVyZVR5cGVDb3VudGVyPS0xO3RoaXMucmVhZENoaWxkTm9kZXMoYSxjKTt0aGlzLm11bHRpcGxlU3ltYm9saXplcnM/KGRlbGV0ZSBjLmRlZmF1bHRzUGVyU3ltYm9saXplcixjPW5ldyBPcGVuTGF5ZXJzLlN0eWxlMihjKSk6Yz1uZXcgT3BlbkxheWVycy5TdHlsZSh0aGlzLmRlZmF1bHRTeW1ib2xpemVyLApjKTtiLnVzZXJTdHlsZXMucHVzaChjKX0sSXNEZWZhdWx0OmZ1bmN0aW9uKGEsYil7IjEiPT10aGlzLmdldENoaWxkVmFsdWUoYSkmJihiLmlzRGVmYXVsdD0hMCl9LEZlYXR1cmVUeXBlU3R5bGU6ZnVuY3Rpb24oYSxiKXsrK3RoaXMuZmVhdHVyZVR5cGVDb3VudGVyO3ZhciBjPXtydWxlczp0aGlzLm11bHRpcGxlU3ltYm9saXplcnM/Yi5ydWxlczpbXX07dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGMpO3RoaXMubXVsdGlwbGVTeW1ib2xpemVyc3x8KGIucnVsZXM9Yy5ydWxlcyl9LFJ1bGU6ZnVuY3Rpb24oYSxiKXt2YXIgYzt0aGlzLm11bHRpcGxlU3ltYm9saXplcnMmJihjPXtzeW1ib2xpemVyczpbXX0pO2M9bmV3IE9wZW5MYXllcnMuUnVsZShjKTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYyk7Yi5ydWxlcy5wdXNoKGMpfSxFbHNlRmlsdGVyOmZ1bmN0aW9uKGEsYil7Yi5lbHNlRmlsdGVyPSEwfSxNaW5TY2FsZURlbm9taW5hdG9yOmZ1bmN0aW9uKGEsYil7Yi5taW5TY2FsZURlbm9taW5hdG9yPQpwYXJzZUZsb2F0KHRoaXMuZ2V0Q2hpbGRWYWx1ZShhKSl9LE1heFNjYWxlRGVub21pbmF0b3I6ZnVuY3Rpb24oYSxiKXtiLm1heFNjYWxlRGVub21pbmF0b3I9cGFyc2VGbG9hdCh0aGlzLmdldENoaWxkVmFsdWUoYSkpfSxUZXh0U3ltYm9saXplcjpmdW5jdGlvbihhLGIpe3ZhciBjPXt9O3RoaXMucmVhZENoaWxkTm9kZXMoYSxjKTt0aGlzLm11bHRpcGxlU3ltYm9saXplcnM/KGMuekluZGV4PXRoaXMuZmVhdHVyZVR5cGVDb3VudGVyLGIuc3ltYm9saXplcnMucHVzaChuZXcgT3BlbkxheWVycy5TeW1ib2xpemVyLlRleHQoYykpKTpiLnN5bWJvbGl6ZXIuVGV4dD1PcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyhjLGIuc3ltYm9saXplci5UZXh0KX0sTGFiZWxQbGFjZW1lbnQ6ZnVuY3Rpb24oYSxiKXt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYil9LFBvaW50UGxhY2VtZW50OmZ1bmN0aW9uKGEsYil7dmFyIGM9e307dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGMpO2MubGFiZWxSb3RhdGlvbj0KYy5yb3RhdGlvbjtkZWxldGUgYy5yb3RhdGlvbjt2YXIgZCxlPWIubGFiZWxBbmNob3JQb2ludFgsZj1iLmxhYmVsQW5jaG9yUG9pbnRZO2U8PTEvMz9kPSJsIjplPjEvMyYmZTwyLzM/ZD0iYyI6ZT49Mi8zJiYoZD0iciIpO2Y8PTEvMz9kKz0iYiI6Zj4xLzMmJmY8Mi8zP2QrPSJtIjpmPj0yLzMmJihkKz0idCIpO2MubGFiZWxBbGlnbj1kO09wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKGIsYyl9LEFuY2hvclBvaW50OmZ1bmN0aW9uKGEsYil7dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGIpfSxBbmNob3JQb2ludFg6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLnJlYWRlcnMub2djLl9leHByZXNzaW9uLmNhbGwodGhpcyxhKTtjJiYoYi5sYWJlbEFuY2hvclBvaW50WD1jKX0sQW5jaG9yUG9pbnRZOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5yZWFkZXJzLm9nYy5fZXhwcmVzc2lvbi5jYWxsKHRoaXMsYSk7YyYmKGIubGFiZWxBbmNob3JQb2ludFk9Yyl9LERpc3BsYWNlbWVudDpmdW5jdGlvbihhLApiKXt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYil9LERpc3BsYWNlbWVudFg6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLnJlYWRlcnMub2djLl9leHByZXNzaW9uLmNhbGwodGhpcyxhKTtjJiYoYi5sYWJlbFhPZmZzZXQ9Yyl9LERpc3BsYWNlbWVudFk6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLnJlYWRlcnMub2djLl9leHByZXNzaW9uLmNhbGwodGhpcyxhKTtjJiYoYi5sYWJlbFlPZmZzZXQ9Yyl9LExpbmVQbGFjZW1lbnQ6ZnVuY3Rpb24oYSxiKXt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYil9LFBlcnBlbmRpY3VsYXJPZmZzZXQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLnJlYWRlcnMub2djLl9leHByZXNzaW9uLmNhbGwodGhpcyxhKTtjJiYoYi5sYWJlbFBlcnBlbmRpY3VsYXJPZmZzZXQ9Yyl9LExhYmVsOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5yZWFkZXJzLm9nYy5fZXhwcmVzc2lvbi5jYWxsKHRoaXMsYSk7YyYmKGIubGFiZWw9Yyl9LEZvbnQ6ZnVuY3Rpb24oYSxiKXt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsCmIpfSxIYWxvOmZ1bmN0aW9uKGEsYil7dmFyIGM9e307dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGMpO2IuaGFsb1JhZGl1cz1jLmhhbG9SYWRpdXM7Yi5oYWxvQ29sb3I9Yy5maWxsQ29sb3I7Yi5oYWxvT3BhY2l0eT1jLmZpbGxPcGFjaXR5fSxSYWRpdXM6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLnJlYWRlcnMub2djLl9leHByZXNzaW9uLmNhbGwodGhpcyxhKTtudWxsIT1jJiYoYi5oYWxvUmFkaXVzPWMpfSxSYXN0ZXJTeW1ib2xpemVyOmZ1bmN0aW9uKGEsYil7dmFyIGM9e307dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGMpO3RoaXMubXVsdGlwbGVTeW1ib2xpemVycz8oYy56SW5kZXg9dGhpcy5mZWF0dXJlVHlwZUNvdW50ZXIsYi5zeW1ib2xpemVycy5wdXNoKG5ldyBPcGVuTGF5ZXJzLlN5bWJvbGl6ZXIuUmFzdGVyKGMpKSk6Yi5zeW1ib2xpemVyLlJhc3Rlcj1PcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyhjLGIuc3ltYm9saXplci5SYXN0ZXIpfSxHZW9tZXRyeTpmdW5jdGlvbihhLApiKXtiLmdlb21ldHJ5PXt9O3RoaXMucmVhZENoaWxkTm9kZXMoYSxiLmdlb21ldHJ5KX0sQ29sb3JNYXA6ZnVuY3Rpb24oYSxiKXtiLmNvbG9yTWFwPVtdO3RoaXMucmVhZENoaWxkTm9kZXMoYSxiLmNvbG9yTWFwKX0sQ29sb3JNYXBFbnRyeTpmdW5jdGlvbihhLGIpe3ZhciBjPWEuZ2V0QXR0cmlidXRlKCJxdWFudGl0eSIpLGQ9YS5nZXRBdHRyaWJ1dGUoIm9wYWNpdHkiKTtiLnB1c2goe2NvbG9yOmEuZ2V0QXR0cmlidXRlKCJjb2xvciIpLHF1YW50aXR5Om51bGwhPT1jP3BhcnNlRmxvYXQoYyk6dm9pZCAwLGxhYmVsOmEuZ2V0QXR0cmlidXRlKCJsYWJlbCIpfHx2b2lkIDAsb3BhY2l0eTpudWxsIT09ZD9wYXJzZUZsb2F0KGQpOnZvaWQgMH0pfSxMaW5lU3ltYm9saXplcjpmdW5jdGlvbihhLGIpe3ZhciBjPXt9O3RoaXMucmVhZENoaWxkTm9kZXMoYSxjKTt0aGlzLm11bHRpcGxlU3ltYm9saXplcnM/KGMuekluZGV4PXRoaXMuZmVhdHVyZVR5cGVDb3VudGVyLGIuc3ltYm9saXplcnMucHVzaChuZXcgT3BlbkxheWVycy5TeW1ib2xpemVyLkxpbmUoYykpKToKYi5zeW1ib2xpemVyLkxpbmU9T3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoYyxiLnN5bWJvbGl6ZXIuTGluZSl9LFBvbHlnb25TeW1ib2xpemVyOmZ1bmN0aW9uKGEsYil7dmFyIGM9e2ZpbGw6ITEsc3Ryb2tlOiExfTt0aGlzLm11bHRpcGxlU3ltYm9saXplcnN8fChjPWIuc3ltYm9saXplci5Qb2x5Z29ufHxjKTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYyk7dGhpcy5tdWx0aXBsZVN5bWJvbGl6ZXJzPyhjLnpJbmRleD10aGlzLmZlYXR1cmVUeXBlQ291bnRlcixiLnN5bWJvbGl6ZXJzLnB1c2gobmV3IE9wZW5MYXllcnMuU3ltYm9saXplci5Qb2x5Z29uKGMpKSk6Yi5zeW1ib2xpemVyLlBvbHlnb249Y30sUG9pbnRTeW1ib2xpemVyOmZ1bmN0aW9uKGEsYil7dmFyIGM9e2ZpbGw6ITEsc3Ryb2tlOiExLGdyYXBoaWM6ITF9O3RoaXMubXVsdGlwbGVTeW1ib2xpemVyc3x8KGM9Yi5zeW1ib2xpemVyLlBvaW50fHxjKTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYyk7dGhpcy5tdWx0aXBsZVN5bWJvbGl6ZXJzPwooYy56SW5kZXg9dGhpcy5mZWF0dXJlVHlwZUNvdW50ZXIsYi5zeW1ib2xpemVycy5wdXNoKG5ldyBPcGVuTGF5ZXJzLlN5bWJvbGl6ZXIuUG9pbnQoYykpKTpiLnN5bWJvbGl6ZXIuUG9pbnQ9Y30sU3Ryb2tlOmZ1bmN0aW9uKGEsYil7Yi5zdHJva2U9ITA7dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGIpfSxGaWxsOmZ1bmN0aW9uKGEsYil7Yi5maWxsPSEwO3RoaXMucmVhZENoaWxkTm9kZXMoYSxiKX0sQ3NzUGFyYW1ldGVyOmZ1bmN0aW9uKGEsYil7dmFyIGM9YS5nZXRBdHRyaWJ1dGUoIm5hbWUiKSxkPXRoaXMuY3NzTWFwW2NdO2IubGFiZWwmJigiZmlsbCI9PT1jP2Q9ImZvbnRDb2xvciI6ImZpbGwtb3BhY2l0eSI9PT1jJiYoZD0iZm9udE9wYWNpdHkiKSk7ZCYmKGM9dGhpcy5yZWFkZXJzLm9nYy5fZXhwcmVzc2lvbi5jYWxsKHRoaXMsYSkpJiYoYltkXT1jKX0sR3JhcGhpYzpmdW5jdGlvbihhLGIpe2IuZ3JhcGhpYz0hMDt2YXIgYz17fTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYyk7CmZvcih2YXIgZD0ic3Ryb2tlIHN0cm9rZUNvbG9yIHN0cm9rZVdpZHRoIHN0cm9rZU9wYWNpdHkgc3Ryb2tlTGluZWNhcCBmaWxsIGZpbGxDb2xvciBmaWxsT3BhY2l0eSBncmFwaGljTmFtZSByb3RhdGlvbiBncmFwaGljRm9ybWF0Ii5zcGxpdCgiICIpLGUsZixnPTAsaD1kLmxlbmd0aDtnPGg7KytnKWU9ZFtnXSxmPWNbZV0sdm9pZCAwIT1mJiYoYltlXT1mKTt2b2lkIDAhPWMub3BhY2l0eSYmKGIuZ3JhcGhpY09wYWNpdHk9Yy5vcGFjaXR5KTt2b2lkIDAhPWMuc2l6ZSYmKGlzTmFOKGMuc2l6ZS8yKT9iLmdyYXBoaWNXaWR0aD1jLnNpemU6Yi5wb2ludFJhZGl1cz1jLnNpemUvMik7dm9pZCAwIT1jLmhyZWYmJihiLmV4dGVybmFsR3JhcGhpYz1jLmhyZWYpO3ZvaWQgMCE9Yy5yb3RhdGlvbiYmKGIucm90YXRpb249Yy5yb3RhdGlvbil9LEV4dGVybmFsR3JhcGhpYzpmdW5jdGlvbihhLGIpe3RoaXMucmVhZENoaWxkTm9kZXMoYSxiKX0sTWFyazpmdW5jdGlvbihhLGIpe3RoaXMucmVhZENoaWxkTm9kZXMoYSwKYil9LFdlbGxLbm93bk5hbWU6ZnVuY3Rpb24oYSxiKXtiLmdyYXBoaWNOYW1lPXRoaXMuZ2V0Q2hpbGRWYWx1ZShhKX0sT3BhY2l0eTpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMucmVhZGVycy5vZ2MuX2V4cHJlc3Npb24uY2FsbCh0aGlzLGEpO2MmJihiLm9wYWNpdHk9Yyl9LFNpemU6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLnJlYWRlcnMub2djLl9leHByZXNzaW9uLmNhbGwodGhpcyxhKTtjJiYoYi5zaXplPWMpfSxSb3RhdGlvbjpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMucmVhZGVycy5vZ2MuX2V4cHJlc3Npb24uY2FsbCh0aGlzLGEpO2MmJihiLnJvdGF0aW9uPWMpfSxPbmxpbmVSZXNvdXJjZTpmdW5jdGlvbihhLGIpe2IuaHJlZj10aGlzLmdldEF0dHJpYnV0ZU5TKGEsdGhpcy5uYW1lc3BhY2VzLnhsaW5rLCJocmVmIil9LEZvcm1hdDpmdW5jdGlvbihhLGIpe2IuZ3JhcGhpY0Zvcm1hdD10aGlzLmdldENoaWxkVmFsdWUoYSl9fX0sT3BlbkxheWVycy5Gb3JtYXQuRmlsdGVyLnYxXzBfMC5wcm90b3R5cGUucmVhZGVycyksCmNzc01hcDp7c3Ryb2tlOiJzdHJva2VDb2xvciIsInN0cm9rZS1vcGFjaXR5Ijoic3Ryb2tlT3BhY2l0eSIsInN0cm9rZS13aWR0aCI6InN0cm9rZVdpZHRoIiwic3Ryb2tlLWxpbmVjYXAiOiJzdHJva2VMaW5lY2FwIiwic3Ryb2tlLWRhc2hhcnJheSI6InN0cm9rZURhc2hzdHlsZSIsZmlsbDoiZmlsbENvbG9yIiwiZmlsbC1vcGFjaXR5IjoiZmlsbE9wYWNpdHkiLCJmb250LWZhbWlseSI6ImZvbnRGYW1pbHkiLCJmb250LXNpemUiOiJmb250U2l6ZSIsImZvbnQtd2VpZ2h0IjoiZm9udFdlaWdodCIsImZvbnQtc3R5bGUiOiJmb250U3R5bGUifSxnZXRDc3NQcm9wZXJ0eTpmdW5jdGlvbihhKXt2YXIgYj1udWxsLGM7Zm9yKGMgaW4gdGhpcy5jc3NNYXApaWYodGhpcy5jc3NNYXBbY109PWEpe2I9YzticmVha31yZXR1cm4gYn0sZ2V0R3JhcGhpY0Zvcm1hdDpmdW5jdGlvbihhKXt2YXIgYixjO2ZvcihjIGluIHRoaXMuZ3JhcGhpY0Zvcm1hdHMpaWYodGhpcy5ncmFwaGljRm9ybWF0c1tjXS50ZXN0KGEpKXtiPQpjO2JyZWFrfXJldHVybiBifHx0aGlzLmRlZmF1bHRHcmFwaGljRm9ybWF0fSxkZWZhdWx0R3JhcGhpY0Zvcm1hdDoiaW1hZ2UvcG5nIixncmFwaGljRm9ybWF0czp7ImltYWdlL2pwZWciOi9cLmpwZT9nJC9pLCJpbWFnZS9naWYiOi9cLmdpZiQvaSwiaW1hZ2UvcG5nIjovXC5wbmckL2l9LHdyaXRlOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLndyaXRlcnMuc2xkLlN0eWxlZExheWVyRGVzY3JpcHRvci5hcHBseSh0aGlzLFthXSl9LHdyaXRlcnM6T3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoe3NsZDp7X09HQ0V4cHJlc3Npb246ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoYSksZD0ic3RyaW5nIj09dHlwZW9mIGI/Yi5zcGxpdCgiJHsiKTpbYl07Yy5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZVRleHROb2RlKGRbMF0pKTtmb3IodmFyIGUsZixnPTEsaD1kLmxlbmd0aDtnPGg7ZysrKWU9ZFtnXSxmPWUuaW5kZXhPZigifSIpLDA8Zj8odGhpcy53cml0ZU5vZGUoIm9nYzpQcm9wZXJ0eU5hbWUiLAp7cHJvcGVydHk6ZS5zdWJzdHJpbmcoMCxmKX0sYyksYy5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZVRleHROb2RlKGUuc3Vic3RyaW5nKCsrZikpKSk6Yy5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZVRleHROb2RlKCIkeyIrZSkpO3JldHVybiBjfSxTdHlsZWRMYXllckRlc2NyaXB0b3I6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJzbGQ6U3R5bGVkTGF5ZXJEZXNjcmlwdG9yIix7YXR0cmlidXRlczp7dmVyc2lvbjp0aGlzLlZFUlNJT04sInhzaTpzY2hlbWFMb2NhdGlvbiI6dGhpcy5zY2hlbWFMb2NhdGlvbn19KTtiLnNldEF0dHJpYnV0ZSgieG1sbnM6b2djIix0aGlzLm5hbWVzcGFjZXMub2djKTtiLnNldEF0dHJpYnV0ZSgieG1sbnM6Z21sIix0aGlzLm5hbWVzcGFjZXMuZ21sKTthLm5hbWUmJnRoaXMud3JpdGVOb2RlKCJOYW1lIixhLm5hbWUsYik7YS50aXRsZSYmdGhpcy53cml0ZU5vZGUoIlRpdGxlIixhLnRpdGxlLGIpO2EuZGVzY3JpcHRpb24mJgp0aGlzLndyaXRlTm9kZSgiQWJzdHJhY3QiLGEuZGVzY3JpcHRpb24sYik7aWYoT3BlbkxheWVycy5VdGlsLmlzQXJyYXkoYS5uYW1lZExheWVycykpZm9yKHZhciBjPTAsZD1hLm5hbWVkTGF5ZXJzLmxlbmd0aDtjPGQ7KytjKXRoaXMud3JpdGVOb2RlKCJOYW1lZExheWVyIixhLm5hbWVkTGF5ZXJzW2NdLGIpO2Vsc2UgZm9yKGMgaW4gYS5uYW1lZExheWVycyl0aGlzLndyaXRlTm9kZSgiTmFtZWRMYXllciIsYS5uYW1lZExheWVyc1tjXSxiKTtyZXR1cm4gYn0sTmFtZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJzbGQ6TmFtZSIse3ZhbHVlOmF9KX0sVGl0bGU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygic2xkOlRpdGxlIix7dmFsdWU6YX0pfSxBYnN0cmFjdDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJzbGQ6QWJzdHJhY3QiLHt2YWx1ZTphfSl9LE5hbWVkTGF5ZXI6ZnVuY3Rpb24oYSl7dmFyIGI9CnRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygic2xkOk5hbWVkTGF5ZXIiKTt0aGlzLndyaXRlTm9kZSgiTmFtZSIsYS5uYW1lLGIpO2lmKGEubmFtZWRTdHlsZXMpZm9yKHZhciBjPTAsZD1hLm5hbWVkU3R5bGVzLmxlbmd0aDtjPGQ7KytjKXRoaXMud3JpdGVOb2RlKCJOYW1lZFN0eWxlIixhLm5hbWVkU3R5bGVzW2NdLGIpO2lmKGEudXNlclN0eWxlcylmb3IoYz0wLGQ9YS51c2VyU3R5bGVzLmxlbmd0aDtjPGQ7KytjKXRoaXMud3JpdGVOb2RlKCJVc2VyU3R5bGUiLGEudXNlclN0eWxlc1tjXSxiKTtyZXR1cm4gYn0sTmFtZWRTdHlsZTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoInNsZDpOYW1lZFN0eWxlIik7dGhpcy53cml0ZU5vZGUoIk5hbWUiLGEsYik7cmV0dXJuIGJ9LFVzZXJTdHlsZTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoInNsZDpVc2VyU3R5bGUiKTthLm5hbWUmJnRoaXMud3JpdGVOb2RlKCJOYW1lIiwKYS5uYW1lLGIpO2EudGl0bGUmJnRoaXMud3JpdGVOb2RlKCJUaXRsZSIsYS50aXRsZSxiKTthLmRlc2NyaXB0aW9uJiZ0aGlzLndyaXRlTm9kZSgiQWJzdHJhY3QiLGEuZGVzY3JpcHRpb24sYik7YS5pc0RlZmF1bHQmJnRoaXMud3JpdGVOb2RlKCJJc0RlZmF1bHQiLGEuaXNEZWZhdWx0LGIpO2lmKHRoaXMubXVsdGlwbGVTeW1ib2xpemVycyYmYS5ydWxlcyl7Zm9yKHZhciBjPXswOltdfSxkPVswXSxlLGYsZyxoLGssbD0wLG09YS5ydWxlcy5sZW5ndGg7bDxtOysrbClpZihlPWEucnVsZXNbbF0sZS5zeW1ib2xpemVycyl7Zj17fTtmb3IodmFyIG49MCxwPWUuc3ltYm9saXplcnMubGVuZ3RoO248cDsrK24pZz1lLnN5bWJvbGl6ZXJzW25dLGg9Zy56SW5kZXgsaCBpbiBmfHwoaz1lLmNsb25lKCksay5zeW1ib2xpemVycz1bXSxmW2hdPWspLGZbaF0uc3ltYm9saXplcnMucHVzaChnLmNsb25lKCkpO2ZvcihoIGluIGYpaCBpbiBjfHwoZC5wdXNoKGgpLGNbaF09W10pLGNbaF0ucHVzaChmW2hdKX1lbHNlIGNbMF0ucHVzaChlLmNsb25lKCkpOwpkLnNvcnQoKTtsPTA7Zm9yKG09ZC5sZW5ndGg7bDxtOysrbCllPWNbZFtsXV0sMDxlLmxlbmd0aCYmKGs9YS5jbG9uZSgpLGsucnVsZXM9Y1tkW2xdXSx0aGlzLndyaXRlTm9kZSgiRmVhdHVyZVR5cGVTdHlsZSIsayxiKSl9ZWxzZSB0aGlzLndyaXRlTm9kZSgiRmVhdHVyZVR5cGVTdHlsZSIsYSxiKTtyZXR1cm4gYn0sSXNEZWZhdWx0OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoInNsZDpJc0RlZmF1bHQiLHt2YWx1ZTphPyIxIjoiMCJ9KX0sRmVhdHVyZVR5cGVTdHlsZTpmdW5jdGlvbihhKXtmb3IodmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJzbGQ6RmVhdHVyZVR5cGVTdHlsZSIpLGM9MCxkPWEucnVsZXMubGVuZ3RoO2M8ZDsrK2MpdGhpcy53cml0ZU5vZGUoIlJ1bGUiLGEucnVsZXNbY10sYik7cmV0dXJuIGJ9LFJ1bGU6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJzbGQ6UnVsZSIpO2EubmFtZSYmCnRoaXMud3JpdGVOb2RlKCJOYW1lIixhLm5hbWUsYik7YS50aXRsZSYmdGhpcy53cml0ZU5vZGUoIlRpdGxlIixhLnRpdGxlLGIpO2EuZGVzY3JpcHRpb24mJnRoaXMud3JpdGVOb2RlKCJBYnN0cmFjdCIsYS5kZXNjcmlwdGlvbixiKTthLmVsc2VGaWx0ZXI/dGhpcy53cml0ZU5vZGUoIkVsc2VGaWx0ZXIiLG51bGwsYik6YS5maWx0ZXImJnRoaXMud3JpdGVOb2RlKCJvZ2M6RmlsdGVyIixhLmZpbHRlcixiKTt2b2lkIDAhPWEubWluU2NhbGVEZW5vbWluYXRvciYmdGhpcy53cml0ZU5vZGUoIk1pblNjYWxlRGVub21pbmF0b3IiLGEubWluU2NhbGVEZW5vbWluYXRvcixiKTt2b2lkIDAhPWEubWF4U2NhbGVEZW5vbWluYXRvciYmdGhpcy53cml0ZU5vZGUoIk1heFNjYWxlRGVub21pbmF0b3IiLGEubWF4U2NhbGVEZW5vbWluYXRvcixiKTt2YXIgYyxkO2lmKHRoaXMubXVsdGlwbGVTeW1ib2xpemVycyYmYS5zeW1ib2xpemVycylmb3IodmFyIGU9MCxmPWEuc3ltYm9saXplcnMubGVuZ3RoO2U8CmY7KytlKWQ9YS5zeW1ib2xpemVyc1tlXSxjPWQuQ0xBU1NfTkFNRS5zcGxpdCgiLiIpLnBvcCgpLHRoaXMud3JpdGVOb2RlKGMrIlN5bWJvbGl6ZXIiLGQsYik7ZWxzZSBmb3IodmFyIGY9T3BlbkxheWVycy5TdHlsZS5TWU1CT0xJWkVSX1BSRUZJWEVTLGU9MCxnPWYubGVuZ3RoO2U8ZzsrK2UpYz1mW2VdLChkPWEuc3ltYm9saXplcltjXSkmJnRoaXMud3JpdGVOb2RlKGMrIlN5bWJvbGl6ZXIiLGQsYik7cmV0dXJuIGJ9LEVsc2VGaWx0ZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJzbGQ6RWxzZUZpbHRlciIpfSxNaW5TY2FsZURlbm9taW5hdG9yOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoInNsZDpNaW5TY2FsZURlbm9taW5hdG9yIix7dmFsdWU6YX0pfSxNYXhTY2FsZURlbm9taW5hdG9yOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoInNsZDpNYXhTY2FsZURlbm9taW5hdG9yIiwKe3ZhbHVlOmF9KX0sTGluZVN5bWJvbGl6ZXI6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJzbGQ6TGluZVN5bWJvbGl6ZXIiKTt0aGlzLndyaXRlTm9kZSgiU3Ryb2tlIixhLGIpO3JldHVybiBifSxTdHJva2U6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJzbGQ6U3Ryb2tlIik7dm9pZCAwIT1hLnN0cm9rZUNvbG9yJiZ0aGlzLndyaXRlTm9kZSgiQ3NzUGFyYW1ldGVyIix7c3ltYm9saXplcjphLGtleToic3Ryb2tlQ29sb3IifSxiKTt2b2lkIDAhPWEuc3Ryb2tlT3BhY2l0eSYmdGhpcy53cml0ZU5vZGUoIkNzc1BhcmFtZXRlciIse3N5bWJvbGl6ZXI6YSxrZXk6InN0cm9rZU9wYWNpdHkifSxiKTt2b2lkIDAhPWEuc3Ryb2tlV2lkdGgmJnRoaXMud3JpdGVOb2RlKCJDc3NQYXJhbWV0ZXIiLHtzeW1ib2xpemVyOmEsa2V5OiJzdHJva2VXaWR0aCJ9LGIpO3ZvaWQgMCE9YS5zdHJva2VEYXNoc3R5bGUmJiJzb2xpZCIhPT0KYS5zdHJva2VEYXNoc3R5bGUmJnRoaXMud3JpdGVOb2RlKCJDc3NQYXJhbWV0ZXIiLHtzeW1ib2xpemVyOmEsa2V5OiJzdHJva2VEYXNoc3R5bGUifSxiKTt2b2lkIDAhPWEuc3Ryb2tlTGluZWNhcCYmdGhpcy53cml0ZU5vZGUoIkNzc1BhcmFtZXRlciIse3N5bWJvbGl6ZXI6YSxrZXk6InN0cm9rZUxpbmVjYXAifSxiKTtyZXR1cm4gYn0sQ3NzUGFyYW1ldGVyOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoInNsZDpDc3NQYXJhbWV0ZXIiLHthdHRyaWJ1dGVzOntuYW1lOnRoaXMuZ2V0Q3NzUHJvcGVydHkoYS5rZXkpfSx2YWx1ZTphLnN5bWJvbGl6ZXJbYS5rZXldfSl9LFRleHRTeW1ib2xpemVyOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygic2xkOlRleHRTeW1ib2xpemVyIik7bnVsbCE9YS5sYWJlbCYmdGhpcy53cml0ZU5vZGUoIkxhYmVsIixhLmxhYmVsLGIpO251bGw9PWEuZm9udEZhbWlseSYmbnVsbD09YS5mb250U2l6ZSYmCm51bGw9PWEuZm9udFdlaWdodCYmbnVsbD09YS5mb250U3R5bGV8fHRoaXMud3JpdGVOb2RlKCJGb250IixhLGIpO251bGw9PWEubGFiZWxBbmNob3JQb2ludFgmJm51bGw9PWEubGFiZWxBbmNob3JQb2ludFkmJm51bGw9PWEubGFiZWxBbGlnbiYmbnVsbD09YS5sYWJlbFhPZmZzZXQmJm51bGw9PWEubGFiZWxZT2Zmc2V0JiZudWxsPT1hLmxhYmVsUm90YXRpb24mJm51bGw9PWEubGFiZWxQZXJwZW5kaWN1bGFyT2Zmc2V0fHx0aGlzLndyaXRlTm9kZSgiTGFiZWxQbGFjZW1lbnQiLGEsYik7bnVsbD09YS5oYWxvUmFkaXVzJiZudWxsPT1hLmhhbG9Db2xvciYmbnVsbD09YS5oYWxvT3BhY2l0eXx8dGhpcy53cml0ZU5vZGUoIkhhbG8iLGEsYik7bnVsbD09YS5mb250Q29sb3ImJm51bGw9PWEuZm9udE9wYWNpdHl8fHRoaXMud3JpdGVOb2RlKCJGaWxsIix7ZmlsbENvbG9yOmEuZm9udENvbG9yLGZpbGxPcGFjaXR5OmEuZm9udE9wYWNpdHl9LGIpO3JldHVybiBifSxMYWJlbFBsYWNlbWVudDpmdW5jdGlvbihhKXt2YXIgYj0KdGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJzbGQ6TGFiZWxQbGFjZW1lbnQiKTtudWxsPT1hLmxhYmVsQW5jaG9yUG9pbnRYJiZudWxsPT1hLmxhYmVsQW5jaG9yUG9pbnRZJiZudWxsPT1hLmxhYmVsQWxpZ24mJm51bGw9PWEubGFiZWxYT2Zmc2V0JiZudWxsPT1hLmxhYmVsWU9mZnNldCYmbnVsbD09YS5sYWJlbFJvdGF0aW9ufHxudWxsIT1hLmxhYmVsUGVycGVuZGljdWxhck9mZnNldHx8dGhpcy53cml0ZU5vZGUoIlBvaW50UGxhY2VtZW50IixhLGIpO251bGwhPWEubGFiZWxQZXJwZW5kaWN1bGFyT2Zmc2V0JiZ0aGlzLndyaXRlTm9kZSgiTGluZVBsYWNlbWVudCIsYSxiKTtyZXR1cm4gYn0sTGluZVBsYWNlbWVudDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoInNsZDpMaW5lUGxhY2VtZW50Iik7dGhpcy53cml0ZU5vZGUoIlBlcnBlbmRpY3VsYXJPZmZzZXQiLGEubGFiZWxQZXJwZW5kaWN1bGFyT2Zmc2V0LGIpO3JldHVybiBifSxQZXJwZW5kaWN1bGFyT2Zmc2V0OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoInNsZDpQZXJwZW5kaWN1bGFyT2Zmc2V0IiwKe3ZhbHVlOmF9KX0sUG9pbnRQbGFjZW1lbnQ6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJzbGQ6UG9pbnRQbGFjZW1lbnQiKTtudWxsPT1hLmxhYmVsQW5jaG9yUG9pbnRYJiZudWxsPT1hLmxhYmVsQW5jaG9yUG9pbnRZJiZudWxsPT1hLmxhYmVsQWxpZ258fHRoaXMud3JpdGVOb2RlKCJBbmNob3JQb2ludCIsYSxiKTtudWxsPT1hLmxhYmVsWE9mZnNldCYmbnVsbD09YS5sYWJlbFlPZmZzZXR8fHRoaXMud3JpdGVOb2RlKCJEaXNwbGFjZW1lbnQiLGEsYik7bnVsbCE9YS5sYWJlbFJvdGF0aW9uJiZ0aGlzLndyaXRlTm9kZSgiUm90YXRpb24iLGEubGFiZWxSb3RhdGlvbixiKTtyZXR1cm4gYn0sQW5jaG9yUG9pbnQ6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJzbGQ6QW5jaG9yUG9pbnQiKSxjPWEubGFiZWxBbmNob3JQb2ludFgsZD1hLmxhYmVsQW5jaG9yUG9pbnRZO251bGwhPWMmJnRoaXMud3JpdGVOb2RlKCJBbmNob3JQb2ludFgiLApjLGIpO251bGwhPWQmJnRoaXMud3JpdGVOb2RlKCJBbmNob3JQb2ludFkiLGQsYik7aWYobnVsbD09YyYmbnVsbD09ZCl7dmFyIGU9YS5sYWJlbEFsaWduLnN1YnN0cigwLDEpO2E9YS5sYWJlbEFsaWduLnN1YnN0cigxLDEpOyJsIj09PWU/Yz0wOiJjIj09PWU/Yz0wLjU6InIiPT09ZSYmKGM9MSk7ImIiPT09YT9kPTA6Im0iPT09YT9kPTAuNToidCI9PT1hJiYoZD0xKTt0aGlzLndyaXRlTm9kZSgiQW5jaG9yUG9pbnRYIixjLGIpO3RoaXMud3JpdGVOb2RlKCJBbmNob3JQb2ludFkiLGQsYil9cmV0dXJuIGJ9LEFuY2hvclBvaW50WDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJzbGQ6QW5jaG9yUG9pbnRYIix7dmFsdWU6YX0pfSxBbmNob3JQb2ludFk6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygic2xkOkFuY2hvclBvaW50WSIse3ZhbHVlOmF9KX0sRGlzcGxhY2VtZW50OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygic2xkOkRpc3BsYWNlbWVudCIpOwpudWxsIT1hLmxhYmVsWE9mZnNldCYmdGhpcy53cml0ZU5vZGUoIkRpc3BsYWNlbWVudFgiLGEubGFiZWxYT2Zmc2V0LGIpO251bGwhPWEubGFiZWxZT2Zmc2V0JiZ0aGlzLndyaXRlTm9kZSgiRGlzcGxhY2VtZW50WSIsYS5sYWJlbFlPZmZzZXQsYik7cmV0dXJuIGJ9LERpc3BsYWNlbWVudFg6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygic2xkOkRpc3BsYWNlbWVudFgiLHt2YWx1ZTphfSl9LERpc3BsYWNlbWVudFk6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygic2xkOkRpc3BsYWNlbWVudFkiLHt2YWx1ZTphfSl9LEZvbnQ6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJzbGQ6Rm9udCIpO2EuZm9udEZhbWlseSYmdGhpcy53cml0ZU5vZGUoIkNzc1BhcmFtZXRlciIse3N5bWJvbGl6ZXI6YSxrZXk6ImZvbnRGYW1pbHkifSxiKTthLmZvbnRTaXplJiZ0aGlzLndyaXRlTm9kZSgiQ3NzUGFyYW1ldGVyIiwKe3N5bWJvbGl6ZXI6YSxrZXk6ImZvbnRTaXplIn0sYik7YS5mb250V2VpZ2h0JiZ0aGlzLndyaXRlTm9kZSgiQ3NzUGFyYW1ldGVyIix7c3ltYm9saXplcjphLGtleToiZm9udFdlaWdodCJ9LGIpO2EuZm9udFN0eWxlJiZ0aGlzLndyaXRlTm9kZSgiQ3NzUGFyYW1ldGVyIix7c3ltYm9saXplcjphLGtleToiZm9udFN0eWxlIn0sYik7cmV0dXJuIGJ9LExhYmVsOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLndyaXRlcnMuc2xkLl9PR0NFeHByZXNzaW9uLmNhbGwodGhpcywic2xkOkxhYmVsIixhKX0sSGFsbzpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoInNsZDpIYWxvIik7YS5oYWxvUmFkaXVzJiZ0aGlzLndyaXRlTm9kZSgiUmFkaXVzIixhLmhhbG9SYWRpdXMsYik7KGEuaGFsb0NvbG9yfHxhLmhhbG9PcGFjaXR5KSYmdGhpcy53cml0ZU5vZGUoIkZpbGwiLHtmaWxsQ29sb3I6YS5oYWxvQ29sb3IsZmlsbE9wYWNpdHk6YS5oYWxvT3BhY2l0eX0sYik7CnJldHVybiBifSxSYWRpdXM6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygic2xkOlJhZGl1cyIse3ZhbHVlOmF9KX0sUmFzdGVyU3ltYm9saXplcjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoInNsZDpSYXN0ZXJTeW1ib2xpemVyIik7YS5nZW9tZXRyeSYmdGhpcy53cml0ZU5vZGUoIkdlb21ldHJ5IixhLmdlb21ldHJ5LGIpO2Eub3BhY2l0eSYmdGhpcy53cml0ZU5vZGUoIk9wYWNpdHkiLGEub3BhY2l0eSxiKTthLmNvbG9yTWFwJiZ0aGlzLndyaXRlTm9kZSgiQ29sb3JNYXAiLGEuY29sb3JNYXAsYik7cmV0dXJuIGJ9LEdlb21ldHJ5OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygic2xkOkdlb21ldHJ5Iik7YS5wcm9wZXJ0eSYmdGhpcy53cml0ZU5vZGUoIm9nYzpQcm9wZXJ0eU5hbWUiLGEsYik7cmV0dXJuIGJ9LENvbG9yTWFwOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoInNsZDpDb2xvck1hcCIpLApjPTAsZD1hLmxlbmd0aDtjPGQ7KytjKXRoaXMud3JpdGVOb2RlKCJDb2xvck1hcEVudHJ5IixhW2NdLGIpO3JldHVybiBifSxDb2xvck1hcEVudHJ5OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygic2xkOkNvbG9yTWFwRW50cnkiKTtiLnNldEF0dHJpYnV0ZSgiY29sb3IiLGEuY29sb3IpO3ZvaWQgMCE9PWEub3BhY2l0eSYmYi5zZXRBdHRyaWJ1dGUoIm9wYWNpdHkiLHBhcnNlRmxvYXQoYS5vcGFjaXR5KSk7dm9pZCAwIT09YS5xdWFudGl0eSYmYi5zZXRBdHRyaWJ1dGUoInF1YW50aXR5IixwYXJzZUZsb2F0KGEucXVhbnRpdHkpKTt2b2lkIDAhPT1hLmxhYmVsJiZiLnNldEF0dHJpYnV0ZSgibGFiZWwiLGEubGFiZWwpO3JldHVybiBifSxQb2x5Z29uU3ltYm9saXplcjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoInNsZDpQb2x5Z29uU3ltYm9saXplciIpOyExIT09YS5maWxsJiZ0aGlzLndyaXRlTm9kZSgiRmlsbCIsCmEsYik7ITEhPT1hLnN0cm9rZSYmdGhpcy53cml0ZU5vZGUoIlN0cm9rZSIsYSxiKTtyZXR1cm4gYn0sRmlsbDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoInNsZDpGaWxsIik7YS5maWxsQ29sb3ImJnRoaXMud3JpdGVOb2RlKCJDc3NQYXJhbWV0ZXIiLHtzeW1ib2xpemVyOmEsa2V5OiJmaWxsQ29sb3IifSxiKTtudWxsIT1hLmZpbGxPcGFjaXR5JiZ0aGlzLndyaXRlTm9kZSgiQ3NzUGFyYW1ldGVyIix7c3ltYm9saXplcjphLGtleToiZmlsbE9wYWNpdHkifSxiKTtyZXR1cm4gYn0sUG9pbnRTeW1ib2xpemVyOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygic2xkOlBvaW50U3ltYm9saXplciIpO3RoaXMud3JpdGVOb2RlKCJHcmFwaGljIixhLGIpO3JldHVybiBifSxHcmFwaGljOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygic2xkOkdyYXBoaWMiKTt2b2lkIDAhPWEuZXh0ZXJuYWxHcmFwaGljPwp0aGlzLndyaXRlTm9kZSgiRXh0ZXJuYWxHcmFwaGljIixhLGIpOnRoaXMud3JpdGVOb2RlKCJNYXJrIixhLGIpO3ZvaWQgMCE9YS5ncmFwaGljT3BhY2l0eSYmdGhpcy53cml0ZU5vZGUoIk9wYWNpdHkiLGEuZ3JhcGhpY09wYWNpdHksYik7dm9pZCAwIT1hLnBvaW50UmFkaXVzP3RoaXMud3JpdGVOb2RlKCJTaXplIiwyKmEucG9pbnRSYWRpdXMsYik6dm9pZCAwIT1hLmdyYXBoaWNXaWR0aCYmdGhpcy53cml0ZU5vZGUoIlNpemUiLGEuZ3JhcGhpY1dpZHRoLGIpO3ZvaWQgMCE9YS5yb3RhdGlvbiYmdGhpcy53cml0ZU5vZGUoIlJvdGF0aW9uIixhLnJvdGF0aW9uLGIpO3JldHVybiBifSxFeHRlcm5hbEdyYXBoaWM6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJzbGQ6RXh0ZXJuYWxHcmFwaGljIik7dGhpcy53cml0ZU5vZGUoIk9ubGluZVJlc291cmNlIixhLmV4dGVybmFsR3JhcGhpYyxiKTthPWEuZ3JhcGhpY0Zvcm1hdHx8dGhpcy5nZXRHcmFwaGljRm9ybWF0KGEuZXh0ZXJuYWxHcmFwaGljKTsKdGhpcy53cml0ZU5vZGUoIkZvcm1hdCIsYSxiKTtyZXR1cm4gYn0sTWFyazpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoInNsZDpNYXJrIik7YS5ncmFwaGljTmFtZSYmdGhpcy53cml0ZU5vZGUoIldlbGxLbm93bk5hbWUiLGEuZ3JhcGhpY05hbWUsYik7ITEhPT1hLmZpbGwmJnRoaXMud3JpdGVOb2RlKCJGaWxsIixhLGIpOyExIT09YS5zdHJva2UmJnRoaXMud3JpdGVOb2RlKCJTdHJva2UiLGEsYik7cmV0dXJuIGJ9LFdlbGxLbm93bk5hbWU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygic2xkOldlbGxLbm93bk5hbWUiLHt2YWx1ZTphfSl9LE9wYWNpdHk6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygic2xkOk9wYWNpdHkiLHt2YWx1ZTphfSl9LFNpemU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMud3JpdGVycy5zbGQuX09HQ0V4cHJlc3Npb24uY2FsbCh0aGlzLCJzbGQ6U2l6ZSIsCmEpfSxSb3RhdGlvbjpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJzbGQ6Um90YXRpb24iLHt2YWx1ZTphfSl9LE9ubGluZVJlc291cmNlOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoInNsZDpPbmxpbmVSZXNvdXJjZSIse2F0dHJpYnV0ZXM6eyJ4bGluazp0eXBlIjoic2ltcGxlIiwieGxpbms6aHJlZiI6YX19KX0sRm9ybWF0OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoInNsZDpGb3JtYXQiLHt2YWx1ZTphfSl9fX0sT3BlbkxheWVycy5Gb3JtYXQuRmlsdGVyLnYxXzBfMC5wcm90b3R5cGUud3JpdGVycyksQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Gb3JtYXQuU0xELnYxIn0pO09wZW5MYXllcnMuTGF5ZXIuV01TPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5MYXllci5HcmlkLHtERUZBVUxUX1BBUkFNUzp7c2VydmljZToiV01TIix2ZXJzaW9uOiIxLjEuMSIscmVxdWVzdDoiR2V0TWFwIixzdHlsZXM6IiIsZm9ybWF0OiJpbWFnZS9qcGVnIn0saXNCYXNlTGF5ZXI6ITAsZW5jb2RlQkJPWDohMSxub01hZ2ljOiExLHl4Ont9LGluaXRpYWxpemU6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9W107Yz1PcGVuTGF5ZXJzLlV0aWwudXBwZXJDYXNlT2JqZWN0KGMpOzEuMzw9cGFyc2VGbG9hdChjLlZFUlNJT04pJiYhYy5FWENFUFRJT05TJiYoYy5FWENFUFRJT05TPSJJTklNQUdFIik7ZS5wdXNoKGEsYixjLGQpO09wZW5MYXllcnMuTGF5ZXIuR3JpZC5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLGUpO09wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKHRoaXMucGFyYW1zLE9wZW5MYXllcnMuVXRpbC51cHBlckNhc2VPYmplY3QodGhpcy5ERUZBVUxUX1BBUkFNUykpOwohdGhpcy5ub01hZ2ljJiYodGhpcy5wYXJhbXMuVFJBTlNQQVJFTlQmJiJ0cnVlIj09dGhpcy5wYXJhbXMuVFJBTlNQQVJFTlQudG9TdHJpbmcoKS50b0xvd2VyQ2FzZSgpKSYmKG51bGwhPWQmJmQuaXNCYXNlTGF5ZXJ8fCh0aGlzLmlzQmFzZUxheWVyPSExKSwiaW1hZ2UvanBlZyI9PXRoaXMucGFyYW1zLkZPUk1BVCYmKHRoaXMucGFyYW1zLkZPUk1BVD1PcGVuTGF5ZXJzLlV0aWwuYWxwaGFIYWNrKCk/ImltYWdlL2dpZiI6ImltYWdlL3BuZyIpKX0sY2xvbmU6ZnVuY3Rpb24oYSl7bnVsbD09YSYmKGE9bmV3IE9wZW5MYXllcnMuTGF5ZXIuV01TKHRoaXMubmFtZSx0aGlzLnVybCx0aGlzLnBhcmFtcyx0aGlzLmdldE9wdGlvbnMoKSkpO3JldHVybiBhPU9wZW5MYXllcnMuTGF5ZXIuR3JpZC5wcm90b3R5cGUuY2xvbmUuYXBwbHkodGhpcyxbYV0pfSxyZXZlcnNlQXhpc09yZGVyOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5wcm9qZWN0aW9uLmdldENvZGUoKTtyZXR1cm4gMS4zPD1wYXJzZUZsb2F0KHRoaXMucGFyYW1zLlZFUlNJT04pJiYKISEodGhpcy55eFthXXx8T3BlbkxheWVycy5Qcm9qZWN0aW9uLmRlZmF1bHRzW2FdJiZPcGVuTGF5ZXJzLlByb2plY3Rpb24uZGVmYXVsdHNbYV0ueXgpfSxnZXRVUkw6ZnVuY3Rpb24oYSl7YT10aGlzLmFkanVzdEJvdW5kcyhhKTt2YXIgYj10aGlzLmdldEltYWdlU2l6ZSgpLGM9e30sZD10aGlzLnJldmVyc2VBeGlzT3JkZXIoKTtjLkJCT1g9dGhpcy5lbmNvZGVCQk9YP2EudG9CQk9YKG51bGwsZCk6YS50b0FycmF5KGQpO2MuV0lEVEg9Yi53O2MuSEVJR0hUPWIuaDtyZXR1cm4gdGhpcy5nZXRGdWxsUmVxdWVzdFN0cmluZyhjKX0sbWVyZ2VOZXdQYXJhbXM6ZnVuY3Rpb24oYSl7YT1bT3BlbkxheWVycy5VdGlsLnVwcGVyQ2FzZU9iamVjdChhKV07cmV0dXJuIE9wZW5MYXllcnMuTGF5ZXIuR3JpZC5wcm90b3R5cGUubWVyZ2VOZXdQYXJhbXMuYXBwbHkodGhpcyxhKX0sZ2V0RnVsbFJlcXVlc3RTdHJpbmc6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLm1hcC5nZXRQcm9qZWN0aW9uT2JqZWN0KCksCmM9dGhpcy5wcm9qZWN0aW9uJiZ0aGlzLnByb2plY3Rpb24uZXF1YWxzKGMpP3RoaXMucHJvamVjdGlvbi5nZXRDb2RlKCk6Yy5nZXRDb2RlKCksYz0ibm9uZSI9PWM/bnVsbDpjOzEuMzw9cGFyc2VGbG9hdCh0aGlzLnBhcmFtcy5WRVJTSU9OKT90aGlzLnBhcmFtcy5DUlM9Yzp0aGlzLnBhcmFtcy5TUlM9YzsiYm9vbGVhbiI9PXR5cGVvZiB0aGlzLnBhcmFtcy5UUkFOU1BBUkVOVCYmKGEuVFJBTlNQQVJFTlQ9dGhpcy5wYXJhbXMuVFJBTlNQQVJFTlQ/IlRSVUUiOiJGQUxTRSIpO3JldHVybiBPcGVuTGF5ZXJzLkxheWVyLkdyaWQucHJvdG90eXBlLmdldEZ1bGxSZXF1ZXN0U3RyaW5nLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5MYXllci5XTVMifSk7T3BlbkxheWVycy5MYXllci5LYU1hcD1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuTGF5ZXIuR3JpZCx7aXNCYXNlTGF5ZXI6ITAsREVGQVVMVF9QQVJBTVM6e2k6ImpwZWciLG1hcDoiIn0saW5pdGlhbGl6ZTpmdW5jdGlvbihhLGIsYyxkKXtPcGVuTGF5ZXJzLkxheWVyLkdyaWQucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMucGFyYW1zPU9wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKHRoaXMucGFyYW1zLHRoaXMuREVGQVVMVF9QQVJBTVMpfSxnZXRVUkw6ZnVuY3Rpb24oYSl7YT10aGlzLmFkanVzdEJvdW5kcyhhKTt2YXIgYj10aGlzLm1hcC5nZXRSZXNvbHV0aW9uKCksYz1NYXRoLnJvdW5kKDFFNCp0aGlzLm1hcC5nZXRTY2FsZSgpKS8xRTQsZD1NYXRoLnJvdW5kKGEubGVmdC9iKTthPS1NYXRoLnJvdW5kKGEudG9wL2IpO3JldHVybiB0aGlzLmdldEZ1bGxSZXF1ZXN0U3RyaW5nKHt0OmEsbDpkLHM6Y30pfSxjYWxjdWxhdGVHcmlkTGF5b3V0OmZ1bmN0aW9uKGEsCmIsYyl7Yj1jKnRoaXMudGlsZVNpemUudztjKj10aGlzLnRpbGVTaXplLmg7cmV0dXJue3RpbGVsb246Yix0aWxlbGF0OmMsc3RhcnRjb2w6TWF0aC5mbG9vcihhLmxlZnQvYiktdGhpcy5idWZmZXIsc3RhcnRyb3c6TWF0aC5mbG9vcihhLnRvcC9jKSt0aGlzLmJ1ZmZlcn19LGdldFRpbGVCb3VuZHNGb3JHcmlkSW5kZXg6ZnVuY3Rpb24oYSxiKXt0aGlzLmdldFRpbGVPcmlnaW4oKTt2YXIgYz10aGlzLmdyaWRMYXlvdXQsZD1jLnRpbGVsb24sZT1jLnRpbGVsYXQsZj0oYy5zdGFydGNvbCtiKSpkLGM9KGMuc3RhcnRyb3ctYSkqZTtyZXR1cm4gbmV3IE9wZW5MYXllcnMuQm91bmRzKGYsYyxmK2QsYytlKX0sY2xvbmU6ZnVuY3Rpb24oYSl7bnVsbD09YSYmKGE9bmV3IE9wZW5MYXllcnMuTGF5ZXIuS2FNYXAodGhpcy5uYW1lLHRoaXMudXJsLHRoaXMucGFyYW1zLHRoaXMuZ2V0T3B0aW9ucygpKSk7YT1PcGVuTGF5ZXJzLkxheWVyLkdyaWQucHJvdG90eXBlLmNsb25lLmFwcGx5KHRoaXMsClthXSk7bnVsbCE9dGhpcy50aWxlU2l6ZSYmKGEudGlsZVNpemU9dGhpcy50aWxlU2l6ZS5jbG9uZSgpKTthLmdyaWQ9W107cmV0dXJuIGF9LGdldFRpbGVCb3VuZHM6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5nZXRSZXNvbHV0aW9uKCksYz1iKnRoaXMudGlsZVNpemUudyxiPWIqdGhpcy50aWxlU2l6ZS5oLGQ9dGhpcy5nZXRMb25MYXRGcm9tVmlld1BvcnRQeChhKTthPWMqTWF0aC5mbG9vcihkLmxvbi9jKTtkPWIqTWF0aC5mbG9vcihkLmxhdC9iKTtyZXR1cm4gbmV3IE9wZW5MYXllcnMuQm91bmRzKGEsZCxhK2MsZCtiKX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5MYXllci5LYU1hcCJ9KTtPcGVuTGF5ZXJzLkZvcm1hdC5XTUMudjFfMV8wPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Gb3JtYXQuV01DLnYxLHtWRVJTSU9OOiIxLjEuMCIsc2NoZW1hTG9jYXRpb246Imh0dHA6Ly93d3cub3Blbmdpcy5uZXQvY29udGV4dCBodHRwOi8vc2NoZW1hcy5vcGVuZ2lzLm5ldC9jb250ZXh0LzEuMS4wL2NvbnRleHQueHNkIixpbml0aWFsaXplOmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuRm9ybWF0LldNQy52MS5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLFthXSl9LHJlYWRfc2xkX01pblNjYWxlRGVub21pbmF0b3I6ZnVuY3Rpb24oYSxiKXt2YXIgYz1wYXJzZUZsb2F0KHRoaXMuZ2V0Q2hpbGRWYWx1ZShiKSk7MDxjJiYoYS5tYXhTY2FsZT1jKX0scmVhZF9zbGRfTWF4U2NhbGVEZW5vbWluYXRvcjpmdW5jdGlvbihhLGIpe2EubWluU2NhbGU9cGFyc2VGbG9hdCh0aGlzLmdldENoaWxkVmFsdWUoYikpfSxyZWFkX3dtY19TUlM6ZnVuY3Rpb24oYSxiKXsic3JzImluCmF8fChhLnNycz17fSk7YS5zcnNbdGhpcy5nZXRDaGlsZFZhbHVlKGIpXT0hMH0sd3JpdGVfd21jX0xheWVyOmZ1bmN0aW9uKGEpe3ZhciBiPU9wZW5MYXllcnMuRm9ybWF0LldNQy52MS5wcm90b3R5cGUud3JpdGVfd21jX0xheWVyLmFwcGx5KHRoaXMsW2FdKTtpZihhLm1heFNjYWxlKXt2YXIgYz10aGlzLmNyZWF0ZUVsZW1lbnROUyh0aGlzLm5hbWVzcGFjZXMuc2xkLCJzbGQ6TWluU2NhbGVEZW5vbWluYXRvciIpO2MuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVUZXh0Tm9kZShhLm1heFNjYWxlLnRvUHJlY2lzaW9uKDE2KSkpO2IuYXBwZW5kQ2hpbGQoYyl9YS5taW5TY2FsZSYmKGM9dGhpcy5jcmVhdGVFbGVtZW50TlModGhpcy5uYW1lc3BhY2VzLnNsZCwic2xkOk1heFNjYWxlRGVub21pbmF0b3IiKSxjLmFwcGVuZENoaWxkKHRoaXMuY3JlYXRlVGV4dE5vZGUoYS5taW5TY2FsZS50b1ByZWNpc2lvbigxNikpKSxiLmFwcGVuZENoaWxkKGMpKTtpZihhLnNycylmb3IodmFyIGQgaW4gYS5zcnMpYi5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZUVsZW1lbnREZWZhdWx0TlMoIlNSUyIsCmQpKTtiLmFwcGVuZENoaWxkKHRoaXMud3JpdGVfd21jX0Zvcm1hdExpc3QoYSkpO2IuYXBwZW5kQ2hpbGQodGhpcy53cml0ZV93bWNfU3R5bGVMaXN0KGEpKTthLmRpbWVuc2lvbnMmJmIuYXBwZW5kQ2hpbGQodGhpcy53cml0ZV93bWNfRGltZW5zaW9uTGlzdChhKSk7Yi5hcHBlbmRDaGlsZCh0aGlzLndyaXRlX3dtY19MYXllckV4dGVuc2lvbihhKSk7cmV0dXJuIGJ9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuRm9ybWF0LldNQy52MV8xXzAifSk7T3BlbkxheWVycy5Gb3JtYXQuWExTPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Gb3JtYXQuWE1MLlZlcnNpb25lZE9HQyx7ZGVmYXVsdFZlcnNpb246IjEuMS4wIixzdHJpbmdpZnlPdXRwdXQ6ITAsQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Gb3JtYXQuWExTIn0pO09wZW5MYXllcnMuRm9ybWF0LlhMUy52MT1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuRm9ybWF0LlhNTCx7bmFtZXNwYWNlczp7eGxzOiJodHRwOi8vd3d3Lm9wZW5naXMubmV0L3hscyIsZ21sOiJodHRwOi8vd3d3Lm9wZW5naXMubmV0L2dtbCIseHNpOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxL1hNTFNjaGVtYS1pbnN0YW5jZSJ9LHJlZ0V4ZXM6e3RyaW1TcGFjZTovXlxzKnxccyokL2cscmVtb3ZlU3BhY2U6L1xzKi9nLHNwbGl0U3BhY2U6L1xzKy8sdHJpbUNvbW1hOi9ccyosXHMqL2d9LHh5OiEwLGRlZmF1bHRQcmVmaXg6InhscyIsc2NoZW1hTG9jYXRpb246bnVsbCxyZWFkOmZ1bmN0aW9uKGEsYil7T3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoYix0aGlzLm9wdGlvbnMpO3ZhciBjPXt9O3RoaXMucmVhZENoaWxkTm9kZXMoYSxjKTtyZXR1cm4gY30scmVhZGVyczp7eGxzOntYTFM6ZnVuY3Rpb24oYSxiKXtiLnZlcnNpb249YS5nZXRBdHRyaWJ1dGUoInZlcnNpb24iKTsKdGhpcy5yZWFkQ2hpbGROb2RlcyhhLGIpfSxSZXNwb25zZTpmdW5jdGlvbihhLGIpe3RoaXMucmVhZENoaWxkTm9kZXMoYSxiKX0sR2VvY29kZVJlc3BvbnNlOmZ1bmN0aW9uKGEsYil7Yi5yZXNwb25zZUxpc3RzPVtdO3RoaXMucmVhZENoaWxkTm9kZXMoYSxiKX0sR2VvY29kZVJlc3BvbnNlTGlzdDpmdW5jdGlvbihhLGIpe3ZhciBjPXtmZWF0dXJlczpbXSxudW1iZXJPZkdlb2NvZGVkQWRkcmVzc2VzOnBhcnNlSW50KGEuZ2V0QXR0cmlidXRlKCJudW1iZXJPZkdlb2NvZGVkQWRkcmVzc2VzIikpfTtiLnJlc3BvbnNlTGlzdHMucHVzaChjKTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYyl9LEdlb2NvZGVkQWRkcmVzczpmdW5jdGlvbihhLGIpe3ZhciBjPW5ldyBPcGVuTGF5ZXJzLkZlYXR1cmUuVmVjdG9yO2IuZmVhdHVyZXMucHVzaChjKTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYyk7Yy5nZW9tZXRyeT1jLmNvbXBvbmVudHNbMF19LEdlb2NvZGVNYXRjaENvZGU6ZnVuY3Rpb24oYSxiKXtiLmF0dHJpYnV0ZXMubWF0Y2hDb2RlPQp7YWNjdXJhY3k6cGFyc2VGbG9hdChhLmdldEF0dHJpYnV0ZSgiYWNjdXJhY3kiKSksbWF0Y2hUeXBlOmEuZ2V0QXR0cmlidXRlKCJtYXRjaFR5cGUiKX19LEFkZHJlc3M6ZnVuY3Rpb24oYSxiKXt2YXIgYz17Y291bnRyeUNvZGU6YS5nZXRBdHRyaWJ1dGUoImNvdW50cnlDb2RlIiksYWRkcmVzc2VlOmEuZ2V0QXR0cmlidXRlKCJhZGRyZXNzZWUiKSxzdHJlZXQ6W10scGxhY2U6W119O2IuYXR0cmlidXRlcy5hZGRyZXNzPWM7dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGMpfSxmcmVlRm9ybUFkZHJlc3M6ZnVuY3Rpb24oYSxiKXtiLmZyZWVGb3JtQWRkcmVzcz10aGlzLmdldENoaWxkVmFsdWUoYSl9LFN0cmVldEFkZHJlc3M6ZnVuY3Rpb24oYSxiKXt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYil9LEJ1aWxkaW5nOmZ1bmN0aW9uKGEsYil7Yi5idWlsZGluZz17bnVtYmVyOmEuZ2V0QXR0cmlidXRlKCJudW1iZXIiKSxzdWJkaXZpc2lvbjphLmdldEF0dHJpYnV0ZSgic3ViZGl2aXNpb24iKSwKYnVpbGRpbmdOYW1lOmEuZ2V0QXR0cmlidXRlKCJidWlsZGluZ05hbWUiKX19LFN0cmVldDpmdW5jdGlvbihhLGIpe2Iuc3RyZWV0LnB1c2godGhpcy5nZXRDaGlsZFZhbHVlKGEpKX0sUGxhY2U6ZnVuY3Rpb24oYSxiKXtiLnBsYWNlW2EuZ2V0QXR0cmlidXRlKCJ0eXBlIildPXRoaXMuZ2V0Q2hpbGRWYWx1ZShhKX0sUG9zdGFsQ29kZTpmdW5jdGlvbihhLGIpe2IucG9zdGFsQ29kZT10aGlzLmdldENoaWxkVmFsdWUoYSl9fSxnbWw6T3BlbkxheWVycy5Gb3JtYXQuR01MLnYzLnByb3RvdHlwZS5yZWFkZXJzLmdtbH0sd3JpdGU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMud3JpdGVycy54bHMuWExTLmFwcGx5KHRoaXMsW2FdKX0sd3JpdGVyczp7eGxzOntYTFM6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJ4bHM6WExTIix7YXR0cmlidXRlczp7dmVyc2lvbjp0aGlzLlZFUlNJT04sInhzaTpzY2hlbWFMb2NhdGlvbiI6dGhpcy5zY2hlbWFMb2NhdGlvbn19KTsKdGhpcy53cml0ZU5vZGUoIlJlcXVlc3RIZWFkZXIiLGEuaGVhZGVyLGIpO3RoaXMud3JpdGVOb2RlKCJSZXF1ZXN0IixhLGIpO3JldHVybiBifSxSZXF1ZXN0SGVhZGVyOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoInhsczpSZXF1ZXN0SGVhZGVyIil9LFJlcXVlc3Q6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJ4bHM6UmVxdWVzdCIse2F0dHJpYnV0ZXM6e21ldGhvZE5hbWU6Ikdlb2NvZGVSZXF1ZXN0IixyZXF1ZXN0SUQ6YS5yZXF1ZXN0SUR8fCIiLHZlcnNpb246dGhpcy5WRVJTSU9OfX0pO3RoaXMud3JpdGVOb2RlKCJHZW9jb2RlUmVxdWVzdCIsYS5hZGRyZXNzZXMsYik7cmV0dXJuIGJ9LEdlb2NvZGVSZXF1ZXN0OmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoInhsczpHZW9jb2RlUmVxdWVzdCIpLGM9MCxkPWEubGVuZ3RoO2M8ZDtjKyspdGhpcy53cml0ZU5vZGUoIkFkZHJlc3MiLAphW2NdLGIpO3JldHVybiBifSxBZGRyZXNzOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygieGxzOkFkZHJlc3MiLHthdHRyaWJ1dGVzOntjb3VudHJ5Q29kZTphLmNvdW50cnlDb2RlfX0pO2EuZnJlZUZvcm1BZGRyZXNzP3RoaXMud3JpdGVOb2RlKCJmcmVlRm9ybUFkZHJlc3MiLGEuZnJlZUZvcm1BZGRyZXNzLGIpOihhLnN0cmVldCYmdGhpcy53cml0ZU5vZGUoIlN0cmVldEFkZHJlc3MiLGEsYiksYS5tdW5pY2lwYWxpdHkmJnRoaXMud3JpdGVOb2RlKCJNdW5pY2lwYWxpdHkiLGEubXVuaWNpcGFsaXR5LGIpLGEuY291bnRyeVN1YmRpdmlzaW9uJiZ0aGlzLndyaXRlTm9kZSgiQ291bnRyeVN1YmRpdmlzaW9uIixhLmNvdW50cnlTdWJkaXZpc2lvbixiKSxhLnBvc3RhbENvZGUmJnRoaXMud3JpdGVOb2RlKCJQb3N0YWxDb2RlIixhLnBvc3RhbENvZGUsYikpO3JldHVybiBifSxmcmVlRm9ybUFkZHJlc3M6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygiZnJlZUZvcm1BZGRyZXNzIiwKe3ZhbHVlOmF9KX0sU3RyZWV0QWRkcmVzczpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoInhsczpTdHJlZXRBZGRyZXNzIik7YS5idWlsZGluZyYmdGhpcy53cml0ZU5vZGUoYiwiQnVpbGRpbmciLGEuYnVpbGRpbmcpO2E9YS5zdHJlZXQ7T3BlbkxheWVycy5VdGlsLmlzQXJyYXkoYSl8fChhPVthXSk7Zm9yKHZhciBjPTAsZD1hLmxlbmd0aDtjPGQ7YysrKXRoaXMud3JpdGVOb2RlKCJTdHJlZXQiLGFbY10sYik7cmV0dXJuIGJ9LEJ1aWxkaW5nOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoInhsczpCdWlsZGluZyIse2F0dHJpYnV0ZXM6e251bWJlcjphLm51bWJlcixzdWJkaXZpc2lvbjphLnN1YmRpdmlzaW9uLGJ1aWxkaW5nTmFtZTphLmJ1aWxkaW5nTmFtZX19KX0sU3RyZWV0OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoInhsczpTdHJlZXQiLHt2YWx1ZTphfSl9LE11bmljaXBhbGl0eTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJ4bHM6UGxhY2UiLAp7YXR0cmlidXRlczp7dHlwZToiTXVuaWNpcGFsaXR5In0sdmFsdWU6YX0pfSxDb3VudHJ5U3ViZGl2aXNpb246ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygieGxzOlBsYWNlIix7YXR0cmlidXRlczp7dHlwZToiQ291bnRyeVN1YmRpdmlzaW9uIn0sdmFsdWU6YX0pfSxQb3N0YWxDb2RlOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoInhsczpQb3N0YWxDb2RlIix7dmFsdWU6YX0pfX19LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuRm9ybWF0LlhMUy52MSJ9KTtPcGVuTGF5ZXJzLkZvcm1hdC5YTFMudjFfMV8wPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Gb3JtYXQuWExTLnYxLHtWRVJTSU9OOiIxLjEiLHNjaGVtYUxvY2F0aW9uOiJodHRwOi8vd3d3Lm9wZW5naXMubmV0L3hscyBodHRwOi8vc2NoZW1hcy5vcGVuZ2lzLm5ldC9vbHMvMS4xLjAvTG9jYXRpb25VdGlsaXR5U2VydmljZS54c2QiLENMQVNTX05BTUU6Ik9wZW5MYXllcnMuRm9ybWF0LlhMUy52MV8xXzAifSk7T3BlbkxheWVycy5Gb3JtYXQuWExTLnYxXzE9T3BlbkxheWVycy5Gb3JtYXQuWExTLnYxXzFfMDtPcGVuTGF5ZXJzLlJlbmRlcmVyLlNWRz1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuUmVuZGVyZXIuRWxlbWVudHMse3htbG5zOiJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIseGxpbmtuczoiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIsTUFYX1BJWEVMOjE1RTMsdHJhbnNsYXRpb25QYXJhbWV0ZXJzOm51bGwsc3ltYm9sTWV0cmljczpudWxsLGluaXRpYWxpemU6ZnVuY3Rpb24oYSl7dGhpcy5zdXBwb3J0ZWQoKSYmKE9wZW5MYXllcnMuUmVuZGVyZXIuRWxlbWVudHMucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxhcmd1bWVudHMpLHRoaXMudHJhbnNsYXRpb25QYXJhbWV0ZXJzPXt4OjAseTowfSx0aGlzLnN5bWJvbE1ldHJpY3M9e30pfSxzdXBwb3J0ZWQ6ZnVuY3Rpb24oKXtyZXR1cm4gZG9jdW1lbnQuaW1wbGVtZW50YXRpb24mJihkb2N1bWVudC5pbXBsZW1lbnRhdGlvbi5oYXNGZWF0dXJlKCJvcmcudzNjLnN2ZyIsIjEuMCIpfHxkb2N1bWVudC5pbXBsZW1lbnRhdGlvbi5oYXNGZWF0dXJlKCJodHRwOi8vd3d3LnczLm9yZy9UUi9TVkcxMS9mZWF0dXJlI1NWRyIsCiIxLjEiKXx8ZG9jdW1lbnQuaW1wbGVtZW50YXRpb24uaGFzRmVhdHVyZSgiaHR0cDovL3d3dy53My5vcmcvVFIvU1ZHMTEvZmVhdHVyZSNCYXNpY1N0cnVjdHVyZSIsIjEuMSIpKX0saW5WYWxpZFJhbmdlOmZ1bmN0aW9uKGEsYixjKXthKz1jPzA6dGhpcy50cmFuc2xhdGlvblBhcmFtZXRlcnMueDtiKz1jPzA6dGhpcy50cmFuc2xhdGlvblBhcmFtZXRlcnMueTtyZXR1cm4gYT49LXRoaXMuTUFYX1BJWEVMJiZhPD10aGlzLk1BWF9QSVhFTCYmYj49LXRoaXMuTUFYX1BJWEVMJiZiPD10aGlzLk1BWF9QSVhFTH0sc2V0RXh0ZW50OmZ1bmN0aW9uKGEsYil7dmFyIGM9T3BlbkxheWVycy5SZW5kZXJlci5FbGVtZW50cy5wcm90b3R5cGUuc2V0RXh0ZW50LmFwcGx5KHRoaXMsYXJndW1lbnRzKSxkPXRoaXMuZ2V0UmVzb2x1dGlvbigpLGU9LWEubGVmdC9kLGQ9YS50b3AvZDtpZihiKXJldHVybiB0aGlzLmxlZnQ9ZSx0aGlzLnRvcD1kLHRoaXMucmVuZGVyZXJSb290LnNldEF0dHJpYnV0ZU5TKG51bGwsCiJ2aWV3Qm94IiwiMCAwICIrdGhpcy5zaXplLncrIiAiK3RoaXMuc2l6ZS5oKSx0aGlzLnRyYW5zbGF0ZSh0aGlzLnhPZmZzZXQsMCksITA7KGU9dGhpcy50cmFuc2xhdGUoZS10aGlzLmxlZnQrdGhpcy54T2Zmc2V0LGQtdGhpcy50b3ApKXx8dGhpcy5zZXRFeHRlbnQoYSwhMCk7cmV0dXJuIGMmJmV9LHRyYW5zbGF0ZTpmdW5jdGlvbihhLGIpe2lmKHRoaXMuaW5WYWxpZFJhbmdlKGEsYiwhMCkpe3ZhciBjPSIiO2lmKGF8fGIpYz0idHJhbnNsYXRlKCIrYSsiLCIrYisiKSI7dGhpcy5yb290LnNldEF0dHJpYnV0ZU5TKG51bGwsInRyYW5zZm9ybSIsYyk7dGhpcy50cmFuc2xhdGlvblBhcmFtZXRlcnM9e3g6YSx5OmJ9O3JldHVybiEwfXJldHVybiExfSxzZXRTaXplOmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuUmVuZGVyZXIucHJvdG90eXBlLnNldFNpemUuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMucmVuZGVyZXJSb290LnNldEF0dHJpYnV0ZU5TKG51bGwsIndpZHRoIix0aGlzLnNpemUudyk7CnRoaXMucmVuZGVyZXJSb290LnNldEF0dHJpYnV0ZU5TKG51bGwsImhlaWdodCIsdGhpcy5zaXplLmgpfSxnZXROb2RlVHlwZTpmdW5jdGlvbihhLGIpe3ZhciBjPW51bGw7c3dpdGNoKGEuQ0xBU1NfTkFNRSl7Y2FzZSAiT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludCI6Yz1iLmV4dGVybmFsR3JhcGhpYz8iaW1hZ2UiOnRoaXMuaXNDb21wbGV4U3ltYm9sKGIuZ3JhcGhpY05hbWUpPyJzdmciOiJjaXJjbGUiO2JyZWFrO2Nhc2UgIk9wZW5MYXllcnMuR2VvbWV0cnkuUmVjdGFuZ2xlIjpjPSJyZWN0IjticmVhaztjYXNlICJPcGVuTGF5ZXJzLkdlb21ldHJ5LkxpbmVTdHJpbmciOmM9InBvbHlsaW5lIjticmVhaztjYXNlICJPcGVuTGF5ZXJzLkdlb21ldHJ5LkxpbmVhclJpbmciOmM9InBvbHlnb24iO2JyZWFrO2Nhc2UgIk9wZW5MYXllcnMuR2VvbWV0cnkuUG9seWdvbiI6Y2FzZSAiT3BlbkxheWVycy5HZW9tZXRyeS5DdXJ2ZSI6Yz0icGF0aCJ9cmV0dXJuIGN9LHNldFN0eWxlOmZ1bmN0aW9uKGEsCmIsYyl7Yj1ifHxhLl9zdHlsZTtjPWN8fGEuX29wdGlvbnM7dmFyIGQ9Yi50aXRsZXx8Yi5ncmFwaGljVGl0bGU7aWYoZCl7YS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJ0aXRsZSIsZCk7dmFyIGU9YS5nZXRFbGVtZW50c0J5VGFnTmFtZSgidGl0bGUiKTswPGUubGVuZ3RoP2VbMF0uZmlyc3RDaGlsZC50ZXh0Q29udGVudD1kOihlPXRoaXMubm9kZUZhY3RvcnkobnVsbCwidGl0bGUiKSxlLnRleHRDb250ZW50PWQsYS5hcHBlbmRDaGlsZChlKSl9dmFyIGU9cGFyc2VGbG9hdChhLmdldEF0dHJpYnV0ZU5TKG51bGwsInIiKSksZD0xLGY7aWYoIk9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQiPT1hLl9nZW9tZXRyeUNsYXNzJiZlKXthLnN0eWxlLnZpc2liaWxpdHk9IiI7aWYoITE9PT1iLmdyYXBoaWMpYS5zdHlsZS52aXNpYmlsaXR5PSJoaWRkZW4iO2Vsc2UgaWYoYi5leHRlcm5hbEdyYXBoaWMpe2Y9dGhpcy5nZXRQb3NpdGlvbihhKTtiLmdyYXBoaWNXaWR0aCYmYi5ncmFwaGljSGVpZ2h0JiYKYS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJwcmVzZXJ2ZUFzcGVjdFJhdGlvIiwibm9uZSIpO3ZhciBlPWIuZ3JhcGhpY1dpZHRofHxiLmdyYXBoaWNIZWlnaHQsZz1iLmdyYXBoaWNIZWlnaHR8fGIuZ3JhcGhpY1dpZHRoLGU9ZT9lOjIqYi5wb2ludFJhZGl1cyxnPWc/ZzoyKmIucG9pbnRSYWRpdXMsaD12b2lkIDAhPWIuZ3JhcGhpY1lPZmZzZXQ/Yi5ncmFwaGljWU9mZnNldDotKDAuNSpnKSxrPWIuZ3JhcGhpY09wYWNpdHl8fGIuZmlsbE9wYWNpdHk7YS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJ4IiwoZi54Kyh2b2lkIDAhPWIuZ3JhcGhpY1hPZmZzZXQ/Yi5ncmFwaGljWE9mZnNldDotKDAuNSplKSkpLnRvRml4ZWQoKSk7YS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJ5IiwoZi55K2gpLnRvRml4ZWQoKSk7YS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJ3aWR0aCIsZSk7YS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJoZWlnaHQiLGcpO2Euc2V0QXR0cmlidXRlTlModGhpcy54bGlua25zLCJ4bGluazpocmVmIiwKYi5leHRlcm5hbEdyYXBoaWMpO2Euc2V0QXR0cmlidXRlTlMobnVsbCwic3R5bGUiLCJvcGFjaXR5OiAiK2spO2Eub25jbGljaz1PcGVuTGF5ZXJzLkV2ZW50LnByZXZlbnREZWZhdWx0fWVsc2UgaWYodGhpcy5pc0NvbXBsZXhTeW1ib2woYi5ncmFwaGljTmFtZSkpe3ZhciBlPTMqYi5wb2ludFJhZGl1cyxnPTIqZSxsPXRoaXMuaW1wb3J0U3ltYm9sKGIuZ3JhcGhpY05hbWUpO2Y9dGhpcy5nZXRQb3NpdGlvbihhKTtkPTMqdGhpcy5zeW1ib2xNZXRyaWNzW2wuaWRdWzBdL2c7aD1hLnBhcmVudE5vZGU7az1hLm5leHRTaWJsaW5nO2gmJmgucmVtb3ZlQ2hpbGQoYSk7YS5maXJzdENoaWxkJiZhLnJlbW92ZUNoaWxkKGEuZmlyc3RDaGlsZCk7YS5hcHBlbmRDaGlsZChsLmZpcnN0Q2hpbGQuY2xvbmVOb2RlKCEwKSk7YS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJ2aWV3Qm94IixsLmdldEF0dHJpYnV0ZU5TKG51bGwsInZpZXdCb3giKSk7YS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJ3aWR0aCIsCmcpO2Euc2V0QXR0cmlidXRlTlMobnVsbCwiaGVpZ2h0IixnKTthLnNldEF0dHJpYnV0ZU5TKG51bGwsIngiLGYueC1lKTthLnNldEF0dHJpYnV0ZU5TKG51bGwsInkiLGYueS1lKTtrP2guaW5zZXJ0QmVmb3JlKGEsayk6aCYmaC5hcHBlbmRDaGlsZChhKX1lbHNlIGEuc2V0QXR0cmlidXRlTlMobnVsbCwiciIsYi5wb2ludFJhZGl1cyk7ZT1iLnJvdGF0aW9uO3ZvaWQgMD09PWUmJnZvaWQgMD09PWEuX3JvdGF0aW9ufHwhZnx8KGEuX3JvdGF0aW9uPWUsZXw9MCwic3ZnIiE9PWEubm9kZU5hbWU/YS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJ0cmFuc2Zvcm0iLCJyb3RhdGUoIitlKyIgIitmLngrIiAiK2YueSsiKSIpOihmPXRoaXMuc3ltYm9sTWV0cmljc1tsLmlkXSxhLmZpcnN0Q2hpbGQuc2V0QXR0cmlidXRlTlMobnVsbCwidHJhbnNmb3JtIiwicm90YXRlKCIrZSsiICIrZlsxXSsiICIrZlsyXSsiKSIpKSl9Yy5pc0ZpbGxlZD8oYS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJmaWxsIixiLmZpbGxDb2xvciksCmEuc2V0QXR0cmlidXRlTlMobnVsbCwiZmlsbC1vcGFjaXR5IixiLmZpbGxPcGFjaXR5KSk6YS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJmaWxsIiwibm9uZSIpO2MuaXNTdHJva2VkPyhhLnNldEF0dHJpYnV0ZU5TKG51bGwsInN0cm9rZSIsYi5zdHJva2VDb2xvciksYS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJzdHJva2Utb3BhY2l0eSIsYi5zdHJva2VPcGFjaXR5KSxhLnNldEF0dHJpYnV0ZU5TKG51bGwsInN0cm9rZS13aWR0aCIsYi5zdHJva2VXaWR0aCpkKSxhLnNldEF0dHJpYnV0ZU5TKG51bGwsInN0cm9rZS1saW5lY2FwIixiLnN0cm9rZUxpbmVjYXB8fCJyb3VuZCIpLGEuc2V0QXR0cmlidXRlTlMobnVsbCwic3Ryb2tlLWxpbmVqb2luIiwicm91bmQiKSxiLnN0cm9rZURhc2hzdHlsZSYmYS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJzdHJva2UtZGFzaGFycmF5Iix0aGlzLmRhc2hTdHlsZShiLGQpKSk6YS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJzdHJva2UiLCJub25lIik7Yi5wb2ludGVyRXZlbnRzJiYKYS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJwb2ludGVyLWV2ZW50cyIsYi5wb2ludGVyRXZlbnRzKTtudWxsIT1iLmN1cnNvciYmYS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJjdXJzb3IiLGIuY3Vyc29yKTtyZXR1cm4gYX0sZGFzaFN0eWxlOmZ1bmN0aW9uKGEsYil7dmFyIGM9YS5zdHJva2VXaWR0aCpiLGQ9YS5zdHJva2VEYXNoc3R5bGU7c3dpdGNoKGQpe2Nhc2UgInNvbGlkIjpyZXR1cm4ibm9uZSI7Y2FzZSAiZG90IjpyZXR1cm5bMSw0KmNdLmpvaW4oKTtjYXNlICJkYXNoIjpyZXR1cm5bNCpjLDQqY10uam9pbigpO2Nhc2UgImRhc2hkb3QiOnJldHVybls0KmMsNCpjLDEsNCpjXS5qb2luKCk7Y2FzZSAibG9uZ2Rhc2giOnJldHVybls4KmMsNCpjXS5qb2luKCk7Y2FzZSAibG9uZ2Rhc2hkb3QiOnJldHVybls4KmMsNCpjLDEsNCpjXS5qb2luKCk7ZGVmYXVsdDpyZXR1cm4gT3BlbkxheWVycy5TdHJpbmcudHJpbShkKS5yZXBsYWNlKC9ccysvZywiLCIpfX0sY3JlYXRlTm9kZTpmdW5jdGlvbihhLApiKXt2YXIgYz1kb2N1bWVudC5jcmVhdGVFbGVtZW50TlModGhpcy54bWxucyxhKTtiJiZjLnNldEF0dHJpYnV0ZU5TKG51bGwsImlkIixiKTtyZXR1cm4gY30sbm9kZVR5cGVDb21wYXJlOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGI9PWEubm9kZU5hbWV9LGNyZWF0ZVJlbmRlclJvb3Q6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm5vZGVGYWN0b3J5KHRoaXMuY29udGFpbmVyLmlkKyJfc3ZnUm9vdCIsInN2ZyIpO2Euc3R5bGUuZGlzcGxheT0iYmxvY2siO3JldHVybiBhfSxjcmVhdGVSb290OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLm5vZGVGYWN0b3J5KHRoaXMuY29udGFpbmVyLmlkK2EsImciKX0sY3JlYXRlRGVmczpmdW5jdGlvbigpe3ZhciBhPXRoaXMubm9kZUZhY3RvcnkodGhpcy5jb250YWluZXIuaWQrIl9kZWZzIiwiZGVmcyIpO3RoaXMucmVuZGVyZXJSb290LmFwcGVuZENoaWxkKGEpO3JldHVybiBhfSxkcmF3UG9pbnQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5kcmF3Q2lyY2xlKGEsCmIsMSl9LGRyYXdDaXJjbGU6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXRoaXMuZ2V0UmVzb2x1dGlvbigpLGU9KGIueC10aGlzLmZlYXR1cmVEeCkvZCt0aGlzLmxlZnQ7Yj10aGlzLnRvcC1iLnkvZDtyZXR1cm4gdGhpcy5pblZhbGlkUmFuZ2UoZSxiKT8oYS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJjeCIsZSksYS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJjeSIsYiksYS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJyIixjKSxhKTohMX0sZHJhd0xpbmVTdHJpbmc6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmdldENvbXBvbmVudHNTdHJpbmcoYi5jb21wb25lbnRzKTtyZXR1cm4gYy5wYXRoPyhhLnNldEF0dHJpYnV0ZU5TKG51bGwsInBvaW50cyIsYy5wYXRoKSxjLmNvbXBsZXRlP2E6bnVsbCk6ITF9LGRyYXdMaW5lYXJSaW5nOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5nZXRDb21wb25lbnRzU3RyaW5nKGIuY29tcG9uZW50cyk7cmV0dXJuIGMucGF0aD8oYS5zZXRBdHRyaWJ1dGVOUyhudWxsLAoicG9pbnRzIixjLnBhdGgpLGMuY29tcGxldGU/YTpudWxsKTohMX0sZHJhd1BvbHlnb246ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9IiIsZD0hMCxlPSEwLGYsZyxoPTAsaz1iLmNvbXBvbmVudHMubGVuZ3RoO2g8aztoKyspYys9IiBNIixmPXRoaXMuZ2V0Q29tcG9uZW50c1N0cmluZyhiLmNvbXBvbmVudHNbaF0uY29tcG9uZW50cywiICIpLChnPWYucGF0aCk/KGMrPSIgIitnLGU9Zi5jb21wbGV0ZSYmZSk6ZD0hMTtyZXR1cm4gZD8oYS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJkIixjKyIgeiIpLGEuc2V0QXR0cmlidXRlTlMobnVsbCwiZmlsbC1ydWxlIiwiZXZlbm9kZCIpLGU/YTpudWxsKTohMX0sZHJhd1JlY3RhbmdsZTpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuZ2V0UmVzb2x1dGlvbigpLGQ9KGIueC10aGlzLmZlYXR1cmVEeCkvYyt0aGlzLmxlZnQsZT10aGlzLnRvcC1iLnkvYztyZXR1cm4gdGhpcy5pblZhbGlkUmFuZ2UoZCxlKT8oYS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJ4IiwKZCksYS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJ5IixlKSxhLnNldEF0dHJpYnV0ZU5TKG51bGwsIndpZHRoIixiLndpZHRoL2MpLGEuc2V0QXR0cmlidXRlTlMobnVsbCwiaGVpZ2h0IixiLmhlaWdodC9jKSxhKTohMX0sZHJhd1RleHQ6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPSEhYi5sYWJlbE91dGxpbmVXaWR0aDtpZihkKXt2YXIgZT1PcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHt9LGIpO2UuZm9udENvbG9yPWUubGFiZWxPdXRsaW5lQ29sb3I7ZS5mb250U3Ryb2tlQ29sb3I9ZS5sYWJlbE91dGxpbmVDb2xvcjtlLmZvbnRTdHJva2VXaWR0aD1iLmxhYmVsT3V0bGluZVdpZHRoO2IubGFiZWxPdXRsaW5lT3BhY2l0eSYmKGUuZm9udE9wYWNpdHk9Yi5sYWJlbE91dGxpbmVPcGFjaXR5KTtkZWxldGUgZS5sYWJlbE91dGxpbmVXaWR0aDt0aGlzLmRyYXdUZXh0KGEsZSxjKX12YXIgZj10aGlzLmdldFJlc29sdXRpb24oKSxlPShjLngtdGhpcy5mZWF0dXJlRHgpL2YrdGhpcy5sZWZ0LGc9Yy55LwpmLXRoaXMudG9wLGQ9ZD90aGlzLkxBQkVMX09VVExJTkVfU1VGRklYOnRoaXMuTEFCRUxfSURfU1VGRklYLGY9dGhpcy5ub2RlRmFjdG9yeShhK2QsInRleHQiKTtmLnNldEF0dHJpYnV0ZU5TKG51bGwsIngiLGUpO2Yuc2V0QXR0cmlidXRlTlMobnVsbCwieSIsLWcpO2IuZm9udENvbG9yJiZmLnNldEF0dHJpYnV0ZU5TKG51bGwsImZpbGwiLGIuZm9udENvbG9yKTtiLmZvbnRTdHJva2VDb2xvciYmZi5zZXRBdHRyaWJ1dGVOUyhudWxsLCJzdHJva2UiLGIuZm9udFN0cm9rZUNvbG9yKTtiLmZvbnRTdHJva2VXaWR0aCYmZi5zZXRBdHRyaWJ1dGVOUyhudWxsLCJzdHJva2Utd2lkdGgiLGIuZm9udFN0cm9rZVdpZHRoKTtiLmZvbnRPcGFjaXR5JiZmLnNldEF0dHJpYnV0ZU5TKG51bGwsIm9wYWNpdHkiLGIuZm9udE9wYWNpdHkpO2IuZm9udEZhbWlseSYmZi5zZXRBdHRyaWJ1dGVOUyhudWxsLCJmb250LWZhbWlseSIsYi5mb250RmFtaWx5KTtiLmZvbnRTaXplJiZmLnNldEF0dHJpYnV0ZU5TKG51bGwsCiJmb250LXNpemUiLGIuZm9udFNpemUpO2IuZm9udFdlaWdodCYmZi5zZXRBdHRyaWJ1dGVOUyhudWxsLCJmb250LXdlaWdodCIsYi5mb250V2VpZ2h0KTtiLmZvbnRTdHlsZSYmZi5zZXRBdHRyaWJ1dGVOUyhudWxsLCJmb250LXN0eWxlIixiLmZvbnRTdHlsZSk7ITA9PT1iLmxhYmVsU2VsZWN0PyhmLnNldEF0dHJpYnV0ZU5TKG51bGwsInBvaW50ZXItZXZlbnRzIiwidmlzaWJsZSIpLGYuX2ZlYXR1cmVJZD1hKTpmLnNldEF0dHJpYnV0ZU5TKG51bGwsInBvaW50ZXItZXZlbnRzIiwibm9uZSIpO2c9Yi5sYWJlbEFsaWdufHxPcGVuTGF5ZXJzLlJlbmRlcmVyLmRlZmF1bHRTeW1ib2xpemVyLmxhYmVsQWxpZ247Zi5zZXRBdHRyaWJ1dGVOUyhudWxsLCJ0ZXh0LWFuY2hvciIsT3BlbkxheWVycy5SZW5kZXJlci5TVkcuTEFCRUxfQUxJR05bZ1swXV18fCJtaWRkbGUiKTshMD09PU9wZW5MYXllcnMuSVNfR0VDS08mJmYuc2V0QXR0cmlidXRlTlMobnVsbCwiZG9taW5hbnQtYmFzZWxpbmUiLApPcGVuTGF5ZXJzLlJlbmRlcmVyLlNWRy5MQUJFTF9BTElHTltnWzFdXXx8ImNlbnRyYWwiKTtmb3IodmFyIGg9Yi5sYWJlbC5zcGxpdCgiXG4iKSxrPWgubGVuZ3RoO2YuY2hpbGROb2Rlcy5sZW5ndGg+azspZi5yZW1vdmVDaGlsZChmLmxhc3RDaGlsZCk7Zm9yKHZhciBsPTA7bDxrO2wrKyl7dmFyIG09dGhpcy5ub2RlRmFjdG9yeShhK2QrIl90c3Bhbl8iK2wsInRzcGFuIik7ITA9PT1iLmxhYmVsU2VsZWN0JiYobS5fZmVhdHVyZUlkPWEsbS5fZ2VvbWV0cnk9YyxtLl9nZW9tZXRyeUNsYXNzPWMuQ0xBU1NfTkFNRSk7ITE9PT1PcGVuTGF5ZXJzLklTX0dFQ0tPJiZtLnNldEF0dHJpYnV0ZU5TKG51bGwsImJhc2VsaW5lLXNoaWZ0IixPcGVuTGF5ZXJzLlJlbmRlcmVyLlNWRy5MQUJFTF9WU0hJRlRbZ1sxXV18fCItMzUlIik7bS5zZXRBdHRyaWJ1dGUoIngiLGUpO2lmKDA9PWwpe3ZhciBuPU9wZW5MYXllcnMuUmVuZGVyZXIuU1ZHLkxBQkVMX1ZGQUNUT1JbZ1sxXV07bnVsbD09biYmCihuPS0wLjUpO20uc2V0QXR0cmlidXRlKCJkeSIsbiooay0xKSsiZW0iKX1lbHNlIG0uc2V0QXR0cmlidXRlKCJkeSIsIjFlbSIpO20udGV4dENvbnRlbnQ9IiI9PT1oW2xdPyIgIjpoW2xdO20ucGFyZW50Tm9kZXx8Zi5hcHBlbmRDaGlsZChtKX1mLnBhcmVudE5vZGV8fHRoaXMudGV4dFJvb3QuYXBwZW5kQ2hpbGQoZil9LGdldENvbXBvbmVudHNTdHJpbmc6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9W10sZD0hMCxlPWEubGVuZ3RoLGY9W10sZyxoPTA7aDxlO2grKylnPWFbaF0sYy5wdXNoKGcpLChnPXRoaXMuZ2V0U2hvcnRTdHJpbmcoZykpP2YucHVzaChnKTooMDxoJiZ0aGlzLmdldFNob3J0U3RyaW5nKGFbaC0xXSkmJmYucHVzaCh0aGlzLmNsaXBMaW5lKGFbaF0sYVtoLTFdKSksaDxlLTEmJnRoaXMuZ2V0U2hvcnRTdHJpbmcoYVtoKzFdKSYmZi5wdXNoKHRoaXMuY2xpcExpbmUoYVtoXSxhW2grMV0pKSxkPSExKTtyZXR1cm57cGF0aDpmLmpvaW4oYnx8IiwiKSxjb21wbGV0ZTpkfX0sCmNsaXBMaW5lOmZ1bmN0aW9uKGEsYil7aWYoYi5lcXVhbHMoYSkpcmV0dXJuIiI7dmFyIGM9dGhpcy5nZXRSZXNvbHV0aW9uKCksZD10aGlzLk1BWF9QSVhFTC10aGlzLnRyYW5zbGF0aW9uUGFyYW1ldGVycy54LGU9dGhpcy5NQVhfUElYRUwtdGhpcy50cmFuc2xhdGlvblBhcmFtZXRlcnMueSxmPShiLngtdGhpcy5mZWF0dXJlRHgpL2MrdGhpcy5sZWZ0LGc9dGhpcy50b3AtYi55L2MsaD0oYS54LXRoaXMuZmVhdHVyZUR4KS9jK3RoaXMubGVmdCxjPXRoaXMudG9wLWEueS9jLGs7aWYoaDwtZHx8aD5kKWs9KGMtZykvKGgtZiksaD0wPmg/LWQ6ZCxjPWcrKGgtZikqaztpZihjPC1lfHxjPmUpaz0oaC1mKS8oYy1nKSxjPTA+Yz8tZTplLGg9ZisoYy1nKSprO3JldHVybiBoKyIsIitjfSxnZXRTaG9ydFN0cmluZzpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmdldFJlc29sdXRpb24oKSxjPShhLngtdGhpcy5mZWF0dXJlRHgpL2IrdGhpcy5sZWZ0O2E9dGhpcy50b3AtYS55L2I7cmV0dXJuIHRoaXMuaW5WYWxpZFJhbmdlKGMsCmEpP2MrIiwiK2E6ITF9LGdldFBvc2l0aW9uOmZ1bmN0aW9uKGEpe3JldHVybnt4OnBhcnNlRmxvYXQoYS5nZXRBdHRyaWJ1dGVOUyhudWxsLCJjeCIpKSx5OnBhcnNlRmxvYXQoYS5nZXRBdHRyaWJ1dGVOUyhudWxsLCJjeSIpKX19LGltcG9ydFN5bWJvbDpmdW5jdGlvbihhKXt0aGlzLmRlZnN8fCh0aGlzLmRlZnM9dGhpcy5jcmVhdGVEZWZzKCkpO3ZhciBiPXRoaXMuY29udGFpbmVyLmlkKyItIithLGM9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYik7aWYobnVsbCE9YylyZXR1cm4gYzt2YXIgZD1PcGVuTGF5ZXJzLlJlbmRlcmVyLnN5bWJvbFthXTtpZighZCl0aHJvdyBFcnJvcihhKyIgaXMgbm90IGEgdmFsaWQgc3ltYm9sIG5hbWUiKTthPXRoaXMubm9kZUZhY3RvcnkoYiwic3ltYm9sIik7dmFyIGU9dGhpcy5ub2RlRmFjdG9yeShudWxsLCJwb2x5Z29uIik7YS5hcHBlbmRDaGlsZChlKTtmb3IodmFyIGM9bmV3IE9wZW5MYXllcnMuQm91bmRzKE51bWJlci5NQVhfVkFMVUUsTnVtYmVyLk1BWF9WQUxVRSwKMCwwKSxmPVtdLGcsaCxrPTA7azxkLmxlbmd0aDtrKz0yKWc9ZFtrXSxoPWRbaysxXSxjLmxlZnQ9TWF0aC5taW4oYy5sZWZ0LGcpLGMuYm90dG9tPU1hdGgubWluKGMuYm90dG9tLGgpLGMucmlnaHQ9TWF0aC5tYXgoYy5yaWdodCxnKSxjLnRvcD1NYXRoLm1heChjLnRvcCxoKSxmLnB1c2goZywiLCIsaCk7ZS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJwb2ludHMiLGYuam9pbigiICIpKTtkPWMuZ2V0V2lkdGgoKTtlPWMuZ2V0SGVpZ2h0KCk7YS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJ2aWV3Qm94IixbYy5sZWZ0LWQsYy5ib3R0b20tZSwzKmQsMyplXS5qb2luKCIgIikpO3RoaXMuc3ltYm9sTWV0cmljc1tiXT1bTWF0aC5tYXgoZCxlKSxjLmdldENlbnRlckxvbkxhdCgpLmxvbixjLmdldENlbnRlckxvbkxhdCgpLmxhdF07dGhpcy5kZWZzLmFwcGVuZENoaWxkKGEpO3JldHVybiBhfSxnZXRGZWF0dXJlSWRGcm9tRXZlbnQ6ZnVuY3Rpb24oYSl7dmFyIGI9T3BlbkxheWVycy5SZW5kZXJlci5FbGVtZW50cy5wcm90b3R5cGUuZ2V0RmVhdHVyZUlkRnJvbUV2ZW50LmFwcGx5KHRoaXMsCmFyZ3VtZW50cyk7Ynx8KGI9YS50YXJnZXQsYj1iLnBhcmVudE5vZGUmJmIhPXRoaXMucmVuZGVyZXJSb290P2IucGFyZW50Tm9kZS5fZmVhdHVyZUlkOnZvaWQgMCk7cmV0dXJuIGJ9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuUmVuZGVyZXIuU1ZHIn0pO09wZW5MYXllcnMuUmVuZGVyZXIuU1ZHLkxBQkVMX0FMSUdOPXtsOiJzdGFydCIscjoiZW5kIixiOiJib3R0b20iLHQ6ImhhbmdpbmcifTtPcGVuTGF5ZXJzLlJlbmRlcmVyLlNWRy5MQUJFTF9WU0hJRlQ9e3Q6Ii03MCUiLGI6IjAifTtPcGVuTGF5ZXJzLlJlbmRlcmVyLlNWRy5MQUJFTF9WRkFDVE9SPXt0OjAsYjotMX07T3BlbkxheWVycy5SZW5kZXJlci5TVkcucHJldmVudERlZmF1bHQ9ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5FdmVudC5wcmV2ZW50RGVmYXVsdChhKX07T3BlbkxheWVycy5Gb3JtYXQuU0xELnYxXzBfMD1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuRm9ybWF0LlNMRC52MSx7VkVSU0lPTjoiMS4wLjAiLHNjaGVtYUxvY2F0aW9uOiJodHRwOi8vd3d3Lm9wZW5naXMubmV0L3NsZCBodHRwOi8vc2NoZW1hcy5vcGVuZ2lzLm5ldC9zbGQvMS4wLjAvU3R5bGVkTGF5ZXJEZXNjcmlwdG9yLnhzZCIsQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Gb3JtYXQuU0xELnYxXzBfMCJ9KTtPcGVuTGF5ZXJzLkZvcm1hdC5PV1NDb250ZXh0PU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Gb3JtYXQuQ29udGV4dCx7ZGVmYXVsdFZlcnNpb246IjAuMy4xIixnZXRWZXJzaW9uOmZ1bmN0aW9uKGEsYil7dmFyIGM9T3BlbkxheWVycy5Gb3JtYXQuWE1MLlZlcnNpb25lZE9HQy5wcm90b3R5cGUuZ2V0VmVyc2lvbi5hcHBseSh0aGlzLGFyZ3VtZW50cyk7IjAuMy4wIj09PWMmJihjPXRoaXMuZGVmYXVsdFZlcnNpb24pO3JldHVybiBjfSx0b0NvbnRleHQ6ZnVuY3Rpb24oYSl7dmFyIGI9e307Ik9wZW5MYXllcnMuTWFwIj09YS5DTEFTU19OQU1FJiYoYi5ib3VuZHM9YS5nZXRFeHRlbnQoKSxiLm1heEV4dGVudD1hLm1heEV4dGVudCxiLnByb2plY3Rpb249YS5wcm9qZWN0aW9uLGIuc2l6ZT1hLmdldFNpemUoKSxiLmxheWVycz1hLmxheWVycyk7cmV0dXJuIGJ9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuRm9ybWF0Lk9XU0NvbnRleHQifSk7T3BlbkxheWVycy5Gb3JtYXQuT1dTQ29udGV4dC52MF8zXzE9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkZvcm1hdC5YTUwse25hbWVzcGFjZXM6e293YzoiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9vd3MtY29udGV4dCIsZ21sOiJodHRwOi8vd3d3Lm9wZW5naXMubmV0L2dtbCIsa21sOiJodHRwOi8vd3d3Lm9wZW5naXMubmV0L2ttbC8yLjIiLG9nYzoiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9vZ2MiLG93czoiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9vd3MiLHNsZDoiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9zbGQiLHhsaW5rOiJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIix4c2k6Imh0dHA6Ly93d3cudzMub3JnLzIwMDEvWE1MU2NoZW1hLWluc3RhbmNlIn0sVkVSU0lPTjoiMC4zLjEiLHNjaGVtYUxvY2F0aW9uOiJodHRwOi8vd3d3Lm9wZW5naXMubmV0L293cy1jb250ZXh0IGh0dHA6Ly93d3cub2djbmV0d29yay5uZXQvc2NoZW1hcy9vd2MvMC4zLjEvb3dzQ29udGV4dC54c2QiLApkZWZhdWx0UHJlZml4OiJvd2MiLGV4dHJhY3RBdHRyaWJ1dGVzOiEwLHh5OiEwLHJlZ0V4ZXM6e3RyaW1TcGFjZTovXlxzKnxccyokL2cscmVtb3ZlU3BhY2U6L1xzKi9nLHNwbGl0U3BhY2U6L1xzKy8sdHJpbUNvbW1hOi9ccyosXHMqL2d9LGZlYXR1cmVOUzoiaHR0cDovL21hcHNlcnZlci5naXMudW1uLmVkdS9tYXBzZXJ2ZXIiLGZlYXR1cmVUeXBlOiJ2ZWN0b3IiLGdlb21ldHJ5TmFtZToiZ2VvbWV0cnkiLG5lc3RpbmdMYXllckxvb2t1cDpudWxsLGluaXRpYWxpemU6ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5Gb3JtYXQuWE1MLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsW2FdKTtPcGVuTGF5ZXJzLkZvcm1hdC5HTUwudjIucHJvdG90eXBlLnNldEdlb21ldHJ5VHlwZXMuY2FsbCh0aGlzKX0sc2V0TmVzdGluZ1BhdGg6ZnVuY3Rpb24oYSl7aWYoYS5sYXllcnNDb250ZXh0KWZvcih2YXIgYj0wLGM9YS5sYXllcnNDb250ZXh0Lmxlbmd0aDtiPGM7YisrKXt2YXIgZD0KYS5sYXllcnNDb250ZXh0W2JdLGU9W10sZj1hLnRpdGxlfHwiIjthLm1ldGFkYXRhJiZhLm1ldGFkYXRhLm5lc3RpbmdQYXRoJiYoZT1hLm1ldGFkYXRhLm5lc3RpbmdQYXRoLnNsaWNlKCkpOyIiIT1mJiZlLnB1c2goZik7ZC5tZXRhZGF0YS5uZXN0aW5nUGF0aD1lO2QubGF5ZXJzQ29udGV4dCYmdGhpcy5zZXROZXN0aW5nUGF0aChkKX19LGRlY29tcG9zZU5lc3RpbmdQYXRoOmZ1bmN0aW9uKGEpe3ZhciBiPVtdO2lmKE9wZW5MYXllcnMuVXRpbC5pc0FycmF5KGEpKXtmb3IoYT1hLnNsaWNlKCk7MDxhLmxlbmd0aDspYi5wdXNoKGEuc2xpY2UoKSksYS5wb3AoKTtiLnJldmVyc2UoKX1yZXR1cm4gYn0scmVhZDpmdW5jdGlvbihhKXsic3RyaW5nIj09dHlwZW9mIGEmJihhPU9wZW5MYXllcnMuRm9ybWF0LlhNTC5wcm90b3R5cGUucmVhZC5hcHBseSh0aGlzLFthXSkpO2EmJjk9PWEubm9kZVR5cGUmJihhPWEuZG9jdW1lbnRFbGVtZW50KTt2YXIgYj17fTt0aGlzLnJlYWROb2RlKGEsCmIpO3RoaXMuc2V0TmVzdGluZ1BhdGgoe2xheWVyc0NvbnRleHQ6Yi5sYXllcnNDb250ZXh0fSk7YT1bXTt0aGlzLnByb2Nlc3NMYXllcihhLGIpO2RlbGV0ZSBiLmxheWVyc0NvbnRleHQ7Yi5sYXllcnNDb250ZXh0PWE7cmV0dXJuIGJ9LHByb2Nlc3NMYXllcjpmdW5jdGlvbihhLGIpe2lmKGIubGF5ZXJzQ29udGV4dClmb3IodmFyIGM9MCxkPWIubGF5ZXJzQ29udGV4dC5sZW5ndGg7YzxkO2MrKyl7dmFyIGU9Yi5sYXllcnNDb250ZXh0W2NdO2EucHVzaChlKTtlLmxheWVyc0NvbnRleHQmJnRoaXMucHJvY2Vzc0xheWVyKGEsZSl9fSx3cml0ZTpmdW5jdGlvbihhLGIpe3RoaXMubmVzdGluZ0xheWVyTG9va3VwPXt9O2I9Ynx8e307T3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoYixhKTt2YXIgYz10aGlzLndyaXRlTm9kZSgiT1dTQ29udGV4dCIsYik7dGhpcy5uZXN0aW5nTGF5ZXJMb29rdXA9bnVsbDt0aGlzLnNldEF0dHJpYnV0ZU5TKGMsdGhpcy5uYW1lc3BhY2VzLnhzaSwKInhzaTpzY2hlbWFMb2NhdGlvbiIsdGhpcy5zY2hlbWFMb2NhdGlvbik7cmV0dXJuIE9wZW5MYXllcnMuRm9ybWF0LlhNTC5wcm90b3R5cGUud3JpdGUuYXBwbHkodGhpcyxbY10pfSxyZWFkZXJzOntrbWw6e0RvY3VtZW50OmZ1bmN0aW9uKGEsYil7Yi5mZWF0dXJlcz0obmV3IE9wZW5MYXllcnMuRm9ybWF0LktNTCh7a21sbnM6dGhpcy5uYW1lc3BhY2VzLmttbCxleHRyYWN0U3R5bGVzOiEwfSkpLnJlYWQoYSl9fSxvd2M6e09XU0NvbnRleHQ6ZnVuY3Rpb24oYSxiKXt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYil9LEdlbmVyYWw6ZnVuY3Rpb24oYSxiKXt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYil9LFJlc291cmNlTGlzdDpmdW5jdGlvbihhLGIpe3RoaXMucmVhZENoaWxkTm9kZXMoYSxiKX0sTGF5ZXI6ZnVuY3Rpb24oYSxiKXt2YXIgYz17bWV0YWRhdGE6e30sdmlzaWJpbGl0eToiMSIhPWEuZ2V0QXR0cmlidXRlKCJoaWRkZW4iKSxxdWVyeWFibGU6IjEiPT1hLmdldEF0dHJpYnV0ZSgicXVlcnlhYmxlIiksCm9wYWNpdHk6bnVsbCE9YS5nZXRBdHRyaWJ1dGUoIm9wYWNpdHkiKT9wYXJzZUZsb2F0KGEuZ2V0QXR0cmlidXRlKCJvcGFjaXR5IikpOm51bGwsbmFtZTphLmdldEF0dHJpYnV0ZSgibmFtZSIpLGNhdGVnb3J5TGF5ZXI6bnVsbD09YS5nZXRBdHRyaWJ1dGUoIm5hbWUiKSxmb3JtYXRzOltdLHN0eWxlczpbXX07Yi5sYXllcnNDb250ZXh0fHwoYi5sYXllcnNDb250ZXh0PVtdKTtiLmxheWVyc0NvbnRleHQucHVzaChjKTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYyl9LElubGluZUdlb21ldHJ5OmZ1bmN0aW9uKGEsYil7Yi5mZWF0dXJlcz1bXTt2YXIgYz10aGlzLmdldEVsZW1lbnRzQnlUYWdOYW1lTlMoYSx0aGlzLm5hbWVzcGFjZXMuZ21sLCJmZWF0dXJlTWVtYmVyIiksZDsxPD1jLmxlbmd0aCYmKGQ9Y1swXSk7ZCYmZC5maXJzdENoaWxkJiYoYz1kLmZpcnN0Q2hpbGQubmV4dFNpYmxpbmc/ZC5maXJzdENoaWxkLm5leHRTaWJsaW5nOmQuZmlyc3RDaGlsZCx0aGlzLnNldE5hbWVzcGFjZSgiZmVhdHVyZSIsCmMubmFtZXNwYWNlVVJJKSx0aGlzLmZlYXR1cmVUeXBlPWMubG9jYWxOYW1lfHxjLm5vZGVOYW1lLnNwbGl0KCI6IikucG9wKCksdGhpcy5yZWFkQ2hpbGROb2RlcyhhLGIpKX0sU2VydmVyOmZ1bmN0aW9uKGEsYil7aWYoIWIuc2VydmljZSYmIWIudmVyc2lvbnx8Yi5zZXJ2aWNlIT1PcGVuTGF5ZXJzLkZvcm1hdC5Db250ZXh0LnNlcnZpY2VUeXBlcy5XTVMpYi5zZXJ2aWNlPWEuZ2V0QXR0cmlidXRlKCJzZXJ2aWNlIiksYi52ZXJzaW9uPWEuZ2V0QXR0cmlidXRlKCJ2ZXJzaW9uIiksdGhpcy5yZWFkQ2hpbGROb2RlcyhhLGIpfSxOYW1lOmZ1bmN0aW9uKGEsYil7Yi5uYW1lPXRoaXMuZ2V0Q2hpbGRWYWx1ZShhKTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYil9LFRpdGxlOmZ1bmN0aW9uKGEsYil7Yi50aXRsZT10aGlzLmdldENoaWxkVmFsdWUoYSk7dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGIpfSxTdHlsZUxpc3Q6ZnVuY3Rpb24oYSxiKXt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYi5zdHlsZXMpfSwKU3R5bGU6ZnVuY3Rpb24oYSxiKXt2YXIgYz17fTtiLnB1c2goYyk7dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGMpfSxMZWdlbmRVUkw6ZnVuY3Rpb24oYSxiKXt2YXIgYz17fTtiLmxlZ2VuZD1jO3RoaXMucmVhZENoaWxkTm9kZXMoYSxjKX0sT25saW5lUmVzb3VyY2U6ZnVuY3Rpb24oYSxiKXtiLnVybD10aGlzLmdldEF0dHJpYnV0ZU5TKGEsdGhpcy5uYW1lc3BhY2VzLnhsaW5rLCJocmVmIik7dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGIpfX0sb3dzOk9wZW5MYXllcnMuRm9ybWF0Lk9XU0NvbW1vbi52MV8wXzAucHJvdG90eXBlLnJlYWRlcnMub3dzLGdtbDpPcGVuTGF5ZXJzLkZvcm1hdC5HTUwudjIucHJvdG90eXBlLnJlYWRlcnMuZ21sLHNsZDpPcGVuTGF5ZXJzLkZvcm1hdC5TTEQudjFfMF8wLnByb3RvdHlwZS5yZWFkZXJzLnNsZCxmZWF0dXJlOk9wZW5MYXllcnMuRm9ybWF0LkdNTC52Mi5wcm90b3R5cGUucmVhZGVycy5mZWF0dXJlfSx3cml0ZXJzOntvd2M6e09XU0NvbnRleHQ6ZnVuY3Rpb24oYSl7dmFyIGI9CnRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygiT1dTQ29udGV4dCIse2F0dHJpYnV0ZXM6e3ZlcnNpb246dGhpcy5WRVJTSU9OLGlkOmEuaWR8fE9wZW5MYXllcnMuVXRpbC5jcmVhdGVVbmlxdWVJRCgiT3BlbkxheWVyc19PV1NDb250ZXh0XyIpfX0pO3RoaXMud3JpdGVOb2RlKCJHZW5lcmFsIixhLGIpO3RoaXMud3JpdGVOb2RlKCJSZXNvdXJjZUxpc3QiLGEsYik7cmV0dXJuIGJ9LEdlbmVyYWw6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJHZW5lcmFsIik7dGhpcy53cml0ZU5vZGUoIm93czpCb3VuZGluZ0JveCIsYSxiKTt0aGlzLndyaXRlTm9kZSgib3dzOlRpdGxlIixhLnRpdGxlfHwiT3BlbkxheWVycyBPV1NDb250ZXh0IixiKTtyZXR1cm4gYn0sUmVzb3VyY2VMaXN0OmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoIlJlc291cmNlTGlzdCIpLGM9MCxkPWEubGF5ZXJzLmxlbmd0aDtjPGQ7YysrKXt2YXIgZT0KYS5sYXllcnNbY10sZj10aGlzLmRlY29tcG9zZU5lc3RpbmdQYXRoKGUubWV0YWRhdGEubmVzdGluZ1BhdGgpO3RoaXMud3JpdGVOb2RlKCJfTGF5ZXIiLHtsYXllcjplLHN1YlBhdGhzOmZ9LGIpfXJldHVybiBifSxTZXJ2ZXI6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJTZXJ2ZXIiLHthdHRyaWJ1dGVzOnt2ZXJzaW9uOmEudmVyc2lvbixzZXJ2aWNlOmEuc2VydmljZX19KTt0aGlzLndyaXRlTm9kZSgiT25saW5lUmVzb3VyY2UiLGEsYik7cmV0dXJuIGJ9LE9ubGluZVJlc291cmNlOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoIk9ubGluZVJlc291cmNlIix7YXR0cmlidXRlczp7InhsaW5rOmhyZWYiOmEudXJsfX0pfSxJbmxpbmVHZW9tZXRyeTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoIklubGluZUdlb21ldHJ5IiksYz1hLmdldERhdGFFeHRlbnQoKTtudWxsIT09YyYmdGhpcy53cml0ZU5vZGUoImdtbDpib3VuZGVkQnkiLApjLGIpO2Zvcih2YXIgYz0wLGQ9YS5mZWF0dXJlcy5sZW5ndGg7YzxkO2MrKyl0aGlzLndyaXRlTm9kZSgiZ21sOmZlYXR1cmVNZW1iZXIiLGEuZmVhdHVyZXNbY10sYik7cmV0dXJuIGJ9LFN0eWxlTGlzdDpmdW5jdGlvbihhKXtmb3IodmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJTdHlsZUxpc3QiKSxjPTAsZD1hLmxlbmd0aDtjPGQ7YysrKXRoaXMud3JpdGVOb2RlKCJTdHlsZSIsYVtjXSxiKTtyZXR1cm4gYn0sU3R5bGU6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJTdHlsZSIpO3RoaXMud3JpdGVOb2RlKCJOYW1lIixhLGIpO3RoaXMud3JpdGVOb2RlKCJUaXRsZSIsYSxiKTthLmxlZ2VuZCYmdGhpcy53cml0ZU5vZGUoIkxlZ2VuZFVSTCIsYSxiKTtyZXR1cm4gYn0sTmFtZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJOYW1lIix7dmFsdWU6YS5uYW1lfSl9LFRpdGxlOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoIlRpdGxlIiwKe3ZhbHVlOmEudGl0bGV9KX0sTGVnZW5kVVJMOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygiTGVnZW5kVVJMIik7dGhpcy53cml0ZU5vZGUoIk9ubGluZVJlc291cmNlIixhLmxlZ2VuZCxiKTtyZXR1cm4gYn0sX1dNUzpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoIkxheWVyIix7YXR0cmlidXRlczp7bmFtZTphLnBhcmFtcy5MQVlFUlMscXVlcnlhYmxlOmEucXVlcnlhYmxlPyIxIjoiMCIsaGlkZGVuOmEudmlzaWJpbGl0eT8iMCI6IjEiLG9wYWNpdHk6YS5oYXNPd25Qcm9wZXJ0eSgib3BhY2l0eSIpP2Eub3BhY2l0eTpudWxsfX0pO3RoaXMud3JpdGVOb2RlKCJvd3M6VGl0bGUiLGEubmFtZSxiKTt0aGlzLndyaXRlTm9kZSgib3dzOk91dHB1dEZvcm1hdCIsYS5wYXJhbXMuRk9STUFULGIpO3RoaXMud3JpdGVOb2RlKCJTZXJ2ZXIiLHtzZXJ2aWNlOk9wZW5MYXllcnMuRm9ybWF0LkNvbnRleHQuc2VydmljZVR5cGVzLldNUywKdmVyc2lvbjphLnBhcmFtcy5WRVJTSU9OLHVybDphLnVybH0sYik7YS5tZXRhZGF0YS5zdHlsZXMmJjA8YS5tZXRhZGF0YS5zdHlsZXMubGVuZ3RoJiZ0aGlzLndyaXRlTm9kZSgiU3R5bGVMaXN0IixhLm1ldGFkYXRhLnN0eWxlcyxiKTtyZXR1cm4gYn0sX0xheWVyOmZ1bmN0aW9uKGEpe3ZhciBiLGMsZDtiPWEubGF5ZXI7Yz1hLnN1YlBhdGhzO2Q9bnVsbDswPGMubGVuZ3RoPyhiPWNbMF0uam9pbigiLyIpLGM9Yi5sYXN0SW5kZXhPZigiLyIpLGQ9dGhpcy5uZXN0aW5nTGF5ZXJMb29rdXBbYl0sYz0wPGM/Yi5zdWJzdHJpbmcoYysxLGIubGVuZ3RoKTpiLGR8fChkPXRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygiTGF5ZXIiKSx0aGlzLndyaXRlTm9kZSgib3dzOlRpdGxlIixjLGQpLHRoaXMubmVzdGluZ0xheWVyTG9va3VwW2JdPWQpLGEuc3ViUGF0aHMuc2hpZnQoKSx0aGlzLndyaXRlTm9kZSgiX0xheWVyIixhLGQpKTooYiBpbnN0YW5jZW9mIE9wZW5MYXllcnMuTGF5ZXIuV01TPwpkPXRoaXMud3JpdGVOb2RlKCJfV01TIixiKTpiIGluc3RhbmNlb2YgT3BlbkxheWVycy5MYXllci5WZWN0b3ImJihiLnByb3RvY29sIGluc3RhbmNlb2YgT3BlbkxheWVycy5Qcm90b2NvbC5XRlMudjE/ZD10aGlzLndyaXRlTm9kZSgiX1dGUyIsYik6Yi5wcm90b2NvbCBpbnN0YW5jZW9mIE9wZW5MYXllcnMuUHJvdG9jb2wuSFRUUD9iLnByb3RvY29sLmZvcm1hdCBpbnN0YW5jZW9mIE9wZW5MYXllcnMuRm9ybWF0LkdNTD8oYi5wcm90b2NvbC5mb3JtYXQudmVyc2lvbj0iMi4xLjIiLGQ9dGhpcy53cml0ZU5vZGUoIl9HTUwiLGIpKTpiLnByb3RvY29sLmZvcm1hdCBpbnN0YW5jZW9mIE9wZW5MYXllcnMuRm9ybWF0LktNTCYmKGIucHJvdG9jb2wuZm9ybWF0LnZlcnNpb249IjIuMiIsZD10aGlzLndyaXRlTm9kZSgiX0tNTCIsYikpOih0aGlzLnNldE5hbWVzcGFjZSgiZmVhdHVyZSIsdGhpcy5mZWF0dXJlTlMpLGQ9dGhpcy53cml0ZU5vZGUoIl9JbmxpbmVHZW9tZXRyeSIsYikpKSwKYi5vcHRpb25zLm1heFNjYWxlJiZ0aGlzLndyaXRlTm9kZSgic2xkOk1pblNjYWxlRGVub21pbmF0b3IiLGIub3B0aW9ucy5tYXhTY2FsZSxkKSxiLm9wdGlvbnMubWluU2NhbGUmJnRoaXMud3JpdGVOb2RlKCJzbGQ6TWF4U2NhbGVEZW5vbWluYXRvciIsYi5vcHRpb25zLm1pblNjYWxlLGQpLHRoaXMubmVzdGluZ0xheWVyTG9va3VwW2IubmFtZV09ZCk7cmV0dXJuIGR9LF9XRlM6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJMYXllciIse2F0dHJpYnV0ZXM6e25hbWU6YS5wcm90b2NvbC5mZWF0dXJlUHJlZml4KyI6IithLnByb3RvY29sLmZlYXR1cmVUeXBlLGhpZGRlbjphLnZpc2liaWxpdHk/IjAiOiIxIn19KTt0aGlzLndyaXRlTm9kZSgib3dzOlRpdGxlIixhLm5hbWUsYik7dGhpcy53cml0ZU5vZGUoIlNlcnZlciIse3NlcnZpY2U6T3BlbkxheWVycy5Gb3JtYXQuQ29udGV4dC5zZXJ2aWNlVHlwZXMuV0ZTLHZlcnNpb246YS5wcm90b2NvbC52ZXJzaW9uLAp1cmw6YS5wcm90b2NvbC51cmx9LGIpO3JldHVybiBifSxfSW5saW5lR2VvbWV0cnk6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJMYXllciIse2F0dHJpYnV0ZXM6e25hbWU6dGhpcy5mZWF0dXJlVHlwZSxoaWRkZW46YS52aXNpYmlsaXR5PyIwIjoiMSJ9fSk7dGhpcy53cml0ZU5vZGUoIm93czpUaXRsZSIsYS5uYW1lLGIpO3RoaXMud3JpdGVOb2RlKCJJbmxpbmVHZW9tZXRyeSIsYSxiKTtyZXR1cm4gYn0sX0dNTDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoIkxheWVyIik7dGhpcy53cml0ZU5vZGUoIm93czpUaXRsZSIsYS5uYW1lLGIpO3RoaXMud3JpdGVOb2RlKCJTZXJ2ZXIiLHtzZXJ2aWNlOk9wZW5MYXllcnMuRm9ybWF0LkNvbnRleHQuc2VydmljZVR5cGVzLkdNTCx1cmw6YS5wcm90b2NvbC51cmwsdmVyc2lvbjphLnByb3RvY29sLmZvcm1hdC52ZXJzaW9ufSxiKTtyZXR1cm4gYn0sX0tNTDpmdW5jdGlvbihhKXt2YXIgYj0KdGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJMYXllciIpO3RoaXMud3JpdGVOb2RlKCJvd3M6VGl0bGUiLGEubmFtZSxiKTt0aGlzLndyaXRlTm9kZSgiU2VydmVyIix7c2VydmljZTpPcGVuTGF5ZXJzLkZvcm1hdC5Db250ZXh0LnNlcnZpY2VUeXBlcy5LTUwsdmVyc2lvbjphLnByb3RvY29sLmZvcm1hdC52ZXJzaW9uLHVybDphLnByb3RvY29sLnVybH0sYik7cmV0dXJuIGJ9fSxnbWw6T3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoe2JvdW5kZWRCeTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoImdtbDpib3VuZGVkQnkiKTt0aGlzLndyaXRlTm9kZSgiZ21sOkJveCIsYSxiKTtyZXR1cm4gYn19LE9wZW5MYXllcnMuRm9ybWF0LkdNTC52Mi5wcm90b3R5cGUud3JpdGVycy5nbWwpLG93czpPcGVuTGF5ZXJzLkZvcm1hdC5PV1NDb21tb24udjFfMF8wLnByb3RvdHlwZS53cml0ZXJzLm93cyxzbGQ6T3BlbkxheWVycy5Gb3JtYXQuU0xELnYxXzBfMC5wcm90b3R5cGUud3JpdGVycy5zbGQsCmZlYXR1cmU6T3BlbkxheWVycy5Gb3JtYXQuR01MLnYyLnByb3RvdHlwZS53cml0ZXJzLmZlYXR1cmV9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuRm9ybWF0Lk9XU0NvbnRleHQudjBfM18xIn0pO09wZW5MYXllcnMuUG9wdXA9T3BlbkxheWVycy5DbGFzcyh7ZXZlbnRzOm51bGwsaWQ6IiIsbG9ubGF0Om51bGwsZGl2Om51bGwsY29udGVudFNpemU6bnVsbCxzaXplOm51bGwsY29udGVudEhUTUw6bnVsbCxiYWNrZ3JvdW5kQ29sb3I6IiIsb3BhY2l0eToiIixib3JkZXI6IiIsY29udGVudERpdjpudWxsLGdyb3VwRGl2Om51bGwsY2xvc2VEaXY6bnVsbCxhdXRvU2l6ZTohMSxtaW5TaXplOm51bGwsbWF4U2l6ZTpudWxsLGRpc3BsYXlDbGFzczoib2xQb3B1cCIsY29udGVudERpc3BsYXlDbGFzczoib2xQb3B1cENvbnRlbnQiLHBhZGRpbmc6MCxkaXNhYmxlRmlyZWZveE92ZXJmbG93SGFjazohMSxmaXhQYWRkaW5nOmZ1bmN0aW9uKCl7Im51bWJlciI9PXR5cGVvZiB0aGlzLnBhZGRpbmcmJih0aGlzLnBhZGRpbmc9bmV3IE9wZW5MYXllcnMuQm91bmRzKHRoaXMucGFkZGluZyx0aGlzLnBhZGRpbmcsdGhpcy5wYWRkaW5nLHRoaXMucGFkZGluZykpfSxwYW5NYXBJZk91dE9mVmlldzohMSwKa2VlcEluTWFwOiExLGNsb3NlT25Nb3ZlOiExLG1hcDpudWxsLGluaXRpYWxpemU6ZnVuY3Rpb24oYSxiLGMsZCxlLGYpe251bGw9PWEmJihhPU9wZW5MYXllcnMuVXRpbC5jcmVhdGVVbmlxdWVJRCh0aGlzLkNMQVNTX05BTUUrIl8iKSk7dGhpcy5pZD1hO3RoaXMubG9ubGF0PWI7dGhpcy5jb250ZW50U2l6ZT1udWxsIT1jP2M6bmV3IE9wZW5MYXllcnMuU2l6ZShPcGVuTGF5ZXJzLlBvcHVwLldJRFRILE9wZW5MYXllcnMuUG9wdXAuSEVJR0hUKTtudWxsIT1kJiYodGhpcy5jb250ZW50SFRNTD1kKTt0aGlzLmJhY2tncm91bmRDb2xvcj1PcGVuTGF5ZXJzLlBvcHVwLkNPTE9SO3RoaXMub3BhY2l0eT1PcGVuTGF5ZXJzLlBvcHVwLk9QQUNJVFk7dGhpcy5ib3JkZXI9T3BlbkxheWVycy5Qb3B1cC5CT1JERVI7dGhpcy5kaXY9T3BlbkxheWVycy5VdGlsLmNyZWF0ZURpdih0aGlzLmlkLG51bGwsbnVsbCxudWxsLG51bGwsbnVsbCwiaGlkZGVuIik7dGhpcy5kaXYuY2xhc3NOYW1lPXRoaXMuZGlzcGxheUNsYXNzOwp0aGlzLmdyb3VwRGl2PU9wZW5MYXllcnMuVXRpbC5jcmVhdGVEaXYodGhpcy5pZCsiX0dyb3VwRGl2IixudWxsLG51bGwsbnVsbCwicmVsYXRpdmUiLG51bGwsImhpZGRlbiIpO2E9dGhpcy5kaXYuaWQrIl9jb250ZW50RGl2Ijt0aGlzLmNvbnRlbnREaXY9T3BlbkxheWVycy5VdGlsLmNyZWF0ZURpdihhLG51bGwsdGhpcy5jb250ZW50U2l6ZS5jbG9uZSgpLG51bGwsInJlbGF0aXZlIik7dGhpcy5jb250ZW50RGl2LmNsYXNzTmFtZT10aGlzLmNvbnRlbnREaXNwbGF5Q2xhc3M7dGhpcy5ncm91cERpdi5hcHBlbmRDaGlsZCh0aGlzLmNvbnRlbnREaXYpO3RoaXMuZGl2LmFwcGVuZENoaWxkKHRoaXMuZ3JvdXBEaXYpO2UmJnRoaXMuYWRkQ2xvc2VCb3goZik7dGhpcy5yZWdpc3RlckV2ZW50cygpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5ib3JkZXI9dGhpcy5vcGFjaXR5PXRoaXMuYmFja2dyb3VuZENvbG9yPXRoaXMuY29udGVudEhUTUw9dGhpcy5zaXplPXRoaXMubG9ubGF0PXRoaXMuaWQ9Cm51bGw7dGhpcy5jbG9zZU9uTW92ZSYmdGhpcy5tYXAmJnRoaXMubWFwLmV2ZW50cy51bnJlZ2lzdGVyKCJtb3Zlc3RhcnQiLHRoaXMsdGhpcy5oaWRlKTt0aGlzLmV2ZW50cy5kZXN0cm95KCk7dGhpcy5ldmVudHM9bnVsbDt0aGlzLmNsb3NlRGl2JiYoT3BlbkxheWVycy5FdmVudC5zdG9wT2JzZXJ2aW5nRWxlbWVudCh0aGlzLmNsb3NlRGl2KSx0aGlzLmdyb3VwRGl2LnJlbW92ZUNoaWxkKHRoaXMuY2xvc2VEaXYpKTt0aGlzLmNsb3NlRGl2PW51bGw7dGhpcy5kaXYucmVtb3ZlQ2hpbGQodGhpcy5ncm91cERpdik7dGhpcy5ncm91cERpdj1udWxsO251bGwhPXRoaXMubWFwJiZ0aGlzLm1hcC5yZW1vdmVQb3B1cCh0aGlzKTt0aGlzLnBhbk1hcElmT3V0T2ZWaWV3PXRoaXMucGFkZGluZz10aGlzLm1heFNpemU9dGhpcy5taW5TaXplPXRoaXMuYXV0b1NpemU9dGhpcy5kaXY9dGhpcy5tYXA9bnVsbH0sZHJhdzpmdW5jdGlvbihhKXtudWxsPT1hJiZudWxsIT10aGlzLmxvbmxhdCYmbnVsbCE9CnRoaXMubWFwJiYoYT10aGlzLm1hcC5nZXRMYXllclB4RnJvbUxvbkxhdCh0aGlzLmxvbmxhdCkpO3RoaXMuY2xvc2VPbk1vdmUmJnRoaXMubWFwLmV2ZW50cy5yZWdpc3RlcigibW92ZXN0YXJ0Iix0aGlzLHRoaXMuaGlkZSk7dGhpcy5kaXNhYmxlRmlyZWZveE92ZXJmbG93SGFja3x8ImZpcmVmb3giIT1PcGVuTGF5ZXJzLkJST1dTRVJfTkFNRXx8KHRoaXMubWFwLmV2ZW50cy5yZWdpc3RlcigibW92ZXN0YXJ0Iix0aGlzLGZ1bmN0aW9uKCl7dmFyIGE9ZG9jdW1lbnQuZGVmYXVsdFZpZXcuZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLmNvbnRlbnREaXYsbnVsbCkuZ2V0UHJvcGVydHlWYWx1ZSgib3ZlcmZsb3ciKTsiaGlkZGVuIiE9YSYmKHRoaXMuY29udGVudERpdi5fb2xkT3ZlcmZsb3c9YSx0aGlzLmNvbnRlbnREaXYuc3R5bGUub3ZlcmZsb3c9ImhpZGRlbiIpfSksdGhpcy5tYXAuZXZlbnRzLnJlZ2lzdGVyKCJtb3ZlZW5kIix0aGlzLGZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5jb250ZW50RGl2Ll9vbGRPdmVyZmxvdzsKYSYmKHRoaXMuY29udGVudERpdi5zdHlsZS5vdmVyZmxvdz1hLHRoaXMuY29udGVudERpdi5fb2xkT3ZlcmZsb3c9bnVsbCl9KSk7dGhpcy5tb3ZlVG8oYSk7dGhpcy5hdXRvU2l6ZXx8dGhpcy5zaXplfHx0aGlzLnNldFNpemUodGhpcy5jb250ZW50U2l6ZSk7dGhpcy5zZXRCYWNrZ3JvdW5kQ29sb3IoKTt0aGlzLnNldE9wYWNpdHkoKTt0aGlzLnNldEJvcmRlcigpO3RoaXMuc2V0Q29udGVudEhUTUwoKTt0aGlzLnBhbk1hcElmT3V0T2ZWaWV3JiZ0aGlzLnBhbkludG9WaWV3KCk7cmV0dXJuIHRoaXMuZGl2fSx1cGRhdGVQb3NpdGlvbjpmdW5jdGlvbigpe2lmKHRoaXMubG9ubGF0JiZ0aGlzLm1hcCl7dmFyIGE9dGhpcy5tYXAuZ2V0TGF5ZXJQeEZyb21Mb25MYXQodGhpcy5sb25sYXQpO2EmJnRoaXMubW92ZVRvKGEpfX0sbW92ZVRvOmZ1bmN0aW9uKGEpe251bGwhPWEmJm51bGwhPXRoaXMuZGl2JiYodGhpcy5kaXYuc3R5bGUubGVmdD1hLngrInB4Iix0aGlzLmRpdi5zdHlsZS50b3A9CmEueSsicHgiKX0sdmlzaWJsZTpmdW5jdGlvbigpe3JldHVybiBPcGVuTGF5ZXJzLkVsZW1lbnQudmlzaWJsZSh0aGlzLmRpdil9LHRvZ2dsZTpmdW5jdGlvbigpe3RoaXMudmlzaWJsZSgpP3RoaXMuaGlkZSgpOnRoaXMuc2hvdygpfSxzaG93OmZ1bmN0aW9uKCl7dGhpcy5kaXYuc3R5bGUuZGlzcGxheT0iIjt0aGlzLnBhbk1hcElmT3V0T2ZWaWV3JiZ0aGlzLnBhbkludG9WaWV3KCl9LGhpZGU6ZnVuY3Rpb24oKXt0aGlzLmRpdi5zdHlsZS5kaXNwbGF5PSJub25lIn0sc2V0U2l6ZTpmdW5jdGlvbihhKXt0aGlzLnNpemU9YS5jbG9uZSgpO3ZhciBiPXRoaXMuZ2V0Q29udGVudERpdlBhZGRpbmcoKSxjPWIubGVmdCtiLnJpZ2h0LGQ9Yi50b3ArYi5ib3R0b207dGhpcy5maXhQYWRkaW5nKCk7Yys9dGhpcy5wYWRkaW5nLmxlZnQrdGhpcy5wYWRkaW5nLnJpZ2h0O2QrPXRoaXMucGFkZGluZy50b3ArdGhpcy5wYWRkaW5nLmJvdHRvbTtpZih0aGlzLmNsb3NlRGl2KXZhciBlPXBhcnNlSW50KHRoaXMuY2xvc2VEaXYuc3R5bGUud2lkdGgpLApjPWMrKGUrYi5yaWdodCk7dGhpcy5zaXplLncrPWM7dGhpcy5zaXplLmgrPWQ7Im1zaWUiPT1PcGVuTGF5ZXJzLkJST1dTRVJfTkFNRSYmKHRoaXMuY29udGVudFNpemUudys9Yi5sZWZ0K2IucmlnaHQsdGhpcy5jb250ZW50U2l6ZS5oKz1iLmJvdHRvbStiLnRvcCk7bnVsbCE9dGhpcy5kaXYmJih0aGlzLmRpdi5zdHlsZS53aWR0aD10aGlzLnNpemUudysicHgiLHRoaXMuZGl2LnN0eWxlLmhlaWdodD10aGlzLnNpemUuaCsicHgiKTtudWxsIT10aGlzLmNvbnRlbnREaXYmJih0aGlzLmNvbnRlbnREaXYuc3R5bGUud2lkdGg9YS53KyJweCIsdGhpcy5jb250ZW50RGl2LnN0eWxlLmhlaWdodD1hLmgrInB4Iil9LHVwZGF0ZVNpemU6ZnVuY3Rpb24oKXt2YXIgYT0iPGRpdiBjbGFzcz0nIit0aGlzLmNvbnRlbnREaXNwbGF5Q2xhc3MrIic+Iit0aGlzLmNvbnRlbnREaXYuaW5uZXJIVE1MKyI8L2Rpdj4iLGI9dGhpcy5tYXA/dGhpcy5tYXAuZGl2OmRvY3VtZW50LmJvZHksYz1PcGVuTGF5ZXJzLlV0aWwuZ2V0UmVuZGVyZWREaW1lbnNpb25zKGEsCm51bGwse2Rpc3BsYXlDbGFzczp0aGlzLmRpc3BsYXlDbGFzcyxjb250YWluZXJFbGVtZW50OmJ9KSxkPXRoaXMuZ2V0U2FmZUNvbnRlbnRTaXplKGMpLGU9bnVsbDtkLmVxdWFscyhjKT9lPWM6KGM9e3c6ZC53PGMudz9kLnc6bnVsbCxoOmQuaDxjLmg/ZC5oOm51bGx9LGMudyYmYy5oP2U9ZDooYT1PcGVuTGF5ZXJzLlV0aWwuZ2V0UmVuZGVyZWREaW1lbnNpb25zKGEsYyx7ZGlzcGxheUNsYXNzOnRoaXMuY29udGVudERpc3BsYXlDbGFzcyxjb250YWluZXJFbGVtZW50OmJ9KSwiaGlkZGVuIiE9T3BlbkxheWVycy5FbGVtZW50LmdldFN0eWxlKHRoaXMuY29udGVudERpdiwib3ZlcmZsb3ciKSYmYS5lcXVhbHMoZCkmJihkPU9wZW5MYXllcnMuVXRpbC5nZXRTY3JvbGxiYXJXaWR0aCgpLGMudz9hLmgrPWQ6YS53Kz1kKSxlPXRoaXMuZ2V0U2FmZUNvbnRlbnRTaXplKGEpKSk7dGhpcy5zZXRTaXplKGUpfSxzZXRCYWNrZ3JvdW5kQ29sb3I6ZnVuY3Rpb24oYSl7dm9pZCAwIT1hJiYodGhpcy5iYWNrZ3JvdW5kQ29sb3I9CmEpO251bGwhPXRoaXMuZGl2JiYodGhpcy5kaXYuc3R5bGUuYmFja2dyb3VuZENvbG9yPXRoaXMuYmFja2dyb3VuZENvbG9yKX0sc2V0T3BhY2l0eTpmdW5jdGlvbihhKXt2b2lkIDAhPWEmJih0aGlzLm9wYWNpdHk9YSk7bnVsbCE9dGhpcy5kaXYmJih0aGlzLmRpdi5zdHlsZS5vcGFjaXR5PXRoaXMub3BhY2l0eSx0aGlzLmRpdi5zdHlsZS5maWx0ZXI9ImFscGhhKG9wYWNpdHk9IisxMDAqdGhpcy5vcGFjaXR5KyIpIil9LHNldEJvcmRlcjpmdW5jdGlvbihhKXt2b2lkIDAhPWEmJih0aGlzLmJvcmRlcj1hKTtudWxsIT10aGlzLmRpdiYmKHRoaXMuZGl2LnN0eWxlLmJvcmRlcj10aGlzLmJvcmRlcil9LHNldENvbnRlbnRIVE1MOmZ1bmN0aW9uKGEpe251bGwhPWEmJih0aGlzLmNvbnRlbnRIVE1MPWEpO251bGwhPXRoaXMuY29udGVudERpdiYmKG51bGwhPXRoaXMuY29udGVudEhUTUwmJnRoaXMuY29udGVudEhUTUwhPXRoaXMuY29udGVudERpdi5pbm5lckhUTUwpJiYodGhpcy5jb250ZW50RGl2LmlubmVySFRNTD0KdGhpcy5jb250ZW50SFRNTCx0aGlzLmF1dG9TaXplJiYodGhpcy5yZWdpc3RlckltYWdlTGlzdGVuZXJzKCksdGhpcy51cGRhdGVTaXplKCkpKX0scmVnaXN0ZXJJbWFnZUxpc3RlbmVyczpmdW5jdGlvbigpe2Zvcih2YXIgYT1mdW5jdGlvbigpe251bGwhPT10aGlzLnBvcHVwLmlkJiYodGhpcy5wb3B1cC51cGRhdGVTaXplKCksdGhpcy5wb3B1cC52aXNpYmxlKCkmJnRoaXMucG9wdXAucGFuTWFwSWZPdXRPZlZpZXcmJnRoaXMucG9wdXAucGFuSW50b1ZpZXcoKSxPcGVuTGF5ZXJzLkV2ZW50LnN0b3BPYnNlcnZpbmcodGhpcy5pbWcsImxvYWQiLHRoaXMuaW1nLl9vbkltZ0xvYWQpKX0sYj10aGlzLmNvbnRlbnREaXYuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImltZyIpLGM9MCxkPWIubGVuZ3RoO2M8ZDtjKyspe3ZhciBlPWJbY107aWYoMD09ZS53aWR0aHx8MD09ZS5oZWlnaHQpZS5fb25JbWdMb2FkPU9wZW5MYXllcnMuRnVuY3Rpb24uYmluZChhLHtwb3B1cDp0aGlzLGltZzplfSksCk9wZW5MYXllcnMuRXZlbnQub2JzZXJ2ZShlLCJsb2FkIixlLl9vbkltZ0xvYWQpfX0sZ2V0U2FmZUNvbnRlbnRTaXplOmZ1bmN0aW9uKGEpe2E9YS5jbG9uZSgpO3ZhciBiPXRoaXMuZ2V0Q29udGVudERpdlBhZGRpbmcoKSxjPWIubGVmdCtiLnJpZ2h0LGQ9Yi50b3ArYi5ib3R0b207dGhpcy5maXhQYWRkaW5nKCk7Yys9dGhpcy5wYWRkaW5nLmxlZnQrdGhpcy5wYWRkaW5nLnJpZ2h0O2QrPXRoaXMucGFkZGluZy50b3ArdGhpcy5wYWRkaW5nLmJvdHRvbTtpZih0aGlzLmNsb3NlRGl2KXZhciBlPXBhcnNlSW50KHRoaXMuY2xvc2VEaXYuc3R5bGUud2lkdGgpLGM9YysoZStiLnJpZ2h0KTt0aGlzLm1pblNpemUmJihhLnc9TWF0aC5tYXgoYS53LHRoaXMubWluU2l6ZS53LWMpLGEuaD1NYXRoLm1heChhLmgsdGhpcy5taW5TaXplLmgtZCkpO3RoaXMubWF4U2l6ZSYmKGEudz1NYXRoLm1pbihhLncsdGhpcy5tYXhTaXplLnctYyksYS5oPU1hdGgubWluKGEuaCx0aGlzLm1heFNpemUuaC0KZCkpO2lmKHRoaXMubWFwJiZ0aGlzLm1hcC5zaXplKXtlPWI9MDtpZih0aGlzLmtlZXBJbk1hcCYmIXRoaXMucGFuTWFwSWZPdXRPZlZpZXcpc3dpdGNoKGU9dGhpcy5tYXAuZ2V0UGl4ZWxGcm9tTG9uTGF0KHRoaXMubG9ubGF0KSx0aGlzLnJlbGF0aXZlUG9zaXRpb24pe2Nhc2UgInRyIjpiPWUueDtlPXRoaXMubWFwLnNpemUuaC1lLnk7YnJlYWs7Y2FzZSAidGwiOmI9dGhpcy5tYXAuc2l6ZS53LWUueDtlPXRoaXMubWFwLnNpemUuaC1lLnk7YnJlYWs7Y2FzZSAiYmwiOmI9dGhpcy5tYXAuc2l6ZS53LWUueDtlPWUueTticmVhaztjYXNlICJiciI6Yj1lLng7ZT1lLnk7YnJlYWs7ZGVmYXVsdDpiPWUueCxlPXRoaXMubWFwLnNpemUuaC1lLnl9ZD10aGlzLm1hcC5zaXplLmgtdGhpcy5tYXAucGFkZGluZ0ZvclBvcHVwcy50b3AtdGhpcy5tYXAucGFkZGluZ0ZvclBvcHVwcy5ib3R0b20tZC1lO2Eudz1NYXRoLm1pbihhLncsdGhpcy5tYXAuc2l6ZS53LXRoaXMubWFwLnBhZGRpbmdGb3JQb3B1cHMubGVmdC0KdGhpcy5tYXAucGFkZGluZ0ZvclBvcHVwcy5yaWdodC1jLWIpO2EuaD1NYXRoLm1pbihhLmgsZCl9cmV0dXJuIGF9LGdldENvbnRlbnREaXZQYWRkaW5nOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5fY29udGVudERpdlBhZGRpbmc7YXx8KG51bGw9PXRoaXMuZGl2LnBhcmVudE5vZGUmJih0aGlzLmRpdi5zdHlsZS5kaXNwbGF5PSJub25lIixkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRoaXMuZGl2KSksdGhpcy5fY29udGVudERpdlBhZGRpbmc9YT1uZXcgT3BlbkxheWVycy5Cb3VuZHMoT3BlbkxheWVycy5FbGVtZW50LmdldFN0eWxlKHRoaXMuY29udGVudERpdiwicGFkZGluZy1sZWZ0IiksT3BlbkxheWVycy5FbGVtZW50LmdldFN0eWxlKHRoaXMuY29udGVudERpdiwicGFkZGluZy1ib3R0b20iKSxPcGVuTGF5ZXJzLkVsZW1lbnQuZ2V0U3R5bGUodGhpcy5jb250ZW50RGl2LCJwYWRkaW5nLXJpZ2h0IiksT3BlbkxheWVycy5FbGVtZW50LmdldFN0eWxlKHRoaXMuY29udGVudERpdiwKInBhZGRpbmctdG9wIikpLHRoaXMuZGl2LnBhcmVudE5vZGU9PWRvY3VtZW50LmJvZHkmJihkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKHRoaXMuZGl2KSx0aGlzLmRpdi5zdHlsZS5kaXNwbGF5PSIiKSk7cmV0dXJuIGF9LGFkZENsb3NlQm94OmZ1bmN0aW9uKGEpe3RoaXMuY2xvc2VEaXY9T3BlbkxheWVycy5VdGlsLmNyZWF0ZURpdih0aGlzLmlkKyJfY2xvc2UiLG51bGwse3c6MTcsaDoxN30pO3RoaXMuY2xvc2VEaXYuY2xhc3NOYW1lPSJvbFBvcHVwQ2xvc2VCb3giO3ZhciBiPXRoaXMuZ2V0Q29udGVudERpdlBhZGRpbmcoKTt0aGlzLmNsb3NlRGl2LnN0eWxlLnJpZ2h0PWIucmlnaHQrInB4Ijt0aGlzLmNsb3NlRGl2LnN0eWxlLnRvcD1iLnRvcCsicHgiO3RoaXMuZ3JvdXBEaXYuYXBwZW5kQ2hpbGQodGhpcy5jbG9zZURpdik7YT1hfHxmdW5jdGlvbihhKXt0aGlzLmhpZGUoKTtPcGVuTGF5ZXJzLkV2ZW50LnN0b3AoYSl9O09wZW5MYXllcnMuRXZlbnQub2JzZXJ2ZSh0aGlzLmNsb3NlRGl2LAoidG91Y2hlbmQiLE9wZW5MYXllcnMuRnVuY3Rpb24uYmluZEFzRXZlbnRMaXN0ZW5lcihhLHRoaXMpKTtPcGVuTGF5ZXJzLkV2ZW50Lm9ic2VydmUodGhpcy5jbG9zZURpdiwiY2xpY2siLE9wZW5MYXllcnMuRnVuY3Rpb24uYmluZEFzRXZlbnRMaXN0ZW5lcihhLHRoaXMpKX0scGFuSW50b1ZpZXc6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm1hcC5nZXRTaXplKCksYj10aGlzLm1hcC5nZXRWaWV3UG9ydFB4RnJvbUxheWVyUHgobmV3IE9wZW5MYXllcnMuUGl4ZWwocGFyc2VJbnQodGhpcy5kaXYuc3R5bGUubGVmdCkscGFyc2VJbnQodGhpcy5kaXYuc3R5bGUudG9wKSkpLGM9Yi5jbG9uZSgpO2IueDx0aGlzLm1hcC5wYWRkaW5nRm9yUG9wdXBzLmxlZnQ/Yy54PXRoaXMubWFwLnBhZGRpbmdGb3JQb3B1cHMubGVmdDpiLngrdGhpcy5zaXplLnc+YS53LXRoaXMubWFwLnBhZGRpbmdGb3JQb3B1cHMucmlnaHQmJihjLng9YS53LXRoaXMubWFwLnBhZGRpbmdGb3JQb3B1cHMucmlnaHQtdGhpcy5zaXplLncpOwpiLnk8dGhpcy5tYXAucGFkZGluZ0ZvclBvcHVwcy50b3A/Yy55PXRoaXMubWFwLnBhZGRpbmdGb3JQb3B1cHMudG9wOmIueSt0aGlzLnNpemUuaD5hLmgtdGhpcy5tYXAucGFkZGluZ0ZvclBvcHVwcy5ib3R0b20mJihjLnk9YS5oLXRoaXMubWFwLnBhZGRpbmdGb3JQb3B1cHMuYm90dG9tLXRoaXMuc2l6ZS5oKTt0aGlzLm1hcC5wYW4oYi54LWMueCxiLnktYy55KX0scmVnaXN0ZXJFdmVudHM6ZnVuY3Rpb24oKXt0aGlzLmV2ZW50cz1uZXcgT3BlbkxheWVycy5FdmVudHModGhpcyx0aGlzLmRpdixudWxsLCEwKTt0aGlzLmV2ZW50cy5vbih7bW91c2Vkb3duOnRoaXMub25tb3VzZWRvd24sbW91c2Vtb3ZlOnRoaXMub25tb3VzZW1vdmUsbW91c2V1cDp0aGlzLm9ubW91c2V1cCxjbGljazp0aGlzLm9uY2xpY2ssbW91c2VvdXQ6dGhpcy5vbm1vdXNlb3V0LGRibGNsaWNrOnRoaXMub25kYmxjbGljayx0b3VjaHN0YXJ0OmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuRXZlbnQuc3RvcChhLCEwKX0sCnNjb3BlOnRoaXN9KX0sb25tb3VzZWRvd246ZnVuY3Rpb24oYSl7dGhpcy5tb3VzZWRvd249ITA7T3BlbkxheWVycy5FdmVudC5zdG9wKGEsITApfSxvbm1vdXNlbW92ZTpmdW5jdGlvbihhKXt0aGlzLm1vdXNlZG93biYmT3BlbkxheWVycy5FdmVudC5zdG9wKGEsITApfSxvbm1vdXNldXA6ZnVuY3Rpb24oYSl7dGhpcy5tb3VzZWRvd24mJih0aGlzLm1vdXNlZG93bj0hMSxPcGVuTGF5ZXJzLkV2ZW50LnN0b3AoYSwhMCkpfSxvbmNsaWNrOmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuRXZlbnQuc3RvcChhLCEwKX0sb25tb3VzZW91dDpmdW5jdGlvbihhKXt0aGlzLm1vdXNlZG93bj0hMX0sb25kYmxjbGljazpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLkV2ZW50LnN0b3AoYSwhMCl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuUG9wdXAifSk7T3BlbkxheWVycy5Qb3B1cC5XSURUSD0yMDA7T3BlbkxheWVycy5Qb3B1cC5IRUlHSFQ9MjAwO09wZW5MYXllcnMuUG9wdXAuQ09MT1I9IndoaXRlIjsKT3BlbkxheWVycy5Qb3B1cC5PUEFDSVRZPTE7T3BlbkxheWVycy5Qb3B1cC5CT1JERVI9IjBweCI7T3BlbkxheWVycy5Db250cm9sLlNjYWxlTGluZT1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuQ29udHJvbCx7bWF4V2lkdGg6MTAwLHRvcE91dFVuaXRzOiJrbSIsdG9wSW5Vbml0czoibSIsYm90dG9tT3V0VW5pdHM6Im1pIixib3R0b21JblVuaXRzOiJmdCIsZVRvcDpudWxsLGVCb3R0b206bnVsbCxnZW9kZXNpYzohMSxkcmF3OmZ1bmN0aW9uKCl7T3BlbkxheWVycy5Db250cm9sLnByb3RvdHlwZS5kcmF3LmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLmVUb3B8fCh0aGlzLmVUb3A9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2IiksdGhpcy5lVG9wLmNsYXNzTmFtZT10aGlzLmRpc3BsYXlDbGFzcysiVG9wIix0aGlzLmRpdi5hcHBlbmRDaGlsZCh0aGlzLmVUb3ApLHRoaXMuZVRvcC5zdHlsZS52aXNpYmlsaXR5PSIiPT10aGlzLnRvcE91dFVuaXRzfHwiIj09dGhpcy50b3BJblVuaXRzPyJoaWRkZW4iOiJ2aXNpYmxlIix0aGlzLmVCb3R0b209ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2IiksCnRoaXMuZUJvdHRvbS5jbGFzc05hbWU9dGhpcy5kaXNwbGF5Q2xhc3MrIkJvdHRvbSIsdGhpcy5kaXYuYXBwZW5kQ2hpbGQodGhpcy5lQm90dG9tKSx0aGlzLmVCb3R0b20uc3R5bGUudmlzaWJpbGl0eT0iIj09dGhpcy5ib3R0b21PdXRVbml0c3x8IiI9PXRoaXMuYm90dG9tSW5Vbml0cz8iaGlkZGVuIjoidmlzaWJsZSIpO3RoaXMubWFwLmV2ZW50cy5yZWdpc3RlcigibW92ZWVuZCIsdGhpcyx0aGlzLnVwZGF0ZSk7dGhpcy51cGRhdGUoKTtyZXR1cm4gdGhpcy5kaXZ9LGdldEJhckxlbjpmdW5jdGlvbihhKXt2YXIgYj1wYXJzZUludChNYXRoLmxvZyhhKS9NYXRoLmxvZygxMCkpLGI9TWF0aC5wb3coMTAsYik7YT1wYXJzZUludChhL2IpO3JldHVybig1PGE/NToyPGE/MjoxKSpifSx1cGRhdGU6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm1hcC5nZXRSZXNvbHV0aW9uKCk7aWYoYSl7dmFyIGI9dGhpcy5tYXAuZ2V0VW5pdHMoKSxjPU9wZW5MYXllcnMuSU5DSEVTX1BFUl9VTklULGQ9dGhpcy5tYXhXaWR0aCoKYSpjW2JdLGU9MTshMD09PXRoaXMuZ2VvZGVzaWMmJihlPSh0aGlzLm1hcC5nZXRHZW9kZXNpY1BpeGVsU2l6ZSgpLnd8fDFFLTYpKnRoaXMubWF4V2lkdGgvKGQvYy5rbSksZCo9ZSk7dmFyIGYsZzsxRTU8ZD8oZj10aGlzLnRvcE91dFVuaXRzLGc9dGhpcy5ib3R0b21PdXRVbml0cyk6KGY9dGhpcy50b3BJblVuaXRzLGc9dGhpcy5ib3R0b21JblVuaXRzKTt2YXIgaD1kL2NbZl0saz1kL2NbZ10sZD10aGlzLmdldEJhckxlbihoKSxsPXRoaXMuZ2V0QmFyTGVuKGspLGg9ZC9jW2JdKmNbZl0saz1sL2NbYl0qY1tnXSxiPWgvYS9lLGE9ay9hL2U7InZpc2libGUiPT10aGlzLmVCb3R0b20uc3R5bGUudmlzaWJpbGl0eSYmKHRoaXMuZUJvdHRvbS5zdHlsZS53aWR0aD1NYXRoLnJvdW5kKGEpKyJweCIsdGhpcy5lQm90dG9tLmlubmVySFRNTD1sKyIgIitnKTsidmlzaWJsZSI9PXRoaXMuZVRvcC5zdHlsZS52aXNpYmlsaXR5JiYodGhpcy5lVG9wLnN0eWxlLndpZHRoPU1hdGgucm91bmQoYikrCiJweCIsdGhpcy5lVG9wLmlubmVySFRNTD1kKyIgIitmKX19LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuQ29udHJvbC5TY2FsZUxpbmUifSk7T3BlbkxheWVycy5JY29uPU9wZW5MYXllcnMuQ2xhc3Moe3VybDpudWxsLHNpemU6bnVsbCxvZmZzZXQ6bnVsbCxjYWxjdWxhdGVPZmZzZXQ6bnVsbCxpbWFnZURpdjpudWxsLHB4Om51bGwsaW5pdGlhbGl6ZTpmdW5jdGlvbihhLGIsYyxkKXt0aGlzLnVybD1hO3RoaXMuc2l6ZT1ifHx7dzoyMCxoOjIwfTt0aGlzLm9mZnNldD1jfHx7eDotKHRoaXMuc2l6ZS53LzIpLHk6LSh0aGlzLnNpemUuaC8yKX07dGhpcy5jYWxjdWxhdGVPZmZzZXQ9ZDthPU9wZW5MYXllcnMuVXRpbC5jcmVhdGVVbmlxdWVJRCgiT0xfSWNvbl8iKTt0aGlzLmltYWdlRGl2PU9wZW5MYXllcnMuVXRpbC5jcmVhdGVBbHBoYUltYWdlRGl2KGEpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5lcmFzZSgpO09wZW5MYXllcnMuRXZlbnQuc3RvcE9ic2VydmluZ0VsZW1lbnQodGhpcy5pbWFnZURpdi5maXJzdENoaWxkKTt0aGlzLmltYWdlRGl2LmlubmVySFRNTD0iIjt0aGlzLmltYWdlRGl2PW51bGx9LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLkljb24odGhpcy51cmwsCnRoaXMuc2l6ZSx0aGlzLm9mZnNldCx0aGlzLmNhbGN1bGF0ZU9mZnNldCl9LHNldFNpemU6ZnVuY3Rpb24oYSl7bnVsbCE9YSYmKHRoaXMuc2l6ZT1hKTt0aGlzLmRyYXcoKX0sc2V0VXJsOmZ1bmN0aW9uKGEpe251bGwhPWEmJih0aGlzLnVybD1hKTt0aGlzLmRyYXcoKX0sZHJhdzpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLlV0aWwubW9kaWZ5QWxwaGFJbWFnZURpdih0aGlzLmltYWdlRGl2LG51bGwsbnVsbCx0aGlzLnNpemUsdGhpcy51cmwsImFic29sdXRlIik7dGhpcy5tb3ZlVG8oYSk7cmV0dXJuIHRoaXMuaW1hZ2VEaXZ9LGVyYXNlOmZ1bmN0aW9uKCl7bnVsbCE9dGhpcy5pbWFnZURpdiYmbnVsbCE9dGhpcy5pbWFnZURpdi5wYXJlbnROb2RlJiZPcGVuTGF5ZXJzLkVsZW1lbnQucmVtb3ZlKHRoaXMuaW1hZ2VEaXYpfSxzZXRPcGFjaXR5OmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuVXRpbC5tb2RpZnlBbHBoYUltYWdlRGl2KHRoaXMuaW1hZ2VEaXYsbnVsbCxudWxsLG51bGwsbnVsbCwKbnVsbCxudWxsLG51bGwsYSl9LG1vdmVUbzpmdW5jdGlvbihhKXtudWxsIT1hJiYodGhpcy5weD1hKTtudWxsIT10aGlzLmltYWdlRGl2JiYobnVsbD09dGhpcy5weD90aGlzLmRpc3BsYXkoITEpOih0aGlzLmNhbGN1bGF0ZU9mZnNldCYmKHRoaXMub2Zmc2V0PXRoaXMuY2FsY3VsYXRlT2Zmc2V0KHRoaXMuc2l6ZSkpLE9wZW5MYXllcnMuVXRpbC5tb2RpZnlBbHBoYUltYWdlRGl2KHRoaXMuaW1hZ2VEaXYsbnVsbCx7eDp0aGlzLnB4LngrdGhpcy5vZmZzZXQueCx5OnRoaXMucHgueSt0aGlzLm9mZnNldC55fSkpKX0sZGlzcGxheTpmdW5jdGlvbihhKXt0aGlzLmltYWdlRGl2LnN0eWxlLmRpc3BsYXk9YT8iIjoibm9uZSJ9LGlzRHJhd246ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbWFnZURpdiYmdGhpcy5pbWFnZURpdi5wYXJlbnROb2RlJiYxMSE9dGhpcy5pbWFnZURpdi5wYXJlbnROb2RlLm5vZGVUeXBlfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkljb24ifSk7T3BlbkxheWVycy5NYXJrZXI9T3BlbkxheWVycy5DbGFzcyh7aWNvbjpudWxsLGxvbmxhdDpudWxsLGV2ZW50czpudWxsLG1hcDpudWxsLGluaXRpYWxpemU6ZnVuY3Rpb24oYSxiKXt0aGlzLmxvbmxhdD1hO3ZhciBjPWI/YjpPcGVuTGF5ZXJzLk1hcmtlci5kZWZhdWx0SWNvbigpO251bGw9PXRoaXMuaWNvbj90aGlzLmljb249YzoodGhpcy5pY29uLnVybD1jLnVybCx0aGlzLmljb24uc2l6ZT1jLnNpemUsdGhpcy5pY29uLm9mZnNldD1jLm9mZnNldCx0aGlzLmljb24uY2FsY3VsYXRlT2Zmc2V0PWMuY2FsY3VsYXRlT2Zmc2V0KTt0aGlzLmV2ZW50cz1uZXcgT3BlbkxheWVycy5FdmVudHModGhpcyx0aGlzLmljb24uaW1hZ2VEaXYpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5lcmFzZSgpO3RoaXMubWFwPW51bGw7dGhpcy5ldmVudHMuZGVzdHJveSgpO3RoaXMuZXZlbnRzPW51bGw7bnVsbCE9dGhpcy5pY29uJiYodGhpcy5pY29uLmRlc3Ryb3koKSx0aGlzLmljb249bnVsbCl9LApkcmF3OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmljb24uZHJhdyhhKX0sZXJhc2U6ZnVuY3Rpb24oKXtudWxsIT10aGlzLmljb24mJnRoaXMuaWNvbi5lcmFzZSgpfSxtb3ZlVG86ZnVuY3Rpb24oYSl7bnVsbCE9YSYmbnVsbCE9dGhpcy5pY29uJiZ0aGlzLmljb24ubW92ZVRvKGEpO3RoaXMubG9ubGF0PXRoaXMubWFwLmdldExvbkxhdEZyb21MYXllclB4KGEpfSxpc0RyYXduOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaWNvbiYmdGhpcy5pY29uLmlzRHJhd24oKX0sb25TY3JlZW46ZnVuY3Rpb24oKXt2YXIgYT0hMTt0aGlzLm1hcCYmKGE9dGhpcy5tYXAuZ2V0RXh0ZW50KCkuY29udGFpbnNMb25MYXQodGhpcy5sb25sYXQpKTtyZXR1cm4gYX0saW5mbGF0ZTpmdW5jdGlvbihhKXt0aGlzLmljb24mJnRoaXMuaWNvbi5zZXRTaXplKHt3OnRoaXMuaWNvbi5zaXplLncqYSxoOnRoaXMuaWNvbi5zaXplLmgqYX0pfSxzZXRPcGFjaXR5OmZ1bmN0aW9uKGEpe3RoaXMuaWNvbi5zZXRPcGFjaXR5KGEpfSwKc2V0VXJsOmZ1bmN0aW9uKGEpe3RoaXMuaWNvbi5zZXRVcmwoYSl9LGRpc3BsYXk6ZnVuY3Rpb24oYSl7dGhpcy5pY29uLmRpc3BsYXkoYSl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuTWFya2VyIn0pO09wZW5MYXllcnMuTWFya2VyLmRlZmF1bHRJY29uPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLkljb24oT3BlbkxheWVycy5VdGlsLmdldEltYWdlTG9jYXRpb24oIm1hcmtlci5wbmciKSx7dzoyMSxoOjI1fSx7eDotMTAuNSx5Oi0yNX0pfTtPcGVuTGF5ZXJzLkxheWVyLlRpbGVDYWNoZT1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuTGF5ZXIuR3JpZCx7aXNCYXNlTGF5ZXI6ITAsZm9ybWF0OiJpbWFnZS9wbmciLHNlcnZlclJlc29sdXRpb25zOm51bGwsaW5pdGlhbGl6ZTpmdW5jdGlvbihhLGIsYyxkKXt0aGlzLmxheWVybmFtZT1jO09wZW5MYXllcnMuTGF5ZXIuR3JpZC5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLFthLGIse30sZF0pO3RoaXMuZXh0ZW5zaW9uPXRoaXMuZm9ybWF0LnNwbGl0KCIvIilbMV0udG9Mb3dlckNhc2UoKTt0aGlzLmV4dGVuc2lvbj0ianBnIj09dGhpcy5leHRlbnNpb24/ImpwZWciOnRoaXMuZXh0ZW5zaW9ufSxjbG9uZTpmdW5jdGlvbihhKXtudWxsPT1hJiYoYT1uZXcgT3BlbkxheWVycy5MYXllci5UaWxlQ2FjaGUodGhpcy5uYW1lLHRoaXMudXJsLHRoaXMubGF5ZXJuYW1lLHRoaXMuZ2V0T3B0aW9ucygpKSk7cmV0dXJuIGE9T3BlbkxheWVycy5MYXllci5HcmlkLnByb3RvdHlwZS5jbG9uZS5hcHBseSh0aGlzLApbYV0pfSxnZXRVUkw6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5nZXRTZXJ2ZXJSZXNvbHV0aW9uKCksYz10aGlzLm1heEV4dGVudCxkPXRoaXMudGlsZVNpemUsZT1NYXRoLnJvdW5kKChhLmxlZnQtYy5sZWZ0KS8oYipkLncpKTthPU1hdGgucm91bmQoKGEuYm90dG9tLWMuYm90dG9tKS8oYipkLmgpKTtiPW51bGwhPXRoaXMuc2VydmVyUmVzb2x1dGlvbnM/T3BlbkxheWVycy5VdGlsLmluZGV4T2YodGhpcy5zZXJ2ZXJSZXNvbHV0aW9ucyxiKTp0aGlzLm1hcC5nZXRab29tKCk7ZT1bdGhpcy5sYXllcm5hbWUsT3BlbkxheWVycy5OdW1iZXIuemVyb1BhZChiLDIpLE9wZW5MYXllcnMuTnVtYmVyLnplcm9QYWQocGFyc2VJbnQoZS8xRTYpLDMpLE9wZW5MYXllcnMuTnVtYmVyLnplcm9QYWQocGFyc2VJbnQoZS8xRTMpJTFFMywzKSxPcGVuTGF5ZXJzLk51bWJlci56ZXJvUGFkKHBhcnNlSW50KGUpJTFFMywzKSxPcGVuTGF5ZXJzLk51bWJlci56ZXJvUGFkKHBhcnNlSW50KGEvMUU2KSwKMyksT3BlbkxheWVycy5OdW1iZXIuemVyb1BhZChwYXJzZUludChhLzFFMyklMUUzLDMpLE9wZW5MYXllcnMuTnVtYmVyLnplcm9QYWQocGFyc2VJbnQoYSklMUUzLDMpKyIuIit0aGlzLmV4dGVuc2lvbl0uam9pbigiLyIpO2I9dGhpcy51cmw7T3BlbkxheWVycy5VdGlsLmlzQXJyYXkoYikmJihiPXRoaXMuc2VsZWN0VXJsKGUsYikpO2I9Ii8iPT1iLmNoYXJBdChiLmxlbmd0aC0xKT9iOmIrIi8iO3JldHVybiBiK2V9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuTGF5ZXIuVGlsZUNhY2hlIn0pO09wZW5MYXllcnMuU3RyYXRlZ3kuUGFnaW5nPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5TdHJhdGVneSx7ZmVhdHVyZXM6bnVsbCxsZW5ndGg6MTAsbnVtOm51bGwscGFnaW5nOiExLGFjdGl2YXRlOmZ1bmN0aW9uKCl7dmFyIGE9T3BlbkxheWVycy5TdHJhdGVneS5wcm90b3R5cGUuYWN0aXZhdGUuY2FsbCh0aGlzKTtpZihhKXRoaXMubGF5ZXIuZXZlbnRzLm9uKHtiZWZvcmVmZWF0dXJlc2FkZGVkOnRoaXMuY2FjaGVGZWF0dXJlcyxzY29wZTp0aGlzfSk7cmV0dXJuIGF9LGRlYWN0aXZhdGU6ZnVuY3Rpb24oKXt2YXIgYT1PcGVuTGF5ZXJzLlN0cmF0ZWd5LnByb3RvdHlwZS5kZWFjdGl2YXRlLmNhbGwodGhpcyk7YSYmKHRoaXMuY2xlYXJDYWNoZSgpLHRoaXMubGF5ZXIuZXZlbnRzLnVuKHtiZWZvcmVmZWF0dXJlc2FkZGVkOnRoaXMuY2FjaGVGZWF0dXJlcyxzY29wZTp0aGlzfSkpO3JldHVybiBhfSxjYWNoZUZlYXR1cmVzOmZ1bmN0aW9uKGEpe3RoaXMucGFnaW5nfHwodGhpcy5jbGVhckNhY2hlKCksCnRoaXMuZmVhdHVyZXM9YS5mZWF0dXJlcyx0aGlzLnBhZ2VOZXh0KGEpKX0sY2xlYXJDYWNoZTpmdW5jdGlvbigpe2lmKHRoaXMuZmVhdHVyZXMpZm9yKHZhciBhPTA7YTx0aGlzLmZlYXR1cmVzLmxlbmd0aDsrK2EpdGhpcy5mZWF0dXJlc1thXS5kZXN0cm95KCk7dGhpcy5udW09dGhpcy5mZWF0dXJlcz1udWxsfSxwYWdlQ291bnQ6ZnVuY3Rpb24oKXtyZXR1cm4gTWF0aC5jZWlsKCh0aGlzLmZlYXR1cmVzP3RoaXMuZmVhdHVyZXMubGVuZ3RoOjApL3RoaXMubGVuZ3RoKX0scGFnZU51bTpmdW5jdGlvbigpe3JldHVybiB0aGlzLm51bX0scGFnZUxlbmd0aDpmdW5jdGlvbihhKXthJiYwPGEmJih0aGlzLmxlbmd0aD1hKTtyZXR1cm4gdGhpcy5sZW5ndGh9LHBhZ2VOZXh0OmZ1bmN0aW9uKGEpe3ZhciBiPSExO3RoaXMuZmVhdHVyZXMmJihudWxsPT09dGhpcy5udW0mJih0aGlzLm51bT0tMSksYj10aGlzLnBhZ2UoKHRoaXMubnVtKzEpKnRoaXMubGVuZ3RoLGEpKTtyZXR1cm4gYn0scGFnZVByZXZpb3VzOmZ1bmN0aW9uKCl7dmFyIGE9CiExO3RoaXMuZmVhdHVyZXMmJihudWxsPT09dGhpcy5udW0mJih0aGlzLm51bT10aGlzLnBhZ2VDb3VudCgpKSxhPXRoaXMucGFnZSgodGhpcy5udW0tMSkqdGhpcy5sZW5ndGgpKTtyZXR1cm4gYX0scGFnZTpmdW5jdGlvbihhLGIpe3ZhciBjPSExO2lmKHRoaXMuZmVhdHVyZXMmJjA8PWEmJmE8dGhpcy5mZWF0dXJlcy5sZW5ndGgpe3ZhciBkPU1hdGguZmxvb3IoYS90aGlzLmxlbmd0aCk7ZCE9dGhpcy5udW0mJih0aGlzLnBhZ2luZz0hMCxjPXRoaXMuZmVhdHVyZXMuc2xpY2UoYSxhK3RoaXMubGVuZ3RoKSx0aGlzLmxheWVyLnJlbW92ZUZlYXR1cmVzKHRoaXMubGF5ZXIuZmVhdHVyZXMpLHRoaXMubnVtPWQsYiYmYi5mZWF0dXJlcz9iLmZlYXR1cmVzPWM6dGhpcy5sYXllci5hZGRGZWF0dXJlcyhjKSx0aGlzLnBhZ2luZz0hMSxjPSEwKX1yZXR1cm4gY30sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5TdHJhdGVneS5QYWdpbmcifSk7T3BlbkxheWVycy5Db250cm9sLkRyYWdGZWF0dXJlPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Db250cm9sLHtnZW9tZXRyeVR5cGVzOm51bGwsb25TdGFydDpmdW5jdGlvbihhLGIpe30sb25EcmFnOmZ1bmN0aW9uKGEsYil7fSxvbkNvbXBsZXRlOmZ1bmN0aW9uKGEsYil7fSxvbkVudGVyOmZ1bmN0aW9uKGEpe30sb25MZWF2ZTpmdW5jdGlvbihhKXt9LGRvY3VtZW50RHJhZzohMSxsYXllcjpudWxsLGZlYXR1cmU6bnVsbCxkcmFnQ2FsbGJhY2tzOnt9LGZlYXR1cmVDYWxsYmFja3M6e30sbGFzdFBpeGVsOm51bGwsaW5pdGlhbGl6ZTpmdW5jdGlvbihhLGIpe09wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLFtiXSk7dGhpcy5sYXllcj1hO3RoaXMuaGFuZGxlcnM9e2RyYWc6bmV3IE9wZW5MYXllcnMuSGFuZGxlci5EcmFnKHRoaXMsT3BlbkxheWVycy5VdGlsLmV4dGVuZCh7ZG93bjp0aGlzLmRvd25GZWF0dXJlLG1vdmU6dGhpcy5tb3ZlRmVhdHVyZSwKdXA6dGhpcy51cEZlYXR1cmUsb3V0OnRoaXMuY2FuY2VsLGRvbmU6dGhpcy5kb25lRHJhZ2dpbmd9LHRoaXMuZHJhZ0NhbGxiYWNrcykse2RvY3VtZW50RHJhZzp0aGlzLmRvY3VtZW50RHJhZ30pLGZlYXR1cmU6bmV3IE9wZW5MYXllcnMuSGFuZGxlci5GZWF0dXJlKHRoaXMsdGhpcy5sYXllcixPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHtjbGljazp0aGlzLmNsaWNrRmVhdHVyZSxjbGlja291dDp0aGlzLmNsaWNrb3V0RmVhdHVyZSxvdmVyOnRoaXMub3ZlckZlYXR1cmUsb3V0OnRoaXMub3V0RmVhdHVyZX0sdGhpcy5mZWF0dXJlQ2FsbGJhY2tzKSx7Z2VvbWV0cnlUeXBlczp0aGlzLmdlb21ldHJ5VHlwZXN9KX19LGNsaWNrRmVhdHVyZTpmdW5jdGlvbihhKXt0aGlzLmhhbmRsZXJzLmZlYXR1cmUudG91Y2gmJighdGhpcy5vdmVyJiZ0aGlzLm92ZXJGZWF0dXJlKGEpKSYmKHRoaXMuaGFuZGxlcnMuZHJhZy5kcmFnc3RhcnQodGhpcy5oYW5kbGVycy5mZWF0dXJlLmV2dCksdGhpcy5oYW5kbGVycy5kcmFnLnN0b3BEb3duPQohMSl9LGNsaWNrb3V0RmVhdHVyZTpmdW5jdGlvbihhKXt0aGlzLmhhbmRsZXJzLmZlYXR1cmUudG91Y2gmJnRoaXMub3ZlciYmKHRoaXMub3V0RmVhdHVyZShhKSx0aGlzLmhhbmRsZXJzLmRyYWcuc3RvcERvd249ITApfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5sYXllcj1udWxsO09wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuZGVzdHJveS5hcHBseSh0aGlzLFtdKX0sYWN0aXZhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oYW5kbGVycy5mZWF0dXJlLmFjdGl2YXRlKCkmJk9wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuYWN0aXZhdGUuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxkZWFjdGl2YXRlOmZ1bmN0aW9uKCl7dGhpcy5oYW5kbGVycy5kcmFnLmRlYWN0aXZhdGUoKTt0aGlzLmhhbmRsZXJzLmZlYXR1cmUuZGVhY3RpdmF0ZSgpO3RoaXMuZmVhdHVyZT1udWxsO3RoaXMuZHJhZ2dpbmc9ITE7dGhpcy5sYXN0UGl4ZWw9bnVsbDtPcGVuTGF5ZXJzLkVsZW1lbnQucmVtb3ZlQ2xhc3ModGhpcy5tYXAudmlld1BvcnREaXYsCnRoaXMuZGlzcGxheUNsYXNzKyJPdmVyIik7cmV0dXJuIE9wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuZGVhY3RpdmF0ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LG92ZXJGZWF0dXJlOmZ1bmN0aW9uKGEpe3ZhciBiPSExO3RoaXMuaGFuZGxlcnMuZHJhZy5kcmFnZ2luZz90aGlzLm92ZXI9dGhpcy5mZWF0dXJlLmlkPT1hLmlkPyEwOiExOih0aGlzLmZlYXR1cmU9YSx0aGlzLmhhbmRsZXJzLmRyYWcuYWN0aXZhdGUoKSx0aGlzLm92ZXI9Yj0hMCxPcGVuTGF5ZXJzLkVsZW1lbnQuYWRkQ2xhc3ModGhpcy5tYXAudmlld1BvcnREaXYsdGhpcy5kaXNwbGF5Q2xhc3MrIk92ZXIiKSx0aGlzLm9uRW50ZXIoYSkpO3JldHVybiBifSxkb3duRmVhdHVyZTpmdW5jdGlvbihhKXt0aGlzLmxhc3RQaXhlbD1hO3RoaXMub25TdGFydCh0aGlzLmZlYXR1cmUsYSl9LG1vdmVGZWF0dXJlOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMubWFwLmdldFJlc29sdXRpb24oKTt0aGlzLmZlYXR1cmUuZ2VvbWV0cnkubW92ZShiKgooYS54LXRoaXMubGFzdFBpeGVsLngpLGIqKHRoaXMubGFzdFBpeGVsLnktYS55KSk7dGhpcy5sYXllci5kcmF3RmVhdHVyZSh0aGlzLmZlYXR1cmUpO3RoaXMubGFzdFBpeGVsPWE7dGhpcy5vbkRyYWcodGhpcy5mZWF0dXJlLGEpfSx1cEZlYXR1cmU6ZnVuY3Rpb24oYSl7dGhpcy5vdmVyfHx0aGlzLmhhbmRsZXJzLmRyYWcuZGVhY3RpdmF0ZSgpfSxkb25lRHJhZ2dpbmc6ZnVuY3Rpb24oYSl7dGhpcy5vbkNvbXBsZXRlKHRoaXMuZmVhdHVyZSxhKX0sb3V0RmVhdHVyZTpmdW5jdGlvbihhKXt0aGlzLmhhbmRsZXJzLmRyYWcuZHJhZ2dpbmc/dGhpcy5mZWF0dXJlLmlkPT1hLmlkJiYodGhpcy5vdmVyPSExKToodGhpcy5vdmVyPSExLHRoaXMuaGFuZGxlcnMuZHJhZy5kZWFjdGl2YXRlKCksT3BlbkxheWVycy5FbGVtZW50LnJlbW92ZUNsYXNzKHRoaXMubWFwLnZpZXdQb3J0RGl2LHRoaXMuZGlzcGxheUNsYXNzKyJPdmVyIiksdGhpcy5vbkxlYXZlKGEpLHRoaXMuZmVhdHVyZT1udWxsKX0sCmNhbmNlbDpmdW5jdGlvbigpe3RoaXMuaGFuZGxlcnMuZHJhZy5kZWFjdGl2YXRlKCk7dGhpcy5vdmVyPSExfSxzZXRNYXA6ZnVuY3Rpb24oYSl7dGhpcy5oYW5kbGVycy5kcmFnLnNldE1hcChhKTt0aGlzLmhhbmRsZXJzLmZlYXR1cmUuc2V0TWFwKGEpO09wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuc2V0TWFwLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Db250cm9sLkRyYWdGZWF0dXJlIn0pO09wZW5MYXllcnMuQ29udHJvbC5UcmFuc2Zvcm1GZWF0dXJlPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Db250cm9sLHtnZW9tZXRyeVR5cGVzOm51bGwsbGF5ZXI6bnVsbCxwcmVzZXJ2ZUFzcGVjdFJhdGlvOiExLHJvdGF0ZTohMCxmZWF0dXJlOm51bGwscmVuZGVySW50ZW50OiJ0ZW1wb3JhcnkiLHJvdGF0aW9uSGFuZGxlU3ltYm9saXplcjpudWxsLGJveDpudWxsLGNlbnRlcjpudWxsLHNjYWxlOjEscmF0aW86MSxyb3RhdGlvbjowLGhhbmRsZXM6bnVsbCxyb3RhdGlvbkhhbmRsZXM6bnVsbCxkcmFnQ29udHJvbDpudWxsLGlycmVndWxhcjohMSxpbml0aWFsaXplOmZ1bmN0aW9uKGEsYil7T3BlbkxheWVycy5Db250cm9sLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsW2JdKTt0aGlzLmxheWVyPWE7dGhpcy5yb3RhdGlvbkhhbmRsZVN5bWJvbGl6ZXJ8fCh0aGlzLnJvdGF0aW9uSGFuZGxlU3ltYm9saXplcj17c3Ryb2tlOiExLHBvaW50UmFkaXVzOjEwLGZpbGxPcGFjaXR5OjAsCmN1cnNvcjoicG9pbnRlciJ9KTt0aGlzLmNyZWF0ZUJveCgpO3RoaXMuY3JlYXRlQ29udHJvbCgpfSxhY3RpdmF0ZTpmdW5jdGlvbigpe3ZhciBhPSExO09wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuYWN0aXZhdGUuYXBwbHkodGhpcyxhcmd1bWVudHMpJiYodGhpcy5kcmFnQ29udHJvbC5hY3RpdmF0ZSgpLHRoaXMubGF5ZXIuYWRkRmVhdHVyZXMoW3RoaXMuYm94XSksdGhpcy5yb3RhdGUmJnRoaXMubGF5ZXIuYWRkRmVhdHVyZXModGhpcy5yb3RhdGlvbkhhbmRsZXMpLHRoaXMubGF5ZXIuYWRkRmVhdHVyZXModGhpcy5oYW5kbGVzKSxhPSEwKTtyZXR1cm4gYX0sZGVhY3RpdmF0ZTpmdW5jdGlvbigpe3ZhciBhPSExO09wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuZGVhY3RpdmF0ZS5hcHBseSh0aGlzLGFyZ3VtZW50cykmJih0aGlzLmxheWVyLnJlbW92ZUZlYXR1cmVzKHRoaXMuaGFuZGxlcyksdGhpcy5yb3RhdGUmJnRoaXMubGF5ZXIucmVtb3ZlRmVhdHVyZXModGhpcy5yb3RhdGlvbkhhbmRsZXMpLAp0aGlzLmxheWVyLnJlbW92ZUZlYXR1cmVzKFt0aGlzLmJveF0pLHRoaXMuZHJhZ0NvbnRyb2wuZGVhY3RpdmF0ZSgpLGE9ITApO3JldHVybiBhfSxzZXRNYXA6ZnVuY3Rpb24oYSl7dGhpcy5kcmFnQ29udHJvbC5zZXRNYXAoYSk7T3BlbkxheWVycy5Db250cm9sLnByb3RvdHlwZS5zZXRNYXAuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxzZXRGZWF0dXJlOmZ1bmN0aW9uKGEsYil7Yj1PcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyhiLHtyb3RhdGlvbjowLHNjYWxlOjEscmF0aW86MX0pO3ZhciBjPXRoaXMucm90YXRpb24sZD10aGlzLmNlbnRlcjtPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHRoaXMsYik7aWYoITEhPT10aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoImJlZm9yZXNldGZlYXR1cmUiLHtmZWF0dXJlOmF9KSl7dGhpcy5mZWF0dXJlPWE7dGhpcy5hY3RpdmF0ZSgpO3RoaXMuX3NldGZlYXR1cmU9ITA7dmFyIGU9dGhpcy5mZWF0dXJlLmdlb21ldHJ5LmdldEJvdW5kcygpO3RoaXMuYm94Lm1vdmUoZS5nZXRDZW50ZXJMb25MYXQoKSk7CnRoaXMuYm94Lmdlb21ldHJ5LnJvdGF0ZSgtYyxkKTt0aGlzLl9hbmdsZT0wO3RoaXMucm90YXRpb24/KGM9YS5nZW9tZXRyeS5jbG9uZSgpLGMucm90YXRlKC10aGlzLnJvdGF0aW9uLHRoaXMuY2VudGVyKSxjPW5ldyBPcGVuTGF5ZXJzLkZlYXR1cmUuVmVjdG9yKGMuZ2V0Qm91bmRzKCkudG9HZW9tZXRyeSgpKSxjLmdlb21ldHJ5LnJvdGF0ZSh0aGlzLnJvdGF0aW9uLHRoaXMuY2VudGVyKSx0aGlzLmJveC5nZW9tZXRyeS5yb3RhdGUodGhpcy5yb3RhdGlvbix0aGlzLmNlbnRlciksdGhpcy5ib3gubW92ZShjLmdlb21ldHJ5LmdldEJvdW5kcygpLmdldENlbnRlckxvbkxhdCgpKSxjPWMuZ2VvbWV0cnkuY29tcG9uZW50c1swXS5jb21wb25lbnRzWzBdLmdldEJvdW5kcygpLmdldENlbnRlckxvbkxhdCgpKTpjPW5ldyBPcGVuTGF5ZXJzLkxvbkxhdChlLmxlZnQsZS5ib3R0b20pO3RoaXMuaGFuZGxlc1swXS5tb3ZlKGMpO2RlbGV0ZSB0aGlzLl9zZXRmZWF0dXJlO3RoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgic2V0ZmVhdHVyZSIsCntmZWF0dXJlOmF9KX19LHVuc2V0RmVhdHVyZTpmdW5jdGlvbigpe3RoaXMuYWN0aXZlP3RoaXMuZGVhY3RpdmF0ZSgpOih0aGlzLmZlYXR1cmU9bnVsbCx0aGlzLnJvdGF0aW9uPTAsdGhpcy5yYXRpbz10aGlzLnNjYWxlPTEpfSxjcmVhdGVCb3g6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO3RoaXMuY2VudGVyPW5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KDAsMCk7dGhpcy5ib3g9bmV3IE9wZW5MYXllcnMuRmVhdHVyZS5WZWN0b3IobmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuTGluZVN0cmluZyhbbmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoLTEsLTEpLG5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KDAsLTEpLG5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KDEsLTEpLG5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KDEsMCksbmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoMSwxKSxuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludCgwLDEpLG5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KC0xLAoxKSxuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludCgtMSwwKSxuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludCgtMSwtMSldKSxudWxsLCJzdHJpbmciPT10eXBlb2YgdGhpcy5yZW5kZXJJbnRlbnQ/bnVsbDp0aGlzLnJlbmRlckludGVudCk7dGhpcy5ib3guZ2VvbWV0cnkubW92ZT1mdW5jdGlvbihiLGMpe2EuX21vdmluZz0hMDtPcGVuTGF5ZXJzLkdlb21ldHJ5LkxpbmVTdHJpbmcucHJvdG90eXBlLm1vdmUuYXBwbHkodGhpcyxhcmd1bWVudHMpO2EuY2VudGVyLm1vdmUoYixjKTtkZWxldGUgYS5fbW92aW5nfTtmb3IodmFyIGI9ZnVuY3Rpb24oYSxiKXtPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50LnByb3RvdHlwZS5tb3ZlLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLl9yb3RhdGlvbkhhbmRsZSYmdGhpcy5fcm90YXRpb25IYW5kbGUuZ2VvbWV0cnkubW92ZShhLGIpO3RoaXMuX2hhbmRsZS5nZW9tZXRyeS5tb3ZlKGEsYil9LGM9ZnVuY3Rpb24oYSxiLGMpe09wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQucHJvdG90eXBlLnJlc2l6ZS5hcHBseSh0aGlzLAphcmd1bWVudHMpO3RoaXMuX3JvdGF0aW9uSGFuZGxlJiZ0aGlzLl9yb3RhdGlvbkhhbmRsZS5nZW9tZXRyeS5yZXNpemUoYSxiLGMpO3RoaXMuX2hhbmRsZS5nZW9tZXRyeS5yZXNpemUoYSxiLGMpfSxkPWZ1bmN0aW9uKGEsYil7T3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludC5wcm90b3R5cGUucm90YXRlLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLl9yb3RhdGlvbkhhbmRsZSYmdGhpcy5fcm90YXRpb25IYW5kbGUuZ2VvbWV0cnkucm90YXRlKGEsYik7dGhpcy5faGFuZGxlLmdlb21ldHJ5LnJvdGF0ZShhLGIpfSxlPWZ1bmN0aW9uKGIsYyl7dmFyIGQ9dGhpcy54LGU9dGhpcy55O09wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQucHJvdG90eXBlLm1vdmUuY2FsbCh0aGlzLGIsYyk7aWYoIWEuX21vdmluZyl7dmFyIGY9YS5kcmFnQ29udHJvbC5oYW5kbGVycy5kcmFnLmV2dCxnPSEoIWEuX3NldGZlYXR1cmUmJmEucHJlc2VydmVBc3BlY3RSYXRpbykmJiEoZiYmZi5zaGlmdEtleSksCmg9bmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoZCxlKSxmPWEuY2VudGVyO3RoaXMucm90YXRlKC1hLnJvdGF0aW9uLGYpO2gucm90YXRlKC1hLnJvdGF0aW9uLGYpO3ZhciBrPXRoaXMueC1mLngsbD10aGlzLnktZi55LG09ay0odGhpcy54LWgueCksbj1sLSh0aGlzLnktaC55KTthLmlycmVndWxhciYmIWEuX3NldGZlYXR1cmUmJihrLT0odGhpcy54LWgueCkvMixsLT0odGhpcy55LWgueSkvMik7dGhpcy54PWQ7dGhpcy55PWU7aD0xO2c/KGw9MUUtNT5NYXRoLmFicyhuKT8xOmwvbixoPSgxRS01Pk1hdGguYWJzKG0pPzE6ay9tKS9sKToobT1NYXRoLnNxcnQobSptK24qbiksbD1NYXRoLnNxcnQoayprK2wqbCkvbSk7YS5fbW92aW5nPSEwO2EuYm94Lmdlb21ldHJ5LnJvdGF0ZSgtYS5yb3RhdGlvbixmKTtkZWxldGUgYS5fbW92aW5nO2EuYm94Lmdlb21ldHJ5LnJlc2l6ZShsLGYsaCk7YS5ib3guZ2VvbWV0cnkucm90YXRlKGEucm90YXRpb24sZik7YS50cmFuc2Zvcm1GZWF0dXJlKHtzY2FsZTpsLApyYXRpbzpofSk7YS5pcnJlZ3VsYXImJiFhLl9zZXRmZWF0dXJlJiYoaz1mLmNsb25lKCksay54Kz0xRS01Pk1hdGguYWJzKGQtZi54KT8wOnRoaXMueC1kLGsueSs9MUUtNT5NYXRoLmFicyhlLWYueSk/MDp0aGlzLnktZSxhLmJveC5nZW9tZXRyeS5tb3ZlKHRoaXMueC1kLHRoaXMueS1lKSxhLnRyYW5zZm9ybUZlYXR1cmUoe2NlbnRlcjprfSkpfX0sZj1mdW5jdGlvbihiLGMpe3ZhciBkPXRoaXMueCxlPXRoaXMueTtPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50LnByb3RvdHlwZS5tb3ZlLmNhbGwodGhpcyxiLGMpO2lmKCFhLl9tb3Zpbmcpe3ZhciBmPWEuZHJhZ0NvbnRyb2wuaGFuZGxlcnMuZHJhZy5ldnQsZj1mJiZmLnNoaWZ0S2V5PzQ1OjEsZz1hLmNlbnRlcixoPXRoaXMueC1nLngsaz10aGlzLnktZy55O3RoaXMueD1kO3RoaXMueT1lO2Q9TWF0aC5hdGFuMihrLWMsaC1iKTtkPU1hdGguYXRhbjIoayxoKS1kO2QqPTE4MC9NYXRoLlBJO2EuX2FuZ2xlPShhLl9hbmdsZStkKSUKMzYwO2Q9YS5yb3RhdGlvbiVmO2lmKE1hdGguYWJzKGEuX2FuZ2xlKT49Znx8MCE9PWQpZD1NYXRoLnJvdW5kKGEuX2FuZ2xlL2YpKmYtZCxhLl9hbmdsZT0wLGEuYm94Lmdlb21ldHJ5LnJvdGF0ZShkLGcpLGEudHJhbnNmb3JtRmVhdHVyZSh7cm90YXRpb246ZH0pfX0sZz1BcnJheSg4KSxoPUFycmF5KDQpLGssbCxtLG49InN3IHMgc2UgZSBuZSBuIG53IHciLnNwbGl0KCIgIikscD0wOzg+cDsrK3Apaz10aGlzLmJveC5nZW9tZXRyeS5jb21wb25lbnRzW3BdLGw9bmV3IE9wZW5MYXllcnMuRmVhdHVyZS5WZWN0b3Ioay5jbG9uZSgpLHtyb2xlOm5bcF0rIi1yZXNpemUifSwic3RyaW5nIj09dHlwZW9mIHRoaXMucmVuZGVySW50ZW50P251bGw6dGhpcy5yZW5kZXJJbnRlbnQpLDA9PXAlMiYmKG09bmV3IE9wZW5MYXllcnMuRmVhdHVyZS5WZWN0b3Ioay5jbG9uZSgpLHtyb2xlOm5bcF0rIi1yb3RhdGUifSwic3RyaW5nIj09dHlwZW9mIHRoaXMucm90YXRpb25IYW5kbGVTeW1ib2xpemVyPwpudWxsOnRoaXMucm90YXRpb25IYW5kbGVTeW1ib2xpemVyKSxtLmdlb21ldHJ5Lm1vdmU9ZixrLl9yb3RhdGlvbkhhbmRsZT1tLGhbcC8yXT1tKSxrLm1vdmU9YixrLnJlc2l6ZT1jLGsucm90YXRlPWQsbC5nZW9tZXRyeS5tb3ZlPWUsay5faGFuZGxlPWwsZ1twXT1sO3RoaXMucm90YXRpb25IYW5kbGVzPWg7dGhpcy5oYW5kbGVzPWd9LGNyZWF0ZUNvbnRyb2w6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO3RoaXMuZHJhZ0NvbnRyb2w9bmV3IE9wZW5MYXllcnMuQ29udHJvbC5EcmFnRmVhdHVyZSh0aGlzLmxheWVyLHtkb2N1bWVudERyYWc6ITAsbW92ZUZlYXR1cmU6ZnVuY3Rpb24oYil7dGhpcy5mZWF0dXJlPT09YS5mZWF0dXJlJiYodGhpcy5mZWF0dXJlPWEuYm94KTtPcGVuTGF5ZXJzLkNvbnRyb2wuRHJhZ0ZlYXR1cmUucHJvdG90eXBlLm1vdmVGZWF0dXJlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sb25EcmFnOmZ1bmN0aW9uKGIsYyl7Yj09PWEuYm94JiZhLnRyYW5zZm9ybUZlYXR1cmUoe2NlbnRlcjphLmNlbnRlcn0pfSwKb25TdGFydDpmdW5jdGlvbihiLGMpe3ZhciBkPSFhLmdlb21ldHJ5VHlwZXN8fC0xIT09T3BlbkxheWVycy5VdGlsLmluZGV4T2YoYS5nZW9tZXRyeVR5cGVzLGIuZ2VvbWV0cnkuQ0xBU1NfTkFNRSksZT1PcGVuTGF5ZXJzLlV0aWwuaW5kZXhPZihhLmhhbmRsZXMsYiksZT1lK09wZW5MYXllcnMuVXRpbC5pbmRleE9mKGEucm90YXRpb25IYW5kbGVzLGIpO2IhPT1hLmZlYXR1cmUmJihiIT09YS5ib3gmJi0yPT1lJiZkKSYmYS5zZXRGZWF0dXJlKGIpfSxvbkNvbXBsZXRlOmZ1bmN0aW9uKGIsYyl7YS5ldmVudHMudHJpZ2dlckV2ZW50KCJ0cmFuc2Zvcm1jb21wbGV0ZSIse2ZlYXR1cmU6YS5mZWF0dXJlfSl9fSl9LGRyYXdIYW5kbGVzOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPXRoaXMubGF5ZXIsYj0wOzg+YjsrK2IpdGhpcy5yb3RhdGUmJjA9PT1iJTImJmEuZHJhd0ZlYXR1cmUodGhpcy5yb3RhdGlvbkhhbmRsZXNbYi8yXSx0aGlzLnJvdGF0aW9uSGFuZGxlU3ltYm9saXplciksYS5kcmF3RmVhdHVyZSh0aGlzLmhhbmRsZXNbYl0sCnRoaXMucmVuZGVySW50ZW50KX0sdHJhbnNmb3JtRmVhdHVyZTpmdW5jdGlvbihhKXtpZighdGhpcy5fc2V0ZmVhdHVyZSl7dGhpcy5zY2FsZSo9YS5zY2FsZXx8MTt0aGlzLnJhdGlvKj1hLnJhdGlvfHwxO3ZhciBiPXRoaXMucm90YXRpb247dGhpcy5yb3RhdGlvbj0odGhpcy5yb3RhdGlvbisoYS5yb3RhdGlvbnx8MCkpJTM2MDtpZighMSE9PXRoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgiYmVmb3JldHJhbnNmb3JtIixhKSl7dmFyIGM9dGhpcy5mZWF0dXJlLGQ9Yy5nZW9tZXRyeSxlPXRoaXMuY2VudGVyO2Qucm90YXRlKC1iLGUpO2Euc2NhbGV8fGEucmF0aW8/ZC5yZXNpemUoYS5zY2FsZSxlLGEucmF0aW8pOmEuY2VudGVyJiZjLm1vdmUoYS5jZW50ZXIuZ2V0Qm91bmRzKCkuZ2V0Q2VudGVyTG9uTGF0KCkpO2Qucm90YXRlKHRoaXMucm90YXRpb24sZSk7dGhpcy5sYXllci5kcmF3RmVhdHVyZShjKTtjLnRvU3RhdGUoT3BlbkxheWVycy5TdGF0ZS5VUERBVEUpO3RoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgidHJhbnNmb3JtIiwKYSl9fXRoaXMubGF5ZXIuZHJhd0ZlYXR1cmUodGhpcy5ib3gsdGhpcy5yZW5kZXJJbnRlbnQpO3RoaXMuZHJhd0hhbmRsZXMoKX0sZGVzdHJveTpmdW5jdGlvbigpe2Zvcih2YXIgYSxiPTA7OD5iOysrYilhPXRoaXMuYm94Lmdlb21ldHJ5LmNvbXBvbmVudHNbYl0sYS5faGFuZGxlLmRlc3Ryb3koKSxhLl9oYW5kbGU9bnVsbCxhLl9yb3RhdGlvbkhhbmRsZSYmYS5fcm90YXRpb25IYW5kbGUuZGVzdHJveSgpLGEuX3JvdGF0aW9uSGFuZGxlPW51bGw7dGhpcy5yb3RhdGlvbkhhbmRsZXM9dGhpcy5yb3RhdGlvbkhhbmRsZVN5bWJvbGl6ZXI9dGhpcy5oYW5kbGVzPXRoaXMuZmVhdHVyZT10aGlzLmNlbnRlcj1udWxsO3RoaXMuYm94LmRlc3Ryb3koKTt0aGlzLmxheWVyPXRoaXMuYm94PW51bGw7dGhpcy5kcmFnQ29udHJvbC5kZXN0cm95KCk7dGhpcy5kcmFnQ29udHJvbD1udWxsO09wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuZGVzdHJveS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LApDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkNvbnRyb2wuVHJhbnNmb3JtRmVhdHVyZSJ9KTtPcGVuTGF5ZXJzLkhhbmRsZXIuQm94PU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5IYW5kbGVyLHtkcmFnSGFuZGxlcjpudWxsLGJveERpdkNsYXNzTmFtZToib2xIYW5kbGVyQm94Wm9vbUJveCIsYm94T2Zmc2V0czpudWxsLGluaXRpYWxpemU6ZnVuY3Rpb24oYSxiLGMpe09wZW5MYXllcnMuSGFuZGxlci5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5kcmFnSGFuZGxlcj1uZXcgT3BlbkxheWVycy5IYW5kbGVyLkRyYWcodGhpcyx7ZG93bjp0aGlzLnN0YXJ0Qm94LG1vdmU6dGhpcy5tb3ZlQm94LG91dDp0aGlzLnJlbW92ZUJveCx1cDp0aGlzLmVuZEJveH0se2tleU1hc2s6dGhpcy5rZXlNYXNrfSl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXtPcGVuTGF5ZXJzLkhhbmRsZXIucHJvdG90eXBlLmRlc3Ryb3kuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMuZHJhZ0hhbmRsZXImJih0aGlzLmRyYWdIYW5kbGVyLmRlc3Ryb3koKSx0aGlzLmRyYWdIYW5kbGVyPQpudWxsKX0sc2V0TWFwOmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuSGFuZGxlci5wcm90b3R5cGUuc2V0TWFwLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLmRyYWdIYW5kbGVyJiZ0aGlzLmRyYWdIYW5kbGVyLnNldE1hcChhKX0sc3RhcnRCb3g6ZnVuY3Rpb24oYSl7dGhpcy5jYWxsYmFjaygic3RhcnQiLFtdKTt0aGlzLnpvb21Cb3g9T3BlbkxheWVycy5VdGlsLmNyZWF0ZURpdigiem9vbUJveCIse3g6LTk5OTkseTotOTk5OX0pO3RoaXMuem9vbUJveC5jbGFzc05hbWU9dGhpcy5ib3hEaXZDbGFzc05hbWU7dGhpcy56b29tQm94LnN0eWxlLnpJbmRleD10aGlzLm1hcC5aX0lOREVYX0JBU0UuUG9wdXAtMTt0aGlzLm1hcC52aWV3UG9ydERpdi5hcHBlbmRDaGlsZCh0aGlzLnpvb21Cb3gpO09wZW5MYXllcnMuRWxlbWVudC5hZGRDbGFzcyh0aGlzLm1hcC52aWV3UG9ydERpdiwib2xEcmF3Qm94Iil9LG1vdmVCb3g6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5kcmFnSGFuZGxlci5zdGFydC54LApjPXRoaXMuZHJhZ0hhbmRsZXIuc3RhcnQueSxkPU1hdGguYWJzKGItYS54KSxlPU1hdGguYWJzKGMtYS55KSxmPXRoaXMuZ2V0Qm94T2Zmc2V0cygpO3RoaXMuem9vbUJveC5zdHlsZS53aWR0aD1kK2Yud2lkdGgrMSsicHgiO3RoaXMuem9vbUJveC5zdHlsZS5oZWlnaHQ9ZStmLmhlaWdodCsxKyJweCI7dGhpcy56b29tQm94LnN0eWxlLmxlZnQ9KGEueDxiP2ItZC1mLmxlZnQ6Yi1mLmxlZnQpKyJweCI7dGhpcy56b29tQm94LnN0eWxlLnRvcD0oYS55PGM/Yy1lLWYudG9wOmMtZi50b3ApKyJweCJ9LGVuZEJveDpmdW5jdGlvbihhKXt2YXIgYjtpZig1PE1hdGguYWJzKHRoaXMuZHJhZ0hhbmRsZXIuc3RhcnQueC1hLngpfHw1PE1hdGguYWJzKHRoaXMuZHJhZ0hhbmRsZXIuc3RhcnQueS1hLnkpKXt2YXIgYz10aGlzLmRyYWdIYW5kbGVyLnN0YXJ0O2I9TWF0aC5taW4oYy55LGEueSk7dmFyIGQ9TWF0aC5tYXgoYy55LGEueSksZT1NYXRoLm1pbihjLngsYS54KTthPU1hdGgubWF4KGMueCwKYS54KTtiPW5ldyBPcGVuTGF5ZXJzLkJvdW5kcyhlLGQsYSxiKX1lbHNlIGI9dGhpcy5kcmFnSGFuZGxlci5zdGFydC5jbG9uZSgpO3RoaXMucmVtb3ZlQm94KCk7dGhpcy5jYWxsYmFjaygiZG9uZSIsW2JdKX0scmVtb3ZlQm94OmZ1bmN0aW9uKCl7dGhpcy5tYXAudmlld1BvcnREaXYucmVtb3ZlQ2hpbGQodGhpcy56b29tQm94KTt0aGlzLmJveE9mZnNldHM9dGhpcy56b29tQm94PW51bGw7T3BlbkxheWVycy5FbGVtZW50LnJlbW92ZUNsYXNzKHRoaXMubWFwLnZpZXdQb3J0RGl2LCJvbERyYXdCb3giKX0sYWN0aXZhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gT3BlbkxheWVycy5IYW5kbGVyLnByb3RvdHlwZS5hY3RpdmF0ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk/KHRoaXMuZHJhZ0hhbmRsZXIuYWN0aXZhdGUoKSwhMCk6ITF9LGRlYWN0aXZhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gT3BlbkxheWVycy5IYW5kbGVyLnByb3RvdHlwZS5kZWFjdGl2YXRlLmFwcGx5KHRoaXMsYXJndW1lbnRzKT8KKHRoaXMuZHJhZ0hhbmRsZXIuZGVhY3RpdmF0ZSgpJiZ0aGlzLnpvb21Cb3gmJnRoaXMucmVtb3ZlQm94KCksITApOiExfSxnZXRCb3hPZmZzZXRzOmZ1bmN0aW9uKCl7aWYoIXRoaXMuYm94T2Zmc2V0cyl7dmFyIGE9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7YS5zdHlsZS5wb3NpdGlvbj0iYWJzb2x1dGUiO2Euc3R5bGUuYm9yZGVyPSIxcHggc29saWQgYmxhY2siO2Euc3R5bGUud2lkdGg9IjNweCI7ZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChhKTt2YXIgYj0zPT1hLmNsaWVudFdpZHRoO2RvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoYSk7dmFyIGE9cGFyc2VJbnQoT3BlbkxheWVycy5FbGVtZW50LmdldFN0eWxlKHRoaXMuem9vbUJveCwiYm9yZGVyLWxlZnQtd2lkdGgiKSksYz1wYXJzZUludChPcGVuTGF5ZXJzLkVsZW1lbnQuZ2V0U3R5bGUodGhpcy56b29tQm94LCJib3JkZXItcmlnaHQtd2lkdGgiKSksZD1wYXJzZUludChPcGVuTGF5ZXJzLkVsZW1lbnQuZ2V0U3R5bGUodGhpcy56b29tQm94LAoiYm9yZGVyLXRvcC13aWR0aCIpKSxlPXBhcnNlSW50KE9wZW5MYXllcnMuRWxlbWVudC5nZXRTdHlsZSh0aGlzLnpvb21Cb3gsImJvcmRlci1ib3R0b20td2lkdGgiKSk7dGhpcy5ib3hPZmZzZXRzPXtsZWZ0OmEscmlnaHQ6Yyx0b3A6ZCxib3R0b206ZSx3aWR0aDohMT09PWI/YStjOjAsaGVpZ2h0OiExPT09Yj9kK2U6MH19cmV0dXJuIHRoaXMuYm94T2Zmc2V0c30sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5IYW5kbGVyLkJveCJ9KTtPcGVuTGF5ZXJzLkNvbnRyb2wuWm9vbUJveD1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuQ29udHJvbCx7dHlwZTpPcGVuTGF5ZXJzLkNvbnRyb2wuVFlQRV9UT09MLG91dDohMSxrZXlNYXNrOm51bGwsYWx3YXlzWm9vbTohMSx6b29tT25DbGljazohMCxkcmF3OmZ1bmN0aW9uKCl7dGhpcy5oYW5kbGVyPW5ldyBPcGVuTGF5ZXJzLkhhbmRsZXIuQm94KHRoaXMse2RvbmU6dGhpcy56b29tQm94fSx7a2V5TWFzazp0aGlzLmtleU1hc2t9KX0sem9vbUJveDpmdW5jdGlvbihhKXtpZihhIGluc3RhbmNlb2YgT3BlbkxheWVycy5Cb3VuZHMpe3ZhciBiLGM9YS5nZXRDZW50ZXJQaXhlbCgpO2lmKHRoaXMub3V0KXtiPU1hdGgubWluKHRoaXMubWFwLnNpemUuaC8oYS5ib3R0b20tYS50b3ApLHRoaXMubWFwLnNpemUudy8oYS5yaWdodC1hLmxlZnQpKTt2YXIgZD10aGlzLm1hcC5nZXRFeHRlbnQoKSxlPXRoaXMubWFwLmdldExvbkxhdEZyb21QaXhlbChjKSxmPWUubG9uLWQuZ2V0V2lkdGgoKS8KMipiO2E9ZS5sb24rZC5nZXRXaWR0aCgpLzIqYjt2YXIgZz1lLmxhdC1kLmdldEhlaWdodCgpLzIqYjtiPWUubGF0K2QuZ2V0SGVpZ2h0KCkvMipiO2I9bmV3IE9wZW5MYXllcnMuQm91bmRzKGYsZyxhLGIpfWVsc2UgZj10aGlzLm1hcC5nZXRMb25MYXRGcm9tUGl4ZWwoe3g6YS5sZWZ0LHk6YS5ib3R0b219KSxhPXRoaXMubWFwLmdldExvbkxhdEZyb21QaXhlbCh7eDphLnJpZ2h0LHk6YS50b3B9KSxiPW5ldyBPcGVuTGF5ZXJzLkJvdW5kcyhmLmxvbixmLmxhdCxhLmxvbixhLmxhdCk7Zj10aGlzLm1hcC5nZXRab29tKCk7Zz10aGlzLm1hcC5nZXRTaXplKCk7YT1nLncvMjtnPWcuaC8yO2I9dGhpcy5tYXAuZ2V0Wm9vbUZvckV4dGVudChiKTtkPXRoaXMubWFwLmdldFJlc29sdXRpb24oKTtlPXRoaXMubWFwLmdldFJlc29sdXRpb25Gb3Jab29tKGIpO2Q9PWU/dGhpcy5tYXAuc2V0Q2VudGVyKHRoaXMubWFwLmdldExvbkxhdEZyb21QaXhlbChjKSk6dGhpcy5tYXAuem9vbVRvKGIsCnt4OihkKmMueC1lKmEpLyhkLWUpLHk6KGQqYy55LWUqZykvKGQtZSl9KTtmPT10aGlzLm1hcC5nZXRab29tKCkmJiEwPT10aGlzLmFsd2F5c1pvb20mJnRoaXMubWFwLnpvb21UbyhmKyh0aGlzLm91dD8tMToxKSl9ZWxzZSB0aGlzLnpvb21PbkNsaWNrJiYodGhpcy5vdXQ/dGhpcy5tYXAuem9vbVRvKHRoaXMubWFwLmdldFpvb20oKS0xLGEpOnRoaXMubWFwLnpvb21Ubyh0aGlzLm1hcC5nZXRab29tKCkrMSxhKSl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuQ29udHJvbC5ab29tQm94In0pO09wZW5MYXllcnMuQ29udHJvbC5EcmFnUGFuPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Db250cm9sLHt0eXBlOk9wZW5MYXllcnMuQ29udHJvbC5UWVBFX1RPT0wscGFubmVkOiExLGludGVydmFsOjAsZG9jdW1lbnREcmFnOiExLGtpbmV0aWM6bnVsbCxlbmFibGVLaW5ldGljOiEwLGtpbmV0aWNJbnRlcnZhbDoxMCxkcmF3OmZ1bmN0aW9uKCl7aWYodGhpcy5lbmFibGVLaW5ldGljJiZPcGVuTGF5ZXJzLktpbmV0aWMpe3ZhciBhPXtpbnRlcnZhbDp0aGlzLmtpbmV0aWNJbnRlcnZhbH07Im9iamVjdCI9PT10eXBlb2YgdGhpcy5lbmFibGVLaW5ldGljJiYoYT1PcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKGEsdGhpcy5lbmFibGVLaW5ldGljKSk7dGhpcy5raW5ldGljPW5ldyBPcGVuTGF5ZXJzLktpbmV0aWMoYSl9dGhpcy5oYW5kbGVyPW5ldyBPcGVuTGF5ZXJzLkhhbmRsZXIuRHJhZyh0aGlzLHttb3ZlOnRoaXMucGFuTWFwLGRvbmU6dGhpcy5wYW5NYXBEb25lLGRvd246dGhpcy5wYW5NYXBTdGFydH0sCntpbnRlcnZhbDp0aGlzLmludGVydmFsLGRvY3VtZW50RHJhZzp0aGlzLmRvY3VtZW50RHJhZ30pfSxwYW5NYXBTdGFydDpmdW5jdGlvbigpe3RoaXMua2luZXRpYyYmdGhpcy5raW5ldGljLmJlZ2luKCl9LHBhbk1hcDpmdW5jdGlvbihhKXt0aGlzLmtpbmV0aWMmJnRoaXMua2luZXRpYy51cGRhdGUoYSk7dGhpcy5wYW5uZWQ9ITA7dGhpcy5tYXAucGFuKHRoaXMuaGFuZGxlci5sYXN0LngtYS54LHRoaXMuaGFuZGxlci5sYXN0LnktYS55LHtkcmFnZ2luZzohMCxhbmltYXRlOiExfSl9LHBhbk1hcERvbmU6ZnVuY3Rpb24oYSl7aWYodGhpcy5wYW5uZWQpe3ZhciBiPW51bGw7dGhpcy5raW5ldGljJiYoYj10aGlzLmtpbmV0aWMuZW5kKGEpKTt0aGlzLm1hcC5wYW4odGhpcy5oYW5kbGVyLmxhc3QueC1hLngsdGhpcy5oYW5kbGVyLmxhc3QueS1hLnkse2RyYWdnaW5nOiEhYixhbmltYXRlOiExfSk7aWYoYil7dmFyIGM9dGhpczt0aGlzLmtpbmV0aWMubW92ZShiLGZ1bmN0aW9uKGEsYiwKZil7Yy5tYXAucGFuKGEsYix7ZHJhZ2dpbmc6IWYsYW5pbWF0ZTohMX0pfSl9dGhpcy5wYW5uZWQ9ITF9fSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkNvbnRyb2wuRHJhZ1BhbiJ9KTtPcGVuTGF5ZXJzLkNvbnRyb2wuTmF2aWdhdGlvbj1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuQ29udHJvbCx7ZHJhZ1BhbjpudWxsLGRyYWdQYW5PcHRpb25zOm51bGwscGluY2hab29tOm51bGwscGluY2hab29tT3B0aW9uczpudWxsLGRvY3VtZW50RHJhZzohMSx6b29tQm94Om51bGwsem9vbUJveEVuYWJsZWQ6ITAsem9vbVdoZWVsRW5hYmxlZDohMCxtb3VzZVdoZWVsT3B0aW9uczpudWxsLGhhbmRsZVJpZ2h0Q2xpY2tzOiExLHpvb21Cb3hLZXlNYXNrOk9wZW5MYXllcnMuSGFuZGxlci5NT0RfU0hJRlQsYXV0b0FjdGl2YXRlOiEwLGluaXRpYWxpemU6ZnVuY3Rpb24oYSl7dGhpcy5oYW5kbGVycz17fTtPcGVuTGF5ZXJzLkNvbnRyb2wucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5kZWFjdGl2YXRlKCk7dGhpcy5kcmFnUGFuJiZ0aGlzLmRyYWdQYW4uZGVzdHJveSgpO3RoaXMuZHJhZ1Bhbj1udWxsOwp0aGlzLnpvb21Cb3gmJnRoaXMuem9vbUJveC5kZXN0cm95KCk7dGhpcy56b29tQm94PW51bGw7dGhpcy5waW5jaFpvb20mJnRoaXMucGluY2hab29tLmRlc3Ryb3koKTt0aGlzLnBpbmNoWm9vbT1udWxsO09wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuZGVzdHJveS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGFjdGl2YXRlOmZ1bmN0aW9uKCl7dGhpcy5kcmFnUGFuLmFjdGl2YXRlKCk7dGhpcy56b29tV2hlZWxFbmFibGVkJiZ0aGlzLmhhbmRsZXJzLndoZWVsLmFjdGl2YXRlKCk7dGhpcy5oYW5kbGVycy5jbGljay5hY3RpdmF0ZSgpO3RoaXMuem9vbUJveEVuYWJsZWQmJnRoaXMuem9vbUJveC5hY3RpdmF0ZSgpO3RoaXMucGluY2hab29tJiZ0aGlzLnBpbmNoWm9vbS5hY3RpdmF0ZSgpO3JldHVybiBPcGVuTGF5ZXJzLkNvbnRyb2wucHJvdG90eXBlLmFjdGl2YXRlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sZGVhY3RpdmF0ZTpmdW5jdGlvbigpe3RoaXMucGluY2hab29tJiZ0aGlzLnBpbmNoWm9vbS5kZWFjdGl2YXRlKCk7CnRoaXMuem9vbUJveC5kZWFjdGl2YXRlKCk7dGhpcy5kcmFnUGFuLmRlYWN0aXZhdGUoKTt0aGlzLmhhbmRsZXJzLmNsaWNrLmRlYWN0aXZhdGUoKTt0aGlzLmhhbmRsZXJzLndoZWVsLmRlYWN0aXZhdGUoKTtyZXR1cm4gT3BlbkxheWVycy5Db250cm9sLnByb3RvdHlwZS5kZWFjdGl2YXRlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sZHJhdzpmdW5jdGlvbigpe3RoaXMuaGFuZGxlUmlnaHRDbGlja3MmJih0aGlzLm1hcC52aWV3UG9ydERpdi5vbmNvbnRleHRtZW51PU9wZW5MYXllcnMuRnVuY3Rpb24uRmFsc2UpO3RoaXMuaGFuZGxlcnMuY2xpY2s9bmV3IE9wZW5MYXllcnMuSGFuZGxlci5DbGljayh0aGlzLHtjbGljazp0aGlzLmRlZmF1bHRDbGljayxkYmxjbGljazp0aGlzLmRlZmF1bHREYmxDbGljayxkYmxyaWdodGNsaWNrOnRoaXMuZGVmYXVsdERibFJpZ2h0Q2xpY2t9LHsiZG91YmxlIjohMCxzdG9wRG91YmxlOiEwfSk7dGhpcy5kcmFnUGFuPW5ldyBPcGVuTGF5ZXJzLkNvbnRyb2wuRHJhZ1BhbihPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHttYXA6dGhpcy5tYXAsCmRvY3VtZW50RHJhZzp0aGlzLmRvY3VtZW50RHJhZ30sdGhpcy5kcmFnUGFuT3B0aW9ucykpO3RoaXMuem9vbUJveD1uZXcgT3BlbkxheWVycy5Db250cm9sLlpvb21Cb3goe21hcDp0aGlzLm1hcCxrZXlNYXNrOnRoaXMuem9vbUJveEtleU1hc2t9KTt0aGlzLmRyYWdQYW4uZHJhdygpO3RoaXMuem9vbUJveC5kcmF3KCk7dGhpcy5oYW5kbGVycy53aGVlbD1uZXcgT3BlbkxheWVycy5IYW5kbGVyLk1vdXNlV2hlZWwodGhpcyx7dXA6dGhpcy53aGVlbFVwLGRvd246dGhpcy53aGVlbERvd259LE9wZW5MYXllcnMuVXRpbC5leHRlbmQodGhpcy5tYXAuZnJhY3Rpb25hbFpvb20/e306e2N1bXVsYXRpdmU6ITEsaW50ZXJ2YWw6NTAsbWF4RGVsdGE6Nn0sdGhpcy5tb3VzZVdoZWVsT3B0aW9ucykpO09wZW5MYXllcnMuQ29udHJvbC5QaW5jaFpvb20mJih0aGlzLnBpbmNoWm9vbT1uZXcgT3BlbkxheWVycy5Db250cm9sLlBpbmNoWm9vbShPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHttYXA6dGhpcy5tYXB9LAp0aGlzLnBpbmNoWm9vbU9wdGlvbnMpKSl9LGRlZmF1bHRDbGljazpmdW5jdGlvbihhKXthLmxhc3RUb3VjaGVzJiYyPT1hLmxhc3RUb3VjaGVzLmxlbmd0aCYmdGhpcy5tYXAuem9vbU91dCgpfSxkZWZhdWx0RGJsQ2xpY2s6ZnVuY3Rpb24oYSl7dGhpcy5tYXAuem9vbVRvKHRoaXMubWFwLnpvb20rMSxhLnh5KX0sZGVmYXVsdERibFJpZ2h0Q2xpY2s6ZnVuY3Rpb24oYSl7dGhpcy5tYXAuem9vbVRvKHRoaXMubWFwLnpvb20tMSxhLnh5KX0sd2hlZWxDaGFuZ2U6ZnVuY3Rpb24oYSxiKXt0aGlzLm1hcC5mcmFjdGlvbmFsWm9vbXx8KGI9TWF0aC5yb3VuZChiKSk7dmFyIGM9dGhpcy5tYXAuZ2V0Wm9vbSgpLGQ7ZD1NYXRoLm1heChjK2IsMCk7ZD1NYXRoLm1pbihkLHRoaXMubWFwLmdldE51bVpvb21MZXZlbHMoKSk7ZCE9PWMmJnRoaXMubWFwLnpvb21UbyhkLGEueHkpfSx3aGVlbFVwOmZ1bmN0aW9uKGEsYil7dGhpcy53aGVlbENoYW5nZShhLGJ8fDEpfSx3aGVlbERvd246ZnVuY3Rpb24oYSwKYil7dGhpcy53aGVlbENoYW5nZShhLGJ8fC0xKX0sZGlzYWJsZVpvb21Cb3g6ZnVuY3Rpb24oKXt0aGlzLnpvb21Cb3hFbmFibGVkPSExO3RoaXMuem9vbUJveC5kZWFjdGl2YXRlKCl9LGVuYWJsZVpvb21Cb3g6ZnVuY3Rpb24oKXt0aGlzLnpvb21Cb3hFbmFibGVkPSEwO3RoaXMuYWN0aXZlJiZ0aGlzLnpvb21Cb3guYWN0aXZhdGUoKX0sZGlzYWJsZVpvb21XaGVlbDpmdW5jdGlvbigpe3RoaXMuem9vbVdoZWVsRW5hYmxlZD0hMTt0aGlzLmhhbmRsZXJzLndoZWVsLmRlYWN0aXZhdGUoKX0sZW5hYmxlWm9vbVdoZWVsOmZ1bmN0aW9uKCl7dGhpcy56b29tV2hlZWxFbmFibGVkPSEwO3RoaXMuYWN0aXZlJiZ0aGlzLmhhbmRsZXJzLndoZWVsLmFjdGl2YXRlKCl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuQ29udHJvbC5OYXZpZ2F0aW9uIn0pO09wZW5MYXllcnMuQ29udHJvbC5EcmF3RmVhdHVyZT1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuQ29udHJvbCx7bGF5ZXI6bnVsbCxjYWxsYmFja3M6bnVsbCxtdWx0aTohMSxmZWF0dXJlQWRkZWQ6ZnVuY3Rpb24oKXt9LGluaXRpYWxpemU6ZnVuY3Rpb24oYSxiLGMpe09wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLFtjXSk7dGhpcy5jYWxsYmFja3M9T3BlbkxheWVycy5VdGlsLmV4dGVuZCh7ZG9uZTp0aGlzLmRyYXdGZWF0dXJlLG1vZGlmeTpmdW5jdGlvbihhLGIpe3RoaXMubGF5ZXIuZXZlbnRzLnRyaWdnZXJFdmVudCgic2tldGNobW9kaWZpZWQiLHt2ZXJ0ZXg6YSxmZWF0dXJlOmJ9KX0sY3JlYXRlOmZ1bmN0aW9uKGEsYil7dGhpcy5sYXllci5ldmVudHMudHJpZ2dlckV2ZW50KCJza2V0Y2hzdGFydGVkIix7dmVydGV4OmEsZmVhdHVyZTpifSl9fSx0aGlzLmNhbGxiYWNrcyk7dGhpcy5sYXllcj1hO3RoaXMuaGFuZGxlck9wdGlvbnM9CnRoaXMuaGFuZGxlck9wdGlvbnN8fHt9O3RoaXMuaGFuZGxlck9wdGlvbnMubGF5ZXJPcHRpb25zPU9wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKHRoaXMuaGFuZGxlck9wdGlvbnMubGF5ZXJPcHRpb25zLHtyZW5kZXJlcnM6YS5yZW5kZXJlcnMscmVuZGVyZXJPcHRpb25zOmEucmVuZGVyZXJPcHRpb25zfSk7Im11bHRpImluIHRoaXMuaGFuZGxlck9wdGlvbnN8fCh0aGlzLmhhbmRsZXJPcHRpb25zLm11bHRpPXRoaXMubXVsdGkpO2lmKGE9dGhpcy5sYXllci5zdHlsZU1hcCYmdGhpcy5sYXllci5zdHlsZU1hcC5zdHlsZXMudGVtcG9yYXJ5KXRoaXMuaGFuZGxlck9wdGlvbnMubGF5ZXJPcHRpb25zPU9wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKHRoaXMuaGFuZGxlck9wdGlvbnMubGF5ZXJPcHRpb25zLHtzdHlsZU1hcDpuZXcgT3BlbkxheWVycy5TdHlsZU1hcCh7ImRlZmF1bHQiOmF9KX0pO3RoaXMuaGFuZGxlcj1uZXcgYih0aGlzLHRoaXMuY2FsbGJhY2tzLHRoaXMuaGFuZGxlck9wdGlvbnMpfSwKZHJhd0ZlYXR1cmU6ZnVuY3Rpb24oYSl7YT1uZXcgT3BlbkxheWVycy5GZWF0dXJlLlZlY3RvcihhKTshMSE9PXRoaXMubGF5ZXIuZXZlbnRzLnRyaWdnZXJFdmVudCgic2tldGNoY29tcGxldGUiLHtmZWF0dXJlOmF9KSYmKGEuc3RhdGU9T3BlbkxheWVycy5TdGF0ZS5JTlNFUlQsdGhpcy5sYXllci5hZGRGZWF0dXJlcyhbYV0pLHRoaXMuZmVhdHVyZUFkZGVkKGEpLHRoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgiZmVhdHVyZWFkZGVkIix7ZmVhdHVyZTphfSkpfSxpbnNlcnRYWTpmdW5jdGlvbihhLGIpe3RoaXMuaGFuZGxlciYmdGhpcy5oYW5kbGVyLmxpbmUmJnRoaXMuaGFuZGxlci5pbnNlcnRYWShhLGIpfSxpbnNlcnREZWx0YVhZOmZ1bmN0aW9uKGEsYil7dGhpcy5oYW5kbGVyJiZ0aGlzLmhhbmRsZXIubGluZSYmdGhpcy5oYW5kbGVyLmluc2VydERlbHRhWFkoYSxiKX0saW5zZXJ0RGlyZWN0aW9uTGVuZ3RoOmZ1bmN0aW9uKGEsYil7dGhpcy5oYW5kbGVyJiZ0aGlzLmhhbmRsZXIubGluZSYmCnRoaXMuaGFuZGxlci5pbnNlcnREaXJlY3Rpb25MZW5ndGgoYSxiKX0saW5zZXJ0RGVmbGVjdGlvbkxlbmd0aDpmdW5jdGlvbihhLGIpe3RoaXMuaGFuZGxlciYmdGhpcy5oYW5kbGVyLmxpbmUmJnRoaXMuaGFuZGxlci5pbnNlcnREZWZsZWN0aW9uTGVuZ3RoKGEsYil9LHVuZG86ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oYW5kbGVyLnVuZG8mJnRoaXMuaGFuZGxlci51bmRvKCl9LHJlZG86ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oYW5kbGVyLnJlZG8mJnRoaXMuaGFuZGxlci5yZWRvKCl9LGZpbmlzaFNrZXRjaDpmdW5jdGlvbigpe3RoaXMuaGFuZGxlci5maW5pc2hHZW9tZXRyeSgpfSxjYW5jZWw6ZnVuY3Rpb24oKXt0aGlzLmhhbmRsZXIuY2FuY2VsKCl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuQ29udHJvbC5EcmF3RmVhdHVyZSJ9KTtPcGVuTGF5ZXJzLkhhbmRsZXIuUG9seWdvbj1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuSGFuZGxlci5QYXRoLHtob2xlTW9kaWZpZXI6bnVsbCxkcmF3aW5nSG9sZTohMSxwb2x5Z29uOm51bGwsY3JlYXRlRmVhdHVyZTpmdW5jdGlvbihhKXthPXRoaXMubGF5ZXIuZ2V0TG9uTGF0RnJvbVZpZXdQb3J0UHgoYSk7YT1uZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludChhLmxvbixhLmxhdCk7dGhpcy5wb2ludD1uZXcgT3BlbkxheWVycy5GZWF0dXJlLlZlY3RvcihhKTt0aGlzLmxpbmU9bmV3IE9wZW5MYXllcnMuRmVhdHVyZS5WZWN0b3IobmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuTGluZWFyUmluZyhbdGhpcy5wb2ludC5nZW9tZXRyeV0pKTt0aGlzLnBvbHlnb249bmV3IE9wZW5MYXllcnMuRmVhdHVyZS5WZWN0b3IobmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9seWdvbihbdGhpcy5saW5lLmdlb21ldHJ5XSkpO3RoaXMuY2FsbGJhY2soImNyZWF0ZSIsW3RoaXMucG9pbnQuZ2VvbWV0cnksCnRoaXMuZ2V0U2tldGNoKCldKTt0aGlzLnBvaW50Lmdlb21ldHJ5LmNsZWFyQm91bmRzKCk7dGhpcy5sYXllci5hZGRGZWF0dXJlcyhbdGhpcy5wb2x5Z29uLHRoaXMucG9pbnRdLHtzaWxlbnQ6ITB9KX0sYWRkUG9pbnQ6ZnVuY3Rpb24oYSl7aWYoIXRoaXMuZHJhd2luZ0hvbGUmJnRoaXMuaG9sZU1vZGlmaWVyJiZ0aGlzLmV2dCYmdGhpcy5ldnRbdGhpcy5ob2xlTW9kaWZpZXJdKWZvcih2YXIgYj10aGlzLnBvaW50Lmdlb21ldHJ5LGM9dGhpcy5jb250cm9sLmxheWVyLmZlYXR1cmVzLGQsZT1jLmxlbmd0aC0xOzA8PWU7LS1lKWlmKGQ9Y1tlXS5nZW9tZXRyeSwoZCBpbnN0YW5jZW9mIE9wZW5MYXllcnMuR2VvbWV0cnkuUG9seWdvbnx8ZCBpbnN0YW5jZW9mIE9wZW5MYXllcnMuR2VvbWV0cnkuTXVsdGlQb2x5Z29uKSYmZC5pbnRlcnNlY3RzKGIpKXtiPWNbZV07dGhpcy5jb250cm9sLmxheWVyLnJlbW92ZUZlYXR1cmVzKFtiXSx7c2lsZW50OiEwfSk7dGhpcy5jb250cm9sLmxheWVyLmV2ZW50cy5yZWdpc3RlclByaW9yaXR5KCJza2V0Y2hjb21wbGV0ZSIsCnRoaXMsdGhpcy5maW5hbGl6ZUludGVyaW9yUmluZyk7dGhpcy5jb250cm9sLmxheWVyLmV2ZW50cy5yZWdpc3RlclByaW9yaXR5KCJza2V0Y2htb2RpZmllZCIsdGhpcyx0aGlzLmVuZm9yY2VUb3BvbG9neSk7Yi5nZW9tZXRyeS5hZGRDb21wb25lbnQodGhpcy5saW5lLmdlb21ldHJ5KTt0aGlzLnBvbHlnb249Yjt0aGlzLmRyYXdpbmdIb2xlPSEwO2JyZWFrfU9wZW5MYXllcnMuSGFuZGxlci5QYXRoLnByb3RvdHlwZS5hZGRQb2ludC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGdldEN1cnJlbnRQb2ludEluZGV4OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubGluZS5nZW9tZXRyeS5jb21wb25lbnRzLmxlbmd0aC0yfSxlbmZvcmNlVG9wb2xvZ3k6ZnVuY3Rpb24oYSl7YT1hLnZlcnRleDt2YXIgYj10aGlzLmxpbmUuZ2VvbWV0cnkuY29tcG9uZW50czt0aGlzLnBvbHlnb24uZ2VvbWV0cnkuaW50ZXJzZWN0cyhhKXx8KGI9YltiLmxlbmd0aC0zXSxhLng9Yi54LGEueT1iLnkpfSxmaW5pc2hHZW9tZXRyeTpmdW5jdGlvbigpe3RoaXMubGluZS5nZW9tZXRyeS5yZW1vdmVDb21wb25lbnQodGhpcy5saW5lLmdlb21ldHJ5LmNvbXBvbmVudHNbdGhpcy5saW5lLmdlb21ldHJ5LmNvbXBvbmVudHMubGVuZ3RoLQoyXSk7dGhpcy5yZW1vdmVQb2ludCgpO3RoaXMuZmluYWxpemUoKX0sZmluYWxpemVJbnRlcmlvclJpbmc6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmxpbmUuZ2VvbWV0cnksYj0wIT09YS5nZXRBcmVhKCk7aWYoYil7Zm9yKHZhciBjPXRoaXMucG9seWdvbi5nZW9tZXRyeS5jb21wb25lbnRzLGQ9Yy5sZW5ndGgtMjswPD1kOy0tZClpZihhLmludGVyc2VjdHMoY1tkXSkpe2I9ITE7YnJlYWt9aWYoYilhOmZvcihkPWMubGVuZ3RoLTI7MDxkOy0tZClmb3IodmFyIGU9Y1tkXS5jb21wb25lbnRzLGY9MCxnPWUubGVuZ3RoO2Y8ZzsrK2YpaWYoYS5jb250YWluc1BvaW50KGVbZl0pKXtiPSExO2JyZWFrIGF9fWI/dGhpcy5wb2x5Z29uLnN0YXRlIT09T3BlbkxheWVycy5TdGF0ZS5JTlNFUlQmJih0aGlzLnBvbHlnb24uc3RhdGU9T3BlbkxheWVycy5TdGF0ZS5VUERBVEUpOnRoaXMucG9seWdvbi5nZW9tZXRyeS5yZW1vdmVDb21wb25lbnQoYSk7dGhpcy5yZXN0b3JlRmVhdHVyZSgpO3JldHVybiExfSwKY2FuY2VsOmZ1bmN0aW9uKCl7dGhpcy5kcmF3aW5nSG9sZSYmKHRoaXMucG9seWdvbi5nZW9tZXRyeS5yZW1vdmVDb21wb25lbnQodGhpcy5saW5lLmdlb21ldHJ5KSx0aGlzLnJlc3RvcmVGZWF0dXJlKCEwKSk7cmV0dXJuIE9wZW5MYXllcnMuSGFuZGxlci5QYXRoLnByb3RvdHlwZS5jYW5jZWwuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxyZXN0b3JlRmVhdHVyZTpmdW5jdGlvbihhKXt0aGlzLmNvbnRyb2wubGF5ZXIuZXZlbnRzLnVucmVnaXN0ZXIoInNrZXRjaGNvbXBsZXRlIix0aGlzLHRoaXMuZmluYWxpemVJbnRlcmlvclJpbmcpO3RoaXMuY29udHJvbC5sYXllci5ldmVudHMudW5yZWdpc3Rlcigic2tldGNobW9kaWZpZWQiLHRoaXMsdGhpcy5lbmZvcmNlVG9wb2xvZ3kpO3RoaXMubGF5ZXIucmVtb3ZlRmVhdHVyZXMoW3RoaXMucG9seWdvbl0se3NpbGVudDohMH0pO3RoaXMuY29udHJvbC5sYXllci5hZGRGZWF0dXJlcyhbdGhpcy5wb2x5Z29uXSx7c2lsZW50OiEwfSk7dGhpcy5kcmF3aW5nSG9sZT0KITE7YXx8dGhpcy5jb250cm9sLmxheWVyLmV2ZW50cy50cmlnZ2VyRXZlbnQoInNrZXRjaGNvbXBsZXRlIix7ZmVhdHVyZTp0aGlzLnBvbHlnb259KX0sZGVzdHJveUZlYXR1cmU6ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5IYW5kbGVyLlBhdGgucHJvdG90eXBlLmRlc3Ryb3lGZWF0dXJlLmNhbGwodGhpcyxhKTt0aGlzLnBvbHlnb249bnVsbH0sZHJhd0ZlYXR1cmU6ZnVuY3Rpb24oKXt0aGlzLmxheWVyLmRyYXdGZWF0dXJlKHRoaXMucG9seWdvbix0aGlzLnN0eWxlKTt0aGlzLmxheWVyLmRyYXdGZWF0dXJlKHRoaXMucG9pbnQsdGhpcy5zdHlsZSl9LGdldFNrZXRjaDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnBvbHlnb259LGdldEdlb21ldHJ5OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5wb2x5Z29uJiZ0aGlzLnBvbHlnb24uZ2VvbWV0cnk7YSYmdGhpcy5tdWx0aSYmKGE9bmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuTXVsdGlQb2x5Z29uKFthXSkpO3JldHVybiBhfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkhhbmRsZXIuUG9seWdvbiJ9KTtPcGVuTGF5ZXJzLkNvbnRyb2wuRWRpdGluZ1Rvb2xiYXI9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkNvbnRyb2wuUGFuZWwse2NpdGVDb21wbGlhbnQ6ITEsaW5pdGlhbGl6ZTpmdW5jdGlvbihhLGIpe09wZW5MYXllcnMuQ29udHJvbC5QYW5lbC5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLFtiXSk7dGhpcy5hZGRDb250cm9scyhbbmV3IE9wZW5MYXllcnMuQ29udHJvbC5OYXZpZ2F0aW9uXSk7dmFyIGM9W25ldyBPcGVuTGF5ZXJzLkNvbnRyb2wuRHJhd0ZlYXR1cmUoYSxPcGVuTGF5ZXJzLkhhbmRsZXIuUG9pbnQse2Rpc3BsYXlDbGFzczoib2xDb250cm9sRHJhd0ZlYXR1cmVQb2ludCIsaGFuZGxlck9wdGlvbnM6e2NpdGVDb21wbGlhbnQ6dGhpcy5jaXRlQ29tcGxpYW50fX0pLG5ldyBPcGVuTGF5ZXJzLkNvbnRyb2wuRHJhd0ZlYXR1cmUoYSxPcGVuTGF5ZXJzLkhhbmRsZXIuUGF0aCx7ZGlzcGxheUNsYXNzOiJvbENvbnRyb2xEcmF3RmVhdHVyZVBhdGgiLGhhbmRsZXJPcHRpb25zOntjaXRlQ29tcGxpYW50OnRoaXMuY2l0ZUNvbXBsaWFudH19KSwKbmV3IE9wZW5MYXllcnMuQ29udHJvbC5EcmF3RmVhdHVyZShhLE9wZW5MYXllcnMuSGFuZGxlci5Qb2x5Z29uLHtkaXNwbGF5Q2xhc3M6Im9sQ29udHJvbERyYXdGZWF0dXJlUG9seWdvbiIsaGFuZGxlck9wdGlvbnM6e2NpdGVDb21wbGlhbnQ6dGhpcy5jaXRlQ29tcGxpYW50fX0pXTt0aGlzLmFkZENvbnRyb2xzKGMpfSxkcmF3OmZ1bmN0aW9uKCl7dmFyIGE9T3BlbkxheWVycy5Db250cm9sLlBhbmVsLnByb3RvdHlwZS5kcmF3LmFwcGx5KHRoaXMsYXJndW1lbnRzKTtudWxsPT09dGhpcy5kZWZhdWx0Q29udHJvbCYmKHRoaXMuZGVmYXVsdENvbnRyb2w9dGhpcy5jb250cm9sc1swXSk7cmV0dXJuIGF9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuQ29udHJvbC5FZGl0aW5nVG9vbGJhciJ9KTtPcGVuTGF5ZXJzLlN0cmF0ZWd5LkJCT1g9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLlN0cmF0ZWd5LHtib3VuZHM6bnVsbCxyZXNvbHV0aW9uOm51bGwscmF0aW86MixyZXNGYWN0b3I6bnVsbCxyZXNwb25zZTpudWxsLGFjdGl2YXRlOmZ1bmN0aW9uKCl7dmFyIGE9T3BlbkxheWVycy5TdHJhdGVneS5wcm90b3R5cGUuYWN0aXZhdGUuY2FsbCh0aGlzKTthJiYodGhpcy5sYXllci5ldmVudHMub24oe21vdmVlbmQ6dGhpcy51cGRhdGUscmVmcmVzaDp0aGlzLnVwZGF0ZSx2aXNpYmlsaXR5Y2hhbmdlZDp0aGlzLnVwZGF0ZSxzY29wZTp0aGlzfSksdGhpcy51cGRhdGUoKSk7cmV0dXJuIGF9LGRlYWN0aXZhdGU6ZnVuY3Rpb24oKXt2YXIgYT1PcGVuTGF5ZXJzLlN0cmF0ZWd5LnByb3RvdHlwZS5kZWFjdGl2YXRlLmNhbGwodGhpcyk7YSYmdGhpcy5sYXllci5ldmVudHMudW4oe21vdmVlbmQ6dGhpcy51cGRhdGUscmVmcmVzaDp0aGlzLnVwZGF0ZSx2aXNpYmlsaXR5Y2hhbmdlZDp0aGlzLnVwZGF0ZSwKc2NvcGU6dGhpc30pO3JldHVybiBhfSx1cGRhdGU6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5nZXRNYXBCb3VuZHMoKTtudWxsIT09YiYmKGEmJmEuZm9yY2V8fHRoaXMubGF5ZXIudmlzaWJpbGl0eSYmdGhpcy5sYXllci5jYWxjdWxhdGVJblJhbmdlKCkmJnRoaXMuaW52YWxpZEJvdW5kcyhiKSkmJih0aGlzLmNhbGN1bGF0ZUJvdW5kcyhiKSx0aGlzLnJlc29sdXRpb249dGhpcy5sYXllci5tYXAuZ2V0UmVzb2x1dGlvbigpLHRoaXMudHJpZ2dlclJlYWQoYSkpfSxnZXRNYXBCb3VuZHM6ZnVuY3Rpb24oKXtpZihudWxsPT09dGhpcy5sYXllci5tYXApcmV0dXJuIG51bGw7dmFyIGE9dGhpcy5sYXllci5tYXAuZ2V0RXh0ZW50KCk7YSYmIXRoaXMubGF5ZXIucHJvamVjdGlvbi5lcXVhbHModGhpcy5sYXllci5tYXAuZ2V0UHJvamVjdGlvbk9iamVjdCgpKSYmKGE9YS5jbG9uZSgpLnRyYW5zZm9ybSh0aGlzLmxheWVyLm1hcC5nZXRQcm9qZWN0aW9uT2JqZWN0KCksdGhpcy5sYXllci5wcm9qZWN0aW9uKSk7CnJldHVybiBhfSxpbnZhbGlkQm91bmRzOmZ1bmN0aW9uKGEpe2F8fChhPXRoaXMuZ2V0TWFwQm91bmRzKCkpO2E9IXRoaXMuYm91bmRzfHwhdGhpcy5ib3VuZHMuY29udGFpbnNCb3VuZHMoYSk7IWEmJnRoaXMucmVzRmFjdG9yJiYoYT10aGlzLnJlc29sdXRpb24vdGhpcy5sYXllci5tYXAuZ2V0UmVzb2x1dGlvbigpLGE9YT49dGhpcy5yZXNGYWN0b3J8fGE8PTEvdGhpcy5yZXNGYWN0b3IpO3JldHVybiBhfSxjYWxjdWxhdGVCb3VuZHM6ZnVuY3Rpb24oYSl7YXx8KGE9dGhpcy5nZXRNYXBCb3VuZHMoKSk7dmFyIGI9YS5nZXRDZW50ZXJMb25MYXQoKSxjPWEuZ2V0V2lkdGgoKSp0aGlzLnJhdGlvO2E9YS5nZXRIZWlnaHQoKSp0aGlzLnJhdGlvO3RoaXMuYm91bmRzPW5ldyBPcGVuTGF5ZXJzLkJvdW5kcyhiLmxvbi1jLzIsYi5sYXQtYS8yLGIubG9uK2MvMixiLmxhdCthLzIpfSx0cmlnZ2VyUmVhZDpmdW5jdGlvbihhKXshdGhpcy5yZXNwb25zZXx8YSYmITA9PT1hLm5vQWJvcnR8fAoodGhpcy5sYXllci5wcm90b2NvbC5hYm9ydCh0aGlzLnJlc3BvbnNlKSx0aGlzLmxheWVyLmV2ZW50cy50cmlnZ2VyRXZlbnQoImxvYWRlbmQiKSk7dmFyIGI9e2ZpbHRlcjp0aGlzLmNyZWF0ZUZpbHRlcigpfTt0aGlzLmxheWVyLmV2ZW50cy50cmlnZ2VyRXZlbnQoImxvYWRzdGFydCIsYik7dGhpcy5yZXNwb25zZT10aGlzLmxheWVyLnByb3RvY29sLnJlYWQoT3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoe2ZpbHRlcjpiLmZpbHRlcixjYWxsYmFjazp0aGlzLm1lcmdlLHNjb3BlOnRoaXN9LGEpKX0sY3JlYXRlRmlsdGVyOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IE9wZW5MYXllcnMuRmlsdGVyLlNwYXRpYWwoe3R5cGU6T3BlbkxheWVycy5GaWx0ZXIuU3BhdGlhbC5CQk9YLHZhbHVlOnRoaXMuYm91bmRzLHByb2plY3Rpb246dGhpcy5sYXllci5wcm9qZWN0aW9ufSk7dGhpcy5sYXllci5maWx0ZXImJihhPW5ldyBPcGVuTGF5ZXJzLkZpbHRlci5Mb2dpY2FsKHt0eXBlOk9wZW5MYXllcnMuRmlsdGVyLkxvZ2ljYWwuQU5ELApmaWx0ZXJzOlt0aGlzLmxheWVyLmZpbHRlcixhXX0pKTtyZXR1cm4gYX0sbWVyZ2U6ZnVuY3Rpb24oYSl7dGhpcy5sYXllci5kZXN0cm95RmVhdHVyZXMoKTtpZihhLnN1Y2Nlc3MoKSl7dmFyIGI9YS5mZWF0dXJlcztpZihiJiYwPGIubGVuZ3RoKXt2YXIgYz10aGlzLmxheWVyLnByb2plY3Rpb24sZD10aGlzLmxheWVyLm1hcC5nZXRQcm9qZWN0aW9uT2JqZWN0KCk7aWYoIWQuZXF1YWxzKGMpKWZvcih2YXIgZSxmPTAsZz1iLmxlbmd0aDtmPGc7KytmKShlPWJbZl0uZ2VvbWV0cnkpJiZlLnRyYW5zZm9ybShjLGQpO3RoaXMubGF5ZXIuYWRkRmVhdHVyZXMoYil9fWVsc2UgdGhpcy5ib3VuZHM9bnVsbDt0aGlzLnJlc3BvbnNlPW51bGw7dGhpcy5sYXllci5ldmVudHMudHJpZ2dlckV2ZW50KCJsb2FkZW5kIix7cmVzcG9uc2U6YX0pfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLlN0cmF0ZWd5LkJCT1gifSk7T3BlbkxheWVycy5MYXllci5Xb3JsZFdpbmQ9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkxheWVyLkdyaWQse0RFRkFVTFRfUEFSQU1TOnt9LGlzQmFzZUxheWVyOiEwLGx6ZDpudWxsLHpvb21MZXZlbHM6bnVsbCxpbml0aWFsaXplOmZ1bmN0aW9uKGEsYixjLGQsZSxmKXt0aGlzLmx6ZD1jO3RoaXMuem9vbUxldmVscz1kO2M9W107Yy5wdXNoKGEsYixlLGYpO09wZW5MYXllcnMuTGF5ZXIuR3JpZC5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLGMpO3RoaXMucGFyYW1zPU9wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKHRoaXMucGFyYW1zLHRoaXMuREVGQVVMVF9QQVJBTVMpfSxnZXRab29tOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5tYXAuZ2V0Wm9vbSgpO3RoaXMubWFwLmdldE1heEV4dGVudCgpO3JldHVybiBhLT1NYXRoLmxvZyh0aGlzLm1heFJlc29sdXRpb24vKHRoaXMubHpkLzUxMikpL01hdGgubG9nKDIpfSxnZXRVUkw6ZnVuY3Rpb24oYSl7YT10aGlzLmFkanVzdEJvdW5kcyhhKTsKdmFyIGI9dGhpcy5nZXRab29tKCksYz10aGlzLm1hcC5nZXRNYXhFeHRlbnQoKSxkPXRoaXMubHpkL01hdGgucG93KDIsdGhpcy5nZXRab29tKCkpLGU9TWF0aC5mbG9vcigoYS5sZWZ0LWMubGVmdCkvZCk7YT1NYXRoLmZsb29yKChhLmJvdHRvbS1jLmJvdHRvbSkvZCk7cmV0dXJuIHRoaXMubWFwLmdldFJlc29sdXRpb24oKTw9dGhpcy5semQvNTEyJiZ0aGlzLmdldFpvb20oKTw9dGhpcy56b29tTGV2ZWxzP3RoaXMuZ2V0RnVsbFJlcXVlc3RTdHJpbmcoe0w6YixYOmUsWTphfSk6T3BlbkxheWVycy5VdGlsLmdldEltYWdlTG9jYXRpb24oImJsYW5rLmdpZiIpfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkxheWVyLldvcmxkV2luZCJ9KTtPcGVuTGF5ZXJzLlByb3RvY29sLkNTVz1mdW5jdGlvbihhKXthPU9wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKGEsT3BlbkxheWVycy5Qcm90b2NvbC5DU1cuREVGQVVMVFMpO3ZhciBiPU9wZW5MYXllcnMuUHJvdG9jb2wuQ1NXWyJ2IithLnZlcnNpb24ucmVwbGFjZSgvXC4vZywiXyIpXTtpZighYil0aHJvdyJVbnN1cHBvcnRlZCBDU1cgdmVyc2lvbjogIithLnZlcnNpb247cmV0dXJuIG5ldyBiKGEpfTtPcGVuTGF5ZXJzLlByb3RvY29sLkNTVy5ERUZBVUxUUz17dmVyc2lvbjoiMi4wLjIifTtPcGVuTGF5ZXJzLkZvcm1hdC5XTVRTQ2FwYWJpbGl0aWVzPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Gb3JtYXQuWE1MLlZlcnNpb25lZE9HQyx7ZGVmYXVsdFZlcnNpb246IjEuMC4wIix5eDp7InVybjpvZ2M6ZGVmOmNyczpFUFNHOjo0MzI2IjohMH0sY3JlYXRlTGF5ZXI6ZnVuY3Rpb24oYSxiKXtpZighKCJsYXllciJpbiBiKSl0aHJvdyBFcnJvcigiTWlzc2luZyBwcm9wZXJ0eSAnbGF5ZXInIGluIGNvbmZpZ3VyYXRpb24uIik7Zm9yKHZhciBjPWEuY29udGVudHMsZCxlPTAsZj1jLmxheWVycy5sZW5ndGg7ZTxmOysrZSlpZihjLmxheWVyc1tlXS5pZGVudGlmaWVyPT09Yi5sYXllcil7ZD1jLmxheWVyc1tlXTticmVha31pZighZCl0aHJvdyBFcnJvcigiTGF5ZXIgbm90IGZvdW5kIik7dmFyIGc9Yi5mb3JtYXQ7IWcmJihkLmZvcm1hdHMmJmQuZm9ybWF0cy5sZW5ndGgpJiYoZz1kLmZvcm1hdHNbMF0pO3ZhciBoO2IubWF0cml4U2V0P2g9Yy50aWxlTWF0cml4U2V0c1tiLm1hdHJpeFNldF06CjE8PWQudGlsZU1hdHJpeFNldExpbmtzLmxlbmd0aCYmKGg9Yy50aWxlTWF0cml4U2V0c1tkLnRpbGVNYXRyaXhTZXRMaW5rc1swXS50aWxlTWF0cml4U2V0XSk7aWYoIWgpdGhyb3cgRXJyb3IoIm1hdHJpeFNldCBub3QgZm91bmQiKTtmb3IodmFyIGssZT0wLGY9ZC5zdHlsZXMubGVuZ3RoO2U8ZiYmKGs9ZC5zdHlsZXNbZV0sIWsuaXNEZWZhdWx0KTsrK2UpO2M9Yi5yZXF1ZXN0RW5jb2Rpbmc7aWYoIWMmJihjPSJLVlAiLGEub3BlcmF0aW9uc01ldGFkYXRhLkdldFRpbGUuZGNwLmh0dHApKXt2YXIgbD1hLm9wZXJhdGlvbnNNZXRhZGF0YS5HZXRUaWxlLmRjcC5odHRwO2wuZ2V0WzBdLmNvbnN0cmFpbnRzJiYobD1sLmdldFswXS5jb25zdHJhaW50cy5HZXRFbmNvZGluZy5hbGxvd2VkVmFsdWVzLGwuS1ZQfHwhbC5SRVNUJiYhbC5SRVNUZnVsfHwoYz0iUkVTVCIpKX12YXIgbD1bXSxtPWIucGFyYW1zfHx7fTtkZWxldGUgYi5wYXJhbXM7Zm9yKHZhciBuPTAscD1kLmRpbWVuc2lvbnMubGVuZ3RoO248CnA7bisrKXt2YXIgcT1kLmRpbWVuc2lvbnNbbl07bC5wdXNoKHEuaWRlbnRpZmllcik7bS5oYXNPd25Qcm9wZXJ0eShxLmlkZW50aWZpZXIpfHwobVtxLmlkZW50aWZpZXJdPXFbImRlZmF1bHQiXSl9dmFyIG49Yi5wcm9qZWN0aW9ufHxoLnN1cHBvcnRlZENSUy5yZXBsYWNlKC91cm46b2djOmRlZjpjcnM6KFx3Kyk6KC4qOik/KFx3KykkLywiJDE6JDMiKSxwPWIudW5pdHN8fCgiRVBTRzo0MzI2Ij09PW4/ImRlZ3JlZXMiOiJtIikscT1bXSxyO2ZvcihyIGluIGgubWF0cml4SWRzKWgubWF0cml4SWRzLmhhc093blByb3BlcnR5KHIpJiZxLnB1c2goMi44RS00KmgubWF0cml4SWRzW3JdLnNjYWxlRGVub21pbmF0b3IvT3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0gvT3BlbkxheWVycy5JTkNIRVNfUEVSX1VOSVRbcF0pO2lmKCJSRVNUIj09PWMmJmQucmVzb3VyY2VVcmxzKXtyPVtdO2Zvcih2YXIgZj0wLHM9ZC5yZXNvdXJjZVVybHMubGVuZ3RoO2Y8czsrK2YpZT1kLnJlc291cmNlVXJsc1tmXSwKZS5mb3JtYXQ9PT1nJiYidGlsZSI9PT1lLnJlc291cmNlVHlwZSYmci5wdXNoKGUudGVtcGxhdGUpfWVsc2V7cz1hLm9wZXJhdGlvbnNNZXRhZGF0YS5HZXRUaWxlLmRjcC5odHRwLmdldDtyPVtdO2Zvcih2YXIgdCxlPTAsZj1zLmxlbmd0aDtlPGY7ZSsrKXQ9c1tlXS5jb25zdHJhaW50cywoIXR8fHQmJnQuR2V0RW5jb2RpbmcuYWxsb3dlZFZhbHVlc1tjXSkmJnIucHVzaChzW2VdLnVybCl9cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLkxheWVyLldNVFMoT3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoYix7dXJsOnIscmVxdWVzdEVuY29kaW5nOmMsbmFtZTpkLnRpdGxlLHN0eWxlOmsuaWRlbnRpZmllcixmb3JtYXQ6ZyxtYXRyaXhJZHM6aC5tYXRyaXhJZHMsbWF0cml4U2V0OmguaWRlbnRpZmllcixwcm9qZWN0aW9uOm4sdW5pdHM6cCxyZXNvbHV0aW9uczohMT09PWIuaXNCYXNlTGF5ZXI/dm9pZCAwOnEsc2VydmVyUmVzb2x1dGlvbnM6cSx0aWxlRnVsbEV4dGVudDpoLmJvdW5kcywKZGltZW5zaW9uczpsLHBhcmFtczptfSkpfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkZvcm1hdC5XTVRTQ2FwYWJpbGl0aWVzIn0pO09wZW5MYXllcnMuTGF5ZXIuR29vZ2xlLnYzPXtERUZBVUxUUzp7c3BoZXJpY2FsTWVyY2F0b3I6ITAscHJvamVjdGlvbjoiRVBTRzo5MDA5MTMifSxhbmltYXRpb25FbmFibGVkOiEwLGxvYWRNYXBPYmplY3Q6ZnVuY3Rpb24oKXt0aGlzLnR5cGV8fCh0aGlzLnR5cGU9Z29vZ2xlLm1hcHMuTWFwVHlwZUlkLlJPQURNQVApO3ZhciBhLGI9T3BlbkxheWVycy5MYXllci5Hb29nbGUuY2FjaGVbdGhpcy5tYXAuaWRdO2I/KGE9Yi5tYXBPYmplY3QsKytiLmNvdW50KTooYT10aGlzLm1hcC5nZXRDZW50ZXIoKSxiPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpLGIuY2xhc3NOYW1lPSJvbEZvcmVpZ25Db250YWluZXIiLGIuc3R5bGUud2lkdGg9IjEwMCUiLGIuc3R5bGUuaGVpZ2h0PSIxMDAlIixhPW5ldyBnb29nbGUubWFwcy5NYXAoYix7Y2VudGVyOmE/bmV3IGdvb2dsZS5tYXBzLkxhdExuZyhhLmxhdCxhLmxvbik6bmV3IGdvb2dsZS5tYXBzLkxhdExuZygwLDApLHpvb206dGhpcy5tYXAuZ2V0Wm9vbSgpfHwKMCxtYXBUeXBlSWQ6dGhpcy50eXBlLGRpc2FibGVEZWZhdWx0VUk6ITAsa2V5Ym9hcmRTaG9ydGN1dHM6ITEsZHJhZ2dhYmxlOiExLGRpc2FibGVEb3VibGVDbGlja1pvb206ITAsc2Nyb2xsd2hlZWw6ITEsc3RyZWV0Vmlld0NvbnRyb2w6ITF9KSxiPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpLGIuc3R5bGUud2lkdGg9IjEwMCUiLGIuc3R5bGUuaGVpZ2h0PSIxMDAlIixhLmNvbnRyb2xzW2dvb2dsZS5tYXBzLkNvbnRyb2xQb3NpdGlvbi5UT1BfTEVGVF0ucHVzaChiKSxiPXtnb29nbGVDb250cm9sOmIsbWFwT2JqZWN0OmEsY291bnQ6MX0sT3BlbkxheWVycy5MYXllci5Hb29nbGUuY2FjaGVbdGhpcy5tYXAuaWRdPWIpO3RoaXMubWFwT2JqZWN0PWE7dGhpcy5zZXRHTWFwVmlzaWJpbGl0eSh0aGlzLnZpc2liaWxpdHkpfSxvbk1hcFJlc2l6ZTpmdW5jdGlvbigpe3RoaXMudmlzaWJpbGl0eSYmZ29vZ2xlLm1hcHMuZXZlbnQudHJpZ2dlcih0aGlzLm1hcE9iamVjdCwicmVzaXplIil9LApzZXRHTWFwVmlzaWJpbGl0eTpmdW5jdGlvbihhKXt2YXIgYj1PcGVuTGF5ZXJzLkxheWVyLkdvb2dsZS5jYWNoZVt0aGlzLm1hcC5pZF0sYz10aGlzLm1hcDtpZihiKXtmb3IodmFyIGQ9dGhpcy50eXBlLGU9Yy5sYXllcnMsZixnPWUubGVuZ3RoLTE7MDw9ZzstLWcpaWYoZj1lW2ddLGYgaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLkxheWVyLkdvb2dsZSYmITA9PT1mLnZpc2liaWxpdHkmJiEwPT09Zi5pblJhbmdlKXtkPWYudHlwZTthPSEwO2JyZWFrfWU9dGhpcy5tYXBPYmplY3QuZ2V0RGl2KCk7aWYoITA9PT1hKXtpZihlLnBhcmVudE5vZGUhPT1jLmRpdilpZihiLnJlbmRlcmVkKWMuZGl2LmFwcGVuZENoaWxkKGUpLGIuZ29vZ2xlQ29udHJvbC5hcHBlbmRDaGlsZChjLnZpZXdQb3J0RGl2KSxnb29nbGUubWFwcy5ldmVudC50cmlnZ2VyKHRoaXMubWFwT2JqZWN0LCJyZXNpemUiKTtlbHNle3ZhciBoPXRoaXM7Z29vZ2xlLm1hcHMuZXZlbnQuYWRkTGlzdGVuZXJPbmNlKHRoaXMubWFwT2JqZWN0LAoidGlsZXNsb2FkZWQiLGZ1bmN0aW9uKCl7Yi5yZW5kZXJlZD0hMDtoLnNldEdNYXBWaXNpYmlsaXR5KGguZ2V0VmlzaWJpbGl0eSgpKTtoLm1vdmVUbyhoLm1hcC5nZXRDZW50ZXIoKSl9KX10aGlzLm1hcE9iamVjdC5zZXRNYXBUeXBlSWQoZCl9ZWxzZSBiLmdvb2dsZUNvbnRyb2wuaGFzQ2hpbGROb2RlcygpJiYoYy5kaXYuYXBwZW5kQ2hpbGQoYy52aWV3UG9ydERpdiksYy5kaXYucmVtb3ZlQ2hpbGQoZSkpfX0sZ2V0TWFwQ29udGFpbmVyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWFwT2JqZWN0LmdldERpdigpfSxnZXRNYXBPYmplY3RCb3VuZHNGcm9tT0xCb3VuZHM6ZnVuY3Rpb24oYSl7dmFyIGI9bnVsbDtudWxsIT1hJiYoYj10aGlzLnNwaGVyaWNhbE1lcmNhdG9yP3RoaXMuaW52ZXJzZU1lcmNhdG9yKGEuYm90dG9tLGEubGVmdCk6bmV3IE9wZW5MYXllcnMuTG9uTGF0KGEuYm90dG9tLGEubGVmdCksYT10aGlzLnNwaGVyaWNhbE1lcmNhdG9yP3RoaXMuaW52ZXJzZU1lcmNhdG9yKGEudG9wLAphLnJpZ2h0KTpuZXcgT3BlbkxheWVycy5Mb25MYXQoYS50b3AsYS5yaWdodCksYj1uZXcgZ29vZ2xlLm1hcHMuTGF0TG5nQm91bmRzKG5ldyBnb29nbGUubWFwcy5MYXRMbmcoYi5sYXQsYi5sb24pLG5ldyBnb29nbGUubWFwcy5MYXRMbmcoYS5sYXQsYS5sb24pKSk7cmV0dXJuIGJ9LGdldE1hcE9iamVjdExvbkxhdEZyb21NYXBPYmplY3RQaXhlbDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLm1hcC5nZXRTaXplKCksYz10aGlzLmdldExvbmdpdHVkZUZyb21NYXBPYmplY3RMb25MYXQodGhpcy5tYXBPYmplY3QuY2VudGVyKSxkPXRoaXMuZ2V0TGF0aXR1ZGVGcm9tTWFwT2JqZWN0TG9uTGF0KHRoaXMubWFwT2JqZWN0LmNlbnRlciksZT10aGlzLm1hcC5nZXRSZXNvbHV0aW9uKCk7YT1uZXcgT3BlbkxheWVycy5Mb25MYXQoYysoYS54LWIudy8yKSplLGQtKGEueS1iLmgvMikqZSk7dGhpcy53cmFwRGF0ZUxpbmUmJihhPWEud3JhcERhdGVMaW5lKHRoaXMubWF4RXh0ZW50KSk7cmV0dXJuIHRoaXMuZ2V0TWFwT2JqZWN0TG9uTGF0RnJvbUxvbkxhdChhLmxvbiwKYS5sYXQpfSxnZXRNYXBPYmplY3RQaXhlbEZyb21NYXBPYmplY3RMb25MYXQ6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5nZXRMb25naXR1ZGVGcm9tTWFwT2JqZWN0TG9uTGF0KGEpO2E9dGhpcy5nZXRMYXRpdHVkZUZyb21NYXBPYmplY3RMb25MYXQoYSk7dmFyIGM9dGhpcy5tYXAuZ2V0UmVzb2x1dGlvbigpLGQ9dGhpcy5tYXAuZ2V0RXh0ZW50KCk7cmV0dXJuIHRoaXMuZ2V0TWFwT2JqZWN0UGl4ZWxGcm9tWFkoMS9jKihiLWQubGVmdCksMS9jKihkLnRvcC1hKSl9LHNldE1hcE9iamVjdENlbnRlcjpmdW5jdGlvbihhLGIpe2lmKCExPT09dGhpcy5hbmltYXRpb25FbmFibGVkJiZiIT10aGlzLm1hcE9iamVjdC56b29tKXt2YXIgYz10aGlzLmdldE1hcENvbnRhaW5lcigpO2dvb2dsZS5tYXBzLmV2ZW50LmFkZExpc3RlbmVyT25jZSh0aGlzLm1hcE9iamVjdCwiaWRsZSIsZnVuY3Rpb24oKXtjLnN0eWxlLnZpc2liaWxpdHk9IiJ9KTtjLnN0eWxlLnZpc2liaWxpdHk9ImhpZGRlbiJ9dGhpcy5tYXBPYmplY3Quc2V0T3B0aW9ucyh7Y2VudGVyOmEsCnpvb206Yn0pfSxnZXRNYXBPYmplY3Rab29tRnJvbU1hcE9iamVjdEJvdW5kczpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5tYXBPYmplY3QuZ2V0Qm91bmRzWm9vbUxldmVsKGEpfSxnZXRNYXBPYmplY3RMb25MYXRGcm9tTG9uTGF0OmZ1bmN0aW9uKGEsYil7dmFyIGM7dGhpcy5zcGhlcmljYWxNZXJjYXRvcj8oYz10aGlzLmludmVyc2VNZXJjYXRvcihhLGIpLGM9bmV3IGdvb2dsZS5tYXBzLkxhdExuZyhjLmxhdCxjLmxvbikpOmM9bmV3IGdvb2dsZS5tYXBzLkxhdExuZyhiLGEpO3JldHVybiBjfSxnZXRNYXBPYmplY3RQaXhlbEZyb21YWTpmdW5jdGlvbihhLGIpe3JldHVybiBuZXcgZ29vZ2xlLm1hcHMuUG9pbnQoYSxiKX19O09wZW5MYXllcnMuRm9ybWF0LldQU0Rlc2NyaWJlUHJvY2Vzcz1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuRm9ybWF0LlhNTCx7VkVSU0lPTjoiMS4wLjAiLG5hbWVzcGFjZXM6e3dwczoiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC93cHMvMS4wLjAiLG93czoiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9vd3MvMS4xIix4c2k6Imh0dHA6Ly93d3cudzMub3JnLzIwMDEvWE1MU2NoZW1hLWluc3RhbmNlIn0sc2NoZW1hTG9jYXRpb246Imh0dHA6Ly93d3cub3Blbmdpcy5uZXQvd3BzLzEuMC4wIGh0dHA6Ly9zY2hlbWFzLm9wZW5naXMubmV0L3dwcy8xLjAuMC93cHNBbGwueHNkIixkZWZhdWx0UHJlZml4OiJ3cHMiLHJlZ0V4ZXM6e3RyaW1TcGFjZTovXlxzKnxccyokL2cscmVtb3ZlU3BhY2U6L1xzKi9nLHNwbGl0U3BhY2U6L1xzKy8sdHJpbUNvbW1hOi9ccyosXHMqL2d9LHJlYWQ6ZnVuY3Rpb24oYSl7InN0cmluZyI9PXR5cGVvZiBhJiYoYT1PcGVuTGF5ZXJzLkZvcm1hdC5YTUwucHJvdG90eXBlLnJlYWQuYXBwbHkodGhpcywKW2FdKSk7YSYmOT09YS5ub2RlVHlwZSYmKGE9YS5kb2N1bWVudEVsZW1lbnQpO3ZhciBiPXt9O3RoaXMucmVhZE5vZGUoYSxiKTtyZXR1cm4gYn0scmVhZGVyczp7d3BzOntQcm9jZXNzRGVzY3JpcHRpb25zOmZ1bmN0aW9uKGEsYil7Yi5wcm9jZXNzRGVzY3JpcHRpb25zPXt9O3RoaXMucmVhZENoaWxkTm9kZXMoYSxiLnByb2Nlc3NEZXNjcmlwdGlvbnMpfSxQcm9jZXNzRGVzY3JpcHRpb246ZnVuY3Rpb24oYSxiKXt2YXIgYz17cHJvY2Vzc1ZlcnNpb246dGhpcy5nZXRBdHRyaWJ1dGVOUyhhLHRoaXMubmFtZXNwYWNlcy53cHMsInByb2Nlc3NWZXJzaW9uIiksc3RhdHVzU3VwcG9ydGVkOiJ0cnVlIj09PWEuZ2V0QXR0cmlidXRlKCJzdGF0dXNTdXBwb3J0ZWQiKSxzdG9yZVN1cHBvcnRlZDoidHJ1ZSI9PT1hLmdldEF0dHJpYnV0ZSgic3RvcmVTdXBwb3J0ZWQiKX07dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGMpO2JbYy5pZGVudGlmaWVyXT1jfSxEYXRhSW5wdXRzOmZ1bmN0aW9uKGEsCmIpe2IuZGF0YUlucHV0cz1bXTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYi5kYXRhSW5wdXRzKX0sUHJvY2Vzc091dHB1dHM6ZnVuY3Rpb24oYSxiKXtiLnByb2Nlc3NPdXRwdXRzPVtdO3RoaXMucmVhZENoaWxkTm9kZXMoYSxiLnByb2Nlc3NPdXRwdXRzKX0sT3V0cHV0OmZ1bmN0aW9uKGEsYil7dmFyIGM9e307dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGMpO2IucHVzaChjKX0sQ29tcGxleE91dHB1dDpmdW5jdGlvbihhLGIpe2IuY29tcGxleE91dHB1dD17fTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYi5jb21wbGV4T3V0cHV0KX0sTGl0ZXJhbE91dHB1dDpmdW5jdGlvbihhLGIpe2IubGl0ZXJhbE91dHB1dD17fTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYi5saXRlcmFsT3V0cHV0KX0sSW5wdXQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz17bWF4T2NjdXJzOnBhcnNlSW50KGEuZ2V0QXR0cmlidXRlKCJtYXhPY2N1cnMiKSksbWluT2NjdXJzOnBhcnNlSW50KGEuZ2V0QXR0cmlidXRlKCJtaW5PY2N1cnMiKSl9Owp0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYyk7Yi5wdXNoKGMpfSxCb3VuZGluZ0JveERhdGE6ZnVuY3Rpb24oYSxiKXtiLmJvdW5kaW5nQm94RGF0YT17fTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYi5ib3VuZGluZ0JveERhdGEpfSxDUlM6ZnVuY3Rpb24oYSxiKXtiLkNSU3N8fChiLkNSU3M9e30pO2IuQ1JTc1t0aGlzLmdldENoaWxkVmFsdWUoYSldPSEwfSxMaXRlcmFsRGF0YTpmdW5jdGlvbihhLGIpe2IubGl0ZXJhbERhdGE9e307dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGIubGl0ZXJhbERhdGEpfSxDb21wbGV4RGF0YTpmdW5jdGlvbihhLGIpe2IuY29tcGxleERhdGE9e307dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGIuY29tcGxleERhdGEpfSxEZWZhdWx0OmZ1bmN0aW9uKGEsYil7YlsiZGVmYXVsdCJdPXt9O3RoaXMucmVhZENoaWxkTm9kZXMoYSxiWyJkZWZhdWx0Il0pfSxTdXBwb3J0ZWQ6ZnVuY3Rpb24oYSxiKXtiLnN1cHBvcnRlZD17fTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYi5zdXBwb3J0ZWQpfSwKRm9ybWF0OmZ1bmN0aW9uKGEsYil7dmFyIGM9e307dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGMpO2IuZm9ybWF0c3x8KGIuZm9ybWF0cz17fSk7Yi5mb3JtYXRzW2MubWltZVR5cGVdPSEwfSxNaW1lVHlwZTpmdW5jdGlvbihhLGIpe2IubWltZVR5cGU9dGhpcy5nZXRDaGlsZFZhbHVlKGEpfX0sb3dzOk9wZW5MYXllcnMuRm9ybWF0Lk9XU0NvbW1vbi52MV8xXzAucHJvdG90eXBlLnJlYWRlcnMub3dzfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkZvcm1hdC5XUFNEZXNjcmliZVByb2Nlc3MifSk7T3BlbkxheWVycy5Gb3JtYXQuV0tUPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Gb3JtYXQse2luaXRpYWxpemU6ZnVuY3Rpb24oYSl7dGhpcy5yZWdFeGVzPXt0eXBlU3RyOi9eXHMqKFx3KylccypcKFxzKiguKilccypcKVxzKiQvLHNwYWNlczovXHMrLyxwYXJlbkNvbW1hOi9cKVxzKixccypcKC8sZG91YmxlUGFyZW5Db21tYTovXClccypcKVxzKixccypcKFxzKlwoLyx0cmltUGFyZW5zOi9eXHMqXCg/KC4qPylcKT9ccyokL307T3BlbkxheWVycy5Gb3JtYXQucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxbYV0pfSxyZWFkOmZ1bmN0aW9uKGEpe3ZhciBiLGM7YT1hLnJlcGxhY2UoL1tcblxyXS9nLCIgIik7aWYoYz10aGlzLnJlZ0V4ZXMudHlwZVN0ci5leGVjKGEpKWlmKGE9Y1sxXS50b0xvd2VyQ2FzZSgpLGM9Y1syXSx0aGlzLnBhcnNlW2FdJiYoYj10aGlzLnBhcnNlW2FdLmFwcGx5KHRoaXMsW2NdKSksdGhpcy5pbnRlcm5hbFByb2plY3Rpb24mJnRoaXMuZXh0ZXJuYWxQcm9qZWN0aW9uKWlmKGImJgoiT3BlbkxheWVycy5GZWF0dXJlLlZlY3RvciI9PWIuQ0xBU1NfTkFNRSliLmdlb21ldHJ5LnRyYW5zZm9ybSh0aGlzLmV4dGVybmFsUHJvamVjdGlvbix0aGlzLmludGVybmFsUHJvamVjdGlvbik7ZWxzZSBpZihiJiYiZ2VvbWV0cnljb2xsZWN0aW9uIiE9YSYmIm9iamVjdCI9PXR5cGVvZiBiKWZvcihhPTAsYz1iLmxlbmd0aDthPGM7YSsrKWJbYV0uZ2VvbWV0cnkudHJhbnNmb3JtKHRoaXMuZXh0ZXJuYWxQcm9qZWN0aW9uLHRoaXMuaW50ZXJuYWxQcm9qZWN0aW9uKTtyZXR1cm4gYn0sd3JpdGU6ZnVuY3Rpb24oYSl7dmFyIGIsYzthLmNvbnN0cnVjdG9yPT1BcnJheT9jPSEwOihhPVthXSxjPSExKTt2YXIgZD1bXTtjJiZkLnB1c2goIkdFT01FVFJZQ09MTEVDVElPTigiKTtmb3IodmFyIGU9MCxmPWEubGVuZ3RoO2U8ZjsrK2UpYyYmMDxlJiZkLnB1c2goIiwiKSxiPWFbZV0uZ2VvbWV0cnksZC5wdXNoKHRoaXMuZXh0cmFjdEdlb21ldHJ5KGIpKTtjJiZkLnB1c2goIikiKTtyZXR1cm4gZC5qb2luKCIiKX0sCmV4dHJhY3RHZW9tZXRyeTpmdW5jdGlvbihhKXt2YXIgYj1hLkNMQVNTX05BTUUuc3BsaXQoIi4iKVsyXS50b0xvd2VyQ2FzZSgpO2lmKCF0aGlzLmV4dHJhY3RbYl0pcmV0dXJuIG51bGw7dGhpcy5pbnRlcm5hbFByb2plY3Rpb24mJnRoaXMuZXh0ZXJuYWxQcm9qZWN0aW9uJiYoYT1hLmNsb25lKCksYS50cmFuc2Zvcm0odGhpcy5pbnRlcm5hbFByb2plY3Rpb24sdGhpcy5leHRlcm5hbFByb2plY3Rpb24pKTtyZXR1cm4oImNvbGxlY3Rpb24iPT1iPyJHRU9NRVRSWUNPTExFQ1RJT04iOmIudG9VcHBlckNhc2UoKSkrIigiK3RoaXMuZXh0cmFjdFtiXS5hcHBseSh0aGlzLFthXSkrIikifSxleHRyYWN0Ontwb2ludDpmdW5jdGlvbihhKXtyZXR1cm4gYS54KyIgIithLnl9LG11bHRpcG9pbnQ6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPVtdLGM9MCxkPWEuY29tcG9uZW50cy5sZW5ndGg7YzxkOysrYyliLnB1c2goIigiK3RoaXMuZXh0cmFjdC5wb2ludC5hcHBseSh0aGlzLFthLmNvbXBvbmVudHNbY11dKSsKIikiKTtyZXR1cm4gYi5qb2luKCIsIil9LGxpbmVzdHJpbmc6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPVtdLGM9MCxkPWEuY29tcG9uZW50cy5sZW5ndGg7YzxkOysrYyliLnB1c2godGhpcy5leHRyYWN0LnBvaW50LmFwcGx5KHRoaXMsW2EuY29tcG9uZW50c1tjXV0pKTtyZXR1cm4gYi5qb2luKCIsIil9LG11bHRpbGluZXN0cmluZzpmdW5jdGlvbihhKXtmb3IodmFyIGI9W10sYz0wLGQ9YS5jb21wb25lbnRzLmxlbmd0aDtjPGQ7KytjKWIucHVzaCgiKCIrdGhpcy5leHRyYWN0LmxpbmVzdHJpbmcuYXBwbHkodGhpcyxbYS5jb21wb25lbnRzW2NdXSkrIikiKTtyZXR1cm4gYi5qb2luKCIsIil9LHBvbHlnb246ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPVtdLGM9MCxkPWEuY29tcG9uZW50cy5sZW5ndGg7YzxkOysrYyliLnB1c2goIigiK3RoaXMuZXh0cmFjdC5saW5lc3RyaW5nLmFwcGx5KHRoaXMsW2EuY29tcG9uZW50c1tjXV0pKyIpIik7cmV0dXJuIGIuam9pbigiLCIpfSxtdWx0aXBvbHlnb246ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPQpbXSxjPTAsZD1hLmNvbXBvbmVudHMubGVuZ3RoO2M8ZDsrK2MpYi5wdXNoKCIoIit0aGlzLmV4dHJhY3QucG9seWdvbi5hcHBseSh0aGlzLFthLmNvbXBvbmVudHNbY11dKSsiKSIpO3JldHVybiBiLmpvaW4oIiwiKX0sY29sbGVjdGlvbjpmdW5jdGlvbihhKXtmb3IodmFyIGI9W10sYz0wLGQ9YS5jb21wb25lbnRzLmxlbmd0aDtjPGQ7KytjKWIucHVzaCh0aGlzLmV4dHJhY3RHZW9tZXRyeS5hcHBseSh0aGlzLFthLmNvbXBvbmVudHNbY11dKSk7cmV0dXJuIGIuam9pbigiLCIpfX0scGFyc2U6e3BvaW50OmZ1bmN0aW9uKGEpe2E9T3BlbkxheWVycy5TdHJpbmcudHJpbShhKS5zcGxpdCh0aGlzLnJlZ0V4ZXMuc3BhY2VzKTtyZXR1cm4gbmV3IE9wZW5MYXllcnMuRmVhdHVyZS5WZWN0b3IobmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoYVswXSxhWzFdKSl9LG11bHRpcG9pbnQ6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPU9wZW5MYXllcnMuU3RyaW5nLnRyaW0oYSkuc3BsaXQoIiwiKSwKYz1bXSxkPTAsZT1iLmxlbmd0aDtkPGU7KytkKWE9YltkXS5yZXBsYWNlKHRoaXMucmVnRXhlcy50cmltUGFyZW5zLCIkMSIpLGMucHVzaCh0aGlzLnBhcnNlLnBvaW50LmFwcGx5KHRoaXMsW2FdKS5nZW9tZXRyeSk7cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLkZlYXR1cmUuVmVjdG9yKG5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5Lk11bHRpUG9pbnQoYykpfSxsaW5lc3RyaW5nOmZ1bmN0aW9uKGEpe2E9T3BlbkxheWVycy5TdHJpbmcudHJpbShhKS5zcGxpdCgiLCIpO2Zvcih2YXIgYj1bXSxjPTAsZD1hLmxlbmd0aDtjPGQ7KytjKWIucHVzaCh0aGlzLnBhcnNlLnBvaW50LmFwcGx5KHRoaXMsW2FbY11dKS5nZW9tZXRyeSk7cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLkZlYXR1cmUuVmVjdG9yKG5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LkxpbmVTdHJpbmcoYikpfSxtdWx0aWxpbmVzdHJpbmc6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPU9wZW5MYXllcnMuU3RyaW5nLnRyaW0oYSkuc3BsaXQodGhpcy5yZWdFeGVzLnBhcmVuQ29tbWEpLApjPVtdLGQ9MCxlPWIubGVuZ3RoO2Q8ZTsrK2QpYT1iW2RdLnJlcGxhY2UodGhpcy5yZWdFeGVzLnRyaW1QYXJlbnMsIiQxIiksYy5wdXNoKHRoaXMucGFyc2UubGluZXN0cmluZy5hcHBseSh0aGlzLFthXSkuZ2VvbWV0cnkpO3JldHVybiBuZXcgT3BlbkxheWVycy5GZWF0dXJlLlZlY3RvcihuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5NdWx0aUxpbmVTdHJpbmcoYykpfSxwb2x5Z29uOmZ1bmN0aW9uKGEpe3ZhciBiO2E9T3BlbkxheWVycy5TdHJpbmcudHJpbShhKS5zcGxpdCh0aGlzLnJlZ0V4ZXMucGFyZW5Db21tYSk7Zm9yKHZhciBjPVtdLGQ9MCxlPWEubGVuZ3RoO2Q8ZTsrK2QpYj1hW2RdLnJlcGxhY2UodGhpcy5yZWdFeGVzLnRyaW1QYXJlbnMsIiQxIiksYj10aGlzLnBhcnNlLmxpbmVzdHJpbmcuYXBwbHkodGhpcyxbYl0pLmdlb21ldHJ5LGI9bmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuTGluZWFyUmluZyhiLmNvbXBvbmVudHMpLGMucHVzaChiKTtyZXR1cm4gbmV3IE9wZW5MYXllcnMuRmVhdHVyZS5WZWN0b3IobmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9seWdvbihjKSl9LAptdWx0aXBvbHlnb246ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPU9wZW5MYXllcnMuU3RyaW5nLnRyaW0oYSkuc3BsaXQodGhpcy5yZWdFeGVzLmRvdWJsZVBhcmVuQ29tbWEpLGM9W10sZD0wLGU9Yi5sZW5ndGg7ZDxlOysrZClhPWJbZF0ucmVwbGFjZSh0aGlzLnJlZ0V4ZXMudHJpbVBhcmVucywiJDEiKSxjLnB1c2godGhpcy5wYXJzZS5wb2x5Z29uLmFwcGx5KHRoaXMsW2FdKS5nZW9tZXRyeSk7cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLkZlYXR1cmUuVmVjdG9yKG5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5Lk11bHRpUG9seWdvbihjKSl9LGdlb21ldHJ5Y29sbGVjdGlvbjpmdW5jdGlvbihhKXthPWEucmVwbGFjZSgvLFxzKihbQS1aYS16XSkvZywifCQxIik7YT1PcGVuTGF5ZXJzLlN0cmluZy50cmltKGEpLnNwbGl0KCJ8Iik7Zm9yKHZhciBiPVtdLGM9MCxkPWEubGVuZ3RoO2M8ZDsrK2MpYi5wdXNoKE9wZW5MYXllcnMuRm9ybWF0LldLVC5wcm90b3R5cGUucmVhZC5hcHBseSh0aGlzLFthW2NdXSkpOwpyZXR1cm4gYn19LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuRm9ybWF0LldLVCJ9KTtPcGVuTGF5ZXJzLldQU1Byb2Nlc3M9T3BlbkxheWVycy5DbGFzcyh7Y2xpZW50Om51bGwsc2VydmVyOm51bGwsaWRlbnRpZmllcjpudWxsLGRlc2NyaXB0aW9uOm51bGwsbG9jYWxXUFM6Imh0dHA6Ly9nZW9zZXJ2ZXIvd3BzIixmb3JtYXRzOm51bGwsY2hhaW5lZDowLGV4ZWN1dGVDYWxsYmFja3M6bnVsbCxpbml0aWFsaXplOmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuVXRpbC5leHRlbmQodGhpcyxhKTt0aGlzLmV4ZWN1dGVDYWxsYmFja3M9W107dGhpcy5mb3JtYXRzPXsiYXBwbGljYXRpb24vd2t0IjpuZXcgT3BlbkxheWVycy5Gb3JtYXQuV0tULCJhcHBsaWNhdGlvbi9qc29uIjpuZXcgT3BlbkxheWVycy5Gb3JtYXQuR2VvSlNPTn19LGRlc2NyaWJlOmZ1bmN0aW9uKGEpe2E9YXx8e307aWYoIXRoaXMuZGVzY3JpcHRpb24pdGhpcy5jbGllbnQuZGVzY3JpYmVQcm9jZXNzKHRoaXMuc2VydmVyLHRoaXMuaWRlbnRpZmllcixmdW5jdGlvbihiKXt0aGlzLmRlc2NyaXB0aW9ufHx0aGlzLnBhcnNlRGVzY3JpcHRpb24oYik7CmEuY2FsbGJhY2smJmEuY2FsbGJhY2suY2FsbChhLnNjb3BlLHRoaXMuZGVzY3JpcHRpb24pfSx0aGlzKTtlbHNlIGlmKGEuY2FsbGJhY2spe3ZhciBiPXRoaXMuZGVzY3JpcHRpb247d2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKXthLmNhbGxiYWNrLmNhbGwoYS5zY29wZSxiKX0sMCl9fSxjb25maWd1cmU6ZnVuY3Rpb24oYSl7dGhpcy5kZXNjcmliZSh7Y2FsbGJhY2s6ZnVuY3Rpb24oKXt2YXIgYj10aGlzLmRlc2NyaXB0aW9uLGM9YS5pbnB1dHMsZCxlLGY7ZT0wO2ZvcihmPWIuZGF0YUlucHV0cy5sZW5ndGg7ZTxmOysrZSlkPWIuZGF0YUlucHV0c1tlXSx0aGlzLnNldElucHV0RGF0YShkLGNbZC5pZGVudGlmaWVyXSk7YS5jYWxsYmFjayYmYS5jYWxsYmFjay5jYWxsKGEuc2NvcGUpfSxzY29wZTp0aGlzfSk7cmV0dXJuIHRoaXN9LGV4ZWN1dGU6ZnVuY3Rpb24oYSl7dGhpcy5jb25maWd1cmUoe2lucHV0czphLmlucHV0cyxjYWxsYmFjazpmdW5jdGlvbigpe3ZhciBiPXRoaXMsCmM9dGhpcy5nZXRPdXRwdXRJbmRleChiLmRlc2NyaXB0aW9uLnByb2Nlc3NPdXRwdXRzLGEub3V0cHV0KTtiLnNldFJlc3BvbnNlRm9ybSh7b3V0cHV0SW5kZXg6Y30pOyhmdW5jdGlvbiBlKCl7T3BlbkxheWVycy5VdGlsLnJlbW92ZUl0ZW0oYi5leGVjdXRlQ2FsbGJhY2tzLGUpOzAhPT1iLmNoYWluZWQ/Yi5leGVjdXRlQ2FsbGJhY2tzLnB1c2goZSk6T3BlbkxheWVycy5SZXF1ZXN0LlBPU1Qoe3VybDpiLmNsaWVudC5zZXJ2ZXJzW2Iuc2VydmVyXS51cmwsZGF0YToobmV3IE9wZW5MYXllcnMuRm9ybWF0LldQU0V4ZWN1dGUpLndyaXRlKGIuZGVzY3JpcHRpb24pLHN1Y2Nlc3M6ZnVuY3Rpb24oZSl7dmFyIGc9Yi5maW5kTWltZVR5cGUoYi5kZXNjcmlwdGlvbi5wcm9jZXNzT3V0cHV0c1tjXS5jb21wbGV4T3V0cHV0LnN1cHBvcnRlZC5mb3JtYXRzKTtlPWIuZm9ybWF0c1tnXS5yZWFkKGUucmVzcG9uc2VUZXh0KTtlIGluc3RhbmNlb2YgT3BlbkxheWVycy5GZWF0dXJlLlZlY3RvciYmCihlPVtlXSk7YS5zdWNjZXNzJiYoZz17fSxnW2Eub3V0cHV0fHwicmVzdWx0Il09ZSxhLnN1Y2Nlc3MuY2FsbChhLnNjb3BlLGcpKX0sc2NvcGU6Yn0pfSkoKX0sc2NvcGU6dGhpc30pfSxvdXRwdXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLldQU1Byb2Nlc3MuQ2hhaW5MaW5rKHtwcm9jZXNzOnRoaXMsb3V0cHV0OmF9KX0scGFyc2VEZXNjcmlwdGlvbjpmdW5jdGlvbihhKXthPXRoaXMuY2xpZW50LnNlcnZlcnNbdGhpcy5zZXJ2ZXJdO3RoaXMuZGVzY3JpcHRpb249KG5ldyBPcGVuTGF5ZXJzLkZvcm1hdC5XUFNEZXNjcmliZVByb2Nlc3MpLnJlYWQoYS5wcm9jZXNzRGVzY3JpcHRpb25bdGhpcy5pZGVudGlmaWVyXSkucHJvY2Vzc0Rlc2NyaXB0aW9uc1t0aGlzLmlkZW50aWZpZXJdfSxzZXRJbnB1dERhdGE6ZnVuY3Rpb24oYSxiKXtkZWxldGUgYS5kYXRhO2RlbGV0ZSBhLnJlZmVyZW5jZTtpZihiIGluc3RhbmNlb2YgT3BlbkxheWVycy5XUFNQcm9jZXNzLkNoYWluTGluaykrK3RoaXMuY2hhaW5lZCwKYS5yZWZlcmVuY2U9e21ldGhvZDoiUE9TVCIsaHJlZjpiLnByb2Nlc3Muc2VydmVyPT09dGhpcy5zZXJ2ZXI/dGhpcy5sb2NhbFdQUzp0aGlzLmNsaWVudC5zZXJ2ZXJzW2IucHJvY2Vzcy5zZXJ2ZXJdLnVybH0sYi5wcm9jZXNzLmRlc2NyaWJlKHtjYWxsYmFjazpmdW5jdGlvbigpey0tdGhpcy5jaGFpbmVkO3RoaXMuY2hhaW5Qcm9jZXNzKGEsYil9LHNjb3BlOnRoaXN9KTtlbHNle2EuZGF0YT17fTt2YXIgYz1hLmNvbXBsZXhEYXRhO2M/KGM9dGhpcy5maW5kTWltZVR5cGUoYy5zdXBwb3J0ZWQuZm9ybWF0cyksYS5kYXRhLmNvbXBsZXhEYXRhPXttaW1lVHlwZTpjLHZhbHVlOnRoaXMuZm9ybWF0c1tjXS53cml0ZSh0aGlzLnRvRmVhdHVyZXMoYikpfSk6YS5kYXRhLmxpdGVyYWxEYXRhPXt2YWx1ZTpifX19LHNldFJlc3BvbnNlRm9ybTpmdW5jdGlvbihhKXthPWF8fHt9O3ZhciBiPXRoaXMuZGVzY3JpcHRpb24ucHJvY2Vzc091dHB1dHNbYS5vdXRwdXRJbmRleHx8MF07dGhpcy5kZXNjcmlwdGlvbi5yZXNwb25zZUZvcm09CntyYXdEYXRhT3V0cHV0OntpZGVudGlmaWVyOmIuaWRlbnRpZmllcixtaW1lVHlwZTp0aGlzLmZpbmRNaW1lVHlwZShiLmNvbXBsZXhPdXRwdXQuc3VwcG9ydGVkLmZvcm1hdHMsYS5zdXBwb3J0ZWRGb3JtYXRzKX19fSxnZXRPdXRwdXRJbmRleDpmdW5jdGlvbihhLGIpe3ZhciBjO2lmKGIpZm9yKHZhciBkPWEubGVuZ3RoLTE7MDw9ZDstLWQpe2lmKGFbZF0uaWRlbnRpZmllcj09PWIpe2M9ZDticmVha319ZWxzZSBjPTA7cmV0dXJuIGN9LGNoYWluUHJvY2VzczpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuZ2V0T3V0cHV0SW5kZXgoYi5wcm9jZXNzLmRlc2NyaXB0aW9uLnByb2Nlc3NPdXRwdXRzLGIub3V0cHV0KTthLnJlZmVyZW5jZS5taW1lVHlwZT10aGlzLmZpbmRNaW1lVHlwZShhLmNvbXBsZXhEYXRhLnN1cHBvcnRlZC5mb3JtYXRzLGIucHJvY2Vzcy5kZXNjcmlwdGlvbi5wcm9jZXNzT3V0cHV0c1tjXS5jb21wbGV4T3V0cHV0LnN1cHBvcnRlZC5mb3JtYXRzKTt2YXIgZD17fTsKZFthLnJlZmVyZW5jZS5taW1lVHlwZV09ITA7Yi5wcm9jZXNzLnNldFJlc3BvbnNlRm9ybSh7b3V0cHV0SW5kZXg6YyxzdXBwb3J0ZWRGb3JtYXRzOmR9KTtmb3IoYS5yZWZlcmVuY2UuYm9keT1iLnByb2Nlc3MuZGVzY3JpcHRpb247MDx0aGlzLmV4ZWN1dGVDYWxsYmFja3MubGVuZ3RoOyl0aGlzLmV4ZWN1dGVDYWxsYmFja3NbMF0oKX0sdG9GZWF0dXJlczpmdW5jdGlvbihhKXt2YXIgYj1PcGVuTGF5ZXJzLlV0aWwuaXNBcnJheShhKTtifHwoYT1bYV0pO2Zvcih2YXIgYz1BcnJheShhLmxlbmd0aCksZCxlPTAsZj1hLmxlbmd0aDtlPGY7KytlKWQ9YVtlXSxjW2VdPWQgaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLkZlYXR1cmUuVmVjdG9yP2Q6bmV3IE9wZW5MYXllcnMuRmVhdHVyZS5WZWN0b3IoZCk7cmV0dXJuIGI/YzpjWzBdfSxmaW5kTWltZVR5cGU6ZnVuY3Rpb24oYSxiKXtiPWJ8fHRoaXMuZm9ybWF0cztmb3IodmFyIGMgaW4gYSlpZihjIGluIGIpcmV0dXJuIGN9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuV1BTUHJvY2VzcyJ9KTsKT3BlbkxheWVycy5XUFNQcm9jZXNzLkNoYWluTGluaz1PcGVuTGF5ZXJzLkNsYXNzKHtwcm9jZXNzOm51bGwsb3V0cHV0Om51bGwsaW5pdGlhbGl6ZTpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHRoaXMsYSl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuV1BTUHJvY2Vzcy5DaGFpbkxpbmsifSk7T3BlbkxheWVycy5XUFNDbGllbnQ9T3BlbkxheWVycy5DbGFzcyh7c2VydmVyczpudWxsLHZlcnNpb246IjEuMC4wIixsYXp5OiExLGV2ZW50czpudWxsLGluaXRpYWxpemU6ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5VdGlsLmV4dGVuZCh0aGlzLGEpO3RoaXMuZXZlbnRzPW5ldyBPcGVuTGF5ZXJzLkV2ZW50cyh0aGlzKTt0aGlzLnNlcnZlcnM9e307Zm9yKHZhciBiIGluIGEuc2VydmVycyl0aGlzLnNlcnZlcnNbYl09InN0cmluZyI9PXR5cGVvZiBhLnNlcnZlcnNbYl0/e3VybDphLnNlcnZlcnNbYl0sdmVyc2lvbjp0aGlzLnZlcnNpb24scHJvY2Vzc0Rlc2NyaXB0aW9uOnt9fTphLnNlcnZlcnNbYl19LGV4ZWN1dGU6ZnVuY3Rpb24oYSl7dGhpcy5nZXRQcm9jZXNzKGEuc2VydmVyLGEucHJvY2VzcykuZXhlY3V0ZSh7aW5wdXRzOmEuaW5wdXRzLHN1Y2Nlc3M6YS5zdWNjZXNzLHNjb3BlOmEuc2NvcGV9KX0sZ2V0UHJvY2VzczpmdW5jdGlvbihhLGIpe3ZhciBjPW5ldyBPcGVuTGF5ZXJzLldQU1Byb2Nlc3Moe2NsaWVudDp0aGlzLApzZXJ2ZXI6YSxpZGVudGlmaWVyOmJ9KTt0aGlzLmxhenl8fGMuZGVzY3JpYmUoKTtyZXR1cm4gY30sZGVzY3JpYmVQcm9jZXNzOmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPXRoaXMuc2VydmVyc1thXTtlLnByb2Nlc3NEZXNjcmlwdGlvbltiXT93aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpe2MuY2FsbChkLGUucHJvY2Vzc0Rlc2NyaXB0aW9uW2JdKX0sMCk6YiBpbiBlLnByb2Nlc3NEZXNjcmlwdGlvbj90aGlzLmV2ZW50cy5yZWdpc3RlcigiZGVzY3JpYmVwcm9jZXNzIix0aGlzLGZ1bmN0aW9uIGcoYSl7YS5pZGVudGlmaWVyPT09YiYmKHRoaXMuZXZlbnRzLnVucmVnaXN0ZXIoImRlc2NyaWJlcHJvY2VzcyIsdGhpcyxnKSxjLmNhbGwoZCxhLnJhdykpfSk6KGUucHJvY2Vzc0Rlc2NyaXB0aW9uW2JdPW51bGwsT3BlbkxheWVycy5SZXF1ZXN0LkdFVCh7dXJsOmUudXJsLHBhcmFtczp7U0VSVklDRToiV1BTIixWRVJTSU9OOmUudmVyc2lvbixSRVFVRVNUOiJEZXNjcmliZVByb2Nlc3MiLApJREVOVElGSUVSOmJ9LHN1Y2Nlc3M6ZnVuY3Rpb24oYSl7ZS5wcm9jZXNzRGVzY3JpcHRpb25bYl09YS5yZXNwb25zZVRleHQ7dGhpcy5ldmVudHMudHJpZ2dlckV2ZW50KCJkZXNjcmliZXByb2Nlc3MiLHtpZGVudGlmaWVyOmIscmF3OmEucmVzcG9uc2VUZXh0fSl9LHNjb3BlOnRoaXN9KSl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmV2ZW50cy5kZXN0cm95KCk7dGhpcy5zZXJ2ZXJzPXRoaXMuZXZlbnRzPW51bGx9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuV1BTQ2xpZW50In0pO09wZW5MYXllcnMuRm9ybWF0LkNTV0dldFJlY29yZHMudjJfMF8yPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Gb3JtYXQuWE1MLHtuYW1lc3BhY2VzOntjc3c6Imh0dHA6Ly93d3cub3Blbmdpcy5uZXQvY2F0L2Nzdy8yLjAuMiIsZGM6Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIixkY3Q6Imh0dHA6Ly9wdXJsLm9yZy9kYy90ZXJtcy8iLGdtZDoiaHR0cDovL3d3dy5pc290YzIxMS5vcmcvMjAwNS9nbWQiLGdlb25ldDoiaHR0cDovL3d3dy5mYW8ub3JnL2dlb25ldHdvcmsiLG9nYzoiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9vZ2MiLG93czoiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9vd3MiLHhsaW5rOiJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIix4c2k6Imh0dHA6Ly93d3cudzMub3JnLzIwMDEvWE1MU2NoZW1hLWluc3RhbmNlIn0sZGVmYXVsdFByZWZpeDoiY3N3Iix2ZXJzaW9uOiIyLjAuMiIsc2NoZW1hTG9jYXRpb246Imh0dHA6Ly93d3cub3Blbmdpcy5uZXQvY2F0L2Nzdy8yLjAuMiBodHRwOi8vc2NoZW1hcy5vcGVuZ2lzLm5ldC9jc3cvMi4wLjIvQ1NXLWRpc2NvdmVyeS54c2QiLApyZXF1ZXN0SWQ6bnVsbCxyZXN1bHRUeXBlOm51bGwsb3V0cHV0Rm9ybWF0Om51bGwsb3V0cHV0U2NoZW1hOm51bGwsc3RhcnRQb3NpdGlvbjpudWxsLG1heFJlY29yZHM6bnVsbCxEaXN0cmlidXRlZFNlYXJjaDpudWxsLFJlc3BvbnNlSGFuZGxlcjpudWxsLFF1ZXJ5Om51bGwscmVnRXhlczp7dHJpbVNwYWNlOi9eXHMqfFxzKiQvZyxyZW1vdmVTcGFjZTovXHMqL2csc3BsaXRTcGFjZTovXHMrLyx0cmltQ29tbWE6L1xzKixccyovZ30saW5pdGlhbGl6ZTpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLkZvcm1hdC5YTUwucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxbYV0pfSxyZWFkOmZ1bmN0aW9uKGEpeyJzdHJpbmciPT10eXBlb2YgYSYmKGE9T3BlbkxheWVycy5Gb3JtYXQuWE1MLnByb3RvdHlwZS5yZWFkLmFwcGx5KHRoaXMsW2FdKSk7YSYmOT09YS5ub2RlVHlwZSYmKGE9YS5kb2N1bWVudEVsZW1lbnQpO3ZhciBiPXt9O3RoaXMucmVhZE5vZGUoYSxiKTtyZXR1cm4gYn0sCnJlYWRlcnM6e2Nzdzp7R2V0UmVjb3Jkc1Jlc3BvbnNlOmZ1bmN0aW9uKGEsYil7Yi5yZWNvcmRzPVtdO3RoaXMucmVhZENoaWxkTm9kZXMoYSxiKTt2YXIgYz10aGlzLmdldEF0dHJpYnV0ZU5TKGEsIiIsInZlcnNpb24iKTsiIiE9YyYmKGIudmVyc2lvbj1jKX0sUmVxdWVzdElkOmZ1bmN0aW9uKGEsYil7Yi5SZXF1ZXN0SWQ9dGhpcy5nZXRDaGlsZFZhbHVlKGEpfSxTZWFyY2hTdGF0dXM6ZnVuY3Rpb24oYSxiKXtiLlNlYXJjaFN0YXR1cz17fTt2YXIgYz10aGlzLmdldEF0dHJpYnV0ZU5TKGEsIiIsInRpbWVzdGFtcCIpOyIiIT1jJiYoYi5TZWFyY2hTdGF0dXMudGltZXN0YW1wPWMpfSxTZWFyY2hSZXN1bHRzOmZ1bmN0aW9uKGEsYil7dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGIpO2Zvcih2YXIgYz1hLmF0dHJpYnV0ZXMsZD17fSxlPTAsZj1jLmxlbmd0aDtlPGY7KytlKWRbY1tlXS5uYW1lXT0ibnVtYmVyT2ZSZWNvcmRzTWF0Y2hlZCI9PWNbZV0ubmFtZXx8Im51bWJlck9mUmVjb3Jkc1JldHVybmVkIj09CmNbZV0ubmFtZXx8Im5leHRSZWNvcmQiPT1jW2VdLm5hbWU/cGFyc2VJbnQoY1tlXS5ub2RlVmFsdWUpOmNbZV0ubm9kZVZhbHVlO2IuU2VhcmNoUmVzdWx0cz1kfSxTdW1tYXJ5UmVjb3JkOmZ1bmN0aW9uKGEsYil7dmFyIGM9e3R5cGU6IlN1bW1hcnlSZWNvcmQifTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYyk7Yi5yZWNvcmRzLnB1c2goYyl9LEJyaWVmUmVjb3JkOmZ1bmN0aW9uKGEsYil7dmFyIGM9e3R5cGU6IkJyaWVmUmVjb3JkIn07dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGMpO2IucmVjb3Jkcy5wdXNoKGMpfSxEQ01JUmVjb3JkOmZ1bmN0aW9uKGEsYil7dmFyIGM9e3R5cGU6IkRDTUlSZWNvcmQifTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYyk7Yi5yZWNvcmRzLnB1c2goYyl9LFJlY29yZDpmdW5jdGlvbihhLGIpe3ZhciBjPXt0eXBlOiJSZWNvcmQifTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYyk7Yi5yZWNvcmRzLnB1c2goYyl9LCIqIjpmdW5jdGlvbihhLGIpe3ZhciBjPWEubG9jYWxOYW1lfHwKYS5ub2RlTmFtZS5zcGxpdCgiOiIpLnBvcCgpO2JbY109dGhpcy5nZXRDaGlsZFZhbHVlKGEpfX0sZ2VvbmV0OntpbmZvOmZ1bmN0aW9uKGEsYil7dmFyIGM9e307dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGMpO2IuZ25pbmZvPWN9fSxkYzp7IioiOmZ1bmN0aW9uKGEsYil7dmFyIGM9YS5sb2NhbE5hbWV8fGEubm9kZU5hbWUuc3BsaXQoIjoiKS5wb3AoKTtPcGVuTGF5ZXJzLlV0aWwuaXNBcnJheShiW2NdKXx8KGJbY109W10pO2Zvcih2YXIgZD17fSxlPWEuYXR0cmlidXRlcyxmPTAsZz1lLmxlbmd0aDtmPGc7KytmKWRbZVtmXS5uYW1lXT1lW2ZdLm5vZGVWYWx1ZTtkLnZhbHVlPXRoaXMuZ2V0Q2hpbGRWYWx1ZShhKTsiIiE9ZC52YWx1ZSYmYltjXS5wdXNoKGQpfX0sZGN0OnsiKiI6ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLmxvY2FsTmFtZXx8YS5ub2RlTmFtZS5zcGxpdCgiOiIpLnBvcCgpO09wZW5MYXllcnMuVXRpbC5pc0FycmF5KGJbY10pfHwoYltjXT1bXSk7YltjXS5wdXNoKHRoaXMuZ2V0Q2hpbGRWYWx1ZShhKSl9fSwKb3dzOk9wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKHtCb3VuZGluZ0JveDpmdW5jdGlvbihhLGIpe2IuYm91bmRzJiYoYi5Cb3VuZGluZ0JveD1be2NyczpiLnByb2plY3Rpb24sdmFsdWU6W2IuYm91bmRzLmxlZnQsYi5ib3VuZHMuYm90dG9tLGIuYm91bmRzLnJpZ2h0LGIuYm91bmRzLnRvcF19XSxkZWxldGUgYi5wcm9qZWN0aW9uLGRlbGV0ZSBiLmJvdW5kcyk7T3BlbkxheWVycy5Gb3JtYXQuT1dTQ29tbW9uLnYxXzBfMC5wcm90b3R5cGUucmVhZGVycy5vd3MuQm91bmRpbmdCb3guYXBwbHkodGhpcyxhcmd1bWVudHMpfX0sT3BlbkxheWVycy5Gb3JtYXQuT1dTQ29tbW9uLnYxXzBfMC5wcm90b3R5cGUucmVhZGVycy5vd3MpfSx3cml0ZTpmdW5jdGlvbihhKXthPXRoaXMud3JpdGVOb2RlKCJjc3c6R2V0UmVjb3JkcyIsYSk7YS5zZXRBdHRyaWJ1dGUoInhtbG5zOmdtZCIsdGhpcy5uYW1lc3BhY2VzLmdtZCk7cmV0dXJuIE9wZW5MYXllcnMuRm9ybWF0LlhNTC5wcm90b3R5cGUud3JpdGUuYXBwbHkodGhpcywKW2FdKX0sd3JpdGVyczp7Y3N3OntHZXRSZWNvcmRzOmZ1bmN0aW9uKGEpe2F8fChhPXt9KTt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoImNzdzpHZXRSZWNvcmRzIix7YXR0cmlidXRlczp7c2VydmljZToiQ1NXIix2ZXJzaW9uOnRoaXMudmVyc2lvbixyZXF1ZXN0SWQ6YS5yZXF1ZXN0SWR8fHRoaXMucmVxdWVzdElkLHJlc3VsdFR5cGU6YS5yZXN1bHRUeXBlfHx0aGlzLnJlc3VsdFR5cGUsb3V0cHV0Rm9ybWF0OmEub3V0cHV0Rm9ybWF0fHx0aGlzLm91dHB1dEZvcm1hdCxvdXRwdXRTY2hlbWE6YS5vdXRwdXRTY2hlbWF8fHRoaXMub3V0cHV0U2NoZW1hLHN0YXJ0UG9zaXRpb246YS5zdGFydFBvc2l0aW9ufHx0aGlzLnN0YXJ0UG9zaXRpb24sbWF4UmVjb3JkczphLm1heFJlY29yZHN8fHRoaXMubWF4UmVjb3Jkc319KTsoYS5EaXN0cmlidXRlZFNlYXJjaHx8dGhpcy5EaXN0cmlidXRlZFNlYXJjaCkmJnRoaXMud3JpdGVOb2RlKCJjc3c6RGlzdHJpYnV0ZWRTZWFyY2giLAphLkRpc3RyaWJ1dGVkU2VhcmNofHx0aGlzLkRpc3RyaWJ1dGVkU2VhcmNoLGIpO3ZhciBjPWEuUmVzcG9uc2VIYW5kbGVyfHx0aGlzLlJlc3BvbnNlSGFuZGxlcjtpZihPcGVuTGF5ZXJzLlV0aWwuaXNBcnJheShjKSYmMDxjLmxlbmd0aClmb3IodmFyIGQ9MCxlPWMubGVuZ3RoO2Q8ZTtkKyspdGhpcy53cml0ZU5vZGUoImNzdzpSZXNwb25zZUhhbmRsZXIiLGNbZF0sYik7dGhpcy53cml0ZU5vZGUoIlF1ZXJ5IixhLlF1ZXJ5fHx0aGlzLlF1ZXJ5LGIpO3JldHVybiBifSxEaXN0cmlidXRlZFNlYXJjaDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJjc3c6RGlzdHJpYnV0ZWRTZWFyY2giLHthdHRyaWJ1dGVzOntob3BDb3VudDphLmhvcENvdW50fX0pfSxSZXNwb25zZUhhbmRsZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygiY3N3OlJlc3BvbnNlSGFuZGxlciIse3ZhbHVlOmEudmFsdWV9KX0sUXVlcnk6ZnVuY3Rpb24oYSl7YXx8CihhPXt9KTt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoImNzdzpRdWVyeSIse2F0dHJpYnV0ZXM6e3R5cGVOYW1lczphLnR5cGVOYW1lc3x8ImNzdzpSZWNvcmQifX0pLGM9YS5FbGVtZW50TmFtZTtpZihPcGVuTGF5ZXJzLlV0aWwuaXNBcnJheShjKSYmMDxjLmxlbmd0aClmb3IodmFyIGQ9MCxlPWMubGVuZ3RoO2Q8ZTtkKyspdGhpcy53cml0ZU5vZGUoImNzdzpFbGVtZW50TmFtZSIsY1tkXSxiKTtlbHNlIHRoaXMud3JpdGVOb2RlKCJjc3c6RWxlbWVudFNldE5hbWUiLGEuRWxlbWVudFNldE5hbWV8fHt2YWx1ZToic3VtbWFyeSJ9LGIpO2EuQ29uc3RyYWludCYmdGhpcy53cml0ZU5vZGUoImNzdzpDb25zdHJhaW50IixhLkNvbnN0cmFpbnQsYik7YS5Tb3J0QnkmJnRoaXMud3JpdGVOb2RlKCJvZ2M6U29ydEJ5IixhLlNvcnRCeSxiKTtyZXR1cm4gYn0sRWxlbWVudE5hbWU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygiY3N3OkVsZW1lbnROYW1lIiwKe3ZhbHVlOmEudmFsdWV9KX0sRWxlbWVudFNldE5hbWU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygiY3N3OkVsZW1lbnRTZXROYW1lIix7YXR0cmlidXRlczp7dHlwZU5hbWVzOmEudHlwZU5hbWVzfSx2YWx1ZTphLnZhbHVlfSl9LENvbnN0cmFpbnQ6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJjc3c6Q29uc3RyYWludCIse2F0dHJpYnV0ZXM6e3ZlcnNpb246YS52ZXJzaW9ufX0pO2lmKGEuRmlsdGVyKXt2YXIgYz1uZXcgT3BlbkxheWVycy5Gb3JtYXQuRmlsdGVyKHt2ZXJzaW9uOmEudmVyc2lvbn0pO2IuYXBwZW5kQ2hpbGQoYy53cml0ZShhLkZpbHRlcikpfWVsc2UgYS5DcWxUZXh0JiYoYT10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoIkNxbFRleHQiLHt2YWx1ZTphLkNxbFRleHQudmFsdWV9KSxiLmFwcGVuZENoaWxkKGEpKTtyZXR1cm4gYn19LG9nYzpPcGVuTGF5ZXJzLkZvcm1hdC5GaWx0ZXIudjFfMV8wLnByb3RvdHlwZS53cml0ZXJzLm9nY30sCkNMQVNTX05BTUU6Ik9wZW5MYXllcnMuRm9ybWF0LkNTV0dldFJlY29yZHMudjJfMF8yIn0pOy8qCiBBcGFjaGUgMiAKCiBDb250YWlucyBwb3J0aW9ucyBvZiBSaWNvIDxodHRwOi8vb3BlbnJpY28ub3JnLz4KCiBDb3B5cmlnaHQgMjAwNSBTYWJyZSBBaXJsaW5lIFNvbHV0aW9ucyAgCgogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7IHlvdQogbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuIFlvdQogbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wICAKCiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yCiBpbXBsaWVkLiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcKIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4gCiovCk9wZW5MYXllcnMuTWFya2VyLkJveD1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuTWFya2VyLHtib3VuZHM6bnVsbCxkaXY6bnVsbCxpbml0aWFsaXplOmZ1bmN0aW9uKGEsYixjKXt0aGlzLmJvdW5kcz1hO3RoaXMuZGl2PU9wZW5MYXllcnMuVXRpbC5jcmVhdGVEaXYoKTt0aGlzLmRpdi5zdHlsZS5vdmVyZmxvdz0iaGlkZGVuIjt0aGlzLmV2ZW50cz1uZXcgT3BlbkxheWVycy5FdmVudHModGhpcyx0aGlzLmRpdik7dGhpcy5zZXRCb3JkZXIoYixjKX0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuZGl2PXRoaXMuYm91bmRzPW51bGw7T3BlbkxheWVycy5NYXJrZXIucHJvdG90eXBlLmRlc3Ryb3kuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxzZXRCb3JkZXI6ZnVuY3Rpb24oYSxiKXthfHwoYT0icmVkIik7Ynx8KGI9Mik7dGhpcy5kaXYuc3R5bGUuYm9yZGVyPWIrInB4IHNvbGlkICIrYX0sZHJhdzpmdW5jdGlvbihhLGIpe09wZW5MYXllcnMuVXRpbC5tb2RpZnlET01FbGVtZW50KHRoaXMuZGl2LApudWxsLGEsYik7cmV0dXJuIHRoaXMuZGl2fSxvblNjcmVlbjpmdW5jdGlvbigpe3ZhciBhPSExO3RoaXMubWFwJiYoYT10aGlzLm1hcC5nZXRFeHRlbnQoKS5jb250YWluc0JvdW5kcyh0aGlzLmJvdW5kcywhMCwhMCkpO3JldHVybiBhfSxkaXNwbGF5OmZ1bmN0aW9uKGEpe3RoaXMuZGl2LnN0eWxlLmRpc3BsYXk9YT8iIjoibm9uZSJ9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuTWFya2VyLkJveCJ9KTtPcGVuTGF5ZXJzLkZvcm1hdC5UZXh0PU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Gb3JtYXQse2RlZmF1bHRTdHlsZTpudWxsLGV4dHJhY3RTdHlsZXM6ITAsaW5pdGlhbGl6ZTpmdW5jdGlvbihhKXthPWF8fHt9OyExIT09YS5leHRyYWN0U3R5bGVzJiYoYS5kZWZhdWx0U3R5bGU9e2V4dGVybmFsR3JhcGhpYzpPcGVuTGF5ZXJzLlV0aWwuZ2V0SW1hZ2VMb2NhdGlvbigibWFya2VyLnBuZyIpLGdyYXBoaWNXaWR0aDoyMSxncmFwaGljSGVpZ2h0OjI1LGdyYXBoaWNYT2Zmc2V0Oi0xMC41LGdyYXBoaWNZT2Zmc2V0Oi0xMi41fSk7T3BlbkxheWVycy5Gb3JtYXQucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxbYV0pfSxyZWFkOmZ1bmN0aW9uKGEpe2E9YS5zcGxpdCgiXG4iKTtmb3IodmFyIGIsYz1bXSxkPTA7ZDxhLmxlbmd0aC0xO2QrKyl7dmFyIGU9YVtkXS5yZXBsYWNlKC9eXHMqLywiIikucmVwbGFjZSgvXHMqJC8sIiIpO2lmKCIjIiE9ZS5jaGFyQXQoMCkpaWYoYil7Zm9yKHZhciBlPQplLnNwbGl0KCJcdCIpLGY9bmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoMCwwKSxnPXt9LGg9dGhpcy5kZWZhdWx0U3R5bGU/T3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoe30sdGhpcy5kZWZhdWx0U3R5bGUpOm51bGwsaz0hMSxsPTA7bDxlLmxlbmd0aDtsKyspaWYoZVtsXSlpZigicG9pbnQiPT1iW2xdKWs9ZVtsXS5zcGxpdCgiLCIpLGYueT1wYXJzZUZsb2F0KGtbMF0pLGYueD1wYXJzZUZsb2F0KGtbMV0pLGs9ITA7ZWxzZSBpZigibGF0Ij09YltsXSlmLnk9cGFyc2VGbG9hdChlW2xdKSxrPSEwO2Vsc2UgaWYoImxvbiI9PWJbbF0pZi54PXBhcnNlRmxvYXQoZVtsXSksaz0hMDtlbHNlIGlmKCJ0aXRsZSI9PWJbbF0pZy50aXRsZT1lW2xdO2Vsc2UgaWYoImltYWdlIj09YltsXXx8Imljb24iPT1iW2xdJiZoKWguZXh0ZXJuYWxHcmFwaGljPWVbbF07ZWxzZSBpZigiaWNvblNpemUiPT1iW2xdJiZoKXt2YXIgbT1lW2xdLnNwbGl0KCIsIik7aC5ncmFwaGljV2lkdGg9CnBhcnNlRmxvYXQobVswXSk7aC5ncmFwaGljSGVpZ2h0PXBhcnNlRmxvYXQobVsxXSl9ZWxzZSJpY29uT2Zmc2V0Ij09YltsXSYmaD8obT1lW2xdLnNwbGl0KCIsIiksaC5ncmFwaGljWE9mZnNldD1wYXJzZUZsb2F0KG1bMF0pLGguZ3JhcGhpY1lPZmZzZXQ9cGFyc2VGbG9hdChtWzFdKSk6ImRlc2NyaXB0aW9uIj09YltsXT9nLmRlc2NyaXB0aW9uPWVbbF06Im92ZXJmbG93Ij09YltsXT9nLm92ZXJmbG93PWVbbF06Z1tiW2xdXT1lW2xdO2smJih0aGlzLmludGVybmFsUHJvamVjdGlvbiYmdGhpcy5leHRlcm5hbFByb2plY3Rpb24mJmYudHJhbnNmb3JtKHRoaXMuZXh0ZXJuYWxQcm9qZWN0aW9uLHRoaXMuaW50ZXJuYWxQcm9qZWN0aW9uKSxlPW5ldyBPcGVuTGF5ZXJzLkZlYXR1cmUuVmVjdG9yKGYsZyxoKSxjLnB1c2goZSkpfWVsc2UgYj1lLnNwbGl0KCJcdCIpfXJldHVybiBjfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkZvcm1hdC5UZXh0In0pO09wZW5MYXllcnMuTGF5ZXIuVGV4dD1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuTGF5ZXIuTWFya2Vycyx7bG9jYXRpb246bnVsbCxmZWF0dXJlczpudWxsLGZvcm1hdE9wdGlvbnM6bnVsbCxzZWxlY3RlZEZlYXR1cmU6bnVsbCxpbml0aWFsaXplOmZ1bmN0aW9uKGEsYil7T3BlbkxheWVycy5MYXllci5NYXJrZXJzLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLmZlYXR1cmVzPVtdfSxkZXN0cm95OmZ1bmN0aW9uKCl7T3BlbkxheWVycy5MYXllci5NYXJrZXJzLnByb3RvdHlwZS5kZXN0cm95LmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLmNsZWFyRmVhdHVyZXMoKTt0aGlzLmZlYXR1cmVzPW51bGx9LGxvYWRUZXh0OmZ1bmN0aW9uKCl7dGhpcy5sb2FkZWR8fG51bGw9PXRoaXMubG9jYXRpb258fCh0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoImxvYWRzdGFydCIpLE9wZW5MYXllcnMuUmVxdWVzdC5HRVQoe3VybDp0aGlzLmxvY2F0aW9uLApzdWNjZXNzOnRoaXMucGFyc2VEYXRhLGZhaWx1cmU6ZnVuY3Rpb24oYSl7dGhpcy5ldmVudHMudHJpZ2dlckV2ZW50KCJsb2FkZW5kIil9LHNjb3BlOnRoaXN9KSx0aGlzLmxvYWRlZD0hMCl9LG1vdmVUbzpmdW5jdGlvbihhLGIsYyl7T3BlbkxheWVycy5MYXllci5NYXJrZXJzLnByb3RvdHlwZS5tb3ZlVG8uYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMudmlzaWJpbGl0eSYmIXRoaXMubG9hZGVkJiZ0aGlzLmxvYWRUZXh0KCl9LHBhcnNlRGF0YTpmdW5jdGlvbihhKXthPWEucmVzcG9uc2VUZXh0O3ZhciBiPXt9O09wZW5MYXllcnMuVXRpbC5leHRlbmQoYix0aGlzLmZvcm1hdE9wdGlvbnMpO3RoaXMubWFwJiYhdGhpcy5wcm9qZWN0aW9uLmVxdWFscyh0aGlzLm1hcC5nZXRQcm9qZWN0aW9uT2JqZWN0KCkpJiYoYi5leHRlcm5hbFByb2plY3Rpb249dGhpcy5wcm9qZWN0aW9uLGIuaW50ZXJuYWxQcm9qZWN0aW9uPXRoaXMubWFwLmdldFByb2plY3Rpb25PYmplY3QoKSk7YT0obmV3IE9wZW5MYXllcnMuRm9ybWF0LlRleHQoYikpLnJlYWQoYSk7CmZvcih2YXIgYj0wLGM9YS5sZW5ndGg7YjxjO2IrKyl7dmFyIGQ9e30sZT1hW2JdLGYsZyxoO2Y9bmV3IE9wZW5MYXllcnMuTG9uTGF0KGUuZ2VvbWV0cnkueCxlLmdlb21ldHJ5LnkpO2Uuc3R5bGUuZ3JhcGhpY1dpZHRoJiZlLnN0eWxlLmdyYXBoaWNIZWlnaHQmJihnPW5ldyBPcGVuTGF5ZXJzLlNpemUoZS5zdHlsZS5ncmFwaGljV2lkdGgsZS5zdHlsZS5ncmFwaGljSGVpZ2h0KSk7dm9pZCAwIT09ZS5zdHlsZS5ncmFwaGljWE9mZnNldCYmdm9pZCAwIT09ZS5zdHlsZS5ncmFwaGljWU9mZnNldCYmKGg9bmV3IE9wZW5MYXllcnMuUGl4ZWwoZS5zdHlsZS5ncmFwaGljWE9mZnNldCxlLnN0eWxlLmdyYXBoaWNZT2Zmc2V0KSk7bnVsbCE9ZS5zdHlsZS5leHRlcm5hbEdyYXBoaWM/ZC5pY29uPW5ldyBPcGVuTGF5ZXJzLkljb24oZS5zdHlsZS5leHRlcm5hbEdyYXBoaWMsZyxoKTooZC5pY29uPU9wZW5MYXllcnMuTWFya2VyLmRlZmF1bHRJY29uKCksbnVsbCE9ZyYmZC5pY29uLnNldFNpemUoZykpOwpudWxsIT1lLmF0dHJpYnV0ZXMudGl0bGUmJm51bGwhPWUuYXR0cmlidXRlcy5kZXNjcmlwdGlvbiYmKGQucG9wdXBDb250ZW50SFRNTD0iPGgyPiIrZS5hdHRyaWJ1dGVzLnRpdGxlKyI8L2gyPjxwPiIrZS5hdHRyaWJ1dGVzLmRlc2NyaXB0aW9uKyI8L3A+Iik7ZC5vdmVyZmxvdz1lLmF0dHJpYnV0ZXMub3ZlcmZsb3d8fCJhdXRvIjtkPW5ldyBPcGVuTGF5ZXJzLkZlYXR1cmUodGhpcyxmLGQpO3RoaXMuZmVhdHVyZXMucHVzaChkKTtmPWQuY3JlYXRlTWFya2VyKCk7bnVsbCE9ZS5hdHRyaWJ1dGVzLnRpdGxlJiZudWxsIT1lLmF0dHJpYnV0ZXMuZGVzY3JpcHRpb24mJmYuZXZlbnRzLnJlZ2lzdGVyKCJjbGljayIsZCx0aGlzLm1hcmtlckNsaWNrKTt0aGlzLmFkZE1hcmtlcihmKX10aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoImxvYWRlbmQiKX0sbWFya2VyQ2xpY2s6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcz09dGhpcy5sYXllci5zZWxlY3RlZEZlYXR1cmU7dGhpcy5sYXllci5zZWxlY3RlZEZlYXR1cmU9CmI/bnVsbDp0aGlzO2Zvcih2YXIgYz0wLGQ9dGhpcy5sYXllci5tYXAucG9wdXBzLmxlbmd0aDtjPGQ7YysrKXRoaXMubGF5ZXIubWFwLnJlbW92ZVBvcHVwKHRoaXMubGF5ZXIubWFwLnBvcHVwc1tjXSk7Ynx8dGhpcy5sYXllci5tYXAuYWRkUG9wdXAodGhpcy5jcmVhdGVQb3B1cCgpKTtPcGVuTGF5ZXJzLkV2ZW50LnN0b3AoYSl9LGNsZWFyRmVhdHVyZXM6ZnVuY3Rpb24oKXtpZihudWxsIT10aGlzLmZlYXR1cmVzKWZvcig7MDx0aGlzLmZlYXR1cmVzLmxlbmd0aDspe3ZhciBhPXRoaXMuZmVhdHVyZXNbMF07T3BlbkxheWVycy5VdGlsLnJlbW92ZUl0ZW0odGhpcy5mZWF0dXJlcyxhKTthLmRlc3Ryb3koKX19LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuTGF5ZXIuVGV4dCJ9KTtPcGVuTGF5ZXJzLkhhbmRsZXIuUmVndWxhclBvbHlnb249T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkhhbmRsZXIuRHJhZyx7c2lkZXM6NCxyYWRpdXM6bnVsbCxzbmFwQW5nbGU6bnVsbCxzbmFwVG9nZ2xlOiJzaGlmdEtleSIsbGF5ZXJPcHRpb25zOm51bGwscGVyc2lzdDohMSxpcnJlZ3VsYXI6ITEsY2l0ZUNvbXBsaWFudDohMSxhbmdsZTpudWxsLGZpeGVkUmFkaXVzOiExLGZlYXR1cmU6bnVsbCxsYXllcjpudWxsLG9yaWdpbjpudWxsLGluaXRpYWxpemU6ZnVuY3Rpb24oYSxiLGMpe2MmJmMubGF5ZXJPcHRpb25zJiZjLmxheWVyT3B0aW9ucy5zdHlsZU1hcHx8KHRoaXMuc3R5bGU9T3BlbkxheWVycy5VdGlsLmV4dGVuZChPcGVuTGF5ZXJzLkZlYXR1cmUuVmVjdG9yLnN0eWxlWyJkZWZhdWx0Il0se30pKTtPcGVuTGF5ZXJzLkhhbmRsZXIuRHJhZy5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLFthLGIsY10pO3RoaXMub3B0aW9ucz1jP2M6e319LHNldE9wdGlvbnM6ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5VdGlsLmV4dGVuZCh0aGlzLm9wdGlvbnMsCmEpO09wZW5MYXllcnMuVXRpbC5leHRlbmQodGhpcyxhKX0sYWN0aXZhdGU6ZnVuY3Rpb24oKXt2YXIgYT0hMTtPcGVuTGF5ZXJzLkhhbmRsZXIuRHJhZy5wcm90b3R5cGUuYWN0aXZhdGUuYXBwbHkodGhpcyxhcmd1bWVudHMpJiYoYT1PcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHtkaXNwbGF5SW5MYXllclN3aXRjaGVyOiExLGNhbGN1bGF0ZUluUmFuZ2U6T3BlbkxheWVycy5GdW5jdGlvbi5UcnVlLHdyYXBEYXRlTGluZTp0aGlzLmNpdGVDb21wbGlhbnR9LHRoaXMubGF5ZXJPcHRpb25zKSx0aGlzLmxheWVyPW5ldyBPcGVuTGF5ZXJzLkxheWVyLlZlY3Rvcih0aGlzLkNMQVNTX05BTUUsYSksdGhpcy5tYXAuYWRkTGF5ZXIodGhpcy5sYXllciksYT0hMCk7cmV0dXJuIGF9LGRlYWN0aXZhdGU6ZnVuY3Rpb24oKXt2YXIgYT0hMTtPcGVuTGF5ZXJzLkhhbmRsZXIuRHJhZy5wcm90b3R5cGUuZGVhY3RpdmF0ZS5hcHBseSh0aGlzLGFyZ3VtZW50cykmJih0aGlzLmRyYWdnaW5nJiZ0aGlzLmNhbmNlbCgpLApudWxsIT10aGlzLmxheWVyLm1hcCYmKHRoaXMubGF5ZXIuZGVzdHJveSghMSksdGhpcy5mZWF0dXJlJiZ0aGlzLmZlYXR1cmUuZGVzdHJveSgpKSx0aGlzLmZlYXR1cmU9dGhpcy5sYXllcj1udWxsLGE9ITApO3JldHVybiBhfSxkb3duOmZ1bmN0aW9uKGEpe3RoaXMuZml4ZWRSYWRpdXM9ISF0aGlzLnJhZGl1czthPXRoaXMubGF5ZXIuZ2V0TG9uTGF0RnJvbVZpZXdQb3J0UHgoYS54eSk7dGhpcy5vcmlnaW49bmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoYS5sb24sYS5sYXQpO2lmKCF0aGlzLmZpeGVkUmFkaXVzfHx0aGlzLmlycmVndWxhcil0aGlzLnJhZGl1cz10aGlzLm1hcC5nZXRSZXNvbHV0aW9uKCk7dGhpcy5wZXJzaXN0JiZ0aGlzLmNsZWFyKCk7dGhpcy5mZWF0dXJlPW5ldyBPcGVuTGF5ZXJzLkZlYXR1cmUuVmVjdG9yO3RoaXMuY3JlYXRlR2VvbWV0cnkoKTt0aGlzLmNhbGxiYWNrKCJjcmVhdGUiLFt0aGlzLm9yaWdpbix0aGlzLmZlYXR1cmVdKTt0aGlzLmxheWVyLmFkZEZlYXR1cmVzKFt0aGlzLmZlYXR1cmVdLAp7c2lsZW50OiEwfSk7dGhpcy5sYXllci5kcmF3RmVhdHVyZSh0aGlzLmZlYXR1cmUsdGhpcy5zdHlsZSl9LG1vdmU6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5sYXllci5nZXRMb25MYXRGcm9tVmlld1BvcnRQeChhLnh5KSxiPW5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KGIubG9uLGIubGF0KTt0aGlzLmlycmVndWxhcj8oYT1NYXRoLnNxcnQoMikqTWF0aC5hYnMoYi55LXRoaXMub3JpZ2luLnkpLzIsdGhpcy5yYWRpdXM9TWF0aC5tYXgodGhpcy5tYXAuZ2V0UmVzb2x1dGlvbigpLzIsYSkpOnRoaXMuZml4ZWRSYWRpdXM/dGhpcy5vcmlnaW49YjoodGhpcy5jYWxjdWxhdGVBbmdsZShiLGEpLHRoaXMucmFkaXVzPU1hdGgubWF4KHRoaXMubWFwLmdldFJlc29sdXRpb24oKS8yLGIuZGlzdGFuY2VUbyh0aGlzLm9yaWdpbikpKTt0aGlzLm1vZGlmeUdlb21ldHJ5KCk7aWYodGhpcy5pcnJlZ3VsYXIpe2E9Yi54LXRoaXMub3JpZ2luLng7dmFyIGI9Yi55LXRoaXMub3JpZ2luLnksCmM7Yz0wPT1iP2EvKHRoaXMucmFkaXVzKk1hdGguc3FydCgyKSk6YS9iO3RoaXMuZmVhdHVyZS5nZW9tZXRyeS5yZXNpemUoMSx0aGlzLm9yaWdpbixjKTt0aGlzLmZlYXR1cmUuZ2VvbWV0cnkubW92ZShhLzIsYi8yKX10aGlzLmxheWVyLmRyYXdGZWF0dXJlKHRoaXMuZmVhdHVyZSx0aGlzLnN0eWxlKX0sdXA6ZnVuY3Rpb24oYSl7dGhpcy5maW5hbGl6ZSgpO3RoaXMuc3RhcnQ9PXRoaXMubGFzdCYmdGhpcy5jYWxsYmFjaygiZG9uZSIsW2EueHldKX0sb3V0OmZ1bmN0aW9uKGEpe3RoaXMuZmluYWxpemUoKX0sY3JlYXRlR2VvbWV0cnk6ZnVuY3Rpb24oKXt0aGlzLmFuZ2xlPU1hdGguUEkqKDEvdGhpcy5zaWRlcy0wLjUpO3RoaXMuc25hcEFuZ2xlJiYodGhpcy5hbmdsZSs9dGhpcy5zbmFwQW5nbGUqKE1hdGguUEkvMTgwKSk7dGhpcy5mZWF0dXJlLmdlb21ldHJ5PU9wZW5MYXllcnMuR2VvbWV0cnkuUG9seWdvbi5jcmVhdGVSZWd1bGFyUG9seWdvbih0aGlzLm9yaWdpbix0aGlzLnJhZGl1cywKdGhpcy5zaWRlcyx0aGlzLnNuYXBBbmdsZSl9LG1vZGlmeUdlb21ldHJ5OmZ1bmN0aW9uKCl7dmFyIGEsYixjPXRoaXMuZmVhdHVyZS5nZW9tZXRyeS5jb21wb25lbnRzWzBdO2MuY29tcG9uZW50cy5sZW5ndGghPXRoaXMuc2lkZXMrMSYmKHRoaXMuY3JlYXRlR2VvbWV0cnkoKSxjPXRoaXMuZmVhdHVyZS5nZW9tZXRyeS5jb21wb25lbnRzWzBdKTtmb3IodmFyIGQ9MDtkPHRoaXMuc2lkZXM7KytkKWI9Yy5jb21wb25lbnRzW2RdLGE9dGhpcy5hbmdsZSsyKmQqTWF0aC5QSS90aGlzLnNpZGVzLGIueD10aGlzLm9yaWdpbi54K3RoaXMucmFkaXVzKk1hdGguY29zKGEpLGIueT10aGlzLm9yaWdpbi55K3RoaXMucmFkaXVzKk1hdGguc2luKGEpLGIuY2xlYXJCb3VuZHMoKX0sY2FsY3VsYXRlQW5nbGU6ZnVuY3Rpb24oYSxiKXt2YXIgYz1NYXRoLmF0YW4yKGEueS10aGlzLm9yaWdpbi55LGEueC10aGlzLm9yaWdpbi54KTtpZih0aGlzLnNuYXBBbmdsZSYmdGhpcy5zbmFwVG9nZ2xlJiYhYlt0aGlzLnNuYXBUb2dnbGVdKXt2YXIgZD0KTWF0aC5QSS8xODAqdGhpcy5zbmFwQW5nbGU7dGhpcy5hbmdsZT1NYXRoLnJvdW5kKGMvZCkqZH1lbHNlIHRoaXMuYW5nbGU9Y30sY2FuY2VsOmZ1bmN0aW9uKCl7dGhpcy5jYWxsYmFjaygiY2FuY2VsIixudWxsKTt0aGlzLmZpbmFsaXplKCl9LGZpbmFsaXplOmZ1bmN0aW9uKCl7dGhpcy5vcmlnaW49bnVsbDt0aGlzLnJhZGl1cz10aGlzLm9wdGlvbnMucmFkaXVzfSxjbGVhcjpmdW5jdGlvbigpe3RoaXMubGF5ZXImJih0aGlzLmxheWVyLnJlbmRlcmVyLmNsZWFyKCksdGhpcy5sYXllci5kZXN0cm95RmVhdHVyZXMoKSl9LGNhbGxiYWNrOmZ1bmN0aW9uKGEsYil7dGhpcy5jYWxsYmFja3NbYV0mJnRoaXMuY2FsbGJhY2tzW2FdLmFwcGx5KHRoaXMuY29udHJvbCxbdGhpcy5mZWF0dXJlLmdlb21ldHJ5LmNsb25lKCldKTt0aGlzLnBlcnNpc3R8fCJkb25lIiE9YSYmImNhbmNlbCIhPWF8fHRoaXMuY2xlYXIoKX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5IYW5kbGVyLlJlZ3VsYXJQb2x5Z29uIn0pO09wZW5MYXllcnMuQ29udHJvbC5TTERTZWxlY3Q9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkNvbnRyb2wse2NsZWFyT25EZWFjdGl2YXRlOiExLGxheWVyczpudWxsLGNhbGxiYWNrczpudWxsLHNlbGVjdGlvblN5bWJvbGl6ZXI6e1BvbHlnb246e2ZpbGxDb2xvcjoiI0ZGMDAwMCIsc3Ryb2tlOiExfSxMaW5lOntzdHJva2VDb2xvcjoiI0ZGMDAwMCIsc3Ryb2tlV2lkdGg6Mn0sUG9pbnQ6e2dyYXBoaWNOYW1lOiJzcXVhcmUiLGZpbGxDb2xvcjoiI0ZGMDAwMCIscG9pbnRSYWRpdXM6NX19LGxheWVyT3B0aW9uczpudWxsLHNrZXRjaFN0eWxlOm51bGwsd2ZzQ2FjaGU6e30sbGF5ZXJDYWNoZTp7fSxpbml0aWFsaXplOmZ1bmN0aW9uKGEsYil7T3BlbkxheWVycy5Db250cm9sLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsW2JdKTt0aGlzLmNhbGxiYWNrcz1PcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHtkb25lOnRoaXMuc2VsZWN0LGNsaWNrOnRoaXMuc2VsZWN0fSx0aGlzLmNhbGxiYWNrcyk7CnRoaXMuaGFuZGxlck9wdGlvbnM9dGhpcy5oYW5kbGVyT3B0aW9uc3x8e307dGhpcy5sYXllck9wdGlvbnM9T3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHModGhpcy5sYXllck9wdGlvbnMse2Rpc3BsYXlJbkxheWVyU3dpdGNoZXI6ITEsdGlsZU9wdGlvbnM6e21heEdldFVybExlbmd0aDoyMDQ4fX0pO3RoaXMuc2tldGNoU3R5bGUmJih0aGlzLmhhbmRsZXJPcHRpb25zLmxheWVyT3B0aW9ucz1PcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyh0aGlzLmhhbmRsZXJPcHRpb25zLmxheWVyT3B0aW9ucyx7c3R5bGVNYXA6bmV3IE9wZW5MYXllcnMuU3R5bGVNYXAoeyJkZWZhdWx0Ijp0aGlzLnNrZXRjaFN0eWxlfSl9KSk7dGhpcy5oYW5kbGVyPW5ldyBhKHRoaXMsdGhpcy5jYWxsYmFja3MsdGhpcy5oYW5kbGVyT3B0aW9ucyl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXtmb3IodmFyIGEgaW4gdGhpcy5sYXllckNhY2hlKWRlbGV0ZSB0aGlzLmxheWVyQ2FjaGVbYV07Zm9yKGEgaW4gdGhpcy53ZnNDYWNoZSlkZWxldGUgdGhpcy53ZnNDYWNoZVthXTsKT3BlbkxheWVycy5Db250cm9sLnByb3RvdHlwZS5kZXN0cm95LmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sY291cGxlTGF5ZXJWaXNpYmxpdHk6ZnVuY3Rpb24oYSl7dGhpcy5zZXRWaXNpYmlsaXR5KGEub2JqZWN0LmdldFZpc2liaWxpdHkoKSl9LGNyZWF0ZVNlbGVjdGlvbkxheWVyOmZ1bmN0aW9uKGEpe3ZhciBiO2lmKHRoaXMubGF5ZXJDYWNoZVthLmlkXSliPXRoaXMubGF5ZXJDYWNoZVthLmlkXTtlbHNle2I9bmV3IE9wZW5MYXllcnMuTGF5ZXIuV01TKGEubmFtZSxhLnVybCxhLnBhcmFtcyxPcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyh0aGlzLmxheWVyT3B0aW9ucyxhLmdldE9wdGlvbnMoKSkpO3RoaXMubGF5ZXJDYWNoZVthLmlkXT1iO2lmKCExPT09dGhpcy5sYXllck9wdGlvbnMuZGlzcGxheUluTGF5ZXJTd2l0Y2hlcilhLmV2ZW50cy5vbih7dmlzaWJpbGl0eWNoYW5nZWQ6dGhpcy5jb3VwbGVMYXllclZpc2libGl0eSxzY29wZTpifSk7dGhpcy5tYXAuYWRkTGF5ZXIoYil9cmV0dXJuIGJ9LApjcmVhdGVTTEQ6ZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZD17dmVyc2lvbjoiMS4wLjAiLG5hbWVkTGF5ZXJzOnt9fSxlPSgiIithLnBhcmFtcy5MQVlFUlMpLnNwbGl0KCIsIiksZj0wLGc9ZS5sZW5ndGg7ZjxnO2YrKyl7dmFyIGg9ZVtmXTtkLm5hbWVkTGF5ZXJzW2hdPXtuYW1lOmgsdXNlclN0eWxlczpbXX07dmFyIGs9dGhpcy5zZWxlY3Rpb25TeW1ib2xpemVyLGw9Y1tmXTswPD1sLnR5cGUuaW5kZXhPZigiUG9seWdvbiIpP2s9e1BvbHlnb246dGhpcy5zZWxlY3Rpb25TeW1ib2xpemVyLlBvbHlnb259OjA8PWwudHlwZS5pbmRleE9mKCJMaW5lU3RyaW5nIik/az17TGluZTp0aGlzLnNlbGVjdGlvblN5bWJvbGl6ZXIuTGluZX06MDw9bC50eXBlLmluZGV4T2YoIlBvaW50IikmJihrPXtQb2ludDp0aGlzLnNlbGVjdGlvblN5bWJvbGl6ZXIuUG9pbnR9KTtkLm5hbWVkTGF5ZXJzW2hdLnVzZXJTdHlsZXMucHVzaCh7bmFtZToiZGVmYXVsdCIscnVsZXM6W25ldyBPcGVuTGF5ZXJzLlJ1bGUoe3N5bWJvbGl6ZXI6aywKZmlsdGVyOmJbZl0sbWF4U2NhbGVEZW5vbWluYXRvcjphLm9wdGlvbnMubWluU2NhbGV9KV19KX1yZXR1cm4obmV3IE9wZW5MYXllcnMuRm9ybWF0LlNMRCh7c3JzTmFtZTp0aGlzLm1hcC5nZXRQcm9qZWN0aW9uKCl9KSkud3JpdGUoZCl9LHBhcnNlRGVzY3JpYmVMYXllcjpmdW5jdGlvbihhKXt2YXIgYj1uZXcgT3BlbkxheWVycy5Gb3JtYXQuV01TRGVzY3JpYmVMYXllcixjPWEucmVzcG9uc2VYTUw7YyYmYy5kb2N1bWVudEVsZW1lbnR8fChjPWEucmVzcG9uc2VUZXh0KTthPWIucmVhZChjKTtmb3IodmFyIGI9W10sYz1udWxsLGQ9MCxlPWEubGVuZ3RoO2Q8ZTtkKyspIldGUyI9PWFbZF0ub3dzVHlwZSYmKGIucHVzaChhW2RdLnR5cGVOYW1lKSxjPWFbZF0ub3dzVVJMKTtPcGVuTGF5ZXJzLlJlcXVlc3QuR0VUKHt1cmw6YyxwYXJhbXM6e1NFUlZJQ0U6IldGUyIsVFlQRU5BTUU6Yi50b1N0cmluZygpLFJFUVVFU1Q6IkRlc2NyaWJlRmVhdHVyZVR5cGUiLFZFUlNJT046IjEuMC4wIn0sCmNhbGxiYWNrOmZ1bmN0aW9uKGEpe3ZhciBiPW5ldyBPcGVuTGF5ZXJzLkZvcm1hdC5XRlNEZXNjcmliZUZlYXR1cmVUeXBlLGM9YS5yZXNwb25zZVhNTDtjJiZjLmRvY3VtZW50RWxlbWVudHx8KGM9YS5yZXNwb25zZVRleHQpO2E9Yi5yZWFkKGMpO3RoaXMuY29udHJvbC53ZnNDYWNoZVt0aGlzLmxheWVyLmlkXT1hO3RoaXMuY29udHJvbC5fcXVldWUmJnRoaXMuY29udHJvbC5hcHBseVNlbGVjdGlvbigpfSxzY29wZTp0aGlzfSl9LGdldEdlb21ldHJ5QXR0cmlidXRlczpmdW5jdGlvbihhKXt2YXIgYj1bXTthPXRoaXMud2ZzQ2FjaGVbYS5pZF07Zm9yKHZhciBjPTAsZD1hLmZlYXR1cmVUeXBlcy5sZW5ndGg7YzxkO2MrKylmb3IodmFyIGU9YS5mZWF0dXJlVHlwZXNbY10ucHJvcGVydGllcyxmPTAsZz1lLmxlbmd0aDtmPGc7ZisrKXt2YXIgaD1lW2ZdLGs9aC50eXBlOygwPD1rLmluZGV4T2YoIkxpbmVTdHJpbmciKXx8MDw9ay5pbmRleE9mKCJHZW9tZXRyeUFzc29jaWF0aW9uVHlwZSIpfHwKMDw9ay5pbmRleE9mKCJHZW9tZXRyeVByb3BlcnR5VHlwZSIpfHwwPD1rLmluZGV4T2YoIlBvaW50Iil8fDA8PWsuaW5kZXhPZigiUG9seWdvbiIpKSYmYi5wdXNoKGgpfXJldHVybiBifSxhY3RpdmF0ZTpmdW5jdGlvbigpe3ZhciBhPU9wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuYWN0aXZhdGUuY2FsbCh0aGlzKTtpZihhKWZvcih2YXIgYj0wLGM9dGhpcy5sYXllcnMubGVuZ3RoO2I8YztiKyspe3ZhciBkPXRoaXMubGF5ZXJzW2JdO2QmJiF0aGlzLndmc0NhY2hlW2QuaWRdJiZPcGVuTGF5ZXJzLlJlcXVlc3QuR0VUKHt1cmw6ZC51cmwscGFyYW1zOntTRVJWSUNFOiJXTVMiLFZFUlNJT046ZC5wYXJhbXMuVkVSU0lPTixMQVlFUlM6ZC5wYXJhbXMuTEFZRVJTLFJFUVVFU1Q6IkRlc2NyaWJlTGF5ZXIifSxjYWxsYmFjazp0aGlzLnBhcnNlRGVzY3JpYmVMYXllcixzY29wZTp7bGF5ZXI6ZCxjb250cm9sOnRoaXN9fSl9cmV0dXJuIGF9LGRlYWN0aXZhdGU6ZnVuY3Rpb24oKXt2YXIgYT0KT3BlbkxheWVycy5Db250cm9sLnByb3RvdHlwZS5kZWFjdGl2YXRlLmNhbGwodGhpcyk7aWYoYSlmb3IodmFyIGI9MCxjPXRoaXMubGF5ZXJzLmxlbmd0aDtiPGM7YisrKXt2YXIgZD10aGlzLmxheWVyc1tiXTtpZihkJiYhMD09PXRoaXMuY2xlYXJPbkRlYWN0aXZhdGUpe3ZhciBlPXRoaXMubGF5ZXJDYWNoZSxmPWVbZC5pZF07ZiYmKGQuZXZlbnRzLnVuKHt2aXNpYmlsaXR5Y2hhbmdlZDp0aGlzLmNvdXBsZUxheWVyVmlzaWJsaXR5LHNjb3BlOmZ9KSxmLmRlc3Ryb3koKSxkZWxldGUgZVtkLmlkXSl9fXJldHVybiBhfSxzZXRMYXllcnM6ZnVuY3Rpb24oYSl7dGhpcy5hY3RpdmU/KHRoaXMuZGVhY3RpdmF0ZSgpLHRoaXMubGF5ZXJzPWEsdGhpcy5hY3RpdmF0ZSgpKTp0aGlzLmxheWVycz1hfSxjcmVhdGVGaWx0ZXI6ZnVuY3Rpb24oYSxiKXt2YXIgYz1udWxsO3RoaXMuaGFuZGxlciBpbnN0YW5jZW9mIE9wZW5MYXllcnMuSGFuZGxlci5SZWd1bGFyUG9seWdvbj9jPSEwPT09dGhpcy5oYW5kbGVyLmlycmVndWxhcj8KbmV3IE9wZW5MYXllcnMuRmlsdGVyLlNwYXRpYWwoe3R5cGU6T3BlbkxheWVycy5GaWx0ZXIuU3BhdGlhbC5CQk9YLHByb3BlcnR5OmEubmFtZSx2YWx1ZTpiLmdldEJvdW5kcygpfSk6bmV3IE9wZW5MYXllcnMuRmlsdGVyLlNwYXRpYWwoe3R5cGU6T3BlbkxheWVycy5GaWx0ZXIuU3BhdGlhbC5JTlRFUlNFQ1RTLHByb3BlcnR5OmEubmFtZSx2YWx1ZTpifSk6dGhpcy5oYW5kbGVyIGluc3RhbmNlb2YgT3BlbkxheWVycy5IYW5kbGVyLlBvbHlnb24/Yz1uZXcgT3BlbkxheWVycy5GaWx0ZXIuU3BhdGlhbCh7dHlwZTpPcGVuTGF5ZXJzLkZpbHRlci5TcGF0aWFsLklOVEVSU0VDVFMscHJvcGVydHk6YS5uYW1lLHZhbHVlOmJ9KTp0aGlzLmhhbmRsZXIgaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLkhhbmRsZXIuUGF0aD9jPTA8PWEudHlwZS5pbmRleE9mKCJQb2ludCIpP25ldyBPcGVuTGF5ZXJzLkZpbHRlci5TcGF0aWFsKHt0eXBlOk9wZW5MYXllcnMuRmlsdGVyLlNwYXRpYWwuRFdJVEhJTiwKcHJvcGVydHk6YS5uYW1lLGRpc3RhbmNlOjAuMDEqdGhpcy5tYXAuZ2V0RXh0ZW50KCkuZ2V0V2lkdGgoKSxkaXN0YW5jZVVuaXRzOnRoaXMubWFwLmdldFVuaXRzKCksdmFsdWU6Yn0pOm5ldyBPcGVuTGF5ZXJzLkZpbHRlci5TcGF0aWFsKHt0eXBlOk9wZW5MYXllcnMuRmlsdGVyLlNwYXRpYWwuSU5URVJTRUNUUyxwcm9wZXJ0eTphLm5hbWUsdmFsdWU6Yn0pOnRoaXMuaGFuZGxlciBpbnN0YW5jZW9mIE9wZW5MYXllcnMuSGFuZGxlci5DbGljayYmKGM9MDw9YS50eXBlLmluZGV4T2YoIlBvbHlnb24iKT9uZXcgT3BlbkxheWVycy5GaWx0ZXIuU3BhdGlhbCh7dHlwZTpPcGVuTGF5ZXJzLkZpbHRlci5TcGF0aWFsLklOVEVSU0VDVFMscHJvcGVydHk6YS5uYW1lLHZhbHVlOmJ9KTpuZXcgT3BlbkxheWVycy5GaWx0ZXIuU3BhdGlhbCh7dHlwZTpPcGVuTGF5ZXJzLkZpbHRlci5TcGF0aWFsLkRXSVRISU4scHJvcGVydHk6YS5uYW1lLGRpc3RhbmNlOjAuMDEqdGhpcy5tYXAuZ2V0RXh0ZW50KCkuZ2V0V2lkdGgoKSwKZGlzdGFuY2VVbml0czp0aGlzLm1hcC5nZXRVbml0cygpLHZhbHVlOmJ9KSk7cmV0dXJuIGN9LHNlbGVjdDpmdW5jdGlvbihhKXt0aGlzLl9xdWV1ZT1mdW5jdGlvbigpe2Zvcih2YXIgYj0wLGM9dGhpcy5sYXllcnMubGVuZ3RoO2I8YztiKyspe2Zvcih2YXIgZD10aGlzLmxheWVyc1tiXSxlPXRoaXMuZ2V0R2VvbWV0cnlBdHRyaWJ1dGVzKGQpLGY9W10sZz0wLGg9ZS5sZW5ndGg7ZzxoO2crKyl7dmFyIGs9ZVtnXTtpZihudWxsIT09ayl7aWYoIShhIGluc3RhbmNlb2YgT3BlbkxheWVycy5HZW9tZXRyeSkpe3ZhciBsPXRoaXMubWFwLmdldExvbkxhdEZyb21QaXhlbChhLnh5KTthPW5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KGwubG9uLGwubGF0KX1rPXRoaXMuY3JlYXRlRmlsdGVyKGssYSk7bnVsbCE9PWsmJmYucHVzaChrKX19Zz10aGlzLmNyZWF0ZVNlbGVjdGlvbkxheWVyKGQpO3RoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgic2VsZWN0ZWQiLHtsYXllcjpkLGZpbHRlcnM6Zn0pOwpkPXRoaXMuY3JlYXRlU0xEKGQsZixlKTtnLm1lcmdlTmV3UGFyYW1zKHtTTERfQk9EWTpkfSk7ZGVsZXRlIHRoaXMuX3F1ZXVlfX07dGhpcy5hcHBseVNlbGVjdGlvbigpfSxhcHBseVNlbGVjdGlvbjpmdW5jdGlvbigpe2Zvcih2YXIgYT0hMCxiPTAsYz10aGlzLmxheWVycy5sZW5ndGg7YjxjO2IrKylpZighdGhpcy53ZnNDYWNoZVt0aGlzLmxheWVyc1tiXS5pZF0pe2E9ITE7YnJlYWt9YSYmdGhpcy5fcXVldWUuY2FsbCh0aGlzKX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Db250cm9sLlNMRFNlbGVjdCJ9KTtPcGVuTGF5ZXJzLkNvbnRyb2wuU2NhbGU9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkNvbnRyb2wse2VsZW1lbnQ6bnVsbCxnZW9kZXNpYzohMSxpbml0aWFsaXplOmZ1bmN0aW9uKGEsYil7T3BlbkxheWVycy5Db250cm9sLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsW2JdKTt0aGlzLmVsZW1lbnQ9T3BlbkxheWVycy5VdGlsLmdldEVsZW1lbnQoYSl9LGRyYXc6ZnVuY3Rpb24oKXtPcGVuTGF5ZXJzLkNvbnRyb2wucHJvdG90eXBlLmRyYXcuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMuZWxlbWVudHx8KHRoaXMuZWxlbWVudD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKSx0aGlzLmRpdi5hcHBlbmRDaGlsZCh0aGlzLmVsZW1lbnQpKTt0aGlzLm1hcC5ldmVudHMucmVnaXN0ZXIoIm1vdmVlbmQiLHRoaXMsdGhpcy51cGRhdGVTY2FsZSk7dGhpcy51cGRhdGVTY2FsZSgpO3JldHVybiB0aGlzLmRpdn0sdXBkYXRlU2NhbGU6ZnVuY3Rpb24oKXt2YXIgYTsKaWYoITA9PT10aGlzLmdlb2Rlc2ljKXtpZighdGhpcy5tYXAuZ2V0VW5pdHMoKSlyZXR1cm47YT1PcGVuTGF5ZXJzLklOQ0hFU19QRVJfVU5JVDthPSh0aGlzLm1hcC5nZXRHZW9kZXNpY1BpeGVsU2l6ZSgpLnd8fDFFLTYpKmEua20qT3BlbkxheWVycy5ET1RTX1BFUl9JTkNIfWVsc2UgYT10aGlzLm1hcC5nZXRTY2FsZSgpO2EmJihhPTk1MDA8PWEmJjk1RTQ+PWE/TWF0aC5yb3VuZChhLzFFMykrIksiOjk1RTQ8PWE/TWF0aC5yb3VuZChhLzFFNikrIk0iOk1hdGgucm91bmQoYSksdGhpcy5lbGVtZW50LmlubmVySFRNTD1PcGVuTGF5ZXJzLmkxOG4oIlNjYWxlID0gMSA6ICR7c2NhbGVEZW5vbX0iLHtzY2FsZURlbm9tOmF9KSl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuQ29udHJvbC5TY2FsZSJ9KTtPcGVuTGF5ZXJzLkxheWVyLk1hcEd1aWRlPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5MYXllci5HcmlkLHtpc0Jhc2VMYXllcjohMCx1c2VIdHRwVGlsZTohMSxzaW5nbGVUaWxlOiExLHVzZU92ZXJsYXk6ITEsdXNlQXN5bmNPdmVybGF5OiEwLFRJTEVfUEFSQU1TOntvcGVyYXRpb246IkdFVFRJTEVJTUFHRSIsdmVyc2lvbjoiMS4yLjAifSxTSU5HTEVfVElMRV9QQVJBTVM6e29wZXJhdGlvbjoiR0VUTUFQSU1BR0UiLGZvcm1hdDoiUE5HIixsb2NhbGU6ImVuIixjbGlwOiIxIix2ZXJzaW9uOiIxLjAuMCJ9LE9WRVJMQVlfUEFSQU1TOntvcGVyYXRpb246IkdFVERZTkFNSUNNQVBPVkVSTEFZSU1BR0UiLGZvcm1hdDoiUE5HIixsb2NhbGU6ImVuIixjbGlwOiIxIix2ZXJzaW9uOiIyLjAuMCJ9LEZPTERFUl9QQVJBTVM6e3RpbGVDb2x1bW5zUGVyRm9sZGVyOjMwLHRpbGVSb3dzUGVyRm9sZGVyOjMwLGZvcm1hdDoicG5nIixxdWVyeXN0cmluZzpudWxsfSxkZWZhdWx0U2l6ZTpuZXcgT3BlbkxheWVycy5TaXplKDMwMCwKMzAwKSx0aWxlT3JpZ2luQ29ybmVyOiJ0bCIsaW5pdGlhbGl6ZTpmdW5jdGlvbihhLGIsYyxkKXtPcGVuTGF5ZXJzLkxheWVyLkdyaWQucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxhcmd1bWVudHMpO2lmKG51bGw9PWR8fG51bGw9PWQuaXNCYXNlTGF5ZXIpdGhpcy5pc0Jhc2VMYXllcj0idHJ1ZSIhPXRoaXMudHJhbnNwYXJlbnQmJiEwIT10aGlzLnRyYW5zcGFyZW50O2QmJm51bGwhPWQudXNlT3ZlcmxheSYmKHRoaXMudXNlT3ZlcmxheT1kLnVzZU92ZXJsYXkpO3RoaXMuc2luZ2xlVGlsZT90aGlzLnVzZU92ZXJsYXk/KE9wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKHRoaXMucGFyYW1zLHRoaXMuT1ZFUkxBWV9QQVJBTVMpLHRoaXMudXNlQXN5bmNPdmVybGF5fHwodGhpcy5wYXJhbXMudmVyc2lvbj0iMS4wLjAiKSk6T3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHModGhpcy5wYXJhbXMsdGhpcy5TSU5HTEVfVElMRV9QQVJBTVMpOih0aGlzLnVzZUh0dHBUaWxlPwpPcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyh0aGlzLnBhcmFtcyx0aGlzLkZPTERFUl9QQVJBTVMpOk9wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKHRoaXMucGFyYW1zLHRoaXMuVElMRV9QQVJBTVMpLHRoaXMuc2V0VGlsZVNpemUodGhpcy5kZWZhdWx0U2l6ZSkpfSxjbG9uZTpmdW5jdGlvbihhKXtudWxsPT1hJiYoYT1uZXcgT3BlbkxheWVycy5MYXllci5NYXBHdWlkZSh0aGlzLm5hbWUsdGhpcy51cmwsdGhpcy5wYXJhbXMsdGhpcy5nZXRPcHRpb25zKCkpKTtyZXR1cm4gYT1PcGVuTGF5ZXJzLkxheWVyLkdyaWQucHJvdG90eXBlLmNsb25lLmFwcGx5KHRoaXMsW2FdKX0sZ2V0VVJMOmZ1bmN0aW9uKGEpe3ZhciBiO2I9YS5nZXRDZW50ZXJMb25MYXQoKTt2YXIgYz10aGlzLm1hcC5nZXRTaXplKCk7dGhpcy5zaW5nbGVUaWxlPyhhPXtzZXRkaXNwbGF5ZHBpOk9wZW5MYXllcnMuRE9UU19QRVJfSU5DSCxzZXRkaXNwbGF5aGVpZ2h0OmMuaCp0aGlzLnJhdGlvLHNldGRpc3BsYXl3aWR0aDpjLncqCnRoaXMucmF0aW8sc2V0dmlld2NlbnRlcng6Yi5sb24sc2V0dmlld2NlbnRlcnk6Yi5sYXQsc2V0dmlld3NjYWxlOnRoaXMubWFwLmdldFNjYWxlKCl9LHRoaXMudXNlT3ZlcmxheSYmIXRoaXMudXNlQXN5bmNPdmVybGF5JiYoYj17fSxiPU9wZW5MYXllcnMuVXRpbC5leHRlbmQoYixhKSxiLm9wZXJhdGlvbj0iR0VUVklTSUJMRU1BUEVYVEVOVCIsYi52ZXJzaW9uPSIxLjAuMCIsYi5zZXNzaW9uPXRoaXMucGFyYW1zLnNlc3Npb24sYi5tYXBOYW1lPXRoaXMucGFyYW1zLm1hcE5hbWUsYi5mb3JtYXQ9InRleHQveG1sIixiPXRoaXMuZ2V0RnVsbFJlcXVlc3RTdHJpbmcoYiksT3BlbkxheWVycy5SZXF1ZXN0LkdFVCh7dXJsOmIsYXN5bmM6ITF9KSksYj10aGlzLmdldEZ1bGxSZXF1ZXN0U3RyaW5nKGEpKTooYz10aGlzLm1hcC5nZXRSZXNvbHV0aW9uKCksYj1NYXRoLmZsb29yKChhLmxlZnQtdGhpcy5tYXhFeHRlbnQubGVmdCkvYyksYj1NYXRoLnJvdW5kKGIvdGhpcy50aWxlU2l6ZS53KSwKYT1NYXRoLmZsb29yKCh0aGlzLm1heEV4dGVudC50b3AtYS50b3ApL2MpLGE9TWF0aC5yb3VuZChhL3RoaXMudGlsZVNpemUuaCksYj10aGlzLnVzZUh0dHBUaWxlP3RoaXMuZ2V0SW1hZ2VGaWxlUGF0aCh7dGlsZWNvbDpiLHRpbGVyb3c6YSxzY2FsZWluZGV4OnRoaXMucmVzb2x1dGlvbnMubGVuZ3RoLXRoaXMubWFwLnpvb20tMX0pOnRoaXMuZ2V0RnVsbFJlcXVlc3RTdHJpbmcoe3RpbGVjb2w6Yix0aWxlcm93OmEsc2NhbGVpbmRleDp0aGlzLnJlc29sdXRpb25zLmxlbmd0aC10aGlzLm1hcC56b29tLTF9KSk7cmV0dXJuIGJ9LGdldEZ1bGxSZXF1ZXN0U3RyaW5nOmZ1bmN0aW9uKGEsYil7dmFyIGM9bnVsbD09Yj90aGlzLnVybDpiOyJvYmplY3QiPT10eXBlb2YgYyYmKGM9Y1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqYy5sZW5ndGgpXSk7dmFyIGQ9YyxlPU9wZW5MYXllcnMuVXRpbC5leHRlbmQoe30sdGhpcy5wYXJhbXMpLGU9T3BlbkxheWVycy5VdGlsLmV4dGVuZChlLGEpLApmPU9wZW5MYXllcnMuVXRpbC51cHBlckNhc2VPYmplY3QoT3BlbkxheWVycy5VdGlsLmdldFBhcmFtZXRlcnMoYykpLGc7Zm9yKGcgaW4gZSlnLnRvVXBwZXJDYXNlKClpbiBmJiZkZWxldGUgZVtnXTtlPU9wZW5MYXllcnMuVXRpbC5nZXRQYXJhbWV0ZXJTdHJpbmcoZSk7ZT1lLnJlcGxhY2UoLywvZywiKyIpOyIiIT1lJiYoZj1jLmNoYXJBdChjLmxlbmd0aC0xKSxkPSImIj09Znx8Ij8iPT1mP2QrZTotMT09Yy5pbmRleE9mKCI/Iik/ZCsoIj8iK2UpOmQrKCImIitlKSk7cmV0dXJuIGR9LGdldEltYWdlRmlsZVBhdGg6ZnVuY3Rpb24oYSxiKXt2YXIgYz1udWxsPT1iP3RoaXMudXJsOmI7Im9iamVjdCI9PXR5cGVvZiBjJiYoYz1jW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSpjLmxlbmd0aCldKTt2YXIgZD0iIixlPSIiOzA+YS50aWxlcm93JiYoZD0iLSIpO2Q9MD09YS50aWxlcm93P2QrIjAiOmQrTWF0aC5mbG9vcihNYXRoLmFicyhhLnRpbGVyb3cvdGhpcy5wYXJhbXMudGlsZVJvd3NQZXJGb2xkZXIpKSoKdGhpcy5wYXJhbXMudGlsZVJvd3NQZXJGb2xkZXI7MD5hLnRpbGVjb2wmJihlPSItIik7ZT0wPT1hLnRpbGVjb2w/ZSsiMCI6ZStNYXRoLmZsb29yKE1hdGguYWJzKGEudGlsZWNvbC90aGlzLnBhcmFtcy50aWxlQ29sdW1uc1BlckZvbGRlcikpKnRoaXMucGFyYW1zLnRpbGVDb2x1bW5zUGVyRm9sZGVyO2Q9Ii9TIitNYXRoLmZsb29yKGEuc2NhbGVpbmRleCkrIi8iK3RoaXMucGFyYW1zLmJhc2VtYXBsYXllcmdyb3VwbmFtZSsiL1IiK2QrIi9DIitlKyIvIithLnRpbGVyb3cldGhpcy5wYXJhbXMudGlsZVJvd3NQZXJGb2xkZXIrIl8iK2EudGlsZWNvbCV0aGlzLnBhcmFtcy50aWxlQ29sdW1uc1BlckZvbGRlcisiLiIrdGhpcy5wYXJhbXMuZm9ybWF0O3RoaXMucGFyYW1zLnF1ZXJ5c3RyaW5nJiYoZCs9Ij8iK3RoaXMucGFyYW1zLnF1ZXJ5c3RyaW5nKTtyZXR1cm4gYytkfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkxheWVyLk1hcEd1aWRlIn0pO09wZW5MYXllcnMuQ29udHJvbC5NZWFzdXJlPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Db250cm9sLHtjYWxsYmFja3M6bnVsbCxkaXNwbGF5U3lzdGVtOiJtZXRyaWMiLGdlb2Rlc2ljOiExLGRpc3BsYXlTeXN0ZW1Vbml0czp7Z2VvZ3JhcGhpYzpbImRkIl0sZW5nbGlzaDpbIm1pIiwiZnQiLCJpbiJdLG1ldHJpYzpbImttIiwibSJdfSxwYXJ0aWFsRGVsYXk6MzAwLGRlbGF5ZWRUcmlnZ2VyOm51bGwscGVyc2lzdDohMSxpbW1lZGlhdGU6ITEsaW5pdGlhbGl6ZTpmdW5jdGlvbihhLGIpe09wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLFtiXSk7dmFyIGM9e2RvbmU6dGhpcy5tZWFzdXJlQ29tcGxldGUscG9pbnQ6dGhpcy5tZWFzdXJlUGFydGlhbH07dGhpcy5pbW1lZGlhdGUmJihjLm1vZGlmeT10aGlzLm1lYXN1cmVJbW1lZGlhdGUpO3RoaXMuY2FsbGJhY2tzPU9wZW5MYXllcnMuVXRpbC5leHRlbmQoYyx0aGlzLmNhbGxiYWNrcyk7CnRoaXMuaGFuZGxlck9wdGlvbnM9T3BlbkxheWVycy5VdGlsLmV4dGVuZCh7cGVyc2lzdDp0aGlzLnBlcnNpc3R9LHRoaXMuaGFuZGxlck9wdGlvbnMpO3RoaXMuaGFuZGxlcj1uZXcgYSh0aGlzLHRoaXMuY2FsbGJhY2tzLHRoaXMuaGFuZGxlck9wdGlvbnMpfSxkZWFjdGl2YXRlOmZ1bmN0aW9uKCl7dGhpcy5jYW5jZWxEZWxheSgpO3JldHVybiBPcGVuTGF5ZXJzLkNvbnRyb2wucHJvdG90eXBlLmRlYWN0aXZhdGUuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxjYW5jZWw6ZnVuY3Rpb24oKXt0aGlzLmNhbmNlbERlbGF5KCk7dGhpcy5oYW5kbGVyLmNhbmNlbCgpfSxzZXRJbW1lZGlhdGU6ZnVuY3Rpb24oYSl7KHRoaXMuaW1tZWRpYXRlPWEpP3RoaXMuY2FsbGJhY2tzLm1vZGlmeT10aGlzLm1lYXN1cmVJbW1lZGlhdGU6ZGVsZXRlIHRoaXMuY2FsbGJhY2tzLm1vZGlmeX0sdXBkYXRlSGFuZGxlcjpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuYWN0aXZlO2MmJnRoaXMuZGVhY3RpdmF0ZSgpOwp0aGlzLmhhbmRsZXI9bmV3IGEodGhpcyx0aGlzLmNhbGxiYWNrcyxiKTtjJiZ0aGlzLmFjdGl2YXRlKCl9LG1lYXN1cmVDb21wbGV0ZTpmdW5jdGlvbihhKXt0aGlzLmNhbmNlbERlbGF5KCk7dGhpcy5tZWFzdXJlKGEsIm1lYXN1cmUiKX0sbWVhc3VyZVBhcnRpYWw6ZnVuY3Rpb24oYSxiKXt0aGlzLmNhbmNlbERlbGF5KCk7Yj1iLmNsb25lKCk7dGhpcy5oYW5kbGVyLmZyZWVoYW5kTW9kZSh0aGlzLmhhbmRsZXIuZXZ0KT90aGlzLm1lYXN1cmUoYiwibWVhc3VyZXBhcnRpYWwiKTp0aGlzLmRlbGF5ZWRUcmlnZ2VyPXdpbmRvdy5zZXRUaW1lb3V0KE9wZW5MYXllcnMuRnVuY3Rpb24uYmluZChmdW5jdGlvbigpe3RoaXMuZGVsYXllZFRyaWdnZXI9bnVsbDt0aGlzLm1lYXN1cmUoYiwibWVhc3VyZXBhcnRpYWwiKX0sdGhpcyksdGhpcy5wYXJ0aWFsRGVsYXkpfSxtZWFzdXJlSW1tZWRpYXRlOmZ1bmN0aW9uKGEsYixjKXtjJiYhdGhpcy5oYW5kbGVyLmZyZWVoYW5kTW9kZSh0aGlzLmhhbmRsZXIuZXZ0KSYmCih0aGlzLmNhbmNlbERlbGF5KCksdGhpcy5tZWFzdXJlKGIuZ2VvbWV0cnksIm1lYXN1cmVwYXJ0aWFsIikpfSxjYW5jZWxEZWxheTpmdW5jdGlvbigpe251bGwhPT10aGlzLmRlbGF5ZWRUcmlnZ2VyJiYod2luZG93LmNsZWFyVGltZW91dCh0aGlzLmRlbGF5ZWRUcmlnZ2VyKSx0aGlzLmRlbGF5ZWRUcmlnZ2VyPW51bGwpfSxtZWFzdXJlOmZ1bmN0aW9uKGEsYil7dmFyIGMsZDstMTxhLkNMQVNTX05BTUUuaW5kZXhPZigiTGluZVN0cmluZyIpPyhjPXRoaXMuZ2V0QmVzdExlbmd0aChhKSxkPTEpOihjPXRoaXMuZ2V0QmVzdEFyZWEoYSksZD0yKTt0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoYix7bWVhc3VyZTpjWzBdLHVuaXRzOmNbMV0sb3JkZXI6ZCxnZW9tZXRyeTphfSl9LGdldEJlc3RBcmVhOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj10aGlzLmRpc3BsYXlTeXN0ZW1Vbml0c1t0aGlzLmRpc3BsYXlTeXN0ZW1dLGMsZCxlPTAsZj1iLmxlbmd0aDtlPGYmJiEoYz1iW2VdLGQ9dGhpcy5nZXRBcmVhKGEsCmMpLDE8ZCk7KytlKTtyZXR1cm5bZCxjXX0sZ2V0QXJlYTpmdW5jdGlvbihhLGIpe3ZhciBjLGQ7dGhpcy5nZW9kZXNpYz8oYz1hLmdldEdlb2Rlc2ljQXJlYSh0aGlzLm1hcC5nZXRQcm9qZWN0aW9uT2JqZWN0KCkpLGQ9Im0iKTooYz1hLmdldEFyZWEoKSxkPXRoaXMubWFwLmdldFVuaXRzKCkpO3ZhciBlPU9wZW5MYXllcnMuSU5DSEVTX1BFUl9VTklUW2JdO2UmJihjKj1NYXRoLnBvdyhPcGVuTGF5ZXJzLklOQ0hFU19QRVJfVU5JVFtkXS9lLDIpKTtyZXR1cm4gY30sZ2V0QmVzdExlbmd0aDpmdW5jdGlvbihhKXtmb3IodmFyIGI9dGhpcy5kaXNwbGF5U3lzdGVtVW5pdHNbdGhpcy5kaXNwbGF5U3lzdGVtXSxjLGQsZT0wLGY9Yi5sZW5ndGg7ZTxmJiYhKGM9YltlXSxkPXRoaXMuZ2V0TGVuZ3RoKGEsYyksMTxkKTsrK2UpO3JldHVybltkLGNdfSxnZXRMZW5ndGg6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkO3RoaXMuZ2VvZGVzaWM/KGM9YS5nZXRHZW9kZXNpY0xlbmd0aCh0aGlzLm1hcC5nZXRQcm9qZWN0aW9uT2JqZWN0KCkpLApkPSJtIik6KGM9YS5nZXRMZW5ndGgoKSxkPXRoaXMubWFwLmdldFVuaXRzKCkpO3ZhciBlPU9wZW5MYXllcnMuSU5DSEVTX1BFUl9VTklUW2JdO2UmJihjKj1PcGVuTGF5ZXJzLklOQ0hFU19QRVJfVU5JVFtkXS9lKTtyZXR1cm4gY30sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Db250cm9sLk1lYXN1cmUifSk7T3BlbkxheWVycy5Gb3JtYXQuV01DLnYxXzBfMD1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuRm9ybWF0LldNQy52MSx7VkVSU0lPTjoiMS4wLjAiLHNjaGVtYUxvY2F0aW9uOiJodHRwOi8vd3d3Lm9wZW5naXMubmV0L2NvbnRleHQgaHR0cDovL3NjaGVtYXMub3Blbmdpcy5uZXQvY29udGV4dC8xLjAuMC9jb250ZXh0LnhzZCIsaW5pdGlhbGl6ZTpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLkZvcm1hdC5XTUMudjEucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxbYV0pfSxyZWFkX3dtY19TUlM6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmdldENoaWxkVmFsdWUoYik7Im9iamVjdCIhPXR5cGVvZiBhLnByb2plY3Rpb25zJiYoYS5wcm9qZWN0aW9ucz17fSk7Zm9yKHZhciBjPWMuc3BsaXQoLyArLyksZD0wLGU9Yy5sZW5ndGg7ZDxlO2QrKylhLnByb2plY3Rpb25zW2NbZF1dPSEwfSx3cml0ZV93bWNfTGF5ZXI6ZnVuY3Rpb24oYSl7dmFyIGI9T3BlbkxheWVycy5Gb3JtYXQuV01DLnYxLnByb3RvdHlwZS53cml0ZV93bWNfTGF5ZXIuYXBwbHkodGhpcywKW2FdKTtpZihhLnNycyl7dmFyIGM9W10sZDtmb3IoZCBpbiBhLnNycyljLnB1c2goZCk7Yi5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZUVsZW1lbnREZWZhdWx0TlMoIlNSUyIsYy5qb2luKCIgIikpKX1iLmFwcGVuZENoaWxkKHRoaXMud3JpdGVfd21jX0Zvcm1hdExpc3QoYSkpO2IuYXBwZW5kQ2hpbGQodGhpcy53cml0ZV93bWNfU3R5bGVMaXN0KGEpKTthLmRpbWVuc2lvbnMmJmIuYXBwZW5kQ2hpbGQodGhpcy53cml0ZV93bWNfRGltZW5zaW9uTGlzdChhKSk7Yi5hcHBlbmRDaGlsZCh0aGlzLndyaXRlX3dtY19MYXllckV4dGVuc2lvbihhKSl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuRm9ybWF0LldNQy52MV8wXzAifSk7T3BlbkxheWVycy5Qb3B1cC5BbmNob3JlZD1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuUG9wdXAse3JlbGF0aXZlUG9zaXRpb246bnVsbCxrZWVwSW5NYXA6ITAsYW5jaG9yOm51bGwsaW5pdGlhbGl6ZTpmdW5jdGlvbihhLGIsYyxkLGUsZixnKXtPcGVuTGF5ZXJzLlBvcHVwLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsW2EsYixjLGQsZixnXSk7dGhpcy5hbmNob3I9bnVsbCE9ZT9lOntzaXplOm5ldyBPcGVuTGF5ZXJzLlNpemUoMCwwKSxvZmZzZXQ6bmV3IE9wZW5MYXllcnMuUGl4ZWwoMCwwKX19LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLnJlbGF0aXZlUG9zaXRpb249dGhpcy5hbmNob3I9bnVsbDtPcGVuTGF5ZXJzLlBvcHVwLnByb3RvdHlwZS5kZXN0cm95LmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sc2hvdzpmdW5jdGlvbigpe3RoaXMudXBkYXRlUG9zaXRpb24oKTtPcGVuTGF5ZXJzLlBvcHVwLnByb3RvdHlwZS5zaG93LmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sCm1vdmVUbzpmdW5jdGlvbihhKXt2YXIgYj10aGlzLnJlbGF0aXZlUG9zaXRpb247dGhpcy5yZWxhdGl2ZVBvc2l0aW9uPXRoaXMuY2FsY3VsYXRlUmVsYXRpdmVQb3NpdGlvbihhKTtPcGVuTGF5ZXJzLlBvcHVwLnByb3RvdHlwZS5tb3ZlVG8uY2FsbCh0aGlzLHRoaXMuY2FsY3VsYXRlTmV3UHgoYSkpO3RoaXMucmVsYXRpdmVQb3NpdGlvbiE9YiYmdGhpcy51cGRhdGVSZWxhdGl2ZVBvc2l0aW9uKCl9LHNldFNpemU6ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5Qb3B1cC5wcm90b3R5cGUuc2V0U2l6ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7aWYodGhpcy5sb25sYXQmJnRoaXMubWFwKXt2YXIgYj10aGlzLm1hcC5nZXRMYXllclB4RnJvbUxvbkxhdCh0aGlzLmxvbmxhdCk7dGhpcy5tb3ZlVG8oYil9fSxjYWxjdWxhdGVSZWxhdGl2ZVBvc2l0aW9uOmZ1bmN0aW9uKGEpe2E9dGhpcy5tYXAuZ2V0TG9uTGF0RnJvbUxheWVyUHgoYSk7YT10aGlzLm1hcC5nZXRFeHRlbnQoKS5kZXRlcm1pbmVRdWFkcmFudChhKTsKcmV0dXJuIE9wZW5MYXllcnMuQm91bmRzLm9wcG9zaXRlUXVhZHJhbnQoYSl9LHVwZGF0ZVJlbGF0aXZlUG9zaXRpb246ZnVuY3Rpb24oKXt9LGNhbGN1bGF0ZU5ld1B4OmZ1bmN0aW9uKGEpe2E9YS5vZmZzZXQodGhpcy5hbmNob3Iub2Zmc2V0KTt2YXIgYj10aGlzLnNpemV8fHRoaXMuY29udGVudFNpemUsYz0idCI9PXRoaXMucmVsYXRpdmVQb3NpdGlvbi5jaGFyQXQoMCk7YS55Kz1jPy1iLmg6dGhpcy5hbmNob3Iuc2l6ZS5oO2M9ImwiPT10aGlzLnJlbGF0aXZlUG9zaXRpb24uY2hhckF0KDEpO2EueCs9Yz8tYi53OnRoaXMuYW5jaG9yLnNpemUudztyZXR1cm4gYX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Qb3B1cC5BbmNob3JlZCJ9KTtPcGVuTGF5ZXJzLlBvcHVwLkZyYW1lZD1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuUG9wdXAuQW5jaG9yZWQse2ltYWdlU3JjOm51bGwsaW1hZ2VTaXplOm51bGwsaXNBbHBoYUltYWdlOiExLHBvc2l0aW9uQmxvY2tzOm51bGwsYmxvY2tzOm51bGwsZml4ZWRSZWxhdGl2ZVBvc2l0aW9uOiExLGluaXRpYWxpemU6ZnVuY3Rpb24oYSxiLGMsZCxlLGYsZyl7T3BlbkxheWVycy5Qb3B1cC5BbmNob3JlZC5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5maXhlZFJlbGF0aXZlUG9zaXRpb24mJih0aGlzLnVwZGF0ZVJlbGF0aXZlUG9zaXRpb24oKSx0aGlzLmNhbGN1bGF0ZVJlbGF0aXZlUG9zaXRpb249ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMucmVsYXRpdmVQb3NpdGlvbn0pO3RoaXMuY29udGVudERpdi5zdHlsZS5wb3NpdGlvbj0iYWJzb2x1dGUiO3RoaXMuY29udGVudERpdi5zdHlsZS56SW5kZXg9MTtmJiYodGhpcy5jbG9zZURpdi5zdHlsZS56SW5kZXg9CjEpO3RoaXMuZ3JvdXBEaXYuc3R5bGUucG9zaXRpb249ImFic29sdXRlIjt0aGlzLmdyb3VwRGl2LnN0eWxlLnRvcD0iMHB4Ijt0aGlzLmdyb3VwRGl2LnN0eWxlLmxlZnQ9IjBweCI7dGhpcy5ncm91cERpdi5zdHlsZS5oZWlnaHQ9IjEwMCUiO3RoaXMuZ3JvdXBEaXYuc3R5bGUud2lkdGg9IjEwMCUifSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5pc0FscGhhSW1hZ2U9dGhpcy5pbWFnZVNpemU9dGhpcy5pbWFnZVNyYz1udWxsO3RoaXMuZml4ZWRSZWxhdGl2ZVBvc2l0aW9uPSExO3RoaXMucG9zaXRpb25CbG9ja3M9bnVsbDtmb3IodmFyIGE9MDthPHRoaXMuYmxvY2tzLmxlbmd0aDthKyspe3ZhciBiPXRoaXMuYmxvY2tzW2FdO2IuaW1hZ2UmJmIuZGl2LnJlbW92ZUNoaWxkKGIuaW1hZ2UpO2IuaW1hZ2U9bnVsbDtiLmRpdiYmdGhpcy5ncm91cERpdi5yZW1vdmVDaGlsZChiLmRpdik7Yi5kaXY9bnVsbH10aGlzLmJsb2Nrcz1udWxsO09wZW5MYXllcnMuUG9wdXAuQW5jaG9yZWQucHJvdG90eXBlLmRlc3Ryb3kuYXBwbHkodGhpcywKYXJndW1lbnRzKX0sc2V0QmFja2dyb3VuZENvbG9yOmZ1bmN0aW9uKGEpe30sc2V0Qm9yZGVyOmZ1bmN0aW9uKCl7fSxzZXRPcGFjaXR5OmZ1bmN0aW9uKGEpe30sc2V0U2l6ZTpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLlBvcHVwLkFuY2hvcmVkLnByb3RvdHlwZS5zZXRTaXplLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLnVwZGF0ZUJsb2NrcygpfSx1cGRhdGVSZWxhdGl2ZVBvc2l0aW9uOmZ1bmN0aW9uKCl7dGhpcy5wYWRkaW5nPXRoaXMucG9zaXRpb25CbG9ja3NbdGhpcy5yZWxhdGl2ZVBvc2l0aW9uXS5wYWRkaW5nO2lmKHRoaXMuY2xvc2VEaXYpe3ZhciBhPXRoaXMuZ2V0Q29udGVudERpdlBhZGRpbmcoKTt0aGlzLmNsb3NlRGl2LnN0eWxlLnJpZ2h0PWEucmlnaHQrdGhpcy5wYWRkaW5nLnJpZ2h0KyJweCI7dGhpcy5jbG9zZURpdi5zdHlsZS50b3A9YS50b3ArdGhpcy5wYWRkaW5nLnRvcCsicHgifXRoaXMudXBkYXRlQmxvY2tzKCl9LGNhbGN1bGF0ZU5ld1B4OmZ1bmN0aW9uKGEpe3ZhciBiPQpPcGVuTGF5ZXJzLlBvcHVwLkFuY2hvcmVkLnByb3RvdHlwZS5jYWxjdWxhdGVOZXdQeC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7cmV0dXJuIGI9Yi5vZmZzZXQodGhpcy5wb3NpdGlvbkJsb2Nrc1t0aGlzLnJlbGF0aXZlUG9zaXRpb25dLm9mZnNldCl9LGNyZWF0ZUJsb2NrczpmdW5jdGlvbigpe3RoaXMuYmxvY2tzPVtdO3ZhciBhPW51bGwsYjtmb3IoYiBpbiB0aGlzLnBvc2l0aW9uQmxvY2tzKXthPWI7YnJlYWt9YT10aGlzLnBvc2l0aW9uQmxvY2tzW2FdO2ZvcihiPTA7YjxhLmJsb2Nrcy5sZW5ndGg7YisrKXt2YXIgYz17fTt0aGlzLmJsb2Nrcy5wdXNoKGMpO2MuZGl2PU9wZW5MYXllcnMuVXRpbC5jcmVhdGVEaXYodGhpcy5pZCsiX0ZyYW1lRGVjb3JhdGlvbkRpdl8iK2IsbnVsbCxudWxsLG51bGwsImFic29sdXRlIixudWxsLCJoaWRkZW4iLG51bGwpO2MuaW1hZ2U9KHRoaXMuaXNBbHBoYUltYWdlP09wZW5MYXllcnMuVXRpbC5jcmVhdGVBbHBoYUltYWdlRGl2Ok9wZW5MYXllcnMuVXRpbC5jcmVhdGVJbWFnZSkodGhpcy5pZCsKIl9GcmFtZURlY29yYXRpb25JbWdfIitiLG51bGwsdGhpcy5pbWFnZVNpemUsdGhpcy5pbWFnZVNyYywiYWJzb2x1dGUiLG51bGwsbnVsbCxudWxsKTtjLmRpdi5hcHBlbmRDaGlsZChjLmltYWdlKTt0aGlzLmdyb3VwRGl2LmFwcGVuZENoaWxkKGMuZGl2KX19LHVwZGF0ZUJsb2NrczpmdW5jdGlvbigpe3RoaXMuYmxvY2tzfHx0aGlzLmNyZWF0ZUJsb2NrcygpO2lmKHRoaXMuc2l6ZSYmdGhpcy5yZWxhdGl2ZVBvc2l0aW9uKXtmb3IodmFyIGE9dGhpcy5wb3NpdGlvbkJsb2Nrc1t0aGlzLnJlbGF0aXZlUG9zaXRpb25dLGI9MDtiPGEuYmxvY2tzLmxlbmd0aDtiKyspe3ZhciBjPWEuYmxvY2tzW2JdLGQ9dGhpcy5ibG9ja3NbYl0sZT1jLmFuY2hvci5sZWZ0LGY9Yy5hbmNob3IuYm90dG9tLGc9Yy5hbmNob3IucmlnaHQsaD1jLmFuY2hvci50b3Asaz1pc05hTihjLnNpemUudyk/dGhpcy5zaXplLnctKGcrZSk6Yy5zaXplLncsbD1pc05hTihjLnNpemUuaCk/dGhpcy5zaXplLmgtKGYrCmgpOmMuc2l6ZS5oO2QuZGl2LnN0eWxlLndpZHRoPSgwPms/MDprKSsicHgiO2QuZGl2LnN0eWxlLmhlaWdodD0oMD5sPzA6bCkrInB4IjtkLmRpdi5zdHlsZS5sZWZ0PW51bGwhPWU/ZSsicHgiOiIiO2QuZGl2LnN0eWxlLmJvdHRvbT1udWxsIT1mP2YrInB4IjoiIjtkLmRpdi5zdHlsZS5yaWdodD1udWxsIT1nP2crInB4IjoiIjtkLmRpdi5zdHlsZS50b3A9bnVsbCE9aD9oKyJweCI6IiI7ZC5pbWFnZS5zdHlsZS5sZWZ0PWMucG9zaXRpb24ueCsicHgiO2QuaW1hZ2Uuc3R5bGUudG9wPWMucG9zaXRpb24ueSsicHgifXRoaXMuY29udGVudERpdi5zdHlsZS5sZWZ0PXRoaXMucGFkZGluZy5sZWZ0KyJweCI7dGhpcy5jb250ZW50RGl2LnN0eWxlLnRvcD10aGlzLnBhZGRpbmcudG9wKyJweCJ9fSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLlBvcHVwLkZyYW1lZCJ9KTtPcGVuTGF5ZXJzLlBvcHVwLkZyYW1lZENsb3VkPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Qb3B1cC5GcmFtZWQse2NvbnRlbnREaXNwbGF5Q2xhc3M6Im9sRnJhbWVkQ2xvdWRQb3B1cENvbnRlbnQiLGF1dG9TaXplOiEwLHBhbk1hcElmT3V0T2ZWaWV3OiEwLGltYWdlU2l6ZTpuZXcgT3BlbkxheWVycy5TaXplKDEyNzYsNzM2KSxpc0FscGhhSW1hZ2U6ITEsZml4ZWRSZWxhdGl2ZVBvc2l0aW9uOiExLHBvc2l0aW9uQmxvY2tzOnt0bDp7b2Zmc2V0Om5ldyBPcGVuTGF5ZXJzLlBpeGVsKDQ0LDApLHBhZGRpbmc6bmV3IE9wZW5MYXllcnMuQm91bmRzKDgsNDAsOCw5KSxibG9ja3M6W3tzaXplOm5ldyBPcGVuTGF5ZXJzLlNpemUoImF1dG8iLCJhdXRvIiksYW5jaG9yOm5ldyBPcGVuTGF5ZXJzLkJvdW5kcygwLDUxLDIyLDApLHBvc2l0aW9uOm5ldyBPcGVuTGF5ZXJzLlBpeGVsKDAsMCl9LHtzaXplOm5ldyBPcGVuTGF5ZXJzLlNpemUoMjIsImF1dG8iKSxhbmNob3I6bmV3IE9wZW5MYXllcnMuQm91bmRzKG51bGwsCjUwLDAsMCkscG9zaXRpb246bmV3IE9wZW5MYXllcnMuUGl4ZWwoLTEyMzgsMCl9LHtzaXplOm5ldyBPcGVuTGF5ZXJzLlNpemUoImF1dG8iLDE5KSxhbmNob3I6bmV3IE9wZW5MYXllcnMuQm91bmRzKDAsMzIsMjIsbnVsbCkscG9zaXRpb246bmV3IE9wZW5MYXllcnMuUGl4ZWwoMCwtNjMxKX0se3NpemU6bmV3IE9wZW5MYXllcnMuU2l6ZSgyMiwxOCksYW5jaG9yOm5ldyBPcGVuTGF5ZXJzLkJvdW5kcyhudWxsLDMyLDAsbnVsbCkscG9zaXRpb246bmV3IE9wZW5MYXllcnMuUGl4ZWwoLTEyMzgsLTYzMil9LHtzaXplOm5ldyBPcGVuTGF5ZXJzLlNpemUoODEsMzUpLGFuY2hvcjpuZXcgT3BlbkxheWVycy5Cb3VuZHMobnVsbCwwLDAsbnVsbCkscG9zaXRpb246bmV3IE9wZW5MYXllcnMuUGl4ZWwoMCwtNjg4KX1dfSx0cjp7b2Zmc2V0Om5ldyBPcGVuTGF5ZXJzLlBpeGVsKC00NSwwKSxwYWRkaW5nOm5ldyBPcGVuTGF5ZXJzLkJvdW5kcyg4LDQwLDgsOSksYmxvY2tzOlt7c2l6ZTpuZXcgT3BlbkxheWVycy5TaXplKCJhdXRvIiwKImF1dG8iKSxhbmNob3I6bmV3IE9wZW5MYXllcnMuQm91bmRzKDAsNTEsMjIsMCkscG9zaXRpb246bmV3IE9wZW5MYXllcnMuUGl4ZWwoMCwwKX0se3NpemU6bmV3IE9wZW5MYXllcnMuU2l6ZSgyMiwiYXV0byIpLGFuY2hvcjpuZXcgT3BlbkxheWVycy5Cb3VuZHMobnVsbCw1MCwwLDApLHBvc2l0aW9uOm5ldyBPcGVuTGF5ZXJzLlBpeGVsKC0xMjM4LDApfSx7c2l6ZTpuZXcgT3BlbkxheWVycy5TaXplKCJhdXRvIiwxOSksYW5jaG9yOm5ldyBPcGVuTGF5ZXJzLkJvdW5kcygwLDMyLDIyLG51bGwpLHBvc2l0aW9uOm5ldyBPcGVuTGF5ZXJzLlBpeGVsKDAsLTYzMSl9LHtzaXplOm5ldyBPcGVuTGF5ZXJzLlNpemUoMjIsMTkpLGFuY2hvcjpuZXcgT3BlbkxheWVycy5Cb3VuZHMobnVsbCwzMiwwLG51bGwpLHBvc2l0aW9uOm5ldyBPcGVuTGF5ZXJzLlBpeGVsKC0xMjM4LC02MzEpfSx7c2l6ZTpuZXcgT3BlbkxheWVycy5TaXplKDgxLDM1KSxhbmNob3I6bmV3IE9wZW5MYXllcnMuQm91bmRzKDAsCjAsbnVsbCxudWxsKSxwb3NpdGlvbjpuZXcgT3BlbkxheWVycy5QaXhlbCgtMjE1LC02ODcpfV19LGJsOntvZmZzZXQ6bmV3IE9wZW5MYXllcnMuUGl4ZWwoNDUsMCkscGFkZGluZzpuZXcgT3BlbkxheWVycy5Cb3VuZHMoOCw5LDgsNDApLGJsb2Nrczpbe3NpemU6bmV3IE9wZW5MYXllcnMuU2l6ZSgiYXV0byIsImF1dG8iKSxhbmNob3I6bmV3IE9wZW5MYXllcnMuQm91bmRzKDAsMjEsMjIsMzIpLHBvc2l0aW9uOm5ldyBPcGVuTGF5ZXJzLlBpeGVsKDAsMCl9LHtzaXplOm5ldyBPcGVuTGF5ZXJzLlNpemUoMjIsImF1dG8iKSxhbmNob3I6bmV3IE9wZW5MYXllcnMuQm91bmRzKG51bGwsMjEsMCwzMikscG9zaXRpb246bmV3IE9wZW5MYXllcnMuUGl4ZWwoLTEyMzgsMCl9LHtzaXplOm5ldyBPcGVuTGF5ZXJzLlNpemUoImF1dG8iLDIxKSxhbmNob3I6bmV3IE9wZW5MYXllcnMuQm91bmRzKDAsMCwyMixudWxsKSxwb3NpdGlvbjpuZXcgT3BlbkxheWVycy5QaXhlbCgwLC02MjkpfSx7c2l6ZTpuZXcgT3BlbkxheWVycy5TaXplKDIyLAoyMSksYW5jaG9yOm5ldyBPcGVuTGF5ZXJzLkJvdW5kcyhudWxsLDAsMCxudWxsKSxwb3NpdGlvbjpuZXcgT3BlbkxheWVycy5QaXhlbCgtMTIzOCwtNjI5KX0se3NpemU6bmV3IE9wZW5MYXllcnMuU2l6ZSg4MSwzMyksYW5jaG9yOm5ldyBPcGVuTGF5ZXJzLkJvdW5kcyhudWxsLG51bGwsMCwwKSxwb3NpdGlvbjpuZXcgT3BlbkxheWVycy5QaXhlbCgtMTAxLC02NzQpfV19LGJyOntvZmZzZXQ6bmV3IE9wZW5MYXllcnMuUGl4ZWwoLTQ0LDApLHBhZGRpbmc6bmV3IE9wZW5MYXllcnMuQm91bmRzKDgsOSw4LDQwKSxibG9ja3M6W3tzaXplOm5ldyBPcGVuTGF5ZXJzLlNpemUoImF1dG8iLCJhdXRvIiksYW5jaG9yOm5ldyBPcGVuTGF5ZXJzLkJvdW5kcygwLDIxLDIyLDMyKSxwb3NpdGlvbjpuZXcgT3BlbkxheWVycy5QaXhlbCgwLDApfSx7c2l6ZTpuZXcgT3BlbkxheWVycy5TaXplKDIyLCJhdXRvIiksYW5jaG9yOm5ldyBPcGVuTGF5ZXJzLkJvdW5kcyhudWxsLDIxLDAsMzIpLHBvc2l0aW9uOm5ldyBPcGVuTGF5ZXJzLlBpeGVsKC0xMjM4LAowKX0se3NpemU6bmV3IE9wZW5MYXllcnMuU2l6ZSgiYXV0byIsMjEpLGFuY2hvcjpuZXcgT3BlbkxheWVycy5Cb3VuZHMoMCwwLDIyLG51bGwpLHBvc2l0aW9uOm5ldyBPcGVuTGF5ZXJzLlBpeGVsKDAsLTYyOSl9LHtzaXplOm5ldyBPcGVuTGF5ZXJzLlNpemUoMjIsMjEpLGFuY2hvcjpuZXcgT3BlbkxheWVycy5Cb3VuZHMobnVsbCwwLDAsbnVsbCkscG9zaXRpb246bmV3IE9wZW5MYXllcnMuUGl4ZWwoLTEyMzgsLTYyOSl9LHtzaXplOm5ldyBPcGVuTGF5ZXJzLlNpemUoODEsMzMpLGFuY2hvcjpuZXcgT3BlbkxheWVycy5Cb3VuZHMoMCxudWxsLG51bGwsMCkscG9zaXRpb246bmV3IE9wZW5MYXllcnMuUGl4ZWwoLTMxMSwtNjc0KX1dfX0sbWluU2l6ZTpuZXcgT3BlbkxheWVycy5TaXplKDEwNSwxMCksbWF4U2l6ZTpuZXcgT3BlbkxheWVycy5TaXplKDEyMDAsNjYwKSxpbml0aWFsaXplOmZ1bmN0aW9uKGEsYixjLGQsZSxmLGcpe3RoaXMuaW1hZ2VTcmM9T3BlbkxheWVycy5VdGlsLmdldEltYWdlTG9jYXRpb24oImNsb3VkLXBvcHVwLXJlbGF0aXZlLnBuZyIpOwpPcGVuTGF5ZXJzLlBvcHVwLkZyYW1lZC5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5jb250ZW50RGl2LmNsYXNzTmFtZT10aGlzLmNvbnRlbnREaXNwbGF5Q2xhc3N9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuUG9wdXAuRnJhbWVkQ2xvdWQifSk7T3BlbkxheWVycy5UaWxlLkltYWdlLklGcmFtZT17dXNlSUZyYW1lOm51bGwsYmxhbmtJbWFnZVVybDoiZGF0YTppbWFnZS9naWY7YmFzZTY0LFIwbEdPRGxoQVFBQkFJQUFBQUFBQVAvLy95SDVCQUVBQUFBQUxBQUFBQUFCQUFFQVFBSUJSQUE3IixkcmF3OmZ1bmN0aW9uKCl7aWYoT3BlbkxheWVycy5UaWxlLkltYWdlLnByb3RvdHlwZS5zaG91bGREcmF3LmNhbGwodGhpcykpe3ZhciBhPXRoaXMubGF5ZXIuZ2V0VVJMKHRoaXMuYm91bmRzKSxiPXRoaXMudXNlSUZyYW1lO3RoaXMudXNlSUZyYW1lPW51bGwhPT10aGlzLm1heEdldFVybExlbmd0aCYmIXRoaXMubGF5ZXIuYXN5bmMmJmEubGVuZ3RoPnRoaXMubWF4R2V0VXJsTGVuZ3RoO2E9YiYmIXRoaXMudXNlSUZyYW1lO2I9IWImJnRoaXMudXNlSUZyYW1lO2lmKGF8fGIpdGhpcy5pbWdEaXYmJnRoaXMuaW1nRGl2LnBhcmVudE5vZGU9PT10aGlzLmZyYW1lJiZ0aGlzLmZyYW1lLnJlbW92ZUNoaWxkKHRoaXMuaW1nRGl2KSx0aGlzLmltZ0Rpdj0KbnVsbCxhJiZ0aGlzLmZyYW1lLnJlbW92ZUNoaWxkKHRoaXMuZnJhbWUuZmlyc3RDaGlsZCl9cmV0dXJuIE9wZW5MYXllcnMuVGlsZS5JbWFnZS5wcm90b3R5cGUuZHJhdy5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGdldEltYWdlOmZ1bmN0aW9uKCl7aWYoITA9PT10aGlzLnVzZUlGcmFtZSl7aWYoIXRoaXMuZnJhbWUuY2hpbGROb2Rlcy5sZW5ndGgpe3ZhciBhPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpLGI9YS5zdHlsZTtiLnBvc2l0aW9uPSJhYnNvbHV0ZSI7Yi53aWR0aD0iMTAwJSI7Yi5oZWlnaHQ9IjEwMCUiO2IuekluZGV4PTE7Yi5iYWNrZ3JvdW5kSW1hZ2U9InVybCgiK3RoaXMuYmxhbmtJbWFnZVVybCsiKSI7dGhpcy5mcmFtZS5hcHBlbmRDaGlsZChhKX1hPXRoaXMuaWQrIl9pRnJhbWUiOzk+cGFyc2VGbG9hdChuYXZpZ2F0b3IuYXBwVmVyc2lvbi5zcGxpdCgiTVNJRSIpWzFdKT8oYj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCc8aWZyYW1lIG5hbWU9IicrYSsnIj4nKSwKYi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3I9IiNGRkZGRkYiLGIuc3R5bGUuZmlsdGVyPSJjaHJvbWEoY29sb3I9I0ZGRkZGRikiKTooYj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpZnJhbWUiKSxiLnN0eWxlLmJhY2tncm91bmRDb2xvcj0idHJhbnNwYXJlbnQiLGIubmFtZT1hKTtiLnNjcm9sbGluZz0ibm8iO2IubWFyZ2luV2lkdGg9IjBweCI7Yi5tYXJnaW5IZWlnaHQ9IjBweCI7Yi5mcmFtZUJvcmRlcj0iMCI7Yi5zdHlsZS5wb3NpdGlvbj0iYWJzb2x1dGUiO2Iuc3R5bGUud2lkdGg9IjEwMCUiO2Iuc3R5bGUuaGVpZ2h0PSIxMDAlIjsxPnRoaXMubGF5ZXIub3BhY2l0eSYmT3BlbkxheWVycy5VdGlsLm1vZGlmeURPTUVsZW1lbnQoYixudWxsLG51bGwsbnVsbCxudWxsLG51bGwsbnVsbCx0aGlzLmxheWVyLm9wYWNpdHkpO3RoaXMuZnJhbWUuYXBwZW5kQ2hpbGQoYik7cmV0dXJuIHRoaXMuaW1nRGl2PWJ9cmV0dXJuIE9wZW5MYXllcnMuVGlsZS5JbWFnZS5wcm90b3R5cGUuZ2V0SW1hZ2UuYXBwbHkodGhpcywKYXJndW1lbnRzKX0sY3JlYXRlUmVxdWVzdEZvcm06ZnVuY3Rpb24oKXt2YXIgYT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJmb3JtIik7YS5tZXRob2Q9IlBPU1QiO3ZhciBiPXRoaXMubGF5ZXIucGFyYW1zLl9PTFNBTFQsYj0oYj9iKyJfIjoiIikrdGhpcy5ib3VuZHMudG9CQk9YKCk7YS5hY3Rpb249T3BlbkxheWVycy5VdGlsLnVybEFwcGVuZCh0aGlzLmxheWVyLnVybCxiKTthLnRhcmdldD10aGlzLmlkKyJfaUZyYW1lIjt0aGlzLmxheWVyLmdldEltYWdlU2l6ZSgpO3ZhciBiPU9wZW5MYXllcnMuVXRpbC5nZXRQYXJhbWV0ZXJzKHRoaXMudXJsKSxjLGQ7Zm9yKGQgaW4gYiljPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImlucHV0IiksYy50eXBlPSJoaWRkZW4iLGMubmFtZT1kLGMudmFsdWU9YltkXSxhLmFwcGVuZENoaWxkKGMpO3JldHVybiBhfSxzZXRJbWdTcmM6ZnVuY3Rpb24oYSl7aWYoITA9PT10aGlzLnVzZUlGcmFtZSlpZihhKXt2YXIgYj10aGlzLmNyZWF0ZVJlcXVlc3RGb3JtKCk7CnRoaXMuZnJhbWUuYXBwZW5kQ2hpbGQoYik7Yi5zdWJtaXQoKTt0aGlzLmZyYW1lLnJlbW92ZUNoaWxkKGIpfWVsc2UgdGhpcy5pbWdEaXYucGFyZW50Tm9kZT09PXRoaXMuZnJhbWUmJih0aGlzLmZyYW1lLnJlbW92ZUNoaWxkKHRoaXMuaW1nRGl2KSx0aGlzLmltZ0Rpdj1udWxsKTtlbHNlIE9wZW5MYXllcnMuVGlsZS5JbWFnZS5wcm90b3R5cGUuc2V0SW1nU3JjLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sb25JbWFnZUxvYWQ6ZnVuY3Rpb24oKXtPcGVuTGF5ZXJzLlRpbGUuSW1hZ2UucHJvdG90eXBlLm9uSW1hZ2VMb2FkLmFwcGx5KHRoaXMsYXJndW1lbnRzKTshMD09PXRoaXMudXNlSUZyYW1lJiYodGhpcy5pbWdEaXYuc3R5bGUub3BhY2l0eT0xLHRoaXMuZnJhbWUuc3R5bGUub3BhY2l0eT10aGlzLmxheWVyLm9wYWNpdHkpfSxjcmVhdGVCYWNrQnVmZmVyOmZ1bmN0aW9uKCl7dmFyIGE7ITE9PT10aGlzLnVzZUlGcmFtZSYmKGE9T3BlbkxheWVycy5UaWxlLkltYWdlLnByb3RvdHlwZS5jcmVhdGVCYWNrQnVmZmVyLmNhbGwodGhpcykpOwpyZXR1cm4gYX19O09wZW5MYXllcnMuRm9ybWF0LlNPU0NhcGFiaWxpdGllcz1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuRm9ybWF0LlhNTC5WZXJzaW9uZWRPR0Mse2RlZmF1bHRWZXJzaW9uOiIxLjAuMCIsQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Gb3JtYXQuU09TQ2FwYWJpbGl0aWVzIn0pO09wZW5MYXllcnMuRm9ybWF0LlNPU0NhcGFiaWxpdGllcy52MV8wXzA9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkZvcm1hdC5TT1NDYXBhYmlsaXRpZXMse25hbWVzcGFjZXM6e293czoiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9vd3MvMS4xIixzb3M6Imh0dHA6Ly93d3cub3Blbmdpcy5uZXQvc29zLzEuMCIsZ21sOiJodHRwOi8vd3d3Lm9wZW5naXMubmV0L2dtbCIseGxpbms6Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsifSxyZWdFeGVzOnt0cmltU3BhY2U6L15ccyp8XHMqJC9nLHJlbW92ZVNwYWNlOi9ccyovZyxzcGxpdFNwYWNlOi9ccysvLHRyaW1Db21tYTovXHMqLFxzKi9nfSxpbml0aWFsaXplOmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuRm9ybWF0LlhNTC5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLFthXSk7dGhpcy5vcHRpb25zPWF9LHJlYWQ6ZnVuY3Rpb24oYSl7InN0cmluZyI9PXR5cGVvZiBhJiYoYT1PcGVuTGF5ZXJzLkZvcm1hdC5YTUwucHJvdG90eXBlLnJlYWQuYXBwbHkodGhpcywKW2FdKSk7YSYmOT09YS5ub2RlVHlwZSYmKGE9YS5kb2N1bWVudEVsZW1lbnQpO3ZhciBiPXt9O3RoaXMucmVhZE5vZGUoYSxiKTtyZXR1cm4gYn0scmVhZGVyczp7Z21sOk9wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKHtuYW1lOmZ1bmN0aW9uKGEsYil7Yi5uYW1lPXRoaXMuZ2V0Q2hpbGRWYWx1ZShhKX0sVGltZVBlcmlvZDpmdW5jdGlvbihhLGIpe2IudGltZVBlcmlvZD17fTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYi50aW1lUGVyaW9kKX0sYmVnaW5Qb3NpdGlvbjpmdW5jdGlvbihhLGIpe2IuYmVnaW5Qb3NpdGlvbj10aGlzLmdldENoaWxkVmFsdWUoYSl9LGVuZFBvc2l0aW9uOmZ1bmN0aW9uKGEsYil7Yi5lbmRQb3NpdGlvbj10aGlzLmdldENoaWxkVmFsdWUoYSl9fSxPcGVuTGF5ZXJzLkZvcm1hdC5HTUwudjMucHJvdG90eXBlLnJlYWRlcnMuZ21sKSxzb3M6e0NhcGFiaWxpdGllczpmdW5jdGlvbihhLGIpe3RoaXMucmVhZENoaWxkTm9kZXMoYSxiKX0sQ29udGVudHM6ZnVuY3Rpb24oYSwKYil7Yi5jb250ZW50cz17fTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYi5jb250ZW50cyl9LE9ic2VydmF0aW9uT2ZmZXJpbmdMaXN0OmZ1bmN0aW9uKGEsYil7Yi5vZmZlcmluZ0xpc3Q9e307dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGIub2ZmZXJpbmdMaXN0KX0sT2JzZXJ2YXRpb25PZmZlcmluZzpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuZ2V0QXR0cmlidXRlTlMoYSx0aGlzLm5hbWVzcGFjZXMuZ21sLCJpZCIpO2JbY109e3Byb2NlZHVyZXM6W10sb2JzZXJ2ZWRQcm9wZXJ0aWVzOltdLGZlYXR1cmVPZkludGVyZXN0SWRzOltdLHJlc3BvbnNlRm9ybWF0czpbXSxyZXN1bHRNb2RlbHM6W10scmVzcG9uc2VNb2RlczpbXX07dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGJbY10pfSx0aW1lOmZ1bmN0aW9uKGEsYil7Yi50aW1lPXt9O3RoaXMucmVhZENoaWxkTm9kZXMoYSxiLnRpbWUpfSxwcm9jZWR1cmU6ZnVuY3Rpb24oYSxiKXtiLnByb2NlZHVyZXMucHVzaCh0aGlzLmdldEF0dHJpYnV0ZU5TKGEsCnRoaXMubmFtZXNwYWNlcy54bGluaywiaHJlZiIpKX0sb2JzZXJ2ZWRQcm9wZXJ0eTpmdW5jdGlvbihhLGIpe2Iub2JzZXJ2ZWRQcm9wZXJ0aWVzLnB1c2godGhpcy5nZXRBdHRyaWJ1dGVOUyhhLHRoaXMubmFtZXNwYWNlcy54bGluaywiaHJlZiIpKX0sZmVhdHVyZU9mSW50ZXJlc3Q6ZnVuY3Rpb24oYSxiKXtiLmZlYXR1cmVPZkludGVyZXN0SWRzLnB1c2godGhpcy5nZXRBdHRyaWJ1dGVOUyhhLHRoaXMubmFtZXNwYWNlcy54bGluaywiaHJlZiIpKX0scmVzcG9uc2VGb3JtYXQ6ZnVuY3Rpb24oYSxiKXtiLnJlc3BvbnNlRm9ybWF0cy5wdXNoKHRoaXMuZ2V0Q2hpbGRWYWx1ZShhKSl9LHJlc3VsdE1vZGVsOmZ1bmN0aW9uKGEsYil7Yi5yZXN1bHRNb2RlbHMucHVzaCh0aGlzLmdldENoaWxkVmFsdWUoYSkpfSxyZXNwb25zZU1vZGU6ZnVuY3Rpb24oYSxiKXtiLnJlc3BvbnNlTW9kZXMucHVzaCh0aGlzLmdldENoaWxkVmFsdWUoYSkpfX0sb3dzOk9wZW5MYXllcnMuRm9ybWF0Lk9XU0NvbW1vbi52MV8xXzAucHJvdG90eXBlLnJlYWRlcnMub3dzfSwKQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Gb3JtYXQuU09TQ2FwYWJpbGl0aWVzLnYxXzBfMCJ9KTtPcGVuTGF5ZXJzLkhhbmRsZXIuUGluY2g9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkhhbmRsZXIse3N0YXJ0ZWQ6ITEsc3RvcERvd246ITEscGluY2hpbmc6ITEsbGFzdDpudWxsLHN0YXJ0Om51bGwsdG91Y2hzdGFydDpmdW5jdGlvbihhKXt2YXIgYj0hMDt0aGlzLnBpbmNoaW5nPSExO2lmKE9wZW5MYXllcnMuRXZlbnQuaXNNdWx0aVRvdWNoKGEpKXRoaXMuc3RhcnRlZD0hMCx0aGlzLmxhc3Q9dGhpcy5zdGFydD17ZGlzdGFuY2U6dGhpcy5nZXREaXN0YW5jZShhLnRvdWNoZXMpLGRlbHRhOjAsc2NhbGU6MX0sdGhpcy5jYWxsYmFjaygic3RhcnQiLFthLHRoaXMuc3RhcnRdKSxiPSF0aGlzLnN0b3BEb3duO2Vsc2V7aWYodGhpcy5zdGFydGVkKXJldHVybiExO3RoaXMuc3RhcnRlZD0hMTt0aGlzLmxhc3Q9dGhpcy5zdGFydD1udWxsfU9wZW5MYXllcnMuRXZlbnQucHJldmVudERlZmF1bHQoYSk7cmV0dXJuIGJ9LHRvdWNobW92ZTpmdW5jdGlvbihhKXtpZih0aGlzLnN0YXJ0ZWQmJgpPcGVuTGF5ZXJzLkV2ZW50LmlzTXVsdGlUb3VjaChhKSl7dGhpcy5waW5jaGluZz0hMDt2YXIgYj10aGlzLmdldFBpbmNoRGF0YShhKTt0aGlzLmNhbGxiYWNrKCJtb3ZlIixbYSxiXSk7dGhpcy5sYXN0PWI7T3BlbkxheWVycy5FdmVudC5zdG9wKGEpfWVsc2UgaWYodGhpcy5zdGFydGVkKXJldHVybiExO3JldHVybiEwfSx0b3VjaGVuZDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5zdGFydGVkJiYhT3BlbkxheWVycy5FdmVudC5pc011bHRpVG91Y2goYSk/KHRoaXMucGluY2hpbmc9dGhpcy5zdGFydGVkPSExLHRoaXMuY2FsbGJhY2soImRvbmUiLFthLHRoaXMuc3RhcnQsdGhpcy5sYXN0XSksdGhpcy5sYXN0PXRoaXMuc3RhcnQ9bnVsbCwhMSk6ITB9LGFjdGl2YXRlOmZ1bmN0aW9uKCl7dmFyIGE9ITE7T3BlbkxheWVycy5IYW5kbGVyLnByb3RvdHlwZS5hY3RpdmF0ZS5hcHBseSh0aGlzLGFyZ3VtZW50cykmJih0aGlzLnBpbmNoaW5nPSExLGE9ITApO3JldHVybiBhfSxkZWFjdGl2YXRlOmZ1bmN0aW9uKCl7dmFyIGE9CiExO09wZW5MYXllcnMuSGFuZGxlci5wcm90b3R5cGUuZGVhY3RpdmF0ZS5hcHBseSh0aGlzLGFyZ3VtZW50cykmJih0aGlzLnBpbmNoaW5nPXRoaXMuc3RhcnRlZD0hMSx0aGlzLmxhc3Q9dGhpcy5zdGFydD1udWxsLGE9ITApO3JldHVybiBhfSxnZXREaXN0YW5jZTpmdW5jdGlvbihhKXt2YXIgYj1hWzBdO2E9YVsxXTtyZXR1cm4gTWF0aC5zcXJ0KE1hdGgucG93KGIub2xDbGllbnRYLWEub2xDbGllbnRYLDIpK01hdGgucG93KGIub2xDbGllbnRZLWEub2xDbGllbnRZLDIpKX0sZ2V0UGluY2hEYXRhOmZ1bmN0aW9uKGEpe2E9dGhpcy5nZXREaXN0YW5jZShhLnRvdWNoZXMpO3JldHVybntkaXN0YW5jZTphLGRlbHRhOnRoaXMubGFzdC5kaXN0YW5jZS1hLHNjYWxlOmEvdGhpcy5zdGFydC5kaXN0YW5jZX19LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuSGFuZGxlci5QaW5jaCJ9KTtPcGVuTGF5ZXJzLkNvbnRyb2wuTmF2VG9vbGJhcj1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuQ29udHJvbC5QYW5lbCx7aW5pdGlhbGl6ZTpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLkNvbnRyb2wuUGFuZWwucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxbYV0pO3RoaXMuYWRkQ29udHJvbHMoW25ldyBPcGVuTGF5ZXJzLkNvbnRyb2wuTmF2aWdhdGlvbixuZXcgT3BlbkxheWVycy5Db250cm9sLlpvb21Cb3hdKX0sZHJhdzpmdW5jdGlvbigpe3ZhciBhPU9wZW5MYXllcnMuQ29udHJvbC5QYW5lbC5wcm90b3R5cGUuZHJhdy5hcHBseSh0aGlzLGFyZ3VtZW50cyk7bnVsbD09PXRoaXMuZGVmYXVsdENvbnRyb2wmJih0aGlzLmRlZmF1bHRDb250cm9sPXRoaXMuY29udHJvbHNbMF0pO3JldHVybiBhfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkNvbnRyb2wuTmF2VG9vbGJhciJ9KTtPcGVuTGF5ZXJzLlN0cmF0ZWd5LlJlZnJlc2g9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLlN0cmF0ZWd5LHtmb3JjZTohMSxpbnRlcnZhbDowLHRpbWVyOm51bGwsYWN0aXZhdGU6ZnVuY3Rpb24oKXt2YXIgYT1PcGVuTGF5ZXJzLlN0cmF0ZWd5LnByb3RvdHlwZS5hY3RpdmF0ZS5jYWxsKHRoaXMpO2EmJighMD09PXRoaXMubGF5ZXIudmlzaWJpbGl0eSYmdGhpcy5zdGFydCgpLHRoaXMubGF5ZXIuZXZlbnRzLm9uKHt2aXNpYmlsaXR5Y2hhbmdlZDp0aGlzLnJlc2V0LHNjb3BlOnRoaXN9KSk7cmV0dXJuIGF9LGRlYWN0aXZhdGU6ZnVuY3Rpb24oKXt2YXIgYT1PcGVuTGF5ZXJzLlN0cmF0ZWd5LnByb3RvdHlwZS5kZWFjdGl2YXRlLmNhbGwodGhpcyk7YSYmKHRoaXMuc3RvcCgpLHRoaXMubGF5ZXIuZXZlbnRzLnVuKHt2aXNpYmlsaXR5Y2hhbmdlZDp0aGlzLnJlc2V0LHNjb3BlOnRoaXN9KSk7cmV0dXJuIGF9LHJlc2V0OmZ1bmN0aW9uKCl7ITA9PT10aGlzLmxheWVyLnZpc2liaWxpdHk/CnRoaXMuc3RhcnQoKTp0aGlzLnN0b3AoKX0sc3RhcnQ6ZnVuY3Rpb24oKXt0aGlzLmludGVydmFsJiYoIm51bWJlciI9PT10eXBlb2YgdGhpcy5pbnRlcnZhbCYmMDx0aGlzLmludGVydmFsKSYmKHRoaXMudGltZXI9d2luZG93LnNldEludGVydmFsKE9wZW5MYXllcnMuRnVuY3Rpb24uYmluZCh0aGlzLnJlZnJlc2gsdGhpcyksdGhpcy5pbnRlcnZhbCkpfSxyZWZyZXNoOmZ1bmN0aW9uKCl7dGhpcy5sYXllciYmKHRoaXMubGF5ZXIucmVmcmVzaCYmImZ1bmN0aW9uIj09dHlwZW9mIHRoaXMubGF5ZXIucmVmcmVzaCkmJnRoaXMubGF5ZXIucmVmcmVzaCh7Zm9yY2U6dGhpcy5mb3JjZX0pfSxzdG9wOmZ1bmN0aW9uKCl7bnVsbCE9PXRoaXMudGltZXImJih3aW5kb3cuY2xlYXJJbnRlcnZhbCh0aGlzLnRpbWVyKSx0aGlzLnRpbWVyPW51bGwpfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLlN0cmF0ZWd5LlJlZnJlc2gifSk7T3BlbkxheWVycy5MYXllci5BcmNHSVM5M1Jlc3Q9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkxheWVyLkdyaWQse0RFRkFVTFRfUEFSQU1TOntmb3JtYXQ6InBuZyJ9LGlzQmFzZUxheWVyOiEwLGluaXRpYWxpemU6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9W107Yz1PcGVuTGF5ZXJzLlV0aWwudXBwZXJDYXNlT2JqZWN0KGMpO2UucHVzaChhLGIsYyxkKTtPcGVuTGF5ZXJzLkxheWVyLkdyaWQucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxlKTtPcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyh0aGlzLnBhcmFtcyxPcGVuTGF5ZXJzLlV0aWwudXBwZXJDYXNlT2JqZWN0KHRoaXMuREVGQVVMVF9QQVJBTVMpKTt0aGlzLnBhcmFtcy5UUkFOU1BBUkVOVCYmInRydWUiPT10aGlzLnBhcmFtcy5UUkFOU1BBUkVOVC50b1N0cmluZygpLnRvTG93ZXJDYXNlKCkmJihudWxsIT1kJiZkLmlzQmFzZUxheWVyfHwodGhpcy5pc0Jhc2VMYXllcj0hMSksImpwZyI9PXRoaXMucGFyYW1zLkZPUk1BVCYmCih0aGlzLnBhcmFtcy5GT1JNQVQ9T3BlbkxheWVycy5VdGlsLmFscGhhSGFjaygpPyJnaWYiOiJwbmciKSl9LGNsb25lOmZ1bmN0aW9uKGEpe251bGw9PWEmJihhPW5ldyBPcGVuTGF5ZXJzLkxheWVyLkFyY0dJUzkzUmVzdCh0aGlzLm5hbWUsdGhpcy51cmwsdGhpcy5wYXJhbXMsdGhpcy5nZXRPcHRpb25zKCkpKTtyZXR1cm4gYT1PcGVuTGF5ZXJzLkxheWVyLkdyaWQucHJvdG90eXBlLmNsb25lLmFwcGx5KHRoaXMsW2FdKX0sZ2V0VVJMOmZ1bmN0aW9uKGEpe2E9dGhpcy5hZGp1c3RCb3VuZHMoYSk7dmFyIGI9dGhpcy5wcm9qZWN0aW9uLmdldENvZGUoKS5zcGxpdCgiOiIpLGI9YltiLmxlbmd0aC0xXSxjPXRoaXMuZ2V0SW1hZ2VTaXplKCk7YT17QkJPWDphLnRvQkJPWCgpLFNJWkU6Yy53KyIsIitjLmgsRjoiaW1hZ2UiLEJCT1hTUjpiLElNQUdFU1I6Yn07aWYodGhpcy5sYXllckRlZnMpe3ZhciBiPVtdLGQ7Zm9yKGQgaW4gdGhpcy5sYXllckRlZnMpdGhpcy5sYXllckRlZnMuaGFzT3duUHJvcGVydHkoZCkmJgp0aGlzLmxheWVyRGVmc1tkXSYmKGIucHVzaChkKSxiLnB1c2goIjoiKSxiLnB1c2godGhpcy5sYXllckRlZnNbZF0pLGIucHVzaCgiOyIpKTswPGIubGVuZ3RoJiYoYS5MQVlFUkRFRlM9Yi5qb2luKCIiKSl9cmV0dXJuIHRoaXMuZ2V0RnVsbFJlcXVlc3RTdHJpbmcoYSl9LHNldExheWVyRmlsdGVyOmZ1bmN0aW9uKGEsYil7dGhpcy5sYXllckRlZnN8fCh0aGlzLmxheWVyRGVmcz17fSk7Yj90aGlzLmxheWVyRGVmc1thXT1iOmRlbGV0ZSB0aGlzLmxheWVyRGVmc1thXX0sY2xlYXJMYXllckZpbHRlcjpmdW5jdGlvbihhKXthP2RlbGV0ZSB0aGlzLmxheWVyRGVmc1thXTpkZWxldGUgdGhpcy5sYXllckRlZnN9LG1lcmdlTmV3UGFyYW1zOmZ1bmN0aW9uKGEpe2E9W09wZW5MYXllcnMuVXRpbC51cHBlckNhc2VPYmplY3QoYSldO3JldHVybiBPcGVuTGF5ZXJzLkxheWVyLkdyaWQucHJvdG90eXBlLm1lcmdlTmV3UGFyYW1zLmFwcGx5KHRoaXMsYSl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuTGF5ZXIuQXJjR0lTOTNSZXN0In0pO09wZW5MYXllcnMuSGFuZGxlci5Ib3Zlcj1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuSGFuZGxlcix7ZGVsYXk6NTAwLHBpeGVsVG9sZXJhbmNlOm51bGwsc3RvcE1vdmU6ITEscHg6bnVsbCx0aW1lcklkOm51bGwsbW91c2Vtb3ZlOmZ1bmN0aW9uKGEpe3RoaXMucGFzc2VzVG9sZXJhbmNlKGEueHkpJiYodGhpcy5jbGVhclRpbWVyKCksdGhpcy5jYWxsYmFjaygibW92ZSIsW2FdKSx0aGlzLnB4PWEueHksYT1PcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHt9LGEpLHRoaXMudGltZXJJZD13aW5kb3cuc2V0VGltZW91dChPcGVuTGF5ZXJzLkZ1bmN0aW9uLmJpbmQodGhpcy5kZWxheWVkQ2FsbCx0aGlzLGEpLHRoaXMuZGVsYXkpKTtyZXR1cm4hdGhpcy5zdG9wTW92ZX0sbW91c2VvdXQ6ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5VdGlsLm1vdXNlTGVmdChhLHRoaXMubWFwLnZpZXdQb3J0RGl2KSYmKHRoaXMuY2xlYXJUaW1lcigpLHRoaXMuY2FsbGJhY2soIm1vdmUiLFthXSkpO3JldHVybiEwfSwKcGFzc2VzVG9sZXJhbmNlOmZ1bmN0aW9uKGEpe3ZhciBiPSEwO3RoaXMucGl4ZWxUb2xlcmFuY2UmJnRoaXMucHgmJk1hdGguc3FydChNYXRoLnBvdyh0aGlzLnB4LngtYS54LDIpK01hdGgucG93KHRoaXMucHgueS1hLnksMikpPHRoaXMucGl4ZWxUb2xlcmFuY2UmJihiPSExKTtyZXR1cm4gYn0sY2xlYXJUaW1lcjpmdW5jdGlvbigpe251bGwhPXRoaXMudGltZXJJZCYmKHdpbmRvdy5jbGVhclRpbWVvdXQodGhpcy50aW1lcklkKSx0aGlzLnRpbWVySWQ9bnVsbCl9LGRlbGF5ZWRDYWxsOmZ1bmN0aW9uKGEpe3RoaXMuY2FsbGJhY2soInBhdXNlIixbYV0pfSxkZWFjdGl2YXRlOmZ1bmN0aW9uKCl7dmFyIGE9ITE7T3BlbkxheWVycy5IYW5kbGVyLnByb3RvdHlwZS5kZWFjdGl2YXRlLmFwcGx5KHRoaXMsYXJndW1lbnRzKSYmKHRoaXMuY2xlYXJUaW1lcigpLGE9ITApO3JldHVybiBhfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkhhbmRsZXIuSG92ZXIifSk7T3BlbkxheWVycy5Db250cm9sLkdldEZlYXR1cmU9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkNvbnRyb2wse3Byb3RvY29sOm51bGwsbXVsdGlwbGVLZXk6bnVsbCx0b2dnbGVLZXk6bnVsbCxtb2RpZmllcnM6bnVsbCxtdWx0aXBsZTohMSxjbGljazohMCxzaW5nbGU6ITAsY2xpY2tvdXQ6ITAsdG9nZ2xlOiExLGNsaWNrVG9sZXJhbmNlOjUsaG92ZXI6ITEsYm94OiExLG1heEZlYXR1cmVzOjEwLGZlYXR1cmVzOm51bGwsaG92ZXJGZWF0dXJlOm51bGwsaGFuZGxlcnM6bnVsbCxob3ZlclJlc3BvbnNlOm51bGwsZmlsdGVyVHlwZTpPcGVuTGF5ZXJzLkZpbHRlci5TcGF0aWFsLkJCT1gsaW5pdGlhbGl6ZTpmdW5jdGlvbihhKXthLmhhbmRsZXJPcHRpb25zPWEuaGFuZGxlck9wdGlvbnN8fHt9O09wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLFthXSk7dGhpcy5mZWF0dXJlcz17fTt0aGlzLmhhbmRsZXJzPXt9O3RoaXMuY2xpY2smJih0aGlzLmhhbmRsZXJzLmNsaWNrPQpuZXcgT3BlbkxheWVycy5IYW5kbGVyLkNsaWNrKHRoaXMse2NsaWNrOnRoaXMuc2VsZWN0Q2xpY2t9LHRoaXMuaGFuZGxlck9wdGlvbnMuY2xpY2t8fHt9KSk7dGhpcy5ib3gmJih0aGlzLmhhbmRsZXJzLmJveD1uZXcgT3BlbkxheWVycy5IYW5kbGVyLkJveCh0aGlzLHtkb25lOnRoaXMuc2VsZWN0Qm94fSxPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHRoaXMuaGFuZGxlck9wdGlvbnMuYm94LHtib3hEaXZDbGFzc05hbWU6Im9sSGFuZGxlckJveFNlbGVjdEZlYXR1cmUifSkpKTt0aGlzLmhvdmVyJiYodGhpcy5oYW5kbGVycy5ob3Zlcj1uZXcgT3BlbkxheWVycy5IYW5kbGVyLkhvdmVyKHRoaXMse21vdmU6dGhpcy5jYW5jZWxIb3ZlcixwYXVzZTp0aGlzLnNlbGVjdEhvdmVyfSxPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHRoaXMuaGFuZGxlck9wdGlvbnMuaG92ZXIse2RlbGF5OjI1MCxwaXhlbFRvbGVyYW5jZToyfSkpKX0sYWN0aXZhdGU6ZnVuY3Rpb24oKXtpZighdGhpcy5hY3RpdmUpZm9yKHZhciBhIGluIHRoaXMuaGFuZGxlcnMpdGhpcy5oYW5kbGVyc1thXS5hY3RpdmF0ZSgpOwpyZXR1cm4gT3BlbkxheWVycy5Db250cm9sLnByb3RvdHlwZS5hY3RpdmF0ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGRlYWN0aXZhdGU6ZnVuY3Rpb24oKXtpZih0aGlzLmFjdGl2ZSlmb3IodmFyIGEgaW4gdGhpcy5oYW5kbGVycyl0aGlzLmhhbmRsZXJzW2FdLmRlYWN0aXZhdGUoKTtyZXR1cm4gT3BlbkxheWVycy5Db250cm9sLnByb3RvdHlwZS5kZWFjdGl2YXRlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sc2VsZWN0Q2xpY2s6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5waXhlbFRvQm91bmRzKGEueHkpO3RoaXMuc2V0TW9kaWZpZXJzKGEpO3RoaXMucmVxdWVzdChiLHtzaW5nbGU6dGhpcy5zaW5nbGV9KX0sc2VsZWN0Qm94OmZ1bmN0aW9uKGEpe3ZhciBiO2lmKGEgaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLkJvdW5kcyliPXRoaXMubWFwLmdldExvbkxhdEZyb21QaXhlbCh7eDphLmxlZnQseTphLmJvdHRvbX0pLGE9dGhpcy5tYXAuZ2V0TG9uTGF0RnJvbVBpeGVsKHt4OmEucmlnaHQsCnk6YS50b3B9KSxiPW5ldyBPcGVuTGF5ZXJzLkJvdW5kcyhiLmxvbixiLmxhdCxhLmxvbixhLmxhdCk7ZWxzZXtpZih0aGlzLmNsaWNrKXJldHVybjtiPXRoaXMucGl4ZWxUb0JvdW5kcyhhKX10aGlzLnNldE1vZGlmaWVycyh0aGlzLmhhbmRsZXJzLmJveC5kcmFnSGFuZGxlci5ldnQpO3RoaXMucmVxdWVzdChiKX0sc2VsZWN0SG92ZXI6ZnVuY3Rpb24oYSl7YT10aGlzLnBpeGVsVG9Cb3VuZHMoYS54eSk7dGhpcy5yZXF1ZXN0KGEse3NpbmdsZTohMCxob3ZlcjohMH0pfSxjYW5jZWxIb3ZlcjpmdW5jdGlvbigpe3RoaXMuaG92ZXJSZXNwb25zZSYmKHRoaXMucHJvdG9jb2wuYWJvcnQodGhpcy5ob3ZlclJlc3BvbnNlKSx0aGlzLmhvdmVyUmVzcG9uc2U9bnVsbCxPcGVuTGF5ZXJzLkVsZW1lbnQucmVtb3ZlQ2xhc3ModGhpcy5tYXAudmlld1BvcnREaXYsIm9sQ3Vyc29yV2FpdCIpKX0scmVxdWVzdDpmdW5jdGlvbihhLGIpe2I9Ynx8e307dmFyIGM9bmV3IE9wZW5MYXllcnMuRmlsdGVyLlNwYXRpYWwoe3R5cGU6dGhpcy5maWx0ZXJUeXBlLAp2YWx1ZTphfSk7T3BlbkxheWVycy5FbGVtZW50LmFkZENsYXNzKHRoaXMubWFwLnZpZXdQb3J0RGl2LCJvbEN1cnNvcldhaXQiKTtjPXRoaXMucHJvdG9jb2wucmVhZCh7bWF4RmVhdHVyZXM6ITA9PWIuc2luZ2xlP3RoaXMubWF4RmVhdHVyZXM6dm9pZCAwLGZpbHRlcjpjLGNhbGxiYWNrOmZ1bmN0aW9uKGMpe2Muc3VjY2VzcygpJiYoYy5mZWF0dXJlcy5sZW5ndGg/ITA9PWIuc2luZ2xlP3RoaXMuc2VsZWN0QmVzdEZlYXR1cmUoYy5mZWF0dXJlcyxhLmdldENlbnRlckxvbkxhdCgpLGIpOnRoaXMuc2VsZWN0KGMuZmVhdHVyZXMpOmIuaG92ZXI/dGhpcy5ob3ZlclNlbGVjdCgpOih0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoImNsaWNrb3V0IiksdGhpcy5jbGlja291dCYmdGhpcy51bnNlbGVjdEFsbCgpKSk7T3BlbkxheWVycy5FbGVtZW50LnJlbW92ZUNsYXNzKHRoaXMubWFwLnZpZXdQb3J0RGl2LCJvbEN1cnNvcldhaXQiKX0sc2NvcGU6dGhpc30pOyEwPT1iLmhvdmVyJiYodGhpcy5ob3ZlclJlc3BvbnNlPQpjKX0sc2VsZWN0QmVzdEZlYXR1cmU6ZnVuY3Rpb24oYSxiLGMpe2M9Y3x8e307aWYoYS5sZW5ndGgpe2I9bmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoYi5sb24sYi5sYXQpO2Zvcih2YXIgZCxlLGYsZz1OdW1iZXIuTUFYX1ZBTFVFLGg9MDtoPGEubGVuZ3RoJiYhKGQ9YVtoXSxkLmdlb21ldHJ5JiYoZj1iLmRpc3RhbmNlVG8oZC5nZW9tZXRyeSx7ZWRnZTohMX0pLGY8ZyYmKGc9ZixlPWQsMD09ZykpKTsrK2gpOyEwPT1jLmhvdmVyP3RoaXMuaG92ZXJTZWxlY3QoZSk6dGhpcy5zZWxlY3QoZXx8YSl9fSxzZXRNb2RpZmllcnM6ZnVuY3Rpb24oYSl7dGhpcy5tb2RpZmllcnM9e211bHRpcGxlOnRoaXMubXVsdGlwbGV8fHRoaXMubXVsdGlwbGVLZXkmJmFbdGhpcy5tdWx0aXBsZUtleV0sdG9nZ2xlOnRoaXMudG9nZ2xlfHx0aGlzLnRvZ2dsZUtleSYmYVt0aGlzLnRvZ2dsZUtleV19fSxzZWxlY3Q6ZnVuY3Rpb24oYSl7dGhpcy5tb2RpZmllcnMubXVsdGlwbGV8fHRoaXMubW9kaWZpZXJzLnRvZ2dsZXx8CnRoaXMudW5zZWxlY3RBbGwoKTtPcGVuTGF5ZXJzLlV0aWwuaXNBcnJheShhKXx8KGE9W2FdKTt2YXIgYj10aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoImJlZm9yZWZlYXR1cmVzc2VsZWN0ZWQiLHtmZWF0dXJlczphfSk7aWYoITEhPT1iKXtmb3IodmFyIGM9W10sZCxlPTAsZj1hLmxlbmd0aDtlPGY7KytlKWQ9YVtlXSx0aGlzLmZlYXR1cmVzW2QuZmlkfHxkLmlkXT90aGlzLm1vZGlmaWVycy50b2dnbGUmJnRoaXMudW5zZWxlY3QodGhpcy5mZWF0dXJlc1tkLmZpZHx8ZC5pZF0pOihiPXRoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgiYmVmb3JlZmVhdHVyZXNlbGVjdGVkIix7ZmVhdHVyZTpkfSksITEhPT1iJiYodGhpcy5mZWF0dXJlc1tkLmZpZHx8ZC5pZF09ZCxjLnB1c2goZCksdGhpcy5ldmVudHMudHJpZ2dlckV2ZW50KCJmZWF0dXJlc2VsZWN0ZWQiLHtmZWF0dXJlOmR9KSkpO3RoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgiZmVhdHVyZXNzZWxlY3RlZCIse2ZlYXR1cmVzOmN9KX19LApob3ZlclNlbGVjdDpmdW5jdGlvbihhKXt2YXIgYj1hP2EuZmlkfHxhLmlkOm51bGwsYz10aGlzLmhvdmVyRmVhdHVyZT90aGlzLmhvdmVyRmVhdHVyZS5maWR8fHRoaXMuaG92ZXJGZWF0dXJlLmlkOm51bGw7YyYmYyE9YiYmKHRoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgib3V0ZmVhdHVyZSIse2ZlYXR1cmU6dGhpcy5ob3ZlckZlYXR1cmV9KSx0aGlzLmhvdmVyRmVhdHVyZT1udWxsKTtiJiZiIT1jJiYodGhpcy5ldmVudHMudHJpZ2dlckV2ZW50KCJob3ZlcmZlYXR1cmUiLHtmZWF0dXJlOmF9KSx0aGlzLmhvdmVyRmVhdHVyZT1hKX0sdW5zZWxlY3Q6ZnVuY3Rpb24oYSl7ZGVsZXRlIHRoaXMuZmVhdHVyZXNbYS5maWR8fGEuaWRdO3RoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgiZmVhdHVyZXVuc2VsZWN0ZWQiLHtmZWF0dXJlOmF9KX0sdW5zZWxlY3RBbGw6ZnVuY3Rpb24oKXtmb3IodmFyIGEgaW4gdGhpcy5mZWF0dXJlcyl0aGlzLnVuc2VsZWN0KHRoaXMuZmVhdHVyZXNbYV0pfSwKc2V0TWFwOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYiBpbiB0aGlzLmhhbmRsZXJzKXRoaXMuaGFuZGxlcnNbYl0uc2V0TWFwKGEpO09wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuc2V0TWFwLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0scGl4ZWxUb0JvdW5kczpmdW5jdGlvbihhKXt2YXIgYj1hLmFkZCgtdGhpcy5jbGlja1RvbGVyYW5jZS8yLHRoaXMuY2xpY2tUb2xlcmFuY2UvMik7YT1hLmFkZCh0aGlzLmNsaWNrVG9sZXJhbmNlLzIsLXRoaXMuY2xpY2tUb2xlcmFuY2UvMik7Yj10aGlzLm1hcC5nZXRMb25MYXRGcm9tUGl4ZWwoYik7YT10aGlzLm1hcC5nZXRMb25MYXRGcm9tUGl4ZWwoYSk7cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLkJvdW5kcyhiLmxvbixiLmxhdCxhLmxvbixhLmxhdCl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuQ29udHJvbC5HZXRGZWF0dXJlIn0pO09wZW5MYXllcnMuRm9ybWF0LlF1ZXJ5U3RyaW5nRmlsdGVyPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhKXthPWEucmVwbGFjZSgvJS9nLCJcXCUiKTthPWEucmVwbGFjZSgvXFxcXFwuKFwqKT8vZyxmdW5jdGlvbihhLGIpe3JldHVybiBiP2E6IlxcXFxfIn0pO2E9YS5yZXBsYWNlKC9cXFxcXC5cKi9nLCJcXFxcJSIpO2E9YS5yZXBsYWNlKC8oXFwpP1wuKFwqKT8vZyxmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGJ8fGM/YToiXyJ9KTthPWEucmVwbGFjZSgvKFxcKT9cLlwqL2csZnVuY3Rpb24oYSxiKXtyZXR1cm4gYj9hOiIlIn0pO2E9YS5yZXBsYWNlKC9cXFwuL2csIi4iKTtyZXR1cm4gYT1hLnJlcGxhY2UoLyhcXCk/XFxcKi9nLGZ1bmN0aW9uKGEsYil7cmV0dXJuIGI/YToiKiJ9KX12YXIgYj17fTtiW09wZW5MYXllcnMuRmlsdGVyLkNvbXBhcmlzb24uRVFVQUxfVE9dPSJlcSI7YltPcGVuTGF5ZXJzLkZpbHRlci5Db21wYXJpc29uLk5PVF9FUVVBTF9UT109Im5lIjtiW09wZW5MYXllcnMuRmlsdGVyLkNvbXBhcmlzb24uTEVTU19USEFOXT0KImx0IjtiW09wZW5MYXllcnMuRmlsdGVyLkNvbXBhcmlzb24uTEVTU19USEFOX09SX0VRVUFMX1RPXT0ibHRlIjtiW09wZW5MYXllcnMuRmlsdGVyLkNvbXBhcmlzb24uR1JFQVRFUl9USEFOXT0iZ3QiO2JbT3BlbkxheWVycy5GaWx0ZXIuQ29tcGFyaXNvbi5HUkVBVEVSX1RIQU5fT1JfRVFVQUxfVE9dPSJndGUiO2JbT3BlbkxheWVycy5GaWx0ZXIuQ29tcGFyaXNvbi5MSUtFXT0iaWxpa2UiO3JldHVybiBPcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuRm9ybWF0LHt3aWxkY2FyZGVkOiExLHNyc0luQkJPWDohMSx3cml0ZTpmdW5jdGlvbihjLGQpe2Q9ZHx8e307dmFyIGU9Yy5DTEFTU19OQU1FLGU9ZS5zdWJzdHJpbmcoZS5sYXN0SW5kZXhPZigiLiIpKzEpO3N3aXRjaChlKXtjYXNlICJTcGF0aWFsIjpzd2l0Y2goYy50eXBlKXtjYXNlIE9wZW5MYXllcnMuRmlsdGVyLlNwYXRpYWwuQkJPWDpkLmJib3g9Yy52YWx1ZS50b0FycmF5KCk7dGhpcy5zcnNJbkJCT1gmJmMucHJvamVjdGlvbiYmCmQuYmJveC5wdXNoKGMucHJvamVjdGlvbi5nZXRDb2RlKCkpO2JyZWFrO2Nhc2UgT3BlbkxheWVycy5GaWx0ZXIuU3BhdGlhbC5EV0lUSElOOmQudG9sZXJhbmNlPWMuZGlzdGFuY2U7Y2FzZSBPcGVuTGF5ZXJzLkZpbHRlci5TcGF0aWFsLldJVEhJTjpkLmxvbj1jLnZhbHVlLng7ZC5sYXQ9Yy52YWx1ZS55O2JyZWFrO2RlZmF1bHQ6T3BlbkxheWVycy5Db25zb2xlLndhcm4oIlVua25vd24gc3BhdGlhbCBmaWx0ZXIgdHlwZSAiK2MudHlwZSl9YnJlYWs7Y2FzZSAiQ29tcGFyaXNvbiI6ZT1iW2MudHlwZV07aWYodm9pZCAwIT09ZSl7dmFyIGY9Yy52YWx1ZTtjLnR5cGU9PU9wZW5MYXllcnMuRmlsdGVyLkNvbXBhcmlzb24uTElLRSYmKGY9YShmKSx0aGlzLndpbGRjYXJkZWQmJihmPSIlIitmKyIlIikpO2RbYy5wcm9wZXJ0eSsiX18iK2VdPWY7ZC5xdWVyeWFibGU9ZC5xdWVyeWFibGV8fFtdO2QucXVlcnlhYmxlLnB1c2goYy5wcm9wZXJ0eSl9ZWxzZSBPcGVuTGF5ZXJzLkNvbnNvbGUud2FybigiVW5rbm93biBjb21wYXJpc29uIGZpbHRlciB0eXBlICIrCmMudHlwZSk7YnJlYWs7Y2FzZSAiTG9naWNhbCI6aWYoYy50eXBlPT09T3BlbkxheWVycy5GaWx0ZXIuTG9naWNhbC5BTkQpZm9yKGU9MCxmPWMuZmlsdGVycy5sZW5ndGg7ZTxmO2UrKylkPXRoaXMud3JpdGUoYy5maWx0ZXJzW2VdLGQpO2Vsc2UgT3BlbkxheWVycy5Db25zb2xlLndhcm4oIlVuc3VwcG9ydGVkIGxvZ2ljYWwgZmlsdGVyIHR5cGUgIitjLnR5cGUpO2JyZWFrO2RlZmF1bHQ6T3BlbkxheWVycy5Db25zb2xlLndhcm4oIlVua25vd24gZmlsdGVyIHR5cGUgIitlKX1yZXR1cm4gZH0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Gb3JtYXQuUXVlcnlTdHJpbmdGaWx0ZXIifSl9KCk7T3BlbkxheWVycy5Db250cm9sLk1vdXNlUG9zaXRpb249T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkNvbnRyb2wse2F1dG9BY3RpdmF0ZTohMCxlbGVtZW50Om51bGwscHJlZml4OiIiLHNlcGFyYXRvcjoiLCAiLHN1ZmZpeDoiIixudW1EaWdpdHM6NSxncmFudWxhcml0eToxMCxlbXB0eVN0cmluZzpudWxsLGxhc3RYeTpudWxsLGRpc3BsYXlQcm9qZWN0aW9uOm51bGwsZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuZGVhY3RpdmF0ZSgpO09wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuZGVzdHJveS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGFjdGl2YXRlOmZ1bmN0aW9uKCl7cmV0dXJuIE9wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuYWN0aXZhdGUuYXBwbHkodGhpcyxhcmd1bWVudHMpPyh0aGlzLm1hcC5ldmVudHMucmVnaXN0ZXIoIm1vdXNlbW92ZSIsdGhpcyx0aGlzLnJlZHJhdyksdGhpcy5tYXAuZXZlbnRzLnJlZ2lzdGVyKCJtb3VzZW91dCIsdGhpcyx0aGlzLnJlc2V0KSwKdGhpcy5yZWRyYXcoKSwhMCk6ITF9LGRlYWN0aXZhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gT3BlbkxheWVycy5Db250cm9sLnByb3RvdHlwZS5kZWFjdGl2YXRlLmFwcGx5KHRoaXMsYXJndW1lbnRzKT8odGhpcy5tYXAuZXZlbnRzLnVucmVnaXN0ZXIoIm1vdXNlbW92ZSIsdGhpcyx0aGlzLnJlZHJhdyksdGhpcy5tYXAuZXZlbnRzLnVucmVnaXN0ZXIoIm1vdXNlb3V0Iix0aGlzLHRoaXMucmVzZXQpLHRoaXMuZWxlbWVudC5pbm5lckhUTUw9IiIsITApOiExfSxkcmF3OmZ1bmN0aW9uKCl7T3BlbkxheWVycy5Db250cm9sLnByb3RvdHlwZS5kcmF3LmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLmVsZW1lbnR8fCh0aGlzLmRpdi5sZWZ0PSIiLHRoaXMuZGl2LnRvcD0iIix0aGlzLmVsZW1lbnQ9dGhpcy5kaXYpO3JldHVybiB0aGlzLmRpdn0scmVkcmF3OmZ1bmN0aW9uKGEpe3ZhciBiO2lmKG51bGw9PWEpdGhpcy5yZXNldCgpO2Vsc2UgaWYobnVsbD09dGhpcy5sYXN0WHl8fE1hdGguYWJzKGEueHkueC0KdGhpcy5sYXN0WHkueCk+dGhpcy5ncmFudWxhcml0eXx8TWF0aC5hYnMoYS54eS55LXRoaXMubGFzdFh5LnkpPnRoaXMuZ3JhbnVsYXJpdHkpdGhpcy5sYXN0WHk9YS54eTtlbHNlIGlmKGI9dGhpcy5tYXAuZ2V0TG9uTGF0RnJvbVBpeGVsKGEueHkpKXRoaXMuZGlzcGxheVByb2plY3Rpb24mJmIudHJhbnNmb3JtKHRoaXMubWFwLmdldFByb2plY3Rpb25PYmplY3QoKSx0aGlzLmRpc3BsYXlQcm9qZWN0aW9uKSx0aGlzLmxhc3RYeT1hLnh5LGE9dGhpcy5mb3JtYXRPdXRwdXQoYiksYSE9dGhpcy5lbGVtZW50LmlubmVySFRNTCYmKHRoaXMuZWxlbWVudC5pbm5lckhUTUw9YSl9LHJlc2V0OmZ1bmN0aW9uKGEpe251bGwhPXRoaXMuZW1wdHlTdHJpbmcmJih0aGlzLmVsZW1lbnQuaW5uZXJIVE1MPXRoaXMuZW1wdHlTdHJpbmcpfSxmb3JtYXRPdXRwdXQ6ZnVuY3Rpb24oYSl7dmFyIGI9cGFyc2VJbnQodGhpcy5udW1EaWdpdHMpO3JldHVybiB0aGlzLnByZWZpeCthLmxvbi50b0ZpeGVkKGIpKwp0aGlzLnNlcGFyYXRvcithLmxhdC50b0ZpeGVkKGIpK3RoaXMuc3VmZml4fSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkNvbnRyb2wuTW91c2VQb3NpdGlvbiJ9KTtPcGVuTGF5ZXJzLkNvbnRyb2wuR2VvbG9jYXRlPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Db250cm9sLHtnZW9sb2NhdGlvbjpudWxsLGF2YWlsYWJsZToiZ2VvbG9jYXRpb24iaW4gbmF2aWdhdG9yLGJpbmQ6ITAsd2F0Y2g6ITEsZ2VvbG9jYXRpb25PcHRpb25zOm51bGwsZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuZGVhY3RpdmF0ZSgpO09wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuZGVzdHJveS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGFjdGl2YXRlOmZ1bmN0aW9uKCl7dGhpcy5hdmFpbGFibGUmJiF0aGlzLmdlb2xvY2F0aW9uJiYodGhpcy5nZW9sb2NhdGlvbj1uYXZpZ2F0b3IuZ2VvbG9jYXRpb24pO3JldHVybiB0aGlzLmdlb2xvY2F0aW9uP09wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuYWN0aXZhdGUuYXBwbHkodGhpcyxhcmd1bWVudHMpPyh0aGlzLndhdGNoP3RoaXMud2F0Y2hJZD10aGlzLmdlb2xvY2F0aW9uLndhdGNoUG9zaXRpb24oT3BlbkxheWVycy5GdW5jdGlvbi5iaW5kKHRoaXMuZ2VvbG9jYXRlLAp0aGlzKSxPcGVuTGF5ZXJzLkZ1bmN0aW9uLmJpbmQodGhpcy5mYWlsdXJlLHRoaXMpLHRoaXMuZ2VvbG9jYXRpb25PcHRpb25zKTp0aGlzLmdldEN1cnJlbnRMb2NhdGlvbigpLCEwKTohMToodGhpcy5ldmVudHMudHJpZ2dlckV2ZW50KCJsb2NhdGlvbnVuY2FwYWJsZSIpLCExKX0sZGVhY3RpdmF0ZTpmdW5jdGlvbigpe3RoaXMuYWN0aXZlJiZudWxsIT09dGhpcy53YXRjaElkJiZ0aGlzLmdlb2xvY2F0aW9uLmNsZWFyV2F0Y2godGhpcy53YXRjaElkKTtyZXR1cm4gT3BlbkxheWVycy5Db250cm9sLnByb3RvdHlwZS5kZWFjdGl2YXRlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sZ2VvbG9jYXRlOmZ1bmN0aW9uKGEpe3ZhciBiPShuZXcgT3BlbkxheWVycy5Mb25MYXQoYS5jb29yZHMubG9uZ2l0dWRlLGEuY29vcmRzLmxhdGl0dWRlKSkudHJhbnNmb3JtKG5ldyBPcGVuTGF5ZXJzLlByb2plY3Rpb24oIkVQU0c6NDMyNiIpLHRoaXMubWFwLmdldFByb2plY3Rpb25PYmplY3QoKSk7dGhpcy5iaW5kJiYKdGhpcy5tYXAuc2V0Q2VudGVyKGIpO3RoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgibG9jYXRpb251cGRhdGVkIix7cG9zaXRpb246YSxwb2ludDpuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludChiLmxvbixiLmxhdCl9KX0sZ2V0Q3VycmVudExvY2F0aW9uOmZ1bmN0aW9uKCl7aWYoIXRoaXMuYWN0aXZlfHx0aGlzLndhdGNoKXJldHVybiExO3RoaXMuZ2VvbG9jYXRpb24uZ2V0Q3VycmVudFBvc2l0aW9uKE9wZW5MYXllcnMuRnVuY3Rpb24uYmluZCh0aGlzLmdlb2xvY2F0ZSx0aGlzKSxPcGVuTGF5ZXJzLkZ1bmN0aW9uLmJpbmQodGhpcy5mYWlsdXJlLHRoaXMpLHRoaXMuZ2VvbG9jYXRpb25PcHRpb25zKTtyZXR1cm4hMH0sZmFpbHVyZTpmdW5jdGlvbihhKXt0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoImxvY2F0aW9uZmFpbGVkIix7ZXJyb3I6YX0pfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkNvbnRyb2wuR2VvbG9jYXRlIn0pO09wZW5MYXllcnMuVGlsZS5VVEZHcmlkPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5UaWxlLHt1cmw6bnVsbCx1dGZncmlkUmVzb2x1dGlvbjoyLGpzb246bnVsbCxmb3JtYXQ6bnVsbCxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5jbGVhcigpO09wZW5MYXllcnMuVGlsZS5wcm90b3R5cGUuZGVzdHJveS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGRyYXc6ZnVuY3Rpb24oKXt2YXIgYT1PcGVuTGF5ZXJzLlRpbGUucHJvdG90eXBlLmRyYXcuYXBwbHkodGhpcyxhcmd1bWVudHMpO2lmKGEpaWYodGhpcy5pc0xvYWRpbmc/KHRoaXMuYWJvcnRMb2FkaW5nKCksdGhpcy5ldmVudHMudHJpZ2dlckV2ZW50KCJyZWxvYWQiKSk6KHRoaXMuaXNMb2FkaW5nPSEwLHRoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgibG9hZHN0YXJ0IikpLHRoaXMudXJsPXRoaXMubGF5ZXIuZ2V0VVJMKHRoaXMuYm91bmRzKSx0aGlzLmxheWVyLnVzZUpTT05QKXt2YXIgYj1uZXcgT3BlbkxheWVycy5Qcm90b2NvbC5TY3JpcHQoe3VybDp0aGlzLnVybCwKY2FsbGJhY2s6ZnVuY3Rpb24oYSl7dGhpcy5pc0xvYWRpbmc9ITE7dGhpcy5ldmVudHMudHJpZ2dlckV2ZW50KCJsb2FkZW5kIik7dGhpcy5qc29uPWEuZGF0YX0sc2NvcGU6dGhpc30pO2IucmVhZCgpO3RoaXMucmVxdWVzdD1ifWVsc2UgdGhpcy5yZXF1ZXN0PU9wZW5MYXllcnMuUmVxdWVzdC5HRVQoe3VybDp0aGlzLnVybCxjYWxsYmFjazpmdW5jdGlvbihhKXt0aGlzLmlzTG9hZGluZz0hMTt0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoImxvYWRlbmQiKTsyMDA9PT1hLnN0YXR1cyYmdGhpcy5wYXJzZURhdGEoYS5yZXNwb25zZVRleHQpfSxzY29wZTp0aGlzfSk7ZWxzZSB0aGlzLnVubG9hZCgpO3JldHVybiBhfSxhYm9ydExvYWRpbmc6ZnVuY3Rpb24oKXt0aGlzLnJlcXVlc3QmJih0aGlzLnJlcXVlc3QuYWJvcnQoKSxkZWxldGUgdGhpcy5yZXF1ZXN0KTt0aGlzLmlzTG9hZGluZz0hMX0sZ2V0RmVhdHVyZUluZm86ZnVuY3Rpb24oYSxiKXt2YXIgYz1udWxsO2lmKHRoaXMuanNvbil7dmFyIGQ9CnRoaXMuZ2V0RmVhdHVyZUlkKGEsYik7bnVsbCE9PWQmJihjPXtpZDpkLGRhdGE6dGhpcy5qc29uLmRhdGFbZF19KX1yZXR1cm4gY30sZ2V0RmVhdHVyZUlkOmZ1bmN0aW9uKGEsYil7dmFyIGM9bnVsbDtpZih0aGlzLmpzb24pe3ZhciBkPXRoaXMudXRmZ3JpZFJlc29sdXRpb24sZD10aGlzLmpzb24uZ3JpZFtNYXRoLmZsb29yKGIvZCldLmNoYXJDb2RlQXQoTWF0aC5mbG9vcihhL2QpKSxkPXRoaXMuaW5kZXhGcm9tQ2hhckNvZGUoZCksZT10aGlzLmpzb24ua2V5czshaXNOYU4oZCkmJmQgaW4gZSYmKGM9ZVtkXSl9cmV0dXJuIGN9LGluZGV4RnJvbUNoYXJDb2RlOmZ1bmN0aW9uKGEpezkzPD1hJiZhLS07MzU8PWEmJmEtLTtyZXR1cm4gYS0zMn0scGFyc2VEYXRhOmZ1bmN0aW9uKGEpe3RoaXMuZm9ybWF0fHwodGhpcy5mb3JtYXQ9bmV3IE9wZW5MYXllcnMuRm9ybWF0LkpTT04pO3RoaXMuanNvbj10aGlzLmZvcm1hdC5yZWFkKGEpfSxjbGVhcjpmdW5jdGlvbigpe3RoaXMuanNvbj0KbnVsbH0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5UaWxlLlVURkdyaWQifSk7T3BlbkxheWVycy5Qcm90b2NvbC5IVFRQPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Qcm90b2NvbCx7dXJsOm51bGwsaGVhZGVyczpudWxsLHBhcmFtczpudWxsLGNhbGxiYWNrOm51bGwsc2NvcGU6bnVsbCxyZWFkV2l0aFBPU1Q6ITEsdXBkYXRlV2l0aFBPU1Q6ITEsZGVsZXRlV2l0aFBPU1Q6ITEsd2lsZGNhcmRlZDohMSxzcnNJbkJCT1g6ITEsaW5pdGlhbGl6ZTpmdW5jdGlvbihhKXthPWF8fHt9O3RoaXMucGFyYW1zPXt9O3RoaXMuaGVhZGVycz17fTtPcGVuTGF5ZXJzLlByb3RvY29sLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtpZighdGhpcy5maWx0ZXJUb1BhcmFtcyYmT3BlbkxheWVycy5Gb3JtYXQuUXVlcnlTdHJpbmdGaWx0ZXIpe3ZhciBiPW5ldyBPcGVuTGF5ZXJzLkZvcm1hdC5RdWVyeVN0cmluZ0ZpbHRlcih7d2lsZGNhcmRlZDp0aGlzLndpbGRjYXJkZWQsc3JzSW5CQk9YOnRoaXMuc3JzSW5CQk9YfSk7dGhpcy5maWx0ZXJUb1BhcmFtcz0KZnVuY3Rpb24oYSxkKXtyZXR1cm4gYi53cml0ZShhLGQpfX19LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmhlYWRlcnM9dGhpcy5wYXJhbXM9bnVsbDtPcGVuTGF5ZXJzLlByb3RvY29sLnByb3RvdHlwZS5kZXN0cm95LmFwcGx5KHRoaXMpfSxyZWFkOmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuUHJvdG9jb2wucHJvdG90eXBlLnJlYWQuYXBwbHkodGhpcyxhcmd1bWVudHMpO2E9YXx8e307YS5wYXJhbXM9T3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoYS5wYXJhbXMsdGhpcy5vcHRpb25zLnBhcmFtcyk7YT1PcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyhhLHRoaXMub3B0aW9ucyk7YS5maWx0ZXImJnRoaXMuZmlsdGVyVG9QYXJhbXMmJihhLnBhcmFtcz10aGlzLmZpbHRlclRvUGFyYW1zKGEuZmlsdGVyLGEucGFyYW1zKSk7dmFyIGI9dm9pZCAwIT09YS5yZWFkV2l0aFBPU1Q/YS5yZWFkV2l0aFBPU1Q6dGhpcy5yZWFkV2l0aFBPU1QsYz1uZXcgT3BlbkxheWVycy5Qcm90b2NvbC5SZXNwb25zZSh7cmVxdWVzdFR5cGU6InJlYWQifSk7CmI/KGI9YS5oZWFkZXJzfHx7fSxiWyJDb250ZW50LVR5cGUiXT0iYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIixjLnByaXY9T3BlbkxheWVycy5SZXF1ZXN0LlBPU1Qoe3VybDphLnVybCxjYWxsYmFjazp0aGlzLmNyZWF0ZUNhbGxiYWNrKHRoaXMuaGFuZGxlUmVhZCxjLGEpLGRhdGE6T3BlbkxheWVycy5VdGlsLmdldFBhcmFtZXRlclN0cmluZyhhLnBhcmFtcyksaGVhZGVyczpifSkpOmMucHJpdj1PcGVuTGF5ZXJzLlJlcXVlc3QuR0VUKHt1cmw6YS51cmwsY2FsbGJhY2s6dGhpcy5jcmVhdGVDYWxsYmFjayh0aGlzLmhhbmRsZVJlYWQsYyxhKSxwYXJhbXM6YS5wYXJhbXMsaGVhZGVyczphLmhlYWRlcnN9KTtyZXR1cm4gY30saGFuZGxlUmVhZDpmdW5jdGlvbihhLGIpe3RoaXMuaGFuZGxlUmVzcG9uc2UoYSxiKX0sY3JlYXRlOmZ1bmN0aW9uKGEsYil7Yj1PcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyhiLHRoaXMub3B0aW9ucyk7dmFyIGM9bmV3IE9wZW5MYXllcnMuUHJvdG9jb2wuUmVzcG9uc2Uoe3JlcUZlYXR1cmVzOmEsCnJlcXVlc3RUeXBlOiJjcmVhdGUifSk7Yy5wcml2PU9wZW5MYXllcnMuUmVxdWVzdC5QT1NUKHt1cmw6Yi51cmwsY2FsbGJhY2s6dGhpcy5jcmVhdGVDYWxsYmFjayh0aGlzLmhhbmRsZUNyZWF0ZSxjLGIpLGhlYWRlcnM6Yi5oZWFkZXJzLGRhdGE6dGhpcy5mb3JtYXQud3JpdGUoYSl9KTtyZXR1cm4gY30saGFuZGxlQ3JlYXRlOmZ1bmN0aW9uKGEsYil7dGhpcy5oYW5kbGVSZXNwb25zZShhLGIpfSx1cGRhdGU6ZnVuY3Rpb24oYSxiKXtiPWJ8fHt9O3ZhciBjPWIudXJsfHxhLnVybHx8dGhpcy5vcHRpb25zLnVybCsiLyIrYS5maWQ7Yj1PcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyhiLHRoaXMub3B0aW9ucyk7dmFyIGQ9bmV3IE9wZW5MYXllcnMuUHJvdG9jb2wuUmVzcG9uc2Uoe3JlcUZlYXR1cmVzOmEscmVxdWVzdFR5cGU6InVwZGF0ZSJ9KTtkLnByaXY9T3BlbkxheWVycy5SZXF1ZXN0W3RoaXMudXBkYXRlV2l0aFBPU1Q/IlBPU1QiOiJQVVQiXSh7dXJsOmMsY2FsbGJhY2s6dGhpcy5jcmVhdGVDYWxsYmFjayh0aGlzLmhhbmRsZVVwZGF0ZSwKZCxiKSxoZWFkZXJzOmIuaGVhZGVycyxkYXRhOnRoaXMuZm9ybWF0LndyaXRlKGEpfSk7cmV0dXJuIGR9LGhhbmRsZVVwZGF0ZTpmdW5jdGlvbihhLGIpe3RoaXMuaGFuZGxlUmVzcG9uc2UoYSxiKX0sImRlbGV0ZSI6ZnVuY3Rpb24oYSxiKXtiPWJ8fHt9O3ZhciBjPWIudXJsfHxhLnVybHx8dGhpcy5vcHRpb25zLnVybCsiLyIrYS5maWQ7Yj1PcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyhiLHRoaXMub3B0aW9ucyk7dmFyIGQ9bmV3IE9wZW5MYXllcnMuUHJvdG9jb2wuUmVzcG9uc2Uoe3JlcUZlYXR1cmVzOmEscmVxdWVzdFR5cGU6ImRlbGV0ZSJ9KSxlPXRoaXMuZGVsZXRlV2l0aFBPU1Q/IlBPU1QiOiJERUxFVEUiLGM9e3VybDpjLGNhbGxiYWNrOnRoaXMuY3JlYXRlQ2FsbGJhY2sodGhpcy5oYW5kbGVEZWxldGUsZCxiKSxoZWFkZXJzOmIuaGVhZGVyc307dGhpcy5kZWxldGVXaXRoUE9TVCYmKGMuZGF0YT10aGlzLmZvcm1hdC53cml0ZShhKSk7ZC5wcml2PU9wZW5MYXllcnMuUmVxdWVzdFtlXShjKTsKcmV0dXJuIGR9LGhhbmRsZURlbGV0ZTpmdW5jdGlvbihhLGIpe3RoaXMuaGFuZGxlUmVzcG9uc2UoYSxiKX0saGFuZGxlUmVzcG9uc2U6ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLnByaXY7Yi5jYWxsYmFjayYmKDIwMDw9Yy5zdGF0dXMmJjMwMD5jLnN0YXR1cz8oImRlbGV0ZSIhPWEucmVxdWVzdFR5cGUmJihhLmZlYXR1cmVzPXRoaXMucGFyc2VGZWF0dXJlcyhjKSksYS5jb2RlPU9wZW5MYXllcnMuUHJvdG9jb2wuUmVzcG9uc2UuU1VDQ0VTUyk6YS5jb2RlPU9wZW5MYXllcnMuUHJvdG9jb2wuUmVzcG9uc2UuRkFJTFVSRSxiLmNhbGxiYWNrLmNhbGwoYi5zY29wZSxhKSl9LHBhcnNlRmVhdHVyZXM6ZnVuY3Rpb24oYSl7dmFyIGI9YS5yZXNwb25zZVhNTDtiJiZiLmRvY3VtZW50RWxlbWVudHx8KGI9YS5yZXNwb25zZVRleHQpO3JldHVybiFifHwwPj1iLmxlbmd0aD9udWxsOnRoaXMuZm9ybWF0LnJlYWQoYil9LGNvbW1pdDpmdW5jdGlvbihhLGIpe2Z1bmN0aW9uIGMoYSl7Zm9yKHZhciBiPQphLmZlYXR1cmVzP2EuZmVhdHVyZXMubGVuZ3RoOjAsYz1BcnJheShiKSxlPTA7ZTxiOysrZSljW2VdPWEuZmVhdHVyZXNbZV0uZmlkO3IuaW5zZXJ0SWRzPWM7ZC5hcHBseSh0aGlzLFthXSl9ZnVuY3Rpb24gZChhKXt0aGlzLmNhbGxVc2VyQ2FsbGJhY2soYSxiKTtxPXEmJmEuc3VjY2VzcygpO2YrKztmPj1wJiZiLmNhbGxiYWNrJiYoci5jb2RlPXE/T3BlbkxheWVycy5Qcm90b2NvbC5SZXNwb25zZS5TVUNDRVNTOk9wZW5MYXllcnMuUHJvdG9jb2wuUmVzcG9uc2UuRkFJTFVSRSxiLmNhbGxiYWNrLmFwcGx5KGIuc2NvcGUsW3JdKSl9Yj1PcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyhiLHRoaXMub3B0aW9ucyk7dmFyIGU9W10sZj0wLGc9e307Z1tPcGVuTGF5ZXJzLlN0YXRlLklOU0VSVF09W107Z1tPcGVuTGF5ZXJzLlN0YXRlLlVQREFURV09W107Z1tPcGVuTGF5ZXJzLlN0YXRlLkRFTEVURV09W107Zm9yKHZhciBoLGssbD1bXSxtPTAsbj1hLmxlbmd0aDttPG47KyttKWlmKGg9CmFbbV0saz1nW2guc3RhdGVdKWsucHVzaChoKSxsLnB1c2goaCk7dmFyIHA9KDA8Z1tPcGVuTGF5ZXJzLlN0YXRlLklOU0VSVF0ubGVuZ3RoPzE6MCkrZ1tPcGVuTGF5ZXJzLlN0YXRlLlVQREFURV0ubGVuZ3RoK2dbT3BlbkxheWVycy5TdGF0ZS5ERUxFVEVdLmxlbmd0aCxxPSEwLHI9bmV3IE9wZW5MYXllcnMuUHJvdG9jb2wuUmVzcG9uc2Uoe3JlcUZlYXR1cmVzOmx9KTtoPWdbT3BlbkxheWVycy5TdGF0ZS5JTlNFUlRdOzA8aC5sZW5ndGgmJmUucHVzaCh0aGlzLmNyZWF0ZShoLE9wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKHtjYWxsYmFjazpjLHNjb3BlOnRoaXN9LGIuY3JlYXRlKSkpO2g9Z1tPcGVuTGF5ZXJzLlN0YXRlLlVQREFURV07Zm9yKG09aC5sZW5ndGgtMTswPD1tOy0tbSllLnB1c2godGhpcy51cGRhdGUoaFttXSxPcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyh7Y2FsbGJhY2s6ZCxzY29wZTp0aGlzfSxiLnVwZGF0ZSkpKTtoPWdbT3BlbkxheWVycy5TdGF0ZS5ERUxFVEVdOwpmb3IobT1oLmxlbmd0aC0xOzA8PW07LS1tKWUucHVzaCh0aGlzWyJkZWxldGUiXShoW21dLE9wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKHtjYWxsYmFjazpkLHNjb3BlOnRoaXN9LGJbImRlbGV0ZSJdKSkpO3JldHVybiBlfSxhYm9ydDpmdW5jdGlvbihhKXthJiZhLnByaXYuYWJvcnQoKX0sY2FsbFVzZXJDYWxsYmFjazpmdW5jdGlvbihhLGIpe3ZhciBjPWJbYS5yZXF1ZXN0VHlwZV07YyYmYy5jYWxsYmFjayYmYy5jYWxsYmFjay5jYWxsKGMuc2NvcGUsYSl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuUHJvdG9jb2wuSFRUUCJ9KTtPcGVuTGF5ZXJzLlN0cmF0ZWd5LkNsdXN0ZXI9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLlN0cmF0ZWd5LHtkaXN0YW5jZToyMCx0aHJlc2hvbGQ6bnVsbCxmZWF0dXJlczpudWxsLGNsdXN0ZXJzOm51bGwsY2x1c3RlcmluZzohMSxyZXNvbHV0aW9uOm51bGwsYWN0aXZhdGU6ZnVuY3Rpb24oKXt2YXIgYT1PcGVuTGF5ZXJzLlN0cmF0ZWd5LnByb3RvdHlwZS5hY3RpdmF0ZS5jYWxsKHRoaXMpO2lmKGEpdGhpcy5sYXllci5ldmVudHMub24oe2JlZm9yZWZlYXR1cmVzYWRkZWQ6dGhpcy5jYWNoZUZlYXR1cmVzLGZlYXR1cmVzcmVtb3ZlZDp0aGlzLmNsZWFyQ2FjaGUsbW92ZWVuZDp0aGlzLmNsdXN0ZXIsc2NvcGU6dGhpc30pO3JldHVybiBhfSxkZWFjdGl2YXRlOmZ1bmN0aW9uKCl7dmFyIGE9T3BlbkxheWVycy5TdHJhdGVneS5wcm90b3R5cGUuZGVhY3RpdmF0ZS5jYWxsKHRoaXMpO2EmJih0aGlzLmNsZWFyQ2FjaGUoKSx0aGlzLmxheWVyLmV2ZW50cy51bih7YmVmb3JlZmVhdHVyZXNhZGRlZDp0aGlzLmNhY2hlRmVhdHVyZXMsCmZlYXR1cmVzcmVtb3ZlZDp0aGlzLmNsZWFyQ2FjaGUsbW92ZWVuZDp0aGlzLmNsdXN0ZXIsc2NvcGU6dGhpc30pKTtyZXR1cm4gYX0sY2FjaGVGZWF0dXJlczpmdW5jdGlvbihhKXt2YXIgYj0hMDt0aGlzLmNsdXN0ZXJpbmd8fCh0aGlzLmNsZWFyQ2FjaGUoKSx0aGlzLmZlYXR1cmVzPWEuZmVhdHVyZXMsdGhpcy5jbHVzdGVyKCksYj0hMSk7cmV0dXJuIGJ9LGNsZWFyQ2FjaGU6ZnVuY3Rpb24oKXt0aGlzLmNsdXN0ZXJpbmd8fCh0aGlzLmZlYXR1cmVzPW51bGwpfSxjbHVzdGVyOmZ1bmN0aW9uKGEpe2lmKCghYXx8YS56b29tQ2hhbmdlZCkmJnRoaXMuZmVhdHVyZXMmJihhPXRoaXMubGF5ZXIubWFwLmdldFJlc29sdXRpb24oKSxhIT10aGlzLnJlc29sdXRpb258fCF0aGlzLmNsdXN0ZXJzRXhpc3QoKSkpe3RoaXMucmVzb2x1dGlvbj1hO2E9W107Zm9yKHZhciBiLGMsZCxlPTA7ZTx0aGlzLmZlYXR1cmVzLmxlbmd0aDsrK2UpaWYoYj10aGlzLmZlYXR1cmVzW2VdLGIuZ2VvbWV0cnkpe2M9CiExO2Zvcih2YXIgZj1hLmxlbmd0aC0xOzA8PWY7LS1mKWlmKGQ9YVtmXSx0aGlzLnNob3VsZENsdXN0ZXIoZCxiKSl7dGhpcy5hZGRUb0NsdXN0ZXIoZCxiKTtjPSEwO2JyZWFrfWN8fGEucHVzaCh0aGlzLmNyZWF0ZUNsdXN0ZXIodGhpcy5mZWF0dXJlc1tlXSkpfXRoaXMuY2x1c3RlcmluZz0hMDt0aGlzLmxheWVyLnJlbW92ZUFsbEZlYXR1cmVzKCk7dGhpcy5jbHVzdGVyaW5nPSExO2lmKDA8YS5sZW5ndGgpe2lmKDE8dGhpcy50aHJlc2hvbGQpZm9yKGI9YS5zbGljZSgpLGE9W10sZT0wLGQ9Yi5sZW5ndGg7ZTxkOysrZSljPWJbZV0sYy5hdHRyaWJ1dGVzLmNvdW50PHRoaXMudGhyZXNob2xkP0FycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KGEsYy5jbHVzdGVyKTphLnB1c2goYyk7dGhpcy5jbHVzdGVyaW5nPSEwO3RoaXMubGF5ZXIuYWRkRmVhdHVyZXMoYSk7dGhpcy5jbHVzdGVyaW5nPSExfXRoaXMuY2x1c3RlcnM9YX19LGNsdXN0ZXJzRXhpc3Q6ZnVuY3Rpb24oKXt2YXIgYT0KITE7aWYodGhpcy5jbHVzdGVycyYmMDx0aGlzLmNsdXN0ZXJzLmxlbmd0aCYmdGhpcy5jbHVzdGVycy5sZW5ndGg9PXRoaXMubGF5ZXIuZmVhdHVyZXMubGVuZ3RoKWZvcih2YXIgYT0hMCxiPTA7Yjx0aGlzLmNsdXN0ZXJzLmxlbmd0aDsrK2IpaWYodGhpcy5jbHVzdGVyc1tiXSE9dGhpcy5sYXllci5mZWF0dXJlc1tiXSl7YT0hMTticmVha31yZXR1cm4gYX0sc2hvdWxkQ2x1c3RlcjpmdW5jdGlvbihhLGIpe3ZhciBjPWEuZ2VvbWV0cnkuZ2V0Qm91bmRzKCkuZ2V0Q2VudGVyTG9uTGF0KCksZD1iLmdlb21ldHJ5LmdldEJvdW5kcygpLmdldENlbnRlckxvbkxhdCgpO3JldHVybiBNYXRoLnNxcnQoTWF0aC5wb3coYy5sb24tZC5sb24sMikrTWF0aC5wb3coYy5sYXQtZC5sYXQsMikpL3RoaXMucmVzb2x1dGlvbjw9dGhpcy5kaXN0YW5jZX0sYWRkVG9DbHVzdGVyOmZ1bmN0aW9uKGEsYil7YS5jbHVzdGVyLnB1c2goYik7YS5hdHRyaWJ1dGVzLmNvdW50Kz0xfSxjcmVhdGVDbHVzdGVyOmZ1bmN0aW9uKGEpe3ZhciBiPQphLmdlb21ldHJ5LmdldEJvdW5kcygpLmdldENlbnRlckxvbkxhdCgpLGI9bmV3IE9wZW5MYXllcnMuRmVhdHVyZS5WZWN0b3IobmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoYi5sb24sYi5sYXQpLHtjb3VudDoxfSk7Yi5jbHVzdGVyPVthXTtyZXR1cm4gYn0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5TdHJhdGVneS5DbHVzdGVyIn0pO09wZW5MYXllcnMuU3RyYXRlZ3kuRmlsdGVyPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5TdHJhdGVneSx7ZmlsdGVyOm51bGwsY2FjaGU6bnVsbCxjYWNoaW5nOiExLGFjdGl2YXRlOmZ1bmN0aW9uKCl7dmFyIGE9T3BlbkxheWVycy5TdHJhdGVneS5wcm90b3R5cGUuYWN0aXZhdGUuYXBwbHkodGhpcyxhcmd1bWVudHMpO2EmJih0aGlzLmNhY2hlPVtdLHRoaXMubGF5ZXIuZXZlbnRzLm9uKHtiZWZvcmVmZWF0dXJlc2FkZGVkOnRoaXMuaGFuZGxlQWRkLGJlZm9yZWZlYXR1cmVzcmVtb3ZlZDp0aGlzLmhhbmRsZVJlbW92ZSxzY29wZTp0aGlzfSkpO3JldHVybiBhfSxkZWFjdGl2YXRlOmZ1bmN0aW9uKCl7dGhpcy5jYWNoZT1udWxsO3RoaXMubGF5ZXImJnRoaXMubGF5ZXIuZXZlbnRzJiZ0aGlzLmxheWVyLmV2ZW50cy51bih7YmVmb3JlZmVhdHVyZXNhZGRlZDp0aGlzLmhhbmRsZUFkZCxiZWZvcmVmZWF0dXJlc3JlbW92ZWQ6dGhpcy5oYW5kbGVSZW1vdmUsc2NvcGU6dGhpc30pOwpyZXR1cm4gT3BlbkxheWVycy5TdHJhdGVneS5wcm90b3R5cGUuZGVhY3RpdmF0ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGhhbmRsZUFkZDpmdW5jdGlvbihhKXtpZighdGhpcy5jYWNoaW5nJiZ0aGlzLmZpbHRlcil7dmFyIGI9YS5mZWF0dXJlczthLmZlYXR1cmVzPVtdO2Zvcih2YXIgYyxkPTAsZT1iLmxlbmd0aDtkPGU7KytkKWM9YltkXSx0aGlzLmZpbHRlci5ldmFsdWF0ZShjKT9hLmZlYXR1cmVzLnB1c2goYyk6dGhpcy5jYWNoZS5wdXNoKGMpfX0saGFuZGxlUmVtb3ZlOmZ1bmN0aW9uKGEpe3RoaXMuY2FjaGluZ3x8KHRoaXMuY2FjaGU9W10pfSxzZXRGaWx0ZXI6ZnVuY3Rpb24oYSl7dGhpcy5maWx0ZXI9YTthPXRoaXMuY2FjaGU7dGhpcy5jYWNoZT1bXTt0aGlzLmhhbmRsZUFkZCh7ZmVhdHVyZXM6dGhpcy5sYXllci5mZWF0dXJlc30pOzA8dGhpcy5jYWNoZS5sZW5ndGgmJih0aGlzLmNhY2hpbmc9ITAsdGhpcy5sYXllci5yZW1vdmVGZWF0dXJlcyh0aGlzLmNhY2hlLnNsaWNlKCkpLAp0aGlzLmNhY2hpbmc9ITEpOzA8YS5sZW5ndGgmJihhPXtmZWF0dXJlczphfSx0aGlzLmhhbmRsZUFkZChhKSwwPGEuZmVhdHVyZXMubGVuZ3RoJiYodGhpcy5jYWNoaW5nPSEwLHRoaXMubGF5ZXIuYWRkRmVhdHVyZXMoYS5mZWF0dXJlcyksdGhpcy5jYWNoaW5nPSExKSl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuU3RyYXRlZ3kuRmlsdGVyIn0pO09wZW5MYXllcnMuUHJvdG9jb2wuU09TPWZ1bmN0aW9uKGEpe2E9T3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoYSxPcGVuTGF5ZXJzLlByb3RvY29sLlNPUy5ERUZBVUxUUyk7dmFyIGI9T3BlbkxheWVycy5Qcm90b2NvbC5TT1NbInYiK2EudmVyc2lvbi5yZXBsYWNlKC9cLi9nLCJfIildO2lmKCFiKXRocm93IlVuc3VwcG9ydGVkIFNPUyB2ZXJzaW9uOiAiK2EudmVyc2lvbjtyZXR1cm4gbmV3IGIoYSl9O09wZW5MYXllcnMuUHJvdG9jb2wuU09TLkRFRkFVTFRTPXt2ZXJzaW9uOiIxLjAuMCJ9O09wZW5MYXllcnMuRm9ybWF0LldGU0Rlc2NyaWJlRmVhdHVyZVR5cGU9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkZvcm1hdC5YTUwse3JlZ0V4ZXM6e3RyaW1TcGFjZTovXlxzKnxccyokL2d9LG5hbWVzcGFjZXM6e3hzZDoiaHR0cDovL3d3dy53My5vcmcvMjAwMS9YTUxTY2hlbWEifSxyZWFkZXJzOnt4c2Q6e3NjaGVtYTpmdW5jdGlvbihhLGIpe3ZhciBjPVtdLGQ9e30sZSxmO3RoaXMucmVhZENoaWxkTm9kZXMoYSx7Y29tcGxleFR5cGVzOmMsY3VzdG9tVHlwZXM6ZH0pO3ZhciBnPWEuYXR0cmlidXRlcyxoLGs7ZT0wO2ZvcihmPWcubGVuZ3RoO2U8ZjsrK2UpaD1nW2VdLGs9aC5uYW1lLDA9PT1rLmluZGV4T2YoInhtbG5zIik/dGhpcy5zZXROYW1lc3BhY2Uoay5zcGxpdCgiOiIpWzFdfHwiIixoLnZhbHVlKTpiW2tdPWgudmFsdWU7Yi5mZWF0dXJlVHlwZXM9YztiLnRhcmdldFByZWZpeD10aGlzLm5hbWVzcGFjZUFsaWFzW2IudGFyZ2V0TmFtZXNwYWNlXTtlPTA7Zm9yKGY9CmMubGVuZ3RoO2U8ZjsrK2UpZz1jW2VdLGg9ZFtnLnR5cGVOYW1lXSxkW2cudHlwZU5hbWVdJiYoZy50eXBlTmFtZT1oLm5hbWUpfSxjb21wbGV4VHlwZTpmdW5jdGlvbihhLGIpe3ZhciBjPXt0eXBlTmFtZTphLmdldEF0dHJpYnV0ZSgibmFtZSIpfTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYyk7Yi5jb21wbGV4VHlwZXMucHVzaChjKX0sY29tcGxleENvbnRlbnQ6ZnVuY3Rpb24oYSxiKXt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYil9LGV4dGVuc2lvbjpmdW5jdGlvbihhLGIpe3RoaXMucmVhZENoaWxkTm9kZXMoYSxiKX0sc2VxdWVuY2U6ZnVuY3Rpb24oYSxiKXt2YXIgYz17ZWxlbWVudHM6W119O3RoaXMucmVhZENoaWxkTm9kZXMoYSxjKTtiLnByb3BlcnRpZXM9Yy5lbGVtZW50c30sZWxlbWVudDpmdW5jdGlvbihhLGIpe3ZhciBjO2lmKGIuZWxlbWVudHMpe3ZhciBkPXt9O2M9YS5hdHRyaWJ1dGVzO2Zvcih2YXIgZSxmPTAsZz1jLmxlbmd0aDtmPGc7KytmKWU9Y1tmXSxkW2UubmFtZV09CmUudmFsdWU7Yz1kLnR5cGU7Y3x8KGM9e30sdGhpcy5yZWFkQ2hpbGROb2RlcyhhLGMpLGQucmVzdHJpY3Rpb249YyxkLnR5cGU9Yy5iYXNlKTtkLmxvY2FsVHlwZT0oYy5iYXNlfHxjKS5zcGxpdCgiOiIpLnBvcCgpO2IuZWxlbWVudHMucHVzaChkKTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsZCl9Yi5jb21wbGV4VHlwZXMmJihjPWEuZ2V0QXR0cmlidXRlKCJ0eXBlIiksZD1jLnNwbGl0KCI6IikucG9wKCksYi5jdXN0b21UeXBlc1tkXT17bmFtZTphLmdldEF0dHJpYnV0ZSgibmFtZSIpLHR5cGU6Y30pfSxhbm5vdGF0aW9uOmZ1bmN0aW9uKGEsYil7Yi5hbm5vdGF0aW9uPXt9O3RoaXMucmVhZENoaWxkTm9kZXMoYSxiLmFubm90YXRpb24pfSxhcHBpbmZvOmZ1bmN0aW9uKGEsYil7Yi5hcHBpbmZvfHwoYi5hcHBpbmZvPVtdKTtiLmFwcGluZm8ucHVzaCh0aGlzLmdldENoaWxkVmFsdWUoYSkpfSxkb2N1bWVudGF0aW9uOmZ1bmN0aW9uKGEsYil7Yi5kb2N1bWVudGF0aW9ufHwoYi5kb2N1bWVudGF0aW9uPQpbXSk7dmFyIGM9dGhpcy5nZXRDaGlsZFZhbHVlKGEpO2IuZG9jdW1lbnRhdGlvbi5wdXNoKHtsYW5nOmEuZ2V0QXR0cmlidXRlKCJ4bWw6bGFuZyIpLHRleHRDb250ZW50OmMucmVwbGFjZSh0aGlzLnJlZ0V4ZXMudHJpbVNwYWNlLCIiKX0pfSxzaW1wbGVUeXBlOmZ1bmN0aW9uKGEsYil7dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGIpfSxyZXN0cmljdGlvbjpmdW5jdGlvbihhLGIpe2IuYmFzZT1hLmdldEF0dHJpYnV0ZSgiYmFzZSIpO3RoaXMucmVhZFJlc3RyaWN0aW9uKGEsYil9fX0scmVhZFJlc3RyaWN0aW9uOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPWEuY2hpbGROb2RlcyxkLGUsZj0wLGc9Yy5sZW5ndGg7ZjxnOysrZilkPWNbZl0sMT09ZC5ub2RlVHlwZSYmKGU9ZC5ub2RlTmFtZS5zcGxpdCgiOiIpLnBvcCgpLGQ9ZC5nZXRBdHRyaWJ1dGUoInZhbHVlIiksYltlXT8oInN0cmluZyI9PXR5cGVvZiBiW2VdJiYoYltlXT1bYltlXV0pLGJbZV0ucHVzaChkKSk6YltlXT1kKX0scmVhZDpmdW5jdGlvbihhKXsic3RyaW5nIj09CnR5cGVvZiBhJiYoYT1PcGVuTGF5ZXJzLkZvcm1hdC5YTUwucHJvdG90eXBlLnJlYWQuYXBwbHkodGhpcyxbYV0pKTthJiY5PT1hLm5vZGVUeXBlJiYoYT1hLmRvY3VtZW50RWxlbWVudCk7dmFyIGI9e307aWYoIkV4Y2VwdGlvblJlcG9ydCI9PT1hLm5vZGVOYW1lLnNwbGl0KCI6IikucG9wKCkpe3ZhciBjPW5ldyBPcGVuTGF5ZXJzLkZvcm1hdC5PR0NFeGNlcHRpb25SZXBvcnQ7Yi5lcnJvcj1jLnJlYWQoYSl9ZWxzZSB0aGlzLnJlYWROb2RlKGEsYik7cmV0dXJuIGJ9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuRm9ybWF0LldGU0Rlc2NyaWJlRmVhdHVyZVR5cGUifSk7T3BlbkxheWVycy5Gb3JtYXQuR2VvUlNTPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Gb3JtYXQuWE1MLHtyc3NuczoiaHR0cDovL2JhY2tlbmQudXNlcmxhbmQuY29tL3JzczIiLGZlYXR1cmVOUzoiaHR0cDovL21hcHNlcnZlci5naXMudW1uLmVkdS9tYXBzZXJ2ZXIiLGdlb3Jzc25zOiJodHRwOi8vd3d3Lmdlb3Jzcy5vcmcvZ2VvcnNzIixnZW9uczoiaHR0cDovL3d3dy53My5vcmcvMjAwMy8wMS9nZW8vd2dzODRfcG9zIyIsZmVhdHVyZVRpdGxlOiJVbnRpdGxlZCIsZmVhdHVyZURlc2NyaXB0aW9uOiJObyBEZXNjcmlwdGlvbiIsZ21sUGFyc2VyOm51bGwseHk6ITEsY3JlYXRlR2VvbWV0cnlGcm9tSXRlbTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmdldEVsZW1lbnRzQnlUYWdOYW1lTlMoYSx0aGlzLmdlb3Jzc25zLCJwb2ludCIpLGM9dGhpcy5nZXRFbGVtZW50c0J5VGFnTmFtZU5TKGEsdGhpcy5nZW9ucywibGF0IiksZD10aGlzLmdldEVsZW1lbnRzQnlUYWdOYW1lTlMoYSwKdGhpcy5nZW9ucywibG9uZyIpLGU9dGhpcy5nZXRFbGVtZW50c0J5VGFnTmFtZU5TKGEsdGhpcy5nZW9yc3NucywibGluZSIpLGY9dGhpcy5nZXRFbGVtZW50c0J5VGFnTmFtZU5TKGEsdGhpcy5nZW9yc3NucywicG9seWdvbiIpLGc9dGhpcy5nZXRFbGVtZW50c0J5VGFnTmFtZU5TKGEsdGhpcy5nZW9yc3Nucywid2hlcmUiKTthPXRoaXMuZ2V0RWxlbWVudHNCeVRhZ05hbWVOUyhhLHRoaXMuZ2VvcnNzbnMsImJveCIpO2lmKDA8Yi5sZW5ndGh8fDA8Yy5sZW5ndGgmJjA8ZC5sZW5ndGgpezA8Yi5sZW5ndGg/KGM9T3BlbkxheWVycy5TdHJpbmcudHJpbShiWzBdLmZpcnN0Q2hpbGQubm9kZVZhbHVlKS5zcGxpdCgvXHMrLyksMiE9Yy5sZW5ndGgmJihjPU9wZW5MYXllcnMuU3RyaW5nLnRyaW0oYlswXS5maXJzdENoaWxkLm5vZGVWYWx1ZSkuc3BsaXQoL1xzKixccyovKSkpOmM9W3BhcnNlRmxvYXQoY1swXS5maXJzdENoaWxkLm5vZGVWYWx1ZSkscGFyc2VGbG9hdChkWzBdLmZpcnN0Q2hpbGQubm9kZVZhbHVlKV07CnZhciBoPW5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KGNbMV0sY1swXSl9ZWxzZSBpZigwPGUubGVuZ3RoKXtjPU9wZW5MYXllcnMuU3RyaW5nLnRyaW0odGhpcy5nZXRDaGlsZFZhbHVlKGVbMF0pKS5zcGxpdCgvXHMrLyk7ZD1bXTtlPTA7Zm9yKGY9Yy5sZW5ndGg7ZTxmO2UrPTIpYj1uZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludChjW2UrMV0sY1tlXSksZC5wdXNoKGIpO2g9bmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuTGluZVN0cmluZyhkKX1lbHNlIGlmKDA8Zi5sZW5ndGgpe2M9T3BlbkxheWVycy5TdHJpbmcudHJpbSh0aGlzLmdldENoaWxkVmFsdWUoZlswXSkpLnNwbGl0KC9ccysvKTtkPVtdO2U9MDtmb3IoZj1jLmxlbmd0aDtlPGY7ZSs9MiliPW5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KGNbZSsxXSxjW2VdKSxkLnB1c2goYik7aD1uZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2x5Z29uKFtuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5MaW5lYXJSaW5nKGQpXSl9ZWxzZSAwPApnLmxlbmd0aD8odGhpcy5nbWxQYXJzZXJ8fCh0aGlzLmdtbFBhcnNlcj1uZXcgT3BlbkxheWVycy5Gb3JtYXQuR01MKHt4eTp0aGlzLnh5fSkpLGg9dGhpcy5nbWxQYXJzZXIucGFyc2VGZWF0dXJlKGdbMF0pLmdlb21ldHJ5KTowPGEubGVuZ3RoJiYoYz1PcGVuTGF5ZXJzLlN0cmluZy50cmltKGFbMF0uZmlyc3RDaGlsZC5ub2RlVmFsdWUpLnNwbGl0KC9ccysvKSxkPVtdLDM8Yy5sZW5ndGgmJihiPW5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KGNbMV0sY1swXSksZC5wdXNoKGIpLGI9bmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoY1sxXSxjWzJdKSxkLnB1c2goYiksYj1uZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludChjWzNdLGNbMl0pLGQucHVzaChiKSxiPW5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KGNbM10sY1swXSksZC5wdXNoKGIpLGI9bmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoY1sxXSxjWzBdKSxkLnB1c2goYikpLGg9bmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9seWdvbihbbmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuTGluZWFyUmluZyhkKV0pKTsKaCYmKHRoaXMuaW50ZXJuYWxQcm9qZWN0aW9uJiZ0aGlzLmV4dGVybmFsUHJvamVjdGlvbikmJmgudHJhbnNmb3JtKHRoaXMuZXh0ZXJuYWxQcm9qZWN0aW9uLHRoaXMuaW50ZXJuYWxQcm9qZWN0aW9uKTtyZXR1cm4gaH0sY3JlYXRlRmVhdHVyZUZyb21JdGVtOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3JlYXRlR2VvbWV0cnlGcm9tSXRlbShhKSxjPXRoaXMuX2dldENoaWxkVmFsdWUoYSwiKiIsInRpdGxlIix0aGlzLmZlYXR1cmVUaXRsZSksZD10aGlzLl9nZXRDaGlsZFZhbHVlKGEsIioiLCJkZXNjcmlwdGlvbiIsdGhpcy5fZ2V0Q2hpbGRWYWx1ZShhLCIqIiwiY29udGVudCIsdGhpcy5fZ2V0Q2hpbGRWYWx1ZShhLCIqIiwic3VtbWFyeSIsdGhpcy5mZWF0dXJlRGVzY3JpcHRpb24pKSksZT10aGlzLl9nZXRDaGlsZFZhbHVlKGEsIioiLCJsaW5rIik7aWYoIWUpdHJ5e2U9dGhpcy5nZXRFbGVtZW50c0J5VGFnTmFtZU5TKGEsIioiLCJsaW5rIilbMF0uZ2V0QXR0cmlidXRlKCJocmVmIil9Y2F0Y2goZil7ZT0KbnVsbH1hPXRoaXMuX2dldENoaWxkVmFsdWUoYSwiKiIsImlkIixudWxsKTtiPW5ldyBPcGVuTGF5ZXJzLkZlYXR1cmUuVmVjdG9yKGIse3RpdGxlOmMsZGVzY3JpcHRpb246ZCxsaW5rOmV9KTtiLmZpZD1hO3JldHVybiBifSxfZ2V0Q2hpbGRWYWx1ZTpmdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4oYT10aGlzLmdldEVsZW1lbnRzQnlUYWdOYW1lTlMoYSxiLGMpKSYmYVswXSYmYVswXS5maXJzdENoaWxkJiZhWzBdLmZpcnN0Q2hpbGQubm9kZVZhbHVlP3RoaXMuZ2V0Q2hpbGRWYWx1ZShhWzBdKTp2b2lkIDA9PWQ/IiI6ZH0scmVhZDpmdW5jdGlvbihhKXsic3RyaW5nIj09dHlwZW9mIGEmJihhPU9wZW5MYXllcnMuRm9ybWF0LlhNTC5wcm90b3R5cGUucmVhZC5hcHBseSh0aGlzLFthXSkpO3ZhciBiPW51bGwsYj10aGlzLmdldEVsZW1lbnRzQnlUYWdOYW1lTlMoYSwiKiIsIml0ZW0iKTswPT1iLmxlbmd0aCYmKGI9dGhpcy5nZXRFbGVtZW50c0J5VGFnTmFtZU5TKGEsIioiLCJlbnRyeSIpKTsKYT1iLmxlbmd0aDtmb3IodmFyIGM9QXJyYXkoYSksZD0wO2Q8YTtkKyspY1tkXT10aGlzLmNyZWF0ZUZlYXR1cmVGcm9tSXRlbShiW2RdKTtyZXR1cm4gY30sd3JpdGU6ZnVuY3Rpb24oYSl7dmFyIGI7aWYoT3BlbkxheWVycy5VdGlsLmlzQXJyYXkoYSkpe2I9dGhpcy5jcmVhdGVFbGVtZW50TlModGhpcy5yc3NucywicnNzIik7Zm9yKHZhciBjPTAsZD1hLmxlbmd0aDtjPGQ7YysrKWIuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVGZWF0dXJlWE1MKGFbY10pKX1lbHNlIGI9dGhpcy5jcmVhdGVGZWF0dXJlWE1MKGEpO3JldHVybiBPcGVuTGF5ZXJzLkZvcm1hdC5YTUwucHJvdG90eXBlLndyaXRlLmFwcGx5KHRoaXMsW2JdKX0sY3JlYXRlRmVhdHVyZVhNTDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmJ1aWxkR2VvbWV0cnlOb2RlKGEuZ2VvbWV0cnkpLGM9dGhpcy5jcmVhdGVFbGVtZW50TlModGhpcy5yc3NucywiaXRlbSIpLGQ9dGhpcy5jcmVhdGVFbGVtZW50TlModGhpcy5yc3NucywidGl0bGUiKTsKZC5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZVRleHROb2RlKGEuYXR0cmlidXRlcy50aXRsZT9hLmF0dHJpYnV0ZXMudGl0bGU6IiIpKTt2YXIgZT10aGlzLmNyZWF0ZUVsZW1lbnROUyh0aGlzLnJzc25zLCJkZXNjcmlwdGlvbiIpO2UuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVUZXh0Tm9kZShhLmF0dHJpYnV0ZXMuZGVzY3JpcHRpb24/YS5hdHRyaWJ1dGVzLmRlc2NyaXB0aW9uOiIiKSk7Yy5hcHBlbmRDaGlsZChkKTtjLmFwcGVuZENoaWxkKGUpO2EuYXR0cmlidXRlcy5saW5rJiYoZD10aGlzLmNyZWF0ZUVsZW1lbnROUyh0aGlzLnJzc25zLCJsaW5rIiksZC5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZVRleHROb2RlKGEuYXR0cmlidXRlcy5saW5rKSksYy5hcHBlbmRDaGlsZChkKSk7Zm9yKHZhciBmIGluIGEuYXR0cmlidXRlcykibGluayIhPWYmJigidGl0bGUiIT1mJiYiZGVzY3JpcHRpb24iIT1mKSYmKGQ9dGhpcy5jcmVhdGVUZXh0Tm9kZShhLmF0dHJpYnV0ZXNbZl0pLGU9ZiwtMSE9CmYuc2VhcmNoKCI6IikmJihlPWYuc3BsaXQoIjoiKVsxXSksZT10aGlzLmNyZWF0ZUVsZW1lbnROUyh0aGlzLmZlYXR1cmVOUywiZmVhdHVyZToiK2UpLGUuYXBwZW5kQ2hpbGQoZCksYy5hcHBlbmRDaGlsZChlKSk7Yy5hcHBlbmRDaGlsZChiKTtyZXR1cm4gY30sYnVpbGRHZW9tZXRyeU5vZGU6ZnVuY3Rpb24oYSl7dGhpcy5pbnRlcm5hbFByb2plY3Rpb24mJnRoaXMuZXh0ZXJuYWxQcm9qZWN0aW9uJiYoYT1hLmNsb25lKCksYS50cmFuc2Zvcm0odGhpcy5pbnRlcm5hbFByb2plY3Rpb24sdGhpcy5leHRlcm5hbFByb2plY3Rpb24pKTt2YXIgYjtpZigiT3BlbkxheWVycy5HZW9tZXRyeS5Qb2x5Z29uIj09YS5DTEFTU19OQU1FKWI9dGhpcy5jcmVhdGVFbGVtZW50TlModGhpcy5nZW9yc3NucywiZ2VvcnNzOnBvbHlnb24iKSxiLmFwcGVuZENoaWxkKHRoaXMuYnVpbGRDb29yZGluYXRlc05vZGUoYS5jb21wb25lbnRzWzBdKSk7ZWxzZSBpZigiT3BlbkxheWVycy5HZW9tZXRyeS5MaW5lU3RyaW5nIj09CmEuQ0xBU1NfTkFNRSliPXRoaXMuY3JlYXRlRWxlbWVudE5TKHRoaXMuZ2VvcnNzbnMsImdlb3JzczpsaW5lIiksYi5hcHBlbmRDaGlsZCh0aGlzLmJ1aWxkQ29vcmRpbmF0ZXNOb2RlKGEpKTtlbHNlIGlmKCJPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50Ij09YS5DTEFTU19OQU1FKWI9dGhpcy5jcmVhdGVFbGVtZW50TlModGhpcy5nZW9yc3NucywiZ2VvcnNzOnBvaW50IiksYi5hcHBlbmRDaGlsZCh0aGlzLmJ1aWxkQ29vcmRpbmF0ZXNOb2RlKGEpKTtlbHNlIHRocm93IkNvdWxkbid0IHBhcnNlICIrYS5DTEFTU19OQU1FO3JldHVybiBifSxidWlsZENvb3JkaW5hdGVzTm9kZTpmdW5jdGlvbihhKXt2YXIgYj1udWxsO2EuY29tcG9uZW50cyYmKGI9YS5jb21wb25lbnRzKTtpZihiKXthPWIubGVuZ3RoO2Zvcih2YXIgYz1BcnJheShhKSxkPTA7ZDxhO2QrKyljW2RdPWJbZF0ueSsiICIrYltkXS54O2I9Yy5qb2luKCIgIil9ZWxzZSBiPWEueSsiICIrYS54O3JldHVybiB0aGlzLmNyZWF0ZVRleHROb2RlKGIpfSwKQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Gb3JtYXQuR2VvUlNTIn0pO09wZW5MYXllcnMuRm9ybWF0LldQU0NhcGFiaWxpdGllcz1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuRm9ybWF0LlhNTC5WZXJzaW9uZWRPR0Mse2RlZmF1bHRWZXJzaW9uOiIxLjAuMCIsQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Gb3JtYXQuV1BTQ2FwYWJpbGl0aWVzIn0pO09wZW5MYXllcnMuRm9ybWF0LldQU0NhcGFiaWxpdGllcy52MV8wXzA9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkZvcm1hdC5YTUwse25hbWVzcGFjZXM6e293czoiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9vd3MvMS4xIix3cHM6Imh0dHA6Ly93d3cub3Blbmdpcy5uZXQvd3BzLzEuMC4wIix4bGluazoiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayJ9LHJlZ0V4ZXM6e3RyaW1TcGFjZTovXlxzKnxccyokL2cscmVtb3ZlU3BhY2U6L1xzKi9nLHNwbGl0U3BhY2U6L1xzKy8sdHJpbUNvbW1hOi9ccyosXHMqL2d9LGluaXRpYWxpemU6ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5Gb3JtYXQuWE1MLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsW2FdKX0scmVhZDpmdW5jdGlvbihhKXsic3RyaW5nIj09dHlwZW9mIGEmJihhPU9wZW5MYXllcnMuRm9ybWF0LlhNTC5wcm90b3R5cGUucmVhZC5hcHBseSh0aGlzLFthXSkpO2EmJjk9PWEubm9kZVR5cGUmJihhPWEuZG9jdW1lbnRFbGVtZW50KTsKdmFyIGI9e307dGhpcy5yZWFkTm9kZShhLGIpO3JldHVybiBifSxyZWFkZXJzOnt3cHM6e0NhcGFiaWxpdGllczpmdW5jdGlvbihhLGIpe3RoaXMucmVhZENoaWxkTm9kZXMoYSxiKX0sUHJvY2Vzc09mZmVyaW5nczpmdW5jdGlvbihhLGIpe2IucHJvY2Vzc09mZmVyaW5ncz17fTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYi5wcm9jZXNzT2ZmZXJpbmdzKX0sUHJvY2VzczpmdW5jdGlvbihhLGIpe3ZhciBjPXtwcm9jZXNzVmVyc2lvbjp0aGlzLmdldEF0dHJpYnV0ZU5TKGEsdGhpcy5uYW1lc3BhY2VzLndwcywicHJvY2Vzc1ZlcnNpb24iKX07dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGMpO2JbYy5pZGVudGlmaWVyXT1jfSxMYW5ndWFnZXM6ZnVuY3Rpb24oYSxiKXtiLmxhbmd1YWdlcz1bXTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYi5sYW5ndWFnZXMpfSxEZWZhdWx0OmZ1bmN0aW9uKGEsYil7dmFyIGM9e2lzRGVmYXVsdDohMH07dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGMpO2IucHVzaChjKX0sClN1cHBvcnRlZDpmdW5jdGlvbihhLGIpe3ZhciBjPXt9O3RoaXMucmVhZENoaWxkTm9kZXMoYSxjKTtiLnB1c2goYyl9fSxvd3M6T3BlbkxheWVycy5Gb3JtYXQuT1dTQ29tbW9uLnYxXzFfMC5wcm90b3R5cGUucmVhZGVycy5vd3N9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuRm9ybWF0LldQU0NhcGFiaWxpdGllcy52MV8wXzAifSk7T3BlbkxheWVycy5Db250cm9sLlBpbmNoWm9vbT1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuQ29udHJvbCx7dHlwZTpPcGVuTGF5ZXJzLkNvbnRyb2wuVFlQRV9UT09MLHBpbmNoT3JpZ2luOm51bGwsY3VycmVudENlbnRlcjpudWxsLGF1dG9BY3RpdmF0ZTohMCxwcmVzZXJ2ZUNlbnRlcjohMSxpbml0aWFsaXplOmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5oYW5kbGVyPW5ldyBPcGVuTGF5ZXJzLkhhbmRsZXIuUGluY2godGhpcyx7c3RhcnQ6dGhpcy5waW5jaFN0YXJ0LG1vdmU6dGhpcy5waW5jaE1vdmUsZG9uZTp0aGlzLnBpbmNoRG9uZX0sdGhpcy5oYW5kbGVyT3B0aW9ucyl9LHBpbmNoU3RhcnQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLnByZXNlcnZlQ2VudGVyP3RoaXMubWFwLmdldFBpeGVsRnJvbUxvbkxhdCh0aGlzLm1hcC5nZXRDZW50ZXIoKSk6YS54eTt0aGlzLmN1cnJlbnRDZW50ZXI9CnRoaXMucGluY2hPcmlnaW49Y30scGluY2hNb3ZlOmZ1bmN0aW9uKGEsYil7dmFyIGM9Yi5zY2FsZSxkPXRoaXMubWFwLmxheWVyQ29udGFpbmVyT3JpZ2luUHgsZT10aGlzLnBpbmNoT3JpZ2luLGY9dGhpcy5wcmVzZXJ2ZUNlbnRlcj90aGlzLm1hcC5nZXRQaXhlbEZyb21Mb25MYXQodGhpcy5tYXAuZ2V0Q2VudGVyKCkpOmEueHksZz1NYXRoLnJvdW5kKGQueCtmLngtZS54KyhjLTEpKihkLngtZS54KSksZD1NYXRoLnJvdW5kKGQueStmLnktZS55KyhjLTEpKihkLnktZS55KSk7dGhpcy5tYXAuYXBwbHlUcmFuc2Zvcm0oZyxkLGMpO3RoaXMuY3VycmVudENlbnRlcj1mfSxwaW5jaERvbmU6ZnVuY3Rpb24oYSxiLGMpe3RoaXMubWFwLmFwcGx5VHJhbnNmb3JtKCk7YT10aGlzLm1hcC5nZXRab29tRm9yUmVzb2x1dGlvbih0aGlzLm1hcC5nZXRSZXNvbHV0aW9uKCkvYy5zY2FsZSwhMCk7aWYoYSE9PXRoaXMubWFwLmdldFpvb20oKXx8IXRoaXMuY3VycmVudENlbnRlci5lcXVhbHModGhpcy5waW5jaE9yaWdpbikpe2I9CnRoaXMubWFwLmdldFJlc29sdXRpb25Gb3Jab29tKGEpO2M9dGhpcy5tYXAuZ2V0TG9uTGF0RnJvbVBpeGVsKHRoaXMucGluY2hPcmlnaW4pO3ZhciBkPXRoaXMuY3VycmVudENlbnRlcixlPXRoaXMubWFwLmdldFNpemUoKTtjLmxvbis9YiooZS53LzItZC54KTtjLmxhdC09YiooZS5oLzItZC55KTt0aGlzLm1hcC5kaXYuY2xpZW50V2lkdGg9dGhpcy5tYXAuZGl2LmNsaWVudFdpZHRoO3RoaXMubWFwLnNldENlbnRlcihjLGEpfX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Db250cm9sLlBpbmNoWm9vbSJ9KTtPcGVuTGF5ZXJzLkNvbnRyb2wuVG91Y2hOYXZpZ2F0aW9uPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Db250cm9sLHtkcmFnUGFuOm51bGwsZHJhZ1Bhbk9wdGlvbnM6bnVsbCxwaW5jaFpvb206bnVsbCxwaW5jaFpvb21PcHRpb25zOm51bGwsY2xpY2tIYW5kbGVyT3B0aW9uczpudWxsLGRvY3VtZW50RHJhZzohMSxhdXRvQWN0aXZhdGU6ITAsaW5pdGlhbGl6ZTpmdW5jdGlvbihhKXt0aGlzLmhhbmRsZXJzPXt9O09wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmRlYWN0aXZhdGUoKTt0aGlzLmRyYWdQYW4mJnRoaXMuZHJhZ1Bhbi5kZXN0cm95KCk7dGhpcy5kcmFnUGFuPW51bGw7dGhpcy5waW5jaFpvb20mJih0aGlzLnBpbmNoWm9vbS5kZXN0cm95KCksZGVsZXRlIHRoaXMucGluY2hab29tKTtPcGVuTGF5ZXJzLkNvbnRyb2wucHJvdG90eXBlLmRlc3Ryb3kuYXBwbHkodGhpcywKYXJndW1lbnRzKX0sYWN0aXZhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gT3BlbkxheWVycy5Db250cm9sLnByb3RvdHlwZS5hY3RpdmF0ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk/KHRoaXMuZHJhZ1Bhbi5hY3RpdmF0ZSgpLHRoaXMuaGFuZGxlcnMuY2xpY2suYWN0aXZhdGUoKSx0aGlzLnBpbmNoWm9vbS5hY3RpdmF0ZSgpLCEwKTohMX0sZGVhY3RpdmF0ZTpmdW5jdGlvbigpe3JldHVybiBPcGVuTGF5ZXJzLkNvbnRyb2wucHJvdG90eXBlLmRlYWN0aXZhdGUuYXBwbHkodGhpcyxhcmd1bWVudHMpPyh0aGlzLmRyYWdQYW4uZGVhY3RpdmF0ZSgpLHRoaXMuaGFuZGxlcnMuY2xpY2suZGVhY3RpdmF0ZSgpLHRoaXMucGluY2hab29tLmRlYWN0aXZhdGUoKSwhMCk6ITF9LGRyYXc6ZnVuY3Rpb24oKXt2YXIgYT17Y2xpY2s6dGhpcy5kZWZhdWx0Q2xpY2ssZGJsY2xpY2s6dGhpcy5kZWZhdWx0RGJsQ2xpY2t9LGI9T3BlbkxheWVycy5VdGlsLmV4dGVuZCh7ImRvdWJsZSI6ITAsc3RvcERvdWJsZTohMCwKcGl4ZWxUb2xlcmFuY2U6Mn0sdGhpcy5jbGlja0hhbmRsZXJPcHRpb25zKTt0aGlzLmhhbmRsZXJzLmNsaWNrPW5ldyBPcGVuTGF5ZXJzLkhhbmRsZXIuQ2xpY2sodGhpcyxhLGIpO3RoaXMuZHJhZ1Bhbj1uZXcgT3BlbkxheWVycy5Db250cm9sLkRyYWdQYW4oT3BlbkxheWVycy5VdGlsLmV4dGVuZCh7bWFwOnRoaXMubWFwLGRvY3VtZW50RHJhZzp0aGlzLmRvY3VtZW50RHJhZ30sdGhpcy5kcmFnUGFuT3B0aW9ucykpO3RoaXMuZHJhZ1Bhbi5kcmF3KCk7dGhpcy5waW5jaFpvb209bmV3IE9wZW5MYXllcnMuQ29udHJvbC5QaW5jaFpvb20oT3BlbkxheWVycy5VdGlsLmV4dGVuZCh7bWFwOnRoaXMubWFwfSx0aGlzLnBpbmNoWm9vbU9wdGlvbnMpKX0sZGVmYXVsdENsaWNrOmZ1bmN0aW9uKGEpe2EubGFzdFRvdWNoZXMmJjI9PWEubGFzdFRvdWNoZXMubGVuZ3RoJiZ0aGlzLm1hcC56b29tT3V0KCl9LGRlZmF1bHREYmxDbGljazpmdW5jdGlvbihhKXt0aGlzLm1hcC56b29tVG8odGhpcy5tYXAuem9vbSsKMSxhLnh5KX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Db250cm9sLlRvdWNoTmF2aWdhdGlvbiJ9KTtPcGVuTGF5ZXJzLkNvbnNvbGUud2FybigiT3BlbkxheWVycy5SaWNvIGlzIGRlcHJlY2F0ZWQiKTtPcGVuTGF5ZXJzLlJpY289T3BlbkxheWVycy5SaWNvfHx7fTsKT3BlbkxheWVycy5SaWNvLkNvbG9yPU9wZW5MYXllcnMuQ2xhc3Moe2luaXRpYWxpemU6ZnVuY3Rpb24oYSxiLGMpe3RoaXMucmdiPXtyOmEsZzpiLGI6Y319LHNldFJlZDpmdW5jdGlvbihhKXt0aGlzLnJnYi5yPWF9LHNldEdyZWVuOmZ1bmN0aW9uKGEpe3RoaXMucmdiLmc9YX0sc2V0Qmx1ZTpmdW5jdGlvbihhKXt0aGlzLnJnYi5iPWF9LHNldEh1ZTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmFzSFNCKCk7Yi5oPWE7dGhpcy5yZ2I9T3BlbkxheWVycy5SaWNvLkNvbG9yLkhTQnRvUkdCKGIuaCxiLnMsYi5iKX0sc2V0U2F0dXJhdGlvbjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmFzSFNCKCk7Yi5zPWE7dGhpcy5yZ2I9T3BlbkxheWVycy5SaWNvLkNvbG9yLkhTQnRvUkdCKGIuaCxiLnMsYi5iKX0sc2V0QnJpZ2h0bmVzczpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmFzSFNCKCk7Yi5iPWE7dGhpcy5yZ2I9T3BlbkxheWVycy5SaWNvLkNvbG9yLkhTQnRvUkdCKGIuaCxiLnMsYi5iKX0sCmRhcmtlbjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmFzSFNCKCk7dGhpcy5yZ2I9T3BlbkxheWVycy5SaWNvLkNvbG9yLkhTQnRvUkdCKGIuaCxiLnMsTWF0aC5tYXgoYi5iLWEsMCkpfSxicmlnaHRlbjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmFzSFNCKCk7dGhpcy5yZ2I9T3BlbkxheWVycy5SaWNvLkNvbG9yLkhTQnRvUkdCKGIuaCxiLnMsTWF0aC5taW4oYi5iK2EsMSkpfSxibGVuZDpmdW5jdGlvbihhKXt0aGlzLnJnYi5yPU1hdGguZmxvb3IoKHRoaXMucmdiLnIrYS5yZ2IucikvMik7dGhpcy5yZ2IuZz1NYXRoLmZsb29yKCh0aGlzLnJnYi5nK2EucmdiLmcpLzIpO3RoaXMucmdiLmI9TWF0aC5mbG9vcigodGhpcy5yZ2IuYithLnJnYi5iKS8yKX0saXNCcmlnaHQ6ZnVuY3Rpb24oKXt0aGlzLmFzSFNCKCk7cmV0dXJuIDAuNTx0aGlzLmFzSFNCKCkuYn0saXNEYXJrOmZ1bmN0aW9uKCl7cmV0dXJuIXRoaXMuaXNCcmlnaHQoKX0sYXNSR0I6ZnVuY3Rpb24oKXtyZXR1cm4icmdiKCIrCnRoaXMucmdiLnIrIiwiK3RoaXMucmdiLmcrIiwiK3RoaXMucmdiLmIrIikifSxhc0hleDpmdW5jdGlvbigpe3JldHVybiIjIit0aGlzLnJnYi5yLnRvQ29sb3JQYXJ0KCkrdGhpcy5yZ2IuZy50b0NvbG9yUGFydCgpK3RoaXMucmdiLmIudG9Db2xvclBhcnQoKX0sYXNIU0I6ZnVuY3Rpb24oKXtyZXR1cm4gT3BlbkxheWVycy5SaWNvLkNvbG9yLlJHQnRvSFNCKHRoaXMucmdiLnIsdGhpcy5yZ2IuZyx0aGlzLnJnYi5iKX0sdG9TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hc0hleCgpfX0pOwpPcGVuTGF5ZXJzLlJpY28uQ29sb3IuY3JlYXRlRnJvbUhleD1mdW5jdGlvbihhKXtpZig0PT1hLmxlbmd0aCl7dmFyIGI9YTthPSIjIjtmb3IodmFyIGM9MTs0PmM7YysrKWErPWIuY2hhckF0KGMpK2IuY2hhckF0KGMpfTA9PWEuaW5kZXhPZigiIyIpJiYoYT1hLnN1YnN0cmluZygxKSk7Yj1hLnN1YnN0cmluZygwLDIpO2M9YS5zdWJzdHJpbmcoMiw0KTthPWEuc3Vic3RyaW5nKDQsNik7cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLlJpY28uQ29sb3IocGFyc2VJbnQoYiwxNikscGFyc2VJbnQoYywxNikscGFyc2VJbnQoYSwxNikpfTsKT3BlbkxheWVycy5SaWNvLkNvbG9yLmNyZWF0ZUNvbG9yRnJvbUJhY2tncm91bmQ9ZnVuY3Rpb24oYSl7dmFyIGI9T3BlbkxheWVycy5FbGVtZW50LmdldFN0eWxlKE9wZW5MYXllcnMuVXRpbC5nZXRFbGVtZW50KGEpLCJiYWNrZ3JvdW5kQ29sb3IiKTtyZXR1cm4idHJhbnNwYXJlbnQiPT1iJiZhLnBhcmVudE5vZGU/T3BlbkxheWVycy5SaWNvLkNvbG9yLmNyZWF0ZUNvbG9yRnJvbUJhY2tncm91bmQoYS5wYXJlbnROb2RlKTpudWxsPT1iP25ldyBPcGVuTGF5ZXJzLlJpY28uQ29sb3IoMjU1LDI1NSwyNTUpOjA9PWIuaW5kZXhPZigicmdiKCIpPyhhPWIuc3Vic3RyaW5nKDQsYi5sZW5ndGgtMSkuc3BsaXQoIiwiKSxuZXcgT3BlbkxheWVycy5SaWNvLkNvbG9yKHBhcnNlSW50KGFbMF0pLHBhcnNlSW50KGFbMV0pLHBhcnNlSW50KGFbMl0pKSk6MD09Yi5pbmRleE9mKCIjIik/T3BlbkxheWVycy5SaWNvLkNvbG9yLmNyZWF0ZUZyb21IZXgoYik6bmV3IE9wZW5MYXllcnMuUmljby5Db2xvcigyNTUsCjI1NSwyNTUpfTsKT3BlbkxheWVycy5SaWNvLkNvbG9yLkhTQnRvUkdCPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD0wLGU9MCxmPTA7aWYoMD09YilmPWU9ZD1wYXJzZUludCgyNTUqYyswLjUpO2Vsc2V7YT02KihhLU1hdGguZmxvb3IoYSkpO3ZhciBnPWEtTWF0aC5mbG9vcihhKSxoPWMqKDEtYiksaz1jKigxLWIqZyk7Yj1jKigxLWIqKDEtZykpO3N3aXRjaChwYXJzZUludChhKSl7Y2FzZSAwOmQ9MjU1KmMrMC41O2U9MjU1KmIrMC41O2Y9MjU1KmgrMC41O2JyZWFrO2Nhc2UgMTpkPTI1NSprKzAuNTtlPTI1NSpjKzAuNTtmPTI1NSpoKzAuNTticmVhaztjYXNlIDI6ZD0yNTUqaCswLjU7ZT0yNTUqYyswLjU7Zj0yNTUqYiswLjU7YnJlYWs7Y2FzZSAzOmQ9MjU1KmgrMC41O2U9MjU1KmsrMC41O2Y9MjU1KmMrMC41O2JyZWFrO2Nhc2UgNDpkPTI1NSpiKzAuNTtlPTI1NSpoKzAuNTtmPTI1NSpjKzAuNTticmVhaztjYXNlIDU6ZD0yNTUqYyswLjUsZT0yNTUqaCswLjUsZj0yNTUqayswLjV9fXJldHVybntyOnBhcnNlSW50KGQpLGc6cGFyc2VJbnQoZSksCmI6cGFyc2VJbnQoZil9fTtPcGVuTGF5ZXJzLlJpY28uQ29sb3IuUkdCdG9IU0I9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGU9YT5iP2E6YjtjPmUmJihlPWMpO3ZhciBmPWE8Yj9hOmI7YzxmJiYoZj1jKTtkPTAhPWU/KGUtZikvZTowO2lmKDA9PWQpYT0wO2Vsc2V7dmFyIGc9KGUtYSkvKGUtZiksaD0oZS1iKS8oZS1mKTtjPShlLWMpLyhlLWYpO2E9KGE9PWU/Yy1oOmI9PWU/MitnLWM6NCtoLWcpLzY7MD5hJiYoYSs9MSl9cmV0dXJue2g6YSxzOmQsYjplLzI1NX19O09wZW5MYXllcnMuU3R5bGUyPU9wZW5MYXllcnMuQ2xhc3Moe2lkOm51bGwsbmFtZTpudWxsLHRpdGxlOm51bGwsZGVzY3JpcHRpb246bnVsbCxsYXllck5hbWU6bnVsbCxpc0RlZmF1bHQ6ITEscnVsZXM6bnVsbCxpbml0aWFsaXplOmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuVXRpbC5leHRlbmQodGhpcyxhKTt0aGlzLmlkPU9wZW5MYXllcnMuVXRpbC5jcmVhdGVVbmlxdWVJRCh0aGlzLkNMQVNTX05BTUUrIl8iKX0sZGVzdHJveTpmdW5jdGlvbigpe2Zvcih2YXIgYT0wLGI9dGhpcy5ydWxlcy5sZW5ndGg7YTxiO2ErKyl0aGlzLnJ1bGVzW2FdLmRlc3Ryb3koKTtkZWxldGUgdGhpcy5ydWxlc30sY2xvbmU6ZnVuY3Rpb24oKXt2YXIgYT1PcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHt9LHRoaXMpO2lmKHRoaXMucnVsZXMpe2EucnVsZXM9W107Zm9yKHZhciBiPTAsYz10aGlzLnJ1bGVzLmxlbmd0aDtiPGM7KytiKWEucnVsZXMucHVzaCh0aGlzLnJ1bGVzW2JdLmNsb25lKCkpfXJldHVybiBuZXcgT3BlbkxheWVycy5TdHlsZTIoYSl9LApDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLlN0eWxlMiJ9KTtPcGVuTGF5ZXJzLkZvcm1hdC5XRlM9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkZvcm1hdC5HTUwse2xheWVyOm51bGwsd2ZzbnM6Imh0dHA6Ly93d3cub3Blbmdpcy5uZXQvd2ZzIixvZ2NuczoiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9vZ2MiLGluaXRpYWxpemU6ZnVuY3Rpb24oYSxiKXtPcGVuTGF5ZXJzLkZvcm1hdC5HTUwucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxbYV0pO3RoaXMubGF5ZXI9Yjt0aGlzLmxheWVyLmZlYXR1cmVOUyYmKHRoaXMuZmVhdHVyZU5TPXRoaXMubGF5ZXIuZmVhdHVyZU5TKTt0aGlzLmxheWVyLm9wdGlvbnMuZ2VvbWV0cnlfY29sdW1uJiYodGhpcy5nZW9tZXRyeU5hbWU9dGhpcy5sYXllci5vcHRpb25zLmdlb21ldHJ5X2NvbHVtbik7dGhpcy5sYXllci5vcHRpb25zLnR5cGVuYW1lJiYodGhpcy5mZWF0dXJlTmFtZT10aGlzLmxheWVyLm9wdGlvbnMudHlwZW5hbWUpfSx3cml0ZTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROUyh0aGlzLndmc25zLAoid2ZzOlRyYW5zYWN0aW9uIik7Yi5zZXRBdHRyaWJ1dGUoInZlcnNpb24iLCIxLjAuMCIpO2Iuc2V0QXR0cmlidXRlKCJzZXJ2aWNlIiwiV0ZTIik7Zm9yKHZhciBjPTA7YzxhLmxlbmd0aDtjKyspc3dpdGNoKGFbY10uc3RhdGUpe2Nhc2UgT3BlbkxheWVycy5TdGF0ZS5JTlNFUlQ6Yi5hcHBlbmRDaGlsZCh0aGlzLmluc2VydChhW2NdKSk7YnJlYWs7Y2FzZSBPcGVuTGF5ZXJzLlN0YXRlLlVQREFURTpiLmFwcGVuZENoaWxkKHRoaXMudXBkYXRlKGFbY10pKTticmVhaztjYXNlIE9wZW5MYXllcnMuU3RhdGUuREVMRVRFOmIuYXBwZW5kQ2hpbGQodGhpcy5yZW1vdmUoYVtjXSkpfXJldHVybiBPcGVuTGF5ZXJzLkZvcm1hdC5YTUwucHJvdG90eXBlLndyaXRlLmFwcGx5KHRoaXMsW2JdKX0sY3JlYXRlRmVhdHVyZVhNTDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmJ1aWxkR2VvbWV0cnlOb2RlKGEuZ2VvbWV0cnkpLGM9dGhpcy5jcmVhdGVFbGVtZW50TlModGhpcy5mZWF0dXJlTlMsImZlYXR1cmU6IisKdGhpcy5nZW9tZXRyeU5hbWUpO2MuYXBwZW5kQ2hpbGQoYik7Yj10aGlzLmNyZWF0ZUVsZW1lbnROUyh0aGlzLmZlYXR1cmVOUywiZmVhdHVyZToiK3RoaXMuZmVhdHVyZU5hbWUpO2IuYXBwZW5kQ2hpbGQoYyk7Zm9yKHZhciBkIGluIGEuYXR0cmlidXRlcyl7dmFyIGM9dGhpcy5jcmVhdGVUZXh0Tm9kZShhLmF0dHJpYnV0ZXNbZF0pLGU9ZDstMSE9ZC5zZWFyY2goIjoiKSYmKGU9ZC5zcGxpdCgiOiIpWzFdKTtlPXRoaXMuY3JlYXRlRWxlbWVudE5TKHRoaXMuZmVhdHVyZU5TLCJmZWF0dXJlOiIrZSk7ZS5hcHBlbmRDaGlsZChjKTtiLmFwcGVuZENoaWxkKGUpfXJldHVybiBifSxpbnNlcnQ6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlModGhpcy53ZnNucywid2ZzOkluc2VydCIpO2IuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVGZWF0dXJlWE1MKGEpKTtyZXR1cm4gYn0sdXBkYXRlOmZ1bmN0aW9uKGEpe2EuZmlkfHxPcGVuTGF5ZXJzLkNvbnNvbGUudXNlckVycm9yKE9wZW5MYXllcnMuaTE4bigibm9GSUQiKSk7CnZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TKHRoaXMud2ZzbnMsIndmczpVcGRhdGUiKTtiLnNldEF0dHJpYnV0ZSgidHlwZU5hbWUiLHRoaXMuZmVhdHVyZVByZWZpeCsiOiIrdGhpcy5mZWF0dXJlTmFtZSk7Yi5zZXRBdHRyaWJ1dGUoInhtbG5zOiIrdGhpcy5mZWF0dXJlUHJlZml4LHRoaXMuZmVhdHVyZU5TKTt2YXIgYz10aGlzLmNyZWF0ZUVsZW1lbnROUyh0aGlzLndmc25zLCJ3ZnM6UHJvcGVydHkiKSxkPXRoaXMuY3JlYXRlRWxlbWVudE5TKHRoaXMud2ZzbnMsIndmczpOYW1lIiksZT10aGlzLmNyZWF0ZVRleHROb2RlKHRoaXMuZ2VvbWV0cnlOYW1lKTtkLmFwcGVuZENoaWxkKGUpO2MuYXBwZW5kQ2hpbGQoZCk7ZD10aGlzLmNyZWF0ZUVsZW1lbnROUyh0aGlzLndmc25zLCJ3ZnM6VmFsdWUiKTtlPXRoaXMuYnVpbGRHZW9tZXRyeU5vZGUoYS5nZW9tZXRyeSk7YS5sYXllciYmZS5zZXRBdHRyaWJ1dGUoInNyc05hbWUiLGEubGF5ZXIucHJvamVjdGlvbi5nZXRDb2RlKCkpOwpkLmFwcGVuZENoaWxkKGUpO2MuYXBwZW5kQ2hpbGQoZCk7Yi5hcHBlbmRDaGlsZChjKTtmb3IodmFyIGYgaW4gYS5hdHRyaWJ1dGVzKWM9dGhpcy5jcmVhdGVFbGVtZW50TlModGhpcy53ZnNucywid2ZzOlByb3BlcnR5IiksZD10aGlzLmNyZWF0ZUVsZW1lbnROUyh0aGlzLndmc25zLCJ3ZnM6TmFtZSIpLGQuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVUZXh0Tm9kZShmKSksYy5hcHBlbmRDaGlsZChkKSxkPXRoaXMuY3JlYXRlRWxlbWVudE5TKHRoaXMud2ZzbnMsIndmczpWYWx1ZSIpLGQuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVUZXh0Tm9kZShhLmF0dHJpYnV0ZXNbZl0pKSxjLmFwcGVuZENoaWxkKGQpLGIuYXBwZW5kQ2hpbGQoYyk7Yz10aGlzLmNyZWF0ZUVsZW1lbnROUyh0aGlzLm9nY25zLCJvZ2M6RmlsdGVyIik7Zj10aGlzLmNyZWF0ZUVsZW1lbnROUyh0aGlzLm9nY25zLCJvZ2M6RmVhdHVyZUlkIik7Zi5zZXRBdHRyaWJ1dGUoImZpZCIsYS5maWQpO2MuYXBwZW5kQ2hpbGQoZik7CmIuYXBwZW5kQ2hpbGQoYyk7cmV0dXJuIGJ9LHJlbW92ZTpmdW5jdGlvbihhKXtpZighYS5maWQpcmV0dXJuIE9wZW5MYXllcnMuQ29uc29sZS51c2VyRXJyb3IoT3BlbkxheWVycy5pMThuKCJub0ZJRCIpKSwhMTt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROUyh0aGlzLndmc25zLCJ3ZnM6RGVsZXRlIik7Yi5zZXRBdHRyaWJ1dGUoInR5cGVOYW1lIix0aGlzLmZlYXR1cmVQcmVmaXgrIjoiK3RoaXMuZmVhdHVyZU5hbWUpO2Iuc2V0QXR0cmlidXRlKCJ4bWxuczoiK3RoaXMuZmVhdHVyZVByZWZpeCx0aGlzLmZlYXR1cmVOUyk7dmFyIGM9dGhpcy5jcmVhdGVFbGVtZW50TlModGhpcy5vZ2Nucywib2djOkZpbHRlciIpLGQ9dGhpcy5jcmVhdGVFbGVtZW50TlModGhpcy5vZ2Nucywib2djOkZlYXR1cmVJZCIpO2Quc2V0QXR0cmlidXRlKCJmaWQiLGEuZmlkKTtjLmFwcGVuZENoaWxkKGQpO2IuYXBwZW5kQ2hpbGQoYyk7cmV0dXJuIGJ9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmxheWVyPQpudWxsfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkZvcm1hdC5XRlMifSk7T3BlbkxheWVycy5Gb3JtYXQuU0xELnYxXzBfMF9HZW9TZXJ2ZXI9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkZvcm1hdC5TTEQudjFfMF8wLHt2ZXJzaW9uOiIxLjAuMCIscHJvZmlsZToiR2VvU2VydmVyIixyZWFkZXJzOk9wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKHtzbGQ6T3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoe1ByaW9yaXR5OmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5yZWFkZXJzLm9nYy5fZXhwcmVzc2lvbi5jYWxsKHRoaXMsYSk7YyYmKGIucHJpb3JpdHk9Yyl9LFZlbmRvck9wdGlvbjpmdW5jdGlvbihhLGIpe2IudmVuZG9yT3B0aW9uc3x8KGIudmVuZG9yT3B0aW9ucz17fSk7Yi52ZW5kb3JPcHRpb25zW2EuZ2V0QXR0cmlidXRlKCJuYW1lIildPXRoaXMuZ2V0Q2hpbGRWYWx1ZShhKX0sVGV4dFN5bWJvbGl6ZXI6ZnVuY3Rpb24oYSxiKXtPcGVuTGF5ZXJzLkZvcm1hdC5TTEQudjFfMF8wLnByb3RvdHlwZS5yZWFkZXJzLnNsZC5UZXh0U3ltYm9saXplci5hcHBseSh0aGlzLAphcmd1bWVudHMpO3ZhciBjPXRoaXMubXVsdGlwbGVTeW1ib2xpemVycz9iLnN5bWJvbGl6ZXJzW2Iuc3ltYm9saXplcnMubGVuZ3RoLTFdOmIuc3ltYm9saXplci5UZXh0O3ZvaWQgMD09PWMuZ3JhcGhpYyYmKGMuZ3JhcGhpYz0hMSl9fSxPcGVuTGF5ZXJzLkZvcm1hdC5TTEQudjFfMF8wLnByb3RvdHlwZS5yZWFkZXJzLnNsZCl9LE9wZW5MYXllcnMuRm9ybWF0LlNMRC52MV8wXzAucHJvdG90eXBlLnJlYWRlcnMpLHdyaXRlcnM6T3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoe3NsZDpPcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyh7UHJpb3JpdHk6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMud3JpdGVycy5zbGQuX09HQ0V4cHJlc3Npb24uY2FsbCh0aGlzLCJzbGQ6UHJpb3JpdHkiLGEpfSxWZW5kb3JPcHRpb246ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygic2xkOlZlbmRvck9wdGlvbiIse2F0dHJpYnV0ZXM6e25hbWU6YS5uYW1lfSwKdmFsdWU6YS52YWx1ZX0pfSxUZXh0U3ltYm9saXplcjpmdW5jdGlvbihhKXt2YXIgYj1PcGVuTGF5ZXJzLkZvcm1hdC5TTEQudjFfMF8wLnByb3RvdHlwZS53cml0ZXJzLnNsZC5UZXh0U3ltYm9saXplci5hcHBseSh0aGlzLGFyZ3VtZW50cyk7ITEhPT1hLmdyYXBoaWMmJihhLmV4dGVybmFsR3JhcGhpY3x8YS5ncmFwaGljTmFtZSkmJnRoaXMud3JpdGVOb2RlKCJHcmFwaGljIixhLGIpOyJwcmlvcml0eSJpbiBhJiZ0aGlzLndyaXRlTm9kZSgiUHJpb3JpdHkiLGEucHJpb3JpdHksYik7cmV0dXJuIHRoaXMuYWRkVmVuZG9yT3B0aW9ucyhiLGEpfSxQb2ludFN5bWJvbGl6ZXI6ZnVuY3Rpb24oYSl7dmFyIGI9T3BlbkxheWVycy5Gb3JtYXQuU0xELnYxXzBfMC5wcm90b3R5cGUud3JpdGVycy5zbGQuUG9pbnRTeW1ib2xpemVyLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtyZXR1cm4gdGhpcy5hZGRWZW5kb3JPcHRpb25zKGIsYSl9LExpbmVTeW1ib2xpemVyOmZ1bmN0aW9uKGEpe3ZhciBiPQpPcGVuTGF5ZXJzLkZvcm1hdC5TTEQudjFfMF8wLnByb3RvdHlwZS53cml0ZXJzLnNsZC5MaW5lU3ltYm9saXplci5hcHBseSh0aGlzLGFyZ3VtZW50cyk7cmV0dXJuIHRoaXMuYWRkVmVuZG9yT3B0aW9ucyhiLGEpfSxQb2x5Z29uU3ltYm9saXplcjpmdW5jdGlvbihhKXt2YXIgYj1PcGVuTGF5ZXJzLkZvcm1hdC5TTEQudjFfMF8wLnByb3RvdHlwZS53cml0ZXJzLnNsZC5Qb2x5Z29uU3ltYm9saXplci5hcHBseSh0aGlzLGFyZ3VtZW50cyk7cmV0dXJuIHRoaXMuYWRkVmVuZG9yT3B0aW9ucyhiLGEpfX0sT3BlbkxheWVycy5Gb3JtYXQuU0xELnYxXzBfMC5wcm90b3R5cGUud3JpdGVycy5zbGQpfSxPcGVuTGF5ZXJzLkZvcm1hdC5TTEQudjFfMF8wLnByb3RvdHlwZS53cml0ZXJzKSxhZGRWZW5kb3JPcHRpb25zOmZ1bmN0aW9uKGEsYil7aWYoYi52ZW5kb3JPcHRpb25zKWZvcih2YXIgYyBpbiBiLnZlbmRvck9wdGlvbnMpdGhpcy53cml0ZU5vZGUoIlZlbmRvck9wdGlvbiIse25hbWU6YywKdmFsdWU6Yi52ZW5kb3JPcHRpb25zW2NdfSxhKTtyZXR1cm4gYX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Gb3JtYXQuU0xELnYxXzBfMF9HZW9TZXJ2ZXIifSk7T3BlbkxheWVycy5MYXllci5Cb3hlcz1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuTGF5ZXIuTWFya2Vycyx7ZHJhd01hcmtlcjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLm1hcC5nZXRMYXllclB4RnJvbUxvbkxhdCh7bG9uOmEuYm91bmRzLmxlZnQsbGF0OmEuYm91bmRzLnRvcH0pLGM9dGhpcy5tYXAuZ2V0TGF5ZXJQeEZyb21Mb25MYXQoe2xvbjphLmJvdW5kcy5yaWdodCxsYXQ6YS5ib3VuZHMuYm90dG9tfSk7bnVsbD09Y3x8bnVsbD09Yj9hLmRpc3BsYXkoITEpOihiPWEuZHJhdyhiLHt3Ok1hdGgubWF4KDEsYy54LWIueCksaDpNYXRoLm1heCgxLGMueS1iLnkpfSksYS5kcmF3bnx8KHRoaXMuZGl2LmFwcGVuZENoaWxkKGIpLGEuZHJhd249ITApKX0scmVtb3ZlTWFya2VyOmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuVXRpbC5yZW1vdmVJdGVtKHRoaXMubWFya2VycyxhKTtudWxsIT1hLmRpdiYmYS5kaXYucGFyZW50Tm9kZT09dGhpcy5kaXYmJnRoaXMuZGl2LnJlbW92ZUNoaWxkKGEuZGl2KX0sCkNMQVNTX05BTUU6Ik9wZW5MYXllcnMuTGF5ZXIuQm94ZXMifSk7T3BlbkxheWVycy5Gb3JtYXQuV0ZTQ2FwYWJpbGl0aWVzLnYxXzBfMD1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuRm9ybWF0LldGU0NhcGFiaWxpdGllcy52MSx7cmVhZGVyczp7d2ZzOk9wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKHtTZXJ2aWNlOmZ1bmN0aW9uKGEsYil7Yi5zZXJ2aWNlPXt9O3RoaXMucmVhZENoaWxkTm9kZXMoYSxiLnNlcnZpY2UpfSxGZWVzOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5nZXRDaGlsZFZhbHVlKGEpO2MmJiJub25lIiE9Yy50b0xvd2VyQ2FzZSgpJiYoYi5mZWVzPWMpfSxBY2Nlc3NDb25zdHJhaW50czpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuZ2V0Q2hpbGRWYWx1ZShhKTtjJiYibm9uZSIhPWMudG9Mb3dlckNhc2UoKSYmKGIuYWNjZXNzQ29uc3RyYWludHM9Yyl9LE9ubGluZVJlc291cmNlOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5nZXRDaGlsZFZhbHVlKGEpO2MmJiJub25lIiE9Yy50b0xvd2VyQ2FzZSgpJiYoYi5vbmxpbmVSZXNvdXJjZT0KYyl9LEtleXdvcmRzOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5nZXRDaGlsZFZhbHVlKGEpO2MmJiJub25lIiE9Yy50b0xvd2VyQ2FzZSgpJiYoYi5rZXl3b3Jkcz1jLnNwbGl0KCIsICIpKX0sQ2FwYWJpbGl0eTpmdW5jdGlvbihhLGIpe2IuY2FwYWJpbGl0eT17fTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYi5jYXBhYmlsaXR5KX0sUmVxdWVzdDpmdW5jdGlvbihhLGIpe2IucmVxdWVzdD17fTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYi5yZXF1ZXN0KX0sR2V0RmVhdHVyZTpmdW5jdGlvbihhLGIpe2IuZ2V0ZmVhdHVyZT17aHJlZjp7fSxmb3JtYXRzOltdfTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYi5nZXRmZWF0dXJlKX0sUmVzdWx0Rm9ybWF0OmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPWEuY2hpbGROb2RlcyxkLGU9MDtlPGMubGVuZ3RoO2UrKylkPWNbZV0sMT09ZC5ub2RlVHlwZSYmYi5mb3JtYXRzLnB1c2goZC5ub2RlTmFtZSl9LERDUFR5cGU6ZnVuY3Rpb24oYSxiKXt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsCmIpfSxIVFRQOmZ1bmN0aW9uKGEsYil7dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGIuaHJlZil9LEdldDpmdW5jdGlvbihhLGIpe2IuZ2V0PWEuZ2V0QXR0cmlidXRlKCJvbmxpbmVSZXNvdXJjZSIpfSxQb3N0OmZ1bmN0aW9uKGEsYil7Yi5wb3N0PWEuZ2V0QXR0cmlidXRlKCJvbmxpbmVSZXNvdXJjZSIpfSxTUlM6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmdldENoaWxkVmFsdWUoYSk7YyYmKGIuc3JzPWMpfX0sT3BlbkxheWVycy5Gb3JtYXQuV0ZTQ2FwYWJpbGl0aWVzLnYxLnByb3RvdHlwZS5yZWFkZXJzLndmcyl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuRm9ybWF0LldGU0NhcGFiaWxpdGllcy52MV8wXzAifSk7T3BlbkxheWVycy5Gb3JtYXQuV01TQ2FwYWJpbGl0aWVzLnYxXzM9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkZvcm1hdC5XTVNDYXBhYmlsaXRpZXMudjEse3JlYWRlcnM6e3dtczpPcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyh7V01TX0NhcGFiaWxpdGllczpmdW5jdGlvbihhLGIpe3RoaXMucmVhZENoaWxkTm9kZXMoYSxiKX0sTGF5ZXJMaW1pdDpmdW5jdGlvbihhLGIpe2IubGF5ZXJMaW1pdD1wYXJzZUludCh0aGlzLmdldENoaWxkVmFsdWUoYSkpfSxNYXhXaWR0aDpmdW5jdGlvbihhLGIpe2IubWF4V2lkdGg9cGFyc2VJbnQodGhpcy5nZXRDaGlsZFZhbHVlKGEpKX0sTWF4SGVpZ2h0OmZ1bmN0aW9uKGEsYil7Yi5tYXhIZWlnaHQ9cGFyc2VJbnQodGhpcy5nZXRDaGlsZFZhbHVlKGEpKX0sQm91bmRpbmdCb3g6ZnVuY3Rpb24oYSxiKXt2YXIgYz1PcGVuTGF5ZXJzLkZvcm1hdC5XTVNDYXBhYmlsaXRpZXMudjEucHJvdG90eXBlLnJlYWRlcnMud21zLkJvdW5kaW5nQm94LmFwcGx5KHRoaXMsClthLGJdKTtjLnNycz1hLmdldEF0dHJpYnV0ZSgiQ1JTIik7Yi5iYm94W2Muc3JzXT1jfSxDUlM6ZnVuY3Rpb24oYSxiKXt0aGlzLnJlYWRlcnMud21zLlNSUy5hcHBseSh0aGlzLFthLGJdKX0sRVhfR2VvZ3JhcGhpY0JvdW5kaW5nQm94OmZ1bmN0aW9uKGEsYil7Yi5sbGJib3g9W107dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGIubGxiYm94KX0sd2VzdEJvdW5kTG9uZ2l0dWRlOmZ1bmN0aW9uKGEsYil7YlswXT10aGlzLmdldENoaWxkVmFsdWUoYSl9LGVhc3RCb3VuZExvbmdpdHVkZTpmdW5jdGlvbihhLGIpe2JbMl09dGhpcy5nZXRDaGlsZFZhbHVlKGEpfSxzb3V0aEJvdW5kTGF0aXR1ZGU6ZnVuY3Rpb24oYSxiKXtiWzFdPXRoaXMuZ2V0Q2hpbGRWYWx1ZShhKX0sbm9ydGhCb3VuZExhdGl0dWRlOmZ1bmN0aW9uKGEsYil7YlszXT10aGlzLmdldENoaWxkVmFsdWUoYSl9LE1pblNjYWxlRGVub21pbmF0b3I6ZnVuY3Rpb24oYSxiKXtiLm1heFNjYWxlPXBhcnNlRmxvYXQodGhpcy5nZXRDaGlsZFZhbHVlKGEpKS50b1ByZWNpc2lvbigxNil9LApNYXhTY2FsZURlbm9taW5hdG9yOmZ1bmN0aW9uKGEsYil7Yi5taW5TY2FsZT1wYXJzZUZsb2F0KHRoaXMuZ2V0Q2hpbGRWYWx1ZShhKSkudG9QcmVjaXNpb24oMTYpfSxEaW1lbnNpb246ZnVuY3Rpb24oYSxiKXt2YXIgYz17bmFtZTphLmdldEF0dHJpYnV0ZSgibmFtZSIpLnRvTG93ZXJDYXNlKCksdW5pdHM6YS5nZXRBdHRyaWJ1dGUoInVuaXRzIiksdW5pdHN5bWJvbDphLmdldEF0dHJpYnV0ZSgidW5pdFN5bWJvbCIpLG5lYXJlc3RWYWw6IjEiPT09YS5nZXRBdHRyaWJ1dGUoIm5lYXJlc3RWYWx1ZSIpLG11bHRpcGxlVmFsOiIxIj09PWEuZ2V0QXR0cmlidXRlKCJtdWx0aXBsZVZhbHVlcyIpLCJkZWZhdWx0IjphLmdldEF0dHJpYnV0ZSgiZGVmYXVsdCIpfHwiIixjdXJyZW50OiIxIj09PWEuZ2V0QXR0cmlidXRlKCJjdXJyZW50IiksdmFsdWVzOnRoaXMuZ2V0Q2hpbGRWYWx1ZShhKS5zcGxpdCgiLCIpfTtiLmRpbWVuc2lvbnNbYy5uYW1lXT1jfSxLZXl3b3JkOmZ1bmN0aW9uKGEsCmIpe3ZhciBjPXt2YWx1ZTp0aGlzLmdldENoaWxkVmFsdWUoYSksdm9jYWJ1bGFyeTphLmdldEF0dHJpYnV0ZSgidm9jYWJ1bGFyeSIpfTtiLmtleXdvcmRzJiZiLmtleXdvcmRzLnB1c2goYyl9fSxPcGVuTGF5ZXJzLkZvcm1hdC5XTVNDYXBhYmlsaXRpZXMudjEucHJvdG90eXBlLnJlYWRlcnMud21zKSxzbGQ6e1VzZXJEZWZpbmVkU3ltYm9saXphdGlvbjpmdW5jdGlvbihhLGIpe3RoaXMucmVhZGVycy53bXMuVXNlckRlZmluZWRTeW1ib2xpemF0aW9uLmFwcGx5KHRoaXMsW2EsYl0pO2IudXNlclN5bWJvbHMuaW5saW5lRmVhdHVyZT0xPT1wYXJzZUludChhLmdldEF0dHJpYnV0ZSgiSW5saW5lRmVhdHVyZSIpKTtiLnVzZXJTeW1ib2xzLnJlbW90ZVdDUz0xPT1wYXJzZUludChhLmdldEF0dHJpYnV0ZSgiUmVtb3RlV0NTIikpfSxEZXNjcmliZUxheWVyOmZ1bmN0aW9uKGEsYil7dGhpcy5yZWFkZXJzLndtcy5EZXNjcmliZUxheWVyLmFwcGx5KHRoaXMsW2EsYl0pfSxHZXRMZWdlbmRHcmFwaGljOmZ1bmN0aW9uKGEsCmIpe3RoaXMucmVhZGVycy53bXMuR2V0TGVnZW5kR3JhcGhpYy5hcHBseSh0aGlzLFthLGJdKX19fSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkZvcm1hdC5XTVNDYXBhYmlsaXRpZXMudjFfMyJ9KTtPcGVuTGF5ZXJzLkxheWVyLlpvb21pZnk9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkxheWVyLkdyaWQse3NpemU6bnVsbCxpc0Jhc2VMYXllcjohMCxzdGFuZGFyZFRpbGVTaXplOjI1Nix0aWxlT3JpZ2luQ29ybmVyOiJ0bCIsbnVtYmVyT2ZUaWVyczowLHRpbGVDb3VudFVwVG9UaWVyOm51bGwsdGllclNpemVJblRpbGVzOm51bGwsdGllckltYWdlU2l6ZTpudWxsLGluaXRpYWxpemU6ZnVuY3Rpb24oYSxiLGMsZCl7dGhpcy5pbml0aWFsaXplWm9vbWlmeShjKTtPcGVuTGF5ZXJzLkxheWVyLkdyaWQucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxbYSxiLGMse30sZF0pfSxpbml0aWFsaXplWm9vbWlmeTpmdW5jdGlvbihhKXt2YXIgYj1hLmNsb25lKCk7dGhpcy5zaXplPWEuY2xvbmUoKTthPW5ldyBPcGVuTGF5ZXJzLlNpemUoTWF0aC5jZWlsKGIudy90aGlzLnN0YW5kYXJkVGlsZVNpemUpLE1hdGguY2VpbChiLmgvdGhpcy5zdGFuZGFyZFRpbGVTaXplKSk7dGhpcy50aWVyU2l6ZUluVGlsZXM9ClthXTtmb3IodGhpcy50aWVySW1hZ2VTaXplPVtiXTtiLnc+dGhpcy5zdGFuZGFyZFRpbGVTaXplfHxiLmg+dGhpcy5zdGFuZGFyZFRpbGVTaXplOyliPW5ldyBPcGVuTGF5ZXJzLlNpemUoTWF0aC5mbG9vcihiLncvMiksTWF0aC5mbG9vcihiLmgvMikpLGE9bmV3IE9wZW5MYXllcnMuU2l6ZShNYXRoLmNlaWwoYi53L3RoaXMuc3RhbmRhcmRUaWxlU2l6ZSksTWF0aC5jZWlsKGIuaC90aGlzLnN0YW5kYXJkVGlsZVNpemUpKSx0aGlzLnRpZXJTaXplSW5UaWxlcy5wdXNoKGEpLHRoaXMudGllckltYWdlU2l6ZS5wdXNoKGIpO3RoaXMudGllclNpemVJblRpbGVzLnJldmVyc2UoKTt0aGlzLnRpZXJJbWFnZVNpemUucmV2ZXJzZSgpO3RoaXMubnVtYmVyT2ZUaWVycz10aGlzLnRpZXJTaXplSW5UaWxlcy5sZW5ndGg7Yj1bMV07dGhpcy50aWxlQ291bnRVcFRvVGllcj1bMF07Zm9yKGE9MTthPHRoaXMubnVtYmVyT2ZUaWVyczthKyspYi51bnNoaWZ0KE1hdGgucG93KDIsYSkpLHRoaXMudGlsZUNvdW50VXBUb1RpZXIucHVzaCh0aGlzLnRpZXJTaXplSW5UaWxlc1thLQoxXS53KnRoaXMudGllclNpemVJblRpbGVzW2EtMV0uaCt0aGlzLnRpbGVDb3VudFVwVG9UaWVyW2EtMV0pO3RoaXMuc2VydmVyUmVzb2x1dGlvbnN8fCh0aGlzLnNlcnZlclJlc29sdXRpb25zPWIpfSxkZXN0cm95OmZ1bmN0aW9uKCl7T3BlbkxheWVycy5MYXllci5HcmlkLnByb3RvdHlwZS5kZXN0cm95LmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLnRpbGVDb3VudFVwVG9UaWVyLmxlbmd0aD0wO3RoaXMudGllclNpemVJblRpbGVzLmxlbmd0aD0wO3RoaXMudGllckltYWdlU2l6ZS5sZW5ndGg9MH0sY2xvbmU6ZnVuY3Rpb24oYSl7bnVsbD09YSYmKGE9bmV3IE9wZW5MYXllcnMuTGF5ZXIuWm9vbWlmeSh0aGlzLm5hbWUsdGhpcy51cmwsdGhpcy5zaXplLHRoaXMub3B0aW9ucykpO3JldHVybiBhPU9wZW5MYXllcnMuTGF5ZXIuR3JpZC5wcm90b3R5cGUuY2xvbmUuYXBwbHkodGhpcyxbYV0pfSxnZXRVUkw6ZnVuY3Rpb24oYSl7YT10aGlzLmFkanVzdEJvdW5kcyhhKTt2YXIgYj0KdGhpcy5nZXRTZXJ2ZXJSZXNvbHV0aW9uKCksYz1NYXRoLnJvdW5kKChhLmxlZnQtdGhpcy50aWxlT3JpZ2luLmxvbikvKGIqdGhpcy50aWxlU2l6ZS53KSk7YT1NYXRoLnJvdW5kKCh0aGlzLnRpbGVPcmlnaW4ubGF0LWEudG9wKS8oYip0aGlzLnRpbGVTaXplLmgpKTtiPXRoaXMuZ2V0Wm9vbUZvclJlc29sdXRpb24oYik7Yz0iVGlsZUdyb3VwIitNYXRoLmZsb29yKChjK2EqdGhpcy50aWVyU2l6ZUluVGlsZXNbYl0udyt0aGlzLnRpbGVDb3VudFVwVG9UaWVyW2JdKS8yNTYpKyIvIitiKyItIitjKyItIithKyIuanBnIjtiPXRoaXMudXJsO09wZW5MYXllcnMuVXRpbC5pc0FycmF5KGIpJiYoYj10aGlzLnNlbGVjdFVybChjLGIpKTtyZXR1cm4gYitjfSxnZXRJbWFnZVNpemU6ZnVuY3Rpb24oKXtpZigwPGFyZ3VtZW50cy5sZW5ndGgpe3ZhciBhPXRoaXMuYWRqdXN0Qm91bmRzKGFyZ3VtZW50c1swXSksYj10aGlzLmdldFNlcnZlclJlc29sdXRpb24oKSxjPU1hdGgucm91bmQoKGEubGVmdC0KdGhpcy50aWxlT3JpZ2luLmxvbikvKGIqdGhpcy50aWxlU2l6ZS53KSksYT1NYXRoLnJvdW5kKCh0aGlzLnRpbGVPcmlnaW4ubGF0LWEudG9wKS8oYip0aGlzLnRpbGVTaXplLmgpKSxiPXRoaXMuZ2V0Wm9vbUZvclJlc29sdXRpb24oYiksZD10aGlzLnN0YW5kYXJkVGlsZVNpemUsZT10aGlzLnN0YW5kYXJkVGlsZVNpemU7Yz09dGhpcy50aWVyU2l6ZUluVGlsZXNbYl0udy0xJiYoZD10aGlzLnRpZXJJbWFnZVNpemVbYl0udyV0aGlzLnN0YW5kYXJkVGlsZVNpemUpO2E9PXRoaXMudGllclNpemVJblRpbGVzW2JdLmgtMSYmKGU9dGhpcy50aWVySW1hZ2VTaXplW2JdLmgldGhpcy5zdGFuZGFyZFRpbGVTaXplKTtyZXR1cm4gbmV3IE9wZW5MYXllcnMuU2l6ZShkLGUpfXJldHVybiB0aGlzLnRpbGVTaXplfSxzZXRNYXA6ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5MYXllci5HcmlkLnByb3RvdHlwZS5zZXRNYXAuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMudGlsZU9yaWdpbj1uZXcgT3BlbkxheWVycy5Mb25MYXQodGhpcy5tYXAubWF4RXh0ZW50LmxlZnQsCnRoaXMubWFwLm1heEV4dGVudC50b3ApfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkxheWVyLlpvb21pZnkifSk7T3BlbkxheWVycy5MYXllci5NYXBTZXJ2ZXI9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkxheWVyLkdyaWQse0RFRkFVTFRfUEFSQU1TOnttb2RlOiJtYXAiLG1hcF9pbWFnZXR5cGU6InBuZyJ9LGluaXRpYWxpemU6ZnVuY3Rpb24oYSxiLGMsZCl7T3BlbkxheWVycy5MYXllci5HcmlkLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLnBhcmFtcz1PcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyh0aGlzLnBhcmFtcyx0aGlzLkRFRkFVTFRfUEFSQU1TKTtpZihudWxsPT1kfHxudWxsPT1kLmlzQmFzZUxheWVyKXRoaXMuaXNCYXNlTGF5ZXI9InRydWUiIT10aGlzLnBhcmFtcy50cmFuc3BhcmVudCYmITAhPXRoaXMucGFyYW1zLnRyYW5zcGFyZW50fSxjbG9uZTpmdW5jdGlvbihhKXtudWxsPT1hJiYoYT1uZXcgT3BlbkxheWVycy5MYXllci5NYXBTZXJ2ZXIodGhpcy5uYW1lLHRoaXMudXJsLHRoaXMucGFyYW1zLHRoaXMuZ2V0T3B0aW9ucygpKSk7CnJldHVybiBhPU9wZW5MYXllcnMuTGF5ZXIuR3JpZC5wcm90b3R5cGUuY2xvbmUuYXBwbHkodGhpcyxbYV0pfSxnZXRVUkw6ZnVuY3Rpb24oYSl7YT10aGlzLmFkanVzdEJvdW5kcyhhKTthPVthLmxlZnQsYS5ib3R0b20sYS5yaWdodCxhLnRvcF07dmFyIGI9dGhpcy5nZXRJbWFnZVNpemUoKTtyZXR1cm4gdGhpcy5nZXRGdWxsUmVxdWVzdFN0cmluZyh7bWFwZXh0OmEsaW1nZXh0OmEsbWFwX3NpemU6W2IudyxiLmhdLGltZ3g6Yi53LzIsaW1neTpiLmgvMixpbWd4eTpbYi53LGIuaF19KX0sZ2V0RnVsbFJlcXVlc3RTdHJpbmc6ZnVuY3Rpb24oYSxiKXt2YXIgYz1udWxsPT1iP3RoaXMudXJsOmIsZD1PcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHt9LHRoaXMucGFyYW1zKSxkPU9wZW5MYXllcnMuVXRpbC5leHRlbmQoZCxhKSxlPU9wZW5MYXllcnMuVXRpbC5nZXRQYXJhbWV0ZXJTdHJpbmcoZCk7T3BlbkxheWVycy5VdGlsLmlzQXJyYXkoYykmJihjPXRoaXMuc2VsZWN0VXJsKGUsYykpOwp2YXIgZT1PcGVuTGF5ZXJzLlV0aWwudXBwZXJDYXNlT2JqZWN0KE9wZW5MYXllcnMuVXRpbC5nZXRQYXJhbWV0ZXJzKGMpKSxmO2ZvcihmIGluIGQpZi50b1VwcGVyQ2FzZSgpaW4gZSYmZGVsZXRlIGRbZl07ZT1PcGVuTGF5ZXJzLlV0aWwuZ2V0UGFyYW1ldGVyU3RyaW5nKGQpO2Q9YztlPWUucmVwbGFjZSgvLC9nLCIrIik7IiIhPWUmJihmPWMuY2hhckF0KGMubGVuZ3RoLTEpLGQ9IiYiPT1mfHwiPyI9PWY/ZCtlOi0xPT1jLmluZGV4T2YoIj8iKT9kKygiPyIrZSk6ZCsoIiYiK2UpKTtyZXR1cm4gZH0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5MYXllci5NYXBTZXJ2ZXIifSk7T3BlbkxheWVycy5SZW5kZXJlci5WTUw9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLlJlbmRlcmVyLkVsZW1lbnRzLHt4bWxuczoidXJuOnNjaGVtYXMtbWljcm9zb2Z0LWNvbTp2bWwiLHN5bWJvbENhY2hlOnt9LG9mZnNldDpudWxsLGluaXRpYWxpemU6ZnVuY3Rpb24oYSl7aWYodGhpcy5zdXBwb3J0ZWQoKSl7aWYoIWRvY3VtZW50Lm5hbWVzcGFjZXMub2x2KXtkb2N1bWVudC5uYW1lc3BhY2VzLmFkZCgib2x2Iix0aGlzLnhtbG5zKTtmb3IodmFyIGI9ZG9jdW1lbnQuY3JlYXRlU3R5bGVTaGVldCgpLGM9InNoYXBlIHJlY3Qgb3ZhbCBmaWxsIHN0cm9rZSBpbWFnZWRhdGEgZ3JvdXAgdGV4dGJveCIuc3BsaXQoIiAiKSxkPTAsZT1jLmxlbmd0aDtkPGU7ZCsrKWIuYWRkUnVsZSgib2x2XFw6IitjW2RdLCJiZWhhdmlvcjogdXJsKCNkZWZhdWx0I1ZNTCk7IHBvc2l0aW9uOiBhYnNvbHV0ZTsgZGlzcGxheTogaW5saW5lLWJsb2NrOyIpfU9wZW5MYXllcnMuUmVuZGVyZXIuRWxlbWVudHMucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcywKYXJndW1lbnRzKX19LHN1cHBvcnRlZDpmdW5jdGlvbigpe3JldHVybiEhZG9jdW1lbnQubmFtZXNwYWNlc30sc2V0RXh0ZW50OmZ1bmN0aW9uKGEsYil7dmFyIGM9T3BlbkxheWVycy5SZW5kZXJlci5FbGVtZW50cy5wcm90b3R5cGUuc2V0RXh0ZW50LmFwcGx5KHRoaXMsYXJndW1lbnRzKSxkPXRoaXMuZ2V0UmVzb2x1dGlvbigpLGU9YS5sZWZ0L2R8MCxkPWEudG9wL2QtdGhpcy5zaXplLmh8MDtifHwhdGhpcy5vZmZzZXQ/KHRoaXMub2Zmc2V0PXt4OmUseTpkfSxkPWU9MCk6KGUtPXRoaXMub2Zmc2V0LngsZC09dGhpcy5vZmZzZXQueSk7dGhpcy5yb290LmNvb3Jkb3JpZ2luPWUtdGhpcy54T2Zmc2V0KyIgIitkO2Zvcih2YXIgZT1bdGhpcy5yb290LHRoaXMudmVjdG9yUm9vdCx0aGlzLnRleHRSb290XSxmPTAsZz1lLmxlbmd0aDtmPGc7KytmKWQ9ZVtmXSxkLmNvb3Jkc2l6ZT10aGlzLnNpemUudysiICIrdGhpcy5zaXplLmg7dGhpcy5yb290LnN0eWxlLmZsaXA9InkiO3JldHVybiBjfSwKc2V0U2l6ZTpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLlJlbmRlcmVyLnByb3RvdHlwZS5zZXRTaXplLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtmb3IodmFyIGI9W3RoaXMucmVuZGVyZXJSb290LHRoaXMucm9vdCx0aGlzLnZlY3RvclJvb3QsdGhpcy50ZXh0Um9vdF0sYz10aGlzLnNpemUudysicHgiLGQ9dGhpcy5zaXplLmgrInB4IixlLGY9MCxnPWIubGVuZ3RoO2Y8ZzsrK2YpZT1iW2ZdLGUuc3R5bGUud2lkdGg9YyxlLnN0eWxlLmhlaWdodD1kfSxnZXROb2RlVHlwZTpmdW5jdGlvbihhLGIpe3ZhciBjPW51bGw7c3dpdGNoKGEuQ0xBU1NfTkFNRSl7Y2FzZSAiT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludCI6Yz1iLmV4dGVybmFsR3JhcGhpYz8ib2x2OnJlY3QiOnRoaXMuaXNDb21wbGV4U3ltYm9sKGIuZ3JhcGhpY05hbWUpPyJvbHY6c2hhcGUiOiJvbHY6b3ZhbCI7YnJlYWs7Y2FzZSAiT3BlbkxheWVycy5HZW9tZXRyeS5SZWN0YW5nbGUiOmM9Im9sdjpyZWN0IjticmVhaztjYXNlICJPcGVuTGF5ZXJzLkdlb21ldHJ5LkxpbmVTdHJpbmciOmNhc2UgIk9wZW5MYXllcnMuR2VvbWV0cnkuTGluZWFyUmluZyI6Y2FzZSAiT3BlbkxheWVycy5HZW9tZXRyeS5Qb2x5Z29uIjpjYXNlICJPcGVuTGF5ZXJzLkdlb21ldHJ5LkN1cnZlIjpjPQoib2x2OnNoYXBlIn1yZXR1cm4gY30sc2V0U3R5bGU6ZnVuY3Rpb24oYSxiLGMsZCl7Yj1ifHxhLl9zdHlsZTtjPWN8fGEuX29wdGlvbnM7dmFyIGU9Yi5maWxsQ29sb3IsZj1iLnRpdGxlfHxiLmdyYXBoaWNUaXRsZTtmJiYoYS50aXRsZT1mKTtpZigiT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludCI9PT1hLl9nZW9tZXRyeUNsYXNzKWlmKGIuZXh0ZXJuYWxHcmFwaGljKXtjLmlzRmlsbGVkPSEwO3ZhciBlPWIuZ3JhcGhpY1dpZHRofHxiLmdyYXBoaWNIZWlnaHQsZj1iLmdyYXBoaWNIZWlnaHR8fGIuZ3JhcGhpY1dpZHRoLGU9ZT9lOjIqYi5wb2ludFJhZGl1cyxmPWY/ZjoyKmIucG9pbnRSYWRpdXMsZz10aGlzLmdldFJlc29sdXRpb24oKSxoPXZvaWQgMCE9Yi5ncmFwaGljWE9mZnNldD9iLmdyYXBoaWNYT2Zmc2V0Oi0oMC41KmUpLGs9dm9pZCAwIT1iLmdyYXBoaWNZT2Zmc2V0P2IuZ3JhcGhpY1lPZmZzZXQ6LSgwLjUqZik7YS5zdHlsZS5sZWZ0PSgoZC54LXRoaXMuZmVhdHVyZUR4KS8KZy10aGlzLm9mZnNldC54K2h8MCkrInB4IjthLnN0eWxlLnRvcD0oZC55L2ctdGhpcy5vZmZzZXQueS0oaytmKXwwKSsicHgiO2Euc3R5bGUud2lkdGg9ZSsicHgiO2Euc3R5bGUuaGVpZ2h0PWYrInB4IjthLnN0eWxlLmZsaXA9InkiO2U9Im5vbmUiO2MuaXNTdHJva2VkPSExfWVsc2UgdGhpcy5pc0NvbXBsZXhTeW1ib2woYi5ncmFwaGljTmFtZSk/KGY9dGhpcy5pbXBvcnRTeW1ib2woYi5ncmFwaGljTmFtZSksYS5wYXRoPWYucGF0aCxhLmNvb3Jkb3JpZ2luPWYubGVmdCsiLCIrZi5ib3R0b20sZj1mLnNpemUsYS5jb29yZHNpemU9ZisiLCIrZix0aGlzLmRyYXdDaXJjbGUoYSxkLGIucG9pbnRSYWRpdXMpLGEuc3R5bGUuZmxpcD0ieSIpOnRoaXMuZHJhd0NpcmNsZShhLGQsYi5wb2ludFJhZGl1cyk7Yy5pc0ZpbGxlZD9hLmZpbGxjb2xvcj1lOmEuZmlsbGVkPSJmYWxzZSI7ZD1hLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJmaWxsIik7ZD0wPT1kLmxlbmd0aD9udWxsOmRbMF07Yy5pc0ZpbGxlZD8KKGR8fChkPXRoaXMuY3JlYXRlTm9kZSgib2x2OmZpbGwiLGEuaWQrIl9maWxsIikpLGQub3BhY2l0eT1iLmZpbGxPcGFjaXR5LCJPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50Ij09PWEuX2dlb21ldHJ5Q2xhc3MmJmIuZXh0ZXJuYWxHcmFwaGljJiYoYi5ncmFwaGljT3BhY2l0eSYmKGQub3BhY2l0eT1iLmdyYXBoaWNPcGFjaXR5KSxkLnNyYz1iLmV4dGVybmFsR3JhcGhpYyxkLnR5cGU9ImZyYW1lIixiLmdyYXBoaWNXaWR0aCYmYi5ncmFwaGljSGVpZ2h0fHwoZC5hc3BlY3Q9ImF0bW9zdCIpKSxkLnBhcmVudE5vZGUhPWEmJmEuYXBwZW5kQ2hpbGQoZCkpOmQmJmEucmVtb3ZlQ2hpbGQoZCk7ZT1iLnJvdGF0aW9uO2lmKHZvaWQgMCE9PWV8fHZvaWQgMCE9PWEuX3JvdGF0aW9uKWEuX3JvdGF0aW9uPWUsYi5leHRlcm5hbEdyYXBoaWM/KHRoaXMuZ3JhcGhpY1JvdGF0ZShhLGgsayxiKSxkLm9wYWNpdHk9MCk6Ik9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQiPT09YS5fZ2VvbWV0cnlDbGFzcyYmCihhLnN0eWxlLnJvdGF0aW9uPWV8fDApO2g9YS5nZXRFbGVtZW50c0J5VGFnTmFtZSgic3Ryb2tlIik7aD0wPT1oLmxlbmd0aD9udWxsOmhbMF07Yy5pc1N0cm9rZWQ/KGh8fChoPXRoaXMuY3JlYXRlTm9kZSgib2x2OnN0cm9rZSIsYS5pZCsiX3N0cm9rZSIpLGEuYXBwZW5kQ2hpbGQoaCkpLGgub249ITAsaC5jb2xvcj1iLnN0cm9rZUNvbG9yLGgud2VpZ2h0PWIuc3Ryb2tlV2lkdGgrInB4IixoLm9wYWNpdHk9Yi5zdHJva2VPcGFjaXR5LGguZW5kY2FwPSJidXR0Ij09Yi5zdHJva2VMaW5lY2FwPyJmbGF0IjpiLnN0cm9rZUxpbmVjYXB8fCJyb3VuZCIsYi5zdHJva2VEYXNoc3R5bGUmJihoLmRhc2hzdHlsZT10aGlzLmRhc2hTdHlsZShiKSkpOihhLnN0cm9rZWQ9ITEsaCYmKGgub249ITEpKTsiaW5oZXJpdCIhPWIuY3Vyc29yJiZudWxsIT1iLmN1cnNvciYmKGEuc3R5bGUuY3Vyc29yPWIuY3Vyc29yKTtyZXR1cm4gYX0sZ3JhcGhpY1JvdGF0ZTpmdW5jdGlvbihhLGIsYyxkKXtkPQpkfHxhLl9zdHlsZTt2YXIgZT1kLnJvdGF0aW9ufHwwLGYsZztpZihkLmdyYXBoaWNXaWR0aCYmZC5ncmFwaGljSGVpZ2h0KXtnPU1hdGgubWF4KGQuZ3JhcGhpY1dpZHRoLGQuZ3JhcGhpY0hlaWdodCk7Zj1kLmdyYXBoaWNXaWR0aC9kLmdyYXBoaWNIZWlnaHQ7dmFyIGg9TWF0aC5yb3VuZChkLmdyYXBoaWNXaWR0aHx8ZypmKSxrPU1hdGgucm91bmQoZC5ncmFwaGljSGVpZ2h0fHxnKTthLnN0eWxlLndpZHRoPWgrInB4IjthLnN0eWxlLmhlaWdodD1rKyJweCI7dmFyIGw9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYS5pZCsiX2ltYWdlIik7bHx8KGw9dGhpcy5jcmVhdGVOb2RlKCJvbHY6aW1hZ2VkYXRhIixhLmlkKyJfaW1hZ2UiKSxhLmFwcGVuZENoaWxkKGwpKTtsLnN0eWxlLndpZHRoPWgrInB4IjtsLnN0eWxlLmhlaWdodD1rKyJweCI7bC5zcmM9ZC5leHRlcm5hbEdyYXBoaWM7bC5zdHlsZS5maWx0ZXI9InByb2dpZDpEWEltYWdlVHJhbnNmb3JtLk1pY3Jvc29mdC5BbHBoYUltYWdlTG9hZGVyKHNyYz0nJywgc2l6aW5nTWV0aG9kPSdzY2FsZScpIjsKbD1lKk1hdGguUEkvMTgwO2U9TWF0aC5zaW4obCk7bD1NYXRoLmNvcyhsKTtlPSJwcm9naWQ6RFhJbWFnZVRyYW5zZm9ybS5NaWNyb3NvZnQuTWF0cml4KE0xMT0iK2wrIixNMTI9IistZSsiLE0yMT0iK2UrIixNMjI9IitsKyIsU2l6aW5nTWV0aG9kPSdhdXRvIGV4cGFuZCcpXG4iOyhsPWQuZ3JhcGhpY09wYWNpdHl8fGQuZmlsbE9wYWNpdHkpJiYxIT1sJiYoZSs9InByb2dpZDpEWEltYWdlVHJhbnNmb3JtLk1pY3Jvc29mdC5CYXNpY0ltYWdlKG9wYWNpdHk9IitsKyIpXG4iKTthLnN0eWxlLmZpbHRlcj1lO2U9bmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoLWIsLWMpO2g9KG5ldyBPcGVuTGF5ZXJzLkJvdW5kcygwLDAsaCxrKSkudG9HZW9tZXRyeSgpO2gucm90YXRlKGQucm90YXRpb24sZSk7aD1oLmdldEJvdW5kcygpO2Euc3R5bGUubGVmdD1NYXRoLnJvdW5kKHBhcnNlSW50KGEuc3R5bGUubGVmdCkraC5sZWZ0KSsicHgiO2Euc3R5bGUudG9wPU1hdGgucm91bmQocGFyc2VJbnQoYS5zdHlsZS50b3ApLQpoLmJvdHRvbSkrInB4In1lbHNle3ZhciBtPW5ldyBJbWFnZTttLm9ucmVhZHlzdGF0ZWNoYW5nZT1PcGVuTGF5ZXJzLkZ1bmN0aW9uLmJpbmQoZnVuY3Rpb24oKXtpZigiY29tcGxldGUiPT1tLnJlYWR5U3RhdGV8fCJpbnRlcmFjdGl2ZSI9PW0ucmVhZHlTdGF0ZSlmPW0ud2lkdGgvbS5oZWlnaHQsZz1NYXRoLm1heCgyKmQucG9pbnRSYWRpdXMsZC5ncmFwaGljV2lkdGh8fDAsZC5ncmFwaGljSGVpZ2h0fHwwKSxiKj1mLGQuZ3JhcGhpY1dpZHRoPWcqZixkLmdyYXBoaWNIZWlnaHQ9Zyx0aGlzLmdyYXBoaWNSb3RhdGUoYSxiLGMsZCl9LHRoaXMpO20uc3JjPWQuZXh0ZXJuYWxHcmFwaGljfX0scG9zdERyYXc6ZnVuY3Rpb24oYSl7YS5zdHlsZS52aXNpYmlsaXR5PSJ2aXNpYmxlIjt2YXIgYj1hLl9zdHlsZS5maWxsQ29sb3IsYz1hLl9zdHlsZS5zdHJva2VDb2xvcjsibm9uZSI9PWImJmEuZmlsbGNvbG9yIT1iJiYoYS5maWxsY29sb3I9Yik7Im5vbmUiPT1jJiZhLnN0cm9rZWNvbG9yIT0KYyYmKGEuc3Ryb2tlY29sb3I9Yyl9LHNldE5vZGVEaW1lbnNpb246ZnVuY3Rpb24oYSxiKXt2YXIgYz1iLmdldEJvdW5kcygpO2lmKGMpe3ZhciBkPXRoaXMuZ2V0UmVzb2x1dGlvbigpLGM9bmV3IE9wZW5MYXllcnMuQm91bmRzKChjLmxlZnQtdGhpcy5mZWF0dXJlRHgpL2QtdGhpcy5vZmZzZXQueHwwLGMuYm90dG9tL2QtdGhpcy5vZmZzZXQueXwwLChjLnJpZ2h0LXRoaXMuZmVhdHVyZUR4KS9kLXRoaXMub2Zmc2V0Lnh8MCxjLnRvcC9kLXRoaXMub2Zmc2V0Lnl8MCk7YS5zdHlsZS5sZWZ0PWMubGVmdCsicHgiO2Euc3R5bGUudG9wPWMudG9wKyJweCI7YS5zdHlsZS53aWR0aD1jLmdldFdpZHRoKCkrInB4IjthLnN0eWxlLmhlaWdodD1jLmdldEhlaWdodCgpKyJweCI7YS5jb29yZG9yaWdpbj1jLmxlZnQrIiAiK2MudG9wO2EuY29vcmRzaXplPWMuZ2V0V2lkdGgoKSsiICIrYy5nZXRIZWlnaHQoKX19LGRhc2hTdHlsZTpmdW5jdGlvbihhKXthPWEuc3Ryb2tlRGFzaHN0eWxlO3N3aXRjaChhKXtjYXNlICJzb2xpZCI6Y2FzZSAiZG90IjpjYXNlICJkYXNoIjpjYXNlICJkYXNoZG90IjpjYXNlICJsb25nZGFzaCI6Y2FzZSAibG9uZ2Rhc2hkb3QiOnJldHVybiBhOwpkZWZhdWx0OnJldHVybiBhPWEuc3BsaXQoL1sgLF0vKSwyPT1hLmxlbmd0aD8xKmFbMF0+PTIqYVsxXT8ibG9uZ2Rhc2giOjE9PWFbMF18fDE9PWFbMV0/ImRvdCI6ImRhc2giOjQ9PWEubGVuZ3RoPzEqYVswXT49MiphWzFdPyJsb25nZGFzaGRvdCI6ImRhc2hkb3QiOiJzb2xpZCJ9fSxjcmVhdGVOb2RlOmZ1bmN0aW9uKGEsYil7dmFyIGM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChhKTtiJiYoYy5pZD1iKTtjLnVuc2VsZWN0YWJsZT0ib24iO2Mub25zZWxlY3RzdGFydD1PcGVuTGF5ZXJzLkZ1bmN0aW9uLkZhbHNlO3JldHVybiBjfSxub2RlVHlwZUNvbXBhcmU6ZnVuY3Rpb24oYSxiKXt2YXIgYz1iLGQ9Yy5pbmRleE9mKCI6Iik7LTEhPWQmJihjPWMuc3Vic3RyKGQrMSkpO3ZhciBlPWEubm9kZU5hbWUsZD1lLmluZGV4T2YoIjoiKTstMSE9ZCYmKGU9ZS5zdWJzdHIoZCsxKSk7cmV0dXJuIGM9PWV9LGNyZWF0ZVJlbmRlclJvb3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ub2RlRmFjdG9yeSh0aGlzLmNvbnRhaW5lci5pZCsKIl92bWxSb290IiwiZGl2Iil9LGNyZWF0ZVJvb3Q6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMubm9kZUZhY3RvcnkodGhpcy5jb250YWluZXIuaWQrYSwib2x2Omdyb3VwIil9LGRyYXdQb2ludDpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLmRyYXdDaXJjbGUoYSxiLDEpfSxkcmF3Q2lyY2xlOmZ1bmN0aW9uKGEsYixjKXtpZighaXNOYU4oYi54KSYmIWlzTmFOKGIueSkpe3ZhciBkPXRoaXMuZ2V0UmVzb2x1dGlvbigpO2Euc3R5bGUubGVmdD0oKGIueC10aGlzLmZlYXR1cmVEeCkvZC10aGlzLm9mZnNldC54fDApLWMrInB4IjthLnN0eWxlLnRvcD0oYi55L2QtdGhpcy5vZmZzZXQueXwwKS1jKyJweCI7Yj0yKmM7YS5zdHlsZS53aWR0aD1iKyJweCI7YS5zdHlsZS5oZWlnaHQ9YisicHgiO3JldHVybiBhfXJldHVybiExfSxkcmF3TGluZVN0cmluZzpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLmRyYXdMaW5lKGEsYiwhMSl9LGRyYXdMaW5lYXJSaW5nOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuZHJhd0xpbmUoYSwKYiwhMCl9LGRyYXdMaW5lOmZ1bmN0aW9uKGEsYixjKXt0aGlzLnNldE5vZGVEaW1lbnNpb24oYSxiKTtmb3IodmFyIGQ9dGhpcy5nZXRSZXNvbHV0aW9uKCksZT1iLmNvbXBvbmVudHMubGVuZ3RoLGY9QXJyYXkoZSksZyxoLGs9MDtrPGU7aysrKWc9Yi5jb21wb25lbnRzW2tdLGg9KGcueC10aGlzLmZlYXR1cmVEeCkvZC10aGlzLm9mZnNldC54fDAsZz1nLnkvZC10aGlzLm9mZnNldC55fDAsZltrXT0iICIraCsiLCIrZysiIGwgIjtiPWM/IiB4IGUiOiIgZSI7YS5wYXRoPSJtIitmLmpvaW4oIiIpK2I7cmV0dXJuIGF9LGRyYXdQb2x5Z29uOmZ1bmN0aW9uKGEsYil7dGhpcy5zZXROb2RlRGltZW5zaW9uKGEsYik7dmFyIGM9dGhpcy5nZXRSZXNvbHV0aW9uKCksZD1bXSxlLGYsZyxoLGssbCxtLG4scCxxO2U9MDtmb3IoZj1iLmNvbXBvbmVudHMubGVuZ3RoO2U8ZjtlKyspe2QucHVzaCgibSIpO2c9Yi5jb21wb25lbnRzW2VdLmNvbXBvbmVudHM7aD0wPT09ZTtsPWs9bnVsbDttPTA7CmZvcihuPWcubGVuZ3RoO208bjttKyspcD1nW21dLHE9KHAueC10aGlzLmZlYXR1cmVEeCkvYy10aGlzLm9mZnNldC54fDAscD1wLnkvYy10aGlzLm9mZnNldC55fDAscT0iICIrcSsiLCIrcCxkLnB1c2gocSksMD09bSYmZC5wdXNoKCIgbCIpLGh8fChrP2shPXEmJihsP2whPXEmJihoPSEwKTpsPXEpOms9cSk7ZC5wdXNoKGg/IiB4ICI6IiAiKX1kLnB1c2goImUiKTthLnBhdGg9ZC5qb2luKCIiKTtyZXR1cm4gYX0sZHJhd1JlY3RhbmdsZTpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuZ2V0UmVzb2x1dGlvbigpO2Euc3R5bGUubGVmdD0oKGIueC10aGlzLmZlYXR1cmVEeCkvYy10aGlzLm9mZnNldC54fDApKyJweCI7YS5zdHlsZS50b3A9KGIueS9jLXRoaXMub2Zmc2V0Lnl8MCkrInB4IjthLnN0eWxlLndpZHRoPShiLndpZHRoL2N8MCkrInB4IjthLnN0eWxlLmhlaWdodD0oYi5oZWlnaHQvY3wwKSsicHgiO3JldHVybiBhfSxkcmF3VGV4dDpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9dGhpcy5ub2RlRmFjdG9yeShhKwp0aGlzLkxBQkVMX0lEX1NVRkZJWCwib2x2OnJlY3QiKSxlPXRoaXMubm9kZUZhY3RvcnkoYSt0aGlzLkxBQkVMX0lEX1NVRkZJWCsiX3RleHRib3giLCJvbHY6dGV4dGJveCIpLGY9dGhpcy5nZXRSZXNvbHV0aW9uKCk7ZC5zdHlsZS5sZWZ0PSgoYy54LXRoaXMuZmVhdHVyZUR4KS9mLXRoaXMub2Zmc2V0Lnh8MCkrInB4IjtkLnN0eWxlLnRvcD0oYy55L2YtdGhpcy5vZmZzZXQueXwwKSsicHgiO2Quc3R5bGUuZmxpcD0ieSI7ZS5pbm5lclRleHQ9Yi5sYWJlbDsiaW5oZXJpdCIhPWIuY3Vyc29yJiZudWxsIT1iLmN1cnNvciYmKGUuc3R5bGUuY3Vyc29yPWIuY3Vyc29yKTtiLmZvbnRDb2xvciYmKGUuc3R5bGUuY29sb3I9Yi5mb250Q29sb3IpO2IuZm9udE9wYWNpdHkmJihlLnN0eWxlLmZpbHRlcj0iYWxwaGEob3BhY2l0eT0iKzEwMCpiLmZvbnRPcGFjaXR5KyIpIik7Yi5mb250RmFtaWx5JiYoZS5zdHlsZS5mb250RmFtaWx5PWIuZm9udEZhbWlseSk7Yi5mb250U2l6ZSYmKGUuc3R5bGUuZm9udFNpemU9CmIuZm9udFNpemUpO2IuZm9udFdlaWdodCYmKGUuc3R5bGUuZm9udFdlaWdodD1iLmZvbnRXZWlnaHQpO2IuZm9udFN0eWxlJiYoZS5zdHlsZS5mb250U3R5bGU9Yi5mb250U3R5bGUpOyEwPT09Yi5sYWJlbFNlbGVjdCYmKGQuX2ZlYXR1cmVJZD1hLGUuX2ZlYXR1cmVJZD1hLGUuX2dlb21ldHJ5PWMsZS5fZ2VvbWV0cnlDbGFzcz1jLkNMQVNTX05BTUUpO2Uuc3R5bGUud2hpdGVTcGFjZT0ibm93cmFwIjtlLmluc2V0PSIxcHgsMHB4LDBweCwwcHgiO2QucGFyZW50Tm9kZXx8KGQuYXBwZW5kQ2hpbGQoZSksdGhpcy50ZXh0Um9vdC5hcHBlbmRDaGlsZChkKSk7Yj1iLmxhYmVsQWxpZ258fCJjbSI7MT09Yi5sZW5ndGgmJihiKz0ibSIpO2E9ZS5jbGllbnRXaWR0aCpPcGVuTGF5ZXJzLlJlbmRlcmVyLlZNTC5MQUJFTF9TSElGVFtiLnN1YnN0cigwLDEpXTtlPWUuY2xpZW50SGVpZ2h0Kk9wZW5MYXllcnMuUmVuZGVyZXIuVk1MLkxBQkVMX1NISUZUW2Iuc3Vic3RyKDEsMSldO2Quc3R5bGUubGVmdD0KcGFyc2VJbnQoZC5zdHlsZS5sZWZ0KS1hLTErInB4IjtkLnN0eWxlLnRvcD1wYXJzZUludChkLnN0eWxlLnRvcCkrZSsicHgifSxtb3ZlUm9vdDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLm1hcC5nZXRMYXllcihhLmNvbnRhaW5lci5pZCk7YiBpbnN0YW5jZW9mIE9wZW5MYXllcnMuTGF5ZXIuVmVjdG9yLlJvb3RDb250YWluZXImJihiPXRoaXMubWFwLmdldExheWVyKHRoaXMuY29udGFpbmVyLmlkKSk7YiYmYi5yZW5kZXJlci5jbGVhcigpO09wZW5MYXllcnMuUmVuZGVyZXIuRWxlbWVudHMucHJvdG90eXBlLm1vdmVSb290LmFwcGx5KHRoaXMsYXJndW1lbnRzKTtiJiZiLnJlZHJhdygpfSxpbXBvcnRTeW1ib2w6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jb250YWluZXIuaWQrIi0iK2EsYz10aGlzLnN5bWJvbENhY2hlW2JdO2lmKGMpcmV0dXJuIGM7Yz1PcGVuTGF5ZXJzLlJlbmRlcmVyLnN5bWJvbFthXTtpZighYyl0aHJvdyBFcnJvcihhKyIgaXMgbm90IGEgdmFsaWQgc3ltYm9sIG5hbWUiKTsKYT1uZXcgT3BlbkxheWVycy5Cb3VuZHMoTnVtYmVyLk1BWF9WQUxVRSxOdW1iZXIuTUFYX1ZBTFVFLDAsMCk7Zm9yKHZhciBkPVsibSJdLGU9MDtlPGMubGVuZ3RoO2UrPTIpe3ZhciBmPWNbZV0sZz1jW2UrMV07YS5sZWZ0PU1hdGgubWluKGEubGVmdCxmKTthLmJvdHRvbT1NYXRoLm1pbihhLmJvdHRvbSxnKTthLnJpZ2h0PU1hdGgubWF4KGEucmlnaHQsZik7YS50b3A9TWF0aC5tYXgoYS50b3AsZyk7ZC5wdXNoKGYpO2QucHVzaChnKTswPT1lJiZkLnB1c2goImwiKX1kLnB1c2goInggZSIpO2M9ZC5qb2luKCIgIik7ZD0oYS5nZXRXaWR0aCgpLWEuZ2V0SGVpZ2h0KCkpLzI7MDxkPyhhLmJvdHRvbS09ZCxhLnRvcCs9ZCk6KGEubGVmdCs9ZCxhLnJpZ2h0LT1kKTtjPXtwYXRoOmMsc2l6ZTphLmdldFdpZHRoKCksbGVmdDphLmxlZnQsYm90dG9tOmEuYm90dG9tfTtyZXR1cm4gdGhpcy5zeW1ib2xDYWNoZVtiXT1jfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLlJlbmRlcmVyLlZNTCJ9KTsKT3BlbkxheWVycy5SZW5kZXJlci5WTUwuTEFCRUxfU0hJRlQ9e2w6MCxjOjAuNSxyOjEsdDowLG06MC41LGI6MX07T3BlbkxheWVycy5Db250cm9sLkNhY2hlUmVhZD1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuQ29udHJvbCx7ZmV0Y2hFdmVudDoidGlsZWxvYWRzdGFydCIsbGF5ZXJzOm51bGwsYXV0b0FjdGl2YXRlOiEwLHNldE1hcDpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLkNvbnRyb2wucHJvdG90eXBlLnNldE1hcC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dmFyIGIsYz10aGlzLmxheWVyc3x8YS5sYXllcnM7Zm9yKGI9Yy5sZW5ndGgtMTswPD1iOy0tYil0aGlzLmFkZExheWVyKHtsYXllcjpjW2JdfSk7aWYoIXRoaXMubGF5ZXJzKWEuZXZlbnRzLm9uKHthZGRsYXllcjp0aGlzLmFkZExheWVyLHJlbW92ZUxheWVyOnRoaXMucmVtb3ZlTGF5ZXIsc2NvcGU6dGhpc30pfSxhZGRMYXllcjpmdW5jdGlvbihhKXthLmxheWVyLmV2ZW50cy5yZWdpc3Rlcih0aGlzLmZldGNoRXZlbnQsdGhpcyx0aGlzLmZldGNoKX0scmVtb3ZlTGF5ZXI6ZnVuY3Rpb24oYSl7YS5sYXllci5ldmVudHMudW5yZWdpc3Rlcih0aGlzLmZldGNoRXZlbnQsCnRoaXMsdGhpcy5mZXRjaCl9LGZldGNoOmZ1bmN0aW9uKGEpe2lmKHRoaXMuYWN0aXZlJiZ3aW5kb3cubG9jYWxTdG9yYWdlJiZhLnRpbGUgaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLlRpbGUuSW1hZ2Upe3ZhciBiPWEudGlsZSxjPWIudXJsOyFiLmxheWVyLmNyb3NzT3JpZ2luS2V5d29yZCYmKE9wZW5MYXllcnMuUHJveHlIb3N0JiYwPT09Yy5pbmRleE9mKE9wZW5MYXllcnMuUHJveHlIb3N0KSkmJihjPU9wZW5MYXllcnMuQ29udHJvbC5DYWNoZVdyaXRlLnVybE1hcFtjXSk7aWYoYz13aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oIm9sQ2FjaGVfIitjKSliLnVybD1jLCJ0aWxlZXJyb3IiPT09YS50eXBlJiZiLnNldEltZ1NyYyhjKX19LGRlc3Ryb3k6ZnVuY3Rpb24oKXtpZih0aGlzLmxheWVyc3x8dGhpcy5tYXApe3ZhciBhLGI9dGhpcy5sYXllcnN8fHRoaXMubWFwLmxheWVycztmb3IoYT1iLmxlbmd0aC0xOzA8PWE7LS1hKXRoaXMucmVtb3ZlTGF5ZXIoe2xheWVyOmJbYV19KX10aGlzLm1hcCYmCnRoaXMubWFwLmV2ZW50cy51bih7YWRkbGF5ZXI6dGhpcy5hZGRMYXllcixyZW1vdmVMYXllcjp0aGlzLnJlbW92ZUxheWVyLHNjb3BlOnRoaXN9KTtPcGVuTGF5ZXJzLkNvbnRyb2wucHJvdG90eXBlLmRlc3Ryb3kuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkNvbnRyb2wuQ2FjaGVSZWFkIn0pO09wZW5MYXllcnMuUHJvdG9jb2wuV0ZTLnYxXzBfMD1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuUHJvdG9jb2wuV0ZTLnYxLHt2ZXJzaW9uOiIxLjAuMCIsQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Qcm90b2NvbC5XRlMudjFfMF8wIn0pO09wZW5MYXllcnMuRm9ybWF0LldNU0dldEZlYXR1cmVJbmZvPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Gb3JtYXQuWE1MLHtsYXllcklkZW50aWZpZXI6Il9sYXllciIsZmVhdHVyZUlkZW50aWZpZXI6Il9mZWF0dXJlIixyZWdFeGVzOnt0cmltU3BhY2U6L15ccyp8XHMqJC9nLHJlbW92ZVNwYWNlOi9ccyovZyxzcGxpdFNwYWNlOi9ccysvLHRyaW1Db21tYTovXHMqLFxzKi9nfSxnbWxGb3JtYXQ6bnVsbCxyZWFkOmZ1bmN0aW9uKGEpeyJzdHJpbmciPT10eXBlb2YgYSYmKGE9T3BlbkxheWVycy5Gb3JtYXQuWE1MLnByb3RvdHlwZS5yZWFkLmFwcGx5KHRoaXMsW2FdKSk7dmFyIGI9YS5kb2N1bWVudEVsZW1lbnQ7aWYoYil7dmFyIGM9dGhpc1sicmVhZF8iK2Iubm9kZU5hbWVdO2E9Yz9jLmNhbGwodGhpcyxiKToobmV3IE9wZW5MYXllcnMuRm9ybWF0LkdNTCh0aGlzLm9wdGlvbnM/dGhpcy5vcHRpb25zOnt9KSkucmVhZChhKX1yZXR1cm4gYX0scmVhZF9tc0dNTE91dHB1dDpmdW5jdGlvbihhKXt2YXIgYj0KW107aWYoYT10aGlzLmdldFNpYmxpbmdOb2Rlc0J5VGFnQ3JpdGVyaWEoYSx0aGlzLmxheWVySWRlbnRpZmllcikpZm9yKHZhciBjPTAsZD1hLmxlbmd0aDtjPGQ7KytjKXt2YXIgZT1hW2NdLGY9ZS5ub2RlTmFtZTtlLnByZWZpeCYmKGY9Zi5zcGxpdCgiOiIpWzFdKTtmPWYucmVwbGFjZSh0aGlzLmxheWVySWRlbnRpZmllciwiIik7aWYoZT10aGlzLmdldFNpYmxpbmdOb2Rlc0J5VGFnQ3JpdGVyaWEoZSx0aGlzLmZlYXR1cmVJZGVudGlmaWVyKSlmb3IodmFyIGc9MDtnPGUubGVuZ3RoO2crKyl7dmFyIGg9ZVtnXSxrPXRoaXMucGFyc2VHZW9tZXRyeShoKSxoPXRoaXMucGFyc2VBdHRyaWJ1dGVzKGgpLGg9bmV3IE9wZW5MYXllcnMuRmVhdHVyZS5WZWN0b3Ioay5nZW9tZXRyeSxoLG51bGwpO2guYm91bmRzPWsuYm91bmRzO2gudHlwZT1mO2IucHVzaChoKX19cmV0dXJuIGJ9LHJlYWRfRmVhdHVyZUluZm9SZXNwb25zZTpmdW5jdGlvbihhKXt2YXIgYj1bXTthPXRoaXMuZ2V0RWxlbWVudHNCeVRhZ05hbWVOUyhhLAoiKiIsIkZJRUxEUyIpO2Zvcih2YXIgYz0wLGQ9YS5sZW5ndGg7YzxkO2MrKyl7dmFyIGU9YVtjXSxmPXt9LGcsaD1lLmF0dHJpYnV0ZXMubGVuZ3RoO2lmKDA8aClmb3IoZz0wO2c8aDtnKyspe3ZhciBrPWUuYXR0cmlidXRlc1tnXTtmW2subm9kZU5hbWVdPWsubm9kZVZhbHVlfWVsc2UgZm9yKGU9ZS5jaGlsZE5vZGVzLGc9MCxoPWUubGVuZ3RoO2c8aDsrK2cpaz1lW2ddLDMhPWsubm9kZVR5cGUmJihmW2suZ2V0QXR0cmlidXRlKCJuYW1lIildPWsuZ2V0QXR0cmlidXRlKCJ2YWx1ZSIpKTtiLnB1c2gobmV3IE9wZW5MYXllcnMuRmVhdHVyZS5WZWN0b3IobnVsbCxmLG51bGwpKX1yZXR1cm4gYn0sZ2V0U2libGluZ05vZGVzQnlUYWdDcml0ZXJpYTpmdW5jdGlvbihhLGIpe3ZhciBjPVtdLGQsZSxmLGc7aWYoYSYmYS5oYXNDaGlsZE5vZGVzKCkpe2Q9YS5jaGlsZE5vZGVzO2Y9ZC5sZW5ndGg7Zm9yKHZhciBoPTA7aDxmO2grKyl7Zm9yKGc9ZFtoXTtnJiYxIT1nLm5vZGVUeXBlOylnPQpnLm5leHRTaWJsaW5nLGgrKztlPWc/Zy5ub2RlTmFtZToiIjswPGUubGVuZ3RoJiYtMTxlLmluZGV4T2YoYik/Yy5wdXNoKGcpOihlPXRoaXMuZ2V0U2libGluZ05vZGVzQnlUYWdDcml0ZXJpYShnLGIpLDA8ZS5sZW5ndGgmJigwPT1jLmxlbmd0aD9jPWU6Yy5wdXNoKGUpKSl9fXJldHVybiBjfSxwYXJzZUF0dHJpYnV0ZXM6ZnVuY3Rpb24oYSl7dmFyIGI9e307aWYoMT09YS5ub2RlVHlwZSl7YT1hLmNoaWxkTm9kZXM7Zm9yKHZhciBjPWEubGVuZ3RoLGQ9MDtkPGM7KytkKXt2YXIgZT1hW2RdO2lmKDE9PWUubm9kZVR5cGUpe3ZhciBmPWUuY2hpbGROb2RlcyxlPWUucHJlZml4P2Uubm9kZU5hbWUuc3BsaXQoIjoiKVsxXTplLm5vZGVOYW1lOzA9PWYubGVuZ3RoP2JbZV09bnVsbDoxPT1mLmxlbmd0aCYmKGY9ZlswXSwzPT1mLm5vZGVUeXBlfHw0PT1mLm5vZGVUeXBlKSYmKGY9Zi5ub2RlVmFsdWUucmVwbGFjZSh0aGlzLnJlZ0V4ZXMudHJpbVNwYWNlLCIiKSxiW2VdPWYpfX19cmV0dXJuIGJ9LApwYXJzZUdlb21ldHJ5OmZ1bmN0aW9uKGEpe3RoaXMuZ21sRm9ybWF0fHwodGhpcy5nbWxGb3JtYXQ9bmV3IE9wZW5MYXllcnMuRm9ybWF0LkdNTCk7YT10aGlzLmdtbEZvcm1hdC5wYXJzZUZlYXR1cmUoYSk7dmFyIGIsYz1udWxsO2EmJihiPWEuZ2VvbWV0cnkmJmEuZ2VvbWV0cnkuY2xvbmUoKSxjPWEuYm91bmRzJiZhLmJvdW5kcy5jbG9uZSgpLGEuZGVzdHJveSgpKTtyZXR1cm57Z2VvbWV0cnk6Yixib3VuZHM6Y319LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuRm9ybWF0LldNU0dldEZlYXR1cmVJbmZvIn0pO09wZW5MYXllcnMuQ29udHJvbC5XTVRTR2V0RmVhdHVyZUluZm89T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkNvbnRyb2wse2hvdmVyOiExLHJlcXVlc3RFbmNvZGluZzoiS1ZQIixkcmlsbERvd246ITEsbWF4RmVhdHVyZXM6MTAsY2xpY2tDYWxsYmFjazoiY2xpY2siLGxheWVyczpudWxsLHF1ZXJ5VmlzaWJsZTohMCxpbmZvRm9ybWF0OiJ0ZXh0L2h0bWwiLHZlbmRvclBhcmFtczp7fSxmb3JtYXQ6bnVsbCxmb3JtYXRPcHRpb25zOm51bGwsaGFuZGxlcjpudWxsLGhvdmVyUmVxdWVzdDpudWxsLHBlbmRpbmc6MCxpbml0aWFsaXplOmZ1bmN0aW9uKGEpe2E9YXx8e307YS5oYW5kbGVyT3B0aW9ucz1hLmhhbmRsZXJPcHRpb25zfHx7fTtPcGVuTGF5ZXJzLkNvbnRyb2wucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxbYV0pO3RoaXMuZm9ybWF0fHwodGhpcy5mb3JtYXQ9bmV3IE9wZW5MYXllcnMuRm9ybWF0LldNU0dldEZlYXR1cmVJbmZvKGEuZm9ybWF0T3B0aW9ucykpOwohMD09PXRoaXMuZHJpbGxEb3duJiYodGhpcy5ob3Zlcj0hMSk7dGhpcy5ob3Zlcj90aGlzLmhhbmRsZXI9bmV3IE9wZW5MYXllcnMuSGFuZGxlci5Ib3Zlcih0aGlzLHttb3ZlOnRoaXMuY2FuY2VsSG92ZXIscGF1c2U6dGhpcy5nZXRJbmZvRm9ySG92ZXJ9LE9wZW5MYXllcnMuVXRpbC5leHRlbmQodGhpcy5oYW5kbGVyT3B0aW9ucy5ob3Zlcnx8e30se2RlbGF5OjI1MH0pKTooYT17fSxhW3RoaXMuY2xpY2tDYWxsYmFja109dGhpcy5nZXRJbmZvRm9yQ2xpY2ssdGhpcy5oYW5kbGVyPW5ldyBPcGVuTGF5ZXJzLkhhbmRsZXIuQ2xpY2sodGhpcyxhLHRoaXMuaGFuZGxlck9wdGlvbnMuY2xpY2t8fHt9KSl9LGdldEluZm9Gb3JDbGljazpmdW5jdGlvbihhKXt0aGlzLnJlcXVlc3QoYS54eSx7fSl9LGdldEluZm9Gb3JIb3ZlcjpmdW5jdGlvbihhKXt0aGlzLnJlcXVlc3QoYS54eSx7aG92ZXI6ITB9KX0sY2FuY2VsSG92ZXI6ZnVuY3Rpb24oKXt0aGlzLmhvdmVyUmVxdWVzdCYmKC0tdGhpcy5wZW5kaW5nLAowPj10aGlzLnBlbmRpbmcmJihPcGVuTGF5ZXJzLkVsZW1lbnQucmVtb3ZlQ2xhc3ModGhpcy5tYXAudmlld1BvcnREaXYsIm9sQ3Vyc29yV2FpdCIpLHRoaXMucGVuZGluZz0wKSx0aGlzLmhvdmVyUmVxdWVzdC5hYm9ydCgpLHRoaXMuaG92ZXJSZXF1ZXN0PW51bGwpfSxmaW5kTGF5ZXJzOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPXRoaXMubGF5ZXJzfHx0aGlzLm1hcC5sYXllcnMsYj1bXSxjLGQ9YS5sZW5ndGgtMTswPD1kJiYoYz1hW2RdLCEoYyBpbnN0YW5jZW9mIE9wZW5MYXllcnMuTGF5ZXIuV01UUyl8fChjLnJlcXVlc3RFbmNvZGluZyE9PXRoaXMucmVxdWVzdEVuY29kaW5nfHx0aGlzLnF1ZXJ5VmlzaWJsZSYmIWMuZ2V0VmlzaWJpbGl0eSgpKXx8KGIucHVzaChjKSx0aGlzLmRyaWxsRG93biYmIXRoaXMuaG92ZXIpKTstLWQpO3JldHVybiBifSxidWlsZFJlcXVlc3RPcHRpb25zOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5tYXAuZ2V0TG9uTGF0RnJvbVBpeGVsKGIpLGQ9YS5nZXRVUkwobmV3IE9wZW5MYXllcnMuQm91bmRzKGMubG9uLApjLmxhdCxjLmxvbixjLmxhdCkpLGQ9T3BlbkxheWVycy5VdGlsLmdldFBhcmFtZXRlcnMoZCksYz1hLmdldFRpbGVJbmZvKGMpO09wZW5MYXllcnMuVXRpbC5leHRlbmQoZCx7c2VydmljZToiV01UUyIsdmVyc2lvbjphLnZlcnNpb24scmVxdWVzdDoiR2V0RmVhdHVyZUluZm8iLGluZm9Gb3JtYXQ6dGhpcy5pbmZvRm9ybWF0LGk6Yy5pLGo6Yy5qfSk7T3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoZCx0aGlzLnZlbmRvclBhcmFtcyk7cmV0dXJue3VybDpPcGVuTGF5ZXJzLlV0aWwuaXNBcnJheShhLnVybCk/YS51cmxbMF06YS51cmwscGFyYW1zOk9wZW5MYXllcnMuVXRpbC51cHBlckNhc2VPYmplY3QoZCksY2FsbGJhY2s6ZnVuY3Rpb24oYyl7dGhpcy5oYW5kbGVSZXNwb25zZShiLGMsYSl9LHNjb3BlOnRoaXN9fSxyZXF1ZXN0OmZ1bmN0aW9uKGEsYil7Yj1ifHx7fTt2YXIgYz10aGlzLmZpbmRMYXllcnMoKTtpZigwPGMubGVuZ3RoKXtmb3IodmFyIGQsZSxmPTAsZz1jLmxlbmd0aDtmPApnO2YrKyllPWNbZl0sZD10aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoImJlZm9yZWdldGZlYXR1cmVpbmZvIix7eHk6YSxsYXllcjplfSksITEhPT1kJiYoKyt0aGlzLnBlbmRpbmcsZD10aGlzLmJ1aWxkUmVxdWVzdE9wdGlvbnMoZSxhKSxkPU9wZW5MYXllcnMuUmVxdWVzdC5HRVQoZCksITA9PT1iLmhvdmVyJiYodGhpcy5ob3ZlclJlcXVlc3Q9ZCkpOzA8dGhpcy5wZW5kaW5nJiZPcGVuTGF5ZXJzLkVsZW1lbnQuYWRkQ2xhc3ModGhpcy5tYXAudmlld1BvcnREaXYsIm9sQ3Vyc29yV2FpdCIpfX0saGFuZGxlUmVzcG9uc2U6ZnVuY3Rpb24oYSxiLGMpey0tdGhpcy5wZW5kaW5nOzA+PXRoaXMucGVuZGluZyYmKE9wZW5MYXllcnMuRWxlbWVudC5yZW1vdmVDbGFzcyh0aGlzLm1hcC52aWV3UG9ydERpdiwib2xDdXJzb3JXYWl0IiksdGhpcy5wZW5kaW5nPTApO2lmKGIuc3RhdHVzJiYoMjAwPmIuc3RhdHVzfHwzMDA8PWIuc3RhdHVzKSl0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoImV4Y2VwdGlvbiIsCnt4eTphLHJlcXVlc3Q6YixsYXllcjpjfSk7ZWxzZXt2YXIgZD1iLnJlc3BvbnNlWE1MO2QmJmQuZG9jdW1lbnRFbGVtZW50fHwoZD1iLnJlc3BvbnNlVGV4dCk7dmFyIGUsZjt0cnl7ZT10aGlzLmZvcm1hdC5yZWFkKGQpfWNhdGNoKGcpe2Y9ITAsdGhpcy5ldmVudHMudHJpZ2dlckV2ZW50KCJleGNlcHRpb24iLHt4eTphLHJlcXVlc3Q6YixlcnJvcjpnLGxheWVyOmN9KX1mfHx0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoImdldGZlYXR1cmVpbmZvIix7dGV4dDpiLnJlc3BvbnNlVGV4dCxmZWF0dXJlczplLHJlcXVlc3Q6Yix4eTphLGxheWVyOmN9KX19LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuQ29udHJvbC5XTVRTR2V0RmVhdHVyZUluZm8ifSk7T3BlbkxheWVycy5Qcm90b2NvbC5DU1cudjJfMF8yPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Qcm90b2NvbCx7Zm9ybWF0T3B0aW9uczpudWxsLGluaXRpYWxpemU6ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5Qcm90b2NvbC5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLFthXSk7YS5mb3JtYXR8fCh0aGlzLmZvcm1hdD1uZXcgT3BlbkxheWVycy5Gb3JtYXQuQ1NXR2V0UmVjb3Jkcy52Ml8wXzIoT3BlbkxheWVycy5VdGlsLmV4dGVuZCh7fSx0aGlzLmZvcm1hdE9wdGlvbnMpKSl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLm9wdGlvbnMmJiF0aGlzLm9wdGlvbnMuZm9ybWF0JiZ0aGlzLmZvcm1hdC5kZXN0cm95KCk7dGhpcy5mb3JtYXQ9bnVsbDtPcGVuTGF5ZXJzLlByb3RvY29sLnByb3RvdHlwZS5kZXN0cm95LmFwcGx5KHRoaXMpfSxyZWFkOmZ1bmN0aW9uKGEpe2E9T3BlbkxheWVycy5VdGlsLmV4dGVuZCh7fSxhKTtPcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyhhLAp0aGlzLm9wdGlvbnN8fHt9KTt2YXIgYj1uZXcgT3BlbkxheWVycy5Qcm90b2NvbC5SZXNwb25zZSh7cmVxdWVzdFR5cGU6InJlYWQifSksYz10aGlzLmZvcm1hdC53cml0ZShhLnBhcmFtc3x8YSk7Yi5wcml2PU9wZW5MYXllcnMuUmVxdWVzdC5QT1NUKHt1cmw6YS51cmwsY2FsbGJhY2s6dGhpcy5jcmVhdGVDYWxsYmFjayh0aGlzLmhhbmRsZVJlYWQsYixhKSxwYXJhbXM6YS5wYXJhbXMsaGVhZGVyczphLmhlYWRlcnMsZGF0YTpjfSk7cmV0dXJuIGJ9LGhhbmRsZVJlYWQ6ZnVuY3Rpb24oYSxiKXtpZihiLmNhbGxiYWNrKXt2YXIgYz1hLnByaXY7MjAwPD1jLnN0YXR1cyYmMzAwPmMuc3RhdHVzPyhhLmRhdGE9dGhpcy5wYXJzZURhdGEoYyksYS5jb2RlPU9wZW5MYXllcnMuUHJvdG9jb2wuUmVzcG9uc2UuU1VDQ0VTUyk6YS5jb2RlPU9wZW5MYXllcnMuUHJvdG9jb2wuUmVzcG9uc2UuRkFJTFVSRTtiLmNhbGxiYWNrLmNhbGwoYi5zY29wZSxhKX19LHBhcnNlRGF0YTpmdW5jdGlvbihhKXt2YXIgYj0KYS5yZXNwb25zZVhNTDtiJiZiLmRvY3VtZW50RWxlbWVudHx8KGI9YS5yZXNwb25zZVRleHQpO3JldHVybiFifHwwPj1iLmxlbmd0aD9udWxsOnRoaXMuZm9ybWF0LnJlYWQoYil9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuUHJvdG9jb2wuQ1NXLnYyXzBfMiJ9KTtPcGVuTGF5ZXJzLkZvcm1hdC5XQ1NDYXBhYmlsaXRpZXMudjFfMV8wPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Gb3JtYXQuV0NTQ2FwYWJpbGl0aWVzLnYxLHtuYW1lc3BhY2VzOnt3Y3M6Imh0dHA6Ly93d3cub3Blbmdpcy5uZXQvd2NzLzEuMSIseGxpbms6Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiLHhzaToiaHR0cDovL3d3dy53My5vcmcvMjAwMS9YTUxTY2hlbWEtaW5zdGFuY2UiLG93czoiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9vd3MvMS4xIn0sZXJyb3JQcm9wZXJ0eToib3BlcmF0aW9uc01ldGFkYXRhIixyZWFkZXJzOnt3Y3M6T3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoe0NhcGFiaWxpdGllczpmdW5jdGlvbihhLGIpe3RoaXMucmVhZENoaWxkTm9kZXMoYSxiKX0sQ29udGVudHM6ZnVuY3Rpb24oYSxiKXtiLmNvbnRlbnRNZXRhZGF0YT1bXTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYi5jb250ZW50TWV0YWRhdGEpfSxDb3ZlcmFnZVN1bW1hcnk6ZnVuY3Rpb24oYSwKYil7dmFyIGM9e307dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGMpO2IucHVzaChjKX0sSWRlbnRpZmllcjpmdW5jdGlvbihhLGIpe2IuaWRlbnRpZmllcj10aGlzLmdldENoaWxkVmFsdWUoYSl9LFRpdGxlOmZ1bmN0aW9uKGEsYil7Yi50aXRsZT10aGlzLmdldENoaWxkVmFsdWUoYSl9LEFic3RyYWN0OmZ1bmN0aW9uKGEsYil7YlsiYWJzdHJhY3QiXT10aGlzLmdldENoaWxkVmFsdWUoYSl9LFN1cHBvcnRlZENSUzpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuZ2V0Q2hpbGRWYWx1ZShhKTtjJiYoYi5zdXBwb3J0ZWRDUlN8fChiLnN1cHBvcnRlZENSUz1bXSksYi5zdXBwb3J0ZWRDUlMucHVzaChjKSl9LFN1cHBvcnRlZEZvcm1hdDpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuZ2V0Q2hpbGRWYWx1ZShhKTtjJiYoYi5zdXBwb3J0ZWRGb3JtYXR8fChiLnN1cHBvcnRlZEZvcm1hdD1bXSksYi5zdXBwb3J0ZWRGb3JtYXQucHVzaChjKSl9fSxPcGVuTGF5ZXJzLkZvcm1hdC5XQ1NDYXBhYmlsaXRpZXMudjEucHJvdG90eXBlLnJlYWRlcnMud2NzKSwKb3dzOk9wZW5MYXllcnMuRm9ybWF0Lk9XU0NvbW1vbi52MV8xXzAucHJvdG90eXBlLnJlYWRlcnMub3dzfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkZvcm1hdC5XQ1NDYXBhYmlsaXRpZXMudjFfMV8wIn0pO09wZW5MYXllcnMuQ29udHJvbC5HcmF0aWN1bGU9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkNvbnRyb2wse2F1dG9BY3RpdmF0ZTohMCxpbnRlcnZhbHM6WzQ1LDMwLDIwLDEwLDUsMiwxLDAuNSwwLjIsMC4xLDAuMDUsMC4wMSwwLjAwNSwwLjAwMiwwLjAwMV0sZGlzcGxheUluTGF5ZXJTd2l0Y2hlcjohMCx2aXNpYmxlOiEwLG51bVBvaW50czo1MCx0YXJnZXRTaXplOjIwMCxsYXllck5hbWU6bnVsbCxsYWJlbGxlZDohMCxsYWJlbEZvcm1hdDoiZG0iLGxpbmVTeW1ib2xpemVyOntzdHJva2VDb2xvcjoiIzMzMyIsc3Ryb2tlV2lkdGg6MSxzdHJva2VPcGFjaXR5OjAuNX0sbGFiZWxTeW1ib2xpemVyOnt9LGdyYXRMYXllcjpudWxsLGluaXRpYWxpemU6ZnVuY3Rpb24oYSl7YT1hfHx7fTthLmxheWVyTmFtZT1hLmxheWVyTmFtZXx8T3BlbkxheWVycy5pMThuKCJHcmF0aWN1bGUiKTtPcGVuTGF5ZXJzLkNvbnRyb2wucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxbYV0pOwp0aGlzLmxhYmVsU3ltYm9saXplci5zdHJva2U9ITE7dGhpcy5sYWJlbFN5bWJvbGl6ZXIuZmlsbD0hMTt0aGlzLmxhYmVsU3ltYm9saXplci5sYWJlbD0iJHtsYWJlbH0iO3RoaXMubGFiZWxTeW1ib2xpemVyLmxhYmVsQWxpZ249IiR7bGFiZWxBbGlnbn0iO3RoaXMubGFiZWxTeW1ib2xpemVyLmxhYmVsWE9mZnNldD0iJHt4T2Zmc2V0fSI7dGhpcy5sYWJlbFN5bWJvbGl6ZXIubGFiZWxZT2Zmc2V0PSIke3lPZmZzZXR9In0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuZGVhY3RpdmF0ZSgpO09wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuZGVzdHJveS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5ncmF0TGF5ZXImJih0aGlzLmdyYXRMYXllci5kZXN0cm95KCksdGhpcy5ncmF0TGF5ZXI9bnVsbCl9LGRyYXc6ZnVuY3Rpb24oKXtPcGVuTGF5ZXJzLkNvbnRyb2wucHJvdG90eXBlLmRyYXcuYXBwbHkodGhpcyxhcmd1bWVudHMpO2lmKCF0aGlzLmdyYXRMYXllcil7dmFyIGE9bmV3IE9wZW5MYXllcnMuU3R5bGUoe30sCntydWxlczpbbmV3IE9wZW5MYXllcnMuUnVsZSh7c3ltYm9saXplcjp7UG9pbnQ6dGhpcy5sYWJlbFN5bWJvbGl6ZXIsTGluZTp0aGlzLmxpbmVTeW1ib2xpemVyfX0pXX0pO3RoaXMuZ3JhdExheWVyPW5ldyBPcGVuTGF5ZXJzLkxheWVyLlZlY3Rvcih0aGlzLmxheWVyTmFtZSx7c3R5bGVNYXA6bmV3IE9wZW5MYXllcnMuU3R5bGVNYXAoeyJkZWZhdWx0IjphfSksdmlzaWJpbGl0eTp0aGlzLnZpc2libGUsZGlzcGxheUluTGF5ZXJTd2l0Y2hlcjp0aGlzLmRpc3BsYXlJbkxheWVyU3dpdGNoZXJ9KX1yZXR1cm4gdGhpcy5kaXZ9LGFjdGl2YXRlOmZ1bmN0aW9uKCl7cmV0dXJuIE9wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuYWN0aXZhdGUuYXBwbHkodGhpcyxhcmd1bWVudHMpPyh0aGlzLm1hcC5hZGRMYXllcih0aGlzLmdyYXRMYXllciksdGhpcy5tYXAuZXZlbnRzLnJlZ2lzdGVyKCJtb3ZlZW5kIix0aGlzLHRoaXMudXBkYXRlKSx0aGlzLnVwZGF0ZSgpLCEwKTohMX0sZGVhY3RpdmF0ZTpmdW5jdGlvbigpe3JldHVybiBPcGVuTGF5ZXJzLkNvbnRyb2wucHJvdG90eXBlLmRlYWN0aXZhdGUuYXBwbHkodGhpcywKYXJndW1lbnRzKT8odGhpcy5tYXAuZXZlbnRzLnVucmVnaXN0ZXIoIm1vdmVlbmQiLHRoaXMsdGhpcy51cGRhdGUpLHRoaXMubWFwLnJlbW92ZUxheWVyKHRoaXMuZ3JhdExheWVyKSwhMCk6ITF9LHVwZGF0ZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMubWFwLmdldEV4dGVudCgpO2lmKGEpe3RoaXMuZ3JhdExheWVyLmRlc3Ryb3lGZWF0dXJlcygpO3ZhciBiPW5ldyBPcGVuTGF5ZXJzLlByb2plY3Rpb24oIkVQU0c6NDMyNiIpLGM9dGhpcy5tYXAuZ2V0UHJvamVjdGlvbk9iamVjdCgpLGQ9dGhpcy5tYXAuZ2V0UmVzb2x1dGlvbigpO2MucHJvaiYmImxvbmdsYXQiPT1jLnByb2oucHJvak5hbWUmJih0aGlzLm51bVBvaW50cz0xKTt2YXIgZT10aGlzLm1hcC5nZXRDZW50ZXIoKSxmPW5ldyBPcGVuTGF5ZXJzLlBpeGVsKGUubG9uLGUubGF0KTtPcGVuTGF5ZXJzLlByb2plY3Rpb24udHJhbnNmb3JtKGYsYyxiKTtmb3IodmFyIGU9dGhpcy50YXJnZXRTaXplKmQsZT1lKmUsZyxkPTA7ZDx0aGlzLmludGVydmFscy5sZW5ndGg7KytkKXtnPQp0aGlzLmludGVydmFsc1tkXTt2YXIgaD1nLzIsaz1mLm9mZnNldCh7eDotaCx5Oi1ofSksaD1mLm9mZnNldCh7eDpoLHk6aH0pO09wZW5MYXllcnMuUHJvamVjdGlvbi50cmFuc2Zvcm0oayxiLGMpO09wZW5MYXllcnMuUHJvamVjdGlvbi50cmFuc2Zvcm0oaCxiLGMpO2lmKChrLngtaC54KSooay54LWgueCkrKGsueS1oLnkpKihrLnktaC55KTw9ZSlicmVha31mLng9TWF0aC5mbG9vcihmLngvZykqZztmLnk9TWF0aC5mbG9vcihmLnkvZykqZzt2YXIgZD0wLGU9W2YuY2xvbmUoKV0saD1mLmNsb25lKCksbDtkbyBoPWgub2Zmc2V0KHt4OjAseTpnfSksbD1PcGVuTGF5ZXJzLlByb2plY3Rpb24udHJhbnNmb3JtKGguY2xvbmUoKSxiLGMpLGUudW5zaGlmdChoKTt3aGlsZShhLmNvbnRhaW5zUGl4ZWwobCkmJjFFMz4rK2QpO2g9Zi5jbG9uZSgpO2RvIGg9aC5vZmZzZXQoe3g6MCx5Oi1nfSksbD1PcGVuTGF5ZXJzLlByb2plY3Rpb24udHJhbnNmb3JtKGguY2xvbmUoKSxiLGMpLGUucHVzaChoKTsKd2hpbGUoYS5jb250YWluc1BpeGVsKGwpJiYxRTM+KytkKTtkPTA7az1bZi5jbG9uZSgpXTtoPWYuY2xvbmUoKTtkbyBoPWgub2Zmc2V0KHt4Oi1nLHk6MH0pLGw9T3BlbkxheWVycy5Qcm9qZWN0aW9uLnRyYW5zZm9ybShoLmNsb25lKCksYixjKSxrLnVuc2hpZnQoaCk7d2hpbGUoYS5jb250YWluc1BpeGVsKGwpJiYxRTM+KytkKTtoPWYuY2xvbmUoKTtkbyBoPWgub2Zmc2V0KHt4OmcseTowfSksbD1PcGVuTGF5ZXJzLlByb2plY3Rpb24udHJhbnNmb3JtKGguY2xvbmUoKSxiLGMpLGsucHVzaChoKTt3aGlsZShhLmNvbnRhaW5zUGl4ZWwobCkmJjFFMz4rK2QpO2c9W107Zm9yKGQ9MDtkPGsubGVuZ3RoOysrZCl7bD1rW2RdLng7Zm9yKHZhciBmPVtdLG09bnVsbCxuPU1hdGgubWluKGVbMF0ueSw5MCksaD1NYXRoLm1heChlW2UubGVuZ3RoLTFdLnksLTkwKSxwPShuLWgpL3RoaXMubnVtUG9pbnRzLG49aCxoPTA7aDw9dGhpcy5udW1Qb2ludHM7KytoKXt2YXIgcT1uZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludChsLApuKTtxLnRyYW5zZm9ybShiLGMpO2YucHVzaChxKTtuKz1wO3EueT49YS5ib3R0b20mJiFtJiYobT1xKX10aGlzLmxhYmVsbGVkJiYobT1uZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludChtLngsYS5ib3R0b20pLGw9e3ZhbHVlOmwsbGFiZWw6dGhpcy5sYWJlbGxlZD9PcGVuTGF5ZXJzLlV0aWwuZ2V0Rm9ybWF0dGVkTG9uTGF0KGwsImxvbiIsdGhpcy5sYWJlbEZvcm1hdCk6IiIsbGFiZWxBbGlnbjoiY2IiLHhPZmZzZXQ6MCx5T2Zmc2V0OjJ9LHRoaXMuZ3JhdExheWVyLmFkZEZlYXR1cmVzKG5ldyBPcGVuTGF5ZXJzLkZlYXR1cmUuVmVjdG9yKG0sbCkpKTtmPW5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LkxpbmVTdHJpbmcoZik7Zy5wdXNoKG5ldyBPcGVuTGF5ZXJzLkZlYXR1cmUuVmVjdG9yKGYpKX1mb3IoaD0wO2g8ZS5sZW5ndGg7KytoKWlmKG49ZVtoXS55LCEoLTkwPm58fDkwPG4pKXtmPVtdO2Q9a1swXS54O3A9KGtbay5sZW5ndGgtMV0ueC1kKS90aGlzLm51bVBvaW50czsKbD1kO209bnVsbDtmb3IoZD0wO2Q8PXRoaXMubnVtUG9pbnRzOysrZClxPW5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KGwsbikscS50cmFuc2Zvcm0oYixjKSxmLnB1c2gocSksbCs9cCxxLng8YS5yaWdodCYmKG09cSk7dGhpcy5sYWJlbGxlZCYmKG09bmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoYS5yaWdodCxtLnkpLGw9e3ZhbHVlOm4sbGFiZWw6dGhpcy5sYWJlbGxlZD9PcGVuTGF5ZXJzLlV0aWwuZ2V0Rm9ybWF0dGVkTG9uTGF0KG4sImxhdCIsdGhpcy5sYWJlbEZvcm1hdCk6IiIsbGFiZWxBbGlnbjoicmIiLHhPZmZzZXQ6LTIseU9mZnNldDoyfSx0aGlzLmdyYXRMYXllci5hZGRGZWF0dXJlcyhuZXcgT3BlbkxheWVycy5GZWF0dXJlLlZlY3RvcihtLGwpKSk7Zj1uZXcgT3BlbkxheWVycy5HZW9tZXRyeS5MaW5lU3RyaW5nKGYpO2cucHVzaChuZXcgT3BlbkxheWVycy5GZWF0dXJlLlZlY3RvcihmKSl9dGhpcy5ncmF0TGF5ZXIuYWRkRmVhdHVyZXMoZyl9fSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkNvbnRyb2wuR3JhdGljdWxlIn0pO09wZW5MYXllcnMuQ29uc29sZS53YXJuKCJPcGVuTGF5ZXJzLlJpY28gaXMgZGVwcmVjYXRlZCIpO09wZW5MYXllcnMuUmljbz1PcGVuTGF5ZXJzLlJpY298fHt9OwpPcGVuTGF5ZXJzLlJpY28uQ29ybmVyPXtyb3VuZDpmdW5jdGlvbihhLGIpe2E9T3BlbkxheWVycy5VdGlsLmdldEVsZW1lbnQoYSk7dGhpcy5fc2V0T3B0aW9ucyhiKTt2YXIgYz10aGlzLm9wdGlvbnMuY29sb3I7ImZyb21FbGVtZW50Ij09dGhpcy5vcHRpb25zLmNvbG9yJiYoYz10aGlzLl9iYWNrZ3JvdW5kKGEpKTt2YXIgZD10aGlzLm9wdGlvbnMuYmdDb2xvcjsiZnJvbVBhcmVudCI9PXRoaXMub3B0aW9ucy5iZ0NvbG9yJiYoZD10aGlzLl9iYWNrZ3JvdW5kKGEub2Zmc2V0UGFyZW50KSk7dGhpcy5fcm91bmRDb3JuZXJzSW1wbChhLGMsZCl9LGNoYW5nZUNvbG9yOmZ1bmN0aW9uKGEsYil7YS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3I9Yjtmb3IodmFyIGM9YS5wYXJlbnROb2RlLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJzcGFuIiksZD0wO2Q8Yy5sZW5ndGg7ZCsrKWNbZF0uc3R5bGUuYmFja2dyb3VuZENvbG9yPWJ9LGNoYW5nZU9wYWNpdHk6ZnVuY3Rpb24oYSxiKXt2YXIgYz0iYWxwaGEob3BhY2l0eT0iKwoxMDAqYisiKSI7YS5zdHlsZS5vcGFjaXR5PWI7YS5zdHlsZS5maWx0ZXI9Yztmb3IodmFyIGQ9YS5wYXJlbnROb2RlLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJzcGFuIiksZT0wO2U8ZC5sZW5ndGg7ZSsrKWRbZV0uc3R5bGUub3BhY2l0eT1iLGRbZV0uc3R5bGUuZmlsdGVyPWN9LHJlUm91bmQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLnBhcmVudE5vZGUuY2hpbGROb2Rlc1syXTthLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYS5wYXJlbnROb2RlLmNoaWxkTm9kZXNbMF0pO2EucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChjKTt0aGlzLnJvdW5kKGEucGFyZW50Tm9kZSxiKX0sX3JvdW5kQ29ybmVyc0ltcGw6ZnVuY3Rpb24oYSxiLGMpe3RoaXMub3B0aW9ucy5ib3JkZXImJnRoaXMuX3JlbmRlckJvcmRlcihhLGMpO3RoaXMuX2lzVG9wUm91bmRlZCgpJiZ0aGlzLl9yb3VuZFRvcENvcm5lcnMoYSxiLGMpO3RoaXMuX2lzQm90dG9tUm91bmRlZCgpJiZ0aGlzLl9yb3VuZEJvdHRvbUNvcm5lcnMoYSwKYixjKX0sX3JlbmRlckJvcmRlcjpmdW5jdGlvbihhLGIpe3ZhciBjPSIxcHggc29saWQgIit0aGlzLl9ib3JkZXJDb2xvcihiKTthLmlubmVySFRNTD0iPGRpdiAiKygic3R5bGU9J2JvcmRlci1sZWZ0OiAiK2MrIjsiKygiYm9yZGVyLXJpZ2h0OiAiK2MpKyInIikrIj4iK2EuaW5uZXJIVE1MKyI8L2Rpdj4ifSxfcm91bmRUb3BDb3JuZXJzOmZ1bmN0aW9uKGEsYixjKXtmb3IodmFyIGQ9dGhpcy5fY3JlYXRlQ29ybmVyKGMpLGU9MDtlPHRoaXMub3B0aW9ucy5udW1TbGljZXM7ZSsrKWQuYXBwZW5kQ2hpbGQodGhpcy5fY3JlYXRlQ29ybmVyU2xpY2UoYixjLGUsInRvcCIpKTthLnN0eWxlLnBhZGRpbmdUb3A9MDthLmluc2VydEJlZm9yZShkLGEuZmlyc3RDaGlsZCl9LF9yb3VuZEJvdHRvbUNvcm5lcnM6ZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZD10aGlzLl9jcmVhdGVDb3JuZXIoYyksZT10aGlzLm9wdGlvbnMubnVtU2xpY2VzLTE7MDw9ZTtlLS0pZC5hcHBlbmRDaGlsZCh0aGlzLl9jcmVhdGVDb3JuZXJTbGljZShiLApjLGUsImJvdHRvbSIpKTthLnN0eWxlLnBhZGRpbmdCb3R0b209MDthLmFwcGVuZENoaWxkKGQpfSxfY3JlYXRlQ29ybmVyOmZ1bmN0aW9uKGEpe3ZhciBiPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO2Iuc3R5bGUuYmFja2dyb3VuZENvbG9yPXRoaXMuX2lzVHJhbnNwYXJlbnQoKT8idHJhbnNwYXJlbnQiOmE7cmV0dXJuIGJ9LF9jcmVhdGVDb3JuZXJTbGljZTpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzcGFuIiksZj1lLnN0eWxlO2YuYmFja2dyb3VuZENvbG9yPWE7Zi5kaXNwbGF5PSJibG9jayI7Zi5oZWlnaHQ9IjFweCI7Zi5vdmVyZmxvdz0iaGlkZGVuIjtmLmZvbnRTaXplPSIxcHgiO2E9dGhpcy5fYm9yZGVyQ29sb3IoYSxiKTt0aGlzLm9wdGlvbnMuYm9yZGVyJiYwPT1jPyhmLmJvcmRlclRvcFN0eWxlPSJzb2xpZCIsZi5ib3JkZXJUb3BXaWR0aD0iMXB4IixmLmJvcmRlckxlZnRXaWR0aD0iMHB4IixmLmJvcmRlclJpZ2h0V2lkdGg9CiIwcHgiLGYuYm9yZGVyQm90dG9tV2lkdGg9IjBweCIsZi5oZWlnaHQ9IjBweCIsZi5ib3JkZXJDb2xvcj1hKTphJiYoZi5ib3JkZXJDb2xvcj1hLGYuYm9yZGVyU3R5bGU9InNvbGlkIixmLmJvcmRlcldpZHRoPSIwcHggMXB4Iik7dGhpcy5vcHRpb25zLmNvbXBhY3R8fGMhPXRoaXMub3B0aW9ucy5udW1TbGljZXMtMXx8KGYuaGVpZ2h0PSIycHgiKTt0aGlzLl9zZXRNYXJnaW4oZSxjLGQpO3RoaXMuX3NldEJvcmRlcihlLGMsZCk7cmV0dXJuIGV9LF9zZXRPcHRpb25zOmZ1bmN0aW9uKGEpe3RoaXMub3B0aW9ucz17Y29ybmVyczoiYWxsIixjb2xvcjoiZnJvbUVsZW1lbnQiLGJnQ29sb3I6ImZyb21QYXJlbnQiLGJsZW5kOiEwLGJvcmRlcjohMSxjb21wYWN0OiExfTtPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHRoaXMub3B0aW9ucyxhfHx7fSk7dGhpcy5vcHRpb25zLm51bVNsaWNlcz10aGlzLm9wdGlvbnMuY29tcGFjdD8yOjQ7dGhpcy5faXNUcmFuc3BhcmVudCgpJiYodGhpcy5vcHRpb25zLmJsZW5kPQohMSl9LF93aGljaFNpZGVUb3A6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faGFzU3RyaW5nKHRoaXMub3B0aW9ucy5jb3JuZXJzLCJhbGwiLCJ0b3AiKXx8MDw9dGhpcy5vcHRpb25zLmNvcm5lcnMuaW5kZXhPZigidGwiKSYmMDw9dGhpcy5vcHRpb25zLmNvcm5lcnMuaW5kZXhPZigidHIiKT8iIjowPD10aGlzLm9wdGlvbnMuY29ybmVycy5pbmRleE9mKCJ0bCIpPyJsZWZ0IjowPD10aGlzLm9wdGlvbnMuY29ybmVycy5pbmRleE9mKCJ0ciIpPyJyaWdodCI6IiJ9LF93aGljaFNpZGVCb3R0b206ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faGFzU3RyaW5nKHRoaXMub3B0aW9ucy5jb3JuZXJzLCJhbGwiLCJib3R0b20iKXx8MDw9dGhpcy5vcHRpb25zLmNvcm5lcnMuaW5kZXhPZigiYmwiKSYmMDw9dGhpcy5vcHRpb25zLmNvcm5lcnMuaW5kZXhPZigiYnIiKT8iIjowPD10aGlzLm9wdGlvbnMuY29ybmVycy5pbmRleE9mKCJibCIpPyJsZWZ0IjowPD10aGlzLm9wdGlvbnMuY29ybmVycy5pbmRleE9mKCJiciIpPwoicmlnaHQiOiIifSxfYm9yZGVyQ29sb3I6ZnVuY3Rpb24oYSxiKXtyZXR1cm4idHJhbnNwYXJlbnQiPT1hP2I6dGhpcy5vcHRpb25zLmJvcmRlcj90aGlzLm9wdGlvbnMuYm9yZGVyOnRoaXMub3B0aW9ucy5ibGVuZD90aGlzLl9ibGVuZChiLGEpOiIifSxfc2V0TWFyZ2luOmZ1bmN0aW9uKGEsYixjKXtiPXRoaXMuX21hcmdpblNpemUoYik7Yz0idG9wIj09Yz90aGlzLl93aGljaFNpZGVUb3AoKTp0aGlzLl93aGljaFNpZGVCb3R0b20oKTsibGVmdCI9PWM/KGEuc3R5bGUubWFyZ2luTGVmdD1iKyJweCIsYS5zdHlsZS5tYXJnaW5SaWdodD0iMHB4Iik6InJpZ2h0Ij09Yz8oYS5zdHlsZS5tYXJnaW5SaWdodD1iKyJweCIsYS5zdHlsZS5tYXJnaW5MZWZ0PSIwcHgiKTooYS5zdHlsZS5tYXJnaW5MZWZ0PWIrInB4IixhLnN0eWxlLm1hcmdpblJpZ2h0PWIrInB4Iil9LF9zZXRCb3JkZXI6ZnVuY3Rpb24oYSxiLGMpe2I9dGhpcy5fYm9yZGVyU2l6ZShiKTtjPSJ0b3AiPT1jP3RoaXMuX3doaWNoU2lkZVRvcCgpOgp0aGlzLl93aGljaFNpZGVCb3R0b20oKTsibGVmdCI9PWM/KGEuc3R5bGUuYm9yZGVyTGVmdFdpZHRoPWIrInB4IixhLnN0eWxlLmJvcmRlclJpZ2h0V2lkdGg9IjBweCIpOiJyaWdodCI9PWM/KGEuc3R5bGUuYm9yZGVyUmlnaHRXaWR0aD1iKyJweCIsYS5zdHlsZS5ib3JkZXJMZWZ0V2lkdGg9IjBweCIpOihhLnN0eWxlLmJvcmRlckxlZnRXaWR0aD1iKyJweCIsYS5zdHlsZS5ib3JkZXJSaWdodFdpZHRoPWIrInB4Iik7ITEhPXRoaXMub3B0aW9ucy5ib3JkZXImJihhLnN0eWxlLmJvcmRlckxlZnRXaWR0aD1iKyJweCIsYS5zdHlsZS5ib3JkZXJSaWdodFdpZHRoPWIrInB4Iil9LF9tYXJnaW5TaXplOmZ1bmN0aW9uKGEpe2lmKHRoaXMuX2lzVHJhbnNwYXJlbnQoKSlyZXR1cm4gMDt2YXIgYj1bNSwzLDIsMV0sYz1bMywyLDEsMF0sZD1bMiwxXSxlPVsxLDBdO3JldHVybiB0aGlzLm9wdGlvbnMuY29tcGFjdCYmdGhpcy5vcHRpb25zLmJsZW5kP2VbYV06dGhpcy5vcHRpb25zLmNvbXBhY3Q/CmRbYV06dGhpcy5vcHRpb25zLmJsZW5kP2NbYV06YlthXX0sX2JvcmRlclNpemU6ZnVuY3Rpb24oYSl7dmFyIGI9WzUsMywyLDFdLGM9WzIsMSwxLDFdLGQ9WzEsMF0sZT1bMCwyLDAsMF07cmV0dXJuIHRoaXMub3B0aW9ucy5jb21wYWN0JiYodGhpcy5vcHRpb25zLmJsZW5kfHx0aGlzLl9pc1RyYW5zcGFyZW50KCkpPzE6dGhpcy5vcHRpb25zLmNvbXBhY3Q/ZFthXTp0aGlzLm9wdGlvbnMuYmxlbmQ/Y1thXTp0aGlzLm9wdGlvbnMuYm9yZGVyP2VbYV06dGhpcy5faXNUcmFuc3BhcmVudCgpP2JbYV06MH0sX2hhc1N0cmluZzpmdW5jdGlvbihhKXtmb3IodmFyIGI9MTtiPGFyZ3VtZW50cy5sZW5ndGg7YisrKWlmKDA8PWEuaW5kZXhPZihhcmd1bWVudHNbYl0pKXJldHVybiEwO3JldHVybiExfSxfYmxlbmQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz1PcGVuTGF5ZXJzLlJpY28uQ29sb3IuY3JlYXRlRnJvbUhleChhKTtjLmJsZW5kKE9wZW5MYXllcnMuUmljby5Db2xvci5jcmVhdGVGcm9tSGV4KGIpKTsKcmV0dXJuIGN9LF9iYWNrZ3JvdW5kOmZ1bmN0aW9uKGEpe3RyeXtyZXR1cm4gT3BlbkxheWVycy5SaWNvLkNvbG9yLmNyZWF0ZUNvbG9yRnJvbUJhY2tncm91bmQoYSkuYXNIZXgoKX1jYXRjaChiKXtyZXR1cm4iI2ZmZmZmZiJ9fSxfaXNUcmFuc3BhcmVudDpmdW5jdGlvbigpe3JldHVybiJ0cmFuc3BhcmVudCI9PXRoaXMub3B0aW9ucy5jb2xvcn0sX2lzVG9wUm91bmRlZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9oYXNTdHJpbmcodGhpcy5vcHRpb25zLmNvcm5lcnMsImFsbCIsInRvcCIsInRsIiwidHIiKX0sX2lzQm90dG9tUm91bmRlZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9oYXNTdHJpbmcodGhpcy5vcHRpb25zLmNvcm5lcnMsImFsbCIsImJvdHRvbSIsImJsIiwiYnIiKX0sX2hhc1NpbmdsZVRleHRDaGlsZDpmdW5jdGlvbihhKXtyZXR1cm4gMT09YS5jaGlsZE5vZGVzLmxlbmd0aCYmMz09YS5jaGlsZE5vZGVzWzBdLm5vZGVUeXBlfX07T3BlbkxheWVycy5Db250cm9sLk5hdmlnYXRpb25IaXN0b3J5PU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Db250cm9sLHt0eXBlOk9wZW5MYXllcnMuQ29udHJvbC5UWVBFX1RPR0dMRSxwcmV2aW91czpudWxsLHByZXZpb3VzT3B0aW9uczpudWxsLG5leHQ6bnVsbCxuZXh0T3B0aW9uczpudWxsLGxpbWl0OjUwLGF1dG9BY3RpdmF0ZTohMCxjbGVhck9uRGVhY3RpdmF0ZTohMSxyZWdpc3RyeTpudWxsLG5leHRTdGFjazpudWxsLHByZXZpb3VzU3RhY2s6bnVsbCxsaXN0ZW5lcnM6bnVsbCxyZXN0b3Jpbmc6ITEsaW5pdGlhbGl6ZTpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLkNvbnRyb2wucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxbYV0pO3RoaXMucmVnaXN0cnk9T3BlbkxheWVycy5VdGlsLmV4dGVuZCh7bW92ZWVuZDp0aGlzLmdldFN0YXRlfSx0aGlzLnJlZ2lzdHJ5KTthPXt0cmlnZ2VyOk9wZW5MYXllcnMuRnVuY3Rpb24uYmluZCh0aGlzLnByZXZpb3VzVHJpZ2dlciwKdGhpcyksZGlzcGxheUNsYXNzOnRoaXMuZGlzcGxheUNsYXNzKyIgIit0aGlzLmRpc3BsYXlDbGFzcysiUHJldmlvdXMifTtPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKGEsdGhpcy5wcmV2aW91c09wdGlvbnMpO3RoaXMucHJldmlvdXM9bmV3IE9wZW5MYXllcnMuQ29udHJvbC5CdXR0b24oYSk7YT17dHJpZ2dlcjpPcGVuTGF5ZXJzLkZ1bmN0aW9uLmJpbmQodGhpcy5uZXh0VHJpZ2dlcix0aGlzKSxkaXNwbGF5Q2xhc3M6dGhpcy5kaXNwbGF5Q2xhc3MrIiAiK3RoaXMuZGlzcGxheUNsYXNzKyJOZXh0In07T3BlbkxheWVycy5VdGlsLmV4dGVuZChhLHRoaXMubmV4dE9wdGlvbnMpO3RoaXMubmV4dD1uZXcgT3BlbkxheWVycy5Db250cm9sLkJ1dHRvbihhKTt0aGlzLmNsZWFyKCl9LG9uUHJldmlvdXNDaGFuZ2U6ZnVuY3Rpb24oYSxiKXthJiYhdGhpcy5wcmV2aW91cy5hY3RpdmU/dGhpcy5wcmV2aW91cy5hY3RpdmF0ZSgpOiFhJiZ0aGlzLnByZXZpb3VzLmFjdGl2ZSYmdGhpcy5wcmV2aW91cy5kZWFjdGl2YXRlKCl9LApvbk5leHRDaGFuZ2U6ZnVuY3Rpb24oYSxiKXthJiYhdGhpcy5uZXh0LmFjdGl2ZT90aGlzLm5leHQuYWN0aXZhdGUoKTohYSYmdGhpcy5uZXh0LmFjdGl2ZSYmdGhpcy5uZXh0LmRlYWN0aXZhdGUoKX0sZGVzdHJveTpmdW5jdGlvbigpe09wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuZGVzdHJveS5hcHBseSh0aGlzKTt0aGlzLnByZXZpb3VzLmRlc3Ryb3koKTt0aGlzLm5leHQuZGVzdHJveSgpO3RoaXMuZGVhY3RpdmF0ZSgpO2Zvcih2YXIgYSBpbiB0aGlzKXRoaXNbYV09bnVsbH0sc2V0TWFwOmZ1bmN0aW9uKGEpe3RoaXMubWFwPWE7dGhpcy5uZXh0LnNldE1hcChhKTt0aGlzLnByZXZpb3VzLnNldE1hcChhKX0sZHJhdzpmdW5jdGlvbigpe09wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuZHJhdy5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5uZXh0LmRyYXcoKTt0aGlzLnByZXZpb3VzLmRyYXcoKX0scHJldmlvdXNUcmlnZ2VyOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5wcmV2aW91c1N0YWNrLnNoaWZ0KCksCmI9dGhpcy5wcmV2aW91c1N0YWNrLnNoaWZ0KCk7dm9pZCAwIT1iPyh0aGlzLm5leHRTdGFjay51bnNoaWZ0KGEpLHRoaXMucHJldmlvdXNTdGFjay51bnNoaWZ0KGIpLHRoaXMucmVzdG9yaW5nPSEwLHRoaXMucmVzdG9yZShiKSx0aGlzLnJlc3RvcmluZz0hMSx0aGlzLm9uTmV4dENoYW5nZSh0aGlzLm5leHRTdGFja1swXSx0aGlzLm5leHRTdGFjay5sZW5ndGgpLHRoaXMub25QcmV2aW91c0NoYW5nZSh0aGlzLnByZXZpb3VzU3RhY2tbMV0sdGhpcy5wcmV2aW91c1N0YWNrLmxlbmd0aC0xKSk6dGhpcy5wcmV2aW91c1N0YWNrLnVuc2hpZnQoYSk7cmV0dXJuIGJ9LG5leHRUcmlnZ2VyOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5uZXh0U3RhY2suc2hpZnQoKTt2b2lkIDAhPWEmJih0aGlzLnByZXZpb3VzU3RhY2sudW5zaGlmdChhKSx0aGlzLnJlc3RvcmluZz0hMCx0aGlzLnJlc3RvcmUoYSksdGhpcy5yZXN0b3Jpbmc9ITEsdGhpcy5vbk5leHRDaGFuZ2UodGhpcy5uZXh0U3RhY2tbMF0sCnRoaXMubmV4dFN0YWNrLmxlbmd0aCksdGhpcy5vblByZXZpb3VzQ2hhbmdlKHRoaXMucHJldmlvdXNTdGFja1sxXSx0aGlzLnByZXZpb3VzU3RhY2subGVuZ3RoLTEpKTtyZXR1cm4gYX0sY2xlYXI6ZnVuY3Rpb24oKXt0aGlzLnByZXZpb3VzU3RhY2s9W107dGhpcy5wcmV2aW91cy5kZWFjdGl2YXRlKCk7dGhpcy5uZXh0U3RhY2s9W107dGhpcy5uZXh0LmRlYWN0aXZhdGUoKX0sZ2V0U3RhdGU6ZnVuY3Rpb24oKXtyZXR1cm57Y2VudGVyOnRoaXMubWFwLmdldENlbnRlcigpLHJlc29sdXRpb246dGhpcy5tYXAuZ2V0UmVzb2x1dGlvbigpLHByb2plY3Rpb246dGhpcy5tYXAuZ2V0UHJvamVjdGlvbk9iamVjdCgpLHVuaXRzOnRoaXMubWFwLmdldFByb2plY3Rpb25PYmplY3QoKS5nZXRVbml0cygpfHx0aGlzLm1hcC51bml0c3x8dGhpcy5tYXAuYmFzZUxheWVyLnVuaXRzfX0scmVzdG9yZTpmdW5jdGlvbihhKXt2YXIgYixjO2lmKHRoaXMubWFwLmdldFByb2plY3Rpb25PYmplY3QoKT09CmEucHJvamVjdGlvbiljPXRoaXMubWFwLmdldFpvb21Gb3JSZXNvbHV0aW9uKGEucmVzb2x1dGlvbiksYj1hLmNlbnRlcjtlbHNle2I9YS5jZW50ZXIuY2xvbmUoKTtiLnRyYW5zZm9ybShhLnByb2plY3Rpb24sdGhpcy5tYXAuZ2V0UHJvamVjdGlvbk9iamVjdCgpKTtjPWEudW5pdHM7dmFyIGQ9dGhpcy5tYXAuZ2V0UHJvamVjdGlvbk9iamVjdCgpLmdldFVuaXRzKCl8fHRoaXMubWFwLnVuaXRzfHx0aGlzLm1hcC5iYXNlTGF5ZXIudW5pdHM7Yz10aGlzLm1hcC5nZXRab29tRm9yUmVzb2x1dGlvbigoYyYmZD9PcGVuTGF5ZXJzLklOQ0hFU19QRVJfVU5JVFtjXS9PcGVuTGF5ZXJzLklOQ0hFU19QRVJfVU5JVFtkXToxKSphLnJlc29sdXRpb24pfXRoaXMubWFwLnNldENlbnRlcihiLGMpfSxzZXRMaXN0ZW5lcnM6ZnVuY3Rpb24oKXt0aGlzLmxpc3RlbmVycz17fTtmb3IodmFyIGEgaW4gdGhpcy5yZWdpc3RyeSl0aGlzLmxpc3RlbmVyc1thXT1PcGVuTGF5ZXJzLkZ1bmN0aW9uLmJpbmQoZnVuY3Rpb24oKXtpZighdGhpcy5yZXN0b3Jpbmcpe3ZhciBiPQp0aGlzLnJlZ2lzdHJ5W2FdLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLnByZXZpb3VzU3RhY2sudW5zaGlmdChiKTtpZigxPHRoaXMucHJldmlvdXNTdGFjay5sZW5ndGgpdGhpcy5vblByZXZpb3VzQ2hhbmdlKHRoaXMucHJldmlvdXNTdGFja1sxXSx0aGlzLnByZXZpb3VzU3RhY2subGVuZ3RoLTEpO3RoaXMucHJldmlvdXNTdGFjay5sZW5ndGg+dGhpcy5saW1pdCsxJiZ0aGlzLnByZXZpb3VzU3RhY2sucG9wKCk7MDx0aGlzLm5leHRTdGFjay5sZW5ndGgmJih0aGlzLm5leHRTdGFjaz1bXSx0aGlzLm9uTmV4dENoYW5nZShudWxsLDApKX1yZXR1cm4hMH0sdGhpcyl9LGFjdGl2YXRlOmZ1bmN0aW9uKCl7dmFyIGE9ITE7aWYodGhpcy5tYXAmJk9wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuYWN0aXZhdGUuYXBwbHkodGhpcykpe251bGw9PXRoaXMubGlzdGVuZXJzJiZ0aGlzLnNldExpc3RlbmVycygpO2Zvcih2YXIgYiBpbiB0aGlzLmxpc3RlbmVycyl0aGlzLm1hcC5ldmVudHMucmVnaXN0ZXIoYiwKdGhpcyx0aGlzLmxpc3RlbmVyc1tiXSk7YT0hMDswPT10aGlzLnByZXZpb3VzU3RhY2subGVuZ3RoJiZ0aGlzLmluaXRTdGFjaygpfXJldHVybiBhfSxpbml0U3RhY2s6ZnVuY3Rpb24oKXt0aGlzLm1hcC5nZXRDZW50ZXIoKSYmdGhpcy5saXN0ZW5lcnMubW92ZWVuZCgpfSxkZWFjdGl2YXRlOmZ1bmN0aW9uKCl7dmFyIGE9ITE7aWYodGhpcy5tYXAmJk9wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuZGVhY3RpdmF0ZS5hcHBseSh0aGlzKSl7Zm9yKHZhciBiIGluIHRoaXMubGlzdGVuZXJzKXRoaXMubWFwLmV2ZW50cy51bnJlZ2lzdGVyKGIsdGhpcyx0aGlzLmxpc3RlbmVyc1tiXSk7dGhpcy5jbGVhck9uRGVhY3RpdmF0ZSYmdGhpcy5jbGVhcigpO2E9ITB9cmV0dXJuIGF9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuQ29udHJvbC5OYXZpZ2F0aW9uSGlzdG9yeSJ9KTtPcGVuTGF5ZXJzLkxheWVyLlVURkdyaWQ9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkxheWVyLlhZWix7aXNCYXNlTGF5ZXI6ITEscHJvamVjdGlvbjpuZXcgT3BlbkxheWVycy5Qcm9qZWN0aW9uKCJFUFNHOjkwMDkxMyIpLHVzZUpTT05QOiExLHRpbGVDbGFzczpPcGVuTGF5ZXJzLlRpbGUuVVRGR3JpZCxpbml0aWFsaXplOmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuTGF5ZXIuR3JpZC5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLFthLm5hbWUsYS51cmwse30sYV0pO3RoaXMudGlsZU9wdGlvbnM9T3BlbkxheWVycy5VdGlsLmV4dGVuZCh7dXRmZ3JpZFJlc29sdXRpb246dGhpcy51dGZncmlkUmVzb2x1dGlvbn0sdGhpcy50aWxlT3B0aW9ucyl9LGNyZWF0ZUJhY2tCdWZmZXI6ZnVuY3Rpb24oKXt9LGNsb25lOmZ1bmN0aW9uKGEpe251bGw9PWEmJihhPW5ldyBPcGVuTGF5ZXJzLkxheWVyLlVURkdyaWQodGhpcy5nZXRPcHRpb25zKCkpKTtyZXR1cm4gYT1PcGVuTGF5ZXJzLkxheWVyLkdyaWQucHJvdG90eXBlLmNsb25lLmFwcGx5KHRoaXMsClthXSl9LGdldEZlYXR1cmVJbmZvOmZ1bmN0aW9uKGEpe3ZhciBiPW51bGw7KGE9dGhpcy5nZXRUaWxlRGF0YShhKSkmJmEudGlsZSYmKGI9YS50aWxlLmdldEZlYXR1cmVJbmZvKGEuaSxhLmopKTtyZXR1cm4gYn0sZ2V0RmVhdHVyZUlkOmZ1bmN0aW9uKGEpe3ZhciBiPW51bGw7YT10aGlzLmdldFRpbGVEYXRhKGEpO2EudGlsZSYmKGI9YS50aWxlLmdldEZlYXR1cmVJZChhLmksYS5qKSk7cmV0dXJuIGJ9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuTGF5ZXIuVVRGR3JpZCJ9KTtPcGVuTGF5ZXJzLlRpbGVNYW5hZ2VyPU9wZW5MYXllcnMuQ2xhc3Moe2NhY2hlU2l6ZToyNTYsdGlsZXNQZXJGcmFtZToyLGZyYW1lRGVsYXk6MTYsbW92ZURlbGF5OjEwMCx6b29tRGVsYXk6MjAwLG1hcHM6bnVsbCx0aWxlUXVldWVJZDpudWxsLHRpbGVRdWV1ZTpudWxsLHRpbGVDYWNoZTpudWxsLHRpbGVDYWNoZUluZGV4Om51bGwsaW5pdGlhbGl6ZTpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHRoaXMsYSk7dGhpcy5tYXBzPVtdO3RoaXMudGlsZVF1ZXVlSWQ9e307dGhpcy50aWxlUXVldWU9e307dGhpcy50aWxlQ2FjaGU9e307dGhpcy50aWxlQ2FjaGVJbmRleD1bXX0sYWRkTWFwOmZ1bmN0aW9uKGEpe2lmKCF0aGlzLl9kZXN0cm95ZWQmJk9wZW5MYXllcnMuTGF5ZXIuR3JpZCl7dGhpcy5tYXBzLnB1c2goYSk7dGhpcy50aWxlUXVldWVbYS5pZF09W107Zm9yKHZhciBiPTAsYz1hLmxheWVycy5sZW5ndGg7YjxjOysrYil0aGlzLmFkZExheWVyKHtsYXllcjphLmxheWVyc1tiXX0pOwphLmV2ZW50cy5vbih7bW92ZTp0aGlzLm1vdmUsem9vbWVuZDp0aGlzLnpvb21FbmQsY2hhbmdlbGF5ZXI6dGhpcy5jaGFuZ2VMYXllcixhZGRsYXllcjp0aGlzLmFkZExheWVyLHByZXJlbW92ZWxheWVyOnRoaXMucmVtb3ZlTGF5ZXIsc2NvcGU6dGhpc30pfX0scmVtb3ZlTWFwOmZ1bmN0aW9uKGEpe2lmKCF0aGlzLl9kZXN0cm95ZWQmJk9wZW5MYXllcnMuTGF5ZXIuR3JpZCl7d2luZG93LmNsZWFyVGltZW91dCh0aGlzLnRpbGVRdWV1ZUlkW2EuaWRdKTtpZihhLmxheWVycylmb3IodmFyIGI9MCxjPWEubGF5ZXJzLmxlbmd0aDtiPGM7KytiKXRoaXMucmVtb3ZlTGF5ZXIoe2xheWVyOmEubGF5ZXJzW2JdfSk7YS5ldmVudHMmJmEuZXZlbnRzLnVuKHttb3ZlOnRoaXMubW92ZSx6b29tZW5kOnRoaXMuem9vbUVuZCxjaGFuZ2VsYXllcjp0aGlzLmNoYW5nZUxheWVyLGFkZGxheWVyOnRoaXMuYWRkTGF5ZXIscHJlcmVtb3ZlbGF5ZXI6dGhpcy5yZW1vdmVMYXllcixzY29wZTp0aGlzfSk7CmRlbGV0ZSB0aGlzLnRpbGVRdWV1ZVthLmlkXTtkZWxldGUgdGhpcy50aWxlUXVldWVJZFthLmlkXTtPcGVuTGF5ZXJzLlV0aWwucmVtb3ZlSXRlbSh0aGlzLm1hcHMsYSl9fSxtb3ZlOmZ1bmN0aW9uKGEpe3RoaXMudXBkYXRlVGltZW91dChhLm9iamVjdCx0aGlzLm1vdmVEZWxheSwhMCl9LHpvb21FbmQ6ZnVuY3Rpb24oYSl7dGhpcy51cGRhdGVUaW1lb3V0KGEub2JqZWN0LHRoaXMuem9vbURlbGF5KX0sY2hhbmdlTGF5ZXI6ZnVuY3Rpb24oYSl7InZpc2liaWxpdHkiIT09YS5wcm9wZXJ0eSYmInBhcmFtcyIhPT1hLnByb3BlcnR5fHx0aGlzLnVwZGF0ZVRpbWVvdXQoYS5vYmplY3QsMCl9LGFkZExheWVyOmZ1bmN0aW9uKGEpe2E9YS5sYXllcjtpZihhIGluc3RhbmNlb2YgT3BlbkxheWVycy5MYXllci5HcmlkKXthLmV2ZW50cy5vbih7YWRkdGlsZTp0aGlzLmFkZFRpbGUscmV0aWxlOnRoaXMuY2xlYXJUaWxlUXVldWUsc2NvcGU6dGhpc30pO3ZhciBiLGMsZDtmb3IoYj1hLmdyaWQubGVuZ3RoLQoxOzA8PWI7LS1iKWZvcihjPWEuZ3JpZFtiXS5sZW5ndGgtMTswPD1jOy0tYylkPWEuZ3JpZFtiXVtjXSx0aGlzLmFkZFRpbGUoe3RpbGU6ZH0pLGQudXJsJiYhZC5pbWdEaXYmJnRoaXMubWFuYWdlVGlsZUNhY2hlKHtvYmplY3Q6ZH0pfX0scmVtb3ZlTGF5ZXI6ZnVuY3Rpb24oYSl7YT1hLmxheWVyO2lmKGEgaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLkxheWVyLkdyaWQmJih0aGlzLmNsZWFyVGlsZVF1ZXVlKHtvYmplY3Q6YX0pLGEuZXZlbnRzJiZhLmV2ZW50cy51bih7YWRkdGlsZTp0aGlzLmFkZFRpbGUscmV0aWxlOnRoaXMuY2xlYXJUaWxlUXVldWUsc2NvcGU6dGhpc30pLGEuZ3JpZCkpe3ZhciBiLGMsZDtmb3IoYj1hLmdyaWQubGVuZ3RoLTE7MDw9YjstLWIpZm9yKGM9YS5ncmlkW2JdLmxlbmd0aC0xOzA8PWM7LS1jKWQ9YS5ncmlkW2JdW2NdLHRoaXMudW5sb2FkVGlsZSh7b2JqZWN0OmR9KX19LHVwZGF0ZVRpbWVvdXQ6ZnVuY3Rpb24oYSxiLGMpe3dpbmRvdy5jbGVhclRpbWVvdXQodGhpcy50aWxlUXVldWVJZFthLmlkXSk7CnZhciBkPXRoaXMudGlsZVF1ZXVlW2EuaWRdO2lmKCFjfHxkLmxlbmd0aCl0aGlzLnRpbGVRdWV1ZUlkW2EuaWRdPXdpbmRvdy5zZXRUaW1lb3V0KE9wZW5MYXllcnMuRnVuY3Rpb24uYmluZChmdW5jdGlvbigpe3RoaXMuZHJhd1RpbGVzRnJvbVF1ZXVlKGEpO2QubGVuZ3RoJiZ0aGlzLnVwZGF0ZVRpbWVvdXQoYSx0aGlzLmZyYW1lRGVsYXkpfSx0aGlzKSxiKX0sYWRkVGlsZTpmdW5jdGlvbihhKXtpZihhLnRpbGUgaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLlRpbGUuSW1hZ2UpYS50aWxlLmV2ZW50cy5vbih7YmVmb3JlZHJhdzp0aGlzLnF1ZXVlVGlsZURyYXcsYmVmb3JlbG9hZDp0aGlzLm1hbmFnZVRpbGVDYWNoZSxsb2FkZW5kOnRoaXMuYWRkVG9DYWNoZSx1bmxvYWQ6dGhpcy51bmxvYWRUaWxlLHNjb3BlOnRoaXN9KTtlbHNlIHRoaXMucmVtb3ZlTGF5ZXIoe2xheWVyOmEudGlsZS5sYXllcn0pfSx1bmxvYWRUaWxlOmZ1bmN0aW9uKGEpe2E9YS5vYmplY3Q7YS5ldmVudHMudW4oe2JlZm9yZWRyYXc6dGhpcy5xdWV1ZVRpbGVEcmF3LApiZWZvcmVsb2FkOnRoaXMubWFuYWdlVGlsZUNhY2hlLGxvYWRlbmQ6dGhpcy5hZGRUb0NhY2hlLHVubG9hZDp0aGlzLnVubG9hZFRpbGUsc2NvcGU6dGhpc30pO09wZW5MYXllcnMuVXRpbC5yZW1vdmVJdGVtKHRoaXMudGlsZVF1ZXVlW2EubGF5ZXIubWFwLmlkXSxhKX0scXVldWVUaWxlRHJhdzpmdW5jdGlvbihhKXthPWEub2JqZWN0O3ZhciBiPSExLGM9YS5sYXllcixkPWMuZ2V0VVJMKGEuYm91bmRzKSxlPXRoaXMudGlsZUNhY2hlW2RdO2UmJiJvbFRpbGVJbWFnZSIhPT1lLmNsYXNzTmFtZSYmKGRlbGV0ZSB0aGlzLnRpbGVDYWNoZVtkXSxPcGVuTGF5ZXJzLlV0aWwucmVtb3ZlSXRlbSh0aGlzLnRpbGVDYWNoZUluZGV4LGQpLGU9bnVsbCk7IWMudXJsfHwhYy5hc3luYyYmZXx8KGI9dGhpcy50aWxlUXVldWVbYy5tYXAuaWRdLH5PcGVuTGF5ZXJzLlV0aWwuaW5kZXhPZihiLGEpfHxiLnB1c2goYSksYj0hMCk7cmV0dXJuIWJ9LGRyYXdUaWxlc0Zyb21RdWV1ZTpmdW5jdGlvbihhKXt2YXIgYj0KdGhpcy50aWxlUXVldWVbYS5pZF0sYz10aGlzLnRpbGVzUGVyRnJhbWU7Zm9yKGE9YS56b29tVHdlZW4mJmEuem9vbVR3ZWVuLnBsYXlpbmc7IWEmJmIubGVuZ3RoJiZjOyliLnNoaWZ0KCkuZHJhdyghMCksLS1jfSxtYW5hZ2VUaWxlQ2FjaGU6ZnVuY3Rpb24oYSl7YT1hLm9iamVjdDt2YXIgYj10aGlzLnRpbGVDYWNoZVthLnVybF07YiYmKGIucGFyZW50Tm9kZSYmT3BlbkxheWVycy5FbGVtZW50Lmhhc0NsYXNzKGIucGFyZW50Tm9kZSwib2xCYWNrQnVmZmVyIikmJihiLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYiksYi5pZD1udWxsKSxiLnBhcmVudE5vZGV8fChiLnN0eWxlLnZpc2liaWxpdHk9ImhpZGRlbiIsYi5zdHlsZS5vcGFjaXR5PTAsYS5zZXRJbWFnZShiKSxPcGVuTGF5ZXJzLlV0aWwucmVtb3ZlSXRlbSh0aGlzLnRpbGVDYWNoZUluZGV4LGEudXJsKSx0aGlzLnRpbGVDYWNoZUluZGV4LnB1c2goYS51cmwpKSl9LGFkZFRvQ2FjaGU6ZnVuY3Rpb24oYSl7YT1hLm9iamVjdDsKdGhpcy50aWxlQ2FjaGVbYS51cmxdfHxPcGVuTGF5ZXJzLkVsZW1lbnQuaGFzQ2xhc3MoYS5pbWdEaXYsIm9sSW1hZ2VMb2FkRXJyb3IiKXx8KHRoaXMudGlsZUNhY2hlSW5kZXgubGVuZ3RoPj10aGlzLmNhY2hlU2l6ZSYmKGRlbGV0ZSB0aGlzLnRpbGVDYWNoZVt0aGlzLnRpbGVDYWNoZUluZGV4WzBdXSx0aGlzLnRpbGVDYWNoZUluZGV4LnNoaWZ0KCkpLHRoaXMudGlsZUNhY2hlW2EudXJsXT1hLmltZ0Rpdix0aGlzLnRpbGVDYWNoZUluZGV4LnB1c2goYS51cmwpKX0sY2xlYXJUaWxlUXVldWU6ZnVuY3Rpb24oYSl7YT1hLm9iamVjdDtmb3IodmFyIGI9dGhpcy50aWxlUXVldWVbYS5tYXAuaWRdLGM9Yi5sZW5ndGgtMTswPD1jOy0tYyliW2NdLmxheWVyPT09YSYmYi5zcGxpY2UoYywxKX0sZGVzdHJveTpmdW5jdGlvbigpe2Zvcih2YXIgYT10aGlzLm1hcHMubGVuZ3RoLTE7MDw9YTstLWEpdGhpcy5yZW1vdmVNYXAodGhpcy5tYXBzW2FdKTt0aGlzLnRpbGVDYWNoZUluZGV4PXRoaXMudGlsZUNhY2hlPQp0aGlzLnRpbGVRdWV1ZUlkPXRoaXMudGlsZVF1ZXVlPXRoaXMubWFwcz1udWxsO3RoaXMuX2Rlc3Ryb3llZD0hMH19KTtPcGVuTGF5ZXJzLkxheWVyLkFyY0dJU0NhY2hlPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5MYXllci5YWVose3VybDpudWxsLHRpbGVPcmlnaW46bnVsbCx0aWxlU2l6ZTpuZXcgT3BlbkxheWVycy5TaXplKDI1NiwyNTYpLHVzZUFyY0dJU1NlcnZlcjohMCx0eXBlOiJwbmciLHVzZVNjYWxlczohMSxvdmVycmlkZURQSTohMSxpbml0aWFsaXplOmZ1bmN0aW9uKGEsYixjKXtPcGVuTGF5ZXJzLkxheWVyLlhZWi5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5yZXNvbHV0aW9ucyYmKHRoaXMuc2VydmVyUmVzb2x1dGlvbnM9dGhpcy5yZXNvbHV0aW9ucyx0aGlzLm1heEV4dGVudD10aGlzLmdldE1heEV4dGVudEZvclJlc29sdXRpb24odGhpcy5yZXNvbHV0aW9uc1swXSkpO2lmKHRoaXMubGF5ZXJJbmZvKXt2YXIgZD10aGlzLmxheWVySW5mbyxlPW5ldyBPcGVuTGF5ZXJzLkJvdW5kcyhkLmZ1bGxFeHRlbnQueG1pbixkLmZ1bGxFeHRlbnQueW1pbiwKZC5mdWxsRXh0ZW50LnhtYXgsZC5mdWxsRXh0ZW50LnltYXgpO3RoaXMucHJvamVjdGlvbj0iRVBTRzoiK2Quc3BhdGlhbFJlZmVyZW5jZS53a2lkO3RoaXMuc3BoZXJpY2FsTWVyY2F0b3I9MTAyMTAwPT1kLnNwYXRpYWxSZWZlcmVuY2Uud2tpZDt0aGlzLnVuaXRzPSJlc3JpRmVldCI9PWQudW5pdHM/ImZ0IjoibSI7aWYoZC50aWxlSW5mbyl7dGhpcy50aWxlU2l6ZT1uZXcgT3BlbkxheWVycy5TaXplKGQudGlsZUluZm8ud2lkdGh8fGQudGlsZUluZm8uY29scyxkLnRpbGVJbmZvLmhlaWdodHx8ZC50aWxlSW5mby5yb3dzKTt0aGlzLnRpbGVPcmlnaW49bmV3IE9wZW5MYXllcnMuTG9uTGF0KGQudGlsZUluZm8ub3JpZ2luLngsZC50aWxlSW5mby5vcmlnaW4ueSk7dmFyIGY9bmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoZS5sZWZ0LGUudG9wKSxlPW5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KGUucmlnaHQsZS5ib3R0b20pO3RoaXMudXNlU2NhbGVzP3RoaXMuc2NhbGVzPQpbXTp0aGlzLnJlc29sdXRpb25zPVtdO3RoaXMubG9kcz1bXTtmb3IodmFyIGcgaW4gZC50aWxlSW5mby5sb2RzKWlmKGQudGlsZUluZm8ubG9kcy5oYXNPd25Qcm9wZXJ0eShnKSl7dmFyIGg9ZC50aWxlSW5mby5sb2RzW2ddO3RoaXMudXNlU2NhbGVzP3RoaXMuc2NhbGVzLnB1c2goaC5zY2FsZSk6dGhpcy5yZXNvbHV0aW9ucy5wdXNoKGgucmVzb2x1dGlvbik7dmFyIGs9dGhpcy5nZXRDb250YWluaW5nVGlsZUNvb3JkcyhmLGgucmVzb2x1dGlvbik7aC5zdGFydFRpbGVDb2w9ay54O2guc3RhcnRUaWxlUm93PWsueTtrPXRoaXMuZ2V0Q29udGFpbmluZ1RpbGVDb29yZHMoZSxoLnJlc29sdXRpb24pO2guZW5kVGlsZUNvbD1rLng7aC5lbmRUaWxlUm93PWsueTt0aGlzLmxvZHMucHVzaChoKX10aGlzLm1heEV4dGVudD10aGlzLmNhbGN1bGF0ZU1heEV4dGVudFdpdGhMT0QodGhpcy5sb2RzWzBdKTt0aGlzLnNlcnZlclJlc29sdXRpb25zPXRoaXMucmVzb2x1dGlvbnM7dGhpcy5vdmVycmlkZURQSSYmCmQudGlsZUluZm8uZHBpJiYoT3BlbkxheWVycy5ET1RTX1BFUl9JTkNIPWQudGlsZUluZm8uZHBpKX19fSxnZXRDb250YWluaW5nVGlsZUNvb3JkczpmdW5jdGlvbihhLGIpe3JldHVybiBuZXcgT3BlbkxheWVycy5QaXhlbChNYXRoLm1heChNYXRoLmZsb29yKChhLngtdGhpcy50aWxlT3JpZ2luLmxvbikvKHRoaXMudGlsZVNpemUudypiKSksMCksTWF0aC5tYXgoTWF0aC5mbG9vcigodGhpcy50aWxlT3JpZ2luLmxhdC1hLnkpLyh0aGlzLnRpbGVTaXplLmgqYikpLDApKX0sY2FsY3VsYXRlTWF4RXh0ZW50V2l0aExPRDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLnRpbGVPcmlnaW4ubG9uK2Euc3RhcnRUaWxlQ29sKnRoaXMudGlsZVNpemUudyphLnJlc29sdXRpb24sYz10aGlzLnRpbGVPcmlnaW4ubGF0LWEuc3RhcnRUaWxlUm93KnRoaXMudGlsZVNpemUuaCphLnJlc29sdXRpb247cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLkJvdW5kcyhiLGMtKGEuZW5kVGlsZVJvdy1hLnN0YXJ0VGlsZVJvdysKMSkqdGhpcy50aWxlU2l6ZS5oKmEucmVzb2x1dGlvbixiKyhhLmVuZFRpbGVDb2wtYS5zdGFydFRpbGVDb2wrMSkqdGhpcy50aWxlU2l6ZS53KmEucmVzb2x1dGlvbixjKX0sY2FsY3VsYXRlTWF4RXh0ZW50V2l0aEV4dGVudDpmdW5jdGlvbihhLGIpe3ZhciBjPW5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KGEubGVmdCxhLnRvcCksZD1uZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludChhLnJpZ2h0LGEuYm90dG9tKSxjPXRoaXMuZ2V0Q29udGFpbmluZ1RpbGVDb29yZHMoYyxiKSxkPXRoaXMuZ2V0Q29udGFpbmluZ1RpbGVDb29yZHMoZCxiKTtyZXR1cm4gdGhpcy5jYWxjdWxhdGVNYXhFeHRlbnRXaXRoTE9EKHtyZXNvbHV0aW9uOmIsc3RhcnRUaWxlQ29sOmMueCxzdGFydFRpbGVSb3c6Yy55LGVuZFRpbGVDb2w6ZC54LGVuZFRpbGVSb3c6ZC55fSl9LGdldFVwcGVyTGVmdFRpbGVDb29yZDpmdW5jdGlvbihhKXt2YXIgYj1uZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludCh0aGlzLm1heEV4dGVudC5sZWZ0LAp0aGlzLm1heEV4dGVudC50b3ApO3JldHVybiB0aGlzLmdldENvbnRhaW5pbmdUaWxlQ29vcmRzKGIsYSl9LGdldExvd2VyUmlnaHRUaWxlQ29vcmQ6ZnVuY3Rpb24oYSl7dmFyIGI9bmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQodGhpcy5tYXhFeHRlbnQucmlnaHQsdGhpcy5tYXhFeHRlbnQuYm90dG9tKTtyZXR1cm4gdGhpcy5nZXRDb250YWluaW5nVGlsZUNvb3JkcyhiLGEpfSxnZXRNYXhFeHRlbnRGb3JSZXNvbHV0aW9uOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZ2V0VXBwZXJMZWZ0VGlsZUNvb3JkKGEpLGM9dGhpcy5nZXRMb3dlclJpZ2h0VGlsZUNvb3JkKGEpLGQ9dGhpcy50aWxlT3JpZ2luLmxvbitiLngqdGhpcy50aWxlU2l6ZS53KmEsZT10aGlzLnRpbGVPcmlnaW4ubGF0LWIueSp0aGlzLnRpbGVTaXplLmgqYTtyZXR1cm4gbmV3IE9wZW5MYXllcnMuQm91bmRzKGQsZS0oYy55LWIueSsxKSp0aGlzLnRpbGVTaXplLmgqYSxkKyhjLngtYi54KzEpKnRoaXMudGlsZVNpemUudyoKYSxlKX0sY2xvbmU6ZnVuY3Rpb24oYSl7bnVsbD09YSYmKGE9bmV3IE9wZW5MYXllcnMuTGF5ZXIuQXJjR0lTQ2FjaGUodGhpcy5uYW1lLHRoaXMudXJsLHRoaXMub3B0aW9ucykpO3JldHVybiBPcGVuTGF5ZXJzLkxheWVyLlhZWi5wcm90b3R5cGUuY2xvbmUuYXBwbHkodGhpcyxbYV0pfSxpbml0R3JpZGRlZFRpbGVzOmZ1bmN0aW9uKGEpe2RlbGV0ZSB0aGlzLl90aWxlT3JpZ2luO09wZW5MYXllcnMuTGF5ZXIuWFlaLnByb3RvdHlwZS5pbml0R3JpZGRlZFRpbGVzLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sZ2V0TWF4RXh0ZW50OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5tYXAuZ2V0UmVzb2x1dGlvbigpO3JldHVybiB0aGlzLm1heEV4dGVudD10aGlzLmdldE1heEV4dGVudEZvclJlc29sdXRpb24oYSl9LGdldFRpbGVPcmlnaW46ZnVuY3Rpb24oKXtpZighdGhpcy5fdGlsZU9yaWdpbil7dmFyIGE9dGhpcy5nZXRNYXhFeHRlbnQoKTt0aGlzLl90aWxlT3JpZ2luPW5ldyBPcGVuTGF5ZXJzLkxvbkxhdChhLmxlZnQsCmEuYm90dG9tKX1yZXR1cm4gdGhpcy5fdGlsZU9yaWdpbn0sZ2V0VVJMOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZ2V0UmVzb2x1dGlvbigpLGM9dGhpcy50aWxlT3JpZ2luLmxvbitiKnRoaXMudGlsZVNpemUudy8yLGQ9dGhpcy50aWxlT3JpZ2luLmxhdC1iKnRoaXMudGlsZVNpemUuaC8yO2E9YS5nZXRDZW50ZXJMb25MYXQoKTtjPU1hdGgucm91bmQoTWF0aC5hYnMoKGEubG9uLWMpLyhiKnRoaXMudGlsZVNpemUudykpKTtkPU1hdGgucm91bmQoTWF0aC5hYnMoKGQtYS5sYXQpLyhiKnRoaXMudGlsZVNpemUuaCkpKTthPXRoaXMubWFwLmdldFpvb20oKTtpZih0aGlzLmxvZHMpe2lmKGI9dGhpcy5sb2RzW3RoaXMubWFwLmdldFpvb20oKV0sYzxiLnN0YXJ0VGlsZUNvbHx8Yz5iLmVuZFRpbGVDb2x8fGQ8Yi5zdGFydFRpbGVSb3d8fGQ+Yi5lbmRUaWxlUm93KXJldHVybiBudWxsfWVsc2V7dmFyIGU9dGhpcy5nZXRVcHBlckxlZnRUaWxlQ29vcmQoYiksYj10aGlzLmdldExvd2VyUmlnaHRUaWxlQ29vcmQoYik7CmlmKGM8ZS54fHxjPj1iLnh8fGQ8ZS55fHxkPj1iLnkpcmV0dXJuIG51bGx9Yj10aGlzLnVybDtlPSIiK2MrZCthO09wZW5MYXllcnMuVXRpbC5pc0FycmF5KGIpJiYoYj10aGlzLnNlbGVjdFVybChlLGIpKTt0aGlzLnVzZUFyY0dJU1NlcnZlcj9iKz0iL3RpbGUvJHt6fS8ke3l9LyR7eH0iOihjPSJDIitPcGVuTGF5ZXJzLk51bWJlci56ZXJvUGFkKGMsOCwxNiksZD0iUiIrT3BlbkxheWVycy5OdW1iZXIuemVyb1BhZChkLDgsMTYpLGE9IkwiK09wZW5MYXllcnMuTnVtYmVyLnplcm9QYWQoYSwyLDEwKSxiPWIrIi8ke3p9LyR7eX0vJHt4fS4iK3RoaXMudHlwZSk7Yj1PcGVuTGF5ZXJzLlN0cmluZy5mb3JtYXQoYix7eDpjLHk6ZCx6OmF9KTtyZXR1cm4gT3BlbkxheWVycy5VdGlsLnVybEFwcGVuZChiLE9wZW5MYXllcnMuVXRpbC5nZXRQYXJhbWV0ZXJTdHJpbmcodGhpcy5wYXJhbXMpKX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5MYXllci5BcmNHSVNDYWNoZSJ9KTtPcGVuTGF5ZXJzLkNvbnRyb2wuV01TR2V0RmVhdHVyZUluZm89T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkNvbnRyb2wse2hvdmVyOiExLGRyaWxsRG93bjohMSxtYXhGZWF0dXJlczoxMCxjbGlja0NhbGxiYWNrOiJjbGljayIsb3V0cHV0OiJmZWF0dXJlcyIsbGF5ZXJzOm51bGwscXVlcnlWaXNpYmxlOiExLHVybDpudWxsLGxheWVyVXJsczpudWxsLGluZm9Gb3JtYXQ6InRleHQvaHRtbCIsdmVuZG9yUGFyYW1zOnt9LGZvcm1hdDpudWxsLGZvcm1hdE9wdGlvbnM6bnVsbCxoYW5kbGVyOm51bGwsaG92ZXJSZXF1ZXN0Om51bGwsaW5pdGlhbGl6ZTpmdW5jdGlvbihhKXthPWF8fHt9O2EuaGFuZGxlck9wdGlvbnM9YS5oYW5kbGVyT3B0aW9uc3x8e307T3BlbkxheWVycy5Db250cm9sLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsW2FdKTt0aGlzLmZvcm1hdHx8KHRoaXMuZm9ybWF0PW5ldyBPcGVuTGF5ZXJzLkZvcm1hdC5XTVNHZXRGZWF0dXJlSW5mbyhhLmZvcm1hdE9wdGlvbnMpKTsKITA9PT10aGlzLmRyaWxsRG93biYmKHRoaXMuaG92ZXI9ITEpO3RoaXMuaG92ZXI/dGhpcy5oYW5kbGVyPW5ldyBPcGVuTGF5ZXJzLkhhbmRsZXIuSG92ZXIodGhpcyx7bW92ZTp0aGlzLmNhbmNlbEhvdmVyLHBhdXNlOnRoaXMuZ2V0SW5mb0ZvckhvdmVyfSxPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHRoaXMuaGFuZGxlck9wdGlvbnMuaG92ZXJ8fHt9LHtkZWxheToyNTB9KSk6KGE9e30sYVt0aGlzLmNsaWNrQ2FsbGJhY2tdPXRoaXMuZ2V0SW5mb0ZvckNsaWNrLHRoaXMuaGFuZGxlcj1uZXcgT3BlbkxheWVycy5IYW5kbGVyLkNsaWNrKHRoaXMsYSx0aGlzLmhhbmRsZXJPcHRpb25zLmNsaWNrfHx7fSkpfSxnZXRJbmZvRm9yQ2xpY2s6ZnVuY3Rpb24oYSl7dGhpcy5ldmVudHMudHJpZ2dlckV2ZW50KCJiZWZvcmVnZXRmZWF0dXJlaW5mbyIse3h5OmEueHl9KTtPcGVuTGF5ZXJzLkVsZW1lbnQuYWRkQ2xhc3ModGhpcy5tYXAudmlld1BvcnREaXYsIm9sQ3Vyc29yV2FpdCIpO3RoaXMucmVxdWVzdChhLnh5LAp7fSl9LGdldEluZm9Gb3JIb3ZlcjpmdW5jdGlvbihhKXt0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoImJlZm9yZWdldGZlYXR1cmVpbmZvIix7eHk6YS54eX0pO3RoaXMucmVxdWVzdChhLnh5LHtob3ZlcjohMH0pfSxjYW5jZWxIb3ZlcjpmdW5jdGlvbigpe3RoaXMuaG92ZXJSZXF1ZXN0JiYodGhpcy5ob3ZlclJlcXVlc3QuYWJvcnQoKSx0aGlzLmhvdmVyUmVxdWVzdD1udWxsKX0sZmluZExheWVyczpmdW5jdGlvbigpe2Zvcih2YXIgYT10aGlzLmxheWVyc3x8dGhpcy5tYXAubGF5ZXJzLGI9W10sYyxkLGU9YS5sZW5ndGgtMTswPD1lOy0tZSljPWFbZV0sYyBpbnN0YW5jZW9mIE9wZW5MYXllcnMuTGF5ZXIuV01TJiYoIXRoaXMucXVlcnlWaXNpYmxlfHxjLmdldFZpc2liaWxpdHkoKSkmJihkPU9wZW5MYXllcnMuVXRpbC5pc0FycmF5KGMudXJsKT9jLnVybFswXTpjLnVybCwhMSE9PXRoaXMuZHJpbGxEb3dufHx0aGlzLnVybHx8KHRoaXMudXJsPWQpLCghMD09PXRoaXMuZHJpbGxEb3dufHwKdGhpcy51cmxNYXRjaGVzKGQpKSYmYi5wdXNoKGMpKTtyZXR1cm4gYn0sdXJsTWF0Y2hlczpmdW5jdGlvbihhKXt2YXIgYj1PcGVuTGF5ZXJzLlV0aWwuaXNFcXVpdmFsZW50VXJsKHRoaXMudXJsLGEpO2lmKCFiJiZ0aGlzLmxheWVyVXJscylmb3IodmFyIGM9MCxkPXRoaXMubGF5ZXJVcmxzLmxlbmd0aDtjPGQ7KytjKWlmKE9wZW5MYXllcnMuVXRpbC5pc0VxdWl2YWxlbnRVcmwodGhpcy5sYXllclVybHNbY10sYSkpe2I9ITA7YnJlYWt9cmV0dXJuIGJ9LGJ1aWxkV01TT3B0aW9uczpmdW5jdGlvbihhLGIsYyxkKXtmb3IodmFyIGU9W10sZj1bXSxnPTAsaD1iLmxlbmd0aDtnPGg7ZysrKW51bGwhPWJbZ10ucGFyYW1zLkxBWUVSUyYmKGU9ZS5jb25jYXQoYltnXS5wYXJhbXMuTEFZRVJTKSxmPWYuY29uY2F0KHRoaXMuZ2V0U3R5bGVOYW1lcyhiW2ddKSkpO2I9YlswXTtnPXRoaXMubWFwLmdldFByb2plY3Rpb24oKTsoaD1iLnByb2plY3Rpb24pJiZoLmVxdWFscyh0aGlzLm1hcC5nZXRQcm9qZWN0aW9uT2JqZWN0KCkpJiYKKGc9aC5nZXRDb2RlKCkpO2Q9T3BlbkxheWVycy5VdGlsLmV4dGVuZCh7c2VydmljZToiV01TIix2ZXJzaW9uOmIucGFyYW1zLlZFUlNJT04scmVxdWVzdDoiR2V0RmVhdHVyZUluZm8iLGV4Y2VwdGlvbnM6Yi5wYXJhbXMuRVhDRVBUSU9OUyxiYm94OnRoaXMubWFwLmdldEV4dGVudCgpLnRvQkJPWChudWxsLGIucmV2ZXJzZUF4aXNPcmRlcigpKSxmZWF0dXJlX2NvdW50OnRoaXMubWF4RmVhdHVyZXMsaGVpZ2h0OnRoaXMubWFwLmdldFNpemUoKS5oLHdpZHRoOnRoaXMubWFwLmdldFNpemUoKS53LGZvcm1hdDpkLGluZm9fZm9ybWF0OmIucGFyYW1zLklORk9fRk9STUFUfHx0aGlzLmluZm9Gb3JtYXR9LDEuMzw9cGFyc2VGbG9hdChiLnBhcmFtcy5WRVJTSU9OKT97Y3JzOmcsaTpwYXJzZUludChjLngpLGo6cGFyc2VJbnQoYy55KX06e3NyczpnLHg6cGFyc2VJbnQoYy54KSx5OnBhcnNlSW50KGMueSl9KTswIT1lLmxlbmd0aCYmKGQ9T3BlbkxheWVycy5VdGlsLmV4dGVuZCh7bGF5ZXJzOmUsCnF1ZXJ5X2xheWVyczplLHN0eWxlczpmfSxkKSk7T3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoZCx0aGlzLnZlbmRvclBhcmFtcyk7cmV0dXJue3VybDphLHBhcmFtczpPcGVuTGF5ZXJzLlV0aWwudXBwZXJDYXNlT2JqZWN0KGQpLGNhbGxiYWNrOmZ1bmN0aW9uKGIpe3RoaXMuaGFuZGxlUmVzcG9uc2UoYyxiLGEpfSxzY29wZTp0aGlzfX0sZ2V0U3R5bGVOYW1lczpmdW5jdGlvbihhKXtyZXR1cm4gYS5wYXJhbXMuU1RZTEVTP2EucGFyYW1zLlNUWUxFUzpPcGVuTGF5ZXJzLlV0aWwuaXNBcnJheShhLnBhcmFtcy5MQVlFUlMpP0FycmF5KGEucGFyYW1zLkxBWUVSUy5sZW5ndGgpOmEucGFyYW1zLkxBWUVSUy5yZXBsYWNlKC9bXixdL2csIiIpfSxyZXF1ZXN0OmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5maW5kTGF5ZXJzKCk7aWYoMD09Yy5sZW5ndGgpdGhpcy5ldmVudHMudHJpZ2dlckV2ZW50KCJub2dldGZlYXR1cmVpbmZvIiksT3BlbkxheWVycy5FbGVtZW50LnJlbW92ZUNsYXNzKHRoaXMubWFwLnZpZXdQb3J0RGl2LAoib2xDdXJzb3JXYWl0Iik7ZWxzZSBpZihiPWJ8fHt9LCExPT09dGhpcy5kcmlsbERvd24pe3ZhciBjPXRoaXMuYnVpbGRXTVNPcHRpb25zKHRoaXMudXJsLGMsYSxjWzBdLnBhcmFtcy5GT1JNQVQpLGQ9T3BlbkxheWVycy5SZXF1ZXN0LkdFVChjKTshMD09PWIuaG92ZXImJih0aGlzLmhvdmVyUmVxdWVzdD1kKX1lbHNle3RoaXMuX251bVJlcXVlc3RzPXRoaXMuX3JlcXVlc3RDb3VudD0wO3RoaXMuZmVhdHVyZXM9W107Zm9yKHZhciBkPXt9LGUsZj0wLGc9Yy5sZW5ndGg7ZjxnO2YrKyl7dmFyIGg9Y1tmXTtlPU9wZW5MYXllcnMuVXRpbC5pc0FycmF5KGgudXJsKT9oLnVybFswXTpoLnVybDtlIGluIGQ/ZFtlXS5wdXNoKGgpOih0aGlzLl9udW1SZXF1ZXN0cysrLGRbZV09W2hdKX1mb3IoZSBpbiBkKWM9ZFtlXSxjPXRoaXMuYnVpbGRXTVNPcHRpb25zKGUsYyxhLGNbMF0ucGFyYW1zLkZPUk1BVCksT3BlbkxheWVycy5SZXF1ZXN0LkdFVChjKX19LHRyaWdnZXJHZXRGZWF0dXJlSW5mbzpmdW5jdGlvbihhLApiLGMpe3RoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgiZ2V0ZmVhdHVyZWluZm8iLHt0ZXh0OmEucmVzcG9uc2VUZXh0LGZlYXR1cmVzOmMscmVxdWVzdDphLHh5OmJ9KTtPcGVuTGF5ZXJzLkVsZW1lbnQucmVtb3ZlQ2xhc3ModGhpcy5tYXAudmlld1BvcnREaXYsIm9sQ3Vyc29yV2FpdCIpfSxoYW5kbGVSZXNwb25zZTpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9Yi5yZXNwb25zZVhNTDtkJiZkLmRvY3VtZW50RWxlbWVudHx8KGQ9Yi5yZXNwb25zZVRleHQpO2Q9dGhpcy5mb3JtYXQucmVhZChkKTshMT09PXRoaXMuZHJpbGxEb3duP3RoaXMudHJpZ2dlckdldEZlYXR1cmVJbmZvKGIsYSxkKToodGhpcy5fcmVxdWVzdENvdW50KyssdGhpcy5fZmVhdHVyZXM9Im9iamVjdCI9PT10aGlzLm91dHB1dD8odGhpcy5fZmVhdHVyZXN8fFtdKS5jb25jYXQoe3VybDpjLGZlYXR1cmVzOmR9KToodGhpcy5fZmVhdHVyZXN8fFtdKS5jb25jYXQoZCksdGhpcy5fcmVxdWVzdENvdW50PT09dGhpcy5fbnVtUmVxdWVzdHMmJgoodGhpcy50cmlnZ2VyR2V0RmVhdHVyZUluZm8oYixhLHRoaXMuX2ZlYXR1cmVzLmNvbmNhdCgpKSxkZWxldGUgdGhpcy5fZmVhdHVyZXMsZGVsZXRlIHRoaXMuX3JlcXVlc3RDb3VudCxkZWxldGUgdGhpcy5fbnVtUmVxdWVzdHMpKX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Db250cm9sLldNU0dldEZlYXR1cmVJbmZvIn0pO09wZW5MYXllcnMuRm9ybWF0LldNU0NhcGFiaWxpdGllcy52MV8zXzA9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkZvcm1hdC5XTVNDYXBhYmlsaXRpZXMudjFfMyx7dmVyc2lvbjoiMS4zLjAiLENMQVNTX05BTUU6Ik9wZW5MYXllcnMuRm9ybWF0LldNU0NhcGFiaWxpdGllcy52MV8zXzAifSk7T3BlbkxheWVycy5Gb3JtYXQuU09TR2V0RmVhdHVyZU9mSW50ZXJlc3Q9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkZvcm1hdC5YTUwse1ZFUlNJT046IjEuMC4wIixuYW1lc3BhY2VzOntzb3M6Imh0dHA6Ly93d3cub3Blbmdpcy5uZXQvc29zLzEuMCIsZ21sOiJodHRwOi8vd3d3Lm9wZW5naXMubmV0L2dtbCIsc2E6Imh0dHA6Ly93d3cub3Blbmdpcy5uZXQvc2FtcGxpbmcvMS4wIix4c2k6Imh0dHA6Ly93d3cudzMub3JnLzIwMDEvWE1MU2NoZW1hLWluc3RhbmNlIn0sc2NoZW1hTG9jYXRpb246Imh0dHA6Ly93d3cub3Blbmdpcy5uZXQvc29zLzEuMCBodHRwOi8vc2NoZW1hcy5vcGVuZ2lzLm5ldC9zb3MvMS4wLjAvc29zQWxsLnhzZCIsZGVmYXVsdFByZWZpeDoic29zIixyZWdFeGVzOnt0cmltU3BhY2U6L15ccyp8XHMqJC9nLHJlbW92ZVNwYWNlOi9ccyovZyxzcGxpdFNwYWNlOi9ccysvLHRyaW1Db21tYTovXHMqLFxzKi9nfSxyZWFkOmZ1bmN0aW9uKGEpeyJzdHJpbmciPT0KdHlwZW9mIGEmJihhPU9wZW5MYXllcnMuRm9ybWF0LlhNTC5wcm90b3R5cGUucmVhZC5hcHBseSh0aGlzLFthXSkpO2EmJjk9PWEubm9kZVR5cGUmJihhPWEuZG9jdW1lbnRFbGVtZW50KTt2YXIgYj17ZmVhdHVyZXM6W119O3RoaXMucmVhZE5vZGUoYSxiKTthPVtdO2Zvcih2YXIgYz0wLGQ9Yi5mZWF0dXJlcy5sZW5ndGg7YzxkO2MrKyl7dmFyIGU9Yi5mZWF0dXJlc1tjXTt0aGlzLmludGVybmFsUHJvamVjdGlvbiYmKHRoaXMuZXh0ZXJuYWxQcm9qZWN0aW9uJiZlLmNvbXBvbmVudHNbMF0pJiZlLmNvbXBvbmVudHNbMF0udHJhbnNmb3JtKHRoaXMuZXh0ZXJuYWxQcm9qZWN0aW9uLHRoaXMuaW50ZXJuYWxQcm9qZWN0aW9uKTtlPW5ldyBPcGVuTGF5ZXJzLkZlYXR1cmUuVmVjdG9yKGUuY29tcG9uZW50c1swXSxlLmF0dHJpYnV0ZXMpO2EucHVzaChlKX1yZXR1cm4gYX0scmVhZGVyczp7c2E6e1NhbXBsaW5nUG9pbnQ6ZnVuY3Rpb24oYSxiKXtpZighYi5hdHRyaWJ1dGVzKXt2YXIgYz0Ke2F0dHJpYnV0ZXM6e319O2IuZmVhdHVyZXMucHVzaChjKTtiPWN9Yi5hdHRyaWJ1dGVzLmlkPXRoaXMuZ2V0QXR0cmlidXRlTlMoYSx0aGlzLm5hbWVzcGFjZXMuZ21sLCJpZCIpO3RoaXMucmVhZENoaWxkTm9kZXMoYSxiKX0scG9zaXRpb246ZnVuY3Rpb24oYSxiKXt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYil9fSxnbWw6T3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoe0ZlYXR1cmVDb2xsZWN0aW9uOmZ1bmN0aW9uKGEsYil7dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGIpfSxmZWF0dXJlTWVtYmVyOmZ1bmN0aW9uKGEsYil7dmFyIGM9e2F0dHJpYnV0ZXM6e319O2IuZmVhdHVyZXMucHVzaChjKTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYyl9LG5hbWU6ZnVuY3Rpb24oYSxiKXtiLmF0dHJpYnV0ZXMubmFtZT10aGlzLmdldENoaWxkVmFsdWUoYSl9LHBvczpmdW5jdGlvbihhLGIpe3RoaXMuZXh0ZXJuYWxQcm9qZWN0aW9ufHwodGhpcy5leHRlcm5hbFByb2plY3Rpb249bmV3IE9wZW5MYXllcnMuUHJvamVjdGlvbihhLmdldEF0dHJpYnV0ZSgic3JzTmFtZSIpKSk7Ck9wZW5MYXllcnMuRm9ybWF0LkdNTC52My5wcm90b3R5cGUucmVhZGVycy5nbWwucG9zLmFwcGx5KHRoaXMsW2EsYl0pfX0sT3BlbkxheWVycy5Gb3JtYXQuR01MLnYzLnByb3RvdHlwZS5yZWFkZXJzLmdtbCl9LHdyaXRlcnM6e3Nvczp7R2V0RmVhdHVyZU9mSW50ZXJlc3Q6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygiR2V0RmVhdHVyZU9mSW50ZXJlc3QiLHthdHRyaWJ1dGVzOnt2ZXJzaW9uOnRoaXMuVkVSU0lPTixzZXJ2aWNlOiJTT1MiLCJ4c2k6c2NoZW1hTG9jYXRpb24iOnRoaXMuc2NoZW1hTG9jYXRpb259fSksYz0wLGQ9YS5mb2lzLmxlbmd0aDtjPGQ7YysrKXRoaXMud3JpdGVOb2RlKCJGZWF0dXJlT2ZJbnRlcmVzdElkIix7Zm9pOmEuZm9pc1tjXX0sYik7cmV0dXJuIGJ9LEZlYXR1cmVPZkludGVyZXN0SWQ6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygiRmVhdHVyZU9mSW50ZXJlc3RJZCIse3ZhbHVlOmEuZm9pfSl9fX0sCkNMQVNTX05BTUU6Ik9wZW5MYXllcnMuRm9ybWF0LlNPU0dldEZlYXR1cmVPZkludGVyZXN0In0pO09wZW5MYXllcnMuRm9ybWF0LlNPU0dldE9ic2VydmF0aW9uPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Gb3JtYXQuWE1MLHtuYW1lc3BhY2VzOntvd3M6Imh0dHA6Ly93d3cub3Blbmdpcy5uZXQvb3dzIixnbWw6Imh0dHA6Ly93d3cub3Blbmdpcy5uZXQvZ21sIixzb3M6Imh0dHA6Ly93d3cub3Blbmdpcy5uZXQvc29zLzEuMCIsb2djOiJodHRwOi8vd3d3Lm9wZW5naXMubmV0L29nYyIsb206Imh0dHA6Ly93d3cub3Blbmdpcy5uZXQvb20vMS4wIixzYToiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9zYW1wbGluZy8xLjAiLHhsaW5rOiJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIix4c2k6Imh0dHA6Ly93d3cudzMub3JnLzIwMDEvWE1MU2NoZW1hLWluc3RhbmNlIn0scmVnRXhlczp7dHJpbVNwYWNlOi9eXHMqfFxzKiQvZyxyZW1vdmVTcGFjZTovXHMqL2csc3BsaXRTcGFjZTovXHMrLyx0cmltQ29tbWE6L1xzKixccyovZ30sVkVSU0lPTjoiMS4wLjAiLHNjaGVtYUxvY2F0aW9uOiJodHRwOi8vd3d3Lm9wZW5naXMubmV0L3Nvcy8xLjAgaHR0cDovL3NjaGVtYXMub3Blbmdpcy5uZXQvc29zLzEuMC4wL3Nvc0dldE9ic2VydmF0aW9uLnhzZCIsCmRlZmF1bHRQcmVmaXg6InNvcyIscmVhZDpmdW5jdGlvbihhKXsic3RyaW5nIj09dHlwZW9mIGEmJihhPU9wZW5MYXllcnMuRm9ybWF0LlhNTC5wcm90b3R5cGUucmVhZC5hcHBseSh0aGlzLFthXSkpO2EmJjk9PWEubm9kZVR5cGUmJihhPWEuZG9jdW1lbnRFbGVtZW50KTt2YXIgYj17bWVhc3VyZW1lbnRzOltdLG9ic2VydmF0aW9uczpbXX07dGhpcy5yZWFkTm9kZShhLGIpO3JldHVybiBifSx3cml0ZTpmdW5jdGlvbihhKXthPXRoaXMud3JpdGVOb2RlKCJzb3M6R2V0T2JzZXJ2YXRpb24iLGEpO2Euc2V0QXR0cmlidXRlKCJ4bWxuczpvbSIsdGhpcy5uYW1lc3BhY2VzLm9tKTthLnNldEF0dHJpYnV0ZSgieG1sbnM6b2djIix0aGlzLm5hbWVzcGFjZXMub2djKTt0aGlzLnNldEF0dHJpYnV0ZU5TKGEsdGhpcy5uYW1lc3BhY2VzLnhzaSwieHNpOnNjaGVtYUxvY2F0aW9uIix0aGlzLnNjaGVtYUxvY2F0aW9uKTtyZXR1cm4gT3BlbkxheWVycy5Gb3JtYXQuWE1MLnByb3RvdHlwZS53cml0ZS5hcHBseSh0aGlzLApbYV0pfSxyZWFkZXJzOntvbTp7T2JzZXJ2YXRpb25Db2xsZWN0aW9uOmZ1bmN0aW9uKGEsYil7Yi5pZD10aGlzLmdldEF0dHJpYnV0ZU5TKGEsdGhpcy5uYW1lc3BhY2VzLmdtbCwiaWQiKTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYil9LG1lbWJlcjpmdW5jdGlvbihhLGIpe3RoaXMucmVhZENoaWxkTm9kZXMoYSxiKX0sTWVhc3VyZW1lbnQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz17fTtiLm1lYXN1cmVtZW50cy5wdXNoKGMpO3RoaXMucmVhZENoaWxkTm9kZXMoYSxjKX0sT2JzZXJ2YXRpb246ZnVuY3Rpb24oYSxiKXt2YXIgYz17fTtiLm9ic2VydmF0aW9ucy5wdXNoKGMpO3RoaXMucmVhZENoaWxkTm9kZXMoYSxjKX0sc2FtcGxpbmdUaW1lOmZ1bmN0aW9uKGEsYil7dmFyIGM9e307Yi5zYW1wbGluZ1RpbWU9Yzt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYyl9LG9ic2VydmVkUHJvcGVydHk6ZnVuY3Rpb24oYSxiKXtiLm9ic2VydmVkUHJvcGVydHk9dGhpcy5nZXRBdHRyaWJ1dGVOUyhhLHRoaXMubmFtZXNwYWNlcy54bGluaywKImhyZWYiKTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYil9LHByb2NlZHVyZTpmdW5jdGlvbihhLGIpe2IucHJvY2VkdXJlPXRoaXMuZ2V0QXR0cmlidXRlTlMoYSx0aGlzLm5hbWVzcGFjZXMueGxpbmssImhyZWYiKTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYil9LGZlYXR1cmVPZkludGVyZXN0OmZ1bmN0aW9uKGEsYil7dmFyIGM9e2ZlYXR1cmVzOltdfTtiLmZvaXM9W107Yi5mb2lzLnB1c2goYyk7dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGMpO2Zvcih2YXIgZD1bXSxlPTAsZj1jLmZlYXR1cmVzLmxlbmd0aDtlPGY7ZSsrKXt2YXIgZz1jLmZlYXR1cmVzW2VdO2QucHVzaChuZXcgT3BlbkxheWVycy5GZWF0dXJlLlZlY3RvcihnLmNvbXBvbmVudHNbMF0sZy5hdHRyaWJ1dGVzKSl9Yy5mZWF0dXJlcz1kfSxyZXN1bHQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz17fTtiLnJlc3VsdD1jOyIiIT09dGhpcy5nZXRDaGlsZFZhbHVlKGEpPyhjLnZhbHVlPXRoaXMuZ2V0Q2hpbGRWYWx1ZShhKSxjLnVvbT0KYS5nZXRBdHRyaWJ1dGUoInVvbSIpKTp0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYyl9fSxzYTpPcGVuTGF5ZXJzLkZvcm1hdC5TT1NHZXRGZWF0dXJlT2ZJbnRlcmVzdC5wcm90b3R5cGUucmVhZGVycy5zYSxnbWw6T3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoe1RpbWVJbnN0YW50OmZ1bmN0aW9uKGEsYil7dmFyIGM9e307Yi50aW1lSW5zdGFudD1jO3RoaXMucmVhZENoaWxkTm9kZXMoYSxjKX0sdGltZVBvc2l0aW9uOmZ1bmN0aW9uKGEsYil7Yi50aW1lUG9zaXRpb249dGhpcy5nZXRDaGlsZFZhbHVlKGEpfX0sT3BlbkxheWVycy5Gb3JtYXQuU09TR2V0RmVhdHVyZU9mSW50ZXJlc3QucHJvdG90eXBlLnJlYWRlcnMuZ21sKX0sd3JpdGVyczp7c29zOntHZXRPYnNlcnZhdGlvbjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoIkdldE9ic2VydmF0aW9uIix7YXR0cmlidXRlczp7dmVyc2lvbjp0aGlzLlZFUlNJT04sc2VydmljZToiU09TIn19KTt0aGlzLndyaXRlTm9kZSgib2ZmZXJpbmciLAphLGIpO2EuZXZlbnRUaW1lJiZ0aGlzLndyaXRlTm9kZSgiZXZlbnRUaW1lIixhLGIpO2Zvcih2YXIgYyBpbiBhLnByb2NlZHVyZXMpdGhpcy53cml0ZU5vZGUoInByb2NlZHVyZSIsYS5wcm9jZWR1cmVzW2NdLGIpO2Zvcih2YXIgZCBpbiBhLm9ic2VydmVkUHJvcGVydGllcyl0aGlzLndyaXRlTm9kZSgib2JzZXJ2ZWRQcm9wZXJ0eSIsYS5vYnNlcnZlZFByb3BlcnRpZXNbZF0sYik7YS5mb2kmJnRoaXMud3JpdGVOb2RlKCJmZWF0dXJlT2ZJbnRlcmVzdCIsYS5mb2ksYik7dGhpcy53cml0ZU5vZGUoInJlc3BvbnNlRm9ybWF0IixhLGIpO2EucmVzdWx0TW9kZWwmJnRoaXMud3JpdGVOb2RlKCJyZXN1bHRNb2RlbCIsYSxiKTthLnJlc3BvbnNlTW9kZSYmdGhpcy53cml0ZU5vZGUoInJlc3BvbnNlTW9kZSIsYSxiKTtyZXR1cm4gYn0sZmVhdHVyZU9mSW50ZXJlc3Q6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJmZWF0dXJlT2ZJbnRlcmVzdCIpO3RoaXMud3JpdGVOb2RlKCJPYmplY3RJRCIsCmEub2JqZWN0SWQsYik7cmV0dXJuIGJ9LE9iamVjdElEOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoIk9iamVjdElEIix7dmFsdWU6YX0pfSxyZXNwb25zZUZvcm1hdDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJyZXNwb25zZUZvcm1hdCIse3ZhbHVlOmEucmVzcG9uc2VGb3JtYXR9KX0scHJvY2VkdXJlOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoInByb2NlZHVyZSIse3ZhbHVlOmF9KX0sb2ZmZXJpbmc6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygib2ZmZXJpbmciLHt2YWx1ZTphLm9mZmVyaW5nfSl9LG9ic2VydmVkUHJvcGVydHk6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygib2JzZXJ2ZWRQcm9wZXJ0eSIse3ZhbHVlOmF9KX0sZXZlbnRUaW1lOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygiZXZlbnRUaW1lIik7CiJsYXRlc3QiPT09YS5ldmVudFRpbWUmJnRoaXMud3JpdGVOb2RlKCJvZ2M6VE1fRXF1YWxzIixhLGIpO3JldHVybiBifSxyZXN1bHRNb2RlbDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJyZXN1bHRNb2RlbCIse3ZhbHVlOmEucmVzdWx0TW9kZWx9KX0scmVzcG9uc2VNb2RlOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoInJlc3BvbnNlTW9kZSIse3ZhbHVlOmEucmVzcG9uc2VNb2RlfSl9fSxvZ2M6e1RNX0VxdWFsczpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoIm9nYzpUTV9FcXVhbHMiKTt0aGlzLndyaXRlTm9kZSgib2djOlByb3BlcnR5TmFtZSIse3Byb3BlcnR5OiJ1cm46b2djOmRhdGE6dGltZTppc284NjAxIn0sYik7ImxhdGVzdCI9PT1hLmV2ZW50VGltZSYmdGhpcy53cml0ZU5vZGUoImdtbDpUaW1lSW5zdGFudCIse3ZhbHVlOiJsYXRlc3QifSxiKTtyZXR1cm4gYn0sUHJvcGVydHlOYW1lOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoIm9nYzpQcm9wZXJ0eU5hbWUiLAp7dmFsdWU6YS5wcm9wZXJ0eX0pfX0sZ21sOntUaW1lSW5zdGFudDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoImdtbDpUaW1lSW5zdGFudCIpO3RoaXMud3JpdGVOb2RlKCJnbWw6dGltZVBvc2l0aW9uIixhLGIpO3JldHVybiBifSx0aW1lUG9zaXRpb246ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygiZ21sOnRpbWVQb3NpdGlvbiIse3ZhbHVlOmEudmFsdWV9KX19fSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkZvcm1hdC5TT1NHZXRPYnNlcnZhdGlvbiJ9KTtPcGVuTGF5ZXJzLkNvbnRyb2wuVVRGR3JpZD1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuQ29udHJvbCx7YXV0b0FjdGl2YXRlOiEwLGxheWVyczpudWxsLGRlZmF1bHRIYW5kbGVyT3B0aW9uczp7ZGVsYXk6MzAwLHBpeGVsVG9sZXJhbmNlOjQsc3RvcE1vdmU6ITEsc2luZ2xlOiEwLCJkb3VibGUiOiExLHN0b3BTaW5nbGU6ITEsc3RvcERvdWJsZTohMX0saGFuZGxlck1vZGU6ImNsaWNrIixzZXRIYW5kbGVyOmZ1bmN0aW9uKGEpe3RoaXMuaGFuZGxlck1vZGU9YTt0aGlzLnJlc2V0SGFuZGxlcigpfSxyZXNldEhhbmRsZXI6ZnVuY3Rpb24oKXt0aGlzLmhhbmRsZXImJih0aGlzLmhhbmRsZXIuZGVhY3RpdmF0ZSgpLHRoaXMuaGFuZGxlci5kZXN0cm95KCksdGhpcy5oYW5kbGVyPW51bGwpOyJob3ZlciI9PXRoaXMuaGFuZGxlck1vZGU/dGhpcy5oYW5kbGVyPW5ldyBPcGVuTGF5ZXJzLkhhbmRsZXIuSG92ZXIodGhpcyx7cGF1c2U6dGhpcy5oYW5kbGVFdmVudCxtb3ZlOnRoaXMucmVzZXR9LAp0aGlzLmhhbmRsZXJPcHRpb25zKToiY2xpY2siPT10aGlzLmhhbmRsZXJNb2RlP3RoaXMuaGFuZGxlcj1uZXcgT3BlbkxheWVycy5IYW5kbGVyLkNsaWNrKHRoaXMse2NsaWNrOnRoaXMuaGFuZGxlRXZlbnR9LHRoaXMuaGFuZGxlck9wdGlvbnMpOiJtb3ZlIj09dGhpcy5oYW5kbGVyTW9kZSYmKHRoaXMuaGFuZGxlcj1uZXcgT3BlbkxheWVycy5IYW5kbGVyLkhvdmVyKHRoaXMse3BhdXNlOnRoaXMuaGFuZGxlRXZlbnQsbW92ZTp0aGlzLmhhbmRsZUV2ZW50fSx0aGlzLmhhbmRsZXJPcHRpb25zKSk7cmV0dXJuIHRoaXMuaGFuZGxlcj8hMDohMX0saW5pdGlhbGl6ZTpmdW5jdGlvbihhKXthPWF8fHt9O2EuaGFuZGxlck9wdGlvbnM9YS5oYW5kbGVyT3B0aW9uc3x8dGhpcy5kZWZhdWx0SGFuZGxlck9wdGlvbnM7T3BlbkxheWVycy5Db250cm9sLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsW2FdKTt0aGlzLnJlc2V0SGFuZGxlcigpfSxoYW5kbGVFdmVudDpmdW5jdGlvbihhKXtpZihudWxsPT0KYSl0aGlzLnJlc2V0KCk7ZWxzZXt2YXIgYj10aGlzLm1hcC5nZXRMb25MYXRGcm9tUGl4ZWwoYS54eSk7aWYoYil7dmFyIGM9dGhpcy5maW5kTGF5ZXJzKCk7aWYoMDxjLmxlbmd0aCl7Zm9yKHZhciBkPXt9LGUsZixnPTAsaD1jLmxlbmd0aDtnPGg7ZysrKWU9Y1tnXSxmPU9wZW5MYXllcnMuVXRpbC5pbmRleE9mKHRoaXMubWFwLmxheWVycyxlKSxkW2ZdPWUuZ2V0RmVhdHVyZUluZm8oYik7dGhpcy5jYWxsYmFjayhkLGIsYS54eSl9fX19LGNhbGxiYWNrOmZ1bmN0aW9uKGEpe30scmVzZXQ6ZnVuY3Rpb24oYSl7dGhpcy5jYWxsYmFjayhudWxsKX0sZmluZExheWVyczpmdW5jdGlvbigpe2Zvcih2YXIgYT10aGlzLmxheWVyc3x8dGhpcy5tYXAubGF5ZXJzLGI9W10sYyxkPWEubGVuZ3RoLTE7MDw9ZDstLWQpYz1hW2RdLGMgaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLkxheWVyLlVURkdyaWQmJmIucHVzaChjKTtyZXR1cm4gYn0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Db250cm9sLlVURkdyaWQifSk7T3BlbkxheWVycy5Gb3JtYXQuQ1FMPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhKXtmdW5jdGlvbiBiKCl7dmFyIGE9ZS5wb3AoKTtzd2l0Y2goYS50eXBlKXtjYXNlICJMT0dJQ0FMIjp2YXIgYz1iKCksZz1iKCk7cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLkZpbHRlci5Mb2dpY2FsKHtmaWx0ZXJzOltnLGNdLHR5cGU6ZlthLnRleHQudG9VcHBlckNhc2UoKV19KTtjYXNlICJOT1QiOnJldHVybiBhPWIoKSxuZXcgT3BlbkxheWVycy5GaWx0ZXIuTG9naWNhbCh7ZmlsdGVyczpbYV0sdHlwZTpPcGVuTGF5ZXJzLkZpbHRlci5Mb2dpY2FsLk5PVH0pO2Nhc2UgIkJFVFdFRU4iOnJldHVybiBlLnBvcCgpLGc9YigpLGE9YigpLGM9YigpLG5ldyBPcGVuTGF5ZXJzLkZpbHRlci5Db21wYXJpc29uKHtwcm9wZXJ0eTpjLGxvd2VyQm91bmRhcnk6YSx1cHBlckJvdW5kYXJ5OmcsdHlwZTpPcGVuTGF5ZXJzLkZpbHRlci5Db21wYXJpc29uLkJFVFdFRU59KTtjYXNlICJDT01QQVJJU09OIjpyZXR1cm4gZz0KYigpLGM9YigpLG5ldyBPcGVuTGF5ZXJzLkZpbHRlci5Db21wYXJpc29uKHtwcm9wZXJ0eTpjLHZhbHVlOmcsdHlwZTpkW2EudGV4dC50b1VwcGVyQ2FzZSgpXX0pO2Nhc2UgIklTX05VTEwiOnJldHVybiBjPWIoKSxuZXcgT3BlbkxheWVycy5GaWx0ZXIuQ29tcGFyaXNvbih7cHJvcGVydHk6Yyx0eXBlOmRbYS50ZXh0LnRvVXBwZXJDYXNlKCldfSk7Y2FzZSAiVkFMVUUiOnJldHVybihjPWEudGV4dC5tYXRjaCgvXicoLiopJyQvKSk/Y1sxXS5yZXBsYWNlKC8nJy9nLCInIik6TnVtYmVyKGEudGV4dCk7Y2FzZSAiU1BBVElBTCI6c3dpdGNoKGEudGV4dC50b1VwcGVyQ2FzZSgpKXtjYXNlICJCQk9YIjp2YXIgYT1iKCksYz1iKCksZz1iKCksaD1iKCksaz1iKCk7cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLkZpbHRlci5TcGF0aWFsKHt0eXBlOk9wZW5MYXllcnMuRmlsdGVyLlNwYXRpYWwuQkJPWCxwcm9wZXJ0eTprLHZhbHVlOk9wZW5MYXllcnMuQm91bmRzLmZyb21BcnJheShbaCxnLGMsCmFdKX0pO2Nhc2UgIklOVEVSU0VDVFMiOnJldHVybiBnPWIoKSxjPWIoKSxuZXcgT3BlbkxheWVycy5GaWx0ZXIuU3BhdGlhbCh7dHlwZTpPcGVuTGF5ZXJzLkZpbHRlci5TcGF0aWFsLklOVEVSU0VDVFMscHJvcGVydHk6Yyx2YWx1ZTpnfSk7Y2FzZSAiV0lUSElOIjpyZXR1cm4gZz1iKCksYz1iKCksbmV3IE9wZW5MYXllcnMuRmlsdGVyLlNwYXRpYWwoe3R5cGU6T3BlbkxheWVycy5GaWx0ZXIuU3BhdGlhbC5XSVRISU4scHJvcGVydHk6Yyx2YWx1ZTpnfSk7Y2FzZSAiQ09OVEFJTlMiOnJldHVybiBnPWIoKSxjPWIoKSxuZXcgT3BlbkxheWVycy5GaWx0ZXIuU3BhdGlhbCh7dHlwZTpPcGVuTGF5ZXJzLkZpbHRlci5TcGF0aWFsLkNPTlRBSU5TLHByb3BlcnR5OmMsdmFsdWU6Z30pO2Nhc2UgIkRXSVRISU4iOnJldHVybiBhPWIoKSxnPWIoKSxjPWIoKSxuZXcgT3BlbkxheWVycy5GaWx0ZXIuU3BhdGlhbCh7dHlwZTpPcGVuTGF5ZXJzLkZpbHRlci5TcGF0aWFsLkRXSVRISU4sdmFsdWU6ZywKcHJvcGVydHk6YyxkaXN0YW5jZTpOdW1iZXIoYSl9KX1jYXNlICJHRU9NRVRSWSI6cmV0dXJuIE9wZW5MYXllcnMuR2VvbWV0cnkuZnJvbVdLVChhLnRleHQpO2RlZmF1bHQ6cmV0dXJuIGEudGV4dH19Zm9yKHZhciBjPVtdLGU9W107YS5sZW5ndGg7KXt2YXIgZz1hLnNoaWZ0KCk7c3dpdGNoKGcudHlwZSl7Y2FzZSAiUFJPUEVSVFkiOmNhc2UgIkdFT01FVFJZIjpjYXNlICJWQUxVRSI6ZS5wdXNoKGcpO2JyZWFrO2Nhc2UgIkNPTVBBUklTT04iOmNhc2UgIkJFVFdFRU4iOmNhc2UgIklTX05VTEwiOmNhc2UgIkxPR0lDQUwiOmZvcih2YXIgaz1oW2cudHlwZV07MDxjLmxlbmd0aCYmaFtjW2MubGVuZ3RoLTFdLnR5cGVdPD1rOyllLnB1c2goYy5wb3AoKSk7Yy5wdXNoKGcpO2JyZWFrO2Nhc2UgIlNQQVRJQUwiOmNhc2UgIk5PVCI6Y2FzZSAiTFBBUkVOIjpjLnB1c2goZyk7YnJlYWs7Y2FzZSAiUlBBUkVOIjpmb3IoOzA8Yy5sZW5ndGgmJiJMUEFSRU4iIT1jW2MubGVuZ3RoLTFdLnR5cGU7KWUucHVzaChjLnBvcCgpKTsKYy5wb3AoKTswPGMubGVuZ3RoJiYiU1BBVElBTCI9PWNbYy5sZW5ndGgtMV0udHlwZSYmZS5wdXNoKGMucG9wKCkpO2Nhc2UgIkNPTU1BIjpjYXNlICJFTkQiOmJyZWFrO2RlZmF1bHQ6dGhyb3cgRXJyb3IoIlVua25vd24gdG9rZW4gdHlwZSAiK2cudHlwZSk7fX1mb3IoOzA8Yy5sZW5ndGg7KWUucHVzaChjLnBvcCgpKTthPWIoKTtpZigwPGUubGVuZ3RoKXthPSJSZW1haW5pbmcgdG9rZW5zIGFmdGVyIGJ1aWxkaW5nIEFTVDogXG4iO2ZvcihjPWUubGVuZ3RoLTE7MDw9YztjLS0pYSs9ZVtjXS50eXBlKyI6ICIrZVtjXS50ZXh0KyJcbiI7dGhyb3cgRXJyb3IoYSk7fXJldHVybiBhfXZhciBiPXtQUk9QRVJUWTovXltfYS16QS1aXVx3Ki8sQ09NUEFSSVNPTjovXig9fDw+fDw9fDx8Pj18PnxMSUtFKS9pLElTX05VTEw6L15JUyBOVUxML2ksQ09NTUE6L14sLyxMT0dJQ0FMOi9eKEFORHxPUikvaSxWQUxVRTovXignKFteJ118JycpKid8XGQrKFwuXGQqKT98XC5cZCspLyxMUEFSRU46L15cKC8sClJQQVJFTjovXlwpLyxTUEFUSUFMOi9eKEJCT1h8SU5URVJTRUNUU3xEV0lUSElOfFdJVEhJTnxDT05UQUlOUykvaSxOT1Q6L15OT1QvaSxCRVRXRUVOOi9eQkVUV0VFTi9pLEdFT01FVFJZOmZ1bmN0aW9uKGEpe3ZhciBiPS9eKFBPSU5UfExJTkVTVFJJTkd8UE9MWUdPTnxNVUxUSVBPSU5UfE1VTFRJTElORVNUUklOR3xNVUxUSVBPTFlHT058R0VPTUVUUllDT0xMRUNUSU9OKS8uZXhlYyhhKTtpZihiKXt2YXIgYz1hLmxlbmd0aCxiPWEuaW5kZXhPZigiKCIsYlswXS5sZW5ndGgpO2lmKC0xPGIpZm9yKHZhciBkPTE7YjxjJiYwPGQ7KXN3aXRjaChiKyssYS5jaGFyQXQoYikpe2Nhc2UgIigiOmQrKzticmVhaztjYXNlICIpIjpkLS19cmV0dXJuW2Euc3Vic3RyKDAsYisxKV19fSxFTkQ6L14kL30sYz17TFBBUkVOOlsiR0VPTUVUUlkiLCJTUEFUSUFMIiwiUFJPUEVSVFkiLCJWQUxVRSIsIkxQQVJFTiJdLFJQQVJFTjpbIk5PVCIsIkxPR0lDQUwiLCJFTkQiLCJSUEFSRU4iXSxQUk9QRVJUWTpbIkNPTVBBUklTT04iLAoiQkVUV0VFTiIsIkNPTU1BIiwiSVNfTlVMTCJdLEJFVFdFRU46WyJWQUxVRSJdLElTX05VTEw6WyJFTkQiXSxDT01QQVJJU09OOlsiVkFMVUUiXSxDT01NQTpbIkdFT01FVFJZIiwiVkFMVUUiLCJQUk9QRVJUWSJdLFZBTFVFOlsiTE9HSUNBTCIsIkNPTU1BIiwiUlBBUkVOIiwiRU5EIl0sU1BBVElBTDpbIkxQQVJFTiJdLExPR0lDQUw6WyJOT1QiLCJWQUxVRSIsIlNQQVRJQUwiLCJQUk9QRVJUWSIsIkxQQVJFTiJdLE5PVDpbIlBST1BFUlRZIiwiTFBBUkVOIl0sR0VPTUVUUlk6WyJDT01NQSIsIlJQQVJFTiJdfSxkPXsiPSI6T3BlbkxheWVycy5GaWx0ZXIuQ29tcGFyaXNvbi5FUVVBTF9UTywiPD4iOk9wZW5MYXllcnMuRmlsdGVyLkNvbXBhcmlzb24uTk9UX0VRVUFMX1RPLCI8IjpPcGVuTGF5ZXJzLkZpbHRlci5Db21wYXJpc29uLkxFU1NfVEhBTiwiPD0iOk9wZW5MYXllcnMuRmlsdGVyLkNvbXBhcmlzb24uTEVTU19USEFOX09SX0VRVUFMX1RPLCI+IjpPcGVuTGF5ZXJzLkZpbHRlci5Db21wYXJpc29uLkdSRUFURVJfVEhBTiwKIj49IjpPcGVuTGF5ZXJzLkZpbHRlci5Db21wYXJpc29uLkdSRUFURVJfVEhBTl9PUl9FUVVBTF9UTyxMSUtFOk9wZW5MYXllcnMuRmlsdGVyLkNvbXBhcmlzb24uTElLRSxCRVRXRUVOOk9wZW5MYXllcnMuRmlsdGVyLkNvbXBhcmlzb24uQkVUV0VFTiwiSVMgTlVMTCI6T3BlbkxheWVycy5GaWx0ZXIuQ29tcGFyaXNvbi5JU19OVUxMfSxlPXt9LGY9e0FORDpPcGVuTGF5ZXJzLkZpbHRlci5Mb2dpY2FsLkFORCxPUjpPcGVuTGF5ZXJzLkZpbHRlci5Mb2dpY2FsLk9SfSxnPXt9LGg9e1JQQVJFTjozLExPR0lDQUw6MixDT01QQVJJU09OOjF9LGs7Zm9yKGsgaW4gZClkLmhhc093blByb3BlcnR5KGspJiYoZVtkW2tdXT1rKTtmb3IoayBpbiBmKWYuaGFzT3duUHJvcGVydHkoaykmJihnW2Zba11dPWspO3JldHVybiBPcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuRm9ybWF0LHtyZWFkOmZ1bmN0aW9uKGQpe3ZhciBlPWQ7ZD1bXTt2YXIgZixnPVsiTk9UIiwiR0VPTUVUUlkiLCJTUEFUSUFMIiwKIlBST1BFUlRZIiwiTFBBUkVOIl07ZG97YTp7Zj1nO2Zvcih2YXIgaD12b2lkIDAsZz12b2lkIDAsaz1mLmxlbmd0aCxoPTA7aDxrO2grKyl7dmFyIGc9ZltoXSxzPWJbZ11pbnN0YW5jZW9mIFJlZ0V4cD9iW2ddLmV4ZWMoZSk6KDAsYltnXSkoZSk7aWYocyl7Zj1zWzBdO2U9ZS5zdWJzdHIoZi5sZW5ndGgpLnJlcGxhY2UoL15ccyovLCIiKTtmPXt0eXBlOmcsdGV4dDpmLHJlbWFpbmRlcjplfTticmVhayBhfX1kPSJFUlJPUjogSW4gcGFyc2luZzogWyIrZSsiXSwgZXhwZWN0ZWQgb25lIG9mOiAiO2ZvcihoPTA7aDxrO2grKylnPWZbaF0sZCs9IlxuICAgICIrZysiOiAiK2JbZ107dGhyb3cgRXJyb3IoZCk7fWU9Zi5yZW1haW5kZXI7Zz1jW2YudHlwZV07aWYoIkVORCIhPWYudHlwZSYmIWcpdGhyb3cgRXJyb3IoIk5vIGZvbGxvd3MgbGlzdCBmb3IgIitmLnR5cGUpO2QucHVzaChmKX13aGlsZSgiRU5EIiE9Zi50eXBlKTtkPWEoZCk7dGhpcy5rZWVwRGF0YSYmKHRoaXMuZGF0YT1kKTsKcmV0dXJuIGR9LHdyaXRlOmZ1bmN0aW9uKGEpe2lmKGEgaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLkdlb21ldHJ5KXJldHVybiBhLnRvU3RyaW5nKCk7c3dpdGNoKGEuQ0xBU1NfTkFNRSl7Y2FzZSAiT3BlbkxheWVycy5GaWx0ZXIuU3BhdGlhbCI6c3dpdGNoKGEudHlwZSl7Y2FzZSBPcGVuTGF5ZXJzLkZpbHRlci5TcGF0aWFsLkJCT1g6cmV0dXJuIkJCT1goIithLnByb3BlcnR5KyIsIithLnZhbHVlLnRvQkJPWCgpKyIpIjtjYXNlIE9wZW5MYXllcnMuRmlsdGVyLlNwYXRpYWwuRFdJVEhJTjpyZXR1cm4iRFdJVEhJTigiK2EucHJvcGVydHkrIiwgIit0aGlzLndyaXRlKGEudmFsdWUpKyIsICIrYS5kaXN0YW5jZSsiKSI7Y2FzZSBPcGVuTGF5ZXJzLkZpbHRlci5TcGF0aWFsLldJVEhJTjpyZXR1cm4iV0lUSElOKCIrYS5wcm9wZXJ0eSsiLCAiK3RoaXMud3JpdGUoYS52YWx1ZSkrIikiO2Nhc2UgT3BlbkxheWVycy5GaWx0ZXIuU3BhdGlhbC5JTlRFUlNFQ1RTOnJldHVybiJJTlRFUlNFQ1RTKCIrCmEucHJvcGVydHkrIiwgIit0aGlzLndyaXRlKGEudmFsdWUpKyIpIjtjYXNlIE9wZW5MYXllcnMuRmlsdGVyLlNwYXRpYWwuQ09OVEFJTlM6cmV0dXJuIkNPTlRBSU5TKCIrYS5wcm9wZXJ0eSsiLCAiK3RoaXMud3JpdGUoYS52YWx1ZSkrIikiO2RlZmF1bHQ6dGhyb3cgRXJyb3IoIlVua25vd24gc3BhdGlhbCBmaWx0ZXIgdHlwZTogIithLnR5cGUpO31jYXNlICJPcGVuTGF5ZXJzLkZpbHRlci5Mb2dpY2FsIjppZihhLnR5cGU9PU9wZW5MYXllcnMuRmlsdGVyLkxvZ2ljYWwuTk9UKXJldHVybiJOT1QgKCIrdGhpcy53cml0ZShhLmZpbHRlcnNbMF0pKyIpIjtmb3IodmFyIGI9IigiLGM9ITAsZD0wO2Q8YS5maWx0ZXJzLmxlbmd0aDtkKyspYz9jPSExOmIrPSIpICIrZ1thLnR5cGVdKyIgKCIsYis9dGhpcy53cml0ZShhLmZpbHRlcnNbZF0pO3JldHVybiBiKyIpIjtjYXNlICJPcGVuTGF5ZXJzLkZpbHRlci5Db21wYXJpc29uIjpyZXR1cm4gYS50eXBlPT1PcGVuTGF5ZXJzLkZpbHRlci5Db21wYXJpc29uLkJFVFdFRU4/CmEucHJvcGVydHkrIiBCRVRXRUVOICIrdGhpcy53cml0ZShhLmxvd2VyQm91bmRhcnkpKyIgQU5EICIrdGhpcy53cml0ZShhLnVwcGVyQm91bmRhcnkpOm51bGwhPT1hLnZhbHVlP2EucHJvcGVydHkrIiAiK2VbYS50eXBlXSsiICIrdGhpcy53cml0ZShhLnZhbHVlKTphLnByb3BlcnR5KyIgIitlW2EudHlwZV07Y2FzZSB2b2lkIDA6aWYoInN0cmluZyI9PT10eXBlb2YgYSlyZXR1cm4iJyIrYS5yZXBsYWNlKC8nL2csIicnIikrIiciO2lmKCJudW1iZXIiPT09dHlwZW9mIGEpcmV0dXJuIFN0cmluZyhhKTtkZWZhdWx0OnRocm93IEVycm9yKCJDYW4ndCBlbmNvZGU6ICIrYS5DTEFTU19OQU1FKyIgIithKTt9fSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkZvcm1hdC5DUUwifSl9KCk7T3BlbkxheWVycy5Db250cm9sLlNwbGl0PU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Db250cm9sLHtsYXllcjpudWxsLHNvdXJjZTpudWxsLHNvdXJjZU9wdGlvbnM6bnVsbCx0b2xlcmFuY2U6bnVsbCxlZGdlOiEwLGRlZmVyRGVsZXRlOiExLG11dHVhbDohMCx0YXJnZXRGaWx0ZXI6bnVsbCxzb3VyY2VGaWx0ZXI6bnVsbCxoYW5kbGVyOm51bGwsaW5pdGlhbGl6ZTpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLkNvbnRyb2wucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxbYV0pO3RoaXMub3B0aW9ucz1hfHx7fTt0aGlzLm9wdGlvbnMuc291cmNlJiZ0aGlzLnNldFNvdXJjZSh0aGlzLm9wdGlvbnMuc291cmNlKX0sc2V0U291cmNlOmZ1bmN0aW9uKGEpe3RoaXMuYWN0aXZlPyh0aGlzLmRlYWN0aXZhdGUoKSx0aGlzLmhhbmRsZXImJih0aGlzLmhhbmRsZXIuZGVzdHJveSgpLGRlbGV0ZSB0aGlzLmhhbmRsZXIpLHRoaXMuc291cmNlPWEsdGhpcy5hY3RpdmF0ZSgpKTp0aGlzLnNvdXJjZT0KYX0sYWN0aXZhdGU6ZnVuY3Rpb24oKXt2YXIgYT1PcGVuTGF5ZXJzLkNvbnRyb2wucHJvdG90eXBlLmFjdGl2YXRlLmNhbGwodGhpcyk7aWYoYSlpZighdGhpcy5zb3VyY2UpdGhpcy5oYW5kbGVyfHwodGhpcy5oYW5kbGVyPW5ldyBPcGVuTGF5ZXJzLkhhbmRsZXIuUGF0aCh0aGlzLHtkb25lOmZ1bmN0aW9uKGEpe3RoaXMub25Ta2V0Y2hDb21wbGV0ZSh7ZmVhdHVyZTpuZXcgT3BlbkxheWVycy5GZWF0dXJlLlZlY3RvcihhKX0pfX0se2xheWVyT3B0aW9uczp0aGlzLnNvdXJjZU9wdGlvbnN9KSksdGhpcy5oYW5kbGVyLmFjdGl2YXRlKCk7ZWxzZSBpZih0aGlzLnNvdXJjZS5ldmVudHMpdGhpcy5zb3VyY2UuZXZlbnRzLm9uKHtza2V0Y2hjb21wbGV0ZTp0aGlzLm9uU2tldGNoQ29tcGxldGUsYWZ0ZXJmZWF0dXJlbW9kaWZpZWQ6dGhpcy5hZnRlckZlYXR1cmVNb2RpZmllZCxzY29wZTp0aGlzfSk7cmV0dXJuIGF9LGRlYWN0aXZhdGU6ZnVuY3Rpb24oKXt2YXIgYT1PcGVuTGF5ZXJzLkNvbnRyb2wucHJvdG90eXBlLmRlYWN0aXZhdGUuY2FsbCh0aGlzKTsKYSYmdGhpcy5zb3VyY2UmJnRoaXMuc291cmNlLmV2ZW50cyYmdGhpcy5zb3VyY2UuZXZlbnRzLnVuKHtza2V0Y2hjb21wbGV0ZTp0aGlzLm9uU2tldGNoQ29tcGxldGUsYWZ0ZXJmZWF0dXJlbW9kaWZpZWQ6dGhpcy5hZnRlckZlYXR1cmVNb2RpZmllZCxzY29wZTp0aGlzfSk7cmV0dXJuIGF9LG9uU2tldGNoQ29tcGxldGU6ZnVuY3Rpb24oYSl7dGhpcy5mZWF0dXJlPW51bGw7cmV0dXJuIXRoaXMuY29uc2lkZXJTcGxpdChhLmZlYXR1cmUpfSxhZnRlckZlYXR1cmVNb2RpZmllZDpmdW5jdGlvbihhKXthLm1vZGlmaWVkJiYiZnVuY3Rpb24iPT09dHlwZW9mIGEuZmVhdHVyZS5nZW9tZXRyeS5zcGxpdCYmKHRoaXMuZmVhdHVyZT1hLmZlYXR1cmUsdGhpcy5jb25zaWRlclNwbGl0KGEuZmVhdHVyZSkpfSxyZW1vdmVCeUdlb21ldHJ5OmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTAsZD1hLmxlbmd0aDtjPGQ7KytjKWlmKGFbY10uZ2VvbWV0cnk9PT1iKXthLnNwbGljZShjLDEpO2JyZWFrfX0sCmlzRWxpZ2libGU6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuZ2VvbWV0cnk/YS5zdGF0ZSE9PU9wZW5MYXllcnMuU3RhdGUuREVMRVRFJiYiZnVuY3Rpb24iPT09dHlwZW9mIGEuZ2VvbWV0cnkuc3BsaXQmJnRoaXMuZmVhdHVyZSE9PWEmJighdGhpcy50YXJnZXRGaWx0ZXJ8fHRoaXMudGFyZ2V0RmlsdGVyLmV2YWx1YXRlKGEuYXR0cmlidXRlcykpOiExfSxjb25zaWRlclNwbGl0OmZ1bmN0aW9uKGEpe3ZhciBiPSExLGM9ITE7aWYoIXRoaXMuc291cmNlRmlsdGVyfHx0aGlzLnNvdXJjZUZpbHRlci5ldmFsdWF0ZShhLmF0dHJpYnV0ZXMpKXtmb3IodmFyIGQ9dGhpcy5sYXllciYmdGhpcy5sYXllci5mZWF0dXJlc3x8W10sZSxmLGc9W10saD1bXSxrPXRoaXMubGF5ZXI9PT10aGlzLnNvdXJjZSYmdGhpcy5tdXR1YWwsbD17ZWRnZTp0aGlzLmVkZ2UsdG9sZXJhbmNlOnRoaXMudG9sZXJhbmNlLG11dHVhbDprfSxtPVthLmdlb21ldHJ5XSxuLHAscSxyPTAscz1kLmxlbmd0aDtyPHM7KytyKWlmKG49CmRbcl0sdGhpcy5pc0VsaWdpYmxlKG4pKXtwPVtuLmdlb21ldHJ5XTtmb3IodmFyIHQ9MDt0PG0ubGVuZ3RoOysrdCl7cT1tW3RdO2Zvcih2YXIgdT0wO3U8cC5sZW5ndGg7Kyt1KWlmKGU9cFt1XSxxLmdldEJvdW5kcygpLmludGVyc2VjdHNCb3VuZHMoZS5nZXRCb3VuZHMoKSkmJihlPXEuc3BsaXQoZSxsKSkpZj10aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoImJlZm9yZXNwbGl0Iix7c291cmNlOmEsdGFyZ2V0Om59KSwhMSE9PWYmJihrJiYoZj1lWzBdLDE8Zi5sZW5ndGgmJihmLnVuc2hpZnQodCwxKSxBcnJheS5wcm90b3R5cGUuc3BsaWNlLmFwcGx5KG0sZiksdCs9Zi5sZW5ndGgtMyksZT1lWzFdKSwxPGUubGVuZ3RoJiYoZS51bnNoaWZ0KHUsMSksQXJyYXkucHJvdG90eXBlLnNwbGljZS5hcHBseShwLGUpLHUrPWUubGVuZ3RoLTMpKX1wJiYxPHAubGVuZ3RoJiYodGhpcy5nZW9tc1RvRmVhdHVyZXMobixwKSx0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoInNwbGl0Iix7b3JpZ2luYWw6biwKZmVhdHVyZXM6cH0pLEFycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KGcscCksaC5wdXNoKG4pLGM9ITApfW0mJjE8bS5sZW5ndGgmJih0aGlzLmdlb21zVG9GZWF0dXJlcyhhLG0pLHRoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgic3BsaXQiLHtvcmlnaW5hbDphLGZlYXR1cmVzOm19KSxBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShnLG0pLGgucHVzaChhKSxiPSEwKTtpZihifHxjKXtpZih0aGlzLmRlZmVyRGVsZXRlKXtkPVtdO3I9MDtmb3Iocz1oLmxlbmd0aDtyPHM7KytyKWM9aFtyXSxjLnN0YXRlPT09T3BlbkxheWVycy5TdGF0ZS5JTlNFUlQ/ZC5wdXNoKGMpOihjLnN0YXRlPU9wZW5MYXllcnMuU3RhdGUuREVMRVRFLHRoaXMubGF5ZXIuZHJhd0ZlYXR1cmUoYykpO3RoaXMubGF5ZXIuZGVzdHJveUZlYXR1cmVzKGQse3NpbGVudDohMH0pO3I9MDtmb3Iocz1nLmxlbmd0aDtyPHM7KytyKWdbcl0uc3RhdGU9T3BlbkxheWVycy5TdGF0ZS5JTlNFUlR9ZWxzZSB0aGlzLmxheWVyLmRlc3Ryb3lGZWF0dXJlcyhoLAp7c2lsZW50OiEwfSk7dGhpcy5sYXllci5hZGRGZWF0dXJlcyhnLHtzaWxlbnQ6ITB9KTt0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoImFmdGVyc3BsaXQiLHtzb3VyY2U6YSxmZWF0dXJlczpnfSl9fXJldHVybiBifSxnZW9tc1RvRmVhdHVyZXM6ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLmNsb25lKCk7ZGVsZXRlIGMuZ2VvbWV0cnk7Zm9yKHZhciBkLGU9MCxmPWIubGVuZ3RoO2U8ZjsrK2UpZD1jLmNsb25lKCksZC5nZW9tZXRyeT1iW2VdLGQuc3RhdGU9T3BlbkxheWVycy5TdGF0ZS5JTlNFUlQsYltlXT1kfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5hY3RpdmUmJnRoaXMuZGVhY3RpdmF0ZSgpO09wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuZGVzdHJveS5jYWxsKHRoaXMpfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkNvbnRyb2wuU3BsaXQifSk7T3BlbkxheWVycy5MYXllci5XTVRTPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5MYXllci5HcmlkLHtpc0Jhc2VMYXllcjohMCx2ZXJzaW9uOiIxLjAuMCIscmVxdWVzdEVuY29kaW5nOiJLVlAiLHVybDpudWxsLGxheWVyOm51bGwsbWF0cml4U2V0Om51bGwsc3R5bGU6bnVsbCxmb3JtYXQ6ImltYWdlL2pwZWciLHRpbGVPcmlnaW46bnVsbCx0aWxlRnVsbEV4dGVudDpudWxsLGZvcm1hdFN1ZmZpeDpudWxsLG1hdHJpeElkczpudWxsLGRpbWVuc2lvbnM6bnVsbCxwYXJhbXM6bnVsbCx6b29tT2Zmc2V0OjAsc2VydmVyUmVzb2x1dGlvbnM6bnVsbCxmb3JtYXRTdWZmaXhNYXA6eyJpbWFnZS9wbmciOiJwbmciLCJpbWFnZS9wbmc4IjoicG5nIiwiaW1hZ2UvcG5nMjQiOiJwbmciLCJpbWFnZS9wbmczMiI6InBuZyIscG5nOiJwbmciLCJpbWFnZS9qcGVnIjoianBnIiwiaW1hZ2UvanBnIjoianBnIixqcGVnOiJqcGciLGpwZzoianBnIn0sbWF0cml4Om51bGwsaW5pdGlhbGl6ZTpmdW5jdGlvbihhKXt2YXIgYj0Ke3VybDohMCxsYXllcjohMCxzdHlsZTohMCxtYXRyaXhTZXQ6ITB9LGM7Zm9yKGMgaW4gYilpZighKGMgaW4gYSkpdGhyb3cgRXJyb3IoIk1pc3NpbmcgcHJvcGVydHkgJyIrYysiJyBpbiBsYXllciBjb25maWd1cmF0aW9uLiIpO2EucGFyYW1zPU9wZW5MYXllcnMuVXRpbC51cHBlckNhc2VPYmplY3QoYS5wYXJhbXMpO09wZW5MYXllcnMuTGF5ZXIuR3JpZC5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLFthLm5hbWUsYS51cmwsYS5wYXJhbXMsYV0pO3RoaXMuZm9ybWF0U3VmZml4fHwodGhpcy5mb3JtYXRTdWZmaXg9dGhpcy5mb3JtYXRTdWZmaXhNYXBbdGhpcy5mb3JtYXRdfHx0aGlzLmZvcm1hdC5zcGxpdCgiLyIpLnBvcCgpKTtpZih0aGlzLm1hdHJpeElkcyYmKGE9dGhpcy5tYXRyaXhJZHMubGVuZ3RoKSYmInN0cmluZyI9PT10eXBlb2YgdGhpcy5tYXRyaXhJZHNbMF0pZm9yKGI9dGhpcy5tYXRyaXhJZHMsdGhpcy5tYXRyaXhJZHM9QXJyYXkoYSksYz0wO2M8YTsrK2MpdGhpcy5tYXRyaXhJZHNbY109CntpZGVudGlmaWVyOmJbY119fSxzZXRNYXA6ZnVuY3Rpb24oKXtPcGVuTGF5ZXJzLkxheWVyLkdyaWQucHJvdG90eXBlLnNldE1hcC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LHVwZGF0ZU1hdHJpeFByb3BlcnRpZXM6ZnVuY3Rpb24oKXtpZih0aGlzLm1hdHJpeD10aGlzLmdldE1hdHJpeCgpKXRoaXMubWF0cml4LnRvcExlZnRDb3JuZXImJih0aGlzLnRpbGVPcmlnaW49dGhpcy5tYXRyaXgudG9wTGVmdENvcm5lciksdGhpcy5tYXRyaXgudGlsZVdpZHRoJiZ0aGlzLm1hdHJpeC50aWxlSGVpZ2h0JiYodGhpcy50aWxlU2l6ZT1uZXcgT3BlbkxheWVycy5TaXplKHRoaXMubWF0cml4LnRpbGVXaWR0aCx0aGlzLm1hdHJpeC50aWxlSGVpZ2h0KSksdGhpcy50aWxlT3JpZ2lufHwodGhpcy50aWxlT3JpZ2luPW5ldyBPcGVuTGF5ZXJzLkxvbkxhdCh0aGlzLm1heEV4dGVudC5sZWZ0LHRoaXMubWF4RXh0ZW50LnRvcCkpLHRoaXMudGlsZUZ1bGxFeHRlbnR8fCh0aGlzLnRpbGVGdWxsRXh0ZW50PQp0aGlzLm1heEV4dGVudCl9LG1vdmVUbzpmdW5jdGlvbihhLGIsYyl7IWImJnRoaXMubWF0cml4fHx0aGlzLnVwZGF0ZU1hdHJpeFByb3BlcnRpZXMoKTtyZXR1cm4gT3BlbkxheWVycy5MYXllci5HcmlkLnByb3RvdHlwZS5tb3ZlVG8uYXBwbHkodGhpcyxhcmd1bWVudHMpfSxjbG9uZTpmdW5jdGlvbihhKXtudWxsPT1hJiYoYT1uZXcgT3BlbkxheWVycy5MYXllci5XTVRTKHRoaXMub3B0aW9ucykpO3JldHVybiBhPU9wZW5MYXllcnMuTGF5ZXIuR3JpZC5wcm90b3R5cGUuY2xvbmUuYXBwbHkodGhpcyxbYV0pfSxnZXRJZGVudGlmaWVyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0U2VydmVyWm9vbSgpfSxnZXRNYXRyaXg6ZnVuY3Rpb24oKXt2YXIgYTtpZih0aGlzLm1hdHJpeElkcyYmMCE9PXRoaXMubWF0cml4SWRzLmxlbmd0aClpZigic2NhbGVEZW5vbWluYXRvciJpbiB0aGlzLm1hdHJpeElkc1swXSlmb3IodmFyIGI9T3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0gqT3BlbkxheWVycy5JTkNIRVNfUEVSX1VOSVRbdGhpcy51bml0c10qCnRoaXMuZ2V0U2VydmVyUmVzb2x1dGlvbigpLzIuOEUtNCxjPU51bWJlci5QT1NJVElWRV9JTkZJTklUWSxkLGU9MCxmPXRoaXMubWF0cml4SWRzLmxlbmd0aDtlPGY7KytlKWQ9TWF0aC5hYnMoMS10aGlzLm1hdHJpeElkc1tlXS5zY2FsZURlbm9taW5hdG9yL2IpLGQ8YyYmKGM9ZCxhPXRoaXMubWF0cml4SWRzW2VdKTtlbHNlIGE9dGhpcy5tYXRyaXhJZHNbdGhpcy5nZXRJZGVudGlmaWVyKCldO2Vsc2UgYT17aWRlbnRpZmllcjp0aGlzLmdldElkZW50aWZpZXIoKX07cmV0dXJuIGF9LGdldFRpbGVJbmZvOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZ2V0U2VydmVyUmVzb2x1dGlvbigpLGM9KGEubG9uLXRoaXMudGlsZU9yaWdpbi5sb24pLyhiKnRoaXMudGlsZVNpemUudyk7YT0odGhpcy50aWxlT3JpZ2luLmxhdC1hLmxhdCkvKGIqdGhpcy50aWxlU2l6ZS5oKTt2YXIgYj1NYXRoLmZsb29yKGMpLGQ9TWF0aC5mbG9vcihhKTtyZXR1cm57Y29sOmIscm93OmQsaTpNYXRoLmZsb29yKChjLQpiKSp0aGlzLnRpbGVTaXplLncpLGo6TWF0aC5mbG9vcigoYS1kKSp0aGlzLnRpbGVTaXplLmgpfX0sZ2V0VVJMOmZ1bmN0aW9uKGEpe2E9dGhpcy5hZGp1c3RCb3VuZHMoYSk7dmFyIGI9IiI7aWYoIXRoaXMudGlsZUZ1bGxFeHRlbnR8fHRoaXMudGlsZUZ1bGxFeHRlbnQuaW50ZXJzZWN0c0JvdW5kcyhhKSl7YT1hLmdldENlbnRlckxvbkxhdCgpO3ZhciBjPXRoaXMuZ2V0VGlsZUluZm8oYSk7YT10aGlzLmRpbWVuc2lvbnM7dmFyIGQsYj1PcGVuTGF5ZXJzLlV0aWwuaXNBcnJheSh0aGlzLnVybCk/dGhpcy5zZWxlY3RVcmwoW3RoaXMudmVyc2lvbix0aGlzLnN0eWxlLHRoaXMubWF0cml4U2V0LHRoaXMubWF0cml4LmlkZW50aWZpZXIsYy5yb3csYy5jb2xdLmpvaW4oKSx0aGlzLnVybCk6dGhpcy51cmw7aWYoIlJFU1QiPT09dGhpcy5yZXF1ZXN0RW5jb2RpbmcudG9VcHBlckNhc2UoKSlpZihkPXRoaXMucGFyYW1zLC0xIT09Yi5pbmRleE9mKCJ7Iikpe2I9Yi5yZXBsYWNlKC9cey9nLAoiJHsiKTtjPXtzdHlsZTp0aGlzLnN0eWxlLFN0eWxlOnRoaXMuc3R5bGUsVGlsZU1hdHJpeFNldDp0aGlzLm1hdHJpeFNldCxUaWxlTWF0cml4OnRoaXMubWF0cml4LmlkZW50aWZpZXIsVGlsZVJvdzpjLnJvdyxUaWxlQ29sOmMuY29sfTtpZihhKXt2YXIgZSxmO2ZvcihmPWEubGVuZ3RoLTE7MDw9ZjstLWYpZT1hW2ZdLGNbZV09ZFtlLnRvVXBwZXJDYXNlKCldfWI9T3BlbkxheWVycy5TdHJpbmcuZm9ybWF0KGIsYyl9ZWxzZXtlPXRoaXMudmVyc2lvbisiLyIrdGhpcy5sYXllcisiLyIrdGhpcy5zdHlsZSsiLyI7aWYoYSlmb3IoZj0wO2Y8YS5sZW5ndGg7ZisrKWRbYVtmXV0mJihlPWUrZFthW2ZdXSsiLyIpO2U9ZSt0aGlzLm1hdHJpeFNldCsiLyIrdGhpcy5tYXRyaXguaWRlbnRpZmllcisiLyIrYy5yb3crIi8iK2MuY29sKyIuIit0aGlzLmZvcm1hdFN1ZmZpeDtiLm1hdGNoKC9cLyQvKXx8KGIrPSIvIik7Yis9ZX1lbHNlIktWUCI9PT10aGlzLnJlcXVlc3RFbmNvZGluZy50b1VwcGVyQ2FzZSgpJiYKKGQ9e1NFUlZJQ0U6IldNVFMiLFJFUVVFU1Q6IkdldFRpbGUiLFZFUlNJT046dGhpcy52ZXJzaW9uLExBWUVSOnRoaXMubGF5ZXIsU1RZTEU6dGhpcy5zdHlsZSxUSUxFTUFUUklYU0VUOnRoaXMubWF0cml4U2V0LFRJTEVNQVRSSVg6dGhpcy5tYXRyaXguaWRlbnRpZmllcixUSUxFUk9XOmMucm93LFRJTEVDT0w6Yy5jb2wsRk9STUFUOnRoaXMuZm9ybWF0fSxiPU9wZW5MYXllcnMuTGF5ZXIuR3JpZC5wcm90b3R5cGUuZ2V0RnVsbFJlcXVlc3RTdHJpbmcuYXBwbHkodGhpcyxbZF0pKX1yZXR1cm4gYn0sbWVyZ2VOZXdQYXJhbXM6ZnVuY3Rpb24oYSl7aWYoIktWUCI9PT10aGlzLnJlcXVlc3RFbmNvZGluZy50b1VwcGVyQ2FzZSgpKXJldHVybiBPcGVuTGF5ZXJzLkxheWVyLkdyaWQucHJvdG90eXBlLm1lcmdlTmV3UGFyYW1zLmFwcGx5KHRoaXMsW09wZW5MYXllcnMuVXRpbC51cHBlckNhc2VPYmplY3QoYSldKX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5MYXllci5XTVRTIn0pO09wZW5MYXllcnMuUHJvdG9jb2wuU09TLnYxXzBfMD1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuUHJvdG9jb2wse2ZvaXM6bnVsbCxmb3JtYXRPcHRpb25zOm51bGwsaW5pdGlhbGl6ZTpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLlByb3RvY29sLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsW2FdKTthLmZvcm1hdHx8KHRoaXMuZm9ybWF0PW5ldyBPcGVuTGF5ZXJzLkZvcm1hdC5TT1NHZXRGZWF0dXJlT2ZJbnRlcmVzdCh0aGlzLmZvcm1hdE9wdGlvbnMpKX0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMub3B0aW9ucyYmIXRoaXMub3B0aW9ucy5mb3JtYXQmJnRoaXMuZm9ybWF0LmRlc3Ryb3koKTt0aGlzLmZvcm1hdD1udWxsO09wZW5MYXllcnMuUHJvdG9jb2wucHJvdG90eXBlLmRlc3Ryb3kuYXBwbHkodGhpcyl9LHJlYWQ6ZnVuY3Rpb24oYSl7YT1PcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHt9LGEpO09wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKGEsdGhpcy5vcHRpb25zfHwKe30pO3ZhciBiPW5ldyBPcGVuTGF5ZXJzLlByb3RvY29sLlJlc3BvbnNlKHtyZXF1ZXN0VHlwZToicmVhZCJ9KSxjPXRoaXMuZm9ybWF0LGM9T3BlbkxheWVycy5Gb3JtYXQuWE1MLnByb3RvdHlwZS53cml0ZS5hcHBseShjLFtjLndyaXRlTm9kZSgic29zOkdldEZlYXR1cmVPZkludGVyZXN0Iix7Zm9pczp0aGlzLmZvaXN9KV0pO2IucHJpdj1PcGVuTGF5ZXJzLlJlcXVlc3QuUE9TVCh7dXJsOmEudXJsLGNhbGxiYWNrOnRoaXMuY3JlYXRlQ2FsbGJhY2sodGhpcy5oYW5kbGVSZWFkLGIsYSksZGF0YTpjfSk7cmV0dXJuIGJ9LGhhbmRsZVJlYWQ6ZnVuY3Rpb24oYSxiKXtpZihiLmNhbGxiYWNrKXt2YXIgYz1hLnByaXY7MjAwPD1jLnN0YXR1cyYmMzAwPmMuc3RhdHVzPyhhLmZlYXR1cmVzPXRoaXMucGFyc2VGZWF0dXJlcyhjKSxhLmNvZGU9T3BlbkxheWVycy5Qcm90b2NvbC5SZXNwb25zZS5TVUNDRVNTKTphLmNvZGU9T3BlbkxheWVycy5Qcm90b2NvbC5SZXNwb25zZS5GQUlMVVJFOwpiLmNhbGxiYWNrLmNhbGwoYi5zY29wZSxhKX19LHBhcnNlRmVhdHVyZXM6ZnVuY3Rpb24oYSl7dmFyIGI9YS5yZXNwb25zZVhNTDtiJiZiLmRvY3VtZW50RWxlbWVudHx8KGI9YS5yZXNwb25zZVRleHQpO3JldHVybiFifHwwPj1iLmxlbmd0aD9udWxsOnRoaXMuZm9ybWF0LnJlYWQoYil9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuUHJvdG9jb2wuU09TLnYxXzBfMCJ9KTtPcGVuTGF5ZXJzLkxheWVyLkthTWFwQ2FjaGU9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkxheWVyLkthTWFwLHtJTUFHRV9FWFRFTlNJT05TOntqcGVnOiJqcGciLGdpZjoiZ2lmIixwbmc6InBuZyIscG5nODoicG5nIixwbmcyNDoicG5nIixkaXRoZXJlZDoicG5nIn0sREVGQVVMVF9GT1JNQVQ6ImpwZWciLGluaXRpYWxpemU6ZnVuY3Rpb24oYSxiLGMsZCl7T3BlbkxheWVycy5MYXllci5LYU1hcC5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5leHRlbnNpb249dGhpcy5JTUFHRV9FWFRFTlNJT05TW3RoaXMucGFyYW1zLmkudG9Mb3dlckNhc2UoKXx8dGhpcy5ERUZBVUxUX0ZPUk1BVF19LGdldFVSTDpmdW5jdGlvbihhKXthPXRoaXMuYWRqdXN0Qm91bmRzKGEpO3ZhciBiPXRoaXMubWFwLmdldFJlc29sdXRpb24oKSxjPU1hdGgucm91bmQoMUU0KnRoaXMubWFwLmdldFNjYWxlKCkpLzFFNCxkPU1hdGgucm91bmQoYS5sZWZ0L2IpO2E9Ci1NYXRoLnJvdW5kKGEudG9wL2IpO3ZhciBiPU1hdGguZmxvb3IoZC90aGlzLnRpbGVTaXplLncvdGhpcy5wYXJhbXMubWV0YVRpbGVTaXplLncpKnRoaXMudGlsZVNpemUudyp0aGlzLnBhcmFtcy5tZXRhVGlsZVNpemUudyxlPU1hdGguZmxvb3IoYS90aGlzLnRpbGVTaXplLmgvdGhpcy5wYXJhbXMubWV0YVRpbGVTaXplLmgpKnRoaXMudGlsZVNpemUuaCp0aGlzLnBhcmFtcy5tZXRhVGlsZVNpemUuaCxjPVsiLyIsdGhpcy5wYXJhbXMubWFwLCIvIixjLCIvIix0aGlzLnBhcmFtcy5nLnJlcGxhY2UoL1xzL2csIl8iKSwiL2RlZi90IixlLCIvbCIsYiwiL3QiLGEsImwiLGQsIi4iLHRoaXMuZXh0ZW5zaW9uXSxkPXRoaXMudXJsO09wZW5MYXllcnMuVXRpbC5pc0FycmF5KGQpJiYoZD10aGlzLnNlbGVjdFVybChjLmpvaW4oIiIpLGQpKTtyZXR1cm4gZCtjLmpvaW4oIiIpfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkxheWVyLkthTWFwQ2FjaGUifSk7T3BlbkxheWVycy5Qcm90b2NvbC5XRlMudjFfMV8wPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Qcm90b2NvbC5XRlMudjEse3ZlcnNpb246IjEuMS4wIixpbml0aWFsaXplOmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuUHJvdG9jb2wuV0ZTLnYxLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLm91dHB1dEZvcm1hdCYmIXRoaXMucmVhZEZvcm1hdCYmKCJnbWwyIj09dGhpcy5vdXRwdXRGb3JtYXQudG9Mb3dlckNhc2UoKT90aGlzLnJlYWRGb3JtYXQ9bmV3IE9wZW5MYXllcnMuRm9ybWF0LkdNTC52Mih7ZmVhdHVyZVR5cGU6dGhpcy5mZWF0dXJlVHlwZSxmZWF0dXJlTlM6dGhpcy5mZWF0dXJlTlMsZ2VvbWV0cnlOYW1lOnRoaXMuZ2VvbWV0cnlOYW1lfSk6Impzb24iPT10aGlzLm91dHB1dEZvcm1hdC50b0xvd2VyQ2FzZSgpJiYodGhpcy5yZWFkRm9ybWF0PW5ldyBPcGVuTGF5ZXJzLkZvcm1hdC5HZW9KU09OKSl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuUHJvdG9jb2wuV0ZTLnYxXzFfMCJ9KTtPcGVuTGF5ZXJzLkZvcm1hdC5XTVNDYXBhYmlsaXRpZXMudjFfMV8xPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Gb3JtYXQuV01TQ2FwYWJpbGl0aWVzLnYxXzEse3ZlcnNpb246IjEuMS4xIixyZWFkZXJzOnt3bXM6T3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoe1NSUzpmdW5jdGlvbihhLGIpe2Iuc3JzW3RoaXMuZ2V0Q2hpbGRWYWx1ZShhKV09ITB9fSxPcGVuTGF5ZXJzLkZvcm1hdC5XTVNDYXBhYmlsaXRpZXMudjFfMS5wcm90b3R5cGUucmVhZGVycy53bXMpfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkZvcm1hdC5XTVNDYXBhYmlsaXRpZXMudjFfMV8xIn0pO09wZW5MYXllcnMuRm9ybWF0LldNU0NhcGFiaWxpdGllcy52MV8xXzFfV01TQz1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuRm9ybWF0LldNU0NhcGFiaWxpdGllcy52MV8xXzEse3ZlcnNpb246IjEuMS4xIixwcm9maWxlOiJXTVNDIixyZWFkZXJzOnt3bXM6T3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoe1ZlbmRvclNwZWNpZmljQ2FwYWJpbGl0aWVzOmZ1bmN0aW9uKGEsYil7Yi52ZW5kb3JTcGVjaWZpYz17dGlsZVNldHM6W119O3RoaXMucmVhZENoaWxkTm9kZXMoYSxiLnZlbmRvclNwZWNpZmljKX0sVGlsZVNldDpmdW5jdGlvbihhLGIpe3ZhciBjPXtzcnM6e30sYmJveDp7fSxyZXNvbHV0aW9uczpbXX07dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGMpO2IudGlsZVNldHMucHVzaChjKX0sUmVzb2x1dGlvbnM6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9dGhpcy5nZXRDaGlsZFZhbHVlKGEpLnNwbGl0KCIgIiksZD0wLGU9Yy5sZW5ndGg7ZDxlO2QrKykiIiE9Y1tkXSYmYi5yZXNvbHV0aW9ucy5wdXNoKHBhcnNlRmxvYXQoY1tkXSkpfSwKV2lkdGg6ZnVuY3Rpb24oYSxiKXtiLndpZHRoPXBhcnNlSW50KHRoaXMuZ2V0Q2hpbGRWYWx1ZShhKSl9LEhlaWdodDpmdW5jdGlvbihhLGIpe2IuaGVpZ2h0PXBhcnNlSW50KHRoaXMuZ2V0Q2hpbGRWYWx1ZShhKSl9LExheWVyczpmdW5jdGlvbihhLGIpe2IubGF5ZXJzPXRoaXMuZ2V0Q2hpbGRWYWx1ZShhKX0sU3R5bGVzOmZ1bmN0aW9uKGEsYil7Yi5zdHlsZXM9dGhpcy5nZXRDaGlsZFZhbHVlKGEpfX0sT3BlbkxheWVycy5Gb3JtYXQuV01TQ2FwYWJpbGl0aWVzLnYxXzFfMS5wcm90b3R5cGUucmVhZGVycy53bXMpfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkZvcm1hdC5XTVNDYXBhYmlsaXRpZXMudjFfMV8xX1dNU0MifSk7T3BlbkxheWVycy5Db250cm9sLkxheWVyU3dpdGNoZXI9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkNvbnRyb2wse2xheWVyU3RhdGVzOm51bGwsbGF5ZXJzRGl2Om51bGwsYmFzZUxheWVyc0RpdjpudWxsLGJhc2VMYXllcnM6bnVsbCxkYXRhTGJsOm51bGwsZGF0YUxheWVyc0RpdjpudWxsLGRhdGFMYXllcnM6bnVsbCxtaW5pbWl6ZURpdjpudWxsLG1heGltaXplRGl2Om51bGwsYXNjZW5kaW5nOiEwLGluaXRpYWxpemU6ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5Db250cm9sLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLmxheWVyU3RhdGVzPVtdfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5jbGVhckxheWVyc0FycmF5KCJiYXNlIik7dGhpcy5jbGVhckxheWVyc0FycmF5KCJkYXRhIik7dGhpcy5tYXAuZXZlbnRzLnVuKHtidXR0b25jbGljazp0aGlzLm9uQnV0dG9uQ2xpY2ssYWRkbGF5ZXI6dGhpcy5yZWRyYXcsY2hhbmdlbGF5ZXI6dGhpcy5yZWRyYXcsCnJlbW92ZWxheWVyOnRoaXMucmVkcmF3LGNoYW5nZWJhc2VsYXllcjp0aGlzLnJlZHJhdyxzY29wZTp0aGlzfSk7dGhpcy5ldmVudHMudW5yZWdpc3RlcigiYnV0dG9uY2xpY2siLHRoaXMsdGhpcy5vbkJ1dHRvbkNsaWNrKTtPcGVuTGF5ZXJzLkNvbnRyb2wucHJvdG90eXBlLmRlc3Ryb3kuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxzZXRNYXA6ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5Db250cm9sLnByb3RvdHlwZS5zZXRNYXAuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMubWFwLmV2ZW50cy5vbih7YWRkbGF5ZXI6dGhpcy5yZWRyYXcsY2hhbmdlbGF5ZXI6dGhpcy5yZWRyYXcscmVtb3ZlbGF5ZXI6dGhpcy5yZWRyYXcsY2hhbmdlYmFzZWxheWVyOnRoaXMucmVkcmF3LHNjb3BlOnRoaXN9KTt0aGlzLm91dHNpZGVWaWV3cG9ydD8odGhpcy5ldmVudHMuYXR0YWNoVG9FbGVtZW50KHRoaXMuZGl2KSx0aGlzLmV2ZW50cy5yZWdpc3RlcigiYnV0dG9uY2xpY2siLHRoaXMsdGhpcy5vbkJ1dHRvbkNsaWNrKSk6CnRoaXMubWFwLmV2ZW50cy5yZWdpc3RlcigiYnV0dG9uY2xpY2siLHRoaXMsdGhpcy5vbkJ1dHRvbkNsaWNrKX0sZHJhdzpmdW5jdGlvbigpe09wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuZHJhdy5hcHBseSh0aGlzKTt0aGlzLmxvYWRDb250ZW50cygpO3RoaXMub3V0c2lkZVZpZXdwb3J0fHx0aGlzLm1pbmltaXplQ29udHJvbCgpO3RoaXMucmVkcmF3KCk7cmV0dXJuIHRoaXMuZGl2fSxvbkJ1dHRvbkNsaWNrOmZ1bmN0aW9uKGEpe2E9YS5idXR0b25FbGVtZW50O2E9PT10aGlzLm1pbmltaXplRGl2P3RoaXMubWluaW1pemVDb250cm9sKCk6YT09PXRoaXMubWF4aW1pemVEaXY/dGhpcy5tYXhpbWl6ZUNvbnRyb2woKTphLl9sYXllclN3aXRjaGVyPT09dGhpcy5pZCYmKGFbImZvciJdJiYoYT1kb2N1bWVudC5nZXRFbGVtZW50QnlJZChhWyJmb3IiXSkpLGEuZGlzYWJsZWR8fCgicmFkaW8iPT1hLnR5cGU/KGEuY2hlY2tlZD0hMCx0aGlzLm1hcC5zZXRCYXNlTGF5ZXIodGhpcy5tYXAuZ2V0TGF5ZXIoYS5fbGF5ZXIpKSk6CihhLmNoZWNrZWQ9IWEuY2hlY2tlZCx0aGlzLnVwZGF0ZU1hcCgpKSkpfSxjbGVhckxheWVyc0FycmF5OmZ1bmN0aW9uKGEpe3RoaXNbYSsiTGF5ZXJzRGl2Il0uaW5uZXJIVE1MPSIiO3RoaXNbYSsiTGF5ZXJzIl09W119LGNoZWNrUmVkcmF3OmZ1bmN0aW9uKCl7aWYoIXRoaXMubGF5ZXJTdGF0ZXMubGVuZ3RofHx0aGlzLm1hcC5sYXllcnMubGVuZ3RoIT10aGlzLmxheWVyU3RhdGVzLmxlbmd0aClyZXR1cm4hMDtmb3IodmFyIGE9MCxiPXRoaXMubGF5ZXJTdGF0ZXMubGVuZ3RoO2E8YjthKyspe3ZhciBjPXRoaXMubGF5ZXJTdGF0ZXNbYV0sZD10aGlzLm1hcC5sYXllcnNbYV07aWYoYy5uYW1lIT1kLm5hbWV8fGMuaW5SYW5nZSE9ZC5pblJhbmdlfHxjLmlkIT1kLmlkfHxjLnZpc2liaWxpdHkhPWQudmlzaWJpbGl0eSlyZXR1cm4hMH1yZXR1cm4hMX0scmVkcmF3OmZ1bmN0aW9uKCl7aWYoIXRoaXMuY2hlY2tSZWRyYXcoKSlyZXR1cm4gdGhpcy5kaXY7dGhpcy5jbGVhckxheWVyc0FycmF5KCJiYXNlIik7CnRoaXMuY2xlYXJMYXllcnNBcnJheSgiZGF0YSIpO3ZhciBhPSExLGI9ITEsYz10aGlzLm1hcC5sYXllcnMubGVuZ3RoO3RoaXMubGF5ZXJTdGF0ZXM9QXJyYXkoYyk7Zm9yKHZhciBkPTA7ZDxjO2QrKyl7dmFyIGU9dGhpcy5tYXAubGF5ZXJzW2RdO3RoaXMubGF5ZXJTdGF0ZXNbZF09e25hbWU6ZS5uYW1lLHZpc2liaWxpdHk6ZS52aXNpYmlsaXR5LGluUmFuZ2U6ZS5pblJhbmdlLGlkOmUuaWR9fXZhciBmPXRoaXMubWFwLmxheWVycy5zbGljZSgpO3RoaXMuYXNjZW5kaW5nfHxmLnJldmVyc2UoKTtkPTA7Zm9yKGM9Zi5sZW5ndGg7ZDxjO2QrKyl7dmFyIGU9ZltkXSxnPWUuaXNCYXNlTGF5ZXI7aWYoZS5kaXNwbGF5SW5MYXllclN3aXRjaGVyKXtnP2I9ITA6YT0hMDt2YXIgaD1nP2U9PXRoaXMubWFwLmJhc2VMYXllcjplLmdldFZpc2liaWxpdHkoKSxrPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImlucHV0IiksbD1PcGVuTGF5ZXJzLlV0aWwuY3JlYXRlVW5pcXVlSUQodGhpcy5pZCsKIl9pbnB1dF8iKTtrLmlkPWw7ay5uYW1lPWc/dGhpcy5pZCsiX2Jhc2VMYXllcnMiOmUubmFtZTtrLnR5cGU9Zz8icmFkaW8iOiJjaGVja2JveCI7ay52YWx1ZT1lLm5hbWU7ay5jaGVja2VkPWg7ay5kZWZhdWx0Q2hlY2tlZD1oO2suY2xhc3NOYW1lPSJvbEJ1dHRvbiI7ay5fbGF5ZXI9ZS5pZDtrLl9sYXllclN3aXRjaGVyPXRoaXMuaWQ7Z3x8ZS5pblJhbmdlfHwoay5kaXNhYmxlZD0hMCk7aD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJsYWJlbCIpO2hbImZvciJdPWsuaWQ7T3BlbkxheWVycy5FbGVtZW50LmFkZENsYXNzKGgsImxhYmVsU3BhbiBvbEJ1dHRvbiIpO2guX2xheWVyPWUuaWQ7aC5fbGF5ZXJTd2l0Y2hlcj10aGlzLmlkO2d8fGUuaW5SYW5nZXx8KGguc3R5bGUuY29sb3I9ImdyYXkiKTtoLmlubmVySFRNTD1lLm5hbWU7aC5zdHlsZS52ZXJ0aWNhbEFsaWduPWc/ImJvdHRvbSI6ImJhc2VsaW5lIjtsPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImJyIik7KGc/dGhpcy5iYXNlTGF5ZXJzOgp0aGlzLmRhdGFMYXllcnMpLnB1c2goe2xheWVyOmUsaW5wdXRFbGVtOmssbGFiZWxTcGFuOmh9KTtlPWc/dGhpcy5iYXNlTGF5ZXJzRGl2OnRoaXMuZGF0YUxheWVyc0RpdjtlLmFwcGVuZENoaWxkKGspO2UuYXBwZW5kQ2hpbGQoaCk7ZS5hcHBlbmRDaGlsZChsKX19dGhpcy5kYXRhTGJsLnN0eWxlLmRpc3BsYXk9YT8iIjoibm9uZSI7dGhpcy5iYXNlTGJsLnN0eWxlLmRpc3BsYXk9Yj8iIjoibm9uZSI7cmV0dXJuIHRoaXMuZGl2fSx1cGRhdGVNYXA6ZnVuY3Rpb24oKXtmb3IodmFyIGE9MCxiPXRoaXMuYmFzZUxheWVycy5sZW5ndGg7YTxiO2ErKyl7dmFyIGM9dGhpcy5iYXNlTGF5ZXJzW2FdO2MuaW5wdXRFbGVtLmNoZWNrZWQmJnRoaXMubWFwLnNldEJhc2VMYXllcihjLmxheWVyLCExKX1hPTA7Zm9yKGI9dGhpcy5kYXRhTGF5ZXJzLmxlbmd0aDthPGI7YSsrKWM9dGhpcy5kYXRhTGF5ZXJzW2FdLGMubGF5ZXIuc2V0VmlzaWJpbGl0eShjLmlucHV0RWxlbS5jaGVja2VkKX0sbWF4aW1pemVDb250cm9sOmZ1bmN0aW9uKGEpe3RoaXMuZGl2LnN0eWxlLndpZHRoPQoiIjt0aGlzLmRpdi5zdHlsZS5oZWlnaHQ9IiI7dGhpcy5zaG93Q29udHJvbHMoITEpO251bGwhPWEmJk9wZW5MYXllcnMuRXZlbnQuc3RvcChhKX0sbWluaW1pemVDb250cm9sOmZ1bmN0aW9uKGEpe3RoaXMuZGl2LnN0eWxlLndpZHRoPSIwcHgiO3RoaXMuZGl2LnN0eWxlLmhlaWdodD0iMHB4Ijt0aGlzLnNob3dDb250cm9scyghMCk7bnVsbCE9YSYmT3BlbkxheWVycy5FdmVudC5zdG9wKGEpfSxzaG93Q29udHJvbHM6ZnVuY3Rpb24oYSl7dGhpcy5tYXhpbWl6ZURpdi5zdHlsZS5kaXNwbGF5PWE/IiI6Im5vbmUiO3RoaXMubWluaW1pemVEaXYuc3R5bGUuZGlzcGxheT1hPyJub25lIjoiIjt0aGlzLmxheWVyc0Rpdi5zdHlsZS5kaXNwbGF5PWE/Im5vbmUiOiIifSxsb2FkQ29udGVudHM6ZnVuY3Rpb24oKXt0aGlzLmxheWVyc0Rpdj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTt0aGlzLmxheWVyc0Rpdi5pZD10aGlzLmlkKyJfbGF5ZXJzRGl2IjtPcGVuTGF5ZXJzLkVsZW1lbnQuYWRkQ2xhc3ModGhpcy5sYXllcnNEaXYsCiJsYXllcnNEaXYiKTt0aGlzLmJhc2VMYmw9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7dGhpcy5iYXNlTGJsLmlubmVySFRNTD1PcGVuTGF5ZXJzLmkxOG4oIkJhc2UgTGF5ZXIiKTtPcGVuTGF5ZXJzLkVsZW1lbnQuYWRkQ2xhc3ModGhpcy5iYXNlTGJsLCJiYXNlTGJsIik7dGhpcy5iYXNlTGF5ZXJzRGl2PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO09wZW5MYXllcnMuRWxlbWVudC5hZGRDbGFzcyh0aGlzLmJhc2VMYXllcnNEaXYsImJhc2VMYXllcnNEaXYiKTt0aGlzLmRhdGFMYmw9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7dGhpcy5kYXRhTGJsLmlubmVySFRNTD1PcGVuTGF5ZXJzLmkxOG4oIk92ZXJsYXlzIik7T3BlbkxheWVycy5FbGVtZW50LmFkZENsYXNzKHRoaXMuZGF0YUxibCwiZGF0YUxibCIpO3RoaXMuZGF0YUxheWVyc0Rpdj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTtPcGVuTGF5ZXJzLkVsZW1lbnQuYWRkQ2xhc3ModGhpcy5kYXRhTGF5ZXJzRGl2LAoiZGF0YUxheWVyc0RpdiIpO3RoaXMuYXNjZW5kaW5nPyh0aGlzLmxheWVyc0Rpdi5hcHBlbmRDaGlsZCh0aGlzLmJhc2VMYmwpLHRoaXMubGF5ZXJzRGl2LmFwcGVuZENoaWxkKHRoaXMuYmFzZUxheWVyc0RpdiksdGhpcy5sYXllcnNEaXYuYXBwZW5kQ2hpbGQodGhpcy5kYXRhTGJsKSx0aGlzLmxheWVyc0Rpdi5hcHBlbmRDaGlsZCh0aGlzLmRhdGFMYXllcnNEaXYpKToodGhpcy5sYXllcnNEaXYuYXBwZW5kQ2hpbGQodGhpcy5kYXRhTGJsKSx0aGlzLmxheWVyc0Rpdi5hcHBlbmRDaGlsZCh0aGlzLmRhdGFMYXllcnNEaXYpLHRoaXMubGF5ZXJzRGl2LmFwcGVuZENoaWxkKHRoaXMuYmFzZUxibCksdGhpcy5sYXllcnNEaXYuYXBwZW5kQ2hpbGQodGhpcy5iYXNlTGF5ZXJzRGl2KSk7dGhpcy5kaXYuYXBwZW5kQ2hpbGQodGhpcy5sYXllcnNEaXYpO3ZhciBhPU9wZW5MYXllcnMuVXRpbC5nZXRJbWFnZUxvY2F0aW9uKCJsYXllci1zd2l0Y2hlci1tYXhpbWl6ZS5wbmciKTt0aGlzLm1heGltaXplRGl2PQpPcGVuTGF5ZXJzLlV0aWwuY3JlYXRlQWxwaGFJbWFnZURpdigiT3BlbkxheWVyc19Db250cm9sX01heGltaXplRGl2IixudWxsLG51bGwsYSwiYWJzb2x1dGUiKTtPcGVuTGF5ZXJzLkVsZW1lbnQuYWRkQ2xhc3ModGhpcy5tYXhpbWl6ZURpdiwibWF4aW1pemVEaXYgb2xCdXR0b24iKTt0aGlzLm1heGltaXplRGl2LnN0eWxlLmRpc3BsYXk9Im5vbmUiO3RoaXMuZGl2LmFwcGVuZENoaWxkKHRoaXMubWF4aW1pemVEaXYpO2E9T3BlbkxheWVycy5VdGlsLmdldEltYWdlTG9jYXRpb24oImxheWVyLXN3aXRjaGVyLW1pbmltaXplLnBuZyIpO3RoaXMubWluaW1pemVEaXY9T3BlbkxheWVycy5VdGlsLmNyZWF0ZUFscGhhSW1hZ2VEaXYoIk9wZW5MYXllcnNfQ29udHJvbF9NaW5pbWl6ZURpdiIsbnVsbCxudWxsLGEsImFic29sdXRlIik7T3BlbkxheWVycy5FbGVtZW50LmFkZENsYXNzKHRoaXMubWluaW1pemVEaXYsIm1pbmltaXplRGl2IG9sQnV0dG9uIik7dGhpcy5taW5pbWl6ZURpdi5zdHlsZS5kaXNwbGF5PQoibm9uZSI7dGhpcy5kaXYuYXBwZW5kQ2hpbGQodGhpcy5taW5pbWl6ZURpdil9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuQ29udHJvbC5MYXllclN3aXRjaGVyIn0pO09wZW5MYXllcnMuRm9ybWF0LkF0b209T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkZvcm1hdC5YTUwse25hbWVzcGFjZXM6e2F0b206Imh0dHA6Ly93d3cudzMub3JnLzIwMDUvQXRvbSIsZ2VvcnNzOiJodHRwOi8vd3d3Lmdlb3Jzcy5vcmcvZ2VvcnNzIn0sZmVlZFRpdGxlOiJ1bnRpdGxlZCIsZGVmYXVsdEVudHJ5VGl0bGU6InVudGl0bGVkIixnbWxQYXJzZXI6bnVsbCx4eTohMSxyZWFkOmZ1bmN0aW9uKGEpeyJzdHJpbmciPT10eXBlb2YgYSYmKGE9T3BlbkxheWVycy5Gb3JtYXQuWE1MLnByb3RvdHlwZS5yZWFkLmFwcGx5KHRoaXMsW2FdKSk7cmV0dXJuIHRoaXMucGFyc2VGZWF0dXJlcyhhKX0sd3JpdGU6ZnVuY3Rpb24oYSl7dmFyIGI7aWYoT3BlbkxheWVycy5VdGlsLmlzQXJyYXkoYSkpe2I9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJhdG9tOmZlZWQiKTtiLmFwcGVuZENoaWxkKHRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygiYXRvbTp0aXRsZSIse3ZhbHVlOnRoaXMuZmVlZFRpdGxlfSkpOwpmb3IodmFyIGM9MCxkPWEubGVuZ3RoO2M8ZDtjKyspYi5hcHBlbmRDaGlsZCh0aGlzLmJ1aWxkRW50cnlOb2RlKGFbY10pKX1lbHNlIGI9dGhpcy5idWlsZEVudHJ5Tm9kZShhKTtyZXR1cm4gT3BlbkxheWVycy5Gb3JtYXQuWE1MLnByb3RvdHlwZS53cml0ZS5hcHBseSh0aGlzLFtiXSl9LGJ1aWxkQ29udGVudE5vZGU6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJhdG9tOmNvbnRlbnQiLHthdHRyaWJ1dGVzOnt0eXBlOmEudHlwZXx8bnVsbH19KTtpZihhLnNyYyliLnNldEF0dHJpYnV0ZSgic3JjIixhLnNyYyk7ZWxzZSBpZigidGV4dCI9PWEudHlwZXx8bnVsbD09YS50eXBlKWIuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVUZXh0Tm9kZShhLnZhbHVlKSk7ZWxzZSBpZigiaHRtbCI9PWEudHlwZSl7aWYoInN0cmluZyIhPXR5cGVvZiBhLnZhbHVlKXRocm93IkhUTUwgY29udGVudCBtdXN0IGJlIGluIGZvcm0gb2YgYW4gZXNjYXBlZCBzdHJpbmciO2IuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVUZXh0Tm9kZShhLnZhbHVlKSl9ZWxzZSJ4aHRtbCI9PQphLnR5cGU/Yi5hcHBlbmRDaGlsZChhLnZhbHVlKToieGh0bWwiPT1hLnR5cGV8fGEudHlwZS5tYXRjaCgvKFwrfFwvKXhtbCQvKT9iLmFwcGVuZENoaWxkKGEudmFsdWUpOmIuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVUZXh0Tm9kZShhLnZhbHVlKSk7cmV0dXJuIGJ9LGJ1aWxkRW50cnlOb2RlOmZ1bmN0aW9uKGEpe3ZhciBiPWEuYXR0cmlidXRlcyxjPWIuYXRvbXx8e30sZD10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoImF0b206ZW50cnkiKTtpZihjLmF1dGhvcnMpZm9yKHZhciBlPU9wZW5MYXllcnMuVXRpbC5pc0FycmF5KGMuYXV0aG9ycyk/Yy5hdXRob3JzOltjLmF1dGhvcnNdLGY9MCxnPWUubGVuZ3RoO2Y8ZztmKyspZC5hcHBlbmRDaGlsZCh0aGlzLmJ1aWxkUGVyc29uQ29uc3RydWN0Tm9kZSgiYXV0aG9yIixlW2ZdKSk7aWYoYy5jYXRlZ29yaWVzKWZvcih2YXIgZT1PcGVuTGF5ZXJzLlV0aWwuaXNBcnJheShjLmNhdGVnb3JpZXMpP2MuY2F0ZWdvcmllczpbYy5jYXRlZ29yaWVzXSwKaCxmPTAsZz1lLmxlbmd0aDtmPGc7ZisrKWg9ZVtmXSxkLmFwcGVuZENoaWxkKHRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygiYXRvbTpjYXRlZ29yeSIse2F0dHJpYnV0ZXM6e3Rlcm06aC50ZXJtLHNjaGVtZTpoLnNjaGVtZXx8bnVsbCxsYWJlbDpoLmxhYmVsfHxudWxsfX0pKTtjLmNvbnRlbnQmJmQuYXBwZW5kQ2hpbGQodGhpcy5idWlsZENvbnRlbnROb2RlKGMuY29udGVudCkpO2lmKGMuY29udHJpYnV0b3JzKWZvcihlPU9wZW5MYXllcnMuVXRpbC5pc0FycmF5KGMuY29udHJpYnV0b3JzKT9jLmNvbnRyaWJ1dG9yczpbYy5jb250cmlidXRvcnNdLGY9MCxnPWUubGVuZ3RoO2Y8ZztmKyspZC5hcHBlbmRDaGlsZCh0aGlzLmJ1aWxkUGVyc29uQ29uc3RydWN0Tm9kZSgiY29udHJpYnV0b3IiLGVbZl0pKTthLmZpZCYmZC5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoImF0b206aWQiLHt2YWx1ZTphLmZpZH0pKTtpZihjLmxpbmtzKWZvcihlPU9wZW5MYXllcnMuVXRpbC5pc0FycmF5KGMubGlua3MpPwpjLmxpbmtzOltjLmxpbmtzXSxmPTAsZz1lLmxlbmd0aDtmPGc7ZisrKWg9ZVtmXSxkLmFwcGVuZENoaWxkKHRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygiYXRvbTpsaW5rIix7YXR0cmlidXRlczp7aHJlZjpoLmhyZWYscmVsOmgucmVsfHxudWxsLHR5cGU6aC50eXBlfHxudWxsLGhyZWZsYW5nOmguaHJlZmxhbmd8fG51bGwsdGl0bGU6aC50aXRsZXx8bnVsbCxsZW5ndGg6aC5sZW5ndGh8fG51bGx9fSkpO2MucHVibGlzaGVkJiZkLmFwcGVuZENoaWxkKHRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygiYXRvbTpwdWJsaXNoZWQiLHt2YWx1ZTpjLnB1Ymxpc2hlZH0pKTtjLnJpZ2h0cyYmZC5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoImF0b206cmlnaHRzIix7dmFsdWU6Yy5yaWdodHN9KSk7KGMuc3VtbWFyeXx8Yi5kZXNjcmlwdGlvbikmJmQuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJhdG9tOnN1bW1hcnkiLHt2YWx1ZTpjLnN1bW1hcnl8fApiLmRlc2NyaXB0aW9ufSkpO2QuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJhdG9tOnRpdGxlIix7dmFsdWU6Yy50aXRsZXx8Yi50aXRsZXx8dGhpcy5kZWZhdWx0RW50cnlUaXRsZX0pKTtjLnVwZGF0ZWQmJmQuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJhdG9tOnVwZGF0ZWQiLHt2YWx1ZTpjLnVwZGF0ZWR9KSk7YS5nZW9tZXRyeSYmKGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJnZW9yc3M6d2hlcmUiKSxiLmFwcGVuZENoaWxkKHRoaXMuYnVpbGRHZW9tZXRyeU5vZGUoYS5nZW9tZXRyeSkpLGQuYXBwZW5kQ2hpbGQoYikpO3JldHVybiBkfSxpbml0R21sUGFyc2VyOmZ1bmN0aW9uKCl7dGhpcy5nbWxQYXJzZXI9bmV3IE9wZW5MYXllcnMuRm9ybWF0LkdNTC52Myh7eHk6dGhpcy54eSxmZWF0dXJlTlM6Imh0dHA6Ly9leGFtcGxlLmNvbSNmZWF0dXJlIixpbnRlcm5hbFByb2plY3Rpb246dGhpcy5pbnRlcm5hbFByb2plY3Rpb24sCmV4dGVybmFsUHJvamVjdGlvbjp0aGlzLmV4dGVybmFsUHJvamVjdGlvbn0pfSxidWlsZEdlb21ldHJ5Tm9kZTpmdW5jdGlvbihhKXt0aGlzLmdtbFBhcnNlcnx8dGhpcy5pbml0R21sUGFyc2VyKCk7cmV0dXJuIHRoaXMuZ21sUGFyc2VyLndyaXRlTm9kZSgiZmVhdHVyZTpfZ2VvbWV0cnkiLGEpLmZpcnN0Q2hpbGR9LGJ1aWxkUGVyc29uQ29uc3RydWN0Tm9kZTpmdW5jdGlvbihhLGIpe3ZhciBjPVsidXJpIiwiZW1haWwiXSxkPXRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygiYXRvbToiK2EpO2QuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJhdG9tOm5hbWUiLHt2YWx1ZTpiLm5hbWV9KSk7Zm9yKHZhciBlPTAsZj1jLmxlbmd0aDtlPGY7ZSsrKWJbY1tlXV0mJmQuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJhdG9tOiIrY1tlXSx7dmFsdWU6YltjW2VdXX0pKTtyZXR1cm4gZH0sZ2V0Rmlyc3RDaGlsZFZhbHVlOmZ1bmN0aW9uKGEsYixjLApkKXtyZXR1cm4oYT10aGlzLmdldEVsZW1lbnRzQnlUYWdOYW1lTlMoYSxiLGMpKSYmMDxhLmxlbmd0aD90aGlzLmdldENoaWxkVmFsdWUoYVswXSxkKTpkfSxwYXJzZUZlYXR1cmU6ZnVuY3Rpb24oYSl7dmFyIGI9e30sYz1udWxsLGQ9bnVsbCxlPW51bGwsZj10aGlzLm5hbWVzcGFjZXMuYXRvbTt0aGlzLnBhcnNlUGVyc29uQ29uc3RydWN0cyhhLCJhdXRob3IiLGIpO2Q9dGhpcy5nZXRFbGVtZW50c0J5VGFnTmFtZU5TKGEsZiwiY2F0ZWdvcnkiKTswPGQubGVuZ3RoJiYoYi5jYXRlZ29yaWVzPVtdKTtmb3IodmFyIGc9MCxoPWQubGVuZ3RoO2c8aDtnKyspe2M9e307Yy50ZXJtPWRbZ10uZ2V0QXR0cmlidXRlKCJ0ZXJtIik7aWYoZT1kW2ddLmdldEF0dHJpYnV0ZSgic2NoZW1lIikpYy5zY2hlbWU9ZTtpZihlPWRbZ10uZ2V0QXR0cmlidXRlKCJsYWJlbCIpKWMubGFiZWw9ZTtiLmNhdGVnb3JpZXMucHVzaChjKX1kPXRoaXMuZ2V0RWxlbWVudHNCeVRhZ05hbWVOUyhhLGYsImNvbnRlbnQiKTsKaWYoMDxkLmxlbmd0aCl7Yz17fTtpZihlPWRbMF0uZ2V0QXR0cmlidXRlKCJ0eXBlIikpYy50eXBlPWU7KGU9ZFswXS5nZXRBdHRyaWJ1dGUoInNyYyIpKT9jLnNyYz1lOigidGV4dCI9PWMudHlwZXx8Imh0bWwiPT1jLnR5cGV8fG51bGw9PWMudHlwZT9jLnZhbHVlPXRoaXMuZ2V0Rmlyc3RDaGlsZFZhbHVlKGEsZiwiY29udGVudCIsbnVsbCk6InhodG1sIj09Yy50eXBlfHxjLnR5cGUubWF0Y2goLyhcK3xcLyl4bWwkLyk/Yy52YWx1ZT10aGlzLmdldENoaWxkRWwoZFswXSk6Yy52YWx1ZT10aGlzLmdldEZpcnN0Q2hpbGRWYWx1ZShhLGYsImNvbnRlbnQiLG51bGwpLGIuY29udGVudD1jKX10aGlzLnBhcnNlUGVyc29uQ29uc3RydWN0cyhhLCJjb250cmlidXRvciIsYik7Yi5pZD10aGlzLmdldEZpcnN0Q2hpbGRWYWx1ZShhLGYsImlkIixudWxsKTtkPXRoaXMuZ2V0RWxlbWVudHNCeVRhZ05hbWVOUyhhLGYsImxpbmsiKTswPGQubGVuZ3RoJiYoYi5saW5rcz1BcnJheShkLmxlbmd0aCkpOwpmb3IodmFyIGs9WyJyZWwiLCJ0eXBlIiwiaHJlZmxhbmciLCJ0aXRsZSIsImxlbmd0aCJdLGc9MCxoPWQubGVuZ3RoO2c8aDtnKyspe2M9e307Yy5ocmVmPWRbZ10uZ2V0QXR0cmlidXRlKCJocmVmIik7Zm9yKHZhciBsPTAsbT1rLmxlbmd0aDtsPG07bCsrKShlPWRbZ10uZ2V0QXR0cmlidXRlKGtbbF0pKSYmKGNba1tsXV09ZSk7Yi5saW5rc1tnXT1jfWlmKGM9dGhpcy5nZXRGaXJzdENoaWxkVmFsdWUoYSxmLCJwdWJsaXNoZWQiLG51bGwpKWIucHVibGlzaGVkPWM7aWYoYz10aGlzLmdldEZpcnN0Q2hpbGRWYWx1ZShhLGYsInJpZ2h0cyIsbnVsbCkpYi5yaWdodHM9YztpZihjPXRoaXMuZ2V0Rmlyc3RDaGlsZFZhbHVlKGEsZiwic3VtbWFyeSIsbnVsbCkpYi5zdW1tYXJ5PWM7Yi50aXRsZT10aGlzLmdldEZpcnN0Q2hpbGRWYWx1ZShhLGYsInRpdGxlIixudWxsKTtiLnVwZGF0ZWQ9dGhpcy5nZXRGaXJzdENoaWxkVmFsdWUoYSxmLCJ1cGRhdGVkIixudWxsKTtjPXt0aXRsZTpiLnRpdGxlLApkZXNjcmlwdGlvbjpiLnN1bW1hcnksYXRvbTpifTthPXRoaXMucGFyc2VMb2NhdGlvbnMoYSlbMF07YT1uZXcgT3BlbkxheWVycy5GZWF0dXJlLlZlY3RvcihhLGMpO2EuZmlkPWIuaWQ7cmV0dXJuIGF9LHBhcnNlRmVhdHVyZXM6ZnVuY3Rpb24oYSl7dmFyIGI9W10sYz10aGlzLmdldEVsZW1lbnRzQnlUYWdOYW1lTlMoYSx0aGlzLm5hbWVzcGFjZXMuYXRvbSwiZW50cnkiKTswPT1jLmxlbmd0aCYmKGM9W2FdKTthPTA7Zm9yKHZhciBkPWMubGVuZ3RoO2E8ZDthKyspYi5wdXNoKHRoaXMucGFyc2VGZWF0dXJlKGNbYV0pKTtyZXR1cm4gYn0scGFyc2VMb2NhdGlvbnM6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5uYW1lc3BhY2VzLmdlb3JzcyxjPXtjb21wb25lbnRzOltdfSxkPXRoaXMuZ2V0RWxlbWVudHNCeVRhZ05hbWVOUyhhLGIsIndoZXJlIik7aWYoZCYmMDxkLmxlbmd0aCl7dGhpcy5nbWxQYXJzZXJ8fHRoaXMuaW5pdEdtbFBhcnNlcigpO2Zvcih2YXIgZT0wLGY9ZC5sZW5ndGg7ZTwKZjtlKyspdGhpcy5nbWxQYXJzZXIucmVhZENoaWxkTm9kZXMoZFtlXSxjKX1jPWMuY29tcG9uZW50cztpZigoZD10aGlzLmdldEVsZW1lbnRzQnlUYWdOYW1lTlMoYSxiLCJwb2ludCIpKSYmMDxkLmxlbmd0aClmb3IoZT0wLGY9ZC5sZW5ndGg7ZTxmO2UrKyl7dmFyIGc9T3BlbkxheWVycy5TdHJpbmcudHJpbShkW2VdLmZpcnN0Q2hpbGQubm9kZVZhbHVlKS5zcGxpdCgvXHMrLyk7MiE9Zy5sZW5ndGgmJihnPU9wZW5MYXllcnMuU3RyaW5nLnRyaW0oZFtlXS5maXJzdENoaWxkLm5vZGVWYWx1ZSkuc3BsaXQoL1xzKixccyovKSk7Yy5wdXNoKG5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KGdbMV0sZ1swXSkpfXZhciBoPXRoaXMuZ2V0RWxlbWVudHNCeVRhZ05hbWVOUyhhLGIsImxpbmUiKTtpZihoJiYwPGgubGVuZ3RoKWZvcih2YXIgayxlPTAsZj1oLmxlbmd0aDtlPGY7ZSsrKXtkPU9wZW5MYXllcnMuU3RyaW5nLnRyaW0oaFtlXS5maXJzdENoaWxkLm5vZGVWYWx1ZSkuc3BsaXQoL1xzKy8pOwprPVtdO2Zvcih2YXIgbD0wLG09ZC5sZW5ndGg7bDxtO2wrPTIpZz1uZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludChkW2wrMV0sZFtsXSksay5wdXNoKGcpO2MucHVzaChuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5MaW5lU3RyaW5nKGspKX1pZigoYT10aGlzLmdldEVsZW1lbnRzQnlUYWdOYW1lTlMoYSxiLCJwb2x5Z29uIikpJiYwPGEubGVuZ3RoKWZvcihlPTAsZj1hLmxlbmd0aDtlPGY7ZSsrKXtkPU9wZW5MYXllcnMuU3RyaW5nLnRyaW0oYVtlXS5maXJzdENoaWxkLm5vZGVWYWx1ZSkuc3BsaXQoL1xzKy8pO2s9W107bD0wO2ZvcihtPWQubGVuZ3RoO2w8bTtsKz0yKWc9bmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoZFtsKzFdLGRbbF0pLGsucHVzaChnKTtjLnB1c2gobmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9seWdvbihbbmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuTGluZWFyUmluZyhrKV0pKX1pZih0aGlzLmludGVybmFsUHJvamVjdGlvbiYmdGhpcy5leHRlcm5hbFByb2plY3Rpb24pZm9yKGU9CjAsZj1jLmxlbmd0aDtlPGY7ZSsrKWNbZV0mJmNbZV0udHJhbnNmb3JtKHRoaXMuZXh0ZXJuYWxQcm9qZWN0aW9uLHRoaXMuaW50ZXJuYWxQcm9qZWN0aW9uKTtyZXR1cm4gY30scGFyc2VQZXJzb25Db25zdHJ1Y3RzOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD1bXSxlPXRoaXMubmFtZXNwYWNlcy5hdG9tO2E9dGhpcy5nZXRFbGVtZW50c0J5VGFnTmFtZU5TKGEsZSxiKTtmb3IodmFyIGY9WyJ1cmkiLCJlbWFpbCJdLGc9MCxoPWEubGVuZ3RoO2c8aDtnKyspe3ZhciBrPXt9O2submFtZT10aGlzLmdldEZpcnN0Q2hpbGRWYWx1ZShhW2ddLGUsIm5hbWUiLG51bGwpO2Zvcih2YXIgbD0wLG09Zi5sZW5ndGg7bDxtO2wrKyl7dmFyIG49dGhpcy5nZXRGaXJzdENoaWxkVmFsdWUoYVtnXSxlLGZbbF0sbnVsbCk7biYmKGtbZltsXV09bil9ZC5wdXNoKGspfTA8ZC5sZW5ndGgmJihjW2IrInMiXT1kKX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Gb3JtYXQuQXRvbSJ9KTtPcGVuTGF5ZXJzLkNvbnRyb2wuS2V5Ym9hcmREZWZhdWx0cz1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuQ29udHJvbCx7YXV0b0FjdGl2YXRlOiEwLHNsaWRlRmFjdG9yOjc1LG9ic2VydmVFbGVtZW50Om51bGwsZHJhdzpmdW5jdGlvbigpe3RoaXMuaGFuZGxlcj1uZXcgT3BlbkxheWVycy5IYW5kbGVyLktleWJvYXJkKHRoaXMse2tleWRvd246dGhpcy5kZWZhdWx0S2V5UHJlc3N9LHtvYnNlcnZlRWxlbWVudDp0aGlzLm9ic2VydmVFbGVtZW50fHxkb2N1bWVudH0pfSxkZWZhdWx0S2V5UHJlc3M6ZnVuY3Rpb24oYSl7dmFyIGIsYz0hMDtiPU9wZW5MYXllcnMuRXZlbnQuZWxlbWVudChhKTtpZighYnx8IklOUFVUIiE9Yi50YWdOYW1lJiYiVEVYVEFSRUEiIT1iLnRhZ05hbWUmJiJTRUxFQ1QiIT1iLnRhZ05hbWUpe3N3aXRjaChhLmtleUNvZGUpe2Nhc2UgT3BlbkxheWVycy5FdmVudC5LRVlfTEVGVDp0aGlzLm1hcC5wYW4oLXRoaXMuc2xpZGVGYWN0b3IsMCk7YnJlYWs7Y2FzZSBPcGVuTGF5ZXJzLkV2ZW50LktFWV9SSUdIVDp0aGlzLm1hcC5wYW4odGhpcy5zbGlkZUZhY3RvciwKMCk7YnJlYWs7Y2FzZSBPcGVuTGF5ZXJzLkV2ZW50LktFWV9VUDp0aGlzLm1hcC5wYW4oMCwtdGhpcy5zbGlkZUZhY3Rvcik7YnJlYWs7Y2FzZSBPcGVuTGF5ZXJzLkV2ZW50LktFWV9ET1dOOnRoaXMubWFwLnBhbigwLHRoaXMuc2xpZGVGYWN0b3IpO2JyZWFrO2Nhc2UgMzM6Yj10aGlzLm1hcC5nZXRTaXplKCk7dGhpcy5tYXAucGFuKDAsLTAuNzUqYi5oKTticmVhaztjYXNlIDM0OmI9dGhpcy5tYXAuZ2V0U2l6ZSgpO3RoaXMubWFwLnBhbigwLDAuNzUqYi5oKTticmVhaztjYXNlIDM1OmI9dGhpcy5tYXAuZ2V0U2l6ZSgpO3RoaXMubWFwLnBhbigwLjc1KmIudywwKTticmVhaztjYXNlIDM2OmI9dGhpcy5tYXAuZ2V0U2l6ZSgpO3RoaXMubWFwLnBhbigtMC43NSpiLncsMCk7YnJlYWs7Y2FzZSA0MzpjYXNlIDYxOmNhc2UgMTg3OmNhc2UgMTA3OnRoaXMubWFwLnpvb21JbigpO2JyZWFrO2Nhc2UgNDU6Y2FzZSAxMDk6Y2FzZSAxODk6Y2FzZSA5NTp0aGlzLm1hcC56b29tT3V0KCk7CmJyZWFrO2RlZmF1bHQ6Yz0hMX1jJiZPcGVuTGF5ZXJzLkV2ZW50LnN0b3AoYSl9fSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkNvbnRyb2wuS2V5Ym9hcmREZWZhdWx0cyJ9KTtPcGVuTGF5ZXJzLkZvcm1hdC5XTVRTQ2FwYWJpbGl0aWVzLnYxXzBfMD1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuRm9ybWF0Lk9XU0NvbW1vbi52MV8xXzAse3ZlcnNpb246IjEuMC4wIixuYW1lc3BhY2VzOntvd3M6Imh0dHA6Ly93d3cub3Blbmdpcy5uZXQvb3dzLzEuMSIsd210czoiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC93bXRzLzEuMCIseGxpbms6Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsifSx5eDpudWxsLGRlZmF1bHRQcmVmaXg6IndtdHMiLGluaXRpYWxpemU6ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5Gb3JtYXQuWE1MLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsW2FdKTt0aGlzLm9wdGlvbnM9YTthPU9wZW5MYXllcnMuVXRpbC5leHRlbmQoe30sT3BlbkxheWVycy5Gb3JtYXQuV01UU0NhcGFiaWxpdGllcy5wcm90b3R5cGUueXgpO3RoaXMueXg9T3BlbkxheWVycy5VdGlsLmV4dGVuZChhLHRoaXMueXgpfSxyZWFkOmZ1bmN0aW9uKGEpeyJzdHJpbmciPT0KdHlwZW9mIGEmJihhPU9wZW5MYXllcnMuRm9ybWF0LlhNTC5wcm90b3R5cGUucmVhZC5hcHBseSh0aGlzLFthXSkpO2EmJjk9PWEubm9kZVR5cGUmJihhPWEuZG9jdW1lbnRFbGVtZW50KTt2YXIgYj17fTt0aGlzLnJlYWROb2RlKGEsYik7Yi52ZXJzaW9uPXRoaXMudmVyc2lvbjtyZXR1cm4gYn0scmVhZGVyczp7d210czp7Q2FwYWJpbGl0aWVzOmZ1bmN0aW9uKGEsYil7dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGIpfSxDb250ZW50czpmdW5jdGlvbihhLGIpe2IuY29udGVudHM9e307Yi5jb250ZW50cy5sYXllcnM9W107Yi5jb250ZW50cy50aWxlTWF0cml4U2V0cz17fTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYi5jb250ZW50cyl9LExheWVyOmZ1bmN0aW9uKGEsYil7dmFyIGM9e3N0eWxlczpbXSxmb3JtYXRzOltdLGRpbWVuc2lvbnM6W10sdGlsZU1hdHJpeFNldExpbmtzOltdLGxheWVyczpbXX07dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGMpO2IubGF5ZXJzLnB1c2goYyl9LFN0eWxlOmZ1bmN0aW9uKGEsCmIpe3ZhciBjPXt9O2MuaXNEZWZhdWx0PSJ0cnVlIj09PWEuZ2V0QXR0cmlidXRlKCJpc0RlZmF1bHQiKTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYyk7Yi5zdHlsZXMucHVzaChjKX0sRm9ybWF0OmZ1bmN0aW9uKGEsYil7Yi5mb3JtYXRzLnB1c2godGhpcy5nZXRDaGlsZFZhbHVlKGEpKX0sVGlsZU1hdHJpeFNldExpbms6ZnVuY3Rpb24oYSxiKXt2YXIgYz17fTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYyk7Yi50aWxlTWF0cml4U2V0TGlua3MucHVzaChjKX0sVGlsZU1hdHJpeFNldDpmdW5jdGlvbihhLGIpe2lmKGIubGF5ZXJzKXt2YXIgYz17bWF0cml4SWRzOltdfTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYyk7Yi50aWxlTWF0cml4U2V0c1tjLmlkZW50aWZpZXJdPWN9ZWxzZSBiLnRpbGVNYXRyaXhTZXQ9dGhpcy5nZXRDaGlsZFZhbHVlKGEpfSxUaWxlTWF0cml4OmZ1bmN0aW9uKGEsYil7dmFyIGM9e3N1cHBvcnRlZENSUzpiLnN1cHBvcnRlZENSU307dGhpcy5yZWFkQ2hpbGROb2RlcyhhLApjKTtiLm1hdHJpeElkcy5wdXNoKGMpfSxTY2FsZURlbm9taW5hdG9yOmZ1bmN0aW9uKGEsYil7Yi5zY2FsZURlbm9taW5hdG9yPXBhcnNlRmxvYXQodGhpcy5nZXRDaGlsZFZhbHVlKGEpKX0sVG9wTGVmdENvcm5lcjpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuZ2V0Q2hpbGRWYWx1ZShhKS5zcGxpdCgiICIpLGQ7Yi5zdXBwb3J0ZWRDUlMmJihkPWIuc3VwcG9ydGVkQ1JTLnJlcGxhY2UoL3VybjpvZ2M6ZGVmOmNyczooXHcrKTouKzooXHcrKSQvLCJ1cm46b2djOmRlZjpjcnM6JDE6OiQyIiksZD0hIXRoaXMueXhbZF0pO2IudG9wTGVmdENvcm5lcj1kP25ldyBPcGVuTGF5ZXJzLkxvbkxhdChjWzFdLGNbMF0pOm5ldyBPcGVuTGF5ZXJzLkxvbkxhdChjWzBdLGNbMV0pfSxUaWxlV2lkdGg6ZnVuY3Rpb24oYSxiKXtiLnRpbGVXaWR0aD1wYXJzZUludCh0aGlzLmdldENoaWxkVmFsdWUoYSkpfSxUaWxlSGVpZ2h0OmZ1bmN0aW9uKGEsYil7Yi50aWxlSGVpZ2h0PXBhcnNlSW50KHRoaXMuZ2V0Q2hpbGRWYWx1ZShhKSl9LApNYXRyaXhXaWR0aDpmdW5jdGlvbihhLGIpe2IubWF0cml4V2lkdGg9cGFyc2VJbnQodGhpcy5nZXRDaGlsZFZhbHVlKGEpKX0sTWF0cml4SGVpZ2h0OmZ1bmN0aW9uKGEsYil7Yi5tYXRyaXhIZWlnaHQ9cGFyc2VJbnQodGhpcy5nZXRDaGlsZFZhbHVlKGEpKX0sUmVzb3VyY2VVUkw6ZnVuY3Rpb24oYSxiKXtiLnJlc291cmNlVXJsPWIucmVzb3VyY2VVcmx8fHt9O3ZhciBjPWEuZ2V0QXR0cmlidXRlKCJyZXNvdXJjZVR5cGUiKTtiLnJlc291cmNlVXJsc3x8KGIucmVzb3VyY2VVcmxzPVtdKTtjPWIucmVzb3VyY2VVcmxbY109e2Zvcm1hdDphLmdldEF0dHJpYnV0ZSgiZm9ybWF0IiksdGVtcGxhdGU6YS5nZXRBdHRyaWJ1dGUoInRlbXBsYXRlIikscmVzb3VyY2VUeXBlOmN9O2IucmVzb3VyY2VVcmxzLnB1c2goYyl9LFdTREw6ZnVuY3Rpb24oYSxiKXtiLndzZGw9e307Yi53c2RsLmhyZWY9YS5nZXRBdHRyaWJ1dGUoInhsaW5rOmhyZWYiKX0sU2VydmljZU1ldGFkYXRhVVJMOmZ1bmN0aW9uKGEsCmIpe2Iuc2VydmljZU1ldGFkYXRhVXJsPXt9O2Iuc2VydmljZU1ldGFkYXRhVXJsLmhyZWY9YS5nZXRBdHRyaWJ1dGUoInhsaW5rOmhyZWYiKX0sTGVnZW5kVVJMOmZ1bmN0aW9uKGEsYil7Yi5sZWdlbmQ9e307Yi5sZWdlbmQuaHJlZj1hLmdldEF0dHJpYnV0ZSgieGxpbms6aHJlZiIpO2IubGVnZW5kLmZvcm1hdD1hLmdldEF0dHJpYnV0ZSgiZm9ybWF0Iil9LERpbWVuc2lvbjpmdW5jdGlvbihhLGIpe3ZhciBjPXt2YWx1ZXM6W119O3RoaXMucmVhZENoaWxkTm9kZXMoYSxjKTtiLmRpbWVuc2lvbnMucHVzaChjKX0sRGVmYXVsdDpmdW5jdGlvbihhLGIpe2JbImRlZmF1bHQiXT10aGlzLmdldENoaWxkVmFsdWUoYSl9LFZhbHVlOmZ1bmN0aW9uKGEsYil7Yi52YWx1ZXMucHVzaCh0aGlzLmdldENoaWxkVmFsdWUoYSkpfX0sb3dzOk9wZW5MYXllcnMuRm9ybWF0Lk9XU0NvbW1vbi52MV8xXzAucHJvdG90eXBlLnJlYWRlcnMub3dzfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkZvcm1hdC5XTVRTQ2FwYWJpbGl0aWVzLnYxXzBfMCJ9KTs=",
                "body": "LyoKCiAgT3BlbkxheWVycy5qcyAtLSBPcGVuTGF5ZXJzIE1hcCBWaWV3ZXIgTGlicmFyeQoKICBDb3B5cmlnaHQgKGMpIDIwMDYtMjAxMyBieSBPcGVuTGF5ZXJzIENvbnRyaWJ1dG9ycwogIFB1Ymxpc2hlZCB1bmRlciB0aGUgMi1jbGF1c2UgQlNEIGxpY2Vuc2UuCiAgU2VlIGh0dHA6Ly9vcGVubGF5ZXJzLm9yZy9kZXYvbGljZW5zZS50eHQgZm9yIHRoZSBmdWxsIHRleHQgb2YgdGhlIGxpY2Vuc2UsIGFuZCBodHRwOi8vb3BlbmxheWVycy5vcmcvZGV2L2F1dGhvcnMudHh0IGZvciBmdWxsIGxpc3Qgb2YgY29udHJpYnV0b3JzLgoKICBJbmNsdWRlcyBjb21wcmVzc2VkIGNvZGUgdW5kZXIgdGhlIGZvbGxvd2luZyBsaWNlbnNlczoKCiAgKEZvciB1bmNvbXByZXNzZWQgdmVyc2lvbnMgb2YgdGhlIGNvZGUgdXNlZCwgcGxlYXNlIHNlZSB0aGUKICBPcGVuTGF5ZXJzIEdpdGh1YiByZXBvc2l0b3J5OiA8aHR0cHM6Ly9naXRodWIuY29tL29wZW5sYXllcnMvb3BlbmxheWVycz4pCgoqLwoKLyoqCiAqIENvbnRhaW5zIFhNTEh0dHBSZXF1ZXN0LmpzIDxodHRwOi8vY29kZS5nb29nbGUuY29tL3AveG1saHR0cHJlcXVlc3QvPgogKiBDb3B5cmlnaHQgMjAwNyBTZXJnZXkgSWxpbnNreSAoaHR0cDovL3d3dy5pbGluc2t5LmNvbSkKICoKICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKi8KCi8qKgogKiBPcGVuTGF5ZXJzLlV0aWwucGFnZVBvc2l0aW9uIGlzIGJhc2VkIG9uIFlhaG9vJ3MgZ2V0WFkgbWV0aG9kLCB3aGljaCBpcwogKiBDb3B5cmlnaHQgKGMpIDIwMDYsIFlhaG9vISBJbmMuCiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuCiAqIAogKiBSZWRpc3RyaWJ1dGlvbiBhbmQgdXNlIG9mIHRoaXMgc29mdHdhcmUgaW4gc291cmNlIGFuZCBiaW5hcnkgZm9ybXMsIHdpdGggb3IKICogd2l0aG91dCBtb2RpZmljYXRpb24sIGFyZSBwZXJtaXR0ZWQgcHJvdmlkZWQgdGhhdCB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnMKICogYXJlIG1ldDoKICogCiAqICogUmVkaXN0cmlidXRpb25zIG9mIHNvdXJjZSBjb2RlIG11c3QgcmV0YWluIHRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlLAogKiAgIHRoaXMgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIuCiAqIAogKiAqIFJlZGlzdHJpYnV0aW9ucyBpbiBiaW5hcnkgZm9ybSBtdXN0IHJlcHJvZHVjZSB0aGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSwKICogICB0aGlzIGxpc3Qgb2YgY29uZGl0aW9ucyBhbmQgdGhlIGZvbGxvd2luZyBkaXNjbGFpbWVyIGluIHRoZSBkb2N1bWVudGF0aW9uCiAqICAgYW5kL29yIG90aGVyIG1hdGVyaWFscyBwcm92aWRlZCB3aXRoIHRoZSBkaXN0cmlidXRpb24uCiAqIAogKiAqIE5laXRoZXIgdGhlIG5hbWUgb2YgWWFob28hIEluYy4gbm9yIHRoZSBuYW1lcyBvZiBpdHMgY29udHJpYnV0b3JzIG1heSBiZQogKiAgIHVzZWQgdG8gZW5kb3JzZSBvciBwcm9tb3RlIHByb2R1Y3RzIGRlcml2ZWQgZnJvbSB0aGlzIHNvZnR3YXJlIHdpdGhvdXQKICogICBzcGVjaWZpYyBwcmlvciB3cml0dGVuIHBlcm1pc3Npb24gb2YgWWFob28hIEluYy4KICogCiAqIFRISVMgU09GVFdBUkUgSVMgUFJPVklERUQgQlkgVEhFIENPUFlSSUdIVCBIT0xERVJTIEFORCBDT05UUklCVVRPUlMgIkFTIElTIgogKiBBTkQgQU5ZIEVYUFJFU1MgT1IgSU1QTElFRCBXQVJSQU5USUVTLCBJTkNMVURJTkcsIEJVVCBOT1QgTElNSVRFRCBUTywgVEhFCiAqIElNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFkgQU5EIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFCiAqIEFSRSBESVNDTEFJTUVELiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQ09QWVJJR0hUIE9XTkVSIE9SIENPTlRSSUJVVE9SUyBCRQogKiBMSUFCTEUgRk9SIEFOWSBESVJFQ1QsIElORElSRUNULCBJTkNJREVOVEFMLCBTUEVDSUFMLCBFWEVNUExBUlksIE9SCiAqIENPTlNFUVVFTlRJQUwgREFNQUdFUyAoSU5DTFVESU5HLCBCVVQgTk9UIExJTUlURUQgVE8sIFBST0NVUkVNRU5UIE9GCiAqIFNVQlNUSVRVVEUgR09PRFMgT1IgU0VSVklDRVM7IExPU1MgT0YgVVNFLCBEQVRBLCBPUiBQUk9GSVRTOyBPUiBCVVNJTkVTUwogKiBJTlRFUlJVUFRJT04pIEhPV0VWRVIgQ0FVU0VEIEFORCBPTiBBTlkgVEhFT1JZIE9GIExJQUJJTElUWSwgV0hFVEhFUiBJTgogKiBDT05UUkFDVCwgU1RSSUNUIExJQUJJTElUWSwgT1IgVE9SVCAoSU5DTFVESU5HIE5FR0xJR0VOQ0UgT1IgT1RIRVJXSVNFKQogKiBBUklTSU5HIElOIEFOWSBXQVkgT1VUIE9GIFRIRSBVU0UgT0YgVEhJUyBTT0ZUV0FSRSwgRVZFTiBJRiBBRFZJU0VEIE9GIFRIRSAKICogUE9TU0lCSUxJVFkgT0YgU1VDSCBEQU1BR0UuCiAqLwp2YXIgT3BlbkxheWVycz17VkVSU0lPTl9OVU1CRVI6IlJlbGVhc2UgMi4xMy4xIixzaW5nbGVGaWxlOiEwLF9nZXRTY3JpcHRMb2NhdGlvbjpmdW5jdGlvbigpe2Zvcih2YXIgYT0vKF58KC4qP1wvKSkoT3BlbkxheWVyc1teXC9dKj9cLmpzKShcP3wkKS8sYj1kb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgic2NyaXB0IiksYyxkPSIiLGU9MCxmPWIubGVuZ3RoO2U8ZjtlKyspaWYoYz1iW2VdLmdldEF0dHJpYnV0ZSgic3JjIikpaWYoYz1jLm1hdGNoKGEpKXtkPWNbMV07YnJlYWt9cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGR9fSgpLEltZ1BhdGg6IiJ9O09wZW5MYXllcnMuQ2xhc3M9ZnVuY3Rpb24oKXt2YXIgYT1hcmd1bWVudHMubGVuZ3RoLGI9YXJndW1lbnRzWzBdLGM9YXJndW1lbnRzW2EtMV0sZD0iZnVuY3Rpb24iPT10eXBlb2YgYy5pbml0aWFsaXplP2MuaW5pdGlhbGl6ZTpmdW5jdGlvbigpe2IucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxhcmd1bWVudHMpfTsxPGE/KGE9W2QsYl0uY29uY2F0KEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cykuc2xpY2UoMSxhLTEpLGMpLE9wZW5MYXllcnMuaW5oZXJpdC5hcHBseShudWxsLGEpKTpkLnByb3RvdHlwZT1jO3JldHVybiBkfTsKT3BlbkxheWVycy5pbmhlcml0PWZ1bmN0aW9uKGEsYil7dmFyIGM9ZnVuY3Rpb24oKXt9O2MucHJvdG90eXBlPWIucHJvdG90eXBlO2EucHJvdG90eXBlPW5ldyBjO3ZhciBkLGUsYz0yO2ZvcihkPWFyZ3VtZW50cy5sZW5ndGg7YzxkO2MrKyllPWFyZ3VtZW50c1tjXSwiZnVuY3Rpb24iPT09dHlwZW9mIGUmJihlPWUucHJvdG90eXBlKSxPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKGEucHJvdG90eXBlLGUpfTtPcGVuTGF5ZXJzLlV0aWw9T3BlbkxheWVycy5VdGlsfHx7fTtPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kPWZ1bmN0aW9uKGEsYil7YT1hfHx7fTtpZihiKXtmb3IodmFyIGMgaW4gYil7dmFyIGQ9YltjXTt2b2lkIDAhPT1kJiYoYVtjXT1kKX0iZnVuY3Rpb24iPT10eXBlb2Ygd2luZG93LkV2ZW50JiZiIGluc3RhbmNlb2Ygd2luZG93LkV2ZW50fHwoIWIuaGFzT3duUHJvcGVydHl8fCFiLmhhc093blByb3BlcnR5KCJ0b1N0cmluZyIpKXx8KGEudG9TdHJpbmc9Yi50b1N0cmluZyl9cmV0dXJuIGF9O09wZW5MYXllcnMuU3RyaW5nPXtzdGFydHNXaXRoOmZ1bmN0aW9uKGEsYil7cmV0dXJuIDA9PWEuaW5kZXhPZihiKX0sY29udGFpbnM6ZnVuY3Rpb24oYSxiKXtyZXR1cm4tMSE9YS5pbmRleE9mKGIpfSx0cmltOmZ1bmN0aW9uKGEpe3JldHVybiBhLnJlcGxhY2UoL15cc1xzKi8sIiIpLnJlcGxhY2UoL1xzXHMqJC8sIiIpfSxjYW1lbGl6ZTpmdW5jdGlvbihhKXthPWEuc3BsaXQoIi0iKTtmb3IodmFyIGI9YVswXSxjPTEsZD1hLmxlbmd0aDtjPGQ7YysrKXZhciBlPWFbY10sYj1iKyhlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpK2Uuc3Vic3RyaW5nKDEpKTtyZXR1cm4gYn0sZm9ybWF0OmZ1bmN0aW9uKGEsYixjKXtifHwoYj13aW5kb3cpO3JldHVybiBhLnJlcGxhY2UoT3BlbkxheWVycy5TdHJpbmcudG9rZW5SZWdFeCxmdW5jdGlvbihhLGUpe2Zvcih2YXIgZixnPWUuc3BsaXQoL1wuKy8pLGg9MDtoPGcubGVuZ3RoO2grKyl7MD09aCYmKGY9Yik7aWYodm9pZCAwPT09ZilicmVhazsKZj1mW2dbaF1dfSJmdW5jdGlvbiI9PXR5cGVvZiBmJiYoZj1jP2YuYXBwbHkobnVsbCxjKTpmKCkpO3JldHVybiJ1bmRlZmluZWQiPT10eXBlb2YgZj8idW5kZWZpbmVkIjpmfSl9LHRva2VuUmVnRXg6L1wkXHsoW1x3Ll0rPylcfS9nLG51bWJlclJlZ0V4Oi9eKFsrLV0/KSg/PVxkfFwuXGQpXGQqKFwuXGQqKT8oW0VlXShbKy1dP1xkKykpPyQvLGlzTnVtZXJpYzpmdW5jdGlvbihhKXtyZXR1cm4gT3BlbkxheWVycy5TdHJpbmcubnVtYmVyUmVnRXgudGVzdChhKX0sbnVtZXJpY0lmOmZ1bmN0aW9uKGEsYil7dmFyIGM9YTshMD09PWImJihudWxsIT1hJiZhLnJlcGxhY2UpJiYoYT1hLnJlcGxhY2UoL15ccyp8XHMqJC9nLCIiKSk7cmV0dXJuIE9wZW5MYXllcnMuU3RyaW5nLmlzTnVtZXJpYyhhKT9wYXJzZUZsb2F0KGEpOmN9fTsKT3BlbkxheWVycy5OdW1iZXI9e2RlY2ltYWxTZXBhcmF0b3I6Ii4iLHRob3VzYW5kc1NlcGFyYXRvcjoiLCIsbGltaXRTaWdEaWdzOmZ1bmN0aW9uKGEsYil7dmFyIGM9MDswPGImJihjPXBhcnNlRmxvYXQoYS50b1ByZWNpc2lvbihiKSkpO3JldHVybiBjfSxmb3JtYXQ6ZnVuY3Rpb24oYSxiLGMsZCl7Yj0idW5kZWZpbmVkIiE9dHlwZW9mIGI/YjowO2M9InVuZGVmaW5lZCIhPXR5cGVvZiBjP2M6T3BlbkxheWVycy5OdW1iZXIudGhvdXNhbmRzU2VwYXJhdG9yO2Q9InVuZGVmaW5lZCIhPXR5cGVvZiBkP2Q6T3BlbkxheWVycy5OdW1iZXIuZGVjaW1hbFNlcGFyYXRvcjtudWxsIT1iJiYoYT1wYXJzZUZsb2F0KGEudG9GaXhlZChiKSkpO3ZhciBlPWEudG9TdHJpbmcoKS5zcGxpdCgiLiIpOzE9PWUubGVuZ3RoJiZudWxsPT1iJiYoYj0wKTthPWVbMF07aWYoYylmb3IodmFyIGY9LygtP1swLTldKykoWzAtOV17M30pLztmLnRlc3QoYSk7KWE9YS5yZXBsYWNlKGYsIiQxIitjKyIkMiIpOwowPT1iP2I9YTooYz0xPGUubGVuZ3RoP2VbMV06IjAiLG51bGwhPWImJihjKz1BcnJheShiLWMubGVuZ3RoKzEpLmpvaW4oIjAiKSksYj1hK2QrYyk7cmV0dXJuIGJ9LHplcm9QYWQ6ZnVuY3Rpb24oYSxiLGMpe2ZvcihhPWEudG9TdHJpbmcoY3x8MTApO2EubGVuZ3RoPGI7KWE9IjAiK2E7cmV0dXJuIGF9fTsKT3BlbkxheWVycy5GdW5jdGlvbj17YmluZDpmdW5jdGlvbihhLGIpe3ZhciBjPUFycmF5LnByb3RvdHlwZS5zbGljZS5hcHBseShhcmd1bWVudHMsWzJdKTtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgZD1jLmNvbmNhdChBcnJheS5wcm90b3R5cGUuc2xpY2UuYXBwbHkoYXJndW1lbnRzLFswXSkpO3JldHVybiBhLmFwcGx5KGIsZCl9fSxiaW5kQXNFdmVudExpc3RlbmVyOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGZ1bmN0aW9uKGMpe3JldHVybiBhLmNhbGwoYixjfHx3aW5kb3cuZXZlbnQpfX0sRmFsc2U6ZnVuY3Rpb24oKXtyZXR1cm4hMX0sVHJ1ZTpmdW5jdGlvbigpe3JldHVybiEwfSxWb2lkOmZ1bmN0aW9uKCl7fX07Ck9wZW5MYXllcnMuQXJyYXk9e2ZpbHRlcjpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9W107aWYoQXJyYXkucHJvdG90eXBlLmZpbHRlcilkPWEuZmlsdGVyKGIsYyk7ZWxzZXt2YXIgZT1hLmxlbmd0aDtpZigiZnVuY3Rpb24iIT10eXBlb2YgYil0aHJvdyBuZXcgVHlwZUVycm9yO2Zvcih2YXIgZj0wO2Y8ZTtmKyspaWYoZiBpbiBhKXt2YXIgZz1hW2ZdO2IuY2FsbChjLGcsZixhKSYmZC5wdXNoKGcpfX1yZXR1cm4gZH19O09wZW5MYXllcnMuQm91bmRzPU9wZW5MYXllcnMuQ2xhc3Moe2xlZnQ6bnVsbCxib3R0b206bnVsbCxyaWdodDpudWxsLHRvcDpudWxsLGNlbnRlckxvbkxhdDpudWxsLGluaXRpYWxpemU6ZnVuY3Rpb24oYSxiLGMsZCl7T3BlbkxheWVycy5VdGlsLmlzQXJyYXkoYSkmJihkPWFbM10sYz1hWzJdLGI9YVsxXSxhPWFbMF0pO251bGwhPWEmJih0aGlzLmxlZnQ9T3BlbkxheWVycy5VdGlsLnRvRmxvYXQoYSkpO251bGwhPWImJih0aGlzLmJvdHRvbT1PcGVuTGF5ZXJzLlV0aWwudG9GbG9hdChiKSk7bnVsbCE9YyYmKHRoaXMucmlnaHQ9T3BlbkxheWVycy5VdGlsLnRvRmxvYXQoYykpO251bGwhPWQmJih0aGlzLnRvcD1PcGVuTGF5ZXJzLlV0aWwudG9GbG9hdChkKSl9LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLkJvdW5kcyh0aGlzLmxlZnQsdGhpcy5ib3R0b20sdGhpcy5yaWdodCx0aGlzLnRvcCl9LGVxdWFsczpmdW5jdGlvbihhKXt2YXIgYj0hMTtudWxsIT0KYSYmKGI9dGhpcy5sZWZ0PT1hLmxlZnQmJnRoaXMucmlnaHQ9PWEucmlnaHQmJnRoaXMudG9wPT1hLnRvcCYmdGhpcy5ib3R0b209PWEuYm90dG9tKTtyZXR1cm4gYn0sdG9TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm5bdGhpcy5sZWZ0LHRoaXMuYm90dG9tLHRoaXMucmlnaHQsdGhpcy50b3BdLmpvaW4oKX0sdG9BcnJheTpmdW5jdGlvbihhKXtyZXR1cm4hMD09PWE/W3RoaXMuYm90dG9tLHRoaXMubGVmdCx0aGlzLnRvcCx0aGlzLnJpZ2h0XTpbdGhpcy5sZWZ0LHRoaXMuYm90dG9tLHRoaXMucmlnaHQsdGhpcy50b3BdfSx0b0JCT1g6ZnVuY3Rpb24oYSxiKXtudWxsPT1hJiYoYT02KTt2YXIgYz1NYXRoLnBvdygxMCxhKSxkPU1hdGgucm91bmQodGhpcy5sZWZ0KmMpL2MsZT1NYXRoLnJvdW5kKHRoaXMuYm90dG9tKmMpL2MsZj1NYXRoLnJvdW5kKHRoaXMucmlnaHQqYykvYyxjPU1hdGgucm91bmQodGhpcy50b3AqYykvYztyZXR1cm4hMD09PWI/ZSsiLCIrZCsiLCIrYysiLCIrZjpkKwoiLCIrZSsiLCIrZisiLCIrY30sdG9HZW9tZXRyeTpmdW5jdGlvbigpe3JldHVybiBuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2x5Z29uKFtuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5MaW5lYXJSaW5nKFtuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludCh0aGlzLmxlZnQsdGhpcy5ib3R0b20pLG5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KHRoaXMucmlnaHQsdGhpcy5ib3R0b20pLG5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KHRoaXMucmlnaHQsdGhpcy50b3ApLG5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KHRoaXMubGVmdCx0aGlzLnRvcCldKV0pfSxnZXRXaWR0aDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnJpZ2h0LXRoaXMubGVmdH0sZ2V0SGVpZ2h0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudG9wLXRoaXMuYm90dG9tfSxnZXRTaXplOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLlNpemUodGhpcy5nZXRXaWR0aCgpLHRoaXMuZ2V0SGVpZ2h0KCkpfSwKZ2V0Q2VudGVyUGl4ZWw6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IE9wZW5MYXllcnMuUGl4ZWwoKHRoaXMubGVmdCt0aGlzLnJpZ2h0KS8yLCh0aGlzLmJvdHRvbSt0aGlzLnRvcCkvMil9LGdldENlbnRlckxvbkxhdDpmdW5jdGlvbigpe3RoaXMuY2VudGVyTG9uTGF0fHwodGhpcy5jZW50ZXJMb25MYXQ9bmV3IE9wZW5MYXllcnMuTG9uTGF0KCh0aGlzLmxlZnQrdGhpcy5yaWdodCkvMiwodGhpcy5ib3R0b20rdGhpcy50b3ApLzIpKTtyZXR1cm4gdGhpcy5jZW50ZXJMb25MYXR9LHNjYWxlOmZ1bmN0aW9uKGEsYil7bnVsbD09YiYmKGI9dGhpcy5nZXRDZW50ZXJMb25MYXQoKSk7dmFyIGMsZDsiT3BlbkxheWVycy5Mb25MYXQiPT1iLkNMQVNTX05BTUU/KGM9Yi5sb24sZD1iLmxhdCk6KGM9Yi54LGQ9Yi55KTtyZXR1cm4gbmV3IE9wZW5MYXllcnMuQm91bmRzKCh0aGlzLmxlZnQtYykqYStjLCh0aGlzLmJvdHRvbS1kKSphK2QsKHRoaXMucmlnaHQtYykqYStjLCh0aGlzLnRvcC1kKSphKwpkKX0sYWRkOmZ1bmN0aW9uKGEsYil7aWYobnVsbD09YXx8bnVsbD09Yil0aHJvdyBuZXcgVHlwZUVycm9yKCJCb3VuZHMuYWRkIGNhbm5vdCByZWNlaXZlIG51bGwgdmFsdWVzIik7cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLkJvdW5kcyh0aGlzLmxlZnQrYSx0aGlzLmJvdHRvbStiLHRoaXMucmlnaHQrYSx0aGlzLnRvcCtiKX0sZXh0ZW5kOmZ1bmN0aW9uKGEpe2lmKGEpc3dpdGNoKGEuQ0xBU1NfTkFNRSl7Y2FzZSAiT3BlbkxheWVycy5Mb25MYXQiOnRoaXMuZXh0ZW5kWFkoYS5sb24sYS5sYXQpO2JyZWFrO2Nhc2UgIk9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQiOnRoaXMuZXh0ZW5kWFkoYS54LGEueSk7YnJlYWs7Y2FzZSAiT3BlbkxheWVycy5Cb3VuZHMiOnRoaXMuY2VudGVyTG9uTGF0PW51bGw7aWYobnVsbD09dGhpcy5sZWZ0fHxhLmxlZnQ8dGhpcy5sZWZ0KXRoaXMubGVmdD1hLmxlZnQ7aWYobnVsbD09dGhpcy5ib3R0b218fGEuYm90dG9tPHRoaXMuYm90dG9tKXRoaXMuYm90dG9tPQphLmJvdHRvbTtpZihudWxsPT10aGlzLnJpZ2h0fHxhLnJpZ2h0PnRoaXMucmlnaHQpdGhpcy5yaWdodD1hLnJpZ2h0O2lmKG51bGw9PXRoaXMudG9wfHxhLnRvcD50aGlzLnRvcCl0aGlzLnRvcD1hLnRvcH19LGV4dGVuZFhZOmZ1bmN0aW9uKGEsYil7dGhpcy5jZW50ZXJMb25MYXQ9bnVsbDtpZihudWxsPT10aGlzLmxlZnR8fGE8dGhpcy5sZWZ0KXRoaXMubGVmdD1hO2lmKG51bGw9PXRoaXMuYm90dG9tfHxiPHRoaXMuYm90dG9tKXRoaXMuYm90dG9tPWI7aWYobnVsbD09dGhpcy5yaWdodHx8YT50aGlzLnJpZ2h0KXRoaXMucmlnaHQ9YTtpZihudWxsPT10aGlzLnRvcHx8Yj50aGlzLnRvcCl0aGlzLnRvcD1ifSxjb250YWluc0xvbkxhdDpmdW5jdGlvbihhLGIpeyJib29sZWFuIj09PXR5cGVvZiBiJiYoYj17aW5jbHVzaXZlOmJ9KTtiPWJ8fHt9O3ZhciBjPXRoaXMuY29udGFpbnMoYS5sb24sYS5sYXQsYi5pbmNsdXNpdmUpLGQ9Yi53b3JsZEJvdW5kcztkJiYhYyYmKGM9ZC5nZXRXaWR0aCgpLApkPU1hdGgucm91bmQoKGEubG9uLShkLmxlZnQrZC5yaWdodCkvMikvYyksYz10aGlzLmNvbnRhaW5zTG9uTGF0KHtsb246YS5sb24tZCpjLGxhdDphLmxhdH0se2luY2x1c2l2ZTpiLmluY2x1c2l2ZX0pKTtyZXR1cm4gY30sY29udGFpbnNQaXhlbDpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLmNvbnRhaW5zKGEueCxhLnksYil9LGNvbnRhaW5zOmZ1bmN0aW9uKGEsYixjKXtudWxsPT1jJiYoYz0hMCk7aWYobnVsbD09YXx8bnVsbD09YilyZXR1cm4hMTthPU9wZW5MYXllcnMuVXRpbC50b0Zsb2F0KGEpO2I9T3BlbkxheWVycy5VdGlsLnRvRmxvYXQoYik7dmFyIGQ9ITE7cmV0dXJuIGQ9Yz9hPj10aGlzLmxlZnQmJmE8PXRoaXMucmlnaHQmJmI+PXRoaXMuYm90dG9tJiZiPD10aGlzLnRvcDphPnRoaXMubGVmdCYmYTx0aGlzLnJpZ2h0JiZiPnRoaXMuYm90dG9tJiZiPHRoaXMudG9wfSxpbnRlcnNlY3RzQm91bmRzOmZ1bmN0aW9uKGEsYil7ImJvb2xlYW4iPT09dHlwZW9mIGImJihiPQp7aW5jbHVzaXZlOmJ9KTtiPWJ8fHt9O2lmKGIud29ybGRCb3VuZHMpe3ZhciBjPXRoaXMud3JhcERhdGVMaW5lKGIud29ybGRCb3VuZHMpO2E9YS53cmFwRGF0ZUxpbmUoYi53b3JsZEJvdW5kcyl9ZWxzZSBjPXRoaXM7bnVsbD09Yi5pbmNsdXNpdmUmJihiLmluY2x1c2l2ZT0hMCk7dmFyIGQ9ITEsZT1jLmxlZnQ9PWEucmlnaHR8fGMucmlnaHQ9PWEubGVmdHx8Yy50b3A9PWEuYm90dG9tfHxjLmJvdHRvbT09YS50b3A7aWYoYi5pbmNsdXNpdmV8fCFlKXZhciBkPWEudG9wPj1jLmJvdHRvbSYmYS50b3A8PWMudG9wfHxjLnRvcD5hLmJvdHRvbSYmYy50b3A8YS50b3AsZT1hLmxlZnQ+PWMubGVmdCYmYS5sZWZ0PD1jLnJpZ2h0fHxjLmxlZnQ+PWEubGVmdCYmYy5sZWZ0PD1hLnJpZ2h0LGY9YS5yaWdodD49Yy5sZWZ0JiZhLnJpZ2h0PD1jLnJpZ2h0fHxjLnJpZ2h0Pj1hLmxlZnQmJmMucmlnaHQ8PWEucmlnaHQsZD0oYS5ib3R0b20+PWMuYm90dG9tJiZhLmJvdHRvbTw9Yy50b3B8fGMuYm90dG9tPj0KYS5ib3R0b20mJmMuYm90dG9tPD1hLnRvcHx8ZCkmJihlfHxmKTtpZihiLndvcmxkQm91bmRzJiYhZCl7dmFyIGc9Yi53b3JsZEJvdW5kcyxlPWcuZ2V0V2lkdGgoKSxmPSFnLmNvbnRhaW5zQm91bmRzKGMpLGc9IWcuY29udGFpbnNCb3VuZHMoYSk7ZiYmIWc/KGE9YS5hZGQoLWUsMCksZD1jLmludGVyc2VjdHNCb3VuZHMoYSx7aW5jbHVzaXZlOmIuaW5jbHVzaXZlfSkpOmcmJiFmJiYoYz1jLmFkZCgtZSwwKSxkPWEuaW50ZXJzZWN0c0JvdW5kcyhjLHtpbmNsdXNpdmU6Yi5pbmNsdXNpdmV9KSl9cmV0dXJuIGR9LGNvbnRhaW5zQm91bmRzOmZ1bmN0aW9uKGEsYixjKXtudWxsPT1iJiYoYj0hMSk7bnVsbD09YyYmKGM9ITApO3ZhciBkPXRoaXMuY29udGFpbnMoYS5sZWZ0LGEuYm90dG9tLGMpLGU9dGhpcy5jb250YWlucyhhLnJpZ2h0LGEuYm90dG9tLGMpLGY9dGhpcy5jb250YWlucyhhLmxlZnQsYS50b3AsYyk7YT10aGlzLmNvbnRhaW5zKGEucmlnaHQsYS50b3AsYyk7cmV0dXJuIGI/CmR8fGV8fGZ8fGE6ZCYmZSYmZiYmYX0sZGV0ZXJtaW5lUXVhZHJhbnQ6ZnVuY3Rpb24oYSl7dmFyIGI9IiIsYz10aGlzLmdldENlbnRlckxvbkxhdCgpLGI9YisoYS5sYXQ8Yy5sYXQ/ImIiOiJ0Iik7cmV0dXJuIGIrPWEubG9uPGMubG9uPyJsIjoiciJ9LHRyYW5zZm9ybTpmdW5jdGlvbihhLGIpe3RoaXMuY2VudGVyTG9uTGF0PW51bGw7dmFyIGM9T3BlbkxheWVycy5Qcm9qZWN0aW9uLnRyYW5zZm9ybSh7eDp0aGlzLmxlZnQseTp0aGlzLmJvdHRvbX0sYSxiKSxkPU9wZW5MYXllcnMuUHJvamVjdGlvbi50cmFuc2Zvcm0oe3g6dGhpcy5yaWdodCx5OnRoaXMuYm90dG9tfSxhLGIpLGU9T3BlbkxheWVycy5Qcm9qZWN0aW9uLnRyYW5zZm9ybSh7eDp0aGlzLmxlZnQseTp0aGlzLnRvcH0sYSxiKSxmPU9wZW5MYXllcnMuUHJvamVjdGlvbi50cmFuc2Zvcm0oe3g6dGhpcy5yaWdodCx5OnRoaXMudG9wfSxhLGIpO3RoaXMubGVmdD1NYXRoLm1pbihjLngsZS54KTt0aGlzLmJvdHRvbT1NYXRoLm1pbihjLnksCmQueSk7dGhpcy5yaWdodD1NYXRoLm1heChkLngsZi54KTt0aGlzLnRvcD1NYXRoLm1heChlLnksZi55KTtyZXR1cm4gdGhpc30sd3JhcERhdGVMaW5lOmZ1bmN0aW9uKGEsYil7Yj1ifHx7fTt2YXIgYz1iLmxlZnRUb2xlcmFuY2V8fDAsZD1iLnJpZ2h0VG9sZXJhbmNlfHwwLGU9dGhpcy5jbG9uZSgpO2lmKGEpe2Zvcih2YXIgZj1hLmdldFdpZHRoKCk7ZS5sZWZ0PGEubGVmdCYmZS5yaWdodC1kPD1hLmxlZnQ7KWU9ZS5hZGQoZiwwKTtmb3IoO2UubGVmdCtjPj1hLnJpZ2h0JiZlLnJpZ2h0PmEucmlnaHQ7KWU9ZS5hZGQoLWYsMCk7Yz1lLmxlZnQrYztjPGEucmlnaHQmJihjPmEubGVmdCYmZS5yaWdodC1kPmEucmlnaHQpJiYoZT1lLmFkZCgtZiwwKSl9cmV0dXJuIGV9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuQm91bmRzIn0pOwpPcGVuTGF5ZXJzLkJvdW5kcy5mcm9tU3RyaW5nPWZ1bmN0aW9uKGEsYil7dmFyIGM9YS5zcGxpdCgiLCIpO3JldHVybiBPcGVuTGF5ZXJzLkJvdW5kcy5mcm9tQXJyYXkoYyxiKX07T3BlbkxheWVycy5Cb3VuZHMuZnJvbUFycmF5PWZ1bmN0aW9uKGEsYil7cmV0dXJuITA9PT1iP25ldyBPcGVuTGF5ZXJzLkJvdW5kcyhhWzFdLGFbMF0sYVszXSxhWzJdKTpuZXcgT3BlbkxheWVycy5Cb3VuZHMoYVswXSxhWzFdLGFbMl0sYVszXSl9O09wZW5MYXllcnMuQm91bmRzLmZyb21TaXplPWZ1bmN0aW9uKGEpe3JldHVybiBuZXcgT3BlbkxheWVycy5Cb3VuZHMoMCxhLmgsYS53LDApfTtPcGVuTGF5ZXJzLkJvdW5kcy5vcHBvc2l0ZVF1YWRyYW50PWZ1bmN0aW9uKGEpe3ZhciBiO2I9IiIrKCJ0Ij09YS5jaGFyQXQoMCk/ImIiOiJ0Iik7cmV0dXJuIGIrPSJsIj09YS5jaGFyQXQoMSk/InIiOiJsIn07T3BlbkxheWVycy5FbGVtZW50PXt2aXNpYmxlOmZ1bmN0aW9uKGEpe3JldHVybiJub25lIiE9T3BlbkxheWVycy5VdGlsLmdldEVsZW1lbnQoYSkuc3R5bGUuZGlzcGxheX0sdG9nZ2xlOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPTAsYj1hcmd1bWVudHMubGVuZ3RoO2E8YjthKyspe3ZhciBjPU9wZW5MYXllcnMuVXRpbC5nZXRFbGVtZW50KGFyZ3VtZW50c1thXSksZD1PcGVuTGF5ZXJzLkVsZW1lbnQudmlzaWJsZShjKT8ibm9uZSI6IiI7Yy5zdHlsZS5kaXNwbGF5PWR9fSxyZW1vdmU6ZnVuY3Rpb24oYSl7YT1PcGVuTGF5ZXJzLlV0aWwuZ2V0RWxlbWVudChhKTthLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYSl9LGdldEhlaWdodDpmdW5jdGlvbihhKXthPU9wZW5MYXllcnMuVXRpbC5nZXRFbGVtZW50KGEpO3JldHVybiBhLm9mZnNldEhlaWdodH0saGFzQ2xhc3M6ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLmNsYXNzTmFtZTtyZXR1cm4hIWMmJlJlZ0V4cCgiKF58XFxzKSIrYisiKFxcc3wkKSIpLnRlc3QoYyl9LAphZGRDbGFzczpmdW5jdGlvbihhLGIpe09wZW5MYXllcnMuRWxlbWVudC5oYXNDbGFzcyhhLGIpfHwoYS5jbGFzc05hbWUrPShhLmNsYXNzTmFtZT8iICI6IiIpK2IpO3JldHVybiBhfSxyZW1vdmVDbGFzczpmdW5jdGlvbihhLGIpe3ZhciBjPWEuY2xhc3NOYW1lO2MmJihhLmNsYXNzTmFtZT1PcGVuTGF5ZXJzLlN0cmluZy50cmltKGMucmVwbGFjZShSZWdFeHAoIihefFxccyspIitiKyIoXFxzK3wkKSIpLCIgIikpKTtyZXR1cm4gYX0sdG9nZ2xlQ2xhc3M6ZnVuY3Rpb24oYSxiKXtPcGVuTGF5ZXJzLkVsZW1lbnQuaGFzQ2xhc3MoYSxiKT9PcGVuTGF5ZXJzLkVsZW1lbnQucmVtb3ZlQ2xhc3MoYSxiKTpPcGVuTGF5ZXJzLkVsZW1lbnQuYWRkQ2xhc3MoYSxiKTtyZXR1cm4gYX0sZ2V0U3R5bGU6ZnVuY3Rpb24oYSxiKXthPU9wZW5MYXllcnMuVXRpbC5nZXRFbGVtZW50KGEpO3ZhciBjPW51bGw7aWYoYSYmYS5zdHlsZSl7Yz1hLnN0eWxlW09wZW5MYXllcnMuU3RyaW5nLmNhbWVsaXplKGIpXTsKY3x8KGRvY3VtZW50LmRlZmF1bHRWaWV3JiZkb2N1bWVudC5kZWZhdWx0Vmlldy5nZXRDb21wdXRlZFN0eWxlP2M9KGM9ZG9jdW1lbnQuZGVmYXVsdFZpZXcuZ2V0Q29tcHV0ZWRTdHlsZShhLG51bGwpKT9jLmdldFByb3BlcnR5VmFsdWUoYik6bnVsbDphLmN1cnJlbnRTdHlsZSYmKGM9YS5jdXJyZW50U3R5bGVbT3BlbkxheWVycy5TdHJpbmcuY2FtZWxpemUoYildKSk7dmFyIGQ9WyJsZWZ0IiwidG9wIiwicmlnaHQiLCJib3R0b20iXTt3aW5kb3cub3BlcmEmJigtMSE9T3BlbkxheWVycy5VdGlsLmluZGV4T2YoZCxiKSYmInN0YXRpYyI9PU9wZW5MYXllcnMuRWxlbWVudC5nZXRTdHlsZShhLCJwb3NpdGlvbiIpKSYmKGM9ImF1dG8iKX1yZXR1cm4iYXV0byI9PWM/bnVsbDpjfX07T3BlbkxheWVycy5Mb25MYXQ9T3BlbkxheWVycy5DbGFzcyh7bG9uOjAsbGF0OjAsaW5pdGlhbGl6ZTpmdW5jdGlvbihhLGIpe09wZW5MYXllcnMuVXRpbC5pc0FycmF5KGEpJiYoYj1hWzFdLGE9YVswXSk7dGhpcy5sb249T3BlbkxheWVycy5VdGlsLnRvRmxvYXQoYSk7dGhpcy5sYXQ9T3BlbkxheWVycy5VdGlsLnRvRmxvYXQoYil9LHRvU3RyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuImxvbj0iK3RoaXMubG9uKyIsbGF0PSIrdGhpcy5sYXR9LHRvU2hvcnRTdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sb24rIiwgIit0aGlzLmxhdH0sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IE9wZW5MYXllcnMuTG9uTGF0KHRoaXMubG9uLHRoaXMubGF0KX0sYWRkOmZ1bmN0aW9uKGEsYil7aWYobnVsbD09YXx8bnVsbD09Yil0aHJvdyBuZXcgVHlwZUVycm9yKCJMb25MYXQuYWRkIGNhbm5vdCByZWNlaXZlIG51bGwgdmFsdWVzIik7cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLkxvbkxhdCh0aGlzLmxvbisKT3BlbkxheWVycy5VdGlsLnRvRmxvYXQoYSksdGhpcy5sYXQrT3BlbkxheWVycy5VdGlsLnRvRmxvYXQoYikpfSxlcXVhbHM6ZnVuY3Rpb24oYSl7dmFyIGI9ITE7bnVsbCE9YSYmKGI9dGhpcy5sb249PWEubG9uJiZ0aGlzLmxhdD09YS5sYXR8fGlzTmFOKHRoaXMubG9uKSYmaXNOYU4odGhpcy5sYXQpJiZpc05hTihhLmxvbikmJmlzTmFOKGEubGF0KSk7cmV0dXJuIGJ9LHRyYW5zZm9ybTpmdW5jdGlvbihhLGIpe3ZhciBjPU9wZW5MYXllcnMuUHJvamVjdGlvbi50cmFuc2Zvcm0oe3g6dGhpcy5sb24seTp0aGlzLmxhdH0sYSxiKTt0aGlzLmxvbj1jLng7dGhpcy5sYXQ9Yy55O3JldHVybiB0aGlzfSx3cmFwRGF0ZUxpbmU6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jbG9uZSgpO2lmKGEpe2Zvcig7Yi5sb248YS5sZWZ0OyliLmxvbis9YS5nZXRXaWR0aCgpO2Zvcig7Yi5sb24+YS5yaWdodDspYi5sb24tPWEuZ2V0V2lkdGgoKX1yZXR1cm4gYn0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Mb25MYXQifSk7Ck9wZW5MYXllcnMuTG9uTGF0LmZyb21TdHJpbmc9ZnVuY3Rpb24oYSl7YT1hLnNwbGl0KCIsIik7cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLkxvbkxhdChhWzBdLGFbMV0pfTtPcGVuTGF5ZXJzLkxvbkxhdC5mcm9tQXJyYXk9ZnVuY3Rpb24oYSl7dmFyIGI9T3BlbkxheWVycy5VdGlsLmlzQXJyYXkoYSk7cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLkxvbkxhdChiJiZhWzBdLGImJmFbMV0pfTtPcGVuTGF5ZXJzLlBpeGVsPU9wZW5MYXllcnMuQ2xhc3Moe3g6MCx5OjAsaW5pdGlhbGl6ZTpmdW5jdGlvbihhLGIpe3RoaXMueD1wYXJzZUZsb2F0KGEpO3RoaXMueT1wYXJzZUZsb2F0KGIpfSx0b1N0cmluZzpmdW5jdGlvbigpe3JldHVybiJ4PSIrdGhpcy54KyIseT0iK3RoaXMueX0sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IE9wZW5MYXllcnMuUGl4ZWwodGhpcy54LHRoaXMueSl9LGVxdWFsczpmdW5jdGlvbihhKXt2YXIgYj0hMTtudWxsIT1hJiYoYj10aGlzLng9PWEueCYmdGhpcy55PT1hLnl8fGlzTmFOKHRoaXMueCkmJmlzTmFOKHRoaXMueSkmJmlzTmFOKGEueCkmJmlzTmFOKGEueSkpO3JldHVybiBifSxkaXN0YW5jZVRvOmZ1bmN0aW9uKGEpe3JldHVybiBNYXRoLnNxcnQoTWF0aC5wb3codGhpcy54LWEueCwyKStNYXRoLnBvdyh0aGlzLnktYS55LDIpKX0sYWRkOmZ1bmN0aW9uKGEsYil7aWYobnVsbD09YXx8bnVsbD09Yil0aHJvdyBuZXcgVHlwZUVycm9yKCJQaXhlbC5hZGQgY2Fubm90IHJlY2VpdmUgbnVsbCB2YWx1ZXMiKTsKcmV0dXJuIG5ldyBPcGVuTGF5ZXJzLlBpeGVsKHRoaXMueCthLHRoaXMueStiKX0sb2Zmc2V0OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY2xvbmUoKTthJiYoYj10aGlzLmFkZChhLngsYS55KSk7cmV0dXJuIGJ9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuUGl4ZWwifSk7T3BlbkxheWVycy5TaXplPU9wZW5MYXllcnMuQ2xhc3Moe3c6MCxoOjAsaW5pdGlhbGl6ZTpmdW5jdGlvbihhLGIpe3RoaXMudz1wYXJzZUZsb2F0KGEpO3RoaXMuaD1wYXJzZUZsb2F0KGIpfSx0b1N0cmluZzpmdW5jdGlvbigpe3JldHVybiJ3PSIrdGhpcy53KyIsaD0iK3RoaXMuaH0sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IE9wZW5MYXllcnMuU2l6ZSh0aGlzLncsdGhpcy5oKX0sZXF1YWxzOmZ1bmN0aW9uKGEpe3ZhciBiPSExO251bGwhPWEmJihiPXRoaXMudz09YS53JiZ0aGlzLmg9PWEuaHx8aXNOYU4odGhpcy53KSYmaXNOYU4odGhpcy5oKSYmaXNOYU4oYS53KSYmaXNOYU4oYS5oKSk7cmV0dXJuIGJ9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuU2l6ZSJ9KTtPcGVuTGF5ZXJzLkNvbnNvbGU9e2xvZzpmdW5jdGlvbigpe30sZGVidWc6ZnVuY3Rpb24oKXt9LGluZm86ZnVuY3Rpb24oKXt9LHdhcm46ZnVuY3Rpb24oKXt9LGVycm9yOmZ1bmN0aW9uKCl7fSx1c2VyRXJyb3I6ZnVuY3Rpb24oYSl7YWxlcnQoYSl9LGFzc2VydDpmdW5jdGlvbigpe30sZGlyOmZ1bmN0aW9uKCl7fSxkaXJ4bWw6ZnVuY3Rpb24oKXt9LHRyYWNlOmZ1bmN0aW9uKCl7fSxncm91cDpmdW5jdGlvbigpe30sZ3JvdXBFbmQ6ZnVuY3Rpb24oKXt9LHRpbWU6ZnVuY3Rpb24oKXt9LHRpbWVFbmQ6ZnVuY3Rpb24oKXt9LHByb2ZpbGU6ZnVuY3Rpb24oKXt9LHByb2ZpbGVFbmQ6ZnVuY3Rpb24oKXt9LGNvdW50OmZ1bmN0aW9uKCl7fSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkNvbnNvbGUifTsKKGZ1bmN0aW9uKCl7Zm9yKHZhciBhPWRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJzY3JpcHQiKSxiPTAsYz1hLmxlbmd0aDtiPGM7KytiKWlmKC0xIT1hW2JdLnNyYy5pbmRleE9mKCJmaXJlYnVnLmpzIikmJmNvbnNvbGUpe09wZW5MYXllcnMuVXRpbC5leHRlbmQoT3BlbkxheWVycy5Db25zb2xlLGNvbnNvbGUpO2JyZWFrfX0pKCk7T3BlbkxheWVycy5MYW5nPXtjb2RlOm51bGwsZGVmYXVsdENvZGU6ImVuIixnZXRDb2RlOmZ1bmN0aW9uKCl7T3BlbkxheWVycy5MYW5nLmNvZGV8fE9wZW5MYXllcnMuTGFuZy5zZXRDb2RlKCk7cmV0dXJuIE9wZW5MYXllcnMuTGFuZy5jb2RlfSxzZXRDb2RlOmZ1bmN0aW9uKGEpe3ZhciBiO2F8fChhPSJtc2llIj09T3BlbkxheWVycy5CUk9XU0VSX05BTUU/bmF2aWdhdG9yLnVzZXJMYW5ndWFnZTpuYXZpZ2F0b3IubGFuZ3VhZ2UpO2E9YS5zcGxpdCgiLSIpO2FbMF09YVswXS50b0xvd2VyQ2FzZSgpOyJvYmplY3QiPT10eXBlb2YgT3BlbkxheWVycy5MYW5nW2FbMF1dJiYoYj1hWzBdKTtpZihhWzFdKXt2YXIgYz1hWzBdKyItIithWzFdLnRvVXBwZXJDYXNlKCk7Im9iamVjdCI9PXR5cGVvZiBPcGVuTGF5ZXJzLkxhbmdbY10mJihiPWMpfWJ8fChPcGVuTGF5ZXJzLkNvbnNvbGUud2FybigiRmFpbGVkIHRvIGZpbmQgT3BlbkxheWVycy5MYW5nLiIrYS5qb2luKCItIikrIiBkaWN0aW9uYXJ5LCBmYWxsaW5nIGJhY2sgdG8gZGVmYXVsdCBsYW5ndWFnZSIpLApiPU9wZW5MYXllcnMuTGFuZy5kZWZhdWx0Q29kZSk7T3BlbkxheWVycy5MYW5nLmNvZGU9Yn0sdHJhbnNsYXRlOmZ1bmN0aW9uKGEsYil7dmFyIGM9T3BlbkxheWVycy5MYW5nW09wZW5MYXllcnMuTGFuZy5nZXRDb2RlKCldOyhjPWMmJmNbYV0pfHwoYz1hKTtiJiYoYz1PcGVuTGF5ZXJzLlN0cmluZy5mb3JtYXQoYyxiKSk7cmV0dXJuIGN9fTtPcGVuTGF5ZXJzLmkxOG49T3BlbkxheWVycy5MYW5nLnRyYW5zbGF0ZTtPcGVuTGF5ZXJzLlV0aWw9T3BlbkxheWVycy5VdGlsfHx7fTtPcGVuTGF5ZXJzLlV0aWwuZ2V0RWxlbWVudD1mdW5jdGlvbigpe2Zvcih2YXIgYT1bXSxiPTAsYz1hcmd1bWVudHMubGVuZ3RoO2I8YztiKyspe3ZhciBkPWFyZ3VtZW50c1tiXTsic3RyaW5nIj09dHlwZW9mIGQmJihkPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGQpKTtpZigxPT1hcmd1bWVudHMubGVuZ3RoKXJldHVybiBkO2EucHVzaChkKX1yZXR1cm4gYX07T3BlbkxheWVycy5VdGlsLmlzRWxlbWVudD1mdW5jdGlvbihhKXtyZXR1cm4hKCFhfHwxIT09YS5ub2RlVHlwZSl9O09wZW5MYXllcnMuVXRpbC5pc0FycmF5PWZ1bmN0aW9uKGEpe3JldHVybiJbb2JqZWN0IEFycmF5XSI9PT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoYSl9O09wZW5MYXllcnMuVXRpbC5yZW1vdmVJdGVtPWZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPWEubGVuZ3RoLTE7MDw9YztjLS0pYVtjXT09YiYmYS5zcGxpY2UoYywxKTtyZXR1cm4gYX07Ck9wZW5MYXllcnMuVXRpbC5pbmRleE9mPWZ1bmN0aW9uKGEsYil7aWYoImZ1bmN0aW9uIj09dHlwZW9mIGEuaW5kZXhPZilyZXR1cm4gYS5pbmRleE9mKGIpO2Zvcih2YXIgYz0wLGQ9YS5sZW5ndGg7YzxkO2MrKylpZihhW2NdPT1iKXJldHVybiBjO3JldHVybi0xfTtPcGVuTGF5ZXJzLlV0aWwuZG90bGVzcz0vXC4vZzsKT3BlbkxheWVycy5VdGlsLm1vZGlmeURPTUVsZW1lbnQ9ZnVuY3Rpb24oYSxiLGMsZCxlLGYsZyxoKXtiJiYoYS5pZD1iLnJlcGxhY2UoT3BlbkxheWVycy5VdGlsLmRvdGxlc3MsIl8iKSk7YyYmKGEuc3R5bGUubGVmdD1jLngrInB4IixhLnN0eWxlLnRvcD1jLnkrInB4Iik7ZCYmKGEuc3R5bGUud2lkdGg9ZC53KyJweCIsYS5zdHlsZS5oZWlnaHQ9ZC5oKyJweCIpO2UmJihhLnN0eWxlLnBvc2l0aW9uPWUpO2YmJihhLnN0eWxlLmJvcmRlcj1mKTtnJiYoYS5zdHlsZS5vdmVyZmxvdz1nKTswPD1wYXJzZUZsb2F0KGgpJiYxPnBhcnNlRmxvYXQoaCk/KGEuc3R5bGUuZmlsdGVyPSJhbHBoYShvcGFjaXR5PSIrMTAwKmgrIikiLGEuc3R5bGUub3BhY2l0eT1oKToxPT1wYXJzZUZsb2F0KGgpJiYoYS5zdHlsZS5maWx0ZXI9IiIsYS5zdHlsZS5vcGFjaXR5PSIiKX07Ck9wZW5MYXllcnMuVXRpbC5jcmVhdGVEaXY9ZnVuY3Rpb24oYSxiLGMsZCxlLGYsZyxoKXt2YXIgaz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTtkJiYoay5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2U9InVybCgiK2QrIikiKTthfHwoYT1PcGVuTGF5ZXJzLlV0aWwuY3JlYXRlVW5pcXVlSUQoIk9wZW5MYXllcnNEaXYiKSk7ZXx8KGU9ImFic29sdXRlIik7T3BlbkxheWVycy5VdGlsLm1vZGlmeURPTUVsZW1lbnQoayxhLGIsYyxlLGYsZyxoKTtyZXR1cm4ga307Ck9wZW5MYXllcnMuVXRpbC5jcmVhdGVJbWFnZT1mdW5jdGlvbihhLGIsYyxkLGUsZixnLGgpe3ZhciBrPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImltZyIpO2F8fChhPU9wZW5MYXllcnMuVXRpbC5jcmVhdGVVbmlxdWVJRCgiT3BlbkxheWVyc0RpdiIpKTtlfHwoZT0icmVsYXRpdmUiKTtPcGVuTGF5ZXJzLlV0aWwubW9kaWZ5RE9NRWxlbWVudChrLGEsYixjLGUsZixudWxsLGcpO2gmJihrLnN0eWxlLmRpc3BsYXk9Im5vbmUiLGI9ZnVuY3Rpb24oKXtrLnN0eWxlLmRpc3BsYXk9IiI7T3BlbkxheWVycy5FdmVudC5zdG9wT2JzZXJ2aW5nRWxlbWVudChrKX0sT3BlbkxheWVycy5FdmVudC5vYnNlcnZlKGssImxvYWQiLGIpLE9wZW5MYXllcnMuRXZlbnQub2JzZXJ2ZShrLCJlcnJvciIsYikpO2suc3R5bGUuYWx0PWE7ay5nYWxsZXJ5SW1nPSJubyI7ZCYmKGsuc3JjPWQpO3JldHVybiBrfTtPcGVuTGF5ZXJzLklNQUdFX1JFTE9BRF9BVFRFTVBUUz0wOwpPcGVuTGF5ZXJzLlV0aWwuYWxwaGFIYWNrTmVlZGVkPW51bGw7T3BlbkxheWVycy5VdGlsLmFscGhhSGFjaz1mdW5jdGlvbigpe2lmKG51bGw9PU9wZW5MYXllcnMuVXRpbC5hbHBoYUhhY2tOZWVkZWQpe3ZhciBhPW5hdmlnYXRvci5hcHBWZXJzaW9uLnNwbGl0KCJNU0lFIiksYT1wYXJzZUZsb2F0KGFbMV0pLGI9ITE7dHJ5e2I9ISFkb2N1bWVudC5ib2R5LmZpbHRlcnN9Y2F0Y2goYyl7fU9wZW5MYXllcnMuVXRpbC5hbHBoYUhhY2tOZWVkZWQ9YiYmNS41PD1hJiY3PmF9cmV0dXJuIE9wZW5MYXllcnMuVXRpbC5hbHBoYUhhY2tOZWVkZWR9OwpPcGVuTGF5ZXJzLlV0aWwubW9kaWZ5QWxwaGFJbWFnZURpdj1mdW5jdGlvbihhLGIsYyxkLGUsZixnLGgsayl7T3BlbkxheWVycy5VdGlsLm1vZGlmeURPTUVsZW1lbnQoYSxiLGMsZCxmLG51bGwsbnVsbCxrKTtiPWEuY2hpbGROb2Rlc1swXTtlJiYoYi5zcmM9ZSk7T3BlbkxheWVycy5VdGlsLm1vZGlmeURPTUVsZW1lbnQoYixhLmlkKyJfaW5uZXJJbWFnZSIsbnVsbCxkLCJyZWxhdGl2ZSIsZyk7T3BlbkxheWVycy5VdGlsLmFscGhhSGFjaygpJiYoIm5vbmUiIT1hLnN0eWxlLmRpc3BsYXkmJihhLnN0eWxlLmRpc3BsYXk9ImlubGluZS1ibG9jayIpLG51bGw9PWgmJihoPSJzY2FsZSIpLGEuc3R5bGUuZmlsdGVyPSJwcm9naWQ6RFhJbWFnZVRyYW5zZm9ybS5NaWNyb3NvZnQuQWxwaGFJbWFnZUxvYWRlcihzcmM9JyIrYi5zcmMrIicsIHNpemluZ01ldGhvZD0nIitoKyInKSIsMDw9cGFyc2VGbG9hdChhLnN0eWxlLm9wYWNpdHkpJiYxPnBhcnNlRmxvYXQoYS5zdHlsZS5vcGFjaXR5KSYmCihhLnN0eWxlLmZpbHRlcis9IiBhbHBoYShvcGFjaXR5PSIrMTAwKmEuc3R5bGUub3BhY2l0eSsiKSIpLGIuc3R5bGUuZmlsdGVyPSJhbHBoYShvcGFjaXR5PTApIil9O09wZW5MYXllcnMuVXRpbC5jcmVhdGVBbHBoYUltYWdlRGl2PWZ1bmN0aW9uKGEsYixjLGQsZSxmLGcsaCxrKXt2YXIgbD1PcGVuTGF5ZXJzLlV0aWwuY3JlYXRlRGl2KCk7az1PcGVuTGF5ZXJzLlV0aWwuY3JlYXRlSW1hZ2UobnVsbCxudWxsLG51bGwsbnVsbCxudWxsLG51bGwsbnVsbCxrKTtrLmNsYXNzTmFtZT0ib2xBbHBoYUltZyI7bC5hcHBlbmRDaGlsZChrKTtPcGVuTGF5ZXJzLlV0aWwubW9kaWZ5QWxwaGFJbWFnZURpdihsLGEsYixjLGQsZSxmLGcsaCk7cmV0dXJuIGx9O09wZW5MYXllcnMuVXRpbC51cHBlckNhc2VPYmplY3Q9ZnVuY3Rpb24oYSl7dmFyIGI9e30sYztmb3IoYyBpbiBhKWJbYy50b1VwcGVyQ2FzZSgpXT1hW2NdO3JldHVybiBifTsKT3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHM9ZnVuY3Rpb24oYSxiKXthPWF8fHt9O3ZhciBjPSJmdW5jdGlvbiI9PXR5cGVvZiB3aW5kb3cuRXZlbnQmJmIgaW5zdGFuY2VvZiB3aW5kb3cuRXZlbnQsZDtmb3IoZCBpbiBiKWlmKHZvaWQgMD09PWFbZF18fCFjJiZiLmhhc093blByb3BlcnR5JiZiLmhhc093blByb3BlcnR5KGQpJiYhYS5oYXNPd25Qcm9wZXJ0eShkKSlhW2RdPWJbZF07IWMmJihiJiZiLmhhc093blByb3BlcnR5JiZiLmhhc093blByb3BlcnR5KCJ0b1N0cmluZyIpJiYhYS5oYXNPd25Qcm9wZXJ0eSgidG9TdHJpbmciKSkmJihhLnRvU3RyaW5nPWIudG9TdHJpbmcpO3JldHVybiBhfTsKT3BlbkxheWVycy5VdGlsLmdldFBhcmFtZXRlclN0cmluZz1mdW5jdGlvbihhKXt2YXIgYj1bXSxjO2ZvcihjIGluIGEpe3ZhciBkPWFbY107aWYobnVsbCE9ZCYmImZ1bmN0aW9uIiE9dHlwZW9mIGQpe2lmKCJvYmplY3QiPT10eXBlb2YgZCYmZC5jb25zdHJ1Y3Rvcj09QXJyYXkpe2Zvcih2YXIgZT1bXSxmLGc9MCxoPWQubGVuZ3RoO2c8aDtnKyspZj1kW2ddLGUucHVzaChlbmNvZGVVUklDb21wb25lbnQobnVsbD09PWZ8fHZvaWQgMD09PWY/IiI6ZikpO2Q9ZS5qb2luKCIsIil9ZWxzZSBkPWVuY29kZVVSSUNvbXBvbmVudChkKTtiLnB1c2goZW5jb2RlVVJJQ29tcG9uZW50KGMpKyI9IitkKX19cmV0dXJuIGIuam9pbigiJiIpfTtPcGVuTGF5ZXJzLlV0aWwudXJsQXBwZW5kPWZ1bmN0aW9uKGEsYil7dmFyIGM9YTtpZihiKXZhciBkPShhKyIgIikuc3BsaXQoL1s/Jl0vKSxjPWMrKCIgIj09PWQucG9wKCk/YjpkLmxlbmd0aD8iJiIrYjoiPyIrYik7cmV0dXJuIGN9OwpPcGVuTGF5ZXJzLlV0aWwuZ2V0SW1hZ2VzTG9jYXRpb249ZnVuY3Rpb24oKXtyZXR1cm4gT3BlbkxheWVycy5JbWdQYXRofHxPcGVuTGF5ZXJzLl9nZXRTY3JpcHRMb2NhdGlvbigpKyJpbWcvIn07T3BlbkxheWVycy5VdGlsLmdldEltYWdlTG9jYXRpb249ZnVuY3Rpb24oYSl7cmV0dXJuIE9wZW5MYXllcnMuVXRpbC5nZXRJbWFnZXNMb2NhdGlvbigpK2F9O09wZW5MYXllcnMuVXRpbC5Ucnk9ZnVuY3Rpb24oKXtmb3IodmFyIGE9bnVsbCxiPTAsYz1hcmd1bWVudHMubGVuZ3RoO2I8YztiKyspe3ZhciBkPWFyZ3VtZW50c1tiXTt0cnl7YT1kKCk7YnJlYWt9Y2F0Y2goZSl7fX1yZXR1cm4gYX07Ck9wZW5MYXllcnMuVXRpbC5nZXRYbWxOb2RlVmFsdWU9ZnVuY3Rpb24oYSl7dmFyIGI9bnVsbDtPcGVuTGF5ZXJzLlV0aWwuVHJ5KGZ1bmN0aW9uKCl7Yj1hLnRleHQ7Ynx8KGI9YS50ZXh0Q29udGVudCk7Ynx8KGI9YS5maXJzdENoaWxkLm5vZGVWYWx1ZSl9LGZ1bmN0aW9uKCl7Yj1hLnRleHRDb250ZW50fSk7cmV0dXJuIGJ9O09wZW5MYXllcnMuVXRpbC5tb3VzZUxlZnQ9ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9YS5yZWxhdGVkVGFyZ2V0P2EucmVsYXRlZFRhcmdldDphLnRvRWxlbWVudDtjIT1iJiZudWxsIT1jOyljPWMucGFyZW50Tm9kZTtyZXR1cm4gYyE9Yn07T3BlbkxheWVycy5VdGlsLkRFRkFVTFRfUFJFQ0lTSU9OPTE0O09wZW5MYXllcnMuVXRpbC50b0Zsb2F0PWZ1bmN0aW9uKGEsYil7bnVsbD09YiYmKGI9T3BlbkxheWVycy5VdGlsLkRFRkFVTFRfUFJFQ0lTSU9OKTsibnVtYmVyIiE9PXR5cGVvZiBhJiYoYT1wYXJzZUZsb2F0KGEpKTtyZXR1cm4gMD09PWI/YTpwYXJzZUZsb2F0KGEudG9QcmVjaXNpb24oYikpfTsKT3BlbkxheWVycy5VdGlsLnJhZD1mdW5jdGlvbihhKXtyZXR1cm4gYSpNYXRoLlBJLzE4MH07T3BlbkxheWVycy5VdGlsLmRlZz1mdW5jdGlvbihhKXtyZXR1cm4gMTgwKmEvTWF0aC5QSX07T3BlbkxheWVycy5VdGlsLlZpbmNlbnR5Q29uc3RhbnRzPXthOjYzNzgxMzcsYjo2MzU2NzUyLjMxNDIsZjoxLzI5OC4yNTcyMjM1NjN9OwpPcGVuTGF5ZXJzLlV0aWwuZGlzdFZpbmNlbnR5PWZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPU9wZW5MYXllcnMuVXRpbC5WaW5jZW50eUNvbnN0YW50cyxkPWMuYSxlPWMuYixjPWMuZixmPU9wZW5MYXllcnMuVXRpbC5yYWQoYi5sb24tYS5sb24pLGc9TWF0aC5hdGFuKCgxLWMpKk1hdGgudGFuKE9wZW5MYXllcnMuVXRpbC5yYWQoYS5sYXQpKSksaD1NYXRoLmF0YW4oKDEtYykqTWF0aC50YW4oT3BlbkxheWVycy5VdGlsLnJhZChiLmxhdCkpKSxrPU1hdGguc2luKGcpLGc9TWF0aC5jb3MoZyksbD1NYXRoLnNpbihoKSxoPU1hdGguY29zKGgpLG09ZixuPTIqTWF0aC5QSSxwPTIwOzFFLTEyPE1hdGguYWJzKG0tbikmJjA8LS1wOyl7dmFyIHE9TWF0aC5zaW4obSkscj1NYXRoLmNvcyhtKSxzPU1hdGguc3FydChoKnEqaCpxKyhnKmwtaypoKnIpKihnKmwtaypoKnIpKTtpZigwPT1zKXJldHVybiAwO3ZhciByPWsqbCtnKmgqcix0PU1hdGguYXRhbjIocyxyKSx1PU1hdGguYXNpbihnKmgqCnEvcyksdj1NYXRoLmNvcyh1KSpNYXRoLmNvcyh1KSxxPXItMiprKmwvdix3PWMvMTYqdiooNCtjKig0LTMqdikpLG49bSxtPWYrKDEtdykqYypNYXRoLnNpbih1KSoodCt3KnMqKHErdypyKigtMSsyKnEqcSkpKX1pZigwPT1wKXJldHVybiBOYU47ZD12KihkKmQtZSplKS8oZSplKTtjPWQvMTAyNCooMjU2K2QqKC0xMjgrZCooNzQtNDcqZCkpKTtyZXR1cm4oZSooMStkLzE2Mzg0Kig0MDk2K2QqKC03NjgrZCooMzIwLTE3NSpkKSkpKSoodC1jKnMqKHErYy80KihyKigtMSsyKnEqcSktYy82KnEqKC0zKzQqcypzKSooLTMrNCpxKnEpKSkpKS50b0ZpeGVkKDMpLzFFM307Ck9wZW5MYXllcnMuVXRpbC5kZXN0aW5hdGlvblZpbmNlbnR5PWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1PcGVuTGF5ZXJzLlV0aWwsZT1kLlZpbmNlbnR5Q29uc3RhbnRzLGY9ZS5hLGc9ZS5iLGg9ZS5mLGU9YS5sb247YT1hLmxhdDt2YXIgaz1kLnJhZChiKTtiPU1hdGguc2luKGspO2s9TWF0aC5jb3Moayk7YT0oMS1oKSpNYXRoLnRhbihkLnJhZChhKSk7dmFyIGw9MS9NYXRoLnNxcnQoMSthKmEpLG09YSpsLG49TWF0aC5hdGFuMihhLGspO2E9bCpiO2Zvcih2YXIgcD0xLWEqYSxmPXAqKGYqZi1nKmcpLyhnKmcpLHE9MStmLzE2Mzg0Kig0MDk2K2YqKC03NjgrZiooMzIwLTE3NSpmKSkpLHI9Zi8xMDI0KigyNTYrZiooLTEyOCtmKig3NC00NypmKSkpLGY9Yy8oZypxKSxzPTIqTWF0aC5QSTsxRS0xMjxNYXRoLmFicyhmLXMpOyl2YXIgdD1NYXRoLmNvcygyKm4rZiksdT1NYXRoLnNpbihmKSx2PU1hdGguY29zKGYpLHc9cip1Kih0K3IvNCoodiooLTErMip0KnQpLXIvNip0KigtMys0Kgp1KnUpKigtMys0KnQqdCkpKSxzPWYsZj1jLyhnKnEpK3c7Yz1tKnUtbCp2Kms7Zz1NYXRoLmF0YW4yKG0qditsKnUqaywoMS1oKSpNYXRoLnNxcnQoYSphK2MqYykpO2I9TWF0aC5hdGFuMih1KmIsbCp2LW0qdSprKTtrPWgvMTYqcCooNCtoKig0LTMqcCkpO3Q9Yi0oMS1rKSpoKmEqKGYrayp1Kih0K2sqdiooLTErMip0KnQpKSk7TWF0aC5hdGFuMihhLC1jKTtyZXR1cm4gbmV3IE9wZW5MYXllcnMuTG9uTGF0KGUrZC5kZWcodCksZC5kZWcoZykpfTsKT3BlbkxheWVycy5VdGlsLmdldFBhcmFtZXRlcnM9ZnVuY3Rpb24oYSxiKXtiPWJ8fHt9O2E9bnVsbD09PWF8fHZvaWQgMD09PWE/d2luZG93LmxvY2F0aW9uLmhyZWY6YTt2YXIgYz0iIjtpZihPcGVuTGF5ZXJzLlN0cmluZy5jb250YWlucyhhLCI/IikpdmFyIGQ9YS5pbmRleE9mKCI/IikrMSxjPU9wZW5MYXllcnMuU3RyaW5nLmNvbnRhaW5zKGEsIiMiKT9hLmluZGV4T2YoIiMiKTphLmxlbmd0aCxjPWEuc3Vic3RyaW5nKGQsYyk7Zm9yKHZhciBkPXt9LGM9Yy5zcGxpdCgvWyY7XS8pLGU9MCxmPWMubGVuZ3RoO2U8ZjsrK2Upe3ZhciBnPWNbZV0uc3BsaXQoIj0iKTtpZihnWzBdKXt2YXIgaD1nWzBdO3RyeXtoPWRlY29kZVVSSUNvbXBvbmVudChoKX1jYXRjaChrKXtoPXVuZXNjYXBlKGgpfWc9KGdbMV18fCIiKS5yZXBsYWNlKC9cKy9nLCIgIik7dHJ5e2c9ZGVjb2RlVVJJQ29tcG9uZW50KGcpfWNhdGNoKGwpe2c9dW5lc2NhcGUoZyl9ITEhPT1iLnNwbGl0QXJncyYmKGc9Zy5zcGxpdCgiLCIpKTsKMT09Zy5sZW5ndGgmJihnPWdbMF0pO2RbaF09Z319cmV0dXJuIGR9O09wZW5MYXllcnMuVXRpbC5sYXN0U2VxSUQ9MDtPcGVuTGF5ZXJzLlV0aWwuY3JlYXRlVW5pcXVlSUQ9ZnVuY3Rpb24oYSl7YT1udWxsPT1hPyJpZF8iOmEucmVwbGFjZShPcGVuTGF5ZXJzLlV0aWwuZG90bGVzcywiXyIpO09wZW5MYXllcnMuVXRpbC5sYXN0U2VxSUQrPTE7cmV0dXJuIGErT3BlbkxheWVycy5VdGlsLmxhc3RTZXFJRH07T3BlbkxheWVycy5JTkNIRVNfUEVSX1VOSVQ9e2luY2hlczoxLGZ0OjEyLG1pOjYzMzYwLG06MzkuMzcsa206MzkzNzAsZGQ6NDM3NDc1NCx5ZDozNn07T3BlbkxheWVycy5JTkNIRVNfUEVSX1VOSVRbImluIl09T3BlbkxheWVycy5JTkNIRVNfUEVSX1VOSVQuaW5jaGVzO09wZW5MYXllcnMuSU5DSEVTX1BFUl9VTklULmRlZ3JlZXM9T3BlbkxheWVycy5JTkNIRVNfUEVSX1VOSVQuZGQ7T3BlbkxheWVycy5JTkNIRVNfUEVSX1VOSVQubm1pPTE4NTIqT3BlbkxheWVycy5JTkNIRVNfUEVSX1VOSVQubTsKT3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0g9MC4wMjU0MDAwNTA4MDAxMDE2OwpPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKE9wZW5MYXllcnMuSU5DSEVTX1BFUl9VTklULHtJbmNoOk9wZW5MYXllcnMuSU5DSEVTX1BFUl9VTklULmluY2hlcyxNZXRlcjoxL09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILEZvb3Q6MC4zMDQ4MDA2MDk2MDEyMTkyL09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILElGb290OjAuMzA0OC9PcGVuTGF5ZXJzLk1FVEVSU19QRVJfSU5DSCxDbGFya2VGb290OjAuMzA0Nzk3MjY1MTE1MS9PcGVuTGF5ZXJzLk1FVEVSU19QRVJfSU5DSCxTZWFyc0Zvb3Q6MC4zMDQ3OTk0NzE1Mzg2NzYyNi9PcGVuTGF5ZXJzLk1FVEVSU19QRVJfSU5DSCxHb2xkQ29hc3RGb290OjAuMzA0Nzk5NzEwMTgxNTA4OC9PcGVuTGF5ZXJzLk1FVEVSU19QRVJfSU5DSCxJSW5jaDowLjAyNTQvT3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0gsTWljcm9JbmNoOjIuNTRFLTUvT3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0gsTWlsOjIuNTRFLTgvT3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0gsCkNlbnRpbWV0ZXI6MC4wMS9PcGVuTGF5ZXJzLk1FVEVSU19QRVJfSU5DSCxLaWxvbWV0ZXI6MUUzL09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILFlhcmQ6MC45MTQ0MDE4Mjg4MDM2NTc2L09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILFNlYXJzWWFyZDowLjkxNDM5ODQxNDYxNjAyOS9PcGVuTGF5ZXJzLk1FVEVSU19QRVJfSU5DSCxJbmRpYW5ZYXJkOjAuOTE0Mzk4NTMwNzQ0NDQwOC9PcGVuTGF5ZXJzLk1FVEVSU19QRVJfSU5DSCxJbmRpYW5ZZDM3OjAuOTE0Mzk1MjMvT3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0gsSW5kaWFuWWQ2MjowLjkxNDM5ODgvT3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0gsSW5kaWFuWWQ3NTowLjkxNDM5ODUvT3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0gsSW5kaWFuRm9vdDowLjMwNDc5OTUxL09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILEluZGlhbkZ0Mzc6MC4zMDQ3OTg0MS9PcGVuTGF5ZXJzLk1FVEVSU19QRVJfSU5DSCxJbmRpYW5GdDYyOjAuMzA0Nzk5Ni8KT3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0gsSW5kaWFuRnQ3NTowLjMwNDc5OTUvT3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0gsTWlsZToxNjA5LjM0NzIxODY5NDQzNzMvT3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0gsSVlhcmQ6MC45MTQ0L09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILElNaWxlOjE2MDkuMzQ0L09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILE5hdXRNOjE4NTIvT3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0gsIkxhdC02NiI6MTEwOTQzLjMxNjQ4ODkzMjczL09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILCJMYXQtODMiOjExMDk0Ni4yNTczNjg3MjIzNS9PcGVuTGF5ZXJzLk1FVEVSU19QRVJfSU5DSCxEZWNpbWV0ZXI6MC4xL09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILE1pbGxpbWV0ZXI6MC4wMDEvT3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0gsRGVrYW1ldGVyOjEwL09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILERlY2FtZXRlcjoxMC9PcGVuTGF5ZXJzLk1FVEVSU19QRVJfSU5DSCwKSGVjdG9tZXRlcjoxMDAvT3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0gsR2VybWFuTWV0ZXI6MS4wMDAwMTM1OTY1L09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILENhR3JpZDowLjk5OTczOC9PcGVuTGF5ZXJzLk1FVEVSU19QRVJfSU5DSCxDbGFya2VDaGFpbjoyMC4xMTY2MTk0OTc2L09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILEd1bnRlckNoYWluOjIwLjExNjg0MDIzMzY4MDQ3L09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILEJlbm9pdENoYWluOjIwLjExNjc4MjQ5NDM3NTg3Mi9PcGVuTGF5ZXJzLk1FVEVSU19QRVJfSU5DSCxTZWFyc0NoYWluOjIwLjExNjc2NTEyMTU1L09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILENsYXJrZUxpbms6MC4yMDExNjYxOTQ5NzYvT3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0gsR3VudGVyTGluazowLjIwMTE2ODQwMjMzNjgwNDcvT3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0gsQmVub2l0TGluazowLjIwMTE2NzgyNDk0Mzc1ODczL09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILApTZWFyc0xpbms6MC4yMDExNjc2NTEyMTU1L09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILFJvZDo1LjAyOTIxMDA1ODQyMDEyL09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILEludG5sQ2hhaW46MjAuMTE2OC9PcGVuTGF5ZXJzLk1FVEVSU19QRVJfSU5DSCxJbnRubExpbms6MC4yMDExNjgvT3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0gsUGVyY2g6NS4wMjkyMTAwNTg0MjAxMi9PcGVuTGF5ZXJzLk1FVEVSU19QRVJfSU5DSCxQb2xlOjUuMDI5MjEwMDU4NDIwMTIvT3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0gsRnVybG9uZzoyMDEuMTY4NDAyMzM2ODA0Ni9PcGVuTGF5ZXJzLk1FVEVSU19QRVJfSU5DSCxSb29kOjMuNzc4MjY2ODk4L09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILENhcGVGb290OjAuMzA0Nzk3MjYxNS9PcGVuTGF5ZXJzLk1FVEVSU19QRVJfSU5DSCxCcmVhbGV5OjM3NS9PcGVuTGF5ZXJzLk1FVEVSU19QRVJfSU5DSCxNb2RBbUZ0OjAuMzA0ODEyMjUyOTg0NTA2LwpPcGVuTGF5ZXJzLk1FVEVSU19QRVJfSU5DSCxGYXRob206MS44Mjg4L09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILCJOYXV0TS1VSyI6MTg1My4xODQvT3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0gsIjUwa2lsb21ldGVycyI6NUU0L09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILCIxNTBraWxvbWV0ZXJzIjoxNUU0L09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNIfSk7Ck9wZW5MYXllcnMuVXRpbC5leHRlbmQoT3BlbkxheWVycy5JTkNIRVNfUEVSX1VOSVQse21tOk9wZW5MYXllcnMuSU5DSEVTX1BFUl9VTklULk1ldGVyLzFFMyxjbTpPcGVuTGF5ZXJzLklOQ0hFU19QRVJfVU5JVC5NZXRlci8xMDAsZG06MTAwKk9wZW5MYXllcnMuSU5DSEVTX1BFUl9VTklULk1ldGVyLGttOjFFMypPcGVuTGF5ZXJzLklOQ0hFU19QRVJfVU5JVC5NZXRlcixrbWk6T3BlbkxheWVycy5JTkNIRVNfUEVSX1VOSVQubm1pLGZhdGg6T3BlbkxheWVycy5JTkNIRVNfUEVSX1VOSVQuRmF0aG9tLGNoOk9wZW5MYXllcnMuSU5DSEVTX1BFUl9VTklULkludG5sQ2hhaW4sbGluazpPcGVuTGF5ZXJzLklOQ0hFU19QRVJfVU5JVC5JbnRubExpbmssInVzLWluIjpPcGVuTGF5ZXJzLklOQ0hFU19QRVJfVU5JVC5pbmNoZXMsInVzLWZ0IjpPcGVuTGF5ZXJzLklOQ0hFU19QRVJfVU5JVC5Gb290LCJ1cy15ZCI6T3BlbkxheWVycy5JTkNIRVNfUEVSX1VOSVQuWWFyZCwidXMtY2giOk9wZW5MYXllcnMuSU5DSEVTX1BFUl9VTklULkd1bnRlckNoYWluLAoidXMtbWkiOk9wZW5MYXllcnMuSU5DSEVTX1BFUl9VTklULk1pbGUsImluZC15ZCI6T3BlbkxheWVycy5JTkNIRVNfUEVSX1VOSVQuSW5kaWFuWWQzNywiaW5kLWZ0IjpPcGVuTGF5ZXJzLklOQ0hFU19QRVJfVU5JVC5JbmRpYW5GdDM3LCJpbmQtY2giOjIwLjExNjY5NTA2L09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNIfSk7T3BlbkxheWVycy5ET1RTX1BFUl9JTkNIPTcyO09wZW5MYXllcnMuVXRpbC5ub3JtYWxpemVTY2FsZT1mdW5jdGlvbihhKXtyZXR1cm4gMTxhPzEvYTphfTtPcGVuTGF5ZXJzLlV0aWwuZ2V0UmVzb2x1dGlvbkZyb21TY2FsZT1mdW5jdGlvbihhLGIpe3ZhciBjO2EmJihudWxsPT1iJiYoYj0iZGVncmVlcyIpLGM9MS8oT3BlbkxheWVycy5VdGlsLm5vcm1hbGl6ZVNjYWxlKGEpKk9wZW5MYXllcnMuSU5DSEVTX1BFUl9VTklUW2JdKk9wZW5MYXllcnMuRE9UU19QRVJfSU5DSCkpO3JldHVybiBjfTsKT3BlbkxheWVycy5VdGlsLmdldFNjYWxlRnJvbVJlc29sdXRpb249ZnVuY3Rpb24oYSxiKXtudWxsPT1iJiYoYj0iZGVncmVlcyIpO3JldHVybiBhKk9wZW5MYXllcnMuSU5DSEVTX1BFUl9VTklUW2JdKk9wZW5MYXllcnMuRE9UU19QRVJfSU5DSH07Ck9wZW5MYXllcnMuVXRpbC5wYWdlUG9zaXRpb249ZnVuY3Rpb24oYSl7dmFyIGI9WzAsMF0sYz1PcGVuTGF5ZXJzLlV0aWwuZ2V0Vmlld3BvcnRFbGVtZW50KCk7aWYoIWF8fGE9PXdpbmRvd3x8YT09YylyZXR1cm4gYjt2YXIgZD1PcGVuTGF5ZXJzLklTX0dFQ0tPJiZkb2N1bWVudC5nZXRCb3hPYmplY3RGb3ImJiJhYnNvbHV0ZSI9PU9wZW5MYXllcnMuRWxlbWVudC5nZXRTdHlsZShhLCJwb3NpdGlvbiIpJiYoIiI9PWEuc3R5bGUudG9wfHwiIj09YS5zdHlsZS5sZWZ0KSxlPW51bGw7aWYoYS5nZXRCb3VuZGluZ0NsaWVudFJlY3QpYT1hLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLGU9d2luZG93LnBhZ2VZT2Zmc2V0fHxjLnNjcm9sbFRvcCxiWzBdPWEubGVmdCsod2luZG93LnBhZ2VYT2Zmc2V0fHxjLnNjcm9sbExlZnQpLGJbMV09YS50b3ArZTtlbHNlIGlmKGRvY3VtZW50LmdldEJveE9iamVjdEZvciYmIWQpYT1kb2N1bWVudC5nZXRCb3hPYmplY3RGb3IoYSksYz1kb2N1bWVudC5nZXRCb3hPYmplY3RGb3IoYyksCmJbMF09YS5zY3JlZW5YLWMuc2NyZWVuWCxiWzFdPWEuc2NyZWVuWS1jLnNjcmVlblk7ZWxzZXtiWzBdPWEub2Zmc2V0TGVmdDtiWzFdPWEub2Zmc2V0VG9wO2U9YS5vZmZzZXRQYXJlbnQ7aWYoZSE9YSlmb3IoO2U7KWJbMF0rPWUub2Zmc2V0TGVmdCxiWzFdKz1lLm9mZnNldFRvcCxlPWUub2Zmc2V0UGFyZW50O2M9T3BlbkxheWVycy5CUk9XU0VSX05BTUU7aWYoIm9wZXJhIj09Y3x8InNhZmFyaSI9PWMmJiJhYnNvbHV0ZSI9PU9wZW5MYXllcnMuRWxlbWVudC5nZXRTdHlsZShhLCJwb3NpdGlvbiIpKWJbMV0tPWRvY3VtZW50LmJvZHkub2Zmc2V0VG9wO2ZvcihlPWEub2Zmc2V0UGFyZW50O2UmJmUhPWRvY3VtZW50LmJvZHk7KXtiWzBdLT1lLnNjcm9sbExlZnQ7aWYoIm9wZXJhIiE9Y3x8IlRSIiE9ZS50YWdOYW1lKWJbMV0tPWUuc2Nyb2xsVG9wO2U9ZS5vZmZzZXRQYXJlbnR9fXJldHVybiBifTsKT3BlbkxheWVycy5VdGlsLmdldFZpZXdwb3J0RWxlbWVudD1mdW5jdGlvbigpe3ZhciBhPWFyZ3VtZW50cy5jYWxsZWUudmlld3BvcnRFbGVtZW50O3ZvaWQgMD09YSYmKGE9Im1zaWUiPT1PcGVuTGF5ZXJzLkJST1dTRVJfTkFNRSYmIkNTUzFDb21wYXQiIT1kb2N1bWVudC5jb21wYXRNb2RlP2RvY3VtZW50LmJvZHk6ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LGFyZ3VtZW50cy5jYWxsZWUudmlld3BvcnRFbGVtZW50PWEpO3JldHVybiBhfTsKT3BlbkxheWVycy5VdGlsLmlzRXF1aXZhbGVudFVybD1mdW5jdGlvbihhLGIsYyl7Yz1jfHx7fTtPcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyhjLHtpZ25vcmVDYXNlOiEwLGlnbm9yZVBvcnQ4MDohMCxpZ25vcmVIYXNoOiEwLHNwbGl0QXJnczohMX0pO2E9T3BlbkxheWVycy5VdGlsLmNyZWF0ZVVybE9iamVjdChhLGMpO2I9T3BlbkxheWVycy5VdGlsLmNyZWF0ZVVybE9iamVjdChiLGMpO2Zvcih2YXIgZCBpbiBhKWlmKCJhcmdzIiE9PWQmJmFbZF0hPWJbZF0pcmV0dXJuITE7Zm9yKGQgaW4gYS5hcmdzKXtpZihhLmFyZ3NbZF0hPWIuYXJnc1tkXSlyZXR1cm4hMTtkZWxldGUgYi5hcmdzW2RdfWZvcihkIGluIGIuYXJncylyZXR1cm4hMTtyZXR1cm4hMH07Ck9wZW5MYXllcnMuVXRpbC5jcmVhdGVVcmxPYmplY3Q9ZnVuY3Rpb24oYSxiKXtiPWJ8fHt9O2lmKCEvXlx3KzpcL1wvLy50ZXN0KGEpKXt2YXIgYz13aW5kb3cubG9jYXRpb24sZD1jLnBvcnQ/IjoiK2MucG9ydDoiIixkPWMucHJvdG9jb2wrIi8vIitjLmhvc3Quc3BsaXQoIjoiKS5zaGlmdCgpK2Q7MD09PWEuaW5kZXhPZigiLyIpP2E9ZCthOihjPWMucGF0aG5hbWUuc3BsaXQoIi8iKSxjLnBvcCgpLGE9ZCtjLmpvaW4oIi8iKSsiLyIrYSl9Yi5pZ25vcmVDYXNlJiYoYT1hLnRvTG93ZXJDYXNlKCkpO2M9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYSIpO2MuaHJlZj1hO2Q9e307ZC5ob3N0PWMuaG9zdC5zcGxpdCgiOiIpLnNoaWZ0KCk7ZC5wcm90b2NvbD1jLnByb3RvY29sO2QucG9ydD1iLmlnbm9yZVBvcnQ4MD8iODAiPT1jLnBvcnR8fCIwIj09Yy5wb3J0PyIiOmMucG9ydDoiIj09Yy5wb3J0fHwiMCI9PWMucG9ydD8iODAiOmMucG9ydDtkLmhhc2g9Yi5pZ25vcmVIYXNofHwiIyI9PT0KYy5oYXNoPyIiOmMuaGFzaDt2YXIgZT1jLnNlYXJjaDtlfHwoZT1hLmluZGV4T2YoIj8iKSxlPS0xIT1lP2Euc3Vic3RyKGUpOiIiKTtkLmFyZ3M9T3BlbkxheWVycy5VdGlsLmdldFBhcmFtZXRlcnMoZSx7c3BsaXRBcmdzOmIuc3BsaXRBcmdzfSk7ZC5wYXRobmFtZT0iLyI9PWMucGF0aG5hbWUuY2hhckF0KDApP2MucGF0aG5hbWU6Ii8iK2MucGF0aG5hbWU7cmV0dXJuIGR9O09wZW5MYXllcnMuVXRpbC5yZW1vdmVUYWlsPWZ1bmN0aW9uKGEpe3ZhciBiPW51bGwsYj1hLmluZGV4T2YoIj8iKSxjPWEuaW5kZXhPZigiIyIpO3JldHVybiBiPS0xPT1iPy0xIT1jP2Euc3Vic3RyKDAsYyk6YTotMSE9Yz9hLnN1YnN0cigwLE1hdGgubWluKGIsYykpOmEuc3Vic3RyKDAsYil9O09wZW5MYXllcnMuSVNfR0VDS089ZnVuY3Rpb24oKXt2YXIgYT1uYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCk7cmV0dXJuLTE9PWEuaW5kZXhPZigid2Via2l0IikmJi0xIT1hLmluZGV4T2YoImdlY2tvIil9KCk7Ck9wZW5MYXllcnMuQ0FOVkFTX1NVUFBPUlRFRD1mdW5jdGlvbigpe3ZhciBhPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImNhbnZhcyIpO3JldHVybiEoIWEuZ2V0Q29udGV4dHx8IWEuZ2V0Q29udGV4dCgiMmQiKSl9KCk7T3BlbkxheWVycy5CUk9XU0VSX05BTUU9ZnVuY3Rpb24oKXt2YXIgYT0iIixiPW5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKTstMSE9Yi5pbmRleE9mKCJvcGVyYSIpP2E9Im9wZXJhIjotMSE9Yi5pbmRleE9mKCJtc2llIik/YT0ibXNpZSI6LTEhPWIuaW5kZXhPZigic2FmYXJpIik/YT0ic2FmYXJpIjotMSE9Yi5pbmRleE9mKCJtb3ppbGxhIikmJihhPS0xIT1iLmluZGV4T2YoImZpcmVmb3giKT8iZmlyZWZveCI6Im1vemlsbGEiKTtyZXR1cm4gYX0oKTtPcGVuTGF5ZXJzLlV0aWwuZ2V0QnJvd3Nlck5hbWU9ZnVuY3Rpb24oKXtyZXR1cm4gT3BlbkxheWVycy5CUk9XU0VSX05BTUV9OwpPcGVuTGF5ZXJzLlV0aWwuZ2V0UmVuZGVyZWREaW1lbnNpb25zPWZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGY9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7Zi5zdHlsZS52aXNpYmlsaXR5PSJoaWRkZW4iO2Zvcih2YXIgZz1jJiZjLmNvbnRhaW5lckVsZW1lbnQ/Yy5jb250YWluZXJFbGVtZW50OmRvY3VtZW50LmJvZHksaD0hMSxrPW51bGwsbD1nO2wmJiJib2R5IiE9bC50YWdOYW1lLnRvTG93ZXJDYXNlKCk7KXt2YXIgbT1PcGVuTGF5ZXJzLkVsZW1lbnQuZ2V0U3R5bGUobCwicG9zaXRpb24iKTtpZigiYWJzb2x1dGUiPT1tKXtoPSEwO2JyZWFrfWVsc2UgaWYobSYmInN0YXRpYyIhPW0pYnJlYWs7bD1sLnBhcmVudE5vZGV9IWh8fDAhPT1nLmNsaWVudEhlaWdodCYmMCE9PWcuY2xpZW50V2lkdGh8fChrPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpLGsuc3R5bGUudmlzaWJpbGl0eT0iaGlkZGVuIixrLnN0eWxlLnBvc2l0aW9uPSJhYnNvbHV0ZSIsay5zdHlsZS5vdmVyZmxvdz0KInZpc2libGUiLGsuc3R5bGUud2lkdGg9ZG9jdW1lbnQuYm9keS5jbGllbnRXaWR0aCsicHgiLGsuc3R5bGUuaGVpZ2h0PWRvY3VtZW50LmJvZHkuY2xpZW50SGVpZ2h0KyJweCIsay5hcHBlbmRDaGlsZChmKSk7Zi5zdHlsZS5wb3NpdGlvbj0iYWJzb2x1dGUiO2ImJihiLnc/KGQ9Yi53LGYuc3R5bGUud2lkdGg9ZCsicHgiKTpiLmgmJihlPWIuaCxmLnN0eWxlLmhlaWdodD1lKyJweCIpKTtjJiZjLmRpc3BsYXlDbGFzcyYmKGYuY2xhc3NOYW1lPWMuZGlzcGxheUNsYXNzKTtiPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO2IuaW5uZXJIVE1MPWE7Yi5zdHlsZS5vdmVyZmxvdz0idmlzaWJsZSI7aWYoYi5jaGlsZE5vZGVzKWZvcihhPTAsYz1iLmNoaWxkTm9kZXMubGVuZ3RoO2E8YzthKyspYi5jaGlsZE5vZGVzW2FdLnN0eWxlJiYoYi5jaGlsZE5vZGVzW2FdLnN0eWxlLm92ZXJmbG93PSJ2aXNpYmxlIik7Zi5hcHBlbmRDaGlsZChiKTtrP2cuYXBwZW5kQ2hpbGQoayk6Zy5hcHBlbmRDaGlsZChmKTsKZHx8KGQ9cGFyc2VJbnQoYi5zY3JvbGxXaWR0aCksZi5zdHlsZS53aWR0aD1kKyJweCIpO2V8fChlPXBhcnNlSW50KGIuc2Nyb2xsSGVpZ2h0KSk7Zi5yZW1vdmVDaGlsZChiKTtrPyhrLnJlbW92ZUNoaWxkKGYpLGcucmVtb3ZlQ2hpbGQoaykpOmcucmVtb3ZlQ2hpbGQoZik7cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLlNpemUoZCxlKX07Ck9wZW5MYXllcnMuVXRpbC5nZXRTY3JvbGxiYXJXaWR0aD1mdW5jdGlvbigpe3ZhciBhPU9wZW5MYXllcnMuVXRpbC5fc2Nyb2xsYmFyV2lkdGg7aWYobnVsbD09YSl7dmFyIGI9bnVsbCxjPW51bGwsYj1hPTAsYj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTtiLnN0eWxlLnBvc2l0aW9uPSJhYnNvbHV0ZSI7Yi5zdHlsZS50b3A9Ii0xMDAwcHgiO2Iuc3R5bGUubGVmdD0iLTEwMDBweCI7Yi5zdHlsZS53aWR0aD0iMTAwcHgiO2Iuc3R5bGUuaGVpZ2h0PSI1MHB4IjtiLnN0eWxlLm92ZXJmbG93PSJoaWRkZW4iO2M9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7Yy5zdHlsZS53aWR0aD0iMTAwJSI7Yy5zdHlsZS5oZWlnaHQ9IjIwMHB4IjtiLmFwcGVuZENoaWxkKGMpO2RvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYik7YT1jLm9mZnNldFdpZHRoO2Iuc3R5bGUub3ZlcmZsb3c9InNjcm9sbCI7Yj1jLm9mZnNldFdpZHRoO2RvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoZG9jdW1lbnQuYm9keS5sYXN0Q2hpbGQpOwpPcGVuTGF5ZXJzLlV0aWwuX3Njcm9sbGJhcldpZHRoPWEtYjthPU9wZW5MYXllcnMuVXRpbC5fc2Nyb2xsYmFyV2lkdGh9cmV0dXJuIGF9OwpPcGVuTGF5ZXJzLlV0aWwuZ2V0Rm9ybWF0dGVkTG9uTGF0PWZ1bmN0aW9uKGEsYixjKXtjfHwoYz0iZG1zIik7YT0oYSs1NDApJTM2MC0xODA7dmFyIGQ9TWF0aC5hYnMoYSksZT1NYXRoLmZsb29yKGQpLGY9ZD0oZC1lKS8oMS82MCksZD1NYXRoLmZsb29yKGQpLGY9TWF0aC5yb3VuZCgxMCooKGYtZCkvKDEvNjApKSksZj1mLzEwOzYwPD1mJiYoZi09NjAsZCs9MSw2MDw9ZCYmKGQtPTYwLGUrPTEpKTsxMD5lJiYoZT0iMCIrZSk7ZSs9Ilx1MDBiMCI7MDw9Yy5pbmRleE9mKCJkbSIpJiYoMTA+ZCYmKGQ9IjAiK2QpLGUrPWQrIiciLDA8PWMuaW5kZXhPZigiZG1zIikmJigxMD5mJiYoZj0iMCIrZiksZSs9ZisnIicpKTtyZXR1cm4gZT0ibG9uIj09Yj9lKygwPmE/T3BlbkxheWVycy5pMThuKCJXIik6T3BlbkxheWVycy5pMThuKCJFIikpOmUrKDA+YT9PcGVuTGF5ZXJzLmkxOG4oIlMiKTpPcGVuTGF5ZXJzLmkxOG4oIk4iKSl9O09wZW5MYXllcnMuRm9ybWF0PU9wZW5MYXllcnMuQ2xhc3Moe29wdGlvbnM6bnVsbCxleHRlcm5hbFByb2plY3Rpb246bnVsbCxpbnRlcm5hbFByb2plY3Rpb246bnVsbCxkYXRhOm51bGwsa2VlcERhdGE6ITEsaW5pdGlhbGl6ZTpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHRoaXMsYSk7dGhpcy5vcHRpb25zPWF9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt9LHJlYWQ6ZnVuY3Rpb24oYSl7dGhyb3cgRXJyb3IoIlJlYWQgbm90IGltcGxlbWVudGVkLiIpO30sd3JpdGU6ZnVuY3Rpb24oYSl7dGhyb3cgRXJyb3IoIldyaXRlIG5vdCBpbXBsZW1lbnRlZC4iKTt9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuRm9ybWF0In0pO09wZW5MYXllcnMuRm9ybWF0LkNTV0dldFJlY29yZHM9ZnVuY3Rpb24oYSl7YT1PcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyhhLE9wZW5MYXllcnMuRm9ybWF0LkNTV0dldFJlY29yZHMuREVGQVVMVFMpO3ZhciBiPU9wZW5MYXllcnMuRm9ybWF0LkNTV0dldFJlY29yZHNbInYiK2EudmVyc2lvbi5yZXBsYWNlKC9cLi9nLCJfIildO2lmKCFiKXRocm93IlVuc3VwcG9ydGVkIENTV0dldFJlY29yZHMgdmVyc2lvbjogIithLnZlcnNpb247cmV0dXJuIG5ldyBiKGEpfTtPcGVuTGF5ZXJzLkZvcm1hdC5DU1dHZXRSZWNvcmRzLkRFRkFVTFRTPXt2ZXJzaW9uOiIyLjAuMiJ9O09wZW5MYXllcnMuQ29udHJvbD1PcGVuTGF5ZXJzLkNsYXNzKHtpZDpudWxsLG1hcDpudWxsLGRpdjpudWxsLHR5cGU6bnVsbCxhbGxvd1NlbGVjdGlvbjohMSxkaXNwbGF5Q2xhc3M6IiIsdGl0bGU6IiIsYXV0b0FjdGl2YXRlOiExLGFjdGl2ZTpudWxsLGhhbmRsZXJPcHRpb25zOm51bGwsaGFuZGxlcjpudWxsLGV2ZW50TGlzdGVuZXJzOm51bGwsZXZlbnRzOm51bGwsaW5pdGlhbGl6ZTpmdW5jdGlvbihhKXt0aGlzLmRpc3BsYXlDbGFzcz10aGlzLkNMQVNTX05BTUUucmVwbGFjZSgiT3BlbkxheWVycy4iLCJvbCIpLnJlcGxhY2UoL1wuL2csIiIpO09wZW5MYXllcnMuVXRpbC5leHRlbmQodGhpcyxhKTt0aGlzLmV2ZW50cz1uZXcgT3BlbkxheWVycy5FdmVudHModGhpcyk7aWYodGhpcy5ldmVudExpc3RlbmVycyBpbnN0YW5jZW9mIE9iamVjdCl0aGlzLmV2ZW50cy5vbih0aGlzLmV2ZW50TGlzdGVuZXJzKTtudWxsPT10aGlzLmlkJiYodGhpcy5pZD1PcGVuTGF5ZXJzLlV0aWwuY3JlYXRlVW5pcXVlSUQodGhpcy5DTEFTU19OQU1FKwoiXyIpKX0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuZXZlbnRzJiYodGhpcy5ldmVudExpc3RlbmVycyYmdGhpcy5ldmVudHMudW4odGhpcy5ldmVudExpc3RlbmVycyksdGhpcy5ldmVudHMuZGVzdHJveSgpLHRoaXMuZXZlbnRzPW51bGwpO3RoaXMuZXZlbnRMaXN0ZW5lcnM9bnVsbDt0aGlzLmhhbmRsZXImJih0aGlzLmhhbmRsZXIuZGVzdHJveSgpLHRoaXMuaGFuZGxlcj1udWxsKTtpZih0aGlzLmhhbmRsZXJzKXtmb3IodmFyIGEgaW4gdGhpcy5oYW5kbGVycyl0aGlzLmhhbmRsZXJzLmhhc093blByb3BlcnR5KGEpJiYiZnVuY3Rpb24iPT10eXBlb2YgdGhpcy5oYW5kbGVyc1thXS5kZXN0cm95JiZ0aGlzLmhhbmRsZXJzW2FdLmRlc3Ryb3koKTt0aGlzLmhhbmRsZXJzPW51bGx9dGhpcy5tYXAmJih0aGlzLm1hcC5yZW1vdmVDb250cm9sKHRoaXMpLHRoaXMubWFwPW51bGwpO3RoaXMuZGl2PW51bGx9LHNldE1hcDpmdW5jdGlvbihhKXt0aGlzLm1hcD1hO3RoaXMuaGFuZGxlciYmCnRoaXMuaGFuZGxlci5zZXRNYXAoYSl9LGRyYXc6ZnVuY3Rpb24oYSl7bnVsbD09dGhpcy5kaXYmJih0aGlzLmRpdj1PcGVuTGF5ZXJzLlV0aWwuY3JlYXRlRGl2KHRoaXMuaWQpLHRoaXMuZGl2LmNsYXNzTmFtZT10aGlzLmRpc3BsYXlDbGFzcyx0aGlzLmFsbG93U2VsZWN0aW9ufHwodGhpcy5kaXYuY2xhc3NOYW1lKz0iIG9sQ29udHJvbE5vU2VsZWN0Iix0aGlzLmRpdi5zZXRBdHRyaWJ1dGUoInVuc2VsZWN0YWJsZSIsIm9uIiwwKSx0aGlzLmRpdi5vbnNlbGVjdHN0YXJ0PU9wZW5MYXllcnMuRnVuY3Rpb24uRmFsc2UpLCIiIT10aGlzLnRpdGxlJiYodGhpcy5kaXYudGl0bGU9dGhpcy50aXRsZSkpO251bGwhPWEmJih0aGlzLnBvc2l0aW9uPWEuY2xvbmUoKSk7dGhpcy5tb3ZlVG8odGhpcy5wb3NpdGlvbik7cmV0dXJuIHRoaXMuZGl2fSxtb3ZlVG86ZnVuY3Rpb24oYSl7bnVsbCE9YSYmbnVsbCE9dGhpcy5kaXYmJih0aGlzLmRpdi5zdHlsZS5sZWZ0PWEueCsicHgiLHRoaXMuZGl2LnN0eWxlLnRvcD0KYS55KyJweCIpfSxhY3RpdmF0ZTpmdW5jdGlvbigpe2lmKHRoaXMuYWN0aXZlKXJldHVybiExO3RoaXMuaGFuZGxlciYmdGhpcy5oYW5kbGVyLmFjdGl2YXRlKCk7dGhpcy5hY3RpdmU9ITA7dGhpcy5tYXAmJk9wZW5MYXllcnMuRWxlbWVudC5hZGRDbGFzcyh0aGlzLm1hcC52aWV3UG9ydERpdix0aGlzLmRpc3BsYXlDbGFzcy5yZXBsYWNlKC8gL2csIiIpKyJBY3RpdmUiKTt0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoImFjdGl2YXRlIik7cmV0dXJuITB9LGRlYWN0aXZhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hY3RpdmU/KHRoaXMuaGFuZGxlciYmdGhpcy5oYW5kbGVyLmRlYWN0aXZhdGUoKSx0aGlzLmFjdGl2ZT0hMSx0aGlzLm1hcCYmT3BlbkxheWVycy5FbGVtZW50LnJlbW92ZUNsYXNzKHRoaXMubWFwLnZpZXdQb3J0RGl2LHRoaXMuZGlzcGxheUNsYXNzLnJlcGxhY2UoLyAvZywiIikrIkFjdGl2ZSIpLHRoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgiZGVhY3RpdmF0ZSIpLAohMCk6ITF9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuQ29udHJvbCJ9KTtPcGVuTGF5ZXJzLkNvbnRyb2wuVFlQRV9CVVRUT049MTtPcGVuTGF5ZXJzLkNvbnRyb2wuVFlQRV9UT0dHTEU9MjtPcGVuTGF5ZXJzLkNvbnRyb2wuVFlQRV9UT09MPTM7T3BlbkxheWVycy5FdmVudD17b2JzZXJ2ZXJzOiExLEtFWV9TUEFDRTozMixLRVlfQkFDS1NQQUNFOjgsS0VZX1RBQjo5LEtFWV9SRVRVUk46MTMsS0VZX0VTQzoyNyxLRVlfTEVGVDozNyxLRVlfVVA6MzgsS0VZX1JJR0hUOjM5LEtFWV9ET1dOOjQwLEtFWV9ERUxFVEU6NDYsZWxlbWVudDpmdW5jdGlvbihhKXtyZXR1cm4gYS50YXJnZXR8fGEuc3JjRWxlbWVudH0saXNTaW5nbGVUb3VjaDpmdW5jdGlvbihhKXtyZXR1cm4gYS50b3VjaGVzJiYxPT1hLnRvdWNoZXMubGVuZ3RofSxpc011bHRpVG91Y2g6ZnVuY3Rpb24oYSl7cmV0dXJuIGEudG91Y2hlcyYmMTxhLnRvdWNoZXMubGVuZ3RofSxpc0xlZnRDbGljazpmdW5jdGlvbihhKXtyZXR1cm4gYS53aGljaCYmMT09YS53aGljaHx8YS5idXR0b24mJjE9PWEuYnV0dG9ufSxpc1JpZ2h0Q2xpY2s6ZnVuY3Rpb24oYSl7cmV0dXJuIGEud2hpY2gmJjM9PWEud2hpY2h8fGEuYnV0dG9uJiYyPT1hLmJ1dHRvbn0sc3RvcDpmdW5jdGlvbihhLApiKXtifHxPcGVuTGF5ZXJzLkV2ZW50LnByZXZlbnREZWZhdWx0KGEpO2Euc3RvcFByb3BhZ2F0aW9uP2Euc3RvcFByb3BhZ2F0aW9uKCk6YS5jYW5jZWxCdWJibGU9ITB9LHByZXZlbnREZWZhdWx0OmZ1bmN0aW9uKGEpe2EucHJldmVudERlZmF1bHQ/YS5wcmV2ZW50RGVmYXVsdCgpOmEucmV0dXJuVmFsdWU9ITF9LGZpbmRFbGVtZW50OmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPU9wZW5MYXllcnMuRXZlbnQuZWxlbWVudChhKTtjLnBhcmVudE5vZGUmJighYy50YWdOYW1lfHxjLnRhZ05hbWUudG9VcHBlckNhc2UoKSE9Yi50b1VwcGVyQ2FzZSgpKTspYz1jLnBhcmVudE5vZGU7cmV0dXJuIGN9LG9ic2VydmU6ZnVuY3Rpb24oYSxiLGMsZCl7YT1PcGVuTGF5ZXJzLlV0aWwuZ2V0RWxlbWVudChhKTtkPWR8fCExOyJrZXlwcmVzcyI9PWImJihuYXZpZ2F0b3IuYXBwVmVyc2lvbi5tYXRjaCgvS29ucXVlcm9yfFNhZmFyaXxLSFRNTC8pfHxhLmF0dGFjaEV2ZW50KSYmKGI9ImtleWRvd24iKTsKdGhpcy5vYnNlcnZlcnN8fCh0aGlzLm9ic2VydmVycz17fSk7aWYoIWEuX2V2ZW50Q2FjaGVJRCl7dmFyIGU9ImV2ZW50Q2FjaGVJRF8iO2EuaWQmJihlPWEuaWQrIl8iK2UpO2EuX2V2ZW50Q2FjaGVJRD1PcGVuTGF5ZXJzLlV0aWwuY3JlYXRlVW5pcXVlSUQoZSl9ZT1hLl9ldmVudENhY2hlSUQ7dGhpcy5vYnNlcnZlcnNbZV18fCh0aGlzLm9ic2VydmVyc1tlXT1bXSk7dGhpcy5vYnNlcnZlcnNbZV0ucHVzaCh7ZWxlbWVudDphLG5hbWU6YixvYnNlcnZlcjpjLHVzZUNhcHR1cmU6ZH0pO2EuYWRkRXZlbnRMaXN0ZW5lcj9hLmFkZEV2ZW50TGlzdGVuZXIoYixjLGQpOmEuYXR0YWNoRXZlbnQmJmEuYXR0YWNoRXZlbnQoIm9uIitiLGMpfSxzdG9wT2JzZXJ2aW5nRWxlbWVudDpmdW5jdGlvbihhKXthPU9wZW5MYXllcnMuVXRpbC5nZXRFbGVtZW50KGEpLl9ldmVudENhY2hlSUQ7dGhpcy5fcmVtb3ZlRWxlbWVudE9ic2VydmVycyhPcGVuTGF5ZXJzLkV2ZW50Lm9ic2VydmVyc1thXSl9LApfcmVtb3ZlRWxlbWVudE9ic2VydmVyczpmdW5jdGlvbihhKXtpZihhKWZvcih2YXIgYj1hLmxlbmd0aC0xOzA8PWI7Yi0tKXt2YXIgYz1hW2JdO09wZW5MYXllcnMuRXZlbnQuc3RvcE9ic2VydmluZy5hcHBseSh0aGlzLFtjLmVsZW1lbnQsYy5uYW1lLGMub2JzZXJ2ZXIsYy51c2VDYXB0dXJlXSl9fSxzdG9wT2JzZXJ2aW5nOmZ1bmN0aW9uKGEsYixjLGQpe2Q9ZHx8ITE7YT1PcGVuTGF5ZXJzLlV0aWwuZ2V0RWxlbWVudChhKTt2YXIgZT1hLl9ldmVudENhY2hlSUQ7ImtleXByZXNzIj09YiYmKG5hdmlnYXRvci5hcHBWZXJzaW9uLm1hdGNoKC9Lb25xdWVyb3J8U2FmYXJpfEtIVE1MLyl8fGEuZGV0YWNoRXZlbnQpJiYoYj0ia2V5ZG93biIpO3ZhciBmPSExLGc9T3BlbkxheWVycy5FdmVudC5vYnNlcnZlcnNbZV07aWYoZylmb3IodmFyIGg9MDshZiYmaDxnLmxlbmd0aDspe3ZhciBrPWdbaF07aWYoay5uYW1lPT1iJiZrLm9ic2VydmVyPT1jJiZrLnVzZUNhcHR1cmU9PWQpe2cuc3BsaWNlKGgsCjEpOzA9PWcubGVuZ3RoJiZkZWxldGUgT3BlbkxheWVycy5FdmVudC5vYnNlcnZlcnNbZV07Zj0hMDticmVha31oKyt9ZiYmKGEucmVtb3ZlRXZlbnRMaXN0ZW5lcj9hLnJlbW92ZUV2ZW50TGlzdGVuZXIoYixjLGQpOmEmJmEuZGV0YWNoRXZlbnQmJmEuZGV0YWNoRXZlbnQoIm9uIitiLGMpKTtyZXR1cm4gZn0sdW5sb2FkQ2FjaGU6ZnVuY3Rpb24oKXtpZihPcGVuTGF5ZXJzLkV2ZW50JiZPcGVuTGF5ZXJzLkV2ZW50Lm9ic2VydmVycyl7Zm9yKHZhciBhIGluIE9wZW5MYXllcnMuRXZlbnQub2JzZXJ2ZXJzKU9wZW5MYXllcnMuRXZlbnQuX3JlbW92ZUVsZW1lbnRPYnNlcnZlcnMuYXBwbHkodGhpcyxbT3BlbkxheWVycy5FdmVudC5vYnNlcnZlcnNbYV1dKTtPcGVuTGF5ZXJzLkV2ZW50Lm9ic2VydmVycz0hMX19LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuRXZlbnQifTsKT3BlbkxheWVycy5FdmVudC5vYnNlcnZlKHdpbmRvdywidW5sb2FkIixPcGVuTGF5ZXJzLkV2ZW50LnVubG9hZENhY2hlLCExKTsKT3BlbkxheWVycy5FdmVudHM9T3BlbkxheWVycy5DbGFzcyh7QlJPV1NFUl9FVkVOVFM6Im1vdXNlb3ZlciBtb3VzZW91dCBtb3VzZWRvd24gbW91c2V1cCBtb3VzZW1vdmUgY2xpY2sgZGJsY2xpY2sgcmlnaHRjbGljayBkYmxyaWdodGNsaWNrIHJlc2l6ZSBmb2N1cyBibHVyIHRvdWNoc3RhcnQgdG91Y2htb3ZlIHRvdWNoZW5kIGtleWRvd24iLnNwbGl0KCIgIiksbGlzdGVuZXJzOm51bGwsb2JqZWN0Om51bGwsZWxlbWVudDpudWxsLGV2ZW50SGFuZGxlcjpudWxsLGZhbGxUaHJvdWdoOm51bGwsaW5jbHVkZVhZOiExLGV4dGVuc2lvbnM6bnVsbCxleHRlbnNpb25Db3VudDpudWxsLGNsZWFyTW91c2VMaXN0ZW5lcjpudWxsLGluaXRpYWxpemU6ZnVuY3Rpb24oYSxiLGMsZCxlKXtPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHRoaXMsZSk7dGhpcy5vYmplY3Q9YTt0aGlzLmZhbGxUaHJvdWdoPWQ7dGhpcy5saXN0ZW5lcnM9e307dGhpcy5leHRlbnNpb25zPXt9O3RoaXMuZXh0ZW5zaW9uQ291bnQ9Cnt9O3RoaXMuX21zVG91Y2hlcz1bXTtudWxsIT1iJiZ0aGlzLmF0dGFjaFRvRWxlbWVudChiKX0sZGVzdHJveTpmdW5jdGlvbigpe2Zvcih2YXIgYSBpbiB0aGlzLmV4dGVuc2lvbnMpImJvb2xlYW4iIT09dHlwZW9mIHRoaXMuZXh0ZW5zaW9uc1thXSYmdGhpcy5leHRlbnNpb25zW2FdLmRlc3Ryb3koKTt0aGlzLmV4dGVuc2lvbnM9bnVsbDt0aGlzLmVsZW1lbnQmJihPcGVuTGF5ZXJzLkV2ZW50LnN0b3BPYnNlcnZpbmdFbGVtZW50KHRoaXMuZWxlbWVudCksdGhpcy5lbGVtZW50Lmhhc1Njcm9sbEV2ZW50JiZPcGVuTGF5ZXJzLkV2ZW50LnN0b3BPYnNlcnZpbmcod2luZG93LCJzY3JvbGwiLHRoaXMuY2xlYXJNb3VzZUxpc3RlbmVyKSk7dGhpcy5ldmVudEhhbmRsZXI9dGhpcy5mYWxsVGhyb3VnaD10aGlzLm9iamVjdD10aGlzLmxpc3RlbmVycz10aGlzLmVsZW1lbnQ9bnVsbH0sYWRkRXZlbnRUeXBlOmZ1bmN0aW9uKGEpe30sYXR0YWNoVG9FbGVtZW50OmZ1bmN0aW9uKGEpe3RoaXMuZWxlbWVudD8KT3BlbkxheWVycy5FdmVudC5zdG9wT2JzZXJ2aW5nRWxlbWVudCh0aGlzLmVsZW1lbnQpOih0aGlzLmV2ZW50SGFuZGxlcj1PcGVuTGF5ZXJzLkZ1bmN0aW9uLmJpbmRBc0V2ZW50TGlzdGVuZXIodGhpcy5oYW5kbGVCcm93c2VyRXZlbnQsdGhpcyksdGhpcy5jbGVhck1vdXNlTGlzdGVuZXI9T3BlbkxheWVycy5GdW5jdGlvbi5iaW5kKHRoaXMuY2xlYXJNb3VzZUNhY2hlLHRoaXMpKTt0aGlzLmVsZW1lbnQ9YTtmb3IodmFyIGI9ISF3aW5kb3cubmF2aWdhdG9yLm1zTWF4VG91Y2hQb2ludHMsYyxkPTAsZT10aGlzLkJST1dTRVJfRVZFTlRTLmxlbmd0aDtkPGU7ZCsrKWM9dGhpcy5CUk9XU0VSX0VWRU5UU1tkXSxPcGVuTGF5ZXJzLkV2ZW50Lm9ic2VydmUoYSxjLHRoaXMuZXZlbnRIYW5kbGVyKSxiJiYwPT09Yy5pbmRleE9mKCJ0b3VjaCIpJiZ0aGlzLmFkZE1zVG91Y2hMaXN0ZW5lcihhLGMsdGhpcy5ldmVudEhhbmRsZXIpO09wZW5MYXllcnMuRXZlbnQub2JzZXJ2ZShhLCJkcmFnc3RhcnQiLApPcGVuTGF5ZXJzLkV2ZW50LnN0b3ApfSxvbjpmdW5jdGlvbihhKXtmb3IodmFyIGIgaW4gYSkic2NvcGUiIT1iJiZhLmhhc093blByb3BlcnR5KGIpJiZ0aGlzLnJlZ2lzdGVyKGIsYS5zY29wZSxhW2JdKX0scmVnaXN0ZXI6ZnVuY3Rpb24oYSxiLGMsZCl7YSBpbiBPcGVuTGF5ZXJzLkV2ZW50cyYmIXRoaXMuZXh0ZW5zaW9uc1thXSYmKHRoaXMuZXh0ZW5zaW9uc1thXT1uZXcgT3BlbkxheWVycy5FdmVudHNbYV0odGhpcykpO2lmKG51bGwhPWMpe251bGw9PWImJihiPXRoaXMub2JqZWN0KTt2YXIgZT10aGlzLmxpc3RlbmVyc1thXTtlfHwoZT1bXSx0aGlzLmxpc3RlbmVyc1thXT1lLHRoaXMuZXh0ZW5zaW9uQ291bnRbYV09MCk7Yj17b2JqOmIsZnVuYzpjfTtkPyhlLnNwbGljZSh0aGlzLmV4dGVuc2lvbkNvdW50W2FdLDAsYiksIm9iamVjdCI9PT10eXBlb2YgZCYmZC5leHRlbnNpb24mJnRoaXMuZXh0ZW5zaW9uQ291bnRbYV0rKyk6ZS5wdXNoKGIpfX0scmVnaXN0ZXJQcmlvcml0eTpmdW5jdGlvbihhLApiLGMpe3RoaXMucmVnaXN0ZXIoYSxiLGMsITApfSx1bjpmdW5jdGlvbihhKXtmb3IodmFyIGIgaW4gYSkic2NvcGUiIT1iJiZhLmhhc093blByb3BlcnR5KGIpJiZ0aGlzLnVucmVnaXN0ZXIoYixhLnNjb3BlLGFbYl0pfSx1bnJlZ2lzdGVyOmZ1bmN0aW9uKGEsYixjKXtudWxsPT1iJiYoYj10aGlzLm9iamVjdCk7YT10aGlzLmxpc3RlbmVyc1thXTtpZihudWxsIT1hKWZvcih2YXIgZD0wLGU9YS5sZW5ndGg7ZDxlO2QrKylpZihhW2RdLm9iaj09YiYmYVtkXS5mdW5jPT1jKXthLnNwbGljZShkLDEpO2JyZWFrfX0scmVtb3ZlOmZ1bmN0aW9uKGEpe251bGwhPXRoaXMubGlzdGVuZXJzW2FdJiYodGhpcy5saXN0ZW5lcnNbYV09W10pfSx0cmlnZ2VyRXZlbnQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmxpc3RlbmVyc1thXTtpZihjJiYwIT1jLmxlbmd0aCl7bnVsbD09YiYmKGI9e30pO2Iub2JqZWN0PXRoaXMub2JqZWN0O2IuZWxlbWVudD10aGlzLmVsZW1lbnQ7Yi50eXBlfHwoYi50eXBlPQphKTtmb3IodmFyIGM9Yy5zbGljZSgpLGQsZT0wLGY9Yy5sZW5ndGg7ZTxmJiYoZD1jW2VdLGQ9ZC5mdW5jLmFwcGx5KGQub2JqLFtiXSksdm9pZCAwPT1kfHwhMSE9ZCk7ZSsrKTt0aGlzLmZhbGxUaHJvdWdofHxPcGVuTGF5ZXJzLkV2ZW50LnN0b3AoYiwhMCk7cmV0dXJuIGR9fSxoYW5kbGVCcm93c2VyRXZlbnQ6ZnVuY3Rpb24oYSl7dmFyIGI9YS50eXBlLGM9dGhpcy5saXN0ZW5lcnNbYl07aWYoYyYmMCE9Yy5sZW5ndGgpe2lmKChjPWEudG91Y2hlcykmJmNbMF0pe2Zvcih2YXIgZD0wLGU9MCxmPWMubGVuZ3RoLGcsaD0wO2g8ZjsrK2gpZz10aGlzLmdldFRvdWNoQ2xpZW50WFkoY1toXSksZCs9Zy5jbGllbnRYLGUrPWcuY2xpZW50WTthLmNsaWVudFg9ZC9mO2EuY2xpZW50WT1lL2Z9dGhpcy5pbmNsdWRlWFkmJihhLnh5PXRoaXMuZ2V0TW91c2VQb3NpdGlvbihhKSk7dGhpcy50cmlnZ2VyRXZlbnQoYixhKX19LGdldFRvdWNoQ2xpZW50WFk6ZnVuY3Rpb24oYSl7dmFyIGI9d2luZG93Lm9sTW9ja1dpbnx8CndpbmRvdyxjPWIucGFnZVhPZmZzZXQsYj1iLnBhZ2VZT2Zmc2V0LGQ9YS5jbGllbnRYLGU9YS5jbGllbnRZO2lmKDA9PT1hLnBhZ2VZJiZNYXRoLmZsb29yKGUpPk1hdGguZmxvb3IoYS5wYWdlWSl8fDA9PT1hLnBhZ2VYJiZNYXRoLmZsb29yKGQpPk1hdGguZmxvb3IoYS5wYWdlWCkpZC09YyxlLT1iO2Vsc2UgaWYoZTxhLnBhZ2VZLWJ8fGQ8YS5wYWdlWC1jKWQ9YS5wYWdlWC1jLGU9YS5wYWdlWS1iO2Eub2xDbGllbnRYPWQ7YS5vbENsaWVudFk9ZTtyZXR1cm57Y2xpZW50WDpkLGNsaWVudFk6ZX19LGNsZWFyTW91c2VDYWNoZTpmdW5jdGlvbigpe3RoaXMuZWxlbWVudC5zY3JvbGxzPW51bGw7dGhpcy5lbGVtZW50LmxlZnR0b3A9bnVsbDt0aGlzLmVsZW1lbnQub2Zmc2V0cz1udWxsfSxnZXRNb3VzZVBvc2l0aW9uOmZ1bmN0aW9uKGEpe3RoaXMuaW5jbHVkZVhZP3RoaXMuZWxlbWVudC5oYXNTY3JvbGxFdmVudHx8KE9wZW5MYXllcnMuRXZlbnQub2JzZXJ2ZSh3aW5kb3csInNjcm9sbCIsCnRoaXMuY2xlYXJNb3VzZUxpc3RlbmVyKSx0aGlzLmVsZW1lbnQuaGFzU2Nyb2xsRXZlbnQ9ITApOnRoaXMuY2xlYXJNb3VzZUNhY2hlKCk7aWYoIXRoaXMuZWxlbWVudC5zY3JvbGxzKXt2YXIgYj1PcGVuTGF5ZXJzLlV0aWwuZ2V0Vmlld3BvcnRFbGVtZW50KCk7dGhpcy5lbGVtZW50LnNjcm9sbHM9W3dpbmRvdy5wYWdlWE9mZnNldHx8Yi5zY3JvbGxMZWZ0LHdpbmRvdy5wYWdlWU9mZnNldHx8Yi5zY3JvbGxUb3BdfXRoaXMuZWxlbWVudC5sZWZ0dG9wfHwodGhpcy5lbGVtZW50LmxlZnR0b3A9W2RvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRMZWZ0fHwwLGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRUb3B8fDBdKTt0aGlzLmVsZW1lbnQub2Zmc2V0c3x8KHRoaXMuZWxlbWVudC5vZmZzZXRzPU9wZW5MYXllcnMuVXRpbC5wYWdlUG9zaXRpb24odGhpcy5lbGVtZW50KSk7cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLlBpeGVsKGEuY2xpZW50WCt0aGlzLmVsZW1lbnQuc2Nyb2xsc1swXS0KdGhpcy5lbGVtZW50Lm9mZnNldHNbMF0tdGhpcy5lbGVtZW50LmxlZnR0b3BbMF0sYS5jbGllbnRZK3RoaXMuZWxlbWVudC5zY3JvbGxzWzFdLXRoaXMuZWxlbWVudC5vZmZzZXRzWzFdLXRoaXMuZWxlbWVudC5sZWZ0dG9wWzFdKX0sYWRkTXNUb3VjaExpc3RlbmVyOmZ1bmN0aW9uKGEsYixjKXtmdW5jdGlvbiBkKGEpe2MoT3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoe3N0b3BQcm9wYWdhdGlvbjpmdW5jdGlvbigpe2Zvcih2YXIgYT1lLmxlbmd0aC0xOzA8PWE7LS1hKWVbYV0uc3RvcFByb3BhZ2F0aW9uKCl9LHByZXZlbnREZWZhdWx0OmZ1bmN0aW9uKCl7Zm9yKHZhciBhPWUubGVuZ3RoLTE7MDw9YTstLWEpZVthXS5wcmV2ZW50RGVmYXVsdCgpfSx0eXBlOmJ9LGEpKX12YXIgZT10aGlzLl9tc1RvdWNoZXM7c3dpdGNoKGIpe2Nhc2UgInRvdWNoc3RhcnQiOnJldHVybiB0aGlzLmFkZE1zVG91Y2hMaXN0ZW5lclN0YXJ0KGEsYixkKTtjYXNlICJ0b3VjaGVuZCI6cmV0dXJuIHRoaXMuYWRkTXNUb3VjaExpc3RlbmVyRW5kKGEsCmIsZCk7Y2FzZSAidG91Y2htb3ZlIjpyZXR1cm4gdGhpcy5hZGRNc1RvdWNoTGlzdGVuZXJNb3ZlKGEsYixkKTtkZWZhdWx0OnRocm93IlVua25vd24gdG91Y2ggZXZlbnQgdHlwZSI7fX0sYWRkTXNUb3VjaExpc3RlbmVyU3RhcnQ6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXRoaXMuX21zVG91Y2hlcztPcGVuTGF5ZXJzLkV2ZW50Lm9ic2VydmUoYSwiTVNQb2ludGVyRG93biIsZnVuY3Rpb24oYSl7Zm9yKHZhciBiPSExLGc9MCxoPWQubGVuZ3RoO2c8aDsrK2cpaWYoZFtnXS5wb2ludGVySWQ9PWEucG9pbnRlcklkKXtiPSEwO2JyZWFrfWJ8fGQucHVzaChhKTthLnRvdWNoZXM9ZC5zbGljZSgpO2MoYSl9KTtPcGVuTGF5ZXJzLkV2ZW50Lm9ic2VydmUoYSwiTVNQb2ludGVyVXAiLGZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0wLGM9ZC5sZW5ndGg7YjxjOysrYilpZihkW2JdLnBvaW50ZXJJZD09YS5wb2ludGVySWQpe2Quc3BsaWNlKGIsMSk7YnJlYWt9fSl9LGFkZE1zVG91Y2hMaXN0ZW5lck1vdmU6ZnVuY3Rpb24oYSwKYixjKXt2YXIgZD10aGlzLl9tc1RvdWNoZXM7T3BlbkxheWVycy5FdmVudC5vYnNlcnZlKGEsIk1TUG9pbnRlck1vdmUiLGZ1bmN0aW9uKGEpe2lmKGEucG9pbnRlclR5cGUhPWEuTVNQT0lOVEVSX1RZUEVfTU9VU0V8fDAhPWEuYnV0dG9ucylpZigxIT1kLmxlbmd0aHx8ZFswXS5wYWdlWCE9YS5wYWdlWHx8ZFswXS5wYWdlWSE9YS5wYWdlWSl7Zm9yKHZhciBiPTAsZz1kLmxlbmd0aDtiPGc7KytiKWlmKGRbYl0ucG9pbnRlcklkPT1hLnBvaW50ZXJJZCl7ZFtiXT1hO2JyZWFrfWEudG91Y2hlcz1kLnNsaWNlKCk7YyhhKX19KX0sYWRkTXNUb3VjaExpc3RlbmVyRW5kOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD10aGlzLl9tc1RvdWNoZXM7T3BlbkxheWVycy5FdmVudC5vYnNlcnZlKGEsIk1TUG9pbnRlclVwIixmdW5jdGlvbihhKXtmb3IodmFyIGI9MCxnPWQubGVuZ3RoO2I8ZzsrK2IpaWYoZFtiXS5wb2ludGVySWQ9PWEucG9pbnRlcklkKXtkLnNwbGljZShiLDEpO2JyZWFrfWEudG91Y2hlcz0KZC5zbGljZSgpO2MoYSl9KX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5FdmVudHMifSk7T3BlbkxheWVycy5FdmVudHMuYnV0dG9uY2xpY2s9T3BlbkxheWVycy5DbGFzcyh7dGFyZ2V0Om51bGwsZXZlbnRzOiJtb3VzZWRvd24gbW91c2V1cCBjbGljayBkYmxjbGljayB0b3VjaHN0YXJ0IHRvdWNobW92ZSB0b3VjaGVuZCBrZXlkb3duIi5zcGxpdCgiICIpLHN0YXJ0UmVnRXg6L15tb3VzZWRvd258dG91Y2hzdGFydCQvLGNhbmNlbFJlZ0V4Oi9edG91Y2htb3ZlJC8sY29tcGxldGVSZWdFeDovXm1vdXNldXB8dG91Y2hlbmQkLyxpbml0aWFsaXplOmZ1bmN0aW9uKGEpe3RoaXMudGFyZ2V0PWE7Zm9yKGE9dGhpcy5ldmVudHMubGVuZ3RoLTE7MDw9YTstLWEpdGhpcy50YXJnZXQucmVnaXN0ZXIodGhpcy5ldmVudHNbYV0sdGhpcyx0aGlzLmJ1dHRvbkNsaWNrLHtleHRlbnNpb246ITB9KX0sZGVzdHJveTpmdW5jdGlvbigpe2Zvcih2YXIgYT10aGlzLmV2ZW50cy5sZW5ndGgtMTswPD1hOy0tYSl0aGlzLnRhcmdldC51bnJlZ2lzdGVyKHRoaXMuZXZlbnRzW2FdLHRoaXMsdGhpcy5idXR0b25DbGljayk7CmRlbGV0ZSB0aGlzLnRhcmdldH0sZ2V0UHJlc3NlZEJ1dHRvbjpmdW5jdGlvbihhKXt2YXIgYj0zLGM7ZG97aWYoT3BlbkxheWVycy5FbGVtZW50Lmhhc0NsYXNzKGEsIm9sQnV0dG9uIikpe2M9YTticmVha31hPWEucGFyZW50Tm9kZX13aGlsZSgwPC0tYiYmYSk7cmV0dXJuIGN9LGlnbm9yZTpmdW5jdGlvbihhKXt2YXIgYj0zLGM9ITE7ZG97aWYoImEiPT09YS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpKXtjPSEwO2JyZWFrfWE9YS5wYXJlbnROb2RlfXdoaWxlKDA8LS1iJiZhKTtyZXR1cm4gY30sYnV0dG9uQ2xpY2s6ZnVuY3Rpb24oYSl7dmFyIGI9ITAsYz1PcGVuTGF5ZXJzLkV2ZW50LmVsZW1lbnQoYSk7aWYoYyYmKE9wZW5MYXllcnMuRXZlbnQuaXNMZWZ0Q2xpY2soYSl8fCF+YS50eXBlLmluZGV4T2YoIm1vdXNlIikpKWlmKGM9dGhpcy5nZXRQcmVzc2VkQnV0dG9uKGMpKXtpZigia2V5ZG93biI9PT1hLnR5cGUpc3dpdGNoKGEua2V5Q29kZSl7Y2FzZSBPcGVuTGF5ZXJzLkV2ZW50LktFWV9SRVRVUk46Y2FzZSBPcGVuTGF5ZXJzLkV2ZW50LktFWV9TUEFDRTp0aGlzLnRhcmdldC50cmlnZ2VyRXZlbnQoImJ1dHRvbmNsaWNrIiwKe2J1dHRvbkVsZW1lbnQ6Y30pLE9wZW5MYXllcnMuRXZlbnQuc3RvcChhKSxiPSExfWVsc2UgaWYodGhpcy5zdGFydEV2dCl7aWYodGhpcy5jb21wbGV0ZVJlZ0V4LnRlc3QoYS50eXBlKSl7dmFyIGI9T3BlbkxheWVycy5VdGlsLnBhZ2VQb3NpdGlvbihjKSxkPU9wZW5MYXllcnMuVXRpbC5nZXRWaWV3cG9ydEVsZW1lbnQoKSxlPXdpbmRvdy5wYWdlWU9mZnNldHx8ZC5zY3JvbGxUb3A7YlswXS09d2luZG93LnBhZ2VYT2Zmc2V0fHxkLnNjcm9sbExlZnQ7YlsxXS09ZTt0aGlzLnRhcmdldC50cmlnZ2VyRXZlbnQoImJ1dHRvbmNsaWNrIix7YnV0dG9uRWxlbWVudDpjLGJ1dHRvblhZOnt4OnRoaXMuc3RhcnRFdnQuY2xpZW50WC1iWzBdLHk6dGhpcy5zdGFydEV2dC5jbGllbnRZLWJbMV19fSl9dGhpcy5jYW5jZWxSZWdFeC50ZXN0KGEudHlwZSkmJmRlbGV0ZSB0aGlzLnN0YXJ0RXZ0O09wZW5MYXllcnMuRXZlbnQuc3RvcChhKTtiPSExfXRoaXMuc3RhcnRSZWdFeC50ZXN0KGEudHlwZSkmJgoodGhpcy5zdGFydEV2dD1hLE9wZW5MYXllcnMuRXZlbnQuc3RvcChhKSxiPSExKX1lbHNlIGI9IXRoaXMuaWdub3JlKE9wZW5MYXllcnMuRXZlbnQuZWxlbWVudChhKSksZGVsZXRlIHRoaXMuc3RhcnRFdnQ7cmV0dXJuIGJ9fSk7T3BlbkxheWVycy5VdGlsPU9wZW5MYXllcnMuVXRpbHx8e307Ck9wZW5MYXllcnMuVXRpbC52ZW5kb3JQcmVmaXg9ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGEpe3JldHVybiBhP2EucmVwbGFjZSgvKFtBLVpdKS9nLGZ1bmN0aW9uKGEpe3JldHVybiItIithLnRvTG93ZXJDYXNlKCl9KS5yZXBsYWNlKC9ebXMtLywiLW1zLSIpOm51bGx9ZnVuY3Rpb24gYihhLGIpe2lmKHZvaWQgMD09PWdbYl0pe3ZhciBjLGU9MCxmPWQubGVuZ3RoLHA9InVuZGVmaW5lZCIhPT10eXBlb2YgYS5jc3NUZXh0O2ZvcihnW2JdPW51bGw7ZTxmO2UrKylpZigoYz1kW2VdKT8ocHx8KGM9Yy50b0xvd2VyQ2FzZSgpKSxjPWMrYi5jaGFyQXQoMCkudG9VcHBlckNhc2UoKStiLnNsaWNlKDEpKTpjPWIsdm9pZCAwIT09YVtjXSl7Z1tiXT1jO2JyZWFrfX1yZXR1cm4gZ1tiXX1mdW5jdGlvbiBjKGEpe3JldHVybiBiKGUsYSl9dmFyIGQ9WyIiLCJPIiwibXMiLCJNb3oiLCJXZWJraXQiXSxlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpLnN0eWxlLGY9e30sZz17fTtyZXR1cm57Y3NzOmZ1bmN0aW9uKGIpe2lmKHZvaWQgMD09PQpmW2JdKXt2YXIgZD1iLnJlcGxhY2UoLygtW1xzXFNdKS9nLGZ1bmN0aW9uKGEpe3JldHVybiBhLmNoYXJBdCgxKS50b1VwcGVyQ2FzZSgpfSksZD1jKGQpO2ZbYl09YShkKX1yZXR1cm4gZltiXX0sanM6YixzdHlsZTpjLGNzc0NhY2hlOmYsanNDYWNoZTpnfX0oKTtPcGVuTGF5ZXJzLkFuaW1hdGlvbj1mdW5jdGlvbihhKXt2YXIgYj1PcGVuTGF5ZXJzLlV0aWwudmVuZG9yUHJlZml4LmpzKGEsInJlcXVlc3RBbmltYXRpb25GcmFtZSIpLGM9ISFiLGQ9ZnVuY3Rpb24oKXt2YXIgYz1hW2JdfHxmdW5jdGlvbihiLGMpe2Euc2V0VGltZW91dChiLDE2KX07cmV0dXJuIGZ1bmN0aW9uKGIsZCl7Yy5hcHBseShhLFtiLGRdKX19KCksZT0wLGY9e307cmV0dXJue2lzTmF0aXZlOmMscmVxdWVzdEZyYW1lOmQsc3RhcnQ6ZnVuY3Rpb24oYSxiLGMpe2I9MDxiP2I6TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZO3ZhciBsPSsrZSxtPStuZXcgRGF0ZTtmW2xdPWZ1bmN0aW9uKCl7ZltsXSYmK25ldyBEYXRlLW08PWI/KGEoKSxmW2xdJiZkKGZbbF0sYykpOmRlbGV0ZSBmW2xdfTtkKGZbbF0sYyk7cmV0dXJuIGx9LHN0b3A6ZnVuY3Rpb24oYSl7ZGVsZXRlIGZbYV19fX0od2luZG93KTtPcGVuTGF5ZXJzLlR3ZWVuPU9wZW5MYXllcnMuQ2xhc3Moe2Vhc2luZzpudWxsLGJlZ2luOm51bGwsZmluaXNoOm51bGwsZHVyYXRpb246bnVsbCxjYWxsYmFja3M6bnVsbCx0aW1lOm51bGwsbWluRnJhbWVSYXRlOm51bGwsc3RhcnRUaW1lOm51bGwsYW5pbWF0aW9uSWQ6bnVsbCxwbGF5aW5nOiExLGluaXRpYWxpemU6ZnVuY3Rpb24oYSl7dGhpcy5lYXNpbmc9YT9hOk9wZW5MYXllcnMuRWFzaW5nLkV4cG8uZWFzZU91dH0sc3RhcnQ6ZnVuY3Rpb24oYSxiLGMsZCl7dGhpcy5wbGF5aW5nPSEwO3RoaXMuYmVnaW49YTt0aGlzLmZpbmlzaD1iO3RoaXMuZHVyYXRpb249Yzt0aGlzLmNhbGxiYWNrcz1kLmNhbGxiYWNrczt0aGlzLm1pbkZyYW1lUmF0ZT1kLm1pbkZyYW1lUmF0ZXx8MzA7dGhpcy50aW1lPTA7dGhpcy5zdGFydFRpbWU9KG5ldyBEYXRlKS5nZXRUaW1lKCk7T3BlbkxheWVycy5BbmltYXRpb24uc3RvcCh0aGlzLmFuaW1hdGlvbklkKTt0aGlzLmFuaW1hdGlvbklkPW51bGw7CnRoaXMuY2FsbGJhY2tzJiZ0aGlzLmNhbGxiYWNrcy5zdGFydCYmdGhpcy5jYWxsYmFja3Muc3RhcnQuY2FsbCh0aGlzLHRoaXMuYmVnaW4pO3RoaXMuYW5pbWF0aW9uSWQ9T3BlbkxheWVycy5BbmltYXRpb24uc3RhcnQoT3BlbkxheWVycy5GdW5jdGlvbi5iaW5kKHRoaXMucGxheSx0aGlzKSl9LHN0b3A6ZnVuY3Rpb24oKXt0aGlzLnBsYXlpbmcmJih0aGlzLmNhbGxiYWNrcyYmdGhpcy5jYWxsYmFja3MuZG9uZSYmdGhpcy5jYWxsYmFja3MuZG9uZS5jYWxsKHRoaXMsdGhpcy5maW5pc2gpLE9wZW5MYXllcnMuQW5pbWF0aW9uLnN0b3AodGhpcy5hbmltYXRpb25JZCksdGhpcy5hbmltYXRpb25JZD1udWxsLHRoaXMucGxheWluZz0hMSl9LHBsYXk6ZnVuY3Rpb24oKXt2YXIgYT17fSxiO2ZvcihiIGluIHRoaXMuYmVnaW4pe3ZhciBjPXRoaXMuYmVnaW5bYl0sZD10aGlzLmZpbmlzaFtiXTtpZihudWxsPT1jfHxudWxsPT1kfHxpc05hTihjKXx8aXNOYU4oZCkpdGhyb3cgbmV3IFR5cGVFcnJvcigiaW52YWxpZCB2YWx1ZSBmb3IgVHdlZW4iKTsKYVtiXT10aGlzLmVhc2luZy5hcHBseSh0aGlzLFt0aGlzLnRpbWUsYyxkLWMsdGhpcy5kdXJhdGlvbl0pfXRoaXMudGltZSsrO3RoaXMuY2FsbGJhY2tzJiZ0aGlzLmNhbGxiYWNrcy5lYWNoU3RlcCYmKChuZXcgRGF0ZSkuZ2V0VGltZSgpLXRoaXMuc3RhcnRUaW1lKS90aGlzLnRpbWU8PTFFMy90aGlzLm1pbkZyYW1lUmF0ZSYmdGhpcy5jYWxsYmFja3MuZWFjaFN0ZXAuY2FsbCh0aGlzLGEpO3RoaXMudGltZT50aGlzLmR1cmF0aW9uJiZ0aGlzLnN0b3AoKX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Ud2VlbiJ9KTtPcGVuTGF5ZXJzLkVhc2luZz17Q0xBU1NfTkFNRToiT3BlbkxheWVycy5FYXNpbmcifTtPcGVuTGF5ZXJzLkVhc2luZy5MaW5lYXI9e2Vhc2VJbjpmdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gYyphL2QrYn0sZWFzZU91dDpmdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gYyphL2QrYn0sZWFzZUluT3V0OmZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiBjKmEvZCtifSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkVhc2luZy5MaW5lYXIifTsKT3BlbkxheWVycy5FYXNpbmcuRXhwbz17ZWFzZUluOmZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiAwPT1hP2I6YypNYXRoLnBvdygyLDEwKihhL2QtMSkpK2J9LGVhc2VPdXQ6ZnVuY3Rpb24oYSxiLGMsZCl7cmV0dXJuIGE9PWQ/YitjOmMqKC1NYXRoLnBvdygyLC0xMCphL2QpKzEpK2J9LGVhc2VJbk91dDpmdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gMD09YT9iOmE9PWQ/YitjOjE+KGEvPWQvMik/Yy8yKk1hdGgucG93KDIsMTAqKGEtMSkpK2I6Yy8yKigtTWF0aC5wb3coMiwtMTAqLS1hKSsyKStifSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkVhc2luZy5FeHBvIn07Ck9wZW5MYXllcnMuRWFzaW5nLlF1YWQ9e2Vhc2VJbjpmdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gYyooYS89ZCkqYStifSxlYXNlT3V0OmZ1bmN0aW9uKGEsYixjLGQpe3JldHVybi1jKihhLz1kKSooYS0yKStifSxlYXNlSW5PdXQ6ZnVuY3Rpb24oYSxiLGMsZCl7cmV0dXJuIDE+KGEvPWQvMik/Yy8yKmEqYStiOi1jLzIqKC0tYSooYS0yKS0xKStifSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkVhc2luZy5RdWFkIn07T3BlbkxheWVycy5Qcm9qZWN0aW9uPU9wZW5MYXllcnMuQ2xhc3Moe3Byb2o6bnVsbCxwcm9qQ29kZTpudWxsLHRpdGxlUmVnRXg6L1wrdGl0bGU9W15cK10qLyxpbml0aWFsaXplOmZ1bmN0aW9uKGEsYil7T3BlbkxheWVycy5VdGlsLmV4dGVuZCh0aGlzLGIpO3RoaXMucHJvakNvZGU9YTsib2JqZWN0Ij09dHlwZW9mIFByb2o0anMmJih0aGlzLnByb2o9bmV3IFByb2o0anMuUHJvaihhKSl9LGdldENvZGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wcm9qP3RoaXMucHJvai5zcnNDb2RlOnRoaXMucHJvakNvZGV9LGdldFVuaXRzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHJvaj90aGlzLnByb2oudW5pdHM6bnVsbH0sdG9TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRDb2RlKCl9LGVxdWFsczpmdW5jdGlvbihhKXt2YXIgYj0hMTthJiYoYSBpbnN0YW5jZW9mIE9wZW5MYXllcnMuUHJvamVjdGlvbnx8KGE9bmV3IE9wZW5MYXllcnMuUHJvamVjdGlvbihhKSksIm9iamVjdCI9PQp0eXBlb2YgUHJvajRqcyYmdGhpcy5wcm9qLmRlZkRhdGEmJmEucHJvai5kZWZEYXRhP2I9dGhpcy5wcm9qLmRlZkRhdGEucmVwbGFjZSh0aGlzLnRpdGxlUmVnRXgsIiIpPT1hLnByb2ouZGVmRGF0YS5yZXBsYWNlKHRoaXMudGl0bGVSZWdFeCwiIik6YS5nZXRDb2RlJiYoYj10aGlzLmdldENvZGUoKSxhPWEuZ2V0Q29kZSgpLGI9Yj09YXx8ISFPcGVuTGF5ZXJzLlByb2plY3Rpb24udHJhbnNmb3Jtc1tiXSYmT3BlbkxheWVycy5Qcm9qZWN0aW9uLnRyYW5zZm9ybXNbYl1bYV09PT1PcGVuTGF5ZXJzLlByb2plY3Rpb24ubnVsbFRyYW5zZm9ybSkpO3JldHVybiBifSxkZXN0cm95OmZ1bmN0aW9uKCl7ZGVsZXRlIHRoaXMucHJvajtkZWxldGUgdGhpcy5wcm9qQ29kZX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Qcm9qZWN0aW9uIn0pO09wZW5MYXllcnMuUHJvamVjdGlvbi50cmFuc2Zvcm1zPXt9OwpPcGVuTGF5ZXJzLlByb2plY3Rpb24uZGVmYXVsdHM9eyJFUFNHOjQzMjYiOnt1bml0czoiZGVncmVlcyIsbWF4RXh0ZW50OlstMTgwLC05MCwxODAsOTBdLHl4OiEwfSwiQ1JTOjg0Ijp7dW5pdHM6ImRlZ3JlZXMiLG1heEV4dGVudDpbLTE4MCwtOTAsMTgwLDkwXX0sIkVQU0c6OTAwOTEzIjp7dW5pdHM6Im0iLG1heEV4dGVudDpbLTIuMDAzNzUwODM0RTcsLTIuMDAzNzUwODM0RTcsMi4wMDM3NTA4MzRFNywyLjAwMzc1MDgzNEU3XX19OwpPcGVuTGF5ZXJzLlByb2plY3Rpb24uYWRkVHJhbnNmb3JtPWZ1bmN0aW9uKGEsYixjKXtpZihjPT09T3BlbkxheWVycy5Qcm9qZWN0aW9uLm51bGxUcmFuc2Zvcm0pe3ZhciBkPU9wZW5MYXllcnMuUHJvamVjdGlvbi5kZWZhdWx0c1thXTtkJiYhT3BlbkxheWVycy5Qcm9qZWN0aW9uLmRlZmF1bHRzW2JdJiYoT3BlbkxheWVycy5Qcm9qZWN0aW9uLmRlZmF1bHRzW2JdPWQpfU9wZW5MYXllcnMuUHJvamVjdGlvbi50cmFuc2Zvcm1zW2FdfHwoT3BlbkxheWVycy5Qcm9qZWN0aW9uLnRyYW5zZm9ybXNbYV09e30pO09wZW5MYXllcnMuUHJvamVjdGlvbi50cmFuc2Zvcm1zW2FdW2JdPWN9OwpPcGVuTGF5ZXJzLlByb2plY3Rpb24udHJhbnNmb3JtPWZ1bmN0aW9uKGEsYixjKXtpZihiJiZjKWlmKGIgaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLlByb2plY3Rpb258fChiPW5ldyBPcGVuTGF5ZXJzLlByb2plY3Rpb24oYikpLGMgaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLlByb2plY3Rpb258fChjPW5ldyBPcGVuTGF5ZXJzLlByb2plY3Rpb24oYykpLGIucHJvaiYmYy5wcm9qKWE9UHJvajRqcy50cmFuc2Zvcm0oYi5wcm9qLGMucHJvaixhKTtlbHNle2I9Yi5nZXRDb2RlKCk7Yz1jLmdldENvZGUoKTt2YXIgZD1PcGVuTGF5ZXJzLlByb2plY3Rpb24udHJhbnNmb3JtcztpZihkW2JdJiZkW2JdW2NdKWRbYl1bY10oYSl9cmV0dXJuIGF9O09wZW5MYXllcnMuUHJvamVjdGlvbi5udWxsVHJhbnNmb3JtPWZ1bmN0aW9uKGEpe3JldHVybiBhfTsKKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhKXthLng9MTgwKmEueC9kO2EueT0xODAvTWF0aC5QSSooMipNYXRoLmF0YW4oTWF0aC5leHAoYS55L2QqTWF0aC5QSSkpLU1hdGguUEkvMik7cmV0dXJuIGF9ZnVuY3Rpb24gYihhKXthLng9YS54KmQvMTgwO3ZhciBiPU1hdGgubG9nKE1hdGgudGFuKCg5MCthLnkpKk1hdGguUEkvMzYwKSkvTWF0aC5QSSpkO2EueT1NYXRoLm1heCgtMi4wMDM3NTA4MzRFNyxNYXRoLm1pbihiLDIuMDAzNzUwODM0RTcpKTtyZXR1cm4gYX1mdW5jdGlvbiBjKGMsZCl7dmFyIGU9T3BlbkxheWVycy5Qcm9qZWN0aW9uLmFkZFRyYW5zZm9ybSxmPU9wZW5MYXllcnMuUHJvamVjdGlvbi5udWxsVHJhbnNmb3JtLGcscCxxLHIscztnPTA7Zm9yKHA9ZC5sZW5ndGg7ZzxwOysrZylmb3IocT1kW2ddLGUoYyxxLGIpLGUocSxjLGEpLHM9ZysxO3M8cDsrK3Mpcj1kW3NdLGUocSxyLGYpLGUocixxLGYpfXZhciBkPTIuMDAzNzUwODM0RTcsZT1bIkVQU0c6OTAwOTEzIiwiRVBTRzozODU3IiwKIkVQU0c6MTAyMTEzIiwiRVBTRzoxMDIxMDAiXSxmPVsiQ1JTOjg0IiwidXJuOm9nYzpkZWY6Y3JzOkVQU0c6Ni42OjQzMjYiLCJFUFNHOjQzMjYiXSxnO2ZvcihnPWUubGVuZ3RoLTE7MDw9ZzstLWcpYyhlW2ddLGYpO2ZvcihnPWYubGVuZ3RoLTE7MDw9ZzstLWcpYyhmW2ddLGUpfSkoKTtPcGVuTGF5ZXJzLk1hcD1PcGVuTGF5ZXJzLkNsYXNzKHtaX0lOREVYX0JBU0U6e0Jhc2VMYXllcjoxMDAsT3ZlcmxheTozMjUsRmVhdHVyZTo3MjUsUG9wdXA6NzUwLENvbnRyb2w6MUUzfSxpZDpudWxsLGZyYWN0aW9uYWxab29tOiExLGV2ZW50czpudWxsLGFsbE92ZXJsYXlzOiExLGRpdjpudWxsLGRyYWdnaW5nOiExLHNpemU6bnVsbCx2aWV3UG9ydERpdjpudWxsLGxheWVyQ29udGFpbmVyT3JpZ2luOm51bGwsbGF5ZXJDb250YWluZXJEaXY6bnVsbCxsYXllcnM6bnVsbCxjb250cm9sczpudWxsLHBvcHVwczpudWxsLGJhc2VMYXllcjpudWxsLGNlbnRlcjpudWxsLHJlc29sdXRpb246bnVsbCx6b29tOjAscGFuUmF0aW86MS41LG9wdGlvbnM6bnVsbCx0aWxlU2l6ZTpudWxsLHByb2plY3Rpb246IkVQU0c6NDMyNiIsdW5pdHM6bnVsbCxyZXNvbHV0aW9uczpudWxsLG1heFJlc29sdXRpb246bnVsbCxtaW5SZXNvbHV0aW9uOm51bGwsbWF4U2NhbGU6bnVsbCxtaW5TY2FsZTpudWxsLAptYXhFeHRlbnQ6bnVsbCxtaW5FeHRlbnQ6bnVsbCxyZXN0cmljdGVkRXh0ZW50Om51bGwsbnVtWm9vbUxldmVsczoxNix0aGVtZTpudWxsLGRpc3BsYXlQcm9qZWN0aW9uOm51bGwsZmFsbFRocm91Z2g6ITEsYXV0b1VwZGF0ZVNpemU6ITAsZXZlbnRMaXN0ZW5lcnM6bnVsbCxwYW5Ud2VlbjpudWxsLHBhbk1ldGhvZDpPcGVuTGF5ZXJzLkVhc2luZy5FeHBvLmVhc2VPdXQscGFuRHVyYXRpb246NTAsem9vbVR3ZWVuOm51bGwsem9vbU1ldGhvZDpPcGVuTGF5ZXJzLkVhc2luZy5RdWFkLmVhc2VPdXQsem9vbUR1cmF0aW9uOjIwLHBhZGRpbmdGb3JQb3B1cHM6bnVsbCxsYXllckNvbnRhaW5lck9yaWdpblB4Om51bGwsbWluUHg6bnVsbCxtYXhQeDpudWxsLGluaXRpYWxpemU6ZnVuY3Rpb24oYSxiKXsxPT09YXJndW1lbnRzLmxlbmd0aCYmIm9iamVjdCI9PT10eXBlb2YgYSYmKGE9KGI9YSkmJmIuZGl2KTt0aGlzLnRpbGVTaXplPW5ldyBPcGVuTGF5ZXJzLlNpemUoT3BlbkxheWVycy5NYXAuVElMRV9XSURUSCwKT3BlbkxheWVycy5NYXAuVElMRV9IRUlHSFQpO3RoaXMucGFkZGluZ0ZvclBvcHVwcz1uZXcgT3BlbkxheWVycy5Cb3VuZHMoMTUsMTUsMTUsMTUpO3RoaXMudGhlbWU9T3BlbkxheWVycy5fZ2V0U2NyaXB0TG9jYXRpb24oKSsidGhlbWUvZGVmYXVsdC9zdHlsZS5jc3MiO3RoaXMub3B0aW9ucz1PcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHt9LGIpO09wZW5MYXllcnMuVXRpbC5leHRlbmQodGhpcyxiKTtPcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyh0aGlzLE9wZW5MYXllcnMuUHJvamVjdGlvbi5kZWZhdWx0c1t0aGlzLnByb2plY3Rpb24gaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLlByb2plY3Rpb24/dGhpcy5wcm9qZWN0aW9uLnByb2pDb2RlOnRoaXMucHJvamVjdGlvbl0pOyF0aGlzLm1heEV4dGVudHx8dGhpcy5tYXhFeHRlbnQgaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLkJvdW5kc3x8KHRoaXMubWF4RXh0ZW50PW5ldyBPcGVuTGF5ZXJzLkJvdW5kcyh0aGlzLm1heEV4dGVudCkpOwohdGhpcy5taW5FeHRlbnR8fHRoaXMubWluRXh0ZW50IGluc3RhbmNlb2YgT3BlbkxheWVycy5Cb3VuZHN8fCh0aGlzLm1pbkV4dGVudD1uZXcgT3BlbkxheWVycy5Cb3VuZHModGhpcy5taW5FeHRlbnQpKTshdGhpcy5yZXN0cmljdGVkRXh0ZW50fHx0aGlzLnJlc3RyaWN0ZWRFeHRlbnQgaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLkJvdW5kc3x8KHRoaXMucmVzdHJpY3RlZEV4dGVudD1uZXcgT3BlbkxheWVycy5Cb3VuZHModGhpcy5yZXN0cmljdGVkRXh0ZW50KSk7IXRoaXMuY2VudGVyfHx0aGlzLmNlbnRlciBpbnN0YW5jZW9mIE9wZW5MYXllcnMuTG9uTGF0fHwodGhpcy5jZW50ZXI9bmV3IE9wZW5MYXllcnMuTG9uTGF0KHRoaXMuY2VudGVyKSk7dGhpcy5sYXllcnM9W107dGhpcy5pZD1PcGVuTGF5ZXJzLlV0aWwuY3JlYXRlVW5pcXVlSUQoIk9wZW5MYXllcnMuTWFwXyIpO3RoaXMuZGl2PU9wZW5MYXllcnMuVXRpbC5nZXRFbGVtZW50KGEpO3RoaXMuZGl2fHwodGhpcy5kaXY9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2IiksCnRoaXMuZGl2LnN0eWxlLmhlaWdodD0iMXB4Iix0aGlzLmRpdi5zdHlsZS53aWR0aD0iMXB4Iik7T3BlbkxheWVycy5FbGVtZW50LmFkZENsYXNzKHRoaXMuZGl2LCJvbE1hcCIpO3ZhciBjPXRoaXMuaWQrIl9PcGVuTGF5ZXJzX1ZpZXdQb3J0Ijt0aGlzLnZpZXdQb3J0RGl2PU9wZW5MYXllcnMuVXRpbC5jcmVhdGVEaXYoYyxudWxsLG51bGwsbnVsbCwicmVsYXRpdmUiLG51bGwsImhpZGRlbiIpO3RoaXMudmlld1BvcnREaXYuc3R5bGUud2lkdGg9IjEwMCUiO3RoaXMudmlld1BvcnREaXYuc3R5bGUuaGVpZ2h0PSIxMDAlIjt0aGlzLnZpZXdQb3J0RGl2LmNsYXNzTmFtZT0ib2xNYXBWaWV3cG9ydCI7dGhpcy5kaXYuYXBwZW5kQ2hpbGQodGhpcy52aWV3UG9ydERpdik7dGhpcy5ldmVudHM9bmV3IE9wZW5MYXllcnMuRXZlbnRzKHRoaXMsdGhpcy52aWV3UG9ydERpdixudWxsLHRoaXMuZmFsbFRocm91Z2gse2luY2x1ZGVYWTohMH0pO09wZW5MYXllcnMuVGlsZU1hbmFnZXImJm51bGwhPT0KdGhpcy50aWxlTWFuYWdlciYmKHRoaXMudGlsZU1hbmFnZXIgaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLlRpbGVNYW5hZ2VyfHwodGhpcy50aWxlTWFuYWdlcj1uZXcgT3BlbkxheWVycy5UaWxlTWFuYWdlcih0aGlzLnRpbGVNYW5hZ2VyKSksdGhpcy50aWxlTWFuYWdlci5hZGRNYXAodGhpcykpO2M9dGhpcy5pZCsiX09wZW5MYXllcnNfQ29udGFpbmVyIjt0aGlzLmxheWVyQ29udGFpbmVyRGl2PU9wZW5MYXllcnMuVXRpbC5jcmVhdGVEaXYoYyk7dGhpcy5sYXllckNvbnRhaW5lckRpdi5zdHlsZS56SW5kZXg9dGhpcy5aX0lOREVYX0JBU0UuUG9wdXAtMTt0aGlzLmxheWVyQ29udGFpbmVyT3JpZ2luUHg9e3g6MCx5OjB9O3RoaXMuYXBwbHlUcmFuc2Zvcm0oKTt0aGlzLnZpZXdQb3J0RGl2LmFwcGVuZENoaWxkKHRoaXMubGF5ZXJDb250YWluZXJEaXYpO3RoaXMudXBkYXRlU2l6ZSgpO2lmKHRoaXMuZXZlbnRMaXN0ZW5lcnMgaW5zdGFuY2VvZiBPYmplY3QpdGhpcy5ldmVudHMub24odGhpcy5ldmVudExpc3RlbmVycyk7CiEwPT09dGhpcy5hdXRvVXBkYXRlU2l6ZSYmKHRoaXMudXBkYXRlU2l6ZURlc3Ryb3k9T3BlbkxheWVycy5GdW5jdGlvbi5iaW5kKHRoaXMudXBkYXRlU2l6ZSx0aGlzKSxPcGVuTGF5ZXJzLkV2ZW50Lm9ic2VydmUod2luZG93LCJyZXNpemUiLHRoaXMudXBkYXRlU2l6ZURlc3Ryb3kpKTtpZih0aGlzLnRoZW1lKXtmb3IodmFyIGM9ITAsZD1kb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgibGluayIpLGU9MCxmPWQubGVuZ3RoO2U8ZjsrK2UpaWYoT3BlbkxheWVycy5VdGlsLmlzRXF1aXZhbGVudFVybChkLml0ZW0oZSkuaHJlZix0aGlzLnRoZW1lKSl7Yz0hMTticmVha31jJiYoYz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJsaW5rIiksYy5zZXRBdHRyaWJ1dGUoInJlbCIsInN0eWxlc2hlZXQiKSxjLnNldEF0dHJpYnV0ZSgidHlwZSIsInRleHQvY3NzIiksYy5zZXRBdHRyaWJ1dGUoImhyZWYiLHRoaXMudGhlbWUpLGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJoZWFkIilbMF0uYXBwZW5kQ2hpbGQoYykpfW51bGw9PQp0aGlzLmNvbnRyb2xzJiYodGhpcy5jb250cm9scz1bXSxudWxsIT1PcGVuTGF5ZXJzLkNvbnRyb2wmJihPcGVuTGF5ZXJzLkNvbnRyb2wuTmF2aWdhdGlvbj90aGlzLmNvbnRyb2xzLnB1c2gobmV3IE9wZW5MYXllcnMuQ29udHJvbC5OYXZpZ2F0aW9uKTpPcGVuTGF5ZXJzLkNvbnRyb2wuVG91Y2hOYXZpZ2F0aW9uJiZ0aGlzLmNvbnRyb2xzLnB1c2gobmV3IE9wZW5MYXllcnMuQ29udHJvbC5Ub3VjaE5hdmlnYXRpb24pLE9wZW5MYXllcnMuQ29udHJvbC5ab29tP3RoaXMuY29udHJvbHMucHVzaChuZXcgT3BlbkxheWVycy5Db250cm9sLlpvb20pOk9wZW5MYXllcnMuQ29udHJvbC5QYW5ab29tJiZ0aGlzLmNvbnRyb2xzLnB1c2gobmV3IE9wZW5MYXllcnMuQ29udHJvbC5QYW5ab29tKSxPcGVuTGF5ZXJzLkNvbnRyb2wuQXJnUGFyc2VyJiZ0aGlzLmNvbnRyb2xzLnB1c2gobmV3IE9wZW5MYXllcnMuQ29udHJvbC5BcmdQYXJzZXIpLE9wZW5MYXllcnMuQ29udHJvbC5BdHRyaWJ1dGlvbiYmCnRoaXMuY29udHJvbHMucHVzaChuZXcgT3BlbkxheWVycy5Db250cm9sLkF0dHJpYnV0aW9uKSkpO2U9MDtmb3IoZj10aGlzLmNvbnRyb2xzLmxlbmd0aDtlPGY7ZSsrKXRoaXMuYWRkQ29udHJvbFRvTWFwKHRoaXMuY29udHJvbHNbZV0pO3RoaXMucG9wdXBzPVtdO3RoaXMudW5sb2FkRGVzdHJveT1PcGVuTGF5ZXJzLkZ1bmN0aW9uLmJpbmQodGhpcy5kZXN0cm95LHRoaXMpO09wZW5MYXllcnMuRXZlbnQub2JzZXJ2ZSh3aW5kb3csInVubG9hZCIsdGhpcy51bmxvYWREZXN0cm95KTtiJiZiLmxheWVycyYmKGRlbGV0ZSB0aGlzLmNlbnRlcixkZWxldGUgdGhpcy56b29tLHRoaXMuYWRkTGF5ZXJzKGIubGF5ZXJzKSxiLmNlbnRlciYmIXRoaXMuZ2V0Q2VudGVyKCkmJnRoaXMuc2V0Q2VudGVyKGIuY2VudGVyLGIuem9vbSkpO3RoaXMucGFuTWV0aG9kJiYodGhpcy5wYW5Ud2Vlbj1uZXcgT3BlbkxheWVycy5Ud2Vlbih0aGlzLnBhbk1ldGhvZCkpO3RoaXMuem9vbU1ldGhvZCYmdGhpcy5hcHBseVRyYW5zZm9ybS50cmFuc2Zvcm0mJgoodGhpcy56b29tVHdlZW49bmV3IE9wZW5MYXllcnMuVHdlZW4odGhpcy56b29tTWV0aG9kKSl9LGdldFZpZXdwb3J0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudmlld1BvcnREaXZ9LHJlbmRlcjpmdW5jdGlvbihhKXt0aGlzLmRpdj1PcGVuTGF5ZXJzLlV0aWwuZ2V0RWxlbWVudChhKTtPcGVuTGF5ZXJzLkVsZW1lbnQuYWRkQ2xhc3ModGhpcy5kaXYsIm9sTWFwIik7dGhpcy52aWV3UG9ydERpdi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMudmlld1BvcnREaXYpO3RoaXMuZGl2LmFwcGVuZENoaWxkKHRoaXMudmlld1BvcnREaXYpO3RoaXMudXBkYXRlU2l6ZSgpfSx1bmxvYWREZXN0cm95Om51bGwsdXBkYXRlU2l6ZURlc3Ryb3k6bnVsbCxkZXN0cm95OmZ1bmN0aW9uKCl7aWYoIXRoaXMudW5sb2FkRGVzdHJveSlyZXR1cm4hMTt0aGlzLnBhblR3ZWVuJiYodGhpcy5wYW5Ud2Vlbi5zdG9wKCksdGhpcy5wYW5Ud2Vlbj1udWxsKTt0aGlzLnpvb21Ud2VlbiYmKHRoaXMuem9vbVR3ZWVuLnN0b3AoKSwKdGhpcy56b29tVHdlZW49bnVsbCk7T3BlbkxheWVycy5FdmVudC5zdG9wT2JzZXJ2aW5nKHdpbmRvdywidW5sb2FkIix0aGlzLnVubG9hZERlc3Ryb3kpO3RoaXMudW5sb2FkRGVzdHJveT1udWxsO3RoaXMudXBkYXRlU2l6ZURlc3Ryb3kmJk9wZW5MYXllcnMuRXZlbnQuc3RvcE9ic2VydmluZyh3aW5kb3csInJlc2l6ZSIsdGhpcy51cGRhdGVTaXplRGVzdHJveSk7dGhpcy5wYWRkaW5nRm9yUG9wdXBzPW51bGw7aWYobnVsbCE9dGhpcy5jb250cm9scyl7Zm9yKHZhciBhPXRoaXMuY29udHJvbHMubGVuZ3RoLTE7MDw9YTstLWEpdGhpcy5jb250cm9sc1thXS5kZXN0cm95KCk7dGhpcy5jb250cm9scz1udWxsfWlmKG51bGwhPXRoaXMubGF5ZXJzKXtmb3IoYT10aGlzLmxheWVycy5sZW5ndGgtMTswPD1hOy0tYSl0aGlzLmxheWVyc1thXS5kZXN0cm95KCExKTt0aGlzLmxheWVycz1udWxsfXRoaXMudmlld1BvcnREaXYmJnRoaXMudmlld1BvcnREaXYucGFyZW50Tm9kZSYmdGhpcy52aWV3UG9ydERpdi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMudmlld1BvcnREaXYpOwp0aGlzLnZpZXdQb3J0RGl2PW51bGw7dGhpcy50aWxlTWFuYWdlciYmKHRoaXMudGlsZU1hbmFnZXIucmVtb3ZlTWFwKHRoaXMpLHRoaXMudGlsZU1hbmFnZXI9bnVsbCk7dGhpcy5ldmVudExpc3RlbmVycyYmKHRoaXMuZXZlbnRzLnVuKHRoaXMuZXZlbnRMaXN0ZW5lcnMpLHRoaXMuZXZlbnRMaXN0ZW5lcnM9bnVsbCk7dGhpcy5ldmVudHMuZGVzdHJveSgpO3RoaXMub3B0aW9ucz10aGlzLmV2ZW50cz1udWxsfSxzZXRPcHRpb25zOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMubWluUHgmJmEucmVzdHJpY3RlZEV4dGVudCE9dGhpcy5yZXN0cmljdGVkRXh0ZW50O09wZW5MYXllcnMuVXRpbC5leHRlbmQodGhpcyxhKTtiJiZ0aGlzLm1vdmVUbyh0aGlzLmdldENhY2hlZENlbnRlcigpLHRoaXMuem9vbSx7Zm9yY2Vab29tQ2hhbmdlOiEwfSl9LGdldFRpbGVTaXplOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGlsZVNpemV9LGdldEJ5OmZ1bmN0aW9uKGEsYixjKXt2YXIgZD0iZnVuY3Rpb24iPT0KdHlwZW9mIGMudGVzdDtyZXR1cm4gT3BlbkxheWVycy5BcnJheS5maWx0ZXIodGhpc1thXSxmdW5jdGlvbihhKXtyZXR1cm4gYVtiXT09Y3x8ZCYmYy50ZXN0KGFbYl0pfSl9LGdldExheWVyc0J5OmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuZ2V0QnkoImxheWVycyIsYSxiKX0sZ2V0TGF5ZXJzQnlOYW1lOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmdldExheWVyc0J5KCJuYW1lIixhKX0sZ2V0TGF5ZXJzQnlDbGFzczpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5nZXRMYXllcnNCeSgiQ0xBU1NfTkFNRSIsYSl9LGdldENvbnRyb2xzQnk6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5nZXRCeSgiY29udHJvbHMiLGEsYil9LGdldENvbnRyb2xzQnlDbGFzczpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5nZXRDb250cm9sc0J5KCJDTEFTU19OQU1FIixhKX0sZ2V0TGF5ZXI6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPW51bGwsYz0wLGQ9dGhpcy5sYXllcnMubGVuZ3RoO2M8ZDtjKyspe3ZhciBlPQp0aGlzLmxheWVyc1tjXTtpZihlLmlkPT1hKXtiPWU7YnJlYWt9fXJldHVybiBifSxzZXRMYXllclpJbmRleDpmdW5jdGlvbihhLGIpe2Euc2V0WkluZGV4KHRoaXMuWl9JTkRFWF9CQVNFW2EuaXNCYXNlTGF5ZXI/IkJhc2VMYXllciI6Ik92ZXJsYXkiXSs1KmIpfSxyZXNldExheWVyc1pJbmRleDpmdW5jdGlvbigpe2Zvcih2YXIgYT0wLGI9dGhpcy5sYXllcnMubGVuZ3RoO2E8YjthKyspdGhpcy5zZXRMYXllclpJbmRleCh0aGlzLmxheWVyc1thXSxhKX0sYWRkTGF5ZXI6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPTAsYz10aGlzLmxheWVycy5sZW5ndGg7YjxjO2IrKylpZih0aGlzLmxheWVyc1tiXT09YSlyZXR1cm4hMTtpZighMT09PXRoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgicHJlYWRkbGF5ZXIiLHtsYXllcjphfSkpcmV0dXJuITE7dGhpcy5hbGxPdmVybGF5cyYmKGEuaXNCYXNlTGF5ZXI9ITEpO2EuZGl2LmNsYXNzTmFtZT0ib2xMYXllckRpdiI7YS5kaXYuc3R5bGUub3ZlcmZsb3c9CiIiO3RoaXMuc2V0TGF5ZXJaSW5kZXgoYSx0aGlzLmxheWVycy5sZW5ndGgpO2EuaXNGaXhlZD90aGlzLnZpZXdQb3J0RGl2LmFwcGVuZENoaWxkKGEuZGl2KTp0aGlzLmxheWVyQ29udGFpbmVyRGl2LmFwcGVuZENoaWxkKGEuZGl2KTt0aGlzLmxheWVycy5wdXNoKGEpO2Euc2V0TWFwKHRoaXMpO2EuaXNCYXNlTGF5ZXJ8fHRoaXMuYWxsT3ZlcmxheXMmJiF0aGlzLmJhc2VMYXllcj9udWxsPT10aGlzLmJhc2VMYXllcj90aGlzLnNldEJhc2VMYXllcihhKTphLnNldFZpc2liaWxpdHkoITEpOmEucmVkcmF3KCk7dGhpcy5ldmVudHMudHJpZ2dlckV2ZW50KCJhZGRsYXllciIse2xheWVyOmF9KTthLmV2ZW50cy50cmlnZ2VyRXZlbnQoImFkZGVkIix7bWFwOnRoaXMsbGF5ZXI6YX0pO2EuYWZ0ZXJBZGQoKTtyZXR1cm4hMH0sYWRkTGF5ZXJzOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0wLGM9YS5sZW5ndGg7YjxjO2IrKyl0aGlzLmFkZExheWVyKGFbYl0pfSxyZW1vdmVMYXllcjpmdW5jdGlvbihhLApiKXtpZighMSE9PXRoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgicHJlcmVtb3ZlbGF5ZXIiLHtsYXllcjphfSkpe251bGw9PWImJihiPSEwKTthLmlzRml4ZWQ/dGhpcy52aWV3UG9ydERpdi5yZW1vdmVDaGlsZChhLmRpdik6dGhpcy5sYXllckNvbnRhaW5lckRpdi5yZW1vdmVDaGlsZChhLmRpdik7T3BlbkxheWVycy5VdGlsLnJlbW92ZUl0ZW0odGhpcy5sYXllcnMsYSk7YS5yZW1vdmVNYXAodGhpcyk7YS5tYXA9bnVsbDtpZih0aGlzLmJhc2VMYXllcj09YSYmKHRoaXMuYmFzZUxheWVyPW51bGwsYikpZm9yKHZhciBjPTAsZD10aGlzLmxheWVycy5sZW5ndGg7YzxkO2MrKyl7dmFyIGU9dGhpcy5sYXllcnNbY107aWYoZS5pc0Jhc2VMYXllcnx8dGhpcy5hbGxPdmVybGF5cyl7dGhpcy5zZXRCYXNlTGF5ZXIoZSk7YnJlYWt9fXRoaXMucmVzZXRMYXllcnNaSW5kZXgoKTt0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoInJlbW92ZWxheWVyIix7bGF5ZXI6YX0pO2EuZXZlbnRzLnRyaWdnZXJFdmVudCgicmVtb3ZlZCIsCnttYXA6dGhpcyxsYXllcjphfSl9fSxnZXROdW1MYXllcnM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sYXllcnMubGVuZ3RofSxnZXRMYXllckluZGV4OmZ1bmN0aW9uKGEpe3JldHVybiBPcGVuTGF5ZXJzLlV0aWwuaW5kZXhPZih0aGlzLmxheWVycyxhKX0sc2V0TGF5ZXJJbmRleDpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuZ2V0TGF5ZXJJbmRleChhKTswPmI/Yj0wOmI+dGhpcy5sYXllcnMubGVuZ3RoJiYoYj10aGlzLmxheWVycy5sZW5ndGgpO2lmKGMhPWIpe3RoaXMubGF5ZXJzLnNwbGljZShjLDEpO3RoaXMubGF5ZXJzLnNwbGljZShiLDAsYSk7Zm9yKHZhciBjPTAsZD10aGlzLmxheWVycy5sZW5ndGg7YzxkO2MrKyl0aGlzLnNldExheWVyWkluZGV4KHRoaXMubGF5ZXJzW2NdLGMpO3RoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgiY2hhbmdlbGF5ZXIiLHtsYXllcjphLHByb3BlcnR5OiJvcmRlciJ9KTt0aGlzLmFsbE92ZXJsYXlzJiYoMD09PWI/dGhpcy5zZXRCYXNlTGF5ZXIoYSk6CnRoaXMuYmFzZUxheWVyIT09dGhpcy5sYXllcnNbMF0mJnRoaXMuc2V0QmFzZUxheWVyKHRoaXMubGF5ZXJzWzBdKSl9fSxyYWlzZUxheWVyOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5nZXRMYXllckluZGV4KGEpK2I7dGhpcy5zZXRMYXllckluZGV4KGEsYyl9LHNldEJhc2VMYXllcjpmdW5jdGlvbihhKXtpZihhIT10aGlzLmJhc2VMYXllciYmLTEhPU9wZW5MYXllcnMuVXRpbC5pbmRleE9mKHRoaXMubGF5ZXJzLGEpKXt2YXIgYj10aGlzLmdldENhY2hlZENlbnRlcigpLGM9T3BlbkxheWVycy5VdGlsLmdldFJlc29sdXRpb25Gcm9tU2NhbGUodGhpcy5nZXRTY2FsZSgpLGEudW5pdHMpO251bGw9PXRoaXMuYmFzZUxheWVyfHx0aGlzLmFsbE92ZXJsYXlzfHx0aGlzLmJhc2VMYXllci5zZXRWaXNpYmlsaXR5KCExKTt0aGlzLmJhc2VMYXllcj1hO2lmKCF0aGlzLmFsbE92ZXJsYXlzfHx0aGlzLmJhc2VMYXllci52aXNpYmlsaXR5KXRoaXMuYmFzZUxheWVyLnNldFZpc2liaWxpdHkoITApLAohMT09PXRoaXMuYmFzZUxheWVyLmluUmFuZ2UmJnRoaXMuYmFzZUxheWVyLnJlZHJhdygpO251bGwhPWImJihhPXRoaXMuZ2V0Wm9vbUZvclJlc29sdXRpb24oY3x8dGhpcy5yZXNvbHV0aW9uLCEwKSx0aGlzLnNldENlbnRlcihiLGEsITEsITApKTt0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoImNoYW5nZWJhc2VsYXllciIse2xheWVyOnRoaXMuYmFzZUxheWVyfSl9fSxhZGRDb250cm9sOmZ1bmN0aW9uKGEsYil7dGhpcy5jb250cm9scy5wdXNoKGEpO3RoaXMuYWRkQ29udHJvbFRvTWFwKGEsYil9LGFkZENvbnRyb2xzOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTE9PT1hcmd1bWVudHMubGVuZ3RoP1tdOmIsZD0wLGU9YS5sZW5ndGg7ZDxlO2QrKyl0aGlzLmFkZENvbnRyb2woYVtkXSxjW2RdP2NbZF06bnVsbCl9LGFkZENvbnRyb2xUb01hcDpmdW5jdGlvbihhLGIpe2Eub3V0c2lkZVZpZXdwb3J0PW51bGwhPWEuZGl2O3RoaXMuZGlzcGxheVByb2plY3Rpb24mJiFhLmRpc3BsYXlQcm9qZWN0aW9uJiYKKGEuZGlzcGxheVByb2plY3Rpb249dGhpcy5kaXNwbGF5UHJvamVjdGlvbik7YS5zZXRNYXAodGhpcyk7dmFyIGM9YS5kcmF3KGIpO2MmJiFhLm91dHNpZGVWaWV3cG9ydCYmKGMuc3R5bGUuekluZGV4PXRoaXMuWl9JTkRFWF9CQVNFLkNvbnRyb2wrdGhpcy5jb250cm9scy5sZW5ndGgsdGhpcy52aWV3UG9ydERpdi5hcHBlbmRDaGlsZChjKSk7YS5hdXRvQWN0aXZhdGUmJmEuYWN0aXZhdGUoKX0sZ2V0Q29udHJvbDpmdW5jdGlvbihhKXtmb3IodmFyIGI9bnVsbCxjPTAsZD10aGlzLmNvbnRyb2xzLmxlbmd0aDtjPGQ7YysrKXt2YXIgZT10aGlzLmNvbnRyb2xzW2NdO2lmKGUuaWQ9PWEpe2I9ZTticmVha319cmV0dXJuIGJ9LHJlbW92ZUNvbnRyb2w6ZnVuY3Rpb24oYSl7YSYmYT09dGhpcy5nZXRDb250cm9sKGEuaWQpJiYoYS5kaXYmJmEuZGl2LnBhcmVudE5vZGU9PXRoaXMudmlld1BvcnREaXYmJnRoaXMudmlld1BvcnREaXYucmVtb3ZlQ2hpbGQoYS5kaXYpLE9wZW5MYXllcnMuVXRpbC5yZW1vdmVJdGVtKHRoaXMuY29udHJvbHMsCmEpKX0sYWRkUG9wdXA6ZnVuY3Rpb24oYSxiKXtpZihiKWZvcih2YXIgYz10aGlzLnBvcHVwcy5sZW5ndGgtMTswPD1jOy0tYyl0aGlzLnJlbW92ZVBvcHVwKHRoaXMucG9wdXBzW2NdKTthLm1hcD10aGlzO3RoaXMucG9wdXBzLnB1c2goYSk7aWYoYz1hLmRyYXcoKSljLnN0eWxlLnpJbmRleD10aGlzLlpfSU5ERVhfQkFTRS5Qb3B1cCt0aGlzLnBvcHVwcy5sZW5ndGgsdGhpcy5sYXllckNvbnRhaW5lckRpdi5hcHBlbmRDaGlsZChjKX0scmVtb3ZlUG9wdXA6ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5VdGlsLnJlbW92ZUl0ZW0odGhpcy5wb3B1cHMsYSk7aWYoYS5kaXYpdHJ5e3RoaXMubGF5ZXJDb250YWluZXJEaXYucmVtb3ZlQ2hpbGQoYS5kaXYpfWNhdGNoKGIpe31hLm1hcD1udWxsfSxnZXRTaXplOmZ1bmN0aW9uKCl7dmFyIGE9bnVsbDtudWxsIT10aGlzLnNpemUmJihhPXRoaXMuc2l6ZS5jbG9uZSgpKTtyZXR1cm4gYX0sdXBkYXRlU2l6ZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZ2V0Q3VycmVudFNpemUoKTsKaWYoYSYmIWlzTmFOKGEuaCkmJiFpc05hTihhLncpKXt0aGlzLmV2ZW50cy5jbGVhck1vdXNlQ2FjaGUoKTt2YXIgYj10aGlzLmdldFNpemUoKTtudWxsPT1iJiYodGhpcy5zaXplPWI9YSk7aWYoIWEuZXF1YWxzKGIpKXt0aGlzLnNpemU9YTthPTA7Zm9yKGI9dGhpcy5sYXllcnMubGVuZ3RoO2E8YjthKyspdGhpcy5sYXllcnNbYV0ub25NYXBSZXNpemUoKTthPXRoaXMuZ2V0Q2FjaGVkQ2VudGVyKCk7bnVsbCE9dGhpcy5iYXNlTGF5ZXImJm51bGwhPWEmJihiPXRoaXMuZ2V0Wm9vbSgpLHRoaXMuem9vbT1udWxsLHRoaXMuc2V0Q2VudGVyKGEsYikpfX10aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoInVwZGF0ZXNpemUiKX0sZ2V0Q3VycmVudFNpemU6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgT3BlbkxheWVycy5TaXplKHRoaXMuZGl2LmNsaWVudFdpZHRoLHRoaXMuZGl2LmNsaWVudEhlaWdodCk7aWYoMD09YS53JiYwPT1hLmh8fGlzTmFOKGEudykmJmlzTmFOKGEuaCkpYS53PXRoaXMuZGl2Lm9mZnNldFdpZHRoLAphLmg9dGhpcy5kaXYub2Zmc2V0SGVpZ2h0O2lmKDA9PWEudyYmMD09YS5ofHxpc05hTihhLncpJiZpc05hTihhLmgpKWEudz1wYXJzZUludCh0aGlzLmRpdi5zdHlsZS53aWR0aCksYS5oPXBhcnNlSW50KHRoaXMuZGl2LnN0eWxlLmhlaWdodCk7cmV0dXJuIGF9LGNhbGN1bGF0ZUJvdW5kczpmdW5jdGlvbihhLGIpe3ZhciBjPW51bGw7bnVsbD09YSYmKGE9dGhpcy5nZXRDYWNoZWRDZW50ZXIoKSk7bnVsbD09YiYmKGI9dGhpcy5nZXRSZXNvbHV0aW9uKCkpO2lmKG51bGwhPWEmJm51bGwhPWIpdmFyIGM9dGhpcy5zaXplLncqYi8yLGQ9dGhpcy5zaXplLmgqYi8yLGM9bmV3IE9wZW5MYXllcnMuQm91bmRzKGEubG9uLWMsYS5sYXQtZCxhLmxvbitjLGEubGF0K2QpO3JldHVybiBjfSxnZXRDZW50ZXI6ZnVuY3Rpb24oKXt2YXIgYT1udWxsLGI9dGhpcy5nZXRDYWNoZWRDZW50ZXIoKTtiJiYoYT1iLmNsb25lKCkpO3JldHVybiBhfSxnZXRDYWNoZWRDZW50ZXI6ZnVuY3Rpb24oKXshdGhpcy5jZW50ZXImJgp0aGlzLnNpemUmJih0aGlzLmNlbnRlcj10aGlzLmdldExvbkxhdEZyb21WaWV3UG9ydFB4KHt4OnRoaXMuc2l6ZS53LzIseTp0aGlzLnNpemUuaC8yfSkpO3JldHVybiB0aGlzLmNlbnRlcn0sZ2V0Wm9vbTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnpvb219LHBhbjpmdW5jdGlvbihhLGIsYyl7Yz1PcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyhjLHthbmltYXRlOiEwLGRyYWdnaW5nOiExfSk7aWYoYy5kcmFnZ2luZykwPT1hJiYwPT1ifHx0aGlzLm1vdmVCeVB4KGEsYik7ZWxzZXt2YXIgZD10aGlzLmdldFZpZXdQb3J0UHhGcm9tTG9uTGF0KHRoaXMuZ2V0Q2FjaGVkQ2VudGVyKCkpO2E9ZC5hZGQoYSxiKTtpZih0aGlzLmRyYWdnaW5nfHwhYS5lcXVhbHMoZCkpZD10aGlzLmdldExvbkxhdEZyb21WaWV3UG9ydFB4KGEpLGMuYW5pbWF0ZT90aGlzLnBhblRvKGQpOih0aGlzLm1vdmVUbyhkKSx0aGlzLmRyYWdnaW5nJiYodGhpcy5kcmFnZ2luZz0hMSx0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoIm1vdmVlbmQiKSkpfX0sCnBhblRvOmZ1bmN0aW9uKGEpe2lmKHRoaXMucGFuVHdlZW4mJnRoaXMuZ2V0RXh0ZW50KCkuc2NhbGUodGhpcy5wYW5SYXRpbykuY29udGFpbnNMb25MYXQoYSkpe3ZhciBiPXRoaXMuZ2V0Q2FjaGVkQ2VudGVyKCk7aWYoIWEuZXF1YWxzKGIpKXt2YXIgYj10aGlzLmdldFBpeGVsRnJvbUxvbkxhdChiKSxjPXRoaXMuZ2V0UGl4ZWxGcm9tTG9uTGF0KGEpLGQ9MCxlPTA7dGhpcy5wYW5Ud2Vlbi5zdGFydCh7eDowLHk6MH0se3g6Yy54LWIueCx5OmMueS1iLnl9LHRoaXMucGFuRHVyYXRpb24se2NhbGxiYWNrczp7ZWFjaFN0ZXA6T3BlbkxheWVycy5GdW5jdGlvbi5iaW5kKGZ1bmN0aW9uKGEpe3RoaXMubW92ZUJ5UHgoYS54LWQsYS55LWUpO2Q9TWF0aC5yb3VuZChhLngpO2U9TWF0aC5yb3VuZChhLnkpfSx0aGlzKSxkb25lOk9wZW5MYXllcnMuRnVuY3Rpb24uYmluZChmdW5jdGlvbihiKXt0aGlzLm1vdmVUbyhhKTt0aGlzLmRyYWdnaW5nPSExO3RoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgibW92ZWVuZCIpfSwKdGhpcyl9fSl9fWVsc2UgdGhpcy5zZXRDZW50ZXIoYSl9LHNldENlbnRlcjpmdW5jdGlvbihhLGIsYyxkKXt0aGlzLnBhblR3ZWVuJiZ0aGlzLnBhblR3ZWVuLnN0b3AoKTt0aGlzLnpvb21Ud2VlbiYmdGhpcy56b29tVHdlZW4uc3RvcCgpO3RoaXMubW92ZVRvKGEsYix7ZHJhZ2dpbmc6Yyxmb3JjZVpvb21DaGFuZ2U6ZH0pfSxtb3ZlQnlQeDpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuc2l6ZS53LzIsZD10aGlzLnNpemUuaC8yLGU9YythLGY9ZCtiLGc9dGhpcy5iYXNlTGF5ZXIud3JhcERhdGVMaW5lLGg9MCxrPTA7dGhpcy5yZXN0cmljdGVkRXh0ZW50JiYoaD1jLGs9ZCxnPSExKTthPWd8fGU8PXRoaXMubWF4UHgueC1oJiZlPj10aGlzLm1pblB4LngraD9NYXRoLnJvdW5kKGEpOjA7Yj1mPD10aGlzLm1heFB4LnktayYmZj49dGhpcy5taW5QeC55K2s/TWF0aC5yb3VuZChiKTowO2lmKGF8fGIpe3RoaXMuZHJhZ2dpbmd8fCh0aGlzLmRyYWdnaW5nPSEwLHRoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgibW92ZXN0YXJ0IikpOwp0aGlzLmNlbnRlcj1udWxsO2EmJih0aGlzLmxheWVyQ29udGFpbmVyT3JpZ2luUHgueC09YSx0aGlzLm1pblB4LngtPWEsdGhpcy5tYXhQeC54LT1hKTtiJiYodGhpcy5sYXllckNvbnRhaW5lck9yaWdpblB4LnktPWIsdGhpcy5taW5QeC55LT1iLHRoaXMubWF4UHgueS09Yik7dGhpcy5hcHBseVRyYW5zZm9ybSgpO2Q9MDtmb3IoZT10aGlzLmxheWVycy5sZW5ndGg7ZDxlOysrZCljPXRoaXMubGF5ZXJzW2RdLGMudmlzaWJpbGl0eSYmKGM9PT10aGlzLmJhc2VMYXllcnx8Yy5pblJhbmdlKSYmKGMubW92ZUJ5UHgoYSxiKSxjLmV2ZW50cy50cmlnZ2VyRXZlbnQoIm1vdmUiKSk7dGhpcy5ldmVudHMudHJpZ2dlckV2ZW50KCJtb3ZlIil9fSxhZGp1c3Rab29tOmZ1bmN0aW9uKGEpe2lmKHRoaXMuYmFzZUxheWVyJiZ0aGlzLmJhc2VMYXllci53cmFwRGF0ZUxpbmUpe3ZhciBiPXRoaXMuYmFzZUxheWVyLnJlc29sdXRpb25zLGM9dGhpcy5nZXRNYXhFeHRlbnQoKS5nZXRXaWR0aCgpL3RoaXMuc2l6ZS53OwppZih0aGlzLmdldFJlc29sdXRpb25Gb3Jab29tKGEpPmMpaWYodGhpcy5mcmFjdGlvbmFsWm9vbSlhPXRoaXMuZ2V0Wm9vbUZvclJlc29sdXRpb24oYyk7ZWxzZSBmb3IodmFyIGQ9YXwwLGU9Yi5sZW5ndGg7ZDxlOysrZClpZihiW2RdPD1jKXthPWQ7YnJlYWt9fXJldHVybiBhfSxnZXRNaW5ab29tOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYWRqdXN0Wm9vbSgwKX0sbW92ZVRvOmZ1bmN0aW9uKGEsYixjKXtudWxsPT1hfHxhIGluc3RhbmNlb2YgT3BlbkxheWVycy5Mb25MYXR8fChhPW5ldyBPcGVuTGF5ZXJzLkxvbkxhdChhKSk7Y3x8KGM9e30pO251bGwhPWImJihiPXBhcnNlRmxvYXQoYiksdGhpcy5mcmFjdGlvbmFsWm9vbXx8KGI9TWF0aC5yb3VuZChiKSkpO3ZhciBkPWI7Yj10aGlzLmFkanVzdFpvb20oYik7YiE9PWQmJihhPXRoaXMuZ2V0Q2VudGVyKCkpO3ZhciBkPWMuZHJhZ2dpbmd8fHRoaXMuZHJhZ2dpbmcsZT1jLmZvcmNlWm9vbUNoYW5nZTt0aGlzLmdldENhY2hlZENlbnRlcigpfHwKdGhpcy5pc1ZhbGlkTG9uTGF0KGEpfHwoYT10aGlzLm1heEV4dGVudC5nZXRDZW50ZXJMb25MYXQoKSx0aGlzLmNlbnRlcj1hLmNsb25lKCkpO2lmKG51bGwhPXRoaXMucmVzdHJpY3RlZEV4dGVudCl7bnVsbD09YSYmKGE9dGhpcy5jZW50ZXIpO251bGw9PWImJihiPXRoaXMuZ2V0Wm9vbSgpKTt2YXIgZj10aGlzLmdldFJlc29sdXRpb25Gb3Jab29tKGIpLGY9dGhpcy5jYWxjdWxhdGVCb3VuZHMoYSxmKTtpZighdGhpcy5yZXN0cmljdGVkRXh0ZW50LmNvbnRhaW5zQm91bmRzKGYpKXt2YXIgZz10aGlzLnJlc3RyaWN0ZWRFeHRlbnQuZ2V0Q2VudGVyTG9uTGF0KCk7Zi5nZXRXaWR0aCgpPnRoaXMucmVzdHJpY3RlZEV4dGVudC5nZXRXaWR0aCgpP2E9bmV3IE9wZW5MYXllcnMuTG9uTGF0KGcubG9uLGEubGF0KTpmLmxlZnQ8dGhpcy5yZXN0cmljdGVkRXh0ZW50LmxlZnQ/YT1hLmFkZCh0aGlzLnJlc3RyaWN0ZWRFeHRlbnQubGVmdC1mLmxlZnQsMCk6Zi5yaWdodD50aGlzLnJlc3RyaWN0ZWRFeHRlbnQucmlnaHQmJgooYT1hLmFkZCh0aGlzLnJlc3RyaWN0ZWRFeHRlbnQucmlnaHQtZi5yaWdodCwwKSk7Zi5nZXRIZWlnaHQoKT50aGlzLnJlc3RyaWN0ZWRFeHRlbnQuZ2V0SGVpZ2h0KCk/YT1uZXcgT3BlbkxheWVycy5Mb25MYXQoYS5sb24sZy5sYXQpOmYuYm90dG9tPHRoaXMucmVzdHJpY3RlZEV4dGVudC5ib3R0b20/YT1hLmFkZCgwLHRoaXMucmVzdHJpY3RlZEV4dGVudC5ib3R0b20tZi5ib3R0b20pOmYudG9wPnRoaXMucmVzdHJpY3RlZEV4dGVudC50b3AmJihhPWEuYWRkKDAsdGhpcy5yZXN0cmljdGVkRXh0ZW50LnRvcC1mLnRvcCkpfX1lPWV8fHRoaXMuaXNWYWxpZFpvb21MZXZlbChiKSYmYiE9dGhpcy5nZXRab29tKCk7Zj10aGlzLmlzVmFsaWRMb25MYXQoYSkmJiFhLmVxdWFscyh0aGlzLmNlbnRlcik7aWYoZXx8Znx8ZCl7ZHx8dGhpcy5ldmVudHMudHJpZ2dlckV2ZW50KCJtb3Zlc3RhcnQiLHt6b29tQ2hhbmdlZDplfSk7ZiYmKCFlJiZ0aGlzLmNlbnRlciYmdGhpcy5jZW50ZXJMYXllckNvbnRhaW5lcihhKSwKdGhpcy5jZW50ZXI9YS5jbG9uZSgpKTthPWU/dGhpcy5nZXRSZXNvbHV0aW9uRm9yWm9vbShiKTp0aGlzLmdldFJlc29sdXRpb24oKTtpZihlfHxudWxsPT10aGlzLmxheWVyQ29udGFpbmVyT3JpZ2luKXt0aGlzLmxheWVyQ29udGFpbmVyT3JpZ2luPXRoaXMuZ2V0Q2FjaGVkQ2VudGVyKCk7dGhpcy5sYXllckNvbnRhaW5lck9yaWdpblB4Lng9MDt0aGlzLmxheWVyQ29udGFpbmVyT3JpZ2luUHgueT0wO3RoaXMuYXBwbHlUcmFuc2Zvcm0oKTt2YXIgZj10aGlzLmdldE1heEV4dGVudCh7cmVzdHJpY3RlZDohMH0pLGg9Zi5nZXRDZW50ZXJMb25MYXQoKSxnPXRoaXMuY2VudGVyLmxvbi1oLmxvbixoPWgubGF0LXRoaXMuY2VudGVyLmxhdCxrPU1hdGgucm91bmQoZi5nZXRXaWR0aCgpL2EpLGw9TWF0aC5yb3VuZChmLmdldEhlaWdodCgpL2EpO3RoaXMubWluUHg9e3g6KHRoaXMuc2l6ZS53LWspLzItZy9hLHk6KHRoaXMuc2l6ZS5oLWwpLzItaC9hfTt0aGlzLm1heFB4PXt4OnRoaXMubWluUHgueCsKTWF0aC5yb3VuZChmLmdldFdpZHRoKCkvYSkseTp0aGlzLm1pblB4LnkrTWF0aC5yb3VuZChmLmdldEhlaWdodCgpL2EpfX1lJiYodGhpcy56b29tPWIsdGhpcy5yZXNvbHV0aW9uPWEpO2E9dGhpcy5nZXRFeHRlbnQoKTt0aGlzLmJhc2VMYXllci52aXNpYmlsaXR5JiYodGhpcy5iYXNlTGF5ZXIubW92ZVRvKGEsZSxjLmRyYWdnaW5nKSxjLmRyYWdnaW5nfHx0aGlzLmJhc2VMYXllci5ldmVudHMudHJpZ2dlckV2ZW50KCJtb3ZlZW5kIix7em9vbUNoYW5nZWQ6ZX0pKTthPXRoaXMuYmFzZUxheWVyLmdldEV4dGVudCgpO2ZvcihiPXRoaXMubGF5ZXJzLmxlbmd0aC0xOzA8PWI7LS1iKWY9dGhpcy5sYXllcnNbYl0sZj09PXRoaXMuYmFzZUxheWVyfHxmLmlzQmFzZUxheWVyfHwoZz1mLmNhbGN1bGF0ZUluUmFuZ2UoKSxmLmluUmFuZ2UhPWcmJigoZi5pblJhbmdlPWcpfHxmLmRpc3BsYXkoITEpLHRoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgiY2hhbmdlbGF5ZXIiLHtsYXllcjpmLHByb3BlcnR5OiJ2aXNpYmlsaXR5In0pKSwKZyYmZi52aXNpYmlsaXR5JiYoZi5tb3ZlVG8oYSxlLGMuZHJhZ2dpbmcpLGMuZHJhZ2dpbmd8fGYuZXZlbnRzLnRyaWdnZXJFdmVudCgibW92ZWVuZCIse3pvb21DaGFuZ2VkOmV9KSkpO3RoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgibW92ZSIpO2R8fHRoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgibW92ZWVuZCIpO2lmKGUpe2I9MDtmb3IoYz10aGlzLnBvcHVwcy5sZW5ndGg7YjxjO2IrKyl0aGlzLnBvcHVwc1tiXS51cGRhdGVQb3NpdGlvbigpO3RoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgiem9vbWVuZCIpfX19LGNlbnRlckxheWVyQ29udGFpbmVyOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZ2V0Vmlld1BvcnRQeEZyb21Mb25MYXQodGhpcy5sYXllckNvbnRhaW5lck9yaWdpbiksYz10aGlzLmdldFZpZXdQb3J0UHhGcm9tTG9uTGF0KGEpO2lmKG51bGwhPWImJm51bGwhPWMpe3ZhciBkPXRoaXMubGF5ZXJDb250YWluZXJPcmlnaW5QeC54O2E9dGhpcy5sYXllckNvbnRhaW5lck9yaWdpblB4Lnk7CnZhciBlPU1hdGgucm91bmQoYi54LWMueCksYj1NYXRoLnJvdW5kKGIueS1jLnkpO3RoaXMuYXBwbHlUcmFuc2Zvcm0odGhpcy5sYXllckNvbnRhaW5lck9yaWdpblB4Lng9ZSx0aGlzLmxheWVyQ29udGFpbmVyT3JpZ2luUHgueT1iKTtkLT1lO2EtPWI7dGhpcy5taW5QeC54LT1kO3RoaXMubWF4UHgueC09ZDt0aGlzLm1pblB4LnktPWE7dGhpcy5tYXhQeC55LT1hfX0saXNWYWxpZFpvb21MZXZlbDpmdW5jdGlvbihhKXtyZXR1cm4gbnVsbCE9YSYmMDw9YSYmYTx0aGlzLmdldE51bVpvb21MZXZlbHMoKX0saXNWYWxpZExvbkxhdDpmdW5jdGlvbihhKXt2YXIgYj0hMTtudWxsIT1hJiYoYj10aGlzLmdldE1heEV4dGVudCgpLGI9Yi5jb250YWluc0xvbkxhdChhLHt3b3JsZEJvdW5kczp0aGlzLmJhc2VMYXllci53cmFwRGF0ZUxpbmUmJmJ9KSk7cmV0dXJuIGJ9LGdldFByb2plY3Rpb246ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmdldFByb2plY3Rpb25PYmplY3QoKTtyZXR1cm4gYT9hLmdldENvZGUoKToKbnVsbH0sZ2V0UHJvamVjdGlvbk9iamVjdDpmdW5jdGlvbigpe3ZhciBhPW51bGw7bnVsbCE9dGhpcy5iYXNlTGF5ZXImJihhPXRoaXMuYmFzZUxheWVyLnByb2plY3Rpb24pO3JldHVybiBhfSxnZXRNYXhSZXNvbHV0aW9uOmZ1bmN0aW9uKCl7dmFyIGE9bnVsbDtudWxsIT10aGlzLmJhc2VMYXllciYmKGE9dGhpcy5iYXNlTGF5ZXIubWF4UmVzb2x1dGlvbik7cmV0dXJuIGF9LGdldE1heEV4dGVudDpmdW5jdGlvbihhKXt2YXIgYj1udWxsO2EmJmEucmVzdHJpY3RlZCYmdGhpcy5yZXN0cmljdGVkRXh0ZW50P2I9dGhpcy5yZXN0cmljdGVkRXh0ZW50Om51bGwhPXRoaXMuYmFzZUxheWVyJiYoYj10aGlzLmJhc2VMYXllci5tYXhFeHRlbnQpO3JldHVybiBifSxnZXROdW1ab29tTGV2ZWxzOmZ1bmN0aW9uKCl7dmFyIGE9bnVsbDtudWxsIT10aGlzLmJhc2VMYXllciYmKGE9dGhpcy5iYXNlTGF5ZXIubnVtWm9vbUxldmVscyk7cmV0dXJuIGF9LGdldEV4dGVudDpmdW5jdGlvbigpe3ZhciBhPQpudWxsO251bGwhPXRoaXMuYmFzZUxheWVyJiYoYT10aGlzLmJhc2VMYXllci5nZXRFeHRlbnQoKSk7cmV0dXJuIGF9LGdldFJlc29sdXRpb246ZnVuY3Rpb24oKXt2YXIgYT1udWxsO251bGwhPXRoaXMuYmFzZUxheWVyP2E9dGhpcy5iYXNlTGF5ZXIuZ2V0UmVzb2x1dGlvbigpOiEwPT09dGhpcy5hbGxPdmVybGF5cyYmMDx0aGlzLmxheWVycy5sZW5ndGgmJihhPXRoaXMubGF5ZXJzWzBdLmdldFJlc29sdXRpb24oKSk7cmV0dXJuIGF9LGdldFVuaXRzOmZ1bmN0aW9uKCl7dmFyIGE9bnVsbDtudWxsIT10aGlzLmJhc2VMYXllciYmKGE9dGhpcy5iYXNlTGF5ZXIudW5pdHMpO3JldHVybiBhfSxnZXRTY2FsZTpmdW5jdGlvbigpe3ZhciBhPW51bGw7bnVsbCE9dGhpcy5iYXNlTGF5ZXImJihhPXRoaXMuZ2V0UmVzb2x1dGlvbigpLGE9T3BlbkxheWVycy5VdGlsLmdldFNjYWxlRnJvbVJlc29sdXRpb24oYSx0aGlzLmJhc2VMYXllci51bml0cykpO3JldHVybiBhfSxnZXRab29tRm9yRXh0ZW50OmZ1bmN0aW9uKGEsCmIpe3ZhciBjPW51bGw7bnVsbCE9dGhpcy5iYXNlTGF5ZXImJihjPXRoaXMuYmFzZUxheWVyLmdldFpvb21Gb3JFeHRlbnQoYSxiKSk7cmV0dXJuIGN9LGdldFJlc29sdXRpb25Gb3Jab29tOmZ1bmN0aW9uKGEpe3ZhciBiPW51bGw7dGhpcy5iYXNlTGF5ZXImJihiPXRoaXMuYmFzZUxheWVyLmdldFJlc29sdXRpb25Gb3Jab29tKGEpKTtyZXR1cm4gYn0sZ2V0Wm9vbUZvclJlc29sdXRpb246ZnVuY3Rpb24oYSxiKXt2YXIgYz1udWxsO251bGwhPXRoaXMuYmFzZUxheWVyJiYoYz10aGlzLmJhc2VMYXllci5nZXRab29tRm9yUmVzb2x1dGlvbihhLGIpKTtyZXR1cm4gY30sem9vbVRvOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcztpZihjLmlzVmFsaWRab29tTGV2ZWwoYSkpaWYoYy5iYXNlTGF5ZXIud3JhcERhdGVMaW5lJiYoYT1jLmFkanVzdFpvb20oYSkpLGMuem9vbVR3ZWVuKXt2YXIgZD1jLmdldFJlc29sdXRpb24oKSxlPWMuZ2V0UmVzb2x1dGlvbkZvclpvb20oYSksZj17c2NhbGU6MX0sCmQ9e3NjYWxlOmQvZX07Yy56b29tVHdlZW4ucGxheWluZyYmYy56b29tVHdlZW4uZHVyYXRpb248MypjLnpvb21EdXJhdGlvbj9jLnpvb21Ud2Vlbi5maW5pc2g9e3NjYWxlOmMuem9vbVR3ZWVuLmZpbmlzaC5zY2FsZSpkLnNjYWxlfTooYnx8KGU9Yy5nZXRTaXplKCksYj17eDplLncvMix5OmUuaC8yfSksYy56b29tVHdlZW4uc3RhcnQoZixkLGMuem9vbUR1cmF0aW9uLHttaW5GcmFtZVJhdGU6NTAsY2FsbGJhY2tzOntlYWNoU3RlcDpmdW5jdGlvbihhKXt2YXIgZD1jLmxheWVyQ29udGFpbmVyT3JpZ2luUHg7YT1hLnNjYWxlO2MuYXBwbHlUcmFuc2Zvcm0oZC54KygoYS0xKSooZC54LWIueCl8MCksZC55KygoYS0xKSooZC55LWIueSl8MCksYSl9LGRvbmU6ZnVuY3Rpb24oYSl7Yy5hcHBseVRyYW5zZm9ybSgpO2E9Yy5nZXRSZXNvbHV0aW9uKCkvYS5zY2FsZTt2YXIgZD1jLmdldFpvb21Gb3JSZXNvbHV0aW9uKGEsITApO2MubW92ZVRvKGMuZ2V0Wm9vbVRhcmdldENlbnRlcihiLAphKSxkLCEwKX19fSkpfWVsc2UgZj1iP2MuZ2V0Wm9vbVRhcmdldENlbnRlcihiLGMuZ2V0UmVzb2x1dGlvbkZvclpvb20oYSkpOm51bGwsYy5zZXRDZW50ZXIoZixhKX0sem9vbUluOmZ1bmN0aW9uKCl7dGhpcy56b29tVG8odGhpcy5nZXRab29tKCkrMSl9LHpvb21PdXQ6ZnVuY3Rpb24oKXt0aGlzLnpvb21Ubyh0aGlzLmdldFpvb20oKS0xKX0sem9vbVRvRXh0ZW50OmZ1bmN0aW9uKGEsYil7YSBpbnN0YW5jZW9mIE9wZW5MYXllcnMuQm91bmRzfHwoYT1uZXcgT3BlbkxheWVycy5Cb3VuZHMoYSkpO3ZhciBjPWEuZ2V0Q2VudGVyTG9uTGF0KCk7aWYodGhpcy5iYXNlTGF5ZXIud3JhcERhdGVMaW5lKXtjPXRoaXMuZ2V0TWF4RXh0ZW50KCk7Zm9yKGE9YS5jbG9uZSgpO2EucmlnaHQ8YS5sZWZ0OylhLnJpZ2h0Kz1jLmdldFdpZHRoKCk7Yz1hLmdldENlbnRlckxvbkxhdCgpLndyYXBEYXRlTGluZShjKX10aGlzLnNldENlbnRlcihjLHRoaXMuZ2V0Wm9vbUZvckV4dGVudChhLGIpKX0sCnpvb21Ub01heEV4dGVudDpmdW5jdGlvbihhKXthPXRoaXMuZ2V0TWF4RXh0ZW50KHtyZXN0cmljdGVkOmE/YS5yZXN0cmljdGVkOiEwfSk7dGhpcy56b29tVG9FeHRlbnQoYSl9LHpvb21Ub1NjYWxlOmZ1bmN0aW9uKGEsYil7dmFyIGM9T3BlbkxheWVycy5VdGlsLmdldFJlc29sdXRpb25Gcm9tU2NhbGUoYSx0aGlzLmJhc2VMYXllci51bml0cyksZD10aGlzLnNpemUudypjLzIsYz10aGlzLnNpemUuaCpjLzIsZT10aGlzLmdldENhY2hlZENlbnRlcigpLGQ9bmV3IE9wZW5MYXllcnMuQm91bmRzKGUubG9uLWQsZS5sYXQtYyxlLmxvbitkLGUubGF0K2MpO3RoaXMuem9vbVRvRXh0ZW50KGQsYil9LGdldExvbkxhdEZyb21WaWV3UG9ydFB4OmZ1bmN0aW9uKGEpe3ZhciBiPW51bGw7bnVsbCE9dGhpcy5iYXNlTGF5ZXImJihiPXRoaXMuYmFzZUxheWVyLmdldExvbkxhdEZyb21WaWV3UG9ydFB4KGEpKTtyZXR1cm4gYn0sZ2V0Vmlld1BvcnRQeEZyb21Mb25MYXQ6ZnVuY3Rpb24oYSl7dmFyIGI9Cm51bGw7bnVsbCE9dGhpcy5iYXNlTGF5ZXImJihiPXRoaXMuYmFzZUxheWVyLmdldFZpZXdQb3J0UHhGcm9tTG9uTGF0KGEpKTtyZXR1cm4gYn0sZ2V0Wm9vbVRhcmdldENlbnRlcjpmdW5jdGlvbihhLGIpe3ZhciBjPW51bGwsZD10aGlzLmdldFNpemUoKSxlPWQudy8yLWEueCxkPWEueS1kLmgvMixmPXRoaXMuZ2V0TG9uTGF0RnJvbVBpeGVsKGEpO2YmJihjPW5ldyBPcGVuTGF5ZXJzLkxvbkxhdChmLmxvbitlKmIsZi5sYXQrZCpiKSk7cmV0dXJuIGN9LGdldExvbkxhdEZyb21QaXhlbDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5nZXRMb25MYXRGcm9tVmlld1BvcnRQeChhKX0sZ2V0UGl4ZWxGcm9tTG9uTGF0OmZ1bmN0aW9uKGEpe2E9dGhpcy5nZXRWaWV3UG9ydFB4RnJvbUxvbkxhdChhKTthLng9TWF0aC5yb3VuZChhLngpO2EueT1NYXRoLnJvdW5kKGEueSk7cmV0dXJuIGF9LGdldEdlb2Rlc2ljUGl4ZWxTaXplOmZ1bmN0aW9uKGEpe3ZhciBiPWE/dGhpcy5nZXRMb25MYXRGcm9tUGl4ZWwoYSk6CnRoaXMuZ2V0Q2FjaGVkQ2VudGVyKCl8fG5ldyBPcGVuTGF5ZXJzLkxvbkxhdCgwLDApLGM9dGhpcy5nZXRSZXNvbHV0aW9uKCk7YT1iLmFkZCgtYy8yLDApO3ZhciBkPWIuYWRkKGMvMiwwKSxlPWIuYWRkKDAsLWMvMiksYj1iLmFkZCgwLGMvMiksYz1uZXcgT3BlbkxheWVycy5Qcm9qZWN0aW9uKCJFUFNHOjQzMjYiKSxmPXRoaXMuZ2V0UHJvamVjdGlvbk9iamVjdCgpfHxjO2YuZXF1YWxzKGMpfHwoYS50cmFuc2Zvcm0oZixjKSxkLnRyYW5zZm9ybShmLGMpLGUudHJhbnNmb3JtKGYsYyksYi50cmFuc2Zvcm0oZixjKSk7cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLlNpemUoT3BlbkxheWVycy5VdGlsLmRpc3RWaW5jZW50eShhLGQpLE9wZW5MYXllcnMuVXRpbC5kaXN0VmluY2VudHkoZSxiKSl9LGdldFZpZXdQb3J0UHhGcm9tTGF5ZXJQeDpmdW5jdGlvbihhKXt2YXIgYj1udWxsO251bGwhPWEmJihiPWEuYWRkKHRoaXMubGF5ZXJDb250YWluZXJPcmlnaW5QeC54LHRoaXMubGF5ZXJDb250YWluZXJPcmlnaW5QeC55KSk7CnJldHVybiBifSxnZXRMYXllclB4RnJvbVZpZXdQb3J0UHg6ZnVuY3Rpb24oYSl7dmFyIGI9bnVsbDtudWxsIT1hJiYoYj1hLmFkZCgtdGhpcy5sYXllckNvbnRhaW5lck9yaWdpblB4LngsLXRoaXMubGF5ZXJDb250YWluZXJPcmlnaW5QeC55KSxpc05hTihiLngpfHxpc05hTihiLnkpKSYmKGI9bnVsbCk7cmV0dXJuIGJ9LGdldExvbkxhdEZyb21MYXllclB4OmZ1bmN0aW9uKGEpe2E9dGhpcy5nZXRWaWV3UG9ydFB4RnJvbUxheWVyUHgoYSk7cmV0dXJuIHRoaXMuZ2V0TG9uTGF0RnJvbVZpZXdQb3J0UHgoYSl9LGdldExheWVyUHhGcm9tTG9uTGF0OmZ1bmN0aW9uKGEpe2E9dGhpcy5nZXRQaXhlbEZyb21Mb25MYXQoYSk7cmV0dXJuIHRoaXMuZ2V0TGF5ZXJQeEZyb21WaWV3UG9ydFB4KGEpfSxhcHBseVRyYW5zZm9ybTpmdW5jdGlvbihhLGIsYyl7Yz1jfHwxO3ZhciBkPXRoaXMubGF5ZXJDb250YWluZXJPcmlnaW5QeCxlPTEhPT1jO2E9YXx8ZC54O2I9Ynx8ZC55O3ZhciBmPXRoaXMubGF5ZXJDb250YWluZXJEaXYuc3R5bGUsCmc9dGhpcy5hcHBseVRyYW5zZm9ybS50cmFuc2Zvcm0saD10aGlzLmFwcGx5VHJhbnNmb3JtLnRlbXBsYXRlO2lmKHZvaWQgMD09PWcmJihnPU9wZW5MYXllcnMuVXRpbC52ZW5kb3JQcmVmaXguc3R5bGUoInRyYW5zZm9ybSIpLHRoaXMuYXBwbHlUcmFuc2Zvcm0udHJhbnNmb3JtPWcpKXt2YXIgaz1PcGVuTGF5ZXJzLkVsZW1lbnQuZ2V0U3R5bGUodGhpcy52aWV3UG9ydERpdixPcGVuTGF5ZXJzLlV0aWwudmVuZG9yUHJlZml4LmNzcygidHJhbnNmb3JtIikpO2smJiJub25lIj09PWt8fChoPVsidHJhbnNsYXRlM2QoIiwiLDApICIsInNjYWxlM2QoIiwiLDEpIl0sZltnXT1baFswXSwiMCwwIixoWzFdXS5qb2luKCIiKSk7aCYmfmZbZ10uaW5kZXhPZihoWzBdKXx8KGg9WyJ0cmFuc2xhdGUoIiwiKSAiLCJzY2FsZSgiLCIpIl0pO3RoaXMuYXBwbHlUcmFuc2Zvcm0udGVtcGxhdGU9aH1udWxsPT09Z3x8InRyYW5zbGF0ZTNkKCIhPT1oWzBdJiYhMCE9PWU/KGYubGVmdD1hKyJweCIsZi50b3A9CmIrInB4IixudWxsIT09ZyYmKGZbZ109IiIpKTooITA9PT1lJiYidHJhbnNsYXRlKCI9PT1oWzBdJiYoYS09ZC54LGItPWQueSxmLmxlZnQ9ZC54KyJweCIsZi50b3A9ZC55KyJweCIpLGZbZ109W2hbMF0sYSwicHgsIixiLCJweCIsaFsxXSxoWzJdLGMsIiwiLGMsaFszXV0uam9pbigiIikpfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLk1hcCJ9KTtPcGVuTGF5ZXJzLk1hcC5USUxFX1dJRFRIPTI1NjtPcGVuTGF5ZXJzLk1hcC5USUxFX0hFSUdIVD0yNTY7T3BlbkxheWVycy5IYW5kbGVyPU9wZW5MYXllcnMuQ2xhc3Moe2lkOm51bGwsY29udHJvbDpudWxsLG1hcDpudWxsLGtleU1hc2s6bnVsbCxhY3RpdmU6ITEsZXZ0Om51bGwsdG91Y2g6ITEsaW5pdGlhbGl6ZTpmdW5jdGlvbihhLGIsYyl7T3BlbkxheWVycy5VdGlsLmV4dGVuZCh0aGlzLGMpO3RoaXMuY29udHJvbD1hO3RoaXMuY2FsbGJhY2tzPWI7KGE9dGhpcy5tYXB8fGEubWFwKSYmdGhpcy5zZXRNYXAoYSk7dGhpcy5pZD1PcGVuTGF5ZXJzLlV0aWwuY3JlYXRlVW5pcXVlSUQodGhpcy5DTEFTU19OQU1FKyJfIil9LHNldE1hcDpmdW5jdGlvbihhKXt0aGlzLm1hcD1hfSxjaGVja01vZGlmaWVyczpmdW5jdGlvbihhKXtyZXR1cm4gbnVsbD09dGhpcy5rZXlNYXNrPyEwOigoYS5zaGlmdEtleT9PcGVuTGF5ZXJzLkhhbmRsZXIuTU9EX1NISUZUOjApfChhLmN0cmxLZXk/T3BlbkxheWVycy5IYW5kbGVyLk1PRF9DVFJMOjApfChhLmFsdEtleT9PcGVuTGF5ZXJzLkhhbmRsZXIuTU9EX0FMVDoKMCl8KGEubWV0YUtleT9PcGVuTGF5ZXJzLkhhbmRsZXIuTU9EX01FVEE6MCkpPT10aGlzLmtleU1hc2t9LGFjdGl2YXRlOmZ1bmN0aW9uKCl7aWYodGhpcy5hY3RpdmUpcmV0dXJuITE7Zm9yKHZhciBhPU9wZW5MYXllcnMuRXZlbnRzLnByb3RvdHlwZS5CUk9XU0VSX0VWRU5UUyxiPTAsYz1hLmxlbmd0aDtiPGM7YisrKXRoaXNbYVtiXV0mJnRoaXMucmVnaXN0ZXIoYVtiXSx0aGlzW2FbYl1dKTtyZXR1cm4gdGhpcy5hY3RpdmU9ITB9LGRlYWN0aXZhdGU6ZnVuY3Rpb24oKXtpZighdGhpcy5hY3RpdmUpcmV0dXJuITE7Zm9yKHZhciBhPU9wZW5MYXllcnMuRXZlbnRzLnByb3RvdHlwZS5CUk9XU0VSX0VWRU5UUyxiPTAsYz1hLmxlbmd0aDtiPGM7YisrKXRoaXNbYVtiXV0mJnRoaXMudW5yZWdpc3RlcihhW2JdLHRoaXNbYVtiXV0pO3RoaXMuYWN0aXZlPXRoaXMudG91Y2g9ITE7cmV0dXJuITB9LHN0YXJ0VG91Y2g6ZnVuY3Rpb24oKXtpZighdGhpcy50b3VjaCl7dGhpcy50b3VjaD0hMDsKZm9yKHZhciBhPSJtb3VzZWRvd24gbW91c2V1cCBtb3VzZW1vdmUgY2xpY2sgZGJsY2xpY2sgbW91c2VvdXQiLnNwbGl0KCIgIiksYj0wLGM9YS5sZW5ndGg7YjxjO2IrKyl0aGlzW2FbYl1dJiZ0aGlzLnVucmVnaXN0ZXIoYVtiXSx0aGlzW2FbYl1dKX19LGNhbGxiYWNrOmZ1bmN0aW9uKGEsYil7YSYmdGhpcy5jYWxsYmFja3NbYV0mJnRoaXMuY2FsbGJhY2tzW2FdLmFwcGx5KHRoaXMuY29udHJvbCxiKX0scmVnaXN0ZXI6ZnVuY3Rpb24oYSxiKXt0aGlzLm1hcC5ldmVudHMucmVnaXN0ZXJQcmlvcml0eShhLHRoaXMsYik7dGhpcy5tYXAuZXZlbnRzLnJlZ2lzdGVyUHJpb3JpdHkoYSx0aGlzLHRoaXMuc2V0RXZlbnQpfSx1bnJlZ2lzdGVyOmZ1bmN0aW9uKGEsYil7dGhpcy5tYXAuZXZlbnRzLnVucmVnaXN0ZXIoYSx0aGlzLGIpO3RoaXMubWFwLmV2ZW50cy51bnJlZ2lzdGVyKGEsdGhpcyx0aGlzLnNldEV2ZW50KX0sc2V0RXZlbnQ6ZnVuY3Rpb24oYSl7dGhpcy5ldnQ9YTtyZXR1cm4hMH0sCmRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmRlYWN0aXZhdGUoKTt0aGlzLmNvbnRyb2w9dGhpcy5tYXA9bnVsbH0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5IYW5kbGVyIn0pO09wZW5MYXllcnMuSGFuZGxlci5NT0RfTk9ORT0wO09wZW5MYXllcnMuSGFuZGxlci5NT0RfU0hJRlQ9MTtPcGVuTGF5ZXJzLkhhbmRsZXIuTU9EX0NUUkw9MjtPcGVuTGF5ZXJzLkhhbmRsZXIuTU9EX0FMVD00O09wZW5MYXllcnMuSGFuZGxlci5NT0RfTUVUQT04O09wZW5MYXllcnMuSGFuZGxlci5DbGljaz1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuSGFuZGxlcix7ZGVsYXk6MzAwLHNpbmdsZTohMCwiZG91YmxlIjohMSxwaXhlbFRvbGVyYW5jZTowLGRibGNsaWNrVG9sZXJhbmNlOjEzLHN0b3BTaW5nbGU6ITEsc3RvcERvdWJsZTohMSx0aW1lcklkOm51bGwsZG93bjpudWxsLGxhc3Q6bnVsbCxmaXJzdDpudWxsLHJpZ2h0Y2xpY2tUaW1lcklkOm51bGwsdG91Y2hzdGFydDpmdW5jdGlvbihhKXt0aGlzLnN0YXJ0VG91Y2goKTt0aGlzLmRvd249dGhpcy5nZXRFdmVudEluZm8oYSk7dGhpcy5sYXN0PXRoaXMuZ2V0RXZlbnRJbmZvKGEpO3JldHVybiEwfSx0b3VjaG1vdmU6ZnVuY3Rpb24oYSl7dGhpcy5sYXN0PXRoaXMuZ2V0RXZlbnRJbmZvKGEpO3JldHVybiEwfSx0b3VjaGVuZDpmdW5jdGlvbihhKXt0aGlzLmRvd24mJihhLnh5PXRoaXMubGFzdC54eSxhLmxhc3RUb3VjaGVzPXRoaXMubGFzdC50b3VjaGVzLHRoaXMuaGFuZGxlU2luZ2xlKGEpLAp0aGlzLmRvd249bnVsbCk7cmV0dXJuITB9LG1vdXNlZG93bjpmdW5jdGlvbihhKXt0aGlzLmRvd249dGhpcy5nZXRFdmVudEluZm8oYSk7dGhpcy5sYXN0PXRoaXMuZ2V0RXZlbnRJbmZvKGEpO3JldHVybiEwfSxtb3VzZXVwOmZ1bmN0aW9uKGEpe3ZhciBiPSEwO3RoaXMuY2hlY2tNb2RpZmllcnMoYSkmJih0aGlzLmNvbnRyb2wuaGFuZGxlUmlnaHRDbGlja3MmJk9wZW5MYXllcnMuRXZlbnQuaXNSaWdodENsaWNrKGEpKSYmKGI9dGhpcy5yaWdodGNsaWNrKGEpKTtyZXR1cm4gYn0scmlnaHRjbGljazpmdW5jdGlvbihhKXtpZih0aGlzLnBhc3Nlc1RvbGVyYW5jZShhKSl7aWYobnVsbCE9dGhpcy5yaWdodGNsaWNrVGltZXJJZClyZXR1cm4gdGhpcy5jbGVhclRpbWVyKCksdGhpcy5jYWxsYmFjaygiZGJscmlnaHRjbGljayIsW2FdKSwhdGhpcy5zdG9wRG91YmxlO2E9dGhpc1siZG91YmxlIl0/T3BlbkxheWVycy5VdGlsLmV4dGVuZCh7fSxhKTp0aGlzLmNhbGxiYWNrKCJyaWdodGNsaWNrIiwKW2FdKTthPU9wZW5MYXllcnMuRnVuY3Rpb24uYmluZCh0aGlzLmRlbGF5ZWRSaWdodENhbGwsdGhpcyxhKTt0aGlzLnJpZ2h0Y2xpY2tUaW1lcklkPXdpbmRvdy5zZXRUaW1lb3V0KGEsdGhpcy5kZWxheSl9cmV0dXJuIXRoaXMuc3RvcFNpbmdsZX0sZGVsYXllZFJpZ2h0Q2FsbDpmdW5jdGlvbihhKXt0aGlzLnJpZ2h0Y2xpY2tUaW1lcklkPW51bGw7YSYmdGhpcy5jYWxsYmFjaygicmlnaHRjbGljayIsW2FdKX0sY2xpY2s6ZnVuY3Rpb24oYSl7dGhpcy5sYXN0fHwodGhpcy5sYXN0PXRoaXMuZ2V0RXZlbnRJbmZvKGEpKTt0aGlzLmhhbmRsZVNpbmdsZShhKTtyZXR1cm4hdGhpcy5zdG9wU2luZ2xlfSxkYmxjbGljazpmdW5jdGlvbihhKXt0aGlzLmhhbmRsZURvdWJsZShhKTtyZXR1cm4hdGhpcy5zdG9wRG91YmxlfSxoYW5kbGVEb3VibGU6ZnVuY3Rpb24oYSl7dGhpcy5wYXNzZXNEYmxjbGlja1RvbGVyYW5jZShhKSYmKHRoaXNbImRvdWJsZSJdJiZ0aGlzLmNhbGxiYWNrKCJkYmxjbGljayIsClthXSksdGhpcy5jbGVhclRpbWVyKCkpfSxoYW5kbGVTaW5nbGU6ZnVuY3Rpb24oYSl7dGhpcy5wYXNzZXNUb2xlcmFuY2UoYSkmJihudWxsIT10aGlzLnRpbWVySWQ/KHRoaXMubGFzdC50b3VjaGVzJiYxPT09dGhpcy5sYXN0LnRvdWNoZXMubGVuZ3RoJiYodGhpc1siZG91YmxlIl0mJk9wZW5MYXllcnMuRXZlbnQucHJldmVudERlZmF1bHQoYSksdGhpcy5oYW5kbGVEb3VibGUoYSkpLHRoaXMubGFzdC50b3VjaGVzJiYyPT09dGhpcy5sYXN0LnRvdWNoZXMubGVuZ3RofHx0aGlzLmNsZWFyVGltZXIoKSk6KHRoaXMuZmlyc3Q9dGhpcy5nZXRFdmVudEluZm8oYSksYT10aGlzLnNpbmdsZT9PcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHt9LGEpOm51bGwsdGhpcy5xdWV1ZVBvdGVudGlhbENsaWNrKGEpKSl9LHF1ZXVlUG90ZW50aWFsQ2xpY2s6ZnVuY3Rpb24oYSl7dGhpcy50aW1lcklkPXdpbmRvdy5zZXRUaW1lb3V0KE9wZW5MYXllcnMuRnVuY3Rpb24uYmluZCh0aGlzLmRlbGF5ZWRDYWxsLAp0aGlzLGEpLHRoaXMuZGVsYXkpfSxwYXNzZXNUb2xlcmFuY2U6ZnVuY3Rpb24oYSl7dmFyIGI9ITA7aWYobnVsbCE9dGhpcy5waXhlbFRvbGVyYW5jZSYmdGhpcy5kb3duJiZ0aGlzLmRvd24ueHkmJihiPXRoaXMucGl4ZWxUb2xlcmFuY2U+PXRoaXMuZG93bi54eS5kaXN0YW5jZVRvKGEueHkpKSYmdGhpcy50b3VjaCYmdGhpcy5kb3duLnRvdWNoZXMubGVuZ3RoPT09dGhpcy5sYXN0LnRvdWNoZXMubGVuZ3RoKXthPTA7Zm9yKHZhciBjPXRoaXMuZG93bi50b3VjaGVzLmxlbmd0aDthPGM7KythKWlmKHRoaXMuZ2V0VG91Y2hEaXN0YW5jZSh0aGlzLmRvd24udG91Y2hlc1thXSx0aGlzLmxhc3QudG91Y2hlc1thXSk+dGhpcy5waXhlbFRvbGVyYW5jZSl7Yj0hMTticmVha319cmV0dXJuIGJ9LGdldFRvdWNoRGlzdGFuY2U6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gTWF0aC5zcXJ0KE1hdGgucG93KGEuY2xpZW50WC1iLmNsaWVudFgsMikrTWF0aC5wb3coYS5jbGllbnRZLWIuY2xpZW50WSwKMikpfSxwYXNzZXNEYmxjbGlja1RvbGVyYW5jZTpmdW5jdGlvbihhKXthPSEwO3RoaXMuZG93biYmdGhpcy5maXJzdCYmKGE9dGhpcy5kb3duLnh5LmRpc3RhbmNlVG8odGhpcy5maXJzdC54eSk8PXRoaXMuZGJsY2xpY2tUb2xlcmFuY2UpO3JldHVybiBhfSxjbGVhclRpbWVyOmZ1bmN0aW9uKCl7bnVsbCE9dGhpcy50aW1lcklkJiYod2luZG93LmNsZWFyVGltZW91dCh0aGlzLnRpbWVySWQpLHRoaXMudGltZXJJZD1udWxsKTtudWxsIT10aGlzLnJpZ2h0Y2xpY2tUaW1lcklkJiYod2luZG93LmNsZWFyVGltZW91dCh0aGlzLnJpZ2h0Y2xpY2tUaW1lcklkKSx0aGlzLnJpZ2h0Y2xpY2tUaW1lcklkPW51bGwpfSxkZWxheWVkQ2FsbDpmdW5jdGlvbihhKXt0aGlzLnRpbWVySWQ9bnVsbDthJiZ0aGlzLmNhbGxiYWNrKCJjbGljayIsW2FdKX0sZ2V0RXZlbnRJbmZvOmZ1bmN0aW9uKGEpe3ZhciBiO2lmKGEudG91Y2hlcyl7dmFyIGM9YS50b3VjaGVzLmxlbmd0aDtiPUFycmF5KGMpO2Zvcih2YXIgZCwKZT0wO2U8YztlKyspZD1hLnRvdWNoZXNbZV0sYltlXT17Y2xpZW50WDpkLm9sQ2xpZW50WCxjbGllbnRZOmQub2xDbGllbnRZfX1yZXR1cm57eHk6YS54eSx0b3VjaGVzOmJ9fSxkZWFjdGl2YXRlOmZ1bmN0aW9uKCl7dmFyIGE9ITE7T3BlbkxheWVycy5IYW5kbGVyLnByb3RvdHlwZS5kZWFjdGl2YXRlLmFwcGx5KHRoaXMsYXJndW1lbnRzKSYmKHRoaXMuY2xlYXJUaW1lcigpLHRoaXMubGFzdD10aGlzLmZpcnN0PXRoaXMuZG93bj1udWxsLGE9ITApO3JldHVybiBhfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkhhbmRsZXIuQ2xpY2sifSk7T3BlbkxheWVycy5IYW5kbGVyLkRyYWc9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkhhbmRsZXIse3N0YXJ0ZWQ6ITEsc3RvcERvd246ITAsZHJhZ2dpbmc6ITEsbGFzdDpudWxsLHN0YXJ0Om51bGwsbGFzdE1vdmVFdnQ6bnVsbCxvbGRPbnNlbGVjdHN0YXJ0Om51bGwsaW50ZXJ2YWw6MCx0aW1lb3V0SWQ6bnVsbCxkb2N1bWVudERyYWc6ITEsZG9jdW1lbnRFdmVudHM6bnVsbCxpbml0aWFsaXplOmZ1bmN0aW9uKGEsYixjKXtPcGVuTGF5ZXJzLkhhbmRsZXIucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxhcmd1bWVudHMpO2lmKCEwPT09dGhpcy5kb2N1bWVudERyYWcpe3ZhciBkPXRoaXM7dGhpcy5fZG9jTW92ZT1mdW5jdGlvbihhKXtkLm1vdXNlbW92ZSh7eHk6e3g6YS5jbGllbnRYLHk6YS5jbGllbnRZfSxlbGVtZW50OmRvY3VtZW50fSl9O3RoaXMuX2RvY1VwPWZ1bmN0aW9uKGEpe2QubW91c2V1cCh7eHk6e3g6YS5jbGllbnRYLHk6YS5jbGllbnRZfX0pfX19LApkcmFnc3RhcnQ6ZnVuY3Rpb24oYSl7dmFyIGI9ITA7dGhpcy5kcmFnZ2luZz0hMTt0aGlzLmNoZWNrTW9kaWZpZXJzKGEpJiYoT3BlbkxheWVycy5FdmVudC5pc0xlZnRDbGljayhhKXx8T3BlbkxheWVycy5FdmVudC5pc1NpbmdsZVRvdWNoKGEpKT8odGhpcy5zdGFydGVkPSEwLHRoaXMubGFzdD10aGlzLnN0YXJ0PWEueHksT3BlbkxheWVycy5FbGVtZW50LmFkZENsYXNzKHRoaXMubWFwLnZpZXdQb3J0RGl2LCJvbERyYWdEb3duIiksdGhpcy5kb3duKGEpLHRoaXMuY2FsbGJhY2soImRvd24iLFthLnh5XSksT3BlbkxheWVycy5FdmVudC5wcmV2ZW50RGVmYXVsdChhKSx0aGlzLm9sZE9uc2VsZWN0c3RhcnR8fCh0aGlzLm9sZE9uc2VsZWN0c3RhcnQ9ZG9jdW1lbnQub25zZWxlY3RzdGFydD9kb2N1bWVudC5vbnNlbGVjdHN0YXJ0Ok9wZW5MYXllcnMuRnVuY3Rpb24uVHJ1ZSksZG9jdW1lbnQub25zZWxlY3RzdGFydD1PcGVuTGF5ZXJzLkZ1bmN0aW9uLkZhbHNlLGI9IXRoaXMuc3RvcERvd24pOgoodGhpcy5zdGFydGVkPSExLHRoaXMubGFzdD10aGlzLnN0YXJ0PW51bGwpO3JldHVybiBifSxkcmFnbW92ZTpmdW5jdGlvbihhKXt0aGlzLmxhc3RNb3ZlRXZ0PWE7IXRoaXMuc3RhcnRlZHx8KHRoaXMudGltZW91dElkfHxhLnh5Lng9PXRoaXMubGFzdC54JiZhLnh5Lnk9PXRoaXMubGFzdC55KXx8KCEwPT09dGhpcy5kb2N1bWVudERyYWcmJnRoaXMuZG9jdW1lbnRFdmVudHMmJihhLmVsZW1lbnQ9PT1kb2N1bWVudD8odGhpcy5hZGp1c3RYWShhKSx0aGlzLnNldEV2ZW50KGEpKTp0aGlzLnJlbW92ZURvY3VtZW50RXZlbnRzKCkpLDA8dGhpcy5pbnRlcnZhbCYmKHRoaXMudGltZW91dElkPXNldFRpbWVvdXQoT3BlbkxheWVycy5GdW5jdGlvbi5iaW5kKHRoaXMucmVtb3ZlVGltZW91dCx0aGlzKSx0aGlzLmludGVydmFsKSksdGhpcy5kcmFnZ2luZz0hMCx0aGlzLm1vdmUoYSksdGhpcy5jYWxsYmFjaygibW92ZSIsW2EueHldKSx0aGlzLm9sZE9uc2VsZWN0c3RhcnR8fCh0aGlzLm9sZE9uc2VsZWN0c3RhcnQ9CmRvY3VtZW50Lm9uc2VsZWN0c3RhcnQsZG9jdW1lbnQub25zZWxlY3RzdGFydD1PcGVuTGF5ZXJzLkZ1bmN0aW9uLkZhbHNlKSx0aGlzLmxhc3Q9YS54eSk7cmV0dXJuITB9LGRyYWdlbmQ6ZnVuY3Rpb24oYSl7aWYodGhpcy5zdGFydGVkKXshMD09PXRoaXMuZG9jdW1lbnREcmFnJiZ0aGlzLmRvY3VtZW50RXZlbnRzJiYodGhpcy5hZGp1c3RYWShhKSx0aGlzLnJlbW92ZURvY3VtZW50RXZlbnRzKCkpO3ZhciBiPXRoaXMuc3RhcnQhPXRoaXMubGFzdDt0aGlzLmRyYWdnaW5nPXRoaXMuc3RhcnRlZD0hMTtPcGVuTGF5ZXJzLkVsZW1lbnQucmVtb3ZlQ2xhc3ModGhpcy5tYXAudmlld1BvcnREaXYsIm9sRHJhZ0Rvd24iKTt0aGlzLnVwKGEpO3RoaXMuY2FsbGJhY2soInVwIixbYS54eV0pO2ImJnRoaXMuY2FsbGJhY2soImRvbmUiLFthLnh5XSk7ZG9jdW1lbnQub25zZWxlY3RzdGFydD10aGlzLm9sZE9uc2VsZWN0c3RhcnR9cmV0dXJuITB9LGRvd246ZnVuY3Rpb24oYSl7fSxtb3ZlOmZ1bmN0aW9uKGEpe30sCnVwOmZ1bmN0aW9uKGEpe30sb3V0OmZ1bmN0aW9uKGEpe30sbW91c2Vkb3duOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmRyYWdzdGFydChhKX0sdG91Y2hzdGFydDpmdW5jdGlvbihhKXt0aGlzLnN0YXJ0VG91Y2goKTtyZXR1cm4gdGhpcy5kcmFnc3RhcnQoYSl9LG1vdXNlbW92ZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5kcmFnbW92ZShhKX0sdG91Y2htb3ZlOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmRyYWdtb3ZlKGEpfSxyZW1vdmVUaW1lb3V0OmZ1bmN0aW9uKCl7dGhpcy50aW1lb3V0SWQ9bnVsbDt0aGlzLmRyYWdnaW5nJiZ0aGlzLm1vdXNlbW92ZSh0aGlzLmxhc3RNb3ZlRXZ0KX0sbW91c2V1cDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5kcmFnZW5kKGEpfSx0b3VjaGVuZDpmdW5jdGlvbihhKXthLnh5PXRoaXMubGFzdDtyZXR1cm4gdGhpcy5kcmFnZW5kKGEpfSxtb3VzZW91dDpmdW5jdGlvbihhKXtpZih0aGlzLnN0YXJ0ZWQmJk9wZW5MYXllcnMuVXRpbC5tb3VzZUxlZnQoYSwKdGhpcy5tYXAudmlld1BvcnREaXYpKWlmKCEwPT09dGhpcy5kb2N1bWVudERyYWcpdGhpcy5hZGREb2N1bWVudEV2ZW50cygpO2Vsc2V7dmFyIGI9dGhpcy5zdGFydCE9dGhpcy5sYXN0O3RoaXMuZHJhZ2dpbmc9dGhpcy5zdGFydGVkPSExO09wZW5MYXllcnMuRWxlbWVudC5yZW1vdmVDbGFzcyh0aGlzLm1hcC52aWV3UG9ydERpdiwib2xEcmFnRG93biIpO3RoaXMub3V0KGEpO3RoaXMuY2FsbGJhY2soIm91dCIsW10pO2ImJnRoaXMuY2FsbGJhY2soImRvbmUiLFthLnh5XSk7ZG9jdW1lbnQub25zZWxlY3RzdGFydCYmKGRvY3VtZW50Lm9uc2VsZWN0c3RhcnQ9dGhpcy5vbGRPbnNlbGVjdHN0YXJ0KX1yZXR1cm4hMH0sY2xpY2s6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuc3RhcnQ9PXRoaXMubGFzdH0sYWN0aXZhdGU6ZnVuY3Rpb24oKXt2YXIgYT0hMTtPcGVuTGF5ZXJzLkhhbmRsZXIucHJvdG90eXBlLmFjdGl2YXRlLmFwcGx5KHRoaXMsYXJndW1lbnRzKSYmKHRoaXMuZHJhZ2dpbmc9CiExLGE9ITApO3JldHVybiBhfSxkZWFjdGl2YXRlOmZ1bmN0aW9uKCl7dmFyIGE9ITE7T3BlbkxheWVycy5IYW5kbGVyLnByb3RvdHlwZS5kZWFjdGl2YXRlLmFwcGx5KHRoaXMsYXJndW1lbnRzKSYmKHRoaXMuZHJhZ2dpbmc9dGhpcy5zdGFydGVkPSExLHRoaXMubGFzdD10aGlzLnN0YXJ0PW51bGwsYT0hMCxPcGVuTGF5ZXJzLkVsZW1lbnQucmVtb3ZlQ2xhc3ModGhpcy5tYXAudmlld1BvcnREaXYsIm9sRHJhZ0Rvd24iKSk7cmV0dXJuIGF9LGFkanVzdFhZOmZ1bmN0aW9uKGEpe3ZhciBiPU9wZW5MYXllcnMuVXRpbC5wYWdlUG9zaXRpb24odGhpcy5tYXAudmlld1BvcnREaXYpO2EueHkueC09YlswXTthLnh5LnktPWJbMV19LGFkZERvY3VtZW50RXZlbnRzOmZ1bmN0aW9uKCl7T3BlbkxheWVycy5FbGVtZW50LmFkZENsYXNzKGRvY3VtZW50LmJvZHksIm9sRHJhZ0Rvd24iKTt0aGlzLmRvY3VtZW50RXZlbnRzPSEwO09wZW5MYXllcnMuRXZlbnQub2JzZXJ2ZShkb2N1bWVudCwibW91c2Vtb3ZlIiwKdGhpcy5fZG9jTW92ZSk7T3BlbkxheWVycy5FdmVudC5vYnNlcnZlKGRvY3VtZW50LCJtb3VzZXVwIix0aGlzLl9kb2NVcCl9LHJlbW92ZURvY3VtZW50RXZlbnRzOmZ1bmN0aW9uKCl7T3BlbkxheWVycy5FbGVtZW50LnJlbW92ZUNsYXNzKGRvY3VtZW50LmJvZHksIm9sRHJhZ0Rvd24iKTt0aGlzLmRvY3VtZW50RXZlbnRzPSExO09wZW5MYXllcnMuRXZlbnQuc3RvcE9ic2VydmluZyhkb2N1bWVudCwibW91c2Vtb3ZlIix0aGlzLl9kb2NNb3ZlKTtPcGVuTGF5ZXJzLkV2ZW50LnN0b3BPYnNlcnZpbmcoZG9jdW1lbnQsIm1vdXNldXAiLHRoaXMuX2RvY1VwKX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5IYW5kbGVyLkRyYWcifSk7T3BlbkxheWVycy5Db250cm9sLk92ZXJ2aWV3TWFwPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Db250cm9sLHtlbGVtZW50Om51bGwsb3ZtYXA6bnVsbCxzaXplOnt3OjE4MCxoOjkwfSxsYXllcnM6bnVsbCxtaW5SZWN0U2l6ZToxNSxtaW5SZWN0RGlzcGxheUNsYXNzOiJSZWN0UmVwbGFjZW1lbnQiLG1pblJhdGlvOjgsbWF4UmF0aW86MzIsbWFwT3B0aW9uczpudWxsLGF1dG9QYW46ITEsaGFuZGxlcnM6bnVsbCxyZXNvbHV0aW9uRmFjdG9yOjEsbWF4aW1pemVkOiExLG1heGltaXplVGl0bGU6IiIsbWluaW1pemVUaXRsZToiIixpbml0aWFsaXplOmZ1bmN0aW9uKGEpe3RoaXMubGF5ZXJzPVtdO3RoaXMuaGFuZGxlcnM9e307T3BlbkxheWVycy5Db250cm9sLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsW2FdKX0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMubWFwRGl2JiYodGhpcy5oYW5kbGVycy5jbGljayYmdGhpcy5oYW5kbGVycy5jbGljay5kZXN0cm95KCksCnRoaXMuaGFuZGxlcnMuZHJhZyYmdGhpcy5oYW5kbGVycy5kcmFnLmRlc3Ryb3koKSx0aGlzLm92bWFwJiZ0aGlzLm92bWFwLnZpZXdQb3J0RGl2LnJlbW92ZUNoaWxkKHRoaXMuZXh0ZW50UmVjdGFuZ2xlKSx0aGlzLmV4dGVudFJlY3RhbmdsZT1udWxsLHRoaXMucmVjdEV2ZW50cyYmKHRoaXMucmVjdEV2ZW50cy5kZXN0cm95KCksdGhpcy5yZWN0RXZlbnRzPW51bGwpLHRoaXMub3ZtYXAmJih0aGlzLm92bWFwLmRlc3Ryb3koKSx0aGlzLm92bWFwPW51bGwpLHRoaXMuZWxlbWVudC5yZW1vdmVDaGlsZCh0aGlzLm1hcERpdiksdGhpcy5tYXBEaXY9bnVsbCx0aGlzLmRpdi5yZW1vdmVDaGlsZCh0aGlzLmVsZW1lbnQpLHRoaXMuZWxlbWVudD1udWxsLHRoaXMubWF4aW1pemVEaXYmJih0aGlzLmRpdi5yZW1vdmVDaGlsZCh0aGlzLm1heGltaXplRGl2KSx0aGlzLm1heGltaXplRGl2PW51bGwpLHRoaXMubWluaW1pemVEaXYmJih0aGlzLmRpdi5yZW1vdmVDaGlsZCh0aGlzLm1pbmltaXplRGl2KSwKdGhpcy5taW5pbWl6ZURpdj1udWxsKSx0aGlzLm1hcC5ldmVudHMudW4oe2J1dHRvbmNsaWNrOnRoaXMub25CdXR0b25DbGljayxtb3ZlZW5kOnRoaXMudXBkYXRlLGNoYW5nZWJhc2VsYXllcjp0aGlzLmJhc2VMYXllckRyYXcsc2NvcGU6dGhpc30pLE9wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuZGVzdHJveS5hcHBseSh0aGlzLGFyZ3VtZW50cykpfSxkcmF3OmZ1bmN0aW9uKCl7T3BlbkxheWVycy5Db250cm9sLnByb3RvdHlwZS5kcmF3LmFwcGx5KHRoaXMsYXJndW1lbnRzKTtpZigwPT09dGhpcy5sYXllcnMubGVuZ3RoKWlmKHRoaXMubWFwLmJhc2VMYXllcil0aGlzLmxheWVycz1bdGhpcy5tYXAuYmFzZUxheWVyLmNsb25lKCldO2Vsc2UgcmV0dXJuIHRoaXMubWFwLmV2ZW50cy5yZWdpc3RlcigiY2hhbmdlYmFzZWxheWVyIix0aGlzLHRoaXMuYmFzZUxheWVyRHJhdyksdGhpcy5kaXY7dGhpcy5lbGVtZW50PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO3RoaXMuZWxlbWVudC5jbGFzc05hbWU9CnRoaXMuZGlzcGxheUNsYXNzKyJFbGVtZW50Ijt0aGlzLmVsZW1lbnQuc3R5bGUuZGlzcGxheT0ibm9uZSI7dGhpcy5tYXBEaXY9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7dGhpcy5tYXBEaXYuc3R5bGUud2lkdGg9dGhpcy5zaXplLncrInB4Ijt0aGlzLm1hcERpdi5zdHlsZS5oZWlnaHQ9dGhpcy5zaXplLmgrInB4Ijt0aGlzLm1hcERpdi5zdHlsZS5wb3NpdGlvbj0icmVsYXRpdmUiO3RoaXMubWFwRGl2LnN0eWxlLm92ZXJmbG93PSJoaWRkZW4iO3RoaXMubWFwRGl2LmlkPU9wZW5MYXllcnMuVXRpbC5jcmVhdGVVbmlxdWVJRCgib3ZlcnZpZXdNYXAiKTt0aGlzLmV4dGVudFJlY3RhbmdsZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTt0aGlzLmV4dGVudFJlY3RhbmdsZS5zdHlsZS5wb3NpdGlvbj0iYWJzb2x1dGUiO3RoaXMuZXh0ZW50UmVjdGFuZ2xlLnN0eWxlLnpJbmRleD0xRTM7dGhpcy5leHRlbnRSZWN0YW5nbGUuY2xhc3NOYW1lPXRoaXMuZGlzcGxheUNsYXNzKwoiRXh0ZW50UmVjdGFuZ2xlIjt0aGlzLmVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5tYXBEaXYpO3RoaXMuZGl2LmFwcGVuZENoaWxkKHRoaXMuZWxlbWVudCk7aWYodGhpcy5vdXRzaWRlVmlld3BvcnQpdGhpcy5lbGVtZW50LnN0eWxlLmRpc3BsYXk9IiI7ZWxzZXt0aGlzLmRpdi5jbGFzc05hbWUrPSIgIit0aGlzLmRpc3BsYXlDbGFzcysiQ29udGFpbmVyIjt2YXIgYT1PcGVuTGF5ZXJzLlV0aWwuZ2V0SW1hZ2VMb2NhdGlvbigibGF5ZXItc3dpdGNoZXItbWF4aW1pemUucG5nIik7dGhpcy5tYXhpbWl6ZURpdj1PcGVuTGF5ZXJzLlV0aWwuY3JlYXRlQWxwaGFJbWFnZURpdih0aGlzLmRpc3BsYXlDbGFzcysiTWF4aW1pemVCdXR0b24iLG51bGwsbnVsbCxhLCJhYnNvbHV0ZSIpO3RoaXMubWF4aW1pemVEaXYuc3R5bGUuZGlzcGxheT0ibm9uZSI7dGhpcy5tYXhpbWl6ZURpdi5jbGFzc05hbWU9dGhpcy5kaXNwbGF5Q2xhc3MrIk1heGltaXplQnV0dG9uIG9sQnV0dG9uIjt0aGlzLm1heGltaXplVGl0bGUmJgoodGhpcy5tYXhpbWl6ZURpdi50aXRsZT10aGlzLm1heGltaXplVGl0bGUpO3RoaXMuZGl2LmFwcGVuZENoaWxkKHRoaXMubWF4aW1pemVEaXYpO2E9T3BlbkxheWVycy5VdGlsLmdldEltYWdlTG9jYXRpb24oImxheWVyLXN3aXRjaGVyLW1pbmltaXplLnBuZyIpO3RoaXMubWluaW1pemVEaXY9T3BlbkxheWVycy5VdGlsLmNyZWF0ZUFscGhhSW1hZ2VEaXYoIk9wZW5MYXllcnNfQ29udHJvbF9taW5pbWl6ZURpdiIsbnVsbCxudWxsLGEsImFic29sdXRlIik7dGhpcy5taW5pbWl6ZURpdi5zdHlsZS5kaXNwbGF5PSJub25lIjt0aGlzLm1pbmltaXplRGl2LmNsYXNzTmFtZT10aGlzLmRpc3BsYXlDbGFzcysiTWluaW1pemVCdXR0b24gb2xCdXR0b24iO3RoaXMubWluaW1pemVUaXRsZSYmKHRoaXMubWluaW1pemVEaXYudGl0bGU9dGhpcy5taW5pbWl6ZVRpdGxlKTt0aGlzLmRpdi5hcHBlbmRDaGlsZCh0aGlzLm1pbmltaXplRGl2KTt0aGlzLm1pbmltaXplQ29udHJvbCgpfXRoaXMubWFwLmdldEV4dGVudCgpJiYKdGhpcy51cGRhdGUoKTt0aGlzLm1hcC5ldmVudHMub24oe2J1dHRvbmNsaWNrOnRoaXMub25CdXR0b25DbGljayxtb3ZlZW5kOnRoaXMudXBkYXRlLHNjb3BlOnRoaXN9KTt0aGlzLm1heGltaXplZCYmdGhpcy5tYXhpbWl6ZUNvbnRyb2woKTtyZXR1cm4gdGhpcy5kaXZ9LGJhc2VMYXllckRyYXc6ZnVuY3Rpb24oKXt0aGlzLmRyYXcoKTt0aGlzLm1hcC5ldmVudHMudW5yZWdpc3RlcigiY2hhbmdlYmFzZWxheWVyIix0aGlzLHRoaXMuYmFzZUxheWVyRHJhdyl9LHJlY3REcmFnOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuaGFuZGxlcnMuZHJhZy5sYXN0LngtYS54LGM9dGhpcy5oYW5kbGVycy5kcmFnLmxhc3QueS1hLnk7aWYoMCE9Ynx8MCE9Yyl7dmFyIGQ9dGhpcy5yZWN0UHhCb3VuZHMudG9wLGU9dGhpcy5yZWN0UHhCb3VuZHMubGVmdDthPU1hdGguYWJzKHRoaXMucmVjdFB4Qm91bmRzLmdldEhlaWdodCgpKTt2YXIgZj10aGlzLnJlY3RQeEJvdW5kcy5nZXRXaWR0aCgpLGM9TWF0aC5tYXgoMCwKZC1jKSxjPU1hdGgubWluKGMsdGhpcy5vdm1hcC5zaXplLmgtdGhpcy5oQ29tcC1hKSxiPU1hdGgubWF4KDAsZS1iKSxiPU1hdGgubWluKGIsdGhpcy5vdm1hcC5zaXplLnctdGhpcy53Q29tcC1mKTt0aGlzLnNldFJlY3RQeEJvdW5kcyhuZXcgT3BlbkxheWVycy5Cb3VuZHMoYixjK2EsYitmLGMpKX19LG1hcERpdkNsaWNrOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMucmVjdFB4Qm91bmRzLmdldENlbnRlclBpeGVsKCksYz1hLnh5LngtYi54LGQ9YS54eS55LWIueSxlPXRoaXMucmVjdFB4Qm91bmRzLnRvcCxmPXRoaXMucmVjdFB4Qm91bmRzLmxlZnQ7YT1NYXRoLmFicyh0aGlzLnJlY3RQeEJvdW5kcy5nZXRIZWlnaHQoKSk7Yj10aGlzLnJlY3RQeEJvdW5kcy5nZXRXaWR0aCgpO2Q9TWF0aC5tYXgoMCxlK2QpO2Q9TWF0aC5taW4oZCx0aGlzLm92bWFwLnNpemUuaC1hKTtjPU1hdGgubWF4KDAsZitjKTtjPU1hdGgubWluKGMsdGhpcy5vdm1hcC5zaXplLnctYik7dGhpcy5zZXRSZWN0UHhCb3VuZHMobmV3IE9wZW5MYXllcnMuQm91bmRzKGMsCmQrYSxjK2IsZCkpO3RoaXMudXBkYXRlTWFwVG9SZWN0KCl9LG9uQnV0dG9uQ2xpY2s6ZnVuY3Rpb24oYSl7YS5idXR0b25FbGVtZW50PT09dGhpcy5taW5pbWl6ZURpdj90aGlzLm1pbmltaXplQ29udHJvbCgpOmEuYnV0dG9uRWxlbWVudD09PXRoaXMubWF4aW1pemVEaXYmJnRoaXMubWF4aW1pemVDb250cm9sKCl9LG1heGltaXplQ29udHJvbDpmdW5jdGlvbihhKXt0aGlzLmVsZW1lbnQuc3R5bGUuZGlzcGxheT0iIjt0aGlzLnNob3dUb2dnbGUoITEpO251bGwhPWEmJk9wZW5MYXllcnMuRXZlbnQuc3RvcChhKX0sbWluaW1pemVDb250cm9sOmZ1bmN0aW9uKGEpe3RoaXMuZWxlbWVudC5zdHlsZS5kaXNwbGF5PSJub25lIjt0aGlzLnNob3dUb2dnbGUoITApO251bGwhPWEmJk9wZW5MYXllcnMuRXZlbnQuc3RvcChhKX0sc2hvd1RvZ2dsZTpmdW5jdGlvbihhKXt0aGlzLm1heGltaXplRGl2JiYodGhpcy5tYXhpbWl6ZURpdi5zdHlsZS5kaXNwbGF5PWE/IiI6Im5vbmUiKTt0aGlzLm1pbmltaXplRGl2JiYKKHRoaXMubWluaW1pemVEaXYuc3R5bGUuZGlzcGxheT1hPyJub25lIjoiIil9LHVwZGF0ZTpmdW5jdGlvbigpe251bGw9PXRoaXMub3ZtYXAmJnRoaXMuY3JlYXRlTWFwKCk7IXRoaXMuYXV0b1BhbiYmdGhpcy5pc1N1aXRhYmxlT3ZlcnZpZXcoKXx8dGhpcy51cGRhdGVPdmVydmlldygpO3RoaXMudXBkYXRlUmVjdFRvTWFwKCl9LGlzU3VpdGFibGVPdmVydmlldzpmdW5jdGlvbigpe3ZhciBhPXRoaXMubWFwLmdldEV4dGVudCgpLGI9dGhpcy5tYXAuZ2V0TWF4RXh0ZW50KCksYT1uZXcgT3BlbkxheWVycy5Cb3VuZHMoTWF0aC5tYXgoYS5sZWZ0LGIubGVmdCksTWF0aC5tYXgoYS5ib3R0b20sYi5ib3R0b20pLE1hdGgubWluKGEucmlnaHQsYi5yaWdodCksTWF0aC5taW4oYS50b3AsYi50b3ApKTt0aGlzLm92bWFwLmdldFByb2plY3Rpb24oKSE9dGhpcy5tYXAuZ2V0UHJvamVjdGlvbigpJiYoYT1hLnRyYW5zZm9ybSh0aGlzLm1hcC5nZXRQcm9qZWN0aW9uT2JqZWN0KCksdGhpcy5vdm1hcC5nZXRQcm9qZWN0aW9uT2JqZWN0KCkpKTsKYj10aGlzLm92bWFwLmdldFJlc29sdXRpb24oKS90aGlzLm1hcC5nZXRSZXNvbHV0aW9uKCk7cmV0dXJuIGI+dGhpcy5taW5SYXRpbyYmYjw9dGhpcy5tYXhSYXRpbyYmdGhpcy5vdm1hcC5nZXRFeHRlbnQoKS5jb250YWluc0JvdW5kcyhhKX0sdXBkYXRlT3ZlcnZpZXc6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm1hcC5nZXRSZXNvbHV0aW9uKCksYj10aGlzLm92bWFwLmdldFJlc29sdXRpb24oKSxjPWIvYTtjPnRoaXMubWF4UmF0aW8/Yj10aGlzLm1pblJhdGlvKmE6Yzw9dGhpcy5taW5SYXRpbyYmKGI9dGhpcy5tYXhSYXRpbyphKTt0aGlzLm92bWFwLmdldFByb2plY3Rpb24oKSE9dGhpcy5tYXAuZ2V0UHJvamVjdGlvbigpPyhhPXRoaXMubWFwLmNlbnRlci5jbG9uZSgpLGEudHJhbnNmb3JtKHRoaXMubWFwLmdldFByb2plY3Rpb25PYmplY3QoKSx0aGlzLm92bWFwLmdldFByb2plY3Rpb25PYmplY3QoKSkpOmE9dGhpcy5tYXAuY2VudGVyO3RoaXMub3ZtYXAuc2V0Q2VudGVyKGEsCnRoaXMub3ZtYXAuZ2V0Wm9vbUZvclJlc29sdXRpb24oYip0aGlzLnJlc29sdXRpb25GYWN0b3IpKTt0aGlzLnVwZGF0ZVJlY3RUb01hcCgpfSxjcmVhdGVNYXA6ZnVuY3Rpb24oKXt2YXIgYT1PcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHtjb250cm9sczpbXSxtYXhSZXNvbHV0aW9uOiJhdXRvIixmYWxsVGhyb3VnaDohMX0sdGhpcy5tYXBPcHRpb25zKTt0aGlzLm92bWFwPW5ldyBPcGVuTGF5ZXJzLk1hcCh0aGlzLm1hcERpdixhKTt0aGlzLm92bWFwLnZpZXdQb3J0RGl2LmFwcGVuZENoaWxkKHRoaXMuZXh0ZW50UmVjdGFuZ2xlKTtPcGVuTGF5ZXJzLkV2ZW50LnN0b3BPYnNlcnZpbmcod2luZG93LCJ1bmxvYWQiLHRoaXMub3ZtYXAudW5sb2FkRGVzdHJveSk7dGhpcy5vdm1hcC5hZGRMYXllcnModGhpcy5sYXllcnMpO3RoaXMub3ZtYXAuem9vbVRvTWF4RXh0ZW50KCk7dGhpcy53Q29tcD0odGhpcy53Q29tcD1wYXJzZUludChPcGVuTGF5ZXJzLkVsZW1lbnQuZ2V0U3R5bGUodGhpcy5leHRlbnRSZWN0YW5nbGUsCiJib3JkZXItbGVmdC13aWR0aCIpKStwYXJzZUludChPcGVuTGF5ZXJzLkVsZW1lbnQuZ2V0U3R5bGUodGhpcy5leHRlbnRSZWN0YW5nbGUsImJvcmRlci1yaWdodC13aWR0aCIpKSk/dGhpcy53Q29tcDoyO3RoaXMuaENvbXA9KHRoaXMuaENvbXA9cGFyc2VJbnQoT3BlbkxheWVycy5FbGVtZW50LmdldFN0eWxlKHRoaXMuZXh0ZW50UmVjdGFuZ2xlLCJib3JkZXItdG9wLXdpZHRoIikpK3BhcnNlSW50KE9wZW5MYXllcnMuRWxlbWVudC5nZXRTdHlsZSh0aGlzLmV4dGVudFJlY3RhbmdsZSwiYm9yZGVyLWJvdHRvbS13aWR0aCIpKSk/dGhpcy5oQ29tcDoyO3RoaXMuaGFuZGxlcnMuZHJhZz1uZXcgT3BlbkxheWVycy5IYW5kbGVyLkRyYWcodGhpcyx7bW92ZTp0aGlzLnJlY3REcmFnLGRvbmU6dGhpcy51cGRhdGVNYXBUb1JlY3R9LHttYXA6dGhpcy5vdm1hcH0pO3RoaXMuaGFuZGxlcnMuY2xpY2s9bmV3IE9wZW5MYXllcnMuSGFuZGxlci5DbGljayh0aGlzLHtjbGljazp0aGlzLm1hcERpdkNsaWNrfSwKe3NpbmdsZTohMCwiZG91YmxlIjohMSxzdG9wU2luZ2xlOiEwLHN0b3BEb3VibGU6ITAscGl4ZWxUb2xlcmFuY2U6MSxtYXA6dGhpcy5vdm1hcH0pO3RoaXMuaGFuZGxlcnMuY2xpY2suYWN0aXZhdGUoKTt0aGlzLnJlY3RFdmVudHM9bmV3IE9wZW5MYXllcnMuRXZlbnRzKHRoaXMsdGhpcy5leHRlbnRSZWN0YW5nbGUsbnVsbCwhMCk7dGhpcy5yZWN0RXZlbnRzLnJlZ2lzdGVyKCJtb3VzZW92ZXIiLHRoaXMsZnVuY3Rpb24oYSl7dGhpcy5oYW5kbGVycy5kcmFnLmFjdGl2ZXx8dGhpcy5tYXAuZHJhZ2dpbmd8fHRoaXMuaGFuZGxlcnMuZHJhZy5hY3RpdmF0ZSgpfSk7dGhpcy5yZWN0RXZlbnRzLnJlZ2lzdGVyKCJtb3VzZW91dCIsdGhpcyxmdW5jdGlvbihhKXt0aGlzLmhhbmRsZXJzLmRyYWcuZHJhZ2dpbmd8fHRoaXMuaGFuZGxlcnMuZHJhZy5kZWFjdGl2YXRlKCl9KTtpZih0aGlzLm92bWFwLmdldFByb2plY3Rpb24oKSE9dGhpcy5tYXAuZ2V0UHJvamVjdGlvbigpKXt2YXIgYT10aGlzLm1hcC5nZXRQcm9qZWN0aW9uT2JqZWN0KCkuZ2V0VW5pdHMoKXx8CnRoaXMubWFwLnVuaXRzfHx0aGlzLm1hcC5iYXNlTGF5ZXIudW5pdHMsYj10aGlzLm92bWFwLmdldFByb2plY3Rpb25PYmplY3QoKS5nZXRVbml0cygpfHx0aGlzLm92bWFwLnVuaXRzfHx0aGlzLm92bWFwLmJhc2VMYXllci51bml0czt0aGlzLnJlc29sdXRpb25GYWN0b3I9YSYmYj9PcGVuTGF5ZXJzLklOQ0hFU19QRVJfVU5JVFthXS9PcGVuTGF5ZXJzLklOQ0hFU19QRVJfVU5JVFtiXToxfX0sdXBkYXRlUmVjdFRvTWFwOmZ1bmN0aW9uKCl7dmFyIGE7YT10aGlzLm92bWFwLmdldFByb2plY3Rpb24oKSE9dGhpcy5tYXAuZ2V0UHJvamVjdGlvbigpP3RoaXMubWFwLmdldEV4dGVudCgpLnRyYW5zZm9ybSh0aGlzLm1hcC5nZXRQcm9qZWN0aW9uT2JqZWN0KCksdGhpcy5vdm1hcC5nZXRQcm9qZWN0aW9uT2JqZWN0KCkpOnRoaXMubWFwLmdldEV4dGVudCgpOyhhPXRoaXMuZ2V0UmVjdEJvdW5kc0Zyb21NYXBCb3VuZHMoYSkpJiZ0aGlzLnNldFJlY3RQeEJvdW5kcyhhKX0sdXBkYXRlTWFwVG9SZWN0OmZ1bmN0aW9uKCl7dmFyIGE9CnRoaXMuZ2V0TWFwQm91bmRzRnJvbVJlY3RCb3VuZHModGhpcy5yZWN0UHhCb3VuZHMpO3RoaXMub3ZtYXAuZ2V0UHJvamVjdGlvbigpIT10aGlzLm1hcC5nZXRQcm9qZWN0aW9uKCkmJihhPWEudHJhbnNmb3JtKHRoaXMub3ZtYXAuZ2V0UHJvamVjdGlvbk9iamVjdCgpLHRoaXMubWFwLmdldFByb2plY3Rpb25PYmplY3QoKSkpO3RoaXMubWFwLnBhblRvKGEuZ2V0Q2VudGVyTG9uTGF0KCkpfSxzZXRSZWN0UHhCb3VuZHM6ZnVuY3Rpb24oYSl7dmFyIGI9TWF0aC5tYXgoYS50b3AsMCksYz1NYXRoLm1heChhLmxlZnQsMCksZD1NYXRoLm1pbihhLnRvcCtNYXRoLmFicyhhLmdldEhlaWdodCgpKSx0aGlzLm92bWFwLnNpemUuaC10aGlzLmhDb21wKTthPU1hdGgubWluKGEubGVmdCthLmdldFdpZHRoKCksdGhpcy5vdm1hcC5zaXplLnctdGhpcy53Q29tcCk7dmFyIGU9TWF0aC5tYXgoYS1jLDApLGY9TWF0aC5tYXgoZC1iLDApO2U8dGhpcy5taW5SZWN0U2l6ZXx8Zjx0aGlzLm1pblJlY3RTaXplPwoodGhpcy5leHRlbnRSZWN0YW5nbGUuY2xhc3NOYW1lPXRoaXMuZGlzcGxheUNsYXNzK3RoaXMubWluUmVjdERpc3BsYXlDbGFzcyxlPWMrZS8yLXRoaXMubWluUmVjdFNpemUvMix0aGlzLmV4dGVudFJlY3RhbmdsZS5zdHlsZS50b3A9TWF0aC5yb3VuZChiK2YvMi10aGlzLm1pblJlY3RTaXplLzIpKyJweCIsdGhpcy5leHRlbnRSZWN0YW5nbGUuc3R5bGUubGVmdD1NYXRoLnJvdW5kKGUpKyJweCIsdGhpcy5leHRlbnRSZWN0YW5nbGUuc3R5bGUuaGVpZ2h0PXRoaXMubWluUmVjdFNpemUrInB4Iix0aGlzLmV4dGVudFJlY3RhbmdsZS5zdHlsZS53aWR0aD10aGlzLm1pblJlY3RTaXplKyJweCIpOih0aGlzLmV4dGVudFJlY3RhbmdsZS5jbGFzc05hbWU9dGhpcy5kaXNwbGF5Q2xhc3MrIkV4dGVudFJlY3RhbmdsZSIsdGhpcy5leHRlbnRSZWN0YW5nbGUuc3R5bGUudG9wPU1hdGgucm91bmQoYikrInB4Iix0aGlzLmV4dGVudFJlY3RhbmdsZS5zdHlsZS5sZWZ0PU1hdGgucm91bmQoYykrCiJweCIsdGhpcy5leHRlbnRSZWN0YW5nbGUuc3R5bGUuaGVpZ2h0PU1hdGgucm91bmQoZikrInB4Iix0aGlzLmV4dGVudFJlY3RhbmdsZS5zdHlsZS53aWR0aD1NYXRoLnJvdW5kKGUpKyJweCIpO3RoaXMucmVjdFB4Qm91bmRzPW5ldyBPcGVuTGF5ZXJzLkJvdW5kcyhNYXRoLnJvdW5kKGMpLE1hdGgucm91bmQoZCksTWF0aC5yb3VuZChhKSxNYXRoLnJvdW5kKGIpKX0sZ2V0UmVjdEJvdW5kc0Zyb21NYXBCb3VuZHM6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5nZXRPdmVydmlld1B4RnJvbUxvbkxhdCh7bG9uOmEubGVmdCxsYXQ6YS5ib3R0b219KTthPXRoaXMuZ2V0T3ZlcnZpZXdQeEZyb21Mb25MYXQoe2xvbjphLnJpZ2h0LGxhdDphLnRvcH0pO3ZhciBjPW51bGw7YiYmYSYmKGM9bmV3IE9wZW5MYXllcnMuQm91bmRzKGIueCxiLnksYS54LGEueSkpO3JldHVybiBjfSxnZXRNYXBCb3VuZHNGcm9tUmVjdEJvdW5kczpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmdldExvbkxhdEZyb21PdmVydmlld1B4KHt4OmEubGVmdCwKeTphLmJvdHRvbX0pO2E9dGhpcy5nZXRMb25MYXRGcm9tT3ZlcnZpZXdQeCh7eDphLnJpZ2h0LHk6YS50b3B9KTtyZXR1cm4gbmV3IE9wZW5MYXllcnMuQm91bmRzKGIubG9uLGIubGF0LGEubG9uLGEubGF0KX0sZ2V0TG9uTGF0RnJvbU92ZXJ2aWV3UHg6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5vdm1hcC5zaXplLGM9dGhpcy5vdm1hcC5nZXRSZXNvbHV0aW9uKCksZD10aGlzLm92bWFwLmdldEV4dGVudCgpLmdldENlbnRlckxvbkxhdCgpO3JldHVybntsb246ZC5sb24rKGEueC1iLncvMikqYyxsYXQ6ZC5sYXQtKGEueS1iLmgvMikqY319LGdldE92ZXJ2aWV3UHhGcm9tTG9uTGF0OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMub3ZtYXAuZ2V0UmVzb2x1dGlvbigpLGM9dGhpcy5vdm1hcC5nZXRFeHRlbnQoKTtpZihjKXJldHVybnt4Ok1hdGgucm91bmQoMS9iKihhLmxvbi1jLmxlZnQpKSx5Ok1hdGgucm91bmQoMS9iKihjLnRvcC1hLmxhdCkpfX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Db250cm9sLk92ZXJ2aWV3TWFwIn0pO09wZW5MYXllcnMuTGF5ZXI9T3BlbkxheWVycy5DbGFzcyh7aWQ6bnVsbCxuYW1lOm51bGwsZGl2Om51bGwsb3BhY2l0eToxLGFsd2F5c0luUmFuZ2U6bnVsbCxSRVNPTFVUSU9OX1BST1BFUlRJRVM6InNjYWxlcyByZXNvbHV0aW9ucyBtYXhTY2FsZSBtaW5TY2FsZSBtYXhSZXNvbHV0aW9uIG1pblJlc29sdXRpb24gbnVtWm9vbUxldmVscyBtYXhab29tTGV2ZWwiLnNwbGl0KCIgIiksZXZlbnRzOm51bGwsbWFwOm51bGwsaXNCYXNlTGF5ZXI6ITEsYWxwaGE6ITEsZGlzcGxheUluTGF5ZXJTd2l0Y2hlcjohMCx2aXNpYmlsaXR5OiEwLGF0dHJpYnV0aW9uOm51bGwsaW5SYW5nZTohMSxpbWFnZVNpemU6bnVsbCxvcHRpb25zOm51bGwsZXZlbnRMaXN0ZW5lcnM6bnVsbCxndXR0ZXI6MCxwcm9qZWN0aW9uOm51bGwsdW5pdHM6bnVsbCxzY2FsZXM6bnVsbCxyZXNvbHV0aW9uczpudWxsLG1heEV4dGVudDpudWxsLG1pbkV4dGVudDpudWxsLG1heFJlc29sdXRpb246bnVsbCxtaW5SZXNvbHV0aW9uOm51bGwsCm51bVpvb21MZXZlbHM6bnVsbCxtaW5TY2FsZTpudWxsLG1heFNjYWxlOm51bGwsZGlzcGxheU91dHNpZGVNYXhFeHRlbnQ6ITEsd3JhcERhdGVMaW5lOiExLG1ldGFkYXRhOm51bGwsaW5pdGlhbGl6ZTpmdW5jdGlvbihhLGIpe3RoaXMubWV0YWRhdGE9e307Yj1PcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHt9LGIpO251bGwhPXRoaXMuYWx3YXlzSW5SYW5nZSYmKGIuYWx3YXlzSW5SYW5nZT10aGlzLmFsd2F5c0luUmFuZ2UpO3RoaXMuYWRkT3B0aW9ucyhiKTt0aGlzLm5hbWU9YTtpZihudWxsPT10aGlzLmlkJiYodGhpcy5pZD1PcGVuTGF5ZXJzLlV0aWwuY3JlYXRlVW5pcXVlSUQodGhpcy5DTEFTU19OQU1FKyJfIiksdGhpcy5kaXY9T3BlbkxheWVycy5VdGlsLmNyZWF0ZURpdih0aGlzLmlkKSx0aGlzLmRpdi5zdHlsZS53aWR0aD0iMTAwJSIsdGhpcy5kaXYuc3R5bGUuaGVpZ2h0PSIxMDAlIix0aGlzLmRpdi5kaXI9Imx0ciIsdGhpcy5ldmVudHM9bmV3IE9wZW5MYXllcnMuRXZlbnRzKHRoaXMsCnRoaXMuZGl2KSx0aGlzLmV2ZW50TGlzdGVuZXJzIGluc3RhbmNlb2YgT2JqZWN0KSl0aGlzLmV2ZW50cy5vbih0aGlzLmV2ZW50TGlzdGVuZXJzKX0sZGVzdHJveTpmdW5jdGlvbihhKXtudWxsPT1hJiYoYT0hMCk7bnVsbCE9dGhpcy5tYXAmJnRoaXMubWFwLnJlbW92ZUxheWVyKHRoaXMsYSk7dGhpcy5vcHRpb25zPXRoaXMuZGl2PXRoaXMubmFtZT10aGlzLm1hcD10aGlzLnByb2plY3Rpb249bnVsbDt0aGlzLmV2ZW50cyYmKHRoaXMuZXZlbnRMaXN0ZW5lcnMmJnRoaXMuZXZlbnRzLnVuKHRoaXMuZXZlbnRMaXN0ZW5lcnMpLHRoaXMuZXZlbnRzLmRlc3Ryb3koKSk7dGhpcy5ldmVudHM9dGhpcy5ldmVudExpc3RlbmVycz1udWxsfSxjbG9uZTpmdW5jdGlvbihhKXtudWxsPT1hJiYoYT1uZXcgT3BlbkxheWVycy5MYXllcih0aGlzLm5hbWUsdGhpcy5nZXRPcHRpb25zKCkpKTtPcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyhhLHRoaXMpO2EubWFwPW51bGw7cmV0dXJuIGF9LApnZXRPcHRpb25zOmZ1bmN0aW9uKCl7dmFyIGE9e30sYjtmb3IoYiBpbiB0aGlzLm9wdGlvbnMpYVtiXT10aGlzW2JdO3JldHVybiBhfSxzZXROYW1lOmZ1bmN0aW9uKGEpe2EhPXRoaXMubmFtZSYmKHRoaXMubmFtZT1hLG51bGwhPXRoaXMubWFwJiZ0aGlzLm1hcC5ldmVudHMudHJpZ2dlckV2ZW50KCJjaGFuZ2VsYXllciIse2xheWVyOnRoaXMscHJvcGVydHk6Im5hbWUifSkpfSxhZGRPcHRpb25zOmZ1bmN0aW9uKGEsYil7bnVsbD09dGhpcy5vcHRpb25zJiYodGhpcy5vcHRpb25zPXt9KTthJiYoInN0cmluZyI9PXR5cGVvZiBhLnByb2plY3Rpb24mJihhLnByb2plY3Rpb249bmV3IE9wZW5MYXllcnMuUHJvamVjdGlvbihhLnByb2plY3Rpb24pKSxhLnByb2plY3Rpb24mJk9wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKGEsT3BlbkxheWVycy5Qcm9qZWN0aW9uLmRlZmF1bHRzW2EucHJvamVjdGlvbi5nZXRDb2RlKCldKSwhYS5tYXhFeHRlbnR8fGEubWF4RXh0ZW50IGluc3RhbmNlb2YKT3BlbkxheWVycy5Cb3VuZHN8fChhLm1heEV4dGVudD1uZXcgT3BlbkxheWVycy5Cb3VuZHMoYS5tYXhFeHRlbnQpKSwhYS5taW5FeHRlbnR8fGEubWluRXh0ZW50IGluc3RhbmNlb2YgT3BlbkxheWVycy5Cb3VuZHN8fChhLm1pbkV4dGVudD1uZXcgT3BlbkxheWVycy5Cb3VuZHMoYS5taW5FeHRlbnQpKSk7T3BlbkxheWVycy5VdGlsLmV4dGVuZCh0aGlzLm9wdGlvbnMsYSk7T3BlbkxheWVycy5VdGlsLmV4dGVuZCh0aGlzLGEpO3RoaXMucHJvamVjdGlvbiYmdGhpcy5wcm9qZWN0aW9uLmdldFVuaXRzKCkmJih0aGlzLnVuaXRzPXRoaXMucHJvamVjdGlvbi5nZXRVbml0cygpKTtpZih0aGlzLm1hcCl7dmFyIGM9dGhpcy5tYXAuZ2V0UmVzb2x1dGlvbigpLGQ9dGhpcy5SRVNPTFVUSU9OX1BST1BFUlRJRVMuY29uY2F0KFsicHJvamVjdGlvbiIsInVuaXRzIiwibWluRXh0ZW50IiwibWF4RXh0ZW50Il0pLGU7Zm9yKGUgaW4gYSlpZihhLmhhc093blByb3BlcnR5KGUpJiYwPD1PcGVuTGF5ZXJzLlV0aWwuaW5kZXhPZihkLAplKSl7dGhpcy5pbml0UmVzb2x1dGlvbnMoKTtiJiZ0aGlzLm1hcC5iYXNlTGF5ZXI9PT10aGlzJiYodGhpcy5tYXAuc2V0Q2VudGVyKHRoaXMubWFwLmdldENlbnRlcigpLHRoaXMubWFwLmdldFpvb21Gb3JSZXNvbHV0aW9uKGMpLCExLCEwKSx0aGlzLm1hcC5ldmVudHMudHJpZ2dlckV2ZW50KCJjaGFuZ2ViYXNlbGF5ZXIiLHtsYXllcjp0aGlzfSkpO2JyZWFrfX19LG9uTWFwUmVzaXplOmZ1bmN0aW9uKCl7fSxyZWRyYXc6ZnVuY3Rpb24oKXt2YXIgYT0hMTtpZih0aGlzLm1hcCl7dGhpcy5pblJhbmdlPXRoaXMuY2FsY3VsYXRlSW5SYW5nZSgpO3ZhciBiPXRoaXMuZ2V0RXh0ZW50KCk7YiYmKHRoaXMuaW5SYW5nZSYmdGhpcy52aXNpYmlsaXR5KSYmKHRoaXMubW92ZVRvKGIsITAsITEpLHRoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgibW92ZWVuZCIse3pvb21DaGFuZ2VkOiEwfSksYT0hMCl9cmV0dXJuIGF9LG1vdmVUbzpmdW5jdGlvbihhLGIsYyl7YT10aGlzLnZpc2liaWxpdHk7CnRoaXMuaXNCYXNlTGF5ZXJ8fChhPWEmJnRoaXMuaW5SYW5nZSk7dGhpcy5kaXNwbGF5KGEpfSxtb3ZlQnlQeDpmdW5jdGlvbihhLGIpe30sc2V0TWFwOmZ1bmN0aW9uKGEpe251bGw9PXRoaXMubWFwJiYodGhpcy5tYXA9YSx0aGlzLm1heEV4dGVudD10aGlzLm1heEV4dGVudHx8dGhpcy5tYXAubWF4RXh0ZW50LHRoaXMubWluRXh0ZW50PXRoaXMubWluRXh0ZW50fHx0aGlzLm1hcC5taW5FeHRlbnQsdGhpcy5wcm9qZWN0aW9uPXRoaXMucHJvamVjdGlvbnx8dGhpcy5tYXAucHJvamVjdGlvbiwic3RyaW5nIj09dHlwZW9mIHRoaXMucHJvamVjdGlvbiYmKHRoaXMucHJvamVjdGlvbj1uZXcgT3BlbkxheWVycy5Qcm9qZWN0aW9uKHRoaXMucHJvamVjdGlvbikpLHRoaXMudW5pdHM9dGhpcy5wcm9qZWN0aW9uLmdldFVuaXRzKCl8fHRoaXMudW5pdHN8fHRoaXMubWFwLnVuaXRzLHRoaXMuaW5pdFJlc29sdXRpb25zKCksdGhpcy5pc0Jhc2VMYXllcnx8KHRoaXMuaW5SYW5nZT10aGlzLmNhbGN1bGF0ZUluUmFuZ2UoKSwKdGhpcy5kaXYuc3R5bGUuZGlzcGxheT10aGlzLnZpc2liaWxpdHkmJnRoaXMuaW5SYW5nZT8iIjoibm9uZSIpLHRoaXMuc2V0VGlsZVNpemUoKSl9LGFmdGVyQWRkOmZ1bmN0aW9uKCl7fSxyZW1vdmVNYXA6ZnVuY3Rpb24oYSl7fSxnZXRJbWFnZVNpemU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuaW1hZ2VTaXplfHx0aGlzLnRpbGVTaXplfSxzZXRUaWxlU2l6ZTpmdW5jdGlvbihhKXt0aGlzLnRpbGVTaXplPWE9YT9hOnRoaXMudGlsZVNpemU/dGhpcy50aWxlU2l6ZTp0aGlzLm1hcC5nZXRUaWxlU2l6ZSgpO3RoaXMuZ3V0dGVyJiYodGhpcy5pbWFnZVNpemU9bmV3IE9wZW5MYXllcnMuU2l6ZShhLncrMip0aGlzLmd1dHRlcixhLmgrMip0aGlzLmd1dHRlcikpfSxnZXRWaXNpYmlsaXR5OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudmlzaWJpbGl0eX0sc2V0VmlzaWJpbGl0eTpmdW5jdGlvbihhKXthIT10aGlzLnZpc2liaWxpdHkmJih0aGlzLnZpc2liaWxpdHk9YSx0aGlzLmRpc3BsYXkoYSksCnRoaXMucmVkcmF3KCksbnVsbCE9dGhpcy5tYXAmJnRoaXMubWFwLmV2ZW50cy50cmlnZ2VyRXZlbnQoImNoYW5nZWxheWVyIix7bGF5ZXI6dGhpcyxwcm9wZXJ0eToidmlzaWJpbGl0eSJ9KSx0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoInZpc2liaWxpdHljaGFuZ2VkIikpfSxkaXNwbGF5OmZ1bmN0aW9uKGEpe2EhPSgibm9uZSIhPXRoaXMuZGl2LnN0eWxlLmRpc3BsYXkpJiYodGhpcy5kaXYuc3R5bGUuZGlzcGxheT1hJiZ0aGlzLmNhbGN1bGF0ZUluUmFuZ2UoKT8iYmxvY2siOiJub25lIil9LGNhbGN1bGF0ZUluUmFuZ2U6ZnVuY3Rpb24oKXt2YXIgYT0hMTt0aGlzLmFsd2F5c0luUmFuZ2U/YT0hMDp0aGlzLm1hcCYmKGE9dGhpcy5tYXAuZ2V0UmVzb2x1dGlvbigpLGE9YT49dGhpcy5taW5SZXNvbHV0aW9uJiZhPD10aGlzLm1heFJlc29sdXRpb24pO3JldHVybiBhfSxzZXRJc0Jhc2VMYXllcjpmdW5jdGlvbihhKXthIT10aGlzLmlzQmFzZUxheWVyJiYodGhpcy5pc0Jhc2VMYXllcj0KYSxudWxsIT10aGlzLm1hcCYmdGhpcy5tYXAuZXZlbnRzLnRyaWdnZXJFdmVudCgiY2hhbmdlYmFzZWxheWVyIix7bGF5ZXI6dGhpc30pKX0saW5pdFJlc29sdXRpb25zOmZ1bmN0aW9uKCl7dmFyIGEsYixjLGQ9e30sZT0hMDthPTA7Zm9yKGI9dGhpcy5SRVNPTFVUSU9OX1BST1BFUlRJRVMubGVuZ3RoO2E8YjthKyspYz10aGlzLlJFU09MVVRJT05fUFJPUEVSVElFU1thXSxkW2NdPXRoaXMub3B0aW9uc1tjXSxlJiZ0aGlzLm9wdGlvbnNbY10mJihlPSExKTtudWxsPT10aGlzLm9wdGlvbnMuYWx3YXlzSW5SYW5nZSYmKHRoaXMuYWx3YXlzSW5SYW5nZT1lKTtudWxsPT1kLnJlc29sdXRpb25zJiYoZC5yZXNvbHV0aW9ucz10aGlzLnJlc29sdXRpb25zRnJvbVNjYWxlcyhkLnNjYWxlcykpO251bGw9PWQucmVzb2x1dGlvbnMmJihkLnJlc29sdXRpb25zPXRoaXMuY2FsY3VsYXRlUmVzb2x1dGlvbnMoZCkpO2lmKG51bGw9PWQucmVzb2x1dGlvbnMpe2E9MDtmb3IoYj10aGlzLlJFU09MVVRJT05fUFJPUEVSVElFUy5sZW5ndGg7YTwKYjthKyspYz10aGlzLlJFU09MVVRJT05fUFJPUEVSVElFU1thXSxkW2NdPW51bGwhPXRoaXMub3B0aW9uc1tjXT90aGlzLm9wdGlvbnNbY106dGhpcy5tYXBbY107bnVsbD09ZC5yZXNvbHV0aW9ucyYmKGQucmVzb2x1dGlvbnM9dGhpcy5yZXNvbHV0aW9uc0Zyb21TY2FsZXMoZC5zY2FsZXMpKTtudWxsPT1kLnJlc29sdXRpb25zJiYoZC5yZXNvbHV0aW9ucz10aGlzLmNhbGN1bGF0ZVJlc29sdXRpb25zKGQpKX12YXIgZjt0aGlzLm9wdGlvbnMubWF4UmVzb2x1dGlvbiYmImF1dG8iIT09dGhpcy5vcHRpb25zLm1heFJlc29sdXRpb24mJihmPXRoaXMub3B0aW9ucy5tYXhSZXNvbHV0aW9uKTt0aGlzLm9wdGlvbnMubWluU2NhbGUmJihmPU9wZW5MYXllcnMuVXRpbC5nZXRSZXNvbHV0aW9uRnJvbVNjYWxlKHRoaXMub3B0aW9ucy5taW5TY2FsZSx0aGlzLnVuaXRzKSk7dmFyIGc7dGhpcy5vcHRpb25zLm1pblJlc29sdXRpb24mJiJhdXRvIiE9PXRoaXMub3B0aW9ucy5taW5SZXNvbHV0aW9uJiYKKGc9dGhpcy5vcHRpb25zLm1pblJlc29sdXRpb24pO3RoaXMub3B0aW9ucy5tYXhTY2FsZSYmKGc9T3BlbkxheWVycy5VdGlsLmdldFJlc29sdXRpb25Gcm9tU2NhbGUodGhpcy5vcHRpb25zLm1heFNjYWxlLHRoaXMudW5pdHMpKTtkLnJlc29sdXRpb25zJiYoZC5yZXNvbHV0aW9ucy5zb3J0KGZ1bmN0aW9uKGEsYil7cmV0dXJuIGItYX0pLGZ8fChmPWQucmVzb2x1dGlvbnNbMF0pLGd8fChnPWQucmVzb2x1dGlvbnNbZC5yZXNvbHV0aW9ucy5sZW5ndGgtMV0pKTtpZih0aGlzLnJlc29sdXRpb25zPWQucmVzb2x1dGlvbnMpe2I9dGhpcy5yZXNvbHV0aW9ucy5sZW5ndGg7dGhpcy5zY2FsZXM9QXJyYXkoYik7Zm9yKGE9MDthPGI7YSsrKXRoaXMuc2NhbGVzW2FdPU9wZW5MYXllcnMuVXRpbC5nZXRTY2FsZUZyb21SZXNvbHV0aW9uKHRoaXMucmVzb2x1dGlvbnNbYV0sdGhpcy51bml0cyk7dGhpcy5udW1ab29tTGV2ZWxzPWJ9aWYodGhpcy5taW5SZXNvbHV0aW9uPWcpdGhpcy5tYXhTY2FsZT0KT3BlbkxheWVycy5VdGlsLmdldFNjYWxlRnJvbVJlc29sdXRpb24oZyx0aGlzLnVuaXRzKTtpZih0aGlzLm1heFJlc29sdXRpb249Zil0aGlzLm1pblNjYWxlPU9wZW5MYXllcnMuVXRpbC5nZXRTY2FsZUZyb21SZXNvbHV0aW9uKGYsdGhpcy51bml0cyl9LHJlc29sdXRpb25zRnJvbVNjYWxlczpmdW5jdGlvbihhKXtpZihudWxsIT1hKXt2YXIgYixjLGQ7ZD1hLmxlbmd0aDtiPUFycmF5KGQpO2ZvcihjPTA7YzxkO2MrKyliW2NdPU9wZW5MYXllcnMuVXRpbC5nZXRSZXNvbHV0aW9uRnJvbVNjYWxlKGFbY10sdGhpcy51bml0cyk7cmV0dXJuIGJ9fSxjYWxjdWxhdGVSZXNvbHV0aW9uczpmdW5jdGlvbihhKXt2YXIgYixjLGQ9YS5tYXhSZXNvbHV0aW9uO251bGwhPWEubWluU2NhbGU/ZD1PcGVuTGF5ZXJzLlV0aWwuZ2V0UmVzb2x1dGlvbkZyb21TY2FsZShhLm1pblNjYWxlLHRoaXMudW5pdHMpOiJhdXRvIj09ZCYmbnVsbCE9dGhpcy5tYXhFeHRlbnQmJihiPXRoaXMubWFwLmdldFNpemUoKSwKYz10aGlzLm1heEV4dGVudC5nZXRXaWR0aCgpL2IudyxiPXRoaXMubWF4RXh0ZW50LmdldEhlaWdodCgpL2IuaCxkPU1hdGgubWF4KGMsYikpO2M9YS5taW5SZXNvbHV0aW9uO251bGwhPWEubWF4U2NhbGU/Yz1PcGVuTGF5ZXJzLlV0aWwuZ2V0UmVzb2x1dGlvbkZyb21TY2FsZShhLm1heFNjYWxlLHRoaXMudW5pdHMpOiJhdXRvIj09YS5taW5SZXNvbHV0aW9uJiZudWxsIT10aGlzLm1pbkV4dGVudCYmKGI9dGhpcy5tYXAuZ2V0U2l6ZSgpLGM9dGhpcy5taW5FeHRlbnQuZ2V0V2lkdGgoKS9iLncsYj10aGlzLm1pbkV4dGVudC5nZXRIZWlnaHQoKS9iLmgsYz1NYXRoLm1heChjLGIpKTsibnVtYmVyIiE9PXR5cGVvZiBkJiYoIm51bWJlciIhPT10eXBlb2YgYyYmbnVsbCE9dGhpcy5tYXhFeHRlbnQpJiYoZD10aGlzLm1hcC5nZXRUaWxlU2l6ZSgpLGQ9TWF0aC5tYXgodGhpcy5tYXhFeHRlbnQuZ2V0V2lkdGgoKS9kLncsdGhpcy5tYXhFeHRlbnQuZ2V0SGVpZ2h0KCkvZC5oKSk7Yj1hLm1heFpvb21MZXZlbDsKYT1hLm51bVpvb21MZXZlbHM7Im51bWJlciI9PT10eXBlb2YgYyYmIm51bWJlciI9PT10eXBlb2YgZCYmdm9pZCAwPT09YT9hPU1hdGguZmxvb3IoTWF0aC5sb2coZC9jKS9NYXRoLmxvZygyKSkrMTp2b2lkIDA9PT1hJiZudWxsIT1iJiYoYT1iKzEpO2lmKCEoIm51bWJlciIhPT10eXBlb2YgYXx8MD49YXx8Im51bWJlciIhPT10eXBlb2YgZCYmIm51bWJlciIhPT10eXBlb2YgYykpe2I9QXJyYXkoYSk7dmFyIGU9MjsibnVtYmVyIj09dHlwZW9mIGMmJiJudW1iZXIiPT10eXBlb2YgZCYmKGU9TWF0aC5wb3coZC9jLDEvKGEtMSkpKTt2YXIgZjtpZigibnVtYmVyIj09PXR5cGVvZiBkKWZvcihmPTA7ZjxhO2YrKyliW2ZdPWQvTWF0aC5wb3coZSxmKTtlbHNlIGZvcihmPTA7ZjxhO2YrKyliW2EtMS1mXT1jKk1hdGgucG93KGUsZik7cmV0dXJuIGJ9fSxnZXRSZXNvbHV0aW9uOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5tYXAuZ2V0Wm9vbSgpO3JldHVybiB0aGlzLmdldFJlc29sdXRpb25Gb3Jab29tKGEpfSwKZ2V0RXh0ZW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWFwLmNhbGN1bGF0ZUJvdW5kcygpfSxnZXRab29tRm9yRXh0ZW50OmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5tYXAuZ2V0U2l6ZSgpLGM9TWF0aC5tYXgoYS5nZXRXaWR0aCgpL2MudyxhLmdldEhlaWdodCgpL2MuaCk7cmV0dXJuIHRoaXMuZ2V0Wm9vbUZvclJlc29sdXRpb24oYyxiKX0sZ2V0RGF0YUV4dGVudDpmdW5jdGlvbigpe30sZ2V0UmVzb2x1dGlvbkZvclpvb206ZnVuY3Rpb24oYSl7YT1NYXRoLm1heCgwLE1hdGgubWluKGEsdGhpcy5yZXNvbHV0aW9ucy5sZW5ndGgtMSkpO2lmKHRoaXMubWFwLmZyYWN0aW9uYWxab29tKXt2YXIgYj1NYXRoLmZsb29yKGEpLGM9TWF0aC5jZWlsKGEpO2E9dGhpcy5yZXNvbHV0aW9uc1tiXS0oYS1iKSoodGhpcy5yZXNvbHV0aW9uc1tiXS10aGlzLnJlc29sdXRpb25zW2NdKX1lbHNlIGE9dGhpcy5yZXNvbHV0aW9uc1tNYXRoLnJvdW5kKGEpXTtyZXR1cm4gYX0sZ2V0Wm9vbUZvclJlc29sdXRpb246ZnVuY3Rpb24oYSwKYil7dmFyIGMsZDtpZih0aGlzLm1hcC5mcmFjdGlvbmFsWm9vbSl7dmFyIGU9MCxmPXRoaXMucmVzb2x1dGlvbnNbZV0sZz10aGlzLnJlc29sdXRpb25zW3RoaXMucmVzb2x1dGlvbnMubGVuZ3RoLTFdLGg7Yz0wO2ZvcihkPXRoaXMucmVzb2x1dGlvbnMubGVuZ3RoO2M8ZDsrK2MpaWYoaD10aGlzLnJlc29sdXRpb25zW2NdLGg+PWEmJihmPWgsZT1jKSxoPD1hKXtnPWg7YnJlYWt9Yz1mLWc7Yz0wPGM/ZSsoZi1hKS9jOmV9ZWxzZXtmPU51bWJlci5QT1NJVElWRV9JTkZJTklUWTtjPTA7Zm9yKGQ9dGhpcy5yZXNvbHV0aW9ucy5sZW5ndGg7YzxkO2MrKylpZihiKXtlPU1hdGguYWJzKHRoaXMucmVzb2x1dGlvbnNbY10tYSk7aWYoZT5mKWJyZWFrO2Y9ZX1lbHNlIGlmKHRoaXMucmVzb2x1dGlvbnNbY108YSlicmVhaztjPU1hdGgubWF4KDAsYy0xKX1yZXR1cm4gY30sZ2V0TG9uTGF0RnJvbVZpZXdQb3J0UHg6ZnVuY3Rpb24oYSl7dmFyIGI9bnVsbCxjPXRoaXMubWFwO2lmKG51bGwhPQphJiZjLm1pblB4KXt2YXIgYj1jLmdldFJlc29sdXRpb24oKSxkPWMuZ2V0TWF4RXh0ZW50KHtyZXN0cmljdGVkOiEwfSksYj1uZXcgT3BlbkxheWVycy5Mb25MYXQoKGEueC1jLm1pblB4LngpKmIrZC5sZWZ0LChjLm1pblB4LnktYS55KSpiK2QudG9wKTt0aGlzLndyYXBEYXRlTGluZSYmKGI9Yi53cmFwRGF0ZUxpbmUodGhpcy5tYXhFeHRlbnQpKX1yZXR1cm4gYn0sZ2V0Vmlld1BvcnRQeEZyb21Mb25MYXQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz1udWxsO251bGwhPWEmJihiPWJ8fHRoaXMubWFwLmdldFJlc29sdXRpb24oKSxjPXRoaXMubWFwLmNhbGN1bGF0ZUJvdW5kcyhudWxsLGIpLGM9bmV3IE9wZW5MYXllcnMuUGl4ZWwoMS9iKihhLmxvbi1jLmxlZnQpLDEvYiooYy50b3AtYS5sYXQpKSk7cmV0dXJuIGN9LHNldE9wYWNpdHk6ZnVuY3Rpb24oYSl7aWYoYSE9dGhpcy5vcGFjaXR5KXt0aGlzLm9wYWNpdHk9YTtmb3IodmFyIGI9dGhpcy5kaXYuY2hpbGROb2RlcyxjPTAsZD1iLmxlbmd0aDtjPApkOysrYyl7dmFyIGU9YltjXS5maXJzdENoaWxkfHxiW2NdLGY9YltjXS5sYXN0Q2hpbGQ7ZiYmImlmcmFtZSI9PT1mLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkmJihlPWYucGFyZW50Tm9kZSk7T3BlbkxheWVycy5VdGlsLm1vZGlmeURPTUVsZW1lbnQoZSxudWxsLG51bGwsbnVsbCxudWxsLG51bGwsbnVsbCxhKX1udWxsIT10aGlzLm1hcCYmdGhpcy5tYXAuZXZlbnRzLnRyaWdnZXJFdmVudCgiY2hhbmdlbGF5ZXIiLHtsYXllcjp0aGlzLHByb3BlcnR5OiJvcGFjaXR5In0pfX0sZ2V0WkluZGV4OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGl2LnN0eWxlLnpJbmRleH0sc2V0WkluZGV4OmZ1bmN0aW9uKGEpe3RoaXMuZGl2LnN0eWxlLnpJbmRleD1hfSxhZGp1c3RCb3VuZHM6ZnVuY3Rpb24oYSl7aWYodGhpcy5ndXR0ZXIpe3ZhciBiPXRoaXMuZ3V0dGVyKnRoaXMubWFwLmdldFJlc29sdXRpb24oKTthPW5ldyBPcGVuTGF5ZXJzLkJvdW5kcyhhLmxlZnQtYixhLmJvdHRvbS1iLGEucmlnaHQrCmIsYS50b3ArYil9dGhpcy53cmFwRGF0ZUxpbmUmJihiPXtyaWdodFRvbGVyYW5jZTp0aGlzLmdldFJlc29sdXRpb24oKSxsZWZ0VG9sZXJhbmNlOnRoaXMuZ2V0UmVzb2x1dGlvbigpfSxhPWEud3JhcERhdGVMaW5lKHRoaXMubWF4RXh0ZW50LGIpKTtyZXR1cm4gYX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5MYXllciJ9KTtPcGVuTGF5ZXJzLkxheWVyLlNwaGVyaWNhbE1lcmNhdG9yPXtnZXRFeHRlbnQ6ZnVuY3Rpb24oKXt2YXIgYT1udWxsO3JldHVybiBhPXRoaXMuc3BoZXJpY2FsTWVyY2F0b3I/dGhpcy5tYXAuY2FsY3VsYXRlQm91bmRzKCk6T3BlbkxheWVycy5MYXllci5GaXhlZFpvb21MZXZlbHMucHJvdG90eXBlLmdldEV4dGVudC5hcHBseSh0aGlzKX0sZ2V0TG9uTGF0RnJvbVZpZXdQb3J0UHg6ZnVuY3Rpb24oYSl7cmV0dXJuIE9wZW5MYXllcnMuTGF5ZXIucHJvdG90eXBlLmdldExvbkxhdEZyb21WaWV3UG9ydFB4LmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sZ2V0Vmlld1BvcnRQeEZyb21Mb25MYXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIE9wZW5MYXllcnMuTGF5ZXIucHJvdG90eXBlLmdldFZpZXdQb3J0UHhGcm9tTG9uTGF0LmFwcGx5KHRoaXMsYXJndW1lbnRzKX0saW5pdE1lcmNhdG9yUGFyYW1ldGVyczpmdW5jdGlvbigpe3RoaXMuUkVTT0xVVElPTlM9W107Zm9yKHZhciBhPTA7YTw9dGhpcy5NQVhfWk9PTV9MRVZFTDsrK2EpdGhpcy5SRVNPTFVUSU9OU1thXT0KMTU2NTQzLjAzMzkwNjI1L01hdGgucG93KDIsYSk7dGhpcy51bml0cz0ibSI7dGhpcy5wcm9qZWN0aW9uPXRoaXMucHJvamVjdGlvbnx8IkVQU0c6OTAwOTEzIn0sZm9yd2FyZE1lcmNhdG9yOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IE9wZW5MYXllcnMuUHJvamVjdGlvbigiRVBTRzo0MzI2IiksYj1uZXcgT3BlbkxheWVycy5Qcm9qZWN0aW9uKCJFUFNHOjkwMDkxMyIpO3JldHVybiBmdW5jdGlvbihjLGQpe3ZhciBlPU9wZW5MYXllcnMuUHJvamVjdGlvbi50cmFuc2Zvcm0oe3g6Yyx5OmR9LGEsYik7cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLkxvbkxhdChlLngsZS55KX19KCksaW52ZXJzZU1lcmNhdG9yOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IE9wZW5MYXllcnMuUHJvamVjdGlvbigiRVBTRzo0MzI2IiksYj1uZXcgT3BlbkxheWVycy5Qcm9qZWN0aW9uKCJFUFNHOjkwMDkxMyIpO3JldHVybiBmdW5jdGlvbihjLGQpe3ZhciBlPU9wZW5MYXllcnMuUHJvamVjdGlvbi50cmFuc2Zvcm0oe3g6YywKeTpkfSxiLGEpO3JldHVybiBuZXcgT3BlbkxheWVycy5Mb25MYXQoZS54LGUueSl9fSgpfTtPcGVuTGF5ZXJzLkxheWVyLkV2ZW50UGFuZT1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuTGF5ZXIse3Ntb290aERyYWdQYW46ITAsaXNCYXNlTGF5ZXI6ITAsaXNGaXhlZDohMCxwYW5lOm51bGwsbWFwT2JqZWN0Om51bGwsaW5pdGlhbGl6ZTpmdW5jdGlvbihhLGIpe09wZW5MYXllcnMuTGF5ZXIucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxhcmd1bWVudHMpO251bGw9PXRoaXMucGFuZSYmKHRoaXMucGFuZT1PcGVuTGF5ZXJzLlV0aWwuY3JlYXRlRGl2KHRoaXMuZGl2LmlkKyJfRXZlbnRQYW5lIikpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5wYW5lPXRoaXMubWFwT2JqZWN0PW51bGw7T3BlbkxheWVycy5MYXllci5wcm90b3R5cGUuZGVzdHJveS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LHNldE1hcDpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLkxheWVyLnByb3RvdHlwZS5zZXRNYXAuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMucGFuZS5zdHlsZS56SW5kZXg9CnBhcnNlSW50KHRoaXMuZGl2LnN0eWxlLnpJbmRleCkrMTt0aGlzLnBhbmUuc3R5bGUuZGlzcGxheT10aGlzLmRpdi5zdHlsZS5kaXNwbGF5O3RoaXMucGFuZS5zdHlsZS53aWR0aD0iMTAwJSI7dGhpcy5wYW5lLnN0eWxlLmhlaWdodD0iMTAwJSI7Im1zaWUiPT1PcGVuTGF5ZXJzLkJST1dTRVJfTkFNRSYmKHRoaXMucGFuZS5zdHlsZS5iYWNrZ3JvdW5kPSJ1cmwoIitPcGVuTGF5ZXJzLlV0aWwuZ2V0SW1hZ2VMb2NhdGlvbigiYmxhbmsuZ2lmIikrIikiKTt0aGlzLmlzRml4ZWQ/dGhpcy5tYXAudmlld1BvcnREaXYuYXBwZW5kQ2hpbGQodGhpcy5wYW5lKTp0aGlzLm1hcC5sYXllckNvbnRhaW5lckRpdi5hcHBlbmRDaGlsZCh0aGlzLnBhbmUpO3RoaXMubG9hZE1hcE9iamVjdCgpO251bGw9PXRoaXMubWFwT2JqZWN0JiZ0aGlzLmxvYWRXYXJuaW5nTWVzc2FnZSgpfSxyZW1vdmVNYXA6ZnVuY3Rpb24oYSl7dGhpcy5wYW5lJiZ0aGlzLnBhbmUucGFyZW50Tm9kZSYmdGhpcy5wYW5lLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5wYW5lKTsKT3BlbkxheWVycy5MYXllci5wcm90b3R5cGUucmVtb3ZlTWFwLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sbG9hZFdhcm5pbmdNZXNzYWdlOmZ1bmN0aW9uKCl7dGhpcy5kaXYuc3R5bGUuYmFja2dyb3VuZENvbG9yPSJkYXJrYmx1ZSI7dmFyIGE9dGhpcy5tYXAuZ2V0U2l6ZSgpLGI9TWF0aC5taW4oYS53LDMwMCksYz1NYXRoLm1pbihhLmgsMjAwKSxiPW5ldyBPcGVuTGF5ZXJzLlNpemUoYixjKSxhPShuZXcgT3BlbkxheWVycy5QaXhlbChhLncvMixhLmgvMikpLmFkZCgtYi53LzIsLWIuaC8yKSxhPU9wZW5MYXllcnMuVXRpbC5jcmVhdGVEaXYodGhpcy5uYW1lKyJfd2FybmluZyIsYSxiLG51bGwsbnVsbCxudWxsLCJhdXRvIik7YS5zdHlsZS5wYWRkaW5nPSI3cHgiO2Euc3R5bGUuYmFja2dyb3VuZENvbG9yPSJ5ZWxsb3ciO2EuaW5uZXJIVE1MPXRoaXMuZ2V0V2FybmluZ0hUTUwoKTt0aGlzLmRpdi5hcHBlbmRDaGlsZChhKX0sZ2V0V2FybmluZ0hUTUw6ZnVuY3Rpb24oKXtyZXR1cm4iIn0sCmRpc3BsYXk6ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5MYXllci5wcm90b3R5cGUuZGlzcGxheS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5wYW5lLnN0eWxlLmRpc3BsYXk9dGhpcy5kaXYuc3R5bGUuZGlzcGxheX0sc2V0WkluZGV4OmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuTGF5ZXIucHJvdG90eXBlLnNldFpJbmRleC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5wYW5lLnN0eWxlLnpJbmRleD1wYXJzZUludCh0aGlzLmRpdi5zdHlsZS56SW5kZXgpKzF9LG1vdmVCeVB4OmZ1bmN0aW9uKGEsYil7T3BlbkxheWVycy5MYXllci5wcm90b3R5cGUubW92ZUJ5UHguYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMuZHJhZ1Bhbk1hcE9iamVjdD90aGlzLmRyYWdQYW5NYXBPYmplY3QoYSwtYik6dGhpcy5tb3ZlVG8odGhpcy5tYXAuZ2V0Q2FjaGVkQ2VudGVyKCkpfSxtb3ZlVG86ZnVuY3Rpb24oYSxiLGMpe09wZW5MYXllcnMuTGF5ZXIucHJvdG90eXBlLm1vdmVUby5hcHBseSh0aGlzLAphcmd1bWVudHMpO2lmKG51bGwhPXRoaXMubWFwT2JqZWN0KXt2YXIgZD10aGlzLm1hcC5nZXRDZW50ZXIoKSxlPXRoaXMubWFwLmdldFpvb20oKTtpZihudWxsIT1kKXt2YXIgZj10aGlzLmdldE1hcE9iamVjdENlbnRlcigpLGY9dGhpcy5nZXRPTExvbkxhdEZyb21NYXBPYmplY3RMb25MYXQoZiksZz10aGlzLmdldE1hcE9iamVjdFpvb20oKSxnPXRoaXMuZ2V0T0xab29tRnJvbU1hcE9iamVjdFpvb20oZyk7ZC5lcXVhbHMoZikmJmU9PWd8fCghYiYmZiYmdGhpcy5kcmFnUGFuTWFwT2JqZWN0JiZ0aGlzLnNtb290aERyYWdQYW4/KGU9dGhpcy5tYXAuZ2V0Vmlld1BvcnRQeEZyb21Mb25MYXQoZiksZD10aGlzLm1hcC5nZXRWaWV3UG9ydFB4RnJvbUxvbkxhdChkKSx0aGlzLmRyYWdQYW5NYXBPYmplY3QoZC54LWUueCxlLnktZC55KSk6KGQ9dGhpcy5nZXRNYXBPYmplY3RMb25MYXRGcm9tT0xMb25MYXQoZCksZT10aGlzLmdldE1hcE9iamVjdFpvb21Gcm9tT0xab29tKGUpLHRoaXMuc2V0TWFwT2JqZWN0Q2VudGVyKGQsCmUsYykpKX19fSxnZXRMb25MYXRGcm9tVmlld1BvcnRQeDpmdW5jdGlvbihhKXt2YXIgYj1udWxsO251bGwhPXRoaXMubWFwT2JqZWN0JiZudWxsIT10aGlzLmdldE1hcE9iamVjdENlbnRlcigpJiYoYT10aGlzLmdldE1hcE9iamVjdFBpeGVsRnJvbU9MUGl4ZWwoYSksYT10aGlzLmdldE1hcE9iamVjdExvbkxhdEZyb21NYXBPYmplY3RQaXhlbChhKSxiPXRoaXMuZ2V0T0xMb25MYXRGcm9tTWFwT2JqZWN0TG9uTGF0KGEpKTtyZXR1cm4gYn0sZ2V0Vmlld1BvcnRQeEZyb21Mb25MYXQ6ZnVuY3Rpb24oYSl7dmFyIGI9bnVsbDtudWxsIT10aGlzLm1hcE9iamVjdCYmbnVsbCE9dGhpcy5nZXRNYXBPYmplY3RDZW50ZXIoKSYmKGE9dGhpcy5nZXRNYXBPYmplY3RMb25MYXRGcm9tT0xMb25MYXQoYSksYT10aGlzLmdldE1hcE9iamVjdFBpeGVsRnJvbU1hcE9iamVjdExvbkxhdChhKSxiPXRoaXMuZ2V0T0xQaXhlbEZyb21NYXBPYmplY3RQaXhlbChhKSk7cmV0dXJuIGJ9LGdldE9MTG9uTGF0RnJvbU1hcE9iamVjdExvbkxhdDpmdW5jdGlvbihhKXt2YXIgYj0KbnVsbDtudWxsIT1hJiYoYj10aGlzLmdldExvbmdpdHVkZUZyb21NYXBPYmplY3RMb25MYXQoYSksYT10aGlzLmdldExhdGl0dWRlRnJvbU1hcE9iamVjdExvbkxhdChhKSxiPW5ldyBPcGVuTGF5ZXJzLkxvbkxhdChiLGEpKTtyZXR1cm4gYn0sZ2V0TWFwT2JqZWN0TG9uTGF0RnJvbU9MTG9uTGF0OmZ1bmN0aW9uKGEpe3ZhciBiPW51bGw7bnVsbCE9YSYmKGI9dGhpcy5nZXRNYXBPYmplY3RMb25MYXRGcm9tTG9uTGF0KGEubG9uLGEubGF0KSk7cmV0dXJuIGJ9LGdldE9MUGl4ZWxGcm9tTWFwT2JqZWN0UGl4ZWw6ZnVuY3Rpb24oYSl7dmFyIGI9bnVsbDtudWxsIT1hJiYoYj10aGlzLmdldFhGcm9tTWFwT2JqZWN0UGl4ZWwoYSksYT10aGlzLmdldFlGcm9tTWFwT2JqZWN0UGl4ZWwoYSksYj1uZXcgT3BlbkxheWVycy5QaXhlbChiLGEpKTtyZXR1cm4gYn0sZ2V0TWFwT2JqZWN0UGl4ZWxGcm9tT0xQaXhlbDpmdW5jdGlvbihhKXt2YXIgYj1udWxsO251bGwhPWEmJihiPXRoaXMuZ2V0TWFwT2JqZWN0UGl4ZWxGcm9tWFkoYS54LAphLnkpKTtyZXR1cm4gYn0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5MYXllci5FdmVudFBhbmUifSk7T3BlbkxheWVycy5MYXllci5GaXhlZFpvb21MZXZlbHM9T3BlbkxheWVycy5DbGFzcyh7aW5pdGlhbGl6ZTpmdW5jdGlvbigpe30saW5pdFJlc29sdXRpb25zOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPVsibWluWm9vbUxldmVsIiwibWF4Wm9vbUxldmVsIiwibnVtWm9vbUxldmVscyJdLGI9MCxjPWEubGVuZ3RoO2I8YztiKyspe3ZhciBkPWFbYl07dGhpc1tkXT1udWxsIT10aGlzLm9wdGlvbnNbZF0/dGhpcy5vcHRpb25zW2RdOnRoaXMubWFwW2RdfWlmKG51bGw9PXRoaXMubWluWm9vbUxldmVsfHx0aGlzLm1pblpvb21MZXZlbDx0aGlzLk1JTl9aT09NX0xFVkVMKXRoaXMubWluWm9vbUxldmVsPXRoaXMuTUlOX1pPT01fTEVWRUw7YT10aGlzLk1BWF9aT09NX0xFVkVMLXRoaXMubWluWm9vbUxldmVsKzE7Yj1udWxsPT10aGlzLm9wdGlvbnMubnVtWm9vbUxldmVscyYmbnVsbCE9dGhpcy5vcHRpb25zLm1heFpvb21MZXZlbHx8bnVsbD09dGhpcy5udW1ab29tTGV2ZWxzJiZudWxsIT10aGlzLm1heFpvb21MZXZlbD8KdGhpcy5tYXhab29tTGV2ZWwtdGhpcy5taW5ab29tTGV2ZWwrMTp0aGlzLm51bVpvb21MZXZlbHM7dGhpcy5udW1ab29tTGV2ZWxzPW51bGwhPWI/TWF0aC5taW4oYixhKTphO3RoaXMubWF4Wm9vbUxldmVsPXRoaXMubWluWm9vbUxldmVsK3RoaXMubnVtWm9vbUxldmVscy0xO2lmKG51bGwhPXRoaXMuUkVTT0xVVElPTlMpe2E9MDt0aGlzLnJlc29sdXRpb25zPVtdO2ZvcihiPXRoaXMubWluWm9vbUxldmVsO2I8PXRoaXMubWF4Wm9vbUxldmVsO2IrKyl0aGlzLnJlc29sdXRpb25zW2ErK109dGhpcy5SRVNPTFVUSU9OU1tiXTt0aGlzLm1heFJlc29sdXRpb249dGhpcy5yZXNvbHV0aW9uc1swXTt0aGlzLm1pblJlc29sdXRpb249dGhpcy5yZXNvbHV0aW9uc1t0aGlzLnJlc29sdXRpb25zLmxlbmd0aC0xXX19LGdldFJlc29sdXRpb246ZnVuY3Rpb24oKXtpZihudWxsIT10aGlzLnJlc29sdXRpb25zKXJldHVybiBPcGVuTGF5ZXJzLkxheWVyLnByb3RvdHlwZS5nZXRSZXNvbHV0aW9uLmFwcGx5KHRoaXMsCmFyZ3VtZW50cyk7dmFyIGE9bnVsbCxiPXRoaXMubWFwLmdldFNpemUoKSxjPXRoaXMuZ2V0RXh0ZW50KCk7bnVsbCE9YiYmbnVsbCE9YyYmKGE9TWF0aC5tYXgoYy5nZXRXaWR0aCgpL2IudyxjLmdldEhlaWdodCgpL2IuaCkpO3JldHVybiBhfSxnZXRFeHRlbnQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm1hcC5nZXRTaXplKCksYj10aGlzLmdldExvbkxhdEZyb21WaWV3UG9ydFB4KHt4OjAseTowfSksYT10aGlzLmdldExvbkxhdEZyb21WaWV3UG9ydFB4KHt4OmEudyx5OmEuaH0pO3JldHVybiBudWxsIT1iJiZudWxsIT1hP25ldyBPcGVuTGF5ZXJzLkJvdW5kcyhiLmxvbixhLmxhdCxhLmxvbixiLmxhdCk6bnVsbH0sZ2V0Wm9vbUZvclJlc29sdXRpb246ZnVuY3Rpb24oYSl7aWYobnVsbCE9dGhpcy5yZXNvbHV0aW9ucylyZXR1cm4gT3BlbkxheWVycy5MYXllci5wcm90b3R5cGUuZ2V0Wm9vbUZvclJlc29sdXRpb24uYXBwbHkodGhpcyxhcmd1bWVudHMpO3ZhciBiPU9wZW5MYXllcnMuTGF5ZXIucHJvdG90eXBlLmdldEV4dGVudC5hcHBseSh0aGlzLApbXSk7cmV0dXJuIHRoaXMuZ2V0Wm9vbUZvckV4dGVudChiKX0sZ2V0T0xab29tRnJvbU1hcE9iamVjdFpvb206ZnVuY3Rpb24oYSl7dmFyIGI9bnVsbDtudWxsIT1hJiYoYj1hLXRoaXMubWluWm9vbUxldmVsLHRoaXMubWFwLmJhc2VMYXllciE9PXRoaXMmJihiPXRoaXMubWFwLmJhc2VMYXllci5nZXRab29tRm9yUmVzb2x1dGlvbih0aGlzLmdldFJlc29sdXRpb25Gb3Jab29tKGIpKSkpO3JldHVybiBifSxnZXRNYXBPYmplY3Rab29tRnJvbU9MWm9vbTpmdW5jdGlvbihhKXt2YXIgYj1udWxsO251bGwhPWEmJihiPWErdGhpcy5taW5ab29tTGV2ZWwsdGhpcy5tYXAuYmFzZUxheWVyIT09dGhpcyYmKGI9dGhpcy5nZXRab29tRm9yUmVzb2x1dGlvbih0aGlzLm1hcC5iYXNlTGF5ZXIuZ2V0UmVzb2x1dGlvbkZvclpvb20oYikpKSk7cmV0dXJuIGJ9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuTGF5ZXIuRml4ZWRab29tTGV2ZWxzIn0pO09wZW5MYXllcnMuTGF5ZXIuR29vZ2xlPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5MYXllci5FdmVudFBhbmUsT3BlbkxheWVycy5MYXllci5GaXhlZFpvb21MZXZlbHMse01JTl9aT09NX0xFVkVMOjAsTUFYX1pPT01fTEVWRUw6MjEsUkVTT0xVVElPTlM6WzEuNDA2MjUsMC43MDMxMjUsMC4zNTE1NjI1LDAuMTc1NzgxMjUsMC4wODc4OTA2MjUsMC4wNDM5NDUzMTI1LDAuMDIxOTcyNjU2MjUsMC4wMTA5ODYzMjgxMjUsMC4wMDU0OTMxNjQwNjI1LDAuMDAyNzQ2NTgyMDMxMjUsMC4wMDEzNzMyOTEwMTU2MjUsNi44NjY0NTUwNzgxMjVFLTQsMy40MzMyMjc1MzkwNjI1RS00LDEuNzE2NjEzNzY5NTMxMjVFLTQsOC41ODMwNjg4NDc2NTYyNUUtNSw0LjI5MTUzNDQyMzgyODEyNUUtNSwyLjE0NTc2NzIxMTkxNDA2MkUtNSwxLjA3Mjg4MzYwNTk1NzAzMUUtNSw1LjM2NDQxODAyOTc4NTE1RS02LDIuNjgyMjA5MDE0ODkyNTdFLTYsMS4zNDExMDQ1MDc0NDYyODlFLTYsNi43MDU1MjI1MzcyMzE0NDVFLTddLAp0eXBlOm51bGwsd3JhcERhdGVMaW5lOiEwLHNwaGVyaWNhbE1lcmNhdG9yOiExLHZlcnNpb246bnVsbCxpbml0aWFsaXplOmZ1bmN0aW9uKGEsYil7Yj1ifHx7fTtiLnZlcnNpb258fChiLnZlcnNpb249ImZ1bmN0aW9uIj09PXR5cGVvZiBHTWFwMj8iMiI6IjMiKTt2YXIgYz1PcGVuTGF5ZXJzLkxheWVyLkdvb2dsZVsidiIrYi52ZXJzaW9uLnJlcGxhY2UoL1wuL2csIl8iKV07aWYoYylPcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyhiLGMpO2Vsc2UgdGhyb3ciVW5zdXBwb3J0ZWQgR29vZ2xlIE1hcHMgQVBJIHZlcnNpb246ICIrYi52ZXJzaW9uO09wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKGIsYy5ERUZBVUxUUyk7Yi5tYXhFeHRlbnQmJihiLm1heEV4dGVudD1iLm1heEV4dGVudC5jbG9uZSgpKTtPcGVuTGF5ZXJzLkxheWVyLkV2ZW50UGFuZS5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLFthLGJdKTtPcGVuTGF5ZXJzLkxheWVyLkZpeGVkWm9vbUxldmVscy5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLApbYSxiXSk7dGhpcy5zcGhlcmljYWxNZXJjYXRvciYmKE9wZW5MYXllcnMuVXRpbC5leHRlbmQodGhpcyxPcGVuTGF5ZXJzLkxheWVyLlNwaGVyaWNhbE1lcmNhdG9yKSx0aGlzLmluaXRNZXJjYXRvclBhcmFtZXRlcnMoKSl9LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLkxheWVyLkdvb2dsZSh0aGlzLm5hbWUsdGhpcy5nZXRPcHRpb25zKCkpfSxzZXRWaXNpYmlsaXR5OmZ1bmN0aW9uKGEpe3ZhciBiPW51bGw9PXRoaXMub3BhY2l0eT8xOnRoaXMub3BhY2l0eTtPcGVuTGF5ZXJzLkxheWVyLkV2ZW50UGFuZS5wcm90b3R5cGUuc2V0VmlzaWJpbGl0eS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5zZXRPcGFjaXR5KGIpfSxkaXNwbGF5OmZ1bmN0aW9uKGEpe3RoaXMuX2RyYWdnaW5nfHx0aGlzLnNldEdNYXBWaXNpYmlsaXR5KGEpO09wZW5MYXllcnMuTGF5ZXIuRXZlbnRQYW5lLnByb3RvdHlwZS5kaXNwbGF5LmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sbW92ZVRvOmZ1bmN0aW9uKGEsCmIsYyl7dGhpcy5fZHJhZ2dpbmc9YztPcGVuTGF5ZXJzLkxheWVyLkV2ZW50UGFuZS5wcm90b3R5cGUubW92ZVRvLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtkZWxldGUgdGhpcy5fZHJhZ2dpbmd9LHNldE9wYWNpdHk6ZnVuY3Rpb24oYSl7YSE9PXRoaXMub3BhY2l0eSYmKG51bGwhPXRoaXMubWFwJiZ0aGlzLm1hcC5ldmVudHMudHJpZ2dlckV2ZW50KCJjaGFuZ2VsYXllciIse2xheWVyOnRoaXMscHJvcGVydHk6Im9wYWNpdHkifSksdGhpcy5vcGFjaXR5PWEpO2lmKHRoaXMuZ2V0VmlzaWJpbGl0eSgpKXt2YXIgYj10aGlzLmdldE1hcENvbnRhaW5lcigpO09wZW5MYXllcnMuVXRpbC5tb2RpZnlET01FbGVtZW50KGIsbnVsbCxudWxsLG51bGwsbnVsbCxudWxsLG51bGwsYSl9fSxkZXN0cm95OmZ1bmN0aW9uKCl7aWYodGhpcy5tYXApe3RoaXMuc2V0R01hcFZpc2liaWxpdHkoITEpO3ZhciBhPU9wZW5MYXllcnMuTGF5ZXIuR29vZ2xlLmNhY2hlW3RoaXMubWFwLmlkXTthJiYxPj1hLmNvdW50JiYKdGhpcy5yZW1vdmVHTWFwRWxlbWVudHMoKX1PcGVuTGF5ZXJzLkxheWVyLkV2ZW50UGFuZS5wcm90b3R5cGUuZGVzdHJveS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LHJlbW92ZUdNYXBFbGVtZW50czpmdW5jdGlvbigpe3ZhciBhPU9wZW5MYXllcnMuTGF5ZXIuR29vZ2xlLmNhY2hlW3RoaXMubWFwLmlkXTtpZihhKXt2YXIgYj10aGlzLm1hcE9iamVjdCYmdGhpcy5nZXRNYXBDb250YWluZXIoKTtiJiZiLnBhcmVudE5vZGUmJmIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChiKTsoYj1hLnRlcm1zT2ZVc2UpJiZiLnBhcmVudE5vZGUmJmIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChiKTsoYT1hLnBvd2VyZWRCeSkmJmEucGFyZW50Tm9kZSYmYS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGEpO3RoaXMubWFwT2JqZWN0JiYod2luZG93Lmdvb2dsZSYmZ29vZ2xlLm1hcHMmJmdvb2dsZS5tYXBzLmV2ZW50JiZnb29nbGUubWFwcy5ldmVudC5jbGVhckxpc3RlbmVycykmJmdvb2dsZS5tYXBzLmV2ZW50LmNsZWFyTGlzdGVuZXJzKHRoaXMubWFwT2JqZWN0LAoidGlsZXNsb2FkZWQiKX19LHJlbW92ZU1hcDpmdW5jdGlvbihhKXt0aGlzLnZpc2liaWxpdHkmJnRoaXMubWFwT2JqZWN0JiZ0aGlzLnNldEdNYXBWaXNpYmlsaXR5KCExKTt2YXIgYj1PcGVuTGF5ZXJzLkxheWVyLkdvb2dsZS5jYWNoZVthLmlkXTtiJiYoMT49Yi5jb3VudD8odGhpcy5yZW1vdmVHTWFwRWxlbWVudHMoKSxkZWxldGUgT3BlbkxheWVycy5MYXllci5Hb29nbGUuY2FjaGVbYS5pZF0pOi0tYi5jb3VudCk7ZGVsZXRlIHRoaXMudGVybXNPZlVzZTtkZWxldGUgdGhpcy5wb3dlcmVkQnk7ZGVsZXRlIHRoaXMubWFwT2JqZWN0O2RlbGV0ZSB0aGlzLmRyYWdPYmplY3Q7T3BlbkxheWVycy5MYXllci5FdmVudFBhbmUucHJvdG90eXBlLnJlbW92ZU1hcC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGdldE9MQm91bmRzRnJvbU1hcE9iamVjdEJvdW5kczpmdW5jdGlvbihhKXt2YXIgYj1udWxsO251bGwhPWEmJihiPWEuZ2V0U291dGhXZXN0KCksYT1hLmdldE5vcnRoRWFzdCgpLHRoaXMuc3BoZXJpY2FsTWVyY2F0b3I/CihiPXRoaXMuZm9yd2FyZE1lcmNhdG9yKGIubG5nKCksYi5sYXQoKSksYT10aGlzLmZvcndhcmRNZXJjYXRvcihhLmxuZygpLGEubGF0KCkpKTooYj1uZXcgT3BlbkxheWVycy5Mb25MYXQoYi5sbmcoKSxiLmxhdCgpKSxhPW5ldyBPcGVuTGF5ZXJzLkxvbkxhdChhLmxuZygpLGEubGF0KCkpKSxiPW5ldyBPcGVuTGF5ZXJzLkJvdW5kcyhiLmxvbixiLmxhdCxhLmxvbixhLmxhdCkpO3JldHVybiBifSxnZXRXYXJuaW5nSFRNTDpmdW5jdGlvbigpe3JldHVybiBPcGVuTGF5ZXJzLmkxOG4oImdvb2dsZVdhcm5pbmciKX0sZ2V0TWFwT2JqZWN0Q2VudGVyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWFwT2JqZWN0LmdldENlbnRlcigpfSxnZXRNYXBPYmplY3Rab29tOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWFwT2JqZWN0LmdldFpvb20oKX0sZ2V0TG9uZ2l0dWRlRnJvbU1hcE9iamVjdExvbkxhdDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5zcGhlcmljYWxNZXJjYXRvcj90aGlzLmZvcndhcmRNZXJjYXRvcihhLmxuZygpLAphLmxhdCgpKS5sb246YS5sbmcoKX0sZ2V0TGF0aXR1ZGVGcm9tTWFwT2JqZWN0TG9uTGF0OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnNwaGVyaWNhbE1lcmNhdG9yP3RoaXMuZm9yd2FyZE1lcmNhdG9yKGEubG5nKCksYS5sYXQoKSkubGF0OmEubGF0KCl9LGdldFhGcm9tTWFwT2JqZWN0UGl4ZWw6ZnVuY3Rpb24oYSl7cmV0dXJuIGEueH0sZ2V0WUZyb21NYXBPYmplY3RQaXhlbDpmdW5jdGlvbihhKXtyZXR1cm4gYS55fSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkxheWVyLkdvb2dsZSJ9KTtPcGVuTGF5ZXJzLkxheWVyLkdvb2dsZS5jYWNoZT17fTsKT3BlbkxheWVycy5MYXllci5Hb29nbGUudjI9e3Rlcm1zT2ZVc2U6bnVsbCxwb3dlcmVkQnk6bnVsbCxkcmFnT2JqZWN0Om51bGwsbG9hZE1hcE9iamVjdDpmdW5jdGlvbigpe3RoaXMudHlwZXx8KHRoaXMudHlwZT1HX05PUk1BTF9NQVApO3ZhciBhLGIsYyxkPU9wZW5MYXllcnMuTGF5ZXIuR29vZ2xlLmNhY2hlW3RoaXMubWFwLmlkXTtpZihkKWE9ZC5tYXBPYmplY3QsYj1kLnRlcm1zT2ZVc2UsYz1kLnBvd2VyZWRCeSwrK2QuY291bnQ7ZWxzZXt2YXIgZD10aGlzLm1hcC52aWV3UG9ydERpdixlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO2UuaWQ9dGhpcy5tYXAuaWQrIl9HTWFwMkNvbnRhaW5lciI7ZS5zdHlsZS5wb3NpdGlvbj0iYWJzb2x1dGUiO2Uuc3R5bGUud2lkdGg9IjEwMCUiO2Uuc3R5bGUuaGVpZ2h0PSIxMDAlIjtkLmFwcGVuZENoaWxkKGUpO3RyeXthPW5ldyBHTWFwMihlKSxiPWUubGFzdENoaWxkLGQuYXBwZW5kQ2hpbGQoYiksYi5zdHlsZS56SW5kZXg9CiIxMTAwIixiLnN0eWxlLnJpZ2h0PSIiLGIuc3R5bGUuYm90dG9tPSIiLGIuY2xhc3NOYW1lPSJvbExheWVyR29vZ2xlQ29weXJpZ2h0IixjPWUubGFzdENoaWxkLGQuYXBwZW5kQ2hpbGQoYyksYy5zdHlsZS56SW5kZXg9IjExMDAiLGMuc3R5bGUucmlnaHQ9IiIsYy5zdHlsZS5ib3R0b209IiIsYy5jbGFzc05hbWU9Im9sTGF5ZXJHb29nbGVQb3dlcmVkQnkgZ21ub3ByaW50In1jYXRjaChmKXt0aHJvdyBmO31PcGVuTGF5ZXJzLkxheWVyLkdvb2dsZS5jYWNoZVt0aGlzLm1hcC5pZF09e21hcE9iamVjdDphLHRlcm1zT2ZVc2U6Yixwb3dlcmVkQnk6Yyxjb3VudDoxfX10aGlzLm1hcE9iamVjdD1hO3RoaXMudGVybXNPZlVzZT1iO3RoaXMucG93ZXJlZEJ5PWM7LTE9PT1PcGVuTGF5ZXJzLlV0aWwuaW5kZXhPZih0aGlzLm1hcE9iamVjdC5nZXRNYXBUeXBlcygpLHRoaXMudHlwZSkmJnRoaXMubWFwT2JqZWN0LmFkZE1hcFR5cGUodGhpcy50eXBlKTsiZnVuY3Rpb24iPT10eXBlb2YgYS5nZXREcmFnT2JqZWN0Pwp0aGlzLmRyYWdPYmplY3Q9YS5nZXREcmFnT2JqZWN0KCk6dGhpcy5kcmFnUGFuTWFwT2JqZWN0PW51bGw7ITE9PT10aGlzLmlzQmFzZUxheWVyJiZ0aGlzLnNldEdNYXBWaXNpYmlsaXR5KCJub25lIiE9PXRoaXMuZGl2LnN0eWxlLmRpc3BsYXkpfSxvbk1hcFJlc2l6ZTpmdW5jdGlvbigpe2lmKHRoaXMudmlzaWJpbGl0eSYmdGhpcy5tYXBPYmplY3QuaXNMb2FkZWQoKSl0aGlzLm1hcE9iamVjdC5jaGVja1Jlc2l6ZSgpO2Vsc2V7aWYoIXRoaXMuX3Jlc2l6ZWQpdmFyIGE9dGhpcyxiPUdFdmVudC5hZGRMaXN0ZW5lcih0aGlzLm1hcE9iamVjdCwibG9hZCIsZnVuY3Rpb24oKXtHRXZlbnQucmVtb3ZlTGlzdGVuZXIoYik7ZGVsZXRlIGEuX3Jlc2l6ZWQ7YS5tYXBPYmplY3QuY2hlY2tSZXNpemUoKTthLm1vdmVUbyhhLm1hcC5nZXRDZW50ZXIoKSxhLm1hcC5nZXRab29tKCkpfSk7dGhpcy5fcmVzaXplZD0hMH19LHNldEdNYXBWaXNpYmlsaXR5OmZ1bmN0aW9uKGEpe3ZhciBiPU9wZW5MYXllcnMuTGF5ZXIuR29vZ2xlLmNhY2hlW3RoaXMubWFwLmlkXTsKaWYoYil7dmFyIGM9dGhpcy5tYXBPYmplY3QuZ2V0Q29udGFpbmVyKCk7ITA9PT1hPyh0aGlzLm1hcE9iamVjdC5zZXRNYXBUeXBlKHRoaXMudHlwZSksYy5zdHlsZS5kaXNwbGF5PSIiLHRoaXMudGVybXNPZlVzZS5zdHlsZS5sZWZ0PSIiLHRoaXMudGVybXNPZlVzZS5zdHlsZS5kaXNwbGF5PSIiLHRoaXMucG93ZXJlZEJ5LnN0eWxlLmRpc3BsYXk9IiIsYi5kaXNwbGF5ZWQ9dGhpcy5pZCk6KGIuZGlzcGxheWVkPT09dGhpcy5pZCYmZGVsZXRlIGIuZGlzcGxheWVkLGIuZGlzcGxheWVkfHwoYy5zdHlsZS5kaXNwbGF5PSJub25lIix0aGlzLnRlcm1zT2ZVc2Uuc3R5bGUuZGlzcGxheT0ibm9uZSIsdGhpcy50ZXJtc09mVXNlLnN0eWxlLmxlZnQ9Ii05OTk5cHgiLHRoaXMucG93ZXJlZEJ5LnN0eWxlLmRpc3BsYXk9Im5vbmUiKSl9fSxnZXRNYXBDb250YWluZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tYXBPYmplY3QuZ2V0Q29udGFpbmVyKCl9LGdldE1hcE9iamVjdEJvdW5kc0Zyb21PTEJvdW5kczpmdW5jdGlvbihhKXt2YXIgYj0KbnVsbDtudWxsIT1hJiYoYj10aGlzLnNwaGVyaWNhbE1lcmNhdG9yP3RoaXMuaW52ZXJzZU1lcmNhdG9yKGEuYm90dG9tLGEubGVmdCk6bmV3IE9wZW5MYXllcnMuTG9uTGF0KGEuYm90dG9tLGEubGVmdCksYT10aGlzLnNwaGVyaWNhbE1lcmNhdG9yP3RoaXMuaW52ZXJzZU1lcmNhdG9yKGEudG9wLGEucmlnaHQpOm5ldyBPcGVuTGF5ZXJzLkxvbkxhdChhLnRvcCxhLnJpZ2h0KSxiPW5ldyBHTGF0TG5nQm91bmRzKG5ldyBHTGF0TG5nKGIubGF0LGIubG9uKSxuZXcgR0xhdExuZyhhLmxhdCxhLmxvbikpKTtyZXR1cm4gYn0sc2V0TWFwT2JqZWN0Q2VudGVyOmZ1bmN0aW9uKGEsYil7dGhpcy5tYXBPYmplY3Quc2V0Q2VudGVyKGEsYil9LGRyYWdQYW5NYXBPYmplY3Q6ZnVuY3Rpb24oYSxiKXt0aGlzLmRyYWdPYmplY3QubW92ZUJ5KG5ldyBHU2l6ZSgtYSxiKSl9LGdldE1hcE9iamVjdExvbkxhdEZyb21NYXBPYmplY3RQaXhlbDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5tYXBPYmplY3QuZnJvbUNvbnRhaW5lclBpeGVsVG9MYXRMbmcoYSl9LApnZXRNYXBPYmplY3RQaXhlbEZyb21NYXBPYmplY3RMb25MYXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMubWFwT2JqZWN0LmZyb21MYXRMbmdUb0NvbnRhaW5lclBpeGVsKGEpfSxnZXRNYXBPYmplY3Rab29tRnJvbU1hcE9iamVjdEJvdW5kczpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5tYXBPYmplY3QuZ2V0Qm91bmRzWm9vbUxldmVsKGEpfSxnZXRNYXBPYmplY3RMb25MYXRGcm9tTG9uTGF0OmZ1bmN0aW9uKGEsYil7dmFyIGM7dGhpcy5zcGhlcmljYWxNZXJjYXRvcj8oYz10aGlzLmludmVyc2VNZXJjYXRvcihhLGIpLGM9bmV3IEdMYXRMbmcoYy5sYXQsYy5sb24pKTpjPW5ldyBHTGF0TG5nKGIsYSk7cmV0dXJuIGN9LGdldE1hcE9iamVjdFBpeGVsRnJvbVhZOmZ1bmN0aW9uKGEsYil7cmV0dXJuIG5ldyBHUG9pbnQoYSxiKX19O09wZW5MYXllcnMuRm9ybWF0LlhNTD1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuRm9ybWF0LHtuYW1lc3BhY2VzOm51bGwsbmFtZXNwYWNlQWxpYXM6bnVsbCxkZWZhdWx0UHJlZml4Om51bGwscmVhZGVyczp7fSx3cml0ZXJzOnt9LHhtbGRvbTpudWxsLGluaXRpYWxpemU6ZnVuY3Rpb24oYSl7d2luZG93LkFjdGl2ZVhPYmplY3QmJih0aGlzLnhtbGRvbT1uZXcgQWN0aXZlWE9iamVjdCgiTWljcm9zb2Z0LlhNTERPTSIpKTtPcGVuTGF5ZXJzLkZvcm1hdC5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLFthXSk7dGhpcy5uYW1lc3BhY2VzPU9wZW5MYXllcnMuVXRpbC5leHRlbmQoe30sdGhpcy5uYW1lc3BhY2VzKTt0aGlzLm5hbWVzcGFjZUFsaWFzPXt9O2Zvcih2YXIgYiBpbiB0aGlzLm5hbWVzcGFjZXMpdGhpcy5uYW1lc3BhY2VBbGlhc1t0aGlzLm5hbWVzcGFjZXNbYl1dPWJ9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLnhtbGRvbT1udWxsO09wZW5MYXllcnMuRm9ybWF0LnByb3RvdHlwZS5kZXN0cm95LmFwcGx5KHRoaXMsCmFyZ3VtZW50cyl9LHNldE5hbWVzcGFjZTpmdW5jdGlvbihhLGIpe3RoaXMubmFtZXNwYWNlc1thXT1iO3RoaXMubmFtZXNwYWNlQWxpYXNbYl09YX0scmVhZDpmdW5jdGlvbihhKXt2YXIgYj1hLmluZGV4T2YoIjwiKTswPGImJihhPWEuc3Vic3RyaW5nKGIpKTtiPU9wZW5MYXllcnMuVXRpbC5UcnkoT3BlbkxheWVycy5GdW5jdGlvbi5iaW5kKGZ1bmN0aW9uKCl7dmFyIGI7Yj13aW5kb3cuQWN0aXZlWE9iamVjdCYmIXRoaXMueG1sZG9tP25ldyBBY3RpdmVYT2JqZWN0KCJNaWNyb3NvZnQuWE1MRE9NIik6dGhpcy54bWxkb207Yi5sb2FkWE1MKGEpO3JldHVybiBifSx0aGlzKSxmdW5jdGlvbigpe3JldHVybihuZXcgRE9NUGFyc2VyKS5wYXJzZUZyb21TdHJpbmcoYSwidGV4dC94bWwiKX0sZnVuY3Rpb24oKXt2YXIgYj1uZXcgWE1MSHR0cFJlcXVlc3Q7Yi5vcGVuKCJHRVQiLCJkYXRhOnRleHQveG1sO2NoYXJzZXQ9dXRmLTgsIitlbmNvZGVVUklDb21wb25lbnQoYSksITEpO2Iub3ZlcnJpZGVNaW1lVHlwZSYmCmIub3ZlcnJpZGVNaW1lVHlwZSgidGV4dC94bWwiKTtiLnNlbmQobnVsbCk7cmV0dXJuIGIucmVzcG9uc2VYTUx9KTt0aGlzLmtlZXBEYXRhJiYodGhpcy5kYXRhPWIpO3JldHVybiBifSx3cml0ZTpmdW5jdGlvbihhKXtpZih0aGlzLnhtbGRvbSlhPWEueG1sO2Vsc2V7dmFyIGI9bmV3IFhNTFNlcmlhbGl6ZXI7aWYoMT09YS5ub2RlVHlwZSl7dmFyIGM9ZG9jdW1lbnQuaW1wbGVtZW50YXRpb24uY3JlYXRlRG9jdW1lbnQoIiIsIiIsbnVsbCk7Yy5pbXBvcnROb2RlJiYoYT1jLmltcG9ydE5vZGUoYSwhMCkpO2MuYXBwZW5kQ2hpbGQoYSk7YT1iLnNlcmlhbGl6ZVRvU3RyaW5nKGMpfWVsc2UgYT1iLnNlcmlhbGl6ZVRvU3RyaW5nKGEpfXJldHVybiBhfSxjcmVhdGVFbGVtZW50TlM6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy54bWxkb20/InN0cmluZyI9PXR5cGVvZiBhP3RoaXMueG1sZG9tLmNyZWF0ZU5vZGUoMSxiLGEpOnRoaXMueG1sZG9tLmNyZWF0ZU5vZGUoMSxiLCIiKTpkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoYSwKYil9LGNyZWF0ZURvY3VtZW50RnJhZ21lbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy54bWxkb20/dGhpcy54bWxkb20uY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpOmRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKX0sY3JlYXRlVGV4dE5vZGU6ZnVuY3Rpb24oYSl7InN0cmluZyIhPT10eXBlb2YgYSYmKGE9U3RyaW5nKGEpKTtyZXR1cm4gdGhpcy54bWxkb20/dGhpcy54bWxkb20uY3JlYXRlVGV4dE5vZGUoYSk6ZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoYSl9LGdldEVsZW1lbnRzQnlUYWdOYW1lTlM6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPVtdO2lmKGEuZ2V0RWxlbWVudHNCeVRhZ05hbWVOUylkPWEuZ2V0RWxlbWVudHNCeVRhZ05hbWVOUyhiLGMpO2Vsc2V7YT1hLmdldEVsZW1lbnRzQnlUYWdOYW1lKCIqIik7Zm9yKHZhciBlLGYsZz0wLGg9YS5sZW5ndGg7ZzxoOysrZylpZihlPWFbZ10sZj1lLnByZWZpeD9lLnByZWZpeCsiOiIrYzpjLCIqIj09Y3x8Zj09ZS5ub2RlTmFtZSkiKiIhPQpiJiZiIT1lLm5hbWVzcGFjZVVSSXx8ZC5wdXNoKGUpfXJldHVybiBkfSxnZXRBdHRyaWJ1dGVOb2RlTlM6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPW51bGw7aWYoYS5nZXRBdHRyaWJ1dGVOb2RlTlMpZD1hLmdldEF0dHJpYnV0ZU5vZGVOUyhiLGMpO2Vsc2V7YT1hLmF0dHJpYnV0ZXM7Zm9yKHZhciBlLGYsZz0wLGg9YS5sZW5ndGg7ZzxoOysrZylpZihlPWFbZ10sZS5uYW1lc3BhY2VVUkk9PWImJihmPWUucHJlZml4P2UucHJlZml4KyI6IitjOmMsZj09ZS5ub2RlTmFtZSkpe2Q9ZTticmVha319cmV0dXJuIGR9LGdldEF0dHJpYnV0ZU5TOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD0iIjtpZihhLmdldEF0dHJpYnV0ZU5TKWQ9YS5nZXRBdHRyaWJ1dGVOUyhiLGMpfHwiIjtlbHNlIGlmKGE9dGhpcy5nZXRBdHRyaWJ1dGVOb2RlTlMoYSxiLGMpKWQ9YS5ub2RlVmFsdWU7cmV0dXJuIGR9LGdldENoaWxkVmFsdWU6ZnVuY3Rpb24oYSxiKXt2YXIgYz1ifHwiIjtpZihhKWZvcih2YXIgZD1hLmZpcnN0Q2hpbGQ7ZDtkPQpkLm5leHRTaWJsaW5nKXN3aXRjaChkLm5vZGVUeXBlKXtjYXNlIDM6Y2FzZSA0OmMrPWQubm9kZVZhbHVlfXJldHVybiBjfSxpc1NpbXBsZUNvbnRlbnQ6ZnVuY3Rpb24oYSl7dmFyIGI9ITA7Zm9yKGE9YS5maXJzdENoaWxkO2E7YT1hLm5leHRTaWJsaW5nKWlmKDE9PT1hLm5vZGVUeXBlKXtiPSExO2JyZWFrfXJldHVybiBifSxjb250ZW50VHlwZTpmdW5jdGlvbihhKXt2YXIgYj0hMSxjPSExLGQ9T3BlbkxheWVycy5Gb3JtYXQuWE1MLkNPTlRFTlRfVFlQRS5FTVBUWTtmb3IoYT1hLmZpcnN0Q2hpbGQ7YTthPWEubmV4dFNpYmxpbmcpe3N3aXRjaChhLm5vZGVUeXBlKXtjYXNlIDE6Yz0hMDticmVhaztjYXNlIDg6YnJlYWs7ZGVmYXVsdDpiPSEwfWlmKGMmJmIpYnJlYWt9aWYoYyYmYilkPU9wZW5MYXllcnMuRm9ybWF0LlhNTC5DT05URU5UX1RZUEUuTUlYRUQ7ZWxzZXtpZihjKXJldHVybiBPcGVuTGF5ZXJzLkZvcm1hdC5YTUwuQ09OVEVOVF9UWVBFLkNPTVBMRVg7aWYoYilyZXR1cm4gT3BlbkxheWVycy5Gb3JtYXQuWE1MLkNPTlRFTlRfVFlQRS5TSU1QTEV9cmV0dXJuIGR9LApoYXNBdHRyaWJ1dGVOUzpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9ITE7cmV0dXJuIGQ9YS5oYXNBdHRyaWJ1dGVOUz9hLmhhc0F0dHJpYnV0ZU5TKGIsYyk6ISF0aGlzLmdldEF0dHJpYnV0ZU5vZGVOUyhhLGIsYyl9LHNldEF0dHJpYnV0ZU5TOmZ1bmN0aW9uKGEsYixjLGQpe2lmKGEuc2V0QXR0cmlidXRlTlMpYS5zZXRBdHRyaWJ1dGVOUyhiLGMsZCk7ZWxzZSBpZih0aGlzLnhtbGRvbSliPyhiPWEub3duZXJEb2N1bWVudC5jcmVhdGVOb2RlKDIsYyxiKSxiLm5vZGVWYWx1ZT1kLGEuc2V0QXR0cmlidXRlTm9kZShiKSk6YS5zZXRBdHRyaWJ1dGUoYyxkKTtlbHNlIHRocm93InNldEF0dHJpYnV0ZU5TIG5vdCBpbXBsZW1lbnRlZCI7fSxjcmVhdGVFbGVtZW50TlNQbHVzOmZ1bmN0aW9uKGEsYil7Yj1ifHx7fTt2YXIgYz1iLnVyaXx8dGhpcy5uYW1lc3BhY2VzW2IucHJlZml4XTtjfHwoYz1hLmluZGV4T2YoIjoiKSxjPXRoaXMubmFtZXNwYWNlc1thLnN1YnN0cmluZygwLGMpXSk7Y3x8CihjPXRoaXMubmFtZXNwYWNlc1t0aGlzLmRlZmF1bHRQcmVmaXhdKTtjPXRoaXMuY3JlYXRlRWxlbWVudE5TKGMsYSk7Yi5hdHRyaWJ1dGVzJiZ0aGlzLnNldEF0dHJpYnV0ZXMoYyxiLmF0dHJpYnV0ZXMpO3ZhciBkPWIudmFsdWU7bnVsbCE9ZCYmYy5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZVRleHROb2RlKGQpKTtyZXR1cm4gY30sc2V0QXR0cmlidXRlczpmdW5jdGlvbihhLGIpe3ZhciBjLGQsZTtmb3IoZSBpbiBiKW51bGwhPWJbZV0mJmJbZV0udG9TdHJpbmcmJihjPWJbZV0udG9TdHJpbmcoKSxkPXRoaXMubmFtZXNwYWNlc1tlLnN1YnN0cmluZygwLGUuaW5kZXhPZigiOiIpKV18fG51bGwsdGhpcy5zZXRBdHRyaWJ1dGVOUyhhLGQsZSxjKSl9LHJlYWROb2RlOmZ1bmN0aW9uKGEsYil7Ynx8KGI9e30pO3ZhciBjPXRoaXMucmVhZGVyc1thLm5hbWVzcGFjZVVSST90aGlzLm5hbWVzcGFjZUFsaWFzW2EubmFtZXNwYWNlVVJJXTp0aGlzLmRlZmF1bHRQcmVmaXhdO2lmKGMpe3ZhciBkPQphLmxvY2FsTmFtZXx8YS5ub2RlTmFtZS5zcGxpdCgiOiIpLnBvcCgpOyhjPWNbZF18fGNbIioiXSkmJmMuYXBwbHkodGhpcyxbYSxiXSl9cmV0dXJuIGJ9LHJlYWRDaGlsZE5vZGVzOmZ1bmN0aW9uKGEsYil7Ynx8KGI9e30pO2Zvcih2YXIgYz1hLmNoaWxkTm9kZXMsZCxlPTAsZj1jLmxlbmd0aDtlPGY7KytlKWQ9Y1tlXSwxPT1kLm5vZGVUeXBlJiZ0aGlzLnJlYWROb2RlKGQsYik7cmV0dXJuIGJ9LHdyaXRlTm9kZTpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZT1hLmluZGV4T2YoIjoiKTswPGU/KGQ9YS5zdWJzdHJpbmcoMCxlKSxhPWEuc3Vic3RyaW5nKGUrMSkpOmQ9Yz90aGlzLm5hbWVzcGFjZUFsaWFzW2MubmFtZXNwYWNlVVJJXTp0aGlzLmRlZmF1bHRQcmVmaXg7Yj10aGlzLndyaXRlcnNbZF1bYV0uYXBwbHkodGhpcyxbYl0pO2MmJmMuYXBwZW5kQ2hpbGQoYik7cmV0dXJuIGJ9LGdldENoaWxkRWw6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBhJiZ0aGlzLmdldFRoaXNPck5leHRFbChhLmZpcnN0Q2hpbGQsCmIsYyl9LGdldE5leHRFbDpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGEmJnRoaXMuZ2V0VGhpc09yTmV4dEVsKGEubmV4dFNpYmxpbmcsYixjKX0sZ2V0VGhpc09yTmV4dEVsOmZ1bmN0aW9uKGEsYixjKXthOmZvcig7YTthPWEubmV4dFNpYmxpbmcpc3dpdGNoKGEubm9kZVR5cGUpe2Nhc2UgMTppZighKGImJmIhPT0oYS5sb2NhbE5hbWV8fGEubm9kZU5hbWUuc3BsaXQoIjoiKS5wb3AoKSl8fGMmJmMhPT1hLm5hbWVzcGFjZVVSSSkpYnJlYWsgYTthPW51bGw7YnJlYWsgYTtjYXNlIDM6aWYoL15ccyokLy50ZXN0KGEubm9kZVZhbHVlKSlicmVhaztjYXNlIDQ6Y2FzZSA2OmNhc2UgMTI6Y2FzZSAxMDpjYXNlIDExOmE9bnVsbDticmVhayBhfXJldHVybiBhfHxudWxsfSxsb29rdXBOYW1lc3BhY2VVUkk6ZnVuY3Rpb24oYSxiKXt2YXIgYz1udWxsO2lmKGEpaWYoYS5sb29rdXBOYW1lc3BhY2VVUkkpYz1hLmxvb2t1cE5hbWVzcGFjZVVSSShiKTtlbHNlIGE6c3dpdGNoKGEubm9kZVR5cGUpe2Nhc2UgMTppZihudWxsIT09CmEubmFtZXNwYWNlVVJJJiZhLnByZWZpeD09PWIpe2M9YS5uYW1lc3BhY2VVUkk7YnJlYWsgYX1pZihjPWEuYXR0cmlidXRlcy5sZW5ndGgpZm9yKHZhciBkLGU9MDtlPGM7KytlKWlmKGQ9YS5hdHRyaWJ1dGVzW2VdLCJ4bWxucyI9PT1kLnByZWZpeCYmZC5uYW1lPT09InhtbG5zOiIrYil7Yz1kLnZhbHVlfHxudWxsO2JyZWFrIGF9ZWxzZSBpZigieG1sbnMiPT09ZC5uYW1lJiZudWxsPT09Yil7Yz1kLnZhbHVlfHxudWxsO2JyZWFrIGF9Yz10aGlzLmxvb2t1cE5hbWVzcGFjZVVSSShhLnBhcmVudE5vZGUsYik7YnJlYWsgYTtjYXNlIDI6Yz10aGlzLmxvb2t1cE5hbWVzcGFjZVVSSShhLm93bmVyRWxlbWVudCxiKTticmVhayBhO2Nhc2UgOTpjPXRoaXMubG9va3VwTmFtZXNwYWNlVVJJKGEuZG9jdW1lbnRFbGVtZW50LGIpO2JyZWFrIGE7Y2FzZSA2OmNhc2UgMTI6Y2FzZSAxMDpjYXNlIDExOmJyZWFrIGE7ZGVmYXVsdDpjPXRoaXMubG9va3VwTmFtZXNwYWNlVVJJKGEucGFyZW50Tm9kZSwKYil9cmV0dXJuIGN9LGdldFhNTERvYzpmdW5jdGlvbigpe09wZW5MYXllcnMuRm9ybWF0LlhNTC5kb2N1bWVudHx8dGhpcy54bWxkb218fChkb2N1bWVudC5pbXBsZW1lbnRhdGlvbiYmZG9jdW1lbnQuaW1wbGVtZW50YXRpb24uY3JlYXRlRG9jdW1lbnQ/T3BlbkxheWVycy5Gb3JtYXQuWE1MLmRvY3VtZW50PWRvY3VtZW50LmltcGxlbWVudGF0aW9uLmNyZWF0ZURvY3VtZW50KCIiLCIiLG51bGwpOiF0aGlzLnhtbGRvbSYmd2luZG93LkFjdGl2ZVhPYmplY3QmJih0aGlzLnhtbGRvbT1uZXcgQWN0aXZlWE9iamVjdCgiTWljcm9zb2Z0LlhNTERPTSIpKSk7cmV0dXJuIE9wZW5MYXllcnMuRm9ybWF0LlhNTC5kb2N1bWVudHx8dGhpcy54bWxkb219LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuRm9ybWF0LlhNTCJ9KTtPcGVuTGF5ZXJzLkZvcm1hdC5YTUwuQ09OVEVOVF9UWVBFPXtFTVBUWTowLFNJTVBMRToxLENPTVBMRVg6MixNSVhFRDozfTsKT3BlbkxheWVycy5Gb3JtYXQuWE1MLmxvb2t1cE5hbWVzcGFjZVVSST1PcGVuTGF5ZXJzLkZ1bmN0aW9uLmJpbmQoT3BlbkxheWVycy5Gb3JtYXQuWE1MLnByb3RvdHlwZS5sb29rdXBOYW1lc3BhY2VVUkksT3BlbkxheWVycy5Gb3JtYXQuWE1MLnByb3RvdHlwZSk7T3BlbkxheWVycy5Gb3JtYXQuWE1MLmRvY3VtZW50PW51bGw7T3BlbkxheWVycy5Gb3JtYXQuV0ZTVD1mdW5jdGlvbihhKXthPU9wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKGEsT3BlbkxheWVycy5Gb3JtYXQuV0ZTVC5ERUZBVUxUUyk7dmFyIGI9T3BlbkxheWVycy5Gb3JtYXQuV0ZTVFsidiIrYS52ZXJzaW9uLnJlcGxhY2UoL1wuL2csIl8iKV07aWYoIWIpdGhyb3ciVW5zdXBwb3J0ZWQgV0ZTVCB2ZXJzaW9uOiAiK2EudmVyc2lvbjtyZXR1cm4gbmV3IGIoYSl9O09wZW5MYXllcnMuRm9ybWF0LldGU1QuREVGQVVMVFM9e3ZlcnNpb246IjEuMC4wIn07T3BlbkxheWVycy5GZWF0dXJlPU9wZW5MYXllcnMuQ2xhc3Moe2xheWVyOm51bGwsaWQ6bnVsbCxsb25sYXQ6bnVsbCxkYXRhOm51bGwsbWFya2VyOm51bGwscG9wdXBDbGFzczpudWxsLHBvcHVwOm51bGwsaW5pdGlhbGl6ZTpmdW5jdGlvbihhLGIsYyl7dGhpcy5sYXllcj1hO3RoaXMubG9ubGF0PWI7dGhpcy5kYXRhPW51bGwhPWM/Yzp7fTt0aGlzLmlkPU9wZW5MYXllcnMuVXRpbC5jcmVhdGVVbmlxdWVJRCh0aGlzLkNMQVNTX05BTUUrIl8iKX0sZGVzdHJveTpmdW5jdGlvbigpe251bGwhPXRoaXMubGF5ZXImJm51bGwhPXRoaXMubGF5ZXIubWFwJiZudWxsIT10aGlzLnBvcHVwJiZ0aGlzLmxheWVyLm1hcC5yZW1vdmVQb3B1cCh0aGlzLnBvcHVwKTtudWxsIT10aGlzLmxheWVyJiZudWxsIT10aGlzLm1hcmtlciYmdGhpcy5sYXllci5yZW1vdmVNYXJrZXIodGhpcy5tYXJrZXIpO3RoaXMuZGF0YT10aGlzLmxvbmxhdD10aGlzLmlkPXRoaXMubGF5ZXI9bnVsbDtudWxsIT10aGlzLm1hcmtlciYmCih0aGlzLmRlc3Ryb3lNYXJrZXIodGhpcy5tYXJrZXIpLHRoaXMubWFya2VyPW51bGwpO251bGwhPXRoaXMucG9wdXAmJih0aGlzLmRlc3Ryb3lQb3B1cCh0aGlzLnBvcHVwKSx0aGlzLnBvcHVwPW51bGwpfSxvblNjcmVlbjpmdW5jdGlvbigpe3ZhciBhPSExO251bGwhPXRoaXMubGF5ZXImJm51bGwhPXRoaXMubGF5ZXIubWFwJiYoYT10aGlzLmxheWVyLm1hcC5nZXRFeHRlbnQoKS5jb250YWluc0xvbkxhdCh0aGlzLmxvbmxhdCkpO3JldHVybiBhfSxjcmVhdGVNYXJrZXI6ZnVuY3Rpb24oKXtudWxsIT10aGlzLmxvbmxhdCYmKHRoaXMubWFya2VyPW5ldyBPcGVuTGF5ZXJzLk1hcmtlcih0aGlzLmxvbmxhdCx0aGlzLmRhdGEuaWNvbikpO3JldHVybiB0aGlzLm1hcmtlcn0sZGVzdHJveU1hcmtlcjpmdW5jdGlvbigpe3RoaXMubWFya2VyLmRlc3Ryb3koKX0sY3JlYXRlUG9wdXA6ZnVuY3Rpb24oYSl7bnVsbCE9dGhpcy5sb25sYXQmJih0aGlzLnBvcHVwfHwodGhpcy5wb3B1cD1uZXcgKHRoaXMucG9wdXBDbGFzcz8KdGhpcy5wb3B1cENsYXNzOk9wZW5MYXllcnMuUG9wdXAuQW5jaG9yZWQpKHRoaXMuaWQrIl9wb3B1cCIsdGhpcy5sb25sYXQsdGhpcy5kYXRhLnBvcHVwU2l6ZSx0aGlzLmRhdGEucG9wdXBDb250ZW50SFRNTCx0aGlzLm1hcmtlcj90aGlzLm1hcmtlci5pY29uOm51bGwsYSkpLG51bGwhPXRoaXMuZGF0YS5vdmVyZmxvdyYmKHRoaXMucG9wdXAuY29udGVudERpdi5zdHlsZS5vdmVyZmxvdz10aGlzLmRhdGEub3ZlcmZsb3cpLHRoaXMucG9wdXAuZmVhdHVyZT10aGlzKTtyZXR1cm4gdGhpcy5wb3B1cH0sZGVzdHJveVBvcHVwOmZ1bmN0aW9uKCl7dGhpcy5wb3B1cCYmKHRoaXMucG9wdXAuZmVhdHVyZT1udWxsLHRoaXMucG9wdXAuZGVzdHJveSgpLHRoaXMucG9wdXA9bnVsbCl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuRmVhdHVyZSJ9KTtPcGVuTGF5ZXJzLlN0YXRlPXtVTktOT1dOOiJVbmtub3duIixJTlNFUlQ6Ikluc2VydCIsVVBEQVRFOiJVcGRhdGUiLERFTEVURToiRGVsZXRlIn07Ck9wZW5MYXllcnMuRmVhdHVyZS5WZWN0b3I9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkZlYXR1cmUse2ZpZDpudWxsLGdlb21ldHJ5Om51bGwsYXR0cmlidXRlczpudWxsLGJvdW5kczpudWxsLHN0YXRlOm51bGwsc3R5bGU6bnVsbCx1cmw6bnVsbCxyZW5kZXJJbnRlbnQ6ImRlZmF1bHQiLG1vZGlmaWVkOm51bGwsaW5pdGlhbGl6ZTpmdW5jdGlvbihhLGIsYyl7T3BlbkxheWVycy5GZWF0dXJlLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsW251bGwsbnVsbCxiXSk7dGhpcy5sb25sYXQ9bnVsbDt0aGlzLmdlb21ldHJ5PWE/YTpudWxsO3RoaXMuc3RhdGU9bnVsbDt0aGlzLmF0dHJpYnV0ZXM9e307YiYmKHRoaXMuYXR0cmlidXRlcz1PcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHRoaXMuYXR0cmlidXRlcyxiKSk7dGhpcy5zdHlsZT1jP2M6bnVsbH0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMubGF5ZXImJih0aGlzLmxheWVyLnJlbW92ZUZlYXR1cmVzKHRoaXMpLHRoaXMubGF5ZXI9Cm51bGwpO3RoaXMubW9kaWZpZWQ9dGhpcy5nZW9tZXRyeT1udWxsO09wZW5MYXllcnMuRmVhdHVyZS5wcm90b3R5cGUuZGVzdHJveS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLkZlYXR1cmUuVmVjdG9yKHRoaXMuZ2VvbWV0cnk/dGhpcy5nZW9tZXRyeS5jbG9uZSgpOm51bGwsdGhpcy5hdHRyaWJ1dGVzLHRoaXMuc3R5bGUpfSxvblNjcmVlbjpmdW5jdGlvbihhKXt2YXIgYj0hMTt0aGlzLmxheWVyJiZ0aGlzLmxheWVyLm1hcCYmKGI9dGhpcy5sYXllci5tYXAuZ2V0RXh0ZW50KCksYT8oYT10aGlzLmdlb21ldHJ5LmdldEJvdW5kcygpLGI9Yi5pbnRlcnNlY3RzQm91bmRzKGEpKTpiPWIudG9HZW9tZXRyeSgpLmludGVyc2VjdHModGhpcy5nZW9tZXRyeSkpO3JldHVybiBifSxnZXRWaXNpYmlsaXR5OmZ1bmN0aW9uKCl7cmV0dXJuISh0aGlzLnN0eWxlJiYibm9uZSI9PXRoaXMuc3R5bGUuZGlzcGxheXx8IXRoaXMubGF5ZXJ8fAp0aGlzLmxheWVyJiZ0aGlzLmxheWVyLnN0eWxlTWFwJiYibm9uZSI9PXRoaXMubGF5ZXIuc3R5bGVNYXAuY3JlYXRlU3ltYm9saXplcih0aGlzLHRoaXMucmVuZGVySW50ZW50KS5kaXNwbGF5fHx0aGlzLmxheWVyJiYhdGhpcy5sYXllci5nZXRWaXNpYmlsaXR5KCkpfSxjcmVhdGVNYXJrZXI6ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbH0sZGVzdHJveU1hcmtlcjpmdW5jdGlvbigpe30sY3JlYXRlUG9wdXA6ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbH0sYXRQb2ludDpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9ITE7dGhpcy5nZW9tZXRyeSYmKGQ9dGhpcy5nZW9tZXRyeS5hdFBvaW50KGEsYixjKSk7cmV0dXJuIGR9LGRlc3Ryb3lQb3B1cDpmdW5jdGlvbigpe30sbW92ZTpmdW5jdGlvbihhKXtpZih0aGlzLmxheWVyJiZ0aGlzLmdlb21ldHJ5Lm1vdmUpe2E9Ik9wZW5MYXllcnMuTG9uTGF0Ij09YS5DTEFTU19OQU1FP3RoaXMubGF5ZXIuZ2V0Vmlld1BvcnRQeEZyb21Mb25MYXQoYSk6YTt2YXIgYj0KdGhpcy5sYXllci5nZXRWaWV3UG9ydFB4RnJvbUxvbkxhdCh0aGlzLmdlb21ldHJ5LmdldEJvdW5kcygpLmdldENlbnRlckxvbkxhdCgpKSxjPXRoaXMubGF5ZXIubWFwLmdldFJlc29sdXRpb24oKTt0aGlzLmdlb21ldHJ5Lm1vdmUoYyooYS54LWIueCksYyooYi55LWEueSkpO3RoaXMubGF5ZXIuZHJhd0ZlYXR1cmUodGhpcyk7cmV0dXJuIGJ9fSx0b1N0YXRlOmZ1bmN0aW9uKGEpe2lmKGE9PU9wZW5MYXllcnMuU3RhdGUuVVBEQVRFKXN3aXRjaCh0aGlzLnN0YXRlKXtjYXNlIE9wZW5MYXllcnMuU3RhdGUuVU5LTk9XTjpjYXNlIE9wZW5MYXllcnMuU3RhdGUuREVMRVRFOnRoaXMuc3RhdGU9YX1lbHNlIGlmKGE9PU9wZW5MYXllcnMuU3RhdGUuSU5TRVJUKXN3aXRjaCh0aGlzLnN0YXRlKXtjYXNlIE9wZW5MYXllcnMuU3RhdGUuVU5LTk9XTjpicmVhaztkZWZhdWx0OnRoaXMuc3RhdGU9YX1lbHNlIGlmKGE9PU9wZW5MYXllcnMuU3RhdGUuREVMRVRFKXN3aXRjaCh0aGlzLnN0YXRlKXtjYXNlIE9wZW5MYXllcnMuU3RhdGUuVU5LTk9XTjpjYXNlIE9wZW5MYXllcnMuU3RhdGUuVVBEQVRFOnRoaXMuc3RhdGU9CmF9ZWxzZSBhPT1PcGVuTGF5ZXJzLlN0YXRlLlVOS05PV04mJih0aGlzLnN0YXRlPWEpfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkZlYXR1cmUuVmVjdG9yIn0pOwpPcGVuTGF5ZXJzLkZlYXR1cmUuVmVjdG9yLnN0eWxlPXsiZGVmYXVsdCI6e2ZpbGxDb2xvcjoiI2VlOTkwMCIsZmlsbE9wYWNpdHk6MC40LGhvdmVyRmlsbENvbG9yOiJ3aGl0ZSIsaG92ZXJGaWxsT3BhY2l0eTowLjgsc3Ryb2tlQ29sb3I6IiNlZTk5MDAiLHN0cm9rZU9wYWNpdHk6MSxzdHJva2VXaWR0aDoxLHN0cm9rZUxpbmVjYXA6InJvdW5kIixzdHJva2VEYXNoc3R5bGU6InNvbGlkIixob3ZlclN0cm9rZUNvbG9yOiJyZWQiLGhvdmVyU3Ryb2tlT3BhY2l0eToxLGhvdmVyU3Ryb2tlV2lkdGg6MC4yLHBvaW50UmFkaXVzOjYsaG92ZXJQb2ludFJhZGl1czoxLGhvdmVyUG9pbnRVbml0OiIlIixwb2ludGVyRXZlbnRzOiJ2aXNpYmxlUGFpbnRlZCIsY3Vyc29yOiJpbmhlcml0Iixmb250Q29sb3I6IiMwMDAwMDAiLGxhYmVsQWxpZ246ImNtIixsYWJlbE91dGxpbmVDb2xvcjoid2hpdGUiLGxhYmVsT3V0bGluZVdpZHRoOjN9LHNlbGVjdDp7ZmlsbENvbG9yOiJibHVlIixmaWxsT3BhY2l0eTowLjQsCmhvdmVyRmlsbENvbG9yOiJ3aGl0ZSIsaG92ZXJGaWxsT3BhY2l0eTowLjgsc3Ryb2tlQ29sb3I6ImJsdWUiLHN0cm9rZU9wYWNpdHk6MSxzdHJva2VXaWR0aDoyLHN0cm9rZUxpbmVjYXA6InJvdW5kIixzdHJva2VEYXNoc3R5bGU6InNvbGlkIixob3ZlclN0cm9rZUNvbG9yOiJyZWQiLGhvdmVyU3Ryb2tlT3BhY2l0eToxLGhvdmVyU3Ryb2tlV2lkdGg6MC4yLHBvaW50UmFkaXVzOjYsaG92ZXJQb2ludFJhZGl1czoxLGhvdmVyUG9pbnRVbml0OiIlIixwb2ludGVyRXZlbnRzOiJ2aXNpYmxlUGFpbnRlZCIsY3Vyc29yOiJwb2ludGVyIixmb250Q29sb3I6IiMwMDAwMDAiLGxhYmVsQWxpZ246ImNtIixsYWJlbE91dGxpbmVDb2xvcjoid2hpdGUiLGxhYmVsT3V0bGluZVdpZHRoOjN9LHRlbXBvcmFyeTp7ZmlsbENvbG9yOiIjNjZjY2NjIixmaWxsT3BhY2l0eTowLjIsaG92ZXJGaWxsQ29sb3I6IndoaXRlIixob3ZlckZpbGxPcGFjaXR5OjAuOCxzdHJva2VDb2xvcjoiIzY2Y2NjYyIsc3Ryb2tlT3BhY2l0eToxLApzdHJva2VMaW5lY2FwOiJyb3VuZCIsc3Ryb2tlV2lkdGg6MixzdHJva2VEYXNoc3R5bGU6InNvbGlkIixob3ZlclN0cm9rZUNvbG9yOiJyZWQiLGhvdmVyU3Ryb2tlT3BhY2l0eToxLGhvdmVyU3Ryb2tlV2lkdGg6MC4yLHBvaW50UmFkaXVzOjYsaG92ZXJQb2ludFJhZGl1czoxLGhvdmVyUG9pbnRVbml0OiIlIixwb2ludGVyRXZlbnRzOiJ2aXNpYmxlUGFpbnRlZCIsY3Vyc29yOiJpbmhlcml0Iixmb250Q29sb3I6IiMwMDAwMDAiLGxhYmVsQWxpZ246ImNtIixsYWJlbE91dGxpbmVDb2xvcjoid2hpdGUiLGxhYmVsT3V0bGluZVdpZHRoOjN9LCJkZWxldGUiOntkaXNwbGF5OiJub25lIn19O09wZW5MYXllcnMuU3R5bGU9T3BlbkxheWVycy5DbGFzcyh7aWQ6bnVsbCxuYW1lOm51bGwsdGl0bGU6bnVsbCxkZXNjcmlwdGlvbjpudWxsLGxheWVyTmFtZTpudWxsLGlzRGVmYXVsdDohMSxydWxlczpudWxsLGNvbnRleHQ6bnVsbCxkZWZhdWx0U3R5bGU6bnVsbCxkZWZhdWx0c1BlclN5bWJvbGl6ZXI6ITEscHJvcGVydHlTdHlsZXM6bnVsbCxpbml0aWFsaXplOmZ1bmN0aW9uKGEsYil7T3BlbkxheWVycy5VdGlsLmV4dGVuZCh0aGlzLGIpO3RoaXMucnVsZXM9W107YiYmYi5ydWxlcyYmdGhpcy5hZGRSdWxlcyhiLnJ1bGVzKTt0aGlzLnNldERlZmF1bHRTdHlsZShhfHxPcGVuTGF5ZXJzLkZlYXR1cmUuVmVjdG9yLnN0eWxlWyJkZWZhdWx0Il0pO3RoaXMuaWQ9T3BlbkxheWVycy5VdGlsLmNyZWF0ZVVuaXF1ZUlEKHRoaXMuQ0xBU1NfTkFNRSsiXyIpfSxkZXN0cm95OmZ1bmN0aW9uKCl7Zm9yKHZhciBhPTAsYj10aGlzLnJ1bGVzLmxlbmd0aDthPGI7YSsrKXRoaXMucnVsZXNbYV0uZGVzdHJveSgpLAp0aGlzLnJ1bGVzW2FdPW51bGw7dGhpcy5kZWZhdWx0U3R5bGU9dGhpcy5ydWxlcz1udWxsfSxjcmVhdGVTeW1ib2xpemVyOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj10aGlzLmRlZmF1bHRzUGVyU3ltYm9saXplcj97fTp0aGlzLmNyZWF0ZUxpdGVyYWxzKE9wZW5MYXllcnMuVXRpbC5leHRlbmQoe30sdGhpcy5kZWZhdWx0U3R5bGUpLGEpLGM9dGhpcy5ydWxlcyxkLGU9W10sZj0hMSxnPTAsaD1jLmxlbmd0aDtnPGg7ZysrKWQ9Y1tnXSxkLmV2YWx1YXRlKGEpJiYoZCBpbnN0YW5jZW9mIE9wZW5MYXllcnMuUnVsZSYmZC5lbHNlRmlsdGVyP2UucHVzaChkKTooZj0hMCx0aGlzLmFwcGx5U3ltYm9saXplcihkLGIsYSkpKTtpZighMT09ZiYmMDxlLmxlbmd0aClmb3IoZj0hMCxnPTAsaD1lLmxlbmd0aDtnPGg7ZysrKXRoaXMuYXBwbHlTeW1ib2xpemVyKGVbZ10sYixhKTswPGMubGVuZ3RoJiYhMT09ZiYmKGIuZGlzcGxheT0ibm9uZSIpO251bGwhPWIubGFiZWwmJiJzdHJpbmciIT09dHlwZW9mIGIubGFiZWwmJgooYi5sYWJlbD1TdHJpbmcoYi5sYWJlbCkpO3JldHVybiBifSxhcHBseVN5bWJvbGl6ZXI6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWMuZ2VvbWV0cnk/dGhpcy5nZXRTeW1ib2xpemVyUHJlZml4KGMuZ2VvbWV0cnkpOk9wZW5MYXllcnMuU3R5bGUuU1lNQk9MSVpFUl9QUkVGSVhFU1swXTthPWEuc3ltYm9saXplcltkXXx8YS5zeW1ib2xpemVyOyEwPT09dGhpcy5kZWZhdWx0c1BlclN5bWJvbGl6ZXImJihkPXRoaXMuZGVmYXVsdFN0eWxlLE9wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKGEse3BvaW50UmFkaXVzOmQucG9pbnRSYWRpdXN9KSwhMCE9PWEuc3Ryb2tlJiYhMCE9PWEuZ3JhcGhpY3x8T3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoYSx7c3Ryb2tlV2lkdGg6ZC5zdHJva2VXaWR0aCxzdHJva2VDb2xvcjpkLnN0cm9rZUNvbG9yLHN0cm9rZU9wYWNpdHk6ZC5zdHJva2VPcGFjaXR5LHN0cm9rZURhc2hzdHlsZTpkLnN0cm9rZURhc2hzdHlsZSxzdHJva2VMaW5lY2FwOmQuc3Ryb2tlTGluZWNhcH0pLAohMCE9PWEuZmlsbCYmITAhPT1hLmdyYXBoaWN8fE9wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKGEse2ZpbGxDb2xvcjpkLmZpbGxDb2xvcixmaWxsT3BhY2l0eTpkLmZpbGxPcGFjaXR5fSksITA9PT1hLmdyYXBoaWMmJk9wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKGEse3BvaW50UmFkaXVzOnRoaXMuZGVmYXVsdFN0eWxlLnBvaW50UmFkaXVzLGV4dGVybmFsR3JhcGhpYzp0aGlzLmRlZmF1bHRTdHlsZS5leHRlcm5hbEdyYXBoaWMsZ3JhcGhpY05hbWU6dGhpcy5kZWZhdWx0U3R5bGUuZ3JhcGhpY05hbWUsZ3JhcGhpY09wYWNpdHk6dGhpcy5kZWZhdWx0U3R5bGUuZ3JhcGhpY09wYWNpdHksZ3JhcGhpY1dpZHRoOnRoaXMuZGVmYXVsdFN0eWxlLmdyYXBoaWNXaWR0aCxncmFwaGljSGVpZ2h0OnRoaXMuZGVmYXVsdFN0eWxlLmdyYXBoaWNIZWlnaHQsZ3JhcGhpY1hPZmZzZXQ6dGhpcy5kZWZhdWx0U3R5bGUuZ3JhcGhpY1hPZmZzZXQsZ3JhcGhpY1lPZmZzZXQ6dGhpcy5kZWZhdWx0U3R5bGUuZ3JhcGhpY1lPZmZzZXR9KSk7CnJldHVybiB0aGlzLmNyZWF0ZUxpdGVyYWxzKE9wZW5MYXllcnMuVXRpbC5leHRlbmQoYixhKSxjKX0sY3JlYXRlTGl0ZXJhbHM6ZnVuY3Rpb24oYSxiKXt2YXIgYz1PcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHt9LGIuYXR0cmlidXRlc3x8Yi5kYXRhKTtPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKGMsdGhpcy5jb250ZXh0KTtmb3IodmFyIGQgaW4gdGhpcy5wcm9wZXJ0eVN0eWxlcylhW2RdPU9wZW5MYXllcnMuU3R5bGUuY3JlYXRlTGl0ZXJhbChhW2RdLGMsYixkKTtyZXR1cm4gYX0sZmluZFByb3BlcnR5U3R5bGVzOmZ1bmN0aW9uKCl7dmFyIGE9e307dGhpcy5hZGRQcm9wZXJ0eVN0eWxlcyhhLHRoaXMuZGVmYXVsdFN0eWxlKTtmb3IodmFyIGI9dGhpcy5ydWxlcyxjLGQsZT0wLGY9Yi5sZW5ndGg7ZTxmO2UrKyl7Yz1iW2VdLnN5bWJvbGl6ZXI7Zm9yKHZhciBnIGluIGMpaWYoZD1jW2ddLCJvYmplY3QiPT10eXBlb2YgZCl0aGlzLmFkZFByb3BlcnR5U3R5bGVzKGEsZCk7ZWxzZXt0aGlzLmFkZFByb3BlcnR5U3R5bGVzKGEsCmMpO2JyZWFrfX1yZXR1cm4gYX0sYWRkUHJvcGVydHlTdHlsZXM6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkO2ZvcihkIGluIGIpYz1iW2RdLCJzdHJpbmciPT10eXBlb2YgYyYmYy5tYXRjaCgvXCRce1x3K1x9LykmJihhW2RdPSEwKTtyZXR1cm4gYX0sYWRkUnVsZXM6ZnVuY3Rpb24oYSl7QXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkodGhpcy5ydWxlcyxhKTt0aGlzLnByb3BlcnR5U3R5bGVzPXRoaXMuZmluZFByb3BlcnR5U3R5bGVzKCl9LHNldERlZmF1bHRTdHlsZTpmdW5jdGlvbihhKXt0aGlzLmRlZmF1bHRTdHlsZT1hO3RoaXMucHJvcGVydHlTdHlsZXM9dGhpcy5maW5kUHJvcGVydHlTdHlsZXMoKX0sZ2V0U3ltYm9saXplclByZWZpeDpmdW5jdGlvbihhKXtmb3IodmFyIGI9T3BlbkxheWVycy5TdHlsZS5TWU1CT0xJWkVSX1BSRUZJWEVTLGM9MCxkPWIubGVuZ3RoO2M8ZDtjKyspaWYoLTEhPWEuQ0xBU1NfTkFNRS5pbmRleE9mKGJbY10pKXJldHVybiBiW2NdfSxjbG9uZTpmdW5jdGlvbigpe3ZhciBhPQpPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHt9LHRoaXMpO2lmKHRoaXMucnVsZXMpe2EucnVsZXM9W107Zm9yKHZhciBiPTAsYz10aGlzLnJ1bGVzLmxlbmd0aDtiPGM7KytiKWEucnVsZXMucHVzaCh0aGlzLnJ1bGVzW2JdLmNsb25lKCkpfWEuY29udGV4dD10aGlzLmNvbnRleHQmJk9wZW5MYXllcnMuVXRpbC5leHRlbmQoe30sdGhpcy5jb250ZXh0KTtiPU9wZW5MYXllcnMuVXRpbC5leHRlbmQoe30sdGhpcy5kZWZhdWx0U3R5bGUpO3JldHVybiBuZXcgT3BlbkxheWVycy5TdHlsZShiLGEpfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLlN0eWxlIn0pO09wZW5MYXllcnMuU3R5bGUuY3JlYXRlTGl0ZXJhbD1mdW5jdGlvbihhLGIsYyxkKXsic3RyaW5nIj09dHlwZW9mIGEmJi0xIT1hLmluZGV4T2YoIiR7IikmJihhPU9wZW5MYXllcnMuU3RyaW5nLmZvcm1hdChhLGIsW2MsZF0pLGE9aXNOYU4oYSl8fCFhP2E6cGFyc2VGbG9hdChhKSk7cmV0dXJuIGF9OwpPcGVuTGF5ZXJzLlN0eWxlLlNZTUJPTElaRVJfUFJFRklYRVM9WyJQb2ludCIsIkxpbmUiLCJQb2x5Z29uIiwiVGV4dCIsIlJhc3RlciJdO09wZW5MYXllcnMuRmlsdGVyPU9wZW5MYXllcnMuQ2xhc3Moe2luaXRpYWxpemU6ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5VdGlsLmV4dGVuZCh0aGlzLGEpfSxkZXN0cm95OmZ1bmN0aW9uKCl7fSxldmFsdWF0ZTpmdW5jdGlvbihhKXtyZXR1cm4hMH0sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbH0sdG9TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gT3BlbkxheWVycy5Gb3JtYXQmJk9wZW5MYXllcnMuRm9ybWF0LkNRTD9PcGVuTGF5ZXJzLkZvcm1hdC5DUUwucHJvdG90eXBlLndyaXRlKHRoaXMpOk9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0aGlzKX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5GaWx0ZXIifSk7T3BlbkxheWVycy5GaWx0ZXIuU3BhdGlhbD1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuRmlsdGVyLHt0eXBlOm51bGwscHJvcGVydHk6bnVsbCx2YWx1ZTpudWxsLGRpc3RhbmNlOm51bGwsZGlzdGFuY2VVbml0czpudWxsLGV2YWx1YXRlOmZ1bmN0aW9uKGEpe3ZhciBiPSExO3N3aXRjaCh0aGlzLnR5cGUpe2Nhc2UgT3BlbkxheWVycy5GaWx0ZXIuU3BhdGlhbC5CQk9YOmNhc2UgT3BlbkxheWVycy5GaWx0ZXIuU3BhdGlhbC5JTlRFUlNFQ1RTOmlmKGEuZ2VvbWV0cnkpe3ZhciBjPXRoaXMudmFsdWU7Ik9wZW5MYXllcnMuQm91bmRzIj09dGhpcy52YWx1ZS5DTEFTU19OQU1FJiYoYz10aGlzLnZhbHVlLnRvR2VvbWV0cnkoKSk7YS5nZW9tZXRyeS5pbnRlcnNlY3RzKGMpJiYoYj0hMCl9YnJlYWs7ZGVmYXVsdDp0aHJvdyBFcnJvcigiZXZhbHVhdGUgaXMgbm90IGltcGxlbWVudGVkIGZvciB0aGlzIGZpbHRlciB0eXBlLiIpO31yZXR1cm4gYn0sY2xvbmU6ZnVuY3Rpb24oKXt2YXIgYT0KT3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoe3ZhbHVlOnRoaXMudmFsdWUmJnRoaXMudmFsdWUuY2xvbmUmJnRoaXMudmFsdWUuY2xvbmUoKX0sdGhpcyk7cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLkZpbHRlci5TcGF0aWFsKGEpfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkZpbHRlci5TcGF0aWFsIn0pO09wZW5MYXllcnMuRmlsdGVyLlNwYXRpYWwuQkJPWD0iQkJPWCI7T3BlbkxheWVycy5GaWx0ZXIuU3BhdGlhbC5JTlRFUlNFQ1RTPSJJTlRFUlNFQ1RTIjtPcGVuTGF5ZXJzLkZpbHRlci5TcGF0aWFsLkRXSVRISU49IkRXSVRISU4iO09wZW5MYXllcnMuRmlsdGVyLlNwYXRpYWwuV0lUSElOPSJXSVRISU4iO09wZW5MYXllcnMuRmlsdGVyLlNwYXRpYWwuQ09OVEFJTlM9IkNPTlRBSU5TIjtPcGVuTGF5ZXJzLkZpbHRlci5GZWF0dXJlSWQ9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkZpbHRlcix7ZmlkczpudWxsLHR5cGU6IkZJRCIsaW5pdGlhbGl6ZTpmdW5jdGlvbihhKXt0aGlzLmZpZHM9W107T3BlbkxheWVycy5GaWx0ZXIucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxbYV0pfSxldmFsdWF0ZTpmdW5jdGlvbihhKXtmb3IodmFyIGI9MCxjPXRoaXMuZmlkcy5sZW5ndGg7YjxjO2IrKylpZigoYS5maWR8fGEuaWQpPT10aGlzLmZpZHNbYl0pcmV0dXJuITA7cmV0dXJuITF9LGNsb25lOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IE9wZW5MYXllcnMuRmlsdGVyLkZlYXR1cmVJZDtPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKGEsdGhpcyk7YS5maWRzPXRoaXMuZmlkcy5zbGljZSgpO3JldHVybiBhfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkZpbHRlci5GZWF0dXJlSWQifSk7T3BlbkxheWVycy5Gb3JtYXQuV0ZTVC52MT1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuRm9ybWF0LlhNTCx7bmFtZXNwYWNlczp7eGxpbms6Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiLHhzaToiaHR0cDovL3d3dy53My5vcmcvMjAwMS9YTUxTY2hlbWEtaW5zdGFuY2UiLHdmczoiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC93ZnMiLGdtbDoiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9nbWwiLG9nYzoiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9vZ2MiLG93czoiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9vd3MifSxkZWZhdWx0UHJlZml4OiJ3ZnMiLHZlcnNpb246bnVsbCxzY2hlbWFMb2NhdGlvbnM6bnVsbCxzcnNOYW1lOm51bGwsZXh0cmFjdEF0dHJpYnV0ZXM6ITAseHk6ITAsc3RhdGVOYW1lOm51bGwsaW5pdGlhbGl6ZTpmdW5jdGlvbihhKXt0aGlzLnN0YXRlTmFtZT17fTt0aGlzLnN0YXRlTmFtZVtPcGVuTGF5ZXJzLlN0YXRlLklOU0VSVF09IndmczpJbnNlcnQiO3RoaXMuc3RhdGVOYW1lW09wZW5MYXllcnMuU3RhdGUuVVBEQVRFXT0KIndmczpVcGRhdGUiO3RoaXMuc3RhdGVOYW1lW09wZW5MYXllcnMuU3RhdGUuREVMRVRFXT0id2ZzOkRlbGV0ZSI7T3BlbkxheWVycy5Gb3JtYXQuWE1MLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsW2FdKX0sZ2V0U3JzTmFtZTpmdW5jdGlvbihhLGIpe3ZhciBjPWImJmIuc3JzTmFtZTtjfHwoYz1hJiZhLmxheWVyP2EubGF5ZXIucHJvamVjdGlvbi5nZXRDb2RlKCk6dGhpcy5zcnNOYW1lKTtyZXR1cm4gY30scmVhZDpmdW5jdGlvbihhLGIpe2I9Ynx8e307T3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoYix7b3V0cHV0OiJmZWF0dXJlcyJ9KTsic3RyaW5nIj09dHlwZW9mIGEmJihhPU9wZW5MYXllcnMuRm9ybWF0LlhNTC5wcm90b3R5cGUucmVhZC5hcHBseSh0aGlzLFthXSkpO2EmJjk9PWEubm9kZVR5cGUmJihhPWEuZG9jdW1lbnRFbGVtZW50KTt2YXIgYz17fTthJiZ0aGlzLnJlYWROb2RlKGEsYywhMCk7Yy5mZWF0dXJlcyYmImZlYXR1cmVzIj09PWIub3V0cHV0JiYKKGM9Yy5mZWF0dXJlcyk7cmV0dXJuIGN9LHJlYWRlcnM6e3dmczp7RmVhdHVyZUNvbGxlY3Rpb246ZnVuY3Rpb24oYSxiKXtiLmZlYXR1cmVzPVtdO3RoaXMucmVhZENoaWxkTm9kZXMoYSxiKX19fSx3cml0ZTpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMud3JpdGVOb2RlKCJ3ZnM6VHJhbnNhY3Rpb24iLHtmZWF0dXJlczphLG9wdGlvbnM6Yn0pLGQ9dGhpcy5zY2hlbWFMb2NhdGlvbkF0dHIoKTtkJiZ0aGlzLnNldEF0dHJpYnV0ZU5TKGMsdGhpcy5uYW1lc3BhY2VzLnhzaSwieHNpOnNjaGVtYUxvY2F0aW9uIixkKTtyZXR1cm4gT3BlbkxheWVycy5Gb3JtYXQuWE1MLnByb3RvdHlwZS53cml0ZS5hcHBseSh0aGlzLFtjXSl9LHdyaXRlcnM6e3dmczp7R2V0RmVhdHVyZTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoIndmczpHZXRGZWF0dXJlIix7YXR0cmlidXRlczp7c2VydmljZToiV0ZTIix2ZXJzaW9uOnRoaXMudmVyc2lvbixoYW5kbGU6YSYmYS5oYW5kbGUsCm91dHB1dEZvcm1hdDphJiZhLm91dHB1dEZvcm1hdCxtYXhGZWF0dXJlczphJiZhLm1heEZlYXR1cmVzLCJ4c2k6c2NoZW1hTG9jYXRpb24iOnRoaXMuc2NoZW1hTG9jYXRpb25BdHRyKGEpfX0pO2lmKCJzdHJpbmciPT10eXBlb2YgdGhpcy5mZWF0dXJlVHlwZSl0aGlzLndyaXRlTm9kZSgiUXVlcnkiLGEsYik7ZWxzZSBmb3IodmFyIGM9MCxkPXRoaXMuZmVhdHVyZVR5cGUubGVuZ3RoO2M8ZDtjKyspYS5mZWF0dXJlVHlwZT10aGlzLmZlYXR1cmVUeXBlW2NdLHRoaXMud3JpdGVOb2RlKCJRdWVyeSIsYSxiKTtyZXR1cm4gYn0sVHJhbnNhY3Rpb246ZnVuY3Rpb24oYSl7YT1hfHx7fTt2YXIgYj1hLm9wdGlvbnN8fHt9LGM9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJ3ZnM6VHJhbnNhY3Rpb24iLHthdHRyaWJ1dGVzOntzZXJ2aWNlOiJXRlMiLHZlcnNpb246dGhpcy52ZXJzaW9uLGhhbmRsZTpiLmhhbmRsZX19KSxkLGU9YS5mZWF0dXJlcztpZihlKXshMD09PWIubXVsdGkmJk9wZW5MYXllcnMuVXRpbC5leHRlbmQodGhpcy5nZW9tZXRyeVR5cGVzLAp7Ik9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQiOiJNdWx0aVBvaW50IiwiT3BlbkxheWVycy5HZW9tZXRyeS5MaW5lU3RyaW5nIjohMD09PXRoaXMubXVsdGlDdXJ2ZT8iTXVsdGlDdXJ2ZSI6Ik11bHRpTGluZVN0cmluZyIsIk9wZW5MYXllcnMuR2VvbWV0cnkuUG9seWdvbiI6ITA9PT10aGlzLm11bHRpU3VyZmFjZT8iTXVsdGlTdXJmYWNlIjoiTXVsdGlQb2x5Z29uIn0pO3ZhciBmLGc7YT0wO2ZvcihkPWUubGVuZ3RoO2E8ZDsrK2EpZz1lW2FdLChmPXRoaXMuc3RhdGVOYW1lW2cuc3RhdGVdKSYmdGhpcy53cml0ZU5vZGUoZix7ZmVhdHVyZTpnLG9wdGlvbnM6Yn0sYyk7ITA9PT1iLm11bHRpJiZ0aGlzLnNldEdlb21ldHJ5VHlwZXMoKX1pZihiLm5hdGl2ZUVsZW1lbnRzKWZvcihhPTAsZD1iLm5hdGl2ZUVsZW1lbnRzLmxlbmd0aDthPGQ7KythKXRoaXMud3JpdGVOb2RlKCJ3ZnM6TmF0aXZlIixiLm5hdGl2ZUVsZW1lbnRzW2FdLGMpO3JldHVybiBjfSxOYXRpdmU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygid2ZzOk5hdGl2ZSIsCnthdHRyaWJ1dGVzOnt2ZW5kb3JJZDphLnZlbmRvcklkLHNhZmVUb0lnbm9yZTphLnNhZmVUb0lnbm9yZX0sdmFsdWU6YS52YWx1ZX0pfSxJbnNlcnQ6ZnVuY3Rpb24oYSl7dmFyIGI9YS5mZWF0dXJlO2E9YS5vcHRpb25zO2E9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJ3ZnM6SW5zZXJ0Iix7YXR0cmlidXRlczp7aGFuZGxlOmEmJmEuaGFuZGxlfX0pO3RoaXMuc3JzTmFtZT10aGlzLmdldFNyc05hbWUoYik7dGhpcy53cml0ZU5vZGUoImZlYXR1cmU6X3R5cGVOYW1lIixiLGEpO3JldHVybiBhfSxVcGRhdGU6ZnVuY3Rpb24oYSl7dmFyIGI9YS5mZWF0dXJlO2E9YS5vcHRpb25zO2E9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJ3ZnM6VXBkYXRlIix7YXR0cmlidXRlczp7aGFuZGxlOmEmJmEuaGFuZGxlLHR5cGVOYW1lOih0aGlzLmZlYXR1cmVOUz90aGlzLmZlYXR1cmVQcmVmaXgrIjoiOiIiKSt0aGlzLmZlYXR1cmVUeXBlfX0pO3RoaXMuZmVhdHVyZU5TJiZhLnNldEF0dHJpYnV0ZSgieG1sbnM6IisKdGhpcy5mZWF0dXJlUHJlZml4LHRoaXMuZmVhdHVyZU5TKTt2YXIgYz1iLm1vZGlmaWVkO251bGw9PT10aGlzLmdlb21ldHJ5TmFtZXx8YyYmdm9pZCAwPT09Yy5nZW9tZXRyeXx8KHRoaXMuc3JzTmFtZT10aGlzLmdldFNyc05hbWUoYiksdGhpcy53cml0ZU5vZGUoIlByb3BlcnR5Iix7bmFtZTp0aGlzLmdlb21ldHJ5TmFtZSx2YWx1ZTpiLmdlb21ldHJ5fSxhKSk7Zm9yKHZhciBkIGluIGIuYXR0cmlidXRlcyl2b2lkIDA9PT1iLmF0dHJpYnV0ZXNbZF18fGMmJmMuYXR0cmlidXRlcyYmKCFjLmF0dHJpYnV0ZXN8fHZvaWQgMD09PWMuYXR0cmlidXRlc1tkXSl8fHRoaXMud3JpdGVOb2RlKCJQcm9wZXJ0eSIse25hbWU6ZCx2YWx1ZTpiLmF0dHJpYnV0ZXNbZF19LGEpO3RoaXMud3JpdGVOb2RlKCJvZ2M6RmlsdGVyIixuZXcgT3BlbkxheWVycy5GaWx0ZXIuRmVhdHVyZUlkKHtmaWRzOltiLmZpZF19KSxhKTtyZXR1cm4gYX0sUHJvcGVydHk6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJ3ZnM6UHJvcGVydHkiKTsKdGhpcy53cml0ZU5vZGUoIk5hbWUiLGEubmFtZSxiKTtudWxsIT09YS52YWx1ZSYmdGhpcy53cml0ZU5vZGUoIlZhbHVlIixhLnZhbHVlLGIpO3JldHVybiBifSxOYW1lOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoIndmczpOYW1lIix7dmFsdWU6YX0pfSxWYWx1ZTpmdW5jdGlvbihhKXt2YXIgYjthIGluc3RhbmNlb2YgT3BlbkxheWVycy5HZW9tZXRyeT8oYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoIndmczpWYWx1ZSIpLGE9dGhpcy53cml0ZU5vZGUoImZlYXR1cmU6X2dlb21ldHJ5IixhKS5maXJzdENoaWxkLGIuYXBwZW5kQ2hpbGQoYSkpOmI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJ3ZnM6VmFsdWUiLHt2YWx1ZTphfSk7cmV0dXJuIGJ9LERlbGV0ZTpmdW5jdGlvbihhKXt2YXIgYj1hLmZlYXR1cmU7YT1hLm9wdGlvbnM7YT10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoIndmczpEZWxldGUiLHthdHRyaWJ1dGVzOntoYW5kbGU6YSYmCmEuaGFuZGxlLHR5cGVOYW1lOih0aGlzLmZlYXR1cmVOUz90aGlzLmZlYXR1cmVQcmVmaXgrIjoiOiIiKSt0aGlzLmZlYXR1cmVUeXBlfX0pO3RoaXMuZmVhdHVyZU5TJiZhLnNldEF0dHJpYnV0ZSgieG1sbnM6Iit0aGlzLmZlYXR1cmVQcmVmaXgsdGhpcy5mZWF0dXJlTlMpO3RoaXMud3JpdGVOb2RlKCJvZ2M6RmlsdGVyIixuZXcgT3BlbkxheWVycy5GaWx0ZXIuRmVhdHVyZUlkKHtmaWRzOltiLmZpZF19KSxhKTtyZXR1cm4gYX19fSxzY2hlbWFMb2NhdGlvbkF0dHI6ZnVuY3Rpb24oYSl7YT1PcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHtmZWF0dXJlUHJlZml4OnRoaXMuZmVhdHVyZVByZWZpeCxzY2hlbWE6dGhpcy5zY2hlbWF9LGEpO3ZhciBiPU9wZW5MYXllcnMuVXRpbC5leHRlbmQoe30sdGhpcy5zY2hlbWFMb2NhdGlvbnMpO2Euc2NoZW1hJiYoYlthLmZlYXR1cmVQcmVmaXhdPWEuc2NoZW1hKTthPVtdO3ZhciBjLGQ7Zm9yKGQgaW4gYikoYz10aGlzLm5hbWVzcGFjZXNbZF0pJiYKYS5wdXNoKGMrIiAiK2JbZF0pO3JldHVybiBhLmpvaW4oIiAiKXx8dm9pZCAwfSxzZXRGaWx0ZXJQcm9wZXJ0eTpmdW5jdGlvbihhKXtpZihhLmZpbHRlcnMpZm9yKHZhciBiPTAsYz1hLmZpbHRlcnMubGVuZ3RoO2I8YzsrK2IpT3BlbkxheWVycy5Gb3JtYXQuV0ZTVC52MS5wcm90b3R5cGUuc2V0RmlsdGVyUHJvcGVydHkuY2FsbCh0aGlzLGEuZmlsdGVyc1tiXSk7ZWxzZSBhIGluc3RhbmNlb2YgT3BlbkxheWVycy5GaWx0ZXIuU3BhdGlhbCYmIWEucHJvcGVydHkmJihhLnByb3BlcnR5PXRoaXMuZ2VvbWV0cnlOYW1lKX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Gb3JtYXQuV0ZTVC52MSJ9KTtPcGVuTGF5ZXJzLkZvcm1hdC5PR0NFeGNlcHRpb25SZXBvcnQ9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkZvcm1hdC5YTUwse25hbWVzcGFjZXM6e29nYzoiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9vZ2MifSxyZWdFeGVzOnt0cmltU3BhY2U6L15ccyp8XHMqJC9nLHJlbW92ZVNwYWNlOi9ccyovZyxzcGxpdFNwYWNlOi9ccysvLHRyaW1Db21tYTovXHMqLFxzKi9nfSxkZWZhdWx0UHJlZml4OiJvZ2MiLHJlYWQ6ZnVuY3Rpb24oYSl7InN0cmluZyI9PXR5cGVvZiBhJiYoYT1PcGVuTGF5ZXJzLkZvcm1hdC5YTUwucHJvdG90eXBlLnJlYWQuYXBwbHkodGhpcyxbYV0pKTt2YXIgYj17ZXhjZXB0aW9uUmVwb3J0Om51bGx9O2EuZG9jdW1lbnRFbGVtZW50JiYodGhpcy5yZWFkQ2hpbGROb2RlcyhhLGIpLG51bGw9PT1iLmV4Y2VwdGlvblJlcG9ydCYmKGI9KG5ldyBPcGVuTGF5ZXJzLkZvcm1hdC5PV1NDb21tb24pLnJlYWQoYSkpKTtyZXR1cm4gYn0scmVhZGVyczp7b2djOntTZXJ2aWNlRXhjZXB0aW9uUmVwb3J0OmZ1bmN0aW9uKGEsCmIpe2IuZXhjZXB0aW9uUmVwb3J0PXtleGNlcHRpb25zOltdfTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYi5leGNlcHRpb25SZXBvcnQpfSxTZXJ2aWNlRXhjZXB0aW9uOmZ1bmN0aW9uKGEsYil7dmFyIGM9e2NvZGU6YS5nZXRBdHRyaWJ1dGUoImNvZGUiKSxsb2NhdG9yOmEuZ2V0QXR0cmlidXRlKCJsb2NhdG9yIiksdGV4dDp0aGlzLmdldENoaWxkVmFsdWUoYSl9O2IuZXhjZXB0aW9ucy5wdXNoKGMpfX19LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuRm9ybWF0Lk9HQ0V4Y2VwdGlvblJlcG9ydCJ9KTtPcGVuTGF5ZXJzLkZvcm1hdC5YTUwuVmVyc2lvbmVkT0dDPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Gb3JtYXQuWE1MLHtkZWZhdWx0VmVyc2lvbjpudWxsLHZlcnNpb246bnVsbCxwcm9maWxlOm51bGwsYWxsb3dGYWxsYmFjazohMSxuYW1lOm51bGwsc3RyaW5naWZ5T3V0cHV0OiExLHBhcnNlcjpudWxsLGluaXRpYWxpemU6ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5Gb3JtYXQuWE1MLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsW2FdKTthPXRoaXMuQ0xBU1NfTkFNRTt0aGlzLm5hbWU9YS5zdWJzdHJpbmcoYS5sYXN0SW5kZXhPZigiLiIpKzEpfSxnZXRWZXJzaW9uOmZ1bmN0aW9uKGEsYil7dmFyIGM7YT8oYz10aGlzLnZlcnNpb24sY3x8KGM9YS5nZXRBdHRyaWJ1dGUoInZlcnNpb24iKSxjfHwoYz10aGlzLmRlZmF1bHRWZXJzaW9uKSkpOmM9YiYmYi52ZXJzaW9ufHx0aGlzLnZlcnNpb258fHRoaXMuZGVmYXVsdFZlcnNpb247cmV0dXJuIGN9LGdldFBhcnNlcjpmdW5jdGlvbihhKXthPQphfHx0aGlzLmRlZmF1bHRWZXJzaW9uO3ZhciBiPXRoaXMucHJvZmlsZT8iXyIrdGhpcy5wcm9maWxlOiIiO2lmKCF0aGlzLnBhcnNlcnx8dGhpcy5wYXJzZXIuVkVSU0lPTiE9YSl7dmFyIGM9T3BlbkxheWVycy5Gb3JtYXRbdGhpcy5uYW1lXVsidiIrYS5yZXBsYWNlKC9cLi9nLCJfIikrYl07aWYoIWMmJigiIiE9PWImJnRoaXMuYWxsb3dGYWxsYmFjayYmKGI9IiIsYz1PcGVuTGF5ZXJzLkZvcm1hdFt0aGlzLm5hbWVdWyJ2IithLnJlcGxhY2UoL1wuL2csIl8iKV0pLCFjKSl0aHJvdyJDYW4ndCBmaW5kIGEgIit0aGlzLm5hbWUrIiBwYXJzZXIgZm9yIHZlcnNpb24gIithK2I7dGhpcy5wYXJzZXI9bmV3IGModGhpcy5vcHRpb25zKX1yZXR1cm4gdGhpcy5wYXJzZXJ9LHdyaXRlOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5nZXRWZXJzaW9uKG51bGwsYik7dGhpcy5wYXJzZXI9dGhpcy5nZXRQYXJzZXIoYyk7Yz10aGlzLnBhcnNlci53cml0ZShhLGIpO3JldHVybiExPT09dGhpcy5zdHJpbmdpZnlPdXRwdXQ/CmM6T3BlbkxheWVycy5Gb3JtYXQuWE1MLnByb3RvdHlwZS53cml0ZS5hcHBseSh0aGlzLFtjXSl9LHJlYWQ6ZnVuY3Rpb24oYSxiKXsic3RyaW5nIj09dHlwZW9mIGEmJihhPU9wZW5MYXllcnMuRm9ybWF0LlhNTC5wcm90b3R5cGUucmVhZC5hcHBseSh0aGlzLFthXSkpO3ZhciBjPXRoaXMuZ2V0VmVyc2lvbihhLmRvY3VtZW50RWxlbWVudCk7dGhpcy5wYXJzZXI9dGhpcy5nZXRQYXJzZXIoYyk7dmFyIGQ9dGhpcy5wYXJzZXIucmVhZChhLGIpLGU9dGhpcy5wYXJzZXIuZXJyb3JQcm9wZXJ0eXx8bnVsbDtudWxsIT09ZSYmdm9pZCAwPT09ZFtlXSYmKGU9bmV3IE9wZW5MYXllcnMuRm9ybWF0Lk9HQ0V4Y2VwdGlvblJlcG9ydCxkLmVycm9yPWUucmVhZChhKSk7ZC52ZXJzaW9uPWM7cmV0dXJuIGR9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuRm9ybWF0LlhNTC5WZXJzaW9uZWRPR0MifSk7T3BlbkxheWVycy5GaWx0ZXIuTG9naWNhbD1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuRmlsdGVyLHtmaWx0ZXJzOm51bGwsdHlwZTpudWxsLGluaXRpYWxpemU6ZnVuY3Rpb24oYSl7dGhpcy5maWx0ZXJzPVtdO09wZW5MYXllcnMuRmlsdGVyLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsW2FdKX0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuZmlsdGVycz1udWxsO09wZW5MYXllcnMuRmlsdGVyLnByb3RvdHlwZS5kZXN0cm95LmFwcGx5KHRoaXMpfSxldmFsdWF0ZTpmdW5jdGlvbihhKXt2YXIgYixjO3N3aXRjaCh0aGlzLnR5cGUpe2Nhc2UgT3BlbkxheWVycy5GaWx0ZXIuTG9naWNhbC5BTkQ6Yj0wO2ZvcihjPXRoaXMuZmlsdGVycy5sZW5ndGg7YjxjO2IrKylpZighMT09dGhpcy5maWx0ZXJzW2JdLmV2YWx1YXRlKGEpKXJldHVybiExO3JldHVybiEwO2Nhc2UgT3BlbkxheWVycy5GaWx0ZXIuTG9naWNhbC5PUjpiPTA7Zm9yKGM9dGhpcy5maWx0ZXJzLmxlbmd0aDtiPApjO2IrKylpZighMD09dGhpcy5maWx0ZXJzW2JdLmV2YWx1YXRlKGEpKXJldHVybiEwO3JldHVybiExO2Nhc2UgT3BlbkxheWVycy5GaWx0ZXIuTG9naWNhbC5OT1Q6cmV0dXJuIXRoaXMuZmlsdGVyc1swXS5ldmFsdWF0ZShhKX19LGNsb25lOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPVtdLGI9MCxjPXRoaXMuZmlsdGVycy5sZW5ndGg7YjxjOysrYilhLnB1c2godGhpcy5maWx0ZXJzW2JdLmNsb25lKCkpO3JldHVybiBuZXcgT3BlbkxheWVycy5GaWx0ZXIuTG9naWNhbCh7dHlwZTp0aGlzLnR5cGUsZmlsdGVyczphfSl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuRmlsdGVyLkxvZ2ljYWwifSk7T3BlbkxheWVycy5GaWx0ZXIuTG9naWNhbC5BTkQ9IiYmIjtPcGVuTGF5ZXJzLkZpbHRlci5Mb2dpY2FsLk9SPSJ8fCI7T3BlbkxheWVycy5GaWx0ZXIuTG9naWNhbC5OT1Q9IiEiO09wZW5MYXllcnMuRmlsdGVyLkNvbXBhcmlzb249T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkZpbHRlcix7dHlwZTpudWxsLHByb3BlcnR5Om51bGwsdmFsdWU6bnVsbCxtYXRjaENhc2U6ITAsbG93ZXJCb3VuZGFyeTpudWxsLHVwcGVyQm91bmRhcnk6bnVsbCxpbml0aWFsaXplOmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuRmlsdGVyLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsW2FdKTt0aGlzLnR5cGU9PT1PcGVuTGF5ZXJzLkZpbHRlci5Db21wYXJpc29uLkxJS0UmJnZvaWQgMD09PWEubWF0Y2hDYXNlJiYodGhpcy5tYXRjaENhc2U9bnVsbCl9LGV2YWx1YXRlOmZ1bmN0aW9uKGEpe2EgaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLkZlYXR1cmUuVmVjdG9yJiYoYT1hLmF0dHJpYnV0ZXMpO3ZhciBiPSExO2E9YVt0aGlzLnByb3BlcnR5XTtzd2l0Y2godGhpcy50eXBlKXtjYXNlIE9wZW5MYXllcnMuRmlsdGVyLkNvbXBhcmlzb24uRVFVQUxfVE86Yj10aGlzLnZhbHVlOwpiPXRoaXMubWF0Y2hDYXNlfHwic3RyaW5nIiE9dHlwZW9mIGF8fCJzdHJpbmciIT10eXBlb2YgYj9hPT1iOmEudG9VcHBlckNhc2UoKT09Yi50b1VwcGVyQ2FzZSgpO2JyZWFrO2Nhc2UgT3BlbkxheWVycy5GaWx0ZXIuQ29tcGFyaXNvbi5OT1RfRVFVQUxfVE86Yj10aGlzLnZhbHVlO2I9dGhpcy5tYXRjaENhc2V8fCJzdHJpbmciIT10eXBlb2YgYXx8InN0cmluZyIhPXR5cGVvZiBiP2EhPWI6YS50b1VwcGVyQ2FzZSgpIT1iLnRvVXBwZXJDYXNlKCk7YnJlYWs7Y2FzZSBPcGVuTGF5ZXJzLkZpbHRlci5Db21wYXJpc29uLkxFU1NfVEhBTjpiPWE8dGhpcy52YWx1ZTticmVhaztjYXNlIE9wZW5MYXllcnMuRmlsdGVyLkNvbXBhcmlzb24uR1JFQVRFUl9USEFOOmI9YT50aGlzLnZhbHVlO2JyZWFrO2Nhc2UgT3BlbkxheWVycy5GaWx0ZXIuQ29tcGFyaXNvbi5MRVNTX1RIQU5fT1JfRVFVQUxfVE86Yj1hPD10aGlzLnZhbHVlO2JyZWFrO2Nhc2UgT3BlbkxheWVycy5GaWx0ZXIuQ29tcGFyaXNvbi5HUkVBVEVSX1RIQU5fT1JfRVFVQUxfVE86Yj0KYT49dGhpcy52YWx1ZTticmVhaztjYXNlIE9wZW5MYXllcnMuRmlsdGVyLkNvbXBhcmlzb24uQkVUV0VFTjpiPWE+PXRoaXMubG93ZXJCb3VuZGFyeSYmYTw9dGhpcy51cHBlckJvdW5kYXJ5O2JyZWFrO2Nhc2UgT3BlbkxheWVycy5GaWx0ZXIuQ29tcGFyaXNvbi5MSUtFOmI9UmVnRXhwKHRoaXMudmFsdWUsImdpIikudGVzdChhKTticmVhaztjYXNlIE9wZW5MYXllcnMuRmlsdGVyLkNvbXBhcmlzb24uSVNfTlVMTDpiPW51bGw9PT1hfXJldHVybiBifSx2YWx1ZTJyZWdleDpmdW5jdGlvbihhLGIsYyl7aWYoIi4iPT1hKXRocm93IEVycm9yKCInLicgaXMgYW4gdW5zdXBwb3J0ZWQgd2lsZENhcmQgY2hhcmFjdGVyIGZvciBPcGVuTGF5ZXJzLkZpbHRlci5Db21wYXJpc29uIik7YT1hP2E6IioiO2I9Yj9iOiIuIjt0aGlzLnZhbHVlPXRoaXMudmFsdWUucmVwbGFjZShSZWdFeHAoIlxcIisoYz9jOiIhIikrIigufCQpIiwiZyIpLCJcXCQxIik7dGhpcy52YWx1ZT10aGlzLnZhbHVlLnJlcGxhY2UoUmVnRXhwKCJcXCIrCmIsImciKSwiLiIpO3RoaXMudmFsdWU9dGhpcy52YWx1ZS5yZXBsYWNlKFJlZ0V4cCgiXFwiK2EsImciKSwiLioiKTt0aGlzLnZhbHVlPXRoaXMudmFsdWUucmVwbGFjZShSZWdFeHAoIlxcXFwuXFwqIiwiZyIpLCJcXCIrYSk7cmV0dXJuIHRoaXMudmFsdWU9dGhpcy52YWx1ZS5yZXBsYWNlKFJlZ0V4cCgiXFxcXFxcLiIsImciKSwiXFwiK2IpfSxyZWdleDJ2YWx1ZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMudmFsdWUsYT1hLnJlcGxhY2UoLyEvZywiISEiKSxhPWEucmVwbGFjZSgvKFxcKT9cXFwuL2csZnVuY3Rpb24oYSxjKXtyZXR1cm4gYz9hOiIhLiJ9KSxhPWEucmVwbGFjZSgvKFxcKT9cXFwqL2csZnVuY3Rpb24oYSxjKXtyZXR1cm4gYz9hOiIhKiJ9KSxhPWEucmVwbGFjZSgvXFxcXC9nLCJcXCIpO3JldHVybiBhPWEucmVwbGFjZSgvXC5cKi9nLCIqIil9LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuIE9wZW5MYXllcnMuVXRpbC5leHRlbmQobmV3IE9wZW5MYXllcnMuRmlsdGVyLkNvbXBhcmlzb24sCnRoaXMpfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkZpbHRlci5Db21wYXJpc29uIn0pO09wZW5MYXllcnMuRmlsdGVyLkNvbXBhcmlzb24uRVFVQUxfVE89Ij09IjtPcGVuTGF5ZXJzLkZpbHRlci5Db21wYXJpc29uLk5PVF9FUVVBTF9UTz0iIT0iO09wZW5MYXllcnMuRmlsdGVyLkNvbXBhcmlzb24uTEVTU19USEFOPSI8IjtPcGVuTGF5ZXJzLkZpbHRlci5Db21wYXJpc29uLkdSRUFURVJfVEhBTj0iPiI7T3BlbkxheWVycy5GaWx0ZXIuQ29tcGFyaXNvbi5MRVNTX1RIQU5fT1JfRVFVQUxfVE89Ijw9IjtPcGVuTGF5ZXJzLkZpbHRlci5Db21wYXJpc29uLkdSRUFURVJfVEhBTl9PUl9FUVVBTF9UTz0iPj0iO09wZW5MYXllcnMuRmlsdGVyLkNvbXBhcmlzb24uQkVUV0VFTj0iLi4iO09wZW5MYXllcnMuRmlsdGVyLkNvbXBhcmlzb24uTElLRT0ifiI7T3BlbkxheWVycy5GaWx0ZXIuQ29tcGFyaXNvbi5JU19OVUxMPSJOVUxMIjtPcGVuTGF5ZXJzLkZvcm1hdC5GaWx0ZXI9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkZvcm1hdC5YTUwuVmVyc2lvbmVkT0dDLHtkZWZhdWx0VmVyc2lvbjoiMS4wLjAiLENMQVNTX05BTUU6Ik9wZW5MYXllcnMuRm9ybWF0LkZpbHRlciJ9KTtPcGVuTGF5ZXJzLkZpbHRlci5GdW5jdGlvbj1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuRmlsdGVyLHtuYW1lOm51bGwscGFyYW1zOm51bGwsQ0xBU1NfTkFNRToiT3BlbkxheWVycy5GaWx0ZXIuRnVuY3Rpb24ifSk7T3BlbkxheWVycy5EYXRlPXtkYXRlUmVnRXg6L14oPzooXGR7NH0pKD86LShcZHsyfSkoPzotKFxkezJ9KSk/KT8pPyg/Oig/OlQoXGR7MSwyfSk6KFxkezJ9KTooXGR7Mn0oPzpcLlxkKyk/KShafCg/OlsrLV1cZHsxLDJ9KD86OihcZHsyfSkpPykpKXxaKT8kLyx0b0lTT1N0cmluZzpmdW5jdGlvbigpe3JldHVybiJ0b0lTT1N0cmluZyJpbiBEYXRlLnByb3RvdHlwZT9mdW5jdGlvbihhKXtyZXR1cm4gYS50b0lTT1N0cmluZygpfTpmdW5jdGlvbihhKXtyZXR1cm4gaXNOYU4oYS5nZXRUaW1lKCkpPyJJbnZhbGlkIERhdGUiOmEuZ2V0VVRDRnVsbFllYXIoKSsiLSIrT3BlbkxheWVycy5OdW1iZXIuemVyb1BhZChhLmdldFVUQ01vbnRoKCkrMSwyKSsiLSIrT3BlbkxheWVycy5OdW1iZXIuemVyb1BhZChhLmdldFVUQ0RhdGUoKSwyKSsiVCIrT3BlbkxheWVycy5OdW1iZXIuemVyb1BhZChhLmdldFVUQ0hvdXJzKCksMikrIjoiK09wZW5MYXllcnMuTnVtYmVyLnplcm9QYWQoYS5nZXRVVENNaW51dGVzKCksCjIpKyI6IitPcGVuTGF5ZXJzLk51bWJlci56ZXJvUGFkKGEuZ2V0VVRDU2Vjb25kcygpLDIpKyIuIitPcGVuTGF5ZXJzLk51bWJlci56ZXJvUGFkKGEuZ2V0VVRDTWlsbGlzZWNvbmRzKCksMykrIloifX0oKSxwYXJzZTpmdW5jdGlvbihhKXt2YXIgYjtpZigoYT1hLm1hdGNoKHRoaXMuZGF0ZVJlZ0V4KSkmJihhWzFdfHxhWzddKSl7Yj1wYXJzZUludChhWzFdLDEwKXx8MDt2YXIgYz1wYXJzZUludChhWzJdLDEwKS0xfHwwLGQ9cGFyc2VJbnQoYVszXSwxMCl8fDE7Yj1uZXcgRGF0ZShEYXRlLlVUQyhiLGMsZCkpO2lmKGM9YVs3XSl7dmFyIGQ9cGFyc2VJbnQoYVs0XSwxMCksZT1wYXJzZUludChhWzVdLDEwKSxmPXBhcnNlRmxvYXQoYVs2XSksZz1mfDAsZj1NYXRoLnJvdW5kKDFFMyooZi1nKSk7Yi5zZXRVVENIb3VycyhkLGUsZyxmKTsiWiIhPT1jJiYoYz1wYXJzZUludChjLDEwKSxhPXBhcnNlSW50KGFbOF0sMTApfHwwLGE9LTFFMyooNjAqNjAqYys2MCphKSxiPW5ldyBEYXRlKGIuZ2V0VGltZSgpKwphKSl9fWVsc2UgYj1uZXcgRGF0ZSgiaW52YWxpZCIpO3JldHVybiBifX07T3BlbkxheWVycy5Gb3JtYXQuRmlsdGVyLnYxPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Gb3JtYXQuWE1MLHtuYW1lc3BhY2VzOntvZ2M6Imh0dHA6Ly93d3cub3Blbmdpcy5uZXQvb2djIixnbWw6Imh0dHA6Ly93d3cub3Blbmdpcy5uZXQvZ21sIix4bGluazoiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIseHNpOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxL1hNTFNjaGVtYS1pbnN0YW5jZSJ9LGRlZmF1bHRQcmVmaXg6Im9nYyIsc2NoZW1hTG9jYXRpb246bnVsbCxpbml0aWFsaXplOmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuRm9ybWF0LlhNTC5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLFthXSl9LHJlYWQ6ZnVuY3Rpb24oYSl7dmFyIGI9e307dGhpcy5yZWFkZXJzLm9nYy5GaWx0ZXIuYXBwbHkodGhpcyxbYSxiXSk7cmV0dXJuIGIuZmlsdGVyfSxyZWFkZXJzOntvZ2M6e19leHByZXNzaW9uOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0iIixjPWEuZmlyc3RDaGlsZDtjO2M9CmMubmV4dFNpYmxpbmcpc3dpdGNoKGMubm9kZVR5cGUpe2Nhc2UgMTphPXRoaXMucmVhZE5vZGUoYyk7YS5wcm9wZXJ0eT9iKz0iJHsiK2EucHJvcGVydHkrIn0iOnZvaWQgMCE9PWEudmFsdWUmJihiKz1hLnZhbHVlKTticmVhaztjYXNlIDM6Y2FzZSA0OmIrPWMubm9kZVZhbHVlfXJldHVybiBifSxGaWx0ZXI6ZnVuY3Rpb24oYSxiKXt2YXIgYz17ZmlkczpbXSxmaWx0ZXJzOltdfTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYyk7MDxjLmZpZHMubGVuZ3RoP2IuZmlsdGVyPW5ldyBPcGVuTGF5ZXJzLkZpbHRlci5GZWF0dXJlSWQoe2ZpZHM6Yy5maWRzfSk6MDxjLmZpbHRlcnMubGVuZ3RoJiYoYi5maWx0ZXI9Yy5maWx0ZXJzWzBdKX0sRmVhdHVyZUlkOmZ1bmN0aW9uKGEsYil7dmFyIGM9YS5nZXRBdHRyaWJ1dGUoImZpZCIpO2MmJmIuZmlkcy5wdXNoKGMpfSxBbmQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz1uZXcgT3BlbkxheWVycy5GaWx0ZXIuTG9naWNhbCh7dHlwZTpPcGVuTGF5ZXJzLkZpbHRlci5Mb2dpY2FsLkFORH0pOwp0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYyk7Yi5maWx0ZXJzLnB1c2goYyl9LE9yOmZ1bmN0aW9uKGEsYil7dmFyIGM9bmV3IE9wZW5MYXllcnMuRmlsdGVyLkxvZ2ljYWwoe3R5cGU6T3BlbkxheWVycy5GaWx0ZXIuTG9naWNhbC5PUn0pO3RoaXMucmVhZENoaWxkTm9kZXMoYSxjKTtiLmZpbHRlcnMucHVzaChjKX0sTm90OmZ1bmN0aW9uKGEsYil7dmFyIGM9bmV3IE9wZW5MYXllcnMuRmlsdGVyLkxvZ2ljYWwoe3R5cGU6T3BlbkxheWVycy5GaWx0ZXIuTG9naWNhbC5OT1R9KTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYyk7Yi5maWx0ZXJzLnB1c2goYyl9LFByb3BlcnR5SXNMZXNzVGhhbjpmdW5jdGlvbihhLGIpe3ZhciBjPW5ldyBPcGVuTGF5ZXJzLkZpbHRlci5Db21wYXJpc29uKHt0eXBlOk9wZW5MYXllcnMuRmlsdGVyLkNvbXBhcmlzb24uTEVTU19USEFOfSk7dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGMpO2IuZmlsdGVycy5wdXNoKGMpfSxQcm9wZXJ0eUlzR3JlYXRlclRoYW46ZnVuY3Rpb24oYSwKYil7dmFyIGM9bmV3IE9wZW5MYXllcnMuRmlsdGVyLkNvbXBhcmlzb24oe3R5cGU6T3BlbkxheWVycy5GaWx0ZXIuQ29tcGFyaXNvbi5HUkVBVEVSX1RIQU59KTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYyk7Yi5maWx0ZXJzLnB1c2goYyl9LFByb3BlcnR5SXNMZXNzVGhhbk9yRXF1YWxUbzpmdW5jdGlvbihhLGIpe3ZhciBjPW5ldyBPcGVuTGF5ZXJzLkZpbHRlci5Db21wYXJpc29uKHt0eXBlOk9wZW5MYXllcnMuRmlsdGVyLkNvbXBhcmlzb24uTEVTU19USEFOX09SX0VRVUFMX1RPfSk7dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGMpO2IuZmlsdGVycy5wdXNoKGMpfSxQcm9wZXJ0eUlzR3JlYXRlclRoYW5PckVxdWFsVG86ZnVuY3Rpb24oYSxiKXt2YXIgYz1uZXcgT3BlbkxheWVycy5GaWx0ZXIuQ29tcGFyaXNvbih7dHlwZTpPcGVuTGF5ZXJzLkZpbHRlci5Db21wYXJpc29uLkdSRUFURVJfVEhBTl9PUl9FUVVBTF9UT30pO3RoaXMucmVhZENoaWxkTm9kZXMoYSxjKTtiLmZpbHRlcnMucHVzaChjKX0sClByb3BlcnR5SXNCZXR3ZWVuOmZ1bmN0aW9uKGEsYil7dmFyIGM9bmV3IE9wZW5MYXllcnMuRmlsdGVyLkNvbXBhcmlzb24oe3R5cGU6T3BlbkxheWVycy5GaWx0ZXIuQ29tcGFyaXNvbi5CRVRXRUVOfSk7dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGMpO2IuZmlsdGVycy5wdXNoKGMpfSxMaXRlcmFsOmZ1bmN0aW9uKGEsYil7Yi52YWx1ZT1PcGVuTGF5ZXJzLlN0cmluZy5udW1lcmljSWYodGhpcy5nZXRDaGlsZFZhbHVlKGEpLCEwKX0sUHJvcGVydHlOYW1lOmZ1bmN0aW9uKGEsYil7Yi5wcm9wZXJ0eT10aGlzLmdldENoaWxkVmFsdWUoYSl9LExvd2VyQm91bmRhcnk6ZnVuY3Rpb24oYSxiKXtiLmxvd2VyQm91bmRhcnk9T3BlbkxheWVycy5TdHJpbmcubnVtZXJpY0lmKHRoaXMucmVhZGVycy5vZ2MuX2V4cHJlc3Npb24uY2FsbCh0aGlzLGEpLCEwKX0sVXBwZXJCb3VuZGFyeTpmdW5jdGlvbihhLGIpe2IudXBwZXJCb3VuZGFyeT1PcGVuTGF5ZXJzLlN0cmluZy5udW1lcmljSWYodGhpcy5yZWFkZXJzLm9nYy5fZXhwcmVzc2lvbi5jYWxsKHRoaXMsCmEpLCEwKX0sSW50ZXJzZWN0czpmdW5jdGlvbihhLGIpe3RoaXMucmVhZFNwYXRpYWwoYSxiLE9wZW5MYXllcnMuRmlsdGVyLlNwYXRpYWwuSU5URVJTRUNUUyl9LFdpdGhpbjpmdW5jdGlvbihhLGIpe3RoaXMucmVhZFNwYXRpYWwoYSxiLE9wZW5MYXllcnMuRmlsdGVyLlNwYXRpYWwuV0lUSElOKX0sQ29udGFpbnM6ZnVuY3Rpb24oYSxiKXt0aGlzLnJlYWRTcGF0aWFsKGEsYixPcGVuTGF5ZXJzLkZpbHRlci5TcGF0aWFsLkNPTlRBSU5TKX0sRFdpdGhpbjpmdW5jdGlvbihhLGIpe3RoaXMucmVhZFNwYXRpYWwoYSxiLE9wZW5MYXllcnMuRmlsdGVyLlNwYXRpYWwuRFdJVEhJTil9LERpc3RhbmNlOmZ1bmN0aW9uKGEsYil7Yi5kaXN0YW5jZT1wYXJzZUludCh0aGlzLmdldENoaWxkVmFsdWUoYSkpO2IuZGlzdGFuY2VVbml0cz1hLmdldEF0dHJpYnV0ZSgidW5pdHMiKX0sRnVuY3Rpb246ZnVuY3Rpb24oYSxiKXt9LFByb3BlcnR5SXNOdWxsOmZ1bmN0aW9uKGEsYil7dmFyIGM9bmV3IE9wZW5MYXllcnMuRmlsdGVyLkNvbXBhcmlzb24oe3R5cGU6T3BlbkxheWVycy5GaWx0ZXIuQ29tcGFyaXNvbi5JU19OVUxMfSk7CnRoaXMucmVhZENoaWxkTm9kZXMoYSxjKTtiLmZpbHRlcnMucHVzaChjKX19fSxyZWFkU3BhdGlhbDpmdW5jdGlvbihhLGIsYyl7Yz1uZXcgT3BlbkxheWVycy5GaWx0ZXIuU3BhdGlhbCh7dHlwZTpjfSk7dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGMpO2MudmFsdWU9Yy5jb21wb25lbnRzWzBdO2RlbGV0ZSBjLmNvbXBvbmVudHM7Yi5maWx0ZXJzLnB1c2goYyl9LGVuY29kZUxpdGVyYWw6ZnVuY3Rpb24oYSl7YSBpbnN0YW5jZW9mIERhdGUmJihhPU9wZW5MYXllcnMuRGF0ZS50b0lTT1N0cmluZyhhKSk7cmV0dXJuIGF9LHdyaXRlT2djRXhwcmVzc2lvbjpmdW5jdGlvbihhLGIpe2EgaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLkZpbHRlci5GdW5jdGlvbj90aGlzLndyaXRlTm9kZSgiRnVuY3Rpb24iLGEsYik6dGhpcy53cml0ZU5vZGUoIkxpdGVyYWwiLGEsYik7cmV0dXJuIGJ9LHdyaXRlOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLndyaXRlcnMub2djLkZpbHRlci5hcHBseSh0aGlzLFthXSl9LAp3cml0ZXJzOntvZ2M6e0ZpbHRlcjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoIm9nYzpGaWx0ZXIiKTt0aGlzLndyaXRlTm9kZSh0aGlzLmdldEZpbHRlclR5cGUoYSksYSxiKTtyZXR1cm4gYn0sX2ZlYXR1cmVJZHM6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPXRoaXMuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLGM9MCxkPWEuZmlkcy5sZW5ndGg7YzxkOysrYyl0aGlzLndyaXRlTm9kZSgib2djOkZlYXR1cmVJZCIsYS5maWRzW2NdLGIpO3JldHVybiBifSxGZWF0dXJlSWQ6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygib2djOkZlYXR1cmVJZCIse2F0dHJpYnV0ZXM6e2ZpZDphfX0pfSxBbmQ6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygib2djOkFuZCIpLGMsZD0wLGU9YS5maWx0ZXJzLmxlbmd0aDtkPGU7KytkKWM9YS5maWx0ZXJzW2RdLHRoaXMud3JpdGVOb2RlKHRoaXMuZ2V0RmlsdGVyVHlwZShjKSwKYyxiKTtyZXR1cm4gYn0sT3I6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygib2djOk9yIiksYyxkPTAsZT1hLmZpbHRlcnMubGVuZ3RoO2Q8ZTsrK2QpYz1hLmZpbHRlcnNbZF0sdGhpcy53cml0ZU5vZGUodGhpcy5nZXRGaWx0ZXJUeXBlKGMpLGMsYik7cmV0dXJuIGJ9LE5vdDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoIm9nYzpOb3QiKTthPWEuZmlsdGVyc1swXTt0aGlzLndyaXRlTm9kZSh0aGlzLmdldEZpbHRlclR5cGUoYSksYSxiKTtyZXR1cm4gYn0sUHJvcGVydHlJc0xlc3NUaGFuOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygib2djOlByb3BlcnR5SXNMZXNzVGhhbiIpO3RoaXMud3JpdGVOb2RlKCJQcm9wZXJ0eU5hbWUiLGEsYik7dGhpcy53cml0ZU9nY0V4cHJlc3Npb24oYS52YWx1ZSxiKTtyZXR1cm4gYn0sUHJvcGVydHlJc0dyZWF0ZXJUaGFuOmZ1bmN0aW9uKGEpe3ZhciBiPQp0aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoIm9nYzpQcm9wZXJ0eUlzR3JlYXRlclRoYW4iKTt0aGlzLndyaXRlTm9kZSgiUHJvcGVydHlOYW1lIixhLGIpO3RoaXMud3JpdGVPZ2NFeHByZXNzaW9uKGEudmFsdWUsYik7cmV0dXJuIGJ9LFByb3BlcnR5SXNMZXNzVGhhbk9yRXF1YWxUbzpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoIm9nYzpQcm9wZXJ0eUlzTGVzc1RoYW5PckVxdWFsVG8iKTt0aGlzLndyaXRlTm9kZSgiUHJvcGVydHlOYW1lIixhLGIpO3RoaXMud3JpdGVPZ2NFeHByZXNzaW9uKGEudmFsdWUsYik7cmV0dXJuIGJ9LFByb3BlcnR5SXNHcmVhdGVyVGhhbk9yRXF1YWxUbzpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoIm9nYzpQcm9wZXJ0eUlzR3JlYXRlclRoYW5PckVxdWFsVG8iKTt0aGlzLndyaXRlTm9kZSgiUHJvcGVydHlOYW1lIixhLGIpO3RoaXMud3JpdGVPZ2NFeHByZXNzaW9uKGEudmFsdWUsYik7CnJldHVybiBifSxQcm9wZXJ0eUlzQmV0d2VlbjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoIm9nYzpQcm9wZXJ0eUlzQmV0d2VlbiIpO3RoaXMud3JpdGVOb2RlKCJQcm9wZXJ0eU5hbWUiLGEsYik7dGhpcy53cml0ZU5vZGUoIkxvd2VyQm91bmRhcnkiLGEsYik7dGhpcy53cml0ZU5vZGUoIlVwcGVyQm91bmRhcnkiLGEsYik7cmV0dXJuIGJ9LFByb3BlcnR5TmFtZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJvZ2M6UHJvcGVydHlOYW1lIix7dmFsdWU6YS5wcm9wZXJ0eX0pfSxMaXRlcmFsOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoIm9nYzpMaXRlcmFsIix7dmFsdWU6KHRoaXMuZW5jb2RlTGl0ZXJhbHx8T3BlbkxheWVycy5Gb3JtYXQuRmlsdGVyLnYxLnByb3RvdHlwZS5lbmNvZGVMaXRlcmFsKShhKX0pfSxMb3dlckJvdW5kYXJ5OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygib2djOkxvd2VyQm91bmRhcnkiKTsKdGhpcy53cml0ZU9nY0V4cHJlc3Npb24oYS5sb3dlckJvdW5kYXJ5LGIpO3JldHVybiBifSxVcHBlckJvdW5kYXJ5OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygib2djOlVwcGVyQm91bmRhcnkiKTt0aGlzLndyaXRlTm9kZSgiTGl0ZXJhbCIsYS51cHBlckJvdW5kYXJ5LGIpO3JldHVybiBifSxJTlRFUlNFQ1RTOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLndyaXRlU3BhdGlhbChhLCJJbnRlcnNlY3RzIil9LFdJVEhJTjpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy53cml0ZVNwYXRpYWwoYSwiV2l0aGluIil9LENPTlRBSU5TOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLndyaXRlU3BhdGlhbChhLCJDb250YWlucyIpfSxEV0lUSElOOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMud3JpdGVTcGF0aWFsKGEsIkRXaXRoaW4iKTt0aGlzLndyaXRlTm9kZSgiRGlzdGFuY2UiLGEsYik7cmV0dXJuIGJ9LERpc3RhbmNlOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoIm9nYzpEaXN0YW5jZSIsCnthdHRyaWJ1dGVzOnt1bml0czphLmRpc3RhbmNlVW5pdHN9LHZhbHVlOmEuZGlzdGFuY2V9KX0sRnVuY3Rpb246ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJvZ2M6RnVuY3Rpb24iLHthdHRyaWJ1dGVzOntuYW1lOmEubmFtZX19KTthPWEucGFyYW1zO2Zvcih2YXIgYz0wLGQ9YS5sZW5ndGg7YzxkO2MrKyl0aGlzLndyaXRlT2djRXhwcmVzc2lvbihhW2NdLGIpO3JldHVybiBifSxQcm9wZXJ0eUlzTnVsbDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoIm9nYzpQcm9wZXJ0eUlzTnVsbCIpO3RoaXMud3JpdGVOb2RlKCJQcm9wZXJ0eU5hbWUiLGEsYik7cmV0dXJuIGJ9fX0sZ2V0RmlsdGVyVHlwZTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmZpbHRlck1hcFthLnR5cGVdO2lmKCFiKXRocm93IkZpbHRlciB3cml0aW5nIG5vdCBzdXBwb3J0ZWQgZm9yIHJ1bGUgdHlwZTogIithLnR5cGU7cmV0dXJuIGJ9LGZpbHRlck1hcDp7IiYmIjoiQW5kIiwKInx8IjoiT3IiLCIhIjoiTm90IiwiPT0iOiJQcm9wZXJ0eUlzRXF1YWxUbyIsIiE9IjoiUHJvcGVydHlJc05vdEVxdWFsVG8iLCI8IjoiUHJvcGVydHlJc0xlc3NUaGFuIiwiPiI6IlByb3BlcnR5SXNHcmVhdGVyVGhhbiIsIjw9IjoiUHJvcGVydHlJc0xlc3NUaGFuT3JFcXVhbFRvIiwiPj0iOiJQcm9wZXJ0eUlzR3JlYXRlclRoYW5PckVxdWFsVG8iLCIuLiI6IlByb3BlcnR5SXNCZXR3ZWVuIiwifiI6IlByb3BlcnR5SXNMaWtlIixOVUxMOiJQcm9wZXJ0eUlzTnVsbCIsQkJPWDoiQkJPWCIsRFdJVEhJTjoiRFdJVEhJTiIsV0lUSElOOiJXSVRISU4iLENPTlRBSU5TOiJDT05UQUlOUyIsSU5URVJTRUNUUzoiSU5URVJTRUNUUyIsRklEOiJfZmVhdHVyZUlkcyJ9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuRm9ybWF0LkZpbHRlci52MSJ9KTtPcGVuTGF5ZXJzLkdlb21ldHJ5PU9wZW5MYXllcnMuQ2xhc3Moe2lkOm51bGwscGFyZW50Om51bGwsYm91bmRzOm51bGwsaW5pdGlhbGl6ZTpmdW5jdGlvbigpe3RoaXMuaWQ9T3BlbkxheWVycy5VdGlsLmNyZWF0ZVVuaXF1ZUlEKHRoaXMuQ0xBU1NfTkFNRSsiXyIpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5ib3VuZHM9dGhpcy5pZD1udWxsfSxjbG9uZTpmdW5jdGlvbigpe3JldHVybiBuZXcgT3BlbkxheWVycy5HZW9tZXRyeX0sc2V0Qm91bmRzOmZ1bmN0aW9uKGEpe2EmJih0aGlzLmJvdW5kcz1hLmNsb25lKCkpfSxjbGVhckJvdW5kczpmdW5jdGlvbigpe3RoaXMuYm91bmRzPW51bGw7dGhpcy5wYXJlbnQmJnRoaXMucGFyZW50LmNsZWFyQm91bmRzKCl9LGV4dGVuZEJvdW5kczpmdW5jdGlvbihhKXt0aGlzLmdldEJvdW5kcygpP3RoaXMuYm91bmRzLmV4dGVuZChhKTp0aGlzLnNldEJvdW5kcyhhKX0sZ2V0Qm91bmRzOmZ1bmN0aW9uKCl7bnVsbD09dGhpcy5ib3VuZHMmJnRoaXMuY2FsY3VsYXRlQm91bmRzKCk7CnJldHVybiB0aGlzLmJvdW5kc30sY2FsY3VsYXRlQm91bmRzOmZ1bmN0aW9uKCl7fSxkaXN0YW5jZVRvOmZ1bmN0aW9uKGEsYil7fSxnZXRWZXJ0aWNlczpmdW5jdGlvbihhKXt9LGF0UG9pbnQ6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPSExO251bGwhPXRoaXMuZ2V0Qm91bmRzKCkmJm51bGwhPWEmJihiPW51bGwhPWI/YjowLGM9bnVsbCE9Yz9jOjAsZD0obmV3IE9wZW5MYXllcnMuQm91bmRzKHRoaXMuYm91bmRzLmxlZnQtYix0aGlzLmJvdW5kcy5ib3R0b20tYyx0aGlzLmJvdW5kcy5yaWdodCtiLHRoaXMuYm91bmRzLnRvcCtjKSkuY29udGFpbnNMb25MYXQoYSkpO3JldHVybiBkfSxnZXRMZW5ndGg6ZnVuY3Rpb24oKXtyZXR1cm4gMH0sZ2V0QXJlYTpmdW5jdGlvbigpe3JldHVybiAwfSxnZXRDZW50cm9pZDpmdW5jdGlvbigpe3JldHVybiBudWxsfSx0b1N0cmluZzpmdW5jdGlvbigpe3JldHVybiBPcGVuTGF5ZXJzLkZvcm1hdCYmT3BlbkxheWVycy5Gb3JtYXQuV0tUP09wZW5MYXllcnMuRm9ybWF0LldLVC5wcm90b3R5cGUud3JpdGUobmV3IE9wZW5MYXllcnMuRmVhdHVyZS5WZWN0b3IodGhpcykpOgpPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodGhpcyl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuR2VvbWV0cnkifSk7T3BlbkxheWVycy5HZW9tZXRyeS5mcm9tV0tUPWZ1bmN0aW9uKGEpe3ZhciBiO2lmKE9wZW5MYXllcnMuRm9ybWF0JiZPcGVuTGF5ZXJzLkZvcm1hdC5XS1Qpe3ZhciBjPU9wZW5MYXllcnMuR2VvbWV0cnkuZnJvbVdLVC5mb3JtYXQ7Y3x8KGM9bmV3IE9wZW5MYXllcnMuRm9ybWF0LldLVCxPcGVuTGF5ZXJzLkdlb21ldHJ5LmZyb21XS1QuZm9ybWF0PWMpO2E9Yy5yZWFkKGEpO2lmKGEgaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLkZlYXR1cmUuVmVjdG9yKWI9YS5nZW9tZXRyeTtlbHNlIGlmKE9wZW5MYXllcnMuVXRpbC5pc0FycmF5KGEpKXtiPWEubGVuZ3RoO2Zvcih2YXIgYz1BcnJheShiKSxkPTA7ZDxiOysrZCljW2RdPWFbZF0uZ2VvbWV0cnk7Yj1uZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Db2xsZWN0aW9uKGMpfX1yZXR1cm4gYn07Ck9wZW5MYXllcnMuR2VvbWV0cnkuc2VnbWVudHNJbnRlcnNlY3Q9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWMmJmMucG9pbnQ7Yz1jJiZjLnRvbGVyYW5jZTt2YXIgZT0hMSxmPWEueDEtYi54MSxnPWEueTEtYi55MSxoPWEueDItYS54MSxrPWEueTItYS55MSxsPWIueTItYi55MSxtPWIueDItYi54MSxuPWwqaC1tKmssbD1tKmctbCpmLGc9aCpnLWsqZjswPT1uPzA9PWwmJjA9PWcmJihlPSEwKTooZj1sL24sbj1nL24sMDw9ZiYmKDE+PWYmJjA8PW4mJjE+PW4pJiYoZD8oaD1hLngxK2YqaCxuPWEueTErZiprLGU9bmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoaCxuKSk6ZT0hMCkpO2lmKGMpaWYoZSl7aWYoZClhOmZvcihhPVthLGJdLGI9MDsyPmI7KytiKWZvcihmPWFbYl0saz0xOzM+azsrK2spaWYoaD1mWyJ4IitrXSxuPWZbInkiK2tdLGQ9TWF0aC5zcXJ0KE1hdGgucG93KGgtZS54LDIpK01hdGgucG93KG4tZS55LDIpKSxkPGMpe2UueD1oO2UueT1uO2JyZWFrIGF9fWVsc2UgYTpmb3IoYT0KW2EsYl0sYj0wOzI+YjsrK2IpZm9yKGg9YVtiXSxuPWFbKGIrMSklMl0saz0xOzM+azsrK2spaWYoZj17eDpoWyJ4IitrXSx5OmhbInkiK2tdfSxnPU9wZW5MYXllcnMuR2VvbWV0cnkuZGlzdGFuY2VUb1NlZ21lbnQoZixuKSxnLmRpc3RhbmNlPGMpe2U9ZD9uZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludChmLngsZi55KTohMDticmVhayBhfXJldHVybiBlfTtPcGVuTGF5ZXJzLkdlb21ldHJ5LmRpc3RhbmNlVG9TZWdtZW50PWZ1bmN0aW9uKGEsYil7dmFyIGM9T3BlbkxheWVycy5HZW9tZXRyeS5kaXN0YW5jZVNxdWFyZWRUb1NlZ21lbnQoYSxiKTtjLmRpc3RhbmNlPU1hdGguc3FydChjLmRpc3RhbmNlKTtyZXR1cm4gY307Ck9wZW5MYXllcnMuR2VvbWV0cnkuZGlzdGFuY2VTcXVhcmVkVG9TZWdtZW50PWZ1bmN0aW9uKGEsYil7dmFyIGM9YS54LGQ9YS55LGU9Yi54MSxmPWIueTEsZz1iLngyLGg9Yi55MixrPWctZSxsPWgtZixtPShrKihjLWUpK2wqKGQtZikpLyhNYXRoLnBvdyhrLDIpK01hdGgucG93KGwsMikpOzA+PW18fCgxPD1tPyhlPWcsZj1oKTooZSs9bSprLGYrPW0qbCkpO3JldHVybntkaXN0YW5jZTpNYXRoLnBvdyhlLWMsMikrTWF0aC5wb3coZi1kLDIpLHg6ZSx5OmYsYWxvbmc6bX19O09wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQ9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkdlb21ldHJ5LHt4Om51bGwseTpudWxsLGluaXRpYWxpemU6ZnVuY3Rpb24oYSxiKXtPcGVuTGF5ZXJzLkdlb21ldHJ5LnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLng9cGFyc2VGbG9hdChhKTt0aGlzLnk9cGFyc2VGbG9hdChiKX0sY2xvbmU6ZnVuY3Rpb24oYSl7bnVsbD09YSYmKGE9bmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQodGhpcy54LHRoaXMueSkpO09wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKGEsdGhpcyk7cmV0dXJuIGF9LGNhbGN1bGF0ZUJvdW5kczpmdW5jdGlvbigpe3RoaXMuYm91bmRzPW5ldyBPcGVuTGF5ZXJzLkJvdW5kcyh0aGlzLngsdGhpcy55LHRoaXMueCx0aGlzLnkpfSxkaXN0YW5jZVRvOmZ1bmN0aW9uKGEsYil7dmFyIGM9IShiJiYhMT09PWIuZWRnZSkmJmImJmIuZGV0YWlscyxkLGUsZixnLGg7YSBpbnN0YW5jZW9mCk9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQ/KGU9dGhpcy54LGY9dGhpcy55LGc9YS54LGg9YS55LGQ9TWF0aC5zcXJ0KE1hdGgucG93KGUtZywyKStNYXRoLnBvdyhmLWgsMikpLGQ9Yz97eDA6ZSx5MDpmLHgxOmcseTE6aCxkaXN0YW5jZTpkfTpkKTooZD1hLmRpc3RhbmNlVG8odGhpcyxiKSxjJiYoZD17eDA6ZC54MSx5MDpkLnkxLHgxOmQueDAseTE6ZC55MCxkaXN0YW5jZTpkLmRpc3RhbmNlfSkpO3JldHVybiBkfSxlcXVhbHM6ZnVuY3Rpb24oYSl7dmFyIGI9ITE7bnVsbCE9YSYmKGI9dGhpcy54PT1hLngmJnRoaXMueT09YS55fHxpc05hTih0aGlzLngpJiZpc05hTih0aGlzLnkpJiZpc05hTihhLngpJiZpc05hTihhLnkpKTtyZXR1cm4gYn0sdG9TaG9ydFN0cmluZzpmdW5jdGlvbigpe3JldHVybiB0aGlzLngrIiwgIit0aGlzLnl9LG1vdmU6ZnVuY3Rpb24oYSxiKXt0aGlzLngrPWE7dGhpcy55Kz1iO3RoaXMuY2xlYXJCb3VuZHMoKX0scm90YXRlOmZ1bmN0aW9uKGEsYil7YSo9Ck1hdGguUEkvMTgwO3ZhciBjPXRoaXMuZGlzdGFuY2VUbyhiKSxkPWErTWF0aC5hdGFuMih0aGlzLnktYi55LHRoaXMueC1iLngpO3RoaXMueD1iLngrYypNYXRoLmNvcyhkKTt0aGlzLnk9Yi55K2MqTWF0aC5zaW4oZCk7dGhpcy5jbGVhckJvdW5kcygpfSxnZXRDZW50cm9pZDpmdW5jdGlvbigpe3JldHVybiBuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludCh0aGlzLngsdGhpcy55KX0scmVzaXplOmZ1bmN0aW9uKGEsYixjKXt0aGlzLng9Yi54K2EqKHZvaWQgMD09Yz8xOmMpKih0aGlzLngtYi54KTt0aGlzLnk9Yi55K2EqKHRoaXMueS1iLnkpO3RoaXMuY2xlYXJCb3VuZHMoKTtyZXR1cm4gdGhpc30saW50ZXJzZWN0czpmdW5jdGlvbihhKXt2YXIgYj0hMTtyZXR1cm4gYj0iT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludCI9PWEuQ0xBU1NfTkFNRT90aGlzLmVxdWFscyhhKTphLmludGVyc2VjdHModGhpcyl9LHRyYW5zZm9ybTpmdW5jdGlvbihhLGIpe2EmJmImJihPcGVuTGF5ZXJzLlByb2plY3Rpb24udHJhbnNmb3JtKHRoaXMsCmEsYiksdGhpcy5ib3VuZHM9bnVsbCk7cmV0dXJuIHRoaXN9LGdldFZlcnRpY2VzOmZ1bmN0aW9uKGEpe3JldHVyblt0aGlzXX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludCJ9KTtPcGVuTGF5ZXJzLkdlb21ldHJ5LkNvbGxlY3Rpb249T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkdlb21ldHJ5LHtjb21wb25lbnRzOm51bGwsY29tcG9uZW50VHlwZXM6bnVsbCxpbml0aWFsaXplOmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuR2VvbWV0cnkucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMuY29tcG9uZW50cz1bXTtudWxsIT1hJiZ0aGlzLmFkZENvbXBvbmVudHMoYSl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmNvbXBvbmVudHMubGVuZ3RoPTA7dGhpcy5jb21wb25lbnRzPW51bGw7T3BlbkxheWVycy5HZW9tZXRyeS5wcm90b3R5cGUuZGVzdHJveS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGNsb25lOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPWV2YWwoIm5ldyAiK3RoaXMuQ0xBU1NfTkFNRSsiKCkiKSxiPTAsYz10aGlzLmNvbXBvbmVudHMubGVuZ3RoO2I8YztiKyspYS5hZGRDb21wb25lbnQodGhpcy5jb21wb25lbnRzW2JdLmNsb25lKCkpOwpPcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyhhLHRoaXMpO3JldHVybiBhfSxnZXRDb21wb25lbnRzU3RyaW5nOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPVtdLGI9MCxjPXRoaXMuY29tcG9uZW50cy5sZW5ndGg7YjxjO2IrKylhLnB1c2godGhpcy5jb21wb25lbnRzW2JdLnRvU2hvcnRTdHJpbmcoKSk7cmV0dXJuIGEuam9pbigiLCIpfSxjYWxjdWxhdGVCb3VuZHM6ZnVuY3Rpb24oKXt0aGlzLmJvdW5kcz1udWxsO3ZhciBhPW5ldyBPcGVuTGF5ZXJzLkJvdW5kcyxiPXRoaXMuY29tcG9uZW50cztpZihiKWZvcih2YXIgYz0wLGQ9Yi5sZW5ndGg7YzxkO2MrKylhLmV4dGVuZChiW2NdLmdldEJvdW5kcygpKTtudWxsIT1hLmxlZnQmJihudWxsIT1hLmJvdHRvbSYmbnVsbCE9YS5yaWdodCYmbnVsbCE9YS50b3ApJiZ0aGlzLnNldEJvdW5kcyhhKX0sYWRkQ29tcG9uZW50czpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLlV0aWwuaXNBcnJheShhKXx8KGE9W2FdKTtmb3IodmFyIGI9MCxjPWEubGVuZ3RoO2I8CmM7YisrKXRoaXMuYWRkQ29tcG9uZW50KGFbYl0pfSxhZGRDb21wb25lbnQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz0hMTtpZihhJiYobnVsbD09dGhpcy5jb21wb25lbnRUeXBlc3x8LTE8T3BlbkxheWVycy5VdGlsLmluZGV4T2YodGhpcy5jb21wb25lbnRUeXBlcyxhLkNMQVNTX05BTUUpKSl7aWYobnVsbCE9YiYmYjx0aGlzLmNvbXBvbmVudHMubGVuZ3RoKXt2YXIgYz10aGlzLmNvbXBvbmVudHMuc2xpY2UoMCxiKSxkPXRoaXMuY29tcG9uZW50cy5zbGljZShiLHRoaXMuY29tcG9uZW50cy5sZW5ndGgpO2MucHVzaChhKTt0aGlzLmNvbXBvbmVudHM9Yy5jb25jYXQoZCl9ZWxzZSB0aGlzLmNvbXBvbmVudHMucHVzaChhKTthLnBhcmVudD10aGlzO3RoaXMuY2xlYXJCb3VuZHMoKTtjPSEwfXJldHVybiBjfSxyZW1vdmVDb21wb25lbnRzOmZ1bmN0aW9uKGEpe3ZhciBiPSExO09wZW5MYXllcnMuVXRpbC5pc0FycmF5KGEpfHwoYT1bYV0pO2Zvcih2YXIgYz1hLmxlbmd0aC0xOzA8PWM7LS1jKWI9CnRoaXMucmVtb3ZlQ29tcG9uZW50KGFbY10pfHxiO3JldHVybiBifSxyZW1vdmVDb21wb25lbnQ6ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5VdGlsLnJlbW92ZUl0ZW0odGhpcy5jb21wb25lbnRzLGEpO3RoaXMuY2xlYXJCb3VuZHMoKTtyZXR1cm4hMH0sZ2V0TGVuZ3RoOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPTAsYj0wLGM9dGhpcy5jb21wb25lbnRzLmxlbmd0aDtiPGM7YisrKWErPXRoaXMuY29tcG9uZW50c1tiXS5nZXRMZW5ndGgoKTtyZXR1cm4gYX0sZ2V0QXJlYTpmdW5jdGlvbigpe2Zvcih2YXIgYT0wLGI9MCxjPXRoaXMuY29tcG9uZW50cy5sZW5ndGg7YjxjO2IrKylhKz10aGlzLmNvbXBvbmVudHNbYl0uZ2V0QXJlYSgpO3JldHVybiBhfSxnZXRHZW9kZXNpY0FyZWE6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPTAsYz0wLGQ9dGhpcy5jb21wb25lbnRzLmxlbmd0aDtjPGQ7YysrKWIrPXRoaXMuY29tcG9uZW50c1tjXS5nZXRHZW9kZXNpY0FyZWEoYSk7cmV0dXJuIGJ9LGdldENlbnRyb2lkOmZ1bmN0aW9uKGEpe2lmKCFhKXJldHVybiB0aGlzLmNvbXBvbmVudHMubGVuZ3RoJiYKdGhpcy5jb21wb25lbnRzWzBdLmdldENlbnRyb2lkKCk7YT10aGlzLmNvbXBvbmVudHMubGVuZ3RoO2lmKCFhKXJldHVybiExO2Zvcih2YXIgYj1bXSxjPVtdLGQ9MCxlPU51bWJlci5NQVhfVkFMVUUsZixnPTA7ZzxhOysrZyl7Zj10aGlzLmNvbXBvbmVudHNbZ107dmFyIGg9Zi5nZXRBcmVhKCk7Zj1mLmdldENlbnRyb2lkKCEwKTtpc05hTihoKXx8KGlzTmFOKGYueCl8fGlzTmFOKGYueSkpfHwoYi5wdXNoKGgpLGQrPWgsZT1oPGUmJjA8aD9oOmUsYy5wdXNoKGYpKX1hPWIubGVuZ3RoO2lmKDA9PT1kKXtmb3IoZz0wO2c8YTsrK2cpYltnXT0xO2Q9Yi5sZW5ndGh9ZWxzZXtmb3IoZz0wO2c8YTsrK2cpYltnXS89ZTtkLz1lfWZvcih2YXIgaz1lPTAsZz0wO2c8YTsrK2cpZj1jW2ddLGg9YltnXSxlKz1mLngqaCxrKz1mLnkqaDtyZXR1cm4gbmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoZS9kLGsvZCl9LGdldEdlb2Rlc2ljTGVuZ3RoOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0wLApjPTAsZD10aGlzLmNvbXBvbmVudHMubGVuZ3RoO2M8ZDtjKyspYis9dGhpcy5jb21wb25lbnRzW2NdLmdldEdlb2Rlc2ljTGVuZ3RoKGEpO3JldHVybiBifSxtb3ZlOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTAsZD10aGlzLmNvbXBvbmVudHMubGVuZ3RoO2M8ZDtjKyspdGhpcy5jb21wb25lbnRzW2NdLm1vdmUoYSxiKX0scm90YXRlOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTAsZD10aGlzLmNvbXBvbmVudHMubGVuZ3RoO2M8ZDsrK2MpdGhpcy5jb21wb25lbnRzW2NdLnJvdGF0ZShhLGIpfSxyZXNpemU6ZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZD0wO2Q8dGhpcy5jb21wb25lbnRzLmxlbmd0aDsrK2QpdGhpcy5jb21wb25lbnRzW2RdLnJlc2l6ZShhLGIsYyk7cmV0dXJuIHRoaXN9LGRpc3RhbmNlVG86ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9IShiJiYhMT09PWIuZWRnZSkmJmImJmIuZGV0YWlscyxkLGUsZixnPU51bWJlci5QT1NJVElWRV9JTkZJTklUWSxoPTAsaz10aGlzLmNvbXBvbmVudHMubGVuZ3RoO2g8CmsmJiEoZD10aGlzLmNvbXBvbmVudHNbaF0uZGlzdGFuY2VUbyhhLGIpLGY9Yz9kLmRpc3RhbmNlOmQsZjxnJiYoZz1mLGU9ZCwwPT1nKSk7KytoKTtyZXR1cm4gZX0sZXF1YWxzOmZ1bmN0aW9uKGEpe3ZhciBiPSEwO2lmKGEmJmEuQ0xBU1NfTkFNRSYmdGhpcy5DTEFTU19OQU1FPT1hLkNMQVNTX05BTUUpaWYoT3BlbkxheWVycy5VdGlsLmlzQXJyYXkoYS5jb21wb25lbnRzKSYmYS5jb21wb25lbnRzLmxlbmd0aD09dGhpcy5jb21wb25lbnRzLmxlbmd0aClmb3IodmFyIGM9MCxkPXRoaXMuY29tcG9uZW50cy5sZW5ndGg7YzxkOysrYyl7aWYoIXRoaXMuY29tcG9uZW50c1tjXS5lcXVhbHMoYS5jb21wb25lbnRzW2NdKSl7Yj0hMTticmVha319ZWxzZSBiPSExO2Vsc2UgYj0hMTtyZXR1cm4gYn0sdHJhbnNmb3JtOmZ1bmN0aW9uKGEsYil7aWYoYSYmYil7Zm9yKHZhciBjPTAsZD10aGlzLmNvbXBvbmVudHMubGVuZ3RoO2M8ZDtjKyspdGhpcy5jb21wb25lbnRzW2NdLnRyYW5zZm9ybShhLApiKTt0aGlzLmJvdW5kcz1udWxsfXJldHVybiB0aGlzfSxpbnRlcnNlY3RzOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0hMSxjPTAsZD10aGlzLmNvbXBvbmVudHMubGVuZ3RoO2M8ZCYmIShiPWEuaW50ZXJzZWN0cyh0aGlzLmNvbXBvbmVudHNbY10pKTsrK2MpO3JldHVybiBifSxnZXRWZXJ0aWNlczpmdW5jdGlvbihhKXtmb3IodmFyIGI9W10sYz0wLGQ9dGhpcy5jb21wb25lbnRzLmxlbmd0aDtjPGQ7KytjKUFycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KGIsdGhpcy5jb21wb25lbnRzW2NdLmdldFZlcnRpY2VzKGEpKTtyZXR1cm4gYn0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5HZW9tZXRyeS5Db2xsZWN0aW9uIn0pO09wZW5MYXllcnMuR2VvbWV0cnkuTXVsdGlQb2ludD1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuR2VvbWV0cnkuQ29sbGVjdGlvbix7Y29tcG9uZW50VHlwZXM6WyJPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50Il0sYWRkUG9pbnQ6ZnVuY3Rpb24oYSxiKXt0aGlzLmFkZENvbXBvbmVudChhLGIpfSxyZW1vdmVQb2ludDpmdW5jdGlvbihhKXt0aGlzLnJlbW92ZUNvbXBvbmVudChhKX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5HZW9tZXRyeS5NdWx0aVBvaW50In0pO09wZW5MYXllcnMuR2VvbWV0cnkuQ3VydmU9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkdlb21ldHJ5Lk11bHRpUG9pbnQse2NvbXBvbmVudFR5cGVzOlsiT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludCJdLGdldExlbmd0aDpmdW5jdGlvbigpe3ZhciBhPTA7aWYodGhpcy5jb21wb25lbnRzJiYxPHRoaXMuY29tcG9uZW50cy5sZW5ndGgpZm9yKHZhciBiPTEsYz10aGlzLmNvbXBvbmVudHMubGVuZ3RoO2I8YztiKyspYSs9dGhpcy5jb21wb25lbnRzW2ItMV0uZGlzdGFuY2VUbyh0aGlzLmNvbXBvbmVudHNbYl0pO3JldHVybiBhfSxnZXRHZW9kZXNpY0xlbmd0aDpmdW5jdGlvbihhKXt2YXIgYj10aGlzO2lmKGEpe3ZhciBjPW5ldyBPcGVuTGF5ZXJzLlByb2plY3Rpb24oIkVQU0c6NDMyNiIpO2MuZXF1YWxzKGEpfHwoYj10aGlzLmNsb25lKCkudHJhbnNmb3JtKGEsYykpfWE9MDtpZihiLmNvbXBvbmVudHMmJjE8Yi5jb21wb25lbnRzLmxlbmd0aClmb3IodmFyIGQsZT0xLGY9Yi5jb21wb25lbnRzLmxlbmd0aDtlPApmO2UrKyljPWIuY29tcG9uZW50c1tlLTFdLGQ9Yi5jb21wb25lbnRzW2VdLGErPU9wZW5MYXllcnMuVXRpbC5kaXN0VmluY2VudHkoe2xvbjpjLngsbGF0OmMueX0se2xvbjpkLngsbGF0OmQueX0pO3JldHVybiAxRTMqYX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5HZW9tZXRyeS5DdXJ2ZSJ9KTtPcGVuTGF5ZXJzLkdlb21ldHJ5LkxpbmVTdHJpbmc9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkdlb21ldHJ5LkN1cnZlLHtyZW1vdmVDb21wb25lbnQ6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jb21wb25lbnRzJiYyPHRoaXMuY29tcG9uZW50cy5sZW5ndGg7YiYmT3BlbkxheWVycy5HZW9tZXRyeS5Db2xsZWN0aW9uLnByb3RvdHlwZS5yZW1vdmVDb21wb25lbnQuYXBwbHkodGhpcyxhcmd1bWVudHMpO3JldHVybiBifSxpbnRlcnNlY3RzOmZ1bmN0aW9uKGEpe3ZhciBiPSExLGM9YS5DTEFTU19OQU1FO2lmKCJPcGVuTGF5ZXJzLkdlb21ldHJ5LkxpbmVTdHJpbmciPT1jfHwiT3BlbkxheWVycy5HZW9tZXRyeS5MaW5lYXJSaW5nIj09Y3x8Ik9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQiPT1jKXt2YXIgZD10aGlzLmdldFNvcnRlZFNlZ21lbnRzKCk7YT0iT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludCI9PWM/W3t4MTphLngseTE6YS55LHgyOmEueCx5MjphLnl9XTphLmdldFNvcnRlZFNlZ21lbnRzKCk7CnZhciBlLGYsZyxoLGssbCxtLG49MCxwPWQubGVuZ3RoO2E6Zm9yKDtuPHA7KytuKXtjPWRbbl07ZT1jLngxO2Y9Yy54MjtnPWMueTE7aD1jLnkyO3ZhciBxPTAscj1hLmxlbmd0aDtmb3IoO3E8cjsrK3Epe2s9YVtxXTtpZihrLngxPmYpYnJlYWs7aWYoIShrLngyPGV8fChsPWsueTEsbT1rLnkyLE1hdGgubWluKGwsbSk+TWF0aC5tYXgoZyxoKXx8TWF0aC5tYXgobCxtKTxNYXRoLm1pbihnLGgpfHwhT3BlbkxheWVycy5HZW9tZXRyeS5zZWdtZW50c0ludGVyc2VjdChjLGspKSkpe2I9ITA7YnJlYWsgYX19fX1lbHNlIGI9YS5pbnRlcnNlY3RzKHRoaXMpO3JldHVybiBifSxnZXRTb3J0ZWRTZWdtZW50czpmdW5jdGlvbigpe2Zvcih2YXIgYT10aGlzLmNvbXBvbmVudHMubGVuZ3RoLTEsYj1BcnJheShhKSxjLGQsZT0wO2U8YTsrK2UpYz10aGlzLmNvbXBvbmVudHNbZV0sZD10aGlzLmNvbXBvbmVudHNbZSsxXSxiW2VdPWMueDxkLng/e3gxOmMueCx5MTpjLnkseDI6ZC54LHkyOmQueX06Cnt4MTpkLngseTE6ZC55LHgyOmMueCx5MjpjLnl9O3JldHVybiBiLnNvcnQoZnVuY3Rpb24oYSxiKXtyZXR1cm4gYS54MS1iLngxfSl9LHNwbGl0V2l0aFNlZ21lbnQ6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9IShiJiYhMT09PWIuZWRnZSksZD1iJiZiLnRvbGVyYW5jZSxlPVtdLGY9dGhpcy5nZXRWZXJ0aWNlcygpLGc9W10saD1bXSxrPSExLGwsbSxuLHA9e3BvaW50OiEwLHRvbGVyYW5jZTpkfSxxPW51bGwscj0wLHM9Zi5sZW5ndGgtMjtyPD1zOysrcilpZihkPWZbcl0sZy5wdXNoKGQuY2xvbmUoKSksbD1mW3IrMV0sbT17eDE6ZC54LHkxOmQueSx4MjpsLngseTI6bC55fSxtPU9wZW5MYXllcnMuR2VvbWV0cnkuc2VnbWVudHNJbnRlcnNlY3QoYSxtLHApLG0gaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50JiYoKG49bS54PT09YS54MSYmbS55PT09YS55MXx8bS54PT09YS54MiYmbS55PT09YS55Mnx8bS5lcXVhbHMoZCl8fG0uZXF1YWxzKGwpPyEwOiExKXx8YykpbS5lcXVhbHMoaFtoLmxlbmd0aC0KMV0pfHxoLnB1c2gobS5jbG9uZSgpKSwwPT09ciYmbS5lcXVhbHMoZCl8fG0uZXF1YWxzKGwpfHwoaz0hMCxtLmVxdWFscyhkKXx8Zy5wdXNoKG0pLGUucHVzaChuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5MaW5lU3RyaW5nKGcpKSxnPVttLmNsb25lKCldKTtrJiYoZy5wdXNoKGwuY2xvbmUoKSksZS5wdXNoKG5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LkxpbmVTdHJpbmcoZykpKTtpZigwPGgubGVuZ3RoKXZhciB0PWEueDE8YS54Mj8xOi0xLHU9YS55MTxhLnkyPzE6LTEscT17bGluZXM6ZSxwb2ludHM6aC5zb3J0KGZ1bmN0aW9uKGEsYil7cmV0dXJuIHQqYS54LXQqYi54fHx1KmEueS11KmIueX0pfTtyZXR1cm4gcX0sc3BsaXQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz1udWxsLGQ9YiYmYi5tdXR1YWwsZSxmLGcsaDtpZihhIGluc3RhbmNlb2YgT3BlbkxheWVycy5HZW9tZXRyeS5MaW5lU3RyaW5nKXt2YXIgaz10aGlzLmdldFZlcnRpY2VzKCksbCxtLG4scCxxLHI9W107Zz1bXTtmb3IodmFyIHM9CjAsdD1rLmxlbmd0aC0yO3M8PXQ7KytzKXtsPWtbc107bT1rW3MrMV07bj17eDE6bC54LHkxOmwueSx4MjptLngseTI6bS55fTtoPWh8fFthXTtkJiZyLnB1c2gobC5jbG9uZSgpKTtmb3IodmFyIHU9MDt1PGgubGVuZ3RoOysrdSlpZihwPWhbdV0uc3BsaXRXaXRoU2VnbWVudChuLGIpKWlmKHE9cC5saW5lcywwPHEubGVuZ3RoJiYocS51bnNoaWZ0KHUsMSksQXJyYXkucHJvdG90eXBlLnNwbGljZS5hcHBseShoLHEpLHUrPXEubGVuZ3RoLTIpLGQpZm9yKHZhciB2PTAsdz1wLnBvaW50cy5sZW5ndGg7djx3OysrdilxPXAucG9pbnRzW3ZdLHEuZXF1YWxzKGwpfHwoci5wdXNoKHEpLGcucHVzaChuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5MaW5lU3RyaW5nKHIpKSxyPXEuZXF1YWxzKG0pP1tdOltxLmNsb25lKCldKX1kJiYoMDxnLmxlbmd0aCYmMDxyLmxlbmd0aCkmJihyLnB1c2gobS5jbG9uZSgpKSxnLnB1c2gobmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuTGluZVN0cmluZyhyKSkpfWVsc2UgYz0KYS5zcGxpdFdpdGgodGhpcyxiKTtoJiYxPGgubGVuZ3RoP2Y9ITA6aD1bXTtnJiYxPGcubGVuZ3RoP2U9ITA6Zz1bXTtpZihmfHxlKWM9ZD9bZyxoXTpoO3JldHVybiBjfSxzcGxpdFdpdGg6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYS5zcGxpdCh0aGlzLGIpfSxnZXRWZXJ0aWNlczpmdW5jdGlvbihhKXtyZXR1cm4hMD09PWE/W3RoaXMuY29tcG9uZW50c1swXSx0aGlzLmNvbXBvbmVudHNbdGhpcy5jb21wb25lbnRzLmxlbmd0aC0xXV06ITE9PT1hP3RoaXMuY29tcG9uZW50cy5zbGljZSgxLHRoaXMuY29tcG9uZW50cy5sZW5ndGgtMSk6dGhpcy5jb21wb25lbnRzLnNsaWNlKCl9LGRpc3RhbmNlVG86ZnVuY3Rpb24oYSxiKXt2YXIgYz0hKGImJiExPT09Yi5lZGdlKSYmYiYmYi5kZXRhaWxzLGQsZT17fSxmPU51bWJlci5QT1NJVElWRV9JTkZJTklUWTtpZihhIGluc3RhbmNlb2YgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludCl7Zm9yKHZhciBnPXRoaXMuZ2V0U29ydGVkU2VnbWVudHMoKSwKaD1hLngsaz1hLnksbCxtPTAsbj1nLmxlbmd0aDttPG47KyttKWlmKGw9Z1ttXSxkPU9wZW5MYXllcnMuR2VvbWV0cnkuZGlzdGFuY2VUb1NlZ21lbnQoYSxsKSxkLmRpc3RhbmNlPGYpe2lmKGY9ZC5kaXN0YW5jZSxlPWQsMD09PWYpYnJlYWt9ZWxzZSBpZihsLngyPmgmJihrPmwueTEmJms8bC55Mnx8azxsLnkxJiZrPmwueTIpKWJyZWFrO2U9Yz97ZGlzdGFuY2U6ZS5kaXN0YW5jZSx4MDplLngseTA6ZS55LHgxOmgseTE6a306ZS5kaXN0YW5jZX1lbHNlIGlmKGEgaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLkdlb21ldHJ5LkxpbmVTdHJpbmcpe3ZhciBnPXRoaXMuZ2V0U29ydGVkU2VnbWVudHMoKSxoPWEuZ2V0U29ydGVkU2VnbWVudHMoKSxwLHEscj1oLmxlbmd0aCxzPXtwb2ludDohMH0sbT0wLG49Zy5sZW5ndGg7YTpmb3IoO208bjsrK20pe2s9Z1ttXTtsPWsueDE7cT1rLnkxO2Zvcih2YXIgdD0wO3Q8cjsrK3QpaWYoZD1oW3RdLHA9T3BlbkxheWVycy5HZW9tZXRyeS5zZWdtZW50c0ludGVyc2VjdChrLApkLHMpKXtmPTA7ZT17ZGlzdGFuY2U6MCx4MDpwLngseTA6cC55LHgxOnAueCx5MTpwLnl9O2JyZWFrIGF9ZWxzZSBkPU9wZW5MYXllcnMuR2VvbWV0cnkuZGlzdGFuY2VUb1NlZ21lbnQoe3g6bCx5OnF9LGQpLGQuZGlzdGFuY2U8ZiYmKGY9ZC5kaXN0YW5jZSxlPXtkaXN0YW5jZTpmLHgwOmwseTA6cSx4MTpkLngseTE6ZC55fSl9Y3x8KGU9ZS5kaXN0YW5jZSk7MCE9PWYmJmsmJihkPWEuZGlzdGFuY2VUbyhuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludChrLngyLGsueTIpLGIpLG09Yz9kLmRpc3RhbmNlOmQsbTxmJiYoZT1jP3tkaXN0YW5jZTpmLHgwOmQueDEseTA6ZC55MSx4MTpkLngwLHkxOmQueTB9Om0pKX1lbHNlIGU9YS5kaXN0YW5jZVRvKHRoaXMsYiksYyYmKGU9e2Rpc3RhbmNlOmUuZGlzdGFuY2UseDA6ZS54MSx5MDplLnkxLHgxOmUueDAseTE6ZS55MH0pO3JldHVybiBlfSxzaW1wbGlmeTpmdW5jdGlvbihhKXtpZih0aGlzJiZudWxsIT09dGhpcyl7dmFyIGI9dGhpcy5nZXRWZXJ0aWNlcygpOwppZigzPmIubGVuZ3RoKXJldHVybiB0aGlzO3ZhciBjPWZ1bmN0aW9uKGEsYixkLGspe2Zvcih2YXIgbD0wLG09MCxuPWIscDtuPGQ7bisrKXtwPWFbYl07dmFyIHE9YVtkXSxyPWFbbl0scj1NYXRoLmFicygwLjUqKHAueCpxLnkrcS54KnIueStyLngqcC55LXEueCpwLnktci54KnEueS1wLngqci55KSk7cD1NYXRoLnNxcnQoTWF0aC5wb3cocC54LXEueCwyKStNYXRoLnBvdyhwLnktcS55LDIpKTtwPTIqKHIvcCk7cD5sJiYobD1wLG09bil9bD5rJiZtIT1iJiYoZS5wdXNoKG0pLGMoYSxiLG0sayksYyhhLG0sZCxrKSl9LGQ9Yi5sZW5ndGgtMSxlPVtdO2UucHVzaCgwKTtmb3IoZS5wdXNoKGQpO2JbMF0uZXF1YWxzKGJbZF0pOylkLS0sZS5wdXNoKGQpO2MoYiwwLGQsYSk7YT1bXTtlLnNvcnQoZnVuY3Rpb24oYSxiKXtyZXR1cm4gYS1ifSk7Zm9yKGQ9MDtkPGUubGVuZ3RoO2QrKylhLnB1c2goYltlW2RdXSk7cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LkxpbmVTdHJpbmcoYSl9cmV0dXJuIHRoaXN9LApDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkdlb21ldHJ5LkxpbmVTdHJpbmcifSk7T3BlbkxheWVycy5HZW9tZXRyeS5NdWx0aUxpbmVTdHJpbmc9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkdlb21ldHJ5LkNvbGxlY3Rpb24se2NvbXBvbmVudFR5cGVzOlsiT3BlbkxheWVycy5HZW9tZXRyeS5MaW5lU3RyaW5nIl0sc3BsaXQ6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9bnVsbCxkPWImJmIubXV0dWFsLGUsZixnLGgsaz1bXSxsPVthXSxtPTAsbj10aGlzLmNvbXBvbmVudHMubGVuZ3RoO208bjsrK20pe2Y9dGhpcy5jb21wb25lbnRzW21dO2c9ITE7Zm9yKHZhciBwPTA7cDxsLmxlbmd0aDsrK3ApaWYoZT1mLnNwbGl0KGxbcF0sYikpe2lmKGQpe2c9ZVswXTtmb3IodmFyIHE9MCxyPWcubGVuZ3RoO3E8cjsrK3EpMD09PXEmJmsubGVuZ3RoP2tbay5sZW5ndGgtMV0uYWRkQ29tcG9uZW50KGdbcV0pOmsucHVzaChuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5NdWx0aUxpbmVTdHJpbmcoW2dbcV1dKSk7Zz0hMDtlPWVbMV19aWYoZS5sZW5ndGgpe2UudW5zaGlmdChwLAoxKTtBcnJheS5wcm90b3R5cGUuc3BsaWNlLmFwcGx5KGwsZSk7YnJlYWt9fWd8fChrLmxlbmd0aD9rW2subGVuZ3RoLTFdLmFkZENvbXBvbmVudChmLmNsb25lKCkpOms9W25ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5Lk11bHRpTGluZVN0cmluZyhmLmNsb25lKCkpXSl9ayYmMTxrLmxlbmd0aD9nPSEwOms9W107bCYmMTxsLmxlbmd0aD9oPSEwOmw9W107aWYoZ3x8aCljPWQ/W2ssbF06bDtyZXR1cm4gY30sc3BsaXRXaXRoOmZ1bmN0aW9uKGEsYil7dmFyIGM9bnVsbCxkPWImJmIubXV0dWFsLGUsZixnLGgsayxsO2lmKGEgaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLkdlb21ldHJ5LkxpbmVTdHJpbmcpe2w9W107az1bYV07Zm9yKHZhciBtPTAsbj10aGlzLmNvbXBvbmVudHMubGVuZ3RoO208bjsrK20pe2c9ITE7Zj10aGlzLmNvbXBvbmVudHNbbV07Zm9yKHZhciBwPTA7cDxrLmxlbmd0aDsrK3ApaWYoZT1rW3BdLnNwbGl0KGYsYikpe2QmJihnPWVbMF0sZy5sZW5ndGgmJihnLnVuc2hpZnQocCwKMSksQXJyYXkucHJvdG90eXBlLnNwbGljZS5hcHBseShrLGcpLHArPWcubGVuZ3RoLTIpLGU9ZVsxXSwwPT09ZS5sZW5ndGgmJihlPVtmLmNsb25lKCldKSk7Zz0wO2Zvcih2YXIgcT1lLmxlbmd0aDtnPHE7KytnKTA9PT1nJiZsLmxlbmd0aD9sW2wubGVuZ3RoLTFdLmFkZENvbXBvbmVudChlW2ddKTpsLnB1c2gobmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuTXVsdGlMaW5lU3RyaW5nKFtlW2ddXSkpO2c9ITB9Z3x8KGwubGVuZ3RoP2xbbC5sZW5ndGgtMV0uYWRkQ29tcG9uZW50KGYuY2xvbmUoKSk6bD1bbmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuTXVsdGlMaW5lU3RyaW5nKFtmLmNsb25lKCldKV0pfX1lbHNlIGM9YS5zcGxpdCh0aGlzKTtrJiYxPGsubGVuZ3RoP2g9ITA6az1bXTtsJiYxPGwubGVuZ3RoP2c9ITA6bD1bXTtpZihofHxnKWM9ZD9bayxsXTpsO3JldHVybiBjfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkdlb21ldHJ5Lk11bHRpTGluZVN0cmluZyJ9KTtPcGVuTGF5ZXJzLkdlb21ldHJ5LkxpbmVhclJpbmc9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkdlb21ldHJ5LkxpbmVTdHJpbmcse2NvbXBvbmVudFR5cGVzOlsiT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludCJdLGFkZENvbXBvbmVudDpmdW5jdGlvbihhLGIpe3ZhciBjPSExLGQ9dGhpcy5jb21wb25lbnRzLnBvcCgpO251bGw9PWImJmEuZXF1YWxzKGQpfHwoYz1PcGVuTGF5ZXJzLkdlb21ldHJ5LkNvbGxlY3Rpb24ucHJvdG90eXBlLmFkZENvbXBvbmVudC5hcHBseSh0aGlzLGFyZ3VtZW50cykpO09wZW5MYXllcnMuR2VvbWV0cnkuQ29sbGVjdGlvbi5wcm90b3R5cGUuYWRkQ29tcG9uZW50LmFwcGx5KHRoaXMsW3RoaXMuY29tcG9uZW50c1swXV0pO3JldHVybiBjfSxyZW1vdmVDb21wb25lbnQ6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jb21wb25lbnRzJiYzPHRoaXMuY29tcG9uZW50cy5sZW5ndGg7YiYmKHRoaXMuY29tcG9uZW50cy5wb3AoKSxPcGVuTGF5ZXJzLkdlb21ldHJ5LkNvbGxlY3Rpb24ucHJvdG90eXBlLnJlbW92ZUNvbXBvbmVudC5hcHBseSh0aGlzLAphcmd1bWVudHMpLE9wZW5MYXllcnMuR2VvbWV0cnkuQ29sbGVjdGlvbi5wcm90b3R5cGUuYWRkQ29tcG9uZW50LmFwcGx5KHRoaXMsW3RoaXMuY29tcG9uZW50c1swXV0pKTtyZXR1cm4gYn0sbW92ZTpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz0wLGQ9dGhpcy5jb21wb25lbnRzLmxlbmd0aDtjPGQtMTtjKyspdGhpcy5jb21wb25lbnRzW2NdLm1vdmUoYSxiKX0scm90YXRlOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTAsZD10aGlzLmNvbXBvbmVudHMubGVuZ3RoO2M8ZC0xOysrYyl0aGlzLmNvbXBvbmVudHNbY10ucm90YXRlKGEsYil9LHJlc2l6ZTpmdW5jdGlvbihhLGIsYyl7Zm9yKHZhciBkPTAsZT10aGlzLmNvbXBvbmVudHMubGVuZ3RoO2Q8ZS0xOysrZCl0aGlzLmNvbXBvbmVudHNbZF0ucmVzaXplKGEsYixjKTtyZXR1cm4gdGhpc30sdHJhbnNmb3JtOmZ1bmN0aW9uKGEsYil7aWYoYSYmYil7Zm9yKHZhciBjPTAsZD10aGlzLmNvbXBvbmVudHMubGVuZ3RoO2M8ZC0xO2MrKyl0aGlzLmNvbXBvbmVudHNbY10udHJhbnNmb3JtKGEsCmIpO3RoaXMuYm91bmRzPW51bGx9cmV0dXJuIHRoaXN9LGdldENlbnRyb2lkOmZ1bmN0aW9uKCl7aWYodGhpcy5jb21wb25lbnRzKXt2YXIgYT10aGlzLmNvbXBvbmVudHMubGVuZ3RoO2lmKDA8YSYmMj49YSlyZXR1cm4gdGhpcy5jb21wb25lbnRzWzBdLmNsb25lKCk7aWYoMjxhKXt2YXIgYj0wLGM9MCxkPXRoaXMuY29tcG9uZW50c1swXS54LGU9dGhpcy5jb21wb25lbnRzWzBdLnksZj0tMSp0aGlzLmdldEFyZWEoKTtpZigwIT1mKXtmb3IodmFyIGc9MDtnPGEtMTtnKyspdmFyIGg9dGhpcy5jb21wb25lbnRzW2ddLGs9dGhpcy5jb21wb25lbnRzW2crMV0sYj1iKyhoLngray54LTIqZCkqKChoLngtZCkqKGsueS1lKS0oay54LWQpKihoLnktZSkpLGM9YysoaC55K2sueS0yKmUpKigoaC54LWQpKihrLnktZSktKGsueC1kKSooaC55LWUpKTtiPWQrYi8oNipmKTthPWUrYy8oNipmKX1lbHNle2ZvcihnPTA7ZzxhLTE7ZysrKWIrPXRoaXMuY29tcG9uZW50c1tnXS54LGMrPXRoaXMuY29tcG9uZW50c1tnXS55OwpiLz1hLTE7YT1jLyhhLTEpfXJldHVybiBuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludChiLGEpfXJldHVybiBudWxsfX0sZ2V0QXJlYTpmdW5jdGlvbigpe3ZhciBhPTA7aWYodGhpcy5jb21wb25lbnRzJiYyPHRoaXMuY29tcG9uZW50cy5sZW5ndGgpe2Zvcih2YXIgYj1hPTAsYz10aGlzLmNvbXBvbmVudHMubGVuZ3RoO2I8Yy0xO2IrKyl2YXIgZD10aGlzLmNvbXBvbmVudHNbYl0sZT10aGlzLmNvbXBvbmVudHNbYisxXSxhPWErKGQueCtlLngpKihlLnktZC55KTthPS1hLzJ9cmV0dXJuIGF9LGdldEdlb2Rlc2ljQXJlYTpmdW5jdGlvbihhKXt2YXIgYj10aGlzO2lmKGEpe3ZhciBjPW5ldyBPcGVuTGF5ZXJzLlByb2plY3Rpb24oIkVQU0c6NDMyNiIpO2MuZXF1YWxzKGEpfHwoYj10aGlzLmNsb25lKCkudHJhbnNmb3JtKGEsYykpfWE9MDtjPWIuY29tcG9uZW50cyYmYi5jb21wb25lbnRzLmxlbmd0aDtpZigyPGMpe2Zvcih2YXIgZCxlLGY9MDtmPGMtMTtmKyspZD1iLmNvbXBvbmVudHNbZl0sCmU9Yi5jb21wb25lbnRzW2YrMV0sYSs9T3BlbkxheWVycy5VdGlsLnJhZChlLngtZC54KSooMitNYXRoLnNpbihPcGVuTGF5ZXJzLlV0aWwucmFkKGQueSkpK01hdGguc2luKE9wZW5MYXllcnMuVXRpbC5yYWQoZS55KSkpO2E9NDA2ODA2MzE1OTA3NjkqYS8yfXJldHVybiBhfSxjb250YWluc1BvaW50OmZ1bmN0aW9uKGEpe3ZhciBiPU9wZW5MYXllcnMuTnVtYmVyLmxpbWl0U2lnRGlncyxjPWIoYS54LDE0KTthPWIoYS55LDE0KTtmb3IodmFyIGQ9dGhpcy5jb21wb25lbnRzLmxlbmd0aC0xLGUsZixnLGgsayxsPTAsbT0wO208ZDsrK20paWYoZT10aGlzLmNvbXBvbmVudHNbbV0sZz1iKGUueCwxNCksZT1iKGUueSwxNCksZj10aGlzLmNvbXBvbmVudHNbbSsxXSxoPWIoZi54LDE0KSxmPWIoZi55LDE0KSxlPT1mKXtpZihhPT1lJiYoZzw9aCYmYz49ZyYmYzw9aHx8Zz49aCYmYzw9ZyYmYz49aCkpe2w9LTE7YnJlYWt9fWVsc2V7az1iKChhLWYpKigoaC1nKS8oZi1lKSkraCwxNCk7aWYoaz09CmMmJihlPGYmJmE+PWUmJmE8PWZ8fGU+ZiYmYTw9ZSYmYT49Zikpe2w9LTE7YnJlYWt9azw9Y3x8ZyE9aCYmKGs8TWF0aC5taW4oZyxoKXx8az5NYXRoLm1heChnLGgpKXx8KGU8ZiYmYT49ZSYmYTxmfHxlPmYmJmE8ZSYmYT49ZikmJisrbH1yZXR1cm4tMT09bD8xOiEhKGwmMSl9LGludGVyc2VjdHM6ZnVuY3Rpb24oYSl7dmFyIGI9ITE7aWYoIk9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQiPT1hLkNMQVNTX05BTUUpYj10aGlzLmNvbnRhaW5zUG9pbnQoYSk7ZWxzZSBpZigiT3BlbkxheWVycy5HZW9tZXRyeS5MaW5lU3RyaW5nIj09YS5DTEFTU19OQU1FKWI9YS5pbnRlcnNlY3RzKHRoaXMpO2Vsc2UgaWYoIk9wZW5MYXllcnMuR2VvbWV0cnkuTGluZWFyUmluZyI9PWEuQ0xBU1NfTkFNRSliPU9wZW5MYXllcnMuR2VvbWV0cnkuTGluZVN0cmluZy5wcm90b3R5cGUuaW50ZXJzZWN0cy5hcHBseSh0aGlzLFthXSk7ZWxzZSBmb3IodmFyIGM9MCxkPWEuY29tcG9uZW50cy5sZW5ndGg7YzwKZCYmIShiPWEuY29tcG9uZW50c1tjXS5pbnRlcnNlY3RzKHRoaXMpKTsrK2MpO3JldHVybiBifSxnZXRWZXJ0aWNlczpmdW5jdGlvbihhKXtyZXR1cm4hMD09PWE/W106dGhpcy5jb21wb25lbnRzLnNsaWNlKDAsdGhpcy5jb21wb25lbnRzLmxlbmd0aC0xKX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5HZW9tZXRyeS5MaW5lYXJSaW5nIn0pO09wZW5MYXllcnMuR2VvbWV0cnkuUG9seWdvbj1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuR2VvbWV0cnkuQ29sbGVjdGlvbix7Y29tcG9uZW50VHlwZXM6WyJPcGVuTGF5ZXJzLkdlb21ldHJ5LkxpbmVhclJpbmciXSxnZXRBcmVhOmZ1bmN0aW9uKCl7dmFyIGE9MDtpZih0aGlzLmNvbXBvbmVudHMmJjA8dGhpcy5jb21wb25lbnRzLmxlbmd0aClmb3IodmFyIGE9YStNYXRoLmFicyh0aGlzLmNvbXBvbmVudHNbMF0uZ2V0QXJlYSgpKSxiPTEsYz10aGlzLmNvbXBvbmVudHMubGVuZ3RoO2I8YztiKyspYS09TWF0aC5hYnModGhpcy5jb21wb25lbnRzW2JdLmdldEFyZWEoKSk7cmV0dXJuIGF9LGdldEdlb2Rlc2ljQXJlYTpmdW5jdGlvbihhKXt2YXIgYj0wO2lmKHRoaXMuY29tcG9uZW50cyYmMDx0aGlzLmNvbXBvbmVudHMubGVuZ3RoKWZvcih2YXIgYj1iK01hdGguYWJzKHRoaXMuY29tcG9uZW50c1swXS5nZXRHZW9kZXNpY0FyZWEoYSkpLGM9MSxkPXRoaXMuY29tcG9uZW50cy5sZW5ndGg7YzwKZDtjKyspYi09TWF0aC5hYnModGhpcy5jb21wb25lbnRzW2NdLmdldEdlb2Rlc2ljQXJlYShhKSk7cmV0dXJuIGJ9LGNvbnRhaW5zUG9pbnQ6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jb21wb25lbnRzLmxlbmd0aCxjPSExO2lmKDA8YiYmKGM9dGhpcy5jb21wb25lbnRzWzBdLmNvbnRhaW5zUG9pbnQoYSksMSE9PWMmJmMmJjE8YikpZm9yKHZhciBkLGU9MTtlPGI7KytlKWlmKGQ9dGhpcy5jb21wb25lbnRzW2VdLmNvbnRhaW5zUG9pbnQoYSkpe2M9MT09PWQ/MTohMTticmVha31yZXR1cm4gY30saW50ZXJzZWN0czpmdW5jdGlvbihhKXt2YXIgYj0hMSxjLGQ7aWYoIk9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQiPT1hLkNMQVNTX05BTUUpYj10aGlzLmNvbnRhaW5zUG9pbnQoYSk7ZWxzZSBpZigiT3BlbkxheWVycy5HZW9tZXRyeS5MaW5lU3RyaW5nIj09YS5DTEFTU19OQU1FfHwiT3BlbkxheWVycy5HZW9tZXRyeS5MaW5lYXJSaW5nIj09YS5DTEFTU19OQU1FKXtjPTA7Zm9yKGQ9CnRoaXMuY29tcG9uZW50cy5sZW5ndGg7YzxkJiYhKGI9YS5pbnRlcnNlY3RzKHRoaXMuY29tcG9uZW50c1tjXSkpOysrYyk7aWYoIWIpZm9yKGM9MCxkPWEuY29tcG9uZW50cy5sZW5ndGg7YzxkJiYhKGI9dGhpcy5jb250YWluc1BvaW50KGEuY29tcG9uZW50c1tjXSkpOysrYyk7fWVsc2UgZm9yKGM9MCxkPWEuY29tcG9uZW50cy5sZW5ndGg7YzxkJiYhKGI9dGhpcy5pbnRlcnNlY3RzKGEuY29tcG9uZW50c1tjXSkpOysrYyk7aWYoIWImJiJPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvbHlnb24iPT1hLkNMQVNTX05BTUUpe3ZhciBlPXRoaXMuY29tcG9uZW50c1swXTtjPTA7Zm9yKGQ9ZS5jb21wb25lbnRzLmxlbmd0aDtjPGQmJiEoYj1hLmNvbnRhaW5zUG9pbnQoZS5jb21wb25lbnRzW2NdKSk7KytjKTt9cmV0dXJuIGJ9LGRpc3RhbmNlVG86ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYiYmITE9PT1iLmVkZ2UmJnRoaXMuaW50ZXJzZWN0cyhhKT8wOk9wZW5MYXllcnMuR2VvbWV0cnkuQ29sbGVjdGlvbi5wcm90b3R5cGUuZGlzdGFuY2VUby5hcHBseSh0aGlzLApbYSxiXSl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuR2VvbWV0cnkuUG9seWdvbiJ9KTtPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvbHlnb24uY3JlYXRlUmVndWxhclBvbHlnb249ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9TWF0aC5QSSooMS9jLTAuNSk7ZCYmKGUrPWQvMTgwKk1hdGguUEkpO2Zvcih2YXIgZixnPVtdLGg9MDtoPGM7KytoKWY9ZSsyKmgqTWF0aC5QSS9jLGQ9YS54K2IqTWF0aC5jb3MoZiksZj1hLnkrYipNYXRoLnNpbihmKSxnLnB1c2gobmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoZCxmKSk7YT1uZXcgT3BlbkxheWVycy5HZW9tZXRyeS5MaW5lYXJSaW5nKGcpO3JldHVybiBuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2x5Z29uKFthXSl9O09wZW5MYXllcnMuR2VvbWV0cnkuTXVsdGlQb2x5Z29uPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5HZW9tZXRyeS5Db2xsZWN0aW9uLHtjb21wb25lbnRUeXBlczpbIk9wZW5MYXllcnMuR2VvbWV0cnkuUG9seWdvbiJdLENMQVNTX05BTUU6Ik9wZW5MYXllcnMuR2VvbWV0cnkuTXVsdGlQb2x5Z29uIn0pO09wZW5MYXllcnMuRm9ybWF0LkdNTD1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuRm9ybWF0LlhNTCx7ZmVhdHVyZU5TOiJodHRwOi8vbWFwc2VydmVyLmdpcy51bW4uZWR1L21hcHNlcnZlciIsZmVhdHVyZVByZWZpeDoiZmVhdHVyZSIsZmVhdHVyZU5hbWU6ImZlYXR1cmVNZW1iZXIiLGxheWVyTmFtZToiZmVhdHVyZXMiLGdlb21ldHJ5TmFtZToiZ2VvbWV0cnkiLGNvbGxlY3Rpb25OYW1lOiJGZWF0dXJlQ29sbGVjdGlvbiIsZ21sbnM6Imh0dHA6Ly93d3cub3Blbmdpcy5uZXQvZ21sIixleHRyYWN0QXR0cmlidXRlczohMCx4eTohMCxpbml0aWFsaXplOmZ1bmN0aW9uKGEpe3RoaXMucmVnRXhlcz17dHJpbVNwYWNlOi9eXHMqfFxzKiQvZyxyZW1vdmVTcGFjZTovXHMqL2csc3BsaXRTcGFjZTovXHMrLyx0cmltQ29tbWE6L1xzKixccyovZ307T3BlbkxheWVycy5Gb3JtYXQuWE1MLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsW2FdKX0scmVhZDpmdW5jdGlvbihhKXsic3RyaW5nIj09CnR5cGVvZiBhJiYoYT1PcGVuTGF5ZXJzLkZvcm1hdC5YTUwucHJvdG90eXBlLnJlYWQuYXBwbHkodGhpcyxbYV0pKTthPXRoaXMuZ2V0RWxlbWVudHNCeVRhZ05hbWVOUyhhLmRvY3VtZW50RWxlbWVudCx0aGlzLmdtbG5zLHRoaXMuZmVhdHVyZU5hbWUpO2Zvcih2YXIgYj1bXSxjPTA7YzxhLmxlbmd0aDtjKyspe3ZhciBkPXRoaXMucGFyc2VGZWF0dXJlKGFbY10pO2QmJmIucHVzaChkKX1yZXR1cm4gYn0scGFyc2VGZWF0dXJlOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0iTXVsdGlQb2x5Z29uIFBvbHlnb24gTXVsdGlMaW5lU3RyaW5nIExpbmVTdHJpbmcgTXVsdGlQb2ludCBQb2ludCBFbnZlbG9wZSIuc3BsaXQoIiAiKSxjLGQsZSxmPTA7ZjxiLmxlbmd0aDsrK2YpaWYoYz1iW2ZdLGQ9dGhpcy5nZXRFbGVtZW50c0J5VGFnTmFtZU5TKGEsdGhpcy5nbWxucyxjKSwwPGQubGVuZ3RoKXtpZihlPXRoaXMucGFyc2VHZW9tZXRyeVtjLnRvTG93ZXJDYXNlKCldKWU9ZS5hcHBseSh0aGlzLApbZFswXV0pLHRoaXMuaW50ZXJuYWxQcm9qZWN0aW9uJiZ0aGlzLmV4dGVybmFsUHJvamVjdGlvbiYmZS50cmFuc2Zvcm0odGhpcy5leHRlcm5hbFByb2plY3Rpb24sdGhpcy5pbnRlcm5hbFByb2plY3Rpb24pO2Vsc2UgdGhyb3cgbmV3IFR5cGVFcnJvcigiVW5zdXBwb3J0ZWQgZ2VvbWV0cnkgdHlwZTogIitjKTticmVha312YXIgZztjPXRoaXMuZ2V0RWxlbWVudHNCeVRhZ05hbWVOUyhhLHRoaXMuZ21sbnMsIkJveCIpO2ZvcihmPTA7ZjxjLmxlbmd0aDsrK2YpYj1jW2ZdLGQ9dGhpcy5wYXJzZUdlb21ldHJ5LmJveC5hcHBseSh0aGlzLFtiXSksYj1iLnBhcmVudE5vZGUsImJvdW5kZWRCeSI9PT0oYi5sb2NhbE5hbWV8fGIubm9kZU5hbWUuc3BsaXQoIjoiKS5wb3AoKSk/Zz1kOmU9ZC50b0dlb21ldHJ5KCk7dmFyIGg7dGhpcy5leHRyYWN0QXR0cmlidXRlcyYmKGg9dGhpcy5wYXJzZUF0dHJpYnV0ZXMoYSkpO2g9bmV3IE9wZW5MYXllcnMuRmVhdHVyZS5WZWN0b3IoZSxoKTtoLmJvdW5kcz0KZztoLmdtbD17ZmVhdHVyZVR5cGU6YS5maXJzdENoaWxkLm5vZGVOYW1lLnNwbGl0KCI6IilbMV0sZmVhdHVyZU5TOmEuZmlyc3RDaGlsZC5uYW1lc3BhY2VVUkksZmVhdHVyZU5TUHJlZml4OmEuZmlyc3RDaGlsZC5wcmVmaXh9O2E9YS5maXJzdENoaWxkO2Zvcih2YXIgazthJiYoMSE9YS5ub2RlVHlwZXx8IShrPWEuZ2V0QXR0cmlidXRlKCJmaWQiKXx8YS5nZXRBdHRyaWJ1dGUoImlkIikpKTspYT1hLm5leHRTaWJsaW5nO2guZmlkPWs7cmV0dXJuIGh9LHBhcnNlR2VvbWV0cnk6e3BvaW50OmZ1bmN0aW9uKGEpe3ZhciBiLGM7Yz1bXTtiPXRoaXMuZ2V0RWxlbWVudHNCeVRhZ05hbWVOUyhhLHRoaXMuZ21sbnMsInBvcyIpOzA8Yi5sZW5ndGgmJihjPWJbMF0uZmlyc3RDaGlsZC5ub2RlVmFsdWUsYz1jLnJlcGxhY2UodGhpcy5yZWdFeGVzLnRyaW1TcGFjZSwiIiksYz1jLnNwbGl0KHRoaXMucmVnRXhlcy5zcGxpdFNwYWNlKSk7MD09Yy5sZW5ndGgmJihiPXRoaXMuZ2V0RWxlbWVudHNCeVRhZ05hbWVOUyhhLAp0aGlzLmdtbG5zLCJjb29yZGluYXRlcyIpLDA8Yi5sZW5ndGgmJihjPWJbMF0uZmlyc3RDaGlsZC5ub2RlVmFsdWUsYz1jLnJlcGxhY2UodGhpcy5yZWdFeGVzLnJlbW92ZVNwYWNlLCIiKSxjPWMuc3BsaXQoIiwiKSkpOzA9PWMubGVuZ3RoJiYoYj10aGlzLmdldEVsZW1lbnRzQnlUYWdOYW1lTlMoYSx0aGlzLmdtbG5zLCJjb29yZCIpLDA8Yi5sZW5ndGgmJihhPXRoaXMuZ2V0RWxlbWVudHNCeVRhZ05hbWVOUyhiWzBdLHRoaXMuZ21sbnMsIlgiKSxiPXRoaXMuZ2V0RWxlbWVudHNCeVRhZ05hbWVOUyhiWzBdLHRoaXMuZ21sbnMsIlkiKSwwPGEubGVuZ3RoJiYwPGIubGVuZ3RoJiYoYz1bYVswXS5maXJzdENoaWxkLm5vZGVWYWx1ZSxiWzBdLmZpcnN0Q2hpbGQubm9kZVZhbHVlXSkpKTsyPT1jLmxlbmd0aCYmKGNbMl09bnVsbCk7cmV0dXJuIHRoaXMueHk/bmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoY1swXSxjWzFdLGNbMl0pOm5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KGNbMV0sCmNbMF0sY1syXSl9LG11bHRpcG9pbnQ6ZnVuY3Rpb24oYSl7YT10aGlzLmdldEVsZW1lbnRzQnlUYWdOYW1lTlMoYSx0aGlzLmdtbG5zLCJQb2ludCIpO3ZhciBiPVtdO2lmKDA8YS5sZW5ndGgpZm9yKHZhciBjLGQ9MDtkPGEubGVuZ3RoOysrZCkoYz10aGlzLnBhcnNlR2VvbWV0cnkucG9pbnQuYXBwbHkodGhpcyxbYVtkXV0pKSYmYi5wdXNoKGMpO3JldHVybiBuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5NdWx0aVBvaW50KGIpfSxsaW5lc3RyaW5nOmZ1bmN0aW9uKGEsYil7dmFyIGMsZDtkPVtdO3ZhciBlPVtdO2M9dGhpcy5nZXRFbGVtZW50c0J5VGFnTmFtZU5TKGEsdGhpcy5nbWxucywicG9zTGlzdCIpO2lmKDA8Yy5sZW5ndGgpe2Q9dGhpcy5nZXRDaGlsZFZhbHVlKGNbMF0pO2Q9ZC5yZXBsYWNlKHRoaXMucmVnRXhlcy50cmltU3BhY2UsIiIpO2Q9ZC5zcGxpdCh0aGlzLnJlZ0V4ZXMuc3BsaXRTcGFjZSk7dmFyIGY9cGFyc2VJbnQoY1swXS5nZXRBdHRyaWJ1dGUoImRpbWVuc2lvbiIpKSwKZyxoLGs7Zm9yKGM9MDtjPGQubGVuZ3RoL2Y7KytjKWc9YypmLGg9ZFtnXSxrPWRbZysxXSxnPTI9PWY/bnVsbDpkW2crMl0sdGhpcy54eT9lLnB1c2gobmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoaCxrLGcpKTplLnB1c2gobmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoayxoLGcpKX1pZigwPT1kLmxlbmd0aCYmKGM9dGhpcy5nZXRFbGVtZW50c0J5VGFnTmFtZU5TKGEsdGhpcy5nbWxucywiY29vcmRpbmF0ZXMiKSwwPGMubGVuZ3RoKSlmb3IoZD10aGlzLmdldENoaWxkVmFsdWUoY1swXSksZD1kLnJlcGxhY2UodGhpcy5yZWdFeGVzLnRyaW1TcGFjZSwiIiksZD1kLnJlcGxhY2UodGhpcy5yZWdFeGVzLnRyaW1Db21tYSwiLCIpLGY9ZC5zcGxpdCh0aGlzLnJlZ0V4ZXMuc3BsaXRTcGFjZSksYz0wO2M8Zi5sZW5ndGg7KytjKWQ9ZltjXS5zcGxpdCgiLCIpLDI9PWQubGVuZ3RoJiYoZFsyXT1udWxsKSx0aGlzLnh5P2UucHVzaChuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludChkWzBdLApkWzFdLGRbMl0pKTplLnB1c2gobmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoZFsxXSxkWzBdLGRbMl0pKTtkPW51bGw7MCE9ZS5sZW5ndGgmJihkPWI/bmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuTGluZWFyUmluZyhlKTpuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5MaW5lU3RyaW5nKGUpKTtyZXR1cm4gZH0sbXVsdGlsaW5lc3RyaW5nOmZ1bmN0aW9uKGEpe2E9dGhpcy5nZXRFbGVtZW50c0J5VGFnTmFtZU5TKGEsdGhpcy5nbWxucywiTGluZVN0cmluZyIpO3ZhciBiPVtdO2lmKDA8YS5sZW5ndGgpZm9yKHZhciBjLGQ9MDtkPGEubGVuZ3RoOysrZCkoYz10aGlzLnBhcnNlR2VvbWV0cnkubGluZXN0cmluZy5hcHBseSh0aGlzLFthW2RdXSkpJiZiLnB1c2goYyk7cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5Lk11bHRpTGluZVN0cmluZyhiKX0scG9seWdvbjpmdW5jdGlvbihhKXthPXRoaXMuZ2V0RWxlbWVudHNCeVRhZ05hbWVOUyhhLHRoaXMuZ21sbnMsIkxpbmVhclJpbmciKTsKdmFyIGI9W107aWYoMDxhLmxlbmd0aClmb3IodmFyIGMsZD0wO2Q8YS5sZW5ndGg7KytkKShjPXRoaXMucGFyc2VHZW9tZXRyeS5saW5lc3RyaW5nLmFwcGx5KHRoaXMsW2FbZF0sITBdKSkmJmIucHVzaChjKTtyZXR1cm4gbmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9seWdvbihiKX0sbXVsdGlwb2x5Z29uOmZ1bmN0aW9uKGEpe2E9dGhpcy5nZXRFbGVtZW50c0J5VGFnTmFtZU5TKGEsdGhpcy5nbWxucywiUG9seWdvbiIpO3ZhciBiPVtdO2lmKDA8YS5sZW5ndGgpZm9yKHZhciBjLGQ9MDtkPGEubGVuZ3RoOysrZCkoYz10aGlzLnBhcnNlR2VvbWV0cnkucG9seWdvbi5hcHBseSh0aGlzLFthW2RdXSkpJiZiLnB1c2goYyk7cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5Lk11bHRpUG9seWdvbihiKX0sZW52ZWxvcGU6ZnVuY3Rpb24oYSl7dmFyIGI9W10sYyxkLGU9dGhpcy5nZXRFbGVtZW50c0J5VGFnTmFtZU5TKGEsdGhpcy5nbWxucywibG93ZXJDb3JuZXIiKTtpZigwPGUubGVuZ3RoKXtjPQpbXTswPGUubGVuZ3RoJiYoYz1lWzBdLmZpcnN0Q2hpbGQubm9kZVZhbHVlLGM9Yy5yZXBsYWNlKHRoaXMucmVnRXhlcy50cmltU3BhY2UsIiIpLGM9Yy5zcGxpdCh0aGlzLnJlZ0V4ZXMuc3BsaXRTcGFjZSkpOzI9PWMubGVuZ3RoJiYoY1syXT1udWxsKTt2YXIgZj10aGlzLnh5P25ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KGNbMF0sY1sxXSxjWzJdKTpuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludChjWzFdLGNbMF0sY1syXSl9YT10aGlzLmdldEVsZW1lbnRzQnlUYWdOYW1lTlMoYSx0aGlzLmdtbG5zLCJ1cHBlckNvcm5lciIpO2lmKDA8YS5sZW5ndGgpe2M9W107MDxhLmxlbmd0aCYmKGM9YVswXS5maXJzdENoaWxkLm5vZGVWYWx1ZSxjPWMucmVwbGFjZSh0aGlzLnJlZ0V4ZXMudHJpbVNwYWNlLCIiKSxjPWMuc3BsaXQodGhpcy5yZWdFeGVzLnNwbGl0U3BhY2UpKTsyPT1jLmxlbmd0aCYmKGNbMl09bnVsbCk7dmFyIGc9dGhpcy54eT9uZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludChjWzBdLApjWzFdLGNbMl0pOm5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KGNbMV0sY1swXSxjWzJdKX1mJiZnJiYoYi5wdXNoKG5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KGYueCxmLnkpKSxiLnB1c2gobmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoZy54LGYueSkpLGIucHVzaChuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludChnLngsZy55KSksYi5wdXNoKG5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KGYueCxnLnkpKSxiLnB1c2gobmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoZi54LGYueSkpLGI9bmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuTGluZWFyUmluZyhiKSxkPW5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvbHlnb24oW2JdKSk7cmV0dXJuIGR9LGJveDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmdldEVsZW1lbnRzQnlUYWdOYW1lTlMoYSx0aGlzLmdtbG5zLCJjb29yZGluYXRlcyIpLGM9YT1udWxsOzA8Yi5sZW5ndGgmJihiPWJbMF0uZmlyc3RDaGlsZC5ub2RlVmFsdWUsCmI9Yi5zcGxpdCgiICIpLDI9PWIubGVuZ3RoJiYoYT1iWzBdLnNwbGl0KCIsIiksYz1iWzFdLnNwbGl0KCIsIikpKTtpZihudWxsIT09YSYmbnVsbCE9PWMpcmV0dXJuIG5ldyBPcGVuTGF5ZXJzLkJvdW5kcyhwYXJzZUZsb2F0KGFbMF0pLHBhcnNlRmxvYXQoYVsxXSkscGFyc2VGbG9hdChjWzBdKSxwYXJzZUZsb2F0KGNbMV0pKX19LHBhcnNlQXR0cmlidXRlczpmdW5jdGlvbihhKXt2YXIgYj17fTthPWEuZmlyc3RDaGlsZDtmb3IodmFyIGMsZCxlO2E7KXtpZigxPT1hLm5vZGVUeXBlKXthPWEuY2hpbGROb2Rlcztmb3IoYz0wO2M8YS5sZW5ndGg7KytjKWlmKGQ9YVtjXSwxPT1kLm5vZGVUeXBlKWlmKGU9ZC5jaGlsZE5vZGVzLDE9PWUubGVuZ3RoKXtpZihlPWVbMF0sMz09ZS5ub2RlVHlwZXx8ND09ZS5ub2RlVHlwZSlkPWQucHJlZml4P2Qubm9kZU5hbWUuc3BsaXQoIjoiKVsxXTpkLm5vZGVOYW1lLGU9ZS5ub2RlVmFsdWUucmVwbGFjZSh0aGlzLnJlZ0V4ZXMudHJpbVNwYWNlLAoiIiksYltkXT1lfWVsc2UgYltkLm5vZGVOYW1lLnNwbGl0KCI6IikucG9wKCldPW51bGw7YnJlYWt9YT1hLm5leHRTaWJsaW5nfXJldHVybiBifSx3cml0ZTpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLlV0aWwuaXNBcnJheShhKXx8KGE9W2FdKTtmb3IodmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlMoImh0dHA6Ly93d3cub3Blbmdpcy5uZXQvd2ZzIiwid2ZzOiIrdGhpcy5jb2xsZWN0aW9uTmFtZSksYz0wO2M8YS5sZW5ndGg7YysrKWIuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVGZWF0dXJlWE1MKGFbY10pKTtyZXR1cm4gT3BlbkxheWVycy5Gb3JtYXQuWE1MLnByb3RvdHlwZS53cml0ZS5hcHBseSh0aGlzLFtiXSl9LGNyZWF0ZUZlYXR1cmVYTUw6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5idWlsZEdlb21ldHJ5Tm9kZShhLmdlb21ldHJ5KSxjPXRoaXMuY3JlYXRlRWxlbWVudE5TKHRoaXMuZmVhdHVyZU5TLHRoaXMuZmVhdHVyZVByZWZpeCsiOiIrdGhpcy5nZW9tZXRyeU5hbWUpO2MuYXBwZW5kQ2hpbGQoYik7CnZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TKHRoaXMuZ21sbnMsImdtbDoiK3RoaXMuZmVhdHVyZU5hbWUpLGQ9dGhpcy5jcmVhdGVFbGVtZW50TlModGhpcy5mZWF0dXJlTlMsdGhpcy5mZWF0dXJlUHJlZml4KyI6Iit0aGlzLmxheWVyTmFtZSk7ZC5zZXRBdHRyaWJ1dGUoImZpZCIsYS5maWR8fGEuaWQpO2QuYXBwZW5kQ2hpbGQoYyk7Zm9yKHZhciBlIGluIGEuYXR0cmlidXRlcyl7dmFyIGM9dGhpcy5jcmVhdGVUZXh0Tm9kZShhLmF0dHJpYnV0ZXNbZV0pLGY9ZS5zdWJzdHJpbmcoZS5sYXN0SW5kZXhPZigiOiIpKzEpLGY9dGhpcy5jcmVhdGVFbGVtZW50TlModGhpcy5mZWF0dXJlTlMsdGhpcy5mZWF0dXJlUHJlZml4KyI6IitmKTtmLmFwcGVuZENoaWxkKGMpO2QuYXBwZW5kQ2hpbGQoZil9Yi5hcHBlbmRDaGlsZChkKTtyZXR1cm4gYn0sYnVpbGRHZW9tZXRyeU5vZGU6ZnVuY3Rpb24oYSl7dGhpcy5leHRlcm5hbFByb2plY3Rpb24mJnRoaXMuaW50ZXJuYWxQcm9qZWN0aW9uJiYKKGE9YS5jbG9uZSgpLGEudHJhbnNmb3JtKHRoaXMuaW50ZXJuYWxQcm9qZWN0aW9uLHRoaXMuZXh0ZXJuYWxQcm9qZWN0aW9uKSk7dmFyIGI9YS5DTEFTU19OQU1FLGI9Yi5zdWJzdHJpbmcoYi5sYXN0SW5kZXhPZigiLiIpKzEpO3JldHVybiB0aGlzLmJ1aWxkR2VvbWV0cnlbYi50b0xvd2VyQ2FzZSgpXS5hcHBseSh0aGlzLFthXSl9LGJ1aWxkR2VvbWV0cnk6e3BvaW50OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TKHRoaXMuZ21sbnMsImdtbDpQb2ludCIpO2IuYXBwZW5kQ2hpbGQodGhpcy5idWlsZENvb3JkaW5hdGVzTm9kZShhKSk7cmV0dXJuIGJ9LG11bHRpcG9pbnQ6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlModGhpcy5nbWxucywiZ21sOk11bHRpUG9pbnQiKTthPWEuY29tcG9uZW50cztmb3IodmFyIGMsZCxlPTA7ZTxhLmxlbmd0aDtlKyspYz10aGlzLmNyZWF0ZUVsZW1lbnROUyh0aGlzLmdtbG5zLCJnbWw6cG9pbnRNZW1iZXIiKSwKZD10aGlzLmJ1aWxkR2VvbWV0cnkucG9pbnQuYXBwbHkodGhpcyxbYVtlXV0pLGMuYXBwZW5kQ2hpbGQoZCksYi5hcHBlbmRDaGlsZChjKTtyZXR1cm4gYn0sbGluZXN0cmluZzpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROUyh0aGlzLmdtbG5zLCJnbWw6TGluZVN0cmluZyIpO2IuYXBwZW5kQ2hpbGQodGhpcy5idWlsZENvb3JkaW5hdGVzTm9kZShhKSk7cmV0dXJuIGJ9LG11bHRpbGluZXN0cmluZzpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROUyh0aGlzLmdtbG5zLCJnbWw6TXVsdGlMaW5lU3RyaW5nIik7YT1hLmNvbXBvbmVudHM7Zm9yKHZhciBjLGQsZT0wO2U8YS5sZW5ndGg7KytlKWM9dGhpcy5jcmVhdGVFbGVtZW50TlModGhpcy5nbWxucywiZ21sOmxpbmVTdHJpbmdNZW1iZXIiKSxkPXRoaXMuYnVpbGRHZW9tZXRyeS5saW5lc3RyaW5nLmFwcGx5KHRoaXMsW2FbZV1dKSxjLmFwcGVuZENoaWxkKGQpLGIuYXBwZW5kQ2hpbGQoYyk7CnJldHVybiBifSxsaW5lYXJyaW5nOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TKHRoaXMuZ21sbnMsImdtbDpMaW5lYXJSaW5nIik7Yi5hcHBlbmRDaGlsZCh0aGlzLmJ1aWxkQ29vcmRpbmF0ZXNOb2RlKGEpKTtyZXR1cm4gYn0scG9seWdvbjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROUyh0aGlzLmdtbG5zLCJnbWw6UG9seWdvbiIpO2E9YS5jb21wb25lbnRzO2Zvcih2YXIgYyxkLGU9MDtlPGEubGVuZ3RoOysrZSljPTA9PWU/Im91dGVyQm91bmRhcnlJcyI6ImlubmVyQm91bmRhcnlJcyIsYz10aGlzLmNyZWF0ZUVsZW1lbnROUyh0aGlzLmdtbG5zLCJnbWw6IitjKSxkPXRoaXMuYnVpbGRHZW9tZXRyeS5saW5lYXJyaW5nLmFwcGx5KHRoaXMsW2FbZV1dKSxjLmFwcGVuZENoaWxkKGQpLGIuYXBwZW5kQ2hpbGQoYyk7cmV0dXJuIGJ9LG11bHRpcG9seWdvbjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROUyh0aGlzLmdtbG5zLAoiZ21sOk11bHRpUG9seWdvbiIpO2E9YS5jb21wb25lbnRzO2Zvcih2YXIgYyxkLGU9MDtlPGEubGVuZ3RoOysrZSljPXRoaXMuY3JlYXRlRWxlbWVudE5TKHRoaXMuZ21sbnMsImdtbDpwb2x5Z29uTWVtYmVyIiksZD10aGlzLmJ1aWxkR2VvbWV0cnkucG9seWdvbi5hcHBseSh0aGlzLFthW2VdXSksYy5hcHBlbmRDaGlsZChkKSxiLmFwcGVuZENoaWxkKGMpO3JldHVybiBifSxib3VuZHM6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlModGhpcy5nbWxucywiZ21sOkJveCIpO2IuYXBwZW5kQ2hpbGQodGhpcy5idWlsZENvb3JkaW5hdGVzTm9kZShhKSk7cmV0dXJuIGJ9fSxidWlsZENvb3JkaW5hdGVzTm9kZTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROUyh0aGlzLmdtbG5zLCJnbWw6Y29vcmRpbmF0ZXMiKTtiLnNldEF0dHJpYnV0ZSgiZGVjaW1hbCIsIi4iKTtiLnNldEF0dHJpYnV0ZSgiY3MiLCIsIik7Yi5zZXRBdHRyaWJ1dGUoInRzIiwKIiAiKTt2YXIgYz1bXTtpZihhIGluc3RhbmNlb2YgT3BlbkxheWVycy5Cb3VuZHMpYy5wdXNoKGEubGVmdCsiLCIrYS5ib3R0b20pLGMucHVzaChhLnJpZ2h0KyIsIithLnRvcCk7ZWxzZXthPWEuY29tcG9uZW50cz9hLmNvbXBvbmVudHM6W2FdO2Zvcih2YXIgZD0wO2Q8YS5sZW5ndGg7ZCsrKWMucHVzaChhW2RdLngrIiwiK2FbZF0ueSl9Yz10aGlzLmNyZWF0ZVRleHROb2RlKGMuam9pbigiICIpKTtiLmFwcGVuZENoaWxkKGMpO3JldHVybiBifSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkZvcm1hdC5HTUwifSk7T3BlbkxheWVycy5Gb3JtYXQuR01MfHwoT3BlbkxheWVycy5Gb3JtYXQuR01MPXt9KTsKT3BlbkxheWVycy5Gb3JtYXQuR01MLkJhc2U9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkZvcm1hdC5YTUwse25hbWVzcGFjZXM6e2dtbDoiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9nbWwiLHhsaW5rOiJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIix4c2k6Imh0dHA6Ly93d3cudzMub3JnLzIwMDEvWE1MU2NoZW1hLWluc3RhbmNlIix3ZnM6Imh0dHA6Ly93d3cub3Blbmdpcy5uZXQvd2ZzIn0sZGVmYXVsdFByZWZpeDoiZ21sIixzY2hlbWFMb2NhdGlvbjpudWxsLGZlYXR1cmVUeXBlOm51bGwsZmVhdHVyZU5TOm51bGwsZ2VvbWV0cnlOYW1lOiJnZW9tZXRyeSIsZXh0cmFjdEF0dHJpYnV0ZXM6ITAsc3JzTmFtZTpudWxsLHh5OiEwLGdlb21ldHJ5VHlwZXM6bnVsbCxzaW5nbGVGZWF0dXJlVHlwZTpudWxsLHJlZ0V4ZXM6e3RyaW1TcGFjZTovXlxzKnxccyokL2cscmVtb3ZlU3BhY2U6L1xzKi9nLHNwbGl0U3BhY2U6L1xzKy8sdHJpbUNvbW1hOi9ccyosXHMqL2csZmVhdHVyZU1lbWJlcjovXiguKjopP2ZlYXR1cmVNZW1iZXJzPyQvfSwKaW5pdGlhbGl6ZTpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLkZvcm1hdC5YTUwucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxbYV0pO3RoaXMuc2V0R2VvbWV0cnlUeXBlcygpO2EmJmEuZmVhdHVyZU5TJiZ0aGlzLnNldE5hbWVzcGFjZSgiZmVhdHVyZSIsYS5mZWF0dXJlTlMpO3RoaXMuc2luZ2xlRmVhdHVyZVR5cGU9IWF8fCJzdHJpbmciPT09dHlwZW9mIGEuZmVhdHVyZVR5cGV9LHJlYWQ6ZnVuY3Rpb24oYSl7InN0cmluZyI9PXR5cGVvZiBhJiYoYT1PcGVuTGF5ZXJzLkZvcm1hdC5YTUwucHJvdG90eXBlLnJlYWQuYXBwbHkodGhpcyxbYV0pKTthJiY5PT1hLm5vZGVUeXBlJiYoYT1hLmRvY3VtZW50RWxlbWVudCk7dmFyIGI9W107dGhpcy5yZWFkTm9kZShhLHtmZWF0dXJlczpifSwhMCk7aWYoMD09Yi5sZW5ndGgpe3ZhciBjPXRoaXMuZ2V0RWxlbWVudHNCeVRhZ05hbWVOUyhhLHRoaXMubmFtZXNwYWNlcy5nbWwsImZlYXR1cmVNZW1iZXIiKTtpZihjLmxlbmd0aCl7YT0KMDtmb3IodmFyIGQ9Yy5sZW5ndGg7YTxkOysrYSl0aGlzLnJlYWROb2RlKGNbYV0se2ZlYXR1cmVzOmJ9LCEwKX1lbHNlIGM9dGhpcy5nZXRFbGVtZW50c0J5VGFnTmFtZU5TKGEsdGhpcy5uYW1lc3BhY2VzLmdtbCwiZmVhdHVyZU1lbWJlcnMiKSxjLmxlbmd0aCYmdGhpcy5yZWFkTm9kZShjWzBdLHtmZWF0dXJlczpifSwhMCl9cmV0dXJuIGJ9LHJlYWROb2RlOmZ1bmN0aW9uKGEsYixjKXshMD09PWMmJiEwPT09dGhpcy5hdXRvQ29uZmlnJiYodGhpcy5mZWF0dXJlVHlwZT1udWxsLGRlbGV0ZSB0aGlzLm5hbWVzcGFjZUFsaWFzW3RoaXMuZmVhdHVyZU5TXSxkZWxldGUgdGhpcy5uYW1lc3BhY2VzLmZlYXR1cmUsdGhpcy5mZWF0dXJlTlM9bnVsbCk7dGhpcy5mZWF0dXJlTlN8fChhLnByZWZpeCBpbiB0aGlzLm5hbWVzcGFjZXN8fGEucGFyZW50Tm9kZS5uYW1lc3BhY2VVUkkhPXRoaXMubmFtZXNwYWNlcy5nbWx8fCF0aGlzLnJlZ0V4ZXMuZmVhdHVyZU1lbWJlci50ZXN0KGEucGFyZW50Tm9kZS5ub2RlTmFtZSkpfHwKKHRoaXMuZmVhdHVyZVR5cGU9YS5ub2RlTmFtZS5zcGxpdCgiOiIpLnBvcCgpLHRoaXMuc2V0TmFtZXNwYWNlKCJmZWF0dXJlIixhLm5hbWVzcGFjZVVSSSksdGhpcy5mZWF0dXJlTlM9YS5uYW1lc3BhY2VVUkksdGhpcy5hdXRvQ29uZmlnPSEwKTtyZXR1cm4gT3BlbkxheWVycy5Gb3JtYXQuWE1MLnByb3RvdHlwZS5yZWFkTm9kZS5hcHBseSh0aGlzLFthLGJdKX0scmVhZGVyczp7Z21sOntfaW5oZXJpdDpmdW5jdGlvbihhLGIsYyl7fSxmZWF0dXJlTWVtYmVyOmZ1bmN0aW9uKGEsYil7dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGIpfSxmZWF0dXJlTWVtYmVyczpmdW5jdGlvbihhLGIpe3RoaXMucmVhZENoaWxkTm9kZXMoYSxiKX0sbmFtZTpmdW5jdGlvbihhLGIpe2IubmFtZT10aGlzLmdldENoaWxkVmFsdWUoYSl9LGJvdW5kZWRCeTpmdW5jdGlvbihhLGIpe3ZhciBjPXt9O3RoaXMucmVhZENoaWxkTm9kZXMoYSxjKTtjLmNvbXBvbmVudHMmJjA8Yy5jb21wb25lbnRzLmxlbmd0aCYmCihiLmJvdW5kcz1jLmNvbXBvbmVudHNbMF0pfSxQb2ludDpmdW5jdGlvbihhLGIpe3ZhciBjPXtwb2ludHM6W119O3RoaXMucmVhZENoaWxkTm9kZXMoYSxjKTtiLmNvbXBvbmVudHN8fChiLmNvbXBvbmVudHM9W10pO2IuY29tcG9uZW50cy5wdXNoKGMucG9pbnRzWzBdKX0sY29vcmRpbmF0ZXM6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9dGhpcy5nZXRDaGlsZFZhbHVlKGEpLnJlcGxhY2UodGhpcy5yZWdFeGVzLnRyaW1TcGFjZSwiIiksYz1jLnJlcGxhY2UodGhpcy5yZWdFeGVzLnRyaW1Db21tYSwiLCIpLGM9Yy5zcGxpdCh0aGlzLnJlZ0V4ZXMuc3BsaXRTcGFjZSksZCxlPWMubGVuZ3RoLGY9QXJyYXkoZSksZz0wO2c8ZTsrK2cpZD1jW2ddLnNwbGl0KCIsIiksZltnXT10aGlzLnh5P25ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KGRbMF0sZFsxXSxkWzJdKTpuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludChkWzFdLGRbMF0sZFsyXSk7Yi5wb2ludHM9Zn0sY29vcmQ6ZnVuY3Rpb24oYSwKYil7dmFyIGM9e307dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGMpO2IucG9pbnRzfHwoYi5wb2ludHM9W10pO2IucG9pbnRzLnB1c2gobmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoYy54LGMueSxjLnopKX0sWDpmdW5jdGlvbihhLGIpe2IueD10aGlzLmdldENoaWxkVmFsdWUoYSl9LFk6ZnVuY3Rpb24oYSxiKXtiLnk9dGhpcy5nZXRDaGlsZFZhbHVlKGEpfSxaOmZ1bmN0aW9uKGEsYil7Yi56PXRoaXMuZ2V0Q2hpbGRWYWx1ZShhKX0sTXVsdGlQb2ludDpmdW5jdGlvbihhLGIpe3ZhciBjPXtjb21wb25lbnRzOltdfTt0aGlzLnJlYWRlcnMuZ21sLl9pbmhlcml0LmFwcGx5KHRoaXMsW2EsYyxiXSk7dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGMpO2IuY29tcG9uZW50cz1bbmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuTXVsdGlQb2ludChjLmNvbXBvbmVudHMpXX0scG9pbnRNZW1iZXI6ZnVuY3Rpb24oYSxiKXt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYil9LExpbmVTdHJpbmc6ZnVuY3Rpb24oYSwKYil7dmFyIGM9e307dGhpcy5yZWFkZXJzLmdtbC5faW5oZXJpdC5hcHBseSh0aGlzLFthLGMsYl0pO3RoaXMucmVhZENoaWxkTm9kZXMoYSxjKTtiLmNvbXBvbmVudHN8fChiLmNvbXBvbmVudHM9W10pO2IuY29tcG9uZW50cy5wdXNoKG5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LkxpbmVTdHJpbmcoYy5wb2ludHMpKX0sTXVsdGlMaW5lU3RyaW5nOmZ1bmN0aW9uKGEsYil7dmFyIGM9e2NvbXBvbmVudHM6W119O3RoaXMucmVhZGVycy5nbWwuX2luaGVyaXQuYXBwbHkodGhpcyxbYSxjLGJdKTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYyk7Yi5jb21wb25lbnRzPVtuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5NdWx0aUxpbmVTdHJpbmcoYy5jb21wb25lbnRzKV19LGxpbmVTdHJpbmdNZW1iZXI6ZnVuY3Rpb24oYSxiKXt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYil9LFBvbHlnb246ZnVuY3Rpb24oYSxiKXt2YXIgYz17b3V0ZXI6bnVsbCxpbm5lcjpbXX07dGhpcy5yZWFkZXJzLmdtbC5faW5oZXJpdC5hcHBseSh0aGlzLApbYSxjLGJdKTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYyk7Yy5pbm5lci51bnNoaWZ0KGMub3V0ZXIpO2IuY29tcG9uZW50c3x8KGIuY29tcG9uZW50cz1bXSk7Yi5jb21wb25lbnRzLnB1c2gobmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9seWdvbihjLmlubmVyKSl9LExpbmVhclJpbmc6ZnVuY3Rpb24oYSxiKXt2YXIgYz17fTt0aGlzLnJlYWRlcnMuZ21sLl9pbmhlcml0LmFwcGx5KHRoaXMsW2EsY10pO3RoaXMucmVhZENoaWxkTm9kZXMoYSxjKTtiLmNvbXBvbmVudHM9W25ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LkxpbmVhclJpbmcoYy5wb2ludHMpXX0sTXVsdGlQb2x5Z29uOmZ1bmN0aW9uKGEsYil7dmFyIGM9e2NvbXBvbmVudHM6W119O3RoaXMucmVhZGVycy5nbWwuX2luaGVyaXQuYXBwbHkodGhpcyxbYSxjLGJdKTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYyk7Yi5jb21wb25lbnRzPVtuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5NdWx0aVBvbHlnb24oYy5jb21wb25lbnRzKV19LApwb2x5Z29uTWVtYmVyOmZ1bmN0aW9uKGEsYil7dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGIpfSxHZW9tZXRyeUNvbGxlY3Rpb246ZnVuY3Rpb24oYSxiKXt2YXIgYz17Y29tcG9uZW50czpbXX07dGhpcy5yZWFkZXJzLmdtbC5faW5oZXJpdC5hcHBseSh0aGlzLFthLGMsYl0pO3RoaXMucmVhZENoaWxkTm9kZXMoYSxjKTtiLmNvbXBvbmVudHM9W25ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LkNvbGxlY3Rpb24oYy5jb21wb25lbnRzKV19LGdlb21ldHJ5TWVtYmVyOmZ1bmN0aW9uKGEsYil7dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGIpfX0sZmVhdHVyZTp7IioiOmZ1bmN0aW9uKGEsYil7dmFyIGMsZD1hLmxvY2FsTmFtZXx8YS5ub2RlTmFtZS5zcGxpdCgiOiIpLnBvcCgpO2IuZmVhdHVyZXM/dGhpcy5zaW5nbGVGZWF0dXJlVHlwZXx8LTE9PT1PcGVuTGF5ZXJzLlV0aWwuaW5kZXhPZih0aGlzLmZlYXR1cmVUeXBlLGQpP2Q9PT10aGlzLmZlYXR1cmVUeXBlJiYoYz0iX3R5cGVOYW1lIik6Yz0KIl90eXBlTmFtZSI6MD09YS5jaGlsZE5vZGVzLmxlbmd0aHx8MT09YS5jaGlsZE5vZGVzLmxlbmd0aCYmMz09YS5maXJzdENoaWxkLm5vZGVUeXBlP3RoaXMuZXh0cmFjdEF0dHJpYnV0ZXMmJihjPSJfYXR0cmlidXRlIik6Yz0iX2dlb21ldHJ5IjtjJiZ0aGlzLnJlYWRlcnMuZmVhdHVyZVtjXS5hcHBseSh0aGlzLFthLGJdKX0sX3R5cGVOYW1lOmZ1bmN0aW9uKGEsYil7dmFyIGM9e2NvbXBvbmVudHM6W10sYXR0cmlidXRlczp7fX07dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGMpO2MubmFtZSYmKGMuYXR0cmlidXRlcy5uYW1lPWMubmFtZSk7dmFyIGQ9bmV3IE9wZW5MYXllcnMuRmVhdHVyZS5WZWN0b3IoYy5jb21wb25lbnRzWzBdLGMuYXR0cmlidXRlcyk7dGhpcy5zaW5nbGVGZWF0dXJlVHlwZXx8KGQudHlwZT1hLm5vZGVOYW1lLnNwbGl0KCI6IikucG9wKCksZC5uYW1lc3BhY2U9YS5uYW1lc3BhY2VVUkkpO3ZhciBlPWEuZ2V0QXR0cmlidXRlKCJmaWQiKXx8dGhpcy5nZXRBdHRyaWJ1dGVOUyhhLAp0aGlzLm5hbWVzcGFjZXMuZ21sLCJpZCIpO2UmJihkLmZpZD1lKTt0aGlzLmludGVybmFsUHJvamVjdGlvbiYmKHRoaXMuZXh0ZXJuYWxQcm9qZWN0aW9uJiZkLmdlb21ldHJ5KSYmZC5nZW9tZXRyeS50cmFuc2Zvcm0odGhpcy5leHRlcm5hbFByb2plY3Rpb24sdGhpcy5pbnRlcm5hbFByb2plY3Rpb24pO2MuYm91bmRzJiYoZC5ib3VuZHM9Yy5ib3VuZHMpO2IuZmVhdHVyZXMucHVzaChkKX0sX2dlb21ldHJ5OmZ1bmN0aW9uKGEsYil7dGhpcy5nZW9tZXRyeU5hbWV8fCh0aGlzLmdlb21ldHJ5TmFtZT1hLm5vZGVOYW1lLnNwbGl0KCI6IikucG9wKCkpO3RoaXMucmVhZENoaWxkTm9kZXMoYSxiKX0sX2F0dHJpYnV0ZTpmdW5jdGlvbihhLGIpe3ZhciBjPWEubG9jYWxOYW1lfHxhLm5vZGVOYW1lLnNwbGl0KCI6IikucG9wKCksZD10aGlzLmdldENoaWxkVmFsdWUoYSk7Yi5hdHRyaWJ1dGVzW2NdPWR9fSx3ZnM6e0ZlYXR1cmVDb2xsZWN0aW9uOmZ1bmN0aW9uKGEsYil7dGhpcy5yZWFkQ2hpbGROb2RlcyhhLApiKX19fSx3cml0ZTpmdW5jdGlvbihhKXt2YXIgYjtiPU9wZW5MYXllcnMuVXRpbC5pc0FycmF5KGEpPyJmZWF0dXJlTWVtYmVycyI6ImZlYXR1cmVNZW1iZXIiO2E9dGhpcy53cml0ZU5vZGUoImdtbDoiK2IsYSk7dGhpcy5zZXRBdHRyaWJ1dGVOUyhhLHRoaXMubmFtZXNwYWNlcy54c2ksInhzaTpzY2hlbWFMb2NhdGlvbiIsdGhpcy5zY2hlbWFMb2NhdGlvbik7cmV0dXJuIE9wZW5MYXllcnMuRm9ybWF0LlhNTC5wcm90b3R5cGUud3JpdGUuYXBwbHkodGhpcyxbYV0pfSx3cml0ZXJzOntnbWw6e2ZlYXR1cmVNZW1iZXI6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJnbWw6ZmVhdHVyZU1lbWJlciIpO3RoaXMud3JpdGVOb2RlKCJmZWF0dXJlOl90eXBlTmFtZSIsYSxiKTtyZXR1cm4gYn0sTXVsdGlQb2ludDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoImdtbDpNdWx0aVBvaW50Iik7YT1hLmNvbXBvbmVudHN8fFthXTsKZm9yKHZhciBjPTAsZD1hLmxlbmd0aDtjPGQ7KytjKXRoaXMud3JpdGVOb2RlKCJwb2ludE1lbWJlciIsYVtjXSxiKTtyZXR1cm4gYn0scG9pbnRNZW1iZXI6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJnbWw6cG9pbnRNZW1iZXIiKTt0aGlzLndyaXRlTm9kZSgiUG9pbnQiLGEsYik7cmV0dXJuIGJ9LE11bHRpTGluZVN0cmluZzpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoImdtbDpNdWx0aUxpbmVTdHJpbmciKTthPWEuY29tcG9uZW50c3x8W2FdO2Zvcih2YXIgYz0wLGQ9YS5sZW5ndGg7YzxkOysrYyl0aGlzLndyaXRlTm9kZSgibGluZVN0cmluZ01lbWJlciIsYVtjXSxiKTtyZXR1cm4gYn0sbGluZVN0cmluZ01lbWJlcjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoImdtbDpsaW5lU3RyaW5nTWVtYmVyIik7dGhpcy53cml0ZU5vZGUoIkxpbmVTdHJpbmciLGEsYik7cmV0dXJuIGJ9LApNdWx0aVBvbHlnb246ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJnbWw6TXVsdGlQb2x5Z29uIik7YT1hLmNvbXBvbmVudHN8fFthXTtmb3IodmFyIGM9MCxkPWEubGVuZ3RoO2M8ZDsrK2MpdGhpcy53cml0ZU5vZGUoInBvbHlnb25NZW1iZXIiLGFbY10sYik7cmV0dXJuIGJ9LHBvbHlnb25NZW1iZXI6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJnbWw6cG9seWdvbk1lbWJlciIpO3RoaXMud3JpdGVOb2RlKCJQb2x5Z29uIixhLGIpO3JldHVybiBifSxHZW9tZXRyeUNvbGxlY3Rpb246ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygiZ21sOkdlb21ldHJ5Q29sbGVjdGlvbiIpLGM9MCxkPWEuY29tcG9uZW50cy5sZW5ndGg7YzxkOysrYyl0aGlzLndyaXRlTm9kZSgiZ2VvbWV0cnlNZW1iZXIiLGEuY29tcG9uZW50c1tjXSxiKTtyZXR1cm4gYn0sZ2VvbWV0cnlNZW1iZXI6ZnVuY3Rpb24oYSl7dmFyIGI9CnRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygiZ21sOmdlb21ldHJ5TWVtYmVyIik7YT10aGlzLndyaXRlTm9kZSgiZmVhdHVyZTpfZ2VvbWV0cnkiLGEpO2IuYXBwZW5kQ2hpbGQoYS5maXJzdENoaWxkKTtyZXR1cm4gYn19LGZlYXR1cmU6e190eXBlTmFtZTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoImZlYXR1cmU6Iit0aGlzLmZlYXR1cmVUeXBlLHthdHRyaWJ1dGVzOntmaWQ6YS5maWR9fSk7YS5nZW9tZXRyeSYmdGhpcy53cml0ZU5vZGUoImZlYXR1cmU6X2dlb21ldHJ5IixhLmdlb21ldHJ5LGIpO2Zvcih2YXIgYyBpbiBhLmF0dHJpYnV0ZXMpe3ZhciBkPWEuYXR0cmlidXRlc1tjXTtudWxsIT1kJiZ0aGlzLndyaXRlTm9kZSgiZmVhdHVyZTpfYXR0cmlidXRlIix7bmFtZTpjLHZhbHVlOmR9LGIpfXJldHVybiBifSxfZ2VvbWV0cnk6ZnVuY3Rpb24oYSl7dGhpcy5leHRlcm5hbFByb2plY3Rpb24mJnRoaXMuaW50ZXJuYWxQcm9qZWN0aW9uJiYoYT0KYS5jbG9uZSgpLnRyYW5zZm9ybSh0aGlzLmludGVybmFsUHJvamVjdGlvbix0aGlzLmV4dGVybmFsUHJvamVjdGlvbikpO3ZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygiZmVhdHVyZToiK3RoaXMuZ2VvbWV0cnlOYW1lKTthPXRoaXMud3JpdGVOb2RlKCJnbWw6Iit0aGlzLmdlb21ldHJ5VHlwZXNbYS5DTEFTU19OQU1FXSxhLGIpO3RoaXMuc3JzTmFtZSYmYS5zZXRBdHRyaWJ1dGUoInNyc05hbWUiLHRoaXMuc3JzTmFtZSk7cmV0dXJuIGJ9LF9hdHRyaWJ1dGU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygiZmVhdHVyZToiK2EubmFtZSx7dmFsdWU6YS52YWx1ZX0pfX0sd2ZzOntGZWF0dXJlQ29sbGVjdGlvbjpmdW5jdGlvbihhKXtmb3IodmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJ3ZnM6RmVhdHVyZUNvbGxlY3Rpb24iKSxjPTAsZD1hLmxlbmd0aDtjPGQ7KytjKXRoaXMud3JpdGVOb2RlKCJnbWw6ZmVhdHVyZU1lbWJlciIsCmFbY10sYik7cmV0dXJuIGJ9fX0sc2V0R2VvbWV0cnlUeXBlczpmdW5jdGlvbigpe3RoaXMuZ2VvbWV0cnlUeXBlcz17Ik9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQiOiJQb2ludCIsIk9wZW5MYXllcnMuR2VvbWV0cnkuTXVsdGlQb2ludCI6Ik11bHRpUG9pbnQiLCJPcGVuTGF5ZXJzLkdlb21ldHJ5LkxpbmVTdHJpbmciOiJMaW5lU3RyaW5nIiwiT3BlbkxheWVycy5HZW9tZXRyeS5NdWx0aUxpbmVTdHJpbmciOiJNdWx0aUxpbmVTdHJpbmciLCJPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvbHlnb24iOiJQb2x5Z29uIiwiT3BlbkxheWVycy5HZW9tZXRyeS5NdWx0aVBvbHlnb24iOiJNdWx0aVBvbHlnb24iLCJPcGVuTGF5ZXJzLkdlb21ldHJ5LkNvbGxlY3Rpb24iOiJHZW9tZXRyeUNvbGxlY3Rpb24ifX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Gb3JtYXQuR01MLkJhc2UifSk7T3BlbkxheWVycy5Gb3JtYXQuR01MLnYzPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Gb3JtYXQuR01MLkJhc2Use3NjaGVtYUxvY2F0aW9uOiJodHRwOi8vd3d3Lm9wZW5naXMubmV0L2dtbCBodHRwOi8vc2NoZW1hcy5vcGVuZ2lzLm5ldC9nbWwvMy4xLjEvcHJvZmlsZXMvZ21sc2ZQcm9maWxlLzEuMC4wL2dtbHNmLnhzZCIsY3VydmU6ITEsbXVsdGlDdXJ2ZTohMCxzdXJmYWNlOiExLG11bHRpU3VyZmFjZTohMCxpbml0aWFsaXplOmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuRm9ybWF0LkdNTC5CYXNlLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsW2FdKX0scmVhZGVyczp7Z21sOk9wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKHtfaW5oZXJpdDpmdW5jdGlvbihhLGIsYyl7aWYoYT1wYXJzZUludChhLmdldEF0dHJpYnV0ZSgic3JzRGltZW5zaW9uIiksMTApfHxjJiZjLnNyc0RpbWVuc2lvbiliLnNyc0RpbWVuc2lvbj1hfSxmZWF0dXJlTWVtYmVyczpmdW5jdGlvbihhLApiKXt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYil9LEN1cnZlOmZ1bmN0aW9uKGEsYil7dmFyIGM9e3BvaW50czpbXX07dGhpcy5yZWFkZXJzLmdtbC5faW5oZXJpdC5hcHBseSh0aGlzLFthLGMsYl0pO3RoaXMucmVhZENoaWxkTm9kZXMoYSxjKTtiLmNvbXBvbmVudHN8fChiLmNvbXBvbmVudHM9W10pO2IuY29tcG9uZW50cy5wdXNoKG5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LkxpbmVTdHJpbmcoYy5wb2ludHMpKX0sc2VnbWVudHM6ZnVuY3Rpb24oYSxiKXt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYil9LExpbmVTdHJpbmdTZWdtZW50OmZ1bmN0aW9uKGEsYil7dmFyIGM9e307dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGMpO2MucG9pbnRzJiZBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShiLnBvaW50cyxjLnBvaW50cyl9LHBvczpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuZ2V0Q2hpbGRWYWx1ZShhKS5yZXBsYWNlKHRoaXMucmVnRXhlcy50cmltU3BhY2UsIiIpLnNwbGl0KHRoaXMucmVnRXhlcy5zcGxpdFNwYWNlKSwKYz10aGlzLnh5P25ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KGNbMF0sY1sxXSxjWzJdKTpuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludChjWzFdLGNbMF0sY1syXSk7Yi5wb2ludHM9W2NdfSxwb3NMaXN0OmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPXRoaXMuZ2V0Q2hpbGRWYWx1ZShhKS5yZXBsYWNlKHRoaXMucmVnRXhlcy50cmltU3BhY2UsIiIpLnNwbGl0KHRoaXMucmVnRXhlcy5zcGxpdFNwYWNlKSxkPWIuc3JzRGltZW5zaW9ufHxwYXJzZUludChhLmdldEF0dHJpYnV0ZSgic3JzRGltZW5zaW9uIil8fGEuZ2V0QXR0cmlidXRlKCJkaW1lbnNpb24iKSwxMCl8fDIsZSxmLGcsaD1BcnJheShjLmxlbmd0aC9kKSxrPTAsbD1jLmxlbmd0aDtrPGw7ays9ZCllPWNba10sZj1jW2srMV0sZz0yPT1kP3ZvaWQgMDpjW2srMl0saFtrL2RdPXRoaXMueHk/bmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoZSxmLGcpOm5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KGYsCmUsZyk7Yi5wb2ludHM9aH0sU3VyZmFjZTpmdW5jdGlvbihhLGIpe3RoaXMucmVhZENoaWxkTm9kZXMoYSxiKX0scGF0Y2hlczpmdW5jdGlvbihhLGIpe3RoaXMucmVhZENoaWxkTm9kZXMoYSxiKX0sUG9seWdvblBhdGNoOmZ1bmN0aW9uKGEsYil7dGhpcy5yZWFkZXJzLmdtbC5Qb2x5Z29uLmFwcGx5KHRoaXMsW2EsYl0pfSxleHRlcmlvcjpmdW5jdGlvbihhLGIpe3ZhciBjPXt9O3RoaXMucmVhZENoaWxkTm9kZXMoYSxjKTtiLm91dGVyPWMuY29tcG9uZW50c1swXX0saW50ZXJpb3I6ZnVuY3Rpb24oYSxiKXt2YXIgYz17fTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYyk7Yi5pbm5lci5wdXNoKGMuY29tcG9uZW50c1swXSl9LE11bHRpQ3VydmU6ZnVuY3Rpb24oYSxiKXt2YXIgYz17Y29tcG9uZW50czpbXX07dGhpcy5yZWFkZXJzLmdtbC5faW5oZXJpdC5hcHBseSh0aGlzLFthLGMsYl0pO3RoaXMucmVhZENoaWxkTm9kZXMoYSxjKTswPGMuY29tcG9uZW50cy5sZW5ndGgmJihiLmNvbXBvbmVudHM9CltuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5NdWx0aUxpbmVTdHJpbmcoYy5jb21wb25lbnRzKV0pfSxjdXJ2ZU1lbWJlcjpmdW5jdGlvbihhLGIpe3RoaXMucmVhZENoaWxkTm9kZXMoYSxiKX0sTXVsdGlTdXJmYWNlOmZ1bmN0aW9uKGEsYil7dmFyIGM9e2NvbXBvbmVudHM6W119O3RoaXMucmVhZGVycy5nbWwuX2luaGVyaXQuYXBwbHkodGhpcyxbYSxjLGJdKTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYyk7MDxjLmNvbXBvbmVudHMubGVuZ3RoJiYoYi5jb21wb25lbnRzPVtuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5NdWx0aVBvbHlnb24oYy5jb21wb25lbnRzKV0pfSxzdXJmYWNlTWVtYmVyOmZ1bmN0aW9uKGEsYil7dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGIpfSxzdXJmYWNlTWVtYmVyczpmdW5jdGlvbihhLGIpe3RoaXMucmVhZENoaWxkTm9kZXMoYSxiKX0scG9pbnRNZW1iZXJzOmZ1bmN0aW9uKGEsYil7dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGIpfSxsaW5lU3RyaW5nTWVtYmVyczpmdW5jdGlvbihhLApiKXt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYil9LHBvbHlnb25NZW1iZXJzOmZ1bmN0aW9uKGEsYil7dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGIpfSxnZW9tZXRyeU1lbWJlcnM6ZnVuY3Rpb24oYSxiKXt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYil9LEVudmVsb3BlOmZ1bmN0aW9uKGEsYil7dmFyIGM9e3BvaW50czpBcnJheSgyKX07dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGMpO2IuY29tcG9uZW50c3x8KGIuY29tcG9uZW50cz1bXSk7dmFyIGQ9Yy5wb2ludHNbMF0sYz1jLnBvaW50c1sxXTtiLmNvbXBvbmVudHMucHVzaChuZXcgT3BlbkxheWVycy5Cb3VuZHMoZC54LGQueSxjLngsYy55KSl9LGxvd2VyQ29ybmVyOmZ1bmN0aW9uKGEsYil7dmFyIGM9e307dGhpcy5yZWFkZXJzLmdtbC5wb3MuYXBwbHkodGhpcyxbYSxjXSk7Yi5wb2ludHNbMF09Yy5wb2ludHNbMF19LHVwcGVyQ29ybmVyOmZ1bmN0aW9uKGEsYil7dmFyIGM9e307dGhpcy5yZWFkZXJzLmdtbC5wb3MuYXBwbHkodGhpcywKW2EsY10pO2IucG9pbnRzWzFdPWMucG9pbnRzWzBdfX0sT3BlbkxheWVycy5Gb3JtYXQuR01MLkJhc2UucHJvdG90eXBlLnJlYWRlcnMuZ21sKSxmZWF0dXJlOk9wZW5MYXllcnMuRm9ybWF0LkdNTC5CYXNlLnByb3RvdHlwZS5yZWFkZXJzLmZlYXR1cmUsd2ZzOk9wZW5MYXllcnMuRm9ybWF0LkdNTC5CYXNlLnByb3RvdHlwZS5yZWFkZXJzLndmc30sd3JpdGU6ZnVuY3Rpb24oYSl7dmFyIGI7Yj1PcGVuTGF5ZXJzLlV0aWwuaXNBcnJheShhKT8iZmVhdHVyZU1lbWJlcnMiOiJmZWF0dXJlTWVtYmVyIjthPXRoaXMud3JpdGVOb2RlKCJnbWw6IitiLGEpO3RoaXMuc2V0QXR0cmlidXRlTlMoYSx0aGlzLm5hbWVzcGFjZXMueHNpLCJ4c2k6c2NoZW1hTG9jYXRpb24iLHRoaXMuc2NoZW1hTG9jYXRpb24pO3JldHVybiBPcGVuTGF5ZXJzLkZvcm1hdC5YTUwucHJvdG90eXBlLndyaXRlLmFwcGx5KHRoaXMsW2FdKX0sd3JpdGVyczp7Z21sOk9wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKHtmZWF0dXJlTWVtYmVyczpmdW5jdGlvbihhKXtmb3IodmFyIGI9CnRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygiZ21sOmZlYXR1cmVNZW1iZXJzIiksYz0wLGQ9YS5sZW5ndGg7YzxkOysrYyl0aGlzLndyaXRlTm9kZSgiZmVhdHVyZTpfdHlwZU5hbWUiLGFbY10sYik7cmV0dXJuIGJ9LFBvaW50OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygiZ21sOlBvaW50Iik7dGhpcy53cml0ZU5vZGUoInBvcyIsYSxiKTtyZXR1cm4gYn0scG9zOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoImdtbDpwb3MiLHt2YWx1ZTp0aGlzLnh5P2EueCsiICIrYS55OmEueSsiICIrYS54fSl9LExpbmVTdHJpbmc6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJnbWw6TGluZVN0cmluZyIpO3RoaXMud3JpdGVOb2RlKCJwb3NMaXN0IixhLmNvbXBvbmVudHMsYik7cmV0dXJuIGJ9LEN1cnZlOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygiZ21sOkN1cnZlIik7CnRoaXMud3JpdGVOb2RlKCJzZWdtZW50cyIsYSxiKTtyZXR1cm4gYn0sc2VnbWVudHM6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJnbWw6c2VnbWVudHMiKTt0aGlzLndyaXRlTm9kZSgiTGluZVN0cmluZ1NlZ21lbnQiLGEsYik7cmV0dXJuIGJ9LExpbmVTdHJpbmdTZWdtZW50OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygiZ21sOkxpbmVTdHJpbmdTZWdtZW50Iik7dGhpcy53cml0ZU5vZGUoInBvc0xpc3QiLGEuY29tcG9uZW50cyxiKTtyZXR1cm4gYn0scG9zTGlzdDpmdW5jdGlvbihhKXtmb3IodmFyIGI9YS5sZW5ndGgsYz1BcnJheShiKSxkLGU9MDtlPGI7KytlKWQ9YVtlXSxjW2VdPXRoaXMueHk/ZC54KyIgIitkLnk6ZC55KyIgIitkLng7cmV0dXJuIHRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygiZ21sOnBvc0xpc3QiLHt2YWx1ZTpjLmpvaW4oIiAiKX0pfSxTdXJmYWNlOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygiZ21sOlN1cmZhY2UiKTsKdGhpcy53cml0ZU5vZGUoInBhdGNoZXMiLGEsYik7cmV0dXJuIGJ9LHBhdGNoZXM6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJnbWw6cGF0Y2hlcyIpO3RoaXMud3JpdGVOb2RlKCJQb2x5Z29uUGF0Y2giLGEsYik7cmV0dXJuIGJ9LFBvbHlnb25QYXRjaDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoImdtbDpQb2x5Z29uUGF0Y2giLHthdHRyaWJ1dGVzOntpbnRlcnBvbGF0aW9uOiJwbGFuYXIifX0pO3RoaXMud3JpdGVOb2RlKCJleHRlcmlvciIsYS5jb21wb25lbnRzWzBdLGIpO2Zvcih2YXIgYz0xLGQ9YS5jb21wb25lbnRzLmxlbmd0aDtjPGQ7KytjKXRoaXMud3JpdGVOb2RlKCJpbnRlcmlvciIsYS5jb21wb25lbnRzW2NdLGIpO3JldHVybiBifSxQb2x5Z29uOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygiZ21sOlBvbHlnb24iKTt0aGlzLndyaXRlTm9kZSgiZXh0ZXJpb3IiLGEuY29tcG9uZW50c1swXSwKYik7Zm9yKHZhciBjPTEsZD1hLmNvbXBvbmVudHMubGVuZ3RoO2M8ZDsrK2MpdGhpcy53cml0ZU5vZGUoImludGVyaW9yIixhLmNvbXBvbmVudHNbY10sYik7cmV0dXJuIGJ9LGV4dGVyaW9yOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygiZ21sOmV4dGVyaW9yIik7dGhpcy53cml0ZU5vZGUoIkxpbmVhclJpbmciLGEsYik7cmV0dXJuIGJ9LGludGVyaW9yOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygiZ21sOmludGVyaW9yIik7dGhpcy53cml0ZU5vZGUoIkxpbmVhclJpbmciLGEsYik7cmV0dXJuIGJ9LExpbmVhclJpbmc6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJnbWw6TGluZWFyUmluZyIpO3RoaXMud3JpdGVOb2RlKCJwb3NMaXN0IixhLmNvbXBvbmVudHMsYik7cmV0dXJuIGJ9LE11bHRpQ3VydmU6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJnbWw6TXVsdGlDdXJ2ZSIpOwphPWEuY29tcG9uZW50c3x8W2FdO2Zvcih2YXIgYz0wLGQ9YS5sZW5ndGg7YzxkOysrYyl0aGlzLndyaXRlTm9kZSgiY3VydmVNZW1iZXIiLGFbY10sYik7cmV0dXJuIGJ9LGN1cnZlTWVtYmVyOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygiZ21sOmN1cnZlTWVtYmVyIik7dGhpcy5jdXJ2ZT90aGlzLndyaXRlTm9kZSgiQ3VydmUiLGEsYik6dGhpcy53cml0ZU5vZGUoIkxpbmVTdHJpbmciLGEsYik7cmV0dXJuIGJ9LE11bHRpU3VyZmFjZTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoImdtbDpNdWx0aVN1cmZhY2UiKTthPWEuY29tcG9uZW50c3x8W2FdO2Zvcih2YXIgYz0wLGQ9YS5sZW5ndGg7YzxkOysrYyl0aGlzLndyaXRlTm9kZSgic3VyZmFjZU1lbWJlciIsYVtjXSxiKTtyZXR1cm4gYn0sc3VyZmFjZU1lbWJlcjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoImdtbDpzdXJmYWNlTWVtYmVyIik7CnRoaXMuc3VyZmFjZT90aGlzLndyaXRlTm9kZSgiU3VyZmFjZSIsYSxiKTp0aGlzLndyaXRlTm9kZSgiUG9seWdvbiIsYSxiKTtyZXR1cm4gYn0sRW52ZWxvcGU6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJnbWw6RW52ZWxvcGUiKTt0aGlzLndyaXRlTm9kZSgibG93ZXJDb3JuZXIiLGEsYik7dGhpcy53cml0ZU5vZGUoInVwcGVyQ29ybmVyIixhLGIpO3RoaXMuc3JzTmFtZSYmYi5zZXRBdHRyaWJ1dGUoInNyc05hbWUiLHRoaXMuc3JzTmFtZSk7cmV0dXJuIGJ9LGxvd2VyQ29ybmVyOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoImdtbDpsb3dlckNvcm5lciIse3ZhbHVlOnRoaXMueHk/YS5sZWZ0KyIgIithLmJvdHRvbTphLmJvdHRvbSsiICIrYS5sZWZ0fSl9LHVwcGVyQ29ybmVyOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoImdtbDp1cHBlckNvcm5lciIse3ZhbHVlOnRoaXMueHk/CmEucmlnaHQrIiAiK2EudG9wOmEudG9wKyIgIithLnJpZ2h0fSl9fSxPcGVuTGF5ZXJzLkZvcm1hdC5HTUwuQmFzZS5wcm90b3R5cGUud3JpdGVycy5nbWwpLGZlYXR1cmU6T3BlbkxheWVycy5Gb3JtYXQuR01MLkJhc2UucHJvdG90eXBlLndyaXRlcnMuZmVhdHVyZSx3ZnM6T3BlbkxheWVycy5Gb3JtYXQuR01MLkJhc2UucHJvdG90eXBlLndyaXRlcnMud2ZzfSxzZXRHZW9tZXRyeVR5cGVzOmZ1bmN0aW9uKCl7dGhpcy5nZW9tZXRyeVR5cGVzPXsiT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludCI6IlBvaW50IiwiT3BlbkxheWVycy5HZW9tZXRyeS5NdWx0aVBvaW50IjoiTXVsdGlQb2ludCIsIk9wZW5MYXllcnMuR2VvbWV0cnkuTGluZVN0cmluZyI6ITA9PT10aGlzLmN1cnZlPyJDdXJ2ZSI6IkxpbmVTdHJpbmciLCJPcGVuTGF5ZXJzLkdlb21ldHJ5Lk11bHRpTGluZVN0cmluZyI6ITE9PT10aGlzLm11bHRpQ3VydmU/Ik11bHRpTGluZVN0cmluZyI6Ik11bHRpQ3VydmUiLCJPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvbHlnb24iOiEwPT09CnRoaXMuc3VyZmFjZT8iU3VyZmFjZSI6IlBvbHlnb24iLCJPcGVuTGF5ZXJzLkdlb21ldHJ5Lk11bHRpUG9seWdvbiI6ITE9PT10aGlzLm11bHRpU3VyZmFjZT8iTXVsdGlQb2x5Z29uIjoiTXVsdGlTdXJmYWNlIiwiT3BlbkxheWVycy5HZW9tZXRyeS5Db2xsZWN0aW9uIjoiR2VvbWV0cnlDb2xsZWN0aW9uIn19LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuRm9ybWF0LkdNTC52MyJ9KTtPcGVuTGF5ZXJzLkZvcm1hdC5GaWx0ZXIudjFfMV8wPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Gb3JtYXQuR01MLnYzLE9wZW5MYXllcnMuRm9ybWF0LkZpbHRlci52MSx7VkVSU0lPTjoiMS4xLjAiLHNjaGVtYUxvY2F0aW9uOiJodHRwOi8vd3d3Lm9wZW5naXMubmV0L29nYy9maWx0ZXIvMS4xLjAvZmlsdGVyLnhzZCIsaW5pdGlhbGl6ZTpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLkZvcm1hdC5HTUwudjMucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxbYV0pfSxyZWFkZXJzOntvZ2M6T3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoe1Byb3BlcnR5SXNFcXVhbFRvOmZ1bmN0aW9uKGEsYil7dmFyIGM9YS5nZXRBdHRyaWJ1dGUoIm1hdGNoQ2FzZSIpLGM9bmV3IE9wZW5MYXllcnMuRmlsdGVyLkNvbXBhcmlzb24oe3R5cGU6T3BlbkxheWVycy5GaWx0ZXIuQ29tcGFyaXNvbi5FUVVBTF9UTyxtYXRjaENhc2U6ISgiZmFsc2UiPT09Y3x8IjAiPT09Yyl9KTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsCmMpO2IuZmlsdGVycy5wdXNoKGMpfSxQcm9wZXJ0eUlzTm90RXF1YWxUbzpmdW5jdGlvbihhLGIpe3ZhciBjPWEuZ2V0QXR0cmlidXRlKCJtYXRjaENhc2UiKSxjPW5ldyBPcGVuTGF5ZXJzLkZpbHRlci5Db21wYXJpc29uKHt0eXBlOk9wZW5MYXllcnMuRmlsdGVyLkNvbXBhcmlzb24uTk9UX0VRVUFMX1RPLG1hdGNoQ2FzZTohKCJmYWxzZSI9PT1jfHwiMCI9PT1jKX0pO3RoaXMucmVhZENoaWxkTm9kZXMoYSxjKTtiLmZpbHRlcnMucHVzaChjKX0sUHJvcGVydHlJc0xpa2U6ZnVuY3Rpb24oYSxiKXt2YXIgYz1uZXcgT3BlbkxheWVycy5GaWx0ZXIuQ29tcGFyaXNvbih7dHlwZTpPcGVuTGF5ZXJzLkZpbHRlci5Db21wYXJpc29uLkxJS0V9KTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYyk7dmFyIGQ9YS5nZXRBdHRyaWJ1dGUoIndpbGRDYXJkIiksZT1hLmdldEF0dHJpYnV0ZSgic2luZ2xlQ2hhciIpLGY9YS5nZXRBdHRyaWJ1dGUoImVzY2FwZUNoYXIiKTtjLnZhbHVlMnJlZ2V4KGQsZSwKZik7Yi5maWx0ZXJzLnB1c2goYyl9fSxPcGVuTGF5ZXJzLkZvcm1hdC5GaWx0ZXIudjEucHJvdG90eXBlLnJlYWRlcnMub2djKSxnbWw6T3BlbkxheWVycy5Gb3JtYXQuR01MLnYzLnByb3RvdHlwZS5yZWFkZXJzLmdtbCxmZWF0dXJlOk9wZW5MYXllcnMuRm9ybWF0LkdNTC52My5wcm90b3R5cGUucmVhZGVycy5mZWF0dXJlfSx3cml0ZXJzOntvZ2M6T3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoe1Byb3BlcnR5SXNFcXVhbFRvOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygib2djOlByb3BlcnR5SXNFcXVhbFRvIix7YXR0cmlidXRlczp7bWF0Y2hDYXNlOmEubWF0Y2hDYXNlfX0pO3RoaXMud3JpdGVOb2RlKCJQcm9wZXJ0eU5hbWUiLGEsYik7dGhpcy53cml0ZU9nY0V4cHJlc3Npb24oYS52YWx1ZSxiKTtyZXR1cm4gYn0sUHJvcGVydHlJc05vdEVxdWFsVG86ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJvZ2M6UHJvcGVydHlJc05vdEVxdWFsVG8iLAp7YXR0cmlidXRlczp7bWF0Y2hDYXNlOmEubWF0Y2hDYXNlfX0pO3RoaXMud3JpdGVOb2RlKCJQcm9wZXJ0eU5hbWUiLGEsYik7dGhpcy53cml0ZU9nY0V4cHJlc3Npb24oYS52YWx1ZSxiKTtyZXR1cm4gYn0sUHJvcGVydHlJc0xpa2U6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJvZ2M6UHJvcGVydHlJc0xpa2UiLHthdHRyaWJ1dGVzOnttYXRjaENhc2U6YS5tYXRjaENhc2Usd2lsZENhcmQ6IioiLHNpbmdsZUNoYXI6Ii4iLGVzY2FwZUNoYXI6IiEifX0pO3RoaXMud3JpdGVOb2RlKCJQcm9wZXJ0eU5hbWUiLGEsYik7dGhpcy53cml0ZU5vZGUoIkxpdGVyYWwiLGEucmVnZXgydmFsdWUoKSxiKTtyZXR1cm4gYn0sQkJPWDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoIm9nYzpCQk9YIik7YS5wcm9wZXJ0eSYmdGhpcy53cml0ZU5vZGUoIlByb3BlcnR5TmFtZSIsYSxiKTt2YXIgYz10aGlzLndyaXRlTm9kZSgiZ21sOkVudmVsb3BlIiwKYS52YWx1ZSk7YS5wcm9qZWN0aW9uJiZjLnNldEF0dHJpYnV0ZSgic3JzTmFtZSIsYS5wcm9qZWN0aW9uKTtiLmFwcGVuZENoaWxkKGMpO3JldHVybiBifSxTb3J0Qnk6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygib2djOlNvcnRCeSIpLGM9MCxkPWEubGVuZ3RoO2M8ZDtjKyspdGhpcy53cml0ZU5vZGUoIm9nYzpTb3J0UHJvcGVydHkiLGFbY10sYik7cmV0dXJuIGJ9LFNvcnRQcm9wZXJ0eTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoIm9nYzpTb3J0UHJvcGVydHkiKTt0aGlzLndyaXRlTm9kZSgib2djOlByb3BlcnR5TmFtZSIsYSxiKTt0aGlzLndyaXRlTm9kZSgib2djOlNvcnRPcmRlciIsIkRFU0MiPT1hLm9yZGVyPyJERVNDIjoiQVNDIixiKTtyZXR1cm4gYn0sU29ydE9yZGVyOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoIm9nYzpTb3J0T3JkZXIiLHt2YWx1ZTphfSl9fSwKT3BlbkxheWVycy5Gb3JtYXQuRmlsdGVyLnYxLnByb3RvdHlwZS53cml0ZXJzLm9nYyksZ21sOk9wZW5MYXllcnMuRm9ybWF0LkdNTC52My5wcm90b3R5cGUud3JpdGVycy5nbWwsZmVhdHVyZTpPcGVuTGF5ZXJzLkZvcm1hdC5HTUwudjMucHJvdG90eXBlLndyaXRlcnMuZmVhdHVyZX0sd3JpdGVTcGF0aWFsOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJvZ2M6IitiKTt0aGlzLndyaXRlTm9kZSgiUHJvcGVydHlOYW1lIixhLGMpO2lmKGEudmFsdWUgaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLkZpbHRlci5GdW5jdGlvbil0aGlzLndyaXRlTm9kZSgiRnVuY3Rpb24iLGEudmFsdWUsYyk7ZWxzZXt2YXIgZDtkPWEudmFsdWUgaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLkdlb21ldHJ5P3RoaXMud3JpdGVOb2RlKCJmZWF0dXJlOl9nZW9tZXRyeSIsYS52YWx1ZSkuZmlyc3RDaGlsZDp0aGlzLndyaXRlTm9kZSgiZ21sOkVudmVsb3BlIixhLnZhbHVlKTthLnByb2plY3Rpb24mJgpkLnNldEF0dHJpYnV0ZSgic3JzTmFtZSIsYS5wcm9qZWN0aW9uKTtjLmFwcGVuZENoaWxkKGQpfXJldHVybiBjfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkZvcm1hdC5GaWx0ZXIudjFfMV8wIn0pO09wZW5MYXllcnMuRm9ybWF0Lk9XU0NvbW1vbj1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuRm9ybWF0LlhNTC5WZXJzaW9uZWRPR0Mse2RlZmF1bHRWZXJzaW9uOiIxLjAuMCIsZ2V0VmVyc2lvbjpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMudmVyc2lvbjtpZighYyl7dmFyIGQ9YS5nZXRBdHRyaWJ1dGUoInhtbG5zOm93cyIpO2QmJiIxLjEiPT09ZC5zdWJzdHJpbmcoZC5sYXN0SW5kZXhPZigiLyIpKzEpJiYoYz0iMS4xLjAiKTtjfHwoYz10aGlzLmRlZmF1bHRWZXJzaW9uKX1yZXR1cm4gY30sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Gb3JtYXQuT1dTQ29tbW9uIn0pO09wZW5MYXllcnMuRm9ybWF0Lk9XU0NvbW1vbi52MT1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuRm9ybWF0LlhNTCx7cmVnRXhlczp7dHJpbVNwYWNlOi9eXHMqfFxzKiQvZyxyZW1vdmVTcGFjZTovXHMqL2csc3BsaXRTcGFjZTovXHMrLyx0cmltQ29tbWE6L1xzKixccyovZ30scmVhZDpmdW5jdGlvbihhLGIpe09wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKGIsdGhpcy5vcHRpb25zKTt2YXIgYz17fTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYyk7cmV0dXJuIGN9LHJlYWRlcnM6e293czp7RXhjZXB0aW9uOmZ1bmN0aW9uKGEsYil7dmFyIGM9e2NvZGU6YS5nZXRBdHRyaWJ1dGUoImV4Y2VwdGlvbkNvZGUiKSxsb2NhdG9yOmEuZ2V0QXR0cmlidXRlKCJsb2NhdG9yIiksdGV4dHM6W119O2IuZXhjZXB0aW9ucy5wdXNoKGMpO3RoaXMucmVhZENoaWxkTm9kZXMoYSxjKX0sRXhjZXB0aW9uVGV4dDpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuZ2V0Q2hpbGRWYWx1ZShhKTtiLnRleHRzLnB1c2goYyl9LApTZXJ2aWNlSWRlbnRpZmljYXRpb246ZnVuY3Rpb24oYSxiKXtiLnNlcnZpY2VJZGVudGlmaWNhdGlvbj17fTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYi5zZXJ2aWNlSWRlbnRpZmljYXRpb24pfSxUaXRsZTpmdW5jdGlvbihhLGIpe2IudGl0bGU9dGhpcy5nZXRDaGlsZFZhbHVlKGEpfSxBYnN0cmFjdDpmdW5jdGlvbihhLGIpe2JbImFic3RyYWN0Il09dGhpcy5nZXRDaGlsZFZhbHVlKGEpfSxLZXl3b3JkczpmdW5jdGlvbihhLGIpe2Iua2V5d29yZHM9e307dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGIua2V5d29yZHMpfSxLZXl3b3JkOmZ1bmN0aW9uKGEsYil7Ylt0aGlzLmdldENoaWxkVmFsdWUoYSldPSEwfSxTZXJ2aWNlVHlwZTpmdW5jdGlvbihhLGIpe2Iuc2VydmljZVR5cGU9e2NvZGVTcGFjZTphLmdldEF0dHJpYnV0ZSgiY29kZVNwYWNlIiksdmFsdWU6dGhpcy5nZXRDaGlsZFZhbHVlKGEpfX0sU2VydmljZVR5cGVWZXJzaW9uOmZ1bmN0aW9uKGEsYil7Yi5zZXJ2aWNlVHlwZVZlcnNpb249CnRoaXMuZ2V0Q2hpbGRWYWx1ZShhKX0sRmVlczpmdW5jdGlvbihhLGIpe2IuZmVlcz10aGlzLmdldENoaWxkVmFsdWUoYSl9LEFjY2Vzc0NvbnN0cmFpbnRzOmZ1bmN0aW9uKGEsYil7Yi5hY2Nlc3NDb25zdHJhaW50cz10aGlzLmdldENoaWxkVmFsdWUoYSl9LFNlcnZpY2VQcm92aWRlcjpmdW5jdGlvbihhLGIpe2Iuc2VydmljZVByb3ZpZGVyPXt9O3RoaXMucmVhZENoaWxkTm9kZXMoYSxiLnNlcnZpY2VQcm92aWRlcil9LFByb3ZpZGVyTmFtZTpmdW5jdGlvbihhLGIpe2IucHJvdmlkZXJOYW1lPXRoaXMuZ2V0Q2hpbGRWYWx1ZShhKX0sUHJvdmlkZXJTaXRlOmZ1bmN0aW9uKGEsYil7Yi5wcm92aWRlclNpdGU9dGhpcy5nZXRBdHRyaWJ1dGVOUyhhLHRoaXMubmFtZXNwYWNlcy54bGluaywiaHJlZiIpfSxTZXJ2aWNlQ29udGFjdDpmdW5jdGlvbihhLGIpe2Iuc2VydmljZUNvbnRhY3Q9e307dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGIuc2VydmljZUNvbnRhY3QpfSxJbmRpdmlkdWFsTmFtZTpmdW5jdGlvbihhLApiKXtiLmluZGl2aWR1YWxOYW1lPXRoaXMuZ2V0Q2hpbGRWYWx1ZShhKX0sUG9zaXRpb25OYW1lOmZ1bmN0aW9uKGEsYil7Yi5wb3NpdGlvbk5hbWU9dGhpcy5nZXRDaGlsZFZhbHVlKGEpfSxDb250YWN0SW5mbzpmdW5jdGlvbihhLGIpe2IuY29udGFjdEluZm89e307dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGIuY29udGFjdEluZm8pfSxQaG9uZTpmdW5jdGlvbihhLGIpe2IucGhvbmU9e307dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGIucGhvbmUpfSxWb2ljZTpmdW5jdGlvbihhLGIpe2Iudm9pY2U9dGhpcy5nZXRDaGlsZFZhbHVlKGEpfSxBZGRyZXNzOmZ1bmN0aW9uKGEsYil7Yi5hZGRyZXNzPXt9O3RoaXMucmVhZENoaWxkTm9kZXMoYSxiLmFkZHJlc3MpfSxEZWxpdmVyeVBvaW50OmZ1bmN0aW9uKGEsYil7Yi5kZWxpdmVyeVBvaW50PXRoaXMuZ2V0Q2hpbGRWYWx1ZShhKX0sQ2l0eTpmdW5jdGlvbihhLGIpe2IuY2l0eT10aGlzLmdldENoaWxkVmFsdWUoYSl9LEFkbWluaXN0cmF0aXZlQXJlYTpmdW5jdGlvbihhLApiKXtiLmFkbWluaXN0cmF0aXZlQXJlYT10aGlzLmdldENoaWxkVmFsdWUoYSl9LFBvc3RhbENvZGU6ZnVuY3Rpb24oYSxiKXtiLnBvc3RhbENvZGU9dGhpcy5nZXRDaGlsZFZhbHVlKGEpfSxDb3VudHJ5OmZ1bmN0aW9uKGEsYil7Yi5jb3VudHJ5PXRoaXMuZ2V0Q2hpbGRWYWx1ZShhKX0sRWxlY3Ryb25pY01haWxBZGRyZXNzOmZ1bmN0aW9uKGEsYil7Yi5lbGVjdHJvbmljTWFpbEFkZHJlc3M9dGhpcy5nZXRDaGlsZFZhbHVlKGEpfSxSb2xlOmZ1bmN0aW9uKGEsYil7Yi5yb2xlPXRoaXMuZ2V0Q2hpbGRWYWx1ZShhKX0sT3BlcmF0aW9uc01ldGFkYXRhOmZ1bmN0aW9uKGEsYil7Yi5vcGVyYXRpb25zTWV0YWRhdGE9e307dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGIub3BlcmF0aW9uc01ldGFkYXRhKX0sT3BlcmF0aW9uOmZ1bmN0aW9uKGEsYil7dmFyIGM9YS5nZXRBdHRyaWJ1dGUoIm5hbWUiKTtiW2NdPXt9O3RoaXMucmVhZENoaWxkTm9kZXMoYSxiW2NdKX0sRENQOmZ1bmN0aW9uKGEsCmIpe2IuZGNwPXt9O3RoaXMucmVhZENoaWxkTm9kZXMoYSxiLmRjcCl9LEhUVFA6ZnVuY3Rpb24oYSxiKXtiLmh0dHA9e307dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGIuaHR0cCl9LEdldDpmdW5jdGlvbihhLGIpe2IuZ2V0fHwoYi5nZXQ9W10pO3ZhciBjPXt1cmw6dGhpcy5nZXRBdHRyaWJ1dGVOUyhhLHRoaXMubmFtZXNwYWNlcy54bGluaywiaHJlZiIpfTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYyk7Yi5nZXQucHVzaChjKX0sUG9zdDpmdW5jdGlvbihhLGIpe2IucG9zdHx8KGIucG9zdD1bXSk7dmFyIGM9e3VybDp0aGlzLmdldEF0dHJpYnV0ZU5TKGEsdGhpcy5uYW1lc3BhY2VzLnhsaW5rLCJocmVmIil9O3RoaXMucmVhZENoaWxkTm9kZXMoYSxjKTtiLnBvc3QucHVzaChjKX0sUGFyYW1ldGVyOmZ1bmN0aW9uKGEsYil7Yi5wYXJhbWV0ZXJzfHwoYi5wYXJhbWV0ZXJzPXt9KTt2YXIgYz1hLmdldEF0dHJpYnV0ZSgibmFtZSIpO2IucGFyYW1ldGVyc1tjXT17fTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsCmIucGFyYW1ldGVyc1tjXSl9LENvbnN0cmFpbnQ6ZnVuY3Rpb24oYSxiKXtiLmNvbnN0cmFpbnRzfHwoYi5jb25zdHJhaW50cz17fSk7dmFyIGM9YS5nZXRBdHRyaWJ1dGUoIm5hbWUiKTtiLmNvbnN0cmFpbnRzW2NdPXt9O3RoaXMucmVhZENoaWxkTm9kZXMoYSxiLmNvbnN0cmFpbnRzW2NdKX0sVmFsdWU6ZnVuY3Rpb24oYSxiKXtiW3RoaXMuZ2V0Q2hpbGRWYWx1ZShhKV09ITB9LE91dHB1dEZvcm1hdDpmdW5jdGlvbihhLGIpe2IuZm9ybWF0cy5wdXNoKHt2YWx1ZTp0aGlzLmdldENoaWxkVmFsdWUoYSl9KTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYil9LFdHUzg0Qm91bmRpbmdCb3g6ZnVuY3Rpb24oYSxiKXt2YXIgYz17fTtjLmNycz1hLmdldEF0dHJpYnV0ZSgiY3JzIik7Yi5Cb3VuZGluZ0JveD9iLkJvdW5kaW5nQm94LnB1c2goYyk6KGIucHJvamVjdGlvbj1jLmNycyxjPWIpO3RoaXMucmVhZENoaWxkTm9kZXMoYSxjKX0sQm91bmRpbmdCb3g6ZnVuY3Rpb24oYSxiKXt0aGlzLnJlYWRlcnMub3dzLldHUzg0Qm91bmRpbmdCb3guYXBwbHkodGhpcywKW2EsYl0pfSxMb3dlckNvcm5lcjpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuZ2V0Q2hpbGRWYWx1ZShhKS5yZXBsYWNlKHRoaXMucmVnRXhlcy50cmltU3BhY2UsIiIpLGM9Yy5yZXBsYWNlKHRoaXMucmVnRXhlcy50cmltQ29tbWEsIiwiKSxjPWMuc3BsaXQodGhpcy5yZWdFeGVzLnNwbGl0U3BhY2UpO2IubGVmdD1jWzBdO2IuYm90dG9tPWNbMV19LFVwcGVyQ29ybmVyOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5nZXRDaGlsZFZhbHVlKGEpLnJlcGxhY2UodGhpcy5yZWdFeGVzLnRyaW1TcGFjZSwiIiksYz1jLnJlcGxhY2UodGhpcy5yZWdFeGVzLnRyaW1Db21tYSwiLCIpLGM9Yy5zcGxpdCh0aGlzLnJlZ0V4ZXMuc3BsaXRTcGFjZSk7Yi5yaWdodD1jWzBdO2IudG9wPWNbMV07Yi5ib3VuZHM9bmV3IE9wZW5MYXllcnMuQm91bmRzKGIubGVmdCxiLmJvdHRvbSxiLnJpZ2h0LGIudG9wKTtkZWxldGUgYi5sZWZ0O2RlbGV0ZSBiLmJvdHRvbTtkZWxldGUgYi5yaWdodDtkZWxldGUgYi50b3B9LApMYW5ndWFnZTpmdW5jdGlvbihhLGIpe2IubGFuZ3VhZ2U9dGhpcy5nZXRDaGlsZFZhbHVlKGEpfX19LHdyaXRlcnM6e293czp7Qm91bmRpbmdCb3g6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoYnx8Im93czpCb3VuZGluZ0JveCIse2F0dHJpYnV0ZXM6e2NyczphLnByb2plY3Rpb259fSk7dGhpcy53cml0ZU5vZGUoIm93czpMb3dlckNvcm5lciIsYSxjKTt0aGlzLndyaXRlTm9kZSgib3dzOlVwcGVyQ29ybmVyIixhLGMpO3JldHVybiBjfSxMb3dlckNvcm5lcjpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJvd3M6TG93ZXJDb3JuZXIiLHt2YWx1ZTphLmJvdW5kcy5sZWZ0KyIgIithLmJvdW5kcy5ib3R0b219KX0sVXBwZXJDb3JuZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygib3dzOlVwcGVyQ29ybmVyIix7dmFsdWU6YS5ib3VuZHMucmlnaHQrIiAiK2EuYm91bmRzLnRvcH0pfSwKSWRlbnRpZmllcjpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJvd3M6SWRlbnRpZmllciIse3ZhbHVlOmF9KX0sVGl0bGU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygib3dzOlRpdGxlIix7dmFsdWU6YX0pfSxBYnN0cmFjdDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJvd3M6QWJzdHJhY3QiLHt2YWx1ZTphfSl9LE91dHB1dEZvcm1hdDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJvd3M6T3V0cHV0Rm9ybWF0Iix7dmFsdWU6YX0pfX19LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuRm9ybWF0Lk9XU0NvbW1vbi52MSJ9KTtPcGVuTGF5ZXJzLkZvcm1hdC5PV1NDb21tb24udjFfMF8wPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Gb3JtYXQuT1dTQ29tbW9uLnYxLHtuYW1lc3BhY2VzOntvd3M6Imh0dHA6Ly93d3cub3Blbmdpcy5uZXQvb3dzIix4bGluazoiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayJ9LHJlYWRlcnM6e293czpPcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyh7RXhjZXB0aW9uUmVwb3J0OmZ1bmN0aW9uKGEsYil7Yi5zdWNjZXNzPSExO2IuZXhjZXB0aW9uUmVwb3J0PXt2ZXJzaW9uOmEuZ2V0QXR0cmlidXRlKCJ2ZXJzaW9uIiksbGFuZ3VhZ2U6YS5nZXRBdHRyaWJ1dGUoImxhbmd1YWdlIiksZXhjZXB0aW9uczpbXX07dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGIuZXhjZXB0aW9uUmVwb3J0KX19LE9wZW5MYXllcnMuRm9ybWF0Lk9XU0NvbW1vbi52MS5wcm90b3R5cGUucmVhZGVycy5vd3MpfSx3cml0ZXJzOntvd3M6T3BlbkxheWVycy5Gb3JtYXQuT1dTQ29tbW9uLnYxLnByb3RvdHlwZS53cml0ZXJzLm93c30sCkNMQVNTX05BTUU6Ik9wZW5MYXllcnMuRm9ybWF0Lk9XU0NvbW1vbi52MV8wXzAifSk7T3BlbkxheWVycy5Gb3JtYXQuV0ZTVC52MV8xXzA9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkZvcm1hdC5GaWx0ZXIudjFfMV8wLE9wZW5MYXllcnMuRm9ybWF0LldGU1QudjEse3ZlcnNpb246IjEuMS4wIixzY2hlbWFMb2NhdGlvbnM6e3dmczoiaHR0cDovL3NjaGVtYXMub3Blbmdpcy5uZXQvd2ZzLzEuMS4wL3dmcy54c2QifSxpbml0aWFsaXplOmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuRm9ybWF0LkZpbHRlci52MV8xXzAucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxbYV0pO09wZW5MYXllcnMuRm9ybWF0LldGU1QudjEucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxbYV0pfSxyZWFkTm9kZTpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIE9wZW5MYXllcnMuRm9ybWF0LkdNTC52My5wcm90b3R5cGUucmVhZE5vZGUuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxyZWFkZXJzOnt3ZnM6T3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoe0ZlYXR1cmVDb2xsZWN0aW9uOmZ1bmN0aW9uKGEsCmIpe2IubnVtYmVyT2ZGZWF0dXJlcz1wYXJzZUludChhLmdldEF0dHJpYnV0ZSgibnVtYmVyT2ZGZWF0dXJlcyIpKTtPcGVuTGF5ZXJzLkZvcm1hdC5XRlNULnYxLnByb3RvdHlwZS5yZWFkZXJzLndmcy5GZWF0dXJlQ29sbGVjdGlvbi5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LFRyYW5zYWN0aW9uUmVzcG9uc2U6ZnVuY3Rpb24oYSxiKXtiLmluc2VydElkcz1bXTtiLnN1Y2Nlc3M9ITE7dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGIpfSxUcmFuc2FjdGlvblN1bW1hcnk6ZnVuY3Rpb24oYSxiKXtiLnN1Y2Nlc3M9ITB9LEluc2VydFJlc3VsdHM6ZnVuY3Rpb24oYSxiKXt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYil9LEZlYXR1cmU6ZnVuY3Rpb24oYSxiKXt2YXIgYz17ZmlkczpbXX07dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGMpO2IuaW5zZXJ0SWRzLnB1c2goYy5maWRzWzBdKX19LE9wZW5MYXllcnMuRm9ybWF0LldGU1QudjEucHJvdG90eXBlLnJlYWRlcnMud2ZzKSxnbWw6T3BlbkxheWVycy5Gb3JtYXQuR01MLnYzLnByb3RvdHlwZS5yZWFkZXJzLmdtbCwKZmVhdHVyZTpPcGVuTGF5ZXJzLkZvcm1hdC5HTUwudjMucHJvdG90eXBlLnJlYWRlcnMuZmVhdHVyZSxvZ2M6T3BlbkxheWVycy5Gb3JtYXQuRmlsdGVyLnYxXzFfMC5wcm90b3R5cGUucmVhZGVycy5vZ2Msb3dzOk9wZW5MYXllcnMuRm9ybWF0Lk9XU0NvbW1vbi52MV8wXzAucHJvdG90eXBlLnJlYWRlcnMub3dzfSx3cml0ZXJzOnt3ZnM6T3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoe0dldEZlYXR1cmU6ZnVuY3Rpb24oYSl7dmFyIGI9T3BlbkxheWVycy5Gb3JtYXQuV0ZTVC52MS5wcm90b3R5cGUud3JpdGVycy53ZnMuR2V0RmVhdHVyZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7YSYmdGhpcy5zZXRBdHRyaWJ1dGVzKGIse3Jlc3VsdFR5cGU6YS5yZXN1bHRUeXBlLHN0YXJ0SW5kZXg6YS5zdGFydEluZGV4LGNvdW50OmEuY291bnR9KTtyZXR1cm4gYn0sUXVlcnk6ZnVuY3Rpb24oYSl7YT1PcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHtmZWF0dXJlTlM6dGhpcy5mZWF0dXJlTlMsCmZlYXR1cmVQcmVmaXg6dGhpcy5mZWF0dXJlUHJlZml4LGZlYXR1cmVUeXBlOnRoaXMuZmVhdHVyZVR5cGUsc3JzTmFtZTp0aGlzLnNyc05hbWV9LGEpO3ZhciBiPWEuZmVhdHVyZVByZWZpeCxjPXRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygid2ZzOlF1ZXJ5Iix7YXR0cmlidXRlczp7dHlwZU5hbWU6KGI/YisiOiI6IiIpK2EuZmVhdHVyZVR5cGUsc3JzTmFtZTphLnNyc05hbWV9fSk7YS5mZWF0dXJlTlMmJmMuc2V0QXR0cmlidXRlKCJ4bWxuczoiK2IsYS5mZWF0dXJlTlMpO2lmKGEucHJvcGVydHlOYW1lcylmb3IodmFyIGI9MCxkPWEucHJvcGVydHlOYW1lcy5sZW5ndGg7YjxkO2IrKyl0aGlzLndyaXRlTm9kZSgid2ZzOlByb3BlcnR5TmFtZSIse3Byb3BlcnR5OmEucHJvcGVydHlOYW1lc1tiXX0sYyk7YS5maWx0ZXImJihPcGVuTGF5ZXJzLkZvcm1hdC5XRlNULnYxXzFfMC5wcm90b3R5cGUuc2V0RmlsdGVyUHJvcGVydHkuY2FsbCh0aGlzLGEuZmlsdGVyKSx0aGlzLndyaXRlTm9kZSgib2djOkZpbHRlciIsCmEuZmlsdGVyLGMpKTtyZXR1cm4gY30sUHJvcGVydHlOYW1lOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoIndmczpQcm9wZXJ0eU5hbWUiLHt2YWx1ZTphLnByb3BlcnR5fSl9fSxPcGVuTGF5ZXJzLkZvcm1hdC5XRlNULnYxLnByb3RvdHlwZS53cml0ZXJzLndmcyksZ21sOk9wZW5MYXllcnMuRm9ybWF0LkdNTC52My5wcm90b3R5cGUud3JpdGVycy5nbWwsZmVhdHVyZTpPcGVuTGF5ZXJzLkZvcm1hdC5HTUwudjMucHJvdG90eXBlLndyaXRlcnMuZmVhdHVyZSxvZ2M6T3BlbkxheWVycy5Gb3JtYXQuRmlsdGVyLnYxXzFfMC5wcm90b3R5cGUud3JpdGVycy5vZ2N9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuRm9ybWF0LldGU1QudjFfMV8wIn0pO09wZW5MYXllcnMuUHJvdG9jb2w9T3BlbkxheWVycy5DbGFzcyh7Zm9ybWF0Om51bGwsb3B0aW9uczpudWxsLGF1dG9EZXN0cm95OiEwLGRlZmF1bHRGaWx0ZXI6bnVsbCxpbml0aWFsaXplOmZ1bmN0aW9uKGEpe2E9YXx8e307T3BlbkxheWVycy5VdGlsLmV4dGVuZCh0aGlzLGEpO3RoaXMub3B0aW9ucz1hfSxtZXJnZVdpdGhEZWZhdWx0RmlsdGVyOmZ1bmN0aW9uKGEpe3JldHVybiBhJiZ0aGlzLmRlZmF1bHRGaWx0ZXI/bmV3IE9wZW5MYXllcnMuRmlsdGVyLkxvZ2ljYWwoe3R5cGU6T3BlbkxheWVycy5GaWx0ZXIuTG9naWNhbC5BTkQsZmlsdGVyczpbdGhpcy5kZWZhdWx0RmlsdGVyLGFdfSk6YXx8dGhpcy5kZWZhdWx0RmlsdGVyfHx2b2lkIDB9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmZvcm1hdD10aGlzLm9wdGlvbnM9bnVsbH0scmVhZDpmdW5jdGlvbihhKXthPWF8fHt9O2EuZmlsdGVyPXRoaXMubWVyZ2VXaXRoRGVmYXVsdEZpbHRlcihhLmZpbHRlcil9LGNyZWF0ZTpmdW5jdGlvbigpe30sCnVwZGF0ZTpmdW5jdGlvbigpe30sImRlbGV0ZSI6ZnVuY3Rpb24oKXt9LGNvbW1pdDpmdW5jdGlvbigpe30sYWJvcnQ6ZnVuY3Rpb24oYSl7fSxjcmVhdGVDYWxsYmFjazpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIE9wZW5MYXllcnMuRnVuY3Rpb24uYmluZChmdW5jdGlvbigpe2EuYXBwbHkodGhpcyxbYixjXSl9LHRoaXMpfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLlByb3RvY29sIn0pO09wZW5MYXllcnMuUHJvdG9jb2wuUmVzcG9uc2U9T3BlbkxheWVycy5DbGFzcyh7Y29kZTpudWxsLHJlcXVlc3RUeXBlOm51bGwsbGFzdDohMCxmZWF0dXJlczpudWxsLGRhdGE6bnVsbCxyZXFGZWF0dXJlczpudWxsLHByaXY6bnVsbCxlcnJvcjpudWxsLGluaXRpYWxpemU6ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5VdGlsLmV4dGVuZCh0aGlzLGEpfSxzdWNjZXNzOmZ1bmN0aW9uKCl7cmV0dXJuIDA8dGhpcy5jb2RlfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLlByb3RvY29sLlJlc3BvbnNlIn0pOwpPcGVuTGF5ZXJzLlByb3RvY29sLlJlc3BvbnNlLlNVQ0NFU1M9MTtPcGVuTGF5ZXJzLlByb3RvY29sLlJlc3BvbnNlLkZBSUxVUkU9MDtPcGVuTGF5ZXJzLkZvcm1hdC5KU09OPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Gb3JtYXQse2luZGVudDoiICAgICIsc3BhY2U6IiAiLG5ld2xpbmU6IlxuIixsZXZlbDowLHByZXR0eTohMSxuYXRpdmVKU09OOmZ1bmN0aW9uKCl7cmV0dXJuISghd2luZG93LkpTT058fCJmdW5jdGlvbiIhPXR5cGVvZiBKU09OLnBhcnNlfHwiZnVuY3Rpb24iIT10eXBlb2YgSlNPTi5zdHJpbmdpZnkpfSgpLHJlYWQ6ZnVuY3Rpb24oYSxiKXt2YXIgYztpZih0aGlzLm5hdGl2ZUpTT04pYz1KU09OLnBhcnNlKGEsYik7ZWxzZSB0cnl7aWYoL15bXF0sOnt9XHNdKiQvLnRlc3QoYS5yZXBsYWNlKC9cXFsiXFxcL2JmbnJ0dV0vZywiQCIpLnJlcGxhY2UoLyJbXiJcXFxuXHJdKiJ8dHJ1ZXxmYWxzZXxudWxsfC0/XGQrKD86XC5cZCopPyg/OltlRV1bK1wtXT9cZCspPy9nLCJdIikucmVwbGFjZSgvKD86Xnw6fCwpKD86XHMqXFspKy9nLCIiKSkmJihjPWV2YWwoIigiK2ErIikiKSwiZnVuY3Rpb24iPT09CnR5cGVvZiBiKSl7dmFyIGQ9ZnVuY3Rpb24oYSxjKXtpZihjJiYib2JqZWN0Ij09PXR5cGVvZiBjKWZvcih2YXIgZSBpbiBjKWMuaGFzT3duUHJvcGVydHkoZSkmJihjW2VdPWQoZSxjW2VdKSk7cmV0dXJuIGIoYSxjKX07Yz1kKCIiLGMpfX1jYXRjaChlKXt9dGhpcy5rZWVwRGF0YSYmKHRoaXMuZGF0YT1jKTtyZXR1cm4gY30sd3JpdGU6ZnVuY3Rpb24oYSxiKXt0aGlzLnByZXR0eT0hIWI7dmFyIGM9bnVsbCxkPXR5cGVvZiBhO2lmKHRoaXMuc2VyaWFsaXplW2RdKXRyeXtjPSF0aGlzLnByZXR0eSYmdGhpcy5uYXRpdmVKU09OP0pTT04uc3RyaW5naWZ5KGEpOnRoaXMuc2VyaWFsaXplW2RdLmFwcGx5KHRoaXMsW2FdKX1jYXRjaChlKXtPcGVuTGF5ZXJzLkNvbnNvbGUuZXJyb3IoIlRyb3VibGUgc2VyaWFsaXppbmc6ICIrZSl9cmV0dXJuIGN9LHdyaXRlSW5kZW50OmZ1bmN0aW9uKCl7dmFyIGE9W107aWYodGhpcy5wcmV0dHkpZm9yKHZhciBiPTA7Yjx0aGlzLmxldmVsOysrYilhLnB1c2godGhpcy5pbmRlbnQpOwpyZXR1cm4gYS5qb2luKCIiKX0sd3JpdGVOZXdsaW5lOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHJldHR5P3RoaXMubmV3bGluZToiIn0sd3JpdGVTcGFjZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnByZXR0eT90aGlzLnNwYWNlOiIifSxzZXJpYWxpemU6e29iamVjdDpmdW5jdGlvbihhKXtpZihudWxsPT1hKXJldHVybiJudWxsIjtpZihhLmNvbnN0cnVjdG9yPT1EYXRlKXJldHVybiB0aGlzLnNlcmlhbGl6ZS5kYXRlLmFwcGx5KHRoaXMsW2FdKTtpZihhLmNvbnN0cnVjdG9yPT1BcnJheSlyZXR1cm4gdGhpcy5zZXJpYWxpemUuYXJyYXkuYXBwbHkodGhpcyxbYV0pO3ZhciBiPVsieyJdO3RoaXMubGV2ZWwrPTE7dmFyIGMsZCxlLGY9ITE7Zm9yKGMgaW4gYSlhLmhhc093blByb3BlcnR5KGMpJiYoZD1PcGVuTGF5ZXJzLkZvcm1hdC5KU09OLnByb3RvdHlwZS53cml0ZS5hcHBseSh0aGlzLFtjLHRoaXMucHJldHR5XSksZT1PcGVuTGF5ZXJzLkZvcm1hdC5KU09OLnByb3RvdHlwZS53cml0ZS5hcHBseSh0aGlzLApbYVtjXSx0aGlzLnByZXR0eV0pLG51bGwhPWQmJm51bGwhPWUmJihmJiZiLnB1c2goIiwiKSxiLnB1c2godGhpcy53cml0ZU5ld2xpbmUoKSx0aGlzLndyaXRlSW5kZW50KCksZCwiOiIsdGhpcy53cml0ZVNwYWNlKCksZSksZj0hMCkpO3RoaXMubGV2ZWwtPTE7Yi5wdXNoKHRoaXMud3JpdGVOZXdsaW5lKCksdGhpcy53cml0ZUluZGVudCgpLCJ9Iik7cmV0dXJuIGIuam9pbigiIil9LGFycmF5OmZ1bmN0aW9uKGEpe3ZhciBiLGM9WyJbIl07dGhpcy5sZXZlbCs9MTtmb3IodmFyIGQ9MCxlPWEubGVuZ3RoO2Q8ZTsrK2QpYj1PcGVuTGF5ZXJzLkZvcm1hdC5KU09OLnByb3RvdHlwZS53cml0ZS5hcHBseSh0aGlzLFthW2RdLHRoaXMucHJldHR5XSksbnVsbCE9YiYmKDA8ZCYmYy5wdXNoKCIsIiksYy5wdXNoKHRoaXMud3JpdGVOZXdsaW5lKCksdGhpcy53cml0ZUluZGVudCgpLGIpKTt0aGlzLmxldmVsLT0xO2MucHVzaCh0aGlzLndyaXRlTmV3bGluZSgpLHRoaXMud3JpdGVJbmRlbnQoKSwKIl0iKTtyZXR1cm4gYy5qb2luKCIiKX0sc3RyaW5nOmZ1bmN0aW9uKGEpe3ZhciBiPXsiXGIiOiJcXGIiLCJcdCI6IlxcdCIsIlxuIjoiXFxuIiwiXGYiOiJcXGYiLCJcciI6IlxcciIsJyInOidcXCInLCJcXCI6IlxcXFwifTtyZXR1cm4vWyJcXFx4MDAtXHgxZl0vLnRlc3QoYSk/JyInK2EucmVwbGFjZSgvKFtceDAwLVx4MWZcXCJdKS9nLGZ1bmN0aW9uKGEsZCl7dmFyIGU9YltkXTtpZihlKXJldHVybiBlO2U9ZC5jaGFyQ29kZUF0KCk7cmV0dXJuIlxcdTAwIitNYXRoLmZsb29yKGUvMTYpLnRvU3RyaW5nKDE2KSsoZSUxNikudG9TdHJpbmcoMTYpfSkrJyInOiciJythKyciJ30sbnVtYmVyOmZ1bmN0aW9uKGEpe3JldHVybiBpc0Zpbml0ZShhKT9TdHJpbmcoYSk6Im51bGwifSwiYm9vbGVhbiI6ZnVuY3Rpb24oYSl7cmV0dXJuIFN0cmluZyhhKX0sZGF0ZTpmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEpe3JldHVybiAxMD5hPyIwIithOmF9cmV0dXJuJyInK2EuZ2V0RnVsbFllYXIoKSsKIi0iK2IoYS5nZXRNb250aCgpKzEpKyItIitiKGEuZ2V0RGF0ZSgpKSsiVCIrYihhLmdldEhvdXJzKCkpKyI6IitiKGEuZ2V0TWludXRlcygpKSsiOiIrYihhLmdldFNlY29uZHMoKSkrJyInfX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Gb3JtYXQuSlNPTiJ9KTtPcGVuTGF5ZXJzLkZvcm1hdC5HZW9KU09OPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Gb3JtYXQuSlNPTix7aWdub3JlRXh0cmFEaW1zOiExLHJlYWQ6ZnVuY3Rpb24oYSxiLGMpe2I9Yj9iOiJGZWF0dXJlQ29sbGVjdGlvbiI7dmFyIGQ9bnVsbCxlPW51bGwsZT0ic3RyaW5nIj09dHlwZW9mIGE/T3BlbkxheWVycy5Gb3JtYXQuSlNPTi5wcm90b3R5cGUucmVhZC5hcHBseSh0aGlzLFthLGNdKTphO2lmKCFlKU9wZW5MYXllcnMuQ29uc29sZS5lcnJvcigiQmFkIEpTT046ICIrYSk7ZWxzZSBpZigic3RyaW5nIiE9dHlwZW9mIGUudHlwZSlPcGVuTGF5ZXJzLkNvbnNvbGUuZXJyb3IoIkJhZCBHZW9KU09OIC0gbm8gdHlwZTogIithKTtlbHNlIGlmKHRoaXMuaXNWYWxpZFR5cGUoZSxiKSlzd2l0Y2goYil7Y2FzZSAiR2VvbWV0cnkiOnRyeXtkPXRoaXMucGFyc2VHZW9tZXRyeShlKX1jYXRjaChmKXtPcGVuTGF5ZXJzLkNvbnNvbGUuZXJyb3IoZil9YnJlYWs7Y2FzZSAiRmVhdHVyZSI6dHJ5e2Q9CnRoaXMucGFyc2VGZWF0dXJlKGUpLGQudHlwZT0iRmVhdHVyZSJ9Y2F0Y2goZyl7T3BlbkxheWVycy5Db25zb2xlLmVycm9yKGcpfWJyZWFrO2Nhc2UgIkZlYXR1cmVDb2xsZWN0aW9uIjpzd2l0Y2goZD1bXSxlLnR5cGUpe2Nhc2UgIkZlYXR1cmUiOnRyeXtkLnB1c2godGhpcy5wYXJzZUZlYXR1cmUoZSkpfWNhdGNoKGgpe2Q9bnVsbCxPcGVuTGF5ZXJzLkNvbnNvbGUuZXJyb3IoaCl9YnJlYWs7Y2FzZSAiRmVhdHVyZUNvbGxlY3Rpb24iOmE9MDtmb3IoYj1lLmZlYXR1cmVzLmxlbmd0aDthPGI7KythKXRyeXtkLnB1c2godGhpcy5wYXJzZUZlYXR1cmUoZS5mZWF0dXJlc1thXSkpfWNhdGNoKGspe2Q9bnVsbCxPcGVuTGF5ZXJzLkNvbnNvbGUuZXJyb3Ioayl9YnJlYWs7ZGVmYXVsdDp0cnl7dmFyIGw9dGhpcy5wYXJzZUdlb21ldHJ5KGUpO2QucHVzaChuZXcgT3BlbkxheWVycy5GZWF0dXJlLlZlY3RvcihsKSl9Y2F0Y2gobSl7ZD1udWxsLE9wZW5MYXllcnMuQ29uc29sZS5lcnJvcihtKX19fXJldHVybiBkfSwKaXNWYWxpZFR5cGU6ZnVuY3Rpb24oYSxiKXt2YXIgYz0hMTtzd2l0Y2goYil7Y2FzZSAiR2VvbWV0cnkiOi0xPT1PcGVuTGF5ZXJzLlV0aWwuaW5kZXhPZigiUG9pbnQgTXVsdGlQb2ludCBMaW5lU3RyaW5nIE11bHRpTGluZVN0cmluZyBQb2x5Z29uIE11bHRpUG9seWdvbiBCb3ggR2VvbWV0cnlDb2xsZWN0aW9uIi5zcGxpdCgiICIpLGEudHlwZSk/T3BlbkxheWVycy5Db25zb2xlLmVycm9yKCJVbnN1cHBvcnRlZCBnZW9tZXRyeSB0eXBlOiAiK2EudHlwZSk6Yz0hMDticmVhaztjYXNlICJGZWF0dXJlQ29sbGVjdGlvbiI6Yz0hMDticmVhaztkZWZhdWx0OmEudHlwZT09Yj9jPSEwOk9wZW5MYXllcnMuQ29uc29sZS5lcnJvcigiQ2Fubm90IGNvbnZlcnQgdHlwZXMgZnJvbSAiK2EudHlwZSsiIHRvICIrYil9cmV0dXJuIGN9LHBhcnNlRmVhdHVyZTpmdW5jdGlvbihhKXt2YXIgYixjLGQ7Yz1hLnByb3BlcnRpZXM/YS5wcm9wZXJ0aWVzOnt9O2Q9YS5nZW9tZXRyeSYmYS5nZW9tZXRyeS5iYm94fHwKYS5iYm94O3RyeXtiPXRoaXMucGFyc2VHZW9tZXRyeShhLmdlb21ldHJ5KX1jYXRjaChlKXt0aHJvdyBlO31iPW5ldyBPcGVuTGF5ZXJzLkZlYXR1cmUuVmVjdG9yKGIsYyk7ZCYmKGIuYm91bmRzPU9wZW5MYXllcnMuQm91bmRzLmZyb21BcnJheShkKSk7YS5pZCYmKGIuZmlkPWEuaWQpO3JldHVybiBifSxwYXJzZUdlb21ldHJ5OmZ1bmN0aW9uKGEpe2lmKG51bGw9PWEpcmV0dXJuIG51bGw7dmFyIGIsYz0hMTtpZigiR2VvbWV0cnlDb2xsZWN0aW9uIj09YS50eXBlKXtpZighT3BlbkxheWVycy5VdGlsLmlzQXJyYXkoYS5nZW9tZXRyaWVzKSl0aHJvdyJHZW9tZXRyeUNvbGxlY3Rpb24gbXVzdCBoYXZlIGdlb21ldHJpZXMgYXJyYXk6ICIrYTtiPWEuZ2VvbWV0cmllcy5sZW5ndGg7Zm9yKHZhciBjPUFycmF5KGIpLGQ9MDtkPGI7KytkKWNbZF09dGhpcy5wYXJzZUdlb21ldHJ5LmFwcGx5KHRoaXMsW2EuZ2VvbWV0cmllc1tkXV0pO2I9bmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuQ29sbGVjdGlvbihjKTsKYz0hMH1lbHNle2lmKCFPcGVuTGF5ZXJzLlV0aWwuaXNBcnJheShhLmNvb3JkaW5hdGVzKSl0aHJvdyJHZW9tZXRyeSBtdXN0IGhhdmUgY29vcmRpbmF0ZXMgYXJyYXk6ICIrYTtpZighdGhpcy5wYXJzZUNvb3Jkc1thLnR5cGUudG9Mb3dlckNhc2UoKV0pdGhyb3ciVW5zdXBwb3J0ZWQgZ2VvbWV0cnkgdHlwZTogIithLnR5cGU7dHJ5e2I9dGhpcy5wYXJzZUNvb3Jkc1thLnR5cGUudG9Mb3dlckNhc2UoKV0uYXBwbHkodGhpcyxbYS5jb29yZGluYXRlc10pfWNhdGNoKGUpe3Rocm93IGU7fX10aGlzLmludGVybmFsUHJvamVjdGlvbiYmKHRoaXMuZXh0ZXJuYWxQcm9qZWN0aW9uJiYhYykmJmIudHJhbnNmb3JtKHRoaXMuZXh0ZXJuYWxQcm9qZWN0aW9uLHRoaXMuaW50ZXJuYWxQcm9qZWN0aW9uKTtyZXR1cm4gYn0scGFyc2VDb29yZHM6e3BvaW50OmZ1bmN0aW9uKGEpe2lmKCExPT10aGlzLmlnbm9yZUV4dHJhRGltcyYmMiE9YS5sZW5ndGgpdGhyb3ciT25seSAyRCBwb2ludHMgYXJlIHN1cHBvcnRlZDogIisKYTtyZXR1cm4gbmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoYVswXSxhWzFdKX0sbXVsdGlwb2ludDpmdW5jdGlvbihhKXtmb3IodmFyIGI9W10sYz1udWxsLGQ9MCxlPWEubGVuZ3RoO2Q8ZTsrK2Qpe3RyeXtjPXRoaXMucGFyc2VDb29yZHMucG9pbnQuYXBwbHkodGhpcyxbYVtkXV0pfWNhdGNoKGYpe3Rocm93IGY7fWIucHVzaChjKX1yZXR1cm4gbmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuTXVsdGlQb2ludChiKX0sbGluZXN0cmluZzpmdW5jdGlvbihhKXtmb3IodmFyIGI9W10sYz1udWxsLGQ9MCxlPWEubGVuZ3RoO2Q8ZTsrK2Qpe3RyeXtjPXRoaXMucGFyc2VDb29yZHMucG9pbnQuYXBwbHkodGhpcyxbYVtkXV0pfWNhdGNoKGYpe3Rocm93IGY7fWIucHVzaChjKX1yZXR1cm4gbmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuTGluZVN0cmluZyhiKX0sbXVsdGlsaW5lc3RyaW5nOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1bXSxjPW51bGwsZD0wLGU9YS5sZW5ndGg7ZDxlOysrZCl7dHJ5e2M9CnRoaXMucGFyc2VDb29yZHMubGluZXN0cmluZy5hcHBseSh0aGlzLFthW2RdXSl9Y2F0Y2goZil7dGhyb3cgZjt9Yi5wdXNoKGMpfXJldHVybiBuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5NdWx0aUxpbmVTdHJpbmcoYil9LHBvbHlnb246ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPVtdLGMsZCxlPTAsZj1hLmxlbmd0aDtlPGY7KytlKXt0cnl7ZD10aGlzLnBhcnNlQ29vcmRzLmxpbmVzdHJpbmcuYXBwbHkodGhpcyxbYVtlXV0pfWNhdGNoKGcpe3Rocm93IGc7fWM9bmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuTGluZWFyUmluZyhkLmNvbXBvbmVudHMpO2IucHVzaChjKX1yZXR1cm4gbmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9seWdvbihiKX0sbXVsdGlwb2x5Z29uOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1bXSxjPW51bGwsZD0wLGU9YS5sZW5ndGg7ZDxlOysrZCl7dHJ5e2M9dGhpcy5wYXJzZUNvb3Jkcy5wb2x5Z29uLmFwcGx5KHRoaXMsW2FbZF1dKX1jYXRjaChmKXt0aHJvdyBmO31iLnB1c2goYyl9cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5Lk11bHRpUG9seWdvbihiKX0sCmJveDpmdW5jdGlvbihhKXtpZigyIT1hLmxlbmd0aCl0aHJvdyJHZW9KU09OIGJveCBjb29yZGluYXRlcyBtdXN0IGhhdmUgMiBlbGVtZW50cyI7cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvbHlnb24oW25ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LkxpbmVhclJpbmcoW25ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KGFbMF1bMF0sYVswXVsxXSksbmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoYVsxXVswXSxhWzBdWzFdKSxuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludChhWzFdWzBdLGFbMV1bMV0pLG5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KGFbMF1bMF0sYVsxXVsxXSksbmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoYVswXVswXSxhWzBdWzFdKV0pXSl9fSx3cml0ZTpmdW5jdGlvbihhLGIpe3ZhciBjPXt0eXBlOm51bGx9O2lmKE9wZW5MYXllcnMuVXRpbC5pc0FycmF5KGEpKXtjLnR5cGU9IkZlYXR1cmVDb2xsZWN0aW9uIjt2YXIgZD0KYS5sZW5ndGg7Yy5mZWF0dXJlcz1BcnJheShkKTtmb3IodmFyIGU9MDtlPGQ7KytlKXt2YXIgZj1hW2VdO2lmKCFmIGluc3RhbmNlb2YgT3BlbkxheWVycy5GZWF0dXJlLlZlY3Rvcil0aHJvdyJGZWF0dXJlQ29sbGVjdGlvbiBvbmx5IHN1cHBvcnRzIGNvbGxlY3Rpb25zIG9mIGZlYXR1cmVzOiAiK2Y7Yy5mZWF0dXJlc1tlXT10aGlzLmV4dHJhY3QuZmVhdHVyZS5hcHBseSh0aGlzLFtmXSl9fWVsc2UgMD09YS5DTEFTU19OQU1FLmluZGV4T2YoIk9wZW5MYXllcnMuR2VvbWV0cnkiKT9jPXRoaXMuZXh0cmFjdC5nZW9tZXRyeS5hcHBseSh0aGlzLFthXSk6YSBpbnN0YW5jZW9mIE9wZW5MYXllcnMuRmVhdHVyZS5WZWN0b3ImJihjPXRoaXMuZXh0cmFjdC5mZWF0dXJlLmFwcGx5KHRoaXMsW2FdKSxhLmxheWVyJiZhLmxheWVyLnByb2plY3Rpb24mJihjLmNycz10aGlzLmNyZWF0ZUNSU09iamVjdChhKSkpO3JldHVybiBPcGVuTGF5ZXJzLkZvcm1hdC5KU09OLnByb3RvdHlwZS53cml0ZS5hcHBseSh0aGlzLApbYyxiXSl9LGNyZWF0ZUNSU09iamVjdDpmdW5jdGlvbihhKXthPWEubGF5ZXIucHJvamVjdGlvbi50b1N0cmluZygpO3ZhciBiPXt9O2EubWF0Y2goL2Vwc2c6L2kpJiYoYT1wYXJzZUludChhLnN1YnN0cmluZyhhLmluZGV4T2YoIjoiKSsxKSksYj00MzI2PT1hP3t0eXBlOiJuYW1lIixwcm9wZXJ0aWVzOntuYW1lOiJ1cm46b2djOmRlZjpjcnM6T0dDOjEuMzpDUlM4NCJ9fTp7dHlwZToibmFtZSIscHJvcGVydGllczp7bmFtZToiRVBTRzoiK2F9fSk7cmV0dXJuIGJ9LGV4dHJhY3Q6e2ZlYXR1cmU6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5leHRyYWN0Lmdlb21ldHJ5LmFwcGx5KHRoaXMsW2EuZ2VvbWV0cnldKSxiPXt0eXBlOiJGZWF0dXJlIixwcm9wZXJ0aWVzOmEuYXR0cmlidXRlcyxnZW9tZXRyeTpifTtudWxsIT1hLmZpZCYmKGIuaWQ9YS5maWQpO3JldHVybiBifSxnZW9tZXRyeTpmdW5jdGlvbihhKXtpZihudWxsPT1hKXJldHVybiBudWxsO3RoaXMuaW50ZXJuYWxQcm9qZWN0aW9uJiYKdGhpcy5leHRlcm5hbFByb2plY3Rpb24mJihhPWEuY2xvbmUoKSxhLnRyYW5zZm9ybSh0aGlzLmludGVybmFsUHJvamVjdGlvbix0aGlzLmV4dGVybmFsUHJvamVjdGlvbikpO3ZhciBiPWEuQ0xBU1NfTkFNRS5zcGxpdCgiLiIpWzJdO2E9dGhpcy5leHRyYWN0W2IudG9Mb3dlckNhc2UoKV0uYXBwbHkodGhpcyxbYV0pO3JldHVybiJDb2xsZWN0aW9uIj09Yj97dHlwZToiR2VvbWV0cnlDb2xsZWN0aW9uIixnZW9tZXRyaWVzOmF9Ont0eXBlOmIsY29vcmRpbmF0ZXM6YX19LHBvaW50OmZ1bmN0aW9uKGEpe3JldHVyblthLngsYS55XX0sbXVsdGlwb2ludDpmdW5jdGlvbihhKXtmb3IodmFyIGI9W10sYz0wLGQ9YS5jb21wb25lbnRzLmxlbmd0aDtjPGQ7KytjKWIucHVzaCh0aGlzLmV4dHJhY3QucG9pbnQuYXBwbHkodGhpcyxbYS5jb21wb25lbnRzW2NdXSkpO3JldHVybiBifSxsaW5lc3RyaW5nOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1bXSxjPTAsZD1hLmNvbXBvbmVudHMubGVuZ3RoO2M8CmQ7KytjKWIucHVzaCh0aGlzLmV4dHJhY3QucG9pbnQuYXBwbHkodGhpcyxbYS5jb21wb25lbnRzW2NdXSkpO3JldHVybiBifSxtdWx0aWxpbmVzdHJpbmc6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPVtdLGM9MCxkPWEuY29tcG9uZW50cy5sZW5ndGg7YzxkOysrYyliLnB1c2godGhpcy5leHRyYWN0LmxpbmVzdHJpbmcuYXBwbHkodGhpcyxbYS5jb21wb25lbnRzW2NdXSkpO3JldHVybiBifSxwb2x5Z29uOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1bXSxjPTAsZD1hLmNvbXBvbmVudHMubGVuZ3RoO2M8ZDsrK2MpYi5wdXNoKHRoaXMuZXh0cmFjdC5saW5lc3RyaW5nLmFwcGx5KHRoaXMsW2EuY29tcG9uZW50c1tjXV0pKTtyZXR1cm4gYn0sbXVsdGlwb2x5Z29uOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1bXSxjPTAsZD1hLmNvbXBvbmVudHMubGVuZ3RoO2M8ZDsrK2MpYi5wdXNoKHRoaXMuZXh0cmFjdC5wb2x5Z29uLmFwcGx5KHRoaXMsW2EuY29tcG9uZW50c1tjXV0pKTtyZXR1cm4gYn0sY29sbGVjdGlvbjpmdW5jdGlvbihhKXtmb3IodmFyIGI9CmEuY29tcG9uZW50cy5sZW5ndGgsYz1BcnJheShiKSxkPTA7ZDxiOysrZCljW2RdPXRoaXMuZXh0cmFjdC5nZW9tZXRyeS5hcHBseSh0aGlzLFthLmNvbXBvbmVudHNbZF1dKTtyZXR1cm4gY319LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuRm9ybWF0Lkdlb0pTT04ifSk7T3BlbkxheWVycy5Qcm90b2NvbC5TY3JpcHQ9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLlByb3RvY29sLHt1cmw6bnVsbCxwYXJhbXM6bnVsbCxjYWxsYmFjazpudWxsLGNhbGxiYWNrVGVtcGxhdGU6Ik9wZW5MYXllcnMuUHJvdG9jb2wuU2NyaXB0LnJlZ2lzdHJ5LiR7aWR9IixjYWxsYmFja0tleToiY2FsbGJhY2siLGNhbGxiYWNrUHJlZml4OiIiLHNjb3BlOm51bGwsZm9ybWF0Om51bGwscGVuZGluZ1JlcXVlc3RzOm51bGwsc3JzSW5CQk9YOiExLGluaXRpYWxpemU6ZnVuY3Rpb24oYSl7YT1hfHx7fTt0aGlzLnBhcmFtcz17fTt0aGlzLnBlbmRpbmdSZXF1ZXN0cz17fTtPcGVuTGF5ZXJzLlByb3RvY29sLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLmZvcm1hdHx8KHRoaXMuZm9ybWF0PW5ldyBPcGVuTGF5ZXJzLkZvcm1hdC5HZW9KU09OKTtpZighdGhpcy5maWx0ZXJUb1BhcmFtcyYmT3BlbkxheWVycy5Gb3JtYXQuUXVlcnlTdHJpbmdGaWx0ZXIpe3ZhciBiPQpuZXcgT3BlbkxheWVycy5Gb3JtYXQuUXVlcnlTdHJpbmdGaWx0ZXIoe3Nyc0luQkJPWDp0aGlzLnNyc0luQkJPWH0pO3RoaXMuZmlsdGVyVG9QYXJhbXM9ZnVuY3Rpb24oYSxkKXtyZXR1cm4gYi53cml0ZShhLGQpfX19LHJlYWQ6ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5Qcm90b2NvbC5wcm90b3R5cGUucmVhZC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7YT1PcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyhhLHRoaXMub3B0aW9ucyk7YS5wYXJhbXM9T3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoYS5wYXJhbXMsdGhpcy5vcHRpb25zLnBhcmFtcyk7YS5maWx0ZXImJnRoaXMuZmlsdGVyVG9QYXJhbXMmJihhLnBhcmFtcz10aGlzLmZpbHRlclRvUGFyYW1zKGEuZmlsdGVyLGEucGFyYW1zKSk7dmFyIGI9bmV3IE9wZW5MYXllcnMuUHJvdG9jb2wuUmVzcG9uc2Uoe3JlcXVlc3RUeXBlOiJyZWFkIn0pLGM9dGhpcy5jcmVhdGVSZXF1ZXN0KGEudXJsLGEucGFyYW1zLE9wZW5MYXllcnMuRnVuY3Rpb24uYmluZChmdW5jdGlvbihjKXtiLmRhdGE9CmM7dGhpcy5oYW5kbGVSZWFkKGIsYSl9LHRoaXMpKTtiLnByaXY9YztyZXR1cm4gYn0sY3JlYXRlUmVxdWVzdDpmdW5jdGlvbihhLGIsYyl7Yz1PcGVuTGF5ZXJzLlByb3RvY29sLlNjcmlwdC5yZWdpc3RlcihjKTt2YXIgZD1PcGVuTGF5ZXJzLlN0cmluZy5mb3JtYXQodGhpcy5jYWxsYmFja1RlbXBsYXRlLHtpZDpjfSk7Yj1PcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHt9LGIpO2JbdGhpcy5jYWxsYmFja0tleV09dGhpcy5jYWxsYmFja1ByZWZpeCtkO2E9T3BlbkxheWVycy5VdGlsLnVybEFwcGVuZChhLE9wZW5MYXllcnMuVXRpbC5nZXRQYXJhbWV0ZXJTdHJpbmcoYikpO2I9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic2NyaXB0Iik7Yi50eXBlPSJ0ZXh0L2phdmFzY3JpcHQiO2Iuc3JjPWE7Yi5pZD0iT3BlbkxheWVyc19Qcm90b2NvbF9TY3JpcHRfIitjO3RoaXMucGVuZGluZ1JlcXVlc3RzW2IuaWRdPWI7ZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImhlYWQiKVswXS5hcHBlbmRDaGlsZChiKTsKcmV0dXJuIGJ9LGRlc3Ryb3lSZXF1ZXN0OmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuUHJvdG9jb2wuU2NyaXB0LnVucmVnaXN0ZXIoYS5pZC5zcGxpdCgiXyIpLnBvcCgpKTtkZWxldGUgdGhpcy5wZW5kaW5nUmVxdWVzdHNbYS5pZF07YS5wYXJlbnROb2RlJiZhLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYSl9LGhhbmRsZVJlYWQ6ZnVuY3Rpb24oYSxiKXt0aGlzLmhhbmRsZVJlc3BvbnNlKGEsYil9LGhhbmRsZVJlc3BvbnNlOmZ1bmN0aW9uKGEsYil7Yi5jYWxsYmFjayYmKGEuZGF0YT8oYS5mZWF0dXJlcz10aGlzLnBhcnNlRmVhdHVyZXMoYS5kYXRhKSxhLmNvZGU9T3BlbkxheWVycy5Qcm90b2NvbC5SZXNwb25zZS5TVUNDRVNTKTphLmNvZGU9T3BlbkxheWVycy5Qcm90b2NvbC5SZXNwb25zZS5GQUlMVVJFLHRoaXMuZGVzdHJveVJlcXVlc3QoYS5wcml2KSxiLmNhbGxiYWNrLmNhbGwoYi5zY29wZSxhKSl9LHBhcnNlRmVhdHVyZXM6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZm9ybWF0LnJlYWQoYSl9LAphYm9ydDpmdW5jdGlvbihhKXtpZihhKXRoaXMuZGVzdHJveVJlcXVlc3QoYS5wcml2KTtlbHNlIGZvcih2YXIgYiBpbiB0aGlzLnBlbmRpbmdSZXF1ZXN0cyl0aGlzLmRlc3Ryb3lSZXF1ZXN0KHRoaXMucGVuZGluZ1JlcXVlc3RzW2JdKX0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuYWJvcnQoKTtkZWxldGUgdGhpcy5wYXJhbXM7ZGVsZXRlIHRoaXMuZm9ybWF0O09wZW5MYXllcnMuUHJvdG9jb2wucHJvdG90eXBlLmRlc3Ryb3kuYXBwbHkodGhpcyl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuUHJvdG9jb2wuU2NyaXB0In0pOyhmdW5jdGlvbigpe3ZhciBhPU9wZW5MYXllcnMuUHJvdG9jb2wuU2NyaXB0LGI9MDthLnJlZ2lzdHJ5PXt9O2EucmVnaXN0ZXI9ZnVuY3Rpb24oYyl7dmFyIGQ9ImMiKyArK2I7YS5yZWdpc3RyeVtkXT1mdW5jdGlvbigpe2MuYXBwbHkodGhpcyxhcmd1bWVudHMpfTtyZXR1cm4gZH07YS51bnJlZ2lzdGVyPWZ1bmN0aW9uKGIpe2RlbGV0ZSBhLnJlZ2lzdHJ5W2JdfX0pKCk7T3BlbkxheWVycy5Gb3JtYXQuRW5jb2RlZFBvbHlsaW5lPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Gb3JtYXQse2dlb21ldHJ5VHlwZToibGluZXN0cmluZyIsaW5pdGlhbGl6ZTpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLkZvcm1hdC5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLFthXSl9LHJlYWQ6ZnVuY3Rpb24oYSl7dmFyIGI7aWYoImxpbmVzdHJpbmciPT10aGlzLmdlb21ldHJ5VHlwZSliPU9wZW5MYXllcnMuR2VvbWV0cnkuTGluZVN0cmluZztlbHNlIGlmKCJsaW5lYXJyaW5nIj09dGhpcy5nZW9tZXRyeVR5cGUpYj1PcGVuTGF5ZXJzLkdlb21ldHJ5LkxpbmVhclJpbmc7ZWxzZSBpZigibXVsdGlwb2ludCI9PXRoaXMuZ2VvbWV0cnlUeXBlKWI9T3BlbkxheWVycy5HZW9tZXRyeS5NdWx0aVBvaW50O2Vsc2UgaWYoInBvaW50IiE9dGhpcy5nZW9tZXRyeVR5cGUmJiJwb2x5Z29uIiE9dGhpcy5nZW9tZXRyeVR5cGUpcmV0dXJuIG51bGw7YT10aGlzLmRlY29kZURlbHRhcyhhLAoyKTtmb3IodmFyIGM9YS5sZW5ndGgsZD1bXSxlPTA7ZSsxPGM7KXt2YXIgZj1hW2UrK10sZz1hW2UrK107ZC5wdXNoKG5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KGcsZikpfXJldHVybiJwb2ludCI9PXRoaXMuZ2VvbWV0cnlUeXBlP25ldyBPcGVuTGF5ZXJzLkZlYXR1cmUuVmVjdG9yKGRbMF0pOiJwb2x5Z29uIj09dGhpcy5nZW9tZXRyeVR5cGU/bmV3IE9wZW5MYXllcnMuRmVhdHVyZS5WZWN0b3IobmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9seWdvbihbbmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuTGluZWFyUmluZyhkKV0pKTpuZXcgT3BlbkxheWVycy5GZWF0dXJlLlZlY3RvcihuZXcgYihkKSl9LGRlY29kZTpmdW5jdGlvbihhLGIsYyl7YT10aGlzLmRlY29kZURlbHRhcyhhLGIsY3x8MUU1KTtjPWEubGVuZ3RoO2Zvcih2YXIgZD1bXSxlPTA7ZSsoYi0xKTxjOyl7Zm9yKHZhciBmPVtdLGc9MDtnPGI7KytnKWYucHVzaChhW2UrK10pO2QucHVzaChmKX1yZXR1cm4gZH0sCndyaXRlOmZ1bmN0aW9uKGEpe2E9KGEuY29uc3RydWN0b3I9PUFycmF5P2FbMF06YSkuZ2VvbWV0cnk7dmFyIGI9YS5DTEFTU19OQU1FLnNwbGl0KCIuIilbMl0udG9Mb3dlckNhc2UoKTtpZigicG9pbnQiPT1iKWE9QXJyYXkoYSk7ZWxzZSBpZigibGluZXN0cmluZyI9PWJ8fCJsaW5lYXJyaW5nIj09Ynx8Im11bHRpcG9pbnQiPT1iKWE9YS5jb21wb25lbnRzO2Vsc2UgaWYoInBvbHlnb24iPT1iKWE9YS5jb21wb25lbnRzWzBdLmNvbXBvbmVudHM7ZWxzZSByZXR1cm4gbnVsbDtmb3IodmFyIGI9W10sYz1hLmxlbmd0aCxkPTA7ZDxjOysrZCl7dmFyIGU9YVtkXTtiLnB1c2goZS55KTtiLnB1c2goZS54KX1yZXR1cm4gdGhpcy5lbmNvZGVEZWx0YXMoYiwyKX0sZW5jb2RlOmZ1bmN0aW9uKGEsYixjKXtjPWN8fDFFNTtmb3IodmFyIGQ9W10sZT1hLmxlbmd0aCxmPTA7ZjxlOysrZilmb3IodmFyIGc9YVtmXSxoPTA7aDxiOysraClkLnB1c2goZ1toXSk7cmV0dXJuIHRoaXMuZW5jb2RlRGVsdGFzKGQsCmIsYyl9LGVuY29kZURlbHRhczpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZT1BcnJheShiKTtmb3IoZD0wO2Q8YjsrK2QpZVtkXT0wO2Zvcih2YXIgZj1hLmxlbmd0aCxnPTA7ZzxmOylmb3IoZD0wO2Q8YjsrK2QsKytnKXt2YXIgaD1hW2ddLGs9aC1lW2RdO2VbZF09aDthW2ddPWt9cmV0dXJuIHRoaXMuZW5jb2RlRmxvYXRzKGEsY3x8MUU1KX0sZGVjb2RlRGVsdGFzOmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlPUFycmF5KGIpO2ZvcihkPTA7ZDxiOysrZCllW2RdPTA7YT10aGlzLmRlY29kZUZsb2F0cyhhLGN8fDFFNSk7Yz1hLmxlbmd0aDtmb3IodmFyIGY9MDtmPGM7KWZvcihkPTA7ZDxiOysrZCwrK2YpZVtkXSs9YVtmXSxhW2ZdPWVbZF07cmV0dXJuIGF9LGVuY29kZUZsb2F0czpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz1ifHwxRTUsZD1hLmxlbmd0aCxlPTA7ZTxkOysrZSlhW2VdPU1hdGgucm91bmQoYVtlXSpjKTtyZXR1cm4gdGhpcy5lbmNvZGVTaWduZWRJbnRlZ2VycyhhKX0sZGVjb2RlRmxvYXRzOmZ1bmN0aW9uKGEsCmIpe2Zvcih2YXIgYz1ifHwxRTUsZD10aGlzLmRlY29kZVNpZ25lZEludGVnZXJzKGEpLGU9ZC5sZW5ndGgsZj0wO2Y8ZTsrK2YpZFtmXS89YztyZXR1cm4gZH0sZW5jb2RlU2lnbmVkSW50ZWdlcnM6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPWEubGVuZ3RoLGM9MDtjPGI7KytjKXt2YXIgZD1hW2NdLGU9ZDw8MTswPmQmJihlPX5lKTthW2NdPWV9cmV0dXJuIHRoaXMuZW5jb2RlVW5zaWduZWRJbnRlZ2VycyhhKX0sZGVjb2RlU2lnbmVkSW50ZWdlcnM6ZnVuY3Rpb24oYSl7YT10aGlzLmRlY29kZVVuc2lnbmVkSW50ZWdlcnMoYSk7Zm9yKHZhciBiPWEubGVuZ3RoLGM9MDtjPGI7KytjKXt2YXIgZD1hW2NdO2FbY109ZCYxP34oZD4+MSk6ZD4+MX1yZXR1cm4gYX0sZW5jb2RlVW5zaWduZWRJbnRlZ2VyczpmdW5jdGlvbihhKXtmb3IodmFyIGI9IiIsYz1hLmxlbmd0aCxkPTA7ZDxjOysrZCliKz10aGlzLmVuY29kZVVuc2lnbmVkSW50ZWdlcihhW2RdKTtyZXR1cm4gYn0sZGVjb2RlVW5zaWduZWRJbnRlZ2VyczpmdW5jdGlvbihhKXtmb3IodmFyIGI9CltdLGM9MCxkPTAsZT1hLmxlbmd0aCxmPTA7ZjxlOysrZil7dmFyIGc9YS5jaGFyQ29kZUF0KGYpLTYzLGM9Y3woZyYzMSk8PGQ7MzI+Zz8oYi5wdXNoKGMpLGQ9Yz0wKTpkKz01fXJldHVybiBifSxlbmNvZGVGbG9hdDpmdW5jdGlvbihhLGIpe2E9TWF0aC5yb3VuZChhKihifHwxRTUpKTtyZXR1cm4gdGhpcy5lbmNvZGVTaWduZWRJbnRlZ2VyKGEpfSxkZWNvZGVGbG9hdDpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLmRlY29kZVNpZ25lZEludGVnZXIoYSkvKGJ8fDFFNSl9LGVuY29kZVNpZ25lZEludGVnZXI6ZnVuY3Rpb24oYSl7dmFyIGI9YTw8MTswPmEmJihiPX5iKTtyZXR1cm4gdGhpcy5lbmNvZGVVbnNpZ25lZEludGVnZXIoYil9LGRlY29kZVNpZ25lZEludGVnZXI6ZnVuY3Rpb24oYSl7YT10aGlzLmRlY29kZVVuc2lnbmVkSW50ZWdlcihhKTtyZXR1cm4gYSYxP34oYT4+MSk6YT4+MX0sZW5jb2RlVW5zaWduZWRJbnRlZ2VyOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYixjPSIiOzMyPD0KYTspYj0oMzJ8YSYzMSkrNjMsYys9U3RyaW5nLmZyb21DaGFyQ29kZShiKSxhPj49NTtyZXR1cm4gYys9U3RyaW5nLmZyb21DaGFyQ29kZShhKzYzKX0sZGVjb2RlVW5zaWduZWRJbnRlZ2VyOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0wLGM9MCxkPWEubGVuZ3RoLGU9MDtlPGQ7KytlKXt2YXIgZj1hLmNoYXJDb2RlQXQoZSktNjMsYj1ifChmJjMxKTw8YztpZigzMj5mKWJyZWFrO2MrPTV9cmV0dXJuIGJ9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuRm9ybWF0LkVuY29kZWRQb2x5bGluZSJ9KTtPcGVuTGF5ZXJzLkNvbnRyb2wuUGFuZWw9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkNvbnRyb2wse2NvbnRyb2xzOm51bGwsYXV0b0FjdGl2YXRlOiEwLGRlZmF1bHRDb250cm9sOm51bGwsc2F2ZVN0YXRlOiExLGFsbG93RGVwcmVzczohMSxhY3RpdmVTdGF0ZTpudWxsLGluaXRpYWxpemU6ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5Db250cm9sLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsW2FdKTt0aGlzLmNvbnRyb2xzPVtdO3RoaXMuYWN0aXZlU3RhdGU9e319LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLm1hcCYmdGhpcy5tYXAuZXZlbnRzLnVucmVnaXN0ZXIoImJ1dHRvbmNsaWNrIix0aGlzLHRoaXMub25CdXR0b25DbGljayk7T3BlbkxheWVycy5Db250cm9sLnByb3RvdHlwZS5kZXN0cm95LmFwcGx5KHRoaXMsYXJndW1lbnRzKTtmb3IodmFyIGEsYj10aGlzLmNvbnRyb2xzLmxlbmd0aC0xOzA8PWI7Yi0tKWE9dGhpcy5jb250cm9sc1tiXSxhLmV2ZW50cyYmCmEuZXZlbnRzLnVuKHthY3RpdmF0ZTp0aGlzLmljb25PbixkZWFjdGl2YXRlOnRoaXMuaWNvbk9mZn0pLGEucGFuZWxfZGl2PW51bGw7dGhpcy5hY3RpdmVTdGF0ZT1udWxsfSxhY3RpdmF0ZTpmdW5jdGlvbigpe2lmKE9wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuYWN0aXZhdGUuYXBwbHkodGhpcyxhcmd1bWVudHMpKXtmb3IodmFyIGEsYj0wLGM9dGhpcy5jb250cm9scy5sZW5ndGg7YjxjO2IrKylhPXRoaXMuY29udHJvbHNbYl0sKGE9PT10aGlzLmRlZmF1bHRDb250cm9sfHx0aGlzLnNhdmVTdGF0ZSYmdGhpcy5hY3RpdmVTdGF0ZVthLmlkXSkmJmEuYWN0aXZhdGUoKTshMD09PXRoaXMuc2F2ZVN0YXRlJiYodGhpcy5kZWZhdWx0Q29udHJvbD1udWxsKTt0aGlzLnJlZHJhdygpO3JldHVybiEwfXJldHVybiExfSxkZWFjdGl2YXRlOmZ1bmN0aW9uKCl7aWYoT3BlbkxheWVycy5Db250cm9sLnByb3RvdHlwZS5kZWFjdGl2YXRlLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl7Zm9yKHZhciBhLApiPTAsYz10aGlzLmNvbnRyb2xzLmxlbmd0aDtiPGM7YisrKWE9dGhpcy5jb250cm9sc1tiXSx0aGlzLmFjdGl2ZVN0YXRlW2EuaWRdPWEuZGVhY3RpdmF0ZSgpO3RoaXMucmVkcmF3KCk7cmV0dXJuITB9cmV0dXJuITF9LGRyYXc6ZnVuY3Rpb24oKXtPcGVuTGF5ZXJzLkNvbnRyb2wucHJvdG90eXBlLmRyYXcuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMub3V0c2lkZVZpZXdwb3J0Pyh0aGlzLmV2ZW50cy5hdHRhY2hUb0VsZW1lbnQodGhpcy5kaXYpLHRoaXMuZXZlbnRzLnJlZ2lzdGVyKCJidXR0b25jbGljayIsdGhpcyx0aGlzLm9uQnV0dG9uQ2xpY2spKTp0aGlzLm1hcC5ldmVudHMucmVnaXN0ZXIoImJ1dHRvbmNsaWNrIix0aGlzLHRoaXMub25CdXR0b25DbGljayk7dGhpcy5hZGRDb250cm9sc1RvTWFwKHRoaXMuY29udHJvbHMpO3JldHVybiB0aGlzLmRpdn0scmVkcmF3OmZ1bmN0aW9uKCl7Zm9yKHZhciBhPXRoaXMuZGl2LmNoaWxkTm9kZXMubGVuZ3RoLTE7MDw9YTthLS0pdGhpcy5kaXYucmVtb3ZlQ2hpbGQodGhpcy5kaXYuY2hpbGROb2Rlc1thXSk7CnRoaXMuZGl2LmlubmVySFRNTD0iIjtpZih0aGlzLmFjdGl2ZSlmb3IodmFyIGE9MCxiPXRoaXMuY29udHJvbHMubGVuZ3RoO2E8YjthKyspdGhpcy5kaXYuYXBwZW5kQ2hpbGQodGhpcy5jb250cm9sc1thXS5wYW5lbF9kaXYpfSxhY3RpdmF0ZUNvbnRyb2w6ZnVuY3Rpb24oYSl7aWYoIXRoaXMuYWN0aXZlKXJldHVybiExO2lmKGEudHlwZT09T3BlbkxheWVycy5Db250cm9sLlRZUEVfQlVUVE9OKWEudHJpZ2dlcigpO2Vsc2UgaWYoYS50eXBlPT1PcGVuTGF5ZXJzLkNvbnRyb2wuVFlQRV9UT0dHTEUpYS5hY3RpdmU/YS5kZWFjdGl2YXRlKCk6YS5hY3RpdmF0ZSgpO2Vsc2UgaWYodGhpcy5hbGxvd0RlcHJlc3MmJmEuYWN0aXZlKWEuZGVhY3RpdmF0ZSgpO2Vsc2V7Zm9yKHZhciBiLGM9MCxkPXRoaXMuY29udHJvbHMubGVuZ3RoO2M8ZDtjKyspYj10aGlzLmNvbnRyb2xzW2NdLGI9PWF8fGIudHlwZSE9PU9wZW5MYXllcnMuQ29udHJvbC5UWVBFX1RPT0wmJm51bGwhPWIudHlwZXx8Yi5kZWFjdGl2YXRlKCk7CmEuYWN0aXZhdGUoKX19LGFkZENvbnRyb2xzOmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuVXRpbC5pc0FycmF5KGEpfHwoYT1bYV0pO3RoaXMuY29udHJvbHM9dGhpcy5jb250cm9scy5jb25jYXQoYSk7Zm9yKHZhciBiPTAsYz1hLmxlbmd0aDtiPGM7YisrKXt2YXIgZD1hW2JdLGU9dGhpcy5jcmVhdGVDb250cm9sTWFya3VwKGQpO09wZW5MYXllcnMuRWxlbWVudC5hZGRDbGFzcyhlLGQuZGlzcGxheUNsYXNzKyJJdGVtSW5hY3RpdmUiKTtPcGVuTGF5ZXJzLkVsZW1lbnQuYWRkQ2xhc3MoZSwib2xCdXR0b24iKTsiIj09ZC50aXRsZXx8ZS50aXRsZXx8KGUudGl0bGU9ZC50aXRsZSk7ZC5wYW5lbF9kaXY9ZX10aGlzLm1hcCYmKHRoaXMuYWRkQ29udHJvbHNUb01hcChhKSx0aGlzLnJlZHJhdygpKX0sY3JlYXRlQ29udHJvbE1hcmt1cDpmdW5jdGlvbihhKXtyZXR1cm4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iil9LGFkZENvbnRyb2xzVG9NYXA6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiLApjPTAsZD1hLmxlbmd0aDtjPGQ7YysrKWI9YVtjXSwhMD09PWIuYXV0b0FjdGl2YXRlPyhiLmF1dG9BY3RpdmF0ZT0hMSx0aGlzLm1hcC5hZGRDb250cm9sKGIpLGIuYXV0b0FjdGl2YXRlPSEwKToodGhpcy5tYXAuYWRkQ29udHJvbChiKSxiLmRlYWN0aXZhdGUoKSksYi5ldmVudHMub24oe2FjdGl2YXRlOnRoaXMuaWNvbk9uLGRlYWN0aXZhdGU6dGhpcy5pY29uT2ZmfSl9LGljb25PbjpmdW5jdGlvbigpe3ZhciBhPXRoaXMucGFuZWxfZGl2O2EuY2xhc3NOYW1lPWEuY2xhc3NOYW1lLnJlcGxhY2UoUmVnRXhwKCJcXGIoIit0aGlzLmRpc3BsYXlDbGFzcysiSXRlbSlJbmFjdGl2ZVxcYiIpLCIkMUFjdGl2ZSIpfSxpY29uT2ZmOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5wYW5lbF9kaXY7YS5jbGFzc05hbWU9YS5jbGFzc05hbWUucmVwbGFjZShSZWdFeHAoIlxcYigiK3RoaXMuZGlzcGxheUNsYXNzKyJJdGVtKUFjdGl2ZVxcYiIpLCIkMUluYWN0aXZlIil9LG9uQnV0dG9uQ2xpY2s6ZnVuY3Rpb24oYSl7dmFyIGI9CnRoaXMuY29udHJvbHM7YT1hLmJ1dHRvbkVsZW1lbnQ7Zm9yKHZhciBjPWIubGVuZ3RoLTE7MDw9YzstLWMpaWYoYltjXS5wYW5lbF9kaXY9PT1hKXt0aGlzLmFjdGl2YXRlQ29udHJvbChiW2NdKTticmVha319LGdldENvbnRyb2xzQnk6ZnVuY3Rpb24oYSxiKXt2YXIgYz0iZnVuY3Rpb24iPT10eXBlb2YgYi50ZXN0O3JldHVybiBPcGVuTGF5ZXJzLkFycmF5LmZpbHRlcih0aGlzLmNvbnRyb2xzLGZ1bmN0aW9uKGQpe3JldHVybiBkW2FdPT1ifHxjJiZiLnRlc3QoZFthXSl9KX0sZ2V0Q29udHJvbHNCeU5hbWU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZ2V0Q29udHJvbHNCeSgibmFtZSIsYSl9LGdldENvbnRyb2xzQnlDbGFzczpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5nZXRDb250cm9sc0J5KCJDTEFTU19OQU1FIixhKX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Db250cm9sLlBhbmVsIn0pO09wZW5MYXllcnMuQ29udHJvbC5CdXR0b249T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkNvbnRyb2wse3R5cGU6T3BlbkxheWVycy5Db250cm9sLlRZUEVfQlVUVE9OLHRyaWdnZXI6ZnVuY3Rpb24oKXt9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuQ29udHJvbC5CdXR0b24ifSk7T3BlbkxheWVycy5Db250cm9sLlpvb21Jbj1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuQ29udHJvbC5CdXR0b24se3RyaWdnZXI6ZnVuY3Rpb24oKXt0aGlzLm1hcCYmdGhpcy5tYXAuem9vbUluKCl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuQ29udHJvbC5ab29tSW4ifSk7T3BlbkxheWVycy5Db250cm9sLlpvb21PdXQ9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkNvbnRyb2wuQnV0dG9uLHt0cmlnZ2VyOmZ1bmN0aW9uKCl7dGhpcy5tYXAmJnRoaXMubWFwLnpvb21PdXQoKX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Db250cm9sLlpvb21PdXQifSk7T3BlbkxheWVycy5Db250cm9sLlpvb21Ub01heEV4dGVudD1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuQ29udHJvbC5CdXR0b24se3RyaWdnZXI6ZnVuY3Rpb24oKXt0aGlzLm1hcCYmdGhpcy5tYXAuem9vbVRvTWF4RXh0ZW50KCl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuQ29udHJvbC5ab29tVG9NYXhFeHRlbnQifSk7T3BlbkxheWVycy5Db250cm9sLlpvb21QYW5lbD1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuQ29udHJvbC5QYW5lbCx7aW5pdGlhbGl6ZTpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLkNvbnRyb2wuUGFuZWwucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxbYV0pO3RoaXMuYWRkQ29udHJvbHMoW25ldyBPcGVuTGF5ZXJzLkNvbnRyb2wuWm9vbUluLG5ldyBPcGVuTGF5ZXJzLkNvbnRyb2wuWm9vbVRvTWF4RXh0ZW50LG5ldyBPcGVuTGF5ZXJzLkNvbnRyb2wuWm9vbU91dF0pfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkNvbnRyb2wuWm9vbVBhbmVsIn0pO09wZW5MYXllcnMuTGF5ZXIuSFRUUFJlcXVlc3Q9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkxheWVyLHtVUkxfSEFTSF9GQUNUT1I6KE1hdGguc3FydCg1KS0xKS8yLHVybDpudWxsLHBhcmFtczpudWxsLHJlcHJvamVjdDohMSxpbml0aWFsaXplOmZ1bmN0aW9uKGEsYixjLGQpe09wZW5MYXllcnMuTGF5ZXIucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxbYSxkXSk7dGhpcy51cmw9Yjt0aGlzLnBhcmFtc3x8KHRoaXMucGFyYW1zPU9wZW5MYXllcnMuVXRpbC5leHRlbmQoe30sYykpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5wYXJhbXM9dGhpcy51cmw9bnVsbDtPcGVuTGF5ZXJzLkxheWVyLnByb3RvdHlwZS5kZXN0cm95LmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sY2xvbmU6ZnVuY3Rpb24oYSl7bnVsbD09YSYmKGE9bmV3IE9wZW5MYXllcnMuTGF5ZXIuSFRUUFJlcXVlc3QodGhpcy5uYW1lLHRoaXMudXJsLHRoaXMucGFyYW1zLHRoaXMuZ2V0T3B0aW9ucygpKSk7CnJldHVybiBhPU9wZW5MYXllcnMuTGF5ZXIucHJvdG90eXBlLmNsb25lLmFwcGx5KHRoaXMsW2FdKX0sc2V0VXJsOmZ1bmN0aW9uKGEpe3RoaXMudXJsPWF9LG1lcmdlTmV3UGFyYW1zOmZ1bmN0aW9uKGEpe3RoaXMucGFyYW1zPU9wZW5MYXllcnMuVXRpbC5leHRlbmQodGhpcy5wYXJhbXMsYSk7YT10aGlzLnJlZHJhdygpO251bGwhPXRoaXMubWFwJiZ0aGlzLm1hcC5ldmVudHMudHJpZ2dlckV2ZW50KCJjaGFuZ2VsYXllciIse2xheWVyOnRoaXMscHJvcGVydHk6InBhcmFtcyJ9KTtyZXR1cm4gYX0scmVkcmF3OmZ1bmN0aW9uKGEpe3JldHVybiBhP3RoaXMubWVyZ2VOZXdQYXJhbXMoe19vbFNhbHQ6TWF0aC5yYW5kb20oKX0pOk9wZW5MYXllcnMuTGF5ZXIucHJvdG90eXBlLnJlZHJhdy5hcHBseSh0aGlzLFtdKX0sc2VsZWN0VXJsOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTEsZD0wLGU9YS5sZW5ndGg7ZDxlO2QrKyljKj1hLmNoYXJDb2RlQXQoZCkqdGhpcy5VUkxfSEFTSF9GQUNUT1IsCmMtPU1hdGguZmxvb3IoYyk7cmV0dXJuIGJbTWF0aC5mbG9vcihjKmIubGVuZ3RoKV19LGdldEZ1bGxSZXF1ZXN0U3RyaW5nOmZ1bmN0aW9uKGEsYil7dmFyIGM9Ynx8dGhpcy51cmwsZD1PcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHt9LHRoaXMucGFyYW1zKSxkPU9wZW5MYXllcnMuVXRpbC5leHRlbmQoZCxhKSxlPU9wZW5MYXllcnMuVXRpbC5nZXRQYXJhbWV0ZXJTdHJpbmcoZCk7T3BlbkxheWVycy5VdGlsLmlzQXJyYXkoYykmJihjPXRoaXMuc2VsZWN0VXJsKGUsYykpO3ZhciBlPU9wZW5MYXllcnMuVXRpbC51cHBlckNhc2VPYmplY3QoT3BlbkxheWVycy5VdGlsLmdldFBhcmFtZXRlcnMoYykpLGY7Zm9yKGYgaW4gZClmLnRvVXBwZXJDYXNlKClpbiBlJiZkZWxldGUgZFtmXTtlPU9wZW5MYXllcnMuVXRpbC5nZXRQYXJhbWV0ZXJTdHJpbmcoZCk7cmV0dXJuIE9wZW5MYXllcnMuVXRpbC51cmxBcHBlbmQoYyxlKX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5MYXllci5IVFRQUmVxdWVzdCJ9KTtPcGVuTGF5ZXJzLlRpbGU9T3BlbkxheWVycy5DbGFzcyh7ZXZlbnRzOm51bGwsZXZlbnRMaXN0ZW5lcnM6bnVsbCxpZDpudWxsLGxheWVyOm51bGwsdXJsOm51bGwsYm91bmRzOm51bGwsc2l6ZTpudWxsLHBvc2l0aW9uOm51bGwsaXNMb2FkaW5nOiExLGluaXRpYWxpemU6ZnVuY3Rpb24oYSxiLGMsZCxlLGYpe3RoaXMubGF5ZXI9YTt0aGlzLnBvc2l0aW9uPWIuY2xvbmUoKTt0aGlzLnNldEJvdW5kcyhjKTt0aGlzLnVybD1kO2UmJih0aGlzLnNpemU9ZS5jbG9uZSgpKTt0aGlzLmlkPU9wZW5MYXllcnMuVXRpbC5jcmVhdGVVbmlxdWVJRCgiVGlsZV8iKTtPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHRoaXMsZik7dGhpcy5ldmVudHM9bmV3IE9wZW5MYXllcnMuRXZlbnRzKHRoaXMpO2lmKHRoaXMuZXZlbnRMaXN0ZW5lcnMgaW5zdGFuY2VvZiBPYmplY3QpdGhpcy5ldmVudHMub24odGhpcy5ldmVudExpc3RlbmVycyl9LHVubG9hZDpmdW5jdGlvbigpe3RoaXMuaXNMb2FkaW5nJiYodGhpcy5pc0xvYWRpbmc9CiExLHRoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgidW5sb2FkIikpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5wb3NpdGlvbj10aGlzLnNpemU9dGhpcy5ib3VuZHM9dGhpcy5sYXllcj1udWxsO3RoaXMuZXZlbnRMaXN0ZW5lcnMmJnRoaXMuZXZlbnRzLnVuKHRoaXMuZXZlbnRMaXN0ZW5lcnMpO3RoaXMuZXZlbnRzLmRlc3Ryb3koKTt0aGlzLmV2ZW50cz10aGlzLmV2ZW50TGlzdGVuZXJzPW51bGx9LGRyYXc6ZnVuY3Rpb24oYSl7YXx8dGhpcy5jbGVhcigpO3ZhciBiPXRoaXMuc2hvdWxkRHJhdygpO2ImJighYSYmITE9PT10aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoImJlZm9yZWRyYXciKSkmJihiPW51bGwpO3JldHVybiBifSxzaG91bGREcmF3OmZ1bmN0aW9uKCl7dmFyIGE9ITEsYj10aGlzLmxheWVyLm1heEV4dGVudDtpZihiKXt2YXIgYz10aGlzLmxheWVyLm1hcCxjPWMuYmFzZUxheWVyLndyYXBEYXRlTGluZSYmYy5nZXRNYXhFeHRlbnQoKTt0aGlzLmJvdW5kcy5pbnRlcnNlY3RzQm91bmRzKGIsCntpbmNsdXNpdmU6ITEsd29ybGRCb3VuZHM6Y30pJiYoYT0hMCl9cmV0dXJuIGF8fHRoaXMubGF5ZXIuZGlzcGxheU91dHNpZGVNYXhFeHRlbnR9LHNldEJvdW5kczpmdW5jdGlvbihhKXthPWEuY2xvbmUoKTtpZih0aGlzLmxheWVyLm1hcC5iYXNlTGF5ZXIud3JhcERhdGVMaW5lKXt2YXIgYj10aGlzLmxheWVyLm1hcC5nZXRNYXhFeHRlbnQoKSxjPXRoaXMubGF5ZXIubWFwLmdldFJlc29sdXRpb24oKTthPWEud3JhcERhdGVMaW5lKGIse2xlZnRUb2xlcmFuY2U6YyxyaWdodFRvbGVyYW5jZTpjfSl9dGhpcy5ib3VuZHM9YX0sbW92ZVRvOmZ1bmN0aW9uKGEsYixjKXtudWxsPT1jJiYoYz0hMCk7dGhpcy5zZXRCb3VuZHMoYSk7dGhpcy5wb3NpdGlvbj1iLmNsb25lKCk7YyYmdGhpcy5kcmF3KCl9LGNsZWFyOmZ1bmN0aW9uKGEpe30sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5UaWxlIn0pO09wZW5MYXllcnMuVGlsZS5JbWFnZT1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuVGlsZSx7dXJsOm51bGwsaW1nRGl2Om51bGwsZnJhbWU6bnVsbCxpbWFnZVJlbG9hZEF0dGVtcHRzOm51bGwsbGF5ZXJBbHBoYUhhY2s6bnVsbCxhc3luY1JlcXVlc3RJZDpudWxsLG1heEdldFVybExlbmd0aDpudWxsLGNhbnZhc0NvbnRleHQ6bnVsbCxjcm9zc09yaWdpbktleXdvcmQ6bnVsbCxpbml0aWFsaXplOmZ1bmN0aW9uKGEsYixjLGQsZSxmKXtPcGVuTGF5ZXJzLlRpbGUucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMudXJsPWQ7dGhpcy5sYXllckFscGhhSGFjaz10aGlzLmxheWVyLmFscGhhJiZPcGVuTGF5ZXJzLlV0aWwuYWxwaGFIYWNrKCk7aWYobnVsbCE9dGhpcy5tYXhHZXRVcmxMZW5ndGh8fHRoaXMubGF5ZXIuZ3V0dGVyfHx0aGlzLmxheWVyQWxwaGFIYWNrKXRoaXMuZnJhbWU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2IiksdGhpcy5mcmFtZS5zdHlsZS5wb3NpdGlvbj0KImFic29sdXRlIix0aGlzLmZyYW1lLnN0eWxlLm92ZXJmbG93PSJoaWRkZW4iO251bGwhPXRoaXMubWF4R2V0VXJsTGVuZ3RoJiZPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHRoaXMsT3BlbkxheWVycy5UaWxlLkltYWdlLklGcmFtZSl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmltZ0RpdiYmKHRoaXMuY2xlYXIoKSx0aGlzLmZyYW1lPXRoaXMuaW1nRGl2PW51bGwpO3RoaXMuYXN5bmNSZXF1ZXN0SWQ9bnVsbDtPcGVuTGF5ZXJzLlRpbGUucHJvdG90eXBlLmRlc3Ryb3kuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxkcmF3OmZ1bmN0aW9uKCl7dmFyIGE9T3BlbkxheWVycy5UaWxlLnByb3RvdHlwZS5kcmF3LmFwcGx5KHRoaXMsYXJndW1lbnRzKTthPyh0aGlzLmxheWVyIT10aGlzLmxheWVyLm1hcC5iYXNlTGF5ZXImJnRoaXMubGF5ZXIucmVwcm9qZWN0JiYodGhpcy5ib3VuZHM9dGhpcy5nZXRCb3VuZHNGcm9tQmFzZUxheWVyKHRoaXMucG9zaXRpb24pKSx0aGlzLmlzTG9hZGluZz90aGlzLl9sb2FkRXZlbnQ9CiJyZWxvYWQiOih0aGlzLmlzTG9hZGluZz0hMCx0aGlzLl9sb2FkRXZlbnQ9ImxvYWRzdGFydCIpLHRoaXMucmVuZGVyVGlsZSgpLHRoaXMucG9zaXRpb25UaWxlKCkpOiExPT09YSYmdGhpcy51bmxvYWQoKTtyZXR1cm4gYX0scmVuZGVyVGlsZTpmdW5jdGlvbigpe2lmKHRoaXMubGF5ZXIuYXN5bmMpe3ZhciBhPXRoaXMuYXN5bmNSZXF1ZXN0SWQ9KHRoaXMuYXN5bmNSZXF1ZXN0SWR8fDApKzE7dGhpcy5sYXllci5nZXRVUkxhc3luYyh0aGlzLmJvdW5kcyxmdW5jdGlvbihiKXthPT10aGlzLmFzeW5jUmVxdWVzdElkJiYodGhpcy51cmw9Yix0aGlzLmluaXRJbWFnZSgpKX0sdGhpcyl9ZWxzZSB0aGlzLnVybD10aGlzLmxheWVyLmdldFVSTCh0aGlzLmJvdW5kcyksdGhpcy5pbml0SW1hZ2UoKX0scG9zaXRpb25UaWxlOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5nZXRUaWxlKCkuc3R5bGUsYj10aGlzLmZyYW1lP3RoaXMuc2l6ZTp0aGlzLmxheWVyLmdldEltYWdlU2l6ZSh0aGlzLmJvdW5kcyksCmM9MTt0aGlzLmxheWVyIGluc3RhbmNlb2YgT3BlbkxheWVycy5MYXllci5HcmlkJiYoYz10aGlzLmxheWVyLmdldFNlcnZlclJlc29sdXRpb24oKS90aGlzLmxheWVyLm1hcC5nZXRSZXNvbHV0aW9uKCkpO2EubGVmdD10aGlzLnBvc2l0aW9uLngrInB4IjthLnRvcD10aGlzLnBvc2l0aW9uLnkrInB4IjthLndpZHRoPU1hdGgucm91bmQoYypiLncpKyJweCI7YS5oZWlnaHQ9TWF0aC5yb3VuZChjKmIuaCkrInB4In0sY2xlYXI6ZnVuY3Rpb24oKXtPcGVuTGF5ZXJzLlRpbGUucHJvdG90eXBlLmNsZWFyLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt2YXIgYT10aGlzLmltZ0RpdjtpZihhKXt2YXIgYj10aGlzLmdldFRpbGUoKTtiLnBhcmVudE5vZGU9PT10aGlzLmxheWVyLmRpdiYmdGhpcy5sYXllci5kaXYucmVtb3ZlQ2hpbGQoYik7dGhpcy5zZXRJbWdTcmMoKTshMD09PXRoaXMubGF5ZXJBbHBoYUhhY2smJihhLnN0eWxlLmZpbHRlcj0iIik7T3BlbkxheWVycy5FbGVtZW50LnJlbW92ZUNsYXNzKGEsCiJvbEltYWdlTG9hZEVycm9yIil9dGhpcy5jYW52YXNDb250ZXh0PW51bGx9LGdldEltYWdlOmZ1bmN0aW9uKCl7aWYoIXRoaXMuaW1nRGl2KXt0aGlzLmltZ0Rpdj1PcGVuTGF5ZXJzLlRpbGUuSW1hZ2UuSU1BR0UuY2xvbmVOb2RlKCExKTt2YXIgYT10aGlzLmltZ0Rpdi5zdHlsZTtpZih0aGlzLmZyYW1lKXt2YXIgYj0wLGM9MDt0aGlzLmxheWVyLmd1dHRlciYmKGI9MTAwKih0aGlzLmxheWVyLmd1dHRlci90aGlzLmxheWVyLnRpbGVTaXplLncpLGM9MTAwKih0aGlzLmxheWVyLmd1dHRlci90aGlzLmxheWVyLnRpbGVTaXplLmgpKTthLmxlZnQ9LWIrIiUiO2EudG9wPS1jKyIlIjthLndpZHRoPTIqYisxMDArIiUiO2EuaGVpZ2h0PTIqYysxMDArIiUifWEudmlzaWJpbGl0eT0iaGlkZGVuIjthLm9wYWNpdHk9MDsxPnRoaXMubGF5ZXIub3BhY2l0eSYmKGEuZmlsdGVyPSJhbHBoYShvcGFjaXR5PSIrMTAwKnRoaXMubGF5ZXIub3BhY2l0eSsiKSIpO2EucG9zaXRpb249ImFic29sdXRlIjsKdGhpcy5sYXllckFscGhhSGFjayYmKGEucGFkZGluZ1RvcD1hLmhlaWdodCxhLmhlaWdodD0iMCIsYS53aWR0aD0iMTAwJSIpO3RoaXMuZnJhbWUmJnRoaXMuZnJhbWUuYXBwZW5kQ2hpbGQodGhpcy5pbWdEaXYpfXJldHVybiB0aGlzLmltZ0Rpdn0sc2V0SW1hZ2U6ZnVuY3Rpb24oYSl7dGhpcy5pbWdEaXY9YX0saW5pdEltYWdlOmZ1bmN0aW9uKCl7aWYodGhpcy51cmx8fHRoaXMuaW1nRGl2KXt0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoImJlZm9yZWxvYWQiKTt0aGlzLmxheWVyLmRpdi5hcHBlbmRDaGlsZCh0aGlzLmdldFRpbGUoKSk7dGhpcy5ldmVudHMudHJpZ2dlckV2ZW50KHRoaXMuX2xvYWRFdmVudCk7dmFyIGE9dGhpcy5nZXRJbWFnZSgpLGI9YS5nZXRBdHRyaWJ1dGUoInNyYyIpfHwiIjt0aGlzLnVybCYmT3BlbkxheWVycy5VdGlsLmlzRXF1aXZhbGVudFVybChiLHRoaXMudXJsKT90aGlzLl9sb2FkVGltZW91dD13aW5kb3cuc2V0VGltZW91dChPcGVuTGF5ZXJzLkZ1bmN0aW9uLmJpbmQodGhpcy5vbkltYWdlTG9hZCwKdGhpcyksMCk6KHRoaXMuc3RvcExvYWRpbmcoKSx0aGlzLmNyb3NzT3JpZ2luS2V5d29yZCYmYS5yZW1vdmVBdHRyaWJ1dGUoImNyb3Nzb3JpZ2luIiksT3BlbkxheWVycy5FdmVudC5vYnNlcnZlKGEsImxvYWQiLE9wZW5MYXllcnMuRnVuY3Rpb24uYmluZCh0aGlzLm9uSW1hZ2VMb2FkLHRoaXMpKSxPcGVuTGF5ZXJzLkV2ZW50Lm9ic2VydmUoYSwiZXJyb3IiLE9wZW5MYXllcnMuRnVuY3Rpb24uYmluZCh0aGlzLm9uSW1hZ2VFcnJvcix0aGlzKSksdGhpcy5pbWFnZVJlbG9hZEF0dGVtcHRzPTAsdGhpcy5zZXRJbWdTcmModGhpcy51cmwpKX1lbHNlIHRoaXMuaXNMb2FkaW5nPSExfSxzZXRJbWdTcmM6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5pbWdEaXY7YT8oYi5zdHlsZS52aXNpYmlsaXR5PSJoaWRkZW4iLGIuc3R5bGUub3BhY2l0eT0wLHRoaXMuY3Jvc3NPcmlnaW5LZXl3b3JkJiYoImRhdGE6IiE9PWEuc3Vic3RyKDAsNSk/Yi5zZXRBdHRyaWJ1dGUoImNyb3Nzb3JpZ2luIix0aGlzLmNyb3NzT3JpZ2luS2V5d29yZCk6CmIucmVtb3ZlQXR0cmlidXRlKCJjcm9zc29yaWdpbiIpKSxiLnNyYz1hKToodGhpcy5zdG9wTG9hZGluZygpLHRoaXMuaW1nRGl2PW51bGwsYi5wYXJlbnROb2RlJiZiLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYikpfSxnZXRUaWxlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZnJhbWU/dGhpcy5mcmFtZTp0aGlzLmdldEltYWdlKCl9LGNyZWF0ZUJhY2tCdWZmZXI6ZnVuY3Rpb24oKXtpZih0aGlzLmltZ0RpdiYmIXRoaXMuaXNMb2FkaW5nKXt2YXIgYTt0aGlzLmZyYW1lPyhhPXRoaXMuZnJhbWUuY2xvbmVOb2RlKCExKSxhLmFwcGVuZENoaWxkKHRoaXMuaW1nRGl2KSk6YT10aGlzLmltZ0Rpdjt0aGlzLmltZ0Rpdj1udWxsO3JldHVybiBhfX0sb25JbWFnZUxvYWQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmltZ0Rpdjt0aGlzLnN0b3BMb2FkaW5nKCk7YS5zdHlsZS52aXNpYmlsaXR5PSJpbmhlcml0IjthLnN0eWxlLm9wYWNpdHk9dGhpcy5sYXllci5vcGFjaXR5O3RoaXMuaXNMb2FkaW5nPQohMTt0aGlzLmNhbnZhc0NvbnRleHQ9bnVsbDt0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoImxvYWRlbmQiKTshMD09PXRoaXMubGF5ZXJBbHBoYUhhY2smJihhLnN0eWxlLmZpbHRlcj0icHJvZ2lkOkRYSW1hZ2VUcmFuc2Zvcm0uTWljcm9zb2Z0LkFscGhhSW1hZ2VMb2FkZXIoc3JjPSciK2Euc3JjKyInLCBzaXppbmdNZXRob2Q9J3NjYWxlJykiKX0sb25JbWFnZUVycm9yOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5pbWdEaXY7bnVsbCE9YS5zcmMmJih0aGlzLmltYWdlUmVsb2FkQXR0ZW1wdHMrKyx0aGlzLmltYWdlUmVsb2FkQXR0ZW1wdHM8PU9wZW5MYXllcnMuSU1BR0VfUkVMT0FEX0FUVEVNUFRTP3RoaXMuc2V0SW1nU3JjKHRoaXMubGF5ZXIuZ2V0VVJMKHRoaXMuYm91bmRzKSk6KE9wZW5MYXllcnMuRWxlbWVudC5hZGRDbGFzcyhhLCJvbEltYWdlTG9hZEVycm9yIiksdGhpcy5ldmVudHMudHJpZ2dlckV2ZW50KCJsb2FkZXJyb3IiKSx0aGlzLm9uSW1hZ2VMb2FkKCkpKX0sc3RvcExvYWRpbmc6ZnVuY3Rpb24oKXtPcGVuTGF5ZXJzLkV2ZW50LnN0b3BPYnNlcnZpbmdFbGVtZW50KHRoaXMuaW1nRGl2KTsKd2luZG93LmNsZWFyVGltZW91dCh0aGlzLl9sb2FkVGltZW91dCk7ZGVsZXRlIHRoaXMuX2xvYWRUaW1lb3V0fSxnZXRDYW52YXNDb250ZXh0OmZ1bmN0aW9uKCl7aWYoT3BlbkxheWVycy5DQU5WQVNfU1VQUE9SVEVEJiZ0aGlzLmltZ0RpdiYmIXRoaXMuaXNMb2FkaW5nKXtpZighdGhpcy5jYW52YXNDb250ZXh0KXt2YXIgYT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJjYW52YXMiKTthLndpZHRoPXRoaXMuc2l6ZS53O2EuaGVpZ2h0PXRoaXMuc2l6ZS5oO3RoaXMuY2FudmFzQ29udGV4dD1hLmdldENvbnRleHQoIjJkIik7dGhpcy5jYW52YXNDb250ZXh0LmRyYXdJbWFnZSh0aGlzLmltZ0RpdiwwLDApfXJldHVybiB0aGlzLmNhbnZhc0NvbnRleHR9fSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLlRpbGUuSW1hZ2UifSk7Ck9wZW5MYXllcnMuVGlsZS5JbWFnZS5JTUFHRT1mdW5jdGlvbigpe3ZhciBhPW5ldyBJbWFnZTthLmNsYXNzTmFtZT0ib2xUaWxlSW1hZ2UiO2EuZ2FsbGVyeUltZz0ibm8iO3JldHVybiBhfSgpO09wZW5MYXllcnMuTGF5ZXIuR3JpZD1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuTGF5ZXIuSFRUUFJlcXVlc3Qse3RpbGVTaXplOm51bGwsdGlsZU9yaWdpbkNvcm5lcjoiYmwiLHRpbGVPcmlnaW46bnVsbCx0aWxlT3B0aW9uczpudWxsLHRpbGVDbGFzczpPcGVuTGF5ZXJzLlRpbGUuSW1hZ2UsZ3JpZDpudWxsLHNpbmdsZVRpbGU6ITEscmF0aW86MS41LGJ1ZmZlcjowLHRyYW5zaXRpb25FZmZlY3Q6InJlc2l6ZSIsbnVtTG9hZGluZ1RpbGVzOjAsc2VydmVyUmVzb2x1dGlvbnM6bnVsbCxsb2FkaW5nOiExLGJhY2tCdWZmZXI6bnVsbCxncmlkUmVzb2x1dGlvbjpudWxsLGJhY2tCdWZmZXJSZXNvbHV0aW9uOm51bGwsYmFja0J1ZmZlckxvbkxhdDpudWxsLGJhY2tCdWZmZXJUaW1lcklkOm51bGwscmVtb3ZlQmFja0J1ZmZlckRlbGF5Om51bGwsY2xhc3NOYW1lOm51bGwsZ3JpZExheW91dDpudWxsLHJvd1NpZ246bnVsbCx0cmFuc2l0aW9uZW5kRXZlbnRzOlsidHJhbnNpdGlvbmVuZCIsCiJ3ZWJraXRUcmFuc2l0aW9uRW5kIiwib3RyYW5zaXRpb25lbmQiLCJvVHJhbnNpdGlvbkVuZCJdLGluaXRpYWxpemU6ZnVuY3Rpb24oYSxiLGMsZCl7T3BlbkxheWVycy5MYXllci5IVFRQUmVxdWVzdC5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5ncmlkPVtdO3RoaXMuX3JlbW92ZUJhY2tCdWZmZXI9T3BlbkxheWVycy5GdW5jdGlvbi5iaW5kKHRoaXMucmVtb3ZlQmFja0J1ZmZlcix0aGlzKTt0aGlzLmluaXRQcm9wZXJ0aWVzKCk7dGhpcy5yb3dTaWduPSJ0Ij09PXRoaXMudGlsZU9yaWdpbkNvcm5lci5zdWJzdHIoMCwxKT8xOi0xfSxpbml0UHJvcGVydGllczpmdW5jdGlvbigpe3ZvaWQgMD09PXRoaXMub3B0aW9ucy5yZW1vdmVCYWNrQnVmZmVyRGVsYXkmJih0aGlzLnJlbW92ZUJhY2tCdWZmZXJEZWxheT10aGlzLnNpbmdsZVRpbGU/MDoyNTAwKTt2b2lkIDA9PT10aGlzLm9wdGlvbnMuY2xhc3NOYW1lJiYodGhpcy5jbGFzc05hbWU9dGhpcy5zaW5nbGVUaWxlPwoib2xMYXllckdyaWRTaW5nbGVUaWxlIjoib2xMYXllckdyaWQiKX0sc2V0TWFwOmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuTGF5ZXIuSFRUUFJlcXVlc3QucHJvdG90eXBlLnNldE1hcC5jYWxsKHRoaXMsYSk7T3BlbkxheWVycy5FbGVtZW50LmFkZENsYXNzKHRoaXMuZGl2LHRoaXMuY2xhc3NOYW1lKX0scmVtb3ZlTWFwOmZ1bmN0aW9uKGEpe3RoaXMucmVtb3ZlQmFja0J1ZmZlcigpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5yZW1vdmVCYWNrQnVmZmVyKCk7dGhpcy5jbGVhckdyaWQoKTt0aGlzLnRpbGVTaXplPXRoaXMuZ3JpZD1udWxsO09wZW5MYXllcnMuTGF5ZXIuSFRUUFJlcXVlc3QucHJvdG90eXBlLmRlc3Ryb3kuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxjbGVhckdyaWQ6ZnVuY3Rpb24oKXtpZih0aGlzLmdyaWQpe2Zvcih2YXIgYT0wLGI9dGhpcy5ncmlkLmxlbmd0aDthPGI7YSsrKWZvcih2YXIgYz10aGlzLmdyaWRbYV0sZD0wLGU9Yy5sZW5ndGg7ZDxlO2QrKyl0aGlzLmRlc3Ryb3lUaWxlKGNbZF0pOwp0aGlzLmdyaWQ9W107dGhpcy5ncmlkTGF5b3V0PXRoaXMuZ3JpZFJlc29sdXRpb249bnVsbH19LGFkZE9wdGlvbnM6ZnVuY3Rpb24oYSxiKXt2YXIgYz12b2lkIDAhPT1hLnNpbmdsZVRpbGUmJmEuc2luZ2xlVGlsZSE9PXRoaXMuc2luZ2xlVGlsZTtPcGVuTGF5ZXJzLkxheWVyLkhUVFBSZXF1ZXN0LnByb3RvdHlwZS5hZGRPcHRpb25zLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLm1hcCYmYyYmKHRoaXMuaW5pdFByb3BlcnRpZXMoKSx0aGlzLmNsZWFyR3JpZCgpLHRoaXMudGlsZVNpemU9dGhpcy5vcHRpb25zLnRpbGVTaXplLHRoaXMuc2V0VGlsZVNpemUoKSx0aGlzLm1vdmVUbyhudWxsLCEwKSl9LGNsb25lOmZ1bmN0aW9uKGEpe251bGw9PWEmJihhPW5ldyBPcGVuTGF5ZXJzLkxheWVyLkdyaWQodGhpcy5uYW1lLHRoaXMudXJsLHRoaXMucGFyYW1zLHRoaXMuZ2V0T3B0aW9ucygpKSk7YT1PcGVuTGF5ZXJzLkxheWVyLkhUVFBSZXF1ZXN0LnByb3RvdHlwZS5jbG9uZS5hcHBseSh0aGlzLApbYV0pO251bGwhPXRoaXMudGlsZVNpemUmJihhLnRpbGVTaXplPXRoaXMudGlsZVNpemUuY2xvbmUoKSk7YS5ncmlkPVtdO2EuZ3JpZFJlc29sdXRpb249bnVsbDthLmJhY2tCdWZmZXI9bnVsbDthLmJhY2tCdWZmZXJUaW1lcklkPW51bGw7YS5sb2FkaW5nPSExO2EubnVtTG9hZGluZ1RpbGVzPTA7cmV0dXJuIGF9LG1vdmVUbzpmdW5jdGlvbihhLGIsYyl7T3BlbkxheWVycy5MYXllci5IVFRQUmVxdWVzdC5wcm90b3R5cGUubW92ZVRvLmFwcGx5KHRoaXMsYXJndW1lbnRzKTthPWF8fHRoaXMubWFwLmdldEV4dGVudCgpO2lmKG51bGwhPWEpe3ZhciBkPSF0aGlzLmdyaWQubGVuZ3RofHxiLGU9dGhpcy5nZXRUaWxlc0JvdW5kcygpLGY9dGhpcy5tYXAuZ2V0UmVzb2x1dGlvbigpO3RoaXMuZ2V0U2VydmVyUmVzb2x1dGlvbihmKTtpZih0aGlzLnNpbmdsZVRpbGUpe2lmKGR8fCFjJiYhZS5jb250YWluc0JvdW5kcyhhKSliJiYicmVzaXplIiE9PXRoaXMudHJhbnNpdGlvbkVmZmVjdCYmCnRoaXMucmVtb3ZlQmFja0J1ZmZlcigpLGImJiJyZXNpemUiIT09dGhpcy50cmFuc2l0aW9uRWZmZWN0fHx0aGlzLmFwcGx5QmFja0J1ZmZlcihmKSx0aGlzLmluaXRTaW5nbGVUaWxlKGEpfWVsc2UoZD1kfHwhZS5pbnRlcnNlY3RzQm91bmRzKGEse3dvcmxkQm91bmRzOnRoaXMubWFwLmJhc2VMYXllci53cmFwRGF0ZUxpbmUmJnRoaXMubWFwLmdldE1heEV4dGVudCgpfSkpPyghYnx8InJlc2l6ZSIhPT10aGlzLnRyYW5zaXRpb25FZmZlY3QmJnRoaXMuZ3JpZFJlc29sdXRpb24hPT1mfHx0aGlzLmFwcGx5QmFja0J1ZmZlcihmKSx0aGlzLmluaXRHcmlkZGVkVGlsZXMoYSkpOnRoaXMubW92ZUdyaWRkZWRUaWxlcygpfX0sZ2V0VGlsZURhdGE6ZnVuY3Rpb24oYSl7dmFyIGI9bnVsbCxjPWEubG9uLGQ9YS5sYXQsZT10aGlzLmdyaWQubGVuZ3RoO2lmKHRoaXMubWFwJiZlKXt2YXIgZj10aGlzLm1hcC5nZXRSZXNvbHV0aW9uKCk7YT10aGlzLnRpbGVTaXplLnc7dmFyIGc9dGhpcy50aWxlU2l6ZS5oLApoPXRoaXMuZ3JpZFswXVswXS5ib3VuZHMsaz1oLmxlZnQsaD1oLnRvcDtpZihjPGsmJnRoaXMubWFwLmJhc2VMYXllci53cmFwRGF0ZUxpbmUpdmFyIGw9dGhpcy5tYXAuZ2V0TWF4RXh0ZW50KCkuZ2V0V2lkdGgoKSxtPU1hdGguY2VpbCgoay1jKS9sKSxjPWMrbCptO2M9KGMtaykvKGYqYSk7ZD0oaC1kKS8oZipnKTtmPU1hdGguZmxvb3IoYyk7az1NYXRoLmZsb29yKGQpOzA8PWsmJms8ZSYmKGU9dGhpcy5ncmlkW2tdW2ZdKSYmKGI9e3RpbGU6ZSxpOk1hdGguZmxvb3IoKGMtZikqYSksajpNYXRoLmZsb29yKChkLWspKmcpfSl9cmV0dXJuIGJ9LGRlc3Ryb3lUaWxlOmZ1bmN0aW9uKGEpe3RoaXMucmVtb3ZlVGlsZU1vbml0b3JpbmdIb29rcyhhKTthLmRlc3Ryb3koKX0sZ2V0U2VydmVyUmVzb2x1dGlvbjpmdW5jdGlvbihhKXt2YXIgYj1OdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk7YT1hfHx0aGlzLm1hcC5nZXRSZXNvbHV0aW9uKCk7aWYodGhpcy5zZXJ2ZXJSZXNvbHV0aW9ucyYmCi0xPT09T3BlbkxheWVycy5VdGlsLmluZGV4T2YodGhpcy5zZXJ2ZXJSZXNvbHV0aW9ucyxhKSl7dmFyIGMsZCxlLGY7Zm9yKGM9dGhpcy5zZXJ2ZXJSZXNvbHV0aW9ucy5sZW5ndGgtMTswPD1jO2MtLSl7ZT10aGlzLnNlcnZlclJlc29sdXRpb25zW2NdO2Q9TWF0aC5hYnMoZS1hKTtpZihkPmIpYnJlYWs7Yj1kO2Y9ZX1hPWZ9cmV0dXJuIGF9LGdldFNlcnZlclpvb206ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmdldFNlcnZlclJlc29sdXRpb24oKTtyZXR1cm4gdGhpcy5zZXJ2ZXJSZXNvbHV0aW9ucz9PcGVuTGF5ZXJzLlV0aWwuaW5kZXhPZih0aGlzLnNlcnZlclJlc29sdXRpb25zLGEpOnRoaXMubWFwLmdldFpvb21Gb3JSZXNvbHV0aW9uKGEpKyh0aGlzLnpvb21PZmZzZXR8fDApfSxhcHBseUJhY2tCdWZmZXI6ZnVuY3Rpb24oYSl7bnVsbCE9PXRoaXMuYmFja0J1ZmZlclRpbWVySWQmJnRoaXMucmVtb3ZlQmFja0J1ZmZlcigpO3ZhciBiPXRoaXMuYmFja0J1ZmZlcjtpZighYil7Yj0KdGhpcy5jcmVhdGVCYWNrQnVmZmVyKCk7aWYoIWIpcmV0dXJuO2E9PT10aGlzLmdyaWRSZXNvbHV0aW9uP3RoaXMuZGl2Lmluc2VydEJlZm9yZShiLHRoaXMuZGl2LmZpcnN0Q2hpbGQpOnRoaXMubWFwLmJhc2VMYXllci5kaXYucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoYix0aGlzLm1hcC5iYXNlTGF5ZXIuZGl2KTt0aGlzLmJhY2tCdWZmZXI9Yjt2YXIgYz10aGlzLmdyaWRbMF1bMF0uYm91bmRzO3RoaXMuYmFja0J1ZmZlckxvbkxhdD17bG9uOmMubGVmdCxsYXQ6Yy50b3B9O3RoaXMuYmFja0J1ZmZlclJlc29sdXRpb249dGhpcy5ncmlkUmVzb2x1dGlvbn1mb3IodmFyIGM9dGhpcy5iYWNrQnVmZmVyUmVzb2x1dGlvbi9hLGQ9Yi5jaGlsZE5vZGVzLGUsZj1kLmxlbmd0aC0xOzA8PWY7LS1mKWU9ZFtmXSxlLnN0eWxlLnRvcD0oYyplLl9pKmUuX2h8MCkrInB4IixlLnN0eWxlLmxlZnQ9KGMqZS5faiplLl93fDApKyJweCIsZS5zdHlsZS53aWR0aD1NYXRoLnJvdW5kKGMqZS5fdykrCiJweCIsZS5zdHlsZS5oZWlnaHQ9TWF0aC5yb3VuZChjKmUuX2gpKyJweCI7YT10aGlzLmdldFZpZXdQb3J0UHhGcm9tTG9uTGF0KHRoaXMuYmFja0J1ZmZlckxvbkxhdCxhKTtjPXRoaXMubWFwLmxheWVyQ29udGFpbmVyT3JpZ2luUHgueTtiLnN0eWxlLmxlZnQ9TWF0aC5yb3VuZChhLngtdGhpcy5tYXAubGF5ZXJDb250YWluZXJPcmlnaW5QeC54KSsicHgiO2Iuc3R5bGUudG9wPU1hdGgucm91bmQoYS55LWMpKyJweCJ9LGNyZWF0ZUJhY2tCdWZmZXI6ZnVuY3Rpb24oKXt2YXIgYTtpZigwPHRoaXMuZ3JpZC5sZW5ndGgpe2E9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7YS5pZD10aGlzLmRpdi5pZCsiX2JiIjthLmNsYXNzTmFtZT0ib2xCYWNrQnVmZmVyIjthLnN0eWxlLnBvc2l0aW9uPSJhYnNvbHV0ZSI7dmFyIGI9dGhpcy5tYXA7YS5zdHlsZS56SW5kZXg9InJlc2l6ZSI9PT10aGlzLnRyYW5zaXRpb25FZmZlY3Q/dGhpcy5nZXRaSW5kZXgoKS0xOmIuWl9JTkRFWF9CQVNFLkJhc2VMYXllci0KKGIuZ2V0TnVtTGF5ZXJzKCktYi5nZXRMYXllckluZGV4KHRoaXMpKTtmb3IodmFyIGI9MCxjPXRoaXMuZ3JpZC5sZW5ndGg7YjxjO2IrKylmb3IodmFyIGQ9MCxlPXRoaXMuZ3JpZFtiXS5sZW5ndGg7ZDxlO2QrKyl7dmFyIGY9dGhpcy5ncmlkW2JdW2RdLGc9dGhpcy5ncmlkW2JdW2RdLmNyZWF0ZUJhY2tCdWZmZXIoKTtnJiYoZy5faT1iLGcuX2o9ZCxnLl93PWYuc2l6ZS53LGcuX2g9Zi5zaXplLmgsZy5pZD1mLmlkKyJfYmIiLGEuYXBwZW5kQ2hpbGQoZykpfX1yZXR1cm4gYX0scmVtb3ZlQmFja0J1ZmZlcjpmdW5jdGlvbigpe2lmKHRoaXMuX3RyYW5zaXRpb25FbGVtZW50KXtmb3IodmFyIGE9dGhpcy50cmFuc2l0aW9uZW5kRXZlbnRzLmxlbmd0aC0xOzA8PWE7LS1hKU9wZW5MYXllcnMuRXZlbnQuc3RvcE9ic2VydmluZyh0aGlzLl90cmFuc2l0aW9uRWxlbWVudCx0aGlzLnRyYW5zaXRpb25lbmRFdmVudHNbYV0sdGhpcy5fcmVtb3ZlQmFja0J1ZmZlcik7ZGVsZXRlIHRoaXMuX3RyYW5zaXRpb25FbGVtZW50fXRoaXMuYmFja0J1ZmZlciYmCih0aGlzLmJhY2tCdWZmZXIucGFyZW50Tm9kZSYmdGhpcy5iYWNrQnVmZmVyLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5iYWNrQnVmZmVyKSx0aGlzLmJhY2tCdWZmZXJSZXNvbHV0aW9uPXRoaXMuYmFja0J1ZmZlcj1udWxsLG51bGwhPT10aGlzLmJhY2tCdWZmZXJUaW1lcklkJiYod2luZG93LmNsZWFyVGltZW91dCh0aGlzLmJhY2tCdWZmZXJUaW1lcklkKSx0aGlzLmJhY2tCdWZmZXJUaW1lcklkPW51bGwpKX0sbW92ZUJ5UHg6ZnVuY3Rpb24oYSxiKXt0aGlzLnNpbmdsZVRpbGV8fHRoaXMubW92ZUdyaWRkZWRUaWxlcygpfSxzZXRUaWxlU2l6ZTpmdW5jdGlvbihhKXt0aGlzLnNpbmdsZVRpbGUmJihhPXRoaXMubWFwLmdldFNpemUoKSxhLmg9cGFyc2VJbnQoYS5oKnRoaXMucmF0aW8sMTApLGEudz1wYXJzZUludChhLncqdGhpcy5yYXRpbywxMCkpO09wZW5MYXllcnMuTGF5ZXIuSFRUUFJlcXVlc3QucHJvdG90eXBlLnNldFRpbGVTaXplLmFwcGx5KHRoaXMsW2FdKX0sZ2V0VGlsZXNCb3VuZHM6ZnVuY3Rpb24oKXt2YXIgYT0KbnVsbCxiPXRoaXMuZ3JpZC5sZW5ndGg7aWYoYil2YXIgYT10aGlzLmdyaWRbYi0xXVswXS5ib3VuZHMsYj10aGlzLmdyaWRbMF0ubGVuZ3RoKmEuZ2V0V2lkdGgoKSxjPXRoaXMuZ3JpZC5sZW5ndGgqYS5nZXRIZWlnaHQoKSxhPW5ldyBPcGVuTGF5ZXJzLkJvdW5kcyhhLmxlZnQsYS5ib3R0b20sYS5sZWZ0K2IsYS5ib3R0b20rYyk7cmV0dXJuIGF9LGluaXRTaW5nbGVUaWxlOmZ1bmN0aW9uKGEpe3RoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgicmV0aWxlIik7dmFyIGI9YS5nZXRDZW50ZXJMb25MYXQoKSxjPWEuZ2V0V2lkdGgoKSp0aGlzLnJhdGlvO2E9YS5nZXRIZWlnaHQoKSp0aGlzLnJhdGlvO2I9bmV3IE9wZW5MYXllcnMuQm91bmRzKGIubG9uLWMvMixiLmxhdC1hLzIsYi5sb24rYy8yLGIubGF0K2EvMik7Yz10aGlzLm1hcC5nZXRMYXllclB4RnJvbUxvbkxhdCh7bG9uOmIubGVmdCxsYXQ6Yi50b3B9KTt0aGlzLmdyaWQubGVuZ3RofHwodGhpcy5ncmlkWzBdPVtdKTsoYT10aGlzLmdyaWRbMF1bMF0pPwphLm1vdmVUbyhiLGMpOihhPXRoaXMuYWRkVGlsZShiLGMpLHRoaXMuYWRkVGlsZU1vbml0b3JpbmdIb29rcyhhKSxhLmRyYXcoKSx0aGlzLmdyaWRbMF1bMF09YSk7dGhpcy5yZW1vdmVFeGNlc3NUaWxlcygxLDEpO3RoaXMuZ3JpZFJlc29sdXRpb249dGhpcy5nZXRTZXJ2ZXJSZXNvbHV0aW9uKCl9LGNhbGN1bGF0ZUdyaWRMYXlvdXQ6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWMqdGhpcy50aWxlU2l6ZS53O2MqPXRoaXMudGlsZVNpemUuaDt2YXIgZT1NYXRoLmZsb29yKChhLmxlZnQtYi5sb24pL2QpLXRoaXMuYnVmZmVyLGY9dGhpcy5yb3dTaWduO2E9TWF0aFt+Zj8iZmxvb3IiOiJjZWlsIl0oZiooYi5sYXQtYS50b3ArYykvYyktdGhpcy5idWZmZXIqZjtyZXR1cm57dGlsZWxvbjpkLHRpbGVsYXQ6YyxzdGFydGNvbDplLHN0YXJ0cm93OmF9fSxnZXRUaWxlT3JpZ2luOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy50aWxlT3JpZ2luO2lmKCFhKXZhciBhPXRoaXMuZ2V0TWF4RXh0ZW50KCksCmI9e3RsOlsibGVmdCIsInRvcCJdLHRyOlsicmlnaHQiLCJ0b3AiXSxibDpbImxlZnQiLCJib3R0b20iXSxicjpbInJpZ2h0IiwiYm90dG9tIl19W3RoaXMudGlsZU9yaWdpbkNvcm5lcl0sYT1uZXcgT3BlbkxheWVycy5Mb25MYXQoYVtiWzBdXSxhW2JbMV1dKTtyZXR1cm4gYX0sZ2V0VGlsZUJvdW5kc0ZvckdyaWRJbmRleDpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuZ2V0VGlsZU9yaWdpbigpLGQ9dGhpcy5ncmlkTGF5b3V0LGU9ZC50aWxlbG9uLGY9ZC50aWxlbGF0LGc9ZC5zdGFydGNvbCxkPWQuc3RhcnRyb3csaD10aGlzLnJvd1NpZ247cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLkJvdW5kcyhjLmxvbisoZytiKSplLGMubGF0LShkK2EqaCkqZipoLGMubG9uKyhnK2IrMSkqZSxjLmxhdC0oZCsoYS0xKSpoKSpmKmgpfSxpbml0R3JpZGRlZFRpbGVzOmZ1bmN0aW9uKGEpe3RoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgicmV0aWxlIik7dmFyIGI9dGhpcy5tYXAuZ2V0U2l6ZSgpLGM9dGhpcy5nZXRUaWxlT3JpZ2luKCksCmQ9dGhpcy5tYXAuZ2V0UmVzb2x1dGlvbigpLGU9dGhpcy5nZXRTZXJ2ZXJSZXNvbHV0aW9uKCksZj1kL2UsZD10aGlzLnRpbGVTaXplLncvZixmPXRoaXMudGlsZVNpemUuaC9mLGc9TWF0aC5jZWlsKGIuaC9mKSsyKnRoaXMuYnVmZmVyKzEsYj1NYXRoLmNlaWwoYi53L2QpKzIqdGhpcy5idWZmZXIrMTt0aGlzLmdyaWRMYXlvdXQ9ZT10aGlzLmNhbGN1bGF0ZUdyaWRMYXlvdXQoYSxjLGUpO3ZhciBjPWUudGlsZWxvbixoPWUudGlsZWxhdCxlPXRoaXMubWFwLmxheWVyQ29udGFpbmVyT3JpZ2luUHgueCxrPXRoaXMubWFwLmxheWVyQ29udGFpbmVyT3JpZ2luUHgueSxsPXRoaXMuZ2V0VGlsZUJvdW5kc0ZvckdyaWRJbmRleCgwLDApLG09dGhpcy5tYXAuZ2V0Vmlld1BvcnRQeEZyb21Mb25MYXQobmV3IE9wZW5MYXllcnMuTG9uTGF0KGwubGVmdCxsLnRvcCkpO20ueD1NYXRoLnJvdW5kKG0ueCktZTttLnk9TWF0aC5yb3VuZChtLnkpLWs7dmFyIGU9W10saz10aGlzLm1hcC5nZXRDZW50ZXIoKSwKbj0wO2Rve3ZhciBwPXRoaXMuZ3JpZFtuXTtwfHwocD1bXSx0aGlzLmdyaWQucHVzaChwKSk7dmFyIHE9MDtkb3t2YXIgbD10aGlzLmdldFRpbGVCb3VuZHNGb3JHcmlkSW5kZXgobixxKSxyPW0uY2xvbmUoKTtyLngrPXEqTWF0aC5yb3VuZChkKTtyLnkrPW4qTWF0aC5yb3VuZChmKTt2YXIgcz1wW3FdO3M/cy5tb3ZlVG8obCxyLCExKToocz10aGlzLmFkZFRpbGUobCxyKSx0aGlzLmFkZFRpbGVNb25pdG9yaW5nSG9va3MocykscC5wdXNoKHMpKTtyPWwuZ2V0Q2VudGVyTG9uTGF0KCk7ZS5wdXNoKHt0aWxlOnMsZGlzdGFuY2U6TWF0aC5wb3coci5sb24tay5sb24sMikrTWF0aC5wb3coci5sYXQtay5sYXQsMil9KTtxKz0xfXdoaWxlKGwucmlnaHQ8PWEucmlnaHQrYyp0aGlzLmJ1ZmZlcnx8cTxiKTtuKz0xfXdoaWxlKGwuYm90dG9tPj1hLmJvdHRvbS1oKnRoaXMuYnVmZmVyfHxuPGcpO3RoaXMucmVtb3ZlRXhjZXNzVGlsZXMobixxKTt0aGlzLmdyaWRSZXNvbHV0aW9uPWQ9dGhpcy5nZXRTZXJ2ZXJSZXNvbHV0aW9uKCk7CmUuc29ydChmdW5jdGlvbihhLGIpe3JldHVybiBhLmRpc3RhbmNlLWIuZGlzdGFuY2V9KTthPTA7Zm9yKGQ9ZS5sZW5ndGg7YTxkOysrYSllW2FdLnRpbGUuZHJhdygpfSxnZXRNYXhFeHRlbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tYXhFeHRlbnR9LGFkZFRpbGU6ZnVuY3Rpb24oYSxiKXt2YXIgYz1uZXcgdGhpcy50aWxlQ2xhc3ModGhpcyxiLGEsbnVsbCx0aGlzLnRpbGVTaXplLHRoaXMudGlsZU9wdGlvbnMpO3RoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgiYWRkdGlsZSIse3RpbGU6Y30pO3JldHVybiBjfSxhZGRUaWxlTW9uaXRvcmluZ0hvb2tzOmZ1bmN0aW9uKGEpe2Eub25Mb2FkU3RhcnQ9ZnVuY3Rpb24oKXshMT09PXRoaXMubG9hZGluZyYmKHRoaXMubG9hZGluZz0hMCx0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoImxvYWRzdGFydCIpKTt0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoInRpbGVsb2Fkc3RhcnQiLHt0aWxlOmF9KTt0aGlzLm51bUxvYWRpbmdUaWxlcysrOwohdGhpcy5zaW5nbGVUaWxlJiYodGhpcy5iYWNrQnVmZmVyJiZ0aGlzLmdyaWRSZXNvbHV0aW9uPT09dGhpcy5iYWNrQnVmZmVyUmVzb2x1dGlvbikmJk9wZW5MYXllcnMuRWxlbWVudC5hZGRDbGFzcyhhLmdldFRpbGUoKSwib2xUaWxlUmVwbGFjaW5nIil9O2Eub25Mb2FkRW5kPWZ1bmN0aW9uKGIpe3RoaXMubnVtTG9hZGluZ1RpbGVzLS07Yj0idW5sb2FkIj09PWIudHlwZTt0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoInRpbGVsb2FkZWQiLHt0aWxlOmEsYWJvcnRlZDpifSk7aWYoIXRoaXMuc2luZ2xlVGlsZSYmIWImJnRoaXMuYmFja0J1ZmZlciYmdGhpcy5ncmlkUmVzb2x1dGlvbj09PXRoaXMuYmFja0J1ZmZlclJlc29sdXRpb24pe3ZhciBjPWEuZ2V0VGlsZSgpO2lmKCJub25lIj09PU9wZW5MYXllcnMuRWxlbWVudC5nZXRTdHlsZShjLCJkaXNwbGF5Iikpe3ZhciBkPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGEuaWQrIl9iYiIpO2QmJmQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChkKX1PcGVuTGF5ZXJzLkVsZW1lbnQucmVtb3ZlQ2xhc3MoYywKIm9sVGlsZVJlcGxhY2luZyIpfWlmKDA9PT10aGlzLm51bUxvYWRpbmdUaWxlcyl7aWYodGhpcy5iYWNrQnVmZmVyKWlmKDA9PT10aGlzLmJhY2tCdWZmZXIuY2hpbGROb2Rlcy5sZW5ndGgpdGhpcy5yZW1vdmVCYWNrQnVmZmVyKCk7ZWxzZXt0aGlzLl90cmFuc2l0aW9uRWxlbWVudD1iP3RoaXMuZGl2Lmxhc3RDaGlsZDphLmltZ0RpdjtiPXRoaXMudHJhbnNpdGlvbmVuZEV2ZW50cztmb3IoYz1iLmxlbmd0aC0xOzA8PWM7LS1jKU9wZW5MYXllcnMuRXZlbnQub2JzZXJ2ZSh0aGlzLl90cmFuc2l0aW9uRWxlbWVudCxiW2NdLHRoaXMuX3JlbW92ZUJhY2tCdWZmZXIpO3RoaXMuYmFja0J1ZmZlclRpbWVySWQ9d2luZG93LnNldFRpbWVvdXQodGhpcy5fcmVtb3ZlQmFja0J1ZmZlcix0aGlzLnJlbW92ZUJhY2tCdWZmZXJEZWxheSl9dGhpcy5sb2FkaW5nPSExO3RoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgibG9hZGVuZCIpfX07YS5vbkxvYWRFcnJvcj1mdW5jdGlvbigpe3RoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgidGlsZWVycm9yIiwKe3RpbGU6YX0pfTthLmV2ZW50cy5vbih7bG9hZHN0YXJ0OmEub25Mb2FkU3RhcnQsbG9hZGVuZDphLm9uTG9hZEVuZCx1bmxvYWQ6YS5vbkxvYWRFbmQsbG9hZGVycm9yOmEub25Mb2FkRXJyb3Isc2NvcGU6dGhpc30pfSxyZW1vdmVUaWxlTW9uaXRvcmluZ0hvb2tzOmZ1bmN0aW9uKGEpe2EudW5sb2FkKCk7YS5ldmVudHMudW4oe2xvYWRzdGFydDphLm9uTG9hZFN0YXJ0LGxvYWRlbmQ6YS5vbkxvYWRFbmQsdW5sb2FkOmEub25Mb2FkRW5kLGxvYWRlcnJvcjphLm9uTG9hZEVycm9yLHNjb3BlOnRoaXN9KX0sbW92ZUdyaWRkZWRUaWxlczpmdW5jdGlvbigpe2Zvcih2YXIgYT10aGlzLmJ1ZmZlcisxOzspe3ZhciBiPXRoaXMuZ3JpZFswXVswXSxjPWIucG9zaXRpb24ueCt0aGlzLm1hcC5sYXllckNvbnRhaW5lck9yaWdpblB4LngsYj1iLnBvc2l0aW9uLnkrdGhpcy5tYXAubGF5ZXJDb250YWluZXJPcmlnaW5QeC55LGQ9dGhpcy5nZXRTZXJ2ZXJSZXNvbHV0aW9uKCkvdGhpcy5tYXAuZ2V0UmVzb2x1dGlvbigpLApkPXt3Ok1hdGgucm91bmQodGhpcy50aWxlU2l6ZS53KmQpLGg6TWF0aC5yb3VuZCh0aGlzLnRpbGVTaXplLmgqZCl9O2lmKGM+LWQudyooYS0xKSl0aGlzLnNoaWZ0Q29sdW1uKCEwLGQpO2Vsc2UgaWYoYzwtZC53KmEpdGhpcy5zaGlmdENvbHVtbighMSxkKTtlbHNlIGlmKGI+LWQuaCooYS0xKSl0aGlzLnNoaWZ0Um93KCEwLGQpO2Vsc2UgaWYoYjwtZC5oKmEpdGhpcy5zaGlmdFJvdyghMSxkKTtlbHNlIGJyZWFrfX0sc2hpZnRSb3c6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmdyaWQsZD1hPzA6Yy5sZW5ndGgtMSxlPWE/LTE6MTt0aGlzLmdyaWRMYXlvdXQuc3RhcnRyb3crPWUqdGhpcy5yb3dTaWduO2Zvcih2YXIgZj1jW2RdLGc9Y1thPyJwb3AiOiJzaGlmdCJdKCksaD0wLGs9Zy5sZW5ndGg7aDxrO2grKyl7dmFyIGw9Z1toXSxtPWZbaF0ucG9zaXRpb24uY2xvbmUoKTttLnkrPWIuaCplO2wubW92ZVRvKHRoaXMuZ2V0VGlsZUJvdW5kc0ZvckdyaWRJbmRleChkLGgpLG0pfWNbYT8KInVuc2hpZnQiOiJwdXNoIl0oZyl9LHNoaWZ0Q29sdW1uOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5ncmlkLGQ9YT8wOmNbMF0ubGVuZ3RoLTEsZT1hPy0xOjE7dGhpcy5ncmlkTGF5b3V0LnN0YXJ0Y29sKz1lO2Zvcih2YXIgZj0wLGc9Yy5sZW5ndGg7ZjxnO2YrKyl7dmFyIGg9Y1tmXSxrPWhbZF0ucG9zaXRpb24uY2xvbmUoKSxsPWhbYT8icG9wIjoic2hpZnQiXSgpO2sueCs9Yi53KmU7bC5tb3ZlVG8odGhpcy5nZXRUaWxlQm91bmRzRm9yR3JpZEluZGV4KGYsZCksayk7aFthPyJ1bnNoaWZ0IjoicHVzaCJdKGwpfX0scmVtb3ZlRXhjZXNzVGlsZXM6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGMsZDt0aGlzLmdyaWQubGVuZ3RoPmE7KXt2YXIgZT10aGlzLmdyaWQucG9wKCk7Yz0wO2ZvcihkPWUubGVuZ3RoO2M8ZDtjKyspe3ZhciBmPWVbY107dGhpcy5kZXN0cm95VGlsZShmKX19Yz0wO2ZvcihkPXRoaXMuZ3JpZC5sZW5ndGg7YzxkO2MrKylmb3IoO3RoaXMuZ3JpZFtjXS5sZW5ndGg+CmI7KWU9dGhpcy5ncmlkW2NdLGY9ZS5wb3AoKSx0aGlzLmRlc3Ryb3lUaWxlKGYpfSxvbk1hcFJlc2l6ZTpmdW5jdGlvbigpe3RoaXMuc2luZ2xlVGlsZSYmKHRoaXMuY2xlYXJHcmlkKCksdGhpcy5zZXRUaWxlU2l6ZSgpKX0sZ2V0VGlsZUJvdW5kczpmdW5jdGlvbihhKXt2YXIgYj10aGlzLm1heEV4dGVudCxjPXRoaXMuZ2V0UmVzb2x1dGlvbigpLGQ9Yyp0aGlzLnRpbGVTaXplLncsYz1jKnRoaXMudGlsZVNpemUuaCxlPXRoaXMuZ2V0TG9uTGF0RnJvbVZpZXdQb3J0UHgoYSk7YT1iLmxlZnQrZCpNYXRoLmZsb29yKChlLmxvbi1iLmxlZnQpL2QpO2I9Yi5ib3R0b20rYypNYXRoLmZsb29yKChlLmxhdC1iLmJvdHRvbSkvYyk7cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLkJvdW5kcyhhLGIsYStkLGIrYyl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuTGF5ZXIuR3JpZCJ9KTtPcGVuTGF5ZXJzLkZvcm1hdC5BcmNYTUw9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkZvcm1hdC5YTUwse2ZvbnRTdHlsZUtleXM6ImFudGlhbGlhc2luZyBibG9ja291dCBmb250IGZvbnRjb2xvciBmb250c2l6ZSBmb250c3R5bGUgZ2xvd2luZyBpbnRlcnZhbCBvdXRsaW5lIHByaW50bW9kZSBzaGFkb3cgdHJhbnNwYXJlbmN5Ii5zcGxpdCgiICIpLHJlcXVlc3Q6bnVsbCxyZXNwb25zZTpudWxsLGluaXRpYWxpemU6ZnVuY3Rpb24oYSl7dGhpcy5yZXF1ZXN0PW5ldyBPcGVuTGF5ZXJzLkZvcm1hdC5BcmNYTUwuUmVxdWVzdDt0aGlzLnJlc3BvbnNlPW5ldyBPcGVuTGF5ZXJzLkZvcm1hdC5BcmNYTUwuUmVzcG9uc2U7aWYoYSlpZigiZmVhdHVyZSI9PWEucmVxdWVzdHR5cGUpe3RoaXMucmVxdWVzdC5nZXRfaW1hZ2U9bnVsbDt2YXIgYj10aGlzLnJlcXVlc3QuZ2V0X2ZlYXR1cmUucXVlcnk7dGhpcy5hZGRDb29yZFN5cyhiLmZlYXR1cmVjb29yZHN5cyxhLmZlYXR1cmVDb29yZFN5cyk7CnRoaXMuYWRkQ29vcmRTeXMoYi5maWx0ZXJjb29yZHN5cyxhLmZpbHRlckNvb3JkU3lzKTthLnBvbHlnb24/KGIuaXNzcGF0aWFsPSEwLGIuc3BhdGlhbGZpbHRlci5wb2x5Z29uPWEucG9seWdvbik6YS5lbnZlbG9wZSYmKGIuaXNzcGF0aWFsPSEwLGIuc3BhdGlhbGZpbHRlci5lbnZlbG9wZT17bWlueDowLG1pbnk6MCxtYXh4OjAsbWF4eTowfSx0aGlzLnBhcnNlRW52ZWxvcGUoYi5zcGF0aWFsZmlsdGVyLmVudmVsb3BlLGEuZW52ZWxvcGUpKX1lbHNlImltYWdlIj09YS5yZXF1ZXN0dHlwZT8odGhpcy5yZXF1ZXN0LmdldF9mZWF0dXJlPW51bGwsYj10aGlzLnJlcXVlc3QuZ2V0X2ltYWdlLnByb3BlcnRpZXMsdGhpcy5wYXJzZUVudmVsb3BlKGIuZW52ZWxvcGUsYS5lbnZlbG9wZSksdGhpcy5hZGRMYXllcnMoYi5sYXllcmxpc3QsYS5sYXllcnMpLHRoaXMuYWRkSW1hZ2VTaXplKGIuaW1hZ2VzaXplLGEudGlsZVNpemUpLHRoaXMuYWRkQ29vcmRTeXMoYi5mZWF0dXJlY29vcmRzeXMsCmEuZmVhdHVyZUNvb3JkU3lzKSx0aGlzLmFkZENvb3JkU3lzKGIuZmlsdGVyY29vcmRzeXMsYS5maWx0ZXJDb29yZFN5cykpOnRoaXMucmVxdWVzdD1udWxsO09wZW5MYXllcnMuRm9ybWF0LlhNTC5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLFthXSl9LHBhcnNlRW52ZWxvcGU6ZnVuY3Rpb24oYSxiKXtiJiY0PT1iLmxlbmd0aCYmKGEubWlueD1iWzBdLGEubWlueT1iWzFdLGEubWF4eD1iWzJdLGEubWF4eT1iWzNdKX0sYWRkTGF5ZXJzOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTAsZD1iLmxlbmd0aDtjPGQ7YysrKWEucHVzaChiW2NdKX0sYWRkSW1hZ2VTaXplOmZ1bmN0aW9uKGEsYil7bnVsbCE9PWImJihhLndpZHRoPWIudyxhLmhlaWdodD1iLmgsYS5wcmludHdpZHRoPWIudyxhLnByaW50aGVpZ2h0PWIuaCl9LGFkZENvb3JkU3lzOmZ1bmN0aW9uKGEsYil7InN0cmluZyI9PXR5cGVvZiBiPyhhLmlkPXBhcnNlSW50KGIpLGEuc3RyaW5nPWIpOiJvYmplY3QiPT10eXBlb2YgYiYmCm51bGwhPT1iLnByb2omJihhLmlkPWIucHJvai5zcnNQcm9qTnVtYmVyLGEuc3RyaW5nPWIucHJvai5zcnNDb2RlKX0saXNlcnJvcjpmdW5jdGlvbihhKXt2YXIgYj1udWxsO2E/KGE9T3BlbkxheWVycy5Gb3JtYXQuWE1MLnByb3RvdHlwZS5yZWFkLmFwcGx5KHRoaXMsW2FdKSxhPWEuZG9jdW1lbnRFbGVtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJFUlJPUiIpLGI9bnVsbCE9PWEmJjA8YS5sZW5ndGgpOmI9IiIhPT10aGlzLnJlc3BvbnNlLmVycm9yO3JldHVybiBifSxyZWFkOmZ1bmN0aW9uKGEpeyJzdHJpbmciPT10eXBlb2YgYSYmKGE9T3BlbkxheWVycy5Gb3JtYXQuWE1MLnByb3RvdHlwZS5yZWFkLmFwcGx5KHRoaXMsW2FdKSk7dmFyIGI9bnVsbDthJiZhLmRvY3VtZW50RWxlbWVudCYmKGI9IkFSQ1hNTCI9PWEuZG9jdW1lbnRFbGVtZW50Lm5vZGVOYW1lP2EuZG9jdW1lbnRFbGVtZW50OmEuZG9jdW1lbnRFbGVtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJBUkNYTUwiKVswXSk7CmlmKCFifHwicGFyc2VyZXJyb3IiPT09Yi5maXJzdENoaWxkLm5vZGVOYW1lKXt2YXIgYyxkO3RyeXtjPWEuZmlyc3RDaGlsZC5ub2RlVmFsdWUsZD1hLmZpcnN0Q2hpbGQuY2hpbGROb2Rlc1sxXS5maXJzdENoaWxkLm5vZGVWYWx1ZX1jYXRjaChlKXt9dGhyb3d7bWVzc2FnZToiRXJyb3IgcGFyc2luZyB0aGUgQXJjWE1MIHJlcXVlc3QiLGVycm9yOmMsc291cmNlOmR9O31yZXR1cm4gdGhpcy5wYXJzZVJlc3BvbnNlKGIpfSx3cml0ZTpmdW5jdGlvbihhKXthfHwoYT10aGlzLnJlcXVlc3QpO3ZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TKCIiLCJBUkNYTUwiKTtiLnNldEF0dHJpYnV0ZSgidmVyc2lvbiIsIjEuMSIpO3ZhciBjPXRoaXMuY3JlYXRlRWxlbWVudE5TKCIiLCJSRVFVRVNUIik7aWYobnVsbCE9YS5nZXRfaW1hZ2Upe3ZhciBkPXRoaXMuY3JlYXRlRWxlbWVudE5TKCIiLCJHRVRfSU1BR0UiKTtjLmFwcGVuZENoaWxkKGQpO3ZhciBlPXRoaXMuY3JlYXRlRWxlbWVudE5TKCIiLAoiUFJPUEVSVElFUyIpO2QuYXBwZW5kQ2hpbGQoZSk7YT1hLmdldF9pbWFnZS5wcm9wZXJ0aWVzO251bGwhPWEuZmVhdHVyZWNvb3Jkc3lzJiYoZD10aGlzLmNyZWF0ZUVsZW1lbnROUygiIiwiRkVBVFVSRUNPT1JEU1lTIiksZS5hcHBlbmRDaGlsZChkKSwwPT09YS5mZWF0dXJlY29vcmRzeXMuaWQ/ZC5zZXRBdHRyaWJ1dGUoInN0cmluZyIsYS5mZWF0dXJlY29vcmRzeXMuc3RyaW5nKTpkLnNldEF0dHJpYnV0ZSgiaWQiLGEuZmVhdHVyZWNvb3Jkc3lzLmlkKSk7bnVsbCE9YS5maWx0ZXJjb29yZHN5cyYmKGQ9dGhpcy5jcmVhdGVFbGVtZW50TlMoIiIsIkZJTFRFUkNPT1JEU1lTIiksZS5hcHBlbmRDaGlsZChkKSwwPT09YS5maWx0ZXJjb29yZHN5cy5pZD9kLnNldEF0dHJpYnV0ZSgic3RyaW5nIixhLmZpbHRlcmNvb3Jkc3lzLnN0cmluZyk6ZC5zZXRBdHRyaWJ1dGUoImlkIixhLmZpbHRlcmNvb3Jkc3lzLmlkKSk7bnVsbCE9YS5lbnZlbG9wZSYmKGQ9dGhpcy5jcmVhdGVFbGVtZW50TlMoIiIsCiJFTlZFTE9QRSIpLGUuYXBwZW5kQ2hpbGQoZCksZC5zZXRBdHRyaWJ1dGUoIm1pbngiLGEuZW52ZWxvcGUubWlueCksZC5zZXRBdHRyaWJ1dGUoIm1pbnkiLGEuZW52ZWxvcGUubWlueSksZC5zZXRBdHRyaWJ1dGUoIm1heHgiLGEuZW52ZWxvcGUubWF4eCksZC5zZXRBdHRyaWJ1dGUoIm1heHkiLGEuZW52ZWxvcGUubWF4eSkpO2Q9dGhpcy5jcmVhdGVFbGVtZW50TlMoIiIsIklNQUdFU0laRSIpO2UuYXBwZW5kQ2hpbGQoZCk7ZC5zZXRBdHRyaWJ1dGUoImhlaWdodCIsYS5pbWFnZXNpemUuaGVpZ2h0KTtkLnNldEF0dHJpYnV0ZSgid2lkdGgiLGEuaW1hZ2VzaXplLndpZHRoKTtpZihhLmltYWdlc2l6ZS5oZWlnaHQhPWEuaW1hZ2VzaXplLnByaW50aGVpZ2h0fHxhLmltYWdlc2l6ZS53aWR0aCE9YS5pbWFnZXNpemUucHJpbnR3aWR0aClkLnNldEF0dHJpYnV0ZSgicHJpbnRoZWlnaHQiLGEuaW1hZ2VzaXplLnByaW50aGVpZ2h0KSxkLnNldEFycnRpYnV0ZSgicHJpbnR3aWR0aCIsYS5pbWFnZXNpemUucHJpbnR3aWR0aCk7Cm51bGwhPWEuYmFja2dyb3VuZCYmKGQ9dGhpcy5jcmVhdGVFbGVtZW50TlMoIiIsIkJBQ0tHUk9VTkQiKSxlLmFwcGVuZENoaWxkKGQpLGQuc2V0QXR0cmlidXRlKCJjb2xvciIsYS5iYWNrZ3JvdW5kLmNvbG9yLnIrIiwiK2EuYmFja2dyb3VuZC5jb2xvci5nKyIsIithLmJhY2tncm91bmQuY29sb3IuYiksbnVsbCE9PWEuYmFja2dyb3VuZC50cmFuc2NvbG9yJiZkLnNldEF0dHJpYnV0ZSgidHJhbnNjb2xvciIsYS5iYWNrZ3JvdW5kLnRyYW5zY29sb3IucisiLCIrYS5iYWNrZ3JvdW5kLnRyYW5zY29sb3IuZysiLCIrYS5iYWNrZ3JvdW5kLnRyYW5zY29sb3IuYikpO2lmKG51bGwhPWEubGF5ZXJsaXN0JiYwPGEubGF5ZXJsaXN0Lmxlbmd0aClmb3IoZD10aGlzLmNyZWF0ZUVsZW1lbnROUygiIiwiTEFZRVJMSVNUIiksZS5hcHBlbmRDaGlsZChkKSxlPTA7ZTxhLmxheWVybGlzdC5sZW5ndGg7ZSsrKXt2YXIgZj10aGlzLmNyZWF0ZUVsZW1lbnROUygiIiwiTEFZRVJERUYiKTtkLmFwcGVuZENoaWxkKGYpOwpmLnNldEF0dHJpYnV0ZSgiaWQiLGEubGF5ZXJsaXN0W2VdLmlkKTtmLnNldEF0dHJpYnV0ZSgidmlzaWJsZSIsYS5sYXllcmxpc3RbZV0udmlzaWJsZSk7aWYoIm9iamVjdCI9PXR5cGVvZiBhLmxheWVybGlzdFtlXS5xdWVyeSl7dmFyIGc9YS5sYXllcmxpc3RbZV0ucXVlcnk7aWYoMD5nLndoZXJlLmxlbmd0aCljb250aW51ZTt2YXIgaD1udWxsLGg9ImJvb2xlYW4iPT10eXBlb2YgZy5zcGF0aWFsZmlsdGVyJiZnLnNwYXRpYWxmaWx0ZXI/dGhpcy5jcmVhdGVFbGVtZW50TlMoIiIsIlNQQVRJQUxRVUVSWSIpOnRoaXMuY3JlYXRlRWxlbWVudE5TKCIiLCJRVUVSWSIpO2guc2V0QXR0cmlidXRlKCJ3aGVyZSIsZy53aGVyZSk7Im51bWJlciI9PXR5cGVvZiBnLmFjY3VyYWN5JiYwPGcuYWNjdXJhY3kmJmguc2V0QXR0cmlidXRlKCJhY2N1cmFjeSIsZy5hY2N1cmFjeSk7Im51bWJlciI9PXR5cGVvZiBnLmZlYXR1cmVsaW1pdCYmMkUzPmcuZmVhdHVyZWxpbWl0JiZoLnNldEF0dHJpYnV0ZSgiZmVhdHVyZWxpbWl0IiwKZy5mZWF0dXJlbGltaXQpOyJzdHJpbmciPT10eXBlb2YgZy5zdWJmaWVsZHMmJiIjQUxMIyIhPWcuc3ViZmllbGRzJiZoLnNldEF0dHJpYnV0ZSgic3ViZmllbGRzIixnLnN1YmZpZWxkcyk7InN0cmluZyI9PXR5cGVvZiBnLmpvaW5leHByZXNzaW9uJiYwPGcuam9pbmV4cHJlc3Npb24ubGVuZ3RoJiZoLnNldEF0dHJpYnV0ZSgiam9pbmV4cHJlc3Npb24iLGcuam9pbmV4cHJlc3Npb24pOyJzdHJpbmciPT10eXBlb2YgZy5qb2ludGFibGVzJiYwPGcuam9pbnRhYmxlcy5sZW5ndGgmJmguc2V0QXR0cmlidXRlKCJqb2ludGFibGVzIixnLmpvaW50YWJsZXMpO2YuYXBwZW5kQ2hpbGQoaCl9Im9iamVjdCI9PXR5cGVvZiBhLmxheWVybGlzdFtlXS5yZW5kZXJlciYmdGhpcy5hZGRSZW5kZXJlcihmLGEubGF5ZXJsaXN0W2VdLnJlbmRlcmVyKX19ZWxzZSBudWxsIT1hLmdldF9mZWF0dXJlJiYoZD10aGlzLmNyZWF0ZUVsZW1lbnROUygiIiwiR0VUX0ZFQVRVUkVTIiksZC5zZXRBdHRyaWJ1dGUoIm91dHB1dG1vZGUiLAoibmV3eG1sIiksZC5zZXRBdHRyaWJ1dGUoImNoZWNrZXNjIiwidHJ1ZSIpLGEuZ2V0X2ZlYXR1cmUuZ2VvbWV0cnk/ZC5zZXRBdHRyaWJ1dGUoImdlb21ldHJ5IixhLmdldF9mZWF0dXJlLmdlb21ldHJ5KTpkLnNldEF0dHJpYnV0ZSgiZ2VvbWV0cnkiLCJmYWxzZSIpLGEuZ2V0X2ZlYXR1cmUuY29tcGFjdCYmZC5zZXRBdHRyaWJ1dGUoImNvbXBhY3QiLGEuZ2V0X2ZlYXR1cmUuY29tcGFjdCksIm51bWJlciI9PWEuZ2V0X2ZlYXR1cmUuZmVhdHVyZWxpbWl0JiZkLnNldEF0dHJpYnV0ZSgiZmVhdHVyZWxpbWl0IixhLmdldF9mZWF0dXJlLmZlYXR1cmVsaW1pdCksZC5zZXRBdHRyaWJ1dGUoImdsb2JhbGVudmVsb3BlIiwidHJ1ZSIpLGMuYXBwZW5kQ2hpbGQoZCksbnVsbCE9YS5nZXRfZmVhdHVyZS5sYXllciYmMDxhLmdldF9mZWF0dXJlLmxheWVyLmxlbmd0aCYmKGU9dGhpcy5jcmVhdGVFbGVtZW50TlMoIiIsIkxBWUVSIiksZS5zZXRBdHRyaWJ1dGUoImlkIixhLmdldF9mZWF0dXJlLmxheWVyKSwKZC5hcHBlbmRDaGlsZChlKSksYT1hLmdldF9mZWF0dXJlLnF1ZXJ5LG51bGwhPWEmJihlPW51bGwsZT1hLmlzc3BhdGlhbD90aGlzLmNyZWF0ZUVsZW1lbnROUygiIiwiU1BBVElBTFFVRVJZIik6dGhpcy5jcmVhdGVFbGVtZW50TlMoIiIsIlFVRVJZIiksZC5hcHBlbmRDaGlsZChlKSwibnVtYmVyIj09dHlwZW9mIGEuYWNjdXJhY3kmJmUuc2V0QXR0cmlidXRlKCJhY2N1cmFjeSIsYS5hY2N1cmFjeSksbnVsbCE9YS5mZWF0dXJlY29vcmRzeXMmJihkPXRoaXMuY3JlYXRlRWxlbWVudE5TKCIiLCJGRUFUVVJFQ09PUkRTWVMiKSwwPT1hLmZlYXR1cmVjb29yZHN5cy5pZD9kLnNldEF0dHJpYnV0ZSgic3RyaW5nIixhLmZlYXR1cmVjb29yZHN5cy5zdHJpbmcpOmQuc2V0QXR0cmlidXRlKCJpZCIsYS5mZWF0dXJlY29vcmRzeXMuaWQpLGUuYXBwZW5kQ2hpbGQoZCkpLG51bGwhPWEuZmlsdGVyY29vcmRzeXMmJihkPXRoaXMuY3JlYXRlRWxlbWVudE5TKCIiLCJGSUxURVJDT09SRFNZUyIpLAowPT09YS5maWx0ZXJjb29yZHN5cy5pZD9kLnNldEF0dHJpYnV0ZSgic3RyaW5nIixhLmZpbHRlcmNvb3Jkc3lzLnN0cmluZyk6ZC5zZXRBdHRyaWJ1dGUoImlkIixhLmZpbHRlcmNvb3Jkc3lzLmlkKSxlLmFwcGVuZENoaWxkKGQpKSwwPGEuYnVmZmVyJiYoZD10aGlzLmNyZWF0ZUVsZW1lbnROUygiIiwiQlVGRkVSIiksZC5zZXRBdHRyaWJ1dGUoImRpc3RhbmNlIixhLmJ1ZmZlciksZS5hcHBlbmRDaGlsZChkKSksYS5pc3NwYXRpYWwmJihkPXRoaXMuY3JlYXRlRWxlbWVudE5TKCIiLCJTUEFUSUFMRklMVEVSIiksZC5zZXRBdHRyaWJ1dGUoInJlbGF0aW9uIixhLnNwYXRpYWxmaWx0ZXIucmVsYXRpb24pLGUuYXBwZW5kQ2hpbGQoZCksYS5zcGF0aWFsZmlsdGVyLmVudmVsb3BlPyhmPXRoaXMuY3JlYXRlRWxlbWVudE5TKCIiLCJFTlZFTE9QRSIpLGYuc2V0QXR0cmlidXRlKCJtaW54IixhLnNwYXRpYWxmaWx0ZXIuZW52ZWxvcGUubWlueCksZi5zZXRBdHRyaWJ1dGUoIm1pbnkiLGEuc3BhdGlhbGZpbHRlci5lbnZlbG9wZS5taW55KSwKZi5zZXRBdHRyaWJ1dGUoIm1heHgiLGEuc3BhdGlhbGZpbHRlci5lbnZlbG9wZS5tYXh4KSxmLnNldEF0dHJpYnV0ZSgibWF4eSIsYS5zcGF0aWFsZmlsdGVyLmVudmVsb3BlLm1heHkpLGQuYXBwZW5kQ2hpbGQoZikpOiJvYmplY3QiPT10eXBlb2YgYS5zcGF0aWFsZmlsdGVyLnBvbHlnb24mJmQuYXBwZW5kQ2hpbGQodGhpcy53cml0ZVBvbHlnb25HZW9tZXRyeShhLnNwYXRpYWxmaWx0ZXIucG9seWdvbikpKSxudWxsIT1hLndoZXJlJiYwPGEud2hlcmUubGVuZ3RoJiZlLnNldEF0dHJpYnV0ZSgid2hlcmUiLGEud2hlcmUpKSk7Yi5hcHBlbmRDaGlsZChjKTtyZXR1cm4gT3BlbkxheWVycy5Gb3JtYXQuWE1MLnByb3RvdHlwZS53cml0ZS5hcHBseSh0aGlzLFtiXSl9LGFkZEdyb3VwUmVuZGVyZXI6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmNyZWF0ZUVsZW1lbnROUygiIiwiR1JPVVBSRU5ERVJFUiIpO2EuYXBwZW5kQ2hpbGQoYyk7Zm9yKHZhciBkPTA7ZDxiLmxlbmd0aDtkKyspdGhpcy5hZGRSZW5kZXJlcihjLApiW2RdKX0sYWRkUmVuZGVyZXI6ZnVuY3Rpb24oYSxiKXtpZihPcGVuTGF5ZXJzLlV0aWwuaXNBcnJheShiKSl0aGlzLmFkZEdyb3VwUmVuZGVyZXIoYSxiKTtlbHNle3ZhciBjPXRoaXMuY3JlYXRlRWxlbWVudE5TKCIiLGIudHlwZS50b1VwcGVyQ2FzZSgpKyJSRU5ERVJFUiIpO2EuYXBwZW5kQ2hpbGQoYyk7IlZBTFVFTUFQUkVOREVSRVIiPT1jLnRhZ05hbWU/dGhpcy5hZGRWYWx1ZU1hcFJlbmRlcmVyKGMsYik6IlZBTFVFTUFQTEFCRUxSRU5ERVJFUiI9PWMudGFnTmFtZT90aGlzLmFkZFZhbHVlTWFwTGFiZWxSZW5kZXJlcihjLGIpOiJTSU1QTEVMQUJFTFJFTkRFUkVSIj09Yy50YWdOYW1lP3RoaXMuYWRkU2ltcGxlTGFiZWxSZW5kZXJlcihjLGIpOiJTQ0FMRURFUEVOREVOVFJFTkRFUkVSIj09Yy50YWdOYW1lJiZ0aGlzLmFkZFNjYWxlRGVwZW5kZW50UmVuZGVyZXIoYyxiKX19LGFkZFNjYWxlRGVwZW5kZW50UmVuZGVyZXI6ZnVuY3Rpb24oYSxiKXsic3RyaW5nIiE9dHlwZW9mIGIubG93ZXImJgoibnVtYmVyIiE9dHlwZW9mIGIubG93ZXJ8fGEuc2V0QXR0cmlidXRlKCJsb3dlciIsYi5sb3dlcik7InN0cmluZyIhPXR5cGVvZiBiLnVwcGVyJiYibnVtYmVyIiE9dHlwZW9mIGIudXBwZXJ8fGEuc2V0QXR0cmlidXRlKCJ1cHBlciIsYi51cHBlcik7dGhpcy5hZGRSZW5kZXJlcihhLGIucmVuZGVyZXIpfSxhZGRWYWx1ZU1hcExhYmVsUmVuZGVyZXI6ZnVuY3Rpb24oYSxiKXthLnNldEF0dHJpYnV0ZSgibG9va3VwZmllbGQiLGIubG9va3VwZmllbGQpO2Euc2V0QXR0cmlidXRlKCJsYWJlbGZpZWxkIixiLmxhYmVsZmllbGQpO2lmKCJvYmplY3QiPT10eXBlb2YgYi5leGFjdHMpZm9yKHZhciBjPTAsZD1iLmV4YWN0cy5sZW5ndGg7YzxkO2MrKyl7dmFyIGU9Yi5leGFjdHNbY10sZj10aGlzLmNyZWF0ZUVsZW1lbnROUygiIiwiRVhBQ1QiKTsic3RyaW5nIj09dHlwZW9mIGUudmFsdWUmJmYuc2V0QXR0cmlidXRlKCJ2YWx1ZSIsZS52YWx1ZSk7InN0cmluZyI9PXR5cGVvZiBlLmxhYmVsJiYKZi5zZXRBdHRyaWJ1dGUoImxhYmVsIixlLmxhYmVsKTsic3RyaW5nIj09dHlwZW9mIGUubWV0aG9kJiZmLnNldEF0dHJpYnV0ZSgibWV0aG9kIixlLm1ldGhvZCk7YS5hcHBlbmRDaGlsZChmKTtpZigib2JqZWN0Ij09dHlwZW9mIGUuc3ltYm9sKXt2YXIgZz1udWxsOyJ0ZXh0Ij09ZS5zeW1ib2wudHlwZSYmKGc9dGhpcy5jcmVhdGVFbGVtZW50TlMoIiIsIlRFWFRTWU1CT0wiKSk7aWYobnVsbCE9Zyl7Zm9yKHZhciBoPXRoaXMuZm9udFN0eWxlS2V5cyxrPTAsbD1oLmxlbmd0aDtrPGw7aysrKXt2YXIgbT1oW2tdO2Uuc3ltYm9sW21dJiZnLnNldEF0dHJpYnV0ZShtLGUuc3ltYm9sW21dKX1mLmFwcGVuZENoaWxkKGcpfX19fSxhZGRWYWx1ZU1hcFJlbmRlcmVyOmZ1bmN0aW9uKGEsYil7YS5zZXRBdHRyaWJ1dGUoImxvb2t1cGZpZWxkIixiLmxvb2t1cGZpZWxkKTtpZigib2JqZWN0Ij09dHlwZW9mIGIucmFuZ2VzKWZvcih2YXIgYz0wLGQ9Yi5yYW5nZXMubGVuZ3RoO2M8ZDtjKyspe3ZhciBlPQpiLnJhbmdlc1tjXSxmPXRoaXMuY3JlYXRlRWxlbWVudE5TKCIiLCJSQU5HRSIpO2Yuc2V0QXR0cmlidXRlKCJsb3dlciIsZS5sb3dlcik7Zi5zZXRBdHRyaWJ1dGUoInVwcGVyIixlLnVwcGVyKTthLmFwcGVuZENoaWxkKGYpO2lmKCJvYmplY3QiPT10eXBlb2YgZS5zeW1ib2wpe3ZhciBnPW51bGw7InNpbXBsZXBvbHlnb24iPT1lLnN5bWJvbC50eXBlJiYoZz10aGlzLmNyZWF0ZUVsZW1lbnROUygiIiwiU0lNUExFUE9MWUdPTlNZTUJPTCIpKTtudWxsIT1nJiYoInN0cmluZyI9PXR5cGVvZiBlLnN5bWJvbC5ib3VuZGFyeWNvbG9yJiZnLnNldEF0dHJpYnV0ZSgiYm91bmRhcnljb2xvciIsZS5zeW1ib2wuYm91bmRhcnljb2xvciksInN0cmluZyI9PXR5cGVvZiBlLnN5bWJvbC5maWxsY29sb3ImJmcuc2V0QXR0cmlidXRlKCJmaWxsY29sb3IiLGUuc3ltYm9sLmZpbGxjb2xvciksIm51bWJlciI9PXR5cGVvZiBlLnN5bWJvbC5maWxsdHJhbnNwYXJlbmN5JiZnLnNldEF0dHJpYnV0ZSgiZmlsbHRyYW5zcGFyZW5jeSIsCmUuc3ltYm9sLmZpbGx0cmFuc3BhcmVuY3kpLGYuYXBwZW5kQ2hpbGQoZykpfX1lbHNlIGlmKCJvYmplY3QiPT10eXBlb2YgYi5leGFjdHMpZm9yKGM9MCxkPWIuZXhhY3RzLmxlbmd0aDtjPGQ7YysrKWU9Yi5leGFjdHNbY10sZj10aGlzLmNyZWF0ZUVsZW1lbnROUygiIiwiRVhBQ1QiKSwic3RyaW5nIj09dHlwZW9mIGUudmFsdWUmJmYuc2V0QXR0cmlidXRlKCJ2YWx1ZSIsZS52YWx1ZSksInN0cmluZyI9PXR5cGVvZiBlLmxhYmVsJiZmLnNldEF0dHJpYnV0ZSgibGFiZWwiLGUubGFiZWwpLCJzdHJpbmciPT10eXBlb2YgZS5tZXRob2QmJmYuc2V0QXR0cmlidXRlKCJtZXRob2QiLGUubWV0aG9kKSxhLmFwcGVuZENoaWxkKGYpLCJvYmplY3QiPT10eXBlb2YgZS5zeW1ib2wmJihnPW51bGwsInNpbXBsZW1hcmtlciI9PWUuc3ltYm9sLnR5cGUmJihnPXRoaXMuY3JlYXRlRWxlbWVudE5TKCIiLCJTSU1QTEVNQVJLRVJTWU1CT0wiKSksbnVsbCE9ZyYmKCJzdHJpbmciPT10eXBlb2YgZS5zeW1ib2wuYW50aWFsaWFzaW5nJiYKZy5zZXRBdHRyaWJ1dGUoImFudGlhbGlhc2luZyIsZS5zeW1ib2wuYW50aWFsaWFzaW5nKSwic3RyaW5nIj09dHlwZW9mIGUuc3ltYm9sLmNvbG9yJiZnLnNldEF0dHJpYnV0ZSgiY29sb3IiLGUuc3ltYm9sLmNvbG9yKSwic3RyaW5nIj09dHlwZW9mIGUuc3ltYm9sLm91dGxpbmUmJmcuc2V0QXR0cmlidXRlKCJvdXRsaW5lIixlLnN5bWJvbC5vdXRsaW5lKSwic3RyaW5nIj09dHlwZW9mIGUuc3ltYm9sLm92ZXJsYXAmJmcuc2V0QXR0cmlidXRlKCJvdmVybGFwIixlLnN5bWJvbC5vdmVybGFwKSwic3RyaW5nIj09dHlwZW9mIGUuc3ltYm9sLnNoYWRvdyYmZy5zZXRBdHRyaWJ1dGUoInNoYWRvdyIsZS5zeW1ib2wuc2hhZG93KSwibnVtYmVyIj09dHlwZW9mIGUuc3ltYm9sLnRyYW5zcGFyZW5jeSYmZy5zZXRBdHRyaWJ1dGUoInRyYW5zcGFyZW5jeSIsZS5zeW1ib2wudHJhbnNwYXJlbmN5KSwic3RyaW5nIj09dHlwZW9mIGUuc3ltYm9sLnVzZWNlbnRyb2lkJiZnLnNldEF0dHJpYnV0ZSgidXNlY2VudHJvaWQiLAplLnN5bWJvbC51c2VjZW50cm9pZCksIm51bWJlciI9PXR5cGVvZiBlLnN5bWJvbC53aWR0aCYmZy5zZXRBdHRyaWJ1dGUoIndpZHRoIixlLnN5bWJvbC53aWR0aCksZi5hcHBlbmRDaGlsZChnKSkpfSxhZGRTaW1wbGVMYWJlbFJlbmRlcmVyOmZ1bmN0aW9uKGEsYil7YS5zZXRBdHRyaWJ1dGUoImZpZWxkIixiLmZpZWxkKTtmb3IodmFyIGM9ImZlYXR1cmV3ZWlnaHQgaG93bWFueWxhYmVscyBsYWJlbGJ1ZmZlcnJhdGlvIGxhYmVscHJpb3JpdGllcyBsYWJlbHdlaWdodCBsaW5lbGFiZWxwb3NpdGlvbiByb3RhdGlvbmFsYW5nbGVzIi5zcGxpdCgiICIpLGQ9MCxlPWMubGVuZ3RoO2Q8ZTtkKyspe3ZhciBmPWNbZF07YltmXSYmYS5zZXRBdHRyaWJ1dGUoZixiW2ZdKX1pZigidGV4dCI9PWIuc3ltYm9sLnR5cGUpe3ZhciBnPWIuc3ltYm9sLGg9dGhpcy5jcmVhdGVFbGVtZW50TlMoIiIsIlRFWFRTWU1CT0wiKTthLmFwcGVuZENoaWxkKGgpO2M9dGhpcy5mb250U3R5bGVLZXlzO2Q9MDsKZm9yKGU9Yy5sZW5ndGg7ZDxlO2QrKylmPWNbZF0sZ1tmXSYmaC5zZXRBdHRyaWJ1dGUoZixiW2ZdKX19LHdyaXRlUG9seWdvbkdlb21ldHJ5OmZ1bmN0aW9uKGEpe2lmKCEoYSBpbnN0YW5jZW9mIE9wZW5MYXllcnMuR2VvbWV0cnkuUG9seWdvbikpdGhyb3d7bWVzc2FnZToiQ2Fubm90IHdyaXRlIHBvbHlnb24gZ2VvbWV0cnkgdG8gQXJjWE1MIHdpdGggYW4gIithLkNMQVNTX05BTUUrIiBvYmplY3QuIixnZW9tZXRyeTphfTtmb3IodmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlMoIiIsIlBPTFlHT04iKSxjPTAsZD1hLmNvbXBvbmVudHMubGVuZ3RoO2M8ZDtjKyspe2Zvcih2YXIgZT1hLmNvbXBvbmVudHNbY10sZj10aGlzLmNyZWF0ZUVsZW1lbnROUygiIiwiUklORyIpLGc9MCxoPWUuY29tcG9uZW50cy5sZW5ndGg7ZzxoO2crKyl7dmFyIGs9ZS5jb21wb25lbnRzW2ddLGw9dGhpcy5jcmVhdGVFbGVtZW50TlMoIiIsIlBPSU5UIik7bC5zZXRBdHRyaWJ1dGUoIngiLGsueCk7bC5zZXRBdHRyaWJ1dGUoInkiLAprLnkpO2YuYXBwZW5kQ2hpbGQobCl9Yi5hcHBlbmRDaGlsZChmKX1yZXR1cm4gYn0scGFyc2VSZXNwb25zZTpmdW5jdGlvbihhKXsic3RyaW5nIj09dHlwZW9mIGEmJihhPShuZXcgT3BlbkxheWVycy5Gb3JtYXQuWE1MKS5yZWFkKGEpKTt2YXIgYj1uZXcgT3BlbkxheWVycy5Gb3JtYXQuQXJjWE1MLlJlc3BvbnNlLGM9YS5nZXRFbGVtZW50c0J5VGFnTmFtZSgiRVJST1IiKTtpZihudWxsIT1jJiYwPGMubGVuZ3RoKWIuZXJyb3I9dGhpcy5nZXRDaGlsZFZhbHVlKGMsIlVua25vd24gZXJyb3IuIik7ZWxzZXtjPWEuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIlJFU1BPTlNFIik7aWYobnVsbD09Y3x8MD09Yy5sZW5ndGgpcmV0dXJuIGIuZXJyb3I9Ik5vIFJFU1BPTlNFIHRhZyBmb3VuZCBpbiBBcmNYTUwgcmVzcG9uc2UuIixiO3ZhciBkPWNbMF0uZmlyc3RDaGlsZC5ub2RlTmFtZTsiI3RleHQiPT1kJiYoZD1jWzBdLmZpcnN0Q2hpbGQubmV4dFNpYmxpbmcubm9kZU5hbWUpO2lmKCJJTUFHRSI9PQpkKWM9YS5nZXRFbGVtZW50c0J5VGFnTmFtZSgiRU5WRUxPUEUiKSxhPWEuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIk9VVFBVVCIpLG51bGw9PWN8fDA9PWMubGVuZ3RoP2IuZXJyb3I9Ik5vIEVOVkVMT1BFIHRhZyBmb3VuZCBpbiBBcmNYTUwgcmVzcG9uc2UuIjpudWxsPT1hfHwwPT1hLmxlbmd0aD9iLmVycm9yPSJObyBPVVRQVVQgdGFnIGZvdW5kIGluIEFyY1hNTCByZXNwb25zZS4iOihjPXRoaXMucGFyc2VBdHRyaWJ1dGVzKGNbMF0pLGQ9dGhpcy5wYXJzZUF0dHJpYnV0ZXMoYVswXSksYi5pbWFnZT0ic3RyaW5nIj09dHlwZW9mIGQudHlwZT97ZW52ZWxvcGU6YyxvdXRwdXQ6e3R5cGU6ZC50eXBlLGRhdGE6dGhpcy5nZXRDaGlsZFZhbHVlKGFbMF0pfX06e2VudmVsb3BlOmMsb3V0cHV0OmR9KTtlbHNlIGlmKCJGRUFUVVJFUyI9PWQpe2lmKGE9Y1swXS5nZXRFbGVtZW50c0J5VGFnTmFtZSgiRkVBVFVSRVMiKSxjPWFbMF0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoIkZFQVRVUkVDT1VOVCIpLApiLmZlYXR1cmVzLmZlYXR1cmVjb3VudD1jWzBdLmdldEF0dHJpYnV0ZSgiY291bnQiKSwwPGIuZmVhdHVyZXMuZmVhdHVyZWNvdW50KWZvcihjPWFbMF0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoIkVOVkVMT1BFIiksYi5mZWF0dXJlcy5lbnZlbG9wZT10aGlzLnBhcnNlQXR0cmlidXRlcyhjWzBdLCJudW1iZXIiKSxhPWFbMF0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoIkZFQVRVUkUiKSxjPTA7YzxhLmxlbmd0aDtjKyspe2Zvcih2YXIgZD1uZXcgT3BlbkxheWVycy5GZWF0dXJlLlZlY3RvcixlPWFbY10uZ2V0RWxlbWVudHNCeVRhZ05hbWUoIkZJRUxEIiksZj0wO2Y8ZS5sZW5ndGg7ZisrKXt2YXIgZz1lW2ZdLmdldEF0dHJpYnV0ZSgibmFtZSIpLGg9ZVtmXS5nZXRBdHRyaWJ1dGUoInZhbHVlIik7ZC5hdHRyaWJ1dGVzW2ddPWh9ZT1hW2NdLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJQT0xZR09OIik7aWYoMDxlLmxlbmd0aCl7ZT1lWzBdLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJSSU5HIik7CmY9W107Zm9yKGc9MDtnPGUubGVuZ3RoO2crKyl7aD1bXTtoLnB1c2godGhpcy5wYXJzZVBvaW50R2VvbWV0cnkoZVtnXSkpO2Zvcih2YXIgaz1lW2ddLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJIT0xFIiksbD0wO2w8ay5sZW5ndGg7bCsrKWgucHVzaCh0aGlzLnBhcnNlUG9pbnRHZW9tZXRyeShrW2xdKSk7Zi5wdXNoKG5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvbHlnb24oaCkpfWQuZ2VvbWV0cnk9MT09Zi5sZW5ndGg/ZlswXTpuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5NdWx0aVBvbHlnb24oZil9Yi5mZWF0dXJlcy5mZWF0dXJlLnB1c2goZCl9fWVsc2UgYi5lcnJvcj0iVW5pZGVudGlmaWVkIHJlc3BvbnNlIHR5cGUuIn1yZXR1cm4gYn0scGFyc2VBdHRyaWJ1dGVzOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPXt9LGQ9MDtkPGEuYXR0cmlidXRlcy5sZW5ndGg7ZCsrKWNbYS5hdHRyaWJ1dGVzW2RdLm5vZGVOYW1lXT0ibnVtYmVyIj09Yj9wYXJzZUZsb2F0KGEuYXR0cmlidXRlc1tkXS5ub2RlVmFsdWUpOgphLmF0dHJpYnV0ZXNbZF0ubm9kZVZhbHVlO3JldHVybiBjfSxwYXJzZVBvaW50R2VvbWV0cnk6ZnVuY3Rpb24oYSl7dmFyIGI9W10sYz1hLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJDT09SRFMiKTtpZigwPGMubGVuZ3RoKWZvcihhPXRoaXMuZ2V0Q2hpbGRWYWx1ZShjWzBdKSxhPWEuc3BsaXQoLzsvKSxjPTA7YzxhLmxlbmd0aDtjKyspe3ZhciBkPWFbY10uc3BsaXQoLyAvKTtiLnB1c2gobmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoZFswXSxkWzFdKSl9ZWxzZSBpZihhPWEuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIlBPSU5UIiksMDxhLmxlbmd0aClmb3IoYz0wO2M8YS5sZW5ndGg7YysrKWIucHVzaChuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludChwYXJzZUZsb2F0KGFbY10uZ2V0QXR0cmlidXRlKCJ4IikpLHBhcnNlRmxvYXQoYVtjXS5nZXRBdHRyaWJ1dGUoInkiKSkpKTtyZXR1cm4gbmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuTGluZWFyUmluZyhiKX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Gb3JtYXQuQXJjWE1MIn0pOwpPcGVuTGF5ZXJzLkZvcm1hdC5BcmNYTUwuUmVxdWVzdD1PcGVuTGF5ZXJzLkNsYXNzKHtpbml0aWFsaXplOmZ1bmN0aW9uKGEpe3JldHVybiBPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHRoaXMse2dldF9pbWFnZTp7cHJvcGVydGllczp7YmFja2dyb3VuZDpudWxsLGRyYXc6ITAsZW52ZWxvcGU6e21pbng6MCxtaW55OjAsbWF4eDowLG1heHk6MH0sZmVhdHVyZWNvb3Jkc3lzOntpZDowLHN0cmluZzoiIixkYXR1bXRyYW5zZm9ybWlkOjAsZGF0dW10cmFuc2Zvcm1zdHJpbmc6IiJ9LGZpbHRlcmNvb3Jkc3lzOntpZDowLHN0cmluZzoiIixkYXR1bXRyYW5zZm9ybWlkOjAsZGF0dW10cmFuc2Zvcm1zdHJpbmc6IiJ9LGltYWdlc2l6ZTp7aGVpZ2h0OjAsd2lkdGg6MCxkcGk6OTYscHJpbnRoZWlnaHQ6MCxwcmludHdpZHRoOjAsc2NhbGVzeW1ib2xzOiExfSxsYXllcmxpc3Q6W10sb3V0cHV0OntiYXNldXJsOiIiLGxlZ2VuZGJhc2V1cmw6IiIsbGVnZW5kbmFtZToiIixsZWdlbmRwYXRoOiIiLApsZWdlbmR1cmw6IiIsbmFtZToiIixwYXRoOiIiLHR5cGU6ImpwZyIsdXJsOiIifX19LGdldF9mZWF0dXJlOntsYXllcjoiIixxdWVyeTp7aXNzcGF0aWFsOiExLGZlYXR1cmVjb29yZHN5czp7aWQ6MCxzdHJpbmc6IiIsZGF0dW10cmFuc2Zvcm1pZDowLGRhdHVtdHJhbnNmb3Jtc3RyaW5nOiIifSxmaWx0ZXJjb29yZHN5czp7aWQ6MCxzdHJpbmc6IiIsZGF0dW10cmFuc2Zvcm1pZDowLGRhdHVtdHJhbnNmb3Jtc3RyaW5nOiIifSxidWZmZXI6MCx3aGVyZToiIixzcGF0aWFsZmlsdGVyOntyZWxhdGlvbjoiZW52ZWxvcGVfaW50ZXJzZWN0aW9uIixlbnZlbG9wZTpudWxsfX19LGVudmlyb25tZW50OntzZXBhcmF0b3JzOntjczoiICIsdHM6IjsifX0sbGF5ZXI6W10sd29ya3NwYWNlczpbXX0pfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkZvcm1hdC5BcmNYTUwuUmVxdWVzdCJ9KTsKT3BlbkxheWVycy5Gb3JtYXQuQXJjWE1MLlJlc3BvbnNlPU9wZW5MYXllcnMuQ2xhc3Moe2luaXRpYWxpemU6ZnVuY3Rpb24oYSl7cmV0dXJuIE9wZW5MYXllcnMuVXRpbC5leHRlbmQodGhpcyx7aW1hZ2U6e2VudmVsb3BlOm51bGwsb3V0cHV0OiIifSxmZWF0dXJlczp7ZmVhdHVyZWNvdW50OjAsZW52ZWxvcGU6bnVsbCxmZWF0dXJlOltdfSxlcnJvcjoiIn0pfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkZvcm1hdC5BcmNYTUwuUmVzcG9uc2UifSk7KGZ1bmN0aW9uKCl7ZnVuY3Rpb24gYSgpe3RoaXMuX29iamVjdD1mJiYhaz9uZXcgZjpuZXcgd2luZG93LkFjdGl2ZVhPYmplY3QoIk1pY3Jvc29mdC5YTUxIVFRQIik7dGhpcy5fbGlzdGVuZXJzPVtdfWZ1bmN0aW9uIGIoKXtyZXR1cm4gbmV3IGF9ZnVuY3Rpb24gYyhhKXtiLm9ucmVhZHlzdGF0ZWNoYW5nZSYmYi5vbnJlYWR5c3RhdGVjaGFuZ2UuYXBwbHkoYSk7YS5kaXNwYXRjaEV2ZW50KHt0eXBlOiJyZWFkeXN0YXRlY2hhbmdlIixidWJibGVzOiExLGNhbmNlbGFibGU6ITEsdGltZVN0YW1wOm5ldyBEYXRlKzB9KX1mdW5jdGlvbiBkKGEpe3RyeXthLnJlc3BvbnNlVGV4dD1hLl9vYmplY3QucmVzcG9uc2VUZXh0fWNhdGNoKGIpe310cnl7dmFyIGM7dmFyIGQ9YS5fb2JqZWN0LGU9ZC5yZXNwb25zZVhNTCxmPWQucmVzcG9uc2VUZXh0O2gmJihmJiZlJiYhZS5kb2N1bWVudEVsZW1lbnQmJmQuZ2V0UmVzcG9uc2VIZWFkZXIoIkNvbnRlbnQtVHlwZSIpLm1hdGNoKC9bXlwvXStcL1teXCtdK1wreG1sLykpJiYKKGU9bmV3IHdpbmRvdy5BY3RpdmVYT2JqZWN0KCJNaWNyb3NvZnQuWE1MRE9NIiksZS5hc3luYz0hMSxlLnZhbGlkYXRlT25QYXJzZT0hMSxlLmxvYWRYTUwoZikpO2M9ZSYmKGgmJjAhPWUucGFyc2VFcnJvcnx8IWUuZG9jdW1lbnRFbGVtZW50fHxlLmRvY3VtZW50RWxlbWVudCYmInBhcnNlcmVycm9yIj09ZS5kb2N1bWVudEVsZW1lbnQudGFnTmFtZSk/bnVsbDplO2EucmVzcG9uc2VYTUw9Y31jYXRjaChnKXt9dHJ5e2Euc3RhdHVzPWEuX29iamVjdC5zdGF0dXN9Y2F0Y2goayl7fXRyeXthLnN0YXR1c1RleHQ9YS5fb2JqZWN0LnN0YXR1c1RleHR9Y2F0Y2godSl7fX1mdW5jdGlvbiBlKGEpe2EuX29iamVjdC5vbnJlYWR5c3RhdGVjaGFuZ2U9bmV3IHdpbmRvdy5GdW5jdGlvbn12YXIgZj13aW5kb3cuWE1MSHR0cFJlcXVlc3QsZz0hIXdpbmRvdy5jb250cm9sbGVycyxoPXdpbmRvdy5kb2N1bWVudC5hbGwmJiF3aW5kb3cub3BlcmEsaz1oJiZ3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvTVNJRSA3LjAvKTsKYi5wcm90b3R5cGU9YS5wcm90b3R5cGU7ZyYmZi53cmFwcGVkJiYoYi53cmFwcGVkPWYud3JhcHBlZCk7Yi5VTlNFTlQ9MDtiLk9QRU5FRD0xO2IuSEVBREVSU19SRUNFSVZFRD0yO2IuTE9BRElORz0zO2IuRE9ORT00O2IucHJvdG90eXBlLnJlYWR5U3RhdGU9Yi5VTlNFTlQ7Yi5wcm90b3R5cGUucmVzcG9uc2VUZXh0PSIiO2IucHJvdG90eXBlLnJlc3BvbnNlWE1MPW51bGw7Yi5wcm90b3R5cGUuc3RhdHVzPTA7Yi5wcm90b3R5cGUuc3RhdHVzVGV4dD0iIjtiLnByb3RvdHlwZS5wcmlvcml0eT0iTk9STUFMIjtiLnByb3RvdHlwZS5vbnJlYWR5c3RhdGVjaGFuZ2U9bnVsbDtiLm9ucmVhZHlzdGF0ZWNoYW5nZT1udWxsO2Iub25vcGVuPW51bGw7Yi5vbnNlbmQ9bnVsbDtiLm9uYWJvcnQ9bnVsbDtiLnByb3RvdHlwZS5vcGVuPWZ1bmN0aW9uKGEsZixrLHAscSl7ZGVsZXRlIHRoaXMuX2hlYWRlcnM7Mz5hcmd1bWVudHMubGVuZ3RoJiYoaz0hMCk7dGhpcy5fYXN5bmM9azt2YXIgcj10aGlzLApzPXRoaXMucmVhZHlTdGF0ZSx0O2gmJmsmJih0PWZ1bmN0aW9uKCl7cyE9Yi5ET05FJiYoZShyKSxyLmFib3J0KCkpfSx3aW5kb3cuYXR0YWNoRXZlbnQoIm9udW5sb2FkIix0KSk7Yi5vbm9wZW4mJmIub25vcGVuLmFwcGx5KHRoaXMsYXJndW1lbnRzKTs0PGFyZ3VtZW50cy5sZW5ndGg/dGhpcy5fb2JqZWN0Lm9wZW4oYSxmLGsscCxxKTozPGFyZ3VtZW50cy5sZW5ndGg/dGhpcy5fb2JqZWN0Lm9wZW4oYSxmLGsscCk6dGhpcy5fb2JqZWN0Lm9wZW4oYSxmLGspO3RoaXMucmVhZHlTdGF0ZT1iLk9QRU5FRDtjKHRoaXMpO3RoaXMuX29iamVjdC5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKXtpZighZ3x8aylyLnJlYWR5U3RhdGU9ci5fb2JqZWN0LnJlYWR5U3RhdGUsZChyKSxyLl9hYm9ydGVkP3IucmVhZHlTdGF0ZT1iLlVOU0VOVDooci5yZWFkeVN0YXRlPT1iLkRPTkUmJihkZWxldGUgci5fZGF0YSxlKHIpLGgmJmsmJndpbmRvdy5kZXRhY2hFdmVudCgib251bmxvYWQiLHQpKSwKcyE9ci5yZWFkeVN0YXRlJiZjKHIpLHM9ci5yZWFkeVN0YXRlKX19O2IucHJvdG90eXBlLnNlbmQ9ZnVuY3Rpb24oYSl7Yi5vbnNlbmQmJmIub25zZW5kLmFwcGx5KHRoaXMsYXJndW1lbnRzKTthcmd1bWVudHMubGVuZ3RofHwoYT1udWxsKTthJiZhLm5vZGVUeXBlJiYoYT13aW5kb3cuWE1MU2VyaWFsaXplcj8obmV3IHdpbmRvdy5YTUxTZXJpYWxpemVyKS5zZXJpYWxpemVUb1N0cmluZyhhKTphLnhtbCx0aGlzLl9oZWFkZXJzWyJDb250ZW50LVR5cGUiXXx8dGhpcy5fb2JqZWN0LnNldFJlcXVlc3RIZWFkZXIoIkNvbnRlbnQtVHlwZSIsImFwcGxpY2F0aW9uL3htbCIpKTt0aGlzLl9kYXRhPWE7YTppZih0aGlzLl9vYmplY3Quc2VuZCh0aGlzLl9kYXRhKSxnJiYhdGhpcy5fYXN5bmMpZm9yKHRoaXMucmVhZHlTdGF0ZT1iLk9QRU5FRCxkKHRoaXMpO3RoaXMucmVhZHlTdGF0ZTxiLkRPTkU7KWlmKHRoaXMucmVhZHlTdGF0ZSsrLGModGhpcyksdGhpcy5fYWJvcnRlZClicmVhayBhfTsKYi5wcm90b3R5cGUuYWJvcnQ9ZnVuY3Rpb24oKXtiLm9uYWJvcnQmJmIub25hYm9ydC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5yZWFkeVN0YXRlPmIuVU5TRU5UJiYodGhpcy5fYWJvcnRlZD0hMCk7dGhpcy5fb2JqZWN0LmFib3J0KCk7ZSh0aGlzKTt0aGlzLnJlYWR5U3RhdGU9Yi5VTlNFTlQ7ZGVsZXRlIHRoaXMuX2RhdGF9O2IucHJvdG90eXBlLmdldEFsbFJlc3BvbnNlSGVhZGVycz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9vYmplY3QuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKCl9O2IucHJvdG90eXBlLmdldFJlc3BvbnNlSGVhZGVyPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLl9vYmplY3QuZ2V0UmVzcG9uc2VIZWFkZXIoYSl9O2IucHJvdG90eXBlLnNldFJlcXVlc3RIZWFkZXI9ZnVuY3Rpb24oYSxiKXt0aGlzLl9oZWFkZXJzfHwodGhpcy5faGVhZGVycz17fSk7dGhpcy5faGVhZGVyc1thXT1iO3JldHVybiB0aGlzLl9vYmplY3Quc2V0UmVxdWVzdEhlYWRlcihhLGIpfTsKYi5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lcj1mdW5jdGlvbihhLGIsYyl7Zm9yKHZhciBkPTAsZTtlPXRoaXMuX2xpc3RlbmVyc1tkXTtkKyspaWYoZVswXT09YSYmZVsxXT09YiYmZVsyXT09YylyZXR1cm47dGhpcy5fbGlzdGVuZXJzLnB1c2goW2EsYixjXSl9O2IucHJvdG90eXBlLnJlbW92ZUV2ZW50TGlzdGVuZXI9ZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZD0wLGU7KGU9dGhpcy5fbGlzdGVuZXJzW2RdKSYmKGVbMF0hPWF8fGVbMV0hPWJ8fGVbMl0hPWMpO2QrKyk7ZSYmdGhpcy5fbGlzdGVuZXJzLnNwbGljZShkLDEpfTtiLnByb3RvdHlwZS5kaXNwYXRjaEV2ZW50PWZ1bmN0aW9uKGEpe2E9e3R5cGU6YS50eXBlLHRhcmdldDp0aGlzLGN1cnJlbnRUYXJnZXQ6dGhpcyxldmVudFBoYXNlOjIsYnViYmxlczphLmJ1YmJsZXMsY2FuY2VsYWJsZTphLmNhbmNlbGFibGUsdGltZVN0YW1wOmEudGltZVN0YW1wLHN0b3BQcm9wYWdhdGlvbjpmdW5jdGlvbigpe30scHJldmVudERlZmF1bHQ6ZnVuY3Rpb24oKXt9LAppbml0RXZlbnQ6ZnVuY3Rpb24oKXt9fTsicmVhZHlzdGF0ZWNoYW5nZSI9PWEudHlwZSYmdGhpcy5vbnJlYWR5c3RhdGVjaGFuZ2UmJih0aGlzLm9ucmVhZHlzdGF0ZWNoYW5nZS5oYW5kbGVFdmVudHx8dGhpcy5vbnJlYWR5c3RhdGVjaGFuZ2UpLmFwcGx5KHRoaXMsW2FdKTtmb3IodmFyIGI9MCxjO2M9dGhpcy5fbGlzdGVuZXJzW2JdO2IrKyljWzBdIT1hLnR5cGV8fGNbMl18fChjWzFdLmhhbmRsZUV2ZW50fHxjWzFdKS5hcHBseSh0aGlzLFthXSl9O2IucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIltvYmplY3QgWE1MSHR0cFJlcXVlc3RdIn07Yi50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiJbWE1MSHR0cFJlcXVlc3RdIn07d2luZG93LkZ1bmN0aW9uLnByb3RvdHlwZS5hcHBseXx8KHdpbmRvdy5GdW5jdGlvbi5wcm90b3R5cGUuYXBwbHk9ZnVuY3Rpb24oYSxiKXtifHwoYj1bXSk7YS5fX2Z1bmM9dGhpczthLl9fZnVuYyhiWzBdLGJbMV0sYlsyXSxiWzNdLApiWzRdKTtkZWxldGUgYS5fX2Z1bmN9KTtPcGVuTGF5ZXJzLlJlcXVlc3R8fChPcGVuTGF5ZXJzLlJlcXVlc3Q9e30pO09wZW5MYXllcnMuUmVxdWVzdC5YTUxIdHRwUmVxdWVzdD1ifSkoKTtPcGVuTGF5ZXJzLlByb3h5SG9zdD0iIjtPcGVuTGF5ZXJzLlJlcXVlc3R8fChPcGVuTGF5ZXJzLlJlcXVlc3Q9e30pOwpPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKE9wZW5MYXllcnMuUmVxdWVzdCx7REVGQVVMVF9DT05GSUc6e21ldGhvZDoiR0VUIix1cmw6d2luZG93LmxvY2F0aW9uLmhyZWYsYXN5bmM6ITAsdXNlcjp2b2lkIDAscGFzc3dvcmQ6dm9pZCAwLHBhcmFtczpudWxsLHByb3h5Ok9wZW5MYXllcnMuUHJveHlIb3N0LGhlYWRlcnM6e30sZGF0YTpudWxsLGNhbGxiYWNrOmZ1bmN0aW9uKCl7fSxzdWNjZXNzOm51bGwsZmFpbHVyZTpudWxsLHNjb3BlOm51bGx9LFVSTF9TUExJVF9SRUdFWDovKFteOl0qOilcL1wvKFteOl0qOj9bXkBdKkApPyhbXjpcL1w/XSopOj8oW15cL1w/XSopLyxldmVudHM6bmV3IE9wZW5MYXllcnMuRXZlbnRzKHRoaXMpLG1ha2VTYW1lT3JpZ2luOmZ1bmN0aW9uKGEsYil7dmFyIGM9MCE9PWEuaW5kZXhPZigiaHR0cCIpLGQ9IWMmJmEubWF0Y2godGhpcy5VUkxfU1BMSVRfUkVHRVgpO2lmKGQpe3ZhciBlPXdpbmRvdy5sb2NhdGlvbixjPWRbMV09PWUucHJvdG9jb2wmJmRbM109PQplLmhvc3RuYW1lLGQ9ZFs0XSxlPWUucG9ydDtpZig4MCE9ZCYmIiIhPWR8fCI4MCIhPWUmJiIiIT1lKWM9YyYmZD09ZX1jfHxiJiYoYT0iZnVuY3Rpb24iPT10eXBlb2YgYj9iKGEpOmIrZW5jb2RlVVJJQ29tcG9uZW50KGEpKTtyZXR1cm4gYX0saXNzdWU6ZnVuY3Rpb24oYSl7dmFyIGI9T3BlbkxheWVycy5VdGlsLmV4dGVuZCh0aGlzLkRFRkFVTFRfQ09ORklHLHtwcm94eTpPcGVuTGF5ZXJzLlByb3h5SG9zdH0pO2E9YXx8e307YS5oZWFkZXJzPWEuaGVhZGVyc3x8e307YT1PcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyhhLGIpO2EuaGVhZGVycz1PcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyhhLmhlYWRlcnMsYi5oZWFkZXJzKTt2YXIgYj0hMSxjO2ZvcihjIGluIGEuaGVhZGVycylhLmhlYWRlcnMuaGFzT3duUHJvcGVydHkoYykmJiJ4LXJlcXVlc3RlZC13aXRoIj09PWMudG9Mb3dlckNhc2UoKSYmKGI9ITApOyExPT09YiYmKGEuaGVhZGVyc1siWC1SZXF1ZXN0ZWQtV2l0aCJdPQoiWE1MSHR0cFJlcXVlc3QiKTt2YXIgZD1uZXcgT3BlbkxheWVycy5SZXF1ZXN0LlhNTEh0dHBSZXF1ZXN0LGU9T3BlbkxheWVycy5VdGlsLnVybEFwcGVuZChhLnVybCxPcGVuTGF5ZXJzLlV0aWwuZ2V0UGFyYW1ldGVyU3RyaW5nKGEucGFyYW1zfHx7fSkpLGU9T3BlbkxheWVycy5SZXF1ZXN0Lm1ha2VTYW1lT3JpZ2luKGUsYS5wcm94eSk7ZC5vcGVuKGEubWV0aG9kLGUsYS5hc3luYyxhLnVzZXIsYS5wYXNzd29yZCk7Zm9yKHZhciBmIGluIGEuaGVhZGVycylkLnNldFJlcXVlc3RIZWFkZXIoZixhLmhlYWRlcnNbZl0pO3ZhciBnPXRoaXMuZXZlbnRzLGg9dGhpcztkLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpe2QucmVhZHlTdGF0ZT09T3BlbkxheWVycy5SZXF1ZXN0LlhNTEh0dHBSZXF1ZXN0LkRPTkUmJiExIT09Zy50cmlnZ2VyRXZlbnQoImNvbXBsZXRlIix7cmVxdWVzdDpkLGNvbmZpZzphLHJlcXVlc3RVcmw6ZX0pJiZoLnJ1bkNhbGxiYWNrcyh7cmVxdWVzdDpkLGNvbmZpZzphLApyZXF1ZXN0VXJsOmV9KX07ITE9PT1hLmFzeW5jP2Quc2VuZChhLmRhdGEpOndpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7MCE9PWQucmVhZHlTdGF0ZSYmZC5zZW5kKGEuZGF0YSl9LDApO3JldHVybiBkfSxydW5DYWxsYmFja3M6ZnVuY3Rpb24oYSl7dmFyIGI9YS5yZXF1ZXN0LGM9YS5jb25maWcsZD1jLnNjb3BlP09wZW5MYXllcnMuRnVuY3Rpb24uYmluZChjLmNhbGxiYWNrLGMuc2NvcGUpOmMuY2FsbGJhY2ssZTtjLnN1Y2Nlc3MmJihlPWMuc2NvcGU/T3BlbkxheWVycy5GdW5jdGlvbi5iaW5kKGMuc3VjY2VzcyxjLnNjb3BlKTpjLnN1Y2Nlc3MpO3ZhciBmO2MuZmFpbHVyZSYmKGY9Yy5zY29wZT9PcGVuTGF5ZXJzLkZ1bmN0aW9uLmJpbmQoYy5mYWlsdXJlLGMuc2NvcGUpOmMuZmFpbHVyZSk7ImZpbGU6Ij09T3BlbkxheWVycy5VdGlsLmNyZWF0ZVVybE9iamVjdChjLnVybCkucHJvdG9jb2wmJmIucmVzcG9uc2VUZXh0JiYoYi5zdGF0dXM9MjAwKTtkKGIpO2lmKCFiLnN0YXR1c3x8CjIwMDw9Yi5zdGF0dXMmJjMwMD5iLnN0YXR1cyl0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoInN1Y2Nlc3MiLGEpLGUmJmUoYik7Yi5zdGF0dXMmJigyMDA+Yi5zdGF0dXN8fDMwMDw9Yi5zdGF0dXMpJiYodGhpcy5ldmVudHMudHJpZ2dlckV2ZW50KCJmYWlsdXJlIixhKSxmJiZmKGIpKX0sR0VUOmZ1bmN0aW9uKGEpe2E9T3BlbkxheWVycy5VdGlsLmV4dGVuZChhLHttZXRob2Q6IkdFVCJ9KTtyZXR1cm4gT3BlbkxheWVycy5SZXF1ZXN0Lmlzc3VlKGEpfSxQT1NUOmZ1bmN0aW9uKGEpe2E9T3BlbkxheWVycy5VdGlsLmV4dGVuZChhLHttZXRob2Q6IlBPU1QifSk7YS5oZWFkZXJzPWEuaGVhZGVycz9hLmhlYWRlcnM6e307IkNPTlRFTlQtVFlQRSJpbiBPcGVuTGF5ZXJzLlV0aWwudXBwZXJDYXNlT2JqZWN0KGEuaGVhZGVycyl8fChhLmhlYWRlcnNbIkNvbnRlbnQtVHlwZSJdPSJhcHBsaWNhdGlvbi94bWwiKTtyZXR1cm4gT3BlbkxheWVycy5SZXF1ZXN0Lmlzc3VlKGEpfSxQVVQ6ZnVuY3Rpb24oYSl7YT0KT3BlbkxheWVycy5VdGlsLmV4dGVuZChhLHttZXRob2Q6IlBVVCJ9KTthLmhlYWRlcnM9YS5oZWFkZXJzP2EuaGVhZGVyczp7fTsiQ09OVEVOVC1UWVBFImluIE9wZW5MYXllcnMuVXRpbC51cHBlckNhc2VPYmplY3QoYS5oZWFkZXJzKXx8KGEuaGVhZGVyc1siQ29udGVudC1UeXBlIl09ImFwcGxpY2F0aW9uL3htbCIpO3JldHVybiBPcGVuTGF5ZXJzLlJlcXVlc3QuaXNzdWUoYSl9LERFTEVURTpmdW5jdGlvbihhKXthPU9wZW5MYXllcnMuVXRpbC5leHRlbmQoYSx7bWV0aG9kOiJERUxFVEUifSk7cmV0dXJuIE9wZW5MYXllcnMuUmVxdWVzdC5pc3N1ZShhKX0sSEVBRDpmdW5jdGlvbihhKXthPU9wZW5MYXllcnMuVXRpbC5leHRlbmQoYSx7bWV0aG9kOiJIRUFEIn0pO3JldHVybiBPcGVuTGF5ZXJzLlJlcXVlc3QuaXNzdWUoYSl9LE9QVElPTlM6ZnVuY3Rpb24oYSl7YT1PcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKGEse21ldGhvZDoiT1BUSU9OUyJ9KTtyZXR1cm4gT3BlbkxheWVycy5SZXF1ZXN0Lmlzc3VlKGEpfX0pO09wZW5MYXllcnMuTGF5ZXIuQXJjSU1TPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5MYXllci5HcmlkLHtERUZBVUxUX1BBUkFNUzp7Q2xpZW50VmVyc2lvbjoiOS4yIixTZXJ2aWNlTmFtZToiIn0sZmVhdHVyZUNvb3JkU3lzOiI0MzI2IixmaWx0ZXJDb29yZFN5czoiNDMyNiIsbGF5ZXJzOm51bGwsYXN5bmM6ITAsbmFtZToiQXJjSU1TIixpc0Jhc2VMYXllcjohMCxERUZBVUxUX09QVElPTlM6e3RpbGVTaXplOm5ldyBPcGVuTGF5ZXJzLlNpemUoNTEyLDUxMiksZmVhdHVyZUNvb3JkU3lzOiI0MzI2IixmaWx0ZXJDb29yZFN5czoiNDMyNiIsbGF5ZXJzOm51bGwsaXNCYXNlTGF5ZXI6ITAsYXN5bmM6ITAsbmFtZToiQXJjSU1TIn0saW5pdGlhbGl6ZTpmdW5jdGlvbihhLGIsYyl7dGhpcy50aWxlU2l6ZT1uZXcgT3BlbkxheWVycy5TaXplKDUxMiw1MTIpO3RoaXMucGFyYW1zPU9wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKHtTZXJ2aWNlTmFtZTpjLnNlcnZpY2VOYW1lfSwKdGhpcy5ERUZBVUxUX1BBUkFNUyk7dGhpcy5vcHRpb25zPU9wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKGMsdGhpcy5ERUZBVUxUX09QVElPTlMpO09wZW5MYXllcnMuTGF5ZXIuR3JpZC5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLFthLGIsdGhpcy5wYXJhbXMsY10pO3RoaXMudHJhbnNwYXJlbnQmJih0aGlzLmlzQmFzZUxheWVyfHwodGhpcy5pc0Jhc2VMYXllcj0hMSksImltYWdlL2pwZWciPT10aGlzLmZvcm1hdCYmKHRoaXMuZm9ybWF0PU9wZW5MYXllcnMuVXRpbC5hbHBoYUhhY2soKT8iaW1hZ2UvZ2lmIjoiaW1hZ2UvcG5nIikpO251bGw9PT10aGlzLm9wdGlvbnMubGF5ZXJzJiYodGhpcy5vcHRpb25zLmxheWVycz1bXSl9LGdldFVSTDpmdW5jdGlvbihhKXt2YXIgYj0iIjthPXRoaXMuYWRqdXN0Qm91bmRzKGEpO2E9bmV3IE9wZW5MYXllcnMuRm9ybWF0LkFyY1hNTChPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHRoaXMub3B0aW9ucyx7cmVxdWVzdHR5cGU6ImltYWdlIiwKZW52ZWxvcGU6YS50b0FycmF5KCksdGlsZVNpemU6dGhpcy50aWxlU2l6ZX0pKTthPW5ldyBPcGVuTGF5ZXJzLlJlcXVlc3QuUE9TVCh7dXJsOnRoaXMuZ2V0RnVsbFJlcXVlc3RTdHJpbmcoKSxkYXRhOmEud3JpdGUoKSxhc3luYzohMX0pO251bGwhPWEmJihiPWEucmVzcG9uc2VYTUwsYiYmYi5kb2N1bWVudEVsZW1lbnR8fChiPWEucmVzcG9uc2VUZXh0KSxiPShuZXcgT3BlbkxheWVycy5Gb3JtYXQuQXJjWE1MKS5yZWFkKGIpLGI9dGhpcy5nZXRVcmxPckltYWdlKGIuaW1hZ2Uub3V0cHV0KSk7cmV0dXJuIGJ9LGdldFVSTGFzeW5jOmZ1bmN0aW9uKGEsYixjKXthPXRoaXMuYWRqdXN0Qm91bmRzKGEpO2E9bmV3IE9wZW5MYXllcnMuRm9ybWF0LkFyY1hNTChPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHRoaXMub3B0aW9ucyx7cmVxdWVzdHR5cGU6ImltYWdlIixlbnZlbG9wZTphLnRvQXJyYXkoKSx0aWxlU2l6ZTp0aGlzLnRpbGVTaXplfSkpO09wZW5MYXllcnMuUmVxdWVzdC5QT1NUKHt1cmw6dGhpcy5nZXRGdWxsUmVxdWVzdFN0cmluZygpLAphc3luYzohMCxkYXRhOmEud3JpdGUoKSxjYWxsYmFjazpmdW5jdGlvbihhKXt2YXIgZT1hLnJlc3BvbnNlWE1MO2UmJmUuZG9jdW1lbnRFbGVtZW50fHwoZT1hLnJlc3BvbnNlVGV4dCk7YT0obmV3IE9wZW5MYXllcnMuRm9ybWF0LkFyY1hNTCkucmVhZChlKTtiLmNhbGwoYyx0aGlzLmdldFVybE9ySW1hZ2UoYS5pbWFnZS5vdXRwdXQpKX0sc2NvcGU6dGhpc30pfSxnZXRVcmxPckltYWdlOmZ1bmN0aW9uKGEpe3ZhciBiPSIiO2EudXJsP2I9YS51cmw6YS5kYXRhJiYoYj0iZGF0YTppbWFnZS8iK2EudHlwZSsiO2Jhc2U2NCwiK2EuZGF0YSk7cmV0dXJuIGJ9LHNldExheWVyUXVlcnk6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9MDtjPHRoaXMub3B0aW9ucy5sYXllcnMubGVuZ3RoO2MrKylpZihhPT10aGlzLm9wdGlvbnMubGF5ZXJzW2NdLmlkKXt0aGlzLm9wdGlvbnMubGF5ZXJzW2NdLnF1ZXJ5PWI7cmV0dXJufXRoaXMub3B0aW9ucy5sYXllcnMucHVzaCh7aWQ6YSx2aXNpYmxlOiEwLApxdWVyeTpifSl9LGdldEZlYXR1cmVJbmZvOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD1jLmJ1ZmZlcnx8MSxlPWMuY2FsbGJhY2t8fGZ1bmN0aW9uKCl7fSxmPWMuc2NvcGV8fHdpbmRvdyxnPXt9O09wZW5MYXllcnMuVXRpbC5leHRlbmQoZyx0aGlzLm9wdGlvbnMpO2cucmVxdWVzdHR5cGU9ImZlYXR1cmUiO2EgaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLkxvbkxhdD8oZy5wb2x5Z29uPW51bGwsZy5lbnZlbG9wZT1bYS5sb24tZCxhLmxhdC1kLGEubG9uK2QsYS5sYXQrZF0pOmEgaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvbHlnb24mJihnLmVudmVsb3BlPW51bGwsZy5wb2x5Z29uPWEpO3ZhciBoPW5ldyBPcGVuTGF5ZXJzLkZvcm1hdC5BcmNYTUwoZyk7T3BlbkxheWVycy5VdGlsLmV4dGVuZChoLnJlcXVlc3QuZ2V0X2ZlYXR1cmUsYyk7aC5yZXF1ZXN0LmdldF9mZWF0dXJlLmxheWVyPWIuaWQ7Im51bWJlciI9PXR5cGVvZiBiLnF1ZXJ5LmFjY3VyYWN5P2gucmVxdWVzdC5nZXRfZmVhdHVyZS5xdWVyeS5hY2N1cmFjeT0KYi5xdWVyeS5hY2N1cmFjeTooYT10aGlzLm1hcC5nZXRDZW50ZXIoKSxjPXRoaXMubWFwLmdldFZpZXdQb3J0UHhGcm9tTG9uTGF0KGEpLGMueCsrLGM9dGhpcy5tYXAuZ2V0TG9uTGF0RnJvbVBpeGVsKGMpLGgucmVxdWVzdC5nZXRfZmVhdHVyZS5xdWVyeS5hY2N1cmFjeT1jLmxvbi1hLmxvbik7aC5yZXF1ZXN0LmdldF9mZWF0dXJlLnF1ZXJ5LndoZXJlPWIucXVlcnkud2hlcmU7aC5yZXF1ZXN0LmdldF9mZWF0dXJlLnF1ZXJ5LnNwYXRpYWxmaWx0ZXIucmVsYXRpb249ImFyZWFfaW50ZXJzZWN0aW9uIjtPcGVuTGF5ZXJzLlJlcXVlc3QuUE9TVCh7dXJsOnRoaXMuZ2V0RnVsbFJlcXVlc3RTdHJpbmcoe0N1c3RvbVNlcnZpY2U6IlF1ZXJ5In0pLGRhdGE6aC53cml0ZSgpLGNhbGxiYWNrOmZ1bmN0aW9uKGEpe2E9aC5wYXJzZVJlc3BvbnNlKGEucmVzcG9uc2VUZXh0KTtoLmlzZXJyb3IoKT9lLmNhbGwoZixudWxsKTplLmNhbGwoZixhLmZlYXR1cmVzKX19KX0sY2xvbmU6ZnVuY3Rpb24oYSl7bnVsbD09CmEmJihhPW5ldyBPcGVuTGF5ZXJzLkxheWVyLkFyY0lNUyh0aGlzLm5hbWUsdGhpcy51cmwsdGhpcy5nZXRPcHRpb25zKCkpKTtyZXR1cm4gYT1PcGVuTGF5ZXJzLkxheWVyLkdyaWQucHJvdG90eXBlLmNsb25lLmFwcGx5KHRoaXMsW2FdKX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5MYXllci5BcmNJTVMifSk7T3BlbkxheWVycy5Db250cm9sLlBhblpvb209T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkNvbnRyb2wse3NsaWRlRmFjdG9yOjUwLHNsaWRlUmF0aW86bnVsbCxidXR0b25zOm51bGwscG9zaXRpb246bnVsbCxpbml0aWFsaXplOmZ1bmN0aW9uKGEpe3RoaXMucG9zaXRpb249bmV3IE9wZW5MYXllcnMuUGl4ZWwoT3BlbkxheWVycy5Db250cm9sLlBhblpvb20uWCxPcGVuTGF5ZXJzLkNvbnRyb2wuUGFuWm9vbS5ZKTtPcGVuTGF5ZXJzLkNvbnRyb2wucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5tYXAmJnRoaXMubWFwLmV2ZW50cy51bnJlZ2lzdGVyKCJidXR0b25jbGljayIsdGhpcyx0aGlzLm9uQnV0dG9uQ2xpY2spO3RoaXMucmVtb3ZlQnV0dG9ucygpO3RoaXMucG9zaXRpb249dGhpcy5idXR0b25zPW51bGw7T3BlbkxheWVycy5Db250cm9sLnByb3RvdHlwZS5kZXN0cm95LmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sCnNldE1hcDpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLkNvbnRyb2wucHJvdG90eXBlLnNldE1hcC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5tYXAuZXZlbnRzLnJlZ2lzdGVyKCJidXR0b25jbGljayIsdGhpcyx0aGlzLm9uQnV0dG9uQ2xpY2spfSxkcmF3OmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuZHJhdy5hcHBseSh0aGlzLGFyZ3VtZW50cyk7YT10aGlzLnBvc2l0aW9uO3RoaXMuYnV0dG9ucz1bXTt2YXIgYj17dzoxOCxoOjE4fSxjPW5ldyBPcGVuTGF5ZXJzLlBpeGVsKGEueCtiLncvMixhLnkpO3RoaXMuX2FkZEJ1dHRvbigicGFudXAiLCJub3J0aC1taW5pLnBuZyIsYyxiKTthLnk9Yy55K2IuaDt0aGlzLl9hZGRCdXR0b24oInBhbmxlZnQiLCJ3ZXN0LW1pbmkucG5nIixhLGIpO3RoaXMuX2FkZEJ1dHRvbigicGFucmlnaHQiLCJlYXN0LW1pbmkucG5nIixhLmFkZChiLncsMCksYik7dGhpcy5fYWRkQnV0dG9uKCJwYW5kb3duIiwic291dGgtbWluaS5wbmciLApjLmFkZCgwLDIqYi5oKSxiKTt0aGlzLl9hZGRCdXR0b24oInpvb21pbiIsInpvb20tcGx1cy1taW5pLnBuZyIsYy5hZGQoMCwzKmIuaCs1KSxiKTt0aGlzLl9hZGRCdXR0b24oInpvb213b3JsZCIsInpvb20td29ybGQtbWluaS5wbmciLGMuYWRkKDAsNCpiLmgrNSksYik7dGhpcy5fYWRkQnV0dG9uKCJ6b29tb3V0Iiwiem9vbS1taW51cy1taW5pLnBuZyIsYy5hZGQoMCw1KmIuaCs1KSxiKTtyZXR1cm4gdGhpcy5kaXZ9LF9hZGRCdXR0b246ZnVuY3Rpb24oYSxiLGMsZCl7Yj1PcGVuTGF5ZXJzLlV0aWwuZ2V0SW1hZ2VMb2NhdGlvbihiKTtjPU9wZW5MYXllcnMuVXRpbC5jcmVhdGVBbHBoYUltYWdlRGl2KHRoaXMuaWQrIl8iK2EsYyxkLGIsImFic29sdXRlIik7Yy5zdHlsZS5jdXJzb3I9InBvaW50ZXIiO3RoaXMuZGl2LmFwcGVuZENoaWxkKGMpO2MuYWN0aW9uPWE7Yy5jbGFzc05hbWU9Im9sQnV0dG9uIjt0aGlzLmJ1dHRvbnMucHVzaChjKTtyZXR1cm4gY30sX3JlbW92ZUJ1dHRvbjpmdW5jdGlvbihhKXt0aGlzLmRpdi5yZW1vdmVDaGlsZChhKTsKT3BlbkxheWVycy5VdGlsLnJlbW92ZUl0ZW0odGhpcy5idXR0b25zLGEpfSxyZW1vdmVCdXR0b25zOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPXRoaXMuYnV0dG9ucy5sZW5ndGgtMTswPD1hOy0tYSl0aGlzLl9yZW1vdmVCdXR0b24odGhpcy5idXR0b25zW2FdKX0sb25CdXR0b25DbGljazpmdW5jdGlvbihhKXtzd2l0Y2goYS5idXR0b25FbGVtZW50LmFjdGlvbil7Y2FzZSAicGFudXAiOnRoaXMubWFwLnBhbigwLC10aGlzLmdldFNsaWRlRmFjdG9yKCJoIikpO2JyZWFrO2Nhc2UgInBhbmRvd24iOnRoaXMubWFwLnBhbigwLHRoaXMuZ2V0U2xpZGVGYWN0b3IoImgiKSk7YnJlYWs7Y2FzZSAicGFubGVmdCI6dGhpcy5tYXAucGFuKC10aGlzLmdldFNsaWRlRmFjdG9yKCJ3IiksMCk7YnJlYWs7Y2FzZSAicGFucmlnaHQiOnRoaXMubWFwLnBhbih0aGlzLmdldFNsaWRlRmFjdG9yKCJ3IiksMCk7YnJlYWs7Y2FzZSAiem9vbWluIjp0aGlzLm1hcC56b29tSW4oKTticmVhaztjYXNlICJ6b29tb3V0Ijp0aGlzLm1hcC56b29tT3V0KCk7CmJyZWFrO2Nhc2UgInpvb213b3JsZCI6dGhpcy5tYXAuem9vbVRvTWF4RXh0ZW50KCl9fSxnZXRTbGlkZUZhY3RvcjpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5zbGlkZVJhdGlvP3RoaXMubWFwLmdldFNpemUoKVthXSp0aGlzLnNsaWRlUmF0aW86dGhpcy5zbGlkZUZhY3Rvcn0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Db250cm9sLlBhblpvb20ifSk7T3BlbkxheWVycy5Db250cm9sLlBhblpvb20uWD00O09wZW5MYXllcnMuQ29udHJvbC5QYW5ab29tLlk9NDtPcGVuTGF5ZXJzLkNvbnRyb2wuUGFuWm9vbUJhcj1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuQ29udHJvbC5QYW5ab29tLHt6b29tU3RvcFdpZHRoOjE4LHpvb21TdG9wSGVpZ2h0OjExLHNsaWRlcjpudWxsLHNsaWRlckV2ZW50czpudWxsLHpvb21iYXJEaXY6bnVsbCx6b29tV29ybGRJY29uOiExLHBhbkljb25zOiEwLGZvcmNlRml4ZWRab29tTGV2ZWw6ITEsbW91c2VEcmFnU3RhcnQ6bnVsbCxkZWx0YVk6bnVsbCx6b29tU3RhcnQ6bnVsbCxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5fcmVtb3ZlWm9vbUJhcigpO3RoaXMubWFwLmV2ZW50cy51bih7Y2hhbmdlYmFzZWxheWVyOnRoaXMucmVkcmF3LHVwZGF0ZXNpemU6dGhpcy5yZWRyYXcsc2NvcGU6dGhpc30pO09wZW5MYXllcnMuQ29udHJvbC5QYW5ab29tLnByb3RvdHlwZS5kZXN0cm95LmFwcGx5KHRoaXMsYXJndW1lbnRzKTtkZWxldGUgdGhpcy5tb3VzZURyYWdTdGFydDtkZWxldGUgdGhpcy56b29tU3RhcnR9LHNldE1hcDpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLkNvbnRyb2wuUGFuWm9vbS5wcm90b3R5cGUuc2V0TWFwLmFwcGx5KHRoaXMsCmFyZ3VtZW50cyk7dGhpcy5tYXAuZXZlbnRzLm9uKHtjaGFuZ2ViYXNlbGF5ZXI6dGhpcy5yZWRyYXcsdXBkYXRlc2l6ZTp0aGlzLnJlZHJhdyxzY29wZTp0aGlzfSl9LHJlZHJhdzpmdW5jdGlvbigpe251bGwhPXRoaXMuZGl2JiYodGhpcy5yZW1vdmVCdXR0b25zKCksdGhpcy5fcmVtb3ZlWm9vbUJhcigpKTt0aGlzLmRyYXcoKX0sZHJhdzpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLkNvbnRyb2wucHJvdG90eXBlLmRyYXcuYXBwbHkodGhpcyxhcmd1bWVudHMpO2E9dGhpcy5wb3NpdGlvbi5jbG9uZSgpO3RoaXMuYnV0dG9ucz1bXTt2YXIgYj17dzoxOCxoOjE4fTtpZih0aGlzLnBhbkljb25zKXt2YXIgYz1uZXcgT3BlbkxheWVycy5QaXhlbChhLngrYi53LzIsYS55KSxkPWIudzt0aGlzLnpvb21Xb3JsZEljb24mJihjPW5ldyBPcGVuTGF5ZXJzLlBpeGVsKGEueCtiLncsYS55KSk7dGhpcy5fYWRkQnV0dG9uKCJwYW51cCIsIm5vcnRoLW1pbmkucG5nIixjLGIpO2EueT1jLnkrYi5oOwp0aGlzLl9hZGRCdXR0b24oInBhbmxlZnQiLCJ3ZXN0LW1pbmkucG5nIixhLGIpO3RoaXMuem9vbVdvcmxkSWNvbiYmKHRoaXMuX2FkZEJ1dHRvbigiem9vbXdvcmxkIiwiem9vbS13b3JsZC1taW5pLnBuZyIsYS5hZGQoYi53LDApLGIpLGQqPTIpO3RoaXMuX2FkZEJ1dHRvbigicGFucmlnaHQiLCJlYXN0LW1pbmkucG5nIixhLmFkZChkLDApLGIpO3RoaXMuX2FkZEJ1dHRvbigicGFuZG93biIsInNvdXRoLW1pbmkucG5nIixjLmFkZCgwLDIqYi5oKSxiKTt0aGlzLl9hZGRCdXR0b24oInpvb21pbiIsInpvb20tcGx1cy1taW5pLnBuZyIsYy5hZGQoMCwzKmIuaCs1KSxiKTtjPXRoaXMuX2FkZFpvb21CYXIoYy5hZGQoMCw0KmIuaCs1KSk7dGhpcy5fYWRkQnV0dG9uKCJ6b29tb3V0Iiwiem9vbS1taW51cy1taW5pLnBuZyIsYyxiKX1lbHNlIHRoaXMuX2FkZEJ1dHRvbigiem9vbWluIiwiem9vbS1wbHVzLW1pbmkucG5nIixhLGIpLGM9dGhpcy5fYWRkWm9vbUJhcihhLmFkZCgwLGIuaCkpLAp0aGlzLl9hZGRCdXR0b24oInpvb21vdXQiLCJ6b29tLW1pbnVzLW1pbmkucG5nIixjLGIpLHRoaXMuem9vbVdvcmxkSWNvbiYmKGM9Yy5hZGQoMCxiLmgrMyksdGhpcy5fYWRkQnV0dG9uKCJ6b29td29ybGQiLCJ6b29tLXdvcmxkLW1pbmkucG5nIixjLGIpKTtyZXR1cm4gdGhpcy5kaXZ9LF9hZGRab29tQmFyOmZ1bmN0aW9uKGEpe3ZhciBiPU9wZW5MYXllcnMuVXRpbC5nZXRJbWFnZUxvY2F0aW9uKCJzbGlkZXIucG5nIiksYz10aGlzLmlkKyJfIit0aGlzLm1hcC5pZCxkPXRoaXMubWFwLmdldE1pblpvb20oKSxlPXRoaXMubWFwLmdldE51bVpvb21MZXZlbHMoKS0xLXRoaXMubWFwLmdldFpvb20oKSxlPU9wZW5MYXllcnMuVXRpbC5jcmVhdGVBbHBoYUltYWdlRGl2KGMsYS5hZGQoLTEsZSp0aGlzLnpvb21TdG9wSGVpZ2h0KSx7dzoyMCxoOjl9LGIsImFic29sdXRlIik7ZS5zdHlsZS5jdXJzb3I9Im1vdmUiO3RoaXMuc2xpZGVyPWU7dGhpcy5zbGlkZXJFdmVudHM9bmV3IE9wZW5MYXllcnMuRXZlbnRzKHRoaXMsCmUsbnVsbCwhMCx7aW5jbHVkZVhZOiEwfSk7dGhpcy5zbGlkZXJFdmVudHMub24oe3RvdWNoc3RhcnQ6dGhpcy56b29tQmFyRG93bix0b3VjaG1vdmU6dGhpcy56b29tQmFyRHJhZyx0b3VjaGVuZDp0aGlzLnpvb21CYXJVcCxtb3VzZWRvd246dGhpcy56b29tQmFyRG93bixtb3VzZW1vdmU6dGhpcy56b29tQmFyRHJhZyxtb3VzZXVwOnRoaXMuem9vbUJhclVwfSk7dmFyIGY9e3c6dGhpcy56b29tU3RvcFdpZHRoLGg6dGhpcy56b29tU3RvcEhlaWdodCoodGhpcy5tYXAuZ2V0TnVtWm9vbUxldmVscygpLWQpfSxiPU9wZW5MYXllcnMuVXRpbC5nZXRJbWFnZUxvY2F0aW9uKCJ6b29tYmFyLnBuZyIpLGM9bnVsbDtPcGVuTGF5ZXJzLlV0aWwuYWxwaGFIYWNrKCk/KGM9dGhpcy5pZCsiXyIrdGhpcy5tYXAuaWQsYz1PcGVuTGF5ZXJzLlV0aWwuY3JlYXRlQWxwaGFJbWFnZURpdihjLGEse3c6Zi53LGg6dGhpcy56b29tU3RvcEhlaWdodH0sYiwiYWJzb2x1dGUiLG51bGwsImNyb3AiKSxjLnN0eWxlLmhlaWdodD0KZi5oKyJweCIpOmM9T3BlbkxheWVycy5VdGlsLmNyZWF0ZURpdigiT3BlbkxheWVyc19Db250cm9sX1Bhblpvb21CYXJfWm9vbWJhciIrdGhpcy5tYXAuaWQsYSxmLGIpO2Muc3R5bGUuY3Vyc29yPSJwb2ludGVyIjtjLmNsYXNzTmFtZT0ib2xCdXR0b24iO3RoaXMuem9vbWJhckRpdj1jO3RoaXMuZGl2LmFwcGVuZENoaWxkKGMpO3RoaXMuc3RhcnRUb3A9cGFyc2VJbnQoYy5zdHlsZS50b3ApO3RoaXMuZGl2LmFwcGVuZENoaWxkKGUpO3RoaXMubWFwLmV2ZW50cy5yZWdpc3Rlcigiem9vbWVuZCIsdGhpcyx0aGlzLm1vdmVab29tQmFyKTtyZXR1cm4gYT1hLmFkZCgwLHRoaXMuem9vbVN0b3BIZWlnaHQqKHRoaXMubWFwLmdldE51bVpvb21MZXZlbHMoKS1kKSl9LF9yZW1vdmVab29tQmFyOmZ1bmN0aW9uKCl7dGhpcy5zbGlkZXJFdmVudHMudW4oe3RvdWNoc3RhcnQ6dGhpcy56b29tQmFyRG93bix0b3VjaG1vdmU6dGhpcy56b29tQmFyRHJhZyx0b3VjaGVuZDp0aGlzLnpvb21CYXJVcCwKbW91c2Vkb3duOnRoaXMuem9vbUJhckRvd24sbW91c2Vtb3ZlOnRoaXMuem9vbUJhckRyYWcsbW91c2V1cDp0aGlzLnpvb21CYXJVcH0pO3RoaXMuc2xpZGVyRXZlbnRzLmRlc3Ryb3koKTt0aGlzLmRpdi5yZW1vdmVDaGlsZCh0aGlzLnpvb21iYXJEaXYpO3RoaXMuem9vbWJhckRpdj1udWxsO3RoaXMuZGl2LnJlbW92ZUNoaWxkKHRoaXMuc2xpZGVyKTt0aGlzLnNsaWRlcj1udWxsO3RoaXMubWFwLmV2ZW50cy51bnJlZ2lzdGVyKCJ6b29tZW5kIix0aGlzLHRoaXMubW92ZVpvb21CYXIpfSxvbkJ1dHRvbkNsaWNrOmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuQ29udHJvbC5QYW5ab29tLnByb3RvdHlwZS5vbkJ1dHRvbkNsaWNrLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtpZihhLmJ1dHRvbkVsZW1lbnQ9PT10aGlzLnpvb21iYXJEaXYpe3ZhciBiPWEuYnV0dG9uWFkueS90aGlzLnpvb21TdG9wSGVpZ2h0O2lmKHRoaXMuZm9yY2VGaXhlZFpvb21MZXZlbHx8IXRoaXMubWFwLmZyYWN0aW9uYWxab29tKWI9Ck1hdGguZmxvb3IoYik7Yj10aGlzLm1hcC5nZXROdW1ab29tTGV2ZWxzKCktMS1iO2I9TWF0aC5taW4oTWF0aC5tYXgoYiwwKSx0aGlzLm1hcC5nZXROdW1ab29tTGV2ZWxzKCktMSk7dGhpcy5tYXAuem9vbVRvKGIpfX0scGFzc0V2ZW50VG9TbGlkZXI6ZnVuY3Rpb24oYSl7dGhpcy5zbGlkZXJFdmVudHMuaGFuZGxlQnJvd3NlckV2ZW50KGEpfSx6b29tQmFyRG93bjpmdW5jdGlvbihhKXtpZihPcGVuTGF5ZXJzLkV2ZW50LmlzTGVmdENsaWNrKGEpfHxPcGVuTGF5ZXJzLkV2ZW50LmlzU2luZ2xlVG91Y2goYSkpdGhpcy5tYXAuZXZlbnRzLm9uKHt0b3VjaG1vdmU6dGhpcy5wYXNzRXZlbnRUb1NsaWRlcixtb3VzZW1vdmU6dGhpcy5wYXNzRXZlbnRUb1NsaWRlcixtb3VzZXVwOnRoaXMucGFzc0V2ZW50VG9TbGlkZXIsc2NvcGU6dGhpc30pLHRoaXMubW91c2VEcmFnU3RhcnQ9YS54eS5jbG9uZSgpLHRoaXMuem9vbVN0YXJ0PWEueHkuY2xvbmUoKSx0aGlzLmRpdi5zdHlsZS5jdXJzb3I9CiJtb3ZlIix0aGlzLnpvb21iYXJEaXYub2Zmc2V0cz1udWxsLE9wZW5MYXllcnMuRXZlbnQuc3RvcChhKX0sem9vbUJhckRyYWc6ZnVuY3Rpb24oYSl7aWYobnVsbCE9dGhpcy5tb3VzZURyYWdTdGFydCl7dmFyIGI9dGhpcy5tb3VzZURyYWdTdGFydC55LWEueHkueSxjPU9wZW5MYXllcnMuVXRpbC5wYWdlUG9zaXRpb24odGhpcy56b29tYmFyRGl2KTswPGEuY2xpZW50WS1jWzFdJiZhLmNsaWVudFktY1sxXTxwYXJzZUludCh0aGlzLnpvb21iYXJEaXYuc3R5bGUuaGVpZ2h0KS0yJiYoYj1wYXJzZUludCh0aGlzLnNsaWRlci5zdHlsZS50b3ApLWIsdGhpcy5zbGlkZXIuc3R5bGUudG9wPWIrInB4Iix0aGlzLm1vdXNlRHJhZ1N0YXJ0PWEueHkuY2xvbmUoKSk7dGhpcy5kZWx0YVk9dGhpcy56b29tU3RhcnQueS1hLnh5Lnk7T3BlbkxheWVycy5FdmVudC5zdG9wKGEpfX0sem9vbUJhclVwOmZ1bmN0aW9uKGEpe2lmKChPcGVuTGF5ZXJzLkV2ZW50LmlzTGVmdENsaWNrKGEpfHwidG91Y2hlbmQiPT09CmEudHlwZSkmJnRoaXMubW91c2VEcmFnU3RhcnQpe3RoaXMuZGl2LnN0eWxlLmN1cnNvcj0iIjt0aGlzLm1hcC5ldmVudHMudW4oe3RvdWNobW92ZTp0aGlzLnBhc3NFdmVudFRvU2xpZGVyLG1vdXNldXA6dGhpcy5wYXNzRXZlbnRUb1NsaWRlcixtb3VzZW1vdmU6dGhpcy5wYXNzRXZlbnRUb1NsaWRlcixzY29wZTp0aGlzfSk7dmFyIGI9dGhpcy5tYXAuem9vbTshdGhpcy5mb3JjZUZpeGVkWm9vbUxldmVsJiZ0aGlzLm1hcC5mcmFjdGlvbmFsWm9vbT8oYis9dGhpcy5kZWx0YVkvdGhpcy56b29tU3RvcEhlaWdodCxiPU1hdGgubWluKE1hdGgubWF4KGIsMCksdGhpcy5tYXAuZ2V0TnVtWm9vbUxldmVscygpLTEpKTooYis9dGhpcy5kZWx0YVkvdGhpcy56b29tU3RvcEhlaWdodCxiPU1hdGgubWF4KE1hdGgucm91bmQoYiksMCkpO3RoaXMubWFwLnpvb21UbyhiKTt0aGlzLnpvb21TdGFydD10aGlzLm1vdXNlRHJhZ1N0YXJ0PW51bGw7dGhpcy5kZWx0YVk9MDtPcGVuTGF5ZXJzLkV2ZW50LnN0b3AoYSl9fSwKbW92ZVpvb21CYXI6ZnVuY3Rpb24oKXt2YXIgYT0odGhpcy5tYXAuZ2V0TnVtWm9vbUxldmVscygpLTEtdGhpcy5tYXAuZ2V0Wm9vbSgpKSp0aGlzLnpvb21TdG9wSGVpZ2h0K3RoaXMuc3RhcnRUb3ArMTt0aGlzLnNsaWRlci5zdHlsZS50b3A9YSsicHgifSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkNvbnRyb2wuUGFuWm9vbUJhciJ9KTtPcGVuTGF5ZXJzLkZvcm1hdC5XRlNDYXBhYmlsaXRpZXM9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkZvcm1hdC5YTUwuVmVyc2lvbmVkT0dDLHtkZWZhdWx0VmVyc2lvbjoiMS4xLjAiLENMQVNTX05BTUU6Ik9wZW5MYXllcnMuRm9ybWF0LldGU0NhcGFiaWxpdGllcyJ9KTtPcGVuTGF5ZXJzLkZvcm1hdC5XRlNDYXBhYmlsaXRpZXMudjE9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkZvcm1hdC5YTUwse25hbWVzcGFjZXM6e3dmczoiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC93ZnMiLHhsaW5rOiJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIix4c2k6Imh0dHA6Ly93d3cudzMub3JnLzIwMDEvWE1MU2NoZW1hLWluc3RhbmNlIixvd3M6Imh0dHA6Ly93d3cub3Blbmdpcy5uZXQvb3dzIn0sZXJyb3JQcm9wZXJ0eToiZmVhdHVyZVR5cGVMaXN0IixkZWZhdWx0UHJlZml4OiJ3ZnMiLHJlYWQ6ZnVuY3Rpb24oYSl7InN0cmluZyI9PXR5cGVvZiBhJiYoYT1PcGVuTGF5ZXJzLkZvcm1hdC5YTUwucHJvdG90eXBlLnJlYWQuYXBwbHkodGhpcyxbYV0pKTthJiY5PT1hLm5vZGVUeXBlJiYoYT1hLmRvY3VtZW50RWxlbWVudCk7dmFyIGI9e307dGhpcy5yZWFkTm9kZShhLGIpO3JldHVybiBifSxyZWFkZXJzOnt3ZnM6e1dGU19DYXBhYmlsaXRpZXM6ZnVuY3Rpb24oYSwKYil7dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGIpfSxGZWF0dXJlVHlwZUxpc3Q6ZnVuY3Rpb24oYSxiKXtiLmZlYXR1cmVUeXBlTGlzdD17ZmVhdHVyZVR5cGVzOltdfTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYi5mZWF0dXJlVHlwZUxpc3QpfSxGZWF0dXJlVHlwZTpmdW5jdGlvbihhLGIpe3ZhciBjPXt9O3RoaXMucmVhZENoaWxkTm9kZXMoYSxjKTtiLmZlYXR1cmVUeXBlcy5wdXNoKGMpfSxOYW1lOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5nZXRDaGlsZFZhbHVlKGEpO2MmJihjPWMuc3BsaXQoIjoiKSxiLm5hbWU9Yy5wb3AoKSwwPGMubGVuZ3RoJiYoYi5mZWF0dXJlTlM9dGhpcy5sb29rdXBOYW1lc3BhY2VVUkkoYSxjWzBdKSkpfSxUaXRsZTpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuZ2V0Q2hpbGRWYWx1ZShhKTtjJiYoYi50aXRsZT1jKX0sQWJzdHJhY3Q6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmdldENoaWxkVmFsdWUoYSk7YyYmKGJbImFic3RyYWN0Il09Yyl9fX0sCkNMQVNTX05BTUU6Ik9wZW5MYXllcnMuRm9ybWF0LldGU0NhcGFiaWxpdGllcy52MSJ9KTtPcGVuTGF5ZXJzLkZvcm1hdC5XRlNDYXBhYmlsaXRpZXMudjFfMV8wPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Gb3JtYXQuV0ZTQ2FwYWJpbGl0aWVzLnYxLHtyZWdFeGVzOnt0cmltU3BhY2U6L15ccyp8XHMqJC9nLHJlbW92ZVNwYWNlOi9ccyovZyxzcGxpdFNwYWNlOi9ccysvLHRyaW1Db21tYTovXHMqLFxzKi9nfSxyZWFkZXJzOnt3ZnM6T3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoe0RlZmF1bHRTUlM6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmdldENoaWxkVmFsdWUoYSk7YyYmKGIuc3JzPWMpfX0sT3BlbkxheWVycy5Gb3JtYXQuV0ZTQ2FwYWJpbGl0aWVzLnYxLnByb3RvdHlwZS5yZWFkZXJzLndmcyksb3dzOk9wZW5MYXllcnMuRm9ybWF0Lk9XU0NvbW1vbi52MS5wcm90b3R5cGUucmVhZGVycy5vd3N9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuRm9ybWF0LldGU0NhcGFiaWxpdGllcy52MV8xXzAifSk7T3BlbkxheWVycy5MYXllci5JbWFnZT1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuTGF5ZXIse2lzQmFzZUxheWVyOiEwLHVybDpudWxsLGV4dGVudDpudWxsLHNpemU6bnVsbCx0aWxlOm51bGwsYXNwZWN0UmF0aW86bnVsbCxpbml0aWFsaXplOmZ1bmN0aW9uKGEsYixjLGQsZSl7dGhpcy51cmw9Yjt0aGlzLm1heEV4dGVudD10aGlzLmV4dGVudD1jO3RoaXMuc2l6ZT1kO09wZW5MYXllcnMuTGF5ZXIucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxbYSxlXSk7dGhpcy5hc3BlY3RSYXRpbz10aGlzLmV4dGVudC5nZXRIZWlnaHQoKS90aGlzLnNpemUuaC8odGhpcy5leHRlbnQuZ2V0V2lkdGgoKS90aGlzLnNpemUudyl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLnRpbGUmJih0aGlzLnJlbW92ZVRpbGVNb25pdG9yaW5nSG9va3ModGhpcy50aWxlKSx0aGlzLnRpbGUuZGVzdHJveSgpLHRoaXMudGlsZT1udWxsKTtPcGVuTGF5ZXJzLkxheWVyLnByb3RvdHlwZS5kZXN0cm95LmFwcGx5KHRoaXMsCmFyZ3VtZW50cyl9LGNsb25lOmZ1bmN0aW9uKGEpe251bGw9PWEmJihhPW5ldyBPcGVuTGF5ZXJzLkxheWVyLkltYWdlKHRoaXMubmFtZSx0aGlzLnVybCx0aGlzLmV4dGVudCx0aGlzLnNpemUsdGhpcy5nZXRPcHRpb25zKCkpKTtyZXR1cm4gYT1PcGVuTGF5ZXJzLkxheWVyLnByb3RvdHlwZS5jbG9uZS5hcHBseSh0aGlzLFthXSl9LHNldE1hcDpmdW5jdGlvbihhKXtudWxsPT10aGlzLm9wdGlvbnMubWF4UmVzb2x1dGlvbiYmKHRoaXMub3B0aW9ucy5tYXhSZXNvbHV0aW9uPXRoaXMuYXNwZWN0UmF0aW8qdGhpcy5leHRlbnQuZ2V0V2lkdGgoKS90aGlzLnNpemUudyk7T3BlbkxheWVycy5MYXllci5wcm90b3R5cGUuc2V0TWFwLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sbW92ZVRvOmZ1bmN0aW9uKGEsYixjKXtPcGVuTGF5ZXJzLkxheWVyLnByb3RvdHlwZS5tb3ZlVG8uYXBwbHkodGhpcyxhcmd1bWVudHMpO3ZhciBkPW51bGw9PXRoaXMudGlsZTtpZihifHxkKXt0aGlzLnNldFRpbGVTaXplKCk7CnZhciBlPXRoaXMubWFwLmdldExheWVyUHhGcm9tTG9uTGF0KHtsb246dGhpcy5leHRlbnQubGVmdCxsYXQ6dGhpcy5leHRlbnQudG9wfSk7ZD8odGhpcy50aWxlPW5ldyBPcGVuTGF5ZXJzLlRpbGUuSW1hZ2UodGhpcyxlLHRoaXMuZXh0ZW50LG51bGwsdGhpcy50aWxlU2l6ZSksdGhpcy5hZGRUaWxlTW9uaXRvcmluZ0hvb2tzKHRoaXMudGlsZSkpOih0aGlzLnRpbGUuc2l6ZT10aGlzLnRpbGVTaXplLmNsb25lKCksdGhpcy50aWxlLnBvc2l0aW9uPWUuY2xvbmUoKSk7dGhpcy50aWxlLmRyYXcoKX19LHNldFRpbGVTaXplOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5leHRlbnQuZ2V0V2lkdGgoKS90aGlzLm1hcC5nZXRSZXNvbHV0aW9uKCksYj10aGlzLmV4dGVudC5nZXRIZWlnaHQoKS90aGlzLm1hcC5nZXRSZXNvbHV0aW9uKCk7dGhpcy50aWxlU2l6ZT1uZXcgT3BlbkxheWVycy5TaXplKGEsYil9LGFkZFRpbGVNb25pdG9yaW5nSG9va3M6ZnVuY3Rpb24oYSl7YS5vbkxvYWRTdGFydD0KZnVuY3Rpb24oKXt0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoImxvYWRzdGFydCIpfTthLmV2ZW50cy5yZWdpc3RlcigibG9hZHN0YXJ0Iix0aGlzLGEub25Mb2FkU3RhcnQpO2Eub25Mb2FkRW5kPWZ1bmN0aW9uKCl7dGhpcy5ldmVudHMudHJpZ2dlckV2ZW50KCJsb2FkZW5kIil9O2EuZXZlbnRzLnJlZ2lzdGVyKCJsb2FkZW5kIix0aGlzLGEub25Mb2FkRW5kKTthLmV2ZW50cy5yZWdpc3RlcigidW5sb2FkIix0aGlzLGEub25Mb2FkRW5kKX0scmVtb3ZlVGlsZU1vbml0b3JpbmdIb29rczpmdW5jdGlvbihhKXthLnVubG9hZCgpO2EuZXZlbnRzLnVuKHtsb2Fkc3RhcnQ6YS5vbkxvYWRTdGFydCxsb2FkZW5kOmEub25Mb2FkRW5kLHVubG9hZDphLm9uTG9hZEVuZCxzY29wZTp0aGlzfSl9LHNldFVybDpmdW5jdGlvbihhKXt0aGlzLnVybD1hO3RoaXMudGlsZS5kcmF3KCl9LGdldFVSTDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy51cmx9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuTGF5ZXIuSW1hZ2UifSk7T3BlbkxheWVycy5TdHJhdGVneT1PcGVuTGF5ZXJzLkNsYXNzKHtsYXllcjpudWxsLG9wdGlvbnM6bnVsbCxhY3RpdmU6bnVsbCxhdXRvQWN0aXZhdGU6ITAsYXV0b0Rlc3Ryb3k6ITAsaW5pdGlhbGl6ZTpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHRoaXMsYSk7dGhpcy5vcHRpb25zPWE7dGhpcy5hY3RpdmU9ITF9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmRlYWN0aXZhdGUoKTt0aGlzLm9wdGlvbnM9dGhpcy5sYXllcj1udWxsfSxzZXRMYXllcjpmdW5jdGlvbihhKXt0aGlzLmxheWVyPWF9LGFjdGl2YXRlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYWN0aXZlPyExOnRoaXMuYWN0aXZlPSEwfSxkZWFjdGl2YXRlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYWN0aXZlPyh0aGlzLmFjdGl2ZT0hMSwhMCk6ITF9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuU3RyYXRlZ3kifSk7T3BlbkxheWVycy5TdHJhdGVneS5TYXZlPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5TdHJhdGVneSx7ZXZlbnRzOm51bGwsYXV0bzohMSx0aW1lcjpudWxsLGluaXRpYWxpemU6ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5TdHJhdGVneS5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLFthXSk7dGhpcy5ldmVudHM9bmV3IE9wZW5MYXllcnMuRXZlbnRzKHRoaXMpfSxhY3RpdmF0ZTpmdW5jdGlvbigpe3ZhciBhPU9wZW5MYXllcnMuU3RyYXRlZ3kucHJvdG90eXBlLmFjdGl2YXRlLmNhbGwodGhpcyk7aWYoYSYmdGhpcy5hdXRvKWlmKCJudW1iZXIiPT09dHlwZW9mIHRoaXMuYXV0byl0aGlzLnRpbWVyPXdpbmRvdy5zZXRJbnRlcnZhbChPcGVuTGF5ZXJzLkZ1bmN0aW9uLmJpbmQodGhpcy5zYXZlLHRoaXMpLDFFMyp0aGlzLmF1dG8pO2Vsc2UgdGhpcy5sYXllci5ldmVudHMub24oe2ZlYXR1cmVhZGRlZDp0aGlzLnRyaWdnZXJTYXZlLGFmdGVyZmVhdHVyZW1vZGlmaWVkOnRoaXMudHJpZ2dlclNhdmUsCnNjb3BlOnRoaXN9KTtyZXR1cm4gYX0sZGVhY3RpdmF0ZTpmdW5jdGlvbigpe3ZhciBhPU9wZW5MYXllcnMuU3RyYXRlZ3kucHJvdG90eXBlLmRlYWN0aXZhdGUuY2FsbCh0aGlzKTthJiZ0aGlzLmF1dG8mJigibnVtYmVyIj09PXR5cGVvZiB0aGlzLmF1dG8/d2luZG93LmNsZWFySW50ZXJ2YWwodGhpcy50aW1lcik6dGhpcy5sYXllci5ldmVudHMudW4oe2ZlYXR1cmVhZGRlZDp0aGlzLnRyaWdnZXJTYXZlLGFmdGVyZmVhdHVyZW1vZGlmaWVkOnRoaXMudHJpZ2dlclNhdmUsc2NvcGU6dGhpc30pKTtyZXR1cm4gYX0sdHJpZ2dlclNhdmU6ZnVuY3Rpb24oYSl7dmFyIGI9YS5mZWF0dXJlO2Iuc3RhdGUhPT1PcGVuTGF5ZXJzLlN0YXRlLklOU0VSVCYmYi5zdGF0ZSE9PU9wZW5MYXllcnMuU3RhdGUuVVBEQVRFJiZiLnN0YXRlIT09T3BlbkxheWVycy5TdGF0ZS5ERUxFVEV8fHRoaXMuc2F2ZShbYS5mZWF0dXJlXSl9LHNhdmU6ZnVuY3Rpb24oYSl7YXx8KGE9dGhpcy5sYXllci5mZWF0dXJlcyk7CnRoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgic3RhcnQiLHtmZWF0dXJlczphfSk7dmFyIGI9dGhpcy5sYXllci5wcm9qZWN0aW9uLGM9dGhpcy5sYXllci5tYXAuZ2V0UHJvamVjdGlvbk9iamVjdCgpO2lmKCFjLmVxdWFscyhiKSl7Zm9yKHZhciBkPWEubGVuZ3RoLGU9QXJyYXkoZCksZixnLGg9MDtoPGQ7KytoKWY9YVtoXSxnPWYuY2xvbmUoKSxnLmZpZD1mLmZpZCxnLnN0YXRlPWYuc3RhdGUsZi51cmwmJihnLnVybD1mLnVybCksZy5fb3JpZ2luYWw9ZixnLmdlb21ldHJ5LnRyYW5zZm9ybShjLGIpLGVbaF09ZzthPWV9dGhpcy5sYXllci5wcm90b2NvbC5jb21taXQoYSx7Y2FsbGJhY2s6dGhpcy5vbkNvbW1pdCxzY29wZTp0aGlzfSl9LG9uQ29tbWl0OmZ1bmN0aW9uKGEpe3ZhciBiPXtyZXNwb25zZTphfTtpZihhLnN1Y2Nlc3MoKSl7Zm9yKHZhciBjPWEucmVxRmVhdHVyZXMsZCxlPVtdLGY9YS5pbnNlcnRJZHN8fFtdLGc9MCxoPTAsaz1jLmxlbmd0aDtoPGs7KytoKWlmKGQ9Y1toXSwKZD1kLl9vcmlnaW5hbHx8ZCxhPWQuc3RhdGUpYT09T3BlbkxheWVycy5TdGF0ZS5ERUxFVEU/ZS5wdXNoKGQpOmE9PU9wZW5MYXllcnMuU3RhdGUuSU5TRVJUJiYoZC5maWQ9ZltnXSwrK2cpLGQuc3RhdGU9bnVsbDswPGUubGVuZ3RoJiZ0aGlzLmxheWVyLmRlc3Ryb3lGZWF0dXJlcyhlKTt0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoInN1Y2Nlc3MiLGIpfWVsc2UgdGhpcy5ldmVudHMudHJpZ2dlckV2ZW50KCJmYWlsIixiKX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5TdHJhdGVneS5TYXZlIn0pO09wZW5MYXllcnMuRXZlbnRzLmZlYXR1cmVjbGljaz1PcGVuTGF5ZXJzLkNsYXNzKHtjYWNoZTpudWxsLG1hcDpudWxsLHByb3ZpZGVzOlsiZmVhdHVyZWNsaWNrIiwibm9mZWF0dXJlY2xpY2siLCJmZWF0dXJlb3ZlciIsImZlYXR1cmVvdXQiXSxpbml0aWFsaXplOmZ1bmN0aW9uKGEpe3RoaXMudGFyZ2V0PWE7aWYoYS5vYmplY3QgaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLk1hcCl0aGlzLnNldE1hcChhLm9iamVjdCk7ZWxzZSBpZihhLm9iamVjdCBpbnN0YW5jZW9mIE9wZW5MYXllcnMuTGF5ZXIuVmVjdG9yKWEub2JqZWN0Lm1hcD90aGlzLnNldE1hcChhLm9iamVjdC5tYXApOmEub2JqZWN0LmV2ZW50cy5yZWdpc3RlcigiYWRkZWQiLHRoaXMsZnVuY3Rpb24oYil7dGhpcy5zZXRNYXAoYS5vYmplY3QubWFwKX0pO2Vsc2UgdGhyb3ciTGlzdGVuZXJzIGZvciAnIit0aGlzLnByb3ZpZGVzLmpvaW4oIicsICciKSsiJyBldmVudHMgY2FuIG9ubHkgYmUgcmVnaXN0ZXJlZCBmb3IgT3BlbkxheWVycy5MYXllci5WZWN0b3Igb3IgT3BlbkxheWVycy5NYXAgaW5zdGFuY2VzIjsKZm9yKHZhciBiPXRoaXMucHJvdmlkZXMubGVuZ3RoLTE7MDw9YjstLWIpYS5leHRlbnNpb25zW3RoaXMucHJvdmlkZXNbYl1dPSEwfSxzZXRNYXA6ZnVuY3Rpb24oYSl7dGhpcy5tYXA9YTt0aGlzLmNhY2hlPXt9O2EuZXZlbnRzLnJlZ2lzdGVyKCJtb3VzZWRvd24iLHRoaXMsdGhpcy5zdGFydCx7ZXh0ZW5zaW9uOiEwfSk7YS5ldmVudHMucmVnaXN0ZXIoIm1vdXNldXAiLHRoaXMsdGhpcy5vbkNsaWNrLHtleHRlbnNpb246ITB9KTthLmV2ZW50cy5yZWdpc3RlcigidG91Y2hzdGFydCIsdGhpcyx0aGlzLnN0YXJ0LHtleHRlbnNpb246ITB9KTthLmV2ZW50cy5yZWdpc3RlcigidG91Y2htb3ZlIix0aGlzLHRoaXMuY2FuY2VsLHtleHRlbnNpb246ITB9KTthLmV2ZW50cy5yZWdpc3RlcigidG91Y2hlbmQiLHRoaXMsdGhpcy5vbkNsaWNrLHtleHRlbnNpb246ITB9KTthLmV2ZW50cy5yZWdpc3RlcigibW91c2Vtb3ZlIix0aGlzLHRoaXMub25Nb3VzZW1vdmUse2V4dGVuc2lvbjohMH0pfSwKc3RhcnQ6ZnVuY3Rpb24oYSl7dGhpcy5zdGFydEV2dD1hfSxjYW5jZWw6ZnVuY3Rpb24oYSl7ZGVsZXRlIHRoaXMuc3RhcnRFdnR9LG9uQ2xpY2s6ZnVuY3Rpb24oYSl7aWYodGhpcy5zdGFydEV2dCYmKCJ0b3VjaGVuZCI9PT1hLnR5cGV8fE9wZW5MYXllcnMuRXZlbnQuaXNMZWZ0Q2xpY2soYSkpKXthPXRoaXMuZ2V0RmVhdHVyZXModGhpcy5zdGFydEV2dCk7ZGVsZXRlIHRoaXMuc3RhcnRFdnQ7Zm9yKHZhciBiLGMsZD17fSxlPTAsZj1hLmxlbmd0aDtlPGYmJihiPWFbZV0sYz1iLmxheWVyLGRbYy5pZF09ITAsYj10aGlzLnRyaWdnZXJFdmVudCgiZmVhdHVyZWNsaWNrIix7ZmVhdHVyZTpifSksITEhPT1iKTsrK2UpO2U9MDtmb3IoZj10aGlzLm1hcC5sYXllcnMubGVuZ3RoO2U8ZjsrK2UpYz10aGlzLm1hcC5sYXllcnNbZV0sYyBpbnN0YW5jZW9mIE9wZW5MYXllcnMuTGF5ZXIuVmVjdG9yJiYhZFtjLmlkXSYmdGhpcy50cmlnZ2VyRXZlbnQoIm5vZmVhdHVyZWNsaWNrIix7bGF5ZXI6Y30pfX0sCm9uTW91c2Vtb3ZlOmZ1bmN0aW9uKGEpe2RlbGV0ZSB0aGlzLnN0YXJ0RXZ0O3ZhciBiPXRoaXMuZ2V0RmVhdHVyZXMoYSksYz17fTthPVtdO2Zvcih2YXIgZCxlPTAsZj1iLmxlbmd0aDtlPGY7KytlKWQ9YltlXSxjW2QuaWRdPWQsdGhpcy5jYWNoZVtkLmlkXXx8YS5wdXNoKGQpO3ZhciBiPVtdLGc7Zm9yKGcgaW4gdGhpcy5jYWNoZSlkPXRoaXMuY2FjaGVbZ10sZC5sYXllciYmZC5sYXllci5tYXA/Y1tkLmlkXXx8Yi5wdXNoKGQpOmRlbGV0ZSB0aGlzLmNhY2hlW2ddO2U9MDtmb3IoZj1hLmxlbmd0aDtlPGYmJihkPWFbZV0sdGhpcy5jYWNoZVtkLmlkXT1kLGc9dGhpcy50cmlnZ2VyRXZlbnQoImZlYXR1cmVvdmVyIix7ZmVhdHVyZTpkfSksITEhPT1nKTsrK2UpO2U9MDtmb3IoZj1iLmxlbmd0aDtlPGYmJihkPWJbZV0sZGVsZXRlIHRoaXMuY2FjaGVbZC5pZF0sZz10aGlzLnRyaWdnZXJFdmVudCgiZmVhdHVyZW91dCIse2ZlYXR1cmU6ZH0pLCExIT09Zyk7KytlKTt9LHRyaWdnZXJFdmVudDpmdW5jdGlvbihhLApiKXt2YXIgYz1iLmZlYXR1cmU/Yi5mZWF0dXJlLmxheWVyOmIubGF5ZXIsZD10aGlzLnRhcmdldC5vYmplY3Q7aWYoZCBpbnN0YW5jZW9mIE9wZW5MYXllcnMuTWFwfHxkPT09YylyZXR1cm4gdGhpcy50YXJnZXQudHJpZ2dlckV2ZW50KGEsYil9LGdldEZlYXR1cmVzOmZ1bmN0aW9uKGEpe3ZhciBiPWEuY2xpZW50WCxjPWEuY2xpZW50WSxkPVtdLGU9W10sZj1bXSxnLGgsayxsO2ZvcihsPXRoaXMubWFwLmxheWVycy5sZW5ndGgtMTswPD1sOy0tbClpZihnPXRoaXMubWFwLmxheWVyc1tsXSwibm9uZSIhPT1nLmRpdi5zdHlsZS5kaXNwbGF5KWlmKGcucmVuZGVyZXIgaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLlJlbmRlcmVyLkVsZW1lbnRzKXtpZihnIGluc3RhbmNlb2YgT3BlbkxheWVycy5MYXllci5WZWN0b3IpZm9yKGg9ZG9jdW1lbnQuZWxlbWVudEZyb21Qb2ludChiLGMpO2gmJmguX2ZlYXR1cmVJZDspKGs9Zy5nZXRGZWF0dXJlQnlJZChoLl9mZWF0dXJlSWQpKT8oZC5wdXNoKGspLApoLnN0eWxlLmRpc3BsYXk9Im5vbmUiLGUucHVzaChoKSxoPWRvY3VtZW50LmVsZW1lbnRGcm9tUG9pbnQoYixjKSk6aD0hMTtmLnB1c2goZyk7Zy5kaXYuc3R5bGUuZGlzcGxheT0ibm9uZSJ9ZWxzZSBnLnJlbmRlcmVyIGluc3RhbmNlb2YgT3BlbkxheWVycy5SZW5kZXJlci5DYW52YXMmJihrPWcucmVuZGVyZXIuZ2V0RmVhdHVyZUlkRnJvbUV2ZW50KGEpKSYmKGQucHVzaChrKSxmLnB1c2goZykpO2w9MDtmb3IoYT1lLmxlbmd0aDtsPGE7KytsKWVbbF0uc3R5bGUuZGlzcGxheT0iIjtmb3IobD1mLmxlbmd0aC0xOzA8PWw7LS1sKWZbbF0uZGl2LnN0eWxlLmRpc3BsYXk9ImJsb2NrIjtyZXR1cm4gZH0sZGVzdHJveTpmdW5jdGlvbigpe2Zvcih2YXIgYT10aGlzLnByb3ZpZGVzLmxlbmd0aC0xOzA8PWE7LS1hKWRlbGV0ZSB0aGlzLnRhcmdldC5leHRlbnNpb25zW3RoaXMucHJvdmlkZXNbYV1dO3RoaXMubWFwLmV2ZW50cy51bih7bW91c2Vtb3ZlOnRoaXMub25Nb3VzZW1vdmUsbW91c2Vkb3duOnRoaXMuc3RhcnQsCm1vdXNldXA6dGhpcy5vbkNsaWNrLHRvdWNoc3RhcnQ6dGhpcy5zdGFydCx0b3VjaG1vdmU6dGhpcy5jYW5jZWwsdG91Y2hlbmQ6dGhpcy5vbkNsaWNrLHNjb3BlOnRoaXN9KTtkZWxldGUgdGhpcy5jYWNoZTtkZWxldGUgdGhpcy5tYXA7ZGVsZXRlIHRoaXMudGFyZ2V0fX0pO09wZW5MYXllcnMuRXZlbnRzLm5vZmVhdHVyZWNsaWNrPU9wZW5MYXllcnMuRXZlbnRzLmZlYXR1cmVjbGljaztPcGVuTGF5ZXJzLkV2ZW50cy5mZWF0dXJlb3Zlcj1PcGVuTGF5ZXJzLkV2ZW50cy5mZWF0dXJlY2xpY2s7T3BlbkxheWVycy5FdmVudHMuZmVhdHVyZW91dD1PcGVuTGF5ZXJzLkV2ZW50cy5mZWF0dXJlY2xpY2s7T3BlbkxheWVycy5Gb3JtYXQuR1BYPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Gb3JtYXQuWE1MLHtkZWZhdWx0RGVzYzoiTm8gZGVzY3JpcHRpb24gYXZhaWxhYmxlIixleHRyYWN0V2F5cG9pbnRzOiEwLGV4dHJhY3RUcmFja3M6ITAsZXh0cmFjdFJvdXRlczohMCxleHRyYWN0QXR0cmlidXRlczohMCxuYW1lc3BhY2VzOntncHg6Imh0dHA6Ly93d3cudG9wb2dyYWZpeC5jb20vR1BYLzEvMSIseHNpOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxL1hNTFNjaGVtYS1pbnN0YW5jZSJ9LHNjaGVtYUxvY2F0aW9uOiJodHRwOi8vd3d3LnRvcG9ncmFmaXguY29tL0dQWC8xLzEgaHR0cDovL3d3dy50b3BvZ3JhZml4LmNvbS9HUFgvMS8xL2dweC54c2QiLGNyZWF0b3I6Ik9wZW5MYXllcnMiLGluaXRpYWxpemU6ZnVuY3Rpb24oYSl7dGhpcy5leHRlcm5hbFByb2plY3Rpb249bmV3IE9wZW5MYXllcnMuUHJvamVjdGlvbigiRVBTRzo0MzI2Iik7T3BlbkxheWVycy5Gb3JtYXQuWE1MLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsClthXSl9LHJlYWQ6ZnVuY3Rpb24oYSl7InN0cmluZyI9PXR5cGVvZiBhJiYoYT1PcGVuTGF5ZXJzLkZvcm1hdC5YTUwucHJvdG90eXBlLnJlYWQuYXBwbHkodGhpcyxbYV0pKTt2YXIgYj1bXTtpZih0aGlzLmV4dHJhY3RUcmFja3MpZm9yKHZhciBjPWEuZ2V0RWxlbWVudHNCeVRhZ05hbWUoInRyayIpLGQ9MCxlPWMubGVuZ3RoO2Q8ZTtkKyspe3ZhciBmPXt9O3RoaXMuZXh0cmFjdEF0dHJpYnV0ZXMmJihmPXRoaXMucGFyc2VBdHRyaWJ1dGVzKGNbZF0pKTtmb3IodmFyIGc9dGhpcy5nZXRFbGVtZW50c0J5VGFnTmFtZU5TKGNbZF0sY1tkXS5uYW1lc3BhY2VVUkksInRya3NlZyIpLGg9MCxrPWcubGVuZ3RoO2g8aztoKyspe3ZhciBsPXRoaXMuZXh0cmFjdFNlZ21lbnQoZ1toXSwidHJrcHQiKTtiLnB1c2gobmV3IE9wZW5MYXllcnMuRmVhdHVyZS5WZWN0b3IobCxmKSl9fWlmKHRoaXMuZXh0cmFjdFJvdXRlcylmb3IoZT1hLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJydGUiKSxjPTAsZD0KZS5sZW5ndGg7YzxkO2MrKylmPXt9LHRoaXMuZXh0cmFjdEF0dHJpYnV0ZXMmJihmPXRoaXMucGFyc2VBdHRyaWJ1dGVzKGVbY10pKSxnPXRoaXMuZXh0cmFjdFNlZ21lbnQoZVtjXSwicnRlcHQiKSxiLnB1c2gobmV3IE9wZW5MYXllcnMuRmVhdHVyZS5WZWN0b3IoZyxmKSk7aWYodGhpcy5leHRyYWN0V2F5cG9pbnRzKWZvcihhPWEuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIndwdCIpLGM9MCxlPWEubGVuZ3RoO2M8ZTtjKyspZj17fSx0aGlzLmV4dHJhY3RBdHRyaWJ1dGVzJiYoZj10aGlzLnBhcnNlQXR0cmlidXRlcyhhW2NdKSksZD1uZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludChhW2NdLmdldEF0dHJpYnV0ZSgibG9uIiksYVtjXS5nZXRBdHRyaWJ1dGUoImxhdCIpKSxiLnB1c2gobmV3IE9wZW5MYXllcnMuRmVhdHVyZS5WZWN0b3IoZCxmKSk7aWYodGhpcy5pbnRlcm5hbFByb2plY3Rpb24mJnRoaXMuZXh0ZXJuYWxQcm9qZWN0aW9uKWZvcihmPTAsYT1iLmxlbmd0aDtmPGE7ZisrKWJbZl0uZ2VvbWV0cnkudHJhbnNmb3JtKHRoaXMuZXh0ZXJuYWxQcm9qZWN0aW9uLAp0aGlzLmludGVybmFsUHJvamVjdGlvbik7cmV0dXJuIGJ9LGV4dHJhY3RTZWdtZW50OmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPXRoaXMuZ2V0RWxlbWVudHNCeVRhZ05hbWVOUyhhLGEubmFtZXNwYWNlVVJJLGIpLGQ9W10sZT0wLGY9Yy5sZW5ndGg7ZTxmO2UrKylkLnB1c2gobmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoY1tlXS5nZXRBdHRyaWJ1dGUoImxvbiIpLGNbZV0uZ2V0QXR0cmlidXRlKCJsYXQiKSkpO3JldHVybiBuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5MaW5lU3RyaW5nKGQpfSxwYXJzZUF0dHJpYnV0ZXM6ZnVuY3Rpb24oYSl7dmFyIGI9e307YT1hLmZpcnN0Q2hpbGQ7Zm9yKHZhciBjLGQ7YTspMT09YS5ub2RlVHlwZSYmYS5maXJzdENoaWxkJiYoYz1hLmZpcnN0Q2hpbGQsMz09Yy5ub2RlVHlwZXx8ND09Yy5ub2RlVHlwZSkmJihkPWEucHJlZml4P2Eubm9kZU5hbWUuc3BsaXQoIjoiKVsxXTphLm5vZGVOYW1lLCJ0cmtzZWciIT1kJiYicnRlcHQiIT1kJiYKKGJbZF09Yy5ub2RlVmFsdWUpKSxhPWEubmV4dFNpYmxpbmc7cmV0dXJuIGJ9LHdyaXRlOmZ1bmN0aW9uKGEsYil7YT1PcGVuTGF5ZXJzLlV0aWwuaXNBcnJheShhKT9hOlthXTt2YXIgYz10aGlzLmNyZWF0ZUVsZW1lbnROUyh0aGlzLm5hbWVzcGFjZXMuZ3B4LCJncHgiKTtjLnNldEF0dHJpYnV0ZSgidmVyc2lvbiIsIjEuMSIpO2Muc2V0QXR0cmlidXRlKCJjcmVhdG9yIix0aGlzLmNyZWF0b3IpO3RoaXMuc2V0QXR0cmlidXRlcyhjLHsieHNpOnNjaGVtYUxvY2F0aW9uIjp0aGlzLnNjaGVtYUxvY2F0aW9ufSk7YiYmIm9iamVjdCI9PXR5cGVvZiBiJiZjLmFwcGVuZENoaWxkKHRoaXMuYnVpbGRNZXRhZGF0YU5vZGUoYikpO2Zvcih2YXIgZD0wLGU9YS5sZW5ndGg7ZDxlO2QrKyljLmFwcGVuZENoaWxkKHRoaXMuYnVpbGRGZWF0dXJlTm9kZShhW2RdKSk7cmV0dXJuIE9wZW5MYXllcnMuRm9ybWF0LlhNTC5wcm90b3R5cGUud3JpdGUuYXBwbHkodGhpcyxbY10pfSxidWlsZE1ldGFkYXRhTm9kZTpmdW5jdGlvbihhKXtmb3IodmFyIGI9ClsibmFtZSIsImRlc2MiLCJhdXRob3IiXSxjPXRoaXMuY3JlYXRlRWxlbWVudE5TKHRoaXMubmFtZXNwYWNlcy5ncHgsIm1ldGFkYXRhIiksZD0wO2Q8Yi5sZW5ndGg7ZCsrKXt2YXIgZT1iW2RdO2lmKGFbZV0pe3ZhciBmPXRoaXMuY3JlYXRlRWxlbWVudE5TKHRoaXMubmFtZXNwYWNlcy5ncHgsZSk7Zi5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZVRleHROb2RlKGFbZV0pKTtjLmFwcGVuZENoaWxkKGYpfX1yZXR1cm4gY30sYnVpbGRGZWF0dXJlTm9kZTpmdW5jdGlvbihhKXt2YXIgYj1hLmdlb21ldHJ5LGI9Yi5jbG9uZSgpO3RoaXMuaW50ZXJuYWxQcm9qZWN0aW9uJiZ0aGlzLmV4dGVybmFsUHJvamVjdGlvbiYmYi50cmFuc2Zvcm0odGhpcy5pbnRlcm5hbFByb2plY3Rpb24sdGhpcy5leHRlcm5hbFByb2plY3Rpb24pO2lmKCJPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50Ij09Yi5DTEFTU19OQU1FKXt2YXIgYz10aGlzLmJ1aWxkV3B0Tm9kZShiKTt0aGlzLmFwcGVuZEF0dHJpYnV0ZXNOb2RlKGMsCmEpO3JldHVybiBjfWM9dGhpcy5jcmVhdGVFbGVtZW50TlModGhpcy5uYW1lc3BhY2VzLmdweCwidHJrIik7dGhpcy5hcHBlbmRBdHRyaWJ1dGVzTm9kZShjLGEpO2E9dGhpcy5idWlsZFRya1NlZ05vZGUoYik7YT1PcGVuTGF5ZXJzLlV0aWwuaXNBcnJheShhKT9hOlthXTtmb3IodmFyIGI9MCxkPWEubGVuZ3RoO2I8ZDtiKyspYy5hcHBlbmRDaGlsZChhW2JdKTtyZXR1cm4gY30sYnVpbGRUcmtTZWdOb2RlOmZ1bmN0aW9uKGEpe3ZhciBiLGMsZCxlO2lmKCJPcGVuTGF5ZXJzLkdlb21ldHJ5LkxpbmVTdHJpbmciPT1hLkNMQVNTX05BTUV8fCJPcGVuTGF5ZXJzLkdlb21ldHJ5LkxpbmVhclJpbmciPT1hLkNMQVNTX05BTUUpe2I9dGhpcy5jcmVhdGVFbGVtZW50TlModGhpcy5uYW1lc3BhY2VzLmdweCwidHJrc2VnIik7Yz0wO2ZvcihkPWEuY29tcG9uZW50cy5sZW5ndGg7YzxkO2MrKyllPWEuY29tcG9uZW50c1tjXSxiLmFwcGVuZENoaWxkKHRoaXMuYnVpbGRUcmtQdE5vZGUoZSkpOwpyZXR1cm4gYn1iPVtdO2M9MDtmb3IoZD1hLmNvbXBvbmVudHMubGVuZ3RoO2M8ZDtjKyspYi5wdXNoKHRoaXMuYnVpbGRUcmtTZWdOb2RlKGEuY29tcG9uZW50c1tjXSkpO3JldHVybiBifSxidWlsZFRya1B0Tm9kZTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROUyh0aGlzLm5hbWVzcGFjZXMuZ3B4LCJ0cmtwdCIpO2Iuc2V0QXR0cmlidXRlKCJsb24iLGEueCk7Yi5zZXRBdHRyaWJ1dGUoImxhdCIsYS55KTtyZXR1cm4gYn0sYnVpbGRXcHROb2RlOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TKHRoaXMubmFtZXNwYWNlcy5ncHgsIndwdCIpO2Iuc2V0QXR0cmlidXRlKCJsb24iLGEueCk7Yi5zZXRBdHRyaWJ1dGUoImxhdCIsYS55KTtyZXR1cm4gYn0sYXBwZW5kQXR0cmlidXRlc05vZGU6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmNyZWF0ZUVsZW1lbnROUyh0aGlzLm5hbWVzcGFjZXMuZ3B4LCJuYW1lIik7Yy5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZVRleHROb2RlKGIuYXR0cmlidXRlcy5uYW1lfHwKYi5pZCkpO2EuYXBwZW5kQ2hpbGQoYyk7Yz10aGlzLmNyZWF0ZUVsZW1lbnROUyh0aGlzLm5hbWVzcGFjZXMuZ3B4LCJkZXNjIik7Yy5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZVRleHROb2RlKGIuYXR0cmlidXRlcy5kZXNjcmlwdGlvbnx8dGhpcy5kZWZhdWx0RGVzYykpO2EuYXBwZW5kQ2hpbGQoYyl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuRm9ybWF0LkdQWCJ9KTtPcGVuTGF5ZXJzLkZvcm1hdC5XTVNEZXNjcmliZUxheWVyPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Gb3JtYXQuWE1MLlZlcnNpb25lZE9HQyx7ZGVmYXVsdFZlcnNpb246IjEuMS4xIixDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkZvcm1hdC5XTVNEZXNjcmliZUxheWVyIn0pO09wZW5MYXllcnMuRm9ybWF0LldNU0Rlc2NyaWJlTGF5ZXIudjFfMV8xPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Gb3JtYXQuV01TRGVzY3JpYmVMYXllcix7aW5pdGlhbGl6ZTpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLkZvcm1hdC5XTVNEZXNjcmliZUxheWVyLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsW2FdKX0scmVhZDpmdW5jdGlvbihhKXsic3RyaW5nIj09dHlwZW9mIGEmJihhPU9wZW5MYXllcnMuRm9ybWF0LlhNTC5wcm90b3R5cGUucmVhZC5hcHBseSh0aGlzLFthXSkpO2Zvcih2YXIgYj1hLmRvY3VtZW50RWxlbWVudC5jaGlsZE5vZGVzLGM9e2xheWVyRGVzY3JpcHRpb25zOltdfSxkLGUsZj0wO2Y8Yi5sZW5ndGg7KytmKWlmKGQ9YltmXSxlPWQubm9kZU5hbWUsIkxheWVyRGVzY3JpcHRpb24iPT1lKXtlPWQuZ2V0QXR0cmlidXRlKCJuYW1lIik7dmFyIGc9IiIsaD0iIixrPSIiO2QuZ2V0QXR0cmlidXRlKCJvd3NUeXBlIik/KGc9ZC5nZXRBdHRyaWJ1dGUoIm93c1R5cGUiKSwKaD1kLmdldEF0dHJpYnV0ZSgib3dzVVJMIikpOiIiIT1kLmdldEF0dHJpYnV0ZSgid2ZzIik/KGc9IldGUyIsaD1kLmdldEF0dHJpYnV0ZSgid2ZzIikpOiIiIT1kLmdldEF0dHJpYnV0ZSgid2NzIikmJihnPSJXQ1MiLGg9ZC5nZXRBdHRyaWJ1dGUoIndjcyIpKTtkPWQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIlF1ZXJ5Iik7MDxkLmxlbmd0aCYmKChrPWRbMF0uZ2V0QXR0cmlidXRlKCJ0eXBlTmFtZSIpKXx8KGs9ZFswXS5nZXRBdHRyaWJ1dGUoInR5cGVuYW1lIikpKTtkPXtsYXllck5hbWU6ZSxvd3NUeXBlOmcsb3dzVVJMOmgsdHlwZU5hbWU6a307Yy5sYXllckRlc2NyaXB0aW9ucy5wdXNoKGQpO2MubGVuZ3RoPWMubGF5ZXJEZXNjcmlwdGlvbnMubGVuZ3RoO2NbYy5sZW5ndGgtMV09ZH1lbHNlIGlmKCJTZXJ2aWNlRXhjZXB0aW9uIj09ZSlyZXR1cm57ZXJyb3I6KG5ldyBPcGVuTGF5ZXJzLkZvcm1hdC5PR0NFeGNlcHRpb25SZXBvcnQpLnJlYWQoYSl9O3JldHVybiBjfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkZvcm1hdC5XTVNEZXNjcmliZUxheWVyLnYxXzFfMSJ9KTsKT3BlbkxheWVycy5Gb3JtYXQuV01TRGVzY3JpYmVMYXllci52MV8xXzA9T3BlbkxheWVycy5Gb3JtYXQuV01TRGVzY3JpYmVMYXllci52MV8xXzE7T3BlbkxheWVycy5MYXllci5YWVo9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkxheWVyLkdyaWQse2lzQmFzZUxheWVyOiEwLHNwaGVyaWNhbE1lcmNhdG9yOiExLHpvb21PZmZzZXQ6MCxzZXJ2ZXJSZXNvbHV0aW9uczpudWxsLGluaXRpYWxpemU6ZnVuY3Rpb24oYSxiLGMpe2lmKGMmJmMuc3BoZXJpY2FsTWVyY2F0b3J8fHRoaXMuc3BoZXJpY2FsTWVyY2F0b3IpYz1PcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHtwcm9qZWN0aW9uOiJFUFNHOjkwMDkxMyIsbnVtWm9vbUxldmVsczoxOX0sYyk7T3BlbkxheWVycy5MYXllci5HcmlkLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsW2F8fHRoaXMubmFtZSxifHx0aGlzLnVybCx7fSxjXSl9LGNsb25lOmZ1bmN0aW9uKGEpe251bGw9PWEmJihhPW5ldyBPcGVuTGF5ZXJzLkxheWVyLlhZWih0aGlzLm5hbWUsdGhpcy51cmwsdGhpcy5nZXRPcHRpb25zKCkpKTtyZXR1cm4gYT1PcGVuTGF5ZXJzLkxheWVyLkdyaWQucHJvdG90eXBlLmNsb25lLmFwcGx5KHRoaXMsClthXSl9LGdldFVSTDpmdW5jdGlvbihhKXthPXRoaXMuZ2V0WFlaKGEpO3ZhciBiPXRoaXMudXJsO09wZW5MYXllcnMuVXRpbC5pc0FycmF5KGIpJiYoYj10aGlzLnNlbGVjdFVybCgiIithLngrYS55K2EueixiKSk7cmV0dXJuIE9wZW5MYXllcnMuU3RyaW5nLmZvcm1hdChiLGEpfSxnZXRYWVo6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5nZXRTZXJ2ZXJSZXNvbHV0aW9uKCksYz1NYXRoLnJvdW5kKChhLmxlZnQtdGhpcy5tYXhFeHRlbnQubGVmdCkvKGIqdGhpcy50aWxlU2l6ZS53KSk7YT1NYXRoLnJvdW5kKCh0aGlzLm1heEV4dGVudC50b3AtYS50b3ApLyhiKnRoaXMudGlsZVNpemUuaCkpO2I9dGhpcy5nZXRTZXJ2ZXJab29tKCk7aWYodGhpcy53cmFwRGF0ZUxpbmUpdmFyIGQ9TWF0aC5wb3coMixiKSxjPShjJWQrZCklZDtyZXR1cm57eDpjLHk6YSx6OmJ9fSxzZXRNYXA6ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5MYXllci5HcmlkLnByb3RvdHlwZS5zZXRNYXAuYXBwbHkodGhpcywKYXJndW1lbnRzKTt0aGlzLnRpbGVPcmlnaW58fCh0aGlzLnRpbGVPcmlnaW49bmV3IE9wZW5MYXllcnMuTG9uTGF0KHRoaXMubWF4RXh0ZW50LmxlZnQsdGhpcy5tYXhFeHRlbnQuYm90dG9tKSl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuTGF5ZXIuWFlaIn0pO09wZW5MYXllcnMuTGF5ZXIuT1NNPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5MYXllci5YWVose25hbWU6Ik9wZW5TdHJlZXRNYXAiLHVybDpbImh0dHA6Ly9hLnRpbGUub3BlbnN0cmVldG1hcC5vcmcvJHt6fS8ke3h9LyR7eX0ucG5nIiwiaHR0cDovL2IudGlsZS5vcGVuc3RyZWV0bWFwLm9yZy8ke3p9LyR7eH0vJHt5fS5wbmciLCJodHRwOi8vYy50aWxlLm9wZW5zdHJlZXRtYXAub3JnLyR7en0vJHt4fS8ke3l9LnBuZyJdLGF0dHJpYnV0aW9uOiImY29weTsgPGEgaHJlZj0naHR0cDovL3d3dy5vcGVuc3RyZWV0bWFwLm9yZy9jb3B5cmlnaHQnPk9wZW5TdHJlZXRNYXA8L2E+IGNvbnRyaWJ1dG9ycyIsc3BoZXJpY2FsTWVyY2F0b3I6ITAsd3JhcERhdGVMaW5lOiEwLHRpbGVPcHRpb25zOm51bGwsaW5pdGlhbGl6ZTpmdW5jdGlvbihhLGIsYyl7T3BlbkxheWVycy5MYXllci5YWVoucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMudGlsZU9wdGlvbnM9Ck9wZW5MYXllcnMuVXRpbC5leHRlbmQoe2Nyb3NzT3JpZ2luS2V5d29yZDoiYW5vbnltb3VzIn0sdGhpcy5vcHRpb25zJiZ0aGlzLm9wdGlvbnMudGlsZU9wdGlvbnMpfSxjbG9uZTpmdW5jdGlvbihhKXtudWxsPT1hJiYoYT1uZXcgT3BlbkxheWVycy5MYXllci5PU00odGhpcy5uYW1lLHRoaXMudXJsLHRoaXMuZ2V0T3B0aW9ucygpKSk7cmV0dXJuIGE9T3BlbkxheWVycy5MYXllci5YWVoucHJvdG90eXBlLmNsb25lLmFwcGx5KHRoaXMsW2FdKX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5MYXllci5PU00ifSk7T3BlbkxheWVycy5SZW5kZXJlcj1PcGVuTGF5ZXJzLkNsYXNzKHtjb250YWluZXI6bnVsbCxyb290Om51bGwsZXh0ZW50Om51bGwsbG9ja2VkOiExLHNpemU6bnVsbCxyZXNvbHV0aW9uOm51bGwsbWFwOm51bGwsZmVhdHVyZUR4OjAsaW5pdGlhbGl6ZTpmdW5jdGlvbihhLGIpe3RoaXMuY29udGFpbmVyPU9wZW5MYXllcnMuVXRpbC5nZXRFbGVtZW50KGEpO09wZW5MYXllcnMuVXRpbC5leHRlbmQodGhpcyxiKX0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMubWFwPXRoaXMucmVzb2x1dGlvbj10aGlzLnNpemU9dGhpcy5leHRlbnQ9dGhpcy5jb250YWluZXI9bnVsbH0sc3VwcG9ydGVkOmZ1bmN0aW9uKCl7cmV0dXJuITF9LHNldEV4dGVudDpmdW5jdGlvbihhLGIpe3RoaXMuZXh0ZW50PWEuY2xvbmUoKTtpZih0aGlzLm1hcC5iYXNlTGF5ZXImJnRoaXMubWFwLmJhc2VMYXllci53cmFwRGF0ZUxpbmUpe3ZhciBjPWEuZ2V0V2lkdGgoKS90aGlzLm1hcC5nZXRFeHRlbnQoKS5nZXRXaWR0aCgpOwphPWEuc2NhbGUoMS9jKTt0aGlzLmV4dGVudD1hLndyYXBEYXRlTGluZSh0aGlzLm1hcC5nZXRNYXhFeHRlbnQoKSkuc2NhbGUoYyl9YiYmKHRoaXMucmVzb2x1dGlvbj1udWxsKTtyZXR1cm4hMH0sc2V0U2l6ZTpmdW5jdGlvbihhKXt0aGlzLnNpemU9YS5jbG9uZSgpO3RoaXMucmVzb2x1dGlvbj1udWxsfSxnZXRSZXNvbHV0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmVzb2x1dGlvbj10aGlzLnJlc29sdXRpb258fHRoaXMubWFwLmdldFJlc29sdXRpb24oKX0sZHJhd0ZlYXR1cmU6ZnVuY3Rpb24oYSxiKXtudWxsPT1iJiYoYj1hLnN0eWxlKTtpZihhLmdlb21ldHJ5KXt2YXIgYz1hLmdlb21ldHJ5LmdldEJvdW5kcygpO2lmKGMpe3ZhciBkO3RoaXMubWFwLmJhc2VMYXllciYmdGhpcy5tYXAuYmFzZUxheWVyLndyYXBEYXRlTGluZSYmKGQ9dGhpcy5tYXAuZ2V0TWF4RXh0ZW50KCkpO2MuaW50ZXJzZWN0c0JvdW5kcyh0aGlzLmV4dGVudCx7d29ybGRCb3VuZHM6ZH0pP3RoaXMuY2FsY3VsYXRlRmVhdHVyZUR4KGMsCmQpOmI9e2Rpc3BsYXk6Im5vbmUifTtjPXRoaXMuZHJhd0dlb21ldHJ5KGEuZ2VvbWV0cnksYixhLmlkKTtpZigibm9uZSIhPWIuZGlzcGxheSYmYi5sYWJlbCYmITEhPT1jKXtkPWEuZ2VvbWV0cnkuZ2V0Q2VudHJvaWQoKTtpZihiLmxhYmVsWE9mZnNldHx8Yi5sYWJlbFlPZmZzZXQpe3ZhciBlPWlzTmFOKGIubGFiZWxYT2Zmc2V0KT8wOmIubGFiZWxYT2Zmc2V0LGY9aXNOYU4oYi5sYWJlbFlPZmZzZXQpPzA6Yi5sYWJlbFlPZmZzZXQsZz10aGlzLmdldFJlc29sdXRpb24oKTtkLm1vdmUoZSpnLGYqZyl9dGhpcy5kcmF3VGV4dChhLmlkLGIsZCl9ZWxzZSB0aGlzLnJlbW92ZVRleHQoYS5pZCk7cmV0dXJuIGN9fX0sY2FsY3VsYXRlRmVhdHVyZUR4OmZ1bmN0aW9uKGEsYil7dGhpcy5mZWF0dXJlRHg9MDtpZihiKXt2YXIgYz1iLmdldFdpZHRoKCk7dGhpcy5mZWF0dXJlRHg9TWF0aC5yb3VuZCgoKGEubGVmdCthLnJpZ2h0KS8yLSh0aGlzLmV4dGVudC5sZWZ0K3RoaXMuZXh0ZW50LnJpZ2h0KS8KMikvYykqY319LGRyYXdHZW9tZXRyeTpmdW5jdGlvbihhLGIsYyl7fSxkcmF3VGV4dDpmdW5jdGlvbihhLGIsYyl7fSxyZW1vdmVUZXh0OmZ1bmN0aW9uKGEpe30sY2xlYXI6ZnVuY3Rpb24oKXt9LGdldEZlYXR1cmVJZEZyb21FdmVudDpmdW5jdGlvbihhKXt9LGVyYXNlRmVhdHVyZXM6ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5VdGlsLmlzQXJyYXkoYSl8fChhPVthXSk7Zm9yKHZhciBiPTAsYz1hLmxlbmd0aDtiPGM7KytiKXt2YXIgZD1hW2JdO3RoaXMuZXJhc2VHZW9tZXRyeShkLmdlb21ldHJ5LGQuaWQpO3RoaXMucmVtb3ZlVGV4dChkLmlkKX19LGVyYXNlR2VvbWV0cnk6ZnVuY3Rpb24oYSxiKXt9LG1vdmVSb290OmZ1bmN0aW9uKGEpe30sZ2V0UmVuZGVyTGF5ZXJJZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRhaW5lci5pZH0sYXBwbHlEZWZhdWx0U3ltYm9saXplcjpmdW5jdGlvbihhKXt2YXIgYj1PcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHt9LE9wZW5MYXllcnMuUmVuZGVyZXIuZGVmYXVsdFN5bWJvbGl6ZXIpOwohMT09PWEuc3Ryb2tlJiYoZGVsZXRlIGIuc3Ryb2tlV2lkdGgsZGVsZXRlIGIuc3Ryb2tlQ29sb3IpOyExPT09YS5maWxsJiZkZWxldGUgYi5maWxsQ29sb3I7T3BlbkxheWVycy5VdGlsLmV4dGVuZChiLGEpO3JldHVybiBifSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLlJlbmRlcmVyIn0pO09wZW5MYXllcnMuUmVuZGVyZXIuZGVmYXVsdFN5bWJvbGl6ZXI9e2ZpbGxDb2xvcjoiIzAwMDAwMCIsc3Ryb2tlQ29sb3I6IiMwMDAwMDAiLHN0cm9rZVdpZHRoOjIsZmlsbE9wYWNpdHk6MSxzdHJva2VPcGFjaXR5OjEscG9pbnRSYWRpdXM6MCxsYWJlbEFsaWduOiJjbSJ9OwpPcGVuTGF5ZXJzLlJlbmRlcmVyLnN5bWJvbD17c3RhcjpbMzUwLDc1LDM3OSwxNjEsNDY5LDE2MSwzOTcsMjE1LDQyMywzMDEsMzUwLDI1MCwyNzcsMzAxLDMwMywyMTUsMjMxLDE2MSwzMjEsMTYxLDM1MCw3NV0sY3Jvc3M6WzQsMCw2LDAsNiw0LDEwLDQsMTAsNiw2LDYsNiwxMCw0LDEwLDQsNiwwLDYsMCw0LDQsNCw0LDBdLHg6WzAsMCwyNSwwLDUwLDM1LDc1LDAsMTAwLDAsNjUsNTAsMTAwLDEwMCw3NSwxMDAsNTAsNjUsMjUsMTAwLDAsMTAwLDM1LDUwLDAsMF0sc3F1YXJlOlswLDAsMCwxLDEsMSwxLDAsMCwwXSx0cmlhbmdsZTpbMCwxMCwxMCwxMCw1LDAsMCwxMF19O09wZW5MYXllcnMuUmVuZGVyZXIuQ2FudmFzPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5SZW5kZXJlcix7aGl0RGV0ZWN0aW9uOiEwLGhpdE92ZXJmbG93OjAsY2FudmFzOm51bGwsZmVhdHVyZXM6bnVsbCxwZW5kaW5nUmVkcmF3OiExLGNhY2hlZFN5bWJvbEJvdW5kczp7fSxpbml0aWFsaXplOmZ1bmN0aW9uKGEsYil7T3BlbkxheWVycy5SZW5kZXJlci5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5yb290PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImNhbnZhcyIpO3RoaXMuY29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMucm9vdCk7dGhpcy5jYW52YXM9dGhpcy5yb290LmdldENvbnRleHQoIjJkIik7dGhpcy5mZWF0dXJlcz17fTt0aGlzLmhpdERldGVjdGlvbiYmKHRoaXMuaGl0Q2FudmFzPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImNhbnZhcyIpLHRoaXMuaGl0Q29udGV4dD10aGlzLmhpdENhbnZhcy5nZXRDb250ZXh0KCIyZCIpKX0sCnNldEV4dGVudDpmdW5jdGlvbigpe09wZW5MYXllcnMuUmVuZGVyZXIucHJvdG90eXBlLnNldEV4dGVudC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7cmV0dXJuITF9LGVyYXNlR2VvbWV0cnk6ZnVuY3Rpb24oYSxiKXt0aGlzLmVyYXNlRmVhdHVyZXModGhpcy5mZWF0dXJlc1tiXVswXSl9LHN1cHBvcnRlZDpmdW5jdGlvbigpe3JldHVybiBPcGVuTGF5ZXJzLkNBTlZBU19TVVBQT1JURUR9LHNldFNpemU6ZnVuY3Rpb24oYSl7dGhpcy5zaXplPWEuY2xvbmUoKTt2YXIgYj10aGlzLnJvb3Q7Yi5zdHlsZS53aWR0aD1hLncrInB4IjtiLnN0eWxlLmhlaWdodD1hLmgrInB4IjtiLndpZHRoPWEudztiLmhlaWdodD1hLmg7dGhpcy5yZXNvbHV0aW9uPW51bGw7dGhpcy5oaXREZXRlY3Rpb24mJihiPXRoaXMuaGl0Q2FudmFzLGIuc3R5bGUud2lkdGg9YS53KyJweCIsYi5zdHlsZS5oZWlnaHQ9YS5oKyJweCIsYi53aWR0aD1hLncsYi5oZWlnaHQ9YS5oKX0sZHJhd0ZlYXR1cmU6ZnVuY3Rpb24oYSwKYil7dmFyIGM7aWYoYS5nZW9tZXRyeSl7Yj10aGlzLmFwcGx5RGVmYXVsdFN5bWJvbGl6ZXIoYnx8YS5zdHlsZSk7Yz1hLmdlb21ldHJ5LmdldEJvdW5kcygpO3ZhciBkO3RoaXMubWFwLmJhc2VMYXllciYmdGhpcy5tYXAuYmFzZUxheWVyLndyYXBEYXRlTGluZSYmKGQ9dGhpcy5tYXAuZ2V0TWF4RXh0ZW50KCkpO2Q9YyYmYy5pbnRlcnNlY3RzQm91bmRzKHRoaXMuZXh0ZW50LHt3b3JsZEJvdW5kczpkfSk7KGM9Im5vbmUiIT09Yi5kaXNwbGF5JiYhIWMmJmQpP3RoaXMuZmVhdHVyZXNbYS5pZF09W2EsYl06ZGVsZXRlIHRoaXMuZmVhdHVyZXNbYS5pZF07dGhpcy5wZW5kaW5nUmVkcmF3PSEwfXRoaXMucGVuZGluZ1JlZHJhdyYmIXRoaXMubG9ja2VkJiYodGhpcy5yZWRyYXcoKSx0aGlzLnBlbmRpbmdSZWRyYXc9ITEpO3JldHVybiBjfSxkcmF3R2VvbWV0cnk6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWEuQ0xBU1NfTkFNRTtpZigiT3BlbkxheWVycy5HZW9tZXRyeS5Db2xsZWN0aW9uIj09CmR8fCJPcGVuTGF5ZXJzLkdlb21ldHJ5Lk11bHRpUG9pbnQiPT1kfHwiT3BlbkxheWVycy5HZW9tZXRyeS5NdWx0aUxpbmVTdHJpbmciPT1kfHwiT3BlbkxheWVycy5HZW9tZXRyeS5NdWx0aVBvbHlnb24iPT1kKWZvcihkPTA7ZDxhLmNvbXBvbmVudHMubGVuZ3RoO2QrKyl0aGlzLmRyYXdHZW9tZXRyeShhLmNvbXBvbmVudHNbZF0sYixjKTtlbHNlIHN3aXRjaChhLkNMQVNTX05BTUUpe2Nhc2UgIk9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQiOnRoaXMuZHJhd1BvaW50KGEsYixjKTticmVhaztjYXNlICJPcGVuTGF5ZXJzLkdlb21ldHJ5LkxpbmVTdHJpbmciOnRoaXMuZHJhd0xpbmVTdHJpbmcoYSxiLGMpO2JyZWFrO2Nhc2UgIk9wZW5MYXllcnMuR2VvbWV0cnkuTGluZWFyUmluZyI6dGhpcy5kcmF3TGluZWFyUmluZyhhLGIsYyk7YnJlYWs7Y2FzZSAiT3BlbkxheWVycy5HZW9tZXRyeS5Qb2x5Z29uIjp0aGlzLmRyYXdQb2x5Z29uKGEsYixjKX19LGRyYXdFeHRlcm5hbEdyYXBoaWM6ZnVuY3Rpb24oYSwKYixjKXt2YXIgZD1uZXcgSW1hZ2UsZT1iLnRpdGxlfHxiLmdyYXBoaWNUaXRsZTtlJiYoZC50aXRsZT1lKTt2YXIgZj1iLmdyYXBoaWNXaWR0aHx8Yi5ncmFwaGljSGVpZ2h0LGc9Yi5ncmFwaGljSGVpZ2h0fHxiLmdyYXBoaWNXaWR0aCxmPWY/ZjoyKmIucG9pbnRSYWRpdXMsZz1nP2c6MipiLnBvaW50UmFkaXVzLGg9dm9pZCAwIT1iLmdyYXBoaWNYT2Zmc2V0P2IuZ3JhcGhpY1hPZmZzZXQ6LSgwLjUqZiksaz12b2lkIDAhPWIuZ3JhcGhpY1lPZmZzZXQ/Yi5ncmFwaGljWU9mZnNldDotKDAuNSpnKSxsPWIuZ3JhcGhpY09wYWNpdHl8fGIuZmlsbE9wYWNpdHk7ZC5vbmxvYWQ9T3BlbkxheWVycy5GdW5jdGlvbi5iaW5kKGZ1bmN0aW9uKCl7aWYodGhpcy5mZWF0dXJlc1tjXSl7dmFyIGI9dGhpcy5nZXRMb2NhbFhZKGEpLGU9YlswXSxiPWJbMV07aWYoIWlzTmFOKGUpJiYhaXNOYU4oYikpe3ZhciBlPWUraHwwLGI9YitrfDAscD10aGlzLmNhbnZhcztwLmdsb2JhbEFscGhhPWw7dmFyIHE9Ck9wZW5MYXllcnMuUmVuZGVyZXIuQ2FudmFzLmRyYXdJbWFnZVNjYWxlRmFjdG9yfHwoT3BlbkxheWVycy5SZW5kZXJlci5DYW52YXMuZHJhd0ltYWdlU2NhbGVGYWN0b3I9L2FuZHJvaWQgMi4xLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKSk/MzIwL3dpbmRvdy5zY3JlZW4ud2lkdGg6MSk7cC5kcmF3SW1hZ2UoZCxlKnEsYipxLGYqcSxnKnEpO3RoaXMuaGl0RGV0ZWN0aW9uJiYodGhpcy5zZXRIaXRDb250ZXh0U3R5bGUoImZpbGwiLGMpLHRoaXMuaGl0Q29udGV4dC5maWxsUmVjdChlLGIsZixnKSl9fX0sdGhpcyk7ZC5zcmM9Yi5leHRlcm5hbEdyYXBoaWN9LGRyYXdOYW1lZFN5bWJvbDpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZSxmLGc7Zj1NYXRoLlBJLzE4MDt2YXIgaD1PcGVuTGF5ZXJzLlJlbmRlcmVyLnN5bWJvbFtiLmdyYXBoaWNOYW1lXTtpZighaCl0aHJvdyBFcnJvcihiLmdyYXBoaWNOYW1lKyIgaXMgbm90IGEgdmFsaWQgc3ltYm9sIG5hbWUiKTsKaWYoISghaC5sZW5ndGh8fDI+aC5sZW5ndGh8fChhPXRoaXMuZ2V0TG9jYWxYWShhKSxlPWFbMF0sZz1hWzFdLGlzTmFOKGUpfHxpc05hTihnKSkpKXt0aGlzLmNhbnZhcy5saW5lQ2FwPSJyb3VuZCI7dGhpcy5jYW52YXMubGluZUpvaW49InJvdW5kIjt0aGlzLmhpdERldGVjdGlvbiYmKHRoaXMuaGl0Q29udGV4dC5saW5lQ2FwPSJyb3VuZCIsdGhpcy5oaXRDb250ZXh0LmxpbmVKb2luPSJyb3VuZCIpO2lmKGIuZ3JhcGhpY05hbWUgaW4gdGhpcy5jYWNoZWRTeW1ib2xCb3VuZHMpZD10aGlzLmNhY2hlZFN5bWJvbEJvdW5kc1tiLmdyYXBoaWNOYW1lXTtlbHNle2Q9bmV3IE9wZW5MYXllcnMuQm91bmRzO2ZvcihhPTA7YTxoLmxlbmd0aDthKz0yKWQuZXh0ZW5kKG5ldyBPcGVuTGF5ZXJzLkxvbkxhdChoW2FdLGhbYSsxXSkpO3RoaXMuY2FjaGVkU3ltYm9sQm91bmRzW2IuZ3JhcGhpY05hbWVdPWR9dGhpcy5jYW52YXMuc2F2ZSgpO3RoaXMuaGl0RGV0ZWN0aW9uJiZ0aGlzLmhpdENvbnRleHQuc2F2ZSgpOwp0aGlzLmNhbnZhcy50cmFuc2xhdGUoZSxnKTt0aGlzLmhpdERldGVjdGlvbiYmdGhpcy5oaXRDb250ZXh0LnRyYW5zbGF0ZShlLGcpO2E9ZipiLnJvdGF0aW9uO2lzTmFOKGEpfHwodGhpcy5jYW52YXMucm90YXRlKGEpLHRoaXMuaGl0RGV0ZWN0aW9uJiZ0aGlzLmhpdENvbnRleHQucm90YXRlKGEpKTtmPTIqYi5wb2ludFJhZGl1cy9NYXRoLm1heChkLmdldFdpZHRoKCksZC5nZXRIZWlnaHQoKSk7dGhpcy5jYW52YXMuc2NhbGUoZixmKTt0aGlzLmhpdERldGVjdGlvbiYmdGhpcy5oaXRDb250ZXh0LnNjYWxlKGYsZik7YT1kLmdldENlbnRlckxvbkxhdCgpLmxvbjtkPWQuZ2V0Q2VudGVyTG9uTGF0KCkubGF0O3RoaXMuY2FudmFzLnRyYW5zbGF0ZSgtYSwtZCk7dGhpcy5oaXREZXRlY3Rpb24mJnRoaXMuaGl0Q29udGV4dC50cmFuc2xhdGUoLWEsLWQpO2c9Yi5zdHJva2VXaWR0aDtiLnN0cm9rZVdpZHRoPWcvZjtpZighMSE9PWIuZmlsbCl7dGhpcy5zZXRDYW52YXNTdHlsZSgiZmlsbCIsCmIpO3RoaXMuY2FudmFzLmJlZ2luUGF0aCgpO2ZvcihhPTA7YTxoLmxlbmd0aDthKz0yKWQ9aFthXSxlPWhbYSsxXSwwPT1hJiZ0aGlzLmNhbnZhcy5tb3ZlVG8oZCxlKSx0aGlzLmNhbnZhcy5saW5lVG8oZCxlKTt0aGlzLmNhbnZhcy5jbG9zZVBhdGgoKTt0aGlzLmNhbnZhcy5maWxsKCk7aWYodGhpcy5oaXREZXRlY3Rpb24pe3RoaXMuc2V0SGl0Q29udGV4dFN0eWxlKCJmaWxsIixjLGIpO3RoaXMuaGl0Q29udGV4dC5iZWdpblBhdGgoKTtmb3IoYT0wO2E8aC5sZW5ndGg7YSs9MilkPWhbYV0sZT1oW2ErMV0sMD09YSYmdGhpcy5jYW52YXMubW92ZVRvKGQsZSksdGhpcy5oaXRDb250ZXh0LmxpbmVUbyhkLGUpO3RoaXMuaGl0Q29udGV4dC5jbG9zZVBhdGgoKTt0aGlzLmhpdENvbnRleHQuZmlsbCgpfX1pZighMSE9PWIuc3Ryb2tlKXt0aGlzLnNldENhbnZhc1N0eWxlKCJzdHJva2UiLGIpO3RoaXMuY2FudmFzLmJlZ2luUGF0aCgpO2ZvcihhPTA7YTxoLmxlbmd0aDthKz0yKWQ9aFthXSwKZT1oW2ErMV0sMD09YSYmdGhpcy5jYW52YXMubW92ZVRvKGQsZSksdGhpcy5jYW52YXMubGluZVRvKGQsZSk7dGhpcy5jYW52YXMuY2xvc2VQYXRoKCk7dGhpcy5jYW52YXMuc3Ryb2tlKCk7aWYodGhpcy5oaXREZXRlY3Rpb24pe3RoaXMuc2V0SGl0Q29udGV4dFN0eWxlKCJzdHJva2UiLGMsYixmKTt0aGlzLmhpdENvbnRleHQuYmVnaW5QYXRoKCk7Zm9yKGE9MDthPGgubGVuZ3RoO2ErPTIpZD1oW2FdLGU9aFthKzFdLDA9PWEmJnRoaXMuaGl0Q29udGV4dC5tb3ZlVG8oZCxlKSx0aGlzLmhpdENvbnRleHQubGluZVRvKGQsZSk7dGhpcy5oaXRDb250ZXh0LmNsb3NlUGF0aCgpO3RoaXMuaGl0Q29udGV4dC5zdHJva2UoKX19Yi5zdHJva2VXaWR0aD1nO3RoaXMuY2FudmFzLnJlc3RvcmUoKTt0aGlzLmhpdERldGVjdGlvbiYmdGhpcy5oaXRDb250ZXh0LnJlc3RvcmUoKTt0aGlzLnNldENhbnZhc1N0eWxlKCJyZXNldCIpfX0sc2V0Q2FudmFzU3R5bGU6ZnVuY3Rpb24oYSxiKXsiZmlsbCI9PT0KYT8odGhpcy5jYW52YXMuZ2xvYmFsQWxwaGE9Yi5maWxsT3BhY2l0eSx0aGlzLmNhbnZhcy5maWxsU3R5bGU9Yi5maWxsQ29sb3IpOiJzdHJva2UiPT09YT8odGhpcy5jYW52YXMuZ2xvYmFsQWxwaGE9Yi5zdHJva2VPcGFjaXR5LHRoaXMuY2FudmFzLnN0cm9rZVN0eWxlPWIuc3Ryb2tlQ29sb3IsdGhpcy5jYW52YXMubGluZVdpZHRoPWIuc3Ryb2tlV2lkdGgpOih0aGlzLmNhbnZhcy5nbG9iYWxBbHBoYT0wLHRoaXMuY2FudmFzLmxpbmVXaWR0aD0xKX0sZmVhdHVyZUlkVG9IZXg6ZnVuY3Rpb24oYSl7YT1OdW1iZXIoYS5zcGxpdCgiXyIpLnBvcCgpKSsxOzE2Nzc3MjE2PD1hJiYodGhpcy5oaXRPdmVyZmxvdz1hLTE2Nzc3MjE1LGE9YSUxNjc3NzIxNisxKTthPSIwMDAwMDAiK2EudG9TdHJpbmcoMTYpO3ZhciBiPWEubGVuZ3RoO3JldHVybiBhPSIjIithLnN1YnN0cmluZyhiLTYsYil9LHNldEhpdENvbnRleHRTdHlsZTpmdW5jdGlvbihhLGIsYyxkKXtiPXRoaXMuZmVhdHVyZUlkVG9IZXgoYik7CiJmaWxsIj09YT8odGhpcy5oaXRDb250ZXh0Lmdsb2JhbEFscGhhPTEsdGhpcy5oaXRDb250ZXh0LmZpbGxTdHlsZT1iKToic3Ryb2tlIj09YT8odGhpcy5oaXRDb250ZXh0Lmdsb2JhbEFscGhhPTEsdGhpcy5oaXRDb250ZXh0LnN0cm9rZVN0eWxlPWIsInVuZGVmaW5lZCI9PT10eXBlb2YgZD90aGlzLmhpdENvbnRleHQubGluZVdpZHRoPWMuc3Ryb2tlV2lkdGgrMjppc05hTihkKXx8KHRoaXMuaGl0Q29udGV4dC5saW5lV2lkdGg9Yy5zdHJva2VXaWR0aCsyL2QpKToodGhpcy5oaXRDb250ZXh0Lmdsb2JhbEFscGhhPTAsdGhpcy5oaXRDb250ZXh0LmxpbmVXaWR0aD0xKX0sZHJhd1BvaW50OmZ1bmN0aW9uKGEsYixjKXtpZighMSE9PWIuZ3JhcGhpYylpZihiLmV4dGVybmFsR3JhcGhpYyl0aGlzLmRyYXdFeHRlcm5hbEdyYXBoaWMoYSxiLGMpO2Vsc2UgaWYoYi5ncmFwaGljTmFtZSYmImNpcmNsZSIhPWIuZ3JhcGhpY05hbWUpdGhpcy5kcmF3TmFtZWRTeW1ib2woYSxiLGMpO2Vsc2V7dmFyIGQ9CnRoaXMuZ2V0TG9jYWxYWShhKTthPWRbMF07ZD1kWzFdO2lmKCFpc05hTihhKSYmIWlzTmFOKGQpKXt2YXIgZT0yKk1hdGguUEksZj1iLnBvaW50UmFkaXVzOyExIT09Yi5maWxsJiYodGhpcy5zZXRDYW52YXNTdHlsZSgiZmlsbCIsYiksdGhpcy5jYW52YXMuYmVnaW5QYXRoKCksdGhpcy5jYW52YXMuYXJjKGEsZCxmLDAsZSwhMCksdGhpcy5jYW52YXMuZmlsbCgpLHRoaXMuaGl0RGV0ZWN0aW9uJiYodGhpcy5zZXRIaXRDb250ZXh0U3R5bGUoImZpbGwiLGMsYiksdGhpcy5oaXRDb250ZXh0LmJlZ2luUGF0aCgpLHRoaXMuaGl0Q29udGV4dC5hcmMoYSxkLGYsMCxlLCEwKSx0aGlzLmhpdENvbnRleHQuZmlsbCgpKSk7ITEhPT1iLnN0cm9rZSYmKHRoaXMuc2V0Q2FudmFzU3R5bGUoInN0cm9rZSIsYiksdGhpcy5jYW52YXMuYmVnaW5QYXRoKCksdGhpcy5jYW52YXMuYXJjKGEsZCxmLDAsZSwhMCksdGhpcy5jYW52YXMuc3Ryb2tlKCksdGhpcy5oaXREZXRlY3Rpb24mJih0aGlzLnNldEhpdENvbnRleHRTdHlsZSgic3Ryb2tlIiwKYyxiKSx0aGlzLmhpdENvbnRleHQuYmVnaW5QYXRoKCksdGhpcy5oaXRDb250ZXh0LmFyYyhhLGQsZiwwLGUsITApLHRoaXMuaGl0Q29udGV4dC5zdHJva2UoKSksdGhpcy5zZXRDYW52YXNTdHlsZSgicmVzZXQiKSl9fX0sZHJhd0xpbmVTdHJpbmc6ZnVuY3Rpb24oYSxiLGMpe2I9T3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoe2ZpbGw6ITF9LGIpO3RoaXMuZHJhd0xpbmVhclJpbmcoYSxiLGMpfSxkcmF3TGluZWFyUmluZzpmdW5jdGlvbihhLGIsYyl7ITEhPT1iLmZpbGwmJih0aGlzLnNldENhbnZhc1N0eWxlKCJmaWxsIixiKSx0aGlzLnJlbmRlclBhdGgodGhpcy5jYW52YXMsYSxiLGMsImZpbGwiKSx0aGlzLmhpdERldGVjdGlvbiYmKHRoaXMuc2V0SGl0Q29udGV4dFN0eWxlKCJmaWxsIixjLGIpLHRoaXMucmVuZGVyUGF0aCh0aGlzLmhpdENvbnRleHQsYSxiLGMsImZpbGwiKSkpOyExIT09Yi5zdHJva2UmJih0aGlzLnNldENhbnZhc1N0eWxlKCJzdHJva2UiLGIpLHRoaXMucmVuZGVyUGF0aCh0aGlzLmNhbnZhcywKYSxiLGMsInN0cm9rZSIpLHRoaXMuaGl0RGV0ZWN0aW9uJiYodGhpcy5zZXRIaXRDb250ZXh0U3R5bGUoInN0cm9rZSIsYyxiKSx0aGlzLnJlbmRlclBhdGgodGhpcy5oaXRDb250ZXh0LGEsYixjLCJzdHJva2UiKSkpO3RoaXMuc2V0Q2FudmFzU3R5bGUoInJlc2V0Iil9LHJlbmRlclBhdGg6ZnVuY3Rpb24oYSxiLGMsZCxlKXtiPWIuY29tcG9uZW50cztjPWIubGVuZ3RoO2EuYmVnaW5QYXRoKCk7ZD10aGlzLmdldExvY2FsWFkoYlswXSk7dmFyIGY9ZFsxXTtpZighaXNOYU4oZFswXSkmJiFpc05hTihmKSl7YS5tb3ZlVG8oZFswXSxkWzFdKTtmb3IoZD0xO2Q8YzsrK2QpZj10aGlzLmdldExvY2FsWFkoYltkXSksYS5saW5lVG8oZlswXSxmWzFdKTsiZmlsbCI9PT1lP2EuZmlsbCgpOmEuc3Ryb2tlKCl9fSxkcmF3UG9seWdvbjpmdW5jdGlvbihhLGIsYyl7YT1hLmNvbXBvbmVudHM7dmFyIGQ9YS5sZW5ndGg7dGhpcy5kcmF3TGluZWFyUmluZyhhWzBdLGIsYyk7Zm9yKHZhciBlPTE7ZTwKZDsrK2UpdGhpcy5jYW52YXMuZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uPSJkZXN0aW5hdGlvbi1vdXQiLHRoaXMuaGl0RGV0ZWN0aW9uJiYodGhpcy5oaXRDb250ZXh0Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbj0iZGVzdGluYXRpb24tb3V0IiksdGhpcy5kcmF3TGluZWFyUmluZyhhW2VdLE9wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKHtzdHJva2U6ITEsZmlsbE9wYWNpdHk6MX0sYiksYyksdGhpcy5jYW52YXMuZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uPSJzb3VyY2Utb3ZlciIsdGhpcy5oaXREZXRlY3Rpb24mJih0aGlzLmhpdENvbnRleHQuZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uPSJzb3VyY2Utb3ZlciIpLHRoaXMuZHJhd0xpbmVhclJpbmcoYVtlXSxPcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyh7ZmlsbDohMX0sYiksYyl9LGRyYXdUZXh0OmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5nZXRMb2NhbFhZKGEpO3RoaXMuc2V0Q2FudmFzU3R5bGUoInJlc2V0Iik7CnRoaXMuY2FudmFzLmZpbGxTdHlsZT1iLmZvbnRDb2xvcjt0aGlzLmNhbnZhcy5nbG9iYWxBbHBoYT1iLmZvbnRPcGFjaXR5fHwxO3ZhciBkPVtiLmZvbnRTdHlsZT9iLmZvbnRTdHlsZToibm9ybWFsIiwibm9ybWFsIixiLmZvbnRXZWlnaHQ/Yi5mb250V2VpZ2h0OiJub3JtYWwiLGIuZm9udFNpemU/Yi5mb250U2l6ZToiMWVtIixiLmZvbnRGYW1pbHk/Yi5mb250RmFtaWx5OiJzYW5zLXNlcmlmIl0uam9pbigiICIpLGU9Yi5sYWJlbC5zcGxpdCgiXG4iKSxmPWUubGVuZ3RoO2lmKHRoaXMuY2FudmFzLmZpbGxUZXh0KXt0aGlzLmNhbnZhcy5mb250PWQ7dGhpcy5jYW52YXMudGV4dEFsaWduPU9wZW5MYXllcnMuUmVuZGVyZXIuQ2FudmFzLkxBQkVMX0FMSUdOW2IubGFiZWxBbGlnblswXV18fCJjZW50ZXIiO3RoaXMuY2FudmFzLnRleHRCYXNlbGluZT1PcGVuTGF5ZXJzLlJlbmRlcmVyLkNhbnZhcy5MQUJFTF9BTElHTltiLmxhYmVsQWxpZ25bMV1dfHwibWlkZGxlIjt2YXIgZz1PcGVuTGF5ZXJzLlJlbmRlcmVyLkNhbnZhcy5MQUJFTF9GQUNUT1JbYi5sYWJlbEFsaWduWzFdXTsKbnVsbD09ZyYmKGc9LTAuNSk7ZD10aGlzLmNhbnZhcy5tZWFzdXJlVGV4dCgiTWciKS5oZWlnaHR8fHRoaXMuY2FudmFzLm1lYXN1cmVUZXh0KCJ4eCIpLndpZHRoO2NbMV0rPWQqZyooZi0xKTtmb3IoZz0wO2c8ZjtnKyspYi5sYWJlbE91dGxpbmVXaWR0aCYmKHRoaXMuY2FudmFzLnNhdmUoKSx0aGlzLmNhbnZhcy5nbG9iYWxBbHBoYT1iLmxhYmVsT3V0bGluZU9wYWNpdHl8fGIuZm9udE9wYWNpdHl8fDEsdGhpcy5jYW52YXMuc3Ryb2tlU3R5bGU9Yi5sYWJlbE91dGxpbmVDb2xvcix0aGlzLmNhbnZhcy5saW5lV2lkdGg9Yi5sYWJlbE91dGxpbmVXaWR0aCx0aGlzLmNhbnZhcy5zdHJva2VUZXh0KGVbZ10sY1swXSxjWzFdK2QqZysxKSx0aGlzLmNhbnZhcy5yZXN0b3JlKCkpLHRoaXMuY2FudmFzLmZpbGxUZXh0KGVbZ10sY1swXSxjWzFdK2QqZyl9ZWxzZSBpZih0aGlzLmNhbnZhcy5tb3pEcmF3VGV4dCl7dGhpcy5jYW52YXMubW96VGV4dFN0eWxlPWQ7dmFyIGg9T3BlbkxheWVycy5SZW5kZXJlci5DYW52YXMuTEFCRUxfRkFDVE9SW2IubGFiZWxBbGlnblswXV07Cm51bGw9PWgmJihoPS0wLjUpO2c9T3BlbkxheWVycy5SZW5kZXJlci5DYW52YXMuTEFCRUxfRkFDVE9SW2IubGFiZWxBbGlnblsxXV07bnVsbD09ZyYmKGc9LTAuNSk7ZD10aGlzLmNhbnZhcy5tb3pNZWFzdXJlVGV4dCgieHgiKTtjWzFdKz1kKigxK2cqZik7Zm9yKGc9MDtnPGY7ZysrKXt2YXIgaz1jWzBdK2gqdGhpcy5jYW52YXMubW96TWVhc3VyZVRleHQoZVtnXSksbD1jWzFdK2cqZDt0aGlzLmNhbnZhcy50cmFuc2xhdGUoayxsKTt0aGlzLmNhbnZhcy5tb3pEcmF3VGV4dChlW2ddKTt0aGlzLmNhbnZhcy50cmFuc2xhdGUoLWssLWwpfX10aGlzLnNldENhbnZhc1N0eWxlKCJyZXNldCIpfSxnZXRMb2NhbFhZOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZ2V0UmVzb2x1dGlvbigpLGM9dGhpcy5leHRlbnQ7cmV0dXJuWyhhLngtdGhpcy5mZWF0dXJlRHgpL2IrLWMubGVmdC9iLGMudG9wL2ItYS55L2JdfSxjbGVhcjpmdW5jdGlvbigpe3ZhciBhPXRoaXMucm9vdC5oZWlnaHQsYj10aGlzLnJvb3Qud2lkdGg7CnRoaXMuY2FudmFzLmNsZWFyUmVjdCgwLDAsYixhKTt0aGlzLmZlYXR1cmVzPXt9O3RoaXMuaGl0RGV0ZWN0aW9uJiZ0aGlzLmhpdENvbnRleHQuY2xlYXJSZWN0KDAsMCxiLGEpfSxnZXRGZWF0dXJlSWRGcm9tRXZlbnQ6ZnVuY3Rpb24oYSl7dmFyIGI7aWYodGhpcy5oaXREZXRlY3Rpb24mJiJub25lIiE9PXRoaXMucm9vdC5zdHlsZS5kaXNwbGF5JiYhdGhpcy5tYXAuZHJhZ2dpbmcmJihhPWEueHksYT10aGlzLmhpdENvbnRleHQuZ2V0SW1hZ2VEYXRhKGEueHwwLGEueXwwLDEsMSkuZGF0YSwyNTU9PT1hWzNdJiYoYT1hWzJdKzI1NiooYVsxXSsyNTYqYVswXSkpKSl7YT0iT3BlbkxheWVyc19GZWF0dXJlX1ZlY3Rvcl8iKyhhLTErdGhpcy5oaXRPdmVyZmxvdyk7dHJ5e2I9dGhpcy5mZWF0dXJlc1thXVswXX1jYXRjaChjKXt9fXJldHVybiBifSxlcmFzZUZlYXR1cmVzOmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuVXRpbC5pc0FycmF5KGEpfHwoYT1bYV0pO2Zvcih2YXIgYj0wO2I8YS5sZW5ndGg7KytiKWRlbGV0ZSB0aGlzLmZlYXR1cmVzW2FbYl0uaWRdOwp0aGlzLnJlZHJhdygpfSxyZWRyYXc6ZnVuY3Rpb24oKXtpZighdGhpcy5sb2NrZWQpe3ZhciBhPXRoaXMucm9vdC5oZWlnaHQsYj10aGlzLnJvb3Qud2lkdGg7dGhpcy5jYW52YXMuY2xlYXJSZWN0KDAsMCxiLGEpO3RoaXMuaGl0RGV0ZWN0aW9uJiZ0aGlzLmhpdENvbnRleHQuY2xlYXJSZWN0KDAsMCxiLGEpO3ZhciBhPVtdLGMsZCxlPXRoaXMubWFwLmJhc2VMYXllciYmdGhpcy5tYXAuYmFzZUxheWVyLndyYXBEYXRlTGluZSYmdGhpcy5tYXAuZ2V0TWF4RXh0ZW50KCksZjtmb3IoZiBpbiB0aGlzLmZlYXR1cmVzKXRoaXMuZmVhdHVyZXMuaGFzT3duUHJvcGVydHkoZikmJihiPXRoaXMuZmVhdHVyZXNbZl1bMF0sYz1iLmdlb21ldHJ5LHRoaXMuY2FsY3VsYXRlRmVhdHVyZUR4KGMuZ2V0Qm91bmRzKCksZSksZD10aGlzLmZlYXR1cmVzW2ZdWzFdLHRoaXMuZHJhd0dlb21ldHJ5KGMsZCxiLmlkKSxkLmxhYmVsJiZhLnB1c2goW2IsZF0pKTtiPTA7Zm9yKGM9YS5sZW5ndGg7YjxjOysrYilmPQphW2JdLHRoaXMuZHJhd1RleHQoZlswXS5nZW9tZXRyeS5nZXRDZW50cm9pZCgpLGZbMV0pfX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5SZW5kZXJlci5DYW52YXMifSk7T3BlbkxheWVycy5SZW5kZXJlci5DYW52YXMuTEFCRUxfQUxJR049e2w6ImxlZnQiLHI6InJpZ2h0Iix0OiJ0b3AiLGI6ImJvdHRvbSJ9O09wZW5MYXllcnMuUmVuZGVyZXIuQ2FudmFzLkxBQkVMX0ZBQ1RPUj17bDowLHI6LTEsdDowLGI6LTF9O09wZW5MYXllcnMuUmVuZGVyZXIuQ2FudmFzLmRyYXdJbWFnZVNjYWxlRmFjdG9yPW51bGw7T3BlbkxheWVycy5Gb3JtYXQuT1NNPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Gb3JtYXQuWE1MLHtjaGVja1RhZ3M6ITEsaW50ZXJlc3RpbmdUYWdzRXhjbHVkZTpudWxsLGFyZWFUYWdzOm51bGwsaW5pdGlhbGl6ZTpmdW5jdGlvbihhKXt2YXIgYj17aW50ZXJlc3RpbmdUYWdzRXhjbHVkZToic291cmNlIHNvdXJjZV9yZWYgc291cmNlOnJlZiBoaXN0b3J5IGF0dHJpYnV0aW9uIGNyZWF0ZWRfYnkiLnNwbGl0KCIgIiksYXJlYVRhZ3M6ImFyZWEgYnVpbGRpbmcgbGVpc3VyZSB0b3VyaXNtIHJ1aW5zIGhpc3RvcmljIGxhbmR1c2UgbWlsaXRhcnkgbmF0dXJhbCBzcG9ydCIuc3BsaXQoIiAiKX0sYj1PcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKGIsYSksYz17fTtmb3IoYT0wO2E8Yi5pbnRlcmVzdGluZ1RhZ3NFeGNsdWRlLmxlbmd0aDthKyspY1tiLmludGVyZXN0aW5nVGFnc0V4Y2x1ZGVbYV1dPSEwO2IuaW50ZXJlc3RpbmdUYWdzRXhjbHVkZT1jO2M9e307Zm9yKGE9MDthPGIuYXJlYVRhZ3MubGVuZ3RoO2ErKyljW2IuYXJlYVRhZ3NbYV1dPQohMDtiLmFyZWFUYWdzPWM7dGhpcy5leHRlcm5hbFByb2plY3Rpb249bmV3IE9wZW5MYXllcnMuUHJvamVjdGlvbigiRVBTRzo0MzI2Iik7T3BlbkxheWVycy5Gb3JtYXQuWE1MLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsW2JdKX0scmVhZDpmdW5jdGlvbihhKXsic3RyaW5nIj09dHlwZW9mIGEmJihhPU9wZW5MYXllcnMuRm9ybWF0LlhNTC5wcm90b3R5cGUucmVhZC5hcHBseSh0aGlzLFthXSkpO3ZhciBiPXRoaXMuZ2V0Tm9kZXMoYSksYz10aGlzLmdldFdheXMoYSk7YT1BcnJheShjLmxlbmd0aCk7Zm9yKHZhciBkPTA7ZDxjLmxlbmd0aDtkKyspe2Zvcih2YXIgZT1BcnJheShjW2RdLm5vZGVzLmxlbmd0aCksZj10aGlzLmlzV2F5QXJlYShjW2RdKT8xOjAsZz0wO2c8Y1tkXS5ub2Rlcy5sZW5ndGg7ZysrKXt2YXIgaD1iW2NbZF0ubm9kZXNbZ11dLGs9bmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoaC5sb24saC5sYXQpO2sub3NtX2lkPXBhcnNlSW50KGNbZF0ubm9kZXNbZ10pOwplW2ddPWs7aC51c2VkPSEwfWg9bnVsbDtoPWY/bmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9seWdvbihuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5MaW5lYXJSaW5nKGUpKTpuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5MaW5lU3RyaW5nKGUpO3RoaXMuaW50ZXJuYWxQcm9qZWN0aW9uJiZ0aGlzLmV4dGVybmFsUHJvamVjdGlvbiYmaC50cmFuc2Zvcm0odGhpcy5leHRlcm5hbFByb2plY3Rpb24sdGhpcy5pbnRlcm5hbFByb2plY3Rpb24pO2U9bmV3IE9wZW5MYXllcnMuRmVhdHVyZS5WZWN0b3IoaCxjW2RdLnRhZ3MpO2Uub3NtX2lkPXBhcnNlSW50KGNbZF0uaWQpO2UuZmlkPSJ3YXkuIitlLm9zbV9pZDthW2RdPWV9Zm9yKHZhciBsIGluIGIpe2g9YltsXTtpZighaC51c2VkfHx0aGlzLmNoZWNrVGFncyl7Yz1udWxsO2lmKHRoaXMuY2hlY2tUYWdzKXtjPXRoaXMuZ2V0VGFncyhoLm5vZGUsITApO2lmKGgudXNlZCYmIWNbMV0pY29udGludWU7Yz1jWzBdfWVsc2UgYz10aGlzLmdldFRhZ3MoaC5ub2RlKTsKZT1uZXcgT3BlbkxheWVycy5GZWF0dXJlLlZlY3RvcihuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludChoLmxvbixoLmxhdCksYyk7dGhpcy5pbnRlcm5hbFByb2plY3Rpb24mJnRoaXMuZXh0ZXJuYWxQcm9qZWN0aW9uJiZlLmdlb21ldHJ5LnRyYW5zZm9ybSh0aGlzLmV4dGVybmFsUHJvamVjdGlvbix0aGlzLmludGVybmFsUHJvamVjdGlvbik7ZS5vc21faWQ9cGFyc2VJbnQobCk7ZS5maWQ9Im5vZGUuIitlLm9zbV9pZDthLnB1c2goZSl9aC5ub2RlPW51bGx9cmV0dXJuIGF9LGdldE5vZGVzOmZ1bmN0aW9uKGEpe2E9YS5nZXRFbGVtZW50c0J5VGFnTmFtZSgibm9kZSIpO2Zvcih2YXIgYj17fSxjPTA7YzxhLmxlbmd0aDtjKyspe3ZhciBkPWFbY10sZT1kLmdldEF0dHJpYnV0ZSgiaWQiKTtiW2VdPXtsYXQ6ZC5nZXRBdHRyaWJ1dGUoImxhdCIpLGxvbjpkLmdldEF0dHJpYnV0ZSgibG9uIiksbm9kZTpkfX1yZXR1cm4gYn0sZ2V0V2F5czpmdW5jdGlvbihhKXthPWEuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIndheSIpOwpmb3IodmFyIGI9W10sYz0wO2M8YS5sZW5ndGg7YysrKXt2YXIgZD1hW2NdLGU9e2lkOmQuZ2V0QXR0cmlidXRlKCJpZCIpfTtlLnRhZ3M9dGhpcy5nZXRUYWdzKGQpO2Q9ZC5nZXRFbGVtZW50c0J5VGFnTmFtZSgibmQiKTtlLm5vZGVzPUFycmF5KGQubGVuZ3RoKTtmb3IodmFyIGY9MDtmPGQubGVuZ3RoO2YrKyllLm5vZGVzW2ZdPWRbZl0uZ2V0QXR0cmlidXRlKCJyZWYiKTtiLnB1c2goZSl9cmV0dXJuIGJ9LGdldFRhZ3M6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9YS5nZXRFbGVtZW50c0J5VGFnTmFtZSgidGFnIiksZD17fSxlPSExLGY9MDtmPGMubGVuZ3RoO2YrKyl7dmFyIGc9Y1tmXS5nZXRBdHRyaWJ1dGUoImsiKTtkW2ddPWNbZl0uZ2V0QXR0cmlidXRlKCJ2Iik7YiYmKHRoaXMuaW50ZXJlc3RpbmdUYWdzRXhjbHVkZVtnXXx8KGU9ITApKX1yZXR1cm4gYj9bZCxlXTpkfSxpc1dheUFyZWE6ZnVuY3Rpb24oYSl7dmFyIGI9ITEsYz0hMTthLm5vZGVzWzBdPT1hLm5vZGVzW2Eubm9kZXMubGVuZ3RoLQoxXSYmKGI9ITApO2lmKHRoaXMuY2hlY2tUYWdzKWZvcih2YXIgZCBpbiBhLnRhZ3MpaWYodGhpcy5hcmVhVGFnc1tkXSl7Yz0hMDticmVha31yZXR1cm4gYiYmKHRoaXMuY2hlY2tUYWdzP2M6ITApfSx3cml0ZTpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLlV0aWwuaXNBcnJheShhKXx8KGE9W2FdKTt0aGlzLm9zbV9pZD0xO3RoaXMuY3JlYXRlZF9ub2Rlcz17fTt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROUyhudWxsLCJvc20iKTtiLnNldEF0dHJpYnV0ZSgidmVyc2lvbiIsIjAuNSIpO2Iuc2V0QXR0cmlidXRlKCJnZW5lcmF0b3IiLCJPcGVuTGF5ZXJzICIrT3BlbkxheWVycy5WRVJTSU9OX05VTUJFUik7Zm9yKHZhciBjPWEubGVuZ3RoLTE7MDw9YztjLS0pZm9yKHZhciBkPXRoaXMuY3JlYXRlRmVhdHVyZU5vZGVzKGFbY10pLGU9MDtlPGQubGVuZ3RoO2UrKyliLmFwcGVuZENoaWxkKGRbZV0pO3JldHVybiBPcGVuTGF5ZXJzLkZvcm1hdC5YTUwucHJvdG90eXBlLndyaXRlLmFwcGx5KHRoaXMsCltiXSl9LGNyZWF0ZUZlYXR1cmVOb2RlczpmdW5jdGlvbihhKXt2YXIgYj1bXSxjPWEuZ2VvbWV0cnkuQ0xBU1NfTkFNRSxjPWMuc3Vic3RyaW5nKGMubGFzdEluZGV4T2YoIi4iKSsxKSxjPWMudG9Mb3dlckNhc2UoKTsoYz10aGlzLmNyZWF0ZVhNTFtjXSkmJihiPWMuYXBwbHkodGhpcyxbYV0pKTtyZXR1cm4gYn0sY3JlYXRlWE1MOntwb2ludDpmdW5jdGlvbihhKXt2YXIgYj1udWxsLGM9YS5nZW9tZXRyeT9hLmdlb21ldHJ5OmE7dGhpcy5pbnRlcm5hbFByb2plY3Rpb24mJnRoaXMuZXh0ZXJuYWxQcm9qZWN0aW9uJiYoYz1jLmNsb25lKCksYy50cmFuc2Zvcm0odGhpcy5pbnRlcm5hbFByb2plY3Rpb24sdGhpcy5leHRlcm5hbFByb2plY3Rpb24pKTt2YXIgZD0hMTthLm9zbV9pZD8oYj1hLm9zbV9pZCx0aGlzLmNyZWF0ZWRfbm9kZXNbYl0mJihkPSEwKSk6KGI9LXRoaXMub3NtX2lkLHRoaXMub3NtX2lkKyspO3ZhciBlPWQ/dGhpcy5jcmVhdGVkX25vZGVzW2JdOnRoaXMuY3JlYXRlRWxlbWVudE5TKG51bGwsCiJub2RlIik7dGhpcy5jcmVhdGVkX25vZGVzW2JdPWU7ZS5zZXRBdHRyaWJ1dGUoImlkIixiKTtlLnNldEF0dHJpYnV0ZSgibG9uIixjLngpO2Uuc2V0QXR0cmlidXRlKCJsYXQiLGMueSk7YS5hdHRyaWJ1dGVzJiZ0aGlzLnNlcmlhbGl6ZVRhZ3MoYSxlKTt0aGlzLnNldFN0YXRlKGEsZSk7cmV0dXJuIGQ/W106W2VdfSxsaW5lc3RyaW5nOmZ1bmN0aW9uKGEpe3ZhciBiLGM9W10sZD1hLmdlb21ldHJ5O2Eub3NtX2lkP2I9YS5vc21faWQ6KGI9LXRoaXMub3NtX2lkLHRoaXMub3NtX2lkKyspO3ZhciBlPXRoaXMuY3JlYXRlRWxlbWVudE5TKG51bGwsIndheSIpO2Uuc2V0QXR0cmlidXRlKCJpZCIsYik7Zm9yKGI9MDtiPGQuY29tcG9uZW50cy5sZW5ndGg7YisrKXt2YXIgZj10aGlzLmNyZWF0ZVhNTC5wb2ludC5hcHBseSh0aGlzLFtkLmNvbXBvbmVudHNbYl1dKTtpZihmLmxlbmd0aCl7dmFyIGY9ZlswXSxnPWYuZ2V0QXR0cmlidXRlKCJpZCIpO2MucHVzaChmKX1lbHNlIGc9ZC5jb21wb25lbnRzW2JdLm9zbV9pZCwKZj10aGlzLmNyZWF0ZWRfbm9kZXNbZ107dGhpcy5zZXRTdGF0ZShhLGYpO2Y9dGhpcy5jcmVhdGVFbGVtZW50TlMobnVsbCwibmQiKTtmLnNldEF0dHJpYnV0ZSgicmVmIixnKTtlLmFwcGVuZENoaWxkKGYpfXRoaXMuc2VyaWFsaXplVGFncyhhLGUpO2MucHVzaChlKTtyZXR1cm4gY30scG9seWdvbjpmdW5jdGlvbihhKXt2YXIgYj1PcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHthcmVhOiJ5ZXMifSxhLmF0dHJpYnV0ZXMpLGI9bmV3IE9wZW5MYXllcnMuRmVhdHVyZS5WZWN0b3IoYS5nZW9tZXRyeS5jb21wb25lbnRzWzBdLGIpO2Iub3NtX2lkPWEub3NtX2lkO3JldHVybiB0aGlzLmNyZWF0ZVhNTC5saW5lc3RyaW5nLmFwcGx5KHRoaXMsW2JdKX19LHNlcmlhbGl6ZVRhZ3M6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGMgaW4gYS5hdHRyaWJ1dGVzKXt2YXIgZD10aGlzLmNyZWF0ZUVsZW1lbnROUyhudWxsLCJ0YWciKTtkLnNldEF0dHJpYnV0ZSgiayIsYyk7ZC5zZXRBdHRyaWJ1dGUoInYiLAphLmF0dHJpYnV0ZXNbY10pO2IuYXBwZW5kQ2hpbGQoZCl9fSxzZXRTdGF0ZTpmdW5jdGlvbihhLGIpe2lmKGEuc3RhdGUpe3ZhciBjPW51bGw7c3dpdGNoKGEuc3RhdGUpe2Nhc2UgT3BlbkxheWVycy5TdGF0ZS5VUERBVEU6Y2FzZSBPcGVuTGF5ZXJzLlN0YXRlLkRFTEVURTpjPSJkZWxldGUifWMmJmIuc2V0QXR0cmlidXRlKCJhY3Rpb24iLGMpfX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Gb3JtYXQuT1NNIn0pO09wZW5MYXllcnMuSGFuZGxlci5LZXlib2FyZD1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuSGFuZGxlcix7S0VZX0VWRU5UUzpbImtleWRvd24iLCJrZXl1cCJdLGV2ZW50TGlzdGVuZXI6bnVsbCxvYnNlcnZlRWxlbWVudDpudWxsLGluaXRpYWxpemU6ZnVuY3Rpb24oYSxiLGMpe09wZW5MYXllcnMuSGFuZGxlci5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5ldmVudExpc3RlbmVyPU9wZW5MYXllcnMuRnVuY3Rpb24uYmluZEFzRXZlbnRMaXN0ZW5lcih0aGlzLmhhbmRsZUtleUV2ZW50LHRoaXMpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5kZWFjdGl2YXRlKCk7dGhpcy5ldmVudExpc3RlbmVyPW51bGw7T3BlbkxheWVycy5IYW5kbGVyLnByb3RvdHlwZS5kZXN0cm95LmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sYWN0aXZhdGU6ZnVuY3Rpb24oKXtpZihPcGVuTGF5ZXJzLkhhbmRsZXIucHJvdG90eXBlLmFjdGl2YXRlLmFwcGx5KHRoaXMsCmFyZ3VtZW50cykpe3RoaXMub2JzZXJ2ZUVsZW1lbnQ9dGhpcy5vYnNlcnZlRWxlbWVudHx8ZG9jdW1lbnQ7Zm9yKHZhciBhPTAsYj10aGlzLktFWV9FVkVOVFMubGVuZ3RoO2E8YjthKyspT3BlbkxheWVycy5FdmVudC5vYnNlcnZlKHRoaXMub2JzZXJ2ZUVsZW1lbnQsdGhpcy5LRVlfRVZFTlRTW2FdLHRoaXMuZXZlbnRMaXN0ZW5lcik7cmV0dXJuITB9cmV0dXJuITF9LGRlYWN0aXZhdGU6ZnVuY3Rpb24oKXt2YXIgYT0hMTtpZihPcGVuTGF5ZXJzLkhhbmRsZXIucHJvdG90eXBlLmRlYWN0aXZhdGUuYXBwbHkodGhpcyxhcmd1bWVudHMpKXtmb3IodmFyIGE9MCxiPXRoaXMuS0VZX0VWRU5UUy5sZW5ndGg7YTxiO2ErKylPcGVuTGF5ZXJzLkV2ZW50LnN0b3BPYnNlcnZpbmcodGhpcy5vYnNlcnZlRWxlbWVudCx0aGlzLktFWV9FVkVOVFNbYV0sdGhpcy5ldmVudExpc3RlbmVyKTthPSEwfXJldHVybiBhfSxoYW5kbGVLZXlFdmVudDpmdW5jdGlvbihhKXt0aGlzLmNoZWNrTW9kaWZpZXJzKGEpJiYKdGhpcy5jYWxsYmFjayhhLnR5cGUsW2FdKX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5IYW5kbGVyLktleWJvYXJkIn0pO09wZW5MYXllcnMuQ29udHJvbC5Nb2RpZnlGZWF0dXJlPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Db250cm9sLHtkb2N1bWVudERyYWc6ITEsZ2VvbWV0cnlUeXBlczpudWxsLGNsaWNrb3V0OiEwLHRvZ2dsZTohMCxzdGFuZGFsb25lOiExLGxheWVyOm51bGwsZmVhdHVyZTpudWxsLHZlcnRleDpudWxsLHZlcnRpY2VzOm51bGwsdmlydHVhbFZlcnRpY2VzOm51bGwsaGFuZGxlcnM6bnVsbCxkZWxldGVDb2RlczpudWxsLHZpcnR1YWxTdHlsZTpudWxsLHZlcnRleFJlbmRlckludGVudDpudWxsLG1vZGU6bnVsbCxjcmVhdGVWZXJ0aWNlczohMCxtb2RpZmllZDohMSxyYWRpdXNIYW5kbGU6bnVsbCxkcmFnSGFuZGxlOm51bGwsb25Nb2RpZmljYXRpb25TdGFydDpmdW5jdGlvbigpe30sb25Nb2RpZmljYXRpb246ZnVuY3Rpb24oKXt9LG9uTW9kaWZpY2F0aW9uRW5kOmZ1bmN0aW9uKCl7fSxpbml0aWFsaXplOmZ1bmN0aW9uKGEsYil7Yj1ifHx7fTt0aGlzLmxheWVyPWE7dGhpcy52ZXJ0aWNlcz0KW107dGhpcy52aXJ0dWFsVmVydGljZXM9W107dGhpcy52aXJ0dWFsU3R5bGU9T3BlbkxheWVycy5VdGlsLmV4dGVuZCh7fSx0aGlzLmxheWVyLnN0eWxlfHx0aGlzLmxheWVyLnN0eWxlTWFwLmNyZWF0ZVN5bWJvbGl6ZXIobnVsbCxiLnZlcnRleFJlbmRlckludGVudCkpO3RoaXMudmlydHVhbFN0eWxlLmZpbGxPcGFjaXR5PTAuMzt0aGlzLnZpcnR1YWxTdHlsZS5zdHJva2VPcGFjaXR5PTAuMzt0aGlzLmRlbGV0ZUNvZGVzPVs0Niw2OF07dGhpcy5tb2RlPU9wZW5MYXllcnMuQ29udHJvbC5Nb2RpZnlGZWF0dXJlLlJFU0hBUEU7T3BlbkxheWVycy5Db250cm9sLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsW2JdKTtPcGVuTGF5ZXJzLlV0aWwuaXNBcnJheSh0aGlzLmRlbGV0ZUNvZGVzKXx8KHRoaXMuZGVsZXRlQ29kZXM9W3RoaXMuZGVsZXRlQ29kZXNdKTt2YXIgYz17ZG9jdW1lbnREcmFnOnRoaXMuZG9jdW1lbnREcmFnLHN0b3BEb3duOiExfTt0aGlzLmhhbmRsZXJzPQp7a2V5Ym9hcmQ6bmV3IE9wZW5MYXllcnMuSGFuZGxlci5LZXlib2FyZCh0aGlzLHtrZXlkb3duOnRoaXMuaGFuZGxlS2V5cHJlc3N9KSxkcmFnOm5ldyBPcGVuTGF5ZXJzLkhhbmRsZXIuRHJhZyh0aGlzLHtkb3duOmZ1bmN0aW9uKGEpe3RoaXMudmVydGV4PW51bGw7KGE9dGhpcy5sYXllci5nZXRGZWF0dXJlRnJvbUV2ZW50KHRoaXMuaGFuZGxlcnMuZHJhZy5ldnQpKT90aGlzLmRyYWdTdGFydChhKTp0aGlzLmNsaWNrb3V0JiYodGhpcy5fdW5zZWxlY3Q9dGhpcy5mZWF0dXJlKX0sbW92ZTpmdW5jdGlvbihhKXtkZWxldGUgdGhpcy5fdW5zZWxlY3Q7dGhpcy52ZXJ0ZXgmJnRoaXMuZHJhZ1ZlcnRleCh0aGlzLnZlcnRleCxhKX0sdXA6ZnVuY3Rpb24oKXt0aGlzLmhhbmRsZXJzLmRyYWcuc3RvcERvd249ITE7dGhpcy5fdW5zZWxlY3QmJih0aGlzLnVuc2VsZWN0RmVhdHVyZSh0aGlzLl91bnNlbGVjdCksZGVsZXRlIHRoaXMuX3Vuc2VsZWN0KX0sZG9uZTpmdW5jdGlvbihhKXt0aGlzLnZlcnRleCYmCnRoaXMuZHJhZ0NvbXBsZXRlKHRoaXMudmVydGV4KX19LGMpfX0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMubWFwJiZ0aGlzLm1hcC5ldmVudHMudW4oe3JlbW92ZWxheWVyOnRoaXMuaGFuZGxlTWFwRXZlbnRzLGNoYW5nZWxheWVyOnRoaXMuaGFuZGxlTWFwRXZlbnRzLHNjb3BlOnRoaXN9KTt0aGlzLmxheWVyPW51bGw7T3BlbkxheWVycy5Db250cm9sLnByb3RvdHlwZS5kZXN0cm95LmFwcGx5KHRoaXMsW10pfSxhY3RpdmF0ZTpmdW5jdGlvbigpe3RoaXMubW92ZUxheWVyVG9Ub3AoKTt0aGlzLm1hcC5ldmVudHMub24oe3JlbW92ZWxheWVyOnRoaXMuaGFuZGxlTWFwRXZlbnRzLGNoYW5nZWxheWVyOnRoaXMuaGFuZGxlTWFwRXZlbnRzLHNjb3BlOnRoaXN9KTtyZXR1cm4gdGhpcy5oYW5kbGVycy5rZXlib2FyZC5hY3RpdmF0ZSgpJiZ0aGlzLmhhbmRsZXJzLmRyYWcuYWN0aXZhdGUoKSYmT3BlbkxheWVycy5Db250cm9sLnByb3RvdHlwZS5hY3RpdmF0ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LApkZWFjdGl2YXRlOmZ1bmN0aW9uKCl7dmFyIGE9ITE7T3BlbkxheWVycy5Db250cm9sLnByb3RvdHlwZS5kZWFjdGl2YXRlLmFwcGx5KHRoaXMsYXJndW1lbnRzKSYmKHRoaXMubW92ZUxheWVyQmFjaygpLHRoaXMubWFwLmV2ZW50cy51bih7cmVtb3ZlbGF5ZXI6dGhpcy5oYW5kbGVNYXBFdmVudHMsY2hhbmdlbGF5ZXI6dGhpcy5oYW5kbGVNYXBFdmVudHMsc2NvcGU6dGhpc30pLHRoaXMubGF5ZXIucmVtb3ZlRmVhdHVyZXModGhpcy52ZXJ0aWNlcyx7c2lsZW50OiEwfSksdGhpcy5sYXllci5yZW1vdmVGZWF0dXJlcyh0aGlzLnZpcnR1YWxWZXJ0aWNlcyx7c2lsZW50OiEwfSksdGhpcy52ZXJ0aWNlcz1bXSx0aGlzLmhhbmRsZXJzLmRyYWcuZGVhY3RpdmF0ZSgpLHRoaXMuaGFuZGxlcnMua2V5Ym9hcmQuZGVhY3RpdmF0ZSgpLChhPXRoaXMuZmVhdHVyZSkmJihhLmdlb21ldHJ5JiZhLmxheWVyKSYmdGhpcy51bnNlbGVjdEZlYXR1cmUoYSksYT0hMCk7cmV0dXJuIGF9LGJlZm9yZVNlbGVjdEZlYXR1cmU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMubGF5ZXIuZXZlbnRzLnRyaWdnZXJFdmVudCgiYmVmb3JlZmVhdHVyZW1vZGlmaWVkIiwKe2ZlYXR1cmU6YX0pfSxzZWxlY3RGZWF0dXJlOmZ1bmN0aW9uKGEpe2lmKCEodGhpcy5mZWF0dXJlPT09YXx8dGhpcy5nZW9tZXRyeVR5cGVzJiYtMT09T3BlbkxheWVycy5VdGlsLmluZGV4T2YodGhpcy5nZW9tZXRyeVR5cGVzLGEuZ2VvbWV0cnkuQ0xBU1NfTkFNRSkpKXshMSE9PXRoaXMuYmVmb3JlU2VsZWN0RmVhdHVyZShhKSYmKHRoaXMuZmVhdHVyZSYmdGhpcy51bnNlbGVjdEZlYXR1cmUodGhpcy5mZWF0dXJlKSx0aGlzLmZlYXR1cmU9YSx0aGlzLmxheWVyLnNlbGVjdGVkRmVhdHVyZXMucHVzaChhKSx0aGlzLmxheWVyLmRyYXdGZWF0dXJlKGEsInNlbGVjdCIpLHRoaXMubW9kaWZpZWQ9ITEsdGhpcy5yZXNldFZlcnRpY2VzKCksdGhpcy5vbk1vZGlmaWNhdGlvblN0YXJ0KHRoaXMuZmVhdHVyZSkpO3ZhciBiPWEubW9kaWZpZWQ7IWEuZ2VvbWV0cnl8fGImJmIuZ2VvbWV0cnl8fCh0aGlzLl9vcmlnaW5hbEdlb21ldHJ5PWEuZ2VvbWV0cnkuY2xvbmUoKSl9fSx1bnNlbGVjdEZlYXR1cmU6ZnVuY3Rpb24oYSl7dGhpcy5sYXllci5yZW1vdmVGZWF0dXJlcyh0aGlzLnZlcnRpY2VzLAp7c2lsZW50OiEwfSk7dGhpcy52ZXJ0aWNlcz1bXTt0aGlzLmxheWVyLmRlc3Ryb3lGZWF0dXJlcyh0aGlzLnZpcnR1YWxWZXJ0aWNlcyx7c2lsZW50OiEwfSk7dGhpcy52aXJ0dWFsVmVydGljZXM9W107dGhpcy5kcmFnSGFuZGxlJiYodGhpcy5sYXllci5kZXN0cm95RmVhdHVyZXMoW3RoaXMuZHJhZ0hhbmRsZV0se3NpbGVudDohMH0pLGRlbGV0ZSB0aGlzLmRyYWdIYW5kbGUpO3RoaXMucmFkaXVzSGFuZGxlJiYodGhpcy5sYXllci5kZXN0cm95RmVhdHVyZXMoW3RoaXMucmFkaXVzSGFuZGxlXSx7c2lsZW50OiEwfSksZGVsZXRlIHRoaXMucmFkaXVzSGFuZGxlKTt0aGlzLmxheWVyLmRyYXdGZWF0dXJlKHRoaXMuZmVhdHVyZSwiZGVmYXVsdCIpO3RoaXMuZmVhdHVyZT1udWxsO09wZW5MYXllcnMuVXRpbC5yZW1vdmVJdGVtKHRoaXMubGF5ZXIuc2VsZWN0ZWRGZWF0dXJlcyxhKTt0aGlzLm9uTW9kaWZpY2F0aW9uRW5kKGEpO3RoaXMubGF5ZXIuZXZlbnRzLnRyaWdnZXJFdmVudCgiYWZ0ZXJmZWF0dXJlbW9kaWZpZWQiLAp7ZmVhdHVyZTphLG1vZGlmaWVkOnRoaXMubW9kaWZpZWR9KTt0aGlzLm1vZGlmaWVkPSExfSxkcmFnU3RhcnQ6ZnVuY3Rpb24oYSl7dmFyIGI9Ik9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQiPT1hLmdlb21ldHJ5LkNMQVNTX05BTUU7dGhpcy5zdGFuZGFsb25lfHwoYS5fc2tldGNofHwhYikmJmEuX3NrZXRjaHx8KHRoaXMudG9nZ2xlJiZ0aGlzLmZlYXR1cmU9PT1hJiYodGhpcy5fdW5zZWxlY3Q9YSksdGhpcy5zZWxlY3RGZWF0dXJlKGEpKTtpZihhLl9za2V0Y2h8fGIpdGhpcy52ZXJ0ZXg9YSx0aGlzLmhhbmRsZXJzLmRyYWcuc3RvcERvd249ITB9LGRyYWdWZXJ0ZXg6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLm1hcC5nZXRMb25MYXRGcm9tVmlld1BvcnRQeChiKSxkPWEuZ2VvbWV0cnk7ZC5tb3ZlKGMubG9uLWQueCxjLmxhdC1kLnkpO3RoaXMubW9kaWZpZWQ9ITA7Ik9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQiPT10aGlzLmZlYXR1cmUuZ2VvbWV0cnkuQ0xBU1NfTkFNRT8KdGhpcy5sYXllci5ldmVudHMudHJpZ2dlckV2ZW50KCJ2ZXJ0ZXhtb2RpZmllZCIse3ZlcnRleDphLmdlb21ldHJ5LGZlYXR1cmU6dGhpcy5mZWF0dXJlLHBpeGVsOmJ9KTooYS5faW5kZXg/KGEuZ2VvbWV0cnkucGFyZW50LmFkZENvbXBvbmVudChhLmdlb21ldHJ5LGEuX2luZGV4KSxkZWxldGUgYS5faW5kZXgsT3BlbkxheWVycy5VdGlsLnJlbW92ZUl0ZW0odGhpcy52aXJ0dWFsVmVydGljZXMsYSksdGhpcy52ZXJ0aWNlcy5wdXNoKGEpKTphPT10aGlzLmRyYWdIYW5kbGU/KHRoaXMubGF5ZXIucmVtb3ZlRmVhdHVyZXModGhpcy52ZXJ0aWNlcyx7c2lsZW50OiEwfSksdGhpcy52ZXJ0aWNlcz1bXSx0aGlzLnJhZGl1c0hhbmRsZSYmKHRoaXMubGF5ZXIuZGVzdHJveUZlYXR1cmVzKFt0aGlzLnJhZGl1c0hhbmRsZV0se3NpbGVudDohMH0pLHRoaXMucmFkaXVzSGFuZGxlPW51bGwpKTphIT09dGhpcy5yYWRpdXNIYW5kbGUmJnRoaXMubGF5ZXIuZXZlbnRzLnRyaWdnZXJFdmVudCgidmVydGV4bW9kaWZpZWQiLAp7dmVydGV4OmEuZ2VvbWV0cnksZmVhdHVyZTp0aGlzLmZlYXR1cmUscGl4ZWw6Yn0pLDA8dGhpcy52aXJ0dWFsVmVydGljZXMubGVuZ3RoJiYodGhpcy5sYXllci5kZXN0cm95RmVhdHVyZXModGhpcy52aXJ0dWFsVmVydGljZXMse3NpbGVudDohMH0pLHRoaXMudmlydHVhbFZlcnRpY2VzPVtdKSx0aGlzLmxheWVyLmRyYXdGZWF0dXJlKHRoaXMuZmVhdHVyZSx0aGlzLnN0YW5kYWxvbmU/dm9pZCAwOiJzZWxlY3QiKSk7dGhpcy5sYXllci5kcmF3RmVhdHVyZShhKX0sZHJhZ0NvbXBsZXRlOmZ1bmN0aW9uKGEpe3RoaXMucmVzZXRWZXJ0aWNlcygpO3RoaXMuc2V0RmVhdHVyZVN0YXRlKCk7dGhpcy5vbk1vZGlmaWNhdGlvbih0aGlzLmZlYXR1cmUpO3RoaXMubGF5ZXIuZXZlbnRzLnRyaWdnZXJFdmVudCgiZmVhdHVyZW1vZGlmaWVkIix7ZmVhdHVyZTp0aGlzLmZlYXR1cmV9KX0sc2V0RmVhdHVyZVN0YXRlOmZ1bmN0aW9uKCl7aWYodGhpcy5mZWF0dXJlLnN0YXRlIT1PcGVuTGF5ZXJzLlN0YXRlLklOU0VSVCYmCnRoaXMuZmVhdHVyZS5zdGF0ZSE9T3BlbkxheWVycy5TdGF0ZS5ERUxFVEUmJih0aGlzLmZlYXR1cmUuc3RhdGU9T3BlbkxheWVycy5TdGF0ZS5VUERBVEUsdGhpcy5tb2RpZmllZCYmdGhpcy5fb3JpZ2luYWxHZW9tZXRyeSkpe3ZhciBhPXRoaXMuZmVhdHVyZTthLm1vZGlmaWVkPU9wZW5MYXllcnMuVXRpbC5leHRlbmQoYS5tb2RpZmllZCx7Z2VvbWV0cnk6dGhpcy5fb3JpZ2luYWxHZW9tZXRyeX0pO2RlbGV0ZSB0aGlzLl9vcmlnaW5hbEdlb21ldHJ5fX0scmVzZXRWZXJ0aWNlczpmdW5jdGlvbigpezA8dGhpcy52ZXJ0aWNlcy5sZW5ndGgmJih0aGlzLmxheWVyLnJlbW92ZUZlYXR1cmVzKHRoaXMudmVydGljZXMse3NpbGVudDohMH0pLHRoaXMudmVydGljZXM9W10pOzA8dGhpcy52aXJ0dWFsVmVydGljZXMubGVuZ3RoJiYodGhpcy5sYXllci5yZW1vdmVGZWF0dXJlcyh0aGlzLnZpcnR1YWxWZXJ0aWNlcyx7c2lsZW50OiEwfSksdGhpcy52aXJ0dWFsVmVydGljZXM9W10pO3RoaXMuZHJhZ0hhbmRsZSYmCih0aGlzLmxheWVyLmRlc3Ryb3lGZWF0dXJlcyhbdGhpcy5kcmFnSGFuZGxlXSx7c2lsZW50OiEwfSksdGhpcy5kcmFnSGFuZGxlPW51bGwpO3RoaXMucmFkaXVzSGFuZGxlJiYodGhpcy5sYXllci5kZXN0cm95RmVhdHVyZXMoW3RoaXMucmFkaXVzSGFuZGxlXSx7c2lsZW50OiEwfSksdGhpcy5yYWRpdXNIYW5kbGU9bnVsbCk7dGhpcy5mZWF0dXJlJiYiT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludCIhPXRoaXMuZmVhdHVyZS5nZW9tZXRyeS5DTEFTU19OQU1FJiYodGhpcy5tb2RlJk9wZW5MYXllcnMuQ29udHJvbC5Nb2RpZnlGZWF0dXJlLkRSQUcmJnRoaXMuY29sbGVjdERyYWdIYW5kbGUoKSx0aGlzLm1vZGUmKE9wZW5MYXllcnMuQ29udHJvbC5Nb2RpZnlGZWF0dXJlLlJPVEFURXxPcGVuTGF5ZXJzLkNvbnRyb2wuTW9kaWZ5RmVhdHVyZS5SRVNJWkUpJiZ0aGlzLmNvbGxlY3RSYWRpdXNIYW5kbGUoKSx0aGlzLm1vZGUmT3BlbkxheWVycy5Db250cm9sLk1vZGlmeUZlYXR1cmUuUkVTSEFQRSYmCih0aGlzLm1vZGUmT3BlbkxheWVycy5Db250cm9sLk1vZGlmeUZlYXR1cmUuUkVTSVpFfHx0aGlzLmNvbGxlY3RWZXJ0aWNlcygpKSl9LGhhbmRsZUtleXByZXNzOmZ1bmN0aW9uKGEpe3ZhciBiPWEua2V5Q29kZTt0aGlzLmZlYXR1cmUmJi0xIT1PcGVuTGF5ZXJzLlV0aWwuaW5kZXhPZih0aGlzLmRlbGV0ZUNvZGVzLGIpJiYoYj10aGlzLmxheWVyLmdldEZlYXR1cmVGcm9tRXZlbnQodGhpcy5oYW5kbGVycy5kcmFnLmV2dCkpJiYoLTEhPU9wZW5MYXllcnMuVXRpbC5pbmRleE9mKHRoaXMudmVydGljZXMsYikmJiF0aGlzLmhhbmRsZXJzLmRyYWcuZHJhZ2dpbmcmJmIuZ2VvbWV0cnkucGFyZW50KSYmKGIuZ2VvbWV0cnkucGFyZW50LnJlbW92ZUNvbXBvbmVudChiLmdlb21ldHJ5KSx0aGlzLmxheWVyLmV2ZW50cy50cmlnZ2VyRXZlbnQoInZlcnRleHJlbW92ZWQiLHt2ZXJ0ZXg6Yi5nZW9tZXRyeSxmZWF0dXJlOnRoaXMuZmVhdHVyZSxwaXhlbDphLnh5fSksdGhpcy5sYXllci5kcmF3RmVhdHVyZSh0aGlzLmZlYXR1cmUsCnRoaXMuc3RhbmRhbG9uZT92b2lkIDA6InNlbGVjdCIpLHRoaXMubW9kaWZpZWQ9ITAsdGhpcy5yZXNldFZlcnRpY2VzKCksdGhpcy5zZXRGZWF0dXJlU3RhdGUoKSx0aGlzLm9uTW9kaWZpY2F0aW9uKHRoaXMuZmVhdHVyZSksdGhpcy5sYXllci5ldmVudHMudHJpZ2dlckV2ZW50KCJmZWF0dXJlbW9kaWZpZWQiLHtmZWF0dXJlOnRoaXMuZmVhdHVyZX0pKX0sY29sbGVjdFZlcnRpY2VzOmZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShjKXt2YXIgZCxlLGY7aWYoIk9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQiPT1jLkNMQVNTX05BTUUpZT1uZXcgT3BlbkxheWVycy5GZWF0dXJlLlZlY3RvcihjKSxlLl9za2V0Y2g9ITAsZS5yZW5kZXJJbnRlbnQ9Yi52ZXJ0ZXhSZW5kZXJJbnRlbnQsYi52ZXJ0aWNlcy5wdXNoKGUpO2Vsc2V7Zj1jLmNvbXBvbmVudHMubGVuZ3RoOyJPcGVuTGF5ZXJzLkdlb21ldHJ5LkxpbmVhclJpbmciPT1jLkNMQVNTX05BTUUmJihmLT0xKTtmb3IoZD0wO2Q8ZjsrK2QpZT0KYy5jb21wb25lbnRzW2RdLCJPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50Ij09ZS5DTEFTU19OQU1FPyhlPW5ldyBPcGVuTGF5ZXJzLkZlYXR1cmUuVmVjdG9yKGUpLGUuX3NrZXRjaD0hMCxlLnJlbmRlckludGVudD1iLnZlcnRleFJlbmRlckludGVudCxiLnZlcnRpY2VzLnB1c2goZSkpOmEoZSk7aWYoYi5jcmVhdGVWZXJ0aWNlcyYmIk9wZW5MYXllcnMuR2VvbWV0cnkuTXVsdGlQb2ludCIhPWMuQ0xBU1NfTkFNRSlmb3IoZD0wLGY9Yy5jb21wb25lbnRzLmxlbmd0aDtkPGYtMTsrK2Qpe2U9Yy5jb21wb25lbnRzW2RdO3ZhciBnPWMuY29tcG9uZW50c1tkKzFdOyJPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50Ij09ZS5DTEFTU19OQU1FJiYiT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludCI9PWcuQ0xBU1NfTkFNRSYmKGU9bmV3IE9wZW5MYXllcnMuRmVhdHVyZS5WZWN0b3IobmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoKGUueCtnLngpLzIsKGUueStnLnkpLzIpLG51bGwsYi52aXJ0dWFsU3R5bGUpLAplLmdlb21ldHJ5LnBhcmVudD1jLGUuX2luZGV4PWQrMSxlLl9za2V0Y2g9ITAsYi52aXJ0dWFsVmVydGljZXMucHVzaChlKSl9fX10aGlzLnZlcnRpY2VzPVtdO3RoaXMudmlydHVhbFZlcnRpY2VzPVtdO3ZhciBiPXRoaXM7YS5jYWxsKHRoaXMsdGhpcy5mZWF0dXJlLmdlb21ldHJ5KTt0aGlzLmxheWVyLmFkZEZlYXR1cmVzKHRoaXMudmlydHVhbFZlcnRpY2VzLHtzaWxlbnQ6ITB9KTt0aGlzLmxheWVyLmFkZEZlYXR1cmVzKHRoaXMudmVydGljZXMse3NpbGVudDohMH0pfSxjb2xsZWN0RHJhZ0hhbmRsZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZmVhdHVyZS5nZW9tZXRyeSxiPWEuZ2V0Qm91bmRzKCkuZ2V0Q2VudGVyTG9uTGF0KCksYj1uZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludChiLmxvbixiLmxhdCksYz1uZXcgT3BlbkxheWVycy5GZWF0dXJlLlZlY3RvcihiKTtiLm1vdmU9ZnVuY3Rpb24oYixjKXtPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50LnByb3RvdHlwZS5tb3ZlLmNhbGwodGhpcywKYixjKTthLm1vdmUoYixjKX07Yy5fc2tldGNoPSEwO3RoaXMuZHJhZ0hhbmRsZT1jO3RoaXMuZHJhZ0hhbmRsZS5yZW5kZXJJbnRlbnQ9dGhpcy52ZXJ0ZXhSZW5kZXJJbnRlbnQ7dGhpcy5sYXllci5hZGRGZWF0dXJlcyhbdGhpcy5kcmFnSGFuZGxlXSx7c2lsZW50OiEwfSl9LGNvbGxlY3RSYWRpdXNIYW5kbGU6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmZlYXR1cmUuZ2VvbWV0cnksYj1hLmdldEJvdW5kcygpLGM9Yi5nZXRDZW50ZXJMb25MYXQoKSxkPW5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KGMubG9uLGMubGF0KSxiPW5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KGIucmlnaHQsYi5ib3R0b20pLGM9bmV3IE9wZW5MYXllcnMuRmVhdHVyZS5WZWN0b3IoYiksZT10aGlzLm1vZGUmT3BlbkxheWVycy5Db250cm9sLk1vZGlmeUZlYXR1cmUuUkVTSVpFLGY9dGhpcy5tb2RlJk9wZW5MYXllcnMuQ29udHJvbC5Nb2RpZnlGZWF0dXJlLlJFU0hBUEUsZz10aGlzLm1vZGUmCk9wZW5MYXllcnMuQ29udHJvbC5Nb2RpZnlGZWF0dXJlLlJPVEFURTtiLm1vdmU9ZnVuY3Rpb24oYixjKXtPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50LnByb3RvdHlwZS5tb3ZlLmNhbGwodGhpcyxiLGMpO3ZhciBsPXRoaXMueC1kLngsbT10aGlzLnktZC55LG49bC1iLHA9bS1jO2lmKGcpe3ZhciBxPU1hdGguYXRhbjIocCxuKSxxPU1hdGguYXRhbjIobSxsKS1xLHE9cSooMTgwL01hdGguUEkpO2Eucm90YXRlKHEsZCl9aWYoZSl7dmFyIHI7Zj8obS89cCxyPWwvbi9tKToobj1NYXRoLnNxcnQobipuK3AqcCksbT1NYXRoLnNxcnQobCpsK20qbSkvbik7YS5yZXNpemUobSxkLHIpfX07Yy5fc2tldGNoPSEwO3RoaXMucmFkaXVzSGFuZGxlPWM7dGhpcy5yYWRpdXNIYW5kbGUucmVuZGVySW50ZW50PXRoaXMudmVydGV4UmVuZGVySW50ZW50O3RoaXMubGF5ZXIuYWRkRmVhdHVyZXMoW3RoaXMucmFkaXVzSGFuZGxlXSx7c2lsZW50OiEwfSl9LHNldE1hcDpmdW5jdGlvbihhKXt0aGlzLmhhbmRsZXJzLmRyYWcuc2V0TWFwKGEpOwpPcGVuTGF5ZXJzLkNvbnRyb2wucHJvdG90eXBlLnNldE1hcC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGhhbmRsZU1hcEV2ZW50czpmdW5jdGlvbihhKXsicmVtb3ZlbGF5ZXIiIT1hLnR5cGUmJiJvcmRlciIhPWEucHJvcGVydHl8fHRoaXMubW92ZUxheWVyVG9Ub3AoKX0sbW92ZUxheWVyVG9Ub3A6ZnVuY3Rpb24oKXt2YXIgYT1NYXRoLm1heCh0aGlzLm1hcC5aX0lOREVYX0JBU0UuRmVhdHVyZS0xLHRoaXMubGF5ZXIuZ2V0WkluZGV4KCkpKzE7dGhpcy5sYXllci5zZXRaSW5kZXgoYSl9LG1vdmVMYXllckJhY2s6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmxheWVyLmdldFpJbmRleCgpLTE7YT49dGhpcy5tYXAuWl9JTkRFWF9CQVNFLkZlYXR1cmU/dGhpcy5sYXllci5zZXRaSW5kZXgoYSk6dGhpcy5tYXAuc2V0TGF5ZXJaSW5kZXgodGhpcy5sYXllcix0aGlzLm1hcC5nZXRMYXllckluZGV4KHRoaXMubGF5ZXIpKX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Db250cm9sLk1vZGlmeUZlYXR1cmUifSk7Ck9wZW5MYXllcnMuQ29udHJvbC5Nb2RpZnlGZWF0dXJlLlJFU0hBUEU9MTtPcGVuTGF5ZXJzLkNvbnRyb2wuTW9kaWZ5RmVhdHVyZS5SRVNJWkU9MjtPcGVuTGF5ZXJzLkNvbnRyb2wuTW9kaWZ5RmVhdHVyZS5ST1RBVEU9NDtPcGVuTGF5ZXJzLkNvbnRyb2wuTW9kaWZ5RmVhdHVyZS5EUkFHPTg7T3BlbkxheWVycy5MYXllci5CaW5nPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5MYXllci5YWVose2tleTpudWxsLHNlcnZlclJlc29sdXRpb25zOlsxNTY1NDMuMDMzOTA2MjUsNzgyNzEuNTE2OTUzMTI1LDM5MTM1Ljc1ODQ3NjU2MjUsMTk1NjcuODc5MjM4MjgxMjUsOTc4My45Mzk2MTkxNDA2MjUsNDg5MS45Njk4MDk1NzAzMTI1LDI0NDUuOTg0OTA0Nzg1MTU2MiwxMjIyLjk5MjQ1MjM5MjU3ODEsNjExLjQ5NjIyNjE5NjI4OTEsMzA1Ljc0ODExMzA5ODE0NDUzLDE1Mi44NzQwNTY1NDkwNzIyNiw3Ni40MzcwMjgyNzQ1MzYxMywzOC4yMTg1MTQxMzcyNjgwNjYsMTkuMTA5MjU3MDY4NjM0MDMzLDkuNTU0NjI4NTM0MzE3MDE3LDQuNzc3MzE0MjY3MTU4NTA4LDIuMzg4NjU3MTMzNTc5MjU0LDEuMTk0MzI4NTY2Nzg5NjI3LDAuNTk3MTY0MjgzMzk0ODEzNSwwLjI5ODU4MjE0MTY5NzQwNjc3LDAuMTQ5MjkxMDcwODQ4NzAzMzgsMC4wNzQ2NDU1MzU0MjQzNTE2OV0sYXR0cmlidXRpb25UZW1wbGF0ZTonPHNwYW4gY2xhc3M9Im9sQmluZ0F0dHJpYnV0aW9uICR7dHlwZX0iPjxkaXY+PGEgdGFyZ2V0PSJfYmxhbmsiIGhyZWY9Imh0dHA6Ly93d3cuYmluZy5jb20vbWFwcy8iPjxpbWcgc3JjPSIke2xvZ299IiAvPjwvYT48L2Rpdj4ke2NvcHlyaWdodHN9PGEgc3R5bGU9IndoaXRlLXNwYWNlOiBub3dyYXAiIHRhcmdldD0iX2JsYW5rIiBocmVmPSJodHRwOi8vd3d3Lm1pY3Jvc29mdC5jb20vbWFwcy9wcm9kdWN0L3Rlcm1zLmh0bWwiPlRlcm1zIG9mIFVzZTwvYT48L3NwYW4+JywKbWV0YWRhdGE6bnVsbCxwcm90b2NvbFJlZ2V4Oi9eaHR0cDovaSx0eXBlOiJSb2FkIixjdWx0dXJlOiJlbi1VUyIsbWV0YWRhdGFQYXJhbXM6bnVsbCx0aWxlT3B0aW9uczpudWxsLHByb3RvY29sOn53aW5kb3cubG9jYXRpb24uaHJlZi5pbmRleE9mKCJodHRwIik/IiI6Imh0dHA6Iixpbml0aWFsaXplOmZ1bmN0aW9uKGEpe2E9T3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoe3NwaGVyaWNhbE1lcmNhdG9yOiEwfSxhKTtPcGVuTGF5ZXJzLkxheWVyLlhZWi5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLFthLm5hbWV8fCJCaW5nICIrKGEudHlwZXx8dGhpcy50eXBlKSxudWxsLGFdKTt0aGlzLnRpbGVPcHRpb25zPU9wZW5MYXllcnMuVXRpbC5leHRlbmQoe2Nyb3NzT3JpZ2luS2V5d29yZDoiYW5vbnltb3VzIn0sdGhpcy5vcHRpb25zLnRpbGVPcHRpb25zKTt0aGlzLmxvYWRNZXRhZGF0YSgpfSxsb2FkTWV0YWRhdGE6ZnVuY3Rpb24oKXt0aGlzLl9jYWxsYmFja0lkPQoiX2NhbGxiYWNrXyIrdGhpcy5pZC5yZXBsYWNlKC9cLi9nLCJfIik7d2luZG93W3RoaXMuX2NhbGxiYWNrSWRdPU9wZW5MYXllcnMuRnVuY3Rpb24uYmluZChPcGVuTGF5ZXJzLkxheWVyLkJpbmcucHJvY2Vzc01ldGFkYXRhLHRoaXMpO3ZhciBhPU9wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKHtrZXk6dGhpcy5rZXksanNvbnA6dGhpcy5fY2FsbGJhY2tJZCxpbmNsdWRlOiJJbWFnZXJ5UHJvdmlkZXJzIn0sdGhpcy5tZXRhZGF0YVBhcmFtcyksYT10aGlzLnByb3RvY29sKyIvL2Rldi52aXJ0dWFsZWFydGgubmV0L1JFU1QvdjEvSW1hZ2VyeS9NZXRhZGF0YS8iK3RoaXMudHlwZSsiPyIrT3BlbkxheWVycy5VdGlsLmdldFBhcmFtZXRlclN0cmluZyhhKSxiPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNjcmlwdCIpO2IudHlwZT0idGV4dC9qYXZhc2NyaXB0IjtiLnNyYz1hO2IuaWQ9dGhpcy5fY2FsbGJhY2tJZDtkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgiaGVhZCIpWzBdLmFwcGVuZENoaWxkKGIpfSwKaW5pdExheWVyOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5tZXRhZGF0YS5yZXNvdXJjZVNldHNbMF0ucmVzb3VyY2VzWzBdLGI9YS5pbWFnZVVybC5yZXBsYWNlKCJ7cXVhZGtleX0iLCIke3F1YWRrZXl9IiksYj1iLnJlcGxhY2UoIntjdWx0dXJlfSIsdGhpcy5jdWx0dXJlKSxiPWIucmVwbGFjZSh0aGlzLnByb3RvY29sUmVnZXgsdGhpcy5wcm90b2NvbCk7dGhpcy51cmw9W107Zm9yKHZhciBjPTA7YzxhLmltYWdlVXJsU3ViZG9tYWlucy5sZW5ndGg7KytjKXRoaXMudXJsLnB1c2goYi5yZXBsYWNlKCJ7c3ViZG9tYWlufSIsYS5pbWFnZVVybFN1YmRvbWFpbnNbY10pKTt0aGlzLmFkZE9wdGlvbnMoe21heFJlc29sdXRpb246TWF0aC5taW4odGhpcy5zZXJ2ZXJSZXNvbHV0aW9uc1thLnpvb21NaW5dLHRoaXMubWF4UmVzb2x1dGlvbnx8TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZKSxudW1ab29tTGV2ZWxzOk1hdGgubWluKGEuem9vbU1heCsxLWEuem9vbU1pbix0aGlzLm51bVpvb21MZXZlbHMpfSwKITApO3RoaXMuaXNCYXNlTGF5ZXJ8fHRoaXMucmVkcmF3KCk7dGhpcy51cGRhdGVBdHRyaWJ1dGlvbigpfSxnZXRVUkw6ZnVuY3Rpb24oYSl7aWYodGhpcy51cmwpe3ZhciBiPXRoaXMuZ2V0WFlaKGEpO2E9Yi54O2Zvcih2YXIgYz1iLnksYj1iLnosZD1bXSxlPWI7MDxlOy0tZSl7dmFyIGY9IjAiLGc9MTw8ZS0xOzAhPShhJmcpJiZmKys7MCE9KGMmZykmJihmKyssZisrKTtkLnB1c2goZil9ZD1kLmpvaW4oIiIpO2E9dGhpcy5zZWxlY3RVcmwoIiIrYStjK2IsdGhpcy51cmwpO3JldHVybiBPcGVuTGF5ZXJzLlN0cmluZy5mb3JtYXQoYSx7cXVhZGtleTpkfSl9fSx1cGRhdGVBdHRyaWJ1dGlvbjpmdW5jdGlvbigpe3ZhciBhPXRoaXMubWV0YWRhdGE7aWYoYS5yZXNvdXJjZVNldHMmJnRoaXMubWFwJiZ0aGlzLm1hcC5jZW50ZXIpe3ZhciBiPWEucmVzb3VyY2VTZXRzWzBdLnJlc291cmNlc1swXSxjPXRoaXMubWFwLmdldEV4dGVudCgpLnRyYW5zZm9ybSh0aGlzLm1hcC5nZXRQcm9qZWN0aW9uT2JqZWN0KCksCm5ldyBPcGVuTGF5ZXJzLlByb2plY3Rpb24oIkVQU0c6NDMyNiIpKSxkPWIuaW1hZ2VyeVByb3ZpZGVyc3x8W10sZT1PcGVuTGF5ZXJzLlV0aWwuaW5kZXhPZih0aGlzLnNlcnZlclJlc29sdXRpb25zLHRoaXMuZ2V0U2VydmVyUmVzb2x1dGlvbigpKSxiPSIiLGYsZyxoLGssbCxtLG47Zz0wO2ZvcihoPWQubGVuZ3RoO2c8aDsrK2cpZm9yKGY9ZFtnXSxrPTAsbD1mLmNvdmVyYWdlQXJlYXMubGVuZ3RoO2s8bDsrK2spbj1mLmNvdmVyYWdlQXJlYXNba10sbT1PcGVuTGF5ZXJzLkJvdW5kcy5mcm9tQXJyYXkobi5iYm94LCEwKSxjLmludGVyc2VjdHNCb3VuZHMobSkmJihlPD1uLnpvb21NYXgmJmU+PW4uem9vbU1pbikmJihiKz1mLmF0dHJpYnV0aW9uKyIgIik7YT1hLmJyYW5kTG9nb1VyaS5yZXBsYWNlKHRoaXMucHJvdG9jb2xSZWdleCx0aGlzLnByb3RvY29sKTt0aGlzLmF0dHJpYnV0aW9uPU9wZW5MYXllcnMuU3RyaW5nLmZvcm1hdCh0aGlzLmF0dHJpYnV0aW9uVGVtcGxhdGUse3R5cGU6dGhpcy50eXBlLnRvTG93ZXJDYXNlKCksCmxvZ286YSxjb3B5cmlnaHRzOmJ9KTt0aGlzLm1hcCYmdGhpcy5tYXAuZXZlbnRzLnRyaWdnZXJFdmVudCgiY2hhbmdlbGF5ZXIiLHtsYXllcjp0aGlzLHByb3BlcnR5OiJhdHRyaWJ1dGlvbiJ9KX19LHNldE1hcDpmdW5jdGlvbigpe09wZW5MYXllcnMuTGF5ZXIuWFlaLnByb3RvdHlwZS5zZXRNYXAuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMubWFwLmV2ZW50cy5yZWdpc3RlcigibW92ZWVuZCIsdGhpcyx0aGlzLnVwZGF0ZUF0dHJpYnV0aW9uKX0sY2xvbmU6ZnVuY3Rpb24oYSl7bnVsbD09YSYmKGE9bmV3IE9wZW5MYXllcnMuTGF5ZXIuQmluZyh0aGlzLm9wdGlvbnMpKTtyZXR1cm4gYT1PcGVuTGF5ZXJzLkxheWVyLlhZWi5wcm90b3R5cGUuY2xvbmUuYXBwbHkodGhpcyxbYV0pfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5tYXAmJnRoaXMubWFwLmV2ZW50cy51bnJlZ2lzdGVyKCJtb3ZlZW5kIix0aGlzLHRoaXMudXBkYXRlQXR0cmlidXRpb24pO09wZW5MYXllcnMuTGF5ZXIuWFlaLnByb3RvdHlwZS5kZXN0cm95LmFwcGx5KHRoaXMsCmFyZ3VtZW50cyl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuTGF5ZXIuQmluZyJ9KTtPcGVuTGF5ZXJzLkxheWVyLkJpbmcucHJvY2Vzc01ldGFkYXRhPWZ1bmN0aW9uKGEpe3RoaXMubWV0YWRhdGE9YTt0aGlzLmluaXRMYXllcigpO2E9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5fY2FsbGJhY2tJZCk7YS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGEpO3dpbmRvd1t0aGlzLl9jYWxsYmFja0lkXT12b2lkIDA7ZGVsZXRlIHRoaXMuX2NhbGxiYWNrSWR9O09wZW5MYXllcnMuU3R5bGVNYXA9T3BlbkxheWVycy5DbGFzcyh7c3R5bGVzOm51bGwsZXh0ZW5kRGVmYXVsdDohMCxpbml0aWFsaXplOmZ1bmN0aW9uKGEsYil7dGhpcy5zdHlsZXM9eyJkZWZhdWx0IjpuZXcgT3BlbkxheWVycy5TdHlsZShPcGVuTGF5ZXJzLkZlYXR1cmUuVmVjdG9yLnN0eWxlWyJkZWZhdWx0Il0pLHNlbGVjdDpuZXcgT3BlbkxheWVycy5TdHlsZShPcGVuTGF5ZXJzLkZlYXR1cmUuVmVjdG9yLnN0eWxlLnNlbGVjdCksdGVtcG9yYXJ5Om5ldyBPcGVuTGF5ZXJzLlN0eWxlKE9wZW5MYXllcnMuRmVhdHVyZS5WZWN0b3Iuc3R5bGUudGVtcG9yYXJ5KSwiZGVsZXRlIjpuZXcgT3BlbkxheWVycy5TdHlsZShPcGVuTGF5ZXJzLkZlYXR1cmUuVmVjdG9yLnN0eWxlWyJkZWxldGUiXSl9O2lmKGEgaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLlN0eWxlKXRoaXMuc3R5bGVzWyJkZWZhdWx0Il09YSx0aGlzLnN0eWxlcy5zZWxlY3Q9YSx0aGlzLnN0eWxlcy50ZW1wb3Jhcnk9YSx0aGlzLnN0eWxlc1siZGVsZXRlIl09CmE7ZWxzZSBpZigib2JqZWN0Ij09dHlwZW9mIGEpZm9yKHZhciBjIGluIGEpaWYoYVtjXWluc3RhbmNlb2YgT3BlbkxheWVycy5TdHlsZSl0aGlzLnN0eWxlc1tjXT1hW2NdO2Vsc2UgaWYoIm9iamVjdCI9PXR5cGVvZiBhW2NdKXRoaXMuc3R5bGVzW2NdPW5ldyBPcGVuTGF5ZXJzLlN0eWxlKGFbY10pO2Vsc2V7dGhpcy5zdHlsZXNbImRlZmF1bHQiXT1uZXcgT3BlbkxheWVycy5TdHlsZShhKTt0aGlzLnN0eWxlcy5zZWxlY3Q9bmV3IE9wZW5MYXllcnMuU3R5bGUoYSk7dGhpcy5zdHlsZXMudGVtcG9yYXJ5PW5ldyBPcGVuTGF5ZXJzLlN0eWxlKGEpO3RoaXMuc3R5bGVzWyJkZWxldGUiXT1uZXcgT3BlbkxheWVycy5TdHlsZShhKTticmVha31PcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHRoaXMsYil9LGRlc3Ryb3k6ZnVuY3Rpb24oKXtmb3IodmFyIGEgaW4gdGhpcy5zdHlsZXMpdGhpcy5zdHlsZXNbYV0uZGVzdHJveSgpO3RoaXMuc3R5bGVzPW51bGx9LGNyZWF0ZVN5bWJvbGl6ZXI6ZnVuY3Rpb24oYSwKYil7YXx8KGE9bmV3IE9wZW5MYXllcnMuRmVhdHVyZS5WZWN0b3IpO3RoaXMuc3R5bGVzW2JdfHwoYj0iZGVmYXVsdCIpO2EucmVuZGVySW50ZW50PWI7dmFyIGM9e307dGhpcy5leHRlbmREZWZhdWx0JiYiZGVmYXVsdCIhPWImJihjPXRoaXMuc3R5bGVzWyJkZWZhdWx0Il0uY3JlYXRlU3ltYm9saXplcihhKSk7cmV0dXJuIE9wZW5MYXllcnMuVXRpbC5leHRlbmQoYyx0aGlzLnN0eWxlc1tiXS5jcmVhdGVTeW1ib2xpemVyKGEpKX0sYWRkVW5pcXVlVmFsdWVSdWxlczpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1bXSxmO2ZvcihmIGluIGMpZS5wdXNoKG5ldyBPcGVuTGF5ZXJzLlJ1bGUoe3N5bWJvbGl6ZXI6Y1tmXSxjb250ZXh0OmQsZmlsdGVyOm5ldyBPcGVuTGF5ZXJzLkZpbHRlci5Db21wYXJpc29uKHt0eXBlOk9wZW5MYXllcnMuRmlsdGVyLkNvbXBhcmlzb24uRVFVQUxfVE8scHJvcGVydHk6Yix2YWx1ZTpmfSl9KSk7dGhpcy5zdHlsZXNbYV0uYWRkUnVsZXMoZSl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuU3R5bGVNYXAifSk7T3BlbkxheWVycy5MYXllci5WZWN0b3I9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkxheWVyLHtpc0Jhc2VMYXllcjohMSxpc0ZpeGVkOiExLGZlYXR1cmVzOm51bGwsZmlsdGVyOm51bGwsc2VsZWN0ZWRGZWF0dXJlczpudWxsLHVucmVuZGVyZWRGZWF0dXJlczpudWxsLHJlcG9ydEVycm9yOiEwLHN0eWxlOm51bGwsc3R5bGVNYXA6bnVsbCxzdHJhdGVnaWVzOm51bGwscHJvdG9jb2w6bnVsbCxyZW5kZXJlcnM6WyJTVkciLCJWTUwiLCJDYW52YXMiXSxyZW5kZXJlcjpudWxsLHJlbmRlcmVyT3B0aW9uczpudWxsLGdlb21ldHJ5VHlwZTpudWxsLGRyYXduOiExLHJhdGlvOjEsaW5pdGlhbGl6ZTpmdW5jdGlvbihhLGIpe09wZW5MYXllcnMuTGF5ZXIucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMucmVuZGVyZXImJnRoaXMucmVuZGVyZXIuc3VwcG9ydGVkKCl8fHRoaXMuYXNzaWduUmVuZGVyZXIoKTt0aGlzLnJlbmRlcmVyJiZ0aGlzLnJlbmRlcmVyLnN1cHBvcnRlZCgpfHwKKHRoaXMucmVuZGVyZXI9bnVsbCx0aGlzLmRpc3BsYXlFcnJvcigpKTt0aGlzLnN0eWxlTWFwfHwodGhpcy5zdHlsZU1hcD1uZXcgT3BlbkxheWVycy5TdHlsZU1hcCk7dGhpcy5mZWF0dXJlcz1bXTt0aGlzLnNlbGVjdGVkRmVhdHVyZXM9W107dGhpcy51bnJlbmRlcmVkRmVhdHVyZXM9e307aWYodGhpcy5zdHJhdGVnaWVzKWZvcih2YXIgYz0wLGQ9dGhpcy5zdHJhdGVnaWVzLmxlbmd0aDtjPGQ7YysrKXRoaXMuc3RyYXRlZ2llc1tjXS5zZXRMYXllcih0aGlzKX0sZGVzdHJveTpmdW5jdGlvbigpe2lmKHRoaXMuc3RyYXRlZ2llcyl7dmFyIGEsYixjO2I9MDtmb3IoYz10aGlzLnN0cmF0ZWdpZXMubGVuZ3RoO2I8YztiKyspYT10aGlzLnN0cmF0ZWdpZXNbYl0sYS5hdXRvRGVzdHJveSYmYS5kZXN0cm95KCk7dGhpcy5zdHJhdGVnaWVzPW51bGx9dGhpcy5wcm90b2NvbCYmKHRoaXMucHJvdG9jb2wuYXV0b0Rlc3Ryb3kmJnRoaXMucHJvdG9jb2wuZGVzdHJveSgpLHRoaXMucHJvdG9jb2w9Cm51bGwpO3RoaXMuZGVzdHJveUZlYXR1cmVzKCk7dGhpcy51bnJlbmRlcmVkRmVhdHVyZXM9dGhpcy5zZWxlY3RlZEZlYXR1cmVzPXRoaXMuZmVhdHVyZXM9bnVsbDt0aGlzLnJlbmRlcmVyJiZ0aGlzLnJlbmRlcmVyLmRlc3Ryb3koKTt0aGlzLmRyYXduPXRoaXMuZ2VvbWV0cnlUeXBlPXRoaXMucmVuZGVyZXI9bnVsbDtPcGVuTGF5ZXJzLkxheWVyLnByb3RvdHlwZS5kZXN0cm95LmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sY2xvbmU6ZnVuY3Rpb24oYSl7bnVsbD09YSYmKGE9bmV3IE9wZW5MYXllcnMuTGF5ZXIuVmVjdG9yKHRoaXMubmFtZSx0aGlzLmdldE9wdGlvbnMoKSkpO2E9T3BlbkxheWVycy5MYXllci5wcm90b3R5cGUuY2xvbmUuYXBwbHkodGhpcyxbYV0pO2Zvcih2YXIgYj10aGlzLmZlYXR1cmVzLGM9Yi5sZW5ndGgsZD1BcnJheShjKSxlPTA7ZTxjOysrZSlkW2VdPWJbZV0uY2xvbmUoKTthLmZlYXR1cmVzPWQ7cmV0dXJuIGF9LHJlZnJlc2g6ZnVuY3Rpb24oYSl7dGhpcy5jYWxjdWxhdGVJblJhbmdlKCkmJgp0aGlzLnZpc2liaWxpdHkmJnRoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgicmVmcmVzaCIsYSl9LGFzc2lnblJlbmRlcmVyOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPTAsYj10aGlzLnJlbmRlcmVycy5sZW5ndGg7YTxiO2ErKyl7dmFyIGM9dGhpcy5yZW5kZXJlcnNbYV07aWYoKGM9ImZ1bmN0aW9uIj09dHlwZW9mIGM/YzpPcGVuTGF5ZXJzLlJlbmRlcmVyW2NdKSYmYy5wcm90b3R5cGUuc3VwcG9ydGVkKCkpe3RoaXMucmVuZGVyZXI9bmV3IGModGhpcy5kaXYsdGhpcy5yZW5kZXJlck9wdGlvbnMpO2JyZWFrfX19LGRpc3BsYXlFcnJvcjpmdW5jdGlvbigpe3RoaXMucmVwb3J0RXJyb3ImJk9wZW5MYXllcnMuQ29uc29sZS51c2VyRXJyb3IoT3BlbkxheWVycy5pMThuKCJicm93c2VyTm90U3VwcG9ydGVkIix7cmVuZGVyZXJzOnRoaXMucmVuZGVyZXJzLmpvaW4oIlxuIil9KSl9LHNldE1hcDpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLkxheWVyLnByb3RvdHlwZS5zZXRNYXAuYXBwbHkodGhpcywKYXJndW1lbnRzKTtpZih0aGlzLnJlbmRlcmVyKXt0aGlzLnJlbmRlcmVyLm1hcD10aGlzLm1hcDt2YXIgYj10aGlzLm1hcC5nZXRTaXplKCk7Yi53Kj10aGlzLnJhdGlvO2IuaCo9dGhpcy5yYXRpbzt0aGlzLnJlbmRlcmVyLnNldFNpemUoYil9ZWxzZSB0aGlzLm1hcC5yZW1vdmVMYXllcih0aGlzKX0sYWZ0ZXJBZGQ6ZnVuY3Rpb24oKXtpZih0aGlzLnN0cmF0ZWdpZXMpe3ZhciBhLGIsYztiPTA7Zm9yKGM9dGhpcy5zdHJhdGVnaWVzLmxlbmd0aDtiPGM7YisrKWE9dGhpcy5zdHJhdGVnaWVzW2JdLGEuYXV0b0FjdGl2YXRlJiZhLmFjdGl2YXRlKCl9fSxyZW1vdmVNYXA6ZnVuY3Rpb24oYSl7dGhpcy5kcmF3bj0hMTtpZih0aGlzLnN0cmF0ZWdpZXMpe3ZhciBiLGM7Yj0wO2ZvcihjPXRoaXMuc3RyYXRlZ2llcy5sZW5ndGg7YjxjO2IrKylhPXRoaXMuc3RyYXRlZ2llc1tiXSxhLmF1dG9BY3RpdmF0ZSYmYS5kZWFjdGl2YXRlKCl9fSxvbk1hcFJlc2l6ZTpmdW5jdGlvbigpe09wZW5MYXllcnMuTGF5ZXIucHJvdG90eXBlLm9uTWFwUmVzaXplLmFwcGx5KHRoaXMsCmFyZ3VtZW50cyk7dmFyIGE9dGhpcy5tYXAuZ2V0U2l6ZSgpO2Eudyo9dGhpcy5yYXRpbzthLmgqPXRoaXMucmF0aW87dGhpcy5yZW5kZXJlci5zZXRTaXplKGEpfSxtb3ZlVG86ZnVuY3Rpb24oYSxiLGMpe09wZW5MYXllcnMuTGF5ZXIucHJvdG90eXBlLm1vdmVUby5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dmFyIGQ9ITA7aWYoIWMpe3RoaXMucmVuZGVyZXIucm9vdC5zdHlsZS52aXNpYmlsaXR5PSJoaWRkZW4iO3ZhciBkPXRoaXMubWFwLmdldFNpemUoKSxlPWQudyxkPWQuaCxlPWUvMip0aGlzLnJhdGlvLWUvMixkPWQvMip0aGlzLnJhdGlvLWQvMixlPWUrdGhpcy5tYXAubGF5ZXJDb250YWluZXJPcmlnaW5QeC54LGU9LU1hdGgucm91bmQoZSksZD1kK3RoaXMubWFwLmxheWVyQ29udGFpbmVyT3JpZ2luUHgueSxkPS1NYXRoLnJvdW5kKGQpO3RoaXMuZGl2LnN0eWxlLmxlZnQ9ZSsicHgiO3RoaXMuZGl2LnN0eWxlLnRvcD1kKyJweCI7ZT10aGlzLm1hcC5nZXRFeHRlbnQoKS5zY2FsZSh0aGlzLnJhdGlvKTsKZD10aGlzLnJlbmRlcmVyLnNldEV4dGVudChlLGIpO3RoaXMucmVuZGVyZXIucm9vdC5zdHlsZS52aXNpYmlsaXR5PSJ2aXNpYmxlIjshMD09PU9wZW5MYXllcnMuSVNfR0VDS08mJih0aGlzLmRpdi5zY3JvbGxMZWZ0PXRoaXMuZGl2LnNjcm9sbExlZnQpO2lmKCFiJiZkKWZvcih2YXIgZiBpbiB0aGlzLnVucmVuZGVyZWRGZWF0dXJlcyllPXRoaXMudW5yZW5kZXJlZEZlYXR1cmVzW2ZdLHRoaXMuZHJhd0ZlYXR1cmUoZSl9aWYoIXRoaXMuZHJhd258fGJ8fCFkKWZvcih0aGlzLmRyYXduPSEwLGY9MCxkPXRoaXMuZmVhdHVyZXMubGVuZ3RoO2Y8ZDtmKyspdGhpcy5yZW5kZXJlci5sb2NrZWQ9ZiE9PWQtMSxlPXRoaXMuZmVhdHVyZXNbZl0sdGhpcy5kcmF3RmVhdHVyZShlKX0sZGlzcGxheTpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLkxheWVyLnByb3RvdHlwZS5kaXNwbGF5LmFwcGx5KHRoaXMsYXJndW1lbnRzKTt2YXIgYj10aGlzLmRpdi5zdHlsZS5kaXNwbGF5O2IhPXRoaXMucmVuZGVyZXIucm9vdC5zdHlsZS5kaXNwbGF5JiYKKHRoaXMucmVuZGVyZXIucm9vdC5zdHlsZS5kaXNwbGF5PWIpfSxhZGRGZWF0dXJlczpmdW5jdGlvbihhLGIpe09wZW5MYXllcnMuVXRpbC5pc0FycmF5KGEpfHwoYT1bYV0pO3ZhciBjPSFifHwhYi5zaWxlbnQ7aWYoYyl7dmFyIGQ9e2ZlYXR1cmVzOmF9O2lmKCExPT09dGhpcy5ldmVudHMudHJpZ2dlckV2ZW50KCJiZWZvcmVmZWF0dXJlc2FkZGVkIixkKSlyZXR1cm47YT1kLmZlYXR1cmVzfWZvcih2YXIgZD1bXSxlPTAsZj1hLmxlbmd0aDtlPGY7ZSsrKXt0aGlzLnJlbmRlcmVyLmxvY2tlZD1lIT1hLmxlbmd0aC0xPyEwOiExO3ZhciBnPWFbZV07aWYodGhpcy5nZW9tZXRyeVR5cGUmJiEoZy5nZW9tZXRyeSBpbnN0YW5jZW9mIHRoaXMuZ2VvbWV0cnlUeXBlKSl0aHJvdyBuZXcgVHlwZUVycm9yKCJhZGRGZWF0dXJlczogY29tcG9uZW50IHNob3VsZCBiZSBhbiAiK3RoaXMuZ2VvbWV0cnlUeXBlLnByb3RvdHlwZS5DTEFTU19OQU1FKTtnLmxheWVyPXRoaXM7IWcuc3R5bGUmJnRoaXMuc3R5bGUmJgooZy5zdHlsZT1PcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHt9LHRoaXMuc3R5bGUpKTtpZihjKXtpZighMT09PXRoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgiYmVmb3JlZmVhdHVyZWFkZGVkIix7ZmVhdHVyZTpnfSkpY29udGludWU7dGhpcy5wcmVGZWF0dXJlSW5zZXJ0KGcpfWQucHVzaChnKTt0aGlzLmZlYXR1cmVzLnB1c2goZyk7dGhpcy5kcmF3RmVhdHVyZShnKTtjJiYodGhpcy5ldmVudHMudHJpZ2dlckV2ZW50KCJmZWF0dXJlYWRkZWQiLHtmZWF0dXJlOmd9KSx0aGlzLm9uRmVhdHVyZUluc2VydChnKSl9YyYmdGhpcy5ldmVudHMudHJpZ2dlckV2ZW50KCJmZWF0dXJlc2FkZGVkIix7ZmVhdHVyZXM6ZH0pfSxyZW1vdmVGZWF0dXJlczpmdW5jdGlvbihhLGIpe2lmKGEmJjAhPT1hLmxlbmd0aCl7aWYoYT09PXRoaXMuZmVhdHVyZXMpcmV0dXJuIHRoaXMucmVtb3ZlQWxsRmVhdHVyZXMoYik7T3BlbkxheWVycy5VdGlsLmlzQXJyYXkoYSl8fChhPVthXSk7YT09PXRoaXMuc2VsZWN0ZWRGZWF0dXJlcyYmCihhPWEuc2xpY2UoKSk7dmFyIGM9IWJ8fCFiLnNpbGVudDtjJiZ0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoImJlZm9yZWZlYXR1cmVzcmVtb3ZlZCIse2ZlYXR1cmVzOmF9KTtmb3IodmFyIGQ9YS5sZW5ndGgtMTswPD1kO2QtLSl7dGhpcy5yZW5kZXJlci5sb2NrZWQ9MCE9ZCYmYVtkLTFdLmdlb21ldHJ5PyEwOiExO3ZhciBlPWFbZF07ZGVsZXRlIHRoaXMudW5yZW5kZXJlZEZlYXR1cmVzW2UuaWRdO2MmJnRoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgiYmVmb3JlZmVhdHVyZXJlbW92ZWQiLHtmZWF0dXJlOmV9KTt0aGlzLmZlYXR1cmVzPU9wZW5MYXllcnMuVXRpbC5yZW1vdmVJdGVtKHRoaXMuZmVhdHVyZXMsZSk7ZS5sYXllcj1udWxsO2UuZ2VvbWV0cnkmJnRoaXMucmVuZGVyZXIuZXJhc2VGZWF0dXJlcyhlKTstMSE9T3BlbkxheWVycy5VdGlsLmluZGV4T2YodGhpcy5zZWxlY3RlZEZlYXR1cmVzLGUpJiZPcGVuTGF5ZXJzLlV0aWwucmVtb3ZlSXRlbSh0aGlzLnNlbGVjdGVkRmVhdHVyZXMsCmUpO2MmJnRoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgiZmVhdHVyZXJlbW92ZWQiLHtmZWF0dXJlOmV9KX1jJiZ0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoImZlYXR1cmVzcmVtb3ZlZCIse2ZlYXR1cmVzOmF9KX19LHJlbW92ZUFsbEZlYXR1cmVzOmZ1bmN0aW9uKGEpe2E9IWF8fCFhLnNpbGVudDt2YXIgYj10aGlzLmZlYXR1cmVzO2EmJnRoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgiYmVmb3JlZmVhdHVyZXNyZW1vdmVkIix7ZmVhdHVyZXM6Yn0pO2Zvcih2YXIgYyxkPWIubGVuZ3RoLTE7MDw9ZDtkLS0pYz1iW2RdLGEmJnRoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgiYmVmb3JlZmVhdHVyZXJlbW92ZWQiLHtmZWF0dXJlOmN9KSxjLmxheWVyPW51bGwsYSYmdGhpcy5ldmVudHMudHJpZ2dlckV2ZW50KCJmZWF0dXJlcmVtb3ZlZCIse2ZlYXR1cmU6Y30pO3RoaXMucmVuZGVyZXIuY2xlYXIoKTt0aGlzLmZlYXR1cmVzPVtdO3RoaXMudW5yZW5kZXJlZEZlYXR1cmVzPXt9O3RoaXMuc2VsZWN0ZWRGZWF0dXJlcz0KW107YSYmdGhpcy5ldmVudHMudHJpZ2dlckV2ZW50KCJmZWF0dXJlc3JlbW92ZWQiLHtmZWF0dXJlczpifSl9LGRlc3Ryb3lGZWF0dXJlczpmdW5jdGlvbihhLGIpe3ZvaWQgMD09YSYmKGE9dGhpcy5mZWF0dXJlcyk7aWYoYSl7dGhpcy5yZW1vdmVGZWF0dXJlcyhhLGIpO2Zvcih2YXIgYz1hLmxlbmd0aC0xOzA8PWM7Yy0tKWFbY10uZGVzdHJveSgpfX0sZHJhd0ZlYXR1cmU6ZnVuY3Rpb24oYSxiKXtpZih0aGlzLmRyYXduKXtpZigib2JqZWN0IiE9dHlwZW9mIGIpe2J8fGEuc3RhdGUhPT1PcGVuTGF5ZXJzLlN0YXRlLkRFTEVURXx8KGI9ImRlbGV0ZSIpO3ZhciBjPWJ8fGEucmVuZGVySW50ZW50OyhiPWEuc3R5bGV8fHRoaXMuc3R5bGUpfHwoYj10aGlzLnN0eWxlTWFwLmNyZWF0ZVN5bWJvbGl6ZXIoYSxjKSl9Yz10aGlzLnJlbmRlcmVyLmRyYXdGZWF0dXJlKGEsYik7ITE9PT1jfHxudWxsPT09Yz90aGlzLnVucmVuZGVyZWRGZWF0dXJlc1thLmlkXT1hOmRlbGV0ZSB0aGlzLnVucmVuZGVyZWRGZWF0dXJlc1thLmlkXX19LAplcmFzZUZlYXR1cmVzOmZ1bmN0aW9uKGEpe3RoaXMucmVuZGVyZXIuZXJhc2VGZWF0dXJlcyhhKX0sZ2V0RmVhdHVyZUZyb21FdmVudDpmdW5jdGlvbihhKXtpZighdGhpcy5yZW5kZXJlcil0aHJvdyBFcnJvcigiZ2V0RmVhdHVyZUZyb21FdmVudCBjYWxsZWQgb24gbGF5ZXIgd2l0aCBubyByZW5kZXJlci4gVGhpcyB1c3VhbGx5IG1lYW5zIHlvdSBkZXN0cm95ZWQgYSBsYXllciwgYnV0IG5vdCBzb21lIGhhbmRsZXIgd2hpY2ggaXMgYXNzb2NpYXRlZCB3aXRoIGl0LiIpO3ZhciBiPW51bGw7KGE9dGhpcy5yZW5kZXJlci5nZXRGZWF0dXJlSWRGcm9tRXZlbnQoYSkpJiYoYj0ic3RyaW5nIj09PXR5cGVvZiBhP3RoaXMuZ2V0RmVhdHVyZUJ5SWQoYSk6YSk7cmV0dXJuIGJ9LGdldEZlYXR1cmVCeTpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz1udWxsLGQ9MCxlPXRoaXMuZmVhdHVyZXMubGVuZ3RoO2Q8ZTsrK2QpaWYodGhpcy5mZWF0dXJlc1tkXVthXT09Yil7Yz10aGlzLmZlYXR1cmVzW2RdOwpicmVha31yZXR1cm4gY30sZ2V0RmVhdHVyZUJ5SWQ6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZ2V0RmVhdHVyZUJ5KCJpZCIsYSl9LGdldEZlYXR1cmVCeUZpZDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5nZXRGZWF0dXJlQnkoImZpZCIsYSl9LGdldEZlYXR1cmVzQnlBdHRyaWJ1dGU6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGU9dGhpcy5mZWF0dXJlcy5sZW5ndGgsZj1bXTtmb3IoYz0wO2M8ZTtjKyspKGQ9dGhpcy5mZWF0dXJlc1tjXSkmJmQuYXR0cmlidXRlcyYmZC5hdHRyaWJ1dGVzW2FdPT09YiYmZi5wdXNoKGQpO3JldHVybiBmfSxvbkZlYXR1cmVJbnNlcnQ6ZnVuY3Rpb24oYSl7fSxwcmVGZWF0dXJlSW5zZXJ0OmZ1bmN0aW9uKGEpe30sZ2V0RGF0YUV4dGVudDpmdW5jdGlvbigpe3ZhciBhPW51bGwsYj10aGlzLmZlYXR1cmVzO2lmKGImJjA8Yi5sZW5ndGgpZm9yKHZhciBjPW51bGwsZD0wLGU9Yi5sZW5ndGg7ZDxlO2QrKylpZihjPWJbZF0uZ2VvbWV0cnkpbnVsbD09PWEmJgooYT1uZXcgT3BlbkxheWVycy5Cb3VuZHMpLGEuZXh0ZW5kKGMuZ2V0Qm91bmRzKCkpO3JldHVybiBhfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkxheWVyLlZlY3RvciJ9KTtPcGVuTGF5ZXJzLkxheWVyLlBvaW50R3JpZD1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuTGF5ZXIuVmVjdG9yLHtkeDpudWxsLGR5Om51bGwscmF0aW86MS41LG1heEZlYXR1cmVzOjI1MCxyb3RhdGlvbjowLG9yaWdpbjpudWxsLGdyaWRCb3VuZHM6bnVsbCxpbml0aWFsaXplOmZ1bmN0aW9uKGEpe2E9YXx8e307T3BlbkxheWVycy5MYXllci5WZWN0b3IucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxbYS5uYW1lLGFdKX0sc2V0TWFwOmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuTGF5ZXIuVmVjdG9yLnByb3RvdHlwZS5zZXRNYXAuYXBwbHkodGhpcyxhcmd1bWVudHMpO2EuZXZlbnRzLnJlZ2lzdGVyKCJtb3ZlZW5kIix0aGlzLHRoaXMub25Nb3ZlRW5kKX0scmVtb3ZlTWFwOmZ1bmN0aW9uKGEpe2EuZXZlbnRzLnVucmVnaXN0ZXIoIm1vdmVlbmQiLHRoaXMsdGhpcy5vbk1vdmVFbmQpO09wZW5MYXllcnMuTGF5ZXIuVmVjdG9yLnByb3RvdHlwZS5yZW1vdmVNYXAuYXBwbHkodGhpcywKYXJndW1lbnRzKX0sc2V0UmF0aW86ZnVuY3Rpb24oYSl7dGhpcy5yYXRpbz1hO3RoaXMudXBkYXRlR3JpZCghMCl9LHNldE1heEZlYXR1cmVzOmZ1bmN0aW9uKGEpe3RoaXMubWF4RmVhdHVyZXM9YTt0aGlzLnVwZGF0ZUdyaWQoITApfSxzZXRTcGFjaW5nOmZ1bmN0aW9uKGEsYil7dGhpcy5keD1hO3RoaXMuZHk9Ynx8YTt0aGlzLnVwZGF0ZUdyaWQoITApfSxzZXRPcmlnaW46ZnVuY3Rpb24oYSl7dGhpcy5vcmlnaW49YTt0aGlzLnVwZGF0ZUdyaWQoITApfSxnZXRPcmlnaW46ZnVuY3Rpb24oKXt0aGlzLm9yaWdpbnx8KHRoaXMub3JpZ2luPXRoaXMubWFwLmdldEV4dGVudCgpLmdldENlbnRlckxvbkxhdCgpKTtyZXR1cm4gdGhpcy5vcmlnaW59LHNldFJvdGF0aW9uOmZ1bmN0aW9uKGEpe3RoaXMucm90YXRpb249YTt0aGlzLnVwZGF0ZUdyaWQoITApfSxvbk1vdmVFbmQ6ZnVuY3Rpb24oKXt0aGlzLnVwZGF0ZUdyaWQoKX0sZ2V0Vmlld0JvdW5kczpmdW5jdGlvbigpe3ZhciBhPXRoaXMubWFwLmdldEV4dGVudCgpOwppZih0aGlzLnJvdGF0aW9uKXt2YXIgYj10aGlzLmdldE9yaWdpbigpLGI9bmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoYi5sb24sYi5sYXQpLGE9YS50b0dlb21ldHJ5KCk7YS5yb3RhdGUoLXRoaXMucm90YXRpb24sYik7YT1hLmdldEJvdW5kcygpfXJldHVybiBhfSx1cGRhdGVHcmlkOmZ1bmN0aW9uKGEpe2lmKGF8fHRoaXMuaW52YWxpZEJvdW5kcygpKXt2YXIgYj10aGlzLmdldFZpZXdCb3VuZHMoKSxjPXRoaXMuZ2V0T3JpZ2luKCk7YT1uZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludChjLmxvbixjLmxhdCk7dmFyIGQ9Yi5nZXRXaWR0aCgpLGU9Yi5nZXRIZWlnaHQoKSxmPWQvZSxnPU1hdGguc3FydCh0aGlzLmR4KnRoaXMuZHkqdGhpcy5tYXhGZWF0dXJlcy9mKSxkPU1hdGgubWluKGQqdGhpcy5yYXRpbyxnKmYpLGU9TWF0aC5taW4oZSp0aGlzLnJhdGlvLGcpLGI9Yi5nZXRDZW50ZXJMb25MYXQoKTt0aGlzLmdyaWRCb3VuZHM9bmV3IE9wZW5MYXllcnMuQm91bmRzKGIubG9uLQpkLzIsYi5sYXQtZS8yLGIubG9uK2QvMixiLmxhdCtlLzIpO2Zvcih2YXIgYj1NYXRoLmZsb29yKGUvdGhpcy5keSksZD1NYXRoLmZsb29yKGQvdGhpcy5keCksZT1jLmxvbit0aGlzLmR4Kk1hdGguY2VpbCgodGhpcy5ncmlkQm91bmRzLmxlZnQtYy5sb24pL3RoaXMuZHgpLGM9Yy5sYXQrdGhpcy5keSpNYXRoLmNlaWwoKHRoaXMuZ3JpZEJvdW5kcy5ib3R0b20tYy5sYXQpL3RoaXMuZHkpLGc9QXJyYXkoYipkKSxoLGs9MDtrPGQ7KytrKWZvcih2YXIgZj1lK2sqdGhpcy5keCxsPTA7bDxiOysrbCloPWMrbCp0aGlzLmR5LGg9bmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoZixoKSx0aGlzLnJvdGF0aW9uJiZoLnJvdGF0ZSh0aGlzLnJvdGF0aW9uLGEpLGdbaypiK2xdPW5ldyBPcGVuTGF5ZXJzLkZlYXR1cmUuVmVjdG9yKGgpO3RoaXMuZGVzdHJveUZlYXR1cmVzKHRoaXMuZmVhdHVyZXMse3NpbGVudDohMH0pO3RoaXMuYWRkRmVhdHVyZXMoZyx7c2lsZW50OiEwfSl9fSxpbnZhbGlkQm91bmRzOmZ1bmN0aW9uKCl7cmV0dXJuIXRoaXMuZ3JpZEJvdW5kc3x8CiF0aGlzLmdyaWRCb3VuZHMuY29udGFpbnNCb3VuZHModGhpcy5nZXRWaWV3Qm91bmRzKCkpfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkxheWVyLlBvaW50R3JpZCJ9KTtPcGVuTGF5ZXJzLkhhbmRsZXIuTW91c2VXaGVlbD1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuSGFuZGxlcix7d2hlZWxMaXN0ZW5lcjpudWxsLGludGVydmFsOjAsbWF4RGVsdGE6TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZLGRlbHRhOjAsY3VtdWxhdGl2ZTohMCxpbml0aWFsaXplOmZ1bmN0aW9uKGEsYixjKXtPcGVuTGF5ZXJzLkhhbmRsZXIucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMud2hlZWxMaXN0ZW5lcj1PcGVuTGF5ZXJzLkZ1bmN0aW9uLmJpbmRBc0V2ZW50TGlzdGVuZXIodGhpcy5vbldoZWVsRXZlbnQsdGhpcyl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXtPcGVuTGF5ZXJzLkhhbmRsZXIucHJvdG90eXBlLmRlc3Ryb3kuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMud2hlZWxMaXN0ZW5lcj1udWxsfSxvbldoZWVsRXZlbnQ6ZnVuY3Rpb24oYSl7aWYodGhpcy5tYXAmJnRoaXMuY2hlY2tNb2RpZmllcnMoYSkpe2Zvcih2YXIgYj0KITEsYz0hMSxkPSExLGU9T3BlbkxheWVycy5FdmVudC5lbGVtZW50KGEpO251bGwhPWUmJiFkJiYhYjspe2lmKCFiKXRyeXt2YXIgZixiPShmPWUuY3VycmVudFN0eWxlP2UuY3VycmVudFN0eWxlLm92ZXJmbG93OmRvY3VtZW50LmRlZmF1bHRWaWV3LmdldENvbXB1dGVkU3R5bGUoZSxudWxsKS5nZXRQcm9wZXJ0eVZhbHVlKCJvdmVyZmxvdyIpKSYmImF1dG8iPT1mfHwic2Nyb2xsIj09Zn1jYXRjaChnKXt9aWYoIWMmJihjPU9wZW5MYXllcnMuRWxlbWVudC5oYXNDbGFzcyhlLCJvbFNjcm9sbGFibGUiKSwhYykpZm9yKHZhciBkPTAsaD10aGlzLm1hcC5sYXllcnMubGVuZ3RoO2Q8aDtkKyspe3ZhciBrPXRoaXMubWFwLmxheWVyc1tkXTtpZihlPT1rLmRpdnx8ZT09ay5wYW5lKXtjPSEwO2JyZWFrfX1kPWU9PXRoaXMubWFwLmRpdjtlPWUucGFyZW50Tm9kZX1pZighYiYmZCl7aWYoYylpZihiPTAsYS53aGVlbERlbHRhPyhiPWEud2hlZWxEZWx0YSwwPT09YiUxNjAmJihiKj0wLjc1KSwKYi89MTIwKTphLmRldGFpbCYmKGI9LShhLmRldGFpbC9NYXRoLmFicyhhLmRldGFpbCkpKSx0aGlzLmRlbHRhKz1iLHdpbmRvdy5jbGVhclRpbWVvdXQodGhpcy5fdGltZW91dElkKSx0aGlzLmludGVydmFsJiZNYXRoLmFicyh0aGlzLmRlbHRhKTx0aGlzLm1heERlbHRhKXt2YXIgbD1PcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHt9LGEpO3RoaXMuX3RpbWVvdXRJZD13aW5kb3cuc2V0VGltZW91dChPcGVuTGF5ZXJzLkZ1bmN0aW9uLmJpbmQoZnVuY3Rpb24oKXt0aGlzLndoZWVsWm9vbShsKX0sdGhpcyksdGhpcy5pbnRlcnZhbCl9ZWxzZSB0aGlzLndoZWVsWm9vbShhKTtPcGVuTGF5ZXJzLkV2ZW50LnN0b3AoYSl9fX0sd2hlZWxab29tOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZGVsdGE7dGhpcy5kZWx0YT0wO2ImJihhLnh5PXRoaXMubWFwLmV2ZW50cy5nZXRNb3VzZVBvc2l0aW9uKGEpLDA+Yj90aGlzLmNhbGxiYWNrKCJkb3duIixbYSx0aGlzLmN1bXVsYXRpdmU/TWF0aC5tYXgoLXRoaXMubWF4RGVsdGEsCmIpOi0xXSk6dGhpcy5jYWxsYmFjaygidXAiLFthLHRoaXMuY3VtdWxhdGl2ZT9NYXRoLm1pbih0aGlzLm1heERlbHRhLGIpOjFdKSl9LGFjdGl2YXRlOmZ1bmN0aW9uKGEpe2lmKE9wZW5MYXllcnMuSGFuZGxlci5wcm90b3R5cGUuYWN0aXZhdGUuYXBwbHkodGhpcyxhcmd1bWVudHMpKXt2YXIgYj10aGlzLndoZWVsTGlzdGVuZXI7T3BlbkxheWVycy5FdmVudC5vYnNlcnZlKHdpbmRvdywiRE9NTW91c2VTY3JvbGwiLGIpO09wZW5MYXllcnMuRXZlbnQub2JzZXJ2ZSh3aW5kb3csIm1vdXNld2hlZWwiLGIpO09wZW5MYXllcnMuRXZlbnQub2JzZXJ2ZShkb2N1bWVudCwibW91c2V3aGVlbCIsYik7cmV0dXJuITB9cmV0dXJuITF9LGRlYWN0aXZhdGU6ZnVuY3Rpb24oYSl7aWYoT3BlbkxheWVycy5IYW5kbGVyLnByb3RvdHlwZS5kZWFjdGl2YXRlLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl7dmFyIGI9dGhpcy53aGVlbExpc3RlbmVyO09wZW5MYXllcnMuRXZlbnQuc3RvcE9ic2VydmluZyh3aW5kb3csCiJET01Nb3VzZVNjcm9sbCIsYik7T3BlbkxheWVycy5FdmVudC5zdG9wT2JzZXJ2aW5nKHdpbmRvdywibW91c2V3aGVlbCIsYik7T3BlbkxheWVycy5FdmVudC5zdG9wT2JzZXJ2aW5nKGRvY3VtZW50LCJtb3VzZXdoZWVsIixiKTtyZXR1cm4hMH1yZXR1cm4hMX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5IYW5kbGVyLk1vdXNlV2hlZWwifSk7T3BlbkxheWVycy5TeW1ib2xpemVyPU9wZW5MYXllcnMuQ2xhc3Moe3pJbmRleDowLGluaXRpYWxpemU6ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5VdGlsLmV4dGVuZCh0aGlzLGEpfSxjbG9uZTpmdW5jdGlvbigpe3JldHVybiBuZXcgKGV2YWwodGhpcy5DTEFTU19OQU1FKSkoT3BlbkxheWVycy5VdGlsLmV4dGVuZCh7fSx0aGlzKSl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuU3ltYm9saXplciJ9KTtPcGVuTGF5ZXJzLlN5bWJvbGl6ZXIuUmFzdGVyPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5TeW1ib2xpemVyLHtpbml0aWFsaXplOmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuU3ltYm9saXplci5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuU3ltYm9saXplci5SYXN0ZXIifSk7T3BlbkxheWVycy5SdWxlPU9wZW5MYXllcnMuQ2xhc3Moe2lkOm51bGwsbmFtZTpudWxsLHRpdGxlOm51bGwsZGVzY3JpcHRpb246bnVsbCxjb250ZXh0Om51bGwsZmlsdGVyOm51bGwsZWxzZUZpbHRlcjohMSxzeW1ib2xpemVyOm51bGwsc3ltYm9saXplcnM6bnVsbCxtaW5TY2FsZURlbm9taW5hdG9yOm51bGwsbWF4U2NhbGVEZW5vbWluYXRvcjpudWxsLGluaXRpYWxpemU6ZnVuY3Rpb24oYSl7dGhpcy5zeW1ib2xpemVyPXt9O09wZW5MYXllcnMuVXRpbC5leHRlbmQodGhpcyxhKTt0aGlzLnN5bWJvbGl6ZXJzJiZkZWxldGUgdGhpcy5zeW1ib2xpemVyO3RoaXMuaWQ9T3BlbkxheWVycy5VdGlsLmNyZWF0ZVVuaXF1ZUlEKHRoaXMuQ0xBU1NfTkFNRSsiXyIpfSxkZXN0cm95OmZ1bmN0aW9uKCl7Zm9yKHZhciBhIGluIHRoaXMuc3ltYm9saXplcil0aGlzLnN5bWJvbGl6ZXJbYV09bnVsbDt0aGlzLnN5bWJvbGl6ZXI9bnVsbDtkZWxldGUgdGhpcy5zeW1ib2xpemVyc30sZXZhbHVhdGU6ZnVuY3Rpb24oYSl7dmFyIGI9CnRoaXMuZ2V0Q29udGV4dChhKSxjPSEwO2lmKHRoaXMubWluU2NhbGVEZW5vbWluYXRvcnx8dGhpcy5tYXhTY2FsZURlbm9taW5hdG9yKXZhciBkPWEubGF5ZXIubWFwLmdldFNjYWxlKCk7dGhpcy5taW5TY2FsZURlbm9taW5hdG9yJiYoYz1kPj1PcGVuTGF5ZXJzLlN0eWxlLmNyZWF0ZUxpdGVyYWwodGhpcy5taW5TY2FsZURlbm9taW5hdG9yLGIpKTtjJiZ0aGlzLm1heFNjYWxlRGVub21pbmF0b3ImJihjPWQ8T3BlbkxheWVycy5TdHlsZS5jcmVhdGVMaXRlcmFsKHRoaXMubWF4U2NhbGVEZW5vbWluYXRvcixiKSk7YyYmdGhpcy5maWx0ZXImJihjPSJPcGVuTGF5ZXJzLkZpbHRlci5GZWF0dXJlSWQiPT10aGlzLmZpbHRlci5DTEFTU19OQU1FP3RoaXMuZmlsdGVyLmV2YWx1YXRlKGEpOnRoaXMuZmlsdGVyLmV2YWx1YXRlKGIpKTtyZXR1cm4gY30sZ2V0Q29udGV4dDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNvbnRleHQ7Ynx8KGI9YS5hdHRyaWJ1dGVzfHxhLmRhdGEpOyJmdW5jdGlvbiI9PQp0eXBlb2YgdGhpcy5jb250ZXh0JiYoYj10aGlzLmNvbnRleHQoYSkpO3JldHVybiBifSxjbG9uZTpmdW5jdGlvbigpe3ZhciBhPU9wZW5MYXllcnMuVXRpbC5leHRlbmQoe30sdGhpcyk7aWYodGhpcy5zeW1ib2xpemVycyl7dmFyIGI9dGhpcy5zeW1ib2xpemVycy5sZW5ndGg7YS5zeW1ib2xpemVycz1BcnJheShiKTtmb3IodmFyIGM9MDtjPGI7KytjKWEuc3ltYm9saXplcnNbY109dGhpcy5zeW1ib2xpemVyc1tjXS5jbG9uZSgpfWVsc2V7YS5zeW1ib2xpemVyPXt9O2Zvcih2YXIgZCBpbiB0aGlzLnN5bWJvbGl6ZXIpYj10aGlzLnN5bWJvbGl6ZXJbZF0sYz10eXBlb2YgYiwib2JqZWN0Ij09PWM/YS5zeW1ib2xpemVyW2RdPU9wZW5MYXllcnMuVXRpbC5leHRlbmQoe30sYik6InN0cmluZyI9PT1jJiYoYS5zeW1ib2xpemVyW2RdPWIpfWEuZmlsdGVyPXRoaXMuZmlsdGVyJiZ0aGlzLmZpbHRlci5jbG9uZSgpO2EuY29udGV4dD10aGlzLmNvbnRleHQmJk9wZW5MYXllcnMuVXRpbC5leHRlbmQoe30sCnRoaXMuY29udGV4dCk7cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLlJ1bGUoYSl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuUnVsZSJ9KTtPcGVuTGF5ZXJzLkZvcm1hdC5TTEQ9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkZvcm1hdC5YTUwuVmVyc2lvbmVkT0dDLHtwcm9maWxlOm51bGwsZGVmYXVsdFZlcnNpb246IjEuMC4wIixzdHJpbmdpZnlPdXRwdXQ6ITAsbmFtZWRMYXllcnNBc0FycmF5OiExLENMQVNTX05BTUU6Ik9wZW5MYXllcnMuRm9ybWF0LlNMRCJ9KTtPcGVuTGF5ZXJzLlN5bWJvbGl6ZXIuUG9seWdvbj1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuU3ltYm9saXplcix7aW5pdGlhbGl6ZTpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLlN5bWJvbGl6ZXIucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLlN5bWJvbGl6ZXIuUG9seWdvbiJ9KTtPcGVuTGF5ZXJzLkZvcm1hdC5HTUwudjI9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkZvcm1hdC5HTUwuQmFzZSx7c2NoZW1hTG9jYXRpb246Imh0dHA6Ly93d3cub3Blbmdpcy5uZXQvZ21sIGh0dHA6Ly9zY2hlbWFzLm9wZW5naXMubmV0L2dtbC8yLjEuMi9mZWF0dXJlLnhzZCIsaW5pdGlhbGl6ZTpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLkZvcm1hdC5HTUwuQmFzZS5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLFthXSl9LHJlYWRlcnM6e2dtbDpPcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyh7b3V0ZXJCb3VuZGFyeUlzOmZ1bmN0aW9uKGEsYil7dmFyIGM9e307dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGMpO2Iub3V0ZXI9Yy5jb21wb25lbnRzWzBdfSxpbm5lckJvdW5kYXJ5SXM6ZnVuY3Rpb24oYSxiKXt2YXIgYz17fTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYyk7Yi5pbm5lci5wdXNoKGMuY29tcG9uZW50c1swXSl9LEJveDpmdW5jdGlvbihhLGIpe3ZhciBjPQp7fTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYyk7Yi5jb21wb25lbnRzfHwoYi5jb21wb25lbnRzPVtdKTt2YXIgZD1jLnBvaW50c1swXSxjPWMucG9pbnRzWzFdO2IuY29tcG9uZW50cy5wdXNoKG5ldyBPcGVuTGF5ZXJzLkJvdW5kcyhkLngsZC55LGMueCxjLnkpKX19LE9wZW5MYXllcnMuRm9ybWF0LkdNTC5CYXNlLnByb3RvdHlwZS5yZWFkZXJzLmdtbCksZmVhdHVyZTpPcGVuTGF5ZXJzLkZvcm1hdC5HTUwuQmFzZS5wcm90b3R5cGUucmVhZGVycy5mZWF0dXJlLHdmczpPcGVuTGF5ZXJzLkZvcm1hdC5HTUwuQmFzZS5wcm90b3R5cGUucmVhZGVycy53ZnN9LHdyaXRlOmZ1bmN0aW9uKGEpe3ZhciBiO2I9T3BlbkxheWVycy5VdGlsLmlzQXJyYXkoYSk/IndmczpGZWF0dXJlQ29sbGVjdGlvbiI6ImdtbDpmZWF0dXJlTWVtYmVyIjthPXRoaXMud3JpdGVOb2RlKGIsYSk7dGhpcy5zZXRBdHRyaWJ1dGVOUyhhLHRoaXMubmFtZXNwYWNlcy54c2ksInhzaTpzY2hlbWFMb2NhdGlvbiIsdGhpcy5zY2hlbWFMb2NhdGlvbik7CnJldHVybiBPcGVuTGF5ZXJzLkZvcm1hdC5YTUwucHJvdG90eXBlLndyaXRlLmFwcGx5KHRoaXMsW2FdKX0sd3JpdGVyczp7Z21sOk9wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKHtQb2ludDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoImdtbDpQb2ludCIpO3RoaXMud3JpdGVOb2RlKCJjb29yZGluYXRlcyIsW2FdLGIpO3JldHVybiBifSxjb29yZGluYXRlczpmdW5jdGlvbihhKXtmb3IodmFyIGI9YS5sZW5ndGgsYz1BcnJheShiKSxkLGU9MDtlPGI7KytlKWQ9YVtlXSxjW2VdPXRoaXMueHk/ZC54KyIsIitkLnk6ZC55KyIsIitkLngsdm9pZCAwIT1kLnomJihjW2VdKz0iLCIrZC56KTtyZXR1cm4gdGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJnbWw6Y29vcmRpbmF0ZXMiLHthdHRyaWJ1dGVzOntkZWNpbWFsOiIuIixjczoiLCIsdHM6IiAifSx2YWx1ZToxPT1iP2NbMF06Yy5qb2luKCIgIil9KX0sTGluZVN0cmluZzpmdW5jdGlvbihhKXt2YXIgYj0KdGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJnbWw6TGluZVN0cmluZyIpO3RoaXMud3JpdGVOb2RlKCJjb29yZGluYXRlcyIsYS5jb21wb25lbnRzLGIpO3JldHVybiBifSxQb2x5Z29uOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygiZ21sOlBvbHlnb24iKTt0aGlzLndyaXRlTm9kZSgib3V0ZXJCb3VuZGFyeUlzIixhLmNvbXBvbmVudHNbMF0sYik7Zm9yKHZhciBjPTE7YzxhLmNvbXBvbmVudHMubGVuZ3RoOysrYyl0aGlzLndyaXRlTm9kZSgiaW5uZXJCb3VuZGFyeUlzIixhLmNvbXBvbmVudHNbY10sYik7cmV0dXJuIGJ9LG91dGVyQm91bmRhcnlJczpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoImdtbDpvdXRlckJvdW5kYXJ5SXMiKTt0aGlzLndyaXRlTm9kZSgiTGluZWFyUmluZyIsYSxiKTtyZXR1cm4gYn0saW5uZXJCb3VuZGFyeUlzOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygiZ21sOmlubmVyQm91bmRhcnlJcyIpOwp0aGlzLndyaXRlTm9kZSgiTGluZWFyUmluZyIsYSxiKTtyZXR1cm4gYn0sTGluZWFyUmluZzpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoImdtbDpMaW5lYXJSaW5nIik7dGhpcy53cml0ZU5vZGUoImNvb3JkaW5hdGVzIixhLmNvbXBvbmVudHMsYik7cmV0dXJuIGJ9LEJveDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoImdtbDpCb3giKTt0aGlzLndyaXRlTm9kZSgiY29vcmRpbmF0ZXMiLFt7eDphLmxlZnQseTphLmJvdHRvbX0se3g6YS5yaWdodCx5OmEudG9wfV0sYik7dGhpcy5zcnNOYW1lJiZiLnNldEF0dHJpYnV0ZSgic3JzTmFtZSIsdGhpcy5zcnNOYW1lKTtyZXR1cm4gYn19LE9wZW5MYXllcnMuRm9ybWF0LkdNTC5CYXNlLnByb3RvdHlwZS53cml0ZXJzLmdtbCksZmVhdHVyZTpPcGVuTGF5ZXJzLkZvcm1hdC5HTUwuQmFzZS5wcm90b3R5cGUud3JpdGVycy5mZWF0dXJlLHdmczpPcGVuTGF5ZXJzLkZvcm1hdC5HTUwuQmFzZS5wcm90b3R5cGUud3JpdGVycy53ZnN9LApDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkZvcm1hdC5HTUwudjIifSk7T3BlbkxheWVycy5Gb3JtYXQuRmlsdGVyLnYxXzBfMD1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuRm9ybWF0LkdNTC52MixPcGVuTGF5ZXJzLkZvcm1hdC5GaWx0ZXIudjEse1ZFUlNJT046IjEuMC4wIixzY2hlbWFMb2NhdGlvbjoiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9vZ2MvZmlsdGVyLzEuMC4wL2ZpbHRlci54c2QiLGluaXRpYWxpemU6ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5Gb3JtYXQuR01MLnYyLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsW2FdKX0scmVhZGVyczp7b2djOk9wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKHtQcm9wZXJ0eUlzRXF1YWxUbzpmdW5jdGlvbihhLGIpe3ZhciBjPW5ldyBPcGVuTGF5ZXJzLkZpbHRlci5Db21wYXJpc29uKHt0eXBlOk9wZW5MYXllcnMuRmlsdGVyLkNvbXBhcmlzb24uRVFVQUxfVE99KTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYyk7Yi5maWx0ZXJzLnB1c2goYyl9LFByb3BlcnR5SXNOb3RFcXVhbFRvOmZ1bmN0aW9uKGEsCmIpe3ZhciBjPW5ldyBPcGVuTGF5ZXJzLkZpbHRlci5Db21wYXJpc29uKHt0eXBlOk9wZW5MYXllcnMuRmlsdGVyLkNvbXBhcmlzb24uTk9UX0VRVUFMX1RPfSk7dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGMpO2IuZmlsdGVycy5wdXNoKGMpfSxQcm9wZXJ0eUlzTGlrZTpmdW5jdGlvbihhLGIpe3ZhciBjPW5ldyBPcGVuTGF5ZXJzLkZpbHRlci5Db21wYXJpc29uKHt0eXBlOk9wZW5MYXllcnMuRmlsdGVyLkNvbXBhcmlzb24uTElLRX0pO3RoaXMucmVhZENoaWxkTm9kZXMoYSxjKTt2YXIgZD1hLmdldEF0dHJpYnV0ZSgid2lsZENhcmQiKSxlPWEuZ2V0QXR0cmlidXRlKCJzaW5nbGVDaGFyIiksZj1hLmdldEF0dHJpYnV0ZSgiZXNjYXBlIik7Yy52YWx1ZTJyZWdleChkLGUsZik7Yi5maWx0ZXJzLnB1c2goYyl9fSxPcGVuTGF5ZXJzLkZvcm1hdC5GaWx0ZXIudjEucHJvdG90eXBlLnJlYWRlcnMub2djKSxnbWw6T3BlbkxheWVycy5Gb3JtYXQuR01MLnYyLnByb3RvdHlwZS5yZWFkZXJzLmdtbCwKZmVhdHVyZTpPcGVuTGF5ZXJzLkZvcm1hdC5HTUwudjIucHJvdG90eXBlLnJlYWRlcnMuZmVhdHVyZX0sd3JpdGVyczp7b2djOk9wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKHtQcm9wZXJ0eUlzRXF1YWxUbzpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoIm9nYzpQcm9wZXJ0eUlzRXF1YWxUbyIpO3RoaXMud3JpdGVOb2RlKCJQcm9wZXJ0eU5hbWUiLGEsYik7dGhpcy53cml0ZU9nY0V4cHJlc3Npb24oYS52YWx1ZSxiKTtyZXR1cm4gYn0sUHJvcGVydHlJc05vdEVxdWFsVG86ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJvZ2M6UHJvcGVydHlJc05vdEVxdWFsVG8iKTt0aGlzLndyaXRlTm9kZSgiUHJvcGVydHlOYW1lIixhLGIpO3RoaXMud3JpdGVPZ2NFeHByZXNzaW9uKGEudmFsdWUsYik7cmV0dXJuIGJ9LFByb3BlcnR5SXNMaWtlOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygib2djOlByb3BlcnR5SXNMaWtlIiwKe2F0dHJpYnV0ZXM6e3dpbGRDYXJkOiIqIixzaW5nbGVDaGFyOiIuIixlc2NhcGU6IiEifX0pO3RoaXMud3JpdGVOb2RlKCJQcm9wZXJ0eU5hbWUiLGEsYik7dGhpcy53cml0ZU5vZGUoIkxpdGVyYWwiLGEucmVnZXgydmFsdWUoKSxiKTtyZXR1cm4gYn0sQkJPWDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoIm9nYzpCQk9YIik7YS5wcm9wZXJ0eSYmdGhpcy53cml0ZU5vZGUoIlByb3BlcnR5TmFtZSIsYSxiKTt2YXIgYz10aGlzLndyaXRlTm9kZSgiZ21sOkJveCIsYS52YWx1ZSxiKTthLnByb2plY3Rpb24mJmMuc2V0QXR0cmlidXRlKCJzcnNOYW1lIixhLnByb2plY3Rpb24pO3JldHVybiBifX0sT3BlbkxheWVycy5Gb3JtYXQuRmlsdGVyLnYxLnByb3RvdHlwZS53cml0ZXJzLm9nYyksZ21sOk9wZW5MYXllcnMuRm9ybWF0LkdNTC52Mi5wcm90b3R5cGUud3JpdGVycy5nbWwsZmVhdHVyZTpPcGVuTGF5ZXJzLkZvcm1hdC5HTUwudjIucHJvdG90eXBlLndyaXRlcnMuZmVhdHVyZX0sCndyaXRlU3BhdGlhbDpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygib2djOiIrYik7dGhpcy53cml0ZU5vZGUoIlByb3BlcnR5TmFtZSIsYSxjKTtpZihhLnZhbHVlIGluc3RhbmNlb2YgT3BlbkxheWVycy5GaWx0ZXIuRnVuY3Rpb24pdGhpcy53cml0ZU5vZGUoIkZ1bmN0aW9uIixhLnZhbHVlLGMpO2Vsc2V7dmFyIGQ7ZD1hLnZhbHVlIGluc3RhbmNlb2YgT3BlbkxheWVycy5HZW9tZXRyeT90aGlzLndyaXRlTm9kZSgiZmVhdHVyZTpfZ2VvbWV0cnkiLGEudmFsdWUpLmZpcnN0Q2hpbGQ6dGhpcy53cml0ZU5vZGUoImdtbDpCb3giLGEudmFsdWUpO2EucHJvamVjdGlvbiYmZC5zZXRBdHRyaWJ1dGUoInNyc05hbWUiLGEucHJvamVjdGlvbik7Yy5hcHBlbmRDaGlsZChkKX1yZXR1cm4gY30sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Gb3JtYXQuRmlsdGVyLnYxXzBfMCJ9KTtPcGVuTGF5ZXJzLkZvcm1hdC5XRlNULnYxXzBfMD1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuRm9ybWF0LkZpbHRlci52MV8wXzAsT3BlbkxheWVycy5Gb3JtYXQuV0ZTVC52MSx7dmVyc2lvbjoiMS4wLjAiLHNyc05hbWVJblF1ZXJ5OiExLHNjaGVtYUxvY2F0aW9uczp7d2ZzOiJodHRwOi8vc2NoZW1hcy5vcGVuZ2lzLm5ldC93ZnMvMS4wLjAvV0ZTLXRyYW5zYWN0aW9uLnhzZCJ9LGluaXRpYWxpemU6ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5Gb3JtYXQuRmlsdGVyLnYxXzBfMC5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLFthXSk7T3BlbkxheWVycy5Gb3JtYXQuV0ZTVC52MS5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLFthXSl9LHJlYWROb2RlOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gT3BlbkxheWVycy5Gb3JtYXQuR01MLnYyLnByb3RvdHlwZS5yZWFkTm9kZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LHJlYWRlcnM6e3dmczpPcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyh7V0ZTX1RyYW5zYWN0aW9uUmVzcG9uc2U6ZnVuY3Rpb24oYSwKYil7Yi5pbnNlcnRJZHM9W107Yi5zdWNjZXNzPSExO3RoaXMucmVhZENoaWxkTm9kZXMoYSxiKX0sSW5zZXJ0UmVzdWx0OmZ1bmN0aW9uKGEsYil7dmFyIGM9e2ZpZHM6W119O3RoaXMucmVhZENoaWxkTm9kZXMoYSxjKTtiLmluc2VydElkcz1iLmluc2VydElkcy5jb25jYXQoYy5maWRzKX0sVHJhbnNhY3Rpb25SZXN1bHQ6ZnVuY3Rpb24oYSxiKXt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYil9LFN0YXR1czpmdW5jdGlvbihhLGIpe3RoaXMucmVhZENoaWxkTm9kZXMoYSxiKX0sU1VDQ0VTUzpmdW5jdGlvbihhLGIpe2Iuc3VjY2Vzcz0hMH19LE9wZW5MYXllcnMuRm9ybWF0LldGU1QudjEucHJvdG90eXBlLnJlYWRlcnMud2ZzKSxnbWw6T3BlbkxheWVycy5Gb3JtYXQuR01MLnYyLnByb3RvdHlwZS5yZWFkZXJzLmdtbCxmZWF0dXJlOk9wZW5MYXllcnMuRm9ybWF0LkdNTC52Mi5wcm90b3R5cGUucmVhZGVycy5mZWF0dXJlLG9nYzpPcGVuTGF5ZXJzLkZvcm1hdC5GaWx0ZXIudjFfMF8wLnByb3RvdHlwZS5yZWFkZXJzLm9nY30sCndyaXRlcnM6e3dmczpPcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyh7UXVlcnk6ZnVuY3Rpb24oYSl7YT1PcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHtmZWF0dXJlTlM6dGhpcy5mZWF0dXJlTlMsZmVhdHVyZVByZWZpeDp0aGlzLmZlYXR1cmVQcmVmaXgsZmVhdHVyZVR5cGU6dGhpcy5mZWF0dXJlVHlwZSxzcnNOYW1lOnRoaXMuc3JzTmFtZSxzcnNOYW1lSW5RdWVyeTp0aGlzLnNyc05hbWVJblF1ZXJ5fSxhKTt2YXIgYj1hLmZlYXR1cmVQcmVmaXgsYz10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoIndmczpRdWVyeSIse2F0dHJpYnV0ZXM6e3R5cGVOYW1lOihiP2IrIjoiOiIiKSthLmZlYXR1cmVUeXBlfX0pO2Euc3JzTmFtZUluUXVlcnkmJmEuc3JzTmFtZSYmYy5zZXRBdHRyaWJ1dGUoInNyc05hbWUiLGEuc3JzTmFtZSk7YS5mZWF0dXJlTlMmJmMuc2V0QXR0cmlidXRlKCJ4bWxuczoiK2IsYS5mZWF0dXJlTlMpO2lmKGEucHJvcGVydHlOYW1lcylmb3IodmFyIGI9MCxkPWEucHJvcGVydHlOYW1lcy5sZW5ndGg7YjwKZDtiKyspdGhpcy53cml0ZU5vZGUoIm9nYzpQcm9wZXJ0eU5hbWUiLHtwcm9wZXJ0eTphLnByb3BlcnR5TmFtZXNbYl19LGMpO2EuZmlsdGVyJiYodGhpcy5zZXRGaWx0ZXJQcm9wZXJ0eShhLmZpbHRlciksdGhpcy53cml0ZU5vZGUoIm9nYzpGaWx0ZXIiLGEuZmlsdGVyLGMpKTtyZXR1cm4gY319LE9wZW5MYXllcnMuRm9ybWF0LldGU1QudjEucHJvdG90eXBlLndyaXRlcnMud2ZzKSxnbWw6T3BlbkxheWVycy5Gb3JtYXQuR01MLnYyLnByb3RvdHlwZS53cml0ZXJzLmdtbCxmZWF0dXJlOk9wZW5MYXllcnMuRm9ybWF0LkdNTC52Mi5wcm90b3R5cGUud3JpdGVycy5mZWF0dXJlLG9nYzpPcGVuTGF5ZXJzLkZvcm1hdC5GaWx0ZXIudjFfMF8wLnByb3RvdHlwZS53cml0ZXJzLm9nY30sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Gb3JtYXQuV0ZTVC52MV8wXzAifSk7T3BlbkxheWVycy5FbGVtZW50c0luZGV4ZXI9T3BlbkxheWVycy5DbGFzcyh7bWF4WkluZGV4Om51bGwsb3JkZXI6bnVsbCxpbmRpY2VzOm51bGwsY29tcGFyZTpudWxsLGluaXRpYWxpemU6ZnVuY3Rpb24oYSl7dGhpcy5jb21wYXJlPWE/T3BlbkxheWVycy5FbGVtZW50c0luZGV4ZXIuSW5kZXhpbmdNZXRob2RzLlpfT1JERVJfWV9PUkRFUjpPcGVuTGF5ZXJzLkVsZW1lbnRzSW5kZXhlci5JbmRleGluZ01ldGhvZHMuWl9PUkRFUl9EUkFXSU5HX09SREVSO3RoaXMuY2xlYXIoKX0saW5zZXJ0OmZ1bmN0aW9uKGEpe3RoaXMuZXhpc3RzKGEpJiZ0aGlzLnJlbW92ZShhKTt2YXIgYj1hLmlkO3RoaXMuZGV0ZXJtaW5lWkluZGV4KGEpO2Zvcih2YXIgYz0tMSxkPXRoaXMub3JkZXIubGVuZ3RoLGU7MTxkLWM7KWU9cGFyc2VJbnQoKGMrZCkvMiksMDx0aGlzLmNvbXBhcmUodGhpcyxhLE9wZW5MYXllcnMuVXRpbC5nZXRFbGVtZW50KHRoaXMub3JkZXJbZV0pKT9jPWU6ZD1lO3RoaXMub3JkZXIuc3BsaWNlKGQsCjAsYik7dGhpcy5pbmRpY2VzW2JdPXRoaXMuZ2V0WkluZGV4KGEpO3JldHVybiB0aGlzLmdldE5leHRFbGVtZW50KGQpfSxyZW1vdmU6ZnVuY3Rpb24oYSl7YT1hLmlkO3ZhciBiPU9wZW5MYXllcnMuVXRpbC5pbmRleE9mKHRoaXMub3JkZXIsYSk7MDw9YiYmKHRoaXMub3JkZXIuc3BsaWNlKGIsMSksZGVsZXRlIHRoaXMuaW5kaWNlc1thXSx0aGlzLm1heFpJbmRleD0wPHRoaXMub3JkZXIubGVuZ3RoP3RoaXMuaW5kaWNlc1t0aGlzLm9yZGVyW3RoaXMub3JkZXIubGVuZ3RoLTFdXTowKX0sY2xlYXI6ZnVuY3Rpb24oKXt0aGlzLm9yZGVyPVtdO3RoaXMuaW5kaWNlcz17fTt0aGlzLm1heFpJbmRleD0wfSxleGlzdHM6ZnVuY3Rpb24oYSl7cmV0dXJuIG51bGwhPXRoaXMuaW5kaWNlc1thLmlkXX0sZ2V0WkluZGV4OmZ1bmN0aW9uKGEpe3JldHVybiBhLl9zdHlsZS5ncmFwaGljWkluZGV4fSxkZXRlcm1pbmVaSW5kZXg6ZnVuY3Rpb24oYSl7dmFyIGI9YS5fc3R5bGUuZ3JhcGhpY1pJbmRleDsKbnVsbD09Yj8oYj10aGlzLm1heFpJbmRleCxhLl9zdHlsZS5ncmFwaGljWkluZGV4PWIpOmI+dGhpcy5tYXhaSW5kZXgmJih0aGlzLm1heFpJbmRleD1iKX0sZ2V0TmV4dEVsZW1lbnQ6ZnVuY3Rpb24oYSl7YSs9MTtpZihhPHRoaXMub3JkZXIubGVuZ3RoKXt2YXIgYj1PcGVuTGF5ZXJzLlV0aWwuZ2V0RWxlbWVudCh0aGlzLm9yZGVyW2FdKTt2b2lkIDA9PWImJihiPXRoaXMuZ2V0TmV4dEVsZW1lbnQoYSkpO3JldHVybiBifXJldHVybiBudWxsfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkVsZW1lbnRzSW5kZXhlciJ9KTsKT3BlbkxheWVycy5FbGVtZW50c0luZGV4ZXIuSW5kZXhpbmdNZXRob2RzPXtaX09SREVSOmZ1bmN0aW9uKGEsYixjKXtiPWEuZ2V0WkluZGV4KGIpO3ZhciBkPTA7YyYmKGE9YS5nZXRaSW5kZXgoYyksZD1iLWEpO3JldHVybiBkfSxaX09SREVSX0RSQVdJTkdfT1JERVI6ZnVuY3Rpb24oYSxiLGMpe2E9T3BlbkxheWVycy5FbGVtZW50c0luZGV4ZXIuSW5kZXhpbmdNZXRob2RzLlpfT1JERVIoYSxiLGMpO2MmJjA9PWEmJihhPTEpO3JldHVybiBhfSxaX09SREVSX1lfT1JERVI6ZnVuY3Rpb24oYSxiLGMpe2E9T3BlbkxheWVycy5FbGVtZW50c0luZGV4ZXIuSW5kZXhpbmdNZXRob2RzLlpfT1JERVIoYSxiLGMpO2MmJjA9PT1hJiYoYj1jLl9ib3VuZHNCb3R0b20tYi5fYm91bmRzQm90dG9tLGE9MD09PWI/MTpiKTtyZXR1cm4gYX19OwpPcGVuTGF5ZXJzLlJlbmRlcmVyLkVsZW1lbnRzPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5SZW5kZXJlcix7cmVuZGVyZXJSb290Om51bGwscm9vdDpudWxsLHZlY3RvclJvb3Q6bnVsbCx0ZXh0Um9vdDpudWxsLHhtbG5zOm51bGwseE9mZnNldDowLGluZGV4ZXI6bnVsbCxCQUNLR1JPVU5EX0lEX1NVRkZJWDoiX2JhY2tncm91bmQiLExBQkVMX0lEX1NVRkZJWDoiX2xhYmVsIixMQUJFTF9PVVRMSU5FX1NVRkZJWDoiX291dGxpbmUiLGluaXRpYWxpemU6ZnVuY3Rpb24oYSxiKXtPcGVuTGF5ZXJzLlJlbmRlcmVyLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLnJlbmRlcmVyUm9vdD10aGlzLmNyZWF0ZVJlbmRlclJvb3QoKTt0aGlzLnJvb3Q9dGhpcy5jcmVhdGVSb290KCJfcm9vdCIpO3RoaXMudmVjdG9yUm9vdD10aGlzLmNyZWF0ZVJvb3QoIl92cm9vdCIpO3RoaXMudGV4dFJvb3Q9dGhpcy5jcmVhdGVSb290KCJfdHJvb3QiKTt0aGlzLnJvb3QuYXBwZW5kQ2hpbGQodGhpcy52ZWN0b3JSb290KTsKdGhpcy5yb290LmFwcGVuZENoaWxkKHRoaXMudGV4dFJvb3QpO3RoaXMucmVuZGVyZXJSb290LmFwcGVuZENoaWxkKHRoaXMucm9vdCk7dGhpcy5jb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5yZW5kZXJlclJvb3QpO2ImJihiLnpJbmRleGluZ3x8Yi55T3JkZXJpbmcpJiYodGhpcy5pbmRleGVyPW5ldyBPcGVuTGF5ZXJzLkVsZW1lbnRzSW5kZXhlcihiLnlPcmRlcmluZykpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5jbGVhcigpO3RoaXMueG1sbnM9dGhpcy5yb290PXRoaXMucmVuZGVyZXJSb290PW51bGw7T3BlbkxheWVycy5SZW5kZXJlci5wcm90b3R5cGUuZGVzdHJveS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGNsZWFyOmZ1bmN0aW9uKCl7dmFyIGEsYj10aGlzLnZlY3RvclJvb3Q7aWYoYilmb3IoO2E9Yi5maXJzdENoaWxkOyliLnJlbW92ZUNoaWxkKGEpO2lmKGI9dGhpcy50ZXh0Um9vdClmb3IoO2E9Yi5maXJzdENoaWxkOyliLnJlbW92ZUNoaWxkKGEpO3RoaXMuaW5kZXhlciYmCnRoaXMuaW5kZXhlci5jbGVhcigpfSxzZXRFeHRlbnQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz1PcGVuTGF5ZXJzLlJlbmRlcmVyLnByb3RvdHlwZS5zZXRFeHRlbnQuYXBwbHkodGhpcyxhcmd1bWVudHMpLGQ9dGhpcy5nZXRSZXNvbHV0aW9uKCk7aWYodGhpcy5tYXAuYmFzZUxheWVyJiZ0aGlzLm1hcC5iYXNlTGF5ZXIud3JhcERhdGVMaW5lKXt2YXIgZSxmPWEuZ2V0V2lkdGgoKS90aGlzLm1hcC5nZXRFeHRlbnQoKS5nZXRXaWR0aCgpO2E9YS5zY2FsZSgxL2YpO2Y9dGhpcy5tYXAuZ2V0TWF4RXh0ZW50KCk7Zi5yaWdodD5hLmxlZnQmJmYucmlnaHQ8YS5yaWdodD9lPSEwOmYubGVmdD5hLmxlZnQmJmYubGVmdDxhLnJpZ2h0JiYoZT0hMSk7aWYoZSE9PXRoaXMucmlnaHRPZkRhdGVMaW5lfHxiKWM9ITEsdGhpcy54T2Zmc2V0PSEwPT09ZT9mLmdldFdpZHRoKCkvZDowO3RoaXMucmlnaHRPZkRhdGVMaW5lPWV9cmV0dXJuIGN9LGdldE5vZGVUeXBlOmZ1bmN0aW9uKGEsYil7fSxkcmF3R2VvbWV0cnk6ZnVuY3Rpb24oYSwKYixjKXt2YXIgZD1hLkNMQVNTX05BTUUsZT0hMDtpZigiT3BlbkxheWVycy5HZW9tZXRyeS5Db2xsZWN0aW9uIj09ZHx8Ik9wZW5MYXllcnMuR2VvbWV0cnkuTXVsdGlQb2ludCI9PWR8fCJPcGVuTGF5ZXJzLkdlb21ldHJ5Lk11bHRpTGluZVN0cmluZyI9PWR8fCJPcGVuTGF5ZXJzLkdlb21ldHJ5Lk11bHRpUG9seWdvbiI9PWQpe2Zvcih2YXIgZD0wLGY9YS5jb21wb25lbnRzLmxlbmd0aDtkPGY7ZCsrKWU9dGhpcy5kcmF3R2VvbWV0cnkoYS5jb21wb25lbnRzW2RdLGIsYykmJmU7cmV0dXJuIGV9ZD1lPSExOyJub25lIiE9Yi5kaXNwbGF5JiYoYi5iYWNrZ3JvdW5kR3JhcGhpYz90aGlzLnJlZHJhd0JhY2tncm91bmROb2RlKGEuaWQsYSxiLGMpOmQ9ITAsZT10aGlzLnJlZHJhd05vZGUoYS5pZCxhLGIsYykpOyExPT1lJiYoYj1kb2N1bWVudC5nZXRFbGVtZW50QnlJZChhLmlkKSkmJihiLl9zdHlsZS5iYWNrZ3JvdW5kR3JhcGhpYyYmKGQ9ITApLGIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChiKSk7CmQmJihiPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGEuaWQrdGhpcy5CQUNLR1JPVU5EX0lEX1NVRkZJWCkpJiZiLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYik7cmV0dXJuIGV9LHJlZHJhd05vZGU6ZnVuY3Rpb24oYSxiLGMsZCl7Yz10aGlzLmFwcGx5RGVmYXVsdFN5bWJvbGl6ZXIoYyk7YT10aGlzLm5vZGVGYWN0b3J5KGEsdGhpcy5nZXROb2RlVHlwZShiLGMpKTthLl9mZWF0dXJlSWQ9ZDthLl9ib3VuZHNCb3R0b209Yi5nZXRCb3VuZHMoKS5ib3R0b207YS5fZ2VvbWV0cnlDbGFzcz1iLkNMQVNTX05BTUU7YS5fc3R5bGU9YztiPXRoaXMuZHJhd0dlb21ldHJ5Tm9kZShhLGIsYyk7aWYoITE9PT1iKXJldHVybiExO2E9Yi5ub2RlO3RoaXMuaW5kZXhlcj8oYz10aGlzLmluZGV4ZXIuaW5zZXJ0KGEpKT90aGlzLnZlY3RvclJvb3QuaW5zZXJ0QmVmb3JlKGEsYyk6dGhpcy52ZWN0b3JSb290LmFwcGVuZENoaWxkKGEpOmEucGFyZW50Tm9kZSE9PXRoaXMudmVjdG9yUm9vdCYmdGhpcy52ZWN0b3JSb290LmFwcGVuZENoaWxkKGEpOwp0aGlzLnBvc3REcmF3KGEpO3JldHVybiBiLmNvbXBsZXRlfSxyZWRyYXdCYWNrZ3JvdW5kTm9kZTpmdW5jdGlvbihhLGIsYyxkKXtjPU9wZW5MYXllcnMuVXRpbC5leHRlbmQoe30sYyk7Yy5leHRlcm5hbEdyYXBoaWM9Yy5iYWNrZ3JvdW5kR3JhcGhpYztjLmdyYXBoaWNYT2Zmc2V0PWMuYmFja2dyb3VuZFhPZmZzZXQ7Yy5ncmFwaGljWU9mZnNldD1jLmJhY2tncm91bmRZT2Zmc2V0O2MuZ3JhcGhpY1pJbmRleD1jLmJhY2tncm91bmRHcmFwaGljWkluZGV4O2MuZ3JhcGhpY1dpZHRoPWMuYmFja2dyb3VuZFdpZHRofHxjLmdyYXBoaWNXaWR0aDtjLmdyYXBoaWNIZWlnaHQ9Yy5iYWNrZ3JvdW5kSGVpZ2h0fHxjLmdyYXBoaWNIZWlnaHQ7Yy5iYWNrZ3JvdW5kR3JhcGhpYz1udWxsO2MuYmFja2dyb3VuZFhPZmZzZXQ9bnVsbDtjLmJhY2tncm91bmRZT2Zmc2V0PW51bGw7Yy5iYWNrZ3JvdW5kR3JhcGhpY1pJbmRleD1udWxsO3JldHVybiB0aGlzLnJlZHJhd05vZGUoYSt0aGlzLkJBQ0tHUk9VTkRfSURfU1VGRklYLApiLGMsbnVsbCl9LGRyYXdHZW9tZXRyeU5vZGU6ZnVuY3Rpb24oYSxiLGMpe2M9Y3x8YS5fc3R5bGU7dmFyIGQ9e2lzRmlsbGVkOnZvaWQgMD09PWMuZmlsbD8hMDpjLmZpbGwsaXNTdHJva2VkOnZvaWQgMD09PWMuc3Ryb2tlPyEhYy5zdHJva2VXaWR0aDpjLnN0cm9rZX0sZTtzd2l0Y2goYi5DTEFTU19OQU1FKXtjYXNlICJPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50IjohMT09PWMuZ3JhcGhpYyYmKGQuaXNGaWxsZWQ9ITEsZC5pc1N0cm9rZWQ9ITEpO2U9dGhpcy5kcmF3UG9pbnQoYSxiKTticmVhaztjYXNlICJPcGVuTGF5ZXJzLkdlb21ldHJ5LkxpbmVTdHJpbmciOmQuaXNGaWxsZWQ9ITE7ZT10aGlzLmRyYXdMaW5lU3RyaW5nKGEsYik7YnJlYWs7Y2FzZSAiT3BlbkxheWVycy5HZW9tZXRyeS5MaW5lYXJSaW5nIjplPXRoaXMuZHJhd0xpbmVhclJpbmcoYSxiKTticmVhaztjYXNlICJPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvbHlnb24iOmU9dGhpcy5kcmF3UG9seWdvbihhLGIpO2JyZWFrOwpjYXNlICJPcGVuTGF5ZXJzLkdlb21ldHJ5LlJlY3RhbmdsZSI6ZT10aGlzLmRyYXdSZWN0YW5nbGUoYSxiKX1hLl9vcHRpb25zPWQ7cmV0dXJuITEhPWU/e25vZGU6dGhpcy5zZXRTdHlsZShhLGMsZCxiKSxjb21wbGV0ZTplfTohMX0scG9zdERyYXc6ZnVuY3Rpb24oYSl7fSxkcmF3UG9pbnQ6ZnVuY3Rpb24oYSxiKXt9LGRyYXdMaW5lU3RyaW5nOmZ1bmN0aW9uKGEsYil7fSxkcmF3TGluZWFyUmluZzpmdW5jdGlvbihhLGIpe30sZHJhd1BvbHlnb246ZnVuY3Rpb24oYSxiKXt9LGRyYXdSZWN0YW5nbGU6ZnVuY3Rpb24oYSxiKXt9LGRyYXdDaXJjbGU6ZnVuY3Rpb24oYSxiKXt9LHJlbW92ZVRleHQ6ZnVuY3Rpb24oYSl7dmFyIGI9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYSt0aGlzLkxBQkVMX0lEX1NVRkZJWCk7YiYmdGhpcy50ZXh0Um9vdC5yZW1vdmVDaGlsZChiKTsoYT1kb2N1bWVudC5nZXRFbGVtZW50QnlJZChhK3RoaXMuTEFCRUxfT1VUTElORV9TVUZGSVgpKSYmdGhpcy50ZXh0Um9vdC5yZW1vdmVDaGlsZChhKX0sCmdldEZlYXR1cmVJZEZyb21FdmVudDpmdW5jdGlvbihhKXt2YXIgYj1hLnRhcmdldCxjPWImJmIuY29ycmVzcG9uZGluZ1VzZUVsZW1lbnQ7cmV0dXJuKGM/YzpifHxhLnNyY0VsZW1lbnQpLl9mZWF0dXJlSWR9LGVyYXNlR2VvbWV0cnk6ZnVuY3Rpb24oYSxiKXtpZigiT3BlbkxheWVycy5HZW9tZXRyeS5NdWx0aVBvaW50Ij09YS5DTEFTU19OQU1FfHwiT3BlbkxheWVycy5HZW9tZXRyeS5NdWx0aUxpbmVTdHJpbmciPT1hLkNMQVNTX05BTUV8fCJPcGVuTGF5ZXJzLkdlb21ldHJ5Lk11bHRpUG9seWdvbiI9PWEuQ0xBU1NfTkFNRXx8Ik9wZW5MYXllcnMuR2VvbWV0cnkuQ29sbGVjdGlvbiI9PWEuQ0xBU1NfTkFNRSlmb3IodmFyIGM9MCxkPWEuY29tcG9uZW50cy5sZW5ndGg7YzxkO2MrKyl0aGlzLmVyYXNlR2VvbWV0cnkoYS5jb21wb25lbnRzW2NdLGIpO2Vsc2UoYz1PcGVuTGF5ZXJzLlV0aWwuZ2V0RWxlbWVudChhLmlkKSkmJmMucGFyZW50Tm9kZSYmKGMuZ2VvbWV0cnkmJihjLmdlb21ldHJ5LmRlc3Ryb3koKSwKYy5nZW9tZXRyeT1udWxsKSxjLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYyksdGhpcy5pbmRleGVyJiZ0aGlzLmluZGV4ZXIucmVtb3ZlKGMpLGMuX3N0eWxlLmJhY2tncm91bmRHcmFwaGljJiYoYz1PcGVuTGF5ZXJzLlV0aWwuZ2V0RWxlbWVudChhLmlkK3RoaXMuQkFDS0dST1VORF9JRF9TVUZGSVgpKSYmYy5wYXJlbnROb2RlJiZjLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYykpfSxub2RlRmFjdG9yeTpmdW5jdGlvbihhLGIpe3ZhciBjPU9wZW5MYXllcnMuVXRpbC5nZXRFbGVtZW50KGEpO2M/dGhpcy5ub2RlVHlwZUNvbXBhcmUoYyxiKXx8KGMucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChjKSxjPXRoaXMubm9kZUZhY3RvcnkoYSxiKSk6Yz10aGlzLmNyZWF0ZU5vZGUoYixhKTtyZXR1cm4gY30sbm9kZVR5cGVDb21wYXJlOmZ1bmN0aW9uKGEsYil7fSxjcmVhdGVOb2RlOmZ1bmN0aW9uKGEsYil7fSxtb3ZlUm9vdDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLnJvb3Q7YS5yb290LnBhcmVudE5vZGU9PQp0aGlzLnJlbmRlcmVyUm9vdCYmKGI9YS5yb290KTtiLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYik7YS5yZW5kZXJlclJvb3QuYXBwZW5kQ2hpbGQoYil9LGdldFJlbmRlckxheWVySWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yb290LnBhcmVudE5vZGUucGFyZW50Tm9kZS5pZH0saXNDb21wbGV4U3ltYm9sOmZ1bmN0aW9uKGEpe3JldHVybiJjaXJjbGUiIT1hJiYhIWF9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuUmVuZGVyZXIuRWxlbWVudHMifSk7T3BlbkxheWVycy5Db250cm9sLkFyZ1BhcnNlcj1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuQ29udHJvbCx7Y2VudGVyOm51bGwsem9vbTpudWxsLGxheWVyczpudWxsLGRpc3BsYXlQcm9qZWN0aW9uOm51bGwsZ2V0UGFyYW1ldGVyczpmdW5jdGlvbihhKXthPWF8fHdpbmRvdy5sb2NhdGlvbi5ocmVmO3ZhciBiPU9wZW5MYXllcnMuVXRpbC5nZXRQYXJhbWV0ZXJzKGEpLGM9YS5pbmRleE9mKCIjIik7MDxjJiYoYT0iPyIrYS5zdWJzdHJpbmcoYysxLGEubGVuZ3RoKSxPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKGIsT3BlbkxheWVycy5VdGlsLmdldFBhcmFtZXRlcnMoYSkpKTtyZXR1cm4gYn0sc2V0TWFwOmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuc2V0TWFwLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtmb3IodmFyIGI9MCxjPXRoaXMubWFwLmNvbnRyb2xzLmxlbmd0aDtiPGM7YisrKXt2YXIgZD10aGlzLm1hcC5jb250cm9sc1tiXTtpZihkIT10aGlzJiYKIk9wZW5MYXllcnMuQ29udHJvbC5BcmdQYXJzZXIiPT1kLkNMQVNTX05BTUUpe2QuZGlzcGxheVByb2plY3Rpb24hPXRoaXMuZGlzcGxheVByb2plY3Rpb24mJih0aGlzLmRpc3BsYXlQcm9qZWN0aW9uPWQuZGlzcGxheVByb2plY3Rpb24pO2JyZWFrfX1iPT10aGlzLm1hcC5jb250cm9scy5sZW5ndGgmJihiPXRoaXMuZ2V0UGFyYW1ldGVycygpLGIubGF5ZXJzJiYodGhpcy5sYXllcnM9Yi5sYXllcnMsdGhpcy5tYXAuZXZlbnRzLnJlZ2lzdGVyKCJhZGRsYXllciIsdGhpcyx0aGlzLmNvbmZpZ3VyZUxheWVycyksdGhpcy5jb25maWd1cmVMYXllcnMoKSksYi5sYXQmJmIubG9uJiYodGhpcy5jZW50ZXI9bmV3IE9wZW5MYXllcnMuTG9uTGF0KHBhcnNlRmxvYXQoYi5sb24pLHBhcnNlRmxvYXQoYi5sYXQpKSxiLnpvb20mJih0aGlzLnpvb209cGFyc2VGbG9hdChiLnpvb20pKSx0aGlzLm1hcC5ldmVudHMucmVnaXN0ZXIoImNoYW5nZWJhc2VsYXllciIsdGhpcyx0aGlzLnNldENlbnRlciksCnRoaXMuc2V0Q2VudGVyKCkpKX0sc2V0Q2VudGVyOmZ1bmN0aW9uKCl7dGhpcy5tYXAuYmFzZUxheWVyJiYodGhpcy5tYXAuZXZlbnRzLnVucmVnaXN0ZXIoImNoYW5nZWJhc2VsYXllciIsdGhpcyx0aGlzLnNldENlbnRlciksdGhpcy5kaXNwbGF5UHJvamVjdGlvbiYmdGhpcy5jZW50ZXIudHJhbnNmb3JtKHRoaXMuZGlzcGxheVByb2plY3Rpb24sdGhpcy5tYXAuZ2V0UHJvamVjdGlvbk9iamVjdCgpKSx0aGlzLm1hcC5zZXRDZW50ZXIodGhpcy5jZW50ZXIsdGhpcy56b29tKSl9LGNvbmZpZ3VyZUxheWVyczpmdW5jdGlvbigpe2lmKHRoaXMubGF5ZXJzLmxlbmd0aD09dGhpcy5tYXAubGF5ZXJzLmxlbmd0aCl7dGhpcy5tYXAuZXZlbnRzLnVucmVnaXN0ZXIoImFkZGxheWVyIix0aGlzLHRoaXMuY29uZmlndXJlTGF5ZXJzKTtmb3IodmFyIGE9MCxiPXRoaXMubGF5ZXJzLmxlbmd0aDthPGI7YSsrKXt2YXIgYz10aGlzLm1hcC5sYXllcnNbYV0sZD10aGlzLmxheWVycy5jaGFyQXQoYSk7CiJCIj09ZD90aGlzLm1hcC5zZXRCYXNlTGF5ZXIoYyk6IlQiIT1kJiYiRiIhPWR8fGMuc2V0VmlzaWJpbGl0eSgiVCI9PWQpfX19LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuQ29udHJvbC5BcmdQYXJzZXIifSk7T3BlbkxheWVycy5Db250cm9sLlBlcm1hbGluaz1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuQ29udHJvbCx7YXJnUGFyc2VyQ2xhc3M6T3BlbkxheWVycy5Db250cm9sLkFyZ1BhcnNlcixlbGVtZW50Om51bGwsYW5jaG9yOiExLGJhc2U6IiIsZGlzcGxheVByb2plY3Rpb246bnVsbCxpbml0aWFsaXplOmZ1bmN0aW9uKGEsYixjKXtudWxsPT09YXx8Im9iamVjdCIhPXR5cGVvZiBhfHxPcGVuTGF5ZXJzLlV0aWwuaXNFbGVtZW50KGEpPyhPcGVuTGF5ZXJzLkNvbnRyb2wucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxbY10pLHRoaXMuZWxlbWVudD1PcGVuTGF5ZXJzLlV0aWwuZ2V0RWxlbWVudChhKSx0aGlzLmJhc2U9Ynx8ZG9jdW1lbnQubG9jYXRpb24uaHJlZik6KHRoaXMuYmFzZT1kb2N1bWVudC5sb2NhdGlvbi5ocmVmLE9wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLFthXSksbnVsbCE9dGhpcy5lbGVtZW50JiYodGhpcy5lbGVtZW50PQpPcGVuTGF5ZXJzLlV0aWwuZ2V0RWxlbWVudCh0aGlzLmVsZW1lbnQpKSl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmVsZW1lbnQmJnRoaXMuZWxlbWVudC5wYXJlbnROb2RlPT10aGlzLmRpdiYmKHRoaXMuZGl2LnJlbW92ZUNoaWxkKHRoaXMuZWxlbWVudCksdGhpcy5lbGVtZW50PW51bGwpO3RoaXMubWFwJiZ0aGlzLm1hcC5ldmVudHMudW5yZWdpc3RlcigibW92ZWVuZCIsdGhpcyx0aGlzLnVwZGF0ZUxpbmspO09wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuZGVzdHJveS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LHNldE1hcDpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLkNvbnRyb2wucHJvdG90eXBlLnNldE1hcC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7Zm9yKHZhciBiPTAsYz10aGlzLm1hcC5jb250cm9scy5sZW5ndGg7YjxjO2IrKyl7dmFyIGQ9dGhpcy5tYXAuY29udHJvbHNbYl07aWYoZC5DTEFTU19OQU1FPT10aGlzLmFyZ1BhcnNlckNsYXNzLkNMQVNTX05BTUUpe2QuZGlzcGxheVByb2plY3Rpb24hPQp0aGlzLmRpc3BsYXlQcm9qZWN0aW9uJiYodGhpcy5kaXNwbGF5UHJvamVjdGlvbj1kLmRpc3BsYXlQcm9qZWN0aW9uKTticmVha319Yj09dGhpcy5tYXAuY29udHJvbHMubGVuZ3RoJiZ0aGlzLm1hcC5hZGRDb250cm9sKG5ldyB0aGlzLmFyZ1BhcnNlckNsYXNzKHtkaXNwbGF5UHJvamVjdGlvbjp0aGlzLmRpc3BsYXlQcm9qZWN0aW9ufSkpfSxkcmF3OmZ1bmN0aW9uKCl7T3BlbkxheWVycy5Db250cm9sLnByb3RvdHlwZS5kcmF3LmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLmVsZW1lbnR8fHRoaXMuYW5jaG9yfHwodGhpcy5lbGVtZW50PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImEiKSx0aGlzLmVsZW1lbnQuaW5uZXJIVE1MPU9wZW5MYXllcnMuaTE4bigiUGVybWFsaW5rIiksdGhpcy5lbGVtZW50LmhyZWY9IiIsdGhpcy5kaXYuYXBwZW5kQ2hpbGQodGhpcy5lbGVtZW50KSk7dGhpcy5tYXAuZXZlbnRzLm9uKHttb3ZlZW5kOnRoaXMudXBkYXRlTGluayxjaGFuZ2VsYXllcjp0aGlzLnVwZGF0ZUxpbmssCmNoYW5nZWJhc2VsYXllcjp0aGlzLnVwZGF0ZUxpbmssc2NvcGU6dGhpc30pO3RoaXMudXBkYXRlTGluaygpO3JldHVybiB0aGlzLmRpdn0sdXBkYXRlTGluazpmdW5jdGlvbigpe3ZhciBhPXRoaXMuYW5jaG9yPyIjIjoiPyIsYj10aGlzLmJhc2UsYz1udWxsOy0xIT1iLmluZGV4T2YoIiMiKSYmITE9PXRoaXMuYW5jaG9yJiYoYz1iLnN1YnN0cmluZyhiLmluZGV4T2YoIiMiKSxiLmxlbmd0aCkpOy0xIT1iLmluZGV4T2YoYSkmJihiPWIuc3Vic3RyaW5nKDAsYi5pbmRleE9mKGEpKSk7Yj1iLnNwbGl0KCIjIilbMF0rYStPcGVuTGF5ZXJzLlV0aWwuZ2V0UGFyYW1ldGVyU3RyaW5nKHRoaXMuY3JlYXRlUGFyYW1zKCkpO2MmJihiKz1jKTt0aGlzLmFuY2hvciYmIXRoaXMuZWxlbWVudD93aW5kb3cubG9jYXRpb24uaHJlZj1iOnRoaXMuZWxlbWVudC5ocmVmPWJ9LGNyZWF0ZVBhcmFtczpmdW5jdGlvbihhLGIsYyl7YT1hfHx0aGlzLm1hcC5nZXRDZW50ZXIoKTt2YXIgZD1PcGVuTGF5ZXJzLlV0aWwuZ2V0UGFyYW1ldGVycyh0aGlzLmJhc2UpOwppZihhKWZvcihkLnpvb209Ynx8dGhpcy5tYXAuZ2V0Wm9vbSgpLGI9YS5sYXQsYT1hLmxvbix0aGlzLmRpc3BsYXlQcm9qZWN0aW9uJiYoYj1PcGVuTGF5ZXJzLlByb2plY3Rpb24udHJhbnNmb3JtKHt4OmEseTpifSx0aGlzLm1hcC5nZXRQcm9qZWN0aW9uT2JqZWN0KCksdGhpcy5kaXNwbGF5UHJvamVjdGlvbiksYT1iLngsYj1iLnkpLGQubGF0PU1hdGgucm91bmQoMUU1KmIpLzFFNSxkLmxvbj1NYXRoLnJvdW5kKDFFNSphKS8xRTUsYz1jfHx0aGlzLm1hcC5sYXllcnMsZC5sYXllcnM9IiIsYT0wLGI9Yy5sZW5ndGg7YTxiO2ErKyl7dmFyIGU9Y1thXTtkLmxheWVycz1lLmlzQmFzZUxheWVyP2QubGF5ZXJzKyhlPT10aGlzLm1hcC5iYXNlTGF5ZXI/IkIiOiIwIik6ZC5sYXllcnMrKGUuZ2V0VmlzaWJpbGl0eSgpPyJUIjoiRiIpfXJldHVybiBkfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkNvbnRyb2wuUGVybWFsaW5rIn0pO09wZW5MYXllcnMuTGF5ZXIuVE1TPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5MYXllci5HcmlkLHtzZXJ2aWNlVmVyc2lvbjoiMS4wLjAiLGxheWVybmFtZTpudWxsLHR5cGU6bnVsbCxpc0Jhc2VMYXllcjohMCx0aWxlT3JpZ2luOm51bGwsc2VydmVyUmVzb2x1dGlvbnM6bnVsbCx6b29tT2Zmc2V0OjAsaW5pdGlhbGl6ZTpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9W107ZC5wdXNoKGEsYix7fSxjKTtPcGVuTGF5ZXJzLkxheWVyLkdyaWQucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxkKX0sY2xvbmU6ZnVuY3Rpb24oYSl7bnVsbD09YSYmKGE9bmV3IE9wZW5MYXllcnMuTGF5ZXIuVE1TKHRoaXMubmFtZSx0aGlzLnVybCx0aGlzLmdldE9wdGlvbnMoKSkpO3JldHVybiBhPU9wZW5MYXllcnMuTGF5ZXIuR3JpZC5wcm90b3R5cGUuY2xvbmUuYXBwbHkodGhpcyxbYV0pfSxnZXRVUkw6ZnVuY3Rpb24oYSl7YT10aGlzLmFkanVzdEJvdW5kcyhhKTt2YXIgYj10aGlzLmdldFNlcnZlclJlc29sdXRpb24oKSwKYz1NYXRoLnJvdW5kKChhLmxlZnQtdGhpcy50aWxlT3JpZ2luLmxvbikvKGIqdGhpcy50aWxlU2l6ZS53KSk7YT1NYXRoLnJvdW5kKChhLmJvdHRvbS10aGlzLnRpbGVPcmlnaW4ubGF0KS8oYip0aGlzLnRpbGVTaXplLmgpKTtiPXRoaXMuZ2V0U2VydmVyWm9vbSgpO2M9dGhpcy5zZXJ2aWNlVmVyc2lvbisiLyIrdGhpcy5sYXllcm5hbWUrIi8iK2IrIi8iK2MrIi8iK2ErIi4iK3RoaXMudHlwZTthPXRoaXMudXJsO09wZW5MYXllcnMuVXRpbC5pc0FycmF5KGEpJiYoYT10aGlzLnNlbGVjdFVybChjLGEpKTtyZXR1cm4gYStjfSxzZXRNYXA6ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5MYXllci5HcmlkLnByb3RvdHlwZS5zZXRNYXAuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMudGlsZU9yaWdpbnx8KHRoaXMudGlsZU9yaWdpbj1uZXcgT3BlbkxheWVycy5Mb25MYXQodGhpcy5tYXAubWF4RXh0ZW50LmxlZnQsdGhpcy5tYXAubWF4RXh0ZW50LmJvdHRvbSkpfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkxheWVyLlRNUyJ9KTtPcGVuTGF5ZXJzLkZvcm1hdC5XQ1NDYXBhYmlsaXRpZXM9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkZvcm1hdC5YTUwuVmVyc2lvbmVkT0dDLHtkZWZhdWx0VmVyc2lvbjoiMS4xLjAiLENMQVNTX05BTUU6Ik9wZW5MYXllcnMuRm9ybWF0LldDU0NhcGFiaWxpdGllcyJ9KTtPcGVuTGF5ZXJzLkZvcm1hdC5XQ1NDYXBhYmlsaXRpZXMudjE9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkZvcm1hdC5YTUwse3JlZ0V4ZXM6e3RyaW1TcGFjZTovXlxzKnxccyokL2csc3BsaXRTcGFjZTovXHMrL30sZGVmYXVsdFByZWZpeDoid2NzIixyZWFkOmZ1bmN0aW9uKGEpeyJzdHJpbmciPT10eXBlb2YgYSYmKGE9T3BlbkxheWVycy5Gb3JtYXQuWE1MLnByb3RvdHlwZS5yZWFkLmFwcGx5KHRoaXMsW2FdKSk7YSYmOT09YS5ub2RlVHlwZSYmKGE9YS5kb2N1bWVudEVsZW1lbnQpO3ZhciBiPXt9O3RoaXMucmVhZE5vZGUoYSxiKTtyZXR1cm4gYn0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Gb3JtYXQuV0NTQ2FwYWJpbGl0aWVzLnYxIn0pO09wZW5MYXllcnMuRm9ybWF0LldDU0NhcGFiaWxpdGllcy52MV8wXzA9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkZvcm1hdC5XQ1NDYXBhYmlsaXRpZXMudjEse25hbWVzcGFjZXM6e3djczoiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC93Y3MiLHhsaW5rOiJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIix4c2k6Imh0dHA6Ly93d3cudzMub3JnLzIwMDEvWE1MU2NoZW1hLWluc3RhbmNlIixvd3M6Imh0dHA6Ly93d3cub3Blbmdpcy5uZXQvb3dzIn0sZXJyb3JQcm9wZXJ0eToic2VydmljZSIscmVhZGVyczp7d2NzOntXQ1NfQ2FwYWJpbGl0aWVzOmZ1bmN0aW9uKGEsYil7dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGIpfSxTZXJ2aWNlOmZ1bmN0aW9uKGEsYil7Yi5zZXJ2aWNlPXt9O3RoaXMucmVhZENoaWxkTm9kZXMoYSxiLnNlcnZpY2UpfSxuYW1lOmZ1bmN0aW9uKGEsYil7Yi5uYW1lPXRoaXMuZ2V0Q2hpbGRWYWx1ZShhKX0sbGFiZWw6ZnVuY3Rpb24oYSxiKXtiLmxhYmVsPQp0aGlzLmdldENoaWxkVmFsdWUoYSl9LGtleXdvcmRzOmZ1bmN0aW9uKGEsYil7Yi5rZXl3b3Jkcz1bXTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYi5rZXl3b3Jkcyl9LGtleXdvcmQ6ZnVuY3Rpb24oYSxiKXtiLnB1c2godGhpcy5nZXRDaGlsZFZhbHVlKGEpKX0scmVzcG9uc2libGVQYXJ0eTpmdW5jdGlvbihhLGIpe2IucmVzcG9uc2libGVQYXJ0eT17fTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYi5yZXNwb25zaWJsZVBhcnR5KX0saW5kaXZpZHVhbE5hbWU6ZnVuY3Rpb24oYSxiKXtiLmluZGl2aWR1YWxOYW1lPXRoaXMuZ2V0Q2hpbGRWYWx1ZShhKX0sb3JnYW5pc2F0aW9uTmFtZTpmdW5jdGlvbihhLGIpe2Iub3JnYW5pc2F0aW9uTmFtZT10aGlzLmdldENoaWxkVmFsdWUoYSl9LHBvc2l0aW9uTmFtZTpmdW5jdGlvbihhLGIpe2IucG9zaXRpb25OYW1lPXRoaXMuZ2V0Q2hpbGRWYWx1ZShhKX0sY29udGFjdEluZm86ZnVuY3Rpb24oYSxiKXtiLmNvbnRhY3RJbmZvPXt9O3RoaXMucmVhZENoaWxkTm9kZXMoYSwKYi5jb250YWN0SW5mbyl9LHBob25lOmZ1bmN0aW9uKGEsYil7Yi5waG9uZT17fTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYi5waG9uZSl9LHZvaWNlOmZ1bmN0aW9uKGEsYil7Yi52b2ljZT10aGlzLmdldENoaWxkVmFsdWUoYSl9LGZhY3NpbWlsZTpmdW5jdGlvbihhLGIpe2IuZmFjc2ltaWxlPXRoaXMuZ2V0Q2hpbGRWYWx1ZShhKX0sYWRkcmVzczpmdW5jdGlvbihhLGIpe2IuYWRkcmVzcz17fTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYi5hZGRyZXNzKX0sZGVsaXZlcnlQb2ludDpmdW5jdGlvbihhLGIpe2IuZGVsaXZlcnlQb2ludD10aGlzLmdldENoaWxkVmFsdWUoYSl9LGNpdHk6ZnVuY3Rpb24oYSxiKXtiLmNpdHk9dGhpcy5nZXRDaGlsZFZhbHVlKGEpfSxwb3N0YWxDb2RlOmZ1bmN0aW9uKGEsYil7Yi5wb3N0YWxDb2RlPXRoaXMuZ2V0Q2hpbGRWYWx1ZShhKX0sY291bnRyeTpmdW5jdGlvbihhLGIpe2IuY291bnRyeT10aGlzLmdldENoaWxkVmFsdWUoYSl9LGVsZWN0cm9uaWNNYWlsQWRkcmVzczpmdW5jdGlvbihhLApiKXtiLmVsZWN0cm9uaWNNYWlsQWRkcmVzcz10aGlzLmdldENoaWxkVmFsdWUoYSl9LGZlZXM6ZnVuY3Rpb24oYSxiKXtiLmZlZXM9dGhpcy5nZXRDaGlsZFZhbHVlKGEpfSxhY2Nlc3NDb25zdHJhaW50czpmdW5jdGlvbihhLGIpe2IuYWNjZXNzQ29uc3RyYWludHM9dGhpcy5nZXRDaGlsZFZhbHVlKGEpfSxDb250ZW50TWV0YWRhdGE6ZnVuY3Rpb24oYSxiKXtiLmNvbnRlbnRNZXRhZGF0YT1bXTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYi5jb250ZW50TWV0YWRhdGEpfSxDb3ZlcmFnZU9mZmVyaW5nQnJpZWY6ZnVuY3Rpb24oYSxiKXt2YXIgYz17fTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYyk7Yi5wdXNoKGMpfSxuYW1lOmZ1bmN0aW9uKGEsYil7Yi5uYW1lPXRoaXMuZ2V0Q2hpbGRWYWx1ZShhKX0sbGFiZWw6ZnVuY3Rpb24oYSxiKXtiLmxhYmVsPXRoaXMuZ2V0Q2hpbGRWYWx1ZShhKX0sbG9uTGF0RW52ZWxvcGU6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmdldEVsZW1lbnRzQnlUYWdOYW1lTlMoYSwKImh0dHA6Ly93d3cub3Blbmdpcy5uZXQvZ21sIiwicG9zIik7aWYoMj09Yy5sZW5ndGgpe3ZhciBkPXt9LGU9e307T3BlbkxheWVycy5Gb3JtYXQuR01MLnYzLnByb3RvdHlwZS5yZWFkZXJzLmdtbC5wb3MuYXBwbHkodGhpcyxbY1swXSxkXSk7T3BlbkxheWVycy5Gb3JtYXQuR01MLnYzLnByb3RvdHlwZS5yZWFkZXJzLmdtbC5wb3MuYXBwbHkodGhpcyxbY1sxXSxlXSk7Yi5sb25MYXRFbnZlbG9wZT17fTtiLmxvbkxhdEVudmVsb3BlLnNyc05hbWU9YS5nZXRBdHRyaWJ1dGUoInNyc05hbWUiKTtiLmxvbkxhdEVudmVsb3BlLm1pbj1kLnBvaW50c1swXTtiLmxvbkxhdEVudmVsb3BlLm1heD1lLnBvaW50c1swXX19fX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Gb3JtYXQuV0NTQ2FwYWJpbGl0aWVzLnYxXzBfMCJ9KTtPcGVuTGF5ZXJzLlN0cmF0ZWd5LkZpeGVkPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5TdHJhdGVneSx7cHJlbG9hZDohMSxhY3RpdmF0ZTpmdW5jdGlvbigpe3ZhciBhPU9wZW5MYXllcnMuU3RyYXRlZ3kucHJvdG90eXBlLmFjdGl2YXRlLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtpZihhKWlmKHRoaXMubGF5ZXIuZXZlbnRzLm9uKHtyZWZyZXNoOnRoaXMubG9hZCxzY29wZTp0aGlzfSksITA9PXRoaXMubGF5ZXIudmlzaWJpbGl0eXx8dGhpcy5wcmVsb2FkKXRoaXMubG9hZCgpO2Vsc2UgdGhpcy5sYXllci5ldmVudHMub24oe3Zpc2liaWxpdHljaGFuZ2VkOnRoaXMubG9hZCxzY29wZTp0aGlzfSk7cmV0dXJuIGF9LGRlYWN0aXZhdGU6ZnVuY3Rpb24oKXt2YXIgYT1PcGVuTGF5ZXJzLlN0cmF0ZWd5LnByb3RvdHlwZS5kZWFjdGl2YXRlLmNhbGwodGhpcyk7YSYmdGhpcy5sYXllci5ldmVudHMudW4oe3JlZnJlc2g6dGhpcy5sb2FkLHZpc2liaWxpdHljaGFuZ2VkOnRoaXMubG9hZCwKc2NvcGU6dGhpc30pO3JldHVybiBhfSxsb2FkOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMubGF5ZXI7Yi5ldmVudHMudHJpZ2dlckV2ZW50KCJsb2Fkc3RhcnQiLHtmaWx0ZXI6Yi5maWx0ZXJ9KTtiLnByb3RvY29sLnJlYWQoT3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoe2NhbGxiYWNrOnRoaXMubWVyZ2UsZmlsdGVyOmIuZmlsdGVyLHNjb3BlOnRoaXN9LGEpKTtiLmV2ZW50cy51bih7dmlzaWJpbGl0eWNoYW5nZWQ6dGhpcy5sb2FkLHNjb3BlOnRoaXN9KX0sbWVyZ2U6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5sYXllcjtiLmRlc3Ryb3lGZWF0dXJlcygpO3ZhciBjPWEuZmVhdHVyZXM7aWYoYyYmMDxjLmxlbmd0aCl7dmFyIGQ9Yi5wcm9qZWN0aW9uLGU9Yi5tYXAuZ2V0UHJvamVjdGlvbk9iamVjdCgpO2lmKCFlLmVxdWFscyhkKSlmb3IodmFyIGYsZz0wLGg9Yy5sZW5ndGg7ZzxoOysrZykoZj1jW2ddLmdlb21ldHJ5KSYmZi50cmFuc2Zvcm0oZCxlKTtiLmFkZEZlYXR1cmVzKGMpfWIuZXZlbnRzLnRyaWdnZXJFdmVudCgibG9hZGVuZCIsCntyZXNwb25zZTphfSl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuU3RyYXRlZ3kuRml4ZWQifSk7T3BlbkxheWVycy5Db250cm9sLlpvb209T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkNvbnRyb2wse3pvb21JblRleHQ6IisiLHpvb21JbklkOiJvbFpvb21JbkxpbmsiLHpvb21PdXRUZXh0OiJcdTIyMTIiLHpvb21PdXRJZDoib2xab29tT3V0TGluayIsZHJhdzpmdW5jdGlvbigpe3ZhciBhPU9wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuZHJhdy5hcHBseSh0aGlzKSxiPXRoaXMuZ2V0T3JDcmVhdGVMaW5rcyhhKSxjPWIuem9vbUluLGI9Yi56b29tT3V0LGQ9dGhpcy5tYXAuZXZlbnRzO2IucGFyZW50Tm9kZSE9PWEmJihkPXRoaXMuZXZlbnRzLGQuYXR0YWNoVG9FbGVtZW50KGIucGFyZW50Tm9kZSkpO2QucmVnaXN0ZXIoImJ1dHRvbmNsaWNrIix0aGlzLHRoaXMub25ab29tQ2xpY2spO3RoaXMuem9vbUluTGluaz1jO3RoaXMuem9vbU91dExpbms9YjtyZXR1cm4gYX0sZ2V0T3JDcmVhdGVMaW5rczpmdW5jdGlvbihhKXt2YXIgYj1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLnpvb21JbklkKSwKYz1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLnpvb21PdXRJZCk7Ynx8KGI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYSIpLGIuaHJlZj0iI3pvb21JbiIsYi5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh0aGlzLnpvb21JblRleHQpKSxiLmNsYXNzTmFtZT0ib2xDb250cm9sWm9vbUluIixhLmFwcGVuZENoaWxkKGIpKTtPcGVuTGF5ZXJzLkVsZW1lbnQuYWRkQ2xhc3MoYiwib2xCdXR0b24iKTtjfHwoYz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJhIiksYy5ocmVmPSIjem9vbU91dCIsYy5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh0aGlzLnpvb21PdXRUZXh0KSksYy5jbGFzc05hbWU9Im9sQ29udHJvbFpvb21PdXQiLGEuYXBwZW5kQ2hpbGQoYykpO09wZW5MYXllcnMuRWxlbWVudC5hZGRDbGFzcyhjLCJvbEJ1dHRvbiIpO3JldHVybnt6b29tSW46Yix6b29tT3V0OmN9fSxvblpvb21DbGljazpmdW5jdGlvbihhKXthPWEuYnV0dG9uRWxlbWVudDsKYT09PXRoaXMuem9vbUluTGluaz90aGlzLm1hcC56b29tSW4oKTphPT09dGhpcy56b29tT3V0TGluayYmdGhpcy5tYXAuem9vbU91dCgpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5tYXAmJnRoaXMubWFwLmV2ZW50cy51bnJlZ2lzdGVyKCJidXR0b25jbGljayIsdGhpcyx0aGlzLm9uWm9vbUNsaWNrKTtkZWxldGUgdGhpcy56b29tSW5MaW5rO2RlbGV0ZSB0aGlzLnpvb21PdXRMaW5rO09wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuZGVzdHJveS5hcHBseSh0aGlzKX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Db250cm9sLlpvb20ifSk7T3BlbkxheWVycy5MYXllci5Qb2ludFRyYWNrPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5MYXllci5WZWN0b3Ise2RhdGFGcm9tOm51bGwsc3R5bGVGcm9tOm51bGwsYWRkTm9kZXM6ZnVuY3Rpb24oYSxiKXtpZigyPmEubGVuZ3RoKXRocm93IEVycm9yKCJBdCBsZWFzdCB0d28gcG9pbnQgZmVhdHVyZXMgaGF2ZSB0byBiZSBhZGRlZCB0byBjcmVhdGUgYSBsaW5lIGZyb20iKTtmb3IodmFyIGM9QXJyYXkoYS5sZW5ndGgtMSksZCxlLGYsZz0wLGg9YS5sZW5ndGg7ZzxoO2crKyl7ZD1hW2ddO2Y9ZC5nZW9tZXRyeTtpZighZilmPWQubG9ubGF0LGY9bmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoZi5sb24sZi5sYXQpO2Vsc2UgaWYoIk9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQiIT1mLkNMQVNTX05BTUUpdGhyb3cgbmV3IFR5cGVFcnJvcigiT25seSBmZWF0dXJlcyB3aXRoIHBvaW50IGdlb21ldHJpZXMgYXJlIHN1cHBvcnRlZC4iKTtpZigwPGcpe2Q9bnVsbCE9dGhpcy5kYXRhRnJvbT8KYVtnK3RoaXMuZGF0YUZyb21dLmRhdGF8fGFbZyt0aGlzLmRhdGFGcm9tXS5hdHRyaWJ1dGVzOm51bGw7dmFyIGs9bnVsbCE9dGhpcy5zdHlsZUZyb20/YVtnK3RoaXMuc3R5bGVGcm9tXS5zdHlsZTpudWxsO2U9bmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuTGluZVN0cmluZyhbZSxmXSk7Y1tnLTFdPW5ldyBPcGVuTGF5ZXJzLkZlYXR1cmUuVmVjdG9yKGUsZCxrKX1lPWZ9dGhpcy5hZGRGZWF0dXJlcyhjLGIpfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkxheWVyLlBvaW50VHJhY2sifSk7T3BlbkxheWVycy5MYXllci5Qb2ludFRyYWNrLlNPVVJDRV9OT0RFPS0xO09wZW5MYXllcnMuTGF5ZXIuUG9pbnRUcmFjay5UQVJHRVRfTk9ERT0wO09wZW5MYXllcnMuTGF5ZXIuUG9pbnRUcmFjay5kYXRhRnJvbT17U09VUkNFX05PREU6LTEsVEFSR0VUX05PREU6MH07T3BlbkxheWVycy5Qcm90b2NvbC5XRlM9ZnVuY3Rpb24oYSl7YT1PcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyhhLE9wZW5MYXllcnMuUHJvdG9jb2wuV0ZTLkRFRkFVTFRTKTt2YXIgYj1PcGVuTGF5ZXJzLlByb3RvY29sLldGU1sidiIrYS52ZXJzaW9uLnJlcGxhY2UoL1wuL2csIl8iKV07aWYoIWIpdGhyb3ciVW5zdXBwb3J0ZWQgV0ZTIHZlcnNpb246ICIrYS52ZXJzaW9uO3JldHVybiBuZXcgYihhKX07Ck9wZW5MYXllcnMuUHJvdG9jb2wuV0ZTLmZyb21XTVNMYXllcj1mdW5jdGlvbihhLGIpe3ZhciBjLGQ7Yz1hLnBhcmFtcy5MQVlFUlM7Yz0oT3BlbkxheWVycy5VdGlsLmlzQXJyYXkoYyk/Y1swXTpjKS5zcGxpdCgiOiIpOzE8Yy5sZW5ndGgmJihkPWNbMF0pO2M9Yy5wb3AoKTtkPXt1cmw6YS51cmwsZmVhdHVyZVR5cGU6YyxmZWF0dXJlUHJlZml4OmQsc3JzTmFtZTphLnByb2plY3Rpb24mJmEucHJvamVjdGlvbi5nZXRDb2RlKCl8fGEubWFwJiZhLm1hcC5nZXRQcm9qZWN0aW9uT2JqZWN0KCkuZ2V0Q29kZSgpLHZlcnNpb246IjEuMS4wIn07cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLlByb3RvY29sLldGUyhPcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyhiLGQpKX07T3BlbkxheWVycy5Qcm90b2NvbC5XRlMuREVGQVVMVFM9e3ZlcnNpb246IjEuMC4wIn07T3BlbkxheWVycy5MYXllci5NYXJrZXJzPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5MYXllcix7aXNCYXNlTGF5ZXI6ITEsbWFya2VyczpudWxsLGRyYXduOiExLGluaXRpYWxpemU6ZnVuY3Rpb24oYSxiKXtPcGVuTGF5ZXJzLkxheWVyLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLm1hcmtlcnM9W119LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmNsZWFyTWFya2VycygpO3RoaXMubWFya2Vycz1udWxsO09wZW5MYXllcnMuTGF5ZXIucHJvdG90eXBlLmRlc3Ryb3kuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxzZXRPcGFjaXR5OmZ1bmN0aW9uKGEpe2lmKGEhPXRoaXMub3BhY2l0eSl7dGhpcy5vcGFjaXR5PWE7YT0wO2Zvcih2YXIgYj10aGlzLm1hcmtlcnMubGVuZ3RoO2E8YjthKyspdGhpcy5tYXJrZXJzW2FdLnNldE9wYWNpdHkodGhpcy5vcGFjaXR5KX19LG1vdmVUbzpmdW5jdGlvbihhLGIsYyl7T3BlbkxheWVycy5MYXllci5wcm90b3R5cGUubW92ZVRvLmFwcGx5KHRoaXMsCmFyZ3VtZW50cyk7aWYoYnx8IXRoaXMuZHJhd24pe2Zvcih2YXIgZD0wLGU9dGhpcy5tYXJrZXJzLmxlbmd0aDtkPGU7ZCsrKXRoaXMuZHJhd01hcmtlcih0aGlzLm1hcmtlcnNbZF0pO3RoaXMuZHJhd249ITB9fSxhZGRNYXJrZXI6ZnVuY3Rpb24oYSl7dGhpcy5tYXJrZXJzLnB1c2goYSk7MT50aGlzLm9wYWNpdHkmJmEuc2V0T3BhY2l0eSh0aGlzLm9wYWNpdHkpO3RoaXMubWFwJiZ0aGlzLm1hcC5nZXRFeHRlbnQoKSYmKGEubWFwPXRoaXMubWFwLHRoaXMuZHJhd01hcmtlcihhKSl9LHJlbW92ZU1hcmtlcjpmdW5jdGlvbihhKXt0aGlzLm1hcmtlcnMmJnRoaXMubWFya2Vycy5sZW5ndGgmJihPcGVuTGF5ZXJzLlV0aWwucmVtb3ZlSXRlbSh0aGlzLm1hcmtlcnMsYSksYS5lcmFzZSgpKX0sY2xlYXJNYXJrZXJzOmZ1bmN0aW9uKCl7aWYobnVsbCE9dGhpcy5tYXJrZXJzKWZvcig7MDx0aGlzLm1hcmtlcnMubGVuZ3RoOyl0aGlzLnJlbW92ZU1hcmtlcih0aGlzLm1hcmtlcnNbMF0pfSwKZHJhd01hcmtlcjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLm1hcC5nZXRMYXllclB4RnJvbUxvbkxhdChhLmxvbmxhdCk7bnVsbD09Yj9hLmRpc3BsYXkoITEpOmEuaXNEcmF3bigpP2EuaWNvbiYmYS5pY29uLm1vdmVUbyhiKTooYT1hLmRyYXcoYiksdGhpcy5kaXYuYXBwZW5kQ2hpbGQoYSkpfSxnZXREYXRhRXh0ZW50OmZ1bmN0aW9uKCl7dmFyIGE9bnVsbDtpZih0aGlzLm1hcmtlcnMmJjA8dGhpcy5tYXJrZXJzLmxlbmd0aClmb3IodmFyIGE9bmV3IE9wZW5MYXllcnMuQm91bmRzLGI9MCxjPXRoaXMubWFya2Vycy5sZW5ndGg7YjxjO2IrKylhLmV4dGVuZCh0aGlzLm1hcmtlcnNbYl0ubG9ubGF0KTtyZXR1cm4gYX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5MYXllci5NYXJrZXJzIn0pO09wZW5MYXllcnMuQ29udHJvbC5QYW49T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkNvbnRyb2wuQnV0dG9uLHtzbGlkZUZhY3Rvcjo1MCxzbGlkZVJhdGlvOm51bGwsZGlyZWN0aW9uOm51bGwsaW5pdGlhbGl6ZTpmdW5jdGlvbihhLGIpe3RoaXMuZGlyZWN0aW9uPWE7dGhpcy5DTEFTU19OQU1FKz10aGlzLmRpcmVjdGlvbjtPcGVuTGF5ZXJzLkNvbnRyb2wucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxbYl0pfSx0cmlnZ2VyOmZ1bmN0aW9uKCl7aWYodGhpcy5tYXApe3ZhciBhPU9wZW5MYXllcnMuRnVuY3Rpb24uYmluZChmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5zbGlkZVJhdGlvP3RoaXMubWFwLmdldFNpemUoKVthXSp0aGlzLnNsaWRlUmF0aW86dGhpcy5zbGlkZUZhY3Rvcn0sdGhpcyk7c3dpdGNoKHRoaXMuZGlyZWN0aW9uKXtjYXNlIE9wZW5MYXllcnMuQ29udHJvbC5QYW4uTk9SVEg6dGhpcy5tYXAucGFuKDAsLWEoImgiKSk7YnJlYWs7Y2FzZSBPcGVuTGF5ZXJzLkNvbnRyb2wuUGFuLlNPVVRIOnRoaXMubWFwLnBhbigwLAphKCJoIikpO2JyZWFrO2Nhc2UgT3BlbkxheWVycy5Db250cm9sLlBhbi5XRVNUOnRoaXMubWFwLnBhbigtYSgidyIpLDApO2JyZWFrO2Nhc2UgT3BlbkxheWVycy5Db250cm9sLlBhbi5FQVNUOnRoaXMubWFwLnBhbihhKCJ3IiksMCl9fX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Db250cm9sLlBhbiJ9KTtPcGVuTGF5ZXJzLkNvbnRyb2wuUGFuLk5PUlRIPSJOb3J0aCI7T3BlbkxheWVycy5Db250cm9sLlBhbi5TT1VUSD0iU291dGgiO09wZW5MYXllcnMuQ29udHJvbC5QYW4uRUFTVD0iRWFzdCI7T3BlbkxheWVycy5Db250cm9sLlBhbi5XRVNUPSJXZXN0IjtPcGVuTGF5ZXJzLkZvcm1hdC5DU1dHZXREb21haW49ZnVuY3Rpb24oYSl7YT1PcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyhhLE9wZW5MYXllcnMuRm9ybWF0LkNTV0dldERvbWFpbi5ERUZBVUxUUyk7dmFyIGI9T3BlbkxheWVycy5Gb3JtYXQuQ1NXR2V0RG9tYWluWyJ2IithLnZlcnNpb24ucmVwbGFjZSgvXC4vZywiXyIpXTtpZighYil0aHJvdyJVbnN1cHBvcnRlZCBDU1dHZXREb21haW4gdmVyc2lvbjogIithLnZlcnNpb247cmV0dXJuIG5ldyBiKGEpfTtPcGVuTGF5ZXJzLkZvcm1hdC5DU1dHZXREb21haW4uREVGQVVMVFM9e3ZlcnNpb246IjIuMC4yIn07T3BlbkxheWVycy5Gb3JtYXQuQ1NXR2V0RG9tYWluLnYyXzBfMj1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuRm9ybWF0LlhNTCx7bmFtZXNwYWNlczp7eGxpbms6Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiLHhzaToiaHR0cDovL3d3dy53My5vcmcvMjAwMS9YTUxTY2hlbWEtaW5zdGFuY2UiLGNzdzoiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9jYXQvY3N3LzIuMC4yIn0sZGVmYXVsdFByZWZpeDoiY3N3Iix2ZXJzaW9uOiIyLjAuMiIsc2NoZW1hTG9jYXRpb246Imh0dHA6Ly93d3cub3Blbmdpcy5uZXQvY2F0L2Nzdy8yLjAuMiBodHRwOi8vc2NoZW1hcy5vcGVuZ2lzLm5ldC9jc3cvMi4wLjIvQ1NXLWRpc2NvdmVyeS54c2QiLFByb3BlcnR5TmFtZTpudWxsLFBhcmFtZXRlck5hbWU6bnVsbCxyZWFkOmZ1bmN0aW9uKGEpeyJzdHJpbmciPT10eXBlb2YgYSYmKGE9T3BlbkxheWVycy5Gb3JtYXQuWE1MLnByb3RvdHlwZS5yZWFkLmFwcGx5KHRoaXMsW2FdKSk7YSYmOT09CmEubm9kZVR5cGUmJihhPWEuZG9jdW1lbnRFbGVtZW50KTt2YXIgYj17fTt0aGlzLnJlYWROb2RlKGEsYik7cmV0dXJuIGJ9LHJlYWRlcnM6e2Nzdzp7R2V0RG9tYWluUmVzcG9uc2U6ZnVuY3Rpb24oYSxiKXt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYil9LERvbWFpblZhbHVlczpmdW5jdGlvbihhLGIpe09wZW5MYXllcnMuVXRpbC5pc0FycmF5KGIuRG9tYWluVmFsdWVzKXx8KGIuRG9tYWluVmFsdWVzPVtdKTtmb3IodmFyIGM9YS5hdHRyaWJ1dGVzLGQ9e30sZT0wLGY9Yy5sZW5ndGg7ZTxmOysrZSlkW2NbZV0ubmFtZV09Y1tlXS5ub2RlVmFsdWU7dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGQpO2IuRG9tYWluVmFsdWVzLnB1c2goZCl9LFByb3BlcnR5TmFtZTpmdW5jdGlvbihhLGIpe2IuUHJvcGVydHlOYW1lPXRoaXMuZ2V0Q2hpbGRWYWx1ZShhKX0sUGFyYW1ldGVyTmFtZTpmdW5jdGlvbihhLGIpe2IuUGFyYW1ldGVyTmFtZT10aGlzLmdldENoaWxkVmFsdWUoYSl9LExpc3RPZlZhbHVlczpmdW5jdGlvbihhLApiKXtPcGVuTGF5ZXJzLlV0aWwuaXNBcnJheShiLkxpc3RPZlZhbHVlcyl8fChiLkxpc3RPZlZhbHVlcz1bXSk7dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGIuTGlzdE9mVmFsdWVzKX0sVmFsdWU6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9YS5hdHRyaWJ1dGVzLGQ9e30sZT0wLGY9Yy5sZW5ndGg7ZTxmOysrZSlkW2NbZV0ubmFtZV09Y1tlXS5ub2RlVmFsdWU7ZC52YWx1ZT10aGlzLmdldENoaWxkVmFsdWUoYSk7Yi5wdXNoKHtWYWx1ZTpkfSl9LENvbmNlcHR1YWxTY2hlbWU6ZnVuY3Rpb24oYSxiKXtiLkNvbmNlcHR1YWxTY2hlbWU9e307dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGIuQ29uY2VwdHVhbFNjaGVtZSl9LE5hbWU6ZnVuY3Rpb24oYSxiKXtiLk5hbWU9dGhpcy5nZXRDaGlsZFZhbHVlKGEpfSxEb2N1bWVudDpmdW5jdGlvbihhLGIpe2IuRG9jdW1lbnQ9dGhpcy5nZXRDaGlsZFZhbHVlKGEpfSxBdXRob3JpdHk6ZnVuY3Rpb24oYSxiKXtiLkF1dGhvcml0eT10aGlzLmdldENoaWxkVmFsdWUoYSl9LApSYW5nZU9mVmFsdWVzOmZ1bmN0aW9uKGEsYil7Yi5SYW5nZU9mVmFsdWVzPXt9O3RoaXMucmVhZENoaWxkTm9kZXMoYSxiLlJhbmdlT2ZWYWx1ZXMpfSxNaW5WYWx1ZTpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz1hLmF0dHJpYnV0ZXMsZD17fSxlPTAsZj1jLmxlbmd0aDtlPGY7KytlKWRbY1tlXS5uYW1lXT1jW2VdLm5vZGVWYWx1ZTtkLnZhbHVlPXRoaXMuZ2V0Q2hpbGRWYWx1ZShhKTtiLk1pblZhbHVlPWR9LE1heFZhbHVlOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPWEuYXR0cmlidXRlcyxkPXt9LGU9MCxmPWMubGVuZ3RoO2U8ZjsrK2UpZFtjW2VdLm5hbWVdPWNbZV0ubm9kZVZhbHVlO2QudmFsdWU9dGhpcy5nZXRDaGlsZFZhbHVlKGEpO2IuTWF4VmFsdWU9ZH19fSx3cml0ZTpmdW5jdGlvbihhKXthPXRoaXMud3JpdGVOb2RlKCJjc3c6R2V0RG9tYWluIixhKTtyZXR1cm4gT3BlbkxheWVycy5Gb3JtYXQuWE1MLnByb3RvdHlwZS53cml0ZS5hcHBseSh0aGlzLFthXSl9LHdyaXRlcnM6e2Nzdzp7R2V0RG9tYWluOmZ1bmN0aW9uKGEpe3ZhciBiPQp0aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoImNzdzpHZXREb21haW4iLHthdHRyaWJ1dGVzOntzZXJ2aWNlOiJDU1ciLHZlcnNpb246dGhpcy52ZXJzaW9ufX0pO2EuUHJvcGVydHlOYW1lfHx0aGlzLlByb3BlcnR5TmFtZT90aGlzLndyaXRlTm9kZSgiY3N3OlByb3BlcnR5TmFtZSIsYS5Qcm9wZXJ0eU5hbWV8fHRoaXMuUHJvcGVydHlOYW1lLGIpOihhLlBhcmFtZXRlck5hbWV8fHRoaXMuUGFyYW1ldGVyTmFtZSkmJnRoaXMud3JpdGVOb2RlKCJjc3c6UGFyYW1ldGVyTmFtZSIsYS5QYXJhbWV0ZXJOYW1lfHx0aGlzLlBhcmFtZXRlck5hbWUsYik7dGhpcy5yZWFkQ2hpbGROb2RlcyhiLGEpO3JldHVybiBifSxQcm9wZXJ0eU5hbWU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygiY3N3OlByb3BlcnR5TmFtZSIse3ZhbHVlOmF9KX0sUGFyYW1ldGVyTmFtZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJjc3c6UGFyYW1ldGVyTmFtZSIsCnt2YWx1ZTphfSl9fX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Gb3JtYXQuQ1NXR2V0RG9tYWluLnYyXzBfMiJ9KTtPcGVuTGF5ZXJzLkZvcm1hdC5BcmNYTUwuRmVhdHVyZXM9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkZvcm1hdC5YTUwse3JlYWQ6ZnVuY3Rpb24oYSl7cmV0dXJuKG5ldyBPcGVuTGF5ZXJzLkZvcm1hdC5BcmNYTUwpLnJlYWQoYSkuZmVhdHVyZXMuZmVhdHVyZX19KTtPcGVuTGF5ZXJzLkNvbnRyb2wuU25hcHBpbmc9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkNvbnRyb2wse0RFRkFVTFRTOnt0b2xlcmFuY2U6MTAsbm9kZTohMCxlZGdlOiEwLHZlcnRleDohMH0sZ3JlZWR5OiEwLHByZWNlZGVuY2U6WyJub2RlIiwidmVydGV4IiwiZWRnZSJdLHJlc29sdXRpb246bnVsbCxnZW9Ub2xlcmFuY2VDYWNoZTpudWxsLGxheWVyOm51bGwsZmVhdHVyZTpudWxsLHBvaW50Om51bGwsaW5pdGlhbGl6ZTpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLkNvbnRyb2wucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxbYV0pO3RoaXMub3B0aW9ucz1hfHx7fTt0aGlzLm9wdGlvbnMubGF5ZXImJnRoaXMuc2V0TGF5ZXIodGhpcy5vcHRpb25zLmxheWVyKTthPU9wZW5MYXllcnMuVXRpbC5leHRlbmQoe30sdGhpcy5vcHRpb25zLmRlZmF1bHRzKTt0aGlzLmRlZmF1bHRzPU9wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKGEsdGhpcy5ERUZBVUxUUyk7dGhpcy5zZXRUYXJnZXRzKHRoaXMub3B0aW9ucy50YXJnZXRzKTsKMD09PXRoaXMudGFyZ2V0cy5sZW5ndGgmJnRoaXMubGF5ZXImJnRoaXMuYWRkVGFyZ2V0TGF5ZXIodGhpcy5sYXllcik7dGhpcy5nZW9Ub2xlcmFuY2VDYWNoZT17fX0sc2V0TGF5ZXI6ZnVuY3Rpb24oYSl7dGhpcy5hY3RpdmU/KHRoaXMuZGVhY3RpdmF0ZSgpLHRoaXMubGF5ZXI9YSx0aGlzLmFjdGl2YXRlKCkpOnRoaXMubGF5ZXI9YX0sc2V0VGFyZ2V0czpmdW5jdGlvbihhKXt0aGlzLnRhcmdldHM9W107aWYoYSYmYS5sZW5ndGgpZm9yKHZhciBiLGM9MCxkPWEubGVuZ3RoO2M8ZDsrK2MpYj1hW2NdLGIgaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLkxheWVyLlZlY3Rvcj90aGlzLmFkZFRhcmdldExheWVyKGIpOnRoaXMuYWRkVGFyZ2V0KGIpfSxhZGRUYXJnZXRMYXllcjpmdW5jdGlvbihhKXt0aGlzLmFkZFRhcmdldCh7bGF5ZXI6YX0pfSxhZGRUYXJnZXQ6ZnVuY3Rpb24oYSl7YT1PcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyhhLHRoaXMuZGVmYXVsdHMpO2Eubm9kZVRvbGVyYW5jZT0KYS5ub2RlVG9sZXJhbmNlfHxhLnRvbGVyYW5jZTthLnZlcnRleFRvbGVyYW5jZT1hLnZlcnRleFRvbGVyYW5jZXx8YS50b2xlcmFuY2U7YS5lZGdlVG9sZXJhbmNlPWEuZWRnZVRvbGVyYW5jZXx8YS50b2xlcmFuY2U7dGhpcy50YXJnZXRzLnB1c2goYSl9LHJlbW92ZVRhcmdldExheWVyOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYixjPXRoaXMudGFyZ2V0cy5sZW5ndGgtMTswPD1jOy0tYyliPXRoaXMudGFyZ2V0c1tjXSxiLmxheWVyPT09YSYmdGhpcy5yZW1vdmVUYXJnZXQoYil9LHJlbW92ZVRhcmdldDpmdW5jdGlvbihhKXtyZXR1cm4gT3BlbkxheWVycy5VdGlsLnJlbW92ZUl0ZW0odGhpcy50YXJnZXRzLGEpfSxhY3RpdmF0ZTpmdW5jdGlvbigpe3ZhciBhPU9wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuYWN0aXZhdGUuY2FsbCh0aGlzKTtpZihhJiZ0aGlzLmxheWVyJiZ0aGlzLmxheWVyLmV2ZW50cyl0aGlzLmxheWVyLmV2ZW50cy5vbih7c2tldGNoc3RhcnRlZDp0aGlzLm9uU2tldGNoTW9kaWZpZWQsCnNrZXRjaG1vZGlmaWVkOnRoaXMub25Ta2V0Y2hNb2RpZmllZCx2ZXJ0ZXhtb2RpZmllZDp0aGlzLm9uVmVydGV4TW9kaWZpZWQsc2NvcGU6dGhpc30pO3JldHVybiBhfSxkZWFjdGl2YXRlOmZ1bmN0aW9uKCl7dmFyIGE9T3BlbkxheWVycy5Db250cm9sLnByb3RvdHlwZS5kZWFjdGl2YXRlLmNhbGwodGhpcyk7YSYmdGhpcy5sYXllciYmdGhpcy5sYXllci5ldmVudHMmJnRoaXMubGF5ZXIuZXZlbnRzLnVuKHtza2V0Y2hzdGFydGVkOnRoaXMub25Ta2V0Y2hNb2RpZmllZCxza2V0Y2htb2RpZmllZDp0aGlzLm9uU2tldGNoTW9kaWZpZWQsdmVydGV4bW9kaWZpZWQ6dGhpcy5vblZlcnRleE1vZGlmaWVkLHNjb3BlOnRoaXN9KTt0aGlzLnBvaW50PXRoaXMuZmVhdHVyZT1udWxsO3JldHVybiBhfSxvblNrZXRjaE1vZGlmaWVkOmZ1bmN0aW9uKGEpe3RoaXMuZmVhdHVyZT1hLmZlYXR1cmU7dGhpcy5jb25zaWRlclNuYXBwaW5nKGEudmVydGV4LGEudmVydGV4KX0sb25WZXJ0ZXhNb2RpZmllZDpmdW5jdGlvbihhKXt0aGlzLmZlYXR1cmU9CmEuZmVhdHVyZTt2YXIgYj10aGlzLmxheWVyLm1hcC5nZXRMb25MYXRGcm9tVmlld1BvcnRQeChhLnBpeGVsKTt0aGlzLmNvbnNpZGVyU25hcHBpbmcoYS52ZXJ0ZXgsbmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoYi5sb24sYi5sYXQpKX0sY29uc2lkZXJTbmFwcGluZzpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz17cmFuazpOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFksZGlzdDpOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkseDpudWxsLHk6bnVsbH0sZD0hMSxlLGYsZz0wLGg9dGhpcy50YXJnZXRzLmxlbmd0aDtnPGg7KytnKWlmKGY9dGhpcy50YXJnZXRzW2ddLGU9dGhpcy50ZXN0VGFyZ2V0KGYsYikpaWYodGhpcy5ncmVlZHkpe2M9ZTtjLnRhcmdldD1mO2Q9ITA7YnJlYWt9ZWxzZSBpZihlLnJhbms8Yy5yYW5rfHxlLnJhbms9PT1jLnJhbmsmJmUuZGlzdDxjLmRpc3QpYz1lLGMudGFyZ2V0PWYsZD0hMDtkJiYoITEhPT10aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoImJlZm9yZXNuYXAiLAp7cG9pbnQ6YSx4OmMueCx5OmMueSxkaXN0YW5jZTpjLmRpc3QsbGF5ZXI6Yy50YXJnZXQubGF5ZXIsc25hcFR5cGU6dGhpcy5wcmVjZWRlbmNlW2MucmFua119KT8oYS54PWMueCxhLnk9Yy55LHRoaXMucG9pbnQ9YSx0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoInNuYXAiLHtwb2ludDphLHNuYXBUeXBlOnRoaXMucHJlY2VkZW5jZVtjLnJhbmtdLGxheWVyOmMudGFyZ2V0LmxheWVyLGRpc3RhbmNlOmMuZGlzdH0pKTpkPSExKTt0aGlzLnBvaW50JiYhZCYmKGEueD1iLngsYS55PWIueSx0aGlzLnBvaW50PW51bGwsdGhpcy5ldmVudHMudHJpZ2dlckV2ZW50KCJ1bnNuYXAiLHtwb2ludDphfSkpfSx0ZXN0VGFyZ2V0OmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5sYXllci5tYXAuZ2V0UmVzb2x1dGlvbigpO2lmKCJtaW5SZXNvbHV0aW9uImluIGEmJmM8YS5taW5SZXNvbHV0aW9ufHwibWF4UmVzb2x1dGlvbiJpbiBhJiZjPj1hLm1heFJlc29sdXRpb24pcmV0dXJuIG51bGw7Zm9yKHZhciBjPQp7bm9kZTp0aGlzLmdldEdlb1RvbGVyYW5jZShhLm5vZGVUb2xlcmFuY2UsYyksdmVydGV4OnRoaXMuZ2V0R2VvVG9sZXJhbmNlKGEudmVydGV4VG9sZXJhbmNlLGMpLGVkZ2U6dGhpcy5nZXRHZW9Ub2xlcmFuY2UoYS5lZGdlVG9sZXJhbmNlLGMpfSxkPU1hdGgubWF4KGMubm9kZSxjLnZlcnRleCxjLmVkZ2UpLGU9e3Jhbms6TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZLGRpc3Q6TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZfSxmPSExLGc9YS5sYXllci5mZWF0dXJlcyxoLGssbCxtLG4scCxxPXRoaXMucHJlY2VkZW5jZS5sZW5ndGgscj1uZXcgT3BlbkxheWVycy5Mb25MYXQoYi54LGIueSkscz0wLHQ9Zy5sZW5ndGg7czx0OysrcylpZihoPWdbc10saCE9PXRoaXMuZmVhdHVyZSYmKCFoLl9za2V0Y2gmJmguc3RhdGUhPT1PcGVuTGF5ZXJzLlN0YXRlLkRFTEVURSYmKCFhLmZpbHRlcnx8YS5maWx0ZXIuZXZhbHVhdGUoaCkpKSYmaC5hdFBvaW50KHIsZCxkKSlmb3IodmFyIHU9MCx2PU1hdGgubWluKGUucmFuaysKMSxxKTt1PHY7Kyt1KWlmKGs9dGhpcy5wcmVjZWRlbmNlW3VdLGFba10paWYoImVkZ2UiPT09ayl7aWYobD1oLmdlb21ldHJ5LmRpc3RhbmNlVG8oYix7ZGV0YWlsczohMH0pLG49bC5kaXN0YW5jZSxuPD1jW2tdJiZuPGUuZGlzdCl7ZT17cmFuazp1LGRpc3Q6bix4OmwueDAseTpsLnkwfTtmPSEwO2JyZWFrfX1lbHNle2w9aC5nZW9tZXRyeS5nZXRWZXJ0aWNlcygibm9kZSI9PT1rKTtwPSExO2Zvcih2YXIgdz0wLHg9bC5sZW5ndGg7dzx4OysrdyltPWxbd10sbj1tLmRpc3RhbmNlVG8oYiksbjw9Y1trXSYmKHU8ZS5yYW5rfHx1PT09ZS5yYW5rJiZuPGUuZGlzdCkmJihlPXtyYW5rOnUsZGlzdDpuLHg6bS54LHk6bS55fSxwPWY9ITApO2lmKHApYnJlYWt9cmV0dXJuIGY/ZTpudWxsfSxnZXRHZW9Ub2xlcmFuY2U6ZnVuY3Rpb24oYSxiKXtiIT09dGhpcy5yZXNvbHV0aW9uJiYodGhpcy5yZXNvbHV0aW9uPWIsdGhpcy5nZW9Ub2xlcmFuY2VDYWNoZT17fSk7dmFyIGM9dGhpcy5nZW9Ub2xlcmFuY2VDYWNoZVthXTsKdm9pZCAwPT09YyYmKGM9YSpiLHRoaXMuZ2VvVG9sZXJhbmNlQ2FjaGVbYV09Yyk7cmV0dXJuIGN9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmFjdGl2ZSYmdGhpcy5kZWFjdGl2YXRlKCk7ZGVsZXRlIHRoaXMubGF5ZXI7ZGVsZXRlIHRoaXMudGFyZ2V0cztPcGVuTGF5ZXJzLkNvbnRyb2wucHJvdG90eXBlLmRlc3Ryb3kuY2FsbCh0aGlzKX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Db250cm9sLlNuYXBwaW5nIn0pO09wZW5MYXllcnMuRm9ybWF0Lk9XU0NvbW1vbi52MV8xXzA9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkZvcm1hdC5PV1NDb21tb24udjEse25hbWVzcGFjZXM6e293czoiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9vd3MvMS4xIix4bGluazoiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayJ9LHJlYWRlcnM6e293czpPcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyh7RXhjZXB0aW9uUmVwb3J0OmZ1bmN0aW9uKGEsYil7Yi5leGNlcHRpb25SZXBvcnQ9e3ZlcnNpb246YS5nZXRBdHRyaWJ1dGUoInZlcnNpb24iKSxsYW5ndWFnZTphLmdldEF0dHJpYnV0ZSgieG1sOmxhbmciKSxleGNlcHRpb25zOltdfTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYi5leGNlcHRpb25SZXBvcnQpfSxBbGxvd2VkVmFsdWVzOmZ1bmN0aW9uKGEsYil7Yi5hbGxvd2VkVmFsdWVzPXt9O3RoaXMucmVhZENoaWxkTm9kZXMoYSxiLmFsbG93ZWRWYWx1ZXMpfSxBbnlWYWx1ZTpmdW5jdGlvbihhLGIpe2IuYW55VmFsdWU9CiEwfSxEYXRhVHlwZTpmdW5jdGlvbihhLGIpe2IuZGF0YVR5cGU9dGhpcy5nZXRDaGlsZFZhbHVlKGEpfSxSYW5nZTpmdW5jdGlvbihhLGIpe2IucmFuZ2U9e307dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGIucmFuZ2UpfSxNaW5pbXVtVmFsdWU6ZnVuY3Rpb24oYSxiKXtiLm1pblZhbHVlPXRoaXMuZ2V0Q2hpbGRWYWx1ZShhKX0sTWF4aW11bVZhbHVlOmZ1bmN0aW9uKGEsYil7Yi5tYXhWYWx1ZT10aGlzLmdldENoaWxkVmFsdWUoYSl9LElkZW50aWZpZXI6ZnVuY3Rpb24oYSxiKXtiLmlkZW50aWZpZXI9dGhpcy5nZXRDaGlsZFZhbHVlKGEpfSxTdXBwb3J0ZWRDUlM6ZnVuY3Rpb24oYSxiKXtiLnN1cHBvcnRlZENSUz10aGlzLmdldENoaWxkVmFsdWUoYSl9fSxPcGVuTGF5ZXJzLkZvcm1hdC5PV1NDb21tb24udjEucHJvdG90eXBlLnJlYWRlcnMub3dzKX0sd3JpdGVyczp7b3dzOk9wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKHtSYW5nZTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoIm93czpSYW5nZSIsCnthdHRyaWJ1dGVzOnsib3dzOnJhbmdlQ2xvc3VyZSI6YS5jbG9zdXJlfX0pO3RoaXMud3JpdGVOb2RlKCJvd3M6TWluaW11bVZhbHVlIixhLm1pblZhbHVlLGIpO3RoaXMud3JpdGVOb2RlKCJvd3M6TWF4aW11bVZhbHVlIixhLm1heFZhbHVlLGIpO3JldHVybiBifSxNaW5pbXVtVmFsdWU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygib3dzOk1pbmltdW1WYWx1ZSIse3ZhbHVlOmF9KX0sTWF4aW11bVZhbHVlOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoIm93czpNYXhpbXVtVmFsdWUiLHt2YWx1ZTphfSl9LFZhbHVlOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoIm93czpWYWx1ZSIse3ZhbHVlOmF9KX19LE9wZW5MYXllcnMuRm9ybWF0Lk9XU0NvbW1vbi52MS5wcm90b3R5cGUud3JpdGVycy5vd3MpfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkZvcm1hdC5PV1NDb21tb24udjFfMV8wIn0pO09wZW5MYXllcnMuRm9ybWF0LldDU0dldENvdmVyYWdlPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Gb3JtYXQuWE1MLHtuYW1lc3BhY2VzOntvd3M6Imh0dHA6Ly93d3cub3Blbmdpcy5uZXQvb3dzLzEuMSIsd2NzOiJodHRwOi8vd3d3Lm9wZW5naXMubmV0L3djcy8xLjEiLHhsaW5rOiJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIix4c2k6Imh0dHA6Ly93d3cudzMub3JnLzIwMDEvWE1MU2NoZW1hLWluc3RhbmNlIn0scmVnRXhlczp7dHJpbVNwYWNlOi9eXHMqfFxzKiQvZyxyZW1vdmVTcGFjZTovXHMqL2csc3BsaXRTcGFjZTovXHMrLyx0cmltQ29tbWE6L1xzKixccyovZ30sVkVSU0lPTjoiMS4xLjIiLHNjaGVtYUxvY2F0aW9uOiJodHRwOi8vd3d3Lm9wZW5naXMubmV0L3djcy8xLjEgaHR0cDovL3NjaGVtYXMub3Blbmdpcy5uZXQvd2NzLzEuMS93Y3NHZXRDb3ZlcmFnZS54c2QiLHdyaXRlOmZ1bmN0aW9uKGEpe2E9dGhpcy53cml0ZU5vZGUoIndjczpHZXRDb3ZlcmFnZSIsCmEpO3RoaXMuc2V0QXR0cmlidXRlTlMoYSx0aGlzLm5hbWVzcGFjZXMueHNpLCJ4c2k6c2NoZW1hTG9jYXRpb24iLHRoaXMuc2NoZW1hTG9jYXRpb24pO3JldHVybiBPcGVuTGF5ZXJzLkZvcm1hdC5YTUwucHJvdG90eXBlLndyaXRlLmFwcGx5KHRoaXMsW2FdKX0sd3JpdGVyczp7d2NzOntHZXRDb3ZlcmFnZTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoIndjczpHZXRDb3ZlcmFnZSIse2F0dHJpYnV0ZXM6e3ZlcnNpb246YS52ZXJzaW9ufHx0aGlzLlZFUlNJT04sc2VydmljZToiV0NTIn19KTt0aGlzLndyaXRlTm9kZSgib3dzOklkZW50aWZpZXIiLGEuaWRlbnRpZmllcixiKTt0aGlzLndyaXRlTm9kZSgid2NzOkRvbWFpblN1YnNldCIsYS5kb21haW5TdWJzZXQsYik7dGhpcy53cml0ZU5vZGUoIndjczpPdXRwdXQiLGEub3V0cHV0LGIpO3JldHVybiBifSxEb21haW5TdWJzZXQ6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJ3Y3M6RG9tYWluU3Vic2V0IiwKe30pO3RoaXMud3JpdGVOb2RlKCJvd3M6Qm91bmRpbmdCb3giLGEuYm91bmRpbmdCb3gsYik7YS50ZW1wb3JhbFN1YnNldCYmdGhpcy53cml0ZU5vZGUoIndjczpUZW1wb3JhbFN1YnNldCIsYS50ZW1wb3JhbFN1YnNldCxiKTtyZXR1cm4gYn0sVGVtcG9yYWxTdWJzZXQ6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygid2NzOlRlbXBvcmFsU3Vic2V0Iix7fSksYz0wLGQ9YS50aW1lUGVyaW9kcy5sZW5ndGg7YzxkOysrYyl0aGlzLndyaXRlTm9kZSgid2NzOlRpbWVQZXJpb2QiLGEudGltZVBlcmlvZHNbY10sYik7cmV0dXJuIGJ9LFRpbWVQZXJpb2Q6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJ3Y3M6VGltZVBlcmlvZCIse30pO3RoaXMud3JpdGVOb2RlKCJ3Y3M6QmVnaW5Qb3NpdGlvbiIsYS5iZWdpbixiKTt0aGlzLndyaXRlTm9kZSgid2NzOkVuZFBvc2l0aW9uIixhLmVuZCxiKTthLnJlc29sdXRpb24mJnRoaXMud3JpdGVOb2RlKCJ3Y3M6VGltZVJlc29sdXRpb24iLAphLnJlc29sdXRpb24sYik7cmV0dXJuIGJ9LEJlZ2luUG9zaXRpb246ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygid2NzOkJlZ2luUG9zaXRpb24iLHt2YWx1ZTphfSl9LEVuZFBvc2l0aW9uOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoIndjczpFbmRQb3NpdGlvbiIse3ZhbHVlOmF9KX0sVGltZVJlc29sdXRpb246ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygid2NzOlRpbWVSZXNvbHV0aW9uIix7dmFsdWU6YX0pfSxPdXRwdXQ6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJ3Y3M6T3V0cHV0Iix7YXR0cmlidXRlczp7Zm9ybWF0OmEuZm9ybWF0LHN0b3JlOmEuc3RvcmV9fSk7YS5ncmlkQ1JTJiZ0aGlzLndyaXRlTm9kZSgid2NzOkdyaWRDUlMiLGEuZ3JpZENSUyxiKTtyZXR1cm4gYn0sR3JpZENSUzpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoIndjczpHcmlkQ1JTIiwKe30pO3RoaXMud3JpdGVOb2RlKCJ3Y3M6R3JpZEJhc2VDUlMiLGEuYmFzZUNSUyxiKTthLnR5cGUmJnRoaXMud3JpdGVOb2RlKCJ3Y3M6R3JpZFR5cGUiLGEudHlwZSxiKTthLm9yaWdpbiYmdGhpcy53cml0ZU5vZGUoIndjczpHcmlkT3JpZ2luIixhLm9yaWdpbixiKTt0aGlzLndyaXRlTm9kZSgid2NzOkdyaWRPZmZzZXRzIixhLm9mZnNldHMsYik7YS5DUyYmdGhpcy53cml0ZU5vZGUoIndjczpHcmlkQ1MiLGEuQ1MsYik7cmV0dXJuIGJ9LEdyaWRCYXNlQ1JTOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoIndjczpHcmlkQmFzZUNSUyIse3ZhbHVlOmF9KX0sR3JpZE9yaWdpbjpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJ3Y3M6R3JpZE9yaWdpbiIse3ZhbHVlOmF9KX0sR3JpZFR5cGU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygid2NzOkdyaWRUeXBlIix7dmFsdWU6YX0pfSxHcmlkT2Zmc2V0czpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJ3Y3M6R3JpZE9mZnNldHMiLAp7dmFsdWU6YX0pfSxHcmlkQ1M6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygid2NzOkdyaWRDUyIse3ZhbHVlOmF9KX19LG93czpPcGVuTGF5ZXJzLkZvcm1hdC5PV1NDb21tb24udjFfMV8wLnByb3RvdHlwZS53cml0ZXJzLm93c30sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Gb3JtYXQuV0NTR2V0Q292ZXJhZ2UifSk7T3BlbkxheWVycy5Gb3JtYXQuS01MPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Gb3JtYXQuWE1MLHtuYW1lc3BhY2VzOntrbWw6Imh0dHA6Ly93d3cub3Blbmdpcy5uZXQva21sLzIuMiIsZ3g6Imh0dHA6Ly93d3cuZ29vZ2xlLmNvbS9rbWwvZXh0LzIuMiJ9LGttbG5zOiJodHRwOi8vZWFydGguZ29vZ2xlLmNvbS9rbWwvMi4wIixwbGFjZW1hcmtzRGVzYzoiTm8gZGVzY3JpcHRpb24gYXZhaWxhYmxlIixmb2xkZXJzTmFtZToiT3BlbkxheWVycyBleHBvcnQiLGZvbGRlcnNEZXNjOiJFeHBvcnRlZCBvbiAiK25ldyBEYXRlLGV4dHJhY3RBdHRyaWJ1dGVzOiEwLGt2cEF0dHJpYnV0ZXM6ITEsZXh0cmFjdFN0eWxlczohMSxleHRyYWN0VHJhY2tzOiExLHRyYWNrQXR0cmlidXRlczpudWxsLGludGVybmFsbnM6bnVsbCxmZWF0dXJlczpudWxsLHN0eWxlczpudWxsLHN0eWxlQmFzZVVybDoiIixmZXRjaGVkOm51bGwsbWF4RGVwdGg6MCxpbml0aWFsaXplOmZ1bmN0aW9uKGEpe3RoaXMucmVnRXhlcz0Ke3RyaW1TcGFjZTovXlxzKnxccyokL2cscmVtb3ZlU3BhY2U6L1xzKi9nLHNwbGl0U3BhY2U6L1xzKy8sdHJpbUNvbW1hOi9ccyosXHMqL2csa21sQ29sb3I6Lyhcd3syfSkoXHd7Mn0pKFx3ezJ9KShcd3syfSkvLGttbEljb25QYWxldHRlOi9yb290OlwvXC9pY29uc1wvcGFsZXR0ZS0oXGQrKShcLlx3KykvLHN0cmFpZ2h0QnJhY2tldDovXCRcWyguKj8pXF0vZ307dGhpcy5leHRlcm5hbFByb2plY3Rpb249bmV3IE9wZW5MYXllcnMuUHJvamVjdGlvbigiRVBTRzo0MzI2Iik7T3BlbkxheWVycy5Gb3JtYXQuWE1MLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsW2FdKX0scmVhZDpmdW5jdGlvbihhKXt0aGlzLmZlYXR1cmVzPVtdO3RoaXMuc3R5bGVzPXt9O3RoaXMuZmV0Y2hlZD17fTtyZXR1cm4gdGhpcy5wYXJzZURhdGEoYSx7ZGVwdGg6MCxzdHlsZUJhc2VVcmw6dGhpcy5zdHlsZUJhc2VVcmx9KX0scGFyc2VEYXRhOmZ1bmN0aW9uKGEsYil7InN0cmluZyI9PXR5cGVvZiBhJiYKKGE9T3BlbkxheWVycy5Gb3JtYXQuWE1MLnByb3RvdHlwZS5yZWFkLmFwcGx5KHRoaXMsW2FdKSk7Zm9yKHZhciBjPVsiTGluayIsIk5ldHdvcmtMaW5rIiwiU3R5bGUiLCJTdHlsZU1hcCIsIlBsYWNlbWFyayJdLGQ9MCxlPWMubGVuZ3RoO2Q8ZTsrK2Qpe3ZhciBmPWNbZF0sZz10aGlzLmdldEVsZW1lbnRzQnlUYWdOYW1lTlMoYSwiKiIsZik7aWYoMCE9Zy5sZW5ndGgpc3dpdGNoKGYudG9Mb3dlckNhc2UoKSl7Y2FzZSAibGluayI6Y2FzZSAibmV0d29ya2xpbmsiOnRoaXMucGFyc2VMaW5rcyhnLGIpO2JyZWFrO2Nhc2UgInN0eWxlIjp0aGlzLmV4dHJhY3RTdHlsZXMmJnRoaXMucGFyc2VTdHlsZXMoZyxiKTticmVhaztjYXNlICJzdHlsZW1hcCI6dGhpcy5leHRyYWN0U3R5bGVzJiZ0aGlzLnBhcnNlU3R5bGVNYXBzKGcsYik7YnJlYWs7Y2FzZSAicGxhY2VtYXJrIjp0aGlzLnBhcnNlRmVhdHVyZXMoZyxiKX19cmV0dXJuIHRoaXMuZmVhdHVyZXN9LHBhcnNlTGlua3M6ZnVuY3Rpb24oYSwKYil7aWYoYi5kZXB0aD49dGhpcy5tYXhEZXB0aClyZXR1cm4hMTt2YXIgYz1PcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHt9LGIpO2MuZGVwdGgrKztmb3IodmFyIGQ9MCxlPWEubGVuZ3RoO2Q8ZTtkKyspe3ZhciBmPXRoaXMucGFyc2VQcm9wZXJ0eShhW2RdLCIqIiwiaHJlZiIpO2YmJiF0aGlzLmZldGNoZWRbZl0mJih0aGlzLmZldGNoZWRbZl09ITAsKGY9dGhpcy5mZXRjaExpbmsoZikpJiZ0aGlzLnBhcnNlRGF0YShmLGMpKX19LGZldGNoTGluazpmdW5jdGlvbihhKXtpZihhPU9wZW5MYXllcnMuUmVxdWVzdC5HRVQoe3VybDphLGFzeW5jOiExfSkpcmV0dXJuIGEucmVzcG9uc2VUZXh0fSxwYXJzZVN0eWxlczpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz0wLGQ9YS5sZW5ndGg7YzxkO2MrKyl7dmFyIGU9dGhpcy5wYXJzZVN0eWxlKGFbY10pO2UmJih0aGlzLnN0eWxlc1soYi5zdHlsZUJhc2VVcmx8fCIiKSsiIyIrZS5pZF09ZSl9fSxwYXJzZUttbENvbG9yOmZ1bmN0aW9uKGEpe3ZhciBiPQpudWxsO2EmJihhPWEubWF0Y2godGhpcy5yZWdFeGVzLmttbENvbG9yKSkmJihiPXtjb2xvcjoiIyIrYVs0XSthWzNdK2FbMl0sb3BhY2l0eTpwYXJzZUludChhWzFdLDE2KS8yNTV9KTtyZXR1cm4gYn0scGFyc2VTdHlsZTpmdW5jdGlvbihhKXtmb3IodmFyIGI9e30sYz1bIkxpbmVTdHlsZSIsIlBvbHlTdHlsZSIsIkljb25TdHlsZSIsIkJhbGxvb25TdHlsZSIsIkxhYmVsU3R5bGUiXSxkLGUsZj0wLGc9Yy5sZW5ndGg7ZjxnOysrZilpZihkPWNbZl0sZT10aGlzLmdldEVsZW1lbnRzQnlUYWdOYW1lTlMoYSwiKiIsZClbMF0pc3dpdGNoKGQudG9Mb3dlckNhc2UoKSl7Y2FzZSAibGluZXN0eWxlIjpkPXRoaXMucGFyc2VQcm9wZXJ0eShlLCIqIiwiY29sb3IiKTtpZihkPXRoaXMucGFyc2VLbWxDb2xvcihkKSliLnN0cm9rZUNvbG9yPWQuY29sb3IsYi5zdHJva2VPcGFjaXR5PWQub3BhY2l0eTsoZD10aGlzLnBhcnNlUHJvcGVydHkoZSwiKiIsIndpZHRoIikpJiYoYi5zdHJva2VXaWR0aD0KZCk7YnJlYWs7Y2FzZSAicG9seXN0eWxlIjpkPXRoaXMucGFyc2VQcm9wZXJ0eShlLCIqIiwiY29sb3IiKTtpZihkPXRoaXMucGFyc2VLbWxDb2xvcihkKSliLmZpbGxPcGFjaXR5PWQub3BhY2l0eSxiLmZpbGxDb2xvcj1kLmNvbG9yOyIwIj09dGhpcy5wYXJzZVByb3BlcnR5KGUsIioiLCJmaWxsIikmJihiLmZpbGxDb2xvcj0ibm9uZSIpOyIwIj09dGhpcy5wYXJzZVByb3BlcnR5KGUsIioiLCJvdXRsaW5lIikmJihiLnN0cm9rZVdpZHRoPSIwIik7YnJlYWs7Y2FzZSAiaWNvbnN0eWxlIjp2YXIgaD1wYXJzZUZsb2F0KHRoaXMucGFyc2VQcm9wZXJ0eShlLCIqIiwic2NhbGUiKXx8MSk7ZD0zMipoO3ZhciBrPTMyKmgsbD10aGlzLmdldEVsZW1lbnRzQnlUYWdOYW1lTlMoZSwiKiIsIkljb24iKVswXTtpZihsKXt2YXIgbT10aGlzLnBhcnNlUHJvcGVydHkobCwiKiIsImhyZWYiKTtpZihtKXt2YXIgbj10aGlzLnBhcnNlUHJvcGVydHkobCwiKiIsInciKSxwPXRoaXMucGFyc2VQcm9wZXJ0eShsLAoiKiIsImgiKTshT3BlbkxheWVycy5TdHJpbmcuc3RhcnRzV2l0aChtLCJodHRwOi8vbWFwcy5nb29nbGUuY29tL21hcGZpbGVzL2ttbCIpfHwobnx8cCl8fChwPW49NjQsaC89Mik7bj1ufHxwO3A9cHx8bjtuJiYoZD1wYXJzZUludChuKSpoKTtwJiYoaz1wYXJzZUludChwKSpoKTtpZihwPW0ubWF0Y2godGhpcy5yZWdFeGVzLmttbEljb25QYWxldHRlKSluPXBbMV0scD1wWzJdLG09dGhpcy5wYXJzZVByb3BlcnR5KGwsIioiLCJ4IiksbD10aGlzLnBhcnNlUHJvcGVydHkobCwiKiIsInkiKSxtPSJodHRwOi8vbWFwcy5nb29nbGUuY29tL21hcGZpbGVzL2ttbC9wYWwiK24rIi9pY29uIisoOCoobD83LWwvMzI6NykrKG0/bS8zMjowKSkrcDtiLmdyYXBoaWNPcGFjaXR5PTE7Yi5leHRlcm5hbEdyYXBoaWM9bX19aWYoZT10aGlzLmdldEVsZW1lbnRzQnlUYWdOYW1lTlMoZSwiKiIsImhvdFNwb3QiKVswXSltPXBhcnNlRmxvYXQoZS5nZXRBdHRyaWJ1dGUoIngiKSksbD1wYXJzZUZsb2F0KGUuZ2V0QXR0cmlidXRlKCJ5IikpLApuPWUuZ2V0QXR0cmlidXRlKCJ4dW5pdHMiKSwicGl4ZWxzIj09bj9iLmdyYXBoaWNYT2Zmc2V0PS1tKmg6Imluc2V0UGl4ZWxzIj09bj9iLmdyYXBoaWNYT2Zmc2V0PS1kK20qaDoiZnJhY3Rpb24iPT1uJiYoYi5ncmFwaGljWE9mZnNldD0tZCptKSxlPWUuZ2V0QXR0cmlidXRlKCJ5dW5pdHMiKSwicGl4ZWxzIj09ZT9iLmdyYXBoaWNZT2Zmc2V0PS1rK2wqaCsxOiJpbnNldFBpeGVscyI9PWU/Yi5ncmFwaGljWU9mZnNldD0tKGwqaCkrMToiZnJhY3Rpb24iPT1lJiYoYi5ncmFwaGljWU9mZnNldD0tayooMS1sKSsxKTtiLmdyYXBoaWNXaWR0aD1kO2IuZ3JhcGhpY0hlaWdodD1rO2JyZWFrO2Nhc2UgImJhbGxvb25zdHlsZSI6KGU9T3BlbkxheWVycy5VdGlsLmdldFhtbE5vZGVWYWx1ZShlKSkmJihiLmJhbGxvb25TdHlsZT1lLnJlcGxhY2UodGhpcy5yZWdFeGVzLnN0cmFpZ2h0QnJhY2tldCwiJHskMX0iKSk7YnJlYWs7Y2FzZSAibGFiZWxzdHlsZSI6aWYoZD10aGlzLnBhcnNlUHJvcGVydHkoZSwKIioiLCJjb2xvciIpLGQ9dGhpcy5wYXJzZUttbENvbG9yKGQpKWIuZm9udENvbG9yPWQuY29sb3IsYi5mb250T3BhY2l0eT1kLm9wYWNpdHl9IWIuc3Ryb2tlQ29sb3ImJmIuZmlsbENvbG9yJiYoYi5zdHJva2VDb2xvcj1iLmZpbGxDb2xvcik7KGE9YS5nZXRBdHRyaWJ1dGUoImlkIikpJiZiJiYoYi5pZD1hKTtyZXR1cm4gYn0scGFyc2VTdHlsZU1hcHM6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9MCxkPWEubGVuZ3RoO2M8ZDtjKyspZm9yKHZhciBlPWFbY10sZj10aGlzLmdldEVsZW1lbnRzQnlUYWdOYW1lTlMoZSwiKiIsIlBhaXIiKSxlPWUuZ2V0QXR0cmlidXRlKCJpZCIpLGc9MCxoPWYubGVuZ3RoO2c8aDtnKyspe3ZhciBrPWZbZ10sbD10aGlzLnBhcnNlUHJvcGVydHkoaywiKiIsImtleSIpOyhrPXRoaXMucGFyc2VQcm9wZXJ0eShrLCIqIiwic3R5bGVVcmwiKSkmJiJub3JtYWwiPT1sJiYodGhpcy5zdHlsZXNbKGIuc3R5bGVCYXNlVXJsfHwiIikrIiMiK2VdPXRoaXMuc3R5bGVzWyhiLnN0eWxlQmFzZVVybHx8CiIiKStrXSl9fSxwYXJzZUZlYXR1cmVzOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPVtdLGQ9MCxlPWEubGVuZ3RoO2Q8ZTtkKyspe3ZhciBmPWFbZF0sZz10aGlzLnBhcnNlRmVhdHVyZS5hcHBseSh0aGlzLFtmXSk7aWYoZyl7dGhpcy5leHRyYWN0U3R5bGVzJiYoZy5hdHRyaWJ1dGVzJiZnLmF0dHJpYnV0ZXMuc3R5bGVVcmwpJiYoZy5zdHlsZT10aGlzLmdldFN0eWxlKGcuYXR0cmlidXRlcy5zdHlsZVVybCxiKSk7aWYodGhpcy5leHRyYWN0U3R5bGVzKXt2YXIgaD10aGlzLmdldEVsZW1lbnRzQnlUYWdOYW1lTlMoZiwiKiIsIlN0eWxlIilbMF07aCYmKGg9dGhpcy5wYXJzZVN0eWxlKGgpKSYmKGcuc3R5bGU9T3BlbkxheWVycy5VdGlsLmV4dGVuZChnLnN0eWxlLGgpKX10aGlzLmV4dHJhY3RUcmFja3M/KGY9dGhpcy5nZXRFbGVtZW50c0J5VGFnTmFtZU5TKGYsdGhpcy5uYW1lc3BhY2VzLmd4LCJUcmFjayIpKSYmMDxmLmxlbmd0aCYmKGc9e2ZlYXR1cmVzOltdLGZlYXR1cmU6Z30sCnRoaXMucmVhZE5vZGUoZlswXSxnKSwwPGcuZmVhdHVyZXMubGVuZ3RoJiZjLnB1c2guYXBwbHkoYyxnLmZlYXR1cmVzKSk6Yy5wdXNoKGcpfWVsc2UgdGhyb3ciQmFkIFBsYWNlbWFyazogIitkO310aGlzLmZlYXR1cmVzPXRoaXMuZmVhdHVyZXMuY29uY2F0KGMpfSxyZWFkZXJzOntrbWw6e3doZW46ZnVuY3Rpb24oYSxiKXtiLndoZW5zLnB1c2goT3BlbkxheWVycy5EYXRlLnBhcnNlKHRoaXMuZ2V0Q2hpbGRWYWx1ZShhKSkpfSxfdHJhY2tQb2ludEF0dHJpYnV0ZTpmdW5jdGlvbihhLGIpe3ZhciBjPWEubm9kZU5hbWUuc3BsaXQoIjoiKS5wb3AoKTtiLmF0dHJpYnV0ZXNbY10ucHVzaCh0aGlzLmdldENoaWxkVmFsdWUoYSkpfX0sZ3g6e1RyYWNrOmZ1bmN0aW9uKGEsYil7dmFyIGM9e3doZW5zOltdLHBvaW50czpbXSxhbmdsZXM6W119O2lmKHRoaXMudHJhY2tBdHRyaWJ1dGVzKXt2YXIgZDtjLmF0dHJpYnV0ZXM9e307Zm9yKHZhciBlPTAsZj10aGlzLnRyYWNrQXR0cmlidXRlcy5sZW5ndGg7ZTwKZjsrK2UpZD10aGlzLnRyYWNrQXR0cmlidXRlc1tlXSxjLmF0dHJpYnV0ZXNbZF09W10sZCBpbiB0aGlzLnJlYWRlcnMua21sfHwodGhpcy5yZWFkZXJzLmttbFtkXT10aGlzLnJlYWRlcnMua21sLl90cmFja1BvaW50QXR0cmlidXRlKX10aGlzLnJlYWRDaGlsZE5vZGVzKGEsYyk7aWYoYy53aGVucy5sZW5ndGghPT1jLnBvaW50cy5sZW5ndGgpdGhyb3cgRXJyb3IoImd4OlRyYWNrIHdpdGggdW5lcXVhbCBudW1iZXIgb2Ygd2hlbiAoIitjLndoZW5zLmxlbmd0aCsiKSBhbmQgZ3g6Y29vcmQgKCIrYy5wb2ludHMubGVuZ3RoKyIpIGVsZW1lbnRzLiIpO3ZhciBnPTA8Yy5hbmdsZXMubGVuZ3RoO2lmKGcmJmMud2hlbnMubGVuZ3RoIT09Yy5hbmdsZXMubGVuZ3RoKXRocm93IEVycm9yKCJneDpUcmFjayB3aXRoIHVuZXF1YWwgbnVtYmVyIG9mIHdoZW4gKCIrYy53aGVucy5sZW5ndGgrIikgYW5kIGd4OmFuZ2xlcyAoIitjLmFuZ2xlcy5sZW5ndGgrIikgZWxlbWVudHMuIik7Zm9yKHZhciBoLAplPTAsZj1jLndoZW5zLmxlbmd0aDtlPGY7KytlKXtoPWIuZmVhdHVyZS5jbG9uZSgpO2guZmlkPWIuZmVhdHVyZS5maWR8fGIuZmVhdHVyZS5pZDtkPWMucG9pbnRzW2VdO2guZ2VvbWV0cnk9ZDsieiJpbiBkJiYoaC5hdHRyaWJ1dGVzLmFsdGl0dWRlPWQueik7dGhpcy5pbnRlcm5hbFByb2plY3Rpb24mJnRoaXMuZXh0ZXJuYWxQcm9qZWN0aW9uJiZoLmdlb21ldHJ5LnRyYW5zZm9ybSh0aGlzLmV4dGVybmFsUHJvamVjdGlvbix0aGlzLmludGVybmFsUHJvamVjdGlvbik7aWYodGhpcy50cmFja0F0dHJpYnV0ZXMpZm9yKHZhciBrPTAsbD10aGlzLnRyYWNrQXR0cmlidXRlcy5sZW5ndGg7azxsOysraylkPXRoaXMudHJhY2tBdHRyaWJ1dGVzW2tdLGguYXR0cmlidXRlc1tkXT1jLmF0dHJpYnV0ZXNbZF1bZV07aC5hdHRyaWJ1dGVzLndoZW49Yy53aGVuc1tlXTtoLmF0dHJpYnV0ZXMudHJhY2tJZD1iLmZlYXR1cmUuaWQ7ZyYmKGQ9Yy5hbmdsZXNbZV0saC5hdHRyaWJ1dGVzLmhlYWRpbmc9CnBhcnNlRmxvYXQoZFswXSksaC5hdHRyaWJ1dGVzLnRpbHQ9cGFyc2VGbG9hdChkWzFdKSxoLmF0dHJpYnV0ZXMucm9sbD1wYXJzZUZsb2F0KGRbMl0pKTtiLmZlYXR1cmVzLnB1c2goaCl9fSxjb29yZDpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuZ2V0Q2hpbGRWYWx1ZShhKS5yZXBsYWNlKHRoaXMucmVnRXhlcy50cmltU3BhY2UsIiIpLnNwbGl0KC9ccysvKSxkPW5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KGNbMF0sY1sxXSk7MjxjLmxlbmd0aCYmKGQuej1wYXJzZUZsb2F0KGNbMl0pKTtiLnBvaW50cy5wdXNoKGQpfSxhbmdsZXM6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmdldENoaWxkVmFsdWUoYSkucmVwbGFjZSh0aGlzLnJlZ0V4ZXMudHJpbVNwYWNlLCIiKS5zcGxpdCgvXHMrLyk7Yi5hbmdsZXMucHVzaChjKX19fSxwYXJzZUZlYXR1cmU6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPVsiTXVsdGlHZW9tZXRyeSIsIlBvbHlnb24iLCJMaW5lU3RyaW5nIiwiUG9pbnQiXSwKYyxkLGUsZj0wLGc9Yi5sZW5ndGg7ZjxnOysrZilpZihjPWJbZl0sdGhpcy5pbnRlcm5hbG5zPWEubmFtZXNwYWNlVVJJP2EubmFtZXNwYWNlVVJJOnRoaXMua21sbnMsZD10aGlzLmdldEVsZW1lbnRzQnlUYWdOYW1lTlMoYSx0aGlzLmludGVybmFsbnMsYyksMDxkLmxlbmd0aCl7aWYoYj10aGlzLnBhcnNlR2VvbWV0cnlbYy50b0xvd2VyQ2FzZSgpXSllPWIuYXBwbHkodGhpcyxbZFswXV0pLHRoaXMuaW50ZXJuYWxQcm9qZWN0aW9uJiZ0aGlzLmV4dGVybmFsUHJvamVjdGlvbiYmZS50cmFuc2Zvcm0odGhpcy5leHRlcm5hbFByb2plY3Rpb24sdGhpcy5pbnRlcm5hbFByb2plY3Rpb24pO2Vsc2UgdGhyb3cgbmV3IFR5cGVFcnJvcigiVW5zdXBwb3J0ZWQgZ2VvbWV0cnkgdHlwZTogIitjKTticmVha312YXIgaDt0aGlzLmV4dHJhY3RBdHRyaWJ1dGVzJiYoaD10aGlzLnBhcnNlQXR0cmlidXRlcyhhKSk7Yz1uZXcgT3BlbkxheWVycy5GZWF0dXJlLlZlY3RvcihlLGgpO2E9YS5nZXRBdHRyaWJ1dGUoImlkIil8fAphLmdldEF0dHJpYnV0ZSgibmFtZSIpO251bGwhPWEmJihjLmZpZD1hKTtyZXR1cm4gY30sZ2V0U3R5bGU6ZnVuY3Rpb24oYSxiKXt2YXIgYz1PcGVuTGF5ZXJzLlV0aWwucmVtb3ZlVGFpbChhKSxkPU9wZW5MYXllcnMuVXRpbC5leHRlbmQoe30sYik7ZC5kZXB0aCsrO2Quc3R5bGVCYXNlVXJsPWM7IXRoaXMuc3R5bGVzW2FdJiYhT3BlbkxheWVycy5TdHJpbmcuc3RhcnRzV2l0aChhLCIjIikmJmQuZGVwdGg8PXRoaXMubWF4RGVwdGgmJiF0aGlzLmZldGNoZWRbY10mJihjPXRoaXMuZmV0Y2hMaW5rKGMpKSYmdGhpcy5wYXJzZURhdGEoYyxkKTtyZXR1cm4gT3BlbkxheWVycy5VdGlsLmV4dGVuZCh7fSx0aGlzLnN0eWxlc1thXSl9LHBhcnNlR2VvbWV0cnk6e3BvaW50OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZ2V0RWxlbWVudHNCeVRhZ05hbWVOUyhhLHRoaXMuaW50ZXJuYWxucywiY29vcmRpbmF0ZXMiKTthPVtdO2lmKDA8Yi5sZW5ndGgpe3ZhciBjPWJbMF0uZmlyc3RDaGlsZC5ub2RlVmFsdWUsCmM9Yy5yZXBsYWNlKHRoaXMucmVnRXhlcy5yZW1vdmVTcGFjZSwiIik7YT1jLnNwbGl0KCIsIil9Yj1udWxsO2lmKDE8YS5sZW5ndGgpMj09YS5sZW5ndGgmJihhWzJdPW51bGwpLGI9bmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoYVswXSxhWzFdLGFbMl0pO2Vsc2UgdGhyb3ciQmFkIGNvb3JkaW5hdGUgc3RyaW5nOiAiK2M7cmV0dXJuIGJ9LGxpbmVzdHJpbmc6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmdldEVsZW1lbnRzQnlUYWdOYW1lTlMoYSx0aGlzLmludGVybmFsbnMsImNvb3JkaW5hdGVzIiksZD1udWxsO2lmKDA8Yy5sZW5ndGgpe2Zvcih2YXIgYz10aGlzLmdldENoaWxkVmFsdWUoY1swXSksYz1jLnJlcGxhY2UodGhpcy5yZWdFeGVzLnRyaW1TcGFjZSwiIiksYz1jLnJlcGxhY2UodGhpcy5yZWdFeGVzLnRyaW1Db21tYSwiLCIpLGQ9Yy5zcGxpdCh0aGlzLnJlZ0V4ZXMuc3BsaXRTcGFjZSksZT1kLmxlbmd0aCxmPUFycmF5KGUpLGcsaCxrPTA7azxlOysraylpZihnPQpkW2tdLnNwbGl0KCIsIiksaD1nLmxlbmd0aCwxPGgpMj09Zy5sZW5ndGgmJihnWzJdPW51bGwpLGZba109bmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoZ1swXSxnWzFdLGdbMl0pO2Vsc2UgdGhyb3ciQmFkIExpbmVTdHJpbmcgcG9pbnQgY29vcmRpbmF0ZXM6ICIrZFtrXTtpZihlKWQ9Yj9uZXcgT3BlbkxheWVycy5HZW9tZXRyeS5MaW5lYXJSaW5nKGYpOm5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LkxpbmVTdHJpbmcoZik7ZWxzZSB0aHJvdyJCYWQgTGluZVN0cmluZyBjb29yZGluYXRlczogIitjO31yZXR1cm4gZH0scG9seWdvbjpmdW5jdGlvbihhKXthPXRoaXMuZ2V0RWxlbWVudHNCeVRhZ05hbWVOUyhhLHRoaXMuaW50ZXJuYWxucywiTGluZWFyUmluZyIpO3ZhciBiPWEubGVuZ3RoLGM9QXJyYXkoYik7aWYoMDxiKWZvcih2YXIgZD0wLGU9YS5sZW5ndGg7ZDxlOysrZClpZihiPXRoaXMucGFyc2VHZW9tZXRyeS5saW5lc3RyaW5nLmFwcGx5KHRoaXMsW2FbZF0sITBdKSljW2RdPQpiO2Vsc2UgdGhyb3ciQmFkIExpbmVhclJpbmcgZ2VvbWV0cnk6ICIrZDtyZXR1cm4gbmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9seWdvbihjKX0sbXVsdGlnZW9tZXRyeTpmdW5jdGlvbihhKXtmb3IodmFyIGIsYz1bXSxkPWEuY2hpbGROb2RlcyxlPTAsZj1kLmxlbmd0aDtlPGY7KytlKWE9ZFtlXSwxPT1hLm5vZGVUeXBlJiYoYj1hLnByZWZpeD9hLm5vZGVOYW1lLnNwbGl0KCI6IilbMV06YS5ub2RlTmFtZSwoYj10aGlzLnBhcnNlR2VvbWV0cnlbYi50b0xvd2VyQ2FzZSgpXSkmJmMucHVzaChiLmFwcGx5KHRoaXMsW2FdKSkpO3JldHVybiBuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Db2xsZWN0aW9uKGMpfX0scGFyc2VBdHRyaWJ1dGVzOmZ1bmN0aW9uKGEpe3ZhciBiPXt9LGM9YS5nZXRFbGVtZW50c0J5VGFnTmFtZSgiRXh0ZW5kZWREYXRhIik7Yy5sZW5ndGgmJihiPXRoaXMucGFyc2VFeHRlbmRlZERhdGEoY1swXSkpO3ZhciBkLGUsZjthPWEuY2hpbGROb2Rlcztmb3IodmFyIGM9CjAsZz1hLmxlbmd0aDtjPGc7KytjKWlmKGQ9YVtjXSwxPT1kLm5vZGVUeXBlJiYoZT1kLmNoaWxkTm9kZXMsMTw9ZS5sZW5ndGgmJjM+PWUubGVuZ3RoKSl7c3dpdGNoKGUubGVuZ3RoKXtjYXNlIDE6Zj1lWzBdO2JyZWFrO2Nhc2UgMjpmPWVbMF07ZT1lWzFdO2Y9Mz09Zi5ub2RlVHlwZXx8ND09Zi5ub2RlVHlwZT9mOmU7YnJlYWs7ZGVmYXVsdDpmPWVbMV19aWYoMz09Zi5ub2RlVHlwZXx8ND09Zi5ub2RlVHlwZSlpZihkPWQucHJlZml4P2Qubm9kZU5hbWUuc3BsaXQoIjoiKVsxXTpkLm5vZGVOYW1lLGY9T3BlbkxheWVycy5VdGlsLmdldFhtbE5vZGVWYWx1ZShmKSlmPWYucmVwbGFjZSh0aGlzLnJlZ0V4ZXMudHJpbVNwYWNlLCIiKSxiW2RdPWZ9cmV0dXJuIGJ9LHBhcnNlRXh0ZW5kZWREYXRhOmZ1bmN0aW9uKGEpe3ZhciBiPXt9LGMsZCxlLGYsZz1hLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJEYXRhIik7Yz0wO2ZvcihkPWcubGVuZ3RoO2M8ZDtjKyspe2U9Z1tjXTtmPWUuZ2V0QXR0cmlidXRlKCJuYW1lIik7CnZhciBoPXt9LGs9ZS5nZXRFbGVtZW50c0J5VGFnTmFtZSgidmFsdWUiKTtrLmxlbmd0aCYmKGgudmFsdWU9dGhpcy5nZXRDaGlsZFZhbHVlKGtbMF0pKTt0aGlzLmt2cEF0dHJpYnV0ZXM/YltmXT1oLnZhbHVlOihlPWUuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImRpc3BsYXlOYW1lIiksZS5sZW5ndGgmJihoLmRpc3BsYXlOYW1lPXRoaXMuZ2V0Q2hpbGRWYWx1ZShlWzBdKSksYltmXT1oKX1hPWEuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIlNpbXBsZURhdGEiKTtjPTA7Zm9yKGQ9YS5sZW5ndGg7YzxkO2MrKyloPXt9LGU9YVtjXSxmPWUuZ2V0QXR0cmlidXRlKCJuYW1lIiksaC52YWx1ZT10aGlzLmdldENoaWxkVmFsdWUoZSksdGhpcy5rdnBBdHRyaWJ1dGVzP2JbZl09aC52YWx1ZTooaC5kaXNwbGF5TmFtZT1mLGJbZl09aCk7cmV0dXJuIGJ9LHBhcnNlUHJvcGVydHk6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkO2E9dGhpcy5nZXRFbGVtZW50c0J5VGFnTmFtZU5TKGEsYixjKTt0cnl7ZD1PcGVuTGF5ZXJzLlV0aWwuZ2V0WG1sTm9kZVZhbHVlKGFbMF0pfWNhdGNoKGUpe2Q9Cm51bGx9cmV0dXJuIGR9LHdyaXRlOmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuVXRpbC5pc0FycmF5KGEpfHwoYT1bYV0pO2Zvcih2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROUyh0aGlzLmttbG5zLCJrbWwiKSxjPXRoaXMuY3JlYXRlRm9sZGVyWE1MKCksZD0wLGU9YS5sZW5ndGg7ZDxlOysrZCljLmFwcGVuZENoaWxkKHRoaXMuY3JlYXRlUGxhY2VtYXJrWE1MKGFbZF0pKTtiLmFwcGVuZENoaWxkKGMpO3JldHVybiBPcGVuTGF5ZXJzLkZvcm1hdC5YTUwucHJvdG90eXBlLndyaXRlLmFwcGx5KHRoaXMsW2JdKX0sY3JlYXRlRm9sZGVyWE1MOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5jcmVhdGVFbGVtZW50TlModGhpcy5rbWxucywiRm9sZGVyIik7aWYodGhpcy5mb2xkZXJzTmFtZSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlModGhpcy5rbWxucywibmFtZSIpLGM9dGhpcy5jcmVhdGVUZXh0Tm9kZSh0aGlzLmZvbGRlcnNOYW1lKTtiLmFwcGVuZENoaWxkKGMpO2EuYXBwZW5kQ2hpbGQoYil9dGhpcy5mb2xkZXJzRGVzYyYmCihiPXRoaXMuY3JlYXRlRWxlbWVudE5TKHRoaXMua21sbnMsImRlc2NyaXB0aW9uIiksYz10aGlzLmNyZWF0ZVRleHROb2RlKHRoaXMuZm9sZGVyc0Rlc2MpLGIuYXBwZW5kQ2hpbGQoYyksYS5hcHBlbmRDaGlsZChiKSk7cmV0dXJuIGF9LGNyZWF0ZVBsYWNlbWFya1hNTDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROUyh0aGlzLmttbG5zLCJuYW1lIiksYz1hLnN0eWxlJiZhLnN0eWxlLmxhYmVsP2Euc3R5bGUubGFiZWw6YS5pZDtiLmFwcGVuZENoaWxkKHRoaXMuY3JlYXRlVGV4dE5vZGUoYS5hdHRyaWJ1dGVzLm5hbWV8fGMpKTt2YXIgZD10aGlzLmNyZWF0ZUVsZW1lbnROUyh0aGlzLmttbG5zLCJkZXNjcmlwdGlvbiIpO2QuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVUZXh0Tm9kZShhLmF0dHJpYnV0ZXMuZGVzY3JpcHRpb258fHRoaXMucGxhY2VtYXJrc0Rlc2MpKTtjPXRoaXMuY3JlYXRlRWxlbWVudE5TKHRoaXMua21sbnMsIlBsYWNlbWFyayIpO251bGwhPQphLmZpZCYmYy5zZXRBdHRyaWJ1dGUoImlkIixhLmZpZCk7Yy5hcHBlbmRDaGlsZChiKTtjLmFwcGVuZENoaWxkKGQpO2I9dGhpcy5idWlsZEdlb21ldHJ5Tm9kZShhLmdlb21ldHJ5KTtjLmFwcGVuZENoaWxkKGIpO2EuYXR0cmlidXRlcyYmKGE9dGhpcy5idWlsZEV4dGVuZGVkRGF0YShhLmF0dHJpYnV0ZXMpKSYmYy5hcHBlbmRDaGlsZChhKTtyZXR1cm4gY30sYnVpbGRHZW9tZXRyeU5vZGU6ZnVuY3Rpb24oYSl7dmFyIGI9YS5DTEFTU19OQU1FLGI9Yi5zdWJzdHJpbmcoYi5sYXN0SW5kZXhPZigiLiIpKzEpLGI9dGhpcy5idWlsZEdlb21ldHJ5W2IudG9Mb3dlckNhc2UoKV0sYz1udWxsO2ImJihjPWIuYXBwbHkodGhpcyxbYV0pKTtyZXR1cm4gY30sYnVpbGRHZW9tZXRyeTp7cG9pbnQ6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlModGhpcy5rbWxucywiUG9pbnQiKTtiLmFwcGVuZENoaWxkKHRoaXMuYnVpbGRDb29yZGluYXRlc05vZGUoYSkpO3JldHVybiBifSwKbXVsdGlwb2ludDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5idWlsZEdlb21ldHJ5LmNvbGxlY3Rpb24uYXBwbHkodGhpcyxbYV0pfSxsaW5lc3RyaW5nOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TKHRoaXMua21sbnMsIkxpbmVTdHJpbmciKTtiLmFwcGVuZENoaWxkKHRoaXMuYnVpbGRDb29yZGluYXRlc05vZGUoYSkpO3JldHVybiBifSxtdWx0aWxpbmVzdHJpbmc6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuYnVpbGRHZW9tZXRyeS5jb2xsZWN0aW9uLmFwcGx5KHRoaXMsW2FdKX0sbGluZWFycmluZzpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROUyh0aGlzLmttbG5zLCJMaW5lYXJSaW5nIik7Yi5hcHBlbmRDaGlsZCh0aGlzLmJ1aWxkQ29vcmRpbmF0ZXNOb2RlKGEpKTtyZXR1cm4gYn0scG9seWdvbjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROUyh0aGlzLmttbG5zLCJQb2x5Z29uIik7YT1hLmNvbXBvbmVudHM7CmZvcih2YXIgYyxkLGU9MCxmPWEubGVuZ3RoO2U8ZjsrK2UpYz0wPT1lPyJvdXRlckJvdW5kYXJ5SXMiOiJpbm5lckJvdW5kYXJ5SXMiLGM9dGhpcy5jcmVhdGVFbGVtZW50TlModGhpcy5rbWxucyxjKSxkPXRoaXMuYnVpbGRHZW9tZXRyeS5saW5lYXJyaW5nLmFwcGx5KHRoaXMsW2FbZV1dKSxjLmFwcGVuZENoaWxkKGQpLGIuYXBwZW5kQ2hpbGQoYyk7cmV0dXJuIGJ9LG11bHRpcG9seWdvbjpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5idWlsZEdlb21ldHJ5LmNvbGxlY3Rpb24uYXBwbHkodGhpcyxbYV0pfSxjb2xsZWN0aW9uOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROUyh0aGlzLmttbG5zLCJNdWx0aUdlb21ldHJ5IiksYyxkPTAsZT1hLmNvbXBvbmVudHMubGVuZ3RoO2Q8ZTsrK2QpKGM9dGhpcy5idWlsZEdlb21ldHJ5Tm9kZS5hcHBseSh0aGlzLFthLmNvbXBvbmVudHNbZF1dKSkmJmIuYXBwZW5kQ2hpbGQoYyk7cmV0dXJuIGJ9fSxidWlsZENvb3JkaW5hdGVzTm9kZTpmdW5jdGlvbihhKXt2YXIgYj0KdGhpcy5jcmVhdGVFbGVtZW50TlModGhpcy5rbWxucywiY29vcmRpbmF0ZXMiKSxjO2lmKGM9YS5jb21wb25lbnRzKXtmb3IodmFyIGQ9Yy5sZW5ndGgsZT1BcnJheShkKSxmPTA7ZjxkOysrZilhPWNbZl0sZVtmXT10aGlzLmJ1aWxkQ29vcmRpbmF0ZXMoYSk7Yz1lLmpvaW4oIiAiKX1lbHNlIGM9dGhpcy5idWlsZENvb3JkaW5hdGVzKGEpO2M9dGhpcy5jcmVhdGVUZXh0Tm9kZShjKTtiLmFwcGVuZENoaWxkKGMpO3JldHVybiBifSxidWlsZENvb3JkaW5hdGVzOmZ1bmN0aW9uKGEpe3RoaXMuaW50ZXJuYWxQcm9qZWN0aW9uJiZ0aGlzLmV4dGVybmFsUHJvamVjdGlvbiYmKGE9YS5jbG9uZSgpLGEudHJhbnNmb3JtKHRoaXMuaW50ZXJuYWxQcm9qZWN0aW9uLHRoaXMuZXh0ZXJuYWxQcm9qZWN0aW9uKSk7cmV0dXJuIGEueCsiLCIrYS55fSxidWlsZEV4dGVuZGVkRGF0YTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROUyh0aGlzLmttbG5zLCJFeHRlbmRlZERhdGEiKSwKYztmb3IoYyBpbiBhKWlmKGFbY10mJiJuYW1lIiE9YyYmImRlc2NyaXB0aW9uIiE9YyYmInN0eWxlVXJsIiE9Yyl7dmFyIGQ9dGhpcy5jcmVhdGVFbGVtZW50TlModGhpcy5rbWxucywiRGF0YSIpO2Quc2V0QXR0cmlidXRlKCJuYW1lIixjKTt2YXIgZT10aGlzLmNyZWF0ZUVsZW1lbnROUyh0aGlzLmttbG5zLCJ2YWx1ZSIpO2lmKCJvYmplY3QiPT10eXBlb2YgYVtjXSl7aWYoYVtjXS52YWx1ZSYmZS5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZVRleHROb2RlKGFbY10udmFsdWUpKSxhW2NdLmRpc3BsYXlOYW1lKXt2YXIgZj10aGlzLmNyZWF0ZUVsZW1lbnROUyh0aGlzLmttbG5zLCJkaXNwbGF5TmFtZSIpO2YuYXBwZW5kQ2hpbGQodGhpcy5nZXRYTUxEb2MoKS5jcmVhdGVDREFUQVNlY3Rpb24oYVtjXS5kaXNwbGF5TmFtZSkpO2QuYXBwZW5kQ2hpbGQoZil9fWVsc2UgZS5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZVRleHROb2RlKGFbY10pKTtkLmFwcGVuZENoaWxkKGUpO2IuYXBwZW5kQ2hpbGQoZCl9cmV0dXJuIHRoaXMuaXNTaW1wbGVDb250ZW50KGIpPwpudWxsOmJ9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuRm9ybWF0LktNTCJ9KTtPcGVuTGF5ZXJzLkZvcm1hdC5XTVNDYXBhYmlsaXRpZXM9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkZvcm1hdC5YTUwuVmVyc2lvbmVkT0dDLHtkZWZhdWx0VmVyc2lvbjoiMS4xLjEiLHByb2ZpbGU6bnVsbCxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkZvcm1hdC5XTVNDYXBhYmlsaXRpZXMifSk7T3BlbkxheWVycy5Gb3JtYXQuV01TQ2FwYWJpbGl0aWVzLnYxPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Gb3JtYXQuWE1MLHtuYW1lc3BhY2VzOnt3bXM6Imh0dHA6Ly93d3cub3Blbmdpcy5uZXQvd21zIix4bGluazoiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIseHNpOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxL1hNTFNjaGVtYS1pbnN0YW5jZSJ9LGRlZmF1bHRQcmVmaXg6IndtcyIscmVhZDpmdW5jdGlvbihhKXsic3RyaW5nIj09dHlwZW9mIGEmJihhPU9wZW5MYXllcnMuRm9ybWF0LlhNTC5wcm90b3R5cGUucmVhZC5hcHBseSh0aGlzLFthXSkpO3ZhciBiPWE7YSYmOT09YS5ub2RlVHlwZSYmKGE9YS5kb2N1bWVudEVsZW1lbnQpO3ZhciBjPXt9O3RoaXMucmVhZE5vZGUoYSxjKTt2b2lkIDA9PT1jLnNlcnZpY2UmJihhPW5ldyBPcGVuTGF5ZXJzLkZvcm1hdC5PR0NFeGNlcHRpb25SZXBvcnQsYy5lcnJvcj1hLnJlYWQoYikpO3JldHVybiBjfSxyZWFkZXJzOnt3bXM6e1NlcnZpY2U6ZnVuY3Rpb24oYSwKYil7Yi5zZXJ2aWNlPXt9O3RoaXMucmVhZENoaWxkTm9kZXMoYSxiLnNlcnZpY2UpfSxOYW1lOmZ1bmN0aW9uKGEsYil7Yi5uYW1lPXRoaXMuZ2V0Q2hpbGRWYWx1ZShhKX0sVGl0bGU6ZnVuY3Rpb24oYSxiKXtiLnRpdGxlPXRoaXMuZ2V0Q2hpbGRWYWx1ZShhKX0sQWJzdHJhY3Q6ZnVuY3Rpb24oYSxiKXtiWyJhYnN0cmFjdCJdPXRoaXMuZ2V0Q2hpbGRWYWx1ZShhKX0sQm91bmRpbmdCb3g6ZnVuY3Rpb24oYSxiKXt2YXIgYz17fTtjLmJib3g9W3BhcnNlRmxvYXQoYS5nZXRBdHRyaWJ1dGUoIm1pbngiKSkscGFyc2VGbG9hdChhLmdldEF0dHJpYnV0ZSgibWlueSIpKSxwYXJzZUZsb2F0KGEuZ2V0QXR0cmlidXRlKCJtYXh4IikpLHBhcnNlRmxvYXQoYS5nZXRBdHRyaWJ1dGUoIm1heHkiKSldO3ZhciBkPXt4OnBhcnNlRmxvYXQoYS5nZXRBdHRyaWJ1dGUoInJlc3giKSkseTpwYXJzZUZsb2F0KGEuZ2V0QXR0cmlidXRlKCJyZXN5IikpfTtpc05hTihkLngpJiZpc05hTihkLnkpfHwoYy5yZXM9CmQpO3JldHVybiBjfSxPbmxpbmVSZXNvdXJjZTpmdW5jdGlvbihhLGIpe2IuaHJlZj10aGlzLmdldEF0dHJpYnV0ZU5TKGEsdGhpcy5uYW1lc3BhY2VzLnhsaW5rLCJocmVmIil9LENvbnRhY3RJbmZvcm1hdGlvbjpmdW5jdGlvbihhLGIpe2IuY29udGFjdEluZm9ybWF0aW9uPXt9O3RoaXMucmVhZENoaWxkTm9kZXMoYSxiLmNvbnRhY3RJbmZvcm1hdGlvbil9LENvbnRhY3RQZXJzb25QcmltYXJ5OmZ1bmN0aW9uKGEsYil7Yi5wZXJzb25QcmltYXJ5PXt9O3RoaXMucmVhZENoaWxkTm9kZXMoYSxiLnBlcnNvblByaW1hcnkpfSxDb250YWN0UGVyc29uOmZ1bmN0aW9uKGEsYil7Yi5wZXJzb249dGhpcy5nZXRDaGlsZFZhbHVlKGEpfSxDb250YWN0T3JnYW5pemF0aW9uOmZ1bmN0aW9uKGEsYil7Yi5vcmdhbml6YXRpb249dGhpcy5nZXRDaGlsZFZhbHVlKGEpfSxDb250YWN0UG9zaXRpb246ZnVuY3Rpb24oYSxiKXtiLnBvc2l0aW9uPXRoaXMuZ2V0Q2hpbGRWYWx1ZShhKX0sQ29udGFjdEFkZHJlc3M6ZnVuY3Rpb24oYSwKYil7Yi5jb250YWN0QWRkcmVzcz17fTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYi5jb250YWN0QWRkcmVzcyl9LEFkZHJlc3NUeXBlOmZ1bmN0aW9uKGEsYil7Yi50eXBlPXRoaXMuZ2V0Q2hpbGRWYWx1ZShhKX0sQWRkcmVzczpmdW5jdGlvbihhLGIpe2IuYWRkcmVzcz10aGlzLmdldENoaWxkVmFsdWUoYSl9LENpdHk6ZnVuY3Rpb24oYSxiKXtiLmNpdHk9dGhpcy5nZXRDaGlsZFZhbHVlKGEpfSxTdGF0ZU9yUHJvdmluY2U6ZnVuY3Rpb24oYSxiKXtiLnN0YXRlT3JQcm92aW5jZT10aGlzLmdldENoaWxkVmFsdWUoYSl9LFBvc3RDb2RlOmZ1bmN0aW9uKGEsYil7Yi5wb3N0Y29kZT10aGlzLmdldENoaWxkVmFsdWUoYSl9LENvdW50cnk6ZnVuY3Rpb24oYSxiKXtiLmNvdW50cnk9dGhpcy5nZXRDaGlsZFZhbHVlKGEpfSxDb250YWN0Vm9pY2VUZWxlcGhvbmU6ZnVuY3Rpb24oYSxiKXtiLnBob25lPXRoaXMuZ2V0Q2hpbGRWYWx1ZShhKX0sQ29udGFjdEZhY3NpbWlsZVRlbGVwaG9uZTpmdW5jdGlvbihhLApiKXtiLmZheD10aGlzLmdldENoaWxkVmFsdWUoYSl9LENvbnRhY3RFbGVjdHJvbmljTWFpbEFkZHJlc3M6ZnVuY3Rpb24oYSxiKXtiLmVtYWlsPXRoaXMuZ2V0Q2hpbGRWYWx1ZShhKX0sRmVlczpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuZ2V0Q2hpbGRWYWx1ZShhKTtjJiYibm9uZSIhPWMudG9Mb3dlckNhc2UoKSYmKGIuZmVlcz1jKX0sQWNjZXNzQ29uc3RyYWludHM6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmdldENoaWxkVmFsdWUoYSk7YyYmIm5vbmUiIT1jLnRvTG93ZXJDYXNlKCkmJihiLmFjY2Vzc0NvbnN0cmFpbnRzPWMpfSxDYXBhYmlsaXR5OmZ1bmN0aW9uKGEsYil7Yi5jYXBhYmlsaXR5PXtuZXN0ZWRMYXllcnM6W10sbGF5ZXJzOltdfTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYi5jYXBhYmlsaXR5KX0sUmVxdWVzdDpmdW5jdGlvbihhLGIpe2IucmVxdWVzdD17fTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYi5yZXF1ZXN0KX0sR2V0Q2FwYWJpbGl0aWVzOmZ1bmN0aW9uKGEsCmIpe2IuZ2V0Y2FwYWJpbGl0aWVzPXtmb3JtYXRzOltdfTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYi5nZXRjYXBhYmlsaXRpZXMpfSxGb3JtYXQ6ZnVuY3Rpb24oYSxiKXtPcGVuTGF5ZXJzLlV0aWwuaXNBcnJheShiLmZvcm1hdHMpP2IuZm9ybWF0cy5wdXNoKHRoaXMuZ2V0Q2hpbGRWYWx1ZShhKSk6Yi5mb3JtYXQ9dGhpcy5nZXRDaGlsZFZhbHVlKGEpfSxEQ1BUeXBlOmZ1bmN0aW9uKGEsYil7dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGIpfSxIVFRQOmZ1bmN0aW9uKGEsYil7dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGIpfSxHZXQ6ZnVuY3Rpb24oYSxiKXtiLmdldD17fTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYi5nZXQpO2IuaHJlZnx8KGIuaHJlZj1iLmdldC5ocmVmKX0sUG9zdDpmdW5jdGlvbihhLGIpe2IucG9zdD17fTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYi5wb3N0KTtiLmhyZWZ8fChiLmhyZWY9Yi5nZXQuaHJlZil9LEdldE1hcDpmdW5jdGlvbihhLGIpe2IuZ2V0bWFwPXtmb3JtYXRzOltdfTsKdGhpcy5yZWFkQ2hpbGROb2RlcyhhLGIuZ2V0bWFwKX0sR2V0RmVhdHVyZUluZm86ZnVuY3Rpb24oYSxiKXtiLmdldGZlYXR1cmVpbmZvPXtmb3JtYXRzOltdfTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYi5nZXRmZWF0dXJlaW5mbyl9LEV4Y2VwdGlvbjpmdW5jdGlvbihhLGIpe2IuZXhjZXB0aW9uPXtmb3JtYXRzOltdfTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYi5leGNlcHRpb24pfSxMYXllcjpmdW5jdGlvbihhLGIpe3ZhciBjLGQ7Yi5jYXBhYmlsaXR5PyhkPWIuY2FwYWJpbGl0eSxjPWIpOmQ9Yjt2YXIgZT1hLmdldEF0dHJpYnV0ZU5vZGUoInF1ZXJ5YWJsZSIpLGY9ZSYmZS5zcGVjaWZpZWQ/YS5nZXRBdHRyaWJ1dGUoInF1ZXJ5YWJsZSIpOm51bGwsZz0oZT1hLmdldEF0dHJpYnV0ZU5vZGUoImNhc2NhZGVkIikpJiZlLnNwZWNpZmllZD9hLmdldEF0dHJpYnV0ZSgiY2FzY2FkZWQiKTpudWxsLGU9KGU9YS5nZXRBdHRyaWJ1dGVOb2RlKCJvcGFxdWUiKSkmJmUuc3BlY2lmaWVkPwphLmdldEF0dHJpYnV0ZSgib3BhcXVlIik6bnVsbCxoPWEuZ2V0QXR0cmlidXRlKCJub1N1YnNldHMiKSxrPWEuZ2V0QXR0cmlidXRlKCJmaXhlZFdpZHRoIiksbD1hLmdldEF0dHJpYnV0ZSgiZml4ZWRIZWlnaHQiKSxtPWN8fHt9LG49T3BlbkxheWVycy5VdGlsLmV4dGVuZDtjPXtuZXN0ZWRMYXllcnM6W10sc3R5bGVzOmM/W10uY29uY2F0KGMuc3R5bGVzKTpbXSxzcnM6Yz9uKHt9LG0uc3JzKTp7fSxtZXRhZGF0YVVSTHM6W10sYmJveDpjP24oe30sbS5iYm94KTp7fSxsbGJib3g6bS5sbGJib3gsZGltZW5zaW9uczpjP24oe30sbS5kaW1lbnNpb25zKTp7fSxhdXRob3JpdHlVUkxzOmM/bih7fSxtLmF1dGhvcml0eVVSTHMpOnt9LGlkZW50aWZpZXJzOnt9LGtleXdvcmRzOltdLHF1ZXJ5YWJsZTpmJiYiIiE9PWY/IjEiPT09Znx8InRydWUiPT09ZjptLnF1ZXJ5YWJsZXx8ITEsY2FzY2FkZWQ6bnVsbCE9PWc/cGFyc2VJbnQoZyk6bS5jYXNjYWRlZHx8MCxvcGFxdWU6ZT8iMSI9PT0KZXx8InRydWUiPT09ZTptLm9wYXF1ZXx8ITEsbm9TdWJzZXRzOm51bGwhPT1oPyIxIj09PWh8fCJ0cnVlIj09PWg6bS5ub1N1YnNldHN8fCExLGZpeGVkV2lkdGg6bnVsbCE9az9wYXJzZUludChrKTptLmZpeGVkV2lkdGh8fDAsZml4ZWRIZWlnaHQ6bnVsbCE9bD9wYXJzZUludChsKTptLmZpeGVkSGVpZ2h0fHwwLG1pblNjYWxlOm0ubWluU2NhbGUsbWF4U2NhbGU6bS5tYXhTY2FsZSxhdHRyaWJ1dGlvbjptLmF0dHJpYnV0aW9ufTtiLm5lc3RlZExheWVycy5wdXNoKGMpO2MuY2FwYWJpbGl0eT1kO3RoaXMucmVhZENoaWxkTm9kZXMoYSxjKTtkZWxldGUgYy5jYXBhYmlsaXR5O2MubmFtZSYmKGY9Yy5uYW1lLnNwbGl0KCI6IiksZz1kLnJlcXVlc3QsZT1nLmdldGZlYXR1cmVpbmZvLDA8Zi5sZW5ndGgmJihjLnByZWZpeD1mWzBdKSxkLmxheWVycy5wdXNoKGMpLHZvaWQgMD09PWMuZm9ybWF0cyYmKGMuZm9ybWF0cz1nLmdldG1hcC5mb3JtYXRzKSx2b2lkIDA9PT1jLmluZm9Gb3JtYXRzJiYKZSYmKGMuaW5mb0Zvcm1hdHM9ZS5mb3JtYXRzKSl9LEF0dHJpYnV0aW9uOmZ1bmN0aW9uKGEsYil7Yi5hdHRyaWJ1dGlvbj17fTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYi5hdHRyaWJ1dGlvbil9LExvZ29VUkw6ZnVuY3Rpb24oYSxiKXtiLmxvZ289e3dpZHRoOmEuZ2V0QXR0cmlidXRlKCJ3aWR0aCIpLGhlaWdodDphLmdldEF0dHJpYnV0ZSgiaGVpZ2h0Iil9O3RoaXMucmVhZENoaWxkTm9kZXMoYSxiLmxvZ28pfSxTdHlsZTpmdW5jdGlvbihhLGIpe3ZhciBjPXt9O2Iuc3R5bGVzLnB1c2goYyk7dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGMpfSxMZWdlbmRVUkw6ZnVuY3Rpb24oYSxiKXt2YXIgYz17d2lkdGg6YS5nZXRBdHRyaWJ1dGUoIndpZHRoIiksaGVpZ2h0OmEuZ2V0QXR0cmlidXRlKCJoZWlnaHQiKX07Yi5sZWdlbmQ9Yzt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYyl9LE1ldGFkYXRhVVJMOmZ1bmN0aW9uKGEsYil7dmFyIGM9e3R5cGU6YS5nZXRBdHRyaWJ1dGUoInR5cGUiKX07CmIubWV0YWRhdGFVUkxzLnB1c2goYyk7dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGMpfSxEYXRhVVJMOmZ1bmN0aW9uKGEsYil7Yi5kYXRhVVJMPXt9O3RoaXMucmVhZENoaWxkTm9kZXMoYSxiLmRhdGFVUkwpfSxGZWF0dXJlTGlzdFVSTDpmdW5jdGlvbihhLGIpe2IuZmVhdHVyZUxpc3RVUkw9e307dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGIuZmVhdHVyZUxpc3RVUkwpfSxBdXRob3JpdHlVUkw6ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLmdldEF0dHJpYnV0ZSgibmFtZSIpLGQ9e307dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGQpO2IuYXV0aG9yaXR5VVJMc1tjXT1kLmhyZWZ9LElkZW50aWZpZXI6ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLmdldEF0dHJpYnV0ZSgiYXV0aG9yaXR5Iik7Yi5pZGVudGlmaWVyc1tjXT10aGlzLmdldENoaWxkVmFsdWUoYSl9LEtleXdvcmRMaXN0OmZ1bmN0aW9uKGEsYil7dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGIpfSxTUlM6ZnVuY3Rpb24oYSxiKXtiLnNyc1t0aGlzLmdldENoaWxkVmFsdWUoYSldPQohMH19fSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkZvcm1hdC5XTVNDYXBhYmlsaXRpZXMudjEifSk7T3BlbkxheWVycy5Gb3JtYXQuV01TQ2FwYWJpbGl0aWVzLnYxXzE9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkZvcm1hdC5XTVNDYXBhYmlsaXRpZXMudjEse3JlYWRlcnM6e3dtczpPcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyh7V01UX01TX0NhcGFiaWxpdGllczpmdW5jdGlvbihhLGIpe3RoaXMucmVhZENoaWxkTm9kZXMoYSxiKX0sS2V5d29yZDpmdW5jdGlvbihhLGIpe2Iua2V5d29yZHMmJmIua2V5d29yZHMucHVzaCh0aGlzLmdldENoaWxkVmFsdWUoYSkpfSxEZXNjcmliZUxheWVyOmZ1bmN0aW9uKGEsYil7Yi5kZXNjcmliZWxheWVyPXtmb3JtYXRzOltdfTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYi5kZXNjcmliZWxheWVyKX0sR2V0TGVnZW5kR3JhcGhpYzpmdW5jdGlvbihhLGIpe2IuZ2V0bGVnZW5kZ3JhcGhpYz17Zm9ybWF0czpbXX07dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGIuZ2V0bGVnZW5kZ3JhcGhpYyl9LEdldFN0eWxlczpmdW5jdGlvbihhLGIpe2IuZ2V0c3R5bGVzPQp7Zm9ybWF0czpbXX07dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGIuZ2V0c3R5bGVzKX0sUHV0U3R5bGVzOmZ1bmN0aW9uKGEsYil7Yi5wdXRzdHlsZXM9e2Zvcm1hdHM6W119O3RoaXMucmVhZENoaWxkTm9kZXMoYSxiLnB1dHN0eWxlcyl9LFVzZXJEZWZpbmVkU3ltYm9saXphdGlvbjpmdW5jdGlvbihhLGIpe3ZhciBjPXtzdXBwb3J0U0xEOjE9PXBhcnNlSW50KGEuZ2V0QXR0cmlidXRlKCJTdXBwb3J0U0xEIikpLHVzZXJMYXllcjoxPT1wYXJzZUludChhLmdldEF0dHJpYnV0ZSgiVXNlckxheWVyIikpLHVzZXJTdHlsZToxPT1wYXJzZUludChhLmdldEF0dHJpYnV0ZSgiVXNlclN0eWxlIikpLHJlbW90ZVdGUzoxPT1wYXJzZUludChhLmdldEF0dHJpYnV0ZSgiUmVtb3RlV0ZTIikpfTtiLnVzZXJTeW1ib2xzPWN9LExhdExvbkJvdW5kaW5nQm94OmZ1bmN0aW9uKGEsYil7Yi5sbGJib3g9W3BhcnNlRmxvYXQoYS5nZXRBdHRyaWJ1dGUoIm1pbngiKSkscGFyc2VGbG9hdChhLmdldEF0dHJpYnV0ZSgibWlueSIpKSwKcGFyc2VGbG9hdChhLmdldEF0dHJpYnV0ZSgibWF4eCIpKSxwYXJzZUZsb2F0KGEuZ2V0QXR0cmlidXRlKCJtYXh5IikpXX0sQm91bmRpbmdCb3g6ZnVuY3Rpb24oYSxiKXt2YXIgYz1PcGVuTGF5ZXJzLkZvcm1hdC5XTVNDYXBhYmlsaXRpZXMudjEucHJvdG90eXBlLnJlYWRlcnMud21zLkJvdW5kaW5nQm94LmFwcGx5KHRoaXMsW2EsYl0pO2Muc3JzPWEuZ2V0QXR0cmlidXRlKCJTUlMiKTtiLmJib3hbYy5zcnNdPWN9LFNjYWxlSGludDpmdW5jdGlvbihhLGIpe3ZhciBjPWEuZ2V0QXR0cmlidXRlKCJtaW4iKSxkPWEuZ2V0QXR0cmlidXRlKCJtYXgiKSxlPU1hdGgucG93KDIsMC41KSxmPU9wZW5MYXllcnMuSU5DSEVTX1BFUl9VTklULm07MCE9YyYmKGIubWF4U2NhbGU9cGFyc2VGbG9hdCgoYy9lKmYqT3BlbkxheWVycy5ET1RTX1BFUl9JTkNIKS50b1ByZWNpc2lvbigxMykpKTtkIT1OdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkmJihiLm1pblNjYWxlPXBhcnNlRmxvYXQoKGQvZSpmKgpPcGVuTGF5ZXJzLkRPVFNfUEVSX0lOQ0gpLnRvUHJlY2lzaW9uKDEzKSkpfSxEaW1lbnNpb246ZnVuY3Rpb24oYSxiKXt2YXIgYz17bmFtZTphLmdldEF0dHJpYnV0ZSgibmFtZSIpLnRvTG93ZXJDYXNlKCksdW5pdHM6YS5nZXRBdHRyaWJ1dGUoInVuaXRzIiksdW5pdHN5bWJvbDphLmdldEF0dHJpYnV0ZSgidW5pdFN5bWJvbCIpfTtiLmRpbWVuc2lvbnNbYy5uYW1lXT1jfSxFeHRlbnQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLmdldEF0dHJpYnV0ZSgibmFtZSIpLnRvTG93ZXJDYXNlKCk7aWYoYyBpbiBiLmRpbWVuc2lvbnMpe2M9Yi5kaW1lbnNpb25zW2NdO2MubmVhcmVzdFZhbD0iMSI9PT1hLmdldEF0dHJpYnV0ZSgibmVhcmVzdFZhbHVlIik7Yy5tdWx0aXBsZVZhbD0iMSI9PT1hLmdldEF0dHJpYnV0ZSgibXVsdGlwbGVWYWx1ZXMiKTtjLmN1cnJlbnQ9IjEiPT09YS5nZXRBdHRyaWJ1dGUoImN1cnJlbnQiKTtjWyJkZWZhdWx0Il09YS5nZXRBdHRyaWJ1dGUoImRlZmF1bHQiKXx8CiIiO3ZhciBkPXRoaXMuZ2V0Q2hpbGRWYWx1ZShhKTtjLnZhbHVlcz1kLnNwbGl0KCIsIil9fX0sT3BlbkxheWVycy5Gb3JtYXQuV01TQ2FwYWJpbGl0aWVzLnYxLnByb3RvdHlwZS5yZWFkZXJzLndtcyl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuRm9ybWF0LldNU0NhcGFiaWxpdGllcy52MV8xIn0pO09wZW5MYXllcnMuRm9ybWF0LldNU0NhcGFiaWxpdGllcy52MV8xXzA9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkZvcm1hdC5XTVNDYXBhYmlsaXRpZXMudjFfMSx7dmVyc2lvbjoiMS4xLjAiLHJlYWRlcnM6e3dtczpPcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyh7U1JTOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPXRoaXMuZ2V0Q2hpbGRWYWx1ZShhKS5zcGxpdCgvICsvKSxkPTAsZT1jLmxlbmd0aDtkPGU7ZCsrKWIuc3JzW2NbZF1dPSEwfX0sT3BlbkxheWVycy5Gb3JtYXQuV01TQ2FwYWJpbGl0aWVzLnYxXzEucHJvdG90eXBlLnJlYWRlcnMud21zKX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Gb3JtYXQuV01TQ2FwYWJpbGl0aWVzLnYxXzFfMCJ9KTtPcGVuTGF5ZXJzLlByb3RvY29sLldGUy52MT1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuUHJvdG9jb2wse3ZlcnNpb246bnVsbCxzcnNOYW1lOiJFUFNHOjQzMjYiLGZlYXR1cmVUeXBlOm51bGwsZmVhdHVyZU5TOm51bGwsZ2VvbWV0cnlOYW1lOiJ0aGVfZ2VvbSIsc2NoZW1hOm51bGwsZmVhdHVyZVByZWZpeDoiZmVhdHVyZSIsZm9ybWF0T3B0aW9uczpudWxsLHJlYWRGb3JtYXQ6bnVsbCxyZWFkT3B0aW9uczpudWxsLGluaXRpYWxpemU6ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5Qcm90b2NvbC5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLFthXSk7YS5mb3JtYXR8fCh0aGlzLmZvcm1hdD1PcGVuTGF5ZXJzLkZvcm1hdC5XRlNUKE9wZW5MYXllcnMuVXRpbC5leHRlbmQoe3ZlcnNpb246dGhpcy52ZXJzaW9uLGZlYXR1cmVUeXBlOnRoaXMuZmVhdHVyZVR5cGUsZmVhdHVyZU5TOnRoaXMuZmVhdHVyZU5TLGZlYXR1cmVQcmVmaXg6dGhpcy5mZWF0dXJlUHJlZml4LGdlb21ldHJ5TmFtZTp0aGlzLmdlb21ldHJ5TmFtZSwKc3JzTmFtZTp0aGlzLnNyc05hbWUsc2NoZW1hOnRoaXMuc2NoZW1hfSx0aGlzLmZvcm1hdE9wdGlvbnMpKSk7IWEuZ2VvbWV0cnlOYW1lJiYxPHBhcnNlRmxvYXQodGhpcy5mb3JtYXQudmVyc2lvbikmJnRoaXMuc2V0R2VvbWV0cnlOYW1lKG51bGwpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5vcHRpb25zJiYhdGhpcy5vcHRpb25zLmZvcm1hdCYmdGhpcy5mb3JtYXQuZGVzdHJveSgpO3RoaXMuZm9ybWF0PW51bGw7T3BlbkxheWVycy5Qcm90b2NvbC5wcm90b3R5cGUuZGVzdHJveS5hcHBseSh0aGlzKX0scmVhZDpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLlByb3RvY29sLnByb3RvdHlwZS5yZWFkLmFwcGx5KHRoaXMsYXJndW1lbnRzKTthPU9wZW5MYXllcnMuVXRpbC5leHRlbmQoe30sYSk7T3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoYSx0aGlzLm9wdGlvbnN8fHt9KTt2YXIgYj1uZXcgT3BlbkxheWVycy5Qcm90b2NvbC5SZXNwb25zZSh7cmVxdWVzdFR5cGU6InJlYWQifSksCmM9T3BlbkxheWVycy5Gb3JtYXQuWE1MLnByb3RvdHlwZS53cml0ZS5hcHBseSh0aGlzLmZvcm1hdCxbdGhpcy5mb3JtYXQud3JpdGVOb2RlKCJ3ZnM6R2V0RmVhdHVyZSIsYSldKTtiLnByaXY9T3BlbkxheWVycy5SZXF1ZXN0LlBPU1Qoe3VybDphLnVybCxjYWxsYmFjazp0aGlzLmNyZWF0ZUNhbGxiYWNrKHRoaXMuaGFuZGxlUmVhZCxiLGEpLHBhcmFtczphLnBhcmFtcyxoZWFkZXJzOmEuaGVhZGVycyxkYXRhOmN9KTtyZXR1cm4gYn0sc2V0RmVhdHVyZVR5cGU6ZnVuY3Rpb24oYSl7dGhpcy5mZWF0dXJlVHlwZT1hO3RoaXMuZm9ybWF0LmZlYXR1cmVUeXBlPWF9LHNldEdlb21ldHJ5TmFtZTpmdW5jdGlvbihhKXt0aGlzLmdlb21ldHJ5TmFtZT1hO3RoaXMuZm9ybWF0Lmdlb21ldHJ5TmFtZT1hfSxoYW5kbGVSZWFkOmZ1bmN0aW9uKGEsYil7Yj1PcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHt9LGIpO09wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKGIsdGhpcy5vcHRpb25zKTtpZihiLmNhbGxiYWNrKXt2YXIgYz0KYS5wcml2OzIwMDw9Yy5zdGF0dXMmJjMwMD5jLnN0YXR1cz8oYz10aGlzLnBhcnNlUmVzcG9uc2UoYyxiLnJlYWRPcHRpb25zKSkmJiExIT09Yy5zdWNjZXNzPyhiLnJlYWRPcHRpb25zJiYib2JqZWN0Ij09Yi5yZWFkT3B0aW9ucy5vdXRwdXQ/T3BlbkxheWVycy5VdGlsLmV4dGVuZChhLGMpOmEuZmVhdHVyZXM9YyxhLmNvZGU9T3BlbkxheWVycy5Qcm90b2NvbC5SZXNwb25zZS5TVUNDRVNTKTooYS5jb2RlPU9wZW5MYXllcnMuUHJvdG9jb2wuUmVzcG9uc2UuRkFJTFVSRSxhLmVycm9yPWMpOmEuY29kZT1PcGVuTGF5ZXJzLlByb3RvY29sLlJlc3BvbnNlLkZBSUxVUkU7Yi5jYWxsYmFjay5jYWxsKGIuc2NvcGUsYSl9fSxwYXJzZVJlc3BvbnNlOmZ1bmN0aW9uKGEsYil7dmFyIGM9YS5yZXNwb25zZVhNTDtjJiZjLmRvY3VtZW50RWxlbWVudHx8KGM9YS5yZXNwb25zZVRleHQpO2lmKCFjfHwwPj1jLmxlbmd0aClyZXR1cm4gbnVsbDtjPW51bGwhPT10aGlzLnJlYWRGb3JtYXQ/dGhpcy5yZWFkRm9ybWF0LnJlYWQoYyk6CnRoaXMuZm9ybWF0LnJlYWQoYyxiKTtpZighdGhpcy5mZWF0dXJlTlMpe3ZhciBkPXRoaXMucmVhZEZvcm1hdHx8dGhpcy5mb3JtYXQ7dGhpcy5mZWF0dXJlTlM9ZC5mZWF0dXJlTlM7ZC5hdXRvQ29uZmlnPSExO3RoaXMuZ2VvbWV0cnlOYW1lfHx0aGlzLnNldEdlb21ldHJ5TmFtZShkLmdlb21ldHJ5TmFtZSl9cmV0dXJuIGN9LGNvbW1pdDpmdW5jdGlvbihhLGIpe2I9T3BlbkxheWVycy5VdGlsLmV4dGVuZCh7fSxiKTtPcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyhiLHRoaXMub3B0aW9ucyk7dmFyIGM9bmV3IE9wZW5MYXllcnMuUHJvdG9jb2wuUmVzcG9uc2Uoe3JlcXVlc3RUeXBlOiJjb21taXQiLHJlcUZlYXR1cmVzOmF9KTtjLnByaXY9T3BlbkxheWVycy5SZXF1ZXN0LlBPU1Qoe3VybDpiLnVybCxoZWFkZXJzOmIuaGVhZGVycyxkYXRhOnRoaXMuZm9ybWF0LndyaXRlKGEsYiksY2FsbGJhY2s6dGhpcy5jcmVhdGVDYWxsYmFjayh0aGlzLmhhbmRsZUNvbW1pdCxjLGIpfSk7CnJldHVybiBjfSxoYW5kbGVDb21taXQ6ZnVuY3Rpb24oYSxiKXtpZihiLmNhbGxiYWNrKXt2YXIgYz1hLnByaXYsZD1jLnJlc3BvbnNlWE1MO2QmJmQuZG9jdW1lbnRFbGVtZW50fHwoZD1jLnJlc3BvbnNlVGV4dCk7Yz10aGlzLmZvcm1hdC5yZWFkKGQpfHx7fTthLmluc2VydElkcz1jLmluc2VydElkc3x8W107Yy5zdWNjZXNzP2EuY29kZT1PcGVuTGF5ZXJzLlByb3RvY29sLlJlc3BvbnNlLlNVQ0NFU1M6KGEuY29kZT1PcGVuTGF5ZXJzLlByb3RvY29sLlJlc3BvbnNlLkZBSUxVUkUsYS5lcnJvcj1jKTtiLmNhbGxiYWNrLmNhbGwoYi5zY29wZSxhKX19LGZpbHRlckRlbGV0ZTpmdW5jdGlvbihhLGIpe2I9T3BlbkxheWVycy5VdGlsLmV4dGVuZCh7fSxiKTtPcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyhiLHRoaXMub3B0aW9ucyk7bmV3IE9wZW5MYXllcnMuUHJvdG9jb2wuUmVzcG9uc2Uoe3JlcXVlc3RUeXBlOiJjb21taXQifSk7dmFyIGM9dGhpcy5mb3JtYXQuY3JlYXRlRWxlbWVudE5TUGx1cygid2ZzOlRyYW5zYWN0aW9uIiwKe2F0dHJpYnV0ZXM6e3NlcnZpY2U6IldGUyIsdmVyc2lvbjp0aGlzLnZlcnNpb259fSksZD10aGlzLmZvcm1hdC5jcmVhdGVFbGVtZW50TlNQbHVzKCJ3ZnM6RGVsZXRlIix7YXR0cmlidXRlczp7dHlwZU5hbWU6KGIuZmVhdHVyZU5TP3RoaXMuZmVhdHVyZVByZWZpeCsiOiI6IiIpK2IuZmVhdHVyZVR5cGV9fSk7Yi5mZWF0dXJlTlMmJmQuc2V0QXR0cmlidXRlKCJ4bWxuczoiK3RoaXMuZmVhdHVyZVByZWZpeCxiLmZlYXR1cmVOUyk7dmFyIGU9dGhpcy5mb3JtYXQud3JpdGVOb2RlKCJvZ2M6RmlsdGVyIixhKTtkLmFwcGVuZENoaWxkKGUpO2MuYXBwZW5kQ2hpbGQoZCk7Yz1PcGVuTGF5ZXJzLkZvcm1hdC5YTUwucHJvdG90eXBlLndyaXRlLmFwcGx5KHRoaXMuZm9ybWF0LFtjXSk7cmV0dXJuIE9wZW5MYXllcnMuUmVxdWVzdC5QT1NUKHt1cmw6dGhpcy51cmwsY2FsbGJhY2s6Yi5jYWxsYmFja3x8ZnVuY3Rpb24oKXt9LGRhdGE6Y30pfSxhYm9ydDpmdW5jdGlvbihhKXthJiZhLnByaXYuYWJvcnQoKX0sCkNMQVNTX05BTUU6Ik9wZW5MYXllcnMuUHJvdG9jb2wuV0ZTLnYxIn0pO09wZW5MYXllcnMuSGFuZGxlci5GZWF0dXJlPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5IYW5kbGVyLHtFVkVOVE1BUDp7Y2xpY2s6eyJpbiI6ImNsaWNrIixvdXQ6ImNsaWNrb3V0In0sbW91c2Vtb3ZlOnsiaW4iOiJvdmVyIixvdXQ6Im91dCJ9LGRibGNsaWNrOnsiaW4iOiJkYmxjbGljayIsb3V0Om51bGx9LG1vdXNlZG93bjp7ImluIjpudWxsLG91dDpudWxsfSxtb3VzZXVwOnsiaW4iOm51bGwsb3V0Om51bGx9LHRvdWNoc3RhcnQ6eyJpbiI6ImNsaWNrIixvdXQ6ImNsaWNrb3V0In19LGZlYXR1cmU6bnVsbCxsYXN0RmVhdHVyZTpudWxsLGRvd246bnVsbCx1cDpudWxsLGNsaWNrVG9sZXJhbmNlOjQsZ2VvbWV0cnlUeXBlczpudWxsLHN0b3BDbGljazohMCxzdG9wRG93bjohMCxzdG9wVXA6ITEsaW5pdGlhbGl6ZTpmdW5jdGlvbihhLGIsYyxkKXtPcGVuTGF5ZXJzLkhhbmRsZXIucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxbYSxjLGRdKTt0aGlzLmxheWVyPQpifSx0b3VjaHN0YXJ0OmZ1bmN0aW9uKGEpe3RoaXMuc3RhcnRUb3VjaCgpO3JldHVybiBPcGVuTGF5ZXJzLkV2ZW50LmlzTXVsdGlUb3VjaChhKT8hMDp0aGlzLm1vdXNlZG93bihhKX0sdG91Y2htb3ZlOmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuRXZlbnQucHJldmVudERlZmF1bHQoYSl9LG1vdXNlZG93bjpmdW5jdGlvbihhKXtpZihPcGVuTGF5ZXJzLkV2ZW50LmlzTGVmdENsaWNrKGEpfHxPcGVuTGF5ZXJzLkV2ZW50LmlzU2luZ2xlVG91Y2goYSkpdGhpcy5kb3duPWEueHk7cmV0dXJuIHRoaXMuaGFuZGxlKGEpPyF0aGlzLnN0b3BEb3duOiEwfSxtb3VzZXVwOmZ1bmN0aW9uKGEpe3RoaXMudXA9YS54eTtyZXR1cm4gdGhpcy5oYW5kbGUoYSk/IXRoaXMuc3RvcFVwOiEwfSxjbGljazpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5oYW5kbGUoYSk/IXRoaXMuc3RvcENsaWNrOiEwfSxtb3VzZW1vdmU6ZnVuY3Rpb24oYSl7aWYoIXRoaXMuY2FsbGJhY2tzLm92ZXImJiF0aGlzLmNhbGxiYWNrcy5vdXQpcmV0dXJuITA7CnRoaXMuaGFuZGxlKGEpO3JldHVybiEwfSxkYmxjbGljazpmdW5jdGlvbihhKXtyZXR1cm4hdGhpcy5oYW5kbGUoYSl9LGdlb21ldHJ5VHlwZU1hdGNoZXM6ZnVuY3Rpb24oYSl7cmV0dXJuIG51bGw9PXRoaXMuZ2VvbWV0cnlUeXBlc3x8LTE8T3BlbkxheWVycy5VdGlsLmluZGV4T2YodGhpcy5nZW9tZXRyeVR5cGVzLGEuZ2VvbWV0cnkuQ0xBU1NfTkFNRSl9LGhhbmRsZTpmdW5jdGlvbihhKXt0aGlzLmZlYXR1cmUmJiF0aGlzLmZlYXR1cmUubGF5ZXImJih0aGlzLmZlYXR1cmU9bnVsbCk7dmFyIGI9YS50eXBlLGM9ITEsZD0hIXRoaXMuZmVhdHVyZSxlPSJjbGljayI9PWJ8fCJkYmxjbGljayI9PWJ8fCJ0b3VjaHN0YXJ0Ij09YjsodGhpcy5mZWF0dXJlPXRoaXMubGF5ZXIuZ2V0RmVhdHVyZUZyb21FdmVudChhKSkmJiF0aGlzLmZlYXR1cmUubGF5ZXImJih0aGlzLmZlYXR1cmU9bnVsbCk7dGhpcy5sYXN0RmVhdHVyZSYmIXRoaXMubGFzdEZlYXR1cmUubGF5ZXImJih0aGlzLmxhc3RGZWF0dXJlPQpudWxsKTt0aGlzLmZlYXR1cmU/KCJ0b3VjaHN0YXJ0Ij09PWImJk9wZW5MYXllcnMuRXZlbnQucHJldmVudERlZmF1bHQoYSksYT10aGlzLmZlYXR1cmUhPXRoaXMubGFzdEZlYXR1cmUsdGhpcy5nZW9tZXRyeVR5cGVNYXRjaGVzKHRoaXMuZmVhdHVyZSk/KGQmJmE/KHRoaXMubGFzdEZlYXR1cmUmJnRoaXMudHJpZ2dlckNhbGxiYWNrKGIsIm91dCIsW3RoaXMubGFzdEZlYXR1cmVdKSx0aGlzLnRyaWdnZXJDYWxsYmFjayhiLCJpbiIsW3RoaXMuZmVhdHVyZV0pKTpkJiYhZXx8dGhpcy50cmlnZ2VyQ2FsbGJhY2soYiwiaW4iLFt0aGlzLmZlYXR1cmVdKSx0aGlzLmxhc3RGZWF0dXJlPXRoaXMuZmVhdHVyZSxjPSEwKToodGhpcy5sYXN0RmVhdHVyZSYmKGQmJmF8fGUpJiZ0aGlzLnRyaWdnZXJDYWxsYmFjayhiLCJvdXQiLFt0aGlzLmxhc3RGZWF0dXJlXSksdGhpcy5mZWF0dXJlPW51bGwpKTp0aGlzLmxhc3RGZWF0dXJlJiYoZHx8ZSkmJnRoaXMudHJpZ2dlckNhbGxiYWNrKGIsIm91dCIsClt0aGlzLmxhc3RGZWF0dXJlXSk7cmV0dXJuIGN9LHRyaWdnZXJDYWxsYmFjazpmdW5jdGlvbihhLGIsYyl7aWYoYj10aGlzLkVWRU5UTUFQW2FdW2JdKSJjbGljayI9PWEmJnRoaXMudXAmJnRoaXMuZG93bj8oTWF0aC5zcXJ0KE1hdGgucG93KHRoaXMudXAueC10aGlzLmRvd24ueCwyKStNYXRoLnBvdyh0aGlzLnVwLnktdGhpcy5kb3duLnksMikpPD10aGlzLmNsaWNrVG9sZXJhbmNlJiZ0aGlzLmNhbGxiYWNrKGIsYyksdGhpcy51cD10aGlzLmRvd249bnVsbCk6dGhpcy5jYWxsYmFjayhiLGMpfSxhY3RpdmF0ZTpmdW5jdGlvbigpe3ZhciBhPSExO09wZW5MYXllcnMuSGFuZGxlci5wcm90b3R5cGUuYWN0aXZhdGUuYXBwbHkodGhpcyxhcmd1bWVudHMpJiYodGhpcy5tb3ZlTGF5ZXJUb1RvcCgpLHRoaXMubWFwLmV2ZW50cy5vbih7cmVtb3ZlbGF5ZXI6dGhpcy5oYW5kbGVNYXBFdmVudHMsY2hhbmdlbGF5ZXI6dGhpcy5oYW5kbGVNYXBFdmVudHMsc2NvcGU6dGhpc30pLGE9ITApOwpyZXR1cm4gYX0sZGVhY3RpdmF0ZTpmdW5jdGlvbigpe3ZhciBhPSExO09wZW5MYXllcnMuSGFuZGxlci5wcm90b3R5cGUuZGVhY3RpdmF0ZS5hcHBseSh0aGlzLGFyZ3VtZW50cykmJih0aGlzLm1vdmVMYXllckJhY2soKSx0aGlzLnVwPXRoaXMuZG93bj10aGlzLmxhc3RGZWF0dXJlPXRoaXMuZmVhdHVyZT1udWxsLHRoaXMubWFwLmV2ZW50cy51bih7cmVtb3ZlbGF5ZXI6dGhpcy5oYW5kbGVNYXBFdmVudHMsY2hhbmdlbGF5ZXI6dGhpcy5oYW5kbGVNYXBFdmVudHMsc2NvcGU6dGhpc30pLGE9ITApO3JldHVybiBhfSxoYW5kbGVNYXBFdmVudHM6ZnVuY3Rpb24oYSl7InJlbW92ZWxheWVyIiE9YS50eXBlJiYib3JkZXIiIT1hLnByb3BlcnR5fHx0aGlzLm1vdmVMYXllclRvVG9wKCl9LG1vdmVMYXllclRvVG9wOmZ1bmN0aW9uKCl7dmFyIGE9TWF0aC5tYXgodGhpcy5tYXAuWl9JTkRFWF9CQVNFLkZlYXR1cmUtMSx0aGlzLmxheWVyLmdldFpJbmRleCgpKSsxO3RoaXMubGF5ZXIuc2V0WkluZGV4KGEpfSwKbW92ZUxheWVyQmFjazpmdW5jdGlvbigpe3ZhciBhPXRoaXMubGF5ZXIuZ2V0WkluZGV4KCktMTthPj10aGlzLm1hcC5aX0lOREVYX0JBU0UuRmVhdHVyZT90aGlzLmxheWVyLnNldFpJbmRleChhKTp0aGlzLm1hcC5zZXRMYXllclpJbmRleCh0aGlzLmxheWVyLHRoaXMubWFwLmdldExheWVySW5kZXgodGhpcy5sYXllcikpfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkhhbmRsZXIuRmVhdHVyZSJ9KTtPcGVuTGF5ZXJzLkxheWVyLlZlY3Rvci5Sb290Q29udGFpbmVyPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5MYXllci5WZWN0b3Ise2Rpc3BsYXlJbkxheWVyU3dpdGNoZXI6ITEsbGF5ZXJzOm51bGwsZGlzcGxheTpmdW5jdGlvbigpe30sZ2V0RmVhdHVyZUZyb21FdmVudDpmdW5jdGlvbihhKXtmb3IodmFyIGI9dGhpcy5sYXllcnMsYyxkPTA7ZDxiLmxlbmd0aDtkKyspaWYoYz1iW2RdLmdldEZlYXR1cmVGcm9tRXZlbnQoYSkpcmV0dXJuIGN9LHNldE1hcDpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLkxheWVyLlZlY3Rvci5wcm90b3R5cGUuc2V0TWFwLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLmNvbGxlY3RSb290cygpO2EuZXZlbnRzLnJlZ2lzdGVyKCJjaGFuZ2VsYXllciIsdGhpcyx0aGlzLmhhbmRsZUNoYW5nZUxheWVyKX0scmVtb3ZlTWFwOmZ1bmN0aW9uKGEpe2EuZXZlbnRzLnVucmVnaXN0ZXIoImNoYW5nZWxheWVyIix0aGlzLHRoaXMuaGFuZGxlQ2hhbmdlTGF5ZXIpOwp0aGlzLnJlc2V0Um9vdHMoKTtPcGVuTGF5ZXJzLkxheWVyLlZlY3Rvci5wcm90b3R5cGUucmVtb3ZlTWFwLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sY29sbGVjdFJvb3RzOmZ1bmN0aW9uKCl7Zm9yKHZhciBhLGI9MDtiPHRoaXMubWFwLmxheWVycy5sZW5ndGg7KytiKWE9dGhpcy5tYXAubGF5ZXJzW2JdLC0xIT1PcGVuTGF5ZXJzLlV0aWwuaW5kZXhPZih0aGlzLmxheWVycyxhKSYmYS5yZW5kZXJlci5tb3ZlUm9vdCh0aGlzLnJlbmRlcmVyKX0scmVzZXRSb290czpmdW5jdGlvbigpe2Zvcih2YXIgYSxiPTA7Yjx0aGlzLmxheWVycy5sZW5ndGg7KytiKWE9dGhpcy5sYXllcnNbYl0sdGhpcy5yZW5kZXJlciYmYS5yZW5kZXJlci5nZXRSZW5kZXJMYXllcklkKCk9PXRoaXMuaWQmJnRoaXMucmVuZGVyZXIubW92ZVJvb3QoYS5yZW5kZXJlcil9LGhhbmRsZUNoYW5nZUxheWVyOmZ1bmN0aW9uKGEpe3ZhciBiPWEubGF5ZXI7Im9yZGVyIj09YS5wcm9wZXJ0eSYmLTEhPU9wZW5MYXllcnMuVXRpbC5pbmRleE9mKHRoaXMubGF5ZXJzLApiKSYmKHRoaXMucmVzZXRSb290cygpLHRoaXMuY29sbGVjdFJvb3RzKCkpfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkxheWVyLlZlY3Rvci5Sb290Q29udGFpbmVyIn0pO09wZW5MYXllcnMuQ29udHJvbC5TZWxlY3RGZWF0dXJlPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Db250cm9sLHttdWx0aXBsZUtleTpudWxsLHRvZ2dsZUtleTpudWxsLG11bHRpcGxlOiExLGNsaWNrb3V0OiEwLHRvZ2dsZTohMSxob3ZlcjohMSxoaWdobGlnaHRPbmx5OiExLGJveDohMSxvbkJlZm9yZVNlbGVjdDpmdW5jdGlvbigpe30sb25TZWxlY3Q6ZnVuY3Rpb24oKXt9LG9uVW5zZWxlY3Q6ZnVuY3Rpb24oKXt9LHNjb3BlOm51bGwsZ2VvbWV0cnlUeXBlczpudWxsLGxheWVyOm51bGwsbGF5ZXJzOm51bGwsY2FsbGJhY2tzOm51bGwsc2VsZWN0U3R5bGU6bnVsbCxyZW5kZXJJbnRlbnQ6InNlbGVjdCIsaGFuZGxlcnM6bnVsbCxpbml0aWFsaXplOmZ1bmN0aW9uKGEsYil7T3BlbkxheWVycy5Db250cm9sLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsW2JdKTtudWxsPT09dGhpcy5zY29wZSYmKHRoaXMuc2NvcGU9dGhpcyk7dGhpcy5pbml0TGF5ZXIoYSk7dmFyIGM9CntjbGljazp0aGlzLmNsaWNrRmVhdHVyZSxjbGlja291dDp0aGlzLmNsaWNrb3V0RmVhdHVyZX07dGhpcy5ob3ZlciYmKGMub3Zlcj10aGlzLm92ZXJGZWF0dXJlLGMub3V0PXRoaXMub3V0RmVhdHVyZSk7dGhpcy5jYWxsYmFja3M9T3BlbkxheWVycy5VdGlsLmV4dGVuZChjLHRoaXMuY2FsbGJhY2tzKTt0aGlzLmhhbmRsZXJzPXtmZWF0dXJlOm5ldyBPcGVuTGF5ZXJzLkhhbmRsZXIuRmVhdHVyZSh0aGlzLHRoaXMubGF5ZXIsdGhpcy5jYWxsYmFja3Mse2dlb21ldHJ5VHlwZXM6dGhpcy5nZW9tZXRyeVR5cGVzfSl9O3RoaXMuYm94JiYodGhpcy5oYW5kbGVycy5ib3g9bmV3IE9wZW5MYXllcnMuSGFuZGxlci5Cb3godGhpcyx7ZG9uZTp0aGlzLnNlbGVjdEJveH0se2JveERpdkNsYXNzTmFtZToib2xIYW5kbGVyQm94U2VsZWN0RmVhdHVyZSJ9KSl9LGluaXRMYXllcjpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLlV0aWwuaXNBcnJheShhKT8odGhpcy5sYXllcnM9YSx0aGlzLmxheWVyPQpuZXcgT3BlbkxheWVycy5MYXllci5WZWN0b3IuUm9vdENvbnRhaW5lcih0aGlzLmlkKyJfY29udGFpbmVyIix7bGF5ZXJzOmF9KSk6dGhpcy5sYXllcj1hfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5hY3RpdmUmJnRoaXMubGF5ZXJzJiZ0aGlzLm1hcC5yZW1vdmVMYXllcih0aGlzLmxheWVyKTtPcGVuTGF5ZXJzLkNvbnRyb2wucHJvdG90eXBlLmRlc3Ryb3kuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMubGF5ZXJzJiZ0aGlzLmxheWVyLmRlc3Ryb3koKX0sYWN0aXZhdGU6ZnVuY3Rpb24oKXt0aGlzLmFjdGl2ZXx8KHRoaXMubGF5ZXJzJiZ0aGlzLm1hcC5hZGRMYXllcih0aGlzLmxheWVyKSx0aGlzLmhhbmRsZXJzLmZlYXR1cmUuYWN0aXZhdGUoKSx0aGlzLmJveCYmdGhpcy5oYW5kbGVycy5ib3gmJnRoaXMuaGFuZGxlcnMuYm94LmFjdGl2YXRlKCkpO3JldHVybiBPcGVuTGF5ZXJzLkNvbnRyb2wucHJvdG90eXBlLmFjdGl2YXRlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sZGVhY3RpdmF0ZTpmdW5jdGlvbigpe3RoaXMuYWN0aXZlJiYKKHRoaXMuaGFuZGxlcnMuZmVhdHVyZS5kZWFjdGl2YXRlKCksdGhpcy5oYW5kbGVycy5ib3gmJnRoaXMuaGFuZGxlcnMuYm94LmRlYWN0aXZhdGUoKSx0aGlzLmxheWVycyYmdGhpcy5tYXAucmVtb3ZlTGF5ZXIodGhpcy5sYXllcikpO3JldHVybiBPcGVuTGF5ZXJzLkNvbnRyb2wucHJvdG90eXBlLmRlYWN0aXZhdGUuYXBwbHkodGhpcyxhcmd1bWVudHMpfSx1bnNlbGVjdEFsbDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmxheWVyc3x8W3RoaXMubGF5ZXJdLGMsZCxlLGY7Zm9yKGU9MDtlPGIubGVuZ3RoOysrZSlpZihjPWJbZV0sZj0wLG51bGwhPWMuc2VsZWN0ZWRGZWF0dXJlcylmb3IoO2Muc2VsZWN0ZWRGZWF0dXJlcy5sZW5ndGg+ZjspZD1jLnNlbGVjdGVkRmVhdHVyZXNbZl0sYSYmYS5leGNlcHQ9PWQ/KytmOnRoaXMudW5zZWxlY3QoZCl9LGNsaWNrRmVhdHVyZTpmdW5jdGlvbihhKXt0aGlzLmhvdmVyfHwoLTE8T3BlbkxheWVycy5VdGlsLmluZGV4T2YoYS5sYXllci5zZWxlY3RlZEZlYXR1cmVzLAphKT90aGlzLnRvZ2dsZVNlbGVjdCgpP3RoaXMudW5zZWxlY3QoYSk6dGhpcy5tdWx0aXBsZVNlbGVjdCgpfHx0aGlzLnVuc2VsZWN0QWxsKHtleGNlcHQ6YX0pOih0aGlzLm11bHRpcGxlU2VsZWN0KCl8fHRoaXMudW5zZWxlY3RBbGwoe2V4Y2VwdDphfSksdGhpcy5zZWxlY3QoYSkpKX0sbXVsdGlwbGVTZWxlY3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tdWx0aXBsZXx8dGhpcy5oYW5kbGVycy5mZWF0dXJlLmV2dCYmdGhpcy5oYW5kbGVycy5mZWF0dXJlLmV2dFt0aGlzLm11bHRpcGxlS2V5XX0sdG9nZ2xlU2VsZWN0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudG9nZ2xlfHx0aGlzLmhhbmRsZXJzLmZlYXR1cmUuZXZ0JiZ0aGlzLmhhbmRsZXJzLmZlYXR1cmUuZXZ0W3RoaXMudG9nZ2xlS2V5XX0sY2xpY2tvdXRGZWF0dXJlOmZ1bmN0aW9uKGEpeyF0aGlzLmhvdmVyJiZ0aGlzLmNsaWNrb3V0JiZ0aGlzLnVuc2VsZWN0QWxsKCl9LG92ZXJGZWF0dXJlOmZ1bmN0aW9uKGEpe3ZhciBiPQphLmxheWVyO3RoaXMuaG92ZXImJih0aGlzLmhpZ2hsaWdodE9ubHk/dGhpcy5oaWdobGlnaHQoYSk6LTE9PU9wZW5MYXllcnMuVXRpbC5pbmRleE9mKGIuc2VsZWN0ZWRGZWF0dXJlcyxhKSYmdGhpcy5zZWxlY3QoYSkpfSxvdXRGZWF0dXJlOmZ1bmN0aW9uKGEpe2lmKHRoaXMuaG92ZXIpaWYodGhpcy5oaWdobGlnaHRPbmx5KXtpZihhLl9sYXN0SGlnaGxpZ2h0ZXI9PXRoaXMuaWQpaWYoYS5fcHJldkhpZ2hsaWdodGVyJiZhLl9wcmV2SGlnaGxpZ2h0ZXIhPXRoaXMuaWQpe2RlbGV0ZSBhLl9sYXN0SGlnaGxpZ2h0ZXI7dmFyIGI9dGhpcy5tYXAuZ2V0Q29udHJvbChhLl9wcmV2SGlnaGxpZ2h0ZXIpO2ImJmIuaGlnaGxpZ2h0KGEpfWVsc2UgdGhpcy51bmhpZ2hsaWdodChhKX1lbHNlIHRoaXMudW5zZWxlY3QoYSl9LGhpZ2hsaWdodDpmdW5jdGlvbihhKXt2YXIgYj1hLmxheWVyOyExIT09dGhpcy5ldmVudHMudHJpZ2dlckV2ZW50KCJiZWZvcmVmZWF0dXJlaGlnaGxpZ2h0ZWQiLHtmZWF0dXJlOmF9KSYmCihhLl9wcmV2SGlnaGxpZ2h0ZXI9YS5fbGFzdEhpZ2hsaWdodGVyLGEuX2xhc3RIaWdobGlnaHRlcj10aGlzLmlkLGIuZHJhd0ZlYXR1cmUoYSx0aGlzLnNlbGVjdFN0eWxlfHx0aGlzLnJlbmRlckludGVudCksdGhpcy5ldmVudHMudHJpZ2dlckV2ZW50KCJmZWF0dXJlaGlnaGxpZ2h0ZWQiLHtmZWF0dXJlOmF9KSl9LHVuaGlnaGxpZ2h0OmZ1bmN0aW9uKGEpe3ZhciBiPWEubGF5ZXI7dm9pZCAwPT1hLl9wcmV2SGlnaGxpZ2h0ZXI/ZGVsZXRlIGEuX2xhc3RIaWdobGlnaHRlcjooYS5fcHJldkhpZ2hsaWdodGVyIT10aGlzLmlkJiYoYS5fbGFzdEhpZ2hsaWdodGVyPWEuX3ByZXZIaWdobGlnaHRlciksZGVsZXRlIGEuX3ByZXZIaWdobGlnaHRlcik7Yi5kcmF3RmVhdHVyZShhLGEuc3R5bGV8fGEubGF5ZXIuc3R5bGV8fCJkZWZhdWx0Iik7dGhpcy5ldmVudHMudHJpZ2dlckV2ZW50KCJmZWF0dXJldW5oaWdobGlnaHRlZCIse2ZlYXR1cmU6YX0pfSxzZWxlY3Q6ZnVuY3Rpb24oYSl7dmFyIGI9CnRoaXMub25CZWZvcmVTZWxlY3QuY2FsbCh0aGlzLnNjb3BlLGEpLGM9YS5sYXllcjshMSE9PWImJihiPWMuZXZlbnRzLnRyaWdnZXJFdmVudCgiYmVmb3JlZmVhdHVyZXNlbGVjdGVkIix7ZmVhdHVyZTphfSksITEhPT1iJiYoYy5zZWxlY3RlZEZlYXR1cmVzLnB1c2goYSksdGhpcy5oaWdobGlnaHQoYSksdGhpcy5oYW5kbGVycy5mZWF0dXJlLmxhc3RGZWF0dXJlfHwodGhpcy5oYW5kbGVycy5mZWF0dXJlLmxhc3RGZWF0dXJlPWMuc2VsZWN0ZWRGZWF0dXJlc1swXSksYy5ldmVudHMudHJpZ2dlckV2ZW50KCJmZWF0dXJlc2VsZWN0ZWQiLHtmZWF0dXJlOmF9KSx0aGlzLm9uU2VsZWN0LmNhbGwodGhpcy5zY29wZSxhKSkpfSx1bnNlbGVjdDpmdW5jdGlvbihhKXt2YXIgYj1hLmxheWVyO3RoaXMudW5oaWdobGlnaHQoYSk7T3BlbkxheWVycy5VdGlsLnJlbW92ZUl0ZW0oYi5zZWxlY3RlZEZlYXR1cmVzLGEpO2IuZXZlbnRzLnRyaWdnZXJFdmVudCgiZmVhdHVyZXVuc2VsZWN0ZWQiLAp7ZmVhdHVyZTphfSk7dGhpcy5vblVuc2VsZWN0LmNhbGwodGhpcy5zY29wZSxhKX0sc2VsZWN0Qm94OmZ1bmN0aW9uKGEpe2lmKGEgaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLkJvdW5kcyl7dmFyIGI9dGhpcy5tYXAuZ2V0TG9uTGF0RnJvbVBpeGVsKHt4OmEubGVmdCx5OmEuYm90dG9tfSk7YT10aGlzLm1hcC5nZXRMb25MYXRGcm9tUGl4ZWwoe3g6YS5yaWdodCx5OmEudG9wfSk7Yj1uZXcgT3BlbkxheWVycy5Cb3VuZHMoYi5sb24sYi5sYXQsYS5sb24sYS5sYXQpO3RoaXMubXVsdGlwbGVTZWxlY3QoKXx8dGhpcy51bnNlbGVjdEFsbCgpO2E9dGhpcy5tdWx0aXBsZTt0aGlzLm11bHRpcGxlPSEwO3ZhciBjPXRoaXMubGF5ZXJzfHxbdGhpcy5sYXllcl07dGhpcy5ldmVudHMudHJpZ2dlckV2ZW50KCJib3hzZWxlY3Rpb25zdGFydCIse2xheWVyczpjfSk7Zm9yKHZhciBkLGU9MDtlPGMubGVuZ3RoOysrZSl7ZD1jW2VdO2Zvcih2YXIgZj0wLGc9ZC5mZWF0dXJlcy5sZW5ndGg7ZjxnOysrZil7dmFyIGg9CmQuZmVhdHVyZXNbZl07aC5nZXRWaXNpYmlsaXR5KCkmJihudWxsPT10aGlzLmdlb21ldHJ5VHlwZXN8fC0xPE9wZW5MYXllcnMuVXRpbC5pbmRleE9mKHRoaXMuZ2VvbWV0cnlUeXBlcyxoLmdlb21ldHJ5LkNMQVNTX05BTUUpKSYmYi50b0dlb21ldHJ5KCkuaW50ZXJzZWN0cyhoLmdlb21ldHJ5KSYmLTE9PU9wZW5MYXllcnMuVXRpbC5pbmRleE9mKGQuc2VsZWN0ZWRGZWF0dXJlcyxoKSYmdGhpcy5zZWxlY3QoaCl9fXRoaXMubXVsdGlwbGU9YTt0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoImJveHNlbGVjdGlvbmVuZCIse2xheWVyczpjfSl9fSxzZXRNYXA6ZnVuY3Rpb24oYSl7dGhpcy5oYW5kbGVycy5mZWF0dXJlLnNldE1hcChhKTt0aGlzLmJveCYmdGhpcy5oYW5kbGVycy5ib3guc2V0TWFwKGEpO09wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuc2V0TWFwLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sc2V0TGF5ZXI6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5hY3RpdmU7dGhpcy51bnNlbGVjdEFsbCgpOwp0aGlzLmRlYWN0aXZhdGUoKTt0aGlzLmxheWVycyYmKHRoaXMubGF5ZXIuZGVzdHJveSgpLHRoaXMubGF5ZXJzPW51bGwpO3RoaXMuaW5pdExheWVyKGEpO3RoaXMuaGFuZGxlcnMuZmVhdHVyZS5sYXllcj10aGlzLmxheWVyO2ImJnRoaXMuYWN0aXZhdGUoKX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Db250cm9sLlNlbGVjdEZlYXR1cmUifSk7T3BlbkxheWVycy5IYW5kbGVyLlBvaW50PU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5IYW5kbGVyLHtwb2ludDpudWxsLGxheWVyOm51bGwsbXVsdGk6ITEsY2l0ZUNvbXBsaWFudDohMSxtb3VzZURvd246ITEsc3RvcHBlZERvd246bnVsbCxsYXN0RG93bjpudWxsLGxhc3RVcDpudWxsLHBlcnNpc3Q6ITEsc3RvcERvd246ITEsc3RvcFVwOiExLGxheWVyT3B0aW9uczpudWxsLHBpeGVsVG9sZXJhbmNlOjUsbGFzdFRvdWNoUHg6bnVsbCxpbml0aWFsaXplOmZ1bmN0aW9uKGEsYixjKXtjJiZjLmxheWVyT3B0aW9ucyYmYy5sYXllck9wdGlvbnMuc3R5bGVNYXB8fCh0aGlzLnN0eWxlPU9wZW5MYXllcnMuVXRpbC5leHRlbmQoT3BlbkxheWVycy5GZWF0dXJlLlZlY3Rvci5zdHlsZVsiZGVmYXVsdCJdLHt9KSk7T3BlbkxheWVycy5IYW5kbGVyLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sYWN0aXZhdGU6ZnVuY3Rpb24oKXtpZighT3BlbkxheWVycy5IYW5kbGVyLnByb3RvdHlwZS5hY3RpdmF0ZS5hcHBseSh0aGlzLAphcmd1bWVudHMpKXJldHVybiExO3ZhciBhPU9wZW5MYXllcnMuVXRpbC5leHRlbmQoe2Rpc3BsYXlJbkxheWVyU3dpdGNoZXI6ITEsY2FsY3VsYXRlSW5SYW5nZTpPcGVuTGF5ZXJzLkZ1bmN0aW9uLlRydWUsd3JhcERhdGVMaW5lOnRoaXMuY2l0ZUNvbXBsaWFudH0sdGhpcy5sYXllck9wdGlvbnMpO3RoaXMubGF5ZXI9bmV3IE9wZW5MYXllcnMuTGF5ZXIuVmVjdG9yKHRoaXMuQ0xBU1NfTkFNRSxhKTt0aGlzLm1hcC5hZGRMYXllcih0aGlzLmxheWVyKTtyZXR1cm4hMH0sY3JlYXRlRmVhdHVyZTpmdW5jdGlvbihhKXthPXRoaXMubGF5ZXIuZ2V0TG9uTGF0RnJvbVZpZXdQb3J0UHgoYSk7YT1uZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludChhLmxvbixhLmxhdCk7dGhpcy5wb2ludD1uZXcgT3BlbkxheWVycy5GZWF0dXJlLlZlY3RvcihhKTt0aGlzLmNhbGxiYWNrKCJjcmVhdGUiLFt0aGlzLnBvaW50Lmdlb21ldHJ5LHRoaXMucG9pbnRdKTt0aGlzLnBvaW50Lmdlb21ldHJ5LmNsZWFyQm91bmRzKCk7CnRoaXMubGF5ZXIuYWRkRmVhdHVyZXMoW3RoaXMucG9pbnRdLHtzaWxlbnQ6ITB9KX0sZGVhY3RpdmF0ZTpmdW5jdGlvbigpe2lmKCFPcGVuTGF5ZXJzLkhhbmRsZXIucHJvdG90eXBlLmRlYWN0aXZhdGUuYXBwbHkodGhpcyxhcmd1bWVudHMpKXJldHVybiExO3RoaXMuY2FuY2VsKCk7bnVsbCE9dGhpcy5sYXllci5tYXAmJih0aGlzLmRlc3Ryb3lGZWF0dXJlKCEwKSx0aGlzLmxheWVyLmRlc3Ryb3koITEpKTt0aGlzLmxheWVyPW51bGw7cmV0dXJuITB9LGRlc3Ryb3lGZWF0dXJlOmZ1bmN0aW9uKGEpeyF0aGlzLmxheWVyfHwhYSYmdGhpcy5wZXJzaXN0fHx0aGlzLmxheWVyLmRlc3Ryb3lGZWF0dXJlcygpO3RoaXMucG9pbnQ9bnVsbH0sZGVzdHJveVBlcnNpc3RlZEZlYXR1cmU6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmxheWVyO2EmJjE8YS5mZWF0dXJlcy5sZW5ndGgmJnRoaXMubGF5ZXIuZmVhdHVyZXNbMF0uZGVzdHJveSgpfSxmaW5hbGl6ZTpmdW5jdGlvbihhKXt0aGlzLm1vdXNlRG93bj0KITE7dGhpcy5sYXN0VG91Y2hQeD10aGlzLmxhc3RVcD10aGlzLmxhc3REb3duPW51bGw7dGhpcy5jYWxsYmFjayhhPyJjYW5jZWwiOiJkb25lIixbdGhpcy5nZW9tZXRyeUNsb25lKCldKTt0aGlzLmRlc3Ryb3lGZWF0dXJlKGEpfSxjYW5jZWw6ZnVuY3Rpb24oKXt0aGlzLmZpbmFsaXplKCEwKX0sY2xpY2s6ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5FdmVudC5zdG9wKGEpO3JldHVybiExfSxkYmxjbGljazpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLkV2ZW50LnN0b3AoYSk7cmV0dXJuITF9LG1vZGlmeUZlYXR1cmU6ZnVuY3Rpb24oYSl7dGhpcy5wb2ludHx8dGhpcy5jcmVhdGVGZWF0dXJlKGEpO2E9dGhpcy5sYXllci5nZXRMb25MYXRGcm9tVmlld1BvcnRQeChhKTt0aGlzLnBvaW50Lmdlb21ldHJ5Lng9YS5sb247dGhpcy5wb2ludC5nZW9tZXRyeS55PWEubGF0O3RoaXMuY2FsbGJhY2soIm1vZGlmeSIsW3RoaXMucG9pbnQuZ2VvbWV0cnksdGhpcy5wb2ludCwhMV0pO3RoaXMucG9pbnQuZ2VvbWV0cnkuY2xlYXJCb3VuZHMoKTsKdGhpcy5kcmF3RmVhdHVyZSgpfSxkcmF3RmVhdHVyZTpmdW5jdGlvbigpe3RoaXMubGF5ZXIuZHJhd0ZlYXR1cmUodGhpcy5wb2ludCx0aGlzLnN0eWxlKX0sZ2V0R2VvbWV0cnk6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnBvaW50JiZ0aGlzLnBvaW50Lmdlb21ldHJ5O2EmJnRoaXMubXVsdGkmJihhPW5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5Lk11bHRpUG9pbnQoW2FdKSk7cmV0dXJuIGF9LGdlb21ldHJ5Q2xvbmU6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmdldEdlb21ldHJ5KCk7cmV0dXJuIGEmJmEuY2xvbmUoKX0sbW91c2Vkb3duOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmRvd24oYSl9LHRvdWNoc3RhcnQ6ZnVuY3Rpb24oYSl7dGhpcy5zdGFydFRvdWNoKCk7dGhpcy5sYXN0VG91Y2hQeD1hLnh5O3JldHVybiB0aGlzLmRvd24oYSl9LG1vdXNlbW92ZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5tb3ZlKGEpfSx0b3VjaG1vdmU6ZnVuY3Rpb24oYSl7dGhpcy5sYXN0VG91Y2hQeD1hLnh5OwpyZXR1cm4gdGhpcy5tb3ZlKGEpfSxtb3VzZXVwOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnVwKGEpfSx0b3VjaGVuZDpmdW5jdGlvbihhKXthLnh5PXRoaXMubGFzdFRvdWNoUHg7cmV0dXJuIHRoaXMudXAoYSl9LGRvd246ZnVuY3Rpb24oYSl7dGhpcy5tb3VzZURvd249ITA7dGhpcy5sYXN0RG93bj1hLnh5O3RoaXMudG91Y2h8fHRoaXMubW9kaWZ5RmVhdHVyZShhLnh5KTt0aGlzLnN0b3BwZWREb3duPXRoaXMuc3RvcERvd247cmV0dXJuIXRoaXMuc3RvcERvd259LG1vdmU6ZnVuY3Rpb24oYSl7dGhpcy50b3VjaHx8dGhpcy5tb3VzZURvd24mJiF0aGlzLnN0b3BwZWREb3dufHx0aGlzLm1vZGlmeUZlYXR1cmUoYS54eSk7cmV0dXJuITB9LHVwOmZ1bmN0aW9uKGEpe3RoaXMubW91c2VEb3duPSExO3RoaXMuc3RvcHBlZERvd249dGhpcy5zdG9wRG93bjtpZighdGhpcy5jaGVja01vZGlmaWVycyhhKXx8dGhpcy5sYXN0VXAmJnRoaXMubGFzdFVwLmVxdWFscyhhLnh5KXx8IXRoaXMubGFzdERvd258fAohdGhpcy5wYXNzZXNUb2xlcmFuY2UodGhpcy5sYXN0RG93bixhLnh5LHRoaXMucGl4ZWxUb2xlcmFuY2UpKXJldHVybiEwO3RoaXMudG91Y2gmJnRoaXMubW9kaWZ5RmVhdHVyZShhLnh5KTt0aGlzLnBlcnNpc3QmJnRoaXMuZGVzdHJveVBlcnNpc3RlZEZlYXR1cmUoKTt0aGlzLmxhc3RVcD1hLnh5O3RoaXMuZmluYWxpemUoKTtyZXR1cm4hdGhpcy5zdG9wVXB9LG1vdXNlb3V0OmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuVXRpbC5tb3VzZUxlZnQoYSx0aGlzLm1hcC52aWV3UG9ydERpdikmJih0aGlzLnN0b3BwZWREb3duPXRoaXMuc3RvcERvd24sdGhpcy5tb3VzZURvd249ITEpfSxwYXNzZXNUb2xlcmFuY2U6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPSEwO251bGwhPWMmJmEmJmImJmEuZGlzdGFuY2VUbyhiKT5jJiYoZD0hMSk7cmV0dXJuIGR9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuSGFuZGxlci5Qb2ludCJ9KTtPcGVuTGF5ZXJzLkhhbmRsZXIuUGF0aD1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuSGFuZGxlci5Qb2ludCx7bGluZTpudWxsLG1heFZlcnRpY2VzOm51bGwsZG91YmxlVG91Y2hUb2xlcmFuY2U6MjAsZnJlZWhhbmQ6ITEsZnJlZWhhbmRUb2dnbGU6InNoaWZ0S2V5Iix0aW1lcklkOm51bGwscmVkb1N0YWNrOm51bGwsY3JlYXRlRmVhdHVyZTpmdW5jdGlvbihhKXthPXRoaXMubGF5ZXIuZ2V0TG9uTGF0RnJvbVZpZXdQb3J0UHgoYSk7YT1uZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludChhLmxvbixhLmxhdCk7dGhpcy5wb2ludD1uZXcgT3BlbkxheWVycy5GZWF0dXJlLlZlY3RvcihhKTt0aGlzLmxpbmU9bmV3IE9wZW5MYXllcnMuRmVhdHVyZS5WZWN0b3IobmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuTGluZVN0cmluZyhbdGhpcy5wb2ludC5nZW9tZXRyeV0pKTt0aGlzLmNhbGxiYWNrKCJjcmVhdGUiLFt0aGlzLnBvaW50Lmdlb21ldHJ5LHRoaXMuZ2V0U2tldGNoKCldKTsKdGhpcy5wb2ludC5nZW9tZXRyeS5jbGVhckJvdW5kcygpO3RoaXMubGF5ZXIuYWRkRmVhdHVyZXMoW3RoaXMubGluZSx0aGlzLnBvaW50XSx7c2lsZW50OiEwfSl9LGRlc3Ryb3lGZWF0dXJlOmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuSGFuZGxlci5Qb2ludC5wcm90b3R5cGUuZGVzdHJveUZlYXR1cmUuY2FsbCh0aGlzLGEpO3RoaXMubGluZT1udWxsfSxkZXN0cm95UGVyc2lzdGVkRmVhdHVyZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMubGF5ZXI7YSYmMjxhLmZlYXR1cmVzLmxlbmd0aCYmdGhpcy5sYXllci5mZWF0dXJlc1swXS5kZXN0cm95KCl9LHJlbW92ZVBvaW50OmZ1bmN0aW9uKCl7dGhpcy5wb2ludCYmdGhpcy5sYXllci5yZW1vdmVGZWF0dXJlcyhbdGhpcy5wb2ludF0pfSxhZGRQb2ludDpmdW5jdGlvbihhKXt0aGlzLmxheWVyLnJlbW92ZUZlYXR1cmVzKFt0aGlzLnBvaW50XSk7YT10aGlzLmxheWVyLmdldExvbkxhdEZyb21WaWV3UG9ydFB4KGEpO3RoaXMucG9pbnQ9bmV3IE9wZW5MYXllcnMuRmVhdHVyZS5WZWN0b3IobmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoYS5sb24sCmEubGF0KSk7dGhpcy5saW5lLmdlb21ldHJ5LmFkZENvbXBvbmVudCh0aGlzLnBvaW50Lmdlb21ldHJ5LHRoaXMubGluZS5nZW9tZXRyeS5jb21wb25lbnRzLmxlbmd0aCk7dGhpcy5sYXllci5hZGRGZWF0dXJlcyhbdGhpcy5wb2ludF0pO3RoaXMuY2FsbGJhY2soInBvaW50IixbdGhpcy5wb2ludC5nZW9tZXRyeSx0aGlzLmdldEdlb21ldHJ5KCldKTt0aGlzLmNhbGxiYWNrKCJtb2RpZnkiLFt0aGlzLnBvaW50Lmdlb21ldHJ5LHRoaXMuZ2V0U2tldGNoKCldKTt0aGlzLmRyYXdGZWF0dXJlKCk7ZGVsZXRlIHRoaXMucmVkb1N0YWNrfSxpbnNlcnRYWTpmdW5jdGlvbihhLGIpe3RoaXMubGluZS5nZW9tZXRyeS5hZGRDb21wb25lbnQobmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoYSxiKSx0aGlzLmdldEN1cnJlbnRQb2ludEluZGV4KCkpO3RoaXMuZHJhd0ZlYXR1cmUoKTtkZWxldGUgdGhpcy5yZWRvU3RhY2t9LGluc2VydERlbHRhWFk6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmdldEN1cnJlbnRQb2ludEluZGV4KCktCjEsYz10aGlzLmxpbmUuZ2VvbWV0cnkuY29tcG9uZW50c1tjXTshY3x8KGlzTmFOKGMueCl8fGlzTmFOKGMueSkpfHx0aGlzLmluc2VydFhZKGMueCthLGMueStiKX0saW5zZXJ0RGlyZWN0aW9uTGVuZ3RoOmZ1bmN0aW9uKGEsYil7YSo9TWF0aC5QSS8xODA7dmFyIGM9YipNYXRoLmNvcyhhKSxkPWIqTWF0aC5zaW4oYSk7dGhpcy5pbnNlcnREZWx0YVhZKGMsZCl9LGluc2VydERlZmxlY3Rpb25MZW5ndGg6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmdldEN1cnJlbnRQb2ludEluZGV4KCktMTtpZigwPGMpe3ZhciBkPXRoaXMubGluZS5nZW9tZXRyeS5jb21wb25lbnRzW2NdLGM9dGhpcy5saW5lLmdlb21ldHJ5LmNvbXBvbmVudHNbYy0xXSxkPU1hdGguYXRhbjIoZC55LWMueSxkLngtYy54KTt0aGlzLmluc2VydERpcmVjdGlvbkxlbmd0aCgxODAqZC9NYXRoLlBJK2EsYil9fSxnZXRDdXJyZW50UG9pbnRJbmRleDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmxpbmUuZ2VvbWV0cnkuY29tcG9uZW50cy5sZW5ndGgtCjF9LHVuZG86ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmxpbmUuZ2VvbWV0cnksYj1hLmNvbXBvbmVudHMsYz10aGlzLmdldEN1cnJlbnRQb2ludEluZGV4KCktMSxkPWJbY10sZT1hLnJlbW92ZUNvbXBvbmVudChkKTtlJiYodGhpcy50b3VjaCYmMDxjJiYoYj1hLmNvbXBvbmVudHMsYT1iW2MtMV0sYz10aGlzLmdldEN1cnJlbnRQb2ludEluZGV4KCksYj1iW2NdLGIueD1hLngsYi55PWEueSksdGhpcy5yZWRvU3RhY2t8fCh0aGlzLnJlZG9TdGFjaz1bXSksdGhpcy5yZWRvU3RhY2sucHVzaChkKSx0aGlzLmRyYXdGZWF0dXJlKCkpO3JldHVybiBlfSxyZWRvOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5yZWRvU3RhY2smJnRoaXMucmVkb1N0YWNrLnBvcCgpO2EmJih0aGlzLmxpbmUuZ2VvbWV0cnkuYWRkQ29tcG9uZW50KGEsdGhpcy5nZXRDdXJyZW50UG9pbnRJbmRleCgpKSx0aGlzLmRyYXdGZWF0dXJlKCkpO3JldHVybiEhYX0sZnJlZWhhbmRNb2RlOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmZyZWVoYW5kVG9nZ2xlJiYKYVt0aGlzLmZyZWVoYW5kVG9nZ2xlXT8hdGhpcy5mcmVlaGFuZDp0aGlzLmZyZWVoYW5kfSxtb2RpZnlGZWF0dXJlOmZ1bmN0aW9uKGEsYil7dGhpcy5saW5lfHx0aGlzLmNyZWF0ZUZlYXR1cmUoYSk7dmFyIGM9dGhpcy5sYXllci5nZXRMb25MYXRGcm9tVmlld1BvcnRQeChhKTt0aGlzLnBvaW50Lmdlb21ldHJ5Lng9Yy5sb247dGhpcy5wb2ludC5nZW9tZXRyeS55PWMubGF0O3RoaXMuY2FsbGJhY2soIm1vZGlmeSIsW3RoaXMucG9pbnQuZ2VvbWV0cnksdGhpcy5nZXRTa2V0Y2goKSxiXSk7dGhpcy5wb2ludC5nZW9tZXRyeS5jbGVhckJvdW5kcygpO3RoaXMuZHJhd0ZlYXR1cmUoKX0sZHJhd0ZlYXR1cmU6ZnVuY3Rpb24oKXt0aGlzLmxheWVyLmRyYXdGZWF0dXJlKHRoaXMubGluZSx0aGlzLnN0eWxlKTt0aGlzLmxheWVyLmRyYXdGZWF0dXJlKHRoaXMucG9pbnQsdGhpcy5zdHlsZSl9LGdldFNrZXRjaDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmxpbmV9LGdldEdlb21ldHJ5OmZ1bmN0aW9uKCl7dmFyIGE9CnRoaXMubGluZSYmdGhpcy5saW5lLmdlb21ldHJ5O2EmJnRoaXMubXVsdGkmJihhPW5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5Lk11bHRpTGluZVN0cmluZyhbYV0pKTtyZXR1cm4gYX0sdG91Y2hzdGFydDpmdW5jdGlvbihhKXtpZih0aGlzLnRpbWVySWQmJnRoaXMucGFzc2VzVG9sZXJhbmNlKHRoaXMubGFzdFRvdWNoUHgsYS54eSx0aGlzLmRvdWJsZVRvdWNoVG9sZXJhbmNlKSlyZXR1cm4gdGhpcy5maW5pc2hHZW9tZXRyeSgpLHdpbmRvdy5jbGVhclRpbWVvdXQodGhpcy50aW1lcklkKSx0aGlzLnRpbWVySWQ9bnVsbCwhMTt0aGlzLnRpbWVySWQmJih3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMudGltZXJJZCksdGhpcy50aW1lcklkPW51bGwpO3RoaXMudGltZXJJZD13aW5kb3cuc2V0VGltZW91dChPcGVuTGF5ZXJzLkZ1bmN0aW9uLmJpbmQoZnVuY3Rpb24oKXt0aGlzLnRpbWVySWQ9bnVsbH0sdGhpcyksMzAwKTtyZXR1cm4gT3BlbkxheWVycy5IYW5kbGVyLlBvaW50LnByb3RvdHlwZS50b3VjaHN0YXJ0LmNhbGwodGhpcywKYSl9LGRvd246ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5zdG9wRG93bjt0aGlzLmZyZWVoYW5kTW9kZShhKSYmKGI9ITAsdGhpcy50b3VjaCYmKHRoaXMubW9kaWZ5RmVhdHVyZShhLnh5LCEhdGhpcy5sYXN0VXApLE9wZW5MYXllcnMuRXZlbnQuc3RvcChhKSkpO3RoaXMudG91Y2h8fHRoaXMubGFzdERvd24mJnRoaXMucGFzc2VzVG9sZXJhbmNlKHRoaXMubGFzdERvd24sYS54eSx0aGlzLnBpeGVsVG9sZXJhbmNlKXx8dGhpcy5tb2RpZnlGZWF0dXJlKGEueHksISF0aGlzLmxhc3RVcCk7dGhpcy5tb3VzZURvd249ITA7dGhpcy5sYXN0RG93bj1hLnh5O3RoaXMuc3RvcHBlZERvd249YjtyZXR1cm4hYn0sbW92ZTpmdW5jdGlvbihhKXtpZih0aGlzLnN0b3BwZWREb3duJiZ0aGlzLmZyZWVoYW5kTW9kZShhKSlyZXR1cm4gdGhpcy5wZXJzaXN0JiZ0aGlzLmRlc3Ryb3lQZXJzaXN0ZWRGZWF0dXJlKCksdGhpcy5tYXhWZXJ0aWNlcyYmdGhpcy5saW5lJiZ0aGlzLmxpbmUuZ2VvbWV0cnkuY29tcG9uZW50cy5sZW5ndGg9PT0KdGhpcy5tYXhWZXJ0aWNlcz8odGhpcy5yZW1vdmVQb2ludCgpLHRoaXMuZmluYWxpemUoKSk6dGhpcy5hZGRQb2ludChhLnh5KSwhMTt0aGlzLnRvdWNofHx0aGlzLm1vdXNlRG93biYmIXRoaXMuc3RvcHBlZERvd258fHRoaXMubW9kaWZ5RmVhdHVyZShhLnh5LCEhdGhpcy5sYXN0VXApO3JldHVybiEwfSx1cDpmdW5jdGlvbihhKXshdGhpcy5tb3VzZURvd258fHRoaXMubGFzdFVwJiZ0aGlzLmxhc3RVcC5lcXVhbHMoYS54eSl8fCh0aGlzLnN0b3BwZWREb3duJiZ0aGlzLmZyZWVoYW5kTW9kZShhKT8odGhpcy5wZXJzaXN0JiZ0aGlzLmRlc3Ryb3lQZXJzaXN0ZWRGZWF0dXJlKCksdGhpcy5yZW1vdmVQb2ludCgpLHRoaXMuZmluYWxpemUoKSk6dGhpcy5wYXNzZXNUb2xlcmFuY2UodGhpcy5sYXN0RG93bixhLnh5LHRoaXMucGl4ZWxUb2xlcmFuY2UpJiYodGhpcy50b3VjaCYmdGhpcy5tb2RpZnlGZWF0dXJlKGEueHkpLG51bGw9PXRoaXMubGFzdFVwJiZ0aGlzLnBlcnNpc3QmJnRoaXMuZGVzdHJveVBlcnNpc3RlZEZlYXR1cmUoKSwKdGhpcy5hZGRQb2ludChhLnh5KSx0aGlzLmxhc3RVcD1hLnh5LHRoaXMubGluZS5nZW9tZXRyeS5jb21wb25lbnRzLmxlbmd0aD09PXRoaXMubWF4VmVydGljZXMrMSYmdGhpcy5maW5pc2hHZW9tZXRyeSgpKSk7dGhpcy5zdG9wcGVkRG93bj10aGlzLnN0b3BEb3duO3RoaXMubW91c2VEb3duPSExO3JldHVybiF0aGlzLnN0b3BVcH0sZmluaXNoR2VvbWV0cnk6ZnVuY3Rpb24oKXt0aGlzLmxpbmUuZ2VvbWV0cnkucmVtb3ZlQ29tcG9uZW50KHRoaXMubGluZS5nZW9tZXRyeS5jb21wb25lbnRzW3RoaXMubGluZS5nZW9tZXRyeS5jb21wb25lbnRzLmxlbmd0aC0xXSk7dGhpcy5yZW1vdmVQb2ludCgpO3RoaXMuZmluYWxpemUoKX0sZGJsY2xpY2s6ZnVuY3Rpb24oYSl7dGhpcy5mcmVlaGFuZE1vZGUoYSl8fHRoaXMuZmluaXNoR2VvbWV0cnkoKTtyZXR1cm4hMX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5IYW5kbGVyLlBhdGgifSk7T3BlbkxheWVycy5TcGhlcmljYWw9T3BlbkxheWVycy5TcGhlcmljYWx8fHt9O09wZW5MYXllcnMuU3BoZXJpY2FsLkRFRkFVTFRfUkFESVVTPTYzNzgxMzc7T3BlbkxheWVycy5TcGhlcmljYWwuY29tcHV0ZURpc3RhbmNlQmV0d2Vlbj1mdW5jdGlvbihhLGIsYyl7Yz1jfHxPcGVuTGF5ZXJzLlNwaGVyaWNhbC5ERUZBVUxUX1JBRElVUzt2YXIgZD1NYXRoLnNpbihNYXRoLlBJKihiLmxvbi1hLmxvbikvMzYwKSxlPU1hdGguc2luKE1hdGguUEkqKGIubGF0LWEubGF0KS8zNjApO2E9ZSplK2QqZCpNYXRoLmNvcyhNYXRoLlBJKmEubGF0LzE4MCkqTWF0aC5jb3MoTWF0aC5QSSpiLmxhdC8xODApO3JldHVybiAyKmMqTWF0aC5hdGFuMihNYXRoLnNxcnQoYSksTWF0aC5zcXJ0KDEtYSkpfTsKT3BlbkxheWVycy5TcGhlcmljYWwuY29tcHV0ZUhlYWRpbmc9ZnVuY3Rpb24oYSxiKXt2YXIgYz1NYXRoLnNpbihNYXRoLlBJKihhLmxvbi1iLmxvbikvMTgwKSpNYXRoLmNvcyhNYXRoLlBJKmIubGF0LzE4MCksZD1NYXRoLmNvcyhNYXRoLlBJKmEubGF0LzE4MCkqTWF0aC5zaW4oTWF0aC5QSSpiLmxhdC8xODApLU1hdGguc2luKE1hdGguUEkqYS5sYXQvMTgwKSpNYXRoLmNvcyhNYXRoLlBJKmIubGF0LzE4MCkqTWF0aC5jb3MoTWF0aC5QSSooYS5sb24tYi5sb24pLzE4MCk7cmV0dXJuIDE4MCpNYXRoLmF0YW4yKGMsZCkvTWF0aC5QSX07T3BlbkxheWVycy5Db250cm9sLkNhY2hlV3JpdGU9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkNvbnRyb2wse2xheWVyczpudWxsLGltYWdlRm9ybWF0OiJpbWFnZS9wbmciLHF1b3RhUmVnRXg6L3F1b3RhL2ksc2V0TWFwOmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuc2V0TWFwLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt2YXIgYixjPXRoaXMubGF5ZXJzfHxhLmxheWVycztmb3IoYj1jLmxlbmd0aC0xOzA8PWI7LS1iKXRoaXMuYWRkTGF5ZXIoe2xheWVyOmNbYl19KTtpZighdGhpcy5sYXllcnMpYS5ldmVudHMub24oe2FkZGxheWVyOnRoaXMuYWRkTGF5ZXIscmVtb3ZlTGF5ZXI6dGhpcy5yZW1vdmVMYXllcixzY29wZTp0aGlzfSl9LGFkZExheWVyOmZ1bmN0aW9uKGEpe2EubGF5ZXIuZXZlbnRzLm9uKHt0aWxlbG9hZHN0YXJ0OnRoaXMubWFrZVNhbWVPcmlnaW4sdGlsZWxvYWRlZDp0aGlzLm9uVGlsZUxvYWRlZCxzY29wZTp0aGlzfSl9LHJlbW92ZUxheWVyOmZ1bmN0aW9uKGEpe2EubGF5ZXIuZXZlbnRzLnVuKHt0aWxlbG9hZHN0YXJ0OnRoaXMubWFrZVNhbWVPcmlnaW4sCnRpbGVsb2FkZWQ6dGhpcy5vblRpbGVMb2FkZWQsc2NvcGU6dGhpc30pfSxtYWtlU2FtZU9yaWdpbjpmdW5jdGlvbihhKXtpZih0aGlzLmFjdGl2ZSYmKGE9YS50aWxlLGEgaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLlRpbGUuSW1hZ2UmJiFhLmNyb3NzT3JpZ2luS2V5d29yZCYmImRhdGE6IiE9PWEudXJsLnN1YnN0cigwLDUpKSl7dmFyIGI9T3BlbkxheWVycy5SZXF1ZXN0Lm1ha2VTYW1lT3JpZ2luKGEudXJsLE9wZW5MYXllcnMuUHJveHlIb3N0KTtPcGVuTGF5ZXJzLkNvbnRyb2wuQ2FjaGVXcml0ZS51cmxNYXBbYl09YS51cmw7YS51cmw9Yn19LG9uVGlsZUxvYWRlZDpmdW5jdGlvbihhKXt0aGlzLmFjdGl2ZSYmKCFhLmFib3J0ZWQmJmEudGlsZSBpbnN0YW5jZW9mIE9wZW5MYXllcnMuVGlsZS5JbWFnZSYmImRhdGE6IiE9PWEudGlsZS51cmwuc3Vic3RyKDAsNSkpJiYodGhpcy5jYWNoZSh7dGlsZTphLnRpbGV9KSxkZWxldGUgT3BlbkxheWVycy5Db250cm9sLkNhY2hlV3JpdGUudXJsTWFwW2EudGlsZS51cmxdKX0sCmNhY2hlOmZ1bmN0aW9uKGEpe2lmKHdpbmRvdy5sb2NhbFN0b3JhZ2Upe2E9YS50aWxlO3RyeXt2YXIgYj1hLmdldENhbnZhc0NvbnRleHQoKTtiJiZ3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oIm9sQ2FjaGVfIisoT3BlbkxheWVycy5Db250cm9sLkNhY2hlV3JpdGUudXJsTWFwW2EudXJsXXx8YS51cmwpLGIuY2FudmFzLnRvRGF0YVVSTCh0aGlzLmltYWdlRm9ybWF0KSl9Y2F0Y2goYyl7KGI9Yy5uYW1lfHxjLm1lc3NhZ2UpJiZ0aGlzLnF1b3RhUmVnRXgudGVzdChiKT90aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoImNhY2hlZnVsbCIse3RpbGU6YX0pOk9wZW5MYXllcnMuQ29uc29sZS5lcnJvcihjLnRvU3RyaW5nKCkpfX19LGRlc3Ryb3k6ZnVuY3Rpb24oKXtpZih0aGlzLmxheWVyc3x8dGhpcy5tYXApe3ZhciBhLGI9dGhpcy5sYXllcnN8fHRoaXMubWFwLmxheWVycztmb3IoYT1iLmxlbmd0aC0xOzA8PWE7LS1hKXRoaXMucmVtb3ZlTGF5ZXIoe2xheWVyOmJbYV19KX10aGlzLm1hcCYmCnRoaXMubWFwLmV2ZW50cy51bih7YWRkbGF5ZXI6dGhpcy5hZGRMYXllcixyZW1vdmVMYXllcjp0aGlzLnJlbW92ZUxheWVyLHNjb3BlOnRoaXN9KTtPcGVuTGF5ZXJzLkNvbnRyb2wucHJvdG90eXBlLmRlc3Ryb3kuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkNvbnRyb2wuQ2FjaGVXcml0ZSJ9KTtPcGVuTGF5ZXJzLkNvbnRyb2wuQ2FjaGVXcml0ZS5jbGVhckNhY2hlPWZ1bmN0aW9uKCl7aWYod2luZG93LmxvY2FsU3RvcmFnZSl7dmFyIGEsYjtmb3IoYT13aW5kb3cubG9jYWxTdG9yYWdlLmxlbmd0aC0xOzA8PWE7LS1hKWI9d2luZG93LmxvY2FsU3RvcmFnZS5rZXkoYSksIm9sQ2FjaGVfIj09PWIuc3Vic3RyKDAsOCkmJndpbmRvdy5sb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShiKX19O09wZW5MYXllcnMuQ29udHJvbC5DYWNoZVdyaXRlLnVybE1hcD17fTtPcGVuTGF5ZXJzLkZvcm1hdC5Db250ZXh0PU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Gb3JtYXQuWE1MLlZlcnNpb25lZE9HQyx7bGF5ZXJPcHRpb25zOm51bGwsbGF5ZXJQYXJhbXM6bnVsbCxyZWFkOmZ1bmN0aW9uKGEsYil7dmFyIGM9T3BlbkxheWVycy5Gb3JtYXQuWE1MLlZlcnNpb25lZE9HQy5wcm90b3R5cGUucmVhZC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7aWYoYiYmYi5tYXApaWYodGhpcy5jb250ZXh0PWMsYi5tYXAgaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLk1hcCljPXRoaXMubWVyZ2VDb250ZXh0VG9NYXAoYyxiLm1hcCk7ZWxzZXt2YXIgZD1iLm1hcDtpZihPcGVuTGF5ZXJzLlV0aWwuaXNFbGVtZW50KGQpfHwic3RyaW5nIj09dHlwZW9mIGQpZD17ZGl2OmR9O2M9dGhpcy5jb250ZXh0VG9NYXAoYyxkKX1yZXR1cm4gY30sZ2V0TGF5ZXJGcm9tQ29udGV4dDpmdW5jdGlvbihhKXt2YXIgYixjLGQ9e3F1ZXJ5YWJsZTphLnF1ZXJ5YWJsZSx2aXNpYmlsaXR5OmEudmlzaWJpbGl0eSwKbWF4RXh0ZW50OmEubWF4RXh0ZW50LG1ldGFkYXRhOk9wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKGEubWV0YWRhdGEse3N0eWxlczphLnN0eWxlcyxmb3JtYXRzOmEuZm9ybWF0cywiYWJzdHJhY3QiOmFbImFic3RyYWN0Il0sZGF0YVVSTDphLmRhdGFVUkx9KSxudW1ab29tTGV2ZWxzOmEubnVtWm9vbUxldmVscyx1bml0czphLnVuaXRzLGlzQmFzZUxheWVyOmEuaXNCYXNlTGF5ZXIsb3BhY2l0eTphLm9wYWNpdHksZGlzcGxheUluTGF5ZXJTd2l0Y2hlcjphLmRpc3BsYXlJbkxheWVyU3dpdGNoZXIsc2luZ2xlVGlsZTphLnNpbmdsZVRpbGUsdGlsZVNpemU6YS50aWxlU2l6ZT9uZXcgT3BlbkxheWVycy5TaXplKGEudGlsZVNpemUud2lkdGgsYS50aWxlU2l6ZS5oZWlnaHQpOnZvaWQgMCxtaW5TY2FsZTphLm1pblNjYWxlfHxhLm1heFNjYWxlRGVub21pbmF0b3IsbWF4U2NhbGU6YS5tYXhTY2FsZXx8YS5taW5TY2FsZURlbm9taW5hdG9yLHNyczphLnNycyxkaW1lbnNpb25zOmEuZGltZW5zaW9ucywKbWV0YWRhdGFVUkw6YS5tZXRhZGF0YVVSTH07dGhpcy5sYXllck9wdGlvbnMmJk9wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKGQsdGhpcy5sYXllck9wdGlvbnMpO3ZhciBlPXtsYXllcnM6YS5uYW1lLHRyYW5zcGFyZW50OmEudHJhbnNwYXJlbnQsdmVyc2lvbjphLnZlcnNpb259O2lmKGEuZm9ybWF0cyYmMDxhLmZvcm1hdHMubGVuZ3RoKWZvcihlLmZvcm1hdD1hLmZvcm1hdHNbMF0udmFsdWUsYj0wLGM9YS5mb3JtYXRzLmxlbmd0aDtiPGM7YisrKXt2YXIgZj1hLmZvcm1hdHNbYl07aWYoITA9PWYuY3VycmVudCl7ZS5mb3JtYXQ9Zi52YWx1ZTticmVha319aWYoYS5zdHlsZXMmJjA8YS5zdHlsZXMubGVuZ3RoKWZvcihiPTAsYz1hLnN0eWxlcy5sZW5ndGg7YjxjO2IrKylpZihmPWEuc3R5bGVzW2JdLCEwPT1mLmN1cnJlbnQpe2YuaHJlZj9lLnNsZD1mLmhyZWY6Zi5ib2R5P2Uuc2xkX2JvZHk9Zi5ib2R5OmUuc3R5bGVzPWYubmFtZTticmVha310aGlzLmxheWVyUGFyYW1zJiYKT3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoZSx0aGlzLmxheWVyUGFyYW1zKTtiPW51bGw7Yz1hLnNlcnZpY2U7Yz09T3BlbkxheWVycy5Gb3JtYXQuQ29udGV4dC5zZXJ2aWNlVHlwZXMuV0ZTPyhkLnN0cmF0ZWdpZXM9W25ldyBPcGVuTGF5ZXJzLlN0cmF0ZWd5LkJCT1hdLGQucHJvdG9jb2w9bmV3IE9wZW5MYXllcnMuUHJvdG9jb2wuV0ZTKHt1cmw6YS51cmwsZmVhdHVyZVByZWZpeDphLm5hbWUuc3BsaXQoIjoiKVswXSxmZWF0dXJlVHlwZTphLm5hbWUuc3BsaXQoIjoiKS5wb3AoKX0pLGI9bmV3IE9wZW5MYXllcnMuTGF5ZXIuVmVjdG9yKGEudGl0bGV8fGEubmFtZSxkKSk6Yz09T3BlbkxheWVycy5Gb3JtYXQuQ29udGV4dC5zZXJ2aWNlVHlwZXMuS01MPyhkLnN0cmF0ZWdpZXM9W25ldyBPcGVuTGF5ZXJzLlN0cmF0ZWd5LkZpeGVkXSxkLnByb3RvY29sPW5ldyBPcGVuTGF5ZXJzLlByb3RvY29sLkhUVFAoe3VybDphLnVybCxmb3JtYXQ6bmV3IE9wZW5MYXllcnMuRm9ybWF0LktNTH0pLApiPW5ldyBPcGVuTGF5ZXJzLkxheWVyLlZlY3RvcihhLnRpdGxlfHxhLm5hbWUsZCkpOmM9PU9wZW5MYXllcnMuRm9ybWF0LkNvbnRleHQuc2VydmljZVR5cGVzLkdNTD8oZC5zdHJhdGVnaWVzPVtuZXcgT3BlbkxheWVycy5TdHJhdGVneS5GaXhlZF0sZC5wcm90b2NvbD1uZXcgT3BlbkxheWVycy5Qcm90b2NvbC5IVFRQKHt1cmw6YS51cmwsZm9ybWF0Om5ldyBPcGVuTGF5ZXJzLkZvcm1hdC5HTUx9KSxiPW5ldyBPcGVuTGF5ZXJzLkxheWVyLlZlY3RvcihhLnRpdGxlfHxhLm5hbWUsZCkpOmEuZmVhdHVyZXM/KGI9bmV3IE9wZW5MYXllcnMuTGF5ZXIuVmVjdG9yKGEudGl0bGV8fGEubmFtZSxkKSxiLmFkZEZlYXR1cmVzKGEuZmVhdHVyZXMpKTohMCE9PWEuY2F0ZWdvcnlMYXllciYmKGI9bmV3IE9wZW5MYXllcnMuTGF5ZXIuV01TKGEudGl0bGV8fGEubmFtZSxhLnVybCxlLGQpKTtyZXR1cm4gYn0sZ2V0TGF5ZXJzRnJvbUNvbnRleHQ6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPVtdLGM9CjAsZD1hLmxlbmd0aDtjPGQ7YysrKXt2YXIgZT10aGlzLmdldExheWVyRnJvbUNvbnRleHQoYVtjXSk7bnVsbCE9PWUmJmIucHVzaChlKX1yZXR1cm4gYn0sY29udGV4dFRvTWFwOmZ1bmN0aW9uKGEsYil7Yj1PcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyh7bWF4RXh0ZW50OmEubWF4RXh0ZW50LHByb2plY3Rpb246YS5wcm9qZWN0aW9uLHVuaXRzOmEudW5pdHN9LGIpO2IubWF4RXh0ZW50JiYoYi5tYXhSZXNvbHV0aW9uPWIubWF4RXh0ZW50LmdldFdpZHRoKCkvT3BlbkxheWVycy5NYXAuVElMRV9XSURUSCk7Yi5tZXRhZGF0YT17Y29udGFjdEluZm9ybWF0aW9uOmEuY29udGFjdEluZm9ybWF0aW9uLCJhYnN0cmFjdCI6YVsiYWJzdHJhY3QiXSxrZXl3b3JkczphLmtleXdvcmRzLGxvZ286YS5sb2dvLGRlc2NyaXB0aW9uVVJMOmEuZGVzY3JpcHRpb25VUkx9O3ZhciBjPW5ldyBPcGVuTGF5ZXJzLk1hcChiKTtjLmFkZExheWVycyh0aGlzLmdldExheWVyc0Zyb21Db250ZXh0KGEubGF5ZXJzQ29udGV4dCkpOwpjLnNldENlbnRlcihhLmJvdW5kcy5nZXRDZW50ZXJMb25MYXQoKSxjLmdldFpvb21Gb3JFeHRlbnQoYS5ib3VuZHMsITApKTtyZXR1cm4gY30sbWVyZ2VDb250ZXh0VG9NYXA6ZnVuY3Rpb24oYSxiKXtiLmFkZExheWVycyh0aGlzLmdldExheWVyc0Zyb21Db250ZXh0KGEubGF5ZXJzQ29udGV4dCkpO3JldHVybiBifSx3cml0ZTpmdW5jdGlvbihhLGIpe2E9dGhpcy50b0NvbnRleHQoYSk7cmV0dXJuIE9wZW5MYXllcnMuRm9ybWF0LlhNTC5WZXJzaW9uZWRPR0MucHJvdG90eXBlLndyaXRlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Gb3JtYXQuQ29udGV4dCJ9KTsKT3BlbkxheWVycy5Gb3JtYXQuQ29udGV4dC5zZXJ2aWNlVHlwZXM9e1dNUzoidXJuOm9nYzpzZXJ2aWNlVHlwZTpXTVMiLFdGUzoidXJuOm9nYzpzZXJ2aWNlVHlwZTpXRlMiLFdDUzoidXJuOm9nYzpzZXJ2aWNlVHlwZTpXQ1MiLEdNTDoidXJuOm9nYzpzZXJ2aWNlVHlwZTpHTUwiLFNMRDoidXJuOm9nYzpzZXJ2aWNlVHlwZTpTTEQiLEZFUzoidXJuOm9nYzpzZXJ2aWNlVHlwZTpGRVMiLEtNTDoidXJuOm9nYzpzZXJ2aWNlVHlwZTpLTUwifTtPcGVuTGF5ZXJzLkZvcm1hdC5XTUM9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkZvcm1hdC5Db250ZXh0LHtkZWZhdWx0VmVyc2lvbjoiMS4xLjAiLGxheWVyVG9Db250ZXh0OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZ2V0UGFyc2VyKCksYz17cXVlcnlhYmxlOmEucXVlcnlhYmxlLHZpc2liaWxpdHk6YS52aXNpYmlsaXR5LG5hbWU6YS5wYXJhbXMuTEFZRVJTLHRpdGxlOmEubmFtZSwiYWJzdHJhY3QiOmEubWV0YWRhdGFbImFic3RyYWN0Il0sZGF0YVVSTDphLm1ldGFkYXRhLmRhdGFVUkwsbWV0YWRhdGFVUkw6YS5tZXRhZGF0YVVSTCxzZXJ2ZXI6e3ZlcnNpb246YS5wYXJhbXMuVkVSU0lPTix1cmw6YS51cmx9LG1heEV4dGVudDphLm1heEV4dGVudCx0cmFuc3BhcmVudDphLnBhcmFtcy5UUkFOU1BBUkVOVCxudW1ab29tTGV2ZWxzOmEubnVtWm9vbUxldmVscyx1bml0czphLnVuaXRzLGlzQmFzZUxheWVyOmEuaXNCYXNlTGF5ZXIsb3BhY2l0eToxPT1hLm9wYWNpdHk/dm9pZCAwOgphLm9wYWNpdHksZGlzcGxheUluTGF5ZXJTd2l0Y2hlcjphLmRpc3BsYXlJbkxheWVyU3dpdGNoZXIsc2luZ2xlVGlsZTphLnNpbmdsZVRpbGUsdGlsZVNpemU6YS5zaW5nbGVUaWxlfHwhYS50aWxlU2l6ZT92b2lkIDA6e3dpZHRoOmEudGlsZVNpemUudyxoZWlnaHQ6YS50aWxlU2l6ZS5ofSxtaW5TY2FsZTphLm9wdGlvbnMucmVzb2x1dGlvbnN8fGEub3B0aW9ucy5zY2FsZXN8fGEub3B0aW9ucy5tYXhSZXNvbHV0aW9ufHxhLm9wdGlvbnMubWluU2NhbGU/YS5taW5TY2FsZTp2b2lkIDAsbWF4U2NhbGU6YS5vcHRpb25zLnJlc29sdXRpb25zfHxhLm9wdGlvbnMuc2NhbGVzfHxhLm9wdGlvbnMubWluUmVzb2x1dGlvbnx8YS5vcHRpb25zLm1heFNjYWxlP2EubWF4U2NhbGU6dm9pZCAwLGZvcm1hdHM6W10sc3R5bGVzOltdLHNyczphLnNycyxkaW1lbnNpb25zOmEuZGltZW5zaW9uc307YS5tZXRhZGF0YS5zZXJ2ZXJ0aXRsZSYmKGMuc2VydmVyLnRpdGxlPWEubWV0YWRhdGEuc2VydmVydGl0bGUpOwppZihhLm1ldGFkYXRhLmZvcm1hdHMmJjA8YS5tZXRhZGF0YS5mb3JtYXRzLmxlbmd0aClmb3IodmFyIGQ9MCxlPWEubWV0YWRhdGEuZm9ybWF0cy5sZW5ndGg7ZDxlO2QrKyl7dmFyIGY9YS5tZXRhZGF0YS5mb3JtYXRzW2RdO2MuZm9ybWF0cy5wdXNoKHt2YWx1ZTpmLnZhbHVlLGN1cnJlbnQ6Zi52YWx1ZT09YS5wYXJhbXMuRk9STUFUfSl9ZWxzZSBjLmZvcm1hdHMucHVzaCh7dmFsdWU6YS5wYXJhbXMuRk9STUFULGN1cnJlbnQ6ITB9KTtpZihhLm1ldGFkYXRhLnN0eWxlcyYmMDxhLm1ldGFkYXRhLnN0eWxlcy5sZW5ndGgpZm9yKGQ9MCxlPWEubWV0YWRhdGEuc3R5bGVzLmxlbmd0aDtkPGU7ZCsrKWI9YS5tZXRhZGF0YS5zdHlsZXNbZF0sYi5jdXJyZW50PWIuaHJlZj09YS5wYXJhbXMuU0xEfHxiLmJvZHk9PWEucGFyYW1zLlNMRF9CT0RZfHxiLm5hbWU9PWEucGFyYW1zLlNUWUxFUz8hMDohMSxjLnN0eWxlcy5wdXNoKGIpO2Vsc2UgYy5zdHlsZXMucHVzaCh7aHJlZjphLnBhcmFtcy5TTEQsCmJvZHk6YS5wYXJhbXMuU0xEX0JPRFksbmFtZTphLnBhcmFtcy5TVFlMRVN8fGIuZGVmYXVsdFN0eWxlTmFtZSx0aXRsZTpiLmRlZmF1bHRTdHlsZVRpdGxlLGN1cnJlbnQ6ITB9KTtyZXR1cm4gY30sdG9Db250ZXh0OmZ1bmN0aW9uKGEpe3ZhciBiPXt9LGM9YS5sYXllcnM7aWYoIk9wZW5MYXllcnMuTWFwIj09YS5DTEFTU19OQU1FKXt2YXIgZD1hLm1ldGFkYXRhfHx7fTtiLnNpemU9YS5nZXRTaXplKCk7Yi5ib3VuZHM9YS5nZXRFeHRlbnQoKTtiLnByb2plY3Rpb249YS5wcm9qZWN0aW9uO2IudGl0bGU9YS50aXRsZTtiLmtleXdvcmRzPWQua2V5d29yZHM7YlsiYWJzdHJhY3QiXT1kWyJhYnN0cmFjdCJdO2IubG9nbz1kLmxvZ287Yi5kZXNjcmlwdGlvblVSTD1kLmRlc2NyaXB0aW9uVVJMO2IuY29udGFjdEluZm9ybWF0aW9uPWQuY29udGFjdEluZm9ybWF0aW9uO2IubWF4RXh0ZW50PWEubWF4RXh0ZW50fWVsc2UgT3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoYixhKSx2b2lkIDAhPQpiLmxheWVycyYmZGVsZXRlIGIubGF5ZXJzO3ZvaWQgMD09Yi5sYXllcnNDb250ZXh0JiYoYi5sYXllcnNDb250ZXh0PVtdKTtpZih2b2lkIDAhPWMmJk9wZW5MYXllcnMuVXRpbC5pc0FycmF5KGMpKWZvcihhPTAsZD1jLmxlbmd0aDthPGQ7YSsrKXt2YXIgZT1jW2FdO2UgaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLkxheWVyLldNUyYmYi5sYXllcnNDb250ZXh0LnB1c2godGhpcy5sYXllclRvQ29udGV4dChlKSl9cmV0dXJuIGJ9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuRm9ybWF0LldNQyJ9KTtPcGVuTGF5ZXJzLkZvcm1hdC5XTUMudjE9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkZvcm1hdC5YTUwse25hbWVzcGFjZXM6e29sOiJodHRwOi8vb3BlbmxheWVycy5vcmcvY29udGV4dCIsd21jOiJodHRwOi8vd3d3Lm9wZW5naXMubmV0L2NvbnRleHQiLHNsZDoiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9zbGQiLHhsaW5rOiJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIix4c2k6Imh0dHA6Ly93d3cudzMub3JnLzIwMDEvWE1MU2NoZW1hLWluc3RhbmNlIn0sc2NoZW1hTG9jYXRpb246IiIsZ2V0TmFtZXNwYWNlUHJlZml4OmZ1bmN0aW9uKGEpe3ZhciBiPW51bGw7aWYobnVsbD09YSliPXRoaXMubmFtZXNwYWNlc1t0aGlzLmRlZmF1bHRQcmVmaXhdO2Vsc2UgZm9yKGIgaW4gdGhpcy5uYW1lc3BhY2VzKWlmKHRoaXMubmFtZXNwYWNlc1tiXT09YSlicmVhaztyZXR1cm4gYn0sZGVmYXVsdFByZWZpeDoid21jIixyb290UHJlZml4Om51bGwsZGVmYXVsdFN0eWxlTmFtZToiIiwKZGVmYXVsdFN0eWxlVGl0bGU6IkRlZmF1bHQiLGluaXRpYWxpemU6ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5Gb3JtYXQuWE1MLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsW2FdKX0scmVhZDpmdW5jdGlvbihhKXsic3RyaW5nIj09dHlwZW9mIGEmJihhPU9wZW5MYXllcnMuRm9ybWF0LlhNTC5wcm90b3R5cGUucmVhZC5hcHBseSh0aGlzLFthXSkpO2E9YS5kb2N1bWVudEVsZW1lbnQ7dGhpcy5yb290UHJlZml4PWEucHJlZml4O3ZhciBiPXt2ZXJzaW9uOmEuZ2V0QXR0cmlidXRlKCJ2ZXJzaW9uIil9O3RoaXMucnVuQ2hpbGROb2RlcyhiLGEpO3JldHVybiBifSxydW5DaGlsZE5vZGVzOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPWIuY2hpbGROb2RlcyxkLGUsZixnPTAsaD1jLmxlbmd0aDtnPGg7KytnKWQ9Y1tnXSwxPT1kLm5vZGVUeXBlJiYoZT10aGlzLmdldE5hbWVzcGFjZVByZWZpeChkLm5hbWVzcGFjZVVSSSksZj1kLm5vZGVOYW1lLnNwbGl0KCI6IikucG9wKCksCihlPXRoaXNbInJlYWRfIitlKyJfIitmXSkmJmUuYXBwbHkodGhpcyxbYSxkXSkpfSxyZWFkX3dtY19HZW5lcmFsOmZ1bmN0aW9uKGEsYil7dGhpcy5ydW5DaGlsZE5vZGVzKGEsYil9LHJlYWRfd21jX0JvdW5kaW5nQm94OmZ1bmN0aW9uKGEsYil7YS5wcm9qZWN0aW9uPWIuZ2V0QXR0cmlidXRlKCJTUlMiKTthLmJvdW5kcz1uZXcgT3BlbkxheWVycy5Cb3VuZHMoYi5nZXRBdHRyaWJ1dGUoIm1pbngiKSxiLmdldEF0dHJpYnV0ZSgibWlueSIpLGIuZ2V0QXR0cmlidXRlKCJtYXh4IiksYi5nZXRBdHRyaWJ1dGUoIm1heHkiKSl9LHJlYWRfd21jX0xheWVyTGlzdDpmdW5jdGlvbihhLGIpe2EubGF5ZXJzQ29udGV4dD1bXTt0aGlzLnJ1bkNoaWxkTm9kZXMoYSxiKX0scmVhZF93bWNfTGF5ZXI6ZnVuY3Rpb24oYSxiKXt2YXIgYz17dmlzaWJpbGl0eToiMSIhPWIuZ2V0QXR0cmlidXRlKCJoaWRkZW4iKSxxdWVyeWFibGU6IjEiPT1iLmdldEF0dHJpYnV0ZSgicXVlcnlhYmxlIiksZm9ybWF0czpbXSwKc3R5bGVzOltdLG1ldGFkYXRhOnt9fTt0aGlzLnJ1bkNoaWxkTm9kZXMoYyxiKTthLmxheWVyc0NvbnRleHQucHVzaChjKX0scmVhZF93bWNfRXh0ZW5zaW9uOmZ1bmN0aW9uKGEsYil7dGhpcy5ydW5DaGlsZE5vZGVzKGEsYil9LHJlYWRfb2xfdW5pdHM6ZnVuY3Rpb24oYSxiKXthLnVuaXRzPXRoaXMuZ2V0Q2hpbGRWYWx1ZShiKX0scmVhZF9vbF9tYXhFeHRlbnQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz1uZXcgT3BlbkxheWVycy5Cb3VuZHMoYi5nZXRBdHRyaWJ1dGUoIm1pbngiKSxiLmdldEF0dHJpYnV0ZSgibWlueSIpLGIuZ2V0QXR0cmlidXRlKCJtYXh4IiksYi5nZXRBdHRyaWJ1dGUoIm1heHkiKSk7YS5tYXhFeHRlbnQ9Y30scmVhZF9vbF90cmFuc3BhcmVudDpmdW5jdGlvbihhLGIpe2EudHJhbnNwYXJlbnQ9dGhpcy5nZXRDaGlsZFZhbHVlKGIpfSxyZWFkX29sX251bVpvb21MZXZlbHM6ZnVuY3Rpb24oYSxiKXthLm51bVpvb21MZXZlbHM9cGFyc2VJbnQodGhpcy5nZXRDaGlsZFZhbHVlKGIpKX0sCnJlYWRfb2xfb3BhY2l0eTpmdW5jdGlvbihhLGIpe2Eub3BhY2l0eT1wYXJzZUZsb2F0KHRoaXMuZ2V0Q2hpbGRWYWx1ZShiKSl9LHJlYWRfb2xfc2luZ2xlVGlsZTpmdW5jdGlvbihhLGIpe2Euc2luZ2xlVGlsZT0idHJ1ZSI9PXRoaXMuZ2V0Q2hpbGRWYWx1ZShiKX0scmVhZF9vbF90aWxlU2l6ZTpmdW5jdGlvbihhLGIpe3ZhciBjPXt3aWR0aDpiLmdldEF0dHJpYnV0ZSgid2lkdGgiKSxoZWlnaHQ6Yi5nZXRBdHRyaWJ1dGUoImhlaWdodCIpfTthLnRpbGVTaXplPWN9LHJlYWRfb2xfaXNCYXNlTGF5ZXI6ZnVuY3Rpb24oYSxiKXthLmlzQmFzZUxheWVyPSJ0cnVlIj09dGhpcy5nZXRDaGlsZFZhbHVlKGIpfSxyZWFkX29sX2Rpc3BsYXlJbkxheWVyU3dpdGNoZXI6ZnVuY3Rpb24oYSxiKXthLmRpc3BsYXlJbkxheWVyU3dpdGNoZXI9InRydWUiPT10aGlzLmdldENoaWxkVmFsdWUoYil9LHJlYWRfd21jX1NlcnZlcjpmdW5jdGlvbihhLGIpe2EudmVyc2lvbj1iLmdldEF0dHJpYnV0ZSgidmVyc2lvbiIpOwphLnVybD10aGlzLmdldE9ubGluZVJlc291cmNlX2hyZWYoYik7YS5tZXRhZGF0YS5zZXJ2ZXJ0aXRsZT1iLmdldEF0dHJpYnV0ZSgidGl0bGUiKX0scmVhZF93bWNfRm9ybWF0TGlzdDpmdW5jdGlvbihhLGIpe3RoaXMucnVuQ2hpbGROb2RlcyhhLGIpfSxyZWFkX3dtY19Gb3JtYXQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz17dmFsdWU6dGhpcy5nZXRDaGlsZFZhbHVlKGIpfTsiMSI9PWIuZ2V0QXR0cmlidXRlKCJjdXJyZW50IikmJihjLmN1cnJlbnQ9ITApO2EuZm9ybWF0cy5wdXNoKGMpfSxyZWFkX3dtY19TdHlsZUxpc3Q6ZnVuY3Rpb24oYSxiKXt0aGlzLnJ1bkNoaWxkTm9kZXMoYSxiKX0scmVhZF93bWNfU3R5bGU6ZnVuY3Rpb24oYSxiKXt2YXIgYz17fTt0aGlzLnJ1bkNoaWxkTm9kZXMoYyxiKTsiMSI9PWIuZ2V0QXR0cmlidXRlKCJjdXJyZW50IikmJihjLmN1cnJlbnQ9ITApO2Euc3R5bGVzLnB1c2goYyl9LHJlYWRfd21jX1NMRDpmdW5jdGlvbihhLGIpe3RoaXMucnVuQ2hpbGROb2RlcyhhLApiKX0scmVhZF9zbGRfU3R5bGVkTGF5ZXJEZXNjcmlwdG9yOmZ1bmN0aW9uKGEsYil7dmFyIGM9T3BlbkxheWVycy5Gb3JtYXQuWE1MLnByb3RvdHlwZS53cml0ZS5hcHBseSh0aGlzLFtiXSk7YS5ib2R5PWN9LHJlYWRfc2xkX0ZlYXR1cmVUeXBlU3R5bGU6ZnVuY3Rpb24oYSxiKXt2YXIgYz1PcGVuTGF5ZXJzLkZvcm1hdC5YTUwucHJvdG90eXBlLndyaXRlLmFwcGx5KHRoaXMsW2JdKTthLmJvZHk9Y30scmVhZF93bWNfT25saW5lUmVzb3VyY2U6ZnVuY3Rpb24oYSxiKXthLmhyZWY9dGhpcy5nZXRBdHRyaWJ1dGVOUyhiLHRoaXMubmFtZXNwYWNlcy54bGluaywiaHJlZiIpfSxyZWFkX3dtY19OYW1lOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5nZXRDaGlsZFZhbHVlKGIpO2MmJihhLm5hbWU9Yyl9LHJlYWRfd21jX1RpdGxlOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5nZXRDaGlsZFZhbHVlKGIpO2MmJihhLnRpdGxlPWMpfSxyZWFkX3dtY19NZXRhZGF0YVVSTDpmdW5jdGlvbihhLApiKXthLm1ldGFkYXRhVVJMPXRoaXMuZ2V0T25saW5lUmVzb3VyY2VfaHJlZihiKX0scmVhZF93bWNfS2V5d29yZExpc3Q6ZnVuY3Rpb24oYSxiKXthLmtleXdvcmRzPVtdO3RoaXMucnVuQ2hpbGROb2RlcyhhLmtleXdvcmRzLGIpfSxyZWFkX3dtY19LZXl3b3JkOmZ1bmN0aW9uKGEsYil7YS5wdXNoKHRoaXMuZ2V0Q2hpbGRWYWx1ZShiKSl9LHJlYWRfd21jX0Fic3RyYWN0OmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5nZXRDaGlsZFZhbHVlKGIpO2MmJihhWyJhYnN0cmFjdCJdPWMpfSxyZWFkX3dtY19Mb2dvVVJMOmZ1bmN0aW9uKGEsYil7YS5sb2dvPXt3aWR0aDpiLmdldEF0dHJpYnV0ZSgid2lkdGgiKSxoZWlnaHQ6Yi5nZXRBdHRyaWJ1dGUoImhlaWdodCIpLGZvcm1hdDpiLmdldEF0dHJpYnV0ZSgiZm9ybWF0IiksaHJlZjp0aGlzLmdldE9ubGluZVJlc291cmNlX2hyZWYoYil9fSxyZWFkX3dtY19EZXNjcmlwdGlvblVSTDpmdW5jdGlvbihhLGIpe2EuZGVzY3JpcHRpb25VUkw9CnRoaXMuZ2V0T25saW5lUmVzb3VyY2VfaHJlZihiKX0scmVhZF93bWNfQ29udGFjdEluZm9ybWF0aW9uOmZ1bmN0aW9uKGEsYil7dmFyIGM9e307dGhpcy5ydW5DaGlsZE5vZGVzKGMsYik7YS5jb250YWN0SW5mb3JtYXRpb249Y30scmVhZF93bWNfQ29udGFjdFBlcnNvblByaW1hcnk6ZnVuY3Rpb24oYSxiKXt2YXIgYz17fTt0aGlzLnJ1bkNoaWxkTm9kZXMoYyxiKTthLnBlcnNvblByaW1hcnk9Y30scmVhZF93bWNfQ29udGFjdFBlcnNvbjpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuZ2V0Q2hpbGRWYWx1ZShiKTtjJiYoYS5wZXJzb249Yyl9LHJlYWRfd21jX0NvbnRhY3RPcmdhbml6YXRpb246ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmdldENoaWxkVmFsdWUoYik7YyYmKGEub3JnYW5pemF0aW9uPWMpfSxyZWFkX3dtY19Db250YWN0UG9zaXRpb246ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmdldENoaWxkVmFsdWUoYik7YyYmKGEucG9zaXRpb249Yyl9LHJlYWRfd21jX0NvbnRhY3RBZGRyZXNzOmZ1bmN0aW9uKGEsCmIpe3ZhciBjPXt9O3RoaXMucnVuQ2hpbGROb2RlcyhjLGIpO2EuY29udGFjdEFkZHJlc3M9Y30scmVhZF93bWNfQWRkcmVzc1R5cGU6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmdldENoaWxkVmFsdWUoYik7YyYmKGEudHlwZT1jKX0scmVhZF93bWNfQWRkcmVzczpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuZ2V0Q2hpbGRWYWx1ZShiKTtjJiYoYS5hZGRyZXNzPWMpfSxyZWFkX3dtY19DaXR5OmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5nZXRDaGlsZFZhbHVlKGIpO2MmJihhLmNpdHk9Yyl9LHJlYWRfd21jX1N0YXRlT3JQcm92aW5jZTpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuZ2V0Q2hpbGRWYWx1ZShiKTtjJiYoYS5zdGF0ZU9yUHJvdmluY2U9Yyl9LHJlYWRfd21jX1Bvc3RDb2RlOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5nZXRDaGlsZFZhbHVlKGIpO2MmJihhLnBvc3Rjb2RlPWMpfSxyZWFkX3dtY19Db3VudHJ5OmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5nZXRDaGlsZFZhbHVlKGIpOwpjJiYoYS5jb3VudHJ5PWMpfSxyZWFkX3dtY19Db250YWN0Vm9pY2VUZWxlcGhvbmU6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmdldENoaWxkVmFsdWUoYik7YyYmKGEucGhvbmU9Yyl9LHJlYWRfd21jX0NvbnRhY3RGYWNzaW1pbGVUZWxlcGhvbmU6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmdldENoaWxkVmFsdWUoYik7YyYmKGEuZmF4PWMpfSxyZWFkX3dtY19Db250YWN0RWxlY3Ryb25pY01haWxBZGRyZXNzOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5nZXRDaGlsZFZhbHVlKGIpO2MmJihhLmVtYWlsPWMpfSxyZWFkX3dtY19EYXRhVVJMOmZ1bmN0aW9uKGEsYil7YS5kYXRhVVJMPXRoaXMuZ2V0T25saW5lUmVzb3VyY2VfaHJlZihiKX0scmVhZF93bWNfTGVnZW5kVVJMOmZ1bmN0aW9uKGEsYil7dmFyIGM9e3dpZHRoOmIuZ2V0QXR0cmlidXRlKCJ3aWR0aCIpLGhlaWdodDpiLmdldEF0dHJpYnV0ZSgiaGVpZ2h0IiksZm9ybWF0OmIuZ2V0QXR0cmlidXRlKCJmb3JtYXQiKSwKaHJlZjp0aGlzLmdldE9ubGluZVJlc291cmNlX2hyZWYoYil9O2EubGVnZW5kPWN9LHJlYWRfd21jX0RpbWVuc2lvbkxpc3Q6ZnVuY3Rpb24oYSxiKXthLmRpbWVuc2lvbnM9e307dGhpcy5ydW5DaGlsZE5vZGVzKGEuZGltZW5zaW9ucyxiKX0scmVhZF93bWNfRGltZW5zaW9uOmZ1bmN0aW9uKGEsYil7dmFyIGM9e25hbWU6Yi5nZXRBdHRyaWJ1dGUoIm5hbWUiKS50b0xvd2VyQ2FzZSgpLHVuaXRzOmIuZ2V0QXR0cmlidXRlKCJ1bml0cyIpfHwiIix1bml0U3ltYm9sOmIuZ2V0QXR0cmlidXRlKCJ1bml0U3ltYm9sIil8fCIiLHVzZXJWYWx1ZTpiLmdldEF0dHJpYnV0ZSgidXNlclZhbHVlIil8fCIiLG5lYXJlc3RWYWx1ZToiMSI9PT1iLmdldEF0dHJpYnV0ZSgibmVhcmVzdFZhbHVlIiksbXVsdGlwbGVWYWx1ZXM6IjEiPT09Yi5nZXRBdHRyaWJ1dGUoIm11bHRpcGxlVmFsdWVzIiksY3VycmVudDoiMSI9PT1iLmdldEF0dHJpYnV0ZSgiY3VycmVudCIpLCJkZWZhdWx0IjpiLmdldEF0dHJpYnV0ZSgiZGVmYXVsdCIpfHwKIiJ9LGQ9dGhpcy5nZXRDaGlsZFZhbHVlKGIpO2MudmFsdWVzPWQuc3BsaXQoIiwiKTthW2MubmFtZV09Y30sd3JpdGU6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmNyZWF0ZUVsZW1lbnREZWZhdWx0TlMoIlZpZXdDb250ZXh0Iik7dGhpcy5zZXRBdHRyaWJ1dGVzKGMse3ZlcnNpb246dGhpcy5WRVJTSU9OLGlkOmImJiJzdHJpbmciPT10eXBlb2YgYi5pZD9iLmlkOk9wZW5MYXllcnMuVXRpbC5jcmVhdGVVbmlxdWVJRCgiT3BlbkxheWVyc19Db250ZXh0XyIpfSk7dGhpcy5zZXRBdHRyaWJ1dGVOUyhjLHRoaXMubmFtZXNwYWNlcy54c2ksInhzaTpzY2hlbWFMb2NhdGlvbiIsdGhpcy5zY2hlbWFMb2NhdGlvbik7Yy5hcHBlbmRDaGlsZCh0aGlzLndyaXRlX3dtY19HZW5lcmFsKGEpKTtjLmFwcGVuZENoaWxkKHRoaXMud3JpdGVfd21jX0xheWVyTGlzdChhKSk7cmV0dXJuIE9wZW5MYXllcnMuRm9ybWF0LlhNTC5wcm90b3R5cGUud3JpdGUuYXBwbHkodGhpcyxbY10pfSxjcmVhdGVFbGVtZW50RGVmYXVsdE5TOmZ1bmN0aW9uKGEsCmIsYyl7YT10aGlzLmNyZWF0ZUVsZW1lbnROUyh0aGlzLm5hbWVzcGFjZXNbdGhpcy5kZWZhdWx0UHJlZml4XSxhKTtiJiZhLmFwcGVuZENoaWxkKHRoaXMuY3JlYXRlVGV4dE5vZGUoYikpO2MmJnRoaXMuc2V0QXR0cmlidXRlcyhhLGMpO3JldHVybiBhfSxzZXRBdHRyaWJ1dGVzOmZ1bmN0aW9uKGEsYil7dmFyIGMsZDtmb3IoZCBpbiBiKWM9YltkXS50b1N0cmluZygpLGMubWF0Y2goL1tBLVpdLyk/dGhpcy5zZXRBdHRyaWJ1dGVOUyhhLG51bGwsZCxjKTphLnNldEF0dHJpYnV0ZShkLGMpfSx3cml0ZV93bWNfR2VuZXJhbDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnREZWZhdWx0TlMoIkdlbmVyYWwiKTthLnNpemUmJmIuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVFbGVtZW50RGVmYXVsdE5TKCJXaW5kb3ciLG51bGwse3dpZHRoOmEuc2l6ZS53LGhlaWdodDphLnNpemUuaH0pKTt2YXIgYz1hLmJvdW5kcztiLmFwcGVuZENoaWxkKHRoaXMuY3JlYXRlRWxlbWVudERlZmF1bHROUygiQm91bmRpbmdCb3giLApudWxsLHttaW54OmMubGVmdC50b1ByZWNpc2lvbigxOCksbWlueTpjLmJvdHRvbS50b1ByZWNpc2lvbigxOCksbWF4eDpjLnJpZ2h0LnRvUHJlY2lzaW9uKDE4KSxtYXh5OmMudG9wLnRvUHJlY2lzaW9uKDE4KSxTUlM6YS5wcm9qZWN0aW9ufSkpO2IuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVFbGVtZW50RGVmYXVsdE5TKCJUaXRsZSIsYS50aXRsZSkpO2Eua2V5d29yZHMmJmIuYXBwZW5kQ2hpbGQodGhpcy53cml0ZV93bWNfS2V5d29yZExpc3QoYS5rZXl3b3JkcykpO2FbImFic3RyYWN0Il0mJmIuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVFbGVtZW50RGVmYXVsdE5TKCJBYnN0cmFjdCIsYVsiYWJzdHJhY3QiXSkpO2EubG9nbyYmYi5hcHBlbmRDaGlsZCh0aGlzLndyaXRlX3dtY19VUkxUeXBlKCJMb2dvVVJMIixhLmxvZ28uaHJlZixhLmxvZ28pKTthLmRlc2NyaXB0aW9uVVJMJiZiLmFwcGVuZENoaWxkKHRoaXMud3JpdGVfd21jX1VSTFR5cGUoIkRlc2NyaXB0aW9uVVJMIixhLmRlc2NyaXB0aW9uVVJMKSk7CmEuY29udGFjdEluZm9ybWF0aW9uJiZiLmFwcGVuZENoaWxkKHRoaXMud3JpdGVfd21jX0NvbnRhY3RJbmZvcm1hdGlvbihhLmNvbnRhY3RJbmZvcm1hdGlvbikpO2IuYXBwZW5kQ2hpbGQodGhpcy53cml0ZV9vbF9NYXBFeHRlbnNpb24oYSkpO3JldHVybiBifSx3cml0ZV93bWNfS2V5d29yZExpc3Q6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPXRoaXMuY3JlYXRlRWxlbWVudERlZmF1bHROUygiS2V5d29yZExpc3QiKSxjPTAsZD1hLmxlbmd0aDtjPGQ7YysrKWIuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVFbGVtZW50RGVmYXVsdE5TKCJLZXl3b3JkIixhW2NdKSk7cmV0dXJuIGJ9LHdyaXRlX3dtY19Db250YWN0SW5mb3JtYXRpb246ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50RGVmYXVsdE5TKCJDb250YWN0SW5mb3JtYXRpb24iKTthLnBlcnNvblByaW1hcnkmJmIuYXBwZW5kQ2hpbGQodGhpcy53cml0ZV93bWNfQ29udGFjdFBlcnNvblByaW1hcnkoYS5wZXJzb25QcmltYXJ5KSk7CmEucG9zaXRpb24mJmIuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVFbGVtZW50RGVmYXVsdE5TKCJDb250YWN0UG9zaXRpb24iLGEucG9zaXRpb24pKTthLmNvbnRhY3RBZGRyZXNzJiZiLmFwcGVuZENoaWxkKHRoaXMud3JpdGVfd21jX0NvbnRhY3RBZGRyZXNzKGEuY29udGFjdEFkZHJlc3MpKTthLnBob25lJiZiLmFwcGVuZENoaWxkKHRoaXMuY3JlYXRlRWxlbWVudERlZmF1bHROUygiQ29udGFjdFZvaWNlVGVsZXBob25lIixhLnBob25lKSk7YS5mYXgmJmIuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVFbGVtZW50RGVmYXVsdE5TKCJDb250YWN0RmFjc2ltaWxlVGVsZXBob25lIixhLmZheCkpO2EuZW1haWwmJmIuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVFbGVtZW50RGVmYXVsdE5TKCJDb250YWN0RWxlY3Ryb25pY01haWxBZGRyZXNzIixhLmVtYWlsKSk7cmV0dXJuIGJ9LHdyaXRlX3dtY19Db250YWN0UGVyc29uUHJpbWFyeTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnREZWZhdWx0TlMoIkNvbnRhY3RQZXJzb25QcmltYXJ5Iik7CmEucGVyc29uJiZiLmFwcGVuZENoaWxkKHRoaXMuY3JlYXRlRWxlbWVudERlZmF1bHROUygiQ29udGFjdFBlcnNvbiIsYS5wZXJzb24pKTthLm9yZ2FuaXphdGlvbiYmYi5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZUVsZW1lbnREZWZhdWx0TlMoIkNvbnRhY3RPcmdhbml6YXRpb24iLGEub3JnYW5pemF0aW9uKSk7cmV0dXJuIGJ9LHdyaXRlX3dtY19Db250YWN0QWRkcmVzczpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnREZWZhdWx0TlMoIkNvbnRhY3RBZGRyZXNzIik7YS50eXBlJiZiLmFwcGVuZENoaWxkKHRoaXMuY3JlYXRlRWxlbWVudERlZmF1bHROUygiQWRkcmVzc1R5cGUiLGEudHlwZSkpO2EuYWRkcmVzcyYmYi5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZUVsZW1lbnREZWZhdWx0TlMoIkFkZHJlc3MiLGEuYWRkcmVzcykpO2EuY2l0eSYmYi5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZUVsZW1lbnREZWZhdWx0TlMoIkNpdHkiLGEuY2l0eSkpO2Euc3RhdGVPclByb3ZpbmNlJiYKYi5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZUVsZW1lbnREZWZhdWx0TlMoIlN0YXRlT3JQcm92aW5jZSIsYS5zdGF0ZU9yUHJvdmluY2UpKTthLnBvc3Rjb2RlJiZiLmFwcGVuZENoaWxkKHRoaXMuY3JlYXRlRWxlbWVudERlZmF1bHROUygiUG9zdENvZGUiLGEucG9zdGNvZGUpKTthLmNvdW50cnkmJmIuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVFbGVtZW50RGVmYXVsdE5TKCJDb3VudHJ5IixhLmNvdW50cnkpKTtyZXR1cm4gYn0sd3JpdGVfb2xfTWFwRXh0ZW5zaW9uOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3JlYXRlRWxlbWVudERlZmF1bHROUygiRXh0ZW5zaW9uIik7aWYoYT1hLm1heEV4dGVudCl7dmFyIGM9dGhpcy5jcmVhdGVFbGVtZW50TlModGhpcy5uYW1lc3BhY2VzLm9sLCJvbDptYXhFeHRlbnQiKTt0aGlzLnNldEF0dHJpYnV0ZXMoYyx7bWlueDphLmxlZnQudG9QcmVjaXNpb24oMTgpLG1pbnk6YS5ib3R0b20udG9QcmVjaXNpb24oMTgpLG1heHg6YS5yaWdodC50b1ByZWNpc2lvbigxOCksCm1heHk6YS50b3AudG9QcmVjaXNpb24oMTgpfSk7Yi5hcHBlbmRDaGlsZChjKX1yZXR1cm4gYn0sd3JpdGVfd21jX0xheWVyTGlzdDpmdW5jdGlvbihhKXtmb3IodmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50RGVmYXVsdE5TKCJMYXllckxpc3QiKSxjPTAsZD1hLmxheWVyc0NvbnRleHQubGVuZ3RoO2M8ZDsrK2MpYi5hcHBlbmRDaGlsZCh0aGlzLndyaXRlX3dtY19MYXllcihhLmxheWVyc0NvbnRleHRbY10pKTtyZXR1cm4gYn0sd3JpdGVfd21jX0xheWVyOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3JlYXRlRWxlbWVudERlZmF1bHROUygiTGF5ZXIiLG51bGwse3F1ZXJ5YWJsZTphLnF1ZXJ5YWJsZT8iMSI6IjAiLGhpZGRlbjphLnZpc2liaWxpdHk/IjAiOiIxIn0pO2IuYXBwZW5kQ2hpbGQodGhpcy53cml0ZV93bWNfU2VydmVyKGEpKTtiLmFwcGVuZENoaWxkKHRoaXMuY3JlYXRlRWxlbWVudERlZmF1bHROUygiTmFtZSIsYS5uYW1lKSk7Yi5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZUVsZW1lbnREZWZhdWx0TlMoIlRpdGxlIiwKYS50aXRsZSkpO2FbImFic3RyYWN0Il0mJmIuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVFbGVtZW50RGVmYXVsdE5TKCJBYnN0cmFjdCIsYVsiYWJzdHJhY3QiXSkpO2EuZGF0YVVSTCYmYi5hcHBlbmRDaGlsZCh0aGlzLndyaXRlX3dtY19VUkxUeXBlKCJEYXRhVVJMIixhLmRhdGFVUkwpKTthLm1ldGFkYXRhVVJMJiZiLmFwcGVuZENoaWxkKHRoaXMud3JpdGVfd21jX1VSTFR5cGUoIk1ldGFkYXRhVVJMIixhLm1ldGFkYXRhVVJMKSk7cmV0dXJuIGJ9LHdyaXRlX3dtY19MYXllckV4dGVuc2lvbjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnREZWZhdWx0TlMoIkV4dGVuc2lvbiIpLGM9YS5tYXhFeHRlbnQsZD10aGlzLmNyZWF0ZUVsZW1lbnROUyh0aGlzLm5hbWVzcGFjZXMub2wsIm9sOm1heEV4dGVudCIpO3RoaXMuc2V0QXR0cmlidXRlcyhkLHttaW54OmMubGVmdC50b1ByZWNpc2lvbigxOCksbWlueTpjLmJvdHRvbS50b1ByZWNpc2lvbigxOCksbWF4eDpjLnJpZ2h0LnRvUHJlY2lzaW9uKDE4KSwKbWF4eTpjLnRvcC50b1ByZWNpc2lvbigxOCl9KTtiLmFwcGVuZENoaWxkKGQpO2EudGlsZVNpemUmJiFhLnNpbmdsZVRpbGUmJihjPXRoaXMuY3JlYXRlRWxlbWVudE5TKHRoaXMubmFtZXNwYWNlcy5vbCwib2w6dGlsZVNpemUiKSx0aGlzLnNldEF0dHJpYnV0ZXMoYyxhLnRpbGVTaXplKSxiLmFwcGVuZENoaWxkKGMpKTtmb3IodmFyIGM9InRyYW5zcGFyZW50IG51bVpvb21MZXZlbHMgdW5pdHMgaXNCYXNlTGF5ZXIgb3BhY2l0eSBkaXNwbGF5SW5MYXllclN3aXRjaGVyIHNpbmdsZVRpbGUiLnNwbGl0KCIgIiksZT0wLGY9Yy5sZW5ndGg7ZTxmOysrZSkoZD10aGlzLmNyZWF0ZU9MUHJvcGVydHlOb2RlKGEsY1tlXSkpJiZiLmFwcGVuZENoaWxkKGQpO3JldHVybiBifSxjcmVhdGVPTFByb3BlcnR5Tm9kZTpmdW5jdGlvbihhLGIpe3ZhciBjPW51bGw7bnVsbCE9YVtiXSYmKGM9dGhpcy5jcmVhdGVFbGVtZW50TlModGhpcy5uYW1lc3BhY2VzLm9sLCJvbDoiK2IpLGMuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVUZXh0Tm9kZShhW2JdLnRvU3RyaW5nKCkpKSk7CnJldHVybiBjfSx3cml0ZV93bWNfU2VydmVyOmZ1bmN0aW9uKGEpe2E9YS5zZXJ2ZXI7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50RGVmYXVsdE5TKCJTZXJ2ZXIiKSxjPXtzZXJ2aWNlOiJPR0M6V01TIix2ZXJzaW9uOmEudmVyc2lvbn07YS50aXRsZSYmKGMudGl0bGU9YS50aXRsZSk7dGhpcy5zZXRBdHRyaWJ1dGVzKGIsYyk7Yi5hcHBlbmRDaGlsZCh0aGlzLndyaXRlX3dtY19PbmxpbmVSZXNvdXJjZShhLnVybCkpO3JldHVybiBifSx3cml0ZV93bWNfVVJMVHlwZTpmdW5jdGlvbihhLGIsYyl7YT10aGlzLmNyZWF0ZUVsZW1lbnREZWZhdWx0TlMoYSk7YS5hcHBlbmRDaGlsZCh0aGlzLndyaXRlX3dtY19PbmxpbmVSZXNvdXJjZShiKSk7aWYoYyl7Yj1bIndpZHRoIiwiaGVpZ2h0IiwiZm9ybWF0Il07Zm9yKHZhciBkPTA7ZDxiLmxlbmd0aDtkKyspYltkXWluIGMmJmEuc2V0QXR0cmlidXRlKGJbZF0sY1tiW2RdXSl9cmV0dXJuIGF9LHdyaXRlX3dtY19EaW1lbnNpb25MaXN0OmZ1bmN0aW9uKGEpe3ZhciBiPQp0aGlzLmNyZWF0ZUVsZW1lbnREZWZhdWx0TlMoIkRpbWVuc2lvbkxpc3QiKSxjO2ZvcihjIGluIGEuZGltZW5zaW9ucyl7dmFyIGQ9e30sZT1hLmRpbWVuc2lvbnNbY10sZjtmb3IoZiBpbiBlKWRbZl09ImJvb2xlYW4iPT10eXBlb2YgZVtmXT9OdW1iZXIoZVtmXSk6ZVtmXTtlPSIiO2QudmFsdWVzJiYoZT1kLnZhbHVlcy5qb2luKCIsIiksZGVsZXRlIGQudmFsdWVzKTtiLmFwcGVuZENoaWxkKHRoaXMuY3JlYXRlRWxlbWVudERlZmF1bHROUygiRGltZW5zaW9uIixlLGQpKX1yZXR1cm4gYn0sd3JpdGVfd21jX0Zvcm1hdExpc3Q6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPXRoaXMuY3JlYXRlRWxlbWVudERlZmF1bHROUygiRm9ybWF0TGlzdCIpLGM9MCxkPWEuZm9ybWF0cy5sZW5ndGg7YzxkO2MrKyl7dmFyIGU9YS5mb3JtYXRzW2NdO2IuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVFbGVtZW50RGVmYXVsdE5TKCJGb3JtYXQiLGUudmFsdWUsZS5jdXJyZW50JiYhMD09ZS5jdXJyZW50P3tjdXJyZW50OiIxIn06Cm51bGwpKX1yZXR1cm4gYn0sd3JpdGVfd21jX1N0eWxlTGlzdDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnREZWZhdWx0TlMoIlN0eWxlTGlzdCIpO2lmKChhPWEuc3R5bGVzKSYmT3BlbkxheWVycy5VdGlsLmlzQXJyYXkoYSkpZm9yKHZhciBjLGQ9MCxlPWEubGVuZ3RoO2Q8ZTtkKyspe3ZhciBmPWFbZF0sZz10aGlzLmNyZWF0ZUVsZW1lbnREZWZhdWx0TlMoIlN0eWxlIixudWxsLGYuY3VycmVudCYmITA9PWYuY3VycmVudD97Y3VycmVudDoiMSJ9Om51bGwpO2YuaHJlZj8oYz10aGlzLmNyZWF0ZUVsZW1lbnREZWZhdWx0TlMoIlNMRCIpLGYubmFtZSYmYy5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZUVsZW1lbnREZWZhdWx0TlMoIk5hbWUiLGYubmFtZSkpLGYudGl0bGUmJmMuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVFbGVtZW50RGVmYXVsdE5TKCJUaXRsZSIsZi50aXRsZSkpLGYubGVnZW5kJiZjLmFwcGVuZENoaWxkKHRoaXMud3JpdGVfd21jX1VSTFR5cGUoIkxlZ2VuZFVSTCIsCmYubGVnZW5kLmhyZWYsZi5sZWdlbmQpKSxmPXRoaXMud3JpdGVfd21jX09ubGluZVJlc291cmNlKGYuaHJlZiksYy5hcHBlbmRDaGlsZChmKSxnLmFwcGVuZENoaWxkKGMpKTpmLmJvZHk/KGM9dGhpcy5jcmVhdGVFbGVtZW50RGVmYXVsdE5TKCJTTEQiKSxmLm5hbWUmJmMuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVFbGVtZW50RGVmYXVsdE5TKCJOYW1lIixmLm5hbWUpKSxmLnRpdGxlJiZjLmFwcGVuZENoaWxkKHRoaXMuY3JlYXRlRWxlbWVudERlZmF1bHROUygiVGl0bGUiLGYudGl0bGUpKSxmLmxlZ2VuZCYmYy5hcHBlbmRDaGlsZCh0aGlzLndyaXRlX3dtY19VUkxUeXBlKCJMZWdlbmRVUkwiLGYubGVnZW5kLmhyZWYsZi5sZWdlbmQpKSxmPU9wZW5MYXllcnMuRm9ybWF0LlhNTC5wcm90b3R5cGUucmVhZC5hcHBseSh0aGlzLFtmLmJvZHldKS5kb2N1bWVudEVsZW1lbnQsYy5vd25lckRvY3VtZW50JiZjLm93bmVyRG9jdW1lbnQuaW1wb3J0Tm9kZSYmKGY9Yy5vd25lckRvY3VtZW50LmltcG9ydE5vZGUoZiwKITApKSxjLmFwcGVuZENoaWxkKGYpLGcuYXBwZW5kQ2hpbGQoYykpOihnLmFwcGVuZENoaWxkKHRoaXMuY3JlYXRlRWxlbWVudERlZmF1bHROUygiTmFtZSIsZi5uYW1lKSksZy5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZUVsZW1lbnREZWZhdWx0TlMoIlRpdGxlIixmLnRpdGxlKSksZlsiYWJzdHJhY3QiXSYmZy5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZUVsZW1lbnREZWZhdWx0TlMoIkFic3RyYWN0IixmWyJhYnN0cmFjdCJdKSksZi5sZWdlbmQmJmcuYXBwZW5kQ2hpbGQodGhpcy53cml0ZV93bWNfVVJMVHlwZSgiTGVnZW5kVVJMIixmLmxlZ2VuZC5ocmVmLGYubGVnZW5kKSkpO2IuYXBwZW5kQ2hpbGQoZyl9cmV0dXJuIGJ9LHdyaXRlX3dtY19PbmxpbmVSZXNvdXJjZTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnREZWZhdWx0TlMoIk9ubGluZVJlc291cmNlIik7dGhpcy5zZXRBdHRyaWJ1dGVOUyhiLHRoaXMubmFtZXNwYWNlcy54bGluaywieGxpbms6dHlwZSIsCiJzaW1wbGUiKTt0aGlzLnNldEF0dHJpYnV0ZU5TKGIsdGhpcy5uYW1lc3BhY2VzLnhsaW5rLCJ4bGluazpocmVmIixhKTtyZXR1cm4gYn0sZ2V0T25saW5lUmVzb3VyY2VfaHJlZjpmdW5jdGlvbihhKXt2YXIgYj17fTthPWEuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIk9ubGluZVJlc291cmNlIik7MDxhLmxlbmd0aCYmdGhpcy5yZWFkX3dtY19PbmxpbmVSZXNvdXJjZShiLGFbMF0pO3JldHVybiBiLmhyZWZ9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuRm9ybWF0LldNQy52MSJ9KTtPcGVuTGF5ZXJzLkNvbnRyb2wuUGFuUGFuZWw9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkNvbnRyb2wuUGFuZWwse3NsaWRlRmFjdG9yOjUwLHNsaWRlUmF0aW86bnVsbCxpbml0aWFsaXplOmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuQ29udHJvbC5QYW5lbC5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLFthXSk7YT17c2xpZGVGYWN0b3I6dGhpcy5zbGlkZUZhY3RvcixzbGlkZVJhdGlvOnRoaXMuc2xpZGVSYXRpb307dGhpcy5hZGRDb250cm9scyhbbmV3IE9wZW5MYXllcnMuQ29udHJvbC5QYW4oT3BlbkxheWVycy5Db250cm9sLlBhbi5OT1JUSCxhKSxuZXcgT3BlbkxheWVycy5Db250cm9sLlBhbihPcGVuTGF5ZXJzLkNvbnRyb2wuUGFuLlNPVVRILGEpLG5ldyBPcGVuTGF5ZXJzLkNvbnRyb2wuUGFuKE9wZW5MYXllcnMuQ29udHJvbC5QYW4uRUFTVCxhKSxuZXcgT3BlbkxheWVycy5Db250cm9sLlBhbihPcGVuTGF5ZXJzLkNvbnRyb2wuUGFuLldFU1QsYSldKX0sCkNMQVNTX05BTUU6Ik9wZW5MYXllcnMuQ29udHJvbC5QYW5QYW5lbCJ9KTtPcGVuTGF5ZXJzLkNvbnRyb2wuQXR0cmlidXRpb249T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkNvbnRyb2wse3NlcGFyYXRvcjoiLCAiLHRlbXBsYXRlOiIke2xheWVyc30iLGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLm1hcC5ldmVudHMudW4oe3JlbW92ZWxheWVyOnRoaXMudXBkYXRlQXR0cmlidXRpb24sYWRkbGF5ZXI6dGhpcy51cGRhdGVBdHRyaWJ1dGlvbixjaGFuZ2VsYXllcjp0aGlzLnVwZGF0ZUF0dHJpYnV0aW9uLGNoYW5nZWJhc2VsYXllcjp0aGlzLnVwZGF0ZUF0dHJpYnV0aW9uLHNjb3BlOnRoaXN9KTtPcGVuTGF5ZXJzLkNvbnRyb2wucHJvdG90eXBlLmRlc3Ryb3kuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxkcmF3OmZ1bmN0aW9uKCl7T3BlbkxheWVycy5Db250cm9sLnByb3RvdHlwZS5kcmF3LmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLm1hcC5ldmVudHMub24oe2NoYW5nZWJhc2VsYXllcjp0aGlzLnVwZGF0ZUF0dHJpYnV0aW9uLGNoYW5nZWxheWVyOnRoaXMudXBkYXRlQXR0cmlidXRpb24sCmFkZGxheWVyOnRoaXMudXBkYXRlQXR0cmlidXRpb24scmVtb3ZlbGF5ZXI6dGhpcy51cGRhdGVBdHRyaWJ1dGlvbixzY29wZTp0aGlzfSk7dGhpcy51cGRhdGVBdHRyaWJ1dGlvbigpO3JldHVybiB0aGlzLmRpdn0sdXBkYXRlQXR0cmlidXRpb246ZnVuY3Rpb24oKXt2YXIgYT1bXTtpZih0aGlzLm1hcCYmdGhpcy5tYXAubGF5ZXJzKXtmb3IodmFyIGI9MCxjPXRoaXMubWFwLmxheWVycy5sZW5ndGg7YjxjO2IrKyl7dmFyIGQ9dGhpcy5tYXAubGF5ZXJzW2JdO2QuYXR0cmlidXRpb24mJmQuZ2V0VmlzaWJpbGl0eSgpJiYtMT09PU9wZW5MYXllcnMuVXRpbC5pbmRleE9mKGEsZC5hdHRyaWJ1dGlvbikmJmEucHVzaChkLmF0dHJpYnV0aW9uKX10aGlzLmRpdi5pbm5lckhUTUw9T3BlbkxheWVycy5TdHJpbmcuZm9ybWF0KHRoaXMudGVtcGxhdGUse2xheWVyczphLmpvaW4odGhpcy5zZXBhcmF0b3IpfSl9fSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkNvbnRyb2wuQXR0cmlidXRpb24ifSk7T3BlbkxheWVycy5LaW5ldGljPU9wZW5MYXllcnMuQ2xhc3Moe3RocmVzaG9sZDowLGRlY2VsZXJhdGlvbjowLjAwMzUsbmJQb2ludHM6MTAwLGRlbGF5OjIwMCxwb2ludHM6dm9pZCAwLHRpbWVySWQ6dm9pZCAwLGluaXRpYWxpemU6ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5VdGlsLmV4dGVuZCh0aGlzLGEpfSxiZWdpbjpmdW5jdGlvbigpe09wZW5MYXllcnMuQW5pbWF0aW9uLnN0b3AodGhpcy50aW1lcklkKTt0aGlzLnRpbWVySWQ9dm9pZCAwO3RoaXMucG9pbnRzPVtdfSx1cGRhdGU6ZnVuY3Rpb24oYSl7dGhpcy5wb2ludHMudW5zaGlmdCh7eHk6YSx0aWNrOihuZXcgRGF0ZSkuZ2V0VGltZSgpfSk7dGhpcy5wb2ludHMubGVuZ3RoPnRoaXMubmJQb2ludHMmJnRoaXMucG9pbnRzLnBvcCgpfSxlbmQ6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiLGM9KG5ldyBEYXRlKS5nZXRUaW1lKCksZD0wLGU9dGhpcy5wb2ludHMubGVuZ3RoLGY7ZDxlO2QrKyl7Zj10aGlzLnBvaW50c1tkXTtpZihjLQpmLnRpY2s+dGhpcy5kZWxheSlicmVhaztiPWZ9aWYoYiYmKGQ9KG5ldyBEYXRlKS5nZXRUaW1lKCktYi50aWNrLGM9TWF0aC5zcXJ0KE1hdGgucG93KGEueC1iLnh5LngsMikrTWF0aC5wb3coYS55LWIueHkueSwyKSksZD1jL2QsISgwPT1kfHxkPHRoaXMudGhyZXNob2xkKSkpcmV0dXJuIGM9TWF0aC5hc2luKChhLnktYi54eS55KS9jKSxiLnh5Lng8PWEueCYmKGM9TWF0aC5QSS1jKSx7c3BlZWQ6ZCx0aGV0YTpjfX0sbW92ZTpmdW5jdGlvbihhLGIpe3ZhciBjPWEuc3BlZWQsZD1NYXRoLmNvcyhhLnRoZXRhKSxlPS1NYXRoLnNpbihhLnRoZXRhKSxmPShuZXcgRGF0ZSkuZ2V0VGltZSgpLGc9MCxoPTA7dGhpcy50aW1lcklkPU9wZW5MYXllcnMuQW5pbWF0aW9uLnN0YXJ0KE9wZW5MYXllcnMuRnVuY3Rpb24uYmluZChmdW5jdGlvbigpe2lmKG51bGwhPXRoaXMudGltZXJJZCl7dmFyIGE9KG5ldyBEYXRlKS5nZXRUaW1lKCktZixsPS10aGlzLmRlY2VsZXJhdGlvbipNYXRoLnBvdyhhLAoyKS8yK2MqYSxtPWwqZCxsPWwqZSxuLHA7bj0hMTswPj0tdGhpcy5kZWNlbGVyYXRpb24qYStjJiYoT3BlbkxheWVycy5BbmltYXRpb24uc3RvcCh0aGlzLnRpbWVySWQpLHRoaXMudGltZXJJZD1udWxsLG49ITApO2E9bS1nO3A9bC1oO2c9bTtoPWw7YihhLHAsbil9fSx0aGlzKSl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuS2luZXRpYyJ9KTtPcGVuTGF5ZXJzLkZvcm1hdC5XUFNFeGVjdXRlPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Gb3JtYXQuWE1MLE9wZW5MYXllcnMuRm9ybWF0LkZpbHRlci52MV8xXzAse25hbWVzcGFjZXM6e293czoiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9vd3MvMS4xIixnbWw6Imh0dHA6Ly93d3cub3Blbmdpcy5uZXQvZ21sIix3cHM6Imh0dHA6Ly93d3cub3Blbmdpcy5uZXQvd3BzLzEuMC4wIix3ZnM6Imh0dHA6Ly93d3cub3Blbmdpcy5uZXQvd2ZzIixvZ2M6Imh0dHA6Ly93d3cub3Blbmdpcy5uZXQvb2djIix3Y3M6Imh0dHA6Ly93d3cub3Blbmdpcy5uZXQvd2NzIix4bGluazoiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIseHNpOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxL1hNTFNjaGVtYS1pbnN0YW5jZSJ9LHJlZ0V4ZXM6e3RyaW1TcGFjZTovXlxzKnxccyokL2cscmVtb3ZlU3BhY2U6L1xzKi9nLHNwbGl0U3BhY2U6L1xzKy8sdHJpbUNvbW1hOi9ccyosXHMqL2d9LFZFUlNJT046IjEuMC4wIiwKc2NoZW1hTG9jYXRpb246Imh0dHA6Ly93d3cub3Blbmdpcy5uZXQvd3BzLzEuMC4wIGh0dHA6Ly9zY2hlbWFzLm9wZW5naXMubmV0L3dwcy8xLjAuMC93cHNBbGwueHNkIixzY2hlbWFMb2NhdGlvbkF0dHI6ZnVuY3Rpb24oYSl7fSx3cml0ZTpmdW5jdGlvbihhKXt2YXIgYjt3aW5kb3cuQWN0aXZlWE9iamVjdD90aGlzLnhtbGRvbT1iPW5ldyBBY3RpdmVYT2JqZWN0KCJNaWNyb3NvZnQuWE1MRE9NIik6Yj1kb2N1bWVudC5pbXBsZW1lbnRhdGlvbi5jcmVhdGVEb2N1bWVudCgiIiwiIixudWxsKTthPXRoaXMud3JpdGVOb2RlKCJ3cHM6RXhlY3V0ZSIsYSxiKTt0aGlzLnNldEF0dHJpYnV0ZU5TKGEsdGhpcy5uYW1lc3BhY2VzLnhzaSwieHNpOnNjaGVtYUxvY2F0aW9uIix0aGlzLnNjaGVtYUxvY2F0aW9uKTtyZXR1cm4gT3BlbkxheWVycy5Gb3JtYXQuWE1MLnByb3RvdHlwZS53cml0ZS5hcHBseSh0aGlzLFthXSl9LHJlYWQ6ZnVuY3Rpb24oYSl7InN0cmluZyI9PXR5cGVvZiBhJiYoYT0KT3BlbkxheWVycy5Gb3JtYXQuWE1MLnByb3RvdHlwZS5yZWFkLmFwcGx5KHRoaXMsW2FdKSk7YSYmOT09YS5ub2RlVHlwZSYmKGE9YS5kb2N1bWVudEVsZW1lbnQpO3ZhciBiPXt9O3RoaXMucmVhZE5vZGUoYSxiKTtyZXR1cm4gYn0sd3JpdGVyczp7d3BzOntFeGVjdXRlOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygid3BzOkV4ZWN1dGUiLHthdHRyaWJ1dGVzOnt2ZXJzaW9uOnRoaXMuVkVSU0lPTixzZXJ2aWNlOiJXUFMifX0pO3RoaXMud3JpdGVOb2RlKCJvd3M6SWRlbnRpZmllciIsYS5pZGVudGlmaWVyLGIpO3RoaXMud3JpdGVOb2RlKCJ3cHM6RGF0YUlucHV0cyIsYS5kYXRhSW5wdXRzLGIpO3RoaXMud3JpdGVOb2RlKCJ3cHM6UmVzcG9uc2VGb3JtIixhLnJlc3BvbnNlRm9ybSxiKTtyZXR1cm4gYn0sUmVzcG9uc2VGb3JtOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygid3BzOlJlc3BvbnNlRm9ybSIse30pO2EucmF3RGF0YU91dHB1dCYmCnRoaXMud3JpdGVOb2RlKCJ3cHM6UmF3RGF0YU91dHB1dCIsYS5yYXdEYXRhT3V0cHV0LGIpO2EucmVzcG9uc2VEb2N1bWVudCYmdGhpcy53cml0ZU5vZGUoIndwczpSZXNwb25zZURvY3VtZW50IixhLnJlc3BvbnNlRG9jdW1lbnQsYik7cmV0dXJuIGJ9LFJlc3BvbnNlRG9jdW1lbnQ6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJ3cHM6UmVzcG9uc2VEb2N1bWVudCIse2F0dHJpYnV0ZXM6e3N0b3JlRXhlY3V0ZVJlc3BvbnNlOmEuc3RvcmVFeGVjdXRlUmVzcG9uc2UsbGluZWFnZTphLmxpbmVhZ2Usc3RhdHVzOmEuc3RhdHVzfX0pO2lmKGEub3V0cHV0cylmb3IodmFyIGM9MCxkPWEub3V0cHV0cy5sZW5ndGg7YzxkO2MrKyl0aGlzLndyaXRlTm9kZSgid3BzOk91dHB1dCIsYS5vdXRwdXRzW2NdLGIpO3JldHVybiBifSxPdXRwdXQ6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJ3cHM6T3V0cHV0Iix7YXR0cmlidXRlczp7YXNSZWZlcmVuY2U6YS5hc1JlZmVyZW5jZSwKbWltZVR5cGU6YS5taW1lVHlwZSxlbmNvZGluZzphLmVuY29kaW5nLHNjaGVtYTphLnNjaGVtYX19KTt0aGlzLndyaXRlTm9kZSgib3dzOklkZW50aWZpZXIiLGEuaWRlbnRpZmllcixiKTt0aGlzLndyaXRlTm9kZSgib3dzOlRpdGxlIixhLnRpdGxlLGIpO3RoaXMud3JpdGVOb2RlKCJvd3M6QWJzdHJhY3QiLGFbImFic3RyYWN0Il0sYik7cmV0dXJuIGJ9LFJhd0RhdGFPdXRwdXQ6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJ3cHM6UmF3RGF0YU91dHB1dCIse2F0dHJpYnV0ZXM6e21pbWVUeXBlOmEubWltZVR5cGUsZW5jb2Rpbmc6YS5lbmNvZGluZyxzY2hlbWE6YS5zY2hlbWF9fSk7dGhpcy53cml0ZU5vZGUoIm93czpJZGVudGlmaWVyIixhLmlkZW50aWZpZXIsYik7cmV0dXJuIGJ9LERhdGFJbnB1dHM6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygid3BzOkRhdGFJbnB1dHMiLHt9KSxjPTAsZD1hLmxlbmd0aDtjPApkOysrYyl0aGlzLndyaXRlTm9kZSgid3BzOklucHV0IixhW2NdLGIpO3JldHVybiBifSxJbnB1dDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoIndwczpJbnB1dCIse30pO3RoaXMud3JpdGVOb2RlKCJvd3M6SWRlbnRpZmllciIsYS5pZGVudGlmaWVyLGIpO2EudGl0bGUmJnRoaXMud3JpdGVOb2RlKCJvd3M6VGl0bGUiLGEudGl0bGUsYik7YS5kYXRhJiZ0aGlzLndyaXRlTm9kZSgid3BzOkRhdGEiLGEuZGF0YSxiKTthLnJlZmVyZW5jZSYmdGhpcy53cml0ZU5vZGUoIndwczpSZWZlcmVuY2UiLGEucmVmZXJlbmNlLGIpO2EuYm91bmRpbmdCb3hEYXRhJiZ0aGlzLndyaXRlTm9kZSgid3BzOkJvdW5kaW5nQm94RGF0YSIsYS5ib3VuZGluZ0JveERhdGEsYik7cmV0dXJuIGJ9LERhdGE6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJ3cHM6RGF0YSIse30pO2EubGl0ZXJhbERhdGE/dGhpcy53cml0ZU5vZGUoIndwczpMaXRlcmFsRGF0YSIsCmEubGl0ZXJhbERhdGEsYik6YS5jb21wbGV4RGF0YT90aGlzLndyaXRlTm9kZSgid3BzOkNvbXBsZXhEYXRhIixhLmNvbXBsZXhEYXRhLGIpOmEuYm91bmRpbmdCb3hEYXRhJiZ0aGlzLndyaXRlTm9kZSgib3dzOkJvdW5kaW5nQm94IixhLmJvdW5kaW5nQm94RGF0YSxiKTtyZXR1cm4gYn0sTGl0ZXJhbERhdGE6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygid3BzOkxpdGVyYWxEYXRhIix7YXR0cmlidXRlczp7dW9tOmEudW9tfSx2YWx1ZTphLnZhbHVlfSl9LENvbXBsZXhEYXRhOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygid3BzOkNvbXBsZXhEYXRhIix7YXR0cmlidXRlczp7bWltZVR5cGU6YS5taW1lVHlwZSxlbmNvZGluZzphLmVuY29kaW5nLHNjaGVtYTphLnNjaGVtYX19KSxjPWEudmFsdWU7InN0cmluZyI9PT10eXBlb2YgYz9iLmFwcGVuZENoaWxkKHRoaXMuZ2V0WE1MRG9jKCkuY3JlYXRlQ0RBVEFTZWN0aW9uKGEudmFsdWUpKToKYi5hcHBlbmRDaGlsZChjKTtyZXR1cm4gYn0sUmVmZXJlbmNlOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygid3BzOlJlZmVyZW5jZSIse2F0dHJpYnV0ZXM6e21pbWVUeXBlOmEubWltZVR5cGUsInhsaW5rOmhyZWYiOmEuaHJlZixtZXRob2Q6YS5tZXRob2QsZW5jb2Rpbmc6YS5lbmNvZGluZyxzY2hlbWE6YS5zY2hlbWF9fSk7YS5ib2R5JiZ0aGlzLndyaXRlTm9kZSgid3BzOkJvZHkiLGEuYm9keSxiKTtyZXR1cm4gYn0sQm91bmRpbmdCb3hEYXRhOmZ1bmN0aW9uKGEsYil7dGhpcy53cml0ZXJzLm93cy5Cb3VuZGluZ0JveC5hcHBseSh0aGlzLFthLGIsIndwczpCb3VuZGluZ0JveERhdGEiXSl9LEJvZHk6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJ3cHM6Qm9keSIse30pO2Eud2NzP3RoaXMud3JpdGVOb2RlKCJ3Y3M6R2V0Q292ZXJhZ2UiLGEud2NzLGIpOmEud2ZzPyh0aGlzLmZlYXR1cmVUeXBlPWEud2ZzLmZlYXR1cmVUeXBlLAp0aGlzLnZlcnNpb249YS53ZnMudmVyc2lvbix0aGlzLndyaXRlTm9kZSgid2ZzOkdldEZlYXR1cmUiLGEud2ZzLGIpKTp0aGlzLndyaXRlTm9kZSgid3BzOkV4ZWN1dGUiLGEsYik7cmV0dXJuIGJ9fSx3Y3M6T3BlbkxheWVycy5Gb3JtYXQuV0NTR2V0Q292ZXJhZ2UucHJvdG90eXBlLndyaXRlcnMud2NzLHdmczpPcGVuTGF5ZXJzLkZvcm1hdC5XRlNULnYxXzFfMC5wcm90b3R5cGUud3JpdGVycy53ZnMsb2djOk9wZW5MYXllcnMuRm9ybWF0LkZpbHRlci52MV8xXzAucHJvdG90eXBlLndyaXRlcnMub2djLG93czpPcGVuTGF5ZXJzLkZvcm1hdC5PV1NDb21tb24udjFfMV8wLnByb3RvdHlwZS53cml0ZXJzLm93c30scmVhZGVyczp7d3BzOntFeGVjdXRlUmVzcG9uc2U6ZnVuY3Rpb24oYSxiKXtiLmV4ZWN1dGVSZXNwb25zZT17bGFuZzphLmdldEF0dHJpYnV0ZSgibGFuZyIpLHN0YXR1c0xvY2F0aW9uOmEuZ2V0QXR0cmlidXRlKCJzdGF0dXNMb2NhdGlvbiIpLHNlcnZpY2VJbnN0YW5jZTphLmdldEF0dHJpYnV0ZSgic2VydmljZUluc3RhbmNlIiksCnNlcnZpY2U6YS5nZXRBdHRyaWJ1dGUoInNlcnZpY2UiKX07dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGIuZXhlY3V0ZVJlc3BvbnNlKX0sUHJvY2VzczpmdW5jdGlvbihhLGIpe2IucHJvY2Vzcz17fTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYi5wcm9jZXNzKX0sU3RhdHVzOmZ1bmN0aW9uKGEsYil7Yi5zdGF0dXM9e2NyZWF0aW9uVGltZTphLmdldEF0dHJpYnV0ZSgiY3JlYXRpb25UaW1lIil9O3RoaXMucmVhZENoaWxkTm9kZXMoYSxiLnN0YXR1cyl9LFByb2Nlc3NTdWNjZWVkZWQ6ZnVuY3Rpb24oYSxiKXtiLnByb2Nlc3NTdWNjZWVkZWQ9ITB9LFByb2Nlc3NPdXRwdXRzOmZ1bmN0aW9uKGEsYil7Yi5wcm9jZXNzT3V0cHV0cz1bXTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYi5wcm9jZXNzT3V0cHV0cyl9LE91dHB1dDpmdW5jdGlvbihhLGIpe3ZhciBjPXt9O3RoaXMucmVhZENoaWxkTm9kZXMoYSxjKTtiLnB1c2goYyl9LFJlZmVyZW5jZTpmdW5jdGlvbihhLGIpe2IucmVmZXJlbmNlPQp7aHJlZjphLmdldEF0dHJpYnV0ZSgiaHJlZiIpLG1pbWVUeXBlOmEuZ2V0QXR0cmlidXRlKCJtaW1lVHlwZSIpLGVuY29kaW5nOmEuZ2V0QXR0cmlidXRlKCJlbmNvZGluZyIpLHNjaGVtYTphLmdldEF0dHJpYnV0ZSgic2NoZW1hIil9fSxEYXRhOmZ1bmN0aW9uKGEsYil7Yi5kYXRhPXt9O3RoaXMucmVhZENoaWxkTm9kZXMoYSxiKX0sTGl0ZXJhbERhdGE6ZnVuY3Rpb24oYSxiKXtiLmxpdGVyYWxEYXRhPXtkYXRhVHlwZTphLmdldEF0dHJpYnV0ZSgiZGF0YVR5cGUiKSx1b206YS5nZXRBdHRyaWJ1dGUoInVvbSIpLHZhbHVlOnRoaXMuZ2V0Q2hpbGRWYWx1ZShhKX19LENvbXBsZXhEYXRhOmZ1bmN0aW9uKGEsYil7Yi5jb21wbGV4RGF0YT17bWltZVR5cGU6YS5nZXRBdHRyaWJ1dGUoIm1pbWVUeXBlIiksc2NoZW1hOmEuZ2V0QXR0cmlidXRlKCJzY2hlbWEiKSxlbmNvZGluZzphLmdldEF0dHJpYnV0ZSgiZW5jb2RpbmciKSx2YWx1ZToiIn07aWYodGhpcy5pc1NpbXBsZUNvbnRlbnQoYSkpe3ZhciBjOwpmb3IoYz1hLmZpcnN0Q2hpbGQ7YztjPWMubmV4dFNpYmxpbmcpc3dpdGNoKGMubm9kZVR5cGUpe2Nhc2UgMzpjYXNlIDQ6Yi5jb21wbGV4RGF0YS52YWx1ZSs9Yy5ub2RlVmFsdWV9fWVsc2UgZm9yKGM9YS5maXJzdENoaWxkO2M7Yz1jLm5leHRTaWJsaW5nKTE9PWMubm9kZVR5cGUmJihiLmNvbXBsZXhEYXRhLnZhbHVlPWMpfSxCb3VuZGluZ0JveDpmdW5jdGlvbihhLGIpe2IuYm91bmRpbmdCb3hEYXRhPXtkaW1lbnNpb25zOmEuZ2V0QXR0cmlidXRlKCJkaW1lbnNpb25zIiksY3JzOmEuZ2V0QXR0cmlidXRlKCJjcnMiKX07dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGIuYm91bmRpbmdCb3hEYXRhKX19LG93czpPcGVuTGF5ZXJzLkZvcm1hdC5PV1NDb21tb24udjFfMV8wLnByb3RvdHlwZS5yZWFkZXJzLm93c30sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Gb3JtYXQuV1BTRXhlY3V0ZSJ9KTtPcGVuTGF5ZXJzLkxheWVyLkdlb1JTUz1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuTGF5ZXIuTWFya2Vycyx7bG9jYXRpb246bnVsbCxmZWF0dXJlczpudWxsLGZvcm1hdE9wdGlvbnM6bnVsbCxzZWxlY3RlZEZlYXR1cmU6bnVsbCxpY29uOm51bGwscG9wdXBTaXplOm51bGwsdXNlRmVlZFRpdGxlOiEwLGluaXRpYWxpemU6ZnVuY3Rpb24oYSxiLGMpe09wZW5MYXllcnMuTGF5ZXIuTWFya2Vycy5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLFthLGNdKTt0aGlzLmxvY2F0aW9uPWI7dGhpcy5mZWF0dXJlcz1bXX0sZGVzdHJveTpmdW5jdGlvbigpe09wZW5MYXllcnMuTGF5ZXIuTWFya2Vycy5wcm90b3R5cGUuZGVzdHJveS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5jbGVhckZlYXR1cmVzKCk7dGhpcy5mZWF0dXJlcz1udWxsfSxsb2FkUlNTOmZ1bmN0aW9uKCl7dGhpcy5sb2FkZWR8fCh0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoImxvYWRzdGFydCIpLE9wZW5MYXllcnMuUmVxdWVzdC5HRVQoe3VybDp0aGlzLmxvY2F0aW9uLApzdWNjZXNzOnRoaXMucGFyc2VEYXRhLHNjb3BlOnRoaXN9KSx0aGlzLmxvYWRlZD0hMCl9LG1vdmVUbzpmdW5jdGlvbihhLGIsYyl7T3BlbkxheWVycy5MYXllci5NYXJrZXJzLnByb3RvdHlwZS5tb3ZlVG8uYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMudmlzaWJpbGl0eSYmIXRoaXMubG9hZGVkJiZ0aGlzLmxvYWRSU1MoKX0scGFyc2VEYXRhOmZ1bmN0aW9uKGEpe3ZhciBiPWEucmVzcG9uc2VYTUw7YiYmYi5kb2N1bWVudEVsZW1lbnR8fChiPU9wZW5MYXllcnMuRm9ybWF0LlhNTC5wcm90b3R5cGUucmVhZChhLnJlc3BvbnNlVGV4dCkpO2lmKHRoaXMudXNlRmVlZFRpdGxlKXthPW51bGw7dHJ5e2E9Yi5nZXRFbGVtZW50c0J5VGFnTmFtZU5TKCIqIiwidGl0bGUiKVswXS5maXJzdENoaWxkLm5vZGVWYWx1ZX1jYXRjaChjKXthPWIuZ2V0RWxlbWVudHNCeVRhZ05hbWUoInRpdGxlIilbMF0uZmlyc3RDaGlsZC5ub2RlVmFsdWV9YSYmdGhpcy5zZXROYW1lKGEpfWE9e307T3BlbkxheWVycy5VdGlsLmV4dGVuZChhLAp0aGlzLmZvcm1hdE9wdGlvbnMpO3RoaXMubWFwJiYhdGhpcy5wcm9qZWN0aW9uLmVxdWFscyh0aGlzLm1hcC5nZXRQcm9qZWN0aW9uT2JqZWN0KCkpJiYoYS5leHRlcm5hbFByb2plY3Rpb249dGhpcy5wcm9qZWN0aW9uLGEuaW50ZXJuYWxQcm9qZWN0aW9uPXRoaXMubWFwLmdldFByb2plY3Rpb25PYmplY3QoKSk7Yj0obmV3IE9wZW5MYXllcnMuRm9ybWF0Lkdlb1JTUyhhKSkucmVhZChiKTthPTA7Zm9yKHZhciBkPWIubGVuZ3RoO2E8ZDthKyspe3ZhciBlPXt9LGY9YlthXTtpZihmLmdlb21ldHJ5KXt2YXIgZz1mLmF0dHJpYnV0ZXMudGl0bGU/Zi5hdHRyaWJ1dGVzLnRpdGxlOiJVbnRpdGxlZCIsaD1mLmF0dHJpYnV0ZXMuZGVzY3JpcHRpb24/Zi5hdHRyaWJ1dGVzLmRlc2NyaXB0aW9uOiJObyBkZXNjcmlwdGlvbi4iLGs9Zi5hdHRyaWJ1dGVzLmxpbms/Zi5hdHRyaWJ1dGVzLmxpbms6IiIsZj1mLmdlb21ldHJ5LmdldEJvdW5kcygpLmdldENlbnRlckxvbkxhdCgpO2UuaWNvbj0KbnVsbD09dGhpcy5pY29uP09wZW5MYXllcnMuTWFya2VyLmRlZmF1bHRJY29uKCk6dGhpcy5pY29uLmNsb25lKCk7ZS5wb3B1cFNpemU9dGhpcy5wb3B1cFNpemU/dGhpcy5wb3B1cFNpemUuY2xvbmUoKTpuZXcgT3BlbkxheWVycy5TaXplKDI1MCwxMjApO2lmKGd8fGgpe2UudGl0bGU9ZztlLmRlc2NyaXB0aW9uPWg7dmFyIGw9JzxkaXYgY2xhc3M9Im9sTGF5ZXJHZW9SU1NDbG9zZSI+W3hdPC9kaXY+JyxsPWwrJzxkaXYgY2xhc3M9Im9sTGF5ZXJHZW9SU1NUaXRsZSI+JztrJiYobCs9JzxhIGNsYXNzPSJsaW5rIiBocmVmPSInK2srJyIgdGFyZ2V0PSJfYmxhbmsiPicpO2wrPWc7ayYmKGwrPSI8L2E+Iik7bCs9IjwvZGl2PiI7bCs9JzxkaXYgc3R5bGU9IiIgY2xhc3M9Im9sTGF5ZXJHZW9SU1NEZXNjcmlwdGlvbiI+JztsKz1oO2wrPSI8L2Rpdj4iO2UucG9wdXBDb250ZW50SFRNTD1sfWY9bmV3IE9wZW5MYXllcnMuRmVhdHVyZSh0aGlzLGYsZSk7dGhpcy5mZWF0dXJlcy5wdXNoKGYpOwplPWYuY3JlYXRlTWFya2VyKCk7ZS5ldmVudHMucmVnaXN0ZXIoImNsaWNrIixmLHRoaXMubWFya2VyQ2xpY2spO3RoaXMuYWRkTWFya2VyKGUpfX10aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoImxvYWRlbmQiKX0sbWFya2VyQ2xpY2s6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcz09dGhpcy5sYXllci5zZWxlY3RlZEZlYXR1cmU7dGhpcy5sYXllci5zZWxlY3RlZEZlYXR1cmU9Yj9udWxsOnRoaXM7Zm9yKHZhciBjPTAsZD10aGlzLmxheWVyLm1hcC5wb3B1cHMubGVuZ3RoO2M8ZDtjKyspdGhpcy5sYXllci5tYXAucmVtb3ZlUG9wdXAodGhpcy5sYXllci5tYXAucG9wdXBzW2NdKTtifHwoYj10aGlzLmNyZWF0ZVBvcHVwKCksT3BlbkxheWVycy5FdmVudC5vYnNlcnZlKGIuZGl2LCJjbGljayIsT3BlbkxheWVycy5GdW5jdGlvbi5iaW5kKGZ1bmN0aW9uKCl7Zm9yKHZhciBhPTAsYj10aGlzLmxheWVyLm1hcC5wb3B1cHMubGVuZ3RoO2E8YjthKyspdGhpcy5sYXllci5tYXAucmVtb3ZlUG9wdXAodGhpcy5sYXllci5tYXAucG9wdXBzW2FdKX0sCnRoaXMpKSx0aGlzLmxheWVyLm1hcC5hZGRQb3B1cChiKSk7T3BlbkxheWVycy5FdmVudC5zdG9wKGEpfSxjbGVhckZlYXR1cmVzOmZ1bmN0aW9uKCl7aWYobnVsbCE9dGhpcy5mZWF0dXJlcylmb3IoOzA8dGhpcy5mZWF0dXJlcy5sZW5ndGg7KXt2YXIgYT10aGlzLmZlYXR1cmVzWzBdO09wZW5MYXllcnMuVXRpbC5yZW1vdmVJdGVtKHRoaXMuZmVhdHVyZXMsYSk7YS5kZXN0cm95KCl9fSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkxheWVyLkdlb1JTUyJ9KTtPcGVuTGF5ZXJzLlN5bWJvbGl6ZXIuUG9pbnQ9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLlN5bWJvbGl6ZXIse2luaXRpYWxpemU6ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5TeW1ib2xpemVyLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5TeW1ib2xpemVyLlBvaW50In0pO09wZW5MYXllcnMuU3ltYm9saXplci5MaW5lPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5TeW1ib2xpemVyLHtpbml0aWFsaXplOmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuU3ltYm9saXplci5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuU3ltYm9saXplci5MaW5lIn0pO09wZW5MYXllcnMuU3ltYm9saXplci5UZXh0PU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5TeW1ib2xpemVyLHtpbml0aWFsaXplOmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuU3ltYm9saXplci5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuU3ltYm9saXplci5UZXh0In0pO09wZW5MYXllcnMuRm9ybWF0LlNMRC52MT1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuRm9ybWF0LkZpbHRlci52MV8wXzAse25hbWVzcGFjZXM6e3NsZDoiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9zbGQiLG9nYzoiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9vZ2MiLGdtbDoiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9nbWwiLHhsaW5rOiJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIix4c2k6Imh0dHA6Ly93d3cudzMub3JnLzIwMDEvWE1MU2NoZW1hLWluc3RhbmNlIn0sZGVmYXVsdFByZWZpeDoic2xkIixzY2hlbWFMb2NhdGlvbjpudWxsLG11bHRpcGxlU3ltYm9saXplcnM6ITEsZmVhdHVyZVR5cGVDb3VudGVyOm51bGwsZGVmYXVsdFN5bWJvbGl6ZXI6e2ZpbGxDb2xvcjoiIzgwODA4MCIsZmlsbE9wYWNpdHk6MSxzdHJva2VDb2xvcjoiIzAwMDAwMCIsc3Ryb2tlT3BhY2l0eToxLHN0cm9rZVdpZHRoOjEsc3Ryb2tlRGFzaHN0eWxlOiJzb2xpZCIscG9pbnRSYWRpdXM6MywKZ3JhcGhpY05hbWU6InNxdWFyZSJ9LHJlYWQ6ZnVuY3Rpb24oYSxiKXtiPU9wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKGIsdGhpcy5vcHRpb25zKTt2YXIgYz17bmFtZWRMYXllcnM6ITA9PT1iLm5hbWVkTGF5ZXJzQXNBcnJheT9bXTp7fX07dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGMpO3JldHVybiBjfSxyZWFkZXJzOk9wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKHtzbGQ6e1N0eWxlZExheWVyRGVzY3JpcHRvcjpmdW5jdGlvbihhLGIpe2IudmVyc2lvbj1hLmdldEF0dHJpYnV0ZSgidmVyc2lvbiIpO3RoaXMucmVhZENoaWxkTm9kZXMoYSxiKX0sTmFtZTpmdW5jdGlvbihhLGIpe2IubmFtZT10aGlzLmdldENoaWxkVmFsdWUoYSl9LFRpdGxlOmZ1bmN0aW9uKGEsYil7Yi50aXRsZT10aGlzLmdldENoaWxkVmFsdWUoYSl9LEFic3RyYWN0OmZ1bmN0aW9uKGEsYil7Yi5kZXNjcmlwdGlvbj10aGlzLmdldENoaWxkVmFsdWUoYSl9LE5hbWVkTGF5ZXI6ZnVuY3Rpb24oYSxiKXt2YXIgYz0Ke3VzZXJTdHlsZXM6W10sbmFtZWRTdHlsZXM6W119O3RoaXMucmVhZENoaWxkTm9kZXMoYSxjKTtmb3IodmFyIGQ9MCxlPWMudXNlclN0eWxlcy5sZW5ndGg7ZDxlOysrZCljLnVzZXJTdHlsZXNbZF0ubGF5ZXJOYW1lPWMubmFtZTtPcGVuTGF5ZXJzLlV0aWwuaXNBcnJheShiLm5hbWVkTGF5ZXJzKT9iLm5hbWVkTGF5ZXJzLnB1c2goYyk6Yi5uYW1lZExheWVyc1tjLm5hbWVdPWN9LE5hbWVkU3R5bGU6ZnVuY3Rpb24oYSxiKXtiLm5hbWVkU3R5bGVzLnB1c2godGhpcy5nZXRDaGlsZE5hbWUoYS5maXJzdENoaWxkKSl9LFVzZXJTdHlsZTpmdW5jdGlvbihhLGIpe3ZhciBjPXtkZWZhdWx0c1BlclN5bWJvbGl6ZXI6ITAscnVsZXM6W119O3RoaXMuZmVhdHVyZVR5cGVDb3VudGVyPS0xO3RoaXMucmVhZENoaWxkTm9kZXMoYSxjKTt0aGlzLm11bHRpcGxlU3ltYm9saXplcnM/KGRlbGV0ZSBjLmRlZmF1bHRzUGVyU3ltYm9saXplcixjPW5ldyBPcGVuTGF5ZXJzLlN0eWxlMihjKSk6Yz1uZXcgT3BlbkxheWVycy5TdHlsZSh0aGlzLmRlZmF1bHRTeW1ib2xpemVyLApjKTtiLnVzZXJTdHlsZXMucHVzaChjKX0sSXNEZWZhdWx0OmZ1bmN0aW9uKGEsYil7IjEiPT10aGlzLmdldENoaWxkVmFsdWUoYSkmJihiLmlzRGVmYXVsdD0hMCl9LEZlYXR1cmVUeXBlU3R5bGU6ZnVuY3Rpb24oYSxiKXsrK3RoaXMuZmVhdHVyZVR5cGVDb3VudGVyO3ZhciBjPXtydWxlczp0aGlzLm11bHRpcGxlU3ltYm9saXplcnM/Yi5ydWxlczpbXX07dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGMpO3RoaXMubXVsdGlwbGVTeW1ib2xpemVyc3x8KGIucnVsZXM9Yy5ydWxlcyl9LFJ1bGU6ZnVuY3Rpb24oYSxiKXt2YXIgYzt0aGlzLm11bHRpcGxlU3ltYm9saXplcnMmJihjPXtzeW1ib2xpemVyczpbXX0pO2M9bmV3IE9wZW5MYXllcnMuUnVsZShjKTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYyk7Yi5ydWxlcy5wdXNoKGMpfSxFbHNlRmlsdGVyOmZ1bmN0aW9uKGEsYil7Yi5lbHNlRmlsdGVyPSEwfSxNaW5TY2FsZURlbm9taW5hdG9yOmZ1bmN0aW9uKGEsYil7Yi5taW5TY2FsZURlbm9taW5hdG9yPQpwYXJzZUZsb2F0KHRoaXMuZ2V0Q2hpbGRWYWx1ZShhKSl9LE1heFNjYWxlRGVub21pbmF0b3I6ZnVuY3Rpb24oYSxiKXtiLm1heFNjYWxlRGVub21pbmF0b3I9cGFyc2VGbG9hdCh0aGlzLmdldENoaWxkVmFsdWUoYSkpfSxUZXh0U3ltYm9saXplcjpmdW5jdGlvbihhLGIpe3ZhciBjPXt9O3RoaXMucmVhZENoaWxkTm9kZXMoYSxjKTt0aGlzLm11bHRpcGxlU3ltYm9saXplcnM/KGMuekluZGV4PXRoaXMuZmVhdHVyZVR5cGVDb3VudGVyLGIuc3ltYm9saXplcnMucHVzaChuZXcgT3BlbkxheWVycy5TeW1ib2xpemVyLlRleHQoYykpKTpiLnN5bWJvbGl6ZXIuVGV4dD1PcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyhjLGIuc3ltYm9saXplci5UZXh0KX0sTGFiZWxQbGFjZW1lbnQ6ZnVuY3Rpb24oYSxiKXt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYil9LFBvaW50UGxhY2VtZW50OmZ1bmN0aW9uKGEsYil7dmFyIGM9e307dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGMpO2MubGFiZWxSb3RhdGlvbj0KYy5yb3RhdGlvbjtkZWxldGUgYy5yb3RhdGlvbjt2YXIgZCxlPWIubGFiZWxBbmNob3JQb2ludFgsZj1iLmxhYmVsQW5jaG9yUG9pbnRZO2U8PTEvMz9kPSJsIjplPjEvMyYmZTwyLzM/ZD0iYyI6ZT49Mi8zJiYoZD0iciIpO2Y8PTEvMz9kKz0iYiI6Zj4xLzMmJmY8Mi8zP2QrPSJtIjpmPj0yLzMmJihkKz0idCIpO2MubGFiZWxBbGlnbj1kO09wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKGIsYyl9LEFuY2hvclBvaW50OmZ1bmN0aW9uKGEsYil7dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGIpfSxBbmNob3JQb2ludFg6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLnJlYWRlcnMub2djLl9leHByZXNzaW9uLmNhbGwodGhpcyxhKTtjJiYoYi5sYWJlbEFuY2hvclBvaW50WD1jKX0sQW5jaG9yUG9pbnRZOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5yZWFkZXJzLm9nYy5fZXhwcmVzc2lvbi5jYWxsKHRoaXMsYSk7YyYmKGIubGFiZWxBbmNob3JQb2ludFk9Yyl9LERpc3BsYWNlbWVudDpmdW5jdGlvbihhLApiKXt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYil9LERpc3BsYWNlbWVudFg6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLnJlYWRlcnMub2djLl9leHByZXNzaW9uLmNhbGwodGhpcyxhKTtjJiYoYi5sYWJlbFhPZmZzZXQ9Yyl9LERpc3BsYWNlbWVudFk6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLnJlYWRlcnMub2djLl9leHByZXNzaW9uLmNhbGwodGhpcyxhKTtjJiYoYi5sYWJlbFlPZmZzZXQ9Yyl9LExpbmVQbGFjZW1lbnQ6ZnVuY3Rpb24oYSxiKXt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYil9LFBlcnBlbmRpY3VsYXJPZmZzZXQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLnJlYWRlcnMub2djLl9leHByZXNzaW9uLmNhbGwodGhpcyxhKTtjJiYoYi5sYWJlbFBlcnBlbmRpY3VsYXJPZmZzZXQ9Yyl9LExhYmVsOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5yZWFkZXJzLm9nYy5fZXhwcmVzc2lvbi5jYWxsKHRoaXMsYSk7YyYmKGIubGFiZWw9Yyl9LEZvbnQ6ZnVuY3Rpb24oYSxiKXt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsCmIpfSxIYWxvOmZ1bmN0aW9uKGEsYil7dmFyIGM9e307dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGMpO2IuaGFsb1JhZGl1cz1jLmhhbG9SYWRpdXM7Yi5oYWxvQ29sb3I9Yy5maWxsQ29sb3I7Yi5oYWxvT3BhY2l0eT1jLmZpbGxPcGFjaXR5fSxSYWRpdXM6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLnJlYWRlcnMub2djLl9leHByZXNzaW9uLmNhbGwodGhpcyxhKTtudWxsIT1jJiYoYi5oYWxvUmFkaXVzPWMpfSxSYXN0ZXJTeW1ib2xpemVyOmZ1bmN0aW9uKGEsYil7dmFyIGM9e307dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGMpO3RoaXMubXVsdGlwbGVTeW1ib2xpemVycz8oYy56SW5kZXg9dGhpcy5mZWF0dXJlVHlwZUNvdW50ZXIsYi5zeW1ib2xpemVycy5wdXNoKG5ldyBPcGVuTGF5ZXJzLlN5bWJvbGl6ZXIuUmFzdGVyKGMpKSk6Yi5zeW1ib2xpemVyLlJhc3Rlcj1PcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyhjLGIuc3ltYm9saXplci5SYXN0ZXIpfSxHZW9tZXRyeTpmdW5jdGlvbihhLApiKXtiLmdlb21ldHJ5PXt9O3RoaXMucmVhZENoaWxkTm9kZXMoYSxiLmdlb21ldHJ5KX0sQ29sb3JNYXA6ZnVuY3Rpb24oYSxiKXtiLmNvbG9yTWFwPVtdO3RoaXMucmVhZENoaWxkTm9kZXMoYSxiLmNvbG9yTWFwKX0sQ29sb3JNYXBFbnRyeTpmdW5jdGlvbihhLGIpe3ZhciBjPWEuZ2V0QXR0cmlidXRlKCJxdWFudGl0eSIpLGQ9YS5nZXRBdHRyaWJ1dGUoIm9wYWNpdHkiKTtiLnB1c2goe2NvbG9yOmEuZ2V0QXR0cmlidXRlKCJjb2xvciIpLHF1YW50aXR5Om51bGwhPT1jP3BhcnNlRmxvYXQoYyk6dm9pZCAwLGxhYmVsOmEuZ2V0QXR0cmlidXRlKCJsYWJlbCIpfHx2b2lkIDAsb3BhY2l0eTpudWxsIT09ZD9wYXJzZUZsb2F0KGQpOnZvaWQgMH0pfSxMaW5lU3ltYm9saXplcjpmdW5jdGlvbihhLGIpe3ZhciBjPXt9O3RoaXMucmVhZENoaWxkTm9kZXMoYSxjKTt0aGlzLm11bHRpcGxlU3ltYm9saXplcnM/KGMuekluZGV4PXRoaXMuZmVhdHVyZVR5cGVDb3VudGVyLGIuc3ltYm9saXplcnMucHVzaChuZXcgT3BlbkxheWVycy5TeW1ib2xpemVyLkxpbmUoYykpKToKYi5zeW1ib2xpemVyLkxpbmU9T3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoYyxiLnN5bWJvbGl6ZXIuTGluZSl9LFBvbHlnb25TeW1ib2xpemVyOmZ1bmN0aW9uKGEsYil7dmFyIGM9e2ZpbGw6ITEsc3Ryb2tlOiExfTt0aGlzLm11bHRpcGxlU3ltYm9saXplcnN8fChjPWIuc3ltYm9saXplci5Qb2x5Z29ufHxjKTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYyk7dGhpcy5tdWx0aXBsZVN5bWJvbGl6ZXJzPyhjLnpJbmRleD10aGlzLmZlYXR1cmVUeXBlQ291bnRlcixiLnN5bWJvbGl6ZXJzLnB1c2gobmV3IE9wZW5MYXllcnMuU3ltYm9saXplci5Qb2x5Z29uKGMpKSk6Yi5zeW1ib2xpemVyLlBvbHlnb249Y30sUG9pbnRTeW1ib2xpemVyOmZ1bmN0aW9uKGEsYil7dmFyIGM9e2ZpbGw6ITEsc3Ryb2tlOiExLGdyYXBoaWM6ITF9O3RoaXMubXVsdGlwbGVTeW1ib2xpemVyc3x8KGM9Yi5zeW1ib2xpemVyLlBvaW50fHxjKTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYyk7dGhpcy5tdWx0aXBsZVN5bWJvbGl6ZXJzPwooYy56SW5kZXg9dGhpcy5mZWF0dXJlVHlwZUNvdW50ZXIsYi5zeW1ib2xpemVycy5wdXNoKG5ldyBPcGVuTGF5ZXJzLlN5bWJvbGl6ZXIuUG9pbnQoYykpKTpiLnN5bWJvbGl6ZXIuUG9pbnQ9Y30sU3Ryb2tlOmZ1bmN0aW9uKGEsYil7Yi5zdHJva2U9ITA7dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGIpfSxGaWxsOmZ1bmN0aW9uKGEsYil7Yi5maWxsPSEwO3RoaXMucmVhZENoaWxkTm9kZXMoYSxiKX0sQ3NzUGFyYW1ldGVyOmZ1bmN0aW9uKGEsYil7dmFyIGM9YS5nZXRBdHRyaWJ1dGUoIm5hbWUiKSxkPXRoaXMuY3NzTWFwW2NdO2IubGFiZWwmJigiZmlsbCI9PT1jP2Q9ImZvbnRDb2xvciI6ImZpbGwtb3BhY2l0eSI9PT1jJiYoZD0iZm9udE9wYWNpdHkiKSk7ZCYmKGM9dGhpcy5yZWFkZXJzLm9nYy5fZXhwcmVzc2lvbi5jYWxsKHRoaXMsYSkpJiYoYltkXT1jKX0sR3JhcGhpYzpmdW5jdGlvbihhLGIpe2IuZ3JhcGhpYz0hMDt2YXIgYz17fTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYyk7CmZvcih2YXIgZD0ic3Ryb2tlIHN0cm9rZUNvbG9yIHN0cm9rZVdpZHRoIHN0cm9rZU9wYWNpdHkgc3Ryb2tlTGluZWNhcCBmaWxsIGZpbGxDb2xvciBmaWxsT3BhY2l0eSBncmFwaGljTmFtZSByb3RhdGlvbiBncmFwaGljRm9ybWF0Ii5zcGxpdCgiICIpLGUsZixnPTAsaD1kLmxlbmd0aDtnPGg7KytnKWU9ZFtnXSxmPWNbZV0sdm9pZCAwIT1mJiYoYltlXT1mKTt2b2lkIDAhPWMub3BhY2l0eSYmKGIuZ3JhcGhpY09wYWNpdHk9Yy5vcGFjaXR5KTt2b2lkIDAhPWMuc2l6ZSYmKGlzTmFOKGMuc2l6ZS8yKT9iLmdyYXBoaWNXaWR0aD1jLnNpemU6Yi5wb2ludFJhZGl1cz1jLnNpemUvMik7dm9pZCAwIT1jLmhyZWYmJihiLmV4dGVybmFsR3JhcGhpYz1jLmhyZWYpO3ZvaWQgMCE9Yy5yb3RhdGlvbiYmKGIucm90YXRpb249Yy5yb3RhdGlvbil9LEV4dGVybmFsR3JhcGhpYzpmdW5jdGlvbihhLGIpe3RoaXMucmVhZENoaWxkTm9kZXMoYSxiKX0sTWFyazpmdW5jdGlvbihhLGIpe3RoaXMucmVhZENoaWxkTm9kZXMoYSwKYil9LFdlbGxLbm93bk5hbWU6ZnVuY3Rpb24oYSxiKXtiLmdyYXBoaWNOYW1lPXRoaXMuZ2V0Q2hpbGRWYWx1ZShhKX0sT3BhY2l0eTpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMucmVhZGVycy5vZ2MuX2V4cHJlc3Npb24uY2FsbCh0aGlzLGEpO2MmJihiLm9wYWNpdHk9Yyl9LFNpemU6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLnJlYWRlcnMub2djLl9leHByZXNzaW9uLmNhbGwodGhpcyxhKTtjJiYoYi5zaXplPWMpfSxSb3RhdGlvbjpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMucmVhZGVycy5vZ2MuX2V4cHJlc3Npb24uY2FsbCh0aGlzLGEpO2MmJihiLnJvdGF0aW9uPWMpfSxPbmxpbmVSZXNvdXJjZTpmdW5jdGlvbihhLGIpe2IuaHJlZj10aGlzLmdldEF0dHJpYnV0ZU5TKGEsdGhpcy5uYW1lc3BhY2VzLnhsaW5rLCJocmVmIil9LEZvcm1hdDpmdW5jdGlvbihhLGIpe2IuZ3JhcGhpY0Zvcm1hdD10aGlzLmdldENoaWxkVmFsdWUoYSl9fX0sT3BlbkxheWVycy5Gb3JtYXQuRmlsdGVyLnYxXzBfMC5wcm90b3R5cGUucmVhZGVycyksCmNzc01hcDp7c3Ryb2tlOiJzdHJva2VDb2xvciIsInN0cm9rZS1vcGFjaXR5Ijoic3Ryb2tlT3BhY2l0eSIsInN0cm9rZS13aWR0aCI6InN0cm9rZVdpZHRoIiwic3Ryb2tlLWxpbmVjYXAiOiJzdHJva2VMaW5lY2FwIiwic3Ryb2tlLWRhc2hhcnJheSI6InN0cm9rZURhc2hzdHlsZSIsZmlsbDoiZmlsbENvbG9yIiwiZmlsbC1vcGFjaXR5IjoiZmlsbE9wYWNpdHkiLCJmb250LWZhbWlseSI6ImZvbnRGYW1pbHkiLCJmb250LXNpemUiOiJmb250U2l6ZSIsImZvbnQtd2VpZ2h0IjoiZm9udFdlaWdodCIsImZvbnQtc3R5bGUiOiJmb250U3R5bGUifSxnZXRDc3NQcm9wZXJ0eTpmdW5jdGlvbihhKXt2YXIgYj1udWxsLGM7Zm9yKGMgaW4gdGhpcy5jc3NNYXApaWYodGhpcy5jc3NNYXBbY109PWEpe2I9YzticmVha31yZXR1cm4gYn0sZ2V0R3JhcGhpY0Zvcm1hdDpmdW5jdGlvbihhKXt2YXIgYixjO2ZvcihjIGluIHRoaXMuZ3JhcGhpY0Zvcm1hdHMpaWYodGhpcy5ncmFwaGljRm9ybWF0c1tjXS50ZXN0KGEpKXtiPQpjO2JyZWFrfXJldHVybiBifHx0aGlzLmRlZmF1bHRHcmFwaGljRm9ybWF0fSxkZWZhdWx0R3JhcGhpY0Zvcm1hdDoiaW1hZ2UvcG5nIixncmFwaGljRm9ybWF0czp7ImltYWdlL2pwZWciOi9cLmpwZT9nJC9pLCJpbWFnZS9naWYiOi9cLmdpZiQvaSwiaW1hZ2UvcG5nIjovXC5wbmckL2l9LHdyaXRlOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLndyaXRlcnMuc2xkLlN0eWxlZExheWVyRGVzY3JpcHRvci5hcHBseSh0aGlzLFthXSl9LHdyaXRlcnM6T3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoe3NsZDp7X09HQ0V4cHJlc3Npb246ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoYSksZD0ic3RyaW5nIj09dHlwZW9mIGI/Yi5zcGxpdCgiJHsiKTpbYl07Yy5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZVRleHROb2RlKGRbMF0pKTtmb3IodmFyIGUsZixnPTEsaD1kLmxlbmd0aDtnPGg7ZysrKWU9ZFtnXSxmPWUuaW5kZXhPZigifSIpLDA8Zj8odGhpcy53cml0ZU5vZGUoIm9nYzpQcm9wZXJ0eU5hbWUiLAp7cHJvcGVydHk6ZS5zdWJzdHJpbmcoMCxmKX0sYyksYy5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZVRleHROb2RlKGUuc3Vic3RyaW5nKCsrZikpKSk6Yy5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZVRleHROb2RlKCIkeyIrZSkpO3JldHVybiBjfSxTdHlsZWRMYXllckRlc2NyaXB0b3I6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJzbGQ6U3R5bGVkTGF5ZXJEZXNjcmlwdG9yIix7YXR0cmlidXRlczp7dmVyc2lvbjp0aGlzLlZFUlNJT04sInhzaTpzY2hlbWFMb2NhdGlvbiI6dGhpcy5zY2hlbWFMb2NhdGlvbn19KTtiLnNldEF0dHJpYnV0ZSgieG1sbnM6b2djIix0aGlzLm5hbWVzcGFjZXMub2djKTtiLnNldEF0dHJpYnV0ZSgieG1sbnM6Z21sIix0aGlzLm5hbWVzcGFjZXMuZ21sKTthLm5hbWUmJnRoaXMud3JpdGVOb2RlKCJOYW1lIixhLm5hbWUsYik7YS50aXRsZSYmdGhpcy53cml0ZU5vZGUoIlRpdGxlIixhLnRpdGxlLGIpO2EuZGVzY3JpcHRpb24mJgp0aGlzLndyaXRlTm9kZSgiQWJzdHJhY3QiLGEuZGVzY3JpcHRpb24sYik7aWYoT3BlbkxheWVycy5VdGlsLmlzQXJyYXkoYS5uYW1lZExheWVycykpZm9yKHZhciBjPTAsZD1hLm5hbWVkTGF5ZXJzLmxlbmd0aDtjPGQ7KytjKXRoaXMud3JpdGVOb2RlKCJOYW1lZExheWVyIixhLm5hbWVkTGF5ZXJzW2NdLGIpO2Vsc2UgZm9yKGMgaW4gYS5uYW1lZExheWVycyl0aGlzLndyaXRlTm9kZSgiTmFtZWRMYXllciIsYS5uYW1lZExheWVyc1tjXSxiKTtyZXR1cm4gYn0sTmFtZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJzbGQ6TmFtZSIse3ZhbHVlOmF9KX0sVGl0bGU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygic2xkOlRpdGxlIix7dmFsdWU6YX0pfSxBYnN0cmFjdDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJzbGQ6QWJzdHJhY3QiLHt2YWx1ZTphfSl9LE5hbWVkTGF5ZXI6ZnVuY3Rpb24oYSl7dmFyIGI9CnRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygic2xkOk5hbWVkTGF5ZXIiKTt0aGlzLndyaXRlTm9kZSgiTmFtZSIsYS5uYW1lLGIpO2lmKGEubmFtZWRTdHlsZXMpZm9yKHZhciBjPTAsZD1hLm5hbWVkU3R5bGVzLmxlbmd0aDtjPGQ7KytjKXRoaXMud3JpdGVOb2RlKCJOYW1lZFN0eWxlIixhLm5hbWVkU3R5bGVzW2NdLGIpO2lmKGEudXNlclN0eWxlcylmb3IoYz0wLGQ9YS51c2VyU3R5bGVzLmxlbmd0aDtjPGQ7KytjKXRoaXMud3JpdGVOb2RlKCJVc2VyU3R5bGUiLGEudXNlclN0eWxlc1tjXSxiKTtyZXR1cm4gYn0sTmFtZWRTdHlsZTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoInNsZDpOYW1lZFN0eWxlIik7dGhpcy53cml0ZU5vZGUoIk5hbWUiLGEsYik7cmV0dXJuIGJ9LFVzZXJTdHlsZTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoInNsZDpVc2VyU3R5bGUiKTthLm5hbWUmJnRoaXMud3JpdGVOb2RlKCJOYW1lIiwKYS5uYW1lLGIpO2EudGl0bGUmJnRoaXMud3JpdGVOb2RlKCJUaXRsZSIsYS50aXRsZSxiKTthLmRlc2NyaXB0aW9uJiZ0aGlzLndyaXRlTm9kZSgiQWJzdHJhY3QiLGEuZGVzY3JpcHRpb24sYik7YS5pc0RlZmF1bHQmJnRoaXMud3JpdGVOb2RlKCJJc0RlZmF1bHQiLGEuaXNEZWZhdWx0LGIpO2lmKHRoaXMubXVsdGlwbGVTeW1ib2xpemVycyYmYS5ydWxlcyl7Zm9yKHZhciBjPXswOltdfSxkPVswXSxlLGYsZyxoLGssbD0wLG09YS5ydWxlcy5sZW5ndGg7bDxtOysrbClpZihlPWEucnVsZXNbbF0sZS5zeW1ib2xpemVycyl7Zj17fTtmb3IodmFyIG49MCxwPWUuc3ltYm9saXplcnMubGVuZ3RoO248cDsrK24pZz1lLnN5bWJvbGl6ZXJzW25dLGg9Zy56SW5kZXgsaCBpbiBmfHwoaz1lLmNsb25lKCksay5zeW1ib2xpemVycz1bXSxmW2hdPWspLGZbaF0uc3ltYm9saXplcnMucHVzaChnLmNsb25lKCkpO2ZvcihoIGluIGYpaCBpbiBjfHwoZC5wdXNoKGgpLGNbaF09W10pLGNbaF0ucHVzaChmW2hdKX1lbHNlIGNbMF0ucHVzaChlLmNsb25lKCkpOwpkLnNvcnQoKTtsPTA7Zm9yKG09ZC5sZW5ndGg7bDxtOysrbCllPWNbZFtsXV0sMDxlLmxlbmd0aCYmKGs9YS5jbG9uZSgpLGsucnVsZXM9Y1tkW2xdXSx0aGlzLndyaXRlTm9kZSgiRmVhdHVyZVR5cGVTdHlsZSIsayxiKSl9ZWxzZSB0aGlzLndyaXRlTm9kZSgiRmVhdHVyZVR5cGVTdHlsZSIsYSxiKTtyZXR1cm4gYn0sSXNEZWZhdWx0OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoInNsZDpJc0RlZmF1bHQiLHt2YWx1ZTphPyIxIjoiMCJ9KX0sRmVhdHVyZVR5cGVTdHlsZTpmdW5jdGlvbihhKXtmb3IodmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJzbGQ6RmVhdHVyZVR5cGVTdHlsZSIpLGM9MCxkPWEucnVsZXMubGVuZ3RoO2M8ZDsrK2MpdGhpcy53cml0ZU5vZGUoIlJ1bGUiLGEucnVsZXNbY10sYik7cmV0dXJuIGJ9LFJ1bGU6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJzbGQ6UnVsZSIpO2EubmFtZSYmCnRoaXMud3JpdGVOb2RlKCJOYW1lIixhLm5hbWUsYik7YS50aXRsZSYmdGhpcy53cml0ZU5vZGUoIlRpdGxlIixhLnRpdGxlLGIpO2EuZGVzY3JpcHRpb24mJnRoaXMud3JpdGVOb2RlKCJBYnN0cmFjdCIsYS5kZXNjcmlwdGlvbixiKTthLmVsc2VGaWx0ZXI/dGhpcy53cml0ZU5vZGUoIkVsc2VGaWx0ZXIiLG51bGwsYik6YS5maWx0ZXImJnRoaXMud3JpdGVOb2RlKCJvZ2M6RmlsdGVyIixhLmZpbHRlcixiKTt2b2lkIDAhPWEubWluU2NhbGVEZW5vbWluYXRvciYmdGhpcy53cml0ZU5vZGUoIk1pblNjYWxlRGVub21pbmF0b3IiLGEubWluU2NhbGVEZW5vbWluYXRvcixiKTt2b2lkIDAhPWEubWF4U2NhbGVEZW5vbWluYXRvciYmdGhpcy53cml0ZU5vZGUoIk1heFNjYWxlRGVub21pbmF0b3IiLGEubWF4U2NhbGVEZW5vbWluYXRvcixiKTt2YXIgYyxkO2lmKHRoaXMubXVsdGlwbGVTeW1ib2xpemVycyYmYS5zeW1ib2xpemVycylmb3IodmFyIGU9MCxmPWEuc3ltYm9saXplcnMubGVuZ3RoO2U8CmY7KytlKWQ9YS5zeW1ib2xpemVyc1tlXSxjPWQuQ0xBU1NfTkFNRS5zcGxpdCgiLiIpLnBvcCgpLHRoaXMud3JpdGVOb2RlKGMrIlN5bWJvbGl6ZXIiLGQsYik7ZWxzZSBmb3IodmFyIGY9T3BlbkxheWVycy5TdHlsZS5TWU1CT0xJWkVSX1BSRUZJWEVTLGU9MCxnPWYubGVuZ3RoO2U8ZzsrK2UpYz1mW2VdLChkPWEuc3ltYm9saXplcltjXSkmJnRoaXMud3JpdGVOb2RlKGMrIlN5bWJvbGl6ZXIiLGQsYik7cmV0dXJuIGJ9LEVsc2VGaWx0ZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJzbGQ6RWxzZUZpbHRlciIpfSxNaW5TY2FsZURlbm9taW5hdG9yOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoInNsZDpNaW5TY2FsZURlbm9taW5hdG9yIix7dmFsdWU6YX0pfSxNYXhTY2FsZURlbm9taW5hdG9yOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoInNsZDpNYXhTY2FsZURlbm9taW5hdG9yIiwKe3ZhbHVlOmF9KX0sTGluZVN5bWJvbGl6ZXI6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJzbGQ6TGluZVN5bWJvbGl6ZXIiKTt0aGlzLndyaXRlTm9kZSgiU3Ryb2tlIixhLGIpO3JldHVybiBifSxTdHJva2U6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJzbGQ6U3Ryb2tlIik7dm9pZCAwIT1hLnN0cm9rZUNvbG9yJiZ0aGlzLndyaXRlTm9kZSgiQ3NzUGFyYW1ldGVyIix7c3ltYm9saXplcjphLGtleToic3Ryb2tlQ29sb3IifSxiKTt2b2lkIDAhPWEuc3Ryb2tlT3BhY2l0eSYmdGhpcy53cml0ZU5vZGUoIkNzc1BhcmFtZXRlciIse3N5bWJvbGl6ZXI6YSxrZXk6InN0cm9rZU9wYWNpdHkifSxiKTt2b2lkIDAhPWEuc3Ryb2tlV2lkdGgmJnRoaXMud3JpdGVOb2RlKCJDc3NQYXJhbWV0ZXIiLHtzeW1ib2xpemVyOmEsa2V5OiJzdHJva2VXaWR0aCJ9LGIpO3ZvaWQgMCE9YS5zdHJva2VEYXNoc3R5bGUmJiJzb2xpZCIhPT0KYS5zdHJva2VEYXNoc3R5bGUmJnRoaXMud3JpdGVOb2RlKCJDc3NQYXJhbWV0ZXIiLHtzeW1ib2xpemVyOmEsa2V5OiJzdHJva2VEYXNoc3R5bGUifSxiKTt2b2lkIDAhPWEuc3Ryb2tlTGluZWNhcCYmdGhpcy53cml0ZU5vZGUoIkNzc1BhcmFtZXRlciIse3N5bWJvbGl6ZXI6YSxrZXk6InN0cm9rZUxpbmVjYXAifSxiKTtyZXR1cm4gYn0sQ3NzUGFyYW1ldGVyOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoInNsZDpDc3NQYXJhbWV0ZXIiLHthdHRyaWJ1dGVzOntuYW1lOnRoaXMuZ2V0Q3NzUHJvcGVydHkoYS5rZXkpfSx2YWx1ZTphLnN5bWJvbGl6ZXJbYS5rZXldfSl9LFRleHRTeW1ib2xpemVyOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygic2xkOlRleHRTeW1ib2xpemVyIik7bnVsbCE9YS5sYWJlbCYmdGhpcy53cml0ZU5vZGUoIkxhYmVsIixhLmxhYmVsLGIpO251bGw9PWEuZm9udEZhbWlseSYmbnVsbD09YS5mb250U2l6ZSYmCm51bGw9PWEuZm9udFdlaWdodCYmbnVsbD09YS5mb250U3R5bGV8fHRoaXMud3JpdGVOb2RlKCJGb250IixhLGIpO251bGw9PWEubGFiZWxBbmNob3JQb2ludFgmJm51bGw9PWEubGFiZWxBbmNob3JQb2ludFkmJm51bGw9PWEubGFiZWxBbGlnbiYmbnVsbD09YS5sYWJlbFhPZmZzZXQmJm51bGw9PWEubGFiZWxZT2Zmc2V0JiZudWxsPT1hLmxhYmVsUm90YXRpb24mJm51bGw9PWEubGFiZWxQZXJwZW5kaWN1bGFyT2Zmc2V0fHx0aGlzLndyaXRlTm9kZSgiTGFiZWxQbGFjZW1lbnQiLGEsYik7bnVsbD09YS5oYWxvUmFkaXVzJiZudWxsPT1hLmhhbG9Db2xvciYmbnVsbD09YS5oYWxvT3BhY2l0eXx8dGhpcy53cml0ZU5vZGUoIkhhbG8iLGEsYik7bnVsbD09YS5mb250Q29sb3ImJm51bGw9PWEuZm9udE9wYWNpdHl8fHRoaXMud3JpdGVOb2RlKCJGaWxsIix7ZmlsbENvbG9yOmEuZm9udENvbG9yLGZpbGxPcGFjaXR5OmEuZm9udE9wYWNpdHl9LGIpO3JldHVybiBifSxMYWJlbFBsYWNlbWVudDpmdW5jdGlvbihhKXt2YXIgYj0KdGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJzbGQ6TGFiZWxQbGFjZW1lbnQiKTtudWxsPT1hLmxhYmVsQW5jaG9yUG9pbnRYJiZudWxsPT1hLmxhYmVsQW5jaG9yUG9pbnRZJiZudWxsPT1hLmxhYmVsQWxpZ24mJm51bGw9PWEubGFiZWxYT2Zmc2V0JiZudWxsPT1hLmxhYmVsWU9mZnNldCYmbnVsbD09YS5sYWJlbFJvdGF0aW9ufHxudWxsIT1hLmxhYmVsUGVycGVuZGljdWxhck9mZnNldHx8dGhpcy53cml0ZU5vZGUoIlBvaW50UGxhY2VtZW50IixhLGIpO251bGwhPWEubGFiZWxQZXJwZW5kaWN1bGFyT2Zmc2V0JiZ0aGlzLndyaXRlTm9kZSgiTGluZVBsYWNlbWVudCIsYSxiKTtyZXR1cm4gYn0sTGluZVBsYWNlbWVudDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoInNsZDpMaW5lUGxhY2VtZW50Iik7dGhpcy53cml0ZU5vZGUoIlBlcnBlbmRpY3VsYXJPZmZzZXQiLGEubGFiZWxQZXJwZW5kaWN1bGFyT2Zmc2V0LGIpO3JldHVybiBifSxQZXJwZW5kaWN1bGFyT2Zmc2V0OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoInNsZDpQZXJwZW5kaWN1bGFyT2Zmc2V0IiwKe3ZhbHVlOmF9KX0sUG9pbnRQbGFjZW1lbnQ6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJzbGQ6UG9pbnRQbGFjZW1lbnQiKTtudWxsPT1hLmxhYmVsQW5jaG9yUG9pbnRYJiZudWxsPT1hLmxhYmVsQW5jaG9yUG9pbnRZJiZudWxsPT1hLmxhYmVsQWxpZ258fHRoaXMud3JpdGVOb2RlKCJBbmNob3JQb2ludCIsYSxiKTtudWxsPT1hLmxhYmVsWE9mZnNldCYmbnVsbD09YS5sYWJlbFlPZmZzZXR8fHRoaXMud3JpdGVOb2RlKCJEaXNwbGFjZW1lbnQiLGEsYik7bnVsbCE9YS5sYWJlbFJvdGF0aW9uJiZ0aGlzLndyaXRlTm9kZSgiUm90YXRpb24iLGEubGFiZWxSb3RhdGlvbixiKTtyZXR1cm4gYn0sQW5jaG9yUG9pbnQ6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJzbGQ6QW5jaG9yUG9pbnQiKSxjPWEubGFiZWxBbmNob3JQb2ludFgsZD1hLmxhYmVsQW5jaG9yUG9pbnRZO251bGwhPWMmJnRoaXMud3JpdGVOb2RlKCJBbmNob3JQb2ludFgiLApjLGIpO251bGwhPWQmJnRoaXMud3JpdGVOb2RlKCJBbmNob3JQb2ludFkiLGQsYik7aWYobnVsbD09YyYmbnVsbD09ZCl7dmFyIGU9YS5sYWJlbEFsaWduLnN1YnN0cigwLDEpO2E9YS5sYWJlbEFsaWduLnN1YnN0cigxLDEpOyJsIj09PWU/Yz0wOiJjIj09PWU/Yz0wLjU6InIiPT09ZSYmKGM9MSk7ImIiPT09YT9kPTA6Im0iPT09YT9kPTAuNToidCI9PT1hJiYoZD0xKTt0aGlzLndyaXRlTm9kZSgiQW5jaG9yUG9pbnRYIixjLGIpO3RoaXMud3JpdGVOb2RlKCJBbmNob3JQb2ludFkiLGQsYil9cmV0dXJuIGJ9LEFuY2hvclBvaW50WDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJzbGQ6QW5jaG9yUG9pbnRYIix7dmFsdWU6YX0pfSxBbmNob3JQb2ludFk6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygic2xkOkFuY2hvclBvaW50WSIse3ZhbHVlOmF9KX0sRGlzcGxhY2VtZW50OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygic2xkOkRpc3BsYWNlbWVudCIpOwpudWxsIT1hLmxhYmVsWE9mZnNldCYmdGhpcy53cml0ZU5vZGUoIkRpc3BsYWNlbWVudFgiLGEubGFiZWxYT2Zmc2V0LGIpO251bGwhPWEubGFiZWxZT2Zmc2V0JiZ0aGlzLndyaXRlTm9kZSgiRGlzcGxhY2VtZW50WSIsYS5sYWJlbFlPZmZzZXQsYik7cmV0dXJuIGJ9LERpc3BsYWNlbWVudFg6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygic2xkOkRpc3BsYWNlbWVudFgiLHt2YWx1ZTphfSl9LERpc3BsYWNlbWVudFk6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygic2xkOkRpc3BsYWNlbWVudFkiLHt2YWx1ZTphfSl9LEZvbnQ6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJzbGQ6Rm9udCIpO2EuZm9udEZhbWlseSYmdGhpcy53cml0ZU5vZGUoIkNzc1BhcmFtZXRlciIse3N5bWJvbGl6ZXI6YSxrZXk6ImZvbnRGYW1pbHkifSxiKTthLmZvbnRTaXplJiZ0aGlzLndyaXRlTm9kZSgiQ3NzUGFyYW1ldGVyIiwKe3N5bWJvbGl6ZXI6YSxrZXk6ImZvbnRTaXplIn0sYik7YS5mb250V2VpZ2h0JiZ0aGlzLndyaXRlTm9kZSgiQ3NzUGFyYW1ldGVyIix7c3ltYm9saXplcjphLGtleToiZm9udFdlaWdodCJ9LGIpO2EuZm9udFN0eWxlJiZ0aGlzLndyaXRlTm9kZSgiQ3NzUGFyYW1ldGVyIix7c3ltYm9saXplcjphLGtleToiZm9udFN0eWxlIn0sYik7cmV0dXJuIGJ9LExhYmVsOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLndyaXRlcnMuc2xkLl9PR0NFeHByZXNzaW9uLmNhbGwodGhpcywic2xkOkxhYmVsIixhKX0sSGFsbzpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoInNsZDpIYWxvIik7YS5oYWxvUmFkaXVzJiZ0aGlzLndyaXRlTm9kZSgiUmFkaXVzIixhLmhhbG9SYWRpdXMsYik7KGEuaGFsb0NvbG9yfHxhLmhhbG9PcGFjaXR5KSYmdGhpcy53cml0ZU5vZGUoIkZpbGwiLHtmaWxsQ29sb3I6YS5oYWxvQ29sb3IsZmlsbE9wYWNpdHk6YS5oYWxvT3BhY2l0eX0sYik7CnJldHVybiBifSxSYWRpdXM6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygic2xkOlJhZGl1cyIse3ZhbHVlOmF9KX0sUmFzdGVyU3ltYm9saXplcjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoInNsZDpSYXN0ZXJTeW1ib2xpemVyIik7YS5nZW9tZXRyeSYmdGhpcy53cml0ZU5vZGUoIkdlb21ldHJ5IixhLmdlb21ldHJ5LGIpO2Eub3BhY2l0eSYmdGhpcy53cml0ZU5vZGUoIk9wYWNpdHkiLGEub3BhY2l0eSxiKTthLmNvbG9yTWFwJiZ0aGlzLndyaXRlTm9kZSgiQ29sb3JNYXAiLGEuY29sb3JNYXAsYik7cmV0dXJuIGJ9LEdlb21ldHJ5OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygic2xkOkdlb21ldHJ5Iik7YS5wcm9wZXJ0eSYmdGhpcy53cml0ZU5vZGUoIm9nYzpQcm9wZXJ0eU5hbWUiLGEsYik7cmV0dXJuIGJ9LENvbG9yTWFwOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoInNsZDpDb2xvck1hcCIpLApjPTAsZD1hLmxlbmd0aDtjPGQ7KytjKXRoaXMud3JpdGVOb2RlKCJDb2xvck1hcEVudHJ5IixhW2NdLGIpO3JldHVybiBifSxDb2xvck1hcEVudHJ5OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygic2xkOkNvbG9yTWFwRW50cnkiKTtiLnNldEF0dHJpYnV0ZSgiY29sb3IiLGEuY29sb3IpO3ZvaWQgMCE9PWEub3BhY2l0eSYmYi5zZXRBdHRyaWJ1dGUoIm9wYWNpdHkiLHBhcnNlRmxvYXQoYS5vcGFjaXR5KSk7dm9pZCAwIT09YS5xdWFudGl0eSYmYi5zZXRBdHRyaWJ1dGUoInF1YW50aXR5IixwYXJzZUZsb2F0KGEucXVhbnRpdHkpKTt2b2lkIDAhPT1hLmxhYmVsJiZiLnNldEF0dHJpYnV0ZSgibGFiZWwiLGEubGFiZWwpO3JldHVybiBifSxQb2x5Z29uU3ltYm9saXplcjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoInNsZDpQb2x5Z29uU3ltYm9saXplciIpOyExIT09YS5maWxsJiZ0aGlzLndyaXRlTm9kZSgiRmlsbCIsCmEsYik7ITEhPT1hLnN0cm9rZSYmdGhpcy53cml0ZU5vZGUoIlN0cm9rZSIsYSxiKTtyZXR1cm4gYn0sRmlsbDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoInNsZDpGaWxsIik7YS5maWxsQ29sb3ImJnRoaXMud3JpdGVOb2RlKCJDc3NQYXJhbWV0ZXIiLHtzeW1ib2xpemVyOmEsa2V5OiJmaWxsQ29sb3IifSxiKTtudWxsIT1hLmZpbGxPcGFjaXR5JiZ0aGlzLndyaXRlTm9kZSgiQ3NzUGFyYW1ldGVyIix7c3ltYm9saXplcjphLGtleToiZmlsbE9wYWNpdHkifSxiKTtyZXR1cm4gYn0sUG9pbnRTeW1ib2xpemVyOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygic2xkOlBvaW50U3ltYm9saXplciIpO3RoaXMud3JpdGVOb2RlKCJHcmFwaGljIixhLGIpO3JldHVybiBifSxHcmFwaGljOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygic2xkOkdyYXBoaWMiKTt2b2lkIDAhPWEuZXh0ZXJuYWxHcmFwaGljPwp0aGlzLndyaXRlTm9kZSgiRXh0ZXJuYWxHcmFwaGljIixhLGIpOnRoaXMud3JpdGVOb2RlKCJNYXJrIixhLGIpO3ZvaWQgMCE9YS5ncmFwaGljT3BhY2l0eSYmdGhpcy53cml0ZU5vZGUoIk9wYWNpdHkiLGEuZ3JhcGhpY09wYWNpdHksYik7dm9pZCAwIT1hLnBvaW50UmFkaXVzP3RoaXMud3JpdGVOb2RlKCJTaXplIiwyKmEucG9pbnRSYWRpdXMsYik6dm9pZCAwIT1hLmdyYXBoaWNXaWR0aCYmdGhpcy53cml0ZU5vZGUoIlNpemUiLGEuZ3JhcGhpY1dpZHRoLGIpO3ZvaWQgMCE9YS5yb3RhdGlvbiYmdGhpcy53cml0ZU5vZGUoIlJvdGF0aW9uIixhLnJvdGF0aW9uLGIpO3JldHVybiBifSxFeHRlcm5hbEdyYXBoaWM6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJzbGQ6RXh0ZXJuYWxHcmFwaGljIik7dGhpcy53cml0ZU5vZGUoIk9ubGluZVJlc291cmNlIixhLmV4dGVybmFsR3JhcGhpYyxiKTthPWEuZ3JhcGhpY0Zvcm1hdHx8dGhpcy5nZXRHcmFwaGljRm9ybWF0KGEuZXh0ZXJuYWxHcmFwaGljKTsKdGhpcy53cml0ZU5vZGUoIkZvcm1hdCIsYSxiKTtyZXR1cm4gYn0sTWFyazpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoInNsZDpNYXJrIik7YS5ncmFwaGljTmFtZSYmdGhpcy53cml0ZU5vZGUoIldlbGxLbm93bk5hbWUiLGEuZ3JhcGhpY05hbWUsYik7ITEhPT1hLmZpbGwmJnRoaXMud3JpdGVOb2RlKCJGaWxsIixhLGIpOyExIT09YS5zdHJva2UmJnRoaXMud3JpdGVOb2RlKCJTdHJva2UiLGEsYik7cmV0dXJuIGJ9LFdlbGxLbm93bk5hbWU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygic2xkOldlbGxLbm93bk5hbWUiLHt2YWx1ZTphfSl9LE9wYWNpdHk6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygic2xkOk9wYWNpdHkiLHt2YWx1ZTphfSl9LFNpemU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMud3JpdGVycy5zbGQuX09HQ0V4cHJlc3Npb24uY2FsbCh0aGlzLCJzbGQ6U2l6ZSIsCmEpfSxSb3RhdGlvbjpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJzbGQ6Um90YXRpb24iLHt2YWx1ZTphfSl9LE9ubGluZVJlc291cmNlOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoInNsZDpPbmxpbmVSZXNvdXJjZSIse2F0dHJpYnV0ZXM6eyJ4bGluazp0eXBlIjoic2ltcGxlIiwieGxpbms6aHJlZiI6YX19KX0sRm9ybWF0OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoInNsZDpGb3JtYXQiLHt2YWx1ZTphfSl9fX0sT3BlbkxheWVycy5Gb3JtYXQuRmlsdGVyLnYxXzBfMC5wcm90b3R5cGUud3JpdGVycyksQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Gb3JtYXQuU0xELnYxIn0pO09wZW5MYXllcnMuTGF5ZXIuV01TPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5MYXllci5HcmlkLHtERUZBVUxUX1BBUkFNUzp7c2VydmljZToiV01TIix2ZXJzaW9uOiIxLjEuMSIscmVxdWVzdDoiR2V0TWFwIixzdHlsZXM6IiIsZm9ybWF0OiJpbWFnZS9qcGVnIn0saXNCYXNlTGF5ZXI6ITAsZW5jb2RlQkJPWDohMSxub01hZ2ljOiExLHl4Ont9LGluaXRpYWxpemU6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9W107Yz1PcGVuTGF5ZXJzLlV0aWwudXBwZXJDYXNlT2JqZWN0KGMpOzEuMzw9cGFyc2VGbG9hdChjLlZFUlNJT04pJiYhYy5FWENFUFRJT05TJiYoYy5FWENFUFRJT05TPSJJTklNQUdFIik7ZS5wdXNoKGEsYixjLGQpO09wZW5MYXllcnMuTGF5ZXIuR3JpZC5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLGUpO09wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKHRoaXMucGFyYW1zLE9wZW5MYXllcnMuVXRpbC51cHBlckNhc2VPYmplY3QodGhpcy5ERUZBVUxUX1BBUkFNUykpOwohdGhpcy5ub01hZ2ljJiYodGhpcy5wYXJhbXMuVFJBTlNQQVJFTlQmJiJ0cnVlIj09dGhpcy5wYXJhbXMuVFJBTlNQQVJFTlQudG9TdHJpbmcoKS50b0xvd2VyQ2FzZSgpKSYmKG51bGwhPWQmJmQuaXNCYXNlTGF5ZXJ8fCh0aGlzLmlzQmFzZUxheWVyPSExKSwiaW1hZ2UvanBlZyI9PXRoaXMucGFyYW1zLkZPUk1BVCYmKHRoaXMucGFyYW1zLkZPUk1BVD1PcGVuTGF5ZXJzLlV0aWwuYWxwaGFIYWNrKCk/ImltYWdlL2dpZiI6ImltYWdlL3BuZyIpKX0sY2xvbmU6ZnVuY3Rpb24oYSl7bnVsbD09YSYmKGE9bmV3IE9wZW5MYXllcnMuTGF5ZXIuV01TKHRoaXMubmFtZSx0aGlzLnVybCx0aGlzLnBhcmFtcyx0aGlzLmdldE9wdGlvbnMoKSkpO3JldHVybiBhPU9wZW5MYXllcnMuTGF5ZXIuR3JpZC5wcm90b3R5cGUuY2xvbmUuYXBwbHkodGhpcyxbYV0pfSxyZXZlcnNlQXhpc09yZGVyOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5wcm9qZWN0aW9uLmdldENvZGUoKTtyZXR1cm4gMS4zPD1wYXJzZUZsb2F0KHRoaXMucGFyYW1zLlZFUlNJT04pJiYKISEodGhpcy55eFthXXx8T3BlbkxheWVycy5Qcm9qZWN0aW9uLmRlZmF1bHRzW2FdJiZPcGVuTGF5ZXJzLlByb2plY3Rpb24uZGVmYXVsdHNbYV0ueXgpfSxnZXRVUkw6ZnVuY3Rpb24oYSl7YT10aGlzLmFkanVzdEJvdW5kcyhhKTt2YXIgYj10aGlzLmdldEltYWdlU2l6ZSgpLGM9e30sZD10aGlzLnJldmVyc2VBeGlzT3JkZXIoKTtjLkJCT1g9dGhpcy5lbmNvZGVCQk9YP2EudG9CQk9YKG51bGwsZCk6YS50b0FycmF5KGQpO2MuV0lEVEg9Yi53O2MuSEVJR0hUPWIuaDtyZXR1cm4gdGhpcy5nZXRGdWxsUmVxdWVzdFN0cmluZyhjKX0sbWVyZ2VOZXdQYXJhbXM6ZnVuY3Rpb24oYSl7YT1bT3BlbkxheWVycy5VdGlsLnVwcGVyQ2FzZU9iamVjdChhKV07cmV0dXJuIE9wZW5MYXllcnMuTGF5ZXIuR3JpZC5wcm90b3R5cGUubWVyZ2VOZXdQYXJhbXMuYXBwbHkodGhpcyxhKX0sZ2V0RnVsbFJlcXVlc3RTdHJpbmc6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLm1hcC5nZXRQcm9qZWN0aW9uT2JqZWN0KCksCmM9dGhpcy5wcm9qZWN0aW9uJiZ0aGlzLnByb2plY3Rpb24uZXF1YWxzKGMpP3RoaXMucHJvamVjdGlvbi5nZXRDb2RlKCk6Yy5nZXRDb2RlKCksYz0ibm9uZSI9PWM/bnVsbDpjOzEuMzw9cGFyc2VGbG9hdCh0aGlzLnBhcmFtcy5WRVJTSU9OKT90aGlzLnBhcmFtcy5DUlM9Yzp0aGlzLnBhcmFtcy5TUlM9YzsiYm9vbGVhbiI9PXR5cGVvZiB0aGlzLnBhcmFtcy5UUkFOU1BBUkVOVCYmKGEuVFJBTlNQQVJFTlQ9dGhpcy5wYXJhbXMuVFJBTlNQQVJFTlQ/IlRSVUUiOiJGQUxTRSIpO3JldHVybiBPcGVuTGF5ZXJzLkxheWVyLkdyaWQucHJvdG90eXBlLmdldEZ1bGxSZXF1ZXN0U3RyaW5nLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5MYXllci5XTVMifSk7T3BlbkxheWVycy5MYXllci5LYU1hcD1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuTGF5ZXIuR3JpZCx7aXNCYXNlTGF5ZXI6ITAsREVGQVVMVF9QQVJBTVM6e2k6ImpwZWciLG1hcDoiIn0saW5pdGlhbGl6ZTpmdW5jdGlvbihhLGIsYyxkKXtPcGVuTGF5ZXJzLkxheWVyLkdyaWQucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMucGFyYW1zPU9wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKHRoaXMucGFyYW1zLHRoaXMuREVGQVVMVF9QQVJBTVMpfSxnZXRVUkw6ZnVuY3Rpb24oYSl7YT10aGlzLmFkanVzdEJvdW5kcyhhKTt2YXIgYj10aGlzLm1hcC5nZXRSZXNvbHV0aW9uKCksYz1NYXRoLnJvdW5kKDFFNCp0aGlzLm1hcC5nZXRTY2FsZSgpKS8xRTQsZD1NYXRoLnJvdW5kKGEubGVmdC9iKTthPS1NYXRoLnJvdW5kKGEudG9wL2IpO3JldHVybiB0aGlzLmdldEZ1bGxSZXF1ZXN0U3RyaW5nKHt0OmEsbDpkLHM6Y30pfSxjYWxjdWxhdGVHcmlkTGF5b3V0OmZ1bmN0aW9uKGEsCmIsYyl7Yj1jKnRoaXMudGlsZVNpemUudztjKj10aGlzLnRpbGVTaXplLmg7cmV0dXJue3RpbGVsb246Yix0aWxlbGF0OmMsc3RhcnRjb2w6TWF0aC5mbG9vcihhLmxlZnQvYiktdGhpcy5idWZmZXIsc3RhcnRyb3c6TWF0aC5mbG9vcihhLnRvcC9jKSt0aGlzLmJ1ZmZlcn19LGdldFRpbGVCb3VuZHNGb3JHcmlkSW5kZXg6ZnVuY3Rpb24oYSxiKXt0aGlzLmdldFRpbGVPcmlnaW4oKTt2YXIgYz10aGlzLmdyaWRMYXlvdXQsZD1jLnRpbGVsb24sZT1jLnRpbGVsYXQsZj0oYy5zdGFydGNvbCtiKSpkLGM9KGMuc3RhcnRyb3ctYSkqZTtyZXR1cm4gbmV3IE9wZW5MYXllcnMuQm91bmRzKGYsYyxmK2QsYytlKX0sY2xvbmU6ZnVuY3Rpb24oYSl7bnVsbD09YSYmKGE9bmV3IE9wZW5MYXllcnMuTGF5ZXIuS2FNYXAodGhpcy5uYW1lLHRoaXMudXJsLHRoaXMucGFyYW1zLHRoaXMuZ2V0T3B0aW9ucygpKSk7YT1PcGVuTGF5ZXJzLkxheWVyLkdyaWQucHJvdG90eXBlLmNsb25lLmFwcGx5KHRoaXMsClthXSk7bnVsbCE9dGhpcy50aWxlU2l6ZSYmKGEudGlsZVNpemU9dGhpcy50aWxlU2l6ZS5jbG9uZSgpKTthLmdyaWQ9W107cmV0dXJuIGF9LGdldFRpbGVCb3VuZHM6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5nZXRSZXNvbHV0aW9uKCksYz1iKnRoaXMudGlsZVNpemUudyxiPWIqdGhpcy50aWxlU2l6ZS5oLGQ9dGhpcy5nZXRMb25MYXRGcm9tVmlld1BvcnRQeChhKTthPWMqTWF0aC5mbG9vcihkLmxvbi9jKTtkPWIqTWF0aC5mbG9vcihkLmxhdC9iKTtyZXR1cm4gbmV3IE9wZW5MYXllcnMuQm91bmRzKGEsZCxhK2MsZCtiKX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5MYXllci5LYU1hcCJ9KTtPcGVuTGF5ZXJzLkZvcm1hdC5XTUMudjFfMV8wPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Gb3JtYXQuV01DLnYxLHtWRVJTSU9OOiIxLjEuMCIsc2NoZW1hTG9jYXRpb246Imh0dHA6Ly93d3cub3Blbmdpcy5uZXQvY29udGV4dCBodHRwOi8vc2NoZW1hcy5vcGVuZ2lzLm5ldC9jb250ZXh0LzEuMS4wL2NvbnRleHQueHNkIixpbml0aWFsaXplOmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuRm9ybWF0LldNQy52MS5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLFthXSl9LHJlYWRfc2xkX01pblNjYWxlRGVub21pbmF0b3I6ZnVuY3Rpb24oYSxiKXt2YXIgYz1wYXJzZUZsb2F0KHRoaXMuZ2V0Q2hpbGRWYWx1ZShiKSk7MDxjJiYoYS5tYXhTY2FsZT1jKX0scmVhZF9zbGRfTWF4U2NhbGVEZW5vbWluYXRvcjpmdW5jdGlvbihhLGIpe2EubWluU2NhbGU9cGFyc2VGbG9hdCh0aGlzLmdldENoaWxkVmFsdWUoYikpfSxyZWFkX3dtY19TUlM6ZnVuY3Rpb24oYSxiKXsic3JzImluCmF8fChhLnNycz17fSk7YS5zcnNbdGhpcy5nZXRDaGlsZFZhbHVlKGIpXT0hMH0sd3JpdGVfd21jX0xheWVyOmZ1bmN0aW9uKGEpe3ZhciBiPU9wZW5MYXllcnMuRm9ybWF0LldNQy52MS5wcm90b3R5cGUud3JpdGVfd21jX0xheWVyLmFwcGx5KHRoaXMsW2FdKTtpZihhLm1heFNjYWxlKXt2YXIgYz10aGlzLmNyZWF0ZUVsZW1lbnROUyh0aGlzLm5hbWVzcGFjZXMuc2xkLCJzbGQ6TWluU2NhbGVEZW5vbWluYXRvciIpO2MuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVUZXh0Tm9kZShhLm1heFNjYWxlLnRvUHJlY2lzaW9uKDE2KSkpO2IuYXBwZW5kQ2hpbGQoYyl9YS5taW5TY2FsZSYmKGM9dGhpcy5jcmVhdGVFbGVtZW50TlModGhpcy5uYW1lc3BhY2VzLnNsZCwic2xkOk1heFNjYWxlRGVub21pbmF0b3IiKSxjLmFwcGVuZENoaWxkKHRoaXMuY3JlYXRlVGV4dE5vZGUoYS5taW5TY2FsZS50b1ByZWNpc2lvbigxNikpKSxiLmFwcGVuZENoaWxkKGMpKTtpZihhLnNycylmb3IodmFyIGQgaW4gYS5zcnMpYi5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZUVsZW1lbnREZWZhdWx0TlMoIlNSUyIsCmQpKTtiLmFwcGVuZENoaWxkKHRoaXMud3JpdGVfd21jX0Zvcm1hdExpc3QoYSkpO2IuYXBwZW5kQ2hpbGQodGhpcy53cml0ZV93bWNfU3R5bGVMaXN0KGEpKTthLmRpbWVuc2lvbnMmJmIuYXBwZW5kQ2hpbGQodGhpcy53cml0ZV93bWNfRGltZW5zaW9uTGlzdChhKSk7Yi5hcHBlbmRDaGlsZCh0aGlzLndyaXRlX3dtY19MYXllckV4dGVuc2lvbihhKSk7cmV0dXJuIGJ9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuRm9ybWF0LldNQy52MV8xXzAifSk7T3BlbkxheWVycy5Gb3JtYXQuWExTPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Gb3JtYXQuWE1MLlZlcnNpb25lZE9HQyx7ZGVmYXVsdFZlcnNpb246IjEuMS4wIixzdHJpbmdpZnlPdXRwdXQ6ITAsQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Gb3JtYXQuWExTIn0pO09wZW5MYXllcnMuRm9ybWF0LlhMUy52MT1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuRm9ybWF0LlhNTCx7bmFtZXNwYWNlczp7eGxzOiJodHRwOi8vd3d3Lm9wZW5naXMubmV0L3hscyIsZ21sOiJodHRwOi8vd3d3Lm9wZW5naXMubmV0L2dtbCIseHNpOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxL1hNTFNjaGVtYS1pbnN0YW5jZSJ9LHJlZ0V4ZXM6e3RyaW1TcGFjZTovXlxzKnxccyokL2cscmVtb3ZlU3BhY2U6L1xzKi9nLHNwbGl0U3BhY2U6L1xzKy8sdHJpbUNvbW1hOi9ccyosXHMqL2d9LHh5OiEwLGRlZmF1bHRQcmVmaXg6InhscyIsc2NoZW1hTG9jYXRpb246bnVsbCxyZWFkOmZ1bmN0aW9uKGEsYil7T3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoYix0aGlzLm9wdGlvbnMpO3ZhciBjPXt9O3RoaXMucmVhZENoaWxkTm9kZXMoYSxjKTtyZXR1cm4gY30scmVhZGVyczp7eGxzOntYTFM6ZnVuY3Rpb24oYSxiKXtiLnZlcnNpb249YS5nZXRBdHRyaWJ1dGUoInZlcnNpb24iKTsKdGhpcy5yZWFkQ2hpbGROb2RlcyhhLGIpfSxSZXNwb25zZTpmdW5jdGlvbihhLGIpe3RoaXMucmVhZENoaWxkTm9kZXMoYSxiKX0sR2VvY29kZVJlc3BvbnNlOmZ1bmN0aW9uKGEsYil7Yi5yZXNwb25zZUxpc3RzPVtdO3RoaXMucmVhZENoaWxkTm9kZXMoYSxiKX0sR2VvY29kZVJlc3BvbnNlTGlzdDpmdW5jdGlvbihhLGIpe3ZhciBjPXtmZWF0dXJlczpbXSxudW1iZXJPZkdlb2NvZGVkQWRkcmVzc2VzOnBhcnNlSW50KGEuZ2V0QXR0cmlidXRlKCJudW1iZXJPZkdlb2NvZGVkQWRkcmVzc2VzIikpfTtiLnJlc3BvbnNlTGlzdHMucHVzaChjKTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYyl9LEdlb2NvZGVkQWRkcmVzczpmdW5jdGlvbihhLGIpe3ZhciBjPW5ldyBPcGVuTGF5ZXJzLkZlYXR1cmUuVmVjdG9yO2IuZmVhdHVyZXMucHVzaChjKTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYyk7Yy5nZW9tZXRyeT1jLmNvbXBvbmVudHNbMF19LEdlb2NvZGVNYXRjaENvZGU6ZnVuY3Rpb24oYSxiKXtiLmF0dHJpYnV0ZXMubWF0Y2hDb2RlPQp7YWNjdXJhY3k6cGFyc2VGbG9hdChhLmdldEF0dHJpYnV0ZSgiYWNjdXJhY3kiKSksbWF0Y2hUeXBlOmEuZ2V0QXR0cmlidXRlKCJtYXRjaFR5cGUiKX19LEFkZHJlc3M6ZnVuY3Rpb24oYSxiKXt2YXIgYz17Y291bnRyeUNvZGU6YS5nZXRBdHRyaWJ1dGUoImNvdW50cnlDb2RlIiksYWRkcmVzc2VlOmEuZ2V0QXR0cmlidXRlKCJhZGRyZXNzZWUiKSxzdHJlZXQ6W10scGxhY2U6W119O2IuYXR0cmlidXRlcy5hZGRyZXNzPWM7dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGMpfSxmcmVlRm9ybUFkZHJlc3M6ZnVuY3Rpb24oYSxiKXtiLmZyZWVGb3JtQWRkcmVzcz10aGlzLmdldENoaWxkVmFsdWUoYSl9LFN0cmVldEFkZHJlc3M6ZnVuY3Rpb24oYSxiKXt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYil9LEJ1aWxkaW5nOmZ1bmN0aW9uKGEsYil7Yi5idWlsZGluZz17bnVtYmVyOmEuZ2V0QXR0cmlidXRlKCJudW1iZXIiKSxzdWJkaXZpc2lvbjphLmdldEF0dHJpYnV0ZSgic3ViZGl2aXNpb24iKSwKYnVpbGRpbmdOYW1lOmEuZ2V0QXR0cmlidXRlKCJidWlsZGluZ05hbWUiKX19LFN0cmVldDpmdW5jdGlvbihhLGIpe2Iuc3RyZWV0LnB1c2godGhpcy5nZXRDaGlsZFZhbHVlKGEpKX0sUGxhY2U6ZnVuY3Rpb24oYSxiKXtiLnBsYWNlW2EuZ2V0QXR0cmlidXRlKCJ0eXBlIildPXRoaXMuZ2V0Q2hpbGRWYWx1ZShhKX0sUG9zdGFsQ29kZTpmdW5jdGlvbihhLGIpe2IucG9zdGFsQ29kZT10aGlzLmdldENoaWxkVmFsdWUoYSl9fSxnbWw6T3BlbkxheWVycy5Gb3JtYXQuR01MLnYzLnByb3RvdHlwZS5yZWFkZXJzLmdtbH0sd3JpdGU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMud3JpdGVycy54bHMuWExTLmFwcGx5KHRoaXMsW2FdKX0sd3JpdGVyczp7eGxzOntYTFM6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJ4bHM6WExTIix7YXR0cmlidXRlczp7dmVyc2lvbjp0aGlzLlZFUlNJT04sInhzaTpzY2hlbWFMb2NhdGlvbiI6dGhpcy5zY2hlbWFMb2NhdGlvbn19KTsKdGhpcy53cml0ZU5vZGUoIlJlcXVlc3RIZWFkZXIiLGEuaGVhZGVyLGIpO3RoaXMud3JpdGVOb2RlKCJSZXF1ZXN0IixhLGIpO3JldHVybiBifSxSZXF1ZXN0SGVhZGVyOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoInhsczpSZXF1ZXN0SGVhZGVyIil9LFJlcXVlc3Q6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJ4bHM6UmVxdWVzdCIse2F0dHJpYnV0ZXM6e21ldGhvZE5hbWU6Ikdlb2NvZGVSZXF1ZXN0IixyZXF1ZXN0SUQ6YS5yZXF1ZXN0SUR8fCIiLHZlcnNpb246dGhpcy5WRVJTSU9OfX0pO3RoaXMud3JpdGVOb2RlKCJHZW9jb2RlUmVxdWVzdCIsYS5hZGRyZXNzZXMsYik7cmV0dXJuIGJ9LEdlb2NvZGVSZXF1ZXN0OmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoInhsczpHZW9jb2RlUmVxdWVzdCIpLGM9MCxkPWEubGVuZ3RoO2M8ZDtjKyspdGhpcy53cml0ZU5vZGUoIkFkZHJlc3MiLAphW2NdLGIpO3JldHVybiBifSxBZGRyZXNzOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygieGxzOkFkZHJlc3MiLHthdHRyaWJ1dGVzOntjb3VudHJ5Q29kZTphLmNvdW50cnlDb2RlfX0pO2EuZnJlZUZvcm1BZGRyZXNzP3RoaXMud3JpdGVOb2RlKCJmcmVlRm9ybUFkZHJlc3MiLGEuZnJlZUZvcm1BZGRyZXNzLGIpOihhLnN0cmVldCYmdGhpcy53cml0ZU5vZGUoIlN0cmVldEFkZHJlc3MiLGEsYiksYS5tdW5pY2lwYWxpdHkmJnRoaXMud3JpdGVOb2RlKCJNdW5pY2lwYWxpdHkiLGEubXVuaWNpcGFsaXR5LGIpLGEuY291bnRyeVN1YmRpdmlzaW9uJiZ0aGlzLndyaXRlTm9kZSgiQ291bnRyeVN1YmRpdmlzaW9uIixhLmNvdW50cnlTdWJkaXZpc2lvbixiKSxhLnBvc3RhbENvZGUmJnRoaXMud3JpdGVOb2RlKCJQb3N0YWxDb2RlIixhLnBvc3RhbENvZGUsYikpO3JldHVybiBifSxmcmVlRm9ybUFkZHJlc3M6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygiZnJlZUZvcm1BZGRyZXNzIiwKe3ZhbHVlOmF9KX0sU3RyZWV0QWRkcmVzczpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoInhsczpTdHJlZXRBZGRyZXNzIik7YS5idWlsZGluZyYmdGhpcy53cml0ZU5vZGUoYiwiQnVpbGRpbmciLGEuYnVpbGRpbmcpO2E9YS5zdHJlZXQ7T3BlbkxheWVycy5VdGlsLmlzQXJyYXkoYSl8fChhPVthXSk7Zm9yKHZhciBjPTAsZD1hLmxlbmd0aDtjPGQ7YysrKXRoaXMud3JpdGVOb2RlKCJTdHJlZXQiLGFbY10sYik7cmV0dXJuIGJ9LEJ1aWxkaW5nOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoInhsczpCdWlsZGluZyIse2F0dHJpYnV0ZXM6e251bWJlcjphLm51bWJlcixzdWJkaXZpc2lvbjphLnN1YmRpdmlzaW9uLGJ1aWxkaW5nTmFtZTphLmJ1aWxkaW5nTmFtZX19KX0sU3RyZWV0OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoInhsczpTdHJlZXQiLHt2YWx1ZTphfSl9LE11bmljaXBhbGl0eTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJ4bHM6UGxhY2UiLAp7YXR0cmlidXRlczp7dHlwZToiTXVuaWNpcGFsaXR5In0sdmFsdWU6YX0pfSxDb3VudHJ5U3ViZGl2aXNpb246ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygieGxzOlBsYWNlIix7YXR0cmlidXRlczp7dHlwZToiQ291bnRyeVN1YmRpdmlzaW9uIn0sdmFsdWU6YX0pfSxQb3N0YWxDb2RlOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoInhsczpQb3N0YWxDb2RlIix7dmFsdWU6YX0pfX19LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuRm9ybWF0LlhMUy52MSJ9KTtPcGVuTGF5ZXJzLkZvcm1hdC5YTFMudjFfMV8wPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Gb3JtYXQuWExTLnYxLHtWRVJTSU9OOiIxLjEiLHNjaGVtYUxvY2F0aW9uOiJodHRwOi8vd3d3Lm9wZW5naXMubmV0L3hscyBodHRwOi8vc2NoZW1hcy5vcGVuZ2lzLm5ldC9vbHMvMS4xLjAvTG9jYXRpb25VdGlsaXR5U2VydmljZS54c2QiLENMQVNTX05BTUU6Ik9wZW5MYXllcnMuRm9ybWF0LlhMUy52MV8xXzAifSk7T3BlbkxheWVycy5Gb3JtYXQuWExTLnYxXzE9T3BlbkxheWVycy5Gb3JtYXQuWExTLnYxXzFfMDtPcGVuTGF5ZXJzLlJlbmRlcmVyLlNWRz1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuUmVuZGVyZXIuRWxlbWVudHMse3htbG5zOiJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIseGxpbmtuczoiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIsTUFYX1BJWEVMOjE1RTMsdHJhbnNsYXRpb25QYXJhbWV0ZXJzOm51bGwsc3ltYm9sTWV0cmljczpudWxsLGluaXRpYWxpemU6ZnVuY3Rpb24oYSl7dGhpcy5zdXBwb3J0ZWQoKSYmKE9wZW5MYXllcnMuUmVuZGVyZXIuRWxlbWVudHMucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxhcmd1bWVudHMpLHRoaXMudHJhbnNsYXRpb25QYXJhbWV0ZXJzPXt4OjAseTowfSx0aGlzLnN5bWJvbE1ldHJpY3M9e30pfSxzdXBwb3J0ZWQ6ZnVuY3Rpb24oKXtyZXR1cm4gZG9jdW1lbnQuaW1wbGVtZW50YXRpb24mJihkb2N1bWVudC5pbXBsZW1lbnRhdGlvbi5oYXNGZWF0dXJlKCJvcmcudzNjLnN2ZyIsIjEuMCIpfHxkb2N1bWVudC5pbXBsZW1lbnRhdGlvbi5oYXNGZWF0dXJlKCJodHRwOi8vd3d3LnczLm9yZy9UUi9TVkcxMS9mZWF0dXJlI1NWRyIsCiIxLjEiKXx8ZG9jdW1lbnQuaW1wbGVtZW50YXRpb24uaGFzRmVhdHVyZSgiaHR0cDovL3d3dy53My5vcmcvVFIvU1ZHMTEvZmVhdHVyZSNCYXNpY1N0cnVjdHVyZSIsIjEuMSIpKX0saW5WYWxpZFJhbmdlOmZ1bmN0aW9uKGEsYixjKXthKz1jPzA6dGhpcy50cmFuc2xhdGlvblBhcmFtZXRlcnMueDtiKz1jPzA6dGhpcy50cmFuc2xhdGlvblBhcmFtZXRlcnMueTtyZXR1cm4gYT49LXRoaXMuTUFYX1BJWEVMJiZhPD10aGlzLk1BWF9QSVhFTCYmYj49LXRoaXMuTUFYX1BJWEVMJiZiPD10aGlzLk1BWF9QSVhFTH0sc2V0RXh0ZW50OmZ1bmN0aW9uKGEsYil7dmFyIGM9T3BlbkxheWVycy5SZW5kZXJlci5FbGVtZW50cy5wcm90b3R5cGUuc2V0RXh0ZW50LmFwcGx5KHRoaXMsYXJndW1lbnRzKSxkPXRoaXMuZ2V0UmVzb2x1dGlvbigpLGU9LWEubGVmdC9kLGQ9YS50b3AvZDtpZihiKXJldHVybiB0aGlzLmxlZnQ9ZSx0aGlzLnRvcD1kLHRoaXMucmVuZGVyZXJSb290LnNldEF0dHJpYnV0ZU5TKG51bGwsCiJ2aWV3Qm94IiwiMCAwICIrdGhpcy5zaXplLncrIiAiK3RoaXMuc2l6ZS5oKSx0aGlzLnRyYW5zbGF0ZSh0aGlzLnhPZmZzZXQsMCksITA7KGU9dGhpcy50cmFuc2xhdGUoZS10aGlzLmxlZnQrdGhpcy54T2Zmc2V0LGQtdGhpcy50b3ApKXx8dGhpcy5zZXRFeHRlbnQoYSwhMCk7cmV0dXJuIGMmJmV9LHRyYW5zbGF0ZTpmdW5jdGlvbihhLGIpe2lmKHRoaXMuaW5WYWxpZFJhbmdlKGEsYiwhMCkpe3ZhciBjPSIiO2lmKGF8fGIpYz0idHJhbnNsYXRlKCIrYSsiLCIrYisiKSI7dGhpcy5yb290LnNldEF0dHJpYnV0ZU5TKG51bGwsInRyYW5zZm9ybSIsYyk7dGhpcy50cmFuc2xhdGlvblBhcmFtZXRlcnM9e3g6YSx5OmJ9O3JldHVybiEwfXJldHVybiExfSxzZXRTaXplOmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuUmVuZGVyZXIucHJvdG90eXBlLnNldFNpemUuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMucmVuZGVyZXJSb290LnNldEF0dHJpYnV0ZU5TKG51bGwsIndpZHRoIix0aGlzLnNpemUudyk7CnRoaXMucmVuZGVyZXJSb290LnNldEF0dHJpYnV0ZU5TKG51bGwsImhlaWdodCIsdGhpcy5zaXplLmgpfSxnZXROb2RlVHlwZTpmdW5jdGlvbihhLGIpe3ZhciBjPW51bGw7c3dpdGNoKGEuQ0xBU1NfTkFNRSl7Y2FzZSAiT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludCI6Yz1iLmV4dGVybmFsR3JhcGhpYz8iaW1hZ2UiOnRoaXMuaXNDb21wbGV4U3ltYm9sKGIuZ3JhcGhpY05hbWUpPyJzdmciOiJjaXJjbGUiO2JyZWFrO2Nhc2UgIk9wZW5MYXllcnMuR2VvbWV0cnkuUmVjdGFuZ2xlIjpjPSJyZWN0IjticmVhaztjYXNlICJPcGVuTGF5ZXJzLkdlb21ldHJ5LkxpbmVTdHJpbmciOmM9InBvbHlsaW5lIjticmVhaztjYXNlICJPcGVuTGF5ZXJzLkdlb21ldHJ5LkxpbmVhclJpbmciOmM9InBvbHlnb24iO2JyZWFrO2Nhc2UgIk9wZW5MYXllcnMuR2VvbWV0cnkuUG9seWdvbiI6Y2FzZSAiT3BlbkxheWVycy5HZW9tZXRyeS5DdXJ2ZSI6Yz0icGF0aCJ9cmV0dXJuIGN9LHNldFN0eWxlOmZ1bmN0aW9uKGEsCmIsYyl7Yj1ifHxhLl9zdHlsZTtjPWN8fGEuX29wdGlvbnM7dmFyIGQ9Yi50aXRsZXx8Yi5ncmFwaGljVGl0bGU7aWYoZCl7YS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJ0aXRsZSIsZCk7dmFyIGU9YS5nZXRFbGVtZW50c0J5VGFnTmFtZSgidGl0bGUiKTswPGUubGVuZ3RoP2VbMF0uZmlyc3RDaGlsZC50ZXh0Q29udGVudD1kOihlPXRoaXMubm9kZUZhY3RvcnkobnVsbCwidGl0bGUiKSxlLnRleHRDb250ZW50PWQsYS5hcHBlbmRDaGlsZChlKSl9dmFyIGU9cGFyc2VGbG9hdChhLmdldEF0dHJpYnV0ZU5TKG51bGwsInIiKSksZD0xLGY7aWYoIk9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQiPT1hLl9nZW9tZXRyeUNsYXNzJiZlKXthLnN0eWxlLnZpc2liaWxpdHk9IiI7aWYoITE9PT1iLmdyYXBoaWMpYS5zdHlsZS52aXNpYmlsaXR5PSJoaWRkZW4iO2Vsc2UgaWYoYi5leHRlcm5hbEdyYXBoaWMpe2Y9dGhpcy5nZXRQb3NpdGlvbihhKTtiLmdyYXBoaWNXaWR0aCYmYi5ncmFwaGljSGVpZ2h0JiYKYS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJwcmVzZXJ2ZUFzcGVjdFJhdGlvIiwibm9uZSIpO3ZhciBlPWIuZ3JhcGhpY1dpZHRofHxiLmdyYXBoaWNIZWlnaHQsZz1iLmdyYXBoaWNIZWlnaHR8fGIuZ3JhcGhpY1dpZHRoLGU9ZT9lOjIqYi5wb2ludFJhZGl1cyxnPWc/ZzoyKmIucG9pbnRSYWRpdXMsaD12b2lkIDAhPWIuZ3JhcGhpY1lPZmZzZXQ/Yi5ncmFwaGljWU9mZnNldDotKDAuNSpnKSxrPWIuZ3JhcGhpY09wYWNpdHl8fGIuZmlsbE9wYWNpdHk7YS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJ4IiwoZi54Kyh2b2lkIDAhPWIuZ3JhcGhpY1hPZmZzZXQ/Yi5ncmFwaGljWE9mZnNldDotKDAuNSplKSkpLnRvRml4ZWQoKSk7YS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJ5IiwoZi55K2gpLnRvRml4ZWQoKSk7YS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJ3aWR0aCIsZSk7YS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJoZWlnaHQiLGcpO2Euc2V0QXR0cmlidXRlTlModGhpcy54bGlua25zLCJ4bGluazpocmVmIiwKYi5leHRlcm5hbEdyYXBoaWMpO2Euc2V0QXR0cmlidXRlTlMobnVsbCwic3R5bGUiLCJvcGFjaXR5OiAiK2spO2Eub25jbGljaz1PcGVuTGF5ZXJzLkV2ZW50LnByZXZlbnREZWZhdWx0fWVsc2UgaWYodGhpcy5pc0NvbXBsZXhTeW1ib2woYi5ncmFwaGljTmFtZSkpe3ZhciBlPTMqYi5wb2ludFJhZGl1cyxnPTIqZSxsPXRoaXMuaW1wb3J0U3ltYm9sKGIuZ3JhcGhpY05hbWUpO2Y9dGhpcy5nZXRQb3NpdGlvbihhKTtkPTMqdGhpcy5zeW1ib2xNZXRyaWNzW2wuaWRdWzBdL2c7aD1hLnBhcmVudE5vZGU7az1hLm5leHRTaWJsaW5nO2gmJmgucmVtb3ZlQ2hpbGQoYSk7YS5maXJzdENoaWxkJiZhLnJlbW92ZUNoaWxkKGEuZmlyc3RDaGlsZCk7YS5hcHBlbmRDaGlsZChsLmZpcnN0Q2hpbGQuY2xvbmVOb2RlKCEwKSk7YS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJ2aWV3Qm94IixsLmdldEF0dHJpYnV0ZU5TKG51bGwsInZpZXdCb3giKSk7YS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJ3aWR0aCIsCmcpO2Euc2V0QXR0cmlidXRlTlMobnVsbCwiaGVpZ2h0IixnKTthLnNldEF0dHJpYnV0ZU5TKG51bGwsIngiLGYueC1lKTthLnNldEF0dHJpYnV0ZU5TKG51bGwsInkiLGYueS1lKTtrP2guaW5zZXJ0QmVmb3JlKGEsayk6aCYmaC5hcHBlbmRDaGlsZChhKX1lbHNlIGEuc2V0QXR0cmlidXRlTlMobnVsbCwiciIsYi5wb2ludFJhZGl1cyk7ZT1iLnJvdGF0aW9uO3ZvaWQgMD09PWUmJnZvaWQgMD09PWEuX3JvdGF0aW9ufHwhZnx8KGEuX3JvdGF0aW9uPWUsZXw9MCwic3ZnIiE9PWEubm9kZU5hbWU/YS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJ0cmFuc2Zvcm0iLCJyb3RhdGUoIitlKyIgIitmLngrIiAiK2YueSsiKSIpOihmPXRoaXMuc3ltYm9sTWV0cmljc1tsLmlkXSxhLmZpcnN0Q2hpbGQuc2V0QXR0cmlidXRlTlMobnVsbCwidHJhbnNmb3JtIiwicm90YXRlKCIrZSsiICIrZlsxXSsiICIrZlsyXSsiKSIpKSl9Yy5pc0ZpbGxlZD8oYS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJmaWxsIixiLmZpbGxDb2xvciksCmEuc2V0QXR0cmlidXRlTlMobnVsbCwiZmlsbC1vcGFjaXR5IixiLmZpbGxPcGFjaXR5KSk6YS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJmaWxsIiwibm9uZSIpO2MuaXNTdHJva2VkPyhhLnNldEF0dHJpYnV0ZU5TKG51bGwsInN0cm9rZSIsYi5zdHJva2VDb2xvciksYS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJzdHJva2Utb3BhY2l0eSIsYi5zdHJva2VPcGFjaXR5KSxhLnNldEF0dHJpYnV0ZU5TKG51bGwsInN0cm9rZS13aWR0aCIsYi5zdHJva2VXaWR0aCpkKSxhLnNldEF0dHJpYnV0ZU5TKG51bGwsInN0cm9rZS1saW5lY2FwIixiLnN0cm9rZUxpbmVjYXB8fCJyb3VuZCIpLGEuc2V0QXR0cmlidXRlTlMobnVsbCwic3Ryb2tlLWxpbmVqb2luIiwicm91bmQiKSxiLnN0cm9rZURhc2hzdHlsZSYmYS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJzdHJva2UtZGFzaGFycmF5Iix0aGlzLmRhc2hTdHlsZShiLGQpKSk6YS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJzdHJva2UiLCJub25lIik7Yi5wb2ludGVyRXZlbnRzJiYKYS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJwb2ludGVyLWV2ZW50cyIsYi5wb2ludGVyRXZlbnRzKTtudWxsIT1iLmN1cnNvciYmYS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJjdXJzb3IiLGIuY3Vyc29yKTtyZXR1cm4gYX0sZGFzaFN0eWxlOmZ1bmN0aW9uKGEsYil7dmFyIGM9YS5zdHJva2VXaWR0aCpiLGQ9YS5zdHJva2VEYXNoc3R5bGU7c3dpdGNoKGQpe2Nhc2UgInNvbGlkIjpyZXR1cm4ibm9uZSI7Y2FzZSAiZG90IjpyZXR1cm5bMSw0KmNdLmpvaW4oKTtjYXNlICJkYXNoIjpyZXR1cm5bNCpjLDQqY10uam9pbigpO2Nhc2UgImRhc2hkb3QiOnJldHVybls0KmMsNCpjLDEsNCpjXS5qb2luKCk7Y2FzZSAibG9uZ2Rhc2giOnJldHVybls4KmMsNCpjXS5qb2luKCk7Y2FzZSAibG9uZ2Rhc2hkb3QiOnJldHVybls4KmMsNCpjLDEsNCpjXS5qb2luKCk7ZGVmYXVsdDpyZXR1cm4gT3BlbkxheWVycy5TdHJpbmcudHJpbShkKS5yZXBsYWNlKC9ccysvZywiLCIpfX0sY3JlYXRlTm9kZTpmdW5jdGlvbihhLApiKXt2YXIgYz1kb2N1bWVudC5jcmVhdGVFbGVtZW50TlModGhpcy54bWxucyxhKTtiJiZjLnNldEF0dHJpYnV0ZU5TKG51bGwsImlkIixiKTtyZXR1cm4gY30sbm9kZVR5cGVDb21wYXJlOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGI9PWEubm9kZU5hbWV9LGNyZWF0ZVJlbmRlclJvb3Q6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm5vZGVGYWN0b3J5KHRoaXMuY29udGFpbmVyLmlkKyJfc3ZnUm9vdCIsInN2ZyIpO2Euc3R5bGUuZGlzcGxheT0iYmxvY2siO3JldHVybiBhfSxjcmVhdGVSb290OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLm5vZGVGYWN0b3J5KHRoaXMuY29udGFpbmVyLmlkK2EsImciKX0sY3JlYXRlRGVmczpmdW5jdGlvbigpe3ZhciBhPXRoaXMubm9kZUZhY3RvcnkodGhpcy5jb250YWluZXIuaWQrIl9kZWZzIiwiZGVmcyIpO3RoaXMucmVuZGVyZXJSb290LmFwcGVuZENoaWxkKGEpO3JldHVybiBhfSxkcmF3UG9pbnQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5kcmF3Q2lyY2xlKGEsCmIsMSl9LGRyYXdDaXJjbGU6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXRoaXMuZ2V0UmVzb2x1dGlvbigpLGU9KGIueC10aGlzLmZlYXR1cmVEeCkvZCt0aGlzLmxlZnQ7Yj10aGlzLnRvcC1iLnkvZDtyZXR1cm4gdGhpcy5pblZhbGlkUmFuZ2UoZSxiKT8oYS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJjeCIsZSksYS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJjeSIsYiksYS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJyIixjKSxhKTohMX0sZHJhd0xpbmVTdHJpbmc6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmdldENvbXBvbmVudHNTdHJpbmcoYi5jb21wb25lbnRzKTtyZXR1cm4gYy5wYXRoPyhhLnNldEF0dHJpYnV0ZU5TKG51bGwsInBvaW50cyIsYy5wYXRoKSxjLmNvbXBsZXRlP2E6bnVsbCk6ITF9LGRyYXdMaW5lYXJSaW5nOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5nZXRDb21wb25lbnRzU3RyaW5nKGIuY29tcG9uZW50cyk7cmV0dXJuIGMucGF0aD8oYS5zZXRBdHRyaWJ1dGVOUyhudWxsLAoicG9pbnRzIixjLnBhdGgpLGMuY29tcGxldGU/YTpudWxsKTohMX0sZHJhd1BvbHlnb246ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9IiIsZD0hMCxlPSEwLGYsZyxoPTAsaz1iLmNvbXBvbmVudHMubGVuZ3RoO2g8aztoKyspYys9IiBNIixmPXRoaXMuZ2V0Q29tcG9uZW50c1N0cmluZyhiLmNvbXBvbmVudHNbaF0uY29tcG9uZW50cywiICIpLChnPWYucGF0aCk/KGMrPSIgIitnLGU9Zi5jb21wbGV0ZSYmZSk6ZD0hMTtyZXR1cm4gZD8oYS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJkIixjKyIgeiIpLGEuc2V0QXR0cmlidXRlTlMobnVsbCwiZmlsbC1ydWxlIiwiZXZlbm9kZCIpLGU/YTpudWxsKTohMX0sZHJhd1JlY3RhbmdsZTpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuZ2V0UmVzb2x1dGlvbigpLGQ9KGIueC10aGlzLmZlYXR1cmVEeCkvYyt0aGlzLmxlZnQsZT10aGlzLnRvcC1iLnkvYztyZXR1cm4gdGhpcy5pblZhbGlkUmFuZ2UoZCxlKT8oYS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJ4IiwKZCksYS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJ5IixlKSxhLnNldEF0dHJpYnV0ZU5TKG51bGwsIndpZHRoIixiLndpZHRoL2MpLGEuc2V0QXR0cmlidXRlTlMobnVsbCwiaGVpZ2h0IixiLmhlaWdodC9jKSxhKTohMX0sZHJhd1RleHQ6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPSEhYi5sYWJlbE91dGxpbmVXaWR0aDtpZihkKXt2YXIgZT1PcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHt9LGIpO2UuZm9udENvbG9yPWUubGFiZWxPdXRsaW5lQ29sb3I7ZS5mb250U3Ryb2tlQ29sb3I9ZS5sYWJlbE91dGxpbmVDb2xvcjtlLmZvbnRTdHJva2VXaWR0aD1iLmxhYmVsT3V0bGluZVdpZHRoO2IubGFiZWxPdXRsaW5lT3BhY2l0eSYmKGUuZm9udE9wYWNpdHk9Yi5sYWJlbE91dGxpbmVPcGFjaXR5KTtkZWxldGUgZS5sYWJlbE91dGxpbmVXaWR0aDt0aGlzLmRyYXdUZXh0KGEsZSxjKX12YXIgZj10aGlzLmdldFJlc29sdXRpb24oKSxlPShjLngtdGhpcy5mZWF0dXJlRHgpL2YrdGhpcy5sZWZ0LGc9Yy55LwpmLXRoaXMudG9wLGQ9ZD90aGlzLkxBQkVMX09VVExJTkVfU1VGRklYOnRoaXMuTEFCRUxfSURfU1VGRklYLGY9dGhpcy5ub2RlRmFjdG9yeShhK2QsInRleHQiKTtmLnNldEF0dHJpYnV0ZU5TKG51bGwsIngiLGUpO2Yuc2V0QXR0cmlidXRlTlMobnVsbCwieSIsLWcpO2IuZm9udENvbG9yJiZmLnNldEF0dHJpYnV0ZU5TKG51bGwsImZpbGwiLGIuZm9udENvbG9yKTtiLmZvbnRTdHJva2VDb2xvciYmZi5zZXRBdHRyaWJ1dGVOUyhudWxsLCJzdHJva2UiLGIuZm9udFN0cm9rZUNvbG9yKTtiLmZvbnRTdHJva2VXaWR0aCYmZi5zZXRBdHRyaWJ1dGVOUyhudWxsLCJzdHJva2Utd2lkdGgiLGIuZm9udFN0cm9rZVdpZHRoKTtiLmZvbnRPcGFjaXR5JiZmLnNldEF0dHJpYnV0ZU5TKG51bGwsIm9wYWNpdHkiLGIuZm9udE9wYWNpdHkpO2IuZm9udEZhbWlseSYmZi5zZXRBdHRyaWJ1dGVOUyhudWxsLCJmb250LWZhbWlseSIsYi5mb250RmFtaWx5KTtiLmZvbnRTaXplJiZmLnNldEF0dHJpYnV0ZU5TKG51bGwsCiJmb250LXNpemUiLGIuZm9udFNpemUpO2IuZm9udFdlaWdodCYmZi5zZXRBdHRyaWJ1dGVOUyhudWxsLCJmb250LXdlaWdodCIsYi5mb250V2VpZ2h0KTtiLmZvbnRTdHlsZSYmZi5zZXRBdHRyaWJ1dGVOUyhudWxsLCJmb250LXN0eWxlIixiLmZvbnRTdHlsZSk7ITA9PT1iLmxhYmVsU2VsZWN0PyhmLnNldEF0dHJpYnV0ZU5TKG51bGwsInBvaW50ZXItZXZlbnRzIiwidmlzaWJsZSIpLGYuX2ZlYXR1cmVJZD1hKTpmLnNldEF0dHJpYnV0ZU5TKG51bGwsInBvaW50ZXItZXZlbnRzIiwibm9uZSIpO2c9Yi5sYWJlbEFsaWdufHxPcGVuTGF5ZXJzLlJlbmRlcmVyLmRlZmF1bHRTeW1ib2xpemVyLmxhYmVsQWxpZ247Zi5zZXRBdHRyaWJ1dGVOUyhudWxsLCJ0ZXh0LWFuY2hvciIsT3BlbkxheWVycy5SZW5kZXJlci5TVkcuTEFCRUxfQUxJR05bZ1swXV18fCJtaWRkbGUiKTshMD09PU9wZW5MYXllcnMuSVNfR0VDS08mJmYuc2V0QXR0cmlidXRlTlMobnVsbCwiZG9taW5hbnQtYmFzZWxpbmUiLApPcGVuTGF5ZXJzLlJlbmRlcmVyLlNWRy5MQUJFTF9BTElHTltnWzFdXXx8ImNlbnRyYWwiKTtmb3IodmFyIGg9Yi5sYWJlbC5zcGxpdCgiXG4iKSxrPWgubGVuZ3RoO2YuY2hpbGROb2Rlcy5sZW5ndGg+azspZi5yZW1vdmVDaGlsZChmLmxhc3RDaGlsZCk7Zm9yKHZhciBsPTA7bDxrO2wrKyl7dmFyIG09dGhpcy5ub2RlRmFjdG9yeShhK2QrIl90c3Bhbl8iK2wsInRzcGFuIik7ITA9PT1iLmxhYmVsU2VsZWN0JiYobS5fZmVhdHVyZUlkPWEsbS5fZ2VvbWV0cnk9YyxtLl9nZW9tZXRyeUNsYXNzPWMuQ0xBU1NfTkFNRSk7ITE9PT1PcGVuTGF5ZXJzLklTX0dFQ0tPJiZtLnNldEF0dHJpYnV0ZU5TKG51bGwsImJhc2VsaW5lLXNoaWZ0IixPcGVuTGF5ZXJzLlJlbmRlcmVyLlNWRy5MQUJFTF9WU0hJRlRbZ1sxXV18fCItMzUlIik7bS5zZXRBdHRyaWJ1dGUoIngiLGUpO2lmKDA9PWwpe3ZhciBuPU9wZW5MYXllcnMuUmVuZGVyZXIuU1ZHLkxBQkVMX1ZGQUNUT1JbZ1sxXV07bnVsbD09biYmCihuPS0wLjUpO20uc2V0QXR0cmlidXRlKCJkeSIsbiooay0xKSsiZW0iKX1lbHNlIG0uc2V0QXR0cmlidXRlKCJkeSIsIjFlbSIpO20udGV4dENvbnRlbnQ9IiI9PT1oW2xdPyIgIjpoW2xdO20ucGFyZW50Tm9kZXx8Zi5hcHBlbmRDaGlsZChtKX1mLnBhcmVudE5vZGV8fHRoaXMudGV4dFJvb3QuYXBwZW5kQ2hpbGQoZil9LGdldENvbXBvbmVudHNTdHJpbmc6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9W10sZD0hMCxlPWEubGVuZ3RoLGY9W10sZyxoPTA7aDxlO2grKylnPWFbaF0sYy5wdXNoKGcpLChnPXRoaXMuZ2V0U2hvcnRTdHJpbmcoZykpP2YucHVzaChnKTooMDxoJiZ0aGlzLmdldFNob3J0U3RyaW5nKGFbaC0xXSkmJmYucHVzaCh0aGlzLmNsaXBMaW5lKGFbaF0sYVtoLTFdKSksaDxlLTEmJnRoaXMuZ2V0U2hvcnRTdHJpbmcoYVtoKzFdKSYmZi5wdXNoKHRoaXMuY2xpcExpbmUoYVtoXSxhW2grMV0pKSxkPSExKTtyZXR1cm57cGF0aDpmLmpvaW4oYnx8IiwiKSxjb21wbGV0ZTpkfX0sCmNsaXBMaW5lOmZ1bmN0aW9uKGEsYil7aWYoYi5lcXVhbHMoYSkpcmV0dXJuIiI7dmFyIGM9dGhpcy5nZXRSZXNvbHV0aW9uKCksZD10aGlzLk1BWF9QSVhFTC10aGlzLnRyYW5zbGF0aW9uUGFyYW1ldGVycy54LGU9dGhpcy5NQVhfUElYRUwtdGhpcy50cmFuc2xhdGlvblBhcmFtZXRlcnMueSxmPShiLngtdGhpcy5mZWF0dXJlRHgpL2MrdGhpcy5sZWZ0LGc9dGhpcy50b3AtYi55L2MsaD0oYS54LXRoaXMuZmVhdHVyZUR4KS9jK3RoaXMubGVmdCxjPXRoaXMudG9wLWEueS9jLGs7aWYoaDwtZHx8aD5kKWs9KGMtZykvKGgtZiksaD0wPmg/LWQ6ZCxjPWcrKGgtZikqaztpZihjPC1lfHxjPmUpaz0oaC1mKS8oYy1nKSxjPTA+Yz8tZTplLGg9ZisoYy1nKSprO3JldHVybiBoKyIsIitjfSxnZXRTaG9ydFN0cmluZzpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmdldFJlc29sdXRpb24oKSxjPShhLngtdGhpcy5mZWF0dXJlRHgpL2IrdGhpcy5sZWZ0O2E9dGhpcy50b3AtYS55L2I7cmV0dXJuIHRoaXMuaW5WYWxpZFJhbmdlKGMsCmEpP2MrIiwiK2E6ITF9LGdldFBvc2l0aW9uOmZ1bmN0aW9uKGEpe3JldHVybnt4OnBhcnNlRmxvYXQoYS5nZXRBdHRyaWJ1dGVOUyhudWxsLCJjeCIpKSx5OnBhcnNlRmxvYXQoYS5nZXRBdHRyaWJ1dGVOUyhudWxsLCJjeSIpKX19LGltcG9ydFN5bWJvbDpmdW5jdGlvbihhKXt0aGlzLmRlZnN8fCh0aGlzLmRlZnM9dGhpcy5jcmVhdGVEZWZzKCkpO3ZhciBiPXRoaXMuY29udGFpbmVyLmlkKyItIithLGM9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYik7aWYobnVsbCE9YylyZXR1cm4gYzt2YXIgZD1PcGVuTGF5ZXJzLlJlbmRlcmVyLnN5bWJvbFthXTtpZighZCl0aHJvdyBFcnJvcihhKyIgaXMgbm90IGEgdmFsaWQgc3ltYm9sIG5hbWUiKTthPXRoaXMubm9kZUZhY3RvcnkoYiwic3ltYm9sIik7dmFyIGU9dGhpcy5ub2RlRmFjdG9yeShudWxsLCJwb2x5Z29uIik7YS5hcHBlbmRDaGlsZChlKTtmb3IodmFyIGM9bmV3IE9wZW5MYXllcnMuQm91bmRzKE51bWJlci5NQVhfVkFMVUUsTnVtYmVyLk1BWF9WQUxVRSwKMCwwKSxmPVtdLGcsaCxrPTA7azxkLmxlbmd0aDtrKz0yKWc9ZFtrXSxoPWRbaysxXSxjLmxlZnQ9TWF0aC5taW4oYy5sZWZ0LGcpLGMuYm90dG9tPU1hdGgubWluKGMuYm90dG9tLGgpLGMucmlnaHQ9TWF0aC5tYXgoYy5yaWdodCxnKSxjLnRvcD1NYXRoLm1heChjLnRvcCxoKSxmLnB1c2goZywiLCIsaCk7ZS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJwb2ludHMiLGYuam9pbigiICIpKTtkPWMuZ2V0V2lkdGgoKTtlPWMuZ2V0SGVpZ2h0KCk7YS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJ2aWV3Qm94IixbYy5sZWZ0LWQsYy5ib3R0b20tZSwzKmQsMyplXS5qb2luKCIgIikpO3RoaXMuc3ltYm9sTWV0cmljc1tiXT1bTWF0aC5tYXgoZCxlKSxjLmdldENlbnRlckxvbkxhdCgpLmxvbixjLmdldENlbnRlckxvbkxhdCgpLmxhdF07dGhpcy5kZWZzLmFwcGVuZENoaWxkKGEpO3JldHVybiBhfSxnZXRGZWF0dXJlSWRGcm9tRXZlbnQ6ZnVuY3Rpb24oYSl7dmFyIGI9T3BlbkxheWVycy5SZW5kZXJlci5FbGVtZW50cy5wcm90b3R5cGUuZ2V0RmVhdHVyZUlkRnJvbUV2ZW50LmFwcGx5KHRoaXMsCmFyZ3VtZW50cyk7Ynx8KGI9YS50YXJnZXQsYj1iLnBhcmVudE5vZGUmJmIhPXRoaXMucmVuZGVyZXJSb290P2IucGFyZW50Tm9kZS5fZmVhdHVyZUlkOnZvaWQgMCk7cmV0dXJuIGJ9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuUmVuZGVyZXIuU1ZHIn0pO09wZW5MYXllcnMuUmVuZGVyZXIuU1ZHLkxBQkVMX0FMSUdOPXtsOiJzdGFydCIscjoiZW5kIixiOiJib3R0b20iLHQ6ImhhbmdpbmcifTtPcGVuTGF5ZXJzLlJlbmRlcmVyLlNWRy5MQUJFTF9WU0hJRlQ9e3Q6Ii03MCUiLGI6IjAifTtPcGVuTGF5ZXJzLlJlbmRlcmVyLlNWRy5MQUJFTF9WRkFDVE9SPXt0OjAsYjotMX07T3BlbkxheWVycy5SZW5kZXJlci5TVkcucHJldmVudERlZmF1bHQ9ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5FdmVudC5wcmV2ZW50RGVmYXVsdChhKX07T3BlbkxheWVycy5Gb3JtYXQuU0xELnYxXzBfMD1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuRm9ybWF0LlNMRC52MSx7VkVSU0lPTjoiMS4wLjAiLHNjaGVtYUxvY2F0aW9uOiJodHRwOi8vd3d3Lm9wZW5naXMubmV0L3NsZCBodHRwOi8vc2NoZW1hcy5vcGVuZ2lzLm5ldC9zbGQvMS4wLjAvU3R5bGVkTGF5ZXJEZXNjcmlwdG9yLnhzZCIsQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Gb3JtYXQuU0xELnYxXzBfMCJ9KTtPcGVuTGF5ZXJzLkZvcm1hdC5PV1NDb250ZXh0PU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Gb3JtYXQuQ29udGV4dCx7ZGVmYXVsdFZlcnNpb246IjAuMy4xIixnZXRWZXJzaW9uOmZ1bmN0aW9uKGEsYil7dmFyIGM9T3BlbkxheWVycy5Gb3JtYXQuWE1MLlZlcnNpb25lZE9HQy5wcm90b3R5cGUuZ2V0VmVyc2lvbi5hcHBseSh0aGlzLGFyZ3VtZW50cyk7IjAuMy4wIj09PWMmJihjPXRoaXMuZGVmYXVsdFZlcnNpb24pO3JldHVybiBjfSx0b0NvbnRleHQ6ZnVuY3Rpb24oYSl7dmFyIGI9e307Ik9wZW5MYXllcnMuTWFwIj09YS5DTEFTU19OQU1FJiYoYi5ib3VuZHM9YS5nZXRFeHRlbnQoKSxiLm1heEV4dGVudD1hLm1heEV4dGVudCxiLnByb2plY3Rpb249YS5wcm9qZWN0aW9uLGIuc2l6ZT1hLmdldFNpemUoKSxiLmxheWVycz1hLmxheWVycyk7cmV0dXJuIGJ9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuRm9ybWF0Lk9XU0NvbnRleHQifSk7T3BlbkxheWVycy5Gb3JtYXQuT1dTQ29udGV4dC52MF8zXzE9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkZvcm1hdC5YTUwse25hbWVzcGFjZXM6e293YzoiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9vd3MtY29udGV4dCIsZ21sOiJodHRwOi8vd3d3Lm9wZW5naXMubmV0L2dtbCIsa21sOiJodHRwOi8vd3d3Lm9wZW5naXMubmV0L2ttbC8yLjIiLG9nYzoiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9vZ2MiLG93czoiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9vd3MiLHNsZDoiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9zbGQiLHhsaW5rOiJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIix4c2k6Imh0dHA6Ly93d3cudzMub3JnLzIwMDEvWE1MU2NoZW1hLWluc3RhbmNlIn0sVkVSU0lPTjoiMC4zLjEiLHNjaGVtYUxvY2F0aW9uOiJodHRwOi8vd3d3Lm9wZW5naXMubmV0L293cy1jb250ZXh0IGh0dHA6Ly93d3cub2djbmV0d29yay5uZXQvc2NoZW1hcy9vd2MvMC4zLjEvb3dzQ29udGV4dC54c2QiLApkZWZhdWx0UHJlZml4OiJvd2MiLGV4dHJhY3RBdHRyaWJ1dGVzOiEwLHh5OiEwLHJlZ0V4ZXM6e3RyaW1TcGFjZTovXlxzKnxccyokL2cscmVtb3ZlU3BhY2U6L1xzKi9nLHNwbGl0U3BhY2U6L1xzKy8sdHJpbUNvbW1hOi9ccyosXHMqL2d9LGZlYXR1cmVOUzoiaHR0cDovL21hcHNlcnZlci5naXMudW1uLmVkdS9tYXBzZXJ2ZXIiLGZlYXR1cmVUeXBlOiJ2ZWN0b3IiLGdlb21ldHJ5TmFtZToiZ2VvbWV0cnkiLG5lc3RpbmdMYXllckxvb2t1cDpudWxsLGluaXRpYWxpemU6ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5Gb3JtYXQuWE1MLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsW2FdKTtPcGVuTGF5ZXJzLkZvcm1hdC5HTUwudjIucHJvdG90eXBlLnNldEdlb21ldHJ5VHlwZXMuY2FsbCh0aGlzKX0sc2V0TmVzdGluZ1BhdGg6ZnVuY3Rpb24oYSl7aWYoYS5sYXllcnNDb250ZXh0KWZvcih2YXIgYj0wLGM9YS5sYXllcnNDb250ZXh0Lmxlbmd0aDtiPGM7YisrKXt2YXIgZD0KYS5sYXllcnNDb250ZXh0W2JdLGU9W10sZj1hLnRpdGxlfHwiIjthLm1ldGFkYXRhJiZhLm1ldGFkYXRhLm5lc3RpbmdQYXRoJiYoZT1hLm1ldGFkYXRhLm5lc3RpbmdQYXRoLnNsaWNlKCkpOyIiIT1mJiZlLnB1c2goZik7ZC5tZXRhZGF0YS5uZXN0aW5nUGF0aD1lO2QubGF5ZXJzQ29udGV4dCYmdGhpcy5zZXROZXN0aW5nUGF0aChkKX19LGRlY29tcG9zZU5lc3RpbmdQYXRoOmZ1bmN0aW9uKGEpe3ZhciBiPVtdO2lmKE9wZW5MYXllcnMuVXRpbC5pc0FycmF5KGEpKXtmb3IoYT1hLnNsaWNlKCk7MDxhLmxlbmd0aDspYi5wdXNoKGEuc2xpY2UoKSksYS5wb3AoKTtiLnJldmVyc2UoKX1yZXR1cm4gYn0scmVhZDpmdW5jdGlvbihhKXsic3RyaW5nIj09dHlwZW9mIGEmJihhPU9wZW5MYXllcnMuRm9ybWF0LlhNTC5wcm90b3R5cGUucmVhZC5hcHBseSh0aGlzLFthXSkpO2EmJjk9PWEubm9kZVR5cGUmJihhPWEuZG9jdW1lbnRFbGVtZW50KTt2YXIgYj17fTt0aGlzLnJlYWROb2RlKGEsCmIpO3RoaXMuc2V0TmVzdGluZ1BhdGgoe2xheWVyc0NvbnRleHQ6Yi5sYXllcnNDb250ZXh0fSk7YT1bXTt0aGlzLnByb2Nlc3NMYXllcihhLGIpO2RlbGV0ZSBiLmxheWVyc0NvbnRleHQ7Yi5sYXllcnNDb250ZXh0PWE7cmV0dXJuIGJ9LHByb2Nlc3NMYXllcjpmdW5jdGlvbihhLGIpe2lmKGIubGF5ZXJzQ29udGV4dClmb3IodmFyIGM9MCxkPWIubGF5ZXJzQ29udGV4dC5sZW5ndGg7YzxkO2MrKyl7dmFyIGU9Yi5sYXllcnNDb250ZXh0W2NdO2EucHVzaChlKTtlLmxheWVyc0NvbnRleHQmJnRoaXMucHJvY2Vzc0xheWVyKGEsZSl9fSx3cml0ZTpmdW5jdGlvbihhLGIpe3RoaXMubmVzdGluZ0xheWVyTG9va3VwPXt9O2I9Ynx8e307T3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoYixhKTt2YXIgYz10aGlzLndyaXRlTm9kZSgiT1dTQ29udGV4dCIsYik7dGhpcy5uZXN0aW5nTGF5ZXJMb29rdXA9bnVsbDt0aGlzLnNldEF0dHJpYnV0ZU5TKGMsdGhpcy5uYW1lc3BhY2VzLnhzaSwKInhzaTpzY2hlbWFMb2NhdGlvbiIsdGhpcy5zY2hlbWFMb2NhdGlvbik7cmV0dXJuIE9wZW5MYXllcnMuRm9ybWF0LlhNTC5wcm90b3R5cGUud3JpdGUuYXBwbHkodGhpcyxbY10pfSxyZWFkZXJzOntrbWw6e0RvY3VtZW50OmZ1bmN0aW9uKGEsYil7Yi5mZWF0dXJlcz0obmV3IE9wZW5MYXllcnMuRm9ybWF0LktNTCh7a21sbnM6dGhpcy5uYW1lc3BhY2VzLmttbCxleHRyYWN0U3R5bGVzOiEwfSkpLnJlYWQoYSl9fSxvd2M6e09XU0NvbnRleHQ6ZnVuY3Rpb24oYSxiKXt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYil9LEdlbmVyYWw6ZnVuY3Rpb24oYSxiKXt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYil9LFJlc291cmNlTGlzdDpmdW5jdGlvbihhLGIpe3RoaXMucmVhZENoaWxkTm9kZXMoYSxiKX0sTGF5ZXI6ZnVuY3Rpb24oYSxiKXt2YXIgYz17bWV0YWRhdGE6e30sdmlzaWJpbGl0eToiMSIhPWEuZ2V0QXR0cmlidXRlKCJoaWRkZW4iKSxxdWVyeWFibGU6IjEiPT1hLmdldEF0dHJpYnV0ZSgicXVlcnlhYmxlIiksCm9wYWNpdHk6bnVsbCE9YS5nZXRBdHRyaWJ1dGUoIm9wYWNpdHkiKT9wYXJzZUZsb2F0KGEuZ2V0QXR0cmlidXRlKCJvcGFjaXR5IikpOm51bGwsbmFtZTphLmdldEF0dHJpYnV0ZSgibmFtZSIpLGNhdGVnb3J5TGF5ZXI6bnVsbD09YS5nZXRBdHRyaWJ1dGUoIm5hbWUiKSxmb3JtYXRzOltdLHN0eWxlczpbXX07Yi5sYXllcnNDb250ZXh0fHwoYi5sYXllcnNDb250ZXh0PVtdKTtiLmxheWVyc0NvbnRleHQucHVzaChjKTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYyl9LElubGluZUdlb21ldHJ5OmZ1bmN0aW9uKGEsYil7Yi5mZWF0dXJlcz1bXTt2YXIgYz10aGlzLmdldEVsZW1lbnRzQnlUYWdOYW1lTlMoYSx0aGlzLm5hbWVzcGFjZXMuZ21sLCJmZWF0dXJlTWVtYmVyIiksZDsxPD1jLmxlbmd0aCYmKGQ9Y1swXSk7ZCYmZC5maXJzdENoaWxkJiYoYz1kLmZpcnN0Q2hpbGQubmV4dFNpYmxpbmc/ZC5maXJzdENoaWxkLm5leHRTaWJsaW5nOmQuZmlyc3RDaGlsZCx0aGlzLnNldE5hbWVzcGFjZSgiZmVhdHVyZSIsCmMubmFtZXNwYWNlVVJJKSx0aGlzLmZlYXR1cmVUeXBlPWMubG9jYWxOYW1lfHxjLm5vZGVOYW1lLnNwbGl0KCI6IikucG9wKCksdGhpcy5yZWFkQ2hpbGROb2RlcyhhLGIpKX0sU2VydmVyOmZ1bmN0aW9uKGEsYil7aWYoIWIuc2VydmljZSYmIWIudmVyc2lvbnx8Yi5zZXJ2aWNlIT1PcGVuTGF5ZXJzLkZvcm1hdC5Db250ZXh0LnNlcnZpY2VUeXBlcy5XTVMpYi5zZXJ2aWNlPWEuZ2V0QXR0cmlidXRlKCJzZXJ2aWNlIiksYi52ZXJzaW9uPWEuZ2V0QXR0cmlidXRlKCJ2ZXJzaW9uIiksdGhpcy5yZWFkQ2hpbGROb2RlcyhhLGIpfSxOYW1lOmZ1bmN0aW9uKGEsYil7Yi5uYW1lPXRoaXMuZ2V0Q2hpbGRWYWx1ZShhKTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYil9LFRpdGxlOmZ1bmN0aW9uKGEsYil7Yi50aXRsZT10aGlzLmdldENoaWxkVmFsdWUoYSk7dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGIpfSxTdHlsZUxpc3Q6ZnVuY3Rpb24oYSxiKXt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYi5zdHlsZXMpfSwKU3R5bGU6ZnVuY3Rpb24oYSxiKXt2YXIgYz17fTtiLnB1c2goYyk7dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGMpfSxMZWdlbmRVUkw6ZnVuY3Rpb24oYSxiKXt2YXIgYz17fTtiLmxlZ2VuZD1jO3RoaXMucmVhZENoaWxkTm9kZXMoYSxjKX0sT25saW5lUmVzb3VyY2U6ZnVuY3Rpb24oYSxiKXtiLnVybD10aGlzLmdldEF0dHJpYnV0ZU5TKGEsdGhpcy5uYW1lc3BhY2VzLnhsaW5rLCJocmVmIik7dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGIpfX0sb3dzOk9wZW5MYXllcnMuRm9ybWF0Lk9XU0NvbW1vbi52MV8wXzAucHJvdG90eXBlLnJlYWRlcnMub3dzLGdtbDpPcGVuTGF5ZXJzLkZvcm1hdC5HTUwudjIucHJvdG90eXBlLnJlYWRlcnMuZ21sLHNsZDpPcGVuTGF5ZXJzLkZvcm1hdC5TTEQudjFfMF8wLnByb3RvdHlwZS5yZWFkZXJzLnNsZCxmZWF0dXJlOk9wZW5MYXllcnMuRm9ybWF0LkdNTC52Mi5wcm90b3R5cGUucmVhZGVycy5mZWF0dXJlfSx3cml0ZXJzOntvd2M6e09XU0NvbnRleHQ6ZnVuY3Rpb24oYSl7dmFyIGI9CnRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygiT1dTQ29udGV4dCIse2F0dHJpYnV0ZXM6e3ZlcnNpb246dGhpcy5WRVJTSU9OLGlkOmEuaWR8fE9wZW5MYXllcnMuVXRpbC5jcmVhdGVVbmlxdWVJRCgiT3BlbkxheWVyc19PV1NDb250ZXh0XyIpfX0pO3RoaXMud3JpdGVOb2RlKCJHZW5lcmFsIixhLGIpO3RoaXMud3JpdGVOb2RlKCJSZXNvdXJjZUxpc3QiLGEsYik7cmV0dXJuIGJ9LEdlbmVyYWw6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJHZW5lcmFsIik7dGhpcy53cml0ZU5vZGUoIm93czpCb3VuZGluZ0JveCIsYSxiKTt0aGlzLndyaXRlTm9kZSgib3dzOlRpdGxlIixhLnRpdGxlfHwiT3BlbkxheWVycyBPV1NDb250ZXh0IixiKTtyZXR1cm4gYn0sUmVzb3VyY2VMaXN0OmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoIlJlc291cmNlTGlzdCIpLGM9MCxkPWEubGF5ZXJzLmxlbmd0aDtjPGQ7YysrKXt2YXIgZT0KYS5sYXllcnNbY10sZj10aGlzLmRlY29tcG9zZU5lc3RpbmdQYXRoKGUubWV0YWRhdGEubmVzdGluZ1BhdGgpO3RoaXMud3JpdGVOb2RlKCJfTGF5ZXIiLHtsYXllcjplLHN1YlBhdGhzOmZ9LGIpfXJldHVybiBifSxTZXJ2ZXI6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJTZXJ2ZXIiLHthdHRyaWJ1dGVzOnt2ZXJzaW9uOmEudmVyc2lvbixzZXJ2aWNlOmEuc2VydmljZX19KTt0aGlzLndyaXRlTm9kZSgiT25saW5lUmVzb3VyY2UiLGEsYik7cmV0dXJuIGJ9LE9ubGluZVJlc291cmNlOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoIk9ubGluZVJlc291cmNlIix7YXR0cmlidXRlczp7InhsaW5rOmhyZWYiOmEudXJsfX0pfSxJbmxpbmVHZW9tZXRyeTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoIklubGluZUdlb21ldHJ5IiksYz1hLmdldERhdGFFeHRlbnQoKTtudWxsIT09YyYmdGhpcy53cml0ZU5vZGUoImdtbDpib3VuZGVkQnkiLApjLGIpO2Zvcih2YXIgYz0wLGQ9YS5mZWF0dXJlcy5sZW5ndGg7YzxkO2MrKyl0aGlzLndyaXRlTm9kZSgiZ21sOmZlYXR1cmVNZW1iZXIiLGEuZmVhdHVyZXNbY10sYik7cmV0dXJuIGJ9LFN0eWxlTGlzdDpmdW5jdGlvbihhKXtmb3IodmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJTdHlsZUxpc3QiKSxjPTAsZD1hLmxlbmd0aDtjPGQ7YysrKXRoaXMud3JpdGVOb2RlKCJTdHlsZSIsYVtjXSxiKTtyZXR1cm4gYn0sU3R5bGU6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJTdHlsZSIpO3RoaXMud3JpdGVOb2RlKCJOYW1lIixhLGIpO3RoaXMud3JpdGVOb2RlKCJUaXRsZSIsYSxiKTthLmxlZ2VuZCYmdGhpcy53cml0ZU5vZGUoIkxlZ2VuZFVSTCIsYSxiKTtyZXR1cm4gYn0sTmFtZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJOYW1lIix7dmFsdWU6YS5uYW1lfSl9LFRpdGxlOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoIlRpdGxlIiwKe3ZhbHVlOmEudGl0bGV9KX0sTGVnZW5kVVJMOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygiTGVnZW5kVVJMIik7dGhpcy53cml0ZU5vZGUoIk9ubGluZVJlc291cmNlIixhLmxlZ2VuZCxiKTtyZXR1cm4gYn0sX1dNUzpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoIkxheWVyIix7YXR0cmlidXRlczp7bmFtZTphLnBhcmFtcy5MQVlFUlMscXVlcnlhYmxlOmEucXVlcnlhYmxlPyIxIjoiMCIsaGlkZGVuOmEudmlzaWJpbGl0eT8iMCI6IjEiLG9wYWNpdHk6YS5oYXNPd25Qcm9wZXJ0eSgib3BhY2l0eSIpP2Eub3BhY2l0eTpudWxsfX0pO3RoaXMud3JpdGVOb2RlKCJvd3M6VGl0bGUiLGEubmFtZSxiKTt0aGlzLndyaXRlTm9kZSgib3dzOk91dHB1dEZvcm1hdCIsYS5wYXJhbXMuRk9STUFULGIpO3RoaXMud3JpdGVOb2RlKCJTZXJ2ZXIiLHtzZXJ2aWNlOk9wZW5MYXllcnMuRm9ybWF0LkNvbnRleHQuc2VydmljZVR5cGVzLldNUywKdmVyc2lvbjphLnBhcmFtcy5WRVJTSU9OLHVybDphLnVybH0sYik7YS5tZXRhZGF0YS5zdHlsZXMmJjA8YS5tZXRhZGF0YS5zdHlsZXMubGVuZ3RoJiZ0aGlzLndyaXRlTm9kZSgiU3R5bGVMaXN0IixhLm1ldGFkYXRhLnN0eWxlcyxiKTtyZXR1cm4gYn0sX0xheWVyOmZ1bmN0aW9uKGEpe3ZhciBiLGMsZDtiPWEubGF5ZXI7Yz1hLnN1YlBhdGhzO2Q9bnVsbDswPGMubGVuZ3RoPyhiPWNbMF0uam9pbigiLyIpLGM9Yi5sYXN0SW5kZXhPZigiLyIpLGQ9dGhpcy5uZXN0aW5nTGF5ZXJMb29rdXBbYl0sYz0wPGM/Yi5zdWJzdHJpbmcoYysxLGIubGVuZ3RoKTpiLGR8fChkPXRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygiTGF5ZXIiKSx0aGlzLndyaXRlTm9kZSgib3dzOlRpdGxlIixjLGQpLHRoaXMubmVzdGluZ0xheWVyTG9va3VwW2JdPWQpLGEuc3ViUGF0aHMuc2hpZnQoKSx0aGlzLndyaXRlTm9kZSgiX0xheWVyIixhLGQpKTooYiBpbnN0YW5jZW9mIE9wZW5MYXllcnMuTGF5ZXIuV01TPwpkPXRoaXMud3JpdGVOb2RlKCJfV01TIixiKTpiIGluc3RhbmNlb2YgT3BlbkxheWVycy5MYXllci5WZWN0b3ImJihiLnByb3RvY29sIGluc3RhbmNlb2YgT3BlbkxheWVycy5Qcm90b2NvbC5XRlMudjE/ZD10aGlzLndyaXRlTm9kZSgiX1dGUyIsYik6Yi5wcm90b2NvbCBpbnN0YW5jZW9mIE9wZW5MYXllcnMuUHJvdG9jb2wuSFRUUD9iLnByb3RvY29sLmZvcm1hdCBpbnN0YW5jZW9mIE9wZW5MYXllcnMuRm9ybWF0LkdNTD8oYi5wcm90b2NvbC5mb3JtYXQudmVyc2lvbj0iMi4xLjIiLGQ9dGhpcy53cml0ZU5vZGUoIl9HTUwiLGIpKTpiLnByb3RvY29sLmZvcm1hdCBpbnN0YW5jZW9mIE9wZW5MYXllcnMuRm9ybWF0LktNTCYmKGIucHJvdG9jb2wuZm9ybWF0LnZlcnNpb249IjIuMiIsZD10aGlzLndyaXRlTm9kZSgiX0tNTCIsYikpOih0aGlzLnNldE5hbWVzcGFjZSgiZmVhdHVyZSIsdGhpcy5mZWF0dXJlTlMpLGQ9dGhpcy53cml0ZU5vZGUoIl9JbmxpbmVHZW9tZXRyeSIsYikpKSwKYi5vcHRpb25zLm1heFNjYWxlJiZ0aGlzLndyaXRlTm9kZSgic2xkOk1pblNjYWxlRGVub21pbmF0b3IiLGIub3B0aW9ucy5tYXhTY2FsZSxkKSxiLm9wdGlvbnMubWluU2NhbGUmJnRoaXMud3JpdGVOb2RlKCJzbGQ6TWF4U2NhbGVEZW5vbWluYXRvciIsYi5vcHRpb25zLm1pblNjYWxlLGQpLHRoaXMubmVzdGluZ0xheWVyTG9va3VwW2IubmFtZV09ZCk7cmV0dXJuIGR9LF9XRlM6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJMYXllciIse2F0dHJpYnV0ZXM6e25hbWU6YS5wcm90b2NvbC5mZWF0dXJlUHJlZml4KyI6IithLnByb3RvY29sLmZlYXR1cmVUeXBlLGhpZGRlbjphLnZpc2liaWxpdHk/IjAiOiIxIn19KTt0aGlzLndyaXRlTm9kZSgib3dzOlRpdGxlIixhLm5hbWUsYik7dGhpcy53cml0ZU5vZGUoIlNlcnZlciIse3NlcnZpY2U6T3BlbkxheWVycy5Gb3JtYXQuQ29udGV4dC5zZXJ2aWNlVHlwZXMuV0ZTLHZlcnNpb246YS5wcm90b2NvbC52ZXJzaW9uLAp1cmw6YS5wcm90b2NvbC51cmx9LGIpO3JldHVybiBifSxfSW5saW5lR2VvbWV0cnk6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJMYXllciIse2F0dHJpYnV0ZXM6e25hbWU6dGhpcy5mZWF0dXJlVHlwZSxoaWRkZW46YS52aXNpYmlsaXR5PyIwIjoiMSJ9fSk7dGhpcy53cml0ZU5vZGUoIm93czpUaXRsZSIsYS5uYW1lLGIpO3RoaXMud3JpdGVOb2RlKCJJbmxpbmVHZW9tZXRyeSIsYSxiKTtyZXR1cm4gYn0sX0dNTDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoIkxheWVyIik7dGhpcy53cml0ZU5vZGUoIm93czpUaXRsZSIsYS5uYW1lLGIpO3RoaXMud3JpdGVOb2RlKCJTZXJ2ZXIiLHtzZXJ2aWNlOk9wZW5MYXllcnMuRm9ybWF0LkNvbnRleHQuc2VydmljZVR5cGVzLkdNTCx1cmw6YS5wcm90b2NvbC51cmwsdmVyc2lvbjphLnByb3RvY29sLmZvcm1hdC52ZXJzaW9ufSxiKTtyZXR1cm4gYn0sX0tNTDpmdW5jdGlvbihhKXt2YXIgYj0KdGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJMYXllciIpO3RoaXMud3JpdGVOb2RlKCJvd3M6VGl0bGUiLGEubmFtZSxiKTt0aGlzLndyaXRlTm9kZSgiU2VydmVyIix7c2VydmljZTpPcGVuTGF5ZXJzLkZvcm1hdC5Db250ZXh0LnNlcnZpY2VUeXBlcy5LTUwsdmVyc2lvbjphLnByb3RvY29sLmZvcm1hdC52ZXJzaW9uLHVybDphLnByb3RvY29sLnVybH0sYik7cmV0dXJuIGJ9fSxnbWw6T3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoe2JvdW5kZWRCeTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoImdtbDpib3VuZGVkQnkiKTt0aGlzLndyaXRlTm9kZSgiZ21sOkJveCIsYSxiKTtyZXR1cm4gYn19LE9wZW5MYXllcnMuRm9ybWF0LkdNTC52Mi5wcm90b3R5cGUud3JpdGVycy5nbWwpLG93czpPcGVuTGF5ZXJzLkZvcm1hdC5PV1NDb21tb24udjFfMF8wLnByb3RvdHlwZS53cml0ZXJzLm93cyxzbGQ6T3BlbkxheWVycy5Gb3JtYXQuU0xELnYxXzBfMC5wcm90b3R5cGUud3JpdGVycy5zbGQsCmZlYXR1cmU6T3BlbkxheWVycy5Gb3JtYXQuR01MLnYyLnByb3RvdHlwZS53cml0ZXJzLmZlYXR1cmV9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuRm9ybWF0Lk9XU0NvbnRleHQudjBfM18xIn0pO09wZW5MYXllcnMuUG9wdXA9T3BlbkxheWVycy5DbGFzcyh7ZXZlbnRzOm51bGwsaWQ6IiIsbG9ubGF0Om51bGwsZGl2Om51bGwsY29udGVudFNpemU6bnVsbCxzaXplOm51bGwsY29udGVudEhUTUw6bnVsbCxiYWNrZ3JvdW5kQ29sb3I6IiIsb3BhY2l0eToiIixib3JkZXI6IiIsY29udGVudERpdjpudWxsLGdyb3VwRGl2Om51bGwsY2xvc2VEaXY6bnVsbCxhdXRvU2l6ZTohMSxtaW5TaXplOm51bGwsbWF4U2l6ZTpudWxsLGRpc3BsYXlDbGFzczoib2xQb3B1cCIsY29udGVudERpc3BsYXlDbGFzczoib2xQb3B1cENvbnRlbnQiLHBhZGRpbmc6MCxkaXNhYmxlRmlyZWZveE92ZXJmbG93SGFjazohMSxmaXhQYWRkaW5nOmZ1bmN0aW9uKCl7Im51bWJlciI9PXR5cGVvZiB0aGlzLnBhZGRpbmcmJih0aGlzLnBhZGRpbmc9bmV3IE9wZW5MYXllcnMuQm91bmRzKHRoaXMucGFkZGluZyx0aGlzLnBhZGRpbmcsdGhpcy5wYWRkaW5nLHRoaXMucGFkZGluZykpfSxwYW5NYXBJZk91dE9mVmlldzohMSwKa2VlcEluTWFwOiExLGNsb3NlT25Nb3ZlOiExLG1hcDpudWxsLGluaXRpYWxpemU6ZnVuY3Rpb24oYSxiLGMsZCxlLGYpe251bGw9PWEmJihhPU9wZW5MYXllcnMuVXRpbC5jcmVhdGVVbmlxdWVJRCh0aGlzLkNMQVNTX05BTUUrIl8iKSk7dGhpcy5pZD1hO3RoaXMubG9ubGF0PWI7dGhpcy5jb250ZW50U2l6ZT1udWxsIT1jP2M6bmV3IE9wZW5MYXllcnMuU2l6ZShPcGVuTGF5ZXJzLlBvcHVwLldJRFRILE9wZW5MYXllcnMuUG9wdXAuSEVJR0hUKTtudWxsIT1kJiYodGhpcy5jb250ZW50SFRNTD1kKTt0aGlzLmJhY2tncm91bmRDb2xvcj1PcGVuTGF5ZXJzLlBvcHVwLkNPTE9SO3RoaXMub3BhY2l0eT1PcGVuTGF5ZXJzLlBvcHVwLk9QQUNJVFk7dGhpcy5ib3JkZXI9T3BlbkxheWVycy5Qb3B1cC5CT1JERVI7dGhpcy5kaXY9T3BlbkxheWVycy5VdGlsLmNyZWF0ZURpdih0aGlzLmlkLG51bGwsbnVsbCxudWxsLG51bGwsbnVsbCwiaGlkZGVuIik7dGhpcy5kaXYuY2xhc3NOYW1lPXRoaXMuZGlzcGxheUNsYXNzOwp0aGlzLmdyb3VwRGl2PU9wZW5MYXllcnMuVXRpbC5jcmVhdGVEaXYodGhpcy5pZCsiX0dyb3VwRGl2IixudWxsLG51bGwsbnVsbCwicmVsYXRpdmUiLG51bGwsImhpZGRlbiIpO2E9dGhpcy5kaXYuaWQrIl9jb250ZW50RGl2Ijt0aGlzLmNvbnRlbnREaXY9T3BlbkxheWVycy5VdGlsLmNyZWF0ZURpdihhLG51bGwsdGhpcy5jb250ZW50U2l6ZS5jbG9uZSgpLG51bGwsInJlbGF0aXZlIik7dGhpcy5jb250ZW50RGl2LmNsYXNzTmFtZT10aGlzLmNvbnRlbnREaXNwbGF5Q2xhc3M7dGhpcy5ncm91cERpdi5hcHBlbmRDaGlsZCh0aGlzLmNvbnRlbnREaXYpO3RoaXMuZGl2LmFwcGVuZENoaWxkKHRoaXMuZ3JvdXBEaXYpO2UmJnRoaXMuYWRkQ2xvc2VCb3goZik7dGhpcy5yZWdpc3RlckV2ZW50cygpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5ib3JkZXI9dGhpcy5vcGFjaXR5PXRoaXMuYmFja2dyb3VuZENvbG9yPXRoaXMuY29udGVudEhUTUw9dGhpcy5zaXplPXRoaXMubG9ubGF0PXRoaXMuaWQ9Cm51bGw7dGhpcy5jbG9zZU9uTW92ZSYmdGhpcy5tYXAmJnRoaXMubWFwLmV2ZW50cy51bnJlZ2lzdGVyKCJtb3Zlc3RhcnQiLHRoaXMsdGhpcy5oaWRlKTt0aGlzLmV2ZW50cy5kZXN0cm95KCk7dGhpcy5ldmVudHM9bnVsbDt0aGlzLmNsb3NlRGl2JiYoT3BlbkxheWVycy5FdmVudC5zdG9wT2JzZXJ2aW5nRWxlbWVudCh0aGlzLmNsb3NlRGl2KSx0aGlzLmdyb3VwRGl2LnJlbW92ZUNoaWxkKHRoaXMuY2xvc2VEaXYpKTt0aGlzLmNsb3NlRGl2PW51bGw7dGhpcy5kaXYucmVtb3ZlQ2hpbGQodGhpcy5ncm91cERpdik7dGhpcy5ncm91cERpdj1udWxsO251bGwhPXRoaXMubWFwJiZ0aGlzLm1hcC5yZW1vdmVQb3B1cCh0aGlzKTt0aGlzLnBhbk1hcElmT3V0T2ZWaWV3PXRoaXMucGFkZGluZz10aGlzLm1heFNpemU9dGhpcy5taW5TaXplPXRoaXMuYXV0b1NpemU9dGhpcy5kaXY9dGhpcy5tYXA9bnVsbH0sZHJhdzpmdW5jdGlvbihhKXtudWxsPT1hJiZudWxsIT10aGlzLmxvbmxhdCYmbnVsbCE9CnRoaXMubWFwJiYoYT10aGlzLm1hcC5nZXRMYXllclB4RnJvbUxvbkxhdCh0aGlzLmxvbmxhdCkpO3RoaXMuY2xvc2VPbk1vdmUmJnRoaXMubWFwLmV2ZW50cy5yZWdpc3RlcigibW92ZXN0YXJ0Iix0aGlzLHRoaXMuaGlkZSk7dGhpcy5kaXNhYmxlRmlyZWZveE92ZXJmbG93SGFja3x8ImZpcmVmb3giIT1PcGVuTGF5ZXJzLkJST1dTRVJfTkFNRXx8KHRoaXMubWFwLmV2ZW50cy5yZWdpc3RlcigibW92ZXN0YXJ0Iix0aGlzLGZ1bmN0aW9uKCl7dmFyIGE9ZG9jdW1lbnQuZGVmYXVsdFZpZXcuZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLmNvbnRlbnREaXYsbnVsbCkuZ2V0UHJvcGVydHlWYWx1ZSgib3ZlcmZsb3ciKTsiaGlkZGVuIiE9YSYmKHRoaXMuY29udGVudERpdi5fb2xkT3ZlcmZsb3c9YSx0aGlzLmNvbnRlbnREaXYuc3R5bGUub3ZlcmZsb3c9ImhpZGRlbiIpfSksdGhpcy5tYXAuZXZlbnRzLnJlZ2lzdGVyKCJtb3ZlZW5kIix0aGlzLGZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5jb250ZW50RGl2Ll9vbGRPdmVyZmxvdzsKYSYmKHRoaXMuY29udGVudERpdi5zdHlsZS5vdmVyZmxvdz1hLHRoaXMuY29udGVudERpdi5fb2xkT3ZlcmZsb3c9bnVsbCl9KSk7dGhpcy5tb3ZlVG8oYSk7dGhpcy5hdXRvU2l6ZXx8dGhpcy5zaXplfHx0aGlzLnNldFNpemUodGhpcy5jb250ZW50U2l6ZSk7dGhpcy5zZXRCYWNrZ3JvdW5kQ29sb3IoKTt0aGlzLnNldE9wYWNpdHkoKTt0aGlzLnNldEJvcmRlcigpO3RoaXMuc2V0Q29udGVudEhUTUwoKTt0aGlzLnBhbk1hcElmT3V0T2ZWaWV3JiZ0aGlzLnBhbkludG9WaWV3KCk7cmV0dXJuIHRoaXMuZGl2fSx1cGRhdGVQb3NpdGlvbjpmdW5jdGlvbigpe2lmKHRoaXMubG9ubGF0JiZ0aGlzLm1hcCl7dmFyIGE9dGhpcy5tYXAuZ2V0TGF5ZXJQeEZyb21Mb25MYXQodGhpcy5sb25sYXQpO2EmJnRoaXMubW92ZVRvKGEpfX0sbW92ZVRvOmZ1bmN0aW9uKGEpe251bGwhPWEmJm51bGwhPXRoaXMuZGl2JiYodGhpcy5kaXYuc3R5bGUubGVmdD1hLngrInB4Iix0aGlzLmRpdi5zdHlsZS50b3A9CmEueSsicHgiKX0sdmlzaWJsZTpmdW5jdGlvbigpe3JldHVybiBPcGVuTGF5ZXJzLkVsZW1lbnQudmlzaWJsZSh0aGlzLmRpdil9LHRvZ2dsZTpmdW5jdGlvbigpe3RoaXMudmlzaWJsZSgpP3RoaXMuaGlkZSgpOnRoaXMuc2hvdygpfSxzaG93OmZ1bmN0aW9uKCl7dGhpcy5kaXYuc3R5bGUuZGlzcGxheT0iIjt0aGlzLnBhbk1hcElmT3V0T2ZWaWV3JiZ0aGlzLnBhbkludG9WaWV3KCl9LGhpZGU6ZnVuY3Rpb24oKXt0aGlzLmRpdi5zdHlsZS5kaXNwbGF5PSJub25lIn0sc2V0U2l6ZTpmdW5jdGlvbihhKXt0aGlzLnNpemU9YS5jbG9uZSgpO3ZhciBiPXRoaXMuZ2V0Q29udGVudERpdlBhZGRpbmcoKSxjPWIubGVmdCtiLnJpZ2h0LGQ9Yi50b3ArYi5ib3R0b207dGhpcy5maXhQYWRkaW5nKCk7Yys9dGhpcy5wYWRkaW5nLmxlZnQrdGhpcy5wYWRkaW5nLnJpZ2h0O2QrPXRoaXMucGFkZGluZy50b3ArdGhpcy5wYWRkaW5nLmJvdHRvbTtpZih0aGlzLmNsb3NlRGl2KXZhciBlPXBhcnNlSW50KHRoaXMuY2xvc2VEaXYuc3R5bGUud2lkdGgpLApjPWMrKGUrYi5yaWdodCk7dGhpcy5zaXplLncrPWM7dGhpcy5zaXplLmgrPWQ7Im1zaWUiPT1PcGVuTGF5ZXJzLkJST1dTRVJfTkFNRSYmKHRoaXMuY29udGVudFNpemUudys9Yi5sZWZ0K2IucmlnaHQsdGhpcy5jb250ZW50U2l6ZS5oKz1iLmJvdHRvbStiLnRvcCk7bnVsbCE9dGhpcy5kaXYmJih0aGlzLmRpdi5zdHlsZS53aWR0aD10aGlzLnNpemUudysicHgiLHRoaXMuZGl2LnN0eWxlLmhlaWdodD10aGlzLnNpemUuaCsicHgiKTtudWxsIT10aGlzLmNvbnRlbnREaXYmJih0aGlzLmNvbnRlbnREaXYuc3R5bGUud2lkdGg9YS53KyJweCIsdGhpcy5jb250ZW50RGl2LnN0eWxlLmhlaWdodD1hLmgrInB4Iil9LHVwZGF0ZVNpemU6ZnVuY3Rpb24oKXt2YXIgYT0iPGRpdiBjbGFzcz0nIit0aGlzLmNvbnRlbnREaXNwbGF5Q2xhc3MrIic+Iit0aGlzLmNvbnRlbnREaXYuaW5uZXJIVE1MKyI8L2Rpdj4iLGI9dGhpcy5tYXA/dGhpcy5tYXAuZGl2OmRvY3VtZW50LmJvZHksYz1PcGVuTGF5ZXJzLlV0aWwuZ2V0UmVuZGVyZWREaW1lbnNpb25zKGEsCm51bGwse2Rpc3BsYXlDbGFzczp0aGlzLmRpc3BsYXlDbGFzcyxjb250YWluZXJFbGVtZW50OmJ9KSxkPXRoaXMuZ2V0U2FmZUNvbnRlbnRTaXplKGMpLGU9bnVsbDtkLmVxdWFscyhjKT9lPWM6KGM9e3c6ZC53PGMudz9kLnc6bnVsbCxoOmQuaDxjLmg/ZC5oOm51bGx9LGMudyYmYy5oP2U9ZDooYT1PcGVuTGF5ZXJzLlV0aWwuZ2V0UmVuZGVyZWREaW1lbnNpb25zKGEsYyx7ZGlzcGxheUNsYXNzOnRoaXMuY29udGVudERpc3BsYXlDbGFzcyxjb250YWluZXJFbGVtZW50OmJ9KSwiaGlkZGVuIiE9T3BlbkxheWVycy5FbGVtZW50LmdldFN0eWxlKHRoaXMuY29udGVudERpdiwib3ZlcmZsb3ciKSYmYS5lcXVhbHMoZCkmJihkPU9wZW5MYXllcnMuVXRpbC5nZXRTY3JvbGxiYXJXaWR0aCgpLGMudz9hLmgrPWQ6YS53Kz1kKSxlPXRoaXMuZ2V0U2FmZUNvbnRlbnRTaXplKGEpKSk7dGhpcy5zZXRTaXplKGUpfSxzZXRCYWNrZ3JvdW5kQ29sb3I6ZnVuY3Rpb24oYSl7dm9pZCAwIT1hJiYodGhpcy5iYWNrZ3JvdW5kQ29sb3I9CmEpO251bGwhPXRoaXMuZGl2JiYodGhpcy5kaXYuc3R5bGUuYmFja2dyb3VuZENvbG9yPXRoaXMuYmFja2dyb3VuZENvbG9yKX0sc2V0T3BhY2l0eTpmdW5jdGlvbihhKXt2b2lkIDAhPWEmJih0aGlzLm9wYWNpdHk9YSk7bnVsbCE9dGhpcy5kaXYmJih0aGlzLmRpdi5zdHlsZS5vcGFjaXR5PXRoaXMub3BhY2l0eSx0aGlzLmRpdi5zdHlsZS5maWx0ZXI9ImFscGhhKG9wYWNpdHk9IisxMDAqdGhpcy5vcGFjaXR5KyIpIil9LHNldEJvcmRlcjpmdW5jdGlvbihhKXt2b2lkIDAhPWEmJih0aGlzLmJvcmRlcj1hKTtudWxsIT10aGlzLmRpdiYmKHRoaXMuZGl2LnN0eWxlLmJvcmRlcj10aGlzLmJvcmRlcil9LHNldENvbnRlbnRIVE1MOmZ1bmN0aW9uKGEpe251bGwhPWEmJih0aGlzLmNvbnRlbnRIVE1MPWEpO251bGwhPXRoaXMuY29udGVudERpdiYmKG51bGwhPXRoaXMuY29udGVudEhUTUwmJnRoaXMuY29udGVudEhUTUwhPXRoaXMuY29udGVudERpdi5pbm5lckhUTUwpJiYodGhpcy5jb250ZW50RGl2LmlubmVySFRNTD0KdGhpcy5jb250ZW50SFRNTCx0aGlzLmF1dG9TaXplJiYodGhpcy5yZWdpc3RlckltYWdlTGlzdGVuZXJzKCksdGhpcy51cGRhdGVTaXplKCkpKX0scmVnaXN0ZXJJbWFnZUxpc3RlbmVyczpmdW5jdGlvbigpe2Zvcih2YXIgYT1mdW5jdGlvbigpe251bGwhPT10aGlzLnBvcHVwLmlkJiYodGhpcy5wb3B1cC51cGRhdGVTaXplKCksdGhpcy5wb3B1cC52aXNpYmxlKCkmJnRoaXMucG9wdXAucGFuTWFwSWZPdXRPZlZpZXcmJnRoaXMucG9wdXAucGFuSW50b1ZpZXcoKSxPcGVuTGF5ZXJzLkV2ZW50LnN0b3BPYnNlcnZpbmcodGhpcy5pbWcsImxvYWQiLHRoaXMuaW1nLl9vbkltZ0xvYWQpKX0sYj10aGlzLmNvbnRlbnREaXYuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImltZyIpLGM9MCxkPWIubGVuZ3RoO2M8ZDtjKyspe3ZhciBlPWJbY107aWYoMD09ZS53aWR0aHx8MD09ZS5oZWlnaHQpZS5fb25JbWdMb2FkPU9wZW5MYXllcnMuRnVuY3Rpb24uYmluZChhLHtwb3B1cDp0aGlzLGltZzplfSksCk9wZW5MYXllcnMuRXZlbnQub2JzZXJ2ZShlLCJsb2FkIixlLl9vbkltZ0xvYWQpfX0sZ2V0U2FmZUNvbnRlbnRTaXplOmZ1bmN0aW9uKGEpe2E9YS5jbG9uZSgpO3ZhciBiPXRoaXMuZ2V0Q29udGVudERpdlBhZGRpbmcoKSxjPWIubGVmdCtiLnJpZ2h0LGQ9Yi50b3ArYi5ib3R0b207dGhpcy5maXhQYWRkaW5nKCk7Yys9dGhpcy5wYWRkaW5nLmxlZnQrdGhpcy5wYWRkaW5nLnJpZ2h0O2QrPXRoaXMucGFkZGluZy50b3ArdGhpcy5wYWRkaW5nLmJvdHRvbTtpZih0aGlzLmNsb3NlRGl2KXZhciBlPXBhcnNlSW50KHRoaXMuY2xvc2VEaXYuc3R5bGUud2lkdGgpLGM9YysoZStiLnJpZ2h0KTt0aGlzLm1pblNpemUmJihhLnc9TWF0aC5tYXgoYS53LHRoaXMubWluU2l6ZS53LWMpLGEuaD1NYXRoLm1heChhLmgsdGhpcy5taW5TaXplLmgtZCkpO3RoaXMubWF4U2l6ZSYmKGEudz1NYXRoLm1pbihhLncsdGhpcy5tYXhTaXplLnctYyksYS5oPU1hdGgubWluKGEuaCx0aGlzLm1heFNpemUuaC0KZCkpO2lmKHRoaXMubWFwJiZ0aGlzLm1hcC5zaXplKXtlPWI9MDtpZih0aGlzLmtlZXBJbk1hcCYmIXRoaXMucGFuTWFwSWZPdXRPZlZpZXcpc3dpdGNoKGU9dGhpcy5tYXAuZ2V0UGl4ZWxGcm9tTG9uTGF0KHRoaXMubG9ubGF0KSx0aGlzLnJlbGF0aXZlUG9zaXRpb24pe2Nhc2UgInRyIjpiPWUueDtlPXRoaXMubWFwLnNpemUuaC1lLnk7YnJlYWs7Y2FzZSAidGwiOmI9dGhpcy5tYXAuc2l6ZS53LWUueDtlPXRoaXMubWFwLnNpemUuaC1lLnk7YnJlYWs7Y2FzZSAiYmwiOmI9dGhpcy5tYXAuc2l6ZS53LWUueDtlPWUueTticmVhaztjYXNlICJiciI6Yj1lLng7ZT1lLnk7YnJlYWs7ZGVmYXVsdDpiPWUueCxlPXRoaXMubWFwLnNpemUuaC1lLnl9ZD10aGlzLm1hcC5zaXplLmgtdGhpcy5tYXAucGFkZGluZ0ZvclBvcHVwcy50b3AtdGhpcy5tYXAucGFkZGluZ0ZvclBvcHVwcy5ib3R0b20tZC1lO2Eudz1NYXRoLm1pbihhLncsdGhpcy5tYXAuc2l6ZS53LXRoaXMubWFwLnBhZGRpbmdGb3JQb3B1cHMubGVmdC0KdGhpcy5tYXAucGFkZGluZ0ZvclBvcHVwcy5yaWdodC1jLWIpO2EuaD1NYXRoLm1pbihhLmgsZCl9cmV0dXJuIGF9LGdldENvbnRlbnREaXZQYWRkaW5nOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5fY29udGVudERpdlBhZGRpbmc7YXx8KG51bGw9PXRoaXMuZGl2LnBhcmVudE5vZGUmJih0aGlzLmRpdi5zdHlsZS5kaXNwbGF5PSJub25lIixkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRoaXMuZGl2KSksdGhpcy5fY29udGVudERpdlBhZGRpbmc9YT1uZXcgT3BlbkxheWVycy5Cb3VuZHMoT3BlbkxheWVycy5FbGVtZW50LmdldFN0eWxlKHRoaXMuY29udGVudERpdiwicGFkZGluZy1sZWZ0IiksT3BlbkxheWVycy5FbGVtZW50LmdldFN0eWxlKHRoaXMuY29udGVudERpdiwicGFkZGluZy1ib3R0b20iKSxPcGVuTGF5ZXJzLkVsZW1lbnQuZ2V0U3R5bGUodGhpcy5jb250ZW50RGl2LCJwYWRkaW5nLXJpZ2h0IiksT3BlbkxheWVycy5FbGVtZW50LmdldFN0eWxlKHRoaXMuY29udGVudERpdiwKInBhZGRpbmctdG9wIikpLHRoaXMuZGl2LnBhcmVudE5vZGU9PWRvY3VtZW50LmJvZHkmJihkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKHRoaXMuZGl2KSx0aGlzLmRpdi5zdHlsZS5kaXNwbGF5PSIiKSk7cmV0dXJuIGF9LGFkZENsb3NlQm94OmZ1bmN0aW9uKGEpe3RoaXMuY2xvc2VEaXY9T3BlbkxheWVycy5VdGlsLmNyZWF0ZURpdih0aGlzLmlkKyJfY2xvc2UiLG51bGwse3c6MTcsaDoxN30pO3RoaXMuY2xvc2VEaXYuY2xhc3NOYW1lPSJvbFBvcHVwQ2xvc2VCb3giO3ZhciBiPXRoaXMuZ2V0Q29udGVudERpdlBhZGRpbmcoKTt0aGlzLmNsb3NlRGl2LnN0eWxlLnJpZ2h0PWIucmlnaHQrInB4Ijt0aGlzLmNsb3NlRGl2LnN0eWxlLnRvcD1iLnRvcCsicHgiO3RoaXMuZ3JvdXBEaXYuYXBwZW5kQ2hpbGQodGhpcy5jbG9zZURpdik7YT1hfHxmdW5jdGlvbihhKXt0aGlzLmhpZGUoKTtPcGVuTGF5ZXJzLkV2ZW50LnN0b3AoYSl9O09wZW5MYXllcnMuRXZlbnQub2JzZXJ2ZSh0aGlzLmNsb3NlRGl2LAoidG91Y2hlbmQiLE9wZW5MYXllcnMuRnVuY3Rpb24uYmluZEFzRXZlbnRMaXN0ZW5lcihhLHRoaXMpKTtPcGVuTGF5ZXJzLkV2ZW50Lm9ic2VydmUodGhpcy5jbG9zZURpdiwiY2xpY2siLE9wZW5MYXllcnMuRnVuY3Rpb24uYmluZEFzRXZlbnRMaXN0ZW5lcihhLHRoaXMpKX0scGFuSW50b1ZpZXc6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm1hcC5nZXRTaXplKCksYj10aGlzLm1hcC5nZXRWaWV3UG9ydFB4RnJvbUxheWVyUHgobmV3IE9wZW5MYXllcnMuUGl4ZWwocGFyc2VJbnQodGhpcy5kaXYuc3R5bGUubGVmdCkscGFyc2VJbnQodGhpcy5kaXYuc3R5bGUudG9wKSkpLGM9Yi5jbG9uZSgpO2IueDx0aGlzLm1hcC5wYWRkaW5nRm9yUG9wdXBzLmxlZnQ/Yy54PXRoaXMubWFwLnBhZGRpbmdGb3JQb3B1cHMubGVmdDpiLngrdGhpcy5zaXplLnc+YS53LXRoaXMubWFwLnBhZGRpbmdGb3JQb3B1cHMucmlnaHQmJihjLng9YS53LXRoaXMubWFwLnBhZGRpbmdGb3JQb3B1cHMucmlnaHQtdGhpcy5zaXplLncpOwpiLnk8dGhpcy5tYXAucGFkZGluZ0ZvclBvcHVwcy50b3A/Yy55PXRoaXMubWFwLnBhZGRpbmdGb3JQb3B1cHMudG9wOmIueSt0aGlzLnNpemUuaD5hLmgtdGhpcy5tYXAucGFkZGluZ0ZvclBvcHVwcy5ib3R0b20mJihjLnk9YS5oLXRoaXMubWFwLnBhZGRpbmdGb3JQb3B1cHMuYm90dG9tLXRoaXMuc2l6ZS5oKTt0aGlzLm1hcC5wYW4oYi54LWMueCxiLnktYy55KX0scmVnaXN0ZXJFdmVudHM6ZnVuY3Rpb24oKXt0aGlzLmV2ZW50cz1uZXcgT3BlbkxheWVycy5FdmVudHModGhpcyx0aGlzLmRpdixudWxsLCEwKTt0aGlzLmV2ZW50cy5vbih7bW91c2Vkb3duOnRoaXMub25tb3VzZWRvd24sbW91c2Vtb3ZlOnRoaXMub25tb3VzZW1vdmUsbW91c2V1cDp0aGlzLm9ubW91c2V1cCxjbGljazp0aGlzLm9uY2xpY2ssbW91c2VvdXQ6dGhpcy5vbm1vdXNlb3V0LGRibGNsaWNrOnRoaXMub25kYmxjbGljayx0b3VjaHN0YXJ0OmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuRXZlbnQuc3RvcChhLCEwKX0sCnNjb3BlOnRoaXN9KX0sb25tb3VzZWRvd246ZnVuY3Rpb24oYSl7dGhpcy5tb3VzZWRvd249ITA7T3BlbkxheWVycy5FdmVudC5zdG9wKGEsITApfSxvbm1vdXNlbW92ZTpmdW5jdGlvbihhKXt0aGlzLm1vdXNlZG93biYmT3BlbkxheWVycy5FdmVudC5zdG9wKGEsITApfSxvbm1vdXNldXA6ZnVuY3Rpb24oYSl7dGhpcy5tb3VzZWRvd24mJih0aGlzLm1vdXNlZG93bj0hMSxPcGVuTGF5ZXJzLkV2ZW50LnN0b3AoYSwhMCkpfSxvbmNsaWNrOmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuRXZlbnQuc3RvcChhLCEwKX0sb25tb3VzZW91dDpmdW5jdGlvbihhKXt0aGlzLm1vdXNlZG93bj0hMX0sb25kYmxjbGljazpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLkV2ZW50LnN0b3AoYSwhMCl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuUG9wdXAifSk7T3BlbkxheWVycy5Qb3B1cC5XSURUSD0yMDA7T3BlbkxheWVycy5Qb3B1cC5IRUlHSFQ9MjAwO09wZW5MYXllcnMuUG9wdXAuQ09MT1I9IndoaXRlIjsKT3BlbkxheWVycy5Qb3B1cC5PUEFDSVRZPTE7T3BlbkxheWVycy5Qb3B1cC5CT1JERVI9IjBweCI7T3BlbkxheWVycy5Db250cm9sLlNjYWxlTGluZT1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuQ29udHJvbCx7bWF4V2lkdGg6MTAwLHRvcE91dFVuaXRzOiJrbSIsdG9wSW5Vbml0czoibSIsYm90dG9tT3V0VW5pdHM6Im1pIixib3R0b21JblVuaXRzOiJmdCIsZVRvcDpudWxsLGVCb3R0b206bnVsbCxnZW9kZXNpYzohMSxkcmF3OmZ1bmN0aW9uKCl7T3BlbkxheWVycy5Db250cm9sLnByb3RvdHlwZS5kcmF3LmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLmVUb3B8fCh0aGlzLmVUb3A9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2IiksdGhpcy5lVG9wLmNsYXNzTmFtZT10aGlzLmRpc3BsYXlDbGFzcysiVG9wIix0aGlzLmRpdi5hcHBlbmRDaGlsZCh0aGlzLmVUb3ApLHRoaXMuZVRvcC5zdHlsZS52aXNpYmlsaXR5PSIiPT10aGlzLnRvcE91dFVuaXRzfHwiIj09dGhpcy50b3BJblVuaXRzPyJoaWRkZW4iOiJ2aXNpYmxlIix0aGlzLmVCb3R0b209ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2IiksCnRoaXMuZUJvdHRvbS5jbGFzc05hbWU9dGhpcy5kaXNwbGF5Q2xhc3MrIkJvdHRvbSIsdGhpcy5kaXYuYXBwZW5kQ2hpbGQodGhpcy5lQm90dG9tKSx0aGlzLmVCb3R0b20uc3R5bGUudmlzaWJpbGl0eT0iIj09dGhpcy5ib3R0b21PdXRVbml0c3x8IiI9PXRoaXMuYm90dG9tSW5Vbml0cz8iaGlkZGVuIjoidmlzaWJsZSIpO3RoaXMubWFwLmV2ZW50cy5yZWdpc3RlcigibW92ZWVuZCIsdGhpcyx0aGlzLnVwZGF0ZSk7dGhpcy51cGRhdGUoKTtyZXR1cm4gdGhpcy5kaXZ9LGdldEJhckxlbjpmdW5jdGlvbihhKXt2YXIgYj1wYXJzZUludChNYXRoLmxvZyhhKS9NYXRoLmxvZygxMCkpLGI9TWF0aC5wb3coMTAsYik7YT1wYXJzZUludChhL2IpO3JldHVybig1PGE/NToyPGE/MjoxKSpifSx1cGRhdGU6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm1hcC5nZXRSZXNvbHV0aW9uKCk7aWYoYSl7dmFyIGI9dGhpcy5tYXAuZ2V0VW5pdHMoKSxjPU9wZW5MYXllcnMuSU5DSEVTX1BFUl9VTklULGQ9dGhpcy5tYXhXaWR0aCoKYSpjW2JdLGU9MTshMD09PXRoaXMuZ2VvZGVzaWMmJihlPSh0aGlzLm1hcC5nZXRHZW9kZXNpY1BpeGVsU2l6ZSgpLnd8fDFFLTYpKnRoaXMubWF4V2lkdGgvKGQvYy5rbSksZCo9ZSk7dmFyIGYsZzsxRTU8ZD8oZj10aGlzLnRvcE91dFVuaXRzLGc9dGhpcy5ib3R0b21PdXRVbml0cyk6KGY9dGhpcy50b3BJblVuaXRzLGc9dGhpcy5ib3R0b21JblVuaXRzKTt2YXIgaD1kL2NbZl0saz1kL2NbZ10sZD10aGlzLmdldEJhckxlbihoKSxsPXRoaXMuZ2V0QmFyTGVuKGspLGg9ZC9jW2JdKmNbZl0saz1sL2NbYl0qY1tnXSxiPWgvYS9lLGE9ay9hL2U7InZpc2libGUiPT10aGlzLmVCb3R0b20uc3R5bGUudmlzaWJpbGl0eSYmKHRoaXMuZUJvdHRvbS5zdHlsZS53aWR0aD1NYXRoLnJvdW5kKGEpKyJweCIsdGhpcy5lQm90dG9tLmlubmVySFRNTD1sKyIgIitnKTsidmlzaWJsZSI9PXRoaXMuZVRvcC5zdHlsZS52aXNpYmlsaXR5JiYodGhpcy5lVG9wLnN0eWxlLndpZHRoPU1hdGgucm91bmQoYikrCiJweCIsdGhpcy5lVG9wLmlubmVySFRNTD1kKyIgIitmKX19LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuQ29udHJvbC5TY2FsZUxpbmUifSk7T3BlbkxheWVycy5JY29uPU9wZW5MYXllcnMuQ2xhc3Moe3VybDpudWxsLHNpemU6bnVsbCxvZmZzZXQ6bnVsbCxjYWxjdWxhdGVPZmZzZXQ6bnVsbCxpbWFnZURpdjpudWxsLHB4Om51bGwsaW5pdGlhbGl6ZTpmdW5jdGlvbihhLGIsYyxkKXt0aGlzLnVybD1hO3RoaXMuc2l6ZT1ifHx7dzoyMCxoOjIwfTt0aGlzLm9mZnNldD1jfHx7eDotKHRoaXMuc2l6ZS53LzIpLHk6LSh0aGlzLnNpemUuaC8yKX07dGhpcy5jYWxjdWxhdGVPZmZzZXQ9ZDthPU9wZW5MYXllcnMuVXRpbC5jcmVhdGVVbmlxdWVJRCgiT0xfSWNvbl8iKTt0aGlzLmltYWdlRGl2PU9wZW5MYXllcnMuVXRpbC5jcmVhdGVBbHBoYUltYWdlRGl2KGEpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5lcmFzZSgpO09wZW5MYXllcnMuRXZlbnQuc3RvcE9ic2VydmluZ0VsZW1lbnQodGhpcy5pbWFnZURpdi5maXJzdENoaWxkKTt0aGlzLmltYWdlRGl2LmlubmVySFRNTD0iIjt0aGlzLmltYWdlRGl2PW51bGx9LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLkljb24odGhpcy51cmwsCnRoaXMuc2l6ZSx0aGlzLm9mZnNldCx0aGlzLmNhbGN1bGF0ZU9mZnNldCl9LHNldFNpemU6ZnVuY3Rpb24oYSl7bnVsbCE9YSYmKHRoaXMuc2l6ZT1hKTt0aGlzLmRyYXcoKX0sc2V0VXJsOmZ1bmN0aW9uKGEpe251bGwhPWEmJih0aGlzLnVybD1hKTt0aGlzLmRyYXcoKX0sZHJhdzpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLlV0aWwubW9kaWZ5QWxwaGFJbWFnZURpdih0aGlzLmltYWdlRGl2LG51bGwsbnVsbCx0aGlzLnNpemUsdGhpcy51cmwsImFic29sdXRlIik7dGhpcy5tb3ZlVG8oYSk7cmV0dXJuIHRoaXMuaW1hZ2VEaXZ9LGVyYXNlOmZ1bmN0aW9uKCl7bnVsbCE9dGhpcy5pbWFnZURpdiYmbnVsbCE9dGhpcy5pbWFnZURpdi5wYXJlbnROb2RlJiZPcGVuTGF5ZXJzLkVsZW1lbnQucmVtb3ZlKHRoaXMuaW1hZ2VEaXYpfSxzZXRPcGFjaXR5OmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuVXRpbC5tb2RpZnlBbHBoYUltYWdlRGl2KHRoaXMuaW1hZ2VEaXYsbnVsbCxudWxsLG51bGwsbnVsbCwKbnVsbCxudWxsLG51bGwsYSl9LG1vdmVUbzpmdW5jdGlvbihhKXtudWxsIT1hJiYodGhpcy5weD1hKTtudWxsIT10aGlzLmltYWdlRGl2JiYobnVsbD09dGhpcy5weD90aGlzLmRpc3BsYXkoITEpOih0aGlzLmNhbGN1bGF0ZU9mZnNldCYmKHRoaXMub2Zmc2V0PXRoaXMuY2FsY3VsYXRlT2Zmc2V0KHRoaXMuc2l6ZSkpLE9wZW5MYXllcnMuVXRpbC5tb2RpZnlBbHBoYUltYWdlRGl2KHRoaXMuaW1hZ2VEaXYsbnVsbCx7eDp0aGlzLnB4LngrdGhpcy5vZmZzZXQueCx5OnRoaXMucHgueSt0aGlzLm9mZnNldC55fSkpKX0sZGlzcGxheTpmdW5jdGlvbihhKXt0aGlzLmltYWdlRGl2LnN0eWxlLmRpc3BsYXk9YT8iIjoibm9uZSJ9LGlzRHJhd246ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbWFnZURpdiYmdGhpcy5pbWFnZURpdi5wYXJlbnROb2RlJiYxMSE9dGhpcy5pbWFnZURpdi5wYXJlbnROb2RlLm5vZGVUeXBlfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkljb24ifSk7T3BlbkxheWVycy5NYXJrZXI9T3BlbkxheWVycy5DbGFzcyh7aWNvbjpudWxsLGxvbmxhdDpudWxsLGV2ZW50czpudWxsLG1hcDpudWxsLGluaXRpYWxpemU6ZnVuY3Rpb24oYSxiKXt0aGlzLmxvbmxhdD1hO3ZhciBjPWI/YjpPcGVuTGF5ZXJzLk1hcmtlci5kZWZhdWx0SWNvbigpO251bGw9PXRoaXMuaWNvbj90aGlzLmljb249YzoodGhpcy5pY29uLnVybD1jLnVybCx0aGlzLmljb24uc2l6ZT1jLnNpemUsdGhpcy5pY29uLm9mZnNldD1jLm9mZnNldCx0aGlzLmljb24uY2FsY3VsYXRlT2Zmc2V0PWMuY2FsY3VsYXRlT2Zmc2V0KTt0aGlzLmV2ZW50cz1uZXcgT3BlbkxheWVycy5FdmVudHModGhpcyx0aGlzLmljb24uaW1hZ2VEaXYpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5lcmFzZSgpO3RoaXMubWFwPW51bGw7dGhpcy5ldmVudHMuZGVzdHJveSgpO3RoaXMuZXZlbnRzPW51bGw7bnVsbCE9dGhpcy5pY29uJiYodGhpcy5pY29uLmRlc3Ryb3koKSx0aGlzLmljb249bnVsbCl9LApkcmF3OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmljb24uZHJhdyhhKX0sZXJhc2U6ZnVuY3Rpb24oKXtudWxsIT10aGlzLmljb24mJnRoaXMuaWNvbi5lcmFzZSgpfSxtb3ZlVG86ZnVuY3Rpb24oYSl7bnVsbCE9YSYmbnVsbCE9dGhpcy5pY29uJiZ0aGlzLmljb24ubW92ZVRvKGEpO3RoaXMubG9ubGF0PXRoaXMubWFwLmdldExvbkxhdEZyb21MYXllclB4KGEpfSxpc0RyYXduOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaWNvbiYmdGhpcy5pY29uLmlzRHJhd24oKX0sb25TY3JlZW46ZnVuY3Rpb24oKXt2YXIgYT0hMTt0aGlzLm1hcCYmKGE9dGhpcy5tYXAuZ2V0RXh0ZW50KCkuY29udGFpbnNMb25MYXQodGhpcy5sb25sYXQpKTtyZXR1cm4gYX0saW5mbGF0ZTpmdW5jdGlvbihhKXt0aGlzLmljb24mJnRoaXMuaWNvbi5zZXRTaXplKHt3OnRoaXMuaWNvbi5zaXplLncqYSxoOnRoaXMuaWNvbi5zaXplLmgqYX0pfSxzZXRPcGFjaXR5OmZ1bmN0aW9uKGEpe3RoaXMuaWNvbi5zZXRPcGFjaXR5KGEpfSwKc2V0VXJsOmZ1bmN0aW9uKGEpe3RoaXMuaWNvbi5zZXRVcmwoYSl9LGRpc3BsYXk6ZnVuY3Rpb24oYSl7dGhpcy5pY29uLmRpc3BsYXkoYSl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuTWFya2VyIn0pO09wZW5MYXllcnMuTWFya2VyLmRlZmF1bHRJY29uPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLkljb24oT3BlbkxheWVycy5VdGlsLmdldEltYWdlTG9jYXRpb24oIm1hcmtlci5wbmciKSx7dzoyMSxoOjI1fSx7eDotMTAuNSx5Oi0yNX0pfTtPcGVuTGF5ZXJzLkxheWVyLlRpbGVDYWNoZT1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuTGF5ZXIuR3JpZCx7aXNCYXNlTGF5ZXI6ITAsZm9ybWF0OiJpbWFnZS9wbmciLHNlcnZlclJlc29sdXRpb25zOm51bGwsaW5pdGlhbGl6ZTpmdW5jdGlvbihhLGIsYyxkKXt0aGlzLmxheWVybmFtZT1jO09wZW5MYXllcnMuTGF5ZXIuR3JpZC5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLFthLGIse30sZF0pO3RoaXMuZXh0ZW5zaW9uPXRoaXMuZm9ybWF0LnNwbGl0KCIvIilbMV0udG9Mb3dlckNhc2UoKTt0aGlzLmV4dGVuc2lvbj0ianBnIj09dGhpcy5leHRlbnNpb24/ImpwZWciOnRoaXMuZXh0ZW5zaW9ufSxjbG9uZTpmdW5jdGlvbihhKXtudWxsPT1hJiYoYT1uZXcgT3BlbkxheWVycy5MYXllci5UaWxlQ2FjaGUodGhpcy5uYW1lLHRoaXMudXJsLHRoaXMubGF5ZXJuYW1lLHRoaXMuZ2V0T3B0aW9ucygpKSk7cmV0dXJuIGE9T3BlbkxheWVycy5MYXllci5HcmlkLnByb3RvdHlwZS5jbG9uZS5hcHBseSh0aGlzLApbYV0pfSxnZXRVUkw6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5nZXRTZXJ2ZXJSZXNvbHV0aW9uKCksYz10aGlzLm1heEV4dGVudCxkPXRoaXMudGlsZVNpemUsZT1NYXRoLnJvdW5kKChhLmxlZnQtYy5sZWZ0KS8oYipkLncpKTthPU1hdGgucm91bmQoKGEuYm90dG9tLWMuYm90dG9tKS8oYipkLmgpKTtiPW51bGwhPXRoaXMuc2VydmVyUmVzb2x1dGlvbnM/T3BlbkxheWVycy5VdGlsLmluZGV4T2YodGhpcy5zZXJ2ZXJSZXNvbHV0aW9ucyxiKTp0aGlzLm1hcC5nZXRab29tKCk7ZT1bdGhpcy5sYXllcm5hbWUsT3BlbkxheWVycy5OdW1iZXIuemVyb1BhZChiLDIpLE9wZW5MYXllcnMuTnVtYmVyLnplcm9QYWQocGFyc2VJbnQoZS8xRTYpLDMpLE9wZW5MYXllcnMuTnVtYmVyLnplcm9QYWQocGFyc2VJbnQoZS8xRTMpJTFFMywzKSxPcGVuTGF5ZXJzLk51bWJlci56ZXJvUGFkKHBhcnNlSW50KGUpJTFFMywzKSxPcGVuTGF5ZXJzLk51bWJlci56ZXJvUGFkKHBhcnNlSW50KGEvMUU2KSwKMyksT3BlbkxheWVycy5OdW1iZXIuemVyb1BhZChwYXJzZUludChhLzFFMyklMUUzLDMpLE9wZW5MYXllcnMuTnVtYmVyLnplcm9QYWQocGFyc2VJbnQoYSklMUUzLDMpKyIuIit0aGlzLmV4dGVuc2lvbl0uam9pbigiLyIpO2I9dGhpcy51cmw7T3BlbkxheWVycy5VdGlsLmlzQXJyYXkoYikmJihiPXRoaXMuc2VsZWN0VXJsKGUsYikpO2I9Ii8iPT1iLmNoYXJBdChiLmxlbmd0aC0xKT9iOmIrIi8iO3JldHVybiBiK2V9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuTGF5ZXIuVGlsZUNhY2hlIn0pO09wZW5MYXllcnMuU3RyYXRlZ3kuUGFnaW5nPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5TdHJhdGVneSx7ZmVhdHVyZXM6bnVsbCxsZW5ndGg6MTAsbnVtOm51bGwscGFnaW5nOiExLGFjdGl2YXRlOmZ1bmN0aW9uKCl7dmFyIGE9T3BlbkxheWVycy5TdHJhdGVneS5wcm90b3R5cGUuYWN0aXZhdGUuY2FsbCh0aGlzKTtpZihhKXRoaXMubGF5ZXIuZXZlbnRzLm9uKHtiZWZvcmVmZWF0dXJlc2FkZGVkOnRoaXMuY2FjaGVGZWF0dXJlcyxzY29wZTp0aGlzfSk7cmV0dXJuIGF9LGRlYWN0aXZhdGU6ZnVuY3Rpb24oKXt2YXIgYT1PcGVuTGF5ZXJzLlN0cmF0ZWd5LnByb3RvdHlwZS5kZWFjdGl2YXRlLmNhbGwodGhpcyk7YSYmKHRoaXMuY2xlYXJDYWNoZSgpLHRoaXMubGF5ZXIuZXZlbnRzLnVuKHtiZWZvcmVmZWF0dXJlc2FkZGVkOnRoaXMuY2FjaGVGZWF0dXJlcyxzY29wZTp0aGlzfSkpO3JldHVybiBhfSxjYWNoZUZlYXR1cmVzOmZ1bmN0aW9uKGEpe3RoaXMucGFnaW5nfHwodGhpcy5jbGVhckNhY2hlKCksCnRoaXMuZmVhdHVyZXM9YS5mZWF0dXJlcyx0aGlzLnBhZ2VOZXh0KGEpKX0sY2xlYXJDYWNoZTpmdW5jdGlvbigpe2lmKHRoaXMuZmVhdHVyZXMpZm9yKHZhciBhPTA7YTx0aGlzLmZlYXR1cmVzLmxlbmd0aDsrK2EpdGhpcy5mZWF0dXJlc1thXS5kZXN0cm95KCk7dGhpcy5udW09dGhpcy5mZWF0dXJlcz1udWxsfSxwYWdlQ291bnQ6ZnVuY3Rpb24oKXtyZXR1cm4gTWF0aC5jZWlsKCh0aGlzLmZlYXR1cmVzP3RoaXMuZmVhdHVyZXMubGVuZ3RoOjApL3RoaXMubGVuZ3RoKX0scGFnZU51bTpmdW5jdGlvbigpe3JldHVybiB0aGlzLm51bX0scGFnZUxlbmd0aDpmdW5jdGlvbihhKXthJiYwPGEmJih0aGlzLmxlbmd0aD1hKTtyZXR1cm4gdGhpcy5sZW5ndGh9LHBhZ2VOZXh0OmZ1bmN0aW9uKGEpe3ZhciBiPSExO3RoaXMuZmVhdHVyZXMmJihudWxsPT09dGhpcy5udW0mJih0aGlzLm51bT0tMSksYj10aGlzLnBhZ2UoKHRoaXMubnVtKzEpKnRoaXMubGVuZ3RoLGEpKTtyZXR1cm4gYn0scGFnZVByZXZpb3VzOmZ1bmN0aW9uKCl7dmFyIGE9CiExO3RoaXMuZmVhdHVyZXMmJihudWxsPT09dGhpcy5udW0mJih0aGlzLm51bT10aGlzLnBhZ2VDb3VudCgpKSxhPXRoaXMucGFnZSgodGhpcy5udW0tMSkqdGhpcy5sZW5ndGgpKTtyZXR1cm4gYX0scGFnZTpmdW5jdGlvbihhLGIpe3ZhciBjPSExO2lmKHRoaXMuZmVhdHVyZXMmJjA8PWEmJmE8dGhpcy5mZWF0dXJlcy5sZW5ndGgpe3ZhciBkPU1hdGguZmxvb3IoYS90aGlzLmxlbmd0aCk7ZCE9dGhpcy5udW0mJih0aGlzLnBhZ2luZz0hMCxjPXRoaXMuZmVhdHVyZXMuc2xpY2UoYSxhK3RoaXMubGVuZ3RoKSx0aGlzLmxheWVyLnJlbW92ZUZlYXR1cmVzKHRoaXMubGF5ZXIuZmVhdHVyZXMpLHRoaXMubnVtPWQsYiYmYi5mZWF0dXJlcz9iLmZlYXR1cmVzPWM6dGhpcy5sYXllci5hZGRGZWF0dXJlcyhjKSx0aGlzLnBhZ2luZz0hMSxjPSEwKX1yZXR1cm4gY30sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5TdHJhdGVneS5QYWdpbmcifSk7T3BlbkxheWVycy5Db250cm9sLkRyYWdGZWF0dXJlPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Db250cm9sLHtnZW9tZXRyeVR5cGVzOm51bGwsb25TdGFydDpmdW5jdGlvbihhLGIpe30sb25EcmFnOmZ1bmN0aW9uKGEsYil7fSxvbkNvbXBsZXRlOmZ1bmN0aW9uKGEsYil7fSxvbkVudGVyOmZ1bmN0aW9uKGEpe30sb25MZWF2ZTpmdW5jdGlvbihhKXt9LGRvY3VtZW50RHJhZzohMSxsYXllcjpudWxsLGZlYXR1cmU6bnVsbCxkcmFnQ2FsbGJhY2tzOnt9LGZlYXR1cmVDYWxsYmFja3M6e30sbGFzdFBpeGVsOm51bGwsaW5pdGlhbGl6ZTpmdW5jdGlvbihhLGIpe09wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLFtiXSk7dGhpcy5sYXllcj1hO3RoaXMuaGFuZGxlcnM9e2RyYWc6bmV3IE9wZW5MYXllcnMuSGFuZGxlci5EcmFnKHRoaXMsT3BlbkxheWVycy5VdGlsLmV4dGVuZCh7ZG93bjp0aGlzLmRvd25GZWF0dXJlLG1vdmU6dGhpcy5tb3ZlRmVhdHVyZSwKdXA6dGhpcy51cEZlYXR1cmUsb3V0OnRoaXMuY2FuY2VsLGRvbmU6dGhpcy5kb25lRHJhZ2dpbmd9LHRoaXMuZHJhZ0NhbGxiYWNrcykse2RvY3VtZW50RHJhZzp0aGlzLmRvY3VtZW50RHJhZ30pLGZlYXR1cmU6bmV3IE9wZW5MYXllcnMuSGFuZGxlci5GZWF0dXJlKHRoaXMsdGhpcy5sYXllcixPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHtjbGljazp0aGlzLmNsaWNrRmVhdHVyZSxjbGlja291dDp0aGlzLmNsaWNrb3V0RmVhdHVyZSxvdmVyOnRoaXMub3ZlckZlYXR1cmUsb3V0OnRoaXMub3V0RmVhdHVyZX0sdGhpcy5mZWF0dXJlQ2FsbGJhY2tzKSx7Z2VvbWV0cnlUeXBlczp0aGlzLmdlb21ldHJ5VHlwZXN9KX19LGNsaWNrRmVhdHVyZTpmdW5jdGlvbihhKXt0aGlzLmhhbmRsZXJzLmZlYXR1cmUudG91Y2gmJighdGhpcy5vdmVyJiZ0aGlzLm92ZXJGZWF0dXJlKGEpKSYmKHRoaXMuaGFuZGxlcnMuZHJhZy5kcmFnc3RhcnQodGhpcy5oYW5kbGVycy5mZWF0dXJlLmV2dCksdGhpcy5oYW5kbGVycy5kcmFnLnN0b3BEb3duPQohMSl9LGNsaWNrb3V0RmVhdHVyZTpmdW5jdGlvbihhKXt0aGlzLmhhbmRsZXJzLmZlYXR1cmUudG91Y2gmJnRoaXMub3ZlciYmKHRoaXMub3V0RmVhdHVyZShhKSx0aGlzLmhhbmRsZXJzLmRyYWcuc3RvcERvd249ITApfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5sYXllcj1udWxsO09wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuZGVzdHJveS5hcHBseSh0aGlzLFtdKX0sYWN0aXZhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oYW5kbGVycy5mZWF0dXJlLmFjdGl2YXRlKCkmJk9wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuYWN0aXZhdGUuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxkZWFjdGl2YXRlOmZ1bmN0aW9uKCl7dGhpcy5oYW5kbGVycy5kcmFnLmRlYWN0aXZhdGUoKTt0aGlzLmhhbmRsZXJzLmZlYXR1cmUuZGVhY3RpdmF0ZSgpO3RoaXMuZmVhdHVyZT1udWxsO3RoaXMuZHJhZ2dpbmc9ITE7dGhpcy5sYXN0UGl4ZWw9bnVsbDtPcGVuTGF5ZXJzLkVsZW1lbnQucmVtb3ZlQ2xhc3ModGhpcy5tYXAudmlld1BvcnREaXYsCnRoaXMuZGlzcGxheUNsYXNzKyJPdmVyIik7cmV0dXJuIE9wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuZGVhY3RpdmF0ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LG92ZXJGZWF0dXJlOmZ1bmN0aW9uKGEpe3ZhciBiPSExO3RoaXMuaGFuZGxlcnMuZHJhZy5kcmFnZ2luZz90aGlzLm92ZXI9dGhpcy5mZWF0dXJlLmlkPT1hLmlkPyEwOiExOih0aGlzLmZlYXR1cmU9YSx0aGlzLmhhbmRsZXJzLmRyYWcuYWN0aXZhdGUoKSx0aGlzLm92ZXI9Yj0hMCxPcGVuTGF5ZXJzLkVsZW1lbnQuYWRkQ2xhc3ModGhpcy5tYXAudmlld1BvcnREaXYsdGhpcy5kaXNwbGF5Q2xhc3MrIk92ZXIiKSx0aGlzLm9uRW50ZXIoYSkpO3JldHVybiBifSxkb3duRmVhdHVyZTpmdW5jdGlvbihhKXt0aGlzLmxhc3RQaXhlbD1hO3RoaXMub25TdGFydCh0aGlzLmZlYXR1cmUsYSl9LG1vdmVGZWF0dXJlOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMubWFwLmdldFJlc29sdXRpb24oKTt0aGlzLmZlYXR1cmUuZ2VvbWV0cnkubW92ZShiKgooYS54LXRoaXMubGFzdFBpeGVsLngpLGIqKHRoaXMubGFzdFBpeGVsLnktYS55KSk7dGhpcy5sYXllci5kcmF3RmVhdHVyZSh0aGlzLmZlYXR1cmUpO3RoaXMubGFzdFBpeGVsPWE7dGhpcy5vbkRyYWcodGhpcy5mZWF0dXJlLGEpfSx1cEZlYXR1cmU6ZnVuY3Rpb24oYSl7dGhpcy5vdmVyfHx0aGlzLmhhbmRsZXJzLmRyYWcuZGVhY3RpdmF0ZSgpfSxkb25lRHJhZ2dpbmc6ZnVuY3Rpb24oYSl7dGhpcy5vbkNvbXBsZXRlKHRoaXMuZmVhdHVyZSxhKX0sb3V0RmVhdHVyZTpmdW5jdGlvbihhKXt0aGlzLmhhbmRsZXJzLmRyYWcuZHJhZ2dpbmc/dGhpcy5mZWF0dXJlLmlkPT1hLmlkJiYodGhpcy5vdmVyPSExKToodGhpcy5vdmVyPSExLHRoaXMuaGFuZGxlcnMuZHJhZy5kZWFjdGl2YXRlKCksT3BlbkxheWVycy5FbGVtZW50LnJlbW92ZUNsYXNzKHRoaXMubWFwLnZpZXdQb3J0RGl2LHRoaXMuZGlzcGxheUNsYXNzKyJPdmVyIiksdGhpcy5vbkxlYXZlKGEpLHRoaXMuZmVhdHVyZT1udWxsKX0sCmNhbmNlbDpmdW5jdGlvbigpe3RoaXMuaGFuZGxlcnMuZHJhZy5kZWFjdGl2YXRlKCk7dGhpcy5vdmVyPSExfSxzZXRNYXA6ZnVuY3Rpb24oYSl7dGhpcy5oYW5kbGVycy5kcmFnLnNldE1hcChhKTt0aGlzLmhhbmRsZXJzLmZlYXR1cmUuc2V0TWFwKGEpO09wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuc2V0TWFwLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Db250cm9sLkRyYWdGZWF0dXJlIn0pO09wZW5MYXllcnMuQ29udHJvbC5UcmFuc2Zvcm1GZWF0dXJlPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Db250cm9sLHtnZW9tZXRyeVR5cGVzOm51bGwsbGF5ZXI6bnVsbCxwcmVzZXJ2ZUFzcGVjdFJhdGlvOiExLHJvdGF0ZTohMCxmZWF0dXJlOm51bGwscmVuZGVySW50ZW50OiJ0ZW1wb3JhcnkiLHJvdGF0aW9uSGFuZGxlU3ltYm9saXplcjpudWxsLGJveDpudWxsLGNlbnRlcjpudWxsLHNjYWxlOjEscmF0aW86MSxyb3RhdGlvbjowLGhhbmRsZXM6bnVsbCxyb3RhdGlvbkhhbmRsZXM6bnVsbCxkcmFnQ29udHJvbDpudWxsLGlycmVndWxhcjohMSxpbml0aWFsaXplOmZ1bmN0aW9uKGEsYil7T3BlbkxheWVycy5Db250cm9sLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsW2JdKTt0aGlzLmxheWVyPWE7dGhpcy5yb3RhdGlvbkhhbmRsZVN5bWJvbGl6ZXJ8fCh0aGlzLnJvdGF0aW9uSGFuZGxlU3ltYm9saXplcj17c3Ryb2tlOiExLHBvaW50UmFkaXVzOjEwLGZpbGxPcGFjaXR5OjAsCmN1cnNvcjoicG9pbnRlciJ9KTt0aGlzLmNyZWF0ZUJveCgpO3RoaXMuY3JlYXRlQ29udHJvbCgpfSxhY3RpdmF0ZTpmdW5jdGlvbigpe3ZhciBhPSExO09wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuYWN0aXZhdGUuYXBwbHkodGhpcyxhcmd1bWVudHMpJiYodGhpcy5kcmFnQ29udHJvbC5hY3RpdmF0ZSgpLHRoaXMubGF5ZXIuYWRkRmVhdHVyZXMoW3RoaXMuYm94XSksdGhpcy5yb3RhdGUmJnRoaXMubGF5ZXIuYWRkRmVhdHVyZXModGhpcy5yb3RhdGlvbkhhbmRsZXMpLHRoaXMubGF5ZXIuYWRkRmVhdHVyZXModGhpcy5oYW5kbGVzKSxhPSEwKTtyZXR1cm4gYX0sZGVhY3RpdmF0ZTpmdW5jdGlvbigpe3ZhciBhPSExO09wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuZGVhY3RpdmF0ZS5hcHBseSh0aGlzLGFyZ3VtZW50cykmJih0aGlzLmxheWVyLnJlbW92ZUZlYXR1cmVzKHRoaXMuaGFuZGxlcyksdGhpcy5yb3RhdGUmJnRoaXMubGF5ZXIucmVtb3ZlRmVhdHVyZXModGhpcy5yb3RhdGlvbkhhbmRsZXMpLAp0aGlzLmxheWVyLnJlbW92ZUZlYXR1cmVzKFt0aGlzLmJveF0pLHRoaXMuZHJhZ0NvbnRyb2wuZGVhY3RpdmF0ZSgpLGE9ITApO3JldHVybiBhfSxzZXRNYXA6ZnVuY3Rpb24oYSl7dGhpcy5kcmFnQ29udHJvbC5zZXRNYXAoYSk7T3BlbkxheWVycy5Db250cm9sLnByb3RvdHlwZS5zZXRNYXAuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxzZXRGZWF0dXJlOmZ1bmN0aW9uKGEsYil7Yj1PcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyhiLHtyb3RhdGlvbjowLHNjYWxlOjEscmF0aW86MX0pO3ZhciBjPXRoaXMucm90YXRpb24sZD10aGlzLmNlbnRlcjtPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHRoaXMsYik7aWYoITEhPT10aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoImJlZm9yZXNldGZlYXR1cmUiLHtmZWF0dXJlOmF9KSl7dGhpcy5mZWF0dXJlPWE7dGhpcy5hY3RpdmF0ZSgpO3RoaXMuX3NldGZlYXR1cmU9ITA7dmFyIGU9dGhpcy5mZWF0dXJlLmdlb21ldHJ5LmdldEJvdW5kcygpO3RoaXMuYm94Lm1vdmUoZS5nZXRDZW50ZXJMb25MYXQoKSk7CnRoaXMuYm94Lmdlb21ldHJ5LnJvdGF0ZSgtYyxkKTt0aGlzLl9hbmdsZT0wO3RoaXMucm90YXRpb24/KGM9YS5nZW9tZXRyeS5jbG9uZSgpLGMucm90YXRlKC10aGlzLnJvdGF0aW9uLHRoaXMuY2VudGVyKSxjPW5ldyBPcGVuTGF5ZXJzLkZlYXR1cmUuVmVjdG9yKGMuZ2V0Qm91bmRzKCkudG9HZW9tZXRyeSgpKSxjLmdlb21ldHJ5LnJvdGF0ZSh0aGlzLnJvdGF0aW9uLHRoaXMuY2VudGVyKSx0aGlzLmJveC5nZW9tZXRyeS5yb3RhdGUodGhpcy5yb3RhdGlvbix0aGlzLmNlbnRlciksdGhpcy5ib3gubW92ZShjLmdlb21ldHJ5LmdldEJvdW5kcygpLmdldENlbnRlckxvbkxhdCgpKSxjPWMuZ2VvbWV0cnkuY29tcG9uZW50c1swXS5jb21wb25lbnRzWzBdLmdldEJvdW5kcygpLmdldENlbnRlckxvbkxhdCgpKTpjPW5ldyBPcGVuTGF5ZXJzLkxvbkxhdChlLmxlZnQsZS5ib3R0b20pO3RoaXMuaGFuZGxlc1swXS5tb3ZlKGMpO2RlbGV0ZSB0aGlzLl9zZXRmZWF0dXJlO3RoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgic2V0ZmVhdHVyZSIsCntmZWF0dXJlOmF9KX19LHVuc2V0RmVhdHVyZTpmdW5jdGlvbigpe3RoaXMuYWN0aXZlP3RoaXMuZGVhY3RpdmF0ZSgpOih0aGlzLmZlYXR1cmU9bnVsbCx0aGlzLnJvdGF0aW9uPTAsdGhpcy5yYXRpbz10aGlzLnNjYWxlPTEpfSxjcmVhdGVCb3g6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO3RoaXMuY2VudGVyPW5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KDAsMCk7dGhpcy5ib3g9bmV3IE9wZW5MYXllcnMuRmVhdHVyZS5WZWN0b3IobmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuTGluZVN0cmluZyhbbmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoLTEsLTEpLG5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KDAsLTEpLG5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KDEsLTEpLG5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KDEsMCksbmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoMSwxKSxuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludCgwLDEpLG5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KC0xLAoxKSxuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludCgtMSwwKSxuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludCgtMSwtMSldKSxudWxsLCJzdHJpbmciPT10eXBlb2YgdGhpcy5yZW5kZXJJbnRlbnQ/bnVsbDp0aGlzLnJlbmRlckludGVudCk7dGhpcy5ib3guZ2VvbWV0cnkubW92ZT1mdW5jdGlvbihiLGMpe2EuX21vdmluZz0hMDtPcGVuTGF5ZXJzLkdlb21ldHJ5LkxpbmVTdHJpbmcucHJvdG90eXBlLm1vdmUuYXBwbHkodGhpcyxhcmd1bWVudHMpO2EuY2VudGVyLm1vdmUoYixjKTtkZWxldGUgYS5fbW92aW5nfTtmb3IodmFyIGI9ZnVuY3Rpb24oYSxiKXtPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50LnByb3RvdHlwZS5tb3ZlLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLl9yb3RhdGlvbkhhbmRsZSYmdGhpcy5fcm90YXRpb25IYW5kbGUuZ2VvbWV0cnkubW92ZShhLGIpO3RoaXMuX2hhbmRsZS5nZW9tZXRyeS5tb3ZlKGEsYil9LGM9ZnVuY3Rpb24oYSxiLGMpe09wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQucHJvdG90eXBlLnJlc2l6ZS5hcHBseSh0aGlzLAphcmd1bWVudHMpO3RoaXMuX3JvdGF0aW9uSGFuZGxlJiZ0aGlzLl9yb3RhdGlvbkhhbmRsZS5nZW9tZXRyeS5yZXNpemUoYSxiLGMpO3RoaXMuX2hhbmRsZS5nZW9tZXRyeS5yZXNpemUoYSxiLGMpfSxkPWZ1bmN0aW9uKGEsYil7T3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludC5wcm90b3R5cGUucm90YXRlLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLl9yb3RhdGlvbkhhbmRsZSYmdGhpcy5fcm90YXRpb25IYW5kbGUuZ2VvbWV0cnkucm90YXRlKGEsYik7dGhpcy5faGFuZGxlLmdlb21ldHJ5LnJvdGF0ZShhLGIpfSxlPWZ1bmN0aW9uKGIsYyl7dmFyIGQ9dGhpcy54LGU9dGhpcy55O09wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQucHJvdG90eXBlLm1vdmUuY2FsbCh0aGlzLGIsYyk7aWYoIWEuX21vdmluZyl7dmFyIGY9YS5kcmFnQ29udHJvbC5oYW5kbGVycy5kcmFnLmV2dCxnPSEoIWEuX3NldGZlYXR1cmUmJmEucHJlc2VydmVBc3BlY3RSYXRpbykmJiEoZiYmZi5zaGlmdEtleSksCmg9bmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoZCxlKSxmPWEuY2VudGVyO3RoaXMucm90YXRlKC1hLnJvdGF0aW9uLGYpO2gucm90YXRlKC1hLnJvdGF0aW9uLGYpO3ZhciBrPXRoaXMueC1mLngsbD10aGlzLnktZi55LG09ay0odGhpcy54LWgueCksbj1sLSh0aGlzLnktaC55KTthLmlycmVndWxhciYmIWEuX3NldGZlYXR1cmUmJihrLT0odGhpcy54LWgueCkvMixsLT0odGhpcy55LWgueSkvMik7dGhpcy54PWQ7dGhpcy55PWU7aD0xO2c/KGw9MUUtNT5NYXRoLmFicyhuKT8xOmwvbixoPSgxRS01Pk1hdGguYWJzKG0pPzE6ay9tKS9sKToobT1NYXRoLnNxcnQobSptK24qbiksbD1NYXRoLnNxcnQoayprK2wqbCkvbSk7YS5fbW92aW5nPSEwO2EuYm94Lmdlb21ldHJ5LnJvdGF0ZSgtYS5yb3RhdGlvbixmKTtkZWxldGUgYS5fbW92aW5nO2EuYm94Lmdlb21ldHJ5LnJlc2l6ZShsLGYsaCk7YS5ib3guZ2VvbWV0cnkucm90YXRlKGEucm90YXRpb24sZik7YS50cmFuc2Zvcm1GZWF0dXJlKHtzY2FsZTpsLApyYXRpbzpofSk7YS5pcnJlZ3VsYXImJiFhLl9zZXRmZWF0dXJlJiYoaz1mLmNsb25lKCksay54Kz0xRS01Pk1hdGguYWJzKGQtZi54KT8wOnRoaXMueC1kLGsueSs9MUUtNT5NYXRoLmFicyhlLWYueSk/MDp0aGlzLnktZSxhLmJveC5nZW9tZXRyeS5tb3ZlKHRoaXMueC1kLHRoaXMueS1lKSxhLnRyYW5zZm9ybUZlYXR1cmUoe2NlbnRlcjprfSkpfX0sZj1mdW5jdGlvbihiLGMpe3ZhciBkPXRoaXMueCxlPXRoaXMueTtPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50LnByb3RvdHlwZS5tb3ZlLmNhbGwodGhpcyxiLGMpO2lmKCFhLl9tb3Zpbmcpe3ZhciBmPWEuZHJhZ0NvbnRyb2wuaGFuZGxlcnMuZHJhZy5ldnQsZj1mJiZmLnNoaWZ0S2V5PzQ1OjEsZz1hLmNlbnRlcixoPXRoaXMueC1nLngsaz10aGlzLnktZy55O3RoaXMueD1kO3RoaXMueT1lO2Q9TWF0aC5hdGFuMihrLWMsaC1iKTtkPU1hdGguYXRhbjIoayxoKS1kO2QqPTE4MC9NYXRoLlBJO2EuX2FuZ2xlPShhLl9hbmdsZStkKSUKMzYwO2Q9YS5yb3RhdGlvbiVmO2lmKE1hdGguYWJzKGEuX2FuZ2xlKT49Znx8MCE9PWQpZD1NYXRoLnJvdW5kKGEuX2FuZ2xlL2YpKmYtZCxhLl9hbmdsZT0wLGEuYm94Lmdlb21ldHJ5LnJvdGF0ZShkLGcpLGEudHJhbnNmb3JtRmVhdHVyZSh7cm90YXRpb246ZH0pfX0sZz1BcnJheSg4KSxoPUFycmF5KDQpLGssbCxtLG49InN3IHMgc2UgZSBuZSBuIG53IHciLnNwbGl0KCIgIikscD0wOzg+cDsrK3Apaz10aGlzLmJveC5nZW9tZXRyeS5jb21wb25lbnRzW3BdLGw9bmV3IE9wZW5MYXllcnMuRmVhdHVyZS5WZWN0b3Ioay5jbG9uZSgpLHtyb2xlOm5bcF0rIi1yZXNpemUifSwic3RyaW5nIj09dHlwZW9mIHRoaXMucmVuZGVySW50ZW50P251bGw6dGhpcy5yZW5kZXJJbnRlbnQpLDA9PXAlMiYmKG09bmV3IE9wZW5MYXllcnMuRmVhdHVyZS5WZWN0b3Ioay5jbG9uZSgpLHtyb2xlOm5bcF0rIi1yb3RhdGUifSwic3RyaW5nIj09dHlwZW9mIHRoaXMucm90YXRpb25IYW5kbGVTeW1ib2xpemVyPwpudWxsOnRoaXMucm90YXRpb25IYW5kbGVTeW1ib2xpemVyKSxtLmdlb21ldHJ5Lm1vdmU9ZixrLl9yb3RhdGlvbkhhbmRsZT1tLGhbcC8yXT1tKSxrLm1vdmU9YixrLnJlc2l6ZT1jLGsucm90YXRlPWQsbC5nZW9tZXRyeS5tb3ZlPWUsay5faGFuZGxlPWwsZ1twXT1sO3RoaXMucm90YXRpb25IYW5kbGVzPWg7dGhpcy5oYW5kbGVzPWd9LGNyZWF0ZUNvbnRyb2w6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO3RoaXMuZHJhZ0NvbnRyb2w9bmV3IE9wZW5MYXllcnMuQ29udHJvbC5EcmFnRmVhdHVyZSh0aGlzLmxheWVyLHtkb2N1bWVudERyYWc6ITAsbW92ZUZlYXR1cmU6ZnVuY3Rpb24oYil7dGhpcy5mZWF0dXJlPT09YS5mZWF0dXJlJiYodGhpcy5mZWF0dXJlPWEuYm94KTtPcGVuTGF5ZXJzLkNvbnRyb2wuRHJhZ0ZlYXR1cmUucHJvdG90eXBlLm1vdmVGZWF0dXJlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sb25EcmFnOmZ1bmN0aW9uKGIsYyl7Yj09PWEuYm94JiZhLnRyYW5zZm9ybUZlYXR1cmUoe2NlbnRlcjphLmNlbnRlcn0pfSwKb25TdGFydDpmdW5jdGlvbihiLGMpe3ZhciBkPSFhLmdlb21ldHJ5VHlwZXN8fC0xIT09T3BlbkxheWVycy5VdGlsLmluZGV4T2YoYS5nZW9tZXRyeVR5cGVzLGIuZ2VvbWV0cnkuQ0xBU1NfTkFNRSksZT1PcGVuTGF5ZXJzLlV0aWwuaW5kZXhPZihhLmhhbmRsZXMsYiksZT1lK09wZW5MYXllcnMuVXRpbC5pbmRleE9mKGEucm90YXRpb25IYW5kbGVzLGIpO2IhPT1hLmZlYXR1cmUmJihiIT09YS5ib3gmJi0yPT1lJiZkKSYmYS5zZXRGZWF0dXJlKGIpfSxvbkNvbXBsZXRlOmZ1bmN0aW9uKGIsYyl7YS5ldmVudHMudHJpZ2dlckV2ZW50KCJ0cmFuc2Zvcm1jb21wbGV0ZSIse2ZlYXR1cmU6YS5mZWF0dXJlfSl9fSl9LGRyYXdIYW5kbGVzOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPXRoaXMubGF5ZXIsYj0wOzg+YjsrK2IpdGhpcy5yb3RhdGUmJjA9PT1iJTImJmEuZHJhd0ZlYXR1cmUodGhpcy5yb3RhdGlvbkhhbmRsZXNbYi8yXSx0aGlzLnJvdGF0aW9uSGFuZGxlU3ltYm9saXplciksYS5kcmF3RmVhdHVyZSh0aGlzLmhhbmRsZXNbYl0sCnRoaXMucmVuZGVySW50ZW50KX0sdHJhbnNmb3JtRmVhdHVyZTpmdW5jdGlvbihhKXtpZighdGhpcy5fc2V0ZmVhdHVyZSl7dGhpcy5zY2FsZSo9YS5zY2FsZXx8MTt0aGlzLnJhdGlvKj1hLnJhdGlvfHwxO3ZhciBiPXRoaXMucm90YXRpb247dGhpcy5yb3RhdGlvbj0odGhpcy5yb3RhdGlvbisoYS5yb3RhdGlvbnx8MCkpJTM2MDtpZighMSE9PXRoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgiYmVmb3JldHJhbnNmb3JtIixhKSl7dmFyIGM9dGhpcy5mZWF0dXJlLGQ9Yy5nZW9tZXRyeSxlPXRoaXMuY2VudGVyO2Qucm90YXRlKC1iLGUpO2Euc2NhbGV8fGEucmF0aW8/ZC5yZXNpemUoYS5zY2FsZSxlLGEucmF0aW8pOmEuY2VudGVyJiZjLm1vdmUoYS5jZW50ZXIuZ2V0Qm91bmRzKCkuZ2V0Q2VudGVyTG9uTGF0KCkpO2Qucm90YXRlKHRoaXMucm90YXRpb24sZSk7dGhpcy5sYXllci5kcmF3RmVhdHVyZShjKTtjLnRvU3RhdGUoT3BlbkxheWVycy5TdGF0ZS5VUERBVEUpO3RoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgidHJhbnNmb3JtIiwKYSl9fXRoaXMubGF5ZXIuZHJhd0ZlYXR1cmUodGhpcy5ib3gsdGhpcy5yZW5kZXJJbnRlbnQpO3RoaXMuZHJhd0hhbmRsZXMoKX0sZGVzdHJveTpmdW5jdGlvbigpe2Zvcih2YXIgYSxiPTA7OD5iOysrYilhPXRoaXMuYm94Lmdlb21ldHJ5LmNvbXBvbmVudHNbYl0sYS5faGFuZGxlLmRlc3Ryb3koKSxhLl9oYW5kbGU9bnVsbCxhLl9yb3RhdGlvbkhhbmRsZSYmYS5fcm90YXRpb25IYW5kbGUuZGVzdHJveSgpLGEuX3JvdGF0aW9uSGFuZGxlPW51bGw7dGhpcy5yb3RhdGlvbkhhbmRsZXM9dGhpcy5yb3RhdGlvbkhhbmRsZVN5bWJvbGl6ZXI9dGhpcy5oYW5kbGVzPXRoaXMuZmVhdHVyZT10aGlzLmNlbnRlcj1udWxsO3RoaXMuYm94LmRlc3Ryb3koKTt0aGlzLmxheWVyPXRoaXMuYm94PW51bGw7dGhpcy5kcmFnQ29udHJvbC5kZXN0cm95KCk7dGhpcy5kcmFnQ29udHJvbD1udWxsO09wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuZGVzdHJveS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LApDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkNvbnRyb2wuVHJhbnNmb3JtRmVhdHVyZSJ9KTtPcGVuTGF5ZXJzLkhhbmRsZXIuQm94PU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5IYW5kbGVyLHtkcmFnSGFuZGxlcjpudWxsLGJveERpdkNsYXNzTmFtZToib2xIYW5kbGVyQm94Wm9vbUJveCIsYm94T2Zmc2V0czpudWxsLGluaXRpYWxpemU6ZnVuY3Rpb24oYSxiLGMpe09wZW5MYXllcnMuSGFuZGxlci5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5kcmFnSGFuZGxlcj1uZXcgT3BlbkxheWVycy5IYW5kbGVyLkRyYWcodGhpcyx7ZG93bjp0aGlzLnN0YXJ0Qm94LG1vdmU6dGhpcy5tb3ZlQm94LG91dDp0aGlzLnJlbW92ZUJveCx1cDp0aGlzLmVuZEJveH0se2tleU1hc2s6dGhpcy5rZXlNYXNrfSl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXtPcGVuTGF5ZXJzLkhhbmRsZXIucHJvdG90eXBlLmRlc3Ryb3kuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMuZHJhZ0hhbmRsZXImJih0aGlzLmRyYWdIYW5kbGVyLmRlc3Ryb3koKSx0aGlzLmRyYWdIYW5kbGVyPQpudWxsKX0sc2V0TWFwOmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuSGFuZGxlci5wcm90b3R5cGUuc2V0TWFwLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLmRyYWdIYW5kbGVyJiZ0aGlzLmRyYWdIYW5kbGVyLnNldE1hcChhKX0sc3RhcnRCb3g6ZnVuY3Rpb24oYSl7dGhpcy5jYWxsYmFjaygic3RhcnQiLFtdKTt0aGlzLnpvb21Cb3g9T3BlbkxheWVycy5VdGlsLmNyZWF0ZURpdigiem9vbUJveCIse3g6LTk5OTkseTotOTk5OX0pO3RoaXMuem9vbUJveC5jbGFzc05hbWU9dGhpcy5ib3hEaXZDbGFzc05hbWU7dGhpcy56b29tQm94LnN0eWxlLnpJbmRleD10aGlzLm1hcC5aX0lOREVYX0JBU0UuUG9wdXAtMTt0aGlzLm1hcC52aWV3UG9ydERpdi5hcHBlbmRDaGlsZCh0aGlzLnpvb21Cb3gpO09wZW5MYXllcnMuRWxlbWVudC5hZGRDbGFzcyh0aGlzLm1hcC52aWV3UG9ydERpdiwib2xEcmF3Qm94Iil9LG1vdmVCb3g6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5kcmFnSGFuZGxlci5zdGFydC54LApjPXRoaXMuZHJhZ0hhbmRsZXIuc3RhcnQueSxkPU1hdGguYWJzKGItYS54KSxlPU1hdGguYWJzKGMtYS55KSxmPXRoaXMuZ2V0Qm94T2Zmc2V0cygpO3RoaXMuem9vbUJveC5zdHlsZS53aWR0aD1kK2Yud2lkdGgrMSsicHgiO3RoaXMuem9vbUJveC5zdHlsZS5oZWlnaHQ9ZStmLmhlaWdodCsxKyJweCI7dGhpcy56b29tQm94LnN0eWxlLmxlZnQ9KGEueDxiP2ItZC1mLmxlZnQ6Yi1mLmxlZnQpKyJweCI7dGhpcy56b29tQm94LnN0eWxlLnRvcD0oYS55PGM/Yy1lLWYudG9wOmMtZi50b3ApKyJweCJ9LGVuZEJveDpmdW5jdGlvbihhKXt2YXIgYjtpZig1PE1hdGguYWJzKHRoaXMuZHJhZ0hhbmRsZXIuc3RhcnQueC1hLngpfHw1PE1hdGguYWJzKHRoaXMuZHJhZ0hhbmRsZXIuc3RhcnQueS1hLnkpKXt2YXIgYz10aGlzLmRyYWdIYW5kbGVyLnN0YXJ0O2I9TWF0aC5taW4oYy55LGEueSk7dmFyIGQ9TWF0aC5tYXgoYy55LGEueSksZT1NYXRoLm1pbihjLngsYS54KTthPU1hdGgubWF4KGMueCwKYS54KTtiPW5ldyBPcGVuTGF5ZXJzLkJvdW5kcyhlLGQsYSxiKX1lbHNlIGI9dGhpcy5kcmFnSGFuZGxlci5zdGFydC5jbG9uZSgpO3RoaXMucmVtb3ZlQm94KCk7dGhpcy5jYWxsYmFjaygiZG9uZSIsW2JdKX0scmVtb3ZlQm94OmZ1bmN0aW9uKCl7dGhpcy5tYXAudmlld1BvcnREaXYucmVtb3ZlQ2hpbGQodGhpcy56b29tQm94KTt0aGlzLmJveE9mZnNldHM9dGhpcy56b29tQm94PW51bGw7T3BlbkxheWVycy5FbGVtZW50LnJlbW92ZUNsYXNzKHRoaXMubWFwLnZpZXdQb3J0RGl2LCJvbERyYXdCb3giKX0sYWN0aXZhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gT3BlbkxheWVycy5IYW5kbGVyLnByb3RvdHlwZS5hY3RpdmF0ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk/KHRoaXMuZHJhZ0hhbmRsZXIuYWN0aXZhdGUoKSwhMCk6ITF9LGRlYWN0aXZhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gT3BlbkxheWVycy5IYW5kbGVyLnByb3RvdHlwZS5kZWFjdGl2YXRlLmFwcGx5KHRoaXMsYXJndW1lbnRzKT8KKHRoaXMuZHJhZ0hhbmRsZXIuZGVhY3RpdmF0ZSgpJiZ0aGlzLnpvb21Cb3gmJnRoaXMucmVtb3ZlQm94KCksITApOiExfSxnZXRCb3hPZmZzZXRzOmZ1bmN0aW9uKCl7aWYoIXRoaXMuYm94T2Zmc2V0cyl7dmFyIGE9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7YS5zdHlsZS5wb3NpdGlvbj0iYWJzb2x1dGUiO2Euc3R5bGUuYm9yZGVyPSIxcHggc29saWQgYmxhY2siO2Euc3R5bGUud2lkdGg9IjNweCI7ZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChhKTt2YXIgYj0zPT1hLmNsaWVudFdpZHRoO2RvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoYSk7dmFyIGE9cGFyc2VJbnQoT3BlbkxheWVycy5FbGVtZW50LmdldFN0eWxlKHRoaXMuem9vbUJveCwiYm9yZGVyLWxlZnQtd2lkdGgiKSksYz1wYXJzZUludChPcGVuTGF5ZXJzLkVsZW1lbnQuZ2V0U3R5bGUodGhpcy56b29tQm94LCJib3JkZXItcmlnaHQtd2lkdGgiKSksZD1wYXJzZUludChPcGVuTGF5ZXJzLkVsZW1lbnQuZ2V0U3R5bGUodGhpcy56b29tQm94LAoiYm9yZGVyLXRvcC13aWR0aCIpKSxlPXBhcnNlSW50KE9wZW5MYXllcnMuRWxlbWVudC5nZXRTdHlsZSh0aGlzLnpvb21Cb3gsImJvcmRlci1ib3R0b20td2lkdGgiKSk7dGhpcy5ib3hPZmZzZXRzPXtsZWZ0OmEscmlnaHQ6Yyx0b3A6ZCxib3R0b206ZSx3aWR0aDohMT09PWI/YStjOjAsaGVpZ2h0OiExPT09Yj9kK2U6MH19cmV0dXJuIHRoaXMuYm94T2Zmc2V0c30sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5IYW5kbGVyLkJveCJ9KTtPcGVuTGF5ZXJzLkNvbnRyb2wuWm9vbUJveD1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuQ29udHJvbCx7dHlwZTpPcGVuTGF5ZXJzLkNvbnRyb2wuVFlQRV9UT09MLG91dDohMSxrZXlNYXNrOm51bGwsYWx3YXlzWm9vbTohMSx6b29tT25DbGljazohMCxkcmF3OmZ1bmN0aW9uKCl7dGhpcy5oYW5kbGVyPW5ldyBPcGVuTGF5ZXJzLkhhbmRsZXIuQm94KHRoaXMse2RvbmU6dGhpcy56b29tQm94fSx7a2V5TWFzazp0aGlzLmtleU1hc2t9KX0sem9vbUJveDpmdW5jdGlvbihhKXtpZihhIGluc3RhbmNlb2YgT3BlbkxheWVycy5Cb3VuZHMpe3ZhciBiLGM9YS5nZXRDZW50ZXJQaXhlbCgpO2lmKHRoaXMub3V0KXtiPU1hdGgubWluKHRoaXMubWFwLnNpemUuaC8oYS5ib3R0b20tYS50b3ApLHRoaXMubWFwLnNpemUudy8oYS5yaWdodC1hLmxlZnQpKTt2YXIgZD10aGlzLm1hcC5nZXRFeHRlbnQoKSxlPXRoaXMubWFwLmdldExvbkxhdEZyb21QaXhlbChjKSxmPWUubG9uLWQuZ2V0V2lkdGgoKS8KMipiO2E9ZS5sb24rZC5nZXRXaWR0aCgpLzIqYjt2YXIgZz1lLmxhdC1kLmdldEhlaWdodCgpLzIqYjtiPWUubGF0K2QuZ2V0SGVpZ2h0KCkvMipiO2I9bmV3IE9wZW5MYXllcnMuQm91bmRzKGYsZyxhLGIpfWVsc2UgZj10aGlzLm1hcC5nZXRMb25MYXRGcm9tUGl4ZWwoe3g6YS5sZWZ0LHk6YS5ib3R0b219KSxhPXRoaXMubWFwLmdldExvbkxhdEZyb21QaXhlbCh7eDphLnJpZ2h0LHk6YS50b3B9KSxiPW5ldyBPcGVuTGF5ZXJzLkJvdW5kcyhmLmxvbixmLmxhdCxhLmxvbixhLmxhdCk7Zj10aGlzLm1hcC5nZXRab29tKCk7Zz10aGlzLm1hcC5nZXRTaXplKCk7YT1nLncvMjtnPWcuaC8yO2I9dGhpcy5tYXAuZ2V0Wm9vbUZvckV4dGVudChiKTtkPXRoaXMubWFwLmdldFJlc29sdXRpb24oKTtlPXRoaXMubWFwLmdldFJlc29sdXRpb25Gb3Jab29tKGIpO2Q9PWU/dGhpcy5tYXAuc2V0Q2VudGVyKHRoaXMubWFwLmdldExvbkxhdEZyb21QaXhlbChjKSk6dGhpcy5tYXAuem9vbVRvKGIsCnt4OihkKmMueC1lKmEpLyhkLWUpLHk6KGQqYy55LWUqZykvKGQtZSl9KTtmPT10aGlzLm1hcC5nZXRab29tKCkmJiEwPT10aGlzLmFsd2F5c1pvb20mJnRoaXMubWFwLnpvb21UbyhmKyh0aGlzLm91dD8tMToxKSl9ZWxzZSB0aGlzLnpvb21PbkNsaWNrJiYodGhpcy5vdXQ/dGhpcy5tYXAuem9vbVRvKHRoaXMubWFwLmdldFpvb20oKS0xLGEpOnRoaXMubWFwLnpvb21Ubyh0aGlzLm1hcC5nZXRab29tKCkrMSxhKSl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuQ29udHJvbC5ab29tQm94In0pO09wZW5MYXllcnMuQ29udHJvbC5EcmFnUGFuPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Db250cm9sLHt0eXBlOk9wZW5MYXllcnMuQ29udHJvbC5UWVBFX1RPT0wscGFubmVkOiExLGludGVydmFsOjAsZG9jdW1lbnREcmFnOiExLGtpbmV0aWM6bnVsbCxlbmFibGVLaW5ldGljOiEwLGtpbmV0aWNJbnRlcnZhbDoxMCxkcmF3OmZ1bmN0aW9uKCl7aWYodGhpcy5lbmFibGVLaW5ldGljJiZPcGVuTGF5ZXJzLktpbmV0aWMpe3ZhciBhPXtpbnRlcnZhbDp0aGlzLmtpbmV0aWNJbnRlcnZhbH07Im9iamVjdCI9PT10eXBlb2YgdGhpcy5lbmFibGVLaW5ldGljJiYoYT1PcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKGEsdGhpcy5lbmFibGVLaW5ldGljKSk7dGhpcy5raW5ldGljPW5ldyBPcGVuTGF5ZXJzLktpbmV0aWMoYSl9dGhpcy5oYW5kbGVyPW5ldyBPcGVuTGF5ZXJzLkhhbmRsZXIuRHJhZyh0aGlzLHttb3ZlOnRoaXMucGFuTWFwLGRvbmU6dGhpcy5wYW5NYXBEb25lLGRvd246dGhpcy5wYW5NYXBTdGFydH0sCntpbnRlcnZhbDp0aGlzLmludGVydmFsLGRvY3VtZW50RHJhZzp0aGlzLmRvY3VtZW50RHJhZ30pfSxwYW5NYXBTdGFydDpmdW5jdGlvbigpe3RoaXMua2luZXRpYyYmdGhpcy5raW5ldGljLmJlZ2luKCl9LHBhbk1hcDpmdW5jdGlvbihhKXt0aGlzLmtpbmV0aWMmJnRoaXMua2luZXRpYy51cGRhdGUoYSk7dGhpcy5wYW5uZWQ9ITA7dGhpcy5tYXAucGFuKHRoaXMuaGFuZGxlci5sYXN0LngtYS54LHRoaXMuaGFuZGxlci5sYXN0LnktYS55LHtkcmFnZ2luZzohMCxhbmltYXRlOiExfSl9LHBhbk1hcERvbmU6ZnVuY3Rpb24oYSl7aWYodGhpcy5wYW5uZWQpe3ZhciBiPW51bGw7dGhpcy5raW5ldGljJiYoYj10aGlzLmtpbmV0aWMuZW5kKGEpKTt0aGlzLm1hcC5wYW4odGhpcy5oYW5kbGVyLmxhc3QueC1hLngsdGhpcy5oYW5kbGVyLmxhc3QueS1hLnkse2RyYWdnaW5nOiEhYixhbmltYXRlOiExfSk7aWYoYil7dmFyIGM9dGhpczt0aGlzLmtpbmV0aWMubW92ZShiLGZ1bmN0aW9uKGEsYiwKZil7Yy5tYXAucGFuKGEsYix7ZHJhZ2dpbmc6IWYsYW5pbWF0ZTohMX0pfSl9dGhpcy5wYW5uZWQ9ITF9fSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkNvbnRyb2wuRHJhZ1BhbiJ9KTtPcGVuTGF5ZXJzLkNvbnRyb2wuTmF2aWdhdGlvbj1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuQ29udHJvbCx7ZHJhZ1BhbjpudWxsLGRyYWdQYW5PcHRpb25zOm51bGwscGluY2hab29tOm51bGwscGluY2hab29tT3B0aW9uczpudWxsLGRvY3VtZW50RHJhZzohMSx6b29tQm94Om51bGwsem9vbUJveEVuYWJsZWQ6ITAsem9vbVdoZWVsRW5hYmxlZDohMCxtb3VzZVdoZWVsT3B0aW9uczpudWxsLGhhbmRsZVJpZ2h0Q2xpY2tzOiExLHpvb21Cb3hLZXlNYXNrOk9wZW5MYXllcnMuSGFuZGxlci5NT0RfU0hJRlQsYXV0b0FjdGl2YXRlOiEwLGluaXRpYWxpemU6ZnVuY3Rpb24oYSl7dGhpcy5oYW5kbGVycz17fTtPcGVuTGF5ZXJzLkNvbnRyb2wucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5kZWFjdGl2YXRlKCk7dGhpcy5kcmFnUGFuJiZ0aGlzLmRyYWdQYW4uZGVzdHJveSgpO3RoaXMuZHJhZ1Bhbj1udWxsOwp0aGlzLnpvb21Cb3gmJnRoaXMuem9vbUJveC5kZXN0cm95KCk7dGhpcy56b29tQm94PW51bGw7dGhpcy5waW5jaFpvb20mJnRoaXMucGluY2hab29tLmRlc3Ryb3koKTt0aGlzLnBpbmNoWm9vbT1udWxsO09wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuZGVzdHJveS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGFjdGl2YXRlOmZ1bmN0aW9uKCl7dGhpcy5kcmFnUGFuLmFjdGl2YXRlKCk7dGhpcy56b29tV2hlZWxFbmFibGVkJiZ0aGlzLmhhbmRsZXJzLndoZWVsLmFjdGl2YXRlKCk7dGhpcy5oYW5kbGVycy5jbGljay5hY3RpdmF0ZSgpO3RoaXMuem9vbUJveEVuYWJsZWQmJnRoaXMuem9vbUJveC5hY3RpdmF0ZSgpO3RoaXMucGluY2hab29tJiZ0aGlzLnBpbmNoWm9vbS5hY3RpdmF0ZSgpO3JldHVybiBPcGVuTGF5ZXJzLkNvbnRyb2wucHJvdG90eXBlLmFjdGl2YXRlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sZGVhY3RpdmF0ZTpmdW5jdGlvbigpe3RoaXMucGluY2hab29tJiZ0aGlzLnBpbmNoWm9vbS5kZWFjdGl2YXRlKCk7CnRoaXMuem9vbUJveC5kZWFjdGl2YXRlKCk7dGhpcy5kcmFnUGFuLmRlYWN0aXZhdGUoKTt0aGlzLmhhbmRsZXJzLmNsaWNrLmRlYWN0aXZhdGUoKTt0aGlzLmhhbmRsZXJzLndoZWVsLmRlYWN0aXZhdGUoKTtyZXR1cm4gT3BlbkxheWVycy5Db250cm9sLnByb3RvdHlwZS5kZWFjdGl2YXRlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sZHJhdzpmdW5jdGlvbigpe3RoaXMuaGFuZGxlUmlnaHRDbGlja3MmJih0aGlzLm1hcC52aWV3UG9ydERpdi5vbmNvbnRleHRtZW51PU9wZW5MYXllcnMuRnVuY3Rpb24uRmFsc2UpO3RoaXMuaGFuZGxlcnMuY2xpY2s9bmV3IE9wZW5MYXllcnMuSGFuZGxlci5DbGljayh0aGlzLHtjbGljazp0aGlzLmRlZmF1bHRDbGljayxkYmxjbGljazp0aGlzLmRlZmF1bHREYmxDbGljayxkYmxyaWdodGNsaWNrOnRoaXMuZGVmYXVsdERibFJpZ2h0Q2xpY2t9LHsiZG91YmxlIjohMCxzdG9wRG91YmxlOiEwfSk7dGhpcy5kcmFnUGFuPW5ldyBPcGVuTGF5ZXJzLkNvbnRyb2wuRHJhZ1BhbihPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHttYXA6dGhpcy5tYXAsCmRvY3VtZW50RHJhZzp0aGlzLmRvY3VtZW50RHJhZ30sdGhpcy5kcmFnUGFuT3B0aW9ucykpO3RoaXMuem9vbUJveD1uZXcgT3BlbkxheWVycy5Db250cm9sLlpvb21Cb3goe21hcDp0aGlzLm1hcCxrZXlNYXNrOnRoaXMuem9vbUJveEtleU1hc2t9KTt0aGlzLmRyYWdQYW4uZHJhdygpO3RoaXMuem9vbUJveC5kcmF3KCk7dGhpcy5oYW5kbGVycy53aGVlbD1uZXcgT3BlbkxheWVycy5IYW5kbGVyLk1vdXNlV2hlZWwodGhpcyx7dXA6dGhpcy53aGVlbFVwLGRvd246dGhpcy53aGVlbERvd259LE9wZW5MYXllcnMuVXRpbC5leHRlbmQodGhpcy5tYXAuZnJhY3Rpb25hbFpvb20/e306e2N1bXVsYXRpdmU6ITEsaW50ZXJ2YWw6NTAsbWF4RGVsdGE6Nn0sdGhpcy5tb3VzZVdoZWVsT3B0aW9ucykpO09wZW5MYXllcnMuQ29udHJvbC5QaW5jaFpvb20mJih0aGlzLnBpbmNoWm9vbT1uZXcgT3BlbkxheWVycy5Db250cm9sLlBpbmNoWm9vbShPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHttYXA6dGhpcy5tYXB9LAp0aGlzLnBpbmNoWm9vbU9wdGlvbnMpKSl9LGRlZmF1bHRDbGljazpmdW5jdGlvbihhKXthLmxhc3RUb3VjaGVzJiYyPT1hLmxhc3RUb3VjaGVzLmxlbmd0aCYmdGhpcy5tYXAuem9vbU91dCgpfSxkZWZhdWx0RGJsQ2xpY2s6ZnVuY3Rpb24oYSl7dGhpcy5tYXAuem9vbVRvKHRoaXMubWFwLnpvb20rMSxhLnh5KX0sZGVmYXVsdERibFJpZ2h0Q2xpY2s6ZnVuY3Rpb24oYSl7dGhpcy5tYXAuem9vbVRvKHRoaXMubWFwLnpvb20tMSxhLnh5KX0sd2hlZWxDaGFuZ2U6ZnVuY3Rpb24oYSxiKXt0aGlzLm1hcC5mcmFjdGlvbmFsWm9vbXx8KGI9TWF0aC5yb3VuZChiKSk7dmFyIGM9dGhpcy5tYXAuZ2V0Wm9vbSgpLGQ7ZD1NYXRoLm1heChjK2IsMCk7ZD1NYXRoLm1pbihkLHRoaXMubWFwLmdldE51bVpvb21MZXZlbHMoKSk7ZCE9PWMmJnRoaXMubWFwLnpvb21UbyhkLGEueHkpfSx3aGVlbFVwOmZ1bmN0aW9uKGEsYil7dGhpcy53aGVlbENoYW5nZShhLGJ8fDEpfSx3aGVlbERvd246ZnVuY3Rpb24oYSwKYil7dGhpcy53aGVlbENoYW5nZShhLGJ8fC0xKX0sZGlzYWJsZVpvb21Cb3g6ZnVuY3Rpb24oKXt0aGlzLnpvb21Cb3hFbmFibGVkPSExO3RoaXMuem9vbUJveC5kZWFjdGl2YXRlKCl9LGVuYWJsZVpvb21Cb3g6ZnVuY3Rpb24oKXt0aGlzLnpvb21Cb3hFbmFibGVkPSEwO3RoaXMuYWN0aXZlJiZ0aGlzLnpvb21Cb3guYWN0aXZhdGUoKX0sZGlzYWJsZVpvb21XaGVlbDpmdW5jdGlvbigpe3RoaXMuem9vbVdoZWVsRW5hYmxlZD0hMTt0aGlzLmhhbmRsZXJzLndoZWVsLmRlYWN0aXZhdGUoKX0sZW5hYmxlWm9vbVdoZWVsOmZ1bmN0aW9uKCl7dGhpcy56b29tV2hlZWxFbmFibGVkPSEwO3RoaXMuYWN0aXZlJiZ0aGlzLmhhbmRsZXJzLndoZWVsLmFjdGl2YXRlKCl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuQ29udHJvbC5OYXZpZ2F0aW9uIn0pO09wZW5MYXllcnMuQ29udHJvbC5EcmF3RmVhdHVyZT1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuQ29udHJvbCx7bGF5ZXI6bnVsbCxjYWxsYmFja3M6bnVsbCxtdWx0aTohMSxmZWF0dXJlQWRkZWQ6ZnVuY3Rpb24oKXt9LGluaXRpYWxpemU6ZnVuY3Rpb24oYSxiLGMpe09wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLFtjXSk7dGhpcy5jYWxsYmFja3M9T3BlbkxheWVycy5VdGlsLmV4dGVuZCh7ZG9uZTp0aGlzLmRyYXdGZWF0dXJlLG1vZGlmeTpmdW5jdGlvbihhLGIpe3RoaXMubGF5ZXIuZXZlbnRzLnRyaWdnZXJFdmVudCgic2tldGNobW9kaWZpZWQiLHt2ZXJ0ZXg6YSxmZWF0dXJlOmJ9KX0sY3JlYXRlOmZ1bmN0aW9uKGEsYil7dGhpcy5sYXllci5ldmVudHMudHJpZ2dlckV2ZW50KCJza2V0Y2hzdGFydGVkIix7dmVydGV4OmEsZmVhdHVyZTpifSl9fSx0aGlzLmNhbGxiYWNrcyk7dGhpcy5sYXllcj1hO3RoaXMuaGFuZGxlck9wdGlvbnM9CnRoaXMuaGFuZGxlck9wdGlvbnN8fHt9O3RoaXMuaGFuZGxlck9wdGlvbnMubGF5ZXJPcHRpb25zPU9wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKHRoaXMuaGFuZGxlck9wdGlvbnMubGF5ZXJPcHRpb25zLHtyZW5kZXJlcnM6YS5yZW5kZXJlcnMscmVuZGVyZXJPcHRpb25zOmEucmVuZGVyZXJPcHRpb25zfSk7Im11bHRpImluIHRoaXMuaGFuZGxlck9wdGlvbnN8fCh0aGlzLmhhbmRsZXJPcHRpb25zLm11bHRpPXRoaXMubXVsdGkpO2lmKGE9dGhpcy5sYXllci5zdHlsZU1hcCYmdGhpcy5sYXllci5zdHlsZU1hcC5zdHlsZXMudGVtcG9yYXJ5KXRoaXMuaGFuZGxlck9wdGlvbnMubGF5ZXJPcHRpb25zPU9wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKHRoaXMuaGFuZGxlck9wdGlvbnMubGF5ZXJPcHRpb25zLHtzdHlsZU1hcDpuZXcgT3BlbkxheWVycy5TdHlsZU1hcCh7ImRlZmF1bHQiOmF9KX0pO3RoaXMuaGFuZGxlcj1uZXcgYih0aGlzLHRoaXMuY2FsbGJhY2tzLHRoaXMuaGFuZGxlck9wdGlvbnMpfSwKZHJhd0ZlYXR1cmU6ZnVuY3Rpb24oYSl7YT1uZXcgT3BlbkxheWVycy5GZWF0dXJlLlZlY3RvcihhKTshMSE9PXRoaXMubGF5ZXIuZXZlbnRzLnRyaWdnZXJFdmVudCgic2tldGNoY29tcGxldGUiLHtmZWF0dXJlOmF9KSYmKGEuc3RhdGU9T3BlbkxheWVycy5TdGF0ZS5JTlNFUlQsdGhpcy5sYXllci5hZGRGZWF0dXJlcyhbYV0pLHRoaXMuZmVhdHVyZUFkZGVkKGEpLHRoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgiZmVhdHVyZWFkZGVkIix7ZmVhdHVyZTphfSkpfSxpbnNlcnRYWTpmdW5jdGlvbihhLGIpe3RoaXMuaGFuZGxlciYmdGhpcy5oYW5kbGVyLmxpbmUmJnRoaXMuaGFuZGxlci5pbnNlcnRYWShhLGIpfSxpbnNlcnREZWx0YVhZOmZ1bmN0aW9uKGEsYil7dGhpcy5oYW5kbGVyJiZ0aGlzLmhhbmRsZXIubGluZSYmdGhpcy5oYW5kbGVyLmluc2VydERlbHRhWFkoYSxiKX0saW5zZXJ0RGlyZWN0aW9uTGVuZ3RoOmZ1bmN0aW9uKGEsYil7dGhpcy5oYW5kbGVyJiZ0aGlzLmhhbmRsZXIubGluZSYmCnRoaXMuaGFuZGxlci5pbnNlcnREaXJlY3Rpb25MZW5ndGgoYSxiKX0saW5zZXJ0RGVmbGVjdGlvbkxlbmd0aDpmdW5jdGlvbihhLGIpe3RoaXMuaGFuZGxlciYmdGhpcy5oYW5kbGVyLmxpbmUmJnRoaXMuaGFuZGxlci5pbnNlcnREZWZsZWN0aW9uTGVuZ3RoKGEsYil9LHVuZG86ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oYW5kbGVyLnVuZG8mJnRoaXMuaGFuZGxlci51bmRvKCl9LHJlZG86ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oYW5kbGVyLnJlZG8mJnRoaXMuaGFuZGxlci5yZWRvKCl9LGZpbmlzaFNrZXRjaDpmdW5jdGlvbigpe3RoaXMuaGFuZGxlci5maW5pc2hHZW9tZXRyeSgpfSxjYW5jZWw6ZnVuY3Rpb24oKXt0aGlzLmhhbmRsZXIuY2FuY2VsKCl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuQ29udHJvbC5EcmF3RmVhdHVyZSJ9KTtPcGVuTGF5ZXJzLkhhbmRsZXIuUG9seWdvbj1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuSGFuZGxlci5QYXRoLHtob2xlTW9kaWZpZXI6bnVsbCxkcmF3aW5nSG9sZTohMSxwb2x5Z29uOm51bGwsY3JlYXRlRmVhdHVyZTpmdW5jdGlvbihhKXthPXRoaXMubGF5ZXIuZ2V0TG9uTGF0RnJvbVZpZXdQb3J0UHgoYSk7YT1uZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludChhLmxvbixhLmxhdCk7dGhpcy5wb2ludD1uZXcgT3BlbkxheWVycy5GZWF0dXJlLlZlY3RvcihhKTt0aGlzLmxpbmU9bmV3IE9wZW5MYXllcnMuRmVhdHVyZS5WZWN0b3IobmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuTGluZWFyUmluZyhbdGhpcy5wb2ludC5nZW9tZXRyeV0pKTt0aGlzLnBvbHlnb249bmV3IE9wZW5MYXllcnMuRmVhdHVyZS5WZWN0b3IobmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9seWdvbihbdGhpcy5saW5lLmdlb21ldHJ5XSkpO3RoaXMuY2FsbGJhY2soImNyZWF0ZSIsW3RoaXMucG9pbnQuZ2VvbWV0cnksCnRoaXMuZ2V0U2tldGNoKCldKTt0aGlzLnBvaW50Lmdlb21ldHJ5LmNsZWFyQm91bmRzKCk7dGhpcy5sYXllci5hZGRGZWF0dXJlcyhbdGhpcy5wb2x5Z29uLHRoaXMucG9pbnRdLHtzaWxlbnQ6ITB9KX0sYWRkUG9pbnQ6ZnVuY3Rpb24oYSl7aWYoIXRoaXMuZHJhd2luZ0hvbGUmJnRoaXMuaG9sZU1vZGlmaWVyJiZ0aGlzLmV2dCYmdGhpcy5ldnRbdGhpcy5ob2xlTW9kaWZpZXJdKWZvcih2YXIgYj10aGlzLnBvaW50Lmdlb21ldHJ5LGM9dGhpcy5jb250cm9sLmxheWVyLmZlYXR1cmVzLGQsZT1jLmxlbmd0aC0xOzA8PWU7LS1lKWlmKGQ9Y1tlXS5nZW9tZXRyeSwoZCBpbnN0YW5jZW9mIE9wZW5MYXllcnMuR2VvbWV0cnkuUG9seWdvbnx8ZCBpbnN0YW5jZW9mIE9wZW5MYXllcnMuR2VvbWV0cnkuTXVsdGlQb2x5Z29uKSYmZC5pbnRlcnNlY3RzKGIpKXtiPWNbZV07dGhpcy5jb250cm9sLmxheWVyLnJlbW92ZUZlYXR1cmVzKFtiXSx7c2lsZW50OiEwfSk7dGhpcy5jb250cm9sLmxheWVyLmV2ZW50cy5yZWdpc3RlclByaW9yaXR5KCJza2V0Y2hjb21wbGV0ZSIsCnRoaXMsdGhpcy5maW5hbGl6ZUludGVyaW9yUmluZyk7dGhpcy5jb250cm9sLmxheWVyLmV2ZW50cy5yZWdpc3RlclByaW9yaXR5KCJza2V0Y2htb2RpZmllZCIsdGhpcyx0aGlzLmVuZm9yY2VUb3BvbG9neSk7Yi5nZW9tZXRyeS5hZGRDb21wb25lbnQodGhpcy5saW5lLmdlb21ldHJ5KTt0aGlzLnBvbHlnb249Yjt0aGlzLmRyYXdpbmdIb2xlPSEwO2JyZWFrfU9wZW5MYXllcnMuSGFuZGxlci5QYXRoLnByb3RvdHlwZS5hZGRQb2ludC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGdldEN1cnJlbnRQb2ludEluZGV4OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubGluZS5nZW9tZXRyeS5jb21wb25lbnRzLmxlbmd0aC0yfSxlbmZvcmNlVG9wb2xvZ3k6ZnVuY3Rpb24oYSl7YT1hLnZlcnRleDt2YXIgYj10aGlzLmxpbmUuZ2VvbWV0cnkuY29tcG9uZW50czt0aGlzLnBvbHlnb24uZ2VvbWV0cnkuaW50ZXJzZWN0cyhhKXx8KGI9YltiLmxlbmd0aC0zXSxhLng9Yi54LGEueT1iLnkpfSxmaW5pc2hHZW9tZXRyeTpmdW5jdGlvbigpe3RoaXMubGluZS5nZW9tZXRyeS5yZW1vdmVDb21wb25lbnQodGhpcy5saW5lLmdlb21ldHJ5LmNvbXBvbmVudHNbdGhpcy5saW5lLmdlb21ldHJ5LmNvbXBvbmVudHMubGVuZ3RoLQoyXSk7dGhpcy5yZW1vdmVQb2ludCgpO3RoaXMuZmluYWxpemUoKX0sZmluYWxpemVJbnRlcmlvclJpbmc6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmxpbmUuZ2VvbWV0cnksYj0wIT09YS5nZXRBcmVhKCk7aWYoYil7Zm9yKHZhciBjPXRoaXMucG9seWdvbi5nZW9tZXRyeS5jb21wb25lbnRzLGQ9Yy5sZW5ndGgtMjswPD1kOy0tZClpZihhLmludGVyc2VjdHMoY1tkXSkpe2I9ITE7YnJlYWt9aWYoYilhOmZvcihkPWMubGVuZ3RoLTI7MDxkOy0tZClmb3IodmFyIGU9Y1tkXS5jb21wb25lbnRzLGY9MCxnPWUubGVuZ3RoO2Y8ZzsrK2YpaWYoYS5jb250YWluc1BvaW50KGVbZl0pKXtiPSExO2JyZWFrIGF9fWI/dGhpcy5wb2x5Z29uLnN0YXRlIT09T3BlbkxheWVycy5TdGF0ZS5JTlNFUlQmJih0aGlzLnBvbHlnb24uc3RhdGU9T3BlbkxheWVycy5TdGF0ZS5VUERBVEUpOnRoaXMucG9seWdvbi5nZW9tZXRyeS5yZW1vdmVDb21wb25lbnQoYSk7dGhpcy5yZXN0b3JlRmVhdHVyZSgpO3JldHVybiExfSwKY2FuY2VsOmZ1bmN0aW9uKCl7dGhpcy5kcmF3aW5nSG9sZSYmKHRoaXMucG9seWdvbi5nZW9tZXRyeS5yZW1vdmVDb21wb25lbnQodGhpcy5saW5lLmdlb21ldHJ5KSx0aGlzLnJlc3RvcmVGZWF0dXJlKCEwKSk7cmV0dXJuIE9wZW5MYXllcnMuSGFuZGxlci5QYXRoLnByb3RvdHlwZS5jYW5jZWwuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxyZXN0b3JlRmVhdHVyZTpmdW5jdGlvbihhKXt0aGlzLmNvbnRyb2wubGF5ZXIuZXZlbnRzLnVucmVnaXN0ZXIoInNrZXRjaGNvbXBsZXRlIix0aGlzLHRoaXMuZmluYWxpemVJbnRlcmlvclJpbmcpO3RoaXMuY29udHJvbC5sYXllci5ldmVudHMudW5yZWdpc3Rlcigic2tldGNobW9kaWZpZWQiLHRoaXMsdGhpcy5lbmZvcmNlVG9wb2xvZ3kpO3RoaXMubGF5ZXIucmVtb3ZlRmVhdHVyZXMoW3RoaXMucG9seWdvbl0se3NpbGVudDohMH0pO3RoaXMuY29udHJvbC5sYXllci5hZGRGZWF0dXJlcyhbdGhpcy5wb2x5Z29uXSx7c2lsZW50OiEwfSk7dGhpcy5kcmF3aW5nSG9sZT0KITE7YXx8dGhpcy5jb250cm9sLmxheWVyLmV2ZW50cy50cmlnZ2VyRXZlbnQoInNrZXRjaGNvbXBsZXRlIix7ZmVhdHVyZTp0aGlzLnBvbHlnb259KX0sZGVzdHJveUZlYXR1cmU6ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5IYW5kbGVyLlBhdGgucHJvdG90eXBlLmRlc3Ryb3lGZWF0dXJlLmNhbGwodGhpcyxhKTt0aGlzLnBvbHlnb249bnVsbH0sZHJhd0ZlYXR1cmU6ZnVuY3Rpb24oKXt0aGlzLmxheWVyLmRyYXdGZWF0dXJlKHRoaXMucG9seWdvbix0aGlzLnN0eWxlKTt0aGlzLmxheWVyLmRyYXdGZWF0dXJlKHRoaXMucG9pbnQsdGhpcy5zdHlsZSl9LGdldFNrZXRjaDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnBvbHlnb259LGdldEdlb21ldHJ5OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5wb2x5Z29uJiZ0aGlzLnBvbHlnb24uZ2VvbWV0cnk7YSYmdGhpcy5tdWx0aSYmKGE9bmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuTXVsdGlQb2x5Z29uKFthXSkpO3JldHVybiBhfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkhhbmRsZXIuUG9seWdvbiJ9KTtPcGVuTGF5ZXJzLkNvbnRyb2wuRWRpdGluZ1Rvb2xiYXI9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkNvbnRyb2wuUGFuZWwse2NpdGVDb21wbGlhbnQ6ITEsaW5pdGlhbGl6ZTpmdW5jdGlvbihhLGIpe09wZW5MYXllcnMuQ29udHJvbC5QYW5lbC5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLFtiXSk7dGhpcy5hZGRDb250cm9scyhbbmV3IE9wZW5MYXllcnMuQ29udHJvbC5OYXZpZ2F0aW9uXSk7dmFyIGM9W25ldyBPcGVuTGF5ZXJzLkNvbnRyb2wuRHJhd0ZlYXR1cmUoYSxPcGVuTGF5ZXJzLkhhbmRsZXIuUG9pbnQse2Rpc3BsYXlDbGFzczoib2xDb250cm9sRHJhd0ZlYXR1cmVQb2ludCIsaGFuZGxlck9wdGlvbnM6e2NpdGVDb21wbGlhbnQ6dGhpcy5jaXRlQ29tcGxpYW50fX0pLG5ldyBPcGVuTGF5ZXJzLkNvbnRyb2wuRHJhd0ZlYXR1cmUoYSxPcGVuTGF5ZXJzLkhhbmRsZXIuUGF0aCx7ZGlzcGxheUNsYXNzOiJvbENvbnRyb2xEcmF3RmVhdHVyZVBhdGgiLGhhbmRsZXJPcHRpb25zOntjaXRlQ29tcGxpYW50OnRoaXMuY2l0ZUNvbXBsaWFudH19KSwKbmV3IE9wZW5MYXllcnMuQ29udHJvbC5EcmF3RmVhdHVyZShhLE9wZW5MYXllcnMuSGFuZGxlci5Qb2x5Z29uLHtkaXNwbGF5Q2xhc3M6Im9sQ29udHJvbERyYXdGZWF0dXJlUG9seWdvbiIsaGFuZGxlck9wdGlvbnM6e2NpdGVDb21wbGlhbnQ6dGhpcy5jaXRlQ29tcGxpYW50fX0pXTt0aGlzLmFkZENvbnRyb2xzKGMpfSxkcmF3OmZ1bmN0aW9uKCl7dmFyIGE9T3BlbkxheWVycy5Db250cm9sLlBhbmVsLnByb3RvdHlwZS5kcmF3LmFwcGx5KHRoaXMsYXJndW1lbnRzKTtudWxsPT09dGhpcy5kZWZhdWx0Q29udHJvbCYmKHRoaXMuZGVmYXVsdENvbnRyb2w9dGhpcy5jb250cm9sc1swXSk7cmV0dXJuIGF9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuQ29udHJvbC5FZGl0aW5nVG9vbGJhciJ9KTtPcGVuTGF5ZXJzLlN0cmF0ZWd5LkJCT1g9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLlN0cmF0ZWd5LHtib3VuZHM6bnVsbCxyZXNvbHV0aW9uOm51bGwscmF0aW86MixyZXNGYWN0b3I6bnVsbCxyZXNwb25zZTpudWxsLGFjdGl2YXRlOmZ1bmN0aW9uKCl7dmFyIGE9T3BlbkxheWVycy5TdHJhdGVneS5wcm90b3R5cGUuYWN0aXZhdGUuY2FsbCh0aGlzKTthJiYodGhpcy5sYXllci5ldmVudHMub24oe21vdmVlbmQ6dGhpcy51cGRhdGUscmVmcmVzaDp0aGlzLnVwZGF0ZSx2aXNpYmlsaXR5Y2hhbmdlZDp0aGlzLnVwZGF0ZSxzY29wZTp0aGlzfSksdGhpcy51cGRhdGUoKSk7cmV0dXJuIGF9LGRlYWN0aXZhdGU6ZnVuY3Rpb24oKXt2YXIgYT1PcGVuTGF5ZXJzLlN0cmF0ZWd5LnByb3RvdHlwZS5kZWFjdGl2YXRlLmNhbGwodGhpcyk7YSYmdGhpcy5sYXllci5ldmVudHMudW4oe21vdmVlbmQ6dGhpcy51cGRhdGUscmVmcmVzaDp0aGlzLnVwZGF0ZSx2aXNpYmlsaXR5Y2hhbmdlZDp0aGlzLnVwZGF0ZSwKc2NvcGU6dGhpc30pO3JldHVybiBhfSx1cGRhdGU6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5nZXRNYXBCb3VuZHMoKTtudWxsIT09YiYmKGEmJmEuZm9yY2V8fHRoaXMubGF5ZXIudmlzaWJpbGl0eSYmdGhpcy5sYXllci5jYWxjdWxhdGVJblJhbmdlKCkmJnRoaXMuaW52YWxpZEJvdW5kcyhiKSkmJih0aGlzLmNhbGN1bGF0ZUJvdW5kcyhiKSx0aGlzLnJlc29sdXRpb249dGhpcy5sYXllci5tYXAuZ2V0UmVzb2x1dGlvbigpLHRoaXMudHJpZ2dlclJlYWQoYSkpfSxnZXRNYXBCb3VuZHM6ZnVuY3Rpb24oKXtpZihudWxsPT09dGhpcy5sYXllci5tYXApcmV0dXJuIG51bGw7dmFyIGE9dGhpcy5sYXllci5tYXAuZ2V0RXh0ZW50KCk7YSYmIXRoaXMubGF5ZXIucHJvamVjdGlvbi5lcXVhbHModGhpcy5sYXllci5tYXAuZ2V0UHJvamVjdGlvbk9iamVjdCgpKSYmKGE9YS5jbG9uZSgpLnRyYW5zZm9ybSh0aGlzLmxheWVyLm1hcC5nZXRQcm9qZWN0aW9uT2JqZWN0KCksdGhpcy5sYXllci5wcm9qZWN0aW9uKSk7CnJldHVybiBhfSxpbnZhbGlkQm91bmRzOmZ1bmN0aW9uKGEpe2F8fChhPXRoaXMuZ2V0TWFwQm91bmRzKCkpO2E9IXRoaXMuYm91bmRzfHwhdGhpcy5ib3VuZHMuY29udGFpbnNCb3VuZHMoYSk7IWEmJnRoaXMucmVzRmFjdG9yJiYoYT10aGlzLnJlc29sdXRpb24vdGhpcy5sYXllci5tYXAuZ2V0UmVzb2x1dGlvbigpLGE9YT49dGhpcy5yZXNGYWN0b3J8fGE8PTEvdGhpcy5yZXNGYWN0b3IpO3JldHVybiBhfSxjYWxjdWxhdGVCb3VuZHM6ZnVuY3Rpb24oYSl7YXx8KGE9dGhpcy5nZXRNYXBCb3VuZHMoKSk7dmFyIGI9YS5nZXRDZW50ZXJMb25MYXQoKSxjPWEuZ2V0V2lkdGgoKSp0aGlzLnJhdGlvO2E9YS5nZXRIZWlnaHQoKSp0aGlzLnJhdGlvO3RoaXMuYm91bmRzPW5ldyBPcGVuTGF5ZXJzLkJvdW5kcyhiLmxvbi1jLzIsYi5sYXQtYS8yLGIubG9uK2MvMixiLmxhdCthLzIpfSx0cmlnZ2VyUmVhZDpmdW5jdGlvbihhKXshdGhpcy5yZXNwb25zZXx8YSYmITA9PT1hLm5vQWJvcnR8fAoodGhpcy5sYXllci5wcm90b2NvbC5hYm9ydCh0aGlzLnJlc3BvbnNlKSx0aGlzLmxheWVyLmV2ZW50cy50cmlnZ2VyRXZlbnQoImxvYWRlbmQiKSk7dmFyIGI9e2ZpbHRlcjp0aGlzLmNyZWF0ZUZpbHRlcigpfTt0aGlzLmxheWVyLmV2ZW50cy50cmlnZ2VyRXZlbnQoImxvYWRzdGFydCIsYik7dGhpcy5yZXNwb25zZT10aGlzLmxheWVyLnByb3RvY29sLnJlYWQoT3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoe2ZpbHRlcjpiLmZpbHRlcixjYWxsYmFjazp0aGlzLm1lcmdlLHNjb3BlOnRoaXN9LGEpKX0sY3JlYXRlRmlsdGVyOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IE9wZW5MYXllcnMuRmlsdGVyLlNwYXRpYWwoe3R5cGU6T3BlbkxheWVycy5GaWx0ZXIuU3BhdGlhbC5CQk9YLHZhbHVlOnRoaXMuYm91bmRzLHByb2plY3Rpb246dGhpcy5sYXllci5wcm9qZWN0aW9ufSk7dGhpcy5sYXllci5maWx0ZXImJihhPW5ldyBPcGVuTGF5ZXJzLkZpbHRlci5Mb2dpY2FsKHt0eXBlOk9wZW5MYXllcnMuRmlsdGVyLkxvZ2ljYWwuQU5ELApmaWx0ZXJzOlt0aGlzLmxheWVyLmZpbHRlcixhXX0pKTtyZXR1cm4gYX0sbWVyZ2U6ZnVuY3Rpb24oYSl7dGhpcy5sYXllci5kZXN0cm95RmVhdHVyZXMoKTtpZihhLnN1Y2Nlc3MoKSl7dmFyIGI9YS5mZWF0dXJlcztpZihiJiYwPGIubGVuZ3RoKXt2YXIgYz10aGlzLmxheWVyLnByb2plY3Rpb24sZD10aGlzLmxheWVyLm1hcC5nZXRQcm9qZWN0aW9uT2JqZWN0KCk7aWYoIWQuZXF1YWxzKGMpKWZvcih2YXIgZSxmPTAsZz1iLmxlbmd0aDtmPGc7KytmKShlPWJbZl0uZ2VvbWV0cnkpJiZlLnRyYW5zZm9ybShjLGQpO3RoaXMubGF5ZXIuYWRkRmVhdHVyZXMoYil9fWVsc2UgdGhpcy5ib3VuZHM9bnVsbDt0aGlzLnJlc3BvbnNlPW51bGw7dGhpcy5sYXllci5ldmVudHMudHJpZ2dlckV2ZW50KCJsb2FkZW5kIix7cmVzcG9uc2U6YX0pfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLlN0cmF0ZWd5LkJCT1gifSk7T3BlbkxheWVycy5MYXllci5Xb3JsZFdpbmQ9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkxheWVyLkdyaWQse0RFRkFVTFRfUEFSQU1TOnt9LGlzQmFzZUxheWVyOiEwLGx6ZDpudWxsLHpvb21MZXZlbHM6bnVsbCxpbml0aWFsaXplOmZ1bmN0aW9uKGEsYixjLGQsZSxmKXt0aGlzLmx6ZD1jO3RoaXMuem9vbUxldmVscz1kO2M9W107Yy5wdXNoKGEsYixlLGYpO09wZW5MYXllcnMuTGF5ZXIuR3JpZC5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLGMpO3RoaXMucGFyYW1zPU9wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKHRoaXMucGFyYW1zLHRoaXMuREVGQVVMVF9QQVJBTVMpfSxnZXRab29tOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5tYXAuZ2V0Wm9vbSgpO3RoaXMubWFwLmdldE1heEV4dGVudCgpO3JldHVybiBhLT1NYXRoLmxvZyh0aGlzLm1heFJlc29sdXRpb24vKHRoaXMubHpkLzUxMikpL01hdGgubG9nKDIpfSxnZXRVUkw6ZnVuY3Rpb24oYSl7YT10aGlzLmFkanVzdEJvdW5kcyhhKTsKdmFyIGI9dGhpcy5nZXRab29tKCksYz10aGlzLm1hcC5nZXRNYXhFeHRlbnQoKSxkPXRoaXMubHpkL01hdGgucG93KDIsdGhpcy5nZXRab29tKCkpLGU9TWF0aC5mbG9vcigoYS5sZWZ0LWMubGVmdCkvZCk7YT1NYXRoLmZsb29yKChhLmJvdHRvbS1jLmJvdHRvbSkvZCk7cmV0dXJuIHRoaXMubWFwLmdldFJlc29sdXRpb24oKTw9dGhpcy5semQvNTEyJiZ0aGlzLmdldFpvb20oKTw9dGhpcy56b29tTGV2ZWxzP3RoaXMuZ2V0RnVsbFJlcXVlc3RTdHJpbmcoe0w6YixYOmUsWTphfSk6T3BlbkxheWVycy5VdGlsLmdldEltYWdlTG9jYXRpb24oImJsYW5rLmdpZiIpfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkxheWVyLldvcmxkV2luZCJ9KTtPcGVuTGF5ZXJzLlByb3RvY29sLkNTVz1mdW5jdGlvbihhKXthPU9wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKGEsT3BlbkxheWVycy5Qcm90b2NvbC5DU1cuREVGQVVMVFMpO3ZhciBiPU9wZW5MYXllcnMuUHJvdG9jb2wuQ1NXWyJ2IithLnZlcnNpb24ucmVwbGFjZSgvXC4vZywiXyIpXTtpZighYil0aHJvdyJVbnN1cHBvcnRlZCBDU1cgdmVyc2lvbjogIithLnZlcnNpb247cmV0dXJuIG5ldyBiKGEpfTtPcGVuTGF5ZXJzLlByb3RvY29sLkNTVy5ERUZBVUxUUz17dmVyc2lvbjoiMi4wLjIifTtPcGVuTGF5ZXJzLkZvcm1hdC5XTVRTQ2FwYWJpbGl0aWVzPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Gb3JtYXQuWE1MLlZlcnNpb25lZE9HQyx7ZGVmYXVsdFZlcnNpb246IjEuMC4wIix5eDp7InVybjpvZ2M6ZGVmOmNyczpFUFNHOjo0MzI2IjohMH0sY3JlYXRlTGF5ZXI6ZnVuY3Rpb24oYSxiKXtpZighKCJsYXllciJpbiBiKSl0aHJvdyBFcnJvcigiTWlzc2luZyBwcm9wZXJ0eSAnbGF5ZXInIGluIGNvbmZpZ3VyYXRpb24uIik7Zm9yKHZhciBjPWEuY29udGVudHMsZCxlPTAsZj1jLmxheWVycy5sZW5ndGg7ZTxmOysrZSlpZihjLmxheWVyc1tlXS5pZGVudGlmaWVyPT09Yi5sYXllcil7ZD1jLmxheWVyc1tlXTticmVha31pZighZCl0aHJvdyBFcnJvcigiTGF5ZXIgbm90IGZvdW5kIik7dmFyIGc9Yi5mb3JtYXQ7IWcmJihkLmZvcm1hdHMmJmQuZm9ybWF0cy5sZW5ndGgpJiYoZz1kLmZvcm1hdHNbMF0pO3ZhciBoO2IubWF0cml4U2V0P2g9Yy50aWxlTWF0cml4U2V0c1tiLm1hdHJpeFNldF06CjE8PWQudGlsZU1hdHJpeFNldExpbmtzLmxlbmd0aCYmKGg9Yy50aWxlTWF0cml4U2V0c1tkLnRpbGVNYXRyaXhTZXRMaW5rc1swXS50aWxlTWF0cml4U2V0XSk7aWYoIWgpdGhyb3cgRXJyb3IoIm1hdHJpeFNldCBub3QgZm91bmQiKTtmb3IodmFyIGssZT0wLGY9ZC5zdHlsZXMubGVuZ3RoO2U8ZiYmKGs9ZC5zdHlsZXNbZV0sIWsuaXNEZWZhdWx0KTsrK2UpO2M9Yi5yZXF1ZXN0RW5jb2Rpbmc7aWYoIWMmJihjPSJLVlAiLGEub3BlcmF0aW9uc01ldGFkYXRhLkdldFRpbGUuZGNwLmh0dHApKXt2YXIgbD1hLm9wZXJhdGlvbnNNZXRhZGF0YS5HZXRUaWxlLmRjcC5odHRwO2wuZ2V0WzBdLmNvbnN0cmFpbnRzJiYobD1sLmdldFswXS5jb25zdHJhaW50cy5HZXRFbmNvZGluZy5hbGxvd2VkVmFsdWVzLGwuS1ZQfHwhbC5SRVNUJiYhbC5SRVNUZnVsfHwoYz0iUkVTVCIpKX12YXIgbD1bXSxtPWIucGFyYW1zfHx7fTtkZWxldGUgYi5wYXJhbXM7Zm9yKHZhciBuPTAscD1kLmRpbWVuc2lvbnMubGVuZ3RoO248CnA7bisrKXt2YXIgcT1kLmRpbWVuc2lvbnNbbl07bC5wdXNoKHEuaWRlbnRpZmllcik7bS5oYXNPd25Qcm9wZXJ0eShxLmlkZW50aWZpZXIpfHwobVtxLmlkZW50aWZpZXJdPXFbImRlZmF1bHQiXSl9dmFyIG49Yi5wcm9qZWN0aW9ufHxoLnN1cHBvcnRlZENSUy5yZXBsYWNlKC91cm46b2djOmRlZjpjcnM6KFx3Kyk6KC4qOik/KFx3KykkLywiJDE6JDMiKSxwPWIudW5pdHN8fCgiRVBTRzo0MzI2Ij09PW4/ImRlZ3JlZXMiOiJtIikscT1bXSxyO2ZvcihyIGluIGgubWF0cml4SWRzKWgubWF0cml4SWRzLmhhc093blByb3BlcnR5KHIpJiZxLnB1c2goMi44RS00KmgubWF0cml4SWRzW3JdLnNjYWxlRGVub21pbmF0b3IvT3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0gvT3BlbkxheWVycy5JTkNIRVNfUEVSX1VOSVRbcF0pO2lmKCJSRVNUIj09PWMmJmQucmVzb3VyY2VVcmxzKXtyPVtdO2Zvcih2YXIgZj0wLHM9ZC5yZXNvdXJjZVVybHMubGVuZ3RoO2Y8czsrK2YpZT1kLnJlc291cmNlVXJsc1tmXSwKZS5mb3JtYXQ9PT1nJiYidGlsZSI9PT1lLnJlc291cmNlVHlwZSYmci5wdXNoKGUudGVtcGxhdGUpfWVsc2V7cz1hLm9wZXJhdGlvbnNNZXRhZGF0YS5HZXRUaWxlLmRjcC5odHRwLmdldDtyPVtdO2Zvcih2YXIgdCxlPTAsZj1zLmxlbmd0aDtlPGY7ZSsrKXQ9c1tlXS5jb25zdHJhaW50cywoIXR8fHQmJnQuR2V0RW5jb2RpbmcuYWxsb3dlZFZhbHVlc1tjXSkmJnIucHVzaChzW2VdLnVybCl9cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLkxheWVyLldNVFMoT3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoYix7dXJsOnIscmVxdWVzdEVuY29kaW5nOmMsbmFtZTpkLnRpdGxlLHN0eWxlOmsuaWRlbnRpZmllcixmb3JtYXQ6ZyxtYXRyaXhJZHM6aC5tYXRyaXhJZHMsbWF0cml4U2V0OmguaWRlbnRpZmllcixwcm9qZWN0aW9uOm4sdW5pdHM6cCxyZXNvbHV0aW9uczohMT09PWIuaXNCYXNlTGF5ZXI/dm9pZCAwOnEsc2VydmVyUmVzb2x1dGlvbnM6cSx0aWxlRnVsbEV4dGVudDpoLmJvdW5kcywKZGltZW5zaW9uczpsLHBhcmFtczptfSkpfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkZvcm1hdC5XTVRTQ2FwYWJpbGl0aWVzIn0pO09wZW5MYXllcnMuTGF5ZXIuR29vZ2xlLnYzPXtERUZBVUxUUzp7c3BoZXJpY2FsTWVyY2F0b3I6ITAscHJvamVjdGlvbjoiRVBTRzo5MDA5MTMifSxhbmltYXRpb25FbmFibGVkOiEwLGxvYWRNYXBPYmplY3Q6ZnVuY3Rpb24oKXt0aGlzLnR5cGV8fCh0aGlzLnR5cGU9Z29vZ2xlLm1hcHMuTWFwVHlwZUlkLlJPQURNQVApO3ZhciBhLGI9T3BlbkxheWVycy5MYXllci5Hb29nbGUuY2FjaGVbdGhpcy5tYXAuaWRdO2I/KGE9Yi5tYXBPYmplY3QsKytiLmNvdW50KTooYT10aGlzLm1hcC5nZXRDZW50ZXIoKSxiPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpLGIuY2xhc3NOYW1lPSJvbEZvcmVpZ25Db250YWluZXIiLGIuc3R5bGUud2lkdGg9IjEwMCUiLGIuc3R5bGUuaGVpZ2h0PSIxMDAlIixhPW5ldyBnb29nbGUubWFwcy5NYXAoYix7Y2VudGVyOmE/bmV3IGdvb2dsZS5tYXBzLkxhdExuZyhhLmxhdCxhLmxvbik6bmV3IGdvb2dsZS5tYXBzLkxhdExuZygwLDApLHpvb206dGhpcy5tYXAuZ2V0Wm9vbSgpfHwKMCxtYXBUeXBlSWQ6dGhpcy50eXBlLGRpc2FibGVEZWZhdWx0VUk6ITAsa2V5Ym9hcmRTaG9ydGN1dHM6ITEsZHJhZ2dhYmxlOiExLGRpc2FibGVEb3VibGVDbGlja1pvb206ITAsc2Nyb2xsd2hlZWw6ITEsc3RyZWV0Vmlld0NvbnRyb2w6ITF9KSxiPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpLGIuc3R5bGUud2lkdGg9IjEwMCUiLGIuc3R5bGUuaGVpZ2h0PSIxMDAlIixhLmNvbnRyb2xzW2dvb2dsZS5tYXBzLkNvbnRyb2xQb3NpdGlvbi5UT1BfTEVGVF0ucHVzaChiKSxiPXtnb29nbGVDb250cm9sOmIsbWFwT2JqZWN0OmEsY291bnQ6MX0sT3BlbkxheWVycy5MYXllci5Hb29nbGUuY2FjaGVbdGhpcy5tYXAuaWRdPWIpO3RoaXMubWFwT2JqZWN0PWE7dGhpcy5zZXRHTWFwVmlzaWJpbGl0eSh0aGlzLnZpc2liaWxpdHkpfSxvbk1hcFJlc2l6ZTpmdW5jdGlvbigpe3RoaXMudmlzaWJpbGl0eSYmZ29vZ2xlLm1hcHMuZXZlbnQudHJpZ2dlcih0aGlzLm1hcE9iamVjdCwicmVzaXplIil9LApzZXRHTWFwVmlzaWJpbGl0eTpmdW5jdGlvbihhKXt2YXIgYj1PcGVuTGF5ZXJzLkxheWVyLkdvb2dsZS5jYWNoZVt0aGlzLm1hcC5pZF0sYz10aGlzLm1hcDtpZihiKXtmb3IodmFyIGQ9dGhpcy50eXBlLGU9Yy5sYXllcnMsZixnPWUubGVuZ3RoLTE7MDw9ZzstLWcpaWYoZj1lW2ddLGYgaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLkxheWVyLkdvb2dsZSYmITA9PT1mLnZpc2liaWxpdHkmJiEwPT09Zi5pblJhbmdlKXtkPWYudHlwZTthPSEwO2JyZWFrfWU9dGhpcy5tYXBPYmplY3QuZ2V0RGl2KCk7aWYoITA9PT1hKXtpZihlLnBhcmVudE5vZGUhPT1jLmRpdilpZihiLnJlbmRlcmVkKWMuZGl2LmFwcGVuZENoaWxkKGUpLGIuZ29vZ2xlQ29udHJvbC5hcHBlbmRDaGlsZChjLnZpZXdQb3J0RGl2KSxnb29nbGUubWFwcy5ldmVudC50cmlnZ2VyKHRoaXMubWFwT2JqZWN0LCJyZXNpemUiKTtlbHNle3ZhciBoPXRoaXM7Z29vZ2xlLm1hcHMuZXZlbnQuYWRkTGlzdGVuZXJPbmNlKHRoaXMubWFwT2JqZWN0LAoidGlsZXNsb2FkZWQiLGZ1bmN0aW9uKCl7Yi5yZW5kZXJlZD0hMDtoLnNldEdNYXBWaXNpYmlsaXR5KGguZ2V0VmlzaWJpbGl0eSgpKTtoLm1vdmVUbyhoLm1hcC5nZXRDZW50ZXIoKSl9KX10aGlzLm1hcE9iamVjdC5zZXRNYXBUeXBlSWQoZCl9ZWxzZSBiLmdvb2dsZUNvbnRyb2wuaGFzQ2hpbGROb2RlcygpJiYoYy5kaXYuYXBwZW5kQ2hpbGQoYy52aWV3UG9ydERpdiksYy5kaXYucmVtb3ZlQ2hpbGQoZSkpfX0sZ2V0TWFwQ29udGFpbmVyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWFwT2JqZWN0LmdldERpdigpfSxnZXRNYXBPYmplY3RCb3VuZHNGcm9tT0xCb3VuZHM6ZnVuY3Rpb24oYSl7dmFyIGI9bnVsbDtudWxsIT1hJiYoYj10aGlzLnNwaGVyaWNhbE1lcmNhdG9yP3RoaXMuaW52ZXJzZU1lcmNhdG9yKGEuYm90dG9tLGEubGVmdCk6bmV3IE9wZW5MYXllcnMuTG9uTGF0KGEuYm90dG9tLGEubGVmdCksYT10aGlzLnNwaGVyaWNhbE1lcmNhdG9yP3RoaXMuaW52ZXJzZU1lcmNhdG9yKGEudG9wLAphLnJpZ2h0KTpuZXcgT3BlbkxheWVycy5Mb25MYXQoYS50b3AsYS5yaWdodCksYj1uZXcgZ29vZ2xlLm1hcHMuTGF0TG5nQm91bmRzKG5ldyBnb29nbGUubWFwcy5MYXRMbmcoYi5sYXQsYi5sb24pLG5ldyBnb29nbGUubWFwcy5MYXRMbmcoYS5sYXQsYS5sb24pKSk7cmV0dXJuIGJ9LGdldE1hcE9iamVjdExvbkxhdEZyb21NYXBPYmplY3RQaXhlbDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLm1hcC5nZXRTaXplKCksYz10aGlzLmdldExvbmdpdHVkZUZyb21NYXBPYmplY3RMb25MYXQodGhpcy5tYXBPYmplY3QuY2VudGVyKSxkPXRoaXMuZ2V0TGF0aXR1ZGVGcm9tTWFwT2JqZWN0TG9uTGF0KHRoaXMubWFwT2JqZWN0LmNlbnRlciksZT10aGlzLm1hcC5nZXRSZXNvbHV0aW9uKCk7YT1uZXcgT3BlbkxheWVycy5Mb25MYXQoYysoYS54LWIudy8yKSplLGQtKGEueS1iLmgvMikqZSk7dGhpcy53cmFwRGF0ZUxpbmUmJihhPWEud3JhcERhdGVMaW5lKHRoaXMubWF4RXh0ZW50KSk7cmV0dXJuIHRoaXMuZ2V0TWFwT2JqZWN0TG9uTGF0RnJvbUxvbkxhdChhLmxvbiwKYS5sYXQpfSxnZXRNYXBPYmplY3RQaXhlbEZyb21NYXBPYmplY3RMb25MYXQ6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5nZXRMb25naXR1ZGVGcm9tTWFwT2JqZWN0TG9uTGF0KGEpO2E9dGhpcy5nZXRMYXRpdHVkZUZyb21NYXBPYmplY3RMb25MYXQoYSk7dmFyIGM9dGhpcy5tYXAuZ2V0UmVzb2x1dGlvbigpLGQ9dGhpcy5tYXAuZ2V0RXh0ZW50KCk7cmV0dXJuIHRoaXMuZ2V0TWFwT2JqZWN0UGl4ZWxGcm9tWFkoMS9jKihiLWQubGVmdCksMS9jKihkLnRvcC1hKSl9LHNldE1hcE9iamVjdENlbnRlcjpmdW5jdGlvbihhLGIpe2lmKCExPT09dGhpcy5hbmltYXRpb25FbmFibGVkJiZiIT10aGlzLm1hcE9iamVjdC56b29tKXt2YXIgYz10aGlzLmdldE1hcENvbnRhaW5lcigpO2dvb2dsZS5tYXBzLmV2ZW50LmFkZExpc3RlbmVyT25jZSh0aGlzLm1hcE9iamVjdCwiaWRsZSIsZnVuY3Rpb24oKXtjLnN0eWxlLnZpc2liaWxpdHk9IiJ9KTtjLnN0eWxlLnZpc2liaWxpdHk9ImhpZGRlbiJ9dGhpcy5tYXBPYmplY3Quc2V0T3B0aW9ucyh7Y2VudGVyOmEsCnpvb206Yn0pfSxnZXRNYXBPYmplY3Rab29tRnJvbU1hcE9iamVjdEJvdW5kczpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5tYXBPYmplY3QuZ2V0Qm91bmRzWm9vbUxldmVsKGEpfSxnZXRNYXBPYmplY3RMb25MYXRGcm9tTG9uTGF0OmZ1bmN0aW9uKGEsYil7dmFyIGM7dGhpcy5zcGhlcmljYWxNZXJjYXRvcj8oYz10aGlzLmludmVyc2VNZXJjYXRvcihhLGIpLGM9bmV3IGdvb2dsZS5tYXBzLkxhdExuZyhjLmxhdCxjLmxvbikpOmM9bmV3IGdvb2dsZS5tYXBzLkxhdExuZyhiLGEpO3JldHVybiBjfSxnZXRNYXBPYmplY3RQaXhlbEZyb21YWTpmdW5jdGlvbihhLGIpe3JldHVybiBuZXcgZ29vZ2xlLm1hcHMuUG9pbnQoYSxiKX19O09wZW5MYXllcnMuRm9ybWF0LldQU0Rlc2NyaWJlUHJvY2Vzcz1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuRm9ybWF0LlhNTCx7VkVSU0lPTjoiMS4wLjAiLG5hbWVzcGFjZXM6e3dwczoiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC93cHMvMS4wLjAiLG93czoiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9vd3MvMS4xIix4c2k6Imh0dHA6Ly93d3cudzMub3JnLzIwMDEvWE1MU2NoZW1hLWluc3RhbmNlIn0sc2NoZW1hTG9jYXRpb246Imh0dHA6Ly93d3cub3Blbmdpcy5uZXQvd3BzLzEuMC4wIGh0dHA6Ly9zY2hlbWFzLm9wZW5naXMubmV0L3dwcy8xLjAuMC93cHNBbGwueHNkIixkZWZhdWx0UHJlZml4OiJ3cHMiLHJlZ0V4ZXM6e3RyaW1TcGFjZTovXlxzKnxccyokL2cscmVtb3ZlU3BhY2U6L1xzKi9nLHNwbGl0U3BhY2U6L1xzKy8sdHJpbUNvbW1hOi9ccyosXHMqL2d9LHJlYWQ6ZnVuY3Rpb24oYSl7InN0cmluZyI9PXR5cGVvZiBhJiYoYT1PcGVuTGF5ZXJzLkZvcm1hdC5YTUwucHJvdG90eXBlLnJlYWQuYXBwbHkodGhpcywKW2FdKSk7YSYmOT09YS5ub2RlVHlwZSYmKGE9YS5kb2N1bWVudEVsZW1lbnQpO3ZhciBiPXt9O3RoaXMucmVhZE5vZGUoYSxiKTtyZXR1cm4gYn0scmVhZGVyczp7d3BzOntQcm9jZXNzRGVzY3JpcHRpb25zOmZ1bmN0aW9uKGEsYil7Yi5wcm9jZXNzRGVzY3JpcHRpb25zPXt9O3RoaXMucmVhZENoaWxkTm9kZXMoYSxiLnByb2Nlc3NEZXNjcmlwdGlvbnMpfSxQcm9jZXNzRGVzY3JpcHRpb246ZnVuY3Rpb24oYSxiKXt2YXIgYz17cHJvY2Vzc1ZlcnNpb246dGhpcy5nZXRBdHRyaWJ1dGVOUyhhLHRoaXMubmFtZXNwYWNlcy53cHMsInByb2Nlc3NWZXJzaW9uIiksc3RhdHVzU3VwcG9ydGVkOiJ0cnVlIj09PWEuZ2V0QXR0cmlidXRlKCJzdGF0dXNTdXBwb3J0ZWQiKSxzdG9yZVN1cHBvcnRlZDoidHJ1ZSI9PT1hLmdldEF0dHJpYnV0ZSgic3RvcmVTdXBwb3J0ZWQiKX07dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGMpO2JbYy5pZGVudGlmaWVyXT1jfSxEYXRhSW5wdXRzOmZ1bmN0aW9uKGEsCmIpe2IuZGF0YUlucHV0cz1bXTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYi5kYXRhSW5wdXRzKX0sUHJvY2Vzc091dHB1dHM6ZnVuY3Rpb24oYSxiKXtiLnByb2Nlc3NPdXRwdXRzPVtdO3RoaXMucmVhZENoaWxkTm9kZXMoYSxiLnByb2Nlc3NPdXRwdXRzKX0sT3V0cHV0OmZ1bmN0aW9uKGEsYil7dmFyIGM9e307dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGMpO2IucHVzaChjKX0sQ29tcGxleE91dHB1dDpmdW5jdGlvbihhLGIpe2IuY29tcGxleE91dHB1dD17fTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYi5jb21wbGV4T3V0cHV0KX0sTGl0ZXJhbE91dHB1dDpmdW5jdGlvbihhLGIpe2IubGl0ZXJhbE91dHB1dD17fTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYi5saXRlcmFsT3V0cHV0KX0sSW5wdXQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz17bWF4T2NjdXJzOnBhcnNlSW50KGEuZ2V0QXR0cmlidXRlKCJtYXhPY2N1cnMiKSksbWluT2NjdXJzOnBhcnNlSW50KGEuZ2V0QXR0cmlidXRlKCJtaW5PY2N1cnMiKSl9Owp0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYyk7Yi5wdXNoKGMpfSxCb3VuZGluZ0JveERhdGE6ZnVuY3Rpb24oYSxiKXtiLmJvdW5kaW5nQm94RGF0YT17fTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYi5ib3VuZGluZ0JveERhdGEpfSxDUlM6ZnVuY3Rpb24oYSxiKXtiLkNSU3N8fChiLkNSU3M9e30pO2IuQ1JTc1t0aGlzLmdldENoaWxkVmFsdWUoYSldPSEwfSxMaXRlcmFsRGF0YTpmdW5jdGlvbihhLGIpe2IubGl0ZXJhbERhdGE9e307dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGIubGl0ZXJhbERhdGEpfSxDb21wbGV4RGF0YTpmdW5jdGlvbihhLGIpe2IuY29tcGxleERhdGE9e307dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGIuY29tcGxleERhdGEpfSxEZWZhdWx0OmZ1bmN0aW9uKGEsYil7YlsiZGVmYXVsdCJdPXt9O3RoaXMucmVhZENoaWxkTm9kZXMoYSxiWyJkZWZhdWx0Il0pfSxTdXBwb3J0ZWQ6ZnVuY3Rpb24oYSxiKXtiLnN1cHBvcnRlZD17fTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYi5zdXBwb3J0ZWQpfSwKRm9ybWF0OmZ1bmN0aW9uKGEsYil7dmFyIGM9e307dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGMpO2IuZm9ybWF0c3x8KGIuZm9ybWF0cz17fSk7Yi5mb3JtYXRzW2MubWltZVR5cGVdPSEwfSxNaW1lVHlwZTpmdW5jdGlvbihhLGIpe2IubWltZVR5cGU9dGhpcy5nZXRDaGlsZFZhbHVlKGEpfX0sb3dzOk9wZW5MYXllcnMuRm9ybWF0Lk9XU0NvbW1vbi52MV8xXzAucHJvdG90eXBlLnJlYWRlcnMub3dzfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkZvcm1hdC5XUFNEZXNjcmliZVByb2Nlc3MifSk7T3BlbkxheWVycy5Gb3JtYXQuV0tUPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Gb3JtYXQse2luaXRpYWxpemU6ZnVuY3Rpb24oYSl7dGhpcy5yZWdFeGVzPXt0eXBlU3RyOi9eXHMqKFx3KylccypcKFxzKiguKilccypcKVxzKiQvLHNwYWNlczovXHMrLyxwYXJlbkNvbW1hOi9cKVxzKixccypcKC8sZG91YmxlUGFyZW5Db21tYTovXClccypcKVxzKixccypcKFxzKlwoLyx0cmltUGFyZW5zOi9eXHMqXCg/KC4qPylcKT9ccyokL307T3BlbkxheWVycy5Gb3JtYXQucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxbYV0pfSxyZWFkOmZ1bmN0aW9uKGEpe3ZhciBiLGM7YT1hLnJlcGxhY2UoL1tcblxyXS9nLCIgIik7aWYoYz10aGlzLnJlZ0V4ZXMudHlwZVN0ci5leGVjKGEpKWlmKGE9Y1sxXS50b0xvd2VyQ2FzZSgpLGM9Y1syXSx0aGlzLnBhcnNlW2FdJiYoYj10aGlzLnBhcnNlW2FdLmFwcGx5KHRoaXMsW2NdKSksdGhpcy5pbnRlcm5hbFByb2plY3Rpb24mJnRoaXMuZXh0ZXJuYWxQcm9qZWN0aW9uKWlmKGImJgoiT3BlbkxheWVycy5GZWF0dXJlLlZlY3RvciI9PWIuQ0xBU1NfTkFNRSliLmdlb21ldHJ5LnRyYW5zZm9ybSh0aGlzLmV4dGVybmFsUHJvamVjdGlvbix0aGlzLmludGVybmFsUHJvamVjdGlvbik7ZWxzZSBpZihiJiYiZ2VvbWV0cnljb2xsZWN0aW9uIiE9YSYmIm9iamVjdCI9PXR5cGVvZiBiKWZvcihhPTAsYz1iLmxlbmd0aDthPGM7YSsrKWJbYV0uZ2VvbWV0cnkudHJhbnNmb3JtKHRoaXMuZXh0ZXJuYWxQcm9qZWN0aW9uLHRoaXMuaW50ZXJuYWxQcm9qZWN0aW9uKTtyZXR1cm4gYn0sd3JpdGU6ZnVuY3Rpb24oYSl7dmFyIGIsYzthLmNvbnN0cnVjdG9yPT1BcnJheT9jPSEwOihhPVthXSxjPSExKTt2YXIgZD1bXTtjJiZkLnB1c2goIkdFT01FVFJZQ09MTEVDVElPTigiKTtmb3IodmFyIGU9MCxmPWEubGVuZ3RoO2U8ZjsrK2UpYyYmMDxlJiZkLnB1c2goIiwiKSxiPWFbZV0uZ2VvbWV0cnksZC5wdXNoKHRoaXMuZXh0cmFjdEdlb21ldHJ5KGIpKTtjJiZkLnB1c2goIikiKTtyZXR1cm4gZC5qb2luKCIiKX0sCmV4dHJhY3RHZW9tZXRyeTpmdW5jdGlvbihhKXt2YXIgYj1hLkNMQVNTX05BTUUuc3BsaXQoIi4iKVsyXS50b0xvd2VyQ2FzZSgpO2lmKCF0aGlzLmV4dHJhY3RbYl0pcmV0dXJuIG51bGw7dGhpcy5pbnRlcm5hbFByb2plY3Rpb24mJnRoaXMuZXh0ZXJuYWxQcm9qZWN0aW9uJiYoYT1hLmNsb25lKCksYS50cmFuc2Zvcm0odGhpcy5pbnRlcm5hbFByb2plY3Rpb24sdGhpcy5leHRlcm5hbFByb2plY3Rpb24pKTtyZXR1cm4oImNvbGxlY3Rpb24iPT1iPyJHRU9NRVRSWUNPTExFQ1RJT04iOmIudG9VcHBlckNhc2UoKSkrIigiK3RoaXMuZXh0cmFjdFtiXS5hcHBseSh0aGlzLFthXSkrIikifSxleHRyYWN0Ontwb2ludDpmdW5jdGlvbihhKXtyZXR1cm4gYS54KyIgIithLnl9LG11bHRpcG9pbnQ6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPVtdLGM9MCxkPWEuY29tcG9uZW50cy5sZW5ndGg7YzxkOysrYyliLnB1c2goIigiK3RoaXMuZXh0cmFjdC5wb2ludC5hcHBseSh0aGlzLFthLmNvbXBvbmVudHNbY11dKSsKIikiKTtyZXR1cm4gYi5qb2luKCIsIil9LGxpbmVzdHJpbmc6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPVtdLGM9MCxkPWEuY29tcG9uZW50cy5sZW5ndGg7YzxkOysrYyliLnB1c2godGhpcy5leHRyYWN0LnBvaW50LmFwcGx5KHRoaXMsW2EuY29tcG9uZW50c1tjXV0pKTtyZXR1cm4gYi5qb2luKCIsIil9LG11bHRpbGluZXN0cmluZzpmdW5jdGlvbihhKXtmb3IodmFyIGI9W10sYz0wLGQ9YS5jb21wb25lbnRzLmxlbmd0aDtjPGQ7KytjKWIucHVzaCgiKCIrdGhpcy5leHRyYWN0LmxpbmVzdHJpbmcuYXBwbHkodGhpcyxbYS5jb21wb25lbnRzW2NdXSkrIikiKTtyZXR1cm4gYi5qb2luKCIsIil9LHBvbHlnb246ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPVtdLGM9MCxkPWEuY29tcG9uZW50cy5sZW5ndGg7YzxkOysrYyliLnB1c2goIigiK3RoaXMuZXh0cmFjdC5saW5lc3RyaW5nLmFwcGx5KHRoaXMsW2EuY29tcG9uZW50c1tjXV0pKyIpIik7cmV0dXJuIGIuam9pbigiLCIpfSxtdWx0aXBvbHlnb246ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPQpbXSxjPTAsZD1hLmNvbXBvbmVudHMubGVuZ3RoO2M8ZDsrK2MpYi5wdXNoKCIoIit0aGlzLmV4dHJhY3QucG9seWdvbi5hcHBseSh0aGlzLFthLmNvbXBvbmVudHNbY11dKSsiKSIpO3JldHVybiBiLmpvaW4oIiwiKX0sY29sbGVjdGlvbjpmdW5jdGlvbihhKXtmb3IodmFyIGI9W10sYz0wLGQ9YS5jb21wb25lbnRzLmxlbmd0aDtjPGQ7KytjKWIucHVzaCh0aGlzLmV4dHJhY3RHZW9tZXRyeS5hcHBseSh0aGlzLFthLmNvbXBvbmVudHNbY11dKSk7cmV0dXJuIGIuam9pbigiLCIpfX0scGFyc2U6e3BvaW50OmZ1bmN0aW9uKGEpe2E9T3BlbkxheWVycy5TdHJpbmcudHJpbShhKS5zcGxpdCh0aGlzLnJlZ0V4ZXMuc3BhY2VzKTtyZXR1cm4gbmV3IE9wZW5MYXllcnMuRmVhdHVyZS5WZWN0b3IobmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoYVswXSxhWzFdKSl9LG11bHRpcG9pbnQ6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPU9wZW5MYXllcnMuU3RyaW5nLnRyaW0oYSkuc3BsaXQoIiwiKSwKYz1bXSxkPTAsZT1iLmxlbmd0aDtkPGU7KytkKWE9YltkXS5yZXBsYWNlKHRoaXMucmVnRXhlcy50cmltUGFyZW5zLCIkMSIpLGMucHVzaCh0aGlzLnBhcnNlLnBvaW50LmFwcGx5KHRoaXMsW2FdKS5nZW9tZXRyeSk7cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLkZlYXR1cmUuVmVjdG9yKG5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5Lk11bHRpUG9pbnQoYykpfSxsaW5lc3RyaW5nOmZ1bmN0aW9uKGEpe2E9T3BlbkxheWVycy5TdHJpbmcudHJpbShhKS5zcGxpdCgiLCIpO2Zvcih2YXIgYj1bXSxjPTAsZD1hLmxlbmd0aDtjPGQ7KytjKWIucHVzaCh0aGlzLnBhcnNlLnBvaW50LmFwcGx5KHRoaXMsW2FbY11dKS5nZW9tZXRyeSk7cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLkZlYXR1cmUuVmVjdG9yKG5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LkxpbmVTdHJpbmcoYikpfSxtdWx0aWxpbmVzdHJpbmc6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPU9wZW5MYXllcnMuU3RyaW5nLnRyaW0oYSkuc3BsaXQodGhpcy5yZWdFeGVzLnBhcmVuQ29tbWEpLApjPVtdLGQ9MCxlPWIubGVuZ3RoO2Q8ZTsrK2QpYT1iW2RdLnJlcGxhY2UodGhpcy5yZWdFeGVzLnRyaW1QYXJlbnMsIiQxIiksYy5wdXNoKHRoaXMucGFyc2UubGluZXN0cmluZy5hcHBseSh0aGlzLFthXSkuZ2VvbWV0cnkpO3JldHVybiBuZXcgT3BlbkxheWVycy5GZWF0dXJlLlZlY3RvcihuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5NdWx0aUxpbmVTdHJpbmcoYykpfSxwb2x5Z29uOmZ1bmN0aW9uKGEpe3ZhciBiO2E9T3BlbkxheWVycy5TdHJpbmcudHJpbShhKS5zcGxpdCh0aGlzLnJlZ0V4ZXMucGFyZW5Db21tYSk7Zm9yKHZhciBjPVtdLGQ9MCxlPWEubGVuZ3RoO2Q8ZTsrK2QpYj1hW2RdLnJlcGxhY2UodGhpcy5yZWdFeGVzLnRyaW1QYXJlbnMsIiQxIiksYj10aGlzLnBhcnNlLmxpbmVzdHJpbmcuYXBwbHkodGhpcyxbYl0pLmdlb21ldHJ5LGI9bmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuTGluZWFyUmluZyhiLmNvbXBvbmVudHMpLGMucHVzaChiKTtyZXR1cm4gbmV3IE9wZW5MYXllcnMuRmVhdHVyZS5WZWN0b3IobmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9seWdvbihjKSl9LAptdWx0aXBvbHlnb246ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPU9wZW5MYXllcnMuU3RyaW5nLnRyaW0oYSkuc3BsaXQodGhpcy5yZWdFeGVzLmRvdWJsZVBhcmVuQ29tbWEpLGM9W10sZD0wLGU9Yi5sZW5ndGg7ZDxlOysrZClhPWJbZF0ucmVwbGFjZSh0aGlzLnJlZ0V4ZXMudHJpbVBhcmVucywiJDEiKSxjLnB1c2godGhpcy5wYXJzZS5wb2x5Z29uLmFwcGx5KHRoaXMsW2FdKS5nZW9tZXRyeSk7cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLkZlYXR1cmUuVmVjdG9yKG5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5Lk11bHRpUG9seWdvbihjKSl9LGdlb21ldHJ5Y29sbGVjdGlvbjpmdW5jdGlvbihhKXthPWEucmVwbGFjZSgvLFxzKihbQS1aYS16XSkvZywifCQxIik7YT1PcGVuTGF5ZXJzLlN0cmluZy50cmltKGEpLnNwbGl0KCJ8Iik7Zm9yKHZhciBiPVtdLGM9MCxkPWEubGVuZ3RoO2M8ZDsrK2MpYi5wdXNoKE9wZW5MYXllcnMuRm9ybWF0LldLVC5wcm90b3R5cGUucmVhZC5hcHBseSh0aGlzLFthW2NdXSkpOwpyZXR1cm4gYn19LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuRm9ybWF0LldLVCJ9KTtPcGVuTGF5ZXJzLldQU1Byb2Nlc3M9T3BlbkxheWVycy5DbGFzcyh7Y2xpZW50Om51bGwsc2VydmVyOm51bGwsaWRlbnRpZmllcjpudWxsLGRlc2NyaXB0aW9uOm51bGwsbG9jYWxXUFM6Imh0dHA6Ly9nZW9zZXJ2ZXIvd3BzIixmb3JtYXRzOm51bGwsY2hhaW5lZDowLGV4ZWN1dGVDYWxsYmFja3M6bnVsbCxpbml0aWFsaXplOmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuVXRpbC5leHRlbmQodGhpcyxhKTt0aGlzLmV4ZWN1dGVDYWxsYmFja3M9W107dGhpcy5mb3JtYXRzPXsiYXBwbGljYXRpb24vd2t0IjpuZXcgT3BlbkxheWVycy5Gb3JtYXQuV0tULCJhcHBsaWNhdGlvbi9qc29uIjpuZXcgT3BlbkxheWVycy5Gb3JtYXQuR2VvSlNPTn19LGRlc2NyaWJlOmZ1bmN0aW9uKGEpe2E9YXx8e307aWYoIXRoaXMuZGVzY3JpcHRpb24pdGhpcy5jbGllbnQuZGVzY3JpYmVQcm9jZXNzKHRoaXMuc2VydmVyLHRoaXMuaWRlbnRpZmllcixmdW5jdGlvbihiKXt0aGlzLmRlc2NyaXB0aW9ufHx0aGlzLnBhcnNlRGVzY3JpcHRpb24oYik7CmEuY2FsbGJhY2smJmEuY2FsbGJhY2suY2FsbChhLnNjb3BlLHRoaXMuZGVzY3JpcHRpb24pfSx0aGlzKTtlbHNlIGlmKGEuY2FsbGJhY2spe3ZhciBiPXRoaXMuZGVzY3JpcHRpb247d2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKXthLmNhbGxiYWNrLmNhbGwoYS5zY29wZSxiKX0sMCl9fSxjb25maWd1cmU6ZnVuY3Rpb24oYSl7dGhpcy5kZXNjcmliZSh7Y2FsbGJhY2s6ZnVuY3Rpb24oKXt2YXIgYj10aGlzLmRlc2NyaXB0aW9uLGM9YS5pbnB1dHMsZCxlLGY7ZT0wO2ZvcihmPWIuZGF0YUlucHV0cy5sZW5ndGg7ZTxmOysrZSlkPWIuZGF0YUlucHV0c1tlXSx0aGlzLnNldElucHV0RGF0YShkLGNbZC5pZGVudGlmaWVyXSk7YS5jYWxsYmFjayYmYS5jYWxsYmFjay5jYWxsKGEuc2NvcGUpfSxzY29wZTp0aGlzfSk7cmV0dXJuIHRoaXN9LGV4ZWN1dGU6ZnVuY3Rpb24oYSl7dGhpcy5jb25maWd1cmUoe2lucHV0czphLmlucHV0cyxjYWxsYmFjazpmdW5jdGlvbigpe3ZhciBiPXRoaXMsCmM9dGhpcy5nZXRPdXRwdXRJbmRleChiLmRlc2NyaXB0aW9uLnByb2Nlc3NPdXRwdXRzLGEub3V0cHV0KTtiLnNldFJlc3BvbnNlRm9ybSh7b3V0cHV0SW5kZXg6Y30pOyhmdW5jdGlvbiBlKCl7T3BlbkxheWVycy5VdGlsLnJlbW92ZUl0ZW0oYi5leGVjdXRlQ2FsbGJhY2tzLGUpOzAhPT1iLmNoYWluZWQ/Yi5leGVjdXRlQ2FsbGJhY2tzLnB1c2goZSk6T3BlbkxheWVycy5SZXF1ZXN0LlBPU1Qoe3VybDpiLmNsaWVudC5zZXJ2ZXJzW2Iuc2VydmVyXS51cmwsZGF0YToobmV3IE9wZW5MYXllcnMuRm9ybWF0LldQU0V4ZWN1dGUpLndyaXRlKGIuZGVzY3JpcHRpb24pLHN1Y2Nlc3M6ZnVuY3Rpb24oZSl7dmFyIGc9Yi5maW5kTWltZVR5cGUoYi5kZXNjcmlwdGlvbi5wcm9jZXNzT3V0cHV0c1tjXS5jb21wbGV4T3V0cHV0LnN1cHBvcnRlZC5mb3JtYXRzKTtlPWIuZm9ybWF0c1tnXS5yZWFkKGUucmVzcG9uc2VUZXh0KTtlIGluc3RhbmNlb2YgT3BlbkxheWVycy5GZWF0dXJlLlZlY3RvciYmCihlPVtlXSk7YS5zdWNjZXNzJiYoZz17fSxnW2Eub3V0cHV0fHwicmVzdWx0Il09ZSxhLnN1Y2Nlc3MuY2FsbChhLnNjb3BlLGcpKX0sc2NvcGU6Yn0pfSkoKX0sc2NvcGU6dGhpc30pfSxvdXRwdXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLldQU1Byb2Nlc3MuQ2hhaW5MaW5rKHtwcm9jZXNzOnRoaXMsb3V0cHV0OmF9KX0scGFyc2VEZXNjcmlwdGlvbjpmdW5jdGlvbihhKXthPXRoaXMuY2xpZW50LnNlcnZlcnNbdGhpcy5zZXJ2ZXJdO3RoaXMuZGVzY3JpcHRpb249KG5ldyBPcGVuTGF5ZXJzLkZvcm1hdC5XUFNEZXNjcmliZVByb2Nlc3MpLnJlYWQoYS5wcm9jZXNzRGVzY3JpcHRpb25bdGhpcy5pZGVudGlmaWVyXSkucHJvY2Vzc0Rlc2NyaXB0aW9uc1t0aGlzLmlkZW50aWZpZXJdfSxzZXRJbnB1dERhdGE6ZnVuY3Rpb24oYSxiKXtkZWxldGUgYS5kYXRhO2RlbGV0ZSBhLnJlZmVyZW5jZTtpZihiIGluc3RhbmNlb2YgT3BlbkxheWVycy5XUFNQcm9jZXNzLkNoYWluTGluaykrK3RoaXMuY2hhaW5lZCwKYS5yZWZlcmVuY2U9e21ldGhvZDoiUE9TVCIsaHJlZjpiLnByb2Nlc3Muc2VydmVyPT09dGhpcy5zZXJ2ZXI/dGhpcy5sb2NhbFdQUzp0aGlzLmNsaWVudC5zZXJ2ZXJzW2IucHJvY2Vzcy5zZXJ2ZXJdLnVybH0sYi5wcm9jZXNzLmRlc2NyaWJlKHtjYWxsYmFjazpmdW5jdGlvbigpey0tdGhpcy5jaGFpbmVkO3RoaXMuY2hhaW5Qcm9jZXNzKGEsYil9LHNjb3BlOnRoaXN9KTtlbHNle2EuZGF0YT17fTt2YXIgYz1hLmNvbXBsZXhEYXRhO2M/KGM9dGhpcy5maW5kTWltZVR5cGUoYy5zdXBwb3J0ZWQuZm9ybWF0cyksYS5kYXRhLmNvbXBsZXhEYXRhPXttaW1lVHlwZTpjLHZhbHVlOnRoaXMuZm9ybWF0c1tjXS53cml0ZSh0aGlzLnRvRmVhdHVyZXMoYikpfSk6YS5kYXRhLmxpdGVyYWxEYXRhPXt2YWx1ZTpifX19LHNldFJlc3BvbnNlRm9ybTpmdW5jdGlvbihhKXthPWF8fHt9O3ZhciBiPXRoaXMuZGVzY3JpcHRpb24ucHJvY2Vzc091dHB1dHNbYS5vdXRwdXRJbmRleHx8MF07dGhpcy5kZXNjcmlwdGlvbi5yZXNwb25zZUZvcm09CntyYXdEYXRhT3V0cHV0OntpZGVudGlmaWVyOmIuaWRlbnRpZmllcixtaW1lVHlwZTp0aGlzLmZpbmRNaW1lVHlwZShiLmNvbXBsZXhPdXRwdXQuc3VwcG9ydGVkLmZvcm1hdHMsYS5zdXBwb3J0ZWRGb3JtYXRzKX19fSxnZXRPdXRwdXRJbmRleDpmdW5jdGlvbihhLGIpe3ZhciBjO2lmKGIpZm9yKHZhciBkPWEubGVuZ3RoLTE7MDw9ZDstLWQpe2lmKGFbZF0uaWRlbnRpZmllcj09PWIpe2M9ZDticmVha319ZWxzZSBjPTA7cmV0dXJuIGN9LGNoYWluUHJvY2VzczpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuZ2V0T3V0cHV0SW5kZXgoYi5wcm9jZXNzLmRlc2NyaXB0aW9uLnByb2Nlc3NPdXRwdXRzLGIub3V0cHV0KTthLnJlZmVyZW5jZS5taW1lVHlwZT10aGlzLmZpbmRNaW1lVHlwZShhLmNvbXBsZXhEYXRhLnN1cHBvcnRlZC5mb3JtYXRzLGIucHJvY2Vzcy5kZXNjcmlwdGlvbi5wcm9jZXNzT3V0cHV0c1tjXS5jb21wbGV4T3V0cHV0LnN1cHBvcnRlZC5mb3JtYXRzKTt2YXIgZD17fTsKZFthLnJlZmVyZW5jZS5taW1lVHlwZV09ITA7Yi5wcm9jZXNzLnNldFJlc3BvbnNlRm9ybSh7b3V0cHV0SW5kZXg6YyxzdXBwb3J0ZWRGb3JtYXRzOmR9KTtmb3IoYS5yZWZlcmVuY2UuYm9keT1iLnByb2Nlc3MuZGVzY3JpcHRpb247MDx0aGlzLmV4ZWN1dGVDYWxsYmFja3MubGVuZ3RoOyl0aGlzLmV4ZWN1dGVDYWxsYmFja3NbMF0oKX0sdG9GZWF0dXJlczpmdW5jdGlvbihhKXt2YXIgYj1PcGVuTGF5ZXJzLlV0aWwuaXNBcnJheShhKTtifHwoYT1bYV0pO2Zvcih2YXIgYz1BcnJheShhLmxlbmd0aCksZCxlPTAsZj1hLmxlbmd0aDtlPGY7KytlKWQ9YVtlXSxjW2VdPWQgaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLkZlYXR1cmUuVmVjdG9yP2Q6bmV3IE9wZW5MYXllcnMuRmVhdHVyZS5WZWN0b3IoZCk7cmV0dXJuIGI/YzpjWzBdfSxmaW5kTWltZVR5cGU6ZnVuY3Rpb24oYSxiKXtiPWJ8fHRoaXMuZm9ybWF0cztmb3IodmFyIGMgaW4gYSlpZihjIGluIGIpcmV0dXJuIGN9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuV1BTUHJvY2VzcyJ9KTsKT3BlbkxheWVycy5XUFNQcm9jZXNzLkNoYWluTGluaz1PcGVuTGF5ZXJzLkNsYXNzKHtwcm9jZXNzOm51bGwsb3V0cHV0Om51bGwsaW5pdGlhbGl6ZTpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHRoaXMsYSl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuV1BTUHJvY2Vzcy5DaGFpbkxpbmsifSk7T3BlbkxheWVycy5XUFNDbGllbnQ9T3BlbkxheWVycy5DbGFzcyh7c2VydmVyczpudWxsLHZlcnNpb246IjEuMC4wIixsYXp5OiExLGV2ZW50czpudWxsLGluaXRpYWxpemU6ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5VdGlsLmV4dGVuZCh0aGlzLGEpO3RoaXMuZXZlbnRzPW5ldyBPcGVuTGF5ZXJzLkV2ZW50cyh0aGlzKTt0aGlzLnNlcnZlcnM9e307Zm9yKHZhciBiIGluIGEuc2VydmVycyl0aGlzLnNlcnZlcnNbYl09InN0cmluZyI9PXR5cGVvZiBhLnNlcnZlcnNbYl0/e3VybDphLnNlcnZlcnNbYl0sdmVyc2lvbjp0aGlzLnZlcnNpb24scHJvY2Vzc0Rlc2NyaXB0aW9uOnt9fTphLnNlcnZlcnNbYl19LGV4ZWN1dGU6ZnVuY3Rpb24oYSl7dGhpcy5nZXRQcm9jZXNzKGEuc2VydmVyLGEucHJvY2VzcykuZXhlY3V0ZSh7aW5wdXRzOmEuaW5wdXRzLHN1Y2Nlc3M6YS5zdWNjZXNzLHNjb3BlOmEuc2NvcGV9KX0sZ2V0UHJvY2VzczpmdW5jdGlvbihhLGIpe3ZhciBjPW5ldyBPcGVuTGF5ZXJzLldQU1Byb2Nlc3Moe2NsaWVudDp0aGlzLApzZXJ2ZXI6YSxpZGVudGlmaWVyOmJ9KTt0aGlzLmxhenl8fGMuZGVzY3JpYmUoKTtyZXR1cm4gY30sZGVzY3JpYmVQcm9jZXNzOmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPXRoaXMuc2VydmVyc1thXTtlLnByb2Nlc3NEZXNjcmlwdGlvbltiXT93aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpe2MuY2FsbChkLGUucHJvY2Vzc0Rlc2NyaXB0aW9uW2JdKX0sMCk6YiBpbiBlLnByb2Nlc3NEZXNjcmlwdGlvbj90aGlzLmV2ZW50cy5yZWdpc3RlcigiZGVzY3JpYmVwcm9jZXNzIix0aGlzLGZ1bmN0aW9uIGcoYSl7YS5pZGVudGlmaWVyPT09YiYmKHRoaXMuZXZlbnRzLnVucmVnaXN0ZXIoImRlc2NyaWJlcHJvY2VzcyIsdGhpcyxnKSxjLmNhbGwoZCxhLnJhdykpfSk6KGUucHJvY2Vzc0Rlc2NyaXB0aW9uW2JdPW51bGwsT3BlbkxheWVycy5SZXF1ZXN0LkdFVCh7dXJsOmUudXJsLHBhcmFtczp7U0VSVklDRToiV1BTIixWRVJTSU9OOmUudmVyc2lvbixSRVFVRVNUOiJEZXNjcmliZVByb2Nlc3MiLApJREVOVElGSUVSOmJ9LHN1Y2Nlc3M6ZnVuY3Rpb24oYSl7ZS5wcm9jZXNzRGVzY3JpcHRpb25bYl09YS5yZXNwb25zZVRleHQ7dGhpcy5ldmVudHMudHJpZ2dlckV2ZW50KCJkZXNjcmliZXByb2Nlc3MiLHtpZGVudGlmaWVyOmIscmF3OmEucmVzcG9uc2VUZXh0fSl9LHNjb3BlOnRoaXN9KSl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmV2ZW50cy5kZXN0cm95KCk7dGhpcy5zZXJ2ZXJzPXRoaXMuZXZlbnRzPW51bGx9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuV1BTQ2xpZW50In0pO09wZW5MYXllcnMuRm9ybWF0LkNTV0dldFJlY29yZHMudjJfMF8yPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Gb3JtYXQuWE1MLHtuYW1lc3BhY2VzOntjc3c6Imh0dHA6Ly93d3cub3Blbmdpcy5uZXQvY2F0L2Nzdy8yLjAuMiIsZGM6Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIixkY3Q6Imh0dHA6Ly9wdXJsLm9yZy9kYy90ZXJtcy8iLGdtZDoiaHR0cDovL3d3dy5pc290YzIxMS5vcmcvMjAwNS9nbWQiLGdlb25ldDoiaHR0cDovL3d3dy5mYW8ub3JnL2dlb25ldHdvcmsiLG9nYzoiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9vZ2MiLG93czoiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9vd3MiLHhsaW5rOiJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIix4c2k6Imh0dHA6Ly93d3cudzMub3JnLzIwMDEvWE1MU2NoZW1hLWluc3RhbmNlIn0sZGVmYXVsdFByZWZpeDoiY3N3Iix2ZXJzaW9uOiIyLjAuMiIsc2NoZW1hTG9jYXRpb246Imh0dHA6Ly93d3cub3Blbmdpcy5uZXQvY2F0L2Nzdy8yLjAuMiBodHRwOi8vc2NoZW1hcy5vcGVuZ2lzLm5ldC9jc3cvMi4wLjIvQ1NXLWRpc2NvdmVyeS54c2QiLApyZXF1ZXN0SWQ6bnVsbCxyZXN1bHRUeXBlOm51bGwsb3V0cHV0Rm9ybWF0Om51bGwsb3V0cHV0U2NoZW1hOm51bGwsc3RhcnRQb3NpdGlvbjpudWxsLG1heFJlY29yZHM6bnVsbCxEaXN0cmlidXRlZFNlYXJjaDpudWxsLFJlc3BvbnNlSGFuZGxlcjpudWxsLFF1ZXJ5Om51bGwscmVnRXhlczp7dHJpbVNwYWNlOi9eXHMqfFxzKiQvZyxyZW1vdmVTcGFjZTovXHMqL2csc3BsaXRTcGFjZTovXHMrLyx0cmltQ29tbWE6L1xzKixccyovZ30saW5pdGlhbGl6ZTpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLkZvcm1hdC5YTUwucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxbYV0pfSxyZWFkOmZ1bmN0aW9uKGEpeyJzdHJpbmciPT10eXBlb2YgYSYmKGE9T3BlbkxheWVycy5Gb3JtYXQuWE1MLnByb3RvdHlwZS5yZWFkLmFwcGx5KHRoaXMsW2FdKSk7YSYmOT09YS5ub2RlVHlwZSYmKGE9YS5kb2N1bWVudEVsZW1lbnQpO3ZhciBiPXt9O3RoaXMucmVhZE5vZGUoYSxiKTtyZXR1cm4gYn0sCnJlYWRlcnM6e2Nzdzp7R2V0UmVjb3Jkc1Jlc3BvbnNlOmZ1bmN0aW9uKGEsYil7Yi5yZWNvcmRzPVtdO3RoaXMucmVhZENoaWxkTm9kZXMoYSxiKTt2YXIgYz10aGlzLmdldEF0dHJpYnV0ZU5TKGEsIiIsInZlcnNpb24iKTsiIiE9YyYmKGIudmVyc2lvbj1jKX0sUmVxdWVzdElkOmZ1bmN0aW9uKGEsYil7Yi5SZXF1ZXN0SWQ9dGhpcy5nZXRDaGlsZFZhbHVlKGEpfSxTZWFyY2hTdGF0dXM6ZnVuY3Rpb24oYSxiKXtiLlNlYXJjaFN0YXR1cz17fTt2YXIgYz10aGlzLmdldEF0dHJpYnV0ZU5TKGEsIiIsInRpbWVzdGFtcCIpOyIiIT1jJiYoYi5TZWFyY2hTdGF0dXMudGltZXN0YW1wPWMpfSxTZWFyY2hSZXN1bHRzOmZ1bmN0aW9uKGEsYil7dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGIpO2Zvcih2YXIgYz1hLmF0dHJpYnV0ZXMsZD17fSxlPTAsZj1jLmxlbmd0aDtlPGY7KytlKWRbY1tlXS5uYW1lXT0ibnVtYmVyT2ZSZWNvcmRzTWF0Y2hlZCI9PWNbZV0ubmFtZXx8Im51bWJlck9mUmVjb3Jkc1JldHVybmVkIj09CmNbZV0ubmFtZXx8Im5leHRSZWNvcmQiPT1jW2VdLm5hbWU/cGFyc2VJbnQoY1tlXS5ub2RlVmFsdWUpOmNbZV0ubm9kZVZhbHVlO2IuU2VhcmNoUmVzdWx0cz1kfSxTdW1tYXJ5UmVjb3JkOmZ1bmN0aW9uKGEsYil7dmFyIGM9e3R5cGU6IlN1bW1hcnlSZWNvcmQifTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYyk7Yi5yZWNvcmRzLnB1c2goYyl9LEJyaWVmUmVjb3JkOmZ1bmN0aW9uKGEsYil7dmFyIGM9e3R5cGU6IkJyaWVmUmVjb3JkIn07dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGMpO2IucmVjb3Jkcy5wdXNoKGMpfSxEQ01JUmVjb3JkOmZ1bmN0aW9uKGEsYil7dmFyIGM9e3R5cGU6IkRDTUlSZWNvcmQifTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYyk7Yi5yZWNvcmRzLnB1c2goYyl9LFJlY29yZDpmdW5jdGlvbihhLGIpe3ZhciBjPXt0eXBlOiJSZWNvcmQifTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYyk7Yi5yZWNvcmRzLnB1c2goYyl9LCIqIjpmdW5jdGlvbihhLGIpe3ZhciBjPWEubG9jYWxOYW1lfHwKYS5ub2RlTmFtZS5zcGxpdCgiOiIpLnBvcCgpO2JbY109dGhpcy5nZXRDaGlsZFZhbHVlKGEpfX0sZ2VvbmV0OntpbmZvOmZ1bmN0aW9uKGEsYil7dmFyIGM9e307dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGMpO2IuZ25pbmZvPWN9fSxkYzp7IioiOmZ1bmN0aW9uKGEsYil7dmFyIGM9YS5sb2NhbE5hbWV8fGEubm9kZU5hbWUuc3BsaXQoIjoiKS5wb3AoKTtPcGVuTGF5ZXJzLlV0aWwuaXNBcnJheShiW2NdKXx8KGJbY109W10pO2Zvcih2YXIgZD17fSxlPWEuYXR0cmlidXRlcyxmPTAsZz1lLmxlbmd0aDtmPGc7KytmKWRbZVtmXS5uYW1lXT1lW2ZdLm5vZGVWYWx1ZTtkLnZhbHVlPXRoaXMuZ2V0Q2hpbGRWYWx1ZShhKTsiIiE9ZC52YWx1ZSYmYltjXS5wdXNoKGQpfX0sZGN0OnsiKiI6ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLmxvY2FsTmFtZXx8YS5ub2RlTmFtZS5zcGxpdCgiOiIpLnBvcCgpO09wZW5MYXllcnMuVXRpbC5pc0FycmF5KGJbY10pfHwoYltjXT1bXSk7YltjXS5wdXNoKHRoaXMuZ2V0Q2hpbGRWYWx1ZShhKSl9fSwKb3dzOk9wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKHtCb3VuZGluZ0JveDpmdW5jdGlvbihhLGIpe2IuYm91bmRzJiYoYi5Cb3VuZGluZ0JveD1be2NyczpiLnByb2plY3Rpb24sdmFsdWU6W2IuYm91bmRzLmxlZnQsYi5ib3VuZHMuYm90dG9tLGIuYm91bmRzLnJpZ2h0LGIuYm91bmRzLnRvcF19XSxkZWxldGUgYi5wcm9qZWN0aW9uLGRlbGV0ZSBiLmJvdW5kcyk7T3BlbkxheWVycy5Gb3JtYXQuT1dTQ29tbW9uLnYxXzBfMC5wcm90b3R5cGUucmVhZGVycy5vd3MuQm91bmRpbmdCb3guYXBwbHkodGhpcyxhcmd1bWVudHMpfX0sT3BlbkxheWVycy5Gb3JtYXQuT1dTQ29tbW9uLnYxXzBfMC5wcm90b3R5cGUucmVhZGVycy5vd3MpfSx3cml0ZTpmdW5jdGlvbihhKXthPXRoaXMud3JpdGVOb2RlKCJjc3c6R2V0UmVjb3JkcyIsYSk7YS5zZXRBdHRyaWJ1dGUoInhtbG5zOmdtZCIsdGhpcy5uYW1lc3BhY2VzLmdtZCk7cmV0dXJuIE9wZW5MYXllcnMuRm9ybWF0LlhNTC5wcm90b3R5cGUud3JpdGUuYXBwbHkodGhpcywKW2FdKX0sd3JpdGVyczp7Y3N3OntHZXRSZWNvcmRzOmZ1bmN0aW9uKGEpe2F8fChhPXt9KTt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoImNzdzpHZXRSZWNvcmRzIix7YXR0cmlidXRlczp7c2VydmljZToiQ1NXIix2ZXJzaW9uOnRoaXMudmVyc2lvbixyZXF1ZXN0SWQ6YS5yZXF1ZXN0SWR8fHRoaXMucmVxdWVzdElkLHJlc3VsdFR5cGU6YS5yZXN1bHRUeXBlfHx0aGlzLnJlc3VsdFR5cGUsb3V0cHV0Rm9ybWF0OmEub3V0cHV0Rm9ybWF0fHx0aGlzLm91dHB1dEZvcm1hdCxvdXRwdXRTY2hlbWE6YS5vdXRwdXRTY2hlbWF8fHRoaXMub3V0cHV0U2NoZW1hLHN0YXJ0UG9zaXRpb246YS5zdGFydFBvc2l0aW9ufHx0aGlzLnN0YXJ0UG9zaXRpb24sbWF4UmVjb3JkczphLm1heFJlY29yZHN8fHRoaXMubWF4UmVjb3Jkc319KTsoYS5EaXN0cmlidXRlZFNlYXJjaHx8dGhpcy5EaXN0cmlidXRlZFNlYXJjaCkmJnRoaXMud3JpdGVOb2RlKCJjc3c6RGlzdHJpYnV0ZWRTZWFyY2giLAphLkRpc3RyaWJ1dGVkU2VhcmNofHx0aGlzLkRpc3RyaWJ1dGVkU2VhcmNoLGIpO3ZhciBjPWEuUmVzcG9uc2VIYW5kbGVyfHx0aGlzLlJlc3BvbnNlSGFuZGxlcjtpZihPcGVuTGF5ZXJzLlV0aWwuaXNBcnJheShjKSYmMDxjLmxlbmd0aClmb3IodmFyIGQ9MCxlPWMubGVuZ3RoO2Q8ZTtkKyspdGhpcy53cml0ZU5vZGUoImNzdzpSZXNwb25zZUhhbmRsZXIiLGNbZF0sYik7dGhpcy53cml0ZU5vZGUoIlF1ZXJ5IixhLlF1ZXJ5fHx0aGlzLlF1ZXJ5LGIpO3JldHVybiBifSxEaXN0cmlidXRlZFNlYXJjaDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJjc3c6RGlzdHJpYnV0ZWRTZWFyY2giLHthdHRyaWJ1dGVzOntob3BDb3VudDphLmhvcENvdW50fX0pfSxSZXNwb25zZUhhbmRsZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygiY3N3OlJlc3BvbnNlSGFuZGxlciIse3ZhbHVlOmEudmFsdWV9KX0sUXVlcnk6ZnVuY3Rpb24oYSl7YXx8CihhPXt9KTt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoImNzdzpRdWVyeSIse2F0dHJpYnV0ZXM6e3R5cGVOYW1lczphLnR5cGVOYW1lc3x8ImNzdzpSZWNvcmQifX0pLGM9YS5FbGVtZW50TmFtZTtpZihPcGVuTGF5ZXJzLlV0aWwuaXNBcnJheShjKSYmMDxjLmxlbmd0aClmb3IodmFyIGQ9MCxlPWMubGVuZ3RoO2Q8ZTtkKyspdGhpcy53cml0ZU5vZGUoImNzdzpFbGVtZW50TmFtZSIsY1tkXSxiKTtlbHNlIHRoaXMud3JpdGVOb2RlKCJjc3c6RWxlbWVudFNldE5hbWUiLGEuRWxlbWVudFNldE5hbWV8fHt2YWx1ZToic3VtbWFyeSJ9LGIpO2EuQ29uc3RyYWludCYmdGhpcy53cml0ZU5vZGUoImNzdzpDb25zdHJhaW50IixhLkNvbnN0cmFpbnQsYik7YS5Tb3J0QnkmJnRoaXMud3JpdGVOb2RlKCJvZ2M6U29ydEJ5IixhLlNvcnRCeSxiKTtyZXR1cm4gYn0sRWxlbWVudE5hbWU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygiY3N3OkVsZW1lbnROYW1lIiwKe3ZhbHVlOmEudmFsdWV9KX0sRWxlbWVudFNldE5hbWU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygiY3N3OkVsZW1lbnRTZXROYW1lIix7YXR0cmlidXRlczp7dHlwZU5hbWVzOmEudHlwZU5hbWVzfSx2YWx1ZTphLnZhbHVlfSl9LENvbnN0cmFpbnQ6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJjc3c6Q29uc3RyYWludCIse2F0dHJpYnV0ZXM6e3ZlcnNpb246YS52ZXJzaW9ufX0pO2lmKGEuRmlsdGVyKXt2YXIgYz1uZXcgT3BlbkxheWVycy5Gb3JtYXQuRmlsdGVyKHt2ZXJzaW9uOmEudmVyc2lvbn0pO2IuYXBwZW5kQ2hpbGQoYy53cml0ZShhLkZpbHRlcikpfWVsc2UgYS5DcWxUZXh0JiYoYT10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoIkNxbFRleHQiLHt2YWx1ZTphLkNxbFRleHQudmFsdWV9KSxiLmFwcGVuZENoaWxkKGEpKTtyZXR1cm4gYn19LG9nYzpPcGVuTGF5ZXJzLkZvcm1hdC5GaWx0ZXIudjFfMV8wLnByb3RvdHlwZS53cml0ZXJzLm9nY30sCkNMQVNTX05BTUU6Ik9wZW5MYXllcnMuRm9ybWF0LkNTV0dldFJlY29yZHMudjJfMF8yIn0pOy8qCiBBcGFjaGUgMiAKCiBDb250YWlucyBwb3J0aW9ucyBvZiBSaWNvIDxodHRwOi8vb3BlbnJpY28ub3JnLz4KCiBDb3B5cmlnaHQgMjAwNSBTYWJyZSBBaXJsaW5lIFNvbHV0aW9ucyAgCgogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7IHlvdQogbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuIFlvdQogbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wICAKCiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yCiBpbXBsaWVkLiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcKIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4gCiovCk9wZW5MYXllcnMuTWFya2VyLkJveD1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuTWFya2VyLHtib3VuZHM6bnVsbCxkaXY6bnVsbCxpbml0aWFsaXplOmZ1bmN0aW9uKGEsYixjKXt0aGlzLmJvdW5kcz1hO3RoaXMuZGl2PU9wZW5MYXllcnMuVXRpbC5jcmVhdGVEaXYoKTt0aGlzLmRpdi5zdHlsZS5vdmVyZmxvdz0iaGlkZGVuIjt0aGlzLmV2ZW50cz1uZXcgT3BlbkxheWVycy5FdmVudHModGhpcyx0aGlzLmRpdik7dGhpcy5zZXRCb3JkZXIoYixjKX0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuZGl2PXRoaXMuYm91bmRzPW51bGw7T3BlbkxheWVycy5NYXJrZXIucHJvdG90eXBlLmRlc3Ryb3kuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxzZXRCb3JkZXI6ZnVuY3Rpb24oYSxiKXthfHwoYT0icmVkIik7Ynx8KGI9Mik7dGhpcy5kaXYuc3R5bGUuYm9yZGVyPWIrInB4IHNvbGlkICIrYX0sZHJhdzpmdW5jdGlvbihhLGIpe09wZW5MYXllcnMuVXRpbC5tb2RpZnlET01FbGVtZW50KHRoaXMuZGl2LApudWxsLGEsYik7cmV0dXJuIHRoaXMuZGl2fSxvblNjcmVlbjpmdW5jdGlvbigpe3ZhciBhPSExO3RoaXMubWFwJiYoYT10aGlzLm1hcC5nZXRFeHRlbnQoKS5jb250YWluc0JvdW5kcyh0aGlzLmJvdW5kcywhMCwhMCkpO3JldHVybiBhfSxkaXNwbGF5OmZ1bmN0aW9uKGEpe3RoaXMuZGl2LnN0eWxlLmRpc3BsYXk9YT8iIjoibm9uZSJ9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuTWFya2VyLkJveCJ9KTtPcGVuTGF5ZXJzLkZvcm1hdC5UZXh0PU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Gb3JtYXQse2RlZmF1bHRTdHlsZTpudWxsLGV4dHJhY3RTdHlsZXM6ITAsaW5pdGlhbGl6ZTpmdW5jdGlvbihhKXthPWF8fHt9OyExIT09YS5leHRyYWN0U3R5bGVzJiYoYS5kZWZhdWx0U3R5bGU9e2V4dGVybmFsR3JhcGhpYzpPcGVuTGF5ZXJzLlV0aWwuZ2V0SW1hZ2VMb2NhdGlvbigibWFya2VyLnBuZyIpLGdyYXBoaWNXaWR0aDoyMSxncmFwaGljSGVpZ2h0OjI1LGdyYXBoaWNYT2Zmc2V0Oi0xMC41LGdyYXBoaWNZT2Zmc2V0Oi0xMi41fSk7T3BlbkxheWVycy5Gb3JtYXQucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxbYV0pfSxyZWFkOmZ1bmN0aW9uKGEpe2E9YS5zcGxpdCgiXG4iKTtmb3IodmFyIGIsYz1bXSxkPTA7ZDxhLmxlbmd0aC0xO2QrKyl7dmFyIGU9YVtkXS5yZXBsYWNlKC9eXHMqLywiIikucmVwbGFjZSgvXHMqJC8sIiIpO2lmKCIjIiE9ZS5jaGFyQXQoMCkpaWYoYil7Zm9yKHZhciBlPQplLnNwbGl0KCJcdCIpLGY9bmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoMCwwKSxnPXt9LGg9dGhpcy5kZWZhdWx0U3R5bGU/T3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoe30sdGhpcy5kZWZhdWx0U3R5bGUpOm51bGwsaz0hMSxsPTA7bDxlLmxlbmd0aDtsKyspaWYoZVtsXSlpZigicG9pbnQiPT1iW2xdKWs9ZVtsXS5zcGxpdCgiLCIpLGYueT1wYXJzZUZsb2F0KGtbMF0pLGYueD1wYXJzZUZsb2F0KGtbMV0pLGs9ITA7ZWxzZSBpZigibGF0Ij09YltsXSlmLnk9cGFyc2VGbG9hdChlW2xdKSxrPSEwO2Vsc2UgaWYoImxvbiI9PWJbbF0pZi54PXBhcnNlRmxvYXQoZVtsXSksaz0hMDtlbHNlIGlmKCJ0aXRsZSI9PWJbbF0pZy50aXRsZT1lW2xdO2Vsc2UgaWYoImltYWdlIj09YltsXXx8Imljb24iPT1iW2xdJiZoKWguZXh0ZXJuYWxHcmFwaGljPWVbbF07ZWxzZSBpZigiaWNvblNpemUiPT1iW2xdJiZoKXt2YXIgbT1lW2xdLnNwbGl0KCIsIik7aC5ncmFwaGljV2lkdGg9CnBhcnNlRmxvYXQobVswXSk7aC5ncmFwaGljSGVpZ2h0PXBhcnNlRmxvYXQobVsxXSl9ZWxzZSJpY29uT2Zmc2V0Ij09YltsXSYmaD8obT1lW2xdLnNwbGl0KCIsIiksaC5ncmFwaGljWE9mZnNldD1wYXJzZUZsb2F0KG1bMF0pLGguZ3JhcGhpY1lPZmZzZXQ9cGFyc2VGbG9hdChtWzFdKSk6ImRlc2NyaXB0aW9uIj09YltsXT9nLmRlc2NyaXB0aW9uPWVbbF06Im92ZXJmbG93Ij09YltsXT9nLm92ZXJmbG93PWVbbF06Z1tiW2xdXT1lW2xdO2smJih0aGlzLmludGVybmFsUHJvamVjdGlvbiYmdGhpcy5leHRlcm5hbFByb2plY3Rpb24mJmYudHJhbnNmb3JtKHRoaXMuZXh0ZXJuYWxQcm9qZWN0aW9uLHRoaXMuaW50ZXJuYWxQcm9qZWN0aW9uKSxlPW5ldyBPcGVuTGF5ZXJzLkZlYXR1cmUuVmVjdG9yKGYsZyxoKSxjLnB1c2goZSkpfWVsc2UgYj1lLnNwbGl0KCJcdCIpfXJldHVybiBjfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkZvcm1hdC5UZXh0In0pO09wZW5MYXllcnMuTGF5ZXIuVGV4dD1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuTGF5ZXIuTWFya2Vycyx7bG9jYXRpb246bnVsbCxmZWF0dXJlczpudWxsLGZvcm1hdE9wdGlvbnM6bnVsbCxzZWxlY3RlZEZlYXR1cmU6bnVsbCxpbml0aWFsaXplOmZ1bmN0aW9uKGEsYil7T3BlbkxheWVycy5MYXllci5NYXJrZXJzLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLmZlYXR1cmVzPVtdfSxkZXN0cm95OmZ1bmN0aW9uKCl7T3BlbkxheWVycy5MYXllci5NYXJrZXJzLnByb3RvdHlwZS5kZXN0cm95LmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLmNsZWFyRmVhdHVyZXMoKTt0aGlzLmZlYXR1cmVzPW51bGx9LGxvYWRUZXh0OmZ1bmN0aW9uKCl7dGhpcy5sb2FkZWR8fG51bGw9PXRoaXMubG9jYXRpb258fCh0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoImxvYWRzdGFydCIpLE9wZW5MYXllcnMuUmVxdWVzdC5HRVQoe3VybDp0aGlzLmxvY2F0aW9uLApzdWNjZXNzOnRoaXMucGFyc2VEYXRhLGZhaWx1cmU6ZnVuY3Rpb24oYSl7dGhpcy5ldmVudHMudHJpZ2dlckV2ZW50KCJsb2FkZW5kIil9LHNjb3BlOnRoaXN9KSx0aGlzLmxvYWRlZD0hMCl9LG1vdmVUbzpmdW5jdGlvbihhLGIsYyl7T3BlbkxheWVycy5MYXllci5NYXJrZXJzLnByb3RvdHlwZS5tb3ZlVG8uYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMudmlzaWJpbGl0eSYmIXRoaXMubG9hZGVkJiZ0aGlzLmxvYWRUZXh0KCl9LHBhcnNlRGF0YTpmdW5jdGlvbihhKXthPWEucmVzcG9uc2VUZXh0O3ZhciBiPXt9O09wZW5MYXllcnMuVXRpbC5leHRlbmQoYix0aGlzLmZvcm1hdE9wdGlvbnMpO3RoaXMubWFwJiYhdGhpcy5wcm9qZWN0aW9uLmVxdWFscyh0aGlzLm1hcC5nZXRQcm9qZWN0aW9uT2JqZWN0KCkpJiYoYi5leHRlcm5hbFByb2plY3Rpb249dGhpcy5wcm9qZWN0aW9uLGIuaW50ZXJuYWxQcm9qZWN0aW9uPXRoaXMubWFwLmdldFByb2plY3Rpb25PYmplY3QoKSk7YT0obmV3IE9wZW5MYXllcnMuRm9ybWF0LlRleHQoYikpLnJlYWQoYSk7CmZvcih2YXIgYj0wLGM9YS5sZW5ndGg7YjxjO2IrKyl7dmFyIGQ9e30sZT1hW2JdLGYsZyxoO2Y9bmV3IE9wZW5MYXllcnMuTG9uTGF0KGUuZ2VvbWV0cnkueCxlLmdlb21ldHJ5LnkpO2Uuc3R5bGUuZ3JhcGhpY1dpZHRoJiZlLnN0eWxlLmdyYXBoaWNIZWlnaHQmJihnPW5ldyBPcGVuTGF5ZXJzLlNpemUoZS5zdHlsZS5ncmFwaGljV2lkdGgsZS5zdHlsZS5ncmFwaGljSGVpZ2h0KSk7dm9pZCAwIT09ZS5zdHlsZS5ncmFwaGljWE9mZnNldCYmdm9pZCAwIT09ZS5zdHlsZS5ncmFwaGljWU9mZnNldCYmKGg9bmV3IE9wZW5MYXllcnMuUGl4ZWwoZS5zdHlsZS5ncmFwaGljWE9mZnNldCxlLnN0eWxlLmdyYXBoaWNZT2Zmc2V0KSk7bnVsbCE9ZS5zdHlsZS5leHRlcm5hbEdyYXBoaWM/ZC5pY29uPW5ldyBPcGVuTGF5ZXJzLkljb24oZS5zdHlsZS5leHRlcm5hbEdyYXBoaWMsZyxoKTooZC5pY29uPU9wZW5MYXllcnMuTWFya2VyLmRlZmF1bHRJY29uKCksbnVsbCE9ZyYmZC5pY29uLnNldFNpemUoZykpOwpudWxsIT1lLmF0dHJpYnV0ZXMudGl0bGUmJm51bGwhPWUuYXR0cmlidXRlcy5kZXNjcmlwdGlvbiYmKGQucG9wdXBDb250ZW50SFRNTD0iPGgyPiIrZS5hdHRyaWJ1dGVzLnRpdGxlKyI8L2gyPjxwPiIrZS5hdHRyaWJ1dGVzLmRlc2NyaXB0aW9uKyI8L3A+Iik7ZC5vdmVyZmxvdz1lLmF0dHJpYnV0ZXMub3ZlcmZsb3d8fCJhdXRvIjtkPW5ldyBPcGVuTGF5ZXJzLkZlYXR1cmUodGhpcyxmLGQpO3RoaXMuZmVhdHVyZXMucHVzaChkKTtmPWQuY3JlYXRlTWFya2VyKCk7bnVsbCE9ZS5hdHRyaWJ1dGVzLnRpdGxlJiZudWxsIT1lLmF0dHJpYnV0ZXMuZGVzY3JpcHRpb24mJmYuZXZlbnRzLnJlZ2lzdGVyKCJjbGljayIsZCx0aGlzLm1hcmtlckNsaWNrKTt0aGlzLmFkZE1hcmtlcihmKX10aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoImxvYWRlbmQiKX0sbWFya2VyQ2xpY2s6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcz09dGhpcy5sYXllci5zZWxlY3RlZEZlYXR1cmU7dGhpcy5sYXllci5zZWxlY3RlZEZlYXR1cmU9CmI/bnVsbDp0aGlzO2Zvcih2YXIgYz0wLGQ9dGhpcy5sYXllci5tYXAucG9wdXBzLmxlbmd0aDtjPGQ7YysrKXRoaXMubGF5ZXIubWFwLnJlbW92ZVBvcHVwKHRoaXMubGF5ZXIubWFwLnBvcHVwc1tjXSk7Ynx8dGhpcy5sYXllci5tYXAuYWRkUG9wdXAodGhpcy5jcmVhdGVQb3B1cCgpKTtPcGVuTGF5ZXJzLkV2ZW50LnN0b3AoYSl9LGNsZWFyRmVhdHVyZXM6ZnVuY3Rpb24oKXtpZihudWxsIT10aGlzLmZlYXR1cmVzKWZvcig7MDx0aGlzLmZlYXR1cmVzLmxlbmd0aDspe3ZhciBhPXRoaXMuZmVhdHVyZXNbMF07T3BlbkxheWVycy5VdGlsLnJlbW92ZUl0ZW0odGhpcy5mZWF0dXJlcyxhKTthLmRlc3Ryb3koKX19LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuTGF5ZXIuVGV4dCJ9KTtPcGVuTGF5ZXJzLkhhbmRsZXIuUmVndWxhclBvbHlnb249T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkhhbmRsZXIuRHJhZyx7c2lkZXM6NCxyYWRpdXM6bnVsbCxzbmFwQW5nbGU6bnVsbCxzbmFwVG9nZ2xlOiJzaGlmdEtleSIsbGF5ZXJPcHRpb25zOm51bGwscGVyc2lzdDohMSxpcnJlZ3VsYXI6ITEsY2l0ZUNvbXBsaWFudDohMSxhbmdsZTpudWxsLGZpeGVkUmFkaXVzOiExLGZlYXR1cmU6bnVsbCxsYXllcjpudWxsLG9yaWdpbjpudWxsLGluaXRpYWxpemU6ZnVuY3Rpb24oYSxiLGMpe2MmJmMubGF5ZXJPcHRpb25zJiZjLmxheWVyT3B0aW9ucy5zdHlsZU1hcHx8KHRoaXMuc3R5bGU9T3BlbkxheWVycy5VdGlsLmV4dGVuZChPcGVuTGF5ZXJzLkZlYXR1cmUuVmVjdG9yLnN0eWxlWyJkZWZhdWx0Il0se30pKTtPcGVuTGF5ZXJzLkhhbmRsZXIuRHJhZy5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLFthLGIsY10pO3RoaXMub3B0aW9ucz1jP2M6e319LHNldE9wdGlvbnM6ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5VdGlsLmV4dGVuZCh0aGlzLm9wdGlvbnMsCmEpO09wZW5MYXllcnMuVXRpbC5leHRlbmQodGhpcyxhKX0sYWN0aXZhdGU6ZnVuY3Rpb24oKXt2YXIgYT0hMTtPcGVuTGF5ZXJzLkhhbmRsZXIuRHJhZy5wcm90b3R5cGUuYWN0aXZhdGUuYXBwbHkodGhpcyxhcmd1bWVudHMpJiYoYT1PcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHtkaXNwbGF5SW5MYXllclN3aXRjaGVyOiExLGNhbGN1bGF0ZUluUmFuZ2U6T3BlbkxheWVycy5GdW5jdGlvbi5UcnVlLHdyYXBEYXRlTGluZTp0aGlzLmNpdGVDb21wbGlhbnR9LHRoaXMubGF5ZXJPcHRpb25zKSx0aGlzLmxheWVyPW5ldyBPcGVuTGF5ZXJzLkxheWVyLlZlY3Rvcih0aGlzLkNMQVNTX05BTUUsYSksdGhpcy5tYXAuYWRkTGF5ZXIodGhpcy5sYXllciksYT0hMCk7cmV0dXJuIGF9LGRlYWN0aXZhdGU6ZnVuY3Rpb24oKXt2YXIgYT0hMTtPcGVuTGF5ZXJzLkhhbmRsZXIuRHJhZy5wcm90b3R5cGUuZGVhY3RpdmF0ZS5hcHBseSh0aGlzLGFyZ3VtZW50cykmJih0aGlzLmRyYWdnaW5nJiZ0aGlzLmNhbmNlbCgpLApudWxsIT10aGlzLmxheWVyLm1hcCYmKHRoaXMubGF5ZXIuZGVzdHJveSghMSksdGhpcy5mZWF0dXJlJiZ0aGlzLmZlYXR1cmUuZGVzdHJveSgpKSx0aGlzLmZlYXR1cmU9dGhpcy5sYXllcj1udWxsLGE9ITApO3JldHVybiBhfSxkb3duOmZ1bmN0aW9uKGEpe3RoaXMuZml4ZWRSYWRpdXM9ISF0aGlzLnJhZGl1czthPXRoaXMubGF5ZXIuZ2V0TG9uTGF0RnJvbVZpZXdQb3J0UHgoYS54eSk7dGhpcy5vcmlnaW49bmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoYS5sb24sYS5sYXQpO2lmKCF0aGlzLmZpeGVkUmFkaXVzfHx0aGlzLmlycmVndWxhcil0aGlzLnJhZGl1cz10aGlzLm1hcC5nZXRSZXNvbHV0aW9uKCk7dGhpcy5wZXJzaXN0JiZ0aGlzLmNsZWFyKCk7dGhpcy5mZWF0dXJlPW5ldyBPcGVuTGF5ZXJzLkZlYXR1cmUuVmVjdG9yO3RoaXMuY3JlYXRlR2VvbWV0cnkoKTt0aGlzLmNhbGxiYWNrKCJjcmVhdGUiLFt0aGlzLm9yaWdpbix0aGlzLmZlYXR1cmVdKTt0aGlzLmxheWVyLmFkZEZlYXR1cmVzKFt0aGlzLmZlYXR1cmVdLAp7c2lsZW50OiEwfSk7dGhpcy5sYXllci5kcmF3RmVhdHVyZSh0aGlzLmZlYXR1cmUsdGhpcy5zdHlsZSl9LG1vdmU6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5sYXllci5nZXRMb25MYXRGcm9tVmlld1BvcnRQeChhLnh5KSxiPW5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KGIubG9uLGIubGF0KTt0aGlzLmlycmVndWxhcj8oYT1NYXRoLnNxcnQoMikqTWF0aC5hYnMoYi55LXRoaXMub3JpZ2luLnkpLzIsdGhpcy5yYWRpdXM9TWF0aC5tYXgodGhpcy5tYXAuZ2V0UmVzb2x1dGlvbigpLzIsYSkpOnRoaXMuZml4ZWRSYWRpdXM/dGhpcy5vcmlnaW49YjoodGhpcy5jYWxjdWxhdGVBbmdsZShiLGEpLHRoaXMucmFkaXVzPU1hdGgubWF4KHRoaXMubWFwLmdldFJlc29sdXRpb24oKS8yLGIuZGlzdGFuY2VUbyh0aGlzLm9yaWdpbikpKTt0aGlzLm1vZGlmeUdlb21ldHJ5KCk7aWYodGhpcy5pcnJlZ3VsYXIpe2E9Yi54LXRoaXMub3JpZ2luLng7dmFyIGI9Yi55LXRoaXMub3JpZ2luLnksCmM7Yz0wPT1iP2EvKHRoaXMucmFkaXVzKk1hdGguc3FydCgyKSk6YS9iO3RoaXMuZmVhdHVyZS5nZW9tZXRyeS5yZXNpemUoMSx0aGlzLm9yaWdpbixjKTt0aGlzLmZlYXR1cmUuZ2VvbWV0cnkubW92ZShhLzIsYi8yKX10aGlzLmxheWVyLmRyYXdGZWF0dXJlKHRoaXMuZmVhdHVyZSx0aGlzLnN0eWxlKX0sdXA6ZnVuY3Rpb24oYSl7dGhpcy5maW5hbGl6ZSgpO3RoaXMuc3RhcnQ9PXRoaXMubGFzdCYmdGhpcy5jYWxsYmFjaygiZG9uZSIsW2EueHldKX0sb3V0OmZ1bmN0aW9uKGEpe3RoaXMuZmluYWxpemUoKX0sY3JlYXRlR2VvbWV0cnk6ZnVuY3Rpb24oKXt0aGlzLmFuZ2xlPU1hdGguUEkqKDEvdGhpcy5zaWRlcy0wLjUpO3RoaXMuc25hcEFuZ2xlJiYodGhpcy5hbmdsZSs9dGhpcy5zbmFwQW5nbGUqKE1hdGguUEkvMTgwKSk7dGhpcy5mZWF0dXJlLmdlb21ldHJ5PU9wZW5MYXllcnMuR2VvbWV0cnkuUG9seWdvbi5jcmVhdGVSZWd1bGFyUG9seWdvbih0aGlzLm9yaWdpbix0aGlzLnJhZGl1cywKdGhpcy5zaWRlcyx0aGlzLnNuYXBBbmdsZSl9LG1vZGlmeUdlb21ldHJ5OmZ1bmN0aW9uKCl7dmFyIGEsYixjPXRoaXMuZmVhdHVyZS5nZW9tZXRyeS5jb21wb25lbnRzWzBdO2MuY29tcG9uZW50cy5sZW5ndGghPXRoaXMuc2lkZXMrMSYmKHRoaXMuY3JlYXRlR2VvbWV0cnkoKSxjPXRoaXMuZmVhdHVyZS5nZW9tZXRyeS5jb21wb25lbnRzWzBdKTtmb3IodmFyIGQ9MDtkPHRoaXMuc2lkZXM7KytkKWI9Yy5jb21wb25lbnRzW2RdLGE9dGhpcy5hbmdsZSsyKmQqTWF0aC5QSS90aGlzLnNpZGVzLGIueD10aGlzLm9yaWdpbi54K3RoaXMucmFkaXVzKk1hdGguY29zKGEpLGIueT10aGlzLm9yaWdpbi55K3RoaXMucmFkaXVzKk1hdGguc2luKGEpLGIuY2xlYXJCb3VuZHMoKX0sY2FsY3VsYXRlQW5nbGU6ZnVuY3Rpb24oYSxiKXt2YXIgYz1NYXRoLmF0YW4yKGEueS10aGlzLm9yaWdpbi55LGEueC10aGlzLm9yaWdpbi54KTtpZih0aGlzLnNuYXBBbmdsZSYmdGhpcy5zbmFwVG9nZ2xlJiYhYlt0aGlzLnNuYXBUb2dnbGVdKXt2YXIgZD0KTWF0aC5QSS8xODAqdGhpcy5zbmFwQW5nbGU7dGhpcy5hbmdsZT1NYXRoLnJvdW5kKGMvZCkqZH1lbHNlIHRoaXMuYW5nbGU9Y30sY2FuY2VsOmZ1bmN0aW9uKCl7dGhpcy5jYWxsYmFjaygiY2FuY2VsIixudWxsKTt0aGlzLmZpbmFsaXplKCl9LGZpbmFsaXplOmZ1bmN0aW9uKCl7dGhpcy5vcmlnaW49bnVsbDt0aGlzLnJhZGl1cz10aGlzLm9wdGlvbnMucmFkaXVzfSxjbGVhcjpmdW5jdGlvbigpe3RoaXMubGF5ZXImJih0aGlzLmxheWVyLnJlbmRlcmVyLmNsZWFyKCksdGhpcy5sYXllci5kZXN0cm95RmVhdHVyZXMoKSl9LGNhbGxiYWNrOmZ1bmN0aW9uKGEsYil7dGhpcy5jYWxsYmFja3NbYV0mJnRoaXMuY2FsbGJhY2tzW2FdLmFwcGx5KHRoaXMuY29udHJvbCxbdGhpcy5mZWF0dXJlLmdlb21ldHJ5LmNsb25lKCldKTt0aGlzLnBlcnNpc3R8fCJkb25lIiE9YSYmImNhbmNlbCIhPWF8fHRoaXMuY2xlYXIoKX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5IYW5kbGVyLlJlZ3VsYXJQb2x5Z29uIn0pO09wZW5MYXllcnMuQ29udHJvbC5TTERTZWxlY3Q9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkNvbnRyb2wse2NsZWFyT25EZWFjdGl2YXRlOiExLGxheWVyczpudWxsLGNhbGxiYWNrczpudWxsLHNlbGVjdGlvblN5bWJvbGl6ZXI6e1BvbHlnb246e2ZpbGxDb2xvcjoiI0ZGMDAwMCIsc3Ryb2tlOiExfSxMaW5lOntzdHJva2VDb2xvcjoiI0ZGMDAwMCIsc3Ryb2tlV2lkdGg6Mn0sUG9pbnQ6e2dyYXBoaWNOYW1lOiJzcXVhcmUiLGZpbGxDb2xvcjoiI0ZGMDAwMCIscG9pbnRSYWRpdXM6NX19LGxheWVyT3B0aW9uczpudWxsLHNrZXRjaFN0eWxlOm51bGwsd2ZzQ2FjaGU6e30sbGF5ZXJDYWNoZTp7fSxpbml0aWFsaXplOmZ1bmN0aW9uKGEsYil7T3BlbkxheWVycy5Db250cm9sLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsW2JdKTt0aGlzLmNhbGxiYWNrcz1PcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHtkb25lOnRoaXMuc2VsZWN0LGNsaWNrOnRoaXMuc2VsZWN0fSx0aGlzLmNhbGxiYWNrcyk7CnRoaXMuaGFuZGxlck9wdGlvbnM9dGhpcy5oYW5kbGVyT3B0aW9uc3x8e307dGhpcy5sYXllck9wdGlvbnM9T3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHModGhpcy5sYXllck9wdGlvbnMse2Rpc3BsYXlJbkxheWVyU3dpdGNoZXI6ITEsdGlsZU9wdGlvbnM6e21heEdldFVybExlbmd0aDoyMDQ4fX0pO3RoaXMuc2tldGNoU3R5bGUmJih0aGlzLmhhbmRsZXJPcHRpb25zLmxheWVyT3B0aW9ucz1PcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyh0aGlzLmhhbmRsZXJPcHRpb25zLmxheWVyT3B0aW9ucyx7c3R5bGVNYXA6bmV3IE9wZW5MYXllcnMuU3R5bGVNYXAoeyJkZWZhdWx0Ijp0aGlzLnNrZXRjaFN0eWxlfSl9KSk7dGhpcy5oYW5kbGVyPW5ldyBhKHRoaXMsdGhpcy5jYWxsYmFja3MsdGhpcy5oYW5kbGVyT3B0aW9ucyl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXtmb3IodmFyIGEgaW4gdGhpcy5sYXllckNhY2hlKWRlbGV0ZSB0aGlzLmxheWVyQ2FjaGVbYV07Zm9yKGEgaW4gdGhpcy53ZnNDYWNoZSlkZWxldGUgdGhpcy53ZnNDYWNoZVthXTsKT3BlbkxheWVycy5Db250cm9sLnByb3RvdHlwZS5kZXN0cm95LmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sY291cGxlTGF5ZXJWaXNpYmxpdHk6ZnVuY3Rpb24oYSl7dGhpcy5zZXRWaXNpYmlsaXR5KGEub2JqZWN0LmdldFZpc2liaWxpdHkoKSl9LGNyZWF0ZVNlbGVjdGlvbkxheWVyOmZ1bmN0aW9uKGEpe3ZhciBiO2lmKHRoaXMubGF5ZXJDYWNoZVthLmlkXSliPXRoaXMubGF5ZXJDYWNoZVthLmlkXTtlbHNle2I9bmV3IE9wZW5MYXllcnMuTGF5ZXIuV01TKGEubmFtZSxhLnVybCxhLnBhcmFtcyxPcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyh0aGlzLmxheWVyT3B0aW9ucyxhLmdldE9wdGlvbnMoKSkpO3RoaXMubGF5ZXJDYWNoZVthLmlkXT1iO2lmKCExPT09dGhpcy5sYXllck9wdGlvbnMuZGlzcGxheUluTGF5ZXJTd2l0Y2hlcilhLmV2ZW50cy5vbih7dmlzaWJpbGl0eWNoYW5nZWQ6dGhpcy5jb3VwbGVMYXllclZpc2libGl0eSxzY29wZTpifSk7dGhpcy5tYXAuYWRkTGF5ZXIoYil9cmV0dXJuIGJ9LApjcmVhdGVTTEQ6ZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZD17dmVyc2lvbjoiMS4wLjAiLG5hbWVkTGF5ZXJzOnt9fSxlPSgiIithLnBhcmFtcy5MQVlFUlMpLnNwbGl0KCIsIiksZj0wLGc9ZS5sZW5ndGg7ZjxnO2YrKyl7dmFyIGg9ZVtmXTtkLm5hbWVkTGF5ZXJzW2hdPXtuYW1lOmgsdXNlclN0eWxlczpbXX07dmFyIGs9dGhpcy5zZWxlY3Rpb25TeW1ib2xpemVyLGw9Y1tmXTswPD1sLnR5cGUuaW5kZXhPZigiUG9seWdvbiIpP2s9e1BvbHlnb246dGhpcy5zZWxlY3Rpb25TeW1ib2xpemVyLlBvbHlnb259OjA8PWwudHlwZS5pbmRleE9mKCJMaW5lU3RyaW5nIik/az17TGluZTp0aGlzLnNlbGVjdGlvblN5bWJvbGl6ZXIuTGluZX06MDw9bC50eXBlLmluZGV4T2YoIlBvaW50IikmJihrPXtQb2ludDp0aGlzLnNlbGVjdGlvblN5bWJvbGl6ZXIuUG9pbnR9KTtkLm5hbWVkTGF5ZXJzW2hdLnVzZXJTdHlsZXMucHVzaCh7bmFtZToiZGVmYXVsdCIscnVsZXM6W25ldyBPcGVuTGF5ZXJzLlJ1bGUoe3N5bWJvbGl6ZXI6aywKZmlsdGVyOmJbZl0sbWF4U2NhbGVEZW5vbWluYXRvcjphLm9wdGlvbnMubWluU2NhbGV9KV19KX1yZXR1cm4obmV3IE9wZW5MYXllcnMuRm9ybWF0LlNMRCh7c3JzTmFtZTp0aGlzLm1hcC5nZXRQcm9qZWN0aW9uKCl9KSkud3JpdGUoZCl9LHBhcnNlRGVzY3JpYmVMYXllcjpmdW5jdGlvbihhKXt2YXIgYj1uZXcgT3BlbkxheWVycy5Gb3JtYXQuV01TRGVzY3JpYmVMYXllcixjPWEucmVzcG9uc2VYTUw7YyYmYy5kb2N1bWVudEVsZW1lbnR8fChjPWEucmVzcG9uc2VUZXh0KTthPWIucmVhZChjKTtmb3IodmFyIGI9W10sYz1udWxsLGQ9MCxlPWEubGVuZ3RoO2Q8ZTtkKyspIldGUyI9PWFbZF0ub3dzVHlwZSYmKGIucHVzaChhW2RdLnR5cGVOYW1lKSxjPWFbZF0ub3dzVVJMKTtPcGVuTGF5ZXJzLlJlcXVlc3QuR0VUKHt1cmw6YyxwYXJhbXM6e1NFUlZJQ0U6IldGUyIsVFlQRU5BTUU6Yi50b1N0cmluZygpLFJFUVVFU1Q6IkRlc2NyaWJlRmVhdHVyZVR5cGUiLFZFUlNJT046IjEuMC4wIn0sCmNhbGxiYWNrOmZ1bmN0aW9uKGEpe3ZhciBiPW5ldyBPcGVuTGF5ZXJzLkZvcm1hdC5XRlNEZXNjcmliZUZlYXR1cmVUeXBlLGM9YS5yZXNwb25zZVhNTDtjJiZjLmRvY3VtZW50RWxlbWVudHx8KGM9YS5yZXNwb25zZVRleHQpO2E9Yi5yZWFkKGMpO3RoaXMuY29udHJvbC53ZnNDYWNoZVt0aGlzLmxheWVyLmlkXT1hO3RoaXMuY29udHJvbC5fcXVldWUmJnRoaXMuY29udHJvbC5hcHBseVNlbGVjdGlvbigpfSxzY29wZTp0aGlzfSl9LGdldEdlb21ldHJ5QXR0cmlidXRlczpmdW5jdGlvbihhKXt2YXIgYj1bXTthPXRoaXMud2ZzQ2FjaGVbYS5pZF07Zm9yKHZhciBjPTAsZD1hLmZlYXR1cmVUeXBlcy5sZW5ndGg7YzxkO2MrKylmb3IodmFyIGU9YS5mZWF0dXJlVHlwZXNbY10ucHJvcGVydGllcyxmPTAsZz1lLmxlbmd0aDtmPGc7ZisrKXt2YXIgaD1lW2ZdLGs9aC50eXBlOygwPD1rLmluZGV4T2YoIkxpbmVTdHJpbmciKXx8MDw9ay5pbmRleE9mKCJHZW9tZXRyeUFzc29jaWF0aW9uVHlwZSIpfHwKMDw9ay5pbmRleE9mKCJHZW9tZXRyeVByb3BlcnR5VHlwZSIpfHwwPD1rLmluZGV4T2YoIlBvaW50Iil8fDA8PWsuaW5kZXhPZigiUG9seWdvbiIpKSYmYi5wdXNoKGgpfXJldHVybiBifSxhY3RpdmF0ZTpmdW5jdGlvbigpe3ZhciBhPU9wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuYWN0aXZhdGUuY2FsbCh0aGlzKTtpZihhKWZvcih2YXIgYj0wLGM9dGhpcy5sYXllcnMubGVuZ3RoO2I8YztiKyspe3ZhciBkPXRoaXMubGF5ZXJzW2JdO2QmJiF0aGlzLndmc0NhY2hlW2QuaWRdJiZPcGVuTGF5ZXJzLlJlcXVlc3QuR0VUKHt1cmw6ZC51cmwscGFyYW1zOntTRVJWSUNFOiJXTVMiLFZFUlNJT046ZC5wYXJhbXMuVkVSU0lPTixMQVlFUlM6ZC5wYXJhbXMuTEFZRVJTLFJFUVVFU1Q6IkRlc2NyaWJlTGF5ZXIifSxjYWxsYmFjazp0aGlzLnBhcnNlRGVzY3JpYmVMYXllcixzY29wZTp7bGF5ZXI6ZCxjb250cm9sOnRoaXN9fSl9cmV0dXJuIGF9LGRlYWN0aXZhdGU6ZnVuY3Rpb24oKXt2YXIgYT0KT3BlbkxheWVycy5Db250cm9sLnByb3RvdHlwZS5kZWFjdGl2YXRlLmNhbGwodGhpcyk7aWYoYSlmb3IodmFyIGI9MCxjPXRoaXMubGF5ZXJzLmxlbmd0aDtiPGM7YisrKXt2YXIgZD10aGlzLmxheWVyc1tiXTtpZihkJiYhMD09PXRoaXMuY2xlYXJPbkRlYWN0aXZhdGUpe3ZhciBlPXRoaXMubGF5ZXJDYWNoZSxmPWVbZC5pZF07ZiYmKGQuZXZlbnRzLnVuKHt2aXNpYmlsaXR5Y2hhbmdlZDp0aGlzLmNvdXBsZUxheWVyVmlzaWJsaXR5LHNjb3BlOmZ9KSxmLmRlc3Ryb3koKSxkZWxldGUgZVtkLmlkXSl9fXJldHVybiBhfSxzZXRMYXllcnM6ZnVuY3Rpb24oYSl7dGhpcy5hY3RpdmU/KHRoaXMuZGVhY3RpdmF0ZSgpLHRoaXMubGF5ZXJzPWEsdGhpcy5hY3RpdmF0ZSgpKTp0aGlzLmxheWVycz1hfSxjcmVhdGVGaWx0ZXI6ZnVuY3Rpb24oYSxiKXt2YXIgYz1udWxsO3RoaXMuaGFuZGxlciBpbnN0YW5jZW9mIE9wZW5MYXllcnMuSGFuZGxlci5SZWd1bGFyUG9seWdvbj9jPSEwPT09dGhpcy5oYW5kbGVyLmlycmVndWxhcj8KbmV3IE9wZW5MYXllcnMuRmlsdGVyLlNwYXRpYWwoe3R5cGU6T3BlbkxheWVycy5GaWx0ZXIuU3BhdGlhbC5CQk9YLHByb3BlcnR5OmEubmFtZSx2YWx1ZTpiLmdldEJvdW5kcygpfSk6bmV3IE9wZW5MYXllcnMuRmlsdGVyLlNwYXRpYWwoe3R5cGU6T3BlbkxheWVycy5GaWx0ZXIuU3BhdGlhbC5JTlRFUlNFQ1RTLHByb3BlcnR5OmEubmFtZSx2YWx1ZTpifSk6dGhpcy5oYW5kbGVyIGluc3RhbmNlb2YgT3BlbkxheWVycy5IYW5kbGVyLlBvbHlnb24/Yz1uZXcgT3BlbkxheWVycy5GaWx0ZXIuU3BhdGlhbCh7dHlwZTpPcGVuTGF5ZXJzLkZpbHRlci5TcGF0aWFsLklOVEVSU0VDVFMscHJvcGVydHk6YS5uYW1lLHZhbHVlOmJ9KTp0aGlzLmhhbmRsZXIgaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLkhhbmRsZXIuUGF0aD9jPTA8PWEudHlwZS5pbmRleE9mKCJQb2ludCIpP25ldyBPcGVuTGF5ZXJzLkZpbHRlci5TcGF0aWFsKHt0eXBlOk9wZW5MYXllcnMuRmlsdGVyLlNwYXRpYWwuRFdJVEhJTiwKcHJvcGVydHk6YS5uYW1lLGRpc3RhbmNlOjAuMDEqdGhpcy5tYXAuZ2V0RXh0ZW50KCkuZ2V0V2lkdGgoKSxkaXN0YW5jZVVuaXRzOnRoaXMubWFwLmdldFVuaXRzKCksdmFsdWU6Yn0pOm5ldyBPcGVuTGF5ZXJzLkZpbHRlci5TcGF0aWFsKHt0eXBlOk9wZW5MYXllcnMuRmlsdGVyLlNwYXRpYWwuSU5URVJTRUNUUyxwcm9wZXJ0eTphLm5hbWUsdmFsdWU6Yn0pOnRoaXMuaGFuZGxlciBpbnN0YW5jZW9mIE9wZW5MYXllcnMuSGFuZGxlci5DbGljayYmKGM9MDw9YS50eXBlLmluZGV4T2YoIlBvbHlnb24iKT9uZXcgT3BlbkxheWVycy5GaWx0ZXIuU3BhdGlhbCh7dHlwZTpPcGVuTGF5ZXJzLkZpbHRlci5TcGF0aWFsLklOVEVSU0VDVFMscHJvcGVydHk6YS5uYW1lLHZhbHVlOmJ9KTpuZXcgT3BlbkxheWVycy5GaWx0ZXIuU3BhdGlhbCh7dHlwZTpPcGVuTGF5ZXJzLkZpbHRlci5TcGF0aWFsLkRXSVRISU4scHJvcGVydHk6YS5uYW1lLGRpc3RhbmNlOjAuMDEqdGhpcy5tYXAuZ2V0RXh0ZW50KCkuZ2V0V2lkdGgoKSwKZGlzdGFuY2VVbml0czp0aGlzLm1hcC5nZXRVbml0cygpLHZhbHVlOmJ9KSk7cmV0dXJuIGN9LHNlbGVjdDpmdW5jdGlvbihhKXt0aGlzLl9xdWV1ZT1mdW5jdGlvbigpe2Zvcih2YXIgYj0wLGM9dGhpcy5sYXllcnMubGVuZ3RoO2I8YztiKyspe2Zvcih2YXIgZD10aGlzLmxheWVyc1tiXSxlPXRoaXMuZ2V0R2VvbWV0cnlBdHRyaWJ1dGVzKGQpLGY9W10sZz0wLGg9ZS5sZW5ndGg7ZzxoO2crKyl7dmFyIGs9ZVtnXTtpZihudWxsIT09ayl7aWYoIShhIGluc3RhbmNlb2YgT3BlbkxheWVycy5HZW9tZXRyeSkpe3ZhciBsPXRoaXMubWFwLmdldExvbkxhdEZyb21QaXhlbChhLnh5KTthPW5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KGwubG9uLGwubGF0KX1rPXRoaXMuY3JlYXRlRmlsdGVyKGssYSk7bnVsbCE9PWsmJmYucHVzaChrKX19Zz10aGlzLmNyZWF0ZVNlbGVjdGlvbkxheWVyKGQpO3RoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgic2VsZWN0ZWQiLHtsYXllcjpkLGZpbHRlcnM6Zn0pOwpkPXRoaXMuY3JlYXRlU0xEKGQsZixlKTtnLm1lcmdlTmV3UGFyYW1zKHtTTERfQk9EWTpkfSk7ZGVsZXRlIHRoaXMuX3F1ZXVlfX07dGhpcy5hcHBseVNlbGVjdGlvbigpfSxhcHBseVNlbGVjdGlvbjpmdW5jdGlvbigpe2Zvcih2YXIgYT0hMCxiPTAsYz10aGlzLmxheWVycy5sZW5ndGg7YjxjO2IrKylpZighdGhpcy53ZnNDYWNoZVt0aGlzLmxheWVyc1tiXS5pZF0pe2E9ITE7YnJlYWt9YSYmdGhpcy5fcXVldWUuY2FsbCh0aGlzKX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Db250cm9sLlNMRFNlbGVjdCJ9KTtPcGVuTGF5ZXJzLkNvbnRyb2wuU2NhbGU9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkNvbnRyb2wse2VsZW1lbnQ6bnVsbCxnZW9kZXNpYzohMSxpbml0aWFsaXplOmZ1bmN0aW9uKGEsYil7T3BlbkxheWVycy5Db250cm9sLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsW2JdKTt0aGlzLmVsZW1lbnQ9T3BlbkxheWVycy5VdGlsLmdldEVsZW1lbnQoYSl9LGRyYXc6ZnVuY3Rpb24oKXtPcGVuTGF5ZXJzLkNvbnRyb2wucHJvdG90eXBlLmRyYXcuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMuZWxlbWVudHx8KHRoaXMuZWxlbWVudD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKSx0aGlzLmRpdi5hcHBlbmRDaGlsZCh0aGlzLmVsZW1lbnQpKTt0aGlzLm1hcC5ldmVudHMucmVnaXN0ZXIoIm1vdmVlbmQiLHRoaXMsdGhpcy51cGRhdGVTY2FsZSk7dGhpcy51cGRhdGVTY2FsZSgpO3JldHVybiB0aGlzLmRpdn0sdXBkYXRlU2NhbGU6ZnVuY3Rpb24oKXt2YXIgYTsKaWYoITA9PT10aGlzLmdlb2Rlc2ljKXtpZighdGhpcy5tYXAuZ2V0VW5pdHMoKSlyZXR1cm47YT1PcGVuTGF5ZXJzLklOQ0hFU19QRVJfVU5JVDthPSh0aGlzLm1hcC5nZXRHZW9kZXNpY1BpeGVsU2l6ZSgpLnd8fDFFLTYpKmEua20qT3BlbkxheWVycy5ET1RTX1BFUl9JTkNIfWVsc2UgYT10aGlzLm1hcC5nZXRTY2FsZSgpO2EmJihhPTk1MDA8PWEmJjk1RTQ+PWE/TWF0aC5yb3VuZChhLzFFMykrIksiOjk1RTQ8PWE/TWF0aC5yb3VuZChhLzFFNikrIk0iOk1hdGgucm91bmQoYSksdGhpcy5lbGVtZW50LmlubmVySFRNTD1PcGVuTGF5ZXJzLmkxOG4oIlNjYWxlID0gMSA6ICR7c2NhbGVEZW5vbX0iLHtzY2FsZURlbm9tOmF9KSl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuQ29udHJvbC5TY2FsZSJ9KTtPcGVuTGF5ZXJzLkxheWVyLk1hcEd1aWRlPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5MYXllci5HcmlkLHtpc0Jhc2VMYXllcjohMCx1c2VIdHRwVGlsZTohMSxzaW5nbGVUaWxlOiExLHVzZU92ZXJsYXk6ITEsdXNlQXN5bmNPdmVybGF5OiEwLFRJTEVfUEFSQU1TOntvcGVyYXRpb246IkdFVFRJTEVJTUFHRSIsdmVyc2lvbjoiMS4yLjAifSxTSU5HTEVfVElMRV9QQVJBTVM6e29wZXJhdGlvbjoiR0VUTUFQSU1BR0UiLGZvcm1hdDoiUE5HIixsb2NhbGU6ImVuIixjbGlwOiIxIix2ZXJzaW9uOiIxLjAuMCJ9LE9WRVJMQVlfUEFSQU1TOntvcGVyYXRpb246IkdFVERZTkFNSUNNQVBPVkVSTEFZSU1BR0UiLGZvcm1hdDoiUE5HIixsb2NhbGU6ImVuIixjbGlwOiIxIix2ZXJzaW9uOiIyLjAuMCJ9LEZPTERFUl9QQVJBTVM6e3RpbGVDb2x1bW5zUGVyRm9sZGVyOjMwLHRpbGVSb3dzUGVyRm9sZGVyOjMwLGZvcm1hdDoicG5nIixxdWVyeXN0cmluZzpudWxsfSxkZWZhdWx0U2l6ZTpuZXcgT3BlbkxheWVycy5TaXplKDMwMCwKMzAwKSx0aWxlT3JpZ2luQ29ybmVyOiJ0bCIsaW5pdGlhbGl6ZTpmdW5jdGlvbihhLGIsYyxkKXtPcGVuTGF5ZXJzLkxheWVyLkdyaWQucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxhcmd1bWVudHMpO2lmKG51bGw9PWR8fG51bGw9PWQuaXNCYXNlTGF5ZXIpdGhpcy5pc0Jhc2VMYXllcj0idHJ1ZSIhPXRoaXMudHJhbnNwYXJlbnQmJiEwIT10aGlzLnRyYW5zcGFyZW50O2QmJm51bGwhPWQudXNlT3ZlcmxheSYmKHRoaXMudXNlT3ZlcmxheT1kLnVzZU92ZXJsYXkpO3RoaXMuc2luZ2xlVGlsZT90aGlzLnVzZU92ZXJsYXk/KE9wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKHRoaXMucGFyYW1zLHRoaXMuT1ZFUkxBWV9QQVJBTVMpLHRoaXMudXNlQXN5bmNPdmVybGF5fHwodGhpcy5wYXJhbXMudmVyc2lvbj0iMS4wLjAiKSk6T3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHModGhpcy5wYXJhbXMsdGhpcy5TSU5HTEVfVElMRV9QQVJBTVMpOih0aGlzLnVzZUh0dHBUaWxlPwpPcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyh0aGlzLnBhcmFtcyx0aGlzLkZPTERFUl9QQVJBTVMpOk9wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKHRoaXMucGFyYW1zLHRoaXMuVElMRV9QQVJBTVMpLHRoaXMuc2V0VGlsZVNpemUodGhpcy5kZWZhdWx0U2l6ZSkpfSxjbG9uZTpmdW5jdGlvbihhKXtudWxsPT1hJiYoYT1uZXcgT3BlbkxheWVycy5MYXllci5NYXBHdWlkZSh0aGlzLm5hbWUsdGhpcy51cmwsdGhpcy5wYXJhbXMsdGhpcy5nZXRPcHRpb25zKCkpKTtyZXR1cm4gYT1PcGVuTGF5ZXJzLkxheWVyLkdyaWQucHJvdG90eXBlLmNsb25lLmFwcGx5KHRoaXMsW2FdKX0sZ2V0VVJMOmZ1bmN0aW9uKGEpe3ZhciBiO2I9YS5nZXRDZW50ZXJMb25MYXQoKTt2YXIgYz10aGlzLm1hcC5nZXRTaXplKCk7dGhpcy5zaW5nbGVUaWxlPyhhPXtzZXRkaXNwbGF5ZHBpOk9wZW5MYXllcnMuRE9UU19QRVJfSU5DSCxzZXRkaXNwbGF5aGVpZ2h0OmMuaCp0aGlzLnJhdGlvLHNldGRpc3BsYXl3aWR0aDpjLncqCnRoaXMucmF0aW8sc2V0dmlld2NlbnRlcng6Yi5sb24sc2V0dmlld2NlbnRlcnk6Yi5sYXQsc2V0dmlld3NjYWxlOnRoaXMubWFwLmdldFNjYWxlKCl9LHRoaXMudXNlT3ZlcmxheSYmIXRoaXMudXNlQXN5bmNPdmVybGF5JiYoYj17fSxiPU9wZW5MYXllcnMuVXRpbC5leHRlbmQoYixhKSxiLm9wZXJhdGlvbj0iR0VUVklTSUJMRU1BUEVYVEVOVCIsYi52ZXJzaW9uPSIxLjAuMCIsYi5zZXNzaW9uPXRoaXMucGFyYW1zLnNlc3Npb24sYi5tYXBOYW1lPXRoaXMucGFyYW1zLm1hcE5hbWUsYi5mb3JtYXQ9InRleHQveG1sIixiPXRoaXMuZ2V0RnVsbFJlcXVlc3RTdHJpbmcoYiksT3BlbkxheWVycy5SZXF1ZXN0LkdFVCh7dXJsOmIsYXN5bmM6ITF9KSksYj10aGlzLmdldEZ1bGxSZXF1ZXN0U3RyaW5nKGEpKTooYz10aGlzLm1hcC5nZXRSZXNvbHV0aW9uKCksYj1NYXRoLmZsb29yKChhLmxlZnQtdGhpcy5tYXhFeHRlbnQubGVmdCkvYyksYj1NYXRoLnJvdW5kKGIvdGhpcy50aWxlU2l6ZS53KSwKYT1NYXRoLmZsb29yKCh0aGlzLm1heEV4dGVudC50b3AtYS50b3ApL2MpLGE9TWF0aC5yb3VuZChhL3RoaXMudGlsZVNpemUuaCksYj10aGlzLnVzZUh0dHBUaWxlP3RoaXMuZ2V0SW1hZ2VGaWxlUGF0aCh7dGlsZWNvbDpiLHRpbGVyb3c6YSxzY2FsZWluZGV4OnRoaXMucmVzb2x1dGlvbnMubGVuZ3RoLXRoaXMubWFwLnpvb20tMX0pOnRoaXMuZ2V0RnVsbFJlcXVlc3RTdHJpbmcoe3RpbGVjb2w6Yix0aWxlcm93OmEsc2NhbGVpbmRleDp0aGlzLnJlc29sdXRpb25zLmxlbmd0aC10aGlzLm1hcC56b29tLTF9KSk7cmV0dXJuIGJ9LGdldEZ1bGxSZXF1ZXN0U3RyaW5nOmZ1bmN0aW9uKGEsYil7dmFyIGM9bnVsbD09Yj90aGlzLnVybDpiOyJvYmplY3QiPT10eXBlb2YgYyYmKGM9Y1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqYy5sZW5ndGgpXSk7dmFyIGQ9YyxlPU9wZW5MYXllcnMuVXRpbC5leHRlbmQoe30sdGhpcy5wYXJhbXMpLGU9T3BlbkxheWVycy5VdGlsLmV4dGVuZChlLGEpLApmPU9wZW5MYXllcnMuVXRpbC51cHBlckNhc2VPYmplY3QoT3BlbkxheWVycy5VdGlsLmdldFBhcmFtZXRlcnMoYykpLGc7Zm9yKGcgaW4gZSlnLnRvVXBwZXJDYXNlKClpbiBmJiZkZWxldGUgZVtnXTtlPU9wZW5MYXllcnMuVXRpbC5nZXRQYXJhbWV0ZXJTdHJpbmcoZSk7ZT1lLnJlcGxhY2UoLywvZywiKyIpOyIiIT1lJiYoZj1jLmNoYXJBdChjLmxlbmd0aC0xKSxkPSImIj09Znx8Ij8iPT1mP2QrZTotMT09Yy5pbmRleE9mKCI/Iik/ZCsoIj8iK2UpOmQrKCImIitlKSk7cmV0dXJuIGR9LGdldEltYWdlRmlsZVBhdGg6ZnVuY3Rpb24oYSxiKXt2YXIgYz1udWxsPT1iP3RoaXMudXJsOmI7Im9iamVjdCI9PXR5cGVvZiBjJiYoYz1jW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSpjLmxlbmd0aCldKTt2YXIgZD0iIixlPSIiOzA+YS50aWxlcm93JiYoZD0iLSIpO2Q9MD09YS50aWxlcm93P2QrIjAiOmQrTWF0aC5mbG9vcihNYXRoLmFicyhhLnRpbGVyb3cvdGhpcy5wYXJhbXMudGlsZVJvd3NQZXJGb2xkZXIpKSoKdGhpcy5wYXJhbXMudGlsZVJvd3NQZXJGb2xkZXI7MD5hLnRpbGVjb2wmJihlPSItIik7ZT0wPT1hLnRpbGVjb2w/ZSsiMCI6ZStNYXRoLmZsb29yKE1hdGguYWJzKGEudGlsZWNvbC90aGlzLnBhcmFtcy50aWxlQ29sdW1uc1BlckZvbGRlcikpKnRoaXMucGFyYW1zLnRpbGVDb2x1bW5zUGVyRm9sZGVyO2Q9Ii9TIitNYXRoLmZsb29yKGEuc2NhbGVpbmRleCkrIi8iK3RoaXMucGFyYW1zLmJhc2VtYXBsYXllcmdyb3VwbmFtZSsiL1IiK2QrIi9DIitlKyIvIithLnRpbGVyb3cldGhpcy5wYXJhbXMudGlsZVJvd3NQZXJGb2xkZXIrIl8iK2EudGlsZWNvbCV0aGlzLnBhcmFtcy50aWxlQ29sdW1uc1BlckZvbGRlcisiLiIrdGhpcy5wYXJhbXMuZm9ybWF0O3RoaXMucGFyYW1zLnF1ZXJ5c3RyaW5nJiYoZCs9Ij8iK3RoaXMucGFyYW1zLnF1ZXJ5c3RyaW5nKTtyZXR1cm4gYytkfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkxheWVyLk1hcEd1aWRlIn0pO09wZW5MYXllcnMuQ29udHJvbC5NZWFzdXJlPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Db250cm9sLHtjYWxsYmFja3M6bnVsbCxkaXNwbGF5U3lzdGVtOiJtZXRyaWMiLGdlb2Rlc2ljOiExLGRpc3BsYXlTeXN0ZW1Vbml0czp7Z2VvZ3JhcGhpYzpbImRkIl0sZW5nbGlzaDpbIm1pIiwiZnQiLCJpbiJdLG1ldHJpYzpbImttIiwibSJdfSxwYXJ0aWFsRGVsYXk6MzAwLGRlbGF5ZWRUcmlnZ2VyOm51bGwscGVyc2lzdDohMSxpbW1lZGlhdGU6ITEsaW5pdGlhbGl6ZTpmdW5jdGlvbihhLGIpe09wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLFtiXSk7dmFyIGM9e2RvbmU6dGhpcy5tZWFzdXJlQ29tcGxldGUscG9pbnQ6dGhpcy5tZWFzdXJlUGFydGlhbH07dGhpcy5pbW1lZGlhdGUmJihjLm1vZGlmeT10aGlzLm1lYXN1cmVJbW1lZGlhdGUpO3RoaXMuY2FsbGJhY2tzPU9wZW5MYXllcnMuVXRpbC5leHRlbmQoYyx0aGlzLmNhbGxiYWNrcyk7CnRoaXMuaGFuZGxlck9wdGlvbnM9T3BlbkxheWVycy5VdGlsLmV4dGVuZCh7cGVyc2lzdDp0aGlzLnBlcnNpc3R9LHRoaXMuaGFuZGxlck9wdGlvbnMpO3RoaXMuaGFuZGxlcj1uZXcgYSh0aGlzLHRoaXMuY2FsbGJhY2tzLHRoaXMuaGFuZGxlck9wdGlvbnMpfSxkZWFjdGl2YXRlOmZ1bmN0aW9uKCl7dGhpcy5jYW5jZWxEZWxheSgpO3JldHVybiBPcGVuTGF5ZXJzLkNvbnRyb2wucHJvdG90eXBlLmRlYWN0aXZhdGUuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxjYW5jZWw6ZnVuY3Rpb24oKXt0aGlzLmNhbmNlbERlbGF5KCk7dGhpcy5oYW5kbGVyLmNhbmNlbCgpfSxzZXRJbW1lZGlhdGU6ZnVuY3Rpb24oYSl7KHRoaXMuaW1tZWRpYXRlPWEpP3RoaXMuY2FsbGJhY2tzLm1vZGlmeT10aGlzLm1lYXN1cmVJbW1lZGlhdGU6ZGVsZXRlIHRoaXMuY2FsbGJhY2tzLm1vZGlmeX0sdXBkYXRlSGFuZGxlcjpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuYWN0aXZlO2MmJnRoaXMuZGVhY3RpdmF0ZSgpOwp0aGlzLmhhbmRsZXI9bmV3IGEodGhpcyx0aGlzLmNhbGxiYWNrcyxiKTtjJiZ0aGlzLmFjdGl2YXRlKCl9LG1lYXN1cmVDb21wbGV0ZTpmdW5jdGlvbihhKXt0aGlzLmNhbmNlbERlbGF5KCk7dGhpcy5tZWFzdXJlKGEsIm1lYXN1cmUiKX0sbWVhc3VyZVBhcnRpYWw6ZnVuY3Rpb24oYSxiKXt0aGlzLmNhbmNlbERlbGF5KCk7Yj1iLmNsb25lKCk7dGhpcy5oYW5kbGVyLmZyZWVoYW5kTW9kZSh0aGlzLmhhbmRsZXIuZXZ0KT90aGlzLm1lYXN1cmUoYiwibWVhc3VyZXBhcnRpYWwiKTp0aGlzLmRlbGF5ZWRUcmlnZ2VyPXdpbmRvdy5zZXRUaW1lb3V0KE9wZW5MYXllcnMuRnVuY3Rpb24uYmluZChmdW5jdGlvbigpe3RoaXMuZGVsYXllZFRyaWdnZXI9bnVsbDt0aGlzLm1lYXN1cmUoYiwibWVhc3VyZXBhcnRpYWwiKX0sdGhpcyksdGhpcy5wYXJ0aWFsRGVsYXkpfSxtZWFzdXJlSW1tZWRpYXRlOmZ1bmN0aW9uKGEsYixjKXtjJiYhdGhpcy5oYW5kbGVyLmZyZWVoYW5kTW9kZSh0aGlzLmhhbmRsZXIuZXZ0KSYmCih0aGlzLmNhbmNlbERlbGF5KCksdGhpcy5tZWFzdXJlKGIuZ2VvbWV0cnksIm1lYXN1cmVwYXJ0aWFsIikpfSxjYW5jZWxEZWxheTpmdW5jdGlvbigpe251bGwhPT10aGlzLmRlbGF5ZWRUcmlnZ2VyJiYod2luZG93LmNsZWFyVGltZW91dCh0aGlzLmRlbGF5ZWRUcmlnZ2VyKSx0aGlzLmRlbGF5ZWRUcmlnZ2VyPW51bGwpfSxtZWFzdXJlOmZ1bmN0aW9uKGEsYil7dmFyIGMsZDstMTxhLkNMQVNTX05BTUUuaW5kZXhPZigiTGluZVN0cmluZyIpPyhjPXRoaXMuZ2V0QmVzdExlbmd0aChhKSxkPTEpOihjPXRoaXMuZ2V0QmVzdEFyZWEoYSksZD0yKTt0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoYix7bWVhc3VyZTpjWzBdLHVuaXRzOmNbMV0sb3JkZXI6ZCxnZW9tZXRyeTphfSl9LGdldEJlc3RBcmVhOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj10aGlzLmRpc3BsYXlTeXN0ZW1Vbml0c1t0aGlzLmRpc3BsYXlTeXN0ZW1dLGMsZCxlPTAsZj1iLmxlbmd0aDtlPGYmJiEoYz1iW2VdLGQ9dGhpcy5nZXRBcmVhKGEsCmMpLDE8ZCk7KytlKTtyZXR1cm5bZCxjXX0sZ2V0QXJlYTpmdW5jdGlvbihhLGIpe3ZhciBjLGQ7dGhpcy5nZW9kZXNpYz8oYz1hLmdldEdlb2Rlc2ljQXJlYSh0aGlzLm1hcC5nZXRQcm9qZWN0aW9uT2JqZWN0KCkpLGQ9Im0iKTooYz1hLmdldEFyZWEoKSxkPXRoaXMubWFwLmdldFVuaXRzKCkpO3ZhciBlPU9wZW5MYXllcnMuSU5DSEVTX1BFUl9VTklUW2JdO2UmJihjKj1NYXRoLnBvdyhPcGVuTGF5ZXJzLklOQ0hFU19QRVJfVU5JVFtkXS9lLDIpKTtyZXR1cm4gY30sZ2V0QmVzdExlbmd0aDpmdW5jdGlvbihhKXtmb3IodmFyIGI9dGhpcy5kaXNwbGF5U3lzdGVtVW5pdHNbdGhpcy5kaXNwbGF5U3lzdGVtXSxjLGQsZT0wLGY9Yi5sZW5ndGg7ZTxmJiYhKGM9YltlXSxkPXRoaXMuZ2V0TGVuZ3RoKGEsYyksMTxkKTsrK2UpO3JldHVybltkLGNdfSxnZXRMZW5ndGg6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkO3RoaXMuZ2VvZGVzaWM/KGM9YS5nZXRHZW9kZXNpY0xlbmd0aCh0aGlzLm1hcC5nZXRQcm9qZWN0aW9uT2JqZWN0KCkpLApkPSJtIik6KGM9YS5nZXRMZW5ndGgoKSxkPXRoaXMubWFwLmdldFVuaXRzKCkpO3ZhciBlPU9wZW5MYXllcnMuSU5DSEVTX1BFUl9VTklUW2JdO2UmJihjKj1PcGVuTGF5ZXJzLklOQ0hFU19QRVJfVU5JVFtkXS9lKTtyZXR1cm4gY30sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Db250cm9sLk1lYXN1cmUifSk7T3BlbkxheWVycy5Gb3JtYXQuV01DLnYxXzBfMD1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuRm9ybWF0LldNQy52MSx7VkVSU0lPTjoiMS4wLjAiLHNjaGVtYUxvY2F0aW9uOiJodHRwOi8vd3d3Lm9wZW5naXMubmV0L2NvbnRleHQgaHR0cDovL3NjaGVtYXMub3Blbmdpcy5uZXQvY29udGV4dC8xLjAuMC9jb250ZXh0LnhzZCIsaW5pdGlhbGl6ZTpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLkZvcm1hdC5XTUMudjEucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxbYV0pfSxyZWFkX3dtY19TUlM6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmdldENoaWxkVmFsdWUoYik7Im9iamVjdCIhPXR5cGVvZiBhLnByb2plY3Rpb25zJiYoYS5wcm9qZWN0aW9ucz17fSk7Zm9yKHZhciBjPWMuc3BsaXQoLyArLyksZD0wLGU9Yy5sZW5ndGg7ZDxlO2QrKylhLnByb2plY3Rpb25zW2NbZF1dPSEwfSx3cml0ZV93bWNfTGF5ZXI6ZnVuY3Rpb24oYSl7dmFyIGI9T3BlbkxheWVycy5Gb3JtYXQuV01DLnYxLnByb3RvdHlwZS53cml0ZV93bWNfTGF5ZXIuYXBwbHkodGhpcywKW2FdKTtpZihhLnNycyl7dmFyIGM9W10sZDtmb3IoZCBpbiBhLnNycyljLnB1c2goZCk7Yi5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZUVsZW1lbnREZWZhdWx0TlMoIlNSUyIsYy5qb2luKCIgIikpKX1iLmFwcGVuZENoaWxkKHRoaXMud3JpdGVfd21jX0Zvcm1hdExpc3QoYSkpO2IuYXBwZW5kQ2hpbGQodGhpcy53cml0ZV93bWNfU3R5bGVMaXN0KGEpKTthLmRpbWVuc2lvbnMmJmIuYXBwZW5kQ2hpbGQodGhpcy53cml0ZV93bWNfRGltZW5zaW9uTGlzdChhKSk7Yi5hcHBlbmRDaGlsZCh0aGlzLndyaXRlX3dtY19MYXllckV4dGVuc2lvbihhKSl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuRm9ybWF0LldNQy52MV8wXzAifSk7T3BlbkxheWVycy5Qb3B1cC5BbmNob3JlZD1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuUG9wdXAse3JlbGF0aXZlUG9zaXRpb246bnVsbCxrZWVwSW5NYXA6ITAsYW5jaG9yOm51bGwsaW5pdGlhbGl6ZTpmdW5jdGlvbihhLGIsYyxkLGUsZixnKXtPcGVuTGF5ZXJzLlBvcHVwLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsW2EsYixjLGQsZixnXSk7dGhpcy5hbmNob3I9bnVsbCE9ZT9lOntzaXplOm5ldyBPcGVuTGF5ZXJzLlNpemUoMCwwKSxvZmZzZXQ6bmV3IE9wZW5MYXllcnMuUGl4ZWwoMCwwKX19LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLnJlbGF0aXZlUG9zaXRpb249dGhpcy5hbmNob3I9bnVsbDtPcGVuTGF5ZXJzLlBvcHVwLnByb3RvdHlwZS5kZXN0cm95LmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sc2hvdzpmdW5jdGlvbigpe3RoaXMudXBkYXRlUG9zaXRpb24oKTtPcGVuTGF5ZXJzLlBvcHVwLnByb3RvdHlwZS5zaG93LmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sCm1vdmVUbzpmdW5jdGlvbihhKXt2YXIgYj10aGlzLnJlbGF0aXZlUG9zaXRpb247dGhpcy5yZWxhdGl2ZVBvc2l0aW9uPXRoaXMuY2FsY3VsYXRlUmVsYXRpdmVQb3NpdGlvbihhKTtPcGVuTGF5ZXJzLlBvcHVwLnByb3RvdHlwZS5tb3ZlVG8uY2FsbCh0aGlzLHRoaXMuY2FsY3VsYXRlTmV3UHgoYSkpO3RoaXMucmVsYXRpdmVQb3NpdGlvbiE9YiYmdGhpcy51cGRhdGVSZWxhdGl2ZVBvc2l0aW9uKCl9LHNldFNpemU6ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5Qb3B1cC5wcm90b3R5cGUuc2V0U2l6ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7aWYodGhpcy5sb25sYXQmJnRoaXMubWFwKXt2YXIgYj10aGlzLm1hcC5nZXRMYXllclB4RnJvbUxvbkxhdCh0aGlzLmxvbmxhdCk7dGhpcy5tb3ZlVG8oYil9fSxjYWxjdWxhdGVSZWxhdGl2ZVBvc2l0aW9uOmZ1bmN0aW9uKGEpe2E9dGhpcy5tYXAuZ2V0TG9uTGF0RnJvbUxheWVyUHgoYSk7YT10aGlzLm1hcC5nZXRFeHRlbnQoKS5kZXRlcm1pbmVRdWFkcmFudChhKTsKcmV0dXJuIE9wZW5MYXllcnMuQm91bmRzLm9wcG9zaXRlUXVhZHJhbnQoYSl9LHVwZGF0ZVJlbGF0aXZlUG9zaXRpb246ZnVuY3Rpb24oKXt9LGNhbGN1bGF0ZU5ld1B4OmZ1bmN0aW9uKGEpe2E9YS5vZmZzZXQodGhpcy5hbmNob3Iub2Zmc2V0KTt2YXIgYj10aGlzLnNpemV8fHRoaXMuY29udGVudFNpemUsYz0idCI9PXRoaXMucmVsYXRpdmVQb3NpdGlvbi5jaGFyQXQoMCk7YS55Kz1jPy1iLmg6dGhpcy5hbmNob3Iuc2l6ZS5oO2M9ImwiPT10aGlzLnJlbGF0aXZlUG9zaXRpb24uY2hhckF0KDEpO2EueCs9Yz8tYi53OnRoaXMuYW5jaG9yLnNpemUudztyZXR1cm4gYX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Qb3B1cC5BbmNob3JlZCJ9KTtPcGVuTGF5ZXJzLlBvcHVwLkZyYW1lZD1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuUG9wdXAuQW5jaG9yZWQse2ltYWdlU3JjOm51bGwsaW1hZ2VTaXplOm51bGwsaXNBbHBoYUltYWdlOiExLHBvc2l0aW9uQmxvY2tzOm51bGwsYmxvY2tzOm51bGwsZml4ZWRSZWxhdGl2ZVBvc2l0aW9uOiExLGluaXRpYWxpemU6ZnVuY3Rpb24oYSxiLGMsZCxlLGYsZyl7T3BlbkxheWVycy5Qb3B1cC5BbmNob3JlZC5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5maXhlZFJlbGF0aXZlUG9zaXRpb24mJih0aGlzLnVwZGF0ZVJlbGF0aXZlUG9zaXRpb24oKSx0aGlzLmNhbGN1bGF0ZVJlbGF0aXZlUG9zaXRpb249ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMucmVsYXRpdmVQb3NpdGlvbn0pO3RoaXMuY29udGVudERpdi5zdHlsZS5wb3NpdGlvbj0iYWJzb2x1dGUiO3RoaXMuY29udGVudERpdi5zdHlsZS56SW5kZXg9MTtmJiYodGhpcy5jbG9zZURpdi5zdHlsZS56SW5kZXg9CjEpO3RoaXMuZ3JvdXBEaXYuc3R5bGUucG9zaXRpb249ImFic29sdXRlIjt0aGlzLmdyb3VwRGl2LnN0eWxlLnRvcD0iMHB4Ijt0aGlzLmdyb3VwRGl2LnN0eWxlLmxlZnQ9IjBweCI7dGhpcy5ncm91cERpdi5zdHlsZS5oZWlnaHQ9IjEwMCUiO3RoaXMuZ3JvdXBEaXYuc3R5bGUud2lkdGg9IjEwMCUifSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5pc0FscGhhSW1hZ2U9dGhpcy5pbWFnZVNpemU9dGhpcy5pbWFnZVNyYz1udWxsO3RoaXMuZml4ZWRSZWxhdGl2ZVBvc2l0aW9uPSExO3RoaXMucG9zaXRpb25CbG9ja3M9bnVsbDtmb3IodmFyIGE9MDthPHRoaXMuYmxvY2tzLmxlbmd0aDthKyspe3ZhciBiPXRoaXMuYmxvY2tzW2FdO2IuaW1hZ2UmJmIuZGl2LnJlbW92ZUNoaWxkKGIuaW1hZ2UpO2IuaW1hZ2U9bnVsbDtiLmRpdiYmdGhpcy5ncm91cERpdi5yZW1vdmVDaGlsZChiLmRpdik7Yi5kaXY9bnVsbH10aGlzLmJsb2Nrcz1udWxsO09wZW5MYXllcnMuUG9wdXAuQW5jaG9yZWQucHJvdG90eXBlLmRlc3Ryb3kuYXBwbHkodGhpcywKYXJndW1lbnRzKX0sc2V0QmFja2dyb3VuZENvbG9yOmZ1bmN0aW9uKGEpe30sc2V0Qm9yZGVyOmZ1bmN0aW9uKCl7fSxzZXRPcGFjaXR5OmZ1bmN0aW9uKGEpe30sc2V0U2l6ZTpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLlBvcHVwLkFuY2hvcmVkLnByb3RvdHlwZS5zZXRTaXplLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLnVwZGF0ZUJsb2NrcygpfSx1cGRhdGVSZWxhdGl2ZVBvc2l0aW9uOmZ1bmN0aW9uKCl7dGhpcy5wYWRkaW5nPXRoaXMucG9zaXRpb25CbG9ja3NbdGhpcy5yZWxhdGl2ZVBvc2l0aW9uXS5wYWRkaW5nO2lmKHRoaXMuY2xvc2VEaXYpe3ZhciBhPXRoaXMuZ2V0Q29udGVudERpdlBhZGRpbmcoKTt0aGlzLmNsb3NlRGl2LnN0eWxlLnJpZ2h0PWEucmlnaHQrdGhpcy5wYWRkaW5nLnJpZ2h0KyJweCI7dGhpcy5jbG9zZURpdi5zdHlsZS50b3A9YS50b3ArdGhpcy5wYWRkaW5nLnRvcCsicHgifXRoaXMudXBkYXRlQmxvY2tzKCl9LGNhbGN1bGF0ZU5ld1B4OmZ1bmN0aW9uKGEpe3ZhciBiPQpPcGVuTGF5ZXJzLlBvcHVwLkFuY2hvcmVkLnByb3RvdHlwZS5jYWxjdWxhdGVOZXdQeC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7cmV0dXJuIGI9Yi5vZmZzZXQodGhpcy5wb3NpdGlvbkJsb2Nrc1t0aGlzLnJlbGF0aXZlUG9zaXRpb25dLm9mZnNldCl9LGNyZWF0ZUJsb2NrczpmdW5jdGlvbigpe3RoaXMuYmxvY2tzPVtdO3ZhciBhPW51bGwsYjtmb3IoYiBpbiB0aGlzLnBvc2l0aW9uQmxvY2tzKXthPWI7YnJlYWt9YT10aGlzLnBvc2l0aW9uQmxvY2tzW2FdO2ZvcihiPTA7YjxhLmJsb2Nrcy5sZW5ndGg7YisrKXt2YXIgYz17fTt0aGlzLmJsb2Nrcy5wdXNoKGMpO2MuZGl2PU9wZW5MYXllcnMuVXRpbC5jcmVhdGVEaXYodGhpcy5pZCsiX0ZyYW1lRGVjb3JhdGlvbkRpdl8iK2IsbnVsbCxudWxsLG51bGwsImFic29sdXRlIixudWxsLCJoaWRkZW4iLG51bGwpO2MuaW1hZ2U9KHRoaXMuaXNBbHBoYUltYWdlP09wZW5MYXllcnMuVXRpbC5jcmVhdGVBbHBoYUltYWdlRGl2Ok9wZW5MYXllcnMuVXRpbC5jcmVhdGVJbWFnZSkodGhpcy5pZCsKIl9GcmFtZURlY29yYXRpb25JbWdfIitiLG51bGwsdGhpcy5pbWFnZVNpemUsdGhpcy5pbWFnZVNyYywiYWJzb2x1dGUiLG51bGwsbnVsbCxudWxsKTtjLmRpdi5hcHBlbmRDaGlsZChjLmltYWdlKTt0aGlzLmdyb3VwRGl2LmFwcGVuZENoaWxkKGMuZGl2KX19LHVwZGF0ZUJsb2NrczpmdW5jdGlvbigpe3RoaXMuYmxvY2tzfHx0aGlzLmNyZWF0ZUJsb2NrcygpO2lmKHRoaXMuc2l6ZSYmdGhpcy5yZWxhdGl2ZVBvc2l0aW9uKXtmb3IodmFyIGE9dGhpcy5wb3NpdGlvbkJsb2Nrc1t0aGlzLnJlbGF0aXZlUG9zaXRpb25dLGI9MDtiPGEuYmxvY2tzLmxlbmd0aDtiKyspe3ZhciBjPWEuYmxvY2tzW2JdLGQ9dGhpcy5ibG9ja3NbYl0sZT1jLmFuY2hvci5sZWZ0LGY9Yy5hbmNob3IuYm90dG9tLGc9Yy5hbmNob3IucmlnaHQsaD1jLmFuY2hvci50b3Asaz1pc05hTihjLnNpemUudyk/dGhpcy5zaXplLnctKGcrZSk6Yy5zaXplLncsbD1pc05hTihjLnNpemUuaCk/dGhpcy5zaXplLmgtKGYrCmgpOmMuc2l6ZS5oO2QuZGl2LnN0eWxlLndpZHRoPSgwPms/MDprKSsicHgiO2QuZGl2LnN0eWxlLmhlaWdodD0oMD5sPzA6bCkrInB4IjtkLmRpdi5zdHlsZS5sZWZ0PW51bGwhPWU/ZSsicHgiOiIiO2QuZGl2LnN0eWxlLmJvdHRvbT1udWxsIT1mP2YrInB4IjoiIjtkLmRpdi5zdHlsZS5yaWdodD1udWxsIT1nP2crInB4IjoiIjtkLmRpdi5zdHlsZS50b3A9bnVsbCE9aD9oKyJweCI6IiI7ZC5pbWFnZS5zdHlsZS5sZWZ0PWMucG9zaXRpb24ueCsicHgiO2QuaW1hZ2Uuc3R5bGUudG9wPWMucG9zaXRpb24ueSsicHgifXRoaXMuY29udGVudERpdi5zdHlsZS5sZWZ0PXRoaXMucGFkZGluZy5sZWZ0KyJweCI7dGhpcy5jb250ZW50RGl2LnN0eWxlLnRvcD10aGlzLnBhZGRpbmcudG9wKyJweCJ9fSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLlBvcHVwLkZyYW1lZCJ9KTtPcGVuTGF5ZXJzLlBvcHVwLkZyYW1lZENsb3VkPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Qb3B1cC5GcmFtZWQse2NvbnRlbnREaXNwbGF5Q2xhc3M6Im9sRnJhbWVkQ2xvdWRQb3B1cENvbnRlbnQiLGF1dG9TaXplOiEwLHBhbk1hcElmT3V0T2ZWaWV3OiEwLGltYWdlU2l6ZTpuZXcgT3BlbkxheWVycy5TaXplKDEyNzYsNzM2KSxpc0FscGhhSW1hZ2U6ITEsZml4ZWRSZWxhdGl2ZVBvc2l0aW9uOiExLHBvc2l0aW9uQmxvY2tzOnt0bDp7b2Zmc2V0Om5ldyBPcGVuTGF5ZXJzLlBpeGVsKDQ0LDApLHBhZGRpbmc6bmV3IE9wZW5MYXllcnMuQm91bmRzKDgsNDAsOCw5KSxibG9ja3M6W3tzaXplOm5ldyBPcGVuTGF5ZXJzLlNpemUoImF1dG8iLCJhdXRvIiksYW5jaG9yOm5ldyBPcGVuTGF5ZXJzLkJvdW5kcygwLDUxLDIyLDApLHBvc2l0aW9uOm5ldyBPcGVuTGF5ZXJzLlBpeGVsKDAsMCl9LHtzaXplOm5ldyBPcGVuTGF5ZXJzLlNpemUoMjIsImF1dG8iKSxhbmNob3I6bmV3IE9wZW5MYXllcnMuQm91bmRzKG51bGwsCjUwLDAsMCkscG9zaXRpb246bmV3IE9wZW5MYXllcnMuUGl4ZWwoLTEyMzgsMCl9LHtzaXplOm5ldyBPcGVuTGF5ZXJzLlNpemUoImF1dG8iLDE5KSxhbmNob3I6bmV3IE9wZW5MYXllcnMuQm91bmRzKDAsMzIsMjIsbnVsbCkscG9zaXRpb246bmV3IE9wZW5MYXllcnMuUGl4ZWwoMCwtNjMxKX0se3NpemU6bmV3IE9wZW5MYXllcnMuU2l6ZSgyMiwxOCksYW5jaG9yOm5ldyBPcGVuTGF5ZXJzLkJvdW5kcyhudWxsLDMyLDAsbnVsbCkscG9zaXRpb246bmV3IE9wZW5MYXllcnMuUGl4ZWwoLTEyMzgsLTYzMil9LHtzaXplOm5ldyBPcGVuTGF5ZXJzLlNpemUoODEsMzUpLGFuY2hvcjpuZXcgT3BlbkxheWVycy5Cb3VuZHMobnVsbCwwLDAsbnVsbCkscG9zaXRpb246bmV3IE9wZW5MYXllcnMuUGl4ZWwoMCwtNjg4KX1dfSx0cjp7b2Zmc2V0Om5ldyBPcGVuTGF5ZXJzLlBpeGVsKC00NSwwKSxwYWRkaW5nOm5ldyBPcGVuTGF5ZXJzLkJvdW5kcyg4LDQwLDgsOSksYmxvY2tzOlt7c2l6ZTpuZXcgT3BlbkxheWVycy5TaXplKCJhdXRvIiwKImF1dG8iKSxhbmNob3I6bmV3IE9wZW5MYXllcnMuQm91bmRzKDAsNTEsMjIsMCkscG9zaXRpb246bmV3IE9wZW5MYXllcnMuUGl4ZWwoMCwwKX0se3NpemU6bmV3IE9wZW5MYXllcnMuU2l6ZSgyMiwiYXV0byIpLGFuY2hvcjpuZXcgT3BlbkxheWVycy5Cb3VuZHMobnVsbCw1MCwwLDApLHBvc2l0aW9uOm5ldyBPcGVuTGF5ZXJzLlBpeGVsKC0xMjM4LDApfSx7c2l6ZTpuZXcgT3BlbkxheWVycy5TaXplKCJhdXRvIiwxOSksYW5jaG9yOm5ldyBPcGVuTGF5ZXJzLkJvdW5kcygwLDMyLDIyLG51bGwpLHBvc2l0aW9uOm5ldyBPcGVuTGF5ZXJzLlBpeGVsKDAsLTYzMSl9LHtzaXplOm5ldyBPcGVuTGF5ZXJzLlNpemUoMjIsMTkpLGFuY2hvcjpuZXcgT3BlbkxheWVycy5Cb3VuZHMobnVsbCwzMiwwLG51bGwpLHBvc2l0aW9uOm5ldyBPcGVuTGF5ZXJzLlBpeGVsKC0xMjM4LC02MzEpfSx7c2l6ZTpuZXcgT3BlbkxheWVycy5TaXplKDgxLDM1KSxhbmNob3I6bmV3IE9wZW5MYXllcnMuQm91bmRzKDAsCjAsbnVsbCxudWxsKSxwb3NpdGlvbjpuZXcgT3BlbkxheWVycy5QaXhlbCgtMjE1LC02ODcpfV19LGJsOntvZmZzZXQ6bmV3IE9wZW5MYXllcnMuUGl4ZWwoNDUsMCkscGFkZGluZzpuZXcgT3BlbkxheWVycy5Cb3VuZHMoOCw5LDgsNDApLGJsb2Nrczpbe3NpemU6bmV3IE9wZW5MYXllcnMuU2l6ZSgiYXV0byIsImF1dG8iKSxhbmNob3I6bmV3IE9wZW5MYXllcnMuQm91bmRzKDAsMjEsMjIsMzIpLHBvc2l0aW9uOm5ldyBPcGVuTGF5ZXJzLlBpeGVsKDAsMCl9LHtzaXplOm5ldyBPcGVuTGF5ZXJzLlNpemUoMjIsImF1dG8iKSxhbmNob3I6bmV3IE9wZW5MYXllcnMuQm91bmRzKG51bGwsMjEsMCwzMikscG9zaXRpb246bmV3IE9wZW5MYXllcnMuUGl4ZWwoLTEyMzgsMCl9LHtzaXplOm5ldyBPcGVuTGF5ZXJzLlNpemUoImF1dG8iLDIxKSxhbmNob3I6bmV3IE9wZW5MYXllcnMuQm91bmRzKDAsMCwyMixudWxsKSxwb3NpdGlvbjpuZXcgT3BlbkxheWVycy5QaXhlbCgwLC02MjkpfSx7c2l6ZTpuZXcgT3BlbkxheWVycy5TaXplKDIyLAoyMSksYW5jaG9yOm5ldyBPcGVuTGF5ZXJzLkJvdW5kcyhudWxsLDAsMCxudWxsKSxwb3NpdGlvbjpuZXcgT3BlbkxheWVycy5QaXhlbCgtMTIzOCwtNjI5KX0se3NpemU6bmV3IE9wZW5MYXllcnMuU2l6ZSg4MSwzMyksYW5jaG9yOm5ldyBPcGVuTGF5ZXJzLkJvdW5kcyhudWxsLG51bGwsMCwwKSxwb3NpdGlvbjpuZXcgT3BlbkxheWVycy5QaXhlbCgtMTAxLC02NzQpfV19LGJyOntvZmZzZXQ6bmV3IE9wZW5MYXllcnMuUGl4ZWwoLTQ0LDApLHBhZGRpbmc6bmV3IE9wZW5MYXllcnMuQm91bmRzKDgsOSw4LDQwKSxibG9ja3M6W3tzaXplOm5ldyBPcGVuTGF5ZXJzLlNpemUoImF1dG8iLCJhdXRvIiksYW5jaG9yOm5ldyBPcGVuTGF5ZXJzLkJvdW5kcygwLDIxLDIyLDMyKSxwb3NpdGlvbjpuZXcgT3BlbkxheWVycy5QaXhlbCgwLDApfSx7c2l6ZTpuZXcgT3BlbkxheWVycy5TaXplKDIyLCJhdXRvIiksYW5jaG9yOm5ldyBPcGVuTGF5ZXJzLkJvdW5kcyhudWxsLDIxLDAsMzIpLHBvc2l0aW9uOm5ldyBPcGVuTGF5ZXJzLlBpeGVsKC0xMjM4LAowKX0se3NpemU6bmV3IE9wZW5MYXllcnMuU2l6ZSgiYXV0byIsMjEpLGFuY2hvcjpuZXcgT3BlbkxheWVycy5Cb3VuZHMoMCwwLDIyLG51bGwpLHBvc2l0aW9uOm5ldyBPcGVuTGF5ZXJzLlBpeGVsKDAsLTYyOSl9LHtzaXplOm5ldyBPcGVuTGF5ZXJzLlNpemUoMjIsMjEpLGFuY2hvcjpuZXcgT3BlbkxheWVycy5Cb3VuZHMobnVsbCwwLDAsbnVsbCkscG9zaXRpb246bmV3IE9wZW5MYXllcnMuUGl4ZWwoLTEyMzgsLTYyOSl9LHtzaXplOm5ldyBPcGVuTGF5ZXJzLlNpemUoODEsMzMpLGFuY2hvcjpuZXcgT3BlbkxheWVycy5Cb3VuZHMoMCxudWxsLG51bGwsMCkscG9zaXRpb246bmV3IE9wZW5MYXllcnMuUGl4ZWwoLTMxMSwtNjc0KX1dfX0sbWluU2l6ZTpuZXcgT3BlbkxheWVycy5TaXplKDEwNSwxMCksbWF4U2l6ZTpuZXcgT3BlbkxheWVycy5TaXplKDEyMDAsNjYwKSxpbml0aWFsaXplOmZ1bmN0aW9uKGEsYixjLGQsZSxmLGcpe3RoaXMuaW1hZ2VTcmM9T3BlbkxheWVycy5VdGlsLmdldEltYWdlTG9jYXRpb24oImNsb3VkLXBvcHVwLXJlbGF0aXZlLnBuZyIpOwpPcGVuTGF5ZXJzLlBvcHVwLkZyYW1lZC5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5jb250ZW50RGl2LmNsYXNzTmFtZT10aGlzLmNvbnRlbnREaXNwbGF5Q2xhc3N9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuUG9wdXAuRnJhbWVkQ2xvdWQifSk7T3BlbkxheWVycy5UaWxlLkltYWdlLklGcmFtZT17dXNlSUZyYW1lOm51bGwsYmxhbmtJbWFnZVVybDoiZGF0YTppbWFnZS9naWY7YmFzZTY0LFIwbEdPRGxoQVFBQkFJQUFBQUFBQVAvLy95SDVCQUVBQUFBQUxBQUFBQUFCQUFFQVFBSUJSQUE3IixkcmF3OmZ1bmN0aW9uKCl7aWYoT3BlbkxheWVycy5UaWxlLkltYWdlLnByb3RvdHlwZS5zaG91bGREcmF3LmNhbGwodGhpcykpe3ZhciBhPXRoaXMubGF5ZXIuZ2V0VVJMKHRoaXMuYm91bmRzKSxiPXRoaXMudXNlSUZyYW1lO3RoaXMudXNlSUZyYW1lPW51bGwhPT10aGlzLm1heEdldFVybExlbmd0aCYmIXRoaXMubGF5ZXIuYXN5bmMmJmEubGVuZ3RoPnRoaXMubWF4R2V0VXJsTGVuZ3RoO2E9YiYmIXRoaXMudXNlSUZyYW1lO2I9IWImJnRoaXMudXNlSUZyYW1lO2lmKGF8fGIpdGhpcy5pbWdEaXYmJnRoaXMuaW1nRGl2LnBhcmVudE5vZGU9PT10aGlzLmZyYW1lJiZ0aGlzLmZyYW1lLnJlbW92ZUNoaWxkKHRoaXMuaW1nRGl2KSx0aGlzLmltZ0Rpdj0KbnVsbCxhJiZ0aGlzLmZyYW1lLnJlbW92ZUNoaWxkKHRoaXMuZnJhbWUuZmlyc3RDaGlsZCl9cmV0dXJuIE9wZW5MYXllcnMuVGlsZS5JbWFnZS5wcm90b3R5cGUuZHJhdy5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGdldEltYWdlOmZ1bmN0aW9uKCl7aWYoITA9PT10aGlzLnVzZUlGcmFtZSl7aWYoIXRoaXMuZnJhbWUuY2hpbGROb2Rlcy5sZW5ndGgpe3ZhciBhPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpLGI9YS5zdHlsZTtiLnBvc2l0aW9uPSJhYnNvbHV0ZSI7Yi53aWR0aD0iMTAwJSI7Yi5oZWlnaHQ9IjEwMCUiO2IuekluZGV4PTE7Yi5iYWNrZ3JvdW5kSW1hZ2U9InVybCgiK3RoaXMuYmxhbmtJbWFnZVVybCsiKSI7dGhpcy5mcmFtZS5hcHBlbmRDaGlsZChhKX1hPXRoaXMuaWQrIl9pRnJhbWUiOzk+cGFyc2VGbG9hdChuYXZpZ2F0b3IuYXBwVmVyc2lvbi5zcGxpdCgiTVNJRSIpWzFdKT8oYj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCc8aWZyYW1lIG5hbWU9IicrYSsnIj4nKSwKYi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3I9IiNGRkZGRkYiLGIuc3R5bGUuZmlsdGVyPSJjaHJvbWEoY29sb3I9I0ZGRkZGRikiKTooYj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpZnJhbWUiKSxiLnN0eWxlLmJhY2tncm91bmRDb2xvcj0idHJhbnNwYXJlbnQiLGIubmFtZT1hKTtiLnNjcm9sbGluZz0ibm8iO2IubWFyZ2luV2lkdGg9IjBweCI7Yi5tYXJnaW5IZWlnaHQ9IjBweCI7Yi5mcmFtZUJvcmRlcj0iMCI7Yi5zdHlsZS5wb3NpdGlvbj0iYWJzb2x1dGUiO2Iuc3R5bGUud2lkdGg9IjEwMCUiO2Iuc3R5bGUuaGVpZ2h0PSIxMDAlIjsxPnRoaXMubGF5ZXIub3BhY2l0eSYmT3BlbkxheWVycy5VdGlsLm1vZGlmeURPTUVsZW1lbnQoYixudWxsLG51bGwsbnVsbCxudWxsLG51bGwsbnVsbCx0aGlzLmxheWVyLm9wYWNpdHkpO3RoaXMuZnJhbWUuYXBwZW5kQ2hpbGQoYik7cmV0dXJuIHRoaXMuaW1nRGl2PWJ9cmV0dXJuIE9wZW5MYXllcnMuVGlsZS5JbWFnZS5wcm90b3R5cGUuZ2V0SW1hZ2UuYXBwbHkodGhpcywKYXJndW1lbnRzKX0sY3JlYXRlUmVxdWVzdEZvcm06ZnVuY3Rpb24oKXt2YXIgYT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJmb3JtIik7YS5tZXRob2Q9IlBPU1QiO3ZhciBiPXRoaXMubGF5ZXIucGFyYW1zLl9PTFNBTFQsYj0oYj9iKyJfIjoiIikrdGhpcy5ib3VuZHMudG9CQk9YKCk7YS5hY3Rpb249T3BlbkxheWVycy5VdGlsLnVybEFwcGVuZCh0aGlzLmxheWVyLnVybCxiKTthLnRhcmdldD10aGlzLmlkKyJfaUZyYW1lIjt0aGlzLmxheWVyLmdldEltYWdlU2l6ZSgpO3ZhciBiPU9wZW5MYXllcnMuVXRpbC5nZXRQYXJhbWV0ZXJzKHRoaXMudXJsKSxjLGQ7Zm9yKGQgaW4gYiljPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImlucHV0IiksYy50eXBlPSJoaWRkZW4iLGMubmFtZT1kLGMudmFsdWU9YltkXSxhLmFwcGVuZENoaWxkKGMpO3JldHVybiBhfSxzZXRJbWdTcmM6ZnVuY3Rpb24oYSl7aWYoITA9PT10aGlzLnVzZUlGcmFtZSlpZihhKXt2YXIgYj10aGlzLmNyZWF0ZVJlcXVlc3RGb3JtKCk7CnRoaXMuZnJhbWUuYXBwZW5kQ2hpbGQoYik7Yi5zdWJtaXQoKTt0aGlzLmZyYW1lLnJlbW92ZUNoaWxkKGIpfWVsc2UgdGhpcy5pbWdEaXYucGFyZW50Tm9kZT09PXRoaXMuZnJhbWUmJih0aGlzLmZyYW1lLnJlbW92ZUNoaWxkKHRoaXMuaW1nRGl2KSx0aGlzLmltZ0Rpdj1udWxsKTtlbHNlIE9wZW5MYXllcnMuVGlsZS5JbWFnZS5wcm90b3R5cGUuc2V0SW1nU3JjLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sb25JbWFnZUxvYWQ6ZnVuY3Rpb24oKXtPcGVuTGF5ZXJzLlRpbGUuSW1hZ2UucHJvdG90eXBlLm9uSW1hZ2VMb2FkLmFwcGx5KHRoaXMsYXJndW1lbnRzKTshMD09PXRoaXMudXNlSUZyYW1lJiYodGhpcy5pbWdEaXYuc3R5bGUub3BhY2l0eT0xLHRoaXMuZnJhbWUuc3R5bGUub3BhY2l0eT10aGlzLmxheWVyLm9wYWNpdHkpfSxjcmVhdGVCYWNrQnVmZmVyOmZ1bmN0aW9uKCl7dmFyIGE7ITE9PT10aGlzLnVzZUlGcmFtZSYmKGE9T3BlbkxheWVycy5UaWxlLkltYWdlLnByb3RvdHlwZS5jcmVhdGVCYWNrQnVmZmVyLmNhbGwodGhpcykpOwpyZXR1cm4gYX19O09wZW5MYXllcnMuRm9ybWF0LlNPU0NhcGFiaWxpdGllcz1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuRm9ybWF0LlhNTC5WZXJzaW9uZWRPR0Mse2RlZmF1bHRWZXJzaW9uOiIxLjAuMCIsQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Gb3JtYXQuU09TQ2FwYWJpbGl0aWVzIn0pO09wZW5MYXllcnMuRm9ybWF0LlNPU0NhcGFiaWxpdGllcy52MV8wXzA9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkZvcm1hdC5TT1NDYXBhYmlsaXRpZXMse25hbWVzcGFjZXM6e293czoiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9vd3MvMS4xIixzb3M6Imh0dHA6Ly93d3cub3Blbmdpcy5uZXQvc29zLzEuMCIsZ21sOiJodHRwOi8vd3d3Lm9wZW5naXMubmV0L2dtbCIseGxpbms6Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsifSxyZWdFeGVzOnt0cmltU3BhY2U6L15ccyp8XHMqJC9nLHJlbW92ZVNwYWNlOi9ccyovZyxzcGxpdFNwYWNlOi9ccysvLHRyaW1Db21tYTovXHMqLFxzKi9nfSxpbml0aWFsaXplOmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuRm9ybWF0LlhNTC5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLFthXSk7dGhpcy5vcHRpb25zPWF9LHJlYWQ6ZnVuY3Rpb24oYSl7InN0cmluZyI9PXR5cGVvZiBhJiYoYT1PcGVuTGF5ZXJzLkZvcm1hdC5YTUwucHJvdG90eXBlLnJlYWQuYXBwbHkodGhpcywKW2FdKSk7YSYmOT09YS5ub2RlVHlwZSYmKGE9YS5kb2N1bWVudEVsZW1lbnQpO3ZhciBiPXt9O3RoaXMucmVhZE5vZGUoYSxiKTtyZXR1cm4gYn0scmVhZGVyczp7Z21sOk9wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKHtuYW1lOmZ1bmN0aW9uKGEsYil7Yi5uYW1lPXRoaXMuZ2V0Q2hpbGRWYWx1ZShhKX0sVGltZVBlcmlvZDpmdW5jdGlvbihhLGIpe2IudGltZVBlcmlvZD17fTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYi50aW1lUGVyaW9kKX0sYmVnaW5Qb3NpdGlvbjpmdW5jdGlvbihhLGIpe2IuYmVnaW5Qb3NpdGlvbj10aGlzLmdldENoaWxkVmFsdWUoYSl9LGVuZFBvc2l0aW9uOmZ1bmN0aW9uKGEsYil7Yi5lbmRQb3NpdGlvbj10aGlzLmdldENoaWxkVmFsdWUoYSl9fSxPcGVuTGF5ZXJzLkZvcm1hdC5HTUwudjMucHJvdG90eXBlLnJlYWRlcnMuZ21sKSxzb3M6e0NhcGFiaWxpdGllczpmdW5jdGlvbihhLGIpe3RoaXMucmVhZENoaWxkTm9kZXMoYSxiKX0sQ29udGVudHM6ZnVuY3Rpb24oYSwKYil7Yi5jb250ZW50cz17fTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYi5jb250ZW50cyl9LE9ic2VydmF0aW9uT2ZmZXJpbmdMaXN0OmZ1bmN0aW9uKGEsYil7Yi5vZmZlcmluZ0xpc3Q9e307dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGIub2ZmZXJpbmdMaXN0KX0sT2JzZXJ2YXRpb25PZmZlcmluZzpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuZ2V0QXR0cmlidXRlTlMoYSx0aGlzLm5hbWVzcGFjZXMuZ21sLCJpZCIpO2JbY109e3Byb2NlZHVyZXM6W10sb2JzZXJ2ZWRQcm9wZXJ0aWVzOltdLGZlYXR1cmVPZkludGVyZXN0SWRzOltdLHJlc3BvbnNlRm9ybWF0czpbXSxyZXN1bHRNb2RlbHM6W10scmVzcG9uc2VNb2RlczpbXX07dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGJbY10pfSx0aW1lOmZ1bmN0aW9uKGEsYil7Yi50aW1lPXt9O3RoaXMucmVhZENoaWxkTm9kZXMoYSxiLnRpbWUpfSxwcm9jZWR1cmU6ZnVuY3Rpb24oYSxiKXtiLnByb2NlZHVyZXMucHVzaCh0aGlzLmdldEF0dHJpYnV0ZU5TKGEsCnRoaXMubmFtZXNwYWNlcy54bGluaywiaHJlZiIpKX0sb2JzZXJ2ZWRQcm9wZXJ0eTpmdW5jdGlvbihhLGIpe2Iub2JzZXJ2ZWRQcm9wZXJ0aWVzLnB1c2godGhpcy5nZXRBdHRyaWJ1dGVOUyhhLHRoaXMubmFtZXNwYWNlcy54bGluaywiaHJlZiIpKX0sZmVhdHVyZU9mSW50ZXJlc3Q6ZnVuY3Rpb24oYSxiKXtiLmZlYXR1cmVPZkludGVyZXN0SWRzLnB1c2godGhpcy5nZXRBdHRyaWJ1dGVOUyhhLHRoaXMubmFtZXNwYWNlcy54bGluaywiaHJlZiIpKX0scmVzcG9uc2VGb3JtYXQ6ZnVuY3Rpb24oYSxiKXtiLnJlc3BvbnNlRm9ybWF0cy5wdXNoKHRoaXMuZ2V0Q2hpbGRWYWx1ZShhKSl9LHJlc3VsdE1vZGVsOmZ1bmN0aW9uKGEsYil7Yi5yZXN1bHRNb2RlbHMucHVzaCh0aGlzLmdldENoaWxkVmFsdWUoYSkpfSxyZXNwb25zZU1vZGU6ZnVuY3Rpb24oYSxiKXtiLnJlc3BvbnNlTW9kZXMucHVzaCh0aGlzLmdldENoaWxkVmFsdWUoYSkpfX0sb3dzOk9wZW5MYXllcnMuRm9ybWF0Lk9XU0NvbW1vbi52MV8xXzAucHJvdG90eXBlLnJlYWRlcnMub3dzfSwKQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Gb3JtYXQuU09TQ2FwYWJpbGl0aWVzLnYxXzBfMCJ9KTtPcGVuTGF5ZXJzLkhhbmRsZXIuUGluY2g9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkhhbmRsZXIse3N0YXJ0ZWQ6ITEsc3RvcERvd246ITEscGluY2hpbmc6ITEsbGFzdDpudWxsLHN0YXJ0Om51bGwsdG91Y2hzdGFydDpmdW5jdGlvbihhKXt2YXIgYj0hMDt0aGlzLnBpbmNoaW5nPSExO2lmKE9wZW5MYXllcnMuRXZlbnQuaXNNdWx0aVRvdWNoKGEpKXRoaXMuc3RhcnRlZD0hMCx0aGlzLmxhc3Q9dGhpcy5zdGFydD17ZGlzdGFuY2U6dGhpcy5nZXREaXN0YW5jZShhLnRvdWNoZXMpLGRlbHRhOjAsc2NhbGU6MX0sdGhpcy5jYWxsYmFjaygic3RhcnQiLFthLHRoaXMuc3RhcnRdKSxiPSF0aGlzLnN0b3BEb3duO2Vsc2V7aWYodGhpcy5zdGFydGVkKXJldHVybiExO3RoaXMuc3RhcnRlZD0hMTt0aGlzLmxhc3Q9dGhpcy5zdGFydD1udWxsfU9wZW5MYXllcnMuRXZlbnQucHJldmVudERlZmF1bHQoYSk7cmV0dXJuIGJ9LHRvdWNobW92ZTpmdW5jdGlvbihhKXtpZih0aGlzLnN0YXJ0ZWQmJgpPcGVuTGF5ZXJzLkV2ZW50LmlzTXVsdGlUb3VjaChhKSl7dGhpcy5waW5jaGluZz0hMDt2YXIgYj10aGlzLmdldFBpbmNoRGF0YShhKTt0aGlzLmNhbGxiYWNrKCJtb3ZlIixbYSxiXSk7dGhpcy5sYXN0PWI7T3BlbkxheWVycy5FdmVudC5zdG9wKGEpfWVsc2UgaWYodGhpcy5zdGFydGVkKXJldHVybiExO3JldHVybiEwfSx0b3VjaGVuZDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5zdGFydGVkJiYhT3BlbkxheWVycy5FdmVudC5pc011bHRpVG91Y2goYSk/KHRoaXMucGluY2hpbmc9dGhpcy5zdGFydGVkPSExLHRoaXMuY2FsbGJhY2soImRvbmUiLFthLHRoaXMuc3RhcnQsdGhpcy5sYXN0XSksdGhpcy5sYXN0PXRoaXMuc3RhcnQ9bnVsbCwhMSk6ITB9LGFjdGl2YXRlOmZ1bmN0aW9uKCl7dmFyIGE9ITE7T3BlbkxheWVycy5IYW5kbGVyLnByb3RvdHlwZS5hY3RpdmF0ZS5hcHBseSh0aGlzLGFyZ3VtZW50cykmJih0aGlzLnBpbmNoaW5nPSExLGE9ITApO3JldHVybiBhfSxkZWFjdGl2YXRlOmZ1bmN0aW9uKCl7dmFyIGE9CiExO09wZW5MYXllcnMuSGFuZGxlci5wcm90b3R5cGUuZGVhY3RpdmF0ZS5hcHBseSh0aGlzLGFyZ3VtZW50cykmJih0aGlzLnBpbmNoaW5nPXRoaXMuc3RhcnRlZD0hMSx0aGlzLmxhc3Q9dGhpcy5zdGFydD1udWxsLGE9ITApO3JldHVybiBhfSxnZXREaXN0YW5jZTpmdW5jdGlvbihhKXt2YXIgYj1hWzBdO2E9YVsxXTtyZXR1cm4gTWF0aC5zcXJ0KE1hdGgucG93KGIub2xDbGllbnRYLWEub2xDbGllbnRYLDIpK01hdGgucG93KGIub2xDbGllbnRZLWEub2xDbGllbnRZLDIpKX0sZ2V0UGluY2hEYXRhOmZ1bmN0aW9uKGEpe2E9dGhpcy5nZXREaXN0YW5jZShhLnRvdWNoZXMpO3JldHVybntkaXN0YW5jZTphLGRlbHRhOnRoaXMubGFzdC5kaXN0YW5jZS1hLHNjYWxlOmEvdGhpcy5zdGFydC5kaXN0YW5jZX19LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuSGFuZGxlci5QaW5jaCJ9KTtPcGVuTGF5ZXJzLkNvbnRyb2wuTmF2VG9vbGJhcj1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuQ29udHJvbC5QYW5lbCx7aW5pdGlhbGl6ZTpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLkNvbnRyb2wuUGFuZWwucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxbYV0pO3RoaXMuYWRkQ29udHJvbHMoW25ldyBPcGVuTGF5ZXJzLkNvbnRyb2wuTmF2aWdhdGlvbixuZXcgT3BlbkxheWVycy5Db250cm9sLlpvb21Cb3hdKX0sZHJhdzpmdW5jdGlvbigpe3ZhciBhPU9wZW5MYXllcnMuQ29udHJvbC5QYW5lbC5wcm90b3R5cGUuZHJhdy5hcHBseSh0aGlzLGFyZ3VtZW50cyk7bnVsbD09PXRoaXMuZGVmYXVsdENvbnRyb2wmJih0aGlzLmRlZmF1bHRDb250cm9sPXRoaXMuY29udHJvbHNbMF0pO3JldHVybiBhfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkNvbnRyb2wuTmF2VG9vbGJhciJ9KTtPcGVuTGF5ZXJzLlN0cmF0ZWd5LlJlZnJlc2g9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLlN0cmF0ZWd5LHtmb3JjZTohMSxpbnRlcnZhbDowLHRpbWVyOm51bGwsYWN0aXZhdGU6ZnVuY3Rpb24oKXt2YXIgYT1PcGVuTGF5ZXJzLlN0cmF0ZWd5LnByb3RvdHlwZS5hY3RpdmF0ZS5jYWxsKHRoaXMpO2EmJighMD09PXRoaXMubGF5ZXIudmlzaWJpbGl0eSYmdGhpcy5zdGFydCgpLHRoaXMubGF5ZXIuZXZlbnRzLm9uKHt2aXNpYmlsaXR5Y2hhbmdlZDp0aGlzLnJlc2V0LHNjb3BlOnRoaXN9KSk7cmV0dXJuIGF9LGRlYWN0aXZhdGU6ZnVuY3Rpb24oKXt2YXIgYT1PcGVuTGF5ZXJzLlN0cmF0ZWd5LnByb3RvdHlwZS5kZWFjdGl2YXRlLmNhbGwodGhpcyk7YSYmKHRoaXMuc3RvcCgpLHRoaXMubGF5ZXIuZXZlbnRzLnVuKHt2aXNpYmlsaXR5Y2hhbmdlZDp0aGlzLnJlc2V0LHNjb3BlOnRoaXN9KSk7cmV0dXJuIGF9LHJlc2V0OmZ1bmN0aW9uKCl7ITA9PT10aGlzLmxheWVyLnZpc2liaWxpdHk/CnRoaXMuc3RhcnQoKTp0aGlzLnN0b3AoKX0sc3RhcnQ6ZnVuY3Rpb24oKXt0aGlzLmludGVydmFsJiYoIm51bWJlciI9PT10eXBlb2YgdGhpcy5pbnRlcnZhbCYmMDx0aGlzLmludGVydmFsKSYmKHRoaXMudGltZXI9d2luZG93LnNldEludGVydmFsKE9wZW5MYXllcnMuRnVuY3Rpb24uYmluZCh0aGlzLnJlZnJlc2gsdGhpcyksdGhpcy5pbnRlcnZhbCkpfSxyZWZyZXNoOmZ1bmN0aW9uKCl7dGhpcy5sYXllciYmKHRoaXMubGF5ZXIucmVmcmVzaCYmImZ1bmN0aW9uIj09dHlwZW9mIHRoaXMubGF5ZXIucmVmcmVzaCkmJnRoaXMubGF5ZXIucmVmcmVzaCh7Zm9yY2U6dGhpcy5mb3JjZX0pfSxzdG9wOmZ1bmN0aW9uKCl7bnVsbCE9PXRoaXMudGltZXImJih3aW5kb3cuY2xlYXJJbnRlcnZhbCh0aGlzLnRpbWVyKSx0aGlzLnRpbWVyPW51bGwpfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLlN0cmF0ZWd5LlJlZnJlc2gifSk7T3BlbkxheWVycy5MYXllci5BcmNHSVM5M1Jlc3Q9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkxheWVyLkdyaWQse0RFRkFVTFRfUEFSQU1TOntmb3JtYXQ6InBuZyJ9LGlzQmFzZUxheWVyOiEwLGluaXRpYWxpemU6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9W107Yz1PcGVuTGF5ZXJzLlV0aWwudXBwZXJDYXNlT2JqZWN0KGMpO2UucHVzaChhLGIsYyxkKTtPcGVuTGF5ZXJzLkxheWVyLkdyaWQucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxlKTtPcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyh0aGlzLnBhcmFtcyxPcGVuTGF5ZXJzLlV0aWwudXBwZXJDYXNlT2JqZWN0KHRoaXMuREVGQVVMVF9QQVJBTVMpKTt0aGlzLnBhcmFtcy5UUkFOU1BBUkVOVCYmInRydWUiPT10aGlzLnBhcmFtcy5UUkFOU1BBUkVOVC50b1N0cmluZygpLnRvTG93ZXJDYXNlKCkmJihudWxsIT1kJiZkLmlzQmFzZUxheWVyfHwodGhpcy5pc0Jhc2VMYXllcj0hMSksImpwZyI9PXRoaXMucGFyYW1zLkZPUk1BVCYmCih0aGlzLnBhcmFtcy5GT1JNQVQ9T3BlbkxheWVycy5VdGlsLmFscGhhSGFjaygpPyJnaWYiOiJwbmciKSl9LGNsb25lOmZ1bmN0aW9uKGEpe251bGw9PWEmJihhPW5ldyBPcGVuTGF5ZXJzLkxheWVyLkFyY0dJUzkzUmVzdCh0aGlzLm5hbWUsdGhpcy51cmwsdGhpcy5wYXJhbXMsdGhpcy5nZXRPcHRpb25zKCkpKTtyZXR1cm4gYT1PcGVuTGF5ZXJzLkxheWVyLkdyaWQucHJvdG90eXBlLmNsb25lLmFwcGx5KHRoaXMsW2FdKX0sZ2V0VVJMOmZ1bmN0aW9uKGEpe2E9dGhpcy5hZGp1c3RCb3VuZHMoYSk7dmFyIGI9dGhpcy5wcm9qZWN0aW9uLmdldENvZGUoKS5zcGxpdCgiOiIpLGI9YltiLmxlbmd0aC0xXSxjPXRoaXMuZ2V0SW1hZ2VTaXplKCk7YT17QkJPWDphLnRvQkJPWCgpLFNJWkU6Yy53KyIsIitjLmgsRjoiaW1hZ2UiLEJCT1hTUjpiLElNQUdFU1I6Yn07aWYodGhpcy5sYXllckRlZnMpe3ZhciBiPVtdLGQ7Zm9yKGQgaW4gdGhpcy5sYXllckRlZnMpdGhpcy5sYXllckRlZnMuaGFzT3duUHJvcGVydHkoZCkmJgp0aGlzLmxheWVyRGVmc1tkXSYmKGIucHVzaChkKSxiLnB1c2goIjoiKSxiLnB1c2godGhpcy5sYXllckRlZnNbZF0pLGIucHVzaCgiOyIpKTswPGIubGVuZ3RoJiYoYS5MQVlFUkRFRlM9Yi5qb2luKCIiKSl9cmV0dXJuIHRoaXMuZ2V0RnVsbFJlcXVlc3RTdHJpbmcoYSl9LHNldExheWVyRmlsdGVyOmZ1bmN0aW9uKGEsYil7dGhpcy5sYXllckRlZnN8fCh0aGlzLmxheWVyRGVmcz17fSk7Yj90aGlzLmxheWVyRGVmc1thXT1iOmRlbGV0ZSB0aGlzLmxheWVyRGVmc1thXX0sY2xlYXJMYXllckZpbHRlcjpmdW5jdGlvbihhKXthP2RlbGV0ZSB0aGlzLmxheWVyRGVmc1thXTpkZWxldGUgdGhpcy5sYXllckRlZnN9LG1lcmdlTmV3UGFyYW1zOmZ1bmN0aW9uKGEpe2E9W09wZW5MYXllcnMuVXRpbC51cHBlckNhc2VPYmplY3QoYSldO3JldHVybiBPcGVuTGF5ZXJzLkxheWVyLkdyaWQucHJvdG90eXBlLm1lcmdlTmV3UGFyYW1zLmFwcGx5KHRoaXMsYSl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuTGF5ZXIuQXJjR0lTOTNSZXN0In0pO09wZW5MYXllcnMuSGFuZGxlci5Ib3Zlcj1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuSGFuZGxlcix7ZGVsYXk6NTAwLHBpeGVsVG9sZXJhbmNlOm51bGwsc3RvcE1vdmU6ITEscHg6bnVsbCx0aW1lcklkOm51bGwsbW91c2Vtb3ZlOmZ1bmN0aW9uKGEpe3RoaXMucGFzc2VzVG9sZXJhbmNlKGEueHkpJiYodGhpcy5jbGVhclRpbWVyKCksdGhpcy5jYWxsYmFjaygibW92ZSIsW2FdKSx0aGlzLnB4PWEueHksYT1PcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHt9LGEpLHRoaXMudGltZXJJZD13aW5kb3cuc2V0VGltZW91dChPcGVuTGF5ZXJzLkZ1bmN0aW9uLmJpbmQodGhpcy5kZWxheWVkQ2FsbCx0aGlzLGEpLHRoaXMuZGVsYXkpKTtyZXR1cm4hdGhpcy5zdG9wTW92ZX0sbW91c2VvdXQ6ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5VdGlsLm1vdXNlTGVmdChhLHRoaXMubWFwLnZpZXdQb3J0RGl2KSYmKHRoaXMuY2xlYXJUaW1lcigpLHRoaXMuY2FsbGJhY2soIm1vdmUiLFthXSkpO3JldHVybiEwfSwKcGFzc2VzVG9sZXJhbmNlOmZ1bmN0aW9uKGEpe3ZhciBiPSEwO3RoaXMucGl4ZWxUb2xlcmFuY2UmJnRoaXMucHgmJk1hdGguc3FydChNYXRoLnBvdyh0aGlzLnB4LngtYS54LDIpK01hdGgucG93KHRoaXMucHgueS1hLnksMikpPHRoaXMucGl4ZWxUb2xlcmFuY2UmJihiPSExKTtyZXR1cm4gYn0sY2xlYXJUaW1lcjpmdW5jdGlvbigpe251bGwhPXRoaXMudGltZXJJZCYmKHdpbmRvdy5jbGVhclRpbWVvdXQodGhpcy50aW1lcklkKSx0aGlzLnRpbWVySWQ9bnVsbCl9LGRlbGF5ZWRDYWxsOmZ1bmN0aW9uKGEpe3RoaXMuY2FsbGJhY2soInBhdXNlIixbYV0pfSxkZWFjdGl2YXRlOmZ1bmN0aW9uKCl7dmFyIGE9ITE7T3BlbkxheWVycy5IYW5kbGVyLnByb3RvdHlwZS5kZWFjdGl2YXRlLmFwcGx5KHRoaXMsYXJndW1lbnRzKSYmKHRoaXMuY2xlYXJUaW1lcigpLGE9ITApO3JldHVybiBhfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkhhbmRsZXIuSG92ZXIifSk7T3BlbkxheWVycy5Db250cm9sLkdldEZlYXR1cmU9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkNvbnRyb2wse3Byb3RvY29sOm51bGwsbXVsdGlwbGVLZXk6bnVsbCx0b2dnbGVLZXk6bnVsbCxtb2RpZmllcnM6bnVsbCxtdWx0aXBsZTohMSxjbGljazohMCxzaW5nbGU6ITAsY2xpY2tvdXQ6ITAsdG9nZ2xlOiExLGNsaWNrVG9sZXJhbmNlOjUsaG92ZXI6ITEsYm94OiExLG1heEZlYXR1cmVzOjEwLGZlYXR1cmVzOm51bGwsaG92ZXJGZWF0dXJlOm51bGwsaGFuZGxlcnM6bnVsbCxob3ZlclJlc3BvbnNlOm51bGwsZmlsdGVyVHlwZTpPcGVuTGF5ZXJzLkZpbHRlci5TcGF0aWFsLkJCT1gsaW5pdGlhbGl6ZTpmdW5jdGlvbihhKXthLmhhbmRsZXJPcHRpb25zPWEuaGFuZGxlck9wdGlvbnN8fHt9O09wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLFthXSk7dGhpcy5mZWF0dXJlcz17fTt0aGlzLmhhbmRsZXJzPXt9O3RoaXMuY2xpY2smJih0aGlzLmhhbmRsZXJzLmNsaWNrPQpuZXcgT3BlbkxheWVycy5IYW5kbGVyLkNsaWNrKHRoaXMse2NsaWNrOnRoaXMuc2VsZWN0Q2xpY2t9LHRoaXMuaGFuZGxlck9wdGlvbnMuY2xpY2t8fHt9KSk7dGhpcy5ib3gmJih0aGlzLmhhbmRsZXJzLmJveD1uZXcgT3BlbkxheWVycy5IYW5kbGVyLkJveCh0aGlzLHtkb25lOnRoaXMuc2VsZWN0Qm94fSxPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHRoaXMuaGFuZGxlck9wdGlvbnMuYm94LHtib3hEaXZDbGFzc05hbWU6Im9sSGFuZGxlckJveFNlbGVjdEZlYXR1cmUifSkpKTt0aGlzLmhvdmVyJiYodGhpcy5oYW5kbGVycy5ob3Zlcj1uZXcgT3BlbkxheWVycy5IYW5kbGVyLkhvdmVyKHRoaXMse21vdmU6dGhpcy5jYW5jZWxIb3ZlcixwYXVzZTp0aGlzLnNlbGVjdEhvdmVyfSxPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHRoaXMuaGFuZGxlck9wdGlvbnMuaG92ZXIse2RlbGF5OjI1MCxwaXhlbFRvbGVyYW5jZToyfSkpKX0sYWN0aXZhdGU6ZnVuY3Rpb24oKXtpZighdGhpcy5hY3RpdmUpZm9yKHZhciBhIGluIHRoaXMuaGFuZGxlcnMpdGhpcy5oYW5kbGVyc1thXS5hY3RpdmF0ZSgpOwpyZXR1cm4gT3BlbkxheWVycy5Db250cm9sLnByb3RvdHlwZS5hY3RpdmF0ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGRlYWN0aXZhdGU6ZnVuY3Rpb24oKXtpZih0aGlzLmFjdGl2ZSlmb3IodmFyIGEgaW4gdGhpcy5oYW5kbGVycyl0aGlzLmhhbmRsZXJzW2FdLmRlYWN0aXZhdGUoKTtyZXR1cm4gT3BlbkxheWVycy5Db250cm9sLnByb3RvdHlwZS5kZWFjdGl2YXRlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sc2VsZWN0Q2xpY2s6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5waXhlbFRvQm91bmRzKGEueHkpO3RoaXMuc2V0TW9kaWZpZXJzKGEpO3RoaXMucmVxdWVzdChiLHtzaW5nbGU6dGhpcy5zaW5nbGV9KX0sc2VsZWN0Qm94OmZ1bmN0aW9uKGEpe3ZhciBiO2lmKGEgaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLkJvdW5kcyliPXRoaXMubWFwLmdldExvbkxhdEZyb21QaXhlbCh7eDphLmxlZnQseTphLmJvdHRvbX0pLGE9dGhpcy5tYXAuZ2V0TG9uTGF0RnJvbVBpeGVsKHt4OmEucmlnaHQsCnk6YS50b3B9KSxiPW5ldyBPcGVuTGF5ZXJzLkJvdW5kcyhiLmxvbixiLmxhdCxhLmxvbixhLmxhdCk7ZWxzZXtpZih0aGlzLmNsaWNrKXJldHVybjtiPXRoaXMucGl4ZWxUb0JvdW5kcyhhKX10aGlzLnNldE1vZGlmaWVycyh0aGlzLmhhbmRsZXJzLmJveC5kcmFnSGFuZGxlci5ldnQpO3RoaXMucmVxdWVzdChiKX0sc2VsZWN0SG92ZXI6ZnVuY3Rpb24oYSl7YT10aGlzLnBpeGVsVG9Cb3VuZHMoYS54eSk7dGhpcy5yZXF1ZXN0KGEse3NpbmdsZTohMCxob3ZlcjohMH0pfSxjYW5jZWxIb3ZlcjpmdW5jdGlvbigpe3RoaXMuaG92ZXJSZXNwb25zZSYmKHRoaXMucHJvdG9jb2wuYWJvcnQodGhpcy5ob3ZlclJlc3BvbnNlKSx0aGlzLmhvdmVyUmVzcG9uc2U9bnVsbCxPcGVuTGF5ZXJzLkVsZW1lbnQucmVtb3ZlQ2xhc3ModGhpcy5tYXAudmlld1BvcnREaXYsIm9sQ3Vyc29yV2FpdCIpKX0scmVxdWVzdDpmdW5jdGlvbihhLGIpe2I9Ynx8e307dmFyIGM9bmV3IE9wZW5MYXllcnMuRmlsdGVyLlNwYXRpYWwoe3R5cGU6dGhpcy5maWx0ZXJUeXBlLAp2YWx1ZTphfSk7T3BlbkxheWVycy5FbGVtZW50LmFkZENsYXNzKHRoaXMubWFwLnZpZXdQb3J0RGl2LCJvbEN1cnNvcldhaXQiKTtjPXRoaXMucHJvdG9jb2wucmVhZCh7bWF4RmVhdHVyZXM6ITA9PWIuc2luZ2xlP3RoaXMubWF4RmVhdHVyZXM6dm9pZCAwLGZpbHRlcjpjLGNhbGxiYWNrOmZ1bmN0aW9uKGMpe2Muc3VjY2VzcygpJiYoYy5mZWF0dXJlcy5sZW5ndGg/ITA9PWIuc2luZ2xlP3RoaXMuc2VsZWN0QmVzdEZlYXR1cmUoYy5mZWF0dXJlcyxhLmdldENlbnRlckxvbkxhdCgpLGIpOnRoaXMuc2VsZWN0KGMuZmVhdHVyZXMpOmIuaG92ZXI/dGhpcy5ob3ZlclNlbGVjdCgpOih0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoImNsaWNrb3V0IiksdGhpcy5jbGlja291dCYmdGhpcy51bnNlbGVjdEFsbCgpKSk7T3BlbkxheWVycy5FbGVtZW50LnJlbW92ZUNsYXNzKHRoaXMubWFwLnZpZXdQb3J0RGl2LCJvbEN1cnNvcldhaXQiKX0sc2NvcGU6dGhpc30pOyEwPT1iLmhvdmVyJiYodGhpcy5ob3ZlclJlc3BvbnNlPQpjKX0sc2VsZWN0QmVzdEZlYXR1cmU6ZnVuY3Rpb24oYSxiLGMpe2M9Y3x8e307aWYoYS5sZW5ndGgpe2I9bmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoYi5sb24sYi5sYXQpO2Zvcih2YXIgZCxlLGYsZz1OdW1iZXIuTUFYX1ZBTFVFLGg9MDtoPGEubGVuZ3RoJiYhKGQ9YVtoXSxkLmdlb21ldHJ5JiYoZj1iLmRpc3RhbmNlVG8oZC5nZW9tZXRyeSx7ZWRnZTohMX0pLGY8ZyYmKGc9ZixlPWQsMD09ZykpKTsrK2gpOyEwPT1jLmhvdmVyP3RoaXMuaG92ZXJTZWxlY3QoZSk6dGhpcy5zZWxlY3QoZXx8YSl9fSxzZXRNb2RpZmllcnM6ZnVuY3Rpb24oYSl7dGhpcy5tb2RpZmllcnM9e211bHRpcGxlOnRoaXMubXVsdGlwbGV8fHRoaXMubXVsdGlwbGVLZXkmJmFbdGhpcy5tdWx0aXBsZUtleV0sdG9nZ2xlOnRoaXMudG9nZ2xlfHx0aGlzLnRvZ2dsZUtleSYmYVt0aGlzLnRvZ2dsZUtleV19fSxzZWxlY3Q6ZnVuY3Rpb24oYSl7dGhpcy5tb2RpZmllcnMubXVsdGlwbGV8fHRoaXMubW9kaWZpZXJzLnRvZ2dsZXx8CnRoaXMudW5zZWxlY3RBbGwoKTtPcGVuTGF5ZXJzLlV0aWwuaXNBcnJheShhKXx8KGE9W2FdKTt2YXIgYj10aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoImJlZm9yZWZlYXR1cmVzc2VsZWN0ZWQiLHtmZWF0dXJlczphfSk7aWYoITEhPT1iKXtmb3IodmFyIGM9W10sZCxlPTAsZj1hLmxlbmd0aDtlPGY7KytlKWQ9YVtlXSx0aGlzLmZlYXR1cmVzW2QuZmlkfHxkLmlkXT90aGlzLm1vZGlmaWVycy50b2dnbGUmJnRoaXMudW5zZWxlY3QodGhpcy5mZWF0dXJlc1tkLmZpZHx8ZC5pZF0pOihiPXRoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgiYmVmb3JlZmVhdHVyZXNlbGVjdGVkIix7ZmVhdHVyZTpkfSksITEhPT1iJiYodGhpcy5mZWF0dXJlc1tkLmZpZHx8ZC5pZF09ZCxjLnB1c2goZCksdGhpcy5ldmVudHMudHJpZ2dlckV2ZW50KCJmZWF0dXJlc2VsZWN0ZWQiLHtmZWF0dXJlOmR9KSkpO3RoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgiZmVhdHVyZXNzZWxlY3RlZCIse2ZlYXR1cmVzOmN9KX19LApob3ZlclNlbGVjdDpmdW5jdGlvbihhKXt2YXIgYj1hP2EuZmlkfHxhLmlkOm51bGwsYz10aGlzLmhvdmVyRmVhdHVyZT90aGlzLmhvdmVyRmVhdHVyZS5maWR8fHRoaXMuaG92ZXJGZWF0dXJlLmlkOm51bGw7YyYmYyE9YiYmKHRoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgib3V0ZmVhdHVyZSIse2ZlYXR1cmU6dGhpcy5ob3ZlckZlYXR1cmV9KSx0aGlzLmhvdmVyRmVhdHVyZT1udWxsKTtiJiZiIT1jJiYodGhpcy5ldmVudHMudHJpZ2dlckV2ZW50KCJob3ZlcmZlYXR1cmUiLHtmZWF0dXJlOmF9KSx0aGlzLmhvdmVyRmVhdHVyZT1hKX0sdW5zZWxlY3Q6ZnVuY3Rpb24oYSl7ZGVsZXRlIHRoaXMuZmVhdHVyZXNbYS5maWR8fGEuaWRdO3RoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgiZmVhdHVyZXVuc2VsZWN0ZWQiLHtmZWF0dXJlOmF9KX0sdW5zZWxlY3RBbGw6ZnVuY3Rpb24oKXtmb3IodmFyIGEgaW4gdGhpcy5mZWF0dXJlcyl0aGlzLnVuc2VsZWN0KHRoaXMuZmVhdHVyZXNbYV0pfSwKc2V0TWFwOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYiBpbiB0aGlzLmhhbmRsZXJzKXRoaXMuaGFuZGxlcnNbYl0uc2V0TWFwKGEpO09wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuc2V0TWFwLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0scGl4ZWxUb0JvdW5kczpmdW5jdGlvbihhKXt2YXIgYj1hLmFkZCgtdGhpcy5jbGlja1RvbGVyYW5jZS8yLHRoaXMuY2xpY2tUb2xlcmFuY2UvMik7YT1hLmFkZCh0aGlzLmNsaWNrVG9sZXJhbmNlLzIsLXRoaXMuY2xpY2tUb2xlcmFuY2UvMik7Yj10aGlzLm1hcC5nZXRMb25MYXRGcm9tUGl4ZWwoYik7YT10aGlzLm1hcC5nZXRMb25MYXRGcm9tUGl4ZWwoYSk7cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLkJvdW5kcyhiLmxvbixiLmxhdCxhLmxvbixhLmxhdCl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuQ29udHJvbC5HZXRGZWF0dXJlIn0pO09wZW5MYXllcnMuRm9ybWF0LlF1ZXJ5U3RyaW5nRmlsdGVyPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhKXthPWEucmVwbGFjZSgvJS9nLCJcXCUiKTthPWEucmVwbGFjZSgvXFxcXFwuKFwqKT8vZyxmdW5jdGlvbihhLGIpe3JldHVybiBiP2E6IlxcXFxfIn0pO2E9YS5yZXBsYWNlKC9cXFxcXC5cKi9nLCJcXFxcJSIpO2E9YS5yZXBsYWNlKC8oXFwpP1wuKFwqKT8vZyxmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGJ8fGM/YToiXyJ9KTthPWEucmVwbGFjZSgvKFxcKT9cLlwqL2csZnVuY3Rpb24oYSxiKXtyZXR1cm4gYj9hOiIlIn0pO2E9YS5yZXBsYWNlKC9cXFwuL2csIi4iKTtyZXR1cm4gYT1hLnJlcGxhY2UoLyhcXCk/XFxcKi9nLGZ1bmN0aW9uKGEsYil7cmV0dXJuIGI/YToiKiJ9KX12YXIgYj17fTtiW09wZW5MYXllcnMuRmlsdGVyLkNvbXBhcmlzb24uRVFVQUxfVE9dPSJlcSI7YltPcGVuTGF5ZXJzLkZpbHRlci5Db21wYXJpc29uLk5PVF9FUVVBTF9UT109Im5lIjtiW09wZW5MYXllcnMuRmlsdGVyLkNvbXBhcmlzb24uTEVTU19USEFOXT0KImx0IjtiW09wZW5MYXllcnMuRmlsdGVyLkNvbXBhcmlzb24uTEVTU19USEFOX09SX0VRVUFMX1RPXT0ibHRlIjtiW09wZW5MYXllcnMuRmlsdGVyLkNvbXBhcmlzb24uR1JFQVRFUl9USEFOXT0iZ3QiO2JbT3BlbkxheWVycy5GaWx0ZXIuQ29tcGFyaXNvbi5HUkVBVEVSX1RIQU5fT1JfRVFVQUxfVE9dPSJndGUiO2JbT3BlbkxheWVycy5GaWx0ZXIuQ29tcGFyaXNvbi5MSUtFXT0iaWxpa2UiO3JldHVybiBPcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuRm9ybWF0LHt3aWxkY2FyZGVkOiExLHNyc0luQkJPWDohMSx3cml0ZTpmdW5jdGlvbihjLGQpe2Q9ZHx8e307dmFyIGU9Yy5DTEFTU19OQU1FLGU9ZS5zdWJzdHJpbmcoZS5sYXN0SW5kZXhPZigiLiIpKzEpO3N3aXRjaChlKXtjYXNlICJTcGF0aWFsIjpzd2l0Y2goYy50eXBlKXtjYXNlIE9wZW5MYXllcnMuRmlsdGVyLlNwYXRpYWwuQkJPWDpkLmJib3g9Yy52YWx1ZS50b0FycmF5KCk7dGhpcy5zcnNJbkJCT1gmJmMucHJvamVjdGlvbiYmCmQuYmJveC5wdXNoKGMucHJvamVjdGlvbi5nZXRDb2RlKCkpO2JyZWFrO2Nhc2UgT3BlbkxheWVycy5GaWx0ZXIuU3BhdGlhbC5EV0lUSElOOmQudG9sZXJhbmNlPWMuZGlzdGFuY2U7Y2FzZSBPcGVuTGF5ZXJzLkZpbHRlci5TcGF0aWFsLldJVEhJTjpkLmxvbj1jLnZhbHVlLng7ZC5sYXQ9Yy52YWx1ZS55O2JyZWFrO2RlZmF1bHQ6T3BlbkxheWVycy5Db25zb2xlLndhcm4oIlVua25vd24gc3BhdGlhbCBmaWx0ZXIgdHlwZSAiK2MudHlwZSl9YnJlYWs7Y2FzZSAiQ29tcGFyaXNvbiI6ZT1iW2MudHlwZV07aWYodm9pZCAwIT09ZSl7dmFyIGY9Yy52YWx1ZTtjLnR5cGU9PU9wZW5MYXllcnMuRmlsdGVyLkNvbXBhcmlzb24uTElLRSYmKGY9YShmKSx0aGlzLndpbGRjYXJkZWQmJihmPSIlIitmKyIlIikpO2RbYy5wcm9wZXJ0eSsiX18iK2VdPWY7ZC5xdWVyeWFibGU9ZC5xdWVyeWFibGV8fFtdO2QucXVlcnlhYmxlLnB1c2goYy5wcm9wZXJ0eSl9ZWxzZSBPcGVuTGF5ZXJzLkNvbnNvbGUud2FybigiVW5rbm93biBjb21wYXJpc29uIGZpbHRlciB0eXBlICIrCmMudHlwZSk7YnJlYWs7Y2FzZSAiTG9naWNhbCI6aWYoYy50eXBlPT09T3BlbkxheWVycy5GaWx0ZXIuTG9naWNhbC5BTkQpZm9yKGU9MCxmPWMuZmlsdGVycy5sZW5ndGg7ZTxmO2UrKylkPXRoaXMud3JpdGUoYy5maWx0ZXJzW2VdLGQpO2Vsc2UgT3BlbkxheWVycy5Db25zb2xlLndhcm4oIlVuc3VwcG9ydGVkIGxvZ2ljYWwgZmlsdGVyIHR5cGUgIitjLnR5cGUpO2JyZWFrO2RlZmF1bHQ6T3BlbkxheWVycy5Db25zb2xlLndhcm4oIlVua25vd24gZmlsdGVyIHR5cGUgIitlKX1yZXR1cm4gZH0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Gb3JtYXQuUXVlcnlTdHJpbmdGaWx0ZXIifSl9KCk7T3BlbkxheWVycy5Db250cm9sLk1vdXNlUG9zaXRpb249T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkNvbnRyb2wse2F1dG9BY3RpdmF0ZTohMCxlbGVtZW50Om51bGwscHJlZml4OiIiLHNlcGFyYXRvcjoiLCAiLHN1ZmZpeDoiIixudW1EaWdpdHM6NSxncmFudWxhcml0eToxMCxlbXB0eVN0cmluZzpudWxsLGxhc3RYeTpudWxsLGRpc3BsYXlQcm9qZWN0aW9uOm51bGwsZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuZGVhY3RpdmF0ZSgpO09wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuZGVzdHJveS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGFjdGl2YXRlOmZ1bmN0aW9uKCl7cmV0dXJuIE9wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuYWN0aXZhdGUuYXBwbHkodGhpcyxhcmd1bWVudHMpPyh0aGlzLm1hcC5ldmVudHMucmVnaXN0ZXIoIm1vdXNlbW92ZSIsdGhpcyx0aGlzLnJlZHJhdyksdGhpcy5tYXAuZXZlbnRzLnJlZ2lzdGVyKCJtb3VzZW91dCIsdGhpcyx0aGlzLnJlc2V0KSwKdGhpcy5yZWRyYXcoKSwhMCk6ITF9LGRlYWN0aXZhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gT3BlbkxheWVycy5Db250cm9sLnByb3RvdHlwZS5kZWFjdGl2YXRlLmFwcGx5KHRoaXMsYXJndW1lbnRzKT8odGhpcy5tYXAuZXZlbnRzLnVucmVnaXN0ZXIoIm1vdXNlbW92ZSIsdGhpcyx0aGlzLnJlZHJhdyksdGhpcy5tYXAuZXZlbnRzLnVucmVnaXN0ZXIoIm1vdXNlb3V0Iix0aGlzLHRoaXMucmVzZXQpLHRoaXMuZWxlbWVudC5pbm5lckhUTUw9IiIsITApOiExfSxkcmF3OmZ1bmN0aW9uKCl7T3BlbkxheWVycy5Db250cm9sLnByb3RvdHlwZS5kcmF3LmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLmVsZW1lbnR8fCh0aGlzLmRpdi5sZWZ0PSIiLHRoaXMuZGl2LnRvcD0iIix0aGlzLmVsZW1lbnQ9dGhpcy5kaXYpO3JldHVybiB0aGlzLmRpdn0scmVkcmF3OmZ1bmN0aW9uKGEpe3ZhciBiO2lmKG51bGw9PWEpdGhpcy5yZXNldCgpO2Vsc2UgaWYobnVsbD09dGhpcy5sYXN0WHl8fE1hdGguYWJzKGEueHkueC0KdGhpcy5sYXN0WHkueCk+dGhpcy5ncmFudWxhcml0eXx8TWF0aC5hYnMoYS54eS55LXRoaXMubGFzdFh5LnkpPnRoaXMuZ3JhbnVsYXJpdHkpdGhpcy5sYXN0WHk9YS54eTtlbHNlIGlmKGI9dGhpcy5tYXAuZ2V0TG9uTGF0RnJvbVBpeGVsKGEueHkpKXRoaXMuZGlzcGxheVByb2plY3Rpb24mJmIudHJhbnNmb3JtKHRoaXMubWFwLmdldFByb2plY3Rpb25PYmplY3QoKSx0aGlzLmRpc3BsYXlQcm9qZWN0aW9uKSx0aGlzLmxhc3RYeT1hLnh5LGE9dGhpcy5mb3JtYXRPdXRwdXQoYiksYSE9dGhpcy5lbGVtZW50LmlubmVySFRNTCYmKHRoaXMuZWxlbWVudC5pbm5lckhUTUw9YSl9LHJlc2V0OmZ1bmN0aW9uKGEpe251bGwhPXRoaXMuZW1wdHlTdHJpbmcmJih0aGlzLmVsZW1lbnQuaW5uZXJIVE1MPXRoaXMuZW1wdHlTdHJpbmcpfSxmb3JtYXRPdXRwdXQ6ZnVuY3Rpb24oYSl7dmFyIGI9cGFyc2VJbnQodGhpcy5udW1EaWdpdHMpO3JldHVybiB0aGlzLnByZWZpeCthLmxvbi50b0ZpeGVkKGIpKwp0aGlzLnNlcGFyYXRvcithLmxhdC50b0ZpeGVkKGIpK3RoaXMuc3VmZml4fSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkNvbnRyb2wuTW91c2VQb3NpdGlvbiJ9KTtPcGVuTGF5ZXJzLkNvbnRyb2wuR2VvbG9jYXRlPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Db250cm9sLHtnZW9sb2NhdGlvbjpudWxsLGF2YWlsYWJsZToiZ2VvbG9jYXRpb24iaW4gbmF2aWdhdG9yLGJpbmQ6ITAsd2F0Y2g6ITEsZ2VvbG9jYXRpb25PcHRpb25zOm51bGwsZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuZGVhY3RpdmF0ZSgpO09wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuZGVzdHJveS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGFjdGl2YXRlOmZ1bmN0aW9uKCl7dGhpcy5hdmFpbGFibGUmJiF0aGlzLmdlb2xvY2F0aW9uJiYodGhpcy5nZW9sb2NhdGlvbj1uYXZpZ2F0b3IuZ2VvbG9jYXRpb24pO3JldHVybiB0aGlzLmdlb2xvY2F0aW9uP09wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuYWN0aXZhdGUuYXBwbHkodGhpcyxhcmd1bWVudHMpPyh0aGlzLndhdGNoP3RoaXMud2F0Y2hJZD10aGlzLmdlb2xvY2F0aW9uLndhdGNoUG9zaXRpb24oT3BlbkxheWVycy5GdW5jdGlvbi5iaW5kKHRoaXMuZ2VvbG9jYXRlLAp0aGlzKSxPcGVuTGF5ZXJzLkZ1bmN0aW9uLmJpbmQodGhpcy5mYWlsdXJlLHRoaXMpLHRoaXMuZ2VvbG9jYXRpb25PcHRpb25zKTp0aGlzLmdldEN1cnJlbnRMb2NhdGlvbigpLCEwKTohMToodGhpcy5ldmVudHMudHJpZ2dlckV2ZW50KCJsb2NhdGlvbnVuY2FwYWJsZSIpLCExKX0sZGVhY3RpdmF0ZTpmdW5jdGlvbigpe3RoaXMuYWN0aXZlJiZudWxsIT09dGhpcy53YXRjaElkJiZ0aGlzLmdlb2xvY2F0aW9uLmNsZWFyV2F0Y2godGhpcy53YXRjaElkKTtyZXR1cm4gT3BlbkxheWVycy5Db250cm9sLnByb3RvdHlwZS5kZWFjdGl2YXRlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sZ2VvbG9jYXRlOmZ1bmN0aW9uKGEpe3ZhciBiPShuZXcgT3BlbkxheWVycy5Mb25MYXQoYS5jb29yZHMubG9uZ2l0dWRlLGEuY29vcmRzLmxhdGl0dWRlKSkudHJhbnNmb3JtKG5ldyBPcGVuTGF5ZXJzLlByb2plY3Rpb24oIkVQU0c6NDMyNiIpLHRoaXMubWFwLmdldFByb2plY3Rpb25PYmplY3QoKSk7dGhpcy5iaW5kJiYKdGhpcy5tYXAuc2V0Q2VudGVyKGIpO3RoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgibG9jYXRpb251cGRhdGVkIix7cG9zaXRpb246YSxwb2ludDpuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludChiLmxvbixiLmxhdCl9KX0sZ2V0Q3VycmVudExvY2F0aW9uOmZ1bmN0aW9uKCl7aWYoIXRoaXMuYWN0aXZlfHx0aGlzLndhdGNoKXJldHVybiExO3RoaXMuZ2VvbG9jYXRpb24uZ2V0Q3VycmVudFBvc2l0aW9uKE9wZW5MYXllcnMuRnVuY3Rpb24uYmluZCh0aGlzLmdlb2xvY2F0ZSx0aGlzKSxPcGVuTGF5ZXJzLkZ1bmN0aW9uLmJpbmQodGhpcy5mYWlsdXJlLHRoaXMpLHRoaXMuZ2VvbG9jYXRpb25PcHRpb25zKTtyZXR1cm4hMH0sZmFpbHVyZTpmdW5jdGlvbihhKXt0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoImxvY2F0aW9uZmFpbGVkIix7ZXJyb3I6YX0pfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkNvbnRyb2wuR2VvbG9jYXRlIn0pO09wZW5MYXllcnMuVGlsZS5VVEZHcmlkPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5UaWxlLHt1cmw6bnVsbCx1dGZncmlkUmVzb2x1dGlvbjoyLGpzb246bnVsbCxmb3JtYXQ6bnVsbCxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5jbGVhcigpO09wZW5MYXllcnMuVGlsZS5wcm90b3R5cGUuZGVzdHJveS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGRyYXc6ZnVuY3Rpb24oKXt2YXIgYT1PcGVuTGF5ZXJzLlRpbGUucHJvdG90eXBlLmRyYXcuYXBwbHkodGhpcyxhcmd1bWVudHMpO2lmKGEpaWYodGhpcy5pc0xvYWRpbmc/KHRoaXMuYWJvcnRMb2FkaW5nKCksdGhpcy5ldmVudHMudHJpZ2dlckV2ZW50KCJyZWxvYWQiKSk6KHRoaXMuaXNMb2FkaW5nPSEwLHRoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgibG9hZHN0YXJ0IikpLHRoaXMudXJsPXRoaXMubGF5ZXIuZ2V0VVJMKHRoaXMuYm91bmRzKSx0aGlzLmxheWVyLnVzZUpTT05QKXt2YXIgYj1uZXcgT3BlbkxheWVycy5Qcm90b2NvbC5TY3JpcHQoe3VybDp0aGlzLnVybCwKY2FsbGJhY2s6ZnVuY3Rpb24oYSl7dGhpcy5pc0xvYWRpbmc9ITE7dGhpcy5ldmVudHMudHJpZ2dlckV2ZW50KCJsb2FkZW5kIik7dGhpcy5qc29uPWEuZGF0YX0sc2NvcGU6dGhpc30pO2IucmVhZCgpO3RoaXMucmVxdWVzdD1ifWVsc2UgdGhpcy5yZXF1ZXN0PU9wZW5MYXllcnMuUmVxdWVzdC5HRVQoe3VybDp0aGlzLnVybCxjYWxsYmFjazpmdW5jdGlvbihhKXt0aGlzLmlzTG9hZGluZz0hMTt0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoImxvYWRlbmQiKTsyMDA9PT1hLnN0YXR1cyYmdGhpcy5wYXJzZURhdGEoYS5yZXNwb25zZVRleHQpfSxzY29wZTp0aGlzfSk7ZWxzZSB0aGlzLnVubG9hZCgpO3JldHVybiBhfSxhYm9ydExvYWRpbmc6ZnVuY3Rpb24oKXt0aGlzLnJlcXVlc3QmJih0aGlzLnJlcXVlc3QuYWJvcnQoKSxkZWxldGUgdGhpcy5yZXF1ZXN0KTt0aGlzLmlzTG9hZGluZz0hMX0sZ2V0RmVhdHVyZUluZm86ZnVuY3Rpb24oYSxiKXt2YXIgYz1udWxsO2lmKHRoaXMuanNvbil7dmFyIGQ9CnRoaXMuZ2V0RmVhdHVyZUlkKGEsYik7bnVsbCE9PWQmJihjPXtpZDpkLGRhdGE6dGhpcy5qc29uLmRhdGFbZF19KX1yZXR1cm4gY30sZ2V0RmVhdHVyZUlkOmZ1bmN0aW9uKGEsYil7dmFyIGM9bnVsbDtpZih0aGlzLmpzb24pe3ZhciBkPXRoaXMudXRmZ3JpZFJlc29sdXRpb24sZD10aGlzLmpzb24uZ3JpZFtNYXRoLmZsb29yKGIvZCldLmNoYXJDb2RlQXQoTWF0aC5mbG9vcihhL2QpKSxkPXRoaXMuaW5kZXhGcm9tQ2hhckNvZGUoZCksZT10aGlzLmpzb24ua2V5czshaXNOYU4oZCkmJmQgaW4gZSYmKGM9ZVtkXSl9cmV0dXJuIGN9LGluZGV4RnJvbUNoYXJDb2RlOmZ1bmN0aW9uKGEpezkzPD1hJiZhLS07MzU8PWEmJmEtLTtyZXR1cm4gYS0zMn0scGFyc2VEYXRhOmZ1bmN0aW9uKGEpe3RoaXMuZm9ybWF0fHwodGhpcy5mb3JtYXQ9bmV3IE9wZW5MYXllcnMuRm9ybWF0LkpTT04pO3RoaXMuanNvbj10aGlzLmZvcm1hdC5yZWFkKGEpfSxjbGVhcjpmdW5jdGlvbigpe3RoaXMuanNvbj0KbnVsbH0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5UaWxlLlVURkdyaWQifSk7T3BlbkxheWVycy5Qcm90b2NvbC5IVFRQPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Qcm90b2NvbCx7dXJsOm51bGwsaGVhZGVyczpudWxsLHBhcmFtczpudWxsLGNhbGxiYWNrOm51bGwsc2NvcGU6bnVsbCxyZWFkV2l0aFBPU1Q6ITEsdXBkYXRlV2l0aFBPU1Q6ITEsZGVsZXRlV2l0aFBPU1Q6ITEsd2lsZGNhcmRlZDohMSxzcnNJbkJCT1g6ITEsaW5pdGlhbGl6ZTpmdW5jdGlvbihhKXthPWF8fHt9O3RoaXMucGFyYW1zPXt9O3RoaXMuaGVhZGVycz17fTtPcGVuTGF5ZXJzLlByb3RvY29sLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtpZighdGhpcy5maWx0ZXJUb1BhcmFtcyYmT3BlbkxheWVycy5Gb3JtYXQuUXVlcnlTdHJpbmdGaWx0ZXIpe3ZhciBiPW5ldyBPcGVuTGF5ZXJzLkZvcm1hdC5RdWVyeVN0cmluZ0ZpbHRlcih7d2lsZGNhcmRlZDp0aGlzLndpbGRjYXJkZWQsc3JzSW5CQk9YOnRoaXMuc3JzSW5CQk9YfSk7dGhpcy5maWx0ZXJUb1BhcmFtcz0KZnVuY3Rpb24oYSxkKXtyZXR1cm4gYi53cml0ZShhLGQpfX19LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmhlYWRlcnM9dGhpcy5wYXJhbXM9bnVsbDtPcGVuTGF5ZXJzLlByb3RvY29sLnByb3RvdHlwZS5kZXN0cm95LmFwcGx5KHRoaXMpfSxyZWFkOmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuUHJvdG9jb2wucHJvdG90eXBlLnJlYWQuYXBwbHkodGhpcyxhcmd1bWVudHMpO2E9YXx8e307YS5wYXJhbXM9T3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoYS5wYXJhbXMsdGhpcy5vcHRpb25zLnBhcmFtcyk7YT1PcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyhhLHRoaXMub3B0aW9ucyk7YS5maWx0ZXImJnRoaXMuZmlsdGVyVG9QYXJhbXMmJihhLnBhcmFtcz10aGlzLmZpbHRlclRvUGFyYW1zKGEuZmlsdGVyLGEucGFyYW1zKSk7dmFyIGI9dm9pZCAwIT09YS5yZWFkV2l0aFBPU1Q/YS5yZWFkV2l0aFBPU1Q6dGhpcy5yZWFkV2l0aFBPU1QsYz1uZXcgT3BlbkxheWVycy5Qcm90b2NvbC5SZXNwb25zZSh7cmVxdWVzdFR5cGU6InJlYWQifSk7CmI/KGI9YS5oZWFkZXJzfHx7fSxiWyJDb250ZW50LVR5cGUiXT0iYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIixjLnByaXY9T3BlbkxheWVycy5SZXF1ZXN0LlBPU1Qoe3VybDphLnVybCxjYWxsYmFjazp0aGlzLmNyZWF0ZUNhbGxiYWNrKHRoaXMuaGFuZGxlUmVhZCxjLGEpLGRhdGE6T3BlbkxheWVycy5VdGlsLmdldFBhcmFtZXRlclN0cmluZyhhLnBhcmFtcyksaGVhZGVyczpifSkpOmMucHJpdj1PcGVuTGF5ZXJzLlJlcXVlc3QuR0VUKHt1cmw6YS51cmwsY2FsbGJhY2s6dGhpcy5jcmVhdGVDYWxsYmFjayh0aGlzLmhhbmRsZVJlYWQsYyxhKSxwYXJhbXM6YS5wYXJhbXMsaGVhZGVyczphLmhlYWRlcnN9KTtyZXR1cm4gY30saGFuZGxlUmVhZDpmdW5jdGlvbihhLGIpe3RoaXMuaGFuZGxlUmVzcG9uc2UoYSxiKX0sY3JlYXRlOmZ1bmN0aW9uKGEsYil7Yj1PcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyhiLHRoaXMub3B0aW9ucyk7dmFyIGM9bmV3IE9wZW5MYXllcnMuUHJvdG9jb2wuUmVzcG9uc2Uoe3JlcUZlYXR1cmVzOmEsCnJlcXVlc3RUeXBlOiJjcmVhdGUifSk7Yy5wcml2PU9wZW5MYXllcnMuUmVxdWVzdC5QT1NUKHt1cmw6Yi51cmwsY2FsbGJhY2s6dGhpcy5jcmVhdGVDYWxsYmFjayh0aGlzLmhhbmRsZUNyZWF0ZSxjLGIpLGhlYWRlcnM6Yi5oZWFkZXJzLGRhdGE6dGhpcy5mb3JtYXQud3JpdGUoYSl9KTtyZXR1cm4gY30saGFuZGxlQ3JlYXRlOmZ1bmN0aW9uKGEsYil7dGhpcy5oYW5kbGVSZXNwb25zZShhLGIpfSx1cGRhdGU6ZnVuY3Rpb24oYSxiKXtiPWJ8fHt9O3ZhciBjPWIudXJsfHxhLnVybHx8dGhpcy5vcHRpb25zLnVybCsiLyIrYS5maWQ7Yj1PcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyhiLHRoaXMub3B0aW9ucyk7dmFyIGQ9bmV3IE9wZW5MYXllcnMuUHJvdG9jb2wuUmVzcG9uc2Uoe3JlcUZlYXR1cmVzOmEscmVxdWVzdFR5cGU6InVwZGF0ZSJ9KTtkLnByaXY9T3BlbkxheWVycy5SZXF1ZXN0W3RoaXMudXBkYXRlV2l0aFBPU1Q/IlBPU1QiOiJQVVQiXSh7dXJsOmMsY2FsbGJhY2s6dGhpcy5jcmVhdGVDYWxsYmFjayh0aGlzLmhhbmRsZVVwZGF0ZSwKZCxiKSxoZWFkZXJzOmIuaGVhZGVycyxkYXRhOnRoaXMuZm9ybWF0LndyaXRlKGEpfSk7cmV0dXJuIGR9LGhhbmRsZVVwZGF0ZTpmdW5jdGlvbihhLGIpe3RoaXMuaGFuZGxlUmVzcG9uc2UoYSxiKX0sImRlbGV0ZSI6ZnVuY3Rpb24oYSxiKXtiPWJ8fHt9O3ZhciBjPWIudXJsfHxhLnVybHx8dGhpcy5vcHRpb25zLnVybCsiLyIrYS5maWQ7Yj1PcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyhiLHRoaXMub3B0aW9ucyk7dmFyIGQ9bmV3IE9wZW5MYXllcnMuUHJvdG9jb2wuUmVzcG9uc2Uoe3JlcUZlYXR1cmVzOmEscmVxdWVzdFR5cGU6ImRlbGV0ZSJ9KSxlPXRoaXMuZGVsZXRlV2l0aFBPU1Q/IlBPU1QiOiJERUxFVEUiLGM9e3VybDpjLGNhbGxiYWNrOnRoaXMuY3JlYXRlQ2FsbGJhY2sodGhpcy5oYW5kbGVEZWxldGUsZCxiKSxoZWFkZXJzOmIuaGVhZGVyc307dGhpcy5kZWxldGVXaXRoUE9TVCYmKGMuZGF0YT10aGlzLmZvcm1hdC53cml0ZShhKSk7ZC5wcml2PU9wZW5MYXllcnMuUmVxdWVzdFtlXShjKTsKcmV0dXJuIGR9LGhhbmRsZURlbGV0ZTpmdW5jdGlvbihhLGIpe3RoaXMuaGFuZGxlUmVzcG9uc2UoYSxiKX0saGFuZGxlUmVzcG9uc2U6ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLnByaXY7Yi5jYWxsYmFjayYmKDIwMDw9Yy5zdGF0dXMmJjMwMD5jLnN0YXR1cz8oImRlbGV0ZSIhPWEucmVxdWVzdFR5cGUmJihhLmZlYXR1cmVzPXRoaXMucGFyc2VGZWF0dXJlcyhjKSksYS5jb2RlPU9wZW5MYXllcnMuUHJvdG9jb2wuUmVzcG9uc2UuU1VDQ0VTUyk6YS5jb2RlPU9wZW5MYXllcnMuUHJvdG9jb2wuUmVzcG9uc2UuRkFJTFVSRSxiLmNhbGxiYWNrLmNhbGwoYi5zY29wZSxhKSl9LHBhcnNlRmVhdHVyZXM6ZnVuY3Rpb24oYSl7dmFyIGI9YS5yZXNwb25zZVhNTDtiJiZiLmRvY3VtZW50RWxlbWVudHx8KGI9YS5yZXNwb25zZVRleHQpO3JldHVybiFifHwwPj1iLmxlbmd0aD9udWxsOnRoaXMuZm9ybWF0LnJlYWQoYil9LGNvbW1pdDpmdW5jdGlvbihhLGIpe2Z1bmN0aW9uIGMoYSl7Zm9yKHZhciBiPQphLmZlYXR1cmVzP2EuZmVhdHVyZXMubGVuZ3RoOjAsYz1BcnJheShiKSxlPTA7ZTxiOysrZSljW2VdPWEuZmVhdHVyZXNbZV0uZmlkO3IuaW5zZXJ0SWRzPWM7ZC5hcHBseSh0aGlzLFthXSl9ZnVuY3Rpb24gZChhKXt0aGlzLmNhbGxVc2VyQ2FsbGJhY2soYSxiKTtxPXEmJmEuc3VjY2VzcygpO2YrKztmPj1wJiZiLmNhbGxiYWNrJiYoci5jb2RlPXE/T3BlbkxheWVycy5Qcm90b2NvbC5SZXNwb25zZS5TVUNDRVNTOk9wZW5MYXllcnMuUHJvdG9jb2wuUmVzcG9uc2UuRkFJTFVSRSxiLmNhbGxiYWNrLmFwcGx5KGIuc2NvcGUsW3JdKSl9Yj1PcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyhiLHRoaXMub3B0aW9ucyk7dmFyIGU9W10sZj0wLGc9e307Z1tPcGVuTGF5ZXJzLlN0YXRlLklOU0VSVF09W107Z1tPcGVuTGF5ZXJzLlN0YXRlLlVQREFURV09W107Z1tPcGVuTGF5ZXJzLlN0YXRlLkRFTEVURV09W107Zm9yKHZhciBoLGssbD1bXSxtPTAsbj1hLmxlbmd0aDttPG47KyttKWlmKGg9CmFbbV0saz1nW2guc3RhdGVdKWsucHVzaChoKSxsLnB1c2goaCk7dmFyIHA9KDA8Z1tPcGVuTGF5ZXJzLlN0YXRlLklOU0VSVF0ubGVuZ3RoPzE6MCkrZ1tPcGVuTGF5ZXJzLlN0YXRlLlVQREFURV0ubGVuZ3RoK2dbT3BlbkxheWVycy5TdGF0ZS5ERUxFVEVdLmxlbmd0aCxxPSEwLHI9bmV3IE9wZW5MYXllcnMuUHJvdG9jb2wuUmVzcG9uc2Uoe3JlcUZlYXR1cmVzOmx9KTtoPWdbT3BlbkxheWVycy5TdGF0ZS5JTlNFUlRdOzA8aC5sZW5ndGgmJmUucHVzaCh0aGlzLmNyZWF0ZShoLE9wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKHtjYWxsYmFjazpjLHNjb3BlOnRoaXN9LGIuY3JlYXRlKSkpO2g9Z1tPcGVuTGF5ZXJzLlN0YXRlLlVQREFURV07Zm9yKG09aC5sZW5ndGgtMTswPD1tOy0tbSllLnB1c2godGhpcy51cGRhdGUoaFttXSxPcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyh7Y2FsbGJhY2s6ZCxzY29wZTp0aGlzfSxiLnVwZGF0ZSkpKTtoPWdbT3BlbkxheWVycy5TdGF0ZS5ERUxFVEVdOwpmb3IobT1oLmxlbmd0aC0xOzA8PW07LS1tKWUucHVzaCh0aGlzWyJkZWxldGUiXShoW21dLE9wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKHtjYWxsYmFjazpkLHNjb3BlOnRoaXN9LGJbImRlbGV0ZSJdKSkpO3JldHVybiBlfSxhYm9ydDpmdW5jdGlvbihhKXthJiZhLnByaXYuYWJvcnQoKX0sY2FsbFVzZXJDYWxsYmFjazpmdW5jdGlvbihhLGIpe3ZhciBjPWJbYS5yZXF1ZXN0VHlwZV07YyYmYy5jYWxsYmFjayYmYy5jYWxsYmFjay5jYWxsKGMuc2NvcGUsYSl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuUHJvdG9jb2wuSFRUUCJ9KTtPcGVuTGF5ZXJzLlN0cmF0ZWd5LkNsdXN0ZXI9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLlN0cmF0ZWd5LHtkaXN0YW5jZToyMCx0aHJlc2hvbGQ6bnVsbCxmZWF0dXJlczpudWxsLGNsdXN0ZXJzOm51bGwsY2x1c3RlcmluZzohMSxyZXNvbHV0aW9uOm51bGwsYWN0aXZhdGU6ZnVuY3Rpb24oKXt2YXIgYT1PcGVuTGF5ZXJzLlN0cmF0ZWd5LnByb3RvdHlwZS5hY3RpdmF0ZS5jYWxsKHRoaXMpO2lmKGEpdGhpcy5sYXllci5ldmVudHMub24oe2JlZm9yZWZlYXR1cmVzYWRkZWQ6dGhpcy5jYWNoZUZlYXR1cmVzLGZlYXR1cmVzcmVtb3ZlZDp0aGlzLmNsZWFyQ2FjaGUsbW92ZWVuZDp0aGlzLmNsdXN0ZXIsc2NvcGU6dGhpc30pO3JldHVybiBhfSxkZWFjdGl2YXRlOmZ1bmN0aW9uKCl7dmFyIGE9T3BlbkxheWVycy5TdHJhdGVneS5wcm90b3R5cGUuZGVhY3RpdmF0ZS5jYWxsKHRoaXMpO2EmJih0aGlzLmNsZWFyQ2FjaGUoKSx0aGlzLmxheWVyLmV2ZW50cy51bih7YmVmb3JlZmVhdHVyZXNhZGRlZDp0aGlzLmNhY2hlRmVhdHVyZXMsCmZlYXR1cmVzcmVtb3ZlZDp0aGlzLmNsZWFyQ2FjaGUsbW92ZWVuZDp0aGlzLmNsdXN0ZXIsc2NvcGU6dGhpc30pKTtyZXR1cm4gYX0sY2FjaGVGZWF0dXJlczpmdW5jdGlvbihhKXt2YXIgYj0hMDt0aGlzLmNsdXN0ZXJpbmd8fCh0aGlzLmNsZWFyQ2FjaGUoKSx0aGlzLmZlYXR1cmVzPWEuZmVhdHVyZXMsdGhpcy5jbHVzdGVyKCksYj0hMSk7cmV0dXJuIGJ9LGNsZWFyQ2FjaGU6ZnVuY3Rpb24oKXt0aGlzLmNsdXN0ZXJpbmd8fCh0aGlzLmZlYXR1cmVzPW51bGwpfSxjbHVzdGVyOmZ1bmN0aW9uKGEpe2lmKCghYXx8YS56b29tQ2hhbmdlZCkmJnRoaXMuZmVhdHVyZXMmJihhPXRoaXMubGF5ZXIubWFwLmdldFJlc29sdXRpb24oKSxhIT10aGlzLnJlc29sdXRpb258fCF0aGlzLmNsdXN0ZXJzRXhpc3QoKSkpe3RoaXMucmVzb2x1dGlvbj1hO2E9W107Zm9yKHZhciBiLGMsZCxlPTA7ZTx0aGlzLmZlYXR1cmVzLmxlbmd0aDsrK2UpaWYoYj10aGlzLmZlYXR1cmVzW2VdLGIuZ2VvbWV0cnkpe2M9CiExO2Zvcih2YXIgZj1hLmxlbmd0aC0xOzA8PWY7LS1mKWlmKGQ9YVtmXSx0aGlzLnNob3VsZENsdXN0ZXIoZCxiKSl7dGhpcy5hZGRUb0NsdXN0ZXIoZCxiKTtjPSEwO2JyZWFrfWN8fGEucHVzaCh0aGlzLmNyZWF0ZUNsdXN0ZXIodGhpcy5mZWF0dXJlc1tlXSkpfXRoaXMuY2x1c3RlcmluZz0hMDt0aGlzLmxheWVyLnJlbW92ZUFsbEZlYXR1cmVzKCk7dGhpcy5jbHVzdGVyaW5nPSExO2lmKDA8YS5sZW5ndGgpe2lmKDE8dGhpcy50aHJlc2hvbGQpZm9yKGI9YS5zbGljZSgpLGE9W10sZT0wLGQ9Yi5sZW5ndGg7ZTxkOysrZSljPWJbZV0sYy5hdHRyaWJ1dGVzLmNvdW50PHRoaXMudGhyZXNob2xkP0FycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KGEsYy5jbHVzdGVyKTphLnB1c2goYyk7dGhpcy5jbHVzdGVyaW5nPSEwO3RoaXMubGF5ZXIuYWRkRmVhdHVyZXMoYSk7dGhpcy5jbHVzdGVyaW5nPSExfXRoaXMuY2x1c3RlcnM9YX19LGNsdXN0ZXJzRXhpc3Q6ZnVuY3Rpb24oKXt2YXIgYT0KITE7aWYodGhpcy5jbHVzdGVycyYmMDx0aGlzLmNsdXN0ZXJzLmxlbmd0aCYmdGhpcy5jbHVzdGVycy5sZW5ndGg9PXRoaXMubGF5ZXIuZmVhdHVyZXMubGVuZ3RoKWZvcih2YXIgYT0hMCxiPTA7Yjx0aGlzLmNsdXN0ZXJzLmxlbmd0aDsrK2IpaWYodGhpcy5jbHVzdGVyc1tiXSE9dGhpcy5sYXllci5mZWF0dXJlc1tiXSl7YT0hMTticmVha31yZXR1cm4gYX0sc2hvdWxkQ2x1c3RlcjpmdW5jdGlvbihhLGIpe3ZhciBjPWEuZ2VvbWV0cnkuZ2V0Qm91bmRzKCkuZ2V0Q2VudGVyTG9uTGF0KCksZD1iLmdlb21ldHJ5LmdldEJvdW5kcygpLmdldENlbnRlckxvbkxhdCgpO3JldHVybiBNYXRoLnNxcnQoTWF0aC5wb3coYy5sb24tZC5sb24sMikrTWF0aC5wb3coYy5sYXQtZC5sYXQsMikpL3RoaXMucmVzb2x1dGlvbjw9dGhpcy5kaXN0YW5jZX0sYWRkVG9DbHVzdGVyOmZ1bmN0aW9uKGEsYil7YS5jbHVzdGVyLnB1c2goYik7YS5hdHRyaWJ1dGVzLmNvdW50Kz0xfSxjcmVhdGVDbHVzdGVyOmZ1bmN0aW9uKGEpe3ZhciBiPQphLmdlb21ldHJ5LmdldEJvdW5kcygpLmdldENlbnRlckxvbkxhdCgpLGI9bmV3IE9wZW5MYXllcnMuRmVhdHVyZS5WZWN0b3IobmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoYi5sb24sYi5sYXQpLHtjb3VudDoxfSk7Yi5jbHVzdGVyPVthXTtyZXR1cm4gYn0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5TdHJhdGVneS5DbHVzdGVyIn0pO09wZW5MYXllcnMuU3RyYXRlZ3kuRmlsdGVyPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5TdHJhdGVneSx7ZmlsdGVyOm51bGwsY2FjaGU6bnVsbCxjYWNoaW5nOiExLGFjdGl2YXRlOmZ1bmN0aW9uKCl7dmFyIGE9T3BlbkxheWVycy5TdHJhdGVneS5wcm90b3R5cGUuYWN0aXZhdGUuYXBwbHkodGhpcyxhcmd1bWVudHMpO2EmJih0aGlzLmNhY2hlPVtdLHRoaXMubGF5ZXIuZXZlbnRzLm9uKHtiZWZvcmVmZWF0dXJlc2FkZGVkOnRoaXMuaGFuZGxlQWRkLGJlZm9yZWZlYXR1cmVzcmVtb3ZlZDp0aGlzLmhhbmRsZVJlbW92ZSxzY29wZTp0aGlzfSkpO3JldHVybiBhfSxkZWFjdGl2YXRlOmZ1bmN0aW9uKCl7dGhpcy5jYWNoZT1udWxsO3RoaXMubGF5ZXImJnRoaXMubGF5ZXIuZXZlbnRzJiZ0aGlzLmxheWVyLmV2ZW50cy51bih7YmVmb3JlZmVhdHVyZXNhZGRlZDp0aGlzLmhhbmRsZUFkZCxiZWZvcmVmZWF0dXJlc3JlbW92ZWQ6dGhpcy5oYW5kbGVSZW1vdmUsc2NvcGU6dGhpc30pOwpyZXR1cm4gT3BlbkxheWVycy5TdHJhdGVneS5wcm90b3R5cGUuZGVhY3RpdmF0ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGhhbmRsZUFkZDpmdW5jdGlvbihhKXtpZighdGhpcy5jYWNoaW5nJiZ0aGlzLmZpbHRlcil7dmFyIGI9YS5mZWF0dXJlczthLmZlYXR1cmVzPVtdO2Zvcih2YXIgYyxkPTAsZT1iLmxlbmd0aDtkPGU7KytkKWM9YltkXSx0aGlzLmZpbHRlci5ldmFsdWF0ZShjKT9hLmZlYXR1cmVzLnB1c2goYyk6dGhpcy5jYWNoZS5wdXNoKGMpfX0saGFuZGxlUmVtb3ZlOmZ1bmN0aW9uKGEpe3RoaXMuY2FjaGluZ3x8KHRoaXMuY2FjaGU9W10pfSxzZXRGaWx0ZXI6ZnVuY3Rpb24oYSl7dGhpcy5maWx0ZXI9YTthPXRoaXMuY2FjaGU7dGhpcy5jYWNoZT1bXTt0aGlzLmhhbmRsZUFkZCh7ZmVhdHVyZXM6dGhpcy5sYXllci5mZWF0dXJlc30pOzA8dGhpcy5jYWNoZS5sZW5ndGgmJih0aGlzLmNhY2hpbmc9ITAsdGhpcy5sYXllci5yZW1vdmVGZWF0dXJlcyh0aGlzLmNhY2hlLnNsaWNlKCkpLAp0aGlzLmNhY2hpbmc9ITEpOzA8YS5sZW5ndGgmJihhPXtmZWF0dXJlczphfSx0aGlzLmhhbmRsZUFkZChhKSwwPGEuZmVhdHVyZXMubGVuZ3RoJiYodGhpcy5jYWNoaW5nPSEwLHRoaXMubGF5ZXIuYWRkRmVhdHVyZXMoYS5mZWF0dXJlcyksdGhpcy5jYWNoaW5nPSExKSl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuU3RyYXRlZ3kuRmlsdGVyIn0pO09wZW5MYXllcnMuUHJvdG9jb2wuU09TPWZ1bmN0aW9uKGEpe2E9T3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoYSxPcGVuTGF5ZXJzLlByb3RvY29sLlNPUy5ERUZBVUxUUyk7dmFyIGI9T3BlbkxheWVycy5Qcm90b2NvbC5TT1NbInYiK2EudmVyc2lvbi5yZXBsYWNlKC9cLi9nLCJfIildO2lmKCFiKXRocm93IlVuc3VwcG9ydGVkIFNPUyB2ZXJzaW9uOiAiK2EudmVyc2lvbjtyZXR1cm4gbmV3IGIoYSl9O09wZW5MYXllcnMuUHJvdG9jb2wuU09TLkRFRkFVTFRTPXt2ZXJzaW9uOiIxLjAuMCJ9O09wZW5MYXllcnMuRm9ybWF0LldGU0Rlc2NyaWJlRmVhdHVyZVR5cGU9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkZvcm1hdC5YTUwse3JlZ0V4ZXM6e3RyaW1TcGFjZTovXlxzKnxccyokL2d9LG5hbWVzcGFjZXM6e3hzZDoiaHR0cDovL3d3dy53My5vcmcvMjAwMS9YTUxTY2hlbWEifSxyZWFkZXJzOnt4c2Q6e3NjaGVtYTpmdW5jdGlvbihhLGIpe3ZhciBjPVtdLGQ9e30sZSxmO3RoaXMucmVhZENoaWxkTm9kZXMoYSx7Y29tcGxleFR5cGVzOmMsY3VzdG9tVHlwZXM6ZH0pO3ZhciBnPWEuYXR0cmlidXRlcyxoLGs7ZT0wO2ZvcihmPWcubGVuZ3RoO2U8ZjsrK2UpaD1nW2VdLGs9aC5uYW1lLDA9PT1rLmluZGV4T2YoInhtbG5zIik/dGhpcy5zZXROYW1lc3BhY2Uoay5zcGxpdCgiOiIpWzFdfHwiIixoLnZhbHVlKTpiW2tdPWgudmFsdWU7Yi5mZWF0dXJlVHlwZXM9YztiLnRhcmdldFByZWZpeD10aGlzLm5hbWVzcGFjZUFsaWFzW2IudGFyZ2V0TmFtZXNwYWNlXTtlPTA7Zm9yKGY9CmMubGVuZ3RoO2U8ZjsrK2UpZz1jW2VdLGg9ZFtnLnR5cGVOYW1lXSxkW2cudHlwZU5hbWVdJiYoZy50eXBlTmFtZT1oLm5hbWUpfSxjb21wbGV4VHlwZTpmdW5jdGlvbihhLGIpe3ZhciBjPXt0eXBlTmFtZTphLmdldEF0dHJpYnV0ZSgibmFtZSIpfTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYyk7Yi5jb21wbGV4VHlwZXMucHVzaChjKX0sY29tcGxleENvbnRlbnQ6ZnVuY3Rpb24oYSxiKXt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYil9LGV4dGVuc2lvbjpmdW5jdGlvbihhLGIpe3RoaXMucmVhZENoaWxkTm9kZXMoYSxiKX0sc2VxdWVuY2U6ZnVuY3Rpb24oYSxiKXt2YXIgYz17ZWxlbWVudHM6W119O3RoaXMucmVhZENoaWxkTm9kZXMoYSxjKTtiLnByb3BlcnRpZXM9Yy5lbGVtZW50c30sZWxlbWVudDpmdW5jdGlvbihhLGIpe3ZhciBjO2lmKGIuZWxlbWVudHMpe3ZhciBkPXt9O2M9YS5hdHRyaWJ1dGVzO2Zvcih2YXIgZSxmPTAsZz1jLmxlbmd0aDtmPGc7KytmKWU9Y1tmXSxkW2UubmFtZV09CmUudmFsdWU7Yz1kLnR5cGU7Y3x8KGM9e30sdGhpcy5yZWFkQ2hpbGROb2RlcyhhLGMpLGQucmVzdHJpY3Rpb249YyxkLnR5cGU9Yy5iYXNlKTtkLmxvY2FsVHlwZT0oYy5iYXNlfHxjKS5zcGxpdCgiOiIpLnBvcCgpO2IuZWxlbWVudHMucHVzaChkKTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsZCl9Yi5jb21wbGV4VHlwZXMmJihjPWEuZ2V0QXR0cmlidXRlKCJ0eXBlIiksZD1jLnNwbGl0KCI6IikucG9wKCksYi5jdXN0b21UeXBlc1tkXT17bmFtZTphLmdldEF0dHJpYnV0ZSgibmFtZSIpLHR5cGU6Y30pfSxhbm5vdGF0aW9uOmZ1bmN0aW9uKGEsYil7Yi5hbm5vdGF0aW9uPXt9O3RoaXMucmVhZENoaWxkTm9kZXMoYSxiLmFubm90YXRpb24pfSxhcHBpbmZvOmZ1bmN0aW9uKGEsYil7Yi5hcHBpbmZvfHwoYi5hcHBpbmZvPVtdKTtiLmFwcGluZm8ucHVzaCh0aGlzLmdldENoaWxkVmFsdWUoYSkpfSxkb2N1bWVudGF0aW9uOmZ1bmN0aW9uKGEsYil7Yi5kb2N1bWVudGF0aW9ufHwoYi5kb2N1bWVudGF0aW9uPQpbXSk7dmFyIGM9dGhpcy5nZXRDaGlsZFZhbHVlKGEpO2IuZG9jdW1lbnRhdGlvbi5wdXNoKHtsYW5nOmEuZ2V0QXR0cmlidXRlKCJ4bWw6bGFuZyIpLHRleHRDb250ZW50OmMucmVwbGFjZSh0aGlzLnJlZ0V4ZXMudHJpbVNwYWNlLCIiKX0pfSxzaW1wbGVUeXBlOmZ1bmN0aW9uKGEsYil7dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGIpfSxyZXN0cmljdGlvbjpmdW5jdGlvbihhLGIpe2IuYmFzZT1hLmdldEF0dHJpYnV0ZSgiYmFzZSIpO3RoaXMucmVhZFJlc3RyaWN0aW9uKGEsYil9fX0scmVhZFJlc3RyaWN0aW9uOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPWEuY2hpbGROb2RlcyxkLGUsZj0wLGc9Yy5sZW5ndGg7ZjxnOysrZilkPWNbZl0sMT09ZC5ub2RlVHlwZSYmKGU9ZC5ub2RlTmFtZS5zcGxpdCgiOiIpLnBvcCgpLGQ9ZC5nZXRBdHRyaWJ1dGUoInZhbHVlIiksYltlXT8oInN0cmluZyI9PXR5cGVvZiBiW2VdJiYoYltlXT1bYltlXV0pLGJbZV0ucHVzaChkKSk6YltlXT1kKX0scmVhZDpmdW5jdGlvbihhKXsic3RyaW5nIj09CnR5cGVvZiBhJiYoYT1PcGVuTGF5ZXJzLkZvcm1hdC5YTUwucHJvdG90eXBlLnJlYWQuYXBwbHkodGhpcyxbYV0pKTthJiY5PT1hLm5vZGVUeXBlJiYoYT1hLmRvY3VtZW50RWxlbWVudCk7dmFyIGI9e307aWYoIkV4Y2VwdGlvblJlcG9ydCI9PT1hLm5vZGVOYW1lLnNwbGl0KCI6IikucG9wKCkpe3ZhciBjPW5ldyBPcGVuTGF5ZXJzLkZvcm1hdC5PR0NFeGNlcHRpb25SZXBvcnQ7Yi5lcnJvcj1jLnJlYWQoYSl9ZWxzZSB0aGlzLnJlYWROb2RlKGEsYik7cmV0dXJuIGJ9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuRm9ybWF0LldGU0Rlc2NyaWJlRmVhdHVyZVR5cGUifSk7T3BlbkxheWVycy5Gb3JtYXQuR2VvUlNTPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Gb3JtYXQuWE1MLHtyc3NuczoiaHR0cDovL2JhY2tlbmQudXNlcmxhbmQuY29tL3JzczIiLGZlYXR1cmVOUzoiaHR0cDovL21hcHNlcnZlci5naXMudW1uLmVkdS9tYXBzZXJ2ZXIiLGdlb3Jzc25zOiJodHRwOi8vd3d3Lmdlb3Jzcy5vcmcvZ2VvcnNzIixnZW9uczoiaHR0cDovL3d3dy53My5vcmcvMjAwMy8wMS9nZW8vd2dzODRfcG9zIyIsZmVhdHVyZVRpdGxlOiJVbnRpdGxlZCIsZmVhdHVyZURlc2NyaXB0aW9uOiJObyBEZXNjcmlwdGlvbiIsZ21sUGFyc2VyOm51bGwseHk6ITEsY3JlYXRlR2VvbWV0cnlGcm9tSXRlbTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmdldEVsZW1lbnRzQnlUYWdOYW1lTlMoYSx0aGlzLmdlb3Jzc25zLCJwb2ludCIpLGM9dGhpcy5nZXRFbGVtZW50c0J5VGFnTmFtZU5TKGEsdGhpcy5nZW9ucywibGF0IiksZD10aGlzLmdldEVsZW1lbnRzQnlUYWdOYW1lTlMoYSwKdGhpcy5nZW9ucywibG9uZyIpLGU9dGhpcy5nZXRFbGVtZW50c0J5VGFnTmFtZU5TKGEsdGhpcy5nZW9yc3NucywibGluZSIpLGY9dGhpcy5nZXRFbGVtZW50c0J5VGFnTmFtZU5TKGEsdGhpcy5nZW9yc3NucywicG9seWdvbiIpLGc9dGhpcy5nZXRFbGVtZW50c0J5VGFnTmFtZU5TKGEsdGhpcy5nZW9yc3Nucywid2hlcmUiKTthPXRoaXMuZ2V0RWxlbWVudHNCeVRhZ05hbWVOUyhhLHRoaXMuZ2VvcnNzbnMsImJveCIpO2lmKDA8Yi5sZW5ndGh8fDA8Yy5sZW5ndGgmJjA8ZC5sZW5ndGgpezA8Yi5sZW5ndGg/KGM9T3BlbkxheWVycy5TdHJpbmcudHJpbShiWzBdLmZpcnN0Q2hpbGQubm9kZVZhbHVlKS5zcGxpdCgvXHMrLyksMiE9Yy5sZW5ndGgmJihjPU9wZW5MYXllcnMuU3RyaW5nLnRyaW0oYlswXS5maXJzdENoaWxkLm5vZGVWYWx1ZSkuc3BsaXQoL1xzKixccyovKSkpOmM9W3BhcnNlRmxvYXQoY1swXS5maXJzdENoaWxkLm5vZGVWYWx1ZSkscGFyc2VGbG9hdChkWzBdLmZpcnN0Q2hpbGQubm9kZVZhbHVlKV07CnZhciBoPW5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KGNbMV0sY1swXSl9ZWxzZSBpZigwPGUubGVuZ3RoKXtjPU9wZW5MYXllcnMuU3RyaW5nLnRyaW0odGhpcy5nZXRDaGlsZFZhbHVlKGVbMF0pKS5zcGxpdCgvXHMrLyk7ZD1bXTtlPTA7Zm9yKGY9Yy5sZW5ndGg7ZTxmO2UrPTIpYj1uZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludChjW2UrMV0sY1tlXSksZC5wdXNoKGIpO2g9bmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuTGluZVN0cmluZyhkKX1lbHNlIGlmKDA8Zi5sZW5ndGgpe2M9T3BlbkxheWVycy5TdHJpbmcudHJpbSh0aGlzLmdldENoaWxkVmFsdWUoZlswXSkpLnNwbGl0KC9ccysvKTtkPVtdO2U9MDtmb3IoZj1jLmxlbmd0aDtlPGY7ZSs9MiliPW5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KGNbZSsxXSxjW2VdKSxkLnB1c2goYik7aD1uZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2x5Z29uKFtuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5MaW5lYXJSaW5nKGQpXSl9ZWxzZSAwPApnLmxlbmd0aD8odGhpcy5nbWxQYXJzZXJ8fCh0aGlzLmdtbFBhcnNlcj1uZXcgT3BlbkxheWVycy5Gb3JtYXQuR01MKHt4eTp0aGlzLnh5fSkpLGg9dGhpcy5nbWxQYXJzZXIucGFyc2VGZWF0dXJlKGdbMF0pLmdlb21ldHJ5KTowPGEubGVuZ3RoJiYoYz1PcGVuTGF5ZXJzLlN0cmluZy50cmltKGFbMF0uZmlyc3RDaGlsZC5ub2RlVmFsdWUpLnNwbGl0KC9ccysvKSxkPVtdLDM8Yy5sZW5ndGgmJihiPW5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KGNbMV0sY1swXSksZC5wdXNoKGIpLGI9bmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoY1sxXSxjWzJdKSxkLnB1c2goYiksYj1uZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludChjWzNdLGNbMl0pLGQucHVzaChiKSxiPW5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KGNbM10sY1swXSksZC5wdXNoKGIpLGI9bmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoY1sxXSxjWzBdKSxkLnB1c2goYikpLGg9bmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9seWdvbihbbmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuTGluZWFyUmluZyhkKV0pKTsKaCYmKHRoaXMuaW50ZXJuYWxQcm9qZWN0aW9uJiZ0aGlzLmV4dGVybmFsUHJvamVjdGlvbikmJmgudHJhbnNmb3JtKHRoaXMuZXh0ZXJuYWxQcm9qZWN0aW9uLHRoaXMuaW50ZXJuYWxQcm9qZWN0aW9uKTtyZXR1cm4gaH0sY3JlYXRlRmVhdHVyZUZyb21JdGVtOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3JlYXRlR2VvbWV0cnlGcm9tSXRlbShhKSxjPXRoaXMuX2dldENoaWxkVmFsdWUoYSwiKiIsInRpdGxlIix0aGlzLmZlYXR1cmVUaXRsZSksZD10aGlzLl9nZXRDaGlsZFZhbHVlKGEsIioiLCJkZXNjcmlwdGlvbiIsdGhpcy5fZ2V0Q2hpbGRWYWx1ZShhLCIqIiwiY29udGVudCIsdGhpcy5fZ2V0Q2hpbGRWYWx1ZShhLCIqIiwic3VtbWFyeSIsdGhpcy5mZWF0dXJlRGVzY3JpcHRpb24pKSksZT10aGlzLl9nZXRDaGlsZFZhbHVlKGEsIioiLCJsaW5rIik7aWYoIWUpdHJ5e2U9dGhpcy5nZXRFbGVtZW50c0J5VGFnTmFtZU5TKGEsIioiLCJsaW5rIilbMF0uZ2V0QXR0cmlidXRlKCJocmVmIil9Y2F0Y2goZil7ZT0KbnVsbH1hPXRoaXMuX2dldENoaWxkVmFsdWUoYSwiKiIsImlkIixudWxsKTtiPW5ldyBPcGVuTGF5ZXJzLkZlYXR1cmUuVmVjdG9yKGIse3RpdGxlOmMsZGVzY3JpcHRpb246ZCxsaW5rOmV9KTtiLmZpZD1hO3JldHVybiBifSxfZ2V0Q2hpbGRWYWx1ZTpmdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4oYT10aGlzLmdldEVsZW1lbnRzQnlUYWdOYW1lTlMoYSxiLGMpKSYmYVswXSYmYVswXS5maXJzdENoaWxkJiZhWzBdLmZpcnN0Q2hpbGQubm9kZVZhbHVlP3RoaXMuZ2V0Q2hpbGRWYWx1ZShhWzBdKTp2b2lkIDA9PWQ/IiI6ZH0scmVhZDpmdW5jdGlvbihhKXsic3RyaW5nIj09dHlwZW9mIGEmJihhPU9wZW5MYXllcnMuRm9ybWF0LlhNTC5wcm90b3R5cGUucmVhZC5hcHBseSh0aGlzLFthXSkpO3ZhciBiPW51bGwsYj10aGlzLmdldEVsZW1lbnRzQnlUYWdOYW1lTlMoYSwiKiIsIml0ZW0iKTswPT1iLmxlbmd0aCYmKGI9dGhpcy5nZXRFbGVtZW50c0J5VGFnTmFtZU5TKGEsIioiLCJlbnRyeSIpKTsKYT1iLmxlbmd0aDtmb3IodmFyIGM9QXJyYXkoYSksZD0wO2Q8YTtkKyspY1tkXT10aGlzLmNyZWF0ZUZlYXR1cmVGcm9tSXRlbShiW2RdKTtyZXR1cm4gY30sd3JpdGU6ZnVuY3Rpb24oYSl7dmFyIGI7aWYoT3BlbkxheWVycy5VdGlsLmlzQXJyYXkoYSkpe2I9dGhpcy5jcmVhdGVFbGVtZW50TlModGhpcy5yc3NucywicnNzIik7Zm9yKHZhciBjPTAsZD1hLmxlbmd0aDtjPGQ7YysrKWIuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVGZWF0dXJlWE1MKGFbY10pKX1lbHNlIGI9dGhpcy5jcmVhdGVGZWF0dXJlWE1MKGEpO3JldHVybiBPcGVuTGF5ZXJzLkZvcm1hdC5YTUwucHJvdG90eXBlLndyaXRlLmFwcGx5KHRoaXMsW2JdKX0sY3JlYXRlRmVhdHVyZVhNTDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmJ1aWxkR2VvbWV0cnlOb2RlKGEuZ2VvbWV0cnkpLGM9dGhpcy5jcmVhdGVFbGVtZW50TlModGhpcy5yc3NucywiaXRlbSIpLGQ9dGhpcy5jcmVhdGVFbGVtZW50TlModGhpcy5yc3NucywidGl0bGUiKTsKZC5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZVRleHROb2RlKGEuYXR0cmlidXRlcy50aXRsZT9hLmF0dHJpYnV0ZXMudGl0bGU6IiIpKTt2YXIgZT10aGlzLmNyZWF0ZUVsZW1lbnROUyh0aGlzLnJzc25zLCJkZXNjcmlwdGlvbiIpO2UuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVUZXh0Tm9kZShhLmF0dHJpYnV0ZXMuZGVzY3JpcHRpb24/YS5hdHRyaWJ1dGVzLmRlc2NyaXB0aW9uOiIiKSk7Yy5hcHBlbmRDaGlsZChkKTtjLmFwcGVuZENoaWxkKGUpO2EuYXR0cmlidXRlcy5saW5rJiYoZD10aGlzLmNyZWF0ZUVsZW1lbnROUyh0aGlzLnJzc25zLCJsaW5rIiksZC5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZVRleHROb2RlKGEuYXR0cmlidXRlcy5saW5rKSksYy5hcHBlbmRDaGlsZChkKSk7Zm9yKHZhciBmIGluIGEuYXR0cmlidXRlcykibGluayIhPWYmJigidGl0bGUiIT1mJiYiZGVzY3JpcHRpb24iIT1mKSYmKGQ9dGhpcy5jcmVhdGVUZXh0Tm9kZShhLmF0dHJpYnV0ZXNbZl0pLGU9ZiwtMSE9CmYuc2VhcmNoKCI6IikmJihlPWYuc3BsaXQoIjoiKVsxXSksZT10aGlzLmNyZWF0ZUVsZW1lbnROUyh0aGlzLmZlYXR1cmVOUywiZmVhdHVyZToiK2UpLGUuYXBwZW5kQ2hpbGQoZCksYy5hcHBlbmRDaGlsZChlKSk7Yy5hcHBlbmRDaGlsZChiKTtyZXR1cm4gY30sYnVpbGRHZW9tZXRyeU5vZGU6ZnVuY3Rpb24oYSl7dGhpcy5pbnRlcm5hbFByb2plY3Rpb24mJnRoaXMuZXh0ZXJuYWxQcm9qZWN0aW9uJiYoYT1hLmNsb25lKCksYS50cmFuc2Zvcm0odGhpcy5pbnRlcm5hbFByb2plY3Rpb24sdGhpcy5leHRlcm5hbFByb2plY3Rpb24pKTt2YXIgYjtpZigiT3BlbkxheWVycy5HZW9tZXRyeS5Qb2x5Z29uIj09YS5DTEFTU19OQU1FKWI9dGhpcy5jcmVhdGVFbGVtZW50TlModGhpcy5nZW9yc3NucywiZ2VvcnNzOnBvbHlnb24iKSxiLmFwcGVuZENoaWxkKHRoaXMuYnVpbGRDb29yZGluYXRlc05vZGUoYS5jb21wb25lbnRzWzBdKSk7ZWxzZSBpZigiT3BlbkxheWVycy5HZW9tZXRyeS5MaW5lU3RyaW5nIj09CmEuQ0xBU1NfTkFNRSliPXRoaXMuY3JlYXRlRWxlbWVudE5TKHRoaXMuZ2VvcnNzbnMsImdlb3JzczpsaW5lIiksYi5hcHBlbmRDaGlsZCh0aGlzLmJ1aWxkQ29vcmRpbmF0ZXNOb2RlKGEpKTtlbHNlIGlmKCJPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50Ij09YS5DTEFTU19OQU1FKWI9dGhpcy5jcmVhdGVFbGVtZW50TlModGhpcy5nZW9yc3NucywiZ2VvcnNzOnBvaW50IiksYi5hcHBlbmRDaGlsZCh0aGlzLmJ1aWxkQ29vcmRpbmF0ZXNOb2RlKGEpKTtlbHNlIHRocm93IkNvdWxkbid0IHBhcnNlICIrYS5DTEFTU19OQU1FO3JldHVybiBifSxidWlsZENvb3JkaW5hdGVzTm9kZTpmdW5jdGlvbihhKXt2YXIgYj1udWxsO2EuY29tcG9uZW50cyYmKGI9YS5jb21wb25lbnRzKTtpZihiKXthPWIubGVuZ3RoO2Zvcih2YXIgYz1BcnJheShhKSxkPTA7ZDxhO2QrKyljW2RdPWJbZF0ueSsiICIrYltkXS54O2I9Yy5qb2luKCIgIil9ZWxzZSBiPWEueSsiICIrYS54O3JldHVybiB0aGlzLmNyZWF0ZVRleHROb2RlKGIpfSwKQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Gb3JtYXQuR2VvUlNTIn0pO09wZW5MYXllcnMuRm9ybWF0LldQU0NhcGFiaWxpdGllcz1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuRm9ybWF0LlhNTC5WZXJzaW9uZWRPR0Mse2RlZmF1bHRWZXJzaW9uOiIxLjAuMCIsQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Gb3JtYXQuV1BTQ2FwYWJpbGl0aWVzIn0pO09wZW5MYXllcnMuRm9ybWF0LldQU0NhcGFiaWxpdGllcy52MV8wXzA9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkZvcm1hdC5YTUwse25hbWVzcGFjZXM6e293czoiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9vd3MvMS4xIix3cHM6Imh0dHA6Ly93d3cub3Blbmdpcy5uZXQvd3BzLzEuMC4wIix4bGluazoiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayJ9LHJlZ0V4ZXM6e3RyaW1TcGFjZTovXlxzKnxccyokL2cscmVtb3ZlU3BhY2U6L1xzKi9nLHNwbGl0U3BhY2U6L1xzKy8sdHJpbUNvbW1hOi9ccyosXHMqL2d9LGluaXRpYWxpemU6ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5Gb3JtYXQuWE1MLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsW2FdKX0scmVhZDpmdW5jdGlvbihhKXsic3RyaW5nIj09dHlwZW9mIGEmJihhPU9wZW5MYXllcnMuRm9ybWF0LlhNTC5wcm90b3R5cGUucmVhZC5hcHBseSh0aGlzLFthXSkpO2EmJjk9PWEubm9kZVR5cGUmJihhPWEuZG9jdW1lbnRFbGVtZW50KTsKdmFyIGI9e307dGhpcy5yZWFkTm9kZShhLGIpO3JldHVybiBifSxyZWFkZXJzOnt3cHM6e0NhcGFiaWxpdGllczpmdW5jdGlvbihhLGIpe3RoaXMucmVhZENoaWxkTm9kZXMoYSxiKX0sUHJvY2Vzc09mZmVyaW5nczpmdW5jdGlvbihhLGIpe2IucHJvY2Vzc09mZmVyaW5ncz17fTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYi5wcm9jZXNzT2ZmZXJpbmdzKX0sUHJvY2VzczpmdW5jdGlvbihhLGIpe3ZhciBjPXtwcm9jZXNzVmVyc2lvbjp0aGlzLmdldEF0dHJpYnV0ZU5TKGEsdGhpcy5uYW1lc3BhY2VzLndwcywicHJvY2Vzc1ZlcnNpb24iKX07dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGMpO2JbYy5pZGVudGlmaWVyXT1jfSxMYW5ndWFnZXM6ZnVuY3Rpb24oYSxiKXtiLmxhbmd1YWdlcz1bXTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYi5sYW5ndWFnZXMpfSxEZWZhdWx0OmZ1bmN0aW9uKGEsYil7dmFyIGM9e2lzRGVmYXVsdDohMH07dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGMpO2IucHVzaChjKX0sClN1cHBvcnRlZDpmdW5jdGlvbihhLGIpe3ZhciBjPXt9O3RoaXMucmVhZENoaWxkTm9kZXMoYSxjKTtiLnB1c2goYyl9fSxvd3M6T3BlbkxheWVycy5Gb3JtYXQuT1dTQ29tbW9uLnYxXzFfMC5wcm90b3R5cGUucmVhZGVycy5vd3N9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuRm9ybWF0LldQU0NhcGFiaWxpdGllcy52MV8wXzAifSk7T3BlbkxheWVycy5Db250cm9sLlBpbmNoWm9vbT1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuQ29udHJvbCx7dHlwZTpPcGVuTGF5ZXJzLkNvbnRyb2wuVFlQRV9UT09MLHBpbmNoT3JpZ2luOm51bGwsY3VycmVudENlbnRlcjpudWxsLGF1dG9BY3RpdmF0ZTohMCxwcmVzZXJ2ZUNlbnRlcjohMSxpbml0aWFsaXplOmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5oYW5kbGVyPW5ldyBPcGVuTGF5ZXJzLkhhbmRsZXIuUGluY2godGhpcyx7c3RhcnQ6dGhpcy5waW5jaFN0YXJ0LG1vdmU6dGhpcy5waW5jaE1vdmUsZG9uZTp0aGlzLnBpbmNoRG9uZX0sdGhpcy5oYW5kbGVyT3B0aW9ucyl9LHBpbmNoU3RhcnQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLnByZXNlcnZlQ2VudGVyP3RoaXMubWFwLmdldFBpeGVsRnJvbUxvbkxhdCh0aGlzLm1hcC5nZXRDZW50ZXIoKSk6YS54eTt0aGlzLmN1cnJlbnRDZW50ZXI9CnRoaXMucGluY2hPcmlnaW49Y30scGluY2hNb3ZlOmZ1bmN0aW9uKGEsYil7dmFyIGM9Yi5zY2FsZSxkPXRoaXMubWFwLmxheWVyQ29udGFpbmVyT3JpZ2luUHgsZT10aGlzLnBpbmNoT3JpZ2luLGY9dGhpcy5wcmVzZXJ2ZUNlbnRlcj90aGlzLm1hcC5nZXRQaXhlbEZyb21Mb25MYXQodGhpcy5tYXAuZ2V0Q2VudGVyKCkpOmEueHksZz1NYXRoLnJvdW5kKGQueCtmLngtZS54KyhjLTEpKihkLngtZS54KSksZD1NYXRoLnJvdW5kKGQueStmLnktZS55KyhjLTEpKihkLnktZS55KSk7dGhpcy5tYXAuYXBwbHlUcmFuc2Zvcm0oZyxkLGMpO3RoaXMuY3VycmVudENlbnRlcj1mfSxwaW5jaERvbmU6ZnVuY3Rpb24oYSxiLGMpe3RoaXMubWFwLmFwcGx5VHJhbnNmb3JtKCk7YT10aGlzLm1hcC5nZXRab29tRm9yUmVzb2x1dGlvbih0aGlzLm1hcC5nZXRSZXNvbHV0aW9uKCkvYy5zY2FsZSwhMCk7aWYoYSE9PXRoaXMubWFwLmdldFpvb20oKXx8IXRoaXMuY3VycmVudENlbnRlci5lcXVhbHModGhpcy5waW5jaE9yaWdpbikpe2I9CnRoaXMubWFwLmdldFJlc29sdXRpb25Gb3Jab29tKGEpO2M9dGhpcy5tYXAuZ2V0TG9uTGF0RnJvbVBpeGVsKHRoaXMucGluY2hPcmlnaW4pO3ZhciBkPXRoaXMuY3VycmVudENlbnRlcixlPXRoaXMubWFwLmdldFNpemUoKTtjLmxvbis9YiooZS53LzItZC54KTtjLmxhdC09YiooZS5oLzItZC55KTt0aGlzLm1hcC5kaXYuY2xpZW50V2lkdGg9dGhpcy5tYXAuZGl2LmNsaWVudFdpZHRoO3RoaXMubWFwLnNldENlbnRlcihjLGEpfX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Db250cm9sLlBpbmNoWm9vbSJ9KTtPcGVuTGF5ZXJzLkNvbnRyb2wuVG91Y2hOYXZpZ2F0aW9uPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Db250cm9sLHtkcmFnUGFuOm51bGwsZHJhZ1Bhbk9wdGlvbnM6bnVsbCxwaW5jaFpvb206bnVsbCxwaW5jaFpvb21PcHRpb25zOm51bGwsY2xpY2tIYW5kbGVyT3B0aW9uczpudWxsLGRvY3VtZW50RHJhZzohMSxhdXRvQWN0aXZhdGU6ITAsaW5pdGlhbGl6ZTpmdW5jdGlvbihhKXt0aGlzLmhhbmRsZXJzPXt9O09wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmRlYWN0aXZhdGUoKTt0aGlzLmRyYWdQYW4mJnRoaXMuZHJhZ1Bhbi5kZXN0cm95KCk7dGhpcy5kcmFnUGFuPW51bGw7dGhpcy5waW5jaFpvb20mJih0aGlzLnBpbmNoWm9vbS5kZXN0cm95KCksZGVsZXRlIHRoaXMucGluY2hab29tKTtPcGVuTGF5ZXJzLkNvbnRyb2wucHJvdG90eXBlLmRlc3Ryb3kuYXBwbHkodGhpcywKYXJndW1lbnRzKX0sYWN0aXZhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gT3BlbkxheWVycy5Db250cm9sLnByb3RvdHlwZS5hY3RpdmF0ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk/KHRoaXMuZHJhZ1Bhbi5hY3RpdmF0ZSgpLHRoaXMuaGFuZGxlcnMuY2xpY2suYWN0aXZhdGUoKSx0aGlzLnBpbmNoWm9vbS5hY3RpdmF0ZSgpLCEwKTohMX0sZGVhY3RpdmF0ZTpmdW5jdGlvbigpe3JldHVybiBPcGVuTGF5ZXJzLkNvbnRyb2wucHJvdG90eXBlLmRlYWN0aXZhdGUuYXBwbHkodGhpcyxhcmd1bWVudHMpPyh0aGlzLmRyYWdQYW4uZGVhY3RpdmF0ZSgpLHRoaXMuaGFuZGxlcnMuY2xpY2suZGVhY3RpdmF0ZSgpLHRoaXMucGluY2hab29tLmRlYWN0aXZhdGUoKSwhMCk6ITF9LGRyYXc6ZnVuY3Rpb24oKXt2YXIgYT17Y2xpY2s6dGhpcy5kZWZhdWx0Q2xpY2ssZGJsY2xpY2s6dGhpcy5kZWZhdWx0RGJsQ2xpY2t9LGI9T3BlbkxheWVycy5VdGlsLmV4dGVuZCh7ImRvdWJsZSI6ITAsc3RvcERvdWJsZTohMCwKcGl4ZWxUb2xlcmFuY2U6Mn0sdGhpcy5jbGlja0hhbmRsZXJPcHRpb25zKTt0aGlzLmhhbmRsZXJzLmNsaWNrPW5ldyBPcGVuTGF5ZXJzLkhhbmRsZXIuQ2xpY2sodGhpcyxhLGIpO3RoaXMuZHJhZ1Bhbj1uZXcgT3BlbkxheWVycy5Db250cm9sLkRyYWdQYW4oT3BlbkxheWVycy5VdGlsLmV4dGVuZCh7bWFwOnRoaXMubWFwLGRvY3VtZW50RHJhZzp0aGlzLmRvY3VtZW50RHJhZ30sdGhpcy5kcmFnUGFuT3B0aW9ucykpO3RoaXMuZHJhZ1Bhbi5kcmF3KCk7dGhpcy5waW5jaFpvb209bmV3IE9wZW5MYXllcnMuQ29udHJvbC5QaW5jaFpvb20oT3BlbkxheWVycy5VdGlsLmV4dGVuZCh7bWFwOnRoaXMubWFwfSx0aGlzLnBpbmNoWm9vbU9wdGlvbnMpKX0sZGVmYXVsdENsaWNrOmZ1bmN0aW9uKGEpe2EubGFzdFRvdWNoZXMmJjI9PWEubGFzdFRvdWNoZXMubGVuZ3RoJiZ0aGlzLm1hcC56b29tT3V0KCl9LGRlZmF1bHREYmxDbGljazpmdW5jdGlvbihhKXt0aGlzLm1hcC56b29tVG8odGhpcy5tYXAuem9vbSsKMSxhLnh5KX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Db250cm9sLlRvdWNoTmF2aWdhdGlvbiJ9KTtPcGVuTGF5ZXJzLkNvbnNvbGUud2FybigiT3BlbkxheWVycy5SaWNvIGlzIGRlcHJlY2F0ZWQiKTtPcGVuTGF5ZXJzLlJpY289T3BlbkxheWVycy5SaWNvfHx7fTsKT3BlbkxheWVycy5SaWNvLkNvbG9yPU9wZW5MYXllcnMuQ2xhc3Moe2luaXRpYWxpemU6ZnVuY3Rpb24oYSxiLGMpe3RoaXMucmdiPXtyOmEsZzpiLGI6Y319LHNldFJlZDpmdW5jdGlvbihhKXt0aGlzLnJnYi5yPWF9LHNldEdyZWVuOmZ1bmN0aW9uKGEpe3RoaXMucmdiLmc9YX0sc2V0Qmx1ZTpmdW5jdGlvbihhKXt0aGlzLnJnYi5iPWF9LHNldEh1ZTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmFzSFNCKCk7Yi5oPWE7dGhpcy5yZ2I9T3BlbkxheWVycy5SaWNvLkNvbG9yLkhTQnRvUkdCKGIuaCxiLnMsYi5iKX0sc2V0U2F0dXJhdGlvbjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmFzSFNCKCk7Yi5zPWE7dGhpcy5yZ2I9T3BlbkxheWVycy5SaWNvLkNvbG9yLkhTQnRvUkdCKGIuaCxiLnMsYi5iKX0sc2V0QnJpZ2h0bmVzczpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmFzSFNCKCk7Yi5iPWE7dGhpcy5yZ2I9T3BlbkxheWVycy5SaWNvLkNvbG9yLkhTQnRvUkdCKGIuaCxiLnMsYi5iKX0sCmRhcmtlbjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmFzSFNCKCk7dGhpcy5yZ2I9T3BlbkxheWVycy5SaWNvLkNvbG9yLkhTQnRvUkdCKGIuaCxiLnMsTWF0aC5tYXgoYi5iLWEsMCkpfSxicmlnaHRlbjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmFzSFNCKCk7dGhpcy5yZ2I9T3BlbkxheWVycy5SaWNvLkNvbG9yLkhTQnRvUkdCKGIuaCxiLnMsTWF0aC5taW4oYi5iK2EsMSkpfSxibGVuZDpmdW5jdGlvbihhKXt0aGlzLnJnYi5yPU1hdGguZmxvb3IoKHRoaXMucmdiLnIrYS5yZ2IucikvMik7dGhpcy5yZ2IuZz1NYXRoLmZsb29yKCh0aGlzLnJnYi5nK2EucmdiLmcpLzIpO3RoaXMucmdiLmI9TWF0aC5mbG9vcigodGhpcy5yZ2IuYithLnJnYi5iKS8yKX0saXNCcmlnaHQ6ZnVuY3Rpb24oKXt0aGlzLmFzSFNCKCk7cmV0dXJuIDAuNTx0aGlzLmFzSFNCKCkuYn0saXNEYXJrOmZ1bmN0aW9uKCl7cmV0dXJuIXRoaXMuaXNCcmlnaHQoKX0sYXNSR0I6ZnVuY3Rpb24oKXtyZXR1cm4icmdiKCIrCnRoaXMucmdiLnIrIiwiK3RoaXMucmdiLmcrIiwiK3RoaXMucmdiLmIrIikifSxhc0hleDpmdW5jdGlvbigpe3JldHVybiIjIit0aGlzLnJnYi5yLnRvQ29sb3JQYXJ0KCkrdGhpcy5yZ2IuZy50b0NvbG9yUGFydCgpK3RoaXMucmdiLmIudG9Db2xvclBhcnQoKX0sYXNIU0I6ZnVuY3Rpb24oKXtyZXR1cm4gT3BlbkxheWVycy5SaWNvLkNvbG9yLlJHQnRvSFNCKHRoaXMucmdiLnIsdGhpcy5yZ2IuZyx0aGlzLnJnYi5iKX0sdG9TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hc0hleCgpfX0pOwpPcGVuTGF5ZXJzLlJpY28uQ29sb3IuY3JlYXRlRnJvbUhleD1mdW5jdGlvbihhKXtpZig0PT1hLmxlbmd0aCl7dmFyIGI9YTthPSIjIjtmb3IodmFyIGM9MTs0PmM7YysrKWErPWIuY2hhckF0KGMpK2IuY2hhckF0KGMpfTA9PWEuaW5kZXhPZigiIyIpJiYoYT1hLnN1YnN0cmluZygxKSk7Yj1hLnN1YnN0cmluZygwLDIpO2M9YS5zdWJzdHJpbmcoMiw0KTthPWEuc3Vic3RyaW5nKDQsNik7cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLlJpY28uQ29sb3IocGFyc2VJbnQoYiwxNikscGFyc2VJbnQoYywxNikscGFyc2VJbnQoYSwxNikpfTsKT3BlbkxheWVycy5SaWNvLkNvbG9yLmNyZWF0ZUNvbG9yRnJvbUJhY2tncm91bmQ9ZnVuY3Rpb24oYSl7dmFyIGI9T3BlbkxheWVycy5FbGVtZW50LmdldFN0eWxlKE9wZW5MYXllcnMuVXRpbC5nZXRFbGVtZW50KGEpLCJiYWNrZ3JvdW5kQ29sb3IiKTtyZXR1cm4idHJhbnNwYXJlbnQiPT1iJiZhLnBhcmVudE5vZGU/T3BlbkxheWVycy5SaWNvLkNvbG9yLmNyZWF0ZUNvbG9yRnJvbUJhY2tncm91bmQoYS5wYXJlbnROb2RlKTpudWxsPT1iP25ldyBPcGVuTGF5ZXJzLlJpY28uQ29sb3IoMjU1LDI1NSwyNTUpOjA9PWIuaW5kZXhPZigicmdiKCIpPyhhPWIuc3Vic3RyaW5nKDQsYi5sZW5ndGgtMSkuc3BsaXQoIiwiKSxuZXcgT3BlbkxheWVycy5SaWNvLkNvbG9yKHBhcnNlSW50KGFbMF0pLHBhcnNlSW50KGFbMV0pLHBhcnNlSW50KGFbMl0pKSk6MD09Yi5pbmRleE9mKCIjIik/T3BlbkxheWVycy5SaWNvLkNvbG9yLmNyZWF0ZUZyb21IZXgoYik6bmV3IE9wZW5MYXllcnMuUmljby5Db2xvcigyNTUsCjI1NSwyNTUpfTsKT3BlbkxheWVycy5SaWNvLkNvbG9yLkhTQnRvUkdCPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD0wLGU9MCxmPTA7aWYoMD09YilmPWU9ZD1wYXJzZUludCgyNTUqYyswLjUpO2Vsc2V7YT02KihhLU1hdGguZmxvb3IoYSkpO3ZhciBnPWEtTWF0aC5mbG9vcihhKSxoPWMqKDEtYiksaz1jKigxLWIqZyk7Yj1jKigxLWIqKDEtZykpO3N3aXRjaChwYXJzZUludChhKSl7Y2FzZSAwOmQ9MjU1KmMrMC41O2U9MjU1KmIrMC41O2Y9MjU1KmgrMC41O2JyZWFrO2Nhc2UgMTpkPTI1NSprKzAuNTtlPTI1NSpjKzAuNTtmPTI1NSpoKzAuNTticmVhaztjYXNlIDI6ZD0yNTUqaCswLjU7ZT0yNTUqYyswLjU7Zj0yNTUqYiswLjU7YnJlYWs7Y2FzZSAzOmQ9MjU1KmgrMC41O2U9MjU1KmsrMC41O2Y9MjU1KmMrMC41O2JyZWFrO2Nhc2UgNDpkPTI1NSpiKzAuNTtlPTI1NSpoKzAuNTtmPTI1NSpjKzAuNTticmVhaztjYXNlIDU6ZD0yNTUqYyswLjUsZT0yNTUqaCswLjUsZj0yNTUqayswLjV9fXJldHVybntyOnBhcnNlSW50KGQpLGc6cGFyc2VJbnQoZSksCmI6cGFyc2VJbnQoZil9fTtPcGVuTGF5ZXJzLlJpY28uQ29sb3IuUkdCdG9IU0I9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGU9YT5iP2E6YjtjPmUmJihlPWMpO3ZhciBmPWE8Yj9hOmI7YzxmJiYoZj1jKTtkPTAhPWU/KGUtZikvZTowO2lmKDA9PWQpYT0wO2Vsc2V7dmFyIGc9KGUtYSkvKGUtZiksaD0oZS1iKS8oZS1mKTtjPShlLWMpLyhlLWYpO2E9KGE9PWU/Yy1oOmI9PWU/MitnLWM6NCtoLWcpLzY7MD5hJiYoYSs9MSl9cmV0dXJue2g6YSxzOmQsYjplLzI1NX19O09wZW5MYXllcnMuU3R5bGUyPU9wZW5MYXllcnMuQ2xhc3Moe2lkOm51bGwsbmFtZTpudWxsLHRpdGxlOm51bGwsZGVzY3JpcHRpb246bnVsbCxsYXllck5hbWU6bnVsbCxpc0RlZmF1bHQ6ITEscnVsZXM6bnVsbCxpbml0aWFsaXplOmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuVXRpbC5leHRlbmQodGhpcyxhKTt0aGlzLmlkPU9wZW5MYXllcnMuVXRpbC5jcmVhdGVVbmlxdWVJRCh0aGlzLkNMQVNTX05BTUUrIl8iKX0sZGVzdHJveTpmdW5jdGlvbigpe2Zvcih2YXIgYT0wLGI9dGhpcy5ydWxlcy5sZW5ndGg7YTxiO2ErKyl0aGlzLnJ1bGVzW2FdLmRlc3Ryb3koKTtkZWxldGUgdGhpcy5ydWxlc30sY2xvbmU6ZnVuY3Rpb24oKXt2YXIgYT1PcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHt9LHRoaXMpO2lmKHRoaXMucnVsZXMpe2EucnVsZXM9W107Zm9yKHZhciBiPTAsYz10aGlzLnJ1bGVzLmxlbmd0aDtiPGM7KytiKWEucnVsZXMucHVzaCh0aGlzLnJ1bGVzW2JdLmNsb25lKCkpfXJldHVybiBuZXcgT3BlbkxheWVycy5TdHlsZTIoYSl9LApDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLlN0eWxlMiJ9KTtPcGVuTGF5ZXJzLkZvcm1hdC5XRlM9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkZvcm1hdC5HTUwse2xheWVyOm51bGwsd2ZzbnM6Imh0dHA6Ly93d3cub3Blbmdpcy5uZXQvd2ZzIixvZ2NuczoiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9vZ2MiLGluaXRpYWxpemU6ZnVuY3Rpb24oYSxiKXtPcGVuTGF5ZXJzLkZvcm1hdC5HTUwucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxbYV0pO3RoaXMubGF5ZXI9Yjt0aGlzLmxheWVyLmZlYXR1cmVOUyYmKHRoaXMuZmVhdHVyZU5TPXRoaXMubGF5ZXIuZmVhdHVyZU5TKTt0aGlzLmxheWVyLm9wdGlvbnMuZ2VvbWV0cnlfY29sdW1uJiYodGhpcy5nZW9tZXRyeU5hbWU9dGhpcy5sYXllci5vcHRpb25zLmdlb21ldHJ5X2NvbHVtbik7dGhpcy5sYXllci5vcHRpb25zLnR5cGVuYW1lJiYodGhpcy5mZWF0dXJlTmFtZT10aGlzLmxheWVyLm9wdGlvbnMudHlwZW5hbWUpfSx3cml0ZTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROUyh0aGlzLndmc25zLAoid2ZzOlRyYW5zYWN0aW9uIik7Yi5zZXRBdHRyaWJ1dGUoInZlcnNpb24iLCIxLjAuMCIpO2Iuc2V0QXR0cmlidXRlKCJzZXJ2aWNlIiwiV0ZTIik7Zm9yKHZhciBjPTA7YzxhLmxlbmd0aDtjKyspc3dpdGNoKGFbY10uc3RhdGUpe2Nhc2UgT3BlbkxheWVycy5TdGF0ZS5JTlNFUlQ6Yi5hcHBlbmRDaGlsZCh0aGlzLmluc2VydChhW2NdKSk7YnJlYWs7Y2FzZSBPcGVuTGF5ZXJzLlN0YXRlLlVQREFURTpiLmFwcGVuZENoaWxkKHRoaXMudXBkYXRlKGFbY10pKTticmVhaztjYXNlIE9wZW5MYXllcnMuU3RhdGUuREVMRVRFOmIuYXBwZW5kQ2hpbGQodGhpcy5yZW1vdmUoYVtjXSkpfXJldHVybiBPcGVuTGF5ZXJzLkZvcm1hdC5YTUwucHJvdG90eXBlLndyaXRlLmFwcGx5KHRoaXMsW2JdKX0sY3JlYXRlRmVhdHVyZVhNTDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmJ1aWxkR2VvbWV0cnlOb2RlKGEuZ2VvbWV0cnkpLGM9dGhpcy5jcmVhdGVFbGVtZW50TlModGhpcy5mZWF0dXJlTlMsImZlYXR1cmU6IisKdGhpcy5nZW9tZXRyeU5hbWUpO2MuYXBwZW5kQ2hpbGQoYik7Yj10aGlzLmNyZWF0ZUVsZW1lbnROUyh0aGlzLmZlYXR1cmVOUywiZmVhdHVyZToiK3RoaXMuZmVhdHVyZU5hbWUpO2IuYXBwZW5kQ2hpbGQoYyk7Zm9yKHZhciBkIGluIGEuYXR0cmlidXRlcyl7dmFyIGM9dGhpcy5jcmVhdGVUZXh0Tm9kZShhLmF0dHJpYnV0ZXNbZF0pLGU9ZDstMSE9ZC5zZWFyY2goIjoiKSYmKGU9ZC5zcGxpdCgiOiIpWzFdKTtlPXRoaXMuY3JlYXRlRWxlbWVudE5TKHRoaXMuZmVhdHVyZU5TLCJmZWF0dXJlOiIrZSk7ZS5hcHBlbmRDaGlsZChjKTtiLmFwcGVuZENoaWxkKGUpfXJldHVybiBifSxpbnNlcnQ6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlModGhpcy53ZnNucywid2ZzOkluc2VydCIpO2IuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVGZWF0dXJlWE1MKGEpKTtyZXR1cm4gYn0sdXBkYXRlOmZ1bmN0aW9uKGEpe2EuZmlkfHxPcGVuTGF5ZXJzLkNvbnNvbGUudXNlckVycm9yKE9wZW5MYXllcnMuaTE4bigibm9GSUQiKSk7CnZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TKHRoaXMud2ZzbnMsIndmczpVcGRhdGUiKTtiLnNldEF0dHJpYnV0ZSgidHlwZU5hbWUiLHRoaXMuZmVhdHVyZVByZWZpeCsiOiIrdGhpcy5mZWF0dXJlTmFtZSk7Yi5zZXRBdHRyaWJ1dGUoInhtbG5zOiIrdGhpcy5mZWF0dXJlUHJlZml4LHRoaXMuZmVhdHVyZU5TKTt2YXIgYz10aGlzLmNyZWF0ZUVsZW1lbnROUyh0aGlzLndmc25zLCJ3ZnM6UHJvcGVydHkiKSxkPXRoaXMuY3JlYXRlRWxlbWVudE5TKHRoaXMud2ZzbnMsIndmczpOYW1lIiksZT10aGlzLmNyZWF0ZVRleHROb2RlKHRoaXMuZ2VvbWV0cnlOYW1lKTtkLmFwcGVuZENoaWxkKGUpO2MuYXBwZW5kQ2hpbGQoZCk7ZD10aGlzLmNyZWF0ZUVsZW1lbnROUyh0aGlzLndmc25zLCJ3ZnM6VmFsdWUiKTtlPXRoaXMuYnVpbGRHZW9tZXRyeU5vZGUoYS5nZW9tZXRyeSk7YS5sYXllciYmZS5zZXRBdHRyaWJ1dGUoInNyc05hbWUiLGEubGF5ZXIucHJvamVjdGlvbi5nZXRDb2RlKCkpOwpkLmFwcGVuZENoaWxkKGUpO2MuYXBwZW5kQ2hpbGQoZCk7Yi5hcHBlbmRDaGlsZChjKTtmb3IodmFyIGYgaW4gYS5hdHRyaWJ1dGVzKWM9dGhpcy5jcmVhdGVFbGVtZW50TlModGhpcy53ZnNucywid2ZzOlByb3BlcnR5IiksZD10aGlzLmNyZWF0ZUVsZW1lbnROUyh0aGlzLndmc25zLCJ3ZnM6TmFtZSIpLGQuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVUZXh0Tm9kZShmKSksYy5hcHBlbmRDaGlsZChkKSxkPXRoaXMuY3JlYXRlRWxlbWVudE5TKHRoaXMud2ZzbnMsIndmczpWYWx1ZSIpLGQuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVUZXh0Tm9kZShhLmF0dHJpYnV0ZXNbZl0pKSxjLmFwcGVuZENoaWxkKGQpLGIuYXBwZW5kQ2hpbGQoYyk7Yz10aGlzLmNyZWF0ZUVsZW1lbnROUyh0aGlzLm9nY25zLCJvZ2M6RmlsdGVyIik7Zj10aGlzLmNyZWF0ZUVsZW1lbnROUyh0aGlzLm9nY25zLCJvZ2M6RmVhdHVyZUlkIik7Zi5zZXRBdHRyaWJ1dGUoImZpZCIsYS5maWQpO2MuYXBwZW5kQ2hpbGQoZik7CmIuYXBwZW5kQ2hpbGQoYyk7cmV0dXJuIGJ9LHJlbW92ZTpmdW5jdGlvbihhKXtpZighYS5maWQpcmV0dXJuIE9wZW5MYXllcnMuQ29uc29sZS51c2VyRXJyb3IoT3BlbkxheWVycy5pMThuKCJub0ZJRCIpKSwhMTt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROUyh0aGlzLndmc25zLCJ3ZnM6RGVsZXRlIik7Yi5zZXRBdHRyaWJ1dGUoInR5cGVOYW1lIix0aGlzLmZlYXR1cmVQcmVmaXgrIjoiK3RoaXMuZmVhdHVyZU5hbWUpO2Iuc2V0QXR0cmlidXRlKCJ4bWxuczoiK3RoaXMuZmVhdHVyZVByZWZpeCx0aGlzLmZlYXR1cmVOUyk7dmFyIGM9dGhpcy5jcmVhdGVFbGVtZW50TlModGhpcy5vZ2Nucywib2djOkZpbHRlciIpLGQ9dGhpcy5jcmVhdGVFbGVtZW50TlModGhpcy5vZ2Nucywib2djOkZlYXR1cmVJZCIpO2Quc2V0QXR0cmlidXRlKCJmaWQiLGEuZmlkKTtjLmFwcGVuZENoaWxkKGQpO2IuYXBwZW5kQ2hpbGQoYyk7cmV0dXJuIGJ9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmxheWVyPQpudWxsfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkZvcm1hdC5XRlMifSk7T3BlbkxheWVycy5Gb3JtYXQuU0xELnYxXzBfMF9HZW9TZXJ2ZXI9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkZvcm1hdC5TTEQudjFfMF8wLHt2ZXJzaW9uOiIxLjAuMCIscHJvZmlsZToiR2VvU2VydmVyIixyZWFkZXJzOk9wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKHtzbGQ6T3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoe1ByaW9yaXR5OmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5yZWFkZXJzLm9nYy5fZXhwcmVzc2lvbi5jYWxsKHRoaXMsYSk7YyYmKGIucHJpb3JpdHk9Yyl9LFZlbmRvck9wdGlvbjpmdW5jdGlvbihhLGIpe2IudmVuZG9yT3B0aW9uc3x8KGIudmVuZG9yT3B0aW9ucz17fSk7Yi52ZW5kb3JPcHRpb25zW2EuZ2V0QXR0cmlidXRlKCJuYW1lIildPXRoaXMuZ2V0Q2hpbGRWYWx1ZShhKX0sVGV4dFN5bWJvbGl6ZXI6ZnVuY3Rpb24oYSxiKXtPcGVuTGF5ZXJzLkZvcm1hdC5TTEQudjFfMF8wLnByb3RvdHlwZS5yZWFkZXJzLnNsZC5UZXh0U3ltYm9saXplci5hcHBseSh0aGlzLAphcmd1bWVudHMpO3ZhciBjPXRoaXMubXVsdGlwbGVTeW1ib2xpemVycz9iLnN5bWJvbGl6ZXJzW2Iuc3ltYm9saXplcnMubGVuZ3RoLTFdOmIuc3ltYm9saXplci5UZXh0O3ZvaWQgMD09PWMuZ3JhcGhpYyYmKGMuZ3JhcGhpYz0hMSl9fSxPcGVuTGF5ZXJzLkZvcm1hdC5TTEQudjFfMF8wLnByb3RvdHlwZS5yZWFkZXJzLnNsZCl9LE9wZW5MYXllcnMuRm9ybWF0LlNMRC52MV8wXzAucHJvdG90eXBlLnJlYWRlcnMpLHdyaXRlcnM6T3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoe3NsZDpPcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyh7UHJpb3JpdHk6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMud3JpdGVycy5zbGQuX09HQ0V4cHJlc3Npb24uY2FsbCh0aGlzLCJzbGQ6UHJpb3JpdHkiLGEpfSxWZW5kb3JPcHRpb246ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygic2xkOlZlbmRvck9wdGlvbiIse2F0dHJpYnV0ZXM6e25hbWU6YS5uYW1lfSwKdmFsdWU6YS52YWx1ZX0pfSxUZXh0U3ltYm9saXplcjpmdW5jdGlvbihhKXt2YXIgYj1PcGVuTGF5ZXJzLkZvcm1hdC5TTEQudjFfMF8wLnByb3RvdHlwZS53cml0ZXJzLnNsZC5UZXh0U3ltYm9saXplci5hcHBseSh0aGlzLGFyZ3VtZW50cyk7ITEhPT1hLmdyYXBoaWMmJihhLmV4dGVybmFsR3JhcGhpY3x8YS5ncmFwaGljTmFtZSkmJnRoaXMud3JpdGVOb2RlKCJHcmFwaGljIixhLGIpOyJwcmlvcml0eSJpbiBhJiZ0aGlzLndyaXRlTm9kZSgiUHJpb3JpdHkiLGEucHJpb3JpdHksYik7cmV0dXJuIHRoaXMuYWRkVmVuZG9yT3B0aW9ucyhiLGEpfSxQb2ludFN5bWJvbGl6ZXI6ZnVuY3Rpb24oYSl7dmFyIGI9T3BlbkxheWVycy5Gb3JtYXQuU0xELnYxXzBfMC5wcm90b3R5cGUud3JpdGVycy5zbGQuUG9pbnRTeW1ib2xpemVyLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtyZXR1cm4gdGhpcy5hZGRWZW5kb3JPcHRpb25zKGIsYSl9LExpbmVTeW1ib2xpemVyOmZ1bmN0aW9uKGEpe3ZhciBiPQpPcGVuTGF5ZXJzLkZvcm1hdC5TTEQudjFfMF8wLnByb3RvdHlwZS53cml0ZXJzLnNsZC5MaW5lU3ltYm9saXplci5hcHBseSh0aGlzLGFyZ3VtZW50cyk7cmV0dXJuIHRoaXMuYWRkVmVuZG9yT3B0aW9ucyhiLGEpfSxQb2x5Z29uU3ltYm9saXplcjpmdW5jdGlvbihhKXt2YXIgYj1PcGVuTGF5ZXJzLkZvcm1hdC5TTEQudjFfMF8wLnByb3RvdHlwZS53cml0ZXJzLnNsZC5Qb2x5Z29uU3ltYm9saXplci5hcHBseSh0aGlzLGFyZ3VtZW50cyk7cmV0dXJuIHRoaXMuYWRkVmVuZG9yT3B0aW9ucyhiLGEpfX0sT3BlbkxheWVycy5Gb3JtYXQuU0xELnYxXzBfMC5wcm90b3R5cGUud3JpdGVycy5zbGQpfSxPcGVuTGF5ZXJzLkZvcm1hdC5TTEQudjFfMF8wLnByb3RvdHlwZS53cml0ZXJzKSxhZGRWZW5kb3JPcHRpb25zOmZ1bmN0aW9uKGEsYil7aWYoYi52ZW5kb3JPcHRpb25zKWZvcih2YXIgYyBpbiBiLnZlbmRvck9wdGlvbnMpdGhpcy53cml0ZU5vZGUoIlZlbmRvck9wdGlvbiIse25hbWU6YywKdmFsdWU6Yi52ZW5kb3JPcHRpb25zW2NdfSxhKTtyZXR1cm4gYX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Gb3JtYXQuU0xELnYxXzBfMF9HZW9TZXJ2ZXIifSk7T3BlbkxheWVycy5MYXllci5Cb3hlcz1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuTGF5ZXIuTWFya2Vycyx7ZHJhd01hcmtlcjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLm1hcC5nZXRMYXllclB4RnJvbUxvbkxhdCh7bG9uOmEuYm91bmRzLmxlZnQsbGF0OmEuYm91bmRzLnRvcH0pLGM9dGhpcy5tYXAuZ2V0TGF5ZXJQeEZyb21Mb25MYXQoe2xvbjphLmJvdW5kcy5yaWdodCxsYXQ6YS5ib3VuZHMuYm90dG9tfSk7bnVsbD09Y3x8bnVsbD09Yj9hLmRpc3BsYXkoITEpOihiPWEuZHJhdyhiLHt3Ok1hdGgubWF4KDEsYy54LWIueCksaDpNYXRoLm1heCgxLGMueS1iLnkpfSksYS5kcmF3bnx8KHRoaXMuZGl2LmFwcGVuZENoaWxkKGIpLGEuZHJhd249ITApKX0scmVtb3ZlTWFya2VyOmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuVXRpbC5yZW1vdmVJdGVtKHRoaXMubWFya2VycyxhKTtudWxsIT1hLmRpdiYmYS5kaXYucGFyZW50Tm9kZT09dGhpcy5kaXYmJnRoaXMuZGl2LnJlbW92ZUNoaWxkKGEuZGl2KX0sCkNMQVNTX05BTUU6Ik9wZW5MYXllcnMuTGF5ZXIuQm94ZXMifSk7T3BlbkxheWVycy5Gb3JtYXQuV0ZTQ2FwYWJpbGl0aWVzLnYxXzBfMD1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuRm9ybWF0LldGU0NhcGFiaWxpdGllcy52MSx7cmVhZGVyczp7d2ZzOk9wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKHtTZXJ2aWNlOmZ1bmN0aW9uKGEsYil7Yi5zZXJ2aWNlPXt9O3RoaXMucmVhZENoaWxkTm9kZXMoYSxiLnNlcnZpY2UpfSxGZWVzOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5nZXRDaGlsZFZhbHVlKGEpO2MmJiJub25lIiE9Yy50b0xvd2VyQ2FzZSgpJiYoYi5mZWVzPWMpfSxBY2Nlc3NDb25zdHJhaW50czpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuZ2V0Q2hpbGRWYWx1ZShhKTtjJiYibm9uZSIhPWMudG9Mb3dlckNhc2UoKSYmKGIuYWNjZXNzQ29uc3RyYWludHM9Yyl9LE9ubGluZVJlc291cmNlOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5nZXRDaGlsZFZhbHVlKGEpO2MmJiJub25lIiE9Yy50b0xvd2VyQ2FzZSgpJiYoYi5vbmxpbmVSZXNvdXJjZT0KYyl9LEtleXdvcmRzOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5nZXRDaGlsZFZhbHVlKGEpO2MmJiJub25lIiE9Yy50b0xvd2VyQ2FzZSgpJiYoYi5rZXl3b3Jkcz1jLnNwbGl0KCIsICIpKX0sQ2FwYWJpbGl0eTpmdW5jdGlvbihhLGIpe2IuY2FwYWJpbGl0eT17fTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYi5jYXBhYmlsaXR5KX0sUmVxdWVzdDpmdW5jdGlvbihhLGIpe2IucmVxdWVzdD17fTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYi5yZXF1ZXN0KX0sR2V0RmVhdHVyZTpmdW5jdGlvbihhLGIpe2IuZ2V0ZmVhdHVyZT17aHJlZjp7fSxmb3JtYXRzOltdfTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYi5nZXRmZWF0dXJlKX0sUmVzdWx0Rm9ybWF0OmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPWEuY2hpbGROb2RlcyxkLGU9MDtlPGMubGVuZ3RoO2UrKylkPWNbZV0sMT09ZC5ub2RlVHlwZSYmYi5mb3JtYXRzLnB1c2goZC5ub2RlTmFtZSl9LERDUFR5cGU6ZnVuY3Rpb24oYSxiKXt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsCmIpfSxIVFRQOmZ1bmN0aW9uKGEsYil7dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGIuaHJlZil9LEdldDpmdW5jdGlvbihhLGIpe2IuZ2V0PWEuZ2V0QXR0cmlidXRlKCJvbmxpbmVSZXNvdXJjZSIpfSxQb3N0OmZ1bmN0aW9uKGEsYil7Yi5wb3N0PWEuZ2V0QXR0cmlidXRlKCJvbmxpbmVSZXNvdXJjZSIpfSxTUlM6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmdldENoaWxkVmFsdWUoYSk7YyYmKGIuc3JzPWMpfX0sT3BlbkxheWVycy5Gb3JtYXQuV0ZTQ2FwYWJpbGl0aWVzLnYxLnByb3RvdHlwZS5yZWFkZXJzLndmcyl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuRm9ybWF0LldGU0NhcGFiaWxpdGllcy52MV8wXzAifSk7T3BlbkxheWVycy5Gb3JtYXQuV01TQ2FwYWJpbGl0aWVzLnYxXzM9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkZvcm1hdC5XTVNDYXBhYmlsaXRpZXMudjEse3JlYWRlcnM6e3dtczpPcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyh7V01TX0NhcGFiaWxpdGllczpmdW5jdGlvbihhLGIpe3RoaXMucmVhZENoaWxkTm9kZXMoYSxiKX0sTGF5ZXJMaW1pdDpmdW5jdGlvbihhLGIpe2IubGF5ZXJMaW1pdD1wYXJzZUludCh0aGlzLmdldENoaWxkVmFsdWUoYSkpfSxNYXhXaWR0aDpmdW5jdGlvbihhLGIpe2IubWF4V2lkdGg9cGFyc2VJbnQodGhpcy5nZXRDaGlsZFZhbHVlKGEpKX0sTWF4SGVpZ2h0OmZ1bmN0aW9uKGEsYil7Yi5tYXhIZWlnaHQ9cGFyc2VJbnQodGhpcy5nZXRDaGlsZFZhbHVlKGEpKX0sQm91bmRpbmdCb3g6ZnVuY3Rpb24oYSxiKXt2YXIgYz1PcGVuTGF5ZXJzLkZvcm1hdC5XTVNDYXBhYmlsaXRpZXMudjEucHJvdG90eXBlLnJlYWRlcnMud21zLkJvdW5kaW5nQm94LmFwcGx5KHRoaXMsClthLGJdKTtjLnNycz1hLmdldEF0dHJpYnV0ZSgiQ1JTIik7Yi5iYm94W2Muc3JzXT1jfSxDUlM6ZnVuY3Rpb24oYSxiKXt0aGlzLnJlYWRlcnMud21zLlNSUy5hcHBseSh0aGlzLFthLGJdKX0sRVhfR2VvZ3JhcGhpY0JvdW5kaW5nQm94OmZ1bmN0aW9uKGEsYil7Yi5sbGJib3g9W107dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGIubGxiYm94KX0sd2VzdEJvdW5kTG9uZ2l0dWRlOmZ1bmN0aW9uKGEsYil7YlswXT10aGlzLmdldENoaWxkVmFsdWUoYSl9LGVhc3RCb3VuZExvbmdpdHVkZTpmdW5jdGlvbihhLGIpe2JbMl09dGhpcy5nZXRDaGlsZFZhbHVlKGEpfSxzb3V0aEJvdW5kTGF0aXR1ZGU6ZnVuY3Rpb24oYSxiKXtiWzFdPXRoaXMuZ2V0Q2hpbGRWYWx1ZShhKX0sbm9ydGhCb3VuZExhdGl0dWRlOmZ1bmN0aW9uKGEsYil7YlszXT10aGlzLmdldENoaWxkVmFsdWUoYSl9LE1pblNjYWxlRGVub21pbmF0b3I6ZnVuY3Rpb24oYSxiKXtiLm1heFNjYWxlPXBhcnNlRmxvYXQodGhpcy5nZXRDaGlsZFZhbHVlKGEpKS50b1ByZWNpc2lvbigxNil9LApNYXhTY2FsZURlbm9taW5hdG9yOmZ1bmN0aW9uKGEsYil7Yi5taW5TY2FsZT1wYXJzZUZsb2F0KHRoaXMuZ2V0Q2hpbGRWYWx1ZShhKSkudG9QcmVjaXNpb24oMTYpfSxEaW1lbnNpb246ZnVuY3Rpb24oYSxiKXt2YXIgYz17bmFtZTphLmdldEF0dHJpYnV0ZSgibmFtZSIpLnRvTG93ZXJDYXNlKCksdW5pdHM6YS5nZXRBdHRyaWJ1dGUoInVuaXRzIiksdW5pdHN5bWJvbDphLmdldEF0dHJpYnV0ZSgidW5pdFN5bWJvbCIpLG5lYXJlc3RWYWw6IjEiPT09YS5nZXRBdHRyaWJ1dGUoIm5lYXJlc3RWYWx1ZSIpLG11bHRpcGxlVmFsOiIxIj09PWEuZ2V0QXR0cmlidXRlKCJtdWx0aXBsZVZhbHVlcyIpLCJkZWZhdWx0IjphLmdldEF0dHJpYnV0ZSgiZGVmYXVsdCIpfHwiIixjdXJyZW50OiIxIj09PWEuZ2V0QXR0cmlidXRlKCJjdXJyZW50IiksdmFsdWVzOnRoaXMuZ2V0Q2hpbGRWYWx1ZShhKS5zcGxpdCgiLCIpfTtiLmRpbWVuc2lvbnNbYy5uYW1lXT1jfSxLZXl3b3JkOmZ1bmN0aW9uKGEsCmIpe3ZhciBjPXt2YWx1ZTp0aGlzLmdldENoaWxkVmFsdWUoYSksdm9jYWJ1bGFyeTphLmdldEF0dHJpYnV0ZSgidm9jYWJ1bGFyeSIpfTtiLmtleXdvcmRzJiZiLmtleXdvcmRzLnB1c2goYyl9fSxPcGVuTGF5ZXJzLkZvcm1hdC5XTVNDYXBhYmlsaXRpZXMudjEucHJvdG90eXBlLnJlYWRlcnMud21zKSxzbGQ6e1VzZXJEZWZpbmVkU3ltYm9saXphdGlvbjpmdW5jdGlvbihhLGIpe3RoaXMucmVhZGVycy53bXMuVXNlckRlZmluZWRTeW1ib2xpemF0aW9uLmFwcGx5KHRoaXMsW2EsYl0pO2IudXNlclN5bWJvbHMuaW5saW5lRmVhdHVyZT0xPT1wYXJzZUludChhLmdldEF0dHJpYnV0ZSgiSW5saW5lRmVhdHVyZSIpKTtiLnVzZXJTeW1ib2xzLnJlbW90ZVdDUz0xPT1wYXJzZUludChhLmdldEF0dHJpYnV0ZSgiUmVtb3RlV0NTIikpfSxEZXNjcmliZUxheWVyOmZ1bmN0aW9uKGEsYil7dGhpcy5yZWFkZXJzLndtcy5EZXNjcmliZUxheWVyLmFwcGx5KHRoaXMsW2EsYl0pfSxHZXRMZWdlbmRHcmFwaGljOmZ1bmN0aW9uKGEsCmIpe3RoaXMucmVhZGVycy53bXMuR2V0TGVnZW5kR3JhcGhpYy5hcHBseSh0aGlzLFthLGJdKX19fSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkZvcm1hdC5XTVNDYXBhYmlsaXRpZXMudjFfMyJ9KTtPcGVuTGF5ZXJzLkxheWVyLlpvb21pZnk9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkxheWVyLkdyaWQse3NpemU6bnVsbCxpc0Jhc2VMYXllcjohMCxzdGFuZGFyZFRpbGVTaXplOjI1Nix0aWxlT3JpZ2luQ29ybmVyOiJ0bCIsbnVtYmVyT2ZUaWVyczowLHRpbGVDb3VudFVwVG9UaWVyOm51bGwsdGllclNpemVJblRpbGVzOm51bGwsdGllckltYWdlU2l6ZTpudWxsLGluaXRpYWxpemU6ZnVuY3Rpb24oYSxiLGMsZCl7dGhpcy5pbml0aWFsaXplWm9vbWlmeShjKTtPcGVuTGF5ZXJzLkxheWVyLkdyaWQucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxbYSxiLGMse30sZF0pfSxpbml0aWFsaXplWm9vbWlmeTpmdW5jdGlvbihhKXt2YXIgYj1hLmNsb25lKCk7dGhpcy5zaXplPWEuY2xvbmUoKTthPW5ldyBPcGVuTGF5ZXJzLlNpemUoTWF0aC5jZWlsKGIudy90aGlzLnN0YW5kYXJkVGlsZVNpemUpLE1hdGguY2VpbChiLmgvdGhpcy5zdGFuZGFyZFRpbGVTaXplKSk7dGhpcy50aWVyU2l6ZUluVGlsZXM9ClthXTtmb3IodGhpcy50aWVySW1hZ2VTaXplPVtiXTtiLnc+dGhpcy5zdGFuZGFyZFRpbGVTaXplfHxiLmg+dGhpcy5zdGFuZGFyZFRpbGVTaXplOyliPW5ldyBPcGVuTGF5ZXJzLlNpemUoTWF0aC5mbG9vcihiLncvMiksTWF0aC5mbG9vcihiLmgvMikpLGE9bmV3IE9wZW5MYXllcnMuU2l6ZShNYXRoLmNlaWwoYi53L3RoaXMuc3RhbmRhcmRUaWxlU2l6ZSksTWF0aC5jZWlsKGIuaC90aGlzLnN0YW5kYXJkVGlsZVNpemUpKSx0aGlzLnRpZXJTaXplSW5UaWxlcy5wdXNoKGEpLHRoaXMudGllckltYWdlU2l6ZS5wdXNoKGIpO3RoaXMudGllclNpemVJblRpbGVzLnJldmVyc2UoKTt0aGlzLnRpZXJJbWFnZVNpemUucmV2ZXJzZSgpO3RoaXMubnVtYmVyT2ZUaWVycz10aGlzLnRpZXJTaXplSW5UaWxlcy5sZW5ndGg7Yj1bMV07dGhpcy50aWxlQ291bnRVcFRvVGllcj1bMF07Zm9yKGE9MTthPHRoaXMubnVtYmVyT2ZUaWVyczthKyspYi51bnNoaWZ0KE1hdGgucG93KDIsYSkpLHRoaXMudGlsZUNvdW50VXBUb1RpZXIucHVzaCh0aGlzLnRpZXJTaXplSW5UaWxlc1thLQoxXS53KnRoaXMudGllclNpemVJblRpbGVzW2EtMV0uaCt0aGlzLnRpbGVDb3VudFVwVG9UaWVyW2EtMV0pO3RoaXMuc2VydmVyUmVzb2x1dGlvbnN8fCh0aGlzLnNlcnZlclJlc29sdXRpb25zPWIpfSxkZXN0cm95OmZ1bmN0aW9uKCl7T3BlbkxheWVycy5MYXllci5HcmlkLnByb3RvdHlwZS5kZXN0cm95LmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLnRpbGVDb3VudFVwVG9UaWVyLmxlbmd0aD0wO3RoaXMudGllclNpemVJblRpbGVzLmxlbmd0aD0wO3RoaXMudGllckltYWdlU2l6ZS5sZW5ndGg9MH0sY2xvbmU6ZnVuY3Rpb24oYSl7bnVsbD09YSYmKGE9bmV3IE9wZW5MYXllcnMuTGF5ZXIuWm9vbWlmeSh0aGlzLm5hbWUsdGhpcy51cmwsdGhpcy5zaXplLHRoaXMub3B0aW9ucykpO3JldHVybiBhPU9wZW5MYXllcnMuTGF5ZXIuR3JpZC5wcm90b3R5cGUuY2xvbmUuYXBwbHkodGhpcyxbYV0pfSxnZXRVUkw6ZnVuY3Rpb24oYSl7YT10aGlzLmFkanVzdEJvdW5kcyhhKTt2YXIgYj0KdGhpcy5nZXRTZXJ2ZXJSZXNvbHV0aW9uKCksYz1NYXRoLnJvdW5kKChhLmxlZnQtdGhpcy50aWxlT3JpZ2luLmxvbikvKGIqdGhpcy50aWxlU2l6ZS53KSk7YT1NYXRoLnJvdW5kKCh0aGlzLnRpbGVPcmlnaW4ubGF0LWEudG9wKS8oYip0aGlzLnRpbGVTaXplLmgpKTtiPXRoaXMuZ2V0Wm9vbUZvclJlc29sdXRpb24oYik7Yz0iVGlsZUdyb3VwIitNYXRoLmZsb29yKChjK2EqdGhpcy50aWVyU2l6ZUluVGlsZXNbYl0udyt0aGlzLnRpbGVDb3VudFVwVG9UaWVyW2JdKS8yNTYpKyIvIitiKyItIitjKyItIithKyIuanBnIjtiPXRoaXMudXJsO09wZW5MYXllcnMuVXRpbC5pc0FycmF5KGIpJiYoYj10aGlzLnNlbGVjdFVybChjLGIpKTtyZXR1cm4gYitjfSxnZXRJbWFnZVNpemU6ZnVuY3Rpb24oKXtpZigwPGFyZ3VtZW50cy5sZW5ndGgpe3ZhciBhPXRoaXMuYWRqdXN0Qm91bmRzKGFyZ3VtZW50c1swXSksYj10aGlzLmdldFNlcnZlclJlc29sdXRpb24oKSxjPU1hdGgucm91bmQoKGEubGVmdC0KdGhpcy50aWxlT3JpZ2luLmxvbikvKGIqdGhpcy50aWxlU2l6ZS53KSksYT1NYXRoLnJvdW5kKCh0aGlzLnRpbGVPcmlnaW4ubGF0LWEudG9wKS8oYip0aGlzLnRpbGVTaXplLmgpKSxiPXRoaXMuZ2V0Wm9vbUZvclJlc29sdXRpb24oYiksZD10aGlzLnN0YW5kYXJkVGlsZVNpemUsZT10aGlzLnN0YW5kYXJkVGlsZVNpemU7Yz09dGhpcy50aWVyU2l6ZUluVGlsZXNbYl0udy0xJiYoZD10aGlzLnRpZXJJbWFnZVNpemVbYl0udyV0aGlzLnN0YW5kYXJkVGlsZVNpemUpO2E9PXRoaXMudGllclNpemVJblRpbGVzW2JdLmgtMSYmKGU9dGhpcy50aWVySW1hZ2VTaXplW2JdLmgldGhpcy5zdGFuZGFyZFRpbGVTaXplKTtyZXR1cm4gbmV3IE9wZW5MYXllcnMuU2l6ZShkLGUpfXJldHVybiB0aGlzLnRpbGVTaXplfSxzZXRNYXA6ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5MYXllci5HcmlkLnByb3RvdHlwZS5zZXRNYXAuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMudGlsZU9yaWdpbj1uZXcgT3BlbkxheWVycy5Mb25MYXQodGhpcy5tYXAubWF4RXh0ZW50LmxlZnQsCnRoaXMubWFwLm1heEV4dGVudC50b3ApfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkxheWVyLlpvb21pZnkifSk7T3BlbkxheWVycy5MYXllci5NYXBTZXJ2ZXI9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkxheWVyLkdyaWQse0RFRkFVTFRfUEFSQU1TOnttb2RlOiJtYXAiLG1hcF9pbWFnZXR5cGU6InBuZyJ9LGluaXRpYWxpemU6ZnVuY3Rpb24oYSxiLGMsZCl7T3BlbkxheWVycy5MYXllci5HcmlkLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLnBhcmFtcz1PcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyh0aGlzLnBhcmFtcyx0aGlzLkRFRkFVTFRfUEFSQU1TKTtpZihudWxsPT1kfHxudWxsPT1kLmlzQmFzZUxheWVyKXRoaXMuaXNCYXNlTGF5ZXI9InRydWUiIT10aGlzLnBhcmFtcy50cmFuc3BhcmVudCYmITAhPXRoaXMucGFyYW1zLnRyYW5zcGFyZW50fSxjbG9uZTpmdW5jdGlvbihhKXtudWxsPT1hJiYoYT1uZXcgT3BlbkxheWVycy5MYXllci5NYXBTZXJ2ZXIodGhpcy5uYW1lLHRoaXMudXJsLHRoaXMucGFyYW1zLHRoaXMuZ2V0T3B0aW9ucygpKSk7CnJldHVybiBhPU9wZW5MYXllcnMuTGF5ZXIuR3JpZC5wcm90b3R5cGUuY2xvbmUuYXBwbHkodGhpcyxbYV0pfSxnZXRVUkw6ZnVuY3Rpb24oYSl7YT10aGlzLmFkanVzdEJvdW5kcyhhKTthPVthLmxlZnQsYS5ib3R0b20sYS5yaWdodCxhLnRvcF07dmFyIGI9dGhpcy5nZXRJbWFnZVNpemUoKTtyZXR1cm4gdGhpcy5nZXRGdWxsUmVxdWVzdFN0cmluZyh7bWFwZXh0OmEsaW1nZXh0OmEsbWFwX3NpemU6W2IudyxiLmhdLGltZ3g6Yi53LzIsaW1neTpiLmgvMixpbWd4eTpbYi53LGIuaF19KX0sZ2V0RnVsbFJlcXVlc3RTdHJpbmc6ZnVuY3Rpb24oYSxiKXt2YXIgYz1udWxsPT1iP3RoaXMudXJsOmIsZD1PcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHt9LHRoaXMucGFyYW1zKSxkPU9wZW5MYXllcnMuVXRpbC5leHRlbmQoZCxhKSxlPU9wZW5MYXllcnMuVXRpbC5nZXRQYXJhbWV0ZXJTdHJpbmcoZCk7T3BlbkxheWVycy5VdGlsLmlzQXJyYXkoYykmJihjPXRoaXMuc2VsZWN0VXJsKGUsYykpOwp2YXIgZT1PcGVuTGF5ZXJzLlV0aWwudXBwZXJDYXNlT2JqZWN0KE9wZW5MYXllcnMuVXRpbC5nZXRQYXJhbWV0ZXJzKGMpKSxmO2ZvcihmIGluIGQpZi50b1VwcGVyQ2FzZSgpaW4gZSYmZGVsZXRlIGRbZl07ZT1PcGVuTGF5ZXJzLlV0aWwuZ2V0UGFyYW1ldGVyU3RyaW5nKGQpO2Q9YztlPWUucmVwbGFjZSgvLC9nLCIrIik7IiIhPWUmJihmPWMuY2hhckF0KGMubGVuZ3RoLTEpLGQ9IiYiPT1mfHwiPyI9PWY/ZCtlOi0xPT1jLmluZGV4T2YoIj8iKT9kKygiPyIrZSk6ZCsoIiYiK2UpKTtyZXR1cm4gZH0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5MYXllci5NYXBTZXJ2ZXIifSk7T3BlbkxheWVycy5SZW5kZXJlci5WTUw9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLlJlbmRlcmVyLkVsZW1lbnRzLHt4bWxuczoidXJuOnNjaGVtYXMtbWljcm9zb2Z0LWNvbTp2bWwiLHN5bWJvbENhY2hlOnt9LG9mZnNldDpudWxsLGluaXRpYWxpemU6ZnVuY3Rpb24oYSl7aWYodGhpcy5zdXBwb3J0ZWQoKSl7aWYoIWRvY3VtZW50Lm5hbWVzcGFjZXMub2x2KXtkb2N1bWVudC5uYW1lc3BhY2VzLmFkZCgib2x2Iix0aGlzLnhtbG5zKTtmb3IodmFyIGI9ZG9jdW1lbnQuY3JlYXRlU3R5bGVTaGVldCgpLGM9InNoYXBlIHJlY3Qgb3ZhbCBmaWxsIHN0cm9rZSBpbWFnZWRhdGEgZ3JvdXAgdGV4dGJveCIuc3BsaXQoIiAiKSxkPTAsZT1jLmxlbmd0aDtkPGU7ZCsrKWIuYWRkUnVsZSgib2x2XFw6IitjW2RdLCJiZWhhdmlvcjogdXJsKCNkZWZhdWx0I1ZNTCk7IHBvc2l0aW9uOiBhYnNvbHV0ZTsgZGlzcGxheTogaW5saW5lLWJsb2NrOyIpfU9wZW5MYXllcnMuUmVuZGVyZXIuRWxlbWVudHMucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcywKYXJndW1lbnRzKX19LHN1cHBvcnRlZDpmdW5jdGlvbigpe3JldHVybiEhZG9jdW1lbnQubmFtZXNwYWNlc30sc2V0RXh0ZW50OmZ1bmN0aW9uKGEsYil7dmFyIGM9T3BlbkxheWVycy5SZW5kZXJlci5FbGVtZW50cy5wcm90b3R5cGUuc2V0RXh0ZW50LmFwcGx5KHRoaXMsYXJndW1lbnRzKSxkPXRoaXMuZ2V0UmVzb2x1dGlvbigpLGU9YS5sZWZ0L2R8MCxkPWEudG9wL2QtdGhpcy5zaXplLmh8MDtifHwhdGhpcy5vZmZzZXQ/KHRoaXMub2Zmc2V0PXt4OmUseTpkfSxkPWU9MCk6KGUtPXRoaXMub2Zmc2V0LngsZC09dGhpcy5vZmZzZXQueSk7dGhpcy5yb290LmNvb3Jkb3JpZ2luPWUtdGhpcy54T2Zmc2V0KyIgIitkO2Zvcih2YXIgZT1bdGhpcy5yb290LHRoaXMudmVjdG9yUm9vdCx0aGlzLnRleHRSb290XSxmPTAsZz1lLmxlbmd0aDtmPGc7KytmKWQ9ZVtmXSxkLmNvb3Jkc2l6ZT10aGlzLnNpemUudysiICIrdGhpcy5zaXplLmg7dGhpcy5yb290LnN0eWxlLmZsaXA9InkiO3JldHVybiBjfSwKc2V0U2l6ZTpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLlJlbmRlcmVyLnByb3RvdHlwZS5zZXRTaXplLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtmb3IodmFyIGI9W3RoaXMucmVuZGVyZXJSb290LHRoaXMucm9vdCx0aGlzLnZlY3RvclJvb3QsdGhpcy50ZXh0Um9vdF0sYz10aGlzLnNpemUudysicHgiLGQ9dGhpcy5zaXplLmgrInB4IixlLGY9MCxnPWIubGVuZ3RoO2Y8ZzsrK2YpZT1iW2ZdLGUuc3R5bGUud2lkdGg9YyxlLnN0eWxlLmhlaWdodD1kfSxnZXROb2RlVHlwZTpmdW5jdGlvbihhLGIpe3ZhciBjPW51bGw7c3dpdGNoKGEuQ0xBU1NfTkFNRSl7Y2FzZSAiT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludCI6Yz1iLmV4dGVybmFsR3JhcGhpYz8ib2x2OnJlY3QiOnRoaXMuaXNDb21wbGV4U3ltYm9sKGIuZ3JhcGhpY05hbWUpPyJvbHY6c2hhcGUiOiJvbHY6b3ZhbCI7YnJlYWs7Y2FzZSAiT3BlbkxheWVycy5HZW9tZXRyeS5SZWN0YW5nbGUiOmM9Im9sdjpyZWN0IjticmVhaztjYXNlICJPcGVuTGF5ZXJzLkdlb21ldHJ5LkxpbmVTdHJpbmciOmNhc2UgIk9wZW5MYXllcnMuR2VvbWV0cnkuTGluZWFyUmluZyI6Y2FzZSAiT3BlbkxheWVycy5HZW9tZXRyeS5Qb2x5Z29uIjpjYXNlICJPcGVuTGF5ZXJzLkdlb21ldHJ5LkN1cnZlIjpjPQoib2x2OnNoYXBlIn1yZXR1cm4gY30sc2V0U3R5bGU6ZnVuY3Rpb24oYSxiLGMsZCl7Yj1ifHxhLl9zdHlsZTtjPWN8fGEuX29wdGlvbnM7dmFyIGU9Yi5maWxsQ29sb3IsZj1iLnRpdGxlfHxiLmdyYXBoaWNUaXRsZTtmJiYoYS50aXRsZT1mKTtpZigiT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludCI9PT1hLl9nZW9tZXRyeUNsYXNzKWlmKGIuZXh0ZXJuYWxHcmFwaGljKXtjLmlzRmlsbGVkPSEwO3ZhciBlPWIuZ3JhcGhpY1dpZHRofHxiLmdyYXBoaWNIZWlnaHQsZj1iLmdyYXBoaWNIZWlnaHR8fGIuZ3JhcGhpY1dpZHRoLGU9ZT9lOjIqYi5wb2ludFJhZGl1cyxmPWY/ZjoyKmIucG9pbnRSYWRpdXMsZz10aGlzLmdldFJlc29sdXRpb24oKSxoPXZvaWQgMCE9Yi5ncmFwaGljWE9mZnNldD9iLmdyYXBoaWNYT2Zmc2V0Oi0oMC41KmUpLGs9dm9pZCAwIT1iLmdyYXBoaWNZT2Zmc2V0P2IuZ3JhcGhpY1lPZmZzZXQ6LSgwLjUqZik7YS5zdHlsZS5sZWZ0PSgoZC54LXRoaXMuZmVhdHVyZUR4KS8KZy10aGlzLm9mZnNldC54K2h8MCkrInB4IjthLnN0eWxlLnRvcD0oZC55L2ctdGhpcy5vZmZzZXQueS0oaytmKXwwKSsicHgiO2Euc3R5bGUud2lkdGg9ZSsicHgiO2Euc3R5bGUuaGVpZ2h0PWYrInB4IjthLnN0eWxlLmZsaXA9InkiO2U9Im5vbmUiO2MuaXNTdHJva2VkPSExfWVsc2UgdGhpcy5pc0NvbXBsZXhTeW1ib2woYi5ncmFwaGljTmFtZSk/KGY9dGhpcy5pbXBvcnRTeW1ib2woYi5ncmFwaGljTmFtZSksYS5wYXRoPWYucGF0aCxhLmNvb3Jkb3JpZ2luPWYubGVmdCsiLCIrZi5ib3R0b20sZj1mLnNpemUsYS5jb29yZHNpemU9ZisiLCIrZix0aGlzLmRyYXdDaXJjbGUoYSxkLGIucG9pbnRSYWRpdXMpLGEuc3R5bGUuZmxpcD0ieSIpOnRoaXMuZHJhd0NpcmNsZShhLGQsYi5wb2ludFJhZGl1cyk7Yy5pc0ZpbGxlZD9hLmZpbGxjb2xvcj1lOmEuZmlsbGVkPSJmYWxzZSI7ZD1hLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJmaWxsIik7ZD0wPT1kLmxlbmd0aD9udWxsOmRbMF07Yy5pc0ZpbGxlZD8KKGR8fChkPXRoaXMuY3JlYXRlTm9kZSgib2x2OmZpbGwiLGEuaWQrIl9maWxsIikpLGQub3BhY2l0eT1iLmZpbGxPcGFjaXR5LCJPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50Ij09PWEuX2dlb21ldHJ5Q2xhc3MmJmIuZXh0ZXJuYWxHcmFwaGljJiYoYi5ncmFwaGljT3BhY2l0eSYmKGQub3BhY2l0eT1iLmdyYXBoaWNPcGFjaXR5KSxkLnNyYz1iLmV4dGVybmFsR3JhcGhpYyxkLnR5cGU9ImZyYW1lIixiLmdyYXBoaWNXaWR0aCYmYi5ncmFwaGljSGVpZ2h0fHwoZC5hc3BlY3Q9ImF0bW9zdCIpKSxkLnBhcmVudE5vZGUhPWEmJmEuYXBwZW5kQ2hpbGQoZCkpOmQmJmEucmVtb3ZlQ2hpbGQoZCk7ZT1iLnJvdGF0aW9uO2lmKHZvaWQgMCE9PWV8fHZvaWQgMCE9PWEuX3JvdGF0aW9uKWEuX3JvdGF0aW9uPWUsYi5leHRlcm5hbEdyYXBoaWM/KHRoaXMuZ3JhcGhpY1JvdGF0ZShhLGgsayxiKSxkLm9wYWNpdHk9MCk6Ik9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQiPT09YS5fZ2VvbWV0cnlDbGFzcyYmCihhLnN0eWxlLnJvdGF0aW9uPWV8fDApO2g9YS5nZXRFbGVtZW50c0J5VGFnTmFtZSgic3Ryb2tlIik7aD0wPT1oLmxlbmd0aD9udWxsOmhbMF07Yy5pc1N0cm9rZWQ/KGh8fChoPXRoaXMuY3JlYXRlTm9kZSgib2x2OnN0cm9rZSIsYS5pZCsiX3N0cm9rZSIpLGEuYXBwZW5kQ2hpbGQoaCkpLGgub249ITAsaC5jb2xvcj1iLnN0cm9rZUNvbG9yLGgud2VpZ2h0PWIuc3Ryb2tlV2lkdGgrInB4IixoLm9wYWNpdHk9Yi5zdHJva2VPcGFjaXR5LGguZW5kY2FwPSJidXR0Ij09Yi5zdHJva2VMaW5lY2FwPyJmbGF0IjpiLnN0cm9rZUxpbmVjYXB8fCJyb3VuZCIsYi5zdHJva2VEYXNoc3R5bGUmJihoLmRhc2hzdHlsZT10aGlzLmRhc2hTdHlsZShiKSkpOihhLnN0cm9rZWQ9ITEsaCYmKGgub249ITEpKTsiaW5oZXJpdCIhPWIuY3Vyc29yJiZudWxsIT1iLmN1cnNvciYmKGEuc3R5bGUuY3Vyc29yPWIuY3Vyc29yKTtyZXR1cm4gYX0sZ3JhcGhpY1JvdGF0ZTpmdW5jdGlvbihhLGIsYyxkKXtkPQpkfHxhLl9zdHlsZTt2YXIgZT1kLnJvdGF0aW9ufHwwLGYsZztpZihkLmdyYXBoaWNXaWR0aCYmZC5ncmFwaGljSGVpZ2h0KXtnPU1hdGgubWF4KGQuZ3JhcGhpY1dpZHRoLGQuZ3JhcGhpY0hlaWdodCk7Zj1kLmdyYXBoaWNXaWR0aC9kLmdyYXBoaWNIZWlnaHQ7dmFyIGg9TWF0aC5yb3VuZChkLmdyYXBoaWNXaWR0aHx8ZypmKSxrPU1hdGgucm91bmQoZC5ncmFwaGljSGVpZ2h0fHxnKTthLnN0eWxlLndpZHRoPWgrInB4IjthLnN0eWxlLmhlaWdodD1rKyJweCI7dmFyIGw9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYS5pZCsiX2ltYWdlIik7bHx8KGw9dGhpcy5jcmVhdGVOb2RlKCJvbHY6aW1hZ2VkYXRhIixhLmlkKyJfaW1hZ2UiKSxhLmFwcGVuZENoaWxkKGwpKTtsLnN0eWxlLndpZHRoPWgrInB4IjtsLnN0eWxlLmhlaWdodD1rKyJweCI7bC5zcmM9ZC5leHRlcm5hbEdyYXBoaWM7bC5zdHlsZS5maWx0ZXI9InByb2dpZDpEWEltYWdlVHJhbnNmb3JtLk1pY3Jvc29mdC5BbHBoYUltYWdlTG9hZGVyKHNyYz0nJywgc2l6aW5nTWV0aG9kPSdzY2FsZScpIjsKbD1lKk1hdGguUEkvMTgwO2U9TWF0aC5zaW4obCk7bD1NYXRoLmNvcyhsKTtlPSJwcm9naWQ6RFhJbWFnZVRyYW5zZm9ybS5NaWNyb3NvZnQuTWF0cml4KE0xMT0iK2wrIixNMTI9IistZSsiLE0yMT0iK2UrIixNMjI9IitsKyIsU2l6aW5nTWV0aG9kPSdhdXRvIGV4cGFuZCcpXG4iOyhsPWQuZ3JhcGhpY09wYWNpdHl8fGQuZmlsbE9wYWNpdHkpJiYxIT1sJiYoZSs9InByb2dpZDpEWEltYWdlVHJhbnNmb3JtLk1pY3Jvc29mdC5CYXNpY0ltYWdlKG9wYWNpdHk9IitsKyIpXG4iKTthLnN0eWxlLmZpbHRlcj1lO2U9bmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoLWIsLWMpO2g9KG5ldyBPcGVuTGF5ZXJzLkJvdW5kcygwLDAsaCxrKSkudG9HZW9tZXRyeSgpO2gucm90YXRlKGQucm90YXRpb24sZSk7aD1oLmdldEJvdW5kcygpO2Euc3R5bGUubGVmdD1NYXRoLnJvdW5kKHBhcnNlSW50KGEuc3R5bGUubGVmdCkraC5sZWZ0KSsicHgiO2Euc3R5bGUudG9wPU1hdGgucm91bmQocGFyc2VJbnQoYS5zdHlsZS50b3ApLQpoLmJvdHRvbSkrInB4In1lbHNle3ZhciBtPW5ldyBJbWFnZTttLm9ucmVhZHlzdGF0ZWNoYW5nZT1PcGVuTGF5ZXJzLkZ1bmN0aW9uLmJpbmQoZnVuY3Rpb24oKXtpZigiY29tcGxldGUiPT1tLnJlYWR5U3RhdGV8fCJpbnRlcmFjdGl2ZSI9PW0ucmVhZHlTdGF0ZSlmPW0ud2lkdGgvbS5oZWlnaHQsZz1NYXRoLm1heCgyKmQucG9pbnRSYWRpdXMsZC5ncmFwaGljV2lkdGh8fDAsZC5ncmFwaGljSGVpZ2h0fHwwKSxiKj1mLGQuZ3JhcGhpY1dpZHRoPWcqZixkLmdyYXBoaWNIZWlnaHQ9Zyx0aGlzLmdyYXBoaWNSb3RhdGUoYSxiLGMsZCl9LHRoaXMpO20uc3JjPWQuZXh0ZXJuYWxHcmFwaGljfX0scG9zdERyYXc6ZnVuY3Rpb24oYSl7YS5zdHlsZS52aXNpYmlsaXR5PSJ2aXNpYmxlIjt2YXIgYj1hLl9zdHlsZS5maWxsQ29sb3IsYz1hLl9zdHlsZS5zdHJva2VDb2xvcjsibm9uZSI9PWImJmEuZmlsbGNvbG9yIT1iJiYoYS5maWxsY29sb3I9Yik7Im5vbmUiPT1jJiZhLnN0cm9rZWNvbG9yIT0KYyYmKGEuc3Ryb2tlY29sb3I9Yyl9LHNldE5vZGVEaW1lbnNpb246ZnVuY3Rpb24oYSxiKXt2YXIgYz1iLmdldEJvdW5kcygpO2lmKGMpe3ZhciBkPXRoaXMuZ2V0UmVzb2x1dGlvbigpLGM9bmV3IE9wZW5MYXllcnMuQm91bmRzKChjLmxlZnQtdGhpcy5mZWF0dXJlRHgpL2QtdGhpcy5vZmZzZXQueHwwLGMuYm90dG9tL2QtdGhpcy5vZmZzZXQueXwwLChjLnJpZ2h0LXRoaXMuZmVhdHVyZUR4KS9kLXRoaXMub2Zmc2V0Lnh8MCxjLnRvcC9kLXRoaXMub2Zmc2V0Lnl8MCk7YS5zdHlsZS5sZWZ0PWMubGVmdCsicHgiO2Euc3R5bGUudG9wPWMudG9wKyJweCI7YS5zdHlsZS53aWR0aD1jLmdldFdpZHRoKCkrInB4IjthLnN0eWxlLmhlaWdodD1jLmdldEhlaWdodCgpKyJweCI7YS5jb29yZG9yaWdpbj1jLmxlZnQrIiAiK2MudG9wO2EuY29vcmRzaXplPWMuZ2V0V2lkdGgoKSsiICIrYy5nZXRIZWlnaHQoKX19LGRhc2hTdHlsZTpmdW5jdGlvbihhKXthPWEuc3Ryb2tlRGFzaHN0eWxlO3N3aXRjaChhKXtjYXNlICJzb2xpZCI6Y2FzZSAiZG90IjpjYXNlICJkYXNoIjpjYXNlICJkYXNoZG90IjpjYXNlICJsb25nZGFzaCI6Y2FzZSAibG9uZ2Rhc2hkb3QiOnJldHVybiBhOwpkZWZhdWx0OnJldHVybiBhPWEuc3BsaXQoL1sgLF0vKSwyPT1hLmxlbmd0aD8xKmFbMF0+PTIqYVsxXT8ibG9uZ2Rhc2giOjE9PWFbMF18fDE9PWFbMV0/ImRvdCI6ImRhc2giOjQ9PWEubGVuZ3RoPzEqYVswXT49MiphWzFdPyJsb25nZGFzaGRvdCI6ImRhc2hkb3QiOiJzb2xpZCJ9fSxjcmVhdGVOb2RlOmZ1bmN0aW9uKGEsYil7dmFyIGM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChhKTtiJiYoYy5pZD1iKTtjLnVuc2VsZWN0YWJsZT0ib24iO2Mub25zZWxlY3RzdGFydD1PcGVuTGF5ZXJzLkZ1bmN0aW9uLkZhbHNlO3JldHVybiBjfSxub2RlVHlwZUNvbXBhcmU6ZnVuY3Rpb24oYSxiKXt2YXIgYz1iLGQ9Yy5pbmRleE9mKCI6Iik7LTEhPWQmJihjPWMuc3Vic3RyKGQrMSkpO3ZhciBlPWEubm9kZU5hbWUsZD1lLmluZGV4T2YoIjoiKTstMSE9ZCYmKGU9ZS5zdWJzdHIoZCsxKSk7cmV0dXJuIGM9PWV9LGNyZWF0ZVJlbmRlclJvb3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ub2RlRmFjdG9yeSh0aGlzLmNvbnRhaW5lci5pZCsKIl92bWxSb290IiwiZGl2Iil9LGNyZWF0ZVJvb3Q6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMubm9kZUZhY3RvcnkodGhpcy5jb250YWluZXIuaWQrYSwib2x2Omdyb3VwIil9LGRyYXdQb2ludDpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLmRyYXdDaXJjbGUoYSxiLDEpfSxkcmF3Q2lyY2xlOmZ1bmN0aW9uKGEsYixjKXtpZighaXNOYU4oYi54KSYmIWlzTmFOKGIueSkpe3ZhciBkPXRoaXMuZ2V0UmVzb2x1dGlvbigpO2Euc3R5bGUubGVmdD0oKGIueC10aGlzLmZlYXR1cmVEeCkvZC10aGlzLm9mZnNldC54fDApLWMrInB4IjthLnN0eWxlLnRvcD0oYi55L2QtdGhpcy5vZmZzZXQueXwwKS1jKyJweCI7Yj0yKmM7YS5zdHlsZS53aWR0aD1iKyJweCI7YS5zdHlsZS5oZWlnaHQ9YisicHgiO3JldHVybiBhfXJldHVybiExfSxkcmF3TGluZVN0cmluZzpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLmRyYXdMaW5lKGEsYiwhMSl9LGRyYXdMaW5lYXJSaW5nOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuZHJhd0xpbmUoYSwKYiwhMCl9LGRyYXdMaW5lOmZ1bmN0aW9uKGEsYixjKXt0aGlzLnNldE5vZGVEaW1lbnNpb24oYSxiKTtmb3IodmFyIGQ9dGhpcy5nZXRSZXNvbHV0aW9uKCksZT1iLmNvbXBvbmVudHMubGVuZ3RoLGY9QXJyYXkoZSksZyxoLGs9MDtrPGU7aysrKWc9Yi5jb21wb25lbnRzW2tdLGg9KGcueC10aGlzLmZlYXR1cmVEeCkvZC10aGlzLm9mZnNldC54fDAsZz1nLnkvZC10aGlzLm9mZnNldC55fDAsZltrXT0iICIraCsiLCIrZysiIGwgIjtiPWM/IiB4IGUiOiIgZSI7YS5wYXRoPSJtIitmLmpvaW4oIiIpK2I7cmV0dXJuIGF9LGRyYXdQb2x5Z29uOmZ1bmN0aW9uKGEsYil7dGhpcy5zZXROb2RlRGltZW5zaW9uKGEsYik7dmFyIGM9dGhpcy5nZXRSZXNvbHV0aW9uKCksZD1bXSxlLGYsZyxoLGssbCxtLG4scCxxO2U9MDtmb3IoZj1iLmNvbXBvbmVudHMubGVuZ3RoO2U8ZjtlKyspe2QucHVzaCgibSIpO2c9Yi5jb21wb25lbnRzW2VdLmNvbXBvbmVudHM7aD0wPT09ZTtsPWs9bnVsbDttPTA7CmZvcihuPWcubGVuZ3RoO208bjttKyspcD1nW21dLHE9KHAueC10aGlzLmZlYXR1cmVEeCkvYy10aGlzLm9mZnNldC54fDAscD1wLnkvYy10aGlzLm9mZnNldC55fDAscT0iICIrcSsiLCIrcCxkLnB1c2gocSksMD09bSYmZC5wdXNoKCIgbCIpLGh8fChrP2shPXEmJihsP2whPXEmJihoPSEwKTpsPXEpOms9cSk7ZC5wdXNoKGg/IiB4ICI6IiAiKX1kLnB1c2goImUiKTthLnBhdGg9ZC5qb2luKCIiKTtyZXR1cm4gYX0sZHJhd1JlY3RhbmdsZTpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuZ2V0UmVzb2x1dGlvbigpO2Euc3R5bGUubGVmdD0oKGIueC10aGlzLmZlYXR1cmVEeCkvYy10aGlzLm9mZnNldC54fDApKyJweCI7YS5zdHlsZS50b3A9KGIueS9jLXRoaXMub2Zmc2V0Lnl8MCkrInB4IjthLnN0eWxlLndpZHRoPShiLndpZHRoL2N8MCkrInB4IjthLnN0eWxlLmhlaWdodD0oYi5oZWlnaHQvY3wwKSsicHgiO3JldHVybiBhfSxkcmF3VGV4dDpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9dGhpcy5ub2RlRmFjdG9yeShhKwp0aGlzLkxBQkVMX0lEX1NVRkZJWCwib2x2OnJlY3QiKSxlPXRoaXMubm9kZUZhY3RvcnkoYSt0aGlzLkxBQkVMX0lEX1NVRkZJWCsiX3RleHRib3giLCJvbHY6dGV4dGJveCIpLGY9dGhpcy5nZXRSZXNvbHV0aW9uKCk7ZC5zdHlsZS5sZWZ0PSgoYy54LXRoaXMuZmVhdHVyZUR4KS9mLXRoaXMub2Zmc2V0Lnh8MCkrInB4IjtkLnN0eWxlLnRvcD0oYy55L2YtdGhpcy5vZmZzZXQueXwwKSsicHgiO2Quc3R5bGUuZmxpcD0ieSI7ZS5pbm5lclRleHQ9Yi5sYWJlbDsiaW5oZXJpdCIhPWIuY3Vyc29yJiZudWxsIT1iLmN1cnNvciYmKGUuc3R5bGUuY3Vyc29yPWIuY3Vyc29yKTtiLmZvbnRDb2xvciYmKGUuc3R5bGUuY29sb3I9Yi5mb250Q29sb3IpO2IuZm9udE9wYWNpdHkmJihlLnN0eWxlLmZpbHRlcj0iYWxwaGEob3BhY2l0eT0iKzEwMCpiLmZvbnRPcGFjaXR5KyIpIik7Yi5mb250RmFtaWx5JiYoZS5zdHlsZS5mb250RmFtaWx5PWIuZm9udEZhbWlseSk7Yi5mb250U2l6ZSYmKGUuc3R5bGUuZm9udFNpemU9CmIuZm9udFNpemUpO2IuZm9udFdlaWdodCYmKGUuc3R5bGUuZm9udFdlaWdodD1iLmZvbnRXZWlnaHQpO2IuZm9udFN0eWxlJiYoZS5zdHlsZS5mb250U3R5bGU9Yi5mb250U3R5bGUpOyEwPT09Yi5sYWJlbFNlbGVjdCYmKGQuX2ZlYXR1cmVJZD1hLGUuX2ZlYXR1cmVJZD1hLGUuX2dlb21ldHJ5PWMsZS5fZ2VvbWV0cnlDbGFzcz1jLkNMQVNTX05BTUUpO2Uuc3R5bGUud2hpdGVTcGFjZT0ibm93cmFwIjtlLmluc2V0PSIxcHgsMHB4LDBweCwwcHgiO2QucGFyZW50Tm9kZXx8KGQuYXBwZW5kQ2hpbGQoZSksdGhpcy50ZXh0Um9vdC5hcHBlbmRDaGlsZChkKSk7Yj1iLmxhYmVsQWxpZ258fCJjbSI7MT09Yi5sZW5ndGgmJihiKz0ibSIpO2E9ZS5jbGllbnRXaWR0aCpPcGVuTGF5ZXJzLlJlbmRlcmVyLlZNTC5MQUJFTF9TSElGVFtiLnN1YnN0cigwLDEpXTtlPWUuY2xpZW50SGVpZ2h0Kk9wZW5MYXllcnMuUmVuZGVyZXIuVk1MLkxBQkVMX1NISUZUW2Iuc3Vic3RyKDEsMSldO2Quc3R5bGUubGVmdD0KcGFyc2VJbnQoZC5zdHlsZS5sZWZ0KS1hLTErInB4IjtkLnN0eWxlLnRvcD1wYXJzZUludChkLnN0eWxlLnRvcCkrZSsicHgifSxtb3ZlUm9vdDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLm1hcC5nZXRMYXllcihhLmNvbnRhaW5lci5pZCk7YiBpbnN0YW5jZW9mIE9wZW5MYXllcnMuTGF5ZXIuVmVjdG9yLlJvb3RDb250YWluZXImJihiPXRoaXMubWFwLmdldExheWVyKHRoaXMuY29udGFpbmVyLmlkKSk7YiYmYi5yZW5kZXJlci5jbGVhcigpO09wZW5MYXllcnMuUmVuZGVyZXIuRWxlbWVudHMucHJvdG90eXBlLm1vdmVSb290LmFwcGx5KHRoaXMsYXJndW1lbnRzKTtiJiZiLnJlZHJhdygpfSxpbXBvcnRTeW1ib2w6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jb250YWluZXIuaWQrIi0iK2EsYz10aGlzLnN5bWJvbENhY2hlW2JdO2lmKGMpcmV0dXJuIGM7Yz1PcGVuTGF5ZXJzLlJlbmRlcmVyLnN5bWJvbFthXTtpZighYyl0aHJvdyBFcnJvcihhKyIgaXMgbm90IGEgdmFsaWQgc3ltYm9sIG5hbWUiKTsKYT1uZXcgT3BlbkxheWVycy5Cb3VuZHMoTnVtYmVyLk1BWF9WQUxVRSxOdW1iZXIuTUFYX1ZBTFVFLDAsMCk7Zm9yKHZhciBkPVsibSJdLGU9MDtlPGMubGVuZ3RoO2UrPTIpe3ZhciBmPWNbZV0sZz1jW2UrMV07YS5sZWZ0PU1hdGgubWluKGEubGVmdCxmKTthLmJvdHRvbT1NYXRoLm1pbihhLmJvdHRvbSxnKTthLnJpZ2h0PU1hdGgubWF4KGEucmlnaHQsZik7YS50b3A9TWF0aC5tYXgoYS50b3AsZyk7ZC5wdXNoKGYpO2QucHVzaChnKTswPT1lJiZkLnB1c2goImwiKX1kLnB1c2goInggZSIpO2M9ZC5qb2luKCIgIik7ZD0oYS5nZXRXaWR0aCgpLWEuZ2V0SGVpZ2h0KCkpLzI7MDxkPyhhLmJvdHRvbS09ZCxhLnRvcCs9ZCk6KGEubGVmdCs9ZCxhLnJpZ2h0LT1kKTtjPXtwYXRoOmMsc2l6ZTphLmdldFdpZHRoKCksbGVmdDphLmxlZnQsYm90dG9tOmEuYm90dG9tfTtyZXR1cm4gdGhpcy5zeW1ib2xDYWNoZVtiXT1jfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLlJlbmRlcmVyLlZNTCJ9KTsKT3BlbkxheWVycy5SZW5kZXJlci5WTUwuTEFCRUxfU0hJRlQ9e2w6MCxjOjAuNSxyOjEsdDowLG06MC41LGI6MX07T3BlbkxheWVycy5Db250cm9sLkNhY2hlUmVhZD1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuQ29udHJvbCx7ZmV0Y2hFdmVudDoidGlsZWxvYWRzdGFydCIsbGF5ZXJzOm51bGwsYXV0b0FjdGl2YXRlOiEwLHNldE1hcDpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLkNvbnRyb2wucHJvdG90eXBlLnNldE1hcC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dmFyIGIsYz10aGlzLmxheWVyc3x8YS5sYXllcnM7Zm9yKGI9Yy5sZW5ndGgtMTswPD1iOy0tYil0aGlzLmFkZExheWVyKHtsYXllcjpjW2JdfSk7aWYoIXRoaXMubGF5ZXJzKWEuZXZlbnRzLm9uKHthZGRsYXllcjp0aGlzLmFkZExheWVyLHJlbW92ZUxheWVyOnRoaXMucmVtb3ZlTGF5ZXIsc2NvcGU6dGhpc30pfSxhZGRMYXllcjpmdW5jdGlvbihhKXthLmxheWVyLmV2ZW50cy5yZWdpc3Rlcih0aGlzLmZldGNoRXZlbnQsdGhpcyx0aGlzLmZldGNoKX0scmVtb3ZlTGF5ZXI6ZnVuY3Rpb24oYSl7YS5sYXllci5ldmVudHMudW5yZWdpc3Rlcih0aGlzLmZldGNoRXZlbnQsCnRoaXMsdGhpcy5mZXRjaCl9LGZldGNoOmZ1bmN0aW9uKGEpe2lmKHRoaXMuYWN0aXZlJiZ3aW5kb3cubG9jYWxTdG9yYWdlJiZhLnRpbGUgaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLlRpbGUuSW1hZ2Upe3ZhciBiPWEudGlsZSxjPWIudXJsOyFiLmxheWVyLmNyb3NzT3JpZ2luS2V5d29yZCYmKE9wZW5MYXllcnMuUHJveHlIb3N0JiYwPT09Yy5pbmRleE9mKE9wZW5MYXllcnMuUHJveHlIb3N0KSkmJihjPU9wZW5MYXllcnMuQ29udHJvbC5DYWNoZVdyaXRlLnVybE1hcFtjXSk7aWYoYz13aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oIm9sQ2FjaGVfIitjKSliLnVybD1jLCJ0aWxlZXJyb3IiPT09YS50eXBlJiZiLnNldEltZ1NyYyhjKX19LGRlc3Ryb3k6ZnVuY3Rpb24oKXtpZih0aGlzLmxheWVyc3x8dGhpcy5tYXApe3ZhciBhLGI9dGhpcy5sYXllcnN8fHRoaXMubWFwLmxheWVycztmb3IoYT1iLmxlbmd0aC0xOzA8PWE7LS1hKXRoaXMucmVtb3ZlTGF5ZXIoe2xheWVyOmJbYV19KX10aGlzLm1hcCYmCnRoaXMubWFwLmV2ZW50cy51bih7YWRkbGF5ZXI6dGhpcy5hZGRMYXllcixyZW1vdmVMYXllcjp0aGlzLnJlbW92ZUxheWVyLHNjb3BlOnRoaXN9KTtPcGVuTGF5ZXJzLkNvbnRyb2wucHJvdG90eXBlLmRlc3Ryb3kuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkNvbnRyb2wuQ2FjaGVSZWFkIn0pO09wZW5MYXllcnMuUHJvdG9jb2wuV0ZTLnYxXzBfMD1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuUHJvdG9jb2wuV0ZTLnYxLHt2ZXJzaW9uOiIxLjAuMCIsQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Qcm90b2NvbC5XRlMudjFfMF8wIn0pO09wZW5MYXllcnMuRm9ybWF0LldNU0dldEZlYXR1cmVJbmZvPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Gb3JtYXQuWE1MLHtsYXllcklkZW50aWZpZXI6Il9sYXllciIsZmVhdHVyZUlkZW50aWZpZXI6Il9mZWF0dXJlIixyZWdFeGVzOnt0cmltU3BhY2U6L15ccyp8XHMqJC9nLHJlbW92ZVNwYWNlOi9ccyovZyxzcGxpdFNwYWNlOi9ccysvLHRyaW1Db21tYTovXHMqLFxzKi9nfSxnbWxGb3JtYXQ6bnVsbCxyZWFkOmZ1bmN0aW9uKGEpeyJzdHJpbmciPT10eXBlb2YgYSYmKGE9T3BlbkxheWVycy5Gb3JtYXQuWE1MLnByb3RvdHlwZS5yZWFkLmFwcGx5KHRoaXMsW2FdKSk7dmFyIGI9YS5kb2N1bWVudEVsZW1lbnQ7aWYoYil7dmFyIGM9dGhpc1sicmVhZF8iK2Iubm9kZU5hbWVdO2E9Yz9jLmNhbGwodGhpcyxiKToobmV3IE9wZW5MYXllcnMuRm9ybWF0LkdNTCh0aGlzLm9wdGlvbnM/dGhpcy5vcHRpb25zOnt9KSkucmVhZChhKX1yZXR1cm4gYX0scmVhZF9tc0dNTE91dHB1dDpmdW5jdGlvbihhKXt2YXIgYj0KW107aWYoYT10aGlzLmdldFNpYmxpbmdOb2Rlc0J5VGFnQ3JpdGVyaWEoYSx0aGlzLmxheWVySWRlbnRpZmllcikpZm9yKHZhciBjPTAsZD1hLmxlbmd0aDtjPGQ7KytjKXt2YXIgZT1hW2NdLGY9ZS5ub2RlTmFtZTtlLnByZWZpeCYmKGY9Zi5zcGxpdCgiOiIpWzFdKTtmPWYucmVwbGFjZSh0aGlzLmxheWVySWRlbnRpZmllciwiIik7aWYoZT10aGlzLmdldFNpYmxpbmdOb2Rlc0J5VGFnQ3JpdGVyaWEoZSx0aGlzLmZlYXR1cmVJZGVudGlmaWVyKSlmb3IodmFyIGc9MDtnPGUubGVuZ3RoO2crKyl7dmFyIGg9ZVtnXSxrPXRoaXMucGFyc2VHZW9tZXRyeShoKSxoPXRoaXMucGFyc2VBdHRyaWJ1dGVzKGgpLGg9bmV3IE9wZW5MYXllcnMuRmVhdHVyZS5WZWN0b3Ioay5nZW9tZXRyeSxoLG51bGwpO2guYm91bmRzPWsuYm91bmRzO2gudHlwZT1mO2IucHVzaChoKX19cmV0dXJuIGJ9LHJlYWRfRmVhdHVyZUluZm9SZXNwb25zZTpmdW5jdGlvbihhKXt2YXIgYj1bXTthPXRoaXMuZ2V0RWxlbWVudHNCeVRhZ05hbWVOUyhhLAoiKiIsIkZJRUxEUyIpO2Zvcih2YXIgYz0wLGQ9YS5sZW5ndGg7YzxkO2MrKyl7dmFyIGU9YVtjXSxmPXt9LGcsaD1lLmF0dHJpYnV0ZXMubGVuZ3RoO2lmKDA8aClmb3IoZz0wO2c8aDtnKyspe3ZhciBrPWUuYXR0cmlidXRlc1tnXTtmW2subm9kZU5hbWVdPWsubm9kZVZhbHVlfWVsc2UgZm9yKGU9ZS5jaGlsZE5vZGVzLGc9MCxoPWUubGVuZ3RoO2c8aDsrK2cpaz1lW2ddLDMhPWsubm9kZVR5cGUmJihmW2suZ2V0QXR0cmlidXRlKCJuYW1lIildPWsuZ2V0QXR0cmlidXRlKCJ2YWx1ZSIpKTtiLnB1c2gobmV3IE9wZW5MYXllcnMuRmVhdHVyZS5WZWN0b3IobnVsbCxmLG51bGwpKX1yZXR1cm4gYn0sZ2V0U2libGluZ05vZGVzQnlUYWdDcml0ZXJpYTpmdW5jdGlvbihhLGIpe3ZhciBjPVtdLGQsZSxmLGc7aWYoYSYmYS5oYXNDaGlsZE5vZGVzKCkpe2Q9YS5jaGlsZE5vZGVzO2Y9ZC5sZW5ndGg7Zm9yKHZhciBoPTA7aDxmO2grKyl7Zm9yKGc9ZFtoXTtnJiYxIT1nLm5vZGVUeXBlOylnPQpnLm5leHRTaWJsaW5nLGgrKztlPWc/Zy5ub2RlTmFtZToiIjswPGUubGVuZ3RoJiYtMTxlLmluZGV4T2YoYik/Yy5wdXNoKGcpOihlPXRoaXMuZ2V0U2libGluZ05vZGVzQnlUYWdDcml0ZXJpYShnLGIpLDA8ZS5sZW5ndGgmJigwPT1jLmxlbmd0aD9jPWU6Yy5wdXNoKGUpKSl9fXJldHVybiBjfSxwYXJzZUF0dHJpYnV0ZXM6ZnVuY3Rpb24oYSl7dmFyIGI9e307aWYoMT09YS5ub2RlVHlwZSl7YT1hLmNoaWxkTm9kZXM7Zm9yKHZhciBjPWEubGVuZ3RoLGQ9MDtkPGM7KytkKXt2YXIgZT1hW2RdO2lmKDE9PWUubm9kZVR5cGUpe3ZhciBmPWUuY2hpbGROb2RlcyxlPWUucHJlZml4P2Uubm9kZU5hbWUuc3BsaXQoIjoiKVsxXTplLm5vZGVOYW1lOzA9PWYubGVuZ3RoP2JbZV09bnVsbDoxPT1mLmxlbmd0aCYmKGY9ZlswXSwzPT1mLm5vZGVUeXBlfHw0PT1mLm5vZGVUeXBlKSYmKGY9Zi5ub2RlVmFsdWUucmVwbGFjZSh0aGlzLnJlZ0V4ZXMudHJpbVNwYWNlLCIiKSxiW2VdPWYpfX19cmV0dXJuIGJ9LApwYXJzZUdlb21ldHJ5OmZ1bmN0aW9uKGEpe3RoaXMuZ21sRm9ybWF0fHwodGhpcy5nbWxGb3JtYXQ9bmV3IE9wZW5MYXllcnMuRm9ybWF0LkdNTCk7YT10aGlzLmdtbEZvcm1hdC5wYXJzZUZlYXR1cmUoYSk7dmFyIGIsYz1udWxsO2EmJihiPWEuZ2VvbWV0cnkmJmEuZ2VvbWV0cnkuY2xvbmUoKSxjPWEuYm91bmRzJiZhLmJvdW5kcy5jbG9uZSgpLGEuZGVzdHJveSgpKTtyZXR1cm57Z2VvbWV0cnk6Yixib3VuZHM6Y319LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuRm9ybWF0LldNU0dldEZlYXR1cmVJbmZvIn0pO09wZW5MYXllcnMuQ29udHJvbC5XTVRTR2V0RmVhdHVyZUluZm89T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkNvbnRyb2wse2hvdmVyOiExLHJlcXVlc3RFbmNvZGluZzoiS1ZQIixkcmlsbERvd246ITEsbWF4RmVhdHVyZXM6MTAsY2xpY2tDYWxsYmFjazoiY2xpY2siLGxheWVyczpudWxsLHF1ZXJ5VmlzaWJsZTohMCxpbmZvRm9ybWF0OiJ0ZXh0L2h0bWwiLHZlbmRvclBhcmFtczp7fSxmb3JtYXQ6bnVsbCxmb3JtYXRPcHRpb25zOm51bGwsaGFuZGxlcjpudWxsLGhvdmVyUmVxdWVzdDpudWxsLHBlbmRpbmc6MCxpbml0aWFsaXplOmZ1bmN0aW9uKGEpe2E9YXx8e307YS5oYW5kbGVyT3B0aW9ucz1hLmhhbmRsZXJPcHRpb25zfHx7fTtPcGVuTGF5ZXJzLkNvbnRyb2wucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxbYV0pO3RoaXMuZm9ybWF0fHwodGhpcy5mb3JtYXQ9bmV3IE9wZW5MYXllcnMuRm9ybWF0LldNU0dldEZlYXR1cmVJbmZvKGEuZm9ybWF0T3B0aW9ucykpOwohMD09PXRoaXMuZHJpbGxEb3duJiYodGhpcy5ob3Zlcj0hMSk7dGhpcy5ob3Zlcj90aGlzLmhhbmRsZXI9bmV3IE9wZW5MYXllcnMuSGFuZGxlci5Ib3Zlcih0aGlzLHttb3ZlOnRoaXMuY2FuY2VsSG92ZXIscGF1c2U6dGhpcy5nZXRJbmZvRm9ySG92ZXJ9LE9wZW5MYXllcnMuVXRpbC5leHRlbmQodGhpcy5oYW5kbGVyT3B0aW9ucy5ob3Zlcnx8e30se2RlbGF5OjI1MH0pKTooYT17fSxhW3RoaXMuY2xpY2tDYWxsYmFja109dGhpcy5nZXRJbmZvRm9yQ2xpY2ssdGhpcy5oYW5kbGVyPW5ldyBPcGVuTGF5ZXJzLkhhbmRsZXIuQ2xpY2sodGhpcyxhLHRoaXMuaGFuZGxlck9wdGlvbnMuY2xpY2t8fHt9KSl9LGdldEluZm9Gb3JDbGljazpmdW5jdGlvbihhKXt0aGlzLnJlcXVlc3QoYS54eSx7fSl9LGdldEluZm9Gb3JIb3ZlcjpmdW5jdGlvbihhKXt0aGlzLnJlcXVlc3QoYS54eSx7aG92ZXI6ITB9KX0sY2FuY2VsSG92ZXI6ZnVuY3Rpb24oKXt0aGlzLmhvdmVyUmVxdWVzdCYmKC0tdGhpcy5wZW5kaW5nLAowPj10aGlzLnBlbmRpbmcmJihPcGVuTGF5ZXJzLkVsZW1lbnQucmVtb3ZlQ2xhc3ModGhpcy5tYXAudmlld1BvcnREaXYsIm9sQ3Vyc29yV2FpdCIpLHRoaXMucGVuZGluZz0wKSx0aGlzLmhvdmVyUmVxdWVzdC5hYm9ydCgpLHRoaXMuaG92ZXJSZXF1ZXN0PW51bGwpfSxmaW5kTGF5ZXJzOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPXRoaXMubGF5ZXJzfHx0aGlzLm1hcC5sYXllcnMsYj1bXSxjLGQ9YS5sZW5ndGgtMTswPD1kJiYoYz1hW2RdLCEoYyBpbnN0YW5jZW9mIE9wZW5MYXllcnMuTGF5ZXIuV01UUyl8fChjLnJlcXVlc3RFbmNvZGluZyE9PXRoaXMucmVxdWVzdEVuY29kaW5nfHx0aGlzLnF1ZXJ5VmlzaWJsZSYmIWMuZ2V0VmlzaWJpbGl0eSgpKXx8KGIucHVzaChjKSx0aGlzLmRyaWxsRG93biYmIXRoaXMuaG92ZXIpKTstLWQpO3JldHVybiBifSxidWlsZFJlcXVlc3RPcHRpb25zOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5tYXAuZ2V0TG9uTGF0RnJvbVBpeGVsKGIpLGQ9YS5nZXRVUkwobmV3IE9wZW5MYXllcnMuQm91bmRzKGMubG9uLApjLmxhdCxjLmxvbixjLmxhdCkpLGQ9T3BlbkxheWVycy5VdGlsLmdldFBhcmFtZXRlcnMoZCksYz1hLmdldFRpbGVJbmZvKGMpO09wZW5MYXllcnMuVXRpbC5leHRlbmQoZCx7c2VydmljZToiV01UUyIsdmVyc2lvbjphLnZlcnNpb24scmVxdWVzdDoiR2V0RmVhdHVyZUluZm8iLGluZm9Gb3JtYXQ6dGhpcy5pbmZvRm9ybWF0LGk6Yy5pLGo6Yy5qfSk7T3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoZCx0aGlzLnZlbmRvclBhcmFtcyk7cmV0dXJue3VybDpPcGVuTGF5ZXJzLlV0aWwuaXNBcnJheShhLnVybCk/YS51cmxbMF06YS51cmwscGFyYW1zOk9wZW5MYXllcnMuVXRpbC51cHBlckNhc2VPYmplY3QoZCksY2FsbGJhY2s6ZnVuY3Rpb24oYyl7dGhpcy5oYW5kbGVSZXNwb25zZShiLGMsYSl9LHNjb3BlOnRoaXN9fSxyZXF1ZXN0OmZ1bmN0aW9uKGEsYil7Yj1ifHx7fTt2YXIgYz10aGlzLmZpbmRMYXllcnMoKTtpZigwPGMubGVuZ3RoKXtmb3IodmFyIGQsZSxmPTAsZz1jLmxlbmd0aDtmPApnO2YrKyllPWNbZl0sZD10aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoImJlZm9yZWdldGZlYXR1cmVpbmZvIix7eHk6YSxsYXllcjplfSksITEhPT1kJiYoKyt0aGlzLnBlbmRpbmcsZD10aGlzLmJ1aWxkUmVxdWVzdE9wdGlvbnMoZSxhKSxkPU9wZW5MYXllcnMuUmVxdWVzdC5HRVQoZCksITA9PT1iLmhvdmVyJiYodGhpcy5ob3ZlclJlcXVlc3Q9ZCkpOzA8dGhpcy5wZW5kaW5nJiZPcGVuTGF5ZXJzLkVsZW1lbnQuYWRkQ2xhc3ModGhpcy5tYXAudmlld1BvcnREaXYsIm9sQ3Vyc29yV2FpdCIpfX0saGFuZGxlUmVzcG9uc2U6ZnVuY3Rpb24oYSxiLGMpey0tdGhpcy5wZW5kaW5nOzA+PXRoaXMucGVuZGluZyYmKE9wZW5MYXllcnMuRWxlbWVudC5yZW1vdmVDbGFzcyh0aGlzLm1hcC52aWV3UG9ydERpdiwib2xDdXJzb3JXYWl0IiksdGhpcy5wZW5kaW5nPTApO2lmKGIuc3RhdHVzJiYoMjAwPmIuc3RhdHVzfHwzMDA8PWIuc3RhdHVzKSl0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoImV4Y2VwdGlvbiIsCnt4eTphLHJlcXVlc3Q6YixsYXllcjpjfSk7ZWxzZXt2YXIgZD1iLnJlc3BvbnNlWE1MO2QmJmQuZG9jdW1lbnRFbGVtZW50fHwoZD1iLnJlc3BvbnNlVGV4dCk7dmFyIGUsZjt0cnl7ZT10aGlzLmZvcm1hdC5yZWFkKGQpfWNhdGNoKGcpe2Y9ITAsdGhpcy5ldmVudHMudHJpZ2dlckV2ZW50KCJleGNlcHRpb24iLHt4eTphLHJlcXVlc3Q6YixlcnJvcjpnLGxheWVyOmN9KX1mfHx0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoImdldGZlYXR1cmVpbmZvIix7dGV4dDpiLnJlc3BvbnNlVGV4dCxmZWF0dXJlczplLHJlcXVlc3Q6Yix4eTphLGxheWVyOmN9KX19LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuQ29udHJvbC5XTVRTR2V0RmVhdHVyZUluZm8ifSk7T3BlbkxheWVycy5Qcm90b2NvbC5DU1cudjJfMF8yPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Qcm90b2NvbCx7Zm9ybWF0T3B0aW9uczpudWxsLGluaXRpYWxpemU6ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5Qcm90b2NvbC5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLFthXSk7YS5mb3JtYXR8fCh0aGlzLmZvcm1hdD1uZXcgT3BlbkxheWVycy5Gb3JtYXQuQ1NXR2V0UmVjb3Jkcy52Ml8wXzIoT3BlbkxheWVycy5VdGlsLmV4dGVuZCh7fSx0aGlzLmZvcm1hdE9wdGlvbnMpKSl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLm9wdGlvbnMmJiF0aGlzLm9wdGlvbnMuZm9ybWF0JiZ0aGlzLmZvcm1hdC5kZXN0cm95KCk7dGhpcy5mb3JtYXQ9bnVsbDtPcGVuTGF5ZXJzLlByb3RvY29sLnByb3RvdHlwZS5kZXN0cm95LmFwcGx5KHRoaXMpfSxyZWFkOmZ1bmN0aW9uKGEpe2E9T3BlbkxheWVycy5VdGlsLmV4dGVuZCh7fSxhKTtPcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyhhLAp0aGlzLm9wdGlvbnN8fHt9KTt2YXIgYj1uZXcgT3BlbkxheWVycy5Qcm90b2NvbC5SZXNwb25zZSh7cmVxdWVzdFR5cGU6InJlYWQifSksYz10aGlzLmZvcm1hdC53cml0ZShhLnBhcmFtc3x8YSk7Yi5wcml2PU9wZW5MYXllcnMuUmVxdWVzdC5QT1NUKHt1cmw6YS51cmwsY2FsbGJhY2s6dGhpcy5jcmVhdGVDYWxsYmFjayh0aGlzLmhhbmRsZVJlYWQsYixhKSxwYXJhbXM6YS5wYXJhbXMsaGVhZGVyczphLmhlYWRlcnMsZGF0YTpjfSk7cmV0dXJuIGJ9LGhhbmRsZVJlYWQ6ZnVuY3Rpb24oYSxiKXtpZihiLmNhbGxiYWNrKXt2YXIgYz1hLnByaXY7MjAwPD1jLnN0YXR1cyYmMzAwPmMuc3RhdHVzPyhhLmRhdGE9dGhpcy5wYXJzZURhdGEoYyksYS5jb2RlPU9wZW5MYXllcnMuUHJvdG9jb2wuUmVzcG9uc2UuU1VDQ0VTUyk6YS5jb2RlPU9wZW5MYXllcnMuUHJvdG9jb2wuUmVzcG9uc2UuRkFJTFVSRTtiLmNhbGxiYWNrLmNhbGwoYi5zY29wZSxhKX19LHBhcnNlRGF0YTpmdW5jdGlvbihhKXt2YXIgYj0KYS5yZXNwb25zZVhNTDtiJiZiLmRvY3VtZW50RWxlbWVudHx8KGI9YS5yZXNwb25zZVRleHQpO3JldHVybiFifHwwPj1iLmxlbmd0aD9udWxsOnRoaXMuZm9ybWF0LnJlYWQoYil9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuUHJvdG9jb2wuQ1NXLnYyXzBfMiJ9KTtPcGVuTGF5ZXJzLkZvcm1hdC5XQ1NDYXBhYmlsaXRpZXMudjFfMV8wPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Gb3JtYXQuV0NTQ2FwYWJpbGl0aWVzLnYxLHtuYW1lc3BhY2VzOnt3Y3M6Imh0dHA6Ly93d3cub3Blbmdpcy5uZXQvd2NzLzEuMSIseGxpbms6Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiLHhzaToiaHR0cDovL3d3dy53My5vcmcvMjAwMS9YTUxTY2hlbWEtaW5zdGFuY2UiLG93czoiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9vd3MvMS4xIn0sZXJyb3JQcm9wZXJ0eToib3BlcmF0aW9uc01ldGFkYXRhIixyZWFkZXJzOnt3Y3M6T3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoe0NhcGFiaWxpdGllczpmdW5jdGlvbihhLGIpe3RoaXMucmVhZENoaWxkTm9kZXMoYSxiKX0sQ29udGVudHM6ZnVuY3Rpb24oYSxiKXtiLmNvbnRlbnRNZXRhZGF0YT1bXTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYi5jb250ZW50TWV0YWRhdGEpfSxDb3ZlcmFnZVN1bW1hcnk6ZnVuY3Rpb24oYSwKYil7dmFyIGM9e307dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGMpO2IucHVzaChjKX0sSWRlbnRpZmllcjpmdW5jdGlvbihhLGIpe2IuaWRlbnRpZmllcj10aGlzLmdldENoaWxkVmFsdWUoYSl9LFRpdGxlOmZ1bmN0aW9uKGEsYil7Yi50aXRsZT10aGlzLmdldENoaWxkVmFsdWUoYSl9LEFic3RyYWN0OmZ1bmN0aW9uKGEsYil7YlsiYWJzdHJhY3QiXT10aGlzLmdldENoaWxkVmFsdWUoYSl9LFN1cHBvcnRlZENSUzpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuZ2V0Q2hpbGRWYWx1ZShhKTtjJiYoYi5zdXBwb3J0ZWRDUlN8fChiLnN1cHBvcnRlZENSUz1bXSksYi5zdXBwb3J0ZWRDUlMucHVzaChjKSl9LFN1cHBvcnRlZEZvcm1hdDpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuZ2V0Q2hpbGRWYWx1ZShhKTtjJiYoYi5zdXBwb3J0ZWRGb3JtYXR8fChiLnN1cHBvcnRlZEZvcm1hdD1bXSksYi5zdXBwb3J0ZWRGb3JtYXQucHVzaChjKSl9fSxPcGVuTGF5ZXJzLkZvcm1hdC5XQ1NDYXBhYmlsaXRpZXMudjEucHJvdG90eXBlLnJlYWRlcnMud2NzKSwKb3dzOk9wZW5MYXllcnMuRm9ybWF0Lk9XU0NvbW1vbi52MV8xXzAucHJvdG90eXBlLnJlYWRlcnMub3dzfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkZvcm1hdC5XQ1NDYXBhYmlsaXRpZXMudjFfMV8wIn0pO09wZW5MYXllcnMuQ29udHJvbC5HcmF0aWN1bGU9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkNvbnRyb2wse2F1dG9BY3RpdmF0ZTohMCxpbnRlcnZhbHM6WzQ1LDMwLDIwLDEwLDUsMiwxLDAuNSwwLjIsMC4xLDAuMDUsMC4wMSwwLjAwNSwwLjAwMiwwLjAwMV0sZGlzcGxheUluTGF5ZXJTd2l0Y2hlcjohMCx2aXNpYmxlOiEwLG51bVBvaW50czo1MCx0YXJnZXRTaXplOjIwMCxsYXllck5hbWU6bnVsbCxsYWJlbGxlZDohMCxsYWJlbEZvcm1hdDoiZG0iLGxpbmVTeW1ib2xpemVyOntzdHJva2VDb2xvcjoiIzMzMyIsc3Ryb2tlV2lkdGg6MSxzdHJva2VPcGFjaXR5OjAuNX0sbGFiZWxTeW1ib2xpemVyOnt9LGdyYXRMYXllcjpudWxsLGluaXRpYWxpemU6ZnVuY3Rpb24oYSl7YT1hfHx7fTthLmxheWVyTmFtZT1hLmxheWVyTmFtZXx8T3BlbkxheWVycy5pMThuKCJHcmF0aWN1bGUiKTtPcGVuTGF5ZXJzLkNvbnRyb2wucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxbYV0pOwp0aGlzLmxhYmVsU3ltYm9saXplci5zdHJva2U9ITE7dGhpcy5sYWJlbFN5bWJvbGl6ZXIuZmlsbD0hMTt0aGlzLmxhYmVsU3ltYm9saXplci5sYWJlbD0iJHtsYWJlbH0iO3RoaXMubGFiZWxTeW1ib2xpemVyLmxhYmVsQWxpZ249IiR7bGFiZWxBbGlnbn0iO3RoaXMubGFiZWxTeW1ib2xpemVyLmxhYmVsWE9mZnNldD0iJHt4T2Zmc2V0fSI7dGhpcy5sYWJlbFN5bWJvbGl6ZXIubGFiZWxZT2Zmc2V0PSIke3lPZmZzZXR9In0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuZGVhY3RpdmF0ZSgpO09wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuZGVzdHJveS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5ncmF0TGF5ZXImJih0aGlzLmdyYXRMYXllci5kZXN0cm95KCksdGhpcy5ncmF0TGF5ZXI9bnVsbCl9LGRyYXc6ZnVuY3Rpb24oKXtPcGVuTGF5ZXJzLkNvbnRyb2wucHJvdG90eXBlLmRyYXcuYXBwbHkodGhpcyxhcmd1bWVudHMpO2lmKCF0aGlzLmdyYXRMYXllcil7dmFyIGE9bmV3IE9wZW5MYXllcnMuU3R5bGUoe30sCntydWxlczpbbmV3IE9wZW5MYXllcnMuUnVsZSh7c3ltYm9saXplcjp7UG9pbnQ6dGhpcy5sYWJlbFN5bWJvbGl6ZXIsTGluZTp0aGlzLmxpbmVTeW1ib2xpemVyfX0pXX0pO3RoaXMuZ3JhdExheWVyPW5ldyBPcGVuTGF5ZXJzLkxheWVyLlZlY3Rvcih0aGlzLmxheWVyTmFtZSx7c3R5bGVNYXA6bmV3IE9wZW5MYXllcnMuU3R5bGVNYXAoeyJkZWZhdWx0IjphfSksdmlzaWJpbGl0eTp0aGlzLnZpc2libGUsZGlzcGxheUluTGF5ZXJTd2l0Y2hlcjp0aGlzLmRpc3BsYXlJbkxheWVyU3dpdGNoZXJ9KX1yZXR1cm4gdGhpcy5kaXZ9LGFjdGl2YXRlOmZ1bmN0aW9uKCl7cmV0dXJuIE9wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuYWN0aXZhdGUuYXBwbHkodGhpcyxhcmd1bWVudHMpPyh0aGlzLm1hcC5hZGRMYXllcih0aGlzLmdyYXRMYXllciksdGhpcy5tYXAuZXZlbnRzLnJlZ2lzdGVyKCJtb3ZlZW5kIix0aGlzLHRoaXMudXBkYXRlKSx0aGlzLnVwZGF0ZSgpLCEwKTohMX0sZGVhY3RpdmF0ZTpmdW5jdGlvbigpe3JldHVybiBPcGVuTGF5ZXJzLkNvbnRyb2wucHJvdG90eXBlLmRlYWN0aXZhdGUuYXBwbHkodGhpcywKYXJndW1lbnRzKT8odGhpcy5tYXAuZXZlbnRzLnVucmVnaXN0ZXIoIm1vdmVlbmQiLHRoaXMsdGhpcy51cGRhdGUpLHRoaXMubWFwLnJlbW92ZUxheWVyKHRoaXMuZ3JhdExheWVyKSwhMCk6ITF9LHVwZGF0ZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMubWFwLmdldEV4dGVudCgpO2lmKGEpe3RoaXMuZ3JhdExheWVyLmRlc3Ryb3lGZWF0dXJlcygpO3ZhciBiPW5ldyBPcGVuTGF5ZXJzLlByb2plY3Rpb24oIkVQU0c6NDMyNiIpLGM9dGhpcy5tYXAuZ2V0UHJvamVjdGlvbk9iamVjdCgpLGQ9dGhpcy5tYXAuZ2V0UmVzb2x1dGlvbigpO2MucHJvaiYmImxvbmdsYXQiPT1jLnByb2oucHJvak5hbWUmJih0aGlzLm51bVBvaW50cz0xKTt2YXIgZT10aGlzLm1hcC5nZXRDZW50ZXIoKSxmPW5ldyBPcGVuTGF5ZXJzLlBpeGVsKGUubG9uLGUubGF0KTtPcGVuTGF5ZXJzLlByb2plY3Rpb24udHJhbnNmb3JtKGYsYyxiKTtmb3IodmFyIGU9dGhpcy50YXJnZXRTaXplKmQsZT1lKmUsZyxkPTA7ZDx0aGlzLmludGVydmFscy5sZW5ndGg7KytkKXtnPQp0aGlzLmludGVydmFsc1tkXTt2YXIgaD1nLzIsaz1mLm9mZnNldCh7eDotaCx5Oi1ofSksaD1mLm9mZnNldCh7eDpoLHk6aH0pO09wZW5MYXllcnMuUHJvamVjdGlvbi50cmFuc2Zvcm0oayxiLGMpO09wZW5MYXllcnMuUHJvamVjdGlvbi50cmFuc2Zvcm0oaCxiLGMpO2lmKChrLngtaC54KSooay54LWgueCkrKGsueS1oLnkpKihrLnktaC55KTw9ZSlicmVha31mLng9TWF0aC5mbG9vcihmLngvZykqZztmLnk9TWF0aC5mbG9vcihmLnkvZykqZzt2YXIgZD0wLGU9W2YuY2xvbmUoKV0saD1mLmNsb25lKCksbDtkbyBoPWgub2Zmc2V0KHt4OjAseTpnfSksbD1PcGVuTGF5ZXJzLlByb2plY3Rpb24udHJhbnNmb3JtKGguY2xvbmUoKSxiLGMpLGUudW5zaGlmdChoKTt3aGlsZShhLmNvbnRhaW5zUGl4ZWwobCkmJjFFMz4rK2QpO2g9Zi5jbG9uZSgpO2RvIGg9aC5vZmZzZXQoe3g6MCx5Oi1nfSksbD1PcGVuTGF5ZXJzLlByb2plY3Rpb24udHJhbnNmb3JtKGguY2xvbmUoKSxiLGMpLGUucHVzaChoKTsKd2hpbGUoYS5jb250YWluc1BpeGVsKGwpJiYxRTM+KytkKTtkPTA7az1bZi5jbG9uZSgpXTtoPWYuY2xvbmUoKTtkbyBoPWgub2Zmc2V0KHt4Oi1nLHk6MH0pLGw9T3BlbkxheWVycy5Qcm9qZWN0aW9uLnRyYW5zZm9ybShoLmNsb25lKCksYixjKSxrLnVuc2hpZnQoaCk7d2hpbGUoYS5jb250YWluc1BpeGVsKGwpJiYxRTM+KytkKTtoPWYuY2xvbmUoKTtkbyBoPWgub2Zmc2V0KHt4OmcseTowfSksbD1PcGVuTGF5ZXJzLlByb2plY3Rpb24udHJhbnNmb3JtKGguY2xvbmUoKSxiLGMpLGsucHVzaChoKTt3aGlsZShhLmNvbnRhaW5zUGl4ZWwobCkmJjFFMz4rK2QpO2c9W107Zm9yKGQ9MDtkPGsubGVuZ3RoOysrZCl7bD1rW2RdLng7Zm9yKHZhciBmPVtdLG09bnVsbCxuPU1hdGgubWluKGVbMF0ueSw5MCksaD1NYXRoLm1heChlW2UubGVuZ3RoLTFdLnksLTkwKSxwPShuLWgpL3RoaXMubnVtUG9pbnRzLG49aCxoPTA7aDw9dGhpcy5udW1Qb2ludHM7KytoKXt2YXIgcT1uZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludChsLApuKTtxLnRyYW5zZm9ybShiLGMpO2YucHVzaChxKTtuKz1wO3EueT49YS5ib3R0b20mJiFtJiYobT1xKX10aGlzLmxhYmVsbGVkJiYobT1uZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludChtLngsYS5ib3R0b20pLGw9e3ZhbHVlOmwsbGFiZWw6dGhpcy5sYWJlbGxlZD9PcGVuTGF5ZXJzLlV0aWwuZ2V0Rm9ybWF0dGVkTG9uTGF0KGwsImxvbiIsdGhpcy5sYWJlbEZvcm1hdCk6IiIsbGFiZWxBbGlnbjoiY2IiLHhPZmZzZXQ6MCx5T2Zmc2V0OjJ9LHRoaXMuZ3JhdExheWVyLmFkZEZlYXR1cmVzKG5ldyBPcGVuTGF5ZXJzLkZlYXR1cmUuVmVjdG9yKG0sbCkpKTtmPW5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LkxpbmVTdHJpbmcoZik7Zy5wdXNoKG5ldyBPcGVuTGF5ZXJzLkZlYXR1cmUuVmVjdG9yKGYpKX1mb3IoaD0wO2g8ZS5sZW5ndGg7KytoKWlmKG49ZVtoXS55LCEoLTkwPm58fDkwPG4pKXtmPVtdO2Q9a1swXS54O3A9KGtbay5sZW5ndGgtMV0ueC1kKS90aGlzLm51bVBvaW50czsKbD1kO209bnVsbDtmb3IoZD0wO2Q8PXRoaXMubnVtUG9pbnRzOysrZClxPW5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KGwsbikscS50cmFuc2Zvcm0oYixjKSxmLnB1c2gocSksbCs9cCxxLng8YS5yaWdodCYmKG09cSk7dGhpcy5sYWJlbGxlZCYmKG09bmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoYS5yaWdodCxtLnkpLGw9e3ZhbHVlOm4sbGFiZWw6dGhpcy5sYWJlbGxlZD9PcGVuTGF5ZXJzLlV0aWwuZ2V0Rm9ybWF0dGVkTG9uTGF0KG4sImxhdCIsdGhpcy5sYWJlbEZvcm1hdCk6IiIsbGFiZWxBbGlnbjoicmIiLHhPZmZzZXQ6LTIseU9mZnNldDoyfSx0aGlzLmdyYXRMYXllci5hZGRGZWF0dXJlcyhuZXcgT3BlbkxheWVycy5GZWF0dXJlLlZlY3RvcihtLGwpKSk7Zj1uZXcgT3BlbkxheWVycy5HZW9tZXRyeS5MaW5lU3RyaW5nKGYpO2cucHVzaChuZXcgT3BlbkxheWVycy5GZWF0dXJlLlZlY3RvcihmKSl9dGhpcy5ncmF0TGF5ZXIuYWRkRmVhdHVyZXMoZyl9fSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkNvbnRyb2wuR3JhdGljdWxlIn0pO09wZW5MYXllcnMuQ29uc29sZS53YXJuKCJPcGVuTGF5ZXJzLlJpY28gaXMgZGVwcmVjYXRlZCIpO09wZW5MYXllcnMuUmljbz1PcGVuTGF5ZXJzLlJpY298fHt9OwpPcGVuTGF5ZXJzLlJpY28uQ29ybmVyPXtyb3VuZDpmdW5jdGlvbihhLGIpe2E9T3BlbkxheWVycy5VdGlsLmdldEVsZW1lbnQoYSk7dGhpcy5fc2V0T3B0aW9ucyhiKTt2YXIgYz10aGlzLm9wdGlvbnMuY29sb3I7ImZyb21FbGVtZW50Ij09dGhpcy5vcHRpb25zLmNvbG9yJiYoYz10aGlzLl9iYWNrZ3JvdW5kKGEpKTt2YXIgZD10aGlzLm9wdGlvbnMuYmdDb2xvcjsiZnJvbVBhcmVudCI9PXRoaXMub3B0aW9ucy5iZ0NvbG9yJiYoZD10aGlzLl9iYWNrZ3JvdW5kKGEub2Zmc2V0UGFyZW50KSk7dGhpcy5fcm91bmRDb3JuZXJzSW1wbChhLGMsZCl9LGNoYW5nZUNvbG9yOmZ1bmN0aW9uKGEsYil7YS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3I9Yjtmb3IodmFyIGM9YS5wYXJlbnROb2RlLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJzcGFuIiksZD0wO2Q8Yy5sZW5ndGg7ZCsrKWNbZF0uc3R5bGUuYmFja2dyb3VuZENvbG9yPWJ9LGNoYW5nZU9wYWNpdHk6ZnVuY3Rpb24oYSxiKXt2YXIgYz0iYWxwaGEob3BhY2l0eT0iKwoxMDAqYisiKSI7YS5zdHlsZS5vcGFjaXR5PWI7YS5zdHlsZS5maWx0ZXI9Yztmb3IodmFyIGQ9YS5wYXJlbnROb2RlLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJzcGFuIiksZT0wO2U8ZC5sZW5ndGg7ZSsrKWRbZV0uc3R5bGUub3BhY2l0eT1iLGRbZV0uc3R5bGUuZmlsdGVyPWN9LHJlUm91bmQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLnBhcmVudE5vZGUuY2hpbGROb2Rlc1syXTthLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYS5wYXJlbnROb2RlLmNoaWxkTm9kZXNbMF0pO2EucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChjKTt0aGlzLnJvdW5kKGEucGFyZW50Tm9kZSxiKX0sX3JvdW5kQ29ybmVyc0ltcGw6ZnVuY3Rpb24oYSxiLGMpe3RoaXMub3B0aW9ucy5ib3JkZXImJnRoaXMuX3JlbmRlckJvcmRlcihhLGMpO3RoaXMuX2lzVG9wUm91bmRlZCgpJiZ0aGlzLl9yb3VuZFRvcENvcm5lcnMoYSxiLGMpO3RoaXMuX2lzQm90dG9tUm91bmRlZCgpJiZ0aGlzLl9yb3VuZEJvdHRvbUNvcm5lcnMoYSwKYixjKX0sX3JlbmRlckJvcmRlcjpmdW5jdGlvbihhLGIpe3ZhciBjPSIxcHggc29saWQgIit0aGlzLl9ib3JkZXJDb2xvcihiKTthLmlubmVySFRNTD0iPGRpdiAiKygic3R5bGU9J2JvcmRlci1sZWZ0OiAiK2MrIjsiKygiYm9yZGVyLXJpZ2h0OiAiK2MpKyInIikrIj4iK2EuaW5uZXJIVE1MKyI8L2Rpdj4ifSxfcm91bmRUb3BDb3JuZXJzOmZ1bmN0aW9uKGEsYixjKXtmb3IodmFyIGQ9dGhpcy5fY3JlYXRlQ29ybmVyKGMpLGU9MDtlPHRoaXMub3B0aW9ucy5udW1TbGljZXM7ZSsrKWQuYXBwZW5kQ2hpbGQodGhpcy5fY3JlYXRlQ29ybmVyU2xpY2UoYixjLGUsInRvcCIpKTthLnN0eWxlLnBhZGRpbmdUb3A9MDthLmluc2VydEJlZm9yZShkLGEuZmlyc3RDaGlsZCl9LF9yb3VuZEJvdHRvbUNvcm5lcnM6ZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZD10aGlzLl9jcmVhdGVDb3JuZXIoYyksZT10aGlzLm9wdGlvbnMubnVtU2xpY2VzLTE7MDw9ZTtlLS0pZC5hcHBlbmRDaGlsZCh0aGlzLl9jcmVhdGVDb3JuZXJTbGljZShiLApjLGUsImJvdHRvbSIpKTthLnN0eWxlLnBhZGRpbmdCb3R0b209MDthLmFwcGVuZENoaWxkKGQpfSxfY3JlYXRlQ29ybmVyOmZ1bmN0aW9uKGEpe3ZhciBiPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO2Iuc3R5bGUuYmFja2dyb3VuZENvbG9yPXRoaXMuX2lzVHJhbnNwYXJlbnQoKT8idHJhbnNwYXJlbnQiOmE7cmV0dXJuIGJ9LF9jcmVhdGVDb3JuZXJTbGljZTpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzcGFuIiksZj1lLnN0eWxlO2YuYmFja2dyb3VuZENvbG9yPWE7Zi5kaXNwbGF5PSJibG9jayI7Zi5oZWlnaHQ9IjFweCI7Zi5vdmVyZmxvdz0iaGlkZGVuIjtmLmZvbnRTaXplPSIxcHgiO2E9dGhpcy5fYm9yZGVyQ29sb3IoYSxiKTt0aGlzLm9wdGlvbnMuYm9yZGVyJiYwPT1jPyhmLmJvcmRlclRvcFN0eWxlPSJzb2xpZCIsZi5ib3JkZXJUb3BXaWR0aD0iMXB4IixmLmJvcmRlckxlZnRXaWR0aD0iMHB4IixmLmJvcmRlclJpZ2h0V2lkdGg9CiIwcHgiLGYuYm9yZGVyQm90dG9tV2lkdGg9IjBweCIsZi5oZWlnaHQ9IjBweCIsZi5ib3JkZXJDb2xvcj1hKTphJiYoZi5ib3JkZXJDb2xvcj1hLGYuYm9yZGVyU3R5bGU9InNvbGlkIixmLmJvcmRlcldpZHRoPSIwcHggMXB4Iik7dGhpcy5vcHRpb25zLmNvbXBhY3R8fGMhPXRoaXMub3B0aW9ucy5udW1TbGljZXMtMXx8KGYuaGVpZ2h0PSIycHgiKTt0aGlzLl9zZXRNYXJnaW4oZSxjLGQpO3RoaXMuX3NldEJvcmRlcihlLGMsZCk7cmV0dXJuIGV9LF9zZXRPcHRpb25zOmZ1bmN0aW9uKGEpe3RoaXMub3B0aW9ucz17Y29ybmVyczoiYWxsIixjb2xvcjoiZnJvbUVsZW1lbnQiLGJnQ29sb3I6ImZyb21QYXJlbnQiLGJsZW5kOiEwLGJvcmRlcjohMSxjb21wYWN0OiExfTtPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHRoaXMub3B0aW9ucyxhfHx7fSk7dGhpcy5vcHRpb25zLm51bVNsaWNlcz10aGlzLm9wdGlvbnMuY29tcGFjdD8yOjQ7dGhpcy5faXNUcmFuc3BhcmVudCgpJiYodGhpcy5vcHRpb25zLmJsZW5kPQohMSl9LF93aGljaFNpZGVUb3A6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faGFzU3RyaW5nKHRoaXMub3B0aW9ucy5jb3JuZXJzLCJhbGwiLCJ0b3AiKXx8MDw9dGhpcy5vcHRpb25zLmNvcm5lcnMuaW5kZXhPZigidGwiKSYmMDw9dGhpcy5vcHRpb25zLmNvcm5lcnMuaW5kZXhPZigidHIiKT8iIjowPD10aGlzLm9wdGlvbnMuY29ybmVycy5pbmRleE9mKCJ0bCIpPyJsZWZ0IjowPD10aGlzLm9wdGlvbnMuY29ybmVycy5pbmRleE9mKCJ0ciIpPyJyaWdodCI6IiJ9LF93aGljaFNpZGVCb3R0b206ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faGFzU3RyaW5nKHRoaXMub3B0aW9ucy5jb3JuZXJzLCJhbGwiLCJib3R0b20iKXx8MDw9dGhpcy5vcHRpb25zLmNvcm5lcnMuaW5kZXhPZigiYmwiKSYmMDw9dGhpcy5vcHRpb25zLmNvcm5lcnMuaW5kZXhPZigiYnIiKT8iIjowPD10aGlzLm9wdGlvbnMuY29ybmVycy5pbmRleE9mKCJibCIpPyJsZWZ0IjowPD10aGlzLm9wdGlvbnMuY29ybmVycy5pbmRleE9mKCJiciIpPwoicmlnaHQiOiIifSxfYm9yZGVyQ29sb3I6ZnVuY3Rpb24oYSxiKXtyZXR1cm4idHJhbnNwYXJlbnQiPT1hP2I6dGhpcy5vcHRpb25zLmJvcmRlcj90aGlzLm9wdGlvbnMuYm9yZGVyOnRoaXMub3B0aW9ucy5ibGVuZD90aGlzLl9ibGVuZChiLGEpOiIifSxfc2V0TWFyZ2luOmZ1bmN0aW9uKGEsYixjKXtiPXRoaXMuX21hcmdpblNpemUoYik7Yz0idG9wIj09Yz90aGlzLl93aGljaFNpZGVUb3AoKTp0aGlzLl93aGljaFNpZGVCb3R0b20oKTsibGVmdCI9PWM/KGEuc3R5bGUubWFyZ2luTGVmdD1iKyJweCIsYS5zdHlsZS5tYXJnaW5SaWdodD0iMHB4Iik6InJpZ2h0Ij09Yz8oYS5zdHlsZS5tYXJnaW5SaWdodD1iKyJweCIsYS5zdHlsZS5tYXJnaW5MZWZ0PSIwcHgiKTooYS5zdHlsZS5tYXJnaW5MZWZ0PWIrInB4IixhLnN0eWxlLm1hcmdpblJpZ2h0PWIrInB4Iil9LF9zZXRCb3JkZXI6ZnVuY3Rpb24oYSxiLGMpe2I9dGhpcy5fYm9yZGVyU2l6ZShiKTtjPSJ0b3AiPT1jP3RoaXMuX3doaWNoU2lkZVRvcCgpOgp0aGlzLl93aGljaFNpZGVCb3R0b20oKTsibGVmdCI9PWM/KGEuc3R5bGUuYm9yZGVyTGVmdFdpZHRoPWIrInB4IixhLnN0eWxlLmJvcmRlclJpZ2h0V2lkdGg9IjBweCIpOiJyaWdodCI9PWM/KGEuc3R5bGUuYm9yZGVyUmlnaHRXaWR0aD1iKyJweCIsYS5zdHlsZS5ib3JkZXJMZWZ0V2lkdGg9IjBweCIpOihhLnN0eWxlLmJvcmRlckxlZnRXaWR0aD1iKyJweCIsYS5zdHlsZS5ib3JkZXJSaWdodFdpZHRoPWIrInB4Iik7ITEhPXRoaXMub3B0aW9ucy5ib3JkZXImJihhLnN0eWxlLmJvcmRlckxlZnRXaWR0aD1iKyJweCIsYS5zdHlsZS5ib3JkZXJSaWdodFdpZHRoPWIrInB4Iil9LF9tYXJnaW5TaXplOmZ1bmN0aW9uKGEpe2lmKHRoaXMuX2lzVHJhbnNwYXJlbnQoKSlyZXR1cm4gMDt2YXIgYj1bNSwzLDIsMV0sYz1bMywyLDEsMF0sZD1bMiwxXSxlPVsxLDBdO3JldHVybiB0aGlzLm9wdGlvbnMuY29tcGFjdCYmdGhpcy5vcHRpb25zLmJsZW5kP2VbYV06dGhpcy5vcHRpb25zLmNvbXBhY3Q/CmRbYV06dGhpcy5vcHRpb25zLmJsZW5kP2NbYV06YlthXX0sX2JvcmRlclNpemU6ZnVuY3Rpb24oYSl7dmFyIGI9WzUsMywyLDFdLGM9WzIsMSwxLDFdLGQ9WzEsMF0sZT1bMCwyLDAsMF07cmV0dXJuIHRoaXMub3B0aW9ucy5jb21wYWN0JiYodGhpcy5vcHRpb25zLmJsZW5kfHx0aGlzLl9pc1RyYW5zcGFyZW50KCkpPzE6dGhpcy5vcHRpb25zLmNvbXBhY3Q/ZFthXTp0aGlzLm9wdGlvbnMuYmxlbmQ/Y1thXTp0aGlzLm9wdGlvbnMuYm9yZGVyP2VbYV06dGhpcy5faXNUcmFuc3BhcmVudCgpP2JbYV06MH0sX2hhc1N0cmluZzpmdW5jdGlvbihhKXtmb3IodmFyIGI9MTtiPGFyZ3VtZW50cy5sZW5ndGg7YisrKWlmKDA8PWEuaW5kZXhPZihhcmd1bWVudHNbYl0pKXJldHVybiEwO3JldHVybiExfSxfYmxlbmQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz1PcGVuTGF5ZXJzLlJpY28uQ29sb3IuY3JlYXRlRnJvbUhleChhKTtjLmJsZW5kKE9wZW5MYXllcnMuUmljby5Db2xvci5jcmVhdGVGcm9tSGV4KGIpKTsKcmV0dXJuIGN9LF9iYWNrZ3JvdW5kOmZ1bmN0aW9uKGEpe3RyeXtyZXR1cm4gT3BlbkxheWVycy5SaWNvLkNvbG9yLmNyZWF0ZUNvbG9yRnJvbUJhY2tncm91bmQoYSkuYXNIZXgoKX1jYXRjaChiKXtyZXR1cm4iI2ZmZmZmZiJ9fSxfaXNUcmFuc3BhcmVudDpmdW5jdGlvbigpe3JldHVybiJ0cmFuc3BhcmVudCI9PXRoaXMub3B0aW9ucy5jb2xvcn0sX2lzVG9wUm91bmRlZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9oYXNTdHJpbmcodGhpcy5vcHRpb25zLmNvcm5lcnMsImFsbCIsInRvcCIsInRsIiwidHIiKX0sX2lzQm90dG9tUm91bmRlZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9oYXNTdHJpbmcodGhpcy5vcHRpb25zLmNvcm5lcnMsImFsbCIsImJvdHRvbSIsImJsIiwiYnIiKX0sX2hhc1NpbmdsZVRleHRDaGlsZDpmdW5jdGlvbihhKXtyZXR1cm4gMT09YS5jaGlsZE5vZGVzLmxlbmd0aCYmMz09YS5jaGlsZE5vZGVzWzBdLm5vZGVUeXBlfX07T3BlbkxheWVycy5Db250cm9sLk5hdmlnYXRpb25IaXN0b3J5PU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Db250cm9sLHt0eXBlOk9wZW5MYXllcnMuQ29udHJvbC5UWVBFX1RPR0dMRSxwcmV2aW91czpudWxsLHByZXZpb3VzT3B0aW9uczpudWxsLG5leHQ6bnVsbCxuZXh0T3B0aW9uczpudWxsLGxpbWl0OjUwLGF1dG9BY3RpdmF0ZTohMCxjbGVhck9uRGVhY3RpdmF0ZTohMSxyZWdpc3RyeTpudWxsLG5leHRTdGFjazpudWxsLHByZXZpb3VzU3RhY2s6bnVsbCxsaXN0ZW5lcnM6bnVsbCxyZXN0b3Jpbmc6ITEsaW5pdGlhbGl6ZTpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLkNvbnRyb2wucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxbYV0pO3RoaXMucmVnaXN0cnk9T3BlbkxheWVycy5VdGlsLmV4dGVuZCh7bW92ZWVuZDp0aGlzLmdldFN0YXRlfSx0aGlzLnJlZ2lzdHJ5KTthPXt0cmlnZ2VyOk9wZW5MYXllcnMuRnVuY3Rpb24uYmluZCh0aGlzLnByZXZpb3VzVHJpZ2dlciwKdGhpcyksZGlzcGxheUNsYXNzOnRoaXMuZGlzcGxheUNsYXNzKyIgIit0aGlzLmRpc3BsYXlDbGFzcysiUHJldmlvdXMifTtPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKGEsdGhpcy5wcmV2aW91c09wdGlvbnMpO3RoaXMucHJldmlvdXM9bmV3IE9wZW5MYXllcnMuQ29udHJvbC5CdXR0b24oYSk7YT17dHJpZ2dlcjpPcGVuTGF5ZXJzLkZ1bmN0aW9uLmJpbmQodGhpcy5uZXh0VHJpZ2dlcix0aGlzKSxkaXNwbGF5Q2xhc3M6dGhpcy5kaXNwbGF5Q2xhc3MrIiAiK3RoaXMuZGlzcGxheUNsYXNzKyJOZXh0In07T3BlbkxheWVycy5VdGlsLmV4dGVuZChhLHRoaXMubmV4dE9wdGlvbnMpO3RoaXMubmV4dD1uZXcgT3BlbkxheWVycy5Db250cm9sLkJ1dHRvbihhKTt0aGlzLmNsZWFyKCl9LG9uUHJldmlvdXNDaGFuZ2U6ZnVuY3Rpb24oYSxiKXthJiYhdGhpcy5wcmV2aW91cy5hY3RpdmU/dGhpcy5wcmV2aW91cy5hY3RpdmF0ZSgpOiFhJiZ0aGlzLnByZXZpb3VzLmFjdGl2ZSYmdGhpcy5wcmV2aW91cy5kZWFjdGl2YXRlKCl9LApvbk5leHRDaGFuZ2U6ZnVuY3Rpb24oYSxiKXthJiYhdGhpcy5uZXh0LmFjdGl2ZT90aGlzLm5leHQuYWN0aXZhdGUoKTohYSYmdGhpcy5uZXh0LmFjdGl2ZSYmdGhpcy5uZXh0LmRlYWN0aXZhdGUoKX0sZGVzdHJveTpmdW5jdGlvbigpe09wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuZGVzdHJveS5hcHBseSh0aGlzKTt0aGlzLnByZXZpb3VzLmRlc3Ryb3koKTt0aGlzLm5leHQuZGVzdHJveSgpO3RoaXMuZGVhY3RpdmF0ZSgpO2Zvcih2YXIgYSBpbiB0aGlzKXRoaXNbYV09bnVsbH0sc2V0TWFwOmZ1bmN0aW9uKGEpe3RoaXMubWFwPWE7dGhpcy5uZXh0LnNldE1hcChhKTt0aGlzLnByZXZpb3VzLnNldE1hcChhKX0sZHJhdzpmdW5jdGlvbigpe09wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuZHJhdy5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5uZXh0LmRyYXcoKTt0aGlzLnByZXZpb3VzLmRyYXcoKX0scHJldmlvdXNUcmlnZ2VyOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5wcmV2aW91c1N0YWNrLnNoaWZ0KCksCmI9dGhpcy5wcmV2aW91c1N0YWNrLnNoaWZ0KCk7dm9pZCAwIT1iPyh0aGlzLm5leHRTdGFjay51bnNoaWZ0KGEpLHRoaXMucHJldmlvdXNTdGFjay51bnNoaWZ0KGIpLHRoaXMucmVzdG9yaW5nPSEwLHRoaXMucmVzdG9yZShiKSx0aGlzLnJlc3RvcmluZz0hMSx0aGlzLm9uTmV4dENoYW5nZSh0aGlzLm5leHRTdGFja1swXSx0aGlzLm5leHRTdGFjay5sZW5ndGgpLHRoaXMub25QcmV2aW91c0NoYW5nZSh0aGlzLnByZXZpb3VzU3RhY2tbMV0sdGhpcy5wcmV2aW91c1N0YWNrLmxlbmd0aC0xKSk6dGhpcy5wcmV2aW91c1N0YWNrLnVuc2hpZnQoYSk7cmV0dXJuIGJ9LG5leHRUcmlnZ2VyOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5uZXh0U3RhY2suc2hpZnQoKTt2b2lkIDAhPWEmJih0aGlzLnByZXZpb3VzU3RhY2sudW5zaGlmdChhKSx0aGlzLnJlc3RvcmluZz0hMCx0aGlzLnJlc3RvcmUoYSksdGhpcy5yZXN0b3Jpbmc9ITEsdGhpcy5vbk5leHRDaGFuZ2UodGhpcy5uZXh0U3RhY2tbMF0sCnRoaXMubmV4dFN0YWNrLmxlbmd0aCksdGhpcy5vblByZXZpb3VzQ2hhbmdlKHRoaXMucHJldmlvdXNTdGFja1sxXSx0aGlzLnByZXZpb3VzU3RhY2subGVuZ3RoLTEpKTtyZXR1cm4gYX0sY2xlYXI6ZnVuY3Rpb24oKXt0aGlzLnByZXZpb3VzU3RhY2s9W107dGhpcy5wcmV2aW91cy5kZWFjdGl2YXRlKCk7dGhpcy5uZXh0U3RhY2s9W107dGhpcy5uZXh0LmRlYWN0aXZhdGUoKX0sZ2V0U3RhdGU6ZnVuY3Rpb24oKXtyZXR1cm57Y2VudGVyOnRoaXMubWFwLmdldENlbnRlcigpLHJlc29sdXRpb246dGhpcy5tYXAuZ2V0UmVzb2x1dGlvbigpLHByb2plY3Rpb246dGhpcy5tYXAuZ2V0UHJvamVjdGlvbk9iamVjdCgpLHVuaXRzOnRoaXMubWFwLmdldFByb2plY3Rpb25PYmplY3QoKS5nZXRVbml0cygpfHx0aGlzLm1hcC51bml0c3x8dGhpcy5tYXAuYmFzZUxheWVyLnVuaXRzfX0scmVzdG9yZTpmdW5jdGlvbihhKXt2YXIgYixjO2lmKHRoaXMubWFwLmdldFByb2plY3Rpb25PYmplY3QoKT09CmEucHJvamVjdGlvbiljPXRoaXMubWFwLmdldFpvb21Gb3JSZXNvbHV0aW9uKGEucmVzb2x1dGlvbiksYj1hLmNlbnRlcjtlbHNle2I9YS5jZW50ZXIuY2xvbmUoKTtiLnRyYW5zZm9ybShhLnByb2plY3Rpb24sdGhpcy5tYXAuZ2V0UHJvamVjdGlvbk9iamVjdCgpKTtjPWEudW5pdHM7dmFyIGQ9dGhpcy5tYXAuZ2V0UHJvamVjdGlvbk9iamVjdCgpLmdldFVuaXRzKCl8fHRoaXMubWFwLnVuaXRzfHx0aGlzLm1hcC5iYXNlTGF5ZXIudW5pdHM7Yz10aGlzLm1hcC5nZXRab29tRm9yUmVzb2x1dGlvbigoYyYmZD9PcGVuTGF5ZXJzLklOQ0hFU19QRVJfVU5JVFtjXS9PcGVuTGF5ZXJzLklOQ0hFU19QRVJfVU5JVFtkXToxKSphLnJlc29sdXRpb24pfXRoaXMubWFwLnNldENlbnRlcihiLGMpfSxzZXRMaXN0ZW5lcnM6ZnVuY3Rpb24oKXt0aGlzLmxpc3RlbmVycz17fTtmb3IodmFyIGEgaW4gdGhpcy5yZWdpc3RyeSl0aGlzLmxpc3RlbmVyc1thXT1PcGVuTGF5ZXJzLkZ1bmN0aW9uLmJpbmQoZnVuY3Rpb24oKXtpZighdGhpcy5yZXN0b3Jpbmcpe3ZhciBiPQp0aGlzLnJlZ2lzdHJ5W2FdLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLnByZXZpb3VzU3RhY2sudW5zaGlmdChiKTtpZigxPHRoaXMucHJldmlvdXNTdGFjay5sZW5ndGgpdGhpcy5vblByZXZpb3VzQ2hhbmdlKHRoaXMucHJldmlvdXNTdGFja1sxXSx0aGlzLnByZXZpb3VzU3RhY2subGVuZ3RoLTEpO3RoaXMucHJldmlvdXNTdGFjay5sZW5ndGg+dGhpcy5saW1pdCsxJiZ0aGlzLnByZXZpb3VzU3RhY2sucG9wKCk7MDx0aGlzLm5leHRTdGFjay5sZW5ndGgmJih0aGlzLm5leHRTdGFjaz1bXSx0aGlzLm9uTmV4dENoYW5nZShudWxsLDApKX1yZXR1cm4hMH0sdGhpcyl9LGFjdGl2YXRlOmZ1bmN0aW9uKCl7dmFyIGE9ITE7aWYodGhpcy5tYXAmJk9wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuYWN0aXZhdGUuYXBwbHkodGhpcykpe251bGw9PXRoaXMubGlzdGVuZXJzJiZ0aGlzLnNldExpc3RlbmVycygpO2Zvcih2YXIgYiBpbiB0aGlzLmxpc3RlbmVycyl0aGlzLm1hcC5ldmVudHMucmVnaXN0ZXIoYiwKdGhpcyx0aGlzLmxpc3RlbmVyc1tiXSk7YT0hMDswPT10aGlzLnByZXZpb3VzU3RhY2subGVuZ3RoJiZ0aGlzLmluaXRTdGFjaygpfXJldHVybiBhfSxpbml0U3RhY2s6ZnVuY3Rpb24oKXt0aGlzLm1hcC5nZXRDZW50ZXIoKSYmdGhpcy5saXN0ZW5lcnMubW92ZWVuZCgpfSxkZWFjdGl2YXRlOmZ1bmN0aW9uKCl7dmFyIGE9ITE7aWYodGhpcy5tYXAmJk9wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuZGVhY3RpdmF0ZS5hcHBseSh0aGlzKSl7Zm9yKHZhciBiIGluIHRoaXMubGlzdGVuZXJzKXRoaXMubWFwLmV2ZW50cy51bnJlZ2lzdGVyKGIsdGhpcyx0aGlzLmxpc3RlbmVyc1tiXSk7dGhpcy5jbGVhck9uRGVhY3RpdmF0ZSYmdGhpcy5jbGVhcigpO2E9ITB9cmV0dXJuIGF9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuQ29udHJvbC5OYXZpZ2F0aW9uSGlzdG9yeSJ9KTtPcGVuTGF5ZXJzLkxheWVyLlVURkdyaWQ9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkxheWVyLlhZWix7aXNCYXNlTGF5ZXI6ITEscHJvamVjdGlvbjpuZXcgT3BlbkxheWVycy5Qcm9qZWN0aW9uKCJFUFNHOjkwMDkxMyIpLHVzZUpTT05QOiExLHRpbGVDbGFzczpPcGVuTGF5ZXJzLlRpbGUuVVRGR3JpZCxpbml0aWFsaXplOmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuTGF5ZXIuR3JpZC5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLFthLm5hbWUsYS51cmwse30sYV0pO3RoaXMudGlsZU9wdGlvbnM9T3BlbkxheWVycy5VdGlsLmV4dGVuZCh7dXRmZ3JpZFJlc29sdXRpb246dGhpcy51dGZncmlkUmVzb2x1dGlvbn0sdGhpcy50aWxlT3B0aW9ucyl9LGNyZWF0ZUJhY2tCdWZmZXI6ZnVuY3Rpb24oKXt9LGNsb25lOmZ1bmN0aW9uKGEpe251bGw9PWEmJihhPW5ldyBPcGVuTGF5ZXJzLkxheWVyLlVURkdyaWQodGhpcy5nZXRPcHRpb25zKCkpKTtyZXR1cm4gYT1PcGVuTGF5ZXJzLkxheWVyLkdyaWQucHJvdG90eXBlLmNsb25lLmFwcGx5KHRoaXMsClthXSl9LGdldEZlYXR1cmVJbmZvOmZ1bmN0aW9uKGEpe3ZhciBiPW51bGw7KGE9dGhpcy5nZXRUaWxlRGF0YShhKSkmJmEudGlsZSYmKGI9YS50aWxlLmdldEZlYXR1cmVJbmZvKGEuaSxhLmopKTtyZXR1cm4gYn0sZ2V0RmVhdHVyZUlkOmZ1bmN0aW9uKGEpe3ZhciBiPW51bGw7YT10aGlzLmdldFRpbGVEYXRhKGEpO2EudGlsZSYmKGI9YS50aWxlLmdldEZlYXR1cmVJZChhLmksYS5qKSk7cmV0dXJuIGJ9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuTGF5ZXIuVVRGR3JpZCJ9KTtPcGVuTGF5ZXJzLlRpbGVNYW5hZ2VyPU9wZW5MYXllcnMuQ2xhc3Moe2NhY2hlU2l6ZToyNTYsdGlsZXNQZXJGcmFtZToyLGZyYW1lRGVsYXk6MTYsbW92ZURlbGF5OjEwMCx6b29tRGVsYXk6MjAwLG1hcHM6bnVsbCx0aWxlUXVldWVJZDpudWxsLHRpbGVRdWV1ZTpudWxsLHRpbGVDYWNoZTpudWxsLHRpbGVDYWNoZUluZGV4Om51bGwsaW5pdGlhbGl6ZTpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHRoaXMsYSk7dGhpcy5tYXBzPVtdO3RoaXMudGlsZVF1ZXVlSWQ9e307dGhpcy50aWxlUXVldWU9e307dGhpcy50aWxlQ2FjaGU9e307dGhpcy50aWxlQ2FjaGVJbmRleD1bXX0sYWRkTWFwOmZ1bmN0aW9uKGEpe2lmKCF0aGlzLl9kZXN0cm95ZWQmJk9wZW5MYXllcnMuTGF5ZXIuR3JpZCl7dGhpcy5tYXBzLnB1c2goYSk7dGhpcy50aWxlUXVldWVbYS5pZF09W107Zm9yKHZhciBiPTAsYz1hLmxheWVycy5sZW5ndGg7YjxjOysrYil0aGlzLmFkZExheWVyKHtsYXllcjphLmxheWVyc1tiXX0pOwphLmV2ZW50cy5vbih7bW92ZTp0aGlzLm1vdmUsem9vbWVuZDp0aGlzLnpvb21FbmQsY2hhbmdlbGF5ZXI6dGhpcy5jaGFuZ2VMYXllcixhZGRsYXllcjp0aGlzLmFkZExheWVyLHByZXJlbW92ZWxheWVyOnRoaXMucmVtb3ZlTGF5ZXIsc2NvcGU6dGhpc30pfX0scmVtb3ZlTWFwOmZ1bmN0aW9uKGEpe2lmKCF0aGlzLl9kZXN0cm95ZWQmJk9wZW5MYXllcnMuTGF5ZXIuR3JpZCl7d2luZG93LmNsZWFyVGltZW91dCh0aGlzLnRpbGVRdWV1ZUlkW2EuaWRdKTtpZihhLmxheWVycylmb3IodmFyIGI9MCxjPWEubGF5ZXJzLmxlbmd0aDtiPGM7KytiKXRoaXMucmVtb3ZlTGF5ZXIoe2xheWVyOmEubGF5ZXJzW2JdfSk7YS5ldmVudHMmJmEuZXZlbnRzLnVuKHttb3ZlOnRoaXMubW92ZSx6b29tZW5kOnRoaXMuem9vbUVuZCxjaGFuZ2VsYXllcjp0aGlzLmNoYW5nZUxheWVyLGFkZGxheWVyOnRoaXMuYWRkTGF5ZXIscHJlcmVtb3ZlbGF5ZXI6dGhpcy5yZW1vdmVMYXllcixzY29wZTp0aGlzfSk7CmRlbGV0ZSB0aGlzLnRpbGVRdWV1ZVthLmlkXTtkZWxldGUgdGhpcy50aWxlUXVldWVJZFthLmlkXTtPcGVuTGF5ZXJzLlV0aWwucmVtb3ZlSXRlbSh0aGlzLm1hcHMsYSl9fSxtb3ZlOmZ1bmN0aW9uKGEpe3RoaXMudXBkYXRlVGltZW91dChhLm9iamVjdCx0aGlzLm1vdmVEZWxheSwhMCl9LHpvb21FbmQ6ZnVuY3Rpb24oYSl7dGhpcy51cGRhdGVUaW1lb3V0KGEub2JqZWN0LHRoaXMuem9vbURlbGF5KX0sY2hhbmdlTGF5ZXI6ZnVuY3Rpb24oYSl7InZpc2liaWxpdHkiIT09YS5wcm9wZXJ0eSYmInBhcmFtcyIhPT1hLnByb3BlcnR5fHx0aGlzLnVwZGF0ZVRpbWVvdXQoYS5vYmplY3QsMCl9LGFkZExheWVyOmZ1bmN0aW9uKGEpe2E9YS5sYXllcjtpZihhIGluc3RhbmNlb2YgT3BlbkxheWVycy5MYXllci5HcmlkKXthLmV2ZW50cy5vbih7YWRkdGlsZTp0aGlzLmFkZFRpbGUscmV0aWxlOnRoaXMuY2xlYXJUaWxlUXVldWUsc2NvcGU6dGhpc30pO3ZhciBiLGMsZDtmb3IoYj1hLmdyaWQubGVuZ3RoLQoxOzA8PWI7LS1iKWZvcihjPWEuZ3JpZFtiXS5sZW5ndGgtMTswPD1jOy0tYylkPWEuZ3JpZFtiXVtjXSx0aGlzLmFkZFRpbGUoe3RpbGU6ZH0pLGQudXJsJiYhZC5pbWdEaXYmJnRoaXMubWFuYWdlVGlsZUNhY2hlKHtvYmplY3Q6ZH0pfX0scmVtb3ZlTGF5ZXI6ZnVuY3Rpb24oYSl7YT1hLmxheWVyO2lmKGEgaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLkxheWVyLkdyaWQmJih0aGlzLmNsZWFyVGlsZVF1ZXVlKHtvYmplY3Q6YX0pLGEuZXZlbnRzJiZhLmV2ZW50cy51bih7YWRkdGlsZTp0aGlzLmFkZFRpbGUscmV0aWxlOnRoaXMuY2xlYXJUaWxlUXVldWUsc2NvcGU6dGhpc30pLGEuZ3JpZCkpe3ZhciBiLGMsZDtmb3IoYj1hLmdyaWQubGVuZ3RoLTE7MDw9YjstLWIpZm9yKGM9YS5ncmlkW2JdLmxlbmd0aC0xOzA8PWM7LS1jKWQ9YS5ncmlkW2JdW2NdLHRoaXMudW5sb2FkVGlsZSh7b2JqZWN0OmR9KX19LHVwZGF0ZVRpbWVvdXQ6ZnVuY3Rpb24oYSxiLGMpe3dpbmRvdy5jbGVhclRpbWVvdXQodGhpcy50aWxlUXVldWVJZFthLmlkXSk7CnZhciBkPXRoaXMudGlsZVF1ZXVlW2EuaWRdO2lmKCFjfHxkLmxlbmd0aCl0aGlzLnRpbGVRdWV1ZUlkW2EuaWRdPXdpbmRvdy5zZXRUaW1lb3V0KE9wZW5MYXllcnMuRnVuY3Rpb24uYmluZChmdW5jdGlvbigpe3RoaXMuZHJhd1RpbGVzRnJvbVF1ZXVlKGEpO2QubGVuZ3RoJiZ0aGlzLnVwZGF0ZVRpbWVvdXQoYSx0aGlzLmZyYW1lRGVsYXkpfSx0aGlzKSxiKX0sYWRkVGlsZTpmdW5jdGlvbihhKXtpZihhLnRpbGUgaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLlRpbGUuSW1hZ2UpYS50aWxlLmV2ZW50cy5vbih7YmVmb3JlZHJhdzp0aGlzLnF1ZXVlVGlsZURyYXcsYmVmb3JlbG9hZDp0aGlzLm1hbmFnZVRpbGVDYWNoZSxsb2FkZW5kOnRoaXMuYWRkVG9DYWNoZSx1bmxvYWQ6dGhpcy51bmxvYWRUaWxlLHNjb3BlOnRoaXN9KTtlbHNlIHRoaXMucmVtb3ZlTGF5ZXIoe2xheWVyOmEudGlsZS5sYXllcn0pfSx1bmxvYWRUaWxlOmZ1bmN0aW9uKGEpe2E9YS5vYmplY3Q7YS5ldmVudHMudW4oe2JlZm9yZWRyYXc6dGhpcy5xdWV1ZVRpbGVEcmF3LApiZWZvcmVsb2FkOnRoaXMubWFuYWdlVGlsZUNhY2hlLGxvYWRlbmQ6dGhpcy5hZGRUb0NhY2hlLHVubG9hZDp0aGlzLnVubG9hZFRpbGUsc2NvcGU6dGhpc30pO09wZW5MYXllcnMuVXRpbC5yZW1vdmVJdGVtKHRoaXMudGlsZVF1ZXVlW2EubGF5ZXIubWFwLmlkXSxhKX0scXVldWVUaWxlRHJhdzpmdW5jdGlvbihhKXthPWEub2JqZWN0O3ZhciBiPSExLGM9YS5sYXllcixkPWMuZ2V0VVJMKGEuYm91bmRzKSxlPXRoaXMudGlsZUNhY2hlW2RdO2UmJiJvbFRpbGVJbWFnZSIhPT1lLmNsYXNzTmFtZSYmKGRlbGV0ZSB0aGlzLnRpbGVDYWNoZVtkXSxPcGVuTGF5ZXJzLlV0aWwucmVtb3ZlSXRlbSh0aGlzLnRpbGVDYWNoZUluZGV4LGQpLGU9bnVsbCk7IWMudXJsfHwhYy5hc3luYyYmZXx8KGI9dGhpcy50aWxlUXVldWVbYy5tYXAuaWRdLH5PcGVuTGF5ZXJzLlV0aWwuaW5kZXhPZihiLGEpfHxiLnB1c2goYSksYj0hMCk7cmV0dXJuIWJ9LGRyYXdUaWxlc0Zyb21RdWV1ZTpmdW5jdGlvbihhKXt2YXIgYj0KdGhpcy50aWxlUXVldWVbYS5pZF0sYz10aGlzLnRpbGVzUGVyRnJhbWU7Zm9yKGE9YS56b29tVHdlZW4mJmEuem9vbVR3ZWVuLnBsYXlpbmc7IWEmJmIubGVuZ3RoJiZjOyliLnNoaWZ0KCkuZHJhdyghMCksLS1jfSxtYW5hZ2VUaWxlQ2FjaGU6ZnVuY3Rpb24oYSl7YT1hLm9iamVjdDt2YXIgYj10aGlzLnRpbGVDYWNoZVthLnVybF07YiYmKGIucGFyZW50Tm9kZSYmT3BlbkxheWVycy5FbGVtZW50Lmhhc0NsYXNzKGIucGFyZW50Tm9kZSwib2xCYWNrQnVmZmVyIikmJihiLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYiksYi5pZD1udWxsKSxiLnBhcmVudE5vZGV8fChiLnN0eWxlLnZpc2liaWxpdHk9ImhpZGRlbiIsYi5zdHlsZS5vcGFjaXR5PTAsYS5zZXRJbWFnZShiKSxPcGVuTGF5ZXJzLlV0aWwucmVtb3ZlSXRlbSh0aGlzLnRpbGVDYWNoZUluZGV4LGEudXJsKSx0aGlzLnRpbGVDYWNoZUluZGV4LnB1c2goYS51cmwpKSl9LGFkZFRvQ2FjaGU6ZnVuY3Rpb24oYSl7YT1hLm9iamVjdDsKdGhpcy50aWxlQ2FjaGVbYS51cmxdfHxPcGVuTGF5ZXJzLkVsZW1lbnQuaGFzQ2xhc3MoYS5pbWdEaXYsIm9sSW1hZ2VMb2FkRXJyb3IiKXx8KHRoaXMudGlsZUNhY2hlSW5kZXgubGVuZ3RoPj10aGlzLmNhY2hlU2l6ZSYmKGRlbGV0ZSB0aGlzLnRpbGVDYWNoZVt0aGlzLnRpbGVDYWNoZUluZGV4WzBdXSx0aGlzLnRpbGVDYWNoZUluZGV4LnNoaWZ0KCkpLHRoaXMudGlsZUNhY2hlW2EudXJsXT1hLmltZ0Rpdix0aGlzLnRpbGVDYWNoZUluZGV4LnB1c2goYS51cmwpKX0sY2xlYXJUaWxlUXVldWU6ZnVuY3Rpb24oYSl7YT1hLm9iamVjdDtmb3IodmFyIGI9dGhpcy50aWxlUXVldWVbYS5tYXAuaWRdLGM9Yi5sZW5ndGgtMTswPD1jOy0tYyliW2NdLmxheWVyPT09YSYmYi5zcGxpY2UoYywxKX0sZGVzdHJveTpmdW5jdGlvbigpe2Zvcih2YXIgYT10aGlzLm1hcHMubGVuZ3RoLTE7MDw9YTstLWEpdGhpcy5yZW1vdmVNYXAodGhpcy5tYXBzW2FdKTt0aGlzLnRpbGVDYWNoZUluZGV4PXRoaXMudGlsZUNhY2hlPQp0aGlzLnRpbGVRdWV1ZUlkPXRoaXMudGlsZVF1ZXVlPXRoaXMubWFwcz1udWxsO3RoaXMuX2Rlc3Ryb3llZD0hMH19KTtPcGVuTGF5ZXJzLkxheWVyLkFyY0dJU0NhY2hlPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5MYXllci5YWVose3VybDpudWxsLHRpbGVPcmlnaW46bnVsbCx0aWxlU2l6ZTpuZXcgT3BlbkxheWVycy5TaXplKDI1NiwyNTYpLHVzZUFyY0dJU1NlcnZlcjohMCx0eXBlOiJwbmciLHVzZVNjYWxlczohMSxvdmVycmlkZURQSTohMSxpbml0aWFsaXplOmZ1bmN0aW9uKGEsYixjKXtPcGVuTGF5ZXJzLkxheWVyLlhZWi5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5yZXNvbHV0aW9ucyYmKHRoaXMuc2VydmVyUmVzb2x1dGlvbnM9dGhpcy5yZXNvbHV0aW9ucyx0aGlzLm1heEV4dGVudD10aGlzLmdldE1heEV4dGVudEZvclJlc29sdXRpb24odGhpcy5yZXNvbHV0aW9uc1swXSkpO2lmKHRoaXMubGF5ZXJJbmZvKXt2YXIgZD10aGlzLmxheWVySW5mbyxlPW5ldyBPcGVuTGF5ZXJzLkJvdW5kcyhkLmZ1bGxFeHRlbnQueG1pbixkLmZ1bGxFeHRlbnQueW1pbiwKZC5mdWxsRXh0ZW50LnhtYXgsZC5mdWxsRXh0ZW50LnltYXgpO3RoaXMucHJvamVjdGlvbj0iRVBTRzoiK2Quc3BhdGlhbFJlZmVyZW5jZS53a2lkO3RoaXMuc3BoZXJpY2FsTWVyY2F0b3I9MTAyMTAwPT1kLnNwYXRpYWxSZWZlcmVuY2Uud2tpZDt0aGlzLnVuaXRzPSJlc3JpRmVldCI9PWQudW5pdHM/ImZ0IjoibSI7aWYoZC50aWxlSW5mbyl7dGhpcy50aWxlU2l6ZT1uZXcgT3BlbkxheWVycy5TaXplKGQudGlsZUluZm8ud2lkdGh8fGQudGlsZUluZm8uY29scyxkLnRpbGVJbmZvLmhlaWdodHx8ZC50aWxlSW5mby5yb3dzKTt0aGlzLnRpbGVPcmlnaW49bmV3IE9wZW5MYXllcnMuTG9uTGF0KGQudGlsZUluZm8ub3JpZ2luLngsZC50aWxlSW5mby5vcmlnaW4ueSk7dmFyIGY9bmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoZS5sZWZ0LGUudG9wKSxlPW5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KGUucmlnaHQsZS5ib3R0b20pO3RoaXMudXNlU2NhbGVzP3RoaXMuc2NhbGVzPQpbXTp0aGlzLnJlc29sdXRpb25zPVtdO3RoaXMubG9kcz1bXTtmb3IodmFyIGcgaW4gZC50aWxlSW5mby5sb2RzKWlmKGQudGlsZUluZm8ubG9kcy5oYXNPd25Qcm9wZXJ0eShnKSl7dmFyIGg9ZC50aWxlSW5mby5sb2RzW2ddO3RoaXMudXNlU2NhbGVzP3RoaXMuc2NhbGVzLnB1c2goaC5zY2FsZSk6dGhpcy5yZXNvbHV0aW9ucy5wdXNoKGgucmVzb2x1dGlvbik7dmFyIGs9dGhpcy5nZXRDb250YWluaW5nVGlsZUNvb3JkcyhmLGgucmVzb2x1dGlvbik7aC5zdGFydFRpbGVDb2w9ay54O2guc3RhcnRUaWxlUm93PWsueTtrPXRoaXMuZ2V0Q29udGFpbmluZ1RpbGVDb29yZHMoZSxoLnJlc29sdXRpb24pO2guZW5kVGlsZUNvbD1rLng7aC5lbmRUaWxlUm93PWsueTt0aGlzLmxvZHMucHVzaChoKX10aGlzLm1heEV4dGVudD10aGlzLmNhbGN1bGF0ZU1heEV4dGVudFdpdGhMT0QodGhpcy5sb2RzWzBdKTt0aGlzLnNlcnZlclJlc29sdXRpb25zPXRoaXMucmVzb2x1dGlvbnM7dGhpcy5vdmVycmlkZURQSSYmCmQudGlsZUluZm8uZHBpJiYoT3BlbkxheWVycy5ET1RTX1BFUl9JTkNIPWQudGlsZUluZm8uZHBpKX19fSxnZXRDb250YWluaW5nVGlsZUNvb3JkczpmdW5jdGlvbihhLGIpe3JldHVybiBuZXcgT3BlbkxheWVycy5QaXhlbChNYXRoLm1heChNYXRoLmZsb29yKChhLngtdGhpcy50aWxlT3JpZ2luLmxvbikvKHRoaXMudGlsZVNpemUudypiKSksMCksTWF0aC5tYXgoTWF0aC5mbG9vcigodGhpcy50aWxlT3JpZ2luLmxhdC1hLnkpLyh0aGlzLnRpbGVTaXplLmgqYikpLDApKX0sY2FsY3VsYXRlTWF4RXh0ZW50V2l0aExPRDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLnRpbGVPcmlnaW4ubG9uK2Euc3RhcnRUaWxlQ29sKnRoaXMudGlsZVNpemUudyphLnJlc29sdXRpb24sYz10aGlzLnRpbGVPcmlnaW4ubGF0LWEuc3RhcnRUaWxlUm93KnRoaXMudGlsZVNpemUuaCphLnJlc29sdXRpb247cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLkJvdW5kcyhiLGMtKGEuZW5kVGlsZVJvdy1hLnN0YXJ0VGlsZVJvdysKMSkqdGhpcy50aWxlU2l6ZS5oKmEucmVzb2x1dGlvbixiKyhhLmVuZFRpbGVDb2wtYS5zdGFydFRpbGVDb2wrMSkqdGhpcy50aWxlU2l6ZS53KmEucmVzb2x1dGlvbixjKX0sY2FsY3VsYXRlTWF4RXh0ZW50V2l0aEV4dGVudDpmdW5jdGlvbihhLGIpe3ZhciBjPW5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KGEubGVmdCxhLnRvcCksZD1uZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludChhLnJpZ2h0LGEuYm90dG9tKSxjPXRoaXMuZ2V0Q29udGFpbmluZ1RpbGVDb29yZHMoYyxiKSxkPXRoaXMuZ2V0Q29udGFpbmluZ1RpbGVDb29yZHMoZCxiKTtyZXR1cm4gdGhpcy5jYWxjdWxhdGVNYXhFeHRlbnRXaXRoTE9EKHtyZXNvbHV0aW9uOmIsc3RhcnRUaWxlQ29sOmMueCxzdGFydFRpbGVSb3c6Yy55LGVuZFRpbGVDb2w6ZC54LGVuZFRpbGVSb3c6ZC55fSl9LGdldFVwcGVyTGVmdFRpbGVDb29yZDpmdW5jdGlvbihhKXt2YXIgYj1uZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludCh0aGlzLm1heEV4dGVudC5sZWZ0LAp0aGlzLm1heEV4dGVudC50b3ApO3JldHVybiB0aGlzLmdldENvbnRhaW5pbmdUaWxlQ29vcmRzKGIsYSl9LGdldExvd2VyUmlnaHRUaWxlQ29vcmQ6ZnVuY3Rpb24oYSl7dmFyIGI9bmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQodGhpcy5tYXhFeHRlbnQucmlnaHQsdGhpcy5tYXhFeHRlbnQuYm90dG9tKTtyZXR1cm4gdGhpcy5nZXRDb250YWluaW5nVGlsZUNvb3JkcyhiLGEpfSxnZXRNYXhFeHRlbnRGb3JSZXNvbHV0aW9uOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZ2V0VXBwZXJMZWZ0VGlsZUNvb3JkKGEpLGM9dGhpcy5nZXRMb3dlclJpZ2h0VGlsZUNvb3JkKGEpLGQ9dGhpcy50aWxlT3JpZ2luLmxvbitiLngqdGhpcy50aWxlU2l6ZS53KmEsZT10aGlzLnRpbGVPcmlnaW4ubGF0LWIueSp0aGlzLnRpbGVTaXplLmgqYTtyZXR1cm4gbmV3IE9wZW5MYXllcnMuQm91bmRzKGQsZS0oYy55LWIueSsxKSp0aGlzLnRpbGVTaXplLmgqYSxkKyhjLngtYi54KzEpKnRoaXMudGlsZVNpemUudyoKYSxlKX0sY2xvbmU6ZnVuY3Rpb24oYSl7bnVsbD09YSYmKGE9bmV3IE9wZW5MYXllcnMuTGF5ZXIuQXJjR0lTQ2FjaGUodGhpcy5uYW1lLHRoaXMudXJsLHRoaXMub3B0aW9ucykpO3JldHVybiBPcGVuTGF5ZXJzLkxheWVyLlhZWi5wcm90b3R5cGUuY2xvbmUuYXBwbHkodGhpcyxbYV0pfSxpbml0R3JpZGRlZFRpbGVzOmZ1bmN0aW9uKGEpe2RlbGV0ZSB0aGlzLl90aWxlT3JpZ2luO09wZW5MYXllcnMuTGF5ZXIuWFlaLnByb3RvdHlwZS5pbml0R3JpZGRlZFRpbGVzLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sZ2V0TWF4RXh0ZW50OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5tYXAuZ2V0UmVzb2x1dGlvbigpO3JldHVybiB0aGlzLm1heEV4dGVudD10aGlzLmdldE1heEV4dGVudEZvclJlc29sdXRpb24oYSl9LGdldFRpbGVPcmlnaW46ZnVuY3Rpb24oKXtpZighdGhpcy5fdGlsZU9yaWdpbil7dmFyIGE9dGhpcy5nZXRNYXhFeHRlbnQoKTt0aGlzLl90aWxlT3JpZ2luPW5ldyBPcGVuTGF5ZXJzLkxvbkxhdChhLmxlZnQsCmEuYm90dG9tKX1yZXR1cm4gdGhpcy5fdGlsZU9yaWdpbn0sZ2V0VVJMOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZ2V0UmVzb2x1dGlvbigpLGM9dGhpcy50aWxlT3JpZ2luLmxvbitiKnRoaXMudGlsZVNpemUudy8yLGQ9dGhpcy50aWxlT3JpZ2luLmxhdC1iKnRoaXMudGlsZVNpemUuaC8yO2E9YS5nZXRDZW50ZXJMb25MYXQoKTtjPU1hdGgucm91bmQoTWF0aC5hYnMoKGEubG9uLWMpLyhiKnRoaXMudGlsZVNpemUudykpKTtkPU1hdGgucm91bmQoTWF0aC5hYnMoKGQtYS5sYXQpLyhiKnRoaXMudGlsZVNpemUuaCkpKTthPXRoaXMubWFwLmdldFpvb20oKTtpZih0aGlzLmxvZHMpe2lmKGI9dGhpcy5sb2RzW3RoaXMubWFwLmdldFpvb20oKV0sYzxiLnN0YXJ0VGlsZUNvbHx8Yz5iLmVuZFRpbGVDb2x8fGQ8Yi5zdGFydFRpbGVSb3d8fGQ+Yi5lbmRUaWxlUm93KXJldHVybiBudWxsfWVsc2V7dmFyIGU9dGhpcy5nZXRVcHBlckxlZnRUaWxlQ29vcmQoYiksYj10aGlzLmdldExvd2VyUmlnaHRUaWxlQ29vcmQoYik7CmlmKGM8ZS54fHxjPj1iLnh8fGQ8ZS55fHxkPj1iLnkpcmV0dXJuIG51bGx9Yj10aGlzLnVybDtlPSIiK2MrZCthO09wZW5MYXllcnMuVXRpbC5pc0FycmF5KGIpJiYoYj10aGlzLnNlbGVjdFVybChlLGIpKTt0aGlzLnVzZUFyY0dJU1NlcnZlcj9iKz0iL3RpbGUvJHt6fS8ke3l9LyR7eH0iOihjPSJDIitPcGVuTGF5ZXJzLk51bWJlci56ZXJvUGFkKGMsOCwxNiksZD0iUiIrT3BlbkxheWVycy5OdW1iZXIuemVyb1BhZChkLDgsMTYpLGE9IkwiK09wZW5MYXllcnMuTnVtYmVyLnplcm9QYWQoYSwyLDEwKSxiPWIrIi8ke3p9LyR7eX0vJHt4fS4iK3RoaXMudHlwZSk7Yj1PcGVuTGF5ZXJzLlN0cmluZy5mb3JtYXQoYix7eDpjLHk6ZCx6OmF9KTtyZXR1cm4gT3BlbkxheWVycy5VdGlsLnVybEFwcGVuZChiLE9wZW5MYXllcnMuVXRpbC5nZXRQYXJhbWV0ZXJTdHJpbmcodGhpcy5wYXJhbXMpKX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5MYXllci5BcmNHSVNDYWNoZSJ9KTtPcGVuTGF5ZXJzLkNvbnRyb2wuV01TR2V0RmVhdHVyZUluZm89T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkNvbnRyb2wse2hvdmVyOiExLGRyaWxsRG93bjohMSxtYXhGZWF0dXJlczoxMCxjbGlja0NhbGxiYWNrOiJjbGljayIsb3V0cHV0OiJmZWF0dXJlcyIsbGF5ZXJzOm51bGwscXVlcnlWaXNpYmxlOiExLHVybDpudWxsLGxheWVyVXJsczpudWxsLGluZm9Gb3JtYXQ6InRleHQvaHRtbCIsdmVuZG9yUGFyYW1zOnt9LGZvcm1hdDpudWxsLGZvcm1hdE9wdGlvbnM6bnVsbCxoYW5kbGVyOm51bGwsaG92ZXJSZXF1ZXN0Om51bGwsaW5pdGlhbGl6ZTpmdW5jdGlvbihhKXthPWF8fHt9O2EuaGFuZGxlck9wdGlvbnM9YS5oYW5kbGVyT3B0aW9uc3x8e307T3BlbkxheWVycy5Db250cm9sLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsW2FdKTt0aGlzLmZvcm1hdHx8KHRoaXMuZm9ybWF0PW5ldyBPcGVuTGF5ZXJzLkZvcm1hdC5XTVNHZXRGZWF0dXJlSW5mbyhhLmZvcm1hdE9wdGlvbnMpKTsKITA9PT10aGlzLmRyaWxsRG93biYmKHRoaXMuaG92ZXI9ITEpO3RoaXMuaG92ZXI/dGhpcy5oYW5kbGVyPW5ldyBPcGVuTGF5ZXJzLkhhbmRsZXIuSG92ZXIodGhpcyx7bW92ZTp0aGlzLmNhbmNlbEhvdmVyLHBhdXNlOnRoaXMuZ2V0SW5mb0ZvckhvdmVyfSxPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHRoaXMuaGFuZGxlck9wdGlvbnMuaG92ZXJ8fHt9LHtkZWxheToyNTB9KSk6KGE9e30sYVt0aGlzLmNsaWNrQ2FsbGJhY2tdPXRoaXMuZ2V0SW5mb0ZvckNsaWNrLHRoaXMuaGFuZGxlcj1uZXcgT3BlbkxheWVycy5IYW5kbGVyLkNsaWNrKHRoaXMsYSx0aGlzLmhhbmRsZXJPcHRpb25zLmNsaWNrfHx7fSkpfSxnZXRJbmZvRm9yQ2xpY2s6ZnVuY3Rpb24oYSl7dGhpcy5ldmVudHMudHJpZ2dlckV2ZW50KCJiZWZvcmVnZXRmZWF0dXJlaW5mbyIse3h5OmEueHl9KTtPcGVuTGF5ZXJzLkVsZW1lbnQuYWRkQ2xhc3ModGhpcy5tYXAudmlld1BvcnREaXYsIm9sQ3Vyc29yV2FpdCIpO3RoaXMucmVxdWVzdChhLnh5LAp7fSl9LGdldEluZm9Gb3JIb3ZlcjpmdW5jdGlvbihhKXt0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoImJlZm9yZWdldGZlYXR1cmVpbmZvIix7eHk6YS54eX0pO3RoaXMucmVxdWVzdChhLnh5LHtob3ZlcjohMH0pfSxjYW5jZWxIb3ZlcjpmdW5jdGlvbigpe3RoaXMuaG92ZXJSZXF1ZXN0JiYodGhpcy5ob3ZlclJlcXVlc3QuYWJvcnQoKSx0aGlzLmhvdmVyUmVxdWVzdD1udWxsKX0sZmluZExheWVyczpmdW5jdGlvbigpe2Zvcih2YXIgYT10aGlzLmxheWVyc3x8dGhpcy5tYXAubGF5ZXJzLGI9W10sYyxkLGU9YS5sZW5ndGgtMTswPD1lOy0tZSljPWFbZV0sYyBpbnN0YW5jZW9mIE9wZW5MYXllcnMuTGF5ZXIuV01TJiYoIXRoaXMucXVlcnlWaXNpYmxlfHxjLmdldFZpc2liaWxpdHkoKSkmJihkPU9wZW5MYXllcnMuVXRpbC5pc0FycmF5KGMudXJsKT9jLnVybFswXTpjLnVybCwhMSE9PXRoaXMuZHJpbGxEb3dufHx0aGlzLnVybHx8KHRoaXMudXJsPWQpLCghMD09PXRoaXMuZHJpbGxEb3dufHwKdGhpcy51cmxNYXRjaGVzKGQpKSYmYi5wdXNoKGMpKTtyZXR1cm4gYn0sdXJsTWF0Y2hlczpmdW5jdGlvbihhKXt2YXIgYj1PcGVuTGF5ZXJzLlV0aWwuaXNFcXVpdmFsZW50VXJsKHRoaXMudXJsLGEpO2lmKCFiJiZ0aGlzLmxheWVyVXJscylmb3IodmFyIGM9MCxkPXRoaXMubGF5ZXJVcmxzLmxlbmd0aDtjPGQ7KytjKWlmKE9wZW5MYXllcnMuVXRpbC5pc0VxdWl2YWxlbnRVcmwodGhpcy5sYXllclVybHNbY10sYSkpe2I9ITA7YnJlYWt9cmV0dXJuIGJ9LGJ1aWxkV01TT3B0aW9uczpmdW5jdGlvbihhLGIsYyxkKXtmb3IodmFyIGU9W10sZj1bXSxnPTAsaD1iLmxlbmd0aDtnPGg7ZysrKW51bGwhPWJbZ10ucGFyYW1zLkxBWUVSUyYmKGU9ZS5jb25jYXQoYltnXS5wYXJhbXMuTEFZRVJTKSxmPWYuY29uY2F0KHRoaXMuZ2V0U3R5bGVOYW1lcyhiW2ddKSkpO2I9YlswXTtnPXRoaXMubWFwLmdldFByb2plY3Rpb24oKTsoaD1iLnByb2plY3Rpb24pJiZoLmVxdWFscyh0aGlzLm1hcC5nZXRQcm9qZWN0aW9uT2JqZWN0KCkpJiYKKGc9aC5nZXRDb2RlKCkpO2Q9T3BlbkxheWVycy5VdGlsLmV4dGVuZCh7c2VydmljZToiV01TIix2ZXJzaW9uOmIucGFyYW1zLlZFUlNJT04scmVxdWVzdDoiR2V0RmVhdHVyZUluZm8iLGV4Y2VwdGlvbnM6Yi5wYXJhbXMuRVhDRVBUSU9OUyxiYm94OnRoaXMubWFwLmdldEV4dGVudCgpLnRvQkJPWChudWxsLGIucmV2ZXJzZUF4aXNPcmRlcigpKSxmZWF0dXJlX2NvdW50OnRoaXMubWF4RmVhdHVyZXMsaGVpZ2h0OnRoaXMubWFwLmdldFNpemUoKS5oLHdpZHRoOnRoaXMubWFwLmdldFNpemUoKS53LGZvcm1hdDpkLGluZm9fZm9ybWF0OmIucGFyYW1zLklORk9fRk9STUFUfHx0aGlzLmluZm9Gb3JtYXR9LDEuMzw9cGFyc2VGbG9hdChiLnBhcmFtcy5WRVJTSU9OKT97Y3JzOmcsaTpwYXJzZUludChjLngpLGo6cGFyc2VJbnQoYy55KX06e3NyczpnLHg6cGFyc2VJbnQoYy54KSx5OnBhcnNlSW50KGMueSl9KTswIT1lLmxlbmd0aCYmKGQ9T3BlbkxheWVycy5VdGlsLmV4dGVuZCh7bGF5ZXJzOmUsCnF1ZXJ5X2xheWVyczplLHN0eWxlczpmfSxkKSk7T3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoZCx0aGlzLnZlbmRvclBhcmFtcyk7cmV0dXJue3VybDphLHBhcmFtczpPcGVuTGF5ZXJzLlV0aWwudXBwZXJDYXNlT2JqZWN0KGQpLGNhbGxiYWNrOmZ1bmN0aW9uKGIpe3RoaXMuaGFuZGxlUmVzcG9uc2UoYyxiLGEpfSxzY29wZTp0aGlzfX0sZ2V0U3R5bGVOYW1lczpmdW5jdGlvbihhKXtyZXR1cm4gYS5wYXJhbXMuU1RZTEVTP2EucGFyYW1zLlNUWUxFUzpPcGVuTGF5ZXJzLlV0aWwuaXNBcnJheShhLnBhcmFtcy5MQVlFUlMpP0FycmF5KGEucGFyYW1zLkxBWUVSUy5sZW5ndGgpOmEucGFyYW1zLkxBWUVSUy5yZXBsYWNlKC9bXixdL2csIiIpfSxyZXF1ZXN0OmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5maW5kTGF5ZXJzKCk7aWYoMD09Yy5sZW5ndGgpdGhpcy5ldmVudHMudHJpZ2dlckV2ZW50KCJub2dldGZlYXR1cmVpbmZvIiksT3BlbkxheWVycy5FbGVtZW50LnJlbW92ZUNsYXNzKHRoaXMubWFwLnZpZXdQb3J0RGl2LAoib2xDdXJzb3JXYWl0Iik7ZWxzZSBpZihiPWJ8fHt9LCExPT09dGhpcy5kcmlsbERvd24pe3ZhciBjPXRoaXMuYnVpbGRXTVNPcHRpb25zKHRoaXMudXJsLGMsYSxjWzBdLnBhcmFtcy5GT1JNQVQpLGQ9T3BlbkxheWVycy5SZXF1ZXN0LkdFVChjKTshMD09PWIuaG92ZXImJih0aGlzLmhvdmVyUmVxdWVzdD1kKX1lbHNle3RoaXMuX251bVJlcXVlc3RzPXRoaXMuX3JlcXVlc3RDb3VudD0wO3RoaXMuZmVhdHVyZXM9W107Zm9yKHZhciBkPXt9LGUsZj0wLGc9Yy5sZW5ndGg7ZjxnO2YrKyl7dmFyIGg9Y1tmXTtlPU9wZW5MYXllcnMuVXRpbC5pc0FycmF5KGgudXJsKT9oLnVybFswXTpoLnVybDtlIGluIGQ/ZFtlXS5wdXNoKGgpOih0aGlzLl9udW1SZXF1ZXN0cysrLGRbZV09W2hdKX1mb3IoZSBpbiBkKWM9ZFtlXSxjPXRoaXMuYnVpbGRXTVNPcHRpb25zKGUsYyxhLGNbMF0ucGFyYW1zLkZPUk1BVCksT3BlbkxheWVycy5SZXF1ZXN0LkdFVChjKX19LHRyaWdnZXJHZXRGZWF0dXJlSW5mbzpmdW5jdGlvbihhLApiLGMpe3RoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgiZ2V0ZmVhdHVyZWluZm8iLHt0ZXh0OmEucmVzcG9uc2VUZXh0LGZlYXR1cmVzOmMscmVxdWVzdDphLHh5OmJ9KTtPcGVuTGF5ZXJzLkVsZW1lbnQucmVtb3ZlQ2xhc3ModGhpcy5tYXAudmlld1BvcnREaXYsIm9sQ3Vyc29yV2FpdCIpfSxoYW5kbGVSZXNwb25zZTpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9Yi5yZXNwb25zZVhNTDtkJiZkLmRvY3VtZW50RWxlbWVudHx8KGQ9Yi5yZXNwb25zZVRleHQpO2Q9dGhpcy5mb3JtYXQucmVhZChkKTshMT09PXRoaXMuZHJpbGxEb3duP3RoaXMudHJpZ2dlckdldEZlYXR1cmVJbmZvKGIsYSxkKToodGhpcy5fcmVxdWVzdENvdW50KyssdGhpcy5fZmVhdHVyZXM9Im9iamVjdCI9PT10aGlzLm91dHB1dD8odGhpcy5fZmVhdHVyZXN8fFtdKS5jb25jYXQoe3VybDpjLGZlYXR1cmVzOmR9KToodGhpcy5fZmVhdHVyZXN8fFtdKS5jb25jYXQoZCksdGhpcy5fcmVxdWVzdENvdW50PT09dGhpcy5fbnVtUmVxdWVzdHMmJgoodGhpcy50cmlnZ2VyR2V0RmVhdHVyZUluZm8oYixhLHRoaXMuX2ZlYXR1cmVzLmNvbmNhdCgpKSxkZWxldGUgdGhpcy5fZmVhdHVyZXMsZGVsZXRlIHRoaXMuX3JlcXVlc3RDb3VudCxkZWxldGUgdGhpcy5fbnVtUmVxdWVzdHMpKX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Db250cm9sLldNU0dldEZlYXR1cmVJbmZvIn0pO09wZW5MYXllcnMuRm9ybWF0LldNU0NhcGFiaWxpdGllcy52MV8zXzA9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkZvcm1hdC5XTVNDYXBhYmlsaXRpZXMudjFfMyx7dmVyc2lvbjoiMS4zLjAiLENMQVNTX05BTUU6Ik9wZW5MYXllcnMuRm9ybWF0LldNU0NhcGFiaWxpdGllcy52MV8zXzAifSk7T3BlbkxheWVycy5Gb3JtYXQuU09TR2V0RmVhdHVyZU9mSW50ZXJlc3Q9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkZvcm1hdC5YTUwse1ZFUlNJT046IjEuMC4wIixuYW1lc3BhY2VzOntzb3M6Imh0dHA6Ly93d3cub3Blbmdpcy5uZXQvc29zLzEuMCIsZ21sOiJodHRwOi8vd3d3Lm9wZW5naXMubmV0L2dtbCIsc2E6Imh0dHA6Ly93d3cub3Blbmdpcy5uZXQvc2FtcGxpbmcvMS4wIix4c2k6Imh0dHA6Ly93d3cudzMub3JnLzIwMDEvWE1MU2NoZW1hLWluc3RhbmNlIn0sc2NoZW1hTG9jYXRpb246Imh0dHA6Ly93d3cub3Blbmdpcy5uZXQvc29zLzEuMCBodHRwOi8vc2NoZW1hcy5vcGVuZ2lzLm5ldC9zb3MvMS4wLjAvc29zQWxsLnhzZCIsZGVmYXVsdFByZWZpeDoic29zIixyZWdFeGVzOnt0cmltU3BhY2U6L15ccyp8XHMqJC9nLHJlbW92ZVNwYWNlOi9ccyovZyxzcGxpdFNwYWNlOi9ccysvLHRyaW1Db21tYTovXHMqLFxzKi9nfSxyZWFkOmZ1bmN0aW9uKGEpeyJzdHJpbmciPT0KdHlwZW9mIGEmJihhPU9wZW5MYXllcnMuRm9ybWF0LlhNTC5wcm90b3R5cGUucmVhZC5hcHBseSh0aGlzLFthXSkpO2EmJjk9PWEubm9kZVR5cGUmJihhPWEuZG9jdW1lbnRFbGVtZW50KTt2YXIgYj17ZmVhdHVyZXM6W119O3RoaXMucmVhZE5vZGUoYSxiKTthPVtdO2Zvcih2YXIgYz0wLGQ9Yi5mZWF0dXJlcy5sZW5ndGg7YzxkO2MrKyl7dmFyIGU9Yi5mZWF0dXJlc1tjXTt0aGlzLmludGVybmFsUHJvamVjdGlvbiYmKHRoaXMuZXh0ZXJuYWxQcm9qZWN0aW9uJiZlLmNvbXBvbmVudHNbMF0pJiZlLmNvbXBvbmVudHNbMF0udHJhbnNmb3JtKHRoaXMuZXh0ZXJuYWxQcm9qZWN0aW9uLHRoaXMuaW50ZXJuYWxQcm9qZWN0aW9uKTtlPW5ldyBPcGVuTGF5ZXJzLkZlYXR1cmUuVmVjdG9yKGUuY29tcG9uZW50c1swXSxlLmF0dHJpYnV0ZXMpO2EucHVzaChlKX1yZXR1cm4gYX0scmVhZGVyczp7c2E6e1NhbXBsaW5nUG9pbnQ6ZnVuY3Rpb24oYSxiKXtpZighYi5hdHRyaWJ1dGVzKXt2YXIgYz0Ke2F0dHJpYnV0ZXM6e319O2IuZmVhdHVyZXMucHVzaChjKTtiPWN9Yi5hdHRyaWJ1dGVzLmlkPXRoaXMuZ2V0QXR0cmlidXRlTlMoYSx0aGlzLm5hbWVzcGFjZXMuZ21sLCJpZCIpO3RoaXMucmVhZENoaWxkTm9kZXMoYSxiKX0scG9zaXRpb246ZnVuY3Rpb24oYSxiKXt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYil9fSxnbWw6T3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoe0ZlYXR1cmVDb2xsZWN0aW9uOmZ1bmN0aW9uKGEsYil7dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGIpfSxmZWF0dXJlTWVtYmVyOmZ1bmN0aW9uKGEsYil7dmFyIGM9e2F0dHJpYnV0ZXM6e319O2IuZmVhdHVyZXMucHVzaChjKTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYyl9LG5hbWU6ZnVuY3Rpb24oYSxiKXtiLmF0dHJpYnV0ZXMubmFtZT10aGlzLmdldENoaWxkVmFsdWUoYSl9LHBvczpmdW5jdGlvbihhLGIpe3RoaXMuZXh0ZXJuYWxQcm9qZWN0aW9ufHwodGhpcy5leHRlcm5hbFByb2plY3Rpb249bmV3IE9wZW5MYXllcnMuUHJvamVjdGlvbihhLmdldEF0dHJpYnV0ZSgic3JzTmFtZSIpKSk7Ck9wZW5MYXllcnMuRm9ybWF0LkdNTC52My5wcm90b3R5cGUucmVhZGVycy5nbWwucG9zLmFwcGx5KHRoaXMsW2EsYl0pfX0sT3BlbkxheWVycy5Gb3JtYXQuR01MLnYzLnByb3RvdHlwZS5yZWFkZXJzLmdtbCl9LHdyaXRlcnM6e3Nvczp7R2V0RmVhdHVyZU9mSW50ZXJlc3Q6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygiR2V0RmVhdHVyZU9mSW50ZXJlc3QiLHthdHRyaWJ1dGVzOnt2ZXJzaW9uOnRoaXMuVkVSU0lPTixzZXJ2aWNlOiJTT1MiLCJ4c2k6c2NoZW1hTG9jYXRpb24iOnRoaXMuc2NoZW1hTG9jYXRpb259fSksYz0wLGQ9YS5mb2lzLmxlbmd0aDtjPGQ7YysrKXRoaXMud3JpdGVOb2RlKCJGZWF0dXJlT2ZJbnRlcmVzdElkIix7Zm9pOmEuZm9pc1tjXX0sYik7cmV0dXJuIGJ9LEZlYXR1cmVPZkludGVyZXN0SWQ6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygiRmVhdHVyZU9mSW50ZXJlc3RJZCIse3ZhbHVlOmEuZm9pfSl9fX0sCkNMQVNTX05BTUU6Ik9wZW5MYXllcnMuRm9ybWF0LlNPU0dldEZlYXR1cmVPZkludGVyZXN0In0pO09wZW5MYXllcnMuRm9ybWF0LlNPU0dldE9ic2VydmF0aW9uPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Gb3JtYXQuWE1MLHtuYW1lc3BhY2VzOntvd3M6Imh0dHA6Ly93d3cub3Blbmdpcy5uZXQvb3dzIixnbWw6Imh0dHA6Ly93d3cub3Blbmdpcy5uZXQvZ21sIixzb3M6Imh0dHA6Ly93d3cub3Blbmdpcy5uZXQvc29zLzEuMCIsb2djOiJodHRwOi8vd3d3Lm9wZW5naXMubmV0L29nYyIsb206Imh0dHA6Ly93d3cub3Blbmdpcy5uZXQvb20vMS4wIixzYToiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9zYW1wbGluZy8xLjAiLHhsaW5rOiJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIix4c2k6Imh0dHA6Ly93d3cudzMub3JnLzIwMDEvWE1MU2NoZW1hLWluc3RhbmNlIn0scmVnRXhlczp7dHJpbVNwYWNlOi9eXHMqfFxzKiQvZyxyZW1vdmVTcGFjZTovXHMqL2csc3BsaXRTcGFjZTovXHMrLyx0cmltQ29tbWE6L1xzKixccyovZ30sVkVSU0lPTjoiMS4wLjAiLHNjaGVtYUxvY2F0aW9uOiJodHRwOi8vd3d3Lm9wZW5naXMubmV0L3Nvcy8xLjAgaHR0cDovL3NjaGVtYXMub3Blbmdpcy5uZXQvc29zLzEuMC4wL3Nvc0dldE9ic2VydmF0aW9uLnhzZCIsCmRlZmF1bHRQcmVmaXg6InNvcyIscmVhZDpmdW5jdGlvbihhKXsic3RyaW5nIj09dHlwZW9mIGEmJihhPU9wZW5MYXllcnMuRm9ybWF0LlhNTC5wcm90b3R5cGUucmVhZC5hcHBseSh0aGlzLFthXSkpO2EmJjk9PWEubm9kZVR5cGUmJihhPWEuZG9jdW1lbnRFbGVtZW50KTt2YXIgYj17bWVhc3VyZW1lbnRzOltdLG9ic2VydmF0aW9uczpbXX07dGhpcy5yZWFkTm9kZShhLGIpO3JldHVybiBifSx3cml0ZTpmdW5jdGlvbihhKXthPXRoaXMud3JpdGVOb2RlKCJzb3M6R2V0T2JzZXJ2YXRpb24iLGEpO2Euc2V0QXR0cmlidXRlKCJ4bWxuczpvbSIsdGhpcy5uYW1lc3BhY2VzLm9tKTthLnNldEF0dHJpYnV0ZSgieG1sbnM6b2djIix0aGlzLm5hbWVzcGFjZXMub2djKTt0aGlzLnNldEF0dHJpYnV0ZU5TKGEsdGhpcy5uYW1lc3BhY2VzLnhzaSwieHNpOnNjaGVtYUxvY2F0aW9uIix0aGlzLnNjaGVtYUxvY2F0aW9uKTtyZXR1cm4gT3BlbkxheWVycy5Gb3JtYXQuWE1MLnByb3RvdHlwZS53cml0ZS5hcHBseSh0aGlzLApbYV0pfSxyZWFkZXJzOntvbTp7T2JzZXJ2YXRpb25Db2xsZWN0aW9uOmZ1bmN0aW9uKGEsYil7Yi5pZD10aGlzLmdldEF0dHJpYnV0ZU5TKGEsdGhpcy5uYW1lc3BhY2VzLmdtbCwiaWQiKTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYil9LG1lbWJlcjpmdW5jdGlvbihhLGIpe3RoaXMucmVhZENoaWxkTm9kZXMoYSxiKX0sTWVhc3VyZW1lbnQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz17fTtiLm1lYXN1cmVtZW50cy5wdXNoKGMpO3RoaXMucmVhZENoaWxkTm9kZXMoYSxjKX0sT2JzZXJ2YXRpb246ZnVuY3Rpb24oYSxiKXt2YXIgYz17fTtiLm9ic2VydmF0aW9ucy5wdXNoKGMpO3RoaXMucmVhZENoaWxkTm9kZXMoYSxjKX0sc2FtcGxpbmdUaW1lOmZ1bmN0aW9uKGEsYil7dmFyIGM9e307Yi5zYW1wbGluZ1RpbWU9Yzt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYyl9LG9ic2VydmVkUHJvcGVydHk6ZnVuY3Rpb24oYSxiKXtiLm9ic2VydmVkUHJvcGVydHk9dGhpcy5nZXRBdHRyaWJ1dGVOUyhhLHRoaXMubmFtZXNwYWNlcy54bGluaywKImhyZWYiKTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYil9LHByb2NlZHVyZTpmdW5jdGlvbihhLGIpe2IucHJvY2VkdXJlPXRoaXMuZ2V0QXR0cmlidXRlTlMoYSx0aGlzLm5hbWVzcGFjZXMueGxpbmssImhyZWYiKTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYil9LGZlYXR1cmVPZkludGVyZXN0OmZ1bmN0aW9uKGEsYil7dmFyIGM9e2ZlYXR1cmVzOltdfTtiLmZvaXM9W107Yi5mb2lzLnB1c2goYyk7dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGMpO2Zvcih2YXIgZD1bXSxlPTAsZj1jLmZlYXR1cmVzLmxlbmd0aDtlPGY7ZSsrKXt2YXIgZz1jLmZlYXR1cmVzW2VdO2QucHVzaChuZXcgT3BlbkxheWVycy5GZWF0dXJlLlZlY3RvcihnLmNvbXBvbmVudHNbMF0sZy5hdHRyaWJ1dGVzKSl9Yy5mZWF0dXJlcz1kfSxyZXN1bHQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz17fTtiLnJlc3VsdD1jOyIiIT09dGhpcy5nZXRDaGlsZFZhbHVlKGEpPyhjLnZhbHVlPXRoaXMuZ2V0Q2hpbGRWYWx1ZShhKSxjLnVvbT0KYS5nZXRBdHRyaWJ1dGUoInVvbSIpKTp0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYyl9fSxzYTpPcGVuTGF5ZXJzLkZvcm1hdC5TT1NHZXRGZWF0dXJlT2ZJbnRlcmVzdC5wcm90b3R5cGUucmVhZGVycy5zYSxnbWw6T3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoe1RpbWVJbnN0YW50OmZ1bmN0aW9uKGEsYil7dmFyIGM9e307Yi50aW1lSW5zdGFudD1jO3RoaXMucmVhZENoaWxkTm9kZXMoYSxjKX0sdGltZVBvc2l0aW9uOmZ1bmN0aW9uKGEsYil7Yi50aW1lUG9zaXRpb249dGhpcy5nZXRDaGlsZFZhbHVlKGEpfX0sT3BlbkxheWVycy5Gb3JtYXQuU09TR2V0RmVhdHVyZU9mSW50ZXJlc3QucHJvdG90eXBlLnJlYWRlcnMuZ21sKX0sd3JpdGVyczp7c29zOntHZXRPYnNlcnZhdGlvbjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoIkdldE9ic2VydmF0aW9uIix7YXR0cmlidXRlczp7dmVyc2lvbjp0aGlzLlZFUlNJT04sc2VydmljZToiU09TIn19KTt0aGlzLndyaXRlTm9kZSgib2ZmZXJpbmciLAphLGIpO2EuZXZlbnRUaW1lJiZ0aGlzLndyaXRlTm9kZSgiZXZlbnRUaW1lIixhLGIpO2Zvcih2YXIgYyBpbiBhLnByb2NlZHVyZXMpdGhpcy53cml0ZU5vZGUoInByb2NlZHVyZSIsYS5wcm9jZWR1cmVzW2NdLGIpO2Zvcih2YXIgZCBpbiBhLm9ic2VydmVkUHJvcGVydGllcyl0aGlzLndyaXRlTm9kZSgib2JzZXJ2ZWRQcm9wZXJ0eSIsYS5vYnNlcnZlZFByb3BlcnRpZXNbZF0sYik7YS5mb2kmJnRoaXMud3JpdGVOb2RlKCJmZWF0dXJlT2ZJbnRlcmVzdCIsYS5mb2ksYik7dGhpcy53cml0ZU5vZGUoInJlc3BvbnNlRm9ybWF0IixhLGIpO2EucmVzdWx0TW9kZWwmJnRoaXMud3JpdGVOb2RlKCJyZXN1bHRNb2RlbCIsYSxiKTthLnJlc3BvbnNlTW9kZSYmdGhpcy53cml0ZU5vZGUoInJlc3BvbnNlTW9kZSIsYSxiKTtyZXR1cm4gYn0sZmVhdHVyZU9mSW50ZXJlc3Q6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJmZWF0dXJlT2ZJbnRlcmVzdCIpO3RoaXMud3JpdGVOb2RlKCJPYmplY3RJRCIsCmEub2JqZWN0SWQsYik7cmV0dXJuIGJ9LE9iamVjdElEOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoIk9iamVjdElEIix7dmFsdWU6YX0pfSxyZXNwb25zZUZvcm1hdDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJyZXNwb25zZUZvcm1hdCIse3ZhbHVlOmEucmVzcG9uc2VGb3JtYXR9KX0scHJvY2VkdXJlOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoInByb2NlZHVyZSIse3ZhbHVlOmF9KX0sb2ZmZXJpbmc6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygib2ZmZXJpbmciLHt2YWx1ZTphLm9mZmVyaW5nfSl9LG9ic2VydmVkUHJvcGVydHk6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygib2JzZXJ2ZWRQcm9wZXJ0eSIse3ZhbHVlOmF9KX0sZXZlbnRUaW1lOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygiZXZlbnRUaW1lIik7CiJsYXRlc3QiPT09YS5ldmVudFRpbWUmJnRoaXMud3JpdGVOb2RlKCJvZ2M6VE1fRXF1YWxzIixhLGIpO3JldHVybiBifSxyZXN1bHRNb2RlbDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJyZXN1bHRNb2RlbCIse3ZhbHVlOmEucmVzdWx0TW9kZWx9KX0scmVzcG9uc2VNb2RlOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoInJlc3BvbnNlTW9kZSIse3ZhbHVlOmEucmVzcG9uc2VNb2RlfSl9fSxvZ2M6e1RNX0VxdWFsczpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoIm9nYzpUTV9FcXVhbHMiKTt0aGlzLndyaXRlTm9kZSgib2djOlByb3BlcnR5TmFtZSIse3Byb3BlcnR5OiJ1cm46b2djOmRhdGE6dGltZTppc284NjAxIn0sYik7ImxhdGVzdCI9PT1hLmV2ZW50VGltZSYmdGhpcy53cml0ZU5vZGUoImdtbDpUaW1lSW5zdGFudCIse3ZhbHVlOiJsYXRlc3QifSxiKTtyZXR1cm4gYn0sUHJvcGVydHlOYW1lOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoIm9nYzpQcm9wZXJ0eU5hbWUiLAp7dmFsdWU6YS5wcm9wZXJ0eX0pfX0sZ21sOntUaW1lSW5zdGFudDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoImdtbDpUaW1lSW5zdGFudCIpO3RoaXMud3JpdGVOb2RlKCJnbWw6dGltZVBvc2l0aW9uIixhLGIpO3JldHVybiBifSx0aW1lUG9zaXRpb246ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygiZ21sOnRpbWVQb3NpdGlvbiIse3ZhbHVlOmEudmFsdWV9KX19fSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkZvcm1hdC5TT1NHZXRPYnNlcnZhdGlvbiJ9KTtPcGVuTGF5ZXJzLkNvbnRyb2wuVVRGR3JpZD1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuQ29udHJvbCx7YXV0b0FjdGl2YXRlOiEwLGxheWVyczpudWxsLGRlZmF1bHRIYW5kbGVyT3B0aW9uczp7ZGVsYXk6MzAwLHBpeGVsVG9sZXJhbmNlOjQsc3RvcE1vdmU6ITEsc2luZ2xlOiEwLCJkb3VibGUiOiExLHN0b3BTaW5nbGU6ITEsc3RvcERvdWJsZTohMX0saGFuZGxlck1vZGU6ImNsaWNrIixzZXRIYW5kbGVyOmZ1bmN0aW9uKGEpe3RoaXMuaGFuZGxlck1vZGU9YTt0aGlzLnJlc2V0SGFuZGxlcigpfSxyZXNldEhhbmRsZXI6ZnVuY3Rpb24oKXt0aGlzLmhhbmRsZXImJih0aGlzLmhhbmRsZXIuZGVhY3RpdmF0ZSgpLHRoaXMuaGFuZGxlci5kZXN0cm95KCksdGhpcy5oYW5kbGVyPW51bGwpOyJob3ZlciI9PXRoaXMuaGFuZGxlck1vZGU/dGhpcy5oYW5kbGVyPW5ldyBPcGVuTGF5ZXJzLkhhbmRsZXIuSG92ZXIodGhpcyx7cGF1c2U6dGhpcy5oYW5kbGVFdmVudCxtb3ZlOnRoaXMucmVzZXR9LAp0aGlzLmhhbmRsZXJPcHRpb25zKToiY2xpY2siPT10aGlzLmhhbmRsZXJNb2RlP3RoaXMuaGFuZGxlcj1uZXcgT3BlbkxheWVycy5IYW5kbGVyLkNsaWNrKHRoaXMse2NsaWNrOnRoaXMuaGFuZGxlRXZlbnR9LHRoaXMuaGFuZGxlck9wdGlvbnMpOiJtb3ZlIj09dGhpcy5oYW5kbGVyTW9kZSYmKHRoaXMuaGFuZGxlcj1uZXcgT3BlbkxheWVycy5IYW5kbGVyLkhvdmVyKHRoaXMse3BhdXNlOnRoaXMuaGFuZGxlRXZlbnQsbW92ZTp0aGlzLmhhbmRsZUV2ZW50fSx0aGlzLmhhbmRsZXJPcHRpb25zKSk7cmV0dXJuIHRoaXMuaGFuZGxlcj8hMDohMX0saW5pdGlhbGl6ZTpmdW5jdGlvbihhKXthPWF8fHt9O2EuaGFuZGxlck9wdGlvbnM9YS5oYW5kbGVyT3B0aW9uc3x8dGhpcy5kZWZhdWx0SGFuZGxlck9wdGlvbnM7T3BlbkxheWVycy5Db250cm9sLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsW2FdKTt0aGlzLnJlc2V0SGFuZGxlcigpfSxoYW5kbGVFdmVudDpmdW5jdGlvbihhKXtpZihudWxsPT0KYSl0aGlzLnJlc2V0KCk7ZWxzZXt2YXIgYj10aGlzLm1hcC5nZXRMb25MYXRGcm9tUGl4ZWwoYS54eSk7aWYoYil7dmFyIGM9dGhpcy5maW5kTGF5ZXJzKCk7aWYoMDxjLmxlbmd0aCl7Zm9yKHZhciBkPXt9LGUsZixnPTAsaD1jLmxlbmd0aDtnPGg7ZysrKWU9Y1tnXSxmPU9wZW5MYXllcnMuVXRpbC5pbmRleE9mKHRoaXMubWFwLmxheWVycyxlKSxkW2ZdPWUuZ2V0RmVhdHVyZUluZm8oYik7dGhpcy5jYWxsYmFjayhkLGIsYS54eSl9fX19LGNhbGxiYWNrOmZ1bmN0aW9uKGEpe30scmVzZXQ6ZnVuY3Rpb24oYSl7dGhpcy5jYWxsYmFjayhudWxsKX0sZmluZExheWVyczpmdW5jdGlvbigpe2Zvcih2YXIgYT10aGlzLmxheWVyc3x8dGhpcy5tYXAubGF5ZXJzLGI9W10sYyxkPWEubGVuZ3RoLTE7MDw9ZDstLWQpYz1hW2RdLGMgaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLkxheWVyLlVURkdyaWQmJmIucHVzaChjKTtyZXR1cm4gYn0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Db250cm9sLlVURkdyaWQifSk7T3BlbkxheWVycy5Gb3JtYXQuQ1FMPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhKXtmdW5jdGlvbiBiKCl7dmFyIGE9ZS5wb3AoKTtzd2l0Y2goYS50eXBlKXtjYXNlICJMT0dJQ0FMIjp2YXIgYz1iKCksZz1iKCk7cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLkZpbHRlci5Mb2dpY2FsKHtmaWx0ZXJzOltnLGNdLHR5cGU6ZlthLnRleHQudG9VcHBlckNhc2UoKV19KTtjYXNlICJOT1QiOnJldHVybiBhPWIoKSxuZXcgT3BlbkxheWVycy5GaWx0ZXIuTG9naWNhbCh7ZmlsdGVyczpbYV0sdHlwZTpPcGVuTGF5ZXJzLkZpbHRlci5Mb2dpY2FsLk5PVH0pO2Nhc2UgIkJFVFdFRU4iOnJldHVybiBlLnBvcCgpLGc9YigpLGE9YigpLGM9YigpLG5ldyBPcGVuTGF5ZXJzLkZpbHRlci5Db21wYXJpc29uKHtwcm9wZXJ0eTpjLGxvd2VyQm91bmRhcnk6YSx1cHBlckJvdW5kYXJ5OmcsdHlwZTpPcGVuTGF5ZXJzLkZpbHRlci5Db21wYXJpc29uLkJFVFdFRU59KTtjYXNlICJDT01QQVJJU09OIjpyZXR1cm4gZz0KYigpLGM9YigpLG5ldyBPcGVuTGF5ZXJzLkZpbHRlci5Db21wYXJpc29uKHtwcm9wZXJ0eTpjLHZhbHVlOmcsdHlwZTpkW2EudGV4dC50b1VwcGVyQ2FzZSgpXX0pO2Nhc2UgIklTX05VTEwiOnJldHVybiBjPWIoKSxuZXcgT3BlbkxheWVycy5GaWx0ZXIuQ29tcGFyaXNvbih7cHJvcGVydHk6Yyx0eXBlOmRbYS50ZXh0LnRvVXBwZXJDYXNlKCldfSk7Y2FzZSAiVkFMVUUiOnJldHVybihjPWEudGV4dC5tYXRjaCgvXicoLiopJyQvKSk/Y1sxXS5yZXBsYWNlKC8nJy9nLCInIik6TnVtYmVyKGEudGV4dCk7Y2FzZSAiU1BBVElBTCI6c3dpdGNoKGEudGV4dC50b1VwcGVyQ2FzZSgpKXtjYXNlICJCQk9YIjp2YXIgYT1iKCksYz1iKCksZz1iKCksaD1iKCksaz1iKCk7cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLkZpbHRlci5TcGF0aWFsKHt0eXBlOk9wZW5MYXllcnMuRmlsdGVyLlNwYXRpYWwuQkJPWCxwcm9wZXJ0eTprLHZhbHVlOk9wZW5MYXllcnMuQm91bmRzLmZyb21BcnJheShbaCxnLGMsCmFdKX0pO2Nhc2UgIklOVEVSU0VDVFMiOnJldHVybiBnPWIoKSxjPWIoKSxuZXcgT3BlbkxheWVycy5GaWx0ZXIuU3BhdGlhbCh7dHlwZTpPcGVuTGF5ZXJzLkZpbHRlci5TcGF0aWFsLklOVEVSU0VDVFMscHJvcGVydHk6Yyx2YWx1ZTpnfSk7Y2FzZSAiV0lUSElOIjpyZXR1cm4gZz1iKCksYz1iKCksbmV3IE9wZW5MYXllcnMuRmlsdGVyLlNwYXRpYWwoe3R5cGU6T3BlbkxheWVycy5GaWx0ZXIuU3BhdGlhbC5XSVRISU4scHJvcGVydHk6Yyx2YWx1ZTpnfSk7Y2FzZSAiQ09OVEFJTlMiOnJldHVybiBnPWIoKSxjPWIoKSxuZXcgT3BlbkxheWVycy5GaWx0ZXIuU3BhdGlhbCh7dHlwZTpPcGVuTGF5ZXJzLkZpbHRlci5TcGF0aWFsLkNPTlRBSU5TLHByb3BlcnR5OmMsdmFsdWU6Z30pO2Nhc2UgIkRXSVRISU4iOnJldHVybiBhPWIoKSxnPWIoKSxjPWIoKSxuZXcgT3BlbkxheWVycy5GaWx0ZXIuU3BhdGlhbCh7dHlwZTpPcGVuTGF5ZXJzLkZpbHRlci5TcGF0aWFsLkRXSVRISU4sdmFsdWU6ZywKcHJvcGVydHk6YyxkaXN0YW5jZTpOdW1iZXIoYSl9KX1jYXNlICJHRU9NRVRSWSI6cmV0dXJuIE9wZW5MYXllcnMuR2VvbWV0cnkuZnJvbVdLVChhLnRleHQpO2RlZmF1bHQ6cmV0dXJuIGEudGV4dH19Zm9yKHZhciBjPVtdLGU9W107YS5sZW5ndGg7KXt2YXIgZz1hLnNoaWZ0KCk7c3dpdGNoKGcudHlwZSl7Y2FzZSAiUFJPUEVSVFkiOmNhc2UgIkdFT01FVFJZIjpjYXNlICJWQUxVRSI6ZS5wdXNoKGcpO2JyZWFrO2Nhc2UgIkNPTVBBUklTT04iOmNhc2UgIkJFVFdFRU4iOmNhc2UgIklTX05VTEwiOmNhc2UgIkxPR0lDQUwiOmZvcih2YXIgaz1oW2cudHlwZV07MDxjLmxlbmd0aCYmaFtjW2MubGVuZ3RoLTFdLnR5cGVdPD1rOyllLnB1c2goYy5wb3AoKSk7Yy5wdXNoKGcpO2JyZWFrO2Nhc2UgIlNQQVRJQUwiOmNhc2UgIk5PVCI6Y2FzZSAiTFBBUkVOIjpjLnB1c2goZyk7YnJlYWs7Y2FzZSAiUlBBUkVOIjpmb3IoOzA8Yy5sZW5ndGgmJiJMUEFSRU4iIT1jW2MubGVuZ3RoLTFdLnR5cGU7KWUucHVzaChjLnBvcCgpKTsKYy5wb3AoKTswPGMubGVuZ3RoJiYiU1BBVElBTCI9PWNbYy5sZW5ndGgtMV0udHlwZSYmZS5wdXNoKGMucG9wKCkpO2Nhc2UgIkNPTU1BIjpjYXNlICJFTkQiOmJyZWFrO2RlZmF1bHQ6dGhyb3cgRXJyb3IoIlVua25vd24gdG9rZW4gdHlwZSAiK2cudHlwZSk7fX1mb3IoOzA8Yy5sZW5ndGg7KWUucHVzaChjLnBvcCgpKTthPWIoKTtpZigwPGUubGVuZ3RoKXthPSJSZW1haW5pbmcgdG9rZW5zIGFmdGVyIGJ1aWxkaW5nIEFTVDogXG4iO2ZvcihjPWUubGVuZ3RoLTE7MDw9YztjLS0pYSs9ZVtjXS50eXBlKyI6ICIrZVtjXS50ZXh0KyJcbiI7dGhyb3cgRXJyb3IoYSk7fXJldHVybiBhfXZhciBiPXtQUk9QRVJUWTovXltfYS16QS1aXVx3Ki8sQ09NUEFSSVNPTjovXig9fDw+fDw9fDx8Pj18PnxMSUtFKS9pLElTX05VTEw6L15JUyBOVUxML2ksQ09NTUE6L14sLyxMT0dJQ0FMOi9eKEFORHxPUikvaSxWQUxVRTovXignKFteJ118JycpKid8XGQrKFwuXGQqKT98XC5cZCspLyxMUEFSRU46L15cKC8sClJQQVJFTjovXlwpLyxTUEFUSUFMOi9eKEJCT1h8SU5URVJTRUNUU3xEV0lUSElOfFdJVEhJTnxDT05UQUlOUykvaSxOT1Q6L15OT1QvaSxCRVRXRUVOOi9eQkVUV0VFTi9pLEdFT01FVFJZOmZ1bmN0aW9uKGEpe3ZhciBiPS9eKFBPSU5UfExJTkVTVFJJTkd8UE9MWUdPTnxNVUxUSVBPSU5UfE1VTFRJTElORVNUUklOR3xNVUxUSVBPTFlHT058R0VPTUVUUllDT0xMRUNUSU9OKS8uZXhlYyhhKTtpZihiKXt2YXIgYz1hLmxlbmd0aCxiPWEuaW5kZXhPZigiKCIsYlswXS5sZW5ndGgpO2lmKC0xPGIpZm9yKHZhciBkPTE7YjxjJiYwPGQ7KXN3aXRjaChiKyssYS5jaGFyQXQoYikpe2Nhc2UgIigiOmQrKzticmVhaztjYXNlICIpIjpkLS19cmV0dXJuW2Euc3Vic3RyKDAsYisxKV19fSxFTkQ6L14kL30sYz17TFBBUkVOOlsiR0VPTUVUUlkiLCJTUEFUSUFMIiwiUFJPUEVSVFkiLCJWQUxVRSIsIkxQQVJFTiJdLFJQQVJFTjpbIk5PVCIsIkxPR0lDQUwiLCJFTkQiLCJSUEFSRU4iXSxQUk9QRVJUWTpbIkNPTVBBUklTT04iLAoiQkVUV0VFTiIsIkNPTU1BIiwiSVNfTlVMTCJdLEJFVFdFRU46WyJWQUxVRSJdLElTX05VTEw6WyJFTkQiXSxDT01QQVJJU09OOlsiVkFMVUUiXSxDT01NQTpbIkdFT01FVFJZIiwiVkFMVUUiLCJQUk9QRVJUWSJdLFZBTFVFOlsiTE9HSUNBTCIsIkNPTU1BIiwiUlBBUkVOIiwiRU5EIl0sU1BBVElBTDpbIkxQQVJFTiJdLExPR0lDQUw6WyJOT1QiLCJWQUxVRSIsIlNQQVRJQUwiLCJQUk9QRVJUWSIsIkxQQVJFTiJdLE5PVDpbIlBST1BFUlRZIiwiTFBBUkVOIl0sR0VPTUVUUlk6WyJDT01NQSIsIlJQQVJFTiJdfSxkPXsiPSI6T3BlbkxheWVycy5GaWx0ZXIuQ29tcGFyaXNvbi5FUVVBTF9UTywiPD4iOk9wZW5MYXllcnMuRmlsdGVyLkNvbXBhcmlzb24uTk9UX0VRVUFMX1RPLCI8IjpPcGVuTGF5ZXJzLkZpbHRlci5Db21wYXJpc29uLkxFU1NfVEhBTiwiPD0iOk9wZW5MYXllcnMuRmlsdGVyLkNvbXBhcmlzb24uTEVTU19USEFOX09SX0VRVUFMX1RPLCI+IjpPcGVuTGF5ZXJzLkZpbHRlci5Db21wYXJpc29uLkdSRUFURVJfVEhBTiwKIj49IjpPcGVuTGF5ZXJzLkZpbHRlci5Db21wYXJpc29uLkdSRUFURVJfVEhBTl9PUl9FUVVBTF9UTyxMSUtFOk9wZW5MYXllcnMuRmlsdGVyLkNvbXBhcmlzb24uTElLRSxCRVRXRUVOOk9wZW5MYXllcnMuRmlsdGVyLkNvbXBhcmlzb24uQkVUV0VFTiwiSVMgTlVMTCI6T3BlbkxheWVycy5GaWx0ZXIuQ29tcGFyaXNvbi5JU19OVUxMfSxlPXt9LGY9e0FORDpPcGVuTGF5ZXJzLkZpbHRlci5Mb2dpY2FsLkFORCxPUjpPcGVuTGF5ZXJzLkZpbHRlci5Mb2dpY2FsLk9SfSxnPXt9LGg9e1JQQVJFTjozLExPR0lDQUw6MixDT01QQVJJU09OOjF9LGs7Zm9yKGsgaW4gZClkLmhhc093blByb3BlcnR5KGspJiYoZVtkW2tdXT1rKTtmb3IoayBpbiBmKWYuaGFzT3duUHJvcGVydHkoaykmJihnW2Zba11dPWspO3JldHVybiBPcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuRm9ybWF0LHtyZWFkOmZ1bmN0aW9uKGQpe3ZhciBlPWQ7ZD1bXTt2YXIgZixnPVsiTk9UIiwiR0VPTUVUUlkiLCJTUEFUSUFMIiwKIlBST1BFUlRZIiwiTFBBUkVOIl07ZG97YTp7Zj1nO2Zvcih2YXIgaD12b2lkIDAsZz12b2lkIDAsaz1mLmxlbmd0aCxoPTA7aDxrO2grKyl7dmFyIGc9ZltoXSxzPWJbZ11pbnN0YW5jZW9mIFJlZ0V4cD9iW2ddLmV4ZWMoZSk6KDAsYltnXSkoZSk7aWYocyl7Zj1zWzBdO2U9ZS5zdWJzdHIoZi5sZW5ndGgpLnJlcGxhY2UoL15ccyovLCIiKTtmPXt0eXBlOmcsdGV4dDpmLHJlbWFpbmRlcjplfTticmVhayBhfX1kPSJFUlJPUjogSW4gcGFyc2luZzogWyIrZSsiXSwgZXhwZWN0ZWQgb25lIG9mOiAiO2ZvcihoPTA7aDxrO2grKylnPWZbaF0sZCs9IlxuICAgICIrZysiOiAiK2JbZ107dGhyb3cgRXJyb3IoZCk7fWU9Zi5yZW1haW5kZXI7Zz1jW2YudHlwZV07aWYoIkVORCIhPWYudHlwZSYmIWcpdGhyb3cgRXJyb3IoIk5vIGZvbGxvd3MgbGlzdCBmb3IgIitmLnR5cGUpO2QucHVzaChmKX13aGlsZSgiRU5EIiE9Zi50eXBlKTtkPWEoZCk7dGhpcy5rZWVwRGF0YSYmKHRoaXMuZGF0YT1kKTsKcmV0dXJuIGR9LHdyaXRlOmZ1bmN0aW9uKGEpe2lmKGEgaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLkdlb21ldHJ5KXJldHVybiBhLnRvU3RyaW5nKCk7c3dpdGNoKGEuQ0xBU1NfTkFNRSl7Y2FzZSAiT3BlbkxheWVycy5GaWx0ZXIuU3BhdGlhbCI6c3dpdGNoKGEudHlwZSl7Y2FzZSBPcGVuTGF5ZXJzLkZpbHRlci5TcGF0aWFsLkJCT1g6cmV0dXJuIkJCT1goIithLnByb3BlcnR5KyIsIithLnZhbHVlLnRvQkJPWCgpKyIpIjtjYXNlIE9wZW5MYXllcnMuRmlsdGVyLlNwYXRpYWwuRFdJVEhJTjpyZXR1cm4iRFdJVEhJTigiK2EucHJvcGVydHkrIiwgIit0aGlzLndyaXRlKGEudmFsdWUpKyIsICIrYS5kaXN0YW5jZSsiKSI7Y2FzZSBPcGVuTGF5ZXJzLkZpbHRlci5TcGF0aWFsLldJVEhJTjpyZXR1cm4iV0lUSElOKCIrYS5wcm9wZXJ0eSsiLCAiK3RoaXMud3JpdGUoYS52YWx1ZSkrIikiO2Nhc2UgT3BlbkxheWVycy5GaWx0ZXIuU3BhdGlhbC5JTlRFUlNFQ1RTOnJldHVybiJJTlRFUlNFQ1RTKCIrCmEucHJvcGVydHkrIiwgIit0aGlzLndyaXRlKGEudmFsdWUpKyIpIjtjYXNlIE9wZW5MYXllcnMuRmlsdGVyLlNwYXRpYWwuQ09OVEFJTlM6cmV0dXJuIkNPTlRBSU5TKCIrYS5wcm9wZXJ0eSsiLCAiK3RoaXMud3JpdGUoYS52YWx1ZSkrIikiO2RlZmF1bHQ6dGhyb3cgRXJyb3IoIlVua25vd24gc3BhdGlhbCBmaWx0ZXIgdHlwZTogIithLnR5cGUpO31jYXNlICJPcGVuTGF5ZXJzLkZpbHRlci5Mb2dpY2FsIjppZihhLnR5cGU9PU9wZW5MYXllcnMuRmlsdGVyLkxvZ2ljYWwuTk9UKXJldHVybiJOT1QgKCIrdGhpcy53cml0ZShhLmZpbHRlcnNbMF0pKyIpIjtmb3IodmFyIGI9IigiLGM9ITAsZD0wO2Q8YS5maWx0ZXJzLmxlbmd0aDtkKyspYz9jPSExOmIrPSIpICIrZ1thLnR5cGVdKyIgKCIsYis9dGhpcy53cml0ZShhLmZpbHRlcnNbZF0pO3JldHVybiBiKyIpIjtjYXNlICJPcGVuTGF5ZXJzLkZpbHRlci5Db21wYXJpc29uIjpyZXR1cm4gYS50eXBlPT1PcGVuTGF5ZXJzLkZpbHRlci5Db21wYXJpc29uLkJFVFdFRU4/CmEucHJvcGVydHkrIiBCRVRXRUVOICIrdGhpcy53cml0ZShhLmxvd2VyQm91bmRhcnkpKyIgQU5EICIrdGhpcy53cml0ZShhLnVwcGVyQm91bmRhcnkpOm51bGwhPT1hLnZhbHVlP2EucHJvcGVydHkrIiAiK2VbYS50eXBlXSsiICIrdGhpcy53cml0ZShhLnZhbHVlKTphLnByb3BlcnR5KyIgIitlW2EudHlwZV07Y2FzZSB2b2lkIDA6aWYoInN0cmluZyI9PT10eXBlb2YgYSlyZXR1cm4iJyIrYS5yZXBsYWNlKC8nL2csIicnIikrIiciO2lmKCJudW1iZXIiPT09dHlwZW9mIGEpcmV0dXJuIFN0cmluZyhhKTtkZWZhdWx0OnRocm93IEVycm9yKCJDYW4ndCBlbmNvZGU6ICIrYS5DTEFTU19OQU1FKyIgIithKTt9fSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkZvcm1hdC5DUUwifSl9KCk7T3BlbkxheWVycy5Db250cm9sLlNwbGl0PU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Db250cm9sLHtsYXllcjpudWxsLHNvdXJjZTpudWxsLHNvdXJjZU9wdGlvbnM6bnVsbCx0b2xlcmFuY2U6bnVsbCxlZGdlOiEwLGRlZmVyRGVsZXRlOiExLG11dHVhbDohMCx0YXJnZXRGaWx0ZXI6bnVsbCxzb3VyY2VGaWx0ZXI6bnVsbCxoYW5kbGVyOm51bGwsaW5pdGlhbGl6ZTpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLkNvbnRyb2wucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxbYV0pO3RoaXMub3B0aW9ucz1hfHx7fTt0aGlzLm9wdGlvbnMuc291cmNlJiZ0aGlzLnNldFNvdXJjZSh0aGlzLm9wdGlvbnMuc291cmNlKX0sc2V0U291cmNlOmZ1bmN0aW9uKGEpe3RoaXMuYWN0aXZlPyh0aGlzLmRlYWN0aXZhdGUoKSx0aGlzLmhhbmRsZXImJih0aGlzLmhhbmRsZXIuZGVzdHJveSgpLGRlbGV0ZSB0aGlzLmhhbmRsZXIpLHRoaXMuc291cmNlPWEsdGhpcy5hY3RpdmF0ZSgpKTp0aGlzLnNvdXJjZT0KYX0sYWN0aXZhdGU6ZnVuY3Rpb24oKXt2YXIgYT1PcGVuTGF5ZXJzLkNvbnRyb2wucHJvdG90eXBlLmFjdGl2YXRlLmNhbGwodGhpcyk7aWYoYSlpZighdGhpcy5zb3VyY2UpdGhpcy5oYW5kbGVyfHwodGhpcy5oYW5kbGVyPW5ldyBPcGVuTGF5ZXJzLkhhbmRsZXIuUGF0aCh0aGlzLHtkb25lOmZ1bmN0aW9uKGEpe3RoaXMub25Ta2V0Y2hDb21wbGV0ZSh7ZmVhdHVyZTpuZXcgT3BlbkxheWVycy5GZWF0dXJlLlZlY3RvcihhKX0pfX0se2xheWVyT3B0aW9uczp0aGlzLnNvdXJjZU9wdGlvbnN9KSksdGhpcy5oYW5kbGVyLmFjdGl2YXRlKCk7ZWxzZSBpZih0aGlzLnNvdXJjZS5ldmVudHMpdGhpcy5zb3VyY2UuZXZlbnRzLm9uKHtza2V0Y2hjb21wbGV0ZTp0aGlzLm9uU2tldGNoQ29tcGxldGUsYWZ0ZXJmZWF0dXJlbW9kaWZpZWQ6dGhpcy5hZnRlckZlYXR1cmVNb2RpZmllZCxzY29wZTp0aGlzfSk7cmV0dXJuIGF9LGRlYWN0aXZhdGU6ZnVuY3Rpb24oKXt2YXIgYT1PcGVuTGF5ZXJzLkNvbnRyb2wucHJvdG90eXBlLmRlYWN0aXZhdGUuY2FsbCh0aGlzKTsKYSYmdGhpcy5zb3VyY2UmJnRoaXMuc291cmNlLmV2ZW50cyYmdGhpcy5zb3VyY2UuZXZlbnRzLnVuKHtza2V0Y2hjb21wbGV0ZTp0aGlzLm9uU2tldGNoQ29tcGxldGUsYWZ0ZXJmZWF0dXJlbW9kaWZpZWQ6dGhpcy5hZnRlckZlYXR1cmVNb2RpZmllZCxzY29wZTp0aGlzfSk7cmV0dXJuIGF9LG9uU2tldGNoQ29tcGxldGU6ZnVuY3Rpb24oYSl7dGhpcy5mZWF0dXJlPW51bGw7cmV0dXJuIXRoaXMuY29uc2lkZXJTcGxpdChhLmZlYXR1cmUpfSxhZnRlckZlYXR1cmVNb2RpZmllZDpmdW5jdGlvbihhKXthLm1vZGlmaWVkJiYiZnVuY3Rpb24iPT09dHlwZW9mIGEuZmVhdHVyZS5nZW9tZXRyeS5zcGxpdCYmKHRoaXMuZmVhdHVyZT1hLmZlYXR1cmUsdGhpcy5jb25zaWRlclNwbGl0KGEuZmVhdHVyZSkpfSxyZW1vdmVCeUdlb21ldHJ5OmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTAsZD1hLmxlbmd0aDtjPGQ7KytjKWlmKGFbY10uZ2VvbWV0cnk9PT1iKXthLnNwbGljZShjLDEpO2JyZWFrfX0sCmlzRWxpZ2libGU6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuZ2VvbWV0cnk/YS5zdGF0ZSE9PU9wZW5MYXllcnMuU3RhdGUuREVMRVRFJiYiZnVuY3Rpb24iPT09dHlwZW9mIGEuZ2VvbWV0cnkuc3BsaXQmJnRoaXMuZmVhdHVyZSE9PWEmJighdGhpcy50YXJnZXRGaWx0ZXJ8fHRoaXMudGFyZ2V0RmlsdGVyLmV2YWx1YXRlKGEuYXR0cmlidXRlcykpOiExfSxjb25zaWRlclNwbGl0OmZ1bmN0aW9uKGEpe3ZhciBiPSExLGM9ITE7aWYoIXRoaXMuc291cmNlRmlsdGVyfHx0aGlzLnNvdXJjZUZpbHRlci5ldmFsdWF0ZShhLmF0dHJpYnV0ZXMpKXtmb3IodmFyIGQ9dGhpcy5sYXllciYmdGhpcy5sYXllci5mZWF0dXJlc3x8W10sZSxmLGc9W10saD1bXSxrPXRoaXMubGF5ZXI9PT10aGlzLnNvdXJjZSYmdGhpcy5tdXR1YWwsbD17ZWRnZTp0aGlzLmVkZ2UsdG9sZXJhbmNlOnRoaXMudG9sZXJhbmNlLG11dHVhbDprfSxtPVthLmdlb21ldHJ5XSxuLHAscSxyPTAscz1kLmxlbmd0aDtyPHM7KytyKWlmKG49CmRbcl0sdGhpcy5pc0VsaWdpYmxlKG4pKXtwPVtuLmdlb21ldHJ5XTtmb3IodmFyIHQ9MDt0PG0ubGVuZ3RoOysrdCl7cT1tW3RdO2Zvcih2YXIgdT0wO3U8cC5sZW5ndGg7Kyt1KWlmKGU9cFt1XSxxLmdldEJvdW5kcygpLmludGVyc2VjdHNCb3VuZHMoZS5nZXRCb3VuZHMoKSkmJihlPXEuc3BsaXQoZSxsKSkpZj10aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoImJlZm9yZXNwbGl0Iix7c291cmNlOmEsdGFyZ2V0Om59KSwhMSE9PWYmJihrJiYoZj1lWzBdLDE8Zi5sZW5ndGgmJihmLnVuc2hpZnQodCwxKSxBcnJheS5wcm90b3R5cGUuc3BsaWNlLmFwcGx5KG0sZiksdCs9Zi5sZW5ndGgtMyksZT1lWzFdKSwxPGUubGVuZ3RoJiYoZS51bnNoaWZ0KHUsMSksQXJyYXkucHJvdG90eXBlLnNwbGljZS5hcHBseShwLGUpLHUrPWUubGVuZ3RoLTMpKX1wJiYxPHAubGVuZ3RoJiYodGhpcy5nZW9tc1RvRmVhdHVyZXMobixwKSx0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoInNwbGl0Iix7b3JpZ2luYWw6biwKZmVhdHVyZXM6cH0pLEFycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KGcscCksaC5wdXNoKG4pLGM9ITApfW0mJjE8bS5sZW5ndGgmJih0aGlzLmdlb21zVG9GZWF0dXJlcyhhLG0pLHRoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgic3BsaXQiLHtvcmlnaW5hbDphLGZlYXR1cmVzOm19KSxBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShnLG0pLGgucHVzaChhKSxiPSEwKTtpZihifHxjKXtpZih0aGlzLmRlZmVyRGVsZXRlKXtkPVtdO3I9MDtmb3Iocz1oLmxlbmd0aDtyPHM7KytyKWM9aFtyXSxjLnN0YXRlPT09T3BlbkxheWVycy5TdGF0ZS5JTlNFUlQ/ZC5wdXNoKGMpOihjLnN0YXRlPU9wZW5MYXllcnMuU3RhdGUuREVMRVRFLHRoaXMubGF5ZXIuZHJhd0ZlYXR1cmUoYykpO3RoaXMubGF5ZXIuZGVzdHJveUZlYXR1cmVzKGQse3NpbGVudDohMH0pO3I9MDtmb3Iocz1nLmxlbmd0aDtyPHM7KytyKWdbcl0uc3RhdGU9T3BlbkxheWVycy5TdGF0ZS5JTlNFUlR9ZWxzZSB0aGlzLmxheWVyLmRlc3Ryb3lGZWF0dXJlcyhoLAp7c2lsZW50OiEwfSk7dGhpcy5sYXllci5hZGRGZWF0dXJlcyhnLHtzaWxlbnQ6ITB9KTt0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoImFmdGVyc3BsaXQiLHtzb3VyY2U6YSxmZWF0dXJlczpnfSl9fXJldHVybiBifSxnZW9tc1RvRmVhdHVyZXM6ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLmNsb25lKCk7ZGVsZXRlIGMuZ2VvbWV0cnk7Zm9yKHZhciBkLGU9MCxmPWIubGVuZ3RoO2U8ZjsrK2UpZD1jLmNsb25lKCksZC5nZW9tZXRyeT1iW2VdLGQuc3RhdGU9T3BlbkxheWVycy5TdGF0ZS5JTlNFUlQsYltlXT1kfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5hY3RpdmUmJnRoaXMuZGVhY3RpdmF0ZSgpO09wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuZGVzdHJveS5jYWxsKHRoaXMpfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkNvbnRyb2wuU3BsaXQifSk7T3BlbkxheWVycy5MYXllci5XTVRTPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5MYXllci5HcmlkLHtpc0Jhc2VMYXllcjohMCx2ZXJzaW9uOiIxLjAuMCIscmVxdWVzdEVuY29kaW5nOiJLVlAiLHVybDpudWxsLGxheWVyOm51bGwsbWF0cml4U2V0Om51bGwsc3R5bGU6bnVsbCxmb3JtYXQ6ImltYWdlL2pwZWciLHRpbGVPcmlnaW46bnVsbCx0aWxlRnVsbEV4dGVudDpudWxsLGZvcm1hdFN1ZmZpeDpudWxsLG1hdHJpeElkczpudWxsLGRpbWVuc2lvbnM6bnVsbCxwYXJhbXM6bnVsbCx6b29tT2Zmc2V0OjAsc2VydmVyUmVzb2x1dGlvbnM6bnVsbCxmb3JtYXRTdWZmaXhNYXA6eyJpbWFnZS9wbmciOiJwbmciLCJpbWFnZS9wbmc4IjoicG5nIiwiaW1hZ2UvcG5nMjQiOiJwbmciLCJpbWFnZS9wbmczMiI6InBuZyIscG5nOiJwbmciLCJpbWFnZS9qcGVnIjoianBnIiwiaW1hZ2UvanBnIjoianBnIixqcGVnOiJqcGciLGpwZzoianBnIn0sbWF0cml4Om51bGwsaW5pdGlhbGl6ZTpmdW5jdGlvbihhKXt2YXIgYj0Ke3VybDohMCxsYXllcjohMCxzdHlsZTohMCxtYXRyaXhTZXQ6ITB9LGM7Zm9yKGMgaW4gYilpZighKGMgaW4gYSkpdGhyb3cgRXJyb3IoIk1pc3NpbmcgcHJvcGVydHkgJyIrYysiJyBpbiBsYXllciBjb25maWd1cmF0aW9uLiIpO2EucGFyYW1zPU9wZW5MYXllcnMuVXRpbC51cHBlckNhc2VPYmplY3QoYS5wYXJhbXMpO09wZW5MYXllcnMuTGF5ZXIuR3JpZC5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLFthLm5hbWUsYS51cmwsYS5wYXJhbXMsYV0pO3RoaXMuZm9ybWF0U3VmZml4fHwodGhpcy5mb3JtYXRTdWZmaXg9dGhpcy5mb3JtYXRTdWZmaXhNYXBbdGhpcy5mb3JtYXRdfHx0aGlzLmZvcm1hdC5zcGxpdCgiLyIpLnBvcCgpKTtpZih0aGlzLm1hdHJpeElkcyYmKGE9dGhpcy5tYXRyaXhJZHMubGVuZ3RoKSYmInN0cmluZyI9PT10eXBlb2YgdGhpcy5tYXRyaXhJZHNbMF0pZm9yKGI9dGhpcy5tYXRyaXhJZHMsdGhpcy5tYXRyaXhJZHM9QXJyYXkoYSksYz0wO2M8YTsrK2MpdGhpcy5tYXRyaXhJZHNbY109CntpZGVudGlmaWVyOmJbY119fSxzZXRNYXA6ZnVuY3Rpb24oKXtPcGVuTGF5ZXJzLkxheWVyLkdyaWQucHJvdG90eXBlLnNldE1hcC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LHVwZGF0ZU1hdHJpeFByb3BlcnRpZXM6ZnVuY3Rpb24oKXtpZih0aGlzLm1hdHJpeD10aGlzLmdldE1hdHJpeCgpKXRoaXMubWF0cml4LnRvcExlZnRDb3JuZXImJih0aGlzLnRpbGVPcmlnaW49dGhpcy5tYXRyaXgudG9wTGVmdENvcm5lciksdGhpcy5tYXRyaXgudGlsZVdpZHRoJiZ0aGlzLm1hdHJpeC50aWxlSGVpZ2h0JiYodGhpcy50aWxlU2l6ZT1uZXcgT3BlbkxheWVycy5TaXplKHRoaXMubWF0cml4LnRpbGVXaWR0aCx0aGlzLm1hdHJpeC50aWxlSGVpZ2h0KSksdGhpcy50aWxlT3JpZ2lufHwodGhpcy50aWxlT3JpZ2luPW5ldyBPcGVuTGF5ZXJzLkxvbkxhdCh0aGlzLm1heEV4dGVudC5sZWZ0LHRoaXMubWF4RXh0ZW50LnRvcCkpLHRoaXMudGlsZUZ1bGxFeHRlbnR8fCh0aGlzLnRpbGVGdWxsRXh0ZW50PQp0aGlzLm1heEV4dGVudCl9LG1vdmVUbzpmdW5jdGlvbihhLGIsYyl7IWImJnRoaXMubWF0cml4fHx0aGlzLnVwZGF0ZU1hdHJpeFByb3BlcnRpZXMoKTtyZXR1cm4gT3BlbkxheWVycy5MYXllci5HcmlkLnByb3RvdHlwZS5tb3ZlVG8uYXBwbHkodGhpcyxhcmd1bWVudHMpfSxjbG9uZTpmdW5jdGlvbihhKXtudWxsPT1hJiYoYT1uZXcgT3BlbkxheWVycy5MYXllci5XTVRTKHRoaXMub3B0aW9ucykpO3JldHVybiBhPU9wZW5MYXllcnMuTGF5ZXIuR3JpZC5wcm90b3R5cGUuY2xvbmUuYXBwbHkodGhpcyxbYV0pfSxnZXRJZGVudGlmaWVyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0U2VydmVyWm9vbSgpfSxnZXRNYXRyaXg6ZnVuY3Rpb24oKXt2YXIgYTtpZih0aGlzLm1hdHJpeElkcyYmMCE9PXRoaXMubWF0cml4SWRzLmxlbmd0aClpZigic2NhbGVEZW5vbWluYXRvciJpbiB0aGlzLm1hdHJpeElkc1swXSlmb3IodmFyIGI9T3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0gqT3BlbkxheWVycy5JTkNIRVNfUEVSX1VOSVRbdGhpcy51bml0c10qCnRoaXMuZ2V0U2VydmVyUmVzb2x1dGlvbigpLzIuOEUtNCxjPU51bWJlci5QT1NJVElWRV9JTkZJTklUWSxkLGU9MCxmPXRoaXMubWF0cml4SWRzLmxlbmd0aDtlPGY7KytlKWQ9TWF0aC5hYnMoMS10aGlzLm1hdHJpeElkc1tlXS5zY2FsZURlbm9taW5hdG9yL2IpLGQ8YyYmKGM9ZCxhPXRoaXMubWF0cml4SWRzW2VdKTtlbHNlIGE9dGhpcy5tYXRyaXhJZHNbdGhpcy5nZXRJZGVudGlmaWVyKCldO2Vsc2UgYT17aWRlbnRpZmllcjp0aGlzLmdldElkZW50aWZpZXIoKX07cmV0dXJuIGF9LGdldFRpbGVJbmZvOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZ2V0U2VydmVyUmVzb2x1dGlvbigpLGM9KGEubG9uLXRoaXMudGlsZU9yaWdpbi5sb24pLyhiKnRoaXMudGlsZVNpemUudyk7YT0odGhpcy50aWxlT3JpZ2luLmxhdC1hLmxhdCkvKGIqdGhpcy50aWxlU2l6ZS5oKTt2YXIgYj1NYXRoLmZsb29yKGMpLGQ9TWF0aC5mbG9vcihhKTtyZXR1cm57Y29sOmIscm93OmQsaTpNYXRoLmZsb29yKChjLQpiKSp0aGlzLnRpbGVTaXplLncpLGo6TWF0aC5mbG9vcigoYS1kKSp0aGlzLnRpbGVTaXplLmgpfX0sZ2V0VVJMOmZ1bmN0aW9uKGEpe2E9dGhpcy5hZGp1c3RCb3VuZHMoYSk7dmFyIGI9IiI7aWYoIXRoaXMudGlsZUZ1bGxFeHRlbnR8fHRoaXMudGlsZUZ1bGxFeHRlbnQuaW50ZXJzZWN0c0JvdW5kcyhhKSl7YT1hLmdldENlbnRlckxvbkxhdCgpO3ZhciBjPXRoaXMuZ2V0VGlsZUluZm8oYSk7YT10aGlzLmRpbWVuc2lvbnM7dmFyIGQsYj1PcGVuTGF5ZXJzLlV0aWwuaXNBcnJheSh0aGlzLnVybCk/dGhpcy5zZWxlY3RVcmwoW3RoaXMudmVyc2lvbix0aGlzLnN0eWxlLHRoaXMubWF0cml4U2V0LHRoaXMubWF0cml4LmlkZW50aWZpZXIsYy5yb3csYy5jb2xdLmpvaW4oKSx0aGlzLnVybCk6dGhpcy51cmw7aWYoIlJFU1QiPT09dGhpcy5yZXF1ZXN0RW5jb2RpbmcudG9VcHBlckNhc2UoKSlpZihkPXRoaXMucGFyYW1zLC0xIT09Yi5pbmRleE9mKCJ7Iikpe2I9Yi5yZXBsYWNlKC9cey9nLAoiJHsiKTtjPXtzdHlsZTp0aGlzLnN0eWxlLFN0eWxlOnRoaXMuc3R5bGUsVGlsZU1hdHJpeFNldDp0aGlzLm1hdHJpeFNldCxUaWxlTWF0cml4OnRoaXMubWF0cml4LmlkZW50aWZpZXIsVGlsZVJvdzpjLnJvdyxUaWxlQ29sOmMuY29sfTtpZihhKXt2YXIgZSxmO2ZvcihmPWEubGVuZ3RoLTE7MDw9ZjstLWYpZT1hW2ZdLGNbZV09ZFtlLnRvVXBwZXJDYXNlKCldfWI9T3BlbkxheWVycy5TdHJpbmcuZm9ybWF0KGIsYyl9ZWxzZXtlPXRoaXMudmVyc2lvbisiLyIrdGhpcy5sYXllcisiLyIrdGhpcy5zdHlsZSsiLyI7aWYoYSlmb3IoZj0wO2Y8YS5sZW5ndGg7ZisrKWRbYVtmXV0mJihlPWUrZFthW2ZdXSsiLyIpO2U9ZSt0aGlzLm1hdHJpeFNldCsiLyIrdGhpcy5tYXRyaXguaWRlbnRpZmllcisiLyIrYy5yb3crIi8iK2MuY29sKyIuIit0aGlzLmZvcm1hdFN1ZmZpeDtiLm1hdGNoKC9cLyQvKXx8KGIrPSIvIik7Yis9ZX1lbHNlIktWUCI9PT10aGlzLnJlcXVlc3RFbmNvZGluZy50b1VwcGVyQ2FzZSgpJiYKKGQ9e1NFUlZJQ0U6IldNVFMiLFJFUVVFU1Q6IkdldFRpbGUiLFZFUlNJT046dGhpcy52ZXJzaW9uLExBWUVSOnRoaXMubGF5ZXIsU1RZTEU6dGhpcy5zdHlsZSxUSUxFTUFUUklYU0VUOnRoaXMubWF0cml4U2V0LFRJTEVNQVRSSVg6dGhpcy5tYXRyaXguaWRlbnRpZmllcixUSUxFUk9XOmMucm93LFRJTEVDT0w6Yy5jb2wsRk9STUFUOnRoaXMuZm9ybWF0fSxiPU9wZW5MYXllcnMuTGF5ZXIuR3JpZC5wcm90b3R5cGUuZ2V0RnVsbFJlcXVlc3RTdHJpbmcuYXBwbHkodGhpcyxbZF0pKX1yZXR1cm4gYn0sbWVyZ2VOZXdQYXJhbXM6ZnVuY3Rpb24oYSl7aWYoIktWUCI9PT10aGlzLnJlcXVlc3RFbmNvZGluZy50b1VwcGVyQ2FzZSgpKXJldHVybiBPcGVuTGF5ZXJzLkxheWVyLkdyaWQucHJvdG90eXBlLm1lcmdlTmV3UGFyYW1zLmFwcGx5KHRoaXMsW09wZW5MYXllcnMuVXRpbC51cHBlckNhc2VPYmplY3QoYSldKX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5MYXllci5XTVRTIn0pO09wZW5MYXllcnMuUHJvdG9jb2wuU09TLnYxXzBfMD1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuUHJvdG9jb2wse2ZvaXM6bnVsbCxmb3JtYXRPcHRpb25zOm51bGwsaW5pdGlhbGl6ZTpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLlByb3RvY29sLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsW2FdKTthLmZvcm1hdHx8KHRoaXMuZm9ybWF0PW5ldyBPcGVuTGF5ZXJzLkZvcm1hdC5TT1NHZXRGZWF0dXJlT2ZJbnRlcmVzdCh0aGlzLmZvcm1hdE9wdGlvbnMpKX0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMub3B0aW9ucyYmIXRoaXMub3B0aW9ucy5mb3JtYXQmJnRoaXMuZm9ybWF0LmRlc3Ryb3koKTt0aGlzLmZvcm1hdD1udWxsO09wZW5MYXllcnMuUHJvdG9jb2wucHJvdG90eXBlLmRlc3Ryb3kuYXBwbHkodGhpcyl9LHJlYWQ6ZnVuY3Rpb24oYSl7YT1PcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHt9LGEpO09wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKGEsdGhpcy5vcHRpb25zfHwKe30pO3ZhciBiPW5ldyBPcGVuTGF5ZXJzLlByb3RvY29sLlJlc3BvbnNlKHtyZXF1ZXN0VHlwZToicmVhZCJ9KSxjPXRoaXMuZm9ybWF0LGM9T3BlbkxheWVycy5Gb3JtYXQuWE1MLnByb3RvdHlwZS53cml0ZS5hcHBseShjLFtjLndyaXRlTm9kZSgic29zOkdldEZlYXR1cmVPZkludGVyZXN0Iix7Zm9pczp0aGlzLmZvaXN9KV0pO2IucHJpdj1PcGVuTGF5ZXJzLlJlcXVlc3QuUE9TVCh7dXJsOmEudXJsLGNhbGxiYWNrOnRoaXMuY3JlYXRlQ2FsbGJhY2sodGhpcy5oYW5kbGVSZWFkLGIsYSksZGF0YTpjfSk7cmV0dXJuIGJ9LGhhbmRsZVJlYWQ6ZnVuY3Rpb24oYSxiKXtpZihiLmNhbGxiYWNrKXt2YXIgYz1hLnByaXY7MjAwPD1jLnN0YXR1cyYmMzAwPmMuc3RhdHVzPyhhLmZlYXR1cmVzPXRoaXMucGFyc2VGZWF0dXJlcyhjKSxhLmNvZGU9T3BlbkxheWVycy5Qcm90b2NvbC5SZXNwb25zZS5TVUNDRVNTKTphLmNvZGU9T3BlbkxheWVycy5Qcm90b2NvbC5SZXNwb25zZS5GQUlMVVJFOwpiLmNhbGxiYWNrLmNhbGwoYi5zY29wZSxhKX19LHBhcnNlRmVhdHVyZXM6ZnVuY3Rpb24oYSl7dmFyIGI9YS5yZXNwb25zZVhNTDtiJiZiLmRvY3VtZW50RWxlbWVudHx8KGI9YS5yZXNwb25zZVRleHQpO3JldHVybiFifHwwPj1iLmxlbmd0aD9udWxsOnRoaXMuZm9ybWF0LnJlYWQoYil9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuUHJvdG9jb2wuU09TLnYxXzBfMCJ9KTtPcGVuTGF5ZXJzLkxheWVyLkthTWFwQ2FjaGU9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkxheWVyLkthTWFwLHtJTUFHRV9FWFRFTlNJT05TOntqcGVnOiJqcGciLGdpZjoiZ2lmIixwbmc6InBuZyIscG5nODoicG5nIixwbmcyNDoicG5nIixkaXRoZXJlZDoicG5nIn0sREVGQVVMVF9GT1JNQVQ6ImpwZWciLGluaXRpYWxpemU6ZnVuY3Rpb24oYSxiLGMsZCl7T3BlbkxheWVycy5MYXllci5LYU1hcC5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5leHRlbnNpb249dGhpcy5JTUFHRV9FWFRFTlNJT05TW3RoaXMucGFyYW1zLmkudG9Mb3dlckNhc2UoKXx8dGhpcy5ERUZBVUxUX0ZPUk1BVF19LGdldFVSTDpmdW5jdGlvbihhKXthPXRoaXMuYWRqdXN0Qm91bmRzKGEpO3ZhciBiPXRoaXMubWFwLmdldFJlc29sdXRpb24oKSxjPU1hdGgucm91bmQoMUU0KnRoaXMubWFwLmdldFNjYWxlKCkpLzFFNCxkPU1hdGgucm91bmQoYS5sZWZ0L2IpO2E9Ci1NYXRoLnJvdW5kKGEudG9wL2IpO3ZhciBiPU1hdGguZmxvb3IoZC90aGlzLnRpbGVTaXplLncvdGhpcy5wYXJhbXMubWV0YVRpbGVTaXplLncpKnRoaXMudGlsZVNpemUudyp0aGlzLnBhcmFtcy5tZXRhVGlsZVNpemUudyxlPU1hdGguZmxvb3IoYS90aGlzLnRpbGVTaXplLmgvdGhpcy5wYXJhbXMubWV0YVRpbGVTaXplLmgpKnRoaXMudGlsZVNpemUuaCp0aGlzLnBhcmFtcy5tZXRhVGlsZVNpemUuaCxjPVsiLyIsdGhpcy5wYXJhbXMubWFwLCIvIixjLCIvIix0aGlzLnBhcmFtcy5nLnJlcGxhY2UoL1xzL2csIl8iKSwiL2RlZi90IixlLCIvbCIsYiwiL3QiLGEsImwiLGQsIi4iLHRoaXMuZXh0ZW5zaW9uXSxkPXRoaXMudXJsO09wZW5MYXllcnMuVXRpbC5pc0FycmF5KGQpJiYoZD10aGlzLnNlbGVjdFVybChjLmpvaW4oIiIpLGQpKTtyZXR1cm4gZCtjLmpvaW4oIiIpfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkxheWVyLkthTWFwQ2FjaGUifSk7T3BlbkxheWVycy5Qcm90b2NvbC5XRlMudjFfMV8wPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Qcm90b2NvbC5XRlMudjEse3ZlcnNpb246IjEuMS4wIixpbml0aWFsaXplOmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuUHJvdG9jb2wuV0ZTLnYxLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLm91dHB1dEZvcm1hdCYmIXRoaXMucmVhZEZvcm1hdCYmKCJnbWwyIj09dGhpcy5vdXRwdXRGb3JtYXQudG9Mb3dlckNhc2UoKT90aGlzLnJlYWRGb3JtYXQ9bmV3IE9wZW5MYXllcnMuRm9ybWF0LkdNTC52Mih7ZmVhdHVyZVR5cGU6dGhpcy5mZWF0dXJlVHlwZSxmZWF0dXJlTlM6dGhpcy5mZWF0dXJlTlMsZ2VvbWV0cnlOYW1lOnRoaXMuZ2VvbWV0cnlOYW1lfSk6Impzb24iPT10aGlzLm91dHB1dEZvcm1hdC50b0xvd2VyQ2FzZSgpJiYodGhpcy5yZWFkRm9ybWF0PW5ldyBPcGVuTGF5ZXJzLkZvcm1hdC5HZW9KU09OKSl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuUHJvdG9jb2wuV0ZTLnYxXzFfMCJ9KTtPcGVuTGF5ZXJzLkZvcm1hdC5XTVNDYXBhYmlsaXRpZXMudjFfMV8xPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Gb3JtYXQuV01TQ2FwYWJpbGl0aWVzLnYxXzEse3ZlcnNpb246IjEuMS4xIixyZWFkZXJzOnt3bXM6T3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoe1NSUzpmdW5jdGlvbihhLGIpe2Iuc3JzW3RoaXMuZ2V0Q2hpbGRWYWx1ZShhKV09ITB9fSxPcGVuTGF5ZXJzLkZvcm1hdC5XTVNDYXBhYmlsaXRpZXMudjFfMS5wcm90b3R5cGUucmVhZGVycy53bXMpfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkZvcm1hdC5XTVNDYXBhYmlsaXRpZXMudjFfMV8xIn0pO09wZW5MYXllcnMuRm9ybWF0LldNU0NhcGFiaWxpdGllcy52MV8xXzFfV01TQz1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuRm9ybWF0LldNU0NhcGFiaWxpdGllcy52MV8xXzEse3ZlcnNpb246IjEuMS4xIixwcm9maWxlOiJXTVNDIixyZWFkZXJzOnt3bXM6T3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoe1ZlbmRvclNwZWNpZmljQ2FwYWJpbGl0aWVzOmZ1bmN0aW9uKGEsYil7Yi52ZW5kb3JTcGVjaWZpYz17dGlsZVNldHM6W119O3RoaXMucmVhZENoaWxkTm9kZXMoYSxiLnZlbmRvclNwZWNpZmljKX0sVGlsZVNldDpmdW5jdGlvbihhLGIpe3ZhciBjPXtzcnM6e30sYmJveDp7fSxyZXNvbHV0aW9uczpbXX07dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGMpO2IudGlsZVNldHMucHVzaChjKX0sUmVzb2x1dGlvbnM6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9dGhpcy5nZXRDaGlsZFZhbHVlKGEpLnNwbGl0KCIgIiksZD0wLGU9Yy5sZW5ndGg7ZDxlO2QrKykiIiE9Y1tkXSYmYi5yZXNvbHV0aW9ucy5wdXNoKHBhcnNlRmxvYXQoY1tkXSkpfSwKV2lkdGg6ZnVuY3Rpb24oYSxiKXtiLndpZHRoPXBhcnNlSW50KHRoaXMuZ2V0Q2hpbGRWYWx1ZShhKSl9LEhlaWdodDpmdW5jdGlvbihhLGIpe2IuaGVpZ2h0PXBhcnNlSW50KHRoaXMuZ2V0Q2hpbGRWYWx1ZShhKSl9LExheWVyczpmdW5jdGlvbihhLGIpe2IubGF5ZXJzPXRoaXMuZ2V0Q2hpbGRWYWx1ZShhKX0sU3R5bGVzOmZ1bmN0aW9uKGEsYil7Yi5zdHlsZXM9dGhpcy5nZXRDaGlsZFZhbHVlKGEpfX0sT3BlbkxheWVycy5Gb3JtYXQuV01TQ2FwYWJpbGl0aWVzLnYxXzFfMS5wcm90b3R5cGUucmVhZGVycy53bXMpfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkZvcm1hdC5XTVNDYXBhYmlsaXRpZXMudjFfMV8xX1dNU0MifSk7T3BlbkxheWVycy5Db250cm9sLkxheWVyU3dpdGNoZXI9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkNvbnRyb2wse2xheWVyU3RhdGVzOm51bGwsbGF5ZXJzRGl2Om51bGwsYmFzZUxheWVyc0RpdjpudWxsLGJhc2VMYXllcnM6bnVsbCxkYXRhTGJsOm51bGwsZGF0YUxheWVyc0RpdjpudWxsLGRhdGFMYXllcnM6bnVsbCxtaW5pbWl6ZURpdjpudWxsLG1heGltaXplRGl2Om51bGwsYXNjZW5kaW5nOiEwLGluaXRpYWxpemU6ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5Db250cm9sLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLmxheWVyU3RhdGVzPVtdfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5jbGVhckxheWVyc0FycmF5KCJiYXNlIik7dGhpcy5jbGVhckxheWVyc0FycmF5KCJkYXRhIik7dGhpcy5tYXAuZXZlbnRzLnVuKHtidXR0b25jbGljazp0aGlzLm9uQnV0dG9uQ2xpY2ssYWRkbGF5ZXI6dGhpcy5yZWRyYXcsY2hhbmdlbGF5ZXI6dGhpcy5yZWRyYXcsCnJlbW92ZWxheWVyOnRoaXMucmVkcmF3LGNoYW5nZWJhc2VsYXllcjp0aGlzLnJlZHJhdyxzY29wZTp0aGlzfSk7dGhpcy5ldmVudHMudW5yZWdpc3RlcigiYnV0dG9uY2xpY2siLHRoaXMsdGhpcy5vbkJ1dHRvbkNsaWNrKTtPcGVuTGF5ZXJzLkNvbnRyb2wucHJvdG90eXBlLmRlc3Ryb3kuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxzZXRNYXA6ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5Db250cm9sLnByb3RvdHlwZS5zZXRNYXAuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMubWFwLmV2ZW50cy5vbih7YWRkbGF5ZXI6dGhpcy5yZWRyYXcsY2hhbmdlbGF5ZXI6dGhpcy5yZWRyYXcscmVtb3ZlbGF5ZXI6dGhpcy5yZWRyYXcsY2hhbmdlYmFzZWxheWVyOnRoaXMucmVkcmF3LHNjb3BlOnRoaXN9KTt0aGlzLm91dHNpZGVWaWV3cG9ydD8odGhpcy5ldmVudHMuYXR0YWNoVG9FbGVtZW50KHRoaXMuZGl2KSx0aGlzLmV2ZW50cy5yZWdpc3RlcigiYnV0dG9uY2xpY2siLHRoaXMsdGhpcy5vbkJ1dHRvbkNsaWNrKSk6CnRoaXMubWFwLmV2ZW50cy5yZWdpc3RlcigiYnV0dG9uY2xpY2siLHRoaXMsdGhpcy5vbkJ1dHRvbkNsaWNrKX0sZHJhdzpmdW5jdGlvbigpe09wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuZHJhdy5hcHBseSh0aGlzKTt0aGlzLmxvYWRDb250ZW50cygpO3RoaXMub3V0c2lkZVZpZXdwb3J0fHx0aGlzLm1pbmltaXplQ29udHJvbCgpO3RoaXMucmVkcmF3KCk7cmV0dXJuIHRoaXMuZGl2fSxvbkJ1dHRvbkNsaWNrOmZ1bmN0aW9uKGEpe2E9YS5idXR0b25FbGVtZW50O2E9PT10aGlzLm1pbmltaXplRGl2P3RoaXMubWluaW1pemVDb250cm9sKCk6YT09PXRoaXMubWF4aW1pemVEaXY/dGhpcy5tYXhpbWl6ZUNvbnRyb2woKTphLl9sYXllclN3aXRjaGVyPT09dGhpcy5pZCYmKGFbImZvciJdJiYoYT1kb2N1bWVudC5nZXRFbGVtZW50QnlJZChhWyJmb3IiXSkpLGEuZGlzYWJsZWR8fCgicmFkaW8iPT1hLnR5cGU/KGEuY2hlY2tlZD0hMCx0aGlzLm1hcC5zZXRCYXNlTGF5ZXIodGhpcy5tYXAuZ2V0TGF5ZXIoYS5fbGF5ZXIpKSk6CihhLmNoZWNrZWQ9IWEuY2hlY2tlZCx0aGlzLnVwZGF0ZU1hcCgpKSkpfSxjbGVhckxheWVyc0FycmF5OmZ1bmN0aW9uKGEpe3RoaXNbYSsiTGF5ZXJzRGl2Il0uaW5uZXJIVE1MPSIiO3RoaXNbYSsiTGF5ZXJzIl09W119LGNoZWNrUmVkcmF3OmZ1bmN0aW9uKCl7aWYoIXRoaXMubGF5ZXJTdGF0ZXMubGVuZ3RofHx0aGlzLm1hcC5sYXllcnMubGVuZ3RoIT10aGlzLmxheWVyU3RhdGVzLmxlbmd0aClyZXR1cm4hMDtmb3IodmFyIGE9MCxiPXRoaXMubGF5ZXJTdGF0ZXMubGVuZ3RoO2E8YjthKyspe3ZhciBjPXRoaXMubGF5ZXJTdGF0ZXNbYV0sZD10aGlzLm1hcC5sYXllcnNbYV07aWYoYy5uYW1lIT1kLm5hbWV8fGMuaW5SYW5nZSE9ZC5pblJhbmdlfHxjLmlkIT1kLmlkfHxjLnZpc2liaWxpdHkhPWQudmlzaWJpbGl0eSlyZXR1cm4hMH1yZXR1cm4hMX0scmVkcmF3OmZ1bmN0aW9uKCl7aWYoIXRoaXMuY2hlY2tSZWRyYXcoKSlyZXR1cm4gdGhpcy5kaXY7dGhpcy5jbGVhckxheWVyc0FycmF5KCJiYXNlIik7CnRoaXMuY2xlYXJMYXllcnNBcnJheSgiZGF0YSIpO3ZhciBhPSExLGI9ITEsYz10aGlzLm1hcC5sYXllcnMubGVuZ3RoO3RoaXMubGF5ZXJTdGF0ZXM9QXJyYXkoYyk7Zm9yKHZhciBkPTA7ZDxjO2QrKyl7dmFyIGU9dGhpcy5tYXAubGF5ZXJzW2RdO3RoaXMubGF5ZXJTdGF0ZXNbZF09e25hbWU6ZS5uYW1lLHZpc2liaWxpdHk6ZS52aXNpYmlsaXR5LGluUmFuZ2U6ZS5pblJhbmdlLGlkOmUuaWR9fXZhciBmPXRoaXMubWFwLmxheWVycy5zbGljZSgpO3RoaXMuYXNjZW5kaW5nfHxmLnJldmVyc2UoKTtkPTA7Zm9yKGM9Zi5sZW5ndGg7ZDxjO2QrKyl7dmFyIGU9ZltkXSxnPWUuaXNCYXNlTGF5ZXI7aWYoZS5kaXNwbGF5SW5MYXllclN3aXRjaGVyKXtnP2I9ITA6YT0hMDt2YXIgaD1nP2U9PXRoaXMubWFwLmJhc2VMYXllcjplLmdldFZpc2liaWxpdHkoKSxrPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImlucHV0IiksbD1PcGVuTGF5ZXJzLlV0aWwuY3JlYXRlVW5pcXVlSUQodGhpcy5pZCsKIl9pbnB1dF8iKTtrLmlkPWw7ay5uYW1lPWc/dGhpcy5pZCsiX2Jhc2VMYXllcnMiOmUubmFtZTtrLnR5cGU9Zz8icmFkaW8iOiJjaGVja2JveCI7ay52YWx1ZT1lLm5hbWU7ay5jaGVja2VkPWg7ay5kZWZhdWx0Q2hlY2tlZD1oO2suY2xhc3NOYW1lPSJvbEJ1dHRvbiI7ay5fbGF5ZXI9ZS5pZDtrLl9sYXllclN3aXRjaGVyPXRoaXMuaWQ7Z3x8ZS5pblJhbmdlfHwoay5kaXNhYmxlZD0hMCk7aD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJsYWJlbCIpO2hbImZvciJdPWsuaWQ7T3BlbkxheWVycy5FbGVtZW50LmFkZENsYXNzKGgsImxhYmVsU3BhbiBvbEJ1dHRvbiIpO2guX2xheWVyPWUuaWQ7aC5fbGF5ZXJTd2l0Y2hlcj10aGlzLmlkO2d8fGUuaW5SYW5nZXx8KGguc3R5bGUuY29sb3I9ImdyYXkiKTtoLmlubmVySFRNTD1lLm5hbWU7aC5zdHlsZS52ZXJ0aWNhbEFsaWduPWc/ImJvdHRvbSI6ImJhc2VsaW5lIjtsPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImJyIik7KGc/dGhpcy5iYXNlTGF5ZXJzOgp0aGlzLmRhdGFMYXllcnMpLnB1c2goe2xheWVyOmUsaW5wdXRFbGVtOmssbGFiZWxTcGFuOmh9KTtlPWc/dGhpcy5iYXNlTGF5ZXJzRGl2OnRoaXMuZGF0YUxheWVyc0RpdjtlLmFwcGVuZENoaWxkKGspO2UuYXBwZW5kQ2hpbGQoaCk7ZS5hcHBlbmRDaGlsZChsKX19dGhpcy5kYXRhTGJsLnN0eWxlLmRpc3BsYXk9YT8iIjoibm9uZSI7dGhpcy5iYXNlTGJsLnN0eWxlLmRpc3BsYXk9Yj8iIjoibm9uZSI7cmV0dXJuIHRoaXMuZGl2fSx1cGRhdGVNYXA6ZnVuY3Rpb24oKXtmb3IodmFyIGE9MCxiPXRoaXMuYmFzZUxheWVycy5sZW5ndGg7YTxiO2ErKyl7dmFyIGM9dGhpcy5iYXNlTGF5ZXJzW2FdO2MuaW5wdXRFbGVtLmNoZWNrZWQmJnRoaXMubWFwLnNldEJhc2VMYXllcihjLmxheWVyLCExKX1hPTA7Zm9yKGI9dGhpcy5kYXRhTGF5ZXJzLmxlbmd0aDthPGI7YSsrKWM9dGhpcy5kYXRhTGF5ZXJzW2FdLGMubGF5ZXIuc2V0VmlzaWJpbGl0eShjLmlucHV0RWxlbS5jaGVja2VkKX0sbWF4aW1pemVDb250cm9sOmZ1bmN0aW9uKGEpe3RoaXMuZGl2LnN0eWxlLndpZHRoPQoiIjt0aGlzLmRpdi5zdHlsZS5oZWlnaHQ9IiI7dGhpcy5zaG93Q29udHJvbHMoITEpO251bGwhPWEmJk9wZW5MYXllcnMuRXZlbnQuc3RvcChhKX0sbWluaW1pemVDb250cm9sOmZ1bmN0aW9uKGEpe3RoaXMuZGl2LnN0eWxlLndpZHRoPSIwcHgiO3RoaXMuZGl2LnN0eWxlLmhlaWdodD0iMHB4Ijt0aGlzLnNob3dDb250cm9scyghMCk7bnVsbCE9YSYmT3BlbkxheWVycy5FdmVudC5zdG9wKGEpfSxzaG93Q29udHJvbHM6ZnVuY3Rpb24oYSl7dGhpcy5tYXhpbWl6ZURpdi5zdHlsZS5kaXNwbGF5PWE/IiI6Im5vbmUiO3RoaXMubWluaW1pemVEaXYuc3R5bGUuZGlzcGxheT1hPyJub25lIjoiIjt0aGlzLmxheWVyc0Rpdi5zdHlsZS5kaXNwbGF5PWE/Im5vbmUiOiIifSxsb2FkQ29udGVudHM6ZnVuY3Rpb24oKXt0aGlzLmxheWVyc0Rpdj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTt0aGlzLmxheWVyc0Rpdi5pZD10aGlzLmlkKyJfbGF5ZXJzRGl2IjtPcGVuTGF5ZXJzLkVsZW1lbnQuYWRkQ2xhc3ModGhpcy5sYXllcnNEaXYsCiJsYXllcnNEaXYiKTt0aGlzLmJhc2VMYmw9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7dGhpcy5iYXNlTGJsLmlubmVySFRNTD1PcGVuTGF5ZXJzLmkxOG4oIkJhc2UgTGF5ZXIiKTtPcGVuTGF5ZXJzLkVsZW1lbnQuYWRkQ2xhc3ModGhpcy5iYXNlTGJsLCJiYXNlTGJsIik7dGhpcy5iYXNlTGF5ZXJzRGl2PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO09wZW5MYXllcnMuRWxlbWVudC5hZGRDbGFzcyh0aGlzLmJhc2VMYXllcnNEaXYsImJhc2VMYXllcnNEaXYiKTt0aGlzLmRhdGFMYmw9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7dGhpcy5kYXRhTGJsLmlubmVySFRNTD1PcGVuTGF5ZXJzLmkxOG4oIk92ZXJsYXlzIik7T3BlbkxheWVycy5FbGVtZW50LmFkZENsYXNzKHRoaXMuZGF0YUxibCwiZGF0YUxibCIpO3RoaXMuZGF0YUxheWVyc0Rpdj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTtPcGVuTGF5ZXJzLkVsZW1lbnQuYWRkQ2xhc3ModGhpcy5kYXRhTGF5ZXJzRGl2LAoiZGF0YUxheWVyc0RpdiIpO3RoaXMuYXNjZW5kaW5nPyh0aGlzLmxheWVyc0Rpdi5hcHBlbmRDaGlsZCh0aGlzLmJhc2VMYmwpLHRoaXMubGF5ZXJzRGl2LmFwcGVuZENoaWxkKHRoaXMuYmFzZUxheWVyc0RpdiksdGhpcy5sYXllcnNEaXYuYXBwZW5kQ2hpbGQodGhpcy5kYXRhTGJsKSx0aGlzLmxheWVyc0Rpdi5hcHBlbmRDaGlsZCh0aGlzLmRhdGFMYXllcnNEaXYpKToodGhpcy5sYXllcnNEaXYuYXBwZW5kQ2hpbGQodGhpcy5kYXRhTGJsKSx0aGlzLmxheWVyc0Rpdi5hcHBlbmRDaGlsZCh0aGlzLmRhdGFMYXllcnNEaXYpLHRoaXMubGF5ZXJzRGl2LmFwcGVuZENoaWxkKHRoaXMuYmFzZUxibCksdGhpcy5sYXllcnNEaXYuYXBwZW5kQ2hpbGQodGhpcy5iYXNlTGF5ZXJzRGl2KSk7dGhpcy5kaXYuYXBwZW5kQ2hpbGQodGhpcy5sYXllcnNEaXYpO3ZhciBhPU9wZW5MYXllcnMuVXRpbC5nZXRJbWFnZUxvY2F0aW9uKCJsYXllci1zd2l0Y2hlci1tYXhpbWl6ZS5wbmciKTt0aGlzLm1heGltaXplRGl2PQpPcGVuTGF5ZXJzLlV0aWwuY3JlYXRlQWxwaGFJbWFnZURpdigiT3BlbkxheWVyc19Db250cm9sX01heGltaXplRGl2IixudWxsLG51bGwsYSwiYWJzb2x1dGUiKTtPcGVuTGF5ZXJzLkVsZW1lbnQuYWRkQ2xhc3ModGhpcy5tYXhpbWl6ZURpdiwibWF4aW1pemVEaXYgb2xCdXR0b24iKTt0aGlzLm1heGltaXplRGl2LnN0eWxlLmRpc3BsYXk9Im5vbmUiO3RoaXMuZGl2LmFwcGVuZENoaWxkKHRoaXMubWF4aW1pemVEaXYpO2E9T3BlbkxheWVycy5VdGlsLmdldEltYWdlTG9jYXRpb24oImxheWVyLXN3aXRjaGVyLW1pbmltaXplLnBuZyIpO3RoaXMubWluaW1pemVEaXY9T3BlbkxheWVycy5VdGlsLmNyZWF0ZUFscGhhSW1hZ2VEaXYoIk9wZW5MYXllcnNfQ29udHJvbF9NaW5pbWl6ZURpdiIsbnVsbCxudWxsLGEsImFic29sdXRlIik7T3BlbkxheWVycy5FbGVtZW50LmFkZENsYXNzKHRoaXMubWluaW1pemVEaXYsIm1pbmltaXplRGl2IG9sQnV0dG9uIik7dGhpcy5taW5pbWl6ZURpdi5zdHlsZS5kaXNwbGF5PQoibm9uZSI7dGhpcy5kaXYuYXBwZW5kQ2hpbGQodGhpcy5taW5pbWl6ZURpdil9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuQ29udHJvbC5MYXllclN3aXRjaGVyIn0pO09wZW5MYXllcnMuRm9ybWF0LkF0b209T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkZvcm1hdC5YTUwse25hbWVzcGFjZXM6e2F0b206Imh0dHA6Ly93d3cudzMub3JnLzIwMDUvQXRvbSIsZ2VvcnNzOiJodHRwOi8vd3d3Lmdlb3Jzcy5vcmcvZ2VvcnNzIn0sZmVlZFRpdGxlOiJ1bnRpdGxlZCIsZGVmYXVsdEVudHJ5VGl0bGU6InVudGl0bGVkIixnbWxQYXJzZXI6bnVsbCx4eTohMSxyZWFkOmZ1bmN0aW9uKGEpeyJzdHJpbmciPT10eXBlb2YgYSYmKGE9T3BlbkxheWVycy5Gb3JtYXQuWE1MLnByb3RvdHlwZS5yZWFkLmFwcGx5KHRoaXMsW2FdKSk7cmV0dXJuIHRoaXMucGFyc2VGZWF0dXJlcyhhKX0sd3JpdGU6ZnVuY3Rpb24oYSl7dmFyIGI7aWYoT3BlbkxheWVycy5VdGlsLmlzQXJyYXkoYSkpe2I9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJhdG9tOmZlZWQiKTtiLmFwcGVuZENoaWxkKHRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygiYXRvbTp0aXRsZSIse3ZhbHVlOnRoaXMuZmVlZFRpdGxlfSkpOwpmb3IodmFyIGM9MCxkPWEubGVuZ3RoO2M8ZDtjKyspYi5hcHBlbmRDaGlsZCh0aGlzLmJ1aWxkRW50cnlOb2RlKGFbY10pKX1lbHNlIGI9dGhpcy5idWlsZEVudHJ5Tm9kZShhKTtyZXR1cm4gT3BlbkxheWVycy5Gb3JtYXQuWE1MLnByb3RvdHlwZS53cml0ZS5hcHBseSh0aGlzLFtiXSl9LGJ1aWxkQ29udGVudE5vZGU6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJhdG9tOmNvbnRlbnQiLHthdHRyaWJ1dGVzOnt0eXBlOmEudHlwZXx8bnVsbH19KTtpZihhLnNyYyliLnNldEF0dHJpYnV0ZSgic3JjIixhLnNyYyk7ZWxzZSBpZigidGV4dCI9PWEudHlwZXx8bnVsbD09YS50eXBlKWIuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVUZXh0Tm9kZShhLnZhbHVlKSk7ZWxzZSBpZigiaHRtbCI9PWEudHlwZSl7aWYoInN0cmluZyIhPXR5cGVvZiBhLnZhbHVlKXRocm93IkhUTUwgY29udGVudCBtdXN0IGJlIGluIGZvcm0gb2YgYW4gZXNjYXBlZCBzdHJpbmciO2IuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVUZXh0Tm9kZShhLnZhbHVlKSl9ZWxzZSJ4aHRtbCI9PQphLnR5cGU/Yi5hcHBlbmRDaGlsZChhLnZhbHVlKToieGh0bWwiPT1hLnR5cGV8fGEudHlwZS5tYXRjaCgvKFwrfFwvKXhtbCQvKT9iLmFwcGVuZENoaWxkKGEudmFsdWUpOmIuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVUZXh0Tm9kZShhLnZhbHVlKSk7cmV0dXJuIGJ9LGJ1aWxkRW50cnlOb2RlOmZ1bmN0aW9uKGEpe3ZhciBiPWEuYXR0cmlidXRlcyxjPWIuYXRvbXx8e30sZD10aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoImF0b206ZW50cnkiKTtpZihjLmF1dGhvcnMpZm9yKHZhciBlPU9wZW5MYXllcnMuVXRpbC5pc0FycmF5KGMuYXV0aG9ycyk/Yy5hdXRob3JzOltjLmF1dGhvcnNdLGY9MCxnPWUubGVuZ3RoO2Y8ZztmKyspZC5hcHBlbmRDaGlsZCh0aGlzLmJ1aWxkUGVyc29uQ29uc3RydWN0Tm9kZSgiYXV0aG9yIixlW2ZdKSk7aWYoYy5jYXRlZ29yaWVzKWZvcih2YXIgZT1PcGVuTGF5ZXJzLlV0aWwuaXNBcnJheShjLmNhdGVnb3JpZXMpP2MuY2F0ZWdvcmllczpbYy5jYXRlZ29yaWVzXSwKaCxmPTAsZz1lLmxlbmd0aDtmPGc7ZisrKWg9ZVtmXSxkLmFwcGVuZENoaWxkKHRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygiYXRvbTpjYXRlZ29yeSIse2F0dHJpYnV0ZXM6e3Rlcm06aC50ZXJtLHNjaGVtZTpoLnNjaGVtZXx8bnVsbCxsYWJlbDpoLmxhYmVsfHxudWxsfX0pKTtjLmNvbnRlbnQmJmQuYXBwZW5kQ2hpbGQodGhpcy5idWlsZENvbnRlbnROb2RlKGMuY29udGVudCkpO2lmKGMuY29udHJpYnV0b3JzKWZvcihlPU9wZW5MYXllcnMuVXRpbC5pc0FycmF5KGMuY29udHJpYnV0b3JzKT9jLmNvbnRyaWJ1dG9yczpbYy5jb250cmlidXRvcnNdLGY9MCxnPWUubGVuZ3RoO2Y8ZztmKyspZC5hcHBlbmRDaGlsZCh0aGlzLmJ1aWxkUGVyc29uQ29uc3RydWN0Tm9kZSgiY29udHJpYnV0b3IiLGVbZl0pKTthLmZpZCYmZC5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoImF0b206aWQiLHt2YWx1ZTphLmZpZH0pKTtpZihjLmxpbmtzKWZvcihlPU9wZW5MYXllcnMuVXRpbC5pc0FycmF5KGMubGlua3MpPwpjLmxpbmtzOltjLmxpbmtzXSxmPTAsZz1lLmxlbmd0aDtmPGc7ZisrKWg9ZVtmXSxkLmFwcGVuZENoaWxkKHRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygiYXRvbTpsaW5rIix7YXR0cmlidXRlczp7aHJlZjpoLmhyZWYscmVsOmgucmVsfHxudWxsLHR5cGU6aC50eXBlfHxudWxsLGhyZWZsYW5nOmguaHJlZmxhbmd8fG51bGwsdGl0bGU6aC50aXRsZXx8bnVsbCxsZW5ndGg6aC5sZW5ndGh8fG51bGx9fSkpO2MucHVibGlzaGVkJiZkLmFwcGVuZENoaWxkKHRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygiYXRvbTpwdWJsaXNoZWQiLHt2YWx1ZTpjLnB1Ymxpc2hlZH0pKTtjLnJpZ2h0cyYmZC5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZUVsZW1lbnROU1BsdXMoImF0b206cmlnaHRzIix7dmFsdWU6Yy5yaWdodHN9KSk7KGMuc3VtbWFyeXx8Yi5kZXNjcmlwdGlvbikmJmQuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJhdG9tOnN1bW1hcnkiLHt2YWx1ZTpjLnN1bW1hcnl8fApiLmRlc2NyaXB0aW9ufSkpO2QuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJhdG9tOnRpdGxlIix7dmFsdWU6Yy50aXRsZXx8Yi50aXRsZXx8dGhpcy5kZWZhdWx0RW50cnlUaXRsZX0pKTtjLnVwZGF0ZWQmJmQuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJhdG9tOnVwZGF0ZWQiLHt2YWx1ZTpjLnVwZGF0ZWR9KSk7YS5nZW9tZXRyeSYmKGI9dGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJnZW9yc3M6d2hlcmUiKSxiLmFwcGVuZENoaWxkKHRoaXMuYnVpbGRHZW9tZXRyeU5vZGUoYS5nZW9tZXRyeSkpLGQuYXBwZW5kQ2hpbGQoYikpO3JldHVybiBkfSxpbml0R21sUGFyc2VyOmZ1bmN0aW9uKCl7dGhpcy5nbWxQYXJzZXI9bmV3IE9wZW5MYXllcnMuRm9ybWF0LkdNTC52Myh7eHk6dGhpcy54eSxmZWF0dXJlTlM6Imh0dHA6Ly9leGFtcGxlLmNvbSNmZWF0dXJlIixpbnRlcm5hbFByb2plY3Rpb246dGhpcy5pbnRlcm5hbFByb2plY3Rpb24sCmV4dGVybmFsUHJvamVjdGlvbjp0aGlzLmV4dGVybmFsUHJvamVjdGlvbn0pfSxidWlsZEdlb21ldHJ5Tm9kZTpmdW5jdGlvbihhKXt0aGlzLmdtbFBhcnNlcnx8dGhpcy5pbml0R21sUGFyc2VyKCk7cmV0dXJuIHRoaXMuZ21sUGFyc2VyLndyaXRlTm9kZSgiZmVhdHVyZTpfZ2VvbWV0cnkiLGEpLmZpcnN0Q2hpbGR9LGJ1aWxkUGVyc29uQ29uc3RydWN0Tm9kZTpmdW5jdGlvbihhLGIpe3ZhciBjPVsidXJpIiwiZW1haWwiXSxkPXRoaXMuY3JlYXRlRWxlbWVudE5TUGx1cygiYXRvbToiK2EpO2QuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJhdG9tOm5hbWUiLHt2YWx1ZTpiLm5hbWV9KSk7Zm9yKHZhciBlPTAsZj1jLmxlbmd0aDtlPGY7ZSsrKWJbY1tlXV0mJmQuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVFbGVtZW50TlNQbHVzKCJhdG9tOiIrY1tlXSx7dmFsdWU6YltjW2VdXX0pKTtyZXR1cm4gZH0sZ2V0Rmlyc3RDaGlsZFZhbHVlOmZ1bmN0aW9uKGEsYixjLApkKXtyZXR1cm4oYT10aGlzLmdldEVsZW1lbnRzQnlUYWdOYW1lTlMoYSxiLGMpKSYmMDxhLmxlbmd0aD90aGlzLmdldENoaWxkVmFsdWUoYVswXSxkKTpkfSxwYXJzZUZlYXR1cmU6ZnVuY3Rpb24oYSl7dmFyIGI9e30sYz1udWxsLGQ9bnVsbCxlPW51bGwsZj10aGlzLm5hbWVzcGFjZXMuYXRvbTt0aGlzLnBhcnNlUGVyc29uQ29uc3RydWN0cyhhLCJhdXRob3IiLGIpO2Q9dGhpcy5nZXRFbGVtZW50c0J5VGFnTmFtZU5TKGEsZiwiY2F0ZWdvcnkiKTswPGQubGVuZ3RoJiYoYi5jYXRlZ29yaWVzPVtdKTtmb3IodmFyIGc9MCxoPWQubGVuZ3RoO2c8aDtnKyspe2M9e307Yy50ZXJtPWRbZ10uZ2V0QXR0cmlidXRlKCJ0ZXJtIik7aWYoZT1kW2ddLmdldEF0dHJpYnV0ZSgic2NoZW1lIikpYy5zY2hlbWU9ZTtpZihlPWRbZ10uZ2V0QXR0cmlidXRlKCJsYWJlbCIpKWMubGFiZWw9ZTtiLmNhdGVnb3JpZXMucHVzaChjKX1kPXRoaXMuZ2V0RWxlbWVudHNCeVRhZ05hbWVOUyhhLGYsImNvbnRlbnQiKTsKaWYoMDxkLmxlbmd0aCl7Yz17fTtpZihlPWRbMF0uZ2V0QXR0cmlidXRlKCJ0eXBlIikpYy50eXBlPWU7KGU9ZFswXS5nZXRBdHRyaWJ1dGUoInNyYyIpKT9jLnNyYz1lOigidGV4dCI9PWMudHlwZXx8Imh0bWwiPT1jLnR5cGV8fG51bGw9PWMudHlwZT9jLnZhbHVlPXRoaXMuZ2V0Rmlyc3RDaGlsZFZhbHVlKGEsZiwiY29udGVudCIsbnVsbCk6InhodG1sIj09Yy50eXBlfHxjLnR5cGUubWF0Y2goLyhcK3xcLyl4bWwkLyk/Yy52YWx1ZT10aGlzLmdldENoaWxkRWwoZFswXSk6Yy52YWx1ZT10aGlzLmdldEZpcnN0Q2hpbGRWYWx1ZShhLGYsImNvbnRlbnQiLG51bGwpLGIuY29udGVudD1jKX10aGlzLnBhcnNlUGVyc29uQ29uc3RydWN0cyhhLCJjb250cmlidXRvciIsYik7Yi5pZD10aGlzLmdldEZpcnN0Q2hpbGRWYWx1ZShhLGYsImlkIixudWxsKTtkPXRoaXMuZ2V0RWxlbWVudHNCeVRhZ05hbWVOUyhhLGYsImxpbmsiKTswPGQubGVuZ3RoJiYoYi5saW5rcz1BcnJheShkLmxlbmd0aCkpOwpmb3IodmFyIGs9WyJyZWwiLCJ0eXBlIiwiaHJlZmxhbmciLCJ0aXRsZSIsImxlbmd0aCJdLGc9MCxoPWQubGVuZ3RoO2c8aDtnKyspe2M9e307Yy5ocmVmPWRbZ10uZ2V0QXR0cmlidXRlKCJocmVmIik7Zm9yKHZhciBsPTAsbT1rLmxlbmd0aDtsPG07bCsrKShlPWRbZ10uZ2V0QXR0cmlidXRlKGtbbF0pKSYmKGNba1tsXV09ZSk7Yi5saW5rc1tnXT1jfWlmKGM9dGhpcy5nZXRGaXJzdENoaWxkVmFsdWUoYSxmLCJwdWJsaXNoZWQiLG51bGwpKWIucHVibGlzaGVkPWM7aWYoYz10aGlzLmdldEZpcnN0Q2hpbGRWYWx1ZShhLGYsInJpZ2h0cyIsbnVsbCkpYi5yaWdodHM9YztpZihjPXRoaXMuZ2V0Rmlyc3RDaGlsZFZhbHVlKGEsZiwic3VtbWFyeSIsbnVsbCkpYi5zdW1tYXJ5PWM7Yi50aXRsZT10aGlzLmdldEZpcnN0Q2hpbGRWYWx1ZShhLGYsInRpdGxlIixudWxsKTtiLnVwZGF0ZWQ9dGhpcy5nZXRGaXJzdENoaWxkVmFsdWUoYSxmLCJ1cGRhdGVkIixudWxsKTtjPXt0aXRsZTpiLnRpdGxlLApkZXNjcmlwdGlvbjpiLnN1bW1hcnksYXRvbTpifTthPXRoaXMucGFyc2VMb2NhdGlvbnMoYSlbMF07YT1uZXcgT3BlbkxheWVycy5GZWF0dXJlLlZlY3RvcihhLGMpO2EuZmlkPWIuaWQ7cmV0dXJuIGF9LHBhcnNlRmVhdHVyZXM6ZnVuY3Rpb24oYSl7dmFyIGI9W10sYz10aGlzLmdldEVsZW1lbnRzQnlUYWdOYW1lTlMoYSx0aGlzLm5hbWVzcGFjZXMuYXRvbSwiZW50cnkiKTswPT1jLmxlbmd0aCYmKGM9W2FdKTthPTA7Zm9yKHZhciBkPWMubGVuZ3RoO2E8ZDthKyspYi5wdXNoKHRoaXMucGFyc2VGZWF0dXJlKGNbYV0pKTtyZXR1cm4gYn0scGFyc2VMb2NhdGlvbnM6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5uYW1lc3BhY2VzLmdlb3JzcyxjPXtjb21wb25lbnRzOltdfSxkPXRoaXMuZ2V0RWxlbWVudHNCeVRhZ05hbWVOUyhhLGIsIndoZXJlIik7aWYoZCYmMDxkLmxlbmd0aCl7dGhpcy5nbWxQYXJzZXJ8fHRoaXMuaW5pdEdtbFBhcnNlcigpO2Zvcih2YXIgZT0wLGY9ZC5sZW5ndGg7ZTwKZjtlKyspdGhpcy5nbWxQYXJzZXIucmVhZENoaWxkTm9kZXMoZFtlXSxjKX1jPWMuY29tcG9uZW50cztpZigoZD10aGlzLmdldEVsZW1lbnRzQnlUYWdOYW1lTlMoYSxiLCJwb2ludCIpKSYmMDxkLmxlbmd0aClmb3IoZT0wLGY9ZC5sZW5ndGg7ZTxmO2UrKyl7dmFyIGc9T3BlbkxheWVycy5TdHJpbmcudHJpbShkW2VdLmZpcnN0Q2hpbGQubm9kZVZhbHVlKS5zcGxpdCgvXHMrLyk7MiE9Zy5sZW5ndGgmJihnPU9wZW5MYXllcnMuU3RyaW5nLnRyaW0oZFtlXS5maXJzdENoaWxkLm5vZGVWYWx1ZSkuc3BsaXQoL1xzKixccyovKSk7Yy5wdXNoKG5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KGdbMV0sZ1swXSkpfXZhciBoPXRoaXMuZ2V0RWxlbWVudHNCeVRhZ05hbWVOUyhhLGIsImxpbmUiKTtpZihoJiYwPGgubGVuZ3RoKWZvcih2YXIgayxlPTAsZj1oLmxlbmd0aDtlPGY7ZSsrKXtkPU9wZW5MYXllcnMuU3RyaW5nLnRyaW0oaFtlXS5maXJzdENoaWxkLm5vZGVWYWx1ZSkuc3BsaXQoL1xzKy8pOwprPVtdO2Zvcih2YXIgbD0wLG09ZC5sZW5ndGg7bDxtO2wrPTIpZz1uZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludChkW2wrMV0sZFtsXSksay5wdXNoKGcpO2MucHVzaChuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5MaW5lU3RyaW5nKGspKX1pZigoYT10aGlzLmdldEVsZW1lbnRzQnlUYWdOYW1lTlMoYSxiLCJwb2x5Z29uIikpJiYwPGEubGVuZ3RoKWZvcihlPTAsZj1hLmxlbmd0aDtlPGY7ZSsrKXtkPU9wZW5MYXllcnMuU3RyaW5nLnRyaW0oYVtlXS5maXJzdENoaWxkLm5vZGVWYWx1ZSkuc3BsaXQoL1xzKy8pO2s9W107bD0wO2ZvcihtPWQubGVuZ3RoO2w8bTtsKz0yKWc9bmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoZFtsKzFdLGRbbF0pLGsucHVzaChnKTtjLnB1c2gobmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9seWdvbihbbmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuTGluZWFyUmluZyhrKV0pKX1pZih0aGlzLmludGVybmFsUHJvamVjdGlvbiYmdGhpcy5leHRlcm5hbFByb2plY3Rpb24pZm9yKGU9CjAsZj1jLmxlbmd0aDtlPGY7ZSsrKWNbZV0mJmNbZV0udHJhbnNmb3JtKHRoaXMuZXh0ZXJuYWxQcm9qZWN0aW9uLHRoaXMuaW50ZXJuYWxQcm9qZWN0aW9uKTtyZXR1cm4gY30scGFyc2VQZXJzb25Db25zdHJ1Y3RzOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD1bXSxlPXRoaXMubmFtZXNwYWNlcy5hdG9tO2E9dGhpcy5nZXRFbGVtZW50c0J5VGFnTmFtZU5TKGEsZSxiKTtmb3IodmFyIGY9WyJ1cmkiLCJlbWFpbCJdLGc9MCxoPWEubGVuZ3RoO2c8aDtnKyspe3ZhciBrPXt9O2submFtZT10aGlzLmdldEZpcnN0Q2hpbGRWYWx1ZShhW2ddLGUsIm5hbWUiLG51bGwpO2Zvcih2YXIgbD0wLG09Zi5sZW5ndGg7bDxtO2wrKyl7dmFyIG49dGhpcy5nZXRGaXJzdENoaWxkVmFsdWUoYVtnXSxlLGZbbF0sbnVsbCk7biYmKGtbZltsXV09bil9ZC5wdXNoKGspfTA8ZC5sZW5ndGgmJihjW2IrInMiXT1kKX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Gb3JtYXQuQXRvbSJ9KTtPcGVuTGF5ZXJzLkNvbnRyb2wuS2V5Ym9hcmREZWZhdWx0cz1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuQ29udHJvbCx7YXV0b0FjdGl2YXRlOiEwLHNsaWRlRmFjdG9yOjc1LG9ic2VydmVFbGVtZW50Om51bGwsZHJhdzpmdW5jdGlvbigpe3RoaXMuaGFuZGxlcj1uZXcgT3BlbkxheWVycy5IYW5kbGVyLktleWJvYXJkKHRoaXMse2tleWRvd246dGhpcy5kZWZhdWx0S2V5UHJlc3N9LHtvYnNlcnZlRWxlbWVudDp0aGlzLm9ic2VydmVFbGVtZW50fHxkb2N1bWVudH0pfSxkZWZhdWx0S2V5UHJlc3M6ZnVuY3Rpb24oYSl7dmFyIGIsYz0hMDtiPU9wZW5MYXllcnMuRXZlbnQuZWxlbWVudChhKTtpZighYnx8IklOUFVUIiE9Yi50YWdOYW1lJiYiVEVYVEFSRUEiIT1iLnRhZ05hbWUmJiJTRUxFQ1QiIT1iLnRhZ05hbWUpe3N3aXRjaChhLmtleUNvZGUpe2Nhc2UgT3BlbkxheWVycy5FdmVudC5LRVlfTEVGVDp0aGlzLm1hcC5wYW4oLXRoaXMuc2xpZGVGYWN0b3IsMCk7YnJlYWs7Y2FzZSBPcGVuTGF5ZXJzLkV2ZW50LktFWV9SSUdIVDp0aGlzLm1hcC5wYW4odGhpcy5zbGlkZUZhY3RvciwKMCk7YnJlYWs7Y2FzZSBPcGVuTGF5ZXJzLkV2ZW50LktFWV9VUDp0aGlzLm1hcC5wYW4oMCwtdGhpcy5zbGlkZUZhY3Rvcik7YnJlYWs7Y2FzZSBPcGVuTGF5ZXJzLkV2ZW50LktFWV9ET1dOOnRoaXMubWFwLnBhbigwLHRoaXMuc2xpZGVGYWN0b3IpO2JyZWFrO2Nhc2UgMzM6Yj10aGlzLm1hcC5nZXRTaXplKCk7dGhpcy5tYXAucGFuKDAsLTAuNzUqYi5oKTticmVhaztjYXNlIDM0OmI9dGhpcy5tYXAuZ2V0U2l6ZSgpO3RoaXMubWFwLnBhbigwLDAuNzUqYi5oKTticmVhaztjYXNlIDM1OmI9dGhpcy5tYXAuZ2V0U2l6ZSgpO3RoaXMubWFwLnBhbigwLjc1KmIudywwKTticmVhaztjYXNlIDM2OmI9dGhpcy5tYXAuZ2V0U2l6ZSgpO3RoaXMubWFwLnBhbigtMC43NSpiLncsMCk7YnJlYWs7Y2FzZSA0MzpjYXNlIDYxOmNhc2UgMTg3OmNhc2UgMTA3OnRoaXMubWFwLnpvb21JbigpO2JyZWFrO2Nhc2UgNDU6Y2FzZSAxMDk6Y2FzZSAxODk6Y2FzZSA5NTp0aGlzLm1hcC56b29tT3V0KCk7CmJyZWFrO2RlZmF1bHQ6Yz0hMX1jJiZPcGVuTGF5ZXJzLkV2ZW50LnN0b3AoYSl9fSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkNvbnRyb2wuS2V5Ym9hcmREZWZhdWx0cyJ9KTtPcGVuTGF5ZXJzLkZvcm1hdC5XTVRTQ2FwYWJpbGl0aWVzLnYxXzBfMD1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuRm9ybWF0Lk9XU0NvbW1vbi52MV8xXzAse3ZlcnNpb246IjEuMC4wIixuYW1lc3BhY2VzOntvd3M6Imh0dHA6Ly93d3cub3Blbmdpcy5uZXQvb3dzLzEuMSIsd210czoiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC93bXRzLzEuMCIseGxpbms6Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsifSx5eDpudWxsLGRlZmF1bHRQcmVmaXg6IndtdHMiLGluaXRpYWxpemU6ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5Gb3JtYXQuWE1MLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsW2FdKTt0aGlzLm9wdGlvbnM9YTthPU9wZW5MYXllcnMuVXRpbC5leHRlbmQoe30sT3BlbkxheWVycy5Gb3JtYXQuV01UU0NhcGFiaWxpdGllcy5wcm90b3R5cGUueXgpO3RoaXMueXg9T3BlbkxheWVycy5VdGlsLmV4dGVuZChhLHRoaXMueXgpfSxyZWFkOmZ1bmN0aW9uKGEpeyJzdHJpbmciPT0KdHlwZW9mIGEmJihhPU9wZW5MYXllcnMuRm9ybWF0LlhNTC5wcm90b3R5cGUucmVhZC5hcHBseSh0aGlzLFthXSkpO2EmJjk9PWEubm9kZVR5cGUmJihhPWEuZG9jdW1lbnRFbGVtZW50KTt2YXIgYj17fTt0aGlzLnJlYWROb2RlKGEsYik7Yi52ZXJzaW9uPXRoaXMudmVyc2lvbjtyZXR1cm4gYn0scmVhZGVyczp7d210czp7Q2FwYWJpbGl0aWVzOmZ1bmN0aW9uKGEsYil7dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGIpfSxDb250ZW50czpmdW5jdGlvbihhLGIpe2IuY29udGVudHM9e307Yi5jb250ZW50cy5sYXllcnM9W107Yi5jb250ZW50cy50aWxlTWF0cml4U2V0cz17fTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYi5jb250ZW50cyl9LExheWVyOmZ1bmN0aW9uKGEsYil7dmFyIGM9e3N0eWxlczpbXSxmb3JtYXRzOltdLGRpbWVuc2lvbnM6W10sdGlsZU1hdHJpeFNldExpbmtzOltdLGxheWVyczpbXX07dGhpcy5yZWFkQ2hpbGROb2RlcyhhLGMpO2IubGF5ZXJzLnB1c2goYyl9LFN0eWxlOmZ1bmN0aW9uKGEsCmIpe3ZhciBjPXt9O2MuaXNEZWZhdWx0PSJ0cnVlIj09PWEuZ2V0QXR0cmlidXRlKCJpc0RlZmF1bHQiKTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYyk7Yi5zdHlsZXMucHVzaChjKX0sRm9ybWF0OmZ1bmN0aW9uKGEsYil7Yi5mb3JtYXRzLnB1c2godGhpcy5nZXRDaGlsZFZhbHVlKGEpKX0sVGlsZU1hdHJpeFNldExpbms6ZnVuY3Rpb24oYSxiKXt2YXIgYz17fTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYyk7Yi50aWxlTWF0cml4U2V0TGlua3MucHVzaChjKX0sVGlsZU1hdHJpeFNldDpmdW5jdGlvbihhLGIpe2lmKGIubGF5ZXJzKXt2YXIgYz17bWF0cml4SWRzOltdfTt0aGlzLnJlYWRDaGlsZE5vZGVzKGEsYyk7Yi50aWxlTWF0cml4U2V0c1tjLmlkZW50aWZpZXJdPWN9ZWxzZSBiLnRpbGVNYXRyaXhTZXQ9dGhpcy5nZXRDaGlsZFZhbHVlKGEpfSxUaWxlTWF0cml4OmZ1bmN0aW9uKGEsYil7dmFyIGM9e3N1cHBvcnRlZENSUzpiLnN1cHBvcnRlZENSU307dGhpcy5yZWFkQ2hpbGROb2RlcyhhLApjKTtiLm1hdHJpeElkcy5wdXNoKGMpfSxTY2FsZURlbm9taW5hdG9yOmZ1bmN0aW9uKGEsYil7Yi5zY2FsZURlbm9taW5hdG9yPXBhcnNlRmxvYXQodGhpcy5nZXRDaGlsZFZhbHVlKGEpKX0sVG9wTGVmdENvcm5lcjpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuZ2V0Q2hpbGRWYWx1ZShhKS5zcGxpdCgiICIpLGQ7Yi5zdXBwb3J0ZWRDUlMmJihkPWIuc3VwcG9ydGVkQ1JTLnJlcGxhY2UoL3VybjpvZ2M6ZGVmOmNyczooXHcrKTouKzooXHcrKSQvLCJ1cm46b2djOmRlZjpjcnM6JDE6OiQyIiksZD0hIXRoaXMueXhbZF0pO2IudG9wTGVmdENvcm5lcj1kP25ldyBPcGVuTGF5ZXJzLkxvbkxhdChjWzFdLGNbMF0pOm5ldyBPcGVuTGF5ZXJzLkxvbkxhdChjWzBdLGNbMV0pfSxUaWxlV2lkdGg6ZnVuY3Rpb24oYSxiKXtiLnRpbGVXaWR0aD1wYXJzZUludCh0aGlzLmdldENoaWxkVmFsdWUoYSkpfSxUaWxlSGVpZ2h0OmZ1bmN0aW9uKGEsYil7Yi50aWxlSGVpZ2h0PXBhcnNlSW50KHRoaXMuZ2V0Q2hpbGRWYWx1ZShhKSl9LApNYXRyaXhXaWR0aDpmdW5jdGlvbihhLGIpe2IubWF0cml4V2lkdGg9cGFyc2VJbnQodGhpcy5nZXRDaGlsZFZhbHVlKGEpKX0sTWF0cml4SGVpZ2h0OmZ1bmN0aW9uKGEsYil7Yi5tYXRyaXhIZWlnaHQ9cGFyc2VJbnQodGhpcy5nZXRDaGlsZFZhbHVlKGEpKX0sUmVzb3VyY2VVUkw6ZnVuY3Rpb24oYSxiKXtiLnJlc291cmNlVXJsPWIucmVzb3VyY2VVcmx8fHt9O3ZhciBjPWEuZ2V0QXR0cmlidXRlKCJyZXNvdXJjZVR5cGUiKTtiLnJlc291cmNlVXJsc3x8KGIucmVzb3VyY2VVcmxzPVtdKTtjPWIucmVzb3VyY2VVcmxbY109e2Zvcm1hdDphLmdldEF0dHJpYnV0ZSgiZm9ybWF0IiksdGVtcGxhdGU6YS5nZXRBdHRyaWJ1dGUoInRlbXBsYXRlIikscmVzb3VyY2VUeXBlOmN9O2IucmVzb3VyY2VVcmxzLnB1c2goYyl9LFdTREw6ZnVuY3Rpb24oYSxiKXtiLndzZGw9e307Yi53c2RsLmhyZWY9YS5nZXRBdHRyaWJ1dGUoInhsaW5rOmhyZWYiKX0sU2VydmljZU1ldGFkYXRhVVJMOmZ1bmN0aW9uKGEsCmIpe2Iuc2VydmljZU1ldGFkYXRhVXJsPXt9O2Iuc2VydmljZU1ldGFkYXRhVXJsLmhyZWY9YS5nZXRBdHRyaWJ1dGUoInhsaW5rOmhyZWYiKX0sTGVnZW5kVVJMOmZ1bmN0aW9uKGEsYil7Yi5sZWdlbmQ9e307Yi5sZWdlbmQuaHJlZj1hLmdldEF0dHJpYnV0ZSgieGxpbms6aHJlZiIpO2IubGVnZW5kLmZvcm1hdD1hLmdldEF0dHJpYnV0ZSgiZm9ybWF0Iil9LERpbWVuc2lvbjpmdW5jdGlvbihhLGIpe3ZhciBjPXt2YWx1ZXM6W119O3RoaXMucmVhZENoaWxkTm9kZXMoYSxjKTtiLmRpbWVuc2lvbnMucHVzaChjKX0sRGVmYXVsdDpmdW5jdGlvbihhLGIpe2JbImRlZmF1bHQiXT10aGlzLmdldENoaWxkVmFsdWUoYSl9LFZhbHVlOmZ1bmN0aW9uKGEsYil7Yi52YWx1ZXMucHVzaCh0aGlzLmdldENoaWxkVmFsdWUoYSkpfX0sb3dzOk9wZW5MYXllcnMuRm9ybWF0Lk9XU0NvbW1vbi52MV8xXzAucHJvdG90eXBlLnJlYWRlcnMub3dzfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkZvcm1hdC5XTVRTQ2FwYWJpbGl0aWVzLnYxXzBfMCJ9KTs=",
                "headers": {
                    "Accept-Ranges": "bytes",
                    "Last-Modified": "Fri, 07 Nov 2014 21:19:51 GMT",
                    "Content-Length": "770255",
                    "Date": "Fri, 07 Nov 2014 21:19:51 GMT",
                    "Content-Type": "application/javascript"
                },
                "cookies": [],
                "mimeType": "script",
                "host": "localhost",
                "protocol": "http",
                "port": 9999,
                "inScope": false,
                "toolFlag": 16962,
                "referenceID": 0,
                "messageType": "response"
            },
            "messageType": "requestResponse"
        }
    ],
    "inScope": true,
    "messageType": "scanIssue"
}