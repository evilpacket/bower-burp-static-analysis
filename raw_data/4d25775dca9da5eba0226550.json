{
    "url": "http://localhost:9999/snrbrnjna/galleryjs/lib/gallery.pkgd.min.js",
    "host": "localhost",
    "port": 9999,
    "protocol": "http",
    "name": "DOM data manipulation (DOM-based)",
    "issueType": 5247488,
    "severity": "Information",
    "confidence": "Firm",
    "issueBackground": "DOM-based DOM data manipulation vulnerabilities arise when a client-side script within an application's response reads data from a controllable part of the DOM (for example, the URL), and writes this to a data field within the DOM that is used within the visible UI or client-side application logic. An attacker may be able to use the vulnerability to construct a URL which, if visited by another application user, will modify the appearance or behavior of the client-side UI. An attacker may be able to leverage this to perform virtual defacement of the application, or possibly to induce the user to perform unintended actions.",
    "remediationBackground": "Static analysis of code to identify vulnerabilities of this kind may lead to false positives that are not actually exploitable. You should review the highlighted code and related execution paths to determine whether the application is indeed vulnerable, or whether mitigations are in place that would prevent exploitation.<br><br>The most effective way to avoid DOM-based DOM data manipulation vulnerabilities is not to dynamically write to DOM data fields any data that originated from any untrusted source. If the desired functionality of the application means that this behavior is unavoidable, then defenses must be implemented within the client-side code to prevent malicious data from being stored. In general, this is best achieved by using a whitelist of permitted values.",
    "issueDetail": "The application may be vulnerable to DOM-based DOM data manipulation. Data is read from <b>document.location.href</b> and written to <b>history.replaceState()</b> via the following statements:<ul><li>var c=document.location.href;</li><li>c=c.replace(/\\#.*/,\"\")+(a?\"#!\"+a:\"\"),history.replaceState(null,b,c)</li></ul>",
    "requestResponses": [
        {
            "request": {
                "host": "localhost",
                "port": 9999,
                "protocol": "http",
                "url": "http://localhost:9999/snrbrnjna/galleryjs/lib/gallery.pkgd.min.js",
                "path": "/snrbrnjna/galleryjs/lib/gallery.pkgd.min.js",
                "httpVersion": "HTTP/1.1",
                "method": "GET",
                "headers": {
                    "Host": "localhost:9999"
                },
                "body": "",
                "raw": "R0VUIC9zbnJicm5qbmEvZ2FsbGVyeWpzL2xpYi9nYWxsZXJ5LnBrZ2QubWluLmpzIEhUVFAvMS4xDQpIb3N0OiBsb2NhbGhvc3Q6OTk5OQ0KDQo=",
                "inScope": true,
                "toolFlag": 16962,
                "referenceID": 0,
                "messageType": "request"
            },
            "response": {
                "statusCode": 200,
                "raw": "SFRUUC8xLjEgMjAwIE9LDQpDb250ZW50LUxlbmd0aDogMTE2MjU3DQpBY2NlcHQtUmFuZ2VzOiBieXRlcw0KQ29udGVudC1UeXBlOiBhcHBsaWNhdGlvbi9qYXZhc2NyaXB0DQpEYXRlOiBGcmksIDA3IE5vdiAyMDE0IDAyOjAzOjQ4IEdNVA0KTGFzdC1Nb2RpZmllZDogRnJpLCAwNyBOb3YgMjAxNCAwMjowMzo0OCBHTVQNCg0KLyohCiAqIGdhbGxlcnkuanMgdjEuMS4xLCAoYykgMjAxNCBTbnIgQnJuam5hIDxzbnJAYnJuam5hLm5ldD4sIGxpY2VuY2VkIHVuZGVyIG1vZGlmaWVkIE1JVAogKiBzZWUgaHR0cHM6Ly9naXRodWIuY29tL3NucmJybmpuYS9nYWxsZXJ5anMuZ2l0CiAqLwohZnVuY3Rpb24oYSxiKXsiZnVuY3Rpb24iPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShbXSxiKTphLkdhbGxlcnlBcHA9YigpfSh0aGlzLGZ1bmN0aW9uKCl7LyoqCiAqIEBsaWNlbnNlIGFsbW9uZCAwLjIuOSBDb3B5cmlnaHQgKGMpIDIwMTEtMjAxNCwgVGhlIERvam8gRm91bmRhdGlvbiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBBdmFpbGFibGUgdmlhIHRoZSBNSVQgb3IgbmV3IEJTRCBsaWNlbnNlLgogKiBzZWU6IGh0dHA6Ly9naXRodWIuY29tL2pyYnVya2UvYWxtb25kIGZvciBkZXRhaWxzCiAqLwp2YXIgYSxiLGM7LyohCiAqIGV2ZW50aWUgdjEuMC41CiAqIGV2ZW50IGJpbmRpbmcgaGVscGVyCiAqICAgZXZlbnRpZS5iaW5kKCBlbGVtLCAnY2xpY2snLCBteUZuICkKICogICBldmVudGllLnVuYmluZCggZWxlbSwgJ2NsaWNrJywgbXlGbiApCiAqIE1JVCBsaWNlbnNlCiAqLwovKiEKICogZG9jUmVhZHkgdjEuMC4zCiAqIENyb3NzIGJyb3dzZXIgRE9NQ29udGVudExvYWRlZCBldmVudCBlbWl0dGVyCiAqIE1JVCBsaWNlbnNlCiAqLwovKiEKICogRXZlbnRFbWl0dGVyIHY0LjIuOCAtIGdpdC5pby9lZQogKiBPbGl2ZXIgQ2FsZHdlbGwKICogTUlUIGxpY2Vuc2UKICogQHByZXNlcnZlCiAqLwovKiEKICogZ2V0U3R5bGVQcm9wZXJ0eSB2MS4wLjMKICogb3JpZ2luYWwgYnkga2FuZ2F4CiAqIGh0dHA6Ly9wZXJmZWN0aW9ua2lsbHMuY29tL2ZlYXR1cmUtdGVzdGluZy1jc3MtcHJvcGVydGllcy8KICovCi8qIQogKiBPdXRsYXllciB2MS4yLjAKICogdGhlIGJyYWlucyBhbmQgZ3V0cyBvZiBhIGxheW91dCBsaWJyYXJ5CiAqIE1JVCBsaWNlbnNlCiAqLwovKiEKICogTWFzb25yeSB2My4xLjUKICogQ2FzY2FkaW5nIGdyaWQgbGF5b3V0IGxpYnJhcnkKICogaHR0cDovL21hc29ucnkuZGVzYW5kcm8uY29tCiAqIE1JVCBMaWNlbnNlCiAqIGJ5IERhdmlkIERlU2FuZHJvCiAqLwovKiEKICogRmx1aWQgTWFzb25yeSB2MS4wLjEKICogZXh0ZW5kcyB0aGUgY2FzY2FkaW5nIGdyaWQgbGF5b3V0IGxpYnJhcnkgb2YKICogaHR0cDovL21hc29ucnkuZGVzYW5kcm8uY29tIGJ5IGZpbGxpbmcgdXAgdGhlIGNvbnRhaW5lciBpbiBpdHMgZnVsbCB3aWR0aC4KICogTUlUIExpY2Vuc2UKICovCi8qIQogKiBpbWFnZXNMb2FkZWQgdjMuMS44CiAqIEphdmFTY3JpcHQgaXMgYWxsIGxpa2UgIllvdSBpbWFnZXMgYXJlIGRvbmUgeWV0IG9yIHdoYXQ/IgogKiBNSVQgTGljZW5zZQogKi8KcmV0dXJuIGZ1bmN0aW9uKGQpe2Z1bmN0aW9uIGUoYSxiKXtyZXR1cm4gdS5jYWxsKGEsYil9ZnVuY3Rpb24gZihhLGIpe3ZhciBjLGQsZSxmLGcsaCxpLGosayxsLG0sbj1iJiZiLnNwbGl0KCIvIiksbz1zLm1hcCxwPW8mJm9bIioiXXx8e307aWYoYSYmIi4iPT09YS5jaGFyQXQoMCkpaWYoYil7Zm9yKG49bi5zbGljZSgwLG4ubGVuZ3RoLTEpLGE9YS5zcGxpdCgiLyIpLGc9YS5sZW5ndGgtMSxzLm5vZGVJZENvbXBhdCYmdy50ZXN0KGFbZ10pJiYoYVtnXT1hW2ddLnJlcGxhY2UodywiIikpLGE9bi5jb25jYXQoYSksaz0wO2s8YS5sZW5ndGg7ays9MSlpZihtPWFba10sIi4iPT09bSlhLnNwbGljZShrLDEpLGstPTE7ZWxzZSBpZigiLi4iPT09bSl7aWYoMT09PWsmJigiLi4iPT09YVsyXXx8Ii4uIj09PWFbMF0pKWJyZWFrO2s+MCYmKGEuc3BsaWNlKGstMSwyKSxrLT0yKX1hPWEuam9pbigiLyIpfWVsc2UgMD09PWEuaW5kZXhPZigiLi8iKSYmKGE9YS5zdWJzdHJpbmcoMikpO2lmKChufHxwKSYmbyl7Zm9yKGM9YS5zcGxpdCgiLyIpLGs9Yy5sZW5ndGg7az4wO2stPTEpe2lmKGQ9Yy5zbGljZSgwLGspLmpvaW4oIi8iKSxuKWZvcihsPW4ubGVuZ3RoO2w+MDtsLT0xKWlmKGU9b1tuLnNsaWNlKDAsbCkuam9pbigiLyIpXSxlJiYoZT1lW2RdKSl7Zj1lLGg9azticmVha31pZihmKWJyZWFrOyFpJiZwJiZwW2RdJiYoaT1wW2RdLGo9ayl9IWYmJmkmJihmPWksaD1qKSxmJiYoYy5zcGxpY2UoMCxoLGYpLGE9Yy5qb2luKCIvIikpfXJldHVybiBhfWZ1bmN0aW9uIGcoYSxiKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gbi5hcHBseShkLHYuY2FsbChhcmd1bWVudHMsMCkuY29uY2F0KFthLGJdKSl9fWZ1bmN0aW9uIGgoYSl7cmV0dXJuIGZ1bmN0aW9uKGIpe3JldHVybiBmKGIsYSl9fWZ1bmN0aW9uIGkoYSl7cmV0dXJuIGZ1bmN0aW9uKGIpe3FbYV09Yn19ZnVuY3Rpb24gaihhKXtpZihlKHIsYSkpe3ZhciBiPXJbYV07ZGVsZXRlIHJbYV0sdFthXT0hMCxtLmFwcGx5KGQsYil9aWYoIWUocSxhKSYmIWUodCxhKSl0aHJvdyBuZXcgRXJyb3IoIk5vICIrYSk7cmV0dXJuIHFbYV19ZnVuY3Rpb24gayhhKXt2YXIgYixjPWE/YS5pbmRleE9mKCIhIik6LTE7cmV0dXJuIGM+LTEmJihiPWEuc3Vic3RyaW5nKDAsYyksYT1hLnN1YnN0cmluZyhjKzEsYS5sZW5ndGgpKSxbYixhXX1mdW5jdGlvbiBsKGEpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBzJiZzLmNvbmZpZyYmcy5jb25maWdbYV18fHt9fX12YXIgbSxuLG8scCxxPXt9LHI9e30scz17fSx0PXt9LHU9T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eSx2PVtdLnNsaWNlLHc9L1wuanMkLztvPWZ1bmN0aW9uKGEsYil7dmFyIGMsZD1rKGEpLGU9ZFswXTtyZXR1cm4gYT1kWzFdLGUmJihlPWYoZSxiKSxjPWooZSkpLGU/YT1jJiZjLm5vcm1hbGl6ZT9jLm5vcm1hbGl6ZShhLGgoYikpOmYoYSxiKTooYT1mKGEsYiksZD1rKGEpLGU9ZFswXSxhPWRbMV0sZSYmKGM9aihlKSkpLHtmOmU/ZSsiISIrYTphLG46YSxwcjplLHA6Y319LHA9e3JlcXVpcmU6ZnVuY3Rpb24oYSl7cmV0dXJuIGcoYSl9LGV4cG9ydHM6ZnVuY3Rpb24oYSl7dmFyIGI9cVthXTtyZXR1cm4idW5kZWZpbmVkIiE9dHlwZW9mIGI/YjpxW2FdPXt9fSxtb2R1bGU6ZnVuY3Rpb24oYSl7cmV0dXJue2lkOmEsdXJpOiIiLGV4cG9ydHM6cVthXSxjb25maWc6bChhKX19fSxtPWZ1bmN0aW9uKGEsYixjLGYpe3ZhciBoLGssbCxtLG4scyx1PVtdLHY9dHlwZW9mIGM7aWYoZj1mfHxhLCJ1bmRlZmluZWQiPT09dnx8ImZ1bmN0aW9uIj09PXYpe2ZvcihiPSFiLmxlbmd0aCYmYy5sZW5ndGg/WyJyZXF1aXJlIiwiZXhwb3J0cyIsIm1vZHVsZSJdOmIsbj0wO248Yi5sZW5ndGg7bis9MSlpZihtPW8oYltuXSxmKSxrPW0uZiwicmVxdWlyZSI9PT1rKXVbbl09cC5yZXF1aXJlKGEpO2Vsc2UgaWYoImV4cG9ydHMiPT09ayl1W25dPXAuZXhwb3J0cyhhKSxzPSEwO2Vsc2UgaWYoIm1vZHVsZSI9PT1rKWg9dVtuXT1wLm1vZHVsZShhKTtlbHNlIGlmKGUocSxrKXx8ZShyLGspfHxlKHQsaykpdVtuXT1qKGspO2Vsc2V7aWYoIW0ucCl0aHJvdyBuZXcgRXJyb3IoYSsiIG1pc3NpbmcgIitrKTttLnAubG9hZChtLm4sZyhmLCEwKSxpKGspLHt9KSx1W25dPXFba119bD1jP2MuYXBwbHkocVthXSx1KTp2b2lkIDAsYSYmKGgmJmguZXhwb3J0cyE9PWQmJmguZXhwb3J0cyE9PXFbYV0/cVthXT1oLmV4cG9ydHM6bD09PWQmJnN8fChxW2FdPWwpKX1lbHNlIGEmJihxW2FdPWMpfSxhPWI9bj1mdW5jdGlvbihhLGIsYyxlLGYpe2lmKCJzdHJpbmciPT10eXBlb2YgYSlyZXR1cm4gcFthXT9wW2FdKGIpOmoobyhhLGIpLmYpO2lmKCFhLnNwbGljZSl7aWYocz1hLHMuZGVwcyYmbihzLmRlcHMscy5jYWxsYmFjayksIWIpcmV0dXJuO2Iuc3BsaWNlPyhhPWIsYj1jLGM9bnVsbCk6YT1kfXJldHVybiBiPWJ8fGZ1bmN0aW9uKCl7fSwiZnVuY3Rpb24iPT10eXBlb2YgYyYmKGM9ZSxlPWYpLGU/bShkLGEsYixjKTpzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7bShkLGEsYixjKX0sNCksbn0sbi5jb25maWc9ZnVuY3Rpb24oYSl7cmV0dXJuIG4oYSl9LGEuX2RlZmluZWQ9cSxjPWZ1bmN0aW9uKGEsYixjKXtiLnNwbGljZXx8KGM9YixiPVtdKSxlKHEsYSl8fGUocixhKXx8KHJbYV09W2EsYixjXSl9LGMuYW1kPXtqUXVlcnk6ITB9fSgpLGMoImFsbW9uZCIsZnVuY3Rpb24oKXt9KSxmdW5jdGlvbigpe3ZhciBhPXRoaXMsYj1hLl8sYz17fSxkPUFycmF5LnByb3RvdHlwZSxlPU9iamVjdC5wcm90b3R5cGUsZj1GdW5jdGlvbi5wcm90b3R5cGUsZz1kLnB1c2gsaD1kLnNsaWNlLGk9ZC5jb25jYXQsaj1lLnRvU3RyaW5nLGs9ZS5oYXNPd25Qcm9wZXJ0eSxsPWQuZm9yRWFjaCxtPWQubWFwLG49ZC5yZWR1Y2Usbz1kLnJlZHVjZVJpZ2h0LHA9ZC5maWx0ZXIscT1kLmV2ZXJ5LHI9ZC5zb21lLHM9ZC5pbmRleE9mLHQ9ZC5sYXN0SW5kZXhPZix1PUFycmF5LmlzQXJyYXksdj1PYmplY3Qua2V5cyx3PWYuYmluZCx4PWZ1bmN0aW9uKGEpe3JldHVybiBhIGluc3RhbmNlb2YgeD9hOnRoaXMgaW5zdGFuY2VvZiB4P3ZvaWQodGhpcy5fd3JhcHBlZD1hKTpuZXcgeChhKX07InVuZGVmaW5lZCIhPXR5cGVvZiBleHBvcnRzPygidW5kZWZpbmVkIiE9dHlwZW9mIG1vZHVsZSYmbW9kdWxlLmV4cG9ydHMmJihleHBvcnRzPW1vZHVsZS5leHBvcnRzPXgpLGV4cG9ydHMuXz14KTphLl89eCx4LlZFUlNJT049IjEuNC40Ijt2YXIgeT14LmVhY2g9eC5mb3JFYWNoPWZ1bmN0aW9uKGEsYixkKXtpZihudWxsIT1hKWlmKGwmJmEuZm9yRWFjaD09PWwpYS5mb3JFYWNoKGIsZCk7ZWxzZSBpZihhLmxlbmd0aD09PSthLmxlbmd0aCl7Zm9yKHZhciBlPTAsZj1hLmxlbmd0aDtmPmU7ZSsrKWlmKGIuY2FsbChkLGFbZV0sZSxhKT09PWMpcmV0dXJufWVsc2UgZm9yKHZhciBnIGluIGEpaWYoeC5oYXMoYSxnKSYmYi5jYWxsKGQsYVtnXSxnLGEpPT09YylyZXR1cm59O3gubWFwPXguY29sbGVjdD1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9W107cmV0dXJuIG51bGw9PWE/ZDptJiZhLm1hcD09PW0/YS5tYXAoYixjKTooeShhLGZ1bmN0aW9uKGEsZSxmKXtkW2QubGVuZ3RoXT1iLmNhbGwoYyxhLGUsZil9KSxkKX07dmFyIHo9IlJlZHVjZSBvZiBlbXB0eSBhcnJheSB3aXRoIG5vIGluaXRpYWwgdmFsdWUiO3gucmVkdWNlPXguZm9sZGw9eC5pbmplY3Q9ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9YXJndW1lbnRzLmxlbmd0aD4yO2lmKG51bGw9PWEmJihhPVtdKSxuJiZhLnJlZHVjZT09PW4pcmV0dXJuIGQmJihiPXguYmluZChiLGQpKSxlP2EucmVkdWNlKGIsYyk6YS5yZWR1Y2UoYik7aWYoeShhLGZ1bmN0aW9uKGEsZixnKXtlP2M9Yi5jYWxsKGQsYyxhLGYsZyk6KGM9YSxlPSEwKX0pLCFlKXRocm93IG5ldyBUeXBlRXJyb3Ioeik7cmV0dXJuIGN9LHgucmVkdWNlUmlnaHQ9eC5mb2xkcj1mdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1hcmd1bWVudHMubGVuZ3RoPjI7aWYobnVsbD09YSYmKGE9W10pLG8mJmEucmVkdWNlUmlnaHQ9PT1vKXJldHVybiBkJiYoYj14LmJpbmQoYixkKSksZT9hLnJlZHVjZVJpZ2h0KGIsYyk6YS5yZWR1Y2VSaWdodChiKTt2YXIgZj1hLmxlbmd0aDtpZihmIT09K2Ype3ZhciBnPXgua2V5cyhhKTtmPWcubGVuZ3RofWlmKHkoYSxmdW5jdGlvbihoLGksail7aT1nP2dbLS1mXTotLWYsZT9jPWIuY2FsbChkLGMsYVtpXSxpLGopOihjPWFbaV0sZT0hMCl9KSwhZSl0aHJvdyBuZXcgVHlwZUVycm9yKHopO3JldHVybiBjfSx4LmZpbmQ9eC5kZXRlY3Q9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkO3JldHVybiBBKGEsZnVuY3Rpb24oYSxlLGYpe3JldHVybiBiLmNhbGwoYyxhLGUsZik/KGQ9YSwhMCk6dm9pZCAwfSksZH0seC5maWx0ZXI9eC5zZWxlY3Q9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPVtdO3JldHVybiBudWxsPT1hP2Q6cCYmYS5maWx0ZXI9PT1wP2EuZmlsdGVyKGIsYyk6KHkoYSxmdW5jdGlvbihhLGUsZil7Yi5jYWxsKGMsYSxlLGYpJiYoZFtkLmxlbmd0aF09YSl9KSxkKX0seC5yZWplY3Q9ZnVuY3Rpb24oYSxiLGMpe3JldHVybiB4LmZpbHRlcihhLGZ1bmN0aW9uKGEsZCxlKXtyZXR1cm4hYi5jYWxsKGMsYSxkLGUpfSxjKX0seC5ldmVyeT14LmFsbD1mdW5jdGlvbihhLGIsZCl7Ynx8KGI9eC5pZGVudGl0eSk7dmFyIGU9ITA7cmV0dXJuIG51bGw9PWE/ZTpxJiZhLmV2ZXJ5PT09cT9hLmV2ZXJ5KGIsZCk6KHkoYSxmdW5jdGlvbihhLGYsZyl7cmV0dXJuKGU9ZSYmYi5jYWxsKGQsYSxmLGcpKT92b2lkIDA6Y30pLCEhZSl9O3ZhciBBPXguc29tZT14LmFueT1mdW5jdGlvbihhLGIsZCl7Ynx8KGI9eC5pZGVudGl0eSk7dmFyIGU9ITE7cmV0dXJuIG51bGw9PWE/ZTpyJiZhLnNvbWU9PT1yP2Euc29tZShiLGQpOih5KGEsZnVuY3Rpb24oYSxmLGcpe3JldHVybiBlfHwoZT1iLmNhbGwoZCxhLGYsZykpP2M6dm9pZCAwfSksISFlKX07eC5jb250YWlucz14LmluY2x1ZGU9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbnVsbD09YT8hMTpzJiZhLmluZGV4T2Y9PT1zPy0xIT1hLmluZGV4T2YoYik6QShhLGZ1bmN0aW9uKGEpe3JldHVybiBhPT09Yn0pfSx4Lmludm9rZT1mdW5jdGlvbihhLGIpe3ZhciBjPWguY2FsbChhcmd1bWVudHMsMiksZD14LmlzRnVuY3Rpb24oYik7cmV0dXJuIHgubWFwKGEsZnVuY3Rpb24oYSl7cmV0dXJuKGQ/YjphW2JdKS5hcHBseShhLGMpfSl9LHgucGx1Y2s9ZnVuY3Rpb24oYSxiKXtyZXR1cm4geC5tYXAoYSxmdW5jdGlvbihhKXtyZXR1cm4gYVtiXX0pfSx4LndoZXJlPWZ1bmN0aW9uKGEsYixjKXtyZXR1cm4geC5pc0VtcHR5KGIpP2M/bnVsbDpbXTp4W2M/ImZpbmQiOiJmaWx0ZXIiXShhLGZ1bmN0aW9uKGEpe2Zvcih2YXIgYyBpbiBiKWlmKGJbY10hPT1hW2NdKXJldHVybiExO3JldHVybiEwfSl9LHguZmluZFdoZXJlPWZ1bmN0aW9uKGEsYil7cmV0dXJuIHgud2hlcmUoYSxiLCEwKX0seC5tYXg9ZnVuY3Rpb24oYSxiLGMpe2lmKCFiJiZ4LmlzQXJyYXkoYSkmJmFbMF09PT0rYVswXSYmYS5sZW5ndGg8NjU1MzUpcmV0dXJuIE1hdGgubWF4LmFwcGx5KE1hdGgsYSk7aWYoIWImJnguaXNFbXB0eShhKSlyZXR1cm4tMS8wO3ZhciBkPXtjb21wdXRlZDotMS8wLHZhbHVlOi0xLzB9O3JldHVybiB5KGEsZnVuY3Rpb24oYSxlLGYpe3ZhciBnPWI/Yi5jYWxsKGMsYSxlLGYpOmE7Zz49ZC5jb21wdXRlZCYmKGQ9e3ZhbHVlOmEsY29tcHV0ZWQ6Z30pfSksZC52YWx1ZX0seC5taW49ZnVuY3Rpb24oYSxiLGMpe2lmKCFiJiZ4LmlzQXJyYXkoYSkmJmFbMF09PT0rYVswXSYmYS5sZW5ndGg8NjU1MzUpcmV0dXJuIE1hdGgubWluLmFwcGx5KE1hdGgsYSk7aWYoIWImJnguaXNFbXB0eShhKSlyZXR1cm4gMS8wO3ZhciBkPXtjb21wdXRlZDoxLzAsdmFsdWU6MS8wfTtyZXR1cm4geShhLGZ1bmN0aW9uKGEsZSxmKXt2YXIgZz1iP2IuY2FsbChjLGEsZSxmKTphO2c8ZC5jb21wdXRlZCYmKGQ9e3ZhbHVlOmEsY29tcHV0ZWQ6Z30pfSksZC52YWx1ZX0seC5zaHVmZmxlPWZ1bmN0aW9uKGEpe3ZhciBiLGM9MCxkPVtdO3JldHVybiB5KGEsZnVuY3Rpb24oYSl7Yj14LnJhbmRvbShjKyspLGRbYy0xXT1kW2JdLGRbYl09YX0pLGR9O3ZhciBCPWZ1bmN0aW9uKGEpe3JldHVybiB4LmlzRnVuY3Rpb24oYSk/YTpmdW5jdGlvbihiKXtyZXR1cm4gYlthXX19O3guc29ydEJ5PWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1CKGIpO3JldHVybiB4LnBsdWNrKHgubWFwKGEsZnVuY3Rpb24oYSxiLGUpe3JldHVybnt2YWx1ZTphLGluZGV4OmIsY3JpdGVyaWE6ZC5jYWxsKGMsYSxiLGUpfX0pLnNvcnQoZnVuY3Rpb24oYSxiKXt2YXIgYz1hLmNyaXRlcmlhLGQ9Yi5jcml0ZXJpYTtpZihjIT09ZCl7aWYoYz5kfHx2b2lkIDA9PT1jKXJldHVybiAxO2lmKGQ+Y3x8dm9pZCAwPT09ZClyZXR1cm4tMX1yZXR1cm4gYS5pbmRleDxiLmluZGV4Py0xOjF9KSwidmFsdWUiKX07dmFyIEM9ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9e30sZj1CKGJ8fHguaWRlbnRpdHkpO3JldHVybiB5KGEsZnVuY3Rpb24oYixnKXt2YXIgaD1mLmNhbGwoYyxiLGcsYSk7ZChlLGgsYil9KSxlfTt4Lmdyb3VwQnk9ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBDKGEsYixjLGZ1bmN0aW9uKGEsYixjKXsoeC5oYXMoYSxiKT9hW2JdOmFbYl09W10pLnB1c2goYyl9KX0seC5jb3VudEJ5PWZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gQyhhLGIsYyxmdW5jdGlvbihhLGIpe3guaGFzKGEsYil8fChhW2JdPTApLGFbYl0rK30pfSx4LnNvcnRlZEluZGV4PWZ1bmN0aW9uKGEsYixjLGQpe2M9bnVsbD09Yz94LmlkZW50aXR5OkIoYyk7Zm9yKHZhciBlPWMuY2FsbChkLGIpLGY9MCxnPWEubGVuZ3RoO2c+Zjspe3ZhciBoPWYrZz4+PjE7Yy5jYWxsKGQsYVtoXSk8ZT9mPWgrMTpnPWh9cmV0dXJuIGZ9LHgudG9BcnJheT1mdW5jdGlvbihhKXtyZXR1cm4gYT94LmlzQXJyYXkoYSk/aC5jYWxsKGEpOmEubGVuZ3RoPT09K2EubGVuZ3RoP3gubWFwKGEseC5pZGVudGl0eSk6eC52YWx1ZXMoYSk6W119LHguc2l6ZT1mdW5jdGlvbihhKXtyZXR1cm4gbnVsbD09YT8wOmEubGVuZ3RoPT09K2EubGVuZ3RoP2EubGVuZ3RoOngua2V5cyhhKS5sZW5ndGh9LHguZmlyc3Q9eC5oZWFkPXgudGFrZT1mdW5jdGlvbihhLGIsYyl7cmV0dXJuIG51bGw9PWE/dm9pZCAwOm51bGw9PWJ8fGM/YVswXTpoLmNhbGwoYSwwLGIpfSx4LmluaXRpYWw9ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBoLmNhbGwoYSwwLGEubGVuZ3RoLShudWxsPT1ifHxjPzE6YikpfSx4Lmxhc3Q9ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBudWxsPT1hP3ZvaWQgMDpudWxsPT1ifHxjP2FbYS5sZW5ndGgtMV06aC5jYWxsKGEsTWF0aC5tYXgoYS5sZW5ndGgtYiwwKSl9LHgucmVzdD14LnRhaWw9eC5kcm9wPWZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gaC5jYWxsKGEsbnVsbD09Ynx8Yz8xOmIpfSx4LmNvbXBhY3Q9ZnVuY3Rpb24oYSl7cmV0dXJuIHguZmlsdGVyKGEseC5pZGVudGl0eSl9O3ZhciBEPWZ1bmN0aW9uKGEsYixjKXtyZXR1cm4geShhLGZ1bmN0aW9uKGEpe3guaXNBcnJheShhKT9iP2cuYXBwbHkoYyxhKTpEKGEsYixjKTpjLnB1c2goYSl9KSxjfTt4LmZsYXR0ZW49ZnVuY3Rpb24oYSxiKXtyZXR1cm4gRChhLGIsW10pfSx4LndpdGhvdXQ9ZnVuY3Rpb24oYSl7cmV0dXJuIHguZGlmZmVyZW5jZShhLGguY2FsbChhcmd1bWVudHMsMSkpfSx4LnVuaXE9eC51bmlxdWU9ZnVuY3Rpb24oYSxiLGMsZCl7eC5pc0Z1bmN0aW9uKGIpJiYoZD1jLGM9YixiPSExKTt2YXIgZT1jP3gubWFwKGEsYyxkKTphLGY9W10sZz1bXTtyZXR1cm4geShlLGZ1bmN0aW9uKGMsZCl7KGI/ZCYmZ1tnLmxlbmd0aC0xXT09PWM6eC5jb250YWlucyhnLGMpKXx8KGcucHVzaChjKSxmLnB1c2goYVtkXSkpfSksZn0seC51bmlvbj1mdW5jdGlvbigpe3JldHVybiB4LnVuaXEoaS5hcHBseShkLGFyZ3VtZW50cykpfSx4LmludGVyc2VjdGlvbj1mdW5jdGlvbihhKXt2YXIgYj1oLmNhbGwoYXJndW1lbnRzLDEpO3JldHVybiB4LmZpbHRlcih4LnVuaXEoYSksZnVuY3Rpb24oYSl7cmV0dXJuIHguZXZlcnkoYixmdW5jdGlvbihiKXtyZXR1cm4geC5pbmRleE9mKGIsYSk+PTB9KX0pfSx4LmRpZmZlcmVuY2U9ZnVuY3Rpb24oYSl7dmFyIGI9aS5hcHBseShkLGguY2FsbChhcmd1bWVudHMsMSkpO3JldHVybiB4LmZpbHRlcihhLGZ1bmN0aW9uKGEpe3JldHVybiF4LmNvbnRhaW5zKGIsYSl9KX0seC56aXA9ZnVuY3Rpb24oKXtmb3IodmFyIGE9aC5jYWxsKGFyZ3VtZW50cyksYj14Lm1heCh4LnBsdWNrKGEsImxlbmd0aCIpKSxjPW5ldyBBcnJheShiKSxkPTA7Yj5kO2QrKyljW2RdPXgucGx1Y2soYSwiIitkKTtyZXR1cm4gY30seC5vYmplY3Q9ZnVuY3Rpb24oYSxiKXtpZihudWxsPT1hKXJldHVybnt9O2Zvcih2YXIgYz17fSxkPTAsZT1hLmxlbmd0aDtlPmQ7ZCsrKWI/Y1thW2RdXT1iW2RdOmNbYVtkXVswXV09YVtkXVsxXTtyZXR1cm4gY30seC5pbmRleE9mPWZ1bmN0aW9uKGEsYixjKXtpZihudWxsPT1hKXJldHVybi0xO3ZhciBkPTAsZT1hLmxlbmd0aDtpZihjKXtpZigibnVtYmVyIiE9dHlwZW9mIGMpcmV0dXJuIGQ9eC5zb3J0ZWRJbmRleChhLGIpLGFbZF09PT1iP2Q6LTE7ZD0wPmM/TWF0aC5tYXgoMCxlK2MpOmN9aWYocyYmYS5pbmRleE9mPT09cylyZXR1cm4gYS5pbmRleE9mKGIsYyk7Zm9yKDtlPmQ7ZCsrKWlmKGFbZF09PT1iKXJldHVybiBkO3JldHVybi0xfSx4Lmxhc3RJbmRleE9mPWZ1bmN0aW9uKGEsYixjKXtpZihudWxsPT1hKXJldHVybi0xO3ZhciBkPW51bGwhPWM7aWYodCYmYS5sYXN0SW5kZXhPZj09PXQpcmV0dXJuIGQ/YS5sYXN0SW5kZXhPZihiLGMpOmEubGFzdEluZGV4T2YoYik7Zm9yKHZhciBlPWQ/YzphLmxlbmd0aDtlLS07KWlmKGFbZV09PT1iKXJldHVybiBlO3JldHVybi0xfSx4LnJhbmdlPWZ1bmN0aW9uKGEsYixjKXthcmd1bWVudHMubGVuZ3RoPD0xJiYoYj1hfHwwLGE9MCksYz1hcmd1bWVudHNbMl18fDE7Zm9yKHZhciBkPU1hdGgubWF4KE1hdGguY2VpbCgoYi1hKS9jKSwwKSxlPTAsZj1uZXcgQXJyYXkoZCk7ZD5lOylmW2UrK109YSxhKz1jO3JldHVybiBmfSx4LmJpbmQ9ZnVuY3Rpb24oYSxiKXtpZihhLmJpbmQ9PT13JiZ3KXJldHVybiB3LmFwcGx5KGEsaC5jYWxsKGFyZ3VtZW50cywxKSk7dmFyIGM9aC5jYWxsKGFyZ3VtZW50cywyKTtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gYS5hcHBseShiLGMuY29uY2F0KGguY2FsbChhcmd1bWVudHMpKSl9fSx4LnBhcnRpYWw9ZnVuY3Rpb24oYSl7dmFyIGI9aC5jYWxsKGFyZ3VtZW50cywxKTtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gYS5hcHBseSh0aGlzLGIuY29uY2F0KGguY2FsbChhcmd1bWVudHMpKSl9fSx4LmJpbmRBbGw9ZnVuY3Rpb24oYSl7dmFyIGI9aC5jYWxsKGFyZ3VtZW50cywxKTtyZXR1cm4gMD09PWIubGVuZ3RoJiYoYj14LmZ1bmN0aW9ucyhhKSkseShiLGZ1bmN0aW9uKGIpe2FbYl09eC5iaW5kKGFbYl0sYSl9KSxhfSx4Lm1lbW9pemU9ZnVuY3Rpb24oYSxiKXt2YXIgYz17fTtyZXR1cm4gYnx8KGI9eC5pZGVudGl0eSksZnVuY3Rpb24oKXt2YXIgZD1iLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtyZXR1cm4geC5oYXMoYyxkKT9jW2RdOmNbZF09YS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fSx4LmRlbGF5PWZ1bmN0aW9uKGEsYil7dmFyIGM9aC5jYWxsKGFyZ3VtZW50cywyKTtyZXR1cm4gc2V0VGltZW91dChmdW5jdGlvbigpe3JldHVybiBhLmFwcGx5KG51bGwsYyl9LGIpfSx4LmRlZmVyPWZ1bmN0aW9uKGEpe3JldHVybiB4LmRlbGF5LmFwcGx5KHgsW2EsMV0uY29uY2F0KGguY2FsbChhcmd1bWVudHMsMSkpKX0seC50aHJvdHRsZT1mdW5jdGlvbihhLGIpe3ZhciBjLGQsZSxmLGc9MCxoPWZ1bmN0aW9uKCl7Zz1uZXcgRGF0ZSxlPW51bGwsZj1hLmFwcGx5KGMsZCl9O3JldHVybiBmdW5jdGlvbigpe3ZhciBpPW5ldyBEYXRlLGo9Yi0oaS1nKTtyZXR1cm4gYz10aGlzLGQ9YXJndW1lbnRzLDA+PWo/KGNsZWFyVGltZW91dChlKSxlPW51bGwsZz1pLGY9YS5hcHBseShjLGQpKTplfHwoZT1zZXRUaW1lb3V0KGgsaikpLGZ9fSx4LmRlYm91bmNlPWZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlO3JldHVybiBmdW5jdGlvbigpe3ZhciBmPXRoaXMsZz1hcmd1bWVudHMsaD1mdW5jdGlvbigpe2Q9bnVsbCxjfHwoZT1hLmFwcGx5KGYsZykpfSxpPWMmJiFkO3JldHVybiBjbGVhclRpbWVvdXQoZCksZD1zZXRUaW1lb3V0KGgsYiksaSYmKGU9YS5hcHBseShmLGcpKSxlfX0seC5vbmNlPWZ1bmN0aW9uKGEpe3ZhciBiLGM9ITE7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGM/YjooYz0hMCxiPWEuYXBwbHkodGhpcyxhcmd1bWVudHMpLGE9bnVsbCxiKX19LHgud3JhcD1mdW5jdGlvbihhLGIpe3JldHVybiBmdW5jdGlvbigpe3ZhciBjPVthXTtyZXR1cm4gZy5hcHBseShjLGFyZ3VtZW50cyksYi5hcHBseSh0aGlzLGMpfX0seC5jb21wb3NlPWZ1bmN0aW9uKCl7dmFyIGE9YXJndW1lbnRzO3JldHVybiBmdW5jdGlvbigpe2Zvcih2YXIgYj1hcmd1bWVudHMsYz1hLmxlbmd0aC0xO2M+PTA7Yy0tKWI9W2FbY10uYXBwbHkodGhpcyxiKV07cmV0dXJuIGJbMF19fSx4LmFmdGVyPWZ1bmN0aW9uKGEsYil7cmV0dXJuIDA+PWE/YigpOmZ1bmN0aW9uKCl7cmV0dXJuLS1hPDE/Yi5hcHBseSh0aGlzLGFyZ3VtZW50cyk6dm9pZCAwfX0seC5rZXlzPXZ8fGZ1bmN0aW9uKGEpe2lmKGEhPT1PYmplY3QoYSkpdGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBvYmplY3QiKTt2YXIgYj1bXTtmb3IodmFyIGMgaW4gYSl4LmhhcyhhLGMpJiYoYltiLmxlbmd0aF09Yyk7cmV0dXJuIGJ9LHgudmFsdWVzPWZ1bmN0aW9uKGEpe3ZhciBiPVtdO2Zvcih2YXIgYyBpbiBhKXguaGFzKGEsYykmJmIucHVzaChhW2NdKTtyZXR1cm4gYn0seC5wYWlycz1mdW5jdGlvbihhKXt2YXIgYj1bXTtmb3IodmFyIGMgaW4gYSl4LmhhcyhhLGMpJiZiLnB1c2goW2MsYVtjXV0pO3JldHVybiBifSx4LmludmVydD1mdW5jdGlvbihhKXt2YXIgYj17fTtmb3IodmFyIGMgaW4gYSl4LmhhcyhhLGMpJiYoYlthW2NdXT1jKTtyZXR1cm4gYn0seC5mdW5jdGlvbnM9eC5tZXRob2RzPWZ1bmN0aW9uKGEpe3ZhciBiPVtdO2Zvcih2YXIgYyBpbiBhKXguaXNGdW5jdGlvbihhW2NdKSYmYi5wdXNoKGMpO3JldHVybiBiLnNvcnQoKX0seC5leHRlbmQ9ZnVuY3Rpb24oYSl7cmV0dXJuIHkoaC5jYWxsKGFyZ3VtZW50cywxKSxmdW5jdGlvbihiKXtpZihiKWZvcih2YXIgYyBpbiBiKWFbY109YltjXX0pLGF9LHgucGljaz1mdW5jdGlvbihhKXt2YXIgYj17fSxjPWkuYXBwbHkoZCxoLmNhbGwoYXJndW1lbnRzLDEpKTtyZXR1cm4geShjLGZ1bmN0aW9uKGMpe2MgaW4gYSYmKGJbY109YVtjXSl9KSxifSx4Lm9taXQ9ZnVuY3Rpb24oYSl7dmFyIGI9e30sYz1pLmFwcGx5KGQsaC5jYWxsKGFyZ3VtZW50cywxKSk7Zm9yKHZhciBlIGluIGEpeC5jb250YWlucyhjLGUpfHwoYltlXT1hW2VdKTtyZXR1cm4gYn0seC5kZWZhdWx0cz1mdW5jdGlvbihhKXtyZXR1cm4geShoLmNhbGwoYXJndW1lbnRzLDEpLGZ1bmN0aW9uKGIpe2lmKGIpZm9yKHZhciBjIGluIGIpbnVsbD09YVtjXSYmKGFbY109YltjXSl9KSxhfSx4LmNsb25lPWZ1bmN0aW9uKGEpe3JldHVybiB4LmlzT2JqZWN0KGEpP3guaXNBcnJheShhKT9hLnNsaWNlKCk6eC5leHRlbmQoe30sYSk6YX0seC50YXA9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYihhKSxhfTt2YXIgRT1mdW5jdGlvbihhLGIsYyxkKXtpZihhPT09YilyZXR1cm4gMCE9PWF8fDEvYT09MS9iO2lmKG51bGw9PWF8fG51bGw9PWIpcmV0dXJuIGE9PT1iO2EgaW5zdGFuY2VvZiB4JiYoYT1hLl93cmFwcGVkKSxiIGluc3RhbmNlb2YgeCYmKGI9Yi5fd3JhcHBlZCk7dmFyIGU9ai5jYWxsKGEpO2lmKGUhPWouY2FsbChiKSlyZXR1cm4hMTtzd2l0Y2goZSl7Y2FzZSJbb2JqZWN0IFN0cmluZ10iOnJldHVybiBhPT1TdHJpbmcoYik7Y2FzZSJbb2JqZWN0IE51bWJlcl0iOnJldHVybiBhIT0rYT9iIT0rYjowPT1hPzEvYT09MS9iOmE9PStiO2Nhc2UiW29iamVjdCBEYXRlXSI6Y2FzZSJbb2JqZWN0IEJvb2xlYW5dIjpyZXR1cm4rYT09K2I7Y2FzZSJbb2JqZWN0IFJlZ0V4cF0iOnJldHVybiBhLnNvdXJjZT09Yi5zb3VyY2UmJmEuZ2xvYmFsPT1iLmdsb2JhbCYmYS5tdWx0aWxpbmU9PWIubXVsdGlsaW5lJiZhLmlnbm9yZUNhc2U9PWIuaWdub3JlQ2FzZX1pZigib2JqZWN0IiE9dHlwZW9mIGF8fCJvYmplY3QiIT10eXBlb2YgYilyZXR1cm4hMTtmb3IodmFyIGY9Yy5sZW5ndGg7Zi0tOylpZihjW2ZdPT1hKXJldHVybiBkW2ZdPT1iO2MucHVzaChhKSxkLnB1c2goYik7dmFyIGc9MCxoPSEwO2lmKCJbb2JqZWN0IEFycmF5XSI9PWUpe2lmKGc9YS5sZW5ndGgsaD1nPT1iLmxlbmd0aClmb3IoO2ctLSYmKGg9RShhW2ddLGJbZ10sYyxkKSk7KTt9ZWxzZXt2YXIgaT1hLmNvbnN0cnVjdG9yLGs9Yi5jb25zdHJ1Y3RvcjtpZihpIT09ayYmISh4LmlzRnVuY3Rpb24oaSkmJmkgaW5zdGFuY2VvZiBpJiZ4LmlzRnVuY3Rpb24oaykmJmsgaW5zdGFuY2VvZiBrKSlyZXR1cm4hMTtmb3IodmFyIGwgaW4gYSlpZih4LmhhcyhhLGwpJiYoZysrLCEoaD14LmhhcyhiLGwpJiZFKGFbbF0sYltsXSxjLGQpKSkpYnJlYWs7aWYoaCl7Zm9yKGwgaW4gYilpZih4LmhhcyhiLGwpJiYhZy0tKWJyZWFrO2g9IWd9fXJldHVybiBjLnBvcCgpLGQucG9wKCksaH07eC5pc0VxdWFsPWZ1bmN0aW9uKGEsYil7cmV0dXJuIEUoYSxiLFtdLFtdKX0seC5pc0VtcHR5PWZ1bmN0aW9uKGEpe2lmKG51bGw9PWEpcmV0dXJuITA7aWYoeC5pc0FycmF5KGEpfHx4LmlzU3RyaW5nKGEpKXJldHVybiAwPT09YS5sZW5ndGg7Zm9yKHZhciBiIGluIGEpaWYoeC5oYXMoYSxiKSlyZXR1cm4hMTtyZXR1cm4hMH0seC5pc0VsZW1lbnQ9ZnVuY3Rpb24oYSl7cmV0dXJuISghYXx8MSE9PWEubm9kZVR5cGUpfSx4LmlzQXJyYXk9dXx8ZnVuY3Rpb24oYSl7cmV0dXJuIltvYmplY3QgQXJyYXldIj09ai5jYWxsKGEpfSx4LmlzT2JqZWN0PWZ1bmN0aW9uKGEpe3JldHVybiBhPT09T2JqZWN0KGEpfSx5KFsiQXJndW1lbnRzIiwiRnVuY3Rpb24iLCJTdHJpbmciLCJOdW1iZXIiLCJEYXRlIiwiUmVnRXhwIl0sZnVuY3Rpb24oYSl7eFsiaXMiK2FdPWZ1bmN0aW9uKGIpe3JldHVybiBqLmNhbGwoYik9PSJbb2JqZWN0ICIrYSsiXSJ9fSkseC5pc0FyZ3VtZW50cyhhcmd1bWVudHMpfHwoeC5pc0FyZ3VtZW50cz1mdW5jdGlvbihhKXtyZXR1cm4hKCFhfHwheC5oYXMoYSwiY2FsbGVlIikpfSksImZ1bmN0aW9uIiE9dHlwZW9mLy4vJiYoeC5pc0Z1bmN0aW9uPWZ1bmN0aW9uKGEpe3JldHVybiJmdW5jdGlvbiI9PXR5cGVvZiBhfSkseC5pc0Zpbml0ZT1mdW5jdGlvbihhKXtyZXR1cm4gaXNGaW5pdGUoYSkmJiFpc05hTihwYXJzZUZsb2F0KGEpKX0seC5pc05hTj1mdW5jdGlvbihhKXtyZXR1cm4geC5pc051bWJlcihhKSYmYSE9K2F9LHguaXNCb29sZWFuPWZ1bmN0aW9uKGEpe3JldHVybiBhPT09ITB8fGE9PT0hMXx8IltvYmplY3QgQm9vbGVhbl0iPT1qLmNhbGwoYSl9LHguaXNOdWxsPWZ1bmN0aW9uKGEpe3JldHVybiBudWxsPT09YX0seC5pc1VuZGVmaW5lZD1mdW5jdGlvbihhKXtyZXR1cm4gdm9pZCAwPT09YX0seC5oYXM9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gay5jYWxsKGEsYil9LHgubm9Db25mbGljdD1mdW5jdGlvbigpe3JldHVybiBhLl89Yix0aGlzfSx4LmlkZW50aXR5PWZ1bmN0aW9uKGEpe3JldHVybiBhfSx4LnRpbWVzPWZ1bmN0aW9uKGEsYixjKXtmb3IodmFyIGQ9QXJyYXkoYSksZT0wO2E+ZTtlKyspZFtlXT1iLmNhbGwoYyxlKTtyZXR1cm4gZH0seC5yYW5kb209ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbnVsbD09YiYmKGI9YSxhPTApLGErTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKihiLWErMSkpfTt2YXIgRj17ZXNjYXBlOnsiJiI6IiZhbXA7IiwiPCI6IiZsdDsiLCI+IjoiJmd0OyIsJyInOiImcXVvdDsiLCInIjoiJiN4Mjc7IiwiLyI6IiYjeDJGOyJ9fTtGLnVuZXNjYXBlPXguaW52ZXJ0KEYuZXNjYXBlKTt2YXIgRz17ZXNjYXBlOm5ldyBSZWdFeHAoIlsiK3gua2V5cyhGLmVzY2FwZSkuam9pbigiIikrIl0iLCJnIiksdW5lc2NhcGU6bmV3IFJlZ0V4cCgiKCIreC5rZXlzKEYudW5lc2NhcGUpLmpvaW4oInwiKSsiKSIsImciKX07eC5lYWNoKFsiZXNjYXBlIiwidW5lc2NhcGUiXSxmdW5jdGlvbihhKXt4W2FdPWZ1bmN0aW9uKGIpe3JldHVybiBudWxsPT1iPyIiOigiIitiKS5yZXBsYWNlKEdbYV0sZnVuY3Rpb24oYil7cmV0dXJuIEZbYV1bYl19KX19KSx4LnJlc3VsdD1mdW5jdGlvbihhLGIpe2lmKG51bGw9PWEpcmV0dXJuIG51bGw7dmFyIGM9YVtiXTtyZXR1cm4geC5pc0Z1bmN0aW9uKGMpP2MuY2FsbChhKTpjfSx4Lm1peGluPWZ1bmN0aW9uKGEpe3koeC5mdW5jdGlvbnMoYSksZnVuY3Rpb24oYil7dmFyIGM9eFtiXT1hW2JdO3gucHJvdG90eXBlW2JdPWZ1bmN0aW9uKCl7dmFyIGE9W3RoaXMuX3dyYXBwZWRdO3JldHVybiBnLmFwcGx5KGEsYXJndW1lbnRzKSxMLmNhbGwodGhpcyxjLmFwcGx5KHgsYSkpfX0pfTt2YXIgSD0wO3gudW5pcXVlSWQ9ZnVuY3Rpb24oYSl7dmFyIGI9KytIKyIiO3JldHVybiBhP2ErYjpifSx4LnRlbXBsYXRlU2V0dGluZ3M9e2V2YWx1YXRlOi88JShbXHNcU10rPyklPi9nLGludGVycG9sYXRlOi88JT0oW1xzXFNdKz8pJT4vZyxlc2NhcGU6LzwlLShbXHNcU10rPyklPi9nfTt2YXIgST0vKC4pXi8sSj17IiciOiInIiwiXFwiOiJcXCIsIlxyIjoiciIsIlxuIjoibiIsIgkiOiJ0IiwiXHUyMDI4IjoidTIwMjgiLCJcdTIwMjkiOiJ1MjAyOSJ9LEs9L1xcfCd8XHJ8XG58XHR8XHUyMDI4fFx1MjAyOS9nO3gudGVtcGxhdGU9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkO2M9eC5kZWZhdWx0cyh7fSxjLHgudGVtcGxhdGVTZXR0aW5ncyk7dmFyIGU9bmV3IFJlZ0V4cChbKGMuZXNjYXBlfHxJKS5zb3VyY2UsKGMuaW50ZXJwb2xhdGV8fEkpLnNvdXJjZSwoYy5ldmFsdWF0ZXx8SSkuc291cmNlXS5qb2luKCJ8IikrInwkIiwiZyIpLGY9MCxnPSJfX3ArPSciO2EucmVwbGFjZShlLGZ1bmN0aW9uKGIsYyxkLGUsaCl7cmV0dXJuIGcrPWEuc2xpY2UoZixoKS5yZXBsYWNlKEssZnVuY3Rpb24oYSl7cmV0dXJuIlxcIitKW2FdfSksYyYmKGcrPSInK1xuKChfX3Q9KCIrYysiKSk9PW51bGw/Jyc6Xy5lc2NhcGUoX190KSkrXG4nIiksZCYmKGcrPSInK1xuKChfX3Q9KCIrZCsiKSk9PW51bGw/Jyc6X190KStcbiciKSxlJiYoZys9Iic7XG4iK2UrIlxuX19wKz0nIiksZj1oK2IubGVuZ3RoLGJ9KSxnKz0iJztcbiIsYy52YXJpYWJsZXx8KGc9IndpdGgob2JqfHx7fSl7XG4iK2crIn1cbiIpLGc9InZhciBfX3QsX19wPScnLF9faj1BcnJheS5wcm90b3R5cGUuam9pbixwcmludD1mdW5jdGlvbigpe19fcCs9X19qLmNhbGwoYXJndW1lbnRzLCcnKTt9O1xuIitnKyJyZXR1cm4gX19wO1xuIjt0cnl7ZD1uZXcgRnVuY3Rpb24oYy52YXJpYWJsZXx8Im9iaiIsIl8iLGcpfWNhdGNoKGgpe3Rocm93IGguc291cmNlPWcsaH1pZihiKXJldHVybiBkKGIseCk7dmFyIGk9ZnVuY3Rpb24oYSl7cmV0dXJuIGQuY2FsbCh0aGlzLGEseCl9O3JldHVybiBpLnNvdXJjZT0iZnVuY3Rpb24oIisoYy52YXJpYWJsZXx8Im9iaiIpKyIpe1xuIitnKyJ9IixpfSx4LmNoYWluPWZ1bmN0aW9uKGEpe3JldHVybiB4KGEpLmNoYWluKCl9O3ZhciBMPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLl9jaGFpbj94KGEpLmNoYWluKCk6YX07eC5taXhpbih4KSx5KFsicG9wIiwicHVzaCIsInJldmVyc2UiLCJzaGlmdCIsInNvcnQiLCJzcGxpY2UiLCJ1bnNoaWZ0Il0sZnVuY3Rpb24oYSl7dmFyIGI9ZFthXTt4LnByb3RvdHlwZVthXT1mdW5jdGlvbigpe3ZhciBjPXRoaXMuX3dyYXBwZWQ7cmV0dXJuIGIuYXBwbHkoYyxhcmd1bWVudHMpLCJzaGlmdCIhPWEmJiJzcGxpY2UiIT1hfHwwIT09Yy5sZW5ndGh8fGRlbGV0ZSBjWzBdLEwuY2FsbCh0aGlzLGMpfX0pLHkoWyJjb25jYXQiLCJqb2luIiwic2xpY2UiXSxmdW5jdGlvbihhKXt2YXIgYj1kW2FdO3gucHJvdG90eXBlW2FdPWZ1bmN0aW9uKCl7cmV0dXJuIEwuY2FsbCh0aGlzLGIuYXBwbHkodGhpcy5fd3JhcHBlZCxhcmd1bWVudHMpKX19KSx4LmV4dGVuZCh4LnByb3RvdHlwZSx7Y2hhaW46ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY2hhaW49ITAsdGhpc30sdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fd3JhcHBlZH19KX0uY2FsbCh0aGlzKSxjKCJ1bmRlcnNjb3JlIixmdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgYjtyZXR1cm4gYnx8YS5ffX0odGhpcykpLGZ1bmN0aW9uKCl7dmFyIGEsYz10aGlzLGQ9Yy5CYWNrYm9uZSxlPVtdLGY9ZS5wdXNoLGc9ZS5zbGljZSxoPWUuc3BsaWNlO2E9InVuZGVmaW5lZCIhPXR5cGVvZiBleHBvcnRzP2V4cG9ydHM6Yy5CYWNrYm9uZT17fSxhLlZFUlNJT049IjEuMC4wIjt2YXIgaT1jLl87aXx8InVuZGVmaW5lZCI9PXR5cGVvZiBifHwoaT1iKCJ1bmRlcnNjb3JlIikpLGEuJD1jLmpRdWVyeXx8Yy5aZXB0b3x8Yy5lbmRlcnx8Yy4kLGEubm9Db25mbGljdD1mdW5jdGlvbigpe3JldHVybiBjLkJhY2tib25lPWQsdGhpc30sYS5lbXVsYXRlSFRUUD0hMSxhLmVtdWxhdGVKU09OPSExO3ZhciBqPWEuRXZlbnRzPXtvbjpmdW5jdGlvbihhLGIsYyl7aWYoIWwodGhpcywib24iLGEsW2IsY10pfHwhYilyZXR1cm4gdGhpczt0aGlzLl9ldmVudHN8fCh0aGlzLl9ldmVudHM9e30pO3ZhciBkPXRoaXMuX2V2ZW50c1thXXx8KHRoaXMuX2V2ZW50c1thXT1bXSk7cmV0dXJuIGQucHVzaCh7Y2FsbGJhY2s6Yixjb250ZXh0OmMsY3R4OmN8fHRoaXN9KSx0aGlzfSxvbmNlOmZ1bmN0aW9uKGEsYixjKXtpZighbCh0aGlzLCJvbmNlIixhLFtiLGNdKXx8IWIpcmV0dXJuIHRoaXM7dmFyIGQ9dGhpcyxlPWkub25jZShmdW5jdGlvbigpe2Qub2ZmKGEsZSksYi5hcHBseSh0aGlzLGFyZ3VtZW50cyl9KTtyZXR1cm4gZS5fY2FsbGJhY2s9Yix0aGlzLm9uKGEsZSxjKX0sb2ZmOmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGYsZyxoLGosayxtO2lmKCF0aGlzLl9ldmVudHN8fCFsKHRoaXMsIm9mZiIsYSxbYixjXSkpcmV0dXJuIHRoaXM7aWYoIWEmJiFiJiYhYylyZXR1cm4gdGhpcy5fZXZlbnRzPXt9LHRoaXM7Zm9yKGc9YT9bYV06aS5rZXlzKHRoaXMuX2V2ZW50cyksaD0wLGo9Zy5sZW5ndGg7aj5oO2grKylpZihhPWdbaF0sZj10aGlzLl9ldmVudHNbYV0pe2lmKHRoaXMuX2V2ZW50c1thXT1kPVtdLGJ8fGMpZm9yKGs9MCxtPWYubGVuZ3RoO20+aztrKyspZT1mW2tdLChiJiZiIT09ZS5jYWxsYmFjayYmYiE9PWUuY2FsbGJhY2suX2NhbGxiYWNrfHxjJiZjIT09ZS5jb250ZXh0KSYmZC5wdXNoKGUpO2QubGVuZ3RofHxkZWxldGUgdGhpcy5fZXZlbnRzW2FdfXJldHVybiB0aGlzfSx0cmlnZ2VyOmZ1bmN0aW9uKGEpe2lmKCF0aGlzLl9ldmVudHMpcmV0dXJuIHRoaXM7dmFyIGI9Zy5jYWxsKGFyZ3VtZW50cywxKTtpZighbCh0aGlzLCJ0cmlnZ2VyIixhLGIpKXJldHVybiB0aGlzO3ZhciBjPXRoaXMuX2V2ZW50c1thXSxkPXRoaXMuX2V2ZW50cy5hbGw7cmV0dXJuIGMmJm0oYyxiKSxkJiZtKGQsYXJndW1lbnRzKSx0aGlzfSxzdG9wTGlzdGVuaW5nOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD10aGlzLl9saXN0ZW5lcnM7aWYoIWQpcmV0dXJuIHRoaXM7dmFyIGU9IWImJiFjOyJvYmplY3QiPT10eXBlb2YgYiYmKGM9dGhpcyksYSYmKChkPXt9KVthLl9saXN0ZW5lcklkXT1hKTtmb3IodmFyIGYgaW4gZClkW2ZdLm9mZihiLGMsdGhpcyksZSYmZGVsZXRlIHRoaXMuX2xpc3RlbmVyc1tmXTtyZXR1cm4gdGhpc319LGs9L1xzKy8sbD1mdW5jdGlvbihhLGIsYyxkKXtpZighYylyZXR1cm4hMDtpZigib2JqZWN0Ij09dHlwZW9mIGMpe2Zvcih2YXIgZSBpbiBjKWFbYl0uYXBwbHkoYSxbZSxjW2VdXS5jb25jYXQoZCkpO3JldHVybiExfWlmKGsudGVzdChjKSl7Zm9yKHZhciBmPWMuc3BsaXQoayksZz0wLGg9Zi5sZW5ndGg7aD5nO2crKylhW2JdLmFwcGx5KGEsW2ZbZ11dLmNvbmNhdChkKSk7cmV0dXJuITF9cmV0dXJuITB9LG09ZnVuY3Rpb24oYSxiKXt2YXIgYyxkPS0xLGU9YS5sZW5ndGgsZj1iWzBdLGc9YlsxXSxoPWJbMl07c3dpdGNoKGIubGVuZ3RoKXtjYXNlIDA6Zm9yKDsrK2Q8ZTspKGM9YVtkXSkuY2FsbGJhY2suY2FsbChjLmN0eCk7cmV0dXJuO2Nhc2UgMTpmb3IoOysrZDxlOykoYz1hW2RdKS5jYWxsYmFjay5jYWxsKGMuY3R4LGYpO3JldHVybjtjYXNlIDI6Zm9yKDsrK2Q8ZTspKGM9YVtkXSkuY2FsbGJhY2suY2FsbChjLmN0eCxmLGcpO3JldHVybjtjYXNlIDM6Zm9yKDsrK2Q8ZTspKGM9YVtkXSkuY2FsbGJhY2suY2FsbChjLmN0eCxmLGcsaCk7cmV0dXJuO2RlZmF1bHQ6Zm9yKDsrK2Q8ZTspKGM9YVtkXSkuY2FsbGJhY2suYXBwbHkoYy5jdHgsYil9fSxuPXtsaXN0ZW5Ubzoib24iLGxpc3RlblRvT25jZToib25jZSJ9O2kuZWFjaChuLGZ1bmN0aW9uKGEsYil7altiXT1mdW5jdGlvbihiLGMsZCl7dmFyIGU9dGhpcy5fbGlzdGVuZXJzfHwodGhpcy5fbGlzdGVuZXJzPXt9KSxmPWIuX2xpc3RlbmVySWR8fChiLl9saXN0ZW5lcklkPWkudW5pcXVlSWQoImwiKSk7cmV0dXJuIGVbZl09Yiwib2JqZWN0Ij09dHlwZW9mIGMmJihkPXRoaXMpLGJbYV0oYyxkLHRoaXMpLHRoaXN9fSksai5iaW5kPWoub24sai51bmJpbmQ9ai5vZmYsaS5leHRlbmQoYSxqKTt2YXIgbz1hLk1vZGVsPWZ1bmN0aW9uKGEsYil7dmFyIGMsZD1hfHx7fTtifHwoYj17fSksdGhpcy5jaWQ9aS51bmlxdWVJZCgiYyIpLHRoaXMuYXR0cmlidXRlcz17fSxpLmV4dGVuZCh0aGlzLGkucGljayhiLHApKSxiLnBhcnNlJiYoZD10aGlzLnBhcnNlKGQsYil8fHt9KSwoYz1pLnJlc3VsdCh0aGlzLCJkZWZhdWx0cyIpKSYmKGQ9aS5kZWZhdWx0cyh7fSxkLGMpKSx0aGlzLnNldChkLGIpLHRoaXMuY2hhbmdlZD17fSx0aGlzLmluaXRpYWxpemUuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxwPVsidXJsIiwidXJsUm9vdCIsImNvbGxlY3Rpb24iXTtpLmV4dGVuZChvLnByb3RvdHlwZSxqLHtjaGFuZ2VkOm51bGwsdmFsaWRhdGlvbkVycm9yOm51bGwsaWRBdHRyaWJ1dGU6ImlkIixpbml0aWFsaXplOmZ1bmN0aW9uKCl7fSx0b0pTT046ZnVuY3Rpb24oKXtyZXR1cm4gaS5jbG9uZSh0aGlzLmF0dHJpYnV0ZXMpfSxzeW5jOmZ1bmN0aW9uKCl7cmV0dXJuIGEuc3luYy5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGdldDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5hdHRyaWJ1dGVzW2FdfSxlc2NhcGU6ZnVuY3Rpb24oYSl7cmV0dXJuIGkuZXNjYXBlKHRoaXMuZ2V0KGEpKX0saGFzOmZ1bmN0aW9uKGEpe3JldHVybiBudWxsIT10aGlzLmdldChhKX0sc2V0OmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGYsZyxoLGosayxsO2lmKG51bGw9PWEpcmV0dXJuIHRoaXM7aWYoIm9iamVjdCI9PXR5cGVvZiBhPyhlPWEsYz1iKTooZT17fSlbYV09YixjfHwoYz17fSksIXRoaXMuX3ZhbGlkYXRlKGUsYykpcmV0dXJuITE7Zj1jLnVuc2V0LGg9Yy5zaWxlbnQsZz1bXSxqPXRoaXMuX2NoYW5naW5nLHRoaXMuX2NoYW5naW5nPSEwLGp8fCh0aGlzLl9wcmV2aW91c0F0dHJpYnV0ZXM9aS5jbG9uZSh0aGlzLmF0dHJpYnV0ZXMpLHRoaXMuY2hhbmdlZD17fSksbD10aGlzLmF0dHJpYnV0ZXMsaz10aGlzLl9wcmV2aW91c0F0dHJpYnV0ZXMsdGhpcy5pZEF0dHJpYnV0ZSBpbiBlJiYodGhpcy5pZD1lW3RoaXMuaWRBdHRyaWJ1dGVdKTtmb3IoZCBpbiBlKWI9ZVtkXSxpLmlzRXF1YWwobFtkXSxiKXx8Zy5wdXNoKGQpLGkuaXNFcXVhbChrW2RdLGIpP2RlbGV0ZSB0aGlzLmNoYW5nZWRbZF06dGhpcy5jaGFuZ2VkW2RdPWIsZj9kZWxldGUgbFtkXTpsW2RdPWI7aWYoIWgpe2cubGVuZ3RoJiYodGhpcy5fcGVuZGluZz0hMCk7Zm9yKHZhciBtPTAsbj1nLmxlbmd0aDtuPm07bSsrKXRoaXMudHJpZ2dlcigiY2hhbmdlOiIrZ1ttXSx0aGlzLGxbZ1ttXV0sYyl9aWYoailyZXR1cm4gdGhpcztpZighaClmb3IoO3RoaXMuX3BlbmRpbmc7KXRoaXMuX3BlbmRpbmc9ITEsdGhpcy50cmlnZ2VyKCJjaGFuZ2UiLHRoaXMsYyk7cmV0dXJuIHRoaXMuX3BlbmRpbmc9ITEsdGhpcy5fY2hhbmdpbmc9ITEsdGhpc30sdW5zZXQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5zZXQoYSx2b2lkIDAsaS5leHRlbmQoe30sYix7dW5zZXQ6ITB9KSl9LGNsZWFyOmZ1bmN0aW9uKGEpe3ZhciBiPXt9O2Zvcih2YXIgYyBpbiB0aGlzLmF0dHJpYnV0ZXMpYltjXT12b2lkIDA7cmV0dXJuIHRoaXMuc2V0KGIsaS5leHRlbmQoe30sYSx7dW5zZXQ6ITB9KSl9LGhhc0NoYW5nZWQ6ZnVuY3Rpb24oYSl7cmV0dXJuIG51bGw9PWE/IWkuaXNFbXB0eSh0aGlzLmNoYW5nZWQpOmkuaGFzKHRoaXMuY2hhbmdlZCxhKX0sY2hhbmdlZEF0dHJpYnV0ZXM6ZnVuY3Rpb24oYSl7aWYoIWEpcmV0dXJuIHRoaXMuaGFzQ2hhbmdlZCgpP2kuY2xvbmUodGhpcy5jaGFuZ2VkKTohMTt2YXIgYixjPSExLGQ9dGhpcy5fY2hhbmdpbmc/dGhpcy5fcHJldmlvdXNBdHRyaWJ1dGVzOnRoaXMuYXR0cmlidXRlcztmb3IodmFyIGUgaW4gYSlpLmlzRXF1YWwoZFtlXSxiPWFbZV0pfHwoKGN8fChjPXt9KSlbZV09Yik7cmV0dXJuIGN9LHByZXZpb3VzOmZ1bmN0aW9uKGEpe3JldHVybiBudWxsIT1hJiZ0aGlzLl9wcmV2aW91c0F0dHJpYnV0ZXM/dGhpcy5fcHJldmlvdXNBdHRyaWJ1dGVzW2FdOm51bGx9LHByZXZpb3VzQXR0cmlidXRlczpmdW5jdGlvbigpe3JldHVybiBpLmNsb25lKHRoaXMuX3ByZXZpb3VzQXR0cmlidXRlcyl9LGZldGNoOmZ1bmN0aW9uKGEpe2E9YT9pLmNsb25lKGEpOnt9LHZvaWQgMD09PWEucGFyc2UmJihhLnBhcnNlPSEwKTt2YXIgYj10aGlzLGM9YS5zdWNjZXNzO3JldHVybiBhLnN1Y2Nlc3M9ZnVuY3Rpb24oZCl7cmV0dXJuIGIuc2V0KGIucGFyc2UoZCxhKSxhKT8oYyYmYyhiLGQsYSksdm9pZCBiLnRyaWdnZXIoInN5bmMiLGIsZCxhKSk6ITF9LE0odGhpcyxhKSx0aGlzLnN5bmMoInJlYWQiLHRoaXMsYSl9LHNhdmU6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGUsZixnPXRoaXMuYXR0cmlidXRlcztpZihudWxsPT1hfHwib2JqZWN0Ij09dHlwZW9mIGE/KGQ9YSxjPWIpOihkPXt9KVthXT1iLCEoIWR8fGMmJmMud2FpdHx8dGhpcy5zZXQoZCxjKSkpcmV0dXJuITE7aWYoYz1pLmV4dGVuZCh7dmFsaWRhdGU6ITB9LGMpLCF0aGlzLl92YWxpZGF0ZShkLGMpKXJldHVybiExO2QmJmMud2FpdCYmKHRoaXMuYXR0cmlidXRlcz1pLmV4dGVuZCh7fSxnLGQpKSx2b2lkIDA9PT1jLnBhcnNlJiYoYy5wYXJzZT0hMCk7dmFyIGg9dGhpcyxqPWMuc3VjY2VzcztyZXR1cm4gYy5zdWNjZXNzPWZ1bmN0aW9uKGEpe2guYXR0cmlidXRlcz1nO3ZhciBiPWgucGFyc2UoYSxjKTtyZXR1cm4gYy53YWl0JiYoYj1pLmV4dGVuZChkfHx7fSxiKSksaS5pc09iamVjdChiKSYmIWguc2V0KGIsYyk/ITE6KGomJmooaCxhLGMpLHZvaWQgaC50cmlnZ2VyKCJzeW5jIixoLGEsYykpfSxNKHRoaXMsYyksZT10aGlzLmlzTmV3KCk/ImNyZWF0ZSI6Yy5wYXRjaD8icGF0Y2giOiJ1cGRhdGUiLCJwYXRjaCI9PT1lJiYoYy5hdHRycz1kKSxmPXRoaXMuc3luYyhlLHRoaXMsYyksZCYmYy53YWl0JiYodGhpcy5hdHRyaWJ1dGVzPWcpLGZ9LGRlc3Ryb3k6ZnVuY3Rpb24oYSl7YT1hP2kuY2xvbmUoYSk6e307dmFyIGI9dGhpcyxjPWEuc3VjY2VzcyxkPWZ1bmN0aW9uKCl7Yi50cmlnZ2VyKCJkZXN0cm95IixiLGIuY29sbGVjdGlvbixhKX07aWYoYS5zdWNjZXNzPWZ1bmN0aW9uKGUpeyhhLndhaXR8fGIuaXNOZXcoKSkmJmQoKSxjJiZjKGIsZSxhKSxiLmlzTmV3KCl8fGIudHJpZ2dlcigic3luYyIsYixlLGEpfSx0aGlzLmlzTmV3KCkpcmV0dXJuIGEuc3VjY2VzcygpLCExO00odGhpcyxhKTt2YXIgZT10aGlzLnN5bmMoImRlbGV0ZSIsdGhpcyxhKTtyZXR1cm4gYS53YWl0fHxkKCksZX0sdXJsOmZ1bmN0aW9uKCl7dmFyIGE9aS5yZXN1bHQodGhpcywidXJsUm9vdCIpfHxpLnJlc3VsdCh0aGlzLmNvbGxlY3Rpb24sInVybCIpfHxMKCk7cmV0dXJuIHRoaXMuaXNOZXcoKT9hOmErKCIvIj09PWEuY2hhckF0KGEubGVuZ3RoLTEpPyIiOiIvIikrZW5jb2RlVVJJQ29tcG9uZW50KHRoaXMuaWQpfSxwYXJzZTpmdW5jdGlvbihhKXtyZXR1cm4gYX0sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHRoaXMuY29uc3RydWN0b3IodGhpcy5hdHRyaWJ1dGVzKX0saXNOZXc6ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbD09dGhpcy5pZH0saXNWYWxpZDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5fdmFsaWRhdGUoe30saS5leHRlbmQoYXx8e30se3ZhbGlkYXRlOiEwfSkpfSxfdmFsaWRhdGU6ZnVuY3Rpb24oYSxiKXtpZighYi52YWxpZGF0ZXx8IXRoaXMudmFsaWRhdGUpcmV0dXJuITA7YT1pLmV4dGVuZCh7fSx0aGlzLmF0dHJpYnV0ZXMsYSk7dmFyIGM9dGhpcy52YWxpZGF0aW9uRXJyb3I9dGhpcy52YWxpZGF0ZShhLGIpfHxudWxsO3JldHVybiBjPyh0aGlzLnRyaWdnZXIoImludmFsaWQiLHRoaXMsYyxpLmV4dGVuZChifHx7fSx7dmFsaWRhdGlvbkVycm9yOmN9KSksITEpOiEwfX0pO3ZhciBxPVsia2V5cyIsInZhbHVlcyIsInBhaXJzIiwiaW52ZXJ0IiwicGljayIsIm9taXQiXTtpLmVhY2gocSxmdW5jdGlvbihhKXtvLnByb3RvdHlwZVthXT1mdW5jdGlvbigpe3ZhciBiPWcuY2FsbChhcmd1bWVudHMpO3JldHVybiBiLnVuc2hpZnQodGhpcy5hdHRyaWJ1dGVzKSxpW2FdLmFwcGx5KGksYil9fSk7dmFyIHI9YS5Db2xsZWN0aW9uPWZ1bmN0aW9uKGEsYil7Ynx8KGI9e30pLGIudXJsJiYodGhpcy51cmw9Yi51cmwpLGIubW9kZWwmJih0aGlzLm1vZGVsPWIubW9kZWwpLHZvaWQgMCE9PWIuY29tcGFyYXRvciYmKHRoaXMuY29tcGFyYXRvcj1iLmNvbXBhcmF0b3IpLHRoaXMuX3Jlc2V0KCksdGhpcy5pbml0aWFsaXplLmFwcGx5KHRoaXMsYXJndW1lbnRzKSxhJiZ0aGlzLnJlc2V0KGEsaS5leHRlbmQoe3NpbGVudDohMH0sYikpfSxzPXthZGQ6ITAscmVtb3ZlOiEwLG1lcmdlOiEwfSx0PXthZGQ6ITAsbWVyZ2U6ITEscmVtb3ZlOiExfTtpLmV4dGVuZChyLnByb3RvdHlwZSxqLHttb2RlbDpvLGluaXRpYWxpemU6ZnVuY3Rpb24oKXt9LHRvSlNPTjpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24oYil7cmV0dXJuIGIudG9KU09OKGEpfSl9LHN5bmM6ZnVuY3Rpb24oKXtyZXR1cm4gYS5zeW5jLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sYWRkOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuc2V0KGEsaS5kZWZhdWx0cyhifHx7fSx0KSl9LHJlbW92ZTpmdW5jdGlvbihhLGIpe2E9aS5pc0FycmF5KGEpP2Euc2xpY2UoKTpbYV0sYnx8KGI9e30pO3ZhciBjLGQsZSxmO2ZvcihjPTAsZD1hLmxlbmd0aDtkPmM7YysrKWY9dGhpcy5nZXQoYVtjXSksZiYmKGRlbGV0ZSB0aGlzLl9ieUlkW2YuaWRdLGRlbGV0ZSB0aGlzLl9ieUlkW2YuY2lkXSxlPXRoaXMuaW5kZXhPZihmKSx0aGlzLm1vZGVscy5zcGxpY2UoZSwxKSx0aGlzLmxlbmd0aC0tLGIuc2lsZW50fHwoYi5pbmRleD1lLGYudHJpZ2dlcigicmVtb3ZlIixmLHRoaXMsYikpLHRoaXMuX3JlbW92ZVJlZmVyZW5jZShmKSk7cmV0dXJuIHRoaXN9LHNldDpmdW5jdGlvbihhLGIpe2I9aS5kZWZhdWx0cyhifHx7fSxzKSxiLnBhcnNlJiYoYT10aGlzLnBhcnNlKGEsYikpLGkuaXNBcnJheShhKXx8KGE9YT9bYV06W10pO3ZhciBjLGQsZSxnLGosaz1iLmF0LGw9dGhpcy5jb21wYXJhdG9yJiZudWxsPT1rJiZiLnNvcnQhPT0hMSxtPWkuaXNTdHJpbmcodGhpcy5jb21wYXJhdG9yKT90aGlzLmNvbXBhcmF0b3I6bnVsbCxuPVtdLG89W10scD17fTtmb3IoYz0wLGQ9YS5sZW5ndGg7ZD5jO2MrKykoZT10aGlzLl9wcmVwYXJlTW9kZWwoYVtjXSxiKSkmJigoZz10aGlzLmdldChlKSk/KGIucmVtb3ZlJiYocFtnLmNpZF09ITApLGIubWVyZ2UmJihnLnNldChlLmF0dHJpYnV0ZXMsYiksbCYmIWomJmcuaGFzQ2hhbmdlZChtKSYmKGo9ITApKSk6Yi5hZGQmJihuLnB1c2goZSksZS5vbigiYWxsIix0aGlzLl9vbk1vZGVsRXZlbnQsdGhpcyksdGhpcy5fYnlJZFtlLmNpZF09ZSxudWxsIT1lLmlkJiYodGhpcy5fYnlJZFtlLmlkXT1lKSkpO2lmKGIucmVtb3ZlKXtmb3IoYz0wLGQ9dGhpcy5sZW5ndGg7ZD5jOysrYylwWyhlPXRoaXMubW9kZWxzW2NdKS5jaWRdfHxvLnB1c2goZSk7by5sZW5ndGgmJnRoaXMucmVtb3ZlKG8sYil9aWYobi5sZW5ndGgmJihsJiYoaj0hMCksdGhpcy5sZW5ndGgrPW4ubGVuZ3RoLG51bGwhPWs/aC5hcHBseSh0aGlzLm1vZGVscyxbaywwXS5jb25jYXQobikpOmYuYXBwbHkodGhpcy5tb2RlbHMsbikpLGomJnRoaXMuc29ydCh7c2lsZW50OiEwfSksYi5zaWxlbnQpcmV0dXJuIHRoaXM7Zm9yKGM9MCxkPW4ubGVuZ3RoO2Q+YztjKyspKGU9bltjXSkudHJpZ2dlcigiYWRkIixlLHRoaXMsYik7cmV0dXJuIGomJnRoaXMudHJpZ2dlcigic29ydCIsdGhpcyxiKSx0aGlzfSxyZXNldDpmdW5jdGlvbihhLGIpe2J8fChiPXt9KTtmb3IodmFyIGM9MCxkPXRoaXMubW9kZWxzLmxlbmd0aDtkPmM7YysrKXRoaXMuX3JlbW92ZVJlZmVyZW5jZSh0aGlzLm1vZGVsc1tjXSk7cmV0dXJuIGIucHJldmlvdXNNb2RlbHM9dGhpcy5tb2RlbHMsdGhpcy5fcmVzZXQoKSx0aGlzLmFkZChhLGkuZXh0ZW5kKHtzaWxlbnQ6ITB9LGIpKSxiLnNpbGVudHx8dGhpcy50cmlnZ2VyKCJyZXNldCIsdGhpcyxiKSx0aGlzfSxwdXNoOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGE9dGhpcy5fcHJlcGFyZU1vZGVsKGEsYiksdGhpcy5hZGQoYSxpLmV4dGVuZCh7YXQ6dGhpcy5sZW5ndGh9LGIpKSxhfSxwb3A6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5hdCh0aGlzLmxlbmd0aC0xKTtyZXR1cm4gdGhpcy5yZW1vdmUoYixhKSxifSx1bnNoaWZ0OmZ1bmN0aW9uKGEsYil7cmV0dXJuIGE9dGhpcy5fcHJlcGFyZU1vZGVsKGEsYiksdGhpcy5hZGQoYSxpLmV4dGVuZCh7YXQ6MH0sYikpLGF9LHNoaWZ0OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuYXQoMCk7cmV0dXJuIHRoaXMucmVtb3ZlKGIsYSksYn0sc2xpY2U6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5tb2RlbHMuc2xpY2UoYSxiKX0sZ2V0OmZ1bmN0aW9uKGEpe3JldHVybiBudWxsPT1hP3ZvaWQgMDp0aGlzLl9ieUlkW251bGwhPWEuaWQ/YS5pZDphLmNpZHx8YV19LGF0OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLm1vZGVsc1thXX0sd2hlcmU6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gaS5pc0VtcHR5KGEpP2I/dm9pZCAwOltdOnRoaXNbYj8iZmluZCI6ImZpbHRlciJdKGZ1bmN0aW9uKGIpe2Zvcih2YXIgYyBpbiBhKWlmKGFbY10hPT1iLmdldChjKSlyZXR1cm4hMTtyZXR1cm4hMH0pfSxmaW5kV2hlcmU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMud2hlcmUoYSwhMCl9LHNvcnQ6ZnVuY3Rpb24oYSl7aWYoIXRoaXMuY29tcGFyYXRvcil0aHJvdyBuZXcgRXJyb3IoIkNhbm5vdCBzb3J0IGEgc2V0IHdpdGhvdXQgYSBjb21wYXJhdG9yIik7cmV0dXJuIGF8fChhPXt9KSxpLmlzU3RyaW5nKHRoaXMuY29tcGFyYXRvcil8fDE9PT10aGlzLmNvbXBhcmF0b3IubGVuZ3RoP3RoaXMubW9kZWxzPXRoaXMuc29ydEJ5KHRoaXMuY29tcGFyYXRvcix0aGlzKTp0aGlzLm1vZGVscy5zb3J0KGkuYmluZCh0aGlzLmNvbXBhcmF0b3IsdGhpcykpLGEuc2lsZW50fHx0aGlzLnRyaWdnZXIoInNvcnQiLHRoaXMsYSksdGhpc30sc29ydGVkSW5kZXg6ZnVuY3Rpb24oYSxiLGMpe2J8fChiPXRoaXMuY29tcGFyYXRvcik7dmFyIGQ9aS5pc0Z1bmN0aW9uKGIpP2I6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuZ2V0KGIpfTtyZXR1cm4gaS5zb3J0ZWRJbmRleCh0aGlzLm1vZGVscyxhLGQsYyl9LHBsdWNrOmZ1bmN0aW9uKGEpe3JldHVybiBpLmludm9rZSh0aGlzLm1vZGVscywiZ2V0IixhKX0sZmV0Y2g6ZnVuY3Rpb24oYSl7YT1hP2kuY2xvbmUoYSk6e30sdm9pZCAwPT09YS5wYXJzZSYmKGEucGFyc2U9ITApO3ZhciBiPWEuc3VjY2VzcyxjPXRoaXM7cmV0dXJuIGEuc3VjY2Vzcz1mdW5jdGlvbihkKXt2YXIgZT1hLnJlc2V0PyJyZXNldCI6InNldCI7Y1tlXShkLGEpLGImJmIoYyxkLGEpLGMudHJpZ2dlcigic3luYyIsYyxkLGEpfSxNKHRoaXMsYSksdGhpcy5zeW5jKCJyZWFkIix0aGlzLGEpfSxjcmVhdGU6ZnVuY3Rpb24oYSxiKXtpZihiPWI/aS5jbG9uZShiKTp7fSwhKGE9dGhpcy5fcHJlcGFyZU1vZGVsKGEsYikpKXJldHVybiExO2Iud2FpdHx8dGhpcy5hZGQoYSxiKTt2YXIgYz10aGlzLGQ9Yi5zdWNjZXNzO3JldHVybiBiLnN1Y2Nlc3M9ZnVuY3Rpb24oZSl7Yi53YWl0JiZjLmFkZChhLGIpLGQmJmQoYSxlLGIpfSxhLnNhdmUobnVsbCxiKSxhfSxwYXJzZTpmdW5jdGlvbihhKXtyZXR1cm4gYX0sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHRoaXMuY29uc3RydWN0b3IodGhpcy5tb2RlbHMpfSxfcmVzZXQ6ZnVuY3Rpb24oKXt0aGlzLmxlbmd0aD0wLHRoaXMubW9kZWxzPVtdLHRoaXMuX2J5SWQ9e319LF9wcmVwYXJlTW9kZWw6ZnVuY3Rpb24oYSxiKXtpZihhIGluc3RhbmNlb2YgbylyZXR1cm4gYS5jb2xsZWN0aW9ufHwoYS5jb2xsZWN0aW9uPXRoaXMpLGE7Ynx8KGI9e30pLGIuY29sbGVjdGlvbj10aGlzO3ZhciBjPW5ldyB0aGlzLm1vZGVsKGEsYik7cmV0dXJuIGMuX3ZhbGlkYXRlKGEsYik/YzoodGhpcy50cmlnZ2VyKCJpbnZhbGlkIix0aGlzLGEsYiksITEpfSxfcmVtb3ZlUmVmZXJlbmNlOmZ1bmN0aW9uKGEpe3RoaXM9PT1hLmNvbGxlY3Rpb24mJmRlbGV0ZSBhLmNvbGxlY3Rpb24sYS5vZmYoImFsbCIsdGhpcy5fb25Nb2RlbEV2ZW50LHRoaXMpfSxfb25Nb2RlbEV2ZW50OmZ1bmN0aW9uKGEsYixjLGQpeygiYWRkIiE9PWEmJiJyZW1vdmUiIT09YXx8Yz09PXRoaXMpJiYoImRlc3Ryb3kiPT09YSYmdGhpcy5yZW1vdmUoYixkKSxiJiZhPT09ImNoYW5nZToiK2IuaWRBdHRyaWJ1dGUmJihkZWxldGUgdGhpcy5fYnlJZFtiLnByZXZpb3VzKGIuaWRBdHRyaWJ1dGUpXSxudWxsIT1iLmlkJiYodGhpcy5fYnlJZFtiLmlkXT1iKSksdGhpcy50cmlnZ2VyLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9fSk7dmFyIHU9WyJmb3JFYWNoIiwiZWFjaCIsIm1hcCIsImNvbGxlY3QiLCJyZWR1Y2UiLCJmb2xkbCIsImluamVjdCIsInJlZHVjZVJpZ2h0IiwiZm9sZHIiLCJmaW5kIiwiZGV0ZWN0IiwiZmlsdGVyIiwic2VsZWN0IiwicmVqZWN0IiwiZXZlcnkiLCJhbGwiLCJzb21lIiwiYW55IiwiaW5jbHVkZSIsImNvbnRhaW5zIiwiaW52b2tlIiwibWF4IiwibWluIiwidG9BcnJheSIsInNpemUiLCJmaXJzdCIsImhlYWQiLCJ0YWtlIiwiaW5pdGlhbCIsInJlc3QiLCJ0YWlsIiwiZHJvcCIsImxhc3QiLCJ3aXRob3V0IiwiaW5kZXhPZiIsInNodWZmbGUiLCJsYXN0SW5kZXhPZiIsImlzRW1wdHkiLCJjaGFpbiJdO2kuZWFjaCh1LGZ1bmN0aW9uKGEpe3IucHJvdG90eXBlW2FdPWZ1bmN0aW9uKCl7dmFyIGI9Zy5jYWxsKGFyZ3VtZW50cyk7cmV0dXJuIGIudW5zaGlmdCh0aGlzLm1vZGVscyksaVthXS5hcHBseShpLGIpfX0pO3ZhciB2PVsiZ3JvdXBCeSIsImNvdW50QnkiLCJzb3J0QnkiXTtpLmVhY2godixmdW5jdGlvbihhKXtyLnByb3RvdHlwZVthXT1mdW5jdGlvbihiLGMpe3ZhciBkPWkuaXNGdW5jdGlvbihiKT9iOmZ1bmN0aW9uKGEpe3JldHVybiBhLmdldChiKX07cmV0dXJuIGlbYV0odGhpcy5tb2RlbHMsZCxjKX19KTt2YXIgdz1hLlZpZXc9ZnVuY3Rpb24oYSl7dGhpcy5jaWQ9aS51bmlxdWVJZCgidmlldyIpLHRoaXMuX2NvbmZpZ3VyZShhfHx7fSksdGhpcy5fZW5zdXJlRWxlbWVudCgpLHRoaXMuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyksdGhpcy5kZWxlZ2F0ZUV2ZW50cygpfSx4PS9eKFxTKylccyooLiopJC8seT1bIm1vZGVsIiwiY29sbGVjdGlvbiIsImVsIiwiaWQiLCJhdHRyaWJ1dGVzIiwiY2xhc3NOYW1lIiwidGFnTmFtZSIsImV2ZW50cyJdO2kuZXh0ZW5kKHcucHJvdG90eXBlLGose3RhZ05hbWU6ImRpdiIsJDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy4kZWwuZmluZChhKX0saW5pdGlhbGl6ZTpmdW5jdGlvbigpe30scmVuZGVyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9LHJlbW92ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLiRlbC5yZW1vdmUoKSx0aGlzLnN0b3BMaXN0ZW5pbmcoKSx0aGlzfSxzZXRFbGVtZW50OmZ1bmN0aW9uKGIsYyl7cmV0dXJuIHRoaXMuJGVsJiZ0aGlzLnVuZGVsZWdhdGVFdmVudHMoKSx0aGlzLiRlbD1iIGluc3RhbmNlb2YgYS4kP2I6YS4kKGIpLHRoaXMuZWw9dGhpcy4kZWxbMF0sYyE9PSExJiZ0aGlzLmRlbGVnYXRlRXZlbnRzKCksdGhpc30sZGVsZWdhdGVFdmVudHM6ZnVuY3Rpb24oYSl7aWYoIWEmJiEoYT1pLnJlc3VsdCh0aGlzLCJldmVudHMiKSkpcmV0dXJuIHRoaXM7dGhpcy51bmRlbGVnYXRlRXZlbnRzKCk7Zm9yKHZhciBiIGluIGEpe3ZhciBjPWFbYl07aWYoaS5pc0Z1bmN0aW9uKGMpfHwoYz10aGlzW2FbYl1dKSxjKXt2YXIgZD1iLm1hdGNoKHgpLGU9ZFsxXSxmPWRbMl07Yz1pLmJpbmQoYyx0aGlzKSxlKz0iLmRlbGVnYXRlRXZlbnRzIit0aGlzLmNpZCwiIj09PWY/dGhpcy4kZWwub24oZSxjKTp0aGlzLiRlbC5vbihlLGYsYyl9fXJldHVybiB0aGlzfSx1bmRlbGVnYXRlRXZlbnRzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGVsLm9mZigiLmRlbGVnYXRlRXZlbnRzIit0aGlzLmNpZCksdGhpc30sX2NvbmZpZ3VyZTpmdW5jdGlvbihhKXt0aGlzLm9wdGlvbnMmJihhPWkuZXh0ZW5kKHt9LGkucmVzdWx0KHRoaXMsIm9wdGlvbnMiKSxhKSksaS5leHRlbmQodGhpcyxpLnBpY2soYSx5KSksdGhpcy5vcHRpb25zPWF9LF9lbnN1cmVFbGVtZW50OmZ1bmN0aW9uKCl7aWYodGhpcy5lbCl0aGlzLnNldEVsZW1lbnQoaS5yZXN1bHQodGhpcywiZWwiKSwhMSk7ZWxzZXt2YXIgYj1pLmV4dGVuZCh7fSxpLnJlc3VsdCh0aGlzLCJhdHRyaWJ1dGVzIikpO3RoaXMuaWQmJihiLmlkPWkucmVzdWx0KHRoaXMsImlkIikpLHRoaXMuY2xhc3NOYW1lJiYoYlsiY2xhc3MiXT1pLnJlc3VsdCh0aGlzLCJjbGFzc05hbWUiKSk7dmFyIGM9YS4kKCI8IitpLnJlc3VsdCh0aGlzLCJ0YWdOYW1lIikrIj4iKS5hdHRyKGIpO3RoaXMuc2V0RWxlbWVudChjLCExKX19fSksYS5zeW5jPWZ1bmN0aW9uKGIsYyxkKXt2YXIgZT16W2JdO2kuZGVmYXVsdHMoZHx8KGQ9e30pLHtlbXVsYXRlSFRUUDphLmVtdWxhdGVIVFRQLGVtdWxhdGVKU09OOmEuZW11bGF0ZUpTT059KTt2YXIgZj17dHlwZTplLGRhdGFUeXBlOiJqc29uIn07aWYoZC51cmx8fChmLnVybD1pLnJlc3VsdChjLCJ1cmwiKXx8TCgpKSxudWxsIT1kLmRhdGF8fCFjfHwiY3JlYXRlIiE9PWImJiJ1cGRhdGUiIT09YiYmInBhdGNoIiE9PWJ8fChmLmNvbnRlbnRUeXBlPSJhcHBsaWNhdGlvbi9qc29uIixmLmRhdGE9SlNPTi5zdHJpbmdpZnkoZC5hdHRyc3x8Yy50b0pTT04oZCkpKSxkLmVtdWxhdGVKU09OJiYoZi5jb250ZW50VHlwZT0iYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIixmLmRhdGE9Zi5kYXRhP3ttb2RlbDpmLmRhdGF9Ont9KSxkLmVtdWxhdGVIVFRQJiYoIlBVVCI9PT1lfHwiREVMRVRFIj09PWV8fCJQQVRDSCI9PT1lKSl7Zi50eXBlPSJQT1NUIixkLmVtdWxhdGVKU09OJiYoZi5kYXRhLl9tZXRob2Q9ZSk7dmFyIGc9ZC5iZWZvcmVTZW5kO2QuYmVmb3JlU2VuZD1mdW5jdGlvbihhKXtyZXR1cm4gYS5zZXRSZXF1ZXN0SGVhZGVyKCJYLUhUVFAtTWV0aG9kLU92ZXJyaWRlIixlKSxnP2cuYXBwbHkodGhpcyxhcmd1bWVudHMpOnZvaWQgMH19IkdFVCI9PT1mLnR5cGV8fGQuZW11bGF0ZUpTT058fChmLnByb2Nlc3NEYXRhPSExKSwiUEFUQ0giIT09Zi50eXBlfHwhd2luZG93LkFjdGl2ZVhPYmplY3R8fHdpbmRvdy5leHRlcm5hbCYmd2luZG93LmV4dGVybmFsLm1zQWN0aXZlWEZpbHRlcmluZ0VuYWJsZWR8fChmLnhocj1mdW5jdGlvbigpe3JldHVybiBuZXcgQWN0aXZlWE9iamVjdCgiTWljcm9zb2Z0LlhNTEhUVFAiKX0pO3ZhciBoPWQueGhyPWEuYWpheChpLmV4dGVuZChmLGQpKTtyZXR1cm4gYy50cmlnZ2VyKCJyZXF1ZXN0IixjLGgsZCksaH07dmFyIHo9e2NyZWF0ZToiUE9TVCIsdXBkYXRlOiJQVVQiLHBhdGNoOiJQQVRDSCIsImRlbGV0ZSI6IkRFTEVURSIscmVhZDoiR0VUIn07YS5hamF4PWZ1bmN0aW9uKCl7cmV0dXJuIGEuJC5hamF4LmFwcGx5KGEuJCxhcmd1bWVudHMpfTt2YXIgQT1hLlJvdXRlcj1mdW5jdGlvbihhKXthfHwoYT17fSksYS5yb3V0ZXMmJih0aGlzLnJvdXRlcz1hLnJvdXRlcyksdGhpcy5fYmluZFJvdXRlcygpLHRoaXMuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LEI9L1woKC4qPylcKS9nLEM9LyhcKFw/KT86XHcrL2csRD0vXCpcdysvZyxFPS9bXC17fVxbXF0rPy4sXFxcXiR8I1xzXS9nO2kuZXh0ZW5kKEEucHJvdG90eXBlLGose2luaXRpYWxpemU6ZnVuY3Rpb24oKXt9LHJvdXRlOmZ1bmN0aW9uKGIsYyxkKXtpLmlzUmVnRXhwKGIpfHwoYj10aGlzLl9yb3V0ZVRvUmVnRXhwKGIpKSxpLmlzRnVuY3Rpb24oYykmJihkPWMsYz0iIiksZHx8KGQ9dGhpc1tjXSk7dmFyIGU9dGhpcztyZXR1cm4gYS5oaXN0b3J5LnJvdXRlKGIsZnVuY3Rpb24oZil7dmFyIGc9ZS5fZXh0cmFjdFBhcmFtZXRlcnMoYixmKTtkJiZkLmFwcGx5KGUsZyksZS50cmlnZ2VyLmFwcGx5KGUsWyJyb3V0ZToiK2NdLmNvbmNhdChnKSksZS50cmlnZ2VyKCJyb3V0ZSIsYyxnKSxhLmhpc3RvcnkudHJpZ2dlcigicm91dGUiLGUsYyxnKX0pLHRoaXN9LG5hdmlnYXRlOmZ1bmN0aW9uKGIsYyl7cmV0dXJuIGEuaGlzdG9yeS5uYXZpZ2F0ZShiLGMpLHRoaXN9LF9iaW5kUm91dGVzOmZ1bmN0aW9uKCl7aWYodGhpcy5yb3V0ZXMpe3RoaXMucm91dGVzPWkucmVzdWx0KHRoaXMsInJvdXRlcyIpO2Zvcih2YXIgYSxiPWkua2V5cyh0aGlzLnJvdXRlcyk7bnVsbCE9KGE9Yi5wb3AoKSk7KXRoaXMucm91dGUoYSx0aGlzLnJvdXRlc1thXSl9fSxfcm91dGVUb1JlZ0V4cDpmdW5jdGlvbihhKXtyZXR1cm4gYT1hLnJlcGxhY2UoRSwiXFwkJiIpLnJlcGxhY2UoQiwiKD86JDEpPyIpLnJlcGxhY2UoQyxmdW5jdGlvbihhLGIpe3JldHVybiBiP2E6IihbXi9dKykifSkucmVwbGFjZShELCIoLio/KSIpLG5ldyBSZWdFeHAoIl4iK2ErIiQiKX0sX2V4dHJhY3RQYXJhbWV0ZXJzOmZ1bmN0aW9uKGEsYil7dmFyIGM9YS5leGVjKGIpLnNsaWNlKDEpO3JldHVybiBpLm1hcChjLGZ1bmN0aW9uKGEpe3JldHVybiBhP2RlY29kZVVSSUNvbXBvbmVudChhKTpudWxsfSl9fSk7dmFyIEY9YS5IaXN0b3J5PWZ1bmN0aW9uKCl7dGhpcy5oYW5kbGVycz1bXSxpLmJpbmRBbGwodGhpcywiY2hlY2tVcmwiKSwidW5kZWZpbmVkIiE9dHlwZW9mIHdpbmRvdyYmKHRoaXMubG9jYXRpb249d2luZG93LmxvY2F0aW9uLHRoaXMuaGlzdG9yeT13aW5kb3cuaGlzdG9yeSl9LEc9L15bI1wvXXxccyskL2csSD0vXlwvK3xcLyskL2csST0vbXNpZSBbXHcuXSsvLEo9L1wvJC87Ri5zdGFydGVkPSExLGkuZXh0ZW5kKEYucHJvdG90eXBlLGose2ludGVydmFsOjUwLGdldEhhc2g6ZnVuY3Rpb24oYSl7dmFyIGI9KGF8fHRoaXMpLmxvY2F0aW9uLmhyZWYubWF0Y2goLyMoLiopJC8pO3JldHVybiBiP2JbMV06IiJ9LGdldEZyYWdtZW50OmZ1bmN0aW9uKGEsYil7aWYobnVsbD09YSlpZih0aGlzLl9oYXNQdXNoU3RhdGV8fCF0aGlzLl93YW50c0hhc2hDaGFuZ2V8fGIpe2E9dGhpcy5sb2NhdGlvbi5wYXRobmFtZTt2YXIgYz10aGlzLnJvb3QucmVwbGFjZShKLCIiKTthLmluZGV4T2YoYyl8fChhPWEuc3Vic3RyKGMubGVuZ3RoKSl9ZWxzZSBhPXRoaXMuZ2V0SGFzaCgpO3JldHVybiBhLnJlcGxhY2UoRywiIil9LHN0YXJ0OmZ1bmN0aW9uKGIpe2lmKEYuc3RhcnRlZCl0aHJvdyBuZXcgRXJyb3IoIkJhY2tib25lLmhpc3RvcnkgaGFzIGFscmVhZHkgYmVlbiBzdGFydGVkIik7Ri5zdGFydGVkPSEwLHRoaXMub3B0aW9ucz1pLmV4dGVuZCh7fSx7cm9vdDoiLyJ9LHRoaXMub3B0aW9ucyxiKSx0aGlzLnJvb3Q9dGhpcy5vcHRpb25zLnJvb3QsdGhpcy5fd2FudHNIYXNoQ2hhbmdlPXRoaXMub3B0aW9ucy5oYXNoQ2hhbmdlIT09ITEsdGhpcy5fd2FudHNQdXNoU3RhdGU9ISF0aGlzLm9wdGlvbnMucHVzaFN0YXRlLHRoaXMuX2hhc1B1c2hTdGF0ZT0hISh0aGlzLm9wdGlvbnMucHVzaFN0YXRlJiZ0aGlzLmhpc3RvcnkmJnRoaXMuaGlzdG9yeS5wdXNoU3RhdGUpOwp2YXIgYz10aGlzLmdldEZyYWdtZW50KCksZD1kb2N1bWVudC5kb2N1bWVudE1vZGUsZT1JLmV4ZWMobmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpKSYmKCFkfHw3Pj1kKTt0aGlzLnJvb3Q9KCIvIit0aGlzLnJvb3QrIi8iKS5yZXBsYWNlKEgsIi8iKSxlJiZ0aGlzLl93YW50c0hhc2hDaGFuZ2UmJih0aGlzLmlmcmFtZT1hLiQoJzxpZnJhbWUgc3JjPSJqYXZhc2NyaXB0OjAiIHRhYmluZGV4PSItMSIgLz4nKS5oaWRlKCkuYXBwZW5kVG8oImJvZHkiKVswXS5jb250ZW50V2luZG93LHRoaXMubmF2aWdhdGUoYykpLHRoaXMuX2hhc1B1c2hTdGF0ZT9hLiQod2luZG93KS5vbigicG9wc3RhdGUiLHRoaXMuY2hlY2tVcmwpOnRoaXMuX3dhbnRzSGFzaENoYW5nZSYmIm9uaGFzaGNoYW5nZSJpbiB3aW5kb3cmJiFlP2EuJCh3aW5kb3cpLm9uKCJoYXNoY2hhbmdlIix0aGlzLmNoZWNrVXJsKTp0aGlzLl93YW50c0hhc2hDaGFuZ2UmJih0aGlzLl9jaGVja1VybEludGVydmFsPXNldEludGVydmFsKHRoaXMuY2hlY2tVcmwsdGhpcy5pbnRlcnZhbCkpLHRoaXMuZnJhZ21lbnQ9Yzt2YXIgZj10aGlzLmxvY2F0aW9uLGc9Zi5wYXRobmFtZS5yZXBsYWNlKC9bXlwvXSQvLCIkJi8iKT09PXRoaXMucm9vdDtyZXR1cm4gdGhpcy5fd2FudHNIYXNoQ2hhbmdlJiZ0aGlzLl93YW50c1B1c2hTdGF0ZSYmIXRoaXMuX2hhc1B1c2hTdGF0ZSYmIWc/KHRoaXMuZnJhZ21lbnQ9dGhpcy5nZXRGcmFnbWVudChudWxsLCEwKSx0aGlzLmxvY2F0aW9uLnJlcGxhY2UodGhpcy5yb290K3RoaXMubG9jYXRpb24uc2VhcmNoKyIjIit0aGlzLmZyYWdtZW50KSwhMCk6KHRoaXMuX3dhbnRzUHVzaFN0YXRlJiZ0aGlzLl9oYXNQdXNoU3RhdGUmJmcmJmYuaGFzaCYmKHRoaXMuZnJhZ21lbnQ9dGhpcy5nZXRIYXNoKCkucmVwbGFjZShHLCIiKSx0aGlzLmhpc3RvcnkucmVwbGFjZVN0YXRlKHt9LGRvY3VtZW50LnRpdGxlLHRoaXMucm9vdCt0aGlzLmZyYWdtZW50K2Yuc2VhcmNoKSksdGhpcy5vcHRpb25zLnNpbGVudD92b2lkIDA6dGhpcy5sb2FkVXJsKCkpfSxzdG9wOmZ1bmN0aW9uKCl7YS4kKHdpbmRvdykub2ZmKCJwb3BzdGF0ZSIsdGhpcy5jaGVja1VybCkub2ZmKCJoYXNoY2hhbmdlIix0aGlzLmNoZWNrVXJsKSxjbGVhckludGVydmFsKHRoaXMuX2NoZWNrVXJsSW50ZXJ2YWwpLEYuc3RhcnRlZD0hMX0scm91dGU6ZnVuY3Rpb24oYSxiKXt0aGlzLmhhbmRsZXJzLnVuc2hpZnQoe3JvdXRlOmEsY2FsbGJhY2s6Yn0pfSxjaGVja1VybDpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZ2V0RnJhZ21lbnQoKTtyZXR1cm4gYT09PXRoaXMuZnJhZ21lbnQmJnRoaXMuaWZyYW1lJiYoYT10aGlzLmdldEZyYWdtZW50KHRoaXMuZ2V0SGFzaCh0aGlzLmlmcmFtZSkpKSxhPT09dGhpcy5mcmFnbWVudD8hMToodGhpcy5pZnJhbWUmJnRoaXMubmF2aWdhdGUoYSksdm9pZCh0aGlzLmxvYWRVcmwoKXx8dGhpcy5sb2FkVXJsKHRoaXMuZ2V0SGFzaCgpKSkpfSxsb2FkVXJsOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZnJhZ21lbnQ9dGhpcy5nZXRGcmFnbWVudChhKSxjPWkuYW55KHRoaXMuaGFuZGxlcnMsZnVuY3Rpb24oYSl7cmV0dXJuIGEucm91dGUudGVzdChiKT8oYS5jYWxsYmFjayhiKSwhMCk6dm9pZCAwfSk7cmV0dXJuIGN9LG5hdmlnYXRlOmZ1bmN0aW9uKGEsYil7aWYoIUYuc3RhcnRlZClyZXR1cm4hMTtpZihiJiZiIT09ITB8fChiPXt0cmlnZ2VyOmJ9KSxhPXRoaXMuZ2V0RnJhZ21lbnQoYXx8IiIpLHRoaXMuZnJhZ21lbnQhPT1hKXt0aGlzLmZyYWdtZW50PWE7dmFyIGM9dGhpcy5yb290K2E7aWYodGhpcy5faGFzUHVzaFN0YXRlKXRoaXMuaGlzdG9yeVtiLnJlcGxhY2U/InJlcGxhY2VTdGF0ZSI6InB1c2hTdGF0ZSJdKHt9LGRvY3VtZW50LnRpdGxlLGMpO2Vsc2V7aWYoIXRoaXMuX3dhbnRzSGFzaENoYW5nZSlyZXR1cm4gdGhpcy5sb2NhdGlvbi5hc3NpZ24oYyk7dGhpcy5fdXBkYXRlSGFzaCh0aGlzLmxvY2F0aW9uLGEsYi5yZXBsYWNlKSx0aGlzLmlmcmFtZSYmYSE9PXRoaXMuZ2V0RnJhZ21lbnQodGhpcy5nZXRIYXNoKHRoaXMuaWZyYW1lKSkmJihiLnJlcGxhY2V8fHRoaXMuaWZyYW1lLmRvY3VtZW50Lm9wZW4oKS5jbG9zZSgpLHRoaXMuX3VwZGF0ZUhhc2godGhpcy5pZnJhbWUubG9jYXRpb24sYSxiLnJlcGxhY2UpKX1iLnRyaWdnZXImJnRoaXMubG9hZFVybChhKX19LF91cGRhdGVIYXNoOmZ1bmN0aW9uKGEsYixjKXtpZihjKXt2YXIgZD1hLmhyZWYucmVwbGFjZSgvKGphdmFzY3JpcHQ6fCMpLiokLywiIik7YS5yZXBsYWNlKGQrIiMiK2IpfWVsc2UgYS5oYXNoPSIjIitifX0pLGEuaGlzdG9yeT1uZXcgRjt2YXIgSz1mdW5jdGlvbihhLGIpe3ZhciBjLGQ9dGhpcztjPWEmJmkuaGFzKGEsImNvbnN0cnVjdG9yIik/YS5jb25zdHJ1Y3RvcjpmdW5jdGlvbigpe3JldHVybiBkLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0saS5leHRlbmQoYyxkLGIpO3ZhciBlPWZ1bmN0aW9uKCl7dGhpcy5jb25zdHJ1Y3Rvcj1jfTtyZXR1cm4gZS5wcm90b3R5cGU9ZC5wcm90b3R5cGUsYy5wcm90b3R5cGU9bmV3IGUsYSYmaS5leHRlbmQoYy5wcm90b3R5cGUsYSksYy5fX3N1cGVyX189ZC5wcm90b3R5cGUsY307by5leHRlbmQ9ci5leHRlbmQ9QS5leHRlbmQ9dy5leHRlbmQ9Ri5leHRlbmQ9Szt2YXIgTD1mdW5jdGlvbigpe3Rocm93IG5ldyBFcnJvcignQSAidXJsIiBwcm9wZXJ0eSBvciBmdW5jdGlvbiBtdXN0IGJlIHNwZWNpZmllZCcpfSxNPWZ1bmN0aW9uKGEsYil7dmFyIGM9Yi5lcnJvcjtiLmVycm9yPWZ1bmN0aW9uKGQpe2MmJmMoYSxkLGIpLGEudHJpZ2dlcigiZXJyb3IiLGEsZCxiKX19fS5jYWxsKHRoaXMpLGMoImJhY2tib25lIixbInVuZGVyc2NvcmUiLCJqcXVlcnkiXSxmdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgYjtyZXR1cm4gYnx8YS5CYWNrYm9uZX19KHRoaXMpKSxmdW5jdGlvbihhLGQpeyJvYmplY3QiPT10eXBlb2YgZXhwb3J0cyYmImZ1bmN0aW9uIj09dHlwZW9mIGI/bW9kdWxlLmV4cG9ydHM9ZChiKCJiYWNrYm9uZSIpKToiZnVuY3Rpb24iPT10eXBlb2YgYyYmYy5hbWQ/YygibG9jYWxzdG9yYWdlIixbImJhY2tib25lIl0sZnVuY3Rpb24oYil7cmV0dXJuIGQoYnx8YS5CYWNrYm9uZSl9KTpkKEJhY2tib25lKX0odGhpcyxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKCl7cmV0dXJuKDY1NTM2KigxK01hdGgucmFuZG9tKCkpfDApLnRvU3RyaW5nKDE2KS5zdWJzdHJpbmcoMSl9ZnVuY3Rpb24gYygpe3JldHVybiBiKCkrYigpKyItIitiKCkrIi0iK2IoKSsiLSIrYigpKyItIitiKCkrYigpK2IoKX1mdW5jdGlvbiBkKGEpe3JldHVybiBhPT09T2JqZWN0KGEpfWZ1bmN0aW9uIGUoYSxiKXtmb3IodmFyIGM9YS5sZW5ndGg7Yy0tOylpZihhW2NdPT09YilyZXR1cm4hMDtyZXR1cm4hMX1mdW5jdGlvbiBmKGEsYil7Zm9yKHZhciBjIGluIGIpYVtjXT1iW2NdO3JldHVybiBhfXJldHVybiBhLkxvY2FsU3RvcmFnZT13aW5kb3cuU3RvcmU9ZnVuY3Rpb24oYSxiKXtpZighdGhpcy5sb2NhbFN0b3JhZ2UpdGhyb3ciQmFja2JvbmUubG9jYWxTdG9yYWdlOiBFbnZpcm9ubWVudCBkb2VzIG5vdCBzdXBwb3J0IGxvY2FsU3RvcmFnZS4iO3RoaXMubmFtZT1hLHRoaXMuc2VyaWFsaXplcj1ifHx7c2VyaWFsaXplOmZ1bmN0aW9uKGEpe3JldHVybiBkKGEpP0pTT04uc3RyaW5naWZ5KGEpOmF9LGRlc2VyaWFsaXplOmZ1bmN0aW9uKGEpe3JldHVybiBhJiZKU09OLnBhcnNlKGEpfX07dmFyIGM9dGhpcy5sb2NhbFN0b3JhZ2UoKS5nZXRJdGVtKHRoaXMubmFtZSk7dGhpcy5yZWNvcmRzPWMmJmMuc3BsaXQoIiwiKXx8W119LGYoYS5Mb2NhbFN0b3JhZ2UucHJvdG90eXBlLHtzYXZlOmZ1bmN0aW9uKCl7dGhpcy5sb2NhbFN0b3JhZ2UoKS5zZXRJdGVtKHRoaXMubmFtZSx0aGlzLnJlY29yZHMuam9pbigiLCIpKX0sY3JlYXRlOmZ1bmN0aW9uKGEpe3JldHVybiBhLmlkfHwoYS5pZD1jKCksYS5zZXQoYS5pZEF0dHJpYnV0ZSxhLmlkKSksdGhpcy5sb2NhbFN0b3JhZ2UoKS5zZXRJdGVtKHRoaXMuX2l0ZW1OYW1lKGEuaWQpLHRoaXMuc2VyaWFsaXplci5zZXJpYWxpemUoYSkpLHRoaXMucmVjb3Jkcy5wdXNoKGEuaWQudG9TdHJpbmcoKSksdGhpcy5zYXZlKCksdGhpcy5maW5kKGEpIT09ITF9LHVwZGF0ZTpmdW5jdGlvbihhKXt0aGlzLmxvY2FsU3RvcmFnZSgpLnNldEl0ZW0odGhpcy5faXRlbU5hbWUoYS5pZCksdGhpcy5zZXJpYWxpemVyLnNlcmlhbGl6ZShhKSk7dmFyIGI9YS5pZC50b1N0cmluZygpO3JldHVybiBlKHRoaXMucmVjb3JkcyxiKXx8KHRoaXMucmVjb3Jkcy5wdXNoKGIpLHRoaXMuc2F2ZSgpKSx0aGlzLmZpbmQoYSkhPT0hMX0sZmluZDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5zZXJpYWxpemVyLmRlc2VyaWFsaXplKHRoaXMubG9jYWxTdG9yYWdlKCkuZ2V0SXRlbSh0aGlzLl9pdGVtTmFtZShhLmlkKSkpfSxmaW5kQWxsOmZ1bmN0aW9uKCl7Zm9yKHZhciBhLGIsYz1bXSxkPTA7ZDx0aGlzLnJlY29yZHMubGVuZ3RoO2QrKylhPXRoaXMucmVjb3Jkc1tkXSxiPXRoaXMuc2VyaWFsaXplci5kZXNlcmlhbGl6ZSh0aGlzLmxvY2FsU3RvcmFnZSgpLmdldEl0ZW0odGhpcy5faXRlbU5hbWUoYSkpKSxudWxsIT1iJiZjLnB1c2goYik7cmV0dXJuIGN9LGRlc3Ryb3k6ZnVuY3Rpb24oYSl7dGhpcy5sb2NhbFN0b3JhZ2UoKS5yZW1vdmVJdGVtKHRoaXMuX2l0ZW1OYW1lKGEuaWQpKTtmb3IodmFyIGI9YS5pZC50b1N0cmluZygpLGM9MDtjPHRoaXMucmVjb3Jkcy5sZW5ndGg7YysrKXRoaXMucmVjb3Jkc1tjXT09PWImJnRoaXMucmVjb3Jkcy5zcGxpY2UoYywxKTtyZXR1cm4gdGhpcy5zYXZlKCksYX0sbG9jYWxTdG9yYWdlOmZ1bmN0aW9uKCl7cmV0dXJuIGxvY2FsU3RvcmFnZX0sX2NsZWFyOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5sb2NhbFN0b3JhZ2UoKSxiPW5ldyBSZWdFeHAoIl4iK3RoaXMubmFtZSsiLSIpO2EucmVtb3ZlSXRlbSh0aGlzLm5hbWUpO2Zvcih2YXIgYyBpbiBhKWIudGVzdChjKSYmYS5yZW1vdmVJdGVtKGMpO3RoaXMucmVjb3Jkcy5sZW5ndGg9MH0sX3N0b3JhZ2VTaXplOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubG9jYWxTdG9yYWdlKCkubGVuZ3RofSxfaXRlbU5hbWU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMubmFtZSsiLSIrYX19KSxhLkxvY2FsU3RvcmFnZS5zeW5jPXdpbmRvdy5TdG9yZS5zeW5jPWEubG9jYWxTeW5jPWZ1bmN0aW9uKGIsYyxkKXt2YXIgZSxmLGc9Yy5sb2NhbFN0b3JhZ2V8fGMuY29sbGVjdGlvbi5sb2NhbFN0b3JhZ2UsaD1hLiQ/YS4kLkRlZmVycmVkJiZhLiQuRGVmZXJyZWQoKTphLkRlZmVycmVkJiZhLkRlZmVycmVkKCk7dHJ5e3N3aXRjaChiKXtjYXNlInJlYWQiOmU9dm9pZCAwIT1jLmlkP2cuZmluZChjKTpnLmZpbmRBbGwoKTticmVhaztjYXNlImNyZWF0ZSI6ZT1nLmNyZWF0ZShjKTticmVhaztjYXNlInVwZGF0ZSI6ZT1nLnVwZGF0ZShjKTticmVhaztjYXNlImRlbGV0ZSI6ZT1nLmRlc3Ryb3koYyl9fWNhdGNoKGkpe2Y9MjI9PT1pLmNvZGUmJjA9PT1nLl9zdG9yYWdlU2l6ZSgpPyJQcml2YXRlIGJyb3dzaW5nIGlzIHVuc3VwcG9ydGVkIjppLm1lc3NhZ2V9cmV0dXJuIGU/KGQmJmQuc3VjY2VzcyYmKCIwLjkuMTAiPT09YS5WRVJTSU9OP2Quc3VjY2VzcyhjLGUsZCk6ZC5zdWNjZXNzKGUpKSxoJiZoLnJlc29sdmUoZSkpOihmPWY/ZjoiUmVjb3JkIE5vdCBGb3VuZCIsZCYmZC5lcnJvciYmKCIwLjkuMTAiPT09YS5WRVJTSU9OP2QuZXJyb3IoYyxmLGQpOmQuZXJyb3IoZikpLGgmJmgucmVqZWN0KGYpKSxkJiZkLmNvbXBsZXRlJiZkLmNvbXBsZXRlKGUpLGgmJmgucHJvbWlzZSgpfSxhLmFqYXhTeW5jPWEuc3luYyxhLmdldFN5bmNNZXRob2Q9ZnVuY3Rpb24oYil7cmV0dXJuIGIubG9jYWxTdG9yYWdlfHxiLmNvbGxlY3Rpb24mJmIuY29sbGVjdGlvbi5sb2NhbFN0b3JhZ2U/YS5sb2NhbFN5bmM6YS5hamF4U3luY30sYS5zeW5jPWZ1bmN0aW9uKGIsYyxkKXtyZXR1cm4gYS5nZXRTeW5jTWV0aG9kKGMpLmFwcGx5KHRoaXMsW2IsYyxkXSl9LGEuTG9jYWxTdG9yYWdlfSksYygiZ2FsbGVyeS91dGlscy9yZXNwb25zaXZlLmFkYXB0ZXIiLFsianF1ZXJ5IiwidW5kZXJzY29yZSJdLGZ1bmN0aW9uKGEpe3ZhciBiPXtnZXRNZWRpYVR5cGU6ZnVuY3Rpb24oKXtpZih0aGlzLm1lZGlhVHlwZSlyZXR1cm4gdGhpcy5tZWRpYVR5cGU7aWYoIXdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKXJldHVybiB0aGlzLm1lZGlhVHlwZT0iZGVza3RvcCI7dmFyIGE9d2luZG93LmdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuYm9keSwiOmFmdGVyIikuZ2V0UHJvcGVydHlWYWx1ZSgiY29udGVudCIpLm1hdGNoKC9bYS16QS1aX1wtMC05XSsvZyk7cmV0dXJuIHRoaXMubWVkaWFUeXBlPWEmJmEubGVuZ3RoPjA/YVswXToiZGVza3RvcCJ9LGdldE9wdGlvbkJ5TWVkaWFUeXBlOmZ1bmN0aW9uKGIsYyl7cmV0dXJuIGEuaXNQbGFpbk9iamVjdChiW2NdKT9iW2NdW3RoaXMuZ2V0TWVkaWFUeXBlKCldOmJbY119LHByZXNldE1hcHBlclRodW1iOmZ1bmN0aW9uKGEpe3ZhciBiO3N3aXRjaCh0aGlzLmdldE1lZGlhVHlwZSgpKXtjYXNlImRlc2t0b3AiOmNhc2UicGFkIjpjYXNlInBob25lIjpiPWEuZ2V0KCJ0aHVtYiIpfXJldHVybiBifSxwcmVzZXRNYXBwZXJMYXJnZTpmdW5jdGlvbihhKXt2YXIgYjtzd2l0Y2godGhpcy5nZXRNZWRpYVR5cGUoKSl7Y2FzZSJkZXNrdG9wIjpiPWEuZ2V0KCJsYXJnZSIpO2JyZWFrO2Nhc2UicGFkIjpiPWEuZ2V0KCJsYXJnZV9wYWRzIik7YnJlYWs7Y2FzZSJwaG9uZSI6Yj1hLmdldCgibGFyZ2VfcGhvbmVzIil9cmV0dXJuIGJ9fTtyZXR1cm4gYn0pLGMoImdhbGxlcnkvbW9kZWxzL2ltYWdlLm1vZGVsIixbInVuZGVyc2NvcmUiLCJiYWNrYm9uZSIsImdhbGxlcnkvdXRpbHMvcmVzcG9uc2l2ZS5hZGFwdGVyIl0sZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWIuTW9kZWwuZXh0ZW5kKHtpZEF0dHJpYnV0ZToiZGlnZXN0IixkZWZhdWx0czpmdW5jdGlvbigpe3JldHVybnt0aHVtYjp7c3JjOnZvaWQgMCx3aWR0aDp2b2lkIDAsaGVpZ2h0OnZvaWQgMCxfdmlldzp2b2lkIDB9LGxhcmdlOntzcmM6dm9pZCAwLHdpZHRoOnZvaWQgMCxoZWlnaHQ6dm9pZCAwLF92aWV3OnZvaWQgMH0sZmlsZW5hbWU6dm9pZCAwLGZpbGVuYW1lT3JpZzp2b2lkIDAsZGlnZXN0OnZvaWQgMCxpbmRleDp2b2lkIDAsb3JpZW50YXRpb246dm9pZCAwLHJhdGlvOjAsZXhpZjp7fSxtZXRhOnt9LGltYWdlUGFnZVBhdGg6dm9pZCAwfX0saW5pdGlhbGl6ZTpmdW5jdGlvbihiLGMpe3ZvaWQgMCE9PWMmJihhLmZvckVhY2goYy5wcmVzZXRzLGEuYmluZChmdW5jdGlvbihhLGMpe3RoaXMuYXR0cmlidXRlc1tjXS5zcmM9YS5iYXNldXJsKyIvIitiLmZpbGVuYW1lfSx0aGlzKSksdGhpcy5hdHRyaWJ1dGVzLmZpbGVuYW1lT3JpZz1iLmZpbGVuYW1lLnJlcGxhY2UoIi0iK2IuZGlnZXN0LCIiKSxjLmdhbGxlcnkmJmMuZ2FsbGVyeS5pbWFnZVBhZ2VzJiZjLmdhbGxlcnkuYmFzZXBhdGgmJih0aGlzLmF0dHJpYnV0ZXMuaW1hZ2VQYWdlUGF0aD1jLmdhbGxlcnkucGF0aC5yZXBsYWNlKC9cLmh0bWwkLywiIikrIi8iK2IuZGlnZXN0KSl9LGdldFRodW1iOmZ1bmN0aW9uKCl7cmV0dXJuIGMucHJlc2V0TWFwcGVyVGh1bWIodGhpcyl9LGdldExhcmdlOmZ1bmN0aW9uKCl7cmV0dXJuIGMucHJlc2V0TWFwcGVyTGFyZ2UodGhpcyl9LGdldFRodW1iVmlldzpmdW5jdGlvbigpe3JldHVybiB0aGlzLl90aHVtYlZpZXd9LHNldFRodW1iVmlldzpmdW5jdGlvbihhKXt0aGlzLl90aHVtYlZpZXc9YX0sZ2V0TGFyZ2VWaWV3OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2xhcmdlVmlld30sc2V0TGFyZ2VWaWV3OmZ1bmN0aW9uKGEpe3RoaXMuX2xhcmdlVmlldz1hfSxpbmRleDpmdW5jdGlvbigpe3JldHVybiB2b2lkIDA9PT10aGlzLmF0dHJpYnV0ZXMuaW5kZXg/dGhpcy5jb2xsZWN0aW9uP3RoaXMuY29sbGVjdGlvbi5pbmRleE9mKHRoaXMpOnZvaWQgMDp0aGlzLmF0dHJpYnV0ZXMuaW5kZXh9fSk7cmV0dXJuIGR9KSxjKCJnYWxsZXJ5L2NvbGxlY3Rpb25zL2ltYWdlLmNvbGxlY3Rpb24iLFsiYmFja2JvbmUiLCJsb2NhbHN0b3JhZ2UiLCJnYWxsZXJ5L21vZGVscy9pbWFnZS5tb2RlbCJdLGZ1bmN0aW9uKGEsYixjKXt2YXIgZD1hLkNvbGxlY3Rpb24uZXh0ZW5kKHttb2RlbDpjLGluaXRpYWxpemU6ZnVuY3Rpb24oYixjKXtjLmxvY2FsU3RvcmFnZUtleSYmKHRoaXMua2V5PWMubG9jYWxTdG9yYWdlS2V5LHRoaXMubG9jYWxTdG9yYWdlPW5ldyBhLkxvY2FsU3RvcmFnZSh0aGlzLmtleSkpfSxwYXJzZTpmdW5jdGlvbihhKXtyZXR1cm4gYX19KTtyZXR1cm4gZH0pLGMoInBsdWdpbnMvcGx1Z2lucyIsW10sZnVuY3Rpb24oKXtmb3IodmFyIGEsYj1mdW5jdGlvbigpe30sYz1bImFzc2VydCIsImNsZWFyIiwiY291bnQiLCJkZWJ1ZyIsImRpciIsImRpcnhtbCIsImVycm9yIiwiZXhjZXB0aW9uIiwiZ3JvdXAiLCJncm91cENvbGxhcHNlZCIsImdyb3VwRW5kIiwiaW5mbyIsImxvZyIsIm1hcmtUaW1lbGluZSIsInByb2ZpbGUiLCJwcm9maWxlRW5kIiwidGFibGUiLCJ0aW1lIiwidGltZUVuZCIsInRpbWVTdGFtcCIsInRyYWNlIiwid2FybiJdLGQ9Yy5sZW5ndGgsZT13aW5kb3cuY29uc29sZT13aW5kb3cuY29uc29sZXx8e307ZC0tOylhPWNbZF0sZVthXXx8KGVbYV09Yik7TnVtYmVyLnByb3RvdHlwZS5wYWRMZWZ0PWZ1bmN0aW9uKGEsYil7dmFyIGM9U3RyaW5nKGF8fDEwKS5sZW5ndGgtU3RyaW5nKHRoaXMpLmxlbmd0aCsxO3JldHVybiBjPjA/bmV3IEFycmF5KGMpLmpvaW4oYnx8IjAiKSt0aGlzOnRoaXN9LERhdGUucGFyc2VNYW51YWxseT1mdW5jdGlvbihhKXthPWEuc3BsaXQoIiAiKTt2YXIgYj1hWzBdLnNwbGl0KCItIiksYz1hWzFdLnNwbGl0KCI6Iik7cmV0dXJuIGI9bmV3IERhdGUoRGF0ZS5VVEMocGFyc2VJbnQoYlswXSwxMCkscGFyc2VJbnQoYlsxXSwxMCktMSxwYXJzZUludChiWzJdLDEwKSxwYXJzZUludChjWzBdLDEwKSxwYXJzZUludChjWzFdLDEwKSxwYXJzZUludChjWzJdLDEwKSkpfSx3aW5kb3cucGFyc2VVcmk9ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPXdpbmRvdy5wYXJzZVVyaS5vcHRpb25zLGM9Yi5wYXJzZXJbYi5zdHJpY3RNb2RlPyJzdHJpY3QiOiJsb29zZSJdLmV4ZWMoYSksZD17fSxlPTE0O2UtLTspZFtiLmtleVtlXV09Y1tlXXx8IiI7cmV0dXJuIGRbYi5xLm5hbWVdPXt9LGRbYi5rZXlbMTJdXS5yZXBsYWNlKGIucS5wYXJzZXIsZnVuY3Rpb24oYSxjLGUpe2MmJihkW2IucS5uYW1lXVtjXT1lKX0pLGR9LHdpbmRvdy5wYXJzZVVyaS5vcHRpb25zPXtzdHJpY3RNb2RlOiExLGtleTpbInNvdXJjZSIsInByb3RvY29sIiwiYXV0aG9yaXR5IiwidXNlckluZm8iLCJ1c2VyIiwicGFzc3dvcmQiLCJob3N0IiwicG9ydCIsInJlbGF0aXZlIiwicGF0aCIsImRpcmVjdG9yeSIsImZpbGUiLCJxdWVyeSIsImFuY2hvciJdLHE6e25hbWU6InF1ZXJ5S2V5IixwYXJzZXI6Lyg/Ol58JikoW14mPV0qKT0/KFteJl0qKS9nfSxwYXJzZXI6e3N0cmljdDovXig/OihbXjpcLz8jXSspOik/KD86XC9cLygoPzooKFteOkBdKikoPzo6KFteOkBdKikpPyk/QCk/KFteOlwvPyNdKikoPzo6KFxkKikpPykpPygoKCg/OltePyNcL10qXC8pKikoW14/I10qKSkoPzpcPyhbXiNdKikpPyg/OiMoLiopKT8pLyxsb29zZTovXig/Oig/IVteOkBdKzpbXjpAXC9dKkApKFteOlwvPyMuXSspOik/KD86XC9cLyk/KCg/OigoW146QF0qKSg/OjooW146QF0qKSk/KT9AKT8oW146XC8/I10qKSg/OjooXGQqKSk/KSgoKFwvKD86W14/I10oPyFbXj8jXC9dKlwuW14/I1wvLl0rKD86Wz8jXXwkKSkpKlwvPyk/KFtePyNcL10qKSkoPzpcPyhbXiNdKikpPyg/OiMoLiopKT8pL319fSksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhLGIpe3ZhciBjPSg2NTUzNSZhKSsoNjU1MzUmYiksZD0oYT4+MTYpKyhiPj4xNikrKGM+PjE2KTtyZXR1cm4gZDw8MTZ8NjU1MzUmY31mdW5jdGlvbiBkKGEsYil7cmV0dXJuIGE8PGJ8YT4+PjMyLWJ9ZnVuY3Rpb24gZShhLGMsZSxmLGcsaCl7cmV0dXJuIGIoZChiKGIoYyxhKSxiKGYsaCkpLGcpLGUpfWZ1bmN0aW9uIGYoYSxiLGMsZCxmLGcsaCl7cmV0dXJuIGUoYiZjfH5iJmQsYSxiLGYsZyxoKX1mdW5jdGlvbiBnKGEsYixjLGQsZixnLGgpe3JldHVybiBlKGImZHxjJn5kLGEsYixmLGcsaCl9ZnVuY3Rpb24gaChhLGIsYyxkLGYsZyxoKXtyZXR1cm4gZShiXmNeZCxhLGIsZixnLGgpfWZ1bmN0aW9uIGkoYSxiLGMsZCxmLGcsaCl7cmV0dXJuIGUoY14oYnx+ZCksYSxiLGYsZyxoKX1mdW5jdGlvbiBqKGEsYyl7YVtjPj41XXw9MTI4PDxjJTMyLGFbKGMrNjQ+Pj45PDw0KSsxNF09Yzt2YXIgZCxlLGosayxsLG09MTczMjU4NDE5MyxuPS0yNzE3MzM4Nzksbz0tMTczMjU4NDE5NCxwPTI3MTczMzg3ODtmb3IoZD0wO2Q8YS5sZW5ndGg7ZCs9MTYpZT1tLGo9bixrPW8sbD1wLG09ZihtLG4sbyxwLGFbZF0sNywtNjgwODc2OTM2KSxwPWYocCxtLG4sbyxhW2QrMV0sMTIsLTM4OTU2NDU4Niksbz1mKG8scCxtLG4sYVtkKzJdLDE3LDYwNjEwNTgxOSksbj1mKG4sbyxwLG0sYVtkKzNdLDIyLC0xMDQ0NTI1MzMwKSxtPWYobSxuLG8scCxhW2QrNF0sNywtMTc2NDE4ODk3KSxwPWYocCxtLG4sbyxhW2QrNV0sMTIsMTIwMDA4MDQyNiksbz1mKG8scCxtLG4sYVtkKzZdLDE3LC0xNDczMjMxMzQxKSxuPWYobixvLHAsbSxhW2QrN10sMjIsLTQ1NzA1OTgzKSxtPWYobSxuLG8scCxhW2QrOF0sNywxNzcwMDM1NDE2KSxwPWYocCxtLG4sbyxhW2QrOV0sMTIsLTE5NTg0MTQ0MTcpLG89ZihvLHAsbSxuLGFbZCsxMF0sMTcsLTQyMDYzKSxuPWYobixvLHAsbSxhW2QrMTFdLDIyLC0xOTkwNDA0MTYyKSxtPWYobSxuLG8scCxhW2QrMTJdLDcsMTgwNDYwMzY4MikscD1mKHAsbSxuLG8sYVtkKzEzXSwxMiwtNDAzNDExMDEpLG89ZihvLHAsbSxuLGFbZCsxNF0sMTcsLTE1MDIwMDIyOTApLG49ZihuLG8scCxtLGFbZCsxNV0sMjIsMTIzNjUzNTMyOSksbT1nKG0sbixvLHAsYVtkKzFdLDUsLTE2NTc5NjUxMCkscD1nKHAsbSxuLG8sYVtkKzZdLDksLTEwNjk1MDE2MzIpLG89ZyhvLHAsbSxuLGFbZCsxMV0sMTQsNjQzNzE3NzEzKSxuPWcobixvLHAsbSxhW2RdLDIwLC0zNzM4OTczMDIpLG09ZyhtLG4sbyxwLGFbZCs1XSw1LC03MDE1NTg2OTEpLHA9ZyhwLG0sbixvLGFbZCsxMF0sOSwzODAxNjA4Myksbz1nKG8scCxtLG4sYVtkKzE1XSwxNCwtNjYwNDc4MzM1KSxuPWcobixvLHAsbSxhW2QrNF0sMjAsLTQwNTUzNzg0OCksbT1nKG0sbixvLHAsYVtkKzldLDUsNTY4NDQ2NDM4KSxwPWcocCxtLG4sbyxhW2QrMTRdLDksLTEwMTk4MDM2OTApLG89ZyhvLHAsbSxuLGFbZCszXSwxNCwtMTg3MzYzOTYxKSxuPWcobixvLHAsbSxhW2QrOF0sMjAsMTE2MzUzMTUwMSksbT1nKG0sbixvLHAsYVtkKzEzXSw1LC0xNDQ0NjgxNDY3KSxwPWcocCxtLG4sbyxhW2QrMl0sOSwtNTE0MDM3ODQpLG89ZyhvLHAsbSxuLGFbZCs3XSwxNCwxNzM1MzI4NDczKSxuPWcobixvLHAsbSxhW2QrMTJdLDIwLC0xOTI2NjA3NzM0KSxtPWgobSxuLG8scCxhW2QrNV0sNCwtMzc4NTU4KSxwPWgocCxtLG4sbyxhW2QrOF0sMTEsLTIwMjI1NzQ0NjMpLG89aChvLHAsbSxuLGFbZCsxMV0sMTYsMTgzOTAzMDU2Miksbj1oKG4sbyxwLG0sYVtkKzE0XSwyMywtMzUzMDk1NTYpLG09aChtLG4sbyxwLGFbZCsxXSw0LC0xNTMwOTkyMDYwKSxwPWgocCxtLG4sbyxhW2QrNF0sMTEsMTI3Mjg5MzM1Myksbz1oKG8scCxtLG4sYVtkKzddLDE2LC0xNTU0OTc2MzIpLG49aChuLG8scCxtLGFbZCsxMF0sMjMsLTEwOTQ3MzA2NDApLG09aChtLG4sbyxwLGFbZCsxM10sNCw2ODEyNzkxNzQpLHA9aChwLG0sbixvLGFbZF0sMTEsLTM1ODUzNzIyMiksbz1oKG8scCxtLG4sYVtkKzNdLDE2LC03MjI1MjE5NzkpLG49aChuLG8scCxtLGFbZCs2XSwyMyw3NjAyOTE4OSksbT1oKG0sbixvLHAsYVtkKzldLDQsLTY0MDM2NDQ4NykscD1oKHAsbSxuLG8sYVtkKzEyXSwxMSwtNDIxODE1ODM1KSxvPWgobyxwLG0sbixhW2QrMTVdLDE2LDUzMDc0MjUyMCksbj1oKG4sbyxwLG0sYVtkKzJdLDIzLC05OTUzMzg2NTEpLG09aShtLG4sbyxwLGFbZF0sNiwtMTk4NjMwODQ0KSxwPWkocCxtLG4sbyxhW2QrN10sMTAsMTEyNjg5MTQxNSksbz1pKG8scCxtLG4sYVtkKzE0XSwxNSwtMTQxNjM1NDkwNSksbj1pKG4sbyxwLG0sYVtkKzVdLDIxLC01NzQzNDA1NSksbT1pKG0sbixvLHAsYVtkKzEyXSw2LDE3MDA0ODU1NzEpLHA9aShwLG0sbixvLGFbZCszXSwxMCwtMTg5NDk4NjYwNiksbz1pKG8scCxtLG4sYVtkKzEwXSwxNSwtMTA1MTUyMyksbj1pKG4sbyxwLG0sYVtkKzFdLDIxLC0yMDU0OTIyNzk5KSxtPWkobSxuLG8scCxhW2QrOF0sNiwxODczMzEzMzU5KSxwPWkocCxtLG4sbyxhW2QrMTVdLDEwLC0zMDYxMTc0NCksbz1pKG8scCxtLG4sYVtkKzZdLDE1LC0xNTYwMTk4MzgwKSxuPWkobixvLHAsbSxhW2QrMTNdLDIxLDEzMDkxNTE2NDkpLG09aShtLG4sbyxwLGFbZCs0XSw2LC0xNDU1MjMwNzApLHA9aShwLG0sbixvLGFbZCsxMV0sMTAsLTExMjAyMTAzNzkpLG89aShvLHAsbSxuLGFbZCsyXSwxNSw3MTg3ODcyNTkpLG49aShuLG8scCxtLGFbZCs5XSwyMSwtMzQzNDg1NTUxKSxtPWIobSxlKSxuPWIobixqKSxvPWIobyxrKSxwPWIocCxsKTtyZXR1cm5bbSxuLG8scF19ZnVuY3Rpb24gayhhKXt2YXIgYixjPSIiO2ZvcihiPTA7YjwzMiphLmxlbmd0aDtiKz04KWMrPVN0cmluZy5mcm9tQ2hhckNvZGUoYVtiPj41XT4+PmIlMzImMjU1KTtyZXR1cm4gY31mdW5jdGlvbiBsKGEpe3ZhciBiLGM9W107Zm9yKGNbKGEubGVuZ3RoPj4yKS0xXT12b2lkIDAsYj0wO2I8Yy5sZW5ndGg7Yis9MSljW2JdPTA7Zm9yKGI9MDtiPDgqYS5sZW5ndGg7Yis9OCljW2I+PjVdfD0oMjU1JmEuY2hhckNvZGVBdChiLzgpKTw8YiUzMjtyZXR1cm4gY31mdW5jdGlvbiBtKGEpe3JldHVybiBrKGoobChhKSw4KmEubGVuZ3RoKSl9ZnVuY3Rpb24gbihhLGIpe3ZhciBjLGQsZT1sKGEpLGY9W10sZz1bXTtmb3IoZlsxNV09Z1sxNV09dm9pZCAwLGUubGVuZ3RoPjE2JiYoZT1qKGUsOCphLmxlbmd0aCkpLGM9MDsxNj5jO2MrPTEpZltjXT05MDk1MjI0ODZeZVtjXSxnW2NdPTE1NDk1NTY4MjheZVtjXTtyZXR1cm4gZD1qKGYuY29uY2F0KGwoYikpLDUxMis4KmIubGVuZ3RoKSxrKGooZy5jb25jYXQoZCksNjQwKSl9ZnVuY3Rpb24gbyhhKXt2YXIgYixjLGQ9IjAxMjM0NTY3ODlhYmNkZWYiLGU9IiI7Zm9yKGM9MDtjPGEubGVuZ3RoO2MrPTEpYj1hLmNoYXJDb2RlQXQoYyksZSs9ZC5jaGFyQXQoYj4+PjQmMTUpK2QuY2hhckF0KDE1JmIpO3JldHVybiBlfWZ1bmN0aW9uIHAoYSl7cmV0dXJuIHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChhKSl9ZnVuY3Rpb24gcShhKXtyZXR1cm4gbShwKGEpKX1mdW5jdGlvbiByKGEpe3JldHVybiBvKHEoYSkpfWZ1bmN0aW9uIHMoYSxiKXtyZXR1cm4gbihwKGEpLHAoYikpfWZ1bmN0aW9uIHQoYSxiKXtyZXR1cm4gbyhzKGEsYikpfWZ1bmN0aW9uIHUoYSxiLGMpe3JldHVybiBiP2M/cyhiLGEpOnQoYixhKTpjP3EoYSk6cihhKX0iZnVuY3Rpb24iPT10eXBlb2YgYyYmYy5hbWQ/YygibWQ1IixbXSxmdW5jdGlvbigpe3JldHVybiB1fSk6YS5tZDU9dX0odGhpcyksYygiZ2FsbGVyeS9tb2RlbHMvZ2FsbGVyeS5tb2RlbCIsWyJ1bmRlcnNjb3JlIiwiYmFja2JvbmUiLCJnYWxsZXJ5L2NvbGxlY3Rpb25zL2ltYWdlLmNvbGxlY3Rpb24iLCJwbHVnaW5zL3BsdWdpbnMiLCJtZDUiXSxmdW5jdGlvbihhLGIsYyxkLGUpe3ZhciBmPWIuTW9kZWwuZXh0ZW5kKHt1cmw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXQoInNyYyIpfSxkZWZhdWx0czpmdW5jdGlvbigpe3JldHVybntzcmM6IiIsdGl0bGU6IiIsaW1hZ2VfcGFnZXM6ITEscHJlc2V0czp7dGh1bWI6e3dpZHRoOjMwMH0sbGFyZ2U6e3dpZHRoOjgwMH19LGltYWdlczp2b2lkIDB9fSxkZWZhdWx0T3B0czp7bWluX2NvbF93aWR0aDp7ZGVza3RvcDozMjAscGFkOjMyMCxwaG9uZTozMDB9LGd1dHRlcl93aWR0aDozLGNodW5rX3NpemU6OCxmaXJzdF9jaHVuazoxNSxkb3VibGVfdGFwX3RodW1iOiExfSxpbml0aWFsaXplOmZ1bmN0aW9uKCl7dGhpcy5pZD1lKHRoaXMuZ2V0KCJzcmMiKSksdGhpcy5zbGlkZXJTdGF0ZT0iY2xvc2VkIix0aGlzLl9jdXJyZW50PXZvaWQgMH0scGFyc2U6ZnVuY3Rpb24oYil7dmFyIGQ9Yi5nYWxsZXJ5O3JldHVybiBkLmltYWdlcz1uZXcgYyhkLmltYWdlcyx7cHJlc2V0czp0aGlzLl9wYXJzZVByZXNldHMoZC5wcmVzZXRzKSxnYWxsZXJ5OntiYXNlcGF0aDpkLnBvc3RCYXNlcGF0aCxiYXNldXJsOmQucG9zdEJhc2V1cmwscGF0aDpkLnBvc3RQYXRoLGltYWdlUGFnZXM6ZC5pbWFnZVBhZ2VzfX0pLGQub3B0cz1hLmV4dGVuZCh7fSx0aGlzLmRlZmF1bHRPcHRzLGQub3B0cyx0aGlzLmF0dHJpYnV0ZXMub3B0cyksZH0sX3BhcnNlUHJlc2V0czpmdW5jdGlvbihiKXtyZXR1cm4gYS5mb3JFYWNoKGIsZnVuY3Rpb24oYSl7dmFyIGI9YS5iYXNldXJsO2lmKCFiLm1hdGNoKC9odHRwOlwvXC98aHR0cHM6XC9cLy8pKXt2YXIgYz1wYXJzZVVyaSh3aW5kb3cubG9jYXRpb24uaHJlZiksZD1jLnByb3RvY29sKyI6Ly8iK2MuaG9zdCsoYy5wb3J0PyI6IitjLnBvcnQ6IiIpO2EuYmFzZXVybD0wPT09Yi5pbmRleE9mKCIvIik/ZCtiOmQrYy5kaXJlY3RvcnkrYn19KSxifSx0b2dnbGVTbGlkZXJTdGF0ZTpmdW5jdGlvbigpe3RoaXMuc2xpZGVyU3RhdGU9ImNsb3NlZCI9PT10aGlzLnNsaWRlclN0YXRlPyJvcGVuZWQiOiJjbG9zZWQifSxzZXRDdXJyZW50OmZ1bmN0aW9uKGEpe3RoaXMuX2N1cnJlbnQ9YX0sZ2V0Q3VycmVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jdXJyZW50fSxnZXROZXh0OmZ1bmN0aW9uKCl7aWYodGhpcy5fY3VycmVudCl7dmFyIGE9dGhpcy5hdHRyaWJ1dGVzLmltYWdlcyxiPXRoaXMuX2N1cnJlbnQuaW5kZXgoKTtpZihiPGEubGVuZ3RoLTEpcmV0dXJuIGEuYXQoYisxKX19LGdldFByZXY6ZnVuY3Rpb24oKXtpZih0aGlzLl9jdXJyZW50KXt2YXIgYT10aGlzLl9jdXJyZW50LmluZGV4KCk7aWYoYT4wKXJldHVybiB0aGlzLmF0dHJpYnV0ZXMuaW1hZ2VzLmF0KGEtMSl9fX0pO3JldHVybiBmfSksYygiZ2FsbGVyeS9jb2xsZWN0aW9ucy9zZWxlY3Rpb24uY29sbGVjdGlvbiIsWyJ1bmRlcnNjb3JlIiwiYmFja2JvbmUiLCJsb2NhbHN0b3JhZ2UiLCJnYWxsZXJ5L21vZGVscy9pbWFnZS5tb2RlbCJdLGZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPWIuQ29sbGVjdGlvbi5leHRlbmQoe21vZGVsOmQsaW5pdGlhbGl6ZTpmdW5jdGlvbihhLGMpe2MuZ2FsbGVyeSYmKHRoaXMuZ2FsbGVyeT1jLmdhbGxlcnksdGhpcy5nYWxsZXJ5LnNldCgic2VsZWN0aW9uIix0aGlzKSksdGhpcy5rZXk9ImJvb2xlYW4iPT10eXBlb2YgYy5rZXk/dGhpcy5nYWxsZXJ5LmlkOmMua2V5LHRoaXMubG9jYWxTdG9yYWdlPW5ldyBiLkxvY2FsU3RvcmFnZSgiR2FsbGVyeVNlbGVjdGlvbi0iK3RoaXMua2V5KSx0aGlzLmdhbGxlcnkmJnRoaXMubGlzdGVuVG9PbmNlKHRoaXMuZ2FsbGVyeSwiY2hhbmdlIix0aGlzLmluaXRHYWxsZXJ5KX0saW5pdEdhbGxlcnk6ZnVuY3Rpb24oKXt0aGlzLmZldGNoKCksdGhpcy5saXN0ZW5Ubyh0aGlzLmdhbGxlcnkuZ2V0KCJpbWFnZXMiKSwiY2hhbmdlOnNlbGVjdGVkIix0aGlzLnNlbGVjdGlvbkNoYW5nZWQpfSxwYXJzZTpmdW5jdGlvbihiKXtpZih0aGlzLmdhbGxlcnkpe3ZhciBjPXRoaXMuZ2FsbGVyeS5nZXQoImltYWdlcyIpO2EuZWFjaChiLGZ1bmN0aW9uKGEpe3ZhciBiPWMuZ2V0KGEuZGlnZXN0KTtiJiZiLnNldCgic2VsZWN0ZWQiLCEwKX0sdGhpcyl9cmV0dXJuIGJ9LHNlbGVjdGlvbkNoYW5nZWQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmdldChhLmlkKTtpZihiJiYhYyl7dmFyIGQ9YS5jbG9uZSgpO2Quc2V0KCJpbmRleCIsdm9pZCAwKSx0aGlzLmFkZChkKSxkLnNhdmUoKX1lbHNlIGMmJmMuZGVzdHJveSgpfX0se19wb29sOnt9LGdldDpmdW5jdGlvbihiLGMpe3ZhciBkPWIrIiMiKyh2b2lkIDAhPT1jP2MuaWQ6Im5peEdhbGxlcnkiKTtyZXR1cm4gYS5oYXModGhpcy5fcG9vbCxkKXx8KHRoaXMuX3Bvb2xbZF09bmV3IGUoW10se2tleTpiLGdhbGxlcnk6Y30pKSx0aGlzLl9wb29sW2RdfX0pO3JldHVybiBlfSksYygiZ2FsbGVyeS9tb2RlbHMvc2VsZWN0aW9uLmdhbGxlcnkubW9kZWwiLFsidW5kZXJzY29yZSIsImdhbGxlcnkvbW9kZWxzL2dhbGxlcnkubW9kZWwiLCJnYWxsZXJ5L2NvbGxlY3Rpb25zL2ltYWdlLmNvbGxlY3Rpb24iLCJnYWxsZXJ5L2NvbGxlY3Rpb25zL3NlbGVjdGlvbi5jb2xsZWN0aW9uIl0sZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9Yi5leHRlbmQoe2luaXRpYWxpemU6ZnVuY3Rpb24oKXtiLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsYXJndW1lbnRzKSx0aGlzLmlkPXRoaXMuZ2V0KCJrZXkiKX0sZmV0Y2g6ZnVuY3Rpb24oYil7dmFyIGM9dGhpcy5nZXQoInNlbGVjdGlvbiIpO2MmJmMua2V5PT09dGhpcy5pZD90aGlzLmF0dHJpYnV0ZXMuaW1hZ2VzPWM6bmV3IGQoW10se2dhbGxlcnk6dGhpcyxrZXk6dGhpcy5pZH0pLHRoaXMuYXR0cmlidXRlcy5vcHRzPWEuZXh0ZW5kKHt9LHRoaXMuZGVmYXVsdE9wdHMsdGhpcy5hdHRyaWJ1dGVzLm9wdHMpLHRoaXMuYXR0cmlidXRlcy5pbWFnZXMuZmV0Y2goe3N1Y2Nlc3M6YS5iaW5kKGZ1bmN0aW9uKGEsYyl7Yi5zdWNjZXNzJiZiLnN1Y2Nlc3ModGhpcyxjLGIpLHRoaXMudHJpZ2dlcigiY2hhbmdlIil9LHRoaXMpLGVycm9yOmIuZXJyb3J9KX19KTtyZXR1cm4gZX0pLGMoImdhbGxlcnkvbW9kZWxzL2dhbGxlcnkuZmFjdG9yeSIsWyJ1bmRlcnNjb3JlIiwiZ2FsbGVyeS9tb2RlbHMvZ2FsbGVyeS5tb2RlbCIsImdhbGxlcnkvbW9kZWxzL3NlbGVjdGlvbi5nYWxsZXJ5Lm1vZGVsIl0sZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZChkLGYpe3ZhciBnPWUoZCk7aWYodm9pZCAwIT09Zyl7dmFyIGgsaT1hLmV4dGVuZCh7fSxkLmRhdGEoImdhbC1vcHRzIil8fGQuZGF0YSgib3B0cyIpLGYpO3JldHVybiBoPWcuaW5kZXhPZigic2VsZWN0aW9uOiIpPDA/bmV3IGIoe3NyYzpnLG9wdHM6aX0pOm5ldyBjKHtrZXk6Zy5yZXBsYWNlKCJzZWxlY3Rpb246IiwiIiksb3B0czppfSl9fWZ1bmN0aW9uIGUoYSl7dmFyIGI9YS5kYXRhKCJnYWwtc3JjIil8fGEuZGF0YSgic3JjIik7cmV0dXJuIHZvaWQgMD09PWImJmEuZGF0YSgicHJvamVjdCIpJiYoYj1hLmRhdGEoInByb2plY3QiKSsiLmpzb24iLGNvbnNvbGUud2FybignImRhdGEtcHJvamVjdCIgYXMgYSBkYXRhIHNvdXJjZSBmb3IgZ2FsbGVyeWpzIGlzIGRlcHJlY2F0ZWQhIFVzZSAiZGF0YS1zcmMiIGluc3RlYWQhJykpLGJ9cmV0dXJue2NyZWF0ZTpkfX0oKTtyZXR1cm4gZH0pLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoKXt9ZnVuY3Rpb24gZChhKXtmdW5jdGlvbiBjKGIpe2IucHJvdG90eXBlLm9wdGlvbnx8KGIucHJvdG90eXBlLm9wdGlvbj1mdW5jdGlvbihiKXthLmlzUGxhaW5PYmplY3QoYikmJih0aGlzLm9wdGlvbnM9YS5leHRlbmQoITAsdGhpcy5vcHRpb25zLGIpKX0pfWZ1bmN0aW9uIGQoYixjKXthLmZuW2JdPWZ1bmN0aW9uKGQpe2lmKCJzdHJpbmciPT10eXBlb2YgZCl7Zm9yKHZhciBnPWUuY2FsbChhcmd1bWVudHMsMSksaD0wLGk9dGhpcy5sZW5ndGg7aT5oO2grKyl7dmFyIGo9dGhpc1toXSxrPWEuZGF0YShqLGIpO2lmKGspaWYoYS5pc0Z1bmN0aW9uKGtbZF0pJiYiXyIhPT1kLmNoYXJBdCgwKSl7dmFyIGw9a1tkXS5hcHBseShrLGcpO2lmKHZvaWQgMCE9PWwpcmV0dXJuIGx9ZWxzZSBmKCJubyBzdWNoIG1ldGhvZCAnIitkKyInIGZvciAiK2IrIiBpbnN0YW5jZSIpO2Vsc2UgZigiY2Fubm90IGNhbGwgbWV0aG9kcyBvbiAiK2IrIiBwcmlvciB0byBpbml0aWFsaXphdGlvbjsgYXR0ZW1wdGVkIHRvIGNhbGwgJyIrZCsiJyIpfXJldHVybiB0aGlzfXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgZT1hLmRhdGEodGhpcyxiKTtlPyhlLm9wdGlvbihkKSxlLl9pbml0KCkpOihlPW5ldyBjKHRoaXMsZCksYS5kYXRhKHRoaXMsYixlKSl9KX19aWYoYSl7dmFyIGY9InVuZGVmaW5lZCI9PXR5cGVvZiBjb25zb2xlP2I6ZnVuY3Rpb24oYSl7Y29uc29sZS5lcnJvcihhKX07cmV0dXJuIGEuYnJpZGdldD1mdW5jdGlvbihhLGIpe2MoYiksZChhLGIpfSxhLmJyaWRnZXR9fXZhciBlPUFycmF5LnByb3RvdHlwZS5zbGljZTsiZnVuY3Rpb24iPT10eXBlb2YgYyYmYy5hbWQ/YygianF1ZXJ5LWJyaWRnZXQvanF1ZXJ5LmJyaWRnZXQiLFsianF1ZXJ5Il0sZCk6ZChhLmpRdWVyeSl9KHdpbmRvdyksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihiKXt2YXIgYz1hLmV2ZW50O3JldHVybiBjLnRhcmdldD1jLnRhcmdldHx8Yy5zcmNFbGVtZW50fHxiLGN9dmFyIGQ9ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LGU9ZnVuY3Rpb24oKXt9O2QuYWRkRXZlbnRMaXN0ZW5lcj9lPWZ1bmN0aW9uKGEsYixjKXthLmFkZEV2ZW50TGlzdGVuZXIoYixjLCExKX06ZC5hdHRhY2hFdmVudCYmKGU9ZnVuY3Rpb24oYSxjLGQpe2FbYytkXT1kLmhhbmRsZUV2ZW50P2Z1bmN0aW9uKCl7dmFyIGM9YihhKTtkLmhhbmRsZUV2ZW50LmNhbGwoZCxjKX06ZnVuY3Rpb24oKXt2YXIgYz1iKGEpO2QuY2FsbChhLGMpfSxhLmF0dGFjaEV2ZW50KCJvbiIrYyxhW2MrZF0pfSk7dmFyIGY9ZnVuY3Rpb24oKXt9O2QucmVtb3ZlRXZlbnRMaXN0ZW5lcj9mPWZ1bmN0aW9uKGEsYixjKXthLnJlbW92ZUV2ZW50TGlzdGVuZXIoYixjLCExKX06ZC5kZXRhY2hFdmVudCYmKGY9ZnVuY3Rpb24oYSxiLGMpe2EuZGV0YWNoRXZlbnQoIm9uIitiLGFbYitjXSk7dHJ5e2RlbGV0ZSBhW2IrY119Y2F0Y2goZCl7YVtiK2NdPXZvaWQgMH19KTt2YXIgZz17YmluZDplLHVuYmluZDpmfTsiZnVuY3Rpb24iPT10eXBlb2YgYyYmYy5hbWQ/YygiZXZlbnRpZS9ldmVudGllIixnKToib2JqZWN0Ij09dHlwZW9mIGV4cG9ydHM/bW9kdWxlLmV4cG9ydHM9ZzphLmV2ZW50aWU9Z30odGhpcyksZnVuY3Rpb24oZCl7ZnVuY3Rpb24gZShhKXsiZnVuY3Rpb24iPT10eXBlb2YgYSYmKGUuaXNSZWFkeT9hKCk6aS5wdXNoKGEpKX1mdW5jdGlvbiBmKGEpe3ZhciBiPSJyZWFkeXN0YXRlY2hhbmdlIj09PWEudHlwZSYmImNvbXBsZXRlIiE9PWgucmVhZHlTdGF0ZTtpZighZS5pc1JlYWR5JiYhYil7ZS5pc1JlYWR5PSEwO2Zvcih2YXIgYz0wLGQ9aS5sZW5ndGg7ZD5jO2MrKyl7dmFyIGY9aVtjXTtmKCl9fX1mdW5jdGlvbiBnKGEpe3JldHVybiBhLmJpbmQoaCwiRE9NQ29udGVudExvYWRlZCIsZiksYS5iaW5kKGgsInJlYWR5c3RhdGVjaGFuZ2UiLGYpLGEuYmluZChkLCJsb2FkIixmKSxlfXZhciBoPWQuZG9jdW1lbnQsaT1bXTtlLmlzUmVhZHk9ITEsImZ1bmN0aW9uIj09dHlwZW9mIGMmJmMuYW1kPyhlLmlzUmVhZHk9ImZ1bmN0aW9uIj09dHlwZW9mIGEsYygiZG9jLXJlYWR5L2RvYy1yZWFkeSIsWyJldmVudGllL2V2ZW50aWUiXSxnKSk6Im9iamVjdCI9PXR5cGVvZiBleHBvcnRzP21vZHVsZS5leHBvcnRzPWcoYigiZXZlbnRpZSIpKTpkLmRvY1JlYWR5PWcoZC5ldmVudGllKX0od2luZG93KSxmdW5jdGlvbigpe2Z1bmN0aW9uIGEoKXt9ZnVuY3Rpb24gYihhLGIpe2Zvcih2YXIgYz1hLmxlbmd0aDtjLS07KWlmKGFbY10ubGlzdGVuZXI9PT1iKXJldHVybiBjO3JldHVybi0xfWZ1bmN0aW9uIGQoYSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXNbYV0uYXBwbHkodGhpcyxhcmd1bWVudHMpfX12YXIgZT1hLnByb3RvdHlwZSxmPXRoaXMsZz1mLkV2ZW50RW1pdHRlcjtlLmdldExpc3RlbmVycz1mdW5jdGlvbihhKXt2YXIgYixjLGQ9dGhpcy5fZ2V0RXZlbnRzKCk7aWYoYSBpbnN0YW5jZW9mIFJlZ0V4cCl7Yj17fTtmb3IoYyBpbiBkKWQuaGFzT3duUHJvcGVydHkoYykmJmEudGVzdChjKSYmKGJbY109ZFtjXSl9ZWxzZSBiPWRbYV18fChkW2FdPVtdKTtyZXR1cm4gYn0sZS5mbGF0dGVuTGlzdGVuZXJzPWZ1bmN0aW9uKGEpe3ZhciBiLGM9W107Zm9yKGI9MDtiPGEubGVuZ3RoO2IrPTEpYy5wdXNoKGFbYl0ubGlzdGVuZXIpO3JldHVybiBjfSxlLmdldExpc3RlbmVyc0FzT2JqZWN0PWZ1bmN0aW9uKGEpe3ZhciBiLGM9dGhpcy5nZXRMaXN0ZW5lcnMoYSk7cmV0dXJuIGMgaW5zdGFuY2VvZiBBcnJheSYmKGI9e30sYlthXT1jKSxifHxjfSxlLmFkZExpc3RlbmVyPWZ1bmN0aW9uKGEsYyl7dmFyIGQsZT10aGlzLmdldExpc3RlbmVyc0FzT2JqZWN0KGEpLGY9Im9iamVjdCI9PXR5cGVvZiBjO2ZvcihkIGluIGUpZS5oYXNPd25Qcm9wZXJ0eShkKSYmLTE9PT1iKGVbZF0sYykmJmVbZF0ucHVzaChmP2M6e2xpc3RlbmVyOmMsb25jZTohMX0pO3JldHVybiB0aGlzfSxlLm9uPWQoImFkZExpc3RlbmVyIiksZS5hZGRPbmNlTGlzdGVuZXI9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5hZGRMaXN0ZW5lcihhLHtsaXN0ZW5lcjpiLG9uY2U6ITB9KX0sZS5vbmNlPWQoImFkZE9uY2VMaXN0ZW5lciIpLGUuZGVmaW5lRXZlbnQ9ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZ2V0TGlzdGVuZXJzKGEpLHRoaXN9LGUuZGVmaW5lRXZlbnRzPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0wO2I8YS5sZW5ndGg7Yis9MSl0aGlzLmRlZmluZUV2ZW50KGFbYl0pO3JldHVybiB0aGlzfSxlLnJlbW92ZUxpc3RlbmVyPWZ1bmN0aW9uKGEsYyl7dmFyIGQsZSxmPXRoaXMuZ2V0TGlzdGVuZXJzQXNPYmplY3QoYSk7Zm9yKGUgaW4gZilmLmhhc093blByb3BlcnR5KGUpJiYoZD1iKGZbZV0sYyksLTEhPT1kJiZmW2VdLnNwbGljZShkLDEpKTtyZXR1cm4gdGhpc30sZS5vZmY9ZCgicmVtb3ZlTGlzdGVuZXIiKSxlLmFkZExpc3RlbmVycz1mdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLm1hbmlwdWxhdGVMaXN0ZW5lcnMoITEsYSxiKX0sZS5yZW1vdmVMaXN0ZW5lcnM9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5tYW5pcHVsYXRlTGlzdGVuZXJzKCEwLGEsYil9LGUubWFuaXB1bGF0ZUxpc3RlbmVycz1mdW5jdGlvbihhLGIsYyl7dmFyIGQsZSxmPWE/dGhpcy5yZW1vdmVMaXN0ZW5lcjp0aGlzLmFkZExpc3RlbmVyLGc9YT90aGlzLnJlbW92ZUxpc3RlbmVyczp0aGlzLmFkZExpc3RlbmVycztpZigib2JqZWN0IiE9dHlwZW9mIGJ8fGIgaW5zdGFuY2VvZiBSZWdFeHApZm9yKGQ9Yy5sZW5ndGg7ZC0tOylmLmNhbGwodGhpcyxiLGNbZF0pO2Vsc2UgZm9yKGQgaW4gYiliLmhhc093blByb3BlcnR5KGQpJiYoZT1iW2RdKSYmKCJmdW5jdGlvbiI9PXR5cGVvZiBlP2YuY2FsbCh0aGlzLGQsZSk6Zy5jYWxsKHRoaXMsZCxlKSk7cmV0dXJuIHRoaXN9LGUucmVtb3ZlRXZlbnQ9ZnVuY3Rpb24oYSl7dmFyIGIsYz10eXBlb2YgYSxkPXRoaXMuX2dldEV2ZW50cygpO2lmKCJzdHJpbmciPT09YylkZWxldGUgZFthXTtlbHNlIGlmKGEgaW5zdGFuY2VvZiBSZWdFeHApZm9yKGIgaW4gZClkLmhhc093blByb3BlcnR5KGIpJiZhLnRlc3QoYikmJmRlbGV0ZSBkW2JdO2Vsc2UgZGVsZXRlIHRoaXMuX2V2ZW50cztyZXR1cm4gdGhpc30sZS5yZW1vdmVBbGxMaXN0ZW5lcnM9ZCgicmVtb3ZlRXZlbnQiKSxlLmVtaXRFdmVudD1mdW5jdGlvbihhLGIpe3ZhciBjLGQsZSxmLGc9dGhpcy5nZXRMaXN0ZW5lcnNBc09iamVjdChhKTtmb3IoZSBpbiBnKWlmKGcuaGFzT3duUHJvcGVydHkoZSkpZm9yKGQ9Z1tlXS5sZW5ndGg7ZC0tOyljPWdbZV1bZF0sYy5vbmNlPT09ITAmJnRoaXMucmVtb3ZlTGlzdGVuZXIoYSxjLmxpc3RlbmVyKSxmPWMubGlzdGVuZXIuYXBwbHkodGhpcyxifHxbXSksZj09PXRoaXMuX2dldE9uY2VSZXR1cm5WYWx1ZSgpJiZ0aGlzLnJlbW92ZUxpc3RlbmVyKGEsYy5saXN0ZW5lcik7cmV0dXJuIHRoaXN9LGUudHJpZ2dlcj1kKCJlbWl0RXZlbnQiKSxlLmVtaXQ9ZnVuY3Rpb24oYSl7dmFyIGI9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpO3JldHVybiB0aGlzLmVtaXRFdmVudChhLGIpfSxlLnNldE9uY2VSZXR1cm5WYWx1ZT1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5fb25jZVJldHVyblZhbHVlPWEsdGhpc30sZS5fZ2V0T25jZVJldHVyblZhbHVlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaGFzT3duUHJvcGVydHkoIl9vbmNlUmV0dXJuVmFsdWUiKT90aGlzLl9vbmNlUmV0dXJuVmFsdWU6ITB9LGUuX2dldEV2ZW50cz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9ldmVudHN8fCh0aGlzLl9ldmVudHM9e30pfSxhLm5vQ29uZmxpY3Q9ZnVuY3Rpb24oKXtyZXR1cm4gZi5FdmVudEVtaXR0ZXI9ZyxhfSwiZnVuY3Rpb24iPT10eXBlb2YgYyYmYy5hbWQ/YygiZXZlbnRFbWl0dGVyL0V2ZW50RW1pdHRlciIsW10sZnVuY3Rpb24oKXtyZXR1cm4gYX0pOiJvYmplY3QiPT10eXBlb2YgbW9kdWxlJiZtb2R1bGUuZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1hOnRoaXMuRXZlbnRFbWl0dGVyPWF9LmNhbGwodGhpcyksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhKXtpZihhKXtpZigic3RyaW5nIj09dHlwZW9mIGVbYV0pcmV0dXJuIGE7YT1hLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpK2Euc2xpY2UoMSk7Zm9yKHZhciBiLGM9MCxmPWQubGVuZ3RoO2Y+YztjKyspaWYoYj1kW2NdK2EsInN0cmluZyI9PXR5cGVvZiBlW2JdKXJldHVybiBifX12YXIgZD0iV2Via2l0IE1veiBtcyBNcyBPIi5zcGxpdCgiICIpLGU9ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlOyJmdW5jdGlvbiI9PXR5cGVvZiBjJiZjLmFtZD9jKCJnZXQtc3R5bGUtcHJvcGVydHkvZ2V0LXN0eWxlLXByb3BlcnR5IixbXSxmdW5jdGlvbigpe3JldHVybiBifSk6Im9iamVjdCI9PXR5cGVvZiBleHBvcnRzP21vZHVsZS5leHBvcnRzPWI6YS5nZXRTdHlsZVByb3BlcnR5PWJ9KHdpbmRvdyksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gZChhKXt2YXIgYj1wYXJzZUZsb2F0KGEpLGM9LTE9PT1hLmluZGV4T2YoIiUiKSYmIWlzTmFOKGIpO3JldHVybiBjJiZifWZ1bmN0aW9uIGUoKXtmb3IodmFyIGE9e3dpZHRoOjAsaGVpZ2h0OjAsaW5uZXJXaWR0aDowLGlubmVySGVpZ2h0OjAsb3V0ZXJXaWR0aDowLG91dGVySGVpZ2h0OjB9LGI9MCxjPWkubGVuZ3RoO2M+YjtiKyspe3ZhciBkPWlbYl07YVtkXT0wfXJldHVybiBhfWZ1bmN0aW9uIGYoYSl7ZnVuY3Rpb24gYihhKXtpZigic3RyaW5nIj09dHlwZW9mIGEmJihhPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYSkpLGEmJiJvYmplY3QiPT10eXBlb2YgYSYmYS5ub2RlVHlwZSl7dmFyIGI9aChhKTtpZigibm9uZSI9PT1iLmRpc3BsYXkpcmV0dXJuIGUoKTt2YXIgZz17fTtnLndpZHRoPWEub2Zmc2V0V2lkdGgsZy5oZWlnaHQ9YS5vZmZzZXRIZWlnaHQ7Zm9yKHZhciBrPWcuaXNCb3JkZXJCb3g9ISghanx8IWJbal18fCJib3JkZXItYm94IiE9PWJbal0pLGw9MCxtPWkubGVuZ3RoO20+bDtsKyspe3ZhciBuPWlbbF0sbz1iW25dO289YyhhLG8pO3ZhciBwPXBhcnNlRmxvYXQobyk7Z1tuXT1pc05hTihwKT8wOnB9dmFyIHE9Zy5wYWRkaW5nTGVmdCtnLnBhZGRpbmdSaWdodCxyPWcucGFkZGluZ1RvcCtnLnBhZGRpbmdCb3R0b20scz1nLm1hcmdpbkxlZnQrZy5tYXJnaW5SaWdodCx0PWcubWFyZ2luVG9wK2cubWFyZ2luQm90dG9tLHU9Zy5ib3JkZXJMZWZ0V2lkdGgrZy5ib3JkZXJSaWdodFdpZHRoLHY9Zy5ib3JkZXJUb3BXaWR0aCtnLmJvcmRlckJvdHRvbVdpZHRoLHc9ayYmZix4PWQoYi53aWR0aCk7eCE9PSExJiYoZy53aWR0aD14Kyh3PzA6cSt1KSk7dmFyIHk9ZChiLmhlaWdodCk7cmV0dXJuIHkhPT0hMSYmKGcuaGVpZ2h0PXkrKHc/MDpyK3YpKSxnLmlubmVyV2lkdGg9Zy53aWR0aC0ocSt1KSxnLmlubmVySGVpZ2h0PWcuaGVpZ2h0LShyK3YpLGcub3V0ZXJXaWR0aD1nLndpZHRoK3MsZy5vdXRlckhlaWdodD1nLmhlaWdodCt0LGd9fWZ1bmN0aW9uIGMoYSxiKXtpZihnfHwtMT09PWIuaW5kZXhPZigiJSIpKXJldHVybiBiO3ZhciBjPWEuc3R5bGUsZD1jLmxlZnQsZT1hLnJ1bnRpbWVTdHlsZSxmPWUmJmUubGVmdDtyZXR1cm4gZiYmKGUubGVmdD1hLmN1cnJlbnRTdHlsZS5sZWZ0KSxjLmxlZnQ9YixiPWMucGl4ZWxMZWZ0LGMubGVmdD1kLGYmJihlLmxlZnQ9ZiksYn12YXIgZixqPWEoImJveFNpemluZyIpO3JldHVybiBmdW5jdGlvbigpe2lmKGope3ZhciBhPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO2Euc3R5bGUud2lkdGg9IjIwMHB4IixhLnN0eWxlLnBhZGRpbmc9IjFweCAycHggM3B4IDRweCIsYS5zdHlsZS5ib3JkZXJTdHlsZT0ic29saWQiLGEuc3R5bGUuYm9yZGVyV2lkdGg9IjFweCAycHggM3B4IDRweCIsYS5zdHlsZVtqXT0iYm9yZGVyLWJveCI7dmFyIGI9ZG9jdW1lbnQuYm9keXx8ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O2IuYXBwZW5kQ2hpbGQoYSk7dmFyIGM9aChhKTtmPTIwMD09PWQoYy53aWR0aCksYi5yZW1vdmVDaGlsZChhKX19KCksYn12YXIgZz1hLmdldENvbXB1dGVkU3R5bGUsaD1nP2Z1bmN0aW9uKGEpe3JldHVybiBnKGEsbnVsbCl9OmZ1bmN0aW9uKGEpe3JldHVybiBhLmN1cnJlbnRTdHlsZX0saT1bInBhZGRpbmdMZWZ0IiwicGFkZGluZ1JpZ2h0IiwicGFkZGluZ1RvcCIsInBhZGRpbmdCb3R0b20iLCJtYXJnaW5MZWZ0IiwibWFyZ2luUmlnaHQiLCJtYXJnaW5Ub3AiLCJtYXJnaW5Cb3R0b20iLCJib3JkZXJMZWZ0V2lkdGgiLCJib3JkZXJSaWdodFdpZHRoIiwiYm9yZGVyVG9wV2lkdGgiLCJib3JkZXJCb3R0b21XaWR0aCJdOyJmdW5jdGlvbiI9PXR5cGVvZiBjJiZjLmFtZD9jKCJnZXQtc2l6ZS9nZXQtc2l6ZSIsWyJnZXQtc3R5bGUtcHJvcGVydHkvZ2V0LXN0eWxlLXByb3BlcnR5Il0sZik6Im9iamVjdCI9PXR5cGVvZiBleHBvcnRzP21vZHVsZS5leHBvcnRzPWYoYigiZ2V0LXN0eWxlLXByb3BlcnR5IikpOmEuZ2V0U2l6ZT1mKGEuZ2V0U3R5bGVQcm9wZXJ0eSl9KHdpbmRvdyksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhLGIpe3JldHVybiBhW2hdKGIpfWZ1bmN0aW9uIGQoYSl7aWYoIWEucGFyZW50Tm9kZSl7dmFyIGI9ZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO2IuYXBwZW5kQ2hpbGQoYSl9fWZ1bmN0aW9uIGUoYSxiKXtkKGEpO2Zvcih2YXIgYz1hLnBhcmVudE5vZGUucXVlcnlTZWxlY3RvckFsbChiKSxlPTAsZj1jLmxlbmd0aDtmPmU7ZSsrKWlmKGNbZV09PT1hKXJldHVybiEwO3JldHVybiExfWZ1bmN0aW9uIGYoYSxjKXtyZXR1cm4gZChhKSxiKGEsYyl9dmFyIGcsaD1mdW5jdGlvbigpe2lmKGEubWF0Y2hlc1NlbGVjdG9yKXJldHVybiJtYXRjaGVzU2VsZWN0b3IiO2Zvcih2YXIgYj1bIndlYmtpdCIsIm1veiIsIm1zIiwibyJdLGM9MCxkPWIubGVuZ3RoO2Q+YztjKyspe3ZhciBlPWJbY10sZj1lKyJNYXRjaGVzU2VsZWN0b3IiO2lmKGFbZl0pcmV0dXJuIGZ9fSgpO2lmKGgpe3ZhciBpPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpLGo9YihpLCJkaXYiKTtnPWo/YjpmfWVsc2UgZz1lOyJmdW5jdGlvbiI9PXR5cGVvZiBjJiZjLmFtZD9jKCJtYXRjaGVzLXNlbGVjdG9yL21hdGNoZXMtc2VsZWN0b3IiLFtdLGZ1bmN0aW9uKCl7cmV0dXJuIGd9KToib2JqZWN0Ij09dHlwZW9mIGV4cG9ydHM/bW9kdWxlLmV4cG9ydHM9Zzp3aW5kb3cubWF0Y2hlc1NlbGVjdG9yPWd9KEVsZW1lbnQucHJvdG90eXBlKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEsYil7Zm9yKHZhciBjIGluIGIpYVtjXT1iW2NdO3JldHVybiBhfWZ1bmN0aW9uIGQoYSl7Zm9yKHZhciBiIGluIGEpcmV0dXJuITE7cmV0dXJuIGI9bnVsbCwhMH1mdW5jdGlvbiBlKGEpe3JldHVybiBhLnJlcGxhY2UoLyhbQS1aXSkvZyxmdW5jdGlvbihhKXtyZXR1cm4iLSIrYS50b0xvd2VyQ2FzZSgpfSl9ZnVuY3Rpb24gZihhLGMsZil7ZnVuY3Rpb24gZyhhLGIpe2EmJih0aGlzLmVsZW1lbnQ9YSx0aGlzLmxheW91dD1iLHRoaXMucG9zaXRpb249e3g6MCx5OjB9LHRoaXMuX2NyZWF0ZSgpKX12YXIgaT1mKCJ0cmFuc2l0aW9uIiksaj1mKCJ0cmFuc2Zvcm0iKSxrPWkmJmosbD0hIWYoInBlcnNwZWN0aXZlIiksbT17V2Via2l0VHJhbnNpdGlvbjoid2Via2l0VHJhbnNpdGlvbkVuZCIsTW96VHJhbnNpdGlvbjoidHJhbnNpdGlvbmVuZCIsT1RyYW5zaXRpb246Im90cmFuc2l0aW9uZW5kIix0cmFuc2l0aW9uOiJ0cmFuc2l0aW9uZW5kIn1baV0sbj1bInRyYW5zZm9ybSIsInRyYW5zaXRpb24iLCJ0cmFuc2l0aW9uRHVyYXRpb24iLCJ0cmFuc2l0aW9uUHJvcGVydHkiXSxvPWZ1bmN0aW9uKCl7Zm9yKHZhciBhPXt9LGI9MCxjPW4ubGVuZ3RoO2M+YjtiKyspe3ZhciBkPW5bYl0sZT1mKGQpO2UmJmUhPT1kJiYoYVtkXT1lKX1yZXR1cm4gYX0oKTtiKGcucHJvdG90eXBlLGEucHJvdG90eXBlKSxnLnByb3RvdHlwZS5fY3JlYXRlPWZ1bmN0aW9uKCl7dGhpcy5fdHJhbnNuPXtpbmdQcm9wZXJ0aWVzOnt9LGNsZWFuOnt9LG9uRW5kOnt9fSx0aGlzLmNzcyh7cG9zaXRpb246ImFic29sdXRlIn0pfSxnLnByb3RvdHlwZS5oYW5kbGVFdmVudD1mdW5jdGlvbihhKXt2YXIgYj0ib24iK2EudHlwZTt0aGlzW2JdJiZ0aGlzW2JdKGEpfSxnLnByb3RvdHlwZS5nZXRTaXplPWZ1bmN0aW9uKCl7dGhpcy5zaXplPWModGhpcy5lbGVtZW50KX0sZy5wcm90b3R5cGUuY3NzPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZWxlbWVudC5zdHlsZTtmb3IodmFyIGMgaW4gYSl7dmFyIGQ9b1tjXXx8YztiW2RdPWFbY119fSxnLnByb3RvdHlwZS5nZXRQb3NpdGlvbj1mdW5jdGlvbigpe3ZhciBhPWgodGhpcy5lbGVtZW50KSxiPXRoaXMubGF5b3V0Lm9wdGlvbnMsYz1iLmlzT3JpZ2luTGVmdCxkPWIuaXNPcmlnaW5Ub3AsZT1wYXJzZUludChhW2M/ImxlZnQiOiJyaWdodCJdLDEwKSxmPXBhcnNlSW50KGFbZD8idG9wIjoiYm90dG9tIl0sMTApO2U9aXNOYU4oZSk/MDplLGY9aXNOYU4oZik/MDpmO3ZhciBnPXRoaXMubGF5b3V0LnNpemU7ZS09Yz9nLnBhZGRpbmdMZWZ0OmcucGFkZGluZ1JpZ2h0LGYtPWQ/Zy5wYWRkaW5nVG9wOmcucGFkZGluZ0JvdHRvbSx0aGlzLnBvc2l0aW9uLng9ZSx0aGlzLnBvc2l0aW9uLnk9Zn0sZy5wcm90b3R5cGUubGF5b3V0UG9zaXRpb249ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmxheW91dC5zaXplLGI9dGhpcy5sYXlvdXQub3B0aW9ucyxjPXt9O2IuaXNPcmlnaW5MZWZ0PyhjLmxlZnQ9dGhpcy5wb3NpdGlvbi54K2EucGFkZGluZ0xlZnQrInB4IixjLnJpZ2h0PSIiKTooYy5yaWdodD10aGlzLnBvc2l0aW9uLngrYS5wYWRkaW5nUmlnaHQrInB4IixjLmxlZnQ9IiIpLGIuaXNPcmlnaW5Ub3A/KGMudG9wPXRoaXMucG9zaXRpb24ueSthLnBhZGRpbmdUb3ArInB4IixjLmJvdHRvbT0iIik6KGMuYm90dG9tPXRoaXMucG9zaXRpb24ueSthLnBhZGRpbmdCb3R0b20rInB4IixjLnRvcD0iIiksdGhpcy5jc3MoYyksdGhpcy5lbWl0RXZlbnQoImxheW91dCIsW3RoaXNdKX07dmFyIHA9bD9mdW5jdGlvbihhLGIpe3JldHVybiJ0cmFuc2xhdGUzZCgiK2ErInB4LCAiK2IrInB4LCAwKSJ9OmZ1bmN0aW9uKGEsYil7cmV0dXJuInRyYW5zbGF0ZSgiK2ErInB4LCAiK2IrInB4KSJ9O2cucHJvdG90eXBlLl90cmFuc2l0aW9uVG89ZnVuY3Rpb24oYSxiKXt0aGlzLmdldFBvc2l0aW9uKCk7dmFyIGM9dGhpcy5wb3NpdGlvbi54LGQ9dGhpcy5wb3NpdGlvbi55LGU9cGFyc2VJbnQoYSwxMCksZj1wYXJzZUludChiLDEwKSxnPWU9PT10aGlzLnBvc2l0aW9uLngmJmY9PT10aGlzLnBvc2l0aW9uLnk7aWYodGhpcy5zZXRQb3NpdGlvbihhLGIpLGcmJiF0aGlzLmlzVHJhbnNpdGlvbmluZylyZXR1cm4gdm9pZCB0aGlzLmxheW91dFBvc2l0aW9uKCk7dmFyIGg9YS1jLGk9Yi1kLGo9e30saz10aGlzLmxheW91dC5vcHRpb25zO2g9ay5pc09yaWdpbkxlZnQ/aDotaCxpPWsuaXNPcmlnaW5Ub3A/aTotaSxqLnRyYW5zZm9ybT1wKGgsaSksdGhpcy50cmFuc2l0aW9uKHt0bzpqLG9uVHJhbnNpdGlvbkVuZDp7dHJhbnNmb3JtOnRoaXMubGF5b3V0UG9zaXRpb259LGlzQ2xlYW5pbmc6ITB9KX0sZy5wcm90b3R5cGUuZ29Ubz1mdW5jdGlvbihhLGIpe3RoaXMuc2V0UG9zaXRpb24oYSxiKSx0aGlzLmxheW91dFBvc2l0aW9uKCl9LGcucHJvdG90eXBlLm1vdmVUbz1rP2cucHJvdG90eXBlLl90cmFuc2l0aW9uVG86Zy5wcm90b3R5cGUuZ29UbyxnLnByb3RvdHlwZS5zZXRQb3NpdGlvbj1mdW5jdGlvbihhLGIpe3RoaXMucG9zaXRpb24ueD1wYXJzZUludChhLDEwKSx0aGlzLnBvc2l0aW9uLnk9cGFyc2VJbnQoYiwxMCl9LGcucHJvdG90eXBlLl9ub25UcmFuc2l0aW9uPWZ1bmN0aW9uKGEpe3RoaXMuY3NzKGEudG8pLGEuaXNDbGVhbmluZyYmdGhpcy5fcmVtb3ZlU3R5bGVzKGEudG8pO2Zvcih2YXIgYiBpbiBhLm9uVHJhbnNpdGlvbkVuZClhLm9uVHJhbnNpdGlvbkVuZFtiXS5jYWxsKHRoaXMpfSxnLnByb3RvdHlwZS5fdHJhbnNpdGlvbj1mdW5jdGlvbihhKXtpZighcGFyc2VGbG9hdCh0aGlzLmxheW91dC5vcHRpb25zLnRyYW5zaXRpb25EdXJhdGlvbikpcmV0dXJuIHZvaWQgdGhpcy5fbm9uVHJhbnNpdGlvbihhKTt2YXIgYj10aGlzLl90cmFuc247Zm9yKHZhciBjIGluIGEub25UcmFuc2l0aW9uRW5kKWIub25FbmRbY109YS5vblRyYW5zaXRpb25FbmRbY107Zm9yKGMgaW4gYS50byliLmluZ1Byb3BlcnRpZXNbY109ITAsYS5pc0NsZWFuaW5nJiYoYi5jbGVhbltjXT0hMCk7aWYoYS5mcm9tKXt0aGlzLmNzcyhhLmZyb20pO3ZhciBkPXRoaXMuZWxlbWVudC5vZmZzZXRIZWlnaHQ7ZD1udWxsfXRoaXMuZW5hYmxlVHJhbnNpdGlvbihhLnRvKSx0aGlzLmNzcyhhLnRvKSx0aGlzLmlzVHJhbnNpdGlvbmluZz0hMH07dmFyIHE9aiYmZShqKSsiLG9wYWNpdHkiO2cucHJvdG90eXBlLmVuYWJsZVRyYW5zaXRpb249ZnVuY3Rpb24oKXt0aGlzLmlzVHJhbnNpdGlvbmluZ3x8KHRoaXMuY3NzKHt0cmFuc2l0aW9uUHJvcGVydHk6cSx0cmFuc2l0aW9uRHVyYXRpb246dGhpcy5sYXlvdXQub3B0aW9ucy50cmFuc2l0aW9uRHVyYXRpb259KSx0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihtLHRoaXMsITEpKX0sZy5wcm90b3R5cGUudHJhbnNpdGlvbj1nLnByb3RvdHlwZVtpPyJfdHJhbnNpdGlvbiI6Il9ub25UcmFuc2l0aW9uIl0sZy5wcm90b3R5cGUub253ZWJraXRUcmFuc2l0aW9uRW5kPWZ1bmN0aW9uKGEpe3RoaXMub250cmFuc2l0aW9uZW5kKGEpfSxnLnByb3RvdHlwZS5vbm90cmFuc2l0aW9uZW5kPWZ1bmN0aW9uKGEpe3RoaXMub250cmFuc2l0aW9uZW5kKGEpfTt2YXIgcj17Ii13ZWJraXQtdHJhbnNmb3JtIjoidHJhbnNmb3JtIiwiLW1vei10cmFuc2Zvcm0iOiJ0cmFuc2Zvcm0iLCItby10cmFuc2Zvcm0iOiJ0cmFuc2Zvcm0ifTtnLnByb3RvdHlwZS5vbnRyYW5zaXRpb25lbmQ9ZnVuY3Rpb24oYSl7aWYoYS50YXJnZXQ9PT10aGlzLmVsZW1lbnQpe3ZhciBiPXRoaXMuX3RyYW5zbixjPXJbYS5wcm9wZXJ0eU5hbWVdfHxhLnByb3BlcnR5TmFtZTtpZihkZWxldGUgYi5pbmdQcm9wZXJ0aWVzW2NdLGQoYi5pbmdQcm9wZXJ0aWVzKSYmdGhpcy5kaXNhYmxlVHJhbnNpdGlvbigpLGMgaW4gYi5jbGVhbiYmKHRoaXMuZWxlbWVudC5zdHlsZVthLnByb3BlcnR5TmFtZV09IiIsZGVsZXRlIGIuY2xlYW5bY10pLGMgaW4gYi5vbkVuZCl7dmFyIGU9Yi5vbkVuZFtjXTtlLmNhbGwodGhpcyksZGVsZXRlIGIub25FbmRbY119dGhpcy5lbWl0RXZlbnQoInRyYW5zaXRpb25FbmQiLFt0aGlzXSl9fSxnLnByb3RvdHlwZS5kaXNhYmxlVHJhbnNpdGlvbj1mdW5jdGlvbigpe3RoaXMucmVtb3ZlVHJhbnNpdGlvblN0eWxlcygpLHRoaXMuZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKG0sdGhpcywhMSksdGhpcy5pc1RyYW5zaXRpb25pbmc9ITF9LGcucHJvdG90eXBlLl9yZW1vdmVTdHlsZXM9ZnVuY3Rpb24oYSl7dmFyIGI9e307Zm9yKHZhciBjIGluIGEpYltjXT0iIjt0aGlzLmNzcyhiKX07dmFyIHM9e3RyYW5zaXRpb25Qcm9wZXJ0eToiIix0cmFuc2l0aW9uRHVyYXRpb246IiJ9O3JldHVybiBnLnByb3RvdHlwZS5yZW1vdmVUcmFuc2l0aW9uU3R5bGVzPWZ1bmN0aW9uKCl7dGhpcy5jc3Mocyl9LGcucHJvdG90eXBlLnJlbW92ZUVsZW09ZnVuY3Rpb24oKXt0aGlzLmVsZW1lbnQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLmVsZW1lbnQpLHRoaXMuZW1pdEV2ZW50KCJyZW1vdmUiLFt0aGlzXSl9LGcucHJvdG90eXBlLnJlbW92ZT1mdW5jdGlvbigpe2lmKCFpfHwhcGFyc2VGbG9hdCh0aGlzLmxheW91dC5vcHRpb25zLnRyYW5zaXRpb25EdXJhdGlvbikpcmV0dXJuIHZvaWQgdGhpcy5yZW1vdmVFbGVtKCk7dmFyIGE9dGhpczt0aGlzLm9uKCJ0cmFuc2l0aW9uRW5kIixmdW5jdGlvbigpe3JldHVybiBhLnJlbW92ZUVsZW0oKSwhMH0pLHRoaXMuaGlkZSgpfSxnLnByb3RvdHlwZS5yZXZlYWw9ZnVuY3Rpb24oKXtkZWxldGUgdGhpcy5pc0hpZGRlbix0aGlzLmNzcyh7ZGlzcGxheToiIn0pO3ZhciBhPXRoaXMubGF5b3V0Lm9wdGlvbnM7dGhpcy50cmFuc2l0aW9uKHtmcm9tOmEuaGlkZGVuU3R5bGUsdG86YS52aXNpYmxlU3R5bGUsaXNDbGVhbmluZzohMH0pfSxnLnByb3RvdHlwZS5oaWRlPWZ1bmN0aW9uKCl7dGhpcy5pc0hpZGRlbj0hMCx0aGlzLmNzcyh7ZGlzcGxheToiIn0pO3ZhciBhPXRoaXMubGF5b3V0Lm9wdGlvbnM7dGhpcy50cmFuc2l0aW9uKHtmcm9tOmEudmlzaWJsZVN0eWxlLHRvOmEuaGlkZGVuU3R5bGUsaXNDbGVhbmluZzohMCxvblRyYW5zaXRpb25FbmQ6e29wYWNpdHk6ZnVuY3Rpb24oKXt0aGlzLmlzSGlkZGVuJiZ0aGlzLmNzcyh7ZGlzcGxheToibm9uZSJ9KX19fSl9LGcucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXt0aGlzLmNzcyh7cG9zaXRpb246IiIsbGVmdDoiIixyaWdodDoiIix0b3A6IiIsYm90dG9tOiIiLHRyYW5zaXRpb246IiIsdHJhbnNmb3JtOiIifSl9LGd9dmFyIGc9YS5nZXRDb21wdXRlZFN0eWxlLGg9Zz9mdW5jdGlvbihhKXtyZXR1cm4gZyhhLG51bGwpfTpmdW5jdGlvbihhKXtyZXR1cm4gYS5jdXJyZW50U3R5bGV9OyJmdW5jdGlvbiI9PXR5cGVvZiBjJiZjLmFtZD9jKCJvdXRsYXllci9pdGVtIixbImV2ZW50RW1pdHRlci9FdmVudEVtaXR0ZXIiLCJnZXQtc2l6ZS9nZXQtc2l6ZSIsImdldC1zdHlsZS1wcm9wZXJ0eS9nZXQtc3R5bGUtcHJvcGVydHkiXSxmKTooYS5PdXRsYXllcj17fSxhLk91dGxheWVyLkl0ZW09ZihhLkV2ZW50RW1pdHRlcixhLmdldFNpemUsYS5nZXRTdHlsZVByb3BlcnR5KSl9KHdpbmRvdyksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhLGIpe2Zvcih2YXIgYyBpbiBiKWFbY109YltjXTtyZXR1cm4gYX1mdW5jdGlvbiBkKGEpe3JldHVybiJbb2JqZWN0IEFycmF5XSI9PT1tLmNhbGwoYSl9ZnVuY3Rpb24gZShhKXt2YXIgYj1bXTtpZihkKGEpKWI9YTtlbHNlIGlmKGEmJiJudW1iZXIiPT10eXBlb2YgYS5sZW5ndGgpZm9yKHZhciBjPTAsZT1hLmxlbmd0aDtlPmM7YysrKWIucHVzaChhW2NdKTtlbHNlIGIucHVzaChhKTtyZXR1cm4gYn1mdW5jdGlvbiBmKGEsYil7dmFyIGM9byhiLGEpOy0xIT09YyYmYi5zcGxpY2UoYywxKX1mdW5jdGlvbiBnKGEpe3JldHVybiBhLnJlcGxhY2UoLyguKShbQS1aXSkvZyxmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGIrIi0iK2N9KS50b0xvd2VyQ2FzZSgpfWZ1bmN0aW9uIGgoYyxkLGgsbSxvLHApe2Z1bmN0aW9uIHEoYSxjKXtpZigic3RyaW5nIj09dHlwZW9mIGEmJihhPWkucXVlcnlTZWxlY3RvcihhKSksIWF8fCFuKGEpKXJldHVybiB2b2lkKGomJmouZXJyb3IoIkJhZCAiK3RoaXMuY29uc3RydWN0b3IubmFtZXNwYWNlKyIgZWxlbWVudDogIithKSk7dGhpcy5lbGVtZW50PWEsdGhpcy5vcHRpb25zPWIoe30sdGhpcy5jb25zdHJ1Y3Rvci5kZWZhdWx0cyksdGhpcy5vcHRpb24oYyk7dmFyIGQ9KytyO3RoaXMuZWxlbWVudC5vdXRsYXllckdVSUQ9ZCxzW2RdPXRoaXMsdGhpcy5fY3JlYXRlKCksdGhpcy5vcHRpb25zLmlzSW5pdExheW91dCYmdGhpcy5sYXlvdXQoKX12YXIgcj0wLHM9e307cmV0dXJuIHEubmFtZXNwYWNlPSJvdXRsYXllciIscS5JdGVtPXAscS5kZWZhdWx0cz17Y29udGFpbmVyU3R5bGU6e3Bvc2l0aW9uOiJyZWxhdGl2ZSJ9LGlzSW5pdExheW91dDohMCxpc09yaWdpbkxlZnQ6ITAsaXNPcmlnaW5Ub3A6ITAsaXNSZXNpemVCb3VuZDohMCxpc1Jlc2l6aW5nQ29udGFpbmVyOiEwLHRyYW5zaXRpb25EdXJhdGlvbjoiMC40cyIsaGlkZGVuU3R5bGU6e29wYWNpdHk6MCx0cmFuc2Zvcm06InNjYWxlKDAuMDAxKSJ9LHZpc2libGVTdHlsZTp7b3BhY2l0eToxLHRyYW5zZm9ybToic2NhbGUoMSkifX0sYihxLnByb3RvdHlwZSxoLnByb3RvdHlwZSkscS5wcm90b3R5cGUub3B0aW9uPWZ1bmN0aW9uKGEpe2IodGhpcy5vcHRpb25zLGEpCn0scS5wcm90b3R5cGUuX2NyZWF0ZT1mdW5jdGlvbigpe3RoaXMucmVsb2FkSXRlbXMoKSx0aGlzLnN0YW1wcz1bXSx0aGlzLnN0YW1wKHRoaXMub3B0aW9ucy5zdGFtcCksYih0aGlzLmVsZW1lbnQuc3R5bGUsdGhpcy5vcHRpb25zLmNvbnRhaW5lclN0eWxlKSx0aGlzLm9wdGlvbnMuaXNSZXNpemVCb3VuZCYmdGhpcy5iaW5kUmVzaXplKCl9LHEucHJvdG90eXBlLnJlbG9hZEl0ZW1zPWZ1bmN0aW9uKCl7dGhpcy5pdGVtcz10aGlzLl9pdGVtaXplKHRoaXMuZWxlbWVudC5jaGlsZHJlbil9LHEucHJvdG90eXBlLl9pdGVtaXplPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYj10aGlzLl9maWx0ZXJGaW5kSXRlbUVsZW1lbnRzKGEpLGM9dGhpcy5jb25zdHJ1Y3Rvci5JdGVtLGQ9W10sZT0wLGY9Yi5sZW5ndGg7Zj5lO2UrKyl7dmFyIGc9YltlXSxoPW5ldyBjKGcsdGhpcyk7ZC5wdXNoKGgpfXJldHVybiBkfSxxLnByb3RvdHlwZS5fZmlsdGVyRmluZEl0ZW1FbGVtZW50cz1mdW5jdGlvbihhKXthPWUoYSk7Zm9yKHZhciBiPXRoaXMub3B0aW9ucy5pdGVtU2VsZWN0b3IsYz1bXSxkPTAsZj1hLmxlbmd0aDtmPmQ7ZCsrKXt2YXIgZz1hW2RdO2lmKG4oZykpaWYoYil7byhnLGIpJiZjLnB1c2goZyk7Zm9yKHZhciBoPWcucXVlcnlTZWxlY3RvckFsbChiKSxpPTAsaj1oLmxlbmd0aDtqPmk7aSsrKWMucHVzaChoW2ldKX1lbHNlIGMucHVzaChnKX1yZXR1cm4gY30scS5wcm90b3R5cGUuZ2V0SXRlbUVsZW1lbnRzPWZ1bmN0aW9uKCl7Zm9yKHZhciBhPVtdLGI9MCxjPXRoaXMuaXRlbXMubGVuZ3RoO2M+YjtiKyspYS5wdXNoKHRoaXMuaXRlbXNbYl0uZWxlbWVudCk7cmV0dXJuIGF9LHEucHJvdG90eXBlLmxheW91dD1mdW5jdGlvbigpe3RoaXMuX3Jlc2V0TGF5b3V0KCksdGhpcy5fbWFuYWdlU3RhbXBzKCk7dmFyIGE9dm9pZCAwIT09dGhpcy5vcHRpb25zLmlzTGF5b3V0SW5zdGFudD90aGlzLm9wdGlvbnMuaXNMYXlvdXRJbnN0YW50OiF0aGlzLl9pc0xheW91dEluaXRlZDt0aGlzLmxheW91dEl0ZW1zKHRoaXMuaXRlbXMsYSksdGhpcy5faXNMYXlvdXRJbml0ZWQ9ITB9LHEucHJvdG90eXBlLl9pbml0PXEucHJvdG90eXBlLmxheW91dCxxLnByb3RvdHlwZS5fcmVzZXRMYXlvdXQ9ZnVuY3Rpb24oKXt0aGlzLmdldFNpemUoKX0scS5wcm90b3R5cGUuZ2V0U2l6ZT1mdW5jdGlvbigpe3RoaXMuc2l6ZT1tKHRoaXMuZWxlbWVudCl9LHEucHJvdG90eXBlLl9nZXRNZWFzdXJlbWVudD1mdW5jdGlvbihhLGIpe3ZhciBjLGQ9dGhpcy5vcHRpb25zW2FdO2Q/KCJzdHJpbmciPT10eXBlb2YgZD9jPXRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKGQpOm4oZCkmJihjPWQpLHRoaXNbYV09Yz9tKGMpW2JdOmQpOnRoaXNbYV09MH0scS5wcm90b3R5cGUubGF5b3V0SXRlbXM9ZnVuY3Rpb24oYSxiKXthPXRoaXMuX2dldEl0ZW1zRm9yTGF5b3V0KGEpLHRoaXMuX2xheW91dEl0ZW1zKGEsYiksdGhpcy5fcG9zdExheW91dCgpfSxxLnByb3RvdHlwZS5fZ2V0SXRlbXNGb3JMYXlvdXQ9ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPVtdLGM9MCxkPWEubGVuZ3RoO2Q+YztjKyspe3ZhciBlPWFbY107ZS5pc0lnbm9yZWR8fGIucHVzaChlKX1yZXR1cm4gYn0scS5wcm90b3R5cGUuX2xheW91dEl0ZW1zPWZ1bmN0aW9uKGEsYil7ZnVuY3Rpb24gYygpe2QuZW1pdEV2ZW50KCJsYXlvdXRDb21wbGV0ZSIsW2QsYV0pfXZhciBkPXRoaXM7aWYoIWF8fCFhLmxlbmd0aClyZXR1cm4gdm9pZCBjKCk7dGhpcy5faXRlbXNPbihhLCJsYXlvdXQiLGMpO2Zvcih2YXIgZT1bXSxmPTAsZz1hLmxlbmd0aDtnPmY7ZisrKXt2YXIgaD1hW2ZdLGk9dGhpcy5fZ2V0SXRlbUxheW91dFBvc2l0aW9uKGgpO2kuaXRlbT1oLGkuaXNJbnN0YW50PWJ8fGguaXNMYXlvdXRJbnN0YW50LGUucHVzaChpKX10aGlzLl9wcm9jZXNzTGF5b3V0UXVldWUoZSl9LHEucHJvdG90eXBlLl9nZXRJdGVtTGF5b3V0UG9zaXRpb249ZnVuY3Rpb24oKXtyZXR1cm57eDowLHk6MH19LHEucHJvdG90eXBlLl9wcm9jZXNzTGF5b3V0UXVldWU9ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPTAsYz1hLmxlbmd0aDtjPmI7YisrKXt2YXIgZD1hW2JdO3RoaXMuX3Bvc2l0aW9uSXRlbShkLml0ZW0sZC54LGQueSxkLmlzSW5zdGFudCl9fSxxLnByb3RvdHlwZS5fcG9zaXRpb25JdGVtPWZ1bmN0aW9uKGEsYixjLGQpe2Q/YS5nb1RvKGIsYyk6YS5tb3ZlVG8oYixjKX0scS5wcm90b3R5cGUuX3Bvc3RMYXlvdXQ9ZnVuY3Rpb24oKXt0aGlzLnJlc2l6ZUNvbnRhaW5lcigpfSxxLnByb3RvdHlwZS5yZXNpemVDb250YWluZXI9ZnVuY3Rpb24oKXtpZih0aGlzLm9wdGlvbnMuaXNSZXNpemluZ0NvbnRhaW5lcil7dmFyIGE9dGhpcy5fZ2V0Q29udGFpbmVyU2l6ZSgpO2EmJih0aGlzLl9zZXRDb250YWluZXJNZWFzdXJlKGEud2lkdGgsITApLHRoaXMuX3NldENvbnRhaW5lck1lYXN1cmUoYS5oZWlnaHQsITEpKX19LHEucHJvdG90eXBlLl9nZXRDb250YWluZXJTaXplPWwscS5wcm90b3R5cGUuX3NldENvbnRhaW5lck1lYXN1cmU9ZnVuY3Rpb24oYSxiKXtpZih2b2lkIDAhPT1hKXt2YXIgYz10aGlzLnNpemU7Yy5pc0JvcmRlckJveCYmKGErPWI/Yy5wYWRkaW5nTGVmdCtjLnBhZGRpbmdSaWdodCtjLmJvcmRlckxlZnRXaWR0aCtjLmJvcmRlclJpZ2h0V2lkdGg6Yy5wYWRkaW5nQm90dG9tK2MucGFkZGluZ1RvcCtjLmJvcmRlclRvcFdpZHRoK2MuYm9yZGVyQm90dG9tV2lkdGgpLGE9TWF0aC5tYXgoYSwwKSx0aGlzLmVsZW1lbnQuc3R5bGVbYj8id2lkdGgiOiJoZWlnaHQiXT1hKyJweCJ9fSxxLnByb3RvdHlwZS5faXRlbXNPbj1mdW5jdGlvbihhLGIsYyl7ZnVuY3Rpb24gZCgpe3JldHVybiBlKyssZT09PWYmJmMuY2FsbChnKSwhMH1mb3IodmFyIGU9MCxmPWEubGVuZ3RoLGc9dGhpcyxoPTAsaT1hLmxlbmd0aDtpPmg7aCsrKXt2YXIgaj1hW2hdO2oub24oYixkKX19LHEucHJvdG90eXBlLmlnbm9yZT1mdW5jdGlvbihhKXt2YXIgYj10aGlzLmdldEl0ZW0oYSk7YiYmKGIuaXNJZ25vcmVkPSEwKX0scS5wcm90b3R5cGUudW5pZ25vcmU9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5nZXRJdGVtKGEpO2ImJmRlbGV0ZSBiLmlzSWdub3JlZH0scS5wcm90b3R5cGUuc3RhbXA9ZnVuY3Rpb24oYSl7aWYoYT10aGlzLl9maW5kKGEpKXt0aGlzLnN0YW1wcz10aGlzLnN0YW1wcy5jb25jYXQoYSk7Zm9yKHZhciBiPTAsYz1hLmxlbmd0aDtjPmI7YisrKXt2YXIgZD1hW2JdO3RoaXMuaWdub3JlKGQpfX19LHEucHJvdG90eXBlLnVuc3RhbXA9ZnVuY3Rpb24oYSl7aWYoYT10aGlzLl9maW5kKGEpKWZvcih2YXIgYj0wLGM9YS5sZW5ndGg7Yz5iO2IrKyl7dmFyIGQ9YVtiXTtmKGQsdGhpcy5zdGFtcHMpLHRoaXMudW5pZ25vcmUoZCl9fSxxLnByb3RvdHlwZS5fZmluZD1mdW5jdGlvbihhKXtyZXR1cm4gYT8oInN0cmluZyI9PXR5cGVvZiBhJiYoYT10aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChhKSksYT1lKGEpKTp2b2lkIDB9LHEucHJvdG90eXBlLl9tYW5hZ2VTdGFtcHM9ZnVuY3Rpb24oKXtpZih0aGlzLnN0YW1wcyYmdGhpcy5zdGFtcHMubGVuZ3RoKXt0aGlzLl9nZXRCb3VuZGluZ1JlY3QoKTtmb3IodmFyIGE9MCxiPXRoaXMuc3RhbXBzLmxlbmd0aDtiPmE7YSsrKXt2YXIgYz10aGlzLnN0YW1wc1thXTt0aGlzLl9tYW5hZ2VTdGFtcChjKX19fSxxLnByb3RvdHlwZS5fZ2V0Qm91bmRpbmdSZWN0PWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5lbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLGI9dGhpcy5zaXplO3RoaXMuX2JvdW5kaW5nUmVjdD17bGVmdDphLmxlZnQrYi5wYWRkaW5nTGVmdCtiLmJvcmRlckxlZnRXaWR0aCx0b3A6YS50b3ArYi5wYWRkaW5nVG9wK2IuYm9yZGVyVG9wV2lkdGgscmlnaHQ6YS5yaWdodC0oYi5wYWRkaW5nUmlnaHQrYi5ib3JkZXJSaWdodFdpZHRoKSxib3R0b206YS5ib3R0b20tKGIucGFkZGluZ0JvdHRvbStiLmJvcmRlckJvdHRvbVdpZHRoKX19LHEucHJvdG90eXBlLl9tYW5hZ2VTdGFtcD1sLHEucHJvdG90eXBlLl9nZXRFbGVtZW50T2Zmc2V0PWZ1bmN0aW9uKGEpe3ZhciBiPWEuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksYz10aGlzLl9ib3VuZGluZ1JlY3QsZD1tKGEpLGU9e2xlZnQ6Yi5sZWZ0LWMubGVmdC1kLm1hcmdpbkxlZnQsdG9wOmIudG9wLWMudG9wLWQubWFyZ2luVG9wLHJpZ2h0OmMucmlnaHQtYi5yaWdodC1kLm1hcmdpblJpZ2h0LGJvdHRvbTpjLmJvdHRvbS1iLmJvdHRvbS1kLm1hcmdpbkJvdHRvbX07cmV0dXJuIGV9LHEucHJvdG90eXBlLmhhbmRsZUV2ZW50PWZ1bmN0aW9uKGEpe3ZhciBiPSJvbiIrYS50eXBlO3RoaXNbYl0mJnRoaXNbYl0oYSl9LHEucHJvdG90eXBlLmJpbmRSZXNpemU9ZnVuY3Rpb24oKXt0aGlzLmlzUmVzaXplQm91bmR8fChjLmJpbmQoYSwicmVzaXplIix0aGlzKSx0aGlzLmlzUmVzaXplQm91bmQ9ITApfSxxLnByb3RvdHlwZS51bmJpbmRSZXNpemU9ZnVuY3Rpb24oKXt0aGlzLmlzUmVzaXplQm91bmQmJmMudW5iaW5kKGEsInJlc2l6ZSIsdGhpcyksdGhpcy5pc1Jlc2l6ZUJvdW5kPSExfSxxLnByb3RvdHlwZS5vbnJlc2l6ZT1mdW5jdGlvbigpe2Z1bmN0aW9uIGEoKXtiLnJlc2l6ZSgpLGRlbGV0ZSBiLnJlc2l6ZVRpbWVvdXR9dGhpcy5yZXNpemVUaW1lb3V0JiZjbGVhclRpbWVvdXQodGhpcy5yZXNpemVUaW1lb3V0KTt2YXIgYj10aGlzO3RoaXMucmVzaXplVGltZW91dD1zZXRUaW1lb3V0KGEsMTAwKX0scS5wcm90b3R5cGUucmVzaXplPWZ1bmN0aW9uKCl7dGhpcy5pc1Jlc2l6ZUJvdW5kJiZ0aGlzLm5lZWRzUmVzaXplTGF5b3V0KCkmJnRoaXMubGF5b3V0KCl9LHEucHJvdG90eXBlLm5lZWRzUmVzaXplTGF5b3V0PWZ1bmN0aW9uKCl7dmFyIGE9bSh0aGlzLmVsZW1lbnQpLGI9dGhpcy5zaXplJiZhO3JldHVybiBiJiZhLmlubmVyV2lkdGghPT10aGlzLnNpemUuaW5uZXJXaWR0aH0scS5wcm90b3R5cGUuYWRkSXRlbXM9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5faXRlbWl6ZShhKTtyZXR1cm4gYi5sZW5ndGgmJih0aGlzLml0ZW1zPXRoaXMuaXRlbXMuY29uY2F0KGIpKSxifSxxLnByb3RvdHlwZS5hcHBlbmRlZD1mdW5jdGlvbihhKXt2YXIgYj10aGlzLmFkZEl0ZW1zKGEpO2IubGVuZ3RoJiYodGhpcy5sYXlvdXRJdGVtcyhiLCEwKSx0aGlzLnJldmVhbChiKSl9LHEucHJvdG90eXBlLnByZXBlbmRlZD1mdW5jdGlvbihhKXt2YXIgYj10aGlzLl9pdGVtaXplKGEpO2lmKGIubGVuZ3RoKXt2YXIgYz10aGlzLml0ZW1zLnNsaWNlKDApO3RoaXMuaXRlbXM9Yi5jb25jYXQoYyksdGhpcy5fcmVzZXRMYXlvdXQoKSx0aGlzLl9tYW5hZ2VTdGFtcHMoKSx0aGlzLmxheW91dEl0ZW1zKGIsITApLHRoaXMucmV2ZWFsKGIpLHRoaXMubGF5b3V0SXRlbXMoYyl9fSxxLnByb3RvdHlwZS5yZXZlYWw9ZnVuY3Rpb24oYSl7dmFyIGI9YSYmYS5sZW5ndGg7aWYoYilmb3IodmFyIGM9MDtiPmM7YysrKXt2YXIgZD1hW2NdO2QucmV2ZWFsKCl9fSxxLnByb3RvdHlwZS5oaWRlPWZ1bmN0aW9uKGEpe3ZhciBiPWEmJmEubGVuZ3RoO2lmKGIpZm9yKHZhciBjPTA7Yj5jO2MrKyl7dmFyIGQ9YVtjXTtkLmhpZGUoKX19LHEucHJvdG90eXBlLmdldEl0ZW09ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPTAsYz10aGlzLml0ZW1zLmxlbmd0aDtjPmI7YisrKXt2YXIgZD10aGlzLml0ZW1zW2JdO2lmKGQuZWxlbWVudD09PWEpcmV0dXJuIGR9fSxxLnByb3RvdHlwZS5nZXRJdGVtcz1mdW5jdGlvbihhKXtpZihhJiZhLmxlbmd0aCl7Zm9yKHZhciBiPVtdLGM9MCxkPWEubGVuZ3RoO2Q+YztjKyspe3ZhciBlPWFbY10sZj10aGlzLmdldEl0ZW0oZSk7ZiYmYi5wdXNoKGYpfXJldHVybiBifX0scS5wcm90b3R5cGUucmVtb3ZlPWZ1bmN0aW9uKGEpe2E9ZShhKTt2YXIgYj10aGlzLmdldEl0ZW1zKGEpO2lmKGImJmIubGVuZ3RoKXt0aGlzLl9pdGVtc09uKGIsInJlbW92ZSIsZnVuY3Rpb24oKXt0aGlzLmVtaXRFdmVudCgicmVtb3ZlQ29tcGxldGUiLFt0aGlzLGJdKX0pO2Zvcih2YXIgYz0wLGQ9Yi5sZW5ndGg7ZD5jO2MrKyl7dmFyIGc9YltjXTtnLnJlbW92ZSgpLGYoZyx0aGlzLml0ZW1zKX19fSxxLnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5lbGVtZW50LnN0eWxlO2EuaGVpZ2h0PSIiLGEucG9zaXRpb249IiIsYS53aWR0aD0iIjtmb3IodmFyIGI9MCxjPXRoaXMuaXRlbXMubGVuZ3RoO2M+YjtiKyspe3ZhciBkPXRoaXMuaXRlbXNbYl07ZC5kZXN0cm95KCl9dGhpcy51bmJpbmRSZXNpemUoKSxkZWxldGUgdGhpcy5lbGVtZW50Lm91dGxheWVyR1VJRCxrJiZrLnJlbW92ZURhdGEodGhpcy5lbGVtZW50LHRoaXMuY29uc3RydWN0b3IubmFtZXNwYWNlKX0scS5kYXRhPWZ1bmN0aW9uKGEpe3ZhciBiPWEmJmEub3V0bGF5ZXJHVUlEO3JldHVybiBiJiZzW2JdfSxxLmNyZWF0ZT1mdW5jdGlvbihhLGMpe2Z1bmN0aW9uIGUoKXtxLmFwcGx5KHRoaXMsYXJndW1lbnRzKX1yZXR1cm4gT2JqZWN0LmNyZWF0ZT9lLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHEucHJvdG90eXBlKTpiKGUucHJvdG90eXBlLHEucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lLGUuZGVmYXVsdHM9Yih7fSxxLmRlZmF1bHRzKSxiKGUuZGVmYXVsdHMsYyksZS5wcm90b3R5cGUuc2V0dGluZ3M9e30sZS5uYW1lc3BhY2U9YSxlLmRhdGE9cS5kYXRhLGUuSXRlbT1mdW5jdGlvbigpe3AuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxlLkl0ZW0ucHJvdG90eXBlPW5ldyBwLGQoZnVuY3Rpb24oKXtmb3IodmFyIGI9ZyhhKSxjPWkucXVlcnlTZWxlY3RvckFsbCgiLmpzLSIrYiksZD0iZGF0YS0iK2IrIi1vcHRpb25zIixmPTAsaD1jLmxlbmd0aDtoPmY7ZisrKXt2YXIgbCxtPWNbZl0sbj1tLmdldEF0dHJpYnV0ZShkKTt0cnl7bD1uJiZKU09OLnBhcnNlKG4pfWNhdGNoKG8pe2omJmouZXJyb3IoIkVycm9yIHBhcnNpbmcgIitkKyIgb24gIittLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkrKG0uaWQ/IiMiK20uaWQ6IiIpKyI6ICIrbyk7Y29udGludWV9dmFyIHA9bmV3IGUobSxsKTtrJiZrLmRhdGEobSxhLHApfX0pLGsmJmsuYnJpZGdldCYmay5icmlkZ2V0KGEsZSksZX0scS5JdGVtPXAscX12YXIgaT1hLmRvY3VtZW50LGo9YS5jb25zb2xlLGs9YS5qUXVlcnksbD1mdW5jdGlvbigpe30sbT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLG49Im9iamVjdCI9PXR5cGVvZiBIVE1MRWxlbWVudD9mdW5jdGlvbihhKXtyZXR1cm4gYSBpbnN0YW5jZW9mIEhUTUxFbGVtZW50fTpmdW5jdGlvbihhKXtyZXR1cm4gYSYmIm9iamVjdCI9PXR5cGVvZiBhJiYxPT09YS5ub2RlVHlwZSYmInN0cmluZyI9PXR5cGVvZiBhLm5vZGVOYW1lfSxvPUFycmF5LnByb3RvdHlwZS5pbmRleE9mP2Z1bmN0aW9uKGEsYil7cmV0dXJuIGEuaW5kZXhPZihiKX06ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9MCxkPWEubGVuZ3RoO2Q+YztjKyspaWYoYVtjXT09PWIpcmV0dXJuIGM7cmV0dXJuLTF9OyJmdW5jdGlvbiI9PXR5cGVvZiBjJiZjLmFtZD9jKCJvdXRsYXllci9vdXRsYXllciIsWyJldmVudGllL2V2ZW50aWUiLCJkb2MtcmVhZHkvZG9jLXJlYWR5IiwiZXZlbnRFbWl0dGVyL0V2ZW50RW1pdHRlciIsImdldC1zaXplL2dldC1zaXplIiwibWF0Y2hlcy1zZWxlY3Rvci9tYXRjaGVzLXNlbGVjdG9yIiwiLi9pdGVtIl0saCk6YS5PdXRsYXllcj1oKGEuZXZlbnRpZSxhLmRvY1JlYWR5LGEuRXZlbnRFbWl0dGVyLGEuZ2V0U2l6ZSxhLm1hdGNoZXNTZWxlY3RvcixhLk91dGxheWVyLkl0ZW0pfSh3aW5kb3cpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSxiKXt2YXIgYz1hLmNyZWF0ZSgibWFzb25yeSIpO3JldHVybiBjLnByb3RvdHlwZS5fcmVzZXRMYXlvdXQ9ZnVuY3Rpb24oKXt0aGlzLmdldFNpemUoKSx0aGlzLl9nZXRNZWFzdXJlbWVudCgiY29sdW1uV2lkdGgiLCJvdXRlcldpZHRoIiksdGhpcy5fZ2V0TWVhc3VyZW1lbnQoImd1dHRlciIsIm91dGVyV2lkdGgiKSx0aGlzLm1lYXN1cmVDb2x1bW5zKCk7dmFyIGE9dGhpcy5jb2xzO2Zvcih0aGlzLmNvbFlzPVtdO2EtLTspdGhpcy5jb2xZcy5wdXNoKDApO3RoaXMubWF4WT0wfSxjLnByb3RvdHlwZS5tZWFzdXJlQ29sdW1ucz1mdW5jdGlvbigpe2lmKHRoaXMuZ2V0Q29udGFpbmVyV2lkdGgoKSwhdGhpcy5jb2x1bW5XaWR0aCl7dmFyIGE9dGhpcy5pdGVtc1swXSxjPWEmJmEuZWxlbWVudDt0aGlzLmNvbHVtbldpZHRoPWMmJmIoYykub3V0ZXJXaWR0aHx8dGhpcy5jb250YWluZXJXaWR0aH10aGlzLmNvbHVtbldpZHRoKz10aGlzLmd1dHRlcix0aGlzLmNvbHM9TWF0aC5mbG9vcigodGhpcy5jb250YWluZXJXaWR0aCt0aGlzLmd1dHRlcikvdGhpcy5jb2x1bW5XaWR0aCksdGhpcy5jb2xzPU1hdGgubWF4KHRoaXMuY29scywxKX0sYy5wcm90b3R5cGUuZ2V0Q29udGFpbmVyV2lkdGg9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm9wdGlvbnMuaXNGaXRXaWR0aD90aGlzLmVsZW1lbnQucGFyZW50Tm9kZTp0aGlzLmVsZW1lbnQsYz1iKGEpO3RoaXMuY29udGFpbmVyV2lkdGg9YyYmYy5pbm5lcldpZHRofSxjLnByb3RvdHlwZS5fZ2V0SXRlbUxheW91dFBvc2l0aW9uPWZ1bmN0aW9uKGEpe2EuZ2V0U2l6ZSgpO3ZhciBiPWEuc2l6ZS5vdXRlcldpZHRoJXRoaXMuY29sdW1uV2lkdGgsYz1iJiYxPmI/InJvdW5kIjoiY2VpbCIsZT1NYXRoW2NdKGEuc2l6ZS5vdXRlcldpZHRoL3RoaXMuY29sdW1uV2lkdGgpO2U9TWF0aC5taW4oZSx0aGlzLmNvbHMpO2Zvcih2YXIgZj10aGlzLl9nZXRDb2xHcm91cChlKSxnPU1hdGgubWluLmFwcGx5KE1hdGgsZiksaD1kKGYsZyksaT17eDp0aGlzLmNvbHVtbldpZHRoKmgseTpnfSxqPWcrYS5zaXplLm91dGVySGVpZ2h0LGs9dGhpcy5jb2xzKzEtZi5sZW5ndGgsbD0wO2s+bDtsKyspdGhpcy5jb2xZc1toK2xdPWo7cmV0dXJuIGl9LGMucHJvdG90eXBlLl9nZXRDb2xHcm91cD1mdW5jdGlvbihhKXtpZigyPmEpcmV0dXJuIHRoaXMuY29sWXM7Zm9yKHZhciBiPVtdLGM9dGhpcy5jb2xzKzEtYSxkPTA7Yz5kO2QrKyl7dmFyIGU9dGhpcy5jb2xZcy5zbGljZShkLGQrYSk7YltkXT1NYXRoLm1heC5hcHBseShNYXRoLGUpfXJldHVybiBifSxjLnByb3RvdHlwZS5fbWFuYWdlU3RhbXA9ZnVuY3Rpb24oYSl7dmFyIGM9YihhKSxkPXRoaXMuX2dldEVsZW1lbnRPZmZzZXQoYSksZT10aGlzLm9wdGlvbnMuaXNPcmlnaW5MZWZ0P2QubGVmdDpkLnJpZ2h0LGY9ZStjLm91dGVyV2lkdGgsZz1NYXRoLmZsb29yKGUvdGhpcy5jb2x1bW5XaWR0aCk7Zz1NYXRoLm1heCgwLGcpO3ZhciBoPU1hdGguZmxvb3IoZi90aGlzLmNvbHVtbldpZHRoKTtoLT1mJXRoaXMuY29sdW1uV2lkdGg/MDoxLGg9TWF0aC5taW4odGhpcy5jb2xzLTEsaCk7Zm9yKHZhciBpPSh0aGlzLm9wdGlvbnMuaXNPcmlnaW5Ub3A/ZC50b3A6ZC5ib3R0b20pK2Mub3V0ZXJIZWlnaHQsaj1nO2g+PWo7aisrKXRoaXMuY29sWXNbal09TWF0aC5tYXgoaSx0aGlzLmNvbFlzW2pdKX0sYy5wcm90b3R5cGUuX2dldENvbnRhaW5lclNpemU9ZnVuY3Rpb24oKXt0aGlzLm1heFk9TWF0aC5tYXguYXBwbHkoTWF0aCx0aGlzLmNvbFlzKTt2YXIgYT17aGVpZ2h0OnRoaXMubWF4WX07cmV0dXJuIHRoaXMub3B0aW9ucy5pc0ZpdFdpZHRoJiYoYS53aWR0aD10aGlzLl9nZXRDb250YWluZXJGaXRXaWR0aCgpKSxhfSxjLnByb3RvdHlwZS5fZ2V0Q29udGFpbmVyRml0V2lkdGg9ZnVuY3Rpb24oKXtmb3IodmFyIGE9MCxiPXRoaXMuY29sczstLWImJjA9PT10aGlzLmNvbFlzW2JdOylhKys7cmV0dXJuKHRoaXMuY29scy1hKSp0aGlzLmNvbHVtbldpZHRoLXRoaXMuZ3V0dGVyfSxjLnByb3RvdHlwZS5uZWVkc1Jlc2l6ZUxheW91dD1mdW5jdGlvbigpe3ZhciBhPXRoaXMuY29udGFpbmVyV2lkdGg7cmV0dXJuIHRoaXMuZ2V0Q29udGFpbmVyV2lkdGgoKSxhIT09dGhpcy5jb250YWluZXJXaWR0aH0sY312YXIgZD1BcnJheS5wcm90b3R5cGUuaW5kZXhPZj9mdW5jdGlvbihhLGIpe3JldHVybiBhLmluZGV4T2YoYil9OmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTAsZD1hLmxlbmd0aDtkPmM7YysrKXt2YXIgZT1hW2NdO2lmKGU9PT1iKXJldHVybiBjfXJldHVybi0xfTsiZnVuY3Rpb24iPT10eXBlb2YgYyYmYy5hbWQ/YygibWFzb25yeS9tYXNvbnJ5IixbIm91dGxheWVyL291dGxheWVyIiwiZ2V0LXNpemUvZ2V0LXNpemUiXSxiKTphLk1hc29ucnk9YihhLk91dGxheWVyLGEuZ2V0U2l6ZSl9KHdpbmRvdyksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhLGIpe3ZhciBjPWEuY3JlYXRlKCJmbHVpZE1hc29ucnkiKTtyZXR1cm4gYy5wcm90b3R5cGUubWVhc3VyZUNvbHVtbnM9ZnVuY3Rpb24oKXt0aGlzLl9nZXRNZWFzdXJlbWVudCgibWluQ29sdW1uV2lkdGgiLCJvdXRlcldpZHRoIiksdGhpcy5taW5Db2x1bW5XaWR0aCs9dGhpcy5ndXR0ZXIsdGhpcy5nZXRDb250YWluZXJXaWR0aCgpLHRoaXMub3B0aW9ucy5pc0ZpdFdpZHRoJiYodGhpcy5jb250YWluZXJXaWR0aD10aGlzLmNvbnRhaW5lcldpZHRoLSh0aGlzLnNpemUucGFkZGluZ0xlZnQrdGhpcy5zaXplLnBhZGRpbmdSaWdodCt0aGlzLnNpemUuYm9yZGVyTGVmdFdpZHRoK3RoaXMuc2l6ZS5ib3JkZXJSaWdodFdpZHRoKSksdGhpcy5jb2xzPU1hdGguZmxvb3IoKHRoaXMuY29udGFpbmVyV2lkdGgrdGhpcy5ndXR0ZXIpL3RoaXMubWluQ29sdW1uV2lkdGgpLHRoaXMuY29scz1NYXRoLm1heCh0aGlzLmNvbHMsMSk7dmFyIGE9dGhpcy5jb250YWluZXJXaWR0aCt0aGlzLmd1dHRlci10aGlzLmNvbHMqdGhpcy5taW5Db2x1bW5XaWR0aCxiPWEvdGhpcy5jb2xzLGM9KGItTWF0aC5mbG9vcihiKSkqdGhpcy5jb2xzO3RoaXMuY2VudGVyaW5nT2Zmc2V0PXRoaXMub3B0aW9ucy5pc0ZpdFdpZHRoPzA6TWF0aC5yb3VuZChjLzIpLHRoaXMuY29sdW1uV2lkdGg9dGhpcy5taW5Db2x1bW5XaWR0aCtNYXRoLmZsb29yKGIpLHRoaXMuY29sdW1uV2lkdGhJbm5lcj10aGlzLmNvbHVtbldpZHRoLXRoaXMuZ3V0dGVyfSxjLnByb3RvdHlwZS5fZ2V0SXRlbUxheW91dFBvc2l0aW9uPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY29sdW1uV2lkdGhJbm5lcixjPWEuZWxlbWVudC5nZXRBdHRyaWJ1dGUoImRhdGEtY29sdW1ucyIpO2M+MT8oYz1NYXRoLm1pbihjLHRoaXMuY29scyksYj1iKmMrKGMtMSkqdGhpcy5ndXR0ZXIpOmM9MSxhLmVsZW1lbnQuc3R5bGUud2lkdGg9YisicHgiLGEuZ2V0U2l6ZSgpO2Zvcih2YXIgZT10aGlzLl9nZXRDb2xHcm91cChjKSxmPU1hdGgubWluLmFwcGx5KE1hdGgsZSksZz1kKGUsZiksaD17eDp0aGlzLmNvbHVtbldpZHRoKmcrdGhpcy5jZW50ZXJpbmdPZmZzZXQseTpmfSxpPWYrYS5zaXplLm91dGVySGVpZ2h0LGo9dGhpcy5jb2xzKzEtZS5sZW5ndGgsaz0wO2o+aztrKyspdGhpcy5jb2xZc1tnK2tdPWk7cmV0dXJuIGh9LGMucHJvdG90eXBlLl9yZXNldExheW91dD1iLnByb3RvdHlwZS5fcmVzZXRMYXlvdXQsYy5wcm90b3R5cGUuZ2V0Q29udGFpbmVyV2lkdGg9Yi5wcm90b3R5cGUuZ2V0Q29udGFpbmVyV2lkdGgsYy5wcm90b3R5cGUuX2dldENvbEdyb3VwPWIucHJvdG90eXBlLl9nZXRDb2xHcm91cCxjLnByb3RvdHlwZS5fbWFuYWdlU3RhbXA9Yi5wcm90b3R5cGUuX21hbmFnZVN0YW1wLGMucHJvdG90eXBlLl9nZXRDb250YWluZXJTaXplPWIucHJvdG90eXBlLl9nZXRDb250YWluZXJTaXplLGMucHJvdG90eXBlLl9nZXRDb250YWluZXJGaXRXaWR0aD1iLnByb3RvdHlwZS5fZ2V0Q29udGFpbmVyRml0V2lkdGgsYy5wcm90b3R5cGUubmVlZHNSZXNpemVMYXlvdXQ9Yi5wcm90b3R5cGUubmVlZHNSZXNpemVMYXlvdXQsY312YXIgZD1BcnJheS5wcm90b3R5cGUuaW5kZXhPZj9mdW5jdGlvbihhLGIpe3JldHVybiBhLmluZGV4T2YoYil9OmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTAsZD1hLmxlbmd0aDtkPmM7YysrKXt2YXIgZT1hW2NdO2lmKGU9PT1iKXJldHVybiBjfXJldHVybi0xfTsiZnVuY3Rpb24iPT10eXBlb2YgYyYmYy5hbWQ/YygiZmx1aWQtbWFzb25yeSIsWyJvdXRsYXllci9vdXRsYXllciIsIm1hc29ucnkvbWFzb25yeSJdLGIpOmEuRmx1aWRNYXNvbnJ5PWIoYS5PdXRsYXllcixhLk1hc29ucnkpfSh3aW5kb3cpLGZ1bmN0aW9uKGEsYil7dmFyIGMsZD1hLmpRdWVyeXx8YS5Db3dib3l8fChhLkNvd2JveT17fSk7ZC50aHJvdHRsZT1jPWZ1bmN0aW9uKGEsYyxlLGYpe2Z1bmN0aW9uIGcoKXtmdW5jdGlvbiBkKCl7aT0rbmV3IERhdGUsZS5hcHBseShqLGwpfWZ1bmN0aW9uIGcoKXtoPWJ9dmFyIGo9dGhpcyxrPStuZXcgRGF0ZS1pLGw9YXJndW1lbnRzO2YmJiFoJiZkKCksaCYmY2xlYXJUaW1lb3V0KGgpLGY9PT1iJiZrPmE/ZCgpOmMhPT0hMCYmKGg9c2V0VGltZW91dChmP2c6ZCxmPT09Yj9hLWs6YSkpfXZhciBoLGk9MDtyZXR1cm4iYm9vbGVhbiIhPXR5cGVvZiBjJiYoZj1lLGU9YyxjPWIpLGQuZ3VpZCYmKGcuZ3VpZD1lLmd1aWQ9ZS5ndWlkfHxkLmd1aWQrKyksZ30sZC5kZWJvdW5jZT1mdW5jdGlvbihhLGQsZSl7cmV0dXJuIGU9PT1iP2MoYSxkLCExKTpjKGEsZSxkIT09ITEpfX0odGhpcyksYygidmVuZG9yL2pxdWVyeS50aHJvdHRsZS1kZWJvdW5jZSIsZnVuY3Rpb24oKXt9KSxmdW5jdGlvbihhKXsiZnVuY3Rpb24iPT10eXBlb2YgYyYmYy5hbWQmJmMuYW1kLmpRdWVyeT9jKCJqcXVlcnktdG91Y2hzd2lwZSIsWyJqcXVlcnkiXSxhKTphKGpRdWVyeSl9KGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYil7cmV0dXJuIWJ8fHZvaWQgMCE9PWIuYWxsb3dQYWdlU2Nyb2xsfHx2b2lkIDA9PT1iLnN3aXBlJiZ2b2lkIDA9PT1iLnN3aXBlU3RhdHVzfHwoYi5hbGxvd1BhZ2VTY3JvbGw9aiksdm9pZCAwIT09Yi5jbGljayYmdm9pZCAwPT09Yi50YXAmJihiLnRhcD1iLmNsaWNrKSxifHwoYj17fSksYj1hLmV4dGVuZCh7fSxhLmZuLnN3aXBlLmRlZmF1bHRzLGIpLHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBkPWEodGhpcyksZT1kLmRhdGEoQik7ZXx8KGU9bmV3IGModGhpcyxiKSxkLmRhdGEoQixlKSl9KX1mdW5jdGlvbiBjKGIsYyl7ZnVuY3Rpb24gQyhiKXtpZighKGpiKCl8fGEoYi50YXJnZXQpLmNsb3Nlc3QoYy5leGNsdWRlZEVsZW1lbnRzLFNiKS5sZW5ndGg+MCkpe3ZhciBkLGU9Yi5vcmlnaW5hbEV2ZW50P2Iub3JpZ2luYWxFdmVudDpiLGY9eT9lLnRvdWNoZXNbMF06ZTtyZXR1cm4gVGI9dSx5P1ViPWUudG91Y2hlcy5sZW5ndGg6Yi5wcmV2ZW50RGVmYXVsdCgpLEpiPTAsS2I9bnVsbCxRYj1udWxsLExiPTAsTWI9MCxOYj0wLE9iPTEsUGI9MCxWYj1vYigpLFJiPXJiKCksaGIoKSwheXx8VWI9PT1jLmZpbmdlcnN8fGMuZmluZ2Vycz09PXN8fFIoKT8obGIoMCxmKSxXYj1BYigpLDI9PVViJiYobGIoMSxlLnRvdWNoZXNbMV0pLE1iPU5iPXViKFZiWzBdLnN0YXJ0LFZiWzFdLnN0YXJ0KSksKGMuc3dpcGVTdGF0dXN8fGMucGluY2hTdGF0dXMpJiYoZD1KKGUsVGIpKSk6ZD0hMSxkPT09ITE/KFRiPXgsSihlLFRiKSxkKTooYy5ob2xkJiYoYWM9c2V0VGltZW91dChhLnByb3h5KGZ1bmN0aW9uKCl7U2IudHJpZ2dlcigiaG9sZCIsW2UudGFyZ2V0XSksYy5ob2xkJiYoZD1jLmhvbGQuY2FsbChTYixlLGUudGFyZ2V0KSl9LHRoaXMpLGMubG9uZ1RhcFRocmVzaG9sZCkpLGtiKCEwKSxudWxsKX19ZnVuY3Rpb24gRChhKXt2YXIgYj1hLm9yaWdpbmFsRXZlbnQ/YS5vcmlnaW5hbEV2ZW50OmE7aWYoVGIhPT13JiZUYiE9PXgmJiFpYigpKXt2YXIgZCxlPXk/Yi50b3VjaGVzWzBdOmIsZj1tYihlKTtpZihYYj1BYigpLHkmJihVYj1iLnRvdWNoZXMubGVuZ3RoKSxjLmhvbGQmJmNsZWFyVGltZW91dChhYyksVGI9diwyPT1VYiYmKDA9PU1iPyhsYigxLGIudG91Y2hlc1sxXSksTWI9TmI9dWIoVmJbMF0uc3RhcnQsVmJbMV0uc3RhcnQpKToobWIoYi50b3VjaGVzWzFdKSxOYj11YihWYlswXS5lbmQsVmJbMV0uZW5kKSxRYj13YihWYlswXS5lbmQsVmJbMV0uZW5kKSksT2I9dmIoTWIsTmIpLFBiPU1hdGguYWJzKE1iLU5iKSksVWI9PT1jLmZpbmdlcnN8fGMuZmluZ2Vycz09PXN8fCF5fHxSKCkpe2lmKEtiPXpiKGYuc3RhcnQsZi5lbmQpLFAoYSxLYiksSmI9eGIoZi5zdGFydCxmLmVuZCksTGI9dGIoKSxwYihLYixKYiksKGMuc3dpcGVTdGF0dXN8fGMucGluY2hTdGF0dXMpJiYoZD1KKGIsVGIpKSwhYy50cmlnZ2VyT25Ub3VjaEVuZHx8Yy50cmlnZ2VyT25Ub3VjaExlYXZlKXt2YXIgZz0hMDtpZihjLnRyaWdnZXJPblRvdWNoTGVhdmUpe3ZhciBoPUJiKHRoaXMpO2c9Q2IoZi5lbmQsaCl9IWMudHJpZ2dlck9uVG91Y2hFbmQmJmc/VGI9SSh2KTpjLnRyaWdnZXJPblRvdWNoTGVhdmUmJiFnJiYoVGI9SSh3KSksKFRiPT14fHxUYj09dykmJkooYixUYil9fWVsc2UgVGI9eCxKKGIsVGIpO2Q9PT0hMSYmKFRiPXgsSihiLFRiKSl9fWZ1bmN0aW9uIEUoYSl7dmFyIGI9YS5vcmlnaW5hbEV2ZW50O3JldHVybiB5JiZiLnRvdWNoZXMubGVuZ3RoPjA/KGdiKCksITApOihpYigpJiYoVWI9WmIpLFhiPUFiKCksTGI9dGIoKSxNKCl8fCFMKCk/KFRiPXgsSihiLFRiKSk6Yy50cmlnZ2VyT25Ub3VjaEVuZHx8MD09Yy50cmlnZ2VyT25Ub3VjaEVuZCYmVGI9PT12PyhhLnByZXZlbnREZWZhdWx0KCksVGI9dyxKKGIsVGIpKTohYy50cmlnZ2VyT25Ub3VjaEVuZCYmWSgpPyhUYj13LEsoYixUYixuKSk6VGI9PT12JiYoVGI9eCxKKGIsVGIpKSxrYighMSksbnVsbCl9ZnVuY3Rpb24gRigpe1ViPTAsWGI9MCxXYj0wLE1iPTAsTmI9MCxPYj0xLGhiKCksa2IoITEpfWZ1bmN0aW9uIEcoYSl7dmFyIGI9YS5vcmlnaW5hbEV2ZW50O2MudHJpZ2dlck9uVG91Y2hMZWF2ZSYmKFRiPUkodyksSihiLFRiKSl9ZnVuY3Rpb24gSCgpe1NiLnVuYmluZChFYixDKSxTYi51bmJpbmQoSWIsRiksU2IudW5iaW5kKEZiLEQpLFNiLnVuYmluZChHYixFKSxIYiYmU2IudW5iaW5kKEhiLEcpLGtiKCExKX1mdW5jdGlvbiBJKGEpe3ZhciBiPWEsZD1PKCksZT1MKCksZj1NKCk7cmV0dXJuIWR8fGY/Yj14OiFlfHxhIT12fHxjLnRyaWdnZXJPblRvdWNoRW5kJiYhYy50cmlnZ2VyT25Ub3VjaExlYXZlPyFlJiZhPT13JiZjLnRyaWdnZXJPblRvdWNoTGVhdmUmJihiPXgpOmI9dyxifWZ1bmN0aW9uIEooYSxiKXt2YXIgYz12b2lkIDA7cmV0dXJuIFYoKXx8VSgpP2M9SyhhLGIsbCk6KFMoKXx8UigpKSYmYyE9PSExJiYoYz1LKGEsYixtKSksZWIoKSYmYyE9PSExP2M9SyhhLGIsbyk6ZmIoKSYmYyE9PSExP2M9SyhhLGIscCk6ZGIoKSYmYyE9PSExJiYoYz1LKGEsYixuKSksYj09PXgmJkYoYSksYj09PXcmJih5PzA9PWEudG91Y2hlcy5sZW5ndGgmJkYoYSk6RihhKSksY31mdW5jdGlvbiBLKGIsaixrKXt2YXIgcT12b2lkIDA7aWYoaz09bCl7aWYoU2IudHJpZ2dlcigic3dpcGVTdGF0dXMiLFtqLEtifHxudWxsLEpifHwwLExifHwwLFViLFZiXSksYy5zd2lwZVN0YXR1cyYmKHE9Yy5zd2lwZVN0YXR1cy5jYWxsKFNiLGIsaixLYnx8bnVsbCxKYnx8MCxMYnx8MCxVYixWYikscT09PSExKSlyZXR1cm4hMTtpZihqPT13JiZUKCkpe2lmKFNiLnRyaWdnZXIoInN3aXBlIixbS2IsSmIsTGIsVWIsVmJdKSxjLnN3aXBlJiYocT1jLnN3aXBlLmNhbGwoU2IsYixLYixKYixMYixVYixWYikscT09PSExKSlyZXR1cm4hMTtzd2l0Y2goS2Ipe2Nhc2UgZDpTYi50cmlnZ2VyKCJzd2lwZUxlZnQiLFtLYixKYixMYixVYixWYl0pLGMuc3dpcGVMZWZ0JiYocT1jLnN3aXBlTGVmdC5jYWxsKFNiLGIsS2IsSmIsTGIsVWIsVmIpKTticmVhaztjYXNlIGU6U2IudHJpZ2dlcigic3dpcGVSaWdodCIsW0tiLEpiLExiLFViLFZiXSksYy5zd2lwZVJpZ2h0JiYocT1jLnN3aXBlUmlnaHQuY2FsbChTYixiLEtiLEpiLExiLFViLFZiKSk7YnJlYWs7Y2FzZSBmOlNiLnRyaWdnZXIoInN3aXBlVXAiLFtLYixKYixMYixVYixWYl0pLGMuc3dpcGVVcCYmKHE9Yy5zd2lwZVVwLmNhbGwoU2IsYixLYixKYixMYixVYixWYikpO2JyZWFrO2Nhc2UgZzpTYi50cmlnZ2VyKCJzd2lwZURvd24iLFtLYixKYixMYixVYixWYl0pLGMuc3dpcGVEb3duJiYocT1jLnN3aXBlRG93bi5jYWxsKFNiLGIsS2IsSmIsTGIsVWIsVmIpKX19fWlmKGs9PW0pe2lmKFNiLnRyaWdnZXIoInBpbmNoU3RhdHVzIixbaixRYnx8bnVsbCxQYnx8MCxMYnx8MCxVYixPYixWYl0pLGMucGluY2hTdGF0dXMmJihxPWMucGluY2hTdGF0dXMuY2FsbChTYixiLGosUWJ8fG51bGwsUGJ8fDAsTGJ8fDAsVWIsT2IsVmIpLHE9PT0hMSkpcmV0dXJuITE7aWYoaj09dyYmUSgpKXN3aXRjaChRYil7Y2FzZSBoOlNiLnRyaWdnZXIoInBpbmNoSW4iLFtRYnx8bnVsbCxQYnx8MCxMYnx8MCxVYixPYixWYl0pLGMucGluY2hJbiYmKHE9Yy5waW5jaEluLmNhbGwoU2IsYixRYnx8bnVsbCxQYnx8MCxMYnx8MCxVYixPYixWYikpO2JyZWFrO2Nhc2UgaTpTYi50cmlnZ2VyKCJwaW5jaE91dCIsW1FifHxudWxsLFBifHwwLExifHwwLFViLE9iLFZiXSksYy5waW5jaE91dCYmKHE9Yy5waW5jaE91dC5jYWxsKFNiLGIsUWJ8fG51bGwsUGJ8fDAsTGJ8fDAsVWIsT2IsVmIpKX19cmV0dXJuIGs9PW4/KGo9PT14fHxqPT09dykmJihjbGVhclRpbWVvdXQoX2IpLGNsZWFyVGltZW91dChhYyksWigpJiYhYWIoKT8oJGI9QWIoKSxfYj1zZXRUaW1lb3V0KGEucHJveHkoZnVuY3Rpb24oKXskYj1udWxsLFNiLnRyaWdnZXIoInRhcCIsW2IudGFyZ2V0XSksYy50YXAmJihxPWMudGFwLmNhbGwoU2IsYixiLnRhcmdldCkpfSx0aGlzKSxjLmRvdWJsZVRhcFRocmVzaG9sZCkpOigkYj1udWxsLFNiLnRyaWdnZXIoInRhcCIsW2IudGFyZ2V0XSksYy50YXAmJihxPWMudGFwLmNhbGwoU2IsYixiLnRhcmdldCkpKSk6az09bz8oaj09PXh8fGo9PT13KSYmKGNsZWFyVGltZW91dChfYiksJGI9bnVsbCxTYi50cmlnZ2VyKCJkb3VibGV0YXAiLFtiLnRhcmdldF0pLGMuZG91YmxlVGFwJiYocT1jLmRvdWJsZVRhcC5jYWxsKFNiLGIsYi50YXJnZXQpKSk6az09cCYmKGo9PT14fHxqPT09dykmJihjbGVhclRpbWVvdXQoX2IpLCRiPW51bGwsU2IudHJpZ2dlcigibG9uZ3RhcCIsW2IudGFyZ2V0XSksYy5sb25nVGFwJiYocT1jLmxvbmdUYXAuY2FsbChTYixiLGIudGFyZ2V0KSkpLHF9ZnVuY3Rpb24gTCgpe3ZhciBhPSEwO3JldHVybiBudWxsIT09Yy50aHJlc2hvbGQmJihhPUpiPj1jLnRocmVzaG9sZCksYX1mdW5jdGlvbiBNKCl7dmFyIGE9ITE7cmV0dXJuIG51bGwhPT1jLmNhbmNlbFRocmVzaG9sZCYmbnVsbCE9PUtiJiYoYT1xYihLYiktSmI+PWMuY2FuY2VsVGhyZXNob2xkKSxhfWZ1bmN0aW9uIE4oKXtyZXR1cm4gbnVsbCE9PWMucGluY2hUaHJlc2hvbGQ/UGI+PWMucGluY2hUaHJlc2hvbGQ6ITB9ZnVuY3Rpb24gTygpe3ZhciBhO3JldHVybiBhPWMubWF4VGltZVRocmVzaG9sZCYmTGI+PWMubWF4VGltZVRocmVzaG9sZD8hMTohMH1mdW5jdGlvbiBQKGEsYil7aWYoYy5hbGxvd1BhZ2VTY3JvbGw9PT1qfHxSKCkpYS5wcmV2ZW50RGVmYXVsdCgpO2Vsc2V7dmFyIGg9Yy5hbGxvd1BhZ2VTY3JvbGw9PT1rO3N3aXRjaChiKXtjYXNlIGQ6KGMuc3dpcGVMZWZ0JiZofHwhaCYmYy5hbGxvd1BhZ2VTY3JvbGwhPXEpJiZhLnByZXZlbnREZWZhdWx0KCk7YnJlYWs7Y2FzZSBlOihjLnN3aXBlUmlnaHQmJmh8fCFoJiZjLmFsbG93UGFnZVNjcm9sbCE9cSkmJmEucHJldmVudERlZmF1bHQoKTticmVhaztjYXNlIGY6KGMuc3dpcGVVcCYmaHx8IWgmJmMuYWxsb3dQYWdlU2Nyb2xsIT1yKSYmYS5wcmV2ZW50RGVmYXVsdCgpO2JyZWFrO2Nhc2UgZzooYy5zd2lwZURvd24mJmh8fCFoJiZjLmFsbG93UGFnZVNjcm9sbCE9cikmJmEucHJldmVudERlZmF1bHQoKX19fWZ1bmN0aW9uIFEoKXt2YXIgYT1XKCksYj1YKCksYz1OKCk7cmV0dXJuIGEmJmImJmN9ZnVuY3Rpb24gUigpe3JldHVybiEhKGMucGluY2hTdGF0dXN8fGMucGluY2hJbnx8Yy5waW5jaE91dCl9ZnVuY3Rpb24gUygpe3JldHVybiEoIVEoKXx8IVIoKSl9ZnVuY3Rpb24gVCgpe3ZhciBhPU8oKSxiPUwoKSxjPVcoKSxkPVgoKSxlPU0oKSxmPSFlJiZkJiZjJiZiJiZhO3JldHVybiBmfWZ1bmN0aW9uIFUoKXtyZXR1cm4hIShjLnN3aXBlfHxjLnN3aXBlU3RhdHVzfHxjLnN3aXBlTGVmdHx8Yy5zd2lwZVJpZ2h0fHxjLnN3aXBlVXB8fGMuc3dpcGVEb3duKX1mdW5jdGlvbiBWKCl7cmV0dXJuISghVCgpfHwhVSgpKX1mdW5jdGlvbiBXKCl7cmV0dXJuIFViPT09Yy5maW5nZXJzfHxjLmZpbmdlcnM9PT1zfHwheX1mdW5jdGlvbiBYKCl7cmV0dXJuIDAhPT1WYlswXS5lbmQueH1mdW5jdGlvbiBZKCl7cmV0dXJuISFjLnRhcH1mdW5jdGlvbiBaKCl7cmV0dXJuISFjLmRvdWJsZVRhcH1mdW5jdGlvbiAkKCl7cmV0dXJuISFjLmxvbmdUYXB9ZnVuY3Rpb24gXygpe2lmKG51bGw9PSRiKXJldHVybiExO3ZhciBhPUFiKCk7cmV0dXJuIFooKSYmYS0kYjw9Yy5kb3VibGVUYXBUaHJlc2hvbGR9ZnVuY3Rpb24gYWIoKXtyZXR1cm4gXygpfWZ1bmN0aW9uIGJiKCl7cmV0dXJuKDE9PT1VYnx8IXkpJiYoaXNOYU4oSmIpfHxKYjxjLnRocmVzaG9sZCl9ZnVuY3Rpb24gY2IoKXtyZXR1cm4gTGI+Yy5sb25nVGFwVGhyZXNob2xkJiZ0PkpifWZ1bmN0aW9uIGRiKCl7cmV0dXJuISghYmIoKXx8IVkoKSl9ZnVuY3Rpb24gZWIoKXtyZXR1cm4hKCFfKCl8fCFaKCkpfWZ1bmN0aW9uIGZiKCl7cmV0dXJuISghY2IoKXx8ISQoKSl9ZnVuY3Rpb24gZ2IoKXtZYj1BYigpLFpiPWV2ZW50LnRvdWNoZXMubGVuZ3RoKzF9ZnVuY3Rpb24gaGIoKXtZYj0wLFpiPTB9ZnVuY3Rpb24gaWIoKXt2YXIgYT0hMTtpZihZYil7dmFyIGI9QWIoKS1ZYjtiPD1jLmZpbmdlclJlbGVhc2VUaHJlc2hvbGQmJihhPSEwKX1yZXR1cm4gYX1mdW5jdGlvbiBqYigpe3JldHVybiEoU2IuZGF0YShCKyJfaW50b3VjaCIpIT09ITApfWZ1bmN0aW9uIGtiKGEpe2E9PT0hMD8oU2IuYmluZChGYixEKSxTYi5iaW5kKEdiLEUpLEhiJiZTYi5iaW5kKEhiLEcpKTooU2IudW5iaW5kKEZiLEQsITEpLFNiLnVuYmluZChHYixFLCExKSxIYiYmU2IudW5iaW5kKEhiLEcsITEpKSxTYi5kYXRhKEIrIl9pbnRvdWNoIixhPT09ITApfWZ1bmN0aW9uIGxiKGEsYil7dmFyIGM9dm9pZCAwIT09Yi5pZGVudGlmaWVyP2IuaWRlbnRpZmllcjowO3JldHVybiBWYlthXS5pZGVudGlmaWVyPWMsVmJbYV0uc3RhcnQueD1WYlthXS5lbmQueD1iLnBhZ2VYfHxiLmNsaWVudFgsVmJbYV0uc3RhcnQueT1WYlthXS5lbmQueT1iLnBhZ2VZfHxiLmNsaWVudFksVmJbYV19ZnVuY3Rpb24gbWIoYSl7dmFyIGI9dm9pZCAwIT09YS5pZGVudGlmaWVyP2EuaWRlbnRpZmllcjowLGM9bmIoYik7cmV0dXJuIGMuZW5kLng9YS5wYWdlWHx8YS5jbGllbnRYLGMuZW5kLnk9YS5wYWdlWXx8YS5jbGllbnRZLGN9ZnVuY3Rpb24gbmIoYSl7Zm9yKHZhciBiPTA7YjxWYi5sZW5ndGg7YisrKWlmKFZiW2JdLmlkZW50aWZpZXI9PWEpcmV0dXJuIFZiW2JdfWZ1bmN0aW9uIG9iKCl7Zm9yKHZhciBhPVtdLGI9MDs1Pj1iO2IrKylhLnB1c2goe3N0YXJ0Ont4OjAseTowfSxlbmQ6e3g6MCx5OjB9LGlkZW50aWZpZXI6MH0pO3JldHVybiBhfWZ1bmN0aW9uIHBiKGEsYil7Yj1NYXRoLm1heChiLHFiKGEpKSxSYlthXS5kaXN0YW5jZT1ifWZ1bmN0aW9uIHFiKGEpe3JldHVybiBSYlthXT9SYlthXS5kaXN0YW5jZTp2b2lkIDB9ZnVuY3Rpb24gcmIoKXt2YXIgYT17fTtyZXR1cm4gYVtkXT1zYihkKSxhW2VdPXNiKGUpLGFbZl09c2IoZiksYVtnXT1zYihnKSxhfWZ1bmN0aW9uIHNiKGEpe3JldHVybntkaXJlY3Rpb246YSxkaXN0YW5jZTowfX1mdW5jdGlvbiB0Yigpe3JldHVybiBYYi1XYn1mdW5jdGlvbiB1YihhLGIpe3ZhciBjPU1hdGguYWJzKGEueC1iLngpLGQ9TWF0aC5hYnMoYS55LWIueSk7cmV0dXJuIE1hdGgucm91bmQoTWF0aC5zcXJ0KGMqYytkKmQpKX1mdW5jdGlvbiB2YihhLGIpe3ZhciBjPWIvYSoxO3JldHVybiBjLnRvRml4ZWQoMil9ZnVuY3Rpb24gd2IoKXtyZXR1cm4gMT5PYj9pOmh9ZnVuY3Rpb24geGIoYSxiKXtyZXR1cm4gTWF0aC5yb3VuZChNYXRoLnNxcnQoTWF0aC5wb3coYi54LWEueCwyKStNYXRoLnBvdyhiLnktYS55LDIpKSl9ZnVuY3Rpb24geWIoYSxiKXt2YXIgYz1hLngtYi54LGQ9Yi55LWEueSxlPU1hdGguYXRhbjIoZCxjKSxmPU1hdGgucm91bmQoMTgwKmUvTWF0aC5QSSk7cmV0dXJuIDA+ZiYmKGY9MzYwLU1hdGguYWJzKGYpKSxmfWZ1bmN0aW9uIHpiKGEsYil7dmFyIGM9eWIoYSxiKTtyZXR1cm4gNDU+PWMmJmM+PTA/ZDozNjA+PWMmJmM+PTMxNT9kOmM+PTEzNSYmMjI1Pj1jP2U6Yz40NSYmMTM1PmM/ZzpmfWZ1bmN0aW9uIEFiKCl7dmFyIGE9bmV3IERhdGU7cmV0dXJuIGEuZ2V0VGltZSgpfWZ1bmN0aW9uIEJiKGIpe2I9YShiKTt2YXIgYz1iLm9mZnNldCgpLGQ9e2xlZnQ6Yy5sZWZ0LHJpZ2h0OmMubGVmdCtiLm91dGVyV2lkdGgoKSx0b3A6Yy50b3AsYm90dG9tOmMudG9wK2Iub3V0ZXJIZWlnaHQoKX07cmV0dXJuIGR9ZnVuY3Rpb24gQ2IoYSxiKXtyZXR1cm4gYS54PmIubGVmdCYmYS54PGIucmlnaHQmJmEueT5iLnRvcCYmYS55PGIuYm90dG9tfXZhciBEYj15fHxBfHwhYy5mYWxsYmFja1RvTW91c2VFdmVudHMsRWI9RGI/QT96PyJNU1BvaW50ZXJEb3duIjoicG9pbnRlcmRvd24iOiJ0b3VjaHN0YXJ0IjoibW91c2Vkb3duIixGYj1EYj9BP3o/Ik1TUG9pbnRlck1vdmUiOiJwb2ludGVybW92ZSI6InRvdWNobW92ZSI6Im1vdXNlbW92ZSIsR2I9RGI/QT96PyJNU1BvaW50ZXJVcCI6InBvaW50ZXJ1cCI6InRvdWNoZW5kIjoibW91c2V1cCIsSGI9RGI/bnVsbDoibW91c2VsZWF2ZSIsSWI9QT96PyJNU1BvaW50ZXJDYW5jZWwiOiJwb2ludGVyY2FuY2VsIjoidG91Y2hjYW5jZWwiLEpiPTAsS2I9bnVsbCxMYj0wLE1iPTAsTmI9MCxPYj0xLFBiPTAsUWI9MCxSYj1udWxsLFNiPWEoYiksVGI9InN0YXJ0IixVYj0wLFZiPW51bGwsV2I9MCxYYj0wLFliPTAsWmI9MCwkYj0wLF9iPW51bGwsYWM9bnVsbDt0cnl7U2IuYmluZChFYixDKSxTYi5iaW5kKEliLEYpfWNhdGNoKGJjKXthLmVycm9yKCJldmVudHMgbm90IHN1cHBvcnRlZCAiK0ViKyIsIitJYisiIG9uIGpRdWVyeS5zd2lwZSIpfXRoaXMuZW5hYmxlPWZ1bmN0aW9uKCl7cmV0dXJuIFNiLmJpbmQoRWIsQyksU2IuYmluZChJYixGKSxTYn0sdGhpcy5kaXNhYmxlPWZ1bmN0aW9uKCl7cmV0dXJuIEgoKSxTYn0sdGhpcy5kZXN0cm95PWZ1bmN0aW9uKCl7cmV0dXJuIEgoKSxTYi5kYXRhKEIsbnVsbCksU2J9LHRoaXMub3B0aW9uPWZ1bmN0aW9uKGIsZCl7aWYodm9pZCAwIT09Y1tiXSl7aWYodm9pZCAwPT09ZClyZXR1cm4gY1tiXTtjW2JdPWR9ZWxzZSBhLmVycm9yKCJPcHRpb24gIitiKyIgZG9lcyBub3QgZXhpc3Qgb24galF1ZXJ5LnN3aXBlLm9wdGlvbnMiKTtyZXR1cm4gbnVsbH19dmFyIGQ9ImxlZnQiLGU9InJpZ2h0IixmPSJ1cCIsZz0iZG93biIsaD0iaW4iLGk9Im91dCIsaj0ibm9uZSIsaz0iYXV0byIsbD0ic3dpcGUiLG09InBpbmNoIixuPSJ0YXAiLG89ImRvdWJsZXRhcCIscD0ibG9uZ3RhcCIscT0iaG9yaXpvbnRhbCIscj0idmVydGljYWwiLHM9ImFsbCIsdD0xMCx1PSJzdGFydCIsdj0ibW92ZSIsdz0iZW5kIix4PSJjYW5jZWwiLHk9Im9udG91Y2hzdGFydCJpbiB3aW5kb3csej13aW5kb3cubmF2aWdhdG9yLm1zUG9pbnRlckVuYWJsZWQmJiF3aW5kb3cubmF2aWdhdG9yLnBvaW50ZXJFbmFibGVkLEE9d2luZG93Lm5hdmlnYXRvci5wb2ludGVyRW5hYmxlZHx8d2luZG93Lm5hdmlnYXRvci5tc1BvaW50ZXJFbmFibGVkLEI9IlRvdWNoU3dpcGUiLEM9e2ZpbmdlcnM6MSx0aHJlc2hvbGQ6NzUsY2FuY2VsVGhyZXNob2xkOm51bGwscGluY2hUaHJlc2hvbGQ6MjAsbWF4VGltZVRocmVzaG9sZDpudWxsLGZpbmdlclJlbGVhc2VUaHJlc2hvbGQ6MjUwLGxvbmdUYXBUaHJlc2hvbGQ6NTAwLGRvdWJsZVRhcFRocmVzaG9sZDoyMDAsc3dpcGU6bnVsbCxzd2lwZUxlZnQ6bnVsbCxzd2lwZVJpZ2h0Om51bGwsc3dpcGVVcDpudWxsLHN3aXBlRG93bjpudWxsLHN3aXBlU3RhdHVzOm51bGwscGluY2hJbjpudWxsLHBpbmNoT3V0Om51bGwscGluY2hTdGF0dXM6bnVsbCxjbGljazpudWxsLHRhcDpudWxsLGRvdWJsZVRhcDpudWxsLGxvbmdUYXA6bnVsbCxob2xkOm51bGwsdHJpZ2dlck9uVG91Y2hFbmQ6ITAsdHJpZ2dlck9uVG91Y2hMZWF2ZTohMSxhbGxvd1BhZ2VTY3JvbGw6ImF1dG8iLGZhbGxiYWNrVG9Nb3VzZUV2ZW50czohMCxleGNsdWRlZEVsZW1lbnRzOiJsYWJlbCwgYnV0dG9uLCBpbnB1dCwgc2VsZWN0LCB0ZXh0YXJlYSwgYSwgLm5vU3dpcGUifTthLmZuLnN3aXBlPWZ1bmN0aW9uKGMpe3ZhciBkPWEodGhpcyksZT1kLmRhdGEoQik7aWYoZSYmInN0cmluZyI9PXR5cGVvZiBjKXtpZihlW2NdKXJldHVybiBlW2NdLmFwcGx5KHRoaXMsQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpKTthLmVycm9yKCJNZXRob2QgIitjKyIgZG9lcyBub3QgZXhpc3Qgb24galF1ZXJ5LnN3aXBlIil9ZWxzZSBpZighKGV8fCJvYmplY3QiIT10eXBlb2YgYyYmYykpcmV0dXJuIGIuYXBwbHkodGhpcyxhcmd1bWVudHMpO3JldHVybiBkfSxhLmZuLnN3aXBlLmRlZmF1bHRzPUMsYS5mbi5zd2lwZS5waGFzZXM9e1BIQVNFX1NUQVJUOnUsUEhBU0VfTU9WRTp2LFBIQVNFX0VORDp3LFBIQVNFX0NBTkNFTDp4fSxhLmZuLnN3aXBlLmRpcmVjdGlvbnM9e0xFRlQ6ZCxSSUdIVDplLFVQOmYsRE9XTjpnLElOOmgsT1VUOml9LGEuZm4uc3dpcGUucGFnZVNjcm9sbD17Tk9ORTpqLEhPUklaT05UQUw6cSxWRVJUSUNBTDpyLEFVVE86a30sYS5mbi5zd2lwZS5maW5nZXJzPXtPTkU6MSxUV086MixUSFJFRTozLEFMTDpzfX0pLGMoImdhbGxlcnkvdmlld3Mvc2VsZWN0aW9uL3NlbGVjdC5idXR0b24iLFsiYmFja2JvbmUiLCJqcXVlcnkiLCJqcXVlcnktdG91Y2hzd2lwZSJdLGZ1bmN0aW9uKGEpe3ZhciBiPWEuVmlldy5leHRlbmQoe2luaXRpYWxpemU6ZnVuY3Rpb24oKXt0aGlzLm1vZGVsJiZ0aGlzLmVsJiYodGhpcy5saXN0ZW5Ubyh0aGlzLm1vZGVsLCJjaGFuZ2U6c2VsZWN0ZWQiLHRoaXMudXBkYXRlU2VsZWN0ZWQpLHRoaXMudXBkYXRlU2VsZWN0ZWQodGhpcy5tb2RlbCx0aGlzLm1vZGVsLmdldCgic2VsZWN0ZWQiKSksdGhpcy4kZWwuc3dpcGUoe3RhcDpfLmJpbmQodGhpcy50b2dnbGVTZWxlY3RlZCx0aGlzKX0pKX0scmVtb3ZlOmZ1bmN0aW9uKCl7dGhpcy4kZWwuc3dpcGUoImRlc3Ryb3kiKSxhLlZpZXcucHJvdG90eXBlLnJlbW92ZS5jYWxsKHRoaXMpfSx0b2dnbGVTZWxlY3RlZDpmdW5jdGlvbihhKXthLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpLGEucHJldmVudERlZmF1bHQoKSx0aGlzLm1vZGVsLnNldCgic2VsZWN0ZWQiLCF0aGlzLm1vZGVsLmdldCgic2VsZWN0ZWQiKSl9LHVwZGF0ZVNlbGVjdGVkOmZ1bmN0aW9uKGEsYil7Yj90aGlzLiRlbC5hZGRDbGFzcygic2VsZWN0ZWQiKTp0aGlzLiRlbC5yZW1vdmVDbGFzcygic2VsZWN0ZWQiKX19KTtyZXR1cm4gYn0pLGMoImdhbGxlcnkvdmlld3MvdGh1bWIudmlldyIsWyJqcXVlcnkiLCJqcXVlcnktdG91Y2hzd2lwZSIsImJhY2tib25lIiwiZ2FsbGVyeS92aWV3cy9zZWxlY3Rpb24vc2VsZWN0LmJ1dHRvbiJdLGZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPWMuVmlldy5leHRlbmQoe2luaXRpYWxpemU6ZnVuY3Rpb24oKXt0aGlzLm1vZGVsLnNldFRodW1iVmlldyh0aGlzKSx0aGlzLmdhbGxlcnk9dGhpcy5vcHRpb25zLmdhbGxlcnksdGhpcy50ZW1wbGF0ZT10aGlzLm9wdGlvbnMudGVtcGxhdGUsdGhpcy5kb3VibGVUYXA9dGhpcy5nYWxsZXJ5LmdldCgib3B0cyIpLmRvdWJsZV90YXBfdGh1bWJ9LHJlbW92ZTpmdW5jdGlvbigpe3RoaXMuJGVsLnN3aXBlKCJkZXN0cm95IiksYy5WaWV3LnByb3RvdHlwZS5yZW1vdmUuY2FsbCh0aGlzKX0sY2xpY2tPclRhcHBlZDpmdW5jdGlvbihhKXsidG91Y2hlbmQiPT1hLnR5cGUmJnRoaXMuZG91YmxlVGFwPyh0aGlzLiRlbC5hZGRDbGFzcygiZG91YmxlLXRhcCIpLG51bGwhPT10aGlzLiRlbFswXS5xdWVyeVNlbGVjdG9yKCI6aG92ZXIiKSYmdGhpcy5vcGVuSW5TbGlkZXIoKSk6dGhpcy5vcGVuSW5TbGlkZXIoKX0sb3BlbkluU2xpZGVyOmZ1bmN0aW9uKCl7dGhpcy5nYWxsZXJ5LnRyaWdnZXIoInRodW1iOmNsaWNrZWQiLHRoaXMubW9kZWwpfSxyZW5kZXI6ZnVuY3Rpb24oKXt2YXIgYj10aGlzLnRlbXBsYXRlKHtpbWc6dGhpcy5tb2RlbH0pLnRyaW0oKTtyZXR1cm4gdGhpcy5zZXRFbGVtZW50KGEucGFyc2VIVE1MKGIpKSx0aGlzLiRlbC5zd2lwZSh7dGFwOl8uYmluZCh0aGlzLmNsaWNrT3JUYXBwZWQsdGhpcyl9KSx0aGlzLnNlbGVjdEJ1dHRvbnx8KHRoaXMuc2VsZWN0QnV0dG9uPW5ldyBkKHttb2RlbDp0aGlzLm1vZGVsLGVsOnRoaXMuJCgiLnNlbGVjdG9yIil9KSksdGhpc319KTtyZXR1cm4gZX0pLGMoImdhbGxlcnkvdmlld3MvdGh1bWIuY29udGFpbmVyIixbImpxdWVyeSIsInZlbmRvci9qcXVlcnkudGhyb3R0bGUtZGVib3VuY2UiLCJ1bmRlcnNjb3JlIiwiYmFja2JvbmUiLCJnYWxsZXJ5L3ZpZXdzL3RodW1iLnZpZXciLCJnYWxsZXJ5L3V0aWxzL3Jlc3BvbnNpdmUuYWRhcHRlciJdLGZ1bmN0aW9uKGEsYixjLGQsZSl7dmFyIGY9ZC5WaWV3LmV4dGVuZCh7ZWw6Ii5jb250YWluZXIucGhvdG9zIixkZWZhdWx0czp7aXRlbVNlbGVjdG9yOiIucGhvdG8ifSxpbml0aWFsaXplOmZ1bmN0aW9uKCl7dGhpcy5vcHRpb25zPWMuZXh0ZW5kKHt9LHRoaXMuZGVmYXVsdHMsdGhpcy5vcHRpb25zKSx0aGlzLiRlbC5hZGRDbGFzcygibG9hZGluZyIpLHRoaXMubGlzdGVuVG8odGhpcy5tb2RlbCwiY2hhbmdlIix0aGlzLmdhbGxlcnlGZXRjaGVkKX0sZ2FsbGVyeUZldGNoZWQ6ZnVuY3Rpb24oKXt0aGlzLiRlbC5hZGRDbGFzcygiZmV0Y2hlZCIpLHRoaXMuaW5pdEdhbGxlcnkoKSx0aGlzLmluaXRUaHVtYnMoKX0saW5pdEdhbGxlcnk6ZnVuY3Rpb24oKXt9LGluaXRUaHVtYnM6ZnVuY3Rpb24oKXt2YXIgYj10aGlzLm1vZGVsLmdldCgiaW1hZ2VzIik7dGhpcy4kKHRoaXMub3B0aW9ucy5pdGVtU2VsZWN0b3IpLmVhY2goZnVuY3Rpb24oKXt2YXIgYz1hKHRoaXMpLGQ9Yi5nZXQoYy5hdHRyKCJpZCIpKTtuZXcgZSh7bW9kZWw6ZCxlbDpjLGdhbGxlcnk6dGhpcy5tb2RlbH0pfSksdGhpcy4kZWwucmVtb3ZlQ2xhc3MoImxvYWRpbmciKSx0aGlzLiRlbC5maW5kKHRoaXMub3B0aW9ucy5pdGVtU2VsZWN0b3IpLmFkZENsYXNzKCJsb2FkZWQiKX0sc2Nyb2xsVG9UaHVtYjpmdW5jdGlvbihiKXt3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpe2lmKGIpe3ZhciBjPWIuZ2V0VGh1bWJWaWV3KCk7YyYmYSgiaHRtbCwgYm9keSIpLmFuaW1hdGUoe3Njcm9sbFRvcDpjLiRlbC5vZmZzZXQoKS50b3B9LDEwMCl9fSwyMDApfX0pO3JldHVybiBmfSksYygiZ2FsbGVyeS92aWV3cy90aHVtYi5jb250YWluZXIubWFzb25yeSIsWyJqcXVlcnkiLCJ1bmRlcnNjb3JlIiwiYmFja2JvbmUiLCJqcXVlcnktYnJpZGdldC9qcXVlcnkuYnJpZGdldCIsImZsdWlkLW1hc29ucnkiLCJnYWxsZXJ5L3ZpZXdzL3RodW1iLmNvbnRhaW5lciIsImdhbGxlcnkvdXRpbHMvcmVzcG9uc2l2ZS5hZGFwdGVyIl0sZnVuY3Rpb24oYSxiLGMsZCxlLGYsZyl7YS5icmlkZ2V0KCJmbHVpZE1hc29ucnkiLGUpO3ZhciBoPWYuZXh0ZW5kKHtpbml0aWFsaXplOmZ1bmN0aW9uKCl7Zi5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGluaXRHYWxsZXJ5OmZ1bmN0aW9uKCl7dGhpcy5pbml0TWFzb25yeSh0aGlzLm1vZGVsLmdldCgib3B0cyIpKX0saW5pdE1hc29ucnk6ZnVuY3Rpb24oYSl7dGhpcy4kZWwuZmx1aWRNYXNvbnJ5KHtpdGVtU2VsZWN0b3I6dGhpcy5vcHRpb25zLml0ZW1TZWxlY3RvcixtaW5Db2x1bW5XaWR0aDpnLmdldE9wdGlvbkJ5TWVkaWFUeXBlKGEsIm1pbl9jb2xfd2lkdGgiKSxndXR0ZXI6Zy5nZXRPcHRpb25CeU1lZGlhVHlwZShhLCJndXR0ZXJfd2lkdGgiKSxpc0ZpdFdpZHRoOiExfSl9fSk7cmV0dXJuIGh9KSxmdW5jdGlvbihhLGQpeyJmdW5jdGlvbiI9PXR5cGVvZiBjJiZjLmFtZD9jKCJpbWFnZXNsb2FkZWQvaW1hZ2VzbG9hZGVkIixbImV2ZW50RW1pdHRlci9FdmVudEVtaXR0ZXIiLCJldmVudGllL2V2ZW50aWUiXSxmdW5jdGlvbihiLGMpe3JldHVybiBkKGEsYixjKX0pOiJvYmplY3QiPT10eXBlb2YgZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1kKGEsYigid29sZnk4Ny1ldmVudGVtaXR0ZXIiKSxiKCJldmVudGllIikpOmEuaW1hZ2VzTG9hZGVkPWQoYSxhLkV2ZW50RW1pdHRlcixhLmV2ZW50aWUpfSh3aW5kb3csZnVuY3Rpb24oYSxiLGMpe2Z1bmN0aW9uIGQoYSxiKXtmb3IodmFyIGMgaW4gYilhW2NdPWJbY107cmV0dXJuIGF9ZnVuY3Rpb24gZShhKXtyZXR1cm4iW29iamVjdCBBcnJheV0iPT09bS5jYWxsKGEpfWZ1bmN0aW9uIGYoYSl7dmFyIGI9W107aWYoZShhKSliPWE7ZWxzZSBpZigibnVtYmVyIj09dHlwZW9mIGEubGVuZ3RoKWZvcih2YXIgYz0wLGQ9YS5sZW5ndGg7ZD5jO2MrKyliLnB1c2goYVtjXSk7ZWxzZSBiLnB1c2goYSk7cmV0dXJuIGJ9ZnVuY3Rpb24gZyhhLGIsYyl7aWYoISh0aGlzIGluc3RhbmNlb2YgZykpcmV0dXJuIG5ldyBnKGEsYik7InN0cmluZyI9PXR5cGVvZiBhJiYoYT1kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGEpKSx0aGlzLmVsZW1lbnRzPWYoYSksdGhpcy5vcHRpb25zPWQoe30sdGhpcy5vcHRpb25zKSwiZnVuY3Rpb24iPT10eXBlb2YgYj9jPWI6ZCh0aGlzLm9wdGlvbnMsYiksYyYmdGhpcy5vbigiYWx3YXlzIixjKSx0aGlzLmdldEltYWdlcygpLGomJih0aGlzLmpxRGVmZXJyZWQ9bmV3IGouRGVmZXJyZWQpO3ZhciBlPXRoaXM7c2V0VGltZW91dChmdW5jdGlvbigpe2UuY2hlY2soKX0pfWZ1bmN0aW9uIGgoYSl7dGhpcy5pbWc9YX1mdW5jdGlvbiBpKGEpe3RoaXMuc3JjPWEsblthXT10aGlzfXZhciBqPWEualF1ZXJ5LGs9YS5jb25zb2xlLGw9InVuZGVmaW5lZCIhPXR5cGVvZiBrLG09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztnLnByb3RvdHlwZT1uZXcgYixnLnByb3RvdHlwZS5vcHRpb25zPXt9LGcucHJvdG90eXBlLmdldEltYWdlcz1mdW5jdGlvbigpe3RoaXMuaW1hZ2VzPVtdO2Zvcih2YXIgYT0wLGI9dGhpcy5lbGVtZW50cy5sZW5ndGg7Yj5hO2ErKyl7dmFyIGM9dGhpcy5lbGVtZW50c1thXTsiSU1HIj09PWMubm9kZU5hbWUmJnRoaXMuYWRkSW1hZ2UoYyk7dmFyIGQ9Yy5ub2RlVHlwZTtpZihkJiYoMT09PWR8fDk9PT1kfHwxMT09PWQpKWZvcih2YXIgZT1jLnF1ZXJ5U2VsZWN0b3JBbGwoImltZyIpLGY9MCxnPWUubGVuZ3RoO2c+ZjtmKyspe3ZhciBoPWVbZl07dGhpcy5hZGRJbWFnZShoKX19fSxnLnByb3RvdHlwZS5hZGRJbWFnZT1mdW5jdGlvbihhKXt2YXIgYj1uZXcgaChhKTt0aGlzLmltYWdlcy5wdXNoKGIpfSxnLnByb3RvdHlwZS5jaGVjaz1mdW5jdGlvbigpe2Z1bmN0aW9uIGEoYSxlKXtyZXR1cm4gYi5vcHRpb25zLmRlYnVnJiZsJiZrLmxvZygiY29uZmlybSIsYSxlKSxiLnByb2dyZXNzKGEpLGMrKyxjPT09ZCYmYi5jb21wbGV0ZSgpLCEwfXZhciBiPXRoaXMsYz0wLGQ9dGhpcy5pbWFnZXMubGVuZ3RoO2lmKHRoaXMuaGFzQW55QnJva2VuPSExLCFkKXJldHVybiB2b2lkIHRoaXMuY29tcGxldGUoKTtmb3IodmFyIGU9MDtkPmU7ZSsrKXt2YXIgZj10aGlzLmltYWdlc1tlXTtmLm9uKCJjb25maXJtIixhKSxmLmNoZWNrKCl9fSxnLnByb3RvdHlwZS5wcm9ncmVzcz1mdW5jdGlvbihhKXt0aGlzLmhhc0FueUJyb2tlbj10aGlzLmhhc0FueUJyb2tlbnx8IWEuaXNMb2FkZWQ7dmFyIGI9dGhpcztzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Yi5lbWl0KCJwcm9ncmVzcyIsYixhKSxiLmpxRGVmZXJyZWQmJmIuanFEZWZlcnJlZC5ub3RpZnkmJmIuanFEZWZlcnJlZC5ub3RpZnkoYixhKX0pfSxnLnByb3RvdHlwZS5jb21wbGV0ZT1mdW5jdGlvbigpe3ZhciBhPXRoaXMuaGFzQW55QnJva2VuPyJmYWlsIjoiZG9uZSI7dGhpcy5pc0NvbXBsZXRlPSEwO3ZhciBiPXRoaXM7c2V0VGltZW91dChmdW5jdGlvbigpe2lmKGIuZW1pdChhLGIpLGIuZW1pdCgiYWx3YXlzIixiKSxiLmpxRGVmZXJyZWQpe3ZhciBjPWIuaGFzQW55QnJva2VuPyJyZWplY3QiOiJyZXNvbHZlIjtiLmpxRGVmZXJyZWRbY10oYil9fSl9LGomJihqLmZuLmltYWdlc0xvYWRlZD1mdW5jdGlvbihhLGIpe3ZhciBjPW5ldyBnKHRoaXMsYSxiKTtyZXR1cm4gYy5qcURlZmVycmVkLnByb21pc2Uoaih0aGlzKSl9KSxoLnByb3RvdHlwZT1uZXcgYixoLnByb3RvdHlwZS5jaGVjaz1mdW5jdGlvbigpe3ZhciBhPW5bdGhpcy5pbWcuc3JjXXx8bmV3IGkodGhpcy5pbWcuc3JjKTtpZihhLmlzQ29uZmlybWVkKXJldHVybiB2b2lkIHRoaXMuY29uZmlybShhLmlzTG9hZGVkLCJjYWNoZWQgd2FzIGNvbmZpcm1lZCIpO2lmKHRoaXMuaW1nLmNvbXBsZXRlJiZ2b2lkIDAhPT10aGlzLmltZy5uYXR1cmFsV2lkdGgpcmV0dXJuIHZvaWQgdGhpcy5jb25maXJtKDAhPT10aGlzLmltZy5uYXR1cmFsV2lkdGgsIm5hdHVyYWxXaWR0aCIpO3ZhciBiPXRoaXM7YS5vbigiY29uZmlybSIsZnVuY3Rpb24oYSxjKXtyZXR1cm4gYi5jb25maXJtKGEuaXNMb2FkZWQsYyksITB9KSxhLmNoZWNrKCl9LGgucHJvdG90eXBlLmNvbmZpcm09ZnVuY3Rpb24oYSxiKXt0aGlzLmlzTG9hZGVkPWEsdGhpcy5lbWl0KCJjb25maXJtIix0aGlzLGIpfTt2YXIgbj17fTtyZXR1cm4gaS5wcm90b3R5cGU9bmV3IGIsaS5wcm90b3R5cGUuY2hlY2s9ZnVuY3Rpb24oKXtpZighdGhpcy5pc0NoZWNrZWQpe3ZhciBhPW5ldyBJbWFnZTtjLmJpbmQoYSwibG9hZCIsdGhpcyksYy5iaW5kKGEsImVycm9yIix0aGlzKSxhLnNyYz10aGlzLnNyYyx0aGlzLmlzQ2hlY2tlZD0hMH19LGkucHJvdG90eXBlLmhhbmRsZUV2ZW50PWZ1bmN0aW9uKGEpe3ZhciBiPSJvbiIrYS50eXBlO3RoaXNbYl0mJnRoaXNbYl0oYSl9LGkucHJvdG90eXBlLm9ubG9hZD1mdW5jdGlvbihhKXt0aGlzLmNvbmZpcm0oITAsIm9ubG9hZCIpLHRoaXMudW5iaW5kUHJveHlFdmVudHMoYSl9LGkucHJvdG90eXBlLm9uZXJyb3I9ZnVuY3Rpb24oYSl7dGhpcy5jb25maXJtKCExLCJvbmVycm9yIiksdGhpcy51bmJpbmRQcm94eUV2ZW50cyhhKX0saS5wcm90b3R5cGUuY29uZmlybT1mdW5jdGlvbihhLGIpe3RoaXMuaXNDb25maXJtZWQ9ITAsdGhpcy5pc0xvYWRlZD1hLHRoaXMuZW1pdCgiY29uZmlybSIsdGhpcyxiKX0saS5wcm90b3R5cGUudW5iaW5kUHJveHlFdmVudHM9ZnVuY3Rpb24oYSl7Yy51bmJpbmQoYS50YXJnZXQsImxvYWQiLHRoaXMpLGMudW5iaW5kKGEudGFyZ2V0LCJlcnJvciIsdGhpcyl9LGd9KSxjKCJsaWIvanF1ZXJ5LmludmlldyIsWyJqcXVlcnkiLCJ2ZW5kb3IvanF1ZXJ5LnRocm90dGxlLWRlYm91bmNlIl0sZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYigpe3ZhciBiLGMsZD17aGVpZ2h0OmwuaW5uZXJIZWlnaHQsd2lkdGg6bC5pbm5lcldpZHRofTtyZXR1cm4gZC5oZWlnaHR8fChiPWsuY29tcGF0TW9kZSwoYnx8IWEuc3VwcG9ydC5ib3hNb2RlbCkmJihjPSJDU1MxQ29tcGF0Ij09PWI/bTprLmJvZHksZD17aGVpZ2h0OmMuY2xpZW50SGVpZ2h0LHdpZHRoOmMuY2xpZW50V2lkdGh9KSksZH1mdW5jdGlvbiBjKCl7cmV0dXJue3RvcDpsLnBhZ2VZT2Zmc2V0fHxtLnNjcm9sbFRvcHx8ay5ib2R5LnNjcm9sbFRvcCxsZWZ0OmwucGFnZVhPZmZzZXR8fG0uc2Nyb2xsTGVmdHx8ay5ib2R5LnNjcm9sbExlZnR9fWZ1bmN0aW9uIGQoKXt2YXIgZCxlPWEoKSxmPTA7aWYoYS5lYWNoKGosZnVuY3Rpb24oYSxiKXt2YXIgYz1iLmRhdGEuc2VsZWN0b3IsZD1iLiRlbGVtZW50O2Q9Yz9kLmZpbmQoYyk6ZCxkLmRhdGEoImludmlld19vcHRzIixiLmRhdGEuZGF0YSksZT1lLmFkZChkKX0pLGQ9ZS5sZW5ndGgsaSYmKGNvbnNvbGUubG9nKCJpbnZpZXdPYmplY3RzOiAiKSxjb25zb2xlLmxvZyhqKSxjb25zb2xlLmxvZygiZWxlbWVudHNMZW5ndGg6ICIrZCkpLGQpZm9yKGc9Z3x8YigpLGg9aHx8YygpLGkmJihjb25zb2xlLmxvZygidmlld3BvcnRTaXplOiAiKSxjb25zb2xlLmxvZyhnKSxjb25zb2xlLmxvZygidmlld3BvcnRPZmZzZXQ6ICIpLGNvbnNvbGUubG9nKGgpKTtkPmY7ZisrKWlmKGEuY29udGFpbnMobSxlW2ZdKSl7dmFyIGssbCxuLG89YShlW2ZdKSxwPXtoZWlnaHQ6by5oZWlnaHQoKSx3aWR0aDpvLndpZHRoKCl9LHE9by5vZmZzZXQoKSxyPW8uZGF0YSgiaW52aWV3Iikscz1vLmRhdGEoImludmlld19vcHRzIikudGhyZXNob2xkO2lmKHMpe3RoaXMuZGVidWcmJmNvbnNvbGUubG9nKCJUaHJlc2hvbGQ6ICIrcyk7dmFyIHQ9cS50b3AsdT1xLmxlZnQ7cT17dG9wOnQtcyxsZWZ0OnUtc319aWYoaSYmKGNvbnNvbGUubG9nKCJlbGVtZW50U2l6ZTogIiksY29uc29sZS5sb2cocCksY29uc29sZS5sb2coImVsZW1lbnRPZmZzZXQ6ICIpLGNvbnNvbGUubG9nKHEpKSwhaHx8IWcpcmV0dXJuO3EudG9wPGgudG9wK2cuaGVpZ2h0JiZxLmxlZnQ8aC5sZWZ0K2cud2lkdGg/KGs9aC5sZWZ0PnEubGVmdD8icmlnaHQiOmgubGVmdCtnLndpZHRoPHEubGVmdCtwLndpZHRoPyJsZWZ0IjoiYm90aCIsbD1oLnRvcD5xLnRvcD8iYm90dG9tIjpoLnRvcCtnLmhlaWdodDxxLnRvcCtwLmhlaWdodD8idG9wIjoiYm90aCIsbj1rKyItIitsLG8uZGF0YSgiaW52aWV3IixuKS50cmlnZ2VyKCJpbnZpZXciLFshMCxrLGxdKSk6ciYmby5kYXRhKCJpbnZpZXciLCExKS50cmlnZ2VyKCJpbnZpZXciLFshMV0pfX1mdW5jdGlvbiBlKCl7YShsKS5iaW5kKCJzY3JvbGwuaW52aWV3IHJlc2l6ZS5pbnZpZXciLGEudGhyb3R0bGUoMjUwLGZ1bmN0aW9uKCl7aSYmY29uc29sZS5sb2coIkhlbGxvIGludmlldy5qcyBjaGVja3MgaXQgb3V0ISIpLGc9aD1udWxsLGQoKX0pKX1mdW5jdGlvbiBmKCl7YShsKS51bmJpbmQoInNjcm9sbC5pbnZpZXcgcmVzaXplLmludmlldyIpfXZhciBnLGgsaT0hMSxqPXt9LGs9ZG9jdW1lbnQsbD13aW5kb3csbT1rLmRvY3VtZW50RWxlbWVudCxuPWEuZXhwYW5kbzthLmV2ZW50LnNwZWNpYWwuaW52aWV3PXthZGQ6ZnVuY3Rpb24oYil7altiLmd1aWQrIi0iK3RoaXNbbl1dPXtkYXRhOmIsJGVsZW1lbnQ6YSh0aGlzKX0sZSgpfSxyZW1vdmU6ZnVuY3Rpb24oYSl7ZigpO3RyeXtkZWxldGUgalthLmd1aWQrIi0iK3RoaXNbbl1dfWNhdGNoKGIpe319fX0pLGMoImdhbGxlcnkvdmlld3MvdGh1bWIuY29udGFpbmVyLmR5bmFtaWMiLFsianF1ZXJ5IiwiaW1hZ2VzbG9hZGVkL2ltYWdlc2xvYWRlZCIsImxpYi9qcXVlcnkuaW52aWV3IiwidW5kZXJzY29yZSIsImJhY2tib25lIiwiZ2FsbGVyeS92aWV3cy90aHVtYi5jb250YWluZXIiLCJnYWxsZXJ5L3ZpZXdzL3RodW1iLnZpZXciLCJnYWxsZXJ5L3V0aWxzL3Jlc3BvbnNpdmUuYWRhcHRlciJdLGZ1bmN0aW9uKGEsYixjLGQsZSxmLGcsaCl7dmFyIGk9Zi5leHRlbmQoe2RlYnVnOiExLGluaXRpYWxpemU6ZnVuY3Rpb24oKXt0aGlzLnRodW1iVGVtcGxhdGU9dGhpcy5nZXRUaHVtYlRlbXBsYXRlKCksdGhpcy5sb2FkZWRJbWFnZXM9MCx0aGlzLnRocmVzaG9sZD0zMDAsZi5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyksdGhpcy5zdG9wcGVyPXRoaXMuJGVsLm5leHQoIi5zdG9wcGVyIiksdGhpcy5saXN0ZW5Ubyh0aGlzLm1vZGVsLCJzbGlkZXI6bmV3SW1hZ2UiLHRoaXMub25OZXdTbGlkZXJJbWFnZSksdGhpcy5saXN0ZW5Ubyh0aGlzLm1vZGVsLCJzbGlkZXI6Y2xvc2luZyIsdGhpcy5vblNsaWRlckNsb3NpbmcpfSxpbml0R2FsbGVyeTpmdW5jdGlvbigpe3ZhciBhPXRoaXMubW9kZWwuZ2V0KCJvcHRzIik7dGhpcy5maXJzdENodW5rPWguZ2V0T3B0aW9uQnlNZWRpYVR5cGUoYSwiZmlyc3RfY2h1bmsiKSx0aGlzLmNodW5rU2l6ZT1oLmdldE9wdGlvbkJ5TWVkaWFUeXBlKGEsImNodW5rX3NpemUiKSx0aGlzLmxpc3RlblRvKHRoaXMubW9kZWwuZ2V0KCJpbWFnZXMiKSwicmVzZXQiLHRoaXMuaW5pdFRodW1icyksdGhpcy5saXN0ZW5Ubyh0aGlzLm1vZGVsLmdldCgiaW1hZ2VzIiksInJlbW92ZSIsdGhpcy5yZW1vdmVUaHVtYil9LGluaXRUaHVtYnM6ZnVuY3Rpb24oKXt0aGlzLnJlbW92ZSgpLHRoaXMuX2xpc3RlbmluZ0Zvckludmlldz0hMSx0aGlzLmltYWdlc1RvTG9hZD10aGlzLm1vZGVsLmdldCgiaW1hZ2VzIikubW9kZWxzLnNsaWNlKCk7CnZhciBhPXRoaXMuX3JlbmRlckNodW5rKHRoaXMuZmlyc3RDaHVuayk7dGhpcy4kZWwucmVtb3ZlQ2xhc3MoImxvYWRpbmciKSx0aGlzLl9jaGVja0ltYWdlc0xvYWRlZChhKX0scmVtb3ZlOmZ1bmN0aW9uKCl7dGhpcy4kZWwuY2hpbGRyZW4oKS5yZW1vdmUoKX0scmVtb3ZlVGh1bWI6ZnVuY3Rpb24oYSl7YS5nZXRUaHVtYlZpZXcoKS5yZW1vdmUoKX0scmVuZGVyTmV4dENodW5rOmZ1bmN0aW9uKCl7dGhpcy50aW1lb3V0QmluZD13aW5kb3cuc2V0VGltZW91dChkLmJpbmQodGhpcy5fYmluZEludmlldyx0aGlzKSwyZTMpLHRoaXMuX3VuYmluZEludmlldygpO3ZhciBhPXRoaXMuX3JlbmRlckNodW5rKHRoaXMuY2h1bmtTaXplKTt0aGlzLl9jaGVja0ltYWdlc0xvYWRlZChhKX0sYXJyYW5nZVRodW1iczpmdW5jdGlvbigpe30sdGh1bWJBZGRlZDpmdW5jdGlvbigpe30sX2JpbmRJbnZpZXc6ZnVuY3Rpb24oKXt3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMudGltZW91dEJpbmQpLHRoaXMuaW1hZ2VzVG9Mb2FkLmxlbmd0aCYmIXRoaXMuX2xpc3RlbmluZ0Zvckludmlldz8odGhpcy5zdG9wcGVyLnNob3coKSx0aGlzLnN0b3BwZXIub24oImludmlldyIse3RocmVzaG9sZDp0aGlzLnRocmVzaG9sZH0sZC5iaW5kKHRoaXMuX29uU3RvcHBlckFwcGVhcmVkLHRoaXMpKSx0aGlzLl9saXN0ZW5pbmdGb3JJbnZpZXc9ITAsYSh3aW5kb3cpLnRyaWdnZXIoInNjcm9sbCIpKTp0aGlzLnN0b3BwZXIuaGlkZSgpfSxfdW5iaW5kSW52aWV3OmZ1bmN0aW9uKCl7dGhpcy5zdG9wcGVyLm9mZigiaW52aWV3IiksdGhpcy5fbGlzdGVuaW5nRm9ySW52aWV3PSExfSxfb25TdG9wcGVyQXBwZWFyZWQ6ZnVuY3Rpb24oYSxiKXtiPyh0aGlzLmRlYnVnJiZjb25zb2xlLmxvZygiU1RvUFBlciBnZXNpY2h0ZXQhIiksdGhpcy5yZW5kZXJOZXh0Q2h1bmsoKSk6dGhpcy5kZWJ1ZyYmY29uc29sZS5sb2coIlNUb3BwZXIgb3V0IG9mIHNpZ2h0ISIpfSxfcmVuZGVyQ2h1bms6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiLGM9W10sZD0wO2E+ZCYmKGI9dGhpcy5pbWFnZXNUb0xvYWQuc2hpZnQoKSxiKTtkKyspe3ZhciBlPW5ldyBnKHttb2RlbDpiLGdhbGxlcnk6dGhpcy5tb2RlbCx0ZW1wbGF0ZTp0aGlzLnRodW1iVGVtcGxhdGV9KTtlPWUucmVuZGVyKCksdGhpcy4kZWwuYXBwZW5kKGUuJGVsKSx0aGlzLnRodW1iQWRkZWQoZSksYy5wdXNoKGUuZWwpfXJldHVybiBjfSxfY2hlY2tJbWFnZXNMb2FkZWQ6ZnVuY3Rpb24oYyl7dmFyIGU9dGhpcztuZXcgYihjKS5vbigicHJvZ3Jlc3MiLGZ1bmN0aW9uKGEsYil7Yi5pc0xvYWRlZCYmKGUuc3dpdGNoVGh1bWJDbGFzcyhiLmltZyksZS5hcnJhbmdlVGh1bWJzKCkpfSkub24oImFsd2F5cyIsZnVuY3Rpb24oKXtlLmRlYnVnJiYoY29uc29sZS5sb2coImxhc3Qgc3RvcHBlckFwcGVhcmVkIHRyaWdnZXIgY29tcGxldGVkLiIpLGNvbnNvbGUubG9nKCJsZWZ0IG92ZXIgaW1hZ2VzVG9Mb2FkOiAiK2UuaW1hZ2VzVG9Mb2FkLmxlbmd0aCkpLHdpbmRvdy5zZXRUaW1lb3V0KGQuYmluZChlLmFycmFuZ2VUaHVtYnMsZSksMjAwKSxlLl9iaW5kSW52aWV3KCl9KS5vbigiZmFpbCIsZnVuY3Rpb24oYSl7YS5kZWJ1ZyYmY29uc29sZS5sb2coIkZBSUwgLSBhbGwgaW1hZ2VzIGxvYWRlZCwgYXQgbGVhc3Qgb25lIGlzIGJyb2tlbiIpfSksYShjKS5lYWNoKGZ1bmN0aW9uKGIsYyl7YShjKS5wcm9wKCJjb21wbGV0ZSIpJiYoZS5zd2l0Y2hUaHVtYkNsYXNzKGMuaW1nKSxlLmFycmFuZ2VUaHVtYnMoKSl9KX0sc3dpdGNoVGh1bWJDbGFzczpmdW5jdGlvbihiKXt2YXIgYz1hKGIpLnBhcmVudCgpO3JldHVybiBjLnRvZ2dsZUNsYXNzKCJsb2FkaW5nIGxvYWRlZCIpfSxvbk5ld1NsaWRlckltYWdlOmZ1bmN0aW9uKGEpe2QuY29udGFpbnModGhpcy5pbWFnZXNUb0xvYWQsYS5tb2RlbCkmJndpbmRvdy5zZXRUaW1lb3V0KGQuYmluZChmdW5jdGlvbigpe3RoaXMucmVuZGVyTmV4dENodW5rKCl9LHRoaXMpLDIwMCl9LG9uU2xpZGVyQ2xvc2luZzpmdW5jdGlvbihhKXthJiZ0aGlzLnNjcm9sbFRvVGh1bWIoYS5tb2RlbCl9LGdldFRodW1iVGVtcGxhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gZC50ZW1wbGF0ZShhKCIjdGVtcGxhdGUtdGh1bWIiKS5odG1sKCkpfX0pO3JldHVybiBpfSksYygiZ2FsbGVyeS92aWV3cy90aHVtYi5jb250YWluZXIuZHluYW1pYy5tYXNvbnJ5IixbImpxdWVyeSIsImpxdWVyeS1icmlkZ2V0L2pxdWVyeS5icmlkZ2V0IiwiZmx1aWQtbWFzb25yeSIsInVuZGVyc2NvcmUiLCJiYWNrYm9uZSIsImdhbGxlcnkvdmlld3MvdGh1bWIuY29udGFpbmVyLmR5bmFtaWMiLCJnYWxsZXJ5L3V0aWxzL3Jlc3BvbnNpdmUuYWRhcHRlciJdLGZ1bmN0aW9uKGEsYixjLGQsZSxmLGcpe2EuYnJpZGdldCgiZmx1aWRNYXNvbnJ5IixjKTt2YXIgaD1mLmV4dGVuZCh7ZGVidWc6ITEsaW5pdGlhbGl6ZTpmdW5jdGlvbigpe2YucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxpbml0R2FsbGVyeTpmdW5jdGlvbigpe2YucHJvdG90eXBlLmluaXRHYWxsZXJ5LmFwcGx5KHRoaXMsYXJndW1lbnRzKSx0aGlzLmluaXRNYXNvbnJ5KHRoaXMubW9kZWwuZ2V0KCJvcHRzIikpfSxpbml0TWFzb25yeTpmdW5jdGlvbihhKXt0aGlzLiRlbC5mbHVpZE1hc29ucnkoe2l0ZW1TZWxlY3Rvcjp0aGlzLm9wdGlvbnMuaXRlbVNlbGVjdG9yLG1pbkNvbHVtbldpZHRoOmcuZ2V0T3B0aW9uQnlNZWRpYVR5cGUoYSwibWluX2NvbF93aWR0aCIpLGd1dHRlcjpnLmdldE9wdGlvbkJ5TWVkaWFUeXBlKGEsImd1dHRlcl93aWR0aCIpLGlzRml0V2lkdGg6ITF9KX0scmVtb3ZlOmZ1bmN0aW9uKCl7dGhpcy4kZWwuZmx1aWRNYXNvbnJ5KCJyZW1vdmUiLHRoaXMuJGVsLmNoaWxkcmVuKCkpfSxyZW1vdmVUaHVtYjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLiRlbDtiLmZsdWlkTWFzb25yeSgicmVtb3ZlIixhLmdldFRodW1iVmlldygpLiRlbCksYi5mbHVpZE1hc29ucnkoKX0sYXJyYW5nZVRodW1iczpmdW5jdGlvbigpe3RoaXMuJGVsLmZsdWlkTWFzb25yeSgpfSx0aHVtYkFkZGVkOmZ1bmN0aW9uKGEpe3RoaXMuJGVsLmZsdWlkTWFzb25yeSgiYXBwZW5kZWQiLGEuJGVsKX19KTtyZXR1cm4gaH0pLGMoImdhbGxlcnkvdmlld3MvbGFyZ2UudmlldyIsWyJqcXVlcnkiLCJ1bmRlcnNjb3JlIiwiYmFja2JvbmUiXSxmdW5jdGlvbihhLGIsYyl7dmFyIGQ9Yy5WaWV3LmV4dGVuZCh7ZGVidWc6ITEsaW5pdGlhbGl6ZTpmdW5jdGlvbigpe3RoaXMuc2xpZGVyPXRoaXMub3B0aW9ucy5zbGlkZXIsdGhpcy5jdXJyZW50U2xpZGVyUmF0aW89dm9pZCAwLHRoaXMuY3VyRGltcz17fSx0aGlzLmxhcmdlQXR0cnM9dGhpcy5tb2RlbC5nZXRMYXJnZSgpLHRoaXMuc2V0RWxlbWVudChhKCI8aW1nLz4iKSksdGhpcy4kZWwuYXR0cigic3JjIix0aGlzLmxhcmdlQXR0cnMuc3JjKS5jc3MoeyJtYXgtd2lkdGgiOnRoaXMubGFyZ2VBdHRycy53aWR0aCwibWF4LWhlaWdodCI6dGhpcy5sYXJnZUF0dHJzLmhlaWdodH0pLHRoaXMubW9kZWwuc2V0TGFyZ2VWaWV3KHRoaXMpfSxldmVudHM6e2xvYWQ6ImxvYWRlZCJ9LHJlc2l6ZTpmdW5jdGlvbigpe2lmKHRoaXMuY3VycmVudFNsaWRlclJhdGlvIT09dGhpcy5zbGlkZXIucmF0aW8pe3RoaXMuY3VycmVudFNsaWRlclJhdGlvPXRoaXMuc2xpZGVyLnJhdGlvLHRoaXMuY3VyRGltcz10aGlzLl9jYWxjdWxhdGVEaW1zKCk7dmFyIGE9dGhpczt3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpe2EuJGVsLmFuaW1hdGUoe3dpZHRoOmEuY3VyRGltcy5weFswXSxoZWlnaHQ6YS5jdXJEaW1zLnB4WzFdfSwwKX0sMCl9fSxnZXRXaWR0aDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmN1ckRpbXMucHhbMF19LGdldEhlaWdodDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmN1ckRpbXMucHhbMV19LF9jYWxjdWxhdGVEaW1zOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5tb2RlbC5nZXQoIm9yaWVudGF0aW9uIik7cmV0dXJuImxhbmRzY2FwZSI9PT1hPyh0aGlzLl9zZXRMYXJnZVRvRnVsbFdpdGgoKSx0aGlzLmN1ckRpbXMucHhbMV0+dGhpcy5zbGlkZXIuaGVpZ2h0JiYodGhpcy5kZWJ1ZyYmY29uc29sZS5sb2coInVwcywgaW1hZ2UgdG8gaGlnaCBmb3Igc2xpZGVyLCB3aGVuIHNldCB0byBmdWxsIHNsaWRlciB3aWR0aCEiKSx0aGlzLl9zZXRMYXJnZVRvRnVsbEhlaWdodCgpKSk6InBvcnRyYWl0Ij09PWEmJih0aGlzLl9zZXRMYXJnZVRvRnVsbEhlaWdodCgpLHRoaXMuY3VyRGltcy5weFswXT50aGlzLnNsaWRlci53aWR0aCYmKHRoaXMuZGVidWcmJmNvbnNvbGUubG9nKCJ1cHMsIGltYWdlIHRvIHdpZGUgZm9yIHNsaWRlciwgd2hlbiBzZXQgdG8gZnVsbCBzbGlkZXIgaGVpZ2h0ISIpLHRoaXMuX3NldExhcmdlVG9GdWxsV2l0aCgpKSksdGhpcy5jdXJEaW1zfSxfc2V0TGFyZ2VUb0Z1bGxXaXRoOmZ1bmN0aW9uKCl7dGhpcy5jdXJEaW1zLnBlcmNlbnQ9WyIxMDAlIiwiIl0sdGhpcy5jdXJEaW1zLnB4PVtNYXRoLm1pbih0aGlzLnNsaWRlci53aWR0aCx0aGlzLmxhcmdlQXR0cnMud2lkdGgpLE1hdGgubWluKE1hdGguZmxvb3IodGhpcy5zbGlkZXIud2lkdGgvdGhpcy5tb2RlbC5nZXQoInJhdGlvIikpLHRoaXMubGFyZ2VBdHRycy5oZWlnaHQpXSx0aGlzLmRlYnVnJiZjb25zb2xlLmxvZygiMTAwJSB3aWR0aCA9PiIrdGhpcy5zbGlkZXIud2lkdGgrIngiK3RoaXMuY3VyRGltcy5weFsxXSsicHg7IENvbnRhaW5lcjogIit0aGlzLnNsaWRlci53aWR0aCsieCIrdGhpcy5zbGlkZXIuaGVpZ2h0KyJweC4iKX0sX3NldExhcmdlVG9GdWxsSGVpZ2h0OmZ1bmN0aW9uKCl7dGhpcy5jdXJEaW1zLnBlcmNlbnQ9WyIiLCIxMDAlIl0sdGhpcy5jdXJEaW1zLnB4PVtNYXRoLm1pbihNYXRoLmZsb29yKHRoaXMuc2xpZGVyLmhlaWdodCp0aGlzLm1vZGVsLmdldCgicmF0aW8iKSksdGhpcy5sYXJnZUF0dHJzLndpZHRoKSxNYXRoLm1pbih0aGlzLnNsaWRlci5oZWlnaHQsdGhpcy5sYXJnZUF0dHJzLmhlaWdodCldLHRoaXMuZGVidWcmJmNvbnNvbGUubG9nKCIxMDAlIGhlaWdodCA9PiIrdGhpcy5jdXJEaW1zLnB4WzBdKyJ4Iit0aGlzLmN1ckRpbXMucHhbMV0rInB4OyBjb250YWluZXI6ICIrdGhpcy5zbGlkZXIud2lkdGgrIngiK3RoaXMuc2xpZGVyLmhlaWdodCsicHguIil9LGxvYWRlZDpmdW5jdGlvbigpe3RoaXMuZGVidWcmJmNvbnNvbGUubG9nKCJMYXJnZVZpZXcgZm9yIEltYWdlICIrdGhpcy5tb2RlbC5pZCsiIGlzIGxvYWRlZCIpfX0pO3JldHVybiBkfSksYygiZ2FsbGVyeS92aWV3cy9jb2NrcGl0LnZpZXciLFsianF1ZXJ5IiwianF1ZXJ5LXRvdWNoc3dpcGUiLCJ1bmRlcnNjb3JlIiwiYmFja2JvbmUiLCJnYWxsZXJ5L3ZpZXdzL3NlbGVjdGlvbi9zZWxlY3QuYnV0dG9uIl0sZnVuY3Rpb24oYSxiLGMsZCxlKXt2YXIgZj1kLlZpZXcuZXh0ZW5kKHtlbDoiLmNvY2twaXQiLGluaXRpYWxpemU6ZnVuY3Rpb24oKXt0aGlzLiRlbC5sZW5ndGgmJih0aGlzLmJ1dHRvbj10aGlzLiQoIi5jb2NrcGl0X2J1dHRvbiIpLHRoaXMuYm9keT10aGlzLiQoIi5jb2NrcGl0X2JvZHkiKS5hZGRDbGFzcygiaGlkZGVuIiksdGhpcy5fYm9keVRlbXBsYXRlPXRoaXMuZ2V0VGVtcGxhdGUoKSx0aGlzLnNsaWRlcj10aGlzLm9wdGlvbnMuc2xpZGVyLHRoaXMubGlzdGVuVG8odGhpcy5tb2RlbCwic2xpZGVyOm5ld0ltYWdlIix0aGlzLm9uTmV3SW1hZ2UpLHRoaXMuYnV0dG9uLnN3aXBlKHt0YXA6Yy5iaW5kKHRoaXMudG9nZ2xlQm9keSx0aGlzKX0pKX0scmVtb3ZlOmZ1bmN0aW9uKCl7dGhpcy5idXR0b24uc3dpcGUoImRlc3Ryb3kiKSxkLlZpZXcucHJvdG90eXBlLnJlbW92ZS5jYWxsKHRoaXMpfSxpc09wZW46ZnVuY3Rpb24oKXtyZXR1cm4hdGhpcy5ib2R5Lmhhc0NsYXNzKCJoaWRkZW4iKX0sdG9nZ2xlQm9keTpmdW5jdGlvbigpe3RoaXMuYm9keS50b2dnbGVDbGFzcygiaGlkZGVuIiksdGhpcy5yZW5kZXJCb2R5KHRoaXMubW9kZWwuZ2V0Q3VycmVudCgpKX0sb25OZXdJbWFnZTpmdW5jdGlvbihhKXt0aGlzLnJlbmRlckJvZHkoYS5tb2RlbCl9LHJlbmRlckJvZHk6ZnVuY3Rpb24oYSl7aWYodGhpcy5pc09wZW4oKSl7dGhpcy5ib2R5Lmh0bWwodGhpcy5fYm9keVRlbXBsYXRlKHtpbWc6YX0pKTt2YXIgYj10aGlzLiQoIi5zZWxlY3RvciIpO2IubGVuZ3RoJiZ0aGlzLnVwZGF0ZVNlbGVjdEJ1dHRvbihiLGEpfX0sdXBkYXRlU2VsZWN0QnV0dG9uOmZ1bmN0aW9uKGEsYil7dGhpcy5zZWxlY3RCdXR0b24mJnRoaXMuc2VsZWN0QnV0dG9uLnJlbW92ZSgpLHRoaXMuc2VsZWN0QnV0dG9uPW5ldyBlKHttb2RlbDpiLGVsOmF9KX0sZ2V0VGVtcGxhdGU6ZnVuY3Rpb24oKXt2YXIgYj1hKCIjdGVtcGxhdGUtY29ja3BpdEJvZHkiKTtyZXR1cm4gYi5sZW5ndGg/Yy50ZW1wbGF0ZShiLmh0bWwoKSk6KGNvbnNvbGUuZXJyb3IoJ01pc3NpbmcgVGVtcGxhdGUgZm9yIENvY2twaXQgKCQoIiN0ZW1wbGF0ZS1jb2NrcGl0Qm9keSIpISA9PiBDb2NrcGl0IG5vdCBpbml0aWFsaXplZC4nKSx2b2lkIHRoaXMuJGVsLmhpZGUoKSl9fSk7cmV0dXJuIGZ9KSxjKCJnYWxsZXJ5L3ZpZXdzL3NsaWRlci52aWV3IixbImpxdWVyeSIsImpxdWVyeS10b3VjaHN3aXBlIiwidmVuZG9yL2pxdWVyeS50aHJvdHRsZS1kZWJvdW5jZSIsInVuZGVyc2NvcmUiLCJiYWNrYm9uZSIsImdhbGxlcnkvdmlld3MvbGFyZ2UudmlldyIsImdhbGxlcnkvdmlld3MvY29ja3BpdC52aWV3Il0sZnVuY3Rpb24oYSxiLGMsZCxlLGYsZyl7dmFyIGg9ZS5WaWV3LmV4dGVuZCh7ZXZlbnRzOnsiY2xpY2sgLm5hdi5wcmV2Ijoic2hvd1ByZXYiLCJjbGljayAubmF2Lm5leHQiOiJzaG93TmV4dCJ9LGluaXRpYWxpemU6ZnVuY3Rpb24oKXthKCJib2R5IikuYWRkQ2xhc3MoInNsaWRlcl9jbG9zZWQiKSx0aGlzLnRyYXk9dGhpcy4kKCIudHJheSIpLHRoaXMuY3VycmVudEJveD10aGlzLiQoIi5waG90by5jdXJyZW50IiksdGhpcy5wcmV2Qm94PXRoaXMuJCgiLnBob3RvLnByZXYiKSx0aGlzLm5leHRCb3g9dGhpcy4kKCIucGhvdG8ubmV4dCIpLHRoaXMubmF2UHJldj10aGlzLiQoIi5uYXYucHJldiIpLHRoaXMubmF2TmV4dD10aGlzLiQoIi5uYXYubmV4dCIpLHRoaXMuY3VycmVudD12b2lkIDAsdGhpcy5saXN0ZW5Ubyh0aGlzLm1vZGVsLCJ0aHVtYjpjbGlja2VkIix0aGlzLm9wZW5TbGlkZXIpLGEod2luZG93KS5vbigicmVzaXplLnNsaWRlciIsZC5iaW5kKGEuZGVib3VuY2UoMjAwLHRoaXMucmVzaXplKSx0aGlzKSksYSh3aW5kb3cpLm9uKCJrZXl1cC5zbGlkZXIiLGQuYmluZCh0aGlzLmtleXMsdGhpcykpLHRoaXMudG91Y2hhYmxlPSJvbnRvdWNoc3RhcnQiaW4gd2luZG93LHRoaXMudG91Y2hhYmxlfHx0aGlzLnRyYXkub24oIm1vdXNlbW92ZS5zbGlkZXIiLGQuYmluZChhLnRocm90dGxlKDE1MCx0aGlzLm1vdXNlbW92ZSksdGhpcykpLHRoaXMuY29ja3BpdD1uZXcgZyh7bW9kZWw6dGhpcy5tb2RlbCxzbGlkZXI6dGhpc30pLHRoaXMuaW5pdFN3aXBlSGFuZGxlcigpLHRoaXMuJGVsLnN3aXBlKCJkaXNhYmxlIiksdGhpcy5saXN0ZW5Ub09uY2UodGhpcy5tb2RlbCwic3luYyIsZnVuY3Rpb24oKXtpZih3aW5kb3cubG9jYXRpb24uaGFzaC5sZW5ndGg+Mil7dmFyIGE9dGhpcy5tb2RlbC5nZXQoImltYWdlcyIpLmdldCh3aW5kb3cubG9jYXRpb24uaGFzaC5zdWJzdHIoMikpO2EmJih0aGlzLm9wZW5TbGlkZXIoYSksd2luZG93LnNldFRpbWVvdXQoZC5iaW5kKHRoaXMucmVzaXplLHRoaXMpLDI1MCkpfX0pfSxpbml0U3dpcGVIYW5kbGVyOmZ1bmN0aW9uKCl7dmFyIGE9dGhpczt0aGlzLiRlbC5zd2lwZSh7c3dpcGVMZWZ0OmZ1bmN0aW9uKGIpe2Euc2hvd05leHQoKSxiLnByZXZlbnREZWZhdWx0KCl9LHN3aXBlUmlnaHQ6ZnVuY3Rpb24oYil7YS5zaG93UHJldigpLGIucHJldmVudERlZmF1bHQoKX0sdGFwOmZ1bmN0aW9uKGIpe2IucHJldmVudERlZmF1bHQoKSxhLmNsaWNrKGIpfSxhbGxvd1BhZ2VTY3JvbGw6Im5vbmUifSl9LHJlbW92ZTpmdW5jdGlvbigpe2Eod2luZG93KS5vZmYoInJlc2l6ZS5zbGlkZXIiKSxhKHdpbmRvdykub2ZmKCJrZXl1cC5zbGlkZXIiKSx0aGlzLnRvdWNoYWJsZSYmdGhpcy50cmF5Lm9mZigibW91c2Vtb3ZlLnNsaWRlciIpLHRoaXMuJGVsLnN3aXBlKCJkZXN0cm95IiksZS5WaWV3LnByb3RvdHlwZS5yZW1vdmUuY2FsbCh0aGlzKX0sa2V5czpmdW5jdGlvbihhKXtpZih0aGlzLmlzT3BlbigpKXN3aXRjaChhLmtleUNvZGUpe2Nhc2UgMjc6dGhpcy5jbG9zZVNsaWRlcigpO2JyZWFrO2Nhc2UgMzk6dGhpcy5zaG93TmV4dCgpO2JyZWFrO2Nhc2UgMzc6dGhpcy5zaG93UHJldigpfX0sY2xpY2s6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5fbWFwTW91c2VFdmVudChhKTtzd2l0Y2goYil7Y2FzZSJuYXYucHJldiI6dGhpcy5zaG93UHJldigpO2JyZWFrO2Nhc2UibmF2Lm5leHQiOnRoaXMuc2hvd05leHQoKTticmVhaztjYXNlIkVTQyI6dGhpcy5jbG9zZVNsaWRlcigpfX0sbW91c2Vtb3ZlOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuX21hcE1vdXNlRXZlbnQoYSk7Im5hdi5wcmV2Ij09PWI/KHRoaXMubmF2TmV4dC5yZW1vdmVDbGFzcygiYWN0aXZlIiksdGhpcy5uYXZQcmV2LmFkZENsYXNzKCJhY3RpdmUiKSk6Im5hdi5uZXh0Ij09PWI/KHRoaXMubmF2UHJldi5yZW1vdmVDbGFzcygiYWN0aXZlIiksdGhpcy5uYXZOZXh0LmFkZENsYXNzKCJhY3RpdmUiKSk6KHRoaXMubmF2UHJldi5yZW1vdmVDbGFzcygiYWN0aXZlIiksdGhpcy5uYXZOZXh0LnJlbW92ZUNsYXNzKCJhY3RpdmUiKSl9LF9tYXBNb3VzZUV2ZW50OmZ1bmN0aW9uKGIpe3ZhciBjPWEoYi50YXJnZXQpO2lmKGMuaXMoIi5waG90byBpbWciKSl7dmFyIGQ9Yi5jaGFuZ2VkVG91Y2hlcyYmYi5jaGFuZ2VkVG91Y2hlcy5sZW5ndGg/Yi5jaGFuZ2VkVG91Y2hlc1swXS5wYWdlWDpiLnBhZ2VYLGU9ZC1hKGIudGFyZ2V0KS5vZmZzZXQoKS5sZWZ0LGY9ZS90aGlzLmN1cnJlbnQuZ2V0V2lkdGgoKTtyZXR1cm4uNDU+Zj8ibmF2LnByZXYiOiJuYXYubmV4dCJ9cmV0dXJuIDA9PT1jLmNsb3Nlc3QoIi5jb2NrcGl0IikubGVuZ3RoPyJFU0MiOnZvaWQgMH0saXNPcGVuOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGVsLmhhc0NsYXNzKCJvcGVuIil9LG9wZW5TbGlkZXI6ZnVuY3Rpb24oYil7dGhpcy5fc2V0RGltZW5zaW9ucygpLHRoaXMuX3NldEN1cnJlbnQoYiksdGhpcy4kZWwuYWRkQ2xhc3MoIm9wZW4iKSxhKCJib2R5IikucmVtb3ZlQ2xhc3MoInNsaWRlcl9jbG9zZWQiKSx0aGlzLiRlbC5hZGRDbGFzcygidmlzaWJsZSIpLHRoaXMuJGVsLnN3aXBlKCJlbmFibGUiKSx0aGlzLm1vZGVsLnRvZ2dsZVNsaWRlclN0YXRlKCl9LHNob3dOZXh0OmZ1bmN0aW9uKCl7aWYodGhpcy5uZXh0KXt2YXIgYT10aGlzLiRlbC5maW5kKCIjcHJldiIpO3RoaXMucHJldj10aGlzLmN1cnJlbnQsdGhpcy5wcmV2Qm94PXRoaXMuY3VycmVudEJveC5hdHRyKCJpZCIsInByZXYiKSx0aGlzLmN1cnJlbnQ9dGhpcy5uZXh0LHRoaXMubW9kZWwuc2V0Q3VycmVudCh0aGlzLm5leHQubW9kZWwpLHRoaXMuY3VycmVudEJveD10aGlzLm5leHRCb3guYXR0cigiaWQiLCJjdXJyZW50IiksdGhpcy5uZXh0Qm94PWEuYXR0cigiaWQiLCJuZXh0IiksdGhpcy5wcmV2Qm94LnRvZ2dsZUNsYXNzKCJjdXJyZW50IHByZXYiKSx0aGlzLmN1cnJlbnRCb3gudG9nZ2xlQ2xhc3MoIm5leHQgY3VycmVudCIpLHRoaXMubmV4dEJveC50b2dnbGVDbGFzcygicHJldiBuZXh0IiksdGhpcy5fc2V0TmV4dCgpLHRoaXMuX2N1cnJlbnRDaGFuZ2VkKCl9fSxzaG93UHJldjpmdW5jdGlvbigpe2lmKHRoaXMucHJldil7dmFyIGE9dGhpcy4kZWwuZmluZCgiI25leHQiKTt0aGlzLm5leHQ9dGhpcy5jdXJyZW50LHRoaXMubmV4dEJveD10aGlzLmN1cnJlbnRCb3guYXR0cigiaWQiLCJuZXh0IiksdGhpcy5jdXJyZW50PXRoaXMucHJldix0aGlzLm1vZGVsLnNldEN1cnJlbnQodGhpcy5wcmV2Lm1vZGVsKSx0aGlzLmN1cnJlbnRCb3g9dGhpcy5wcmV2Qm94LmF0dHIoImlkIiwiY3VycmVudCIpLHRoaXMucHJldkJveD1hLmF0dHIoImlkIiwicHJldiIpLHRoaXMubmV4dEJveC50b2dnbGVDbGFzcygiY3VycmVudCBuZXh0IiksdGhpcy5jdXJyZW50Qm94LnRvZ2dsZUNsYXNzKCJwcmV2IGN1cnJlbnQiKSx0aGlzLnByZXZCb3gudG9nZ2xlQ2xhc3MoIm5leHQgcHJldiIpLHRoaXMuX3NldFByZXYoKSx0aGlzLl9jdXJyZW50Q2hhbmdlZCgpfX0sY2xvc2VTbGlkZXI6ZnVuY3Rpb24oKXt0aGlzLm1vZGVsLnRyaWdnZXIoInNsaWRlcjpjbG9zaW5nIix0aGlzLmN1cnJlbnQpLHRoaXMuJGVsLnJlbW92ZUNsYXNzKCJvcGVuIHZpc2libGUiKSxhKCJib2R5IikuYWRkQ2xhc3MoInNsaWRlcl9jbG9zZWQiKSx0aGlzLl9zZXRDdXJyZW50KHZvaWQgMCksdGhpcy5jdXJyZW50PXRoaXMubmV4dD10aGlzLnBlcnY9dm9pZCAwLHRoaXMuJCgiLnBob3RvIikuZW1wdHkoKSx0aGlzLm1vZGVsLmdldCgiaW1hZ2VQYWdlcyIpJiZ0aGlzLm1vZGVsLmdldCgicG9zdFBhdGgiKT9oaXN0b3J5LnJlcGxhY2VTdGF0ZShudWxsLCIiLHRoaXMubW9kZWwuZ2V0KCJwb3N0UGF0aCIpKTp0aGlzLl9zZXRIYXNoYmFuZyhudWxsLCLDhE1QVEkiKSx0aGlzLiRlbC5zd2lwZSgiZGlzYWJsZSIpLHRoaXMubW9kZWwudG9nZ2xlU2xpZGVyU3RhdGUoKX0sX3NldEhhc2hiYW5nOmZ1bmN0aW9uKGEsYil7aWYoTW9kZXJuaXpyLmhpc3Rvcnkpe3ZhciBjPWRvY3VtZW50LmxvY2F0aW9uLmhyZWY7Yz1jLnJlcGxhY2UoL1wjLiovLCIiKSsoYT8iIyEiK2E6IiIpLGhpc3RvcnkucmVwbGFjZVN0YXRlKG51bGwsYixjKX19LF9jdXJyZW50Q2hhbmdlZDpmdW5jdGlvbigpe3RoaXMubW9kZWwuZ2V0KCJpbWFnZVBhZ2VzIik/aGlzdG9yeS5yZXBsYWNlU3RhdGUobnVsbCwiIix0aGlzLmN1cnJlbnQubW9kZWwuZ2V0KCJpbWFnZVBhZ2VQYXRoIikpOnRoaXMuX3NldEhhc2hiYW5nKHRoaXMuY3VycmVudC5tb2RlbC5pZCwiSW1hZ2UgIit0aGlzLmN1cnJlbnQubW9kZWwuaWQpLHRoaXMubW9kZWwudHJpZ2dlcigic2xpZGVyOm5ld0ltYWdlIix0aGlzLmN1cnJlbnQpLHRoaXMubmV4dD90aGlzLm5hdk5leHQucmVtb3ZlQ2xhc3MoInZpc3VhbGx5aGlkZGVuIik6dGhpcy5uYXZOZXh0LmFkZENsYXNzKCJ2aXN1YWxseWhpZGRlbiIpLHRoaXMucHJldj90aGlzLm5hdlByZXYucmVtb3ZlQ2xhc3MoInZpc3VhbGx5aGlkZGVuIik6dGhpcy5uYXZQcmV2LmFkZENsYXNzKCJ2aXN1YWxseWhpZGRlbiIpfSxfc2V0Q3VycmVudDpmdW5jdGlvbihhKXt0aGlzLm1vZGVsLnNldEN1cnJlbnQoYSk7dmFyIGI9dGhpcy5fbG9hZE9yR2V0TGFyZ2UoYSk7YiYmKHRoaXMuY3VycmVudD1iLHRoaXMuY3VycmVudEJveC5odG1sKHRoaXMuY3VycmVudC4kZWwpLHRoaXMuX2N1cnJlbnRDaGFuZ2VkKCksdGhpcy5fc2V0TmV4dCgpLHRoaXMuX3NldFByZXYoKSl9LF9zZXROZXh0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubmV4dD10aGlzLl9sb2FkT3JHZXRMYXJnZSh0aGlzLm1vZGVsLmdldE5leHQoKSksdGhpcy5uZXh0Pyh0aGlzLm5leHRCb3guaHRtbCh0aGlzLm5leHQuJGVsKSx0aGlzLm5hdk5leHQucmVtb3ZlQ2xhc3MoInZpc3VhbGx5aGlkZGVuIikpOnRoaXMubmF2TmV4dC5hZGRDbGFzcygidmlzdWFsbHloaWRkZW4iKSx0aGlzLm5leHR9LF9zZXRQcmV2OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHJldj10aGlzLl9sb2FkT3JHZXRMYXJnZSh0aGlzLm1vZGVsLmdldFByZXYoKSksdGhpcy5wcmV2Pyh0aGlzLnByZXZCb3guaHRtbCh0aGlzLnByZXYuJGVsKSx0aGlzLm5hdlByZXYucmVtb3ZlQ2xhc3MoInZpc3VhbGx5aGlkZGVuIikpOnRoaXMubmF2UHJldi5hZGRDbGFzcygidmlzdWFsbHloaWRkZW4iKSx0aGlzLnByZXZ9LF9sb2FkT3JHZXRMYXJnZTpmdW5jdGlvbihhKXtpZihhKXt2YXIgYj1hLmdldExhcmdlVmlldygpfHxuZXcgZih7bW9kZWw6YSxzbGlkZXI6dGhpc30pO3JldHVybiBiLnJlc2l6ZSgpLGJ9cmV0dXJuIHZvaWQgMH0scmVzaXplOmZ1bmN0aW9uKCl7dGhpcy5fc2V0RGltZW5zaW9ucygpLHRoaXMuY3VycmVudCYmdGhpcy5jdXJyZW50LnJlc2l6ZSgpLHRoaXMubmV4dCYmdGhpcy5uZXh0LnJlc2l6ZSgpLHRoaXMucHJldiYmdGhpcy5wcmV2LnJlc2l6ZSgpfSxfc2V0RGltZW5zaW9uczpmdW5jdGlvbigpe3RoaXMud2lkdGg9dGhpcy50cmF5LndpZHRoKCksdGhpcy5oZWlnaHQ9dGhpcy50cmF5LmhlaWdodCgpLHRoaXMucmF0aW89dGhpcy53aWR0aC90aGlzLmhlaWdodCx0aGlzLm9yaWVudGF0aW9uPXRoaXMucmF0aW8+MT8ibGFuZHNjYXBlIjoicG9ydHJhaXQifX0pO3JldHVybiBofSksYygiZ2FsbGVyeS92aWV3cy9zZWxlY3Rpb24vY29tcG9uZW50IixbImJhY2tib25lIl0sZnVuY3Rpb24oYSl7dmFyIGI9YS5WaWV3LmV4dGVuZCh7aW5pdGlhbGl6ZTpmdW5jdGlvbigpe3RoaXMuJGVsLmxlbmd0aCYmdGhpcy5jb2xsZWN0aW9uJiZ0aGlzLmxpc3RlblRvT25jZSh0aGlzLmNvbGxlY3Rpb24sInN5bmMiLHRoaXMuc2VsZWN0aW9uU3luY2VkKX0sc2VsZWN0aW9uU3luY2VkOmZ1bmN0aW9uKGEpe3RoaXMucmVuZGVyKCksdGhpcy5yZW5kZXJBY3RpdmUoYS5sZW5ndGg+MCksdGhpcy4kZWwuYWRkQ2xhc3MoImluaXRpYWxpemVkIiksdGhpcy5saXN0ZW5Ubyh0aGlzLmNvbGxlY3Rpb24sImFkZCIsdGhpcy5pdGVtQWRkZWQpLHRoaXMubGlzdGVuVG8odGhpcy5jb2xsZWN0aW9uLCJyZW1vdmUiLHRoaXMuaXRlbVJlbW92ZWQpfSxpdGVtQWRkZWQ6ZnVuY3Rpb24oYSxiLGMpezE9PT1iLmxlbmd0aCYmdGhpcy5yZW5kZXJBY3RpdmUoITApLHRoaXMuc2VsZWN0aW9uQ2hhbmdlZChjKX0saXRlbVJlbW92ZWQ6ZnVuY3Rpb24oYSxiLGMpezA9PT1iLmxlbmd0aCYmdGhpcy5yZW5kZXJBY3RpdmUoITEpLHRoaXMuc2VsZWN0aW9uQ2hhbmdlZChjKX0sc2VsZWN0aW9uQ2hhbmdlZDpmdW5jdGlvbigpe30scmVuZGVyQWN0aXZlOmZ1bmN0aW9uKGEpe2E/dGhpcy4kZWwuYWRkQ2xhc3MoImFjdGl2ZSIpOnRoaXMuJGVsLnJlbW92ZUNsYXNzKCJhY3RpdmUiKX19KTtyZXR1cm4gYn0pLGMoImdhbGxlcnkvdmlld3Mvc2VsZWN0aW9uL2luZGljYXRvciIsWyJiYWNrYm9uZSIsImdhbGxlcnkvdmlld3Mvc2VsZWN0aW9uL2NvbXBvbmVudCJdLGZ1bmN0aW9uKGEsYil7dmFyIGM9Yi5leHRlbmQoe2VsOiIuc2VsZWN0aW9uIC5pbmRpY2F0b3I6bm90KFtkYXRhLXNlbGVjdGlvbl0pIixzZWxlY3Rpb25DaGFuZ2VkOmZ1bmN0aW9uKCl7dGhpcy5yZW5kZXIoKX0scmVuZGVyOmZ1bmN0aW9uKCl7dGhpcy4kZWwuaHRtbCh0aGlzLmNvbGxlY3Rpb24ubGVuZ3RoKX19KTtyZXR1cm4gY30pLGMoImdhbGxlcnkvdmlld3Mvc2VsZWN0aW9uL3RvZ2dsZS5idXR0b24iLFsidW5kZXJzY29yZSIsImJhY2tib25lIiwiZ2FsbGVyeS92aWV3cy9zZWxlY3Rpb24vY29tcG9uZW50Il0sZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWMuZXh0ZW5kKHtlbDoiLnNlbGVjdGlvbiAuYnV0dG9uLnRvZ2dsZSIsZXZlbnRzOntjbGljazoidG9nZ2xlIn0sdG9nZ2xlOmZ1bmN0aW9uKCl7dGhpcy4kZWwuaGFzQ2xhc3MoImFjdGl2ZSIpJiZ0aGlzLmZpbHRlcigpfSxmaWx0ZXI6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmNvbGxlY3Rpb24uZ2FsbGVyeS5nZXQoImltYWdlcyIpO3RoaXMuJGVsLmhhc0NsYXNzKCJmaWx0ZXJlZCIpPyhhLnJlc2V0KHRoaXMudW5maWx0ZXJlZEltYWdlcy5tb2RlbHMpLHRoaXMudW5maWx0ZXJlZEltYWdlcz12b2lkIDApOih0aGlzLnVuZmlsdGVyZWRJbWFnZXM9bmV3IGIuQ29sbGVjdGlvbihhLm1vZGVscyksYS5yZXNldCh0aGlzLmNvbGxlY3Rpb24ubW9kZWxzKSksdGhpcy4kZWwudG9nZ2xlQ2xhc3MoImZpbHRlcmVkIil9LGl0ZW1SZW1vdmVkOmZ1bmN0aW9uKGEpe2lmKHRoaXMudW5maWx0ZXJlZEltYWdlcyl7dmFyIGI9dGhpcy51bmZpbHRlcmVkSW1hZ2VzLmdldChhLmlkKTtiJiZiLnNldCgic2VsZWN0ZWQiLCExKX1jLnByb3RvdHlwZS5pdGVtUmVtb3ZlZC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LHNlbGVjdGlvbkNoYW5nZWQ6ZnVuY3Rpb24oKXswPT09dGhpcy5jb2xsZWN0aW9uLmxlbmd0aCYmdGhpcy4kZWwuaGFzQ2xhc3MoImZpbHRlcmVkIikmJnRoaXMuZmlsdGVyKCl9fSk7cmV0dXJuIGR9KSxjKCJnYWxsZXJ5L3ZpZXdzL3NlbGVjdGlvbi9wZGYuYnV0dG9uIixbImJhY2tib25lIiwiZ2FsbGVyeS92aWV3cy9zZWxlY3Rpb24vY29tcG9uZW50Il0sZnVuY3Rpb24oYSxiKXt2YXIgYz1iLmV4dGVuZCh7ZWw6Ii5zZWxlY3Rpb24gLmJ1dHRvbi5wZGYiLGV2ZW50czp7Y2xpY2s6ImRvd25sb2FkQ2xpY2sifSxpbml0aWFsaXplOmZ1bmN0aW9uKCl7dGhpcy4kZWwubGVuZ3RoJiZ0aGlzLmNvbGxlY3Rpb24mJih0aGlzLmZvbGlvRGF0YT17fSx0aGlzLmZvbGlvRGF0YS51cmw9dGhpcy4kZWwuZGF0YSgidXJsIiksdGhpcy5mb2xpb0RhdGEudGl0bGU9dGhpcy4kZWwuZGF0YSgidGl0bGUiKSx0aGlzLmZvbGlvRGF0YS5rZXk9dGhpcy4kZWwuZGF0YSgia2V5IiksdGhpcy5mb2xpb0RhdGEudGVtcGxhdGU9dGhpcy4kZWwuZGF0YSgidGVtcGxhdGUiKSxiLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9LGRvd25sb2FkQ2xpY2s6ZnVuY3Rpb24oKXt0aGlzLiRlbC5oYXNDbGFzcygiYWN0aXZlIikmJih0aGlzLnJlbmRlckxvYWRpbmcoKSwkLmFqYXgoe3R5cGU6IlBPU1QiLHVybDp0aGlzLmZvbGlvRGF0YS51cmwsZGF0YTpKU09OLnN0cmluZ2lmeSh0aGlzLmdldFBkZkdlblBheWxvYWQoKSksc3VjY2VzczpmdW5jdGlvbihhKXthLmZvbGlvLmV4aXN0cz8odGhpcy5kb3dubG9hZFBkZihhLmZvbGlvLnVybCksdGhpcy5yZW5kZXJBY3RpdmUodGhpcy5jb2xsZWN0aW9uLmxlbmd0aD4wKSk6dGhpcy50cnlBZ2FpbihhLmZvbGlvLnVybCwxNTAwKX0uYmluZCh0aGlzKSxlcnJvcjpmdW5jdGlvbihhKXt0aGlzLnJlbmRlckVycm9yKCksY29uc29sZS5sb2coIlNvbWV0aGluZyB3ZW50IHdyb25nIHdoaWxlIGdlbmVyYXRpbmcgdGhlIFBERiEiLGEpfS5iaW5kKHRoaXMpLGNvbnRlbnRUeXBlOiJhcHBsaWNhdGlvbi9qc29uIixkYXRhVHlwZToianNvbiJ9KSl9LHRyeUFnYWluOmZ1bmN0aW9uKGEsYil7JC5hamF4KHt0eXBlOiJIRUFEIix1cmw6YSxzdWNjZXNzOmZ1bmN0aW9uKCl7d2luZG93LmNsZWFyVGltZW91dCh0aGlzLnRpbWVvdXRJZCksdGhpcy5kb3dubG9hZFBkZihhKSx0aGlzLnJlbmRlckFjdGl2ZSh0aGlzLmNvbGxlY3Rpb24ubGVuZ3RoPjApfS5iaW5kKHRoaXMpLGVycm9yOmZ1bmN0aW9uKCl7d2luZG93LmNsZWFyVGltZW91dCh0aGlzLnRpbWVvdXRJZCksdGhpcy50aW1lb3V0SWQ9c2V0VGltZW91dChmdW5jdGlvbigpe3RoaXMudHJ5QWdhaW4oYSxiKX0uYmluZCh0aGlzKSxiKX0uYmluZCh0aGlzKX0pfSxkb3dubG9hZFBkZjpmdW5jdGlvbihhKXt3aW5kb3cubG9jYXRpb24uaHJlZj1hfSxnZXRQZGZHZW5QYXlsb2FkOmZ1bmN0aW9uKCl7dmFyIGE9e3RpdGxlOnRoaXMuZm9saW9EYXRhLnRpdGxlLGtleTp0aGlzLmZvbGlvRGF0YS5rZXksdGVtcGxhdGU6dGhpcy5mb2xpb0RhdGEudGVtcGxhdGUsaW1hZ2VzOltdfTtyZXR1cm4gdGhpcy5jb2xsZWN0aW9uLmVhY2goZnVuY3Rpb24oYil7YS5pbWFnZXMucHVzaCh7dXJsOmIuZ2V0KCJsYXJnZSIpLnNyY30pfSkse2ZvbGlvOmF9fSxyZW5kZXJFcnJvcjpmdW5jdGlvbigpe3RoaXMuJGVsLnJlbW92ZUNsYXNzKCJsb2FkaW5nIGFjdGl2ZSIpLHRoaXMuJGVsLmFkZENsYXNzKCJlcnJvciIpLHRoaXMuJGVsLmh0bWwoIkRvd25sb2FkIFBERiIpLHRoaXMuJGVsLmF0dHIoInRpdGxlIiwiU29tZXRoaW5nIHdlbnQgd3Jvbmc6IFNlcnZlciBFcnJvciEgVHJ5IGFnYWluIGluIGEgbW9tZW50Iil9LHJlbmRlckxvYWRpbmc6ZnVuY3Rpb24oKXt0aGlzLiRlbC5odG1sKCJMb2FkaW5nIFBERiIpLHRoaXMuJGVsLnJlbW92ZUNsYXNzKCJhY3RpdmUiKSx0aGlzLiRlbC5hZGRDbGFzcygibG9hZGluZyIpfSxyZW5kZXJBY3RpdmU6ZnVuY3Rpb24oKXt0aGlzLiRlbC5odG1sKCJEb3dubG9hZCBQREYiKSx0aGlzLiRlbC5yZW1vdmVDbGFzcygibG9hZGluZyIpLGIucHJvdG90eXBlLnJlbmRlckFjdGl2ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fSk7cmV0dXJuIGN9KSxjKCJnYWxsZXJ5L2FwcCIsWyJiYWNrYm9uZSIsInVuZGVyc2NvcmUiLCJnYWxsZXJ5L21vZGVscy9nYWxsZXJ5LmZhY3RvcnkiLCJnYWxsZXJ5L3ZpZXdzL3RodW1iLmNvbnRhaW5lci5tYXNvbnJ5IiwiZ2FsbGVyeS92aWV3cy90aHVtYi5jb250YWluZXIuZHluYW1pYyIsImdhbGxlcnkvdmlld3MvdGh1bWIuY29udGFpbmVyLmR5bmFtaWMubWFzb25yeSIsImdhbGxlcnkvdmlld3Mvc2xpZGVyLnZpZXciLCJnYWxsZXJ5L3V0aWxzL3Jlc3BvbnNpdmUuYWRhcHRlciIsImdhbGxlcnkvY29sbGVjdGlvbnMvc2VsZWN0aW9uLmNvbGxlY3Rpb24iLCJnYWxsZXJ5L3ZpZXdzL3NlbGVjdGlvbi9jb21wb25lbnQiLCJnYWxsZXJ5L3ZpZXdzL3NlbGVjdGlvbi9pbmRpY2F0b3IiLCJnYWxsZXJ5L3ZpZXdzL3NlbGVjdGlvbi90b2dnbGUuYnV0dG9uIiwiZ2FsbGVyeS92aWV3cy9zZWxlY3Rpb24vcGRmLmJ1dHRvbiJdLGZ1bmN0aW9uKGEsYixjLGQsZSxmLGcsaCxpLGosayxsLG0pe3ZhciBuPWEuVmlldy5leHRlbmQoe2VsOiJhcnRpY2xlLmdhbGxlcnkiLGRlZmF1bHRPcHRzOntsYXlvdXQ6Im1hc29ucnkifSxpbml0aWFsaXplOmZ1bmN0aW9uKGEpe3RoaXMuJGVsLmRhdGEoImdhbC1sYXlvdXQiKSYmKHRoaXMuZGVmYXVsdE9wdHMubGF5b3V0PXRoaXMuJGVsLmRhdGEoImdhbC1sYXlvdXQiKSksdGhpcy5vcHRpb25zPWIuZXh0ZW5kKHt9LHRoaXMuZGVmYXVsdE9wdHMsdGhpcy5vcHRpb25zKSx0aGlzLm1vZGVsPWMuY3JlYXRlKHRoaXMuJGVsLGEuZ2FsbGVyeU9wdHMpLHRoaXMuaW5pdFNlbGVjdGlvbigpLHRoaXMubW9kZWwmJih0aGlzLmluaXRUaHVtYkNvbnRhaW5lcigpLHRoaXMubW9kZWwuZmV0Y2goe3N1Y2Nlc3M6Yi5iaW5kKGZ1bmN0aW9uKGIpe3ZhciBjPXRoaXMuJGVsO2MuYWRkQ2xhc3MoImluaXRpYWxpemVkIiksYi5nZXQoImltYWdlcyIpLmlzRW1wdHkoKSYmYy5hZGRDbGFzcygiZW1wdHkiKSx0aGlzLmxpc3RlblRvKGIuZ2V0KCJpbWFnZXMiKSwicmVtb3ZlIixmdW5jdGlvbihhLGIpe2IuaXNFbXB0eSgpJiZjLmFkZENsYXNzKCJlbXB0eSIpfSksYS5vbkluaXQmJmEub25Jbml0KHRoaXMsdGhpcy5tb2RlbCl9LHRoaXMpfSksdGhpcy5pbml0U2xpZGVyKCksdGhpcy4kZWwuZGF0YSgiZ2FsbGVyeSIsdGhpcykpfSxpbml0U2VsZWN0aW9uOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy4kZWwuZGF0YSgiZ2FsLXNlbGVjdGlvbiIpO2EmJih0aGlzLnNlbGVjdGlvbj1pLmdldCh0aGlzLiRlbC5kYXRhKCJnYWwtc2VsZWN0aW9uIiksdGhpcy5tb2RlbCksdGhpcy5zZWxlY3Rpb25JbmRpY2F0b3I9bmV3IGsoe2NvbGxlY3Rpb246dGhpcy5zZWxlY3Rpb259KSx0aGlzLnNlbGVjdGlvblRvZ2dsZUJ1dHRvbj1uZXcgbCh7Y29sbGVjdGlvbjp0aGlzLnNlbGVjdGlvbn0pLHRoaXMuc2VsZWN0aW9uUGRmQnV0dG9uPW5ldyBtKHtjb2xsZWN0aW9uOnRoaXMuc2VsZWN0aW9ufSksbmV3IGooe2VsOiQoIi5zZWxlY3Rpb24gLmNvbXBvbmVudCIpLGNvbGxlY3Rpb246dGhpcy5zZWxlY3Rpb259KSk7dmFyIGM9e307JCgiW2RhdGEtc2VsZWN0aW9uXS5pbmRpY2F0b3IiKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIGE9JCh0aGlzKTtjW2EuZGF0YSgic2VsZWN0aW9uIildPXZvaWQgMD09PWNbYS5kYXRhKCJzZWxlY3Rpb24iKV0/YTpjW2EuZGF0YSgic2VsZWN0aW9uIildLmFkZChhKX0pLGIuZWFjaChjLGZ1bmN0aW9uKGEsYil7dmFyIGM9aS5nZXQoYix0aGlzLm1vZGVsKTtuZXcgayh7Y29sbGVjdGlvbjpjLGVsOmF9KSx2b2lkIDA9PT1jLmdhbGxlcnkmJmMuZmV0Y2goKX0sdGhpcyl9LGluaXRUaHVtYkNvbnRhaW5lcjpmdW5jdGlvbigpe3ZhciBhPXttb2RlbDp0aGlzLm1vZGVsLGl0ZW1TZWxlY3RvcjoiLnBob3RvIn07dGhpcy5jb250YWluZXJWaWV3PXRoaXMuJCgiLmNvbnRhaW5lci5waG90b3MgLnBob3RvIikubGVuZ3RoP25ldyBkKGEpOiJub25lIj09PXRoaXMub3B0aW9ucy5sYXlvdXQ/bmV3IGUoYSk6bmV3IGYoYSl9LGluaXRTbGlkZXI6ZnVuY3Rpb24oKXt0aGlzLnNsaWRlclZpZXc9bmV3IGcoe2VsOnRoaXMuJCgiLnNsaWRlciIpLG1vZGVsOnRoaXMubW9kZWx9KX0sZ2V0UmVzcG9uc2l2ZUFkYXB0ZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdm9pZCAwPT09dGhpcy5yZXNwb25zaXZlQWRhcHRlciYmKHRoaXMucmVzcG9uc2l2ZUFkYXB0ZXI9aCksdGhpcy5yZXNwb25zaXZlQWRhcHRlcn19KTtyZXR1cm4gbn0pLGMoImpxdWVyeSIsW10sZnVuY3Rpb24oKXtyZXR1cm4galF1ZXJ5fSksYigiZ2FsbGVyeS9hcHAiKX0pOw==",
                "body": "LyohCiAqIGdhbGxlcnkuanMgdjEuMS4xLCAoYykgMjAxNCBTbnIgQnJuam5hIDxzbnJAYnJuam5hLm5ldD4sIGxpY2VuY2VkIHVuZGVyIG1vZGlmaWVkIE1JVAogKiBzZWUgaHR0cHM6Ly9naXRodWIuY29tL3NucmJybmpuYS9nYWxsZXJ5anMuZ2l0CiAqLwohZnVuY3Rpb24oYSxiKXsiZnVuY3Rpb24iPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShbXSxiKTphLkdhbGxlcnlBcHA9YigpfSh0aGlzLGZ1bmN0aW9uKCl7LyoqCiAqIEBsaWNlbnNlIGFsbW9uZCAwLjIuOSBDb3B5cmlnaHQgKGMpIDIwMTEtMjAxNCwgVGhlIERvam8gRm91bmRhdGlvbiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiBBdmFpbGFibGUgdmlhIHRoZSBNSVQgb3IgbmV3IEJTRCBsaWNlbnNlLgogKiBzZWU6IGh0dHA6Ly9naXRodWIuY29tL2pyYnVya2UvYWxtb25kIGZvciBkZXRhaWxzCiAqLwp2YXIgYSxiLGM7LyohCiAqIGV2ZW50aWUgdjEuMC41CiAqIGV2ZW50IGJpbmRpbmcgaGVscGVyCiAqICAgZXZlbnRpZS5iaW5kKCBlbGVtLCAnY2xpY2snLCBteUZuICkKICogICBldmVudGllLnVuYmluZCggZWxlbSwgJ2NsaWNrJywgbXlGbiApCiAqIE1JVCBsaWNlbnNlCiAqLwovKiEKICogZG9jUmVhZHkgdjEuMC4zCiAqIENyb3NzIGJyb3dzZXIgRE9NQ29udGVudExvYWRlZCBldmVudCBlbWl0dGVyCiAqIE1JVCBsaWNlbnNlCiAqLwovKiEKICogRXZlbnRFbWl0dGVyIHY0LjIuOCAtIGdpdC5pby9lZQogKiBPbGl2ZXIgQ2FsZHdlbGwKICogTUlUIGxpY2Vuc2UKICogQHByZXNlcnZlCiAqLwovKiEKICogZ2V0U3R5bGVQcm9wZXJ0eSB2MS4wLjMKICogb3JpZ2luYWwgYnkga2FuZ2F4CiAqIGh0dHA6Ly9wZXJmZWN0aW9ua2lsbHMuY29tL2ZlYXR1cmUtdGVzdGluZy1jc3MtcHJvcGVydGllcy8KICovCi8qIQogKiBPdXRsYXllciB2MS4yLjAKICogdGhlIGJyYWlucyBhbmQgZ3V0cyBvZiBhIGxheW91dCBsaWJyYXJ5CiAqIE1JVCBsaWNlbnNlCiAqLwovKiEKICogTWFzb25yeSB2My4xLjUKICogQ2FzY2FkaW5nIGdyaWQgbGF5b3V0IGxpYnJhcnkKICogaHR0cDovL21hc29ucnkuZGVzYW5kcm8uY29tCiAqIE1JVCBMaWNlbnNlCiAqIGJ5IERhdmlkIERlU2FuZHJvCiAqLwovKiEKICogRmx1aWQgTWFzb25yeSB2MS4wLjEKICogZXh0ZW5kcyB0aGUgY2FzY2FkaW5nIGdyaWQgbGF5b3V0IGxpYnJhcnkgb2YKICogaHR0cDovL21hc29ucnkuZGVzYW5kcm8uY29tIGJ5IGZpbGxpbmcgdXAgdGhlIGNvbnRhaW5lciBpbiBpdHMgZnVsbCB3aWR0aC4KICogTUlUIExpY2Vuc2UKICovCi8qIQogKiBpbWFnZXNMb2FkZWQgdjMuMS44CiAqIEphdmFTY3JpcHQgaXMgYWxsIGxpa2UgIllvdSBpbWFnZXMgYXJlIGRvbmUgeWV0IG9yIHdoYXQ/IgogKiBNSVQgTGljZW5zZQogKi8KcmV0dXJuIGZ1bmN0aW9uKGQpe2Z1bmN0aW9uIGUoYSxiKXtyZXR1cm4gdS5jYWxsKGEsYil9ZnVuY3Rpb24gZihhLGIpe3ZhciBjLGQsZSxmLGcsaCxpLGosayxsLG0sbj1iJiZiLnNwbGl0KCIvIiksbz1zLm1hcCxwPW8mJm9bIioiXXx8e307aWYoYSYmIi4iPT09YS5jaGFyQXQoMCkpaWYoYil7Zm9yKG49bi5zbGljZSgwLG4ubGVuZ3RoLTEpLGE9YS5zcGxpdCgiLyIpLGc9YS5sZW5ndGgtMSxzLm5vZGVJZENvbXBhdCYmdy50ZXN0KGFbZ10pJiYoYVtnXT1hW2ddLnJlcGxhY2UodywiIikpLGE9bi5jb25jYXQoYSksaz0wO2s8YS5sZW5ndGg7ays9MSlpZihtPWFba10sIi4iPT09bSlhLnNwbGljZShrLDEpLGstPTE7ZWxzZSBpZigiLi4iPT09bSl7aWYoMT09PWsmJigiLi4iPT09YVsyXXx8Ii4uIj09PWFbMF0pKWJyZWFrO2s+MCYmKGEuc3BsaWNlKGstMSwyKSxrLT0yKX1hPWEuam9pbigiLyIpfWVsc2UgMD09PWEuaW5kZXhPZigiLi8iKSYmKGE9YS5zdWJzdHJpbmcoMikpO2lmKChufHxwKSYmbyl7Zm9yKGM9YS5zcGxpdCgiLyIpLGs9Yy5sZW5ndGg7az4wO2stPTEpe2lmKGQ9Yy5zbGljZSgwLGspLmpvaW4oIi8iKSxuKWZvcihsPW4ubGVuZ3RoO2w+MDtsLT0xKWlmKGU9b1tuLnNsaWNlKDAsbCkuam9pbigiLyIpXSxlJiYoZT1lW2RdKSl7Zj1lLGg9azticmVha31pZihmKWJyZWFrOyFpJiZwJiZwW2RdJiYoaT1wW2RdLGo9ayl9IWYmJmkmJihmPWksaD1qKSxmJiYoYy5zcGxpY2UoMCxoLGYpLGE9Yy5qb2luKCIvIikpfXJldHVybiBhfWZ1bmN0aW9uIGcoYSxiKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gbi5hcHBseShkLHYuY2FsbChhcmd1bWVudHMsMCkuY29uY2F0KFthLGJdKSl9fWZ1bmN0aW9uIGgoYSl7cmV0dXJuIGZ1bmN0aW9uKGIpe3JldHVybiBmKGIsYSl9fWZ1bmN0aW9uIGkoYSl7cmV0dXJuIGZ1bmN0aW9uKGIpe3FbYV09Yn19ZnVuY3Rpb24gaihhKXtpZihlKHIsYSkpe3ZhciBiPXJbYV07ZGVsZXRlIHJbYV0sdFthXT0hMCxtLmFwcGx5KGQsYil9aWYoIWUocSxhKSYmIWUodCxhKSl0aHJvdyBuZXcgRXJyb3IoIk5vICIrYSk7cmV0dXJuIHFbYV19ZnVuY3Rpb24gayhhKXt2YXIgYixjPWE/YS5pbmRleE9mKCIhIik6LTE7cmV0dXJuIGM+LTEmJihiPWEuc3Vic3RyaW5nKDAsYyksYT1hLnN1YnN0cmluZyhjKzEsYS5sZW5ndGgpKSxbYixhXX1mdW5jdGlvbiBsKGEpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBzJiZzLmNvbmZpZyYmcy5jb25maWdbYV18fHt9fX12YXIgbSxuLG8scCxxPXt9LHI9e30scz17fSx0PXt9LHU9T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eSx2PVtdLnNsaWNlLHc9L1wuanMkLztvPWZ1bmN0aW9uKGEsYil7dmFyIGMsZD1rKGEpLGU9ZFswXTtyZXR1cm4gYT1kWzFdLGUmJihlPWYoZSxiKSxjPWooZSkpLGU/YT1jJiZjLm5vcm1hbGl6ZT9jLm5vcm1hbGl6ZShhLGgoYikpOmYoYSxiKTooYT1mKGEsYiksZD1rKGEpLGU9ZFswXSxhPWRbMV0sZSYmKGM9aihlKSkpLHtmOmU/ZSsiISIrYTphLG46YSxwcjplLHA6Y319LHA9e3JlcXVpcmU6ZnVuY3Rpb24oYSl7cmV0dXJuIGcoYSl9LGV4cG9ydHM6ZnVuY3Rpb24oYSl7dmFyIGI9cVthXTtyZXR1cm4idW5kZWZpbmVkIiE9dHlwZW9mIGI/YjpxW2FdPXt9fSxtb2R1bGU6ZnVuY3Rpb24oYSl7cmV0dXJue2lkOmEsdXJpOiIiLGV4cG9ydHM6cVthXSxjb25maWc6bChhKX19fSxtPWZ1bmN0aW9uKGEsYixjLGYpe3ZhciBoLGssbCxtLG4scyx1PVtdLHY9dHlwZW9mIGM7aWYoZj1mfHxhLCJ1bmRlZmluZWQiPT09dnx8ImZ1bmN0aW9uIj09PXYpe2ZvcihiPSFiLmxlbmd0aCYmYy5sZW5ndGg/WyJyZXF1aXJlIiwiZXhwb3J0cyIsIm1vZHVsZSJdOmIsbj0wO248Yi5sZW5ndGg7bis9MSlpZihtPW8oYltuXSxmKSxrPW0uZiwicmVxdWlyZSI9PT1rKXVbbl09cC5yZXF1aXJlKGEpO2Vsc2UgaWYoImV4cG9ydHMiPT09ayl1W25dPXAuZXhwb3J0cyhhKSxzPSEwO2Vsc2UgaWYoIm1vZHVsZSI9PT1rKWg9dVtuXT1wLm1vZHVsZShhKTtlbHNlIGlmKGUocSxrKXx8ZShyLGspfHxlKHQsaykpdVtuXT1qKGspO2Vsc2V7aWYoIW0ucCl0aHJvdyBuZXcgRXJyb3IoYSsiIG1pc3NpbmcgIitrKTttLnAubG9hZChtLm4sZyhmLCEwKSxpKGspLHt9KSx1W25dPXFba119bD1jP2MuYXBwbHkocVthXSx1KTp2b2lkIDAsYSYmKGgmJmguZXhwb3J0cyE9PWQmJmguZXhwb3J0cyE9PXFbYV0/cVthXT1oLmV4cG9ydHM6bD09PWQmJnN8fChxW2FdPWwpKX1lbHNlIGEmJihxW2FdPWMpfSxhPWI9bj1mdW5jdGlvbihhLGIsYyxlLGYpe2lmKCJzdHJpbmciPT10eXBlb2YgYSlyZXR1cm4gcFthXT9wW2FdKGIpOmoobyhhLGIpLmYpO2lmKCFhLnNwbGljZSl7aWYocz1hLHMuZGVwcyYmbihzLmRlcHMscy5jYWxsYmFjayksIWIpcmV0dXJuO2Iuc3BsaWNlPyhhPWIsYj1jLGM9bnVsbCk6YT1kfXJldHVybiBiPWJ8fGZ1bmN0aW9uKCl7fSwiZnVuY3Rpb24iPT10eXBlb2YgYyYmKGM9ZSxlPWYpLGU/bShkLGEsYixjKTpzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7bShkLGEsYixjKX0sNCksbn0sbi5jb25maWc9ZnVuY3Rpb24oYSl7cmV0dXJuIG4oYSl9LGEuX2RlZmluZWQ9cSxjPWZ1bmN0aW9uKGEsYixjKXtiLnNwbGljZXx8KGM9YixiPVtdKSxlKHEsYSl8fGUocixhKXx8KHJbYV09W2EsYixjXSl9LGMuYW1kPXtqUXVlcnk6ITB9fSgpLGMoImFsbW9uZCIsZnVuY3Rpb24oKXt9KSxmdW5jdGlvbigpe3ZhciBhPXRoaXMsYj1hLl8sYz17fSxkPUFycmF5LnByb3RvdHlwZSxlPU9iamVjdC5wcm90b3R5cGUsZj1GdW5jdGlvbi5wcm90b3R5cGUsZz1kLnB1c2gsaD1kLnNsaWNlLGk9ZC5jb25jYXQsaj1lLnRvU3RyaW5nLGs9ZS5oYXNPd25Qcm9wZXJ0eSxsPWQuZm9yRWFjaCxtPWQubWFwLG49ZC5yZWR1Y2Usbz1kLnJlZHVjZVJpZ2h0LHA9ZC5maWx0ZXIscT1kLmV2ZXJ5LHI9ZC5zb21lLHM9ZC5pbmRleE9mLHQ9ZC5sYXN0SW5kZXhPZix1PUFycmF5LmlzQXJyYXksdj1PYmplY3Qua2V5cyx3PWYuYmluZCx4PWZ1bmN0aW9uKGEpe3JldHVybiBhIGluc3RhbmNlb2YgeD9hOnRoaXMgaW5zdGFuY2VvZiB4P3ZvaWQodGhpcy5fd3JhcHBlZD1hKTpuZXcgeChhKX07InVuZGVmaW5lZCIhPXR5cGVvZiBleHBvcnRzPygidW5kZWZpbmVkIiE9dHlwZW9mIG1vZHVsZSYmbW9kdWxlLmV4cG9ydHMmJihleHBvcnRzPW1vZHVsZS5leHBvcnRzPXgpLGV4cG9ydHMuXz14KTphLl89eCx4LlZFUlNJT049IjEuNC40Ijt2YXIgeT14LmVhY2g9eC5mb3JFYWNoPWZ1bmN0aW9uKGEsYixkKXtpZihudWxsIT1hKWlmKGwmJmEuZm9yRWFjaD09PWwpYS5mb3JFYWNoKGIsZCk7ZWxzZSBpZihhLmxlbmd0aD09PSthLmxlbmd0aCl7Zm9yKHZhciBlPTAsZj1hLmxlbmd0aDtmPmU7ZSsrKWlmKGIuY2FsbChkLGFbZV0sZSxhKT09PWMpcmV0dXJufWVsc2UgZm9yKHZhciBnIGluIGEpaWYoeC5oYXMoYSxnKSYmYi5jYWxsKGQsYVtnXSxnLGEpPT09YylyZXR1cm59O3gubWFwPXguY29sbGVjdD1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9W107cmV0dXJuIG51bGw9PWE/ZDptJiZhLm1hcD09PW0/YS5tYXAoYixjKTooeShhLGZ1bmN0aW9uKGEsZSxmKXtkW2QubGVuZ3RoXT1iLmNhbGwoYyxhLGUsZil9KSxkKX07dmFyIHo9IlJlZHVjZSBvZiBlbXB0eSBhcnJheSB3aXRoIG5vIGluaXRpYWwgdmFsdWUiO3gucmVkdWNlPXguZm9sZGw9eC5pbmplY3Q9ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9YXJndW1lbnRzLmxlbmd0aD4yO2lmKG51bGw9PWEmJihhPVtdKSxuJiZhLnJlZHVjZT09PW4pcmV0dXJuIGQmJihiPXguYmluZChiLGQpKSxlP2EucmVkdWNlKGIsYyk6YS5yZWR1Y2UoYik7aWYoeShhLGZ1bmN0aW9uKGEsZixnKXtlP2M9Yi5jYWxsKGQsYyxhLGYsZyk6KGM9YSxlPSEwKX0pLCFlKXRocm93IG5ldyBUeXBlRXJyb3Ioeik7cmV0dXJuIGN9LHgucmVkdWNlUmlnaHQ9eC5mb2xkcj1mdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1hcmd1bWVudHMubGVuZ3RoPjI7aWYobnVsbD09YSYmKGE9W10pLG8mJmEucmVkdWNlUmlnaHQ9PT1vKXJldHVybiBkJiYoYj14LmJpbmQoYixkKSksZT9hLnJlZHVjZVJpZ2h0KGIsYyk6YS5yZWR1Y2VSaWdodChiKTt2YXIgZj1hLmxlbmd0aDtpZihmIT09K2Ype3ZhciBnPXgua2V5cyhhKTtmPWcubGVuZ3RofWlmKHkoYSxmdW5jdGlvbihoLGksail7aT1nP2dbLS1mXTotLWYsZT9jPWIuY2FsbChkLGMsYVtpXSxpLGopOihjPWFbaV0sZT0hMCl9KSwhZSl0aHJvdyBuZXcgVHlwZUVycm9yKHopO3JldHVybiBjfSx4LmZpbmQ9eC5kZXRlY3Q9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkO3JldHVybiBBKGEsZnVuY3Rpb24oYSxlLGYpe3JldHVybiBiLmNhbGwoYyxhLGUsZik/KGQ9YSwhMCk6dm9pZCAwfSksZH0seC5maWx0ZXI9eC5zZWxlY3Q9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPVtdO3JldHVybiBudWxsPT1hP2Q6cCYmYS5maWx0ZXI9PT1wP2EuZmlsdGVyKGIsYyk6KHkoYSxmdW5jdGlvbihhLGUsZil7Yi5jYWxsKGMsYSxlLGYpJiYoZFtkLmxlbmd0aF09YSl9KSxkKX0seC5yZWplY3Q9ZnVuY3Rpb24oYSxiLGMpe3JldHVybiB4LmZpbHRlcihhLGZ1bmN0aW9uKGEsZCxlKXtyZXR1cm4hYi5jYWxsKGMsYSxkLGUpfSxjKX0seC5ldmVyeT14LmFsbD1mdW5jdGlvbihhLGIsZCl7Ynx8KGI9eC5pZGVudGl0eSk7dmFyIGU9ITA7cmV0dXJuIG51bGw9PWE/ZTpxJiZhLmV2ZXJ5PT09cT9hLmV2ZXJ5KGIsZCk6KHkoYSxmdW5jdGlvbihhLGYsZyl7cmV0dXJuKGU9ZSYmYi5jYWxsKGQsYSxmLGcpKT92b2lkIDA6Y30pLCEhZSl9O3ZhciBBPXguc29tZT14LmFueT1mdW5jdGlvbihhLGIsZCl7Ynx8KGI9eC5pZGVudGl0eSk7dmFyIGU9ITE7cmV0dXJuIG51bGw9PWE/ZTpyJiZhLnNvbWU9PT1yP2Euc29tZShiLGQpOih5KGEsZnVuY3Rpb24oYSxmLGcpe3JldHVybiBlfHwoZT1iLmNhbGwoZCxhLGYsZykpP2M6dm9pZCAwfSksISFlKX07eC5jb250YWlucz14LmluY2x1ZGU9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbnVsbD09YT8hMTpzJiZhLmluZGV4T2Y9PT1zPy0xIT1hLmluZGV4T2YoYik6QShhLGZ1bmN0aW9uKGEpe3JldHVybiBhPT09Yn0pfSx4Lmludm9rZT1mdW5jdGlvbihhLGIpe3ZhciBjPWguY2FsbChhcmd1bWVudHMsMiksZD14LmlzRnVuY3Rpb24oYik7cmV0dXJuIHgubWFwKGEsZnVuY3Rpb24oYSl7cmV0dXJuKGQ/YjphW2JdKS5hcHBseShhLGMpfSl9LHgucGx1Y2s9ZnVuY3Rpb24oYSxiKXtyZXR1cm4geC5tYXAoYSxmdW5jdGlvbihhKXtyZXR1cm4gYVtiXX0pfSx4LndoZXJlPWZ1bmN0aW9uKGEsYixjKXtyZXR1cm4geC5pc0VtcHR5KGIpP2M/bnVsbDpbXTp4W2M/ImZpbmQiOiJmaWx0ZXIiXShhLGZ1bmN0aW9uKGEpe2Zvcih2YXIgYyBpbiBiKWlmKGJbY10hPT1hW2NdKXJldHVybiExO3JldHVybiEwfSl9LHguZmluZFdoZXJlPWZ1bmN0aW9uKGEsYil7cmV0dXJuIHgud2hlcmUoYSxiLCEwKX0seC5tYXg9ZnVuY3Rpb24oYSxiLGMpe2lmKCFiJiZ4LmlzQXJyYXkoYSkmJmFbMF09PT0rYVswXSYmYS5sZW5ndGg8NjU1MzUpcmV0dXJuIE1hdGgubWF4LmFwcGx5KE1hdGgsYSk7aWYoIWImJnguaXNFbXB0eShhKSlyZXR1cm4tMS8wO3ZhciBkPXtjb21wdXRlZDotMS8wLHZhbHVlOi0xLzB9O3JldHVybiB5KGEsZnVuY3Rpb24oYSxlLGYpe3ZhciBnPWI/Yi5jYWxsKGMsYSxlLGYpOmE7Zz49ZC5jb21wdXRlZCYmKGQ9e3ZhbHVlOmEsY29tcHV0ZWQ6Z30pfSksZC52YWx1ZX0seC5taW49ZnVuY3Rpb24oYSxiLGMpe2lmKCFiJiZ4LmlzQXJyYXkoYSkmJmFbMF09PT0rYVswXSYmYS5sZW5ndGg8NjU1MzUpcmV0dXJuIE1hdGgubWluLmFwcGx5KE1hdGgsYSk7aWYoIWImJnguaXNFbXB0eShhKSlyZXR1cm4gMS8wO3ZhciBkPXtjb21wdXRlZDoxLzAsdmFsdWU6MS8wfTtyZXR1cm4geShhLGZ1bmN0aW9uKGEsZSxmKXt2YXIgZz1iP2IuY2FsbChjLGEsZSxmKTphO2c8ZC5jb21wdXRlZCYmKGQ9e3ZhbHVlOmEsY29tcHV0ZWQ6Z30pfSksZC52YWx1ZX0seC5zaHVmZmxlPWZ1bmN0aW9uKGEpe3ZhciBiLGM9MCxkPVtdO3JldHVybiB5KGEsZnVuY3Rpb24oYSl7Yj14LnJhbmRvbShjKyspLGRbYy0xXT1kW2JdLGRbYl09YX0pLGR9O3ZhciBCPWZ1bmN0aW9uKGEpe3JldHVybiB4LmlzRnVuY3Rpb24oYSk/YTpmdW5jdGlvbihiKXtyZXR1cm4gYlthXX19O3guc29ydEJ5PWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1CKGIpO3JldHVybiB4LnBsdWNrKHgubWFwKGEsZnVuY3Rpb24oYSxiLGUpe3JldHVybnt2YWx1ZTphLGluZGV4OmIsY3JpdGVyaWE6ZC5jYWxsKGMsYSxiLGUpfX0pLnNvcnQoZnVuY3Rpb24oYSxiKXt2YXIgYz1hLmNyaXRlcmlhLGQ9Yi5jcml0ZXJpYTtpZihjIT09ZCl7aWYoYz5kfHx2b2lkIDA9PT1jKXJldHVybiAxO2lmKGQ+Y3x8dm9pZCAwPT09ZClyZXR1cm4tMX1yZXR1cm4gYS5pbmRleDxiLmluZGV4Py0xOjF9KSwidmFsdWUiKX07dmFyIEM9ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9e30sZj1CKGJ8fHguaWRlbnRpdHkpO3JldHVybiB5KGEsZnVuY3Rpb24oYixnKXt2YXIgaD1mLmNhbGwoYyxiLGcsYSk7ZChlLGgsYil9KSxlfTt4Lmdyb3VwQnk9ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBDKGEsYixjLGZ1bmN0aW9uKGEsYixjKXsoeC5oYXMoYSxiKT9hW2JdOmFbYl09W10pLnB1c2goYyl9KX0seC5jb3VudEJ5PWZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gQyhhLGIsYyxmdW5jdGlvbihhLGIpe3guaGFzKGEsYil8fChhW2JdPTApLGFbYl0rK30pfSx4LnNvcnRlZEluZGV4PWZ1bmN0aW9uKGEsYixjLGQpe2M9bnVsbD09Yz94LmlkZW50aXR5OkIoYyk7Zm9yKHZhciBlPWMuY2FsbChkLGIpLGY9MCxnPWEubGVuZ3RoO2c+Zjspe3ZhciBoPWYrZz4+PjE7Yy5jYWxsKGQsYVtoXSk8ZT9mPWgrMTpnPWh9cmV0dXJuIGZ9LHgudG9BcnJheT1mdW5jdGlvbihhKXtyZXR1cm4gYT94LmlzQXJyYXkoYSk/aC5jYWxsKGEpOmEubGVuZ3RoPT09K2EubGVuZ3RoP3gubWFwKGEseC5pZGVudGl0eSk6eC52YWx1ZXMoYSk6W119LHguc2l6ZT1mdW5jdGlvbihhKXtyZXR1cm4gbnVsbD09YT8wOmEubGVuZ3RoPT09K2EubGVuZ3RoP2EubGVuZ3RoOngua2V5cyhhKS5sZW5ndGh9LHguZmlyc3Q9eC5oZWFkPXgudGFrZT1mdW5jdGlvbihhLGIsYyl7cmV0dXJuIG51bGw9PWE/dm9pZCAwOm51bGw9PWJ8fGM/YVswXTpoLmNhbGwoYSwwLGIpfSx4LmluaXRpYWw9ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBoLmNhbGwoYSwwLGEubGVuZ3RoLShudWxsPT1ifHxjPzE6YikpfSx4Lmxhc3Q9ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBudWxsPT1hP3ZvaWQgMDpudWxsPT1ifHxjP2FbYS5sZW5ndGgtMV06aC5jYWxsKGEsTWF0aC5tYXgoYS5sZW5ndGgtYiwwKSl9LHgucmVzdD14LnRhaWw9eC5kcm9wPWZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gaC5jYWxsKGEsbnVsbD09Ynx8Yz8xOmIpfSx4LmNvbXBhY3Q9ZnVuY3Rpb24oYSl7cmV0dXJuIHguZmlsdGVyKGEseC5pZGVudGl0eSl9O3ZhciBEPWZ1bmN0aW9uKGEsYixjKXtyZXR1cm4geShhLGZ1bmN0aW9uKGEpe3guaXNBcnJheShhKT9iP2cuYXBwbHkoYyxhKTpEKGEsYixjKTpjLnB1c2goYSl9KSxjfTt4LmZsYXR0ZW49ZnVuY3Rpb24oYSxiKXtyZXR1cm4gRChhLGIsW10pfSx4LndpdGhvdXQ9ZnVuY3Rpb24oYSl7cmV0dXJuIHguZGlmZmVyZW5jZShhLGguY2FsbChhcmd1bWVudHMsMSkpfSx4LnVuaXE9eC51bmlxdWU9ZnVuY3Rpb24oYSxiLGMsZCl7eC5pc0Z1bmN0aW9uKGIpJiYoZD1jLGM9YixiPSExKTt2YXIgZT1jP3gubWFwKGEsYyxkKTphLGY9W10sZz1bXTtyZXR1cm4geShlLGZ1bmN0aW9uKGMsZCl7KGI/ZCYmZ1tnLmxlbmd0aC0xXT09PWM6eC5jb250YWlucyhnLGMpKXx8KGcucHVzaChjKSxmLnB1c2goYVtkXSkpfSksZn0seC51bmlvbj1mdW5jdGlvbigpe3JldHVybiB4LnVuaXEoaS5hcHBseShkLGFyZ3VtZW50cykpfSx4LmludGVyc2VjdGlvbj1mdW5jdGlvbihhKXt2YXIgYj1oLmNhbGwoYXJndW1lbnRzLDEpO3JldHVybiB4LmZpbHRlcih4LnVuaXEoYSksZnVuY3Rpb24oYSl7cmV0dXJuIHguZXZlcnkoYixmdW5jdGlvbihiKXtyZXR1cm4geC5pbmRleE9mKGIsYSk+PTB9KX0pfSx4LmRpZmZlcmVuY2U9ZnVuY3Rpb24oYSl7dmFyIGI9aS5hcHBseShkLGguY2FsbChhcmd1bWVudHMsMSkpO3JldHVybiB4LmZpbHRlcihhLGZ1bmN0aW9uKGEpe3JldHVybiF4LmNvbnRhaW5zKGIsYSl9KX0seC56aXA9ZnVuY3Rpb24oKXtmb3IodmFyIGE9aC5jYWxsKGFyZ3VtZW50cyksYj14Lm1heCh4LnBsdWNrKGEsImxlbmd0aCIpKSxjPW5ldyBBcnJheShiKSxkPTA7Yj5kO2QrKyljW2RdPXgucGx1Y2soYSwiIitkKTtyZXR1cm4gY30seC5vYmplY3Q9ZnVuY3Rpb24oYSxiKXtpZihudWxsPT1hKXJldHVybnt9O2Zvcih2YXIgYz17fSxkPTAsZT1hLmxlbmd0aDtlPmQ7ZCsrKWI/Y1thW2RdXT1iW2RdOmNbYVtkXVswXV09YVtkXVsxXTtyZXR1cm4gY30seC5pbmRleE9mPWZ1bmN0aW9uKGEsYixjKXtpZihudWxsPT1hKXJldHVybi0xO3ZhciBkPTAsZT1hLmxlbmd0aDtpZihjKXtpZigibnVtYmVyIiE9dHlwZW9mIGMpcmV0dXJuIGQ9eC5zb3J0ZWRJbmRleChhLGIpLGFbZF09PT1iP2Q6LTE7ZD0wPmM/TWF0aC5tYXgoMCxlK2MpOmN9aWYocyYmYS5pbmRleE9mPT09cylyZXR1cm4gYS5pbmRleE9mKGIsYyk7Zm9yKDtlPmQ7ZCsrKWlmKGFbZF09PT1iKXJldHVybiBkO3JldHVybi0xfSx4Lmxhc3RJbmRleE9mPWZ1bmN0aW9uKGEsYixjKXtpZihudWxsPT1hKXJldHVybi0xO3ZhciBkPW51bGwhPWM7aWYodCYmYS5sYXN0SW5kZXhPZj09PXQpcmV0dXJuIGQ/YS5sYXN0SW5kZXhPZihiLGMpOmEubGFzdEluZGV4T2YoYik7Zm9yKHZhciBlPWQ/YzphLmxlbmd0aDtlLS07KWlmKGFbZV09PT1iKXJldHVybiBlO3JldHVybi0xfSx4LnJhbmdlPWZ1bmN0aW9uKGEsYixjKXthcmd1bWVudHMubGVuZ3RoPD0xJiYoYj1hfHwwLGE9MCksYz1hcmd1bWVudHNbMl18fDE7Zm9yKHZhciBkPU1hdGgubWF4KE1hdGguY2VpbCgoYi1hKS9jKSwwKSxlPTAsZj1uZXcgQXJyYXkoZCk7ZD5lOylmW2UrK109YSxhKz1jO3JldHVybiBmfSx4LmJpbmQ9ZnVuY3Rpb24oYSxiKXtpZihhLmJpbmQ9PT13JiZ3KXJldHVybiB3LmFwcGx5KGEsaC5jYWxsKGFyZ3VtZW50cywxKSk7dmFyIGM9aC5jYWxsKGFyZ3VtZW50cywyKTtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gYS5hcHBseShiLGMuY29uY2F0KGguY2FsbChhcmd1bWVudHMpKSl9fSx4LnBhcnRpYWw9ZnVuY3Rpb24oYSl7dmFyIGI9aC5jYWxsKGFyZ3VtZW50cywxKTtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gYS5hcHBseSh0aGlzLGIuY29uY2F0KGguY2FsbChhcmd1bWVudHMpKSl9fSx4LmJpbmRBbGw9ZnVuY3Rpb24oYSl7dmFyIGI9aC5jYWxsKGFyZ3VtZW50cywxKTtyZXR1cm4gMD09PWIubGVuZ3RoJiYoYj14LmZ1bmN0aW9ucyhhKSkseShiLGZ1bmN0aW9uKGIpe2FbYl09eC5iaW5kKGFbYl0sYSl9KSxhfSx4Lm1lbW9pemU9ZnVuY3Rpb24oYSxiKXt2YXIgYz17fTtyZXR1cm4gYnx8KGI9eC5pZGVudGl0eSksZnVuY3Rpb24oKXt2YXIgZD1iLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtyZXR1cm4geC5oYXMoYyxkKT9jW2RdOmNbZF09YS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fSx4LmRlbGF5PWZ1bmN0aW9uKGEsYil7dmFyIGM9aC5jYWxsKGFyZ3VtZW50cywyKTtyZXR1cm4gc2V0VGltZW91dChmdW5jdGlvbigpe3JldHVybiBhLmFwcGx5KG51bGwsYyl9LGIpfSx4LmRlZmVyPWZ1bmN0aW9uKGEpe3JldHVybiB4LmRlbGF5LmFwcGx5KHgsW2EsMV0uY29uY2F0KGguY2FsbChhcmd1bWVudHMsMSkpKX0seC50aHJvdHRsZT1mdW5jdGlvbihhLGIpe3ZhciBjLGQsZSxmLGc9MCxoPWZ1bmN0aW9uKCl7Zz1uZXcgRGF0ZSxlPW51bGwsZj1hLmFwcGx5KGMsZCl9O3JldHVybiBmdW5jdGlvbigpe3ZhciBpPW5ldyBEYXRlLGo9Yi0oaS1nKTtyZXR1cm4gYz10aGlzLGQ9YXJndW1lbnRzLDA+PWo/KGNsZWFyVGltZW91dChlKSxlPW51bGwsZz1pLGY9YS5hcHBseShjLGQpKTplfHwoZT1zZXRUaW1lb3V0KGgsaikpLGZ9fSx4LmRlYm91bmNlPWZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlO3JldHVybiBmdW5jdGlvbigpe3ZhciBmPXRoaXMsZz1hcmd1bWVudHMsaD1mdW5jdGlvbigpe2Q9bnVsbCxjfHwoZT1hLmFwcGx5KGYsZykpfSxpPWMmJiFkO3JldHVybiBjbGVhclRpbWVvdXQoZCksZD1zZXRUaW1lb3V0KGgsYiksaSYmKGU9YS5hcHBseShmLGcpKSxlfX0seC5vbmNlPWZ1bmN0aW9uKGEpe3ZhciBiLGM9ITE7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGM/YjooYz0hMCxiPWEuYXBwbHkodGhpcyxhcmd1bWVudHMpLGE9bnVsbCxiKX19LHgud3JhcD1mdW5jdGlvbihhLGIpe3JldHVybiBmdW5jdGlvbigpe3ZhciBjPVthXTtyZXR1cm4gZy5hcHBseShjLGFyZ3VtZW50cyksYi5hcHBseSh0aGlzLGMpfX0seC5jb21wb3NlPWZ1bmN0aW9uKCl7dmFyIGE9YXJndW1lbnRzO3JldHVybiBmdW5jdGlvbigpe2Zvcih2YXIgYj1hcmd1bWVudHMsYz1hLmxlbmd0aC0xO2M+PTA7Yy0tKWI9W2FbY10uYXBwbHkodGhpcyxiKV07cmV0dXJuIGJbMF19fSx4LmFmdGVyPWZ1bmN0aW9uKGEsYil7cmV0dXJuIDA+PWE/YigpOmZ1bmN0aW9uKCl7cmV0dXJuLS1hPDE/Yi5hcHBseSh0aGlzLGFyZ3VtZW50cyk6dm9pZCAwfX0seC5rZXlzPXZ8fGZ1bmN0aW9uKGEpe2lmKGEhPT1PYmplY3QoYSkpdGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBvYmplY3QiKTt2YXIgYj1bXTtmb3IodmFyIGMgaW4gYSl4LmhhcyhhLGMpJiYoYltiLmxlbmd0aF09Yyk7cmV0dXJuIGJ9LHgudmFsdWVzPWZ1bmN0aW9uKGEpe3ZhciBiPVtdO2Zvcih2YXIgYyBpbiBhKXguaGFzKGEsYykmJmIucHVzaChhW2NdKTtyZXR1cm4gYn0seC5wYWlycz1mdW5jdGlvbihhKXt2YXIgYj1bXTtmb3IodmFyIGMgaW4gYSl4LmhhcyhhLGMpJiZiLnB1c2goW2MsYVtjXV0pO3JldHVybiBifSx4LmludmVydD1mdW5jdGlvbihhKXt2YXIgYj17fTtmb3IodmFyIGMgaW4gYSl4LmhhcyhhLGMpJiYoYlthW2NdXT1jKTtyZXR1cm4gYn0seC5mdW5jdGlvbnM9eC5tZXRob2RzPWZ1bmN0aW9uKGEpe3ZhciBiPVtdO2Zvcih2YXIgYyBpbiBhKXguaXNGdW5jdGlvbihhW2NdKSYmYi5wdXNoKGMpO3JldHVybiBiLnNvcnQoKX0seC5leHRlbmQ9ZnVuY3Rpb24oYSl7cmV0dXJuIHkoaC5jYWxsKGFyZ3VtZW50cywxKSxmdW5jdGlvbihiKXtpZihiKWZvcih2YXIgYyBpbiBiKWFbY109YltjXX0pLGF9LHgucGljaz1mdW5jdGlvbihhKXt2YXIgYj17fSxjPWkuYXBwbHkoZCxoLmNhbGwoYXJndW1lbnRzLDEpKTtyZXR1cm4geShjLGZ1bmN0aW9uKGMpe2MgaW4gYSYmKGJbY109YVtjXSl9KSxifSx4Lm9taXQ9ZnVuY3Rpb24oYSl7dmFyIGI9e30sYz1pLmFwcGx5KGQsaC5jYWxsKGFyZ3VtZW50cywxKSk7Zm9yKHZhciBlIGluIGEpeC5jb250YWlucyhjLGUpfHwoYltlXT1hW2VdKTtyZXR1cm4gYn0seC5kZWZhdWx0cz1mdW5jdGlvbihhKXtyZXR1cm4geShoLmNhbGwoYXJndW1lbnRzLDEpLGZ1bmN0aW9uKGIpe2lmKGIpZm9yKHZhciBjIGluIGIpbnVsbD09YVtjXSYmKGFbY109YltjXSl9KSxhfSx4LmNsb25lPWZ1bmN0aW9uKGEpe3JldHVybiB4LmlzT2JqZWN0KGEpP3guaXNBcnJheShhKT9hLnNsaWNlKCk6eC5leHRlbmQoe30sYSk6YX0seC50YXA9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYihhKSxhfTt2YXIgRT1mdW5jdGlvbihhLGIsYyxkKXtpZihhPT09YilyZXR1cm4gMCE9PWF8fDEvYT09MS9iO2lmKG51bGw9PWF8fG51bGw9PWIpcmV0dXJuIGE9PT1iO2EgaW5zdGFuY2VvZiB4JiYoYT1hLl93cmFwcGVkKSxiIGluc3RhbmNlb2YgeCYmKGI9Yi5fd3JhcHBlZCk7dmFyIGU9ai5jYWxsKGEpO2lmKGUhPWouY2FsbChiKSlyZXR1cm4hMTtzd2l0Y2goZSl7Y2FzZSJbb2JqZWN0IFN0cmluZ10iOnJldHVybiBhPT1TdHJpbmcoYik7Y2FzZSJbb2JqZWN0IE51bWJlcl0iOnJldHVybiBhIT0rYT9iIT0rYjowPT1hPzEvYT09MS9iOmE9PStiO2Nhc2UiW29iamVjdCBEYXRlXSI6Y2FzZSJbb2JqZWN0IEJvb2xlYW5dIjpyZXR1cm4rYT09K2I7Y2FzZSJbb2JqZWN0IFJlZ0V4cF0iOnJldHVybiBhLnNvdXJjZT09Yi5zb3VyY2UmJmEuZ2xvYmFsPT1iLmdsb2JhbCYmYS5tdWx0aWxpbmU9PWIubXVsdGlsaW5lJiZhLmlnbm9yZUNhc2U9PWIuaWdub3JlQ2FzZX1pZigib2JqZWN0IiE9dHlwZW9mIGF8fCJvYmplY3QiIT10eXBlb2YgYilyZXR1cm4hMTtmb3IodmFyIGY9Yy5sZW5ndGg7Zi0tOylpZihjW2ZdPT1hKXJldHVybiBkW2ZdPT1iO2MucHVzaChhKSxkLnB1c2goYik7dmFyIGc9MCxoPSEwO2lmKCJbb2JqZWN0IEFycmF5XSI9PWUpe2lmKGc9YS5sZW5ndGgsaD1nPT1iLmxlbmd0aClmb3IoO2ctLSYmKGg9RShhW2ddLGJbZ10sYyxkKSk7KTt9ZWxzZXt2YXIgaT1hLmNvbnN0cnVjdG9yLGs9Yi5jb25zdHJ1Y3RvcjtpZihpIT09ayYmISh4LmlzRnVuY3Rpb24oaSkmJmkgaW5zdGFuY2VvZiBpJiZ4LmlzRnVuY3Rpb24oaykmJmsgaW5zdGFuY2VvZiBrKSlyZXR1cm4hMTtmb3IodmFyIGwgaW4gYSlpZih4LmhhcyhhLGwpJiYoZysrLCEoaD14LmhhcyhiLGwpJiZFKGFbbF0sYltsXSxjLGQpKSkpYnJlYWs7aWYoaCl7Zm9yKGwgaW4gYilpZih4LmhhcyhiLGwpJiYhZy0tKWJyZWFrO2g9IWd9fXJldHVybiBjLnBvcCgpLGQucG9wKCksaH07eC5pc0VxdWFsPWZ1bmN0aW9uKGEsYil7cmV0dXJuIEUoYSxiLFtdLFtdKX0seC5pc0VtcHR5PWZ1bmN0aW9uKGEpe2lmKG51bGw9PWEpcmV0dXJuITA7aWYoeC5pc0FycmF5KGEpfHx4LmlzU3RyaW5nKGEpKXJldHVybiAwPT09YS5sZW5ndGg7Zm9yKHZhciBiIGluIGEpaWYoeC5oYXMoYSxiKSlyZXR1cm4hMTtyZXR1cm4hMH0seC5pc0VsZW1lbnQ9ZnVuY3Rpb24oYSl7cmV0dXJuISghYXx8MSE9PWEubm9kZVR5cGUpfSx4LmlzQXJyYXk9dXx8ZnVuY3Rpb24oYSl7cmV0dXJuIltvYmplY3QgQXJyYXldIj09ai5jYWxsKGEpfSx4LmlzT2JqZWN0PWZ1bmN0aW9uKGEpe3JldHVybiBhPT09T2JqZWN0KGEpfSx5KFsiQXJndW1lbnRzIiwiRnVuY3Rpb24iLCJTdHJpbmciLCJOdW1iZXIiLCJEYXRlIiwiUmVnRXhwIl0sZnVuY3Rpb24oYSl7eFsiaXMiK2FdPWZ1bmN0aW9uKGIpe3JldHVybiBqLmNhbGwoYik9PSJbb2JqZWN0ICIrYSsiXSJ9fSkseC5pc0FyZ3VtZW50cyhhcmd1bWVudHMpfHwoeC5pc0FyZ3VtZW50cz1mdW5jdGlvbihhKXtyZXR1cm4hKCFhfHwheC5oYXMoYSwiY2FsbGVlIikpfSksImZ1bmN0aW9uIiE9dHlwZW9mLy4vJiYoeC5pc0Z1bmN0aW9uPWZ1bmN0aW9uKGEpe3JldHVybiJmdW5jdGlvbiI9PXR5cGVvZiBhfSkseC5pc0Zpbml0ZT1mdW5jdGlvbihhKXtyZXR1cm4gaXNGaW5pdGUoYSkmJiFpc05hTihwYXJzZUZsb2F0KGEpKX0seC5pc05hTj1mdW5jdGlvbihhKXtyZXR1cm4geC5pc051bWJlcihhKSYmYSE9K2F9LHguaXNCb29sZWFuPWZ1bmN0aW9uKGEpe3JldHVybiBhPT09ITB8fGE9PT0hMXx8IltvYmplY3QgQm9vbGVhbl0iPT1qLmNhbGwoYSl9LHguaXNOdWxsPWZ1bmN0aW9uKGEpe3JldHVybiBudWxsPT09YX0seC5pc1VuZGVmaW5lZD1mdW5jdGlvbihhKXtyZXR1cm4gdm9pZCAwPT09YX0seC5oYXM9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gay5jYWxsKGEsYil9LHgubm9Db25mbGljdD1mdW5jdGlvbigpe3JldHVybiBhLl89Yix0aGlzfSx4LmlkZW50aXR5PWZ1bmN0aW9uKGEpe3JldHVybiBhfSx4LnRpbWVzPWZ1bmN0aW9uKGEsYixjKXtmb3IodmFyIGQ9QXJyYXkoYSksZT0wO2E+ZTtlKyspZFtlXT1iLmNhbGwoYyxlKTtyZXR1cm4gZH0seC5yYW5kb209ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbnVsbD09YiYmKGI9YSxhPTApLGErTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKihiLWErMSkpfTt2YXIgRj17ZXNjYXBlOnsiJiI6IiZhbXA7IiwiPCI6IiZsdDsiLCI+IjoiJmd0OyIsJyInOiImcXVvdDsiLCInIjoiJiN4Mjc7IiwiLyI6IiYjeDJGOyJ9fTtGLnVuZXNjYXBlPXguaW52ZXJ0KEYuZXNjYXBlKTt2YXIgRz17ZXNjYXBlOm5ldyBSZWdFeHAoIlsiK3gua2V5cyhGLmVzY2FwZSkuam9pbigiIikrIl0iLCJnIiksdW5lc2NhcGU6bmV3IFJlZ0V4cCgiKCIreC5rZXlzKEYudW5lc2NhcGUpLmpvaW4oInwiKSsiKSIsImciKX07eC5lYWNoKFsiZXNjYXBlIiwidW5lc2NhcGUiXSxmdW5jdGlvbihhKXt4W2FdPWZ1bmN0aW9uKGIpe3JldHVybiBudWxsPT1iPyIiOigiIitiKS5yZXBsYWNlKEdbYV0sZnVuY3Rpb24oYil7cmV0dXJuIEZbYV1bYl19KX19KSx4LnJlc3VsdD1mdW5jdGlvbihhLGIpe2lmKG51bGw9PWEpcmV0dXJuIG51bGw7dmFyIGM9YVtiXTtyZXR1cm4geC5pc0Z1bmN0aW9uKGMpP2MuY2FsbChhKTpjfSx4Lm1peGluPWZ1bmN0aW9uKGEpe3koeC5mdW5jdGlvbnMoYSksZnVuY3Rpb24oYil7dmFyIGM9eFtiXT1hW2JdO3gucHJvdG90eXBlW2JdPWZ1bmN0aW9uKCl7dmFyIGE9W3RoaXMuX3dyYXBwZWRdO3JldHVybiBnLmFwcGx5KGEsYXJndW1lbnRzKSxMLmNhbGwodGhpcyxjLmFwcGx5KHgsYSkpfX0pfTt2YXIgSD0wO3gudW5pcXVlSWQ9ZnVuY3Rpb24oYSl7dmFyIGI9KytIKyIiO3JldHVybiBhP2ErYjpifSx4LnRlbXBsYXRlU2V0dGluZ3M9e2V2YWx1YXRlOi88JShbXHNcU10rPyklPi9nLGludGVycG9sYXRlOi88JT0oW1xzXFNdKz8pJT4vZyxlc2NhcGU6LzwlLShbXHNcU10rPyklPi9nfTt2YXIgST0vKC4pXi8sSj17IiciOiInIiwiXFwiOiJcXCIsIlxyIjoiciIsIlxuIjoibiIsIgkiOiJ0IiwiXHUyMDI4IjoidTIwMjgiLCJcdTIwMjkiOiJ1MjAyOSJ9LEs9L1xcfCd8XHJ8XG58XHR8XHUyMDI4fFx1MjAyOS9nO3gudGVtcGxhdGU9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkO2M9eC5kZWZhdWx0cyh7fSxjLHgudGVtcGxhdGVTZXR0aW5ncyk7dmFyIGU9bmV3IFJlZ0V4cChbKGMuZXNjYXBlfHxJKS5zb3VyY2UsKGMuaW50ZXJwb2xhdGV8fEkpLnNvdXJjZSwoYy5ldmFsdWF0ZXx8SSkuc291cmNlXS5qb2luKCJ8IikrInwkIiwiZyIpLGY9MCxnPSJfX3ArPSciO2EucmVwbGFjZShlLGZ1bmN0aW9uKGIsYyxkLGUsaCl7cmV0dXJuIGcrPWEuc2xpY2UoZixoKS5yZXBsYWNlKEssZnVuY3Rpb24oYSl7cmV0dXJuIlxcIitKW2FdfSksYyYmKGcrPSInK1xuKChfX3Q9KCIrYysiKSk9PW51bGw/Jyc6Xy5lc2NhcGUoX190KSkrXG4nIiksZCYmKGcrPSInK1xuKChfX3Q9KCIrZCsiKSk9PW51bGw/Jyc6X190KStcbiciKSxlJiYoZys9Iic7XG4iK2UrIlxuX19wKz0nIiksZj1oK2IubGVuZ3RoLGJ9KSxnKz0iJztcbiIsYy52YXJpYWJsZXx8KGc9IndpdGgob2JqfHx7fSl7XG4iK2crIn1cbiIpLGc9InZhciBfX3QsX19wPScnLF9faj1BcnJheS5wcm90b3R5cGUuam9pbixwcmludD1mdW5jdGlvbigpe19fcCs9X19qLmNhbGwoYXJndW1lbnRzLCcnKTt9O1xuIitnKyJyZXR1cm4gX19wO1xuIjt0cnl7ZD1uZXcgRnVuY3Rpb24oYy52YXJpYWJsZXx8Im9iaiIsIl8iLGcpfWNhdGNoKGgpe3Rocm93IGguc291cmNlPWcsaH1pZihiKXJldHVybiBkKGIseCk7dmFyIGk9ZnVuY3Rpb24oYSl7cmV0dXJuIGQuY2FsbCh0aGlzLGEseCl9O3JldHVybiBpLnNvdXJjZT0iZnVuY3Rpb24oIisoYy52YXJpYWJsZXx8Im9iaiIpKyIpe1xuIitnKyJ9IixpfSx4LmNoYWluPWZ1bmN0aW9uKGEpe3JldHVybiB4KGEpLmNoYWluKCl9O3ZhciBMPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLl9jaGFpbj94KGEpLmNoYWluKCk6YX07eC5taXhpbih4KSx5KFsicG9wIiwicHVzaCIsInJldmVyc2UiLCJzaGlmdCIsInNvcnQiLCJzcGxpY2UiLCJ1bnNoaWZ0Il0sZnVuY3Rpb24oYSl7dmFyIGI9ZFthXTt4LnByb3RvdHlwZVthXT1mdW5jdGlvbigpe3ZhciBjPXRoaXMuX3dyYXBwZWQ7cmV0dXJuIGIuYXBwbHkoYyxhcmd1bWVudHMpLCJzaGlmdCIhPWEmJiJzcGxpY2UiIT1hfHwwIT09Yy5sZW5ndGh8fGRlbGV0ZSBjWzBdLEwuY2FsbCh0aGlzLGMpfX0pLHkoWyJjb25jYXQiLCJqb2luIiwic2xpY2UiXSxmdW5jdGlvbihhKXt2YXIgYj1kW2FdO3gucHJvdG90eXBlW2FdPWZ1bmN0aW9uKCl7cmV0dXJuIEwuY2FsbCh0aGlzLGIuYXBwbHkodGhpcy5fd3JhcHBlZCxhcmd1bWVudHMpKX19KSx4LmV4dGVuZCh4LnByb3RvdHlwZSx7Y2hhaW46ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY2hhaW49ITAsdGhpc30sdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fd3JhcHBlZH19KX0uY2FsbCh0aGlzKSxjKCJ1bmRlcnNjb3JlIixmdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgYjtyZXR1cm4gYnx8YS5ffX0odGhpcykpLGZ1bmN0aW9uKCl7dmFyIGEsYz10aGlzLGQ9Yy5CYWNrYm9uZSxlPVtdLGY9ZS5wdXNoLGc9ZS5zbGljZSxoPWUuc3BsaWNlO2E9InVuZGVmaW5lZCIhPXR5cGVvZiBleHBvcnRzP2V4cG9ydHM6Yy5CYWNrYm9uZT17fSxhLlZFUlNJT049IjEuMC4wIjt2YXIgaT1jLl87aXx8InVuZGVmaW5lZCI9PXR5cGVvZiBifHwoaT1iKCJ1bmRlcnNjb3JlIikpLGEuJD1jLmpRdWVyeXx8Yy5aZXB0b3x8Yy5lbmRlcnx8Yy4kLGEubm9Db25mbGljdD1mdW5jdGlvbigpe3JldHVybiBjLkJhY2tib25lPWQsdGhpc30sYS5lbXVsYXRlSFRUUD0hMSxhLmVtdWxhdGVKU09OPSExO3ZhciBqPWEuRXZlbnRzPXtvbjpmdW5jdGlvbihhLGIsYyl7aWYoIWwodGhpcywib24iLGEsW2IsY10pfHwhYilyZXR1cm4gdGhpczt0aGlzLl9ldmVudHN8fCh0aGlzLl9ldmVudHM9e30pO3ZhciBkPXRoaXMuX2V2ZW50c1thXXx8KHRoaXMuX2V2ZW50c1thXT1bXSk7cmV0dXJuIGQucHVzaCh7Y2FsbGJhY2s6Yixjb250ZXh0OmMsY3R4OmN8fHRoaXN9KSx0aGlzfSxvbmNlOmZ1bmN0aW9uKGEsYixjKXtpZighbCh0aGlzLCJvbmNlIixhLFtiLGNdKXx8IWIpcmV0dXJuIHRoaXM7dmFyIGQ9dGhpcyxlPWkub25jZShmdW5jdGlvbigpe2Qub2ZmKGEsZSksYi5hcHBseSh0aGlzLGFyZ3VtZW50cyl9KTtyZXR1cm4gZS5fY2FsbGJhY2s9Yix0aGlzLm9uKGEsZSxjKX0sb2ZmOmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGYsZyxoLGosayxtO2lmKCF0aGlzLl9ldmVudHN8fCFsKHRoaXMsIm9mZiIsYSxbYixjXSkpcmV0dXJuIHRoaXM7aWYoIWEmJiFiJiYhYylyZXR1cm4gdGhpcy5fZXZlbnRzPXt9LHRoaXM7Zm9yKGc9YT9bYV06aS5rZXlzKHRoaXMuX2V2ZW50cyksaD0wLGo9Zy5sZW5ndGg7aj5oO2grKylpZihhPWdbaF0sZj10aGlzLl9ldmVudHNbYV0pe2lmKHRoaXMuX2V2ZW50c1thXT1kPVtdLGJ8fGMpZm9yKGs9MCxtPWYubGVuZ3RoO20+aztrKyspZT1mW2tdLChiJiZiIT09ZS5jYWxsYmFjayYmYiE9PWUuY2FsbGJhY2suX2NhbGxiYWNrfHxjJiZjIT09ZS5jb250ZXh0KSYmZC5wdXNoKGUpO2QubGVuZ3RofHxkZWxldGUgdGhpcy5fZXZlbnRzW2FdfXJldHVybiB0aGlzfSx0cmlnZ2VyOmZ1bmN0aW9uKGEpe2lmKCF0aGlzLl9ldmVudHMpcmV0dXJuIHRoaXM7dmFyIGI9Zy5jYWxsKGFyZ3VtZW50cywxKTtpZighbCh0aGlzLCJ0cmlnZ2VyIixhLGIpKXJldHVybiB0aGlzO3ZhciBjPXRoaXMuX2V2ZW50c1thXSxkPXRoaXMuX2V2ZW50cy5hbGw7cmV0dXJuIGMmJm0oYyxiKSxkJiZtKGQsYXJndW1lbnRzKSx0aGlzfSxzdG9wTGlzdGVuaW5nOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD10aGlzLl9saXN0ZW5lcnM7aWYoIWQpcmV0dXJuIHRoaXM7dmFyIGU9IWImJiFjOyJvYmplY3QiPT10eXBlb2YgYiYmKGM9dGhpcyksYSYmKChkPXt9KVthLl9saXN0ZW5lcklkXT1hKTtmb3IodmFyIGYgaW4gZClkW2ZdLm9mZihiLGMsdGhpcyksZSYmZGVsZXRlIHRoaXMuX2xpc3RlbmVyc1tmXTtyZXR1cm4gdGhpc319LGs9L1xzKy8sbD1mdW5jdGlvbihhLGIsYyxkKXtpZighYylyZXR1cm4hMDtpZigib2JqZWN0Ij09dHlwZW9mIGMpe2Zvcih2YXIgZSBpbiBjKWFbYl0uYXBwbHkoYSxbZSxjW2VdXS5jb25jYXQoZCkpO3JldHVybiExfWlmKGsudGVzdChjKSl7Zm9yKHZhciBmPWMuc3BsaXQoayksZz0wLGg9Zi5sZW5ndGg7aD5nO2crKylhW2JdLmFwcGx5KGEsW2ZbZ11dLmNvbmNhdChkKSk7cmV0dXJuITF9cmV0dXJuITB9LG09ZnVuY3Rpb24oYSxiKXt2YXIgYyxkPS0xLGU9YS5sZW5ndGgsZj1iWzBdLGc9YlsxXSxoPWJbMl07c3dpdGNoKGIubGVuZ3RoKXtjYXNlIDA6Zm9yKDsrK2Q8ZTspKGM9YVtkXSkuY2FsbGJhY2suY2FsbChjLmN0eCk7cmV0dXJuO2Nhc2UgMTpmb3IoOysrZDxlOykoYz1hW2RdKS5jYWxsYmFjay5jYWxsKGMuY3R4LGYpO3JldHVybjtjYXNlIDI6Zm9yKDsrK2Q8ZTspKGM9YVtkXSkuY2FsbGJhY2suY2FsbChjLmN0eCxmLGcpO3JldHVybjtjYXNlIDM6Zm9yKDsrK2Q8ZTspKGM9YVtkXSkuY2FsbGJhY2suY2FsbChjLmN0eCxmLGcsaCk7cmV0dXJuO2RlZmF1bHQ6Zm9yKDsrK2Q8ZTspKGM9YVtkXSkuY2FsbGJhY2suYXBwbHkoYy5jdHgsYil9fSxuPXtsaXN0ZW5Ubzoib24iLGxpc3RlblRvT25jZToib25jZSJ9O2kuZWFjaChuLGZ1bmN0aW9uKGEsYil7altiXT1mdW5jdGlvbihiLGMsZCl7dmFyIGU9dGhpcy5fbGlzdGVuZXJzfHwodGhpcy5fbGlzdGVuZXJzPXt9KSxmPWIuX2xpc3RlbmVySWR8fChiLl9saXN0ZW5lcklkPWkudW5pcXVlSWQoImwiKSk7cmV0dXJuIGVbZl09Yiwib2JqZWN0Ij09dHlwZW9mIGMmJihkPXRoaXMpLGJbYV0oYyxkLHRoaXMpLHRoaXN9fSksai5iaW5kPWoub24sai51bmJpbmQ9ai5vZmYsaS5leHRlbmQoYSxqKTt2YXIgbz1hLk1vZGVsPWZ1bmN0aW9uKGEsYil7dmFyIGMsZD1hfHx7fTtifHwoYj17fSksdGhpcy5jaWQ9aS51bmlxdWVJZCgiYyIpLHRoaXMuYXR0cmlidXRlcz17fSxpLmV4dGVuZCh0aGlzLGkucGljayhiLHApKSxiLnBhcnNlJiYoZD10aGlzLnBhcnNlKGQsYil8fHt9KSwoYz1pLnJlc3VsdCh0aGlzLCJkZWZhdWx0cyIpKSYmKGQ9aS5kZWZhdWx0cyh7fSxkLGMpKSx0aGlzLnNldChkLGIpLHRoaXMuY2hhbmdlZD17fSx0aGlzLmluaXRpYWxpemUuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxwPVsidXJsIiwidXJsUm9vdCIsImNvbGxlY3Rpb24iXTtpLmV4dGVuZChvLnByb3RvdHlwZSxqLHtjaGFuZ2VkOm51bGwsdmFsaWRhdGlvbkVycm9yOm51bGwsaWRBdHRyaWJ1dGU6ImlkIixpbml0aWFsaXplOmZ1bmN0aW9uKCl7fSx0b0pTT046ZnVuY3Rpb24oKXtyZXR1cm4gaS5jbG9uZSh0aGlzLmF0dHJpYnV0ZXMpfSxzeW5jOmZ1bmN0aW9uKCl7cmV0dXJuIGEuc3luYy5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGdldDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5hdHRyaWJ1dGVzW2FdfSxlc2NhcGU6ZnVuY3Rpb24oYSl7cmV0dXJuIGkuZXNjYXBlKHRoaXMuZ2V0KGEpKX0saGFzOmZ1bmN0aW9uKGEpe3JldHVybiBudWxsIT10aGlzLmdldChhKX0sc2V0OmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGYsZyxoLGosayxsO2lmKG51bGw9PWEpcmV0dXJuIHRoaXM7aWYoIm9iamVjdCI9PXR5cGVvZiBhPyhlPWEsYz1iKTooZT17fSlbYV09YixjfHwoYz17fSksIXRoaXMuX3ZhbGlkYXRlKGUsYykpcmV0dXJuITE7Zj1jLnVuc2V0LGg9Yy5zaWxlbnQsZz1bXSxqPXRoaXMuX2NoYW5naW5nLHRoaXMuX2NoYW5naW5nPSEwLGp8fCh0aGlzLl9wcmV2aW91c0F0dHJpYnV0ZXM9aS5jbG9uZSh0aGlzLmF0dHJpYnV0ZXMpLHRoaXMuY2hhbmdlZD17fSksbD10aGlzLmF0dHJpYnV0ZXMsaz10aGlzLl9wcmV2aW91c0F0dHJpYnV0ZXMsdGhpcy5pZEF0dHJpYnV0ZSBpbiBlJiYodGhpcy5pZD1lW3RoaXMuaWRBdHRyaWJ1dGVdKTtmb3IoZCBpbiBlKWI9ZVtkXSxpLmlzRXF1YWwobFtkXSxiKXx8Zy5wdXNoKGQpLGkuaXNFcXVhbChrW2RdLGIpP2RlbGV0ZSB0aGlzLmNoYW5nZWRbZF06dGhpcy5jaGFuZ2VkW2RdPWIsZj9kZWxldGUgbFtkXTpsW2RdPWI7aWYoIWgpe2cubGVuZ3RoJiYodGhpcy5fcGVuZGluZz0hMCk7Zm9yKHZhciBtPTAsbj1nLmxlbmd0aDtuPm07bSsrKXRoaXMudHJpZ2dlcigiY2hhbmdlOiIrZ1ttXSx0aGlzLGxbZ1ttXV0sYyl9aWYoailyZXR1cm4gdGhpcztpZighaClmb3IoO3RoaXMuX3BlbmRpbmc7KXRoaXMuX3BlbmRpbmc9ITEsdGhpcy50cmlnZ2VyKCJjaGFuZ2UiLHRoaXMsYyk7cmV0dXJuIHRoaXMuX3BlbmRpbmc9ITEsdGhpcy5fY2hhbmdpbmc9ITEsdGhpc30sdW5zZXQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5zZXQoYSx2b2lkIDAsaS5leHRlbmQoe30sYix7dW5zZXQ6ITB9KSl9LGNsZWFyOmZ1bmN0aW9uKGEpe3ZhciBiPXt9O2Zvcih2YXIgYyBpbiB0aGlzLmF0dHJpYnV0ZXMpYltjXT12b2lkIDA7cmV0dXJuIHRoaXMuc2V0KGIsaS5leHRlbmQoe30sYSx7dW5zZXQ6ITB9KSl9LGhhc0NoYW5nZWQ6ZnVuY3Rpb24oYSl7cmV0dXJuIG51bGw9PWE/IWkuaXNFbXB0eSh0aGlzLmNoYW5nZWQpOmkuaGFzKHRoaXMuY2hhbmdlZCxhKX0sY2hhbmdlZEF0dHJpYnV0ZXM6ZnVuY3Rpb24oYSl7aWYoIWEpcmV0dXJuIHRoaXMuaGFzQ2hhbmdlZCgpP2kuY2xvbmUodGhpcy5jaGFuZ2VkKTohMTt2YXIgYixjPSExLGQ9dGhpcy5fY2hhbmdpbmc/dGhpcy5fcHJldmlvdXNBdHRyaWJ1dGVzOnRoaXMuYXR0cmlidXRlcztmb3IodmFyIGUgaW4gYSlpLmlzRXF1YWwoZFtlXSxiPWFbZV0pfHwoKGN8fChjPXt9KSlbZV09Yik7cmV0dXJuIGN9LHByZXZpb3VzOmZ1bmN0aW9uKGEpe3JldHVybiBudWxsIT1hJiZ0aGlzLl9wcmV2aW91c0F0dHJpYnV0ZXM/dGhpcy5fcHJldmlvdXNBdHRyaWJ1dGVzW2FdOm51bGx9LHByZXZpb3VzQXR0cmlidXRlczpmdW5jdGlvbigpe3JldHVybiBpLmNsb25lKHRoaXMuX3ByZXZpb3VzQXR0cmlidXRlcyl9LGZldGNoOmZ1bmN0aW9uKGEpe2E9YT9pLmNsb25lKGEpOnt9LHZvaWQgMD09PWEucGFyc2UmJihhLnBhcnNlPSEwKTt2YXIgYj10aGlzLGM9YS5zdWNjZXNzO3JldHVybiBhLnN1Y2Nlc3M9ZnVuY3Rpb24oZCl7cmV0dXJuIGIuc2V0KGIucGFyc2UoZCxhKSxhKT8oYyYmYyhiLGQsYSksdm9pZCBiLnRyaWdnZXIoInN5bmMiLGIsZCxhKSk6ITF9LE0odGhpcyxhKSx0aGlzLnN5bmMoInJlYWQiLHRoaXMsYSl9LHNhdmU6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGUsZixnPXRoaXMuYXR0cmlidXRlcztpZihudWxsPT1hfHwib2JqZWN0Ij09dHlwZW9mIGE/KGQ9YSxjPWIpOihkPXt9KVthXT1iLCEoIWR8fGMmJmMud2FpdHx8dGhpcy5zZXQoZCxjKSkpcmV0dXJuITE7aWYoYz1pLmV4dGVuZCh7dmFsaWRhdGU6ITB9LGMpLCF0aGlzLl92YWxpZGF0ZShkLGMpKXJldHVybiExO2QmJmMud2FpdCYmKHRoaXMuYXR0cmlidXRlcz1pLmV4dGVuZCh7fSxnLGQpKSx2b2lkIDA9PT1jLnBhcnNlJiYoYy5wYXJzZT0hMCk7dmFyIGg9dGhpcyxqPWMuc3VjY2VzcztyZXR1cm4gYy5zdWNjZXNzPWZ1bmN0aW9uKGEpe2guYXR0cmlidXRlcz1nO3ZhciBiPWgucGFyc2UoYSxjKTtyZXR1cm4gYy53YWl0JiYoYj1pLmV4dGVuZChkfHx7fSxiKSksaS5pc09iamVjdChiKSYmIWguc2V0KGIsYyk/ITE6KGomJmooaCxhLGMpLHZvaWQgaC50cmlnZ2VyKCJzeW5jIixoLGEsYykpfSxNKHRoaXMsYyksZT10aGlzLmlzTmV3KCk/ImNyZWF0ZSI6Yy5wYXRjaD8icGF0Y2giOiJ1cGRhdGUiLCJwYXRjaCI9PT1lJiYoYy5hdHRycz1kKSxmPXRoaXMuc3luYyhlLHRoaXMsYyksZCYmYy53YWl0JiYodGhpcy5hdHRyaWJ1dGVzPWcpLGZ9LGRlc3Ryb3k6ZnVuY3Rpb24oYSl7YT1hP2kuY2xvbmUoYSk6e307dmFyIGI9dGhpcyxjPWEuc3VjY2VzcyxkPWZ1bmN0aW9uKCl7Yi50cmlnZ2VyKCJkZXN0cm95IixiLGIuY29sbGVjdGlvbixhKX07aWYoYS5zdWNjZXNzPWZ1bmN0aW9uKGUpeyhhLndhaXR8fGIuaXNOZXcoKSkmJmQoKSxjJiZjKGIsZSxhKSxiLmlzTmV3KCl8fGIudHJpZ2dlcigic3luYyIsYixlLGEpfSx0aGlzLmlzTmV3KCkpcmV0dXJuIGEuc3VjY2VzcygpLCExO00odGhpcyxhKTt2YXIgZT10aGlzLnN5bmMoImRlbGV0ZSIsdGhpcyxhKTtyZXR1cm4gYS53YWl0fHxkKCksZX0sdXJsOmZ1bmN0aW9uKCl7dmFyIGE9aS5yZXN1bHQodGhpcywidXJsUm9vdCIpfHxpLnJlc3VsdCh0aGlzLmNvbGxlY3Rpb24sInVybCIpfHxMKCk7cmV0dXJuIHRoaXMuaXNOZXcoKT9hOmErKCIvIj09PWEuY2hhckF0KGEubGVuZ3RoLTEpPyIiOiIvIikrZW5jb2RlVVJJQ29tcG9uZW50KHRoaXMuaWQpfSxwYXJzZTpmdW5jdGlvbihhKXtyZXR1cm4gYX0sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHRoaXMuY29uc3RydWN0b3IodGhpcy5hdHRyaWJ1dGVzKX0saXNOZXc6ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbD09dGhpcy5pZH0saXNWYWxpZDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5fdmFsaWRhdGUoe30saS5leHRlbmQoYXx8e30se3ZhbGlkYXRlOiEwfSkpfSxfdmFsaWRhdGU6ZnVuY3Rpb24oYSxiKXtpZighYi52YWxpZGF0ZXx8IXRoaXMudmFsaWRhdGUpcmV0dXJuITA7YT1pLmV4dGVuZCh7fSx0aGlzLmF0dHJpYnV0ZXMsYSk7dmFyIGM9dGhpcy52YWxpZGF0aW9uRXJyb3I9dGhpcy52YWxpZGF0ZShhLGIpfHxudWxsO3JldHVybiBjPyh0aGlzLnRyaWdnZXIoImludmFsaWQiLHRoaXMsYyxpLmV4dGVuZChifHx7fSx7dmFsaWRhdGlvbkVycm9yOmN9KSksITEpOiEwfX0pO3ZhciBxPVsia2V5cyIsInZhbHVlcyIsInBhaXJzIiwiaW52ZXJ0IiwicGljayIsIm9taXQiXTtpLmVhY2gocSxmdW5jdGlvbihhKXtvLnByb3RvdHlwZVthXT1mdW5jdGlvbigpe3ZhciBiPWcuY2FsbChhcmd1bWVudHMpO3JldHVybiBiLnVuc2hpZnQodGhpcy5hdHRyaWJ1dGVzKSxpW2FdLmFwcGx5KGksYil9fSk7dmFyIHI9YS5Db2xsZWN0aW9uPWZ1bmN0aW9uKGEsYil7Ynx8KGI9e30pLGIudXJsJiYodGhpcy51cmw9Yi51cmwpLGIubW9kZWwmJih0aGlzLm1vZGVsPWIubW9kZWwpLHZvaWQgMCE9PWIuY29tcGFyYXRvciYmKHRoaXMuY29tcGFyYXRvcj1iLmNvbXBhcmF0b3IpLHRoaXMuX3Jlc2V0KCksdGhpcy5pbml0aWFsaXplLmFwcGx5KHRoaXMsYXJndW1lbnRzKSxhJiZ0aGlzLnJlc2V0KGEsaS5leHRlbmQoe3NpbGVudDohMH0sYikpfSxzPXthZGQ6ITAscmVtb3ZlOiEwLG1lcmdlOiEwfSx0PXthZGQ6ITAsbWVyZ2U6ITEscmVtb3ZlOiExfTtpLmV4dGVuZChyLnByb3RvdHlwZSxqLHttb2RlbDpvLGluaXRpYWxpemU6ZnVuY3Rpb24oKXt9LHRvSlNPTjpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24oYil7cmV0dXJuIGIudG9KU09OKGEpfSl9LHN5bmM6ZnVuY3Rpb24oKXtyZXR1cm4gYS5zeW5jLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sYWRkOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuc2V0KGEsaS5kZWZhdWx0cyhifHx7fSx0KSl9LHJlbW92ZTpmdW5jdGlvbihhLGIpe2E9aS5pc0FycmF5KGEpP2Euc2xpY2UoKTpbYV0sYnx8KGI9e30pO3ZhciBjLGQsZSxmO2ZvcihjPTAsZD1hLmxlbmd0aDtkPmM7YysrKWY9dGhpcy5nZXQoYVtjXSksZiYmKGRlbGV0ZSB0aGlzLl9ieUlkW2YuaWRdLGRlbGV0ZSB0aGlzLl9ieUlkW2YuY2lkXSxlPXRoaXMuaW5kZXhPZihmKSx0aGlzLm1vZGVscy5zcGxpY2UoZSwxKSx0aGlzLmxlbmd0aC0tLGIuc2lsZW50fHwoYi5pbmRleD1lLGYudHJpZ2dlcigicmVtb3ZlIixmLHRoaXMsYikpLHRoaXMuX3JlbW92ZVJlZmVyZW5jZShmKSk7cmV0dXJuIHRoaXN9LHNldDpmdW5jdGlvbihhLGIpe2I9aS5kZWZhdWx0cyhifHx7fSxzKSxiLnBhcnNlJiYoYT10aGlzLnBhcnNlKGEsYikpLGkuaXNBcnJheShhKXx8KGE9YT9bYV06W10pO3ZhciBjLGQsZSxnLGosaz1iLmF0LGw9dGhpcy5jb21wYXJhdG9yJiZudWxsPT1rJiZiLnNvcnQhPT0hMSxtPWkuaXNTdHJpbmcodGhpcy5jb21wYXJhdG9yKT90aGlzLmNvbXBhcmF0b3I6bnVsbCxuPVtdLG89W10scD17fTtmb3IoYz0wLGQ9YS5sZW5ndGg7ZD5jO2MrKykoZT10aGlzLl9wcmVwYXJlTW9kZWwoYVtjXSxiKSkmJigoZz10aGlzLmdldChlKSk/KGIucmVtb3ZlJiYocFtnLmNpZF09ITApLGIubWVyZ2UmJihnLnNldChlLmF0dHJpYnV0ZXMsYiksbCYmIWomJmcuaGFzQ2hhbmdlZChtKSYmKGo9ITApKSk6Yi5hZGQmJihuLnB1c2goZSksZS5vbigiYWxsIix0aGlzLl9vbk1vZGVsRXZlbnQsdGhpcyksdGhpcy5fYnlJZFtlLmNpZF09ZSxudWxsIT1lLmlkJiYodGhpcy5fYnlJZFtlLmlkXT1lKSkpO2lmKGIucmVtb3ZlKXtmb3IoYz0wLGQ9dGhpcy5sZW5ndGg7ZD5jOysrYylwWyhlPXRoaXMubW9kZWxzW2NdKS5jaWRdfHxvLnB1c2goZSk7by5sZW5ndGgmJnRoaXMucmVtb3ZlKG8sYil9aWYobi5sZW5ndGgmJihsJiYoaj0hMCksdGhpcy5sZW5ndGgrPW4ubGVuZ3RoLG51bGwhPWs/aC5hcHBseSh0aGlzLm1vZGVscyxbaywwXS5jb25jYXQobikpOmYuYXBwbHkodGhpcy5tb2RlbHMsbikpLGomJnRoaXMuc29ydCh7c2lsZW50OiEwfSksYi5zaWxlbnQpcmV0dXJuIHRoaXM7Zm9yKGM9MCxkPW4ubGVuZ3RoO2Q+YztjKyspKGU9bltjXSkudHJpZ2dlcigiYWRkIixlLHRoaXMsYik7cmV0dXJuIGomJnRoaXMudHJpZ2dlcigic29ydCIsdGhpcyxiKSx0aGlzfSxyZXNldDpmdW5jdGlvbihhLGIpe2J8fChiPXt9KTtmb3IodmFyIGM9MCxkPXRoaXMubW9kZWxzLmxlbmd0aDtkPmM7YysrKXRoaXMuX3JlbW92ZVJlZmVyZW5jZSh0aGlzLm1vZGVsc1tjXSk7cmV0dXJuIGIucHJldmlvdXNNb2RlbHM9dGhpcy5tb2RlbHMsdGhpcy5fcmVzZXQoKSx0aGlzLmFkZChhLGkuZXh0ZW5kKHtzaWxlbnQ6ITB9LGIpKSxiLnNpbGVudHx8dGhpcy50cmlnZ2VyKCJyZXNldCIsdGhpcyxiKSx0aGlzfSxwdXNoOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGE9dGhpcy5fcHJlcGFyZU1vZGVsKGEsYiksdGhpcy5hZGQoYSxpLmV4dGVuZCh7YXQ6dGhpcy5sZW5ndGh9LGIpKSxhfSxwb3A6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5hdCh0aGlzLmxlbmd0aC0xKTtyZXR1cm4gdGhpcy5yZW1vdmUoYixhKSxifSx1bnNoaWZ0OmZ1bmN0aW9uKGEsYil7cmV0dXJuIGE9dGhpcy5fcHJlcGFyZU1vZGVsKGEsYiksdGhpcy5hZGQoYSxpLmV4dGVuZCh7YXQ6MH0sYikpLGF9LHNoaWZ0OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuYXQoMCk7cmV0dXJuIHRoaXMucmVtb3ZlKGIsYSksYn0sc2xpY2U6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5tb2RlbHMuc2xpY2UoYSxiKX0sZ2V0OmZ1bmN0aW9uKGEpe3JldHVybiBudWxsPT1hP3ZvaWQgMDp0aGlzLl9ieUlkW251bGwhPWEuaWQ/YS5pZDphLmNpZHx8YV19LGF0OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLm1vZGVsc1thXX0sd2hlcmU6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gaS5pc0VtcHR5KGEpP2I/dm9pZCAwOltdOnRoaXNbYj8iZmluZCI6ImZpbHRlciJdKGZ1bmN0aW9uKGIpe2Zvcih2YXIgYyBpbiBhKWlmKGFbY10hPT1iLmdldChjKSlyZXR1cm4hMTtyZXR1cm4hMH0pfSxmaW5kV2hlcmU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMud2hlcmUoYSwhMCl9LHNvcnQ6ZnVuY3Rpb24oYSl7aWYoIXRoaXMuY29tcGFyYXRvcil0aHJvdyBuZXcgRXJyb3IoIkNhbm5vdCBzb3J0IGEgc2V0IHdpdGhvdXQgYSBjb21wYXJhdG9yIik7cmV0dXJuIGF8fChhPXt9KSxpLmlzU3RyaW5nKHRoaXMuY29tcGFyYXRvcil8fDE9PT10aGlzLmNvbXBhcmF0b3IubGVuZ3RoP3RoaXMubW9kZWxzPXRoaXMuc29ydEJ5KHRoaXMuY29tcGFyYXRvcix0aGlzKTp0aGlzLm1vZGVscy5zb3J0KGkuYmluZCh0aGlzLmNvbXBhcmF0b3IsdGhpcykpLGEuc2lsZW50fHx0aGlzLnRyaWdnZXIoInNvcnQiLHRoaXMsYSksdGhpc30sc29ydGVkSW5kZXg6ZnVuY3Rpb24oYSxiLGMpe2J8fChiPXRoaXMuY29tcGFyYXRvcik7dmFyIGQ9aS5pc0Z1bmN0aW9uKGIpP2I6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuZ2V0KGIpfTtyZXR1cm4gaS5zb3J0ZWRJbmRleCh0aGlzLm1vZGVscyxhLGQsYyl9LHBsdWNrOmZ1bmN0aW9uKGEpe3JldHVybiBpLmludm9rZSh0aGlzLm1vZGVscywiZ2V0IixhKX0sZmV0Y2g6ZnVuY3Rpb24oYSl7YT1hP2kuY2xvbmUoYSk6e30sdm9pZCAwPT09YS5wYXJzZSYmKGEucGFyc2U9ITApO3ZhciBiPWEuc3VjY2VzcyxjPXRoaXM7cmV0dXJuIGEuc3VjY2Vzcz1mdW5jdGlvbihkKXt2YXIgZT1hLnJlc2V0PyJyZXNldCI6InNldCI7Y1tlXShkLGEpLGImJmIoYyxkLGEpLGMudHJpZ2dlcigic3luYyIsYyxkLGEpfSxNKHRoaXMsYSksdGhpcy5zeW5jKCJyZWFkIix0aGlzLGEpfSxjcmVhdGU6ZnVuY3Rpb24oYSxiKXtpZihiPWI/aS5jbG9uZShiKTp7fSwhKGE9dGhpcy5fcHJlcGFyZU1vZGVsKGEsYikpKXJldHVybiExO2Iud2FpdHx8dGhpcy5hZGQoYSxiKTt2YXIgYz10aGlzLGQ9Yi5zdWNjZXNzO3JldHVybiBiLnN1Y2Nlc3M9ZnVuY3Rpb24oZSl7Yi53YWl0JiZjLmFkZChhLGIpLGQmJmQoYSxlLGIpfSxhLnNhdmUobnVsbCxiKSxhfSxwYXJzZTpmdW5jdGlvbihhKXtyZXR1cm4gYX0sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHRoaXMuY29uc3RydWN0b3IodGhpcy5tb2RlbHMpfSxfcmVzZXQ6ZnVuY3Rpb24oKXt0aGlzLmxlbmd0aD0wLHRoaXMubW9kZWxzPVtdLHRoaXMuX2J5SWQ9e319LF9wcmVwYXJlTW9kZWw6ZnVuY3Rpb24oYSxiKXtpZihhIGluc3RhbmNlb2YgbylyZXR1cm4gYS5jb2xsZWN0aW9ufHwoYS5jb2xsZWN0aW9uPXRoaXMpLGE7Ynx8KGI9e30pLGIuY29sbGVjdGlvbj10aGlzO3ZhciBjPW5ldyB0aGlzLm1vZGVsKGEsYik7cmV0dXJuIGMuX3ZhbGlkYXRlKGEsYik/YzoodGhpcy50cmlnZ2VyKCJpbnZhbGlkIix0aGlzLGEsYiksITEpfSxfcmVtb3ZlUmVmZXJlbmNlOmZ1bmN0aW9uKGEpe3RoaXM9PT1hLmNvbGxlY3Rpb24mJmRlbGV0ZSBhLmNvbGxlY3Rpb24sYS5vZmYoImFsbCIsdGhpcy5fb25Nb2RlbEV2ZW50LHRoaXMpfSxfb25Nb2RlbEV2ZW50OmZ1bmN0aW9uKGEsYixjLGQpeygiYWRkIiE9PWEmJiJyZW1vdmUiIT09YXx8Yz09PXRoaXMpJiYoImRlc3Ryb3kiPT09YSYmdGhpcy5yZW1vdmUoYixkKSxiJiZhPT09ImNoYW5nZToiK2IuaWRBdHRyaWJ1dGUmJihkZWxldGUgdGhpcy5fYnlJZFtiLnByZXZpb3VzKGIuaWRBdHRyaWJ1dGUpXSxudWxsIT1iLmlkJiYodGhpcy5fYnlJZFtiLmlkXT1iKSksdGhpcy50cmlnZ2VyLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9fSk7dmFyIHU9WyJmb3JFYWNoIiwiZWFjaCIsIm1hcCIsImNvbGxlY3QiLCJyZWR1Y2UiLCJmb2xkbCIsImluamVjdCIsInJlZHVjZVJpZ2h0IiwiZm9sZHIiLCJmaW5kIiwiZGV0ZWN0IiwiZmlsdGVyIiwic2VsZWN0IiwicmVqZWN0IiwiZXZlcnkiLCJhbGwiLCJzb21lIiwiYW55IiwiaW5jbHVkZSIsImNvbnRhaW5zIiwiaW52b2tlIiwibWF4IiwibWluIiwidG9BcnJheSIsInNpemUiLCJmaXJzdCIsImhlYWQiLCJ0YWtlIiwiaW5pdGlhbCIsInJlc3QiLCJ0YWlsIiwiZHJvcCIsImxhc3QiLCJ3aXRob3V0IiwiaW5kZXhPZiIsInNodWZmbGUiLCJsYXN0SW5kZXhPZiIsImlzRW1wdHkiLCJjaGFpbiJdO2kuZWFjaCh1LGZ1bmN0aW9uKGEpe3IucHJvdG90eXBlW2FdPWZ1bmN0aW9uKCl7dmFyIGI9Zy5jYWxsKGFyZ3VtZW50cyk7cmV0dXJuIGIudW5zaGlmdCh0aGlzLm1vZGVscyksaVthXS5hcHBseShpLGIpfX0pO3ZhciB2PVsiZ3JvdXBCeSIsImNvdW50QnkiLCJzb3J0QnkiXTtpLmVhY2godixmdW5jdGlvbihhKXtyLnByb3RvdHlwZVthXT1mdW5jdGlvbihiLGMpe3ZhciBkPWkuaXNGdW5jdGlvbihiKT9iOmZ1bmN0aW9uKGEpe3JldHVybiBhLmdldChiKX07cmV0dXJuIGlbYV0odGhpcy5tb2RlbHMsZCxjKX19KTt2YXIgdz1hLlZpZXc9ZnVuY3Rpb24oYSl7dGhpcy5jaWQ9aS51bmlxdWVJZCgidmlldyIpLHRoaXMuX2NvbmZpZ3VyZShhfHx7fSksdGhpcy5fZW5zdXJlRWxlbWVudCgpLHRoaXMuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyksdGhpcy5kZWxlZ2F0ZUV2ZW50cygpfSx4PS9eKFxTKylccyooLiopJC8seT1bIm1vZGVsIiwiY29sbGVjdGlvbiIsImVsIiwiaWQiLCJhdHRyaWJ1dGVzIiwiY2xhc3NOYW1lIiwidGFnTmFtZSIsImV2ZW50cyJdO2kuZXh0ZW5kKHcucHJvdG90eXBlLGose3RhZ05hbWU6ImRpdiIsJDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy4kZWwuZmluZChhKX0saW5pdGlhbGl6ZTpmdW5jdGlvbigpe30scmVuZGVyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9LHJlbW92ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLiRlbC5yZW1vdmUoKSx0aGlzLnN0b3BMaXN0ZW5pbmcoKSx0aGlzfSxzZXRFbGVtZW50OmZ1bmN0aW9uKGIsYyl7cmV0dXJuIHRoaXMuJGVsJiZ0aGlzLnVuZGVsZWdhdGVFdmVudHMoKSx0aGlzLiRlbD1iIGluc3RhbmNlb2YgYS4kP2I6YS4kKGIpLHRoaXMuZWw9dGhpcy4kZWxbMF0sYyE9PSExJiZ0aGlzLmRlbGVnYXRlRXZlbnRzKCksdGhpc30sZGVsZWdhdGVFdmVudHM6ZnVuY3Rpb24oYSl7aWYoIWEmJiEoYT1pLnJlc3VsdCh0aGlzLCJldmVudHMiKSkpcmV0dXJuIHRoaXM7dGhpcy51bmRlbGVnYXRlRXZlbnRzKCk7Zm9yKHZhciBiIGluIGEpe3ZhciBjPWFbYl07aWYoaS5pc0Z1bmN0aW9uKGMpfHwoYz10aGlzW2FbYl1dKSxjKXt2YXIgZD1iLm1hdGNoKHgpLGU9ZFsxXSxmPWRbMl07Yz1pLmJpbmQoYyx0aGlzKSxlKz0iLmRlbGVnYXRlRXZlbnRzIit0aGlzLmNpZCwiIj09PWY/dGhpcy4kZWwub24oZSxjKTp0aGlzLiRlbC5vbihlLGYsYyl9fXJldHVybiB0aGlzfSx1bmRlbGVnYXRlRXZlbnRzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGVsLm9mZigiLmRlbGVnYXRlRXZlbnRzIit0aGlzLmNpZCksdGhpc30sX2NvbmZpZ3VyZTpmdW5jdGlvbihhKXt0aGlzLm9wdGlvbnMmJihhPWkuZXh0ZW5kKHt9LGkucmVzdWx0KHRoaXMsIm9wdGlvbnMiKSxhKSksaS5leHRlbmQodGhpcyxpLnBpY2soYSx5KSksdGhpcy5vcHRpb25zPWF9LF9lbnN1cmVFbGVtZW50OmZ1bmN0aW9uKCl7aWYodGhpcy5lbCl0aGlzLnNldEVsZW1lbnQoaS5yZXN1bHQodGhpcywiZWwiKSwhMSk7ZWxzZXt2YXIgYj1pLmV4dGVuZCh7fSxpLnJlc3VsdCh0aGlzLCJhdHRyaWJ1dGVzIikpO3RoaXMuaWQmJihiLmlkPWkucmVzdWx0KHRoaXMsImlkIikpLHRoaXMuY2xhc3NOYW1lJiYoYlsiY2xhc3MiXT1pLnJlc3VsdCh0aGlzLCJjbGFzc05hbWUiKSk7dmFyIGM9YS4kKCI8IitpLnJlc3VsdCh0aGlzLCJ0YWdOYW1lIikrIj4iKS5hdHRyKGIpO3RoaXMuc2V0RWxlbWVudChjLCExKX19fSksYS5zeW5jPWZ1bmN0aW9uKGIsYyxkKXt2YXIgZT16W2JdO2kuZGVmYXVsdHMoZHx8KGQ9e30pLHtlbXVsYXRlSFRUUDphLmVtdWxhdGVIVFRQLGVtdWxhdGVKU09OOmEuZW11bGF0ZUpTT059KTt2YXIgZj17dHlwZTplLGRhdGFUeXBlOiJqc29uIn07aWYoZC51cmx8fChmLnVybD1pLnJlc3VsdChjLCJ1cmwiKXx8TCgpKSxudWxsIT1kLmRhdGF8fCFjfHwiY3JlYXRlIiE9PWImJiJ1cGRhdGUiIT09YiYmInBhdGNoIiE9PWJ8fChmLmNvbnRlbnRUeXBlPSJhcHBsaWNhdGlvbi9qc29uIixmLmRhdGE9SlNPTi5zdHJpbmdpZnkoZC5hdHRyc3x8Yy50b0pTT04oZCkpKSxkLmVtdWxhdGVKU09OJiYoZi5jb250ZW50VHlwZT0iYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIixmLmRhdGE9Zi5kYXRhP3ttb2RlbDpmLmRhdGF9Ont9KSxkLmVtdWxhdGVIVFRQJiYoIlBVVCI9PT1lfHwiREVMRVRFIj09PWV8fCJQQVRDSCI9PT1lKSl7Zi50eXBlPSJQT1NUIixkLmVtdWxhdGVKU09OJiYoZi5kYXRhLl9tZXRob2Q9ZSk7dmFyIGc9ZC5iZWZvcmVTZW5kO2QuYmVmb3JlU2VuZD1mdW5jdGlvbihhKXtyZXR1cm4gYS5zZXRSZXF1ZXN0SGVhZGVyKCJYLUhUVFAtTWV0aG9kLU92ZXJyaWRlIixlKSxnP2cuYXBwbHkodGhpcyxhcmd1bWVudHMpOnZvaWQgMH19IkdFVCI9PT1mLnR5cGV8fGQuZW11bGF0ZUpTT058fChmLnByb2Nlc3NEYXRhPSExKSwiUEFUQ0giIT09Zi50eXBlfHwhd2luZG93LkFjdGl2ZVhPYmplY3R8fHdpbmRvdy5leHRlcm5hbCYmd2luZG93LmV4dGVybmFsLm1zQWN0aXZlWEZpbHRlcmluZ0VuYWJsZWR8fChmLnhocj1mdW5jdGlvbigpe3JldHVybiBuZXcgQWN0aXZlWE9iamVjdCgiTWljcm9zb2Z0LlhNTEhUVFAiKX0pO3ZhciBoPWQueGhyPWEuYWpheChpLmV4dGVuZChmLGQpKTtyZXR1cm4gYy50cmlnZ2VyKCJyZXF1ZXN0IixjLGgsZCksaH07dmFyIHo9e2NyZWF0ZToiUE9TVCIsdXBkYXRlOiJQVVQiLHBhdGNoOiJQQVRDSCIsImRlbGV0ZSI6IkRFTEVURSIscmVhZDoiR0VUIn07YS5hamF4PWZ1bmN0aW9uKCl7cmV0dXJuIGEuJC5hamF4LmFwcGx5KGEuJCxhcmd1bWVudHMpfTt2YXIgQT1hLlJvdXRlcj1mdW5jdGlvbihhKXthfHwoYT17fSksYS5yb3V0ZXMmJih0aGlzLnJvdXRlcz1hLnJvdXRlcyksdGhpcy5fYmluZFJvdXRlcygpLHRoaXMuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LEI9L1woKC4qPylcKS9nLEM9LyhcKFw/KT86XHcrL2csRD0vXCpcdysvZyxFPS9bXC17fVxbXF0rPy4sXFxcXiR8I1xzXS9nO2kuZXh0ZW5kKEEucHJvdG90eXBlLGose2luaXRpYWxpemU6ZnVuY3Rpb24oKXt9LHJvdXRlOmZ1bmN0aW9uKGIsYyxkKXtpLmlzUmVnRXhwKGIpfHwoYj10aGlzLl9yb3V0ZVRvUmVnRXhwKGIpKSxpLmlzRnVuY3Rpb24oYykmJihkPWMsYz0iIiksZHx8KGQ9dGhpc1tjXSk7dmFyIGU9dGhpcztyZXR1cm4gYS5oaXN0b3J5LnJvdXRlKGIsZnVuY3Rpb24oZil7dmFyIGc9ZS5fZXh0cmFjdFBhcmFtZXRlcnMoYixmKTtkJiZkLmFwcGx5KGUsZyksZS50cmlnZ2VyLmFwcGx5KGUsWyJyb3V0ZToiK2NdLmNvbmNhdChnKSksZS50cmlnZ2VyKCJyb3V0ZSIsYyxnKSxhLmhpc3RvcnkudHJpZ2dlcigicm91dGUiLGUsYyxnKX0pLHRoaXN9LG5hdmlnYXRlOmZ1bmN0aW9uKGIsYyl7cmV0dXJuIGEuaGlzdG9yeS5uYXZpZ2F0ZShiLGMpLHRoaXN9LF9iaW5kUm91dGVzOmZ1bmN0aW9uKCl7aWYodGhpcy5yb3V0ZXMpe3RoaXMucm91dGVzPWkucmVzdWx0KHRoaXMsInJvdXRlcyIpO2Zvcih2YXIgYSxiPWkua2V5cyh0aGlzLnJvdXRlcyk7bnVsbCE9KGE9Yi5wb3AoKSk7KXRoaXMucm91dGUoYSx0aGlzLnJvdXRlc1thXSl9fSxfcm91dGVUb1JlZ0V4cDpmdW5jdGlvbihhKXtyZXR1cm4gYT1hLnJlcGxhY2UoRSwiXFwkJiIpLnJlcGxhY2UoQiwiKD86JDEpPyIpLnJlcGxhY2UoQyxmdW5jdGlvbihhLGIpe3JldHVybiBiP2E6IihbXi9dKykifSkucmVwbGFjZShELCIoLio/KSIpLG5ldyBSZWdFeHAoIl4iK2ErIiQiKX0sX2V4dHJhY3RQYXJhbWV0ZXJzOmZ1bmN0aW9uKGEsYil7dmFyIGM9YS5leGVjKGIpLnNsaWNlKDEpO3JldHVybiBpLm1hcChjLGZ1bmN0aW9uKGEpe3JldHVybiBhP2RlY29kZVVSSUNvbXBvbmVudChhKTpudWxsfSl9fSk7dmFyIEY9YS5IaXN0b3J5PWZ1bmN0aW9uKCl7dGhpcy5oYW5kbGVycz1bXSxpLmJpbmRBbGwodGhpcywiY2hlY2tVcmwiKSwidW5kZWZpbmVkIiE9dHlwZW9mIHdpbmRvdyYmKHRoaXMubG9jYXRpb249d2luZG93LmxvY2F0aW9uLHRoaXMuaGlzdG9yeT13aW5kb3cuaGlzdG9yeSl9LEc9L15bI1wvXXxccyskL2csSD0vXlwvK3xcLyskL2csST0vbXNpZSBbXHcuXSsvLEo9L1wvJC87Ri5zdGFydGVkPSExLGkuZXh0ZW5kKEYucHJvdG90eXBlLGose2ludGVydmFsOjUwLGdldEhhc2g6ZnVuY3Rpb24oYSl7dmFyIGI9KGF8fHRoaXMpLmxvY2F0aW9uLmhyZWYubWF0Y2goLyMoLiopJC8pO3JldHVybiBiP2JbMV06IiJ9LGdldEZyYWdtZW50OmZ1bmN0aW9uKGEsYil7aWYobnVsbD09YSlpZih0aGlzLl9oYXNQdXNoU3RhdGV8fCF0aGlzLl93YW50c0hhc2hDaGFuZ2V8fGIpe2E9dGhpcy5sb2NhdGlvbi5wYXRobmFtZTt2YXIgYz10aGlzLnJvb3QucmVwbGFjZShKLCIiKTthLmluZGV4T2YoYyl8fChhPWEuc3Vic3RyKGMubGVuZ3RoKSl9ZWxzZSBhPXRoaXMuZ2V0SGFzaCgpO3JldHVybiBhLnJlcGxhY2UoRywiIil9LHN0YXJ0OmZ1bmN0aW9uKGIpe2lmKEYuc3RhcnRlZCl0aHJvdyBuZXcgRXJyb3IoIkJhY2tib25lLmhpc3RvcnkgaGFzIGFscmVhZHkgYmVlbiBzdGFydGVkIik7Ri5zdGFydGVkPSEwLHRoaXMub3B0aW9ucz1pLmV4dGVuZCh7fSx7cm9vdDoiLyJ9LHRoaXMub3B0aW9ucyxiKSx0aGlzLnJvb3Q9dGhpcy5vcHRpb25zLnJvb3QsdGhpcy5fd2FudHNIYXNoQ2hhbmdlPXRoaXMub3B0aW9ucy5oYXNoQ2hhbmdlIT09ITEsdGhpcy5fd2FudHNQdXNoU3RhdGU9ISF0aGlzLm9wdGlvbnMucHVzaFN0YXRlLHRoaXMuX2hhc1B1c2hTdGF0ZT0hISh0aGlzLm9wdGlvbnMucHVzaFN0YXRlJiZ0aGlzLmhpc3RvcnkmJnRoaXMuaGlzdG9yeS5wdXNoU3RhdGUpOwp2YXIgYz10aGlzLmdldEZyYWdtZW50KCksZD1kb2N1bWVudC5kb2N1bWVudE1vZGUsZT1JLmV4ZWMobmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpKSYmKCFkfHw3Pj1kKTt0aGlzLnJvb3Q9KCIvIit0aGlzLnJvb3QrIi8iKS5yZXBsYWNlKEgsIi8iKSxlJiZ0aGlzLl93YW50c0hhc2hDaGFuZ2UmJih0aGlzLmlmcmFtZT1hLiQoJzxpZnJhbWUgc3JjPSJqYXZhc2NyaXB0OjAiIHRhYmluZGV4PSItMSIgLz4nKS5oaWRlKCkuYXBwZW5kVG8oImJvZHkiKVswXS5jb250ZW50V2luZG93LHRoaXMubmF2aWdhdGUoYykpLHRoaXMuX2hhc1B1c2hTdGF0ZT9hLiQod2luZG93KS5vbigicG9wc3RhdGUiLHRoaXMuY2hlY2tVcmwpOnRoaXMuX3dhbnRzSGFzaENoYW5nZSYmIm9uaGFzaGNoYW5nZSJpbiB3aW5kb3cmJiFlP2EuJCh3aW5kb3cpLm9uKCJoYXNoY2hhbmdlIix0aGlzLmNoZWNrVXJsKTp0aGlzLl93YW50c0hhc2hDaGFuZ2UmJih0aGlzLl9jaGVja1VybEludGVydmFsPXNldEludGVydmFsKHRoaXMuY2hlY2tVcmwsdGhpcy5pbnRlcnZhbCkpLHRoaXMuZnJhZ21lbnQ9Yzt2YXIgZj10aGlzLmxvY2F0aW9uLGc9Zi5wYXRobmFtZS5yZXBsYWNlKC9bXlwvXSQvLCIkJi8iKT09PXRoaXMucm9vdDtyZXR1cm4gdGhpcy5fd2FudHNIYXNoQ2hhbmdlJiZ0aGlzLl93YW50c1B1c2hTdGF0ZSYmIXRoaXMuX2hhc1B1c2hTdGF0ZSYmIWc/KHRoaXMuZnJhZ21lbnQ9dGhpcy5nZXRGcmFnbWVudChudWxsLCEwKSx0aGlzLmxvY2F0aW9uLnJlcGxhY2UodGhpcy5yb290K3RoaXMubG9jYXRpb24uc2VhcmNoKyIjIit0aGlzLmZyYWdtZW50KSwhMCk6KHRoaXMuX3dhbnRzUHVzaFN0YXRlJiZ0aGlzLl9oYXNQdXNoU3RhdGUmJmcmJmYuaGFzaCYmKHRoaXMuZnJhZ21lbnQ9dGhpcy5nZXRIYXNoKCkucmVwbGFjZShHLCIiKSx0aGlzLmhpc3RvcnkucmVwbGFjZVN0YXRlKHt9LGRvY3VtZW50LnRpdGxlLHRoaXMucm9vdCt0aGlzLmZyYWdtZW50K2Yuc2VhcmNoKSksdGhpcy5vcHRpb25zLnNpbGVudD92b2lkIDA6dGhpcy5sb2FkVXJsKCkpfSxzdG9wOmZ1bmN0aW9uKCl7YS4kKHdpbmRvdykub2ZmKCJwb3BzdGF0ZSIsdGhpcy5jaGVja1VybCkub2ZmKCJoYXNoY2hhbmdlIix0aGlzLmNoZWNrVXJsKSxjbGVhckludGVydmFsKHRoaXMuX2NoZWNrVXJsSW50ZXJ2YWwpLEYuc3RhcnRlZD0hMX0scm91dGU6ZnVuY3Rpb24oYSxiKXt0aGlzLmhhbmRsZXJzLnVuc2hpZnQoe3JvdXRlOmEsY2FsbGJhY2s6Yn0pfSxjaGVja1VybDpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZ2V0RnJhZ21lbnQoKTtyZXR1cm4gYT09PXRoaXMuZnJhZ21lbnQmJnRoaXMuaWZyYW1lJiYoYT10aGlzLmdldEZyYWdtZW50KHRoaXMuZ2V0SGFzaCh0aGlzLmlmcmFtZSkpKSxhPT09dGhpcy5mcmFnbWVudD8hMToodGhpcy5pZnJhbWUmJnRoaXMubmF2aWdhdGUoYSksdm9pZCh0aGlzLmxvYWRVcmwoKXx8dGhpcy5sb2FkVXJsKHRoaXMuZ2V0SGFzaCgpKSkpfSxsb2FkVXJsOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZnJhZ21lbnQ9dGhpcy5nZXRGcmFnbWVudChhKSxjPWkuYW55KHRoaXMuaGFuZGxlcnMsZnVuY3Rpb24oYSl7cmV0dXJuIGEucm91dGUudGVzdChiKT8oYS5jYWxsYmFjayhiKSwhMCk6dm9pZCAwfSk7cmV0dXJuIGN9LG5hdmlnYXRlOmZ1bmN0aW9uKGEsYil7aWYoIUYuc3RhcnRlZClyZXR1cm4hMTtpZihiJiZiIT09ITB8fChiPXt0cmlnZ2VyOmJ9KSxhPXRoaXMuZ2V0RnJhZ21lbnQoYXx8IiIpLHRoaXMuZnJhZ21lbnQhPT1hKXt0aGlzLmZyYWdtZW50PWE7dmFyIGM9dGhpcy5yb290K2E7aWYodGhpcy5faGFzUHVzaFN0YXRlKXRoaXMuaGlzdG9yeVtiLnJlcGxhY2U/InJlcGxhY2VTdGF0ZSI6InB1c2hTdGF0ZSJdKHt9LGRvY3VtZW50LnRpdGxlLGMpO2Vsc2V7aWYoIXRoaXMuX3dhbnRzSGFzaENoYW5nZSlyZXR1cm4gdGhpcy5sb2NhdGlvbi5hc3NpZ24oYyk7dGhpcy5fdXBkYXRlSGFzaCh0aGlzLmxvY2F0aW9uLGEsYi5yZXBsYWNlKSx0aGlzLmlmcmFtZSYmYSE9PXRoaXMuZ2V0RnJhZ21lbnQodGhpcy5nZXRIYXNoKHRoaXMuaWZyYW1lKSkmJihiLnJlcGxhY2V8fHRoaXMuaWZyYW1lLmRvY3VtZW50Lm9wZW4oKS5jbG9zZSgpLHRoaXMuX3VwZGF0ZUhhc2godGhpcy5pZnJhbWUubG9jYXRpb24sYSxiLnJlcGxhY2UpKX1iLnRyaWdnZXImJnRoaXMubG9hZFVybChhKX19LF91cGRhdGVIYXNoOmZ1bmN0aW9uKGEsYixjKXtpZihjKXt2YXIgZD1hLmhyZWYucmVwbGFjZSgvKGphdmFzY3JpcHQ6fCMpLiokLywiIik7YS5yZXBsYWNlKGQrIiMiK2IpfWVsc2UgYS5oYXNoPSIjIitifX0pLGEuaGlzdG9yeT1uZXcgRjt2YXIgSz1mdW5jdGlvbihhLGIpe3ZhciBjLGQ9dGhpcztjPWEmJmkuaGFzKGEsImNvbnN0cnVjdG9yIik/YS5jb25zdHJ1Y3RvcjpmdW5jdGlvbigpe3JldHVybiBkLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0saS5leHRlbmQoYyxkLGIpO3ZhciBlPWZ1bmN0aW9uKCl7dGhpcy5jb25zdHJ1Y3Rvcj1jfTtyZXR1cm4gZS5wcm90b3R5cGU9ZC5wcm90b3R5cGUsYy5wcm90b3R5cGU9bmV3IGUsYSYmaS5leHRlbmQoYy5wcm90b3R5cGUsYSksYy5fX3N1cGVyX189ZC5wcm90b3R5cGUsY307by5leHRlbmQ9ci5leHRlbmQ9QS5leHRlbmQ9dy5leHRlbmQ9Ri5leHRlbmQ9Szt2YXIgTD1mdW5jdGlvbigpe3Rocm93IG5ldyBFcnJvcignQSAidXJsIiBwcm9wZXJ0eSBvciBmdW5jdGlvbiBtdXN0IGJlIHNwZWNpZmllZCcpfSxNPWZ1bmN0aW9uKGEsYil7dmFyIGM9Yi5lcnJvcjtiLmVycm9yPWZ1bmN0aW9uKGQpe2MmJmMoYSxkLGIpLGEudHJpZ2dlcigiZXJyb3IiLGEsZCxiKX19fS5jYWxsKHRoaXMpLGMoImJhY2tib25lIixbInVuZGVyc2NvcmUiLCJqcXVlcnkiXSxmdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgYjtyZXR1cm4gYnx8YS5CYWNrYm9uZX19KHRoaXMpKSxmdW5jdGlvbihhLGQpeyJvYmplY3QiPT10eXBlb2YgZXhwb3J0cyYmImZ1bmN0aW9uIj09dHlwZW9mIGI/bW9kdWxlLmV4cG9ydHM9ZChiKCJiYWNrYm9uZSIpKToiZnVuY3Rpb24iPT10eXBlb2YgYyYmYy5hbWQ/YygibG9jYWxzdG9yYWdlIixbImJhY2tib25lIl0sZnVuY3Rpb24oYil7cmV0dXJuIGQoYnx8YS5CYWNrYm9uZSl9KTpkKEJhY2tib25lKX0odGhpcyxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKCl7cmV0dXJuKDY1NTM2KigxK01hdGgucmFuZG9tKCkpfDApLnRvU3RyaW5nKDE2KS5zdWJzdHJpbmcoMSl9ZnVuY3Rpb24gYygpe3JldHVybiBiKCkrYigpKyItIitiKCkrIi0iK2IoKSsiLSIrYigpKyItIitiKCkrYigpK2IoKX1mdW5jdGlvbiBkKGEpe3JldHVybiBhPT09T2JqZWN0KGEpfWZ1bmN0aW9uIGUoYSxiKXtmb3IodmFyIGM9YS5sZW5ndGg7Yy0tOylpZihhW2NdPT09YilyZXR1cm4hMDtyZXR1cm4hMX1mdW5jdGlvbiBmKGEsYil7Zm9yKHZhciBjIGluIGIpYVtjXT1iW2NdO3JldHVybiBhfXJldHVybiBhLkxvY2FsU3RvcmFnZT13aW5kb3cuU3RvcmU9ZnVuY3Rpb24oYSxiKXtpZighdGhpcy5sb2NhbFN0b3JhZ2UpdGhyb3ciQmFja2JvbmUubG9jYWxTdG9yYWdlOiBFbnZpcm9ubWVudCBkb2VzIG5vdCBzdXBwb3J0IGxvY2FsU3RvcmFnZS4iO3RoaXMubmFtZT1hLHRoaXMuc2VyaWFsaXplcj1ifHx7c2VyaWFsaXplOmZ1bmN0aW9uKGEpe3JldHVybiBkKGEpP0pTT04uc3RyaW5naWZ5KGEpOmF9LGRlc2VyaWFsaXplOmZ1bmN0aW9uKGEpe3JldHVybiBhJiZKU09OLnBhcnNlKGEpfX07dmFyIGM9dGhpcy5sb2NhbFN0b3JhZ2UoKS5nZXRJdGVtKHRoaXMubmFtZSk7dGhpcy5yZWNvcmRzPWMmJmMuc3BsaXQoIiwiKXx8W119LGYoYS5Mb2NhbFN0b3JhZ2UucHJvdG90eXBlLHtzYXZlOmZ1bmN0aW9uKCl7dGhpcy5sb2NhbFN0b3JhZ2UoKS5zZXRJdGVtKHRoaXMubmFtZSx0aGlzLnJlY29yZHMuam9pbigiLCIpKX0sY3JlYXRlOmZ1bmN0aW9uKGEpe3JldHVybiBhLmlkfHwoYS5pZD1jKCksYS5zZXQoYS5pZEF0dHJpYnV0ZSxhLmlkKSksdGhpcy5sb2NhbFN0b3JhZ2UoKS5zZXRJdGVtKHRoaXMuX2l0ZW1OYW1lKGEuaWQpLHRoaXMuc2VyaWFsaXplci5zZXJpYWxpemUoYSkpLHRoaXMucmVjb3Jkcy5wdXNoKGEuaWQudG9TdHJpbmcoKSksdGhpcy5zYXZlKCksdGhpcy5maW5kKGEpIT09ITF9LHVwZGF0ZTpmdW5jdGlvbihhKXt0aGlzLmxvY2FsU3RvcmFnZSgpLnNldEl0ZW0odGhpcy5faXRlbU5hbWUoYS5pZCksdGhpcy5zZXJpYWxpemVyLnNlcmlhbGl6ZShhKSk7dmFyIGI9YS5pZC50b1N0cmluZygpO3JldHVybiBlKHRoaXMucmVjb3JkcyxiKXx8KHRoaXMucmVjb3Jkcy5wdXNoKGIpLHRoaXMuc2F2ZSgpKSx0aGlzLmZpbmQoYSkhPT0hMX0sZmluZDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5zZXJpYWxpemVyLmRlc2VyaWFsaXplKHRoaXMubG9jYWxTdG9yYWdlKCkuZ2V0SXRlbSh0aGlzLl9pdGVtTmFtZShhLmlkKSkpfSxmaW5kQWxsOmZ1bmN0aW9uKCl7Zm9yKHZhciBhLGIsYz1bXSxkPTA7ZDx0aGlzLnJlY29yZHMubGVuZ3RoO2QrKylhPXRoaXMucmVjb3Jkc1tkXSxiPXRoaXMuc2VyaWFsaXplci5kZXNlcmlhbGl6ZSh0aGlzLmxvY2FsU3RvcmFnZSgpLmdldEl0ZW0odGhpcy5faXRlbU5hbWUoYSkpKSxudWxsIT1iJiZjLnB1c2goYik7cmV0dXJuIGN9LGRlc3Ryb3k6ZnVuY3Rpb24oYSl7dGhpcy5sb2NhbFN0b3JhZ2UoKS5yZW1vdmVJdGVtKHRoaXMuX2l0ZW1OYW1lKGEuaWQpKTtmb3IodmFyIGI9YS5pZC50b1N0cmluZygpLGM9MDtjPHRoaXMucmVjb3Jkcy5sZW5ndGg7YysrKXRoaXMucmVjb3Jkc1tjXT09PWImJnRoaXMucmVjb3Jkcy5zcGxpY2UoYywxKTtyZXR1cm4gdGhpcy5zYXZlKCksYX0sbG9jYWxTdG9yYWdlOmZ1bmN0aW9uKCl7cmV0dXJuIGxvY2FsU3RvcmFnZX0sX2NsZWFyOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5sb2NhbFN0b3JhZ2UoKSxiPW5ldyBSZWdFeHAoIl4iK3RoaXMubmFtZSsiLSIpO2EucmVtb3ZlSXRlbSh0aGlzLm5hbWUpO2Zvcih2YXIgYyBpbiBhKWIudGVzdChjKSYmYS5yZW1vdmVJdGVtKGMpO3RoaXMucmVjb3Jkcy5sZW5ndGg9MH0sX3N0b3JhZ2VTaXplOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubG9jYWxTdG9yYWdlKCkubGVuZ3RofSxfaXRlbU5hbWU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMubmFtZSsiLSIrYX19KSxhLkxvY2FsU3RvcmFnZS5zeW5jPXdpbmRvdy5TdG9yZS5zeW5jPWEubG9jYWxTeW5jPWZ1bmN0aW9uKGIsYyxkKXt2YXIgZSxmLGc9Yy5sb2NhbFN0b3JhZ2V8fGMuY29sbGVjdGlvbi5sb2NhbFN0b3JhZ2UsaD1hLiQ/YS4kLkRlZmVycmVkJiZhLiQuRGVmZXJyZWQoKTphLkRlZmVycmVkJiZhLkRlZmVycmVkKCk7dHJ5e3N3aXRjaChiKXtjYXNlInJlYWQiOmU9dm9pZCAwIT1jLmlkP2cuZmluZChjKTpnLmZpbmRBbGwoKTticmVhaztjYXNlImNyZWF0ZSI6ZT1nLmNyZWF0ZShjKTticmVhaztjYXNlInVwZGF0ZSI6ZT1nLnVwZGF0ZShjKTticmVhaztjYXNlImRlbGV0ZSI6ZT1nLmRlc3Ryb3koYyl9fWNhdGNoKGkpe2Y9MjI9PT1pLmNvZGUmJjA9PT1nLl9zdG9yYWdlU2l6ZSgpPyJQcml2YXRlIGJyb3dzaW5nIGlzIHVuc3VwcG9ydGVkIjppLm1lc3NhZ2V9cmV0dXJuIGU/KGQmJmQuc3VjY2VzcyYmKCIwLjkuMTAiPT09YS5WRVJTSU9OP2Quc3VjY2VzcyhjLGUsZCk6ZC5zdWNjZXNzKGUpKSxoJiZoLnJlc29sdmUoZSkpOihmPWY/ZjoiUmVjb3JkIE5vdCBGb3VuZCIsZCYmZC5lcnJvciYmKCIwLjkuMTAiPT09YS5WRVJTSU9OP2QuZXJyb3IoYyxmLGQpOmQuZXJyb3IoZikpLGgmJmgucmVqZWN0KGYpKSxkJiZkLmNvbXBsZXRlJiZkLmNvbXBsZXRlKGUpLGgmJmgucHJvbWlzZSgpfSxhLmFqYXhTeW5jPWEuc3luYyxhLmdldFN5bmNNZXRob2Q9ZnVuY3Rpb24oYil7cmV0dXJuIGIubG9jYWxTdG9yYWdlfHxiLmNvbGxlY3Rpb24mJmIuY29sbGVjdGlvbi5sb2NhbFN0b3JhZ2U/YS5sb2NhbFN5bmM6YS5hamF4U3luY30sYS5zeW5jPWZ1bmN0aW9uKGIsYyxkKXtyZXR1cm4gYS5nZXRTeW5jTWV0aG9kKGMpLmFwcGx5KHRoaXMsW2IsYyxkXSl9LGEuTG9jYWxTdG9yYWdlfSksYygiZ2FsbGVyeS91dGlscy9yZXNwb25zaXZlLmFkYXB0ZXIiLFsianF1ZXJ5IiwidW5kZXJzY29yZSJdLGZ1bmN0aW9uKGEpe3ZhciBiPXtnZXRNZWRpYVR5cGU6ZnVuY3Rpb24oKXtpZih0aGlzLm1lZGlhVHlwZSlyZXR1cm4gdGhpcy5tZWRpYVR5cGU7aWYoIXdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKXJldHVybiB0aGlzLm1lZGlhVHlwZT0iZGVza3RvcCI7dmFyIGE9d2luZG93LmdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuYm9keSwiOmFmdGVyIikuZ2V0UHJvcGVydHlWYWx1ZSgiY29udGVudCIpLm1hdGNoKC9bYS16QS1aX1wtMC05XSsvZyk7cmV0dXJuIHRoaXMubWVkaWFUeXBlPWEmJmEubGVuZ3RoPjA/YVswXToiZGVza3RvcCJ9LGdldE9wdGlvbkJ5TWVkaWFUeXBlOmZ1bmN0aW9uKGIsYyl7cmV0dXJuIGEuaXNQbGFpbk9iamVjdChiW2NdKT9iW2NdW3RoaXMuZ2V0TWVkaWFUeXBlKCldOmJbY119LHByZXNldE1hcHBlclRodW1iOmZ1bmN0aW9uKGEpe3ZhciBiO3N3aXRjaCh0aGlzLmdldE1lZGlhVHlwZSgpKXtjYXNlImRlc2t0b3AiOmNhc2UicGFkIjpjYXNlInBob25lIjpiPWEuZ2V0KCJ0aHVtYiIpfXJldHVybiBifSxwcmVzZXRNYXBwZXJMYXJnZTpmdW5jdGlvbihhKXt2YXIgYjtzd2l0Y2godGhpcy5nZXRNZWRpYVR5cGUoKSl7Y2FzZSJkZXNrdG9wIjpiPWEuZ2V0KCJsYXJnZSIpO2JyZWFrO2Nhc2UicGFkIjpiPWEuZ2V0KCJsYXJnZV9wYWRzIik7YnJlYWs7Y2FzZSJwaG9uZSI6Yj1hLmdldCgibGFyZ2VfcGhvbmVzIil9cmV0dXJuIGJ9fTtyZXR1cm4gYn0pLGMoImdhbGxlcnkvbW9kZWxzL2ltYWdlLm1vZGVsIixbInVuZGVyc2NvcmUiLCJiYWNrYm9uZSIsImdhbGxlcnkvdXRpbHMvcmVzcG9uc2l2ZS5hZGFwdGVyIl0sZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWIuTW9kZWwuZXh0ZW5kKHtpZEF0dHJpYnV0ZToiZGlnZXN0IixkZWZhdWx0czpmdW5jdGlvbigpe3JldHVybnt0aHVtYjp7c3JjOnZvaWQgMCx3aWR0aDp2b2lkIDAsaGVpZ2h0OnZvaWQgMCxfdmlldzp2b2lkIDB9LGxhcmdlOntzcmM6dm9pZCAwLHdpZHRoOnZvaWQgMCxoZWlnaHQ6dm9pZCAwLF92aWV3OnZvaWQgMH0sZmlsZW5hbWU6dm9pZCAwLGZpbGVuYW1lT3JpZzp2b2lkIDAsZGlnZXN0OnZvaWQgMCxpbmRleDp2b2lkIDAsb3JpZW50YXRpb246dm9pZCAwLHJhdGlvOjAsZXhpZjp7fSxtZXRhOnt9LGltYWdlUGFnZVBhdGg6dm9pZCAwfX0saW5pdGlhbGl6ZTpmdW5jdGlvbihiLGMpe3ZvaWQgMCE9PWMmJihhLmZvckVhY2goYy5wcmVzZXRzLGEuYmluZChmdW5jdGlvbihhLGMpe3RoaXMuYXR0cmlidXRlc1tjXS5zcmM9YS5iYXNldXJsKyIvIitiLmZpbGVuYW1lfSx0aGlzKSksdGhpcy5hdHRyaWJ1dGVzLmZpbGVuYW1lT3JpZz1iLmZpbGVuYW1lLnJlcGxhY2UoIi0iK2IuZGlnZXN0LCIiKSxjLmdhbGxlcnkmJmMuZ2FsbGVyeS5pbWFnZVBhZ2VzJiZjLmdhbGxlcnkuYmFzZXBhdGgmJih0aGlzLmF0dHJpYnV0ZXMuaW1hZ2VQYWdlUGF0aD1jLmdhbGxlcnkucGF0aC5yZXBsYWNlKC9cLmh0bWwkLywiIikrIi8iK2IuZGlnZXN0KSl9LGdldFRodW1iOmZ1bmN0aW9uKCl7cmV0dXJuIGMucHJlc2V0TWFwcGVyVGh1bWIodGhpcyl9LGdldExhcmdlOmZ1bmN0aW9uKCl7cmV0dXJuIGMucHJlc2V0TWFwcGVyTGFyZ2UodGhpcyl9LGdldFRodW1iVmlldzpmdW5jdGlvbigpe3JldHVybiB0aGlzLl90aHVtYlZpZXd9LHNldFRodW1iVmlldzpmdW5jdGlvbihhKXt0aGlzLl90aHVtYlZpZXc9YX0sZ2V0TGFyZ2VWaWV3OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2xhcmdlVmlld30sc2V0TGFyZ2VWaWV3OmZ1bmN0aW9uKGEpe3RoaXMuX2xhcmdlVmlldz1hfSxpbmRleDpmdW5jdGlvbigpe3JldHVybiB2b2lkIDA9PT10aGlzLmF0dHJpYnV0ZXMuaW5kZXg/dGhpcy5jb2xsZWN0aW9uP3RoaXMuY29sbGVjdGlvbi5pbmRleE9mKHRoaXMpOnZvaWQgMDp0aGlzLmF0dHJpYnV0ZXMuaW5kZXh9fSk7cmV0dXJuIGR9KSxjKCJnYWxsZXJ5L2NvbGxlY3Rpb25zL2ltYWdlLmNvbGxlY3Rpb24iLFsiYmFja2JvbmUiLCJsb2NhbHN0b3JhZ2UiLCJnYWxsZXJ5L21vZGVscy9pbWFnZS5tb2RlbCJdLGZ1bmN0aW9uKGEsYixjKXt2YXIgZD1hLkNvbGxlY3Rpb24uZXh0ZW5kKHttb2RlbDpjLGluaXRpYWxpemU6ZnVuY3Rpb24oYixjKXtjLmxvY2FsU3RvcmFnZUtleSYmKHRoaXMua2V5PWMubG9jYWxTdG9yYWdlS2V5LHRoaXMubG9jYWxTdG9yYWdlPW5ldyBhLkxvY2FsU3RvcmFnZSh0aGlzLmtleSkpfSxwYXJzZTpmdW5jdGlvbihhKXtyZXR1cm4gYX19KTtyZXR1cm4gZH0pLGMoInBsdWdpbnMvcGx1Z2lucyIsW10sZnVuY3Rpb24oKXtmb3IodmFyIGEsYj1mdW5jdGlvbigpe30sYz1bImFzc2VydCIsImNsZWFyIiwiY291bnQiLCJkZWJ1ZyIsImRpciIsImRpcnhtbCIsImVycm9yIiwiZXhjZXB0aW9uIiwiZ3JvdXAiLCJncm91cENvbGxhcHNlZCIsImdyb3VwRW5kIiwiaW5mbyIsImxvZyIsIm1hcmtUaW1lbGluZSIsInByb2ZpbGUiLCJwcm9maWxlRW5kIiwidGFibGUiLCJ0aW1lIiwidGltZUVuZCIsInRpbWVTdGFtcCIsInRyYWNlIiwid2FybiJdLGQ9Yy5sZW5ndGgsZT13aW5kb3cuY29uc29sZT13aW5kb3cuY29uc29sZXx8e307ZC0tOylhPWNbZF0sZVthXXx8KGVbYV09Yik7TnVtYmVyLnByb3RvdHlwZS5wYWRMZWZ0PWZ1bmN0aW9uKGEsYil7dmFyIGM9U3RyaW5nKGF8fDEwKS5sZW5ndGgtU3RyaW5nKHRoaXMpLmxlbmd0aCsxO3JldHVybiBjPjA/bmV3IEFycmF5KGMpLmpvaW4oYnx8IjAiKSt0aGlzOnRoaXN9LERhdGUucGFyc2VNYW51YWxseT1mdW5jdGlvbihhKXthPWEuc3BsaXQoIiAiKTt2YXIgYj1hWzBdLnNwbGl0KCItIiksYz1hWzFdLnNwbGl0KCI6Iik7cmV0dXJuIGI9bmV3IERhdGUoRGF0ZS5VVEMocGFyc2VJbnQoYlswXSwxMCkscGFyc2VJbnQoYlsxXSwxMCktMSxwYXJzZUludChiWzJdLDEwKSxwYXJzZUludChjWzBdLDEwKSxwYXJzZUludChjWzFdLDEwKSxwYXJzZUludChjWzJdLDEwKSkpfSx3aW5kb3cucGFyc2VVcmk9ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPXdpbmRvdy5wYXJzZVVyaS5vcHRpb25zLGM9Yi5wYXJzZXJbYi5zdHJpY3RNb2RlPyJzdHJpY3QiOiJsb29zZSJdLmV4ZWMoYSksZD17fSxlPTE0O2UtLTspZFtiLmtleVtlXV09Y1tlXXx8IiI7cmV0dXJuIGRbYi5xLm5hbWVdPXt9LGRbYi5rZXlbMTJdXS5yZXBsYWNlKGIucS5wYXJzZXIsZnVuY3Rpb24oYSxjLGUpe2MmJihkW2IucS5uYW1lXVtjXT1lKX0pLGR9LHdpbmRvdy5wYXJzZVVyaS5vcHRpb25zPXtzdHJpY3RNb2RlOiExLGtleTpbInNvdXJjZSIsInByb3RvY29sIiwiYXV0aG9yaXR5IiwidXNlckluZm8iLCJ1c2VyIiwicGFzc3dvcmQiLCJob3N0IiwicG9ydCIsInJlbGF0aXZlIiwicGF0aCIsImRpcmVjdG9yeSIsImZpbGUiLCJxdWVyeSIsImFuY2hvciJdLHE6e25hbWU6InF1ZXJ5S2V5IixwYXJzZXI6Lyg/Ol58JikoW14mPV0qKT0/KFteJl0qKS9nfSxwYXJzZXI6e3N0cmljdDovXig/OihbXjpcLz8jXSspOik/KD86XC9cLygoPzooKFteOkBdKikoPzo6KFteOkBdKikpPyk/QCk/KFteOlwvPyNdKikoPzo6KFxkKikpPykpPygoKCg/OltePyNcL10qXC8pKikoW14/I10qKSkoPzpcPyhbXiNdKikpPyg/OiMoLiopKT8pLyxsb29zZTovXig/Oig/IVteOkBdKzpbXjpAXC9dKkApKFteOlwvPyMuXSspOik/KD86XC9cLyk/KCg/OigoW146QF0qKSg/OjooW146QF0qKSk/KT9AKT8oW146XC8/I10qKSg/OjooXGQqKSk/KSgoKFwvKD86W14/I10oPyFbXj8jXC9dKlwuW14/I1wvLl0rKD86Wz8jXXwkKSkpKlwvPyk/KFtePyNcL10qKSkoPzpcPyhbXiNdKikpPyg/OiMoLiopKT8pL319fSksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhLGIpe3ZhciBjPSg2NTUzNSZhKSsoNjU1MzUmYiksZD0oYT4+MTYpKyhiPj4xNikrKGM+PjE2KTtyZXR1cm4gZDw8MTZ8NjU1MzUmY31mdW5jdGlvbiBkKGEsYil7cmV0dXJuIGE8PGJ8YT4+PjMyLWJ9ZnVuY3Rpb24gZShhLGMsZSxmLGcsaCl7cmV0dXJuIGIoZChiKGIoYyxhKSxiKGYsaCkpLGcpLGUpfWZ1bmN0aW9uIGYoYSxiLGMsZCxmLGcsaCl7cmV0dXJuIGUoYiZjfH5iJmQsYSxiLGYsZyxoKX1mdW5jdGlvbiBnKGEsYixjLGQsZixnLGgpe3JldHVybiBlKGImZHxjJn5kLGEsYixmLGcsaCl9ZnVuY3Rpb24gaChhLGIsYyxkLGYsZyxoKXtyZXR1cm4gZShiXmNeZCxhLGIsZixnLGgpfWZ1bmN0aW9uIGkoYSxiLGMsZCxmLGcsaCl7cmV0dXJuIGUoY14oYnx+ZCksYSxiLGYsZyxoKX1mdW5jdGlvbiBqKGEsYyl7YVtjPj41XXw9MTI4PDxjJTMyLGFbKGMrNjQ+Pj45PDw0KSsxNF09Yzt2YXIgZCxlLGosayxsLG09MTczMjU4NDE5MyxuPS0yNzE3MzM4Nzksbz0tMTczMjU4NDE5NCxwPTI3MTczMzg3ODtmb3IoZD0wO2Q8YS5sZW5ndGg7ZCs9MTYpZT1tLGo9bixrPW8sbD1wLG09ZihtLG4sbyxwLGFbZF0sNywtNjgwODc2OTM2KSxwPWYocCxtLG4sbyxhW2QrMV0sMTIsLTM4OTU2NDU4Niksbz1mKG8scCxtLG4sYVtkKzJdLDE3LDYwNjEwNTgxOSksbj1mKG4sbyxwLG0sYVtkKzNdLDIyLC0xMDQ0NTI1MzMwKSxtPWYobSxuLG8scCxhW2QrNF0sNywtMTc2NDE4ODk3KSxwPWYocCxtLG4sbyxhW2QrNV0sMTIsMTIwMDA4MDQyNiksbz1mKG8scCxtLG4sYVtkKzZdLDE3LC0xNDczMjMxMzQxKSxuPWYobixvLHAsbSxhW2QrN10sMjIsLTQ1NzA1OTgzKSxtPWYobSxuLG8scCxhW2QrOF0sNywxNzcwMDM1NDE2KSxwPWYocCxtLG4sbyxhW2QrOV0sMTIsLTE5NTg0MTQ0MTcpLG89ZihvLHAsbSxuLGFbZCsxMF0sMTcsLTQyMDYzKSxuPWYobixvLHAsbSxhW2QrMTFdLDIyLC0xOTkwNDA0MTYyKSxtPWYobSxuLG8scCxhW2QrMTJdLDcsMTgwNDYwMzY4MikscD1mKHAsbSxuLG8sYVtkKzEzXSwxMiwtNDAzNDExMDEpLG89ZihvLHAsbSxuLGFbZCsxNF0sMTcsLTE1MDIwMDIyOTApLG49ZihuLG8scCxtLGFbZCsxNV0sMjIsMTIzNjUzNTMyOSksbT1nKG0sbixvLHAsYVtkKzFdLDUsLTE2NTc5NjUxMCkscD1nKHAsbSxuLG8sYVtkKzZdLDksLTEwNjk1MDE2MzIpLG89ZyhvLHAsbSxuLGFbZCsxMV0sMTQsNjQzNzE3NzEzKSxuPWcobixvLHAsbSxhW2RdLDIwLC0zNzM4OTczMDIpLG09ZyhtLG4sbyxwLGFbZCs1XSw1LC03MDE1NTg2OTEpLHA9ZyhwLG0sbixvLGFbZCsxMF0sOSwzODAxNjA4Myksbz1nKG8scCxtLG4sYVtkKzE1XSwxNCwtNjYwNDc4MzM1KSxuPWcobixvLHAsbSxhW2QrNF0sMjAsLTQwNTUzNzg0OCksbT1nKG0sbixvLHAsYVtkKzldLDUsNTY4NDQ2NDM4KSxwPWcocCxtLG4sbyxhW2QrMTRdLDksLTEwMTk4MDM2OTApLG89ZyhvLHAsbSxuLGFbZCszXSwxNCwtMTg3MzYzOTYxKSxuPWcobixvLHAsbSxhW2QrOF0sMjAsMTE2MzUzMTUwMSksbT1nKG0sbixvLHAsYVtkKzEzXSw1LC0xNDQ0NjgxNDY3KSxwPWcocCxtLG4sbyxhW2QrMl0sOSwtNTE0MDM3ODQpLG89ZyhvLHAsbSxuLGFbZCs3XSwxNCwxNzM1MzI4NDczKSxuPWcobixvLHAsbSxhW2QrMTJdLDIwLC0xOTI2NjA3NzM0KSxtPWgobSxuLG8scCxhW2QrNV0sNCwtMzc4NTU4KSxwPWgocCxtLG4sbyxhW2QrOF0sMTEsLTIwMjI1NzQ0NjMpLG89aChvLHAsbSxuLGFbZCsxMV0sMTYsMTgzOTAzMDU2Miksbj1oKG4sbyxwLG0sYVtkKzE0XSwyMywtMzUzMDk1NTYpLG09aChtLG4sbyxwLGFbZCsxXSw0LC0xNTMwOTkyMDYwKSxwPWgocCxtLG4sbyxhW2QrNF0sMTEsMTI3Mjg5MzM1Myksbz1oKG8scCxtLG4sYVtkKzddLDE2LC0xNTU0OTc2MzIpLG49aChuLG8scCxtLGFbZCsxMF0sMjMsLTEwOTQ3MzA2NDApLG09aChtLG4sbyxwLGFbZCsxM10sNCw2ODEyNzkxNzQpLHA9aChwLG0sbixvLGFbZF0sMTEsLTM1ODUzNzIyMiksbz1oKG8scCxtLG4sYVtkKzNdLDE2LC03MjI1MjE5NzkpLG49aChuLG8scCxtLGFbZCs2XSwyMyw3NjAyOTE4OSksbT1oKG0sbixvLHAsYVtkKzldLDQsLTY0MDM2NDQ4NykscD1oKHAsbSxuLG8sYVtkKzEyXSwxMSwtNDIxODE1ODM1KSxvPWgobyxwLG0sbixhW2QrMTVdLDE2LDUzMDc0MjUyMCksbj1oKG4sbyxwLG0sYVtkKzJdLDIzLC05OTUzMzg2NTEpLG09aShtLG4sbyxwLGFbZF0sNiwtMTk4NjMwODQ0KSxwPWkocCxtLG4sbyxhW2QrN10sMTAsMTEyNjg5MTQxNSksbz1pKG8scCxtLG4sYVtkKzE0XSwxNSwtMTQxNjM1NDkwNSksbj1pKG4sbyxwLG0sYVtkKzVdLDIxLC01NzQzNDA1NSksbT1pKG0sbixvLHAsYVtkKzEyXSw2LDE3MDA0ODU1NzEpLHA9aShwLG0sbixvLGFbZCszXSwxMCwtMTg5NDk4NjYwNiksbz1pKG8scCxtLG4sYVtkKzEwXSwxNSwtMTA1MTUyMyksbj1pKG4sbyxwLG0sYVtkKzFdLDIxLC0yMDU0OTIyNzk5KSxtPWkobSxuLG8scCxhW2QrOF0sNiwxODczMzEzMzU5KSxwPWkocCxtLG4sbyxhW2QrMTVdLDEwLC0zMDYxMTc0NCksbz1pKG8scCxtLG4sYVtkKzZdLDE1LC0xNTYwMTk4MzgwKSxuPWkobixvLHAsbSxhW2QrMTNdLDIxLDEzMDkxNTE2NDkpLG09aShtLG4sbyxwLGFbZCs0XSw2LC0xNDU1MjMwNzApLHA9aShwLG0sbixvLGFbZCsxMV0sMTAsLTExMjAyMTAzNzkpLG89aShvLHAsbSxuLGFbZCsyXSwxNSw3MTg3ODcyNTkpLG49aShuLG8scCxtLGFbZCs5XSwyMSwtMzQzNDg1NTUxKSxtPWIobSxlKSxuPWIobixqKSxvPWIobyxrKSxwPWIocCxsKTtyZXR1cm5bbSxuLG8scF19ZnVuY3Rpb24gayhhKXt2YXIgYixjPSIiO2ZvcihiPTA7YjwzMiphLmxlbmd0aDtiKz04KWMrPVN0cmluZy5mcm9tQ2hhckNvZGUoYVtiPj41XT4+PmIlMzImMjU1KTtyZXR1cm4gY31mdW5jdGlvbiBsKGEpe3ZhciBiLGM9W107Zm9yKGNbKGEubGVuZ3RoPj4yKS0xXT12b2lkIDAsYj0wO2I8Yy5sZW5ndGg7Yis9MSljW2JdPTA7Zm9yKGI9MDtiPDgqYS5sZW5ndGg7Yis9OCljW2I+PjVdfD0oMjU1JmEuY2hhckNvZGVBdChiLzgpKTw8YiUzMjtyZXR1cm4gY31mdW5jdGlvbiBtKGEpe3JldHVybiBrKGoobChhKSw4KmEubGVuZ3RoKSl9ZnVuY3Rpb24gbihhLGIpe3ZhciBjLGQsZT1sKGEpLGY9W10sZz1bXTtmb3IoZlsxNV09Z1sxNV09dm9pZCAwLGUubGVuZ3RoPjE2JiYoZT1qKGUsOCphLmxlbmd0aCkpLGM9MDsxNj5jO2MrPTEpZltjXT05MDk1MjI0ODZeZVtjXSxnW2NdPTE1NDk1NTY4MjheZVtjXTtyZXR1cm4gZD1qKGYuY29uY2F0KGwoYikpLDUxMis4KmIubGVuZ3RoKSxrKGooZy5jb25jYXQoZCksNjQwKSl9ZnVuY3Rpb24gbyhhKXt2YXIgYixjLGQ9IjAxMjM0NTY3ODlhYmNkZWYiLGU9IiI7Zm9yKGM9MDtjPGEubGVuZ3RoO2MrPTEpYj1hLmNoYXJDb2RlQXQoYyksZSs9ZC5jaGFyQXQoYj4+PjQmMTUpK2QuY2hhckF0KDE1JmIpO3JldHVybiBlfWZ1bmN0aW9uIHAoYSl7cmV0dXJuIHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChhKSl9ZnVuY3Rpb24gcShhKXtyZXR1cm4gbShwKGEpKX1mdW5jdGlvbiByKGEpe3JldHVybiBvKHEoYSkpfWZ1bmN0aW9uIHMoYSxiKXtyZXR1cm4gbihwKGEpLHAoYikpfWZ1bmN0aW9uIHQoYSxiKXtyZXR1cm4gbyhzKGEsYikpfWZ1bmN0aW9uIHUoYSxiLGMpe3JldHVybiBiP2M/cyhiLGEpOnQoYixhKTpjP3EoYSk6cihhKX0iZnVuY3Rpb24iPT10eXBlb2YgYyYmYy5hbWQ/YygibWQ1IixbXSxmdW5jdGlvbigpe3JldHVybiB1fSk6YS5tZDU9dX0odGhpcyksYygiZ2FsbGVyeS9tb2RlbHMvZ2FsbGVyeS5tb2RlbCIsWyJ1bmRlcnNjb3JlIiwiYmFja2JvbmUiLCJnYWxsZXJ5L2NvbGxlY3Rpb25zL2ltYWdlLmNvbGxlY3Rpb24iLCJwbHVnaW5zL3BsdWdpbnMiLCJtZDUiXSxmdW5jdGlvbihhLGIsYyxkLGUpe3ZhciBmPWIuTW9kZWwuZXh0ZW5kKHt1cmw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXQoInNyYyIpfSxkZWZhdWx0czpmdW5jdGlvbigpe3JldHVybntzcmM6IiIsdGl0bGU6IiIsaW1hZ2VfcGFnZXM6ITEscHJlc2V0czp7dGh1bWI6e3dpZHRoOjMwMH0sbGFyZ2U6e3dpZHRoOjgwMH19LGltYWdlczp2b2lkIDB9fSxkZWZhdWx0T3B0czp7bWluX2NvbF93aWR0aDp7ZGVza3RvcDozMjAscGFkOjMyMCxwaG9uZTozMDB9LGd1dHRlcl93aWR0aDozLGNodW5rX3NpemU6OCxmaXJzdF9jaHVuazoxNSxkb3VibGVfdGFwX3RodW1iOiExfSxpbml0aWFsaXplOmZ1bmN0aW9uKCl7dGhpcy5pZD1lKHRoaXMuZ2V0KCJzcmMiKSksdGhpcy5zbGlkZXJTdGF0ZT0iY2xvc2VkIix0aGlzLl9jdXJyZW50PXZvaWQgMH0scGFyc2U6ZnVuY3Rpb24oYil7dmFyIGQ9Yi5nYWxsZXJ5O3JldHVybiBkLmltYWdlcz1uZXcgYyhkLmltYWdlcyx7cHJlc2V0czp0aGlzLl9wYXJzZVByZXNldHMoZC5wcmVzZXRzKSxnYWxsZXJ5OntiYXNlcGF0aDpkLnBvc3RCYXNlcGF0aCxiYXNldXJsOmQucG9zdEJhc2V1cmwscGF0aDpkLnBvc3RQYXRoLGltYWdlUGFnZXM6ZC5pbWFnZVBhZ2VzfX0pLGQub3B0cz1hLmV4dGVuZCh7fSx0aGlzLmRlZmF1bHRPcHRzLGQub3B0cyx0aGlzLmF0dHJpYnV0ZXMub3B0cyksZH0sX3BhcnNlUHJlc2V0czpmdW5jdGlvbihiKXtyZXR1cm4gYS5mb3JFYWNoKGIsZnVuY3Rpb24oYSl7dmFyIGI9YS5iYXNldXJsO2lmKCFiLm1hdGNoKC9odHRwOlwvXC98aHR0cHM6XC9cLy8pKXt2YXIgYz1wYXJzZVVyaSh3aW5kb3cubG9jYXRpb24uaHJlZiksZD1jLnByb3RvY29sKyI6Ly8iK2MuaG9zdCsoYy5wb3J0PyI6IitjLnBvcnQ6IiIpO2EuYmFzZXVybD0wPT09Yi5pbmRleE9mKCIvIik/ZCtiOmQrYy5kaXJlY3RvcnkrYn19KSxifSx0b2dnbGVTbGlkZXJTdGF0ZTpmdW5jdGlvbigpe3RoaXMuc2xpZGVyU3RhdGU9ImNsb3NlZCI9PT10aGlzLnNsaWRlclN0YXRlPyJvcGVuZWQiOiJjbG9zZWQifSxzZXRDdXJyZW50OmZ1bmN0aW9uKGEpe3RoaXMuX2N1cnJlbnQ9YX0sZ2V0Q3VycmVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jdXJyZW50fSxnZXROZXh0OmZ1bmN0aW9uKCl7aWYodGhpcy5fY3VycmVudCl7dmFyIGE9dGhpcy5hdHRyaWJ1dGVzLmltYWdlcyxiPXRoaXMuX2N1cnJlbnQuaW5kZXgoKTtpZihiPGEubGVuZ3RoLTEpcmV0dXJuIGEuYXQoYisxKX19LGdldFByZXY6ZnVuY3Rpb24oKXtpZih0aGlzLl9jdXJyZW50KXt2YXIgYT10aGlzLl9jdXJyZW50LmluZGV4KCk7aWYoYT4wKXJldHVybiB0aGlzLmF0dHJpYnV0ZXMuaW1hZ2VzLmF0KGEtMSl9fX0pO3JldHVybiBmfSksYygiZ2FsbGVyeS9jb2xsZWN0aW9ucy9zZWxlY3Rpb24uY29sbGVjdGlvbiIsWyJ1bmRlcnNjb3JlIiwiYmFja2JvbmUiLCJsb2NhbHN0b3JhZ2UiLCJnYWxsZXJ5L21vZGVscy9pbWFnZS5tb2RlbCJdLGZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPWIuQ29sbGVjdGlvbi5leHRlbmQoe21vZGVsOmQsaW5pdGlhbGl6ZTpmdW5jdGlvbihhLGMpe2MuZ2FsbGVyeSYmKHRoaXMuZ2FsbGVyeT1jLmdhbGxlcnksdGhpcy5nYWxsZXJ5LnNldCgic2VsZWN0aW9uIix0aGlzKSksdGhpcy5rZXk9ImJvb2xlYW4iPT10eXBlb2YgYy5rZXk/dGhpcy5nYWxsZXJ5LmlkOmMua2V5LHRoaXMubG9jYWxTdG9yYWdlPW5ldyBiLkxvY2FsU3RvcmFnZSgiR2FsbGVyeVNlbGVjdGlvbi0iK3RoaXMua2V5KSx0aGlzLmdhbGxlcnkmJnRoaXMubGlzdGVuVG9PbmNlKHRoaXMuZ2FsbGVyeSwiY2hhbmdlIix0aGlzLmluaXRHYWxsZXJ5KX0saW5pdEdhbGxlcnk6ZnVuY3Rpb24oKXt0aGlzLmZldGNoKCksdGhpcy5saXN0ZW5Ubyh0aGlzLmdhbGxlcnkuZ2V0KCJpbWFnZXMiKSwiY2hhbmdlOnNlbGVjdGVkIix0aGlzLnNlbGVjdGlvbkNoYW5nZWQpfSxwYXJzZTpmdW5jdGlvbihiKXtpZih0aGlzLmdhbGxlcnkpe3ZhciBjPXRoaXMuZ2FsbGVyeS5nZXQoImltYWdlcyIpO2EuZWFjaChiLGZ1bmN0aW9uKGEpe3ZhciBiPWMuZ2V0KGEuZGlnZXN0KTtiJiZiLnNldCgic2VsZWN0ZWQiLCEwKX0sdGhpcyl9cmV0dXJuIGJ9LHNlbGVjdGlvbkNoYW5nZWQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmdldChhLmlkKTtpZihiJiYhYyl7dmFyIGQ9YS5jbG9uZSgpO2Quc2V0KCJpbmRleCIsdm9pZCAwKSx0aGlzLmFkZChkKSxkLnNhdmUoKX1lbHNlIGMmJmMuZGVzdHJveSgpfX0se19wb29sOnt9LGdldDpmdW5jdGlvbihiLGMpe3ZhciBkPWIrIiMiKyh2b2lkIDAhPT1jP2MuaWQ6Im5peEdhbGxlcnkiKTtyZXR1cm4gYS5oYXModGhpcy5fcG9vbCxkKXx8KHRoaXMuX3Bvb2xbZF09bmV3IGUoW10se2tleTpiLGdhbGxlcnk6Y30pKSx0aGlzLl9wb29sW2RdfX0pO3JldHVybiBlfSksYygiZ2FsbGVyeS9tb2RlbHMvc2VsZWN0aW9uLmdhbGxlcnkubW9kZWwiLFsidW5kZXJzY29yZSIsImdhbGxlcnkvbW9kZWxzL2dhbGxlcnkubW9kZWwiLCJnYWxsZXJ5L2NvbGxlY3Rpb25zL2ltYWdlLmNvbGxlY3Rpb24iLCJnYWxsZXJ5L2NvbGxlY3Rpb25zL3NlbGVjdGlvbi5jb2xsZWN0aW9uIl0sZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9Yi5leHRlbmQoe2luaXRpYWxpemU6ZnVuY3Rpb24oKXtiLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsYXJndW1lbnRzKSx0aGlzLmlkPXRoaXMuZ2V0KCJrZXkiKX0sZmV0Y2g6ZnVuY3Rpb24oYil7dmFyIGM9dGhpcy5nZXQoInNlbGVjdGlvbiIpO2MmJmMua2V5PT09dGhpcy5pZD90aGlzLmF0dHJpYnV0ZXMuaW1hZ2VzPWM6bmV3IGQoW10se2dhbGxlcnk6dGhpcyxrZXk6dGhpcy5pZH0pLHRoaXMuYXR0cmlidXRlcy5vcHRzPWEuZXh0ZW5kKHt9LHRoaXMuZGVmYXVsdE9wdHMsdGhpcy5hdHRyaWJ1dGVzLm9wdHMpLHRoaXMuYXR0cmlidXRlcy5pbWFnZXMuZmV0Y2goe3N1Y2Nlc3M6YS5iaW5kKGZ1bmN0aW9uKGEsYyl7Yi5zdWNjZXNzJiZiLnN1Y2Nlc3ModGhpcyxjLGIpLHRoaXMudHJpZ2dlcigiY2hhbmdlIil9LHRoaXMpLGVycm9yOmIuZXJyb3J9KX19KTtyZXR1cm4gZX0pLGMoImdhbGxlcnkvbW9kZWxzL2dhbGxlcnkuZmFjdG9yeSIsWyJ1bmRlcnNjb3JlIiwiZ2FsbGVyeS9tb2RlbHMvZ2FsbGVyeS5tb2RlbCIsImdhbGxlcnkvbW9kZWxzL3NlbGVjdGlvbi5nYWxsZXJ5Lm1vZGVsIl0sZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZChkLGYpe3ZhciBnPWUoZCk7aWYodm9pZCAwIT09Zyl7dmFyIGgsaT1hLmV4dGVuZCh7fSxkLmRhdGEoImdhbC1vcHRzIil8fGQuZGF0YSgib3B0cyIpLGYpO3JldHVybiBoPWcuaW5kZXhPZigic2VsZWN0aW9uOiIpPDA/bmV3IGIoe3NyYzpnLG9wdHM6aX0pOm5ldyBjKHtrZXk6Zy5yZXBsYWNlKCJzZWxlY3Rpb246IiwiIiksb3B0czppfSl9fWZ1bmN0aW9uIGUoYSl7dmFyIGI9YS5kYXRhKCJnYWwtc3JjIil8fGEuZGF0YSgic3JjIik7cmV0dXJuIHZvaWQgMD09PWImJmEuZGF0YSgicHJvamVjdCIpJiYoYj1hLmRhdGEoInByb2plY3QiKSsiLmpzb24iLGNvbnNvbGUud2FybignImRhdGEtcHJvamVjdCIgYXMgYSBkYXRhIHNvdXJjZSBmb3IgZ2FsbGVyeWpzIGlzIGRlcHJlY2F0ZWQhIFVzZSAiZGF0YS1zcmMiIGluc3RlYWQhJykpLGJ9cmV0dXJue2NyZWF0ZTpkfX0oKTtyZXR1cm4gZH0pLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoKXt9ZnVuY3Rpb24gZChhKXtmdW5jdGlvbiBjKGIpe2IucHJvdG90eXBlLm9wdGlvbnx8KGIucHJvdG90eXBlLm9wdGlvbj1mdW5jdGlvbihiKXthLmlzUGxhaW5PYmplY3QoYikmJih0aGlzLm9wdGlvbnM9YS5leHRlbmQoITAsdGhpcy5vcHRpb25zLGIpKX0pfWZ1bmN0aW9uIGQoYixjKXthLmZuW2JdPWZ1bmN0aW9uKGQpe2lmKCJzdHJpbmciPT10eXBlb2YgZCl7Zm9yKHZhciBnPWUuY2FsbChhcmd1bWVudHMsMSksaD0wLGk9dGhpcy5sZW5ndGg7aT5oO2grKyl7dmFyIGo9dGhpc1toXSxrPWEuZGF0YShqLGIpO2lmKGspaWYoYS5pc0Z1bmN0aW9uKGtbZF0pJiYiXyIhPT1kLmNoYXJBdCgwKSl7dmFyIGw9a1tkXS5hcHBseShrLGcpO2lmKHZvaWQgMCE9PWwpcmV0dXJuIGx9ZWxzZSBmKCJubyBzdWNoIG1ldGhvZCAnIitkKyInIGZvciAiK2IrIiBpbnN0YW5jZSIpO2Vsc2UgZigiY2Fubm90IGNhbGwgbWV0aG9kcyBvbiAiK2IrIiBwcmlvciB0byBpbml0aWFsaXphdGlvbjsgYXR0ZW1wdGVkIHRvIGNhbGwgJyIrZCsiJyIpfXJldHVybiB0aGlzfXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgZT1hLmRhdGEodGhpcyxiKTtlPyhlLm9wdGlvbihkKSxlLl9pbml0KCkpOihlPW5ldyBjKHRoaXMsZCksYS5kYXRhKHRoaXMsYixlKSl9KX19aWYoYSl7dmFyIGY9InVuZGVmaW5lZCI9PXR5cGVvZiBjb25zb2xlP2I6ZnVuY3Rpb24oYSl7Y29uc29sZS5lcnJvcihhKX07cmV0dXJuIGEuYnJpZGdldD1mdW5jdGlvbihhLGIpe2MoYiksZChhLGIpfSxhLmJyaWRnZXR9fXZhciBlPUFycmF5LnByb3RvdHlwZS5zbGljZTsiZnVuY3Rpb24iPT10eXBlb2YgYyYmYy5hbWQ/YygianF1ZXJ5LWJyaWRnZXQvanF1ZXJ5LmJyaWRnZXQiLFsianF1ZXJ5Il0sZCk6ZChhLmpRdWVyeSl9KHdpbmRvdyksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihiKXt2YXIgYz1hLmV2ZW50O3JldHVybiBjLnRhcmdldD1jLnRhcmdldHx8Yy5zcmNFbGVtZW50fHxiLGN9dmFyIGQ9ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LGU9ZnVuY3Rpb24oKXt9O2QuYWRkRXZlbnRMaXN0ZW5lcj9lPWZ1bmN0aW9uKGEsYixjKXthLmFkZEV2ZW50TGlzdGVuZXIoYixjLCExKX06ZC5hdHRhY2hFdmVudCYmKGU9ZnVuY3Rpb24oYSxjLGQpe2FbYytkXT1kLmhhbmRsZUV2ZW50P2Z1bmN0aW9uKCl7dmFyIGM9YihhKTtkLmhhbmRsZUV2ZW50LmNhbGwoZCxjKX06ZnVuY3Rpb24oKXt2YXIgYz1iKGEpO2QuY2FsbChhLGMpfSxhLmF0dGFjaEV2ZW50KCJvbiIrYyxhW2MrZF0pfSk7dmFyIGY9ZnVuY3Rpb24oKXt9O2QucmVtb3ZlRXZlbnRMaXN0ZW5lcj9mPWZ1bmN0aW9uKGEsYixjKXthLnJlbW92ZUV2ZW50TGlzdGVuZXIoYixjLCExKX06ZC5kZXRhY2hFdmVudCYmKGY9ZnVuY3Rpb24oYSxiLGMpe2EuZGV0YWNoRXZlbnQoIm9uIitiLGFbYitjXSk7dHJ5e2RlbGV0ZSBhW2IrY119Y2F0Y2goZCl7YVtiK2NdPXZvaWQgMH19KTt2YXIgZz17YmluZDplLHVuYmluZDpmfTsiZnVuY3Rpb24iPT10eXBlb2YgYyYmYy5hbWQ/YygiZXZlbnRpZS9ldmVudGllIixnKToib2JqZWN0Ij09dHlwZW9mIGV4cG9ydHM/bW9kdWxlLmV4cG9ydHM9ZzphLmV2ZW50aWU9Z30odGhpcyksZnVuY3Rpb24oZCl7ZnVuY3Rpb24gZShhKXsiZnVuY3Rpb24iPT10eXBlb2YgYSYmKGUuaXNSZWFkeT9hKCk6aS5wdXNoKGEpKX1mdW5jdGlvbiBmKGEpe3ZhciBiPSJyZWFkeXN0YXRlY2hhbmdlIj09PWEudHlwZSYmImNvbXBsZXRlIiE9PWgucmVhZHlTdGF0ZTtpZighZS5pc1JlYWR5JiYhYil7ZS5pc1JlYWR5PSEwO2Zvcih2YXIgYz0wLGQ9aS5sZW5ndGg7ZD5jO2MrKyl7dmFyIGY9aVtjXTtmKCl9fX1mdW5jdGlvbiBnKGEpe3JldHVybiBhLmJpbmQoaCwiRE9NQ29udGVudExvYWRlZCIsZiksYS5iaW5kKGgsInJlYWR5c3RhdGVjaGFuZ2UiLGYpLGEuYmluZChkLCJsb2FkIixmKSxlfXZhciBoPWQuZG9jdW1lbnQsaT1bXTtlLmlzUmVhZHk9ITEsImZ1bmN0aW9uIj09dHlwZW9mIGMmJmMuYW1kPyhlLmlzUmVhZHk9ImZ1bmN0aW9uIj09dHlwZW9mIGEsYygiZG9jLXJlYWR5L2RvYy1yZWFkeSIsWyJldmVudGllL2V2ZW50aWUiXSxnKSk6Im9iamVjdCI9PXR5cGVvZiBleHBvcnRzP21vZHVsZS5leHBvcnRzPWcoYigiZXZlbnRpZSIpKTpkLmRvY1JlYWR5PWcoZC5ldmVudGllKX0od2luZG93KSxmdW5jdGlvbigpe2Z1bmN0aW9uIGEoKXt9ZnVuY3Rpb24gYihhLGIpe2Zvcih2YXIgYz1hLmxlbmd0aDtjLS07KWlmKGFbY10ubGlzdGVuZXI9PT1iKXJldHVybiBjO3JldHVybi0xfWZ1bmN0aW9uIGQoYSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXNbYV0uYXBwbHkodGhpcyxhcmd1bWVudHMpfX12YXIgZT1hLnByb3RvdHlwZSxmPXRoaXMsZz1mLkV2ZW50RW1pdHRlcjtlLmdldExpc3RlbmVycz1mdW5jdGlvbihhKXt2YXIgYixjLGQ9dGhpcy5fZ2V0RXZlbnRzKCk7aWYoYSBpbnN0YW5jZW9mIFJlZ0V4cCl7Yj17fTtmb3IoYyBpbiBkKWQuaGFzT3duUHJvcGVydHkoYykmJmEudGVzdChjKSYmKGJbY109ZFtjXSl9ZWxzZSBiPWRbYV18fChkW2FdPVtdKTtyZXR1cm4gYn0sZS5mbGF0dGVuTGlzdGVuZXJzPWZ1bmN0aW9uKGEpe3ZhciBiLGM9W107Zm9yKGI9MDtiPGEubGVuZ3RoO2IrPTEpYy5wdXNoKGFbYl0ubGlzdGVuZXIpO3JldHVybiBjfSxlLmdldExpc3RlbmVyc0FzT2JqZWN0PWZ1bmN0aW9uKGEpe3ZhciBiLGM9dGhpcy5nZXRMaXN0ZW5lcnMoYSk7cmV0dXJuIGMgaW5zdGFuY2VvZiBBcnJheSYmKGI9e30sYlthXT1jKSxifHxjfSxlLmFkZExpc3RlbmVyPWZ1bmN0aW9uKGEsYyl7dmFyIGQsZT10aGlzLmdldExpc3RlbmVyc0FzT2JqZWN0KGEpLGY9Im9iamVjdCI9PXR5cGVvZiBjO2ZvcihkIGluIGUpZS5oYXNPd25Qcm9wZXJ0eShkKSYmLTE9PT1iKGVbZF0sYykmJmVbZF0ucHVzaChmP2M6e2xpc3RlbmVyOmMsb25jZTohMX0pO3JldHVybiB0aGlzfSxlLm9uPWQoImFkZExpc3RlbmVyIiksZS5hZGRPbmNlTGlzdGVuZXI9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5hZGRMaXN0ZW5lcihhLHtsaXN0ZW5lcjpiLG9uY2U6ITB9KX0sZS5vbmNlPWQoImFkZE9uY2VMaXN0ZW5lciIpLGUuZGVmaW5lRXZlbnQ9ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZ2V0TGlzdGVuZXJzKGEpLHRoaXN9LGUuZGVmaW5lRXZlbnRzPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0wO2I8YS5sZW5ndGg7Yis9MSl0aGlzLmRlZmluZUV2ZW50KGFbYl0pO3JldHVybiB0aGlzfSxlLnJlbW92ZUxpc3RlbmVyPWZ1bmN0aW9uKGEsYyl7dmFyIGQsZSxmPXRoaXMuZ2V0TGlzdGVuZXJzQXNPYmplY3QoYSk7Zm9yKGUgaW4gZilmLmhhc093blByb3BlcnR5KGUpJiYoZD1iKGZbZV0sYyksLTEhPT1kJiZmW2VdLnNwbGljZShkLDEpKTtyZXR1cm4gdGhpc30sZS5vZmY9ZCgicmVtb3ZlTGlzdGVuZXIiKSxlLmFkZExpc3RlbmVycz1mdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLm1hbmlwdWxhdGVMaXN0ZW5lcnMoITEsYSxiKX0sZS5yZW1vdmVMaXN0ZW5lcnM9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5tYW5pcHVsYXRlTGlzdGVuZXJzKCEwLGEsYil9LGUubWFuaXB1bGF0ZUxpc3RlbmVycz1mdW5jdGlvbihhLGIsYyl7dmFyIGQsZSxmPWE/dGhpcy5yZW1vdmVMaXN0ZW5lcjp0aGlzLmFkZExpc3RlbmVyLGc9YT90aGlzLnJlbW92ZUxpc3RlbmVyczp0aGlzLmFkZExpc3RlbmVycztpZigib2JqZWN0IiE9dHlwZW9mIGJ8fGIgaW5zdGFuY2VvZiBSZWdFeHApZm9yKGQ9Yy5sZW5ndGg7ZC0tOylmLmNhbGwodGhpcyxiLGNbZF0pO2Vsc2UgZm9yKGQgaW4gYiliLmhhc093blByb3BlcnR5KGQpJiYoZT1iW2RdKSYmKCJmdW5jdGlvbiI9PXR5cGVvZiBlP2YuY2FsbCh0aGlzLGQsZSk6Zy5jYWxsKHRoaXMsZCxlKSk7cmV0dXJuIHRoaXN9LGUucmVtb3ZlRXZlbnQ9ZnVuY3Rpb24oYSl7dmFyIGIsYz10eXBlb2YgYSxkPXRoaXMuX2dldEV2ZW50cygpO2lmKCJzdHJpbmciPT09YylkZWxldGUgZFthXTtlbHNlIGlmKGEgaW5zdGFuY2VvZiBSZWdFeHApZm9yKGIgaW4gZClkLmhhc093blByb3BlcnR5KGIpJiZhLnRlc3QoYikmJmRlbGV0ZSBkW2JdO2Vsc2UgZGVsZXRlIHRoaXMuX2V2ZW50cztyZXR1cm4gdGhpc30sZS5yZW1vdmVBbGxMaXN0ZW5lcnM9ZCgicmVtb3ZlRXZlbnQiKSxlLmVtaXRFdmVudD1mdW5jdGlvbihhLGIpe3ZhciBjLGQsZSxmLGc9dGhpcy5nZXRMaXN0ZW5lcnNBc09iamVjdChhKTtmb3IoZSBpbiBnKWlmKGcuaGFzT3duUHJvcGVydHkoZSkpZm9yKGQ9Z1tlXS5sZW5ndGg7ZC0tOyljPWdbZV1bZF0sYy5vbmNlPT09ITAmJnRoaXMucmVtb3ZlTGlzdGVuZXIoYSxjLmxpc3RlbmVyKSxmPWMubGlzdGVuZXIuYXBwbHkodGhpcyxifHxbXSksZj09PXRoaXMuX2dldE9uY2VSZXR1cm5WYWx1ZSgpJiZ0aGlzLnJlbW92ZUxpc3RlbmVyKGEsYy5saXN0ZW5lcik7cmV0dXJuIHRoaXN9LGUudHJpZ2dlcj1kKCJlbWl0RXZlbnQiKSxlLmVtaXQ9ZnVuY3Rpb24oYSl7dmFyIGI9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpO3JldHVybiB0aGlzLmVtaXRFdmVudChhLGIpfSxlLnNldE9uY2VSZXR1cm5WYWx1ZT1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5fb25jZVJldHVyblZhbHVlPWEsdGhpc30sZS5fZ2V0T25jZVJldHVyblZhbHVlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaGFzT3duUHJvcGVydHkoIl9vbmNlUmV0dXJuVmFsdWUiKT90aGlzLl9vbmNlUmV0dXJuVmFsdWU6ITB9LGUuX2dldEV2ZW50cz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9ldmVudHN8fCh0aGlzLl9ldmVudHM9e30pfSxhLm5vQ29uZmxpY3Q9ZnVuY3Rpb24oKXtyZXR1cm4gZi5FdmVudEVtaXR0ZXI9ZyxhfSwiZnVuY3Rpb24iPT10eXBlb2YgYyYmYy5hbWQ/YygiZXZlbnRFbWl0dGVyL0V2ZW50RW1pdHRlciIsW10sZnVuY3Rpb24oKXtyZXR1cm4gYX0pOiJvYmplY3QiPT10eXBlb2YgbW9kdWxlJiZtb2R1bGUuZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1hOnRoaXMuRXZlbnRFbWl0dGVyPWF9LmNhbGwodGhpcyksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhKXtpZihhKXtpZigic3RyaW5nIj09dHlwZW9mIGVbYV0pcmV0dXJuIGE7YT1hLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpK2Euc2xpY2UoMSk7Zm9yKHZhciBiLGM9MCxmPWQubGVuZ3RoO2Y+YztjKyspaWYoYj1kW2NdK2EsInN0cmluZyI9PXR5cGVvZiBlW2JdKXJldHVybiBifX12YXIgZD0iV2Via2l0IE1veiBtcyBNcyBPIi5zcGxpdCgiICIpLGU9ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlOyJmdW5jdGlvbiI9PXR5cGVvZiBjJiZjLmFtZD9jKCJnZXQtc3R5bGUtcHJvcGVydHkvZ2V0LXN0eWxlLXByb3BlcnR5IixbXSxmdW5jdGlvbigpe3JldHVybiBifSk6Im9iamVjdCI9PXR5cGVvZiBleHBvcnRzP21vZHVsZS5leHBvcnRzPWI6YS5nZXRTdHlsZVByb3BlcnR5PWJ9KHdpbmRvdyksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gZChhKXt2YXIgYj1wYXJzZUZsb2F0KGEpLGM9LTE9PT1hLmluZGV4T2YoIiUiKSYmIWlzTmFOKGIpO3JldHVybiBjJiZifWZ1bmN0aW9uIGUoKXtmb3IodmFyIGE9e3dpZHRoOjAsaGVpZ2h0OjAsaW5uZXJXaWR0aDowLGlubmVySGVpZ2h0OjAsb3V0ZXJXaWR0aDowLG91dGVySGVpZ2h0OjB9LGI9MCxjPWkubGVuZ3RoO2M+YjtiKyspe3ZhciBkPWlbYl07YVtkXT0wfXJldHVybiBhfWZ1bmN0aW9uIGYoYSl7ZnVuY3Rpb24gYihhKXtpZigic3RyaW5nIj09dHlwZW9mIGEmJihhPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYSkpLGEmJiJvYmplY3QiPT10eXBlb2YgYSYmYS5ub2RlVHlwZSl7dmFyIGI9aChhKTtpZigibm9uZSI9PT1iLmRpc3BsYXkpcmV0dXJuIGUoKTt2YXIgZz17fTtnLndpZHRoPWEub2Zmc2V0V2lkdGgsZy5oZWlnaHQ9YS5vZmZzZXRIZWlnaHQ7Zm9yKHZhciBrPWcuaXNCb3JkZXJCb3g9ISghanx8IWJbal18fCJib3JkZXItYm94IiE9PWJbal0pLGw9MCxtPWkubGVuZ3RoO20+bDtsKyspe3ZhciBuPWlbbF0sbz1iW25dO289YyhhLG8pO3ZhciBwPXBhcnNlRmxvYXQobyk7Z1tuXT1pc05hTihwKT8wOnB9dmFyIHE9Zy5wYWRkaW5nTGVmdCtnLnBhZGRpbmdSaWdodCxyPWcucGFkZGluZ1RvcCtnLnBhZGRpbmdCb3R0b20scz1nLm1hcmdpbkxlZnQrZy5tYXJnaW5SaWdodCx0PWcubWFyZ2luVG9wK2cubWFyZ2luQm90dG9tLHU9Zy5ib3JkZXJMZWZ0V2lkdGgrZy5ib3JkZXJSaWdodFdpZHRoLHY9Zy5ib3JkZXJUb3BXaWR0aCtnLmJvcmRlckJvdHRvbVdpZHRoLHc9ayYmZix4PWQoYi53aWR0aCk7eCE9PSExJiYoZy53aWR0aD14Kyh3PzA6cSt1KSk7dmFyIHk9ZChiLmhlaWdodCk7cmV0dXJuIHkhPT0hMSYmKGcuaGVpZ2h0PXkrKHc/MDpyK3YpKSxnLmlubmVyV2lkdGg9Zy53aWR0aC0ocSt1KSxnLmlubmVySGVpZ2h0PWcuaGVpZ2h0LShyK3YpLGcub3V0ZXJXaWR0aD1nLndpZHRoK3MsZy5vdXRlckhlaWdodD1nLmhlaWdodCt0LGd9fWZ1bmN0aW9uIGMoYSxiKXtpZihnfHwtMT09PWIuaW5kZXhPZigiJSIpKXJldHVybiBiO3ZhciBjPWEuc3R5bGUsZD1jLmxlZnQsZT1hLnJ1bnRpbWVTdHlsZSxmPWUmJmUubGVmdDtyZXR1cm4gZiYmKGUubGVmdD1hLmN1cnJlbnRTdHlsZS5sZWZ0KSxjLmxlZnQ9YixiPWMucGl4ZWxMZWZ0LGMubGVmdD1kLGYmJihlLmxlZnQ9ZiksYn12YXIgZixqPWEoImJveFNpemluZyIpO3JldHVybiBmdW5jdGlvbigpe2lmKGope3ZhciBhPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO2Euc3R5bGUud2lkdGg9IjIwMHB4IixhLnN0eWxlLnBhZGRpbmc9IjFweCAycHggM3B4IDRweCIsYS5zdHlsZS5ib3JkZXJTdHlsZT0ic29saWQiLGEuc3R5bGUuYm9yZGVyV2lkdGg9IjFweCAycHggM3B4IDRweCIsYS5zdHlsZVtqXT0iYm9yZGVyLWJveCI7dmFyIGI9ZG9jdW1lbnQuYm9keXx8ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O2IuYXBwZW5kQ2hpbGQoYSk7dmFyIGM9aChhKTtmPTIwMD09PWQoYy53aWR0aCksYi5yZW1vdmVDaGlsZChhKX19KCksYn12YXIgZz1hLmdldENvbXB1dGVkU3R5bGUsaD1nP2Z1bmN0aW9uKGEpe3JldHVybiBnKGEsbnVsbCl9OmZ1bmN0aW9uKGEpe3JldHVybiBhLmN1cnJlbnRTdHlsZX0saT1bInBhZGRpbmdMZWZ0IiwicGFkZGluZ1JpZ2h0IiwicGFkZGluZ1RvcCIsInBhZGRpbmdCb3R0b20iLCJtYXJnaW5MZWZ0IiwibWFyZ2luUmlnaHQiLCJtYXJnaW5Ub3AiLCJtYXJnaW5Cb3R0b20iLCJib3JkZXJMZWZ0V2lkdGgiLCJib3JkZXJSaWdodFdpZHRoIiwiYm9yZGVyVG9wV2lkdGgiLCJib3JkZXJCb3R0b21XaWR0aCJdOyJmdW5jdGlvbiI9PXR5cGVvZiBjJiZjLmFtZD9jKCJnZXQtc2l6ZS9nZXQtc2l6ZSIsWyJnZXQtc3R5bGUtcHJvcGVydHkvZ2V0LXN0eWxlLXByb3BlcnR5Il0sZik6Im9iamVjdCI9PXR5cGVvZiBleHBvcnRzP21vZHVsZS5leHBvcnRzPWYoYigiZ2V0LXN0eWxlLXByb3BlcnR5IikpOmEuZ2V0U2l6ZT1mKGEuZ2V0U3R5bGVQcm9wZXJ0eSl9KHdpbmRvdyksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhLGIpe3JldHVybiBhW2hdKGIpfWZ1bmN0aW9uIGQoYSl7aWYoIWEucGFyZW50Tm9kZSl7dmFyIGI9ZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO2IuYXBwZW5kQ2hpbGQoYSl9fWZ1bmN0aW9uIGUoYSxiKXtkKGEpO2Zvcih2YXIgYz1hLnBhcmVudE5vZGUucXVlcnlTZWxlY3RvckFsbChiKSxlPTAsZj1jLmxlbmd0aDtmPmU7ZSsrKWlmKGNbZV09PT1hKXJldHVybiEwO3JldHVybiExfWZ1bmN0aW9uIGYoYSxjKXtyZXR1cm4gZChhKSxiKGEsYyl9dmFyIGcsaD1mdW5jdGlvbigpe2lmKGEubWF0Y2hlc1NlbGVjdG9yKXJldHVybiJtYXRjaGVzU2VsZWN0b3IiO2Zvcih2YXIgYj1bIndlYmtpdCIsIm1veiIsIm1zIiwibyJdLGM9MCxkPWIubGVuZ3RoO2Q+YztjKyspe3ZhciBlPWJbY10sZj1lKyJNYXRjaGVzU2VsZWN0b3IiO2lmKGFbZl0pcmV0dXJuIGZ9fSgpO2lmKGgpe3ZhciBpPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpLGo9YihpLCJkaXYiKTtnPWo/YjpmfWVsc2UgZz1lOyJmdW5jdGlvbiI9PXR5cGVvZiBjJiZjLmFtZD9jKCJtYXRjaGVzLXNlbGVjdG9yL21hdGNoZXMtc2VsZWN0b3IiLFtdLGZ1bmN0aW9uKCl7cmV0dXJuIGd9KToib2JqZWN0Ij09dHlwZW9mIGV4cG9ydHM/bW9kdWxlLmV4cG9ydHM9Zzp3aW5kb3cubWF0Y2hlc1NlbGVjdG9yPWd9KEVsZW1lbnQucHJvdG90eXBlKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEsYil7Zm9yKHZhciBjIGluIGIpYVtjXT1iW2NdO3JldHVybiBhfWZ1bmN0aW9uIGQoYSl7Zm9yKHZhciBiIGluIGEpcmV0dXJuITE7cmV0dXJuIGI9bnVsbCwhMH1mdW5jdGlvbiBlKGEpe3JldHVybiBhLnJlcGxhY2UoLyhbQS1aXSkvZyxmdW5jdGlvbihhKXtyZXR1cm4iLSIrYS50b0xvd2VyQ2FzZSgpfSl9ZnVuY3Rpb24gZihhLGMsZil7ZnVuY3Rpb24gZyhhLGIpe2EmJih0aGlzLmVsZW1lbnQ9YSx0aGlzLmxheW91dD1iLHRoaXMucG9zaXRpb249e3g6MCx5OjB9LHRoaXMuX2NyZWF0ZSgpKX12YXIgaT1mKCJ0cmFuc2l0aW9uIiksaj1mKCJ0cmFuc2Zvcm0iKSxrPWkmJmosbD0hIWYoInBlcnNwZWN0aXZlIiksbT17V2Via2l0VHJhbnNpdGlvbjoid2Via2l0VHJhbnNpdGlvbkVuZCIsTW96VHJhbnNpdGlvbjoidHJhbnNpdGlvbmVuZCIsT1RyYW5zaXRpb246Im90cmFuc2l0aW9uZW5kIix0cmFuc2l0aW9uOiJ0cmFuc2l0aW9uZW5kIn1baV0sbj1bInRyYW5zZm9ybSIsInRyYW5zaXRpb24iLCJ0cmFuc2l0aW9uRHVyYXRpb24iLCJ0cmFuc2l0aW9uUHJvcGVydHkiXSxvPWZ1bmN0aW9uKCl7Zm9yKHZhciBhPXt9LGI9MCxjPW4ubGVuZ3RoO2M+YjtiKyspe3ZhciBkPW5bYl0sZT1mKGQpO2UmJmUhPT1kJiYoYVtkXT1lKX1yZXR1cm4gYX0oKTtiKGcucHJvdG90eXBlLGEucHJvdG90eXBlKSxnLnByb3RvdHlwZS5fY3JlYXRlPWZ1bmN0aW9uKCl7dGhpcy5fdHJhbnNuPXtpbmdQcm9wZXJ0aWVzOnt9LGNsZWFuOnt9LG9uRW5kOnt9fSx0aGlzLmNzcyh7cG9zaXRpb246ImFic29sdXRlIn0pfSxnLnByb3RvdHlwZS5oYW5kbGVFdmVudD1mdW5jdGlvbihhKXt2YXIgYj0ib24iK2EudHlwZTt0aGlzW2JdJiZ0aGlzW2JdKGEpfSxnLnByb3RvdHlwZS5nZXRTaXplPWZ1bmN0aW9uKCl7dGhpcy5zaXplPWModGhpcy5lbGVtZW50KX0sZy5wcm90b3R5cGUuY3NzPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZWxlbWVudC5zdHlsZTtmb3IodmFyIGMgaW4gYSl7dmFyIGQ9b1tjXXx8YztiW2RdPWFbY119fSxnLnByb3RvdHlwZS5nZXRQb3NpdGlvbj1mdW5jdGlvbigpe3ZhciBhPWgodGhpcy5lbGVtZW50KSxiPXRoaXMubGF5b3V0Lm9wdGlvbnMsYz1iLmlzT3JpZ2luTGVmdCxkPWIuaXNPcmlnaW5Ub3AsZT1wYXJzZUludChhW2M/ImxlZnQiOiJyaWdodCJdLDEwKSxmPXBhcnNlSW50KGFbZD8idG9wIjoiYm90dG9tIl0sMTApO2U9aXNOYU4oZSk/MDplLGY9aXNOYU4oZik/MDpmO3ZhciBnPXRoaXMubGF5b3V0LnNpemU7ZS09Yz9nLnBhZGRpbmdMZWZ0OmcucGFkZGluZ1JpZ2h0LGYtPWQ/Zy5wYWRkaW5nVG9wOmcucGFkZGluZ0JvdHRvbSx0aGlzLnBvc2l0aW9uLng9ZSx0aGlzLnBvc2l0aW9uLnk9Zn0sZy5wcm90b3R5cGUubGF5b3V0UG9zaXRpb249ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmxheW91dC5zaXplLGI9dGhpcy5sYXlvdXQub3B0aW9ucyxjPXt9O2IuaXNPcmlnaW5MZWZ0PyhjLmxlZnQ9dGhpcy5wb3NpdGlvbi54K2EucGFkZGluZ0xlZnQrInB4IixjLnJpZ2h0PSIiKTooYy5yaWdodD10aGlzLnBvc2l0aW9uLngrYS5wYWRkaW5nUmlnaHQrInB4IixjLmxlZnQ9IiIpLGIuaXNPcmlnaW5Ub3A/KGMudG9wPXRoaXMucG9zaXRpb24ueSthLnBhZGRpbmdUb3ArInB4IixjLmJvdHRvbT0iIik6KGMuYm90dG9tPXRoaXMucG9zaXRpb24ueSthLnBhZGRpbmdCb3R0b20rInB4IixjLnRvcD0iIiksdGhpcy5jc3MoYyksdGhpcy5lbWl0RXZlbnQoImxheW91dCIsW3RoaXNdKX07dmFyIHA9bD9mdW5jdGlvbihhLGIpe3JldHVybiJ0cmFuc2xhdGUzZCgiK2ErInB4LCAiK2IrInB4LCAwKSJ9OmZ1bmN0aW9uKGEsYil7cmV0dXJuInRyYW5zbGF0ZSgiK2ErInB4LCAiK2IrInB4KSJ9O2cucHJvdG90eXBlLl90cmFuc2l0aW9uVG89ZnVuY3Rpb24oYSxiKXt0aGlzLmdldFBvc2l0aW9uKCk7dmFyIGM9dGhpcy5wb3NpdGlvbi54LGQ9dGhpcy5wb3NpdGlvbi55LGU9cGFyc2VJbnQoYSwxMCksZj1wYXJzZUludChiLDEwKSxnPWU9PT10aGlzLnBvc2l0aW9uLngmJmY9PT10aGlzLnBvc2l0aW9uLnk7aWYodGhpcy5zZXRQb3NpdGlvbihhLGIpLGcmJiF0aGlzLmlzVHJhbnNpdGlvbmluZylyZXR1cm4gdm9pZCB0aGlzLmxheW91dFBvc2l0aW9uKCk7dmFyIGg9YS1jLGk9Yi1kLGo9e30saz10aGlzLmxheW91dC5vcHRpb25zO2g9ay5pc09yaWdpbkxlZnQ/aDotaCxpPWsuaXNPcmlnaW5Ub3A/aTotaSxqLnRyYW5zZm9ybT1wKGgsaSksdGhpcy50cmFuc2l0aW9uKHt0bzpqLG9uVHJhbnNpdGlvbkVuZDp7dHJhbnNmb3JtOnRoaXMubGF5b3V0UG9zaXRpb259LGlzQ2xlYW5pbmc6ITB9KX0sZy5wcm90b3R5cGUuZ29Ubz1mdW5jdGlvbihhLGIpe3RoaXMuc2V0UG9zaXRpb24oYSxiKSx0aGlzLmxheW91dFBvc2l0aW9uKCl9LGcucHJvdG90eXBlLm1vdmVUbz1rP2cucHJvdG90eXBlLl90cmFuc2l0aW9uVG86Zy5wcm90b3R5cGUuZ29UbyxnLnByb3RvdHlwZS5zZXRQb3NpdGlvbj1mdW5jdGlvbihhLGIpe3RoaXMucG9zaXRpb24ueD1wYXJzZUludChhLDEwKSx0aGlzLnBvc2l0aW9uLnk9cGFyc2VJbnQoYiwxMCl9LGcucHJvdG90eXBlLl9ub25UcmFuc2l0aW9uPWZ1bmN0aW9uKGEpe3RoaXMuY3NzKGEudG8pLGEuaXNDbGVhbmluZyYmdGhpcy5fcmVtb3ZlU3R5bGVzKGEudG8pO2Zvcih2YXIgYiBpbiBhLm9uVHJhbnNpdGlvbkVuZClhLm9uVHJhbnNpdGlvbkVuZFtiXS5jYWxsKHRoaXMpfSxnLnByb3RvdHlwZS5fdHJhbnNpdGlvbj1mdW5jdGlvbihhKXtpZighcGFyc2VGbG9hdCh0aGlzLmxheW91dC5vcHRpb25zLnRyYW5zaXRpb25EdXJhdGlvbikpcmV0dXJuIHZvaWQgdGhpcy5fbm9uVHJhbnNpdGlvbihhKTt2YXIgYj10aGlzLl90cmFuc247Zm9yKHZhciBjIGluIGEub25UcmFuc2l0aW9uRW5kKWIub25FbmRbY109YS5vblRyYW5zaXRpb25FbmRbY107Zm9yKGMgaW4gYS50byliLmluZ1Byb3BlcnRpZXNbY109ITAsYS5pc0NsZWFuaW5nJiYoYi5jbGVhbltjXT0hMCk7aWYoYS5mcm9tKXt0aGlzLmNzcyhhLmZyb20pO3ZhciBkPXRoaXMuZWxlbWVudC5vZmZzZXRIZWlnaHQ7ZD1udWxsfXRoaXMuZW5hYmxlVHJhbnNpdGlvbihhLnRvKSx0aGlzLmNzcyhhLnRvKSx0aGlzLmlzVHJhbnNpdGlvbmluZz0hMH07dmFyIHE9aiYmZShqKSsiLG9wYWNpdHkiO2cucHJvdG90eXBlLmVuYWJsZVRyYW5zaXRpb249ZnVuY3Rpb24oKXt0aGlzLmlzVHJhbnNpdGlvbmluZ3x8KHRoaXMuY3NzKHt0cmFuc2l0aW9uUHJvcGVydHk6cSx0cmFuc2l0aW9uRHVyYXRpb246dGhpcy5sYXlvdXQub3B0aW9ucy50cmFuc2l0aW9uRHVyYXRpb259KSx0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihtLHRoaXMsITEpKX0sZy5wcm90b3R5cGUudHJhbnNpdGlvbj1nLnByb3RvdHlwZVtpPyJfdHJhbnNpdGlvbiI6Il9ub25UcmFuc2l0aW9uIl0sZy5wcm90b3R5cGUub253ZWJraXRUcmFuc2l0aW9uRW5kPWZ1bmN0aW9uKGEpe3RoaXMub250cmFuc2l0aW9uZW5kKGEpfSxnLnByb3RvdHlwZS5vbm90cmFuc2l0aW9uZW5kPWZ1bmN0aW9uKGEpe3RoaXMub250cmFuc2l0aW9uZW5kKGEpfTt2YXIgcj17Ii13ZWJraXQtdHJhbnNmb3JtIjoidHJhbnNmb3JtIiwiLW1vei10cmFuc2Zvcm0iOiJ0cmFuc2Zvcm0iLCItby10cmFuc2Zvcm0iOiJ0cmFuc2Zvcm0ifTtnLnByb3RvdHlwZS5vbnRyYW5zaXRpb25lbmQ9ZnVuY3Rpb24oYSl7aWYoYS50YXJnZXQ9PT10aGlzLmVsZW1lbnQpe3ZhciBiPXRoaXMuX3RyYW5zbixjPXJbYS5wcm9wZXJ0eU5hbWVdfHxhLnByb3BlcnR5TmFtZTtpZihkZWxldGUgYi5pbmdQcm9wZXJ0aWVzW2NdLGQoYi5pbmdQcm9wZXJ0aWVzKSYmdGhpcy5kaXNhYmxlVHJhbnNpdGlvbigpLGMgaW4gYi5jbGVhbiYmKHRoaXMuZWxlbWVudC5zdHlsZVthLnByb3BlcnR5TmFtZV09IiIsZGVsZXRlIGIuY2xlYW5bY10pLGMgaW4gYi5vbkVuZCl7dmFyIGU9Yi5vbkVuZFtjXTtlLmNhbGwodGhpcyksZGVsZXRlIGIub25FbmRbY119dGhpcy5lbWl0RXZlbnQoInRyYW5zaXRpb25FbmQiLFt0aGlzXSl9fSxnLnByb3RvdHlwZS5kaXNhYmxlVHJhbnNpdGlvbj1mdW5jdGlvbigpe3RoaXMucmVtb3ZlVHJhbnNpdGlvblN0eWxlcygpLHRoaXMuZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKG0sdGhpcywhMSksdGhpcy5pc1RyYW5zaXRpb25pbmc9ITF9LGcucHJvdG90eXBlLl9yZW1vdmVTdHlsZXM9ZnVuY3Rpb24oYSl7dmFyIGI9e307Zm9yKHZhciBjIGluIGEpYltjXT0iIjt0aGlzLmNzcyhiKX07dmFyIHM9e3RyYW5zaXRpb25Qcm9wZXJ0eToiIix0cmFuc2l0aW9uRHVyYXRpb246IiJ9O3JldHVybiBnLnByb3RvdHlwZS5yZW1vdmVUcmFuc2l0aW9uU3R5bGVzPWZ1bmN0aW9uKCl7dGhpcy5jc3Mocyl9LGcucHJvdG90eXBlLnJlbW92ZUVsZW09ZnVuY3Rpb24oKXt0aGlzLmVsZW1lbnQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLmVsZW1lbnQpLHRoaXMuZW1pdEV2ZW50KCJyZW1vdmUiLFt0aGlzXSl9LGcucHJvdG90eXBlLnJlbW92ZT1mdW5jdGlvbigpe2lmKCFpfHwhcGFyc2VGbG9hdCh0aGlzLmxheW91dC5vcHRpb25zLnRyYW5zaXRpb25EdXJhdGlvbikpcmV0dXJuIHZvaWQgdGhpcy5yZW1vdmVFbGVtKCk7dmFyIGE9dGhpczt0aGlzLm9uKCJ0cmFuc2l0aW9uRW5kIixmdW5jdGlvbigpe3JldHVybiBhLnJlbW92ZUVsZW0oKSwhMH0pLHRoaXMuaGlkZSgpfSxnLnByb3RvdHlwZS5yZXZlYWw9ZnVuY3Rpb24oKXtkZWxldGUgdGhpcy5pc0hpZGRlbix0aGlzLmNzcyh7ZGlzcGxheToiIn0pO3ZhciBhPXRoaXMubGF5b3V0Lm9wdGlvbnM7dGhpcy50cmFuc2l0aW9uKHtmcm9tOmEuaGlkZGVuU3R5bGUsdG86YS52aXNpYmxlU3R5bGUsaXNDbGVhbmluZzohMH0pfSxnLnByb3RvdHlwZS5oaWRlPWZ1bmN0aW9uKCl7dGhpcy5pc0hpZGRlbj0hMCx0aGlzLmNzcyh7ZGlzcGxheToiIn0pO3ZhciBhPXRoaXMubGF5b3V0Lm9wdGlvbnM7dGhpcy50cmFuc2l0aW9uKHtmcm9tOmEudmlzaWJsZVN0eWxlLHRvOmEuaGlkZGVuU3R5bGUsaXNDbGVhbmluZzohMCxvblRyYW5zaXRpb25FbmQ6e29wYWNpdHk6ZnVuY3Rpb24oKXt0aGlzLmlzSGlkZGVuJiZ0aGlzLmNzcyh7ZGlzcGxheToibm9uZSJ9KX19fSl9LGcucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXt0aGlzLmNzcyh7cG9zaXRpb246IiIsbGVmdDoiIixyaWdodDoiIix0b3A6IiIsYm90dG9tOiIiLHRyYW5zaXRpb246IiIsdHJhbnNmb3JtOiIifSl9LGd9dmFyIGc9YS5nZXRDb21wdXRlZFN0eWxlLGg9Zz9mdW5jdGlvbihhKXtyZXR1cm4gZyhhLG51bGwpfTpmdW5jdGlvbihhKXtyZXR1cm4gYS5jdXJyZW50U3R5bGV9OyJmdW5jdGlvbiI9PXR5cGVvZiBjJiZjLmFtZD9jKCJvdXRsYXllci9pdGVtIixbImV2ZW50RW1pdHRlci9FdmVudEVtaXR0ZXIiLCJnZXQtc2l6ZS9nZXQtc2l6ZSIsImdldC1zdHlsZS1wcm9wZXJ0eS9nZXQtc3R5bGUtcHJvcGVydHkiXSxmKTooYS5PdXRsYXllcj17fSxhLk91dGxheWVyLkl0ZW09ZihhLkV2ZW50RW1pdHRlcixhLmdldFNpemUsYS5nZXRTdHlsZVByb3BlcnR5KSl9KHdpbmRvdyksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhLGIpe2Zvcih2YXIgYyBpbiBiKWFbY109YltjXTtyZXR1cm4gYX1mdW5jdGlvbiBkKGEpe3JldHVybiJbb2JqZWN0IEFycmF5XSI9PT1tLmNhbGwoYSl9ZnVuY3Rpb24gZShhKXt2YXIgYj1bXTtpZihkKGEpKWI9YTtlbHNlIGlmKGEmJiJudW1iZXIiPT10eXBlb2YgYS5sZW5ndGgpZm9yKHZhciBjPTAsZT1hLmxlbmd0aDtlPmM7YysrKWIucHVzaChhW2NdKTtlbHNlIGIucHVzaChhKTtyZXR1cm4gYn1mdW5jdGlvbiBmKGEsYil7dmFyIGM9byhiLGEpOy0xIT09YyYmYi5zcGxpY2UoYywxKX1mdW5jdGlvbiBnKGEpe3JldHVybiBhLnJlcGxhY2UoLyguKShbQS1aXSkvZyxmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGIrIi0iK2N9KS50b0xvd2VyQ2FzZSgpfWZ1bmN0aW9uIGgoYyxkLGgsbSxvLHApe2Z1bmN0aW9uIHEoYSxjKXtpZigic3RyaW5nIj09dHlwZW9mIGEmJihhPWkucXVlcnlTZWxlY3RvcihhKSksIWF8fCFuKGEpKXJldHVybiB2b2lkKGomJmouZXJyb3IoIkJhZCAiK3RoaXMuY29uc3RydWN0b3IubmFtZXNwYWNlKyIgZWxlbWVudDogIithKSk7dGhpcy5lbGVtZW50PWEsdGhpcy5vcHRpb25zPWIoe30sdGhpcy5jb25zdHJ1Y3Rvci5kZWZhdWx0cyksdGhpcy5vcHRpb24oYyk7dmFyIGQ9KytyO3RoaXMuZWxlbWVudC5vdXRsYXllckdVSUQ9ZCxzW2RdPXRoaXMsdGhpcy5fY3JlYXRlKCksdGhpcy5vcHRpb25zLmlzSW5pdExheW91dCYmdGhpcy5sYXlvdXQoKX12YXIgcj0wLHM9e307cmV0dXJuIHEubmFtZXNwYWNlPSJvdXRsYXllciIscS5JdGVtPXAscS5kZWZhdWx0cz17Y29udGFpbmVyU3R5bGU6e3Bvc2l0aW9uOiJyZWxhdGl2ZSJ9LGlzSW5pdExheW91dDohMCxpc09yaWdpbkxlZnQ6ITAsaXNPcmlnaW5Ub3A6ITAsaXNSZXNpemVCb3VuZDohMCxpc1Jlc2l6aW5nQ29udGFpbmVyOiEwLHRyYW5zaXRpb25EdXJhdGlvbjoiMC40cyIsaGlkZGVuU3R5bGU6e29wYWNpdHk6MCx0cmFuc2Zvcm06InNjYWxlKDAuMDAxKSJ9LHZpc2libGVTdHlsZTp7b3BhY2l0eToxLHRyYW5zZm9ybToic2NhbGUoMSkifX0sYihxLnByb3RvdHlwZSxoLnByb3RvdHlwZSkscS5wcm90b3R5cGUub3B0aW9uPWZ1bmN0aW9uKGEpe2IodGhpcy5vcHRpb25zLGEpCn0scS5wcm90b3R5cGUuX2NyZWF0ZT1mdW5jdGlvbigpe3RoaXMucmVsb2FkSXRlbXMoKSx0aGlzLnN0YW1wcz1bXSx0aGlzLnN0YW1wKHRoaXMub3B0aW9ucy5zdGFtcCksYih0aGlzLmVsZW1lbnQuc3R5bGUsdGhpcy5vcHRpb25zLmNvbnRhaW5lclN0eWxlKSx0aGlzLm9wdGlvbnMuaXNSZXNpemVCb3VuZCYmdGhpcy5iaW5kUmVzaXplKCl9LHEucHJvdG90eXBlLnJlbG9hZEl0ZW1zPWZ1bmN0aW9uKCl7dGhpcy5pdGVtcz10aGlzLl9pdGVtaXplKHRoaXMuZWxlbWVudC5jaGlsZHJlbil9LHEucHJvdG90eXBlLl9pdGVtaXplPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYj10aGlzLl9maWx0ZXJGaW5kSXRlbUVsZW1lbnRzKGEpLGM9dGhpcy5jb25zdHJ1Y3Rvci5JdGVtLGQ9W10sZT0wLGY9Yi5sZW5ndGg7Zj5lO2UrKyl7dmFyIGc9YltlXSxoPW5ldyBjKGcsdGhpcyk7ZC5wdXNoKGgpfXJldHVybiBkfSxxLnByb3RvdHlwZS5fZmlsdGVyRmluZEl0ZW1FbGVtZW50cz1mdW5jdGlvbihhKXthPWUoYSk7Zm9yKHZhciBiPXRoaXMub3B0aW9ucy5pdGVtU2VsZWN0b3IsYz1bXSxkPTAsZj1hLmxlbmd0aDtmPmQ7ZCsrKXt2YXIgZz1hW2RdO2lmKG4oZykpaWYoYil7byhnLGIpJiZjLnB1c2goZyk7Zm9yKHZhciBoPWcucXVlcnlTZWxlY3RvckFsbChiKSxpPTAsaj1oLmxlbmd0aDtqPmk7aSsrKWMucHVzaChoW2ldKX1lbHNlIGMucHVzaChnKX1yZXR1cm4gY30scS5wcm90b3R5cGUuZ2V0SXRlbUVsZW1lbnRzPWZ1bmN0aW9uKCl7Zm9yKHZhciBhPVtdLGI9MCxjPXRoaXMuaXRlbXMubGVuZ3RoO2M+YjtiKyspYS5wdXNoKHRoaXMuaXRlbXNbYl0uZWxlbWVudCk7cmV0dXJuIGF9LHEucHJvdG90eXBlLmxheW91dD1mdW5jdGlvbigpe3RoaXMuX3Jlc2V0TGF5b3V0KCksdGhpcy5fbWFuYWdlU3RhbXBzKCk7dmFyIGE9dm9pZCAwIT09dGhpcy5vcHRpb25zLmlzTGF5b3V0SW5zdGFudD90aGlzLm9wdGlvbnMuaXNMYXlvdXRJbnN0YW50OiF0aGlzLl9pc0xheW91dEluaXRlZDt0aGlzLmxheW91dEl0ZW1zKHRoaXMuaXRlbXMsYSksdGhpcy5faXNMYXlvdXRJbml0ZWQ9ITB9LHEucHJvdG90eXBlLl9pbml0PXEucHJvdG90eXBlLmxheW91dCxxLnByb3RvdHlwZS5fcmVzZXRMYXlvdXQ9ZnVuY3Rpb24oKXt0aGlzLmdldFNpemUoKX0scS5wcm90b3R5cGUuZ2V0U2l6ZT1mdW5jdGlvbigpe3RoaXMuc2l6ZT1tKHRoaXMuZWxlbWVudCl9LHEucHJvdG90eXBlLl9nZXRNZWFzdXJlbWVudD1mdW5jdGlvbihhLGIpe3ZhciBjLGQ9dGhpcy5vcHRpb25zW2FdO2Q/KCJzdHJpbmciPT10eXBlb2YgZD9jPXRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKGQpOm4oZCkmJihjPWQpLHRoaXNbYV09Yz9tKGMpW2JdOmQpOnRoaXNbYV09MH0scS5wcm90b3R5cGUubGF5b3V0SXRlbXM9ZnVuY3Rpb24oYSxiKXthPXRoaXMuX2dldEl0ZW1zRm9yTGF5b3V0KGEpLHRoaXMuX2xheW91dEl0ZW1zKGEsYiksdGhpcy5fcG9zdExheW91dCgpfSxxLnByb3RvdHlwZS5fZ2V0SXRlbXNGb3JMYXlvdXQ9ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPVtdLGM9MCxkPWEubGVuZ3RoO2Q+YztjKyspe3ZhciBlPWFbY107ZS5pc0lnbm9yZWR8fGIucHVzaChlKX1yZXR1cm4gYn0scS5wcm90b3R5cGUuX2xheW91dEl0ZW1zPWZ1bmN0aW9uKGEsYil7ZnVuY3Rpb24gYygpe2QuZW1pdEV2ZW50KCJsYXlvdXRDb21wbGV0ZSIsW2QsYV0pfXZhciBkPXRoaXM7aWYoIWF8fCFhLmxlbmd0aClyZXR1cm4gdm9pZCBjKCk7dGhpcy5faXRlbXNPbihhLCJsYXlvdXQiLGMpO2Zvcih2YXIgZT1bXSxmPTAsZz1hLmxlbmd0aDtnPmY7ZisrKXt2YXIgaD1hW2ZdLGk9dGhpcy5fZ2V0SXRlbUxheW91dFBvc2l0aW9uKGgpO2kuaXRlbT1oLGkuaXNJbnN0YW50PWJ8fGguaXNMYXlvdXRJbnN0YW50LGUucHVzaChpKX10aGlzLl9wcm9jZXNzTGF5b3V0UXVldWUoZSl9LHEucHJvdG90eXBlLl9nZXRJdGVtTGF5b3V0UG9zaXRpb249ZnVuY3Rpb24oKXtyZXR1cm57eDowLHk6MH19LHEucHJvdG90eXBlLl9wcm9jZXNzTGF5b3V0UXVldWU9ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPTAsYz1hLmxlbmd0aDtjPmI7YisrKXt2YXIgZD1hW2JdO3RoaXMuX3Bvc2l0aW9uSXRlbShkLml0ZW0sZC54LGQueSxkLmlzSW5zdGFudCl9fSxxLnByb3RvdHlwZS5fcG9zaXRpb25JdGVtPWZ1bmN0aW9uKGEsYixjLGQpe2Q/YS5nb1RvKGIsYyk6YS5tb3ZlVG8oYixjKX0scS5wcm90b3R5cGUuX3Bvc3RMYXlvdXQ9ZnVuY3Rpb24oKXt0aGlzLnJlc2l6ZUNvbnRhaW5lcigpfSxxLnByb3RvdHlwZS5yZXNpemVDb250YWluZXI9ZnVuY3Rpb24oKXtpZih0aGlzLm9wdGlvbnMuaXNSZXNpemluZ0NvbnRhaW5lcil7dmFyIGE9dGhpcy5fZ2V0Q29udGFpbmVyU2l6ZSgpO2EmJih0aGlzLl9zZXRDb250YWluZXJNZWFzdXJlKGEud2lkdGgsITApLHRoaXMuX3NldENvbnRhaW5lck1lYXN1cmUoYS5oZWlnaHQsITEpKX19LHEucHJvdG90eXBlLl9nZXRDb250YWluZXJTaXplPWwscS5wcm90b3R5cGUuX3NldENvbnRhaW5lck1lYXN1cmU9ZnVuY3Rpb24oYSxiKXtpZih2b2lkIDAhPT1hKXt2YXIgYz10aGlzLnNpemU7Yy5pc0JvcmRlckJveCYmKGErPWI/Yy5wYWRkaW5nTGVmdCtjLnBhZGRpbmdSaWdodCtjLmJvcmRlckxlZnRXaWR0aCtjLmJvcmRlclJpZ2h0V2lkdGg6Yy5wYWRkaW5nQm90dG9tK2MucGFkZGluZ1RvcCtjLmJvcmRlclRvcFdpZHRoK2MuYm9yZGVyQm90dG9tV2lkdGgpLGE9TWF0aC5tYXgoYSwwKSx0aGlzLmVsZW1lbnQuc3R5bGVbYj8id2lkdGgiOiJoZWlnaHQiXT1hKyJweCJ9fSxxLnByb3RvdHlwZS5faXRlbXNPbj1mdW5jdGlvbihhLGIsYyl7ZnVuY3Rpb24gZCgpe3JldHVybiBlKyssZT09PWYmJmMuY2FsbChnKSwhMH1mb3IodmFyIGU9MCxmPWEubGVuZ3RoLGc9dGhpcyxoPTAsaT1hLmxlbmd0aDtpPmg7aCsrKXt2YXIgaj1hW2hdO2oub24oYixkKX19LHEucHJvdG90eXBlLmlnbm9yZT1mdW5jdGlvbihhKXt2YXIgYj10aGlzLmdldEl0ZW0oYSk7YiYmKGIuaXNJZ25vcmVkPSEwKX0scS5wcm90b3R5cGUudW5pZ25vcmU9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5nZXRJdGVtKGEpO2ImJmRlbGV0ZSBiLmlzSWdub3JlZH0scS5wcm90b3R5cGUuc3RhbXA9ZnVuY3Rpb24oYSl7aWYoYT10aGlzLl9maW5kKGEpKXt0aGlzLnN0YW1wcz10aGlzLnN0YW1wcy5jb25jYXQoYSk7Zm9yKHZhciBiPTAsYz1hLmxlbmd0aDtjPmI7YisrKXt2YXIgZD1hW2JdO3RoaXMuaWdub3JlKGQpfX19LHEucHJvdG90eXBlLnVuc3RhbXA9ZnVuY3Rpb24oYSl7aWYoYT10aGlzLl9maW5kKGEpKWZvcih2YXIgYj0wLGM9YS5sZW5ndGg7Yz5iO2IrKyl7dmFyIGQ9YVtiXTtmKGQsdGhpcy5zdGFtcHMpLHRoaXMudW5pZ25vcmUoZCl9fSxxLnByb3RvdHlwZS5fZmluZD1mdW5jdGlvbihhKXtyZXR1cm4gYT8oInN0cmluZyI9PXR5cGVvZiBhJiYoYT10aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChhKSksYT1lKGEpKTp2b2lkIDB9LHEucHJvdG90eXBlLl9tYW5hZ2VTdGFtcHM9ZnVuY3Rpb24oKXtpZih0aGlzLnN0YW1wcyYmdGhpcy5zdGFtcHMubGVuZ3RoKXt0aGlzLl9nZXRCb3VuZGluZ1JlY3QoKTtmb3IodmFyIGE9MCxiPXRoaXMuc3RhbXBzLmxlbmd0aDtiPmE7YSsrKXt2YXIgYz10aGlzLnN0YW1wc1thXTt0aGlzLl9tYW5hZ2VTdGFtcChjKX19fSxxLnByb3RvdHlwZS5fZ2V0Qm91bmRpbmdSZWN0PWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5lbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLGI9dGhpcy5zaXplO3RoaXMuX2JvdW5kaW5nUmVjdD17bGVmdDphLmxlZnQrYi5wYWRkaW5nTGVmdCtiLmJvcmRlckxlZnRXaWR0aCx0b3A6YS50b3ArYi5wYWRkaW5nVG9wK2IuYm9yZGVyVG9wV2lkdGgscmlnaHQ6YS5yaWdodC0oYi5wYWRkaW5nUmlnaHQrYi5ib3JkZXJSaWdodFdpZHRoKSxib3R0b206YS5ib3R0b20tKGIucGFkZGluZ0JvdHRvbStiLmJvcmRlckJvdHRvbVdpZHRoKX19LHEucHJvdG90eXBlLl9tYW5hZ2VTdGFtcD1sLHEucHJvdG90eXBlLl9nZXRFbGVtZW50T2Zmc2V0PWZ1bmN0aW9uKGEpe3ZhciBiPWEuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksYz10aGlzLl9ib3VuZGluZ1JlY3QsZD1tKGEpLGU9e2xlZnQ6Yi5sZWZ0LWMubGVmdC1kLm1hcmdpbkxlZnQsdG9wOmIudG9wLWMudG9wLWQubWFyZ2luVG9wLHJpZ2h0OmMucmlnaHQtYi5yaWdodC1kLm1hcmdpblJpZ2h0LGJvdHRvbTpjLmJvdHRvbS1iLmJvdHRvbS1kLm1hcmdpbkJvdHRvbX07cmV0dXJuIGV9LHEucHJvdG90eXBlLmhhbmRsZUV2ZW50PWZ1bmN0aW9uKGEpe3ZhciBiPSJvbiIrYS50eXBlO3RoaXNbYl0mJnRoaXNbYl0oYSl9LHEucHJvdG90eXBlLmJpbmRSZXNpemU9ZnVuY3Rpb24oKXt0aGlzLmlzUmVzaXplQm91bmR8fChjLmJpbmQoYSwicmVzaXplIix0aGlzKSx0aGlzLmlzUmVzaXplQm91bmQ9ITApfSxxLnByb3RvdHlwZS51bmJpbmRSZXNpemU9ZnVuY3Rpb24oKXt0aGlzLmlzUmVzaXplQm91bmQmJmMudW5iaW5kKGEsInJlc2l6ZSIsdGhpcyksdGhpcy5pc1Jlc2l6ZUJvdW5kPSExfSxxLnByb3RvdHlwZS5vbnJlc2l6ZT1mdW5jdGlvbigpe2Z1bmN0aW9uIGEoKXtiLnJlc2l6ZSgpLGRlbGV0ZSBiLnJlc2l6ZVRpbWVvdXR9dGhpcy5yZXNpemVUaW1lb3V0JiZjbGVhclRpbWVvdXQodGhpcy5yZXNpemVUaW1lb3V0KTt2YXIgYj10aGlzO3RoaXMucmVzaXplVGltZW91dD1zZXRUaW1lb3V0KGEsMTAwKX0scS5wcm90b3R5cGUucmVzaXplPWZ1bmN0aW9uKCl7dGhpcy5pc1Jlc2l6ZUJvdW5kJiZ0aGlzLm5lZWRzUmVzaXplTGF5b3V0KCkmJnRoaXMubGF5b3V0KCl9LHEucHJvdG90eXBlLm5lZWRzUmVzaXplTGF5b3V0PWZ1bmN0aW9uKCl7dmFyIGE9bSh0aGlzLmVsZW1lbnQpLGI9dGhpcy5zaXplJiZhO3JldHVybiBiJiZhLmlubmVyV2lkdGghPT10aGlzLnNpemUuaW5uZXJXaWR0aH0scS5wcm90b3R5cGUuYWRkSXRlbXM9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5faXRlbWl6ZShhKTtyZXR1cm4gYi5sZW5ndGgmJih0aGlzLml0ZW1zPXRoaXMuaXRlbXMuY29uY2F0KGIpKSxifSxxLnByb3RvdHlwZS5hcHBlbmRlZD1mdW5jdGlvbihhKXt2YXIgYj10aGlzLmFkZEl0ZW1zKGEpO2IubGVuZ3RoJiYodGhpcy5sYXlvdXRJdGVtcyhiLCEwKSx0aGlzLnJldmVhbChiKSl9LHEucHJvdG90eXBlLnByZXBlbmRlZD1mdW5jdGlvbihhKXt2YXIgYj10aGlzLl9pdGVtaXplKGEpO2lmKGIubGVuZ3RoKXt2YXIgYz10aGlzLml0ZW1zLnNsaWNlKDApO3RoaXMuaXRlbXM9Yi5jb25jYXQoYyksdGhpcy5fcmVzZXRMYXlvdXQoKSx0aGlzLl9tYW5hZ2VTdGFtcHMoKSx0aGlzLmxheW91dEl0ZW1zKGIsITApLHRoaXMucmV2ZWFsKGIpLHRoaXMubGF5b3V0SXRlbXMoYyl9fSxxLnByb3RvdHlwZS5yZXZlYWw9ZnVuY3Rpb24oYSl7dmFyIGI9YSYmYS5sZW5ndGg7aWYoYilmb3IodmFyIGM9MDtiPmM7YysrKXt2YXIgZD1hW2NdO2QucmV2ZWFsKCl9fSxxLnByb3RvdHlwZS5oaWRlPWZ1bmN0aW9uKGEpe3ZhciBiPWEmJmEubGVuZ3RoO2lmKGIpZm9yKHZhciBjPTA7Yj5jO2MrKyl7dmFyIGQ9YVtjXTtkLmhpZGUoKX19LHEucHJvdG90eXBlLmdldEl0ZW09ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPTAsYz10aGlzLml0ZW1zLmxlbmd0aDtjPmI7YisrKXt2YXIgZD10aGlzLml0ZW1zW2JdO2lmKGQuZWxlbWVudD09PWEpcmV0dXJuIGR9fSxxLnByb3RvdHlwZS5nZXRJdGVtcz1mdW5jdGlvbihhKXtpZihhJiZhLmxlbmd0aCl7Zm9yKHZhciBiPVtdLGM9MCxkPWEubGVuZ3RoO2Q+YztjKyspe3ZhciBlPWFbY10sZj10aGlzLmdldEl0ZW0oZSk7ZiYmYi5wdXNoKGYpfXJldHVybiBifX0scS5wcm90b3R5cGUucmVtb3ZlPWZ1bmN0aW9uKGEpe2E9ZShhKTt2YXIgYj10aGlzLmdldEl0ZW1zKGEpO2lmKGImJmIubGVuZ3RoKXt0aGlzLl9pdGVtc09uKGIsInJlbW92ZSIsZnVuY3Rpb24oKXt0aGlzLmVtaXRFdmVudCgicmVtb3ZlQ29tcGxldGUiLFt0aGlzLGJdKX0pO2Zvcih2YXIgYz0wLGQ9Yi5sZW5ndGg7ZD5jO2MrKyl7dmFyIGc9YltjXTtnLnJlbW92ZSgpLGYoZyx0aGlzLml0ZW1zKX19fSxxLnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5lbGVtZW50LnN0eWxlO2EuaGVpZ2h0PSIiLGEucG9zaXRpb249IiIsYS53aWR0aD0iIjtmb3IodmFyIGI9MCxjPXRoaXMuaXRlbXMubGVuZ3RoO2M+YjtiKyspe3ZhciBkPXRoaXMuaXRlbXNbYl07ZC5kZXN0cm95KCl9dGhpcy51bmJpbmRSZXNpemUoKSxkZWxldGUgdGhpcy5lbGVtZW50Lm91dGxheWVyR1VJRCxrJiZrLnJlbW92ZURhdGEodGhpcy5lbGVtZW50LHRoaXMuY29uc3RydWN0b3IubmFtZXNwYWNlKX0scS5kYXRhPWZ1bmN0aW9uKGEpe3ZhciBiPWEmJmEub3V0bGF5ZXJHVUlEO3JldHVybiBiJiZzW2JdfSxxLmNyZWF0ZT1mdW5jdGlvbihhLGMpe2Z1bmN0aW9uIGUoKXtxLmFwcGx5KHRoaXMsYXJndW1lbnRzKX1yZXR1cm4gT2JqZWN0LmNyZWF0ZT9lLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHEucHJvdG90eXBlKTpiKGUucHJvdG90eXBlLHEucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lLGUuZGVmYXVsdHM9Yih7fSxxLmRlZmF1bHRzKSxiKGUuZGVmYXVsdHMsYyksZS5wcm90b3R5cGUuc2V0dGluZ3M9e30sZS5uYW1lc3BhY2U9YSxlLmRhdGE9cS5kYXRhLGUuSXRlbT1mdW5jdGlvbigpe3AuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxlLkl0ZW0ucHJvdG90eXBlPW5ldyBwLGQoZnVuY3Rpb24oKXtmb3IodmFyIGI9ZyhhKSxjPWkucXVlcnlTZWxlY3RvckFsbCgiLmpzLSIrYiksZD0iZGF0YS0iK2IrIi1vcHRpb25zIixmPTAsaD1jLmxlbmd0aDtoPmY7ZisrKXt2YXIgbCxtPWNbZl0sbj1tLmdldEF0dHJpYnV0ZShkKTt0cnl7bD1uJiZKU09OLnBhcnNlKG4pfWNhdGNoKG8pe2omJmouZXJyb3IoIkVycm9yIHBhcnNpbmcgIitkKyIgb24gIittLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkrKG0uaWQ/IiMiK20uaWQ6IiIpKyI6ICIrbyk7Y29udGludWV9dmFyIHA9bmV3IGUobSxsKTtrJiZrLmRhdGEobSxhLHApfX0pLGsmJmsuYnJpZGdldCYmay5icmlkZ2V0KGEsZSksZX0scS5JdGVtPXAscX12YXIgaT1hLmRvY3VtZW50LGo9YS5jb25zb2xlLGs9YS5qUXVlcnksbD1mdW5jdGlvbigpe30sbT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLG49Im9iamVjdCI9PXR5cGVvZiBIVE1MRWxlbWVudD9mdW5jdGlvbihhKXtyZXR1cm4gYSBpbnN0YW5jZW9mIEhUTUxFbGVtZW50fTpmdW5jdGlvbihhKXtyZXR1cm4gYSYmIm9iamVjdCI9PXR5cGVvZiBhJiYxPT09YS5ub2RlVHlwZSYmInN0cmluZyI9PXR5cGVvZiBhLm5vZGVOYW1lfSxvPUFycmF5LnByb3RvdHlwZS5pbmRleE9mP2Z1bmN0aW9uKGEsYil7cmV0dXJuIGEuaW5kZXhPZihiKX06ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9MCxkPWEubGVuZ3RoO2Q+YztjKyspaWYoYVtjXT09PWIpcmV0dXJuIGM7cmV0dXJuLTF9OyJmdW5jdGlvbiI9PXR5cGVvZiBjJiZjLmFtZD9jKCJvdXRsYXllci9vdXRsYXllciIsWyJldmVudGllL2V2ZW50aWUiLCJkb2MtcmVhZHkvZG9jLXJlYWR5IiwiZXZlbnRFbWl0dGVyL0V2ZW50RW1pdHRlciIsImdldC1zaXplL2dldC1zaXplIiwibWF0Y2hlcy1zZWxlY3Rvci9tYXRjaGVzLXNlbGVjdG9yIiwiLi9pdGVtIl0saCk6YS5PdXRsYXllcj1oKGEuZXZlbnRpZSxhLmRvY1JlYWR5LGEuRXZlbnRFbWl0dGVyLGEuZ2V0U2l6ZSxhLm1hdGNoZXNTZWxlY3RvcixhLk91dGxheWVyLkl0ZW0pfSh3aW5kb3cpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSxiKXt2YXIgYz1hLmNyZWF0ZSgibWFzb25yeSIpO3JldHVybiBjLnByb3RvdHlwZS5fcmVzZXRMYXlvdXQ9ZnVuY3Rpb24oKXt0aGlzLmdldFNpemUoKSx0aGlzLl9nZXRNZWFzdXJlbWVudCgiY29sdW1uV2lkdGgiLCJvdXRlcldpZHRoIiksdGhpcy5fZ2V0TWVhc3VyZW1lbnQoImd1dHRlciIsIm91dGVyV2lkdGgiKSx0aGlzLm1lYXN1cmVDb2x1bW5zKCk7dmFyIGE9dGhpcy5jb2xzO2Zvcih0aGlzLmNvbFlzPVtdO2EtLTspdGhpcy5jb2xZcy5wdXNoKDApO3RoaXMubWF4WT0wfSxjLnByb3RvdHlwZS5tZWFzdXJlQ29sdW1ucz1mdW5jdGlvbigpe2lmKHRoaXMuZ2V0Q29udGFpbmVyV2lkdGgoKSwhdGhpcy5jb2x1bW5XaWR0aCl7dmFyIGE9dGhpcy5pdGVtc1swXSxjPWEmJmEuZWxlbWVudDt0aGlzLmNvbHVtbldpZHRoPWMmJmIoYykub3V0ZXJXaWR0aHx8dGhpcy5jb250YWluZXJXaWR0aH10aGlzLmNvbHVtbldpZHRoKz10aGlzLmd1dHRlcix0aGlzLmNvbHM9TWF0aC5mbG9vcigodGhpcy5jb250YWluZXJXaWR0aCt0aGlzLmd1dHRlcikvdGhpcy5jb2x1bW5XaWR0aCksdGhpcy5jb2xzPU1hdGgubWF4KHRoaXMuY29scywxKX0sYy5wcm90b3R5cGUuZ2V0Q29udGFpbmVyV2lkdGg9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm9wdGlvbnMuaXNGaXRXaWR0aD90aGlzLmVsZW1lbnQucGFyZW50Tm9kZTp0aGlzLmVsZW1lbnQsYz1iKGEpO3RoaXMuY29udGFpbmVyV2lkdGg9YyYmYy5pbm5lcldpZHRofSxjLnByb3RvdHlwZS5fZ2V0SXRlbUxheW91dFBvc2l0aW9uPWZ1bmN0aW9uKGEpe2EuZ2V0U2l6ZSgpO3ZhciBiPWEuc2l6ZS5vdXRlcldpZHRoJXRoaXMuY29sdW1uV2lkdGgsYz1iJiYxPmI/InJvdW5kIjoiY2VpbCIsZT1NYXRoW2NdKGEuc2l6ZS5vdXRlcldpZHRoL3RoaXMuY29sdW1uV2lkdGgpO2U9TWF0aC5taW4oZSx0aGlzLmNvbHMpO2Zvcih2YXIgZj10aGlzLl9nZXRDb2xHcm91cChlKSxnPU1hdGgubWluLmFwcGx5KE1hdGgsZiksaD1kKGYsZyksaT17eDp0aGlzLmNvbHVtbldpZHRoKmgseTpnfSxqPWcrYS5zaXplLm91dGVySGVpZ2h0LGs9dGhpcy5jb2xzKzEtZi5sZW5ndGgsbD0wO2s+bDtsKyspdGhpcy5jb2xZc1toK2xdPWo7cmV0dXJuIGl9LGMucHJvdG90eXBlLl9nZXRDb2xHcm91cD1mdW5jdGlvbihhKXtpZigyPmEpcmV0dXJuIHRoaXMuY29sWXM7Zm9yKHZhciBiPVtdLGM9dGhpcy5jb2xzKzEtYSxkPTA7Yz5kO2QrKyl7dmFyIGU9dGhpcy5jb2xZcy5zbGljZShkLGQrYSk7YltkXT1NYXRoLm1heC5hcHBseShNYXRoLGUpfXJldHVybiBifSxjLnByb3RvdHlwZS5fbWFuYWdlU3RhbXA9ZnVuY3Rpb24oYSl7dmFyIGM9YihhKSxkPXRoaXMuX2dldEVsZW1lbnRPZmZzZXQoYSksZT10aGlzLm9wdGlvbnMuaXNPcmlnaW5MZWZ0P2QubGVmdDpkLnJpZ2h0LGY9ZStjLm91dGVyV2lkdGgsZz1NYXRoLmZsb29yKGUvdGhpcy5jb2x1bW5XaWR0aCk7Zz1NYXRoLm1heCgwLGcpO3ZhciBoPU1hdGguZmxvb3IoZi90aGlzLmNvbHVtbldpZHRoKTtoLT1mJXRoaXMuY29sdW1uV2lkdGg/MDoxLGg9TWF0aC5taW4odGhpcy5jb2xzLTEsaCk7Zm9yKHZhciBpPSh0aGlzLm9wdGlvbnMuaXNPcmlnaW5Ub3A/ZC50b3A6ZC5ib3R0b20pK2Mub3V0ZXJIZWlnaHQsaj1nO2g+PWo7aisrKXRoaXMuY29sWXNbal09TWF0aC5tYXgoaSx0aGlzLmNvbFlzW2pdKX0sYy5wcm90b3R5cGUuX2dldENvbnRhaW5lclNpemU9ZnVuY3Rpb24oKXt0aGlzLm1heFk9TWF0aC5tYXguYXBwbHkoTWF0aCx0aGlzLmNvbFlzKTt2YXIgYT17aGVpZ2h0OnRoaXMubWF4WX07cmV0dXJuIHRoaXMub3B0aW9ucy5pc0ZpdFdpZHRoJiYoYS53aWR0aD10aGlzLl9nZXRDb250YWluZXJGaXRXaWR0aCgpKSxhfSxjLnByb3RvdHlwZS5fZ2V0Q29udGFpbmVyRml0V2lkdGg9ZnVuY3Rpb24oKXtmb3IodmFyIGE9MCxiPXRoaXMuY29sczstLWImJjA9PT10aGlzLmNvbFlzW2JdOylhKys7cmV0dXJuKHRoaXMuY29scy1hKSp0aGlzLmNvbHVtbldpZHRoLXRoaXMuZ3V0dGVyfSxjLnByb3RvdHlwZS5uZWVkc1Jlc2l6ZUxheW91dD1mdW5jdGlvbigpe3ZhciBhPXRoaXMuY29udGFpbmVyV2lkdGg7cmV0dXJuIHRoaXMuZ2V0Q29udGFpbmVyV2lkdGgoKSxhIT09dGhpcy5jb250YWluZXJXaWR0aH0sY312YXIgZD1BcnJheS5wcm90b3R5cGUuaW5kZXhPZj9mdW5jdGlvbihhLGIpe3JldHVybiBhLmluZGV4T2YoYil9OmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTAsZD1hLmxlbmd0aDtkPmM7YysrKXt2YXIgZT1hW2NdO2lmKGU9PT1iKXJldHVybiBjfXJldHVybi0xfTsiZnVuY3Rpb24iPT10eXBlb2YgYyYmYy5hbWQ/YygibWFzb25yeS9tYXNvbnJ5IixbIm91dGxheWVyL291dGxheWVyIiwiZ2V0LXNpemUvZ2V0LXNpemUiXSxiKTphLk1hc29ucnk9YihhLk91dGxheWVyLGEuZ2V0U2l6ZSl9KHdpbmRvdyksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhLGIpe3ZhciBjPWEuY3JlYXRlKCJmbHVpZE1hc29ucnkiKTtyZXR1cm4gYy5wcm90b3R5cGUubWVhc3VyZUNvbHVtbnM9ZnVuY3Rpb24oKXt0aGlzLl9nZXRNZWFzdXJlbWVudCgibWluQ29sdW1uV2lkdGgiLCJvdXRlcldpZHRoIiksdGhpcy5taW5Db2x1bW5XaWR0aCs9dGhpcy5ndXR0ZXIsdGhpcy5nZXRDb250YWluZXJXaWR0aCgpLHRoaXMub3B0aW9ucy5pc0ZpdFdpZHRoJiYodGhpcy5jb250YWluZXJXaWR0aD10aGlzLmNvbnRhaW5lcldpZHRoLSh0aGlzLnNpemUucGFkZGluZ0xlZnQrdGhpcy5zaXplLnBhZGRpbmdSaWdodCt0aGlzLnNpemUuYm9yZGVyTGVmdFdpZHRoK3RoaXMuc2l6ZS5ib3JkZXJSaWdodFdpZHRoKSksdGhpcy5jb2xzPU1hdGguZmxvb3IoKHRoaXMuY29udGFpbmVyV2lkdGgrdGhpcy5ndXR0ZXIpL3RoaXMubWluQ29sdW1uV2lkdGgpLHRoaXMuY29scz1NYXRoLm1heCh0aGlzLmNvbHMsMSk7dmFyIGE9dGhpcy5jb250YWluZXJXaWR0aCt0aGlzLmd1dHRlci10aGlzLmNvbHMqdGhpcy5taW5Db2x1bW5XaWR0aCxiPWEvdGhpcy5jb2xzLGM9KGItTWF0aC5mbG9vcihiKSkqdGhpcy5jb2xzO3RoaXMuY2VudGVyaW5nT2Zmc2V0PXRoaXMub3B0aW9ucy5pc0ZpdFdpZHRoPzA6TWF0aC5yb3VuZChjLzIpLHRoaXMuY29sdW1uV2lkdGg9dGhpcy5taW5Db2x1bW5XaWR0aCtNYXRoLmZsb29yKGIpLHRoaXMuY29sdW1uV2lkdGhJbm5lcj10aGlzLmNvbHVtbldpZHRoLXRoaXMuZ3V0dGVyfSxjLnByb3RvdHlwZS5fZ2V0SXRlbUxheW91dFBvc2l0aW9uPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY29sdW1uV2lkdGhJbm5lcixjPWEuZWxlbWVudC5nZXRBdHRyaWJ1dGUoImRhdGEtY29sdW1ucyIpO2M+MT8oYz1NYXRoLm1pbihjLHRoaXMuY29scyksYj1iKmMrKGMtMSkqdGhpcy5ndXR0ZXIpOmM9MSxhLmVsZW1lbnQuc3R5bGUud2lkdGg9YisicHgiLGEuZ2V0U2l6ZSgpO2Zvcih2YXIgZT10aGlzLl9nZXRDb2xHcm91cChjKSxmPU1hdGgubWluLmFwcGx5KE1hdGgsZSksZz1kKGUsZiksaD17eDp0aGlzLmNvbHVtbldpZHRoKmcrdGhpcy5jZW50ZXJpbmdPZmZzZXQseTpmfSxpPWYrYS5zaXplLm91dGVySGVpZ2h0LGo9dGhpcy5jb2xzKzEtZS5sZW5ndGgsaz0wO2o+aztrKyspdGhpcy5jb2xZc1tnK2tdPWk7cmV0dXJuIGh9LGMucHJvdG90eXBlLl9yZXNldExheW91dD1iLnByb3RvdHlwZS5fcmVzZXRMYXlvdXQsYy5wcm90b3R5cGUuZ2V0Q29udGFpbmVyV2lkdGg9Yi5wcm90b3R5cGUuZ2V0Q29udGFpbmVyV2lkdGgsYy5wcm90b3R5cGUuX2dldENvbEdyb3VwPWIucHJvdG90eXBlLl9nZXRDb2xHcm91cCxjLnByb3RvdHlwZS5fbWFuYWdlU3RhbXA9Yi5wcm90b3R5cGUuX21hbmFnZVN0YW1wLGMucHJvdG90eXBlLl9nZXRDb250YWluZXJTaXplPWIucHJvdG90eXBlLl9nZXRDb250YWluZXJTaXplLGMucHJvdG90eXBlLl9nZXRDb250YWluZXJGaXRXaWR0aD1iLnByb3RvdHlwZS5fZ2V0Q29udGFpbmVyRml0V2lkdGgsYy5wcm90b3R5cGUubmVlZHNSZXNpemVMYXlvdXQ9Yi5wcm90b3R5cGUubmVlZHNSZXNpemVMYXlvdXQsY312YXIgZD1BcnJheS5wcm90b3R5cGUuaW5kZXhPZj9mdW5jdGlvbihhLGIpe3JldHVybiBhLmluZGV4T2YoYil9OmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTAsZD1hLmxlbmd0aDtkPmM7YysrKXt2YXIgZT1hW2NdO2lmKGU9PT1iKXJldHVybiBjfXJldHVybi0xfTsiZnVuY3Rpb24iPT10eXBlb2YgYyYmYy5hbWQ/YygiZmx1aWQtbWFzb25yeSIsWyJvdXRsYXllci9vdXRsYXllciIsIm1hc29ucnkvbWFzb25yeSJdLGIpOmEuRmx1aWRNYXNvbnJ5PWIoYS5PdXRsYXllcixhLk1hc29ucnkpfSh3aW5kb3cpLGZ1bmN0aW9uKGEsYil7dmFyIGMsZD1hLmpRdWVyeXx8YS5Db3dib3l8fChhLkNvd2JveT17fSk7ZC50aHJvdHRsZT1jPWZ1bmN0aW9uKGEsYyxlLGYpe2Z1bmN0aW9uIGcoKXtmdW5jdGlvbiBkKCl7aT0rbmV3IERhdGUsZS5hcHBseShqLGwpfWZ1bmN0aW9uIGcoKXtoPWJ9dmFyIGo9dGhpcyxrPStuZXcgRGF0ZS1pLGw9YXJndW1lbnRzO2YmJiFoJiZkKCksaCYmY2xlYXJUaW1lb3V0KGgpLGY9PT1iJiZrPmE/ZCgpOmMhPT0hMCYmKGg9c2V0VGltZW91dChmP2c6ZCxmPT09Yj9hLWs6YSkpfXZhciBoLGk9MDtyZXR1cm4iYm9vbGVhbiIhPXR5cGVvZiBjJiYoZj1lLGU9YyxjPWIpLGQuZ3VpZCYmKGcuZ3VpZD1lLmd1aWQ9ZS5ndWlkfHxkLmd1aWQrKyksZ30sZC5kZWJvdW5jZT1mdW5jdGlvbihhLGQsZSl7cmV0dXJuIGU9PT1iP2MoYSxkLCExKTpjKGEsZSxkIT09ITEpfX0odGhpcyksYygidmVuZG9yL2pxdWVyeS50aHJvdHRsZS1kZWJvdW5jZSIsZnVuY3Rpb24oKXt9KSxmdW5jdGlvbihhKXsiZnVuY3Rpb24iPT10eXBlb2YgYyYmYy5hbWQmJmMuYW1kLmpRdWVyeT9jKCJqcXVlcnktdG91Y2hzd2lwZSIsWyJqcXVlcnkiXSxhKTphKGpRdWVyeSl9KGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYil7cmV0dXJuIWJ8fHZvaWQgMCE9PWIuYWxsb3dQYWdlU2Nyb2xsfHx2b2lkIDA9PT1iLnN3aXBlJiZ2b2lkIDA9PT1iLnN3aXBlU3RhdHVzfHwoYi5hbGxvd1BhZ2VTY3JvbGw9aiksdm9pZCAwIT09Yi5jbGljayYmdm9pZCAwPT09Yi50YXAmJihiLnRhcD1iLmNsaWNrKSxifHwoYj17fSksYj1hLmV4dGVuZCh7fSxhLmZuLnN3aXBlLmRlZmF1bHRzLGIpLHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBkPWEodGhpcyksZT1kLmRhdGEoQik7ZXx8KGU9bmV3IGModGhpcyxiKSxkLmRhdGEoQixlKSl9KX1mdW5jdGlvbiBjKGIsYyl7ZnVuY3Rpb24gQyhiKXtpZighKGpiKCl8fGEoYi50YXJnZXQpLmNsb3Nlc3QoYy5leGNsdWRlZEVsZW1lbnRzLFNiKS5sZW5ndGg+MCkpe3ZhciBkLGU9Yi5vcmlnaW5hbEV2ZW50P2Iub3JpZ2luYWxFdmVudDpiLGY9eT9lLnRvdWNoZXNbMF06ZTtyZXR1cm4gVGI9dSx5P1ViPWUudG91Y2hlcy5sZW5ndGg6Yi5wcmV2ZW50RGVmYXVsdCgpLEpiPTAsS2I9bnVsbCxRYj1udWxsLExiPTAsTWI9MCxOYj0wLE9iPTEsUGI9MCxWYj1vYigpLFJiPXJiKCksaGIoKSwheXx8VWI9PT1jLmZpbmdlcnN8fGMuZmluZ2Vycz09PXN8fFIoKT8obGIoMCxmKSxXYj1BYigpLDI9PVViJiYobGIoMSxlLnRvdWNoZXNbMV0pLE1iPU5iPXViKFZiWzBdLnN0YXJ0LFZiWzFdLnN0YXJ0KSksKGMuc3dpcGVTdGF0dXN8fGMucGluY2hTdGF0dXMpJiYoZD1KKGUsVGIpKSk6ZD0hMSxkPT09ITE/KFRiPXgsSihlLFRiKSxkKTooYy5ob2xkJiYoYWM9c2V0VGltZW91dChhLnByb3h5KGZ1bmN0aW9uKCl7U2IudHJpZ2dlcigiaG9sZCIsW2UudGFyZ2V0XSksYy5ob2xkJiYoZD1jLmhvbGQuY2FsbChTYixlLGUudGFyZ2V0KSl9LHRoaXMpLGMubG9uZ1RhcFRocmVzaG9sZCkpLGtiKCEwKSxudWxsKX19ZnVuY3Rpb24gRChhKXt2YXIgYj1hLm9yaWdpbmFsRXZlbnQ/YS5vcmlnaW5hbEV2ZW50OmE7aWYoVGIhPT13JiZUYiE9PXgmJiFpYigpKXt2YXIgZCxlPXk/Yi50b3VjaGVzWzBdOmIsZj1tYihlKTtpZihYYj1BYigpLHkmJihVYj1iLnRvdWNoZXMubGVuZ3RoKSxjLmhvbGQmJmNsZWFyVGltZW91dChhYyksVGI9diwyPT1VYiYmKDA9PU1iPyhsYigxLGIudG91Y2hlc1sxXSksTWI9TmI9dWIoVmJbMF0uc3RhcnQsVmJbMV0uc3RhcnQpKToobWIoYi50b3VjaGVzWzFdKSxOYj11YihWYlswXS5lbmQsVmJbMV0uZW5kKSxRYj13YihWYlswXS5lbmQsVmJbMV0uZW5kKSksT2I9dmIoTWIsTmIpLFBiPU1hdGguYWJzKE1iLU5iKSksVWI9PT1jLmZpbmdlcnN8fGMuZmluZ2Vycz09PXN8fCF5fHxSKCkpe2lmKEtiPXpiKGYuc3RhcnQsZi5lbmQpLFAoYSxLYiksSmI9eGIoZi5zdGFydCxmLmVuZCksTGI9dGIoKSxwYihLYixKYiksKGMuc3dpcGVTdGF0dXN8fGMucGluY2hTdGF0dXMpJiYoZD1KKGIsVGIpKSwhYy50cmlnZ2VyT25Ub3VjaEVuZHx8Yy50cmlnZ2VyT25Ub3VjaExlYXZlKXt2YXIgZz0hMDtpZihjLnRyaWdnZXJPblRvdWNoTGVhdmUpe3ZhciBoPUJiKHRoaXMpO2c9Q2IoZi5lbmQsaCl9IWMudHJpZ2dlck9uVG91Y2hFbmQmJmc/VGI9SSh2KTpjLnRyaWdnZXJPblRvdWNoTGVhdmUmJiFnJiYoVGI9SSh3KSksKFRiPT14fHxUYj09dykmJkooYixUYil9fWVsc2UgVGI9eCxKKGIsVGIpO2Q9PT0hMSYmKFRiPXgsSihiLFRiKSl9fWZ1bmN0aW9uIEUoYSl7dmFyIGI9YS5vcmlnaW5hbEV2ZW50O3JldHVybiB5JiZiLnRvdWNoZXMubGVuZ3RoPjA/KGdiKCksITApOihpYigpJiYoVWI9WmIpLFhiPUFiKCksTGI9dGIoKSxNKCl8fCFMKCk/KFRiPXgsSihiLFRiKSk6Yy50cmlnZ2VyT25Ub3VjaEVuZHx8MD09Yy50cmlnZ2VyT25Ub3VjaEVuZCYmVGI9PT12PyhhLnByZXZlbnREZWZhdWx0KCksVGI9dyxKKGIsVGIpKTohYy50cmlnZ2VyT25Ub3VjaEVuZCYmWSgpPyhUYj13LEsoYixUYixuKSk6VGI9PT12JiYoVGI9eCxKKGIsVGIpKSxrYighMSksbnVsbCl9ZnVuY3Rpb24gRigpe1ViPTAsWGI9MCxXYj0wLE1iPTAsTmI9MCxPYj0xLGhiKCksa2IoITEpfWZ1bmN0aW9uIEcoYSl7dmFyIGI9YS5vcmlnaW5hbEV2ZW50O2MudHJpZ2dlck9uVG91Y2hMZWF2ZSYmKFRiPUkodyksSihiLFRiKSl9ZnVuY3Rpb24gSCgpe1NiLnVuYmluZChFYixDKSxTYi51bmJpbmQoSWIsRiksU2IudW5iaW5kKEZiLEQpLFNiLnVuYmluZChHYixFKSxIYiYmU2IudW5iaW5kKEhiLEcpLGtiKCExKX1mdW5jdGlvbiBJKGEpe3ZhciBiPWEsZD1PKCksZT1MKCksZj1NKCk7cmV0dXJuIWR8fGY/Yj14OiFlfHxhIT12fHxjLnRyaWdnZXJPblRvdWNoRW5kJiYhYy50cmlnZ2VyT25Ub3VjaExlYXZlPyFlJiZhPT13JiZjLnRyaWdnZXJPblRvdWNoTGVhdmUmJihiPXgpOmI9dyxifWZ1bmN0aW9uIEooYSxiKXt2YXIgYz12b2lkIDA7cmV0dXJuIFYoKXx8VSgpP2M9SyhhLGIsbCk6KFMoKXx8UigpKSYmYyE9PSExJiYoYz1LKGEsYixtKSksZWIoKSYmYyE9PSExP2M9SyhhLGIsbyk6ZmIoKSYmYyE9PSExP2M9SyhhLGIscCk6ZGIoKSYmYyE9PSExJiYoYz1LKGEsYixuKSksYj09PXgmJkYoYSksYj09PXcmJih5PzA9PWEudG91Y2hlcy5sZW5ndGgmJkYoYSk6RihhKSksY31mdW5jdGlvbiBLKGIsaixrKXt2YXIgcT12b2lkIDA7aWYoaz09bCl7aWYoU2IudHJpZ2dlcigic3dpcGVTdGF0dXMiLFtqLEtifHxudWxsLEpifHwwLExifHwwLFViLFZiXSksYy5zd2lwZVN0YXR1cyYmKHE9Yy5zd2lwZVN0YXR1cy5jYWxsKFNiLGIsaixLYnx8bnVsbCxKYnx8MCxMYnx8MCxVYixWYikscT09PSExKSlyZXR1cm4hMTtpZihqPT13JiZUKCkpe2lmKFNiLnRyaWdnZXIoInN3aXBlIixbS2IsSmIsTGIsVWIsVmJdKSxjLnN3aXBlJiYocT1jLnN3aXBlLmNhbGwoU2IsYixLYixKYixMYixVYixWYikscT09PSExKSlyZXR1cm4hMTtzd2l0Y2goS2Ipe2Nhc2UgZDpTYi50cmlnZ2VyKCJzd2lwZUxlZnQiLFtLYixKYixMYixVYixWYl0pLGMuc3dpcGVMZWZ0JiYocT1jLnN3aXBlTGVmdC5jYWxsKFNiLGIsS2IsSmIsTGIsVWIsVmIpKTticmVhaztjYXNlIGU6U2IudHJpZ2dlcigic3dpcGVSaWdodCIsW0tiLEpiLExiLFViLFZiXSksYy5zd2lwZVJpZ2h0JiYocT1jLnN3aXBlUmlnaHQuY2FsbChTYixiLEtiLEpiLExiLFViLFZiKSk7YnJlYWs7Y2FzZSBmOlNiLnRyaWdnZXIoInN3aXBlVXAiLFtLYixKYixMYixVYixWYl0pLGMuc3dpcGVVcCYmKHE9Yy5zd2lwZVVwLmNhbGwoU2IsYixLYixKYixMYixVYixWYikpO2JyZWFrO2Nhc2UgZzpTYi50cmlnZ2VyKCJzd2lwZURvd24iLFtLYixKYixMYixVYixWYl0pLGMuc3dpcGVEb3duJiYocT1jLnN3aXBlRG93bi5jYWxsKFNiLGIsS2IsSmIsTGIsVWIsVmIpKX19fWlmKGs9PW0pe2lmKFNiLnRyaWdnZXIoInBpbmNoU3RhdHVzIixbaixRYnx8bnVsbCxQYnx8MCxMYnx8MCxVYixPYixWYl0pLGMucGluY2hTdGF0dXMmJihxPWMucGluY2hTdGF0dXMuY2FsbChTYixiLGosUWJ8fG51bGwsUGJ8fDAsTGJ8fDAsVWIsT2IsVmIpLHE9PT0hMSkpcmV0dXJuITE7aWYoaj09dyYmUSgpKXN3aXRjaChRYil7Y2FzZSBoOlNiLnRyaWdnZXIoInBpbmNoSW4iLFtRYnx8bnVsbCxQYnx8MCxMYnx8MCxVYixPYixWYl0pLGMucGluY2hJbiYmKHE9Yy5waW5jaEluLmNhbGwoU2IsYixRYnx8bnVsbCxQYnx8MCxMYnx8MCxVYixPYixWYikpO2JyZWFrO2Nhc2UgaTpTYi50cmlnZ2VyKCJwaW5jaE91dCIsW1FifHxudWxsLFBifHwwLExifHwwLFViLE9iLFZiXSksYy5waW5jaE91dCYmKHE9Yy5waW5jaE91dC5jYWxsKFNiLGIsUWJ8fG51bGwsUGJ8fDAsTGJ8fDAsVWIsT2IsVmIpKX19cmV0dXJuIGs9PW4/KGo9PT14fHxqPT09dykmJihjbGVhclRpbWVvdXQoX2IpLGNsZWFyVGltZW91dChhYyksWigpJiYhYWIoKT8oJGI9QWIoKSxfYj1zZXRUaW1lb3V0KGEucHJveHkoZnVuY3Rpb24oKXskYj1udWxsLFNiLnRyaWdnZXIoInRhcCIsW2IudGFyZ2V0XSksYy50YXAmJihxPWMudGFwLmNhbGwoU2IsYixiLnRhcmdldCkpfSx0aGlzKSxjLmRvdWJsZVRhcFRocmVzaG9sZCkpOigkYj1udWxsLFNiLnRyaWdnZXIoInRhcCIsW2IudGFyZ2V0XSksYy50YXAmJihxPWMudGFwLmNhbGwoU2IsYixiLnRhcmdldCkpKSk6az09bz8oaj09PXh8fGo9PT13KSYmKGNsZWFyVGltZW91dChfYiksJGI9bnVsbCxTYi50cmlnZ2VyKCJkb3VibGV0YXAiLFtiLnRhcmdldF0pLGMuZG91YmxlVGFwJiYocT1jLmRvdWJsZVRhcC5jYWxsKFNiLGIsYi50YXJnZXQpKSk6az09cCYmKGo9PT14fHxqPT09dykmJihjbGVhclRpbWVvdXQoX2IpLCRiPW51bGwsU2IudHJpZ2dlcigibG9uZ3RhcCIsW2IudGFyZ2V0XSksYy5sb25nVGFwJiYocT1jLmxvbmdUYXAuY2FsbChTYixiLGIudGFyZ2V0KSkpLHF9ZnVuY3Rpb24gTCgpe3ZhciBhPSEwO3JldHVybiBudWxsIT09Yy50aHJlc2hvbGQmJihhPUpiPj1jLnRocmVzaG9sZCksYX1mdW5jdGlvbiBNKCl7dmFyIGE9ITE7cmV0dXJuIG51bGwhPT1jLmNhbmNlbFRocmVzaG9sZCYmbnVsbCE9PUtiJiYoYT1xYihLYiktSmI+PWMuY2FuY2VsVGhyZXNob2xkKSxhfWZ1bmN0aW9uIE4oKXtyZXR1cm4gbnVsbCE9PWMucGluY2hUaHJlc2hvbGQ/UGI+PWMucGluY2hUaHJlc2hvbGQ6ITB9ZnVuY3Rpb24gTygpe3ZhciBhO3JldHVybiBhPWMubWF4VGltZVRocmVzaG9sZCYmTGI+PWMubWF4VGltZVRocmVzaG9sZD8hMTohMH1mdW5jdGlvbiBQKGEsYil7aWYoYy5hbGxvd1BhZ2VTY3JvbGw9PT1qfHxSKCkpYS5wcmV2ZW50RGVmYXVsdCgpO2Vsc2V7dmFyIGg9Yy5hbGxvd1BhZ2VTY3JvbGw9PT1rO3N3aXRjaChiKXtjYXNlIGQ6KGMuc3dpcGVMZWZ0JiZofHwhaCYmYy5hbGxvd1BhZ2VTY3JvbGwhPXEpJiZhLnByZXZlbnREZWZhdWx0KCk7YnJlYWs7Y2FzZSBlOihjLnN3aXBlUmlnaHQmJmh8fCFoJiZjLmFsbG93UGFnZVNjcm9sbCE9cSkmJmEucHJldmVudERlZmF1bHQoKTticmVhaztjYXNlIGY6KGMuc3dpcGVVcCYmaHx8IWgmJmMuYWxsb3dQYWdlU2Nyb2xsIT1yKSYmYS5wcmV2ZW50RGVmYXVsdCgpO2JyZWFrO2Nhc2UgZzooYy5zd2lwZURvd24mJmh8fCFoJiZjLmFsbG93UGFnZVNjcm9sbCE9cikmJmEucHJldmVudERlZmF1bHQoKX19fWZ1bmN0aW9uIFEoKXt2YXIgYT1XKCksYj1YKCksYz1OKCk7cmV0dXJuIGEmJmImJmN9ZnVuY3Rpb24gUigpe3JldHVybiEhKGMucGluY2hTdGF0dXN8fGMucGluY2hJbnx8Yy5waW5jaE91dCl9ZnVuY3Rpb24gUygpe3JldHVybiEoIVEoKXx8IVIoKSl9ZnVuY3Rpb24gVCgpe3ZhciBhPU8oKSxiPUwoKSxjPVcoKSxkPVgoKSxlPU0oKSxmPSFlJiZkJiZjJiZiJiZhO3JldHVybiBmfWZ1bmN0aW9uIFUoKXtyZXR1cm4hIShjLnN3aXBlfHxjLnN3aXBlU3RhdHVzfHxjLnN3aXBlTGVmdHx8Yy5zd2lwZVJpZ2h0fHxjLnN3aXBlVXB8fGMuc3dpcGVEb3duKX1mdW5jdGlvbiBWKCl7cmV0dXJuISghVCgpfHwhVSgpKX1mdW5jdGlvbiBXKCl7cmV0dXJuIFViPT09Yy5maW5nZXJzfHxjLmZpbmdlcnM9PT1zfHwheX1mdW5jdGlvbiBYKCl7cmV0dXJuIDAhPT1WYlswXS5lbmQueH1mdW5jdGlvbiBZKCl7cmV0dXJuISFjLnRhcH1mdW5jdGlvbiBaKCl7cmV0dXJuISFjLmRvdWJsZVRhcH1mdW5jdGlvbiAkKCl7cmV0dXJuISFjLmxvbmdUYXB9ZnVuY3Rpb24gXygpe2lmKG51bGw9PSRiKXJldHVybiExO3ZhciBhPUFiKCk7cmV0dXJuIFooKSYmYS0kYjw9Yy5kb3VibGVUYXBUaHJlc2hvbGR9ZnVuY3Rpb24gYWIoKXtyZXR1cm4gXygpfWZ1bmN0aW9uIGJiKCl7cmV0dXJuKDE9PT1VYnx8IXkpJiYoaXNOYU4oSmIpfHxKYjxjLnRocmVzaG9sZCl9ZnVuY3Rpb24gY2IoKXtyZXR1cm4gTGI+Yy5sb25nVGFwVGhyZXNob2xkJiZ0PkpifWZ1bmN0aW9uIGRiKCl7cmV0dXJuISghYmIoKXx8IVkoKSl9ZnVuY3Rpb24gZWIoKXtyZXR1cm4hKCFfKCl8fCFaKCkpfWZ1bmN0aW9uIGZiKCl7cmV0dXJuISghY2IoKXx8ISQoKSl9ZnVuY3Rpb24gZ2IoKXtZYj1BYigpLFpiPWV2ZW50LnRvdWNoZXMubGVuZ3RoKzF9ZnVuY3Rpb24gaGIoKXtZYj0wLFpiPTB9ZnVuY3Rpb24gaWIoKXt2YXIgYT0hMTtpZihZYil7dmFyIGI9QWIoKS1ZYjtiPD1jLmZpbmdlclJlbGVhc2VUaHJlc2hvbGQmJihhPSEwKX1yZXR1cm4gYX1mdW5jdGlvbiBqYigpe3JldHVybiEoU2IuZGF0YShCKyJfaW50b3VjaCIpIT09ITApfWZ1bmN0aW9uIGtiKGEpe2E9PT0hMD8oU2IuYmluZChGYixEKSxTYi5iaW5kKEdiLEUpLEhiJiZTYi5iaW5kKEhiLEcpKTooU2IudW5iaW5kKEZiLEQsITEpLFNiLnVuYmluZChHYixFLCExKSxIYiYmU2IudW5iaW5kKEhiLEcsITEpKSxTYi5kYXRhKEIrIl9pbnRvdWNoIixhPT09ITApfWZ1bmN0aW9uIGxiKGEsYil7dmFyIGM9dm9pZCAwIT09Yi5pZGVudGlmaWVyP2IuaWRlbnRpZmllcjowO3JldHVybiBWYlthXS5pZGVudGlmaWVyPWMsVmJbYV0uc3RhcnQueD1WYlthXS5lbmQueD1iLnBhZ2VYfHxiLmNsaWVudFgsVmJbYV0uc3RhcnQueT1WYlthXS5lbmQueT1iLnBhZ2VZfHxiLmNsaWVudFksVmJbYV19ZnVuY3Rpb24gbWIoYSl7dmFyIGI9dm9pZCAwIT09YS5pZGVudGlmaWVyP2EuaWRlbnRpZmllcjowLGM9bmIoYik7cmV0dXJuIGMuZW5kLng9YS5wYWdlWHx8YS5jbGllbnRYLGMuZW5kLnk9YS5wYWdlWXx8YS5jbGllbnRZLGN9ZnVuY3Rpb24gbmIoYSl7Zm9yKHZhciBiPTA7YjxWYi5sZW5ndGg7YisrKWlmKFZiW2JdLmlkZW50aWZpZXI9PWEpcmV0dXJuIFZiW2JdfWZ1bmN0aW9uIG9iKCl7Zm9yKHZhciBhPVtdLGI9MDs1Pj1iO2IrKylhLnB1c2goe3N0YXJ0Ont4OjAseTowfSxlbmQ6e3g6MCx5OjB9LGlkZW50aWZpZXI6MH0pO3JldHVybiBhfWZ1bmN0aW9uIHBiKGEsYil7Yj1NYXRoLm1heChiLHFiKGEpKSxSYlthXS5kaXN0YW5jZT1ifWZ1bmN0aW9uIHFiKGEpe3JldHVybiBSYlthXT9SYlthXS5kaXN0YW5jZTp2b2lkIDB9ZnVuY3Rpb24gcmIoKXt2YXIgYT17fTtyZXR1cm4gYVtkXT1zYihkKSxhW2VdPXNiKGUpLGFbZl09c2IoZiksYVtnXT1zYihnKSxhfWZ1bmN0aW9uIHNiKGEpe3JldHVybntkaXJlY3Rpb246YSxkaXN0YW5jZTowfX1mdW5jdGlvbiB0Yigpe3JldHVybiBYYi1XYn1mdW5jdGlvbiB1YihhLGIpe3ZhciBjPU1hdGguYWJzKGEueC1iLngpLGQ9TWF0aC5hYnMoYS55LWIueSk7cmV0dXJuIE1hdGgucm91bmQoTWF0aC5zcXJ0KGMqYytkKmQpKX1mdW5jdGlvbiB2YihhLGIpe3ZhciBjPWIvYSoxO3JldHVybiBjLnRvRml4ZWQoMil9ZnVuY3Rpb24gd2IoKXtyZXR1cm4gMT5PYj9pOmh9ZnVuY3Rpb24geGIoYSxiKXtyZXR1cm4gTWF0aC5yb3VuZChNYXRoLnNxcnQoTWF0aC5wb3coYi54LWEueCwyKStNYXRoLnBvdyhiLnktYS55LDIpKSl9ZnVuY3Rpb24geWIoYSxiKXt2YXIgYz1hLngtYi54LGQ9Yi55LWEueSxlPU1hdGguYXRhbjIoZCxjKSxmPU1hdGgucm91bmQoMTgwKmUvTWF0aC5QSSk7cmV0dXJuIDA+ZiYmKGY9MzYwLU1hdGguYWJzKGYpKSxmfWZ1bmN0aW9uIHpiKGEsYil7dmFyIGM9eWIoYSxiKTtyZXR1cm4gNDU+PWMmJmM+PTA/ZDozNjA+PWMmJmM+PTMxNT9kOmM+PTEzNSYmMjI1Pj1jP2U6Yz40NSYmMTM1PmM/ZzpmfWZ1bmN0aW9uIEFiKCl7dmFyIGE9bmV3IERhdGU7cmV0dXJuIGEuZ2V0VGltZSgpfWZ1bmN0aW9uIEJiKGIpe2I9YShiKTt2YXIgYz1iLm9mZnNldCgpLGQ9e2xlZnQ6Yy5sZWZ0LHJpZ2h0OmMubGVmdCtiLm91dGVyV2lkdGgoKSx0b3A6Yy50b3AsYm90dG9tOmMudG9wK2Iub3V0ZXJIZWlnaHQoKX07cmV0dXJuIGR9ZnVuY3Rpb24gQ2IoYSxiKXtyZXR1cm4gYS54PmIubGVmdCYmYS54PGIucmlnaHQmJmEueT5iLnRvcCYmYS55PGIuYm90dG9tfXZhciBEYj15fHxBfHwhYy5mYWxsYmFja1RvTW91c2VFdmVudHMsRWI9RGI/QT96PyJNU1BvaW50ZXJEb3duIjoicG9pbnRlcmRvd24iOiJ0b3VjaHN0YXJ0IjoibW91c2Vkb3duIixGYj1EYj9BP3o/Ik1TUG9pbnRlck1vdmUiOiJwb2ludGVybW92ZSI6InRvdWNobW92ZSI6Im1vdXNlbW92ZSIsR2I9RGI/QT96PyJNU1BvaW50ZXJVcCI6InBvaW50ZXJ1cCI6InRvdWNoZW5kIjoibW91c2V1cCIsSGI9RGI/bnVsbDoibW91c2VsZWF2ZSIsSWI9QT96PyJNU1BvaW50ZXJDYW5jZWwiOiJwb2ludGVyY2FuY2VsIjoidG91Y2hjYW5jZWwiLEpiPTAsS2I9bnVsbCxMYj0wLE1iPTAsTmI9MCxPYj0xLFBiPTAsUWI9MCxSYj1udWxsLFNiPWEoYiksVGI9InN0YXJ0IixVYj0wLFZiPW51bGwsV2I9MCxYYj0wLFliPTAsWmI9MCwkYj0wLF9iPW51bGwsYWM9bnVsbDt0cnl7U2IuYmluZChFYixDKSxTYi5iaW5kKEliLEYpfWNhdGNoKGJjKXthLmVycm9yKCJldmVudHMgbm90IHN1cHBvcnRlZCAiK0ViKyIsIitJYisiIG9uIGpRdWVyeS5zd2lwZSIpfXRoaXMuZW5hYmxlPWZ1bmN0aW9uKCl7cmV0dXJuIFNiLmJpbmQoRWIsQyksU2IuYmluZChJYixGKSxTYn0sdGhpcy5kaXNhYmxlPWZ1bmN0aW9uKCl7cmV0dXJuIEgoKSxTYn0sdGhpcy5kZXN0cm95PWZ1bmN0aW9uKCl7cmV0dXJuIEgoKSxTYi5kYXRhKEIsbnVsbCksU2J9LHRoaXMub3B0aW9uPWZ1bmN0aW9uKGIsZCl7aWYodm9pZCAwIT09Y1tiXSl7aWYodm9pZCAwPT09ZClyZXR1cm4gY1tiXTtjW2JdPWR9ZWxzZSBhLmVycm9yKCJPcHRpb24gIitiKyIgZG9lcyBub3QgZXhpc3Qgb24galF1ZXJ5LnN3aXBlLm9wdGlvbnMiKTtyZXR1cm4gbnVsbH19dmFyIGQ9ImxlZnQiLGU9InJpZ2h0IixmPSJ1cCIsZz0iZG93biIsaD0iaW4iLGk9Im91dCIsaj0ibm9uZSIsaz0iYXV0byIsbD0ic3dpcGUiLG09InBpbmNoIixuPSJ0YXAiLG89ImRvdWJsZXRhcCIscD0ibG9uZ3RhcCIscT0iaG9yaXpvbnRhbCIscj0idmVydGljYWwiLHM9ImFsbCIsdD0xMCx1PSJzdGFydCIsdj0ibW92ZSIsdz0iZW5kIix4PSJjYW5jZWwiLHk9Im9udG91Y2hzdGFydCJpbiB3aW5kb3csej13aW5kb3cubmF2aWdhdG9yLm1zUG9pbnRlckVuYWJsZWQmJiF3aW5kb3cubmF2aWdhdG9yLnBvaW50ZXJFbmFibGVkLEE9d2luZG93Lm5hdmlnYXRvci5wb2ludGVyRW5hYmxlZHx8d2luZG93Lm5hdmlnYXRvci5tc1BvaW50ZXJFbmFibGVkLEI9IlRvdWNoU3dpcGUiLEM9e2ZpbmdlcnM6MSx0aHJlc2hvbGQ6NzUsY2FuY2VsVGhyZXNob2xkOm51bGwscGluY2hUaHJlc2hvbGQ6MjAsbWF4VGltZVRocmVzaG9sZDpudWxsLGZpbmdlclJlbGVhc2VUaHJlc2hvbGQ6MjUwLGxvbmdUYXBUaHJlc2hvbGQ6NTAwLGRvdWJsZVRhcFRocmVzaG9sZDoyMDAsc3dpcGU6bnVsbCxzd2lwZUxlZnQ6bnVsbCxzd2lwZVJpZ2h0Om51bGwsc3dpcGVVcDpudWxsLHN3aXBlRG93bjpudWxsLHN3aXBlU3RhdHVzOm51bGwscGluY2hJbjpudWxsLHBpbmNoT3V0Om51bGwscGluY2hTdGF0dXM6bnVsbCxjbGljazpudWxsLHRhcDpudWxsLGRvdWJsZVRhcDpudWxsLGxvbmdUYXA6bnVsbCxob2xkOm51bGwsdHJpZ2dlck9uVG91Y2hFbmQ6ITAsdHJpZ2dlck9uVG91Y2hMZWF2ZTohMSxhbGxvd1BhZ2VTY3JvbGw6ImF1dG8iLGZhbGxiYWNrVG9Nb3VzZUV2ZW50czohMCxleGNsdWRlZEVsZW1lbnRzOiJsYWJlbCwgYnV0dG9uLCBpbnB1dCwgc2VsZWN0LCB0ZXh0YXJlYSwgYSwgLm5vU3dpcGUifTthLmZuLnN3aXBlPWZ1bmN0aW9uKGMpe3ZhciBkPWEodGhpcyksZT1kLmRhdGEoQik7aWYoZSYmInN0cmluZyI9PXR5cGVvZiBjKXtpZihlW2NdKXJldHVybiBlW2NdLmFwcGx5KHRoaXMsQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpKTthLmVycm9yKCJNZXRob2QgIitjKyIgZG9lcyBub3QgZXhpc3Qgb24galF1ZXJ5LnN3aXBlIil9ZWxzZSBpZighKGV8fCJvYmplY3QiIT10eXBlb2YgYyYmYykpcmV0dXJuIGIuYXBwbHkodGhpcyxhcmd1bWVudHMpO3JldHVybiBkfSxhLmZuLnN3aXBlLmRlZmF1bHRzPUMsYS5mbi5zd2lwZS5waGFzZXM9e1BIQVNFX1NUQVJUOnUsUEhBU0VfTU9WRTp2LFBIQVNFX0VORDp3LFBIQVNFX0NBTkNFTDp4fSxhLmZuLnN3aXBlLmRpcmVjdGlvbnM9e0xFRlQ6ZCxSSUdIVDplLFVQOmYsRE9XTjpnLElOOmgsT1VUOml9LGEuZm4uc3dpcGUucGFnZVNjcm9sbD17Tk9ORTpqLEhPUklaT05UQUw6cSxWRVJUSUNBTDpyLEFVVE86a30sYS5mbi5zd2lwZS5maW5nZXJzPXtPTkU6MSxUV086MixUSFJFRTozLEFMTDpzfX0pLGMoImdhbGxlcnkvdmlld3Mvc2VsZWN0aW9uL3NlbGVjdC5idXR0b24iLFsiYmFja2JvbmUiLCJqcXVlcnkiLCJqcXVlcnktdG91Y2hzd2lwZSJdLGZ1bmN0aW9uKGEpe3ZhciBiPWEuVmlldy5leHRlbmQoe2luaXRpYWxpemU6ZnVuY3Rpb24oKXt0aGlzLm1vZGVsJiZ0aGlzLmVsJiYodGhpcy5saXN0ZW5Ubyh0aGlzLm1vZGVsLCJjaGFuZ2U6c2VsZWN0ZWQiLHRoaXMudXBkYXRlU2VsZWN0ZWQpLHRoaXMudXBkYXRlU2VsZWN0ZWQodGhpcy5tb2RlbCx0aGlzLm1vZGVsLmdldCgic2VsZWN0ZWQiKSksdGhpcy4kZWwuc3dpcGUoe3RhcDpfLmJpbmQodGhpcy50b2dnbGVTZWxlY3RlZCx0aGlzKX0pKX0scmVtb3ZlOmZ1bmN0aW9uKCl7dGhpcy4kZWwuc3dpcGUoImRlc3Ryb3kiKSxhLlZpZXcucHJvdG90eXBlLnJlbW92ZS5jYWxsKHRoaXMpfSx0b2dnbGVTZWxlY3RlZDpmdW5jdGlvbihhKXthLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpLGEucHJldmVudERlZmF1bHQoKSx0aGlzLm1vZGVsLnNldCgic2VsZWN0ZWQiLCF0aGlzLm1vZGVsLmdldCgic2VsZWN0ZWQiKSl9LHVwZGF0ZVNlbGVjdGVkOmZ1bmN0aW9uKGEsYil7Yj90aGlzLiRlbC5hZGRDbGFzcygic2VsZWN0ZWQiKTp0aGlzLiRlbC5yZW1vdmVDbGFzcygic2VsZWN0ZWQiKX19KTtyZXR1cm4gYn0pLGMoImdhbGxlcnkvdmlld3MvdGh1bWIudmlldyIsWyJqcXVlcnkiLCJqcXVlcnktdG91Y2hzd2lwZSIsImJhY2tib25lIiwiZ2FsbGVyeS92aWV3cy9zZWxlY3Rpb24vc2VsZWN0LmJ1dHRvbiJdLGZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPWMuVmlldy5leHRlbmQoe2luaXRpYWxpemU6ZnVuY3Rpb24oKXt0aGlzLm1vZGVsLnNldFRodW1iVmlldyh0aGlzKSx0aGlzLmdhbGxlcnk9dGhpcy5vcHRpb25zLmdhbGxlcnksdGhpcy50ZW1wbGF0ZT10aGlzLm9wdGlvbnMudGVtcGxhdGUsdGhpcy5kb3VibGVUYXA9dGhpcy5nYWxsZXJ5LmdldCgib3B0cyIpLmRvdWJsZV90YXBfdGh1bWJ9LHJlbW92ZTpmdW5jdGlvbigpe3RoaXMuJGVsLnN3aXBlKCJkZXN0cm95IiksYy5WaWV3LnByb3RvdHlwZS5yZW1vdmUuY2FsbCh0aGlzKX0sY2xpY2tPclRhcHBlZDpmdW5jdGlvbihhKXsidG91Y2hlbmQiPT1hLnR5cGUmJnRoaXMuZG91YmxlVGFwPyh0aGlzLiRlbC5hZGRDbGFzcygiZG91YmxlLXRhcCIpLG51bGwhPT10aGlzLiRlbFswXS5xdWVyeVNlbGVjdG9yKCI6aG92ZXIiKSYmdGhpcy5vcGVuSW5TbGlkZXIoKSk6dGhpcy5vcGVuSW5TbGlkZXIoKX0sb3BlbkluU2xpZGVyOmZ1bmN0aW9uKCl7dGhpcy5nYWxsZXJ5LnRyaWdnZXIoInRodW1iOmNsaWNrZWQiLHRoaXMubW9kZWwpfSxyZW5kZXI6ZnVuY3Rpb24oKXt2YXIgYj10aGlzLnRlbXBsYXRlKHtpbWc6dGhpcy5tb2RlbH0pLnRyaW0oKTtyZXR1cm4gdGhpcy5zZXRFbGVtZW50KGEucGFyc2VIVE1MKGIpKSx0aGlzLiRlbC5zd2lwZSh7dGFwOl8uYmluZCh0aGlzLmNsaWNrT3JUYXBwZWQsdGhpcyl9KSx0aGlzLnNlbGVjdEJ1dHRvbnx8KHRoaXMuc2VsZWN0QnV0dG9uPW5ldyBkKHttb2RlbDp0aGlzLm1vZGVsLGVsOnRoaXMuJCgiLnNlbGVjdG9yIil9KSksdGhpc319KTtyZXR1cm4gZX0pLGMoImdhbGxlcnkvdmlld3MvdGh1bWIuY29udGFpbmVyIixbImpxdWVyeSIsInZlbmRvci9qcXVlcnkudGhyb3R0bGUtZGVib3VuY2UiLCJ1bmRlcnNjb3JlIiwiYmFja2JvbmUiLCJnYWxsZXJ5L3ZpZXdzL3RodW1iLnZpZXciLCJnYWxsZXJ5L3V0aWxzL3Jlc3BvbnNpdmUuYWRhcHRlciJdLGZ1bmN0aW9uKGEsYixjLGQsZSl7dmFyIGY9ZC5WaWV3LmV4dGVuZCh7ZWw6Ii5jb250YWluZXIucGhvdG9zIixkZWZhdWx0czp7aXRlbVNlbGVjdG9yOiIucGhvdG8ifSxpbml0aWFsaXplOmZ1bmN0aW9uKCl7dGhpcy5vcHRpb25zPWMuZXh0ZW5kKHt9LHRoaXMuZGVmYXVsdHMsdGhpcy5vcHRpb25zKSx0aGlzLiRlbC5hZGRDbGFzcygibG9hZGluZyIpLHRoaXMubGlzdGVuVG8odGhpcy5tb2RlbCwiY2hhbmdlIix0aGlzLmdhbGxlcnlGZXRjaGVkKX0sZ2FsbGVyeUZldGNoZWQ6ZnVuY3Rpb24oKXt0aGlzLiRlbC5hZGRDbGFzcygiZmV0Y2hlZCIpLHRoaXMuaW5pdEdhbGxlcnkoKSx0aGlzLmluaXRUaHVtYnMoKX0saW5pdEdhbGxlcnk6ZnVuY3Rpb24oKXt9LGluaXRUaHVtYnM6ZnVuY3Rpb24oKXt2YXIgYj10aGlzLm1vZGVsLmdldCgiaW1hZ2VzIik7dGhpcy4kKHRoaXMub3B0aW9ucy5pdGVtU2VsZWN0b3IpLmVhY2goZnVuY3Rpb24oKXt2YXIgYz1hKHRoaXMpLGQ9Yi5nZXQoYy5hdHRyKCJpZCIpKTtuZXcgZSh7bW9kZWw6ZCxlbDpjLGdhbGxlcnk6dGhpcy5tb2RlbH0pfSksdGhpcy4kZWwucmVtb3ZlQ2xhc3MoImxvYWRpbmciKSx0aGlzLiRlbC5maW5kKHRoaXMub3B0aW9ucy5pdGVtU2VsZWN0b3IpLmFkZENsYXNzKCJsb2FkZWQiKX0sc2Nyb2xsVG9UaHVtYjpmdW5jdGlvbihiKXt3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpe2lmKGIpe3ZhciBjPWIuZ2V0VGh1bWJWaWV3KCk7YyYmYSgiaHRtbCwgYm9keSIpLmFuaW1hdGUoe3Njcm9sbFRvcDpjLiRlbC5vZmZzZXQoKS50b3B9LDEwMCl9fSwyMDApfX0pO3JldHVybiBmfSksYygiZ2FsbGVyeS92aWV3cy90aHVtYi5jb250YWluZXIubWFzb25yeSIsWyJqcXVlcnkiLCJ1bmRlcnNjb3JlIiwiYmFja2JvbmUiLCJqcXVlcnktYnJpZGdldC9qcXVlcnkuYnJpZGdldCIsImZsdWlkLW1hc29ucnkiLCJnYWxsZXJ5L3ZpZXdzL3RodW1iLmNvbnRhaW5lciIsImdhbGxlcnkvdXRpbHMvcmVzcG9uc2l2ZS5hZGFwdGVyIl0sZnVuY3Rpb24oYSxiLGMsZCxlLGYsZyl7YS5icmlkZ2V0KCJmbHVpZE1hc29ucnkiLGUpO3ZhciBoPWYuZXh0ZW5kKHtpbml0aWFsaXplOmZ1bmN0aW9uKCl7Zi5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGluaXRHYWxsZXJ5OmZ1bmN0aW9uKCl7dGhpcy5pbml0TWFzb25yeSh0aGlzLm1vZGVsLmdldCgib3B0cyIpKX0saW5pdE1hc29ucnk6ZnVuY3Rpb24oYSl7dGhpcy4kZWwuZmx1aWRNYXNvbnJ5KHtpdGVtU2VsZWN0b3I6dGhpcy5vcHRpb25zLml0ZW1TZWxlY3RvcixtaW5Db2x1bW5XaWR0aDpnLmdldE9wdGlvbkJ5TWVkaWFUeXBlKGEsIm1pbl9jb2xfd2lkdGgiKSxndXR0ZXI6Zy5nZXRPcHRpb25CeU1lZGlhVHlwZShhLCJndXR0ZXJfd2lkdGgiKSxpc0ZpdFdpZHRoOiExfSl9fSk7cmV0dXJuIGh9KSxmdW5jdGlvbihhLGQpeyJmdW5jdGlvbiI9PXR5cGVvZiBjJiZjLmFtZD9jKCJpbWFnZXNsb2FkZWQvaW1hZ2VzbG9hZGVkIixbImV2ZW50RW1pdHRlci9FdmVudEVtaXR0ZXIiLCJldmVudGllL2V2ZW50aWUiXSxmdW5jdGlvbihiLGMpe3JldHVybiBkKGEsYixjKX0pOiJvYmplY3QiPT10eXBlb2YgZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1kKGEsYigid29sZnk4Ny1ldmVudGVtaXR0ZXIiKSxiKCJldmVudGllIikpOmEuaW1hZ2VzTG9hZGVkPWQoYSxhLkV2ZW50RW1pdHRlcixhLmV2ZW50aWUpfSh3aW5kb3csZnVuY3Rpb24oYSxiLGMpe2Z1bmN0aW9uIGQoYSxiKXtmb3IodmFyIGMgaW4gYilhW2NdPWJbY107cmV0dXJuIGF9ZnVuY3Rpb24gZShhKXtyZXR1cm4iW29iamVjdCBBcnJheV0iPT09bS5jYWxsKGEpfWZ1bmN0aW9uIGYoYSl7dmFyIGI9W107aWYoZShhKSliPWE7ZWxzZSBpZigibnVtYmVyIj09dHlwZW9mIGEubGVuZ3RoKWZvcih2YXIgYz0wLGQ9YS5sZW5ndGg7ZD5jO2MrKyliLnB1c2goYVtjXSk7ZWxzZSBiLnB1c2goYSk7cmV0dXJuIGJ9ZnVuY3Rpb24gZyhhLGIsYyl7aWYoISh0aGlzIGluc3RhbmNlb2YgZykpcmV0dXJuIG5ldyBnKGEsYik7InN0cmluZyI9PXR5cGVvZiBhJiYoYT1kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGEpKSx0aGlzLmVsZW1lbnRzPWYoYSksdGhpcy5vcHRpb25zPWQoe30sdGhpcy5vcHRpb25zKSwiZnVuY3Rpb24iPT10eXBlb2YgYj9jPWI6ZCh0aGlzLm9wdGlvbnMsYiksYyYmdGhpcy5vbigiYWx3YXlzIixjKSx0aGlzLmdldEltYWdlcygpLGomJih0aGlzLmpxRGVmZXJyZWQ9bmV3IGouRGVmZXJyZWQpO3ZhciBlPXRoaXM7c2V0VGltZW91dChmdW5jdGlvbigpe2UuY2hlY2soKX0pfWZ1bmN0aW9uIGgoYSl7dGhpcy5pbWc9YX1mdW5jdGlvbiBpKGEpe3RoaXMuc3JjPWEsblthXT10aGlzfXZhciBqPWEualF1ZXJ5LGs9YS5jb25zb2xlLGw9InVuZGVmaW5lZCIhPXR5cGVvZiBrLG09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztnLnByb3RvdHlwZT1uZXcgYixnLnByb3RvdHlwZS5vcHRpb25zPXt9LGcucHJvdG90eXBlLmdldEltYWdlcz1mdW5jdGlvbigpe3RoaXMuaW1hZ2VzPVtdO2Zvcih2YXIgYT0wLGI9dGhpcy5lbGVtZW50cy5sZW5ndGg7Yj5hO2ErKyl7dmFyIGM9dGhpcy5lbGVtZW50c1thXTsiSU1HIj09PWMubm9kZU5hbWUmJnRoaXMuYWRkSW1hZ2UoYyk7dmFyIGQ9Yy5ub2RlVHlwZTtpZihkJiYoMT09PWR8fDk9PT1kfHwxMT09PWQpKWZvcih2YXIgZT1jLnF1ZXJ5U2VsZWN0b3JBbGwoImltZyIpLGY9MCxnPWUubGVuZ3RoO2c+ZjtmKyspe3ZhciBoPWVbZl07dGhpcy5hZGRJbWFnZShoKX19fSxnLnByb3RvdHlwZS5hZGRJbWFnZT1mdW5jdGlvbihhKXt2YXIgYj1uZXcgaChhKTt0aGlzLmltYWdlcy5wdXNoKGIpfSxnLnByb3RvdHlwZS5jaGVjaz1mdW5jdGlvbigpe2Z1bmN0aW9uIGEoYSxlKXtyZXR1cm4gYi5vcHRpb25zLmRlYnVnJiZsJiZrLmxvZygiY29uZmlybSIsYSxlKSxiLnByb2dyZXNzKGEpLGMrKyxjPT09ZCYmYi5jb21wbGV0ZSgpLCEwfXZhciBiPXRoaXMsYz0wLGQ9dGhpcy5pbWFnZXMubGVuZ3RoO2lmKHRoaXMuaGFzQW55QnJva2VuPSExLCFkKXJldHVybiB2b2lkIHRoaXMuY29tcGxldGUoKTtmb3IodmFyIGU9MDtkPmU7ZSsrKXt2YXIgZj10aGlzLmltYWdlc1tlXTtmLm9uKCJjb25maXJtIixhKSxmLmNoZWNrKCl9fSxnLnByb3RvdHlwZS5wcm9ncmVzcz1mdW5jdGlvbihhKXt0aGlzLmhhc0FueUJyb2tlbj10aGlzLmhhc0FueUJyb2tlbnx8IWEuaXNMb2FkZWQ7dmFyIGI9dGhpcztzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Yi5lbWl0KCJwcm9ncmVzcyIsYixhKSxiLmpxRGVmZXJyZWQmJmIuanFEZWZlcnJlZC5ub3RpZnkmJmIuanFEZWZlcnJlZC5ub3RpZnkoYixhKX0pfSxnLnByb3RvdHlwZS5jb21wbGV0ZT1mdW5jdGlvbigpe3ZhciBhPXRoaXMuaGFzQW55QnJva2VuPyJmYWlsIjoiZG9uZSI7dGhpcy5pc0NvbXBsZXRlPSEwO3ZhciBiPXRoaXM7c2V0VGltZW91dChmdW5jdGlvbigpe2lmKGIuZW1pdChhLGIpLGIuZW1pdCgiYWx3YXlzIixiKSxiLmpxRGVmZXJyZWQpe3ZhciBjPWIuaGFzQW55QnJva2VuPyJyZWplY3QiOiJyZXNvbHZlIjtiLmpxRGVmZXJyZWRbY10oYil9fSl9LGomJihqLmZuLmltYWdlc0xvYWRlZD1mdW5jdGlvbihhLGIpe3ZhciBjPW5ldyBnKHRoaXMsYSxiKTtyZXR1cm4gYy5qcURlZmVycmVkLnByb21pc2Uoaih0aGlzKSl9KSxoLnByb3RvdHlwZT1uZXcgYixoLnByb3RvdHlwZS5jaGVjaz1mdW5jdGlvbigpe3ZhciBhPW5bdGhpcy5pbWcuc3JjXXx8bmV3IGkodGhpcy5pbWcuc3JjKTtpZihhLmlzQ29uZmlybWVkKXJldHVybiB2b2lkIHRoaXMuY29uZmlybShhLmlzTG9hZGVkLCJjYWNoZWQgd2FzIGNvbmZpcm1lZCIpO2lmKHRoaXMuaW1nLmNvbXBsZXRlJiZ2b2lkIDAhPT10aGlzLmltZy5uYXR1cmFsV2lkdGgpcmV0dXJuIHZvaWQgdGhpcy5jb25maXJtKDAhPT10aGlzLmltZy5uYXR1cmFsV2lkdGgsIm5hdHVyYWxXaWR0aCIpO3ZhciBiPXRoaXM7YS5vbigiY29uZmlybSIsZnVuY3Rpb24oYSxjKXtyZXR1cm4gYi5jb25maXJtKGEuaXNMb2FkZWQsYyksITB9KSxhLmNoZWNrKCl9LGgucHJvdG90eXBlLmNvbmZpcm09ZnVuY3Rpb24oYSxiKXt0aGlzLmlzTG9hZGVkPWEsdGhpcy5lbWl0KCJjb25maXJtIix0aGlzLGIpfTt2YXIgbj17fTtyZXR1cm4gaS5wcm90b3R5cGU9bmV3IGIsaS5wcm90b3R5cGUuY2hlY2s9ZnVuY3Rpb24oKXtpZighdGhpcy5pc0NoZWNrZWQpe3ZhciBhPW5ldyBJbWFnZTtjLmJpbmQoYSwibG9hZCIsdGhpcyksYy5iaW5kKGEsImVycm9yIix0aGlzKSxhLnNyYz10aGlzLnNyYyx0aGlzLmlzQ2hlY2tlZD0hMH19LGkucHJvdG90eXBlLmhhbmRsZUV2ZW50PWZ1bmN0aW9uKGEpe3ZhciBiPSJvbiIrYS50eXBlO3RoaXNbYl0mJnRoaXNbYl0oYSl9LGkucHJvdG90eXBlLm9ubG9hZD1mdW5jdGlvbihhKXt0aGlzLmNvbmZpcm0oITAsIm9ubG9hZCIpLHRoaXMudW5iaW5kUHJveHlFdmVudHMoYSl9LGkucHJvdG90eXBlLm9uZXJyb3I9ZnVuY3Rpb24oYSl7dGhpcy5jb25maXJtKCExLCJvbmVycm9yIiksdGhpcy51bmJpbmRQcm94eUV2ZW50cyhhKX0saS5wcm90b3R5cGUuY29uZmlybT1mdW5jdGlvbihhLGIpe3RoaXMuaXNDb25maXJtZWQ9ITAsdGhpcy5pc0xvYWRlZD1hLHRoaXMuZW1pdCgiY29uZmlybSIsdGhpcyxiKX0saS5wcm90b3R5cGUudW5iaW5kUHJveHlFdmVudHM9ZnVuY3Rpb24oYSl7Yy51bmJpbmQoYS50YXJnZXQsImxvYWQiLHRoaXMpLGMudW5iaW5kKGEudGFyZ2V0LCJlcnJvciIsdGhpcyl9LGd9KSxjKCJsaWIvanF1ZXJ5LmludmlldyIsWyJqcXVlcnkiLCJ2ZW5kb3IvanF1ZXJ5LnRocm90dGxlLWRlYm91bmNlIl0sZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYigpe3ZhciBiLGMsZD17aGVpZ2h0OmwuaW5uZXJIZWlnaHQsd2lkdGg6bC5pbm5lcldpZHRofTtyZXR1cm4gZC5oZWlnaHR8fChiPWsuY29tcGF0TW9kZSwoYnx8IWEuc3VwcG9ydC5ib3hNb2RlbCkmJihjPSJDU1MxQ29tcGF0Ij09PWI/bTprLmJvZHksZD17aGVpZ2h0OmMuY2xpZW50SGVpZ2h0LHdpZHRoOmMuY2xpZW50V2lkdGh9KSksZH1mdW5jdGlvbiBjKCl7cmV0dXJue3RvcDpsLnBhZ2VZT2Zmc2V0fHxtLnNjcm9sbFRvcHx8ay5ib2R5LnNjcm9sbFRvcCxsZWZ0OmwucGFnZVhPZmZzZXR8fG0uc2Nyb2xsTGVmdHx8ay5ib2R5LnNjcm9sbExlZnR9fWZ1bmN0aW9uIGQoKXt2YXIgZCxlPWEoKSxmPTA7aWYoYS5lYWNoKGosZnVuY3Rpb24oYSxiKXt2YXIgYz1iLmRhdGEuc2VsZWN0b3IsZD1iLiRlbGVtZW50O2Q9Yz9kLmZpbmQoYyk6ZCxkLmRhdGEoImludmlld19vcHRzIixiLmRhdGEuZGF0YSksZT1lLmFkZChkKX0pLGQ9ZS5sZW5ndGgsaSYmKGNvbnNvbGUubG9nKCJpbnZpZXdPYmplY3RzOiAiKSxjb25zb2xlLmxvZyhqKSxjb25zb2xlLmxvZygiZWxlbWVudHNMZW5ndGg6ICIrZCkpLGQpZm9yKGc9Z3x8YigpLGg9aHx8YygpLGkmJihjb25zb2xlLmxvZygidmlld3BvcnRTaXplOiAiKSxjb25zb2xlLmxvZyhnKSxjb25zb2xlLmxvZygidmlld3BvcnRPZmZzZXQ6ICIpLGNvbnNvbGUubG9nKGgpKTtkPmY7ZisrKWlmKGEuY29udGFpbnMobSxlW2ZdKSl7dmFyIGssbCxuLG89YShlW2ZdKSxwPXtoZWlnaHQ6by5oZWlnaHQoKSx3aWR0aDpvLndpZHRoKCl9LHE9by5vZmZzZXQoKSxyPW8uZGF0YSgiaW52aWV3Iikscz1vLmRhdGEoImludmlld19vcHRzIikudGhyZXNob2xkO2lmKHMpe3RoaXMuZGVidWcmJmNvbnNvbGUubG9nKCJUaHJlc2hvbGQ6ICIrcyk7dmFyIHQ9cS50b3AsdT1xLmxlZnQ7cT17dG9wOnQtcyxsZWZ0OnUtc319aWYoaSYmKGNvbnNvbGUubG9nKCJlbGVtZW50U2l6ZTogIiksY29uc29sZS5sb2cocCksY29uc29sZS5sb2coImVsZW1lbnRPZmZzZXQ6ICIpLGNvbnNvbGUubG9nKHEpKSwhaHx8IWcpcmV0dXJuO3EudG9wPGgudG9wK2cuaGVpZ2h0JiZxLmxlZnQ8aC5sZWZ0K2cud2lkdGg/KGs9aC5sZWZ0PnEubGVmdD8icmlnaHQiOmgubGVmdCtnLndpZHRoPHEubGVmdCtwLndpZHRoPyJsZWZ0IjoiYm90aCIsbD1oLnRvcD5xLnRvcD8iYm90dG9tIjpoLnRvcCtnLmhlaWdodDxxLnRvcCtwLmhlaWdodD8idG9wIjoiYm90aCIsbj1rKyItIitsLG8uZGF0YSgiaW52aWV3IixuKS50cmlnZ2VyKCJpbnZpZXciLFshMCxrLGxdKSk6ciYmby5kYXRhKCJpbnZpZXciLCExKS50cmlnZ2VyKCJpbnZpZXciLFshMV0pfX1mdW5jdGlvbiBlKCl7YShsKS5iaW5kKCJzY3JvbGwuaW52aWV3IHJlc2l6ZS5pbnZpZXciLGEudGhyb3R0bGUoMjUwLGZ1bmN0aW9uKCl7aSYmY29uc29sZS5sb2coIkhlbGxvIGludmlldy5qcyBjaGVja3MgaXQgb3V0ISIpLGc9aD1udWxsLGQoKX0pKX1mdW5jdGlvbiBmKCl7YShsKS51bmJpbmQoInNjcm9sbC5pbnZpZXcgcmVzaXplLmludmlldyIpfXZhciBnLGgsaT0hMSxqPXt9LGs9ZG9jdW1lbnQsbD13aW5kb3csbT1rLmRvY3VtZW50RWxlbWVudCxuPWEuZXhwYW5kbzthLmV2ZW50LnNwZWNpYWwuaW52aWV3PXthZGQ6ZnVuY3Rpb24oYil7altiLmd1aWQrIi0iK3RoaXNbbl1dPXtkYXRhOmIsJGVsZW1lbnQ6YSh0aGlzKX0sZSgpfSxyZW1vdmU6ZnVuY3Rpb24oYSl7ZigpO3RyeXtkZWxldGUgalthLmd1aWQrIi0iK3RoaXNbbl1dfWNhdGNoKGIpe319fX0pLGMoImdhbGxlcnkvdmlld3MvdGh1bWIuY29udGFpbmVyLmR5bmFtaWMiLFsianF1ZXJ5IiwiaW1hZ2VzbG9hZGVkL2ltYWdlc2xvYWRlZCIsImxpYi9qcXVlcnkuaW52aWV3IiwidW5kZXJzY29yZSIsImJhY2tib25lIiwiZ2FsbGVyeS92aWV3cy90aHVtYi5jb250YWluZXIiLCJnYWxsZXJ5L3ZpZXdzL3RodW1iLnZpZXciLCJnYWxsZXJ5L3V0aWxzL3Jlc3BvbnNpdmUuYWRhcHRlciJdLGZ1bmN0aW9uKGEsYixjLGQsZSxmLGcsaCl7dmFyIGk9Zi5leHRlbmQoe2RlYnVnOiExLGluaXRpYWxpemU6ZnVuY3Rpb24oKXt0aGlzLnRodW1iVGVtcGxhdGU9dGhpcy5nZXRUaHVtYlRlbXBsYXRlKCksdGhpcy5sb2FkZWRJbWFnZXM9MCx0aGlzLnRocmVzaG9sZD0zMDAsZi5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyksdGhpcy5zdG9wcGVyPXRoaXMuJGVsLm5leHQoIi5zdG9wcGVyIiksdGhpcy5saXN0ZW5Ubyh0aGlzLm1vZGVsLCJzbGlkZXI6bmV3SW1hZ2UiLHRoaXMub25OZXdTbGlkZXJJbWFnZSksdGhpcy5saXN0ZW5Ubyh0aGlzLm1vZGVsLCJzbGlkZXI6Y2xvc2luZyIsdGhpcy5vblNsaWRlckNsb3NpbmcpfSxpbml0R2FsbGVyeTpmdW5jdGlvbigpe3ZhciBhPXRoaXMubW9kZWwuZ2V0KCJvcHRzIik7dGhpcy5maXJzdENodW5rPWguZ2V0T3B0aW9uQnlNZWRpYVR5cGUoYSwiZmlyc3RfY2h1bmsiKSx0aGlzLmNodW5rU2l6ZT1oLmdldE9wdGlvbkJ5TWVkaWFUeXBlKGEsImNodW5rX3NpemUiKSx0aGlzLmxpc3RlblRvKHRoaXMubW9kZWwuZ2V0KCJpbWFnZXMiKSwicmVzZXQiLHRoaXMuaW5pdFRodW1icyksdGhpcy5saXN0ZW5Ubyh0aGlzLm1vZGVsLmdldCgiaW1hZ2VzIiksInJlbW92ZSIsdGhpcy5yZW1vdmVUaHVtYil9LGluaXRUaHVtYnM6ZnVuY3Rpb24oKXt0aGlzLnJlbW92ZSgpLHRoaXMuX2xpc3RlbmluZ0Zvckludmlldz0hMSx0aGlzLmltYWdlc1RvTG9hZD10aGlzLm1vZGVsLmdldCgiaW1hZ2VzIikubW9kZWxzLnNsaWNlKCk7CnZhciBhPXRoaXMuX3JlbmRlckNodW5rKHRoaXMuZmlyc3RDaHVuayk7dGhpcy4kZWwucmVtb3ZlQ2xhc3MoImxvYWRpbmciKSx0aGlzLl9jaGVja0ltYWdlc0xvYWRlZChhKX0scmVtb3ZlOmZ1bmN0aW9uKCl7dGhpcy4kZWwuY2hpbGRyZW4oKS5yZW1vdmUoKX0scmVtb3ZlVGh1bWI6ZnVuY3Rpb24oYSl7YS5nZXRUaHVtYlZpZXcoKS5yZW1vdmUoKX0scmVuZGVyTmV4dENodW5rOmZ1bmN0aW9uKCl7dGhpcy50aW1lb3V0QmluZD13aW5kb3cuc2V0VGltZW91dChkLmJpbmQodGhpcy5fYmluZEludmlldyx0aGlzKSwyZTMpLHRoaXMuX3VuYmluZEludmlldygpO3ZhciBhPXRoaXMuX3JlbmRlckNodW5rKHRoaXMuY2h1bmtTaXplKTt0aGlzLl9jaGVja0ltYWdlc0xvYWRlZChhKX0sYXJyYW5nZVRodW1iczpmdW5jdGlvbigpe30sdGh1bWJBZGRlZDpmdW5jdGlvbigpe30sX2JpbmRJbnZpZXc6ZnVuY3Rpb24oKXt3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMudGltZW91dEJpbmQpLHRoaXMuaW1hZ2VzVG9Mb2FkLmxlbmd0aCYmIXRoaXMuX2xpc3RlbmluZ0Zvckludmlldz8odGhpcy5zdG9wcGVyLnNob3coKSx0aGlzLnN0b3BwZXIub24oImludmlldyIse3RocmVzaG9sZDp0aGlzLnRocmVzaG9sZH0sZC5iaW5kKHRoaXMuX29uU3RvcHBlckFwcGVhcmVkLHRoaXMpKSx0aGlzLl9saXN0ZW5pbmdGb3JJbnZpZXc9ITAsYSh3aW5kb3cpLnRyaWdnZXIoInNjcm9sbCIpKTp0aGlzLnN0b3BwZXIuaGlkZSgpfSxfdW5iaW5kSW52aWV3OmZ1bmN0aW9uKCl7dGhpcy5zdG9wcGVyLm9mZigiaW52aWV3IiksdGhpcy5fbGlzdGVuaW5nRm9ySW52aWV3PSExfSxfb25TdG9wcGVyQXBwZWFyZWQ6ZnVuY3Rpb24oYSxiKXtiPyh0aGlzLmRlYnVnJiZjb25zb2xlLmxvZygiU1RvUFBlciBnZXNpY2h0ZXQhIiksdGhpcy5yZW5kZXJOZXh0Q2h1bmsoKSk6dGhpcy5kZWJ1ZyYmY29uc29sZS5sb2coIlNUb3BwZXIgb3V0IG9mIHNpZ2h0ISIpfSxfcmVuZGVyQ2h1bms6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiLGM9W10sZD0wO2E+ZCYmKGI9dGhpcy5pbWFnZXNUb0xvYWQuc2hpZnQoKSxiKTtkKyspe3ZhciBlPW5ldyBnKHttb2RlbDpiLGdhbGxlcnk6dGhpcy5tb2RlbCx0ZW1wbGF0ZTp0aGlzLnRodW1iVGVtcGxhdGV9KTtlPWUucmVuZGVyKCksdGhpcy4kZWwuYXBwZW5kKGUuJGVsKSx0aGlzLnRodW1iQWRkZWQoZSksYy5wdXNoKGUuZWwpfXJldHVybiBjfSxfY2hlY2tJbWFnZXNMb2FkZWQ6ZnVuY3Rpb24oYyl7dmFyIGU9dGhpcztuZXcgYihjKS5vbigicHJvZ3Jlc3MiLGZ1bmN0aW9uKGEsYil7Yi5pc0xvYWRlZCYmKGUuc3dpdGNoVGh1bWJDbGFzcyhiLmltZyksZS5hcnJhbmdlVGh1bWJzKCkpfSkub24oImFsd2F5cyIsZnVuY3Rpb24oKXtlLmRlYnVnJiYoY29uc29sZS5sb2coImxhc3Qgc3RvcHBlckFwcGVhcmVkIHRyaWdnZXIgY29tcGxldGVkLiIpLGNvbnNvbGUubG9nKCJsZWZ0IG92ZXIgaW1hZ2VzVG9Mb2FkOiAiK2UuaW1hZ2VzVG9Mb2FkLmxlbmd0aCkpLHdpbmRvdy5zZXRUaW1lb3V0KGQuYmluZChlLmFycmFuZ2VUaHVtYnMsZSksMjAwKSxlLl9iaW5kSW52aWV3KCl9KS5vbigiZmFpbCIsZnVuY3Rpb24oYSl7YS5kZWJ1ZyYmY29uc29sZS5sb2coIkZBSUwgLSBhbGwgaW1hZ2VzIGxvYWRlZCwgYXQgbGVhc3Qgb25lIGlzIGJyb2tlbiIpfSksYShjKS5lYWNoKGZ1bmN0aW9uKGIsYyl7YShjKS5wcm9wKCJjb21wbGV0ZSIpJiYoZS5zd2l0Y2hUaHVtYkNsYXNzKGMuaW1nKSxlLmFycmFuZ2VUaHVtYnMoKSl9KX0sc3dpdGNoVGh1bWJDbGFzczpmdW5jdGlvbihiKXt2YXIgYz1hKGIpLnBhcmVudCgpO3JldHVybiBjLnRvZ2dsZUNsYXNzKCJsb2FkaW5nIGxvYWRlZCIpfSxvbk5ld1NsaWRlckltYWdlOmZ1bmN0aW9uKGEpe2QuY29udGFpbnModGhpcy5pbWFnZXNUb0xvYWQsYS5tb2RlbCkmJndpbmRvdy5zZXRUaW1lb3V0KGQuYmluZChmdW5jdGlvbigpe3RoaXMucmVuZGVyTmV4dENodW5rKCl9LHRoaXMpLDIwMCl9LG9uU2xpZGVyQ2xvc2luZzpmdW5jdGlvbihhKXthJiZ0aGlzLnNjcm9sbFRvVGh1bWIoYS5tb2RlbCl9LGdldFRodW1iVGVtcGxhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gZC50ZW1wbGF0ZShhKCIjdGVtcGxhdGUtdGh1bWIiKS5odG1sKCkpfX0pO3JldHVybiBpfSksYygiZ2FsbGVyeS92aWV3cy90aHVtYi5jb250YWluZXIuZHluYW1pYy5tYXNvbnJ5IixbImpxdWVyeSIsImpxdWVyeS1icmlkZ2V0L2pxdWVyeS5icmlkZ2V0IiwiZmx1aWQtbWFzb25yeSIsInVuZGVyc2NvcmUiLCJiYWNrYm9uZSIsImdhbGxlcnkvdmlld3MvdGh1bWIuY29udGFpbmVyLmR5bmFtaWMiLCJnYWxsZXJ5L3V0aWxzL3Jlc3BvbnNpdmUuYWRhcHRlciJdLGZ1bmN0aW9uKGEsYixjLGQsZSxmLGcpe2EuYnJpZGdldCgiZmx1aWRNYXNvbnJ5IixjKTt2YXIgaD1mLmV4dGVuZCh7ZGVidWc6ITEsaW5pdGlhbGl6ZTpmdW5jdGlvbigpe2YucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxpbml0R2FsbGVyeTpmdW5jdGlvbigpe2YucHJvdG90eXBlLmluaXRHYWxsZXJ5LmFwcGx5KHRoaXMsYXJndW1lbnRzKSx0aGlzLmluaXRNYXNvbnJ5KHRoaXMubW9kZWwuZ2V0KCJvcHRzIikpfSxpbml0TWFzb25yeTpmdW5jdGlvbihhKXt0aGlzLiRlbC5mbHVpZE1hc29ucnkoe2l0ZW1TZWxlY3Rvcjp0aGlzLm9wdGlvbnMuaXRlbVNlbGVjdG9yLG1pbkNvbHVtbldpZHRoOmcuZ2V0T3B0aW9uQnlNZWRpYVR5cGUoYSwibWluX2NvbF93aWR0aCIpLGd1dHRlcjpnLmdldE9wdGlvbkJ5TWVkaWFUeXBlKGEsImd1dHRlcl93aWR0aCIpLGlzRml0V2lkdGg6ITF9KX0scmVtb3ZlOmZ1bmN0aW9uKCl7dGhpcy4kZWwuZmx1aWRNYXNvbnJ5KCJyZW1vdmUiLHRoaXMuJGVsLmNoaWxkcmVuKCkpfSxyZW1vdmVUaHVtYjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLiRlbDtiLmZsdWlkTWFzb25yeSgicmVtb3ZlIixhLmdldFRodW1iVmlldygpLiRlbCksYi5mbHVpZE1hc29ucnkoKX0sYXJyYW5nZVRodW1iczpmdW5jdGlvbigpe3RoaXMuJGVsLmZsdWlkTWFzb25yeSgpfSx0aHVtYkFkZGVkOmZ1bmN0aW9uKGEpe3RoaXMuJGVsLmZsdWlkTWFzb25yeSgiYXBwZW5kZWQiLGEuJGVsKX19KTtyZXR1cm4gaH0pLGMoImdhbGxlcnkvdmlld3MvbGFyZ2UudmlldyIsWyJqcXVlcnkiLCJ1bmRlcnNjb3JlIiwiYmFja2JvbmUiXSxmdW5jdGlvbihhLGIsYyl7dmFyIGQ9Yy5WaWV3LmV4dGVuZCh7ZGVidWc6ITEsaW5pdGlhbGl6ZTpmdW5jdGlvbigpe3RoaXMuc2xpZGVyPXRoaXMub3B0aW9ucy5zbGlkZXIsdGhpcy5jdXJyZW50U2xpZGVyUmF0aW89dm9pZCAwLHRoaXMuY3VyRGltcz17fSx0aGlzLmxhcmdlQXR0cnM9dGhpcy5tb2RlbC5nZXRMYXJnZSgpLHRoaXMuc2V0RWxlbWVudChhKCI8aW1nLz4iKSksdGhpcy4kZWwuYXR0cigic3JjIix0aGlzLmxhcmdlQXR0cnMuc3JjKS5jc3MoeyJtYXgtd2lkdGgiOnRoaXMubGFyZ2VBdHRycy53aWR0aCwibWF4LWhlaWdodCI6dGhpcy5sYXJnZUF0dHJzLmhlaWdodH0pLHRoaXMubW9kZWwuc2V0TGFyZ2VWaWV3KHRoaXMpfSxldmVudHM6e2xvYWQ6ImxvYWRlZCJ9LHJlc2l6ZTpmdW5jdGlvbigpe2lmKHRoaXMuY3VycmVudFNsaWRlclJhdGlvIT09dGhpcy5zbGlkZXIucmF0aW8pe3RoaXMuY3VycmVudFNsaWRlclJhdGlvPXRoaXMuc2xpZGVyLnJhdGlvLHRoaXMuY3VyRGltcz10aGlzLl9jYWxjdWxhdGVEaW1zKCk7dmFyIGE9dGhpczt3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpe2EuJGVsLmFuaW1hdGUoe3dpZHRoOmEuY3VyRGltcy5weFswXSxoZWlnaHQ6YS5jdXJEaW1zLnB4WzFdfSwwKX0sMCl9fSxnZXRXaWR0aDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmN1ckRpbXMucHhbMF19LGdldEhlaWdodDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmN1ckRpbXMucHhbMV19LF9jYWxjdWxhdGVEaW1zOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5tb2RlbC5nZXQoIm9yaWVudGF0aW9uIik7cmV0dXJuImxhbmRzY2FwZSI9PT1hPyh0aGlzLl9zZXRMYXJnZVRvRnVsbFdpdGgoKSx0aGlzLmN1ckRpbXMucHhbMV0+dGhpcy5zbGlkZXIuaGVpZ2h0JiYodGhpcy5kZWJ1ZyYmY29uc29sZS5sb2coInVwcywgaW1hZ2UgdG8gaGlnaCBmb3Igc2xpZGVyLCB3aGVuIHNldCB0byBmdWxsIHNsaWRlciB3aWR0aCEiKSx0aGlzLl9zZXRMYXJnZVRvRnVsbEhlaWdodCgpKSk6InBvcnRyYWl0Ij09PWEmJih0aGlzLl9zZXRMYXJnZVRvRnVsbEhlaWdodCgpLHRoaXMuY3VyRGltcy5weFswXT50aGlzLnNsaWRlci53aWR0aCYmKHRoaXMuZGVidWcmJmNvbnNvbGUubG9nKCJ1cHMsIGltYWdlIHRvIHdpZGUgZm9yIHNsaWRlciwgd2hlbiBzZXQgdG8gZnVsbCBzbGlkZXIgaGVpZ2h0ISIpLHRoaXMuX3NldExhcmdlVG9GdWxsV2l0aCgpKSksdGhpcy5jdXJEaW1zfSxfc2V0TGFyZ2VUb0Z1bGxXaXRoOmZ1bmN0aW9uKCl7dGhpcy5jdXJEaW1zLnBlcmNlbnQ9WyIxMDAlIiwiIl0sdGhpcy5jdXJEaW1zLnB4PVtNYXRoLm1pbih0aGlzLnNsaWRlci53aWR0aCx0aGlzLmxhcmdlQXR0cnMud2lkdGgpLE1hdGgubWluKE1hdGguZmxvb3IodGhpcy5zbGlkZXIud2lkdGgvdGhpcy5tb2RlbC5nZXQoInJhdGlvIikpLHRoaXMubGFyZ2VBdHRycy5oZWlnaHQpXSx0aGlzLmRlYnVnJiZjb25zb2xlLmxvZygiMTAwJSB3aWR0aCA9PiIrdGhpcy5zbGlkZXIud2lkdGgrIngiK3RoaXMuY3VyRGltcy5weFsxXSsicHg7IENvbnRhaW5lcjogIit0aGlzLnNsaWRlci53aWR0aCsieCIrdGhpcy5zbGlkZXIuaGVpZ2h0KyJweC4iKX0sX3NldExhcmdlVG9GdWxsSGVpZ2h0OmZ1bmN0aW9uKCl7dGhpcy5jdXJEaW1zLnBlcmNlbnQ9WyIiLCIxMDAlIl0sdGhpcy5jdXJEaW1zLnB4PVtNYXRoLm1pbihNYXRoLmZsb29yKHRoaXMuc2xpZGVyLmhlaWdodCp0aGlzLm1vZGVsLmdldCgicmF0aW8iKSksdGhpcy5sYXJnZUF0dHJzLndpZHRoKSxNYXRoLm1pbih0aGlzLnNsaWRlci5oZWlnaHQsdGhpcy5sYXJnZUF0dHJzLmhlaWdodCldLHRoaXMuZGVidWcmJmNvbnNvbGUubG9nKCIxMDAlIGhlaWdodCA9PiIrdGhpcy5jdXJEaW1zLnB4WzBdKyJ4Iit0aGlzLmN1ckRpbXMucHhbMV0rInB4OyBjb250YWluZXI6ICIrdGhpcy5zbGlkZXIud2lkdGgrIngiK3RoaXMuc2xpZGVyLmhlaWdodCsicHguIil9LGxvYWRlZDpmdW5jdGlvbigpe3RoaXMuZGVidWcmJmNvbnNvbGUubG9nKCJMYXJnZVZpZXcgZm9yIEltYWdlICIrdGhpcy5tb2RlbC5pZCsiIGlzIGxvYWRlZCIpfX0pO3JldHVybiBkfSksYygiZ2FsbGVyeS92aWV3cy9jb2NrcGl0LnZpZXciLFsianF1ZXJ5IiwianF1ZXJ5LXRvdWNoc3dpcGUiLCJ1bmRlcnNjb3JlIiwiYmFja2JvbmUiLCJnYWxsZXJ5L3ZpZXdzL3NlbGVjdGlvbi9zZWxlY3QuYnV0dG9uIl0sZnVuY3Rpb24oYSxiLGMsZCxlKXt2YXIgZj1kLlZpZXcuZXh0ZW5kKHtlbDoiLmNvY2twaXQiLGluaXRpYWxpemU6ZnVuY3Rpb24oKXt0aGlzLiRlbC5sZW5ndGgmJih0aGlzLmJ1dHRvbj10aGlzLiQoIi5jb2NrcGl0X2J1dHRvbiIpLHRoaXMuYm9keT10aGlzLiQoIi5jb2NrcGl0X2JvZHkiKS5hZGRDbGFzcygiaGlkZGVuIiksdGhpcy5fYm9keVRlbXBsYXRlPXRoaXMuZ2V0VGVtcGxhdGUoKSx0aGlzLnNsaWRlcj10aGlzLm9wdGlvbnMuc2xpZGVyLHRoaXMubGlzdGVuVG8odGhpcy5tb2RlbCwic2xpZGVyOm5ld0ltYWdlIix0aGlzLm9uTmV3SW1hZ2UpLHRoaXMuYnV0dG9uLnN3aXBlKHt0YXA6Yy5iaW5kKHRoaXMudG9nZ2xlQm9keSx0aGlzKX0pKX0scmVtb3ZlOmZ1bmN0aW9uKCl7dGhpcy5idXR0b24uc3dpcGUoImRlc3Ryb3kiKSxkLlZpZXcucHJvdG90eXBlLnJlbW92ZS5jYWxsKHRoaXMpfSxpc09wZW46ZnVuY3Rpb24oKXtyZXR1cm4hdGhpcy5ib2R5Lmhhc0NsYXNzKCJoaWRkZW4iKX0sdG9nZ2xlQm9keTpmdW5jdGlvbigpe3RoaXMuYm9keS50b2dnbGVDbGFzcygiaGlkZGVuIiksdGhpcy5yZW5kZXJCb2R5KHRoaXMubW9kZWwuZ2V0Q3VycmVudCgpKX0sb25OZXdJbWFnZTpmdW5jdGlvbihhKXt0aGlzLnJlbmRlckJvZHkoYS5tb2RlbCl9LHJlbmRlckJvZHk6ZnVuY3Rpb24oYSl7aWYodGhpcy5pc09wZW4oKSl7dGhpcy5ib2R5Lmh0bWwodGhpcy5fYm9keVRlbXBsYXRlKHtpbWc6YX0pKTt2YXIgYj10aGlzLiQoIi5zZWxlY3RvciIpO2IubGVuZ3RoJiZ0aGlzLnVwZGF0ZVNlbGVjdEJ1dHRvbihiLGEpfX0sdXBkYXRlU2VsZWN0QnV0dG9uOmZ1bmN0aW9uKGEsYil7dGhpcy5zZWxlY3RCdXR0b24mJnRoaXMuc2VsZWN0QnV0dG9uLnJlbW92ZSgpLHRoaXMuc2VsZWN0QnV0dG9uPW5ldyBlKHttb2RlbDpiLGVsOmF9KX0sZ2V0VGVtcGxhdGU6ZnVuY3Rpb24oKXt2YXIgYj1hKCIjdGVtcGxhdGUtY29ja3BpdEJvZHkiKTtyZXR1cm4gYi5sZW5ndGg/Yy50ZW1wbGF0ZShiLmh0bWwoKSk6KGNvbnNvbGUuZXJyb3IoJ01pc3NpbmcgVGVtcGxhdGUgZm9yIENvY2twaXQgKCQoIiN0ZW1wbGF0ZS1jb2NrcGl0Qm9keSIpISA9PiBDb2NrcGl0IG5vdCBpbml0aWFsaXplZC4nKSx2b2lkIHRoaXMuJGVsLmhpZGUoKSl9fSk7cmV0dXJuIGZ9KSxjKCJnYWxsZXJ5L3ZpZXdzL3NsaWRlci52aWV3IixbImpxdWVyeSIsImpxdWVyeS10b3VjaHN3aXBlIiwidmVuZG9yL2pxdWVyeS50aHJvdHRsZS1kZWJvdW5jZSIsInVuZGVyc2NvcmUiLCJiYWNrYm9uZSIsImdhbGxlcnkvdmlld3MvbGFyZ2UudmlldyIsImdhbGxlcnkvdmlld3MvY29ja3BpdC52aWV3Il0sZnVuY3Rpb24oYSxiLGMsZCxlLGYsZyl7dmFyIGg9ZS5WaWV3LmV4dGVuZCh7ZXZlbnRzOnsiY2xpY2sgLm5hdi5wcmV2Ijoic2hvd1ByZXYiLCJjbGljayAubmF2Lm5leHQiOiJzaG93TmV4dCJ9LGluaXRpYWxpemU6ZnVuY3Rpb24oKXthKCJib2R5IikuYWRkQ2xhc3MoInNsaWRlcl9jbG9zZWQiKSx0aGlzLnRyYXk9dGhpcy4kKCIudHJheSIpLHRoaXMuY3VycmVudEJveD10aGlzLiQoIi5waG90by5jdXJyZW50IiksdGhpcy5wcmV2Qm94PXRoaXMuJCgiLnBob3RvLnByZXYiKSx0aGlzLm5leHRCb3g9dGhpcy4kKCIucGhvdG8ubmV4dCIpLHRoaXMubmF2UHJldj10aGlzLiQoIi5uYXYucHJldiIpLHRoaXMubmF2TmV4dD10aGlzLiQoIi5uYXYubmV4dCIpLHRoaXMuY3VycmVudD12b2lkIDAsdGhpcy5saXN0ZW5Ubyh0aGlzLm1vZGVsLCJ0aHVtYjpjbGlja2VkIix0aGlzLm9wZW5TbGlkZXIpLGEod2luZG93KS5vbigicmVzaXplLnNsaWRlciIsZC5iaW5kKGEuZGVib3VuY2UoMjAwLHRoaXMucmVzaXplKSx0aGlzKSksYSh3aW5kb3cpLm9uKCJrZXl1cC5zbGlkZXIiLGQuYmluZCh0aGlzLmtleXMsdGhpcykpLHRoaXMudG91Y2hhYmxlPSJvbnRvdWNoc3RhcnQiaW4gd2luZG93LHRoaXMudG91Y2hhYmxlfHx0aGlzLnRyYXkub24oIm1vdXNlbW92ZS5zbGlkZXIiLGQuYmluZChhLnRocm90dGxlKDE1MCx0aGlzLm1vdXNlbW92ZSksdGhpcykpLHRoaXMuY29ja3BpdD1uZXcgZyh7bW9kZWw6dGhpcy5tb2RlbCxzbGlkZXI6dGhpc30pLHRoaXMuaW5pdFN3aXBlSGFuZGxlcigpLHRoaXMuJGVsLnN3aXBlKCJkaXNhYmxlIiksdGhpcy5saXN0ZW5Ub09uY2UodGhpcy5tb2RlbCwic3luYyIsZnVuY3Rpb24oKXtpZih3aW5kb3cubG9jYXRpb24uaGFzaC5sZW5ndGg+Mil7dmFyIGE9dGhpcy5tb2RlbC5nZXQoImltYWdlcyIpLmdldCh3aW5kb3cubG9jYXRpb24uaGFzaC5zdWJzdHIoMikpO2EmJih0aGlzLm9wZW5TbGlkZXIoYSksd2luZG93LnNldFRpbWVvdXQoZC5iaW5kKHRoaXMucmVzaXplLHRoaXMpLDI1MCkpfX0pfSxpbml0U3dpcGVIYW5kbGVyOmZ1bmN0aW9uKCl7dmFyIGE9dGhpczt0aGlzLiRlbC5zd2lwZSh7c3dpcGVMZWZ0OmZ1bmN0aW9uKGIpe2Euc2hvd05leHQoKSxiLnByZXZlbnREZWZhdWx0KCl9LHN3aXBlUmlnaHQ6ZnVuY3Rpb24oYil7YS5zaG93UHJldigpLGIucHJldmVudERlZmF1bHQoKX0sdGFwOmZ1bmN0aW9uKGIpe2IucHJldmVudERlZmF1bHQoKSxhLmNsaWNrKGIpfSxhbGxvd1BhZ2VTY3JvbGw6Im5vbmUifSl9LHJlbW92ZTpmdW5jdGlvbigpe2Eod2luZG93KS5vZmYoInJlc2l6ZS5zbGlkZXIiKSxhKHdpbmRvdykub2ZmKCJrZXl1cC5zbGlkZXIiKSx0aGlzLnRvdWNoYWJsZSYmdGhpcy50cmF5Lm9mZigibW91c2Vtb3ZlLnNsaWRlciIpLHRoaXMuJGVsLnN3aXBlKCJkZXN0cm95IiksZS5WaWV3LnByb3RvdHlwZS5yZW1vdmUuY2FsbCh0aGlzKX0sa2V5czpmdW5jdGlvbihhKXtpZih0aGlzLmlzT3BlbigpKXN3aXRjaChhLmtleUNvZGUpe2Nhc2UgMjc6dGhpcy5jbG9zZVNsaWRlcigpO2JyZWFrO2Nhc2UgMzk6dGhpcy5zaG93TmV4dCgpO2JyZWFrO2Nhc2UgMzc6dGhpcy5zaG93UHJldigpfX0sY2xpY2s6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5fbWFwTW91c2VFdmVudChhKTtzd2l0Y2goYil7Y2FzZSJuYXYucHJldiI6dGhpcy5zaG93UHJldigpO2JyZWFrO2Nhc2UibmF2Lm5leHQiOnRoaXMuc2hvd05leHQoKTticmVhaztjYXNlIkVTQyI6dGhpcy5jbG9zZVNsaWRlcigpfX0sbW91c2Vtb3ZlOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuX21hcE1vdXNlRXZlbnQoYSk7Im5hdi5wcmV2Ij09PWI/KHRoaXMubmF2TmV4dC5yZW1vdmVDbGFzcygiYWN0aXZlIiksdGhpcy5uYXZQcmV2LmFkZENsYXNzKCJhY3RpdmUiKSk6Im5hdi5uZXh0Ij09PWI/KHRoaXMubmF2UHJldi5yZW1vdmVDbGFzcygiYWN0aXZlIiksdGhpcy5uYXZOZXh0LmFkZENsYXNzKCJhY3RpdmUiKSk6KHRoaXMubmF2UHJldi5yZW1vdmVDbGFzcygiYWN0aXZlIiksdGhpcy5uYXZOZXh0LnJlbW92ZUNsYXNzKCJhY3RpdmUiKSl9LF9tYXBNb3VzZUV2ZW50OmZ1bmN0aW9uKGIpe3ZhciBjPWEoYi50YXJnZXQpO2lmKGMuaXMoIi5waG90byBpbWciKSl7dmFyIGQ9Yi5jaGFuZ2VkVG91Y2hlcyYmYi5jaGFuZ2VkVG91Y2hlcy5sZW5ndGg/Yi5jaGFuZ2VkVG91Y2hlc1swXS5wYWdlWDpiLnBhZ2VYLGU9ZC1hKGIudGFyZ2V0KS5vZmZzZXQoKS5sZWZ0LGY9ZS90aGlzLmN1cnJlbnQuZ2V0V2lkdGgoKTtyZXR1cm4uNDU+Zj8ibmF2LnByZXYiOiJuYXYubmV4dCJ9cmV0dXJuIDA9PT1jLmNsb3Nlc3QoIi5jb2NrcGl0IikubGVuZ3RoPyJFU0MiOnZvaWQgMH0saXNPcGVuOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGVsLmhhc0NsYXNzKCJvcGVuIil9LG9wZW5TbGlkZXI6ZnVuY3Rpb24oYil7dGhpcy5fc2V0RGltZW5zaW9ucygpLHRoaXMuX3NldEN1cnJlbnQoYiksdGhpcy4kZWwuYWRkQ2xhc3MoIm9wZW4iKSxhKCJib2R5IikucmVtb3ZlQ2xhc3MoInNsaWRlcl9jbG9zZWQiKSx0aGlzLiRlbC5hZGRDbGFzcygidmlzaWJsZSIpLHRoaXMuJGVsLnN3aXBlKCJlbmFibGUiKSx0aGlzLm1vZGVsLnRvZ2dsZVNsaWRlclN0YXRlKCl9LHNob3dOZXh0OmZ1bmN0aW9uKCl7aWYodGhpcy5uZXh0KXt2YXIgYT10aGlzLiRlbC5maW5kKCIjcHJldiIpO3RoaXMucHJldj10aGlzLmN1cnJlbnQsdGhpcy5wcmV2Qm94PXRoaXMuY3VycmVudEJveC5hdHRyKCJpZCIsInByZXYiKSx0aGlzLmN1cnJlbnQ9dGhpcy5uZXh0LHRoaXMubW9kZWwuc2V0Q3VycmVudCh0aGlzLm5leHQubW9kZWwpLHRoaXMuY3VycmVudEJveD10aGlzLm5leHRCb3guYXR0cigiaWQiLCJjdXJyZW50IiksdGhpcy5uZXh0Qm94PWEuYXR0cigiaWQiLCJuZXh0IiksdGhpcy5wcmV2Qm94LnRvZ2dsZUNsYXNzKCJjdXJyZW50IHByZXYiKSx0aGlzLmN1cnJlbnRCb3gudG9nZ2xlQ2xhc3MoIm5leHQgY3VycmVudCIpLHRoaXMubmV4dEJveC50b2dnbGVDbGFzcygicHJldiBuZXh0IiksdGhpcy5fc2V0TmV4dCgpLHRoaXMuX2N1cnJlbnRDaGFuZ2VkKCl9fSxzaG93UHJldjpmdW5jdGlvbigpe2lmKHRoaXMucHJldil7dmFyIGE9dGhpcy4kZWwuZmluZCgiI25leHQiKTt0aGlzLm5leHQ9dGhpcy5jdXJyZW50LHRoaXMubmV4dEJveD10aGlzLmN1cnJlbnRCb3guYXR0cigiaWQiLCJuZXh0IiksdGhpcy5jdXJyZW50PXRoaXMucHJldix0aGlzLm1vZGVsLnNldEN1cnJlbnQodGhpcy5wcmV2Lm1vZGVsKSx0aGlzLmN1cnJlbnRCb3g9dGhpcy5wcmV2Qm94LmF0dHIoImlkIiwiY3VycmVudCIpLHRoaXMucHJldkJveD1hLmF0dHIoImlkIiwicHJldiIpLHRoaXMubmV4dEJveC50b2dnbGVDbGFzcygiY3VycmVudCBuZXh0IiksdGhpcy5jdXJyZW50Qm94LnRvZ2dsZUNsYXNzKCJwcmV2IGN1cnJlbnQiKSx0aGlzLnByZXZCb3gudG9nZ2xlQ2xhc3MoIm5leHQgcHJldiIpLHRoaXMuX3NldFByZXYoKSx0aGlzLl9jdXJyZW50Q2hhbmdlZCgpfX0sY2xvc2VTbGlkZXI6ZnVuY3Rpb24oKXt0aGlzLm1vZGVsLnRyaWdnZXIoInNsaWRlcjpjbG9zaW5nIix0aGlzLmN1cnJlbnQpLHRoaXMuJGVsLnJlbW92ZUNsYXNzKCJvcGVuIHZpc2libGUiKSxhKCJib2R5IikuYWRkQ2xhc3MoInNsaWRlcl9jbG9zZWQiKSx0aGlzLl9zZXRDdXJyZW50KHZvaWQgMCksdGhpcy5jdXJyZW50PXRoaXMubmV4dD10aGlzLnBlcnY9dm9pZCAwLHRoaXMuJCgiLnBob3RvIikuZW1wdHkoKSx0aGlzLm1vZGVsLmdldCgiaW1hZ2VQYWdlcyIpJiZ0aGlzLm1vZGVsLmdldCgicG9zdFBhdGgiKT9oaXN0b3J5LnJlcGxhY2VTdGF0ZShudWxsLCIiLHRoaXMubW9kZWwuZ2V0KCJwb3N0UGF0aCIpKTp0aGlzLl9zZXRIYXNoYmFuZyhudWxsLCLDhE1QVEkiKSx0aGlzLiRlbC5zd2lwZSgiZGlzYWJsZSIpLHRoaXMubW9kZWwudG9nZ2xlU2xpZGVyU3RhdGUoKX0sX3NldEhhc2hiYW5nOmZ1bmN0aW9uKGEsYil7aWYoTW9kZXJuaXpyLmhpc3Rvcnkpe3ZhciBjPWRvY3VtZW50LmxvY2F0aW9uLmhyZWY7Yz1jLnJlcGxhY2UoL1wjLiovLCIiKSsoYT8iIyEiK2E6IiIpLGhpc3RvcnkucmVwbGFjZVN0YXRlKG51bGwsYixjKX19LF9jdXJyZW50Q2hhbmdlZDpmdW5jdGlvbigpe3RoaXMubW9kZWwuZ2V0KCJpbWFnZVBhZ2VzIik/aGlzdG9yeS5yZXBsYWNlU3RhdGUobnVsbCwiIix0aGlzLmN1cnJlbnQubW9kZWwuZ2V0KCJpbWFnZVBhZ2VQYXRoIikpOnRoaXMuX3NldEhhc2hiYW5nKHRoaXMuY3VycmVudC5tb2RlbC5pZCwiSW1hZ2UgIit0aGlzLmN1cnJlbnQubW9kZWwuaWQpLHRoaXMubW9kZWwudHJpZ2dlcigic2xpZGVyOm5ld0ltYWdlIix0aGlzLmN1cnJlbnQpLHRoaXMubmV4dD90aGlzLm5hdk5leHQucmVtb3ZlQ2xhc3MoInZpc3VhbGx5aGlkZGVuIik6dGhpcy5uYXZOZXh0LmFkZENsYXNzKCJ2aXN1YWxseWhpZGRlbiIpLHRoaXMucHJldj90aGlzLm5hdlByZXYucmVtb3ZlQ2xhc3MoInZpc3VhbGx5aGlkZGVuIik6dGhpcy5uYXZQcmV2LmFkZENsYXNzKCJ2aXN1YWxseWhpZGRlbiIpfSxfc2V0Q3VycmVudDpmdW5jdGlvbihhKXt0aGlzLm1vZGVsLnNldEN1cnJlbnQoYSk7dmFyIGI9dGhpcy5fbG9hZE9yR2V0TGFyZ2UoYSk7YiYmKHRoaXMuY3VycmVudD1iLHRoaXMuY3VycmVudEJveC5odG1sKHRoaXMuY3VycmVudC4kZWwpLHRoaXMuX2N1cnJlbnRDaGFuZ2VkKCksdGhpcy5fc2V0TmV4dCgpLHRoaXMuX3NldFByZXYoKSl9LF9zZXROZXh0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubmV4dD10aGlzLl9sb2FkT3JHZXRMYXJnZSh0aGlzLm1vZGVsLmdldE5leHQoKSksdGhpcy5uZXh0Pyh0aGlzLm5leHRCb3guaHRtbCh0aGlzLm5leHQuJGVsKSx0aGlzLm5hdk5leHQucmVtb3ZlQ2xhc3MoInZpc3VhbGx5aGlkZGVuIikpOnRoaXMubmF2TmV4dC5hZGRDbGFzcygidmlzdWFsbHloaWRkZW4iKSx0aGlzLm5leHR9LF9zZXRQcmV2OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHJldj10aGlzLl9sb2FkT3JHZXRMYXJnZSh0aGlzLm1vZGVsLmdldFByZXYoKSksdGhpcy5wcmV2Pyh0aGlzLnByZXZCb3guaHRtbCh0aGlzLnByZXYuJGVsKSx0aGlzLm5hdlByZXYucmVtb3ZlQ2xhc3MoInZpc3VhbGx5aGlkZGVuIikpOnRoaXMubmF2UHJldi5hZGRDbGFzcygidmlzdWFsbHloaWRkZW4iKSx0aGlzLnByZXZ9LF9sb2FkT3JHZXRMYXJnZTpmdW5jdGlvbihhKXtpZihhKXt2YXIgYj1hLmdldExhcmdlVmlldygpfHxuZXcgZih7bW9kZWw6YSxzbGlkZXI6dGhpc30pO3JldHVybiBiLnJlc2l6ZSgpLGJ9cmV0dXJuIHZvaWQgMH0scmVzaXplOmZ1bmN0aW9uKCl7dGhpcy5fc2V0RGltZW5zaW9ucygpLHRoaXMuY3VycmVudCYmdGhpcy5jdXJyZW50LnJlc2l6ZSgpLHRoaXMubmV4dCYmdGhpcy5uZXh0LnJlc2l6ZSgpLHRoaXMucHJldiYmdGhpcy5wcmV2LnJlc2l6ZSgpfSxfc2V0RGltZW5zaW9uczpmdW5jdGlvbigpe3RoaXMud2lkdGg9dGhpcy50cmF5LndpZHRoKCksdGhpcy5oZWlnaHQ9dGhpcy50cmF5LmhlaWdodCgpLHRoaXMucmF0aW89dGhpcy53aWR0aC90aGlzLmhlaWdodCx0aGlzLm9yaWVudGF0aW9uPXRoaXMucmF0aW8+MT8ibGFuZHNjYXBlIjoicG9ydHJhaXQifX0pO3JldHVybiBofSksYygiZ2FsbGVyeS92aWV3cy9zZWxlY3Rpb24vY29tcG9uZW50IixbImJhY2tib25lIl0sZnVuY3Rpb24oYSl7dmFyIGI9YS5WaWV3LmV4dGVuZCh7aW5pdGlhbGl6ZTpmdW5jdGlvbigpe3RoaXMuJGVsLmxlbmd0aCYmdGhpcy5jb2xsZWN0aW9uJiZ0aGlzLmxpc3RlblRvT25jZSh0aGlzLmNvbGxlY3Rpb24sInN5bmMiLHRoaXMuc2VsZWN0aW9uU3luY2VkKX0sc2VsZWN0aW9uU3luY2VkOmZ1bmN0aW9uKGEpe3RoaXMucmVuZGVyKCksdGhpcy5yZW5kZXJBY3RpdmUoYS5sZW5ndGg+MCksdGhpcy4kZWwuYWRkQ2xhc3MoImluaXRpYWxpemVkIiksdGhpcy5saXN0ZW5Ubyh0aGlzLmNvbGxlY3Rpb24sImFkZCIsdGhpcy5pdGVtQWRkZWQpLHRoaXMubGlzdGVuVG8odGhpcy5jb2xsZWN0aW9uLCJyZW1vdmUiLHRoaXMuaXRlbVJlbW92ZWQpfSxpdGVtQWRkZWQ6ZnVuY3Rpb24oYSxiLGMpezE9PT1iLmxlbmd0aCYmdGhpcy5yZW5kZXJBY3RpdmUoITApLHRoaXMuc2VsZWN0aW9uQ2hhbmdlZChjKX0saXRlbVJlbW92ZWQ6ZnVuY3Rpb24oYSxiLGMpezA9PT1iLmxlbmd0aCYmdGhpcy5yZW5kZXJBY3RpdmUoITEpLHRoaXMuc2VsZWN0aW9uQ2hhbmdlZChjKX0sc2VsZWN0aW9uQ2hhbmdlZDpmdW5jdGlvbigpe30scmVuZGVyQWN0aXZlOmZ1bmN0aW9uKGEpe2E/dGhpcy4kZWwuYWRkQ2xhc3MoImFjdGl2ZSIpOnRoaXMuJGVsLnJlbW92ZUNsYXNzKCJhY3RpdmUiKX19KTtyZXR1cm4gYn0pLGMoImdhbGxlcnkvdmlld3Mvc2VsZWN0aW9uL2luZGljYXRvciIsWyJiYWNrYm9uZSIsImdhbGxlcnkvdmlld3Mvc2VsZWN0aW9uL2NvbXBvbmVudCJdLGZ1bmN0aW9uKGEsYil7dmFyIGM9Yi5leHRlbmQoe2VsOiIuc2VsZWN0aW9uIC5pbmRpY2F0b3I6bm90KFtkYXRhLXNlbGVjdGlvbl0pIixzZWxlY3Rpb25DaGFuZ2VkOmZ1bmN0aW9uKCl7dGhpcy5yZW5kZXIoKX0scmVuZGVyOmZ1bmN0aW9uKCl7dGhpcy4kZWwuaHRtbCh0aGlzLmNvbGxlY3Rpb24ubGVuZ3RoKX19KTtyZXR1cm4gY30pLGMoImdhbGxlcnkvdmlld3Mvc2VsZWN0aW9uL3RvZ2dsZS5idXR0b24iLFsidW5kZXJzY29yZSIsImJhY2tib25lIiwiZ2FsbGVyeS92aWV3cy9zZWxlY3Rpb24vY29tcG9uZW50Il0sZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWMuZXh0ZW5kKHtlbDoiLnNlbGVjdGlvbiAuYnV0dG9uLnRvZ2dsZSIsZXZlbnRzOntjbGljazoidG9nZ2xlIn0sdG9nZ2xlOmZ1bmN0aW9uKCl7dGhpcy4kZWwuaGFzQ2xhc3MoImFjdGl2ZSIpJiZ0aGlzLmZpbHRlcigpfSxmaWx0ZXI6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmNvbGxlY3Rpb24uZ2FsbGVyeS5nZXQoImltYWdlcyIpO3RoaXMuJGVsLmhhc0NsYXNzKCJmaWx0ZXJlZCIpPyhhLnJlc2V0KHRoaXMudW5maWx0ZXJlZEltYWdlcy5tb2RlbHMpLHRoaXMudW5maWx0ZXJlZEltYWdlcz12b2lkIDApOih0aGlzLnVuZmlsdGVyZWRJbWFnZXM9bmV3IGIuQ29sbGVjdGlvbihhLm1vZGVscyksYS5yZXNldCh0aGlzLmNvbGxlY3Rpb24ubW9kZWxzKSksdGhpcy4kZWwudG9nZ2xlQ2xhc3MoImZpbHRlcmVkIil9LGl0ZW1SZW1vdmVkOmZ1bmN0aW9uKGEpe2lmKHRoaXMudW5maWx0ZXJlZEltYWdlcyl7dmFyIGI9dGhpcy51bmZpbHRlcmVkSW1hZ2VzLmdldChhLmlkKTtiJiZiLnNldCgic2VsZWN0ZWQiLCExKX1jLnByb3RvdHlwZS5pdGVtUmVtb3ZlZC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LHNlbGVjdGlvbkNoYW5nZWQ6ZnVuY3Rpb24oKXswPT09dGhpcy5jb2xsZWN0aW9uLmxlbmd0aCYmdGhpcy4kZWwuaGFzQ2xhc3MoImZpbHRlcmVkIikmJnRoaXMuZmlsdGVyKCl9fSk7cmV0dXJuIGR9KSxjKCJnYWxsZXJ5L3ZpZXdzL3NlbGVjdGlvbi9wZGYuYnV0dG9uIixbImJhY2tib25lIiwiZ2FsbGVyeS92aWV3cy9zZWxlY3Rpb24vY29tcG9uZW50Il0sZnVuY3Rpb24oYSxiKXt2YXIgYz1iLmV4dGVuZCh7ZWw6Ii5zZWxlY3Rpb24gLmJ1dHRvbi5wZGYiLGV2ZW50czp7Y2xpY2s6ImRvd25sb2FkQ2xpY2sifSxpbml0aWFsaXplOmZ1bmN0aW9uKCl7dGhpcy4kZWwubGVuZ3RoJiZ0aGlzLmNvbGxlY3Rpb24mJih0aGlzLmZvbGlvRGF0YT17fSx0aGlzLmZvbGlvRGF0YS51cmw9dGhpcy4kZWwuZGF0YSgidXJsIiksdGhpcy5mb2xpb0RhdGEudGl0bGU9dGhpcy4kZWwuZGF0YSgidGl0bGUiKSx0aGlzLmZvbGlvRGF0YS5rZXk9dGhpcy4kZWwuZGF0YSgia2V5IiksdGhpcy5mb2xpb0RhdGEudGVtcGxhdGU9dGhpcy4kZWwuZGF0YSgidGVtcGxhdGUiKSxiLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9LGRvd25sb2FkQ2xpY2s6ZnVuY3Rpb24oKXt0aGlzLiRlbC5oYXNDbGFzcygiYWN0aXZlIikmJih0aGlzLnJlbmRlckxvYWRpbmcoKSwkLmFqYXgoe3R5cGU6IlBPU1QiLHVybDp0aGlzLmZvbGlvRGF0YS51cmwsZGF0YTpKU09OLnN0cmluZ2lmeSh0aGlzLmdldFBkZkdlblBheWxvYWQoKSksc3VjY2VzczpmdW5jdGlvbihhKXthLmZvbGlvLmV4aXN0cz8odGhpcy5kb3dubG9hZFBkZihhLmZvbGlvLnVybCksdGhpcy5yZW5kZXJBY3RpdmUodGhpcy5jb2xsZWN0aW9uLmxlbmd0aD4wKSk6dGhpcy50cnlBZ2FpbihhLmZvbGlvLnVybCwxNTAwKX0uYmluZCh0aGlzKSxlcnJvcjpmdW5jdGlvbihhKXt0aGlzLnJlbmRlckVycm9yKCksY29uc29sZS5sb2coIlNvbWV0aGluZyB3ZW50IHdyb25nIHdoaWxlIGdlbmVyYXRpbmcgdGhlIFBERiEiLGEpfS5iaW5kKHRoaXMpLGNvbnRlbnRUeXBlOiJhcHBsaWNhdGlvbi9qc29uIixkYXRhVHlwZToianNvbiJ9KSl9LHRyeUFnYWluOmZ1bmN0aW9uKGEsYil7JC5hamF4KHt0eXBlOiJIRUFEIix1cmw6YSxzdWNjZXNzOmZ1bmN0aW9uKCl7d2luZG93LmNsZWFyVGltZW91dCh0aGlzLnRpbWVvdXRJZCksdGhpcy5kb3dubG9hZFBkZihhKSx0aGlzLnJlbmRlckFjdGl2ZSh0aGlzLmNvbGxlY3Rpb24ubGVuZ3RoPjApfS5iaW5kKHRoaXMpLGVycm9yOmZ1bmN0aW9uKCl7d2luZG93LmNsZWFyVGltZW91dCh0aGlzLnRpbWVvdXRJZCksdGhpcy50aW1lb3V0SWQ9c2V0VGltZW91dChmdW5jdGlvbigpe3RoaXMudHJ5QWdhaW4oYSxiKX0uYmluZCh0aGlzKSxiKX0uYmluZCh0aGlzKX0pfSxkb3dubG9hZFBkZjpmdW5jdGlvbihhKXt3aW5kb3cubG9jYXRpb24uaHJlZj1hfSxnZXRQZGZHZW5QYXlsb2FkOmZ1bmN0aW9uKCl7dmFyIGE9e3RpdGxlOnRoaXMuZm9saW9EYXRhLnRpdGxlLGtleTp0aGlzLmZvbGlvRGF0YS5rZXksdGVtcGxhdGU6dGhpcy5mb2xpb0RhdGEudGVtcGxhdGUsaW1hZ2VzOltdfTtyZXR1cm4gdGhpcy5jb2xsZWN0aW9uLmVhY2goZnVuY3Rpb24oYil7YS5pbWFnZXMucHVzaCh7dXJsOmIuZ2V0KCJsYXJnZSIpLnNyY30pfSkse2ZvbGlvOmF9fSxyZW5kZXJFcnJvcjpmdW5jdGlvbigpe3RoaXMuJGVsLnJlbW92ZUNsYXNzKCJsb2FkaW5nIGFjdGl2ZSIpLHRoaXMuJGVsLmFkZENsYXNzKCJlcnJvciIpLHRoaXMuJGVsLmh0bWwoIkRvd25sb2FkIFBERiIpLHRoaXMuJGVsLmF0dHIoInRpdGxlIiwiU29tZXRoaW5nIHdlbnQgd3Jvbmc6IFNlcnZlciBFcnJvciEgVHJ5IGFnYWluIGluIGEgbW9tZW50Iil9LHJlbmRlckxvYWRpbmc6ZnVuY3Rpb24oKXt0aGlzLiRlbC5odG1sKCJMb2FkaW5nIFBERiIpLHRoaXMuJGVsLnJlbW92ZUNsYXNzKCJhY3RpdmUiKSx0aGlzLiRlbC5hZGRDbGFzcygibG9hZGluZyIpfSxyZW5kZXJBY3RpdmU6ZnVuY3Rpb24oKXt0aGlzLiRlbC5odG1sKCJEb3dubG9hZCBQREYiKSx0aGlzLiRlbC5yZW1vdmVDbGFzcygibG9hZGluZyIpLGIucHJvdG90eXBlLnJlbmRlckFjdGl2ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fSk7cmV0dXJuIGN9KSxjKCJnYWxsZXJ5L2FwcCIsWyJiYWNrYm9uZSIsInVuZGVyc2NvcmUiLCJnYWxsZXJ5L21vZGVscy9nYWxsZXJ5LmZhY3RvcnkiLCJnYWxsZXJ5L3ZpZXdzL3RodW1iLmNvbnRhaW5lci5tYXNvbnJ5IiwiZ2FsbGVyeS92aWV3cy90aHVtYi5jb250YWluZXIuZHluYW1pYyIsImdhbGxlcnkvdmlld3MvdGh1bWIuY29udGFpbmVyLmR5bmFtaWMubWFzb25yeSIsImdhbGxlcnkvdmlld3Mvc2xpZGVyLnZpZXciLCJnYWxsZXJ5L3V0aWxzL3Jlc3BvbnNpdmUuYWRhcHRlciIsImdhbGxlcnkvY29sbGVjdGlvbnMvc2VsZWN0aW9uLmNvbGxlY3Rpb24iLCJnYWxsZXJ5L3ZpZXdzL3NlbGVjdGlvbi9jb21wb25lbnQiLCJnYWxsZXJ5L3ZpZXdzL3NlbGVjdGlvbi9pbmRpY2F0b3IiLCJnYWxsZXJ5L3ZpZXdzL3NlbGVjdGlvbi90b2dnbGUuYnV0dG9uIiwiZ2FsbGVyeS92aWV3cy9zZWxlY3Rpb24vcGRmLmJ1dHRvbiJdLGZ1bmN0aW9uKGEsYixjLGQsZSxmLGcsaCxpLGosayxsLG0pe3ZhciBuPWEuVmlldy5leHRlbmQoe2VsOiJhcnRpY2xlLmdhbGxlcnkiLGRlZmF1bHRPcHRzOntsYXlvdXQ6Im1hc29ucnkifSxpbml0aWFsaXplOmZ1bmN0aW9uKGEpe3RoaXMuJGVsLmRhdGEoImdhbC1sYXlvdXQiKSYmKHRoaXMuZGVmYXVsdE9wdHMubGF5b3V0PXRoaXMuJGVsLmRhdGEoImdhbC1sYXlvdXQiKSksdGhpcy5vcHRpb25zPWIuZXh0ZW5kKHt9LHRoaXMuZGVmYXVsdE9wdHMsdGhpcy5vcHRpb25zKSx0aGlzLm1vZGVsPWMuY3JlYXRlKHRoaXMuJGVsLGEuZ2FsbGVyeU9wdHMpLHRoaXMuaW5pdFNlbGVjdGlvbigpLHRoaXMubW9kZWwmJih0aGlzLmluaXRUaHVtYkNvbnRhaW5lcigpLHRoaXMubW9kZWwuZmV0Y2goe3N1Y2Nlc3M6Yi5iaW5kKGZ1bmN0aW9uKGIpe3ZhciBjPXRoaXMuJGVsO2MuYWRkQ2xhc3MoImluaXRpYWxpemVkIiksYi5nZXQoImltYWdlcyIpLmlzRW1wdHkoKSYmYy5hZGRDbGFzcygiZW1wdHkiKSx0aGlzLmxpc3RlblRvKGIuZ2V0KCJpbWFnZXMiKSwicmVtb3ZlIixmdW5jdGlvbihhLGIpe2IuaXNFbXB0eSgpJiZjLmFkZENsYXNzKCJlbXB0eSIpfSksYS5vbkluaXQmJmEub25Jbml0KHRoaXMsdGhpcy5tb2RlbCl9LHRoaXMpfSksdGhpcy5pbml0U2xpZGVyKCksdGhpcy4kZWwuZGF0YSgiZ2FsbGVyeSIsdGhpcykpfSxpbml0U2VsZWN0aW9uOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy4kZWwuZGF0YSgiZ2FsLXNlbGVjdGlvbiIpO2EmJih0aGlzLnNlbGVjdGlvbj1pLmdldCh0aGlzLiRlbC5kYXRhKCJnYWwtc2VsZWN0aW9uIiksdGhpcy5tb2RlbCksdGhpcy5zZWxlY3Rpb25JbmRpY2F0b3I9bmV3IGsoe2NvbGxlY3Rpb246dGhpcy5zZWxlY3Rpb259KSx0aGlzLnNlbGVjdGlvblRvZ2dsZUJ1dHRvbj1uZXcgbCh7Y29sbGVjdGlvbjp0aGlzLnNlbGVjdGlvbn0pLHRoaXMuc2VsZWN0aW9uUGRmQnV0dG9uPW5ldyBtKHtjb2xsZWN0aW9uOnRoaXMuc2VsZWN0aW9ufSksbmV3IGooe2VsOiQoIi5zZWxlY3Rpb24gLmNvbXBvbmVudCIpLGNvbGxlY3Rpb246dGhpcy5zZWxlY3Rpb259KSk7dmFyIGM9e307JCgiW2RhdGEtc2VsZWN0aW9uXS5pbmRpY2F0b3IiKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIGE9JCh0aGlzKTtjW2EuZGF0YSgic2VsZWN0aW9uIildPXZvaWQgMD09PWNbYS5kYXRhKCJzZWxlY3Rpb24iKV0/YTpjW2EuZGF0YSgic2VsZWN0aW9uIildLmFkZChhKX0pLGIuZWFjaChjLGZ1bmN0aW9uKGEsYil7dmFyIGM9aS5nZXQoYix0aGlzLm1vZGVsKTtuZXcgayh7Y29sbGVjdGlvbjpjLGVsOmF9KSx2b2lkIDA9PT1jLmdhbGxlcnkmJmMuZmV0Y2goKX0sdGhpcyl9LGluaXRUaHVtYkNvbnRhaW5lcjpmdW5jdGlvbigpe3ZhciBhPXttb2RlbDp0aGlzLm1vZGVsLGl0ZW1TZWxlY3RvcjoiLnBob3RvIn07dGhpcy5jb250YWluZXJWaWV3PXRoaXMuJCgiLmNvbnRhaW5lci5waG90b3MgLnBob3RvIikubGVuZ3RoP25ldyBkKGEpOiJub25lIj09PXRoaXMub3B0aW9ucy5sYXlvdXQ/bmV3IGUoYSk6bmV3IGYoYSl9LGluaXRTbGlkZXI6ZnVuY3Rpb24oKXt0aGlzLnNsaWRlclZpZXc9bmV3IGcoe2VsOnRoaXMuJCgiLnNsaWRlciIpLG1vZGVsOnRoaXMubW9kZWx9KX0sZ2V0UmVzcG9uc2l2ZUFkYXB0ZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdm9pZCAwPT09dGhpcy5yZXNwb25zaXZlQWRhcHRlciYmKHRoaXMucmVzcG9uc2l2ZUFkYXB0ZXI9aCksdGhpcy5yZXNwb25zaXZlQWRhcHRlcn19KTtyZXR1cm4gbn0pLGMoImpxdWVyeSIsW10sZnVuY3Rpb24oKXtyZXR1cm4galF1ZXJ5fSksYigiZ2FsbGVyeS9hcHAiKX0pOw==",
                "headers": {
                    "Accept-Ranges": "bytes",
                    "Last-Modified": "Fri, 07 Nov 2014 02:03:48 GMT",
                    "Content-Length": "116257",
                    "Date": "Fri, 07 Nov 2014 02:03:48 GMT",
                    "Content-Type": "application/javascript"
                },
                "cookies": [],
                "mimeType": "script",
                "host": "localhost",
                "protocol": "http",
                "port": 9999,
                "inScope": false,
                "toolFlag": 16962,
                "referenceID": 0,
                "messageType": "response"
            },
            "messageType": "requestResponse"
        }
    ],
    "inScope": true,
    "messageType": "scanIssue"
}