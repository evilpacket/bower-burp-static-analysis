{
    "url": "http://localhost:9999/oieduardorabelo/sawpf/src/libs/mootools/1.3.2-compat.js",
    "host": "localhost",
    "port": 9999,
    "protocol": "http",
    "name": "Open redirection (DOM-based)",
    "issueType": 5243152,
    "severity": "Low",
    "confidence": "Firm",
    "issueBackground": "DOM-based open redirection vulnerabilities arise when a client-side script within an application's response reads data from a controllable part of the DOM (for example, the URL), and writes this data into the target of a redirection in an unsafe way. An attacker may be able to use the vulnerability to construct a URL which, if visited by another application user, will cause a redirection to an arbitrary external domain. This behavior can be leveraged to facilitate phishing attacks against users of the application. The ability to use an authentic application URL, targeting the correct domain with a valid SSL certificate (if SSL is used) lends credibility to the phishing attack because many users, even if they verify these features, will not notice the subsequent redirection to a different domain.<br><br><b>Note:</b> If an attacker is able to control the start of the string that is passed to the redirection API, then it may be possible to escalate this vulnerability into a JavaScript injection attack, by using a URL with the javascript: pseudo-protocol to execute arbitrary script code when the URL is processed by the browser.",
    "remediationBackground": "Static analysis of code to identify vulnerabilities of this kind may lead to false positives that are not actually exploitable. You should review the highlighted code and related execution paths to determine whether the application is indeed vulnerable, or whether mitigations are in place that would prevent exploitation.<br><br>The most effective way to avoid DOM-based open redirection vulnerabilities is not to dynamically set redirection targets using data that originated from any untrusted source. If the desired functionality of the application means that this behavior is unavoidable, then defenses must be implemented within the client-side code to prevent malicious data from introducing an arbitrary URL as a redirection target. In general, this is best achieved by using a whitelist of URLs that are permitted redirection targets, and strictly validating the target against this list before performing the redirection.",
    "issueDetail": "The application may be vulnerable to DOM-based open redirection. Data is read from <b>document.location.pathname</b> and written to <b>the 'open()' function of an XMLHttpRequest object</b> via the following statements:<ul><li>f=document.location.pathname;</li><li>f=f.substr(0,i);</li><li>n.open(e.toUpperCase(),f,this.options.async,this.options.user,this.options.password);</li></ul>",
    "requestResponses": [
        {
            "request": {
                "host": "localhost",
                "port": 9999,
                "protocol": "http",
                "url": "http://localhost:9999/oieduardorabelo/sawpf/src/libs/mootools/1.3.2-compat.js",
                "path": "/oieduardorabelo/sawpf/src/libs/mootools/1.3.2-compat.js",
                "httpVersion": "HTTP/1.1",
                "method": "GET",
                "headers": {
                    "Host": "localhost:9999"
                },
                "body": "",
                "raw": "R0VUIC9vaWVkdWFyZG9yYWJlbG8vc2F3cGYvc3JjL2xpYnMvbW9vdG9vbHMvMS4zLjItY29tcGF0LmpzIEhUVFAvMS4xDQpIb3N0OiBsb2NhbGhvc3Q6OTk5OQ0KDQo=",
                "inScope": true,
                "toolFlag": 16962,
                "referenceID": 0,
                "messageType": "request"
            },
            "response": {
                "statusCode": 200,
                "raw": "SFRUUC8xLjEgMjAwIE9LDQpDb250ZW50LUxlbmd0aDogODg1NDANCkFjY2VwdC1SYW5nZXM6IGJ5dGVzDQpDb250ZW50LVR5cGU6IGFwcGxpY2F0aW9uL2phdmFzY3JpcHQNCkRhdGU6IFNhdCwgMDggTm92IDIwMTQgMDM6NTU6NDEgR01UDQpMYXN0LU1vZGlmaWVkOiBTYXQsIDA4IE5vdiAyMDE0IDAzOjU1OjAwIEdNVA0KDQovKgotLS0KTW9vVG9vbHM6IHRoZSBqYXZhc2NyaXB0IGZyYW1ld29yawoKd2ViIGJ1aWxkOgogLSBodHRwOi8vbW9vdG9vbHMubmV0L2NvcmUvN2M1NmNmZWY5ZGRkY2YxNzBhNWQ2OGUzZmI2MWNmZDcKCnBhY2thZ2VyIGJ1aWxkOgogLSBwYWNrYWdlciBidWlsZCBDb3JlL0NvcmUgQ29yZS9BcnJheSBDb3JlL1N0cmluZyBDb3JlL051bWJlciBDb3JlL0Z1bmN0aW9uIENvcmUvT2JqZWN0IENvcmUvRXZlbnQgQ29yZS9Ccm93c2VyIENvcmUvQ2xhc3MgQ29yZS9DbGFzcy5FeHRyYXMgQ29yZS9TbGljay5QYXJzZXIgQ29yZS9TbGljay5GaW5kZXIgQ29yZS9FbGVtZW50IENvcmUvRWxlbWVudC5TdHlsZSBDb3JlL0VsZW1lbnQuRXZlbnQgQ29yZS9FbGVtZW50LkRpbWVuc2lvbnMgQ29yZS9GeCBDb3JlL0Z4LkNTUyBDb3JlL0Z4LlR3ZWVuIENvcmUvRnguTW9ycGggQ29yZS9GeC5UcmFuc2l0aW9ucyBDb3JlL1JlcXVlc3QgQ29yZS9SZXF1ZXN0LkhUTUwgQ29yZS9SZXF1ZXN0LkpTT04gQ29yZS9Db29raWUgQ29yZS9KU09OIENvcmUvRE9NUmVhZHkgQ29yZS9Td2lmZgoKY29weXJpZ2h0czoKICAtIFtNb29Ub29sc10oaHR0cDovL21vb3Rvb2xzLm5ldCkKCmxpY2Vuc2VzOgogIC0gW01JVCBMaWNlbnNlXShodHRwOi8vbW9vdG9vbHMubmV0L2xpY2Vuc2UudHh0KQouLi4KKi8KKGZ1bmN0aW9uKCl7dGhpcy5Nb29Ub29scz17dmVyc2lvbjoiMS4zLjIiLGJ1aWxkOiJjOWYxZmYxMGU5ZTdmYWNiNjVlOTQ4MTA0OWVkMWI0NTA5NTlkNTg3In07dmFyIGU9dGhpcy50eXBlT2Y9ZnVuY3Rpb24oaSl7aWYoaT09bnVsbCl7cmV0dXJuIm51bGwiO31pZihpLiRmYW1pbHkpe3JldHVybiBpLiRmYW1pbHkoKTsKfWlmKGkubm9kZU5hbWUpe2lmKGkubm9kZVR5cGU9PTEpe3JldHVybiJlbGVtZW50Ijt9aWYoaS5ub2RlVHlwZT09Myl7cmV0dXJuKC9cUy8pLnRlc3QoaS5ub2RlVmFsdWUpPyJ0ZXh0bm9kZSI6IndoaXRlc3BhY2UiO319ZWxzZXtpZih0eXBlb2YgaS5sZW5ndGg9PSJudW1iZXIiKXtpZihpLmNhbGxlZSl7cmV0dXJuImFyZ3VtZW50cyI7Cn1pZigiaXRlbSIgaW4gaSl7cmV0dXJuImNvbGxlY3Rpb24iO319fXJldHVybiB0eXBlb2YgaTt9O3ZhciB1PXRoaXMuaW5zdGFuY2VPZj1mdW5jdGlvbih3LGkpe2lmKHc9PW51bGwpe3JldHVybiBmYWxzZTt9dmFyIHY9dy4kY29uc3RydWN0b3J8fHcuY29uc3RydWN0b3I7CndoaWxlKHYpe2lmKHY9PT1pKXtyZXR1cm4gdHJ1ZTt9dj12LnBhcmVudDt9cmV0dXJuIHcgaW5zdGFuY2VvZiBpO307dmFyIGY9dGhpcy5GdW5jdGlvbjt2YXIgcj10cnVlO2Zvcih2YXIgcSBpbiB7dG9TdHJpbmc6MX0pe3I9bnVsbDt9aWYocil7cj1bImhhc093blByb3BlcnR5IiwidmFsdWVPZiIsImlzUHJvdG90eXBlT2YiLCJwcm9wZXJ0eUlzRW51bWVyYWJsZSIsInRvTG9jYWxlU3RyaW5nIiwidG9TdHJpbmciLCJjb25zdHJ1Y3RvciJdOwp9Zi5wcm90b3R5cGUub3ZlcmxvYWRTZXR0ZXI9ZnVuY3Rpb24odil7dmFyIGk9dGhpcztyZXR1cm4gZnVuY3Rpb24oeCx3KXtpZih4PT1udWxsKXtyZXR1cm4gdGhpczt9aWYodnx8dHlwZW9mIHghPSJzdHJpbmciKXtmb3IodmFyIHkgaW4geCl7aS5jYWxsKHRoaXMseSx4W3ldKTsKfWlmKHIpe2Zvcih2YXIgej1yLmxlbmd0aDt6LS07KXt5PXJbel07aWYoeC5oYXNPd25Qcm9wZXJ0eSh5KSl7aS5jYWxsKHRoaXMseSx4W3ldKTt9fX19ZWxzZXtpLmNhbGwodGhpcyx4LHcpO31yZXR1cm4gdGhpczt9O307Zi5wcm90b3R5cGUub3ZlcmxvYWRHZXR0ZXI9ZnVuY3Rpb24odil7dmFyIGk9dGhpczsKcmV0dXJuIGZ1bmN0aW9uKHgpe3ZhciB5LHc7aWYodnx8dHlwZW9mIHghPSJzdHJpbmciKXt5PXg7fWVsc2V7aWYoYXJndW1lbnRzLmxlbmd0aD4xKXt5PWFyZ3VtZW50czt9fWlmKHkpe3c9e307Zm9yKHZhciB6PTA7ejx5Lmxlbmd0aDt6Kyspe3dbeVt6XV09aS5jYWxsKHRoaXMseVt6XSk7Cn19ZWxzZXt3PWkuY2FsbCh0aGlzLHgpO31yZXR1cm4gdzt9O307Zi5wcm90b3R5cGUuZXh0ZW5kPWZ1bmN0aW9uKGksdil7dGhpc1tpXT12O30ub3ZlcmxvYWRTZXR0ZXIoKTtmLnByb3RvdHlwZS5pbXBsZW1lbnQ9ZnVuY3Rpb24oaSx2KXt0aGlzLnByb3RvdHlwZVtpXT12Owp9Lm92ZXJsb2FkU2V0dGVyKCk7dmFyIG89QXJyYXkucHJvdG90eXBlLnNsaWNlO2YuZnJvbT1mdW5jdGlvbihpKXtyZXR1cm4oZShpKT09ImZ1bmN0aW9uIik/aTpmdW5jdGlvbigpe3JldHVybiBpO307fTtBcnJheS5mcm9tPWZ1bmN0aW9uKGkpe2lmKGk9PW51bGwpe3JldHVybltdOwp9cmV0dXJuKGsuaXNFbnVtZXJhYmxlKGkpJiZ0eXBlb2YgaSE9InN0cmluZyIpPyhlKGkpPT0iYXJyYXkiKT9pOm8uY2FsbChpKTpbaV07fTtOdW1iZXIuZnJvbT1mdW5jdGlvbih2KXt2YXIgaT1wYXJzZUZsb2F0KHYpO3JldHVybiBpc0Zpbml0ZShpKT9pOm51bGw7Cn07U3RyaW5nLmZyb209ZnVuY3Rpb24oaSl7cmV0dXJuIGkrIiI7fTtmLmltcGxlbWVudCh7aGlkZTpmdW5jdGlvbigpe3RoaXMuJGhpZGRlbj10cnVlO3JldHVybiB0aGlzO30scHJvdGVjdDpmdW5jdGlvbigpe3RoaXMuJHByb3RlY3RlZD10cnVlO3JldHVybiB0aGlzOwp9fSk7dmFyIGs9dGhpcy5UeXBlPWZ1bmN0aW9uKHgsdyl7aWYoeCl7dmFyIHY9eC50b0xvd2VyQ2FzZSgpO3ZhciBpPWZ1bmN0aW9uKHkpe3JldHVybihlKHkpPT12KTt9O2tbImlzIit4XT1pO2lmKHchPW51bGwpe3cucHJvdG90eXBlLiRmYW1pbHk9KGZ1bmN0aW9uKCl7cmV0dXJuIHY7Cn0pLmhpZGUoKTt3LnR5cGU9aTt9fWlmKHc9PW51bGwpe3JldHVybiBudWxsO313LmV4dGVuZCh0aGlzKTt3LiRjb25zdHJ1Y3Rvcj1rO3cucHJvdG90eXBlLiRjb25zdHJ1Y3Rvcj13O3JldHVybiB3O307dmFyIHA9T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztrLmlzRW51bWVyYWJsZT1mdW5jdGlvbihpKXtyZXR1cm4oaSE9bnVsbCYmdHlwZW9mIGkubGVuZ3RoPT0ibnVtYmVyIiYmcC5jYWxsKGkpIT0iW29iamVjdCBGdW5jdGlvbl0iKTsKfTt2YXIgYj17fTt2YXIgZD1mdW5jdGlvbihpKXt2YXIgdj1lKGkucHJvdG90eXBlKTtyZXR1cm4gYlt2XXx8KGJbdl09W10pO307dmFyIGg9ZnVuY3Rpb24odyxBKXtpZihBJiZBLiRoaWRkZW4pe3JldHVybjt9dmFyIHY9ZCh0aGlzKTtmb3IodmFyIHg9MDt4PHYubGVuZ3RoOwp4Kyspe3ZhciB6PXZbeF07aWYoZSh6KT09InR5cGUiKXtoLmNhbGwoeix3LEEpO31lbHNle3ouY2FsbCh0aGlzLHcsQSk7fX12YXIgeT10aGlzLnByb3RvdHlwZVt3XTtpZih5PT1udWxsfHwheS4kcHJvdGVjdGVkKXt0aGlzLnByb3RvdHlwZVt3XT1BO31pZih0aGlzW3ddPT1udWxsJiZlKEEpPT0iZnVuY3Rpb24iKXt0LmNhbGwodGhpcyx3LGZ1bmN0aW9uKGkpe3JldHVybiBBLmFwcGx5KGksby5jYWxsKGFyZ3VtZW50cywxKSk7Cn0pO319O3ZhciB0PWZ1bmN0aW9uKGksdyl7aWYodyYmdy4kaGlkZGVuKXtyZXR1cm47fXZhciB2PXRoaXNbaV07aWYodj09bnVsbHx8IXYuJHByb3RlY3RlZCl7dGhpc1tpXT13O319O2suaW1wbGVtZW50KHtpbXBsZW1lbnQ6aC5vdmVybG9hZFNldHRlcigpLGV4dGVuZDp0Lm92ZXJsb2FkU2V0dGVyKCksYWxpYXM6ZnVuY3Rpb24oaSx2KXtoLmNhbGwodGhpcyxpLHRoaXMucHJvdG90eXBlW3ZdKTsKfS5vdmVybG9hZFNldHRlcigpLG1pcnJvcjpmdW5jdGlvbihpKXtkKHRoaXMpLnB1c2goaSk7cmV0dXJuIHRoaXM7fX0pO25ldyBrKCJUeXBlIixrKTt2YXIgYz1mdW5jdGlvbih2LHoseCl7dmFyIHc9KHohPU9iamVjdCksRD16LnByb3RvdHlwZTtpZih3KXt6PW5ldyBrKHYseik7Cn1mb3IodmFyIEE9MCx5PXgubGVuZ3RoO0E8eTtBKyspe3ZhciBFPXhbQV0sQz16W0VdLEI9RFtFXTtpZihDKXtDLnByb3RlY3QoKTt9aWYodyYmQil7ZGVsZXRlIERbRV07RFtFXT1CLnByb3RlY3QoKTt9fWlmKHcpe3ouaW1wbGVtZW50KEQpO31yZXR1cm4gYzt9O2MoIlN0cmluZyIsU3RyaW5nLFsiY2hhckF0IiwiY2hhckNvZGVBdCIsImNvbmNhdCIsImluZGV4T2YiLCJsYXN0SW5kZXhPZiIsIm1hdGNoIiwicXVvdGUiLCJyZXBsYWNlIiwic2VhcmNoIiwic2xpY2UiLCJzcGxpdCIsInN1YnN0ciIsInN1YnN0cmluZyIsInRvTG93ZXJDYXNlIiwidG9VcHBlckNhc2UiXSkoIkFycmF5IixBcnJheSxbInBvcCIsInB1c2giLCJyZXZlcnNlIiwic2hpZnQiLCJzb3J0Iiwic3BsaWNlIiwidW5zaGlmdCIsImNvbmNhdCIsImpvaW4iLCJzbGljZSIsImluZGV4T2YiLCJsYXN0SW5kZXhPZiIsImZpbHRlciIsImZvckVhY2giLCJldmVyeSIsIm1hcCIsInNvbWUiLCJyZWR1Y2UiLCJyZWR1Y2VSaWdodCJdKSgiTnVtYmVyIixOdW1iZXIsWyJ0b0V4cG9uZW50aWFsIiwidG9GaXhlZCIsInRvTG9jYWxlU3RyaW5nIiwidG9QcmVjaXNpb24iXSkoIkZ1bmN0aW9uIixmLFsiYXBwbHkiLCJjYWxsIiwiYmluZCJdKSgiUmVnRXhwIixSZWdFeHAsWyJleGVjIiwidGVzdCJdKSgiT2JqZWN0IixPYmplY3QsWyJjcmVhdGUiLCJkZWZpbmVQcm9wZXJ0eSIsImRlZmluZVByb3BlcnRpZXMiLCJrZXlzIiwiZ2V0UHJvdG90eXBlT2YiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJnZXRPd25Qcm9wZXJ0eU5hbWVzIiwicHJldmVudEV4dGVuc2lvbnMiLCJpc0V4dGVuc2libGUiLCJzZWFsIiwiaXNTZWFsZWQiLCJmcmVlemUiLCJpc0Zyb3plbiJdKSgiRGF0ZSIsRGF0ZSxbIm5vdyJdKTsKT2JqZWN0LmV4dGVuZD10Lm92ZXJsb2FkU2V0dGVyKCk7RGF0ZS5leHRlbmQoIm5vdyIsZnVuY3Rpb24oKXtyZXR1cm4gKyhuZXcgRGF0ZSk7fSk7bmV3IGsoIkJvb2xlYW4iLEJvb2xlYW4pO051bWJlci5wcm90b3R5cGUuJGZhbWlseT1mdW5jdGlvbigpe3JldHVybiBpc0Zpbml0ZSh0aGlzKT8ibnVtYmVyIjoibnVsbCI7Cn0uaGlkZSgpO051bWJlci5leHRlbmQoInJhbmRvbSIsZnVuY3Rpb24odixpKXtyZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKihpLXYrMSkrdik7fSk7dmFyIGw9T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtPYmplY3QuZXh0ZW5kKCJmb3JFYWNoIixmdW5jdGlvbihpLHcseCl7Zm9yKHZhciB2IGluIGkpe2lmKGwuY2FsbChpLHYpKXt3LmNhbGwoeCxpW3ZdLHYsaSk7Cn19fSk7T2JqZWN0LmVhY2g9T2JqZWN0LmZvckVhY2g7QXJyYXkuaW1wbGVtZW50KHtmb3JFYWNoOmZ1bmN0aW9uKHgseSl7Zm9yKHZhciB3PTAsdj10aGlzLmxlbmd0aDt3PHY7dysrKXtpZih3IGluIHRoaXMpe3guY2FsbCh5LHRoaXNbd10sdyx0aGlzKTt9fX0sZWFjaDpmdW5jdGlvbihpLHYpe0FycmF5LmZvckVhY2godGhpcyxpLHYpOwpyZXR1cm4gdGhpczt9fSk7dmFyIHM9ZnVuY3Rpb24oaSl7c3dpdGNoKGUoaSkpe2Nhc2UiYXJyYXkiOnJldHVybiBpLmNsb25lKCk7Y2FzZSJvYmplY3QiOnJldHVybiBPYmplY3QuY2xvbmUoaSk7ZGVmYXVsdDpyZXR1cm4gaTt9fTtBcnJheS5pbXBsZW1lbnQoImNsb25lIixmdW5jdGlvbigpe3ZhciB2PXRoaXMubGVuZ3RoLHc9bmV3IEFycmF5KHYpOwp3aGlsZSh2LS0pe3dbdl09cyh0aGlzW3ZdKTt9cmV0dXJuIHc7fSk7dmFyIGE9ZnVuY3Rpb24odixpLHcpe3N3aXRjaChlKHcpKXtjYXNlIm9iamVjdCI6aWYoZSh2W2ldKT09Im9iamVjdCIpe09iamVjdC5tZXJnZSh2W2ldLHcpO31lbHNle3ZbaV09T2JqZWN0LmNsb25lKHcpOwp9YnJlYWs7Y2FzZSJhcnJheSI6dltpXT13LmNsb25lKCk7YnJlYWs7ZGVmYXVsdDp2W2ldPXc7fXJldHVybiB2O307T2JqZWN0LmV4dGVuZCh7bWVyZ2U6ZnVuY3Rpb24oQyx5LHgpe2lmKGUoeSk9PSJzdHJpbmciKXtyZXR1cm4gYShDLHkseCk7fWZvcih2YXIgQj0xLHc9YXJndW1lbnRzLmxlbmd0aDsKQjx3O0IrKyl7dmFyIHo9YXJndW1lbnRzW0JdO2Zvcih2YXIgQSBpbiB6KXthKEMsQSx6W0FdKTt9fXJldHVybiBDO30sY2xvbmU6ZnVuY3Rpb24oaSl7dmFyIHc9e307Zm9yKHZhciB2IGluIGkpe3dbdl09cyhpW3ZdKTt9cmV0dXJuIHc7fSxhcHBlbmQ6ZnVuY3Rpb24oeil7Zm9yKHZhciB5PTEsdz1hcmd1bWVudHMubGVuZ3RoOwp5PHc7eSsrKXt2YXIgdj1hcmd1bWVudHNbeV18fHt9O2Zvcih2YXIgeCBpbiB2KXt6W3hdPXZbeF07fX1yZXR1cm4gejt9fSk7WyJPYmplY3QiLCJXaGl0ZVNwYWNlIiwiVGV4dE5vZGUiLCJDb2xsZWN0aW9uIiwiQXJndW1lbnRzIl0uZWFjaChmdW5jdGlvbihpKXtuZXcgayhpKTsKfSk7dmFyIGo9RGF0ZS5ub3coKTtTdHJpbmcuZXh0ZW5kKCJ1bmlxdWVJRCIsZnVuY3Rpb24oKXtyZXR1cm4oaisrKS50b1N0cmluZygzNik7fSk7dmFyIGc9dGhpcy5IYXNoPW5ldyBrKCJIYXNoIixmdW5jdGlvbihpKXtpZihlKGkpPT0iaGFzaCIpe2k9T2JqZWN0LmNsb25lKGkuZ2V0Q2xlYW4oKSk7Cn1mb3IodmFyIHYgaW4gaSl7dGhpc1t2XT1pW3ZdO31yZXR1cm4gdGhpczt9KTtnLmltcGxlbWVudCh7Zm9yRWFjaDpmdW5jdGlvbihpLHYpe09iamVjdC5mb3JFYWNoKHRoaXMsaSx2KTt9LGdldENsZWFuOmZ1bmN0aW9uKCl7dmFyIHY9e307Zm9yKHZhciBpIGluIHRoaXMpe2lmKHRoaXMuaGFzT3duUHJvcGVydHkoaSkpe3ZbaV09dGhpc1tpXTsKfX1yZXR1cm4gdjt9LGdldExlbmd0aDpmdW5jdGlvbigpe3ZhciB2PTA7Zm9yKHZhciBpIGluIHRoaXMpe2lmKHRoaXMuaGFzT3duUHJvcGVydHkoaSkpe3YrKzt9fXJldHVybiB2O319KTtnLmFsaWFzKCJlYWNoIiwiZm9yRWFjaCIpO09iamVjdC50eXBlPWsuaXNPYmplY3Q7CnZhciBuPXRoaXMuTmF0aXZlPWZ1bmN0aW9uKGkpe3JldHVybiBuZXcgayhpLm5hbWUsaS5pbml0aWFsaXplKTt9O24udHlwZT1rLnR5cGU7bi5pbXBsZW1lbnQ9ZnVuY3Rpb24oeCx2KXtmb3IodmFyIHc9MDt3PHgubGVuZ3RoO3crKyl7eFt3XS5pbXBsZW1lbnQodik7Cn1yZXR1cm4gbjt9O3ZhciBtPUFycmF5LnR5cGU7QXJyYXkudHlwZT1mdW5jdGlvbihpKXtyZXR1cm4gdShpLEFycmF5KXx8bShpKTt9O3RoaXMuJEE9ZnVuY3Rpb24oaSl7cmV0dXJuIEFycmF5LmZyb20oaSkuc2xpY2UoKTt9O3RoaXMuJGFyZ3VtZW50cz1mdW5jdGlvbih2KXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gYXJndW1lbnRzW3ZdOwp9O307dGhpcy4kY2hrPWZ1bmN0aW9uKGkpe3JldHVybiAhIShpfHxpPT09MCk7fTt0aGlzLiRjbGVhcj1mdW5jdGlvbihpKXtjbGVhclRpbWVvdXQoaSk7Y2xlYXJJbnRlcnZhbChpKTtyZXR1cm4gbnVsbDt9O3RoaXMuJGRlZmluZWQ9ZnVuY3Rpb24oaSl7cmV0dXJuKGkhPW51bGwpOwp9O3RoaXMuJGVhY2g9ZnVuY3Rpb24odyx2LHgpe3ZhciBpPWUodyk7KChpPT0iYXJndW1lbnRzInx8aT09ImNvbGxlY3Rpb24ifHxpPT0iYXJyYXkifHxpPT0iZWxlbWVudHMiKT9BcnJheTpPYmplY3QpLmVhY2godyx2LHgpO307dGhpcy4kZW1wdHk9ZnVuY3Rpb24oKXt9Owp0aGlzLiRleHRlbmQ9ZnVuY3Rpb24odixpKXtyZXR1cm4gT2JqZWN0LmFwcGVuZCh2LGkpO307dGhpcy4kSD1mdW5jdGlvbihpKXtyZXR1cm4gbmV3IGcoaSk7fTt0aGlzLiRtZXJnZT1mdW5jdGlvbigpe3ZhciBpPUFycmF5LnNsaWNlKGFyZ3VtZW50cyk7aS51bnNoaWZ0KHt9KTsKcmV0dXJuIE9iamVjdC5tZXJnZS5hcHBseShudWxsLGkpO307dGhpcy4kbGFtYmRhPWYuZnJvbTt0aGlzLiRtaXhpbj1PYmplY3QubWVyZ2U7dGhpcy4kcmFuZG9tPU51bWJlci5yYW5kb207dGhpcy4kc3BsYXQ9QXJyYXkuZnJvbTt0aGlzLiR0aW1lPURhdGUubm93Owp0aGlzLiR0eXBlPWZ1bmN0aW9uKGkpe3ZhciB2PWUoaSk7aWYodj09ImVsZW1lbnRzIil7cmV0dXJuImFycmF5Ijt9cmV0dXJuKHY9PSJudWxsIik/ZmFsc2U6djt9O3RoaXMuJHVubGluaz1mdW5jdGlvbihpKXtzd2l0Y2goZShpKSl7Y2FzZSJvYmplY3QiOnJldHVybiBPYmplY3QuY2xvbmUoaSk7CmNhc2UiYXJyYXkiOnJldHVybiBBcnJheS5jbG9uZShpKTtjYXNlImhhc2giOnJldHVybiBuZXcgZyhpKTtkZWZhdWx0OnJldHVybiBpO319O30pKCk7QXJyYXkuaW1wbGVtZW50KHtldmVyeTpmdW5jdGlvbihjLGQpe2Zvcih2YXIgYj0wLGE9dGhpcy5sZW5ndGg7YjxhOwpiKyspe2lmKChiIGluIHRoaXMpJiYhYy5jYWxsKGQsdGhpc1tiXSxiLHRoaXMpKXtyZXR1cm4gZmFsc2U7fX1yZXR1cm4gdHJ1ZTt9LGZpbHRlcjpmdW5jdGlvbihkLGUpe3ZhciBjPVtdO2Zvcih2YXIgYj0wLGE9dGhpcy5sZW5ndGg7YjxhO2IrKyl7aWYoKGIgaW4gdGhpcykmJmQuY2FsbChlLHRoaXNbYl0sYix0aGlzKSl7Yy5wdXNoKHRoaXNbYl0pOwp9fXJldHVybiBjO30saW5kZXhPZjpmdW5jdGlvbihjLGQpe3ZhciBhPXRoaXMubGVuZ3RoO2Zvcih2YXIgYj0oZDwwKT9NYXRoLm1heCgwLGErZCk6ZHx8MDtiPGE7YisrKXtpZih0aGlzW2JdPT09Yyl7cmV0dXJuIGI7fX1yZXR1cm4gLTE7fSxtYXA6ZnVuY3Rpb24oZCxlKXt2YXIgYz1bXTsKZm9yKHZhciBiPTAsYT10aGlzLmxlbmd0aDtiPGE7YisrKXtpZihiIGluIHRoaXMpe2NbYl09ZC5jYWxsKGUsdGhpc1tiXSxiLHRoaXMpO319cmV0dXJuIGM7fSxzb21lOmZ1bmN0aW9uKGMsZCl7Zm9yKHZhciBiPTAsYT10aGlzLmxlbmd0aDtiPGE7YisrKXtpZigoYiBpbiB0aGlzKSYmYy5jYWxsKGQsdGhpc1tiXSxiLHRoaXMpKXtyZXR1cm4gdHJ1ZTsKfX1yZXR1cm4gZmFsc2U7fSxjbGVhbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLmZpbHRlcihmdW5jdGlvbihhKXtyZXR1cm4gYSE9bnVsbDt9KTt9LGludm9rZTpmdW5jdGlvbihhKXt2YXIgYj1BcnJheS5zbGljZShhcmd1bWVudHMsMSk7cmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uKGMpe3JldHVybiBjW2FdLmFwcGx5KGMsYik7Cn0pO30sYXNzb2NpYXRlOmZ1bmN0aW9uKGMpe3ZhciBkPXt9LGI9TWF0aC5taW4odGhpcy5sZW5ndGgsYy5sZW5ndGgpO2Zvcih2YXIgYT0wO2E8YjthKyspe2RbY1thXV09dGhpc1thXTt9cmV0dXJuIGQ7fSxsaW5rOmZ1bmN0aW9uKGMpe3ZhciBhPXt9O2Zvcih2YXIgZT0wLGI9dGhpcy5sZW5ndGg7CmU8YjtlKyspe2Zvcih2YXIgZCBpbiBjKXtpZihjW2RdKHRoaXNbZV0pKXthW2RdPXRoaXNbZV07ZGVsZXRlIGNbZF07YnJlYWs7fX19cmV0dXJuIGE7fSxjb250YWluczpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLmluZGV4T2YoYSxiKSE9LTE7fSxhcHBlbmQ6ZnVuY3Rpb24oYSl7dGhpcy5wdXNoLmFwcGx5KHRoaXMsYSk7CnJldHVybiB0aGlzO30sZ2V0TGFzdDpmdW5jdGlvbigpe3JldHVybih0aGlzLmxlbmd0aCk/dGhpc1t0aGlzLmxlbmd0aC0xXTpudWxsO30sZ2V0UmFuZG9tOmZ1bmN0aW9uKCl7cmV0dXJuKHRoaXMubGVuZ3RoKT90aGlzW051bWJlci5yYW5kb20oMCx0aGlzLmxlbmd0aC0xKV06bnVsbDsKfSxpbmNsdWRlOmZ1bmN0aW9uKGEpe2lmKCF0aGlzLmNvbnRhaW5zKGEpKXt0aGlzLnB1c2goYSk7fXJldHVybiB0aGlzO30sY29tYmluZTpmdW5jdGlvbihjKXtmb3IodmFyIGI9MCxhPWMubGVuZ3RoO2I8YTtiKyspe3RoaXMuaW5jbHVkZShjW2JdKTt9cmV0dXJuIHRoaXM7Cn0sZXJhc2U6ZnVuY3Rpb24oYil7Zm9yKHZhciBhPXRoaXMubGVuZ3RoO2EtLTspe2lmKHRoaXNbYV09PT1iKXt0aGlzLnNwbGljZShhLDEpO319cmV0dXJuIHRoaXM7fSxlbXB0eTpmdW5jdGlvbigpe3RoaXMubGVuZ3RoPTA7cmV0dXJuIHRoaXM7fSxmbGF0dGVuOmZ1bmN0aW9uKCl7dmFyIGQ9W107CmZvcih2YXIgYj0wLGE9dGhpcy5sZW5ndGg7YjxhO2IrKyl7dmFyIGM9dHlwZU9mKHRoaXNbYl0pO2lmKGM9PSJudWxsIil7Y29udGludWU7fWQ9ZC5jb25jYXQoKGM9PSJhcnJheSJ8fGM9PSJjb2xsZWN0aW9uInx8Yz09ImFyZ3VtZW50cyJ8fGluc3RhbmNlT2YodGhpc1tiXSxBcnJheSkpP0FycmF5LmZsYXR0ZW4odGhpc1tiXSk6dGhpc1tiXSk7Cn1yZXR1cm4gZDt9LHBpY2s6ZnVuY3Rpb24oKXtmb3IodmFyIGI9MCxhPXRoaXMubGVuZ3RoO2I8YTtiKyspe2lmKHRoaXNbYl0hPW51bGwpe3JldHVybiB0aGlzW2JdO319cmV0dXJuIG51bGw7fSxoZXhUb1JnYjpmdW5jdGlvbihiKXtpZih0aGlzLmxlbmd0aCE9Myl7cmV0dXJuIG51bGw7Cn12YXIgYT10aGlzLm1hcChmdW5jdGlvbihjKXtpZihjLmxlbmd0aD09MSl7Yys9Yzt9cmV0dXJuIGMudG9JbnQoMTYpO30pO3JldHVybihiKT9hOiJyZ2IoIithKyIpIjt9LHJnYlRvSGV4OmZ1bmN0aW9uKGQpe2lmKHRoaXMubGVuZ3RoPDMpe3JldHVybiBudWxsO31pZih0aGlzLmxlbmd0aD09NCYmdGhpc1szXT09MCYmIWQpe3JldHVybiJ0cmFuc3BhcmVudCI7Cn12YXIgYj1bXTtmb3IodmFyIGE9MDthPDM7YSsrKXt2YXIgYz0odGhpc1thXS0wKS50b1N0cmluZygxNik7Yi5wdXNoKChjLmxlbmd0aD09MSk/IjAiK2M6Yyk7fXJldHVybihkKT9iOiIjIitiLmpvaW4oIiIpO319KTtBcnJheS5hbGlhcygiZXh0ZW5kIiwiYXBwZW5kIik7CnZhciAkcGljaz1mdW5jdGlvbigpe3JldHVybiBBcnJheS5mcm9tKGFyZ3VtZW50cykucGljaygpO307U3RyaW5nLmltcGxlbWVudCh7dGVzdDpmdW5jdGlvbihhLGIpe3JldHVybigodHlwZU9mKGEpPT0icmVnZXhwIik/YTpuZXcgUmVnRXhwKCIiK2EsYikpLnRlc3QodGhpcyk7Cn0sY29udGFpbnM6ZnVuY3Rpb24oYSxiKXtyZXR1cm4oYik/KGIrdGhpcytiKS5pbmRleE9mKGIrYStiKT4tMTp0aGlzLmluZGV4T2YoYSk+LTE7fSx0cmltOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmVwbGFjZSgvXlxzK3xccyskL2csIiIpO30sY2xlYW46ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yZXBsYWNlKC9ccysvZywiICIpLnRyaW0oKTsKfSxjYW1lbENhc2U6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yZXBsYWNlKC8tXEQvZyxmdW5jdGlvbihhKXtyZXR1cm4gYS5jaGFyQXQoMSkudG9VcHBlckNhc2UoKTt9KTt9LGh5cGhlbmF0ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnJlcGxhY2UoL1tBLVpdL2csZnVuY3Rpb24oYSl7cmV0dXJuKCItIithLmNoYXJBdCgwKS50b0xvd2VyQ2FzZSgpKTsKfSk7fSxjYXBpdGFsaXplOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmVwbGFjZSgvXGJbYS16XS9nLGZ1bmN0aW9uKGEpe3JldHVybiBhLnRvVXBwZXJDYXNlKCk7fSk7fSxlc2NhcGVSZWdFeHA6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yZXBsYWNlKC8oWy0uKis/XiR7fSgpfFtcXVwvXFxdKS9nLCJcXCQxIik7Cn0sdG9JbnQ6ZnVuY3Rpb24oYSl7cmV0dXJuIHBhcnNlSW50KHRoaXMsYXx8MTApO30sdG9GbG9hdDpmdW5jdGlvbigpe3JldHVybiBwYXJzZUZsb2F0KHRoaXMpO30saGV4VG9SZ2I6ZnVuY3Rpb24oYil7dmFyIGE9dGhpcy5tYXRjaCgvXiM/KFx3ezEsMn0pKFx3ezEsMn0pKFx3ezEsMn0pJC8pOwpyZXR1cm4oYSk/YS5zbGljZSgxKS5oZXhUb1JnYihiKTpudWxsO30scmdiVG9IZXg6ZnVuY3Rpb24oYil7dmFyIGE9dGhpcy5tYXRjaCgvXGR7MSwzfS9nKTtyZXR1cm4oYSk/YS5yZ2JUb0hleChiKTpudWxsO30sc3Vic3RpdHV0ZTpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLnJlcGxhY2UoYnx8KC9cXD9ceyhbXnt9XSspXH0vZyksZnVuY3Rpb24oZCxjKXtpZihkLmNoYXJBdCgwKT09IlxcIil7cmV0dXJuIGQuc2xpY2UoMSk7Cn1yZXR1cm4oYVtjXSE9bnVsbCk/YVtjXToiIjt9KTt9fSk7TnVtYmVyLmltcGxlbWVudCh7bGltaXQ6ZnVuY3Rpb24oYixhKXtyZXR1cm4gTWF0aC5taW4oYSxNYXRoLm1heChiLHRoaXMpKTt9LHJvdW5kOmZ1bmN0aW9uKGEpe2E9TWF0aC5wb3coMTAsYXx8MCkudG9GaXhlZChhPDA/LWE6MCk7CnJldHVybiBNYXRoLnJvdW5kKHRoaXMqYSkvYTt9LHRpbWVzOmZ1bmN0aW9uKGIsYyl7Zm9yKHZhciBhPTA7YTx0aGlzO2ErKyl7Yi5jYWxsKGMsYSx0aGlzKTt9fSx0b0Zsb2F0OmZ1bmN0aW9uKCl7cmV0dXJuIHBhcnNlRmxvYXQodGhpcyk7fSx0b0ludDpmdW5jdGlvbihhKXtyZXR1cm4gcGFyc2VJbnQodGhpcyxhfHwxMCk7Cn19KTtOdW1iZXIuYWxpYXMoImVhY2giLCJ0aW1lcyIpOyhmdW5jdGlvbihiKXt2YXIgYT17fTtiLmVhY2goZnVuY3Rpb24oYyl7aWYoIU51bWJlcltjXSl7YVtjXT1mdW5jdGlvbigpe3JldHVybiBNYXRoW2NdLmFwcGx5KG51bGwsW3RoaXNdLmNvbmNhdChBcnJheS5mcm9tKGFyZ3VtZW50cykpKTsKfTt9fSk7TnVtYmVyLmltcGxlbWVudChhKTt9KShbImFicyIsImFjb3MiLCJhc2luIiwiYXRhbiIsImF0YW4yIiwiY2VpbCIsImNvcyIsImV4cCIsImZsb29yIiwibG9nIiwibWF4IiwibWluIiwicG93Iiwic2luIiwic3FydCIsInRhbiJdKTtGdW5jdGlvbi5leHRlbmQoe2F0dGVtcHQ6ZnVuY3Rpb24oKXtmb3IodmFyIGI9MCxhPWFyZ3VtZW50cy5sZW5ndGg7CmI8YTtiKyspe3RyeXtyZXR1cm4gYXJndW1lbnRzW2JdKCk7fWNhdGNoKGMpe319cmV0dXJuIG51bGw7fX0pO0Z1bmN0aW9uLmltcGxlbWVudCh7YXR0ZW1wdDpmdW5jdGlvbihhLGMpe3RyeXtyZXR1cm4gdGhpcy5hcHBseShjLEFycmF5LmZyb20oYSkpO31jYXRjaChiKXt9cmV0dXJuIG51bGw7Cn0sYmluZDpmdW5jdGlvbihjKXt2YXIgYT10aGlzLGI9KGFyZ3VtZW50cy5sZW5ndGg+MSk/QXJyYXkuc2xpY2UoYXJndW1lbnRzLDEpOm51bGw7cmV0dXJuIGZ1bmN0aW9uKCl7aWYoIWImJiFhcmd1bWVudHMubGVuZ3RoKXtyZXR1cm4gYS5jYWxsKGMpO31pZihiJiZhcmd1bWVudHMubGVuZ3RoKXtyZXR1cm4gYS5hcHBseShjLGIuY29uY2F0KEFycmF5LmZyb20oYXJndW1lbnRzKSkpOwp9cmV0dXJuIGEuYXBwbHkoYyxifHxhcmd1bWVudHMpO307fSxwYXNzOmZ1bmN0aW9uKGIsYyl7dmFyIGE9dGhpcztpZihiIT1udWxsKXtiPUFycmF5LmZyb20oYik7fXJldHVybiBmdW5jdGlvbigpe3JldHVybiBhLmFwcGx5KGMsYnx8YXJndW1lbnRzKTt9O30sZGVsYXk6ZnVuY3Rpb24oYixjLGEpe3JldHVybiBzZXRUaW1lb3V0KHRoaXMucGFzcygoYT09bnVsbD9bXTphKSxjKSxiKTsKfSxwZXJpb2RpY2FsOmZ1bmN0aW9uKGMsYixhKXtyZXR1cm4gc2V0SW50ZXJ2YWwodGhpcy5wYXNzKChhPT1udWxsP1tdOmEpLGIpLGMpO319KTtkZWxldGUgRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQ7RnVuY3Rpb24uaW1wbGVtZW50KHtjcmVhdGU6ZnVuY3Rpb24oYil7dmFyIGE9dGhpczsKYj1ifHx7fTtyZXR1cm4gZnVuY3Rpb24oZCl7dmFyIGM9Yi5hcmd1bWVudHM7Yz0oYyE9bnVsbCk/QXJyYXkuZnJvbShjKTpBcnJheS5zbGljZShhcmd1bWVudHMsKGIuZXZlbnQpPzE6MCk7aWYoYi5ldmVudCl7Yz1bZHx8d2luZG93LmV2ZW50XS5leHRlbmQoYyk7fXZhciBlPWZ1bmN0aW9uKCl7cmV0dXJuIGEuYXBwbHkoYi5iaW5kfHxudWxsLGMpOwp9O2lmKGIuZGVsYXkpe3JldHVybiBzZXRUaW1lb3V0KGUsYi5kZWxheSk7fWlmKGIucGVyaW9kaWNhbCl7cmV0dXJuIHNldEludGVydmFsKGUsYi5wZXJpb2RpY2FsKTt9aWYoYi5hdHRlbXB0KXtyZXR1cm4gRnVuY3Rpb24uYXR0ZW1wdChlKTt9cmV0dXJuIGUoKTt9Owp9LGJpbmQ6ZnVuY3Rpb24oYyxiKXt2YXIgYT10aGlzO2lmKGIhPW51bGwpe2I9QXJyYXkuZnJvbShiKTt9cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGEuYXBwbHkoYyxifHxhcmd1bWVudHMpO307fSxiaW5kV2l0aEV2ZW50OmZ1bmN0aW9uKGMsYil7dmFyIGE9dGhpczsKaWYoYiE9bnVsbCl7Yj1BcnJheS5mcm9tKGIpO31yZXR1cm4gZnVuY3Rpb24oZCl7cmV0dXJuIGEuYXBwbHkoYywoYj09bnVsbCk/YXJndW1lbnRzOltkXS5jb25jYXQoYikpO307fSxydW46ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5hcHBseShiLEFycmF5LmZyb20oYSkpOwp9fSk7dmFyICR0cnk9RnVuY3Rpb24uYXR0ZW1wdDsoZnVuY3Rpb24oKXt2YXIgYT1PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O09iamVjdC5leHRlbmQoe3N1YnNldDpmdW5jdGlvbihkLGcpe3ZhciBmPXt9O2Zvcih2YXIgZT0wLGI9Zy5sZW5ndGg7ZTxiOwplKyspe3ZhciBjPWdbZV07aWYoYyBpbiBkKXtmW2NdPWRbY107fX1yZXR1cm4gZjt9LG1hcDpmdW5jdGlvbihiLGUsZil7dmFyIGQ9e307Zm9yKHZhciBjIGluIGIpe2lmKGEuY2FsbChiLGMpKXtkW2NdPWUuY2FsbChmLGJbY10sYyxiKTt9fXJldHVybiBkO30sZmlsdGVyOmZ1bmN0aW9uKGIsZSxnKXt2YXIgZD17fTsKZm9yKHZhciBjIGluIGIpe3ZhciBmPWJbY107aWYoYS5jYWxsKGIsYykmJmUuY2FsbChnLGYsYyxiKSl7ZFtjXT1mO319cmV0dXJuIGQ7fSxldmVyeTpmdW5jdGlvbihiLGQsZSl7Zm9yKHZhciBjIGluIGIpe2lmKGEuY2FsbChiLGMpJiYhZC5jYWxsKGUsYltjXSxjKSl7cmV0dXJuIGZhbHNlOwp9fXJldHVybiB0cnVlO30sc29tZTpmdW5jdGlvbihiLGQsZSl7Zm9yKHZhciBjIGluIGIpe2lmKGEuY2FsbChiLGMpJiZkLmNhbGwoZSxiW2NdLGMpKXtyZXR1cm4gdHJ1ZTt9fXJldHVybiBmYWxzZTt9LGtleXM6ZnVuY3Rpb24oYil7dmFyIGQ9W107Zm9yKHZhciBjIGluIGIpe2lmKGEuY2FsbChiLGMpKXtkLnB1c2goYyk7Cn19cmV0dXJuIGQ7fSx2YWx1ZXM6ZnVuY3Rpb24oYyl7dmFyIGI9W107Zm9yKHZhciBkIGluIGMpe2lmKGEuY2FsbChjLGQpKXtiLnB1c2goY1tkXSk7fX1yZXR1cm4gYjt9LGdldExlbmd0aDpmdW5jdGlvbihiKXtyZXR1cm4gT2JqZWN0LmtleXMoYikubGVuZ3RoO30sa2V5T2Y6ZnVuY3Rpb24oYixkKXtmb3IodmFyIGMgaW4gYil7aWYoYS5jYWxsKGIsYykmJmJbY109PT1kKXtyZXR1cm4gYzsKfX1yZXR1cm4gbnVsbDt9LGNvbnRhaW5zOmZ1bmN0aW9uKGIsYyl7cmV0dXJuIE9iamVjdC5rZXlPZihiLGMpIT1udWxsO30sdG9RdWVyeVN0cmluZzpmdW5jdGlvbihiLGMpe3ZhciBkPVtdO09iamVjdC5lYWNoKGIsZnVuY3Rpb24oaCxnKXtpZihjKXtnPWMrIlsiK2crIl0iOwp9dmFyIGY7c3dpdGNoKHR5cGVPZihoKSl7Y2FzZSJvYmplY3QiOmY9T2JqZWN0LnRvUXVlcnlTdHJpbmcoaCxnKTticmVhaztjYXNlImFycmF5Ijp2YXIgZT17fTtoLmVhY2goZnVuY3Rpb24oayxqKXtlW2pdPWs7fSk7Zj1PYmplY3QudG9RdWVyeVN0cmluZyhlLGcpOwpicmVhaztkZWZhdWx0OmY9ZysiPSIrZW5jb2RlVVJJQ29tcG9uZW50KGgpO31pZihoIT1udWxsKXtkLnB1c2goZik7fX0pO3JldHVybiBkLmpvaW4oIiYiKTt9fSk7fSkoKTtIYXNoLmltcGxlbWVudCh7aGFzOk9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHksa2V5T2Y6ZnVuY3Rpb24oYSl7cmV0dXJuIE9iamVjdC5rZXlPZih0aGlzLGEpOwp9LGhhc1ZhbHVlOmZ1bmN0aW9uKGEpe3JldHVybiBPYmplY3QuY29udGFpbnModGhpcyxhKTt9LGV4dGVuZDpmdW5jdGlvbihhKXtIYXNoLmVhY2goYXx8e30sZnVuY3Rpb24oYyxiKXtIYXNoLnNldCh0aGlzLGIsYyk7fSx0aGlzKTtyZXR1cm4gdGhpczt9LGNvbWJpbmU6ZnVuY3Rpb24oYSl7SGFzaC5lYWNoKGF8fHt9LGZ1bmN0aW9uKGMsYil7SGFzaC5pbmNsdWRlKHRoaXMsYixjKTsKfSx0aGlzKTtyZXR1cm4gdGhpczt9LGVyYXNlOmZ1bmN0aW9uKGEpe2lmKHRoaXMuaGFzT3duUHJvcGVydHkoYSkpe2RlbGV0ZSB0aGlzW2FdO31yZXR1cm4gdGhpczt9LGdldDpmdW5jdGlvbihhKXtyZXR1cm4odGhpcy5oYXNPd25Qcm9wZXJ0eShhKSk/dGhpc1thXTpudWxsOwp9LHNldDpmdW5jdGlvbihhLGIpe2lmKCF0aGlzW2FdfHx0aGlzLmhhc093blByb3BlcnR5KGEpKXt0aGlzW2FdPWI7fXJldHVybiB0aGlzO30sZW1wdHk6ZnVuY3Rpb24oKXtIYXNoLmVhY2godGhpcyxmdW5jdGlvbihiLGEpe2RlbGV0ZSB0aGlzW2FdO30sdGhpcyk7CnJldHVybiB0aGlzO30saW5jbHVkZTpmdW5jdGlvbihhLGIpe2lmKHRoaXNbYV09PW51bGwpe3RoaXNbYV09Yjt9cmV0dXJuIHRoaXM7fSxtYXA6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbmV3IEhhc2goT2JqZWN0Lm1hcCh0aGlzLGEsYikpO30sZmlsdGVyOmZ1bmN0aW9uKGEsYil7cmV0dXJuIG5ldyBIYXNoKE9iamVjdC5maWx0ZXIodGhpcyxhLGIpKTsKfSxldmVyeTpmdW5jdGlvbihhLGIpe3JldHVybiBPYmplY3QuZXZlcnkodGhpcyxhLGIpO30sc29tZTpmdW5jdGlvbihhLGIpe3JldHVybiBPYmplY3Quc29tZSh0aGlzLGEsYik7fSxnZXRLZXlzOmZ1bmN0aW9uKCl7cmV0dXJuIE9iamVjdC5rZXlzKHRoaXMpO30sZ2V0VmFsdWVzOmZ1bmN0aW9uKCl7cmV0dXJuIE9iamVjdC52YWx1ZXModGhpcyk7Cn0sdG9RdWVyeVN0cmluZzpmdW5jdGlvbihhKXtyZXR1cm4gT2JqZWN0LnRvUXVlcnlTdHJpbmcodGhpcyxhKTt9fSk7SGFzaC5leHRlbmQ9T2JqZWN0LmFwcGVuZDtIYXNoLmFsaWFzKHtpbmRleE9mOiJrZXlPZiIsY29udGFpbnM6Imhhc1ZhbHVlIn0pOyhmdW5jdGlvbigpe3ZhciBsPXRoaXMuZG9jdW1lbnQ7CnZhciBqPWwud2luZG93PXRoaXM7dmFyIGI9MTt0aGlzLiR1aWQ9KGouQWN0aXZlWE9iamVjdCk/ZnVuY3Rpb24oZSl7cmV0dXJuKGUudWlkfHwoZS51aWQ9W2IrK10pKVswXTt9OmZ1bmN0aW9uKGUpe3JldHVybiBlLnVpZHx8KGUudWlkPWIrKyk7fTskdWlkKGopOyR1aWQobCk7CnZhciBhPW5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKSxjPW5hdmlnYXRvci5wbGF0Zm9ybS50b0xvd2VyQ2FzZSgpLGs9YS5tYXRjaCgvKG9wZXJhfGllfGZpcmVmb3h8Y2hyb21lfHZlcnNpb24pW1xzXC86XShbXHdcZFwuXSspPy4qPyhzYWZhcml8dmVyc2lvbltcc1wvOl0oW1x3XGRcLl0rKXwkKS8pfHxbbnVsbCwidW5rbm93biIsMF0sZz1rWzFdPT0iaWUiJiZsLmRvY3VtZW50TW9kZTsKdmFyIHA9dGhpcy5Ccm93c2VyPXtleHRlbmQ6RnVuY3Rpb24ucHJvdG90eXBlLmV4dGVuZCxuYW1lOihrWzFdPT0idmVyc2lvbiIpP2tbM106a1sxXSx2ZXJzaW9uOmd8fHBhcnNlRmxvYXQoKGtbMV09PSJvcGVyYSImJmtbNF0pP2tbNF06a1syXSksUGxhdGZvcm06e25hbWU6YS5tYXRjaCgvaXAoPzphZHxvZHxob25lKS8pPyJpb3MiOihhLm1hdGNoKC8oPzp3ZWJvc3xhbmRyb2lkKS8pfHxjLm1hdGNoKC9tYWN8d2lufGxpbnV4Lyl8fFsib3RoZXIiXSlbMF19LEZlYXR1cmVzOnt4cGF0aDohIShsLmV2YWx1YXRlKSxhaXI6ISEoai5ydW50aW1lKSxxdWVyeTohIShsLnF1ZXJ5U2VsZWN0b3IpLGpzb246ISEoai5KU09OKX0sUGx1Z2luczp7fX07CnBbcC5uYW1lXT10cnVlO3BbcC5uYW1lK3BhcnNlSW50KHAudmVyc2lvbiwxMCldPXRydWU7cC5QbGF0Zm9ybVtwLlBsYXRmb3JtLm5hbWVdPXRydWU7cC5SZXF1ZXN0PShmdW5jdGlvbigpe3ZhciByPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBYTUxIdHRwUmVxdWVzdCgpOwp9O3ZhciBxPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBBY3RpdmVYT2JqZWN0KCJNU1hNTDIuWE1MSFRUUCIpO307dmFyIGU9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IEFjdGl2ZVhPYmplY3QoIk1pY3Jvc29mdC5YTUxIVFRQIik7fTtyZXR1cm4gRnVuY3Rpb24uYXR0ZW1wdChmdW5jdGlvbigpe3IoKTsKcmV0dXJuIHI7fSxmdW5jdGlvbigpe3EoKTtyZXR1cm4gcTt9LGZ1bmN0aW9uKCl7ZSgpO3JldHVybiBlO30pO30pKCk7cC5GZWF0dXJlcy54aHI9ISEocC5SZXF1ZXN0KTt2YXIgaT0oRnVuY3Rpb24uYXR0ZW1wdChmdW5jdGlvbigpe3JldHVybiBuYXZpZ2F0b3IucGx1Z2luc1siU2hvY2t3YXZlIEZsYXNoIl0uZGVzY3JpcHRpb247Cn0sZnVuY3Rpb24oKXtyZXR1cm4gbmV3IEFjdGl2ZVhPYmplY3QoIlNob2Nrd2F2ZUZsYXNoLlNob2Nrd2F2ZUZsYXNoIikuR2V0VmFyaWFibGUoIiR2ZXJzaW9uIik7fSl8fCIwIHIwIikubWF0Y2goL1xkKy9nKTtwLlBsdWdpbnMuRmxhc2g9e3ZlcnNpb246TnVtYmVyKGlbMF18fCIwLiIraVsxXSl8fDAsYnVpbGQ6TnVtYmVyKGlbMl0pfHwwfTsKcC5leGVjPWZ1bmN0aW9uKHEpe2lmKCFxKXtyZXR1cm4gcTt9aWYoai5leGVjU2NyaXB0KXtqLmV4ZWNTY3JpcHQocSk7fWVsc2V7dmFyIGU9bC5jcmVhdGVFbGVtZW50KCJzY3JpcHQiKTtlLnNldEF0dHJpYnV0ZSgidHlwZSIsInRleHQvamF2YXNjcmlwdCIpO2UudGV4dD1xOwpsLmhlYWQuYXBwZW5kQ2hpbGQoZSk7bC5oZWFkLnJlbW92ZUNoaWxkKGUpO31yZXR1cm4gcTt9O1N0cmluZy5pbXBsZW1lbnQoInN0cmlwU2NyaXB0cyIsZnVuY3Rpb24ocSl7dmFyIGU9IiI7dmFyIHI9dGhpcy5yZXBsYWNlKC88c2NyaXB0W14+XSo+KFtcc1xTXSo/KTxcL3NjcmlwdD4vZ2ksZnVuY3Rpb24ocyx0KXtlKz10KyJcbiI7CnJldHVybiIiO30pO2lmKHE9PT10cnVlKXtwLmV4ZWMoZSk7fWVsc2V7aWYodHlwZU9mKHEpPT0iZnVuY3Rpb24iKXtxKGUscik7fX1yZXR1cm4gcjt9KTtwLmV4dGVuZCh7RG9jdW1lbnQ6dGhpcy5Eb2N1bWVudCxXaW5kb3c6dGhpcy5XaW5kb3csRWxlbWVudDp0aGlzLkVsZW1lbnQsRXZlbnQ6dGhpcy5FdmVudH0pOwp0aGlzLldpbmRvdz10aGlzLiRjb25zdHJ1Y3Rvcj1uZXcgVHlwZSgiV2luZG93IixmdW5jdGlvbigpe30pO3RoaXMuJGZhbWlseT1GdW5jdGlvbi5mcm9tKCJ3aW5kb3ciKS5oaWRlKCk7V2luZG93Lm1pcnJvcihmdW5jdGlvbihlLHEpe2pbZV09cTt9KTt0aGlzLkRvY3VtZW50PWwuJGNvbnN0cnVjdG9yPW5ldyBUeXBlKCJEb2N1bWVudCIsZnVuY3Rpb24oKXt9KTsKbC4kZmFtaWx5PUZ1bmN0aW9uLmZyb20oImRvY3VtZW50IikuaGlkZSgpO0RvY3VtZW50Lm1pcnJvcihmdW5jdGlvbihlLHEpe2xbZV09cTt9KTtsLmh0bWw9bC5kb2N1bWVudEVsZW1lbnQ7aWYoIWwuaGVhZCl7bC5oZWFkPWwuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImhlYWQiKVswXTsKfWlmKGwuZXhlY0NvbW1hbmQpe3RyeXtsLmV4ZWNDb21tYW5kKCJCYWNrZ3JvdW5kSW1hZ2VDYWNoZSIsZmFsc2UsdHJ1ZSk7fWNhdGNoKGgpe319aWYodGhpcy5hdHRhY2hFdmVudCYmIXRoaXMuYWRkRXZlbnRMaXN0ZW5lcil7dmFyIGQ9ZnVuY3Rpb24oKXt0aGlzLmRldGFjaEV2ZW50KCJvbnVubG9hZCIsZCk7CmwuaGVhZD1sLmh0bWw9bC53aW5kb3c9bnVsbDt9O3RoaXMuYXR0YWNoRXZlbnQoIm9udW5sb2FkIixkKTt9dmFyIG49QXJyYXkuZnJvbTt0cnl7bihsLmh0bWwuY2hpbGROb2Rlcyk7fWNhdGNoKGgpe0FycmF5LmZyb209ZnVuY3Rpb24ocSl7aWYodHlwZW9mIHEhPSJzdHJpbmciJiZUeXBlLmlzRW51bWVyYWJsZShxKSYmdHlwZU9mKHEpIT0iYXJyYXkiKXt2YXIgZT1xLmxlbmd0aCxyPW5ldyBBcnJheShlKTsKd2hpbGUoZS0tKXtyW2VdPXFbZV07fXJldHVybiByO31yZXR1cm4gbihxKTt9O3ZhciBtPUFycmF5LnByb3RvdHlwZSxvPW0uc2xpY2U7WyJwb3AiLCJwdXNoIiwicmV2ZXJzZSIsInNoaWZ0Iiwic29ydCIsInNwbGljZSIsInVuc2hpZnQiLCJjb25jYXQiLCJqb2luIiwic2xpY2UiXS5lYWNoKGZ1bmN0aW9uKGUpe3ZhciBxPW1bZV07CkFycmF5W2VdPWZ1bmN0aW9uKHIpe3JldHVybiBxLmFwcGx5KEFycmF5LmZyb20ociksby5jYWxsKGFyZ3VtZW50cywxKSk7fTt9KTt9aWYocC5QbGF0Zm9ybS5pb3Mpe3AuUGxhdGZvcm0uaXBvZD10cnVlO31wLkVuZ2luZT17fTt2YXIgZj1mdW5jdGlvbihxLGUpe3AuRW5naW5lLm5hbWU9cTsKcC5FbmdpbmVbcStlXT10cnVlO3AuRW5naW5lLnZlcnNpb249ZTt9O2lmKHAuaWUpe3AuRW5naW5lLnRyaWRlbnQ9dHJ1ZTtzd2l0Y2gocC52ZXJzaW9uKXtjYXNlIDY6ZigidHJpZGVudCIsNCk7YnJlYWs7Y2FzZSA3OmYoInRyaWRlbnQiLDUpO2JyZWFrO2Nhc2UgODpmKCJ0cmlkZW50Iiw2KTsKfX1pZihwLmZpcmVmb3gpe3AuRW5naW5lLmdlY2tvPXRydWU7aWYocC52ZXJzaW9uPj0zKXtmKCJnZWNrbyIsMTkpO31lbHNle2YoImdlY2tvIiwxOCk7fX1pZihwLnNhZmFyaXx8cC5jaHJvbWUpe3AuRW5naW5lLndlYmtpdD10cnVlO3N3aXRjaChwLnZlcnNpb24pe2Nhc2UgMjpmKCJ3ZWJraXQiLDQxOSk7CmJyZWFrO2Nhc2UgMzpmKCJ3ZWJraXQiLDQyMCk7YnJlYWs7Y2FzZSA0OmYoIndlYmtpdCIsNTI1KTt9fWlmKHAub3BlcmEpe3AuRW5naW5lLnByZXN0bz10cnVlO2lmKHAudmVyc2lvbj49OS42KXtmKCJwcmVzdG8iLDk2MCk7fWVsc2V7aWYocC52ZXJzaW9uPj05LjUpe2YoInByZXN0byIsOTUwKTsKfWVsc2V7ZigicHJlc3RvIiw5MjUpO319fWlmKHAubmFtZT09InVua25vd24iKXtzd2l0Y2goKGEubWF0Y2goLyg/OndlYmtpdHxraHRtbHxnZWNrbykvKXx8W10pWzBdKXtjYXNlIndlYmtpdCI6Y2FzZSJraHRtbCI6cC5FbmdpbmUud2Via2l0PXRydWU7YnJlYWs7Y2FzZSJnZWNrbyI6cC5FbmdpbmUuZ2Vja289dHJ1ZTsKfX10aGlzLiRleGVjPXAuZXhlYzt9KSgpO3ZhciBFdmVudD1uZXcgVHlwZSgiRXZlbnQiLGZ1bmN0aW9uKGEsaSl7aWYoIWkpe2k9d2luZG93O312YXIgbz1pLmRvY3VtZW50O2E9YXx8aS5ldmVudDtpZihhLiRleHRlbmRlZCl7cmV0dXJuIGE7fXRoaXMuJGV4dGVuZGVkPXRydWU7CnZhciBuPWEudHlwZSxrPWEudGFyZ2V0fHxhLnNyY0VsZW1lbnQsbT17fSxjPXt9LHE9bnVsbCxoLGwsYixwO3doaWxlKGsmJmsubm9kZVR5cGU9PTMpe2s9ay5wYXJlbnROb2RlO31pZihuLmluZGV4T2YoImtleSIpIT0tMSl7Yj1hLndoaWNofHxhLmtleUNvZGU7cD1PYmplY3Qua2V5T2YoRXZlbnQuS2V5cyxiKTsKaWYobj09ImtleWRvd24iKXt2YXIgZD1iLTExMTtpZihkPjAmJmQ8MTMpe3A9ImYiK2Q7fX1pZighcCl7cD1TdHJpbmcuZnJvbUNoYXJDb2RlKGIpLnRvTG93ZXJDYXNlKCk7fX1lbHNle2lmKCgvY2xpY2t8bW91c2V8bWVudS9pKS50ZXN0KG4pKXtvPSghby5jb21wYXRNb2RlfHxvLmNvbXBhdE1vZGU9PSJDU1MxQ29tcGF0Iik/by5odG1sOm8uYm9keTsKbT17eDooYS5wYWdlWCE9bnVsbCk/YS5wYWdlWDphLmNsaWVudFgrby5zY3JvbGxMZWZ0LHk6KGEucGFnZVkhPW51bGwpP2EucGFnZVk6YS5jbGllbnRZK28uc2Nyb2xsVG9wfTtjPXt4OihhLnBhZ2VYIT1udWxsKT9hLnBhZ2VYLWkucGFnZVhPZmZzZXQ6YS5jbGllbnRYLHk6KGEucGFnZVkhPW51bGwpP2EucGFnZVktaS5wYWdlWU9mZnNldDphLmNsaWVudFl9OwppZigoL0RPTU1vdXNlU2Nyb2xsfG1vdXNld2hlZWwvKS50ZXN0KG4pKXtsPShhLndoZWVsRGVsdGEpP2Eud2hlZWxEZWx0YS8xMjA6LShhLmRldGFpbHx8MCkvMzt9aD0oYS53aGljaD09Myl8fChhLmJ1dHRvbj09Mik7aWYoKC9vdmVyfG91dC8pLnRlc3Qobikpe3E9YS5yZWxhdGVkVGFyZ2V0fHxhWyhuPT0ibW91c2VvdmVyIj8iZnJvbSI6InRvIikrIkVsZW1lbnQiXTsKdmFyIGo9ZnVuY3Rpb24oKXt3aGlsZShxJiZxLm5vZGVUeXBlPT0zKXtxPXEucGFyZW50Tm9kZTt9cmV0dXJuIHRydWU7fTt2YXIgZz0oQnJvd3Nlci5maXJlZm94Mik/ai5hdHRlbXB0KCk6aigpO3E9KGcpP3E6bnVsbDt9fWVsc2V7aWYoKC9nZXN0dXJlfHRvdWNoL2kpLnRlc3Qobikpe3RoaXMucm90YXRpb249YS5yb3RhdGlvbjsKdGhpcy5zY2FsZT1hLnNjYWxlO3RoaXMudGFyZ2V0VG91Y2hlcz1hLnRhcmdldFRvdWNoZXM7dGhpcy5jaGFuZ2VkVG91Y2hlcz1hLmNoYW5nZWRUb3VjaGVzO3ZhciBmPXRoaXMudG91Y2hlcz1hLnRvdWNoZXM7aWYoZiYmZlswXSl7dmFyIGU9ZlswXTttPXt4OmUucGFnZVgseTplLnBhZ2VZfTsKYz17eDplLmNsaWVudFgseTplLmNsaWVudFl9O319fX1yZXR1cm4gT2JqZWN0LmFwcGVuZCh0aGlzLHtldmVudDphLHR5cGU6bixwYWdlOm0sY2xpZW50OmMscmlnaHRDbGljazpoLHdoZWVsOmwscmVsYXRlZFRhcmdldDpkb2N1bWVudC5pZChxKSx0YXJnZXQ6ZG9jdW1lbnQuaWQoayksY29kZTpiLGtleTpwLHNoaWZ0OmEuc2hpZnRLZXksY29udHJvbDphLmN0cmxLZXksYWx0OmEuYWx0S2V5LG1ldGE6YS5tZXRhS2V5fSk7Cn0pO0V2ZW50LktleXM9e2VudGVyOjEzLHVwOjM4LGRvd246NDAsbGVmdDozNyxyaWdodDozOSxlc2M6Mjcsc3BhY2U6MzIsYmFja3NwYWNlOjgsdGFiOjksImRlbGV0ZSI6NDZ9O0V2ZW50LktleXM9bmV3IEhhc2goRXZlbnQuS2V5cyk7RXZlbnQuaW1wbGVtZW50KHtzdG9wOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3RvcFByb3BhZ2F0aW9uKCkucHJldmVudERlZmF1bHQoKTsKfSxzdG9wUHJvcGFnYXRpb246ZnVuY3Rpb24oKXtpZih0aGlzLmV2ZW50LnN0b3BQcm9wYWdhdGlvbil7dGhpcy5ldmVudC5zdG9wUHJvcGFnYXRpb24oKTt9ZWxzZXt0aGlzLmV2ZW50LmNhbmNlbEJ1YmJsZT10cnVlO31yZXR1cm4gdGhpczt9LHByZXZlbnREZWZhdWx0OmZ1bmN0aW9uKCl7aWYodGhpcy5ldmVudC5wcmV2ZW50RGVmYXVsdCl7dGhpcy5ldmVudC5wcmV2ZW50RGVmYXVsdCgpOwp9ZWxzZXt0aGlzLmV2ZW50LnJldHVyblZhbHVlPWZhbHNlO31yZXR1cm4gdGhpczt9fSk7KGZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5DbGFzcz1uZXcgVHlwZSgiQ2xhc3MiLGZ1bmN0aW9uKGgpe2lmKGluc3RhbmNlT2YoaCxGdW5jdGlvbikpe2g9e2luaXRpYWxpemU6aH07Cn12YXIgZz1mdW5jdGlvbigpe2UodGhpcyk7aWYoZy4kcHJvdG90eXBpbmcpe3JldHVybiB0aGlzO310aGlzLiRjYWxsZXI9bnVsbDt2YXIgaT0odGhpcy5pbml0aWFsaXplKT90aGlzLmluaXRpYWxpemUuYXBwbHkodGhpcyxhcmd1bWVudHMpOnRoaXM7dGhpcy4kY2FsbGVyPXRoaXMuY2FsbGVyPW51bGw7CnJldHVybiBpO30uZXh0ZW5kKHRoaXMpLmltcGxlbWVudChoKTtnLiRjb25zdHJ1Y3Rvcj1hO2cucHJvdG90eXBlLiRjb25zdHJ1Y3Rvcj1nO2cucHJvdG90eXBlLnBhcmVudD1jO3JldHVybiBnO30pO3ZhciBjPWZ1bmN0aW9uKCl7aWYoIXRoaXMuJGNhbGxlcil7dGhyb3cgbmV3IEVycm9yKCdUaGUgbWV0aG9kICJwYXJlbnQiIGNhbm5vdCBiZSBjYWxsZWQuJyk7Cn12YXIgZz10aGlzLiRjYWxsZXIuJG5hbWUsaD10aGlzLiRjYWxsZXIuJG93bmVyLnBhcmVudCxpPShoKT9oLnByb3RvdHlwZVtnXTpudWxsO2lmKCFpKXt0aHJvdyBuZXcgRXJyb3IoJ1RoZSBtZXRob2QgIicrZysnIiBoYXMgbm8gcGFyZW50LicpO31yZXR1cm4gaS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7Cn07dmFyIGU9ZnVuY3Rpb24oZyl7Zm9yKHZhciBoIGluIGcpe3ZhciBqPWdbaF07c3dpdGNoKHR5cGVPZihqKSl7Y2FzZSJvYmplY3QiOnZhciBpPWZ1bmN0aW9uKCl7fTtpLnByb3RvdHlwZT1qO2dbaF09ZShuZXcgaSk7YnJlYWs7Y2FzZSJhcnJheSI6Z1toXT1qLmNsb25lKCk7CmJyZWFrO319cmV0dXJuIGc7fTt2YXIgYj1mdW5jdGlvbihnLGgsail7aWYoai4kb3JpZ2luKXtqPWouJG9yaWdpbjt9dmFyIGk9ZnVuY3Rpb24oKXtpZihqLiRwcm90ZWN0ZWQmJnRoaXMuJGNhbGxlcj09bnVsbCl7dGhyb3cgbmV3IEVycm9yKCdUaGUgbWV0aG9kICInK2grJyIgY2Fubm90IGJlIGNhbGxlZC4nKTsKfXZhciBsPXRoaXMuY2FsbGVyLG09dGhpcy4kY2FsbGVyO3RoaXMuY2FsbGVyPW07dGhpcy4kY2FsbGVyPWk7dmFyIGs9ai5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy4kY2FsbGVyPW07dGhpcy5jYWxsZXI9bDtyZXR1cm4gazt9LmV4dGVuZCh7JG93bmVyOmcsJG9yaWdpbjpqLCRuYW1lOmh9KTsKcmV0dXJuIGk7fTt2YXIgZj1mdW5jdGlvbihoLGksZyl7aWYoYS5NdXRhdG9ycy5oYXNPd25Qcm9wZXJ0eShoKSl7aT1hLk11dGF0b3JzW2hdLmNhbGwodGhpcyxpKTtpZihpPT1udWxsKXtyZXR1cm4gdGhpczt9fWlmKHR5cGVPZihpKT09ImZ1bmN0aW9uIil7aWYoaS4kaGlkZGVuKXtyZXR1cm4gdGhpczsKfXRoaXMucHJvdG90eXBlW2hdPShnKT9pOmIodGhpcyxoLGkpO31lbHNle09iamVjdC5tZXJnZSh0aGlzLnByb3RvdHlwZSxoLGkpO31yZXR1cm4gdGhpczt9O3ZhciBkPWZ1bmN0aW9uKGcpe2cuJHByb3RvdHlwaW5nPXRydWU7dmFyIGg9bmV3IGc7ZGVsZXRlIGcuJHByb3RvdHlwaW5nOwpyZXR1cm4gaDt9O2EuaW1wbGVtZW50KCJpbXBsZW1lbnQiLGYub3ZlcmxvYWRTZXR0ZXIoKSk7YS5NdXRhdG9ycz17RXh0ZW5kczpmdW5jdGlvbihnKXt0aGlzLnBhcmVudD1nO3RoaXMucHJvdG90eXBlPWQoZyk7fSxJbXBsZW1lbnRzOmZ1bmN0aW9uKGcpe0FycmF5LmZyb20oZykuZWFjaChmdW5jdGlvbihqKXt2YXIgaD1uZXcgajsKZm9yKHZhciBpIGluIGgpe2YuY2FsbCh0aGlzLGksaFtpXSx0cnVlKTt9fSx0aGlzKTt9fTt9KSgpOyhmdW5jdGlvbigpe3RoaXMuQ2hhaW49bmV3IENsYXNzKHskY2hhaW46W10sY2hhaW46ZnVuY3Rpb24oKXt0aGlzLiRjaGFpbi5hcHBlbmQoQXJyYXkuZmxhdHRlbihhcmd1bWVudHMpKTsKcmV0dXJuIHRoaXM7fSxjYWxsQ2hhaW46ZnVuY3Rpb24oKXtyZXR1cm4odGhpcy4kY2hhaW4ubGVuZ3RoKT90aGlzLiRjaGFpbi5zaGlmdCgpLmFwcGx5KHRoaXMsYXJndW1lbnRzKTpmYWxzZTt9LGNsZWFyQ2hhaW46ZnVuY3Rpb24oKXt0aGlzLiRjaGFpbi5lbXB0eSgpOwpyZXR1cm4gdGhpczt9fSk7dmFyIGE9ZnVuY3Rpb24oYil7cmV0dXJuIGIucmVwbGFjZSgvXm9uKFtBLVpdKS8sZnVuY3Rpb24oYyxkKXtyZXR1cm4gZC50b0xvd2VyQ2FzZSgpO30pO307dGhpcy5FdmVudHM9bmV3IENsYXNzKHskZXZlbnRzOnt9LGFkZEV2ZW50OmZ1bmN0aW9uKGQsYyxiKXtkPWEoZCk7CmlmKGM9PSRlbXB0eSl7cmV0dXJuIHRoaXM7fXRoaXMuJGV2ZW50c1tkXT0odGhpcy4kZXZlbnRzW2RdfHxbXSkuaW5jbHVkZShjKTtpZihiKXtjLmludGVybmFsPXRydWU7fXJldHVybiB0aGlzO30sYWRkRXZlbnRzOmZ1bmN0aW9uKGIpe2Zvcih2YXIgYyBpbiBiKXt0aGlzLmFkZEV2ZW50KGMsYltjXSk7Cn1yZXR1cm4gdGhpczt9LGZpcmVFdmVudDpmdW5jdGlvbihlLGMsYil7ZT1hKGUpO3ZhciBkPXRoaXMuJGV2ZW50c1tlXTtpZighZCl7cmV0dXJuIHRoaXM7fWM9QXJyYXkuZnJvbShjKTtkLmVhY2goZnVuY3Rpb24oZil7aWYoYil7Zi5kZWxheShiLHRoaXMsYyk7fWVsc2V7Zi5hcHBseSh0aGlzLGMpOwp9fSx0aGlzKTtyZXR1cm4gdGhpczt9LHJlbW92ZUV2ZW50OmZ1bmN0aW9uKGUsZCl7ZT1hKGUpO3ZhciBjPXRoaXMuJGV2ZW50c1tlXTtpZihjJiYhZC5pbnRlcm5hbCl7dmFyIGI9Yy5pbmRleE9mKGQpO2lmKGIhPS0xKXtkZWxldGUgY1tiXTt9fXJldHVybiB0aGlzOwp9LHJlbW92ZUV2ZW50czpmdW5jdGlvbihkKXt2YXIgZTtpZih0eXBlT2YoZCk9PSJvYmplY3QiKXtmb3IoZSBpbiBkKXt0aGlzLnJlbW92ZUV2ZW50KGUsZFtlXSk7fXJldHVybiB0aGlzO31pZihkKXtkPWEoZCk7fWZvcihlIGluIHRoaXMuJGV2ZW50cyl7aWYoZCYmZCE9ZSl7Y29udGludWU7Cn12YXIgYz10aGlzLiRldmVudHNbZV07Zm9yKHZhciBiPWMubGVuZ3RoO2ItLTspe2lmKGIgaW4gYyl7dGhpcy5yZW1vdmVFdmVudChlLGNbYl0pO319fXJldHVybiB0aGlzO319KTt0aGlzLk9wdGlvbnM9bmV3IENsYXNzKHtzZXRPcHRpb25zOmZ1bmN0aW9uKCl7dmFyIGI9dGhpcy5vcHRpb25zPU9iamVjdC5tZXJnZS5hcHBseShudWxsLFt7fSx0aGlzLm9wdGlvbnNdLmFwcGVuZChhcmd1bWVudHMpKTsKaWYodGhpcy5hZGRFdmVudCl7Zm9yKHZhciBjIGluIGIpe2lmKHR5cGVPZihiW2NdKSE9ImZ1bmN0aW9uInx8ISgvXm9uW0EtWl0vKS50ZXN0KGMpKXtjb250aW51ZTt9dGhpcy5hZGRFdmVudChjLGJbY10pO2RlbGV0ZSBiW2NdO319cmV0dXJuIHRoaXM7fX0pO30pKCk7CihmdW5jdGlvbigpe3ZhciBrLG4sbCxnLGE9e30sYz17fSxtPS9cXC9nO3ZhciBlPWZ1bmN0aW9uKHEscCl7aWYocT09bnVsbCl7cmV0dXJuIG51bGw7fWlmKHEuU2xpY2s9PT10cnVlKXtyZXR1cm4gcTt9cT0oIiIrcSkucmVwbGFjZSgvXlxzK3xccyskL2csIiIpO2c9ISFwOwp2YXIgbz0oZyk/YzphO2lmKG9bcV0pe3JldHVybiBvW3FdO31rPXtTbGljazp0cnVlLGV4cHJlc3Npb25zOltdLHJhdzpxLHJldmVyc2U6ZnVuY3Rpb24oKXtyZXR1cm4gZSh0aGlzLnJhdyx0cnVlKTt9fTtuPS0xO3doaWxlKHEhPShxPXEucmVwbGFjZShqLGIpKSl7fWsubGVuZ3RoPWsuZXhwcmVzc2lvbnMubGVuZ3RoOwpyZXR1cm4gb1trLnJhd109KGcpP2goayk6azt9O3ZhciBpPWZ1bmN0aW9uKG8pe2lmKG89PT0iISIpe3JldHVybiIgIjt9ZWxzZXtpZihvPT09IiAiKXtyZXR1cm4iISI7fWVsc2V7aWYoKC9eIS8pLnRlc3Qobykpe3JldHVybiBvLnJlcGxhY2UoL14hLywiIik7fWVsc2V7cmV0dXJuIiEiK287Cn19fX07dmFyIGg9ZnVuY3Rpb24odSl7dmFyIHI9dS5leHByZXNzaW9ucztmb3IodmFyIHA9MDtwPHIubGVuZ3RoO3ArKyl7dmFyIHQ9cltwXTt2YXIgcT17cGFydHM6W10sdGFnOiIqIixjb21iaW5hdG9yOmkodFswXS5jb21iaW5hdG9yKX07Zm9yKHZhciBvPTA7bzx0Lmxlbmd0aDsKbysrKXt2YXIgcz10W29dO2lmKCFzLnJldmVyc2VDb21iaW5hdG9yKXtzLnJldmVyc2VDb21iaW5hdG9yPSIgIjt9cy5jb21iaW5hdG9yPXMucmV2ZXJzZUNvbWJpbmF0b3I7ZGVsZXRlIHMucmV2ZXJzZUNvbWJpbmF0b3I7fXQucmV2ZXJzZSgpLnB1c2gocSk7fXJldHVybiB1Owp9O3ZhciBmPWZ1bmN0aW9uKG8pe3JldHVybiBvLnJlcGxhY2UoL1stW1xde30oKSorPy5cXF4kfCwjXHNdL2csZnVuY3Rpb24ocCl7cmV0dXJuIlxcIitwO30pO307dmFyIGo9bmV3IFJlZ0V4cCgiXig/OlxccyooLClcXHMqfFxccyooPGNvbWJpbmF0b3I+KylcXHMqfChcXHMrKXwoPHVuaWNvZGU+K3xcXCopfFxcIyg8dW5pY29kZT4rKXxcXC4oPHVuaWNvZGU+Kyl8XFxbXFxzKig8dW5pY29kZTE+KykoPzpcXHMqKFsqXiQhfnxdPz0pKD86XFxzKig/OihbXCInXT8pKC4qPylcXDkpKSk/XFxzKlxcXSg/IVxcXSl8KDorKSg8dW5pY29kZT4rKSg/OlxcKCg/Oig/OihbXCInXSkoW15cXDEzXSopXFwxMyl8KCg/OlxcKFteKV0rXFwpfFteKCldKikrKSlcXCkpPykiLnJlcGxhY2UoLzxjb21iaW5hdG9yPi8sIlsiK2YoIj4rfmAhQCQlXiY9e31cXDs8LyIpKyJdIikucmVwbGFjZSgvPHVuaWNvZGU+L2csIig/OltcXHdcXHUwMGExLVxcdUZGRkYtXXxcXFxcW15cXHMwLTlhLWZdKSIpLnJlcGxhY2UoLzx1bmljb2RlMT4vZywiKD86WzpcXHdcXHUwMGExLVxcdUZGRkYtXXxcXFxcW15cXHMwLTlhLWZdKSIpKTsKZnVuY3Rpb24gYih4LHMsRCx6LHIsQyxxLEIsQSx5LHUsRixHLHYscCx3KXtpZihzfHxuPT09LTEpe2suZXhwcmVzc2lvbnNbKytuXT1bXTtsPS0xO2lmKHMpe3JldHVybiIiO319aWYoRHx8enx8bD09PS0xKXtEPUR8fCIgIjt2YXIgdD1rLmV4cHJlc3Npb25zW25dOwppZihnJiZ0W2xdKXt0W2xdLnJldmVyc2VDb21iaW5hdG9yPWkoRCk7fXRbKytsXT17Y29tYmluYXRvcjpELHRhZzoiKiJ9O312YXIgbz1rLmV4cHJlc3Npb25zW25dW2xdO2lmKHIpe28udGFnPXIucmVwbGFjZShtLCIiKTt9ZWxzZXtpZihDKXtvLmlkPUMucmVwbGFjZShtLCIiKTsKfWVsc2V7aWYocSl7cT1xLnJlcGxhY2UobSwiIik7aWYoIW8uY2xhc3NMaXN0KXtvLmNsYXNzTGlzdD1bXTt9aWYoIW8uY2xhc3Nlcyl7by5jbGFzc2VzPVtdO31vLmNsYXNzTGlzdC5wdXNoKHEpO28uY2xhc3Nlcy5wdXNoKHt2YWx1ZTpxLHJlZ2V4cDpuZXcgUmVnRXhwKCIoXnxcXHMpIitmKHEpKyIoXFxzfCQpIil9KTsKfWVsc2V7aWYoRyl7dz13fHxwO3c9dz93LnJlcGxhY2UobSwiIik6bnVsbDtpZighby5wc2V1ZG9zKXtvLnBzZXVkb3M9W107fW8ucHNldWRvcy5wdXNoKHtrZXk6Ry5yZXBsYWNlKG0sIiIpLHZhbHVlOncsdHlwZTpGLmxlbmd0aD09MT8iY2xhc3MiOiJlbGVtZW50In0pOwp9ZWxzZXtpZihCKXtCPUIucmVwbGFjZShtLCIiKTt1PSh1fHwiIikucmVwbGFjZShtLCIiKTt2YXIgRSxIO3N3aXRjaChBKXtjYXNlIl49IjpIPW5ldyBSZWdFeHAoIl4iK2YodSkpO2JyZWFrO2Nhc2UiJD0iOkg9bmV3IFJlZ0V4cChmKHUpKyIkIik7YnJlYWs7Y2FzZSJ+PSI6SD1uZXcgUmVnRXhwKCIoXnxcXHMpIitmKHUpKyIoXFxzfCQpIik7CmJyZWFrO2Nhc2UifD0iOkg9bmV3IFJlZ0V4cCgiXiIrZih1KSsiKC18JCkiKTticmVhaztjYXNlIj0iOkU9ZnVuY3Rpb24oSSl7cmV0dXJuIHU9PUk7fTticmVhaztjYXNlIio9IjpFPWZ1bmN0aW9uKEkpe3JldHVybiBJJiZJLmluZGV4T2YodSk+LTE7fTticmVhazsKY2FzZSIhPSI6RT1mdW5jdGlvbihJKXtyZXR1cm4gdSE9STt9O2JyZWFrO2RlZmF1bHQ6RT1mdW5jdGlvbihJKXtyZXR1cm4gISFJO307fWlmKHU9PSIiJiYoL15bKiReXT0kLykudGVzdChBKSl7RT1mdW5jdGlvbigpe3JldHVybiBmYWxzZTt9O31pZighRSl7RT1mdW5jdGlvbihJKXtyZXR1cm4gSSYmSC50ZXN0KEkpOwp9O31pZighby5hdHRyaWJ1dGVzKXtvLmF0dHJpYnV0ZXM9W107fW8uYXR0cmlidXRlcy5wdXNoKHtrZXk6QixvcGVyYXRvcjpBLHZhbHVlOnUsdGVzdDpFfSk7fX19fX1yZXR1cm4iIjt9dmFyIGQ9KHRoaXMuU2xpY2t8fHt9KTtkLnBhcnNlPWZ1bmN0aW9uKG8pe3JldHVybiBlKG8pOwp9O2QuZXNjYXBlUmVnRXhwPWY7aWYoIXRoaXMuU2xpY2spe3RoaXMuU2xpY2s9ZDt9fSkuYXBwbHkoKHR5cGVvZiBleHBvcnRzIT0idW5kZWZpbmVkIik/ZXhwb3J0czp0aGlzKTsoZnVuY3Rpb24oKXt2YXIgaj17fSxsPXt9LGI9T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZzsKai5pc05hdGl2ZUNvZGU9ZnVuY3Rpb24oYyl7cmV0dXJuKC9ce1xzKlxbbmF0aXZlIGNvZGVcXVxzKlx9LykudGVzdCgiIitjKTt9O2ouaXNYTUw9ZnVuY3Rpb24oYyl7cmV0dXJuKCEhYy54bWxWZXJzaW9uKXx8KCEhYy54bWwpfHwoYi5jYWxsKGMpPT0iW29iamVjdCBYTUxEb2N1bWVudF0iKXx8KGMubm9kZVR5cGU9PTkmJmMuZG9jdW1lbnRFbGVtZW50Lm5vZGVOYW1lIT0iSFRNTCIpOwp9O2ouc2V0RG9jdW1lbnQ9ZnVuY3Rpb24odyl7dmFyIHQ9dy5ub2RlVHlwZTtpZih0PT05KXt9ZWxzZXtpZih0KXt3PXcub3duZXJEb2N1bWVudDt9ZWxzZXtpZih3Lm5hdmlnYXRvcil7dz13LmRvY3VtZW50O31lbHNle3JldHVybjt9fX1pZih0aGlzLmRvY3VtZW50PT09dyl7cmV0dXJuOwp9dGhpcy5kb2N1bWVudD13O3ZhciB5PXcuZG9jdW1lbnRFbGVtZW50LHU9dGhpcy5nZXRVSURYTUwoeSksbz1sW3VdLEE7aWYobyl7Zm9yKEEgaW4gbyl7dGhpc1tBXT1vW0FdO31yZXR1cm47fW89bFt1XT17fTtvLnJvb3Q9eTtvLmlzWE1MRG9jdW1lbnQ9dGhpcy5pc1hNTCh3KTsKby5icm9rZW5TdGFyR0VCVE49by5zdGFyU2VsZWN0c0Nsb3NlZFFTQT1vLmlkR2V0c05hbWU9by5icm9rZW5NaXhlZENhc2VRU0E9by5icm9rZW5HRUJDTj1vLmJyb2tlbkNoZWNrZWRRU0E9by5icm9rZW5FbXB0eUF0dHJpYnV0ZVFTQT1vLmlzSFRNTERvY3VtZW50PW8ubmF0aXZlTWF0Y2hlc1NlbGVjdG9yPWZhbHNlOwp2YXIgbSxuLHgscSxyO3ZhciBzLGM9InNsaWNrX3VuaXF1ZWlkIjt2YXIgej13LmNyZWF0ZUVsZW1lbnQoImRpdiIpO3ZhciBwPXcuYm9keXx8dy5nZXRFbGVtZW50c0J5VGFnTmFtZSgiYm9keSIpWzBdfHx5O3AuYXBwZW5kQ2hpbGQoeik7dHJ5e3ouaW5uZXJIVE1MPSc8YSBpZD0iJytjKyciPjwvYT4nOwpvLmlzSFRNTERvY3VtZW50PSEhdy5nZXRFbGVtZW50QnlJZChjKTt9Y2F0Y2godil7fWlmKG8uaXNIVE1MRG9jdW1lbnQpe3ouc3R5bGUuZGlzcGxheT0ibm9uZSI7ei5hcHBlbmRDaGlsZCh3LmNyZWF0ZUNvbW1lbnQoIiIpKTtuPSh6LmdldEVsZW1lbnRzQnlUYWdOYW1lKCIqIikubGVuZ3RoPjEpOwp0cnl7ei5pbm5lckhUTUw9ImZvbzwvZm9vPiI7cz16LmdldEVsZW1lbnRzQnlUYWdOYW1lKCIqIik7bT0ocyYmISFzLmxlbmd0aCYmc1swXS5ub2RlTmFtZS5jaGFyQXQoMCk9PSIvIik7fWNhdGNoKHYpe31vLmJyb2tlblN0YXJHRUJUTj1ufHxtO3RyeXt6LmlubmVySFRNTD0nPGEgbmFtZT0iJytjKyciPjwvYT48YiBpZD0iJytjKyciPjwvYj4nOwpvLmlkR2V0c05hbWU9dy5nZXRFbGVtZW50QnlJZChjKT09PXouZmlyc3RDaGlsZDt9Y2F0Y2godil7fWlmKHouZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSl7dHJ5e3ouaW5uZXJIVE1MPSc8YSBjbGFzcz0iZiI+PC9hPjxhIGNsYXNzPSJiIj48L2E+Jzt6LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoImIiKS5sZW5ndGg7CnouZmlyc3RDaGlsZC5jbGFzc05hbWU9ImIiO3E9KHouZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgiYiIpLmxlbmd0aCE9Mik7fWNhdGNoKHYpe310cnl7ei5pbm5lckhUTUw9JzxhIGNsYXNzPSJhIj48L2E+PGEgY2xhc3M9ImYgYiBhIj48L2E+Jzt4PSh6LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoImEiKS5sZW5ndGghPTIpOwp9Y2F0Y2godil7fW8uYnJva2VuR0VCQ049cXx8eDt9aWYoei5xdWVyeVNlbGVjdG9yQWxsKXt0cnl7ei5pbm5lckhUTUw9ImZvbzwvZm9vPiI7cz16LnF1ZXJ5U2VsZWN0b3JBbGwoIioiKTtvLnN0YXJTZWxlY3RzQ2xvc2VkUVNBPShzJiYhIXMubGVuZ3RoJiZzWzBdLm5vZGVOYW1lLmNoYXJBdCgwKT09Ii8iKTsKfWNhdGNoKHYpe310cnl7ei5pbm5lckhUTUw9JzxhIGNsYXNzPSJNaVgiPjwvYT4nO28uYnJva2VuTWl4ZWRDYXNlUVNBPSF6LnF1ZXJ5U2VsZWN0b3JBbGwoIi5NaVgiKS5sZW5ndGg7fWNhdGNoKHYpe310cnl7ei5pbm5lckhUTUw9JzxzZWxlY3Q+PG9wdGlvbiBzZWxlY3RlZD0ic2VsZWN0ZWQiPmE8L29wdGlvbj48L3NlbGVjdD4nOwpvLmJyb2tlbkNoZWNrZWRRU0E9KHoucXVlcnlTZWxlY3RvckFsbCgiOmNoZWNrZWQiKS5sZW5ndGg9PTApO31jYXRjaCh2KXt9dHJ5e3ouaW5uZXJIVE1MPSc8YSBjbGFzcz0iIj48L2E+JztvLmJyb2tlbkVtcHR5QXR0cmlidXRlUVNBPSh6LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tjbGFzcyo9IiJdJykubGVuZ3RoIT0wKTsKfWNhdGNoKHYpe319dHJ5e3ouaW5uZXJIVE1MPSc8Zm9ybSBhY3Rpb249InMiPjxpbnB1dCBpZD0iYWN0aW9uIi8+PC9mb3JtPic7cj0oei5maXJzdENoaWxkLmdldEF0dHJpYnV0ZSgiYWN0aW9uIikhPSJzIik7fWNhdGNoKHYpe31vLm5hdGl2ZU1hdGNoZXNTZWxlY3Rvcj15Lm1hdGNoZXNTZWxlY3Rvcnx8eS5tb3pNYXRjaGVzU2VsZWN0b3J8fHkud2Via2l0TWF0Y2hlc1NlbGVjdG9yOwppZihvLm5hdGl2ZU1hdGNoZXNTZWxlY3Rvcil7dHJ5e28ubmF0aXZlTWF0Y2hlc1NlbGVjdG9yLmNhbGwoeSwiOnNsaWNrIik7by5uYXRpdmVNYXRjaGVzU2VsZWN0b3I9bnVsbDt9Y2F0Y2godil7fX19dHJ5e3kuc2xpY2tfZXhwYW5kbz0xO2RlbGV0ZSB5LnNsaWNrX2V4cGFuZG87Cm8uZ2V0VUlEPXRoaXMuZ2V0VUlESFRNTDt9Y2F0Y2godil7by5nZXRVSUQ9dGhpcy5nZXRVSURYTUw7fXAucmVtb3ZlQ2hpbGQoeik7ej1zPXA9bnVsbDtvLmdldEF0dHJpYnV0ZT0oby5pc0hUTUxEb2N1bWVudCYmcik/ZnVuY3Rpb24oRCxCKXt2YXIgRT10aGlzLmF0dHJpYnV0ZUdldHRlcnNbQl07CmlmKEUpe3JldHVybiBFLmNhbGwoRCk7fXZhciBDPUQuZ2V0QXR0cmlidXRlTm9kZShCKTtyZXR1cm4oQyk/Qy5ub2RlVmFsdWU6bnVsbDt9OmZ1bmN0aW9uKEMsQil7dmFyIEQ9dGhpcy5hdHRyaWJ1dGVHZXR0ZXJzW0JdO3JldHVybihEKT9ELmNhbGwoQyk6Qy5nZXRBdHRyaWJ1dGUoQik7Cn07by5oYXNBdHRyaWJ1dGU9KHkmJnRoaXMuaXNOYXRpdmVDb2RlKHkuaGFzQXR0cmlidXRlKSk/ZnVuY3Rpb24oQyxCKXtyZXR1cm4gQy5oYXNBdHRyaWJ1dGUoQik7fTpmdW5jdGlvbihDLEIpe0M9Qy5nZXRBdHRyaWJ1dGVOb2RlKEIpO3JldHVybiAhIShDJiYoQy5zcGVjaWZpZWR8fEMubm9kZVZhbHVlKSk7Cn07by5jb250YWlucz0oeSYmdGhpcy5pc05hdGl2ZUNvZGUoeS5jb250YWlucykpP2Z1bmN0aW9uKEIsQyl7cmV0dXJuIEIuY29udGFpbnMoQyk7fTooeSYmeS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbik/ZnVuY3Rpb24oQixDKXtyZXR1cm4gQj09PUN8fCEhKEIuY29tcGFyZURvY3VtZW50UG9zaXRpb24oQykmMTYpOwp9OmZ1bmN0aW9uKEIsQyl7aWYoQyl7ZG97aWYoQz09PUIpe3JldHVybiB0cnVlO319d2hpbGUoKEM9Qy5wYXJlbnROb2RlKSk7fXJldHVybiBmYWxzZTt9O28uZG9jdW1lbnRTb3J0ZXI9KHkuY29tcGFyZURvY3VtZW50UG9zaXRpb24pP2Z1bmN0aW9uKEMsQil7aWYoIUMuY29tcGFyZURvY3VtZW50UG9zaXRpb258fCFCLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKXtyZXR1cm4gMDsKfXJldHVybiBDLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKEIpJjQ/LTE6Qz09PUI/MDoxO306KCJzb3VyY2VJbmRleCIgaW4geSk/ZnVuY3Rpb24oQyxCKXtpZighQy5zb3VyY2VJbmRleHx8IUIuc291cmNlSW5kZXgpe3JldHVybiAwO31yZXR1cm4gQy5zb3VyY2VJbmRleC1CLnNvdXJjZUluZGV4Owp9Oih3LmNyZWF0ZVJhbmdlKT9mdW5jdGlvbihFLEMpe2lmKCFFLm93bmVyRG9jdW1lbnR8fCFDLm93bmVyRG9jdW1lbnQpe3JldHVybiAwO312YXIgRD1FLm93bmVyRG9jdW1lbnQuY3JlYXRlUmFuZ2UoKSxCPUMub3duZXJEb2N1bWVudC5jcmVhdGVSYW5nZSgpO0Quc2V0U3RhcnQoRSwwKTsKRC5zZXRFbmQoRSwwKTtCLnNldFN0YXJ0KEMsMCk7Qi5zZXRFbmQoQywwKTtyZXR1cm4gRC5jb21wYXJlQm91bmRhcnlQb2ludHMoUmFuZ2UuU1RBUlRfVE9fRU5ELEIpO306bnVsbDt5PW51bGw7Zm9yKEEgaW4gbyl7dGhpc1tBXT1vW0FdO319O3ZhciBlPS9eKFsjLl0/KSgoPzpbXHctXSt8XCopKSQvLGc9L1xbLitbKiReXT0oPzoiInwnJyk/XF0vLGY9e307Cmouc2VhcmNoPWZ1bmN0aW9uKFUseixILHMpe3ZhciBwPXRoaXMuZm91bmQ9KHMpP251bGw6KEh8fFtdKTtpZighVSl7cmV0dXJuIHA7fWVsc2V7aWYoVS5uYXZpZ2F0b3Ipe1U9VS5kb2N1bWVudDt9ZWxzZXtpZighVS5ub2RlVHlwZSl7cmV0dXJuIHA7fX19dmFyIEYsTyxWPXRoaXMudW5pcXVlcz17fSxJPSEhKEgmJkgubGVuZ3RoKSx5PShVLm5vZGVUeXBlPT05KTsKaWYodGhpcy5kb2N1bWVudCE9PSh5P1U6VS5vd25lckRvY3VtZW50KSl7dGhpcy5zZXREb2N1bWVudChVKTt9aWYoSSl7Zm9yKE89cC5sZW5ndGg7Ty0tOyl7Vlt0aGlzLmdldFVJRChwW09dKV09dHJ1ZTt9fWlmKHR5cGVvZiB6PT0ic3RyaW5nIil7dmFyIHI9ei5tYXRjaChlKTsKc2ltcGxlU2VsZWN0b3JzOmlmKHIpe3ZhciB1PXJbMV0sdj1yWzJdLEEsRTtpZighdSl7aWYodj09IioiJiZ0aGlzLmJyb2tlblN0YXJHRUJUTil7YnJlYWsgc2ltcGxlU2VsZWN0b3JzO31FPVUuZ2V0RWxlbWVudHNCeVRhZ05hbWUodik7aWYocyl7cmV0dXJuIEVbMF18fG51bGw7Cn1mb3IoTz0wO0E9RVtPKytdOyl7aWYoIShJJiZWW3RoaXMuZ2V0VUlEKEEpXSkpe3AucHVzaChBKTt9fX1lbHNle2lmKHU9PSIjIil7aWYoIXRoaXMuaXNIVE1MRG9jdW1lbnR8fCF5KXticmVhayBzaW1wbGVTZWxlY3RvcnM7fUE9VS5nZXRFbGVtZW50QnlJZCh2KTsKaWYoIUEpe3JldHVybiBwO31pZih0aGlzLmlkR2V0c05hbWUmJkEuZ2V0QXR0cmlidXRlTm9kZSgiaWQiKS5ub2RlVmFsdWUhPXYpe2JyZWFrIHNpbXBsZVNlbGVjdG9yczt9aWYocyl7cmV0dXJuIEF8fG51bGw7fWlmKCEoSSYmVlt0aGlzLmdldFVJRChBKV0pKXtwLnB1c2goQSk7Cn19ZWxzZXtpZih1PT0iLiIpe2lmKCF0aGlzLmlzSFRNTERvY3VtZW50fHwoKCFVLmdldEVsZW1lbnRzQnlDbGFzc05hbWV8fHRoaXMuYnJva2VuR0VCQ04pJiZVLnF1ZXJ5U2VsZWN0b3JBbGwpKXticmVhayBzaW1wbGVTZWxlY3RvcnM7fWlmKFUuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSYmIXRoaXMuYnJva2VuR0VCQ04pe0U9VS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKHYpOwppZihzKXtyZXR1cm4gRVswXXx8bnVsbDt9Zm9yKE89MDtBPUVbTysrXTspe2lmKCEoSSYmVlt0aGlzLmdldFVJRChBKV0pKXtwLnB1c2goQSk7fX19ZWxzZXt2YXIgVD1uZXcgUmVnRXhwKCIoXnxcXHMpIitkLmVzY2FwZVJlZ0V4cCh2KSsiKFxcc3wkKSIpO0U9VS5nZXRFbGVtZW50c0J5VGFnTmFtZSgiKiIpOwpmb3IoTz0wO0E9RVtPKytdOyl7Y2xhc3NOYW1lPUEuY2xhc3NOYW1lO2lmKCEoY2xhc3NOYW1lJiZULnRlc3QoY2xhc3NOYW1lKSkpe2NvbnRpbnVlO31pZihzKXtyZXR1cm4gQTt9aWYoIShJJiZWW3RoaXMuZ2V0VUlEKEEpXSkpe3AucHVzaChBKTt9fX19fX1pZihJKXt0aGlzLnNvcnQocCk7Cn1yZXR1cm4ocyk/bnVsbDpwO31xdWVyeVNlbGVjdG9yOmlmKFUucXVlcnlTZWxlY3RvckFsbCl7aWYoIXRoaXMuaXNIVE1MRG9jdW1lbnR8fGZbel18fHRoaXMuYnJva2VuTWl4ZWRDYXNlUVNBfHwodGhpcy5icm9rZW5DaGVja2VkUVNBJiZ6LmluZGV4T2YoIjpjaGVja2VkIik+LTEpfHwodGhpcy5icm9rZW5FbXB0eUF0dHJpYnV0ZVFTQSYmZy50ZXN0KHopKXx8KCF5JiZ6LmluZGV4T2YoIiwiKT4tMSl8fGQuZGlzYWJsZVFTQSl7YnJlYWsgcXVlcnlTZWxlY3RvcjsKfXZhciBTPXoseD1VO2lmKCF5KXt2YXIgQz14LmdldEF0dHJpYnV0ZSgiaWQiKSx0PSJzbGlja2lkX18iO3guc2V0QXR0cmlidXRlKCJpZCIsdCk7Uz0iIyIrdCsiICIrUztVPXgucGFyZW50Tm9kZTt9dHJ5e2lmKHMpe3JldHVybiBVLnF1ZXJ5U2VsZWN0b3IoUyl8fG51bGw7Cn1lbHNle0U9VS5xdWVyeVNlbGVjdG9yQWxsKFMpO319Y2F0Y2goUSl7Zlt6XT0xO2JyZWFrIHF1ZXJ5U2VsZWN0b3I7fWZpbmFsbHl7aWYoIXkpe2lmKEMpe3guc2V0QXR0cmlidXRlKCJpZCIsQyk7fWVsc2V7eC5yZW1vdmVBdHRyaWJ1dGUoImlkIik7fVU9eDt9fWlmKHRoaXMuc3RhclNlbGVjdHNDbG9zZWRRU0Epe2ZvcihPPTA7CkE9RVtPKytdOyl7aWYoQS5ub2RlTmFtZT4iQCImJiEoSSYmVlt0aGlzLmdldFVJRChBKV0pKXtwLnB1c2goQSk7fX19ZWxzZXtmb3IoTz0wO0E9RVtPKytdOyl7aWYoIShJJiZWW3RoaXMuZ2V0VUlEKEEpXSkpe3AucHVzaChBKTt9fX1pZihJKXt0aGlzLnNvcnQocCk7Cn1yZXR1cm4gcDt9Rj10aGlzLlNsaWNrLnBhcnNlKHopO2lmKCFGLmxlbmd0aCl7cmV0dXJuIHA7fX1lbHNle2lmKHo9PW51bGwpe3JldHVybiBwO31lbHNle2lmKHouU2xpY2spe0Y9ejt9ZWxzZXtpZih0aGlzLmNvbnRhaW5zKFUuZG9jdW1lbnRFbGVtZW50fHxVLHopKXsocCk/cC5wdXNoKHopOnA9ejsKcmV0dXJuIHA7fWVsc2V7cmV0dXJuIHA7fX19fXRoaXMucG9zTlRIPXt9O3RoaXMucG9zTlRITGFzdD17fTt0aGlzLnBvc05USFR5cGU9e307dGhpcy5wb3NOVEhUeXBlTGFzdD17fTt0aGlzLnB1c2g9KCFJJiYoc3x8KEYubGVuZ3RoPT0xJiZGLmV4cHJlc3Npb25zWzBdLmxlbmd0aD09MSkpKT90aGlzLnB1c2hBcnJheTp0aGlzLnB1c2hVSUQ7CmlmKHA9PW51bGwpe3A9W107fXZhciBNLEwsSzt2YXIgQixKLEQsYyxxLEcsVzt2YXIgTixQLG8sdyxSPUYuZXhwcmVzc2lvbnM7c2VhcmNoOmZvcihPPTA7KFA9UltPXSk7TysrKXtmb3IoTT0wOyhvPVBbTV0pO00rKyl7Qj0iY29tYmluYXRvcjoiK28uY29tYmluYXRvcjsKaWYoIXRoaXNbQl0pe2NvbnRpbnVlIHNlYXJjaDt9Sj0odGhpcy5pc1hNTERvY3VtZW50KT9vLnRhZzpvLnRhZy50b1VwcGVyQ2FzZSgpO0Q9by5pZDtjPW8uY2xhc3NMaXN0O3E9by5jbGFzc2VzO0c9by5hdHRyaWJ1dGVzO1c9by5wc2V1ZG9zO3c9KE09PT0oUC5sZW5ndGgtMSkpOwp0aGlzLmJpdFVuaXF1ZXM9e307aWYodyl7dGhpcy51bmlxdWVzPVY7dGhpcy5mb3VuZD1wO31lbHNle3RoaXMudW5pcXVlcz17fTt0aGlzLmZvdW5kPVtdO31pZihNPT09MCl7dGhpc1tCXShVLEosRCxxLEcsVyxjKTtpZihzJiZ3JiZwLmxlbmd0aCl7YnJlYWsgc2VhcmNoOwp9fWVsc2V7aWYocyYmdyl7Zm9yKEw9MCxLPU4ubGVuZ3RoO0w8SztMKyspe3RoaXNbQl0oTltMXSxKLEQscSxHLFcsYyk7aWYocC5sZW5ndGgpe2JyZWFrIHNlYXJjaDt9fX1lbHNle2ZvcihMPTAsSz1OLmxlbmd0aDtMPEs7TCsrKXt0aGlzW0JdKE5bTF0sSixELHEsRyxXLGMpOwp9fX1OPXRoaXMuZm91bmQ7fX1pZihJfHwoRi5leHByZXNzaW9ucy5sZW5ndGg+MSkpe3RoaXMuc29ydChwKTt9cmV0dXJuKHMpPyhwWzBdfHxudWxsKTpwO307ai51aWR4PTE7ai51aWRrPSJzbGljay11bmlxdWVpZCI7ai5nZXRVSURYTUw9ZnVuY3Rpb24obSl7dmFyIGM9bS5nZXRBdHRyaWJ1dGUodGhpcy51aWRrKTsKaWYoIWMpe2M9dGhpcy51aWR4Kys7bS5zZXRBdHRyaWJ1dGUodGhpcy51aWRrLGMpO31yZXR1cm4gYzt9O2ouZ2V0VUlESFRNTD1mdW5jdGlvbihjKXtyZXR1cm4gYy51bmlxdWVOdW1iZXJ8fChjLnVuaXF1ZU51bWJlcj10aGlzLnVpZHgrKyk7fTtqLnNvcnQ9ZnVuY3Rpb24oYyl7aWYoIXRoaXMuZG9jdW1lbnRTb3J0ZXIpe3JldHVybiBjOwp9Yy5zb3J0KHRoaXMuZG9jdW1lbnRTb3J0ZXIpO3JldHVybiBjO307ai5jYWNoZU5USD17fTtqLm1hdGNoTlRIPS9eKFsrLV0/XGQqKT8oW2Etel0rKT8oWystXVxkKyk/JC87ai5wYXJzZU5USEFyZ3VtZW50PWZ1bmN0aW9uKHApe3ZhciBuPXAubWF0Y2godGhpcy5tYXRjaE5USCk7CmlmKCFuKXtyZXR1cm4gZmFsc2U7fXZhciBvPW5bMl18fGZhbHNlO3ZhciBtPW5bMV18fDE7aWYobT09Ii0iKXttPS0xO312YXIgYz0rblszXXx8MDtuPShvPT0ibiIpP3thOm0sYjpjfToobz09Im9kZCIpP3thOjIsYjoxfToobz09ImV2ZW4iKT97YToyLGI6MH06e2E6MCxiOm19OwpyZXR1cm4odGhpcy5jYWNoZU5USFtwXT1uKTt9O2ouY3JlYXRlTlRIUHNldWRvPWZ1bmN0aW9uKG8sbSxjLG4pe3JldHVybiBmdW5jdGlvbihyLHApe3ZhciB0PXRoaXMuZ2V0VUlEKHIpO2lmKCF0aGlzW2NdW3RdKXt2YXIgej1yLnBhcmVudE5vZGU7aWYoIXope3JldHVybiBmYWxzZTsKfXZhciBxPXpbb10scz0xO2lmKG4pe3ZhciB5PXIubm9kZU5hbWU7ZG97aWYocS5ub2RlTmFtZSE9eSl7Y29udGludWU7fXRoaXNbY11bdGhpcy5nZXRVSUQocSldPXMrKzt9d2hpbGUoKHE9cVttXSkpO31lbHNle2Rve2lmKHEubm9kZVR5cGUhPTEpe2NvbnRpbnVlOwp9dGhpc1tjXVt0aGlzLmdldFVJRChxKV09cysrO313aGlsZSgocT1xW21dKSk7fX1wPXB8fCJuIjt2YXIgdT10aGlzLmNhY2hlTlRIW3BdfHx0aGlzLnBhcnNlTlRIQXJndW1lbnQocCk7aWYoIXUpe3JldHVybiBmYWxzZTt9dmFyIHg9dS5hLHc9dS5iLHY9dGhpc1tjXVt0XTsKaWYoeD09MCl7cmV0dXJuIHc9PXY7fWlmKHg+MCl7aWYodjx3KXtyZXR1cm4gZmFsc2U7fX1lbHNle2lmKHc8dil7cmV0dXJuIGZhbHNlO319cmV0dXJuKCh2LXcpJXgpPT0wO307fTtqLnB1c2hBcnJheT1mdW5jdGlvbihvLGMscSxuLG0scCl7aWYodGhpcy5tYXRjaFNlbGVjdG9yKG8sYyxxLG4sbSxwKSl7dGhpcy5mb3VuZC5wdXNoKG8pOwp9fTtqLnB1c2hVSUQ9ZnVuY3Rpb24ocCxjLHIsbyxtLHEpe3ZhciBuPXRoaXMuZ2V0VUlEKHApO2lmKCF0aGlzLnVuaXF1ZXNbbl0mJnRoaXMubWF0Y2hTZWxlY3RvcihwLGMscixvLG0scSkpe3RoaXMudW5pcXVlc1tuXT10cnVlO3RoaXMuZm91bmQucHVzaChwKTt9fTsKai5tYXRjaE5vZGU9ZnVuY3Rpb24obSxuKXtpZih0aGlzLmlzSFRNTERvY3VtZW50JiZ0aGlzLm5hdGl2ZU1hdGNoZXNTZWxlY3Rvcil7dHJ5e3JldHVybiB0aGlzLm5hdGl2ZU1hdGNoZXNTZWxlY3Rvci5jYWxsKG0sbi5yZXBsYWNlKC9cWyhbXj1dKyk9XHMqKFteJyJcXV0rPylccypcXS9nLCdbJDE9IiQyIl0nKSk7Cn1jYXRjaCh1KXt9fXZhciB0PXRoaXMuU2xpY2sucGFyc2Uobik7aWYoIXQpe3JldHVybiB0cnVlO312YXIgcj10LmV4cHJlc3Npb25zLHAscz0wLHE7Zm9yKHE9MDsoY3VycmVudEV4cHJlc3Npb249cltxXSk7cSsrKXtpZihjdXJyZW50RXhwcmVzc2lvbi5sZW5ndGg9PTEpe3ZhciBvPWN1cnJlbnRFeHByZXNzaW9uWzBdOwppZih0aGlzLm1hdGNoU2VsZWN0b3IobSwodGhpcy5pc1hNTERvY3VtZW50KT9vLnRhZzpvLnRhZy50b1VwcGVyQ2FzZSgpLG8uaWQsby5jbGFzc2VzLG8uYXR0cmlidXRlcyxvLnBzZXVkb3MpKXtyZXR1cm4gdHJ1ZTt9cysrO319aWYocz09dC5sZW5ndGgpe3JldHVybiBmYWxzZTsKfXZhciBjPXRoaXMuc2VhcmNoKHRoaXMuZG9jdW1lbnQsdCksdjtmb3IocT0wO3Y9Y1txKytdOyl7aWYodj09PW0pe3JldHVybiB0cnVlO319cmV0dXJuIGZhbHNlO307ai5tYXRjaFBzZXVkbz1mdW5jdGlvbihwLGMsbyl7dmFyIG09InBzZXVkbzoiK2M7aWYodGhpc1ttXSl7cmV0dXJuIHRoaXNbbV0ocCxvKTsKfXZhciBuPXRoaXMuZ2V0QXR0cmlidXRlKHAsYyk7cmV0dXJuKG8pP289PW46ISFuO307ai5tYXRjaFNlbGVjdG9yPWZ1bmN0aW9uKG4sdSxjLG8scCxyKXtpZih1KXt2YXIgcz0odGhpcy5pc1hNTERvY3VtZW50KT9uLm5vZGVOYW1lOm4ubm9kZU5hbWUudG9VcHBlckNhc2UoKTsKaWYodT09IioiKXtpZihzPCJAIil7cmV0dXJuIGZhbHNlO319ZWxzZXtpZihzIT11KXtyZXR1cm4gZmFsc2U7fX19aWYoYyYmbi5nZXRBdHRyaWJ1dGUoImlkIikhPWMpe3JldHVybiBmYWxzZTt9dmFyIHEsbSx0O2lmKG8pe2ZvcihxPW8ubGVuZ3RoO3EtLTspe3Q9bi5nZXRBdHRyaWJ1dGUoImNsYXNzIil8fG4uY2xhc3NOYW1lOwppZighKHQmJm9bcV0ucmVnZXhwLnRlc3QodCkpKXtyZXR1cm4gZmFsc2U7fX19aWYocCl7Zm9yKHE9cC5sZW5ndGg7cS0tOyl7bT1wW3FdO2lmKG0ub3BlcmF0b3I/IW0udGVzdCh0aGlzLmdldEF0dHJpYnV0ZShuLG0ua2V5KSk6IXRoaXMuaGFzQXR0cmlidXRlKG4sbS5rZXkpKXtyZXR1cm4gZmFsc2U7Cn19fWlmKHIpe2ZvcihxPXIubGVuZ3RoO3EtLTspe209cltxXTtpZighdGhpcy5tYXRjaFBzZXVkbyhuLG0ua2V5LG0udmFsdWUpKXtyZXR1cm4gZmFsc2U7fX19cmV0dXJuIHRydWU7fTt2YXIgaT17IiAiOmZ1bmN0aW9uKHAsdixtLHEscix0LG8pe3ZhciBzLHUsbjsKaWYodGhpcy5pc0hUTUxEb2N1bWVudCl7Z2V0QnlJZDppZihtKXt1PXRoaXMuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQobSk7aWYoKCF1JiZwLmFsbCl8fCh0aGlzLmlkR2V0c05hbWUmJnUmJnUuZ2V0QXR0cmlidXRlTm9kZSgiaWQiKS5ub2RlVmFsdWUhPW0pKXtuPXAuYWxsW21dOwppZighbil7cmV0dXJuO31pZighblswXSl7bj1bbl07fWZvcihzPTA7dT1uW3MrK107KXt2YXIgYz11LmdldEF0dHJpYnV0ZU5vZGUoImlkIik7aWYoYyYmYy5ub2RlVmFsdWU9PW0pe3RoaXMucHVzaCh1LHYsbnVsbCxxLHIsdCk7YnJlYWs7fX1yZXR1cm47fWlmKCF1KXtpZih0aGlzLmNvbnRhaW5zKHRoaXMucm9vdCxwKSl7cmV0dXJuOwp9ZWxzZXticmVhayBnZXRCeUlkO319ZWxzZXtpZih0aGlzLmRvY3VtZW50IT09cCYmIXRoaXMuY29udGFpbnMocCx1KSl7cmV0dXJuO319dGhpcy5wdXNoKHUsdixudWxsLHEscix0KTtyZXR1cm47fWdldEJ5Q2xhc3M6aWYocSYmcC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lJiYhdGhpcy5icm9rZW5HRUJDTil7bj1wLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoby5qb2luKCIgIikpOwppZighKG4mJm4ubGVuZ3RoKSl7YnJlYWsgZ2V0QnlDbGFzczt9Zm9yKHM9MDt1PW5bcysrXTspe3RoaXMucHVzaCh1LHYsbSxudWxsLHIsdCk7fXJldHVybjt9fWdldEJ5VGFnOntuPXAuZ2V0RWxlbWVudHNCeVRhZ05hbWUodik7aWYoIShuJiZuLmxlbmd0aCkpe2JyZWFrIGdldEJ5VGFnOwp9aWYoIXRoaXMuYnJva2VuU3RhckdFQlROKXt2PW51bGw7fWZvcihzPTA7dT1uW3MrK107KXt0aGlzLnB1c2godSx2LG0scSxyLHQpO319fSwiPiI6ZnVuY3Rpb24obyxjLHEsbixtLHApe2lmKChvPW8uZmlyc3RDaGlsZCkpe2Rve2lmKG8ubm9kZVR5cGU9PTEpe3RoaXMucHVzaChvLGMscSxuLG0scCk7Cn19d2hpbGUoKG89by5uZXh0U2libGluZykpO319LCIrIjpmdW5jdGlvbihvLGMscSxuLG0scCl7d2hpbGUoKG89by5uZXh0U2libGluZykpe2lmKG8ubm9kZVR5cGU9PTEpe3RoaXMucHVzaChvLGMscSxuLG0scCk7YnJlYWs7fX19LCJeIjpmdW5jdGlvbihvLGMscSxuLG0scCl7bz1vLmZpcnN0Q2hpbGQ7CmlmKG8pe2lmKG8ubm9kZVR5cGU9PTEpe3RoaXMucHVzaChvLGMscSxuLG0scCk7fWVsc2V7dGhpc1siY29tYmluYXRvcjorIl0obyxjLHEsbixtLHApO319fSwifiI6ZnVuY3Rpb24ocCxjLHIsbyxtLHEpe3doaWxlKChwPXAubmV4dFNpYmxpbmcpKXtpZihwLm5vZGVUeXBlIT0xKXtjb250aW51ZTsKfXZhciBuPXRoaXMuZ2V0VUlEKHApO2lmKHRoaXMuYml0VW5pcXVlc1tuXSl7YnJlYWs7fXRoaXMuYml0VW5pcXVlc1tuXT10cnVlO3RoaXMucHVzaChwLGMscixvLG0scSk7fX0sIisrIjpmdW5jdGlvbihvLGMscSxuLG0scCl7dGhpc1siY29tYmluYXRvcjorIl0obyxjLHEsbixtLHApOwp0aGlzWyJjb21iaW5hdG9yOiErIl0obyxjLHEsbixtLHApO30sIn5+IjpmdW5jdGlvbihvLGMscSxuLG0scCl7dGhpc1siY29tYmluYXRvcjp+Il0obyxjLHEsbixtLHApO3RoaXNbImNvbWJpbmF0b3I6IX4iXShvLGMscSxuLG0scCk7fSwiISI6ZnVuY3Rpb24obyxjLHEsbixtLHApe3doaWxlKChvPW8ucGFyZW50Tm9kZSkpe2lmKG8hPT10aGlzLmRvY3VtZW50KXt0aGlzLnB1c2gobyxjLHEsbixtLHApOwp9fX0sIiE+IjpmdW5jdGlvbihvLGMscSxuLG0scCl7bz1vLnBhcmVudE5vZGU7aWYobyE9PXRoaXMuZG9jdW1lbnQpe3RoaXMucHVzaChvLGMscSxuLG0scCk7fX0sIiErIjpmdW5jdGlvbihvLGMscSxuLG0scCl7d2hpbGUoKG89by5wcmV2aW91c1NpYmxpbmcpKXtpZihvLm5vZGVUeXBlPT0xKXt0aGlzLnB1c2gobyxjLHEsbixtLHApOwpicmVhazt9fX0sIiFeIjpmdW5jdGlvbihvLGMscSxuLG0scCl7bz1vLmxhc3RDaGlsZDtpZihvKXtpZihvLm5vZGVUeXBlPT0xKXt0aGlzLnB1c2gobyxjLHEsbixtLHApO31lbHNle3RoaXNbImNvbWJpbmF0b3I6ISsiXShvLGMscSxuLG0scCk7fX19LCIhfiI6ZnVuY3Rpb24ocCxjLHIsbyxtLHEpe3doaWxlKChwPXAucHJldmlvdXNTaWJsaW5nKSl7aWYocC5ub2RlVHlwZSE9MSl7Y29udGludWU7Cn12YXIgbj10aGlzLmdldFVJRChwKTtpZih0aGlzLmJpdFVuaXF1ZXNbbl0pe2JyZWFrO310aGlzLmJpdFVuaXF1ZXNbbl09dHJ1ZTt0aGlzLnB1c2gocCxjLHIsbyxtLHEpO319fTtmb3IodmFyIGggaW4gaSl7alsiY29tYmluYXRvcjoiK2hdPWlbaF07fXZhciBrPXtlbXB0eTpmdW5jdGlvbihjKXt2YXIgbT1jLmZpcnN0Q2hpbGQ7CnJldHVybiAhKG0mJm0ubm9kZVR5cGU9PTEpJiYhKGMuaW5uZXJUZXh0fHxjLnRleHRDb250ZW50fHwiIikubGVuZ3RoO30sbm90OmZ1bmN0aW9uKGMsbSl7cmV0dXJuICF0aGlzLm1hdGNoTm9kZShjLG0pO30sY29udGFpbnM6ZnVuY3Rpb24oYyxtKXtyZXR1cm4oYy5pbm5lclRleHR8fGMudGV4dENvbnRlbnR8fCIiKS5pbmRleE9mKG0pPi0xOwp9LCJmaXJzdC1jaGlsZCI6ZnVuY3Rpb24oYyl7d2hpbGUoKGM9Yy5wcmV2aW91c1NpYmxpbmcpKXtpZihjLm5vZGVUeXBlPT0xKXtyZXR1cm4gZmFsc2U7fX1yZXR1cm4gdHJ1ZTt9LCJsYXN0LWNoaWxkIjpmdW5jdGlvbihjKXt3aGlsZSgoYz1jLm5leHRTaWJsaW5nKSl7aWYoYy5ub2RlVHlwZT09MSl7cmV0dXJuIGZhbHNlOwp9fXJldHVybiB0cnVlO30sIm9ubHktY2hpbGQiOmZ1bmN0aW9uKG4pe3ZhciBtPW47d2hpbGUoKG09bS5wcmV2aW91c1NpYmxpbmcpKXtpZihtLm5vZGVUeXBlPT0xKXtyZXR1cm4gZmFsc2U7fX12YXIgYz1uO3doaWxlKChjPWMubmV4dFNpYmxpbmcpKXtpZihjLm5vZGVUeXBlPT0xKXtyZXR1cm4gZmFsc2U7Cn19cmV0dXJuIHRydWU7fSwibnRoLWNoaWxkIjpqLmNyZWF0ZU5USFBzZXVkbygiZmlyc3RDaGlsZCIsIm5leHRTaWJsaW5nIiwicG9zTlRIIiksIm50aC1sYXN0LWNoaWxkIjpqLmNyZWF0ZU5USFBzZXVkbygibGFzdENoaWxkIiwicHJldmlvdXNTaWJsaW5nIiwicG9zTlRITGFzdCIpLCJudGgtb2YtdHlwZSI6ai5jcmVhdGVOVEhQc2V1ZG8oImZpcnN0Q2hpbGQiLCJuZXh0U2libGluZyIsInBvc05USFR5cGUiLHRydWUpLCJudGgtbGFzdC1vZi10eXBlIjpqLmNyZWF0ZU5USFBzZXVkbygibGFzdENoaWxkIiwicHJldmlvdXNTaWJsaW5nIiwicG9zTlRIVHlwZUxhc3QiLHRydWUpLGluZGV4OmZ1bmN0aW9uKG0sYyl7cmV0dXJuIHRoaXNbInBzZXVkbzpudGgtY2hpbGQiXShtLCIiK2MrMSk7Cn0sZXZlbjpmdW5jdGlvbihjKXtyZXR1cm4gdGhpc1sicHNldWRvOm50aC1jaGlsZCJdKGMsIjJuIik7fSxvZGQ6ZnVuY3Rpb24oYyl7cmV0dXJuIHRoaXNbInBzZXVkbzpudGgtY2hpbGQiXShjLCIybisxIik7fSwiZmlyc3Qtb2YtdHlwZSI6ZnVuY3Rpb24oYyl7dmFyIG09Yy5ub2RlTmFtZTsKd2hpbGUoKGM9Yy5wcmV2aW91c1NpYmxpbmcpKXtpZihjLm5vZGVOYW1lPT1tKXtyZXR1cm4gZmFsc2U7fX1yZXR1cm4gdHJ1ZTt9LCJsYXN0LW9mLXR5cGUiOmZ1bmN0aW9uKGMpe3ZhciBtPWMubm9kZU5hbWU7d2hpbGUoKGM9Yy5uZXh0U2libGluZykpe2lmKGMubm9kZU5hbWU9PW0pe3JldHVybiBmYWxzZTsKfX1yZXR1cm4gdHJ1ZTt9LCJvbmx5LW9mLXR5cGUiOmZ1bmN0aW9uKG4pe3ZhciBtPW4sbz1uLm5vZGVOYW1lO3doaWxlKChtPW0ucHJldmlvdXNTaWJsaW5nKSl7aWYobS5ub2RlTmFtZT09byl7cmV0dXJuIGZhbHNlO319dmFyIGM9bjt3aGlsZSgoYz1jLm5leHRTaWJsaW5nKSl7aWYoYy5ub2RlTmFtZT09byl7cmV0dXJuIGZhbHNlOwp9fXJldHVybiB0cnVlO30sZW5hYmxlZDpmdW5jdGlvbihjKXtyZXR1cm4gIWMuZGlzYWJsZWQ7fSxkaXNhYmxlZDpmdW5jdGlvbihjKXtyZXR1cm4gYy5kaXNhYmxlZDt9LGNoZWNrZWQ6ZnVuY3Rpb24oYyl7cmV0dXJuIGMuY2hlY2tlZHx8Yy5zZWxlY3RlZDt9LGZvY3VzOmZ1bmN0aW9uKGMpe3JldHVybiB0aGlzLmlzSFRNTERvY3VtZW50JiZ0aGlzLmRvY3VtZW50LmFjdGl2ZUVsZW1lbnQ9PT1jJiYoYy5ocmVmfHxjLnR5cGV8fHRoaXMuaGFzQXR0cmlidXRlKGMsInRhYmluZGV4IikpOwp9LHJvb3Q6ZnVuY3Rpb24oYyl7cmV0dXJuKGM9PT10aGlzLnJvb3QpO30sc2VsZWN0ZWQ6ZnVuY3Rpb24oYyl7cmV0dXJuIGMuc2VsZWN0ZWQ7fX07Zm9yKHZhciBhIGluIGspe2pbInBzZXVkbzoiK2FdPWtbYV07fWouYXR0cmlidXRlR2V0dGVycz17ImNsYXNzIjpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldEF0dHJpYnV0ZSgiY2xhc3MiKXx8dGhpcy5jbGFzc05hbWU7Cn0sImZvciI6ZnVuY3Rpb24oKXtyZXR1cm4oImh0bWxGb3IiIGluIHRoaXMpP3RoaXMuaHRtbEZvcjp0aGlzLmdldEF0dHJpYnV0ZSgiZm9yIik7fSxocmVmOmZ1bmN0aW9uKCl7cmV0dXJuKCJocmVmIiBpbiB0aGlzKT90aGlzLmdldEF0dHJpYnV0ZSgiaHJlZiIsMik6dGhpcy5nZXRBdHRyaWJ1dGUoImhyZWYiKTsKfSxzdHlsZTpmdW5jdGlvbigpe3JldHVybih0aGlzLnN0eWxlKT90aGlzLnN0eWxlLmNzc1RleHQ6dGhpcy5nZXRBdHRyaWJ1dGUoInN0eWxlIik7fSx0YWJpbmRleDpmdW5jdGlvbigpe3ZhciBjPXRoaXMuZ2V0QXR0cmlidXRlTm9kZSgidGFiaW5kZXgiKTtyZXR1cm4oYyYmYy5zcGVjaWZpZWQpP2Mubm9kZVZhbHVlOm51bGw7Cn0sdHlwZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldEF0dHJpYnV0ZSgidHlwZSIpO319O3ZhciBkPWouU2xpY2s9KHRoaXMuU2xpY2t8fHt9KTtkLnZlcnNpb249IjEuMS41IjtkLnNlYXJjaD1mdW5jdGlvbihtLG4sYyl7cmV0dXJuIGouc2VhcmNoKG0sbixjKTsKfTtkLmZpbmQ9ZnVuY3Rpb24oYyxtKXtyZXR1cm4gai5zZWFyY2goYyxtLG51bGwsdHJ1ZSk7fTtkLmNvbnRhaW5zPWZ1bmN0aW9uKGMsbSl7ai5zZXREb2N1bWVudChjKTtyZXR1cm4gai5jb250YWlucyhjLG0pO307ZC5nZXRBdHRyaWJ1dGU9ZnVuY3Rpb24obSxjKXtyZXR1cm4gai5nZXRBdHRyaWJ1dGUobSxjKTsKfTtkLm1hdGNoPWZ1bmN0aW9uKG0sYyl7aWYoIShtJiZjKSl7cmV0dXJuIGZhbHNlO31pZighY3x8Yz09PW0pe3JldHVybiB0cnVlO31qLnNldERvY3VtZW50KG0pO3JldHVybiBqLm1hdGNoTm9kZShtLGMpO307ZC5kZWZpbmVBdHRyaWJ1dGVHZXR0ZXI9ZnVuY3Rpb24oYyxtKXtqLmF0dHJpYnV0ZUdldHRlcnNbY109bTsKcmV0dXJuIHRoaXM7fTtkLmxvb2t1cEF0dHJpYnV0ZUdldHRlcj1mdW5jdGlvbihjKXtyZXR1cm4gai5hdHRyaWJ1dGVHZXR0ZXJzW2NdO307ZC5kZWZpbmVQc2V1ZG89ZnVuY3Rpb24oYyxtKXtqWyJwc2V1ZG86IitjXT1mdW5jdGlvbihvLG4pe3JldHVybiBtLmNhbGwobyxuKTsKfTtyZXR1cm4gdGhpczt9O2QubG9va3VwUHNldWRvPWZ1bmN0aW9uKGMpe3ZhciBtPWpbInBzZXVkbzoiK2NdO2lmKG0pe3JldHVybiBmdW5jdGlvbihuKXtyZXR1cm4gbS5jYWxsKHRoaXMsbik7fTt9cmV0dXJuIG51bGw7fTtkLm92ZXJyaWRlPWZ1bmN0aW9uKG0sYyl7ai5vdmVycmlkZShtLGMpOwpyZXR1cm4gdGhpczt9O2QuaXNYTUw9ai5pc1hNTDtkLnVpZE9mPWZ1bmN0aW9uKGMpe3JldHVybiBqLmdldFVJREhUTUwoYyk7fTtpZighdGhpcy5TbGljayl7dGhpcy5TbGljaz1kO319KS5hcHBseSgodHlwZW9mIGV4cG9ydHMhPSJ1bmRlZmluZWQiKT9leHBvcnRzOnRoaXMpOwp2YXIgRWxlbWVudD1mdW5jdGlvbihiLGcpe3ZhciBoPUVsZW1lbnQuQ29uc3RydWN0b3JzW2JdO2lmKGgpe3JldHVybiBoKGcpO31pZih0eXBlb2YgYiE9InN0cmluZyIpe3JldHVybiBkb2N1bWVudC5pZChiKS5zZXQoZyk7fWlmKCFnKXtnPXt9O31pZighKC9eW1x3LV0rJC8pLnRlc3QoYikpe3ZhciBlPVNsaWNrLnBhcnNlKGIpLmV4cHJlc3Npb25zWzBdWzBdOwpiPShlLnRhZz09IioiKT8iZGl2IjplLnRhZztpZihlLmlkJiZnLmlkPT1udWxsKXtnLmlkPWUuaWQ7fXZhciBkPWUuYXR0cmlidXRlcztpZihkKXtmb3IodmFyIGY9MCxjPWQubGVuZ3RoO2Y8YztmKyspe3ZhciBhPWRbZl07aWYoZ1thLmtleV0hPW51bGwpe2NvbnRpbnVlOwp9aWYoYS52YWx1ZSE9bnVsbCYmYS5vcGVyYXRvcj09Ij0iKXtnW2Eua2V5XT1hLnZhbHVlO31lbHNle2lmKCFhLnZhbHVlJiYhYS5vcGVyYXRvcil7Z1thLmtleV09dHJ1ZTt9fX19aWYoZS5jbGFzc0xpc3QmJmdbImNsYXNzIl09PW51bGwpe2dbImNsYXNzIl09ZS5jbGFzc0xpc3Quam9pbigiICIpOwp9fXJldHVybiBkb2N1bWVudC5uZXdFbGVtZW50KGIsZyk7fTtpZihCcm93c2VyLkVsZW1lbnQpe0VsZW1lbnQucHJvdG90eXBlPUJyb3dzZXIuRWxlbWVudC5wcm90b3R5cGU7fW5ldyBUeXBlKCJFbGVtZW50IixFbGVtZW50KS5taXJyb3IoZnVuY3Rpb24oYSl7aWYoQXJyYXkucHJvdG90eXBlW2FdKXtyZXR1cm47Cn12YXIgYj17fTtiW2FdPWZ1bmN0aW9uKCl7dmFyIGg9W10sZT1hcmd1bWVudHMsaj10cnVlO2Zvcih2YXIgZz0wLGQ9dGhpcy5sZW5ndGg7ZzxkO2crKyl7dmFyIGY9dGhpc1tnXSxjPWhbZ109ZlthXS5hcHBseShmLGUpO2o9KGomJnR5cGVPZihjKT09ImVsZW1lbnQiKTsKfXJldHVybihqKT9uZXcgRWxlbWVudHMoaCk6aDt9O0VsZW1lbnRzLmltcGxlbWVudChiKTt9KTtpZighQnJvd3Nlci5FbGVtZW50KXtFbGVtZW50LnBhcmVudD1PYmplY3Q7RWxlbWVudC5Qcm90b3R5cGU9eyIkZmFtaWx5IjpGdW5jdGlvbi5mcm9tKCJlbGVtZW50IikuaGlkZSgpfTsKRWxlbWVudC5taXJyb3IoZnVuY3Rpb24oYSxiKXtFbGVtZW50LlByb3RvdHlwZVthXT1iO30pO31FbGVtZW50LkNvbnN0cnVjdG9ycz17fTtFbGVtZW50LkNvbnN0cnVjdG9ycz1uZXcgSGFzaDt2YXIgSUZyYW1lPW5ldyBUeXBlKCJJRnJhbWUiLGZ1bmN0aW9uKCl7dmFyIGU9QXJyYXkubGluayhhcmd1bWVudHMse3Byb3BlcnRpZXM6VHlwZS5pc09iamVjdCxpZnJhbWU6ZnVuY3Rpb24oZil7cmV0dXJuKGYhPW51bGwpOwp9fSk7dmFyIGM9ZS5wcm9wZXJ0aWVzfHx7fSxiO2lmKGUuaWZyYW1lKXtiPWRvY3VtZW50LmlkKGUuaWZyYW1lKTt9dmFyIGQ9Yy5vbmxvYWR8fGZ1bmN0aW9uKCl7fTtkZWxldGUgYy5vbmxvYWQ7Yy5pZD1jLm5hbWU9W2MuaWQsYy5uYW1lLGI/KGIuaWR8fGIubmFtZSk6IklGcmFtZV8iK1N0cmluZy51bmlxdWVJRCgpXS5waWNrKCk7CmI9bmV3IEVsZW1lbnQoYnx8ImlmcmFtZSIsYyk7dmFyIGE9ZnVuY3Rpb24oKXtkLmNhbGwoYi5jb250ZW50V2luZG93KTt9O2lmKHdpbmRvdy5mcmFtZXNbYy5pZF0pe2EoKTt9ZWxzZXtiLmFkZExpc3RlbmVyKCJsb2FkIixhKTt9cmV0dXJuIGI7fSk7dmFyIEVsZW1lbnRzPXRoaXMuRWxlbWVudHM9ZnVuY3Rpb24oYSl7aWYoYSYmYS5sZW5ndGgpe3ZhciBlPXt9LGQ7CmZvcih2YXIgYz0wO2Q9YVtjKytdOyl7dmFyIGI9U2xpY2sudWlkT2YoZCk7aWYoIWVbYl0pe2VbYl09dHJ1ZTt0aGlzLnB1c2goZCk7fX19fTtFbGVtZW50cy5wcm90b3R5cGU9e2xlbmd0aDowfTtFbGVtZW50cy5wYXJlbnQ9QXJyYXk7bmV3IFR5cGUoIkVsZW1lbnRzIixFbGVtZW50cykuaW1wbGVtZW50KHtmaWx0ZXI6ZnVuY3Rpb24oYSxiKXtpZighYSl7cmV0dXJuIHRoaXM7Cn1yZXR1cm4gbmV3IEVsZW1lbnRzKEFycmF5LmZpbHRlcih0aGlzLCh0eXBlT2YoYSk9PSJzdHJpbmciKT9mdW5jdGlvbihjKXtyZXR1cm4gYy5tYXRjaChhKTt9OmEsYikpO30ucHJvdGVjdCgpLHB1c2g6ZnVuY3Rpb24oKXt2YXIgZD10aGlzLmxlbmd0aDtmb3IodmFyIGI9MCxhPWFyZ3VtZW50cy5sZW5ndGg7CmI8YTtiKyspe3ZhciBjPWRvY3VtZW50LmlkKGFyZ3VtZW50c1tiXSk7aWYoYyl7dGhpc1tkKytdPWM7fX1yZXR1cm4odGhpcy5sZW5ndGg9ZCk7fS5wcm90ZWN0KCksdW5zaGlmdDpmdW5jdGlvbigpe3ZhciBiPVtdO2Zvcih2YXIgYz0wLGE9YXJndW1lbnRzLmxlbmd0aDsKYzxhO2MrKyl7dmFyIGQ9ZG9jdW1lbnQuaWQoYXJndW1lbnRzW2NdKTtpZihkKXtiLnB1c2goZCk7fX1yZXR1cm4gQXJyYXkucHJvdG90eXBlLnVuc2hpZnQuYXBwbHkodGhpcyxiKTt9LnByb3RlY3QoKSxjb25jYXQ6ZnVuY3Rpb24oKXt2YXIgYj1uZXcgRWxlbWVudHModGhpcyk7CmZvcih2YXIgYz0wLGE9YXJndW1lbnRzLmxlbmd0aDtjPGE7YysrKXt2YXIgZD1hcmd1bWVudHNbY107aWYoVHlwZS5pc0VudW1lcmFibGUoZCkpe2IuYXBwZW5kKGQpO31lbHNle2IucHVzaChkKTt9fXJldHVybiBiO30ucHJvdGVjdCgpLGFwcGVuZDpmdW5jdGlvbihjKXtmb3IodmFyIGI9MCxhPWMubGVuZ3RoOwpiPGE7YisrKXt0aGlzLnB1c2goY1tiXSk7fXJldHVybiB0aGlzO30ucHJvdGVjdCgpLGVtcHR5OmZ1bmN0aW9uKCl7d2hpbGUodGhpcy5sZW5ndGgpe2RlbGV0ZSB0aGlzWy0tdGhpcy5sZW5ndGhdO31yZXR1cm4gdGhpczt9LnByb3RlY3QoKX0pO0VsZW1lbnRzLmFsaWFzKCJleHRlbmQiLCJhcHBlbmQiKTsKKGZ1bmN0aW9uKCl7dmFyIGc9QXJyYXkucHJvdG90eXBlLnNwbGljZSxiPXsiMCI6MCwiMSI6MSxsZW5ndGg6Mn07Zy5jYWxsKGIsMSwxKTtpZihiWzFdPT0xKXtFbGVtZW50cy5pbXBsZW1lbnQoInNwbGljZSIsZnVuY3Rpb24oKXt2YXIgZT10aGlzLmxlbmd0aDtnLmFwcGx5KHRoaXMsYXJndW1lbnRzKTsKd2hpbGUoZT49dGhpcy5sZW5ndGgpe2RlbGV0ZSB0aGlzW2UtLV07fXJldHVybiB0aGlzO30ucHJvdGVjdCgpKTt9RWxlbWVudHMuaW1wbGVtZW50KEFycmF5LnByb3RvdHlwZSk7QXJyYXkubWlycm9yKEVsZW1lbnRzKTt2YXIgZjt0cnl7dmFyIGE9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiPGlucHV0IG5hbWU9eD4iKTsKZj0oYS5uYW1lPT0ieCIpO31jYXRjaChjKXt9dmFyIGQ9ZnVuY3Rpb24oZSl7cmV0dXJuKCIiK2UpLnJlcGxhY2UoLyYvZywiJmFtcDsiKS5yZXBsYWNlKC8iL2csIiZxdW90OyIpO307RG9jdW1lbnQuaW1wbGVtZW50KHtuZXdFbGVtZW50OmZ1bmN0aW9uKGUsaCl7aWYoaCYmaC5jaGVja2VkIT1udWxsKXtoLmRlZmF1bHRDaGVja2VkPWguY2hlY2tlZDsKfWlmKGYmJmgpe2U9IjwiK2U7aWYoaC5uYW1lKXtlKz0nIG5hbWU9IicrZChoLm5hbWUpKyciJzt9aWYoaC50eXBlKXtlKz0nIHR5cGU9IicrZChoLnR5cGUpKyciJzt9ZSs9Ij4iO2RlbGV0ZSBoLm5hbWU7ZGVsZXRlIGgudHlwZTt9cmV0dXJuIHRoaXMuaWQodGhpcy5jcmVhdGVFbGVtZW50KGUpKS5zZXQoaCk7Cn19KTt9KSgpO0RvY3VtZW50LmltcGxlbWVudCh7bmV3VGV4dE5vZGU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuY3JlYXRlVGV4dE5vZGUoYSk7fSxnZXREb2N1bWVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzO30sZ2V0V2luZG93OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMud2luZG93Owp9LGlkOihmdW5jdGlvbigpe3ZhciBhPXtzdHJpbmc6ZnVuY3Rpb24oZCxjLGIpe2Q9U2xpY2suZmluZChiLCIjIitkLnJlcGxhY2UoLyhcVykvZywiXFwkMSIpKTtyZXR1cm4oZCk/YS5lbGVtZW50KGQsYyk6bnVsbDt9LGVsZW1lbnQ6ZnVuY3Rpb24oYixjKXskdWlkKGIpOwppZighYyYmIWIuJGZhbWlseSYmISgvXig/Om9iamVjdHxlbWJlZCkkL2kpLnRlc3QoYi50YWdOYW1lKSl7T2JqZWN0LmFwcGVuZChiLEVsZW1lbnQuUHJvdG90eXBlKTt9cmV0dXJuIGI7fSxvYmplY3Q6ZnVuY3Rpb24oYyxkLGIpe2lmKGMudG9FbGVtZW50KXtyZXR1cm4gYS5lbGVtZW50KGMudG9FbGVtZW50KGIpLGQpOwp9cmV0dXJuIG51bGw7fX07YS50ZXh0bm9kZT1hLndoaXRlc3BhY2U9YS53aW5kb3c9YS5kb2N1bWVudD1mdW5jdGlvbihiKXtyZXR1cm4gYjt9O3JldHVybiBmdW5jdGlvbihjLGUsZCl7aWYoYyYmYy4kZmFtaWx5JiZjLnVpZCl7cmV0dXJuIGM7fXZhciBiPXR5cGVPZihjKTsKcmV0dXJuKGFbYl0pP2FbYl0oYyxlLGR8fGRvY3VtZW50KTpudWxsO307fSkoKX0pO2lmKHdpbmRvdy4kPT1udWxsKXtXaW5kb3cuaW1wbGVtZW50KCIkIixmdW5jdGlvbihhLGIpe3JldHVybiBkb2N1bWVudC5pZChhLGIsdGhpcy5kb2N1bWVudCk7fSk7fVdpbmRvdy5pbXBsZW1lbnQoe2dldERvY3VtZW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZG9jdW1lbnQ7Cn0sZ2V0V2luZG93OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXM7fX0pO1tEb2N1bWVudCxFbGVtZW50XS5pbnZva2UoImltcGxlbWVudCIse2dldEVsZW1lbnRzOmZ1bmN0aW9uKGEpe3JldHVybiBTbGljay5zZWFyY2godGhpcyxhLG5ldyBFbGVtZW50cyk7fSxnZXRFbGVtZW50OmZ1bmN0aW9uKGEpe3JldHVybiBkb2N1bWVudC5pZChTbGljay5maW5kKHRoaXMsYSkpOwp9fSk7KGZ1bmN0aW9uKGIsZCxhKXt0aGlzLlNlbGVjdG9ycz17fTt2YXIgZT10aGlzLlNlbGVjdG9ycy5Qc2V1ZG89bmV3IEhhc2goKTt2YXIgYz1mdW5jdGlvbigpe2Zvcih2YXIgZiBpbiBlKXtpZihlLmhhc093blByb3BlcnR5KGYpKXtTbGljay5kZWZpbmVQc2V1ZG8oZixlW2ZdKTsKZGVsZXRlIGVbZl07fX19O1NsaWNrLnNlYXJjaD1mdW5jdGlvbihnLGgsZil7YygpO3JldHVybiBiLmNhbGwodGhpcyxnLGgsZik7fTtTbGljay5maW5kPWZ1bmN0aW9uKGYsZyl7YygpO3JldHVybiBkLmNhbGwodGhpcyxmLGcpO307U2xpY2subWF0Y2g9ZnVuY3Rpb24oZyxmKXtjKCk7CnJldHVybiBhLmNhbGwodGhpcyxnLGYpO307fSkoU2xpY2suc2VhcmNoLFNsaWNrLmZpbmQsU2xpY2subWF0Y2gpO2lmKHdpbmRvdy4kJD09bnVsbCl7V2luZG93LmltcGxlbWVudCgiJCQiLGZ1bmN0aW9uKGEpe3ZhciBmPW5ldyBFbGVtZW50cztpZihhcmd1bWVudHMubGVuZ3RoPT0xJiZ0eXBlb2YgYT09InN0cmluZyIpe3JldHVybiBTbGljay5zZWFyY2godGhpcy5kb2N1bWVudCxhLGYpOwp9dmFyIGM9QXJyYXkuZmxhdHRlbihhcmd1bWVudHMpO2Zvcih2YXIgZD0wLGI9Yy5sZW5ndGg7ZDxiO2QrKyl7dmFyIGU9Y1tkXTtzd2l0Y2godHlwZU9mKGUpKXtjYXNlImVsZW1lbnQiOmYucHVzaChlKTticmVhaztjYXNlInN0cmluZyI6U2xpY2suc2VhcmNoKHRoaXMuZG9jdW1lbnQsZSxmKTsKfX1yZXR1cm4gZjt9KTt9aWYod2luZG93LiQkPT1udWxsKXtXaW5kb3cuaW1wbGVtZW50KCIkJCIsZnVuY3Rpb24oYSl7aWYoYXJndW1lbnRzLmxlbmd0aD09MSl7aWYodHlwZW9mIGE9PSJzdHJpbmciKXtyZXR1cm4gU2xpY2suc2VhcmNoKHRoaXMuZG9jdW1lbnQsYSxuZXcgRWxlbWVudHMpOwp9ZWxzZXtpZihUeXBlLmlzRW51bWVyYWJsZShhKSl7cmV0dXJuIG5ldyBFbGVtZW50cyhhKTt9fX1yZXR1cm4gbmV3IEVsZW1lbnRzKGFyZ3VtZW50cyk7fSk7fShmdW5jdGlvbigpe3ZhciBrPXt9LGk9e307dmFyIG49e2lucHV0OiJjaGVja2VkIixvcHRpb246InNlbGVjdGVkIix0ZXh0YXJlYToidmFsdWUifTsKdmFyIGU9ZnVuY3Rpb24ocCl7cmV0dXJuKGlbcF18fChpW3BdPXt9KSk7fTt2YXIgaj1mdW5jdGlvbihxKXt2YXIgcD1xLnVpZDtpZihxLnJlbW92ZUV2ZW50cyl7cS5yZW1vdmVFdmVudHMoKTt9aWYocS5jbGVhckF0dHJpYnV0ZXMpe3EuY2xlYXJBdHRyaWJ1dGVzKCk7Cn1pZihwIT1udWxsKXtkZWxldGUga1twXTtkZWxldGUgaVtwXTt9cmV0dXJuIHE7fTt2YXIgbz1bImRlZmF1bHRWYWx1ZSIsImFjY2Vzc0tleSIsImNlbGxQYWRkaW5nIiwiY2VsbFNwYWNpbmciLCJjb2xTcGFuIiwiZnJhbWVCb3JkZXIiLCJtYXhMZW5ndGgiLCJyZWFkT25seSIsInJvd1NwYW4iLCJ0YWJJbmRleCIsInVzZU1hcCJdOwp2YXIgZD1bImNvbXBhY3QiLCJub3dyYXAiLCJpc21hcCIsImRlY2xhcmUiLCJub3NoYWRlIiwiY2hlY2tlZCIsImRpc2FibGVkIiwicmVhZE9ubHkiLCJtdWx0aXBsZSIsInNlbGVjdGVkIiwibm9yZXNpemUiLCJkZWZlciIsImRlZmF1bHRDaGVja2VkIl07dmFyIGc9e2h0bWw6ImlubmVySFRNTCIsImNsYXNzIjoiY2xhc3NOYW1lIiwiZm9yIjoiaHRtbEZvciIsdGV4dDooZnVuY3Rpb24oKXt2YXIgcD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKcmV0dXJuKHAudGV4dENvbnRlbnQ9PW51bGwpPyJpbm5lclRleHQiOiJ0ZXh0Q29udGVudCI7fSkoKX07dmFyIG09WyJ0eXBlIl07dmFyIGg9WyJ2YWx1ZSIsImRlZmF1bHRWYWx1ZSJdO3ZhciBsPS9eKD86aHJlZnxzcmN8dXNlbWFwKSQvaTtkPWQuYXNzb2NpYXRlKGQpOwpvPW8uYXNzb2NpYXRlKG8ubWFwKFN0cmluZy50b0xvd2VyQ2FzZSkpO209bS5hc3NvY2lhdGUobSk7T2JqZWN0LmFwcGVuZChnLGguYXNzb2NpYXRlKGgpKTt2YXIgYz17YmVmb3JlOmZ1bmN0aW9uKHEscCl7dmFyIHI9cC5wYXJlbnROb2RlO2lmKHIpe3IuaW5zZXJ0QmVmb3JlKHEscCk7Cn19LGFmdGVyOmZ1bmN0aW9uKHEscCl7dmFyIHI9cC5wYXJlbnROb2RlO2lmKHIpe3IuaW5zZXJ0QmVmb3JlKHEscC5uZXh0U2libGluZyk7fX0sYm90dG9tOmZ1bmN0aW9uKHEscCl7cC5hcHBlbmRDaGlsZChxKTt9LHRvcDpmdW5jdGlvbihxLHApe3AuaW5zZXJ0QmVmb3JlKHEscC5maXJzdENoaWxkKTsKfX07Yy5pbnNpZGU9Yy5ib3R0b207T2JqZWN0LmVhY2goYyxmdW5jdGlvbihxLHIpe3I9ci5jYXBpdGFsaXplKCk7dmFyIHA9e307cFsiaW5qZWN0IityXT1mdW5jdGlvbihzKXtxKHRoaXMsZG9jdW1lbnQuaWQocyx0cnVlKSk7cmV0dXJuIHRoaXM7fTtwWyJncmFiIityXT1mdW5jdGlvbihzKXtxKGRvY3VtZW50LmlkKHMsdHJ1ZSksdGhpcyk7CnJldHVybiB0aGlzO307RWxlbWVudC5pbXBsZW1lbnQocCk7fSk7dmFyIGI9ZnVuY3Rpb24ocyxyKXtpZighcyl7cmV0dXJuIHI7fXM9T2JqZWN0LmNsb25lKFNsaWNrLnBhcnNlKHMpKTt2YXIgcT1zLmV4cHJlc3Npb25zO2Zvcih2YXIgcD1xLmxlbmd0aDtwLS07KXtxW3BdWzBdLmNvbWJpbmF0b3I9cjsKfXJldHVybiBzO307RWxlbWVudC5pbXBsZW1lbnQoe3NldDpmdW5jdGlvbihyLHEpe3ZhciBwPUVsZW1lbnQuUHJvcGVydGllc1tyXTsocCYmcC5zZXQpP3Auc2V0LmNhbGwodGhpcyxxKTp0aGlzLnNldFByb3BlcnR5KHIscSk7fS5vdmVybG9hZFNldHRlcigpLGdldDpmdW5jdGlvbihxKXt2YXIgcD1FbGVtZW50LlByb3BlcnRpZXNbcV07CnJldHVybihwJiZwLmdldCk/cC5nZXQuYXBwbHkodGhpcyk6dGhpcy5nZXRQcm9wZXJ0eShxKTt9Lm92ZXJsb2FkR2V0dGVyKCksZXJhc2U6ZnVuY3Rpb24ocSl7dmFyIHA9RWxlbWVudC5Qcm9wZXJ0aWVzW3FdOyhwJiZwLmVyYXNlKT9wLmVyYXNlLmFwcGx5KHRoaXMpOnRoaXMucmVtb3ZlUHJvcGVydHkocSk7CnJldHVybiB0aGlzO30sc2V0UHJvcGVydHk6ZnVuY3Rpb24ocSxyKXtxPW9bcV18fHE7aWYocj09bnVsbCl7cmV0dXJuIHRoaXMucmVtb3ZlUHJvcGVydHkocSk7fXZhciBwPWdbcV07KHApP3RoaXNbcF09cjooZFtxXSk/dGhpc1txXT0hIXI6dGhpcy5zZXRBdHRyaWJ1dGUocSwiIityKTsKcmV0dXJuIHRoaXM7fSxzZXRQcm9wZXJ0aWVzOmZ1bmN0aW9uKHApe2Zvcih2YXIgcSBpbiBwKXt0aGlzLnNldFByb3BlcnR5KHEscFtxXSk7fXJldHVybiB0aGlzO30sZ2V0UHJvcGVydHk6ZnVuY3Rpb24ocSl7cT1vW3FdfHxxO3ZhciBwPWdbcV18fG1bcV07cmV0dXJuKHApP3RoaXNbcF06KGRbcV0pPyEhdGhpc1txXToobC50ZXN0KHEpP3RoaXMuZ2V0QXR0cmlidXRlKHEsMik6KHA9dGhpcy5nZXRBdHRyaWJ1dGVOb2RlKHEpKT9wLm5vZGVWYWx1ZTpudWxsKXx8bnVsbDsKfSxnZXRQcm9wZXJ0aWVzOmZ1bmN0aW9uKCl7dmFyIHA9QXJyYXkuZnJvbShhcmd1bWVudHMpO3JldHVybiBwLm1hcCh0aGlzLmdldFByb3BlcnR5LHRoaXMpLmFzc29jaWF0ZShwKTt9LHJlbW92ZVByb3BlcnR5OmZ1bmN0aW9uKHEpe3E9b1txXXx8cTt2YXIgcD1nW3FdOwoocCk/dGhpc1twXT0iIjooZFtxXSk/dGhpc1txXT1mYWxzZTp0aGlzLnJlbW92ZUF0dHJpYnV0ZShxKTtyZXR1cm4gdGhpczt9LHJlbW92ZVByb3BlcnRpZXM6ZnVuY3Rpb24oKXtBcnJheS5lYWNoKGFyZ3VtZW50cyx0aGlzLnJlbW92ZVByb3BlcnR5LHRoaXMpO3JldHVybiB0aGlzOwp9LGhhc0NsYXNzOmZ1bmN0aW9uKHApe3JldHVybiB0aGlzLmNsYXNzTmFtZS5jbGVhbigpLmNvbnRhaW5zKHAsIiAiKTt9LGFkZENsYXNzOmZ1bmN0aW9uKHApe2lmKCF0aGlzLmhhc0NsYXNzKHApKXt0aGlzLmNsYXNzTmFtZT0odGhpcy5jbGFzc05hbWUrIiAiK3ApLmNsZWFuKCk7Cn1yZXR1cm4gdGhpczt9LHJlbW92ZUNsYXNzOmZ1bmN0aW9uKHApe3RoaXMuY2xhc3NOYW1lPXRoaXMuY2xhc3NOYW1lLnJlcGxhY2UobmV3IFJlZ0V4cCgiKF58XFxzKSIrcCsiKD86XFxzfCQpIiksIiQxIik7cmV0dXJuIHRoaXM7fSx0b2dnbGVDbGFzczpmdW5jdGlvbihwLHEpe2lmKHE9PW51bGwpe3E9IXRoaXMuaGFzQ2xhc3MocCk7Cn1yZXR1cm4ocSk/dGhpcy5hZGRDbGFzcyhwKTp0aGlzLnJlbW92ZUNsYXNzKHApO30sYWRvcHQ6ZnVuY3Rpb24oKXt2YXIgcz10aGlzLHAsdT1BcnJheS5mbGF0dGVuKGFyZ3VtZW50cyksdD11Lmxlbmd0aDtpZih0PjEpe3M9cD1kb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7Cn1mb3IodmFyIHI9MDtyPHQ7cisrKXt2YXIgcT1kb2N1bWVudC5pZCh1W3JdLHRydWUpO2lmKHEpe3MuYXBwZW5kQ2hpbGQocSk7fX1pZihwKXt0aGlzLmFwcGVuZENoaWxkKHApO31yZXR1cm4gdGhpczt9LGFwcGVuZFRleHQ6ZnVuY3Rpb24ocSxwKXtyZXR1cm4gdGhpcy5ncmFiKHRoaXMuZ2V0RG9jdW1lbnQoKS5uZXdUZXh0Tm9kZShxKSxwKTsKfSxncmFiOmZ1bmN0aW9uKHEscCl7Y1twfHwiYm90dG9tIl0oZG9jdW1lbnQuaWQocSx0cnVlKSx0aGlzKTtyZXR1cm4gdGhpczt9LGluamVjdDpmdW5jdGlvbihxLHApe2NbcHx8ImJvdHRvbSJdKHRoaXMsZG9jdW1lbnQuaWQocSx0cnVlKSk7cmV0dXJuIHRoaXM7fSxyZXBsYWNlczpmdW5jdGlvbihwKXtwPWRvY3VtZW50LmlkKHAsdHJ1ZSk7CnAucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQodGhpcyxwKTtyZXR1cm4gdGhpczt9LHdyYXBzOmZ1bmN0aW9uKHEscCl7cT1kb2N1bWVudC5pZChxLHRydWUpO3JldHVybiB0aGlzLnJlcGxhY2VzKHEpLmdyYWIocSxwKTt9LGdldFByZXZpb3VzOmZ1bmN0aW9uKHApe3JldHVybiBkb2N1bWVudC5pZChTbGljay5maW5kKHRoaXMsYihwLCIhfiIpKSk7Cn0sZ2V0QWxsUHJldmlvdXM6ZnVuY3Rpb24ocCl7cmV0dXJuIFNsaWNrLnNlYXJjaCh0aGlzLGIocCwiIX4iKSxuZXcgRWxlbWVudHMpO30sZ2V0TmV4dDpmdW5jdGlvbihwKXtyZXR1cm4gZG9jdW1lbnQuaWQoU2xpY2suZmluZCh0aGlzLGIocCwifiIpKSk7fSxnZXRBbGxOZXh0OmZ1bmN0aW9uKHApe3JldHVybiBTbGljay5zZWFyY2godGhpcyxiKHAsIn4iKSxuZXcgRWxlbWVudHMpOwp9LGdldEZpcnN0OmZ1bmN0aW9uKHApe3JldHVybiBkb2N1bWVudC5pZChTbGljay5zZWFyY2godGhpcyxiKHAsIj4iKSlbMF0pO30sZ2V0TGFzdDpmdW5jdGlvbihwKXtyZXR1cm4gZG9jdW1lbnQuaWQoU2xpY2suc2VhcmNoKHRoaXMsYihwLCI+IikpLmdldExhc3QoKSk7Cn0sZ2V0UGFyZW50OmZ1bmN0aW9uKHApe3JldHVybiBkb2N1bWVudC5pZChTbGljay5maW5kKHRoaXMsYihwLCIhIikpKTt9LGdldFBhcmVudHM6ZnVuY3Rpb24ocCl7cmV0dXJuIFNsaWNrLnNlYXJjaCh0aGlzLGIocCwiISIpLG5ldyBFbGVtZW50cyk7fSxnZXRTaWJsaW5nczpmdW5jdGlvbihwKXtyZXR1cm4gU2xpY2suc2VhcmNoKHRoaXMsYihwLCJ+fiIpLG5ldyBFbGVtZW50cyk7Cn0sZ2V0Q2hpbGRyZW46ZnVuY3Rpb24ocCl7cmV0dXJuIFNsaWNrLnNlYXJjaCh0aGlzLGIocCwiPiIpLG5ldyBFbGVtZW50cyk7fSxnZXRXaW5kb3c6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vd25lckRvY3VtZW50LndpbmRvdzt9LGdldERvY3VtZW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub3duZXJEb2N1bWVudDsKfSxnZXRFbGVtZW50QnlJZDpmdW5jdGlvbihwKXtyZXR1cm4gZG9jdW1lbnQuaWQoU2xpY2suZmluZCh0aGlzLCIjIisoIiIrcCkucmVwbGFjZSgvKFxXKS9nLCJcXCQxIikpKTt9LGdldFNlbGVjdGVkOmZ1bmN0aW9uKCl7dGhpcy5zZWxlY3RlZEluZGV4O3JldHVybiBuZXcgRWxlbWVudHMoQXJyYXkuZnJvbSh0aGlzLm9wdGlvbnMpLmZpbHRlcihmdW5jdGlvbihwKXtyZXR1cm4gcC5zZWxlY3RlZDsKfSkpO30sdG9RdWVyeVN0cmluZzpmdW5jdGlvbigpe3ZhciBwPVtdO3RoaXMuZ2V0RWxlbWVudHMoImlucHV0LCBzZWxlY3QsIHRleHRhcmVhIikuZWFjaChmdW5jdGlvbihyKXt2YXIgcT1yLnR5cGU7aWYoIXIubmFtZXx8ci5kaXNhYmxlZHx8cT09InN1Ym1pdCJ8fHE9PSJyZXNldCJ8fHE9PSJmaWxlInx8cT09ImltYWdlIil7cmV0dXJuOwp9dmFyIHM9KHIuZ2V0KCJ0YWciKT09InNlbGVjdCIpP3IuZ2V0U2VsZWN0ZWQoKS5tYXAoZnVuY3Rpb24odCl7cmV0dXJuIGRvY3VtZW50LmlkKHQpLmdldCgidmFsdWUiKTt9KTooKHE9PSJyYWRpbyJ8fHE9PSJjaGVja2JveCIpJiYhci5jaGVja2VkKT9udWxsOnIuZ2V0KCJ2YWx1ZSIpOwpBcnJheS5mcm9tKHMpLmVhY2goZnVuY3Rpb24odCl7aWYodHlwZW9mIHQhPSJ1bmRlZmluZWQiKXtwLnB1c2goZW5jb2RlVVJJQ29tcG9uZW50KHIubmFtZSkrIj0iK2VuY29kZVVSSUNvbXBvbmVudCh0KSk7fX0pO30pO3JldHVybiBwLmpvaW4oIiYiKTt9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt2YXIgcD1qKHRoaXMpLmdldEVsZW1lbnRzQnlUYWdOYW1lKCIqIik7CkFycmF5LmVhY2gocCxqKTtFbGVtZW50LmRpc3Bvc2UodGhpcyk7cmV0dXJuIG51bGw7fSxlbXB0eTpmdW5jdGlvbigpe0FycmF5LmZyb20odGhpcy5jaGlsZE5vZGVzKS5lYWNoKEVsZW1lbnQuZGlzcG9zZSk7cmV0dXJuIHRoaXM7fSxkaXNwb3NlOmZ1bmN0aW9uKCl7cmV0dXJuKHRoaXMucGFyZW50Tm9kZSk/dGhpcy5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMpOnRoaXM7Cn0sbWF0Y2g6ZnVuY3Rpb24ocCl7cmV0dXJuICFwfHxTbGljay5tYXRjaCh0aGlzLHApO319KTt2YXIgYT1mdW5jdGlvbih0LHMscSl7aWYoIXEpe3Quc2V0QXR0cmlidXRlTm9kZShkb2N1bWVudC5jcmVhdGVBdHRyaWJ1dGUoImlkIikpO31pZih0LmNsZWFyQXR0cmlidXRlcyl7dC5jbGVhckF0dHJpYnV0ZXMoKTsKdC5tZXJnZUF0dHJpYnV0ZXMocyk7dC5yZW1vdmVBdHRyaWJ1dGUoInVpZCIpO2lmKHQub3B0aW9ucyl7dmFyIHU9dC5vcHRpb25zLHA9cy5vcHRpb25zO2Zvcih2YXIgcj11Lmxlbmd0aDtyLS07KXt1W3JdLnNlbGVjdGVkPXBbcl0uc2VsZWN0ZWQ7fX19dmFyIHY9bltzLnRhZ05hbWUudG9Mb3dlckNhc2UoKV07CmlmKHYmJnNbdl0pe3Rbdl09c1t2XTt9fTtFbGVtZW50LmltcGxlbWVudCgiY2xvbmUiLGZ1bmN0aW9uKHIscCl7cj1yIT09ZmFsc2U7dmFyIHc9dGhpcy5jbG9uZU5vZGUocikscTtpZihyKXt2YXIgcz13LmdldEVsZW1lbnRzQnlUYWdOYW1lKCIqIiksdT10aGlzLmdldEVsZW1lbnRzQnlUYWdOYW1lKCIqIik7CmZvcihxPXMubGVuZ3RoO3EtLTspe2Eoc1txXSx1W3FdLHApO319YSh3LHRoaXMscCk7aWYoQnJvd3Nlci5pZSl7dmFyIHQ9dy5nZXRFbGVtZW50c0J5VGFnTmFtZSgib2JqZWN0Iiksdj10aGlzLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJvYmplY3QiKTtmb3IocT10Lmxlbmd0aDsKcS0tOyl7dFtxXS5vdXRlckhUTUw9dltxXS5vdXRlckhUTUw7fX1yZXR1cm4gZG9jdW1lbnQuaWQodyk7fSk7dmFyIGY9e2NvbnRhaW5zOmZ1bmN0aW9uKHApe3JldHVybiBTbGljay5jb250YWlucyh0aGlzLHApO319O2lmKCFkb2N1bWVudC5jb250YWlucyl7RG9jdW1lbnQuaW1wbGVtZW50KGYpOwp9aWYoIWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpLmNvbnRhaW5zKXtFbGVtZW50LmltcGxlbWVudChmKTt9RWxlbWVudC5pbXBsZW1lbnQoImhhc0NoaWxkIixmdW5jdGlvbihwKXtyZXR1cm4gdGhpcyE9PXAmJnRoaXMuY29udGFpbnMocCk7fSk7W0VsZW1lbnQsV2luZG93LERvY3VtZW50XS5pbnZva2UoImltcGxlbWVudCIse2FkZExpc3RlbmVyOmZ1bmN0aW9uKHMscil7aWYocz09InVubG9hZCIpe3ZhciBwPXIscT10aGlzOwpyPWZ1bmN0aW9uKCl7cS5yZW1vdmVMaXN0ZW5lcigidW5sb2FkIixyKTtwKCk7fTt9ZWxzZXtrWyR1aWQodGhpcyldPXRoaXM7fWlmKHRoaXMuYWRkRXZlbnRMaXN0ZW5lcil7dGhpcy5hZGRFdmVudExpc3RlbmVyKHMsciwhIWFyZ3VtZW50c1syXSk7fWVsc2V7dGhpcy5hdHRhY2hFdmVudCgib24iK3Mscik7Cn1yZXR1cm4gdGhpczt9LHJlbW92ZUxpc3RlbmVyOmZ1bmN0aW9uKHEscCl7aWYodGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKXt0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIocSxwLCEhYXJndW1lbnRzWzJdKTt9ZWxzZXt0aGlzLmRldGFjaEV2ZW50KCJvbiIrcSxwKTsKfXJldHVybiB0aGlzO30scmV0cmlldmU6ZnVuY3Rpb24ocSxwKXt2YXIgcz1lKCR1aWQodGhpcykpLHI9c1txXTtpZihwIT1udWxsJiZyPT1udWxsKXtyPXNbcV09cDt9cmV0dXJuIHIhPW51bGw/cjpudWxsO30sc3RvcmU6ZnVuY3Rpb24ocSxwKXt2YXIgcj1lKCR1aWQodGhpcykpOwpyW3FdPXA7cmV0dXJuIHRoaXM7fSxlbGltaW5hdGU6ZnVuY3Rpb24ocCl7dmFyIHE9ZSgkdWlkKHRoaXMpKTtkZWxldGUgcVtwXTtyZXR1cm4gdGhpczt9fSk7aWYod2luZG93LmF0dGFjaEV2ZW50JiYhd2luZG93LmFkZEV2ZW50TGlzdGVuZXIpe3dpbmRvdy5hZGRMaXN0ZW5lcigidW5sb2FkIixmdW5jdGlvbigpe09iamVjdC5lYWNoKGssaik7CmlmKHdpbmRvdy5Db2xsZWN0R2FyYmFnZSl7Q29sbGVjdEdhcmJhZ2UoKTt9fSk7fX0pKCk7RWxlbWVudC5Qcm9wZXJ0aWVzPXt9O0VsZW1lbnQuUHJvcGVydGllcz1uZXcgSGFzaDtFbGVtZW50LlByb3BlcnRpZXMuc3R5bGU9e3NldDpmdW5jdGlvbihhKXt0aGlzLnN0eWxlLmNzc1RleHQ9YTsKfSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdHlsZS5jc3NUZXh0O30sZXJhc2U6ZnVuY3Rpb24oKXt0aGlzLnN0eWxlLmNzc1RleHQ9IiI7fX07RWxlbWVudC5Qcm9wZXJ0aWVzLnRhZz17Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGFnTmFtZS50b0xvd2VyQ2FzZSgpOwp9fTsoZnVuY3Rpb24oYSl7aWYoYSE9bnVsbCl7RWxlbWVudC5Qcm9wZXJ0aWVzLm1heGxlbmd0aD1FbGVtZW50LlByb3BlcnRpZXMubWF4TGVuZ3RoPXtnZXQ6ZnVuY3Rpb24oKXt2YXIgYj10aGlzLmdldEF0dHJpYnV0ZSgibWF4TGVuZ3RoIik7cmV0dXJuIGI9PWE/bnVsbDpiOwp9fTt9fSkoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW5wdXQiKS5nZXRBdHRyaWJ1dGUoIm1heExlbmd0aCIpKTtFbGVtZW50LlByb3BlcnRpZXMuaHRtbD0oZnVuY3Rpb24oKXt2YXIgYz1GdW5jdGlvbi5hdHRlbXB0KGZ1bmN0aW9uKCl7dmFyIGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidGFibGUiKTsKZS5pbm5lckhUTUw9Ijx0cj48dGQ+PC90ZD48L3RyPiI7fSk7dmFyIGQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7dmFyIGE9e3RhYmxlOlsxLCI8dGFibGU+IiwiPC90YWJsZT4iXSxzZWxlY3Q6WzEsIjxzZWxlY3Q+IiwiPC9zZWxlY3Q+Il0sdGJvZHk6WzIsIjx0YWJsZT48dGJvZHk+IiwiPC90Ym9keT48L3RhYmxlPiJdLHRyOlszLCI8dGFibGU+PHRib2R5Pjx0cj4iLCI8L3RyPjwvdGJvZHk+PC90YWJsZT4iXX07CmEudGhlYWQ9YS50Zm9vdD1hLnRib2R5O3ZhciBiPXtzZXQ6ZnVuY3Rpb24oKXt2YXIgZj1BcnJheS5mbGF0dGVuKGFyZ3VtZW50cykuam9pbigiIik7dmFyIGc9KCFjJiZhW3RoaXMuZ2V0KCJ0YWciKV0pO2lmKGcpe3ZhciBoPWQ7aC5pbm5lckhUTUw9Z1sxXStmK2dbMl07CmZvcih2YXIgZT1nWzBdO2UtLTspe2g9aC5maXJzdENoaWxkO310aGlzLmVtcHR5KCkuYWRvcHQoaC5jaGlsZE5vZGVzKTt9ZWxzZXt0aGlzLmlubmVySFRNTD1mO319fTtiLmVyYXNlPWIuc2V0O3JldHVybiBiO30pKCk7KGZ1bmN0aW9uKCl7dmFyIGM9ZG9jdW1lbnQuaHRtbDsKRWxlbWVudC5Qcm9wZXJ0aWVzLnN0eWxlcz17c2V0OmZ1bmN0aW9uKGYpe3RoaXMuc2V0U3R5bGVzKGYpO319O3ZhciBlPShjLnN0eWxlLm9wYWNpdHkhPW51bGwpO3ZhciBkPS9hbHBoYVwob3BhY2l0eT0oW1xkLl0rKVwpL2k7dmFyIGI9ZnVuY3Rpb24oZyxmKXtpZighZy5jdXJyZW50U3R5bGV8fCFnLmN1cnJlbnRTdHlsZS5oYXNMYXlvdXQpe2cuc3R5bGUuem9vbT0xOwp9aWYoZSl7Zy5zdHlsZS5vcGFjaXR5PWY7fWVsc2V7Zj0oZioxMDApLmxpbWl0KDAsMTAwKS5yb3VuZCgpO2Y9KGY9PTEwMCk/IiI6ImFscGhhKG9wYWNpdHk9IitmKyIpIjt2YXIgaD1nLnN0eWxlLmZpbHRlcnx8Zy5nZXRDb21wdXRlZFN0eWxlKCJmaWx0ZXIiKXx8IiI7Cmcuc3R5bGUuZmlsdGVyPWQudGVzdChoKT9oLnJlcGxhY2UoZCxmKTpoK2Y7fX07RWxlbWVudC5Qcm9wZXJ0aWVzLm9wYWNpdHk9e3NldDpmdW5jdGlvbihnKXt2YXIgZj10aGlzLnN0eWxlLnZpc2liaWxpdHk7aWYoZz09MCYmZiE9ImhpZGRlbiIpe3RoaXMuc3R5bGUudmlzaWJpbGl0eT0iaGlkZGVuIjsKfWVsc2V7aWYoZyE9MCYmZiE9InZpc2libGUiKXt0aGlzLnN0eWxlLnZpc2liaWxpdHk9InZpc2libGUiO319Yih0aGlzLGcpO30sZ2V0OihlKT9mdW5jdGlvbigpe3ZhciBmPXRoaXMuc3R5bGUub3BhY2l0eXx8dGhpcy5nZXRDb21wdXRlZFN0eWxlKCJvcGFjaXR5Iik7CnJldHVybihmPT0iIik/MTpmO306ZnVuY3Rpb24oKXt2YXIgZixnPSh0aGlzLnN0eWxlLmZpbHRlcnx8dGhpcy5nZXRDb21wdXRlZFN0eWxlKCJmaWx0ZXIiKSk7aWYoZyl7Zj1nLm1hdGNoKGQpO31yZXR1cm4oZj09bnVsbHx8Zz09bnVsbCk/MTooZlsxXS8xMDApO319Owp2YXIgYT0oYy5zdHlsZS5jc3NGbG9hdD09bnVsbCk/InN0eWxlRmxvYXQiOiJjc3NGbG9hdCI7RWxlbWVudC5pbXBsZW1lbnQoe2dldENvbXB1dGVkU3R5bGU6ZnVuY3Rpb24oaCl7aWYodGhpcy5jdXJyZW50U3R5bGUpe3JldHVybiB0aGlzLmN1cnJlbnRTdHlsZVtoLmNhbWVsQ2FzZSgpXTsKfXZhciBnPUVsZW1lbnQuZ2V0RG9jdW1lbnQodGhpcykuZGVmYXVsdFZpZXcsZj1nP2cuZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLG51bGwpOm51bGw7cmV0dXJuKGYpP2YuZ2V0UHJvcGVydHlWYWx1ZSgoaD09YSk/ImZsb2F0IjpoLmh5cGhlbmF0ZSgpKTpudWxsO30sc2V0T3BhY2l0eTpmdW5jdGlvbihmKXtiKHRoaXMsZik7CnJldHVybiB0aGlzO30sZ2V0T3BhY2l0eTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldCgib3BhY2l0eSIpO30sc2V0U3R5bGU6ZnVuY3Rpb24oZyxmKXtzd2l0Y2goZyl7Y2FzZSJvcGFjaXR5IjpyZXR1cm4gdGhpcy5zZXQoIm9wYWNpdHkiLHBhcnNlRmxvYXQoZikpOwpjYXNlImZsb2F0IjpnPWE7fWc9Zy5jYW1lbENhc2UoKTtpZih0eXBlT2YoZikhPSJzdHJpbmciKXt2YXIgaD0oRWxlbWVudC5TdHlsZXNbZ118fCJAIikuc3BsaXQoIiAiKTtmPUFycmF5LmZyb20oZikubWFwKGZ1bmN0aW9uKGssail7aWYoIWhbal0pe3JldHVybiIiOwp9cmV0dXJuKHR5cGVPZihrKT09Im51bWJlciIpP2hbal0ucmVwbGFjZSgiQCIsTWF0aC5yb3VuZChrKSk6azt9KS5qb2luKCIgIik7fWVsc2V7aWYoZj09U3RyaW5nKE51bWJlcihmKSkpe2Y9TWF0aC5yb3VuZChmKTt9fXRoaXMuc3R5bGVbZ109ZjtyZXR1cm4gdGhpczsKfSxnZXRTdHlsZTpmdW5jdGlvbihsKXtzd2l0Y2gobCl7Y2FzZSJvcGFjaXR5IjpyZXR1cm4gdGhpcy5nZXQoIm9wYWNpdHkiKTtjYXNlImZsb2F0IjpsPWE7fWw9bC5jYW1lbENhc2UoKTt2YXIgZj10aGlzLnN0eWxlW2xdO2lmKCFmfHxsPT0iekluZGV4Iil7Zj1bXTsKZm9yKHZhciBrIGluIEVsZW1lbnQuU2hvcnRTdHlsZXMpe2lmKGwhPWspe2NvbnRpbnVlO31mb3IodmFyIGogaW4gRWxlbWVudC5TaG9ydFN0eWxlc1trXSl7Zi5wdXNoKHRoaXMuZ2V0U3R5bGUoaikpO31yZXR1cm4gZi5qb2luKCIgIik7fWY9dGhpcy5nZXRDb21wdXRlZFN0eWxlKGwpOwp9aWYoZil7Zj1TdHJpbmcoZik7dmFyIGg9Zi5tYXRjaCgvcmdiYT9cKFtcZFxzLF0rXCkvKTtpZihoKXtmPWYucmVwbGFjZShoWzBdLGhbMF0ucmdiVG9IZXgoKSk7fX1pZihCcm93c2VyLm9wZXJhfHwoQnJvd3Nlci5pZSYmaXNOYU4ocGFyc2VGbG9hdChmKSkpKXtpZigoL14oaGVpZ2h0fHdpZHRoKSQvKS50ZXN0KGwpKXt2YXIgZz0obD09IndpZHRoIik/WyJsZWZ0IiwicmlnaHQiXTpbInRvcCIsImJvdHRvbSJdLGk9MDsKZy5lYWNoKGZ1bmN0aW9uKG0pe2krPXRoaXMuZ2V0U3R5bGUoImJvcmRlci0iK20rIi13aWR0aCIpLnRvSW50KCkrdGhpcy5nZXRTdHlsZSgicGFkZGluZy0iK20pLnRvSW50KCk7fSx0aGlzKTtyZXR1cm4gdGhpc1sib2Zmc2V0IitsLmNhcGl0YWxpemUoKV0taSsicHgiOwp9aWYoQnJvd3Nlci5vcGVyYSYmU3RyaW5nKGYpLmluZGV4T2YoInB4IikhPS0xKXtyZXR1cm4gZjt9aWYoKC9eYm9yZGVyKC4rKVdpZHRofG1hcmdpbnxwYWRkaW5nLykudGVzdChsKSl7cmV0dXJuIjBweCI7fX1yZXR1cm4gZjt9LHNldFN0eWxlczpmdW5jdGlvbihnKXtmb3IodmFyIGYgaW4gZyl7dGhpcy5zZXRTdHlsZShmLGdbZl0pOwp9cmV0dXJuIHRoaXM7fSxnZXRTdHlsZXM6ZnVuY3Rpb24oKXt2YXIgZj17fTtBcnJheS5mbGF0dGVuKGFyZ3VtZW50cykuZWFjaChmdW5jdGlvbihnKXtmW2ddPXRoaXMuZ2V0U3R5bGUoZyk7fSx0aGlzKTtyZXR1cm4gZjt9fSk7RWxlbWVudC5TdHlsZXM9e2xlZnQ6IkBweCIsdG9wOiJAcHgiLGJvdHRvbToiQHB4IixyaWdodDoiQHB4Iix3aWR0aDoiQHB4IixoZWlnaHQ6IkBweCIsbWF4V2lkdGg6IkBweCIsbWF4SGVpZ2h0OiJAcHgiLG1pbldpZHRoOiJAcHgiLG1pbkhlaWdodDoiQHB4IixiYWNrZ3JvdW5kQ29sb3I6InJnYihALCBALCBAKSIsYmFja2dyb3VuZFBvc2l0aW9uOiJAcHggQHB4Iixjb2xvcjoicmdiKEAsIEAsIEApIixmb250U2l6ZToiQHB4IixsZXR0ZXJTcGFjaW5nOiJAcHgiLGxpbmVIZWlnaHQ6IkBweCIsY2xpcDoicmVjdChAcHggQHB4IEBweCBAcHgpIixtYXJnaW46IkBweCBAcHggQHB4IEBweCIscGFkZGluZzoiQHB4IEBweCBAcHggQHB4Iixib3JkZXI6IkBweCBAIHJnYihALCBALCBAKSBAcHggQCByZ2IoQCwgQCwgQCkgQHB4IEAgcmdiKEAsIEAsIEApIixib3JkZXJXaWR0aDoiQHB4IEBweCBAcHggQHB4Iixib3JkZXJTdHlsZToiQCBAIEAgQCIsYm9yZGVyQ29sb3I6InJnYihALCBALCBAKSByZ2IoQCwgQCwgQCkgcmdiKEAsIEAsIEApIHJnYihALCBALCBAKSIsekluZGV4OiJAIix6b29tOiJAIixmb250V2VpZ2h0OiJAIix0ZXh0SW5kZW50OiJAcHgiLG9wYWNpdHk6IkAifTsKRWxlbWVudC5TdHlsZXM9bmV3IEhhc2goRWxlbWVudC5TdHlsZXMpO0VsZW1lbnQuU2hvcnRTdHlsZXM9e21hcmdpbjp7fSxwYWRkaW5nOnt9LGJvcmRlcjp7fSxib3JkZXJXaWR0aDp7fSxib3JkZXJTdHlsZTp7fSxib3JkZXJDb2xvcjp7fX07WyJUb3AiLCJSaWdodCIsIkJvdHRvbSIsIkxlZnQiXS5lYWNoKGZ1bmN0aW9uKGwpe3ZhciBrPUVsZW1lbnQuU2hvcnRTdHlsZXM7CnZhciBnPUVsZW1lbnQuU3R5bGVzO1sibWFyZ2luIiwicGFkZGluZyJdLmVhY2goZnVuY3Rpb24obSl7dmFyIG49bStsO2tbbV1bbl09Z1tuXT0iQHB4Ijt9KTt2YXIgaj0iYm9yZGVyIitsO2suYm9yZGVyW2pdPWdbal09IkBweCBAIHJnYihALCBALCBAKSI7dmFyIGk9aisiV2lkdGgiLGY9aisiU3R5bGUiLGg9aisiQ29sb3IiOwprW2pdPXt9O2suYm9yZGVyV2lkdGhbaV09a1tqXVtpXT1nW2ldPSJAcHgiO2suYm9yZGVyU3R5bGVbZl09a1tqXVtmXT1nW2ZdPSJAIjtrLmJvcmRlckNvbG9yW2hdPWtbal1baF09Z1toXT0icmdiKEAsIEAsIEApIjt9KTt9KSgpOyhmdW5jdGlvbigpe0VsZW1lbnQuUHJvcGVydGllcy5ldmVudHM9e3NldDpmdW5jdGlvbihiKXt0aGlzLmFkZEV2ZW50cyhiKTsKfX07W0VsZW1lbnQsV2luZG93LERvY3VtZW50XS5pbnZva2UoImltcGxlbWVudCIse2FkZEV2ZW50OmZ1bmN0aW9uKGYsaCl7dmFyIGk9dGhpcy5yZXRyaWV2ZSgiZXZlbnRzIix7fSk7aWYoIWlbZl0pe2lbZl09e2tleXM6W10sdmFsdWVzOltdfTt9aWYoaVtmXS5rZXlzLmNvbnRhaW5zKGgpKXtyZXR1cm4gdGhpczsKfWlbZl0ua2V5cy5wdXNoKGgpO3ZhciBnPWYsYj1FbGVtZW50LkV2ZW50c1tmXSxkPWgsaj10aGlzO2lmKGIpe2lmKGIub25BZGQpe2Iub25BZGQuY2FsbCh0aGlzLGgpO31pZihiLmNvbmRpdGlvbil7ZD1mdW5jdGlvbihrKXtpZihiLmNvbmRpdGlvbi5jYWxsKHRoaXMsaykpe3JldHVybiBoLmNhbGwodGhpcyxrKTsKfXJldHVybiB0cnVlO307fWc9Yi5iYXNlfHxnO312YXIgZT1mdW5jdGlvbigpe3JldHVybiBoLmNhbGwoaik7fTt2YXIgYz1FbGVtZW50Lk5hdGl2ZUV2ZW50c1tnXTtpZihjKXtpZihjPT0yKXtlPWZ1bmN0aW9uKGspe2s9bmV3IEV2ZW50KGssai5nZXRXaW5kb3coKSk7CmlmKGQuY2FsbChqLGspPT09ZmFsc2Upe2suc3RvcCgpO319O310aGlzLmFkZExpc3RlbmVyKGcsZSxhcmd1bWVudHNbMl0pO31pW2ZdLnZhbHVlcy5wdXNoKGUpO3JldHVybiB0aGlzO30scmVtb3ZlRXZlbnQ6ZnVuY3Rpb24oZSxkKXt2YXIgYz10aGlzLnJldHJpZXZlKCJldmVudHMiKTsKaWYoIWN8fCFjW2VdKXtyZXR1cm4gdGhpczt9dmFyIGg9Y1tlXTt2YXIgYj1oLmtleXMuaW5kZXhPZihkKTtpZihiPT0tMSl7cmV0dXJuIHRoaXM7fXZhciBnPWgudmFsdWVzW2JdO2RlbGV0ZSBoLmtleXNbYl07ZGVsZXRlIGgudmFsdWVzW2JdO3ZhciBmPUVsZW1lbnQuRXZlbnRzW2VdOwppZihmKXtpZihmLm9uUmVtb3ZlKXtmLm9uUmVtb3ZlLmNhbGwodGhpcyxkKTt9ZT1mLmJhc2V8fGU7fXJldHVybihFbGVtZW50Lk5hdGl2ZUV2ZW50c1tlXSk/dGhpcy5yZW1vdmVMaXN0ZW5lcihlLGcsYXJndW1lbnRzWzJdKTp0aGlzO30sYWRkRXZlbnRzOmZ1bmN0aW9uKGIpe2Zvcih2YXIgYyBpbiBiKXt0aGlzLmFkZEV2ZW50KGMsYltjXSk7Cn1yZXR1cm4gdGhpczt9LHJlbW92ZUV2ZW50czpmdW5jdGlvbihiKXt2YXIgZDtpZih0eXBlT2YoYik9PSJvYmplY3QiKXtmb3IoZCBpbiBiKXt0aGlzLnJlbW92ZUV2ZW50KGQsYltkXSk7fXJldHVybiB0aGlzO312YXIgYz10aGlzLnJldHJpZXZlKCJldmVudHMiKTsKaWYoIWMpe3JldHVybiB0aGlzO31pZighYil7Zm9yKGQgaW4gYyl7dGhpcy5yZW1vdmVFdmVudHMoZCk7fXRoaXMuZWxpbWluYXRlKCJldmVudHMiKTt9ZWxzZXtpZihjW2JdKXtjW2JdLmtleXMuZWFjaChmdW5jdGlvbihlKXt0aGlzLnJlbW92ZUV2ZW50KGIsZSk7fSx0aGlzKTsKZGVsZXRlIGNbYl07fX1yZXR1cm4gdGhpczt9LGZpcmVFdmVudDpmdW5jdGlvbihlLGMsYil7dmFyIGQ9dGhpcy5yZXRyaWV2ZSgiZXZlbnRzIik7aWYoIWR8fCFkW2VdKXtyZXR1cm4gdGhpczt9Yz1BcnJheS5mcm9tKGMpO2RbZV0ua2V5cy5lYWNoKGZ1bmN0aW9uKGYpe2lmKGIpe2YuZGVsYXkoYix0aGlzLGMpOwp9ZWxzZXtmLmFwcGx5KHRoaXMsYyk7fX0sdGhpcyk7cmV0dXJuIHRoaXM7fSxjbG9uZUV2ZW50czpmdW5jdGlvbihlLGQpe2U9ZG9jdW1lbnQuaWQoZSk7dmFyIGM9ZS5yZXRyaWV2ZSgiZXZlbnRzIik7aWYoIWMpe3JldHVybiB0aGlzO31pZighZCl7Zm9yKHZhciBiIGluIGMpe3RoaXMuY2xvbmVFdmVudHMoZSxiKTsKfX1lbHNle2lmKGNbZF0pe2NbZF0ua2V5cy5lYWNoKGZ1bmN0aW9uKGYpe3RoaXMuYWRkRXZlbnQoZCxmKTt9LHRoaXMpO319cmV0dXJuIHRoaXM7fX0pO0VsZW1lbnQuTmF0aXZlRXZlbnRzPXtjbGljazoyLGRibGNsaWNrOjIsbW91c2V1cDoyLG1vdXNlZG93bjoyLGNvbnRleHRtZW51OjIsbW91c2V3aGVlbDoyLERPTU1vdXNlU2Nyb2xsOjIsbW91c2VvdmVyOjIsbW91c2VvdXQ6Mixtb3VzZW1vdmU6MixzZWxlY3RzdGFydDoyLHNlbGVjdGVuZDoyLGtleWRvd246MixrZXlwcmVzczoyLGtleXVwOjIsb3JpZW50YXRpb25jaGFuZ2U6Mix0b3VjaHN0YXJ0OjIsdG91Y2htb3ZlOjIsdG91Y2hlbmQ6Mix0b3VjaGNhbmNlbDoyLGdlc3R1cmVzdGFydDoyLGdlc3R1cmVjaGFuZ2U6MixnZXN0dXJlZW5kOjIsZm9jdXM6MixibHVyOjIsY2hhbmdlOjIscmVzZXQ6MixzZWxlY3Q6MixzdWJtaXQ6Mixsb2FkOjIsdW5sb2FkOjEsYmVmb3JldW5sb2FkOjIscmVzaXplOjEsbW92ZToxLERPTUNvbnRlbnRMb2FkZWQ6MSxyZWFkeXN0YXRlY2hhbmdlOjEsZXJyb3I6MSxhYm9ydDoxLHNjcm9sbDoxfTsKdmFyIGE9ZnVuY3Rpb24oYil7dmFyIGM9Yi5yZWxhdGVkVGFyZ2V0O2lmKGM9PW51bGwpe3JldHVybiB0cnVlO31pZighYyl7cmV0dXJuIGZhbHNlO31yZXR1cm4oYyE9dGhpcyYmYy5wcmVmaXghPSJ4dWwiJiZ0eXBlT2YodGhpcykhPSJkb2N1bWVudCImJiF0aGlzLmNvbnRhaW5zKGMpKTsKfTtFbGVtZW50LkV2ZW50cz17bW91c2VlbnRlcjp7YmFzZToibW91c2VvdmVyIixjb25kaXRpb246YX0sbW91c2VsZWF2ZTp7YmFzZToibW91c2VvdXQiLGNvbmRpdGlvbjphfSxtb3VzZXdoZWVsOntiYXNlOihCcm93c2VyLmZpcmVmb3gpPyJET01Nb3VzZVNjcm9sbCI6Im1vdXNld2hlZWwifX07CkVsZW1lbnQuRXZlbnRzPW5ldyBIYXNoKEVsZW1lbnQuRXZlbnRzKTt9KSgpOyhmdW5jdGlvbigpe3ZhciBoPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpLGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7aC5zdHlsZS5oZWlnaHQ9IjAiO2guYXBwZW5kQ2hpbGQoZSk7CnZhciBkPShlLm9mZnNldFBhcmVudD09PWgpO2g9ZT1udWxsO3ZhciBsPWZ1bmN0aW9uKG0pe3JldHVybiBrKG0sInBvc2l0aW9uIikhPSJzdGF0aWMifHxhKG0pO307dmFyIGk9ZnVuY3Rpb24obSl7cmV0dXJuIGwobSl8fCgvXig/OnRhYmxlfHRkfHRoKSQvaSkudGVzdChtLnRhZ05hbWUpOwp9O0VsZW1lbnQuaW1wbGVtZW50KHtzY3JvbGxUbzpmdW5jdGlvbihtLG4pe2lmKGEodGhpcykpe3RoaXMuZ2V0V2luZG93KCkuc2Nyb2xsVG8obSxuKTt9ZWxzZXt0aGlzLnNjcm9sbExlZnQ9bTt0aGlzLnNjcm9sbFRvcD1uO31yZXR1cm4gdGhpczt9LGdldFNpemU6ZnVuY3Rpb24oKXtpZihhKHRoaXMpKXtyZXR1cm4gdGhpcy5nZXRXaW5kb3coKS5nZXRTaXplKCk7Cn1yZXR1cm57eDp0aGlzLm9mZnNldFdpZHRoLHk6dGhpcy5vZmZzZXRIZWlnaHR9O30sZ2V0U2Nyb2xsU2l6ZTpmdW5jdGlvbigpe2lmKGEodGhpcykpe3JldHVybiB0aGlzLmdldFdpbmRvdygpLmdldFNjcm9sbFNpemUoKTt9cmV0dXJue3g6dGhpcy5zY3JvbGxXaWR0aCx5OnRoaXMuc2Nyb2xsSGVpZ2h0fTsKfSxnZXRTY3JvbGw6ZnVuY3Rpb24oKXtpZihhKHRoaXMpKXtyZXR1cm4gdGhpcy5nZXRXaW5kb3coKS5nZXRTY3JvbGwoKTt9cmV0dXJue3g6dGhpcy5zY3JvbGxMZWZ0LHk6dGhpcy5zY3JvbGxUb3B9O30sZ2V0U2Nyb2xsczpmdW5jdGlvbigpe3ZhciBuPXRoaXMucGFyZW50Tm9kZSxtPXt4OjAseTowfTsKd2hpbGUobiYmIWEobikpe20ueCs9bi5zY3JvbGxMZWZ0O20ueSs9bi5zY3JvbGxUb3A7bj1uLnBhcmVudE5vZGU7fXJldHVybiBtO30sZ2V0T2Zmc2V0UGFyZW50OmQ/ZnVuY3Rpb24oKXt2YXIgbT10aGlzO2lmKGEobSl8fGsobSwicG9zaXRpb24iKT09ImZpeGVkIil7cmV0dXJuIG51bGw7Cn12YXIgbj0oayhtLCJwb3NpdGlvbiIpPT0ic3RhdGljIik/aTpsO3doaWxlKChtPW0ucGFyZW50Tm9kZSkpe2lmKG4obSkpe3JldHVybiBtO319cmV0dXJuIG51bGw7fTpmdW5jdGlvbigpe3ZhciBtPXRoaXM7aWYoYShtKXx8ayhtLCJwb3NpdGlvbiIpPT0iZml4ZWQiKXtyZXR1cm4gbnVsbDsKfXRyeXtyZXR1cm4gbS5vZmZzZXRQYXJlbnQ7fWNhdGNoKG4pe31yZXR1cm4gbnVsbDt9LGdldE9mZnNldHM6ZnVuY3Rpb24oKXtpZih0aGlzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCYmIUJyb3dzZXIuUGxhdGZvcm0uaW9zKXt2YXIgcj10aGlzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLG89ZG9jdW1lbnQuaWQodGhpcy5nZXREb2N1bWVudCgpLmRvY3VtZW50RWxlbWVudCkscT1vLmdldFNjcm9sbCgpLHQ9dGhpcy5nZXRTY3JvbGxzKCkscz0oayh0aGlzLCJwb3NpdGlvbiIpPT0iZml4ZWQiKTsKcmV0dXJue3g6ci5sZWZ0LnRvSW50KCkrdC54Kygocyk/MDpxLngpLW8uY2xpZW50TGVmdCx5OnIudG9wLnRvSW50KCkrdC55Kygocyk/MDpxLnkpLW8uY2xpZW50VG9wfTt9dmFyIG49dGhpcyxtPXt4OjAseTowfTtpZihhKHRoaXMpKXtyZXR1cm4gbTt9d2hpbGUobiYmIWEobikpe20ueCs9bi5vZmZzZXRMZWZ0OwptLnkrPW4ub2Zmc2V0VG9wO2lmKEJyb3dzZXIuZmlyZWZveCl7aWYoIWMobikpe20ueCs9YihuKTttLnkrPWcobik7fXZhciBwPW4ucGFyZW50Tm9kZTtpZihwJiZrKHAsIm92ZXJmbG93IikhPSJ2aXNpYmxlIil7bS54Kz1iKHApO20ueSs9ZyhwKTt9fWVsc2V7aWYobiE9dGhpcyYmQnJvd3Nlci5zYWZhcmkpe20ueCs9YihuKTsKbS55Kz1nKG4pO319bj1uLm9mZnNldFBhcmVudDt9aWYoQnJvd3Nlci5maXJlZm94JiYhYyh0aGlzKSl7bS54LT1iKHRoaXMpO20ueS09Zyh0aGlzKTt9cmV0dXJuIG07fSxnZXRQb3NpdGlvbjpmdW5jdGlvbihwKXtpZihhKHRoaXMpKXtyZXR1cm57eDowLHk6MH07fXZhciBxPXRoaXMuZ2V0T2Zmc2V0cygpLG49dGhpcy5nZXRTY3JvbGxzKCk7CnZhciBtPXt4OnEueC1uLngseTpxLnktbi55fTtpZihwJiYocD1kb2N1bWVudC5pZChwKSkpe3ZhciBvPXAuZ2V0UG9zaXRpb24oKTtyZXR1cm57eDptLngtby54LWIocCkseTptLnktby55LWcocCl9O31yZXR1cm4gbTt9LGdldENvb3JkaW5hdGVzOmZ1bmN0aW9uKG8pe2lmKGEodGhpcykpe3JldHVybiB0aGlzLmdldFdpbmRvdygpLmdldENvb3JkaW5hdGVzKCk7Cn12YXIgbT10aGlzLmdldFBvc2l0aW9uKG8pLG49dGhpcy5nZXRTaXplKCk7dmFyIHA9e2xlZnQ6bS54LHRvcDptLnksd2lkdGg6bi54LGhlaWdodDpuLnl9O3AucmlnaHQ9cC5sZWZ0K3Aud2lkdGg7cC5ib3R0b209cC50b3ArcC5oZWlnaHQ7cmV0dXJuIHA7fSxjb21wdXRlUG9zaXRpb246ZnVuY3Rpb24obSl7cmV0dXJue2xlZnQ6bS54LWoodGhpcywibWFyZ2luLWxlZnQiKSx0b3A6bS55LWoodGhpcywibWFyZ2luLXRvcCIpfTsKfSxzZXRQb3NpdGlvbjpmdW5jdGlvbihtKXtyZXR1cm4gdGhpcy5zZXRTdHlsZXModGhpcy5jb21wdXRlUG9zaXRpb24obSkpO319KTtbRG9jdW1lbnQsV2luZG93XS5pbnZva2UoImltcGxlbWVudCIse2dldFNpemU6ZnVuY3Rpb24oKXt2YXIgbT1mKHRoaXMpO3JldHVybnt4Om0uY2xpZW50V2lkdGgseTptLmNsaWVudEhlaWdodH07Cn0sZ2V0U2Nyb2xsOmZ1bmN0aW9uKCl7dmFyIG49dGhpcy5nZXRXaW5kb3coKSxtPWYodGhpcyk7cmV0dXJue3g6bi5wYWdlWE9mZnNldHx8bS5zY3JvbGxMZWZ0LHk6bi5wYWdlWU9mZnNldHx8bS5zY3JvbGxUb3B9O30sZ2V0U2Nyb2xsU2l6ZTpmdW5jdGlvbigpe3ZhciBvPWYodGhpcyksbj10aGlzLmdldFNpemUoKSxtPXRoaXMuZ2V0RG9jdW1lbnQoKS5ib2R5OwpyZXR1cm57eDpNYXRoLm1heChvLnNjcm9sbFdpZHRoLG0uc2Nyb2xsV2lkdGgsbi54KSx5Ok1hdGgubWF4KG8uc2Nyb2xsSGVpZ2h0LG0uc2Nyb2xsSGVpZ2h0LG4ueSl9O30sZ2V0UG9zaXRpb246ZnVuY3Rpb24oKXtyZXR1cm57eDowLHk6MH07fSxnZXRDb29yZGluYXRlczpmdW5jdGlvbigpe3ZhciBtPXRoaXMuZ2V0U2l6ZSgpOwpyZXR1cm57dG9wOjAsbGVmdDowLGJvdHRvbTptLnkscmlnaHQ6bS54LGhlaWdodDptLnksd2lkdGg6bS54fTt9fSk7dmFyIGs9RWxlbWVudC5nZXRDb21wdXRlZFN0eWxlO2Z1bmN0aW9uIGoobSxuKXtyZXR1cm4gayhtLG4pLnRvSW50KCl8fDA7fWZ1bmN0aW9uIGMobSl7cmV0dXJuIGsobSwiLW1vei1ib3gtc2l6aW5nIik9PSJib3JkZXItYm94IjsKfWZ1bmN0aW9uIGcobSl7cmV0dXJuIGoobSwiYm9yZGVyLXRvcC13aWR0aCIpO31mdW5jdGlvbiBiKG0pe3JldHVybiBqKG0sImJvcmRlci1sZWZ0LXdpZHRoIik7fWZ1bmN0aW9uIGEobSl7cmV0dXJuKC9eKD86Ym9keXxodG1sKSQvaSkudGVzdChtLnRhZ05hbWUpOwp9ZnVuY3Rpb24gZihtKXt2YXIgbj1tLmdldERvY3VtZW50KCk7cmV0dXJuKCFuLmNvbXBhdE1vZGV8fG4uY29tcGF0TW9kZT09IkNTUzFDb21wYXQiKT9uLmh0bWw6bi5ib2R5O319KSgpO0VsZW1lbnQuYWxpYXMoe3Bvc2l0aW9uOiJzZXRQb3NpdGlvbiJ9KTtbV2luZG93LERvY3VtZW50LEVsZW1lbnRdLmludm9rZSgiaW1wbGVtZW50Iix7Z2V0SGVpZ2h0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0U2l6ZSgpLnk7Cn0sZ2V0V2lkdGg6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRTaXplKCkueDt9LGdldFNjcm9sbFRvcDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldFNjcm9sbCgpLnk7fSxnZXRTY3JvbGxMZWZ0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0U2Nyb2xsKCkueDsKfSxnZXRTY3JvbGxIZWlnaHQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRTY3JvbGxTaXplKCkueTt9LGdldFNjcm9sbFdpZHRoOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0U2Nyb2xsU2l6ZSgpLng7fSxnZXRUb3A6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRQb3NpdGlvbigpLnk7Cn0sZ2V0TGVmdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldFBvc2l0aW9uKCkueDt9fSk7KGZ1bmN0aW9uKCl7dmFyIGY9dGhpcy5GeD1uZXcgQ2xhc3Moe0ltcGxlbWVudHM6W0NoYWluLEV2ZW50cyxPcHRpb25zXSxvcHRpb25zOntmcHM6NjAsdW5pdDpmYWxzZSxkdXJhdGlvbjo1MDAsZnJhbWVzOm51bGwsZnJhbWVTa2lwOnRydWUsbGluazoiaWdub3JlIn0saW5pdGlhbGl6ZTpmdW5jdGlvbihnKXt0aGlzLnN1YmplY3Q9dGhpcy5zdWJqZWN0fHx0aGlzOwp0aGlzLnNldE9wdGlvbnMoZyk7fSxnZXRUcmFuc2l0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKGcpe3JldHVybiAtKE1hdGguY29zKE1hdGguUEkqZyktMSkvMjt9O30sc3RlcDpmdW5jdGlvbihnKXtpZih0aGlzLm9wdGlvbnMuZnJhbWVTa2lwKXt2YXIgaD0odGhpcy50aW1lIT1udWxsKT8oZy10aGlzLnRpbWUpOjAsaT1oL3RoaXMuZnJhbWVJbnRlcnZhbDsKdGhpcy50aW1lPWc7dGhpcy5mcmFtZSs9aTt9ZWxzZXt0aGlzLmZyYW1lKys7fWlmKHRoaXMuZnJhbWU8dGhpcy5mcmFtZXMpe3ZhciBqPXRoaXMudHJhbnNpdGlvbih0aGlzLmZyYW1lL3RoaXMuZnJhbWVzKTt0aGlzLnNldCh0aGlzLmNvbXB1dGUodGhpcy5mcm9tLHRoaXMudG8saikpOwp9ZWxzZXt0aGlzLmZyYW1lPXRoaXMuZnJhbWVzO3RoaXMuc2V0KHRoaXMuY29tcHV0ZSh0aGlzLmZyb20sdGhpcy50bywxKSk7dGhpcy5zdG9wKCk7fX0sc2V0OmZ1bmN0aW9uKGcpe3JldHVybiBnO30sY29tcHV0ZTpmdW5jdGlvbihpLGgsZyl7cmV0dXJuIGYuY29tcHV0ZShpLGgsZyk7Cn0sY2hlY2s6ZnVuY3Rpb24oKXtpZighdGhpcy5pc1J1bm5pbmcoKSl7cmV0dXJuIHRydWU7fXN3aXRjaCh0aGlzLm9wdGlvbnMubGluayl7Y2FzZSJjYW5jZWwiOnRoaXMuY2FuY2VsKCk7cmV0dXJuIHRydWU7Y2FzZSJjaGFpbiI6dGhpcy5jaGFpbih0aGlzLmNhbGxlci5wYXNzKGFyZ3VtZW50cyx0aGlzKSk7CnJldHVybiBmYWxzZTt9cmV0dXJuIGZhbHNlO30sc3RhcnQ6ZnVuY3Rpb24oayxqKXtpZighdGhpcy5jaGVjayhrLGopKXtyZXR1cm4gdGhpczt9dGhpcy5mcm9tPWs7dGhpcy50bz1qO3RoaXMuZnJhbWU9KHRoaXMub3B0aW9ucy5mcmFtZVNraXApPzA6LTE7dGhpcy50aW1lPW51bGw7CnRoaXMudHJhbnNpdGlvbj10aGlzLmdldFRyYW5zaXRpb24oKTt2YXIgaT10aGlzLm9wdGlvbnMuZnJhbWVzLGg9dGhpcy5vcHRpb25zLmZwcyxnPXRoaXMub3B0aW9ucy5kdXJhdGlvbjt0aGlzLmR1cmF0aW9uPWYuRHVyYXRpb25zW2ddfHxnLnRvSW50KCk7dGhpcy5mcmFtZUludGVydmFsPTEwMDAvaDsKdGhpcy5mcmFtZXM9aXx8TWF0aC5yb3VuZCh0aGlzLmR1cmF0aW9uL3RoaXMuZnJhbWVJbnRlcnZhbCk7dGhpcy5maXJlRXZlbnQoInN0YXJ0Iix0aGlzLnN1YmplY3QpO2IuY2FsbCh0aGlzLGgpO3JldHVybiB0aGlzO30sc3RvcDpmdW5jdGlvbigpe2lmKHRoaXMuaXNSdW5uaW5nKCkpe3RoaXMudGltZT1udWxsOwpkLmNhbGwodGhpcyx0aGlzLm9wdGlvbnMuZnBzKTtpZih0aGlzLmZyYW1lcz09dGhpcy5mcmFtZSl7dGhpcy5maXJlRXZlbnQoImNvbXBsZXRlIix0aGlzLnN1YmplY3QpO2lmKCF0aGlzLmNhbGxDaGFpbigpKXt0aGlzLmZpcmVFdmVudCgiY2hhaW5Db21wbGV0ZSIsdGhpcy5zdWJqZWN0KTsKfX1lbHNle3RoaXMuZmlyZUV2ZW50KCJzdG9wIix0aGlzLnN1YmplY3QpO319cmV0dXJuIHRoaXM7fSxjYW5jZWw6ZnVuY3Rpb24oKXtpZih0aGlzLmlzUnVubmluZygpKXt0aGlzLnRpbWU9bnVsbDtkLmNhbGwodGhpcyx0aGlzLm9wdGlvbnMuZnBzKTt0aGlzLmZyYW1lPXRoaXMuZnJhbWVzOwp0aGlzLmZpcmVFdmVudCgiY2FuY2VsIix0aGlzLnN1YmplY3QpLmNsZWFyQ2hhaW4oKTt9cmV0dXJuIHRoaXM7fSxwYXVzZTpmdW5jdGlvbigpe2lmKHRoaXMuaXNSdW5uaW5nKCkpe3RoaXMudGltZT1udWxsO2QuY2FsbCh0aGlzLHRoaXMub3B0aW9ucy5mcHMpO31yZXR1cm4gdGhpczsKfSxyZXN1bWU6ZnVuY3Rpb24oKXtpZigodGhpcy5mcmFtZTx0aGlzLmZyYW1lcykmJiF0aGlzLmlzUnVubmluZygpKXtiLmNhbGwodGhpcyx0aGlzLm9wdGlvbnMuZnBzKTt9cmV0dXJuIHRoaXM7fSxpc1J1bm5pbmc6ZnVuY3Rpb24oKXt2YXIgZz1lW3RoaXMub3B0aW9ucy5mcHNdOwpyZXR1cm4gZyYmZy5jb250YWlucyh0aGlzKTt9fSk7Zi5jb21wdXRlPWZ1bmN0aW9uKGksaCxnKXtyZXR1cm4oaC1pKSpnK2k7fTtmLkR1cmF0aW9ucz17InNob3J0IjoyNTAsbm9ybWFsOjUwMCwibG9uZyI6MTAwMH07dmFyIGU9e30sYz17fTt2YXIgYT1mdW5jdGlvbigpe3ZhciBoPURhdGUubm93KCk7CmZvcih2YXIgaj10aGlzLmxlbmd0aDtqLS07KXt2YXIgZz10aGlzW2pdO2lmKGcpe2cuc3RlcChoKTt9fX07dmFyIGI9ZnVuY3Rpb24oaCl7dmFyIGc9ZVtoXXx8KGVbaF09W10pO2cucHVzaCh0aGlzKTtpZighY1toXSl7Y1toXT1hLnBlcmlvZGljYWwoTWF0aC5yb3VuZCgxMDAwL2gpLGcpOwp9fTt2YXIgZD1mdW5jdGlvbihoKXt2YXIgZz1lW2hdO2lmKGcpe2cuZXJhc2UodGhpcyk7aWYoIWcubGVuZ3RoJiZjW2hdKXtkZWxldGUgZVtoXTtjW2hdPWNsZWFySW50ZXJ2YWwoY1toXSk7fX19O30pKCk7RnguQ1NTPW5ldyBDbGFzcyh7RXh0ZW5kczpGeCxwcmVwYXJlOmZ1bmN0aW9uKGMsZCxiKXtiPUFycmF5LmZyb20oYik7CmlmKGJbMV09PW51bGwpe2JbMV09YlswXTtiWzBdPWMuZ2V0U3R5bGUoZCk7fXZhciBhPWIubWFwKHRoaXMucGFyc2UpO3JldHVybntmcm9tOmFbMF0sdG86YVsxXX07fSxwYXJzZTpmdW5jdGlvbihhKXthPUZ1bmN0aW9uLmZyb20oYSkoKTthPSh0eXBlb2YgYT09InN0cmluZyIpP2Euc3BsaXQoIiAiKTpBcnJheS5mcm9tKGEpOwpyZXR1cm4gYS5tYXAoZnVuY3Rpb24oYyl7Yz1TdHJpbmcoYyk7dmFyIGI9ZmFsc2U7T2JqZWN0LmVhY2goRnguQ1NTLlBhcnNlcnMsZnVuY3Rpb24oZixlKXtpZihiKXtyZXR1cm47fXZhciBkPWYucGFyc2UoYyk7aWYoZHx8ZD09PTApe2I9e3ZhbHVlOmQscGFyc2VyOmZ9Owp9fSk7Yj1ifHx7dmFsdWU6YyxwYXJzZXI6RnguQ1NTLlBhcnNlcnMuU3RyaW5nfTtyZXR1cm4gYjt9KTt9LGNvbXB1dGU6ZnVuY3Rpb24oZCxjLGIpe3ZhciBhPVtdOyhNYXRoLm1pbihkLmxlbmd0aCxjLmxlbmd0aCkpLnRpbWVzKGZ1bmN0aW9uKGUpe2EucHVzaCh7dmFsdWU6ZFtlXS5wYXJzZXIuY29tcHV0ZShkW2VdLnZhbHVlLGNbZV0udmFsdWUsYikscGFyc2VyOmRbZV0ucGFyc2VyfSk7Cn0pO2EuJGZhbWlseT1GdW5jdGlvbi5mcm9tKCJmeDpjc3M6dmFsdWUiKTtyZXR1cm4gYTt9LHNlcnZlOmZ1bmN0aW9uKGMsYil7aWYodHlwZU9mKGMpIT0iZng6Y3NzOnZhbHVlIil7Yz10aGlzLnBhcnNlKGMpO312YXIgYT1bXTtjLmVhY2goZnVuY3Rpb24oZCl7YT1hLmNvbmNhdChkLnBhcnNlci5zZXJ2ZShkLnZhbHVlLGIpKTsKfSk7cmV0dXJuIGE7fSxyZW5kZXI6ZnVuY3Rpb24oYSxkLGMsYil7YS5zZXRTdHlsZShkLHRoaXMuc2VydmUoYyxiKSk7fSxzZWFyY2g6ZnVuY3Rpb24oYSl7aWYoRnguQ1NTLkNhY2hlW2FdKXtyZXR1cm4gRnguQ1NTLkNhY2hlW2FdO312YXIgYz17fSxiPW5ldyBSZWdFeHAoIl4iK2EuZXNjYXBlUmVnRXhwKCkrIiQiKTsKQXJyYXkuZWFjaChkb2N1bWVudC5zdHlsZVNoZWV0cyxmdW5jdGlvbihmLGUpe3ZhciBkPWYuaHJlZjtpZihkJiZkLmNvbnRhaW5zKCI6Ly8iKSYmIWQuY29udGFpbnMoZG9jdW1lbnQuZG9tYWluKSl7cmV0dXJuO312YXIgZz1mLnJ1bGVzfHxmLmNzc1J1bGVzO0FycmF5LmVhY2goZyxmdW5jdGlvbihrLGgpe2lmKCFrLnN0eWxlKXtyZXR1cm47Cn12YXIgaj0oay5zZWxlY3RvclRleHQpP2suc2VsZWN0b3JUZXh0LnJlcGxhY2UoL15cdysvLGZ1bmN0aW9uKGkpe3JldHVybiBpLnRvTG93ZXJDYXNlKCk7fSk6bnVsbDtpZighanx8IWIudGVzdChqKSl7cmV0dXJuO31PYmplY3QuZWFjaChFbGVtZW50LlN0eWxlcyxmdW5jdGlvbihsLGkpe2lmKCFrLnN0eWxlW2ldfHxFbGVtZW50LlNob3J0U3R5bGVzW2ldKXtyZXR1cm47Cn1sPVN0cmluZyhrLnN0eWxlW2ldKTtjW2ldPSgoL15yZ2IvKS50ZXN0KGwpKT9sLnJnYlRvSGV4KCk6bDt9KTt9KTt9KTtyZXR1cm4gRnguQ1NTLkNhY2hlW2FdPWM7fX0pO0Z4LkNTUy5DYWNoZT17fTtGeC5DU1MuUGFyc2Vycz17Q29sb3I6e3BhcnNlOmZ1bmN0aW9uKGEpe2lmKGEubWF0Y2goL14jWzAtOWEtZl17Myw2fSQvaSkpe3JldHVybiBhLmhleFRvUmdiKHRydWUpOwp9cmV0dXJuKChhPWEubWF0Y2goLyhcZCspLFxzKihcZCspLFxzKihcZCspLykpKT9bYVsxXSxhWzJdLGFbM11dOmZhbHNlO30sY29tcHV0ZTpmdW5jdGlvbihjLGIsYSl7cmV0dXJuIGMubWFwKGZ1bmN0aW9uKGUsZCl7cmV0dXJuIE1hdGgucm91bmQoRnguY29tcHV0ZShjW2RdLGJbZF0sYSkpOwp9KTt9LHNlcnZlOmZ1bmN0aW9uKGEpe3JldHVybiBhLm1hcChOdW1iZXIpO319LE51bWJlcjp7cGFyc2U6cGFyc2VGbG9hdCxjb21wdXRlOkZ4LmNvbXB1dGUsc2VydmU6ZnVuY3Rpb24oYixhKXtyZXR1cm4oYSk/YithOmI7fX0sU3RyaW5nOntwYXJzZTpGdW5jdGlvbi5mcm9tKGZhbHNlKSxjb21wdXRlOmZ1bmN0aW9uKGIsYSl7cmV0dXJuIGE7Cn0sc2VydmU6ZnVuY3Rpb24oYSl7cmV0dXJuIGE7fX19O0Z4LkNTUy5QYXJzZXJzPW5ldyBIYXNoKEZ4LkNTUy5QYXJzZXJzKTtGeC5Ud2Vlbj1uZXcgQ2xhc3Moe0V4dGVuZHM6RnguQ1NTLGluaXRpYWxpemU6ZnVuY3Rpb24oYixhKXt0aGlzLmVsZW1lbnQ9dGhpcy5zdWJqZWN0PWRvY3VtZW50LmlkKGIpOwp0aGlzLnBhcmVudChhKTt9LHNldDpmdW5jdGlvbihiLGEpe2lmKGFyZ3VtZW50cy5sZW5ndGg9PTEpe2E9YjtiPXRoaXMucHJvcGVydHl8fHRoaXMub3B0aW9ucy5wcm9wZXJ0eTt9dGhpcy5yZW5kZXIodGhpcy5lbGVtZW50LGIsYSx0aGlzLm9wdGlvbnMudW5pdCk7CnJldHVybiB0aGlzO30sc3RhcnQ6ZnVuY3Rpb24oYyxlLGQpe2lmKCF0aGlzLmNoZWNrKGMsZSxkKSl7cmV0dXJuIHRoaXM7fXZhciBiPUFycmF5LmZsYXR0ZW4oYXJndW1lbnRzKTt0aGlzLnByb3BlcnR5PXRoaXMub3B0aW9ucy5wcm9wZXJ0eXx8Yi5zaGlmdCgpO3ZhciBhPXRoaXMucHJlcGFyZSh0aGlzLmVsZW1lbnQsdGhpcy5wcm9wZXJ0eSxiKTsKcmV0dXJuIHRoaXMucGFyZW50KGEuZnJvbSxhLnRvKTt9fSk7RWxlbWVudC5Qcm9wZXJ0aWVzLnR3ZWVuPXtzZXQ6ZnVuY3Rpb24oYSl7dGhpcy5nZXQoInR3ZWVuIikuY2FuY2VsKCkuc2V0T3B0aW9ucyhhKTtyZXR1cm4gdGhpczt9LGdldDpmdW5jdGlvbigpe3ZhciBhPXRoaXMucmV0cmlldmUoInR3ZWVuIik7CmlmKCFhKXthPW5ldyBGeC5Ud2Vlbih0aGlzLHtsaW5rOiJjYW5jZWwifSk7dGhpcy5zdG9yZSgidHdlZW4iLGEpO31yZXR1cm4gYTt9fTtFbGVtZW50LmltcGxlbWVudCh7dHdlZW46ZnVuY3Rpb24oYSxjLGIpe3RoaXMuZ2V0KCJ0d2VlbiIpLnN0YXJ0KGFyZ3VtZW50cyk7CnJldHVybiB0aGlzO30sZmFkZTpmdW5jdGlvbihjKXt2YXIgZT10aGlzLmdldCgidHdlZW4iKSxkPSJvcGFjaXR5IixhO2M9W2MsInRvZ2dsZSJdLnBpY2soKTtzd2l0Y2goYyl7Y2FzZSJpbiI6ZS5zdGFydChkLDEpO2JyZWFrO2Nhc2Uib3V0IjplLnN0YXJ0KGQsMCk7CmJyZWFrO2Nhc2Uic2hvdyI6ZS5zZXQoZCwxKTticmVhaztjYXNlImhpZGUiOmUuc2V0KGQsMCk7YnJlYWs7Y2FzZSJ0b2dnbGUiOnZhciBiPXRoaXMucmV0cmlldmUoImZhZGU6ZmxhZyIsdGhpcy5nZXQoIm9wYWNpdHkiKT09MSk7ZS5zdGFydChkLChiKT8wOjEpO3RoaXMuc3RvcmUoImZhZGU6ZmxhZyIsIWIpOwphPXRydWU7YnJlYWs7ZGVmYXVsdDplLnN0YXJ0KGQsYXJndW1lbnRzKTt9aWYoIWEpe3RoaXMuZWxpbWluYXRlKCJmYWRlOmZsYWciKTt9cmV0dXJuIHRoaXM7fSxoaWdobGlnaHQ6ZnVuY3Rpb24oYyxhKXtpZighYSl7YT10aGlzLnJldHJpZXZlKCJoaWdobGlnaHQ6b3JpZ2luYWwiLHRoaXMuZ2V0U3R5bGUoImJhY2tncm91bmQtY29sb3IiKSk7CmE9KGE9PSJ0cmFuc3BhcmVudCIpPyIjZmZmIjphO312YXIgYj10aGlzLmdldCgidHdlZW4iKTtiLnN0YXJ0KCJiYWNrZ3JvdW5kLWNvbG9yIixjfHwiI2ZmZmY4OCIsYSkuY2hhaW4oZnVuY3Rpb24oKXt0aGlzLnNldFN0eWxlKCJiYWNrZ3JvdW5kLWNvbG9yIix0aGlzLnJldHJpZXZlKCJoaWdobGlnaHQ6b3JpZ2luYWwiKSk7CmIuY2FsbENoYWluKCk7fS5iaW5kKHRoaXMpKTtyZXR1cm4gdGhpczt9fSk7RnguTW9ycGg9bmV3IENsYXNzKHtFeHRlbmRzOkZ4LkNTUyxpbml0aWFsaXplOmZ1bmN0aW9uKGIsYSl7dGhpcy5lbGVtZW50PXRoaXMuc3ViamVjdD1kb2N1bWVudC5pZChiKTt0aGlzLnBhcmVudChhKTsKfSxzZXQ6ZnVuY3Rpb24oYSl7aWYodHlwZW9mIGE9PSJzdHJpbmciKXthPXRoaXMuc2VhcmNoKGEpO31mb3IodmFyIGIgaW4gYSl7dGhpcy5yZW5kZXIodGhpcy5lbGVtZW50LGIsYVtiXSx0aGlzLm9wdGlvbnMudW5pdCk7fXJldHVybiB0aGlzO30sY29tcHV0ZTpmdW5jdGlvbihlLGQsYyl7dmFyIGE9e307CmZvcih2YXIgYiBpbiBlKXthW2JdPXRoaXMucGFyZW50KGVbYl0sZFtiXSxjKTt9cmV0dXJuIGE7fSxzdGFydDpmdW5jdGlvbihiKXtpZighdGhpcy5jaGVjayhiKSl7cmV0dXJuIHRoaXM7fWlmKHR5cGVvZiBiPT0ic3RyaW5nIil7Yj10aGlzLnNlYXJjaChiKTt9dmFyIGU9e30sZD17fTsKZm9yKHZhciBjIGluIGIpe3ZhciBhPXRoaXMucHJlcGFyZSh0aGlzLmVsZW1lbnQsYyxiW2NdKTtlW2NdPWEuZnJvbTtkW2NdPWEudG87fXJldHVybiB0aGlzLnBhcmVudChlLGQpO319KTtFbGVtZW50LlByb3BlcnRpZXMubW9ycGg9e3NldDpmdW5jdGlvbihhKXt0aGlzLmdldCgibW9ycGgiKS5jYW5jZWwoKS5zZXRPcHRpb25zKGEpOwpyZXR1cm4gdGhpczt9LGdldDpmdW5jdGlvbigpe3ZhciBhPXRoaXMucmV0cmlldmUoIm1vcnBoIik7aWYoIWEpe2E9bmV3IEZ4Lk1vcnBoKHRoaXMse2xpbms6ImNhbmNlbCJ9KTt0aGlzLnN0b3JlKCJtb3JwaCIsYSk7fXJldHVybiBhO319O0VsZW1lbnQuaW1wbGVtZW50KHttb3JwaDpmdW5jdGlvbihhKXt0aGlzLmdldCgibW9ycGgiKS5zdGFydChhKTsKcmV0dXJuIHRoaXM7fX0pO0Z4LmltcGxlbWVudCh7Z2V0VHJhbnNpdGlvbjpmdW5jdGlvbigpe3ZhciBhPXRoaXMub3B0aW9ucy50cmFuc2l0aW9ufHxGeC5UcmFuc2l0aW9ucy5TaW5lLmVhc2VJbk91dDtpZih0eXBlb2YgYT09InN0cmluZyIpe3ZhciBiPWEuc3BsaXQoIjoiKTsKYT1GeC5UcmFuc2l0aW9uczthPWFbYlswXV18fGFbYlswXS5jYXBpdGFsaXplKCldO2lmKGJbMV0pe2E9YVsiZWFzZSIrYlsxXS5jYXBpdGFsaXplKCkrKGJbMl0/YlsyXS5jYXBpdGFsaXplKCk6IiIpXTt9fXJldHVybiBhO319KTtGeC5UcmFuc2l0aW9uPWZ1bmN0aW9uKGMsYil7Yj1BcnJheS5mcm9tKGIpOwp2YXIgYT1mdW5jdGlvbihkKXtyZXR1cm4gYyhkLGIpO307cmV0dXJuIE9iamVjdC5hcHBlbmQoYSx7ZWFzZUluOmEsZWFzZU91dDpmdW5jdGlvbihkKXtyZXR1cm4gMS1jKDEtZCxiKTt9LGVhc2VJbk91dDpmdW5jdGlvbihkKXtyZXR1cm4oZDw9MC41P2MoMipkLGIpOigyLWMoMiooMS1kKSxiKSkpLzI7Cn19KTt9O0Z4LlRyYW5zaXRpb25zPXtsaW5lYXI6ZnVuY3Rpb24oYSl7cmV0dXJuIGE7fX07RnguVHJhbnNpdGlvbnM9bmV3IEhhc2goRnguVHJhbnNpdGlvbnMpO0Z4LlRyYW5zaXRpb25zLmV4dGVuZD1mdW5jdGlvbihhKXtmb3IodmFyIGIgaW4gYSl7RnguVHJhbnNpdGlvbnNbYl09bmV3IEZ4LlRyYW5zaXRpb24oYVtiXSk7Cn19O0Z4LlRyYW5zaXRpb25zLmV4dGVuZCh7UG93OmZ1bmN0aW9uKGIsYSl7cmV0dXJuIE1hdGgucG93KGIsYSYmYVswXXx8Nik7fSxFeHBvOmZ1bmN0aW9uKGEpe3JldHVybiBNYXRoLnBvdygyLDgqKGEtMSkpO30sQ2lyYzpmdW5jdGlvbihhKXtyZXR1cm4gMS1NYXRoLnNpbihNYXRoLmFjb3MoYSkpOwp9LFNpbmU6ZnVuY3Rpb24oYSl7cmV0dXJuIDEtTWF0aC5jb3MoYSpNYXRoLlBJLzIpO30sQmFjazpmdW5jdGlvbihiLGEpe2E9YSYmYVswXXx8MS42MTg7cmV0dXJuIE1hdGgucG93KGIsMikqKChhKzEpKmItYSk7fSxCb3VuY2U6ZnVuY3Rpb24oZil7dmFyIGU7Zm9yKHZhciBkPTAsYz0xOwoxO2QrPWMsYy89Mil7aWYoZj49KDctNCpkKS8xMSl7ZT1jKmMtTWF0aC5wb3coKDExLTYqZC0xMSpmKS80LDIpO2JyZWFrO319cmV0dXJuIGU7fSxFbGFzdGljOmZ1bmN0aW9uKGIsYSl7cmV0dXJuIE1hdGgucG93KDIsMTAqLS1iKSpNYXRoLmNvcygyMCpiKk1hdGguUEkqKGEmJmFbMF18fDEpLzMpOwp9fSk7WyJRdWFkIiwiQ3ViaWMiLCJRdWFydCIsIlF1aW50Il0uZWFjaChmdW5jdGlvbihiLGEpe0Z4LlRyYW5zaXRpb25zW2JdPW5ldyBGeC5UcmFuc2l0aW9uKGZ1bmN0aW9uKGMpe3JldHVybiBNYXRoLnBvdyhjLGErMik7fSk7fSk7KGZ1bmN0aW9uKCl7dmFyIGQ9ZnVuY3Rpb24oKXt9LGE9KCJvbnByb2dyZXNzIiBpbiBuZXcgQnJvd3Nlci5SZXF1ZXN0KTsKdmFyIGM9dGhpcy5SZXF1ZXN0PW5ldyBDbGFzcyh7SW1wbGVtZW50czpbQ2hhaW4sRXZlbnRzLE9wdGlvbnNdLG9wdGlvbnM6e3VybDoiIixkYXRhOiIiLGhlYWRlcnM6eyJYLVJlcXVlc3RlZC1XaXRoIjoiWE1MSHR0cFJlcXVlc3QiLEFjY2VwdDoidGV4dC9qYXZhc2NyaXB0LCB0ZXh0L2h0bWwsIGFwcGxpY2F0aW9uL3htbCwgdGV4dC94bWwsICovKiJ9LGFzeW5jOnRydWUsZm9ybWF0OmZhbHNlLG1ldGhvZDoicG9zdCIsbGluazoiaWdub3JlIixpc1N1Y2Nlc3M6bnVsbCxlbXVsYXRpb246dHJ1ZSx1cmxFbmNvZGVkOnRydWUsZW5jb2Rpbmc6InV0Zi04IixldmFsU2NyaXB0czpmYWxzZSxldmFsUmVzcG9uc2U6ZmFsc2UsdGltZW91dDowLG5vQ2FjaGU6ZmFsc2V9LGluaXRpYWxpemU6ZnVuY3Rpb24oZSl7dGhpcy54aHI9bmV3IEJyb3dzZXIuUmVxdWVzdCgpOwp0aGlzLnNldE9wdGlvbnMoZSk7dGhpcy5oZWFkZXJzPXRoaXMub3B0aW9ucy5oZWFkZXJzO30sb25TdGF0ZUNoYW5nZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMueGhyO2lmKGUucmVhZHlTdGF0ZSE9NHx8IXRoaXMucnVubmluZyl7cmV0dXJuO310aGlzLnJ1bm5pbmc9ZmFsc2U7CnRoaXMuc3RhdHVzPTA7RnVuY3Rpb24uYXR0ZW1wdChmdW5jdGlvbigpe3ZhciBmPWUuc3RhdHVzO3RoaXMuc3RhdHVzPShmPT0xMjIzKT8yMDQ6Zjt9LmJpbmQodGhpcykpO2Uub25yZWFkeXN0YXRlY2hhbmdlPWQ7aWYoYSl7ZS5vbnByb2dyZXNzPWUub25sb2Fkc3RhcnQ9ZDsKfWNsZWFyVGltZW91dCh0aGlzLnRpbWVyKTt0aGlzLnJlc3BvbnNlPXt0ZXh0OnRoaXMueGhyLnJlc3BvbnNlVGV4dHx8IiIseG1sOnRoaXMueGhyLnJlc3BvbnNlWE1MfTtpZih0aGlzLm9wdGlvbnMuaXNTdWNjZXNzLmNhbGwodGhpcyx0aGlzLnN0YXR1cykpe3RoaXMuc3VjY2Vzcyh0aGlzLnJlc3BvbnNlLnRleHQsdGhpcy5yZXNwb25zZS54bWwpOwp9ZWxzZXt0aGlzLmZhaWx1cmUoKTt9fSxpc1N1Y2Nlc3M6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnN0YXR1cztyZXR1cm4oZT49MjAwJiZlPDMwMCk7fSxpc1J1bm5pbmc6ZnVuY3Rpb24oKXtyZXR1cm4gISF0aGlzLnJ1bm5pbmc7fSxwcm9jZXNzU2NyaXB0czpmdW5jdGlvbihlKXtpZih0aGlzLm9wdGlvbnMuZXZhbFJlc3BvbnNlfHwoLyhlY21hfGphdmEpc2NyaXB0LykudGVzdCh0aGlzLmdldEhlYWRlcigiQ29udGVudC10eXBlIikpKXtyZXR1cm4gQnJvd3Nlci5leGVjKGUpOwp9cmV0dXJuIGUuc3RyaXBTY3JpcHRzKHRoaXMub3B0aW9ucy5ldmFsU2NyaXB0cyk7fSxzdWNjZXNzOmZ1bmN0aW9uKGYsZSl7dGhpcy5vblN1Y2Nlc3ModGhpcy5wcm9jZXNzU2NyaXB0cyhmKSxlKTt9LG9uU3VjY2VzczpmdW5jdGlvbigpe3RoaXMuZmlyZUV2ZW50KCJjb21wbGV0ZSIsYXJndW1lbnRzKS5maXJlRXZlbnQoInN1Y2Nlc3MiLGFyZ3VtZW50cykuY2FsbENoYWluKCk7Cn0sZmFpbHVyZTpmdW5jdGlvbigpe3RoaXMub25GYWlsdXJlKCk7fSxvbkZhaWx1cmU6ZnVuY3Rpb24oKXt0aGlzLmZpcmVFdmVudCgiY29tcGxldGUiKS5maXJlRXZlbnQoImZhaWx1cmUiLHRoaXMueGhyKTt9LGxvYWRzdGFydDpmdW5jdGlvbihlKXt0aGlzLmZpcmVFdmVudCgibG9hZHN0YXJ0IixbZSx0aGlzLnhocl0pOwp9LHByb2dyZXNzOmZ1bmN0aW9uKGUpe3RoaXMuZmlyZUV2ZW50KCJwcm9ncmVzcyIsW2UsdGhpcy54aHJdKTt9LHRpbWVvdXQ6ZnVuY3Rpb24oKXt0aGlzLmZpcmVFdmVudCgidGltZW91dCIsdGhpcy54aHIpO30sc2V0SGVhZGVyOmZ1bmN0aW9uKGUsZil7dGhpcy5oZWFkZXJzW2VdPWY7CnJldHVybiB0aGlzO30sZ2V0SGVhZGVyOmZ1bmN0aW9uKGUpe3JldHVybiBGdW5jdGlvbi5hdHRlbXB0KGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMueGhyLmdldFJlc3BvbnNlSGVhZGVyKGUpO30uYmluZCh0aGlzKSk7fSxjaGVjazpmdW5jdGlvbigpe2lmKCF0aGlzLnJ1bm5pbmcpe3JldHVybiB0cnVlOwp9c3dpdGNoKHRoaXMub3B0aW9ucy5saW5rKXtjYXNlImNhbmNlbCI6dGhpcy5jYW5jZWwoKTtyZXR1cm4gdHJ1ZTtjYXNlImNoYWluIjp0aGlzLmNoYWluKHRoaXMuY2FsbGVyLnBhc3MoYXJndW1lbnRzLHRoaXMpKTtyZXR1cm4gZmFsc2U7fXJldHVybiBmYWxzZTt9LHNlbmQ6ZnVuY3Rpb24obyl7aWYoIXRoaXMuY2hlY2sobykpe3JldHVybiB0aGlzOwp9dGhpcy5vcHRpb25zLmlzU3VjY2Vzcz10aGlzLm9wdGlvbnMuaXNTdWNjZXNzfHx0aGlzLmlzU3VjY2Vzczt0aGlzLnJ1bm5pbmc9dHJ1ZTt2YXIgbD10eXBlT2Yobyk7aWYobD09InN0cmluZyJ8fGw9PSJlbGVtZW50Iil7bz17ZGF0YTpvfTt9dmFyIGg9dGhpcy5vcHRpb25zOwpvPU9iamVjdC5hcHBlbmQoe2RhdGE6aC5kYXRhLHVybDpoLnVybCxtZXRob2Q6aC5tZXRob2R9LG8pO3ZhciBqPW8uZGF0YSxmPVN0cmluZyhvLnVybCksZT1vLm1ldGhvZC50b0xvd2VyQ2FzZSgpO3N3aXRjaCh0eXBlT2Yoaikpe2Nhc2UiZWxlbWVudCI6aj1kb2N1bWVudC5pZChqKS50b1F1ZXJ5U3RyaW5nKCk7CmJyZWFrO2Nhc2Uib2JqZWN0IjpjYXNlImhhc2giOmo9T2JqZWN0LnRvUXVlcnlTdHJpbmcoaik7fWlmKHRoaXMub3B0aW9ucy5mb3JtYXQpe3ZhciBtPSJmb3JtYXQ9Iit0aGlzLm9wdGlvbnMuZm9ybWF0O2o9KGopP20rIiYiK2o6bTt9aWYodGhpcy5vcHRpb25zLmVtdWxhdGlvbiYmIVsiZ2V0IiwicG9zdCJdLmNvbnRhaW5zKGUpKXt2YXIgaz0iX21ldGhvZD0iK2U7Cmo9KGopP2srIiYiK2o6aztlPSJwb3N0Ijt9aWYodGhpcy5vcHRpb25zLnVybEVuY29kZWQmJlsicG9zdCIsInB1dCJdLmNvbnRhaW5zKGUpKXt2YXIgZz0odGhpcy5vcHRpb25zLmVuY29kaW5nKT8iOyBjaGFyc2V0PSIrdGhpcy5vcHRpb25zLmVuY29kaW5nOiIiO3RoaXMuaGVhZGVyc1siQ29udGVudC10eXBlIl09ImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCIrZzsKfWlmKCFmKXtmPWRvY3VtZW50LmxvY2F0aW9uLnBhdGhuYW1lO312YXIgaT1mLmxhc3RJbmRleE9mKCIvIik7aWYoaT4tMSYmKGk9Zi5pbmRleE9mKCIjIikpPi0xKXtmPWYuc3Vic3RyKDAsaSk7fWlmKHRoaXMub3B0aW9ucy5ub0NhY2hlKXtmKz0oZi5jb250YWlucygiPyIpPyImIjoiPyIpK1N0cmluZy51bmlxdWVJRCgpOwp9aWYoaiYmZT09ImdldCIpe2YrPShmLmNvbnRhaW5zKCI/Iik/IiYiOiI/IikrajtqPW51bGw7fXZhciBuPXRoaXMueGhyO2lmKGEpe24ub25sb2Fkc3RhcnQ9dGhpcy5sb2Fkc3RhcnQuYmluZCh0aGlzKTtuLm9ucHJvZ3Jlc3M9dGhpcy5wcm9ncmVzcy5iaW5kKHRoaXMpOwp9bi5vcGVuKGUudG9VcHBlckNhc2UoKSxmLHRoaXMub3B0aW9ucy5hc3luYyx0aGlzLm9wdGlvbnMudXNlcix0aGlzLm9wdGlvbnMucGFzc3dvcmQpO2lmKHRoaXMub3B0aW9ucy51c2VyJiYid2l0aENyZWRlbnRpYWxzIiBpbiBuKXtuLndpdGhDcmVkZW50aWFscz10cnVlOwp9bi5vbnJlYWR5c3RhdGVjaGFuZ2U9dGhpcy5vblN0YXRlQ2hhbmdlLmJpbmQodGhpcyk7T2JqZWN0LmVhY2godGhpcy5oZWFkZXJzLGZ1bmN0aW9uKHEscCl7dHJ5e24uc2V0UmVxdWVzdEhlYWRlcihwLHEpO31jYXRjaChyKXt0aGlzLmZpcmVFdmVudCgiZXhjZXB0aW9uIixbcCxxXSk7Cn19LHRoaXMpO3RoaXMuZmlyZUV2ZW50KCJyZXF1ZXN0Iik7bi5zZW5kKGopO2lmKCF0aGlzLm9wdGlvbnMuYXN5bmMpe3RoaXMub25TdGF0ZUNoYW5nZSgpO31pZih0aGlzLm9wdGlvbnMudGltZW91dCl7dGhpcy50aW1lcj10aGlzLnRpbWVvdXQuZGVsYXkodGhpcy5vcHRpb25zLnRpbWVvdXQsdGhpcyk7Cn1yZXR1cm4gdGhpczt9LGNhbmNlbDpmdW5jdGlvbigpe2lmKCF0aGlzLnJ1bm5pbmcpe3JldHVybiB0aGlzO310aGlzLnJ1bm5pbmc9ZmFsc2U7dmFyIGU9dGhpcy54aHI7ZS5hYm9ydCgpO2NsZWFyVGltZW91dCh0aGlzLnRpbWVyKTtlLm9ucmVhZHlzdGF0ZWNoYW5nZT1kOwppZihhKXtlLm9ucHJvZ3Jlc3M9ZS5vbmxvYWRzdGFydD1kO310aGlzLnhocj1uZXcgQnJvd3Nlci5SZXF1ZXN0KCk7dGhpcy5maXJlRXZlbnQoImNhbmNlbCIpO3JldHVybiB0aGlzO319KTt2YXIgYj17fTtbImdldCIsInBvc3QiLCJwdXQiLCJkZWxldGUiLCJHRVQiLCJQT1NUIiwiUFVUIiwiREVMRVRFIl0uZWFjaChmdW5jdGlvbihlKXtiW2VdPWZ1bmN0aW9uKGcpe3ZhciBmPXttZXRob2Q6ZX07CmlmKGchPW51bGwpe2YuZGF0YT1nO31yZXR1cm4gdGhpcy5zZW5kKGYpO307fSk7Yy5pbXBsZW1lbnQoYik7RWxlbWVudC5Qcm9wZXJ0aWVzLnNlbmQ9e3NldDpmdW5jdGlvbihlKXt2YXIgZj10aGlzLmdldCgic2VuZCIpLmNhbmNlbCgpO2Yuc2V0T3B0aW9ucyhlKTsKcmV0dXJuIHRoaXM7fSxnZXQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnJldHJpZXZlKCJzZW5kIik7aWYoIWUpe2U9bmV3IGMoe2RhdGE6dGhpcyxsaW5rOiJjYW5jZWwiLG1ldGhvZDp0aGlzLmdldCgibWV0aG9kIil8fCJwb3N0Iix1cmw6dGhpcy5nZXQoImFjdGlvbiIpfSk7CnRoaXMuc3RvcmUoInNlbmQiLGUpO31yZXR1cm4gZTt9fTtFbGVtZW50LmltcGxlbWVudCh7c2VuZDpmdW5jdGlvbihlKXt2YXIgZj10aGlzLmdldCgic2VuZCIpO2Yuc2VuZCh7ZGF0YTp0aGlzLHVybDplfHxmLm9wdGlvbnMudXJsfSk7cmV0dXJuIHRoaXM7fX0pO30pKCk7ClJlcXVlc3QuSFRNTD1uZXcgQ2xhc3Moe0V4dGVuZHM6UmVxdWVzdCxvcHRpb25zOnt1cGRhdGU6ZmFsc2UsYXBwZW5kOmZhbHNlLGV2YWxTY3JpcHRzOnRydWUsZmlsdGVyOmZhbHNlLGhlYWRlcnM6e0FjY2VwdDoidGV4dC9odG1sLCBhcHBsaWNhdGlvbi94bWwsIHRleHQveG1sLCAqLyoifX0sc3VjY2VzczpmdW5jdGlvbihlKXt2YXIgZD10aGlzLm9wdGlvbnMsYj10aGlzLnJlc3BvbnNlOwpiLmh0bWw9ZS5zdHJpcFNjcmlwdHMoZnVuY3Rpb24oZil7Yi5qYXZhc2NyaXB0PWY7fSk7dmFyIGM9Yi5odG1sLm1hdGNoKC88Ym9keVtePl0qPihbXHNcU10qPyk8XC9ib2R5Pi9pKTtpZihjKXtiLmh0bWw9Y1sxXTt9dmFyIGE9bmV3IEVsZW1lbnQoImRpdiIpLnNldCgiaHRtbCIsYi5odG1sKTsKYi50cmVlPWEuY2hpbGROb2RlcztiLmVsZW1lbnRzPWEuZ2V0RWxlbWVudHMoIioiKTtpZihkLmZpbHRlcil7Yi50cmVlPWIuZWxlbWVudHMuZmlsdGVyKGQuZmlsdGVyKTt9aWYoZC51cGRhdGUpe2RvY3VtZW50LmlkKGQudXBkYXRlKS5lbXB0eSgpLnNldCgiaHRtbCIsYi5odG1sKTsKfWVsc2V7aWYoZC5hcHBlbmQpe2RvY3VtZW50LmlkKGQuYXBwZW5kKS5hZG9wdChhLmdldENoaWxkcmVuKCkpO319aWYoZC5ldmFsU2NyaXB0cyl7QnJvd3Nlci5leGVjKGIuamF2YXNjcmlwdCk7fXRoaXMub25TdWNjZXNzKGIudHJlZSxiLmVsZW1lbnRzLGIuaHRtbCxiLmphdmFzY3JpcHQpOwp9fSk7RWxlbWVudC5Qcm9wZXJ0aWVzLmxvYWQ9e3NldDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmdldCgibG9hZCIpLmNhbmNlbCgpO2Iuc2V0T3B0aW9ucyhhKTtyZXR1cm4gdGhpczt9LGdldDpmdW5jdGlvbigpe3ZhciBhPXRoaXMucmV0cmlldmUoImxvYWQiKTtpZighYSl7YT1uZXcgUmVxdWVzdC5IVE1MKHtkYXRhOnRoaXMsbGluazoiY2FuY2VsIix1cGRhdGU6dGhpcyxtZXRob2Q6ImdldCJ9KTsKdGhpcy5zdG9yZSgibG9hZCIsYSk7fXJldHVybiBhO319O0VsZW1lbnQuaW1wbGVtZW50KHtsb2FkOmZ1bmN0aW9uKCl7dGhpcy5nZXQoImxvYWQiKS5zZW5kKEFycmF5LmxpbmsoYXJndW1lbnRzLHtkYXRhOlR5cGUuaXNPYmplY3QsdXJsOlR5cGUuaXNTdHJpbmd9KSk7CnJldHVybiB0aGlzO319KTtpZih0eXBlb2YgSlNPTj09InVuZGVmaW5lZCIpe3RoaXMuSlNPTj17fTt9SlNPTj1uZXcgSGFzaCh7c3RyaW5naWZ5OkpTT04uc3RyaW5naWZ5LHBhcnNlOkpTT04ucGFyc2V9KTsoZnVuY3Rpb24oKXt2YXIgc3BlY2lhbD17IlxiIjoiXFxiIiwiXHQiOiJcXHQiLCJcbiI6IlxcbiIsIlxmIjoiXFxmIiwiXHIiOiJcXHIiLCciJzonXFwiJywiXFwiOiJcXFxcIn07CnZhciBlc2NhcGU9ZnVuY3Rpb24oY2hyKXtyZXR1cm4gc3BlY2lhbFtjaHJdfHwiXFx1IisoIjAwMDAiK2Noci5jaGFyQ29kZUF0KDApLnRvU3RyaW5nKDE2KSkuc2xpY2UoLTQpO307SlNPTi52YWxpZGF0ZT1mdW5jdGlvbihzdHJpbmcpe3N0cmluZz1zdHJpbmcucmVwbGFjZSgvXFwoPzpbIlxcXC9iZm5ydF18dVswLTlhLWZBLUZdezR9KS9nLCJAIikucmVwbGFjZSgvIlteIlxcXG5ccl0qInx0cnVlfGZhbHNlfG51bGx8LT9cZCsoPzpcLlxkKik/KD86W2VFXVsrXC1dP1xkKyk/L2csIl0iKS5yZXBsYWNlKC8oPzpefDp8LCkoPzpccypcWykrL2csIiIpOwpyZXR1cm4oL15bXF0sOnt9XHNdKiQvKS50ZXN0KHN0cmluZyk7fTtKU09OLmVuY29kZT1KU09OLnN0cmluZ2lmeT9mdW5jdGlvbihvYmope3JldHVybiBKU09OLnN0cmluZ2lmeShvYmopO306ZnVuY3Rpb24ob2JqKXtpZihvYmomJm9iai50b0pTT04pe29iaj1vYmoudG9KU09OKCk7Cn1zd2l0Y2godHlwZU9mKG9iaikpe2Nhc2Uic3RyaW5nIjpyZXR1cm4nIicrb2JqLnJlcGxhY2UoL1tceDAwLVx4MWZcXCJdL2csZXNjYXBlKSsnIic7Y2FzZSJhcnJheSI6cmV0dXJuIlsiK29iai5tYXAoSlNPTi5lbmNvZGUpLmNsZWFuKCkrIl0iO2Nhc2Uib2JqZWN0IjpjYXNlImhhc2giOnZhciBzdHJpbmc9W107Ck9iamVjdC5lYWNoKG9iaixmdW5jdGlvbih2YWx1ZSxrZXkpe3ZhciBqc29uPUpTT04uZW5jb2RlKHZhbHVlKTtpZihqc29uKXtzdHJpbmcucHVzaChKU09OLmVuY29kZShrZXkpKyI6Iitqc29uKTt9fSk7cmV0dXJuInsiK3N0cmluZysifSI7Y2FzZSJudW1iZXIiOmNhc2UiYm9vbGVhbiI6cmV0dXJuIiIrb2JqOwpjYXNlIm51bGwiOnJldHVybiJudWxsIjt9cmV0dXJuIG51bGw7fTtKU09OLmRlY29kZT1mdW5jdGlvbihzdHJpbmcsc2VjdXJlKXtpZighc3RyaW5nfHx0eXBlT2Yoc3RyaW5nKSE9InN0cmluZyIpe3JldHVybiBudWxsO31pZihzZWN1cmV8fEpTT04uc2VjdXJlKXtpZihKU09OLnBhcnNlKXtyZXR1cm4gSlNPTi5wYXJzZShzdHJpbmcpOwp9aWYoIUpTT04udmFsaWRhdGUoc3RyaW5nKSl7dGhyb3cgbmV3IEVycm9yKCJKU09OIGNvdWxkIG5vdCBkZWNvZGUgdGhlIGlucHV0OyBzZWN1cml0eSBpcyBlbmFibGVkIGFuZCB0aGUgdmFsdWUgaXMgbm90IHNlY3VyZS4iKTt9fXJldHVybiBldmFsKCIoIitzdHJpbmcrIikiKTsKfTt9KSgpO1JlcXVlc3QuSlNPTj1uZXcgQ2xhc3Moe0V4dGVuZHM6UmVxdWVzdCxvcHRpb25zOntzZWN1cmU6dHJ1ZX0saW5pdGlhbGl6ZTpmdW5jdGlvbihhKXt0aGlzLnBhcmVudChhKTtPYmplY3QuYXBwZW5kKHRoaXMuaGVhZGVycyx7QWNjZXB0OiJhcHBsaWNhdGlvbi9qc29uIiwiWC1SZXF1ZXN0IjoiSlNPTiJ9KTsKfSxzdWNjZXNzOmZ1bmN0aW9uKGMpe3ZhciBiO3RyeXtiPXRoaXMucmVzcG9uc2UuanNvbj1KU09OLmRlY29kZShjLHRoaXMub3B0aW9ucy5zZWN1cmUpO31jYXRjaChhKXt0aGlzLmZpcmVFdmVudCgiZXJyb3IiLFtjLGFdKTtyZXR1cm47fWlmKGI9PW51bGwpe3RoaXMub25GYWlsdXJlKCk7Cn1lbHNle3RoaXMub25TdWNjZXNzKGIsYyk7fX19KTt2YXIgQ29va2llPW5ldyBDbGFzcyh7SW1wbGVtZW50czpPcHRpb25zLG9wdGlvbnM6e3BhdGg6Ii8iLGRvbWFpbjpmYWxzZSxkdXJhdGlvbjpmYWxzZSxzZWN1cmU6ZmFsc2UsZG9jdW1lbnQ6ZG9jdW1lbnQsZW5jb2RlOnRydWV9LGluaXRpYWxpemU6ZnVuY3Rpb24oYixhKXt0aGlzLmtleT1iOwp0aGlzLnNldE9wdGlvbnMoYSk7fSx3cml0ZTpmdW5jdGlvbihiKXtpZih0aGlzLm9wdGlvbnMuZW5jb2RlKXtiPWVuY29kZVVSSUNvbXBvbmVudChiKTt9aWYodGhpcy5vcHRpb25zLmRvbWFpbil7Yis9IjsgZG9tYWluPSIrdGhpcy5vcHRpb25zLmRvbWFpbjt9aWYodGhpcy5vcHRpb25zLnBhdGgpe2IrPSI7IHBhdGg9Iit0aGlzLm9wdGlvbnMucGF0aDsKfWlmKHRoaXMub3B0aW9ucy5kdXJhdGlvbil7dmFyIGE9bmV3IERhdGUoKTthLnNldFRpbWUoYS5nZXRUaW1lKCkrdGhpcy5vcHRpb25zLmR1cmF0aW9uKjI0KjYwKjYwKjEwMDApO2IrPSI7IGV4cGlyZXM9IithLnRvR01UU3RyaW5nKCk7fWlmKHRoaXMub3B0aW9ucy5zZWN1cmUpe2IrPSI7IHNlY3VyZSI7Cn10aGlzLm9wdGlvbnMuZG9jdW1lbnQuY29va2llPXRoaXMua2V5KyI9IitiO3JldHVybiB0aGlzO30scmVhZDpmdW5jdGlvbigpe3ZhciBhPXRoaXMub3B0aW9ucy5kb2N1bWVudC5jb29raWUubWF0Y2goIig/Ol58OylcXHMqIit0aGlzLmtleS5lc2NhcGVSZWdFeHAoKSsiPShbXjtdKikiKTsKcmV0dXJuKGEpP2RlY29kZVVSSUNvbXBvbmVudChhWzFdKTpudWxsO30sZGlzcG9zZTpmdW5jdGlvbigpe25ldyBDb29raWUodGhpcy5rZXksT2JqZWN0Lm1lcmdlKHt9LHRoaXMub3B0aW9ucyx7ZHVyYXRpb246LTF9KSkud3JpdGUoIiIpO3JldHVybiB0aGlzO319KTsKQ29va2llLndyaXRlPWZ1bmN0aW9uKGIsYyxhKXtyZXR1cm4gbmV3IENvb2tpZShiLGEpLndyaXRlKGMpO307Q29va2llLnJlYWQ9ZnVuY3Rpb24oYSl7cmV0dXJuIG5ldyBDb29raWUoYSkucmVhZCgpO307Q29va2llLmRpc3Bvc2U9ZnVuY3Rpb24oYixhKXtyZXR1cm4gbmV3IENvb2tpZShiLGEpLmRpc3Bvc2UoKTsKfTsoZnVuY3Rpb24oaSxrKXt2YXIgbCxmLGU9W10sYyxiLGQ9ay5jcmVhdGVFbGVtZW50KCJkaXYiKTt2YXIgZz1mdW5jdGlvbigpe2NsZWFyVGltZW91dChiKTtpZihsKXtyZXR1cm47fUJyb3dzZXIubG9hZGVkPWw9dHJ1ZTtrLnJlbW92ZUxpc3RlbmVyKCJET01Db250ZW50TG9hZGVkIixnKS5yZW1vdmVMaXN0ZW5lcigicmVhZHlzdGF0ZWNoYW5nZSIsYSk7CmsuZmlyZUV2ZW50KCJkb21yZWFkeSIpO2kuZmlyZUV2ZW50KCJkb21yZWFkeSIpO307dmFyIGE9ZnVuY3Rpb24oKXtmb3IodmFyIG09ZS5sZW5ndGg7bS0tOyl7aWYoZVttXSgpKXtnKCk7cmV0dXJuIHRydWU7fX1yZXR1cm4gZmFsc2U7fTt2YXIgaj1mdW5jdGlvbigpe2NsZWFyVGltZW91dChiKTsKaWYoIWEoKSl7Yj1zZXRUaW1lb3V0KGosMTApO319O2suYWRkTGlzdGVuZXIoIkRPTUNvbnRlbnRMb2FkZWQiLGcpO3ZhciBoPWZ1bmN0aW9uKCl7dHJ5e2QuZG9TY3JvbGwoKTtyZXR1cm4gdHJ1ZTt9Y2F0Y2gobSl7fXJldHVybiBmYWxzZTt9O2lmKGQuZG9TY3JvbGwmJiFoKCkpe2UucHVzaChoKTsKYz10cnVlO31pZihrLnJlYWR5U3RhdGUpe2UucHVzaChmdW5jdGlvbigpe3ZhciBtPWsucmVhZHlTdGF0ZTtyZXR1cm4obT09ImxvYWRlZCJ8fG09PSJjb21wbGV0ZSIpO30pO31pZigib25yZWFkeXN0YXRlY2hhbmdlIiBpbiBrKXtrLmFkZExpc3RlbmVyKCJyZWFkeXN0YXRlY2hhbmdlIixhKTsKfWVsc2V7Yz10cnVlO31pZihjKXtqKCk7fUVsZW1lbnQuRXZlbnRzLmRvbXJlYWR5PXtvbkFkZDpmdW5jdGlvbihtKXtpZihsKXttLmNhbGwodGhpcyk7fX19O0VsZW1lbnQuRXZlbnRzLmxvYWQ9e2Jhc2U6ImxvYWQiLG9uQWRkOmZ1bmN0aW9uKG0pe2lmKGYmJnRoaXM9PWkpe20uY2FsbCh0aGlzKTsKfX0sY29uZGl0aW9uOmZ1bmN0aW9uKCl7aWYodGhpcz09aSl7ZygpO2RlbGV0ZSBFbGVtZW50LkV2ZW50cy5sb2FkO31yZXR1cm4gdHJ1ZTt9fTtpLmFkZEV2ZW50KCJsb2FkIixmdW5jdGlvbigpe2Y9dHJ1ZTt9KTt9KSh3aW5kb3csZG9jdW1lbnQpOyhmdW5jdGlvbigpe3ZhciBTd2lmZj10aGlzLlN3aWZmPW5ldyBDbGFzcyh7SW1wbGVtZW50czpPcHRpb25zLG9wdGlvbnM6e2lkOm51bGwsaGVpZ2h0OjEsd2lkdGg6MSxjb250YWluZXI6bnVsbCxwcm9wZXJ0aWVzOnt9LHBhcmFtczp7cXVhbGl0eToiaGlnaCIsYWxsb3dTY3JpcHRBY2Nlc3M6ImFsd2F5cyIsd01vZGU6IndpbmRvdyIsc3dMaXZlQ29ubmVjdDp0cnVlfSxjYWxsQmFja3M6e30sdmFyczp7fX0sdG9FbGVtZW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub2JqZWN0Owp9LGluaXRpYWxpemU6ZnVuY3Rpb24ocGF0aCxvcHRpb25zKXt0aGlzLmluc3RhbmNlPSJTd2lmZl8iK1N0cmluZy51bmlxdWVJRCgpO3RoaXMuc2V0T3B0aW9ucyhvcHRpb25zKTtvcHRpb25zPXRoaXMub3B0aW9uczt2YXIgaWQ9dGhpcy5pZD1vcHRpb25zLmlkfHx0aGlzLmluc3RhbmNlOwp2YXIgY29udGFpbmVyPWRvY3VtZW50LmlkKG9wdGlvbnMuY29udGFpbmVyKTtTd2lmZi5DYWxsQmFja3NbdGhpcy5pbnN0YW5jZV09e307dmFyIHBhcmFtcz1vcHRpb25zLnBhcmFtcyx2YXJzPW9wdGlvbnMudmFycyxjYWxsQmFja3M9b3B0aW9ucy5jYWxsQmFja3M7CnZhciBwcm9wZXJ0aWVzPU9iamVjdC5hcHBlbmQoe2hlaWdodDpvcHRpb25zLmhlaWdodCx3aWR0aDpvcHRpb25zLndpZHRofSxvcHRpb25zLnByb3BlcnRpZXMpO3ZhciBzZWxmPXRoaXM7Zm9yKHZhciBjYWxsQmFjayBpbiBjYWxsQmFja3Mpe1N3aWZmLkNhbGxCYWNrc1t0aGlzLmluc3RhbmNlXVtjYWxsQmFja109KGZ1bmN0aW9uKG9wdGlvbil7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIG9wdGlvbi5hcHBseShzZWxmLm9iamVjdCxhcmd1bWVudHMpOwp9O30pKGNhbGxCYWNrc1tjYWxsQmFja10pO3ZhcnNbY2FsbEJhY2tdPSJTd2lmZi5DYWxsQmFja3MuIit0aGlzLmluc3RhbmNlKyIuIitjYWxsQmFjazt9cGFyYW1zLmZsYXNoVmFycz1PYmplY3QudG9RdWVyeVN0cmluZyh2YXJzKTtpZihCcm93c2VyLmllKXtwcm9wZXJ0aWVzLmNsYXNzaWQ9ImNsc2lkOkQyN0NEQjZFLUFFNkQtMTFjZi05NkI4LTQ0NDU1MzU0MDAwMCI7CnBhcmFtcy5tb3ZpZT1wYXRoO31lbHNle3Byb3BlcnRpZXMudHlwZT0iYXBwbGljYXRpb24veC1zaG9ja3dhdmUtZmxhc2giO31wcm9wZXJ0aWVzLmRhdGE9cGF0aDt2YXIgYnVpbGQ9JzxvYmplY3QgaWQ9IicraWQrJyInO2Zvcih2YXIgcHJvcGVydHkgaW4gcHJvcGVydGllcyl7YnVpbGQrPSIgIitwcm9wZXJ0eSsnPSInK3Byb3BlcnRpZXNbcHJvcGVydHldKyciJzsKfWJ1aWxkKz0iPiI7Zm9yKHZhciBwYXJhbSBpbiBwYXJhbXMpe2lmKHBhcmFtc1twYXJhbV0pe2J1aWxkKz0nPHBhcmFtIG5hbWU9IicrcGFyYW0rJyIgdmFsdWU9IicrcGFyYW1zW3BhcmFtXSsnIiAvPic7fX1idWlsZCs9Ijwvb2JqZWN0PiI7dGhpcy5vYmplY3Q9KChjb250YWluZXIpP2NvbnRhaW5lci5lbXB0eSgpOm5ldyBFbGVtZW50KCJkaXYiKSkuc2V0KCJodG1sIixidWlsZCkuZmlyc3RDaGlsZDsKfSxyZXBsYWNlczpmdW5jdGlvbihlbGVtZW50KXtlbGVtZW50PWRvY3VtZW50LmlkKGVsZW1lbnQsdHJ1ZSk7ZWxlbWVudC5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZCh0aGlzLnRvRWxlbWVudCgpLGVsZW1lbnQpO3JldHVybiB0aGlzO30saW5qZWN0OmZ1bmN0aW9uKGVsZW1lbnQpe2RvY3VtZW50LmlkKGVsZW1lbnQsdHJ1ZSkuYXBwZW5kQ2hpbGQodGhpcy50b0VsZW1lbnQoKSk7CnJldHVybiB0aGlzO30scmVtb3RlOmZ1bmN0aW9uKCl7cmV0dXJuIFN3aWZmLnJlbW90ZS5hcHBseShTd2lmZixbdGhpcy50b0VsZW1lbnQoKV0uYXBwZW5kKGFyZ3VtZW50cykpO319KTtTd2lmZi5DYWxsQmFja3M9e307U3dpZmYucmVtb3RlPWZ1bmN0aW9uKG9iaixmbil7dmFyIHJzPW9iai5DYWxsRnVuY3Rpb24oJzxpbnZva2UgbmFtZT0iJytmbisnIiByZXR1cm50eXBlPSJqYXZhc2NyaXB0Ij4nK19fZmxhc2hfX2FyZ3VtZW50c1RvWE1MKGFyZ3VtZW50cywyKSsiPC9pbnZva2U+Iik7CnJldHVybiBldmFsKHJzKTt9O30pKCk7",
                "body": "LyoKLS0tCk1vb1Rvb2xzOiB0aGUgamF2YXNjcmlwdCBmcmFtZXdvcmsKCndlYiBidWlsZDoKIC0gaHR0cDovL21vb3Rvb2xzLm5ldC9jb3JlLzdjNTZjZmVmOWRkZGNmMTcwYTVkNjhlM2ZiNjFjZmQ3CgpwYWNrYWdlciBidWlsZDoKIC0gcGFja2FnZXIgYnVpbGQgQ29yZS9Db3JlIENvcmUvQXJyYXkgQ29yZS9TdHJpbmcgQ29yZS9OdW1iZXIgQ29yZS9GdW5jdGlvbiBDb3JlL09iamVjdCBDb3JlL0V2ZW50IENvcmUvQnJvd3NlciBDb3JlL0NsYXNzIENvcmUvQ2xhc3MuRXh0cmFzIENvcmUvU2xpY2suUGFyc2VyIENvcmUvU2xpY2suRmluZGVyIENvcmUvRWxlbWVudCBDb3JlL0VsZW1lbnQuU3R5bGUgQ29yZS9FbGVtZW50LkV2ZW50IENvcmUvRWxlbWVudC5EaW1lbnNpb25zIENvcmUvRnggQ29yZS9GeC5DU1MgQ29yZS9GeC5Ud2VlbiBDb3JlL0Z4Lk1vcnBoIENvcmUvRnguVHJhbnNpdGlvbnMgQ29yZS9SZXF1ZXN0IENvcmUvUmVxdWVzdC5IVE1MIENvcmUvUmVxdWVzdC5KU09OIENvcmUvQ29va2llIENvcmUvSlNPTiBDb3JlL0RPTVJlYWR5IENvcmUvU3dpZmYKCmNvcHlyaWdodHM6CiAgLSBbTW9vVG9vbHNdKGh0dHA6Ly9tb290b29scy5uZXQpCgpsaWNlbnNlczoKICAtIFtNSVQgTGljZW5zZV0oaHR0cDovL21vb3Rvb2xzLm5ldC9saWNlbnNlLnR4dCkKLi4uCiovCihmdW5jdGlvbigpe3RoaXMuTW9vVG9vbHM9e3ZlcnNpb246IjEuMy4yIixidWlsZDoiYzlmMWZmMTBlOWU3ZmFjYjY1ZTk0ODEwNDllZDFiNDUwOTU5ZDU4NyJ9O3ZhciBlPXRoaXMudHlwZU9mPWZ1bmN0aW9uKGkpe2lmKGk9PW51bGwpe3JldHVybiJudWxsIjt9aWYoaS4kZmFtaWx5KXtyZXR1cm4gaS4kZmFtaWx5KCk7Cn1pZihpLm5vZGVOYW1lKXtpZihpLm5vZGVUeXBlPT0xKXtyZXR1cm4iZWxlbWVudCI7fWlmKGkubm9kZVR5cGU9PTMpe3JldHVybigvXFMvKS50ZXN0KGkubm9kZVZhbHVlKT8idGV4dG5vZGUiOiJ3aGl0ZXNwYWNlIjt9fWVsc2V7aWYodHlwZW9mIGkubGVuZ3RoPT0ibnVtYmVyIil7aWYoaS5jYWxsZWUpe3JldHVybiJhcmd1bWVudHMiOwp9aWYoIml0ZW0iIGluIGkpe3JldHVybiJjb2xsZWN0aW9uIjt9fX1yZXR1cm4gdHlwZW9mIGk7fTt2YXIgdT10aGlzLmluc3RhbmNlT2Y9ZnVuY3Rpb24odyxpKXtpZih3PT1udWxsKXtyZXR1cm4gZmFsc2U7fXZhciB2PXcuJGNvbnN0cnVjdG9yfHx3LmNvbnN0cnVjdG9yOwp3aGlsZSh2KXtpZih2PT09aSl7cmV0dXJuIHRydWU7fXY9di5wYXJlbnQ7fXJldHVybiB3IGluc3RhbmNlb2YgaTt9O3ZhciBmPXRoaXMuRnVuY3Rpb247dmFyIHI9dHJ1ZTtmb3IodmFyIHEgaW4ge3RvU3RyaW5nOjF9KXtyPW51bGw7fWlmKHIpe3I9WyJoYXNPd25Qcm9wZXJ0eSIsInZhbHVlT2YiLCJpc1Byb3RvdHlwZU9mIiwicHJvcGVydHlJc0VudW1lcmFibGUiLCJ0b0xvY2FsZVN0cmluZyIsInRvU3RyaW5nIiwiY29uc3RydWN0b3IiXTsKfWYucHJvdG90eXBlLm92ZXJsb2FkU2V0dGVyPWZ1bmN0aW9uKHYpe3ZhciBpPXRoaXM7cmV0dXJuIGZ1bmN0aW9uKHgsdyl7aWYoeD09bnVsbCl7cmV0dXJuIHRoaXM7fWlmKHZ8fHR5cGVvZiB4IT0ic3RyaW5nIil7Zm9yKHZhciB5IGluIHgpe2kuY2FsbCh0aGlzLHkseFt5XSk7Cn1pZihyKXtmb3IodmFyIHo9ci5sZW5ndGg7ei0tOyl7eT1yW3pdO2lmKHguaGFzT3duUHJvcGVydHkoeSkpe2kuY2FsbCh0aGlzLHkseFt5XSk7fX19fWVsc2V7aS5jYWxsKHRoaXMseCx3KTt9cmV0dXJuIHRoaXM7fTt9O2YucHJvdG90eXBlLm92ZXJsb2FkR2V0dGVyPWZ1bmN0aW9uKHYpe3ZhciBpPXRoaXM7CnJldHVybiBmdW5jdGlvbih4KXt2YXIgeSx3O2lmKHZ8fHR5cGVvZiB4IT0ic3RyaW5nIil7eT14O31lbHNle2lmKGFyZ3VtZW50cy5sZW5ndGg+MSl7eT1hcmd1bWVudHM7fX1pZih5KXt3PXt9O2Zvcih2YXIgej0wO3o8eS5sZW5ndGg7eisrKXt3W3lbel1dPWkuY2FsbCh0aGlzLHlbel0pOwp9fWVsc2V7dz1pLmNhbGwodGhpcyx4KTt9cmV0dXJuIHc7fTt9O2YucHJvdG90eXBlLmV4dGVuZD1mdW5jdGlvbihpLHYpe3RoaXNbaV09djt9Lm92ZXJsb2FkU2V0dGVyKCk7Zi5wcm90b3R5cGUuaW1wbGVtZW50PWZ1bmN0aW9uKGksdil7dGhpcy5wcm90b3R5cGVbaV09djsKfS5vdmVybG9hZFNldHRlcigpO3ZhciBvPUFycmF5LnByb3RvdHlwZS5zbGljZTtmLmZyb209ZnVuY3Rpb24oaSl7cmV0dXJuKGUoaSk9PSJmdW5jdGlvbiIpP2k6ZnVuY3Rpb24oKXtyZXR1cm4gaTt9O307QXJyYXkuZnJvbT1mdW5jdGlvbihpKXtpZihpPT1udWxsKXtyZXR1cm5bXTsKfXJldHVybihrLmlzRW51bWVyYWJsZShpKSYmdHlwZW9mIGkhPSJzdHJpbmciKT8oZShpKT09ImFycmF5Iik/aTpvLmNhbGwoaSk6W2ldO307TnVtYmVyLmZyb209ZnVuY3Rpb24odil7dmFyIGk9cGFyc2VGbG9hdCh2KTtyZXR1cm4gaXNGaW5pdGUoaSk/aTpudWxsOwp9O1N0cmluZy5mcm9tPWZ1bmN0aW9uKGkpe3JldHVybiBpKyIiO307Zi5pbXBsZW1lbnQoe2hpZGU6ZnVuY3Rpb24oKXt0aGlzLiRoaWRkZW49dHJ1ZTtyZXR1cm4gdGhpczt9LHByb3RlY3Q6ZnVuY3Rpb24oKXt0aGlzLiRwcm90ZWN0ZWQ9dHJ1ZTtyZXR1cm4gdGhpczsKfX0pO3ZhciBrPXRoaXMuVHlwZT1mdW5jdGlvbih4LHcpe2lmKHgpe3ZhciB2PXgudG9Mb3dlckNhc2UoKTt2YXIgaT1mdW5jdGlvbih5KXtyZXR1cm4oZSh5KT09dik7fTtrWyJpcyIreF09aTtpZih3IT1udWxsKXt3LnByb3RvdHlwZS4kZmFtaWx5PShmdW5jdGlvbigpe3JldHVybiB2Owp9KS5oaWRlKCk7dy50eXBlPWk7fX1pZih3PT1udWxsKXtyZXR1cm4gbnVsbDt9dy5leHRlbmQodGhpcyk7dy4kY29uc3RydWN0b3I9azt3LnByb3RvdHlwZS4kY29uc3RydWN0b3I9dztyZXR1cm4gdzt9O3ZhciBwPU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7ay5pc0VudW1lcmFibGU9ZnVuY3Rpb24oaSl7cmV0dXJuKGkhPW51bGwmJnR5cGVvZiBpLmxlbmd0aD09Im51bWJlciImJnAuY2FsbChpKSE9IltvYmplY3QgRnVuY3Rpb25dIik7Cn07dmFyIGI9e307dmFyIGQ9ZnVuY3Rpb24oaSl7dmFyIHY9ZShpLnByb3RvdHlwZSk7cmV0dXJuIGJbdl18fChiW3ZdPVtdKTt9O3ZhciBoPWZ1bmN0aW9uKHcsQSl7aWYoQSYmQS4kaGlkZGVuKXtyZXR1cm47fXZhciB2PWQodGhpcyk7Zm9yKHZhciB4PTA7eDx2Lmxlbmd0aDsKeCsrKXt2YXIgej12W3hdO2lmKGUoeik9PSJ0eXBlIil7aC5jYWxsKHosdyxBKTt9ZWxzZXt6LmNhbGwodGhpcyx3LEEpO319dmFyIHk9dGhpcy5wcm90b3R5cGVbd107aWYoeT09bnVsbHx8IXkuJHByb3RlY3RlZCl7dGhpcy5wcm90b3R5cGVbd109QTt9aWYodGhpc1t3XT09bnVsbCYmZShBKT09ImZ1bmN0aW9uIil7dC5jYWxsKHRoaXMsdyxmdW5jdGlvbihpKXtyZXR1cm4gQS5hcHBseShpLG8uY2FsbChhcmd1bWVudHMsMSkpOwp9KTt9fTt2YXIgdD1mdW5jdGlvbihpLHcpe2lmKHcmJncuJGhpZGRlbil7cmV0dXJuO312YXIgdj10aGlzW2ldO2lmKHY9PW51bGx8fCF2LiRwcm90ZWN0ZWQpe3RoaXNbaV09dzt9fTtrLmltcGxlbWVudCh7aW1wbGVtZW50Omgub3ZlcmxvYWRTZXR0ZXIoKSxleHRlbmQ6dC5vdmVybG9hZFNldHRlcigpLGFsaWFzOmZ1bmN0aW9uKGksdil7aC5jYWxsKHRoaXMsaSx0aGlzLnByb3RvdHlwZVt2XSk7Cn0ub3ZlcmxvYWRTZXR0ZXIoKSxtaXJyb3I6ZnVuY3Rpb24oaSl7ZCh0aGlzKS5wdXNoKGkpO3JldHVybiB0aGlzO319KTtuZXcgaygiVHlwZSIsayk7dmFyIGM9ZnVuY3Rpb24odix6LHgpe3ZhciB3PSh6IT1PYmplY3QpLEQ9ei5wcm90b3R5cGU7aWYodyl7ej1uZXcgayh2LHopOwp9Zm9yKHZhciBBPTAseT14Lmxlbmd0aDtBPHk7QSsrKXt2YXIgRT14W0FdLEM9eltFXSxCPURbRV07aWYoQyl7Qy5wcm90ZWN0KCk7fWlmKHcmJkIpe2RlbGV0ZSBEW0VdO0RbRV09Qi5wcm90ZWN0KCk7fX1pZih3KXt6LmltcGxlbWVudChEKTt9cmV0dXJuIGM7fTtjKCJTdHJpbmciLFN0cmluZyxbImNoYXJBdCIsImNoYXJDb2RlQXQiLCJjb25jYXQiLCJpbmRleE9mIiwibGFzdEluZGV4T2YiLCJtYXRjaCIsInF1b3RlIiwicmVwbGFjZSIsInNlYXJjaCIsInNsaWNlIiwic3BsaXQiLCJzdWJzdHIiLCJzdWJzdHJpbmciLCJ0b0xvd2VyQ2FzZSIsInRvVXBwZXJDYXNlIl0pKCJBcnJheSIsQXJyYXksWyJwb3AiLCJwdXNoIiwicmV2ZXJzZSIsInNoaWZ0Iiwic29ydCIsInNwbGljZSIsInVuc2hpZnQiLCJjb25jYXQiLCJqb2luIiwic2xpY2UiLCJpbmRleE9mIiwibGFzdEluZGV4T2YiLCJmaWx0ZXIiLCJmb3JFYWNoIiwiZXZlcnkiLCJtYXAiLCJzb21lIiwicmVkdWNlIiwicmVkdWNlUmlnaHQiXSkoIk51bWJlciIsTnVtYmVyLFsidG9FeHBvbmVudGlhbCIsInRvRml4ZWQiLCJ0b0xvY2FsZVN0cmluZyIsInRvUHJlY2lzaW9uIl0pKCJGdW5jdGlvbiIsZixbImFwcGx5IiwiY2FsbCIsImJpbmQiXSkoIlJlZ0V4cCIsUmVnRXhwLFsiZXhlYyIsInRlc3QiXSkoIk9iamVjdCIsT2JqZWN0LFsiY3JlYXRlIiwiZGVmaW5lUHJvcGVydHkiLCJkZWZpbmVQcm9wZXJ0aWVzIiwia2V5cyIsImdldFByb3RvdHlwZU9mIiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwiZ2V0T3duUHJvcGVydHlOYW1lcyIsInByZXZlbnRFeHRlbnNpb25zIiwiaXNFeHRlbnNpYmxlIiwic2VhbCIsImlzU2VhbGVkIiwiZnJlZXplIiwiaXNGcm96ZW4iXSkoIkRhdGUiLERhdGUsWyJub3ciXSk7Ck9iamVjdC5leHRlbmQ9dC5vdmVybG9hZFNldHRlcigpO0RhdGUuZXh0ZW5kKCJub3ciLGZ1bmN0aW9uKCl7cmV0dXJuICsobmV3IERhdGUpO30pO25ldyBrKCJCb29sZWFuIixCb29sZWFuKTtOdW1iZXIucHJvdG90eXBlLiRmYW1pbHk9ZnVuY3Rpb24oKXtyZXR1cm4gaXNGaW5pdGUodGhpcyk/Im51bWJlciI6Im51bGwiOwp9LmhpZGUoKTtOdW1iZXIuZXh0ZW5kKCJyYW5kb20iLGZ1bmN0aW9uKHYsaSl7cmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSooaS12KzEpK3YpO30pO3ZhciBsPU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7T2JqZWN0LmV4dGVuZCgiZm9yRWFjaCIsZnVuY3Rpb24oaSx3LHgpe2Zvcih2YXIgdiBpbiBpKXtpZihsLmNhbGwoaSx2KSl7dy5jYWxsKHgsaVt2XSx2LGkpOwp9fX0pO09iamVjdC5lYWNoPU9iamVjdC5mb3JFYWNoO0FycmF5LmltcGxlbWVudCh7Zm9yRWFjaDpmdW5jdGlvbih4LHkpe2Zvcih2YXIgdz0wLHY9dGhpcy5sZW5ndGg7dzx2O3crKyl7aWYodyBpbiB0aGlzKXt4LmNhbGwoeSx0aGlzW3ddLHcsdGhpcyk7fX19LGVhY2g6ZnVuY3Rpb24oaSx2KXtBcnJheS5mb3JFYWNoKHRoaXMsaSx2KTsKcmV0dXJuIHRoaXM7fX0pO3ZhciBzPWZ1bmN0aW9uKGkpe3N3aXRjaChlKGkpKXtjYXNlImFycmF5IjpyZXR1cm4gaS5jbG9uZSgpO2Nhc2Uib2JqZWN0IjpyZXR1cm4gT2JqZWN0LmNsb25lKGkpO2RlZmF1bHQ6cmV0dXJuIGk7fX07QXJyYXkuaW1wbGVtZW50KCJjbG9uZSIsZnVuY3Rpb24oKXt2YXIgdj10aGlzLmxlbmd0aCx3PW5ldyBBcnJheSh2KTsKd2hpbGUodi0tKXt3W3ZdPXModGhpc1t2XSk7fXJldHVybiB3O30pO3ZhciBhPWZ1bmN0aW9uKHYsaSx3KXtzd2l0Y2goZSh3KSl7Y2FzZSJvYmplY3QiOmlmKGUodltpXSk9PSJvYmplY3QiKXtPYmplY3QubWVyZ2UodltpXSx3KTt9ZWxzZXt2W2ldPU9iamVjdC5jbG9uZSh3KTsKfWJyZWFrO2Nhc2UiYXJyYXkiOnZbaV09dy5jbG9uZSgpO2JyZWFrO2RlZmF1bHQ6dltpXT13O31yZXR1cm4gdjt9O09iamVjdC5leHRlbmQoe21lcmdlOmZ1bmN0aW9uKEMseSx4KXtpZihlKHkpPT0ic3RyaW5nIil7cmV0dXJuIGEoQyx5LHgpO31mb3IodmFyIEI9MSx3PWFyZ3VtZW50cy5sZW5ndGg7CkI8dztCKyspe3ZhciB6PWFyZ3VtZW50c1tCXTtmb3IodmFyIEEgaW4geil7YShDLEEseltBXSk7fX1yZXR1cm4gQzt9LGNsb25lOmZ1bmN0aW9uKGkpe3ZhciB3PXt9O2Zvcih2YXIgdiBpbiBpKXt3W3ZdPXMoaVt2XSk7fXJldHVybiB3O30sYXBwZW5kOmZ1bmN0aW9uKHope2Zvcih2YXIgeT0xLHc9YXJndW1lbnRzLmxlbmd0aDsKeTx3O3krKyl7dmFyIHY9YXJndW1lbnRzW3ldfHx7fTtmb3IodmFyIHggaW4gdil7elt4XT12W3hdO319cmV0dXJuIHo7fX0pO1siT2JqZWN0IiwiV2hpdGVTcGFjZSIsIlRleHROb2RlIiwiQ29sbGVjdGlvbiIsIkFyZ3VtZW50cyJdLmVhY2goZnVuY3Rpb24oaSl7bmV3IGsoaSk7Cn0pO3ZhciBqPURhdGUubm93KCk7U3RyaW5nLmV4dGVuZCgidW5pcXVlSUQiLGZ1bmN0aW9uKCl7cmV0dXJuKGorKykudG9TdHJpbmcoMzYpO30pO3ZhciBnPXRoaXMuSGFzaD1uZXcgaygiSGFzaCIsZnVuY3Rpb24oaSl7aWYoZShpKT09Imhhc2giKXtpPU9iamVjdC5jbG9uZShpLmdldENsZWFuKCkpOwp9Zm9yKHZhciB2IGluIGkpe3RoaXNbdl09aVt2XTt9cmV0dXJuIHRoaXM7fSk7Zy5pbXBsZW1lbnQoe2ZvckVhY2g6ZnVuY3Rpb24oaSx2KXtPYmplY3QuZm9yRWFjaCh0aGlzLGksdik7fSxnZXRDbGVhbjpmdW5jdGlvbigpe3ZhciB2PXt9O2Zvcih2YXIgaSBpbiB0aGlzKXtpZih0aGlzLmhhc093blByb3BlcnR5KGkpKXt2W2ldPXRoaXNbaV07Cn19cmV0dXJuIHY7fSxnZXRMZW5ndGg6ZnVuY3Rpb24oKXt2YXIgdj0wO2Zvcih2YXIgaSBpbiB0aGlzKXtpZih0aGlzLmhhc093blByb3BlcnR5KGkpKXt2Kys7fX1yZXR1cm4gdjt9fSk7Zy5hbGlhcygiZWFjaCIsImZvckVhY2giKTtPYmplY3QudHlwZT1rLmlzT2JqZWN0Owp2YXIgbj10aGlzLk5hdGl2ZT1mdW5jdGlvbihpKXtyZXR1cm4gbmV3IGsoaS5uYW1lLGkuaW5pdGlhbGl6ZSk7fTtuLnR5cGU9ay50eXBlO24uaW1wbGVtZW50PWZ1bmN0aW9uKHgsdil7Zm9yKHZhciB3PTA7dzx4Lmxlbmd0aDt3Kyspe3hbd10uaW1wbGVtZW50KHYpOwp9cmV0dXJuIG47fTt2YXIgbT1BcnJheS50eXBlO0FycmF5LnR5cGU9ZnVuY3Rpb24oaSl7cmV0dXJuIHUoaSxBcnJheSl8fG0oaSk7fTt0aGlzLiRBPWZ1bmN0aW9uKGkpe3JldHVybiBBcnJheS5mcm9tKGkpLnNsaWNlKCk7fTt0aGlzLiRhcmd1bWVudHM9ZnVuY3Rpb24odil7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGFyZ3VtZW50c1t2XTsKfTt9O3RoaXMuJGNoaz1mdW5jdGlvbihpKXtyZXR1cm4gISEoaXx8aT09PTApO307dGhpcy4kY2xlYXI9ZnVuY3Rpb24oaSl7Y2xlYXJUaW1lb3V0KGkpO2NsZWFySW50ZXJ2YWwoaSk7cmV0dXJuIG51bGw7fTt0aGlzLiRkZWZpbmVkPWZ1bmN0aW9uKGkpe3JldHVybihpIT1udWxsKTsKfTt0aGlzLiRlYWNoPWZ1bmN0aW9uKHcsdix4KXt2YXIgaT1lKHcpOygoaT09ImFyZ3VtZW50cyJ8fGk9PSJjb2xsZWN0aW9uInx8aT09ImFycmF5Inx8aT09ImVsZW1lbnRzIik/QXJyYXk6T2JqZWN0KS5lYWNoKHcsdix4KTt9O3RoaXMuJGVtcHR5PWZ1bmN0aW9uKCl7fTsKdGhpcy4kZXh0ZW5kPWZ1bmN0aW9uKHYsaSl7cmV0dXJuIE9iamVjdC5hcHBlbmQodixpKTt9O3RoaXMuJEg9ZnVuY3Rpb24oaSl7cmV0dXJuIG5ldyBnKGkpO307dGhpcy4kbWVyZ2U9ZnVuY3Rpb24oKXt2YXIgaT1BcnJheS5zbGljZShhcmd1bWVudHMpO2kudW5zaGlmdCh7fSk7CnJldHVybiBPYmplY3QubWVyZ2UuYXBwbHkobnVsbCxpKTt9O3RoaXMuJGxhbWJkYT1mLmZyb207dGhpcy4kbWl4aW49T2JqZWN0Lm1lcmdlO3RoaXMuJHJhbmRvbT1OdW1iZXIucmFuZG9tO3RoaXMuJHNwbGF0PUFycmF5LmZyb207dGhpcy4kdGltZT1EYXRlLm5vdzsKdGhpcy4kdHlwZT1mdW5jdGlvbihpKXt2YXIgdj1lKGkpO2lmKHY9PSJlbGVtZW50cyIpe3JldHVybiJhcnJheSI7fXJldHVybih2PT0ibnVsbCIpP2ZhbHNlOnY7fTt0aGlzLiR1bmxpbms9ZnVuY3Rpb24oaSl7c3dpdGNoKGUoaSkpe2Nhc2Uib2JqZWN0IjpyZXR1cm4gT2JqZWN0LmNsb25lKGkpOwpjYXNlImFycmF5IjpyZXR1cm4gQXJyYXkuY2xvbmUoaSk7Y2FzZSJoYXNoIjpyZXR1cm4gbmV3IGcoaSk7ZGVmYXVsdDpyZXR1cm4gaTt9fTt9KSgpO0FycmF5LmltcGxlbWVudCh7ZXZlcnk6ZnVuY3Rpb24oYyxkKXtmb3IodmFyIGI9MCxhPXRoaXMubGVuZ3RoO2I8YTsKYisrKXtpZigoYiBpbiB0aGlzKSYmIWMuY2FsbChkLHRoaXNbYl0sYix0aGlzKSl7cmV0dXJuIGZhbHNlO319cmV0dXJuIHRydWU7fSxmaWx0ZXI6ZnVuY3Rpb24oZCxlKXt2YXIgYz1bXTtmb3IodmFyIGI9MCxhPXRoaXMubGVuZ3RoO2I8YTtiKyspe2lmKChiIGluIHRoaXMpJiZkLmNhbGwoZSx0aGlzW2JdLGIsdGhpcykpe2MucHVzaCh0aGlzW2JdKTsKfX1yZXR1cm4gYzt9LGluZGV4T2Y6ZnVuY3Rpb24oYyxkKXt2YXIgYT10aGlzLmxlbmd0aDtmb3IodmFyIGI9KGQ8MCk/TWF0aC5tYXgoMCxhK2QpOmR8fDA7YjxhO2IrKyl7aWYodGhpc1tiXT09PWMpe3JldHVybiBiO319cmV0dXJuIC0xO30sbWFwOmZ1bmN0aW9uKGQsZSl7dmFyIGM9W107CmZvcih2YXIgYj0wLGE9dGhpcy5sZW5ndGg7YjxhO2IrKyl7aWYoYiBpbiB0aGlzKXtjW2JdPWQuY2FsbChlLHRoaXNbYl0sYix0aGlzKTt9fXJldHVybiBjO30sc29tZTpmdW5jdGlvbihjLGQpe2Zvcih2YXIgYj0wLGE9dGhpcy5sZW5ndGg7YjxhO2IrKyl7aWYoKGIgaW4gdGhpcykmJmMuY2FsbChkLHRoaXNbYl0sYix0aGlzKSl7cmV0dXJuIHRydWU7Cn19cmV0dXJuIGZhbHNlO30sY2xlYW46ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5maWx0ZXIoZnVuY3Rpb24oYSl7cmV0dXJuIGEhPW51bGw7fSk7fSxpbnZva2U6ZnVuY3Rpb24oYSl7dmFyIGI9QXJyYXkuc2xpY2UoYXJndW1lbnRzLDEpO3JldHVybiB0aGlzLm1hcChmdW5jdGlvbihjKXtyZXR1cm4gY1thXS5hcHBseShjLGIpOwp9KTt9LGFzc29jaWF0ZTpmdW5jdGlvbihjKXt2YXIgZD17fSxiPU1hdGgubWluKHRoaXMubGVuZ3RoLGMubGVuZ3RoKTtmb3IodmFyIGE9MDthPGI7YSsrKXtkW2NbYV1dPXRoaXNbYV07fXJldHVybiBkO30sbGluazpmdW5jdGlvbihjKXt2YXIgYT17fTtmb3IodmFyIGU9MCxiPXRoaXMubGVuZ3RoOwplPGI7ZSsrKXtmb3IodmFyIGQgaW4gYyl7aWYoY1tkXSh0aGlzW2VdKSl7YVtkXT10aGlzW2VdO2RlbGV0ZSBjW2RdO2JyZWFrO319fXJldHVybiBhO30sY29udGFpbnM6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5pbmRleE9mKGEsYikhPS0xO30sYXBwZW5kOmZ1bmN0aW9uKGEpe3RoaXMucHVzaC5hcHBseSh0aGlzLGEpOwpyZXR1cm4gdGhpczt9LGdldExhc3Q6ZnVuY3Rpb24oKXtyZXR1cm4odGhpcy5sZW5ndGgpP3RoaXNbdGhpcy5sZW5ndGgtMV06bnVsbDt9LGdldFJhbmRvbTpmdW5jdGlvbigpe3JldHVybih0aGlzLmxlbmd0aCk/dGhpc1tOdW1iZXIucmFuZG9tKDAsdGhpcy5sZW5ndGgtMSldOm51bGw7Cn0saW5jbHVkZTpmdW5jdGlvbihhKXtpZighdGhpcy5jb250YWlucyhhKSl7dGhpcy5wdXNoKGEpO31yZXR1cm4gdGhpczt9LGNvbWJpbmU6ZnVuY3Rpb24oYyl7Zm9yKHZhciBiPTAsYT1jLmxlbmd0aDtiPGE7YisrKXt0aGlzLmluY2x1ZGUoY1tiXSk7fXJldHVybiB0aGlzOwp9LGVyYXNlOmZ1bmN0aW9uKGIpe2Zvcih2YXIgYT10aGlzLmxlbmd0aDthLS07KXtpZih0aGlzW2FdPT09Yil7dGhpcy5zcGxpY2UoYSwxKTt9fXJldHVybiB0aGlzO30sZW1wdHk6ZnVuY3Rpb24oKXt0aGlzLmxlbmd0aD0wO3JldHVybiB0aGlzO30sZmxhdHRlbjpmdW5jdGlvbigpe3ZhciBkPVtdOwpmb3IodmFyIGI9MCxhPXRoaXMubGVuZ3RoO2I8YTtiKyspe3ZhciBjPXR5cGVPZih0aGlzW2JdKTtpZihjPT0ibnVsbCIpe2NvbnRpbnVlO31kPWQuY29uY2F0KChjPT0iYXJyYXkifHxjPT0iY29sbGVjdGlvbiJ8fGM9PSJhcmd1bWVudHMifHxpbnN0YW5jZU9mKHRoaXNbYl0sQXJyYXkpKT9BcnJheS5mbGF0dGVuKHRoaXNbYl0pOnRoaXNbYl0pOwp9cmV0dXJuIGQ7fSxwaWNrOmZ1bmN0aW9uKCl7Zm9yKHZhciBiPTAsYT10aGlzLmxlbmd0aDtiPGE7YisrKXtpZih0aGlzW2JdIT1udWxsKXtyZXR1cm4gdGhpc1tiXTt9fXJldHVybiBudWxsO30saGV4VG9SZ2I6ZnVuY3Rpb24oYil7aWYodGhpcy5sZW5ndGghPTMpe3JldHVybiBudWxsOwp9dmFyIGE9dGhpcy5tYXAoZnVuY3Rpb24oYyl7aWYoYy5sZW5ndGg9PTEpe2MrPWM7fXJldHVybiBjLnRvSW50KDE2KTt9KTtyZXR1cm4oYik/YToicmdiKCIrYSsiKSI7fSxyZ2JUb0hleDpmdW5jdGlvbihkKXtpZih0aGlzLmxlbmd0aDwzKXtyZXR1cm4gbnVsbDt9aWYodGhpcy5sZW5ndGg9PTQmJnRoaXNbM109PTAmJiFkKXtyZXR1cm4idHJhbnNwYXJlbnQiOwp9dmFyIGI9W107Zm9yKHZhciBhPTA7YTwzO2ErKyl7dmFyIGM9KHRoaXNbYV0tMCkudG9TdHJpbmcoMTYpO2IucHVzaCgoYy5sZW5ndGg9PTEpPyIwIitjOmMpO31yZXR1cm4oZCk/YjoiIyIrYi5qb2luKCIiKTt9fSk7QXJyYXkuYWxpYXMoImV4dGVuZCIsImFwcGVuZCIpOwp2YXIgJHBpY2s9ZnVuY3Rpb24oKXtyZXR1cm4gQXJyYXkuZnJvbShhcmd1bWVudHMpLnBpY2soKTt9O1N0cmluZy5pbXBsZW1lbnQoe3Rlc3Q6ZnVuY3Rpb24oYSxiKXtyZXR1cm4oKHR5cGVPZihhKT09InJlZ2V4cCIpP2E6bmV3IFJlZ0V4cCgiIithLGIpKS50ZXN0KHRoaXMpOwp9LGNvbnRhaW5zOmZ1bmN0aW9uKGEsYil7cmV0dXJuKGIpPyhiK3RoaXMrYikuaW5kZXhPZihiK2ErYik+LTE6dGhpcy5pbmRleE9mKGEpPi0xO30sdHJpbTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnJlcGxhY2UoL15ccyt8XHMrJC9nLCIiKTt9LGNsZWFuOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmVwbGFjZSgvXHMrL2csIiAiKS50cmltKCk7Cn0sY2FtZWxDYXNlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmVwbGFjZSgvLVxEL2csZnVuY3Rpb24oYSl7cmV0dXJuIGEuY2hhckF0KDEpLnRvVXBwZXJDYXNlKCk7fSk7fSxoeXBoZW5hdGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yZXBsYWNlKC9bQS1aXS9nLGZ1bmN0aW9uKGEpe3JldHVybigiLSIrYS5jaGFyQXQoMCkudG9Mb3dlckNhc2UoKSk7Cn0pO30sY2FwaXRhbGl6ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnJlcGxhY2UoL1xiW2Etel0vZyxmdW5jdGlvbihhKXtyZXR1cm4gYS50b1VwcGVyQ2FzZSgpO30pO30sZXNjYXBlUmVnRXhwOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmVwbGFjZSgvKFstLiorP14ke30oKXxbXF1cL1xcXSkvZywiXFwkMSIpOwp9LHRvSW50OmZ1bmN0aW9uKGEpe3JldHVybiBwYXJzZUludCh0aGlzLGF8fDEwKTt9LHRvRmxvYXQ6ZnVuY3Rpb24oKXtyZXR1cm4gcGFyc2VGbG9hdCh0aGlzKTt9LGhleFRvUmdiOmZ1bmN0aW9uKGIpe3ZhciBhPXRoaXMubWF0Y2goL14jPyhcd3sxLDJ9KShcd3sxLDJ9KShcd3sxLDJ9KSQvKTsKcmV0dXJuKGEpP2Euc2xpY2UoMSkuaGV4VG9SZ2IoYik6bnVsbDt9LHJnYlRvSGV4OmZ1bmN0aW9uKGIpe3ZhciBhPXRoaXMubWF0Y2goL1xkezEsM30vZyk7cmV0dXJuKGEpP2EucmdiVG9IZXgoYik6bnVsbDt9LHN1YnN0aXR1dGU6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5yZXBsYWNlKGJ8fCgvXFw/XHsoW157fV0rKVx9L2cpLGZ1bmN0aW9uKGQsYyl7aWYoZC5jaGFyQXQoMCk9PSJcXCIpe3JldHVybiBkLnNsaWNlKDEpOwp9cmV0dXJuKGFbY10hPW51bGwpP2FbY106IiI7fSk7fX0pO051bWJlci5pbXBsZW1lbnQoe2xpbWl0OmZ1bmN0aW9uKGIsYSl7cmV0dXJuIE1hdGgubWluKGEsTWF0aC5tYXgoYix0aGlzKSk7fSxyb3VuZDpmdW5jdGlvbihhKXthPU1hdGgucG93KDEwLGF8fDApLnRvRml4ZWQoYTwwPy1hOjApOwpyZXR1cm4gTWF0aC5yb3VuZCh0aGlzKmEpL2E7fSx0aW1lczpmdW5jdGlvbihiLGMpe2Zvcih2YXIgYT0wO2E8dGhpczthKyspe2IuY2FsbChjLGEsdGhpcyk7fX0sdG9GbG9hdDpmdW5jdGlvbigpe3JldHVybiBwYXJzZUZsb2F0KHRoaXMpO30sdG9JbnQ6ZnVuY3Rpb24oYSl7cmV0dXJuIHBhcnNlSW50KHRoaXMsYXx8MTApOwp9fSk7TnVtYmVyLmFsaWFzKCJlYWNoIiwidGltZXMiKTsoZnVuY3Rpb24oYil7dmFyIGE9e307Yi5lYWNoKGZ1bmN0aW9uKGMpe2lmKCFOdW1iZXJbY10pe2FbY109ZnVuY3Rpb24oKXtyZXR1cm4gTWF0aFtjXS5hcHBseShudWxsLFt0aGlzXS5jb25jYXQoQXJyYXkuZnJvbShhcmd1bWVudHMpKSk7Cn07fX0pO051bWJlci5pbXBsZW1lbnQoYSk7fSkoWyJhYnMiLCJhY29zIiwiYXNpbiIsImF0YW4iLCJhdGFuMiIsImNlaWwiLCJjb3MiLCJleHAiLCJmbG9vciIsImxvZyIsIm1heCIsIm1pbiIsInBvdyIsInNpbiIsInNxcnQiLCJ0YW4iXSk7RnVuY3Rpb24uZXh0ZW5kKHthdHRlbXB0OmZ1bmN0aW9uKCl7Zm9yKHZhciBiPTAsYT1hcmd1bWVudHMubGVuZ3RoOwpiPGE7YisrKXt0cnl7cmV0dXJuIGFyZ3VtZW50c1tiXSgpO31jYXRjaChjKXt9fXJldHVybiBudWxsO319KTtGdW5jdGlvbi5pbXBsZW1lbnQoe2F0dGVtcHQ6ZnVuY3Rpb24oYSxjKXt0cnl7cmV0dXJuIHRoaXMuYXBwbHkoYyxBcnJheS5mcm9tKGEpKTt9Y2F0Y2goYil7fXJldHVybiBudWxsOwp9LGJpbmQ6ZnVuY3Rpb24oYyl7dmFyIGE9dGhpcyxiPShhcmd1bWVudHMubGVuZ3RoPjEpP0FycmF5LnNsaWNlKGFyZ3VtZW50cywxKTpudWxsO3JldHVybiBmdW5jdGlvbigpe2lmKCFiJiYhYXJndW1lbnRzLmxlbmd0aCl7cmV0dXJuIGEuY2FsbChjKTt9aWYoYiYmYXJndW1lbnRzLmxlbmd0aCl7cmV0dXJuIGEuYXBwbHkoYyxiLmNvbmNhdChBcnJheS5mcm9tKGFyZ3VtZW50cykpKTsKfXJldHVybiBhLmFwcGx5KGMsYnx8YXJndW1lbnRzKTt9O30scGFzczpmdW5jdGlvbihiLGMpe3ZhciBhPXRoaXM7aWYoYiE9bnVsbCl7Yj1BcnJheS5mcm9tKGIpO31yZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gYS5hcHBseShjLGJ8fGFyZ3VtZW50cyk7fTt9LGRlbGF5OmZ1bmN0aW9uKGIsYyxhKXtyZXR1cm4gc2V0VGltZW91dCh0aGlzLnBhc3MoKGE9PW51bGw/W106YSksYyksYik7Cn0scGVyaW9kaWNhbDpmdW5jdGlvbihjLGIsYSl7cmV0dXJuIHNldEludGVydmFsKHRoaXMucGFzcygoYT09bnVsbD9bXTphKSxiKSxjKTt9fSk7ZGVsZXRlIEZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kO0Z1bmN0aW9uLmltcGxlbWVudCh7Y3JlYXRlOmZ1bmN0aW9uKGIpe3ZhciBhPXRoaXM7CmI9Ynx8e307cmV0dXJuIGZ1bmN0aW9uKGQpe3ZhciBjPWIuYXJndW1lbnRzO2M9KGMhPW51bGwpP0FycmF5LmZyb20oYyk6QXJyYXkuc2xpY2UoYXJndW1lbnRzLChiLmV2ZW50KT8xOjApO2lmKGIuZXZlbnQpe2M9W2R8fHdpbmRvdy5ldmVudF0uZXh0ZW5kKGMpO312YXIgZT1mdW5jdGlvbigpe3JldHVybiBhLmFwcGx5KGIuYmluZHx8bnVsbCxjKTsKfTtpZihiLmRlbGF5KXtyZXR1cm4gc2V0VGltZW91dChlLGIuZGVsYXkpO31pZihiLnBlcmlvZGljYWwpe3JldHVybiBzZXRJbnRlcnZhbChlLGIucGVyaW9kaWNhbCk7fWlmKGIuYXR0ZW1wdCl7cmV0dXJuIEZ1bmN0aW9uLmF0dGVtcHQoZSk7fXJldHVybiBlKCk7fTsKfSxiaW5kOmZ1bmN0aW9uKGMsYil7dmFyIGE9dGhpcztpZihiIT1udWxsKXtiPUFycmF5LmZyb20oYik7fXJldHVybiBmdW5jdGlvbigpe3JldHVybiBhLmFwcGx5KGMsYnx8YXJndW1lbnRzKTt9O30sYmluZFdpdGhFdmVudDpmdW5jdGlvbihjLGIpe3ZhciBhPXRoaXM7CmlmKGIhPW51bGwpe2I9QXJyYXkuZnJvbShiKTt9cmV0dXJuIGZ1bmN0aW9uKGQpe3JldHVybiBhLmFwcGx5KGMsKGI9PW51bGwpP2FyZ3VtZW50czpbZF0uY29uY2F0KGIpKTt9O30scnVuOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuYXBwbHkoYixBcnJheS5mcm9tKGEpKTsKfX0pO3ZhciAkdHJ5PUZ1bmN0aW9uLmF0dGVtcHQ7KGZ1bmN0aW9uKCl7dmFyIGE9T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtPYmplY3QuZXh0ZW5kKHtzdWJzZXQ6ZnVuY3Rpb24oZCxnKXt2YXIgZj17fTtmb3IodmFyIGU9MCxiPWcubGVuZ3RoO2U8YjsKZSsrKXt2YXIgYz1nW2VdO2lmKGMgaW4gZCl7ZltjXT1kW2NdO319cmV0dXJuIGY7fSxtYXA6ZnVuY3Rpb24oYixlLGYpe3ZhciBkPXt9O2Zvcih2YXIgYyBpbiBiKXtpZihhLmNhbGwoYixjKSl7ZFtjXT1lLmNhbGwoZixiW2NdLGMsYik7fX1yZXR1cm4gZDt9LGZpbHRlcjpmdW5jdGlvbihiLGUsZyl7dmFyIGQ9e307CmZvcih2YXIgYyBpbiBiKXt2YXIgZj1iW2NdO2lmKGEuY2FsbChiLGMpJiZlLmNhbGwoZyxmLGMsYikpe2RbY109Zjt9fXJldHVybiBkO30sZXZlcnk6ZnVuY3Rpb24oYixkLGUpe2Zvcih2YXIgYyBpbiBiKXtpZihhLmNhbGwoYixjKSYmIWQuY2FsbChlLGJbY10sYykpe3JldHVybiBmYWxzZTsKfX1yZXR1cm4gdHJ1ZTt9LHNvbWU6ZnVuY3Rpb24oYixkLGUpe2Zvcih2YXIgYyBpbiBiKXtpZihhLmNhbGwoYixjKSYmZC5jYWxsKGUsYltjXSxjKSl7cmV0dXJuIHRydWU7fX1yZXR1cm4gZmFsc2U7fSxrZXlzOmZ1bmN0aW9uKGIpe3ZhciBkPVtdO2Zvcih2YXIgYyBpbiBiKXtpZihhLmNhbGwoYixjKSl7ZC5wdXNoKGMpOwp9fXJldHVybiBkO30sdmFsdWVzOmZ1bmN0aW9uKGMpe3ZhciBiPVtdO2Zvcih2YXIgZCBpbiBjKXtpZihhLmNhbGwoYyxkKSl7Yi5wdXNoKGNbZF0pO319cmV0dXJuIGI7fSxnZXRMZW5ndGg6ZnVuY3Rpb24oYil7cmV0dXJuIE9iamVjdC5rZXlzKGIpLmxlbmd0aDt9LGtleU9mOmZ1bmN0aW9uKGIsZCl7Zm9yKHZhciBjIGluIGIpe2lmKGEuY2FsbChiLGMpJiZiW2NdPT09ZCl7cmV0dXJuIGM7Cn19cmV0dXJuIG51bGw7fSxjb250YWluczpmdW5jdGlvbihiLGMpe3JldHVybiBPYmplY3Qua2V5T2YoYixjKSE9bnVsbDt9LHRvUXVlcnlTdHJpbmc6ZnVuY3Rpb24oYixjKXt2YXIgZD1bXTtPYmplY3QuZWFjaChiLGZ1bmN0aW9uKGgsZyl7aWYoYyl7Zz1jKyJbIitnKyJdIjsKfXZhciBmO3N3aXRjaCh0eXBlT2YoaCkpe2Nhc2Uib2JqZWN0IjpmPU9iamVjdC50b1F1ZXJ5U3RyaW5nKGgsZyk7YnJlYWs7Y2FzZSJhcnJheSI6dmFyIGU9e307aC5lYWNoKGZ1bmN0aW9uKGssail7ZVtqXT1rO30pO2Y9T2JqZWN0LnRvUXVlcnlTdHJpbmcoZSxnKTsKYnJlYWs7ZGVmYXVsdDpmPWcrIj0iK2VuY29kZVVSSUNvbXBvbmVudChoKTt9aWYoaCE9bnVsbCl7ZC5wdXNoKGYpO319KTtyZXR1cm4gZC5qb2luKCImIik7fX0pO30pKCk7SGFzaC5pbXBsZW1lbnQoe2hhczpPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LGtleU9mOmZ1bmN0aW9uKGEpe3JldHVybiBPYmplY3Qua2V5T2YodGhpcyxhKTsKfSxoYXNWYWx1ZTpmdW5jdGlvbihhKXtyZXR1cm4gT2JqZWN0LmNvbnRhaW5zKHRoaXMsYSk7fSxleHRlbmQ6ZnVuY3Rpb24oYSl7SGFzaC5lYWNoKGF8fHt9LGZ1bmN0aW9uKGMsYil7SGFzaC5zZXQodGhpcyxiLGMpO30sdGhpcyk7cmV0dXJuIHRoaXM7fSxjb21iaW5lOmZ1bmN0aW9uKGEpe0hhc2guZWFjaChhfHx7fSxmdW5jdGlvbihjLGIpe0hhc2guaW5jbHVkZSh0aGlzLGIsYyk7Cn0sdGhpcyk7cmV0dXJuIHRoaXM7fSxlcmFzZTpmdW5jdGlvbihhKXtpZih0aGlzLmhhc093blByb3BlcnR5KGEpKXtkZWxldGUgdGhpc1thXTt9cmV0dXJuIHRoaXM7fSxnZXQ6ZnVuY3Rpb24oYSl7cmV0dXJuKHRoaXMuaGFzT3duUHJvcGVydHkoYSkpP3RoaXNbYV06bnVsbDsKfSxzZXQ6ZnVuY3Rpb24oYSxiKXtpZighdGhpc1thXXx8dGhpcy5oYXNPd25Qcm9wZXJ0eShhKSl7dGhpc1thXT1iO31yZXR1cm4gdGhpczt9LGVtcHR5OmZ1bmN0aW9uKCl7SGFzaC5lYWNoKHRoaXMsZnVuY3Rpb24oYixhKXtkZWxldGUgdGhpc1thXTt9LHRoaXMpOwpyZXR1cm4gdGhpczt9LGluY2x1ZGU6ZnVuY3Rpb24oYSxiKXtpZih0aGlzW2FdPT1udWxsKXt0aGlzW2FdPWI7fXJldHVybiB0aGlzO30sbWFwOmZ1bmN0aW9uKGEsYil7cmV0dXJuIG5ldyBIYXNoKE9iamVjdC5tYXAodGhpcyxhLGIpKTt9LGZpbHRlcjpmdW5jdGlvbihhLGIpe3JldHVybiBuZXcgSGFzaChPYmplY3QuZmlsdGVyKHRoaXMsYSxiKSk7Cn0sZXZlcnk6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gT2JqZWN0LmV2ZXJ5KHRoaXMsYSxiKTt9LHNvbWU6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gT2JqZWN0LnNvbWUodGhpcyxhLGIpO30sZ2V0S2V5czpmdW5jdGlvbigpe3JldHVybiBPYmplY3Qua2V5cyh0aGlzKTt9LGdldFZhbHVlczpmdW5jdGlvbigpe3JldHVybiBPYmplY3QudmFsdWVzKHRoaXMpOwp9LHRvUXVlcnlTdHJpbmc6ZnVuY3Rpb24oYSl7cmV0dXJuIE9iamVjdC50b1F1ZXJ5U3RyaW5nKHRoaXMsYSk7fX0pO0hhc2guZXh0ZW5kPU9iamVjdC5hcHBlbmQ7SGFzaC5hbGlhcyh7aW5kZXhPZjoia2V5T2YiLGNvbnRhaW5zOiJoYXNWYWx1ZSJ9KTsoZnVuY3Rpb24oKXt2YXIgbD10aGlzLmRvY3VtZW50Owp2YXIgaj1sLndpbmRvdz10aGlzO3ZhciBiPTE7dGhpcy4kdWlkPShqLkFjdGl2ZVhPYmplY3QpP2Z1bmN0aW9uKGUpe3JldHVybihlLnVpZHx8KGUudWlkPVtiKytdKSlbMF07fTpmdW5jdGlvbihlKXtyZXR1cm4gZS51aWR8fChlLnVpZD1iKyspO307JHVpZChqKTskdWlkKGwpOwp2YXIgYT1uYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCksYz1uYXZpZ2F0b3IucGxhdGZvcm0udG9Mb3dlckNhc2UoKSxrPWEubWF0Y2goLyhvcGVyYXxpZXxmaXJlZm94fGNocm9tZXx2ZXJzaW9uKVtcc1wvOl0oW1x3XGRcLl0rKT8uKj8oc2FmYXJpfHZlcnNpb25bXHNcLzpdKFtcd1xkXC5dKyl8JCkvKXx8W251bGwsInVua25vd24iLDBdLGc9a1sxXT09ImllIiYmbC5kb2N1bWVudE1vZGU7CnZhciBwPXRoaXMuQnJvd3Nlcj17ZXh0ZW5kOkZ1bmN0aW9uLnByb3RvdHlwZS5leHRlbmQsbmFtZTooa1sxXT09InZlcnNpb24iKT9rWzNdOmtbMV0sdmVyc2lvbjpnfHxwYXJzZUZsb2F0KChrWzFdPT0ib3BlcmEiJiZrWzRdKT9rWzRdOmtbMl0pLFBsYXRmb3JtOntuYW1lOmEubWF0Y2goL2lwKD86YWR8b2R8aG9uZSkvKT8iaW9zIjooYS5tYXRjaCgvKD86d2Vib3N8YW5kcm9pZCkvKXx8Yy5tYXRjaCgvbWFjfHdpbnxsaW51eC8pfHxbIm90aGVyIl0pWzBdfSxGZWF0dXJlczp7eHBhdGg6ISEobC5ldmFsdWF0ZSksYWlyOiEhKGoucnVudGltZSkscXVlcnk6ISEobC5xdWVyeVNlbGVjdG9yKSxqc29uOiEhKGouSlNPTil9LFBsdWdpbnM6e319OwpwW3AubmFtZV09dHJ1ZTtwW3AubmFtZStwYXJzZUludChwLnZlcnNpb24sMTApXT10cnVlO3AuUGxhdGZvcm1bcC5QbGF0Zm9ybS5uYW1lXT10cnVlO3AuUmVxdWVzdD0oZnVuY3Rpb24oKXt2YXIgcj1mdW5jdGlvbigpe3JldHVybiBuZXcgWE1MSHR0cFJlcXVlc3QoKTsKfTt2YXIgcT1mdW5jdGlvbigpe3JldHVybiBuZXcgQWN0aXZlWE9iamVjdCgiTVNYTUwyLlhNTEhUVFAiKTt9O3ZhciBlPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBBY3RpdmVYT2JqZWN0KCJNaWNyb3NvZnQuWE1MSFRUUCIpO307cmV0dXJuIEZ1bmN0aW9uLmF0dGVtcHQoZnVuY3Rpb24oKXtyKCk7CnJldHVybiByO30sZnVuY3Rpb24oKXtxKCk7cmV0dXJuIHE7fSxmdW5jdGlvbigpe2UoKTtyZXR1cm4gZTt9KTt9KSgpO3AuRmVhdHVyZXMueGhyPSEhKHAuUmVxdWVzdCk7dmFyIGk9KEZ1bmN0aW9uLmF0dGVtcHQoZnVuY3Rpb24oKXtyZXR1cm4gbmF2aWdhdG9yLnBsdWdpbnNbIlNob2Nrd2F2ZSBGbGFzaCJdLmRlc2NyaXB0aW9uOwp9LGZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBBY3RpdmVYT2JqZWN0KCJTaG9ja3dhdmVGbGFzaC5TaG9ja3dhdmVGbGFzaCIpLkdldFZhcmlhYmxlKCIkdmVyc2lvbiIpO30pfHwiMCByMCIpLm1hdGNoKC9cZCsvZyk7cC5QbHVnaW5zLkZsYXNoPXt2ZXJzaW9uOk51bWJlcihpWzBdfHwiMC4iK2lbMV0pfHwwLGJ1aWxkOk51bWJlcihpWzJdKXx8MH07CnAuZXhlYz1mdW5jdGlvbihxKXtpZighcSl7cmV0dXJuIHE7fWlmKGouZXhlY1NjcmlwdCl7ai5leGVjU2NyaXB0KHEpO31lbHNle3ZhciBlPWwuY3JlYXRlRWxlbWVudCgic2NyaXB0Iik7ZS5zZXRBdHRyaWJ1dGUoInR5cGUiLCJ0ZXh0L2phdmFzY3JpcHQiKTtlLnRleHQ9cTsKbC5oZWFkLmFwcGVuZENoaWxkKGUpO2wuaGVhZC5yZW1vdmVDaGlsZChlKTt9cmV0dXJuIHE7fTtTdHJpbmcuaW1wbGVtZW50KCJzdHJpcFNjcmlwdHMiLGZ1bmN0aW9uKHEpe3ZhciBlPSIiO3ZhciByPXRoaXMucmVwbGFjZSgvPHNjcmlwdFtePl0qPihbXHNcU10qPyk8XC9zY3JpcHQ+L2dpLGZ1bmN0aW9uKHMsdCl7ZSs9dCsiXG4iOwpyZXR1cm4iIjt9KTtpZihxPT09dHJ1ZSl7cC5leGVjKGUpO31lbHNle2lmKHR5cGVPZihxKT09ImZ1bmN0aW9uIil7cShlLHIpO319cmV0dXJuIHI7fSk7cC5leHRlbmQoe0RvY3VtZW50OnRoaXMuRG9jdW1lbnQsV2luZG93OnRoaXMuV2luZG93LEVsZW1lbnQ6dGhpcy5FbGVtZW50LEV2ZW50OnRoaXMuRXZlbnR9KTsKdGhpcy5XaW5kb3c9dGhpcy4kY29uc3RydWN0b3I9bmV3IFR5cGUoIldpbmRvdyIsZnVuY3Rpb24oKXt9KTt0aGlzLiRmYW1pbHk9RnVuY3Rpb24uZnJvbSgid2luZG93IikuaGlkZSgpO1dpbmRvdy5taXJyb3IoZnVuY3Rpb24oZSxxKXtqW2VdPXE7fSk7dGhpcy5Eb2N1bWVudD1sLiRjb25zdHJ1Y3Rvcj1uZXcgVHlwZSgiRG9jdW1lbnQiLGZ1bmN0aW9uKCl7fSk7CmwuJGZhbWlseT1GdW5jdGlvbi5mcm9tKCJkb2N1bWVudCIpLmhpZGUoKTtEb2N1bWVudC5taXJyb3IoZnVuY3Rpb24oZSxxKXtsW2VdPXE7fSk7bC5odG1sPWwuZG9jdW1lbnRFbGVtZW50O2lmKCFsLmhlYWQpe2wuaGVhZD1sLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJoZWFkIilbMF07Cn1pZihsLmV4ZWNDb21tYW5kKXt0cnl7bC5leGVjQ29tbWFuZCgiQmFja2dyb3VuZEltYWdlQ2FjaGUiLGZhbHNlLHRydWUpO31jYXRjaChoKXt9fWlmKHRoaXMuYXR0YWNoRXZlbnQmJiF0aGlzLmFkZEV2ZW50TGlzdGVuZXIpe3ZhciBkPWZ1bmN0aW9uKCl7dGhpcy5kZXRhY2hFdmVudCgib251bmxvYWQiLGQpOwpsLmhlYWQ9bC5odG1sPWwud2luZG93PW51bGw7fTt0aGlzLmF0dGFjaEV2ZW50KCJvbnVubG9hZCIsZCk7fXZhciBuPUFycmF5LmZyb207dHJ5e24obC5odG1sLmNoaWxkTm9kZXMpO31jYXRjaChoKXtBcnJheS5mcm9tPWZ1bmN0aW9uKHEpe2lmKHR5cGVvZiBxIT0ic3RyaW5nIiYmVHlwZS5pc0VudW1lcmFibGUocSkmJnR5cGVPZihxKSE9ImFycmF5Iil7dmFyIGU9cS5sZW5ndGgscj1uZXcgQXJyYXkoZSk7CndoaWxlKGUtLSl7cltlXT1xW2VdO31yZXR1cm4gcjt9cmV0dXJuIG4ocSk7fTt2YXIgbT1BcnJheS5wcm90b3R5cGUsbz1tLnNsaWNlO1sicG9wIiwicHVzaCIsInJldmVyc2UiLCJzaGlmdCIsInNvcnQiLCJzcGxpY2UiLCJ1bnNoaWZ0IiwiY29uY2F0Iiwiam9pbiIsInNsaWNlIl0uZWFjaChmdW5jdGlvbihlKXt2YXIgcT1tW2VdOwpBcnJheVtlXT1mdW5jdGlvbihyKXtyZXR1cm4gcS5hcHBseShBcnJheS5mcm9tKHIpLG8uY2FsbChhcmd1bWVudHMsMSkpO307fSk7fWlmKHAuUGxhdGZvcm0uaW9zKXtwLlBsYXRmb3JtLmlwb2Q9dHJ1ZTt9cC5FbmdpbmU9e307dmFyIGY9ZnVuY3Rpb24ocSxlKXtwLkVuZ2luZS5uYW1lPXE7CnAuRW5naW5lW3ErZV09dHJ1ZTtwLkVuZ2luZS52ZXJzaW9uPWU7fTtpZihwLmllKXtwLkVuZ2luZS50cmlkZW50PXRydWU7c3dpdGNoKHAudmVyc2lvbil7Y2FzZSA2OmYoInRyaWRlbnQiLDQpO2JyZWFrO2Nhc2UgNzpmKCJ0cmlkZW50Iiw1KTticmVhaztjYXNlIDg6ZigidHJpZGVudCIsNik7Cn19aWYocC5maXJlZm94KXtwLkVuZ2luZS5nZWNrbz10cnVlO2lmKHAudmVyc2lvbj49Myl7ZigiZ2Vja28iLDE5KTt9ZWxzZXtmKCJnZWNrbyIsMTgpO319aWYocC5zYWZhcml8fHAuY2hyb21lKXtwLkVuZ2luZS53ZWJraXQ9dHJ1ZTtzd2l0Y2gocC52ZXJzaW9uKXtjYXNlIDI6Zigid2Via2l0Iiw0MTkpOwpicmVhaztjYXNlIDM6Zigid2Via2l0Iiw0MjApO2JyZWFrO2Nhc2UgNDpmKCJ3ZWJraXQiLDUyNSk7fX1pZihwLm9wZXJhKXtwLkVuZ2luZS5wcmVzdG89dHJ1ZTtpZihwLnZlcnNpb24+PTkuNil7ZigicHJlc3RvIiw5NjApO31lbHNle2lmKHAudmVyc2lvbj49OS41KXtmKCJwcmVzdG8iLDk1MCk7Cn1lbHNle2YoInByZXN0byIsOTI1KTt9fX1pZihwLm5hbWU9PSJ1bmtub3duIil7c3dpdGNoKChhLm1hdGNoKC8oPzp3ZWJraXR8a2h0bWx8Z2Vja28pLyl8fFtdKVswXSl7Y2FzZSJ3ZWJraXQiOmNhc2Uia2h0bWwiOnAuRW5naW5lLndlYmtpdD10cnVlO2JyZWFrO2Nhc2UiZ2Vja28iOnAuRW5naW5lLmdlY2tvPXRydWU7Cn19dGhpcy4kZXhlYz1wLmV4ZWM7fSkoKTt2YXIgRXZlbnQ9bmV3IFR5cGUoIkV2ZW50IixmdW5jdGlvbihhLGkpe2lmKCFpKXtpPXdpbmRvdzt9dmFyIG89aS5kb2N1bWVudDthPWF8fGkuZXZlbnQ7aWYoYS4kZXh0ZW5kZWQpe3JldHVybiBhO310aGlzLiRleHRlbmRlZD10cnVlOwp2YXIgbj1hLnR5cGUsaz1hLnRhcmdldHx8YS5zcmNFbGVtZW50LG09e30sYz17fSxxPW51bGwsaCxsLGIscDt3aGlsZShrJiZrLm5vZGVUeXBlPT0zKXtrPWsucGFyZW50Tm9kZTt9aWYobi5pbmRleE9mKCJrZXkiKSE9LTEpe2I9YS53aGljaHx8YS5rZXlDb2RlO3A9T2JqZWN0LmtleU9mKEV2ZW50LktleXMsYik7CmlmKG49PSJrZXlkb3duIil7dmFyIGQ9Yi0xMTE7aWYoZD4wJiZkPDEzKXtwPSJmIitkO319aWYoIXApe3A9U3RyaW5nLmZyb21DaGFyQ29kZShiKS50b0xvd2VyQ2FzZSgpO319ZWxzZXtpZigoL2NsaWNrfG1vdXNlfG1lbnUvaSkudGVzdChuKSl7bz0oIW8uY29tcGF0TW9kZXx8by5jb21wYXRNb2RlPT0iQ1NTMUNvbXBhdCIpP28uaHRtbDpvLmJvZHk7Cm09e3g6KGEucGFnZVghPW51bGwpP2EucGFnZVg6YS5jbGllbnRYK28uc2Nyb2xsTGVmdCx5OihhLnBhZ2VZIT1udWxsKT9hLnBhZ2VZOmEuY2xpZW50WStvLnNjcm9sbFRvcH07Yz17eDooYS5wYWdlWCE9bnVsbCk/YS5wYWdlWC1pLnBhZ2VYT2Zmc2V0OmEuY2xpZW50WCx5OihhLnBhZ2VZIT1udWxsKT9hLnBhZ2VZLWkucGFnZVlPZmZzZXQ6YS5jbGllbnRZfTsKaWYoKC9ET01Nb3VzZVNjcm9sbHxtb3VzZXdoZWVsLykudGVzdChuKSl7bD0oYS53aGVlbERlbHRhKT9hLndoZWVsRGVsdGEvMTIwOi0oYS5kZXRhaWx8fDApLzM7fWg9KGEud2hpY2g9PTMpfHwoYS5idXR0b249PTIpO2lmKCgvb3ZlcnxvdXQvKS50ZXN0KG4pKXtxPWEucmVsYXRlZFRhcmdldHx8YVsobj09Im1vdXNlb3ZlciI/ImZyb20iOiJ0byIpKyJFbGVtZW50Il07CnZhciBqPWZ1bmN0aW9uKCl7d2hpbGUocSYmcS5ub2RlVHlwZT09Myl7cT1xLnBhcmVudE5vZGU7fXJldHVybiB0cnVlO307dmFyIGc9KEJyb3dzZXIuZmlyZWZveDIpP2ouYXR0ZW1wdCgpOmooKTtxPShnKT9xOm51bGw7fX1lbHNle2lmKCgvZ2VzdHVyZXx0b3VjaC9pKS50ZXN0KG4pKXt0aGlzLnJvdGF0aW9uPWEucm90YXRpb247CnRoaXMuc2NhbGU9YS5zY2FsZTt0aGlzLnRhcmdldFRvdWNoZXM9YS50YXJnZXRUb3VjaGVzO3RoaXMuY2hhbmdlZFRvdWNoZXM9YS5jaGFuZ2VkVG91Y2hlczt2YXIgZj10aGlzLnRvdWNoZXM9YS50b3VjaGVzO2lmKGYmJmZbMF0pe3ZhciBlPWZbMF07bT17eDplLnBhZ2VYLHk6ZS5wYWdlWX07CmM9e3g6ZS5jbGllbnRYLHk6ZS5jbGllbnRZfTt9fX19cmV0dXJuIE9iamVjdC5hcHBlbmQodGhpcyx7ZXZlbnQ6YSx0eXBlOm4scGFnZTptLGNsaWVudDpjLHJpZ2h0Q2xpY2s6aCx3aGVlbDpsLHJlbGF0ZWRUYXJnZXQ6ZG9jdW1lbnQuaWQocSksdGFyZ2V0OmRvY3VtZW50LmlkKGspLGNvZGU6YixrZXk6cCxzaGlmdDphLnNoaWZ0S2V5LGNvbnRyb2w6YS5jdHJsS2V5LGFsdDphLmFsdEtleSxtZXRhOmEubWV0YUtleX0pOwp9KTtFdmVudC5LZXlzPXtlbnRlcjoxMyx1cDozOCxkb3duOjQwLGxlZnQ6MzcscmlnaHQ6MzksZXNjOjI3LHNwYWNlOjMyLGJhY2tzcGFjZTo4LHRhYjo5LCJkZWxldGUiOjQ2fTtFdmVudC5LZXlzPW5ldyBIYXNoKEV2ZW50LktleXMpO0V2ZW50LmltcGxlbWVudCh7c3RvcDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnN0b3BQcm9wYWdhdGlvbigpLnByZXZlbnREZWZhdWx0KCk7Cn0sc3RvcFByb3BhZ2F0aW9uOmZ1bmN0aW9uKCl7aWYodGhpcy5ldmVudC5zdG9wUHJvcGFnYXRpb24pe3RoaXMuZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7fWVsc2V7dGhpcy5ldmVudC5jYW5jZWxCdWJibGU9dHJ1ZTt9cmV0dXJuIHRoaXM7fSxwcmV2ZW50RGVmYXVsdDpmdW5jdGlvbigpe2lmKHRoaXMuZXZlbnQucHJldmVudERlZmF1bHQpe3RoaXMuZXZlbnQucHJldmVudERlZmF1bHQoKTsKfWVsc2V7dGhpcy5ldmVudC5yZXR1cm5WYWx1ZT1mYWxzZTt9cmV0dXJuIHRoaXM7fX0pOyhmdW5jdGlvbigpe3ZhciBhPXRoaXMuQ2xhc3M9bmV3IFR5cGUoIkNsYXNzIixmdW5jdGlvbihoKXtpZihpbnN0YW5jZU9mKGgsRnVuY3Rpb24pKXtoPXtpbml0aWFsaXplOmh9Owp9dmFyIGc9ZnVuY3Rpb24oKXtlKHRoaXMpO2lmKGcuJHByb3RvdHlwaW5nKXtyZXR1cm4gdGhpczt9dGhpcy4kY2FsbGVyPW51bGw7dmFyIGk9KHRoaXMuaW5pdGlhbGl6ZSk/dGhpcy5pbml0aWFsaXplLmFwcGx5KHRoaXMsYXJndW1lbnRzKTp0aGlzO3RoaXMuJGNhbGxlcj10aGlzLmNhbGxlcj1udWxsOwpyZXR1cm4gaTt9LmV4dGVuZCh0aGlzKS5pbXBsZW1lbnQoaCk7Zy4kY29uc3RydWN0b3I9YTtnLnByb3RvdHlwZS4kY29uc3RydWN0b3I9ZztnLnByb3RvdHlwZS5wYXJlbnQ9YztyZXR1cm4gZzt9KTt2YXIgYz1mdW5jdGlvbigpe2lmKCF0aGlzLiRjYWxsZXIpe3Rocm93IG5ldyBFcnJvcignVGhlIG1ldGhvZCAicGFyZW50IiBjYW5ub3QgYmUgY2FsbGVkLicpOwp9dmFyIGc9dGhpcy4kY2FsbGVyLiRuYW1lLGg9dGhpcy4kY2FsbGVyLiRvd25lci5wYXJlbnQsaT0oaCk/aC5wcm90b3R5cGVbZ106bnVsbDtpZighaSl7dGhyb3cgbmV3IEVycm9yKCdUaGUgbWV0aG9kICInK2crJyIgaGFzIG5vIHBhcmVudC4nKTt9cmV0dXJuIGkuYXBwbHkodGhpcyxhcmd1bWVudHMpOwp9O3ZhciBlPWZ1bmN0aW9uKGcpe2Zvcih2YXIgaCBpbiBnKXt2YXIgaj1nW2hdO3N3aXRjaCh0eXBlT2Yoaikpe2Nhc2Uib2JqZWN0Ijp2YXIgaT1mdW5jdGlvbigpe307aS5wcm90b3R5cGU9ajtnW2hdPWUobmV3IGkpO2JyZWFrO2Nhc2UiYXJyYXkiOmdbaF09ai5jbG9uZSgpOwpicmVhazt9fXJldHVybiBnO307dmFyIGI9ZnVuY3Rpb24oZyxoLGope2lmKGouJG9yaWdpbil7aj1qLiRvcmlnaW47fXZhciBpPWZ1bmN0aW9uKCl7aWYoai4kcHJvdGVjdGVkJiZ0aGlzLiRjYWxsZXI9PW51bGwpe3Rocm93IG5ldyBFcnJvcignVGhlIG1ldGhvZCAiJytoKyciIGNhbm5vdCBiZSBjYWxsZWQuJyk7Cn12YXIgbD10aGlzLmNhbGxlcixtPXRoaXMuJGNhbGxlcjt0aGlzLmNhbGxlcj1tO3RoaXMuJGNhbGxlcj1pO3ZhciBrPWouYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMuJGNhbGxlcj1tO3RoaXMuY2FsbGVyPWw7cmV0dXJuIGs7fS5leHRlbmQoeyRvd25lcjpnLCRvcmlnaW46aiwkbmFtZTpofSk7CnJldHVybiBpO307dmFyIGY9ZnVuY3Rpb24oaCxpLGcpe2lmKGEuTXV0YXRvcnMuaGFzT3duUHJvcGVydHkoaCkpe2k9YS5NdXRhdG9yc1toXS5jYWxsKHRoaXMsaSk7aWYoaT09bnVsbCl7cmV0dXJuIHRoaXM7fX1pZih0eXBlT2YoaSk9PSJmdW5jdGlvbiIpe2lmKGkuJGhpZGRlbil7cmV0dXJuIHRoaXM7Cn10aGlzLnByb3RvdHlwZVtoXT0oZyk/aTpiKHRoaXMsaCxpKTt9ZWxzZXtPYmplY3QubWVyZ2UodGhpcy5wcm90b3R5cGUsaCxpKTt9cmV0dXJuIHRoaXM7fTt2YXIgZD1mdW5jdGlvbihnKXtnLiRwcm90b3R5cGluZz10cnVlO3ZhciBoPW5ldyBnO2RlbGV0ZSBnLiRwcm90b3R5cGluZzsKcmV0dXJuIGg7fTthLmltcGxlbWVudCgiaW1wbGVtZW50IixmLm92ZXJsb2FkU2V0dGVyKCkpO2EuTXV0YXRvcnM9e0V4dGVuZHM6ZnVuY3Rpb24oZyl7dGhpcy5wYXJlbnQ9Zzt0aGlzLnByb3RvdHlwZT1kKGcpO30sSW1wbGVtZW50czpmdW5jdGlvbihnKXtBcnJheS5mcm9tKGcpLmVhY2goZnVuY3Rpb24oail7dmFyIGg9bmV3IGo7CmZvcih2YXIgaSBpbiBoKXtmLmNhbGwodGhpcyxpLGhbaV0sdHJ1ZSk7fX0sdGhpcyk7fX07fSkoKTsoZnVuY3Rpb24oKXt0aGlzLkNoYWluPW5ldyBDbGFzcyh7JGNoYWluOltdLGNoYWluOmZ1bmN0aW9uKCl7dGhpcy4kY2hhaW4uYXBwZW5kKEFycmF5LmZsYXR0ZW4oYXJndW1lbnRzKSk7CnJldHVybiB0aGlzO30sY2FsbENoYWluOmZ1bmN0aW9uKCl7cmV0dXJuKHRoaXMuJGNoYWluLmxlbmd0aCk/dGhpcy4kY2hhaW4uc2hpZnQoKS5hcHBseSh0aGlzLGFyZ3VtZW50cyk6ZmFsc2U7fSxjbGVhckNoYWluOmZ1bmN0aW9uKCl7dGhpcy4kY2hhaW4uZW1wdHkoKTsKcmV0dXJuIHRoaXM7fX0pO3ZhciBhPWZ1bmN0aW9uKGIpe3JldHVybiBiLnJlcGxhY2UoL15vbihbQS1aXSkvLGZ1bmN0aW9uKGMsZCl7cmV0dXJuIGQudG9Mb3dlckNhc2UoKTt9KTt9O3RoaXMuRXZlbnRzPW5ldyBDbGFzcyh7JGV2ZW50czp7fSxhZGRFdmVudDpmdW5jdGlvbihkLGMsYil7ZD1hKGQpOwppZihjPT0kZW1wdHkpe3JldHVybiB0aGlzO310aGlzLiRldmVudHNbZF09KHRoaXMuJGV2ZW50c1tkXXx8W10pLmluY2x1ZGUoYyk7aWYoYil7Yy5pbnRlcm5hbD10cnVlO31yZXR1cm4gdGhpczt9LGFkZEV2ZW50czpmdW5jdGlvbihiKXtmb3IodmFyIGMgaW4gYil7dGhpcy5hZGRFdmVudChjLGJbY10pOwp9cmV0dXJuIHRoaXM7fSxmaXJlRXZlbnQ6ZnVuY3Rpb24oZSxjLGIpe2U9YShlKTt2YXIgZD10aGlzLiRldmVudHNbZV07aWYoIWQpe3JldHVybiB0aGlzO31jPUFycmF5LmZyb20oYyk7ZC5lYWNoKGZ1bmN0aW9uKGYpe2lmKGIpe2YuZGVsYXkoYix0aGlzLGMpO31lbHNle2YuYXBwbHkodGhpcyxjKTsKfX0sdGhpcyk7cmV0dXJuIHRoaXM7fSxyZW1vdmVFdmVudDpmdW5jdGlvbihlLGQpe2U9YShlKTt2YXIgYz10aGlzLiRldmVudHNbZV07aWYoYyYmIWQuaW50ZXJuYWwpe3ZhciBiPWMuaW5kZXhPZihkKTtpZihiIT0tMSl7ZGVsZXRlIGNbYl07fX1yZXR1cm4gdGhpczsKfSxyZW1vdmVFdmVudHM6ZnVuY3Rpb24oZCl7dmFyIGU7aWYodHlwZU9mKGQpPT0ib2JqZWN0Iil7Zm9yKGUgaW4gZCl7dGhpcy5yZW1vdmVFdmVudChlLGRbZV0pO31yZXR1cm4gdGhpczt9aWYoZCl7ZD1hKGQpO31mb3IoZSBpbiB0aGlzLiRldmVudHMpe2lmKGQmJmQhPWUpe2NvbnRpbnVlOwp9dmFyIGM9dGhpcy4kZXZlbnRzW2VdO2Zvcih2YXIgYj1jLmxlbmd0aDtiLS07KXtpZihiIGluIGMpe3RoaXMucmVtb3ZlRXZlbnQoZSxjW2JdKTt9fX1yZXR1cm4gdGhpczt9fSk7dGhpcy5PcHRpb25zPW5ldyBDbGFzcyh7c2V0T3B0aW9uczpmdW5jdGlvbigpe3ZhciBiPXRoaXMub3B0aW9ucz1PYmplY3QubWVyZ2UuYXBwbHkobnVsbCxbe30sdGhpcy5vcHRpb25zXS5hcHBlbmQoYXJndW1lbnRzKSk7CmlmKHRoaXMuYWRkRXZlbnQpe2Zvcih2YXIgYyBpbiBiKXtpZih0eXBlT2YoYltjXSkhPSJmdW5jdGlvbiJ8fCEoL15vbltBLVpdLykudGVzdChjKSl7Y29udGludWU7fXRoaXMuYWRkRXZlbnQoYyxiW2NdKTtkZWxldGUgYltjXTt9fXJldHVybiB0aGlzO319KTt9KSgpOwooZnVuY3Rpb24oKXt2YXIgayxuLGwsZyxhPXt9LGM9e30sbT0vXFwvZzt2YXIgZT1mdW5jdGlvbihxLHApe2lmKHE9PW51bGwpe3JldHVybiBudWxsO31pZihxLlNsaWNrPT09dHJ1ZSl7cmV0dXJuIHE7fXE9KCIiK3EpLnJlcGxhY2UoL15ccyt8XHMrJC9nLCIiKTtnPSEhcDsKdmFyIG89KGcpP2M6YTtpZihvW3FdKXtyZXR1cm4gb1txXTt9az17U2xpY2s6dHJ1ZSxleHByZXNzaW9uczpbXSxyYXc6cSxyZXZlcnNlOmZ1bmN0aW9uKCl7cmV0dXJuIGUodGhpcy5yYXcsdHJ1ZSk7fX07bj0tMTt3aGlsZShxIT0ocT1xLnJlcGxhY2UoaixiKSkpe31rLmxlbmd0aD1rLmV4cHJlc3Npb25zLmxlbmd0aDsKcmV0dXJuIG9bay5yYXddPShnKT9oKGspOms7fTt2YXIgaT1mdW5jdGlvbihvKXtpZihvPT09IiEiKXtyZXR1cm4iICI7fWVsc2V7aWYobz09PSIgIil7cmV0dXJuIiEiO31lbHNle2lmKCgvXiEvKS50ZXN0KG8pKXtyZXR1cm4gby5yZXBsYWNlKC9eIS8sIiIpO31lbHNle3JldHVybiIhIitvOwp9fX19O3ZhciBoPWZ1bmN0aW9uKHUpe3ZhciByPXUuZXhwcmVzc2lvbnM7Zm9yKHZhciBwPTA7cDxyLmxlbmd0aDtwKyspe3ZhciB0PXJbcF07dmFyIHE9e3BhcnRzOltdLHRhZzoiKiIsY29tYmluYXRvcjppKHRbMF0uY29tYmluYXRvcil9O2Zvcih2YXIgbz0wO288dC5sZW5ndGg7Cm8rKyl7dmFyIHM9dFtvXTtpZighcy5yZXZlcnNlQ29tYmluYXRvcil7cy5yZXZlcnNlQ29tYmluYXRvcj0iICI7fXMuY29tYmluYXRvcj1zLnJldmVyc2VDb21iaW5hdG9yO2RlbGV0ZSBzLnJldmVyc2VDb21iaW5hdG9yO310LnJldmVyc2UoKS5wdXNoKHEpO31yZXR1cm4gdTsKfTt2YXIgZj1mdW5jdGlvbihvKXtyZXR1cm4gby5yZXBsYWNlKC9bLVtcXXt9KCkqKz8uXFxeJHwsI1xzXS9nLGZ1bmN0aW9uKHApe3JldHVybiJcXCIrcDt9KTt9O3ZhciBqPW5ldyBSZWdFeHAoIl4oPzpcXHMqKCwpXFxzKnxcXHMqKDxjb21iaW5hdG9yPispXFxzKnwoXFxzKyl8KDx1bmljb2RlPit8XFwqKXxcXCMoPHVuaWNvZGU+Kyl8XFwuKDx1bmljb2RlPispfFxcW1xccyooPHVuaWNvZGUxPispKD86XFxzKihbKl4kIX58XT89KSg/OlxccyooPzooW1wiJ10/KSguKj8pXFw5KSkpP1xccypcXF0oPyFcXF0pfCg6KykoPHVuaWNvZGU+KykoPzpcXCgoPzooPzooW1wiJ10pKFteXFwxM10qKVxcMTMpfCgoPzpcXChbXildK1xcKXxbXigpXSopKykpXFwpKT8pIi5yZXBsYWNlKC88Y29tYmluYXRvcj4vLCJbIitmKCI+K35gIUAkJV4mPXt9XFw7PC8iKSsiXSIpLnJlcGxhY2UoLzx1bmljb2RlPi9nLCIoPzpbXFx3XFx1MDBhMS1cXHVGRkZGLV18XFxcXFteXFxzMC05YS1mXSkiKS5yZXBsYWNlKC88dW5pY29kZTE+L2csIig/Ols6XFx3XFx1MDBhMS1cXHVGRkZGLV18XFxcXFteXFxzMC05YS1mXSkiKSk7CmZ1bmN0aW9uIGIoeCxzLEQseixyLEMscSxCLEEseSx1LEYsRyx2LHAsdyl7aWYoc3x8bj09PS0xKXtrLmV4cHJlc3Npb25zWysrbl09W107bD0tMTtpZihzKXtyZXR1cm4iIjt9fWlmKER8fHp8fGw9PT0tMSl7RD1EfHwiICI7dmFyIHQ9ay5leHByZXNzaW9uc1tuXTsKaWYoZyYmdFtsXSl7dFtsXS5yZXZlcnNlQ29tYmluYXRvcj1pKEQpO310WysrbF09e2NvbWJpbmF0b3I6RCx0YWc6IioifTt9dmFyIG89ay5leHByZXNzaW9uc1tuXVtsXTtpZihyKXtvLnRhZz1yLnJlcGxhY2UobSwiIik7fWVsc2V7aWYoQyl7by5pZD1DLnJlcGxhY2UobSwiIik7Cn1lbHNle2lmKHEpe3E9cS5yZXBsYWNlKG0sIiIpO2lmKCFvLmNsYXNzTGlzdCl7by5jbGFzc0xpc3Q9W107fWlmKCFvLmNsYXNzZXMpe28uY2xhc3Nlcz1bXTt9by5jbGFzc0xpc3QucHVzaChxKTtvLmNsYXNzZXMucHVzaCh7dmFsdWU6cSxyZWdleHA6bmV3IFJlZ0V4cCgiKF58XFxzKSIrZihxKSsiKFxcc3wkKSIpfSk7Cn1lbHNle2lmKEcpe3c9d3x8cDt3PXc/dy5yZXBsYWNlKG0sIiIpOm51bGw7aWYoIW8ucHNldWRvcyl7by5wc2V1ZG9zPVtdO31vLnBzZXVkb3MucHVzaCh7a2V5OkcucmVwbGFjZShtLCIiKSx2YWx1ZTp3LHR5cGU6Ri5sZW5ndGg9PTE/ImNsYXNzIjoiZWxlbWVudCJ9KTsKfWVsc2V7aWYoQil7Qj1CLnJlcGxhY2UobSwiIik7dT0odXx8IiIpLnJlcGxhY2UobSwiIik7dmFyIEUsSDtzd2l0Y2goQSl7Y2FzZSJePSI6SD1uZXcgUmVnRXhwKCJeIitmKHUpKTticmVhaztjYXNlIiQ9IjpIPW5ldyBSZWdFeHAoZih1KSsiJCIpO2JyZWFrO2Nhc2Uifj0iOkg9bmV3IFJlZ0V4cCgiKF58XFxzKSIrZih1KSsiKFxcc3wkKSIpOwpicmVhaztjYXNlInw9IjpIPW5ldyBSZWdFeHAoIl4iK2YodSkrIigtfCQpIik7YnJlYWs7Y2FzZSI9IjpFPWZ1bmN0aW9uKEkpe3JldHVybiB1PT1JO307YnJlYWs7Y2FzZSIqPSI6RT1mdW5jdGlvbihJKXtyZXR1cm4gSSYmSS5pbmRleE9mKHUpPi0xO307YnJlYWs7CmNhc2UiIT0iOkU9ZnVuY3Rpb24oSSl7cmV0dXJuIHUhPUk7fTticmVhaztkZWZhdWx0OkU9ZnVuY3Rpb24oSSl7cmV0dXJuICEhSTt9O31pZih1PT0iIiYmKC9eWyokXl09JC8pLnRlc3QoQSkpe0U9ZnVuY3Rpb24oKXtyZXR1cm4gZmFsc2U7fTt9aWYoIUUpe0U9ZnVuY3Rpb24oSSl7cmV0dXJuIEkmJkgudGVzdChJKTsKfTt9aWYoIW8uYXR0cmlidXRlcyl7by5hdHRyaWJ1dGVzPVtdO31vLmF0dHJpYnV0ZXMucHVzaCh7a2V5OkIsb3BlcmF0b3I6QSx2YWx1ZTp1LHRlc3Q6RX0pO319fX19cmV0dXJuIiI7fXZhciBkPSh0aGlzLlNsaWNrfHx7fSk7ZC5wYXJzZT1mdW5jdGlvbihvKXtyZXR1cm4gZShvKTsKfTtkLmVzY2FwZVJlZ0V4cD1mO2lmKCF0aGlzLlNsaWNrKXt0aGlzLlNsaWNrPWQ7fX0pLmFwcGx5KCh0eXBlb2YgZXhwb3J0cyE9InVuZGVmaW5lZCIpP2V4cG9ydHM6dGhpcyk7KGZ1bmN0aW9uKCl7dmFyIGo9e30sbD17fSxiPU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7CmouaXNOYXRpdmVDb2RlPWZ1bmN0aW9uKGMpe3JldHVybigvXHtccypcW25hdGl2ZSBjb2RlXF1ccypcfS8pLnRlc3QoIiIrYyk7fTtqLmlzWE1MPWZ1bmN0aW9uKGMpe3JldHVybighIWMueG1sVmVyc2lvbil8fCghIWMueG1sKXx8KGIuY2FsbChjKT09IltvYmplY3QgWE1MRG9jdW1lbnRdIil8fChjLm5vZGVUeXBlPT05JiZjLmRvY3VtZW50RWxlbWVudC5ub2RlTmFtZSE9IkhUTUwiKTsKfTtqLnNldERvY3VtZW50PWZ1bmN0aW9uKHcpe3ZhciB0PXcubm9kZVR5cGU7aWYodD09OSl7fWVsc2V7aWYodCl7dz13Lm93bmVyRG9jdW1lbnQ7fWVsc2V7aWYody5uYXZpZ2F0b3Ipe3c9dy5kb2N1bWVudDt9ZWxzZXtyZXR1cm47fX19aWYodGhpcy5kb2N1bWVudD09PXcpe3JldHVybjsKfXRoaXMuZG9jdW1lbnQ9dzt2YXIgeT13LmRvY3VtZW50RWxlbWVudCx1PXRoaXMuZ2V0VUlEWE1MKHkpLG89bFt1XSxBO2lmKG8pe2ZvcihBIGluIG8pe3RoaXNbQV09b1tBXTt9cmV0dXJuO31vPWxbdV09e307by5yb290PXk7by5pc1hNTERvY3VtZW50PXRoaXMuaXNYTUwodyk7Cm8uYnJva2VuU3RhckdFQlROPW8uc3RhclNlbGVjdHNDbG9zZWRRU0E9by5pZEdldHNOYW1lPW8uYnJva2VuTWl4ZWRDYXNlUVNBPW8uYnJva2VuR0VCQ049by5icm9rZW5DaGVja2VkUVNBPW8uYnJva2VuRW1wdHlBdHRyaWJ1dGVRU0E9by5pc0hUTUxEb2N1bWVudD1vLm5hdGl2ZU1hdGNoZXNTZWxlY3Rvcj1mYWxzZTsKdmFyIG0sbix4LHEscjt2YXIgcyxjPSJzbGlja191bmlxdWVpZCI7dmFyIHo9dy5jcmVhdGVFbGVtZW50KCJkaXYiKTt2YXIgcD13LmJvZHl8fHcuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImJvZHkiKVswXXx8eTtwLmFwcGVuZENoaWxkKHopO3RyeXt6LmlubmVySFRNTD0nPGEgaWQ9IicrYysnIj48L2E+JzsKby5pc0hUTUxEb2N1bWVudD0hIXcuZ2V0RWxlbWVudEJ5SWQoYyk7fWNhdGNoKHYpe31pZihvLmlzSFRNTERvY3VtZW50KXt6LnN0eWxlLmRpc3BsYXk9Im5vbmUiO3ouYXBwZW5kQ2hpbGQody5jcmVhdGVDb21tZW50KCIiKSk7bj0oei5nZXRFbGVtZW50c0J5VGFnTmFtZSgiKiIpLmxlbmd0aD4xKTsKdHJ5e3ouaW5uZXJIVE1MPSJmb288L2Zvbz4iO3M9ei5nZXRFbGVtZW50c0J5VGFnTmFtZSgiKiIpO209KHMmJiEhcy5sZW5ndGgmJnNbMF0ubm9kZU5hbWUuY2hhckF0KDApPT0iLyIpO31jYXRjaCh2KXt9by5icm9rZW5TdGFyR0VCVE49bnx8bTt0cnl7ei5pbm5lckhUTUw9JzxhIG5hbWU9IicrYysnIj48L2E+PGIgaWQ9IicrYysnIj48L2I+JzsKby5pZEdldHNOYW1lPXcuZ2V0RWxlbWVudEJ5SWQoYyk9PT16LmZpcnN0Q2hpbGQ7fWNhdGNoKHYpe31pZih6LmdldEVsZW1lbnRzQnlDbGFzc05hbWUpe3RyeXt6LmlubmVySFRNTD0nPGEgY2xhc3M9ImYiPjwvYT48YSBjbGFzcz0iYiI+PC9hPic7ei5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJiIikubGVuZ3RoOwp6LmZpcnN0Q2hpbGQuY2xhc3NOYW1lPSJiIjtxPSh6LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoImIiKS5sZW5ndGghPTIpO31jYXRjaCh2KXt9dHJ5e3ouaW5uZXJIVE1MPSc8YSBjbGFzcz0iYSI+PC9hPjxhIGNsYXNzPSJmIGIgYSI+PC9hPic7eD0oei5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJhIikubGVuZ3RoIT0yKTsKfWNhdGNoKHYpe31vLmJyb2tlbkdFQkNOPXF8fHg7fWlmKHoucXVlcnlTZWxlY3RvckFsbCl7dHJ5e3ouaW5uZXJIVE1MPSJmb288L2Zvbz4iO3M9ei5xdWVyeVNlbGVjdG9yQWxsKCIqIik7by5zdGFyU2VsZWN0c0Nsb3NlZFFTQT0ocyYmISFzLmxlbmd0aCYmc1swXS5ub2RlTmFtZS5jaGFyQXQoMCk9PSIvIik7Cn1jYXRjaCh2KXt9dHJ5e3ouaW5uZXJIVE1MPSc8YSBjbGFzcz0iTWlYIj48L2E+JztvLmJyb2tlbk1peGVkQ2FzZVFTQT0hei5xdWVyeVNlbGVjdG9yQWxsKCIuTWlYIikubGVuZ3RoO31jYXRjaCh2KXt9dHJ5e3ouaW5uZXJIVE1MPSc8c2VsZWN0PjxvcHRpb24gc2VsZWN0ZWQ9InNlbGVjdGVkIj5hPC9vcHRpb24+PC9zZWxlY3Q+JzsKby5icm9rZW5DaGVja2VkUVNBPSh6LnF1ZXJ5U2VsZWN0b3JBbGwoIjpjaGVja2VkIikubGVuZ3RoPT0wKTt9Y2F0Y2godil7fXRyeXt6LmlubmVySFRNTD0nPGEgY2xhc3M9IiI+PC9hPic7by5icm9rZW5FbXB0eUF0dHJpYnV0ZVFTQT0oei5xdWVyeVNlbGVjdG9yQWxsKCdbY2xhc3MqPSIiXScpLmxlbmd0aCE9MCk7Cn1jYXRjaCh2KXt9fXRyeXt6LmlubmVySFRNTD0nPGZvcm0gYWN0aW9uPSJzIj48aW5wdXQgaWQ9ImFjdGlvbiIvPjwvZm9ybT4nO3I9KHouZmlyc3RDaGlsZC5nZXRBdHRyaWJ1dGUoImFjdGlvbiIpIT0icyIpO31jYXRjaCh2KXt9by5uYXRpdmVNYXRjaGVzU2VsZWN0b3I9eS5tYXRjaGVzU2VsZWN0b3J8fHkubW96TWF0Y2hlc1NlbGVjdG9yfHx5LndlYmtpdE1hdGNoZXNTZWxlY3RvcjsKaWYoby5uYXRpdmVNYXRjaGVzU2VsZWN0b3Ipe3RyeXtvLm5hdGl2ZU1hdGNoZXNTZWxlY3Rvci5jYWxsKHksIjpzbGljayIpO28ubmF0aXZlTWF0Y2hlc1NlbGVjdG9yPW51bGw7fWNhdGNoKHYpe319fXRyeXt5LnNsaWNrX2V4cGFuZG89MTtkZWxldGUgeS5zbGlja19leHBhbmRvOwpvLmdldFVJRD10aGlzLmdldFVJREhUTUw7fWNhdGNoKHYpe28uZ2V0VUlEPXRoaXMuZ2V0VUlEWE1MO31wLnJlbW92ZUNoaWxkKHopO3o9cz1wPW51bGw7by5nZXRBdHRyaWJ1dGU9KG8uaXNIVE1MRG9jdW1lbnQmJnIpP2Z1bmN0aW9uKEQsQil7dmFyIEU9dGhpcy5hdHRyaWJ1dGVHZXR0ZXJzW0JdOwppZihFKXtyZXR1cm4gRS5jYWxsKEQpO312YXIgQz1ELmdldEF0dHJpYnV0ZU5vZGUoQik7cmV0dXJuKEMpP0Mubm9kZVZhbHVlOm51bGw7fTpmdW5jdGlvbihDLEIpe3ZhciBEPXRoaXMuYXR0cmlidXRlR2V0dGVyc1tCXTtyZXR1cm4oRCk/RC5jYWxsKEMpOkMuZ2V0QXR0cmlidXRlKEIpOwp9O28uaGFzQXR0cmlidXRlPSh5JiZ0aGlzLmlzTmF0aXZlQ29kZSh5Lmhhc0F0dHJpYnV0ZSkpP2Z1bmN0aW9uKEMsQil7cmV0dXJuIEMuaGFzQXR0cmlidXRlKEIpO306ZnVuY3Rpb24oQyxCKXtDPUMuZ2V0QXR0cmlidXRlTm9kZShCKTtyZXR1cm4gISEoQyYmKEMuc3BlY2lmaWVkfHxDLm5vZGVWYWx1ZSkpOwp9O28uY29udGFpbnM9KHkmJnRoaXMuaXNOYXRpdmVDb2RlKHkuY29udGFpbnMpKT9mdW5jdGlvbihCLEMpe3JldHVybiBCLmNvbnRhaW5zKEMpO306KHkmJnkuY29tcGFyZURvY3VtZW50UG9zaXRpb24pP2Z1bmN0aW9uKEIsQyl7cmV0dXJuIEI9PT1DfHwhIShCLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKEMpJjE2KTsKfTpmdW5jdGlvbihCLEMpe2lmKEMpe2Rve2lmKEM9PT1CKXtyZXR1cm4gdHJ1ZTt9fXdoaWxlKChDPUMucGFyZW50Tm9kZSkpO31yZXR1cm4gZmFsc2U7fTtvLmRvY3VtZW50U29ydGVyPSh5LmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKT9mdW5jdGlvbihDLEIpe2lmKCFDLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9ufHwhQi5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbil7cmV0dXJuIDA7Cn1yZXR1cm4gQy5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihCKSY0Py0xOkM9PT1CPzA6MTt9Oigic291cmNlSW5kZXgiIGluIHkpP2Z1bmN0aW9uKEMsQil7aWYoIUMuc291cmNlSW5kZXh8fCFCLnNvdXJjZUluZGV4KXtyZXR1cm4gMDt9cmV0dXJuIEMuc291cmNlSW5kZXgtQi5zb3VyY2VJbmRleDsKfToody5jcmVhdGVSYW5nZSk/ZnVuY3Rpb24oRSxDKXtpZighRS5vd25lckRvY3VtZW50fHwhQy5vd25lckRvY3VtZW50KXtyZXR1cm4gMDt9dmFyIEQ9RS5vd25lckRvY3VtZW50LmNyZWF0ZVJhbmdlKCksQj1DLm93bmVyRG9jdW1lbnQuY3JlYXRlUmFuZ2UoKTtELnNldFN0YXJ0KEUsMCk7CkQuc2V0RW5kKEUsMCk7Qi5zZXRTdGFydChDLDApO0Iuc2V0RW5kKEMsMCk7cmV0dXJuIEQuY29tcGFyZUJvdW5kYXJ5UG9pbnRzKFJhbmdlLlNUQVJUX1RPX0VORCxCKTt9Om51bGw7eT1udWxsO2ZvcihBIGluIG8pe3RoaXNbQV09b1tBXTt9fTt2YXIgZT0vXihbIy5dPykoKD86W1x3LV0rfFwqKSkkLyxnPS9cWy4rWyokXl09KD86IiJ8JycpP1xdLyxmPXt9OwpqLnNlYXJjaD1mdW5jdGlvbihVLHosSCxzKXt2YXIgcD10aGlzLmZvdW5kPShzKT9udWxsOihIfHxbXSk7aWYoIVUpe3JldHVybiBwO31lbHNle2lmKFUubmF2aWdhdG9yKXtVPVUuZG9jdW1lbnQ7fWVsc2V7aWYoIVUubm9kZVR5cGUpe3JldHVybiBwO319fXZhciBGLE8sVj10aGlzLnVuaXF1ZXM9e30sST0hIShIJiZILmxlbmd0aCkseT0oVS5ub2RlVHlwZT09OSk7CmlmKHRoaXMuZG9jdW1lbnQhPT0oeT9VOlUub3duZXJEb2N1bWVudCkpe3RoaXMuc2V0RG9jdW1lbnQoVSk7fWlmKEkpe2ZvcihPPXAubGVuZ3RoO08tLTspe1ZbdGhpcy5nZXRVSUQocFtPXSldPXRydWU7fX1pZih0eXBlb2Ygej09InN0cmluZyIpe3ZhciByPXoubWF0Y2goZSk7CnNpbXBsZVNlbGVjdG9yczppZihyKXt2YXIgdT1yWzFdLHY9clsyXSxBLEU7aWYoIXUpe2lmKHY9PSIqIiYmdGhpcy5icm9rZW5TdGFyR0VCVE4pe2JyZWFrIHNpbXBsZVNlbGVjdG9yczt9RT1VLmdldEVsZW1lbnRzQnlUYWdOYW1lKHYpO2lmKHMpe3JldHVybiBFWzBdfHxudWxsOwp9Zm9yKE89MDtBPUVbTysrXTspe2lmKCEoSSYmVlt0aGlzLmdldFVJRChBKV0pKXtwLnB1c2goQSk7fX19ZWxzZXtpZih1PT0iIyIpe2lmKCF0aGlzLmlzSFRNTERvY3VtZW50fHwheSl7YnJlYWsgc2ltcGxlU2VsZWN0b3JzO31BPVUuZ2V0RWxlbWVudEJ5SWQodik7CmlmKCFBKXtyZXR1cm4gcDt9aWYodGhpcy5pZEdldHNOYW1lJiZBLmdldEF0dHJpYnV0ZU5vZGUoImlkIikubm9kZVZhbHVlIT12KXticmVhayBzaW1wbGVTZWxlY3RvcnM7fWlmKHMpe3JldHVybiBBfHxudWxsO31pZighKEkmJlZbdGhpcy5nZXRVSUQoQSldKSl7cC5wdXNoKEEpOwp9fWVsc2V7aWYodT09Ii4iKXtpZighdGhpcy5pc0hUTUxEb2N1bWVudHx8KCghVS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lfHx0aGlzLmJyb2tlbkdFQkNOKSYmVS5xdWVyeVNlbGVjdG9yQWxsKSl7YnJlYWsgc2ltcGxlU2VsZWN0b3JzO31pZihVLmdldEVsZW1lbnRzQnlDbGFzc05hbWUmJiF0aGlzLmJyb2tlbkdFQkNOKXtFPVUuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSh2KTsKaWYocyl7cmV0dXJuIEVbMF18fG51bGw7fWZvcihPPTA7QT1FW08rK107KXtpZighKEkmJlZbdGhpcy5nZXRVSUQoQSldKSl7cC5wdXNoKEEpO319fWVsc2V7dmFyIFQ9bmV3IFJlZ0V4cCgiKF58XFxzKSIrZC5lc2NhcGVSZWdFeHAodikrIihcXHN8JCkiKTtFPVUuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIioiKTsKZm9yKE89MDtBPUVbTysrXTspe2NsYXNzTmFtZT1BLmNsYXNzTmFtZTtpZighKGNsYXNzTmFtZSYmVC50ZXN0KGNsYXNzTmFtZSkpKXtjb250aW51ZTt9aWYocyl7cmV0dXJuIEE7fWlmKCEoSSYmVlt0aGlzLmdldFVJRChBKV0pKXtwLnB1c2goQSk7fX19fX19aWYoSSl7dGhpcy5zb3J0KHApOwp9cmV0dXJuKHMpP251bGw6cDt9cXVlcnlTZWxlY3RvcjppZihVLnF1ZXJ5U2VsZWN0b3JBbGwpe2lmKCF0aGlzLmlzSFRNTERvY3VtZW50fHxmW3pdfHx0aGlzLmJyb2tlbk1peGVkQ2FzZVFTQXx8KHRoaXMuYnJva2VuQ2hlY2tlZFFTQSYmei5pbmRleE9mKCI6Y2hlY2tlZCIpPi0xKXx8KHRoaXMuYnJva2VuRW1wdHlBdHRyaWJ1dGVRU0EmJmcudGVzdCh6KSl8fCgheSYmei5pbmRleE9mKCIsIik+LTEpfHxkLmRpc2FibGVRU0Epe2JyZWFrIHF1ZXJ5U2VsZWN0b3I7Cn12YXIgUz16LHg9VTtpZigheSl7dmFyIEM9eC5nZXRBdHRyaWJ1dGUoImlkIiksdD0ic2xpY2tpZF9fIjt4LnNldEF0dHJpYnV0ZSgiaWQiLHQpO1M9IiMiK3QrIiAiK1M7VT14LnBhcmVudE5vZGU7fXRyeXtpZihzKXtyZXR1cm4gVS5xdWVyeVNlbGVjdG9yKFMpfHxudWxsOwp9ZWxzZXtFPVUucXVlcnlTZWxlY3RvckFsbChTKTt9fWNhdGNoKFEpe2Zbel09MTticmVhayBxdWVyeVNlbGVjdG9yO31maW5hbGx5e2lmKCF5KXtpZihDKXt4LnNldEF0dHJpYnV0ZSgiaWQiLEMpO31lbHNle3gucmVtb3ZlQXR0cmlidXRlKCJpZCIpO31VPXg7fX1pZih0aGlzLnN0YXJTZWxlY3RzQ2xvc2VkUVNBKXtmb3IoTz0wOwpBPUVbTysrXTspe2lmKEEubm9kZU5hbWU+IkAiJiYhKEkmJlZbdGhpcy5nZXRVSUQoQSldKSl7cC5wdXNoKEEpO319fWVsc2V7Zm9yKE89MDtBPUVbTysrXTspe2lmKCEoSSYmVlt0aGlzLmdldFVJRChBKV0pKXtwLnB1c2goQSk7fX19aWYoSSl7dGhpcy5zb3J0KHApOwp9cmV0dXJuIHA7fUY9dGhpcy5TbGljay5wYXJzZSh6KTtpZighRi5sZW5ndGgpe3JldHVybiBwO319ZWxzZXtpZih6PT1udWxsKXtyZXR1cm4gcDt9ZWxzZXtpZih6LlNsaWNrKXtGPXo7fWVsc2V7aWYodGhpcy5jb250YWlucyhVLmRvY3VtZW50RWxlbWVudHx8VSx6KSl7KHApP3AucHVzaCh6KTpwPXo7CnJldHVybiBwO31lbHNle3JldHVybiBwO319fX10aGlzLnBvc05USD17fTt0aGlzLnBvc05USExhc3Q9e307dGhpcy5wb3NOVEhUeXBlPXt9O3RoaXMucG9zTlRIVHlwZUxhc3Q9e307dGhpcy5wdXNoPSghSSYmKHN8fChGLmxlbmd0aD09MSYmRi5leHByZXNzaW9uc1swXS5sZW5ndGg9PTEpKSk/dGhpcy5wdXNoQXJyYXk6dGhpcy5wdXNoVUlEOwppZihwPT1udWxsKXtwPVtdO312YXIgTSxMLEs7dmFyIEIsSixELGMscSxHLFc7dmFyIE4sUCxvLHcsUj1GLmV4cHJlc3Npb25zO3NlYXJjaDpmb3IoTz0wOyhQPVJbT10pO08rKyl7Zm9yKE09MDsobz1QW01dKTtNKyspe0I9ImNvbWJpbmF0b3I6IitvLmNvbWJpbmF0b3I7CmlmKCF0aGlzW0JdKXtjb250aW51ZSBzZWFyY2g7fUo9KHRoaXMuaXNYTUxEb2N1bWVudCk/by50YWc6by50YWcudG9VcHBlckNhc2UoKTtEPW8uaWQ7Yz1vLmNsYXNzTGlzdDtxPW8uY2xhc3NlcztHPW8uYXR0cmlidXRlcztXPW8ucHNldWRvczt3PShNPT09KFAubGVuZ3RoLTEpKTsKdGhpcy5iaXRVbmlxdWVzPXt9O2lmKHcpe3RoaXMudW5pcXVlcz1WO3RoaXMuZm91bmQ9cDt9ZWxzZXt0aGlzLnVuaXF1ZXM9e307dGhpcy5mb3VuZD1bXTt9aWYoTT09PTApe3RoaXNbQl0oVSxKLEQscSxHLFcsYyk7aWYocyYmdyYmcC5sZW5ndGgpe2JyZWFrIHNlYXJjaDsKfX1lbHNle2lmKHMmJncpe2ZvcihMPTAsSz1OLmxlbmd0aDtMPEs7TCsrKXt0aGlzW0JdKE5bTF0sSixELHEsRyxXLGMpO2lmKHAubGVuZ3RoKXticmVhayBzZWFyY2g7fX19ZWxzZXtmb3IoTD0wLEs9Ti5sZW5ndGg7TDxLO0wrKyl7dGhpc1tCXShOW0xdLEosRCxxLEcsVyxjKTsKfX19Tj10aGlzLmZvdW5kO319aWYoSXx8KEYuZXhwcmVzc2lvbnMubGVuZ3RoPjEpKXt0aGlzLnNvcnQocCk7fXJldHVybihzKT8ocFswXXx8bnVsbCk6cDt9O2oudWlkeD0xO2oudWlkaz0ic2xpY2stdW5pcXVlaWQiO2ouZ2V0VUlEWE1MPWZ1bmN0aW9uKG0pe3ZhciBjPW0uZ2V0QXR0cmlidXRlKHRoaXMudWlkayk7CmlmKCFjKXtjPXRoaXMudWlkeCsrO20uc2V0QXR0cmlidXRlKHRoaXMudWlkayxjKTt9cmV0dXJuIGM7fTtqLmdldFVJREhUTUw9ZnVuY3Rpb24oYyl7cmV0dXJuIGMudW5pcXVlTnVtYmVyfHwoYy51bmlxdWVOdW1iZXI9dGhpcy51aWR4KyspO307ai5zb3J0PWZ1bmN0aW9uKGMpe2lmKCF0aGlzLmRvY3VtZW50U29ydGVyKXtyZXR1cm4gYzsKfWMuc29ydCh0aGlzLmRvY3VtZW50U29ydGVyKTtyZXR1cm4gYzt9O2ouY2FjaGVOVEg9e307ai5tYXRjaE5USD0vXihbKy1dP1xkKik/KFthLXpdKyk/KFsrLV1cZCspPyQvO2oucGFyc2VOVEhBcmd1bWVudD1mdW5jdGlvbihwKXt2YXIgbj1wLm1hdGNoKHRoaXMubWF0Y2hOVEgpOwppZighbil7cmV0dXJuIGZhbHNlO312YXIgbz1uWzJdfHxmYWxzZTt2YXIgbT1uWzFdfHwxO2lmKG09PSItIil7bT0tMTt9dmFyIGM9K25bM118fDA7bj0obz09Im4iKT97YTptLGI6Y306KG89PSJvZGQiKT97YToyLGI6MX06KG89PSJldmVuIik/e2E6MixiOjB9OnthOjAsYjptfTsKcmV0dXJuKHRoaXMuY2FjaGVOVEhbcF09bik7fTtqLmNyZWF0ZU5USFBzZXVkbz1mdW5jdGlvbihvLG0sYyxuKXtyZXR1cm4gZnVuY3Rpb24ocixwKXt2YXIgdD10aGlzLmdldFVJRChyKTtpZighdGhpc1tjXVt0XSl7dmFyIHo9ci5wYXJlbnROb2RlO2lmKCF6KXtyZXR1cm4gZmFsc2U7Cn12YXIgcT16W29dLHM9MTtpZihuKXt2YXIgeT1yLm5vZGVOYW1lO2Rve2lmKHEubm9kZU5hbWUhPXkpe2NvbnRpbnVlO310aGlzW2NdW3RoaXMuZ2V0VUlEKHEpXT1zKys7fXdoaWxlKChxPXFbbV0pKTt9ZWxzZXtkb3tpZihxLm5vZGVUeXBlIT0xKXtjb250aW51ZTsKfXRoaXNbY11bdGhpcy5nZXRVSUQocSldPXMrKzt9d2hpbGUoKHE9cVttXSkpO319cD1wfHwibiI7dmFyIHU9dGhpcy5jYWNoZU5USFtwXXx8dGhpcy5wYXJzZU5USEFyZ3VtZW50KHApO2lmKCF1KXtyZXR1cm4gZmFsc2U7fXZhciB4PXUuYSx3PXUuYix2PXRoaXNbY11bdF07CmlmKHg9PTApe3JldHVybiB3PT12O31pZih4PjApe2lmKHY8dyl7cmV0dXJuIGZhbHNlO319ZWxzZXtpZih3PHYpe3JldHVybiBmYWxzZTt9fXJldHVybigodi13KSV4KT09MDt9O307ai5wdXNoQXJyYXk9ZnVuY3Rpb24obyxjLHEsbixtLHApe2lmKHRoaXMubWF0Y2hTZWxlY3RvcihvLGMscSxuLG0scCkpe3RoaXMuZm91bmQucHVzaChvKTsKfX07ai5wdXNoVUlEPWZ1bmN0aW9uKHAsYyxyLG8sbSxxKXt2YXIgbj10aGlzLmdldFVJRChwKTtpZighdGhpcy51bmlxdWVzW25dJiZ0aGlzLm1hdGNoU2VsZWN0b3IocCxjLHIsbyxtLHEpKXt0aGlzLnVuaXF1ZXNbbl09dHJ1ZTt0aGlzLmZvdW5kLnB1c2gocCk7fX07CmoubWF0Y2hOb2RlPWZ1bmN0aW9uKG0sbil7aWYodGhpcy5pc0hUTUxEb2N1bWVudCYmdGhpcy5uYXRpdmVNYXRjaGVzU2VsZWN0b3Ipe3RyeXtyZXR1cm4gdGhpcy5uYXRpdmVNYXRjaGVzU2VsZWN0b3IuY2FsbChtLG4ucmVwbGFjZSgvXFsoW149XSspPVxzKihbXiciXF1dKz8pXHMqXF0vZywnWyQxPSIkMiJdJykpOwp9Y2F0Y2godSl7fX12YXIgdD10aGlzLlNsaWNrLnBhcnNlKG4pO2lmKCF0KXtyZXR1cm4gdHJ1ZTt9dmFyIHI9dC5leHByZXNzaW9ucyxwLHM9MCxxO2ZvcihxPTA7KGN1cnJlbnRFeHByZXNzaW9uPXJbcV0pO3ErKyl7aWYoY3VycmVudEV4cHJlc3Npb24ubGVuZ3RoPT0xKXt2YXIgbz1jdXJyZW50RXhwcmVzc2lvblswXTsKaWYodGhpcy5tYXRjaFNlbGVjdG9yKG0sKHRoaXMuaXNYTUxEb2N1bWVudCk/by50YWc6by50YWcudG9VcHBlckNhc2UoKSxvLmlkLG8uY2xhc3NlcyxvLmF0dHJpYnV0ZXMsby5wc2V1ZG9zKSl7cmV0dXJuIHRydWU7fXMrKzt9fWlmKHM9PXQubGVuZ3RoKXtyZXR1cm4gZmFsc2U7Cn12YXIgYz10aGlzLnNlYXJjaCh0aGlzLmRvY3VtZW50LHQpLHY7Zm9yKHE9MDt2PWNbcSsrXTspe2lmKHY9PT1tKXtyZXR1cm4gdHJ1ZTt9fXJldHVybiBmYWxzZTt9O2oubWF0Y2hQc2V1ZG89ZnVuY3Rpb24ocCxjLG8pe3ZhciBtPSJwc2V1ZG86IitjO2lmKHRoaXNbbV0pe3JldHVybiB0aGlzW21dKHAsbyk7Cn12YXIgbj10aGlzLmdldEF0dHJpYnV0ZShwLGMpO3JldHVybihvKT9vPT1uOiEhbjt9O2oubWF0Y2hTZWxlY3Rvcj1mdW5jdGlvbihuLHUsYyxvLHAscil7aWYodSl7dmFyIHM9KHRoaXMuaXNYTUxEb2N1bWVudCk/bi5ub2RlTmFtZTpuLm5vZGVOYW1lLnRvVXBwZXJDYXNlKCk7CmlmKHU9PSIqIil7aWYoczwiQCIpe3JldHVybiBmYWxzZTt9fWVsc2V7aWYocyE9dSl7cmV0dXJuIGZhbHNlO319fWlmKGMmJm4uZ2V0QXR0cmlidXRlKCJpZCIpIT1jKXtyZXR1cm4gZmFsc2U7fXZhciBxLG0sdDtpZihvKXtmb3IocT1vLmxlbmd0aDtxLS07KXt0PW4uZ2V0QXR0cmlidXRlKCJjbGFzcyIpfHxuLmNsYXNzTmFtZTsKaWYoISh0JiZvW3FdLnJlZ2V4cC50ZXN0KHQpKSl7cmV0dXJuIGZhbHNlO319fWlmKHApe2ZvcihxPXAubGVuZ3RoO3EtLTspe209cFtxXTtpZihtLm9wZXJhdG9yPyFtLnRlc3QodGhpcy5nZXRBdHRyaWJ1dGUobixtLmtleSkpOiF0aGlzLmhhc0F0dHJpYnV0ZShuLG0ua2V5KSl7cmV0dXJuIGZhbHNlOwp9fX1pZihyKXtmb3IocT1yLmxlbmd0aDtxLS07KXttPXJbcV07aWYoIXRoaXMubWF0Y2hQc2V1ZG8obixtLmtleSxtLnZhbHVlKSl7cmV0dXJuIGZhbHNlO319fXJldHVybiB0cnVlO307dmFyIGk9eyIgIjpmdW5jdGlvbihwLHYsbSxxLHIsdCxvKXt2YXIgcyx1LG47CmlmKHRoaXMuaXNIVE1MRG9jdW1lbnQpe2dldEJ5SWQ6aWYobSl7dT10aGlzLmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKG0pO2lmKCghdSYmcC5hbGwpfHwodGhpcy5pZEdldHNOYW1lJiZ1JiZ1LmdldEF0dHJpYnV0ZU5vZGUoImlkIikubm9kZVZhbHVlIT1tKSl7bj1wLmFsbFttXTsKaWYoIW4pe3JldHVybjt9aWYoIW5bMF0pe249W25dO31mb3Iocz0wO3U9bltzKytdOyl7dmFyIGM9dS5nZXRBdHRyaWJ1dGVOb2RlKCJpZCIpO2lmKGMmJmMubm9kZVZhbHVlPT1tKXt0aGlzLnB1c2godSx2LG51bGwscSxyLHQpO2JyZWFrO319cmV0dXJuO31pZighdSl7aWYodGhpcy5jb250YWlucyh0aGlzLnJvb3QscCkpe3JldHVybjsKfWVsc2V7YnJlYWsgZ2V0QnlJZDt9fWVsc2V7aWYodGhpcy5kb2N1bWVudCE9PXAmJiF0aGlzLmNvbnRhaW5zKHAsdSkpe3JldHVybjt9fXRoaXMucHVzaCh1LHYsbnVsbCxxLHIsdCk7cmV0dXJuO31nZXRCeUNsYXNzOmlmKHEmJnAuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSYmIXRoaXMuYnJva2VuR0VCQ04pe249cC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKG8uam9pbigiICIpKTsKaWYoIShuJiZuLmxlbmd0aCkpe2JyZWFrIGdldEJ5Q2xhc3M7fWZvcihzPTA7dT1uW3MrK107KXt0aGlzLnB1c2godSx2LG0sbnVsbCxyLHQpO31yZXR1cm47fX1nZXRCeVRhZzp7bj1wLmdldEVsZW1lbnRzQnlUYWdOYW1lKHYpO2lmKCEobiYmbi5sZW5ndGgpKXticmVhayBnZXRCeVRhZzsKfWlmKCF0aGlzLmJyb2tlblN0YXJHRUJUTil7dj1udWxsO31mb3Iocz0wO3U9bltzKytdOyl7dGhpcy5wdXNoKHUsdixtLHEscix0KTt9fX0sIj4iOmZ1bmN0aW9uKG8sYyxxLG4sbSxwKXtpZigobz1vLmZpcnN0Q2hpbGQpKXtkb3tpZihvLm5vZGVUeXBlPT0xKXt0aGlzLnB1c2gobyxjLHEsbixtLHApOwp9fXdoaWxlKChvPW8ubmV4dFNpYmxpbmcpKTt9fSwiKyI6ZnVuY3Rpb24obyxjLHEsbixtLHApe3doaWxlKChvPW8ubmV4dFNpYmxpbmcpKXtpZihvLm5vZGVUeXBlPT0xKXt0aGlzLnB1c2gobyxjLHEsbixtLHApO2JyZWFrO319fSwiXiI6ZnVuY3Rpb24obyxjLHEsbixtLHApe289by5maXJzdENoaWxkOwppZihvKXtpZihvLm5vZGVUeXBlPT0xKXt0aGlzLnB1c2gobyxjLHEsbixtLHApO31lbHNle3RoaXNbImNvbWJpbmF0b3I6KyJdKG8sYyxxLG4sbSxwKTt9fX0sIn4iOmZ1bmN0aW9uKHAsYyxyLG8sbSxxKXt3aGlsZSgocD1wLm5leHRTaWJsaW5nKSl7aWYocC5ub2RlVHlwZSE9MSl7Y29udGludWU7Cn12YXIgbj10aGlzLmdldFVJRChwKTtpZih0aGlzLmJpdFVuaXF1ZXNbbl0pe2JyZWFrO310aGlzLmJpdFVuaXF1ZXNbbl09dHJ1ZTt0aGlzLnB1c2gocCxjLHIsbyxtLHEpO319LCIrKyI6ZnVuY3Rpb24obyxjLHEsbixtLHApe3RoaXNbImNvbWJpbmF0b3I6KyJdKG8sYyxxLG4sbSxwKTsKdGhpc1siY29tYmluYXRvcjohKyJdKG8sYyxxLG4sbSxwKTt9LCJ+fiI6ZnVuY3Rpb24obyxjLHEsbixtLHApe3RoaXNbImNvbWJpbmF0b3I6fiJdKG8sYyxxLG4sbSxwKTt0aGlzWyJjb21iaW5hdG9yOiF+Il0obyxjLHEsbixtLHApO30sIiEiOmZ1bmN0aW9uKG8sYyxxLG4sbSxwKXt3aGlsZSgobz1vLnBhcmVudE5vZGUpKXtpZihvIT09dGhpcy5kb2N1bWVudCl7dGhpcy5wdXNoKG8sYyxxLG4sbSxwKTsKfX19LCIhPiI6ZnVuY3Rpb24obyxjLHEsbixtLHApe289by5wYXJlbnROb2RlO2lmKG8hPT10aGlzLmRvY3VtZW50KXt0aGlzLnB1c2gobyxjLHEsbixtLHApO319LCIhKyI6ZnVuY3Rpb24obyxjLHEsbixtLHApe3doaWxlKChvPW8ucHJldmlvdXNTaWJsaW5nKSl7aWYoby5ub2RlVHlwZT09MSl7dGhpcy5wdXNoKG8sYyxxLG4sbSxwKTsKYnJlYWs7fX19LCIhXiI6ZnVuY3Rpb24obyxjLHEsbixtLHApe289by5sYXN0Q2hpbGQ7aWYobyl7aWYoby5ub2RlVHlwZT09MSl7dGhpcy5wdXNoKG8sYyxxLG4sbSxwKTt9ZWxzZXt0aGlzWyJjb21iaW5hdG9yOiErIl0obyxjLHEsbixtLHApO319fSwiIX4iOmZ1bmN0aW9uKHAsYyxyLG8sbSxxKXt3aGlsZSgocD1wLnByZXZpb3VzU2libGluZykpe2lmKHAubm9kZVR5cGUhPTEpe2NvbnRpbnVlOwp9dmFyIG49dGhpcy5nZXRVSUQocCk7aWYodGhpcy5iaXRVbmlxdWVzW25dKXticmVhazt9dGhpcy5iaXRVbmlxdWVzW25dPXRydWU7dGhpcy5wdXNoKHAsYyxyLG8sbSxxKTt9fX07Zm9yKHZhciBoIGluIGkpe2pbImNvbWJpbmF0b3I6IitoXT1pW2hdO312YXIgaz17ZW1wdHk6ZnVuY3Rpb24oYyl7dmFyIG09Yy5maXJzdENoaWxkOwpyZXR1cm4gIShtJiZtLm5vZGVUeXBlPT0xKSYmIShjLmlubmVyVGV4dHx8Yy50ZXh0Q29udGVudHx8IiIpLmxlbmd0aDt9LG5vdDpmdW5jdGlvbihjLG0pe3JldHVybiAhdGhpcy5tYXRjaE5vZGUoYyxtKTt9LGNvbnRhaW5zOmZ1bmN0aW9uKGMsbSl7cmV0dXJuKGMuaW5uZXJUZXh0fHxjLnRleHRDb250ZW50fHwiIikuaW5kZXhPZihtKT4tMTsKfSwiZmlyc3QtY2hpbGQiOmZ1bmN0aW9uKGMpe3doaWxlKChjPWMucHJldmlvdXNTaWJsaW5nKSl7aWYoYy5ub2RlVHlwZT09MSl7cmV0dXJuIGZhbHNlO319cmV0dXJuIHRydWU7fSwibGFzdC1jaGlsZCI6ZnVuY3Rpb24oYyl7d2hpbGUoKGM9Yy5uZXh0U2libGluZykpe2lmKGMubm9kZVR5cGU9PTEpe3JldHVybiBmYWxzZTsKfX1yZXR1cm4gdHJ1ZTt9LCJvbmx5LWNoaWxkIjpmdW5jdGlvbihuKXt2YXIgbT1uO3doaWxlKChtPW0ucHJldmlvdXNTaWJsaW5nKSl7aWYobS5ub2RlVHlwZT09MSl7cmV0dXJuIGZhbHNlO319dmFyIGM9bjt3aGlsZSgoYz1jLm5leHRTaWJsaW5nKSl7aWYoYy5ub2RlVHlwZT09MSl7cmV0dXJuIGZhbHNlOwp9fXJldHVybiB0cnVlO30sIm50aC1jaGlsZCI6ai5jcmVhdGVOVEhQc2V1ZG8oImZpcnN0Q2hpbGQiLCJuZXh0U2libGluZyIsInBvc05USCIpLCJudGgtbGFzdC1jaGlsZCI6ai5jcmVhdGVOVEhQc2V1ZG8oImxhc3RDaGlsZCIsInByZXZpb3VzU2libGluZyIsInBvc05USExhc3QiKSwibnRoLW9mLXR5cGUiOmouY3JlYXRlTlRIUHNldWRvKCJmaXJzdENoaWxkIiwibmV4dFNpYmxpbmciLCJwb3NOVEhUeXBlIix0cnVlKSwibnRoLWxhc3Qtb2YtdHlwZSI6ai5jcmVhdGVOVEhQc2V1ZG8oImxhc3RDaGlsZCIsInByZXZpb3VzU2libGluZyIsInBvc05USFR5cGVMYXN0Iix0cnVlKSxpbmRleDpmdW5jdGlvbihtLGMpe3JldHVybiB0aGlzWyJwc2V1ZG86bnRoLWNoaWxkIl0obSwiIitjKzEpOwp9LGV2ZW46ZnVuY3Rpb24oYyl7cmV0dXJuIHRoaXNbInBzZXVkbzpudGgtY2hpbGQiXShjLCIybiIpO30sb2RkOmZ1bmN0aW9uKGMpe3JldHVybiB0aGlzWyJwc2V1ZG86bnRoLWNoaWxkIl0oYywiMm4rMSIpO30sImZpcnN0LW9mLXR5cGUiOmZ1bmN0aW9uKGMpe3ZhciBtPWMubm9kZU5hbWU7CndoaWxlKChjPWMucHJldmlvdXNTaWJsaW5nKSl7aWYoYy5ub2RlTmFtZT09bSl7cmV0dXJuIGZhbHNlO319cmV0dXJuIHRydWU7fSwibGFzdC1vZi10eXBlIjpmdW5jdGlvbihjKXt2YXIgbT1jLm5vZGVOYW1lO3doaWxlKChjPWMubmV4dFNpYmxpbmcpKXtpZihjLm5vZGVOYW1lPT1tKXtyZXR1cm4gZmFsc2U7Cn19cmV0dXJuIHRydWU7fSwib25seS1vZi10eXBlIjpmdW5jdGlvbihuKXt2YXIgbT1uLG89bi5ub2RlTmFtZTt3aGlsZSgobT1tLnByZXZpb3VzU2libGluZykpe2lmKG0ubm9kZU5hbWU9PW8pe3JldHVybiBmYWxzZTt9fXZhciBjPW47d2hpbGUoKGM9Yy5uZXh0U2libGluZykpe2lmKGMubm9kZU5hbWU9PW8pe3JldHVybiBmYWxzZTsKfX1yZXR1cm4gdHJ1ZTt9LGVuYWJsZWQ6ZnVuY3Rpb24oYyl7cmV0dXJuICFjLmRpc2FibGVkO30sZGlzYWJsZWQ6ZnVuY3Rpb24oYyl7cmV0dXJuIGMuZGlzYWJsZWQ7fSxjaGVja2VkOmZ1bmN0aW9uKGMpe3JldHVybiBjLmNoZWNrZWR8fGMuc2VsZWN0ZWQ7fSxmb2N1czpmdW5jdGlvbihjKXtyZXR1cm4gdGhpcy5pc0hUTUxEb2N1bWVudCYmdGhpcy5kb2N1bWVudC5hY3RpdmVFbGVtZW50PT09YyYmKGMuaHJlZnx8Yy50eXBlfHx0aGlzLmhhc0F0dHJpYnV0ZShjLCJ0YWJpbmRleCIpKTsKfSxyb290OmZ1bmN0aW9uKGMpe3JldHVybihjPT09dGhpcy5yb290KTt9LHNlbGVjdGVkOmZ1bmN0aW9uKGMpe3JldHVybiBjLnNlbGVjdGVkO319O2Zvcih2YXIgYSBpbiBrKXtqWyJwc2V1ZG86IithXT1rW2FdO31qLmF0dHJpYnV0ZUdldHRlcnM9eyJjbGFzcyI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRBdHRyaWJ1dGUoImNsYXNzIil8fHRoaXMuY2xhc3NOYW1lOwp9LCJmb3IiOmZ1bmN0aW9uKCl7cmV0dXJuKCJodG1sRm9yIiBpbiB0aGlzKT90aGlzLmh0bWxGb3I6dGhpcy5nZXRBdHRyaWJ1dGUoImZvciIpO30saHJlZjpmdW5jdGlvbigpe3JldHVybigiaHJlZiIgaW4gdGhpcyk/dGhpcy5nZXRBdHRyaWJ1dGUoImhyZWYiLDIpOnRoaXMuZ2V0QXR0cmlidXRlKCJocmVmIik7Cn0sc3R5bGU6ZnVuY3Rpb24oKXtyZXR1cm4odGhpcy5zdHlsZSk/dGhpcy5zdHlsZS5jc3NUZXh0OnRoaXMuZ2V0QXR0cmlidXRlKCJzdHlsZSIpO30sdGFiaW5kZXg6ZnVuY3Rpb24oKXt2YXIgYz10aGlzLmdldEF0dHJpYnV0ZU5vZGUoInRhYmluZGV4Iik7cmV0dXJuKGMmJmMuc3BlY2lmaWVkKT9jLm5vZGVWYWx1ZTpudWxsOwp9LHR5cGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRBdHRyaWJ1dGUoInR5cGUiKTt9fTt2YXIgZD1qLlNsaWNrPSh0aGlzLlNsaWNrfHx7fSk7ZC52ZXJzaW9uPSIxLjEuNSI7ZC5zZWFyY2g9ZnVuY3Rpb24obSxuLGMpe3JldHVybiBqLnNlYXJjaChtLG4sYyk7Cn07ZC5maW5kPWZ1bmN0aW9uKGMsbSl7cmV0dXJuIGouc2VhcmNoKGMsbSxudWxsLHRydWUpO307ZC5jb250YWlucz1mdW5jdGlvbihjLG0pe2ouc2V0RG9jdW1lbnQoYyk7cmV0dXJuIGouY29udGFpbnMoYyxtKTt9O2QuZ2V0QXR0cmlidXRlPWZ1bmN0aW9uKG0sYyl7cmV0dXJuIGouZ2V0QXR0cmlidXRlKG0sYyk7Cn07ZC5tYXRjaD1mdW5jdGlvbihtLGMpe2lmKCEobSYmYykpe3JldHVybiBmYWxzZTt9aWYoIWN8fGM9PT1tKXtyZXR1cm4gdHJ1ZTt9ai5zZXREb2N1bWVudChtKTtyZXR1cm4gai5tYXRjaE5vZGUobSxjKTt9O2QuZGVmaW5lQXR0cmlidXRlR2V0dGVyPWZ1bmN0aW9uKGMsbSl7ai5hdHRyaWJ1dGVHZXR0ZXJzW2NdPW07CnJldHVybiB0aGlzO307ZC5sb29rdXBBdHRyaWJ1dGVHZXR0ZXI9ZnVuY3Rpb24oYyl7cmV0dXJuIGouYXR0cmlidXRlR2V0dGVyc1tjXTt9O2QuZGVmaW5lUHNldWRvPWZ1bmN0aW9uKGMsbSl7alsicHNldWRvOiIrY109ZnVuY3Rpb24obyxuKXtyZXR1cm4gbS5jYWxsKG8sbik7Cn07cmV0dXJuIHRoaXM7fTtkLmxvb2t1cFBzZXVkbz1mdW5jdGlvbihjKXt2YXIgbT1qWyJwc2V1ZG86IitjXTtpZihtKXtyZXR1cm4gZnVuY3Rpb24obil7cmV0dXJuIG0uY2FsbCh0aGlzLG4pO307fXJldHVybiBudWxsO307ZC5vdmVycmlkZT1mdW5jdGlvbihtLGMpe2oub3ZlcnJpZGUobSxjKTsKcmV0dXJuIHRoaXM7fTtkLmlzWE1MPWouaXNYTUw7ZC51aWRPZj1mdW5jdGlvbihjKXtyZXR1cm4gai5nZXRVSURIVE1MKGMpO307aWYoIXRoaXMuU2xpY2spe3RoaXMuU2xpY2s9ZDt9fSkuYXBwbHkoKHR5cGVvZiBleHBvcnRzIT0idW5kZWZpbmVkIik/ZXhwb3J0czp0aGlzKTsKdmFyIEVsZW1lbnQ9ZnVuY3Rpb24oYixnKXt2YXIgaD1FbGVtZW50LkNvbnN0cnVjdG9yc1tiXTtpZihoKXtyZXR1cm4gaChnKTt9aWYodHlwZW9mIGIhPSJzdHJpbmciKXtyZXR1cm4gZG9jdW1lbnQuaWQoYikuc2V0KGcpO31pZighZyl7Zz17fTt9aWYoISgvXltcdy1dKyQvKS50ZXN0KGIpKXt2YXIgZT1TbGljay5wYXJzZShiKS5leHByZXNzaW9uc1swXVswXTsKYj0oZS50YWc9PSIqIik/ImRpdiI6ZS50YWc7aWYoZS5pZCYmZy5pZD09bnVsbCl7Zy5pZD1lLmlkO312YXIgZD1lLmF0dHJpYnV0ZXM7aWYoZCl7Zm9yKHZhciBmPTAsYz1kLmxlbmd0aDtmPGM7ZisrKXt2YXIgYT1kW2ZdO2lmKGdbYS5rZXldIT1udWxsKXtjb250aW51ZTsKfWlmKGEudmFsdWUhPW51bGwmJmEub3BlcmF0b3I9PSI9Iil7Z1thLmtleV09YS52YWx1ZTt9ZWxzZXtpZighYS52YWx1ZSYmIWEub3BlcmF0b3Ipe2dbYS5rZXldPXRydWU7fX19fWlmKGUuY2xhc3NMaXN0JiZnWyJjbGFzcyJdPT1udWxsKXtnWyJjbGFzcyJdPWUuY2xhc3NMaXN0LmpvaW4oIiAiKTsKfX1yZXR1cm4gZG9jdW1lbnQubmV3RWxlbWVudChiLGcpO307aWYoQnJvd3Nlci5FbGVtZW50KXtFbGVtZW50LnByb3RvdHlwZT1Ccm93c2VyLkVsZW1lbnQucHJvdG90eXBlO31uZXcgVHlwZSgiRWxlbWVudCIsRWxlbWVudCkubWlycm9yKGZ1bmN0aW9uKGEpe2lmKEFycmF5LnByb3RvdHlwZVthXSl7cmV0dXJuOwp9dmFyIGI9e307YlthXT1mdW5jdGlvbigpe3ZhciBoPVtdLGU9YXJndW1lbnRzLGo9dHJ1ZTtmb3IodmFyIGc9MCxkPXRoaXMubGVuZ3RoO2c8ZDtnKyspe3ZhciBmPXRoaXNbZ10sYz1oW2ddPWZbYV0uYXBwbHkoZixlKTtqPShqJiZ0eXBlT2YoYyk9PSJlbGVtZW50Iik7Cn1yZXR1cm4oaik/bmV3IEVsZW1lbnRzKGgpOmg7fTtFbGVtZW50cy5pbXBsZW1lbnQoYik7fSk7aWYoIUJyb3dzZXIuRWxlbWVudCl7RWxlbWVudC5wYXJlbnQ9T2JqZWN0O0VsZW1lbnQuUHJvdG90eXBlPXsiJGZhbWlseSI6RnVuY3Rpb24uZnJvbSgiZWxlbWVudCIpLmhpZGUoKX07CkVsZW1lbnQubWlycm9yKGZ1bmN0aW9uKGEsYil7RWxlbWVudC5Qcm90b3R5cGVbYV09Yjt9KTt9RWxlbWVudC5Db25zdHJ1Y3RvcnM9e307RWxlbWVudC5Db25zdHJ1Y3RvcnM9bmV3IEhhc2g7dmFyIElGcmFtZT1uZXcgVHlwZSgiSUZyYW1lIixmdW5jdGlvbigpe3ZhciBlPUFycmF5LmxpbmsoYXJndW1lbnRzLHtwcm9wZXJ0aWVzOlR5cGUuaXNPYmplY3QsaWZyYW1lOmZ1bmN0aW9uKGYpe3JldHVybihmIT1udWxsKTsKfX0pO3ZhciBjPWUucHJvcGVydGllc3x8e30sYjtpZihlLmlmcmFtZSl7Yj1kb2N1bWVudC5pZChlLmlmcmFtZSk7fXZhciBkPWMub25sb2FkfHxmdW5jdGlvbigpe307ZGVsZXRlIGMub25sb2FkO2MuaWQ9Yy5uYW1lPVtjLmlkLGMubmFtZSxiPyhiLmlkfHxiLm5hbWUpOiJJRnJhbWVfIitTdHJpbmcudW5pcXVlSUQoKV0ucGljaygpOwpiPW5ldyBFbGVtZW50KGJ8fCJpZnJhbWUiLGMpO3ZhciBhPWZ1bmN0aW9uKCl7ZC5jYWxsKGIuY29udGVudFdpbmRvdyk7fTtpZih3aW5kb3cuZnJhbWVzW2MuaWRdKXthKCk7fWVsc2V7Yi5hZGRMaXN0ZW5lcigibG9hZCIsYSk7fXJldHVybiBiO30pO3ZhciBFbGVtZW50cz10aGlzLkVsZW1lbnRzPWZ1bmN0aW9uKGEpe2lmKGEmJmEubGVuZ3RoKXt2YXIgZT17fSxkOwpmb3IodmFyIGM9MDtkPWFbYysrXTspe3ZhciBiPVNsaWNrLnVpZE9mKGQpO2lmKCFlW2JdKXtlW2JdPXRydWU7dGhpcy5wdXNoKGQpO319fX07RWxlbWVudHMucHJvdG90eXBlPXtsZW5ndGg6MH07RWxlbWVudHMucGFyZW50PUFycmF5O25ldyBUeXBlKCJFbGVtZW50cyIsRWxlbWVudHMpLmltcGxlbWVudCh7ZmlsdGVyOmZ1bmN0aW9uKGEsYil7aWYoIWEpe3JldHVybiB0aGlzOwp9cmV0dXJuIG5ldyBFbGVtZW50cyhBcnJheS5maWx0ZXIodGhpcywodHlwZU9mKGEpPT0ic3RyaW5nIik/ZnVuY3Rpb24oYyl7cmV0dXJuIGMubWF0Y2goYSk7fTphLGIpKTt9LnByb3RlY3QoKSxwdXNoOmZ1bmN0aW9uKCl7dmFyIGQ9dGhpcy5sZW5ndGg7Zm9yKHZhciBiPTAsYT1hcmd1bWVudHMubGVuZ3RoOwpiPGE7YisrKXt2YXIgYz1kb2N1bWVudC5pZChhcmd1bWVudHNbYl0pO2lmKGMpe3RoaXNbZCsrXT1jO319cmV0dXJuKHRoaXMubGVuZ3RoPWQpO30ucHJvdGVjdCgpLHVuc2hpZnQ6ZnVuY3Rpb24oKXt2YXIgYj1bXTtmb3IodmFyIGM9MCxhPWFyZ3VtZW50cy5sZW5ndGg7CmM8YTtjKyspe3ZhciBkPWRvY3VtZW50LmlkKGFyZ3VtZW50c1tjXSk7aWYoZCl7Yi5wdXNoKGQpO319cmV0dXJuIEFycmF5LnByb3RvdHlwZS51bnNoaWZ0LmFwcGx5KHRoaXMsYik7fS5wcm90ZWN0KCksY29uY2F0OmZ1bmN0aW9uKCl7dmFyIGI9bmV3IEVsZW1lbnRzKHRoaXMpOwpmb3IodmFyIGM9MCxhPWFyZ3VtZW50cy5sZW5ndGg7YzxhO2MrKyl7dmFyIGQ9YXJndW1lbnRzW2NdO2lmKFR5cGUuaXNFbnVtZXJhYmxlKGQpKXtiLmFwcGVuZChkKTt9ZWxzZXtiLnB1c2goZCk7fX1yZXR1cm4gYjt9LnByb3RlY3QoKSxhcHBlbmQ6ZnVuY3Rpb24oYyl7Zm9yKHZhciBiPTAsYT1jLmxlbmd0aDsKYjxhO2IrKyl7dGhpcy5wdXNoKGNbYl0pO31yZXR1cm4gdGhpczt9LnByb3RlY3QoKSxlbXB0eTpmdW5jdGlvbigpe3doaWxlKHRoaXMubGVuZ3RoKXtkZWxldGUgdGhpc1stLXRoaXMubGVuZ3RoXTt9cmV0dXJuIHRoaXM7fS5wcm90ZWN0KCl9KTtFbGVtZW50cy5hbGlhcygiZXh0ZW5kIiwiYXBwZW5kIik7CihmdW5jdGlvbigpe3ZhciBnPUFycmF5LnByb3RvdHlwZS5zcGxpY2UsYj17IjAiOjAsIjEiOjEsbGVuZ3RoOjJ9O2cuY2FsbChiLDEsMSk7aWYoYlsxXT09MSl7RWxlbWVudHMuaW1wbGVtZW50KCJzcGxpY2UiLGZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5sZW5ndGg7Zy5hcHBseSh0aGlzLGFyZ3VtZW50cyk7CndoaWxlKGU+PXRoaXMubGVuZ3RoKXtkZWxldGUgdGhpc1tlLS1dO31yZXR1cm4gdGhpczt9LnByb3RlY3QoKSk7fUVsZW1lbnRzLmltcGxlbWVudChBcnJheS5wcm90b3R5cGUpO0FycmF5Lm1pcnJvcihFbGVtZW50cyk7dmFyIGY7dHJ5e3ZhciBhPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIjxpbnB1dCBuYW1lPXg+Iik7CmY9KGEubmFtZT09IngiKTt9Y2F0Y2goYyl7fXZhciBkPWZ1bmN0aW9uKGUpe3JldHVybigiIitlKS5yZXBsYWNlKC8mL2csIiZhbXA7IikucmVwbGFjZSgvIi9nLCImcXVvdDsiKTt9O0RvY3VtZW50LmltcGxlbWVudCh7bmV3RWxlbWVudDpmdW5jdGlvbihlLGgpe2lmKGgmJmguY2hlY2tlZCE9bnVsbCl7aC5kZWZhdWx0Q2hlY2tlZD1oLmNoZWNrZWQ7Cn1pZihmJiZoKXtlPSI8IitlO2lmKGgubmFtZSl7ZSs9JyBuYW1lPSInK2QoaC5uYW1lKSsnIic7fWlmKGgudHlwZSl7ZSs9JyB0eXBlPSInK2QoaC50eXBlKSsnIic7fWUrPSI+IjtkZWxldGUgaC5uYW1lO2RlbGV0ZSBoLnR5cGU7fXJldHVybiB0aGlzLmlkKHRoaXMuY3JlYXRlRWxlbWVudChlKSkuc2V0KGgpOwp9fSk7fSkoKTtEb2N1bWVudC5pbXBsZW1lbnQoe25ld1RleHROb2RlOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNyZWF0ZVRleHROb2RlKGEpO30sZ2V0RG9jdW1lbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpczt9LGdldFdpbmRvdzpmdW5jdGlvbigpe3JldHVybiB0aGlzLndpbmRvdzsKfSxpZDooZnVuY3Rpb24oKXt2YXIgYT17c3RyaW5nOmZ1bmN0aW9uKGQsYyxiKXtkPVNsaWNrLmZpbmQoYiwiIyIrZC5yZXBsYWNlKC8oXFcpL2csIlxcJDEiKSk7cmV0dXJuKGQpP2EuZWxlbWVudChkLGMpOm51bGw7fSxlbGVtZW50OmZ1bmN0aW9uKGIsYyl7JHVpZChiKTsKaWYoIWMmJiFiLiRmYW1pbHkmJiEoL14oPzpvYmplY3R8ZW1iZWQpJC9pKS50ZXN0KGIudGFnTmFtZSkpe09iamVjdC5hcHBlbmQoYixFbGVtZW50LlByb3RvdHlwZSk7fXJldHVybiBiO30sb2JqZWN0OmZ1bmN0aW9uKGMsZCxiKXtpZihjLnRvRWxlbWVudCl7cmV0dXJuIGEuZWxlbWVudChjLnRvRWxlbWVudChiKSxkKTsKfXJldHVybiBudWxsO319O2EudGV4dG5vZGU9YS53aGl0ZXNwYWNlPWEud2luZG93PWEuZG9jdW1lbnQ9ZnVuY3Rpb24oYil7cmV0dXJuIGI7fTtyZXR1cm4gZnVuY3Rpb24oYyxlLGQpe2lmKGMmJmMuJGZhbWlseSYmYy51aWQpe3JldHVybiBjO312YXIgYj10eXBlT2YoYyk7CnJldHVybihhW2JdKT9hW2JdKGMsZSxkfHxkb2N1bWVudCk6bnVsbDt9O30pKCl9KTtpZih3aW5kb3cuJD09bnVsbCl7V2luZG93LmltcGxlbWVudCgiJCIsZnVuY3Rpb24oYSxiKXtyZXR1cm4gZG9jdW1lbnQuaWQoYSxiLHRoaXMuZG9jdW1lbnQpO30pO31XaW5kb3cuaW1wbGVtZW50KHtnZXREb2N1bWVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRvY3VtZW50Owp9LGdldFdpbmRvdzpmdW5jdGlvbigpe3JldHVybiB0aGlzO319KTtbRG9jdW1lbnQsRWxlbWVudF0uaW52b2tlKCJpbXBsZW1lbnQiLHtnZXRFbGVtZW50czpmdW5jdGlvbihhKXtyZXR1cm4gU2xpY2suc2VhcmNoKHRoaXMsYSxuZXcgRWxlbWVudHMpO30sZ2V0RWxlbWVudDpmdW5jdGlvbihhKXtyZXR1cm4gZG9jdW1lbnQuaWQoU2xpY2suZmluZCh0aGlzLGEpKTsKfX0pOyhmdW5jdGlvbihiLGQsYSl7dGhpcy5TZWxlY3RvcnM9e307dmFyIGU9dGhpcy5TZWxlY3RvcnMuUHNldWRvPW5ldyBIYXNoKCk7dmFyIGM9ZnVuY3Rpb24oKXtmb3IodmFyIGYgaW4gZSl7aWYoZS5oYXNPd25Qcm9wZXJ0eShmKSl7U2xpY2suZGVmaW5lUHNldWRvKGYsZVtmXSk7CmRlbGV0ZSBlW2ZdO319fTtTbGljay5zZWFyY2g9ZnVuY3Rpb24oZyxoLGYpe2MoKTtyZXR1cm4gYi5jYWxsKHRoaXMsZyxoLGYpO307U2xpY2suZmluZD1mdW5jdGlvbihmLGcpe2MoKTtyZXR1cm4gZC5jYWxsKHRoaXMsZixnKTt9O1NsaWNrLm1hdGNoPWZ1bmN0aW9uKGcsZil7YygpOwpyZXR1cm4gYS5jYWxsKHRoaXMsZyxmKTt9O30pKFNsaWNrLnNlYXJjaCxTbGljay5maW5kLFNsaWNrLm1hdGNoKTtpZih3aW5kb3cuJCQ9PW51bGwpe1dpbmRvdy5pbXBsZW1lbnQoIiQkIixmdW5jdGlvbihhKXt2YXIgZj1uZXcgRWxlbWVudHM7aWYoYXJndW1lbnRzLmxlbmd0aD09MSYmdHlwZW9mIGE9PSJzdHJpbmciKXtyZXR1cm4gU2xpY2suc2VhcmNoKHRoaXMuZG9jdW1lbnQsYSxmKTsKfXZhciBjPUFycmF5LmZsYXR0ZW4oYXJndW1lbnRzKTtmb3IodmFyIGQ9MCxiPWMubGVuZ3RoO2Q8YjtkKyspe3ZhciBlPWNbZF07c3dpdGNoKHR5cGVPZihlKSl7Y2FzZSJlbGVtZW50IjpmLnB1c2goZSk7YnJlYWs7Y2FzZSJzdHJpbmciOlNsaWNrLnNlYXJjaCh0aGlzLmRvY3VtZW50LGUsZik7Cn19cmV0dXJuIGY7fSk7fWlmKHdpbmRvdy4kJD09bnVsbCl7V2luZG93LmltcGxlbWVudCgiJCQiLGZ1bmN0aW9uKGEpe2lmKGFyZ3VtZW50cy5sZW5ndGg9PTEpe2lmKHR5cGVvZiBhPT0ic3RyaW5nIil7cmV0dXJuIFNsaWNrLnNlYXJjaCh0aGlzLmRvY3VtZW50LGEsbmV3IEVsZW1lbnRzKTsKfWVsc2V7aWYoVHlwZS5pc0VudW1lcmFibGUoYSkpe3JldHVybiBuZXcgRWxlbWVudHMoYSk7fX19cmV0dXJuIG5ldyBFbGVtZW50cyhhcmd1bWVudHMpO30pO30oZnVuY3Rpb24oKXt2YXIgaz17fSxpPXt9O3ZhciBuPXtpbnB1dDoiY2hlY2tlZCIsb3B0aW9uOiJzZWxlY3RlZCIsdGV4dGFyZWE6InZhbHVlIn07CnZhciBlPWZ1bmN0aW9uKHApe3JldHVybihpW3BdfHwoaVtwXT17fSkpO307dmFyIGo9ZnVuY3Rpb24ocSl7dmFyIHA9cS51aWQ7aWYocS5yZW1vdmVFdmVudHMpe3EucmVtb3ZlRXZlbnRzKCk7fWlmKHEuY2xlYXJBdHRyaWJ1dGVzKXtxLmNsZWFyQXR0cmlidXRlcygpOwp9aWYocCE9bnVsbCl7ZGVsZXRlIGtbcF07ZGVsZXRlIGlbcF07fXJldHVybiBxO307dmFyIG89WyJkZWZhdWx0VmFsdWUiLCJhY2Nlc3NLZXkiLCJjZWxsUGFkZGluZyIsImNlbGxTcGFjaW5nIiwiY29sU3BhbiIsImZyYW1lQm9yZGVyIiwibWF4TGVuZ3RoIiwicmVhZE9ubHkiLCJyb3dTcGFuIiwidGFiSW5kZXgiLCJ1c2VNYXAiXTsKdmFyIGQ9WyJjb21wYWN0Iiwibm93cmFwIiwiaXNtYXAiLCJkZWNsYXJlIiwibm9zaGFkZSIsImNoZWNrZWQiLCJkaXNhYmxlZCIsInJlYWRPbmx5IiwibXVsdGlwbGUiLCJzZWxlY3RlZCIsIm5vcmVzaXplIiwiZGVmZXIiLCJkZWZhdWx0Q2hlY2tlZCJdO3ZhciBnPXtodG1sOiJpbm5lckhUTUwiLCJjbGFzcyI6ImNsYXNzTmFtZSIsImZvciI6Imh0bWxGb3IiLHRleHQ6KGZ1bmN0aW9uKCl7dmFyIHA9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CnJldHVybihwLnRleHRDb250ZW50PT1udWxsKT8iaW5uZXJUZXh0IjoidGV4dENvbnRlbnQiO30pKCl9O3ZhciBtPVsidHlwZSJdO3ZhciBoPVsidmFsdWUiLCJkZWZhdWx0VmFsdWUiXTt2YXIgbD0vXig/OmhyZWZ8c3JjfHVzZW1hcCkkL2k7ZD1kLmFzc29jaWF0ZShkKTsKbz1vLmFzc29jaWF0ZShvLm1hcChTdHJpbmcudG9Mb3dlckNhc2UpKTttPW0uYXNzb2NpYXRlKG0pO09iamVjdC5hcHBlbmQoZyxoLmFzc29jaWF0ZShoKSk7dmFyIGM9e2JlZm9yZTpmdW5jdGlvbihxLHApe3ZhciByPXAucGFyZW50Tm9kZTtpZihyKXtyLmluc2VydEJlZm9yZShxLHApOwp9fSxhZnRlcjpmdW5jdGlvbihxLHApe3ZhciByPXAucGFyZW50Tm9kZTtpZihyKXtyLmluc2VydEJlZm9yZShxLHAubmV4dFNpYmxpbmcpO319LGJvdHRvbTpmdW5jdGlvbihxLHApe3AuYXBwZW5kQ2hpbGQocSk7fSx0b3A6ZnVuY3Rpb24ocSxwKXtwLmluc2VydEJlZm9yZShxLHAuZmlyc3RDaGlsZCk7Cn19O2MuaW5zaWRlPWMuYm90dG9tO09iamVjdC5lYWNoKGMsZnVuY3Rpb24ocSxyKXtyPXIuY2FwaXRhbGl6ZSgpO3ZhciBwPXt9O3BbImluamVjdCIrcl09ZnVuY3Rpb24ocyl7cSh0aGlzLGRvY3VtZW50LmlkKHMsdHJ1ZSkpO3JldHVybiB0aGlzO307cFsiZ3JhYiIrcl09ZnVuY3Rpb24ocyl7cShkb2N1bWVudC5pZChzLHRydWUpLHRoaXMpOwpyZXR1cm4gdGhpczt9O0VsZW1lbnQuaW1wbGVtZW50KHApO30pO3ZhciBiPWZ1bmN0aW9uKHMscil7aWYoIXMpe3JldHVybiByO31zPU9iamVjdC5jbG9uZShTbGljay5wYXJzZShzKSk7dmFyIHE9cy5leHByZXNzaW9ucztmb3IodmFyIHA9cS5sZW5ndGg7cC0tOyl7cVtwXVswXS5jb21iaW5hdG9yPXI7Cn1yZXR1cm4gczt9O0VsZW1lbnQuaW1wbGVtZW50KHtzZXQ6ZnVuY3Rpb24ocixxKXt2YXIgcD1FbGVtZW50LlByb3BlcnRpZXNbcl07KHAmJnAuc2V0KT9wLnNldC5jYWxsKHRoaXMscSk6dGhpcy5zZXRQcm9wZXJ0eShyLHEpO30ub3ZlcmxvYWRTZXR0ZXIoKSxnZXQ6ZnVuY3Rpb24ocSl7dmFyIHA9RWxlbWVudC5Qcm9wZXJ0aWVzW3FdOwpyZXR1cm4ocCYmcC5nZXQpP3AuZ2V0LmFwcGx5KHRoaXMpOnRoaXMuZ2V0UHJvcGVydHkocSk7fS5vdmVybG9hZEdldHRlcigpLGVyYXNlOmZ1bmN0aW9uKHEpe3ZhciBwPUVsZW1lbnQuUHJvcGVydGllc1txXTsocCYmcC5lcmFzZSk/cC5lcmFzZS5hcHBseSh0aGlzKTp0aGlzLnJlbW92ZVByb3BlcnR5KHEpOwpyZXR1cm4gdGhpczt9LHNldFByb3BlcnR5OmZ1bmN0aW9uKHEscil7cT1vW3FdfHxxO2lmKHI9PW51bGwpe3JldHVybiB0aGlzLnJlbW92ZVByb3BlcnR5KHEpO312YXIgcD1nW3FdOyhwKT90aGlzW3BdPXI6KGRbcV0pP3RoaXNbcV09ISFyOnRoaXMuc2V0QXR0cmlidXRlKHEsIiIrcik7CnJldHVybiB0aGlzO30sc2V0UHJvcGVydGllczpmdW5jdGlvbihwKXtmb3IodmFyIHEgaW4gcCl7dGhpcy5zZXRQcm9wZXJ0eShxLHBbcV0pO31yZXR1cm4gdGhpczt9LGdldFByb3BlcnR5OmZ1bmN0aW9uKHEpe3E9b1txXXx8cTt2YXIgcD1nW3FdfHxtW3FdO3JldHVybihwKT90aGlzW3BdOihkW3FdKT8hIXRoaXNbcV06KGwudGVzdChxKT90aGlzLmdldEF0dHJpYnV0ZShxLDIpOihwPXRoaXMuZ2V0QXR0cmlidXRlTm9kZShxKSk/cC5ub2RlVmFsdWU6bnVsbCl8fG51bGw7Cn0sZ2V0UHJvcGVydGllczpmdW5jdGlvbigpe3ZhciBwPUFycmF5LmZyb20oYXJndW1lbnRzKTtyZXR1cm4gcC5tYXAodGhpcy5nZXRQcm9wZXJ0eSx0aGlzKS5hc3NvY2lhdGUocCk7fSxyZW1vdmVQcm9wZXJ0eTpmdW5jdGlvbihxKXtxPW9bcV18fHE7dmFyIHA9Z1txXTsKKHApP3RoaXNbcF09IiI6KGRbcV0pP3RoaXNbcV09ZmFsc2U6dGhpcy5yZW1vdmVBdHRyaWJ1dGUocSk7cmV0dXJuIHRoaXM7fSxyZW1vdmVQcm9wZXJ0aWVzOmZ1bmN0aW9uKCl7QXJyYXkuZWFjaChhcmd1bWVudHMsdGhpcy5yZW1vdmVQcm9wZXJ0eSx0aGlzKTtyZXR1cm4gdGhpczsKfSxoYXNDbGFzczpmdW5jdGlvbihwKXtyZXR1cm4gdGhpcy5jbGFzc05hbWUuY2xlYW4oKS5jb250YWlucyhwLCIgIik7fSxhZGRDbGFzczpmdW5jdGlvbihwKXtpZighdGhpcy5oYXNDbGFzcyhwKSl7dGhpcy5jbGFzc05hbWU9KHRoaXMuY2xhc3NOYW1lKyIgIitwKS5jbGVhbigpOwp9cmV0dXJuIHRoaXM7fSxyZW1vdmVDbGFzczpmdW5jdGlvbihwKXt0aGlzLmNsYXNzTmFtZT10aGlzLmNsYXNzTmFtZS5yZXBsYWNlKG5ldyBSZWdFeHAoIihefFxccykiK3ArIig/Olxcc3wkKSIpLCIkMSIpO3JldHVybiB0aGlzO30sdG9nZ2xlQ2xhc3M6ZnVuY3Rpb24ocCxxKXtpZihxPT1udWxsKXtxPSF0aGlzLmhhc0NsYXNzKHApOwp9cmV0dXJuKHEpP3RoaXMuYWRkQ2xhc3MocCk6dGhpcy5yZW1vdmVDbGFzcyhwKTt9LGFkb3B0OmZ1bmN0aW9uKCl7dmFyIHM9dGhpcyxwLHU9QXJyYXkuZmxhdHRlbihhcmd1bWVudHMpLHQ9dS5sZW5ndGg7aWYodD4xKXtzPXA9ZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpOwp9Zm9yKHZhciByPTA7cjx0O3IrKyl7dmFyIHE9ZG9jdW1lbnQuaWQodVtyXSx0cnVlKTtpZihxKXtzLmFwcGVuZENoaWxkKHEpO319aWYocCl7dGhpcy5hcHBlbmRDaGlsZChwKTt9cmV0dXJuIHRoaXM7fSxhcHBlbmRUZXh0OmZ1bmN0aW9uKHEscCl7cmV0dXJuIHRoaXMuZ3JhYih0aGlzLmdldERvY3VtZW50KCkubmV3VGV4dE5vZGUocSkscCk7Cn0sZ3JhYjpmdW5jdGlvbihxLHApe2NbcHx8ImJvdHRvbSJdKGRvY3VtZW50LmlkKHEsdHJ1ZSksdGhpcyk7cmV0dXJuIHRoaXM7fSxpbmplY3Q6ZnVuY3Rpb24ocSxwKXtjW3B8fCJib3R0b20iXSh0aGlzLGRvY3VtZW50LmlkKHEsdHJ1ZSkpO3JldHVybiB0aGlzO30scmVwbGFjZXM6ZnVuY3Rpb24ocCl7cD1kb2N1bWVudC5pZChwLHRydWUpOwpwLnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKHRoaXMscCk7cmV0dXJuIHRoaXM7fSx3cmFwczpmdW5jdGlvbihxLHApe3E9ZG9jdW1lbnQuaWQocSx0cnVlKTtyZXR1cm4gdGhpcy5yZXBsYWNlcyhxKS5ncmFiKHEscCk7fSxnZXRQcmV2aW91czpmdW5jdGlvbihwKXtyZXR1cm4gZG9jdW1lbnQuaWQoU2xpY2suZmluZCh0aGlzLGIocCwiIX4iKSkpOwp9LGdldEFsbFByZXZpb3VzOmZ1bmN0aW9uKHApe3JldHVybiBTbGljay5zZWFyY2godGhpcyxiKHAsIiF+IiksbmV3IEVsZW1lbnRzKTt9LGdldE5leHQ6ZnVuY3Rpb24ocCl7cmV0dXJuIGRvY3VtZW50LmlkKFNsaWNrLmZpbmQodGhpcyxiKHAsIn4iKSkpO30sZ2V0QWxsTmV4dDpmdW5jdGlvbihwKXtyZXR1cm4gU2xpY2suc2VhcmNoKHRoaXMsYihwLCJ+IiksbmV3IEVsZW1lbnRzKTsKfSxnZXRGaXJzdDpmdW5jdGlvbihwKXtyZXR1cm4gZG9jdW1lbnQuaWQoU2xpY2suc2VhcmNoKHRoaXMsYihwLCI+IikpWzBdKTt9LGdldExhc3Q6ZnVuY3Rpb24ocCl7cmV0dXJuIGRvY3VtZW50LmlkKFNsaWNrLnNlYXJjaCh0aGlzLGIocCwiPiIpKS5nZXRMYXN0KCkpOwp9LGdldFBhcmVudDpmdW5jdGlvbihwKXtyZXR1cm4gZG9jdW1lbnQuaWQoU2xpY2suZmluZCh0aGlzLGIocCwiISIpKSk7fSxnZXRQYXJlbnRzOmZ1bmN0aW9uKHApe3JldHVybiBTbGljay5zZWFyY2godGhpcyxiKHAsIiEiKSxuZXcgRWxlbWVudHMpO30sZ2V0U2libGluZ3M6ZnVuY3Rpb24ocCl7cmV0dXJuIFNsaWNrLnNlYXJjaCh0aGlzLGIocCwifn4iKSxuZXcgRWxlbWVudHMpOwp9LGdldENoaWxkcmVuOmZ1bmN0aW9uKHApe3JldHVybiBTbGljay5zZWFyY2godGhpcyxiKHAsIj4iKSxuZXcgRWxlbWVudHMpO30sZ2V0V2luZG93OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub3duZXJEb2N1bWVudC53aW5kb3c7fSxnZXREb2N1bWVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLm93bmVyRG9jdW1lbnQ7Cn0sZ2V0RWxlbWVudEJ5SWQ6ZnVuY3Rpb24ocCl7cmV0dXJuIGRvY3VtZW50LmlkKFNsaWNrLmZpbmQodGhpcywiIyIrKCIiK3ApLnJlcGxhY2UoLyhcVykvZywiXFwkMSIpKSk7fSxnZXRTZWxlY3RlZDpmdW5jdGlvbigpe3RoaXMuc2VsZWN0ZWRJbmRleDtyZXR1cm4gbmV3IEVsZW1lbnRzKEFycmF5LmZyb20odGhpcy5vcHRpb25zKS5maWx0ZXIoZnVuY3Rpb24ocCl7cmV0dXJuIHAuc2VsZWN0ZWQ7Cn0pKTt9LHRvUXVlcnlTdHJpbmc6ZnVuY3Rpb24oKXt2YXIgcD1bXTt0aGlzLmdldEVsZW1lbnRzKCJpbnB1dCwgc2VsZWN0LCB0ZXh0YXJlYSIpLmVhY2goZnVuY3Rpb24ocil7dmFyIHE9ci50eXBlO2lmKCFyLm5hbWV8fHIuZGlzYWJsZWR8fHE9PSJzdWJtaXQifHxxPT0icmVzZXQifHxxPT0iZmlsZSJ8fHE9PSJpbWFnZSIpe3JldHVybjsKfXZhciBzPShyLmdldCgidGFnIik9PSJzZWxlY3QiKT9yLmdldFNlbGVjdGVkKCkubWFwKGZ1bmN0aW9uKHQpe3JldHVybiBkb2N1bWVudC5pZCh0KS5nZXQoInZhbHVlIik7fSk6KChxPT0icmFkaW8ifHxxPT0iY2hlY2tib3giKSYmIXIuY2hlY2tlZCk/bnVsbDpyLmdldCgidmFsdWUiKTsKQXJyYXkuZnJvbShzKS5lYWNoKGZ1bmN0aW9uKHQpe2lmKHR5cGVvZiB0IT0idW5kZWZpbmVkIil7cC5wdXNoKGVuY29kZVVSSUNvbXBvbmVudChyLm5hbWUpKyI9IitlbmNvZGVVUklDb21wb25lbnQodCkpO319KTt9KTtyZXR1cm4gcC5qb2luKCImIik7fSxkZXN0cm95OmZ1bmN0aW9uKCl7dmFyIHA9aih0aGlzKS5nZXRFbGVtZW50c0J5VGFnTmFtZSgiKiIpOwpBcnJheS5lYWNoKHAsaik7RWxlbWVudC5kaXNwb3NlKHRoaXMpO3JldHVybiBudWxsO30sZW1wdHk6ZnVuY3Rpb24oKXtBcnJheS5mcm9tKHRoaXMuY2hpbGROb2RlcykuZWFjaChFbGVtZW50LmRpc3Bvc2UpO3JldHVybiB0aGlzO30sZGlzcG9zZTpmdW5jdGlvbigpe3JldHVybih0aGlzLnBhcmVudE5vZGUpP3RoaXMucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzKTp0aGlzOwp9LG1hdGNoOmZ1bmN0aW9uKHApe3JldHVybiAhcHx8U2xpY2subWF0Y2godGhpcyxwKTt9fSk7dmFyIGE9ZnVuY3Rpb24odCxzLHEpe2lmKCFxKXt0LnNldEF0dHJpYnV0ZU5vZGUoZG9jdW1lbnQuY3JlYXRlQXR0cmlidXRlKCJpZCIpKTt9aWYodC5jbGVhckF0dHJpYnV0ZXMpe3QuY2xlYXJBdHRyaWJ1dGVzKCk7CnQubWVyZ2VBdHRyaWJ1dGVzKHMpO3QucmVtb3ZlQXR0cmlidXRlKCJ1aWQiKTtpZih0Lm9wdGlvbnMpe3ZhciB1PXQub3B0aW9ucyxwPXMub3B0aW9ucztmb3IodmFyIHI9dS5sZW5ndGg7ci0tOyl7dVtyXS5zZWxlY3RlZD1wW3JdLnNlbGVjdGVkO319fXZhciB2PW5bcy50YWdOYW1lLnRvTG93ZXJDYXNlKCldOwppZih2JiZzW3ZdKXt0W3ZdPXNbdl07fX07RWxlbWVudC5pbXBsZW1lbnQoImNsb25lIixmdW5jdGlvbihyLHApe3I9ciE9PWZhbHNlO3ZhciB3PXRoaXMuY2xvbmVOb2RlKHIpLHE7aWYocil7dmFyIHM9dy5nZXRFbGVtZW50c0J5VGFnTmFtZSgiKiIpLHU9dGhpcy5nZXRFbGVtZW50c0J5VGFnTmFtZSgiKiIpOwpmb3IocT1zLmxlbmd0aDtxLS07KXthKHNbcV0sdVtxXSxwKTt9fWEodyx0aGlzLHApO2lmKEJyb3dzZXIuaWUpe3ZhciB0PXcuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIm9iamVjdCIpLHY9dGhpcy5nZXRFbGVtZW50c0J5VGFnTmFtZSgib2JqZWN0Iik7Zm9yKHE9dC5sZW5ndGg7CnEtLTspe3RbcV0ub3V0ZXJIVE1MPXZbcV0ub3V0ZXJIVE1MO319cmV0dXJuIGRvY3VtZW50LmlkKHcpO30pO3ZhciBmPXtjb250YWluczpmdW5jdGlvbihwKXtyZXR1cm4gU2xpY2suY29udGFpbnModGhpcyxwKTt9fTtpZighZG9jdW1lbnQuY29udGFpbnMpe0RvY3VtZW50LmltcGxlbWVudChmKTsKfWlmKCFkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKS5jb250YWlucyl7RWxlbWVudC5pbXBsZW1lbnQoZik7fUVsZW1lbnQuaW1wbGVtZW50KCJoYXNDaGlsZCIsZnVuY3Rpb24ocCl7cmV0dXJuIHRoaXMhPT1wJiZ0aGlzLmNvbnRhaW5zKHApO30pO1tFbGVtZW50LFdpbmRvdyxEb2N1bWVudF0uaW52b2tlKCJpbXBsZW1lbnQiLHthZGRMaXN0ZW5lcjpmdW5jdGlvbihzLHIpe2lmKHM9PSJ1bmxvYWQiKXt2YXIgcD1yLHE9dGhpczsKcj1mdW5jdGlvbigpe3EucmVtb3ZlTGlzdGVuZXIoInVubG9hZCIscik7cCgpO307fWVsc2V7a1skdWlkKHRoaXMpXT10aGlzO31pZih0aGlzLmFkZEV2ZW50TGlzdGVuZXIpe3RoaXMuYWRkRXZlbnRMaXN0ZW5lcihzLHIsISFhcmd1bWVudHNbMl0pO31lbHNle3RoaXMuYXR0YWNoRXZlbnQoIm9uIitzLHIpOwp9cmV0dXJuIHRoaXM7fSxyZW1vdmVMaXN0ZW5lcjpmdW5jdGlvbihxLHApe2lmKHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcil7dGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKHEscCwhIWFyZ3VtZW50c1syXSk7fWVsc2V7dGhpcy5kZXRhY2hFdmVudCgib24iK3EscCk7Cn1yZXR1cm4gdGhpczt9LHJldHJpZXZlOmZ1bmN0aW9uKHEscCl7dmFyIHM9ZSgkdWlkKHRoaXMpKSxyPXNbcV07aWYocCE9bnVsbCYmcj09bnVsbCl7cj1zW3FdPXA7fXJldHVybiByIT1udWxsP3I6bnVsbDt9LHN0b3JlOmZ1bmN0aW9uKHEscCl7dmFyIHI9ZSgkdWlkKHRoaXMpKTsKcltxXT1wO3JldHVybiB0aGlzO30sZWxpbWluYXRlOmZ1bmN0aW9uKHApe3ZhciBxPWUoJHVpZCh0aGlzKSk7ZGVsZXRlIHFbcF07cmV0dXJuIHRoaXM7fX0pO2lmKHdpbmRvdy5hdHRhY2hFdmVudCYmIXdpbmRvdy5hZGRFdmVudExpc3RlbmVyKXt3aW5kb3cuYWRkTGlzdGVuZXIoInVubG9hZCIsZnVuY3Rpb24oKXtPYmplY3QuZWFjaChrLGopOwppZih3aW5kb3cuQ29sbGVjdEdhcmJhZ2Upe0NvbGxlY3RHYXJiYWdlKCk7fX0pO319KSgpO0VsZW1lbnQuUHJvcGVydGllcz17fTtFbGVtZW50LlByb3BlcnRpZXM9bmV3IEhhc2g7RWxlbWVudC5Qcm9wZXJ0aWVzLnN0eWxlPXtzZXQ6ZnVuY3Rpb24oYSl7dGhpcy5zdHlsZS5jc3NUZXh0PWE7Cn0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3R5bGUuY3NzVGV4dDt9LGVyYXNlOmZ1bmN0aW9uKCl7dGhpcy5zdHlsZS5jc3NUZXh0PSIiO319O0VsZW1lbnQuUHJvcGVydGllcy50YWc9e2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnRhZ05hbWUudG9Mb3dlckNhc2UoKTsKfX07KGZ1bmN0aW9uKGEpe2lmKGEhPW51bGwpe0VsZW1lbnQuUHJvcGVydGllcy5tYXhsZW5ndGg9RWxlbWVudC5Qcm9wZXJ0aWVzLm1heExlbmd0aD17Z2V0OmZ1bmN0aW9uKCl7dmFyIGI9dGhpcy5nZXRBdHRyaWJ1dGUoIm1heExlbmd0aCIpO3JldHVybiBiPT1hP251bGw6YjsKfX07fX0pKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImlucHV0IikuZ2V0QXR0cmlidXRlKCJtYXhMZW5ndGgiKSk7RWxlbWVudC5Qcm9wZXJ0aWVzLmh0bWw9KGZ1bmN0aW9uKCl7dmFyIGM9RnVuY3Rpb24uYXR0ZW1wdChmdW5jdGlvbigpe3ZhciBlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInRhYmxlIik7CmUuaW5uZXJIVE1MPSI8dHI+PHRkPjwvdGQ+PC90cj4iO30pO3ZhciBkPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO3ZhciBhPXt0YWJsZTpbMSwiPHRhYmxlPiIsIjwvdGFibGU+Il0sc2VsZWN0OlsxLCI8c2VsZWN0PiIsIjwvc2VsZWN0PiJdLHRib2R5OlsyLCI8dGFibGU+PHRib2R5PiIsIjwvdGJvZHk+PC90YWJsZT4iXSx0cjpbMywiPHRhYmxlPjx0Ym9keT48dHI+IiwiPC90cj48L3Rib2R5PjwvdGFibGU+Il19OwphLnRoZWFkPWEudGZvb3Q9YS50Ym9keTt2YXIgYj17c2V0OmZ1bmN0aW9uKCl7dmFyIGY9QXJyYXkuZmxhdHRlbihhcmd1bWVudHMpLmpvaW4oIiIpO3ZhciBnPSghYyYmYVt0aGlzLmdldCgidGFnIildKTtpZihnKXt2YXIgaD1kO2guaW5uZXJIVE1MPWdbMV0rZitnWzJdOwpmb3IodmFyIGU9Z1swXTtlLS07KXtoPWguZmlyc3RDaGlsZDt9dGhpcy5lbXB0eSgpLmFkb3B0KGguY2hpbGROb2Rlcyk7fWVsc2V7dGhpcy5pbm5lckhUTUw9Zjt9fX07Yi5lcmFzZT1iLnNldDtyZXR1cm4gYjt9KSgpOyhmdW5jdGlvbigpe3ZhciBjPWRvY3VtZW50Lmh0bWw7CkVsZW1lbnQuUHJvcGVydGllcy5zdHlsZXM9e3NldDpmdW5jdGlvbihmKXt0aGlzLnNldFN0eWxlcyhmKTt9fTt2YXIgZT0oYy5zdHlsZS5vcGFjaXR5IT1udWxsKTt2YXIgZD0vYWxwaGFcKG9wYWNpdHk9KFtcZC5dKylcKS9pO3ZhciBiPWZ1bmN0aW9uKGcsZil7aWYoIWcuY3VycmVudFN0eWxlfHwhZy5jdXJyZW50U3R5bGUuaGFzTGF5b3V0KXtnLnN0eWxlLnpvb209MTsKfWlmKGUpe2cuc3R5bGUub3BhY2l0eT1mO31lbHNle2Y9KGYqMTAwKS5saW1pdCgwLDEwMCkucm91bmQoKTtmPShmPT0xMDApPyIiOiJhbHBoYShvcGFjaXR5PSIrZisiKSI7dmFyIGg9Zy5zdHlsZS5maWx0ZXJ8fGcuZ2V0Q29tcHV0ZWRTdHlsZSgiZmlsdGVyIil8fCIiOwpnLnN0eWxlLmZpbHRlcj1kLnRlc3QoaCk/aC5yZXBsYWNlKGQsZik6aCtmO319O0VsZW1lbnQuUHJvcGVydGllcy5vcGFjaXR5PXtzZXQ6ZnVuY3Rpb24oZyl7dmFyIGY9dGhpcy5zdHlsZS52aXNpYmlsaXR5O2lmKGc9PTAmJmYhPSJoaWRkZW4iKXt0aGlzLnN0eWxlLnZpc2liaWxpdHk9ImhpZGRlbiI7Cn1lbHNle2lmKGchPTAmJmYhPSJ2aXNpYmxlIil7dGhpcy5zdHlsZS52aXNpYmlsaXR5PSJ2aXNpYmxlIjt9fWIodGhpcyxnKTt9LGdldDooZSk/ZnVuY3Rpb24oKXt2YXIgZj10aGlzLnN0eWxlLm9wYWNpdHl8fHRoaXMuZ2V0Q29tcHV0ZWRTdHlsZSgib3BhY2l0eSIpOwpyZXR1cm4oZj09IiIpPzE6Zjt9OmZ1bmN0aW9uKCl7dmFyIGYsZz0odGhpcy5zdHlsZS5maWx0ZXJ8fHRoaXMuZ2V0Q29tcHV0ZWRTdHlsZSgiZmlsdGVyIikpO2lmKGcpe2Y9Zy5tYXRjaChkKTt9cmV0dXJuKGY9PW51bGx8fGc9PW51bGwpPzE6KGZbMV0vMTAwKTt9fTsKdmFyIGE9KGMuc3R5bGUuY3NzRmxvYXQ9PW51bGwpPyJzdHlsZUZsb2F0IjoiY3NzRmxvYXQiO0VsZW1lbnQuaW1wbGVtZW50KHtnZXRDb21wdXRlZFN0eWxlOmZ1bmN0aW9uKGgpe2lmKHRoaXMuY3VycmVudFN0eWxlKXtyZXR1cm4gdGhpcy5jdXJyZW50U3R5bGVbaC5jYW1lbENhc2UoKV07Cn12YXIgZz1FbGVtZW50LmdldERvY3VtZW50KHRoaXMpLmRlZmF1bHRWaWV3LGY9Zz9nLmdldENvbXB1dGVkU3R5bGUodGhpcyxudWxsKTpudWxsO3JldHVybihmKT9mLmdldFByb3BlcnR5VmFsdWUoKGg9PWEpPyJmbG9hdCI6aC5oeXBoZW5hdGUoKSk6bnVsbDt9LHNldE9wYWNpdHk6ZnVuY3Rpb24oZil7Yih0aGlzLGYpOwpyZXR1cm4gdGhpczt9LGdldE9wYWNpdHk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXQoIm9wYWNpdHkiKTt9LHNldFN0eWxlOmZ1bmN0aW9uKGcsZil7c3dpdGNoKGcpe2Nhc2Uib3BhY2l0eSI6cmV0dXJuIHRoaXMuc2V0KCJvcGFjaXR5IixwYXJzZUZsb2F0KGYpKTsKY2FzZSJmbG9hdCI6Zz1hO31nPWcuY2FtZWxDYXNlKCk7aWYodHlwZU9mKGYpIT0ic3RyaW5nIil7dmFyIGg9KEVsZW1lbnQuU3R5bGVzW2ddfHwiQCIpLnNwbGl0KCIgIik7Zj1BcnJheS5mcm9tKGYpLm1hcChmdW5jdGlvbihrLGope2lmKCFoW2pdKXtyZXR1cm4iIjsKfXJldHVybih0eXBlT2Yoayk9PSJudW1iZXIiKT9oW2pdLnJlcGxhY2UoIkAiLE1hdGgucm91bmQoaykpOms7fSkuam9pbigiICIpO31lbHNle2lmKGY9PVN0cmluZyhOdW1iZXIoZikpKXtmPU1hdGgucm91bmQoZik7fX10aGlzLnN0eWxlW2ddPWY7cmV0dXJuIHRoaXM7Cn0sZ2V0U3R5bGU6ZnVuY3Rpb24obCl7c3dpdGNoKGwpe2Nhc2Uib3BhY2l0eSI6cmV0dXJuIHRoaXMuZ2V0KCJvcGFjaXR5Iik7Y2FzZSJmbG9hdCI6bD1hO31sPWwuY2FtZWxDYXNlKCk7dmFyIGY9dGhpcy5zdHlsZVtsXTtpZighZnx8bD09InpJbmRleCIpe2Y9W107CmZvcih2YXIgayBpbiBFbGVtZW50LlNob3J0U3R5bGVzKXtpZihsIT1rKXtjb250aW51ZTt9Zm9yKHZhciBqIGluIEVsZW1lbnQuU2hvcnRTdHlsZXNba10pe2YucHVzaCh0aGlzLmdldFN0eWxlKGopKTt9cmV0dXJuIGYuam9pbigiICIpO31mPXRoaXMuZ2V0Q29tcHV0ZWRTdHlsZShsKTsKfWlmKGYpe2Y9U3RyaW5nKGYpO3ZhciBoPWYubWF0Y2goL3JnYmE/XChbXGRccyxdK1wpLyk7aWYoaCl7Zj1mLnJlcGxhY2UoaFswXSxoWzBdLnJnYlRvSGV4KCkpO319aWYoQnJvd3Nlci5vcGVyYXx8KEJyb3dzZXIuaWUmJmlzTmFOKHBhcnNlRmxvYXQoZikpKSl7aWYoKC9eKGhlaWdodHx3aWR0aCkkLykudGVzdChsKSl7dmFyIGc9KGw9PSJ3aWR0aCIpP1sibGVmdCIsInJpZ2h0Il06WyJ0b3AiLCJib3R0b20iXSxpPTA7CmcuZWFjaChmdW5jdGlvbihtKXtpKz10aGlzLmdldFN0eWxlKCJib3JkZXItIittKyItd2lkdGgiKS50b0ludCgpK3RoaXMuZ2V0U3R5bGUoInBhZGRpbmctIittKS50b0ludCgpO30sdGhpcyk7cmV0dXJuIHRoaXNbIm9mZnNldCIrbC5jYXBpdGFsaXplKCldLWkrInB4IjsKfWlmKEJyb3dzZXIub3BlcmEmJlN0cmluZyhmKS5pbmRleE9mKCJweCIpIT0tMSl7cmV0dXJuIGY7fWlmKCgvXmJvcmRlciguKylXaWR0aHxtYXJnaW58cGFkZGluZy8pLnRlc3QobCkpe3JldHVybiIwcHgiO319cmV0dXJuIGY7fSxzZXRTdHlsZXM6ZnVuY3Rpb24oZyl7Zm9yKHZhciBmIGluIGcpe3RoaXMuc2V0U3R5bGUoZixnW2ZdKTsKfXJldHVybiB0aGlzO30sZ2V0U3R5bGVzOmZ1bmN0aW9uKCl7dmFyIGY9e307QXJyYXkuZmxhdHRlbihhcmd1bWVudHMpLmVhY2goZnVuY3Rpb24oZyl7ZltnXT10aGlzLmdldFN0eWxlKGcpO30sdGhpcyk7cmV0dXJuIGY7fX0pO0VsZW1lbnQuU3R5bGVzPXtsZWZ0OiJAcHgiLHRvcDoiQHB4Iixib3R0b206IkBweCIscmlnaHQ6IkBweCIsd2lkdGg6IkBweCIsaGVpZ2h0OiJAcHgiLG1heFdpZHRoOiJAcHgiLG1heEhlaWdodDoiQHB4IixtaW5XaWR0aDoiQHB4IixtaW5IZWlnaHQ6IkBweCIsYmFja2dyb3VuZENvbG9yOiJyZ2IoQCwgQCwgQCkiLGJhY2tncm91bmRQb3NpdGlvbjoiQHB4IEBweCIsY29sb3I6InJnYihALCBALCBAKSIsZm9udFNpemU6IkBweCIsbGV0dGVyU3BhY2luZzoiQHB4IixsaW5lSGVpZ2h0OiJAcHgiLGNsaXA6InJlY3QoQHB4IEBweCBAcHggQHB4KSIsbWFyZ2luOiJAcHggQHB4IEBweCBAcHgiLHBhZGRpbmc6IkBweCBAcHggQHB4IEBweCIsYm9yZGVyOiJAcHggQCByZ2IoQCwgQCwgQCkgQHB4IEAgcmdiKEAsIEAsIEApIEBweCBAIHJnYihALCBALCBAKSIsYm9yZGVyV2lkdGg6IkBweCBAcHggQHB4IEBweCIsYm9yZGVyU3R5bGU6IkAgQCBAIEAiLGJvcmRlckNvbG9yOiJyZ2IoQCwgQCwgQCkgcmdiKEAsIEAsIEApIHJnYihALCBALCBAKSByZ2IoQCwgQCwgQCkiLHpJbmRleDoiQCIsem9vbToiQCIsZm9udFdlaWdodDoiQCIsdGV4dEluZGVudDoiQHB4IixvcGFjaXR5OiJAIn07CkVsZW1lbnQuU3R5bGVzPW5ldyBIYXNoKEVsZW1lbnQuU3R5bGVzKTtFbGVtZW50LlNob3J0U3R5bGVzPXttYXJnaW46e30scGFkZGluZzp7fSxib3JkZXI6e30sYm9yZGVyV2lkdGg6e30sYm9yZGVyU3R5bGU6e30sYm9yZGVyQ29sb3I6e319O1siVG9wIiwiUmlnaHQiLCJCb3R0b20iLCJMZWZ0Il0uZWFjaChmdW5jdGlvbihsKXt2YXIgaz1FbGVtZW50LlNob3J0U3R5bGVzOwp2YXIgZz1FbGVtZW50LlN0eWxlcztbIm1hcmdpbiIsInBhZGRpbmciXS5lYWNoKGZ1bmN0aW9uKG0pe3ZhciBuPW0rbDtrW21dW25dPWdbbl09IkBweCI7fSk7dmFyIGo9ImJvcmRlciIrbDtrLmJvcmRlcltqXT1nW2pdPSJAcHggQCByZ2IoQCwgQCwgQCkiO3ZhciBpPWorIldpZHRoIixmPWorIlN0eWxlIixoPWorIkNvbG9yIjsKa1tqXT17fTtrLmJvcmRlcldpZHRoW2ldPWtbal1baV09Z1tpXT0iQHB4IjtrLmJvcmRlclN0eWxlW2ZdPWtbal1bZl09Z1tmXT0iQCI7ay5ib3JkZXJDb2xvcltoXT1rW2pdW2hdPWdbaF09InJnYihALCBALCBAKSI7fSk7fSkoKTsoZnVuY3Rpb24oKXtFbGVtZW50LlByb3BlcnRpZXMuZXZlbnRzPXtzZXQ6ZnVuY3Rpb24oYil7dGhpcy5hZGRFdmVudHMoYik7Cn19O1tFbGVtZW50LFdpbmRvdyxEb2N1bWVudF0uaW52b2tlKCJpbXBsZW1lbnQiLHthZGRFdmVudDpmdW5jdGlvbihmLGgpe3ZhciBpPXRoaXMucmV0cmlldmUoImV2ZW50cyIse30pO2lmKCFpW2ZdKXtpW2ZdPXtrZXlzOltdLHZhbHVlczpbXX07fWlmKGlbZl0ua2V5cy5jb250YWlucyhoKSl7cmV0dXJuIHRoaXM7Cn1pW2ZdLmtleXMucHVzaChoKTt2YXIgZz1mLGI9RWxlbWVudC5FdmVudHNbZl0sZD1oLGo9dGhpcztpZihiKXtpZihiLm9uQWRkKXtiLm9uQWRkLmNhbGwodGhpcyxoKTt9aWYoYi5jb25kaXRpb24pe2Q9ZnVuY3Rpb24oayl7aWYoYi5jb25kaXRpb24uY2FsbCh0aGlzLGspKXtyZXR1cm4gaC5jYWxsKHRoaXMsayk7Cn1yZXR1cm4gdHJ1ZTt9O31nPWIuYmFzZXx8Zzt9dmFyIGU9ZnVuY3Rpb24oKXtyZXR1cm4gaC5jYWxsKGopO307dmFyIGM9RWxlbWVudC5OYXRpdmVFdmVudHNbZ107aWYoYyl7aWYoYz09Mil7ZT1mdW5jdGlvbihrKXtrPW5ldyBFdmVudChrLGouZ2V0V2luZG93KCkpOwppZihkLmNhbGwoaixrKT09PWZhbHNlKXtrLnN0b3AoKTt9fTt9dGhpcy5hZGRMaXN0ZW5lcihnLGUsYXJndW1lbnRzWzJdKTt9aVtmXS52YWx1ZXMucHVzaChlKTtyZXR1cm4gdGhpczt9LHJlbW92ZUV2ZW50OmZ1bmN0aW9uKGUsZCl7dmFyIGM9dGhpcy5yZXRyaWV2ZSgiZXZlbnRzIik7CmlmKCFjfHwhY1tlXSl7cmV0dXJuIHRoaXM7fXZhciBoPWNbZV07dmFyIGI9aC5rZXlzLmluZGV4T2YoZCk7aWYoYj09LTEpe3JldHVybiB0aGlzO312YXIgZz1oLnZhbHVlc1tiXTtkZWxldGUgaC5rZXlzW2JdO2RlbGV0ZSBoLnZhbHVlc1tiXTt2YXIgZj1FbGVtZW50LkV2ZW50c1tlXTsKaWYoZil7aWYoZi5vblJlbW92ZSl7Zi5vblJlbW92ZS5jYWxsKHRoaXMsZCk7fWU9Zi5iYXNlfHxlO31yZXR1cm4oRWxlbWVudC5OYXRpdmVFdmVudHNbZV0pP3RoaXMucmVtb3ZlTGlzdGVuZXIoZSxnLGFyZ3VtZW50c1syXSk6dGhpczt9LGFkZEV2ZW50czpmdW5jdGlvbihiKXtmb3IodmFyIGMgaW4gYil7dGhpcy5hZGRFdmVudChjLGJbY10pOwp9cmV0dXJuIHRoaXM7fSxyZW1vdmVFdmVudHM6ZnVuY3Rpb24oYil7dmFyIGQ7aWYodHlwZU9mKGIpPT0ib2JqZWN0Iil7Zm9yKGQgaW4gYil7dGhpcy5yZW1vdmVFdmVudChkLGJbZF0pO31yZXR1cm4gdGhpczt9dmFyIGM9dGhpcy5yZXRyaWV2ZSgiZXZlbnRzIik7CmlmKCFjKXtyZXR1cm4gdGhpczt9aWYoIWIpe2ZvcihkIGluIGMpe3RoaXMucmVtb3ZlRXZlbnRzKGQpO310aGlzLmVsaW1pbmF0ZSgiZXZlbnRzIik7fWVsc2V7aWYoY1tiXSl7Y1tiXS5rZXlzLmVhY2goZnVuY3Rpb24oZSl7dGhpcy5yZW1vdmVFdmVudChiLGUpO30sdGhpcyk7CmRlbGV0ZSBjW2JdO319cmV0dXJuIHRoaXM7fSxmaXJlRXZlbnQ6ZnVuY3Rpb24oZSxjLGIpe3ZhciBkPXRoaXMucmV0cmlldmUoImV2ZW50cyIpO2lmKCFkfHwhZFtlXSl7cmV0dXJuIHRoaXM7fWM9QXJyYXkuZnJvbShjKTtkW2VdLmtleXMuZWFjaChmdW5jdGlvbihmKXtpZihiKXtmLmRlbGF5KGIsdGhpcyxjKTsKfWVsc2V7Zi5hcHBseSh0aGlzLGMpO319LHRoaXMpO3JldHVybiB0aGlzO30sY2xvbmVFdmVudHM6ZnVuY3Rpb24oZSxkKXtlPWRvY3VtZW50LmlkKGUpO3ZhciBjPWUucmV0cmlldmUoImV2ZW50cyIpO2lmKCFjKXtyZXR1cm4gdGhpczt9aWYoIWQpe2Zvcih2YXIgYiBpbiBjKXt0aGlzLmNsb25lRXZlbnRzKGUsYik7Cn19ZWxzZXtpZihjW2RdKXtjW2RdLmtleXMuZWFjaChmdW5jdGlvbihmKXt0aGlzLmFkZEV2ZW50KGQsZik7fSx0aGlzKTt9fXJldHVybiB0aGlzO319KTtFbGVtZW50Lk5hdGl2ZUV2ZW50cz17Y2xpY2s6MixkYmxjbGljazoyLG1vdXNldXA6Mixtb3VzZWRvd246Mixjb250ZXh0bWVudToyLG1vdXNld2hlZWw6MixET01Nb3VzZVNjcm9sbDoyLG1vdXNlb3ZlcjoyLG1vdXNlb3V0OjIsbW91c2Vtb3ZlOjIsc2VsZWN0c3RhcnQ6MixzZWxlY3RlbmQ6MixrZXlkb3duOjIsa2V5cHJlc3M6MixrZXl1cDoyLG9yaWVudGF0aW9uY2hhbmdlOjIsdG91Y2hzdGFydDoyLHRvdWNobW92ZToyLHRvdWNoZW5kOjIsdG91Y2hjYW5jZWw6MixnZXN0dXJlc3RhcnQ6MixnZXN0dXJlY2hhbmdlOjIsZ2VzdHVyZWVuZDoyLGZvY3VzOjIsYmx1cjoyLGNoYW5nZToyLHJlc2V0OjIsc2VsZWN0OjIsc3VibWl0OjIsbG9hZDoyLHVubG9hZDoxLGJlZm9yZXVubG9hZDoyLHJlc2l6ZToxLG1vdmU6MSxET01Db250ZW50TG9hZGVkOjEscmVhZHlzdGF0ZWNoYW5nZToxLGVycm9yOjEsYWJvcnQ6MSxzY3JvbGw6MX07CnZhciBhPWZ1bmN0aW9uKGIpe3ZhciBjPWIucmVsYXRlZFRhcmdldDtpZihjPT1udWxsKXtyZXR1cm4gdHJ1ZTt9aWYoIWMpe3JldHVybiBmYWxzZTt9cmV0dXJuKGMhPXRoaXMmJmMucHJlZml4IT0ieHVsIiYmdHlwZU9mKHRoaXMpIT0iZG9jdW1lbnQiJiYhdGhpcy5jb250YWlucyhjKSk7Cn07RWxlbWVudC5FdmVudHM9e21vdXNlZW50ZXI6e2Jhc2U6Im1vdXNlb3ZlciIsY29uZGl0aW9uOmF9LG1vdXNlbGVhdmU6e2Jhc2U6Im1vdXNlb3V0Iixjb25kaXRpb246YX0sbW91c2V3aGVlbDp7YmFzZTooQnJvd3Nlci5maXJlZm94KT8iRE9NTW91c2VTY3JvbGwiOiJtb3VzZXdoZWVsIn19OwpFbGVtZW50LkV2ZW50cz1uZXcgSGFzaChFbGVtZW50LkV2ZW50cyk7fSkoKTsoZnVuY3Rpb24oKXt2YXIgaD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKSxlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO2guc3R5bGUuaGVpZ2h0PSIwIjtoLmFwcGVuZENoaWxkKGUpOwp2YXIgZD0oZS5vZmZzZXRQYXJlbnQ9PT1oKTtoPWU9bnVsbDt2YXIgbD1mdW5jdGlvbihtKXtyZXR1cm4gayhtLCJwb3NpdGlvbiIpIT0ic3RhdGljInx8YShtKTt9O3ZhciBpPWZ1bmN0aW9uKG0pe3JldHVybiBsKG0pfHwoL14oPzp0YWJsZXx0ZHx0aCkkL2kpLnRlc3QobS50YWdOYW1lKTsKfTtFbGVtZW50LmltcGxlbWVudCh7c2Nyb2xsVG86ZnVuY3Rpb24obSxuKXtpZihhKHRoaXMpKXt0aGlzLmdldFdpbmRvdygpLnNjcm9sbFRvKG0sbik7fWVsc2V7dGhpcy5zY3JvbGxMZWZ0PW07dGhpcy5zY3JvbGxUb3A9bjt9cmV0dXJuIHRoaXM7fSxnZXRTaXplOmZ1bmN0aW9uKCl7aWYoYSh0aGlzKSl7cmV0dXJuIHRoaXMuZ2V0V2luZG93KCkuZ2V0U2l6ZSgpOwp9cmV0dXJue3g6dGhpcy5vZmZzZXRXaWR0aCx5OnRoaXMub2Zmc2V0SGVpZ2h0fTt9LGdldFNjcm9sbFNpemU6ZnVuY3Rpb24oKXtpZihhKHRoaXMpKXtyZXR1cm4gdGhpcy5nZXRXaW5kb3coKS5nZXRTY3JvbGxTaXplKCk7fXJldHVybnt4OnRoaXMuc2Nyb2xsV2lkdGgseTp0aGlzLnNjcm9sbEhlaWdodH07Cn0sZ2V0U2Nyb2xsOmZ1bmN0aW9uKCl7aWYoYSh0aGlzKSl7cmV0dXJuIHRoaXMuZ2V0V2luZG93KCkuZ2V0U2Nyb2xsKCk7fXJldHVybnt4OnRoaXMuc2Nyb2xsTGVmdCx5OnRoaXMuc2Nyb2xsVG9wfTt9LGdldFNjcm9sbHM6ZnVuY3Rpb24oKXt2YXIgbj10aGlzLnBhcmVudE5vZGUsbT17eDowLHk6MH07CndoaWxlKG4mJiFhKG4pKXttLngrPW4uc2Nyb2xsTGVmdDttLnkrPW4uc2Nyb2xsVG9wO249bi5wYXJlbnROb2RlO31yZXR1cm4gbTt9LGdldE9mZnNldFBhcmVudDpkP2Z1bmN0aW9uKCl7dmFyIG09dGhpcztpZihhKG0pfHxrKG0sInBvc2l0aW9uIik9PSJmaXhlZCIpe3JldHVybiBudWxsOwp9dmFyIG49KGsobSwicG9zaXRpb24iKT09InN0YXRpYyIpP2k6bDt3aGlsZSgobT1tLnBhcmVudE5vZGUpKXtpZihuKG0pKXtyZXR1cm4gbTt9fXJldHVybiBudWxsO306ZnVuY3Rpb24oKXt2YXIgbT10aGlzO2lmKGEobSl8fGsobSwicG9zaXRpb24iKT09ImZpeGVkIil7cmV0dXJuIG51bGw7Cn10cnl7cmV0dXJuIG0ub2Zmc2V0UGFyZW50O31jYXRjaChuKXt9cmV0dXJuIG51bGw7fSxnZXRPZmZzZXRzOmZ1bmN0aW9uKCl7aWYodGhpcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QmJiFCcm93c2VyLlBsYXRmb3JtLmlvcyl7dmFyIHI9dGhpcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxvPWRvY3VtZW50LmlkKHRoaXMuZ2V0RG9jdW1lbnQoKS5kb2N1bWVudEVsZW1lbnQpLHE9by5nZXRTY3JvbGwoKSx0PXRoaXMuZ2V0U2Nyb2xscygpLHM9KGsodGhpcywicG9zaXRpb24iKT09ImZpeGVkIik7CnJldHVybnt4OnIubGVmdC50b0ludCgpK3QueCsoKHMpPzA6cS54KS1vLmNsaWVudExlZnQseTpyLnRvcC50b0ludCgpK3QueSsoKHMpPzA6cS55KS1vLmNsaWVudFRvcH07fXZhciBuPXRoaXMsbT17eDowLHk6MH07aWYoYSh0aGlzKSl7cmV0dXJuIG07fXdoaWxlKG4mJiFhKG4pKXttLngrPW4ub2Zmc2V0TGVmdDsKbS55Kz1uLm9mZnNldFRvcDtpZihCcm93c2VyLmZpcmVmb3gpe2lmKCFjKG4pKXttLngrPWIobik7bS55Kz1nKG4pO312YXIgcD1uLnBhcmVudE5vZGU7aWYocCYmayhwLCJvdmVyZmxvdyIpIT0idmlzaWJsZSIpe20ueCs9YihwKTttLnkrPWcocCk7fX1lbHNle2lmKG4hPXRoaXMmJkJyb3dzZXIuc2FmYXJpKXttLngrPWIobik7Cm0ueSs9ZyhuKTt9fW49bi5vZmZzZXRQYXJlbnQ7fWlmKEJyb3dzZXIuZmlyZWZveCYmIWModGhpcykpe20ueC09Yih0aGlzKTttLnktPWcodGhpcyk7fXJldHVybiBtO30sZ2V0UG9zaXRpb246ZnVuY3Rpb24ocCl7aWYoYSh0aGlzKSl7cmV0dXJue3g6MCx5OjB9O312YXIgcT10aGlzLmdldE9mZnNldHMoKSxuPXRoaXMuZ2V0U2Nyb2xscygpOwp2YXIgbT17eDpxLngtbi54LHk6cS55LW4ueX07aWYocCYmKHA9ZG9jdW1lbnQuaWQocCkpKXt2YXIgbz1wLmdldFBvc2l0aW9uKCk7cmV0dXJue3g6bS54LW8ueC1iKHApLHk6bS55LW8ueS1nKHApfTt9cmV0dXJuIG07fSxnZXRDb29yZGluYXRlczpmdW5jdGlvbihvKXtpZihhKHRoaXMpKXtyZXR1cm4gdGhpcy5nZXRXaW5kb3coKS5nZXRDb29yZGluYXRlcygpOwp9dmFyIG09dGhpcy5nZXRQb3NpdGlvbihvKSxuPXRoaXMuZ2V0U2l6ZSgpO3ZhciBwPXtsZWZ0Om0ueCx0b3A6bS55LHdpZHRoOm4ueCxoZWlnaHQ6bi55fTtwLnJpZ2h0PXAubGVmdCtwLndpZHRoO3AuYm90dG9tPXAudG9wK3AuaGVpZ2h0O3JldHVybiBwO30sY29tcHV0ZVBvc2l0aW9uOmZ1bmN0aW9uKG0pe3JldHVybntsZWZ0Om0ueC1qKHRoaXMsIm1hcmdpbi1sZWZ0IiksdG9wOm0ueS1qKHRoaXMsIm1hcmdpbi10b3AiKX07Cn0sc2V0UG9zaXRpb246ZnVuY3Rpb24obSl7cmV0dXJuIHRoaXMuc2V0U3R5bGVzKHRoaXMuY29tcHV0ZVBvc2l0aW9uKG0pKTt9fSk7W0RvY3VtZW50LFdpbmRvd10uaW52b2tlKCJpbXBsZW1lbnQiLHtnZXRTaXplOmZ1bmN0aW9uKCl7dmFyIG09Zih0aGlzKTtyZXR1cm57eDptLmNsaWVudFdpZHRoLHk6bS5jbGllbnRIZWlnaHR9Owp9LGdldFNjcm9sbDpmdW5jdGlvbigpe3ZhciBuPXRoaXMuZ2V0V2luZG93KCksbT1mKHRoaXMpO3JldHVybnt4Om4ucGFnZVhPZmZzZXR8fG0uc2Nyb2xsTGVmdCx5Om4ucGFnZVlPZmZzZXR8fG0uc2Nyb2xsVG9wfTt9LGdldFNjcm9sbFNpemU6ZnVuY3Rpb24oKXt2YXIgbz1mKHRoaXMpLG49dGhpcy5nZXRTaXplKCksbT10aGlzLmdldERvY3VtZW50KCkuYm9keTsKcmV0dXJue3g6TWF0aC5tYXgoby5zY3JvbGxXaWR0aCxtLnNjcm9sbFdpZHRoLG4ueCkseTpNYXRoLm1heChvLnNjcm9sbEhlaWdodCxtLnNjcm9sbEhlaWdodCxuLnkpfTt9LGdldFBvc2l0aW9uOmZ1bmN0aW9uKCl7cmV0dXJue3g6MCx5OjB9O30sZ2V0Q29vcmRpbmF0ZXM6ZnVuY3Rpb24oKXt2YXIgbT10aGlzLmdldFNpemUoKTsKcmV0dXJue3RvcDowLGxlZnQ6MCxib3R0b206bS55LHJpZ2h0Om0ueCxoZWlnaHQ6bS55LHdpZHRoOm0ueH07fX0pO3ZhciBrPUVsZW1lbnQuZ2V0Q29tcHV0ZWRTdHlsZTtmdW5jdGlvbiBqKG0sbil7cmV0dXJuIGsobSxuKS50b0ludCgpfHwwO31mdW5jdGlvbiBjKG0pe3JldHVybiBrKG0sIi1tb3otYm94LXNpemluZyIpPT0iYm9yZGVyLWJveCI7Cn1mdW5jdGlvbiBnKG0pe3JldHVybiBqKG0sImJvcmRlci10b3Atd2lkdGgiKTt9ZnVuY3Rpb24gYihtKXtyZXR1cm4gaihtLCJib3JkZXItbGVmdC13aWR0aCIpO31mdW5jdGlvbiBhKG0pe3JldHVybigvXig/OmJvZHl8aHRtbCkkL2kpLnRlc3QobS50YWdOYW1lKTsKfWZ1bmN0aW9uIGYobSl7dmFyIG49bS5nZXREb2N1bWVudCgpO3JldHVybighbi5jb21wYXRNb2RlfHxuLmNvbXBhdE1vZGU9PSJDU1MxQ29tcGF0Iik/bi5odG1sOm4uYm9keTt9fSkoKTtFbGVtZW50LmFsaWFzKHtwb3NpdGlvbjoic2V0UG9zaXRpb24ifSk7W1dpbmRvdyxEb2N1bWVudCxFbGVtZW50XS5pbnZva2UoImltcGxlbWVudCIse2dldEhlaWdodDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldFNpemUoKS55Owp9LGdldFdpZHRoOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0U2l6ZSgpLng7fSxnZXRTY3JvbGxUb3A6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRTY3JvbGwoKS55O30sZ2V0U2Nyb2xsTGVmdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldFNjcm9sbCgpLng7Cn0sZ2V0U2Nyb2xsSGVpZ2h0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0U2Nyb2xsU2l6ZSgpLnk7fSxnZXRTY3JvbGxXaWR0aDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldFNjcm9sbFNpemUoKS54O30sZ2V0VG9wOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0UG9zaXRpb24oKS55Owp9LGdldExlZnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRQb3NpdGlvbigpLng7fX0pOyhmdW5jdGlvbigpe3ZhciBmPXRoaXMuRng9bmV3IENsYXNzKHtJbXBsZW1lbnRzOltDaGFpbixFdmVudHMsT3B0aW9uc10sb3B0aW9uczp7ZnBzOjYwLHVuaXQ6ZmFsc2UsZHVyYXRpb246NTAwLGZyYW1lczpudWxsLGZyYW1lU2tpcDp0cnVlLGxpbms6Imlnbm9yZSJ9LGluaXRpYWxpemU6ZnVuY3Rpb24oZyl7dGhpcy5zdWJqZWN0PXRoaXMuc3ViamVjdHx8dGhpczsKdGhpcy5zZXRPcHRpb25zKGcpO30sZ2V0VHJhbnNpdGlvbjpmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihnKXtyZXR1cm4gLShNYXRoLmNvcyhNYXRoLlBJKmcpLTEpLzI7fTt9LHN0ZXA6ZnVuY3Rpb24oZyl7aWYodGhpcy5vcHRpb25zLmZyYW1lU2tpcCl7dmFyIGg9KHRoaXMudGltZSE9bnVsbCk/KGctdGhpcy50aW1lKTowLGk9aC90aGlzLmZyYW1lSW50ZXJ2YWw7CnRoaXMudGltZT1nO3RoaXMuZnJhbWUrPWk7fWVsc2V7dGhpcy5mcmFtZSsrO31pZih0aGlzLmZyYW1lPHRoaXMuZnJhbWVzKXt2YXIgaj10aGlzLnRyYW5zaXRpb24odGhpcy5mcmFtZS90aGlzLmZyYW1lcyk7dGhpcy5zZXQodGhpcy5jb21wdXRlKHRoaXMuZnJvbSx0aGlzLnRvLGopKTsKfWVsc2V7dGhpcy5mcmFtZT10aGlzLmZyYW1lczt0aGlzLnNldCh0aGlzLmNvbXB1dGUodGhpcy5mcm9tLHRoaXMudG8sMSkpO3RoaXMuc3RvcCgpO319LHNldDpmdW5jdGlvbihnKXtyZXR1cm4gZzt9LGNvbXB1dGU6ZnVuY3Rpb24oaSxoLGcpe3JldHVybiBmLmNvbXB1dGUoaSxoLGcpOwp9LGNoZWNrOmZ1bmN0aW9uKCl7aWYoIXRoaXMuaXNSdW5uaW5nKCkpe3JldHVybiB0cnVlO31zd2l0Y2godGhpcy5vcHRpb25zLmxpbmspe2Nhc2UiY2FuY2VsIjp0aGlzLmNhbmNlbCgpO3JldHVybiB0cnVlO2Nhc2UiY2hhaW4iOnRoaXMuY2hhaW4odGhpcy5jYWxsZXIucGFzcyhhcmd1bWVudHMsdGhpcykpOwpyZXR1cm4gZmFsc2U7fXJldHVybiBmYWxzZTt9LHN0YXJ0OmZ1bmN0aW9uKGssail7aWYoIXRoaXMuY2hlY2soayxqKSl7cmV0dXJuIHRoaXM7fXRoaXMuZnJvbT1rO3RoaXMudG89ajt0aGlzLmZyYW1lPSh0aGlzLm9wdGlvbnMuZnJhbWVTa2lwKT8wOi0xO3RoaXMudGltZT1udWxsOwp0aGlzLnRyYW5zaXRpb249dGhpcy5nZXRUcmFuc2l0aW9uKCk7dmFyIGk9dGhpcy5vcHRpb25zLmZyYW1lcyxoPXRoaXMub3B0aW9ucy5mcHMsZz10aGlzLm9wdGlvbnMuZHVyYXRpb247dGhpcy5kdXJhdGlvbj1mLkR1cmF0aW9uc1tnXXx8Zy50b0ludCgpO3RoaXMuZnJhbWVJbnRlcnZhbD0xMDAwL2g7CnRoaXMuZnJhbWVzPWl8fE1hdGgucm91bmQodGhpcy5kdXJhdGlvbi90aGlzLmZyYW1lSW50ZXJ2YWwpO3RoaXMuZmlyZUV2ZW50KCJzdGFydCIsdGhpcy5zdWJqZWN0KTtiLmNhbGwodGhpcyxoKTtyZXR1cm4gdGhpczt9LHN0b3A6ZnVuY3Rpb24oKXtpZih0aGlzLmlzUnVubmluZygpKXt0aGlzLnRpbWU9bnVsbDsKZC5jYWxsKHRoaXMsdGhpcy5vcHRpb25zLmZwcyk7aWYodGhpcy5mcmFtZXM9PXRoaXMuZnJhbWUpe3RoaXMuZmlyZUV2ZW50KCJjb21wbGV0ZSIsdGhpcy5zdWJqZWN0KTtpZighdGhpcy5jYWxsQ2hhaW4oKSl7dGhpcy5maXJlRXZlbnQoImNoYWluQ29tcGxldGUiLHRoaXMuc3ViamVjdCk7Cn19ZWxzZXt0aGlzLmZpcmVFdmVudCgic3RvcCIsdGhpcy5zdWJqZWN0KTt9fXJldHVybiB0aGlzO30sY2FuY2VsOmZ1bmN0aW9uKCl7aWYodGhpcy5pc1J1bm5pbmcoKSl7dGhpcy50aW1lPW51bGw7ZC5jYWxsKHRoaXMsdGhpcy5vcHRpb25zLmZwcyk7dGhpcy5mcmFtZT10aGlzLmZyYW1lczsKdGhpcy5maXJlRXZlbnQoImNhbmNlbCIsdGhpcy5zdWJqZWN0KS5jbGVhckNoYWluKCk7fXJldHVybiB0aGlzO30scGF1c2U6ZnVuY3Rpb24oKXtpZih0aGlzLmlzUnVubmluZygpKXt0aGlzLnRpbWU9bnVsbDtkLmNhbGwodGhpcyx0aGlzLm9wdGlvbnMuZnBzKTt9cmV0dXJuIHRoaXM7Cn0scmVzdW1lOmZ1bmN0aW9uKCl7aWYoKHRoaXMuZnJhbWU8dGhpcy5mcmFtZXMpJiYhdGhpcy5pc1J1bm5pbmcoKSl7Yi5jYWxsKHRoaXMsdGhpcy5vcHRpb25zLmZwcyk7fXJldHVybiB0aGlzO30saXNSdW5uaW5nOmZ1bmN0aW9uKCl7dmFyIGc9ZVt0aGlzLm9wdGlvbnMuZnBzXTsKcmV0dXJuIGcmJmcuY29udGFpbnModGhpcyk7fX0pO2YuY29tcHV0ZT1mdW5jdGlvbihpLGgsZyl7cmV0dXJuKGgtaSkqZytpO307Zi5EdXJhdGlvbnM9eyJzaG9ydCI6MjUwLG5vcm1hbDo1MDAsImxvbmciOjEwMDB9O3ZhciBlPXt9LGM9e307dmFyIGE9ZnVuY3Rpb24oKXt2YXIgaD1EYXRlLm5vdygpOwpmb3IodmFyIGo9dGhpcy5sZW5ndGg7ai0tOyl7dmFyIGc9dGhpc1tqXTtpZihnKXtnLnN0ZXAoaCk7fX19O3ZhciBiPWZ1bmN0aW9uKGgpe3ZhciBnPWVbaF18fChlW2hdPVtdKTtnLnB1c2godGhpcyk7aWYoIWNbaF0pe2NbaF09YS5wZXJpb2RpY2FsKE1hdGgucm91bmQoMTAwMC9oKSxnKTsKfX07dmFyIGQ9ZnVuY3Rpb24oaCl7dmFyIGc9ZVtoXTtpZihnKXtnLmVyYXNlKHRoaXMpO2lmKCFnLmxlbmd0aCYmY1toXSl7ZGVsZXRlIGVbaF07Y1toXT1jbGVhckludGVydmFsKGNbaF0pO319fTt9KSgpO0Z4LkNTUz1uZXcgQ2xhc3Moe0V4dGVuZHM6RngscHJlcGFyZTpmdW5jdGlvbihjLGQsYil7Yj1BcnJheS5mcm9tKGIpOwppZihiWzFdPT1udWxsKXtiWzFdPWJbMF07YlswXT1jLmdldFN0eWxlKGQpO312YXIgYT1iLm1hcCh0aGlzLnBhcnNlKTtyZXR1cm57ZnJvbTphWzBdLHRvOmFbMV19O30scGFyc2U6ZnVuY3Rpb24oYSl7YT1GdW5jdGlvbi5mcm9tKGEpKCk7YT0odHlwZW9mIGE9PSJzdHJpbmciKT9hLnNwbGl0KCIgIik6QXJyYXkuZnJvbShhKTsKcmV0dXJuIGEubWFwKGZ1bmN0aW9uKGMpe2M9U3RyaW5nKGMpO3ZhciBiPWZhbHNlO09iamVjdC5lYWNoKEZ4LkNTUy5QYXJzZXJzLGZ1bmN0aW9uKGYsZSl7aWYoYil7cmV0dXJuO312YXIgZD1mLnBhcnNlKGMpO2lmKGR8fGQ9PT0wKXtiPXt2YWx1ZTpkLHBhcnNlcjpmfTsKfX0pO2I9Ynx8e3ZhbHVlOmMscGFyc2VyOkZ4LkNTUy5QYXJzZXJzLlN0cmluZ307cmV0dXJuIGI7fSk7fSxjb21wdXRlOmZ1bmN0aW9uKGQsYyxiKXt2YXIgYT1bXTsoTWF0aC5taW4oZC5sZW5ndGgsYy5sZW5ndGgpKS50aW1lcyhmdW5jdGlvbihlKXthLnB1c2goe3ZhbHVlOmRbZV0ucGFyc2VyLmNvbXB1dGUoZFtlXS52YWx1ZSxjW2VdLnZhbHVlLGIpLHBhcnNlcjpkW2VdLnBhcnNlcn0pOwp9KTthLiRmYW1pbHk9RnVuY3Rpb24uZnJvbSgiZng6Y3NzOnZhbHVlIik7cmV0dXJuIGE7fSxzZXJ2ZTpmdW5jdGlvbihjLGIpe2lmKHR5cGVPZihjKSE9ImZ4OmNzczp2YWx1ZSIpe2M9dGhpcy5wYXJzZShjKTt9dmFyIGE9W107Yy5lYWNoKGZ1bmN0aW9uKGQpe2E9YS5jb25jYXQoZC5wYXJzZXIuc2VydmUoZC52YWx1ZSxiKSk7Cn0pO3JldHVybiBhO30scmVuZGVyOmZ1bmN0aW9uKGEsZCxjLGIpe2Euc2V0U3R5bGUoZCx0aGlzLnNlcnZlKGMsYikpO30sc2VhcmNoOmZ1bmN0aW9uKGEpe2lmKEZ4LkNTUy5DYWNoZVthXSl7cmV0dXJuIEZ4LkNTUy5DYWNoZVthXTt9dmFyIGM9e30sYj1uZXcgUmVnRXhwKCJeIithLmVzY2FwZVJlZ0V4cCgpKyIkIik7CkFycmF5LmVhY2goZG9jdW1lbnQuc3R5bGVTaGVldHMsZnVuY3Rpb24oZixlKXt2YXIgZD1mLmhyZWY7aWYoZCYmZC5jb250YWlucygiOi8vIikmJiFkLmNvbnRhaW5zKGRvY3VtZW50LmRvbWFpbikpe3JldHVybjt9dmFyIGc9Zi5ydWxlc3x8Zi5jc3NSdWxlcztBcnJheS5lYWNoKGcsZnVuY3Rpb24oayxoKXtpZighay5zdHlsZSl7cmV0dXJuOwp9dmFyIGo9KGsuc2VsZWN0b3JUZXh0KT9rLnNlbGVjdG9yVGV4dC5yZXBsYWNlKC9eXHcrLyxmdW5jdGlvbihpKXtyZXR1cm4gaS50b0xvd2VyQ2FzZSgpO30pOm51bGw7aWYoIWp8fCFiLnRlc3Qoaikpe3JldHVybjt9T2JqZWN0LmVhY2goRWxlbWVudC5TdHlsZXMsZnVuY3Rpb24obCxpKXtpZighay5zdHlsZVtpXXx8RWxlbWVudC5TaG9ydFN0eWxlc1tpXSl7cmV0dXJuOwp9bD1TdHJpbmcoay5zdHlsZVtpXSk7Y1tpXT0oKC9ecmdiLykudGVzdChsKSk/bC5yZ2JUb0hleCgpOmw7fSk7fSk7fSk7cmV0dXJuIEZ4LkNTUy5DYWNoZVthXT1jO319KTtGeC5DU1MuQ2FjaGU9e307RnguQ1NTLlBhcnNlcnM9e0NvbG9yOntwYXJzZTpmdW5jdGlvbihhKXtpZihhLm1hdGNoKC9eI1swLTlhLWZdezMsNn0kL2kpKXtyZXR1cm4gYS5oZXhUb1JnYih0cnVlKTsKfXJldHVybigoYT1hLm1hdGNoKC8oXGQrKSxccyooXGQrKSxccyooXGQrKS8pKSk/W2FbMV0sYVsyXSxhWzNdXTpmYWxzZTt9LGNvbXB1dGU6ZnVuY3Rpb24oYyxiLGEpe3JldHVybiBjLm1hcChmdW5jdGlvbihlLGQpe3JldHVybiBNYXRoLnJvdW5kKEZ4LmNvbXB1dGUoY1tkXSxiW2RdLGEpKTsKfSk7fSxzZXJ2ZTpmdW5jdGlvbihhKXtyZXR1cm4gYS5tYXAoTnVtYmVyKTt9fSxOdW1iZXI6e3BhcnNlOnBhcnNlRmxvYXQsY29tcHV0ZTpGeC5jb21wdXRlLHNlcnZlOmZ1bmN0aW9uKGIsYSl7cmV0dXJuKGEpP2IrYTpiO319LFN0cmluZzp7cGFyc2U6RnVuY3Rpb24uZnJvbShmYWxzZSksY29tcHV0ZTpmdW5jdGlvbihiLGEpe3JldHVybiBhOwp9LHNlcnZlOmZ1bmN0aW9uKGEpe3JldHVybiBhO319fTtGeC5DU1MuUGFyc2Vycz1uZXcgSGFzaChGeC5DU1MuUGFyc2Vycyk7RnguVHdlZW49bmV3IENsYXNzKHtFeHRlbmRzOkZ4LkNTUyxpbml0aWFsaXplOmZ1bmN0aW9uKGIsYSl7dGhpcy5lbGVtZW50PXRoaXMuc3ViamVjdD1kb2N1bWVudC5pZChiKTsKdGhpcy5wYXJlbnQoYSk7fSxzZXQ6ZnVuY3Rpb24oYixhKXtpZihhcmd1bWVudHMubGVuZ3RoPT0xKXthPWI7Yj10aGlzLnByb3BlcnR5fHx0aGlzLm9wdGlvbnMucHJvcGVydHk7fXRoaXMucmVuZGVyKHRoaXMuZWxlbWVudCxiLGEsdGhpcy5vcHRpb25zLnVuaXQpOwpyZXR1cm4gdGhpczt9LHN0YXJ0OmZ1bmN0aW9uKGMsZSxkKXtpZighdGhpcy5jaGVjayhjLGUsZCkpe3JldHVybiB0aGlzO312YXIgYj1BcnJheS5mbGF0dGVuKGFyZ3VtZW50cyk7dGhpcy5wcm9wZXJ0eT10aGlzLm9wdGlvbnMucHJvcGVydHl8fGIuc2hpZnQoKTt2YXIgYT10aGlzLnByZXBhcmUodGhpcy5lbGVtZW50LHRoaXMucHJvcGVydHksYik7CnJldHVybiB0aGlzLnBhcmVudChhLmZyb20sYS50byk7fX0pO0VsZW1lbnQuUHJvcGVydGllcy50d2Vlbj17c2V0OmZ1bmN0aW9uKGEpe3RoaXMuZ2V0KCJ0d2VlbiIpLmNhbmNlbCgpLnNldE9wdGlvbnMoYSk7cmV0dXJuIHRoaXM7fSxnZXQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnJldHJpZXZlKCJ0d2VlbiIpOwppZighYSl7YT1uZXcgRnguVHdlZW4odGhpcyx7bGluazoiY2FuY2VsIn0pO3RoaXMuc3RvcmUoInR3ZWVuIixhKTt9cmV0dXJuIGE7fX07RWxlbWVudC5pbXBsZW1lbnQoe3R3ZWVuOmZ1bmN0aW9uKGEsYyxiKXt0aGlzLmdldCgidHdlZW4iKS5zdGFydChhcmd1bWVudHMpOwpyZXR1cm4gdGhpczt9LGZhZGU6ZnVuY3Rpb24oYyl7dmFyIGU9dGhpcy5nZXQoInR3ZWVuIiksZD0ib3BhY2l0eSIsYTtjPVtjLCJ0b2dnbGUiXS5waWNrKCk7c3dpdGNoKGMpe2Nhc2UiaW4iOmUuc3RhcnQoZCwxKTticmVhaztjYXNlIm91dCI6ZS5zdGFydChkLDApOwpicmVhaztjYXNlInNob3ciOmUuc2V0KGQsMSk7YnJlYWs7Y2FzZSJoaWRlIjplLnNldChkLDApO2JyZWFrO2Nhc2UidG9nZ2xlIjp2YXIgYj10aGlzLnJldHJpZXZlKCJmYWRlOmZsYWciLHRoaXMuZ2V0KCJvcGFjaXR5Iik9PTEpO2Uuc3RhcnQoZCwoYik/MDoxKTt0aGlzLnN0b3JlKCJmYWRlOmZsYWciLCFiKTsKYT10cnVlO2JyZWFrO2RlZmF1bHQ6ZS5zdGFydChkLGFyZ3VtZW50cyk7fWlmKCFhKXt0aGlzLmVsaW1pbmF0ZSgiZmFkZTpmbGFnIik7fXJldHVybiB0aGlzO30saGlnaGxpZ2h0OmZ1bmN0aW9uKGMsYSl7aWYoIWEpe2E9dGhpcy5yZXRyaWV2ZSgiaGlnaGxpZ2h0Om9yaWdpbmFsIix0aGlzLmdldFN0eWxlKCJiYWNrZ3JvdW5kLWNvbG9yIikpOwphPShhPT0idHJhbnNwYXJlbnQiKT8iI2ZmZiI6YTt9dmFyIGI9dGhpcy5nZXQoInR3ZWVuIik7Yi5zdGFydCgiYmFja2dyb3VuZC1jb2xvciIsY3x8IiNmZmZmODgiLGEpLmNoYWluKGZ1bmN0aW9uKCl7dGhpcy5zZXRTdHlsZSgiYmFja2dyb3VuZC1jb2xvciIsdGhpcy5yZXRyaWV2ZSgiaGlnaGxpZ2h0Om9yaWdpbmFsIikpOwpiLmNhbGxDaGFpbigpO30uYmluZCh0aGlzKSk7cmV0dXJuIHRoaXM7fX0pO0Z4Lk1vcnBoPW5ldyBDbGFzcyh7RXh0ZW5kczpGeC5DU1MsaW5pdGlhbGl6ZTpmdW5jdGlvbihiLGEpe3RoaXMuZWxlbWVudD10aGlzLnN1YmplY3Q9ZG9jdW1lbnQuaWQoYik7dGhpcy5wYXJlbnQoYSk7Cn0sc2V0OmZ1bmN0aW9uKGEpe2lmKHR5cGVvZiBhPT0ic3RyaW5nIil7YT10aGlzLnNlYXJjaChhKTt9Zm9yKHZhciBiIGluIGEpe3RoaXMucmVuZGVyKHRoaXMuZWxlbWVudCxiLGFbYl0sdGhpcy5vcHRpb25zLnVuaXQpO31yZXR1cm4gdGhpczt9LGNvbXB1dGU6ZnVuY3Rpb24oZSxkLGMpe3ZhciBhPXt9Owpmb3IodmFyIGIgaW4gZSl7YVtiXT10aGlzLnBhcmVudChlW2JdLGRbYl0sYyk7fXJldHVybiBhO30sc3RhcnQ6ZnVuY3Rpb24oYil7aWYoIXRoaXMuY2hlY2soYikpe3JldHVybiB0aGlzO31pZih0eXBlb2YgYj09InN0cmluZyIpe2I9dGhpcy5zZWFyY2goYik7fXZhciBlPXt9LGQ9e307CmZvcih2YXIgYyBpbiBiKXt2YXIgYT10aGlzLnByZXBhcmUodGhpcy5lbGVtZW50LGMsYltjXSk7ZVtjXT1hLmZyb207ZFtjXT1hLnRvO31yZXR1cm4gdGhpcy5wYXJlbnQoZSxkKTt9fSk7RWxlbWVudC5Qcm9wZXJ0aWVzLm1vcnBoPXtzZXQ6ZnVuY3Rpb24oYSl7dGhpcy5nZXQoIm1vcnBoIikuY2FuY2VsKCkuc2V0T3B0aW9ucyhhKTsKcmV0dXJuIHRoaXM7fSxnZXQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnJldHJpZXZlKCJtb3JwaCIpO2lmKCFhKXthPW5ldyBGeC5Nb3JwaCh0aGlzLHtsaW5rOiJjYW5jZWwifSk7dGhpcy5zdG9yZSgibW9ycGgiLGEpO31yZXR1cm4gYTt9fTtFbGVtZW50LmltcGxlbWVudCh7bW9ycGg6ZnVuY3Rpb24oYSl7dGhpcy5nZXQoIm1vcnBoIikuc3RhcnQoYSk7CnJldHVybiB0aGlzO319KTtGeC5pbXBsZW1lbnQoe2dldFRyYW5zaXRpb246ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm9wdGlvbnMudHJhbnNpdGlvbnx8RnguVHJhbnNpdGlvbnMuU2luZS5lYXNlSW5PdXQ7aWYodHlwZW9mIGE9PSJzdHJpbmciKXt2YXIgYj1hLnNwbGl0KCI6Iik7CmE9RnguVHJhbnNpdGlvbnM7YT1hW2JbMF1dfHxhW2JbMF0uY2FwaXRhbGl6ZSgpXTtpZihiWzFdKXthPWFbImVhc2UiK2JbMV0uY2FwaXRhbGl6ZSgpKyhiWzJdP2JbMl0uY2FwaXRhbGl6ZSgpOiIiKV07fX1yZXR1cm4gYTt9fSk7RnguVHJhbnNpdGlvbj1mdW5jdGlvbihjLGIpe2I9QXJyYXkuZnJvbShiKTsKdmFyIGE9ZnVuY3Rpb24oZCl7cmV0dXJuIGMoZCxiKTt9O3JldHVybiBPYmplY3QuYXBwZW5kKGEse2Vhc2VJbjphLGVhc2VPdXQ6ZnVuY3Rpb24oZCl7cmV0dXJuIDEtYygxLWQsYik7fSxlYXNlSW5PdXQ6ZnVuY3Rpb24oZCl7cmV0dXJuKGQ8PTAuNT9jKDIqZCxiKTooMi1jKDIqKDEtZCksYikpKS8yOwp9fSk7fTtGeC5UcmFuc2l0aW9ucz17bGluZWFyOmZ1bmN0aW9uKGEpe3JldHVybiBhO319O0Z4LlRyYW5zaXRpb25zPW5ldyBIYXNoKEZ4LlRyYW5zaXRpb25zKTtGeC5UcmFuc2l0aW9ucy5leHRlbmQ9ZnVuY3Rpb24oYSl7Zm9yKHZhciBiIGluIGEpe0Z4LlRyYW5zaXRpb25zW2JdPW5ldyBGeC5UcmFuc2l0aW9uKGFbYl0pOwp9fTtGeC5UcmFuc2l0aW9ucy5leHRlbmQoe1BvdzpmdW5jdGlvbihiLGEpe3JldHVybiBNYXRoLnBvdyhiLGEmJmFbMF18fDYpO30sRXhwbzpmdW5jdGlvbihhKXtyZXR1cm4gTWF0aC5wb3coMiw4KihhLTEpKTt9LENpcmM6ZnVuY3Rpb24oYSl7cmV0dXJuIDEtTWF0aC5zaW4oTWF0aC5hY29zKGEpKTsKfSxTaW5lOmZ1bmN0aW9uKGEpe3JldHVybiAxLU1hdGguY29zKGEqTWF0aC5QSS8yKTt9LEJhY2s6ZnVuY3Rpb24oYixhKXthPWEmJmFbMF18fDEuNjE4O3JldHVybiBNYXRoLnBvdyhiLDIpKigoYSsxKSpiLWEpO30sQm91bmNlOmZ1bmN0aW9uKGYpe3ZhciBlO2Zvcih2YXIgZD0wLGM9MTsKMTtkKz1jLGMvPTIpe2lmKGY+PSg3LTQqZCkvMTEpe2U9YypjLU1hdGgucG93KCgxMS02KmQtMTEqZikvNCwyKTticmVhazt9fXJldHVybiBlO30sRWxhc3RpYzpmdW5jdGlvbihiLGEpe3JldHVybiBNYXRoLnBvdygyLDEwKi0tYikqTWF0aC5jb3MoMjAqYipNYXRoLlBJKihhJiZhWzBdfHwxKS8zKTsKfX0pO1siUXVhZCIsIkN1YmljIiwiUXVhcnQiLCJRdWludCJdLmVhY2goZnVuY3Rpb24oYixhKXtGeC5UcmFuc2l0aW9uc1tiXT1uZXcgRnguVHJhbnNpdGlvbihmdW5jdGlvbihjKXtyZXR1cm4gTWF0aC5wb3coYyxhKzIpO30pO30pOyhmdW5jdGlvbigpe3ZhciBkPWZ1bmN0aW9uKCl7fSxhPSgib25wcm9ncmVzcyIgaW4gbmV3IEJyb3dzZXIuUmVxdWVzdCk7CnZhciBjPXRoaXMuUmVxdWVzdD1uZXcgQ2xhc3Moe0ltcGxlbWVudHM6W0NoYWluLEV2ZW50cyxPcHRpb25zXSxvcHRpb25zOnt1cmw6IiIsZGF0YToiIixoZWFkZXJzOnsiWC1SZXF1ZXN0ZWQtV2l0aCI6IlhNTEh0dHBSZXF1ZXN0IixBY2NlcHQ6InRleHQvamF2YXNjcmlwdCwgdGV4dC9odG1sLCBhcHBsaWNhdGlvbi94bWwsIHRleHQveG1sLCAqLyoifSxhc3luYzp0cnVlLGZvcm1hdDpmYWxzZSxtZXRob2Q6InBvc3QiLGxpbms6Imlnbm9yZSIsaXNTdWNjZXNzOm51bGwsZW11bGF0aW9uOnRydWUsdXJsRW5jb2RlZDp0cnVlLGVuY29kaW5nOiJ1dGYtOCIsZXZhbFNjcmlwdHM6ZmFsc2UsZXZhbFJlc3BvbnNlOmZhbHNlLHRpbWVvdXQ6MCxub0NhY2hlOmZhbHNlfSxpbml0aWFsaXplOmZ1bmN0aW9uKGUpe3RoaXMueGhyPW5ldyBCcm93c2VyLlJlcXVlc3QoKTsKdGhpcy5zZXRPcHRpb25zKGUpO3RoaXMuaGVhZGVycz10aGlzLm9wdGlvbnMuaGVhZGVyczt9LG9uU3RhdGVDaGFuZ2U6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnhocjtpZihlLnJlYWR5U3RhdGUhPTR8fCF0aGlzLnJ1bm5pbmcpe3JldHVybjt9dGhpcy5ydW5uaW5nPWZhbHNlOwp0aGlzLnN0YXR1cz0wO0Z1bmN0aW9uLmF0dGVtcHQoZnVuY3Rpb24oKXt2YXIgZj1lLnN0YXR1czt0aGlzLnN0YXR1cz0oZj09MTIyMyk/MjA0OmY7fS5iaW5kKHRoaXMpKTtlLm9ucmVhZHlzdGF0ZWNoYW5nZT1kO2lmKGEpe2Uub25wcm9ncmVzcz1lLm9ubG9hZHN0YXJ0PWQ7Cn1jbGVhclRpbWVvdXQodGhpcy50aW1lcik7dGhpcy5yZXNwb25zZT17dGV4dDp0aGlzLnhoci5yZXNwb25zZVRleHR8fCIiLHhtbDp0aGlzLnhoci5yZXNwb25zZVhNTH07aWYodGhpcy5vcHRpb25zLmlzU3VjY2Vzcy5jYWxsKHRoaXMsdGhpcy5zdGF0dXMpKXt0aGlzLnN1Y2Nlc3ModGhpcy5yZXNwb25zZS50ZXh0LHRoaXMucmVzcG9uc2UueG1sKTsKfWVsc2V7dGhpcy5mYWlsdXJlKCk7fX0saXNTdWNjZXNzOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5zdGF0dXM7cmV0dXJuKGU+PTIwMCYmZTwzMDApO30saXNSdW5uaW5nOmZ1bmN0aW9uKCl7cmV0dXJuICEhdGhpcy5ydW5uaW5nO30scHJvY2Vzc1NjcmlwdHM6ZnVuY3Rpb24oZSl7aWYodGhpcy5vcHRpb25zLmV2YWxSZXNwb25zZXx8KC8oZWNtYXxqYXZhKXNjcmlwdC8pLnRlc3QodGhpcy5nZXRIZWFkZXIoIkNvbnRlbnQtdHlwZSIpKSl7cmV0dXJuIEJyb3dzZXIuZXhlYyhlKTsKfXJldHVybiBlLnN0cmlwU2NyaXB0cyh0aGlzLm9wdGlvbnMuZXZhbFNjcmlwdHMpO30sc3VjY2VzczpmdW5jdGlvbihmLGUpe3RoaXMub25TdWNjZXNzKHRoaXMucHJvY2Vzc1NjcmlwdHMoZiksZSk7fSxvblN1Y2Nlc3M6ZnVuY3Rpb24oKXt0aGlzLmZpcmVFdmVudCgiY29tcGxldGUiLGFyZ3VtZW50cykuZmlyZUV2ZW50KCJzdWNjZXNzIixhcmd1bWVudHMpLmNhbGxDaGFpbigpOwp9LGZhaWx1cmU6ZnVuY3Rpb24oKXt0aGlzLm9uRmFpbHVyZSgpO30sb25GYWlsdXJlOmZ1bmN0aW9uKCl7dGhpcy5maXJlRXZlbnQoImNvbXBsZXRlIikuZmlyZUV2ZW50KCJmYWlsdXJlIix0aGlzLnhocik7fSxsb2Fkc3RhcnQ6ZnVuY3Rpb24oZSl7dGhpcy5maXJlRXZlbnQoImxvYWRzdGFydCIsW2UsdGhpcy54aHJdKTsKfSxwcm9ncmVzczpmdW5jdGlvbihlKXt0aGlzLmZpcmVFdmVudCgicHJvZ3Jlc3MiLFtlLHRoaXMueGhyXSk7fSx0aW1lb3V0OmZ1bmN0aW9uKCl7dGhpcy5maXJlRXZlbnQoInRpbWVvdXQiLHRoaXMueGhyKTt9LHNldEhlYWRlcjpmdW5jdGlvbihlLGYpe3RoaXMuaGVhZGVyc1tlXT1mOwpyZXR1cm4gdGhpczt9LGdldEhlYWRlcjpmdW5jdGlvbihlKXtyZXR1cm4gRnVuY3Rpb24uYXR0ZW1wdChmdW5jdGlvbigpe3JldHVybiB0aGlzLnhoci5nZXRSZXNwb25zZUhlYWRlcihlKTt9LmJpbmQodGhpcykpO30sY2hlY2s6ZnVuY3Rpb24oKXtpZighdGhpcy5ydW5uaW5nKXtyZXR1cm4gdHJ1ZTsKfXN3aXRjaCh0aGlzLm9wdGlvbnMubGluayl7Y2FzZSJjYW5jZWwiOnRoaXMuY2FuY2VsKCk7cmV0dXJuIHRydWU7Y2FzZSJjaGFpbiI6dGhpcy5jaGFpbih0aGlzLmNhbGxlci5wYXNzKGFyZ3VtZW50cyx0aGlzKSk7cmV0dXJuIGZhbHNlO31yZXR1cm4gZmFsc2U7fSxzZW5kOmZ1bmN0aW9uKG8pe2lmKCF0aGlzLmNoZWNrKG8pKXtyZXR1cm4gdGhpczsKfXRoaXMub3B0aW9ucy5pc1N1Y2Nlc3M9dGhpcy5vcHRpb25zLmlzU3VjY2Vzc3x8dGhpcy5pc1N1Y2Nlc3M7dGhpcy5ydW5uaW5nPXRydWU7dmFyIGw9dHlwZU9mKG8pO2lmKGw9PSJzdHJpbmcifHxsPT0iZWxlbWVudCIpe289e2RhdGE6b307fXZhciBoPXRoaXMub3B0aW9uczsKbz1PYmplY3QuYXBwZW5kKHtkYXRhOmguZGF0YSx1cmw6aC51cmwsbWV0aG9kOmgubWV0aG9kfSxvKTt2YXIgaj1vLmRhdGEsZj1TdHJpbmcoby51cmwpLGU9by5tZXRob2QudG9Mb3dlckNhc2UoKTtzd2l0Y2godHlwZU9mKGopKXtjYXNlImVsZW1lbnQiOmo9ZG9jdW1lbnQuaWQoaikudG9RdWVyeVN0cmluZygpOwpicmVhaztjYXNlIm9iamVjdCI6Y2FzZSJoYXNoIjpqPU9iamVjdC50b1F1ZXJ5U3RyaW5nKGopO31pZih0aGlzLm9wdGlvbnMuZm9ybWF0KXt2YXIgbT0iZm9ybWF0PSIrdGhpcy5vcHRpb25zLmZvcm1hdDtqPShqKT9tKyImIitqOm07fWlmKHRoaXMub3B0aW9ucy5lbXVsYXRpb24mJiFbImdldCIsInBvc3QiXS5jb250YWlucyhlKSl7dmFyIGs9Il9tZXRob2Q9IitlOwpqPShqKT9rKyImIitqOms7ZT0icG9zdCI7fWlmKHRoaXMub3B0aW9ucy51cmxFbmNvZGVkJiZbInBvc3QiLCJwdXQiXS5jb250YWlucyhlKSl7dmFyIGc9KHRoaXMub3B0aW9ucy5lbmNvZGluZyk/IjsgY2hhcnNldD0iK3RoaXMub3B0aW9ucy5lbmNvZGluZzoiIjt0aGlzLmhlYWRlcnNbIkNvbnRlbnQtdHlwZSJdPSJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiK2c7Cn1pZighZil7Zj1kb2N1bWVudC5sb2NhdGlvbi5wYXRobmFtZTt9dmFyIGk9Zi5sYXN0SW5kZXhPZigiLyIpO2lmKGk+LTEmJihpPWYuaW5kZXhPZigiIyIpKT4tMSl7Zj1mLnN1YnN0cigwLGkpO31pZih0aGlzLm9wdGlvbnMubm9DYWNoZSl7Zis9KGYuY29udGFpbnMoIj8iKT8iJiI6Ij8iKStTdHJpbmcudW5pcXVlSUQoKTsKfWlmKGomJmU9PSJnZXQiKXtmKz0oZi5jb250YWlucygiPyIpPyImIjoiPyIpK2o7aj1udWxsO312YXIgbj10aGlzLnhocjtpZihhKXtuLm9ubG9hZHN0YXJ0PXRoaXMubG9hZHN0YXJ0LmJpbmQodGhpcyk7bi5vbnByb2dyZXNzPXRoaXMucHJvZ3Jlc3MuYmluZCh0aGlzKTsKfW4ub3BlbihlLnRvVXBwZXJDYXNlKCksZix0aGlzLm9wdGlvbnMuYXN5bmMsdGhpcy5vcHRpb25zLnVzZXIsdGhpcy5vcHRpb25zLnBhc3N3b3JkKTtpZih0aGlzLm9wdGlvbnMudXNlciYmIndpdGhDcmVkZW50aWFscyIgaW4gbil7bi53aXRoQ3JlZGVudGlhbHM9dHJ1ZTsKfW4ub25yZWFkeXN0YXRlY2hhbmdlPXRoaXMub25TdGF0ZUNoYW5nZS5iaW5kKHRoaXMpO09iamVjdC5lYWNoKHRoaXMuaGVhZGVycyxmdW5jdGlvbihxLHApe3RyeXtuLnNldFJlcXVlc3RIZWFkZXIocCxxKTt9Y2F0Y2gocil7dGhpcy5maXJlRXZlbnQoImV4Y2VwdGlvbiIsW3AscV0pOwp9fSx0aGlzKTt0aGlzLmZpcmVFdmVudCgicmVxdWVzdCIpO24uc2VuZChqKTtpZighdGhpcy5vcHRpb25zLmFzeW5jKXt0aGlzLm9uU3RhdGVDaGFuZ2UoKTt9aWYodGhpcy5vcHRpb25zLnRpbWVvdXQpe3RoaXMudGltZXI9dGhpcy50aW1lb3V0LmRlbGF5KHRoaXMub3B0aW9ucy50aW1lb3V0LHRoaXMpOwp9cmV0dXJuIHRoaXM7fSxjYW5jZWw6ZnVuY3Rpb24oKXtpZighdGhpcy5ydW5uaW5nKXtyZXR1cm4gdGhpczt9dGhpcy5ydW5uaW5nPWZhbHNlO3ZhciBlPXRoaXMueGhyO2UuYWJvcnQoKTtjbGVhclRpbWVvdXQodGhpcy50aW1lcik7ZS5vbnJlYWR5c3RhdGVjaGFuZ2U9ZDsKaWYoYSl7ZS5vbnByb2dyZXNzPWUub25sb2Fkc3RhcnQ9ZDt9dGhpcy54aHI9bmV3IEJyb3dzZXIuUmVxdWVzdCgpO3RoaXMuZmlyZUV2ZW50KCJjYW5jZWwiKTtyZXR1cm4gdGhpczt9fSk7dmFyIGI9e307WyJnZXQiLCJwb3N0IiwicHV0IiwiZGVsZXRlIiwiR0VUIiwiUE9TVCIsIlBVVCIsIkRFTEVURSJdLmVhY2goZnVuY3Rpb24oZSl7YltlXT1mdW5jdGlvbihnKXt2YXIgZj17bWV0aG9kOmV9OwppZihnIT1udWxsKXtmLmRhdGE9Zzt9cmV0dXJuIHRoaXMuc2VuZChmKTt9O30pO2MuaW1wbGVtZW50KGIpO0VsZW1lbnQuUHJvcGVydGllcy5zZW5kPXtzZXQ6ZnVuY3Rpb24oZSl7dmFyIGY9dGhpcy5nZXQoInNlbmQiKS5jYW5jZWwoKTtmLnNldE9wdGlvbnMoZSk7CnJldHVybiB0aGlzO30sZ2V0OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5yZXRyaWV2ZSgic2VuZCIpO2lmKCFlKXtlPW5ldyBjKHtkYXRhOnRoaXMsbGluazoiY2FuY2VsIixtZXRob2Q6dGhpcy5nZXQoIm1ldGhvZCIpfHwicG9zdCIsdXJsOnRoaXMuZ2V0KCJhY3Rpb24iKX0pOwp0aGlzLnN0b3JlKCJzZW5kIixlKTt9cmV0dXJuIGU7fX07RWxlbWVudC5pbXBsZW1lbnQoe3NlbmQ6ZnVuY3Rpb24oZSl7dmFyIGY9dGhpcy5nZXQoInNlbmQiKTtmLnNlbmQoe2RhdGE6dGhpcyx1cmw6ZXx8Zi5vcHRpb25zLnVybH0pO3JldHVybiB0aGlzO319KTt9KSgpOwpSZXF1ZXN0LkhUTUw9bmV3IENsYXNzKHtFeHRlbmRzOlJlcXVlc3Qsb3B0aW9uczp7dXBkYXRlOmZhbHNlLGFwcGVuZDpmYWxzZSxldmFsU2NyaXB0czp0cnVlLGZpbHRlcjpmYWxzZSxoZWFkZXJzOntBY2NlcHQ6InRleHQvaHRtbCwgYXBwbGljYXRpb24veG1sLCB0ZXh0L3htbCwgKi8qIn19LHN1Y2Nlc3M6ZnVuY3Rpb24oZSl7dmFyIGQ9dGhpcy5vcHRpb25zLGI9dGhpcy5yZXNwb25zZTsKYi5odG1sPWUuc3RyaXBTY3JpcHRzKGZ1bmN0aW9uKGYpe2IuamF2YXNjcmlwdD1mO30pO3ZhciBjPWIuaHRtbC5tYXRjaCgvPGJvZHlbXj5dKj4oW1xzXFNdKj8pPFwvYm9keT4vaSk7aWYoYyl7Yi5odG1sPWNbMV07fXZhciBhPW5ldyBFbGVtZW50KCJkaXYiKS5zZXQoImh0bWwiLGIuaHRtbCk7CmIudHJlZT1hLmNoaWxkTm9kZXM7Yi5lbGVtZW50cz1hLmdldEVsZW1lbnRzKCIqIik7aWYoZC5maWx0ZXIpe2IudHJlZT1iLmVsZW1lbnRzLmZpbHRlcihkLmZpbHRlcik7fWlmKGQudXBkYXRlKXtkb2N1bWVudC5pZChkLnVwZGF0ZSkuZW1wdHkoKS5zZXQoImh0bWwiLGIuaHRtbCk7Cn1lbHNle2lmKGQuYXBwZW5kKXtkb2N1bWVudC5pZChkLmFwcGVuZCkuYWRvcHQoYS5nZXRDaGlsZHJlbigpKTt9fWlmKGQuZXZhbFNjcmlwdHMpe0Jyb3dzZXIuZXhlYyhiLmphdmFzY3JpcHQpO310aGlzLm9uU3VjY2VzcyhiLnRyZWUsYi5lbGVtZW50cyxiLmh0bWwsYi5qYXZhc2NyaXB0KTsKfX0pO0VsZW1lbnQuUHJvcGVydGllcy5sb2FkPXtzZXQ6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5nZXQoImxvYWQiKS5jYW5jZWwoKTtiLnNldE9wdGlvbnMoYSk7cmV0dXJuIHRoaXM7fSxnZXQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnJldHJpZXZlKCJsb2FkIik7aWYoIWEpe2E9bmV3IFJlcXVlc3QuSFRNTCh7ZGF0YTp0aGlzLGxpbms6ImNhbmNlbCIsdXBkYXRlOnRoaXMsbWV0aG9kOiJnZXQifSk7CnRoaXMuc3RvcmUoImxvYWQiLGEpO31yZXR1cm4gYTt9fTtFbGVtZW50LmltcGxlbWVudCh7bG9hZDpmdW5jdGlvbigpe3RoaXMuZ2V0KCJsb2FkIikuc2VuZChBcnJheS5saW5rKGFyZ3VtZW50cyx7ZGF0YTpUeXBlLmlzT2JqZWN0LHVybDpUeXBlLmlzU3RyaW5nfSkpOwpyZXR1cm4gdGhpczt9fSk7aWYodHlwZW9mIEpTT049PSJ1bmRlZmluZWQiKXt0aGlzLkpTT049e307fUpTT049bmV3IEhhc2goe3N0cmluZ2lmeTpKU09OLnN0cmluZ2lmeSxwYXJzZTpKU09OLnBhcnNlfSk7KGZ1bmN0aW9uKCl7dmFyIHNwZWNpYWw9eyJcYiI6IlxcYiIsIlx0IjoiXFx0IiwiXG4iOiJcXG4iLCJcZiI6IlxcZiIsIlxyIjoiXFxyIiwnIic6J1xcIicsIlxcIjoiXFxcXCJ9Owp2YXIgZXNjYXBlPWZ1bmN0aW9uKGNocil7cmV0dXJuIHNwZWNpYWxbY2hyXXx8IlxcdSIrKCIwMDAwIitjaHIuY2hhckNvZGVBdCgwKS50b1N0cmluZygxNikpLnNsaWNlKC00KTt9O0pTT04udmFsaWRhdGU9ZnVuY3Rpb24oc3RyaW5nKXtzdHJpbmc9c3RyaW5nLnJlcGxhY2UoL1xcKD86WyJcXFwvYmZucnRdfHVbMC05YS1mQS1GXXs0fSkvZywiQCIpLnJlcGxhY2UoLyJbXiJcXFxuXHJdKiJ8dHJ1ZXxmYWxzZXxudWxsfC0/XGQrKD86XC5cZCopPyg/OltlRV1bK1wtXT9cZCspPy9nLCJdIikucmVwbGFjZSgvKD86Xnw6fCwpKD86XHMqXFspKy9nLCIiKTsKcmV0dXJuKC9eW1xdLDp7fVxzXSokLykudGVzdChzdHJpbmcpO307SlNPTi5lbmNvZGU9SlNPTi5zdHJpbmdpZnk/ZnVuY3Rpb24ob2JqKXtyZXR1cm4gSlNPTi5zdHJpbmdpZnkob2JqKTt9OmZ1bmN0aW9uKG9iail7aWYob2JqJiZvYmoudG9KU09OKXtvYmo9b2JqLnRvSlNPTigpOwp9c3dpdGNoKHR5cGVPZihvYmopKXtjYXNlInN0cmluZyI6cmV0dXJuJyInK29iai5yZXBsYWNlKC9bXHgwMC1ceDFmXFwiXS9nLGVzY2FwZSkrJyInO2Nhc2UiYXJyYXkiOnJldHVybiJbIitvYmoubWFwKEpTT04uZW5jb2RlKS5jbGVhbigpKyJdIjtjYXNlIm9iamVjdCI6Y2FzZSJoYXNoIjp2YXIgc3RyaW5nPVtdOwpPYmplY3QuZWFjaChvYmosZnVuY3Rpb24odmFsdWUsa2V5KXt2YXIganNvbj1KU09OLmVuY29kZSh2YWx1ZSk7aWYoanNvbil7c3RyaW5nLnB1c2goSlNPTi5lbmNvZGUoa2V5KSsiOiIranNvbik7fX0pO3JldHVybiJ7IitzdHJpbmcrIn0iO2Nhc2UibnVtYmVyIjpjYXNlImJvb2xlYW4iOnJldHVybiIiK29iajsKY2FzZSJudWxsIjpyZXR1cm4ibnVsbCI7fXJldHVybiBudWxsO307SlNPTi5kZWNvZGU9ZnVuY3Rpb24oc3RyaW5nLHNlY3VyZSl7aWYoIXN0cmluZ3x8dHlwZU9mKHN0cmluZykhPSJzdHJpbmciKXtyZXR1cm4gbnVsbDt9aWYoc2VjdXJlfHxKU09OLnNlY3VyZSl7aWYoSlNPTi5wYXJzZSl7cmV0dXJuIEpTT04ucGFyc2Uoc3RyaW5nKTsKfWlmKCFKU09OLnZhbGlkYXRlKHN0cmluZykpe3Rocm93IG5ldyBFcnJvcigiSlNPTiBjb3VsZCBub3QgZGVjb2RlIHRoZSBpbnB1dDsgc2VjdXJpdHkgaXMgZW5hYmxlZCBhbmQgdGhlIHZhbHVlIGlzIG5vdCBzZWN1cmUuIik7fX1yZXR1cm4gZXZhbCgiKCIrc3RyaW5nKyIpIik7Cn07fSkoKTtSZXF1ZXN0LkpTT049bmV3IENsYXNzKHtFeHRlbmRzOlJlcXVlc3Qsb3B0aW9uczp7c2VjdXJlOnRydWV9LGluaXRpYWxpemU6ZnVuY3Rpb24oYSl7dGhpcy5wYXJlbnQoYSk7T2JqZWN0LmFwcGVuZCh0aGlzLmhlYWRlcnMse0FjY2VwdDoiYXBwbGljYXRpb24vanNvbiIsIlgtUmVxdWVzdCI6IkpTT04ifSk7Cn0sc3VjY2VzczpmdW5jdGlvbihjKXt2YXIgYjt0cnl7Yj10aGlzLnJlc3BvbnNlLmpzb249SlNPTi5kZWNvZGUoYyx0aGlzLm9wdGlvbnMuc2VjdXJlKTt9Y2F0Y2goYSl7dGhpcy5maXJlRXZlbnQoImVycm9yIixbYyxhXSk7cmV0dXJuO31pZihiPT1udWxsKXt0aGlzLm9uRmFpbHVyZSgpOwp9ZWxzZXt0aGlzLm9uU3VjY2VzcyhiLGMpO319fSk7dmFyIENvb2tpZT1uZXcgQ2xhc3Moe0ltcGxlbWVudHM6T3B0aW9ucyxvcHRpb25zOntwYXRoOiIvIixkb21haW46ZmFsc2UsZHVyYXRpb246ZmFsc2Usc2VjdXJlOmZhbHNlLGRvY3VtZW50OmRvY3VtZW50LGVuY29kZTp0cnVlfSxpbml0aWFsaXplOmZ1bmN0aW9uKGIsYSl7dGhpcy5rZXk9YjsKdGhpcy5zZXRPcHRpb25zKGEpO30sd3JpdGU6ZnVuY3Rpb24oYil7aWYodGhpcy5vcHRpb25zLmVuY29kZSl7Yj1lbmNvZGVVUklDb21wb25lbnQoYik7fWlmKHRoaXMub3B0aW9ucy5kb21haW4pe2IrPSI7IGRvbWFpbj0iK3RoaXMub3B0aW9ucy5kb21haW47fWlmKHRoaXMub3B0aW9ucy5wYXRoKXtiKz0iOyBwYXRoPSIrdGhpcy5vcHRpb25zLnBhdGg7Cn1pZih0aGlzLm9wdGlvbnMuZHVyYXRpb24pe3ZhciBhPW5ldyBEYXRlKCk7YS5zZXRUaW1lKGEuZ2V0VGltZSgpK3RoaXMub3B0aW9ucy5kdXJhdGlvbioyNCo2MCo2MCoxMDAwKTtiKz0iOyBleHBpcmVzPSIrYS50b0dNVFN0cmluZygpO31pZih0aGlzLm9wdGlvbnMuc2VjdXJlKXtiKz0iOyBzZWN1cmUiOwp9dGhpcy5vcHRpb25zLmRvY3VtZW50LmNvb2tpZT10aGlzLmtleSsiPSIrYjtyZXR1cm4gdGhpczt9LHJlYWQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm9wdGlvbnMuZG9jdW1lbnQuY29va2llLm1hdGNoKCIoPzpefDspXFxzKiIrdGhpcy5rZXkuZXNjYXBlUmVnRXhwKCkrIj0oW147XSopIik7CnJldHVybihhKT9kZWNvZGVVUklDb21wb25lbnQoYVsxXSk6bnVsbDt9LGRpc3Bvc2U6ZnVuY3Rpb24oKXtuZXcgQ29va2llKHRoaXMua2V5LE9iamVjdC5tZXJnZSh7fSx0aGlzLm9wdGlvbnMse2R1cmF0aW9uOi0xfSkpLndyaXRlKCIiKTtyZXR1cm4gdGhpczt9fSk7CkNvb2tpZS53cml0ZT1mdW5jdGlvbihiLGMsYSl7cmV0dXJuIG5ldyBDb29raWUoYixhKS53cml0ZShjKTt9O0Nvb2tpZS5yZWFkPWZ1bmN0aW9uKGEpe3JldHVybiBuZXcgQ29va2llKGEpLnJlYWQoKTt9O0Nvb2tpZS5kaXNwb3NlPWZ1bmN0aW9uKGIsYSl7cmV0dXJuIG5ldyBDb29raWUoYixhKS5kaXNwb3NlKCk7Cn07KGZ1bmN0aW9uKGksayl7dmFyIGwsZixlPVtdLGMsYixkPWsuY3JlYXRlRWxlbWVudCgiZGl2Iik7dmFyIGc9ZnVuY3Rpb24oKXtjbGVhclRpbWVvdXQoYik7aWYobCl7cmV0dXJuO31Ccm93c2VyLmxvYWRlZD1sPXRydWU7ay5yZW1vdmVMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsZykucmVtb3ZlTGlzdGVuZXIoInJlYWR5c3RhdGVjaGFuZ2UiLGEpOwprLmZpcmVFdmVudCgiZG9tcmVhZHkiKTtpLmZpcmVFdmVudCgiZG9tcmVhZHkiKTt9O3ZhciBhPWZ1bmN0aW9uKCl7Zm9yKHZhciBtPWUubGVuZ3RoO20tLTspe2lmKGVbbV0oKSl7ZygpO3JldHVybiB0cnVlO319cmV0dXJuIGZhbHNlO307dmFyIGo9ZnVuY3Rpb24oKXtjbGVhclRpbWVvdXQoYik7CmlmKCFhKCkpe2I9c2V0VGltZW91dChqLDEwKTt9fTtrLmFkZExpc3RlbmVyKCJET01Db250ZW50TG9hZGVkIixnKTt2YXIgaD1mdW5jdGlvbigpe3RyeXtkLmRvU2Nyb2xsKCk7cmV0dXJuIHRydWU7fWNhdGNoKG0pe31yZXR1cm4gZmFsc2U7fTtpZihkLmRvU2Nyb2xsJiYhaCgpKXtlLnB1c2goaCk7CmM9dHJ1ZTt9aWYoay5yZWFkeVN0YXRlKXtlLnB1c2goZnVuY3Rpb24oKXt2YXIgbT1rLnJlYWR5U3RhdGU7cmV0dXJuKG09PSJsb2FkZWQifHxtPT0iY29tcGxldGUiKTt9KTt9aWYoIm9ucmVhZHlzdGF0ZWNoYW5nZSIgaW4gayl7ay5hZGRMaXN0ZW5lcigicmVhZHlzdGF0ZWNoYW5nZSIsYSk7Cn1lbHNle2M9dHJ1ZTt9aWYoYyl7aigpO31FbGVtZW50LkV2ZW50cy5kb21yZWFkeT17b25BZGQ6ZnVuY3Rpb24obSl7aWYobCl7bS5jYWxsKHRoaXMpO319fTtFbGVtZW50LkV2ZW50cy5sb2FkPXtiYXNlOiJsb2FkIixvbkFkZDpmdW5jdGlvbihtKXtpZihmJiZ0aGlzPT1pKXttLmNhbGwodGhpcyk7Cn19LGNvbmRpdGlvbjpmdW5jdGlvbigpe2lmKHRoaXM9PWkpe2coKTtkZWxldGUgRWxlbWVudC5FdmVudHMubG9hZDt9cmV0dXJuIHRydWU7fX07aS5hZGRFdmVudCgibG9hZCIsZnVuY3Rpb24oKXtmPXRydWU7fSk7fSkod2luZG93LGRvY3VtZW50KTsoZnVuY3Rpb24oKXt2YXIgU3dpZmY9dGhpcy5Td2lmZj1uZXcgQ2xhc3Moe0ltcGxlbWVudHM6T3B0aW9ucyxvcHRpb25zOntpZDpudWxsLGhlaWdodDoxLHdpZHRoOjEsY29udGFpbmVyOm51bGwscHJvcGVydGllczp7fSxwYXJhbXM6e3F1YWxpdHk6ImhpZ2giLGFsbG93U2NyaXB0QWNjZXNzOiJhbHdheXMiLHdNb2RlOiJ3aW5kb3ciLHN3TGl2ZUNvbm5lY3Q6dHJ1ZX0sY2FsbEJhY2tzOnt9LHZhcnM6e319LHRvRWxlbWVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLm9iamVjdDsKfSxpbml0aWFsaXplOmZ1bmN0aW9uKHBhdGgsb3B0aW9ucyl7dGhpcy5pbnN0YW5jZT0iU3dpZmZfIitTdHJpbmcudW5pcXVlSUQoKTt0aGlzLnNldE9wdGlvbnMob3B0aW9ucyk7b3B0aW9ucz10aGlzLm9wdGlvbnM7dmFyIGlkPXRoaXMuaWQ9b3B0aW9ucy5pZHx8dGhpcy5pbnN0YW5jZTsKdmFyIGNvbnRhaW5lcj1kb2N1bWVudC5pZChvcHRpb25zLmNvbnRhaW5lcik7U3dpZmYuQ2FsbEJhY2tzW3RoaXMuaW5zdGFuY2VdPXt9O3ZhciBwYXJhbXM9b3B0aW9ucy5wYXJhbXMsdmFycz1vcHRpb25zLnZhcnMsY2FsbEJhY2tzPW9wdGlvbnMuY2FsbEJhY2tzOwp2YXIgcHJvcGVydGllcz1PYmplY3QuYXBwZW5kKHtoZWlnaHQ6b3B0aW9ucy5oZWlnaHQsd2lkdGg6b3B0aW9ucy53aWR0aH0sb3B0aW9ucy5wcm9wZXJ0aWVzKTt2YXIgc2VsZj10aGlzO2Zvcih2YXIgY2FsbEJhY2sgaW4gY2FsbEJhY2tzKXtTd2lmZi5DYWxsQmFja3NbdGhpcy5pbnN0YW5jZV1bY2FsbEJhY2tdPShmdW5jdGlvbihvcHRpb24pe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBvcHRpb24uYXBwbHkoc2VsZi5vYmplY3QsYXJndW1lbnRzKTsKfTt9KShjYWxsQmFja3NbY2FsbEJhY2tdKTt2YXJzW2NhbGxCYWNrXT0iU3dpZmYuQ2FsbEJhY2tzLiIrdGhpcy5pbnN0YW5jZSsiLiIrY2FsbEJhY2s7fXBhcmFtcy5mbGFzaFZhcnM9T2JqZWN0LnRvUXVlcnlTdHJpbmcodmFycyk7aWYoQnJvd3Nlci5pZSl7cHJvcGVydGllcy5jbGFzc2lkPSJjbHNpZDpEMjdDREI2RS1BRTZELTExY2YtOTZCOC00NDQ1NTM1NDAwMDAiOwpwYXJhbXMubW92aWU9cGF0aDt9ZWxzZXtwcm9wZXJ0aWVzLnR5cGU9ImFwcGxpY2F0aW9uL3gtc2hvY2t3YXZlLWZsYXNoIjt9cHJvcGVydGllcy5kYXRhPXBhdGg7dmFyIGJ1aWxkPSc8b2JqZWN0IGlkPSInK2lkKyciJztmb3IodmFyIHByb3BlcnR5IGluIHByb3BlcnRpZXMpe2J1aWxkKz0iICIrcHJvcGVydHkrJz0iJytwcm9wZXJ0aWVzW3Byb3BlcnR5XSsnIic7Cn1idWlsZCs9Ij4iO2Zvcih2YXIgcGFyYW0gaW4gcGFyYW1zKXtpZihwYXJhbXNbcGFyYW1dKXtidWlsZCs9JzxwYXJhbSBuYW1lPSInK3BhcmFtKyciIHZhbHVlPSInK3BhcmFtc1twYXJhbV0rJyIgLz4nO319YnVpbGQrPSI8L29iamVjdD4iO3RoaXMub2JqZWN0PSgoY29udGFpbmVyKT9jb250YWluZXIuZW1wdHkoKTpuZXcgRWxlbWVudCgiZGl2IikpLnNldCgiaHRtbCIsYnVpbGQpLmZpcnN0Q2hpbGQ7Cn0scmVwbGFjZXM6ZnVuY3Rpb24oZWxlbWVudCl7ZWxlbWVudD1kb2N1bWVudC5pZChlbGVtZW50LHRydWUpO2VsZW1lbnQucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQodGhpcy50b0VsZW1lbnQoKSxlbGVtZW50KTtyZXR1cm4gdGhpczt9LGluamVjdDpmdW5jdGlvbihlbGVtZW50KXtkb2N1bWVudC5pZChlbGVtZW50LHRydWUpLmFwcGVuZENoaWxkKHRoaXMudG9FbGVtZW50KCkpOwpyZXR1cm4gdGhpczt9LHJlbW90ZTpmdW5jdGlvbigpe3JldHVybiBTd2lmZi5yZW1vdGUuYXBwbHkoU3dpZmYsW3RoaXMudG9FbGVtZW50KCldLmFwcGVuZChhcmd1bWVudHMpKTt9fSk7U3dpZmYuQ2FsbEJhY2tzPXt9O1N3aWZmLnJlbW90ZT1mdW5jdGlvbihvYmosZm4pe3ZhciBycz1vYmouQ2FsbEZ1bmN0aW9uKCc8aW52b2tlIG5hbWU9IicrZm4rJyIgcmV0dXJudHlwZT0iamF2YXNjcmlwdCI+JytfX2ZsYXNoX19hcmd1bWVudHNUb1hNTChhcmd1bWVudHMsMikrIjwvaW52b2tlPiIpOwpyZXR1cm4gZXZhbChycyk7fTt9KSgpOw==",
                "headers": {
                    "Accept-Ranges": "bytes",
                    "Last-Modified": "Sat, 08 Nov 2014 03:55:00 GMT",
                    "Content-Length": "88540",
                    "Date": "Sat, 08 Nov 2014 03:55:41 GMT",
                    "Content-Type": "application/javascript"
                },
                "cookies": [],
                "mimeType": "script",
                "host": "localhost",
                "protocol": "http",
                "port": 9999,
                "inScope": false,
                "toolFlag": 16962,
                "referenceID": 0,
                "messageType": "response"
            },
            "messageType": "requestResponse"
        }
    ],
    "inScope": true,
    "messageType": "scanIssue"
}