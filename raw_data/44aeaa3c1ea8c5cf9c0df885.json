{
    "url": "http://localhost:9999/WillsonSmith/polymer-futurama-quotes/components/platform/platform.js",
    "host": "localhost",
    "port": 9999,
    "protocol": "http",
    "name": "Link manipulation (DOM-based)",
    "issueType": 5246976,
    "severity": "Low",
    "confidence": "Firm",
    "issueBackground": "DOM-based link manipulation vulnerabilities arise when a client-side script within an application's response reads data from a controllable part of the DOM (for example, the URL), and writes this to a navigation target within the current page, such as a clickable link or the submission URL of a form. An attacker may be able to use the vulnerability to construct a URL which, if visited by another application user, will modify the target of links within the response. An attacker may be able to leverage this to perform various attacks, including:<ul><li>Causing the user to redirect to an arbitrary external URL, to facilitate a phishing attack.</li><li>Causing the user to submit sensitive form data to a server controlled by the attacker.</li><li>Causing the user to perform an unintended action within the application, by changing the file or query string associated with a link.</li><li>Bypassing browser anti-XSS defenses by injecting on-site links containing XSS exploits, since browser anti-XSS defenses typically do not operate on on-site links.</li></ul>",
    "remediationBackground": "Static analysis of code to identify vulnerabilities of this kind may lead to false positives that are not actually exploitable. You should review the highlighted code and related execution paths to determine whether the application is indeed vulnerable, or whether mitigations are in place that would prevent exploitation.<br><br>The most effective way to avoid DOM-based link manipulation vulnerabilities is not to dynamically set the target URLs of links or forms using data that originated from any untrusted source. If the desired functionality of the application means that this behavior is unavoidable, then defenses must be implemented within the client-side code to prevent malicious data from introducing an arbitrary URL as a link target. In general, this is best achieved by using a whitelist of URLs that are permitted link targets, and strictly validating the target against this list before setting the link target.",
    "issueDetail": "The application may be vulnerable to DOM-based link manipulation. Data is read from <b>the 'baseURI' property of a DOM element</b> and written to <b>the 'href' property of a DOM element</b> via the following statement:<ul><li>b.href=document.baseURI,a.head.appendChild(b)</li></ul>",
    "requestResponses": [
        {
            "request": {
                "host": "localhost",
                "port": 9999,
                "protocol": "http",
                "url": "http://localhost:9999/WillsonSmith/polymer-futurama-quotes/components/platform/platform.js",
                "path": "/WillsonSmith/polymer-futurama-quotes/components/platform/platform.js",
                "httpVersion": "HTTP/1.1",
                "method": "GET",
                "headers": {
                    "Host": "localhost:9999"
                },
                "body": "",
                "raw": "R0VUIC9XaWxsc29uU21pdGgvcG9seW1lci1mdXR1cmFtYS1xdW90ZXMvY29tcG9uZW50cy9wbGF0Zm9ybS9wbGF0Zm9ybS5qcyBIVFRQLzEuMQ0KSG9zdDogbG9jYWxob3N0Ojk5OTkNCg0K",
                "inScope": true,
                "toolFlag": 16962,
                "referenceID": 0,
                "messageType": "request"
            },
            "response": {
                "statusCode": 200,
                "raw": "SFRUUC8xLjEgMjAwIE9LDQpDb250ZW50LUxlbmd0aDogMTU1NTI3DQpBY2NlcHQtUmFuZ2VzOiBieXRlcw0KQ29udGVudC1UeXBlOiBhcHBsaWNhdGlvbi9qYXZhc2NyaXB0DQpEYXRlOiBGcmksIDA3IE5vdiAyMDE0IDAyOjAyOjAzIEdNVA0KTGFzdC1Nb2RpZmllZDogRnJpLCAwNyBOb3YgMjAxNCAwMjowMjowMyBHTVQNCg0KLyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAoYykgMjAxNCBUaGUgUG9seW1lciBQcm9qZWN0IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuCiAqIFRoaXMgY29kZSBtYXkgb25seSBiZSB1c2VkIHVuZGVyIHRoZSBCU0Qgc3R5bGUgbGljZW5zZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vTElDRU5TRS50eHQKICogVGhlIGNvbXBsZXRlIHNldCBvZiBhdXRob3JzIG1heSBiZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQVVUSE9SUy50eHQKICogVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9DT05UUklCVVRPUlMudHh0CiAqIENvZGUgZGlzdHJpYnV0ZWQgYnkgR29vZ2xlIGFzIHBhcnQgb2YgdGhlIHBvbHltZXIgcHJvamVjdCBpcyBhbHNvCiAqIHN1YmplY3QgdG8gYW4gYWRkaXRpb25hbCBJUCByaWdodHMgZ3JhbnQgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL1BBVEVOVFMudHh0CiAqLwovLyBAdmVyc2lvbjogMC4zLjQKCndpbmRvdy5QbGF0Zm9ybT13aW5kb3cuUGxhdGZvcm18fHt9LHdpbmRvdy5sb2dGbGFncz13aW5kb3cubG9nRmxhZ3N8fHt9LGZ1bmN0aW9uKGEpe3ZhciBiPWEuZmxhZ3N8fHt9O2xvY2F0aW9uLnNlYXJjaC5zbGljZSgxKS5zcGxpdCgiJiIpLmZvckVhY2goZnVuY3Rpb24oYSl7YT1hLnNwbGl0KCI9IiksYVswXSYmKGJbYVswXV09YVsxXXx8ITApfSk7dmFyIGM9ZG9jdW1lbnQuY3VycmVudFNjcmlwdHx8ZG9jdW1lbnQucXVlcnlTZWxlY3Rvcignc2NyaXB0W3NyYyo9InBsYXRmb3JtLmpzIl0nKTtpZihjKWZvcih2YXIgZCxlPWMuYXR0cmlidXRlcyxmPTA7ZjxlLmxlbmd0aDtmKyspZD1lW2ZdLCJzcmMiIT09ZC5uYW1lJiYoYltkLm5hbWVdPWQudmFsdWV8fCEwKTtiLmxvZyYmYi5sb2cuc3BsaXQoIiwiKS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3dpbmRvdy5sb2dGbGFnc1thXT0hMH0pLGIuc2hhZG93PWIuc2hhZG93fHxiLnNoYWRvd2RvbXx8Yi5wb2x5ZmlsbCxiLnNoYWRvdz0ibmF0aXZlIj09PWIuc2hhZG93PyExOmIuc2hhZG93fHwhSFRNTEVsZW1lbnQucHJvdG90eXBlLmNyZWF0ZVNoYWRvd1Jvb3QsYi5zaGFkb3cmJmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoInNjcmlwdCIpLmxlbmd0aD4xJiZjb25zb2xlLndhcm4oInBsYXRmb3JtLmpzIGlzIG5vdCB0aGUgZmlyc3Qgc2NyaXB0IG9uIHRoZSBwYWdlLiBTZWUgaHR0cDovL3d3dy5wb2x5bWVyLXByb2plY3Qub3JnL2RvY3Mvc3RhcnQvcGxhdGZvcm0uaHRtbCNzZXR1cCBmb3IgZGV0YWlscy4iKSxiLnJlZ2lzdGVyJiYod2luZG93LkN1c3RvbUVsZW1lbnRzPXdpbmRvdy5DdXN0b21FbGVtZW50c3x8e2ZsYWdzOnt9fSx3aW5kb3cuQ3VzdG9tRWxlbWVudHMuZmxhZ3MucmVnaXN0ZXI9Yi5yZWdpc3RlciksYi5pbXBvcnRzJiYod2luZG93LkhUTUxJbXBvcnRzPXdpbmRvdy5IVE1MSW1wb3J0c3x8e2ZsYWdzOnt9fSx3aW5kb3cuSFRNTEltcG9ydHMuZmxhZ3MuaW1wb3J0cz1iLmltcG9ydHMpLGEuZmxhZ3M9Yn0oUGxhdGZvcm0pLCJ1bmRlZmluZWQiPT10eXBlb2YgV2Vha01hcCYmIWZ1bmN0aW9uKCl7dmFyIGE9T2JqZWN0LmRlZmluZVByb3BlcnR5LGI9RGF0ZS5ub3coKSUxZTksYz1mdW5jdGlvbigpe3RoaXMubmFtZT0iX19zdCIrKDFlOSpNYXRoLnJhbmRvbSgpPj4+MCkrKGIrKyArIl9fIil9O2MucHJvdG90eXBlPXtzZXQ6ZnVuY3Rpb24oYixjKXt2YXIgZD1iW3RoaXMubmFtZV07ZCYmZFswXT09PWI/ZFsxXT1jOmEoYix0aGlzLm5hbWUse3ZhbHVlOltiLGNdLHdyaXRhYmxlOiEwfSl9LGdldDpmdW5jdGlvbihhKXt2YXIgYjtyZXR1cm4oYj1hW3RoaXMubmFtZV0pJiZiWzBdPT09YT9iWzFdOnZvaWQgMH0sImRlbGV0ZSI6ZnVuY3Rpb24oYSl7dGhpcy5zZXQoYSx2b2lkIDApfX0sd2luZG93LldlYWtNYXA9Y30oKSxmdW5jdGlvbihnbG9iYWwpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBkZXRlY3RPYmplY3RPYnNlcnZlKCl7ZnVuY3Rpb24gYShhKXtiPWF9aWYoImZ1bmN0aW9uIiE9dHlwZW9mIE9iamVjdC5vYnNlcnZlfHwiZnVuY3Rpb24iIT10eXBlb2YgQXJyYXkub2JzZXJ2ZSlyZXR1cm4hMTt2YXIgYj1bXSxjPXt9LGQ9W107cmV0dXJuIE9iamVjdC5vYnNlcnZlKGMsYSksQXJyYXkub2JzZXJ2ZShkLGEpLGMuaWQ9MSxjLmlkPTIsZGVsZXRlIGMuaWQsZC5wdXNoKDEsMiksZC5sZW5ndGg9MCxPYmplY3QuZGVsaXZlckNoYW5nZVJlY29yZHMoYSksNSE9PWIubGVuZ3RoPyExOiJhZGQiIT1iWzBdLnR5cGV8fCJ1cGRhdGUiIT1iWzFdLnR5cGV8fCJkZWxldGUiIT1iWzJdLnR5cGV8fCJzcGxpY2UiIT1iWzNdLnR5cGV8fCJzcGxpY2UiIT1iWzRdLnR5cGU/ITE6KE9iamVjdC51bm9ic2VydmUoYyxhKSxBcnJheS51bm9ic2VydmUoZCxhKSwhMCl9ZnVuY3Rpb24gZGV0ZWN0RXZhbCgpe2lmKCJ1bmRlZmluZWQiIT10eXBlb2YgY2hyb21lJiZjaHJvbWUuYXBwJiZjaHJvbWUuYXBwLnJ1bnRpbWUpcmV0dXJuITE7dHJ5e3ZhciBhPW5ldyBGdW5jdGlvbigiIiwicmV0dXJuIHRydWU7Iik7cmV0dXJuIGEoKX1jYXRjaChiKXtyZXR1cm4hMX19ZnVuY3Rpb24gaXNJbmRleChhKXtyZXR1cm4rYT09PWE+Pj4wfWZ1bmN0aW9uIHRvTnVtYmVyKGEpe3JldHVybithfWZ1bmN0aW9uIGlzT2JqZWN0KGEpe3JldHVybiBhPT09T2JqZWN0KGEpfWZ1bmN0aW9uIGFyZVNhbWVWYWx1ZShhLGIpe3JldHVybiBhPT09Yj8wIT09YXx8MS9hPT09MS9iOm51bWJlcklzTmFOKGEpJiZudW1iZXJJc05hTihiKT8hMDphIT09YSYmYiE9PWJ9ZnVuY3Rpb24gZ2V0UGF0aENoYXJUeXBlKGEpe2lmKHZvaWQgMD09PWEpcmV0dXJuImVvZiI7dmFyIGI9YS5jaGFyQ29kZUF0KDApO3N3aXRjaChiKXtjYXNlIDkxOmNhc2UgOTM6Y2FzZSA0NjpjYXNlIDM0OmNhc2UgMzk6Y2FzZSA0ODpyZXR1cm4gYTtjYXNlIDk1OmNhc2UgMzY6cmV0dXJuImlkZW50IjtjYXNlIDMyOmNhc2UgOTpjYXNlIDEwOmNhc2UgMTM6Y2FzZSAxNjA6Y2FzZSA2NTI3OTpjYXNlIDgyMzI6Y2FzZSA4MjMzOnJldHVybiJ3cyJ9cmV0dXJuIGI+PTk3JiYxMjI+PWJ8fGI+PTY1JiY5MD49Yj8iaWRlbnQiOmI+PTQ5JiY1Nz49Yj8ibnVtYmVyIjoiZWxzZSJ9ZnVuY3Rpb24gbm9vcCgpe31mdW5jdGlvbiBwYXJzZVBhdGgoYSl7ZnVuY3Rpb24gYigpe2lmKCEoaz49YS5sZW5ndGgpKXt2YXIgYj1hW2srMV07cmV0dXJuImluU2luZ2xlUXVvdGUiPT1sJiYiJyI9PWJ8fCJpbkRvdWJsZVF1b3RlIj09bCYmJyInPT1iPyhrKyssZD1iLG0uYXBwZW5kKCksITApOnZvaWQgMH19Zm9yKHZhciBjLGQsZSxmLGcsaCxpLGo9W10saz0tMSxsPSJiZWZvcmVQYXRoIixtPXtwdXNoOmZ1bmN0aW9uKCl7dm9pZCAwIT09ZSYmKGoucHVzaChlKSxlPXZvaWQgMCl9LGFwcGVuZDpmdW5jdGlvbigpe3ZvaWQgMD09PWU/ZT1kOmUrPWR9fTtsOylpZihrKyssYz1hW2tdLCJcXCIhPWN8fCFiKGwpKXtpZihmPWdldFBhdGhDaGFyVHlwZShjKSxpPXBhdGhTdGF0ZU1hY2hpbmVbbF0sZz1pW2ZdfHxpWyJlbHNlIl18fCJlcnJvciIsImVycm9yIj09ZylyZXR1cm47aWYobD1nWzBdLGg9bVtnWzFdXXx8bm9vcCxkPXZvaWQgMD09PWdbMl0/YzpnWzJdLGgoKSwiYWZ0ZXJQYXRoIj09PWwpcmV0dXJuIGp9fWZ1bmN0aW9uIGlzSWRlbnQoYSl7cmV0dXJuIGlkZW50UmVnRXhwLnRlc3QoYSl9ZnVuY3Rpb24gUGF0aChhLGIpe2lmKGIhPT1jb25zdHJ1Y3RvcklzUHJpdmF0ZSl0aHJvdyBFcnJvcigiVXNlIFBhdGguZ2V0IHRvIHJldHJpZXZlIHBhdGggb2JqZWN0cyIpO2Zvcih2YXIgYz0wO2M8YS5sZW5ndGg7YysrKXRoaXMucHVzaChTdHJpbmcoYVtjXSkpO2hhc0V2YWwmJnRoaXMubGVuZ3RoJiYodGhpcy5nZXRWYWx1ZUZyb209dGhpcy5jb21waWxlZEdldFZhbHVlRnJvbUZuKCkpfWZ1bmN0aW9uIGdldFBhdGgoYSl7aWYoYSBpbnN0YW5jZW9mIFBhdGgpcmV0dXJuIGE7aWYoKG51bGw9PWF8fDA9PWEubGVuZ3RoKSYmKGE9IiIpLCJzdHJpbmciIT10eXBlb2YgYSl7aWYoaXNJbmRleChhLmxlbmd0aCkpcmV0dXJuIG5ldyBQYXRoKGEsY29uc3RydWN0b3JJc1ByaXZhdGUpO2E9U3RyaW5nKGEpfXZhciBiPXBhdGhDYWNoZVthXTtpZihiKXJldHVybiBiO3ZhciBjPXBhcnNlUGF0aChhKTtpZighYylyZXR1cm4gaW52YWxpZFBhdGg7dmFyIGI9bmV3IFBhdGgoYyxjb25zdHJ1Y3RvcklzUHJpdmF0ZSk7cmV0dXJuIHBhdGhDYWNoZVthXT1iLGJ9ZnVuY3Rpb24gZm9ybWF0QWNjZXNzb3IoYSl7cmV0dXJuIGlzSW5kZXgoYSk/IlsiK2ErIl0iOidbIicrYS5yZXBsYWNlKC8iL2csJ1xcIicpKyciXSd9ZnVuY3Rpb24gZGlydHlDaGVjayhhKXtmb3IodmFyIGI9MDtNQVhfRElSVFlfQ0hFQ0tfQ1lDTEVTPmImJmEuY2hlY2tfKCk7KWIrKztyZXR1cm4gZ2xvYmFsLnRlc3RpbmdFeHBvc2VDeWNsZUNvdW50JiYoZ2xvYmFsLmRpcnR5Q2hlY2tDeWNsZUNvdW50PWIpLGI+MH1mdW5jdGlvbiBvYmplY3RJc0VtcHR5KGEpe2Zvcih2YXIgYiBpbiBhKXJldHVybiExO3JldHVybiEwfWZ1bmN0aW9uIGRpZmZJc0VtcHR5KGEpe3JldHVybiBvYmplY3RJc0VtcHR5KGEuYWRkZWQpJiZvYmplY3RJc0VtcHR5KGEucmVtb3ZlZCkmJm9iamVjdElzRW1wdHkoYS5jaGFuZ2VkKX1mdW5jdGlvbiBkaWZmT2JqZWN0RnJvbU9sZE9iamVjdChhLGIpe3ZhciBjPXt9LGQ9e30sZT17fTtmb3IodmFyIGYgaW4gYil7dmFyIGc9YVtmXTsodm9pZCAwPT09Z3x8ZyE9PWJbZl0pJiYoZiBpbiBhP2chPT1iW2ZdJiYoZVtmXT1nKTpkW2ZdPXZvaWQgMCl9Zm9yKHZhciBmIGluIGEpZiBpbiBifHwoY1tmXT1hW2ZdKTtyZXR1cm4gQXJyYXkuaXNBcnJheShhKSYmYS5sZW5ndGghPT1iLmxlbmd0aCYmKGUubGVuZ3RoPWEubGVuZ3RoKSx7YWRkZWQ6YyxyZW1vdmVkOmQsY2hhbmdlZDplfX1mdW5jdGlvbiBydW5FT01UYXNrcygpe2lmKCFlb21UYXNrcy5sZW5ndGgpcmV0dXJuITE7Zm9yKHZhciBhPTA7YTxlb21UYXNrcy5sZW5ndGg7YSsrKWVvbVRhc2tzW2FdKCk7cmV0dXJuIGVvbVRhc2tzLmxlbmd0aD0wLCEwfWZ1bmN0aW9uIG5ld09ic2VydmVkT2JqZWN0KCl7ZnVuY3Rpb24gYShhKXtiJiZiLnN0YXRlXz09PU9QRU5FRCYmIWQmJmIuY2hlY2tfKGEpfXZhciBiLGMsZD0hMSxlPSEwO3JldHVybntvcGVuOmZ1bmN0aW9uKGMpe2lmKGIpdGhyb3cgRXJyb3IoIk9ic2VydmVkT2JqZWN0IGluIHVzZSIpO2V8fE9iamVjdC5kZWxpdmVyQ2hhbmdlUmVjb3JkcyhhKSxiPWMsZT0hMX0sb2JzZXJ2ZTpmdW5jdGlvbihiLGQpe2M9YixkP0FycmF5Lm9ic2VydmUoYyxhKTpPYmplY3Qub2JzZXJ2ZShjLGEpfSxkZWxpdmVyOmZ1bmN0aW9uKGIpe2Q9YixPYmplY3QuZGVsaXZlckNoYW5nZVJlY29yZHMoYSksZD0hMX0sY2xvc2U6ZnVuY3Rpb24oKXtiPXZvaWQgMCxPYmplY3QudW5vYnNlcnZlKGMsYSksb2JzZXJ2ZWRPYmplY3RDYWNoZS5wdXNoKHRoaXMpfX19ZnVuY3Rpb24gZ2V0T2JzZXJ2ZWRPYmplY3QoYSxiLGMpe3ZhciBkPW9ic2VydmVkT2JqZWN0Q2FjaGUucG9wKCl8fG5ld09ic2VydmVkT2JqZWN0KCk7cmV0dXJuIGQub3BlbihhKSxkLm9ic2VydmUoYixjKSxkfWZ1bmN0aW9uIG5ld09ic2VydmVkU2V0KCl7ZnVuY3Rpb24gYShiLGYpe2ImJihiPT09ZCYmKGVbZl09ITApLGguaW5kZXhPZihiKTwwJiYoaC5wdXNoKGIpLE9iamVjdC5vYnNlcnZlKGIsYykpLGEoT2JqZWN0LmdldFByb3RvdHlwZU9mKGIpLGYpKX1mdW5jdGlvbiBiKGEpe2Zvcih2YXIgYj0wO2I8YS5sZW5ndGg7YisrKXt2YXIgYz1hW2JdO2lmKGMub2JqZWN0IT09ZHx8ZVtjLm5hbWVdfHwic2V0UHJvdG90eXBlIj09PWMudHlwZSlyZXR1cm4hMX1yZXR1cm4hMH1mdW5jdGlvbiBjKGMpe2lmKCFiKGMpKXtmb3IodmFyIGQsZT0wO2U8Zy5sZW5ndGg7ZSsrKWQ9Z1tlXSxkLnN0YXRlXz09T1BFTkVEJiZkLml0ZXJhdGVPYmplY3RzXyhhKTtmb3IodmFyIGU9MDtlPGcubGVuZ3RoO2UrKylkPWdbZV0sZC5zdGF0ZV89PU9QRU5FRCYmZC5jaGVja18oKX19dmFyIGQsZSxmPTAsZz1bXSxoPVtdLGk9e29iamVjdDp2b2lkIDAsb2JqZWN0czpoLG9wZW46ZnVuY3Rpb24oYixjKXtkfHwoZD1jLGU9e30pLGcucHVzaChiKSxmKyssYi5pdGVyYXRlT2JqZWN0c18oYSl9LGNsb3NlOmZ1bmN0aW9uKCl7aWYoZi0tLCEoZj4wKSl7Zm9yKHZhciBhPTA7YTxoLmxlbmd0aDthKyspT2JqZWN0LnVub2JzZXJ2ZShoW2FdLGMpLE9ic2VydmVyLnVub2JzZXJ2ZWRDb3VudCsrO2cubGVuZ3RoPTAsaC5sZW5ndGg9MCxkPXZvaWQgMCxlPXZvaWQgMCxvYnNlcnZlZFNldENhY2hlLnB1c2godGhpcyl9fX07cmV0dXJuIGl9ZnVuY3Rpb24gZ2V0T2JzZXJ2ZWRTZXQoYSxiKXtyZXR1cm4gbGFzdE9ic2VydmVkU2V0JiZsYXN0T2JzZXJ2ZWRTZXQub2JqZWN0PT09Ynx8KGxhc3RPYnNlcnZlZFNldD1vYnNlcnZlZFNldENhY2hlLnBvcCgpfHxuZXdPYnNlcnZlZFNldCgpLGxhc3RPYnNlcnZlZFNldC5vYmplY3Q9YiksbGFzdE9ic2VydmVkU2V0Lm9wZW4oYSxiKSxsYXN0T2JzZXJ2ZWRTZXR9ZnVuY3Rpb24gT2JzZXJ2ZXIoKXt0aGlzLnN0YXRlXz1VTk9QRU5FRCx0aGlzLmNhbGxiYWNrXz12b2lkIDAsdGhpcy50YXJnZXRfPXZvaWQgMCx0aGlzLmRpcmVjdE9ic2VydmVyXz12b2lkIDAsdGhpcy52YWx1ZV89dm9pZCAwLHRoaXMuaWRfPW5leHRPYnNlcnZlcklkKyt9ZnVuY3Rpb24gYWRkVG9BbGwoYSl7T2JzZXJ2ZXIuX2FsbE9ic2VydmVyc0NvdW50KyssY29sbGVjdE9ic2VydmVycyYmYWxsT2JzZXJ2ZXJzLnB1c2goYSl9ZnVuY3Rpb24gcmVtb3ZlRnJvbUFsbCgpe09ic2VydmVyLl9hbGxPYnNlcnZlcnNDb3VudC0tfWZ1bmN0aW9uIE9iamVjdE9ic2VydmVyKGEpe09ic2VydmVyLmNhbGwodGhpcyksdGhpcy52YWx1ZV89YSx0aGlzLm9sZE9iamVjdF89dm9pZCAwfWZ1bmN0aW9uIEFycmF5T2JzZXJ2ZXIoYSl7aWYoIUFycmF5LmlzQXJyYXkoYSkpdGhyb3cgRXJyb3IoIlByb3ZpZGVkIG9iamVjdCBpcyBub3QgYW4gQXJyYXkiKTtPYmplY3RPYnNlcnZlci5jYWxsKHRoaXMsYSl9ZnVuY3Rpb24gUGF0aE9ic2VydmVyKGEsYil7T2JzZXJ2ZXIuY2FsbCh0aGlzKSx0aGlzLm9iamVjdF89YSx0aGlzLnBhdGhfPWdldFBhdGgoYiksdGhpcy5kaXJlY3RPYnNlcnZlcl89dm9pZCAwfWZ1bmN0aW9uIENvbXBvdW5kT2JzZXJ2ZXIoYSl7T2JzZXJ2ZXIuY2FsbCh0aGlzKSx0aGlzLnJlcG9ydENoYW5nZXNPbk9wZW5fPWEsdGhpcy52YWx1ZV89W10sdGhpcy5kaXJlY3RPYnNlcnZlcl89dm9pZCAwLHRoaXMub2JzZXJ2ZWRfPVtdfWZ1bmN0aW9uIGlkZW50Rm4oYSl7cmV0dXJuIGF9ZnVuY3Rpb24gT2JzZXJ2ZXJUcmFuc2Zvcm0oYSxiLGMsZCl7dGhpcy5jYWxsYmFja189dm9pZCAwLHRoaXMudGFyZ2V0Xz12b2lkIDAsdGhpcy52YWx1ZV89dm9pZCAwLHRoaXMub2JzZXJ2YWJsZV89YSx0aGlzLmdldFZhbHVlRm5fPWJ8fGlkZW50Rm4sdGhpcy5zZXRWYWx1ZUZuXz1jfHxpZGVudEZuLHRoaXMuZG9udFBhc3NUaHJvdWdoU2V0Xz1kfWZ1bmN0aW9uIGRpZmZPYmplY3RGcm9tQ2hhbmdlUmVjb3JkcyhhLGIsYyl7Zm9yKHZhciBkPXt9LGU9e30sZj0wO2Y8Yi5sZW5ndGg7ZisrKXt2YXIgZz1iW2ZdO2V4cGVjdGVkUmVjb3JkVHlwZXNbZy50eXBlXT8oZy5uYW1lIGluIGN8fChjW2cubmFtZV09Zy5vbGRWYWx1ZSksInVwZGF0ZSIhPWcudHlwZSYmKCJhZGQiIT1nLnR5cGU/Zy5uYW1lIGluIGQ/KGRlbGV0ZSBkW2cubmFtZV0sZGVsZXRlIGNbZy5uYW1lXSk6ZVtnLm5hbWVdPSEwOmcubmFtZSBpbiBlP2RlbGV0ZSBlW2cubmFtZV06ZFtnLm5hbWVdPSEwKSk6KGNvbnNvbGUuZXJyb3IoIlVua25vd24gY2hhbmdlUmVjb3JkIHR5cGU6ICIrZy50eXBlKSxjb25zb2xlLmVycm9yKGcpKX1mb3IodmFyIGggaW4gZClkW2hdPWFbaF07Zm9yKHZhciBoIGluIGUpZVtoXT12b2lkIDA7dmFyIGk9e307Zm9yKHZhciBoIGluIGMpaWYoIShoIGluIGR8fGggaW4gZSkpe3ZhciBqPWFbaF07Y1toXSE9PWomJihpW2hdPWopfXJldHVybnthZGRlZDpkLHJlbW92ZWQ6ZSxjaGFuZ2VkOml9fWZ1bmN0aW9uIG5ld1NwbGljZShhLGIsYyl7cmV0dXJue2luZGV4OmEscmVtb3ZlZDpiLGFkZGVkQ291bnQ6Y319ZnVuY3Rpb24gQXJyYXlTcGxpY2UoKXt9ZnVuY3Rpb24gY2FsY1NwbGljZXMoYSxiLGMsZCxlLGYpe3JldHVybiBhcnJheVNwbGljZS5jYWxjU3BsaWNlcyhhLGIsYyxkLGUsZil9ZnVuY3Rpb24gaW50ZXJzZWN0KGEsYixjLGQpe3JldHVybiBjPmJ8fGE+ZD8tMTpiPT1jfHxkPT1hPzA6Yz5hP2Q+Yj9iLWM6ZC1jOmI+ZD9kLWE6Yi1hfWZ1bmN0aW9uIG1lcmdlU3BsaWNlKGEsYixjLGQpe2Zvcih2YXIgZT1uZXdTcGxpY2UoYixjLGQpLGY9ITEsZz0wLGg9MDtoPGEubGVuZ3RoO2grKyl7dmFyIGk9YVtoXTtpZihpLmluZGV4Kz1nLCFmKXt2YXIgaj1pbnRlcnNlY3QoZS5pbmRleCxlLmluZGV4K2UucmVtb3ZlZC5sZW5ndGgsaS5pbmRleCxpLmluZGV4K2kuYWRkZWRDb3VudCk7aWYoaj49MCl7YS5zcGxpY2UoaCwxKSxoLS0sZy09aS5hZGRlZENvdW50LWkucmVtb3ZlZC5sZW5ndGgsZS5hZGRlZENvdW50Kz1pLmFkZGVkQ291bnQtajt2YXIgaz1lLnJlbW92ZWQubGVuZ3RoK2kucmVtb3ZlZC5sZW5ndGgtajtpZihlLmFkZGVkQ291bnR8fGspe3ZhciBjPWkucmVtb3ZlZDtpZihlLmluZGV4PGkuaW5kZXgpe3ZhciBsPWUucmVtb3ZlZC5zbGljZSgwLGkuaW5kZXgtZS5pbmRleCk7QXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkobCxjKSxjPWx9aWYoZS5pbmRleCtlLnJlbW92ZWQubGVuZ3RoPmkuaW5kZXgraS5hZGRlZENvdW50KXt2YXIgbT1lLnJlbW92ZWQuc2xpY2UoaS5pbmRleCtpLmFkZGVkQ291bnQtZS5pbmRleCk7QXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkoYyxtKX1lLnJlbW92ZWQ9YyxpLmluZGV4PGUuaW5kZXgmJihlLmluZGV4PWkuaW5kZXgpfWVsc2UgZj0hMH1lbHNlIGlmKGUuaW5kZXg8aS5pbmRleCl7Zj0hMCxhLnNwbGljZShoLDAsZSksaCsrO3ZhciBuPWUuYWRkZWRDb3VudC1lLnJlbW92ZWQubGVuZ3RoO2kuaW5kZXgrPW4sZys9bn19fWZ8fGEucHVzaChlKX1mdW5jdGlvbiBjcmVhdGVJbml0aWFsU3BsaWNlcyhhLGIpe2Zvcih2YXIgYz1bXSxkPTA7ZDxiLmxlbmd0aDtkKyspe3ZhciBlPWJbZF07c3dpdGNoKGUudHlwZSl7Y2FzZSJzcGxpY2UiOm1lcmdlU3BsaWNlKGMsZS5pbmRleCxlLnJlbW92ZWQuc2xpY2UoKSxlLmFkZGVkQ291bnQpO2JyZWFrO2Nhc2UiYWRkIjpjYXNlInVwZGF0ZSI6Y2FzZSJkZWxldGUiOmlmKCFpc0luZGV4KGUubmFtZSkpY29udGludWU7dmFyIGY9dG9OdW1iZXIoZS5uYW1lKTtpZigwPmYpY29udGludWU7bWVyZ2VTcGxpY2UoYyxmLFtlLm9sZFZhbHVlXSwxKTticmVhaztkZWZhdWx0OmNvbnNvbGUuZXJyb3IoIlVuZXhwZWN0ZWQgcmVjb3JkIHR5cGU6ICIrSlNPTi5zdHJpbmdpZnkoZSkpfX1yZXR1cm4gY31mdW5jdGlvbiBwcm9qZWN0QXJyYXlTcGxpY2VzKGEsYil7dmFyIGM9W107cmV0dXJuIGNyZWF0ZUluaXRpYWxTcGxpY2VzKGEsYikuZm9yRWFjaChmdW5jdGlvbihiKXtyZXR1cm4gMT09Yi5hZGRlZENvdW50JiYxPT1iLnJlbW92ZWQubGVuZ3RoP3ZvaWQoYi5yZW1vdmVkWzBdIT09YVtiLmluZGV4XSYmYy5wdXNoKGIpKTp2b2lkKGM9Yy5jb25jYXQoY2FsY1NwbGljZXMoYSxiLmluZGV4LGIuaW5kZXgrYi5hZGRlZENvdW50LGIucmVtb3ZlZCwwLGIucmVtb3ZlZC5sZW5ndGgpKSl9KSxjfXZhciBoYXNPYnNlcnZlPWRldGVjdE9iamVjdE9ic2VydmUoKSxoYXNFdmFsPWRldGVjdEV2YWwoKSxudW1iZXJJc05hTj1nbG9iYWwuTnVtYmVyLmlzTmFOfHxmdW5jdGlvbihhKXtyZXR1cm4ibnVtYmVyIj09dHlwZW9mIGEmJmdsb2JhbC5pc05hTihhKX0sY3JlYXRlT2JqZWN0PSJfX3Byb3RvX18iaW57fT9mdW5jdGlvbihhKXtyZXR1cm4gYX06ZnVuY3Rpb24oYSl7dmFyIGI9YS5fX3Byb3RvX187aWYoIWIpcmV0dXJuIGE7dmFyIGM9T2JqZWN0LmNyZWF0ZShiKTtyZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoYSkuZm9yRWFjaChmdW5jdGlvbihiKXtPYmplY3QuZGVmaW5lUHJvcGVydHkoYyxiLE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoYSxiKSl9KSxjfSxpZGVudFN0YXJ0PSJbJF9hLXpBLVpdIixpZGVudFBhcnQ9IlskX2EtekEtWjAtOV0iLGlkZW50UmVnRXhwPW5ldyBSZWdFeHAoIl4iK2lkZW50U3RhcnQrIisiK2lkZW50UGFydCsiKiQiKSxwYXRoU3RhdGVNYWNoaW5lPXtiZWZvcmVQYXRoOnt3czpbImJlZm9yZVBhdGgiXSxpZGVudDpbImluSWRlbnQiLCJhcHBlbmQiXSwiWyI6WyJiZWZvcmVFbGVtZW50Il0sZW9mOlsiYWZ0ZXJQYXRoIl19LGluUGF0aDp7d3M6WyJpblBhdGgiXSwiLiI6WyJiZWZvcmVJZGVudCJdLCJbIjpbImJlZm9yZUVsZW1lbnQiXSxlb2Y6WyJhZnRlclBhdGgiXX0sYmVmb3JlSWRlbnQ6e3dzOlsiYmVmb3JlSWRlbnQiXSxpZGVudDpbImluSWRlbnQiLCJhcHBlbmQiXX0saW5JZGVudDp7aWRlbnQ6WyJpbklkZW50IiwiYXBwZW5kIl0sMDpbImluSWRlbnQiLCJhcHBlbmQiXSxudW1iZXI6WyJpbklkZW50IiwiYXBwZW5kIl0sd3M6WyJpblBhdGgiLCJwdXNoIl0sIi4iOlsiYmVmb3JlSWRlbnQiLCJwdXNoIl0sIlsiOlsiYmVmb3JlRWxlbWVudCIsInB1c2giXSxlb2Y6WyJhZnRlclBhdGgiLCJwdXNoIl19LGJlZm9yZUVsZW1lbnQ6e3dzOlsiYmVmb3JlRWxlbWVudCJdLDA6WyJhZnRlclplcm8iLCJhcHBlbmQiXSxudW1iZXI6WyJpbkluZGV4IiwiYXBwZW5kIl0sIiciOlsiaW5TaW5nbGVRdW90ZSIsImFwcGVuZCIsIiJdLCciJzpbImluRG91YmxlUXVvdGUiLCJhcHBlbmQiLCIiXX0sYWZ0ZXJaZXJvOnt3czpbImFmdGVyRWxlbWVudCIsInB1c2giXSwiXSI6WyJpblBhdGgiLCJwdXNoIl19LGluSW5kZXg6ezA6WyJpbkluZGV4IiwiYXBwZW5kIl0sbnVtYmVyOlsiaW5JbmRleCIsImFwcGVuZCJdLHdzOlsiYWZ0ZXJFbGVtZW50Il0sIl0iOlsiaW5QYXRoIiwicHVzaCJdfSxpblNpbmdsZVF1b3RlOnsiJyI6WyJhZnRlckVsZW1lbnQiXSxlb2Y6WyJlcnJvciJdLCJlbHNlIjpbImluU2luZ2xlUXVvdGUiLCJhcHBlbmQiXX0saW5Eb3VibGVRdW90ZTp7JyInOlsiYWZ0ZXJFbGVtZW50Il0sZW9mOlsiZXJyb3IiXSwiZWxzZSI6WyJpbkRvdWJsZVF1b3RlIiwiYXBwZW5kIl19LGFmdGVyRWxlbWVudDp7d3M6WyJhZnRlckVsZW1lbnQiXSwiXSI6WyJpblBhdGgiLCJwdXNoIl19fSxjb25zdHJ1Y3RvcklzUHJpdmF0ZT17fSxwYXRoQ2FjaGU9e307UGF0aC5nZXQ9Z2V0UGF0aCxQYXRoLnByb3RvdHlwZT1jcmVhdGVPYmplY3Qoe19fcHJvdG9fXzpbXSx2YWxpZDohMCx0b1N0cmluZzpmdW5jdGlvbigpe2Zvcih2YXIgYT0iIixiPTA7Yjx0aGlzLmxlbmd0aDtiKyspe3ZhciBjPXRoaXNbYl07YSs9aXNJZGVudChjKT9iPyIuIitjOmM6Zm9ybWF0QWNjZXNzb3IoYyl9cmV0dXJuIGF9LGdldFZhbHVlRnJvbTpmdW5jdGlvbihhKXtmb3IodmFyIGI9MDtiPHRoaXMubGVuZ3RoO2IrKyl7aWYobnVsbD09YSlyZXR1cm47YT1hW3RoaXNbYl1dfXJldHVybiBhfSxpdGVyYXRlT2JqZWN0czpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz0wO2M8dGhpcy5sZW5ndGg7YysrKXtpZihjJiYoYT1hW3RoaXNbYy0xXV0pLCFpc09iamVjdChhKSlyZXR1cm47YihhLHRoaXNbMF0pfX0sY29tcGlsZWRHZXRWYWx1ZUZyb21GbjpmdW5jdGlvbigpe3ZhciBhPSIiLGI9Im9iaiI7YSs9ImlmIChvYmogIT0gbnVsbCI7Zm9yKHZhciBjLGQ9MDtkPHRoaXMubGVuZ3RoLTE7ZCsrKWM9dGhpc1tkXSxiKz1pc0lkZW50KGMpPyIuIitjOmZvcm1hdEFjY2Vzc29yKGMpLGErPSIgJiZcbiAgICAgIitiKyIgIT0gbnVsbCI7YSs9IilcbiI7dmFyIGM9dGhpc1tkXTtyZXR1cm4gYis9aXNJZGVudChjKT8iLiIrYzpmb3JtYXRBY2Nlc3NvcihjKSxhKz0iICByZXR1cm4gIitiKyI7XG5lbHNlXG4gIHJldHVybiB1bmRlZmluZWQ7IixuZXcgRnVuY3Rpb24oIm9iaiIsYSl9LHNldFZhbHVlRnJvbTpmdW5jdGlvbihhLGIpe2lmKCF0aGlzLmxlbmd0aClyZXR1cm4hMTtmb3IodmFyIGM9MDtjPHRoaXMubGVuZ3RoLTE7YysrKXtpZighaXNPYmplY3QoYSkpcmV0dXJuITE7YT1hW3RoaXNbY11dfXJldHVybiBpc09iamVjdChhKT8oYVt0aGlzW2NdXT1iLCEwKTohMX19KTt2YXIgaW52YWxpZFBhdGg9bmV3IFBhdGgoIiIsY29uc3RydWN0b3JJc1ByaXZhdGUpO2ludmFsaWRQYXRoLnZhbGlkPSExLGludmFsaWRQYXRoLmdldFZhbHVlRnJvbT1pbnZhbGlkUGF0aC5zZXRWYWx1ZUZyb209ZnVuY3Rpb24oKXt9O3ZhciBNQVhfRElSVFlfQ0hFQ0tfQ1lDTEVTPTFlMyxlb21UYXNrcz1bXSxydW5FT009aGFzT2JzZXJ2ZT9mdW5jdGlvbigpe3ZhciBhPXtwaW5nUG9uZzohMH0sYj0hMTtyZXR1cm4gT2JqZWN0Lm9ic2VydmUoYSxmdW5jdGlvbigpe3J1bkVPTVRhc2tzKCksYj0hMX0pLGZ1bmN0aW9uKGMpe2VvbVRhc2tzLnB1c2goYyksYnx8KGI9ITAsYS5waW5nUG9uZz0hYS5waW5nUG9uZyl9fSgpOmZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKGEpe2VvbVRhc2tzLnB1c2goYSl9fSgpLG9ic2VydmVkT2JqZWN0Q2FjaGU9W10sb2JzZXJ2ZWRTZXRDYWNoZT1bXSxsYXN0T2JzZXJ2ZWRTZXQsVU5PUEVORUQ9MCxPUEVORUQ9MSxDTE9TRUQ9MixSRVNFVFRJTkc9MyxuZXh0T2JzZXJ2ZXJJZD0xO09ic2VydmVyLnByb3RvdHlwZT17b3BlbjpmdW5jdGlvbihhLGIpe2lmKHRoaXMuc3RhdGVfIT1VTk9QRU5FRCl0aHJvdyBFcnJvcigiT2JzZXJ2ZXIgaGFzIGFscmVhZHkgYmVlbiBvcGVuZWQuIik7cmV0dXJuIGFkZFRvQWxsKHRoaXMpLHRoaXMuY2FsbGJhY2tfPWEsdGhpcy50YXJnZXRfPWIsdGhpcy5jb25uZWN0XygpLHRoaXMuc3RhdGVfPU9QRU5FRCx0aGlzLnZhbHVlX30sY2xvc2U6ZnVuY3Rpb24oKXt0aGlzLnN0YXRlXz09T1BFTkVEJiYocmVtb3ZlRnJvbUFsbCh0aGlzKSx0aGlzLmRpc2Nvbm5lY3RfKCksdGhpcy52YWx1ZV89dm9pZCAwLHRoaXMuY2FsbGJhY2tfPXZvaWQgMCx0aGlzLnRhcmdldF89dm9pZCAwLHRoaXMuc3RhdGVfPUNMT1NFRCl9LGRlbGl2ZXI6ZnVuY3Rpb24oKXt0aGlzLnN0YXRlXz09T1BFTkVEJiZkaXJ0eUNoZWNrKHRoaXMpfSxyZXBvcnRfOmZ1bmN0aW9uKGEpe3RyeXt0aGlzLmNhbGxiYWNrXy5hcHBseSh0aGlzLnRhcmdldF8sYSl9Y2F0Y2goYil7T2JzZXJ2ZXIuX2Vycm9yVGhyb3duRHVyaW5nQ2FsbGJhY2s9ITAsY29uc29sZS5lcnJvcigiRXhjZXB0aW9uIGNhdWdodCBkdXJpbmcgb2JzZXJ2ZXIgY2FsbGJhY2s6ICIrKGIuc3RhY2t8fGIpKX19LGRpc2NhcmRDaGFuZ2VzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY2hlY2tfKHZvaWQgMCwhMCksdGhpcy52YWx1ZV99fTt2YXIgY29sbGVjdE9ic2VydmVycz0haGFzT2JzZXJ2ZSxhbGxPYnNlcnZlcnM7T2JzZXJ2ZXIuX2FsbE9ic2VydmVyc0NvdW50PTAsY29sbGVjdE9ic2VydmVycyYmKGFsbE9ic2VydmVycz1bXSk7dmFyIHJ1bm5pbmdNaWNyb3Rhc2tDaGVja3BvaW50PSExLGhhc0RlYnVnRm9yY2VGdWxsRGVsaXZlcnk9aGFzT2JzZXJ2ZSYmaGFzRXZhbCYmZnVuY3Rpb24oKXt0cnl7cmV0dXJuIGV2YWwoIiVSdW5NaWNyb3Rhc2tzKCkiKSwhMH1jYXRjaChleCl7cmV0dXJuITF9fSgpO2dsb2JhbC5QbGF0Zm9ybT1nbG9iYWwuUGxhdGZvcm18fHt9LGdsb2JhbC5QbGF0Zm9ybS5wZXJmb3JtTWljcm90YXNrQ2hlY2twb2ludD1mdW5jdGlvbigpe2lmKCFydW5uaW5nTWljcm90YXNrQ2hlY2twb2ludCl7aWYoaGFzRGVidWdGb3JjZUZ1bGxEZWxpdmVyeSlyZXR1cm4gdm9pZCBldmFsKCIlUnVuTWljcm90YXNrcygpIik7aWYoY29sbGVjdE9ic2VydmVycyl7cnVubmluZ01pY3JvdGFza0NoZWNrcG9pbnQ9ITA7dmFyIGN5Y2xlcz0wLGFueUNoYW5nZWQsdG9DaGVjaztkb3tjeWNsZXMrKyx0b0NoZWNrPWFsbE9ic2VydmVycyxhbGxPYnNlcnZlcnM9W10sYW55Q2hhbmdlZD0hMTtmb3IodmFyIGk9MDtpPHRvQ2hlY2subGVuZ3RoO2krKyl7dmFyIG9ic2VydmVyPXRvQ2hlY2tbaV07b2JzZXJ2ZXIuc3RhdGVfPT1PUEVORUQmJihvYnNlcnZlci5jaGVja18oKSYmKGFueUNoYW5nZWQ9ITApLGFsbE9ic2VydmVycy5wdXNoKG9ic2VydmVyKSl9cnVuRU9NVGFza3MoKSYmKGFueUNoYW5nZWQ9ITApfXdoaWxlKE1BWF9ESVJUWV9DSEVDS19DWUNMRVM+Y3ljbGVzJiZhbnlDaGFuZ2VkKTtnbG9iYWwudGVzdGluZ0V4cG9zZUN5Y2xlQ291bnQmJihnbG9iYWwuZGlydHlDaGVja0N5Y2xlQ291bnQ9Y3ljbGVzKSxydW5uaW5nTWljcm90YXNrQ2hlY2twb2ludD0hMX19fSxjb2xsZWN0T2JzZXJ2ZXJzJiYoZ2xvYmFsLlBsYXRmb3JtLmNsZWFyT2JzZXJ2ZXJzPWZ1bmN0aW9uKCl7YWxsT2JzZXJ2ZXJzPVtdfSksT2JqZWN0T2JzZXJ2ZXIucHJvdG90eXBlPWNyZWF0ZU9iamVjdCh7X19wcm90b19fOk9ic2VydmVyLnByb3RvdHlwZSxhcnJheU9ic2VydmU6ITEsY29ubmVjdF86ZnVuY3Rpb24oKXtoYXNPYnNlcnZlP3RoaXMuZGlyZWN0T2JzZXJ2ZXJfPWdldE9ic2VydmVkT2JqZWN0KHRoaXMsdGhpcy52YWx1ZV8sdGhpcy5hcnJheU9ic2VydmUpOnRoaXMub2xkT2JqZWN0Xz10aGlzLmNvcHlPYmplY3QodGhpcy52YWx1ZV8pfSxjb3B5T2JqZWN0OmZ1bmN0aW9uKGEpe3ZhciBiPUFycmF5LmlzQXJyYXkoYSk/W106e307Zm9yKHZhciBjIGluIGEpYltjXT1hW2NdO3JldHVybiBBcnJheS5pc0FycmF5KGEpJiYoYi5sZW5ndGg9YS5sZW5ndGgpLGJ9LGNoZWNrXzpmdW5jdGlvbihhKXt2YXIgYixjO2lmKGhhc09ic2VydmUpe2lmKCFhKXJldHVybiExO2M9e30sYj1kaWZmT2JqZWN0RnJvbUNoYW5nZVJlY29yZHModGhpcy52YWx1ZV8sYSxjKX1lbHNlIGM9dGhpcy5vbGRPYmplY3RfLGI9ZGlmZk9iamVjdEZyb21PbGRPYmplY3QodGhpcy52YWx1ZV8sdGhpcy5vbGRPYmplY3RfKTtyZXR1cm4gZGlmZklzRW1wdHkoYik/ITE6KGhhc09ic2VydmV8fCh0aGlzLm9sZE9iamVjdF89dGhpcy5jb3B5T2JqZWN0KHRoaXMudmFsdWVfKSksdGhpcy5yZXBvcnRfKFtiLmFkZGVkfHx7fSxiLnJlbW92ZWR8fHt9LGIuY2hhbmdlZHx8e30sZnVuY3Rpb24oYSl7cmV0dXJuIGNbYV19XSksITApfSxkaXNjb25uZWN0XzpmdW5jdGlvbigpe2hhc09ic2VydmU/KHRoaXMuZGlyZWN0T2JzZXJ2ZXJfLmNsb3NlKCksdGhpcy5kaXJlY3RPYnNlcnZlcl89dm9pZCAwKTp0aGlzLm9sZE9iamVjdF89dm9pZCAwfSxkZWxpdmVyOmZ1bmN0aW9uKCl7dGhpcy5zdGF0ZV89PU9QRU5FRCYmKGhhc09ic2VydmU/dGhpcy5kaXJlY3RPYnNlcnZlcl8uZGVsaXZlcighMSk6ZGlydHlDaGVjayh0aGlzKSl9LGRpc2NhcmRDaGFuZ2VzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGlyZWN0T2JzZXJ2ZXJfP3RoaXMuZGlyZWN0T2JzZXJ2ZXJfLmRlbGl2ZXIoITApOnRoaXMub2xkT2JqZWN0Xz10aGlzLmNvcHlPYmplY3QodGhpcy52YWx1ZV8pLHRoaXMudmFsdWVffX0pLEFycmF5T2JzZXJ2ZXIucHJvdG90eXBlPWNyZWF0ZU9iamVjdCh7X19wcm90b19fOk9iamVjdE9ic2VydmVyLnByb3RvdHlwZSxhcnJheU9ic2VydmU6ITAsY29weU9iamVjdDpmdW5jdGlvbihhKXtyZXR1cm4gYS5zbGljZSgpfSxjaGVja186ZnVuY3Rpb24oYSl7dmFyIGI7aWYoaGFzT2JzZXJ2ZSl7aWYoIWEpcmV0dXJuITE7Yj1wcm9qZWN0QXJyYXlTcGxpY2VzKHRoaXMudmFsdWVfLGEpfWVsc2UgYj1jYWxjU3BsaWNlcyh0aGlzLnZhbHVlXywwLHRoaXMudmFsdWVfLmxlbmd0aCx0aGlzLm9sZE9iamVjdF8sMCx0aGlzLm9sZE9iamVjdF8ubGVuZ3RoKTtyZXR1cm4gYiYmYi5sZW5ndGg/KGhhc09ic2VydmV8fCh0aGlzLm9sZE9iamVjdF89dGhpcy5jb3B5T2JqZWN0KHRoaXMudmFsdWVfKSksdGhpcy5yZXBvcnRfKFtiXSksITApOiExfX0pLEFycmF5T2JzZXJ2ZXIuYXBwbHlTcGxpY2VzPWZ1bmN0aW9uKGEsYixjKXtjLmZvckVhY2goZnVuY3Rpb24oYyl7Zm9yKHZhciBkPVtjLmluZGV4LGMucmVtb3ZlZC5sZW5ndGhdLGU9Yy5pbmRleDtlPGMuaW5kZXgrYy5hZGRlZENvdW50OylkLnB1c2goYltlXSksZSsrO0FycmF5LnByb3RvdHlwZS5zcGxpY2UuYXBwbHkoYSxkKX0pfSxQYXRoT2JzZXJ2ZXIucHJvdG90eXBlPWNyZWF0ZU9iamVjdCh7X19wcm90b19fOk9ic2VydmVyLnByb3RvdHlwZSxnZXQgcGF0aCgpe3JldHVybiB0aGlzLnBhdGhffSxjb25uZWN0XzpmdW5jdGlvbigpe2hhc09ic2VydmUmJih0aGlzLmRpcmVjdE9ic2VydmVyXz1nZXRPYnNlcnZlZFNldCh0aGlzLHRoaXMub2JqZWN0XykpLHRoaXMuY2hlY2tfKHZvaWQgMCwhMCl9LGRpc2Nvbm5lY3RfOmZ1bmN0aW9uKCl7dGhpcy52YWx1ZV89dm9pZCAwLHRoaXMuZGlyZWN0T2JzZXJ2ZXJfJiYodGhpcy5kaXJlY3RPYnNlcnZlcl8uY2xvc2UodGhpcyksdGhpcy5kaXJlY3RPYnNlcnZlcl89dm9pZCAwKX0saXRlcmF0ZU9iamVjdHNfOmZ1bmN0aW9uKGEpe3RoaXMucGF0aF8uaXRlcmF0ZU9iamVjdHModGhpcy5vYmplY3RfLGEpfSxjaGVja186ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLnZhbHVlXztyZXR1cm4gdGhpcy52YWx1ZV89dGhpcy5wYXRoXy5nZXRWYWx1ZUZyb20odGhpcy5vYmplY3RfKSxifHxhcmVTYW1lVmFsdWUodGhpcy52YWx1ZV8sYyk/ITE6KHRoaXMucmVwb3J0XyhbdGhpcy52YWx1ZV8sYyx0aGlzXSksITApfSxzZXRWYWx1ZTpmdW5jdGlvbihhKXt0aGlzLnBhdGhfJiZ0aGlzLnBhdGhfLnNldFZhbHVlRnJvbSh0aGlzLm9iamVjdF8sYSl9fSk7dmFyIG9ic2VydmVyU2VudGluZWw9e307Q29tcG91bmRPYnNlcnZlci5wcm90b3R5cGU9Y3JlYXRlT2JqZWN0KHtfX3Byb3RvX186T2JzZXJ2ZXIucHJvdG90eXBlLGNvbm5lY3RfOmZ1bmN0aW9uKCl7aWYoaGFzT2JzZXJ2ZSl7Zm9yKHZhciBhLGI9ITEsYz0wO2M8dGhpcy5vYnNlcnZlZF8ubGVuZ3RoO2MrPTIpaWYoYT10aGlzLm9ic2VydmVkX1tjXSxhIT09b2JzZXJ2ZXJTZW50aW5lbCl7Yj0hMDticmVha31iJiYodGhpcy5kaXJlY3RPYnNlcnZlcl89Z2V0T2JzZXJ2ZWRTZXQodGhpcyxhKSl9dGhpcy5jaGVja18odm9pZCAwLCF0aGlzLnJlcG9ydENoYW5nZXNPbk9wZW5fKX0sZGlzY29ubmVjdF86ZnVuY3Rpb24oKXtmb3IodmFyIGE9MDthPHRoaXMub2JzZXJ2ZWRfLmxlbmd0aDthKz0yKXRoaXMub2JzZXJ2ZWRfW2FdPT09b2JzZXJ2ZXJTZW50aW5lbCYmdGhpcy5vYnNlcnZlZF9bYSsxXS5jbG9zZSgpO3RoaXMub2JzZXJ2ZWRfLmxlbmd0aD0wLHRoaXMudmFsdWVfLmxlbmd0aD0wLHRoaXMuZGlyZWN0T2JzZXJ2ZXJfJiYodGhpcy5kaXJlY3RPYnNlcnZlcl8uY2xvc2UodGhpcyksdGhpcy5kaXJlY3RPYnNlcnZlcl89dm9pZCAwKX0sYWRkUGF0aDpmdW5jdGlvbihhLGIpe2lmKHRoaXMuc3RhdGVfIT1VTk9QRU5FRCYmdGhpcy5zdGF0ZV8hPVJFU0VUVElORyl0aHJvdyBFcnJvcigiQ2Fubm90IGFkZCBwYXRocyBvbmNlIHN0YXJ0ZWQuIik7dmFyIGI9Z2V0UGF0aChiKTtpZih0aGlzLm9ic2VydmVkXy5wdXNoKGEsYiksdGhpcy5yZXBvcnRDaGFuZ2VzT25PcGVuXyl7dmFyIGM9dGhpcy5vYnNlcnZlZF8ubGVuZ3RoLzItMTt0aGlzLnZhbHVlX1tjXT1iLmdldFZhbHVlRnJvbShhKX19LGFkZE9ic2VydmVyOmZ1bmN0aW9uKGEpe2lmKHRoaXMuc3RhdGVfIT1VTk9QRU5FRCYmdGhpcy5zdGF0ZV8hPVJFU0VUVElORyl0aHJvdyBFcnJvcigiQ2Fubm90IGFkZCBvYnNlcnZlcnMgb25jZSBzdGFydGVkLiIpO2lmKHRoaXMub2JzZXJ2ZWRfLnB1c2gob2JzZXJ2ZXJTZW50aW5lbCxhKSx0aGlzLnJlcG9ydENoYW5nZXNPbk9wZW5fKXt2YXIgYj10aGlzLm9ic2VydmVkXy5sZW5ndGgvMi0xO3RoaXMudmFsdWVfW2JdPWEub3Blbih0aGlzLmRlbGl2ZXIsdGhpcyl9fSxzdGFydFJlc2V0OmZ1bmN0aW9uKCl7aWYodGhpcy5zdGF0ZV8hPU9QRU5FRCl0aHJvdyBFcnJvcigiQ2FuIG9ubHkgcmVzZXQgd2hpbGUgb3BlbiIpO3RoaXMuc3RhdGVfPVJFU0VUVElORyx0aGlzLmRpc2Nvbm5lY3RfKCl9LGZpbmlzaFJlc2V0OmZ1bmN0aW9uKCl7aWYodGhpcy5zdGF0ZV8hPVJFU0VUVElORyl0aHJvdyBFcnJvcigiQ2FuIG9ubHkgZmluaXNoUmVzZXQgYWZ0ZXIgc3RhcnRSZXNldCIpO3JldHVybiB0aGlzLnN0YXRlXz1PUEVORUQsdGhpcy5jb25uZWN0XygpLHRoaXMudmFsdWVffSxpdGVyYXRlT2JqZWN0c186ZnVuY3Rpb24oYSl7Zm9yKHZhciBiLGM9MDtjPHRoaXMub2JzZXJ2ZWRfLmxlbmd0aDtjKz0yKWI9dGhpcy5vYnNlcnZlZF9bY10sYiE9PW9ic2VydmVyU2VudGluZWwmJnRoaXMub2JzZXJ2ZWRfW2MrMV0uaXRlcmF0ZU9iamVjdHMoYixhKX0sY2hlY2tfOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjLGQ9MDtkPHRoaXMub2JzZXJ2ZWRfLmxlbmd0aDtkKz0yKXt2YXIgZSxmPXRoaXMub2JzZXJ2ZWRfW2RdLGc9dGhpcy5vYnNlcnZlZF9bZCsxXTtpZihmPT09b2JzZXJ2ZXJTZW50aW5lbCl7dmFyIGg9ZztlPXRoaXMuc3RhdGVfPT09VU5PUEVORUQ/aC5vcGVuKHRoaXMuZGVsaXZlcix0aGlzKTpoLmRpc2NhcmRDaGFuZ2VzKCl9ZWxzZSBlPWcuZ2V0VmFsdWVGcm9tKGYpO2I/dGhpcy52YWx1ZV9bZC8yXT1lOmFyZVNhbWVWYWx1ZShlLHRoaXMudmFsdWVfW2QvMl0pfHwoYz1jfHxbXSxjW2QvMl09dGhpcy52YWx1ZV9bZC8yXSx0aGlzLnZhbHVlX1tkLzJdPWUpfXJldHVybiBjPyh0aGlzLnJlcG9ydF8oW3RoaXMudmFsdWVfLGMsdGhpcy5vYnNlcnZlZF9dKSwhMCk6ITF9fSksT2JzZXJ2ZXJUcmFuc2Zvcm0ucHJvdG90eXBlPXtvcGVuOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuY2FsbGJhY2tfPWEsdGhpcy50YXJnZXRfPWIsdGhpcy52YWx1ZV89dGhpcy5nZXRWYWx1ZUZuXyh0aGlzLm9ic2VydmFibGVfLm9wZW4odGhpcy5vYnNlcnZlZENhbGxiYWNrXyx0aGlzKSksdGhpcy52YWx1ZV99LG9ic2VydmVkQ2FsbGJhY2tfOmZ1bmN0aW9uKGEpe2lmKGE9dGhpcy5nZXRWYWx1ZUZuXyhhKSwhYXJlU2FtZVZhbHVlKGEsdGhpcy52YWx1ZV8pKXt2YXIgYj10aGlzLnZhbHVlXzt0aGlzLnZhbHVlXz1hLHRoaXMuY2FsbGJhY2tfLmNhbGwodGhpcy50YXJnZXRfLHRoaXMudmFsdWVfLGIpfX0sZGlzY2FyZENoYW5nZXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy52YWx1ZV89dGhpcy5nZXRWYWx1ZUZuXyh0aGlzLm9ic2VydmFibGVfLmRpc2NhcmRDaGFuZ2VzKCkpLHRoaXMudmFsdWVffSxkZWxpdmVyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub2JzZXJ2YWJsZV8uZGVsaXZlcigpfSxzZXRWYWx1ZTpmdW5jdGlvbihhKXtyZXR1cm4gYT10aGlzLnNldFZhbHVlRm5fKGEpLCF0aGlzLmRvbnRQYXNzVGhyb3VnaFNldF8mJnRoaXMub2JzZXJ2YWJsZV8uc2V0VmFsdWU/dGhpcy5vYnNlcnZhYmxlXy5zZXRWYWx1ZShhKTp2b2lkIDB9LGNsb3NlOmZ1bmN0aW9uKCl7dGhpcy5vYnNlcnZhYmxlXyYmdGhpcy5vYnNlcnZhYmxlXy5jbG9zZSgpLHRoaXMuY2FsbGJhY2tfPXZvaWQgMCx0aGlzLnRhcmdldF89dm9pZCAwLHRoaXMub2JzZXJ2YWJsZV89dm9pZCAwLHRoaXMudmFsdWVfPXZvaWQgMCx0aGlzLmdldFZhbHVlRm5fPXZvaWQgMCx0aGlzLnNldFZhbHVlRm5fPXZvaWQgMH19O3ZhciBleHBlY3RlZFJlY29yZFR5cGVzPXthZGQ6ITAsdXBkYXRlOiEwLCJkZWxldGUiOiEwfSxFRElUX0xFQVZFPTAsRURJVF9VUERBVEU9MSxFRElUX0FERD0yLEVESVRfREVMRVRFPTM7QXJyYXlTcGxpY2UucHJvdG90eXBlPXtjYWxjRWRpdERpc3RhbmNlczpmdW5jdGlvbihhLGIsYyxkLGUsZil7Zm9yKHZhciBnPWYtZSsxLGg9Yy1iKzEsaT1uZXcgQXJyYXkoZyksaj0wO2c+ajtqKyspaVtqXT1uZXcgQXJyYXkoaCksaVtqXVswXT1qO2Zvcih2YXIgaz0wO2g+aztrKyspaVswXVtrXT1rO2Zvcih2YXIgaj0xO2c+ajtqKyspZm9yKHZhciBrPTE7aD5rO2srKylpZih0aGlzLmVxdWFscyhhW2Iray0xXSxkW2Urai0xXSkpaVtqXVtrXT1pW2otMV1bay0xXTtlbHNle3ZhciBsPWlbai0xXVtrXSsxLG09aVtqXVtrLTFdKzE7aVtqXVtrXT1tPmw/bDptfXJldHVybiBpfSxzcGxpY2VPcGVyYXRpb25zRnJvbUVkaXREaXN0YW5jZXM6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPWEubGVuZ3RoLTEsYz1hWzBdLmxlbmd0aC0xLGQ9YVtiXVtjXSxlPVtdO2I+MHx8Yz4wOylpZigwIT1iKWlmKDAhPWMpe3ZhciBmLGc9YVtiLTFdW2MtMV0saD1hW2ItMV1bY10saT1hW2JdW2MtMV07Zj1pPmg/Zz5oP2g6ZzpnPmk/aTpnLGY9PWc/KGc9PWQ/ZS5wdXNoKEVESVRfTEVBVkUpOihlLnB1c2goRURJVF9VUERBVEUpLGQ9ZyksYi0tLGMtLSk6Zj09aD8oZS5wdXNoKEVESVRfREVMRVRFKSxiLS0sZD1oKTooZS5wdXNoKEVESVRfQUREKSxjLS0sZD1pKX1lbHNlIGUucHVzaChFRElUX0RFTEVURSksYi0tO2Vsc2UgZS5wdXNoKEVESVRfQUREKSxjLS07cmV0dXJuIGUucmV2ZXJzZSgpLGV9LGNhbGNTcGxpY2VzOmZ1bmN0aW9uKGEsYixjLGQsZSxmKXt2YXIgZz0wLGg9MCxpPU1hdGgubWluKGMtYixmLWUpO2lmKDA9PWImJjA9PWUmJihnPXRoaXMuc2hhcmVkUHJlZml4KGEsZCxpKSksYz09YS5sZW5ndGgmJmY9PWQubGVuZ3RoJiYoaD10aGlzLnNoYXJlZFN1ZmZpeChhLGQsaS1nKSksYis9ZyxlKz1nLGMtPWgsZi09aCxjLWI9PTAmJmYtZT09MClyZXR1cm5bXTtpZihiPT1jKXtmb3IodmFyIGo9bmV3U3BsaWNlKGIsW10sMCk7Zj5lOylqLnJlbW92ZWQucHVzaChkW2UrK10pO3JldHVybltqXX1pZihlPT1mKXJldHVybltuZXdTcGxpY2UoYixbXSxjLWIpXTtmb3IodmFyIGs9dGhpcy5zcGxpY2VPcGVyYXRpb25zRnJvbUVkaXREaXN0YW5jZXModGhpcy5jYWxjRWRpdERpc3RhbmNlcyhhLGIsYyxkLGUsZikpLGo9dm9pZCAwLGw9W10sbT1iLG49ZSxvPTA7bzxrLmxlbmd0aDtvKyspc3dpdGNoKGtbb10pe2Nhc2UgRURJVF9MRUFWRTpqJiYobC5wdXNoKGopLGo9dm9pZCAwKSxtKyssbisrO2JyZWFrO2Nhc2UgRURJVF9VUERBVEU6anx8KGo9bmV3U3BsaWNlKG0sW10sMCkpLGouYWRkZWRDb3VudCsrLG0rKyxqLnJlbW92ZWQucHVzaChkW25dKSxuKys7YnJlYWs7Y2FzZSBFRElUX0FERDpqfHwoaj1uZXdTcGxpY2UobSxbXSwwKSksai5hZGRlZENvdW50KyssbSsrO2JyZWFrO2Nhc2UgRURJVF9ERUxFVEU6anx8KGo9bmV3U3BsaWNlKG0sW10sMCkpLGoucmVtb3ZlZC5wdXNoKGRbbl0pLG4rK31yZXR1cm4gaiYmbC5wdXNoKGopLGx9LHNoYXJlZFByZWZpeDpmdW5jdGlvbihhLGIsYyl7Zm9yKHZhciBkPTA7Yz5kO2QrKylpZighdGhpcy5lcXVhbHMoYVtkXSxiW2RdKSlyZXR1cm4gZDtyZXR1cm4gY30sc2hhcmVkU3VmZml4OmZ1bmN0aW9uKGEsYixjKXtmb3IodmFyIGQ9YS5sZW5ndGgsZT1iLmxlbmd0aCxmPTA7Yz5mJiZ0aGlzLmVxdWFscyhhWy0tZF0sYlstLWVdKTspZisrO3JldHVybiBmfSxjYWxjdWxhdGVTcGxpY2VzOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuY2FsY1NwbGljZXMoYSwwLGEubGVuZ3RoLGIsMCxiLmxlbmd0aCl9LGVxdWFsczpmdW5jdGlvbihhLGIpe3JldHVybiBhPT09Yn19O3ZhciBhcnJheVNwbGljZT1uZXcgQXJyYXlTcGxpY2U7Z2xvYmFsLk9ic2VydmVyPU9ic2VydmVyLGdsb2JhbC5PYnNlcnZlci5ydW5FT01fPXJ1bkVPTSxnbG9iYWwuT2JzZXJ2ZXIub2JzZXJ2ZXJTZW50aW5lbF89b2JzZXJ2ZXJTZW50aW5lbCxnbG9iYWwuT2JzZXJ2ZXIuaGFzT2JqZWN0T2JzZXJ2ZT1oYXNPYnNlcnZlLGdsb2JhbC5BcnJheU9ic2VydmVyPUFycmF5T2JzZXJ2ZXIsZ2xvYmFsLkFycmF5T2JzZXJ2ZXIuY2FsY3VsYXRlU3BsaWNlcz1mdW5jdGlvbihhLGIpe3JldHVybiBhcnJheVNwbGljZS5jYWxjdWxhdGVTcGxpY2VzKGEsYil9LGdsb2JhbC5BcnJheVNwbGljZT1BcnJheVNwbGljZSxnbG9iYWwuT2JqZWN0T2JzZXJ2ZXI9T2JqZWN0T2JzZXJ2ZXIsZ2xvYmFsLlBhdGhPYnNlcnZlcj1QYXRoT2JzZXJ2ZXIsZ2xvYmFsLkNvbXBvdW5kT2JzZXJ2ZXI9Q29tcG91bmRPYnNlcnZlcixnbG9iYWwuUGF0aD1QYXRoLGdsb2JhbC5PYnNlcnZlclRyYW5zZm9ybT1PYnNlcnZlclRyYW5zZm9ybX0oInVuZGVmaW5lZCIhPXR5cGVvZiBnbG9iYWwmJmdsb2JhbCYmInVuZGVmaW5lZCIhPXR5cGVvZiBtb2R1bGUmJm1vZHVsZT9nbG9iYWw6dGhpc3x8d2luZG93KSxQbGF0Zm9ybS5mbGFncy5zaGFkb3c/KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbD17fSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYigpe2lmKCJ1bmRlZmluZWQiIT10eXBlb2YgY2hyb21lJiZjaHJvbWUuYXBwJiZjaHJvbWUuYXBwLnJ1bnRpbWUpcmV0dXJuITE7dHJ5e3ZhciBhPW5ldyBGdW5jdGlvbigicmV0dXJuIHRydWU7Iik7cmV0dXJuIGEoKX1jYXRjaChiKXtyZXR1cm4hMX19ZnVuY3Rpb24gYyhhKXtpZighYSl0aHJvdyBuZXcgRXJyb3IoIkFzc2VydGlvbiBmYWlsZWQiKX1mdW5jdGlvbiBkKGEsYil7Zm9yKHZhciBjPUwoYiksZD0wO2Q8Yy5sZW5ndGg7ZCsrKXt2YXIgZT1jW2RdO0soYSxlLE0oYixlKSl9cmV0dXJuIGF9ZnVuY3Rpb24gZShhLGIpe2Zvcih2YXIgYz1MKGIpLGQ9MDtkPGMubGVuZ3RoO2QrKyl7dmFyIGU9Y1tkXTtzd2l0Y2goZSl7Y2FzZSJhcmd1bWVudHMiOmNhc2UiY2FsbGVyIjpjYXNlImxlbmd0aCI6Y2FzZSJuYW1lIjpjYXNlInByb3RvdHlwZSI6Y2FzZSJ0b1N0cmluZyI6Y29udGludWV9SyhhLGUsTShiLGUpKX1yZXR1cm4gYX1mdW5jdGlvbiBmKGEsYil7Zm9yKHZhciBjPTA7YzxiLmxlbmd0aDtjKyspaWYoYltjXWluIGEpcmV0dXJuIGJbY119ZnVuY3Rpb24gZyhhLGIsYyl7Ti52YWx1ZT1jLEsoYSxiLE4pfWZ1bmN0aW9uIGgoYSl7dmFyIGI9YS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihhKSxjPUcuZ2V0KGIpO2lmKGMpcmV0dXJuIGM7dmFyIGQ9aChiKSxlPXYoZCk7cmV0dXJuIHMoYixlLGEpLGV9ZnVuY3Rpb24gaShhLGIpe3EoYSxiLCEwKX1mdW5jdGlvbiBqKGEsYil7cShiLGEsITEpfWZ1bmN0aW9uIGsoYSl7cmV0dXJuL15vblthLXpdKyQvLnRlc3QoYSl9ZnVuY3Rpb24gbChhKXtyZXR1cm4vXlx3W2EtekEtWl8wLTldKiQvLnRlc3QoYSl9ZnVuY3Rpb24gbShhKXtyZXR1cm4gSiYmbChhKT9uZXcgRnVuY3Rpb24oInJldHVybiB0aGlzLmltcGwuIithKTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmltcGxbYV19fWZ1bmN0aW9uIG4oYSl7cmV0dXJuIEomJmwoYSk/bmV3IEZ1bmN0aW9uKCJ2IiwidGhpcy5pbXBsLiIrYSsiID0gdiIpOmZ1bmN0aW9uKGIpe3RoaXMuaW1wbFthXT1ifX1mdW5jdGlvbiBvKGEpe3JldHVybiBKJiZsKGEpP25ldyBGdW5jdGlvbigicmV0dXJuIHRoaXMuaW1wbC4iK2ErIi5hcHBseSh0aGlzLmltcGwsIGFyZ3VtZW50cykiKTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmltcGxbYV0uYXBwbHkodGhpcy5pbXBsLGFyZ3VtZW50cyl9fWZ1bmN0aW9uIHAoYSxiKXt0cnl7cmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoYSxiKX1jYXRjaChjKXtyZXR1cm4gUH19ZnVuY3Rpb24gcShiLGMsZCl7Zm9yKHZhciBlPUwoYiksZj0wO2Y8ZS5sZW5ndGg7ZisrKXt2YXIgZz1lW2ZdO2lmKCJwb2x5bWVyQmxhY2tMaXN0XyIhPT1nJiYhKGcgaW4gY3x8Yi5wb2x5bWVyQmxhY2tMaXN0XyYmYi5wb2x5bWVyQmxhY2tMaXN0X1tnXSkpe08mJmIuX19sb29rdXBHZXR0ZXJfXyhnKTt2YXIgaCxpLGo9cChiLGcpO2lmKGQmJiJmdW5jdGlvbiI9PXR5cGVvZiBqLnZhbHVlKWNbZ109byhnKTtlbHNle3ZhciBsPWsoZyk7aD1sP2EuZ2V0RXZlbnRIYW5kbGVyR2V0dGVyKGcpOm0oZyksKGoud3JpdGFibGV8fGouc2V0KSYmKGk9bD9hLmdldEV2ZW50SGFuZGxlclNldHRlcihnKTpuKGcpKSxLKGMsZyx7Z2V0Omgsc2V0OmksY29uZmlndXJhYmxlOmouY29uZmlndXJhYmxlLGVudW1lcmFibGU6ai5lbnVtZXJhYmxlfSl9fX19ZnVuY3Rpb24gcihhLGIsYyl7dmFyIGQ9YS5wcm90b3R5cGU7cyhkLGIsYyksZShiLGEpfWZ1bmN0aW9uIHMoYSxiLGQpe3ZhciBlPWIucHJvdG90eXBlO2Modm9pZCAwPT09Ry5nZXQoYSkpLEcuc2V0KGEsYiksSC5zZXQoZSxhKSxpKGEsZSksZCYmaihlLGQpLGcoZSwiY29uc3RydWN0b3IiLGIpLGIucHJvdG90eXBlPWV9ZnVuY3Rpb24gdChhLGIpe3JldHVybiBHLmdldChiLnByb3RvdHlwZSk9PT1hfWZ1bmN0aW9uIHUoYSl7dmFyIGI9T2JqZWN0LmdldFByb3RvdHlwZU9mKGEpLGM9aChiKSxkPXYoYyk7cmV0dXJuIHMoYixkLGEpLGR9ZnVuY3Rpb24gdihhKXtmdW5jdGlvbiBiKGIpe2EuY2FsbCh0aGlzLGIpfXZhciBjPU9iamVjdC5jcmVhdGUoYS5wcm90b3R5cGUpO3JldHVybiBjLmNvbnN0cnVjdG9yPWIsYi5wcm90b3R5cGU9YyxifWZ1bmN0aW9uIHcoYSl7cmV0dXJuIGEgaW5zdGFuY2VvZiBJLkV2ZW50VGFyZ2V0fHxhIGluc3RhbmNlb2YgSS5FdmVudHx8YSBpbnN0YW5jZW9mIEkuUmFuZ2V8fGEgaW5zdGFuY2VvZiBJLkRPTUltcGxlbWVudGF0aW9ufHxhIGluc3RhbmNlb2YgSS5DYW52YXNSZW5kZXJpbmdDb250ZXh0MkR8fEkuV2ViR0xSZW5kZXJpbmdDb250ZXh0JiZhIGluc3RhbmNlb2YgSS5XZWJHTFJlbmRlcmluZ0NvbnRleHR9ZnVuY3Rpb24geChhKXtyZXR1cm4gUiYmYSBpbnN0YW5jZW9mIFJ8fGEgaW5zdGFuY2VvZiBUfHxhIGluc3RhbmNlb2YgU3x8YSBpbnN0YW5jZW9mIFV8fGEgaW5zdGFuY2VvZiBWfHxhIGluc3RhbmNlb2YgUXx8YSBpbnN0YW5jZW9mIFd8fFgmJmEgaW5zdGFuY2VvZiBYfHxZJiZhIGluc3RhbmNlb2YgWX1mdW5jdGlvbiB5KGEpe3JldHVybiBudWxsPT09YT9udWxsOihjKHgoYSkpLGEucG9seW1lcldyYXBwZXJffHwoYS5wb2x5bWVyV3JhcHBlcl89bmV3KGgoYSkpKGEpKSl9ZnVuY3Rpb24geihhKXtyZXR1cm4gbnVsbD09PWE/bnVsbDooYyh3KGEpKSxhLmltcGwpfWZ1bmN0aW9uIEEoYSl7cmV0dXJuIGEmJncoYSk/eihhKTphfWZ1bmN0aW9uIEIoYSl7cmV0dXJuIGEmJiF3KGEpP3koYSk6YX1mdW5jdGlvbiBDKGEsYil7bnVsbCE9PWImJihjKHgoYSkpLGModm9pZCAwPT09Ynx8dyhiKSksYS5wb2x5bWVyV3JhcHBlcl89Yil9ZnVuY3Rpb24gRChhLGIsYyl7Wi5nZXQ9YyxLKGEucHJvdG90eXBlLGIsWil9ZnVuY3Rpb24gRShhLGIpe0QoYSxiLGZ1bmN0aW9uKCl7cmV0dXJuIHkodGhpcy5pbXBsW2JdKX0pfWZ1bmN0aW9uIEYoYSxiKXthLmZvckVhY2goZnVuY3Rpb24oYSl7Yi5mb3JFYWNoKGZ1bmN0aW9uKGIpe2EucHJvdG90eXBlW2JdPWZ1bmN0aW9uKCl7dmFyIGE9Qih0aGlzKTtyZXR1cm4gYVtiXS5hcHBseShhLGFyZ3VtZW50cyl9fSl9KX12YXIgRz1uZXcgV2Vha01hcCxIPW5ldyBXZWFrTWFwLEk9T2JqZWN0LmNyZWF0ZShudWxsKSxKPWIoKSxLPU9iamVjdC5kZWZpbmVQcm9wZXJ0eSxMPU9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzLE09T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcixOPXt2YWx1ZTp2b2lkIDAsY29uZmlndXJhYmxlOiEwLGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITB9O0wod2luZG93KTt2YXIgTz0vRmlyZWZveC8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSxQPXtnZXQ6ZnVuY3Rpb24oKXt9LHNldDpmdW5jdGlvbigpe30sY29uZmlndXJhYmxlOiEwLGVudW1lcmFibGU6ITB9LFE9d2luZG93LkRPTUltcGxlbWVudGF0aW9uLFI9d2luZG93LkV2ZW50VGFyZ2V0LFM9d2luZG93LkV2ZW50LFQ9d2luZG93Lk5vZGUsVT13aW5kb3cuV2luZG93LFY9d2luZG93LlJhbmdlLFc9d2luZG93LkNhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCxYPXdpbmRvdy5XZWJHTFJlbmRlcmluZ0NvbnRleHQsWT13aW5kb3cuU1ZHRWxlbWVudEluc3RhbmNlLFo9e2dldDp2b2lkIDAsY29uZmlndXJhYmxlOiEwLGVudW1lcmFibGU6ITB9O2EuYXNzZXJ0PWMsYS5jb25zdHJ1Y3RvclRhYmxlPUcsYS5kZWZpbmVHZXR0ZXI9RCxhLmRlZmluZVdyYXBHZXR0ZXI9RSxhLmZvcndhcmRNZXRob2RzVG9XcmFwcGVyPUYsYS5pc1dyYXBwZXI9dyxhLmlzV3JhcHBlckZvcj10LGEubWl4aW49ZCxhLm5hdGl2ZVByb3RvdHlwZVRhYmxlPUgsYS5vbmVPZj1mLGEucmVnaXN0ZXJPYmplY3Q9dSxhLnJlZ2lzdGVyV3JhcHBlcj1yLGEucmV3cmFwPUMsYS51bndyYXA9eixhLnVud3JhcElmTmVlZGVkPUEsYS53cmFwPXksYS53cmFwSWZOZWVkZWQ9QixhLndyYXBwZXJzPUl9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoKXtnPSExO3ZhciBhPWYuc2xpY2UoMCk7Zj1bXTtmb3IodmFyIGI9MDtiPGEubGVuZ3RoO2IrKylhW2JdKCl9ZnVuY3Rpb24gYyhhKXtmLnB1c2goYSksZ3x8KGc9ITAsZChiLDApKX12YXIgZCxlPXdpbmRvdy5NdXRhdGlvbk9ic2VydmVyLGY9W10sZz0hMTtpZihlKXt2YXIgaD0xLGk9bmV3IGUoYiksaj1kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShoKTtpLm9ic2VydmUoaix7Y2hhcmFjdGVyRGF0YTohMH0pLGQ9ZnVuY3Rpb24oKXtoPShoKzEpJTIsai5kYXRhPWh9fWVsc2UgZD13aW5kb3cuc2V0SW1tZWRpYXRlfHx3aW5kb3cuc2V0VGltZW91dDthLnNldEVuZE9mTWljcm90YXNrPWN9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoKXtwfHwoayhjKSxwPSEwKX1mdW5jdGlvbiBjKCl7cD0hMTtkbyBmb3IodmFyIGE9by5zbGljZSgpLGI9ITEsYz0wO2M8YS5sZW5ndGg7YysrKXt2YXIgZD1hW2NdLGU9ZC50YWtlUmVjb3JkcygpO2YoZCksZS5sZW5ndGgmJihkLmNhbGxiYWNrXyhlLGQpLGI9ITApfXdoaWxlKGIpfWZ1bmN0aW9uIGQoYSxiKXt0aGlzLnR5cGU9YSx0aGlzLnRhcmdldD1iLHRoaXMuYWRkZWROb2Rlcz1uZXcgbS5Ob2RlTGlzdCx0aGlzLnJlbW92ZWROb2Rlcz1uZXcgbS5Ob2RlTGlzdCx0aGlzLnByZXZpb3VzU2libGluZz1udWxsLHRoaXMubmV4dFNpYmxpbmc9bnVsbCx0aGlzLmF0dHJpYnV0ZU5hbWU9bnVsbCx0aGlzLmF0dHJpYnV0ZU5hbWVzcGFjZT1udWxsLHRoaXMub2xkVmFsdWU9bnVsbH1mdW5jdGlvbiBlKGEsYil7Zm9yKDthO2E9YS5wYXJlbnROb2RlKXt2YXIgYz1uLmdldChhKTtpZihjKWZvcih2YXIgZD0wO2Q8Yy5sZW5ndGg7ZCsrKXt2YXIgZT1jW2RdO2Uub3B0aW9ucy5zdWJ0cmVlJiZlLmFkZFRyYW5zaWVudE9ic2VydmVyKGIpfX19ZnVuY3Rpb24gZihhKXtmb3IodmFyIGI9MDtiPGEubm9kZXNfLmxlbmd0aDtiKyspe3ZhciBjPWEubm9kZXNfW2JdLGQ9bi5nZXQoYyk7aWYoIWQpcmV0dXJuO2Zvcih2YXIgZT0wO2U8ZC5sZW5ndGg7ZSsrKXt2YXIgZj1kW2VdO2Yub2JzZXJ2ZXI9PT1hJiZmLnJlbW92ZVRyYW5zaWVudE9ic2VydmVycygpfX19ZnVuY3Rpb24gZyhhLGMsZSl7Zm9yKHZhciBmPU9iamVjdC5jcmVhdGUobnVsbCksZz1PYmplY3QuY3JlYXRlKG51bGwpLGg9YTtoO2g9aC5wYXJlbnROb2RlKXt2YXIgaT1uLmdldChoKTtpZihpKWZvcih2YXIgaj0wO2o8aS5sZW5ndGg7aisrKXt2YXIgaz1pW2pdLGw9ay5vcHRpb25zO2lmKChoPT09YXx8bC5zdWJ0cmVlKSYmISgiYXR0cmlidXRlcyI9PT1jJiYhbC5hdHRyaWJ1dGVzfHwiYXR0cmlidXRlcyI9PT1jJiZsLmF0dHJpYnV0ZUZpbHRlciYmKG51bGwhPT1lLm5hbWVzcGFjZXx8LTE9PT1sLmF0dHJpYnV0ZUZpbHRlci5pbmRleE9mKGUubmFtZSkpfHwiY2hhcmFjdGVyRGF0YSI9PT1jJiYhbC5jaGFyYWN0ZXJEYXRhfHwiY2hpbGRMaXN0Ij09PWMmJiFsLmNoaWxkTGlzdCkpe3ZhciBtPWsub2JzZXJ2ZXI7ZlttLnVpZF9dPW0sKCJhdHRyaWJ1dGVzIj09PWMmJmwuYXR0cmlidXRlT2xkVmFsdWV8fCJjaGFyYWN0ZXJEYXRhIj09PWMmJmwuY2hhcmFjdGVyRGF0YU9sZFZhbHVlKSYmKGdbbS51aWRfXT1lLm9sZFZhbHVlKX19fXZhciBvPSExO2Zvcih2YXIgcCBpbiBmKXt2YXIgbT1mW3BdLHE9bmV3IGQoYyxhKTsibmFtZSJpbiBlJiYibmFtZXNwYWNlImluIGUmJihxLmF0dHJpYnV0ZU5hbWU9ZS5uYW1lLHEuYXR0cmlidXRlTmFtZXNwYWNlPWUubmFtZXNwYWNlKSxlLmFkZGVkTm9kZXMmJihxLmFkZGVkTm9kZXM9ZS5hZGRlZE5vZGVzKSxlLnJlbW92ZWROb2RlcyYmKHEucmVtb3ZlZE5vZGVzPWUucmVtb3ZlZE5vZGVzKSxlLnByZXZpb3VzU2libGluZyYmKHEucHJldmlvdXNTaWJsaW5nPWUucHJldmlvdXNTaWJsaW5nKSxlLm5leHRTaWJsaW5nJiYocS5uZXh0U2libGluZz1lLm5leHRTaWJsaW5nKSx2b2lkIDAhPT1nW3BdJiYocS5vbGRWYWx1ZT1nW3BdKSxtLnJlY29yZHNfLnB1c2gocSksbz0hMH1vJiZiKCl9ZnVuY3Rpb24gaChhKXtpZih0aGlzLmNoaWxkTGlzdD0hIWEuY2hpbGRMaXN0LHRoaXMuc3VidHJlZT0hIWEuc3VidHJlZSx0aGlzLmF0dHJpYnV0ZXM9ImF0dHJpYnV0ZXMiaW4gYXx8ISgiYXR0cmlidXRlT2xkVmFsdWUiaW4gYXx8ImF0dHJpYnV0ZUZpbHRlciJpbiBhKT8hIWEuYXR0cmlidXRlczohMCx0aGlzLmNoYXJhY3RlckRhdGE9ImNoYXJhY3RlckRhdGFPbGRWYWx1ZSJpbiBhJiYhKCJjaGFyYWN0ZXJEYXRhImluIGEpPyEwOiEhYS5jaGFyYWN0ZXJEYXRhLCF0aGlzLmF0dHJpYnV0ZXMmJihhLmF0dHJpYnV0ZU9sZFZhbHVlfHwiYXR0cmlidXRlRmlsdGVyImluIGEpfHwhdGhpcy5jaGFyYWN0ZXJEYXRhJiZhLmNoYXJhY3RlckRhdGFPbGRWYWx1ZSl0aHJvdyBuZXcgVHlwZUVycm9yO2lmKHRoaXMuY2hhcmFjdGVyRGF0YT0hIWEuY2hhcmFjdGVyRGF0YSx0aGlzLmF0dHJpYnV0ZU9sZFZhbHVlPSEhYS5hdHRyaWJ1dGVPbGRWYWx1ZSx0aGlzLmNoYXJhY3RlckRhdGFPbGRWYWx1ZT0hIWEuY2hhcmFjdGVyRGF0YU9sZFZhbHVlLCJhdHRyaWJ1dGVGaWx0ZXIiaW4gYSl7aWYobnVsbD09YS5hdHRyaWJ1dGVGaWx0ZXJ8fCJvYmplY3QiIT10eXBlb2YgYS5hdHRyaWJ1dGVGaWx0ZXIpdGhyb3cgbmV3IFR5cGVFcnJvcjt0aGlzLmF0dHJpYnV0ZUZpbHRlcj1xLmNhbGwoYS5hdHRyaWJ1dGVGaWx0ZXIpfWVsc2UgdGhpcy5hdHRyaWJ1dGVGaWx0ZXI9bnVsbH1mdW5jdGlvbiBpKGEpe3RoaXMuY2FsbGJhY2tfPWEsdGhpcy5ub2Rlc189W10sdGhpcy5yZWNvcmRzXz1bXSx0aGlzLnVpZF89KytyLG8ucHVzaCh0aGlzKX1mdW5jdGlvbiBqKGEsYixjKXt0aGlzLm9ic2VydmVyPWEsdGhpcy50YXJnZXQ9Yix0aGlzLm9wdGlvbnM9Yyx0aGlzLnRyYW5zaWVudE9ic2VydmVkTm9kZXM9W119dmFyIGs9YS5zZXRFbmRPZk1pY3JvdGFzayxsPWEud3JhcElmTmVlZGVkLG09YS53cmFwcGVycyxuPW5ldyBXZWFrTWFwLG89W10scD0hMSxxPUFycmF5LnByb3RvdHlwZS5zbGljZSxyPTA7aS5wcm90b3R5cGU9e29ic2VydmU6ZnVuY3Rpb24oYSxiKXthPWwoYSk7dmFyIGMsZD1uZXcgaChiKSxlPW4uZ2V0KGEpO2V8fG4uc2V0KGEsZT1bXSk7Zm9yKHZhciBmPTA7ZjxlLmxlbmd0aDtmKyspZVtmXS5vYnNlcnZlcj09PXRoaXMmJihjPWVbZl0sYy5yZW1vdmVUcmFuc2llbnRPYnNlcnZlcnMoKSxjLm9wdGlvbnM9ZCk7Y3x8KGM9bmV3IGoodGhpcyxhLGQpLGUucHVzaChjKSx0aGlzLm5vZGVzXy5wdXNoKGEpKX0sZGlzY29ubmVjdDpmdW5jdGlvbigpe3RoaXMubm9kZXNfLmZvckVhY2goZnVuY3Rpb24oYSl7Zm9yKHZhciBiPW4uZ2V0KGEpLGM9MDtjPGIubGVuZ3RoO2MrKyl7dmFyIGQ9YltjXTtpZihkLm9ic2VydmVyPT09dGhpcyl7Yi5zcGxpY2UoYywxKTticmVha319fSx0aGlzKSx0aGlzLnJlY29yZHNfPVtdfSx0YWtlUmVjb3JkczpmdW5jdGlvbigpe3ZhciBhPXRoaXMucmVjb3Jkc187cmV0dXJuIHRoaXMucmVjb3Jkc189W10sYX19LGoucHJvdG90eXBlPXthZGRUcmFuc2llbnRPYnNlcnZlcjpmdW5jdGlvbihhKXtpZihhIT09dGhpcy50YXJnZXQpe3RoaXMudHJhbnNpZW50T2JzZXJ2ZWROb2Rlcy5wdXNoKGEpO3ZhciBiPW4uZ2V0KGEpO2J8fG4uc2V0KGEsYj1bXSksYi5wdXNoKHRoaXMpfX0scmVtb3ZlVHJhbnNpZW50T2JzZXJ2ZXJzOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy50cmFuc2llbnRPYnNlcnZlZE5vZGVzO3RoaXMudHJhbnNpZW50T2JzZXJ2ZWROb2Rlcz1bXTtmb3IodmFyIGI9MDtiPGEubGVuZ3RoO2IrKylmb3IodmFyIGM9YVtiXSxkPW4uZ2V0KGMpLGU9MDtlPGQubGVuZ3RoO2UrKylpZihkW2VdPT09dGhpcyl7ZC5zcGxpY2UoZSwxKTticmVha319fSxhLmVucXVldWVNdXRhdGlvbj1nLGEucmVnaXN0ZXJUcmFuc2llbnRPYnNlcnZlcnM9ZSxhLndyYXBwZXJzLk11dGF0aW9uT2JzZXJ2ZXI9aSxhLndyYXBwZXJzLk11dGF0aW9uUmVjb3JkPWR9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSxiKXt0aGlzLnJvb3Q9YSx0aGlzLnBhcmVudD1ifWZ1bmN0aW9uIGMoYSxiKXtpZihhLnRyZWVTY29wZV8hPT1iKXthLnRyZWVTY29wZV89Yjtmb3IodmFyIGQ9YS5zaGFkb3dSb290O2Q7ZD1kLm9sZGVyU2hhZG93Um9vdClkLnRyZWVTY29wZV8ucGFyZW50PWI7Zm9yKHZhciBlPWEuZmlyc3RDaGlsZDtlO2U9ZS5uZXh0U2libGluZyljKGUsYil9fWZ1bmN0aW9uIGQoYyl7aWYoYyBpbnN0YW5jZW9mIGEud3JhcHBlcnMuV2luZG93LGMudHJlZVNjb3BlXylyZXR1cm4gYy50cmVlU2NvcGVfO3ZhciBlLGY9Yy5wYXJlbnROb2RlO3JldHVybiBlPWY/ZChmKTpuZXcgYihjLG51bGwpLGMudHJlZVNjb3BlXz1lfWIucHJvdG90eXBlPXtnZXQgcmVuZGVyZXIoKXtyZXR1cm4gdGhpcy5yb290IGluc3RhbmNlb2YgYS53cmFwcGVycy5TaGFkb3dSb290P2EuZ2V0UmVuZGVyZXJGb3JIb3N0KHRoaXMucm9vdC5ob3N0KTpudWxsfSxjb250YWluczpmdW5jdGlvbihhKXtmb3IoO2E7YT1hLnBhcmVudClpZihhPT09dGhpcylyZXR1cm4hMDtyZXR1cm4hMX19LGEuVHJlZVNjb3BlPWIsYS5nZXRUcmVlU2NvcGU9ZCxhLnNldFRyZWVTY29wZT1jfSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe3JldHVybiBhIGluc3RhbmNlb2YgUS5TaGFkb3dSb290fWZ1bmN0aW9uIGMoYSl7cmV0dXJuIEwoYSkucm9vdH1mdW5jdGlvbiBkKGEsZCl7dmFyIGg9W10saT1hO2ZvcihoLnB1c2goaSk7aTspe3ZhciBqPWcoaSk7aWYoaiYmai5sZW5ndGg+MCl7Zm9yKHZhciBrPTA7azxqLmxlbmd0aDtrKyspe3ZhciBtPWpba107aWYoZihtKSl7dmFyIG49YyhtKSxvPW4ub2xkZXJTaGFkb3dSb290O28mJmgucHVzaChvKX1oLnB1c2gobSl9aT1qW2oubGVuZ3RoLTFdfWVsc2UgaWYoYihpKSl7aWYobChhLGkpJiZlKGQpKWJyZWFrO2k9aS5ob3N0LGgucHVzaChpKX1lbHNlIGk9aS5wYXJlbnROb2RlLGkmJmgucHVzaChpKX1yZXR1cm4gaH1mdW5jdGlvbiBlKGEpe2lmKCFhKXJldHVybiExO3N3aXRjaChhLnR5cGUpe2Nhc2UiYWJvcnQiOmNhc2UiZXJyb3IiOmNhc2Uic2VsZWN0IjpjYXNlImNoYW5nZSI6Y2FzZSJsb2FkIjpjYXNlInJlc2V0IjpjYXNlInJlc2l6ZSI6Y2FzZSJzY3JvbGwiOmNhc2Uic2VsZWN0c3RhcnQiOnJldHVybiEwfXJldHVybiExfWZ1bmN0aW9uIGYoYSl7cmV0dXJuIGEgaW5zdGFuY2VvZiBIVE1MU2hhZG93RWxlbWVudH1mdW5jdGlvbiBnKGIpe3JldHVybiBhLmdldERlc3RpbmF0aW9uSW5zZXJ0aW9uUG9pbnRzKGIpfWZ1bmN0aW9uIGgoYSxiKXtpZigwPT09YS5sZW5ndGgpcmV0dXJuIGI7YiBpbnN0YW5jZW9mIFEuV2luZG93JiYoYj1iLmRvY3VtZW50KTtmb3IodmFyIGM9TChiKSxkPWFbMF0sZT1MKGQpLGY9aihjLGUpLGc9MDtnPGEubGVuZ3RoO2crKyl7dmFyIGg9YVtnXTtpZihMKGgpPT09ZilyZXR1cm4gaH1yZXR1cm4gYVthLmxlbmd0aC0xXX1mdW5jdGlvbiBpKGEpe2Zvcih2YXIgYj1bXTthO2E9YS5wYXJlbnQpYi5wdXNoKGEpO3JldHVybiBifWZ1bmN0aW9uIGooYSxiKXtmb3IodmFyIGM9aShhKSxkPWkoYiksZT1udWxsO2MubGVuZ3RoPjAmJmQubGVuZ3RoPjA7KXt2YXIgZj1jLnBvcCgpLGc9ZC5wb3AoKTtpZihmIT09ZylicmVhaztlPWZ9cmV0dXJuIGV9ZnVuY3Rpb24gayhhLGIsYyl7YiBpbnN0YW5jZW9mIFEuV2luZG93JiYoYj1iLmRvY3VtZW50KTt2YXIgZSxmPUwoYiksZz1MKGMpLGg9ZChjLGEpLGU9aihmLGcpO2V8fChlPWcucm9vdCk7Zm9yKHZhciBpPWU7aTtpPWkucGFyZW50KWZvcih2YXIgaz0wO2s8aC5sZW5ndGg7aysrKXt2YXIgbD1oW2tdO2lmKEwobCk9PT1pKXJldHVybiBsfXJldHVybiBudWxsfWZ1bmN0aW9uIGwoYSxiKXtyZXR1cm4gTChhKT09PUwoYil9ZnVuY3Rpb24gbShhKXtpZighUy5nZXQoYSkmJihTLnNldChhLCEwKSxuKFAoYSksUChhLnRhcmdldCkpLEopKXt2YXIgYj1KO3Rocm93IEo9bnVsbCxifX1mdW5jdGlvbiBuKGIsYyl7aWYoVC5nZXQoYikpdGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkU3RhdGVFcnJvciIpO1Quc2V0KGIsITApLGEucmVuZGVyQWxsUGVuZGluZygpO3ZhciBlLGYsZyxoPWIudHlwZTtpZigibG9hZCI9PT1oJiYhYi5idWJibGVzKXt2YXIgaT1jO2kgaW5zdGFuY2VvZiBRLkRvY3VtZW50JiYoZz1pLmRlZmF1bHRWaWV3KSYmKGY9aSxlPVtdKX1pZighZSlpZihjIGluc3RhbmNlb2YgUS5XaW5kb3cpZz1jLGU9W107ZWxzZSBpZihlPWQoYyxiKSwibG9hZCIhPT1iLnR5cGUpe3ZhciBpPWVbZS5sZW5ndGgtMV07aSBpbnN0YW5jZW9mIFEuRG9jdW1lbnQmJihnPWkuZGVmYXVsdFZpZXcpfXJldHVybiBfLnNldChiLGUpLG8oYixlLGcsZikmJnAoYixlLGcsZikmJnEoYixlLGcsZiksWC5zZXQoYixhYiksVi5kZWxldGUoYixudWxsKSxULmRlbGV0ZShiKSxiLmRlZmF1bHRQcmV2ZW50ZWQKfWZ1bmN0aW9uIG8oYSxiLGMsZCl7dmFyIGU9YmI7aWYoYyYmIXIoYyxhLGUsYixkKSlyZXR1cm4hMTtmb3IodmFyIGY9Yi5sZW5ndGgtMTtmPjA7Zi0tKWlmKCFyKGJbZl0sYSxlLGIsZCkpcmV0dXJuITE7cmV0dXJuITB9ZnVuY3Rpb24gcChhLGIsYyxkKXt2YXIgZT1jYixmPWJbMF18fGM7cmV0dXJuIHIoZixhLGUsYixkKX1mdW5jdGlvbiBxKGEsYixjLGQpe2Zvcih2YXIgZT1kYixmPTE7ZjxiLmxlbmd0aDtmKyspaWYoIXIoYltmXSxhLGUsYixkKSlyZXR1cm47YyYmYi5sZW5ndGg+MCYmcihjLGEsZSxiLGQpfWZ1bmN0aW9uIHIoYSxiLGMsZCxlKXt2YXIgZj1SLmdldChhKTtpZighZilyZXR1cm4hMDt2YXIgZz1lfHxoKGQsYSk7aWYoZz09PWEpe2lmKGM9PT1iYilyZXR1cm4hMDtjPT09ZGImJihjPWNiKX1lbHNlIGlmKGM9PT1kYiYmIWIuYnViYmxlcylyZXR1cm4hMDtpZigicmVsYXRlZFRhcmdldCJpbiBiKXt2YXIgaT1PKGIpLGo9aS5yZWxhdGVkVGFyZ2V0O2lmKGope2lmKGogaW5zdGFuY2VvZiBPYmplY3QmJmouYWRkRXZlbnRMaXN0ZW5lcil7dmFyIGw9UChqKSxtPWsoYixhLGwpO2lmKG09PT1nKXJldHVybiEwfWVsc2UgbT1udWxsO1cuc2V0KGIsbSl9fVguc2V0KGIsYyk7dmFyIG49Yi50eXBlLG89ITE7VS5zZXQoYixnKSxWLnNldChiLGEpLGYuZGVwdGgrKztmb3IodmFyIHA9MCxxPWYubGVuZ3RoO3E+cDtwKyspe3ZhciByPWZbcF07aWYoci5yZW1vdmVkKW89ITA7ZWxzZSBpZighKHIudHlwZSE9PW58fCFyLmNhcHR1cmUmJmM9PT1iYnx8ci5jYXB0dXJlJiZjPT09ZGIpKXRyeXtpZigiZnVuY3Rpb24iPT10eXBlb2Ygci5oYW5kbGVyP3IuaGFuZGxlci5jYWxsKGEsYik6ci5oYW5kbGVyLmhhbmRsZUV2ZW50KGIpLFouZ2V0KGIpKXJldHVybiExfWNhdGNoKHMpe0p8fChKPXMpfX1pZihmLmRlcHRoLS0sbyYmMD09PWYuZGVwdGgpe3ZhciB0PWYuc2xpY2UoKTtmLmxlbmd0aD0wO2Zvcih2YXIgcD0wO3A8dC5sZW5ndGg7cCsrKXRbcF0ucmVtb3ZlZHx8Zi5wdXNoKHRbcF0pfXJldHVybiFZLmdldChiKX1mdW5jdGlvbiBzKGEsYixjKXt0aGlzLnR5cGU9YSx0aGlzLmhhbmRsZXI9Yix0aGlzLmNhcHR1cmU9Qm9vbGVhbihjKX1mdW5jdGlvbiB0KGEsYil7aWYoIShhIGluc3RhbmNlb2YgZWIpKXJldHVybiBQKHgoZWIsIkV2ZW50IixhLGIpKTt2YXIgYz1hO3JldHVybiBwYnx8ImJlZm9yZXVubG9hZCIhPT1jLnR5cGU/dm9pZCh0aGlzLmltcGw9Yyk6bmV3IHkoYyl9ZnVuY3Rpb24gdShhKXtyZXR1cm4gYSYmYS5yZWxhdGVkVGFyZ2V0P09iamVjdC5jcmVhdGUoYSx7cmVsYXRlZFRhcmdldDp7dmFsdWU6TyhhLnJlbGF0ZWRUYXJnZXQpfX0pOmF9ZnVuY3Rpb24gdihhLGIsYyl7dmFyIGQ9d2luZG93W2FdLGU9ZnVuY3Rpb24oYixjKXtyZXR1cm4gYiBpbnN0YW5jZW9mIGQ/dm9pZCh0aGlzLmltcGw9Yik6UCh4KGQsYSxiLGMpKX07aWYoZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShiLnByb3RvdHlwZSksYyYmTShlLnByb3RvdHlwZSxjKSxkKXRyeXtOKGQsZSxuZXcgZCgidGVtcCIpKX1jYXRjaChmKXtOKGQsZSxkb2N1bWVudC5jcmVhdGVFdmVudChhKSl9cmV0dXJuIGV9ZnVuY3Rpb24gdyhhLGIpe3JldHVybiBmdW5jdGlvbigpe2FyZ3VtZW50c1tiXT1PKGFyZ3VtZW50c1tiXSk7dmFyIGM9Tyh0aGlzKTtjW2FdLmFwcGx5KGMsYXJndW1lbnRzKX19ZnVuY3Rpb24geChhLGIsYyxkKXtpZihuYilyZXR1cm4gbmV3IGEoYyx1KGQpKTt2YXIgZT1PKGRvY3VtZW50LmNyZWF0ZUV2ZW50KGIpKSxmPW1iW2JdLGc9W2NdO3JldHVybiBPYmplY3Qua2V5cyhmKS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3ZhciBiPW51bGwhPWQmJmEgaW4gZD9kW2FdOmZbYV07InJlbGF0ZWRUYXJnZXQiPT09YSYmKGI9TyhiKSksZy5wdXNoKGIpfSksZVsiaW5pdCIrYl0uYXBwbHkoZSxnKSxlfWZ1bmN0aW9uIHkoYSl7dC5jYWxsKHRoaXMsYSl9ZnVuY3Rpb24geihhKXtyZXR1cm4iZnVuY3Rpb24iPT10eXBlb2YgYT8hMDphJiZhLmhhbmRsZUV2ZW50fWZ1bmN0aW9uIEEoYSl7c3dpdGNoKGEpe2Nhc2UiRE9NQXR0ck1vZGlmaWVkIjpjYXNlIkRPTUF0dHJpYnV0ZU5hbWVDaGFuZ2VkIjpjYXNlIkRPTUNoYXJhY3RlckRhdGFNb2RpZmllZCI6Y2FzZSJET01FbGVtZW50TmFtZUNoYW5nZWQiOmNhc2UiRE9NTm9kZUluc2VydGVkIjpjYXNlIkRPTU5vZGVJbnNlcnRlZEludG9Eb2N1bWVudCI6Y2FzZSJET01Ob2RlUmVtb3ZlZCI6Y2FzZSJET01Ob2RlUmVtb3ZlZEZyb21Eb2N1bWVudCI6Y2FzZSJET01TdWJ0cmVlTW9kaWZpZWQiOnJldHVybiEwfXJldHVybiExfWZ1bmN0aW9uIEIoYSl7dGhpcy5pbXBsPWF9ZnVuY3Rpb24gQyhhKXtyZXR1cm4gYSBpbnN0YW5jZW9mIFEuU2hhZG93Um9vdCYmKGE9YS5ob3N0KSxPKGEpfWZ1bmN0aW9uIEQoYSxiKXt2YXIgYz1SLmdldChhKTtpZihjKWZvcih2YXIgZD0wO2Q8Yy5sZW5ndGg7ZCsrKWlmKCFjW2RdLnJlbW92ZWQmJmNbZF0udHlwZT09PWIpcmV0dXJuITA7cmV0dXJuITF9ZnVuY3Rpb24gRShhLGIpe2Zvcih2YXIgYz1PKGEpO2M7Yz1jLnBhcmVudE5vZGUpaWYoRChQKGMpLGIpKXJldHVybiEwO3JldHVybiExfWZ1bmN0aW9uIEYoYSl7SyhhLHJiKX1mdW5jdGlvbiBHKGIsYyxlLGYpe2EucmVuZGVyQWxsUGVuZGluZygpO3ZhciBnPVAoc2IuY2FsbChjLmltcGwsZSxmKSk7aWYoIWcpcmV0dXJuIG51bGw7dmFyIGk9ZChnLG51bGwpLGo9aS5sYXN0SW5kZXhPZihiKTtyZXR1cm4tMT09aj9udWxsOihpPWkuc2xpY2UoMCxqKSxoKGksYikpfWZ1bmN0aW9uIEgoYSl7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGI9JC5nZXQodGhpcyk7cmV0dXJuIGImJmJbYV0mJmJbYV0udmFsdWV8fG51bGx9fWZ1bmN0aW9uIEkoYSl7dmFyIGI9YS5zbGljZSgyKTtyZXR1cm4gZnVuY3Rpb24oYyl7dmFyIGQ9JC5nZXQodGhpcyk7ZHx8KGQ9T2JqZWN0LmNyZWF0ZShudWxsKSwkLnNldCh0aGlzLGQpKTt2YXIgZT1kW2FdO2lmKGUmJnRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihiLGUud3JhcHBlZCwhMSksImZ1bmN0aW9uIj09dHlwZW9mIGMpe3ZhciBmPWZ1bmN0aW9uKGIpe3ZhciBkPWMuY2FsbCh0aGlzLGIpO2Q9PT0hMT9iLnByZXZlbnREZWZhdWx0KCk6Im9uYmVmb3JldW5sb2FkIj09PWEmJiJzdHJpbmciPT10eXBlb2YgZCYmKGIucmV0dXJuVmFsdWU9ZCl9O3RoaXMuYWRkRXZlbnRMaXN0ZW5lcihiLGYsITEpLGRbYV09e3ZhbHVlOmMsd3JhcHBlZDpmfX19fXZhciBKLEs9YS5mb3J3YXJkTWV0aG9kc1RvV3JhcHBlcixMPWEuZ2V0VHJlZVNjb3BlLE09YS5taXhpbixOPWEucmVnaXN0ZXJXcmFwcGVyLE89YS51bndyYXAsUD1hLndyYXAsUT1hLndyYXBwZXJzLFI9KG5ldyBXZWFrTWFwLG5ldyBXZWFrTWFwKSxTPW5ldyBXZWFrTWFwLFQ9bmV3IFdlYWtNYXAsVT1uZXcgV2Vha01hcCxWPW5ldyBXZWFrTWFwLFc9bmV3IFdlYWtNYXAsWD1uZXcgV2Vha01hcCxZPW5ldyBXZWFrTWFwLFo9bmV3IFdlYWtNYXAsJD1uZXcgV2Vha01hcCxfPW5ldyBXZWFrTWFwLGFiPTAsYmI9MSxjYj0yLGRiPTM7cy5wcm90b3R5cGU9e2VxdWFsczpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5oYW5kbGVyPT09YS5oYW5kbGVyJiZ0aGlzLnR5cGU9PT1hLnR5cGUmJnRoaXMuY2FwdHVyZT09PWEuY2FwdHVyZX0sZ2V0IHJlbW92ZWQoKXtyZXR1cm4gbnVsbD09PXRoaXMuaGFuZGxlcn0scmVtb3ZlOmZ1bmN0aW9uKCl7dGhpcy5oYW5kbGVyPW51bGx9fTt2YXIgZWI9d2luZG93LkV2ZW50O2ViLnByb3RvdHlwZS5wb2x5bWVyQmxhY2tMaXN0Xz17cmV0dXJuVmFsdWU6ITAsa2V5TG9jYXRpb246ITB9LHQucHJvdG90eXBlPXtnZXQgdGFyZ2V0KCl7cmV0dXJuIFUuZ2V0KHRoaXMpfSxnZXQgY3VycmVudFRhcmdldCgpe3JldHVybiBWLmdldCh0aGlzKX0sZ2V0IGV2ZW50UGhhc2UoKXtyZXR1cm4gWC5nZXQodGhpcyl9LGdldCBwYXRoKCl7dmFyIGE9Xy5nZXQodGhpcyk7cmV0dXJuIGE/YS5zbGljZSgpOltdfSxzdG9wUHJvcGFnYXRpb246ZnVuY3Rpb24oKXtZLnNldCh0aGlzLCEwKX0sc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uOmZ1bmN0aW9uKCl7WS5zZXQodGhpcywhMCksWi5zZXQodGhpcywhMCl9fSxOKGViLHQsZG9jdW1lbnQuY3JlYXRlRXZlbnQoIkV2ZW50IikpO3ZhciBmYj12KCJVSUV2ZW50Iix0KSxnYj12KCJDdXN0b21FdmVudCIsdCksaGI9e2dldCByZWxhdGVkVGFyZ2V0KCl7dmFyIGE9Vy5nZXQodGhpcyk7cmV0dXJuIHZvaWQgMCE9PWE/YTpQKE8odGhpcykucmVsYXRlZFRhcmdldCl9fSxpYj1NKHtpbml0TW91c2VFdmVudDp3KCJpbml0TW91c2VFdmVudCIsMTQpfSxoYiksamI9TSh7aW5pdEZvY3VzRXZlbnQ6dygiaW5pdEZvY3VzRXZlbnQiLDUpfSxoYiksa2I9digiTW91c2VFdmVudCIsZmIsaWIpLGxiPXYoIkZvY3VzRXZlbnQiLGZiLGpiKSxtYj1PYmplY3QuY3JlYXRlKG51bGwpLG5iPWZ1bmN0aW9uKCl7dHJ5e25ldyB3aW5kb3cuRm9jdXNFdmVudCgiZm9jdXMiKX1jYXRjaChhKXtyZXR1cm4hMX1yZXR1cm4hMH0oKTtpZighbmIpe3ZhciBvYj1mdW5jdGlvbihhLGIsYyl7aWYoYyl7dmFyIGQ9bWJbY107Yj1NKE0oe30sZCksYil9bWJbYV09Yn07b2IoIkV2ZW50Iix7YnViYmxlczohMSxjYW5jZWxhYmxlOiExfSksb2IoIkN1c3RvbUV2ZW50Iix7ZGV0YWlsOm51bGx9LCJFdmVudCIpLG9iKCJVSUV2ZW50Iix7dmlldzpudWxsLGRldGFpbDowfSwiRXZlbnQiKSxvYigiTW91c2VFdmVudCIse3NjcmVlblg6MCxzY3JlZW5ZOjAsY2xpZW50WDowLGNsaWVudFk6MCxjdHJsS2V5OiExLGFsdEtleTohMSxzaGlmdEtleTohMSxtZXRhS2V5OiExLGJ1dHRvbjowLHJlbGF0ZWRUYXJnZXQ6bnVsbH0sIlVJRXZlbnQiKSxvYigiRm9jdXNFdmVudCIse3JlbGF0ZWRUYXJnZXQ6bnVsbH0sIlVJRXZlbnQiKX12YXIgcGI9d2luZG93LkJlZm9yZVVubG9hZEV2ZW50O3kucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodC5wcm90b3R5cGUpLE0oeS5wcm90b3R5cGUse2dldCByZXR1cm5WYWx1ZSgpe3JldHVybiB0aGlzLmltcGwucmV0dXJuVmFsdWV9LHNldCByZXR1cm5WYWx1ZShhKXt0aGlzLmltcGwucmV0dXJuVmFsdWU9YX19KSxwYiYmTihwYix5KTt2YXIgcWI9d2luZG93LkV2ZW50VGFyZ2V0LHJiPVsiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJkaXNwYXRjaEV2ZW50Il07W05vZGUsV2luZG93XS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3ZhciBiPWEucHJvdG90eXBlO3JiLmZvckVhY2goZnVuY3Rpb24oYSl7T2JqZWN0LmRlZmluZVByb3BlcnR5KGIsYSsiXyIse3ZhbHVlOmJbYV19KX0pfSksQi5wcm90b3R5cGU9e2FkZEV2ZW50TGlzdGVuZXI6ZnVuY3Rpb24oYSxiLGMpe2lmKHooYikmJiFBKGEpKXt2YXIgZD1uZXcgcyhhLGIsYyksZT1SLmdldCh0aGlzKTtpZihlKXtmb3IodmFyIGY9MDtmPGUubGVuZ3RoO2YrKylpZihkLmVxdWFscyhlW2ZdKSlyZXR1cm59ZWxzZSBlPVtdLGUuZGVwdGg9MCxSLnNldCh0aGlzLGUpO2UucHVzaChkKTt2YXIgZz1DKHRoaXMpO2cuYWRkRXZlbnRMaXN0ZW5lcl8oYSxtLCEwKX19LHJlbW92ZUV2ZW50TGlzdGVuZXI6ZnVuY3Rpb24oYSxiLGMpe2M9Qm9vbGVhbihjKTt2YXIgZD1SLmdldCh0aGlzKTtpZihkKXtmb3IodmFyIGU9MCxmPSExLGc9MDtnPGQubGVuZ3RoO2crKylkW2ddLnR5cGU9PT1hJiZkW2ddLmNhcHR1cmU9PT1jJiYoZSsrLGRbZ10uaGFuZGxlcj09PWImJihmPSEwLGRbZ10ucmVtb3ZlKCkpKTtpZihmJiYxPT09ZSl7dmFyIGg9Qyh0aGlzKTtoLnJlbW92ZUV2ZW50TGlzdGVuZXJfKGEsbSwhMCl9fX0sZGlzcGF0Y2hFdmVudDpmdW5jdGlvbihiKXt2YXIgYz1PKGIpLGQ9Yy50eXBlO1Muc2V0KGMsITEpLGEucmVuZGVyQWxsUGVuZGluZygpO3ZhciBlO0UodGhpcyxkKXx8KGU9ZnVuY3Rpb24oKXt9LHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihkLGUsITApKTt0cnl7cmV0dXJuIE8odGhpcykuZGlzcGF0Y2hFdmVudF8oYyl9ZmluYWxseXtlJiZ0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoZCxlLCEwKX19fSxxYiYmTihxYixCKTt2YXIgc2I9ZG9jdW1lbnQuZWxlbWVudEZyb21Qb2ludDthLmVsZW1lbnRGcm9tUG9pbnQ9RyxhLmdldEV2ZW50SGFuZGxlckdldHRlcj1ILGEuZ2V0RXZlbnRIYW5kbGVyU2V0dGVyPUksYS53cmFwRXZlbnRUYXJnZXRNZXRob2RzPUYsYS53cmFwcGVycy5CZWZvcmVVbmxvYWRFdmVudD15LGEud3JhcHBlcnMuQ3VzdG9tRXZlbnQ9Z2IsYS53cmFwcGVycy5FdmVudD10LGEud3JhcHBlcnMuRXZlbnRUYXJnZXQ9QixhLndyYXBwZXJzLkZvY3VzRXZlbnQ9bGIsYS53cmFwcGVycy5Nb3VzZUV2ZW50PWtiLGEud3JhcHBlcnMuVUlFdmVudD1mYn0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhLGIpe09iamVjdC5kZWZpbmVQcm9wZXJ0eShhLGIsbyl9ZnVuY3Rpb24gYyhhKXt0aGlzLmltcGw9YX1mdW5jdGlvbiBkKCl7dGhpcy5sZW5ndGg9MCxiKHRoaXMsImxlbmd0aCIpfWZ1bmN0aW9uIGUoYSl7Zm9yKHZhciBiPW5ldyBkLGU9MDtlPGEubGVuZ3RoO2UrKyliW2VdPW5ldyBjKGFbZV0pO3JldHVybiBiLmxlbmd0aD1lLGJ9ZnVuY3Rpb24gZihhKXtnLmNhbGwodGhpcyxhKX12YXIgZz1hLndyYXBwZXJzLlVJRXZlbnQsaD1hLm1peGluLGk9YS5yZWdpc3RlcldyYXBwZXIsaj1hLnVud3JhcCxrPWEud3JhcCxsPXdpbmRvdy5Ub3VjaEV2ZW50O2lmKGwpe3ZhciBtO3RyeXttPWRvY3VtZW50LmNyZWF0ZUV2ZW50KCJUb3VjaEV2ZW50Iil9Y2F0Y2gobil7cmV0dXJufXZhciBvPXtlbnVtZXJhYmxlOiExfTtjLnByb3RvdHlwZT17Z2V0IHRhcmdldCgpe3JldHVybiBrKHRoaXMuaW1wbC50YXJnZXQpfX07dmFyIHA9e2NvbmZpZ3VyYWJsZTohMCxlbnVtZXJhYmxlOiEwLGdldDpudWxsfTtbImNsaWVudFgiLCJjbGllbnRZIiwic2NyZWVuWCIsInNjcmVlblkiLCJwYWdlWCIsInBhZ2VZIiwiaWRlbnRpZmllciIsIndlYmtpdFJhZGl1c1giLCJ3ZWJraXRSYWRpdXNZIiwid2Via2l0Um90YXRpb25BbmdsZSIsIndlYmtpdEZvcmNlIl0uZm9yRWFjaChmdW5jdGlvbihhKXtwLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmltcGxbYV19LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjLnByb3RvdHlwZSxhLHApfSksZC5wcm90b3R5cGU9e2l0ZW06ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXNbYV19fSxmLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGcucHJvdG90eXBlKSxoKGYucHJvdG90eXBlLHtnZXQgdG91Y2hlcygpe3JldHVybiBlKGoodGhpcykudG91Y2hlcyl9LGdldCB0YXJnZXRUb3VjaGVzKCl7cmV0dXJuIGUoaih0aGlzKS50YXJnZXRUb3VjaGVzKX0sZ2V0IGNoYW5nZWRUb3VjaGVzKCl7cmV0dXJuIGUoaih0aGlzKS5jaGFuZ2VkVG91Y2hlcyl9LGluaXRUb3VjaEV2ZW50OmZ1bmN0aW9uKCl7dGhyb3cgbmV3IEVycm9yKCJOb3QgaW1wbGVtZW50ZWQiKX19KSxpKGwsZixtKSxhLndyYXBwZXJzLlRvdWNoPWMsYS53cmFwcGVycy5Ub3VjaEV2ZW50PWYsYS53cmFwcGVycy5Ub3VjaExpc3Q9ZH19KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSxiKXtPYmplY3QuZGVmaW5lUHJvcGVydHkoYSxiLGcpfWZ1bmN0aW9uIGMoKXt0aGlzLmxlbmd0aD0wLGIodGhpcywibGVuZ3RoIil9ZnVuY3Rpb24gZChhKXtpZihudWxsPT1hKXJldHVybiBhO2Zvcih2YXIgYj1uZXcgYyxkPTAsZT1hLmxlbmd0aDtlPmQ7ZCsrKWJbZF09ZihhW2RdKTtyZXR1cm4gYi5sZW5ndGg9ZSxifWZ1bmN0aW9uIGUoYSxiKXthLnByb3RvdHlwZVtiXT1mdW5jdGlvbigpe3JldHVybiBkKHRoaXMuaW1wbFtiXS5hcHBseSh0aGlzLmltcGwsYXJndW1lbnRzKSl9fXZhciBmPWEud3JhcCxnPXtlbnVtZXJhYmxlOiExfTtjLnByb3RvdHlwZT17aXRlbTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpc1thXX19LGIoYy5wcm90b3R5cGUsIml0ZW0iKSxhLndyYXBwZXJzLk5vZGVMaXN0PWMsYS5hZGRXcmFwTm9kZUxpc3RNZXRob2Q9ZSxhLndyYXBOb2RlTGlzdD1kfSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjthLndyYXBIVE1MQ29sbGVjdGlvbj1hLndyYXBOb2RlTGlzdCxhLndyYXBwZXJzLkhUTUxDb2xsZWN0aW9uPWEud3JhcHBlcnMuTm9kZUxpc3R9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7QShhIGluc3RhbmNlb2Ygdyl9ZnVuY3Rpb24gYyhhKXt2YXIgYj1uZXcgeTtyZXR1cm4gYlswXT1hLGIubGVuZ3RoPTEsYn1mdW5jdGlvbiBkKGEsYixjKXtDKGIsImNoaWxkTGlzdCIse3JlbW92ZWROb2RlczpjLHByZXZpb3VzU2libGluZzphLnByZXZpb3VzU2libGluZyxuZXh0U2libGluZzphLm5leHRTaWJsaW5nfSl9ZnVuY3Rpb24gZShhLGIpe0MoYSwiY2hpbGRMaXN0Iix7cmVtb3ZlZE5vZGVzOmJ9KX1mdW5jdGlvbiBmKGEsYixkLGUpe2lmKGEgaW5zdGFuY2VvZiBEb2N1bWVudEZyYWdtZW50KXt2YXIgZj1oKGEpO089ITA7Zm9yKHZhciBnPWYubGVuZ3RoLTE7Zz49MDtnLS0pYS5yZW1vdmVDaGlsZChmW2ddKSxmW2ddLnBhcmVudE5vZGVfPWI7Tz0hMTtmb3IodmFyIGc9MDtnPGYubGVuZ3RoO2crKylmW2ddLnByZXZpb3VzU2libGluZ189ZltnLTFdfHxkLGZbZ10ubmV4dFNpYmxpbmdfPWZbZysxXXx8ZTtyZXR1cm4gZCYmKGQubmV4dFNpYmxpbmdfPWZbMF0pLGUmJihlLnByZXZpb3VzU2libGluZ189ZltmLmxlbmd0aC0xXSksZn12YXIgZj1jKGEpLGk9YS5wYXJlbnROb2RlO3JldHVybiBpJiZpLnJlbW92ZUNoaWxkKGEpLGEucGFyZW50Tm9kZV89YixhLnByZXZpb3VzU2libGluZ189ZCxhLm5leHRTaWJsaW5nXz1lLGQmJihkLm5leHRTaWJsaW5nXz1hKSxlJiYoZS5wcmV2aW91c1NpYmxpbmdfPWEpLGZ9ZnVuY3Rpb24gZyhhKXtpZihhIGluc3RhbmNlb2YgRG9jdW1lbnRGcmFnbWVudClyZXR1cm4gaChhKTt2YXIgYj1jKGEpLGU9YS5wYXJlbnROb2RlO3JldHVybiBlJiZkKGEsZSxiKSxifWZ1bmN0aW9uIGgoYSl7Zm9yKHZhciBiPW5ldyB5LGM9MCxkPWEuZmlyc3RDaGlsZDtkO2Q9ZC5uZXh0U2libGluZyliW2MrK109ZDtyZXR1cm4gYi5sZW5ndGg9YyxlKGEsYiksYn1mdW5jdGlvbiBpKGEpe3JldHVybiBhfWZ1bmN0aW9uIGooYSxiKXtJKGEsYiksYS5ub2RlSXNJbnNlcnRlZF8oKX1mdW5jdGlvbiBrKGEsYil7Zm9yKHZhciBjPUQoYiksZD0wO2Q8YS5sZW5ndGg7ZCsrKWooYVtkXSxjKX1mdW5jdGlvbiBsKGEpe0koYSxuZXcgeihhLG51bGwpKX1mdW5jdGlvbiBtKGEpe2Zvcih2YXIgYj0wO2I8YS5sZW5ndGg7YisrKWwoYVtiXSl9ZnVuY3Rpb24gbihhLGIpe3ZhciBjPWEubm9kZVR5cGU9PT13LkRPQ1VNRU5UX05PREU/YTphLm93bmVyRG9jdW1lbnQ7YyE9PWIub3duZXJEb2N1bWVudCYmYy5hZG9wdE5vZGUoYil9ZnVuY3Rpb24gbyhiLGMpe2lmKGMubGVuZ3RoKXt2YXIgZD1iLm93bmVyRG9jdW1lbnQ7aWYoZCE9PWNbMF0ub3duZXJEb2N1bWVudClmb3IodmFyIGU9MDtlPGMubGVuZ3RoO2UrKylhLmFkb3B0Tm9kZU5vUmVtb3ZlKGNbZV0sZCl9fWZ1bmN0aW9uIHAoYSxiKXtvKGEsYik7dmFyIGM9Yi5sZW5ndGg7aWYoMT09PWMpcmV0dXJuIEooYlswXSk7Zm9yKHZhciBkPUooYS5vd25lckRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSksZT0wO2M+ZTtlKyspZC5hcHBlbmRDaGlsZChKKGJbZV0pKTtyZXR1cm4gZH1mdW5jdGlvbiBxKGEpe2lmKHZvaWQgMCE9PWEuZmlyc3RDaGlsZF8pZm9yKHZhciBiPWEuZmlyc3RDaGlsZF87Yjspe3ZhciBjPWI7Yj1iLm5leHRTaWJsaW5nXyxjLnBhcmVudE5vZGVfPWMucHJldmlvdXNTaWJsaW5nXz1jLm5leHRTaWJsaW5nXz12b2lkIDB9YS5maXJzdENoaWxkXz1hLmxhc3RDaGlsZF89dm9pZCAwfWZ1bmN0aW9uIHIoYSl7aWYoYS5pbnZhbGlkYXRlU2hhZG93UmVuZGVyZXIoKSl7Zm9yKHZhciBiPWEuZmlyc3RDaGlsZDtiOyl7QShiLnBhcmVudE5vZGU9PT1hKTt2YXIgYz1iLm5leHRTaWJsaW5nLGQ9SihiKSxlPWQucGFyZW50Tm9kZTtlJiZWLmNhbGwoZSxkKSxiLnByZXZpb3VzU2libGluZ189Yi5uZXh0U2libGluZ189Yi5wYXJlbnROb2RlXz1udWxsLGI9Y31hLmZpcnN0Q2hpbGRfPWEubGFzdENoaWxkXz1udWxsfWVsc2UgZm9yKHZhciBjLGY9SihhKSxnPWYuZmlyc3RDaGlsZDtnOyljPWcubmV4dFNpYmxpbmcsVi5jYWxsKGYsZyksZz1jfWZ1bmN0aW9uIHMoYSl7dmFyIGI9YS5wYXJlbnROb2RlO3JldHVybiBiJiZiLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcigpfWZ1bmN0aW9uIHQoYSl7Zm9yKHZhciBiLGM9MDtjPGEubGVuZ3RoO2MrKyliPWFbY10sYi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGIpfWZ1bmN0aW9uIHUoYSxiLGMpe3ZhciBkO2lmKGQ9TChjP1AuY2FsbChjLGEuaW1wbCwhMSk6US5jYWxsKGEuaW1wbCwhMSkpLGIpe2Zvcih2YXIgZT1hLmZpcnN0Q2hpbGQ7ZTtlPWUubmV4dFNpYmxpbmcpZC5hcHBlbmRDaGlsZCh1KGUsITAsYykpO2lmKGEgaW5zdGFuY2VvZiBOLkhUTUxUZW1wbGF0ZUVsZW1lbnQpZm9yKHZhciBmPWQuY29udGVudCxlPWEuY29udGVudC5maXJzdENoaWxkO2U7ZT1lLm5leHRTaWJsaW5nKWYuYXBwZW5kQ2hpbGQodShlLCEwLGMpKX1yZXR1cm4gZH1mdW5jdGlvbiB2KGEsYil7aWYoIWJ8fEQoYSkhPT1EKGIpKXJldHVybiExO2Zvcih2YXIgYz1iO2M7Yz1jLnBhcmVudE5vZGUpaWYoYz09PWEpcmV0dXJuITA7cmV0dXJuITF9ZnVuY3Rpb24gdyhhKXtBKGEgaW5zdGFuY2VvZiBSKSx4LmNhbGwodGhpcyxhKSx0aGlzLnBhcmVudE5vZGVfPXZvaWQgMCx0aGlzLmZpcnN0Q2hpbGRfPXZvaWQgMCx0aGlzLmxhc3RDaGlsZF89dm9pZCAwLHRoaXMubmV4dFNpYmxpbmdfPXZvaWQgMCx0aGlzLnByZXZpb3VzU2libGluZ189dm9pZCAwLHRoaXMudHJlZVNjb3BlXz12b2lkIDB9dmFyIHg9YS53cmFwcGVycy5FdmVudFRhcmdldCx5PWEud3JhcHBlcnMuTm9kZUxpc3Qsej1hLlRyZWVTY29wZSxBPWEuYXNzZXJ0LEI9YS5kZWZpbmVXcmFwR2V0dGVyLEM9YS5lbnF1ZXVlTXV0YXRpb24sRD1hLmdldFRyZWVTY29wZSxFPWEuaXNXcmFwcGVyLEY9YS5taXhpbixHPWEucmVnaXN0ZXJUcmFuc2llbnRPYnNlcnZlcnMsSD1hLnJlZ2lzdGVyV3JhcHBlcixJPWEuc2V0VHJlZVNjb3BlLEo9YS51bndyYXAsSz1hLnVud3JhcElmTmVlZGVkLEw9YS53cmFwLE09YS53cmFwSWZOZWVkZWQsTj1hLndyYXBwZXJzLE89ITEsUD1kb2N1bWVudC5pbXBvcnROb2RlLFE9d2luZG93Lk5vZGUucHJvdG90eXBlLmNsb25lTm9kZSxSPXdpbmRvdy5Ob2RlLFM9d2luZG93LkRvY3VtZW50RnJhZ21lbnQsVD0oUi5wcm90b3R5cGUuYXBwZW5kQ2hpbGQsUi5wcm90b3R5cGUuY29tcGFyZURvY3VtZW50UG9zaXRpb24pLFU9Ui5wcm90b3R5cGUuaW5zZXJ0QmVmb3JlLFY9Ui5wcm90b3R5cGUucmVtb3ZlQ2hpbGQsVz1SLnByb3RvdHlwZS5yZXBsYWNlQ2hpbGQsWD0vVHJpZGVudC8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSxZPVg/ZnVuY3Rpb24oYSxiKXt0cnl7Vi5jYWxsKGEsYil9Y2F0Y2goYyl7aWYoIShhIGluc3RhbmNlb2YgUykpdGhyb3cgY319OmZ1bmN0aW9uKGEsYil7Vi5jYWxsKGEsYil9O3cucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoeC5wcm90b3R5cGUpLEYody5wcm90b3R5cGUse2FwcGVuZENoaWxkOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmluc2VydEJlZm9yZShhLG51bGwpfSxpbnNlcnRCZWZvcmU6ZnVuY3Rpb24oYSxjKXtiKGEpO3ZhciBkO2M/RShjKT9kPUooYyk6KGQ9YyxjPUwoZCkpOihjPW51bGwsZD1udWxsKSxjJiZBKGMucGFyZW50Tm9kZT09PXRoaXMpO3ZhciBlLGg9Yz9jLnByZXZpb3VzU2libGluZzp0aGlzLmxhc3RDaGlsZCxpPSF0aGlzLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcigpJiYhcyhhKTtpZihlPWk/ZyhhKTpmKGEsdGhpcyxoLGMpLGkpbih0aGlzLGEpLHEodGhpcyksVS5jYWxsKHRoaXMuaW1wbCxKKGEpLGQpO2Vsc2V7aHx8KHRoaXMuZmlyc3RDaGlsZF89ZVswXSksY3x8KHRoaXMubGFzdENoaWxkXz1lW2UubGVuZ3RoLTFdLHZvaWQgMD09PXRoaXMuZmlyc3RDaGlsZF8mJih0aGlzLmZpcnN0Q2hpbGRfPXRoaXMuZmlyc3RDaGlsZCkpO3ZhciBqPWQ/ZC5wYXJlbnROb2RlOnRoaXMuaW1wbDtqP1UuY2FsbChqLHAodGhpcyxlKSxkKTpvKHRoaXMsZSl9cmV0dXJuIEModGhpcywiY2hpbGRMaXN0Iix7YWRkZWROb2RlczplLG5leHRTaWJsaW5nOmMscHJldmlvdXNTaWJsaW5nOmh9KSxrKGUsdGhpcyksYX0scmVtb3ZlQ2hpbGQ6ZnVuY3Rpb24oYSl7aWYoYihhKSxhLnBhcmVudE5vZGUhPT10aGlzKXtmb3IodmFyIGQ9ITEsZT0odGhpcy5jaGlsZE5vZGVzLHRoaXMuZmlyc3RDaGlsZCk7ZTtlPWUubmV4dFNpYmxpbmcpaWYoZT09PWEpe2Q9ITA7YnJlYWt9aWYoIWQpdGhyb3cgbmV3IEVycm9yKCJOb3RGb3VuZEVycm9yIil9dmFyIGY9SihhKSxnPWEubmV4dFNpYmxpbmcsaD1hLnByZXZpb3VzU2libGluZztpZih0aGlzLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcigpKXt2YXIgaT10aGlzLmZpcnN0Q2hpbGQsaj10aGlzLmxhc3RDaGlsZCxrPWYucGFyZW50Tm9kZTtrJiZZKGssZiksaT09PWEmJih0aGlzLmZpcnN0Q2hpbGRfPWcpLGo9PT1hJiYodGhpcy5sYXN0Q2hpbGRfPWgpLGgmJihoLm5leHRTaWJsaW5nXz1nKSxnJiYoZy5wcmV2aW91c1NpYmxpbmdfPWgpLGEucHJldmlvdXNTaWJsaW5nXz1hLm5leHRTaWJsaW5nXz1hLnBhcmVudE5vZGVfPXZvaWQgMH1lbHNlIHEodGhpcyksWSh0aGlzLmltcGwsZik7cmV0dXJuIE98fEModGhpcywiY2hpbGRMaXN0Iix7cmVtb3ZlZE5vZGVzOmMoYSksbmV4dFNpYmxpbmc6ZyxwcmV2aW91c1NpYmxpbmc6aH0pLEcodGhpcyxhKSxhfSxyZXBsYWNlQ2hpbGQ6ZnVuY3Rpb24oYSxkKXtiKGEpO3ZhciBlO2lmKEUoZCk/ZT1KKGQpOihlPWQsZD1MKGUpKSxkLnBhcmVudE5vZGUhPT10aGlzKXRocm93IG5ldyBFcnJvcigiTm90Rm91bmRFcnJvciIpO3ZhciBoLGk9ZC5uZXh0U2libGluZyxqPWQucHJldmlvdXNTaWJsaW5nLG09IXRoaXMuaW52YWxpZGF0ZVNoYWRvd1JlbmRlcmVyKCkmJiFzKGEpO3JldHVybiBtP2g9ZyhhKTooaT09PWEmJihpPWEubmV4dFNpYmxpbmcpLGg9ZihhLHRoaXMsaixpKSksbT8obih0aGlzLGEpLHEodGhpcyksVy5jYWxsKHRoaXMuaW1wbCxKKGEpLGUpKToodGhpcy5maXJzdENoaWxkPT09ZCYmKHRoaXMuZmlyc3RDaGlsZF89aFswXSksdGhpcy5sYXN0Q2hpbGQ9PT1kJiYodGhpcy5sYXN0Q2hpbGRfPWhbaC5sZW5ndGgtMV0pLGQucHJldmlvdXNTaWJsaW5nXz1kLm5leHRTaWJsaW5nXz1kLnBhcmVudE5vZGVfPXZvaWQgMCxlLnBhcmVudE5vZGUmJlcuY2FsbChlLnBhcmVudE5vZGUscCh0aGlzLGgpLGUpKSxDKHRoaXMsImNoaWxkTGlzdCIse2FkZGVkTm9kZXM6aCxyZW1vdmVkTm9kZXM6YyhkKSxuZXh0U2libGluZzppLHByZXZpb3VzU2libGluZzpqfSksbChkKSxrKGgsdGhpcyksZH0sbm9kZUlzSW5zZXJ0ZWRfOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPXRoaXMuZmlyc3RDaGlsZDthO2E9YS5uZXh0U2libGluZylhLm5vZGVJc0luc2VydGVkXygpfSxoYXNDaGlsZE5vZGVzOmZ1bmN0aW9uKCl7cmV0dXJuIG51bGwhPT10aGlzLmZpcnN0Q2hpbGR9LGdldCBwYXJlbnROb2RlKCl7cmV0dXJuIHZvaWQgMCE9PXRoaXMucGFyZW50Tm9kZV8/dGhpcy5wYXJlbnROb2RlXzpMKHRoaXMuaW1wbC5wYXJlbnROb2RlKX0sZ2V0IGZpcnN0Q2hpbGQoKXtyZXR1cm4gdm9pZCAwIT09dGhpcy5maXJzdENoaWxkXz90aGlzLmZpcnN0Q2hpbGRfOkwodGhpcy5pbXBsLmZpcnN0Q2hpbGQpfSxnZXQgbGFzdENoaWxkKCl7cmV0dXJuIHZvaWQgMCE9PXRoaXMubGFzdENoaWxkXz90aGlzLmxhc3RDaGlsZF86TCh0aGlzLmltcGwubGFzdENoaWxkKX0sZ2V0IG5leHRTaWJsaW5nKCl7cmV0dXJuIHZvaWQgMCE9PXRoaXMubmV4dFNpYmxpbmdfP3RoaXMubmV4dFNpYmxpbmdfOkwodGhpcy5pbXBsLm5leHRTaWJsaW5nKX0sZ2V0IHByZXZpb3VzU2libGluZygpe3JldHVybiB2b2lkIDAhPT10aGlzLnByZXZpb3VzU2libGluZ18/dGhpcy5wcmV2aW91c1NpYmxpbmdfOkwodGhpcy5pbXBsLnByZXZpb3VzU2libGluZyl9LGdldCBwYXJlbnRFbGVtZW50KCl7Zm9yKHZhciBhPXRoaXMucGFyZW50Tm9kZTthJiZhLm5vZGVUeXBlIT09dy5FTEVNRU5UX05PREU7KWE9YS5wYXJlbnROb2RlO3JldHVybiBhfSxnZXQgdGV4dENvbnRlbnQoKXtmb3IodmFyIGE9IiIsYj10aGlzLmZpcnN0Q2hpbGQ7YjtiPWIubmV4dFNpYmxpbmcpYi5ub2RlVHlwZSE9dy5DT01NRU5UX05PREUmJihhKz1iLnRleHRDb250ZW50KTtyZXR1cm4gYX0sc2V0IHRleHRDb250ZW50KGEpe3ZhciBiPWkodGhpcy5jaGlsZE5vZGVzKTtpZih0aGlzLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcigpKXtpZihyKHRoaXMpLCIiIT09YSl7dmFyIGM9dGhpcy5pbXBsLm93bmVyRG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoYSk7dGhpcy5hcHBlbmRDaGlsZChjKX19ZWxzZSBxKHRoaXMpLHRoaXMuaW1wbC50ZXh0Q29udGVudD1hO3ZhciBkPWkodGhpcy5jaGlsZE5vZGVzKTtDKHRoaXMsImNoaWxkTGlzdCIse2FkZGVkTm9kZXM6ZCxyZW1vdmVkTm9kZXM6Yn0pLG0oYiksayhkLHRoaXMpfSxnZXQgY2hpbGROb2Rlcygpe2Zvcih2YXIgYT1uZXcgeSxiPTAsYz10aGlzLmZpcnN0Q2hpbGQ7YztjPWMubmV4dFNpYmxpbmcpYVtiKytdPWM7cmV0dXJuIGEubGVuZ3RoPWIsYX0sY2xvbmVOb2RlOmZ1bmN0aW9uKGEpe3JldHVybiB1KHRoaXMsYSl9LGNvbnRhaW5zOmZ1bmN0aW9uKGEpe3JldHVybiB2KHRoaXMsTShhKSl9LGNvbXBhcmVEb2N1bWVudFBvc2l0aW9uOmZ1bmN0aW9uKGEpe3JldHVybiBULmNhbGwodGhpcy5pbXBsLEsoYSkpfSxub3JtYWxpemU6ZnVuY3Rpb24oKXtmb3IodmFyIGEsYixjPWkodGhpcy5jaGlsZE5vZGVzKSxkPVtdLGU9IiIsZj0wO2Y8Yy5sZW5ndGg7ZisrKWI9Y1tmXSxiLm5vZGVUeXBlPT09dy5URVhUX05PREU/YXx8Yi5kYXRhLmxlbmd0aD9hPyhlKz1iLmRhdGEsZC5wdXNoKGIpKTphPWI6dGhpcy5yZW1vdmVOb2RlKGIpOihhJiZkLmxlbmd0aCYmKGEuZGF0YSs9ZSx0KGQpKSxkPVtdLGU9IiIsYT1udWxsLGIuY2hpbGROb2Rlcy5sZW5ndGgmJmIubm9ybWFsaXplKCkpO2EmJmQubGVuZ3RoJiYoYS5kYXRhKz1lLHQoZCkpfX0pLEIodywib3duZXJEb2N1bWVudCIpLEgoUix3LGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSksZGVsZXRlIHcucHJvdG90eXBlLnF1ZXJ5U2VsZWN0b3IsZGVsZXRlIHcucHJvdG90eXBlLnF1ZXJ5U2VsZWN0b3JBbGwsdy5wcm90b3R5cGU9RihPYmplY3QuY3JlYXRlKHgucHJvdG90eXBlKSx3LnByb3RvdHlwZSksYS5jbG9uZU5vZGU9dSxhLm5vZGVXYXNBZGRlZD1qLGEubm9kZVdhc1JlbW92ZWQ9bCxhLm5vZGVzV2VyZUFkZGVkPWssYS5ub2Rlc1dlcmVSZW1vdmVkPW0sYS5zbmFwc2hvdE5vZGVMaXN0PWksYS53cmFwcGVycy5Ob2RlPXd9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSxjKXtmb3IodmFyIGQsZT1hLmZpcnN0RWxlbWVudENoaWxkO2U7KXtpZihlLm1hdGNoZXMoYykpcmV0dXJuIGU7aWYoZD1iKGUsYykpcmV0dXJuIGQ7ZT1lLm5leHRFbGVtZW50U2libGluZ31yZXR1cm4gbnVsbH1mdW5jdGlvbiBjKGEsYil7cmV0dXJuIGEubWF0Y2hlcyhiKX1mdW5jdGlvbiBkKGEsYixjKXt2YXIgZD1hLmxvY2FsTmFtZTtyZXR1cm4gZD09PWJ8fGQ9PT1jJiZhLm5hbWVzcGFjZVVSST09PWx9ZnVuY3Rpb24gZSgpe3JldHVybiEwfWZ1bmN0aW9uIGYoYSxiKXtyZXR1cm4gYS5sb2NhbE5hbWU9PT1ifWZ1bmN0aW9uIGcoYSxiKXtyZXR1cm4gYS5uYW1lc3BhY2VVUkk9PT1ifWZ1bmN0aW9uIGgoYSxiLGMpe3JldHVybiBhLm5hbWVzcGFjZVVSST09PWImJmEubG9jYWxOYW1lPT09Y31mdW5jdGlvbiBpKGEsYixjLGQsZSl7Zm9yKHZhciBmPWEuZmlyc3RFbGVtZW50Q2hpbGQ7ZjspYyhmLGQsZSkmJihiW2IubGVuZ3RoKytdPWYpLGkoZixiLGMsZCxlKSxmPWYubmV4dEVsZW1lbnRTaWJsaW5nO3JldHVybiBifXZhciBqPWEud3JhcHBlcnMuSFRNTENvbGxlY3Rpb24saz1hLndyYXBwZXJzLk5vZGVMaXN0LGw9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwiLG09e3F1ZXJ5U2VsZWN0b3I6ZnVuY3Rpb24oYSl7cmV0dXJuIGIodGhpcyxhKX0scXVlcnlTZWxlY3RvckFsbDpmdW5jdGlvbihhKXtyZXR1cm4gaSh0aGlzLG5ldyBrLGMsYSl9fSxuPXtnZXRFbGVtZW50c0J5VGFnTmFtZTpmdW5jdGlvbihhKXt2YXIgYj1uZXcgajtyZXR1cm4iKiI9PT1hP2kodGhpcyxiLGUpOmkodGhpcyxiLGQsYSxhLnRvTG93ZXJDYXNlKCkpfSxnZXRFbGVtZW50c0J5Q2xhc3NOYW1lOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnF1ZXJ5U2VsZWN0b3JBbGwoIi4iK2EpfSxnZXRFbGVtZW50c0J5VGFnTmFtZU5TOmZ1bmN0aW9uKGEsYil7dmFyIGM9bmV3IGo7aWYoIiI9PT1hKWE9bnVsbDtlbHNlIGlmKCIqIj09PWEpcmV0dXJuIioiPT09Yj9pKHRoaXMsYyxlKTppKHRoaXMsYyxmLGIpO3JldHVybiIqIj09PWI/aSh0aGlzLGMsZyxhKTppKHRoaXMsYyxoLGEsYil9fTthLkdldEVsZW1lbnRzQnlJbnRlcmZhY2U9bixhLlNlbGVjdG9yc0ludGVyZmFjZT1tfSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe2Zvcig7YSYmYS5ub2RlVHlwZSE9PU5vZGUuRUxFTUVOVF9OT0RFOylhPWEubmV4dFNpYmxpbmc7cmV0dXJuIGF9ZnVuY3Rpb24gYyhhKXtmb3IoO2EmJmEubm9kZVR5cGUhPT1Ob2RlLkVMRU1FTlRfTk9ERTspYT1hLnByZXZpb3VzU2libGluZztyZXR1cm4gYX12YXIgZD1hLndyYXBwZXJzLk5vZGVMaXN0LGU9e2dldCBmaXJzdEVsZW1lbnRDaGlsZCgpe3JldHVybiBiKHRoaXMuZmlyc3RDaGlsZCl9LGdldCBsYXN0RWxlbWVudENoaWxkKCl7cmV0dXJuIGModGhpcy5sYXN0Q2hpbGQpfSxnZXQgY2hpbGRFbGVtZW50Q291bnQoKXtmb3IodmFyIGE9MCxiPXRoaXMuZmlyc3RFbGVtZW50Q2hpbGQ7YjtiPWIubmV4dEVsZW1lbnRTaWJsaW5nKWErKztyZXR1cm4gYX0sZ2V0IGNoaWxkcmVuKCl7Zm9yKHZhciBhPW5ldyBkLGI9MCxjPXRoaXMuZmlyc3RFbGVtZW50Q2hpbGQ7YztjPWMubmV4dEVsZW1lbnRTaWJsaW5nKWFbYisrXT1jO3JldHVybiBhLmxlbmd0aD1iLGF9LHJlbW92ZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMucGFyZW50Tm9kZTthJiZhLnJlbW92ZUNoaWxkKHRoaXMpfX0sZj17Z2V0IG5leHRFbGVtZW50U2libGluZygpe3JldHVybiBiKHRoaXMubmV4dFNpYmxpbmcpfSxnZXQgcHJldmlvdXNFbGVtZW50U2libGluZygpe3JldHVybiBjKHRoaXMucHJldmlvdXNTaWJsaW5nKX19O2EuQ2hpbGROb2RlSW50ZXJmYWNlPWYsYS5QYXJlbnROb2RlSW50ZXJmYWNlPWV9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7ZC5jYWxsKHRoaXMsYSl9dmFyIGM9YS5DaGlsZE5vZGVJbnRlcmZhY2UsZD1hLndyYXBwZXJzLk5vZGUsZT1hLmVucXVldWVNdXRhdGlvbixmPWEubWl4aW4sZz1hLnJlZ2lzdGVyV3JhcHBlcixoPXdpbmRvdy5DaGFyYWN0ZXJEYXRhO2IucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZC5wcm90b3R5cGUpLGYoYi5wcm90b3R5cGUse2dldCB0ZXh0Q29udGVudCgpe3JldHVybiB0aGlzLmRhdGF9LHNldCB0ZXh0Q29udGVudChhKXt0aGlzLmRhdGE9YX0sZ2V0IGRhdGEoKXtyZXR1cm4gdGhpcy5pbXBsLmRhdGF9LHNldCBkYXRhKGEpe3ZhciBiPXRoaXMuaW1wbC5kYXRhO2UodGhpcywiY2hhcmFjdGVyRGF0YSIse29sZFZhbHVlOmJ9KSx0aGlzLmltcGwuZGF0YT1hfX0pLGYoYi5wcm90b3R5cGUsYyksZyhoLGIsZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoIiIpKSxhLndyYXBwZXJzLkNoYXJhY3RlckRhdGE9Yn0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtyZXR1cm4gYT4+PjB9ZnVuY3Rpb24gYyhhKXtkLmNhbGwodGhpcyxhKX12YXIgZD1hLndyYXBwZXJzLkNoYXJhY3RlckRhdGEsZT0oYS5lbnF1ZXVlTXV0YXRpb24sYS5taXhpbiksZj1hLnJlZ2lzdGVyV3JhcHBlcixnPXdpbmRvdy5UZXh0O2MucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZC5wcm90b3R5cGUpLGUoYy5wcm90b3R5cGUse3NwbGl0VGV4dDpmdW5jdGlvbihhKXthPWIoYSk7dmFyIGM9dGhpcy5kYXRhO2lmKGE+Yy5sZW5ndGgpdGhyb3cgbmV3IEVycm9yKCJJbmRleFNpemVFcnJvciIpO3ZhciBkPWMuc2xpY2UoMCxhKSxlPWMuc2xpY2UoYSk7dGhpcy5kYXRhPWQ7dmFyIGY9dGhpcy5vd25lckRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGUpO3JldHVybiB0aGlzLnBhcmVudE5vZGUmJnRoaXMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoZix0aGlzLm5leHRTaWJsaW5nKSxmfX0pLGYoZyxjLGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCIiKSksYS53cmFwcGVycy5UZXh0PWN9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYil7YS5pbnZhbGlkYXRlUmVuZGVyZXJCYXNlZE9uQXR0cmlidXRlKGIsImNsYXNzIil9ZnVuY3Rpb24gYyhhLGIpe3RoaXMuaW1wbD1hLHRoaXMub3duZXJFbGVtZW50Xz1ifWMucHJvdG90eXBlPXtnZXQgbGVuZ3RoKCl7cmV0dXJuIHRoaXMuaW1wbC5sZW5ndGh9LGl0ZW06ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuaW1wbC5pdGVtKGEpfSxjb250YWluczpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5pbXBsLmNvbnRhaW5zKGEpfSxhZGQ6ZnVuY3Rpb24oKXt0aGlzLmltcGwuYWRkLmFwcGx5KHRoaXMuaW1wbCxhcmd1bWVudHMpLGIodGhpcy5vd25lckVsZW1lbnRfKX0scmVtb3ZlOmZ1bmN0aW9uKCl7dGhpcy5pbXBsLnJlbW92ZS5hcHBseSh0aGlzLmltcGwsYXJndW1lbnRzKSxiKHRoaXMub3duZXJFbGVtZW50Xyl9LHRvZ2dsZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMuaW1wbC50b2dnbGUuYXBwbHkodGhpcy5pbXBsLGFyZ3VtZW50cyk7cmV0dXJuIGIodGhpcy5vd25lckVsZW1lbnRfKSxhfSx0b1N0cmluZzpmdW5jdGlvbigpe3JldHVybiB0aGlzLmltcGwudG9TdHJpbmcoKX19LGEud3JhcHBlcnMuRE9NVG9rZW5MaXN0PWN9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYixjKXt2YXIgZD1iLnBhcmVudE5vZGU7aWYoZCYmZC5zaGFkb3dSb290KXt2YXIgZT1hLmdldFJlbmRlcmVyRm9ySG9zdChkKTtlLmRlcGVuZHNPbkF0dHJpYnV0ZShjKSYmZS5pbnZhbGlkYXRlKCl9fWZ1bmN0aW9uIGMoYSxiLGMpe2soYSwiYXR0cmlidXRlcyIse25hbWU6YixuYW1lc3BhY2U6bnVsbCxvbGRWYWx1ZTpjfSl9ZnVuY3Rpb24gZChhKXtnLmNhbGwodGhpcyxhKX12YXIgZT1hLkNoaWxkTm9kZUludGVyZmFjZSxmPWEuR2V0RWxlbWVudHNCeUludGVyZmFjZSxnPWEud3JhcHBlcnMuTm9kZSxoPWEud3JhcHBlcnMuRE9NVG9rZW5MaXN0LGk9YS5QYXJlbnROb2RlSW50ZXJmYWNlLGo9YS5TZWxlY3RvcnNJbnRlcmZhY2Usaz0oYS5hZGRXcmFwTm9kZUxpc3RNZXRob2QsYS5lbnF1ZXVlTXV0YXRpb24pLGw9YS5taXhpbixtPShhLm9uZU9mLGEucmVnaXN0ZXJXcmFwcGVyKSxuPWEudW53cmFwLG89YS53cmFwcGVycyxwPXdpbmRvdy5FbGVtZW50LHE9WyJtYXRjaGVzIiwibW96TWF0Y2hlc1NlbGVjdG9yIiwibXNNYXRjaGVzU2VsZWN0b3IiLCJ3ZWJraXRNYXRjaGVzU2VsZWN0b3IiXS5maWx0ZXIoZnVuY3Rpb24oYSl7cmV0dXJuIHAucHJvdG90eXBlW2FdfSkscj1xWzBdLHM9cC5wcm90b3R5cGVbcl0sdD1uZXcgV2Vha01hcDtkLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGcucHJvdG90eXBlKSxsKGQucHJvdG90eXBlLHtjcmVhdGVTaGFkb3dSb290OmZ1bmN0aW9uKCl7dmFyIGI9bmV3IG8uU2hhZG93Um9vdCh0aGlzKTt0aGlzLmltcGwucG9seW1lclNoYWRvd1Jvb3RfPWI7dmFyIGM9YS5nZXRSZW5kZXJlckZvckhvc3QodGhpcyk7cmV0dXJuIGMuaW52YWxpZGF0ZSgpLGJ9LGdldCBzaGFkb3dSb290KCl7cmV0dXJuIHRoaXMuaW1wbC5wb2x5bWVyU2hhZG93Um9vdF98fG51bGx9LHNldEF0dHJpYnV0ZTpmdW5jdGlvbihhLGQpe3ZhciBlPXRoaXMuaW1wbC5nZXRBdHRyaWJ1dGUoYSk7dGhpcy5pbXBsLnNldEF0dHJpYnV0ZShhLGQpLGModGhpcyxhLGUpLGIodGhpcyxhKX0scmVtb3ZlQXR0cmlidXRlOmZ1bmN0aW9uKGEpe3ZhciBkPXRoaXMuaW1wbC5nZXRBdHRyaWJ1dGUoYSk7dGhpcy5pbXBsLnJlbW92ZUF0dHJpYnV0ZShhKSxjKHRoaXMsYSxkKSxiKHRoaXMsYSl9LG1hdGNoZXM6ZnVuY3Rpb24oYSl7cmV0dXJuIHMuY2FsbCh0aGlzLmltcGwsYSl9LGdldCBjbGFzc0xpc3QoKXt2YXIgYT10LmdldCh0aGlzKTtyZXR1cm4gYXx8dC5zZXQodGhpcyxhPW5ldyBoKG4odGhpcykuY2xhc3NMaXN0LHRoaXMpKSxhfSxnZXQgY2xhc3NOYW1lKCl7cmV0dXJuIG4odGhpcykuY2xhc3NOYW1lfSxzZXQgY2xhc3NOYW1lKGEpe3RoaXMuc2V0QXR0cmlidXRlKCJjbGFzcyIsYSl9LGdldCBpZCgpe3JldHVybiBuKHRoaXMpLmlkfSxzZXQgaWQoYSl7dGhpcy5zZXRBdHRyaWJ1dGUoImlkIixhKX19KSxxLmZvckVhY2goZnVuY3Rpb24oYSl7Im1hdGNoZXMiIT09YSYmKGQucHJvdG90eXBlW2FdPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLm1hdGNoZXMoYSl9KX0pLHAucHJvdG90eXBlLndlYmtpdENyZWF0ZVNoYWRvd1Jvb3QmJihkLnByb3RvdHlwZS53ZWJraXRDcmVhdGVTaGFkb3dSb290PWQucHJvdG90eXBlLmNyZWF0ZVNoYWRvd1Jvb3QpLGwoZC5wcm90b3R5cGUsZSksbChkLnByb3RvdHlwZSxmKSxsKGQucHJvdG90eXBlLGkpLGwoZC5wcm90b3R5cGUsaiksbShwLGQsZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKG51bGwsIngiKSksYS5pbnZhbGlkYXRlUmVuZGVyZXJCYXNlZE9uQXR0cmlidXRlPWIsYS5tYXRjaGVzTmFtZXM9cSxhLndyYXBwZXJzLkVsZW1lbnQ9ZH0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtzd2l0Y2goYSl7Y2FzZSImIjpyZXR1cm4iJmFtcDsiO2Nhc2UiPCI6cmV0dXJuIiZsdDsiO2Nhc2UiPiI6cmV0dXJuIiZndDsiO2Nhc2UnIic6cmV0dXJuIiZxdW90OyI7Y2FzZSJceGEwIjpyZXR1cm4iJm5ic3A7In19ZnVuY3Rpb24gYyhhKXtyZXR1cm4gYS5yZXBsYWNlKHosYil9ZnVuY3Rpb24gZChhKXtyZXR1cm4gYS5yZXBsYWNlKEEsYil9ZnVuY3Rpb24gZShhKXtmb3IodmFyIGI9e30sYz0wO2M8YS5sZW5ndGg7YysrKWJbYVtjXV09ITA7cmV0dXJuIGJ9ZnVuY3Rpb24gZihhLGIpe3N3aXRjaChhLm5vZGVUeXBlKXtjYXNlIE5vZGUuRUxFTUVOVF9OT0RFOmZvcih2YXIgZSxmPWEudGFnTmFtZS50b0xvd2VyQ2FzZSgpLGg9IjwiK2YsaT1hLmF0dHJpYnV0ZXMsaj0wO2U9aVtqXTtqKyspaCs9IiAiK2UubmFtZSsnPSInK2MoZS52YWx1ZSkrJyInO3JldHVybiBoKz0iPiIsQltmXT9oOmgrZyhhKSsiPC8iK2YrIj4iO2Nhc2UgTm9kZS5URVhUX05PREU6dmFyIGs9YS5kYXRhO3JldHVybiBiJiZDW2IubG9jYWxOYW1lXT9rOmQoayk7Y2FzZSBOb2RlLkNPTU1FTlRfTk9ERTpyZXR1cm4iPCEtLSIrYS5kYXRhKyItLT4iO2RlZmF1bHQ6dGhyb3cgY29uc29sZS5lcnJvcihhKSxuZXcgRXJyb3IoIm5vdCBpbXBsZW1lbnRlZCIpfX1mdW5jdGlvbiBnKGEpe2EgaW5zdGFuY2VvZiB5LkhUTUxUZW1wbGF0ZUVsZW1lbnQmJihhPWEuY29udGVudCk7Zm9yKHZhciBiPSIiLGM9YS5maXJzdENoaWxkO2M7Yz1jLm5leHRTaWJsaW5nKWIrPWYoYyxhKTtyZXR1cm4gYn1mdW5jdGlvbiBoKGEsYixjKXt2YXIgZD1jfHwiZGl2IjthLnRleHRDb250ZW50PSIiO3ZhciBlPXcoYS5vd25lckRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoZCkpO2UuaW5uZXJIVE1MPWI7Zm9yKHZhciBmO2Y9ZS5maXJzdENoaWxkOylhLmFwcGVuZENoaWxkKHgoZikpfWZ1bmN0aW9uIGkoYSl7by5jYWxsKHRoaXMsYSl9ZnVuY3Rpb24gaihhLGIpe3ZhciBjPXcoYS5jbG9uZU5vZGUoITEpKTtjLmlubmVySFRNTD1iO2Zvcih2YXIgZCxlPXcoZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpKTtkPWMuZmlyc3RDaGlsZDspZS5hcHBlbmRDaGlsZChkKTtyZXR1cm4geChlKX1mdW5jdGlvbiBrKGIpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBhLnJlbmRlckFsbFBlbmRpbmcoKSx0aGlzLmltcGxbYl19fWZ1bmN0aW9uIGwoYSl7cChpLGEsayhhKSl9ZnVuY3Rpb24gbShiKXtPYmplY3QuZGVmaW5lUHJvcGVydHkoaS5wcm90b3R5cGUsYix7Z2V0OmsoYiksc2V0OmZ1bmN0aW9uKGMpe2EucmVuZGVyQWxsUGVuZGluZygpLHRoaXMuaW1wbFtiXT1jfSxjb25maWd1cmFibGU6ITAsZW51bWVyYWJsZTohMH0pfWZ1bmN0aW9uIG4oYil7T2JqZWN0LmRlZmluZVByb3BlcnR5KGkucHJvdG90eXBlLGIse3ZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIGEucmVuZGVyQWxsUGVuZGluZygpLHRoaXMuaW1wbFtiXS5hcHBseSh0aGlzLmltcGwsYXJndW1lbnRzKX0sY29uZmlndXJhYmxlOiEwLGVudW1lcmFibGU6ITB9KX12YXIgbz1hLndyYXBwZXJzLkVsZW1lbnQscD1hLmRlZmluZUdldHRlcixxPWEuZW5xdWV1ZU11dGF0aW9uLHI9YS5taXhpbixzPWEubm9kZXNXZXJlQWRkZWQsdD1hLm5vZGVzV2VyZVJlbW92ZWQsdT1hLnJlZ2lzdGVyV3JhcHBlcix2PWEuc25hcHNob3ROb2RlTGlzdCx3PWEudW53cmFwLHg9YS53cmFwLHk9YS53cmFwcGVycyx6PS9bJlx1MDBBMCJdL2csQT0vWyZcdTAwQTA8Pl0vZyxCPWUoWyJhcmVhIiwiYmFzZSIsImJyIiwiY29sIiwiY29tbWFuZCIsImVtYmVkIiwiaHIiLCJpbWciLCJpbnB1dCIsImtleWdlbiIsImxpbmsiLCJtZXRhIiwicGFyYW0iLCJzb3VyY2UiLCJ0cmFjayIsIndiciJdKSxDPWUoWyJzdHlsZSIsInNjcmlwdCIsInhtcCIsImlmcmFtZSIsIm5vZW1iZWQiLCJub2ZyYW1lcyIsInBsYWludGV4dCIsIm5vc2NyaXB0Il0pLEQ9L01TSUUvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCksRT13aW5kb3cuSFRNTEVsZW1lbnQsRj13aW5kb3cuSFRNTFRlbXBsYXRlRWxlbWVudDtpLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKG8ucHJvdG90eXBlKSxyKGkucHJvdG90eXBlLHtnZXQgaW5uZXJIVE1MKCl7cmV0dXJuIGcodGhpcyl9LHNldCBpbm5lckhUTUwoYSl7aWYoRCYmQ1t0aGlzLmxvY2FsTmFtZV0pcmV0dXJuIHZvaWQodGhpcy50ZXh0Q29udGVudD1hKTt2YXIgYj12KHRoaXMuY2hpbGROb2Rlcyk7dGhpcy5pbnZhbGlkYXRlU2hhZG93UmVuZGVyZXIoKT90aGlzIGluc3RhbmNlb2YgeS5IVE1MVGVtcGxhdGVFbGVtZW50P2godGhpcy5jb250ZW50LGEpOmgodGhpcyxhLHRoaXMudGFnTmFtZSk6IUYmJnRoaXMgaW5zdGFuY2VvZiB5LkhUTUxUZW1wbGF0ZUVsZW1lbnQ/aCh0aGlzLmNvbnRlbnQsYSk6dGhpcy5pbXBsLmlubmVySFRNTD1hO3ZhciBjPXYodGhpcy5jaGlsZE5vZGVzKTtxKHRoaXMsImNoaWxkTGlzdCIse2FkZGVkTm9kZXM6YyxyZW1vdmVkTm9kZXM6Yn0pLHQoYikscyhjLHRoaXMpfSxnZXQgb3V0ZXJIVE1MKCl7cmV0dXJuIGYodGhpcyx0aGlzLnBhcmVudE5vZGUpfSxzZXQgb3V0ZXJIVE1MKGEpe3ZhciBiPXRoaXMucGFyZW50Tm9kZTtpZihiKXtiLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcigpO3ZhciBjPWooYixhKTtiLnJlcGxhY2VDaGlsZChjLHRoaXMpfX0saW5zZXJ0QWRqYWNlbnRIVE1MOmZ1bmN0aW9uKGEsYil7dmFyIGMsZDtzd2l0Y2goU3RyaW5nKGEpLnRvTG93ZXJDYXNlKCkpe2Nhc2UiYmVmb3JlYmVnaW4iOmM9dGhpcy5wYXJlbnROb2RlLGQ9dGhpczticmVhaztjYXNlImFmdGVyZW5kIjpjPXRoaXMucGFyZW50Tm9kZSxkPXRoaXMubmV4dFNpYmxpbmc7YnJlYWs7Y2FzZSJhZnRlcmJlZ2luIjpjPXRoaXMsZD10aGlzLmZpcnN0Q2hpbGQ7YnJlYWs7Y2FzZSJiZWZvcmVlbmQiOmM9dGhpcyxkPW51bGw7YnJlYWs7ZGVmYXVsdDpyZXR1cm59dmFyIGU9aihjLGIpO2MuaW5zZXJ0QmVmb3JlKGUsZCl9fSksWyJjbGllbnRIZWlnaHQiLCJjbGllbnRMZWZ0IiwiY2xpZW50VG9wIiwiY2xpZW50V2lkdGgiLCJvZmZzZXRIZWlnaHQiLCJvZmZzZXRMZWZ0Iiwib2Zmc2V0VG9wIiwib2Zmc2V0V2lkdGgiLCJzY3JvbGxIZWlnaHQiLCJzY3JvbGxXaWR0aCJdLmZvckVhY2gobCksWyJzY3JvbGxMZWZ0Iiwic2Nyb2xsVG9wIl0uZm9yRWFjaChtKSxbImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsImdldENsaWVudFJlY3RzIiwic2Nyb2xsSW50b1ZpZXciXS5mb3JFYWNoKG4pLHUoRSxpLGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImIiKSksYS53cmFwcGVycy5IVE1MRWxlbWVudD1pLGEuZ2V0SW5uZXJIVE1MPWcsYS5zZXRJbm5lckhUTUw9aH0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtjLmNhbGwodGhpcyxhKX12YXIgYz1hLndyYXBwZXJzLkhUTUxFbGVtZW50LGQ9YS5taXhpbixlPWEucmVnaXN0ZXJXcmFwcGVyLGY9YS53cmFwLGc9d2luZG93LkhUTUxDYW52YXNFbGVtZW50O2IucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYy5wcm90b3R5cGUpLGQoYi5wcm90b3R5cGUse2dldENvbnRleHQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmltcGwuZ2V0Q29udGV4dC5hcHBseSh0aGlzLmltcGwsYXJndW1lbnRzKTtyZXR1cm4gYSYmZihhKX19KSxlKGcsYixkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJjYW52YXMiKSksYS53cmFwcGVycy5IVE1MQ2FudmFzRWxlbWVudD1ifSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe2MuY2FsbCh0aGlzLGEpfXZhciBjPWEud3JhcHBlcnMuSFRNTEVsZW1lbnQsZD1hLm1peGluLGU9YS5yZWdpc3RlcldyYXBwZXIsZj13aW5kb3cuSFRNTENvbnRlbnRFbGVtZW50O2IucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYy5wcm90b3R5cGUpLGQoYi5wcm90b3R5cGUse2dldCBzZWxlY3QoKXtyZXR1cm4gdGhpcy5nZXRBdHRyaWJ1dGUoInNlbGVjdCIpfSxzZXQgc2VsZWN0KGEpe3RoaXMuc2V0QXR0cmlidXRlKCJzZWxlY3QiLGEpfSxzZXRBdHRyaWJ1dGU6ZnVuY3Rpb24oYSxiKXtjLnByb3RvdHlwZS5zZXRBdHRyaWJ1dGUuY2FsbCh0aGlzLGEsYiksInNlbGVjdCI9PT1TdHJpbmcoYSkudG9Mb3dlckNhc2UoKSYmdGhpcy5pbnZhbGlkYXRlU2hhZG93UmVuZGVyZXIoITApfX0pLGYmJmUoZixiKSxhLndyYXBwZXJzLkhUTUxDb250ZW50RWxlbWVudD1ifSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe2MuY2FsbCh0aGlzLGEpfXZhciBjPWEud3JhcHBlcnMuSFRNTEVsZW1lbnQsZD1hLm1peGluLGU9YS5yZWdpc3RlcldyYXBwZXIsZj1hLndyYXBIVE1MQ29sbGVjdGlvbixnPWEudW53cmFwLGg9d2luZG93LkhUTUxGb3JtRWxlbWVudDtiLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGMucHJvdG90eXBlKSxkKGIucHJvdG90eXBlLHtnZXQgZWxlbWVudHMoKXtyZXR1cm4gZihnKHRoaXMpLmVsZW1lbnRzKX19KSxlKGgsYixkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJmb3JtIikpLGEud3JhcHBlcnMuSFRNTEZvcm1FbGVtZW50PWJ9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7ZC5jYWxsKHRoaXMsYSl9ZnVuY3Rpb24gYyhhLGIpe2lmKCEodGhpcyBpbnN0YW5jZW9mIGMpKXRocm93IG5ldyBUeXBlRXJyb3IoIkRPTSBvYmplY3QgY29uc3RydWN0b3IgY2Fubm90IGJlIGNhbGxlZCBhcyBhIGZ1bmN0aW9uLiIpO3ZhciBlPWYoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW1nIikpO2QuY2FsbCh0aGlzLGUpLGcoZSx0aGlzKSx2b2lkIDAhPT1hJiYoZS53aWR0aD1hKSx2b2lkIDAhPT1iJiYoZS5oZWlnaHQ9Yil9dmFyIGQ9YS53cmFwcGVycy5IVE1MRWxlbWVudCxlPWEucmVnaXN0ZXJXcmFwcGVyLGY9YS51bndyYXAsZz1hLnJld3JhcCxoPXdpbmRvdy5IVE1MSW1hZ2VFbGVtZW50O2IucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZC5wcm90b3R5cGUpLGUoaCxiLGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImltZyIpKSxjLnByb3RvdHlwZT1iLnByb3RvdHlwZSxhLndyYXBwZXJzLkhUTUxJbWFnZUVsZW1lbnQ9YixhLndyYXBwZXJzLkltYWdlPWN9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7Yy5jYWxsKHRoaXMsYSl9dmFyIGM9YS53cmFwcGVycy5IVE1MRWxlbWVudCxkPShhLm1peGluLGEud3JhcHBlcnMuTm9kZUxpc3QsYS5yZWdpc3RlcldyYXBwZXIpLGU9d2luZG93LkhUTUxTaGFkb3dFbGVtZW50O2IucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYy5wcm90b3R5cGUpLGUmJmQoZSxiKSxhLndyYXBwZXJzLkhUTUxTaGFkb3dFbGVtZW50PWJ9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7aWYoIWEuZGVmYXVsdFZpZXcpcmV0dXJuIGE7dmFyIGI9ay5nZXQoYSk7aWYoIWIpe2ZvcihiPWEuaW1wbGVtZW50YXRpb24uY3JlYXRlSFRNTERvY3VtZW50KCIiKTtiLmxhc3RDaGlsZDspYi5yZW1vdmVDaGlsZChiLmxhc3RDaGlsZCk7ay5zZXQoYSxiKX1yZXR1cm4gYn1mdW5jdGlvbiBjKGEpe2Zvcih2YXIgYyxkPWIoYS5vd25lckRvY3VtZW50KSxlPWgoZC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCkpO2M9YS5maXJzdENoaWxkOyllLmFwcGVuZENoaWxkKGMpO3JldHVybiBlfWZ1bmN0aW9uIGQoYSl7aWYoZS5jYWxsKHRoaXMsYSksIWwpe3ZhciBiPWMoYSk7ai5zZXQodGhpcyxpKGIpKX19dmFyIGU9YS53cmFwcGVycy5IVE1MRWxlbWVudCxmPWEubWl4aW4sZz1hLnJlZ2lzdGVyV3JhcHBlcixoPWEudW53cmFwLGk9YS53cmFwLGo9bmV3IFdlYWtNYXAsaz1uZXcgV2Vha01hcCxsPXdpbmRvdy5IVE1MVGVtcGxhdGVFbGVtZW50O2QucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZS5wcm90b3R5cGUpLGYoZC5wcm90b3R5cGUse2dldCBjb250ZW50KCl7cmV0dXJuIGw/aSh0aGlzLmltcGwuY29udGVudCk6ai5nZXQodGhpcyl9fSksbCYmZyhsLGQpLGEud3JhcHBlcnMuSFRNTFRlbXBsYXRlRWxlbWVudD1kfSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe2MuY2FsbCh0aGlzLGEpfXZhciBjPWEud3JhcHBlcnMuSFRNTEVsZW1lbnQsZD1hLnJlZ2lzdGVyV3JhcHBlcixlPXdpbmRvdy5IVE1MTWVkaWFFbGVtZW50O2IucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYy5wcm90b3R5cGUpLGQoZSxiLGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImF1ZGlvIikpLGEud3JhcHBlcnMuSFRNTE1lZGlhRWxlbWVudD1ifSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe2QuY2FsbCh0aGlzLGEpfWZ1bmN0aW9uIGMoYSl7aWYoISh0aGlzIGluc3RhbmNlb2YgYykpdGhyb3cgbmV3IFR5cGVFcnJvcigiRE9NIG9iamVjdCBjb25zdHJ1Y3RvciBjYW5ub3QgYmUgY2FsbGVkIGFzIGEgZnVuY3Rpb24uIik7dmFyIGI9Zihkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJhdWRpbyIpKTtkLmNhbGwodGhpcyxiKSxnKGIsdGhpcyksYi5zZXRBdHRyaWJ1dGUoInByZWxvYWQiLCJhdXRvIiksdm9pZCAwIT09YSYmYi5zZXRBdHRyaWJ1dGUoInNyYyIsYSl9dmFyIGQ9YS53cmFwcGVycy5IVE1MTWVkaWFFbGVtZW50LGU9YS5yZWdpc3RlcldyYXBwZXIsZj1hLnVud3JhcCxnPWEucmV3cmFwLGg9d2luZG93LkhUTUxBdWRpb0VsZW1lbnQ7Yi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShkLnByb3RvdHlwZSksZShoLGIsZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYXVkaW8iKSksYy5wcm90b3R5cGU9Yi5wcm90b3R5cGUsYS53cmFwcGVycy5IVE1MQXVkaW9FbGVtZW50PWIsYS53cmFwcGVycy5BdWRpbz1jfSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe3JldHVybiBhLnJlcGxhY2UoL1xzKy9nLCIgIikudHJpbSgpfWZ1bmN0aW9uIGMoYSl7ZS5jYWxsKHRoaXMsYSl9ZnVuY3Rpb24gZChhLGIsYyxmKXtpZighKHRoaXMgaW5zdGFuY2VvZiBkKSl0aHJvdyBuZXcgVHlwZUVycm9yKCJET00gb2JqZWN0IGNvbnN0cnVjdG9yIGNhbm5vdCBiZSBjYWxsZWQgYXMgYSBmdW5jdGlvbi4iKTt2YXIgZz1pKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIm9wdGlvbiIpKTtlLmNhbGwodGhpcyxnKSxoKGcsdGhpcyksdm9pZCAwIT09YSYmKGcudGV4dD1hKSx2b2lkIDAhPT1iJiZnLnNldEF0dHJpYnV0ZSgidmFsdWUiLGIpLGM9PT0hMCYmZy5zZXRBdHRyaWJ1dGUoInNlbGVjdGVkIiwiIiksZy5zZWxlY3RlZD1mPT09ITB9dmFyIGU9YS53cmFwcGVycy5IVE1MRWxlbWVudCxmPWEubWl4aW4sZz1hLnJlZ2lzdGVyV3JhcHBlcixoPWEucmV3cmFwLGk9YS51bndyYXAsaj1hLndyYXAsaz13aW5kb3cuSFRNTE9wdGlvbkVsZW1lbnQ7Yy5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShlLnByb3RvdHlwZSksZihjLnByb3RvdHlwZSx7Z2V0IHRleHQoKXtyZXR1cm4gYih0aGlzLnRleHRDb250ZW50KX0sc2V0IHRleHQoYSl7dGhpcy50ZXh0Q29udGVudD1iKFN0cmluZyhhKSl9LGdldCBmb3JtKCl7cmV0dXJuIGooaSh0aGlzKS5mb3JtKX19KSxnKGssYyxkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJvcHRpb24iKSksZC5wcm90b3R5cGU9Yy5wcm90b3R5cGUsYS53cmFwcGVycy5IVE1MT3B0aW9uRWxlbWVudD1jLGEud3JhcHBlcnMuT3B0aW9uPWR9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7Yy5jYWxsKHRoaXMsYSl9dmFyIGM9YS53cmFwcGVycy5IVE1MRWxlbWVudCxkPWEubWl4aW4sZT1hLnJlZ2lzdGVyV3JhcHBlcixmPWEudW53cmFwLGc9YS53cmFwLGg9d2luZG93LkhUTUxTZWxlY3RFbGVtZW50O2IucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYy5wcm90b3R5cGUpLGQoYi5wcm90b3R5cGUse2FkZDpmdW5jdGlvbihhLGIpeyJvYmplY3QiPT10eXBlb2YgYiYmKGI9ZihiKSksZih0aGlzKS5hZGQoZihhKSxiKX0scmVtb3ZlOmZ1bmN0aW9uKGEpe3JldHVybiB2b2lkIDA9PT1hP3ZvaWQgYy5wcm90b3R5cGUucmVtb3ZlLmNhbGwodGhpcyk6KCJvYmplY3QiPT10eXBlb2YgYSYmKGE9ZihhKSksdm9pZCBmKHRoaXMpLnJlbW92ZShhKSl9LGdldCBmb3JtKCl7cmV0dXJuIGcoZih0aGlzKS5mb3JtKX19KSxlKGgsYixkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzZWxlY3QiKSksYS53cmFwcGVycy5IVE1MU2VsZWN0RWxlbWVudD1ifSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe2MuY2FsbCh0aGlzLGEpfXZhciBjPWEud3JhcHBlcnMuSFRNTEVsZW1lbnQsZD1hLm1peGluLGU9YS5yZWdpc3RlcldyYXBwZXIsZj1hLnVud3JhcCxnPWEud3JhcCxoPWEud3JhcEhUTUxDb2xsZWN0aW9uLGk9d2luZG93LkhUTUxUYWJsZUVsZW1lbnQ7Yi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShjLnByb3RvdHlwZSksZChiLnByb3RvdHlwZSx7Z2V0IGNhcHRpb24oKXtyZXR1cm4gZyhmKHRoaXMpLmNhcHRpb24pfSxjcmVhdGVDYXB0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIGcoZih0aGlzKS5jcmVhdGVDYXB0aW9uKCkpfSxnZXQgdEhlYWQoKXtyZXR1cm4gZyhmKHRoaXMpLnRIZWFkKX0sY3JlYXRlVEhlYWQ6ZnVuY3Rpb24oKXtyZXR1cm4gZyhmKHRoaXMpLmNyZWF0ZVRIZWFkKCkpfSxjcmVhdGVURm9vdDpmdW5jdGlvbigpe3JldHVybiBnKGYodGhpcykuY3JlYXRlVEZvb3QoKSl9LGdldCB0Rm9vdCgpe3JldHVybiBnKGYodGhpcykudEZvb3QpfSxnZXQgdEJvZGllcygpe3JldHVybiBoKGYodGhpcykudEJvZGllcyl9LGNyZWF0ZVRCb2R5OmZ1bmN0aW9uKCl7cmV0dXJuIGcoZih0aGlzKS5jcmVhdGVUQm9keSgpKX0sZ2V0IHJvd3MoKXtyZXR1cm4gaChmKHRoaXMpLnJvd3MpfSxpbnNlcnRSb3c6ZnVuY3Rpb24oYSl7cmV0dXJuIGcoZih0aGlzKS5pbnNlcnRSb3coYSkpfX0pLGUoaSxiLGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInRhYmxlIikpLGEud3JhcHBlcnMuSFRNTFRhYmxlRWxlbWVudD1ifSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe2MuY2FsbCh0aGlzLGEpfXZhciBjPWEud3JhcHBlcnMuSFRNTEVsZW1lbnQsZD1hLm1peGluLGU9YS5yZWdpc3RlcldyYXBwZXIsZj1hLndyYXBIVE1MQ29sbGVjdGlvbixnPWEudW53cmFwLGg9YS53cmFwLGk9d2luZG93LkhUTUxUYWJsZVNlY3Rpb25FbGVtZW50O2IucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYy5wcm90b3R5cGUpLGQoYi5wcm90b3R5cGUse2dldCByb3dzKCl7cmV0dXJuIGYoZyh0aGlzKS5yb3dzKX0saW5zZXJ0Um93OmZ1bmN0aW9uKGEpe3JldHVybiBoKGcodGhpcykuaW5zZXJ0Um93KGEpKX19KSxlKGksYixkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0aGVhZCIpKSxhLndyYXBwZXJzLkhUTUxUYWJsZVNlY3Rpb25FbGVtZW50PWJ9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7Yy5jYWxsKHRoaXMsYSl9dmFyIGM9YS53cmFwcGVycy5IVE1MRWxlbWVudCxkPWEubWl4aW4sZT1hLnJlZ2lzdGVyV3JhcHBlcixmPWEud3JhcEhUTUxDb2xsZWN0aW9uLGc9YS51bndyYXAsaD1hLndyYXAsaT13aW5kb3cuSFRNTFRhYmxlUm93RWxlbWVudDtiLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGMucHJvdG90eXBlKSxkKGIucHJvdG90eXBlLHtnZXQgY2VsbHMoKXtyZXR1cm4gZihnKHRoaXMpLmNlbGxzKX0saW5zZXJ0Q2VsbDpmdW5jdGlvbihhKXtyZXR1cm4gaChnKHRoaXMpLmluc2VydENlbGwoYSkpfX0pLGUoaSxiLGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInRyIikpLGEud3JhcHBlcnMuSFRNTFRhYmxlUm93RWxlbWVudD1ifSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe3N3aXRjaChhLmxvY2FsTmFtZSl7Y2FzZSJjb250ZW50IjpyZXR1cm4gbmV3IGMoYSk7Y2FzZSJzaGFkb3ciOnJldHVybiBuZXcgZShhKTtjYXNlInRlbXBsYXRlIjpyZXR1cm4gbmV3IGYoYSl9ZC5jYWxsKHRoaXMsYSl9dmFyIGM9YS53cmFwcGVycy5IVE1MQ29udGVudEVsZW1lbnQsZD1hLndyYXBwZXJzLkhUTUxFbGVtZW50LGU9YS53cmFwcGVycy5IVE1MU2hhZG93RWxlbWVudCxmPWEud3JhcHBlcnMuSFRNTFRlbXBsYXRlRWxlbWVudCxnPShhLm1peGluLGEucmVnaXN0ZXJXcmFwcGVyKSxoPXdpbmRvdy5IVE1MVW5rbm93bkVsZW1lbnQ7Yi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShkLnByb3RvdHlwZSksZyhoLGIpLGEud3JhcHBlcnMuSFRNTFVua25vd25FbGVtZW50PWJ9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO3ZhciBiPWEud3JhcHBlcnMuRWxlbWVudCxjPWEud3JhcHBlcnMuSFRNTEVsZW1lbnQsZD1hLnJlZ2lzdGVyT2JqZWN0LGU9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIixmPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhlLCJ0aXRsZSIpLGc9ZChmKSxoPU9iamVjdC5nZXRQcm90b3R5cGVPZihnLnByb3RvdHlwZSkuY29uc3RydWN0b3I7aWYoISgiY2xhc3NMaXN0ImluIGYpKXt2YXIgaT1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGIucHJvdG90eXBlLCJjbGFzc0xpc3QiKTtPYmplY3QuZGVmaW5lUHJvcGVydHkoYy5wcm90b3R5cGUsImNsYXNzTGlzdCIsaSksZGVsZXRlIGIucHJvdG90eXBlLmNsYXNzTGlzdAp9YS53cmFwcGVycy5TVkdFbGVtZW50PWh9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7bS5jYWxsKHRoaXMsYSl9dmFyIGM9YS5taXhpbixkPWEucmVnaXN0ZXJXcmFwcGVyLGU9YS51bndyYXAsZj1hLndyYXAsZz13aW5kb3cuU1ZHVXNlRWxlbWVudCxoPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIsaT1mKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhoLCJnIikpLGo9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKGgsInVzZSIpLGs9aS5jb25zdHJ1Y3RvcixsPU9iamVjdC5nZXRQcm90b3R5cGVPZihrLnByb3RvdHlwZSksbT1sLmNvbnN0cnVjdG9yO2IucHJvdG90eXBlPU9iamVjdC5jcmVhdGUobCksImluc3RhbmNlUm9vdCJpbiBqJiZjKGIucHJvdG90eXBlLHtnZXQgaW5zdGFuY2VSb290KCl7cmV0dXJuIGYoZSh0aGlzKS5pbnN0YW5jZVJvb3QpfSxnZXQgYW5pbWF0ZWRJbnN0YW5jZVJvb3QoKXtyZXR1cm4gZihlKHRoaXMpLmFuaW1hdGVkSW5zdGFuY2VSb290KX19KSxkKGcsYixqKSxhLndyYXBwZXJzLlNWR1VzZUVsZW1lbnQ9Yn0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtjLmNhbGwodGhpcyxhKX12YXIgYz1hLndyYXBwZXJzLkV2ZW50VGFyZ2V0LGQ9YS5taXhpbixlPWEucmVnaXN0ZXJXcmFwcGVyLGY9YS53cmFwLGc9d2luZG93LlNWR0VsZW1lbnRJbnN0YW5jZTtnJiYoYi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShjLnByb3RvdHlwZSksZChiLnByb3RvdHlwZSx7Z2V0IGNvcnJlc3BvbmRpbmdFbGVtZW50KCl7cmV0dXJuIGYodGhpcy5pbXBsLmNvcnJlc3BvbmRpbmdFbGVtZW50KX0sZ2V0IGNvcnJlc3BvbmRpbmdVc2VFbGVtZW50KCl7cmV0dXJuIGYodGhpcy5pbXBsLmNvcnJlc3BvbmRpbmdVc2VFbGVtZW50KX0sZ2V0IHBhcmVudE5vZGUoKXtyZXR1cm4gZih0aGlzLmltcGwucGFyZW50Tm9kZSl9LGdldCBjaGlsZE5vZGVzKCl7dGhyb3cgbmV3IEVycm9yKCJOb3QgaW1wbGVtZW50ZWQiKX0sZ2V0IGZpcnN0Q2hpbGQoKXtyZXR1cm4gZih0aGlzLmltcGwuZmlyc3RDaGlsZCl9LGdldCBsYXN0Q2hpbGQoKXtyZXR1cm4gZih0aGlzLmltcGwubGFzdENoaWxkKX0sZ2V0IHByZXZpb3VzU2libGluZygpe3JldHVybiBmKHRoaXMuaW1wbC5wcmV2aW91c1NpYmxpbmcpfSxnZXQgbmV4dFNpYmxpbmcoKXtyZXR1cm4gZih0aGlzLmltcGwubmV4dFNpYmxpbmcpfX0pLGUoZyxiKSxhLndyYXBwZXJzLlNWR0VsZW1lbnRJbnN0YW5jZT1iKX0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXt0aGlzLmltcGw9YX12YXIgYz1hLm1peGluLGQ9YS5yZWdpc3RlcldyYXBwZXIsZT1hLnVud3JhcCxmPWEudW53cmFwSWZOZWVkZWQsZz1hLndyYXAsaD13aW5kb3cuQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEO2MoYi5wcm90b3R5cGUse2dldCBjYW52YXMoKXtyZXR1cm4gZyh0aGlzLmltcGwuY2FudmFzKX0sZHJhd0ltYWdlOmZ1bmN0aW9uKCl7YXJndW1lbnRzWzBdPWYoYXJndW1lbnRzWzBdKSx0aGlzLmltcGwuZHJhd0ltYWdlLmFwcGx5KHRoaXMuaW1wbCxhcmd1bWVudHMpfSxjcmVhdGVQYXR0ZXJuOmZ1bmN0aW9uKCl7cmV0dXJuIGFyZ3VtZW50c1swXT1lKGFyZ3VtZW50c1swXSksdGhpcy5pbXBsLmNyZWF0ZVBhdHRlcm4uYXBwbHkodGhpcy5pbXBsLGFyZ3VtZW50cyl9fSksZChoLGIsZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiY2FudmFzIikuZ2V0Q29udGV4dCgiMmQiKSksYS53cmFwcGVycy5DYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ9Yn0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXt0aGlzLmltcGw9YX12YXIgYz1hLm1peGluLGQ9YS5yZWdpc3RlcldyYXBwZXIsZT1hLnVud3JhcElmTmVlZGVkLGY9YS53cmFwLGc9d2luZG93LldlYkdMUmVuZGVyaW5nQ29udGV4dDtpZihnKXtjKGIucHJvdG90eXBlLHtnZXQgY2FudmFzKCl7cmV0dXJuIGYodGhpcy5pbXBsLmNhbnZhcyl9LHRleEltYWdlMkQ6ZnVuY3Rpb24oKXthcmd1bWVudHNbNV09ZShhcmd1bWVudHNbNV0pLHRoaXMuaW1wbC50ZXhJbWFnZTJELmFwcGx5KHRoaXMuaW1wbCxhcmd1bWVudHMpfSx0ZXhTdWJJbWFnZTJEOmZ1bmN0aW9uKCl7YXJndW1lbnRzWzZdPWUoYXJndW1lbnRzWzZdKSx0aGlzLmltcGwudGV4U3ViSW1hZ2UyRC5hcHBseSh0aGlzLmltcGwsYXJndW1lbnRzKX19KTt2YXIgaD0vV2ViS2l0Ly50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpP3tkcmF3aW5nQnVmZmVySGVpZ2h0Om51bGwsZHJhd2luZ0J1ZmZlcldpZHRoOm51bGx9Ont9O2QoZyxiLGgpLGEud3JhcHBlcnMuV2ViR0xSZW5kZXJpbmdDb250ZXh0PWJ9fSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe3RoaXMuaW1wbD1hfXZhciBjPWEucmVnaXN0ZXJXcmFwcGVyLGQ9YS51bndyYXAsZT1hLnVud3JhcElmTmVlZGVkLGY9YS53cmFwLGc9d2luZG93LlJhbmdlO2IucHJvdG90eXBlPXtnZXQgc3RhcnRDb250YWluZXIoKXtyZXR1cm4gZih0aGlzLmltcGwuc3RhcnRDb250YWluZXIpfSxnZXQgZW5kQ29udGFpbmVyKCl7cmV0dXJuIGYodGhpcy5pbXBsLmVuZENvbnRhaW5lcil9LGdldCBjb21tb25BbmNlc3RvckNvbnRhaW5lcigpe3JldHVybiBmKHRoaXMuaW1wbC5jb21tb25BbmNlc3RvckNvbnRhaW5lcil9LHNldFN0YXJ0OmZ1bmN0aW9uKGEsYil7dGhpcy5pbXBsLnNldFN0YXJ0KGUoYSksYil9LHNldEVuZDpmdW5jdGlvbihhLGIpe3RoaXMuaW1wbC5zZXRFbmQoZShhKSxiKX0sc2V0U3RhcnRCZWZvcmU6ZnVuY3Rpb24oYSl7dGhpcy5pbXBsLnNldFN0YXJ0QmVmb3JlKGUoYSkpfSxzZXRTdGFydEFmdGVyOmZ1bmN0aW9uKGEpe3RoaXMuaW1wbC5zZXRTdGFydEFmdGVyKGUoYSkpfSxzZXRFbmRCZWZvcmU6ZnVuY3Rpb24oYSl7dGhpcy5pbXBsLnNldEVuZEJlZm9yZShlKGEpKX0sc2V0RW5kQWZ0ZXI6ZnVuY3Rpb24oYSl7dGhpcy5pbXBsLnNldEVuZEFmdGVyKGUoYSkpfSxzZWxlY3ROb2RlOmZ1bmN0aW9uKGEpe3RoaXMuaW1wbC5zZWxlY3ROb2RlKGUoYSkpfSxzZWxlY3ROb2RlQ29udGVudHM6ZnVuY3Rpb24oYSl7dGhpcy5pbXBsLnNlbGVjdE5vZGVDb250ZW50cyhlKGEpKX0sY29tcGFyZUJvdW5kYXJ5UG9pbnRzOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuaW1wbC5jb21wYXJlQm91bmRhcnlQb2ludHMoYSxkKGIpKX0sZXh0cmFjdENvbnRlbnRzOmZ1bmN0aW9uKCl7cmV0dXJuIGYodGhpcy5pbXBsLmV4dHJhY3RDb250ZW50cygpKX0sY2xvbmVDb250ZW50czpmdW5jdGlvbigpe3JldHVybiBmKHRoaXMuaW1wbC5jbG9uZUNvbnRlbnRzKCkpfSxpbnNlcnROb2RlOmZ1bmN0aW9uKGEpe3RoaXMuaW1wbC5pbnNlcnROb2RlKGUoYSkpfSxzdXJyb3VuZENvbnRlbnRzOmZ1bmN0aW9uKGEpe3RoaXMuaW1wbC5zdXJyb3VuZENvbnRlbnRzKGUoYSkpfSxjbG9uZVJhbmdlOmZ1bmN0aW9uKCl7cmV0dXJuIGYodGhpcy5pbXBsLmNsb25lUmFuZ2UoKSl9LGlzUG9pbnRJblJhbmdlOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuaW1wbC5pc1BvaW50SW5SYW5nZShlKGEpLGIpfSxjb21wYXJlUG9pbnQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5pbXBsLmNvbXBhcmVQb2ludChlKGEpLGIpfSxpbnRlcnNlY3RzTm9kZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5pbXBsLmludGVyc2VjdHNOb2RlKGUoYSkpfSx0b1N0cmluZzpmdW5jdGlvbigpe3JldHVybiB0aGlzLmltcGwudG9TdHJpbmcoKX19LGcucHJvdG90eXBlLmNyZWF0ZUNvbnRleHR1YWxGcmFnbWVudCYmKGIucHJvdG90eXBlLmNyZWF0ZUNvbnRleHR1YWxGcmFnbWVudD1mdW5jdGlvbihhKXtyZXR1cm4gZih0aGlzLmltcGwuY3JlYXRlQ29udGV4dHVhbEZyYWdtZW50KGEpKX0pLGMod2luZG93LlJhbmdlLGIsZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKSksYS53cmFwcGVycy5SYW5nZT1ifSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0Ijt2YXIgYj1hLkdldEVsZW1lbnRzQnlJbnRlcmZhY2UsYz1hLlBhcmVudE5vZGVJbnRlcmZhY2UsZD1hLlNlbGVjdG9yc0ludGVyZmFjZSxlPWEubWl4aW4sZj1hLnJlZ2lzdGVyT2JqZWN0LGc9Zihkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCkpO2UoZy5wcm90b3R5cGUsYyksZShnLnByb3RvdHlwZSxkKSxlKGcucHJvdG90eXBlLGIpO3ZhciBoPWYoZG9jdW1lbnQuY3JlYXRlQ29tbWVudCgiIikpO2Eud3JhcHBlcnMuQ29tbWVudD1oLGEud3JhcHBlcnMuRG9jdW1lbnRGcmFnbWVudD1nfSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe3ZhciBiPWsoYS5pbXBsLm93bmVyRG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpKTtjLmNhbGwodGhpcyxiKSxpKGIsdGhpcyk7dmFyIGU9YS5zaGFkb3dSb290O20uc2V0KHRoaXMsZSksdGhpcy50cmVlU2NvcGVfPW5ldyBkKHRoaXMsZyhlfHxhKSksbC5zZXQodGhpcyxhKX12YXIgYz1hLndyYXBwZXJzLkRvY3VtZW50RnJhZ21lbnQsZD1hLlRyZWVTY29wZSxlPWEuZWxlbWVudEZyb21Qb2ludCxmPWEuZ2V0SW5uZXJIVE1MLGc9YS5nZXRUcmVlU2NvcGUsaD1hLm1peGluLGk9YS5yZXdyYXAsaj1hLnNldElubmVySFRNTCxrPWEudW53cmFwLGw9bmV3IFdlYWtNYXAsbT1uZXcgV2Vha01hcCxuPS9bIFx0XG5cclxmXS87Yi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShjLnByb3RvdHlwZSksaChiLnByb3RvdHlwZSx7Z2V0IGlubmVySFRNTCgpe3JldHVybiBmKHRoaXMpfSxzZXQgaW5uZXJIVE1MKGEpe2oodGhpcyxhKSx0aGlzLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcigpfSxnZXQgb2xkZXJTaGFkb3dSb290KCl7cmV0dXJuIG0uZ2V0KHRoaXMpfHxudWxsfSxnZXQgaG9zdCgpe3JldHVybiBsLmdldCh0aGlzKXx8bnVsbH0saW52YWxpZGF0ZVNoYWRvd1JlbmRlcmVyOmZ1bmN0aW9uKCl7cmV0dXJuIGwuZ2V0KHRoaXMpLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcigpfSxlbGVtZW50RnJvbVBvaW50OmZ1bmN0aW9uKGEsYil7cmV0dXJuIGUodGhpcyx0aGlzLm93bmVyRG9jdW1lbnQsYSxiKX0sZ2V0RWxlbWVudEJ5SWQ6ZnVuY3Rpb24oYSl7cmV0dXJuIG4udGVzdChhKT9udWxsOnRoaXMucXVlcnlTZWxlY3RvcignW2lkPSInK2ErJyJdJyl9fSksYS53cmFwcGVycy5TaGFkb3dSb290PWJ9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7YS5wcmV2aW91c1NpYmxpbmdfPWEucHJldmlvdXNTaWJsaW5nLGEubmV4dFNpYmxpbmdfPWEubmV4dFNpYmxpbmcsYS5wYXJlbnROb2RlXz1hLnBhcmVudE5vZGV9ZnVuY3Rpb24gYyhhLGMsZSl7dmFyIGY9RyhhKSxnPUcoYyksaD1lP0coZSk6bnVsbDtpZihkKGMpLGIoYyksZSlhLmZpcnN0Q2hpbGQ9PT1lJiYoYS5maXJzdENoaWxkXz1lKSxlLnByZXZpb3VzU2libGluZ189ZS5wcmV2aW91c1NpYmxpbmc7ZWxzZXthLmxhc3RDaGlsZF89YS5sYXN0Q2hpbGQsYS5sYXN0Q2hpbGQ9PT1hLmZpcnN0Q2hpbGQmJihhLmZpcnN0Q2hpbGRfPWEuZmlyc3RDaGlsZCk7dmFyIGk9SChmLmxhc3RDaGlsZCk7aSYmKGkubmV4dFNpYmxpbmdfPWkubmV4dFNpYmxpbmcpfWYuaW5zZXJ0QmVmb3JlKGcsaCl9ZnVuY3Rpb24gZChhKXt2YXIgYz1HKGEpLGQ9Yy5wYXJlbnROb2RlO2lmKGQpe3ZhciBlPUgoZCk7YihhKSxhLnByZXZpb3VzU2libGluZyYmKGEucHJldmlvdXNTaWJsaW5nLm5leHRTaWJsaW5nXz1hKSxhLm5leHRTaWJsaW5nJiYoYS5uZXh0U2libGluZy5wcmV2aW91c1NpYmxpbmdfPWEpLGUubGFzdENoaWxkPT09YSYmKGUubGFzdENoaWxkXz1hKSxlLmZpcnN0Q2hpbGQ9PT1hJiYoZS5maXJzdENoaWxkXz1hKSxkLnJlbW92ZUNoaWxkKGMpfX1mdW5jdGlvbiBlKGEpe0kuc2V0KGEsW10pfWZ1bmN0aW9uIGYoYSl7dmFyIGI9SS5nZXQoYSk7cmV0dXJuIGJ8fEkuc2V0KGEsYj1bXSksYn1mdW5jdGlvbiBnKGEpe2Zvcih2YXIgYj1bXSxjPTAsZD1hLmZpcnN0Q2hpbGQ7ZDtkPWQubmV4dFNpYmxpbmcpYltjKytdPWQ7cmV0dXJuIGJ9ZnVuY3Rpb24gaCgpe2Zvcih2YXIgYT0wO2E8TS5sZW5ndGg7YSsrKXt2YXIgYj1NW2FdLGM9Yi5wYXJlbnRSZW5kZXJlcjtjJiZjLmRpcnR5fHxiLnJlbmRlcigpfU09W119ZnVuY3Rpb24gaSgpe3k9bnVsbCxoKCl9ZnVuY3Rpb24gaihhKXt2YXIgYj1LLmdldChhKTtyZXR1cm4gYnx8KGI9bmV3IG4oYSksSy5zZXQoYSxiKSksYn1mdW5jdGlvbiBrKGEpe3ZhciBiPUUoYSkucm9vdDtyZXR1cm4gYiBpbnN0YW5jZW9mIEQ/YjpudWxsfWZ1bmN0aW9uIGwoYSl7cmV0dXJuIGooYS5ob3N0KX1mdW5jdGlvbiBtKGEpe3RoaXMuc2tpcD0hMSx0aGlzLm5vZGU9YSx0aGlzLmNoaWxkTm9kZXM9W119ZnVuY3Rpb24gbihhKXt0aGlzLmhvc3Q9YSx0aGlzLmRpcnR5PSExLHRoaXMuaW52YWxpZGF0ZUF0dHJpYnV0ZXMoKSx0aGlzLmFzc29jaWF0ZU5vZGUoYSl9ZnVuY3Rpb24gbyhhKXtmb3IodmFyIGI9W10sYz1hLmZpcnN0Q2hpbGQ7YztjPWMubmV4dFNpYmxpbmcpdihjKT9iLnB1c2guYXBwbHkoYixmKGMpKTpiLnB1c2goYyk7cmV0dXJuIGJ9ZnVuY3Rpb24gcChhKXtpZihhIGluc3RhbmNlb2YgQilyZXR1cm4gYTtpZihhIGluc3RhbmNlb2YgQSlyZXR1cm4gbnVsbDtmb3IodmFyIGI9YS5maXJzdENoaWxkO2I7Yj1iLm5leHRTaWJsaW5nKXt2YXIgYz1wKGIpO2lmKGMpcmV0dXJuIGN9cmV0dXJuIG51bGx9ZnVuY3Rpb24gcShhLGIpe2YoYikucHVzaChhKTt2YXIgYz1KLmdldChhKTtjP2MucHVzaChiKTpKLnNldChhLFtiXSl9ZnVuY3Rpb24gcihhKXtyZXR1cm4gSi5nZXQoYSl9ZnVuY3Rpb24gcyhhKXtKLnNldChhLHZvaWQgMCl9ZnVuY3Rpb24gdChhLGIpe3ZhciBjPWIuZ2V0QXR0cmlidXRlKCJzZWxlY3QiKTtpZighYylyZXR1cm4hMDtpZihjPWMudHJpbSgpLCFjKXJldHVybiEwO2lmKCEoYSBpbnN0YW5jZW9mIHopKXJldHVybiExO2lmKCFPLnRlc3QoYykpcmV0dXJuITE7dHJ5e3JldHVybiBhLm1hdGNoZXMoYyl9Y2F0Y2goZCl7cmV0dXJuITF9fWZ1bmN0aW9uIHUoYSxiKXt2YXIgYz1yKGIpO3JldHVybiBjJiZjW2MubGVuZ3RoLTFdPT09YX1mdW5jdGlvbiB2KGEpe3JldHVybiBhIGluc3RhbmNlb2YgQXx8YSBpbnN0YW5jZW9mIEJ9ZnVuY3Rpb24gdyhhKXtyZXR1cm4gYS5zaGFkb3dSb290fWZ1bmN0aW9uIHgoYSl7Zm9yKHZhciBiPVtdLGM9YS5zaGFkb3dSb290O2M7Yz1jLm9sZGVyU2hhZG93Um9vdCliLnB1c2goYyk7cmV0dXJuIGJ9dmFyIHksej1hLndyYXBwZXJzLkVsZW1lbnQsQT1hLndyYXBwZXJzLkhUTUxDb250ZW50RWxlbWVudCxCPWEud3JhcHBlcnMuSFRNTFNoYWRvd0VsZW1lbnQsQz1hLndyYXBwZXJzLk5vZGUsRD1hLndyYXBwZXJzLlNoYWRvd1Jvb3QsRT0oYS5hc3NlcnQsYS5nZXRUcmVlU2NvcGUpLEY9KGEubWl4aW4sYS5vbmVPZiksRz1hLnVud3JhcCxIPWEud3JhcCxJPW5ldyBXZWFrTWFwLEo9bmV3IFdlYWtNYXAsSz1uZXcgV2Vha01hcCxMPUYod2luZG93LFsicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwibW96UmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwid2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwic2V0VGltZW91dCJdKSxNPVtdLE49bmV3IEFycmF5U3BsaWNlO04uZXF1YWxzPWZ1bmN0aW9uKGEsYil7cmV0dXJuIEcoYS5ub2RlKT09PWJ9LG0ucHJvdG90eXBlPXthcHBlbmQ6ZnVuY3Rpb24oYSl7dmFyIGI9bmV3IG0oYSk7cmV0dXJuIHRoaXMuY2hpbGROb2Rlcy5wdXNoKGIpLGJ9LHN5bmM6ZnVuY3Rpb24oYSl7aWYoIXRoaXMuc2tpcCl7Zm9yKHZhciBiPXRoaXMubm9kZSxlPXRoaXMuY2hpbGROb2RlcyxmPWcoRyhiKSksaD1hfHxuZXcgV2Vha01hcCxpPU4uY2FsY3VsYXRlU3BsaWNlcyhlLGYpLGo9MCxrPTAsbD0wLG09MDttPGkubGVuZ3RoO20rKyl7Zm9yKHZhciBuPWlbbV07bDxuLmluZGV4O2wrKylrKyssZVtqKytdLnN5bmMoaCk7Zm9yKHZhciBvPW4ucmVtb3ZlZC5sZW5ndGgscD0wO28+cDtwKyspe3ZhciBxPUgoZltrKytdKTtoLmdldChxKXx8ZChxKX1mb3IodmFyIHI9bi5hZGRlZENvdW50LHM9ZltrXSYmSChmW2tdKSxwPTA7cj5wO3ArKyl7dmFyIHQ9ZVtqKytdLHU9dC5ub2RlO2MoYix1LHMpLGguc2V0KHUsITApLHQuc3luYyhoKX1sKz1yfWZvcih2YXIgbT1sO208ZS5sZW5ndGg7bSsrKWVbbV0uc3luYyhoKX19fSxuLnByb3RvdHlwZT17cmVuZGVyOmZ1bmN0aW9uKGEpe2lmKHRoaXMuZGlydHkpe3RoaXMuaW52YWxpZGF0ZUF0dHJpYnV0ZXMoKTt2YXIgYj10aGlzLmhvc3Q7dGhpcy5kaXN0cmlidXRpb24oYik7dmFyIGM9YXx8bmV3IG0oYik7dGhpcy5idWlsZFJlbmRlclRyZWUoYyxiKTt2YXIgZD0hYTtkJiZjLnN5bmMoKSx0aGlzLmRpcnR5PSExfX0sZ2V0IHBhcmVudFJlbmRlcmVyKCl7cmV0dXJuIEUodGhpcy5ob3N0KS5yZW5kZXJlcn0saW52YWxpZGF0ZTpmdW5jdGlvbigpe2lmKCF0aGlzLmRpcnR5KXt0aGlzLmRpcnR5PSEwO3ZhciBhPXRoaXMucGFyZW50UmVuZGVyZXI7aWYoYSYmYS5pbnZhbGlkYXRlKCksTS5wdXNoKHRoaXMpLHkpcmV0dXJuO3k9d2luZG93W0xdKGksMCl9fSxkaXN0cmlidXRpb246ZnVuY3Rpb24oYSl7dGhpcy5yZXNldEFsbChhKSx0aGlzLmRpc3RyaWJ1dGlvblJlc29sdXRpb24oYSl9LHJlc2V0QWxsOmZ1bmN0aW9uKGEpe3YoYSk/ZShhKTpzKGEpO2Zvcih2YXIgYj1hLmZpcnN0Q2hpbGQ7YjtiPWIubmV4dFNpYmxpbmcpdGhpcy5yZXNldEFsbChiKTthLnNoYWRvd1Jvb3QmJnRoaXMucmVzZXRBbGwoYS5zaGFkb3dSb290KSxhLm9sZGVyU2hhZG93Um9vdCYmdGhpcy5yZXNldEFsbChhLm9sZGVyU2hhZG93Um9vdCl9LGRpc3RyaWJ1dGlvblJlc29sdXRpb246ZnVuY3Rpb24oYSl7aWYodyhhKSl7Zm9yKHZhciBiPWEsYz1vKGIpLGQ9eChiKSxlPTA7ZTxkLmxlbmd0aDtlKyspdGhpcy5wb29sRGlzdHJpYnV0aW9uKGRbZV0sYyk7Zm9yKHZhciBlPWQubGVuZ3RoLTE7ZT49MDtlLS0pe3ZhciBmPWRbZV0sZz1wKGYpO2lmKGcpe3ZhciBoPWYub2xkZXJTaGFkb3dSb290O2gmJihjPW8oaCkpO2Zvcih2YXIgaT0wO2k8Yy5sZW5ndGg7aSsrKXEoY1tpXSxnKX10aGlzLmRpc3RyaWJ1dGlvblJlc29sdXRpb24oZil9fWZvcih2YXIgaj1hLmZpcnN0Q2hpbGQ7ajtqPWoubmV4dFNpYmxpbmcpdGhpcy5kaXN0cmlidXRpb25SZXNvbHV0aW9uKGopfSxwb29sRGlzdHJpYnV0aW9uOmZ1bmN0aW9uKGEsYil7aWYoIShhIGluc3RhbmNlb2YgQikpaWYoYSBpbnN0YW5jZW9mIEEpe3ZhciBjPWE7dGhpcy51cGRhdGVEZXBlbmRlbnRBdHRyaWJ1dGVzKGMuZ2V0QXR0cmlidXRlKCJzZWxlY3QiKSk7Zm9yKHZhciBkPSExLGU9MDtlPGIubGVuZ3RoO2UrKyl7dmFyIGE9YltlXTthJiZ0KGEsYykmJihxKGEsYyksYltlXT12b2lkIDAsZD0hMCl9aWYoIWQpZm9yKHZhciBmPWMuZmlyc3RDaGlsZDtmO2Y9Zi5uZXh0U2libGluZylxKGYsYyl9ZWxzZSBmb3IodmFyIGY9YS5maXJzdENoaWxkO2Y7Zj1mLm5leHRTaWJsaW5nKXRoaXMucG9vbERpc3RyaWJ1dGlvbihmLGIpfSxidWlsZFJlbmRlclRyZWU6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9dGhpcy5jb21wb3NlKGIpLGQ9MDtkPGMubGVuZ3RoO2QrKyl7dmFyIGU9Y1tkXSxmPWEuYXBwZW5kKGUpO3RoaXMuYnVpbGRSZW5kZXJUcmVlKGYsZSl9aWYodyhiKSl7dmFyIGc9aihiKTtnLmRpcnR5PSExfX0sY29tcG9zZTpmdW5jdGlvbihhKXtmb3IodmFyIGI9W10sYz1hLnNoYWRvd1Jvb3R8fGEsZD1jLmZpcnN0Q2hpbGQ7ZDtkPWQubmV4dFNpYmxpbmcpaWYodihkKSl7dGhpcy5hc3NvY2lhdGVOb2RlKGMpO2Zvcih2YXIgZT1mKGQpLGc9MDtnPGUubGVuZ3RoO2crKyl7dmFyIGg9ZVtnXTt1KGQsaCkmJmIucHVzaChoKX19ZWxzZSBiLnB1c2goZCk7cmV0dXJuIGJ9LGludmFsaWRhdGVBdHRyaWJ1dGVzOmZ1bmN0aW9uKCl7dGhpcy5hdHRyaWJ1dGVzPU9iamVjdC5jcmVhdGUobnVsbCl9LHVwZGF0ZURlcGVuZGVudEF0dHJpYnV0ZXM6ZnVuY3Rpb24oYSl7aWYoYSl7dmFyIGI9dGhpcy5hdHRyaWJ1dGVzOy9cLlx3Ky8udGVzdChhKSYmKGJbImNsYXNzIl09ITApLC8jXHcrLy50ZXN0KGEpJiYoYi5pZD0hMCksYS5yZXBsYWNlKC9cW1xzKihbXlxzPVx8flxdXSspL2csZnVuY3Rpb24oYSxjKXtiW2NdPSEwfSl9fSxkZXBlbmRzT25BdHRyaWJ1dGU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuYXR0cmlidXRlc1thXX0sYXNzb2NpYXRlTm9kZTpmdW5jdGlvbihhKXthLmltcGwucG9seW1lclNoYWRvd1JlbmRlcmVyXz10aGlzfX07dmFyIE89L15bKi4jW2EtekEtWl98XS87Qy5wcm90b3R5cGUuaW52YWxpZGF0ZVNoYWRvd1JlbmRlcmVyPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5pbXBsLnBvbHltZXJTaGFkb3dSZW5kZXJlcl87cmV0dXJuIGE/KGEuaW52YWxpZGF0ZSgpLCEwKTohMX0sQS5wcm90b3R5cGUuZ2V0RGlzdHJpYnV0ZWROb2Rlcz1CLnByb3RvdHlwZS5nZXREaXN0cmlidXRlZE5vZGVzPWZ1bmN0aW9uKCl7cmV0dXJuIGgoKSxmKHRoaXMpfSx6LnByb3RvdHlwZS5nZXREZXN0aW5hdGlvbkluc2VydGlvblBvaW50cz1mdW5jdGlvbigpe3JldHVybiBoKCkscih0aGlzKXx8W119LEEucHJvdG90eXBlLm5vZGVJc0luc2VydGVkXz1CLnByb3RvdHlwZS5ub2RlSXNJbnNlcnRlZF89ZnVuY3Rpb24oKXt0aGlzLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcigpO3ZhciBhLGI9ayh0aGlzKTtiJiYoYT1sKGIpKSx0aGlzLmltcGwucG9seW1lclNoYWRvd1JlbmRlcmVyXz1hLGEmJmEuaW52YWxpZGF0ZSgpfSxhLmdldFJlbmRlcmVyRm9ySG9zdD1qLGEuZ2V0U2hhZG93VHJlZXM9eCxhLnJlbmRlckFsbFBlbmRpbmc9aCxhLmdldERlc3RpbmF0aW9uSW5zZXJ0aW9uUG9pbnRzPXIsYS52aXN1YWw9e2luc2VydEJlZm9yZTpjLHJlbW92ZTpkfX0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihiKXtpZih3aW5kb3dbYl0pe2QoIWEud3JhcHBlcnNbYl0pO3ZhciBpPWZ1bmN0aW9uKGEpe2MuY2FsbCh0aGlzLGEpfTtpLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGMucHJvdG90eXBlKSxlKGkucHJvdG90eXBlLHtnZXQgZm9ybSgpe3JldHVybiBoKGcodGhpcykuZm9ybSl9fSksZih3aW5kb3dbYl0saSxkb2N1bWVudC5jcmVhdGVFbGVtZW50KGIuc2xpY2UoNCwtNykpKSxhLndyYXBwZXJzW2JdPWl9fXZhciBjPWEud3JhcHBlcnMuSFRNTEVsZW1lbnQsZD1hLmFzc2VydCxlPWEubWl4aW4sZj1hLnJlZ2lzdGVyV3JhcHBlcixnPWEudW53cmFwLGg9YS53cmFwLGk9WyJIVE1MQnV0dG9uRWxlbWVudCIsIkhUTUxGaWVsZFNldEVsZW1lbnQiLCJIVE1MSW5wdXRFbGVtZW50IiwiSFRNTEtleWdlbkVsZW1lbnQiLCJIVE1MTGFiZWxFbGVtZW50IiwiSFRNTExlZ2VuZEVsZW1lbnQiLCJIVE1MT2JqZWN0RWxlbWVudCIsIkhUTUxPdXRwdXRFbGVtZW50IiwiSFRNTFRleHRBcmVhRWxlbWVudCJdO2kuZm9yRWFjaChiKX0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXt0aGlzLmltcGw9YX17dmFyIGM9YS5yZWdpc3RlcldyYXBwZXIsZD1hLnVud3JhcCxlPWEudW53cmFwSWZOZWVkZWQsZj1hLndyYXA7d2luZG93LlNlbGVjdGlvbn1iLnByb3RvdHlwZT17Z2V0IGFuY2hvck5vZGUoKXtyZXR1cm4gZih0aGlzLmltcGwuYW5jaG9yTm9kZSl9LGdldCBmb2N1c05vZGUoKXtyZXR1cm4gZih0aGlzLmltcGwuZm9jdXNOb2RlKX0sYWRkUmFuZ2U6ZnVuY3Rpb24oYSl7dGhpcy5pbXBsLmFkZFJhbmdlKGQoYSkpfSxjb2xsYXBzZTpmdW5jdGlvbihhLGIpe3RoaXMuaW1wbC5jb2xsYXBzZShlKGEpLGIpfSxjb250YWluc05vZGU6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5pbXBsLmNvbnRhaW5zTm9kZShlKGEpLGIpfSxleHRlbmQ6ZnVuY3Rpb24oYSxiKXt0aGlzLmltcGwuZXh0ZW5kKGUoYSksYil9LGdldFJhbmdlQXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGYodGhpcy5pbXBsLmdldFJhbmdlQXQoYSkpfSxyZW1vdmVSYW5nZTpmdW5jdGlvbihhKXt0aGlzLmltcGwucmVtb3ZlUmFuZ2UoZChhKSl9LHNlbGVjdEFsbENoaWxkcmVuOmZ1bmN0aW9uKGEpe3RoaXMuaW1wbC5zZWxlY3RBbGxDaGlsZHJlbihlKGEpKX0sdG9TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbXBsLnRvU3RyaW5nKCl9fSxjKHdpbmRvdy5TZWxlY3Rpb24sYix3aW5kb3cuZ2V0U2VsZWN0aW9uKCkpLGEud3JhcHBlcnMuU2VsZWN0aW9uPWJ9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7ay5jYWxsKHRoaXMsYSksdGhpcy50cmVlU2NvcGVfPW5ldyBwKHRoaXMsbnVsbCl9ZnVuY3Rpb24gYyhhKXt2YXIgYz1kb2N1bWVudFthXTtiLnByb3RvdHlwZVthXT1mdW5jdGlvbigpe3JldHVybiBBKGMuYXBwbHkodGhpcy5pbXBsLGFyZ3VtZW50cykpfX1mdW5jdGlvbiBkKGEsYil7RC5jYWxsKGIuaW1wbCx6KGEpKSxlKGEsYil9ZnVuY3Rpb24gZShhLGIpe2Euc2hhZG93Um9vdCYmYi5hZG9wdE5vZGUoYS5zaGFkb3dSb290KSxhIGluc3RhbmNlb2YgbyYmZihhLGIpO2Zvcih2YXIgYz1hLmZpcnN0Q2hpbGQ7YztjPWMubmV4dFNpYmxpbmcpZShjLGIpfWZ1bmN0aW9uIGYoYSxiKXt2YXIgYz1hLm9sZGVyU2hhZG93Um9vdDtjJiZiLmFkb3B0Tm9kZShjKX1mdW5jdGlvbiBnKGEpe3RoaXMuaW1wbD1hfWZ1bmN0aW9uIGgoYSxiKXt2YXIgYz1kb2N1bWVudC5pbXBsZW1lbnRhdGlvbltiXTthLnByb3RvdHlwZVtiXT1mdW5jdGlvbigpe3JldHVybiBBKGMuYXBwbHkodGhpcy5pbXBsLGFyZ3VtZW50cykpfX1mdW5jdGlvbiBpKGEsYil7dmFyIGM9ZG9jdW1lbnQuaW1wbGVtZW50YXRpb25bYl07YS5wcm90b3R5cGVbYl09ZnVuY3Rpb24oKXtyZXR1cm4gYy5hcHBseSh0aGlzLmltcGwsYXJndW1lbnRzKX19dmFyIGo9YS5HZXRFbGVtZW50c0J5SW50ZXJmYWNlLGs9YS53cmFwcGVycy5Ob2RlLGw9YS5QYXJlbnROb2RlSW50ZXJmYWNlLG09YS53cmFwcGVycy5TZWxlY3Rpb24sbj1hLlNlbGVjdG9yc0ludGVyZmFjZSxvPWEud3JhcHBlcnMuU2hhZG93Um9vdCxwPWEuVHJlZVNjb3BlLHE9YS5jbG9uZU5vZGUscj1hLmRlZmluZVdyYXBHZXR0ZXIscz1hLmVsZW1lbnRGcm9tUG9pbnQsdD1hLmZvcndhcmRNZXRob2RzVG9XcmFwcGVyLHU9YS5tYXRjaGVzTmFtZXMsdj1hLm1peGluLHc9YS5yZWdpc3RlcldyYXBwZXIseD1hLnJlbmRlckFsbFBlbmRpbmcseT1hLnJld3JhcCx6PWEudW53cmFwLEE9YS53cmFwLEI9YS53cmFwRXZlbnRUYXJnZXRNZXRob2RzLEM9KGEud3JhcE5vZGVMaXN0LG5ldyBXZWFrTWFwKTtiLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGsucHJvdG90eXBlKSxyKGIsImRvY3VtZW50RWxlbWVudCIpLHIoYiwiYm9keSIpLHIoYiwiaGVhZCIpLFsiY3JlYXRlQ29tbWVudCIsImNyZWF0ZURvY3VtZW50RnJhZ21lbnQiLCJjcmVhdGVFbGVtZW50IiwiY3JlYXRlRWxlbWVudE5TIiwiY3JlYXRlRXZlbnQiLCJjcmVhdGVFdmVudE5TIiwiY3JlYXRlUmFuZ2UiLCJjcmVhdGVUZXh0Tm9kZSIsImdldEVsZW1lbnRCeUlkIl0uZm9yRWFjaChjKTt2YXIgRD1kb2N1bWVudC5hZG9wdE5vZGUsRT1kb2N1bWVudC5nZXRTZWxlY3Rpb247aWYodihiLnByb3RvdHlwZSx7YWRvcHROb2RlOmZ1bmN0aW9uKGEpe3JldHVybiBhLnBhcmVudE5vZGUmJmEucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChhKSxkKGEsdGhpcyksYX0sZWxlbWVudEZyb21Qb2ludDpmdW5jdGlvbihhLGIpe3JldHVybiBzKHRoaXMsdGhpcyxhLGIpfSxpbXBvcnROb2RlOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHEoYSxiLHRoaXMuaW1wbCl9LGdldFNlbGVjdGlvbjpmdW5jdGlvbigpe3JldHVybiB4KCksbmV3IG0oRS5jYWxsKHoodGhpcykpKX0sZ2V0RWxlbWVudHNCeU5hbWU6ZnVuY3Rpb24oYSl7cmV0dXJuIG4ucXVlcnlTZWxlY3RvckFsbC5jYWxsKHRoaXMsIltuYW1lPSIrSlNPTi5zdHJpbmdpZnkoU3RyaW5nKGEpKSsiXSIpfX0pLGRvY3VtZW50LnJlZ2lzdGVyRWxlbWVudCl7dmFyIEY9ZG9jdW1lbnQucmVnaXN0ZXJFbGVtZW50O2IucHJvdG90eXBlLnJlZ2lzdGVyRWxlbWVudD1mdW5jdGlvbihiLGMpe2Z1bmN0aW9uIGQoYSl7cmV0dXJuIGE/dm9pZCh0aGlzLmltcGw9YSk6Zj9kb2N1bWVudC5jcmVhdGVFbGVtZW50KGYsYik6ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChiKX12YXIgZSxmO2lmKHZvaWQgMCE9PWMmJihlPWMucHJvdG90eXBlLGY9Yy5leHRlbmRzKSxlfHwoZT1PYmplY3QuY3JlYXRlKEhUTUxFbGVtZW50LnByb3RvdHlwZSkpLGEubmF0aXZlUHJvdG90eXBlVGFibGUuZ2V0KGUpKXRocm93IG5ldyBFcnJvcigiTm90U3VwcG9ydGVkRXJyb3IiKTtmb3IodmFyIGcsaD1PYmplY3QuZ2V0UHJvdG90eXBlT2YoZSksaT1bXTtoJiYhKGc9YS5uYXRpdmVQcm90b3R5cGVUYWJsZS5nZXQoaCkpOylpLnB1c2goaCksaD1PYmplY3QuZ2V0UHJvdG90eXBlT2YoaCk7aWYoIWcpdGhyb3cgbmV3IEVycm9yKCJOb3RTdXBwb3J0ZWRFcnJvciIpO2Zvcih2YXIgaj1PYmplY3QuY3JlYXRlKGcpLGs9aS5sZW5ndGgtMTtrPj0wO2stLSlqPU9iamVjdC5jcmVhdGUoaik7WyJjcmVhdGVkQ2FsbGJhY2siLCJhdHRhY2hlZENhbGxiYWNrIiwiZGV0YWNoZWRDYWxsYmFjayIsImF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjayJdLmZvckVhY2goZnVuY3Rpb24oYSl7dmFyIGI9ZVthXTtiJiYoalthXT1mdW5jdGlvbigpe0EodGhpcylpbnN0YW5jZW9mIGR8fHkodGhpcyksYi5hcHBseShBKHRoaXMpLGFyZ3VtZW50cyl9KX0pO3ZhciBsPXtwcm90b3R5cGU6an07ZiYmKGwuZXh0ZW5kcz1mKSxkLnByb3RvdHlwZT1lLGQucHJvdG90eXBlLmNvbnN0cnVjdG9yPWQsYS5jb25zdHJ1Y3RvclRhYmxlLnNldChqLGQpLGEubmF0aXZlUHJvdG90eXBlVGFibGUuc2V0KGUsaik7Ri5jYWxsKHoodGhpcyksYixsKTtyZXR1cm4gZH0sdChbd2luZG93LkhUTUxEb2N1bWVudHx8d2luZG93LkRvY3VtZW50XSxbInJlZ2lzdGVyRWxlbWVudCJdKX10KFt3aW5kb3cuSFRNTEJvZHlFbGVtZW50LHdpbmRvdy5IVE1MRG9jdW1lbnR8fHdpbmRvdy5Eb2N1bWVudCx3aW5kb3cuSFRNTEhlYWRFbGVtZW50LHdpbmRvdy5IVE1MSHRtbEVsZW1lbnRdLFsiYXBwZW5kQ2hpbGQiLCJjb21wYXJlRG9jdW1lbnRQb3NpdGlvbiIsImNvbnRhaW5zIiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWVOUyIsImluc2VydEJlZm9yZSIsInF1ZXJ5U2VsZWN0b3IiLCJxdWVyeVNlbGVjdG9yQWxsIiwicmVtb3ZlQ2hpbGQiLCJyZXBsYWNlQ2hpbGQiXS5jb25jYXQodSkpLHQoW3dpbmRvdy5IVE1MRG9jdW1lbnR8fHdpbmRvdy5Eb2N1bWVudF0sWyJhZG9wdE5vZGUiLCJpbXBvcnROb2RlIiwiY29udGFpbnMiLCJjcmVhdGVDb21tZW50IiwiY3JlYXRlRG9jdW1lbnRGcmFnbWVudCIsImNyZWF0ZUVsZW1lbnQiLCJjcmVhdGVFbGVtZW50TlMiLCJjcmVhdGVFdmVudCIsImNyZWF0ZUV2ZW50TlMiLCJjcmVhdGVSYW5nZSIsImNyZWF0ZVRleHROb2RlIiwiZWxlbWVudEZyb21Qb2ludCIsImdldEVsZW1lbnRCeUlkIiwiZ2V0RWxlbWVudHNCeU5hbWUiLCJnZXRTZWxlY3Rpb24iXSksdihiLnByb3RvdHlwZSxqKSx2KGIucHJvdG90eXBlLGwpLHYoYi5wcm90b3R5cGUsbiksdihiLnByb3RvdHlwZSx7Z2V0IGltcGxlbWVudGF0aW9uKCl7dmFyIGE9Qy5nZXQodGhpcyk7cmV0dXJuIGE/YTooYT1uZXcgZyh6KHRoaXMpLmltcGxlbWVudGF0aW9uKSxDLnNldCh0aGlzLGEpLGEpfSxnZXQgZGVmYXVsdFZpZXcoKXtyZXR1cm4gQSh6KHRoaXMpLmRlZmF1bHRWaWV3KX19KSx3KHdpbmRvdy5Eb2N1bWVudCxiLGRvY3VtZW50LmltcGxlbWVudGF0aW9uLmNyZWF0ZUhUTUxEb2N1bWVudCgiIikpLHdpbmRvdy5IVE1MRG9jdW1lbnQmJncod2luZG93LkhUTUxEb2N1bWVudCxiKSxCKFt3aW5kb3cuSFRNTEJvZHlFbGVtZW50LHdpbmRvdy5IVE1MRG9jdW1lbnR8fHdpbmRvdy5Eb2N1bWVudCx3aW5kb3cuSFRNTEhlYWRFbGVtZW50XSksaChnLCJjcmVhdGVEb2N1bWVudFR5cGUiKSxoKGcsImNyZWF0ZURvY3VtZW50IiksaChnLCJjcmVhdGVIVE1MRG9jdW1lbnQiKSxpKGcsImhhc0ZlYXR1cmUiKSx3KHdpbmRvdy5ET01JbXBsZW1lbnRhdGlvbixnKSx0KFt3aW5kb3cuRE9NSW1wbGVtZW50YXRpb25dLFsiY3JlYXRlRG9jdW1lbnRUeXBlIiwiY3JlYXRlRG9jdW1lbnQiLCJjcmVhdGVIVE1MRG9jdW1lbnQiLCJoYXNGZWF0dXJlIl0pLGEuYWRvcHROb2RlTm9SZW1vdmU9ZCxhLndyYXBwZXJzLkRPTUltcGxlbWVudGF0aW9uPWcsYS53cmFwcGVycy5Eb2N1bWVudD1ifSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe2MuY2FsbCh0aGlzLGEpfXZhciBjPWEud3JhcHBlcnMuRXZlbnRUYXJnZXQsZD1hLndyYXBwZXJzLlNlbGVjdGlvbixlPWEubWl4aW4sZj1hLnJlZ2lzdGVyV3JhcHBlcixnPWEucmVuZGVyQWxsUGVuZGluZyxoPWEudW53cmFwLGk9YS51bndyYXBJZk5lZWRlZCxqPWEud3JhcCxrPXdpbmRvdy5XaW5kb3csbD13aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSxtPXdpbmRvdy5nZXRTZWxlY3Rpb247Yi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShjLnByb3RvdHlwZSksay5wcm90b3R5cGUuZ2V0Q29tcHV0ZWRTdHlsZT1mdW5jdGlvbihhLGIpe3JldHVybiBqKHRoaXN8fHdpbmRvdykuZ2V0Q29tcHV0ZWRTdHlsZShpKGEpLGIpfSxrLnByb3RvdHlwZS5nZXRTZWxlY3Rpb249ZnVuY3Rpb24oKXtyZXR1cm4gaih0aGlzfHx3aW5kb3cpLmdldFNlbGVjdGlvbigpfSxkZWxldGUgd2luZG93LmdldENvbXB1dGVkU3R5bGUsZGVsZXRlIHdpbmRvdy5nZXRTZWxlY3Rpb24sWyJhZGRFdmVudExpc3RlbmVyIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImRpc3BhdGNoRXZlbnQiXS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2sucHJvdG90eXBlW2FdPWZ1bmN0aW9uKCl7dmFyIGI9aih0aGlzfHx3aW5kb3cpO3JldHVybiBiW2FdLmFwcGx5KGIsYXJndW1lbnRzKX0sZGVsZXRlIHdpbmRvd1thXX0pLGUoYi5wcm90b3R5cGUse2dldENvbXB1dGVkU3R5bGU6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gZygpLGwuY2FsbChoKHRoaXMpLGkoYSksYil9LGdldFNlbGVjdGlvbjpmdW5jdGlvbigpe3JldHVybiBnKCksbmV3IGQobS5jYWxsKGgodGhpcykpKX0sZ2V0IGRvY3VtZW50KCl7cmV0dXJuIGooaCh0aGlzKS5kb2N1bWVudCl9fSksZihrLGIsd2luZG93KSxhLndyYXBwZXJzLldpbmRvdz1ifSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0Ijt2YXIgYj1hLnVud3JhcCxjPXdpbmRvdy5EYXRhVHJhbnNmZXJ8fHdpbmRvdy5DbGlwYm9hcmQsZD1jLnByb3RvdHlwZS5zZXREcmFnSW1hZ2U7ZCYmKGMucHJvdG90eXBlLnNldERyYWdJbWFnZT1mdW5jdGlvbihhLGMsZSl7ZC5jYWxsKHRoaXMsYihhKSxjLGUpfSl9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7dGhpcy5pbXBsPW5ldyBlKGEmJmQoYSkpfXZhciBjPWEucmVnaXN0ZXJXcmFwcGVyLGQ9YS51bndyYXAsZT13aW5kb3cuRm9ybURhdGE7YyhlLGIsbmV3IGUpLGEud3JhcHBlcnMuRm9ybURhdGE9Yn0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXt2YXIgYj1jW2FdLGQ9d2luZG93W2JdO2lmKGQpe3ZhciBlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoYSksZj1lLmNvbnN0cnVjdG9yO3dpbmRvd1tiXT1mfX12YXIgYz0oYS5pc1dyYXBwZXJGb3Ise2E6IkhUTUxBbmNob3JFbGVtZW50IixhcmVhOiJIVE1MQXJlYUVsZW1lbnQiLGF1ZGlvOiJIVE1MQXVkaW9FbGVtZW50IixiYXNlOiJIVE1MQmFzZUVsZW1lbnQiLGJvZHk6IkhUTUxCb2R5RWxlbWVudCIsYnI6IkhUTUxCUkVsZW1lbnQiLGJ1dHRvbjoiSFRNTEJ1dHRvbkVsZW1lbnQiLGNhbnZhczoiSFRNTENhbnZhc0VsZW1lbnQiLGNhcHRpb246IkhUTUxUYWJsZUNhcHRpb25FbGVtZW50Iixjb2w6IkhUTUxUYWJsZUNvbEVsZW1lbnQiLGNvbnRlbnQ6IkhUTUxDb250ZW50RWxlbWVudCIsZGF0YToiSFRNTERhdGFFbGVtZW50IixkYXRhbGlzdDoiSFRNTERhdGFMaXN0RWxlbWVudCIsZGVsOiJIVE1MTW9kRWxlbWVudCIsZGlyOiJIVE1MRGlyZWN0b3J5RWxlbWVudCIsZGl2OiJIVE1MRGl2RWxlbWVudCIsZGw6IkhUTUxETGlzdEVsZW1lbnQiLGVtYmVkOiJIVE1MRW1iZWRFbGVtZW50IixmaWVsZHNldDoiSFRNTEZpZWxkU2V0RWxlbWVudCIsZm9udDoiSFRNTEZvbnRFbGVtZW50Iixmb3JtOiJIVE1MRm9ybUVsZW1lbnQiLGZyYW1lOiJIVE1MRnJhbWVFbGVtZW50IixmcmFtZXNldDoiSFRNTEZyYW1lU2V0RWxlbWVudCIsaDE6IkhUTUxIZWFkaW5nRWxlbWVudCIsaGVhZDoiSFRNTEhlYWRFbGVtZW50IixocjoiSFRNTEhSRWxlbWVudCIsaHRtbDoiSFRNTEh0bWxFbGVtZW50IixpZnJhbWU6IkhUTUxJRnJhbWVFbGVtZW50IixpbWc6IkhUTUxJbWFnZUVsZW1lbnQiLGlucHV0OiJIVE1MSW5wdXRFbGVtZW50IixrZXlnZW46IkhUTUxLZXlnZW5FbGVtZW50IixsYWJlbDoiSFRNTExhYmVsRWxlbWVudCIsbGVnZW5kOiJIVE1MTGVnZW5kRWxlbWVudCIsbGk6IkhUTUxMSUVsZW1lbnQiLGxpbms6IkhUTUxMaW5rRWxlbWVudCIsbWFwOiJIVE1MTWFwRWxlbWVudCIsbWFycXVlZToiSFRNTE1hcnF1ZWVFbGVtZW50IixtZW51OiJIVE1MTWVudUVsZW1lbnQiLG1lbnVpdGVtOiJIVE1MTWVudUl0ZW1FbGVtZW50IixtZXRhOiJIVE1MTWV0YUVsZW1lbnQiLG1ldGVyOiJIVE1MTWV0ZXJFbGVtZW50IixvYmplY3Q6IkhUTUxPYmplY3RFbGVtZW50IixvbDoiSFRNTE9MaXN0RWxlbWVudCIsb3B0Z3JvdXA6IkhUTUxPcHRHcm91cEVsZW1lbnQiLG9wdGlvbjoiSFRNTE9wdGlvbkVsZW1lbnQiLG91dHB1dDoiSFRNTE91dHB1dEVsZW1lbnQiLHA6IkhUTUxQYXJhZ3JhcGhFbGVtZW50IixwYXJhbToiSFRNTFBhcmFtRWxlbWVudCIscHJlOiJIVE1MUHJlRWxlbWVudCIscHJvZ3Jlc3M6IkhUTUxQcm9ncmVzc0VsZW1lbnQiLHE6IkhUTUxRdW90ZUVsZW1lbnQiLHNjcmlwdDoiSFRNTFNjcmlwdEVsZW1lbnQiLHNlbGVjdDoiSFRNTFNlbGVjdEVsZW1lbnQiLHNoYWRvdzoiSFRNTFNoYWRvd0VsZW1lbnQiLHNvdXJjZToiSFRNTFNvdXJjZUVsZW1lbnQiLHNwYW46IkhUTUxTcGFuRWxlbWVudCIsc3R5bGU6IkhUTUxTdHlsZUVsZW1lbnQiLHRhYmxlOiJIVE1MVGFibGVFbGVtZW50Iix0Ym9keToiSFRNTFRhYmxlU2VjdGlvbkVsZW1lbnQiLHRlbXBsYXRlOiJIVE1MVGVtcGxhdGVFbGVtZW50Iix0ZXh0YXJlYToiSFRNTFRleHRBcmVhRWxlbWVudCIsdGhlYWQ6IkhUTUxUYWJsZVNlY3Rpb25FbGVtZW50Iix0aW1lOiJIVE1MVGltZUVsZW1lbnQiLHRpdGxlOiJIVE1MVGl0bGVFbGVtZW50Iix0cjoiSFRNTFRhYmxlUm93RWxlbWVudCIsdHJhY2s6IkhUTUxUcmFja0VsZW1lbnQiLHVsOiJIVE1MVUxpc3RFbGVtZW50Iix2aWRlbzoiSFRNTFZpZGVvRWxlbWVudCJ9KTtPYmplY3Qua2V5cyhjKS5mb3JFYWNoKGIpLE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGEud3JhcHBlcnMpLmZvckVhY2goZnVuY3Rpb24oYil7d2luZG93W2JdPWEud3JhcHBlcnNbYl19KX0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEsYyl7dmFyIGQsZSxmLGcsaD1hLmZpcnN0RWxlbWVudENoaWxkO2ZvcihlPVtdLGY9YS5zaGFkb3dSb290O2Y7KWUucHVzaChmKSxmPWYub2xkZXJTaGFkb3dSb290O2ZvcihnPWUubGVuZ3RoLTE7Zz49MDtnLS0paWYoZD1lW2ddLnF1ZXJ5U2VsZWN0b3IoYykpcmV0dXJuIGQ7Zm9yKDtoOyl7aWYoZD1iKGgsYykpcmV0dXJuIGQ7aD1oLm5leHRFbGVtZW50U2libGluZ31yZXR1cm4gbnVsbH1mdW5jdGlvbiBjKGEsYixkKXt2YXIgZSxmLGcsaCxpLGo9YS5maXJzdEVsZW1lbnRDaGlsZDtmb3IoZz1bXSxmPWEuc2hhZG93Um9vdDtmOylnLnB1c2goZiksZj1mLm9sZGVyU2hhZG93Um9vdDtmb3IoaD1nLmxlbmd0aC0xO2g+PTA7aC0tKWZvcihlPWdbaF0ucXVlcnlTZWxlY3RvckFsbChiKSxpPTA7aTxlLmxlbmd0aDtpKyspZC5wdXNoKGVbaV0pO2Zvcig7ajspYyhqLGIsZCksaj1qLm5leHRFbGVtZW50U2libGluZztyZXR1cm4gZH13aW5kb3cud3JhcD1TaGFkb3dET01Qb2x5ZmlsbC53cmFwSWZOZWVkZWQsd2luZG93LnVud3JhcD1TaGFkb3dET01Qb2x5ZmlsbC51bndyYXBJZk5lZWRlZCxPYmplY3QuZGVmaW5lUHJvcGVydHkoRWxlbWVudC5wcm90b3R5cGUsIndlYmtpdFNoYWRvd1Jvb3QiLE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoRWxlbWVudC5wcm90b3R5cGUsInNoYWRvd1Jvb3QiKSk7dmFyIGQ9RWxlbWVudC5wcm90b3R5cGUuY3JlYXRlU2hhZG93Um9vdDtFbGVtZW50LnByb3RvdHlwZS5jcmVhdGVTaGFkb3dSb290PWZ1bmN0aW9uKCl7dmFyIGE9ZC5jYWxsKHRoaXMpO3JldHVybiBDdXN0b21FbGVtZW50cy53YXRjaFNoYWRvdyh0aGlzKSxhfSxFbGVtZW50LnByb3RvdHlwZS53ZWJraXRDcmVhdGVTaGFkb3dSb290PUVsZW1lbnQucHJvdG90eXBlLmNyZWF0ZVNoYWRvd1Jvb3QsYS5xdWVyeUFsbFNoYWRvd3M9ZnVuY3Rpb24oYSxkLGUpe3JldHVybiBlP2MoYSxkLFtdKTpiKGEsZCl9fSh3aW5kb3cuUGxhdGZvcm0pLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSxiKXt2YXIgYz0iIjtyZXR1cm4gQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChhLGZ1bmN0aW9uKGEpe2MrPWEudGV4dENvbnRlbnQrIlxuXG4ifSksYnx8KGM9Yy5yZXBsYWNlKGwsIiIpKSxjfWZ1bmN0aW9uIGMoYSl7dmFyIGI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3R5bGUiKTtyZXR1cm4gYi50ZXh0Q29udGVudD1hLGJ9ZnVuY3Rpb24gZChhKXt2YXIgYj1jKGEpO2RvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoYik7dmFyIGQ9W107aWYoYi5zaGVldCl0cnl7ZD1iLnNoZWV0LmNzc1J1bGVzfWNhdGNoKGUpe31lbHNlIGNvbnNvbGUud2Fybigic2hlZXQgbm90IGZvdW5kIixiKTtyZXR1cm4gYi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGIpLGR9ZnVuY3Rpb24gZSgpe3YuaW5pdGlhbGl6ZWQ9ITAsZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh2KTt2YXIgYT12LmNvbnRlbnREb2N1bWVudCxiPWEuY3JlYXRlRWxlbWVudCgiYmFzZSIpO2IuaHJlZj1kb2N1bWVudC5iYXNlVVJJLGEuaGVhZC5hcHBlbmRDaGlsZChiKX1mdW5jdGlvbiBmKGEpe3YuaW5pdGlhbGl6ZWR8fGUoKSxkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHYpLGEodi5jb250ZW50RG9jdW1lbnQpLGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQodil9ZnVuY3Rpb24gZyhhLGIpe2lmKGIpe3ZhciBlO2lmKGEubWF0Y2goIkBpbXBvcnQiKSYmeCl7dmFyIGc9YyhhKTtmKGZ1bmN0aW9uKGEpe2EuaGVhZC5hcHBlbmRDaGlsZChnLmltcGwpLGU9Zy5zaGVldC5jc3NSdWxlcyxiKGUpfSl9ZWxzZSBlPWQoYSksYihlKX19ZnVuY3Rpb24gaChhKXthJiZqKCkuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoYSkpfWZ1bmN0aW9uIGkoYSxiKXt2YXIgZD1jKGEpO2Quc2V0QXR0cmlidXRlKGIsIiIpLGQuc2V0QXR0cmlidXRlKHosIiIpLGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoZCl9ZnVuY3Rpb24gaigpe3JldHVybiB3fHwodz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzdHlsZSIpLHcuc2V0QXR0cmlidXRlKHosIiIpLHdbel09ITApLHd9dmFyIGs9e3N0cmljdFN0eWxpbmc6ITEscmVnaXN0cnk6e30sc2hpbVN0eWxpbmc6ZnVuY3Rpb24oYSxjLGQpe3ZhciBlPXRoaXMucHJlcGFyZVJvb3QoYSxjLGQpLGY9dGhpcy5pc1R5cGVFeHRlbnNpb24oZCksZz10aGlzLm1ha2VTY29wZVNlbGVjdG9yKGMsZiksaD1iKGUsITApO2g9dGhpcy5zY29wZUNzc1RleHQoaCxnKSxhJiYoYS5zaGltbWVkU3R5bGU9aCksdGhpcy5hZGRDc3NUb0RvY3VtZW50KGgsYyl9LHNoaW1TdHlsZTpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLnNoaW1Dc3NUZXh0KGEudGV4dENvbnRlbnQsYil9LHNoaW1Dc3NUZXh0OmZ1bmN0aW9uKGEsYil7cmV0dXJuIGE9dGhpcy5pbnNlcnREaXJlY3RpdmVzKGEpLHRoaXMuc2NvcGVDc3NUZXh0KGEsYil9LG1ha2VTY29wZVNlbGVjdG9yOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGE/Yj8iW2lzPSIrYSsiXSI6YToiIn0saXNUeXBlRXh0ZW5zaW9uOmZ1bmN0aW9uKGEpe3JldHVybiBhJiZhLmluZGV4T2YoIi0iKTwwfSxwcmVwYXJlUm9vdDpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9dGhpcy5yZWdpc3RlclJvb3QoYSxiLGMpO3JldHVybiB0aGlzLnJlcGxhY2VUZXh0SW5TdHlsZXMoZC5yb290U3R5bGVzLHRoaXMuaW5zZXJ0RGlyZWN0aXZlcyksdGhpcy5yZW1vdmVTdHlsZXMoYSxkLnJvb3RTdHlsZXMpLHRoaXMuc3RyaWN0U3R5bGluZyYmdGhpcy5hcHBseVNjb3BlVG9Db250ZW50KGEsYiksZC5zY29wZVN0eWxlc30scmVtb3ZlU3R5bGVzOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjLGQ9MCxlPWIubGVuZ3RoO2U+ZCYmKGM9YltkXSk7ZCsrKWMucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChjKX0scmVnaXN0ZXJSb290OmZ1bmN0aW9uKGEsYixjKXt2YXIgZD10aGlzLnJlZ2lzdHJ5W2JdPXtyb290OmEsbmFtZTpiLGV4dGVuZHNOYW1lOmN9LGU9dGhpcy5maW5kU3R5bGVzKGEpO2Qucm9vdFN0eWxlcz1lLGQuc2NvcGVTdHlsZXM9ZC5yb290U3R5bGVzO3ZhciBmPXRoaXMucmVnaXN0cnlbZC5leHRlbmRzTmFtZV07cmV0dXJuIGYmJihkLnNjb3BlU3R5bGVzPWYuc2NvcGVTdHlsZXMuY29uY2F0KGQuc2NvcGVTdHlsZXMpKSxkfSxmaW5kU3R5bGVzOmZ1bmN0aW9uKGEpe2lmKCFhKXJldHVybltdO3ZhciBiPWEucXVlcnlTZWxlY3RvckFsbCgic3R5bGUiKTtyZXR1cm4gQXJyYXkucHJvdG90eXBlLmZpbHRlci5jYWxsKGIsZnVuY3Rpb24oYSl7cmV0dXJuIWEuaGFzQXR0cmlidXRlKEEpfSl9LGFwcGx5U2NvcGVUb0NvbnRlbnQ6ZnVuY3Rpb24oYSxiKXthJiYoQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChhLnF1ZXJ5U2VsZWN0b3JBbGwoIioiKSxmdW5jdGlvbihhKXthLnNldEF0dHJpYnV0ZShiLCIiKX0pLEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoYS5xdWVyeVNlbGVjdG9yQWxsKCJ0ZW1wbGF0ZSIpLGZ1bmN0aW9uKGEpe3RoaXMuYXBwbHlTY29wZVRvQ29udGVudChhLmNvbnRlbnQsYil9LHRoaXMpKX0saW5zZXJ0RGlyZWN0aXZlczpmdW5jdGlvbihhKXtyZXR1cm4gYT10aGlzLmluc2VydFBvbHlmaWxsRGlyZWN0aXZlc0luQ3NzVGV4dChhKSx0aGlzLmluc2VydFBvbHlmaWxsUnVsZXNJbkNzc1RleHQoYSl9LGluc2VydFBvbHlmaWxsRGlyZWN0aXZlc0luQ3NzVGV4dDpmdW5jdGlvbihhKXtyZXR1cm4gYT1hLnJlcGxhY2UobSxmdW5jdGlvbihhLGIpe3JldHVybiBiLnNsaWNlKDAsLTIpKyJ7In0pLGEucmVwbGFjZShuLGZ1bmN0aW9uKGEsYil7cmV0dXJuIGIrIiB7In0pfSxpbnNlcnRQb2x5ZmlsbFJ1bGVzSW5Dc3NUZXh0OmZ1bmN0aW9uKGEpe3JldHVybiBhPWEucmVwbGFjZShvLGZ1bmN0aW9uKGEsYil7cmV0dXJuIGIuc2xpY2UoMCwtMSl9KSxhLnJlcGxhY2UocCxmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1hLnJlcGxhY2UoYiwiIikucmVwbGFjZShjLCIiKTtyZXR1cm4gZCtlfSl9LHNjb3BlQ3NzVGV4dDpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuZXh0cmFjdFVuc2NvcGVkUnVsZXNGcm9tQ3NzVGV4dChhKTtpZihhPXRoaXMuaW5zZXJ0UG9seWZpbGxIb3N0SW5Dc3NUZXh0KGEpLGE9dGhpcy5jb252ZXJ0Q29sb25Ib3N0KGEpLGE9dGhpcy5jb252ZXJ0Q29sb25Ib3N0Q29udGV4dChhKSxhPXRoaXMuY29udmVydFNoYWRvd0RPTVNlbGVjdG9ycyhhKSxiKXt2YXIgYSxkPXRoaXM7ZyhhLGZ1bmN0aW9uKGMpe2E9ZC5zY29wZVJ1bGVzKGMsYil9KX1yZXR1cm4gYT1hKyJcbiIrYyxhLnRyaW0oKX0sZXh0cmFjdFVuc2NvcGVkUnVsZXNGcm9tQ3NzVGV4dDpmdW5jdGlvbihhKXtmb3IodmFyIGIsYz0iIjtiPXEuZXhlYyhhKTspYys9YlsxXS5zbGljZSgwLC0xKSsiXG5cbiI7Zm9yKDtiPXIuZXhlYyhhKTspYys9YlswXS5yZXBsYWNlKGJbMl0sIiIpLnJlcGxhY2UoYlsxXSxiWzNdKSsiXG5cbiI7cmV0dXJuIGN9LGNvbnZlcnRDb2xvbkhvc3Q6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuY29udmVydENvbG9uUnVsZShhLGNzc0NvbG9uSG9zdFJlLHRoaXMuY29sb25Ib3N0UGFydFJlcGxhY2VyKX0sY29udmVydENvbG9uSG9zdENvbnRleHQ6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuY29udmVydENvbG9uUnVsZShhLGNzc0NvbG9uSG9zdENvbnRleHRSZSx0aGlzLmNvbG9uSG9zdENvbnRleHRQYXJ0UmVwbGFjZXIpfSxjb252ZXJ0Q29sb25SdWxlOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gYS5yZXBsYWNlKGIsZnVuY3Rpb24oYSxiLGQsZSl7aWYoYj1wb2x5ZmlsbEhvc3ROb0NvbWJpbmF0b3IsZCl7Zm9yKHZhciBmLGc9ZC5zcGxpdCgiLCIpLGg9W10saT0wLGo9Zy5sZW5ndGg7aj5pJiYoZj1nW2ldKTtpKyspZj1mLnRyaW0oKSxoLnB1c2goYyhiLGYsZSkpO3JldHVybiBoLmpvaW4oIiwiKX1yZXR1cm4gYitlfSl9LGNvbG9uSG9zdENvbnRleHRQYXJ0UmVwbGFjZXI6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBiLm1hdGNoKHMpP3RoaXMuY29sb25Ib3N0UGFydFJlcGxhY2VyKGEsYixjKTphK2IrYysiLCAiK2IrIiAiK2ErY30sY29sb25Ib3N0UGFydFJlcGxhY2VyOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gYStiLnJlcGxhY2UocywiIikrY30sY29udmVydFNoYWRvd0RPTVNlbGVjdG9yczpmdW5jdGlvbihhKXtmb3IodmFyIGI9MDtiPHNoYWRvd0RPTVNlbGVjdG9yc1JlLmxlbmd0aDtiKyspYT1hLnJlcGxhY2Uoc2hhZG93RE9NU2VsZWN0b3JzUmVbYl0sIiAiKTtyZXR1cm4gYX0sc2NvcGVSdWxlczpmdW5jdGlvbihhLGIpe3ZhciBjPSIiO3JldHVybiBhJiZBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGEsZnVuY3Rpb24oYSl7aWYoYS5zZWxlY3RvclRleHQmJmEuc3R5bGUmJnZvaWQgMCE9PWEuc3R5bGUuY3NzVGV4dCljKz10aGlzLnNjb3BlU2VsZWN0b3IoYS5zZWxlY3RvclRleHQsYix0aGlzLnN0cmljdFN0eWxpbmcpKyIge1xuCSIsYys9dGhpcy5wcm9wZXJ0aWVzRnJvbVJ1bGUoYSkrIlxufVxuXG4iO2Vsc2UgaWYoYS50eXBlPT09Q1NTUnVsZS5NRURJQV9SVUxFKWMrPSJAbWVkaWEgIithLm1lZGlhLm1lZGlhVGV4dCsiIHtcbiIsYys9dGhpcy5zY29wZVJ1bGVzKGEuY3NzUnVsZXMsYiksYys9IlxufVxuXG4iO2Vsc2UgdHJ5e2EuY3NzVGV4dCYmKGMrPWEuY3NzVGV4dCsiXG5cbiIpfWNhdGNoKGQpe319LHRoaXMpLGN9LHNjb3BlU2VsZWN0b3I6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPVtdLGU9YS5zcGxpdCgiLCIpO3JldHVybiBlLmZvckVhY2goZnVuY3Rpb24oYSl7YT1hLnRyaW0oKSx0aGlzLnNlbGVjdG9yTmVlZHNTY29waW5nKGEsYikmJihhPWMmJiFhLm1hdGNoKHBvbHlmaWxsSG9zdE5vQ29tYmluYXRvcik/dGhpcy5hcHBseVN0cmljdFNlbGVjdG9yU2NvcGUoYSxiKTp0aGlzLmFwcGx5U2VsZWN0b3JTY29wZShhLGIpKSxkLnB1c2goYSl9LHRoaXMpLGQuam9pbigiLCAiKX0sc2VsZWN0b3JOZWVkc1Njb3Bpbmc6ZnVuY3Rpb24oYSxiKXtpZihBcnJheS5pc0FycmF5KGIpKXJldHVybiEwO3ZhciBjPXRoaXMubWFrZVNjb3BlTWF0Y2hlcihiKTtyZXR1cm4hYS5tYXRjaChjKX0sbWFrZVNjb3BlTWF0Y2hlcjpmdW5jdGlvbihhKXtyZXR1cm4gYT1hLnJlcGxhY2UoL1xbL2csIlxcWyIpLnJlcGxhY2UoL1xbL2csIlxcXSIpLG5ldyBSZWdFeHAoIl4oIithKyIpIitzZWxlY3RvclJlU3VmZml4LCJtIil9LGFwcGx5U2VsZWN0b3JTY29wZTpmdW5jdGlvbihhLGIpe3JldHVybiBBcnJheS5pc0FycmF5KGIpP3RoaXMuYXBwbHlTZWxlY3RvclNjb3BlTGlzdChhLGIpOnRoaXMuYXBwbHlTaW1wbGVTZWxlY3RvclNjb3BlKGEsYil9LGFwcGx5U2VsZWN0b3JTY29wZUxpc3Q6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGMsZD1bXSxlPTA7Yz1iW2VdO2UrKylkLnB1c2godGhpcy5hcHBseVNpbXBsZVNlbGVjdG9yU2NvcGUoYSxjKSk7cmV0dXJuIGQuam9pbigiLCAiKX0sYXBwbHlTaW1wbGVTZWxlY3RvclNjb3BlOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGEubWF0Y2gocG9seWZpbGxIb3N0UmUpPyhhPWEucmVwbGFjZShwb2x5ZmlsbEhvc3ROb0NvbWJpbmF0b3IsYiksYS5yZXBsYWNlKHBvbHlmaWxsSG9zdFJlLGIrIiAiKSk6YisiICIrYX0sYXBwbHlTdHJpY3RTZWxlY3RvclNjb3BlOmZ1bmN0aW9uKGEsYil7Yj1iLnJlcGxhY2UoL1xbaXM9KFteXF1dKilcXS9nLCIkMSIpO3ZhciBjPVsiICIsIj4iLCIrIiwifiJdLGQ9YSxlPSJbIitiKyJdIjtyZXR1cm4gYy5mb3JFYWNoKGZ1bmN0aW9uKGEpe3ZhciBiPWQuc3BsaXQoYSk7ZD1iLm1hcChmdW5jdGlvbihhKXt2YXIgYj1hLnRyaW0oKS5yZXBsYWNlKHBvbHlmaWxsSG9zdFJlLCIiKTtyZXR1cm4gYiYmYy5pbmRleE9mKGIpPDAmJmIuaW5kZXhPZihlKTwwJiYoYT1iLnJlcGxhY2UoLyhbXjpdKikoOiopKC4qKS8sIiQxIitlKyIkMiQzIikpLGF9KS5qb2luKGEpfSksZH0saW5zZXJ0UG9seWZpbGxIb3N0SW5Dc3NUZXh0OmZ1bmN0aW9uKGEpe3JldHVybiBhLnJlcGxhY2UoY29sb25Ib3N0Q29udGV4dFJlLHQpLnJlcGxhY2UoY29sb25Ib3N0UmUscyl9LHByb3BlcnRpZXNGcm9tUnVsZTpmdW5jdGlvbihhKXt2YXIgYj1hLnN0eWxlLmNzc1RleHQ7YS5zdHlsZS5jb250ZW50JiYhYS5zdHlsZS5jb250ZW50Lm1hdGNoKC9bJyJdK3xhdHRyLykmJihiPWIucmVwbGFjZSgvY29udGVudDpbXjtdKjsvZywiY29udGVudDogJyIrYS5zdHlsZS5jb250ZW50KyInOyIpKTt2YXIgYz1hLnN0eWxlO2Zvcih2YXIgZCBpbiBjKSJpbml0aWFsIj09PWNbZF0mJihiKz1kKyI6IGluaXRpYWw7ICIpO3JldHVybiBifSxyZXBsYWNlVGV4dEluU3R5bGVzOmZ1bmN0aW9uKGEsYil7YSYmYiYmKGEgaW5zdGFuY2VvZiBBcnJheXx8KGE9W2FdKSxBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGEsZnVuY3Rpb24oYSl7YS50ZXh0Q29udGVudD1iLmNhbGwodGhpcyxhLnRleHRDb250ZW50KX0sdGhpcykpfSxhZGRDc3NUb0RvY3VtZW50OmZ1bmN0aW9uKGEsYil7YS5tYXRjaCgiQGltcG9ydCIpP2koYSxiKTpoKGEpfX0sbD0vXC9cKlteKl0qXCorKFteLypdW14qXSpcKispKlwvL2dpbSxtPS9cL1wqXHMqQHBvbHlmaWxsIChbXipdKlwqKyhbXi8qXVteKl0qXCorKSpcLykoW157XSo/KXsvZ2ltLG49L3BvbHlmaWxsLW5leHQtc2VsZWN0b3JbXn1dKmNvbnRlbnRcOltcc10qWyd8Il0oW14nIl0qKVsnfCJdW159XSp9KFtee10qPyl7L2dpbSxvPS9cL1wqXHNAcG9seWZpbGwtcnVsZShbXipdKlwqKyhbXi8qXVteKl0qXCorKSopXC8vZ2ltLHA9Lyhwb2x5ZmlsbC1ydWxlKVtefV0qKGNvbnRlbnRcOltcc10qWyd8Il0oW14nIl0qKVsnfCJdW147XSo7KVtefV0qfS9naW0scT0vXC9cKlxzQHBvbHlmaWxsLXVuc2NvcGVkLXJ1bGUoW14qXSpcKisoW14vKl1bXipdKlwqKykqKVwvL2dpbSxyPS8ocG9seWZpbGwtdW5zY29wZWQtcnVsZSlbXn1dKihjb250ZW50XDpbXHNdKlsnfCJdKFteJyJdKilbJ3wiXVteO10qOylbXn1dKn0vZ2ltLHM9Ii1zaGFkb3djc3Nob3N0Iix0PSItc2hhZG93Y3NzY29udGV4dCIsdT0iKSg/OlxcKCgoPzpcXChbXikoXSpcXCl8W14pKF0qKSs/KVxcKSk/KFteLHtdKikiO2Nzc0NvbG9uSG9zdFJlPW5ldyBSZWdFeHAoIigiK3MrdSwiZ2ltIiksY3NzQ29sb25Ib3N0Q29udGV4dFJlPW5ldyBSZWdFeHAoIigiK3QrdSwiZ2ltIiksc2VsZWN0b3JSZVN1ZmZpeD0iKFs+XFxzfitbLix7Ol1bXFxzXFxTXSopPyQiLGNvbG9uSG9zdFJlPS9cOmhvc3QvZ2ltLGNvbG9uSG9zdENvbnRleHRSZT0vXDpob3N0LWNvbnRleHQvZ2ltLHBvbHlmaWxsSG9zdE5vQ29tYmluYXRvcj1zKyItbm8tY29tYmluYXRvciIscG9seWZpbGxIb3N0UmU9bmV3IFJlZ0V4cChzLCJnaW0iKSxwb2x5ZmlsbEhvc3RDb250ZXh0UmU9bmV3IFJlZ0V4cCh0LCJnaW0iKSxzaGFkb3dET01TZWxlY3RvcnNSZT1bL1xeXF4vZywvXF4vZywvXC9zaGFkb3dcLy9nLC9cL3NoYWRvdy1kZWVwXC8vZywvOjpzaGFkb3cvZywvXC9kZWVwXC8vZywvOjpjb250ZW50L2ddO3ZhciB2PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImlmcmFtZSIpO3Yuc3R5bGUuZGlzcGxheT0ibm9uZSI7dmFyIHcseD1uYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKCJDaHJvbWUiKSx5PSJzaGltLXNoYWRvd2RvbSIsej0ic2hpbS1zaGFkb3dkb20tY3NzIixBPSJuby1zaGltIjtpZih3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpe2goInN0eWxlIHsgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyB9XG4iKTt2YXIgQj13cmFwKGRvY3VtZW50KSxDPUIucXVlcnlTZWxlY3RvcigiaGVhZCIpO0MuaW5zZXJ0QmVmb3JlKGooKSxDLmNoaWxkTm9kZXNbMF0pLGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoIkRPTUNvbnRlbnRMb2FkZWQiLGZ1bmN0aW9uKCl7dmFyIGI9YS51cmxSZXNvbHZlcjtpZih3aW5kb3cuSFRNTEltcG9ydHMmJiFIVE1MSW1wb3J0cy51c2VOYXRpdmUpe3ZhciBjPSJsaW5rW3JlbD1zdHlsZXNoZWV0XVsiK3krIl0iLGQ9InN0eWxlWyIreSsiXSI7SFRNTEltcG9ydHMuaW1wb3J0ZXIuZG9jdW1lbnRQcmVsb2FkU2VsZWN0b3JzKz0iLCIrYyxIVE1MSW1wb3J0cy5pbXBvcnRlci5pbXBvcnRzUHJlbG9hZFNlbGVjdG9ycys9IiwiK2MsSFRNTEltcG9ydHMucGFyc2VyLmRvY3VtZW50U2VsZWN0b3JzPVtIVE1MSW1wb3J0cy5wYXJzZXIuZG9jdW1lbnRTZWxlY3RvcnMsYyxkXS5qb2luKCIsIik7dmFyIGU9SFRNTEltcG9ydHMucGFyc2VyLnBhcnNlR2VuZXJpYztIVE1MSW1wb3J0cy5wYXJzZXIucGFyc2VHZW5lcmljPWZ1bmN0aW9uKGEpe2lmKCFhW3pdKXt2YXIgYz1hLl9faW1wb3J0RWxlbWVudHx8YTtpZighYy5oYXNBdHRyaWJ1dGUoeSkpcmV0dXJuIHZvaWQgZS5jYWxsKHRoaXMsYSk7YS5fX3Jlc291cmNlPyhjPWEub3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzdHlsZSIpLGMudGV4dENvbnRlbnQ9Yi5yZXNvbHZlQ3NzVGV4dChhLl9fcmVzb3VyY2UsYS5ocmVmKSk6Yi5yZXNvbHZlU3R5bGUoYyksYy50ZXh0Q29udGVudD1rLnNoaW1TdHlsZShjKSxjLnJlbW92ZUF0dHJpYnV0ZSh5LCIiKSxjLnNldEF0dHJpYnV0ZSh6LCIiKSxjW3pdPSEwLGMucGFyZW50Tm9kZSE9PUMmJihhLnBhcmVudE5vZGU9PT1DP0MucmVwbGFjZUNoaWxkKGMsYSk6Qy5hcHBlbmRDaGlsZChjKSksYy5fX2ltcG9ydFBhcnNlZD0hMCx0aGlzLm1hcmtQYXJzaW5nQ29tcGxldGUoYSksdGhpcy5wYXJzZU5leHQoKX19O3ZhciBmPUhUTUxJbXBvcnRzLnBhcnNlci5oYXNSZXNvdXJjZTtIVE1MSW1wb3J0cy5wYXJzZXIuaGFzUmVzb3VyY2U9ZnVuY3Rpb24oYSl7cmV0dXJuImxpbmsiPT09YS5sb2NhbE5hbWUmJiJzdHlsZXNoZWV0Ij09PWEucmVsJiZhLmhhc0F0dHJpYnV0ZSh5KT9hLl9fcmVzb3VyY2U6Zi5jYWxsKHRoaXMsYSl9fX0pfWEuU2hhZG93Q1NTPWt9KHdpbmRvdy5QbGF0Zm9ybSkpOiFmdW5jdGlvbigpe3dpbmRvdy53cmFwPXdpbmRvdy51bndyYXA9ZnVuY3Rpb24oYSl7cmV0dXJuIGF9LGFkZEV2ZW50TGlzdGVuZXIoIkRPTUNvbnRlbnRMb2FkZWQiLGZ1bmN0aW9uKCl7aWYoQ3VzdG9tRWxlbWVudHMudXNlTmF0aXZlPT09ITEpe3ZhciBhPUVsZW1lbnQucHJvdG90eXBlLmNyZWF0ZVNoYWRvd1Jvb3Q7RWxlbWVudC5wcm90b3R5cGUuY3JlYXRlU2hhZG93Um9vdD1mdW5jdGlvbigpe3ZhciBiPWEuY2FsbCh0aGlzKTtyZXR1cm4gQ3VzdG9tRWxlbWVudHMud2F0Y2hTaGFkb3codGhpcyksYn19fSksUGxhdGZvcm0udGVtcGxhdGVDb250ZW50PWZ1bmN0aW9uKGEpe2lmKHdpbmRvdy5IVE1MVGVtcGxhdGVFbGVtZW50JiZIVE1MVGVtcGxhdGVFbGVtZW50LmJvb3RzdHJhcCYmSFRNTFRlbXBsYXRlRWxlbWVudC5ib290c3RyYXAoYSksIWEuY29udGVudCYmIWEuX2NvbnRlbnQpe2Zvcih2YXIgYj1kb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7YS5maXJzdENoaWxkOyliLmFwcGVuZENoaWxkKGEuZmlyc3RDaGlsZCk7YS5fY29udGVudD1ifXJldHVybiBhLmNvbnRlbnR8fGEuX2NvbnRlbnR9fSh3aW5kb3cuUGxhdGZvcm0pLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe3JldHVybiB2b2lkIDAhPT1tW2FdfWZ1bmN0aW9uIGMoKXtoLmNhbGwodGhpcyksdGhpcy5faXNJbnZhbGlkPSEwfWZ1bmN0aW9uIGQoYSl7cmV0dXJuIiI9PWEmJmMuY2FsbCh0aGlzKSxhLnRvTG93ZXJDYXNlKCl9ZnVuY3Rpb24gZShhKXt2YXIgYj1hLmNoYXJDb2RlQXQoMCk7cmV0dXJuIGI+MzImJjEyNz5iJiYtMT09WzM0LDM1LDYwLDYyLDYzLDk2XS5pbmRleE9mKGIpP2E6ZW5jb2RlVVJJQ29tcG9uZW50KGEpfWZ1bmN0aW9uIGYoYSl7dmFyIGI9YS5jaGFyQ29kZUF0KDApO3JldHVybiBiPjMyJiYxMjc+YiYmLTE9PVszNCwzNSw2MCw2Miw5Nl0uaW5kZXhPZihiKT9hOmVuY29kZVVSSUNvbXBvbmVudChhKX1mdW5jdGlvbiBnKGEsZyxoKXtmdW5jdGlvbiBpKGEpe3QucHVzaChhKX12YXIgaj1nfHwic2NoZW1lIHN0YXJ0IixrPTAsbD0iIixyPSExLHM9ITEsdD1bXTthOmZvcig7KGFbay0xXSE9b3x8MD09aykmJiF0aGlzLl9pc0ludmFsaWQ7KXt2YXIgdT1hW2tdO3N3aXRjaChqKXtjYXNlInNjaGVtZSBzdGFydCI6aWYoIXV8fCFwLnRlc3QodSkpe2lmKGcpe2koIkludmFsaWQgc2NoZW1lLiIpO2JyZWFrIGF9bD0iIixqPSJubyBzY2hlbWUiO2NvbnRpbnVlfWwrPXUudG9Mb3dlckNhc2UoKSxqPSJzY2hlbWUiO2JyZWFrO2Nhc2Uic2NoZW1lIjppZih1JiZxLnRlc3QodSkpbCs9dS50b0xvd2VyQ2FzZSgpO2Vsc2V7aWYoIjoiIT11KXtpZihnKXtpZihvPT11KWJyZWFrIGE7aSgiQ29kZSBwb2ludCBub3QgYWxsb3dlZCBpbiBzY2hlbWU6ICIrdSk7YnJlYWsgYX1sPSIiLGs9MCxqPSJubyBzY2hlbWUiO2NvbnRpbnVlfWlmKHRoaXMuX3NjaGVtZT1sLGw9IiIsZylicmVhayBhO2IodGhpcy5fc2NoZW1lKSYmKHRoaXMuX2lzUmVsYXRpdmU9ITApLGo9ImZpbGUiPT10aGlzLl9zY2hlbWU/InJlbGF0aXZlIjp0aGlzLl9pc1JlbGF0aXZlJiZoJiZoLl9zY2hlbWU9PXRoaXMuX3NjaGVtZT8icmVsYXRpdmUgb3IgYXV0aG9yaXR5Ijp0aGlzLl9pc1JlbGF0aXZlPyJhdXRob3JpdHkgZmlyc3Qgc2xhc2giOiJzY2hlbWUgZGF0YSJ9YnJlYWs7Y2FzZSJzY2hlbWUgZGF0YSI6Ij8iPT11PyhxdWVyeT0iPyIsaj0icXVlcnkiKToiIyI9PXU/KHRoaXMuX2ZyYWdtZW50PSIjIixqPSJmcmFnbWVudCIpOm8hPXUmJiIJIiE9dSYmIlxuIiE9dSYmIlxyIiE9dSYmKHRoaXMuX3NjaGVtZURhdGErPWUodSkpO2JyZWFrO2Nhc2Uibm8gc2NoZW1lIjppZihoJiZiKGguX3NjaGVtZSkpe2o9InJlbGF0aXZlIjtjb250aW51ZX1pKCJNaXNzaW5nIHNjaGVtZS4iKSxjLmNhbGwodGhpcyk7YnJlYWs7Y2FzZSJyZWxhdGl2ZSBvciBhdXRob3JpdHkiOmlmKCIvIiE9dXx8Ii8iIT1hW2srMV0pe2koIkV4cGVjdGVkIC8sIGdvdDogIit1KSxqPSJyZWxhdGl2ZSI7Y29udGludWV9aj0iYXV0aG9yaXR5IGlnbm9yZSBzbGFzaGVzIjticmVhaztjYXNlInJlbGF0aXZlIjppZih0aGlzLl9pc1JlbGF0aXZlPSEwLCJmaWxlIiE9dGhpcy5fc2NoZW1lJiYodGhpcy5fc2NoZW1lPWguX3NjaGVtZSksbz09dSl7dGhpcy5faG9zdD1oLl9ob3N0LHRoaXMuX3BvcnQ9aC5fcG9ydCx0aGlzLl9wYXRoPWguX3BhdGguc2xpY2UoKSx0aGlzLl9xdWVyeT1oLl9xdWVyeTsKYnJlYWsgYX1pZigiLyI9PXV8fCJcXCI9PXUpIlxcIj09dSYmaSgiXFwgaXMgYW4gaW52YWxpZCBjb2RlIHBvaW50LiIpLGo9InJlbGF0aXZlIHNsYXNoIjtlbHNlIGlmKCI/Ij09dSl0aGlzLl9ob3N0PWguX2hvc3QsdGhpcy5fcG9ydD1oLl9wb3J0LHRoaXMuX3BhdGg9aC5fcGF0aC5zbGljZSgpLHRoaXMuX3F1ZXJ5PSI/IixqPSJxdWVyeSI7ZWxzZXtpZigiIyIhPXUpe3ZhciB2PWFbaysxXSx3PWFbaysyXTsoImZpbGUiIT10aGlzLl9zY2hlbWV8fCFwLnRlc3QodSl8fCI6IiE9diYmInwiIT12fHxvIT13JiYiLyIhPXcmJiJcXCIhPXcmJiI/IiE9dyYmIiMiIT13KSYmKHRoaXMuX2hvc3Q9aC5faG9zdCx0aGlzLl9wb3J0PWguX3BvcnQsdGhpcy5fcGF0aD1oLl9wYXRoLnNsaWNlKCksdGhpcy5fcGF0aC5wb3AoKSksaj0icmVsYXRpdmUgcGF0aCI7Y29udGludWV9dGhpcy5faG9zdD1oLl9ob3N0LHRoaXMuX3BvcnQ9aC5fcG9ydCx0aGlzLl9wYXRoPWguX3BhdGguc2xpY2UoKSx0aGlzLl9xdWVyeT1oLl9xdWVyeSx0aGlzLl9mcmFnbWVudD0iIyIsaj0iZnJhZ21lbnQifWJyZWFrO2Nhc2UicmVsYXRpdmUgc2xhc2giOmlmKCIvIiE9dSYmIlxcIiE9dSl7ImZpbGUiIT10aGlzLl9zY2hlbWUmJih0aGlzLl9ob3N0PWguX2hvc3QsdGhpcy5fcG9ydD1oLl9wb3J0KSxqPSJyZWxhdGl2ZSBwYXRoIjtjb250aW51ZX0iXFwiPT11JiZpKCJcXCBpcyBhbiBpbnZhbGlkIGNvZGUgcG9pbnQuIiksaj0iZmlsZSI9PXRoaXMuX3NjaGVtZT8iZmlsZSBob3N0IjoiYXV0aG9yaXR5IGlnbm9yZSBzbGFzaGVzIjticmVhaztjYXNlImF1dGhvcml0eSBmaXJzdCBzbGFzaCI6aWYoIi8iIT11KXtpKCJFeHBlY3RlZCAnLycsIGdvdDogIit1KSxqPSJhdXRob3JpdHkgaWdub3JlIHNsYXNoZXMiO2NvbnRpbnVlfWo9ImF1dGhvcml0eSBzZWNvbmQgc2xhc2giO2JyZWFrO2Nhc2UiYXV0aG9yaXR5IHNlY29uZCBzbGFzaCI6aWYoaj0iYXV0aG9yaXR5IGlnbm9yZSBzbGFzaGVzIiwiLyIhPXUpe2koIkV4cGVjdGVkICcvJywgZ290OiAiK3UpO2NvbnRpbnVlfWJyZWFrO2Nhc2UiYXV0aG9yaXR5IGlnbm9yZSBzbGFzaGVzIjppZigiLyIhPXUmJiJcXCIhPXUpe2o9ImF1dGhvcml0eSI7Y29udGludWV9aSgiRXhwZWN0ZWQgYXV0aG9yaXR5LCBnb3Q6ICIrdSk7YnJlYWs7Y2FzZSJhdXRob3JpdHkiOmlmKCJAIj09dSl7ciYmKGkoIkAgYWxyZWFkeSBzZWVuLiIpLGwrPSIlNDAiKSxyPSEwO2Zvcih2YXIgeD0wO3g8bC5sZW5ndGg7eCsrKXt2YXIgeT1sW3hdO2lmKCIJIiE9eSYmIlxuIiE9eSYmIlxyIiE9eSlpZigiOiIhPXl8fG51bGwhPT10aGlzLl9wYXNzd29yZCl7dmFyIHo9ZSh5KTtudWxsIT09dGhpcy5fcGFzc3dvcmQ/dGhpcy5fcGFzc3dvcmQrPXo6dGhpcy5fdXNlcm5hbWUrPXp9ZWxzZSB0aGlzLl9wYXNzd29yZD0iIjtlbHNlIGkoIkludmFsaWQgd2hpdGVzcGFjZSBpbiBhdXRob3JpdHkuIil9bD0iIn1lbHNle2lmKG89PXV8fCIvIj09dXx8IlxcIj09dXx8Ij8iPT11fHwiIyI9PXUpe2stPWwubGVuZ3RoLGw9IiIsaj0iaG9zdCI7Y29udGludWV9bCs9dX1icmVhaztjYXNlImZpbGUgaG9zdCI6aWYobz09dXx8Ii8iPT11fHwiXFwiPT11fHwiPyI9PXV8fCIjIj09dSl7MiE9bC5sZW5ndGh8fCFwLnRlc3QobFswXSl8fCI6IiE9bFsxXSYmInwiIT1sWzFdPzA9PWwubGVuZ3RoP2o9InJlbGF0aXZlIHBhdGggc3RhcnQiOih0aGlzLl9ob3N0PWQuY2FsbCh0aGlzLGwpLGw9IiIsaj0icmVsYXRpdmUgcGF0aCBzdGFydCIpOmo9InJlbGF0aXZlIHBhdGgiO2NvbnRpbnVlfSIJIj09dXx8IlxuIj09dXx8IlxyIj09dT9pKCJJbnZhbGlkIHdoaXRlc3BhY2UgaW4gZmlsZSBob3N0LiIpOmwrPXU7YnJlYWs7Y2FzZSJob3N0IjpjYXNlImhvc3RuYW1lIjppZigiOiIhPXV8fHMpe2lmKG89PXV8fCIvIj09dXx8IlxcIj09dXx8Ij8iPT11fHwiIyI9PXUpe2lmKHRoaXMuX2hvc3Q9ZC5jYWxsKHRoaXMsbCksbD0iIixqPSJyZWxhdGl2ZSBwYXRoIHN0YXJ0IixnKWJyZWFrIGE7Y29udGludWV9IgkiIT11JiYiXG4iIT11JiYiXHIiIT11PygiWyI9PXU/cz0hMDoiXSI9PXUmJihzPSExKSxsKz11KTppKCJJbnZhbGlkIGNvZGUgcG9pbnQgaW4gaG9zdC9ob3N0bmFtZTogIit1KX1lbHNlIGlmKHRoaXMuX2hvc3Q9ZC5jYWxsKHRoaXMsbCksbD0iIixqPSJwb3J0IiwiaG9zdG5hbWUiPT1nKWJyZWFrIGE7YnJlYWs7Y2FzZSJwb3J0IjppZigvWzAtOV0vLnRlc3QodSkpbCs9dTtlbHNle2lmKG89PXV8fCIvIj09dXx8IlxcIj09dXx8Ij8iPT11fHwiIyI9PXV8fGcpe2lmKCIiIT1sKXt2YXIgQT1wYXJzZUludChsLDEwKTtBIT1tW3RoaXMuX3NjaGVtZV0mJih0aGlzLl9wb3J0PUErIiIpLGw9IiJ9aWYoZylicmVhayBhO2o9InJlbGF0aXZlIHBhdGggc3RhcnQiO2NvbnRpbnVlfSIJIj09dXx8IlxuIj09dXx8IlxyIj09dT9pKCJJbnZhbGlkIGNvZGUgcG9pbnQgaW4gcG9ydDogIit1KTpjLmNhbGwodGhpcyl9YnJlYWs7Y2FzZSJyZWxhdGl2ZSBwYXRoIHN0YXJ0IjppZigiXFwiPT11JiZpKCInXFwnIG5vdCBhbGxvd2VkIGluIHBhdGguIiksaj0icmVsYXRpdmUgcGF0aCIsIi8iIT11JiYiXFwiIT11KWNvbnRpbnVlO2JyZWFrO2Nhc2UicmVsYXRpdmUgcGF0aCI6aWYobyE9dSYmIi8iIT11JiYiXFwiIT11JiYoZ3x8Ij8iIT11JiYiIyIhPXUpKSIJIiE9dSYmIlxuIiE9dSYmIlxyIiE9dSYmKGwrPWUodSkpO2Vsc2V7IlxcIj09dSYmaSgiXFwgbm90IGFsbG93ZWQgaW4gcmVsYXRpdmUgcGF0aC4iKTt2YXIgQjsoQj1uW2wudG9Mb3dlckNhc2UoKV0pJiYobD1CKSwiLi4iPT1sPyh0aGlzLl9wYXRoLnBvcCgpLCIvIiE9dSYmIlxcIiE9dSYmdGhpcy5fcGF0aC5wdXNoKCIiKSk6Ii4iPT1sJiYiLyIhPXUmJiJcXCIhPXU/dGhpcy5fcGF0aC5wdXNoKCIiKToiLiIhPWwmJigiZmlsZSI9PXRoaXMuX3NjaGVtZSYmMD09dGhpcy5fcGF0aC5sZW5ndGgmJjI9PWwubGVuZ3RoJiZwLnRlc3QobFswXSkmJiJ8Ij09bFsxXSYmKGw9bFswXSsiOiIpLHRoaXMuX3BhdGgucHVzaChsKSksbD0iIiwiPyI9PXU/KHRoaXMuX3F1ZXJ5PSI/IixqPSJxdWVyeSIpOiIjIj09dSYmKHRoaXMuX2ZyYWdtZW50PSIjIixqPSJmcmFnbWVudCIpfWJyZWFrO2Nhc2UicXVlcnkiOmd8fCIjIiE9dT9vIT11JiYiCSIhPXUmJiJcbiIhPXUmJiJcciIhPXUmJih0aGlzLl9xdWVyeSs9Zih1KSk6KHRoaXMuX2ZyYWdtZW50PSIjIixqPSJmcmFnbWVudCIpO2JyZWFrO2Nhc2UiZnJhZ21lbnQiOm8hPXUmJiIJIiE9dSYmIlxuIiE9dSYmIlxyIiE9dSYmKHRoaXMuX2ZyYWdtZW50Kz11KX1rKyt9fWZ1bmN0aW9uIGgoKXt0aGlzLl9zY2hlbWU9IiIsdGhpcy5fc2NoZW1lRGF0YT0iIix0aGlzLl91c2VybmFtZT0iIix0aGlzLl9wYXNzd29yZD1udWxsLHRoaXMuX2hvc3Q9IiIsdGhpcy5fcG9ydD0iIix0aGlzLl9wYXRoPVtdLHRoaXMuX3F1ZXJ5PSIiLHRoaXMuX2ZyYWdtZW50PSIiLHRoaXMuX2lzSW52YWxpZD0hMSx0aGlzLl9pc1JlbGF0aXZlPSExfWZ1bmN0aW9uIGkoYSxiKXt2b2lkIDA9PT1ifHxiIGluc3RhbmNlb2YgaXx8KGI9bmV3IGkoU3RyaW5nKGIpKSksdGhpcy5fdXJsPWEsaC5jYWxsKHRoaXMpO3ZhciBjPWEucmVwbGFjZSgvXlsgXHRcclxuXGZdK3xbIFx0XHJcblxmXSskL2csIiIpO2cuY2FsbCh0aGlzLGMsbnVsbCxiKX12YXIgaj0hMTtpZighYS5mb3JjZUpVUkwpdHJ5e3ZhciBrPW5ldyBVUkwoImIiLCJodHRwOi8vYSIpO2o9Imh0dHA6Ly9hL2IiPT09ay5ocmVmfWNhdGNoKGwpe31pZighail7dmFyIG09T2JqZWN0LmNyZWF0ZShudWxsKTttLmZ0cD0yMSxtLmZpbGU9MCxtLmdvcGhlcj03MCxtLmh0dHA9ODAsbS5odHRwcz00NDMsbS53cz04MCxtLndzcz00NDM7dmFyIG49T2JqZWN0LmNyZWF0ZShudWxsKTtuWyIlMmUiXT0iLiIsblsiLiUyZSJdPSIuLiIsblsiJTJlLiJdPSIuLiIsblsiJTJlJTJlIl09Ii4uIjt2YXIgbz12b2lkIDAscD0vW2EtekEtWl0vLHE9L1thLXpBLVowLTlcK1wtXC5dLztpLnByb3RvdHlwZT17Z2V0IGhyZWYoKXtpZih0aGlzLl9pc0ludmFsaWQpcmV0dXJuIHRoaXMuX3VybDt2YXIgYT0iIjtyZXR1cm4oIiIhPXRoaXMuX3VzZXJuYW1lfHxudWxsIT10aGlzLl9wYXNzd29yZCkmJihhPXRoaXMuX3VzZXJuYW1lKyhudWxsIT10aGlzLl9wYXNzd29yZD8iOiIrdGhpcy5fcGFzc3dvcmQ6IiIpKyJAIiksdGhpcy5wcm90b2NvbCsodGhpcy5faXNSZWxhdGl2ZT8iLy8iK2ErdGhpcy5ob3N0OiIiKSt0aGlzLnBhdGhuYW1lK3RoaXMuX3F1ZXJ5K3RoaXMuX2ZyYWdtZW50fSxzZXQgaHJlZihhKXtoLmNhbGwodGhpcyksZy5jYWxsKHRoaXMsYSl9LGdldCBwcm90b2NvbCgpe3JldHVybiB0aGlzLl9zY2hlbWUrIjoifSxzZXQgcHJvdG9jb2woYSl7dGhpcy5faXNJbnZhbGlkfHxnLmNhbGwodGhpcyxhKyI6Iiwic2NoZW1lIHN0YXJ0Iil9LGdldCBob3N0KCl7cmV0dXJuIHRoaXMuX2lzSW52YWxpZD8iIjp0aGlzLl9wb3J0P3RoaXMuX2hvc3QrIjoiK3RoaXMuX3BvcnQ6dGhpcy5faG9zdH0sc2V0IGhvc3QoYSl7IXRoaXMuX2lzSW52YWxpZCYmdGhpcy5faXNSZWxhdGl2ZSYmZy5jYWxsKHRoaXMsYSwiaG9zdCIpfSxnZXQgaG9zdG5hbWUoKXtyZXR1cm4gdGhpcy5faG9zdH0sc2V0IGhvc3RuYW1lKGEpeyF0aGlzLl9pc0ludmFsaWQmJnRoaXMuX2lzUmVsYXRpdmUmJmcuY2FsbCh0aGlzLGEsImhvc3RuYW1lIil9LGdldCBwb3J0KCl7cmV0dXJuIHRoaXMuX3BvcnR9LHNldCBwb3J0KGEpeyF0aGlzLl9pc0ludmFsaWQmJnRoaXMuX2lzUmVsYXRpdmUmJmcuY2FsbCh0aGlzLGEsInBvcnQiKX0sZ2V0IHBhdGhuYW1lKCl7cmV0dXJuIHRoaXMuX2lzSW52YWxpZD8iIjp0aGlzLl9pc1JlbGF0aXZlPyIvIit0aGlzLl9wYXRoLmpvaW4oIi8iKTp0aGlzLl9zY2hlbWVEYXRhfSxzZXQgcGF0aG5hbWUoYSl7IXRoaXMuX2lzSW52YWxpZCYmdGhpcy5faXNSZWxhdGl2ZSYmKHRoaXMuX3BhdGg9W10sZy5jYWxsKHRoaXMsYSwicmVsYXRpdmUgcGF0aCBzdGFydCIpKX0sZ2V0IHNlYXJjaCgpe3JldHVybiB0aGlzLl9pc0ludmFsaWR8fCF0aGlzLl9xdWVyeXx8Ij8iPT10aGlzLl9xdWVyeT8iIjp0aGlzLl9xdWVyeX0sc2V0IHNlYXJjaChhKXshdGhpcy5faXNJbnZhbGlkJiZ0aGlzLl9pc1JlbGF0aXZlJiYodGhpcy5fcXVlcnk9Ij8iLCI/Ij09YVswXSYmKGE9YS5zbGljZSgxKSksZy5jYWxsKHRoaXMsYSwicXVlcnkiKSl9LGdldCBoYXNoKCl7cmV0dXJuIHRoaXMuX2lzSW52YWxpZHx8IXRoaXMuX2ZyYWdtZW50fHwiIyI9PXRoaXMuX2ZyYWdtZW50PyIiOnRoaXMuX2ZyYWdtZW50fSxzZXQgaGFzaChhKXt0aGlzLl9pc0ludmFsaWR8fCh0aGlzLl9mcmFnbWVudD0iIyIsIiMiPT1hWzBdJiYoYT1hLnNsaWNlKDEpKSxnLmNhbGwodGhpcyxhLCJmcmFnbWVudCIpKX19LGEuVVJMPWl9fSh3aW5kb3cpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7Zm9yKHZhciBiPWF8fHt9LGQ9MTtkPGFyZ3VtZW50cy5sZW5ndGg7ZCsrKXt2YXIgZT1hcmd1bWVudHNbZF07dHJ5e2Zvcih2YXIgZiBpbiBlKWMoZixlLGIpfWNhdGNoKGcpe319cmV0dXJuIGJ9ZnVuY3Rpb24gYyhhLGIsYyl7dmFyIGU9ZChiLGEpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShjLGEsZSl9ZnVuY3Rpb24gZChhLGIpe2lmKGEpe3ZhciBjPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoYSxiKTtyZXR1cm4gY3x8ZChPYmplY3QuZ2V0UHJvdG90eXBlT2YoYSksYil9fUZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kfHwoRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQ9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcyxjPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKTtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgZD1jLnNsaWNlKCk7cmV0dXJuIGQucHVzaC5hcHBseShkLGFyZ3VtZW50cyksYi5hcHBseShhLGQpfX0pLGEubWl4aW49Yn0od2luZG93LlBsYXRmb3JtKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhLGIsYyl7dmFyIGQ9InN0cmluZyI9PXR5cGVvZiBhP2RvY3VtZW50LmNyZWF0ZUVsZW1lbnQoYSk6YS5jbG9uZU5vZGUoITApO2lmKGQuaW5uZXJIVE1MPWIsYylmb3IodmFyIGUgaW4gYylkLnNldEF0dHJpYnV0ZShlLGNbZV0pO3JldHVybiBkfXZhciBjPURPTVRva2VuTGlzdC5wcm90b3R5cGUuYWRkLGQ9RE9NVG9rZW5MaXN0LnByb3RvdHlwZS5yZW1vdmU7RE9NVG9rZW5MaXN0LnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24oKXtmb3IodmFyIGE9MDthPGFyZ3VtZW50cy5sZW5ndGg7YSsrKWMuY2FsbCh0aGlzLGFyZ3VtZW50c1thXSl9LERPTVRva2VuTGlzdC5wcm90b3R5cGUucmVtb3ZlPWZ1bmN0aW9uKCl7Zm9yKHZhciBhPTA7YTxhcmd1bWVudHMubGVuZ3RoO2ErKylkLmNhbGwodGhpcyxhcmd1bWVudHNbYV0pfSxET01Ub2tlbkxpc3QucHJvdG90eXBlLnRvZ2dsZT1mdW5jdGlvbihhLGIpezE9PWFyZ3VtZW50cy5sZW5ndGgmJihiPSF0aGlzLmNvbnRhaW5zKGEpKSxiP3RoaXMuYWRkKGEpOnRoaXMucmVtb3ZlKGEpfSxET01Ub2tlbkxpc3QucHJvdG90eXBlLnN3aXRjaD1mdW5jdGlvbihhLGIpe2EmJnRoaXMucmVtb3ZlKGEpLGImJnRoaXMuYWRkKGIpfTt2YXIgZT1mdW5jdGlvbigpe3JldHVybiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh0aGlzKX0sZj13aW5kb3cuTmFtZWROb2RlTWFwfHx3aW5kb3cuTW96TmFtZWRBdHRyTWFwfHx7fTtpZihOb2RlTGlzdC5wcm90b3R5cGUuYXJyYXk9ZSxmLnByb3RvdHlwZS5hcnJheT1lLEhUTUxDb2xsZWN0aW9uLnByb3RvdHlwZS5hcnJheT1lLCF3aW5kb3cucGVyZm9ybWFuY2Upe3ZhciBnPURhdGUubm93KCk7d2luZG93LnBlcmZvcm1hbmNlPXtub3c6ZnVuY3Rpb24oKXtyZXR1cm4gRGF0ZS5ub3coKS1nfX19d2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZXx8KHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWU9ZnVuY3Rpb24oKXt2YXIgYT13aW5kb3cud2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lfHx3aW5kb3cubW96UmVxdWVzdEFuaW1hdGlvbkZyYW1lO3JldHVybiBhP2Z1bmN0aW9uKGIpe3JldHVybiBhKGZ1bmN0aW9uKCl7YihwZXJmb3JtYW5jZS5ub3coKSl9KX06ZnVuY3Rpb24oYSl7cmV0dXJuIHdpbmRvdy5zZXRUaW1lb3V0KGEsMWUzLzYwKX19KCkpLHdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZXx8KHdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZT1mdW5jdGlvbigpe3JldHVybiB3aW5kb3cud2Via2l0Q2FuY2VsQW5pbWF0aW9uRnJhbWV8fHdpbmRvdy5tb3pDYW5jZWxBbmltYXRpb25GcmFtZXx8ZnVuY3Rpb24oYSl7Y2xlYXJUaW1lb3V0KGEpfX0oKSk7dmFyIGg9W10saT1mdW5jdGlvbigpe2gucHVzaChhcmd1bWVudHMpfTt3aW5kb3cuUG9seW1lcj1pLGEuZGVsaXZlckRlY2xhcmF0aW9ucz1mdW5jdGlvbigpe3JldHVybiBhLmRlbGl2ZXJEZWNsYXJhdGlvbnM9ZnVuY3Rpb24oKXt0aHJvdyJQb3NzaWJsZSBhdHRlbXB0IHRvIGxvYWQgUG9seW1lciB0d2ljZSJ9LGh9LHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJET01Db250ZW50TG9hZGVkIixmdW5jdGlvbigpe3dpbmRvdy5Qb2x5bWVyPT09aSYmKHdpbmRvdy5Qb2x5bWVyPWZ1bmN0aW9uKCl7Y29uc29sZS5lcnJvcignWW91IHRyaWVkIHRvIHVzZSBwb2x5bWVyIHdpdGhvdXQgbG9hZGluZyBpdCBmaXJzdC4gVG8gbG9hZCBwb2x5bWVyLCA8bGluayByZWw9ImltcG9ydCIgaHJlZj0iY29tcG9uZW50cy9wb2x5bWVyL3BvbHltZXIuaHRtbCI+Jyl9KX0pLGEuY3JlYXRlRE9NPWJ9KHdpbmRvdy5QbGF0Zm9ybSksZnVuY3Rpb24oYSl7YS50ZW1wbGF0ZUNvbnRlbnQ9YS50ZW1wbGF0ZUNvbnRlbnR8fGZ1bmN0aW9uKGEpe3JldHVybiBhLmNvbnRlbnR9fSh3aW5kb3cuUGxhdGZvcm0pLGZ1bmN0aW9uKGEpe2E9YXx8KHdpbmRvdy5JbnNwZWN0b3I9e30pO3ZhciBiO3dpbmRvdy5zaW5zcGVjdD1mdW5jdGlvbihhLGQpe2J8fChiPXdpbmRvdy5vcGVuKCIiLCJTaGFkb3dET00gSW5zcGVjdG9yIixudWxsLCEwKSxiLmRvY3VtZW50LndyaXRlKGMpLGIuYXBpPXtzaGFkb3dpemU6c2hhZG93aXplfSksZihhfHx3cmFwKGRvY3VtZW50LmJvZHkpLGQpfTt2YXIgYz1bIjwhRE9DVFlQRSBodG1sPiIsIjxodG1sPiIsIiAgPGhlYWQ+IiwiICAgIDx0aXRsZT5TaGFkb3dET00gSW5zcGVjdG9yPC90aXRsZT4iLCIgICAgPHN0eWxlPiIsIiAgICAgIGJvZHkgeyIsIiAgICAgIH0iLCIgICAgICBwcmUgeyIsJyAgICAgICAgZm9udDogOXB0ICJDb3VyaWVyIE5ldyIsIG1vbm9zcGFjZTsnLCIgICAgICAgIGxpbmUtaGVpZ2h0OiAxLjVlbTsiLCIgICAgICB9IiwiICAgICAgdGFnIHsiLCIgICAgICAgIGNvbG9yOiBwdXJwbGU7IiwiICAgICAgfSIsIiAgICAgIHVsIHsiLCIgICAgICAgICBtYXJnaW46IDA7IiwiICAgICAgICAgcGFkZGluZzogMDsiLCIgICAgICAgICBsaXN0LXN0eWxlOiBub25lOyIsIiAgICAgIH0iLCIgICAgICBsaSB7IiwiICAgICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrOyIsIiAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmMWYxZjE7IiwiICAgICAgICAgcGFkZGluZzogNHB4IDZweDsiLCIgICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7IiwiICAgICAgICAgbWFyZ2luLXJpZ2h0OiA0cHg7IiwiICAgICAgfSIsIiAgICA8L3N0eWxlPiIsIiAgPC9oZWFkPiIsIiAgPGJvZHk+IiwnICAgIDx1bCBpZD0iY3J1bWJzIj4nLCIgICAgPC91bD4iLCcgICAgPGRpdiBpZD0idHJlZSI+PC9kaXY+JywiICA8L2JvZHk+IiwiPC9odG1sPiJdLmpvaW4oIlxuIiksZD1bXSxlPWZ1bmN0aW9uKCl7dmFyIGE9Yi5kb2N1bWVudCxjPWEucXVlcnlTZWxlY3RvcigiI2NydW1icyIpO2MudGV4dENvbnRlbnQ9IiI7Zm9yKHZhciBlLGc9MDtlPWRbZ107ZysrKXt2YXIgaD1hLmNyZWF0ZUVsZW1lbnQoImEiKTtoLmhyZWY9IiMiLGgudGV4dENvbnRlbnQ9ZS5sb2NhbE5hbWUsaC5pZHg9ZyxoLm9uY2xpY2s9ZnVuY3Rpb24oYSl7Zm9yKHZhciBiO2QubGVuZ3RoPnRoaXMuaWR4OyliPWQucG9wKCk7ZihiLnNoYWRvd3x8YixiKSxhLnByZXZlbnREZWZhdWx0KCl9LGMuYXBwZW5kQ2hpbGQoYS5jcmVhdGVFbGVtZW50KCJsaSIpKS5hcHBlbmRDaGlsZChoKX19LGY9ZnVuY3Rpb24oYSxjKXt2YXIgZj1iLmRvY3VtZW50O2s9W107dmFyIGc9Y3x8YTtkLnB1c2goZyksZSgpLGYuYm9keS5xdWVyeVNlbGVjdG9yKCIjdHJlZSIpLmlubmVySFRNTD0iPHByZT4iK2ooYSxhLmNoaWxkTm9kZXMpKyI8L3ByZT4ifSxnPUFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwuYmluZChBcnJheS5wcm90b3R5cGUuZm9yRWFjaCksaD17U1RZTEU6MSxTQ1JJUFQ6MSwiI2NvbW1lbnQiOjEsVEVNUExBVEU6MX0saT1mdW5jdGlvbihhKXtyZXR1cm4gaFthLm5vZGVOYW1lXX0saj1mdW5jdGlvbihhLGIsYyl7aWYoaShhKSlyZXR1cm4iIjt2YXIgZD1jfHwiIjtpZihhLmxvY2FsTmFtZXx8MTE9PWEubm9kZVR5cGUpe3ZhciBlPWEubG9jYWxOYW1lfHwic2hhZG93LXJvb3QiLGY9ZCtsKGEpOyJjb250ZW50Ij09ZSYmKGI9YS5nZXREaXN0cmlidXRlZE5vZGVzKCkpLGYrPSI8YnIvPiI7dmFyIGg9ZCsiJm5ic3A7Jm5ic3A7IjtnKGIsZnVuY3Rpb24oYSl7Zis9aihhLGEuY2hpbGROb2RlcyxoKX0pLGYrPWQse2JyOjF9W2VdfHwoZis9Ijx0YWc+Jmx0Oy8iK2UrIiZndDs8L3RhZz4iLGYrPSI8YnIvPiIpfWVsc2V7dmFyIGs9YS50ZXh0Q29udGVudC50cmltKCk7Zj1rP2QrJyInK2srJyI8YnIvPic6IiJ9cmV0dXJuIGZ9LGs9W10sbD1mdW5jdGlvbihhKXt2YXIgYj0iPHRhZz4mbHQ7IixjPWEubG9jYWxOYW1lfHwic2hhZG93LXJvb3QiO3JldHVybiBhLndlYmtpdFNoYWRvd1Jvb3R8fGEuc2hhZG93Um9vdD8oYis9JyA8YnV0dG9uIGlkeD0iJytrLmxlbmd0aCsnIiBvbmNsaWNrPSJhcGkuc2hhZG93aXplLmNhbGwodGhpcykiPicrYysiPC9idXR0b24+IixrLnB1c2goYSkpOmIrPWN8fCJzaGFkb3ctcm9vdCIsYS5hdHRyaWJ1dGVzJiZnKGEuYXR0cmlidXRlcyxmdW5jdGlvbihhKXtiKz0iICIrYS5uYW1lKyhhLnZhbHVlPyc9IicrYS52YWx1ZSsnIic6IiIpfSksYis9IiZndDs8L3RhZz4ifTtzaGFkb3dpemU9ZnVuY3Rpb24oKXt2YXIgYT1OdW1iZXIodGhpcy5hdHRyaWJ1dGVzLmlkeC52YWx1ZSksYj1rW2FdO2I/ZihiLndlYmtpdFNoYWRvd1Jvb3R8fGIuc2hhZG93Um9vdCxiKTooY29uc29sZS5sb2coImJhZCBzaGFkb3dpemUgbm9kZSIpLGNvbnNvbGUuZGlyKHRoaXMpKX0sYS5vdXRwdXQ9an0od2luZG93Lkluc3BlY3RvciksZnVuY3Rpb24oKXt2YXIgYT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzdHlsZSIpO2EudGV4dENvbnRlbnQ9ImJvZHkge3RyYW5zaXRpb246IG9wYWNpdHkgZWFzZS1pbiAwLjJzOyB9IFxuYm9keVt1bnJlc29sdmVkXSB7b3BhY2l0eTogMDsgZGlzcGxheTogYmxvY2s7IG92ZXJmbG93OiBoaWRkZW47IH0gXG4iO3ZhciBiPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoImhlYWQiKTtiLmluc2VydEJlZm9yZShhLGIuZmlyc3RDaGlsZCl9KFBsYXRmb3JtKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEsYil7cmV0dXJuIGI9Ynx8W10sYi5tYXB8fChiPVtiXSksYS5hcHBseSh0aGlzLGIubWFwKGQpKX1mdW5jdGlvbiBjKGEsYyxkKXt2YXIgZTtzd2l0Y2goYXJndW1lbnRzLmxlbmd0aCl7Y2FzZSAwOnJldHVybjtjYXNlIDE6ZT1udWxsO2JyZWFrO2Nhc2UgMjplPWMuYXBwbHkodGhpcyk7YnJlYWs7ZGVmYXVsdDplPWIoZCxjKX1mW2FdPWV9ZnVuY3Rpb24gZChhKXtyZXR1cm4gZlthXX1mdW5jdGlvbiBlKGEsYyl7SFRNTEltcG9ydHMud2hlbkltcG9ydHNSZWFkeShmdW5jdGlvbigpe2IoYyxhKX0pfXZhciBmPXt9O2EubWFyc2hhbD1kLGEubW9kdWxhcml6ZT1jLGEudXNpbmc9ZX0od2luZG93KSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEpe2YudGV4dENvbnRlbnQ9ZCsrLGUucHVzaChhKX1mdW5jdGlvbiBjKCl7Zm9yKDtlLmxlbmd0aDspZS5zaGlmdCgpKCl9dmFyIGQ9MCxlPVtdLGY9ZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoIiIpO25ldyh3aW5kb3cuTXV0YXRpb25PYnNlcnZlcnx8SnNNdXRhdGlvbk9ic2VydmVyKShjKS5vYnNlcnZlKGYse2NoYXJhY3RlckRhdGE6ITB9KSxhLmVuZE9mTWljcm90YXNrPWJ9KFBsYXRmb3JtKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEsYixkLGUpe3JldHVybiBhLnJlcGxhY2UoZSxmdW5jdGlvbihhLGUsZixnKXt2YXIgaD1mLnJlcGxhY2UoL1siJ10vZywiIik7cmV0dXJuIGg9YyhiLGgsZCksZSsiJyIraCsiJyIrZ30pfWZ1bmN0aW9uIGMoYSxiLGMpe2lmKGImJiIvIj09PWJbMF0pcmV0dXJuIGI7dmFyIGU9bmV3IFVSTChiLGEpO3JldHVybiBjP2UuaHJlZjpkKGUuaHJlZil9ZnVuY3Rpb24gZChhKXt2YXIgYj1uZXcgVVJMKGRvY3VtZW50LmJhc2VVUkkpLGM9bmV3IFVSTChhLGIpO3JldHVybiBjLmhvc3Q9PT1iLmhvc3QmJmMucG9ydD09PWIucG9ydCYmYy5wcm90b2NvbD09PWIucHJvdG9jb2w/ZShiLGMpOmF9ZnVuY3Rpb24gZShhLGIpe2Zvcih2YXIgYz1hLnBhdGhuYW1lLGQ9Yi5wYXRobmFtZSxlPWMuc3BsaXQoIi8iKSxmPWQuc3BsaXQoIi8iKTtlLmxlbmd0aCYmZVswXT09PWZbMF07KWUuc2hpZnQoKSxmLnNoaWZ0KCk7Zm9yKHZhciBnPTAsaD1lLmxlbmd0aC0xO2g+ZztnKyspZi51bnNoaWZ0KCIuLiIpO3JldHVybiBmLmpvaW4oIi8iKStiLnNlYXJjaCtiLmhhc2h9dmFyIGY9e3Jlc29sdmVEb206ZnVuY3Rpb24oYSxiKXtiPWJ8fGEub3duZXJEb2N1bWVudC5iYXNlVVJJLHRoaXMucmVzb2x2ZUF0dHJpYnV0ZXMoYSxiKSx0aGlzLnJlc29sdmVTdHlsZXMoYSxiKTt2YXIgYz1hLnF1ZXJ5U2VsZWN0b3JBbGwoInRlbXBsYXRlIik7aWYoYylmb3IodmFyIGQsZT0wLGY9Yy5sZW5ndGg7Zj5lJiYoZD1jW2VdKTtlKyspZC5jb250ZW50JiZ0aGlzLnJlc29sdmVEb20oZC5jb250ZW50LGIpfSxyZXNvbHZlVGVtcGxhdGU6ZnVuY3Rpb24oYSl7dGhpcy5yZXNvbHZlRG9tKGEuY29udGVudCxhLm93bmVyRG9jdW1lbnQuYmFzZVVSSSl9LHJlc29sdmVTdHlsZXM6ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLnF1ZXJ5U2VsZWN0b3JBbGwoInN0eWxlIik7aWYoYylmb3IodmFyIGQsZT0wLGY9Yy5sZW5ndGg7Zj5lJiYoZD1jW2VdKTtlKyspdGhpcy5yZXNvbHZlU3R5bGUoZCxiKX0scmVzb2x2ZVN0eWxlOmZ1bmN0aW9uKGEsYil7Yj1ifHxhLm93bmVyRG9jdW1lbnQuYmFzZVVSSSxhLnRleHRDb250ZW50PXRoaXMucmVzb2x2ZUNzc1RleHQoYS50ZXh0Q29udGVudCxiKX0scmVzb2x2ZUNzc1RleHQ6ZnVuY3Rpb24oYSxjLGQpe3JldHVybiBhPWIoYSxjLGQsZyksYihhLGMsZCxoKX0scmVzb2x2ZUF0dHJpYnV0ZXM6ZnVuY3Rpb24oYSxiKXthLmhhc0F0dHJpYnV0ZXMmJmEuaGFzQXR0cmlidXRlcygpJiZ0aGlzLnJlc29sdmVFbGVtZW50QXR0cmlidXRlcyhhLGIpO3ZhciBjPWEmJmEucXVlcnlTZWxlY3RvckFsbChqKTtpZihjKWZvcih2YXIgZCxlPTAsZj1jLmxlbmd0aDtmPmUmJihkPWNbZV0pO2UrKyl0aGlzLnJlc29sdmVFbGVtZW50QXR0cmlidXRlcyhkLGIpfSxyZXNvbHZlRWxlbWVudEF0dHJpYnV0ZXM6ZnVuY3Rpb24oYSxkKXtkPWR8fGEub3duZXJEb2N1bWVudC5iYXNlVVJJLGkuZm9yRWFjaChmdW5jdGlvbihlKXt2YXIgZixoPWEuYXR0cmlidXRlc1tlXSxpPWgmJmgudmFsdWU7aSYmaS5zZWFyY2goayk8MCYmKGY9InN0eWxlIj09PWU/YihpLGQsITEsZyk6YyhkLGkpLGgudmFsdWU9Zil9KX19LGc9Lyh1cmxcKCkoW14pXSopKFwpKS9nLGg9LyhAaW1wb3J0W1xzXSsoPyF1cmxcKCkpKFteO10qKSg7KS9nLGk9WyJocmVmIiwic3JjIiwiYWN0aW9uIiwic3R5bGUiLCJ1cmwiXSxqPSJbIitpLmpvaW4oIl0sWyIpKyJdIixrPSJ7ey4qfX0iO2EudXJsUmVzb2x2ZXI9Zn0oUGxhdGZvcm0pLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7dS5wdXNoKGEpLHR8fCh0PSEwLHEoZCkpfWZ1bmN0aW9uIGMoYSl7cmV0dXJuIHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCYmd2luZG93LlNoYWRvd0RPTVBvbHlmaWxsLndyYXBJZk5lZWRlZChhKXx8YX1mdW5jdGlvbiBkKCl7dD0hMTt2YXIgYT11O3U9W10sYS5zb3J0KGZ1bmN0aW9uKGEsYil7cmV0dXJuIGEudWlkXy1iLnVpZF99KTt2YXIgYj0hMTthLmZvckVhY2goZnVuY3Rpb24oYSl7dmFyIGM9YS50YWtlUmVjb3JkcygpO2UoYSksYy5sZW5ndGgmJihhLmNhbGxiYWNrXyhjLGEpLGI9ITApfSksYiYmZCgpfWZ1bmN0aW9uIGUoYSl7YS5ub2Rlc18uZm9yRWFjaChmdW5jdGlvbihiKXt2YXIgYz1wLmdldChiKTtjJiZjLmZvckVhY2goZnVuY3Rpb24oYil7Yi5vYnNlcnZlcj09PWEmJmIucmVtb3ZlVHJhbnNpZW50T2JzZXJ2ZXJzKCl9KX0pfWZ1bmN0aW9uIGYoYSxiKXtmb3IodmFyIGM9YTtjO2M9Yy5wYXJlbnROb2RlKXt2YXIgZD1wLmdldChjKTtpZihkKWZvcih2YXIgZT0wO2U8ZC5sZW5ndGg7ZSsrKXt2YXIgZj1kW2VdLGc9Zi5vcHRpb25zO2lmKGM9PT1hfHxnLnN1YnRyZWUpe3ZhciBoPWIoZyk7aCYmZi5lbnF1ZXVlKGgpfX19fWZ1bmN0aW9uIGcoYSl7dGhpcy5jYWxsYmFja189YSx0aGlzLm5vZGVzXz1bXSx0aGlzLnJlY29yZHNfPVtdLHRoaXMudWlkXz0rK3Z9ZnVuY3Rpb24gaChhLGIpe3RoaXMudHlwZT1hLHRoaXMudGFyZ2V0PWIsdGhpcy5hZGRlZE5vZGVzPVtdLHRoaXMucmVtb3ZlZE5vZGVzPVtdLHRoaXMucHJldmlvdXNTaWJsaW5nPW51bGwsdGhpcy5uZXh0U2libGluZz1udWxsLHRoaXMuYXR0cmlidXRlTmFtZT1udWxsLHRoaXMuYXR0cmlidXRlTmFtZXNwYWNlPW51bGwsdGhpcy5vbGRWYWx1ZT1udWxsfWZ1bmN0aW9uIGkoYSl7dmFyIGI9bmV3IGgoYS50eXBlLGEudGFyZ2V0KTtyZXR1cm4gYi5hZGRlZE5vZGVzPWEuYWRkZWROb2Rlcy5zbGljZSgpLGIucmVtb3ZlZE5vZGVzPWEucmVtb3ZlZE5vZGVzLnNsaWNlKCksYi5wcmV2aW91c1NpYmxpbmc9YS5wcmV2aW91c1NpYmxpbmcsYi5uZXh0U2libGluZz1hLm5leHRTaWJsaW5nLGIuYXR0cmlidXRlTmFtZT1hLmF0dHJpYnV0ZU5hbWUsYi5hdHRyaWJ1dGVOYW1lc3BhY2U9YS5hdHRyaWJ1dGVOYW1lc3BhY2UsYi5vbGRWYWx1ZT1hLm9sZFZhbHVlLGJ9ZnVuY3Rpb24gaihhLGIpe3JldHVybiB3PW5ldyBoKGEsYil9ZnVuY3Rpb24gayhhKXtyZXR1cm4geD94Oih4PWkodykseC5vbGRWYWx1ZT1hLHgpfWZ1bmN0aW9uIGwoKXt3PXg9dm9pZCAwfWZ1bmN0aW9uIG0oYSl7cmV0dXJuIGE9PT14fHxhPT09d31mdW5jdGlvbiBuKGEsYil7cmV0dXJuIGE9PT1iP2E6eCYmbShhKT94Om51bGx9ZnVuY3Rpb24gbyhhLGIsYyl7dGhpcy5vYnNlcnZlcj1hLHRoaXMudGFyZ2V0PWIsdGhpcy5vcHRpb25zPWMsdGhpcy50cmFuc2llbnRPYnNlcnZlZE5vZGVzPVtdfXZhciBwPW5ldyBXZWFrTWFwLHE9d2luZG93Lm1zU2V0SW1tZWRpYXRlO2lmKCFxKXt2YXIgcj1bXSxzPVN0cmluZyhNYXRoLnJhbmRvbSgpKTt3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsZnVuY3Rpb24oYSl7aWYoYS5kYXRhPT09cyl7dmFyIGI9cjtyPVtdLGIuZm9yRWFjaChmdW5jdGlvbihhKXthKCl9KX19KSxxPWZ1bmN0aW9uKGEpe3IucHVzaChhKSx3aW5kb3cucG9zdE1lc3NhZ2UocywiKiIpfX12YXIgdD0hMSx1PVtdLHY9MDtnLnByb3RvdHlwZT17b2JzZXJ2ZTpmdW5jdGlvbihhLGIpe2lmKGE9YyhhKSwhYi5jaGlsZExpc3QmJiFiLmF0dHJpYnV0ZXMmJiFiLmNoYXJhY3RlckRhdGF8fGIuYXR0cmlidXRlT2xkVmFsdWUmJiFiLmF0dHJpYnV0ZXN8fGIuYXR0cmlidXRlRmlsdGVyJiZiLmF0dHJpYnV0ZUZpbHRlci5sZW5ndGgmJiFiLmF0dHJpYnV0ZXN8fGIuY2hhcmFjdGVyRGF0YU9sZFZhbHVlJiYhYi5jaGFyYWN0ZXJEYXRhKXRocm93IG5ldyBTeW50YXhFcnJvcjt2YXIgZD1wLmdldChhKTtkfHxwLnNldChhLGQ9W10pO2Zvcih2YXIgZSxmPTA7ZjxkLmxlbmd0aDtmKyspaWYoZFtmXS5vYnNlcnZlcj09PXRoaXMpe2U9ZFtmXSxlLnJlbW92ZUxpc3RlbmVycygpLGUub3B0aW9ucz1iO2JyZWFrfWV8fChlPW5ldyBvKHRoaXMsYSxiKSxkLnB1c2goZSksdGhpcy5ub2Rlc18ucHVzaChhKSksZS5hZGRMaXN0ZW5lcnMoKX0sZGlzY29ubmVjdDpmdW5jdGlvbigpe3RoaXMubm9kZXNfLmZvckVhY2goZnVuY3Rpb24oYSl7Zm9yKHZhciBiPXAuZ2V0KGEpLGM9MDtjPGIubGVuZ3RoO2MrKyl7dmFyIGQ9YltjXTtpZihkLm9ic2VydmVyPT09dGhpcyl7ZC5yZW1vdmVMaXN0ZW5lcnMoKSxiLnNwbGljZShjLDEpO2JyZWFrfX19LHRoaXMpLHRoaXMucmVjb3Jkc189W119LHRha2VSZWNvcmRzOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5yZWNvcmRzXztyZXR1cm4gdGhpcy5yZWNvcmRzXz1bXSxhfX07dmFyIHcseDtvLnByb3RvdHlwZT17ZW5xdWV1ZTpmdW5jdGlvbihhKXt2YXIgYz10aGlzLm9ic2VydmVyLnJlY29yZHNfLGQ9Yy5sZW5ndGg7aWYoYy5sZW5ndGg+MCl7dmFyIGU9Y1tkLTFdLGY9bihlLGEpO2lmKGYpcmV0dXJuIHZvaWQoY1tkLTFdPWYpfWVsc2UgYih0aGlzLm9ic2VydmVyKTtjW2RdPWF9LGFkZExpc3RlbmVyczpmdW5jdGlvbigpe3RoaXMuYWRkTGlzdGVuZXJzXyh0aGlzLnRhcmdldCl9LGFkZExpc3RlbmVyc186ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5vcHRpb25zO2IuYXR0cmlidXRlcyYmYS5hZGRFdmVudExpc3RlbmVyKCJET01BdHRyTW9kaWZpZWQiLHRoaXMsITApLGIuY2hhcmFjdGVyRGF0YSYmYS5hZGRFdmVudExpc3RlbmVyKCJET01DaGFyYWN0ZXJEYXRhTW9kaWZpZWQiLHRoaXMsITApLGIuY2hpbGRMaXN0JiZhLmFkZEV2ZW50TGlzdGVuZXIoIkRPTU5vZGVJbnNlcnRlZCIsdGhpcywhMCksKGIuY2hpbGRMaXN0fHxiLnN1YnRyZWUpJiZhLmFkZEV2ZW50TGlzdGVuZXIoIkRPTU5vZGVSZW1vdmVkIix0aGlzLCEwKX0scmVtb3ZlTGlzdGVuZXJzOmZ1bmN0aW9uKCl7dGhpcy5yZW1vdmVMaXN0ZW5lcnNfKHRoaXMudGFyZ2V0KX0scmVtb3ZlTGlzdGVuZXJzXzpmdW5jdGlvbihhKXt2YXIgYj10aGlzLm9wdGlvbnM7Yi5hdHRyaWJ1dGVzJiZhLnJlbW92ZUV2ZW50TGlzdGVuZXIoIkRPTUF0dHJNb2RpZmllZCIsdGhpcywhMCksYi5jaGFyYWN0ZXJEYXRhJiZhLnJlbW92ZUV2ZW50TGlzdGVuZXIoIkRPTUNoYXJhY3RlckRhdGFNb2RpZmllZCIsdGhpcywhMCksYi5jaGlsZExpc3QmJmEucmVtb3ZlRXZlbnRMaXN0ZW5lcigiRE9NTm9kZUluc2VydGVkIix0aGlzLCEwKSwoYi5jaGlsZExpc3R8fGIuc3VidHJlZSkmJmEucmVtb3ZlRXZlbnRMaXN0ZW5lcigiRE9NTm9kZVJlbW92ZWQiLHRoaXMsITApfSxhZGRUcmFuc2llbnRPYnNlcnZlcjpmdW5jdGlvbihhKXtpZihhIT09dGhpcy50YXJnZXQpe3RoaXMuYWRkTGlzdGVuZXJzXyhhKSx0aGlzLnRyYW5zaWVudE9ic2VydmVkTm9kZXMucHVzaChhKTt2YXIgYj1wLmdldChhKTtifHxwLnNldChhLGI9W10pLGIucHVzaCh0aGlzKX19LHJlbW92ZVRyYW5zaWVudE9ic2VydmVyczpmdW5jdGlvbigpe3ZhciBhPXRoaXMudHJhbnNpZW50T2JzZXJ2ZWROb2Rlczt0aGlzLnRyYW5zaWVudE9ic2VydmVkTm9kZXM9W10sYS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3RoaXMucmVtb3ZlTGlzdGVuZXJzXyhhKTtmb3IodmFyIGI9cC5nZXQoYSksYz0wO2M8Yi5sZW5ndGg7YysrKWlmKGJbY109PT10aGlzKXtiLnNwbGljZShjLDEpO2JyZWFrfX0sdGhpcyl9LGhhbmRsZUV2ZW50OmZ1bmN0aW9uKGEpe3N3aXRjaChhLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpLGEudHlwZSl7Y2FzZSJET01BdHRyTW9kaWZpZWQiOnZhciBiPWEuYXR0ck5hbWUsYz1hLnJlbGF0ZWROb2RlLm5hbWVzcGFjZVVSSSxkPWEudGFyZ2V0LGU9bmV3IGooImF0dHJpYnV0ZXMiLGQpO2UuYXR0cmlidXRlTmFtZT1iLGUuYXR0cmlidXRlTmFtZXNwYWNlPWM7dmFyIGc9YS5hdHRyQ2hhbmdlPT09TXV0YXRpb25FdmVudC5BRERJVElPTj9udWxsOmEucHJldlZhbHVlO2YoZCxmdW5jdGlvbihhKXtyZXR1cm4hYS5hdHRyaWJ1dGVzfHxhLmF0dHJpYnV0ZUZpbHRlciYmYS5hdHRyaWJ1dGVGaWx0ZXIubGVuZ3RoJiYtMT09PWEuYXR0cmlidXRlRmlsdGVyLmluZGV4T2YoYikmJi0xPT09YS5hdHRyaWJ1dGVGaWx0ZXIuaW5kZXhPZihjKT92b2lkIDA6YS5hdHRyaWJ1dGVPbGRWYWx1ZT9rKGcpOmV9KTticmVhaztjYXNlIkRPTUNoYXJhY3RlckRhdGFNb2RpZmllZCI6dmFyIGQ9YS50YXJnZXQsZT1qKCJjaGFyYWN0ZXJEYXRhIixkKSxnPWEucHJldlZhbHVlO2YoZCxmdW5jdGlvbihhKXtyZXR1cm4gYS5jaGFyYWN0ZXJEYXRhP2EuY2hhcmFjdGVyRGF0YU9sZFZhbHVlP2soZyk6ZTp2b2lkIDB9KTticmVhaztjYXNlIkRPTU5vZGVSZW1vdmVkIjp0aGlzLmFkZFRyYW5zaWVudE9ic2VydmVyKGEudGFyZ2V0KTtjYXNlIkRPTU5vZGVJbnNlcnRlZCI6dmFyIGgsaSxkPWEucmVsYXRlZE5vZGUsbT1hLnRhcmdldDsiRE9NTm9kZUluc2VydGVkIj09PWEudHlwZT8oaD1bbV0saT1bXSk6KGg9W10saT1bbV0pO3ZhciBuPW0ucHJldmlvdXNTaWJsaW5nLG89bS5uZXh0U2libGluZyxlPWooImNoaWxkTGlzdCIsZCk7ZS5hZGRlZE5vZGVzPWgsZS5yZW1vdmVkTm9kZXM9aSxlLnByZXZpb3VzU2libGluZz1uLGUubmV4dFNpYmxpbmc9byxmKGQsZnVuY3Rpb24oYSl7cmV0dXJuIGEuY2hpbGRMaXN0P2U6dm9pZCAwfSl9bCgpfX0sYS5Kc011dGF0aW9uT2JzZXJ2ZXI9ZyxhLk11dGF0aW9uT2JzZXJ2ZXJ8fChhLk11dGF0aW9uT2JzZXJ2ZXI9Zyl9KHRoaXMpLHdpbmRvdy5IVE1MSW1wb3J0cz13aW5kb3cuSFRNTEltcG9ydHN8fHtmbGFnczp7fX0sZnVuY3Rpb24oYSl7dmFyIGI9KGEucGF0aCxhLnhociksYz1hLmZsYWdzLGQ9ZnVuY3Rpb24oYSxiKXt0aGlzLmNhY2hlPXt9LHRoaXMub25sb2FkPWEsdGhpcy5vbmNvbXBsZXRlPWIsdGhpcy5pbmZsaWdodD0wLHRoaXMucGVuZGluZz17fX07ZC5wcm90b3R5cGU9e2FkZE5vZGVzOmZ1bmN0aW9uKGEpe3RoaXMuaW5mbGlnaHQrPWEubGVuZ3RoO2Zvcih2YXIgYixjPTAsZD1hLmxlbmd0aDtkPmMmJihiPWFbY10pO2MrKyl0aGlzLnJlcXVpcmUoYik7dGhpcy5jaGVja0RvbmUoKX0sYWRkTm9kZTpmdW5jdGlvbihhKXt0aGlzLmluZmxpZ2h0KyssdGhpcy5yZXF1aXJlKGEpLHRoaXMuY2hlY2tEb25lKCl9LHJlcXVpcmU6ZnVuY3Rpb24oYSl7dmFyIGI9YS5zcmN8fGEuaHJlZjthLl9fbm9kZVVybD1iLHRoaXMuZGVkdXBlKGIsYSl8fHRoaXMuZmV0Y2goYixhKX0sZGVkdXBlOmZ1bmN0aW9uKGEsYil7aWYodGhpcy5wZW5kaW5nW2FdKXJldHVybiB0aGlzLnBlbmRpbmdbYV0ucHVzaChiKSwhMDtyZXR1cm4gdGhpcy5jYWNoZVthXT8odGhpcy5vbmxvYWQoYSxiLHRoaXMuY2FjaGVbYV0pLHRoaXMudGFpbCgpLCEwKToodGhpcy5wZW5kaW5nW2FdPVtiXSwhMSl9LGZldGNoOmZ1bmN0aW9uKGEsZCl7aWYoYy5sb2FkJiZjb25zb2xlLmxvZygiZmV0Y2giLGEsZCksYS5tYXRjaCgvXmRhdGE6Lykpe3ZhciBlPWEuc3BsaXQoIiwiKSxmPWVbMF0sZz1lWzFdO2c9Zi5pbmRleE9mKCI7YmFzZTY0Iik+LTE/YXRvYihnKTpkZWNvZGVVUklDb21wb25lbnQoZyksc2V0VGltZW91dChmdW5jdGlvbigpe3RoaXMucmVjZWl2ZShhLGQsbnVsbCxnKX0uYmluZCh0aGlzKSwwKX1lbHNle3ZhciBoPWZ1bmN0aW9uKGIsYyxlKXt0aGlzLnJlY2VpdmUoYSxkLGIsYyxlKX0uYmluZCh0aGlzKTtiLmxvYWQoYSxoKX19LHJlY2VpdmU6ZnVuY3Rpb24oYSxiLGMsZCxlKXt0aGlzLmNhY2hlW2FdPWQ7dmFyIGY9dGhpcy5wZW5kaW5nW2FdO2UmJmUhPT1hJiYodGhpcy5jYWNoZVtlXT1kLGY9Zi5jb25jYXQodGhpcy5wZW5kaW5nW2VdKSk7Zm9yKHZhciBnLGg9MCxpPWYubGVuZ3RoO2k+aCYmKGc9ZltoXSk7aCsrKXRoaXMub25sb2FkKGV8fGEsZyxkKSx0aGlzLnRhaWwoKTt0aGlzLnBlbmRpbmdbYV09bnVsbCxlJiZlIT09YSYmKHRoaXMucGVuZGluZ1tlXT1udWxsKX0sdGFpbDpmdW5jdGlvbigpey0tdGhpcy5pbmZsaWdodCx0aGlzLmNoZWNrRG9uZSgpfSxjaGVja0RvbmU6ZnVuY3Rpb24oKXt0aGlzLmluZmxpZ2h0fHx0aGlzLm9uY29tcGxldGUoKX19LGI9Ynx8e2FzeW5jOiEwLG9rOmZ1bmN0aW9uKGEpe3JldHVybiBhLnN0YXR1cz49MjAwJiZhLnN0YXR1czwzMDB8fDMwND09PWEuc3RhdHVzfHwwPT09YS5zdGF0dXN9LGxvYWQ6ZnVuY3Rpb24oYyxkLGUpe3ZhciBmPW5ldyBYTUxIdHRwUmVxdWVzdDtyZXR1cm4oYS5mbGFncy5kZWJ1Z3x8YS5mbGFncy5idXN0KSYmKGMrPSI/IitNYXRoLnJhbmRvbSgpKSxmLm9wZW4oIkdFVCIsYyxiLmFzeW5jKSxmLmFkZEV2ZW50TGlzdGVuZXIoInJlYWR5c3RhdGVjaGFuZ2UiLGZ1bmN0aW9uKCl7aWYoND09PWYucmVhZHlTdGF0ZSl7dmFyIGE9Zi5nZXRSZXNwb25zZUhlYWRlcigiTG9jYXRpb24iKSxjPW51bGw7aWYoYSl2YXIgYz0iLyI9PT1hLnN1YnN0cigwLDEpP2xvY2F0aW9uLm9yaWdpbithOmM7ZC5jYWxsKGUsIWIub2soZikmJmYsZi5yZXNwb25zZXx8Zi5yZXNwb25zZVRleHQsYyl9fSksZi5zZW5kKCksZn0sbG9hZERvY3VtZW50OmZ1bmN0aW9uKGEsYixjKXt0aGlzLmxvYWQoYSxiLGMpLnJlc3BvbnNlVHlwZT0iZG9jdW1lbnQifX0sYS54aHI9YixhLkxvYWRlcj1kfSh3aW5kb3cuSFRNTEltcG9ydHMpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7cmV0dXJuImxpbmsiPT09YS5sb2NhbE5hbWUmJmEucmVsPT09Z31mdW5jdGlvbiBjKGEpe3ZhciBiPWQoYSksYz0iZGF0YTp0ZXh0L2phdmFzY3JpcHQiO3RyeXtjKz0iO2Jhc2U2NCwiK2J0b2EoYil9Y2F0Y2goZSl7Yys9IjtjaGFyc2V0PXV0Zi04LCIrZW5jb2RlVVJJQ29tcG9uZW50KGIpfXJldHVybiBjfWZ1bmN0aW9uIGQoYSl7cmV0dXJuIGEudGV4dENvbnRlbnQrZShhKX1mdW5jdGlvbiBlKGEpe3ZhciBiPWEuX19ub2RlVXJsO2lmKCFiKXtiPWEub3duZXJEb2N1bWVudC5iYXNlVVJJO3ZhciBjPSJbIitNYXRoLmZsb29yKDFlMyooTWF0aC5yYW5kb20oKSsxKSkrIl0iLGQ9YS50ZXh0Q29udGVudC5tYXRjaCgvUG9seW1lclwoWyciXShbXiciXSopLyk7Yz1kJiZkWzFdfHxjLGIrPSIvIitjKyIuanMifXJldHVybiJcbi8vIyBzb3VyY2VVUkw9IitiKyJcbiJ9ZnVuY3Rpb24gZihhKXt2YXIgYj1hLm93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3R5bGUiKTtyZXR1cm4gYi50ZXh0Q29udGVudD1hLnRleHRDb250ZW50LG4ucmVzb2x2ZVVybHNJblN0eWxlKGIpLGJ9dmFyIGc9ImltcG9ydCIsaD1hLmZsYWdzLGk9L1RyaWRlbnQvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCksaj13aW5kb3cuU2hhZG93RE9NUG9seWZpbGw/d2luZG93LlNoYWRvd0RPTVBvbHlmaWxsLndyYXBJZk5lZWRlZChkb2N1bWVudCk6ZG9jdW1lbnQsaz17ZG9jdW1lbnRTZWxlY3RvcnM6ImxpbmtbcmVsPSIrZysiXSIsaW1wb3J0c1NlbGVjdG9yczpbImxpbmtbcmVsPSIrZysiXSIsImxpbmtbcmVsPXN0eWxlc2hlZXRdIiwic3R5bGUiLCJzY3JpcHQ6bm90KFt0eXBlXSkiLCdzY3JpcHRbdHlwZT0idGV4dC9qYXZhc2NyaXB0Il0nXS5qb2luKCIsIiksbWFwOntsaW5rOiJwYXJzZUxpbmsiLHNjcmlwdDoicGFyc2VTY3JpcHQiLHN0eWxlOiJwYXJzZVN0eWxlIn0scGFyc2VOZXh0OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5uZXh0VG9QYXJzZSgpO2EmJnRoaXMucGFyc2UoYSl9LHBhcnNlOmZ1bmN0aW9uKGEpe2lmKHRoaXMuaXNQYXJzZWQoYSkpcmV0dXJuIHZvaWQoaC5wYXJzZSYmY29uc29sZS5sb2coIlslc10gaXMgYWxyZWFkeSBwYXJzZWQiLGEubG9jYWxOYW1lKSk7dmFyIGI9dGhpc1t0aGlzLm1hcFthLmxvY2FsTmFtZV1dO2ImJih0aGlzLm1hcmtQYXJzaW5nKGEpLGIuY2FsbCh0aGlzLGEpKX0sbWFya1BhcnNpbmc6ZnVuY3Rpb24oYSl7aC5wYXJzZSYmY29uc29sZS5sb2coInBhcnNpbmciLGEpLHRoaXMucGFyc2luZ0VsZW1lbnQ9YX0sbWFya1BhcnNpbmdDb21wbGV0ZTpmdW5jdGlvbihhKXthLl9faW1wb3J0UGFyc2VkPSEwLGEuX19pbXBvcnRFbGVtZW50JiYoYS5fX2ltcG9ydEVsZW1lbnQuX19pbXBvcnRQYXJzZWQ9ITApLHRoaXMucGFyc2luZ0VsZW1lbnQ9bnVsbCxoLnBhcnNlJiZjb25zb2xlLmxvZygiY29tcGxldGVkIixhKX0saW52YWxpZGF0ZVBhcnNlOmZ1bmN0aW9uKGEpe2EmJmEuX19pbXBvcnRMaW5rJiYoYS5fX2ltcG9ydFBhcnNlZD1hLl9faW1wb3J0TGluay5fX2ltcG9ydFBhcnNlZD0hMSx0aGlzLnBhcnNlU29vbigpKX0scGFyc2VTb29uOmZ1bmN0aW9uKCl7dGhpcy5fcGFyc2VTb29uJiZjYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLl9wYXJzZURlbGF5KTt2YXIgYT10aGlzO3RoaXMuX3BhcnNlU29vbj1yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZnVuY3Rpb24oKXthLnBhcnNlTmV4dCgpfSl9LHBhcnNlSW1wb3J0OmZ1bmN0aW9uKGEpe2lmKEhUTUxJbXBvcnRzLl9faW1wb3J0c1BhcnNpbmdIb29rJiZIVE1MSW1wb3J0cy5fX2ltcG9ydHNQYXJzaW5nSG9vayhhKSxhLmltcG9ydC5fX2ltcG9ydFBhcnNlZD0hMCx0aGlzLm1hcmtQYXJzaW5nQ29tcGxldGUoYSksYS5kaXNwYXRjaEV2ZW50KGEuX19yZXNvdXJjZT9uZXcgQ3VzdG9tRXZlbnQoImxvYWQiLHtidWJibGVzOiExfSk6bmV3IEN1c3RvbUV2ZW50KCJlcnJvciIse2J1YmJsZXM6ITF9KSksYS5fX3BlbmRpbmcpZm9yKHZhciBiO2EuX19wZW5kaW5nLmxlbmd0aDspYj1hLl9fcGVuZGluZy5zaGlmdCgpLGImJmIoe3RhcmdldDphfSk7dGhpcy5wYXJzZU5leHQoKX0scGFyc2VMaW5rOmZ1bmN0aW9uKGEpe2IoYSk/dGhpcy5wYXJzZUltcG9ydChhKTooYS5ocmVmPWEuaHJlZix0aGlzLnBhcnNlR2VuZXJpYyhhKSl9LHBhcnNlU3R5bGU6ZnVuY3Rpb24oYSl7dmFyIGI9YTthPWYoYSksYS5fX2ltcG9ydEVsZW1lbnQ9Yix0aGlzLnBhcnNlR2VuZXJpYyhhKX0scGFyc2VHZW5lcmljOmZ1bmN0aW9uKGEpe3RoaXMudHJhY2tFbGVtZW50KGEpLGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoYSl9LHRyYWNrRWxlbWVudDpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMsZD1mdW5jdGlvbihkKXtiJiZiKGQpLGMubWFya1BhcnNpbmdDb21wbGV0ZShhKSxjLnBhcnNlTmV4dCgpfTtpZihhLmFkZEV2ZW50TGlzdGVuZXIoImxvYWQiLGQpLGEuYWRkRXZlbnRMaXN0ZW5lcigiZXJyb3IiLGQpLGkmJiJzdHlsZSI9PT1hLmxvY2FsTmFtZSl7dmFyIGU9ITE7aWYoLTE9PWEudGV4dENvbnRlbnQuaW5kZXhPZigiQGltcG9ydCIpKWU9ITA7ZWxzZSBpZihhLnNoZWV0KXtlPSEwO2Zvcih2YXIgZixnPWEuc2hlZXQuY3NzUnVsZXMsaD1nP2cubGVuZ3RoOjAsaj0wO2g+aiYmKGY9Z1tqXSk7aisrKWYudHlwZT09PUNTU1J1bGUuSU1QT1JUX1JVTEUmJihlPWUmJkJvb2xlYW4oZi5zdHlsZVNoZWV0KSl9ZSYmYS5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgibG9hZCIse2J1YmJsZXM6ITF9KSl9fSxwYXJzZVNjcmlwdDpmdW5jdGlvbihiKXt2YXIgZD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzY3JpcHQiKTtkLl9faW1wb3J0RWxlbWVudD1iLGQuc3JjPWIuc3JjP2Iuc3JjOmMoYiksYS5jdXJyZW50U2NyaXB0PWIsdGhpcy50cmFja0VsZW1lbnQoZCxmdW5jdGlvbigpe2QucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChkKSxhLmN1cnJlbnRTY3JpcHQ9bnVsbH0pLGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoZCl9LG5leHRUb1BhcnNlOmZ1bmN0aW9uKCl7cmV0dXJuIXRoaXMucGFyc2luZ0VsZW1lbnQmJnRoaXMubmV4dFRvUGFyc2VJbkRvYyhqKX0sbmV4dFRvUGFyc2VJbkRvYzpmdW5jdGlvbihhLGMpe2Zvcih2YXIgZCxlPWEucXVlcnlTZWxlY3RvckFsbCh0aGlzLnBhcnNlU2VsZWN0b3JzRm9yTm9kZShhKSksZj0wLGc9ZS5sZW5ndGg7Zz5mJiYoZD1lW2ZdKTtmKyspaWYoIXRoaXMuaXNQYXJzZWQoZCkpcmV0dXJuIHRoaXMuaGFzUmVzb3VyY2UoZCk/YihkKT90aGlzLm5leHRUb1BhcnNlSW5Eb2MoZC5pbXBvcnQsZCk6ZDp2b2lkIDA7cmV0dXJuIGN9LHBhcnNlU2VsZWN0b3JzRm9yTm9kZTpmdW5jdGlvbihhKXt2YXIgYj1hLm93bmVyRG9jdW1lbnR8fGE7cmV0dXJuIGI9PT1qP3RoaXMuZG9jdW1lbnRTZWxlY3RvcnM6dGhpcy5pbXBvcnRzU2VsZWN0b3JzfSxpc1BhcnNlZDpmdW5jdGlvbihhKXtyZXR1cm4gYS5fX2ltcG9ydFBhcnNlZH0saGFzUmVzb3VyY2U6ZnVuY3Rpb24oYSl7cmV0dXJuIGIoYSkmJiFhLmltcG9ydD8hMTohMH19LGw9Lyh1cmxcKCkoW14pXSopKFwpKS9nLG09LyhAaW1wb3J0W1xzXSsoPyF1cmxcKCkpKFteO10qKSg7KS9nLG49e3Jlc29sdmVVcmxzSW5TdHlsZTpmdW5jdGlvbihhKXt2YXIgYj1hLm93bmVyRG9jdW1lbnQsYz1iLmNyZWF0ZUVsZW1lbnQoImEiKTtyZXR1cm4gYS50ZXh0Q29udGVudD10aGlzLnJlc29sdmVVcmxzSW5Dc3NUZXh0KGEudGV4dENvbnRlbnQsYyksYX0scmVzb2x2ZVVybHNJbkNzc1RleHQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLnJlcGxhY2VVcmxzKGEsYixsKTtyZXR1cm4gYz10aGlzLnJlcGxhY2VVcmxzKGMsYixtKX0scmVwbGFjZVVybHM6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBhLnJlcGxhY2UoYyxmdW5jdGlvbihhLGMsZCxlKXt2YXIgZj1kLnJlcGxhY2UoL1siJ10vZywiIik7cmV0dXJuIGIuaHJlZj1mLGY9Yi5ocmVmLGMrIiciK2YrIiciK2V9KX19O2EucGFyc2VyPWssYS5wYXRoPW4sYS5pc0lFPWl9KEhUTUxJbXBvcnRzKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEpe3JldHVybiBjKGEscSl9ZnVuY3Rpb24gYyhhLGIpe3JldHVybiJsaW5rIj09PWEubG9jYWxOYW1lJiZhLmdldEF0dHJpYnV0ZSgicmVsIik9PT1ifWZ1bmN0aW9uIGQoYSxiKXt2YXIgYz1hO2MgaW5zdGFuY2VvZiBEb2N1bWVudHx8KGM9ZG9jdW1lbnQuaW1wbGVtZW50YXRpb24uY3JlYXRlSFRNTERvY3VtZW50KHEpKSxjLl9VUkw9Yjt2YXIgZD1jLmNyZWF0ZUVsZW1lbnQoImJhc2UiKTtkLnNldEF0dHJpYnV0ZSgiaHJlZiIsYiksYy5iYXNlVVJJfHwoYy5iYXNlVVJJPWIpO3ZhciBlPWMuY3JlYXRlRWxlbWVudCgibWV0YSIpO3JldHVybiBlLnNldEF0dHJpYnV0ZSgiY2hhcnNldCIsInV0Zi04IiksYy5oZWFkLmFwcGVuZENoaWxkKGUpLGMuaGVhZC5hcHBlbmRDaGlsZChkKSxhIGluc3RhbmNlb2YgRG9jdW1lbnR8fChjLmJvZHkuaW5uZXJIVE1MPWEpLHdpbmRvdy5IVE1MVGVtcGxhdGVFbGVtZW50JiZIVE1MVGVtcGxhdGVFbGVtZW50LmJvb3RzdHJhcCYmSFRNTFRlbXBsYXRlRWxlbWVudC5ib290c3RyYXAoYyksY31mdW5jdGlvbiBlKGEsYil7Yj1ifHxyLGcoZnVuY3Rpb24oKXtoKGEsYil9LGIpfWZ1bmN0aW9uIGYoYSl7cmV0dXJuImNvbXBsZXRlIj09PWEucmVhZHlTdGF0ZXx8YS5yZWFkeVN0YXRlPT09eX1mdW5jdGlvbiBnKGEsYil7aWYoZihiKSlhJiZhKCk7ZWxzZXt2YXIgYz1mdW5jdGlvbigpeygiY29tcGxldGUiPT09Yi5yZWFkeVN0YXRlfHxiLnJlYWR5U3RhdGU9PT15KSYmKGIucmVtb3ZlRXZlbnRMaXN0ZW5lcih6LGMpLGcoYSxiKSl9O2IuYWRkRXZlbnRMaXN0ZW5lcih6LGMpfX1mdW5jdGlvbiBoKGEsYil7ZnVuY3Rpb24gYygpe2Y9PWcmJmEmJmEoKX1mdW5jdGlvbiBkKCl7ZisrLGMoKX12YXIgZT1iLnF1ZXJ5U2VsZWN0b3JBbGwoImxpbmtbcmVsPWltcG9ydF0iKSxmPTAsZz1lLmxlbmd0aDtpZihnKWZvcih2YXIgaCxqPTA7Zz5qJiYoaD1lW2pdKTtqKyspaShoKT9kLmNhbGwoaCk6KGguYWRkRXZlbnRMaXN0ZW5lcigibG9hZCIsZCksaC5hZGRFdmVudExpc3RlbmVyKCJlcnJvciIsZCkpO2Vsc2UgYygpfWZ1bmN0aW9uIGkoYSl7cmV0dXJuIG8/YS5pbXBvcnQmJiJsb2FkaW5nIiE9PWEuaW1wb3J0LnJlYWR5U3RhdGV8fGEuX19sb2FkZWQ6YS5fX2ltcG9ydFBhcnNlZH1mdW5jdGlvbiBqKGEpe2Zvcih2YXIgYixjPTAsZD1hLmxlbmd0aDtkPmMmJihiPWFbY10pO2MrKylrKGIpJiZsKGIpfWZ1bmN0aW9uIGsoYSl7cmV0dXJuImxpbmsiPT09YS5sb2NhbE5hbWUmJiJpbXBvcnQiPT09YS5yZWx9ZnVuY3Rpb24gbChhKXt2YXIgYj1hLmltcG9ydDtiP20oe3RhcmdldDphfSk6KGEuYWRkRXZlbnRMaXN0ZW5lcigibG9hZCIsbSksYS5hZGRFdmVudExpc3RlbmVyKCJlcnJvciIsbSkpfWZ1bmN0aW9uIG0oYSl7YS50YXJnZXQuX19sb2FkZWQ9ITB9dmFyIG49ImltcG9ydCJpbiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJsaW5rIiksbz1uLHA9YS5mbGFncyxxPSJpbXBvcnQiLHI9d2luZG93LlNoYWRvd0RPTVBvbHlmaWxsP1NoYWRvd0RPTVBvbHlmaWxsLndyYXBJZk5lZWRlZChkb2N1bWVudCk6ZG9jdW1lbnQ7aWYobyl2YXIgcz17fTtlbHNlIHZhciB0PShhLnhocixhLkxvYWRlciksdT1hLnBhcnNlcixzPXtkb2N1bWVudHM6e30sZG9jdW1lbnRQcmVsb2FkU2VsZWN0b3JzOiJsaW5rW3JlbD0iK3ErIl0iLGltcG9ydHNQcmVsb2FkU2VsZWN0b3JzOlsibGlua1tyZWw9IitxKyJdIl0uam9pbigiLCIpLGxvYWROb2RlOmZ1bmN0aW9uKGEpe3YuYWRkTm9kZShhKX0sbG9hZFN1YnRyZWU6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5tYXJzaGFsTm9kZXMoYSk7di5hZGROb2RlcyhiKX0sbWFyc2hhbE5vZGVzOmZ1bmN0aW9uKGEpe3JldHVybiBhLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5sb2FkU2VsZWN0b3JzRm9yTm9kZShhKSl9LGxvYWRTZWxlY3RvcnNGb3JOb2RlOmZ1bmN0aW9uKGEpe3ZhciBiPWEub3duZXJEb2N1bWVudHx8YTtyZXR1cm4gYj09PXI/dGhpcy5kb2N1bWVudFByZWxvYWRTZWxlY3RvcnM6dGhpcy5pbXBvcnRzUHJlbG9hZFNlbGVjdG9yc30sbG9hZGVkOmZ1bmN0aW9uKGEsYyxlKXtpZihwLmxvYWQmJmNvbnNvbGUubG9nKCJsb2FkZWQiLGEsYyksYy5fX3Jlc291cmNlPWUsYihjKSl7dmFyIGY9dGhpcy5kb2N1bWVudHNbYV07Znx8KGY9ZChlLGEpLGYuX19pbXBvcnRMaW5rPWMsdGhpcy5ib290RG9jdW1lbnQoZiksdGhpcy5kb2N1bWVudHNbYV09ZiksYy5pbXBvcnQ9Zn11LnBhcnNlTmV4dCgpfSxib290RG9jdW1lbnQ6ZnVuY3Rpb24oYSl7dGhpcy5sb2FkU3VidHJlZShhKSx0aGlzLm9ic2VydmUoYSksdS5wYXJzZU5leHQoKX0sbG9hZGVkQWxsOmZ1bmN0aW9uKCl7dS5wYXJzZU5leHQoKX19LHY9bmV3IHQocy5sb2FkZWQuYmluZChzKSxzLmxvYWRlZEFsbC5iaW5kKHMpKTt2YXIgdz17Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIEhUTUxJbXBvcnRzLmN1cnJlbnRTY3JpcHR8fGRvY3VtZW50LmN1cnJlbnRTY3JpcHR9LGNvbmZpZ3VyYWJsZTohMH07aWYoT2JqZWN0LmRlZmluZVByb3BlcnR5KGRvY3VtZW50LCJfY3VycmVudFNjcmlwdCIsdyksT2JqZWN0LmRlZmluZVByb3BlcnR5KHIsIl9jdXJyZW50U2NyaXB0Iix3KSwhZG9jdW1lbnQuYmFzZVVSSSl7dmFyIHg9e2dldDpmdW5jdGlvbigpe3JldHVybiB3aW5kb3cubG9jYXRpb24uaHJlZn0sY29uZmlndXJhYmxlOiEwfTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZG9jdW1lbnQsImJhc2VVUkkiLHgpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLCJiYXNlVVJJIix4KX12YXIgeT1IVE1MSW1wb3J0cy5pc0lFPyJjb21wbGV0ZSI6ImludGVyYWN0aXZlIix6PSJyZWFkeXN0YXRlY2hhbmdlIjtvJiZuZXcgTXV0YXRpb25PYnNlcnZlcihmdW5jdGlvbihhKXtmb3IodmFyIGIsYz0wLGQ9YS5sZW5ndGg7ZD5jJiYoYj1hW2NdKTtjKyspYi5hZGRlZE5vZGVzJiZqKGIuYWRkZWROb2Rlcyl9KS5vYnNlcnZlKGRvY3VtZW50LmhlYWQse2NoaWxkTGlzdDohMH0pLGEuaGFzTmF0aXZlPW4sYS51c2VOYXRpdmU9byxhLmltcG9ydGVyPXMsYS5JTVBPUlRfTElOS19UWVBFPXEsYS5pc0ltcG9ydExvYWRlZD1pLGEuaW1wb3J0TG9hZGVyPXYsYS53aGVuUmVhZHk9ZSxhLndoZW5JbXBvcnRzUmVhZHk9ZX0od2luZG93LkhUTUxJbXBvcnRzKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEpe2Zvcih2YXIgYixkPTAsZT1hLmxlbmd0aDtlPmQmJihiPWFbZF0pO2QrKykiY2hpbGRMaXN0Ij09PWIudHlwZSYmYi5hZGRlZE5vZGVzLmxlbmd0aCYmYyhiLmFkZGVkTm9kZXMpfWZ1bmN0aW9uIGMoYSl7Zm9yKHZhciBiLGUsZz0wLGg9YS5sZW5ndGg7aD5nJiYoZT1hW2ddKTtnKyspYj1ifHxlLm93bmVyRG9jdW1lbnQsZChlKSYmZi5sb2FkTm9kZShlKSxlLmNoaWxkcmVuJiZlLmNoaWxkcmVuLmxlbmd0aCYmYyhlLmNoaWxkcmVuKX1mdW5jdGlvbiBkKGEpe3JldHVybiAxPT09YS5ub2RlVHlwZSYmZy5jYWxsKGEsZi5sb2FkU2VsZWN0b3JzRm9yTm9kZShhKSl9ZnVuY3Rpb24gZShhKXtoLm9ic2VydmUoYSx7Y2hpbGRMaXN0OiEwLHN1YnRyZWU6ITB9KX12YXIgZj0oYS5JTVBPUlRfTElOS19UWVBFLGEuaW1wb3J0ZXIpLGc9KGEucGFyc2VyLEhUTUxFbGVtZW50LnByb3RvdHlwZS5tYXRjaGVzfHxIVE1MRWxlbWVudC5wcm90b3R5cGUubWF0Y2hlc1NlbGVjdG9yfHxIVE1MRWxlbWVudC5wcm90b3R5cGUud2Via2l0TWF0Y2hlc1NlbGVjdG9yfHxIVE1MRWxlbWVudC5wcm90b3R5cGUubW96TWF0Y2hlc1NlbGVjdG9yfHxIVE1MRWxlbWVudC5wcm90b3R5cGUubXNNYXRjaGVzU2VsZWN0b3IpLGg9bmV3IE11dGF0aW9uT2JzZXJ2ZXIoYik7YS5vYnNlcnZlPWUsZi5vYnNlcnZlPWV9KEhUTUxJbXBvcnRzKSxmdW5jdGlvbigpe2Z1bmN0aW9uIGEoKXtIVE1MSW1wb3J0cy5pbXBvcnRlci5ib290RG9jdW1lbnQoYil9ImZ1bmN0aW9uIiE9dHlwZW9mIHdpbmRvdy5DdXN0b21FdmVudCYmKHdpbmRvdy5DdXN0b21FdmVudD1mdW5jdGlvbihhLGIpe3ZhciBjPWRvY3VtZW50LmNyZWF0ZUV2ZW50KCJIVE1MRXZlbnRzIik7cmV0dXJuIGMuaW5pdEV2ZW50KGEsYi5idWJibGVzPT09ITE/ITE6ITAsYi5jYW5jZWxhYmxlPT09ITE/ITE6ITAsYi5kZXRhaWwpLGN9KTt2YXIgYj13aW5kb3cuU2hhZG93RE9NUG9seWZpbGw/d2luZG93LlNoYWRvd0RPTVBvbHlmaWxsLndyYXBJZk5lZWRlZChkb2N1bWVudCk6ZG9jdW1lbnQ7SFRNTEltcG9ydHMud2hlbkltcG9ydHNSZWFkeShmdW5jdGlvbigpe0hUTUxJbXBvcnRzLnJlYWR5PSEwLEhUTUxJbXBvcnRzLnJlYWR5VGltZT0obmV3IERhdGUpLmdldFRpbWUoKSxiLmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KCJIVE1MSW1wb3J0c0xvYWRlZCIse2J1YmJsZXM6ITB9KSl9KSxIVE1MSW1wb3J0cy51c2VOYXRpdmV8fCgiY29tcGxldGUiPT09ZG9jdW1lbnQucmVhZHlTdGF0ZXx8ImludGVyYWN0aXZlIj09PWRvY3VtZW50LnJlYWR5U3RhdGUmJiF3aW5kb3cuYXR0YWNoRXZlbnQ/YSgpOmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoIkRPTUNvbnRlbnRMb2FkZWQiLGEpKX0oKSx3aW5kb3cuQ3VzdG9tRWxlbWVudHM9d2luZG93LkN1c3RvbUVsZW1lbnRzfHx7ZmxhZ3M6e319LGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSxjLGQpe3ZhciBlPWEuZmlyc3RFbGVtZW50Q2hpbGQ7aWYoIWUpZm9yKGU9YS5maXJzdENoaWxkO2UmJmUubm9kZVR5cGUhPT1Ob2RlLkVMRU1FTlRfTk9ERTspZT1lLm5leHRTaWJsaW5nO2Zvcig7ZTspYyhlLGQpIT09ITAmJmIoZSxjLGQpLGU9ZS5uZXh0RWxlbWVudFNpYmxpbmc7cmV0dXJuIG51bGx9ZnVuY3Rpb24gYyhhLGIpe2Zvcih2YXIgYz1hLnNoYWRvd1Jvb3Q7YzspZChjLGIpLGM9Yy5vbGRlclNoYWRvd1Jvb3R9ZnVuY3Rpb24gZChhLGQpe2IoYSxmdW5jdGlvbihhKXtyZXR1cm4gZChhKT8hMDp2b2lkIGMoYSxkKX0pLGMoYSxkKX1mdW5jdGlvbiBlKGEpe3JldHVybiBoKGEpPyhpKGEpLCEwKTp2b2lkIGwoYSl9ZnVuY3Rpb24gZihhKXtkKGEsZnVuY3Rpb24oYSl7cmV0dXJuIGUoYSk/ITA6dm9pZCAwfSl9ZnVuY3Rpb24gZyhhKXtyZXR1cm4gZShhKXx8ZihhKX1mdW5jdGlvbiBoKGIpe2lmKCFiLl9fdXBncmFkZWRfXyYmYi5ub2RlVHlwZT09PU5vZGUuRUxFTUVOVF9OT0RFKXt2YXIgYz1iLmdldEF0dHJpYnV0ZSgiaXMiKXx8Yi5sb2NhbE5hbWUsZD1hLnJlZ2lzdHJ5W2NdO2lmKGQpcmV0dXJuIEEuZG9tJiZjb25zb2xlLmdyb3VwKCJ1cGdyYWRlOiIsYi5sb2NhbE5hbWUpLGEudXBncmFkZShiKSxBLmRvbSYmY29uc29sZS5ncm91cEVuZCgpLCEwfX1mdW5jdGlvbiBpKGEpe2woYSkscihhKSYmZChhLGZ1bmN0aW9uKGEpe2woYSl9KX1mdW5jdGlvbiBqKGEpe2lmKEUucHVzaChhKSwhRCl7RD0hMDt2YXIgYj13aW5kb3cuUGxhdGZvcm0mJndpbmRvdy5QbGF0Zm9ybS5lbmRPZk1pY3JvdGFza3x8c2V0VGltZW91dDtiKGspfX1mdW5jdGlvbiBrKCl7RD0hMTtmb3IodmFyIGEsYj1FLGM9MCxkPWIubGVuZ3RoO2Q+YyYmKGE9YltjXSk7YysrKWEoKTtFPVtdfWZ1bmN0aW9uIGwoYSl7Qz9qKGZ1bmN0aW9uKCl7bShhKX0pOm0oYSl9ZnVuY3Rpb24gbShhKXsoYS5hdHRhY2hlZENhbGxiYWNrfHxhLmRldGFjaGVkQ2FsbGJhY2t8fGEuX191cGdyYWRlZF9fJiZBLmRvbSkmJihBLmRvbSYmY29uc29sZS5ncm91cCgiaW5zZXJ0ZWQ6IixhLmxvY2FsTmFtZSkscihhKSYmKGEuX19pbnNlcnRlZD0oYS5fX2luc2VydGVkfHwwKSsxLGEuX19pbnNlcnRlZDwxJiYoYS5fX2luc2VydGVkPTEpLGEuX19pbnNlcnRlZD4xP0EuZG9tJiZjb25zb2xlLndhcm4oImluc2VydGVkOiIsYS5sb2NhbE5hbWUsImluc2VydC9yZW1vdmUgY291bnQ6IixhLl9faW5zZXJ0ZWQpOmEuYXR0YWNoZWRDYWxsYmFjayYmKEEuZG9tJiZjb25zb2xlLmxvZygiaW5zZXJ0ZWQ6IixhLmxvY2FsTmFtZSksYS5hdHRhY2hlZENhbGxiYWNrKCkpKSxBLmRvbSYmY29uc29sZS5ncm91cEVuZCgpKX1mdW5jdGlvbiBuKGEpe28oYSksZChhLGZ1bmN0aW9uKGEpe28oYSl9KX1mdW5jdGlvbiBvKGEpe0M/aihmdW5jdGlvbigpe3AoYSl9KTpwKGEpfWZ1bmN0aW9uIHAoYSl7KGEuYXR0YWNoZWRDYWxsYmFja3x8YS5kZXRhY2hlZENhbGxiYWNrfHxhLl9fdXBncmFkZWRfXyYmQS5kb20pJiYoQS5kb20mJmNvbnNvbGUuZ3JvdXAoInJlbW92ZWQ6IixhLmxvY2FsTmFtZSkscihhKXx8KGEuX19pbnNlcnRlZD0oYS5fX2luc2VydGVkfHwwKS0xLGEuX19pbnNlcnRlZD4wJiYoYS5fX2luc2VydGVkPTApLGEuX19pbnNlcnRlZDwwP0EuZG9tJiZjb25zb2xlLndhcm4oInJlbW92ZWQ6IixhLmxvY2FsTmFtZSwiaW5zZXJ0L3JlbW92ZSBjb3VudDoiLGEuX19pbnNlcnRlZCk6YS5kZXRhY2hlZENhbGxiYWNrJiZhLmRldGFjaGVkQ2FsbGJhY2soKSksQS5kb20mJmNvbnNvbGUuZ3JvdXBFbmQoKSl9ZnVuY3Rpb24gcShhKXtyZXR1cm4gd2luZG93LlNoYWRvd0RPTVBvbHlmaWxsP1NoYWRvd0RPTVBvbHlmaWxsLndyYXBJZk5lZWRlZChhKTphfWZ1bmN0aW9uIHIoYSl7Zm9yKHZhciBiPWEsYz1xKGRvY3VtZW50KTtiOyl7aWYoYj09YylyZXR1cm4hMDtiPWIucGFyZW50Tm9kZXx8Yi5ob3N0fX1mdW5jdGlvbiBzKGEpe2lmKGEuc2hhZG93Um9vdCYmIWEuc2hhZG93Um9vdC5fX3dhdGNoZWQpe0EuZG9tJiZjb25zb2xlLmxvZygid2F0Y2hpbmcgc2hhZG93LXJvb3QgZm9yOiAiLGEubG9jYWxOYW1lKTtmb3IodmFyIGI9YS5zaGFkb3dSb290O2I7KXQoYiksYj1iLm9sZGVyU2hhZG93Um9vdH19ZnVuY3Rpb24gdChhKXthLl9fd2F0Y2hlZHx8KHcoYSksYS5fX3dhdGNoZWQ9ITApfWZ1bmN0aW9uIHUoYSl7aWYoQS5kb20pe3ZhciBiPWFbMF07aWYoYiYmImNoaWxkTGlzdCI9PT1iLnR5cGUmJmIuYWRkZWROb2RlcyYmYi5hZGRlZE5vZGVzKXtmb3IodmFyIGM9Yi5hZGRlZE5vZGVzWzBdO2MmJmMhPT1kb2N1bWVudCYmIWMuaG9zdDspYz1jLnBhcmVudE5vZGU7dmFyIGQ9YyYmKGMuVVJMfHxjLl9VUkx8fGMuaG9zdCYmYy5ob3N0LmxvY2FsTmFtZSl8fCIiO2Q9ZC5zcGxpdCgiLz8iKS5zaGlmdCgpLnNwbGl0KCIvIikucG9wKCl9Y29uc29sZS5ncm91cCgibXV0YXRpb25zICglZCkgWyVzXSIsYS5sZW5ndGgsZHx8IiIpfWEuZm9yRWFjaChmdW5jdGlvbihhKXsiY2hpbGRMaXN0Ij09PWEudHlwZSYmKEcoYS5hZGRlZE5vZGVzLGZ1bmN0aW9uKGEpe2EubG9jYWxOYW1lJiZnKGEpfSksRyhhLnJlbW92ZWROb2RlcyxmdW5jdGlvbihhKXthLmxvY2FsTmFtZSYmbihhKX0pKX0pLEEuZG9tJiZjb25zb2xlLmdyb3VwRW5kKCl9ZnVuY3Rpb24gdigpe3UoRi50YWtlUmVjb3JkcygpKSxrKCl9ZnVuY3Rpb24gdyhhKXtGLm9ic2VydmUoYSx7Y2hpbGRMaXN0OiEwLHN1YnRyZWU6ITB9KX1mdW5jdGlvbiB4KGEpe3coYSl9ZnVuY3Rpb24geShhKXtBLmRvbSYmY29uc29sZS5ncm91cCgidXBncmFkZURvY3VtZW50OiAiLGEuYmFzZVVSSS5zcGxpdCgiLyIpLnBvcCgpKSxnKGEpLEEuZG9tJiZjb25zb2xlLmdyb3VwRW5kKCl9ZnVuY3Rpb24geihhKXthPXEoYSk7Zm9yKHZhciBiLGM9YS5xdWVyeVNlbGVjdG9yQWxsKCJsaW5rW3JlbD0iK0IrIl0iKSxkPTAsZT1jLmxlbmd0aDtlPmQmJihiPWNbZF0pO2QrKyliLmltcG9ydCYmYi5pbXBvcnQuX19wYXJzZWQmJnooYi5pbXBvcnQpO3koYSl9dmFyIEE9d2luZG93LmxvZ0ZsYWdzfHx7fSxCPXdpbmRvdy5IVE1MSW1wb3J0cz9IVE1MSW1wb3J0cy5JTVBPUlRfTElOS19UWVBFOiJub25lIixDPSF3aW5kb3cuTXV0YXRpb25PYnNlcnZlcnx8d2luZG93Lk11dGF0aW9uT2JzZXJ2ZXI9PT13aW5kb3cuSnNNdXRhdGlvbk9ic2VydmVyO2EuaGFzUG9seWZpbGxNdXRhdGlvbnM9Qzt2YXIgRD0hMSxFPVtdLEY9bmV3IE11dGF0aW9uT2JzZXJ2ZXIodSksRz1BcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsLmJpbmQoQXJyYXkucHJvdG90eXBlLmZvckVhY2gpO2EuSU1QT1JUX0xJTktfVFlQRT1CLGEud2F0Y2hTaGFkb3c9cyxhLnVwZ3JhZGVEb2N1bWVudFRyZWU9eixhLnVwZ3JhZGVBbGw9ZyxhLnVwZ3JhZGVTdWJ0cmVlPWYsYS5pbnNlcnRlZE5vZGU9aSxhLm9ic2VydmVEb2N1bWVudD14LGEudXBncmFkZURvY3VtZW50PXksYS50YWtlUmVjb3Jkcz12fSh3aW5kb3cuQ3VzdG9tRWxlbWVudHMpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYixnKXt2YXIgaD1nfHx7fTtpZighYil0aHJvdyBuZXcgRXJyb3IoImRvY3VtZW50LnJlZ2lzdGVyRWxlbWVudDogZmlyc3QgYXJndW1lbnQgYG5hbWVgIG11c3Qgbm90IGJlIGVtcHR5Iik7aWYoYi5pbmRleE9mKCItIik8MCl0aHJvdyBuZXcgRXJyb3IoImRvY3VtZW50LnJlZ2lzdGVyRWxlbWVudDogZmlyc3QgYXJndW1lbnQgKCduYW1lJykgbXVzdCBjb250YWluIGEgZGFzaCAoJy0nKS4gQXJndW1lbnQgcHJvdmlkZWQgd2FzICciK1N0cmluZyhiKSsiJy4iKTsKaWYoYyhiKSl0aHJvdyBuZXcgRXJyb3IoIkZhaWxlZCB0byBleGVjdXRlICdyZWdpc3RlckVsZW1lbnQnIG9uICdEb2N1bWVudCc6IFJlZ2lzdHJhdGlvbiBmYWlsZWQgZm9yIHR5cGUgJyIrU3RyaW5nKGIpKyInLiBUaGUgdHlwZSBuYW1lIGlzIGludmFsaWQuIik7aWYobihiKSl0aHJvdyBuZXcgRXJyb3IoIkR1cGxpY2F0ZURlZmluaXRpb25FcnJvcjogYSB0eXBlIHdpdGggbmFtZSAnIitTdHJpbmcoYikrIicgaXMgYWxyZWFkeSByZWdpc3RlcmVkIik7aWYoIWgucHJvdG90eXBlKXRocm93IG5ldyBFcnJvcigiT3B0aW9ucyBtaXNzaW5nIHJlcXVpcmVkIHByb3RvdHlwZSBwcm9wZXJ0eSIpO3JldHVybiBoLl9fbmFtZT1iLnRvTG93ZXJDYXNlKCksaC5saWZlY3ljbGU9aC5saWZlY3ljbGV8fHt9LGguYW5jZXN0cnk9ZChoLmV4dGVuZHMpLGUoaCksZihoKSxsKGgucHJvdG90eXBlKSxvKGguX19uYW1lLGgpLGguY3Rvcj1wKGgpLGguY3Rvci5wcm90b3R5cGU9aC5wcm90b3R5cGUsaC5wcm90b3R5cGUuY29uc3RydWN0b3I9aC5jdG9yLGEucmVhZHkmJmEudXBncmFkZURvY3VtZW50VHJlZShkb2N1bWVudCksaC5jdG9yfWZ1bmN0aW9uIGMoYSl7Zm9yKHZhciBiPTA7Yjx5Lmxlbmd0aDtiKyspaWYoYT09PXlbYl0pcmV0dXJuITB9ZnVuY3Rpb24gZChhKXt2YXIgYj1uKGEpO3JldHVybiBiP2QoYi5leHRlbmRzKS5jb25jYXQoW2JdKTpbXX1mdW5jdGlvbiBlKGEpe2Zvcih2YXIgYixjPWEuZXh0ZW5kcyxkPTA7Yj1hLmFuY2VzdHJ5W2RdO2QrKyljPWIuaXMmJmIudGFnO2EudGFnPWN8fGEuX19uYW1lLGMmJihhLmlzPWEuX19uYW1lKX1mdW5jdGlvbiBmKGEpe2lmKCFPYmplY3QuX19wcm90b19fKXt2YXIgYj1IVE1MRWxlbWVudC5wcm90b3R5cGU7aWYoYS5pcyl7dmFyIGM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChhLnRhZyksZD1PYmplY3QuZ2V0UHJvdG90eXBlT2YoYyk7ZD09PWEucHJvdG90eXBlJiYoYj1kKX1mb3IodmFyIGUsZj1hLnByb3RvdHlwZTtmJiZmIT09YjspZT1PYmplY3QuZ2V0UHJvdG90eXBlT2YoZiksZi5fX3Byb3RvX189ZSxmPWU7YS5uYXRpdmU9Yn19ZnVuY3Rpb24gZyhhKXtyZXR1cm4gaChCKGEudGFnKSxhKX1mdW5jdGlvbiBoKGIsYyl7cmV0dXJuIGMuaXMmJmIuc2V0QXR0cmlidXRlKCJpcyIsYy5pcyksYi5yZW1vdmVBdHRyaWJ1dGUoInVucmVzb2x2ZWQiKSxpKGIsYyksYi5fX3VwZ3JhZGVkX189ITAsayhiKSxhLmluc2VydGVkTm9kZShiKSxhLnVwZ3JhZGVTdWJ0cmVlKGIpLGJ9ZnVuY3Rpb24gaShhLGIpe09iamVjdC5fX3Byb3RvX18/YS5fX3Byb3RvX189Yi5wcm90b3R5cGU6KGooYSxiLnByb3RvdHlwZSxiLm5hdGl2ZSksYS5fX3Byb3RvX189Yi5wcm90b3R5cGUpfWZ1bmN0aW9uIGooYSxiLGMpe2Zvcih2YXIgZD17fSxlPWI7ZSE9PWMmJmUhPT1IVE1MRWxlbWVudC5wcm90b3R5cGU7KXtmb3IodmFyIGYsZz1PYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhlKSxoPTA7Zj1nW2hdO2grKylkW2ZdfHwoT2JqZWN0LmRlZmluZVByb3BlcnR5KGEsZixPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsZikpLGRbZl09MSk7ZT1PYmplY3QuZ2V0UHJvdG90eXBlT2YoZSl9fWZ1bmN0aW9uIGsoYSl7YS5jcmVhdGVkQ2FsbGJhY2smJmEuY3JlYXRlZENhbGxiYWNrKCl9ZnVuY3Rpb24gbChhKXtpZighYS5zZXRBdHRyaWJ1dGUuX3BvbHlmaWxsZWQpe3ZhciBiPWEuc2V0QXR0cmlidXRlO2Euc2V0QXR0cmlidXRlPWZ1bmN0aW9uKGEsYyl7bS5jYWxsKHRoaXMsYSxjLGIpfTt2YXIgYz1hLnJlbW92ZUF0dHJpYnV0ZTthLnJlbW92ZUF0dHJpYnV0ZT1mdW5jdGlvbihhKXttLmNhbGwodGhpcyxhLG51bGwsYyl9LGEuc2V0QXR0cmlidXRlLl9wb2x5ZmlsbGVkPSEwfX1mdW5jdGlvbiBtKGEsYixjKXthPWEudG9Mb3dlckNhc2UoKTt2YXIgZD10aGlzLmdldEF0dHJpYnV0ZShhKTtjLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt2YXIgZT10aGlzLmdldEF0dHJpYnV0ZShhKTt0aGlzLmF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjayYmZSE9PWQmJnRoaXMuYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrKGEsZCxlKX1mdW5jdGlvbiBuKGEpe3JldHVybiBhP3pbYS50b0xvd2VyQ2FzZSgpXTp2b2lkIDB9ZnVuY3Rpb24gbyhhLGIpe3pbYV09Yn1mdW5jdGlvbiBwKGEpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBnKGEpfX1mdW5jdGlvbiBxKGEsYixjKXtyZXR1cm4gYT09PUE/cihiLGMpOkMoYSxiKX1mdW5jdGlvbiByKGEsYil7dmFyIGM9bihifHxhKTtpZihjKXtpZihhPT1jLnRhZyYmYj09Yy5pcylyZXR1cm4gbmV3IGMuY3RvcjtpZighYiYmIWMuaXMpcmV0dXJuIG5ldyBjLmN0b3J9aWYoYil7dmFyIGQ9cihhKTtyZXR1cm4gZC5zZXRBdHRyaWJ1dGUoImlzIixiKSxkfXZhciBkPUIoYSk7cmV0dXJuIGEuaW5kZXhPZigiLSIpPj0wJiZpKGQsSFRNTEVsZW1lbnQpLGR9ZnVuY3Rpb24gcyhhKXtpZighYS5fX3VwZ3JhZGVkX18mJmEubm9kZVR5cGU9PT1Ob2RlLkVMRU1FTlRfTk9ERSl7dmFyIGI9YS5nZXRBdHRyaWJ1dGUoImlzIiksYz1uKGJ8fGEubG9jYWxOYW1lKTtpZihjKXtpZihiJiZjLnRhZz09YS5sb2NhbE5hbWUpcmV0dXJuIGgoYSxjKTtpZighYiYmIWMuZXh0ZW5kcylyZXR1cm4gaChhLGMpfX19ZnVuY3Rpb24gdChiKXt2YXIgYz1ELmNhbGwodGhpcyxiKTtyZXR1cm4gYS51cGdyYWRlQWxsKGMpLGN9YXx8KGE9d2luZG93LkN1c3RvbUVsZW1lbnRzPXtmbGFnczp7fX0pO3ZhciB1PWEuZmxhZ3Msdj1Cb29sZWFuKGRvY3VtZW50LnJlZ2lzdGVyRWxlbWVudCksdz0hdS5yZWdpc3RlciYmdiYmIXdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCYmKCF3aW5kb3cuSFRNTEltcG9ydHN8fEhUTUxJbXBvcnRzLnVzZU5hdGl2ZSk7aWYodyl7dmFyIHg9ZnVuY3Rpb24oKXt9O2EucmVnaXN0cnk9e30sYS51cGdyYWRlRWxlbWVudD14LGEud2F0Y2hTaGFkb3c9eCxhLnVwZ3JhZGU9eCxhLnVwZ3JhZGVBbGw9eCxhLnVwZ3JhZGVTdWJ0cmVlPXgsYS5vYnNlcnZlRG9jdW1lbnQ9eCxhLnVwZ3JhZGVEb2N1bWVudD14LGEudXBncmFkZURvY3VtZW50VHJlZT14LGEudGFrZVJlY29yZHM9eCxhLnJlc2VydmVkVGFnTGlzdD1bXX1lbHNle3ZhciB5PVsiYW5ub3RhdGlvbi14bWwiLCJjb2xvci1wcm9maWxlIiwiZm9udC1mYWNlIiwiZm9udC1mYWNlLXNyYyIsImZvbnQtZmFjZS11cmkiLCJmb250LWZhY2UtZm9ybWF0IiwiZm9udC1mYWNlLW5hbWUiLCJtaXNzaW5nLWdseXBoIl0sej17fSxBPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sIixCPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQuYmluZChkb2N1bWVudCksQz1kb2N1bWVudC5jcmVhdGVFbGVtZW50TlMuYmluZChkb2N1bWVudCksRD1Ob2RlLnByb3RvdHlwZS5jbG9uZU5vZGU7ZG9jdW1lbnQucmVnaXN0ZXJFbGVtZW50PWIsZG9jdW1lbnQuY3JlYXRlRWxlbWVudD1yLGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUz1xLE5vZGUucHJvdG90eXBlLmNsb25lTm9kZT10LGEucmVnaXN0cnk9eixhLnVwZ3JhZGU9c312YXIgRTtFPU9iamVjdC5fX3Byb3RvX198fHc/ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYSBpbnN0YW5jZW9mIGJ9OmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPWE7Yzspe2lmKGM9PT1iLnByb3RvdHlwZSlyZXR1cm4hMDtjPWMuX19wcm90b19ffXJldHVybiExfSxhLmluc3RhbmNlb2Y9RSxhLnJlc2VydmVkVGFnTGlzdD15LGRvY3VtZW50LnJlZ2lzdGVyPWRvY3VtZW50LnJlZ2lzdGVyRWxlbWVudCxhLmhhc05hdGl2ZT12LGEudXNlTmF0aXZlPXd9KHdpbmRvdy5DdXN0b21FbGVtZW50cyksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhKXtyZXR1cm4ibGluayI9PT1hLmxvY2FsTmFtZSYmYS5nZXRBdHRyaWJ1dGUoInJlbCIpPT09Y312YXIgYz1hLklNUE9SVF9MSU5LX1RZUEUsZD17c2VsZWN0b3JzOlsibGlua1tyZWw9IitjKyJdIl0sbWFwOntsaW5rOiJwYXJzZUxpbmsifSxwYXJzZTpmdW5jdGlvbihhKXtpZighYS5fX3BhcnNlZCl7YS5fX3BhcnNlZD0hMDt2YXIgYj1hLnF1ZXJ5U2VsZWN0b3JBbGwoZC5zZWxlY3RvcnMpO2UoYixmdW5jdGlvbihhKXtkW2QubWFwW2EubG9jYWxOYW1lXV0oYSl9KSxDdXN0b21FbGVtZW50cy51cGdyYWRlRG9jdW1lbnQoYSksQ3VzdG9tRWxlbWVudHMub2JzZXJ2ZURvY3VtZW50KGEpfX0scGFyc2VMaW5rOmZ1bmN0aW9uKGEpe2IoYSkmJnRoaXMucGFyc2VJbXBvcnQoYSl9LHBhcnNlSW1wb3J0OmZ1bmN0aW9uKGEpe2EuaW1wb3J0JiZkLnBhcnNlKGEuaW1wb3J0KX19LGU9QXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbC5iaW5kKEFycmF5LnByb3RvdHlwZS5mb3JFYWNoKTthLnBhcnNlcj1kLGEuSU1QT1JUX0xJTktfVFlQRT1jfSh3aW5kb3cuQ3VzdG9tRWxlbWVudHMpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoKXtDdXN0b21FbGVtZW50cy5wYXJzZXIucGFyc2UoZG9jdW1lbnQpLEN1c3RvbUVsZW1lbnRzLnVwZ3JhZGVEb2N1bWVudChkb2N1bWVudCk7dmFyIGE9d2luZG93LlBsYXRmb3JtJiZQbGF0Zm9ybS5lbmRPZk1pY3JvdGFzaz9QbGF0Zm9ybS5lbmRPZk1pY3JvdGFzazpzZXRUaW1lb3V0O2EoZnVuY3Rpb24oKXtDdXN0b21FbGVtZW50cy5yZWFkeT0hMCxDdXN0b21FbGVtZW50cy5yZWFkeVRpbWU9RGF0ZS5ub3coKSx3aW5kb3cuSFRNTEltcG9ydHMmJihDdXN0b21FbGVtZW50cy5lbGFwc2VkPUN1c3RvbUVsZW1lbnRzLnJlYWR5VGltZS1IVE1MSW1wb3J0cy5yZWFkeVRpbWUpLGRvY3VtZW50LmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KCJXZWJDb21wb25lbnRzUmVhZHkiLHtidWJibGVzOiEwfSkpLHdpbmRvdy5IVE1MSW1wb3J0cyYmKEhUTUxJbXBvcnRzLl9faW1wb3J0c1BhcnNpbmdIb29rPWZ1bmN0aW9uKGEpe0N1c3RvbUVsZW1lbnRzLnBhcnNlci5wYXJzZShhLmltcG9ydCl9KX0pfWlmKCJmdW5jdGlvbiIhPXR5cGVvZiB3aW5kb3cuQ3VzdG9tRXZlbnQmJih3aW5kb3cuQ3VzdG9tRXZlbnQ9ZnVuY3Rpb24oYSl7dmFyIGI9ZG9jdW1lbnQuY3JlYXRlRXZlbnQoIkhUTUxFdmVudHMiKTtyZXR1cm4gYi5pbml0RXZlbnQoYSwhMCwhMCksYn0pLCJjb21wbGV0ZSI9PT1kb2N1bWVudC5yZWFkeVN0YXRlfHxhLmZsYWdzLmVhZ2VyKWIoKTtlbHNlIGlmKCJpbnRlcmFjdGl2ZSIhPT1kb2N1bWVudC5yZWFkeVN0YXRlfHx3aW5kb3cuYXR0YWNoRXZlbnR8fHdpbmRvdy5IVE1MSW1wb3J0cyYmIXdpbmRvdy5IVE1MSW1wb3J0cy5yZWFkeSl7dmFyIGM9d2luZG93LkhUTUxJbXBvcnRzJiYhSFRNTEltcG9ydHMucmVhZHk/IkhUTUxJbXBvcnRzTG9hZGVkIjoiRE9NQ29udGVudExvYWRlZCI7d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoYyxiKX1lbHNlIGIoKX0od2luZG93LkN1c3RvbUVsZW1lbnRzKSxmdW5jdGlvbigpe2lmKHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCl7dmFyIGE9WyJ1cGdyYWRlQWxsIiwidXBncmFkZVN1YnRyZWUiLCJvYnNlcnZlRG9jdW1lbnQiLCJ1cGdyYWRlRG9jdW1lbnQiXSxiPXt9O2EuZm9yRWFjaChmdW5jdGlvbihhKXtiW2FdPUN1c3RvbUVsZW1lbnRzW2FdfSksYS5mb3JFYWNoKGZ1bmN0aW9uKGEpe0N1c3RvbUVsZW1lbnRzW2FdPWZ1bmN0aW9uKGMpe3JldHVybiBiW2FdKHdyYXAoYykpfX0pfX0oKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEpe3RoaXMuY2FjaGU9T2JqZWN0LmNyZWF0ZShudWxsKSx0aGlzLm1hcD1PYmplY3QuY3JlYXRlKG51bGwpLHRoaXMucmVxdWVzdHM9MCx0aGlzLnJlZ2V4PWF9dmFyIGM9YS5lbmRPZk1pY3JvdGFzaztiLnByb3RvdHlwZT17ZXh0cmFjdFVybHM6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGMsZCxlPVtdO2M9dGhpcy5yZWdleC5leGVjKGEpOylkPW5ldyBVUkwoY1sxXSxiKSxlLnB1c2goe21hdGNoZWQ6Y1swXSx1cmw6ZC5ocmVmfSk7cmV0dXJuIGV9LHByb2Nlc3M6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXRoaXMuZXh0cmFjdFVybHMoYSxiKSxlPWMuYmluZChudWxsLHRoaXMubWFwKTt0aGlzLmZldGNoKGQsZSl9LGZldGNoOmZ1bmN0aW9uKGEsYil7dmFyIGM9YS5sZW5ndGg7aWYoIWMpcmV0dXJuIGIoKTtmb3IodmFyIGQsZSxmLGc9ZnVuY3Rpb24oKXswPT09LS1jJiZiKCl9LGg9MDtjPmg7aCsrKWQ9YVtoXSxmPWQudXJsLGU9dGhpcy5jYWNoZVtmXSxlfHwoZT10aGlzLnhocihmKSxlLm1hdGNoPWQsdGhpcy5jYWNoZVtmXT1lKSxlLndhaXQoZyl9LGhhbmRsZVhocjpmdW5jdGlvbihhKXt2YXIgYj1hLm1hdGNoLGM9Yi51cmwsZD1hLnJlc3BvbnNlfHxhLnJlc3BvbnNlVGV4dHx8IiI7dGhpcy5tYXBbY109ZCx0aGlzLmZldGNoKHRoaXMuZXh0cmFjdFVybHMoZCxjKSxhLnJlc29sdmUpfSx4aHI6ZnVuY3Rpb24oYSl7dGhpcy5yZXF1ZXN0cysrO3ZhciBiPW5ldyBYTUxIdHRwUmVxdWVzdDtyZXR1cm4gYi5vcGVuKCJHRVQiLGEsITApLGIuc2VuZCgpLGIub25lcnJvcj1iLm9ubG9hZD10aGlzLmhhbmRsZVhoci5iaW5kKHRoaXMsYiksYi5wZW5kaW5nPVtdLGIucmVzb2x2ZT1mdW5jdGlvbigpe2Zvcih2YXIgYT1iLnBlbmRpbmcsYz0wO2M8YS5sZW5ndGg7YysrKWFbY10oKTtiLnBlbmRpbmc9bnVsbH0sYi53YWl0PWZ1bmN0aW9uKGEpe2IucGVuZGluZz9iLnBlbmRpbmcucHVzaChhKTpjKGEpfSxifX0sYS5Mb2FkZXI9Yn0od2luZG93LlBsYXRmb3JtKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKCl7dGhpcy5sb2FkZXI9bmV3IGQodGhpcy5yZWdleCl9dmFyIGM9YS51cmxSZXNvbHZlcixkPWEuTG9hZGVyO2IucHJvdG90eXBlPXtyZWdleDovQGltcG9ydFxzKyg/OnVybCk/WyInXChdKihbXiciXCldKilbJyJcKV0qOy9nLHJlc29sdmU6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWZ1bmN0aW9uKGQpe2ModGhpcy5mbGF0dGVuKGEsYixkKSl9LmJpbmQodGhpcyk7dGhpcy5sb2FkZXIucHJvY2VzcyhhLGIsZCl9LHJlc29sdmVOb2RlOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD1hLnRleHRDb250ZW50LGU9ZnVuY3Rpb24oYil7YS50ZXh0Q29udGVudD1iLGMoYSl9O3RoaXMucmVzb2x2ZShkLGIsZSl9LGZsYXR0ZW46ZnVuY3Rpb24oYSxiLGQpe2Zvcih2YXIgZSxmLGcsaD10aGlzLmxvYWRlci5leHRyYWN0VXJscyhhLGIpLGk9MDtpPGgubGVuZ3RoO2krKyllPWhbaV0sZj1lLnVybCxnPWMucmVzb2x2ZUNzc1RleHQoZFtmXSxmLCEwKSxnPXRoaXMuZmxhdHRlbihnLGIsZCksYT1hLnJlcGxhY2UoZS5tYXRjaGVkLGcpO3JldHVybiBhfSxsb2FkU3R5bGVzOmZ1bmN0aW9uKGEsYixjKXtmdW5jdGlvbiBkKCl7ZisrLGY9PT1nJiZjJiZjKCl9Zm9yKHZhciBlLGY9MCxnPWEubGVuZ3RoLGg9MDtnPmgmJihlPWFbaF0pO2grKyl0aGlzLnJlc29sdmVOb2RlKGUsYixkKX19O3ZhciBlPW5ldyBiO2Euc3R5bGVSZXNvbHZlcj1lfSh3aW5kb3cuUGxhdGZvcm0pLGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGEoYSl7Zm9yKDthLnBhcmVudE5vZGU7KWE9YS5wYXJlbnROb2RlO3JldHVybiJmdW5jdGlvbiI9PXR5cGVvZiBhLmdldEVsZW1lbnRCeUlkP2E6bnVsbH1mdW5jdGlvbiBiKGEsYixjKXt2YXIgZD1hLmJpbmRpbmdzXztyZXR1cm4gZHx8KGQ9YS5iaW5kaW5nc189e30pLGRbYl0mJmNbYl0uY2xvc2UoKSxkW2JdPWN9ZnVuY3Rpb24gYyhhLGIsYyl7cmV0dXJuIGN9ZnVuY3Rpb24gZChhKXtyZXR1cm4gbnVsbD09YT8iIjphfWZ1bmN0aW9uIGUoYSxiKXthLmRhdGE9ZChiKX1mdW5jdGlvbiBmKGEpe3JldHVybiBmdW5jdGlvbihiKXtyZXR1cm4gZShhLGIpfX1mdW5jdGlvbiBnKGEsYixjLGUpe3JldHVybiBjP3ZvaWQoZT9hLnNldEF0dHJpYnV0ZShiLCIiKTphLnJlbW92ZUF0dHJpYnV0ZShiKSk6dm9pZCBhLnNldEF0dHJpYnV0ZShiLGQoZSkpfWZ1bmN0aW9uIGgoYSxiLGMpe3JldHVybiBmdW5jdGlvbihkKXtnKGEsYixjLGQpfX1mdW5jdGlvbiBpKGEpe3N3aXRjaChhLnR5cGUpe2Nhc2UiY2hlY2tib3giOnJldHVybiB1O2Nhc2UicmFkaW8iOmNhc2Uic2VsZWN0LW11bHRpcGxlIjpjYXNlInNlbGVjdC1vbmUiOnJldHVybiJjaGFuZ2UiO2Nhc2UicmFuZ2UiOmlmKC9UcmlkZW50fE1TSUUvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkpcmV0dXJuImNoYW5nZSI7ZGVmYXVsdDpyZXR1cm4iaW5wdXQifX1mdW5jdGlvbiBqKGEsYixjLGUpe2FbYl09KGV8fGQpKGMpfWZ1bmN0aW9uIGsoYSxiLGMpe3JldHVybiBmdW5jdGlvbihkKXtyZXR1cm4gaihhLGIsZCxjKX19ZnVuY3Rpb24gbCgpe31mdW5jdGlvbiBtKGEsYixjLGQpe2Z1bmN0aW9uIGUoKXtjLnNldFZhbHVlKGFbYl0pLGMuZGlzY2FyZENoYW5nZXMoKSwoZHx8bCkoYSksUGxhdGZvcm0ucGVyZm9ybU1pY3JvdGFza0NoZWNrcG9pbnQoKX12YXIgZj1pKGEpO3JldHVybiBhLmFkZEV2ZW50TGlzdGVuZXIoZixlKSx7Y2xvc2U6ZnVuY3Rpb24oKXthLnJlbW92ZUV2ZW50TGlzdGVuZXIoZixlKSxjLmNsb3NlKCl9LG9ic2VydmFibGVfOmN9fWZ1bmN0aW9uIG4oYSl7cmV0dXJuIEJvb2xlYW4oYSl9ZnVuY3Rpb24gbyhiKXtpZihiLmZvcm0pcmV0dXJuIHMoYi5mb3JtLmVsZW1lbnRzLGZ1bmN0aW9uKGEpe3JldHVybiBhIT1iJiYiSU5QVVQiPT1hLnRhZ05hbWUmJiJyYWRpbyI9PWEudHlwZSYmYS5uYW1lPT1iLm5hbWV9KTt2YXIgYz1hKGIpO2lmKCFjKXJldHVybltdO3ZhciBkPWMucXVlcnlTZWxlY3RvckFsbCgnaW5wdXRbdHlwZT0icmFkaW8iXVtuYW1lPSInK2IubmFtZSsnIl0nKTtyZXR1cm4gcyhkLGZ1bmN0aW9uKGEpe3JldHVybiBhIT1iJiYhYS5mb3JtfSl9ZnVuY3Rpb24gcChhKXsiSU5QVVQiPT09YS50YWdOYW1lJiYicmFkaW8iPT09YS50eXBlJiZvKGEpLmZvckVhY2goZnVuY3Rpb24oYSl7dmFyIGI9YS5iaW5kaW5nc18uY2hlY2tlZDtiJiZiLm9ic2VydmFibGVfLnNldFZhbHVlKCExKX0pfWZ1bmN0aW9uIHEoYSxiKXt2YXIgYyxlLGYsZz1hLnBhcmVudE5vZGU7ZyBpbnN0YW5jZW9mIEhUTUxTZWxlY3RFbGVtZW50JiZnLmJpbmRpbmdzXyYmZy5iaW5kaW5nc18udmFsdWUmJihjPWcsZT1jLmJpbmRpbmdzXy52YWx1ZSxmPWMudmFsdWUpLGEudmFsdWU9ZChiKSxjJiZjLnZhbHVlIT1mJiYoZS5vYnNlcnZhYmxlXy5zZXRWYWx1ZShjLnZhbHVlKSxlLm9ic2VydmFibGVfLmRpc2NhcmRDaGFuZ2VzKCksUGxhdGZvcm0ucGVyZm9ybU1pY3JvdGFza0NoZWNrcG9pbnQoKSl9ZnVuY3Rpb24gcihhKXtyZXR1cm4gZnVuY3Rpb24oYil7cShhLGIpfX12YXIgcz1BcnJheS5wcm90b3R5cGUuZmlsdGVyLmNhbGwuYmluZChBcnJheS5wcm90b3R5cGUuZmlsdGVyKTtOb2RlLnByb3RvdHlwZS5iaW5kPWZ1bmN0aW9uKGEsYil7Y29uc29sZS5lcnJvcigiVW5oYW5kbGVkIGJpbmRpbmcgdG8gTm9kZTogIix0aGlzLGEsYil9LE5vZGUucHJvdG90eXBlLmJpbmRGaW5pc2hlZD1mdW5jdGlvbigpe307dmFyIHQ9YztPYmplY3QuZGVmaW5lUHJvcGVydHkoUGxhdGZvcm0sImVuYWJsZUJpbmRpbmdzUmVmbGVjdGlvbiIse2dldDpmdW5jdGlvbigpe3JldHVybiB0PT09Yn0sc2V0OmZ1bmN0aW9uKGEpe3JldHVybiB0PWE/YjpjLGF9LGNvbmZpZ3VyYWJsZTohMH0pLFRleHQucHJvdG90eXBlLmJpbmQ9ZnVuY3Rpb24oYSxiLGMpe2lmKCJ0ZXh0Q29udGVudCIhPT1hKXJldHVybiBOb2RlLnByb3RvdHlwZS5iaW5kLmNhbGwodGhpcyxhLGIsYyk7aWYoYylyZXR1cm4gZSh0aGlzLGIpO3ZhciBkPWI7cmV0dXJuIGUodGhpcyxkLm9wZW4oZih0aGlzKSkpLHQodGhpcyxhLGQpfSxFbGVtZW50LnByb3RvdHlwZS5iaW5kPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD0iPyI9PWFbYS5sZW5ndGgtMV07aWYoZCYmKHRoaXMucmVtb3ZlQXR0cmlidXRlKGEpLGE9YS5zbGljZSgwLC0xKSksYylyZXR1cm4gZyh0aGlzLGEsZCxiKTt2YXIgZT1iO3JldHVybiBnKHRoaXMsYSxkLGUub3BlbihoKHRoaXMsYSxkKSkpLHQodGhpcyxhLGUpfTt2YXIgdTshZnVuY3Rpb24oKXt2YXIgYT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKSxiPWEuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW5wdXQiKSk7Yi5zZXRBdHRyaWJ1dGUoInR5cGUiLCJjaGVja2JveCIpO3ZhciBjLGQ9MDtiLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIixmdW5jdGlvbigpe2QrKyxjPWN8fCJjbGljayJ9KSxiLmFkZEV2ZW50TGlzdGVuZXIoImNoYW5nZSIsZnVuY3Rpb24oKXtkKyssYz1jfHwiY2hhbmdlIn0pO3ZhciBlPWRvY3VtZW50LmNyZWF0ZUV2ZW50KCJNb3VzZUV2ZW50Iik7ZS5pbml0TW91c2VFdmVudCgiY2xpY2siLCEwLCEwLHdpbmRvdywwLDAsMCwwLDAsITEsITEsITEsITEsMCxudWxsKSxiLmRpc3BhdGNoRXZlbnQoZSksdT0xPT1kPyJjaGFuZ2UiOmN9KCksSFRNTElucHV0RWxlbWVudC5wcm90b3R5cGUuYmluZD1mdW5jdGlvbihhLGMsZSl7aWYoInZhbHVlIiE9PWEmJiJjaGVja2VkIiE9PWEpcmV0dXJuIEhUTUxFbGVtZW50LnByb3RvdHlwZS5iaW5kLmNhbGwodGhpcyxhLGMsZSk7dGhpcy5yZW1vdmVBdHRyaWJ1dGUoYSk7dmFyIGY9ImNoZWNrZWQiPT1hP246ZCxnPSJjaGVja2VkIj09YT9wOmw7aWYoZSlyZXR1cm4gaih0aGlzLGEsYyxmKTt2YXIgaD1jLGk9bSh0aGlzLGEsaCxnKTtyZXR1cm4gaih0aGlzLGEsaC5vcGVuKGsodGhpcyxhLGYpKSxmKSxiKHRoaXMsYSxpKX0sSFRNTFRleHRBcmVhRWxlbWVudC5wcm90b3R5cGUuYmluZD1mdW5jdGlvbihhLGIsYyl7aWYoInZhbHVlIiE9PWEpcmV0dXJuIEhUTUxFbGVtZW50LnByb3RvdHlwZS5iaW5kLmNhbGwodGhpcyxhLGIsYyk7aWYodGhpcy5yZW1vdmVBdHRyaWJ1dGUoInZhbHVlIiksYylyZXR1cm4gaih0aGlzLCJ2YWx1ZSIsYik7dmFyIGU9YixmPW0odGhpcywidmFsdWUiLGUpO3JldHVybiBqKHRoaXMsInZhbHVlIixlLm9wZW4oayh0aGlzLCJ2YWx1ZSIsZCkpKSx0KHRoaXMsYSxmKX0sSFRNTE9wdGlvbkVsZW1lbnQucHJvdG90eXBlLmJpbmQ9ZnVuY3Rpb24oYSxiLGMpe2lmKCJ2YWx1ZSIhPT1hKXJldHVybiBIVE1MRWxlbWVudC5wcm90b3R5cGUuYmluZC5jYWxsKHRoaXMsYSxiLGMpO2lmKHRoaXMucmVtb3ZlQXR0cmlidXRlKCJ2YWx1ZSIpLGMpcmV0dXJuIHEodGhpcyxiKTt2YXIgZD1iLGU9bSh0aGlzLCJ2YWx1ZSIsZCk7cmV0dXJuIHEodGhpcyxkLm9wZW4ocih0aGlzKSkpLHQodGhpcyxhLGUpfSxIVE1MU2VsZWN0RWxlbWVudC5wcm90b3R5cGUuYmluZD1mdW5jdGlvbihhLGMsZCl7aWYoInNlbGVjdGVkaW5kZXgiPT09YSYmKGE9InNlbGVjdGVkSW5kZXgiKSwic2VsZWN0ZWRJbmRleCIhPT1hJiYidmFsdWUiIT09YSlyZXR1cm4gSFRNTEVsZW1lbnQucHJvdG90eXBlLmJpbmQuY2FsbCh0aGlzLGEsYyxkKTtpZih0aGlzLnJlbW92ZUF0dHJpYnV0ZShhKSxkKXJldHVybiBqKHRoaXMsYSxjKTt2YXIgZT1jLGY9bSh0aGlzLGEsZSk7cmV0dXJuIGoodGhpcyxhLGUub3BlbihrKHRoaXMsYSkpKSxiKHRoaXMsYSxmKX19KHRoaXMpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe2lmKCFhKXRocm93IG5ldyBFcnJvcigiQXNzZXJ0aW9uIGZhaWxlZCIpfWZ1bmN0aW9uIGMoYSl7Zm9yKHZhciBiO2I9YS5wYXJlbnROb2RlOylhPWI7cmV0dXJuIGF9ZnVuY3Rpb24gZChhLGIpe2lmKGIpe2Zvcih2YXIgZCxlPSIjIitiOyFkJiYoYT1jKGEpLGEucHJvdG9Db250ZW50Xz9kPWEucHJvdG9Db250ZW50Xy5xdWVyeVNlbGVjdG9yKGUpOmEuZ2V0RWxlbWVudEJ5SWQmJihkPWEuZ2V0RWxlbWVudEJ5SWQoYikpLCFkJiZhLnRlbXBsYXRlQ3JlYXRvcl8pOylhPWEudGVtcGxhdGVDcmVhdG9yXztyZXR1cm4gZH19ZnVuY3Rpb24gZShhKXtyZXR1cm4idGVtcGxhdGUiPT1hLnRhZ05hbWUmJiJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI9PWEubmFtZXNwYWNlVVJJfWZ1bmN0aW9uIGYoYSl7cmV0dXJuIlRFTVBMQVRFIj09YS50YWdOYW1lJiYiaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCI9PWEubmFtZXNwYWNlVVJJfWZ1bmN0aW9uIGcoYSl7cmV0dXJuIEJvb2xlYW4oTFthLnRhZ05hbWVdJiZhLmhhc0F0dHJpYnV0ZSgidGVtcGxhdGUiKSl9ZnVuY3Rpb24gaChhKXtyZXR1cm4gdm9pZCAwPT09YS5pc1RlbXBsYXRlXyYmKGEuaXNUZW1wbGF0ZV89IlRFTVBMQVRFIj09YS50YWdOYW1lfHxnKGEpKSxhLmlzVGVtcGxhdGVffWZ1bmN0aW9uIGkoYSxiKXt2YXIgYz1hLnF1ZXJ5U2VsZWN0b3JBbGwoTik7aChhKSYmYihhKSxHKGMsYil9ZnVuY3Rpb24gaihhKXtmdW5jdGlvbiBiKGEpe0hUTUxUZW1wbGF0ZUVsZW1lbnQuZGVjb3JhdGUoYSl8fGooYS5jb250ZW50KX1pKGEsYil9ZnVuY3Rpb24gayhhLGIpe09iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGIpLmZvckVhY2goZnVuY3Rpb24oYyl7T2JqZWN0LmRlZmluZVByb3BlcnR5KGEsYyxPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGIsYykpfSl9ZnVuY3Rpb24gbChhKXt2YXIgYj1hLm93bmVyRG9jdW1lbnQ7aWYoIWIuZGVmYXVsdFZpZXcpcmV0dXJuIGI7dmFyIGM9Yi50ZW1wbGF0ZUNvbnRlbnRzT3duZXJfO2lmKCFjKXtmb3IoYz1iLmltcGxlbWVudGF0aW9uLmNyZWF0ZUhUTUxEb2N1bWVudCgiIik7Yy5sYXN0Q2hpbGQ7KWMucmVtb3ZlQ2hpbGQoYy5sYXN0Q2hpbGQpO2IudGVtcGxhdGVDb250ZW50c093bmVyXz1jfXJldHVybiBjfWZ1bmN0aW9uIG0oYSl7aWYoIWEuc3RhZ2luZ0RvY3VtZW50Xyl7dmFyIGI9YS5vd25lckRvY3VtZW50O2lmKCFiLnN0YWdpbmdEb2N1bWVudF8pe2Iuc3RhZ2luZ0RvY3VtZW50Xz1iLmltcGxlbWVudGF0aW9uLmNyZWF0ZUhUTUxEb2N1bWVudCgiIiksYi5zdGFnaW5nRG9jdW1lbnRfLmlzU3RhZ2luZ0RvY3VtZW50PSEwO3ZhciBjPWIuc3RhZ2luZ0RvY3VtZW50Xy5jcmVhdGVFbGVtZW50KCJiYXNlIik7Yy5ocmVmPWRvY3VtZW50LmJhc2VVUkksYi5zdGFnaW5nRG9jdW1lbnRfLmhlYWQuYXBwZW5kQ2hpbGQoYyksYi5zdGFnaW5nRG9jdW1lbnRfLnN0YWdpbmdEb2N1bWVudF89Yi5zdGFnaW5nRG9jdW1lbnRffWEuc3RhZ2luZ0RvY3VtZW50Xz1iLnN0YWdpbmdEb2N1bWVudF99cmV0dXJuIGEuc3RhZ2luZ0RvY3VtZW50X31mdW5jdGlvbiBuKGEpe3ZhciBiPWEub3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0ZW1wbGF0ZSIpO2EucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoYixhKTtmb3IodmFyIGM9YS5hdHRyaWJ1dGVzLGQ9Yy5sZW5ndGg7ZC0tPjA7KXt2YXIgZT1jW2RdO0tbZS5uYW1lXSYmKCJ0ZW1wbGF0ZSIhPT1lLm5hbWUmJmIuc2V0QXR0cmlidXRlKGUubmFtZSxlLnZhbHVlKSxhLnJlbW92ZUF0dHJpYnV0ZShlLm5hbWUpKX1yZXR1cm4gYn1mdW5jdGlvbiBvKGEpe3ZhciBiPWEub3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0ZW1wbGF0ZSIpO2EucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoYixhKTtmb3IodmFyIGM9YS5hdHRyaWJ1dGVzLGQ9Yy5sZW5ndGg7ZC0tPjA7KXt2YXIgZT1jW2RdO2Iuc2V0QXR0cmlidXRlKGUubmFtZSxlLnZhbHVlKSxhLnJlbW92ZUF0dHJpYnV0ZShlLm5hbWUpfXJldHVybiBhLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYSksYn1mdW5jdGlvbiBwKGEsYixjKXt2YXIgZD1hLmNvbnRlbnQ7aWYoYylyZXR1cm4gdm9pZCBkLmFwcGVuZENoaWxkKGIpO2Zvcih2YXIgZTtlPWIuZmlyc3RDaGlsZDspZC5hcHBlbmRDaGlsZChlKX1mdW5jdGlvbiBxKGEpe1A/YS5fX3Byb3RvX189SFRNTFRlbXBsYXRlRWxlbWVudC5wcm90b3R5cGU6ayhhLEhUTUxUZW1wbGF0ZUVsZW1lbnQucHJvdG90eXBlKX1mdW5jdGlvbiByKGEpe2Euc2V0TW9kZWxGbl98fChhLnNldE1vZGVsRm5fPWZ1bmN0aW9uKCl7YS5zZXRNb2RlbEZuU2NoZWR1bGVkXz0hMTt2YXIgYj16KGEsYS5kZWxlZ2F0ZV8mJmEuZGVsZWdhdGVfLnByZXBhcmVCaW5kaW5nKTt3KGEsYixhLm1vZGVsXyl9KSxhLnNldE1vZGVsRm5TY2hlZHVsZWRffHwoYS5zZXRNb2RlbEZuU2NoZWR1bGVkXz0hMCxPYnNlcnZlci5ydW5FT01fKGEuc2V0TW9kZWxGbl8pKX1mdW5jdGlvbiBzKGEsYixjLGQpe2lmKGEmJmEubGVuZ3RoKXtmb3IodmFyIGUsZj1hLmxlbmd0aCxnPTAsaD0wLGk9MCxqPSEwO2Y+aDspe3ZhciBnPWEuaW5kZXhPZigie3siLGgpLGs9YS5pbmRleE9mKCJbWyIsaCksbD0hMSxtPSJ9fSI7aWYoaz49MCYmKDA+Z3x8Zz5rKSYmKGc9ayxsPSEwLG09Il1dIiksaT0wPmc/LTE6YS5pbmRleE9mKG0sZysyKSwwPmkpe2lmKCFlKXJldHVybjtlLnB1c2goYS5zbGljZShoKSk7YnJlYWt9ZT1lfHxbXSxlLnB1c2goYS5zbGljZShoLGcpKTt2YXIgbj1hLnNsaWNlKGcrMixpKS50cmltKCk7ZS5wdXNoKGwpLGo9aiYmbDt2YXIgbz1kJiZkKG4sYixjKTtlLnB1c2gobnVsbD09bz9QYXRoLmdldChuKTpudWxsKSxlLnB1c2gobyksaD1pKzJ9cmV0dXJuIGg9PT1mJiZlLnB1c2goIiIpLGUuaGFzT25lUGF0aD01PT09ZS5sZW5ndGgsZS5pc1NpbXBsZVBhdGg9ZS5oYXNPbmVQYXRoJiYiIj09ZVswXSYmIiI9PWVbNF0sZS5vbmx5T25lVGltZT1qLGUuY29tYmluYXRvcj1mdW5jdGlvbihhKXtmb3IodmFyIGI9ZVswXSxjPTE7YzxlLmxlbmd0aDtjKz00KXt2YXIgZD1lLmhhc09uZVBhdGg/YTphWyhjLTEpLzRdO3ZvaWQgMCE9PWQmJihiKz1kKSxiKz1lW2MrM119cmV0dXJuIGJ9LGV9fWZ1bmN0aW9uIHQoYSxiLGMsZCl7aWYoYi5oYXNPbmVQYXRoKXt2YXIgZT1iWzNdLGY9ZT9lKGQsYywhMCk6YlsyXS5nZXRWYWx1ZUZyb20oZCk7cmV0dXJuIGIuaXNTaW1wbGVQYXRoP2Y6Yi5jb21iaW5hdG9yKGYpfWZvcih2YXIgZz1bXSxoPTE7aDxiLmxlbmd0aDtoKz00KXt2YXIgZT1iW2grMl07Z1soaC0xKS80XT1lP2UoZCxjKTpiW2grMV0uZ2V0VmFsdWVGcm9tKGQpfXJldHVybiBiLmNvbWJpbmF0b3IoZyl9ZnVuY3Rpb24gdShhLGIsYyxkKXt2YXIgZT1iWzNdLGY9ZT9lKGQsYywhMSk6bmV3IFBhdGhPYnNlcnZlcihkLGJbMl0pO3JldHVybiBiLmlzU2ltcGxlUGF0aD9mOm5ldyBPYnNlcnZlclRyYW5zZm9ybShmLGIuY29tYmluYXRvcil9ZnVuY3Rpb24gdihhLGIsYyxkKXtpZihiLm9ubHlPbmVUaW1lKXJldHVybiB0KGEsYixjLGQpO2lmKGIuaGFzT25lUGF0aClyZXR1cm4gdShhLGIsYyxkKTtmb3IodmFyIGU9bmV3IENvbXBvdW5kT2JzZXJ2ZXIsZj0xO2Y8Yi5sZW5ndGg7Zis9NCl7dmFyIGc9YltmXSxoPWJbZisyXTtpZihoKXt2YXIgaT1oKGQsYyxnKTtnP2UuYWRkUGF0aChpKTplLmFkZE9ic2VydmVyKGkpfWVsc2V7dmFyIGo9YltmKzFdO2c/ZS5hZGRQYXRoKGouZ2V0VmFsdWVGcm9tKGQpKTplLmFkZFBhdGgoZCxqKX19cmV0dXJuIG5ldyBPYnNlcnZlclRyYW5zZm9ybShlLGIuY29tYmluYXRvcil9ZnVuY3Rpb24gdyhhLGIsYyxkKXtmb3IodmFyIGU9MDtlPGIubGVuZ3RoO2UrPTIpe3ZhciBmPWJbZV0sZz1iW2UrMV0saD12KGYsZyxhLGMpLGk9YS5iaW5kKGYsaCxnLm9ubHlPbmVUaW1lKTtpJiZkJiZkLnB1c2goaSl9aWYoYS5iaW5kRmluaXNoZWQoKSxiLmlzVGVtcGxhdGUpe2EubW9kZWxfPWM7dmFyIGo9YS5wcm9jZXNzQmluZGluZ0RpcmVjdGl2ZXNfKGIpO2QmJmomJmQucHVzaChqKX19ZnVuY3Rpb24geChhLGIsYyl7dmFyIGQ9YS5nZXRBdHRyaWJ1dGUoYik7cmV0dXJuIHMoIiI9PWQ/Int7fX0iOmQsYixhLGMpfWZ1bmN0aW9uIHkoYSxjKXtiKGEpO2Zvcih2YXIgZD1bXSxlPTA7ZTxhLmF0dHJpYnV0ZXMubGVuZ3RoO2UrKyl7Zm9yKHZhciBmPWEuYXR0cmlidXRlc1tlXSxnPWYubmFtZSxpPWYudmFsdWU7Il8iPT09Z1swXTspZz1nLnN1YnN0cmluZygxKTtpZighaChhKXx8ZyE9PUomJmchPT1IJiZnIT09SSl7dmFyIGo9cyhpLGcsYSxjKTtqJiZkLnB1c2goZyxqKX19cmV0dXJuIGgoYSkmJihkLmlzVGVtcGxhdGU9ITAsZC5pZj14KGEsSixjKSxkLmJpbmQ9eChhLEgsYyksZC5yZXBlYXQ9eChhLEksYyksIWQuaWZ8fGQuYmluZHx8ZC5yZXBlYXR8fChkLmJpbmQ9cygie3t9fSIsSCxhLGMpKSksZH1mdW5jdGlvbiB6KGEsYil7aWYoYS5ub2RlVHlwZT09PU5vZGUuRUxFTUVOVF9OT0RFKXJldHVybiB5KGEsYik7aWYoYS5ub2RlVHlwZT09PU5vZGUuVEVYVF9OT0RFKXt2YXIgYz1zKGEuZGF0YSwidGV4dENvbnRlbnQiLGEsYik7aWYoYylyZXR1cm5bInRleHRDb250ZW50IixjXX1yZXR1cm5bXX1mdW5jdGlvbiBBKGEsYixjLGQsZSxmLGcpe2Zvcih2YXIgaD1iLmFwcGVuZENoaWxkKGMuaW1wb3J0Tm9kZShhLCExKSksaT0wLGo9YS5maXJzdENoaWxkO2o7aj1qLm5leHRTaWJsaW5nKUEoaixoLGMsZC5jaGlsZHJlbltpKytdLGUsZixnKTtyZXR1cm4gZC5pc1RlbXBsYXRlJiYoSFRNTFRlbXBsYXRlRWxlbWVudC5kZWNvcmF0ZShoLGEpLGYmJmguc2V0RGVsZWdhdGVfKGYpKSx3KGgsZCxlLGcpLGh9ZnVuY3Rpb24gQihhLGIpe3ZhciBjPXooYSxiKTtjLmNoaWxkcmVuPXt9O2Zvcih2YXIgZD0wLGU9YS5maXJzdENoaWxkO2U7ZT1lLm5leHRTaWJsaW5nKWMuY2hpbGRyZW5bZCsrXT1CKGUsYik7cmV0dXJuIGN9ZnVuY3Rpb24gQyhhKXt2YXIgYj1hLmlkXztyZXR1cm4gYnx8KGI9YS5pZF89UysrKSxifWZ1bmN0aW9uIEQoYSxiKXt2YXIgYz1DKGEpO2lmKGIpe3ZhciBkPWIuYmluZGluZ01hcHNbY107cmV0dXJuIGR8fChkPWIuYmluZGluZ01hcHNbY109QihhLGIucHJlcGFyZUJpbmRpbmcpfHxbXSksZH12YXIgZD1hLmJpbmRpbmdNYXBfO3JldHVybiBkfHwoZD1hLmJpbmRpbmdNYXBfPUIoYSx2b2lkIDApfHxbXSksZH1mdW5jdGlvbiBFKGEpe3RoaXMuY2xvc2VkPSExLHRoaXMudGVtcGxhdGVFbGVtZW50Xz1hLHRoaXMuaW5zdGFuY2VzPVtdLHRoaXMuZGVwcz12b2lkIDAsdGhpcy5pdGVyYXRlZFZhbHVlPVtdLHRoaXMucHJlc2VudFZhbHVlPXZvaWQgMCx0aGlzLmFycmF5T2JzZXJ2ZXI9dm9pZCAwfXZhciBGLEc9QXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbC5iaW5kKEFycmF5LnByb3RvdHlwZS5mb3JFYWNoKTthLk1hcCYmImZ1bmN0aW9uIj09dHlwZW9mIGEuTWFwLnByb3RvdHlwZS5mb3JFYWNoP0Y9YS5NYXA6KEY9ZnVuY3Rpb24oKXt0aGlzLmtleXM9W10sdGhpcy52YWx1ZXM9W119LEYucHJvdG90eXBlPXtzZXQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmtleXMuaW5kZXhPZihhKTswPmM/KHRoaXMua2V5cy5wdXNoKGEpLHRoaXMudmFsdWVzLnB1c2goYikpOnRoaXMudmFsdWVzW2NdPWJ9LGdldDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmtleXMuaW5kZXhPZihhKTtpZighKDA+YikpcmV0dXJuIHRoaXMudmFsdWVzW2JdfSwiZGVsZXRlIjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmtleXMuaW5kZXhPZihhKTtyZXR1cm4gMD5iPyExOih0aGlzLmtleXMuc3BsaWNlKGIsMSksdGhpcy52YWx1ZXMuc3BsaWNlKGIsMSksITApfSxmb3JFYWNoOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTA7Yzx0aGlzLmtleXMubGVuZ3RoO2MrKylhLmNhbGwoYnx8dGhpcyx0aGlzLnZhbHVlc1tjXSx0aGlzLmtleXNbY10sdGhpcyl9fSk7ImZ1bmN0aW9uIiE9dHlwZW9mIGRvY3VtZW50LmNvbnRhaW5zJiYoRG9jdW1lbnQucHJvdG90eXBlLmNvbnRhaW5zPWZ1bmN0aW9uKGEpe3JldHVybiBhPT09dGhpc3x8YS5wYXJlbnROb2RlPT09dGhpcz8hMDp0aGlzLmRvY3VtZW50RWxlbWVudC5jb250YWlucyhhKX0pO3ZhciBIPSJiaW5kIixJPSJyZXBlYXQiLEo9ImlmIixLPXt0ZW1wbGF0ZTohMCxyZXBlYXQ6ITAsYmluZDohMCxyZWY6ITB9LEw9e1RIRUFEOiEwLFRCT0RZOiEwLFRGT09UOiEwLFRIOiEwLFRSOiEwLFREOiEwLENPTEdST1VQOiEwLENPTDohMCxDQVBUSU9OOiEwLE9QVElPTjohMCxPUFRHUk9VUDohMH0sTT0idW5kZWZpbmVkIiE9dHlwZW9mIEhUTUxUZW1wbGF0ZUVsZW1lbnQ7TSYmIWZ1bmN0aW9uKCl7dmFyIGE9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidGVtcGxhdGUiKSxiPWEuY29udGVudC5vd25lckRvY3VtZW50LGM9Yi5hcHBlbmRDaGlsZChiLmNyZWF0ZUVsZW1lbnQoImh0bWwiKSksZD1jLmFwcGVuZENoaWxkKGIuY3JlYXRlRWxlbWVudCgiaGVhZCIpKSxlPWIuY3JlYXRlRWxlbWVudCgiYmFzZSIpO2UuaHJlZj1kb2N1bWVudC5iYXNlVVJJLGQuYXBwZW5kQ2hpbGQoZSl9KCk7dmFyIE49InRlbXBsYXRlLCAiK09iamVjdC5rZXlzKEwpLm1hcChmdW5jdGlvbihhKXtyZXR1cm4gYS50b0xvd2VyQ2FzZSgpKyJbdGVtcGxhdGVdIn0pLmpvaW4oIiwgIik7ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsZnVuY3Rpb24oKXtqKGRvY3VtZW50KSxQbGF0Zm9ybS5wZXJmb3JtTWljcm90YXNrQ2hlY2twb2ludCgpfSwhMSksTXx8KGEuSFRNTFRlbXBsYXRlRWxlbWVudD1mdW5jdGlvbigpe3Rocm93IFR5cGVFcnJvcigiSWxsZWdhbCBjb25zdHJ1Y3RvciIpfSk7dmFyIE8sUD0iX19wcm90b19fImlue307ImZ1bmN0aW9uIj09dHlwZW9mIE11dGF0aW9uT2JzZXJ2ZXImJihPPW5ldyBNdXRhdGlvbk9ic2VydmVyKGZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0wO2I8YS5sZW5ndGg7YisrKWFbYl0udGFyZ2V0LnJlZkNoYW5nZWRfKCl9KSksSFRNTFRlbXBsYXRlRWxlbWVudC5kZWNvcmF0ZT1mdW5jdGlvbihhLGMpe2lmKGEudGVtcGxhdGVJc0RlY29yYXRlZF8pcmV0dXJuITE7dmFyIGQ9YTtkLnRlbXBsYXRlSXNEZWNvcmF0ZWRfPSEwO3ZhciBoPWYoZCkmJk0saT1oLGs9IWgsbT0hMTtpZihofHwoZyhkKT8oYighYyksZD1uKGEpLGQudGVtcGxhdGVJc0RlY29yYXRlZF89ITAsaD1NLG09ITApOmUoZCkmJihkPW8oYSksZC50ZW1wbGF0ZUlzRGVjb3JhdGVkXz0hMCxoPU0pKSwhaCl7cShkKTt2YXIgcj1sKGQpO2QuY29udGVudF89ci5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCl9cmV0dXJuIGM/ZC5pbnN0YW5jZVJlZl89YzprP3AoZCxhLG0pOmkmJmooZC5jb250ZW50KSwhMH0sSFRNTFRlbXBsYXRlRWxlbWVudC5ib290c3RyYXA9ajt2YXIgUT1hLkhUTUxVbmtub3duRWxlbWVudHx8SFRNTEVsZW1lbnQsUj17Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudF99LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfTtNfHwoSFRNTFRlbXBsYXRlRWxlbWVudC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShRLnByb3RvdHlwZSksT2JqZWN0LmRlZmluZVByb3BlcnR5KEhUTUxUZW1wbGF0ZUVsZW1lbnQucHJvdG90eXBlLCJjb250ZW50IixSKSksayhIVE1MVGVtcGxhdGVFbGVtZW50LnByb3RvdHlwZSx7YmluZDpmdW5jdGlvbihhLGIsYyl7aWYoInJlZiIhPWEpcmV0dXJuIEVsZW1lbnQucHJvdG90eXBlLmJpbmQuY2FsbCh0aGlzLGEsYixjKTt2YXIgZD10aGlzLGU9Yz9iOmIub3BlbihmdW5jdGlvbihhKXtkLnNldEF0dHJpYnV0ZSgicmVmIixhKSxkLnJlZkNoYW5nZWRfKCl9KTtyZXR1cm4gdGhpcy5zZXRBdHRyaWJ1dGUoInJlZiIsZSksdGhpcy5yZWZDaGFuZ2VkXygpLGM/dm9pZCAwOih0aGlzLmJpbmRpbmdzXz90aGlzLmJpbmRpbmdzXy5yZWY9Yjp0aGlzLmJpbmRpbmdzXz17cmVmOmJ9LGIpfSxwcm9jZXNzQmluZGluZ0RpcmVjdGl2ZXNfOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLml0ZXJhdG9yXyYmdGhpcy5pdGVyYXRvcl8uY2xvc2VEZXBzKCksYS5pZnx8YS5iaW5kfHxhLnJlcGVhdD8odGhpcy5pdGVyYXRvcl98fCh0aGlzLml0ZXJhdG9yXz1uZXcgRSh0aGlzKSksdGhpcy5pdGVyYXRvcl8udXBkYXRlRGVwZW5kZW5jaWVzKGEsdGhpcy5tb2RlbF8pLE8mJk8ub2JzZXJ2ZSh0aGlzLHthdHRyaWJ1dGVzOiEwLGF0dHJpYnV0ZUZpbHRlcjpbInJlZiJdfSksdGhpcy5pdGVyYXRvcl8pOnZvaWQodGhpcy5pdGVyYXRvcl8mJih0aGlzLml0ZXJhdG9yXy5jbG9zZSgpLHRoaXMuaXRlcmF0b3JfPXZvaWQgMCkpfSxjcmVhdGVJbnN0YW5jZTpmdW5jdGlvbihhLGIsYyl7Yj9jPXRoaXMubmV3RGVsZWdhdGVfKGIpOmN8fChjPXRoaXMuZGVsZWdhdGVfKSx0aGlzLnJlZkNvbnRlbnRffHwodGhpcy5yZWZDb250ZW50Xz10aGlzLnJlZl8uY29udGVudCk7dmFyIGQ9dGhpcy5yZWZDb250ZW50XztpZihudWxsPT09ZC5maXJzdENoaWxkKXJldHVybiBUO3ZhciBlPUQoZCxjKSxmPW0odGhpcyksZz1mLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtnLnRlbXBsYXRlQ3JlYXRvcl89dGhpcyxnLnByb3RvQ29udGVudF89ZCxnLmJpbmRpbmdzXz1bXSxnLnRlcm1pbmF0b3JfPW51bGw7Zm9yKHZhciBoPWcudGVtcGxhdGVJbnN0YW5jZV89e2ZpcnN0Tm9kZTpudWxsLGxhc3ROb2RlOm51bGwsbW9kZWw6YX0saT0wLGo9ITEsaz1kLmZpcnN0Q2hpbGQ7aztrPWsubmV4dFNpYmxpbmcpe251bGw9PT1rLm5leHRTaWJsaW5nJiYoaj0hMCk7dmFyIGw9QShrLGcsZixlLmNoaWxkcmVuW2krK10sYSxjLGcuYmluZGluZ3NfKTtsLnRlbXBsYXRlSW5zdGFuY2VfPWgsaiYmKGcudGVybWluYXRvcl89bCl9cmV0dXJuIGguZmlyc3ROb2RlPWcuZmlyc3RDaGlsZCxoLmxhc3ROb2RlPWcubGFzdENoaWxkLGcudGVtcGxhdGVDcmVhdG9yXz12b2lkIDAsZy5wcm90b0NvbnRlbnRfPXZvaWQgMCxnfSxnZXQgbW9kZWwoKXtyZXR1cm4gdGhpcy5tb2RlbF99LHNldCBtb2RlbChhKXt0aGlzLm1vZGVsXz1hLHIodGhpcyl9LGdldCBiaW5kaW5nRGVsZWdhdGUoKXtyZXR1cm4gdGhpcy5kZWxlZ2F0ZV8mJnRoaXMuZGVsZWdhdGVfLnJhd30scmVmQ2hhbmdlZF86ZnVuY3Rpb24oKXt0aGlzLml0ZXJhdG9yXyYmdGhpcy5yZWZDb250ZW50XyE9PXRoaXMucmVmXy5jb250ZW50JiYodGhpcy5yZWZDb250ZW50Xz12b2lkIDAsdGhpcy5pdGVyYXRvcl8udmFsdWVDaGFuZ2VkKCksdGhpcy5pdGVyYXRvcl8udXBkYXRlSXRlcmF0ZWRWYWx1ZSgpKX0sY2xlYXI6ZnVuY3Rpb24oKXt0aGlzLm1vZGVsXz12b2lkIDAsdGhpcy5kZWxlZ2F0ZV89dm9pZCAwLHRoaXMuYmluZGluZ3NfJiZ0aGlzLmJpbmRpbmdzXy5yZWYmJnRoaXMuYmluZGluZ3NfLnJlZi5jbG9zZSgpLHRoaXMucmVmQ29udGVudF89dm9pZCAwLHRoaXMuaXRlcmF0b3JfJiYodGhpcy5pdGVyYXRvcl8udmFsdWVDaGFuZ2VkKCksdGhpcy5pdGVyYXRvcl8uY2xvc2UoKSx0aGlzLml0ZXJhdG9yXz12b2lkIDApfSxzZXREZWxlZ2F0ZV86ZnVuY3Rpb24oYSl7dGhpcy5kZWxlZ2F0ZV89YSx0aGlzLmJpbmRpbmdNYXBfPXZvaWQgMCx0aGlzLml0ZXJhdG9yXyYmKHRoaXMuaXRlcmF0b3JfLmluc3RhbmNlUG9zaXRpb25DaGFuZ2VkRm5fPXZvaWQgMCx0aGlzLml0ZXJhdG9yXy5pbnN0YW5jZU1vZGVsRm5fPXZvaWQgMCl9LG5ld0RlbGVnYXRlXzpmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGIpe3ZhciBjPWEmJmFbYl07aWYoImZ1bmN0aW9uIj09dHlwZW9mIGMpcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGMuYXBwbHkoYSxhcmd1bWVudHMpfX1pZihhKXJldHVybntiaW5kaW5nTWFwczp7fSxyYXc6YSxwcmVwYXJlQmluZGluZzpiKCJwcmVwYXJlQmluZGluZyIpLHByZXBhcmVJbnN0YW5jZU1vZGVsOmIoInByZXBhcmVJbnN0YW5jZU1vZGVsIikscHJlcGFyZUluc3RhbmNlUG9zaXRpb25DaGFuZ2VkOmIoInByZXBhcmVJbnN0YW5jZVBvc2l0aW9uQ2hhbmdlZCIpfX0sc2V0IGJpbmRpbmdEZWxlZ2F0ZShhKXtpZih0aGlzLmRlbGVnYXRlXyl0aHJvdyBFcnJvcigiVGVtcGxhdGUgbXVzdCBiZSBjbGVhcmVkIGJlZm9yZSBhIG5ldyBiaW5kaW5nRGVsZWdhdGUgY2FuIGJlIGFzc2lnbmVkIik7dGhpcy5zZXREZWxlZ2F0ZV8odGhpcy5uZXdEZWxlZ2F0ZV8oYSkpfSxnZXQgcmVmXygpe3ZhciBhPWQodGhpcyx0aGlzLmdldEF0dHJpYnV0ZSgicmVmIikpO2lmKGF8fChhPXRoaXMuaW5zdGFuY2VSZWZfKSwhYSlyZXR1cm4gdGhpczt2YXIgYj1hLnJlZl87cmV0dXJuIGI/YjphfX0pO3ZhciBTPTE7T2JqZWN0LmRlZmluZVByb3BlcnR5KE5vZGUucHJvdG90eXBlLCJ0ZW1wbGF0ZUluc3RhbmNlIix7Z2V0OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy50ZW1wbGF0ZUluc3RhbmNlXztyZXR1cm4gYT9hOnRoaXMucGFyZW50Tm9kZT90aGlzLnBhcmVudE5vZGUudGVtcGxhdGVJbnN0YW5jZTp2b2lkIDB9fSk7dmFyIFQ9ZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1QuYmluZGluZ3NfPVtdLFQudGVybWluYXRvcl89bnVsbCxFLnByb3RvdHlwZT17Y2xvc2VEZXBzOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5kZXBzO2EmJihhLmlmT25lVGltZT09PSExJiZhLmlmVmFsdWUuY2xvc2UoKSxhLm9uZVRpbWU9PT0hMSYmYS52YWx1ZS5jbG9zZSgpKX0sdXBkYXRlRGVwZW5kZW5jaWVzOmZ1bmN0aW9uKGEsYil7dGhpcy5jbG9zZURlcHMoKTt2YXIgYz10aGlzLmRlcHM9e30sZD10aGlzLnRlbXBsYXRlRWxlbWVudF87aWYoYS5pZil7aWYoYy5oYXNJZj0hMCxjLmlmT25lVGltZT1hLmlmLm9ubHlPbmVUaW1lLGMuaWZWYWx1ZT12KEosYS5pZixkLGIpLGMuaWZPbmVUaW1lJiYhYy5pZlZhbHVlKXJldHVybiB2b2lkIHRoaXMudXBkYXRlSXRlcmF0ZWRWYWx1ZSgpO2MuaWZPbmVUaW1lfHxjLmlmVmFsdWUub3Blbih0aGlzLnVwZGF0ZUl0ZXJhdGVkVmFsdWUsdGhpcyl9YS5yZXBlYXQ/KGMucmVwZWF0PSEwLGMub25lVGltZT1hLnJlcGVhdC5vbmx5T25lVGltZSxjLnZhbHVlPXYoSSxhLnJlcGVhdCxkLGIpKTooYy5yZXBlYXQ9ITEsYy5vbmVUaW1lPWEuYmluZC5vbmx5T25lVGltZSxjLnZhbHVlPXYoSCxhLmJpbmQsZCxiKSksYy5vbmVUaW1lfHxjLnZhbHVlLm9wZW4odGhpcy51cGRhdGVJdGVyYXRlZFZhbHVlLHRoaXMpLHRoaXMudXBkYXRlSXRlcmF0ZWRWYWx1ZSgpfSx1cGRhdGVJdGVyYXRlZFZhbHVlOmZ1bmN0aW9uKCl7aWYodGhpcy5kZXBzLmhhc0lmKXt2YXIgYT10aGlzLmRlcHMuaWZWYWx1ZTtpZih0aGlzLmRlcHMuaWZPbmVUaW1lfHwoYT1hLmRpc2NhcmRDaGFuZ2VzKCkpLCFhKXJldHVybiB2b2lkIHRoaXMudmFsdWVDaGFuZ2VkKCl9dmFyIGI9dGhpcy5kZXBzLnZhbHVlO3RoaXMuZGVwcy5vbmVUaW1lfHwoYj1iLmRpc2NhcmRDaGFuZ2VzKCkpLHRoaXMuZGVwcy5yZXBlYXR8fChiPVtiXSk7dmFyIGM9dGhpcy5kZXBzLnJlcGVhdCYmIXRoaXMuZGVwcy5vbmVUaW1lJiZBcnJheS5pc0FycmF5KGIpO3RoaXMudmFsdWVDaGFuZ2VkKGIsYyl9LHZhbHVlQ2hhbmdlZDpmdW5jdGlvbihhLGIpe0FycmF5LmlzQXJyYXkoYSl8fChhPVtdKSxhIT09dGhpcy5pdGVyYXRlZFZhbHVlJiYodGhpcy51bm9ic2VydmUoKSx0aGlzLnByZXNlbnRWYWx1ZT1hLGImJih0aGlzLmFycmF5T2JzZXJ2ZXI9bmV3IEFycmF5T2JzZXJ2ZXIodGhpcy5wcmVzZW50VmFsdWUpLHRoaXMuYXJyYXlPYnNlcnZlci5vcGVuKHRoaXMuaGFuZGxlU3BsaWNlcyx0aGlzKSksdGhpcy5oYW5kbGVTcGxpY2VzKEFycmF5T2JzZXJ2ZXIuY2FsY3VsYXRlU3BsaWNlcyh0aGlzLnByZXNlbnRWYWx1ZSx0aGlzLml0ZXJhdGVkVmFsdWUpKSl9LGdldExhc3RJbnN0YW5jZU5vZGU6ZnVuY3Rpb24oYSl7aWYoLTE9PWEpcmV0dXJuIHRoaXMudGVtcGxhdGVFbGVtZW50Xzt2YXIgYj10aGlzLmluc3RhbmNlc1thXSxjPWIudGVybWluYXRvcl87aWYoIWMpcmV0dXJuIHRoaXMuZ2V0TGFzdEluc3RhbmNlTm9kZShhLTEpO2lmKGMubm9kZVR5cGUhPT1Ob2RlLkVMRU1FTlRfTk9ERXx8dGhpcy50ZW1wbGF0ZUVsZW1lbnRfPT09YylyZXR1cm4gYzt2YXIgZD1jLml0ZXJhdG9yXztyZXR1cm4gZD9kLmdldExhc3RUZW1wbGF0ZU5vZGUoKTpjfSxnZXRMYXN0VGVtcGxhdGVOb2RlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0TGFzdEluc3RhbmNlTm9kZSh0aGlzLmluc3RhbmNlcy5sZW5ndGgtMSl9LGluc2VydEluc3RhbmNlQXQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmdldExhc3RJbnN0YW5jZU5vZGUoYS0xKSxkPXRoaXMudGVtcGxhdGVFbGVtZW50Xy5wYXJlbnROb2RlO3RoaXMuaW5zdGFuY2VzLnNwbGljZShhLDAsYiksZC5pbnNlcnRCZWZvcmUoYixjLm5leHRTaWJsaW5nKX0sZXh0cmFjdEluc3RhbmNlQXQ6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPXRoaXMuZ2V0TGFzdEluc3RhbmNlTm9kZShhLTEpLGM9dGhpcy5nZXRMYXN0SW5zdGFuY2VOb2RlKGEpLGQ9dGhpcy50ZW1wbGF0ZUVsZW1lbnRfLnBhcmVudE5vZGUsZT10aGlzLmluc3RhbmNlcy5zcGxpY2UoYSwxKVswXTtjIT09Yjspe3ZhciBmPWIubmV4dFNpYmxpbmc7Zj09YyYmKGM9YiksZS5hcHBlbmRDaGlsZChkLnJlbW92ZUNoaWxkKGYpKX1yZXR1cm4gZX0sZ2V0RGVsZWdhdGVGbjpmdW5jdGlvbihhKXtyZXR1cm4gYT1hJiZhKHRoaXMudGVtcGxhdGVFbGVtZW50XyksImZ1bmN0aW9uIj09dHlwZW9mIGE/YTpudWxsfSxoYW5kbGVTcGxpY2VzOmZ1bmN0aW9uKGEpe2lmKCF0aGlzLmNsb3NlZCYmYS5sZW5ndGgpe3ZhciBiPXRoaXMudGVtcGxhdGVFbGVtZW50XztpZighYi5wYXJlbnROb2RlKXJldHVybiB2b2lkIHRoaXMuY2xvc2UoKTtBcnJheU9ic2VydmVyLmFwcGx5U3BsaWNlcyh0aGlzLml0ZXJhdGVkVmFsdWUsdGhpcy5wcmVzZW50VmFsdWUsYSk7dmFyIGM9Yi5kZWxlZ2F0ZV87dm9pZCAwPT09dGhpcy5pbnN0YW5jZU1vZGVsRm5fJiYodGhpcy5pbnN0YW5jZU1vZGVsRm5fPXRoaXMuZ2V0RGVsZWdhdGVGbihjJiZjLnByZXBhcmVJbnN0YW5jZU1vZGVsKSksdm9pZCAwPT09dGhpcy5pbnN0YW5jZVBvc2l0aW9uQ2hhbmdlZEZuXyYmKHRoaXMuaW5zdGFuY2VQb3NpdGlvbkNoYW5nZWRGbl89dGhpcy5nZXREZWxlZ2F0ZUZuKGMmJmMucHJlcGFyZUluc3RhbmNlUG9zaXRpb25DaGFuZ2VkKSk7Zm9yKHZhciBkPW5ldyBGLGU9MCxmPTA7ZjxhLmxlbmd0aDtmKyspe2Zvcih2YXIgZz1hW2ZdLGg9Zy5yZW1vdmVkLGk9MDtpPGgubGVuZ3RoO2krKyl7dmFyIGo9aFtpXSxrPXRoaXMuZXh0cmFjdEluc3RhbmNlQXQoZy5pbmRleCtlKTtrIT09VCYmZC5zZXQoaixrKX1lLT1nLmFkZGVkQ291bnR9Zm9yKHZhciBmPTA7ZjxhLmxlbmd0aDtmKyspZm9yKHZhciBnPWFbZl0sbD1nLmluZGV4O2w8Zy5pbmRleCtnLmFkZGVkQ291bnQ7bCsrKXt2YXIgaj10aGlzLml0ZXJhdGVkVmFsdWVbbF0saz1kLmdldChqKTtrP2QuZGVsZXRlKGopOih0aGlzLmluc3RhbmNlTW9kZWxGbl8mJihqPXRoaXMuaW5zdGFuY2VNb2RlbEZuXyhqKSksaz12b2lkIDA9PT1qP1Q6Yi5jcmVhdGVJbnN0YW5jZShqLHZvaWQgMCxjKSksdGhpcy5pbnNlcnRJbnN0YW5jZUF0KGwsayl9ZC5mb3JFYWNoKGZ1bmN0aW9uKGEpe3RoaXMuY2xvc2VJbnN0YW5jZUJpbmRpbmdzKGEpfSx0aGlzKSx0aGlzLmluc3RhbmNlUG9zaXRpb25DaGFuZ2VkRm5fJiZ0aGlzLnJlcG9ydEluc3RhbmNlc01vdmVkKGEpfX0scmVwb3J0SW5zdGFuY2VNb3ZlZDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmluc3RhbmNlc1thXTtiIT09VCYmdGhpcy5pbnN0YW5jZVBvc2l0aW9uQ2hhbmdlZEZuXyhiLnRlbXBsYXRlSW5zdGFuY2VfLGEpfSxyZXBvcnRJbnN0YW5jZXNNb3ZlZDpmdW5jdGlvbihhKXtmb3IodmFyIGI9MCxjPTAsZD0wO2Q8YS5sZW5ndGg7ZCsrKXt2YXIgZT1hW2RdO2lmKDAhPWMpZm9yKDtiPGUuaW5kZXg7KXRoaXMucmVwb3J0SW5zdGFuY2VNb3ZlZChiKSxiKys7ZWxzZSBiPWUuaW5kZXg7Zm9yKDtiPGUuaW5kZXgrZS5hZGRlZENvdW50Oyl0aGlzLnJlcG9ydEluc3RhbmNlTW92ZWQoYiksYisrO2MrPWUuYWRkZWRDb3VudC1lLnJlbW92ZWQubGVuZ3RofWlmKDAhPWMpZm9yKHZhciBmPXRoaXMuaW5zdGFuY2VzLmxlbmd0aDtmPmI7KXRoaXMucmVwb3J0SW5zdGFuY2VNb3ZlZChiKSxiKyt9LGNsb3NlSW5zdGFuY2VCaW5kaW5nczpmdW5jdGlvbihhKXtmb3IodmFyIGI9YS5iaW5kaW5nc18sYz0wO2M8Yi5sZW5ndGg7YysrKWJbY10uY2xvc2UoKX0sdW5vYnNlcnZlOmZ1bmN0aW9uKCl7dGhpcy5hcnJheU9ic2VydmVyJiYodGhpcy5hcnJheU9ic2VydmVyLmNsb3NlKCksdGhpcy5hcnJheU9ic2VydmVyPXZvaWQgMCl9LGNsb3NlOmZ1bmN0aW9uKCl7aWYoIXRoaXMuY2xvc2VkKXt0aGlzLnVub2JzZXJ2ZSgpO2Zvcih2YXIgYT0wO2E8dGhpcy5pbnN0YW5jZXMubGVuZ3RoO2ErKyl0aGlzLmNsb3NlSW5zdGFuY2VCaW5kaW5ncyh0aGlzLmluc3RhbmNlc1thXSk7dGhpcy5pbnN0YW5jZXMubGVuZ3RoPTAsdGhpcy5jbG9zZURlcHMoKSx0aGlzLnRlbXBsYXRlRWxlbWVudF8uaXRlcmF0b3JfPXZvaWQgMCx0aGlzLmNsb3NlZD0hMH19fSxIVE1MVGVtcGxhdGVFbGVtZW50LmZvckFsbFRlbXBsYXRlc0Zyb21fPWl9KHRoaXMpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoKXtlfHwoZT0hMCxhLmVuZE9mTWljcm90YXNrKGZ1bmN0aW9uKCl7ZT0hMSxsb2dGbGFncy5kYXRhJiZjb25zb2xlLmdyb3VwKCJQbGF0Zm9ybS5mbHVzaCgpIiksYS5wZXJmb3JtTWljcm90YXNrQ2hlY2twb2ludCgpLGxvZ0ZsYWdzLmRhdGEmJmNvbnNvbGUuZ3JvdXBFbmQoKX0pKX12YXIgYz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzdHlsZSIpO2MudGV4dENvbnRlbnQ9InRlbXBsYXRlIHtkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7fSAvKiBpbmplY3RlZCBieSBwbGF0Zm9ybS5qcyAqLyI7dmFyIGQ9ZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiaGVhZCIpO2QuaW5zZXJ0QmVmb3JlKGMsZC5maXJzdENoaWxkKTt2YXIgZTtpZihPYnNlcnZlci5oYXNPYmplY3RPYnNlcnZlKWI9ZnVuY3Rpb24oKXt9O2Vsc2V7dmFyIGY9MTI1O3dpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJXZWJDb21wb25lbnRzUmVhZHkiLGZ1bmN0aW9uKCl7YigpLGEuZmx1c2hQb2xsPXNldEludGVydmFsKGIsZil9KX1pZih3aW5kb3cuQ3VzdG9tRWxlbWVudHMmJiFDdXN0b21FbGVtZW50cy51c2VOYXRpdmUpe3ZhciBnPURvY3VtZW50LnByb3RvdHlwZS5pbXBvcnROb2RlO0RvY3VtZW50LnByb3RvdHlwZS5pbXBvcnROb2RlPWZ1bmN0aW9uKGEsYil7dmFyIGM9Zy5jYWxsKHRoaXMsYSxiKTtyZXR1cm4gQ3VzdG9tRWxlbWVudHMudXBncmFkZUFsbChjKSxjfX1hLmZsdXNoPWJ9KHdpbmRvdy5QbGF0Zm9ybSk7Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPXBsYXRmb3JtLmpzLm1hcA==",
                "body": "LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAoYykgMjAxNCBUaGUgUG9seW1lciBQcm9qZWN0IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuCiAqIFRoaXMgY29kZSBtYXkgb25seSBiZSB1c2VkIHVuZGVyIHRoZSBCU0Qgc3R5bGUgbGljZW5zZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vTElDRU5TRS50eHQKICogVGhlIGNvbXBsZXRlIHNldCBvZiBhdXRob3JzIG1heSBiZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQVVUSE9SUy50eHQKICogVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9DT05UUklCVVRPUlMudHh0CiAqIENvZGUgZGlzdHJpYnV0ZWQgYnkgR29vZ2xlIGFzIHBhcnQgb2YgdGhlIHBvbHltZXIgcHJvamVjdCBpcyBhbHNvCiAqIHN1YmplY3QgdG8gYW4gYWRkaXRpb25hbCBJUCByaWdodHMgZ3JhbnQgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL1BBVEVOVFMudHh0CiAqLwovLyBAdmVyc2lvbjogMC4zLjQKCndpbmRvdy5QbGF0Zm9ybT13aW5kb3cuUGxhdGZvcm18fHt9LHdpbmRvdy5sb2dGbGFncz13aW5kb3cubG9nRmxhZ3N8fHt9LGZ1bmN0aW9uKGEpe3ZhciBiPWEuZmxhZ3N8fHt9O2xvY2F0aW9uLnNlYXJjaC5zbGljZSgxKS5zcGxpdCgiJiIpLmZvckVhY2goZnVuY3Rpb24oYSl7YT1hLnNwbGl0KCI9IiksYVswXSYmKGJbYVswXV09YVsxXXx8ITApfSk7dmFyIGM9ZG9jdW1lbnQuY3VycmVudFNjcmlwdHx8ZG9jdW1lbnQucXVlcnlTZWxlY3Rvcignc2NyaXB0W3NyYyo9InBsYXRmb3JtLmpzIl0nKTtpZihjKWZvcih2YXIgZCxlPWMuYXR0cmlidXRlcyxmPTA7ZjxlLmxlbmd0aDtmKyspZD1lW2ZdLCJzcmMiIT09ZC5uYW1lJiYoYltkLm5hbWVdPWQudmFsdWV8fCEwKTtiLmxvZyYmYi5sb2cuc3BsaXQoIiwiKS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3dpbmRvdy5sb2dGbGFnc1thXT0hMH0pLGIuc2hhZG93PWIuc2hhZG93fHxiLnNoYWRvd2RvbXx8Yi5wb2x5ZmlsbCxiLnNoYWRvdz0ibmF0aXZlIj09PWIuc2hhZG93PyExOmIuc2hhZG93fHwhSFRNTEVsZW1lbnQucHJvdG90eXBlLmNyZWF0ZVNoYWRvd1Jvb3QsYi5zaGFkb3cmJmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoInNjcmlwdCIpLmxlbmd0aD4xJiZjb25zb2xlLndhcm4oInBsYXRmb3JtLmpzIGlzIG5vdCB0aGUgZmlyc3Qgc2NyaXB0IG9uIHRoZSBwYWdlLiBTZWUgaHR0cDovL3d3dy5wb2x5bWVyLXByb2plY3Qub3JnL2RvY3Mvc3RhcnQvcGxhdGZvcm0uaHRtbCNzZXR1cCBmb3IgZGV0YWlscy4iKSxiLnJlZ2lzdGVyJiYod2luZG93LkN1c3RvbUVsZW1lbnRzPXdpbmRvdy5DdXN0b21FbGVtZW50c3x8e2ZsYWdzOnt9fSx3aW5kb3cuQ3VzdG9tRWxlbWVudHMuZmxhZ3MucmVnaXN0ZXI9Yi5yZWdpc3RlciksYi5pbXBvcnRzJiYod2luZG93LkhUTUxJbXBvcnRzPXdpbmRvdy5IVE1MSW1wb3J0c3x8e2ZsYWdzOnt9fSx3aW5kb3cuSFRNTEltcG9ydHMuZmxhZ3MuaW1wb3J0cz1iLmltcG9ydHMpLGEuZmxhZ3M9Yn0oUGxhdGZvcm0pLCJ1bmRlZmluZWQiPT10eXBlb2YgV2Vha01hcCYmIWZ1bmN0aW9uKCl7dmFyIGE9T2JqZWN0LmRlZmluZVByb3BlcnR5LGI9RGF0ZS5ub3coKSUxZTksYz1mdW5jdGlvbigpe3RoaXMubmFtZT0iX19zdCIrKDFlOSpNYXRoLnJhbmRvbSgpPj4+MCkrKGIrKyArIl9fIil9O2MucHJvdG90eXBlPXtzZXQ6ZnVuY3Rpb24oYixjKXt2YXIgZD1iW3RoaXMubmFtZV07ZCYmZFswXT09PWI/ZFsxXT1jOmEoYix0aGlzLm5hbWUse3ZhbHVlOltiLGNdLHdyaXRhYmxlOiEwfSl9LGdldDpmdW5jdGlvbihhKXt2YXIgYjtyZXR1cm4oYj1hW3RoaXMubmFtZV0pJiZiWzBdPT09YT9iWzFdOnZvaWQgMH0sImRlbGV0ZSI6ZnVuY3Rpb24oYSl7dGhpcy5zZXQoYSx2b2lkIDApfX0sd2luZG93LldlYWtNYXA9Y30oKSxmdW5jdGlvbihnbG9iYWwpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBkZXRlY3RPYmplY3RPYnNlcnZlKCl7ZnVuY3Rpb24gYShhKXtiPWF9aWYoImZ1bmN0aW9uIiE9dHlwZW9mIE9iamVjdC5vYnNlcnZlfHwiZnVuY3Rpb24iIT10eXBlb2YgQXJyYXkub2JzZXJ2ZSlyZXR1cm4hMTt2YXIgYj1bXSxjPXt9LGQ9W107cmV0dXJuIE9iamVjdC5vYnNlcnZlKGMsYSksQXJyYXkub2JzZXJ2ZShkLGEpLGMuaWQ9MSxjLmlkPTIsZGVsZXRlIGMuaWQsZC5wdXNoKDEsMiksZC5sZW5ndGg9MCxPYmplY3QuZGVsaXZlckNoYW5nZVJlY29yZHMoYSksNSE9PWIubGVuZ3RoPyExOiJhZGQiIT1iWzBdLnR5cGV8fCJ1cGRhdGUiIT1iWzFdLnR5cGV8fCJkZWxldGUiIT1iWzJdLnR5cGV8fCJzcGxpY2UiIT1iWzNdLnR5cGV8fCJzcGxpY2UiIT1iWzRdLnR5cGU/ITE6KE9iamVjdC51bm9ic2VydmUoYyxhKSxBcnJheS51bm9ic2VydmUoZCxhKSwhMCl9ZnVuY3Rpb24gZGV0ZWN0RXZhbCgpe2lmKCJ1bmRlZmluZWQiIT10eXBlb2YgY2hyb21lJiZjaHJvbWUuYXBwJiZjaHJvbWUuYXBwLnJ1bnRpbWUpcmV0dXJuITE7dHJ5e3ZhciBhPW5ldyBGdW5jdGlvbigiIiwicmV0dXJuIHRydWU7Iik7cmV0dXJuIGEoKX1jYXRjaChiKXtyZXR1cm4hMX19ZnVuY3Rpb24gaXNJbmRleChhKXtyZXR1cm4rYT09PWE+Pj4wfWZ1bmN0aW9uIHRvTnVtYmVyKGEpe3JldHVybithfWZ1bmN0aW9uIGlzT2JqZWN0KGEpe3JldHVybiBhPT09T2JqZWN0KGEpfWZ1bmN0aW9uIGFyZVNhbWVWYWx1ZShhLGIpe3JldHVybiBhPT09Yj8wIT09YXx8MS9hPT09MS9iOm51bWJlcklzTmFOKGEpJiZudW1iZXJJc05hTihiKT8hMDphIT09YSYmYiE9PWJ9ZnVuY3Rpb24gZ2V0UGF0aENoYXJUeXBlKGEpe2lmKHZvaWQgMD09PWEpcmV0dXJuImVvZiI7dmFyIGI9YS5jaGFyQ29kZUF0KDApO3N3aXRjaChiKXtjYXNlIDkxOmNhc2UgOTM6Y2FzZSA0NjpjYXNlIDM0OmNhc2UgMzk6Y2FzZSA0ODpyZXR1cm4gYTtjYXNlIDk1OmNhc2UgMzY6cmV0dXJuImlkZW50IjtjYXNlIDMyOmNhc2UgOTpjYXNlIDEwOmNhc2UgMTM6Y2FzZSAxNjA6Y2FzZSA2NTI3OTpjYXNlIDgyMzI6Y2FzZSA4MjMzOnJldHVybiJ3cyJ9cmV0dXJuIGI+PTk3JiYxMjI+PWJ8fGI+PTY1JiY5MD49Yj8iaWRlbnQiOmI+PTQ5JiY1Nz49Yj8ibnVtYmVyIjoiZWxzZSJ9ZnVuY3Rpb24gbm9vcCgpe31mdW5jdGlvbiBwYXJzZVBhdGgoYSl7ZnVuY3Rpb24gYigpe2lmKCEoaz49YS5sZW5ndGgpKXt2YXIgYj1hW2srMV07cmV0dXJuImluU2luZ2xlUXVvdGUiPT1sJiYiJyI9PWJ8fCJpbkRvdWJsZVF1b3RlIj09bCYmJyInPT1iPyhrKyssZD1iLG0uYXBwZW5kKCksITApOnZvaWQgMH19Zm9yKHZhciBjLGQsZSxmLGcsaCxpLGo9W10saz0tMSxsPSJiZWZvcmVQYXRoIixtPXtwdXNoOmZ1bmN0aW9uKCl7dm9pZCAwIT09ZSYmKGoucHVzaChlKSxlPXZvaWQgMCl9LGFwcGVuZDpmdW5jdGlvbigpe3ZvaWQgMD09PWU/ZT1kOmUrPWR9fTtsOylpZihrKyssYz1hW2tdLCJcXCIhPWN8fCFiKGwpKXtpZihmPWdldFBhdGhDaGFyVHlwZShjKSxpPXBhdGhTdGF0ZU1hY2hpbmVbbF0sZz1pW2ZdfHxpWyJlbHNlIl18fCJlcnJvciIsImVycm9yIj09ZylyZXR1cm47aWYobD1nWzBdLGg9bVtnWzFdXXx8bm9vcCxkPXZvaWQgMD09PWdbMl0/YzpnWzJdLGgoKSwiYWZ0ZXJQYXRoIj09PWwpcmV0dXJuIGp9fWZ1bmN0aW9uIGlzSWRlbnQoYSl7cmV0dXJuIGlkZW50UmVnRXhwLnRlc3QoYSl9ZnVuY3Rpb24gUGF0aChhLGIpe2lmKGIhPT1jb25zdHJ1Y3RvcklzUHJpdmF0ZSl0aHJvdyBFcnJvcigiVXNlIFBhdGguZ2V0IHRvIHJldHJpZXZlIHBhdGggb2JqZWN0cyIpO2Zvcih2YXIgYz0wO2M8YS5sZW5ndGg7YysrKXRoaXMucHVzaChTdHJpbmcoYVtjXSkpO2hhc0V2YWwmJnRoaXMubGVuZ3RoJiYodGhpcy5nZXRWYWx1ZUZyb209dGhpcy5jb21waWxlZEdldFZhbHVlRnJvbUZuKCkpfWZ1bmN0aW9uIGdldFBhdGgoYSl7aWYoYSBpbnN0YW5jZW9mIFBhdGgpcmV0dXJuIGE7aWYoKG51bGw9PWF8fDA9PWEubGVuZ3RoKSYmKGE9IiIpLCJzdHJpbmciIT10eXBlb2YgYSl7aWYoaXNJbmRleChhLmxlbmd0aCkpcmV0dXJuIG5ldyBQYXRoKGEsY29uc3RydWN0b3JJc1ByaXZhdGUpO2E9U3RyaW5nKGEpfXZhciBiPXBhdGhDYWNoZVthXTtpZihiKXJldHVybiBiO3ZhciBjPXBhcnNlUGF0aChhKTtpZighYylyZXR1cm4gaW52YWxpZFBhdGg7dmFyIGI9bmV3IFBhdGgoYyxjb25zdHJ1Y3RvcklzUHJpdmF0ZSk7cmV0dXJuIHBhdGhDYWNoZVthXT1iLGJ9ZnVuY3Rpb24gZm9ybWF0QWNjZXNzb3IoYSl7cmV0dXJuIGlzSW5kZXgoYSk/IlsiK2ErIl0iOidbIicrYS5yZXBsYWNlKC8iL2csJ1xcIicpKyciXSd9ZnVuY3Rpb24gZGlydHlDaGVjayhhKXtmb3IodmFyIGI9MDtNQVhfRElSVFlfQ0hFQ0tfQ1lDTEVTPmImJmEuY2hlY2tfKCk7KWIrKztyZXR1cm4gZ2xvYmFsLnRlc3RpbmdFeHBvc2VDeWNsZUNvdW50JiYoZ2xvYmFsLmRpcnR5Q2hlY2tDeWNsZUNvdW50PWIpLGI+MH1mdW5jdGlvbiBvYmplY3RJc0VtcHR5KGEpe2Zvcih2YXIgYiBpbiBhKXJldHVybiExO3JldHVybiEwfWZ1bmN0aW9uIGRpZmZJc0VtcHR5KGEpe3JldHVybiBvYmplY3RJc0VtcHR5KGEuYWRkZWQpJiZvYmplY3RJc0VtcHR5KGEucmVtb3ZlZCkmJm9iamVjdElzRW1wdHkoYS5jaGFuZ2VkKX1mdW5jdGlvbiBkaWZmT2JqZWN0RnJvbU9sZE9iamVjdChhLGIpe3ZhciBjPXt9LGQ9e30sZT17fTtmb3IodmFyIGYgaW4gYil7dmFyIGc9YVtmXTsodm9pZCAwPT09Z3x8ZyE9PWJbZl0pJiYoZiBpbiBhP2chPT1iW2ZdJiYoZVtmXT1nKTpkW2ZdPXZvaWQgMCl9Zm9yKHZhciBmIGluIGEpZiBpbiBifHwoY1tmXT1hW2ZdKTtyZXR1cm4gQXJyYXkuaXNBcnJheShhKSYmYS5sZW5ndGghPT1iLmxlbmd0aCYmKGUubGVuZ3RoPWEubGVuZ3RoKSx7YWRkZWQ6YyxyZW1vdmVkOmQsY2hhbmdlZDplfX1mdW5jdGlvbiBydW5FT01UYXNrcygpe2lmKCFlb21UYXNrcy5sZW5ndGgpcmV0dXJuITE7Zm9yKHZhciBhPTA7YTxlb21UYXNrcy5sZW5ndGg7YSsrKWVvbVRhc2tzW2FdKCk7cmV0dXJuIGVvbVRhc2tzLmxlbmd0aD0wLCEwfWZ1bmN0aW9uIG5ld09ic2VydmVkT2JqZWN0KCl7ZnVuY3Rpb24gYShhKXtiJiZiLnN0YXRlXz09PU9QRU5FRCYmIWQmJmIuY2hlY2tfKGEpfXZhciBiLGMsZD0hMSxlPSEwO3JldHVybntvcGVuOmZ1bmN0aW9uKGMpe2lmKGIpdGhyb3cgRXJyb3IoIk9ic2VydmVkT2JqZWN0IGluIHVzZSIpO2V8fE9iamVjdC5kZWxpdmVyQ2hhbmdlUmVjb3JkcyhhKSxiPWMsZT0hMX0sb2JzZXJ2ZTpmdW5jdGlvbihiLGQpe2M9YixkP0FycmF5Lm9ic2VydmUoYyxhKTpPYmplY3Qub2JzZXJ2ZShjLGEpfSxkZWxpdmVyOmZ1bmN0aW9uKGIpe2Q9YixPYmplY3QuZGVsaXZlckNoYW5nZVJlY29yZHMoYSksZD0hMX0sY2xvc2U6ZnVuY3Rpb24oKXtiPXZvaWQgMCxPYmplY3QudW5vYnNlcnZlKGMsYSksb2JzZXJ2ZWRPYmplY3RDYWNoZS5wdXNoKHRoaXMpfX19ZnVuY3Rpb24gZ2V0T2JzZXJ2ZWRPYmplY3QoYSxiLGMpe3ZhciBkPW9ic2VydmVkT2JqZWN0Q2FjaGUucG9wKCl8fG5ld09ic2VydmVkT2JqZWN0KCk7cmV0dXJuIGQub3BlbihhKSxkLm9ic2VydmUoYixjKSxkfWZ1bmN0aW9uIG5ld09ic2VydmVkU2V0KCl7ZnVuY3Rpb24gYShiLGYpe2ImJihiPT09ZCYmKGVbZl09ITApLGguaW5kZXhPZihiKTwwJiYoaC5wdXNoKGIpLE9iamVjdC5vYnNlcnZlKGIsYykpLGEoT2JqZWN0LmdldFByb3RvdHlwZU9mKGIpLGYpKX1mdW5jdGlvbiBiKGEpe2Zvcih2YXIgYj0wO2I8YS5sZW5ndGg7YisrKXt2YXIgYz1hW2JdO2lmKGMub2JqZWN0IT09ZHx8ZVtjLm5hbWVdfHwic2V0UHJvdG90eXBlIj09PWMudHlwZSlyZXR1cm4hMX1yZXR1cm4hMH1mdW5jdGlvbiBjKGMpe2lmKCFiKGMpKXtmb3IodmFyIGQsZT0wO2U8Zy5sZW5ndGg7ZSsrKWQ9Z1tlXSxkLnN0YXRlXz09T1BFTkVEJiZkLml0ZXJhdGVPYmplY3RzXyhhKTtmb3IodmFyIGU9MDtlPGcubGVuZ3RoO2UrKylkPWdbZV0sZC5zdGF0ZV89PU9QRU5FRCYmZC5jaGVja18oKX19dmFyIGQsZSxmPTAsZz1bXSxoPVtdLGk9e29iamVjdDp2b2lkIDAsb2JqZWN0czpoLG9wZW46ZnVuY3Rpb24oYixjKXtkfHwoZD1jLGU9e30pLGcucHVzaChiKSxmKyssYi5pdGVyYXRlT2JqZWN0c18oYSl9LGNsb3NlOmZ1bmN0aW9uKCl7aWYoZi0tLCEoZj4wKSl7Zm9yKHZhciBhPTA7YTxoLmxlbmd0aDthKyspT2JqZWN0LnVub2JzZXJ2ZShoW2FdLGMpLE9ic2VydmVyLnVub2JzZXJ2ZWRDb3VudCsrO2cubGVuZ3RoPTAsaC5sZW5ndGg9MCxkPXZvaWQgMCxlPXZvaWQgMCxvYnNlcnZlZFNldENhY2hlLnB1c2godGhpcyl9fX07cmV0dXJuIGl9ZnVuY3Rpb24gZ2V0T2JzZXJ2ZWRTZXQoYSxiKXtyZXR1cm4gbGFzdE9ic2VydmVkU2V0JiZsYXN0T2JzZXJ2ZWRTZXQub2JqZWN0PT09Ynx8KGxhc3RPYnNlcnZlZFNldD1vYnNlcnZlZFNldENhY2hlLnBvcCgpfHxuZXdPYnNlcnZlZFNldCgpLGxhc3RPYnNlcnZlZFNldC5vYmplY3Q9YiksbGFzdE9ic2VydmVkU2V0Lm9wZW4oYSxiKSxsYXN0T2JzZXJ2ZWRTZXR9ZnVuY3Rpb24gT2JzZXJ2ZXIoKXt0aGlzLnN0YXRlXz1VTk9QRU5FRCx0aGlzLmNhbGxiYWNrXz12b2lkIDAsdGhpcy50YXJnZXRfPXZvaWQgMCx0aGlzLmRpcmVjdE9ic2VydmVyXz12b2lkIDAsdGhpcy52YWx1ZV89dm9pZCAwLHRoaXMuaWRfPW5leHRPYnNlcnZlcklkKyt9ZnVuY3Rpb24gYWRkVG9BbGwoYSl7T2JzZXJ2ZXIuX2FsbE9ic2VydmVyc0NvdW50KyssY29sbGVjdE9ic2VydmVycyYmYWxsT2JzZXJ2ZXJzLnB1c2goYSl9ZnVuY3Rpb24gcmVtb3ZlRnJvbUFsbCgpe09ic2VydmVyLl9hbGxPYnNlcnZlcnNDb3VudC0tfWZ1bmN0aW9uIE9iamVjdE9ic2VydmVyKGEpe09ic2VydmVyLmNhbGwodGhpcyksdGhpcy52YWx1ZV89YSx0aGlzLm9sZE9iamVjdF89dm9pZCAwfWZ1bmN0aW9uIEFycmF5T2JzZXJ2ZXIoYSl7aWYoIUFycmF5LmlzQXJyYXkoYSkpdGhyb3cgRXJyb3IoIlByb3ZpZGVkIG9iamVjdCBpcyBub3QgYW4gQXJyYXkiKTtPYmplY3RPYnNlcnZlci5jYWxsKHRoaXMsYSl9ZnVuY3Rpb24gUGF0aE9ic2VydmVyKGEsYil7T2JzZXJ2ZXIuY2FsbCh0aGlzKSx0aGlzLm9iamVjdF89YSx0aGlzLnBhdGhfPWdldFBhdGgoYiksdGhpcy5kaXJlY3RPYnNlcnZlcl89dm9pZCAwfWZ1bmN0aW9uIENvbXBvdW5kT2JzZXJ2ZXIoYSl7T2JzZXJ2ZXIuY2FsbCh0aGlzKSx0aGlzLnJlcG9ydENoYW5nZXNPbk9wZW5fPWEsdGhpcy52YWx1ZV89W10sdGhpcy5kaXJlY3RPYnNlcnZlcl89dm9pZCAwLHRoaXMub2JzZXJ2ZWRfPVtdfWZ1bmN0aW9uIGlkZW50Rm4oYSl7cmV0dXJuIGF9ZnVuY3Rpb24gT2JzZXJ2ZXJUcmFuc2Zvcm0oYSxiLGMsZCl7dGhpcy5jYWxsYmFja189dm9pZCAwLHRoaXMudGFyZ2V0Xz12b2lkIDAsdGhpcy52YWx1ZV89dm9pZCAwLHRoaXMub2JzZXJ2YWJsZV89YSx0aGlzLmdldFZhbHVlRm5fPWJ8fGlkZW50Rm4sdGhpcy5zZXRWYWx1ZUZuXz1jfHxpZGVudEZuLHRoaXMuZG9udFBhc3NUaHJvdWdoU2V0Xz1kfWZ1bmN0aW9uIGRpZmZPYmplY3RGcm9tQ2hhbmdlUmVjb3JkcyhhLGIsYyl7Zm9yKHZhciBkPXt9LGU9e30sZj0wO2Y8Yi5sZW5ndGg7ZisrKXt2YXIgZz1iW2ZdO2V4cGVjdGVkUmVjb3JkVHlwZXNbZy50eXBlXT8oZy5uYW1lIGluIGN8fChjW2cubmFtZV09Zy5vbGRWYWx1ZSksInVwZGF0ZSIhPWcudHlwZSYmKCJhZGQiIT1nLnR5cGU/Zy5uYW1lIGluIGQ/KGRlbGV0ZSBkW2cubmFtZV0sZGVsZXRlIGNbZy5uYW1lXSk6ZVtnLm5hbWVdPSEwOmcubmFtZSBpbiBlP2RlbGV0ZSBlW2cubmFtZV06ZFtnLm5hbWVdPSEwKSk6KGNvbnNvbGUuZXJyb3IoIlVua25vd24gY2hhbmdlUmVjb3JkIHR5cGU6ICIrZy50eXBlKSxjb25zb2xlLmVycm9yKGcpKX1mb3IodmFyIGggaW4gZClkW2hdPWFbaF07Zm9yKHZhciBoIGluIGUpZVtoXT12b2lkIDA7dmFyIGk9e307Zm9yKHZhciBoIGluIGMpaWYoIShoIGluIGR8fGggaW4gZSkpe3ZhciBqPWFbaF07Y1toXSE9PWomJihpW2hdPWopfXJldHVybnthZGRlZDpkLHJlbW92ZWQ6ZSxjaGFuZ2VkOml9fWZ1bmN0aW9uIG5ld1NwbGljZShhLGIsYyl7cmV0dXJue2luZGV4OmEscmVtb3ZlZDpiLGFkZGVkQ291bnQ6Y319ZnVuY3Rpb24gQXJyYXlTcGxpY2UoKXt9ZnVuY3Rpb24gY2FsY1NwbGljZXMoYSxiLGMsZCxlLGYpe3JldHVybiBhcnJheVNwbGljZS5jYWxjU3BsaWNlcyhhLGIsYyxkLGUsZil9ZnVuY3Rpb24gaW50ZXJzZWN0KGEsYixjLGQpe3JldHVybiBjPmJ8fGE+ZD8tMTpiPT1jfHxkPT1hPzA6Yz5hP2Q+Yj9iLWM6ZC1jOmI+ZD9kLWE6Yi1hfWZ1bmN0aW9uIG1lcmdlU3BsaWNlKGEsYixjLGQpe2Zvcih2YXIgZT1uZXdTcGxpY2UoYixjLGQpLGY9ITEsZz0wLGg9MDtoPGEubGVuZ3RoO2grKyl7dmFyIGk9YVtoXTtpZihpLmluZGV4Kz1nLCFmKXt2YXIgaj1pbnRlcnNlY3QoZS5pbmRleCxlLmluZGV4K2UucmVtb3ZlZC5sZW5ndGgsaS5pbmRleCxpLmluZGV4K2kuYWRkZWRDb3VudCk7aWYoaj49MCl7YS5zcGxpY2UoaCwxKSxoLS0sZy09aS5hZGRlZENvdW50LWkucmVtb3ZlZC5sZW5ndGgsZS5hZGRlZENvdW50Kz1pLmFkZGVkQ291bnQtajt2YXIgaz1lLnJlbW92ZWQubGVuZ3RoK2kucmVtb3ZlZC5sZW5ndGgtajtpZihlLmFkZGVkQ291bnR8fGspe3ZhciBjPWkucmVtb3ZlZDtpZihlLmluZGV4PGkuaW5kZXgpe3ZhciBsPWUucmVtb3ZlZC5zbGljZSgwLGkuaW5kZXgtZS5pbmRleCk7QXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkobCxjKSxjPWx9aWYoZS5pbmRleCtlLnJlbW92ZWQubGVuZ3RoPmkuaW5kZXgraS5hZGRlZENvdW50KXt2YXIgbT1lLnJlbW92ZWQuc2xpY2UoaS5pbmRleCtpLmFkZGVkQ291bnQtZS5pbmRleCk7QXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkoYyxtKX1lLnJlbW92ZWQ9YyxpLmluZGV4PGUuaW5kZXgmJihlLmluZGV4PWkuaW5kZXgpfWVsc2UgZj0hMH1lbHNlIGlmKGUuaW5kZXg8aS5pbmRleCl7Zj0hMCxhLnNwbGljZShoLDAsZSksaCsrO3ZhciBuPWUuYWRkZWRDb3VudC1lLnJlbW92ZWQubGVuZ3RoO2kuaW5kZXgrPW4sZys9bn19fWZ8fGEucHVzaChlKX1mdW5jdGlvbiBjcmVhdGVJbml0aWFsU3BsaWNlcyhhLGIpe2Zvcih2YXIgYz1bXSxkPTA7ZDxiLmxlbmd0aDtkKyspe3ZhciBlPWJbZF07c3dpdGNoKGUudHlwZSl7Y2FzZSJzcGxpY2UiOm1lcmdlU3BsaWNlKGMsZS5pbmRleCxlLnJlbW92ZWQuc2xpY2UoKSxlLmFkZGVkQ291bnQpO2JyZWFrO2Nhc2UiYWRkIjpjYXNlInVwZGF0ZSI6Y2FzZSJkZWxldGUiOmlmKCFpc0luZGV4KGUubmFtZSkpY29udGludWU7dmFyIGY9dG9OdW1iZXIoZS5uYW1lKTtpZigwPmYpY29udGludWU7bWVyZ2VTcGxpY2UoYyxmLFtlLm9sZFZhbHVlXSwxKTticmVhaztkZWZhdWx0OmNvbnNvbGUuZXJyb3IoIlVuZXhwZWN0ZWQgcmVjb3JkIHR5cGU6ICIrSlNPTi5zdHJpbmdpZnkoZSkpfX1yZXR1cm4gY31mdW5jdGlvbiBwcm9qZWN0QXJyYXlTcGxpY2VzKGEsYil7dmFyIGM9W107cmV0dXJuIGNyZWF0ZUluaXRpYWxTcGxpY2VzKGEsYikuZm9yRWFjaChmdW5jdGlvbihiKXtyZXR1cm4gMT09Yi5hZGRlZENvdW50JiYxPT1iLnJlbW92ZWQubGVuZ3RoP3ZvaWQoYi5yZW1vdmVkWzBdIT09YVtiLmluZGV4XSYmYy5wdXNoKGIpKTp2b2lkKGM9Yy5jb25jYXQoY2FsY1NwbGljZXMoYSxiLmluZGV4LGIuaW5kZXgrYi5hZGRlZENvdW50LGIucmVtb3ZlZCwwLGIucmVtb3ZlZC5sZW5ndGgpKSl9KSxjfXZhciBoYXNPYnNlcnZlPWRldGVjdE9iamVjdE9ic2VydmUoKSxoYXNFdmFsPWRldGVjdEV2YWwoKSxudW1iZXJJc05hTj1nbG9iYWwuTnVtYmVyLmlzTmFOfHxmdW5jdGlvbihhKXtyZXR1cm4ibnVtYmVyIj09dHlwZW9mIGEmJmdsb2JhbC5pc05hTihhKX0sY3JlYXRlT2JqZWN0PSJfX3Byb3RvX18iaW57fT9mdW5jdGlvbihhKXtyZXR1cm4gYX06ZnVuY3Rpb24oYSl7dmFyIGI9YS5fX3Byb3RvX187aWYoIWIpcmV0dXJuIGE7dmFyIGM9T2JqZWN0LmNyZWF0ZShiKTtyZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoYSkuZm9yRWFjaChmdW5jdGlvbihiKXtPYmplY3QuZGVmaW5lUHJvcGVydHkoYyxiLE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoYSxiKSl9KSxjfSxpZGVudFN0YXJ0PSJbJF9hLXpBLVpdIixpZGVudFBhcnQ9IlskX2EtekEtWjAtOV0iLGlkZW50UmVnRXhwPW5ldyBSZWdFeHAoIl4iK2lkZW50U3RhcnQrIisiK2lkZW50UGFydCsiKiQiKSxwYXRoU3RhdGVNYWNoaW5lPXtiZWZvcmVQYXRoOnt3czpbImJlZm9yZVBhdGgiXSxpZGVudDpbImluSWRlbnQiLCJhcHBlbmQiXSwiWyI6WyJiZWZvcmVFbGVtZW50Il0sZW9mOlsiYWZ0ZXJQYXRoIl19LGluUGF0aDp7d3M6WyJpblBhdGgiXSwiLiI6WyJiZWZvcmVJZGVudCJdLCJbIjpbImJlZm9yZUVsZW1lbnQiXSxlb2Y6WyJhZnRlclBhdGgiXX0sYmVmb3JlSWRlbnQ6e3dzOlsiYmVmb3JlSWRlbnQiXSxpZGVudDpbImluSWRlbnQiLCJhcHBlbmQiXX0saW5JZGVudDp7aWRlbnQ6WyJpbklkZW50IiwiYXBwZW5kIl0sMDpbImluSWRlbnQiLCJhcHBlbmQiXSxudW1iZXI6WyJpbklkZW50IiwiYXBwZW5kIl0sd3M6WyJpblBhdGgiLCJwdXNoIl0sIi4iOlsiYmVmb3JlSWRlbnQiLCJwdXNoIl0sIlsiOlsiYmVmb3JlRWxlbWVudCIsInB1c2giXSxlb2Y6WyJhZnRlclBhdGgiLCJwdXNoIl19LGJlZm9yZUVsZW1lbnQ6e3dzOlsiYmVmb3JlRWxlbWVudCJdLDA6WyJhZnRlclplcm8iLCJhcHBlbmQiXSxudW1iZXI6WyJpbkluZGV4IiwiYXBwZW5kIl0sIiciOlsiaW5TaW5nbGVRdW90ZSIsImFwcGVuZCIsIiJdLCciJzpbImluRG91YmxlUXVvdGUiLCJhcHBlbmQiLCIiXX0sYWZ0ZXJaZXJvOnt3czpbImFmdGVyRWxlbWVudCIsInB1c2giXSwiXSI6WyJpblBhdGgiLCJwdXNoIl19LGluSW5kZXg6ezA6WyJpbkluZGV4IiwiYXBwZW5kIl0sbnVtYmVyOlsiaW5JbmRleCIsImFwcGVuZCJdLHdzOlsiYWZ0ZXJFbGVtZW50Il0sIl0iOlsiaW5QYXRoIiwicHVzaCJdfSxpblNpbmdsZVF1b3RlOnsiJyI6WyJhZnRlckVsZW1lbnQiXSxlb2Y6WyJlcnJvciJdLCJlbHNlIjpbImluU2luZ2xlUXVvdGUiLCJhcHBlbmQiXX0saW5Eb3VibGVRdW90ZTp7JyInOlsiYWZ0ZXJFbGVtZW50Il0sZW9mOlsiZXJyb3IiXSwiZWxzZSI6WyJpbkRvdWJsZVF1b3RlIiwiYXBwZW5kIl19LGFmdGVyRWxlbWVudDp7d3M6WyJhZnRlckVsZW1lbnQiXSwiXSI6WyJpblBhdGgiLCJwdXNoIl19fSxjb25zdHJ1Y3RvcklzUHJpdmF0ZT17fSxwYXRoQ2FjaGU9e307UGF0aC5nZXQ9Z2V0UGF0aCxQYXRoLnByb3RvdHlwZT1jcmVhdGVPYmplY3Qoe19fcHJvdG9fXzpbXSx2YWxpZDohMCx0b1N0cmluZzpmdW5jdGlvbigpe2Zvcih2YXIgYT0iIixiPTA7Yjx0aGlzLmxlbmd0aDtiKyspe3ZhciBjPXRoaXNbYl07YSs9aXNJZGVudChjKT9iPyIuIitjOmM6Zm9ybWF0QWNjZXNzb3IoYyl9cmV0dXJuIGF9LGdldFZhbHVlRnJvbTpmdW5jdGlvbihhKXtmb3IodmFyIGI9MDtiPHRoaXMubGVuZ3RoO2IrKyl7aWYobnVsbD09YSlyZXR1cm47YT1hW3RoaXNbYl1dfXJldHVybiBhfSxpdGVyYXRlT2JqZWN0czpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz0wO2M8dGhpcy5sZW5ndGg7YysrKXtpZihjJiYoYT1hW3RoaXNbYy0xXV0pLCFpc09iamVjdChhKSlyZXR1cm47YihhLHRoaXNbMF0pfX0sY29tcGlsZWRHZXRWYWx1ZUZyb21GbjpmdW5jdGlvbigpe3ZhciBhPSIiLGI9Im9iaiI7YSs9ImlmIChvYmogIT0gbnVsbCI7Zm9yKHZhciBjLGQ9MDtkPHRoaXMubGVuZ3RoLTE7ZCsrKWM9dGhpc1tkXSxiKz1pc0lkZW50KGMpPyIuIitjOmZvcm1hdEFjY2Vzc29yKGMpLGErPSIgJiZcbiAgICAgIitiKyIgIT0gbnVsbCI7YSs9IilcbiI7dmFyIGM9dGhpc1tkXTtyZXR1cm4gYis9aXNJZGVudChjKT8iLiIrYzpmb3JtYXRBY2Nlc3NvcihjKSxhKz0iICByZXR1cm4gIitiKyI7XG5lbHNlXG4gIHJldHVybiB1bmRlZmluZWQ7IixuZXcgRnVuY3Rpb24oIm9iaiIsYSl9LHNldFZhbHVlRnJvbTpmdW5jdGlvbihhLGIpe2lmKCF0aGlzLmxlbmd0aClyZXR1cm4hMTtmb3IodmFyIGM9MDtjPHRoaXMubGVuZ3RoLTE7YysrKXtpZighaXNPYmplY3QoYSkpcmV0dXJuITE7YT1hW3RoaXNbY11dfXJldHVybiBpc09iamVjdChhKT8oYVt0aGlzW2NdXT1iLCEwKTohMX19KTt2YXIgaW52YWxpZFBhdGg9bmV3IFBhdGgoIiIsY29uc3RydWN0b3JJc1ByaXZhdGUpO2ludmFsaWRQYXRoLnZhbGlkPSExLGludmFsaWRQYXRoLmdldFZhbHVlRnJvbT1pbnZhbGlkUGF0aC5zZXRWYWx1ZUZyb209ZnVuY3Rpb24oKXt9O3ZhciBNQVhfRElSVFlfQ0hFQ0tfQ1lDTEVTPTFlMyxlb21UYXNrcz1bXSxydW5FT009aGFzT2JzZXJ2ZT9mdW5jdGlvbigpe3ZhciBhPXtwaW5nUG9uZzohMH0sYj0hMTtyZXR1cm4gT2JqZWN0Lm9ic2VydmUoYSxmdW5jdGlvbigpe3J1bkVPTVRhc2tzKCksYj0hMX0pLGZ1bmN0aW9uKGMpe2VvbVRhc2tzLnB1c2goYyksYnx8KGI9ITAsYS5waW5nUG9uZz0hYS5waW5nUG9uZyl9fSgpOmZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKGEpe2VvbVRhc2tzLnB1c2goYSl9fSgpLG9ic2VydmVkT2JqZWN0Q2FjaGU9W10sb2JzZXJ2ZWRTZXRDYWNoZT1bXSxsYXN0T2JzZXJ2ZWRTZXQsVU5PUEVORUQ9MCxPUEVORUQ9MSxDTE9TRUQ9MixSRVNFVFRJTkc9MyxuZXh0T2JzZXJ2ZXJJZD0xO09ic2VydmVyLnByb3RvdHlwZT17b3BlbjpmdW5jdGlvbihhLGIpe2lmKHRoaXMuc3RhdGVfIT1VTk9QRU5FRCl0aHJvdyBFcnJvcigiT2JzZXJ2ZXIgaGFzIGFscmVhZHkgYmVlbiBvcGVuZWQuIik7cmV0dXJuIGFkZFRvQWxsKHRoaXMpLHRoaXMuY2FsbGJhY2tfPWEsdGhpcy50YXJnZXRfPWIsdGhpcy5jb25uZWN0XygpLHRoaXMuc3RhdGVfPU9QRU5FRCx0aGlzLnZhbHVlX30sY2xvc2U6ZnVuY3Rpb24oKXt0aGlzLnN0YXRlXz09T1BFTkVEJiYocmVtb3ZlRnJvbUFsbCh0aGlzKSx0aGlzLmRpc2Nvbm5lY3RfKCksdGhpcy52YWx1ZV89dm9pZCAwLHRoaXMuY2FsbGJhY2tfPXZvaWQgMCx0aGlzLnRhcmdldF89dm9pZCAwLHRoaXMuc3RhdGVfPUNMT1NFRCl9LGRlbGl2ZXI6ZnVuY3Rpb24oKXt0aGlzLnN0YXRlXz09T1BFTkVEJiZkaXJ0eUNoZWNrKHRoaXMpfSxyZXBvcnRfOmZ1bmN0aW9uKGEpe3RyeXt0aGlzLmNhbGxiYWNrXy5hcHBseSh0aGlzLnRhcmdldF8sYSl9Y2F0Y2goYil7T2JzZXJ2ZXIuX2Vycm9yVGhyb3duRHVyaW5nQ2FsbGJhY2s9ITAsY29uc29sZS5lcnJvcigiRXhjZXB0aW9uIGNhdWdodCBkdXJpbmcgb2JzZXJ2ZXIgY2FsbGJhY2s6ICIrKGIuc3RhY2t8fGIpKX19LGRpc2NhcmRDaGFuZ2VzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY2hlY2tfKHZvaWQgMCwhMCksdGhpcy52YWx1ZV99fTt2YXIgY29sbGVjdE9ic2VydmVycz0haGFzT2JzZXJ2ZSxhbGxPYnNlcnZlcnM7T2JzZXJ2ZXIuX2FsbE9ic2VydmVyc0NvdW50PTAsY29sbGVjdE9ic2VydmVycyYmKGFsbE9ic2VydmVycz1bXSk7dmFyIHJ1bm5pbmdNaWNyb3Rhc2tDaGVja3BvaW50PSExLGhhc0RlYnVnRm9yY2VGdWxsRGVsaXZlcnk9aGFzT2JzZXJ2ZSYmaGFzRXZhbCYmZnVuY3Rpb24oKXt0cnl7cmV0dXJuIGV2YWwoIiVSdW5NaWNyb3Rhc2tzKCkiKSwhMH1jYXRjaChleCl7cmV0dXJuITF9fSgpO2dsb2JhbC5QbGF0Zm9ybT1nbG9iYWwuUGxhdGZvcm18fHt9LGdsb2JhbC5QbGF0Zm9ybS5wZXJmb3JtTWljcm90YXNrQ2hlY2twb2ludD1mdW5jdGlvbigpe2lmKCFydW5uaW5nTWljcm90YXNrQ2hlY2twb2ludCl7aWYoaGFzRGVidWdGb3JjZUZ1bGxEZWxpdmVyeSlyZXR1cm4gdm9pZCBldmFsKCIlUnVuTWljcm90YXNrcygpIik7aWYoY29sbGVjdE9ic2VydmVycyl7cnVubmluZ01pY3JvdGFza0NoZWNrcG9pbnQ9ITA7dmFyIGN5Y2xlcz0wLGFueUNoYW5nZWQsdG9DaGVjaztkb3tjeWNsZXMrKyx0b0NoZWNrPWFsbE9ic2VydmVycyxhbGxPYnNlcnZlcnM9W10sYW55Q2hhbmdlZD0hMTtmb3IodmFyIGk9MDtpPHRvQ2hlY2subGVuZ3RoO2krKyl7dmFyIG9ic2VydmVyPXRvQ2hlY2tbaV07b2JzZXJ2ZXIuc3RhdGVfPT1PUEVORUQmJihvYnNlcnZlci5jaGVja18oKSYmKGFueUNoYW5nZWQ9ITApLGFsbE9ic2VydmVycy5wdXNoKG9ic2VydmVyKSl9cnVuRU9NVGFza3MoKSYmKGFueUNoYW5nZWQ9ITApfXdoaWxlKE1BWF9ESVJUWV9DSEVDS19DWUNMRVM+Y3ljbGVzJiZhbnlDaGFuZ2VkKTtnbG9iYWwudGVzdGluZ0V4cG9zZUN5Y2xlQ291bnQmJihnbG9iYWwuZGlydHlDaGVja0N5Y2xlQ291bnQ9Y3ljbGVzKSxydW5uaW5nTWljcm90YXNrQ2hlY2twb2ludD0hMX19fSxjb2xsZWN0T2JzZXJ2ZXJzJiYoZ2xvYmFsLlBsYXRmb3JtLmNsZWFyT2JzZXJ2ZXJzPWZ1bmN0aW9uKCl7YWxsT2JzZXJ2ZXJzPVtdfSksT2JqZWN0T2JzZXJ2ZXIucHJvdG90eXBlPWNyZWF0ZU9iamVjdCh7X19wcm90b19fOk9ic2VydmVyLnByb3RvdHlwZSxhcnJheU9ic2VydmU6ITEsY29ubmVjdF86ZnVuY3Rpb24oKXtoYXNPYnNlcnZlP3RoaXMuZGlyZWN0T2JzZXJ2ZXJfPWdldE9ic2VydmVkT2JqZWN0KHRoaXMsdGhpcy52YWx1ZV8sdGhpcy5hcnJheU9ic2VydmUpOnRoaXMub2xkT2JqZWN0Xz10aGlzLmNvcHlPYmplY3QodGhpcy52YWx1ZV8pfSxjb3B5T2JqZWN0OmZ1bmN0aW9uKGEpe3ZhciBiPUFycmF5LmlzQXJyYXkoYSk/W106e307Zm9yKHZhciBjIGluIGEpYltjXT1hW2NdO3JldHVybiBBcnJheS5pc0FycmF5KGEpJiYoYi5sZW5ndGg9YS5sZW5ndGgpLGJ9LGNoZWNrXzpmdW5jdGlvbihhKXt2YXIgYixjO2lmKGhhc09ic2VydmUpe2lmKCFhKXJldHVybiExO2M9e30sYj1kaWZmT2JqZWN0RnJvbUNoYW5nZVJlY29yZHModGhpcy52YWx1ZV8sYSxjKX1lbHNlIGM9dGhpcy5vbGRPYmplY3RfLGI9ZGlmZk9iamVjdEZyb21PbGRPYmplY3QodGhpcy52YWx1ZV8sdGhpcy5vbGRPYmplY3RfKTtyZXR1cm4gZGlmZklzRW1wdHkoYik/ITE6KGhhc09ic2VydmV8fCh0aGlzLm9sZE9iamVjdF89dGhpcy5jb3B5T2JqZWN0KHRoaXMudmFsdWVfKSksdGhpcy5yZXBvcnRfKFtiLmFkZGVkfHx7fSxiLnJlbW92ZWR8fHt9LGIuY2hhbmdlZHx8e30sZnVuY3Rpb24oYSl7cmV0dXJuIGNbYV19XSksITApfSxkaXNjb25uZWN0XzpmdW5jdGlvbigpe2hhc09ic2VydmU/KHRoaXMuZGlyZWN0T2JzZXJ2ZXJfLmNsb3NlKCksdGhpcy5kaXJlY3RPYnNlcnZlcl89dm9pZCAwKTp0aGlzLm9sZE9iamVjdF89dm9pZCAwfSxkZWxpdmVyOmZ1bmN0aW9uKCl7dGhpcy5zdGF0ZV89PU9QRU5FRCYmKGhhc09ic2VydmU/dGhpcy5kaXJlY3RPYnNlcnZlcl8uZGVsaXZlcighMSk6ZGlydHlDaGVjayh0aGlzKSl9LGRpc2NhcmRDaGFuZ2VzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGlyZWN0T2JzZXJ2ZXJfP3RoaXMuZGlyZWN0T2JzZXJ2ZXJfLmRlbGl2ZXIoITApOnRoaXMub2xkT2JqZWN0Xz10aGlzLmNvcHlPYmplY3QodGhpcy52YWx1ZV8pLHRoaXMudmFsdWVffX0pLEFycmF5T2JzZXJ2ZXIucHJvdG90eXBlPWNyZWF0ZU9iamVjdCh7X19wcm90b19fOk9iamVjdE9ic2VydmVyLnByb3RvdHlwZSxhcnJheU9ic2VydmU6ITAsY29weU9iamVjdDpmdW5jdGlvbihhKXtyZXR1cm4gYS5zbGljZSgpfSxjaGVja186ZnVuY3Rpb24oYSl7dmFyIGI7aWYoaGFzT2JzZXJ2ZSl7aWYoIWEpcmV0dXJuITE7Yj1wcm9qZWN0QXJyYXlTcGxpY2VzKHRoaXMudmFsdWVfLGEpfWVsc2UgYj1jYWxjU3BsaWNlcyh0aGlzLnZhbHVlXywwLHRoaXMudmFsdWVfLmxlbmd0aCx0aGlzLm9sZE9iamVjdF8sMCx0aGlzLm9sZE9iamVjdF8ubGVuZ3RoKTtyZXR1cm4gYiYmYi5sZW5ndGg/KGhhc09ic2VydmV8fCh0aGlzLm9sZE9iamVjdF89dGhpcy5jb3B5T2JqZWN0KHRoaXMudmFsdWVfKSksdGhpcy5yZXBvcnRfKFtiXSksITApOiExfX0pLEFycmF5T2JzZXJ2ZXIuYXBwbHlTcGxpY2VzPWZ1bmN0aW9uKGEsYixjKXtjLmZvckVhY2goZnVuY3Rpb24oYyl7Zm9yKHZhciBkPVtjLmluZGV4LGMucmVtb3ZlZC5sZW5ndGhdLGU9Yy5pbmRleDtlPGMuaW5kZXgrYy5hZGRlZENvdW50OylkLnB1c2goYltlXSksZSsrO0FycmF5LnByb3RvdHlwZS5zcGxpY2UuYXBwbHkoYSxkKX0pfSxQYXRoT2JzZXJ2ZXIucHJvdG90eXBlPWNyZWF0ZU9iamVjdCh7X19wcm90b19fOk9ic2VydmVyLnByb3RvdHlwZSxnZXQgcGF0aCgpe3JldHVybiB0aGlzLnBhdGhffSxjb25uZWN0XzpmdW5jdGlvbigpe2hhc09ic2VydmUmJih0aGlzLmRpcmVjdE9ic2VydmVyXz1nZXRPYnNlcnZlZFNldCh0aGlzLHRoaXMub2JqZWN0XykpLHRoaXMuY2hlY2tfKHZvaWQgMCwhMCl9LGRpc2Nvbm5lY3RfOmZ1bmN0aW9uKCl7dGhpcy52YWx1ZV89dm9pZCAwLHRoaXMuZGlyZWN0T2JzZXJ2ZXJfJiYodGhpcy5kaXJlY3RPYnNlcnZlcl8uY2xvc2UodGhpcyksdGhpcy5kaXJlY3RPYnNlcnZlcl89dm9pZCAwKX0saXRlcmF0ZU9iamVjdHNfOmZ1bmN0aW9uKGEpe3RoaXMucGF0aF8uaXRlcmF0ZU9iamVjdHModGhpcy5vYmplY3RfLGEpfSxjaGVja186ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLnZhbHVlXztyZXR1cm4gdGhpcy52YWx1ZV89dGhpcy5wYXRoXy5nZXRWYWx1ZUZyb20odGhpcy5vYmplY3RfKSxifHxhcmVTYW1lVmFsdWUodGhpcy52YWx1ZV8sYyk/ITE6KHRoaXMucmVwb3J0XyhbdGhpcy52YWx1ZV8sYyx0aGlzXSksITApfSxzZXRWYWx1ZTpmdW5jdGlvbihhKXt0aGlzLnBhdGhfJiZ0aGlzLnBhdGhfLnNldFZhbHVlRnJvbSh0aGlzLm9iamVjdF8sYSl9fSk7dmFyIG9ic2VydmVyU2VudGluZWw9e307Q29tcG91bmRPYnNlcnZlci5wcm90b3R5cGU9Y3JlYXRlT2JqZWN0KHtfX3Byb3RvX186T2JzZXJ2ZXIucHJvdG90eXBlLGNvbm5lY3RfOmZ1bmN0aW9uKCl7aWYoaGFzT2JzZXJ2ZSl7Zm9yKHZhciBhLGI9ITEsYz0wO2M8dGhpcy5vYnNlcnZlZF8ubGVuZ3RoO2MrPTIpaWYoYT10aGlzLm9ic2VydmVkX1tjXSxhIT09b2JzZXJ2ZXJTZW50aW5lbCl7Yj0hMDticmVha31iJiYodGhpcy5kaXJlY3RPYnNlcnZlcl89Z2V0T2JzZXJ2ZWRTZXQodGhpcyxhKSl9dGhpcy5jaGVja18odm9pZCAwLCF0aGlzLnJlcG9ydENoYW5nZXNPbk9wZW5fKX0sZGlzY29ubmVjdF86ZnVuY3Rpb24oKXtmb3IodmFyIGE9MDthPHRoaXMub2JzZXJ2ZWRfLmxlbmd0aDthKz0yKXRoaXMub2JzZXJ2ZWRfW2FdPT09b2JzZXJ2ZXJTZW50aW5lbCYmdGhpcy5vYnNlcnZlZF9bYSsxXS5jbG9zZSgpO3RoaXMub2JzZXJ2ZWRfLmxlbmd0aD0wLHRoaXMudmFsdWVfLmxlbmd0aD0wLHRoaXMuZGlyZWN0T2JzZXJ2ZXJfJiYodGhpcy5kaXJlY3RPYnNlcnZlcl8uY2xvc2UodGhpcyksdGhpcy5kaXJlY3RPYnNlcnZlcl89dm9pZCAwKX0sYWRkUGF0aDpmdW5jdGlvbihhLGIpe2lmKHRoaXMuc3RhdGVfIT1VTk9QRU5FRCYmdGhpcy5zdGF0ZV8hPVJFU0VUVElORyl0aHJvdyBFcnJvcigiQ2Fubm90IGFkZCBwYXRocyBvbmNlIHN0YXJ0ZWQuIik7dmFyIGI9Z2V0UGF0aChiKTtpZih0aGlzLm9ic2VydmVkXy5wdXNoKGEsYiksdGhpcy5yZXBvcnRDaGFuZ2VzT25PcGVuXyl7dmFyIGM9dGhpcy5vYnNlcnZlZF8ubGVuZ3RoLzItMTt0aGlzLnZhbHVlX1tjXT1iLmdldFZhbHVlRnJvbShhKX19LGFkZE9ic2VydmVyOmZ1bmN0aW9uKGEpe2lmKHRoaXMuc3RhdGVfIT1VTk9QRU5FRCYmdGhpcy5zdGF0ZV8hPVJFU0VUVElORyl0aHJvdyBFcnJvcigiQ2Fubm90IGFkZCBvYnNlcnZlcnMgb25jZSBzdGFydGVkLiIpO2lmKHRoaXMub2JzZXJ2ZWRfLnB1c2gob2JzZXJ2ZXJTZW50aW5lbCxhKSx0aGlzLnJlcG9ydENoYW5nZXNPbk9wZW5fKXt2YXIgYj10aGlzLm9ic2VydmVkXy5sZW5ndGgvMi0xO3RoaXMudmFsdWVfW2JdPWEub3Blbih0aGlzLmRlbGl2ZXIsdGhpcyl9fSxzdGFydFJlc2V0OmZ1bmN0aW9uKCl7aWYodGhpcy5zdGF0ZV8hPU9QRU5FRCl0aHJvdyBFcnJvcigiQ2FuIG9ubHkgcmVzZXQgd2hpbGUgb3BlbiIpO3RoaXMuc3RhdGVfPVJFU0VUVElORyx0aGlzLmRpc2Nvbm5lY3RfKCl9LGZpbmlzaFJlc2V0OmZ1bmN0aW9uKCl7aWYodGhpcy5zdGF0ZV8hPVJFU0VUVElORyl0aHJvdyBFcnJvcigiQ2FuIG9ubHkgZmluaXNoUmVzZXQgYWZ0ZXIgc3RhcnRSZXNldCIpO3JldHVybiB0aGlzLnN0YXRlXz1PUEVORUQsdGhpcy5jb25uZWN0XygpLHRoaXMudmFsdWVffSxpdGVyYXRlT2JqZWN0c186ZnVuY3Rpb24oYSl7Zm9yKHZhciBiLGM9MDtjPHRoaXMub2JzZXJ2ZWRfLmxlbmd0aDtjKz0yKWI9dGhpcy5vYnNlcnZlZF9bY10sYiE9PW9ic2VydmVyU2VudGluZWwmJnRoaXMub2JzZXJ2ZWRfW2MrMV0uaXRlcmF0ZU9iamVjdHMoYixhKX0sY2hlY2tfOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjLGQ9MDtkPHRoaXMub2JzZXJ2ZWRfLmxlbmd0aDtkKz0yKXt2YXIgZSxmPXRoaXMub2JzZXJ2ZWRfW2RdLGc9dGhpcy5vYnNlcnZlZF9bZCsxXTtpZihmPT09b2JzZXJ2ZXJTZW50aW5lbCl7dmFyIGg9ZztlPXRoaXMuc3RhdGVfPT09VU5PUEVORUQ/aC5vcGVuKHRoaXMuZGVsaXZlcix0aGlzKTpoLmRpc2NhcmRDaGFuZ2VzKCl9ZWxzZSBlPWcuZ2V0VmFsdWVGcm9tKGYpO2I/dGhpcy52YWx1ZV9bZC8yXT1lOmFyZVNhbWVWYWx1ZShlLHRoaXMudmFsdWVfW2QvMl0pfHwoYz1jfHxbXSxjW2QvMl09dGhpcy52YWx1ZV9bZC8yXSx0aGlzLnZhbHVlX1tkLzJdPWUpfXJldHVybiBjPyh0aGlzLnJlcG9ydF8oW3RoaXMudmFsdWVfLGMsdGhpcy5vYnNlcnZlZF9dKSwhMCk6ITF9fSksT2JzZXJ2ZXJUcmFuc2Zvcm0ucHJvdG90eXBlPXtvcGVuOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuY2FsbGJhY2tfPWEsdGhpcy50YXJnZXRfPWIsdGhpcy52YWx1ZV89dGhpcy5nZXRWYWx1ZUZuXyh0aGlzLm9ic2VydmFibGVfLm9wZW4odGhpcy5vYnNlcnZlZENhbGxiYWNrXyx0aGlzKSksdGhpcy52YWx1ZV99LG9ic2VydmVkQ2FsbGJhY2tfOmZ1bmN0aW9uKGEpe2lmKGE9dGhpcy5nZXRWYWx1ZUZuXyhhKSwhYXJlU2FtZVZhbHVlKGEsdGhpcy52YWx1ZV8pKXt2YXIgYj10aGlzLnZhbHVlXzt0aGlzLnZhbHVlXz1hLHRoaXMuY2FsbGJhY2tfLmNhbGwodGhpcy50YXJnZXRfLHRoaXMudmFsdWVfLGIpfX0sZGlzY2FyZENoYW5nZXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy52YWx1ZV89dGhpcy5nZXRWYWx1ZUZuXyh0aGlzLm9ic2VydmFibGVfLmRpc2NhcmRDaGFuZ2VzKCkpLHRoaXMudmFsdWVffSxkZWxpdmVyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub2JzZXJ2YWJsZV8uZGVsaXZlcigpfSxzZXRWYWx1ZTpmdW5jdGlvbihhKXtyZXR1cm4gYT10aGlzLnNldFZhbHVlRm5fKGEpLCF0aGlzLmRvbnRQYXNzVGhyb3VnaFNldF8mJnRoaXMub2JzZXJ2YWJsZV8uc2V0VmFsdWU/dGhpcy5vYnNlcnZhYmxlXy5zZXRWYWx1ZShhKTp2b2lkIDB9LGNsb3NlOmZ1bmN0aW9uKCl7dGhpcy5vYnNlcnZhYmxlXyYmdGhpcy5vYnNlcnZhYmxlXy5jbG9zZSgpLHRoaXMuY2FsbGJhY2tfPXZvaWQgMCx0aGlzLnRhcmdldF89dm9pZCAwLHRoaXMub2JzZXJ2YWJsZV89dm9pZCAwLHRoaXMudmFsdWVfPXZvaWQgMCx0aGlzLmdldFZhbHVlRm5fPXZvaWQgMCx0aGlzLnNldFZhbHVlRm5fPXZvaWQgMH19O3ZhciBleHBlY3RlZFJlY29yZFR5cGVzPXthZGQ6ITAsdXBkYXRlOiEwLCJkZWxldGUiOiEwfSxFRElUX0xFQVZFPTAsRURJVF9VUERBVEU9MSxFRElUX0FERD0yLEVESVRfREVMRVRFPTM7QXJyYXlTcGxpY2UucHJvdG90eXBlPXtjYWxjRWRpdERpc3RhbmNlczpmdW5jdGlvbihhLGIsYyxkLGUsZil7Zm9yKHZhciBnPWYtZSsxLGg9Yy1iKzEsaT1uZXcgQXJyYXkoZyksaj0wO2c+ajtqKyspaVtqXT1uZXcgQXJyYXkoaCksaVtqXVswXT1qO2Zvcih2YXIgaz0wO2g+aztrKyspaVswXVtrXT1rO2Zvcih2YXIgaj0xO2c+ajtqKyspZm9yKHZhciBrPTE7aD5rO2srKylpZih0aGlzLmVxdWFscyhhW2Iray0xXSxkW2Urai0xXSkpaVtqXVtrXT1pW2otMV1bay0xXTtlbHNle3ZhciBsPWlbai0xXVtrXSsxLG09aVtqXVtrLTFdKzE7aVtqXVtrXT1tPmw/bDptfXJldHVybiBpfSxzcGxpY2VPcGVyYXRpb25zRnJvbUVkaXREaXN0YW5jZXM6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPWEubGVuZ3RoLTEsYz1hWzBdLmxlbmd0aC0xLGQ9YVtiXVtjXSxlPVtdO2I+MHx8Yz4wOylpZigwIT1iKWlmKDAhPWMpe3ZhciBmLGc9YVtiLTFdW2MtMV0saD1hW2ItMV1bY10saT1hW2JdW2MtMV07Zj1pPmg/Zz5oP2g6ZzpnPmk/aTpnLGY9PWc/KGc9PWQ/ZS5wdXNoKEVESVRfTEVBVkUpOihlLnB1c2goRURJVF9VUERBVEUpLGQ9ZyksYi0tLGMtLSk6Zj09aD8oZS5wdXNoKEVESVRfREVMRVRFKSxiLS0sZD1oKTooZS5wdXNoKEVESVRfQUREKSxjLS0sZD1pKX1lbHNlIGUucHVzaChFRElUX0RFTEVURSksYi0tO2Vsc2UgZS5wdXNoKEVESVRfQUREKSxjLS07cmV0dXJuIGUucmV2ZXJzZSgpLGV9LGNhbGNTcGxpY2VzOmZ1bmN0aW9uKGEsYixjLGQsZSxmKXt2YXIgZz0wLGg9MCxpPU1hdGgubWluKGMtYixmLWUpO2lmKDA9PWImJjA9PWUmJihnPXRoaXMuc2hhcmVkUHJlZml4KGEsZCxpKSksYz09YS5sZW5ndGgmJmY9PWQubGVuZ3RoJiYoaD10aGlzLnNoYXJlZFN1ZmZpeChhLGQsaS1nKSksYis9ZyxlKz1nLGMtPWgsZi09aCxjLWI9PTAmJmYtZT09MClyZXR1cm5bXTtpZihiPT1jKXtmb3IodmFyIGo9bmV3U3BsaWNlKGIsW10sMCk7Zj5lOylqLnJlbW92ZWQucHVzaChkW2UrK10pO3JldHVybltqXX1pZihlPT1mKXJldHVybltuZXdTcGxpY2UoYixbXSxjLWIpXTtmb3IodmFyIGs9dGhpcy5zcGxpY2VPcGVyYXRpb25zRnJvbUVkaXREaXN0YW5jZXModGhpcy5jYWxjRWRpdERpc3RhbmNlcyhhLGIsYyxkLGUsZikpLGo9dm9pZCAwLGw9W10sbT1iLG49ZSxvPTA7bzxrLmxlbmd0aDtvKyspc3dpdGNoKGtbb10pe2Nhc2UgRURJVF9MRUFWRTpqJiYobC5wdXNoKGopLGo9dm9pZCAwKSxtKyssbisrO2JyZWFrO2Nhc2UgRURJVF9VUERBVEU6anx8KGo9bmV3U3BsaWNlKG0sW10sMCkpLGouYWRkZWRDb3VudCsrLG0rKyxqLnJlbW92ZWQucHVzaChkW25dKSxuKys7YnJlYWs7Y2FzZSBFRElUX0FERDpqfHwoaj1uZXdTcGxpY2UobSxbXSwwKSksai5hZGRlZENvdW50KyssbSsrO2JyZWFrO2Nhc2UgRURJVF9ERUxFVEU6anx8KGo9bmV3U3BsaWNlKG0sW10sMCkpLGoucmVtb3ZlZC5wdXNoKGRbbl0pLG4rK31yZXR1cm4gaiYmbC5wdXNoKGopLGx9LHNoYXJlZFByZWZpeDpmdW5jdGlvbihhLGIsYyl7Zm9yKHZhciBkPTA7Yz5kO2QrKylpZighdGhpcy5lcXVhbHMoYVtkXSxiW2RdKSlyZXR1cm4gZDtyZXR1cm4gY30sc2hhcmVkU3VmZml4OmZ1bmN0aW9uKGEsYixjKXtmb3IodmFyIGQ9YS5sZW5ndGgsZT1iLmxlbmd0aCxmPTA7Yz5mJiZ0aGlzLmVxdWFscyhhWy0tZF0sYlstLWVdKTspZisrO3JldHVybiBmfSxjYWxjdWxhdGVTcGxpY2VzOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuY2FsY1NwbGljZXMoYSwwLGEubGVuZ3RoLGIsMCxiLmxlbmd0aCl9LGVxdWFsczpmdW5jdGlvbihhLGIpe3JldHVybiBhPT09Yn19O3ZhciBhcnJheVNwbGljZT1uZXcgQXJyYXlTcGxpY2U7Z2xvYmFsLk9ic2VydmVyPU9ic2VydmVyLGdsb2JhbC5PYnNlcnZlci5ydW5FT01fPXJ1bkVPTSxnbG9iYWwuT2JzZXJ2ZXIub2JzZXJ2ZXJTZW50aW5lbF89b2JzZXJ2ZXJTZW50aW5lbCxnbG9iYWwuT2JzZXJ2ZXIuaGFzT2JqZWN0T2JzZXJ2ZT1oYXNPYnNlcnZlLGdsb2JhbC5BcnJheU9ic2VydmVyPUFycmF5T2JzZXJ2ZXIsZ2xvYmFsLkFycmF5T2JzZXJ2ZXIuY2FsY3VsYXRlU3BsaWNlcz1mdW5jdGlvbihhLGIpe3JldHVybiBhcnJheVNwbGljZS5jYWxjdWxhdGVTcGxpY2VzKGEsYil9LGdsb2JhbC5BcnJheVNwbGljZT1BcnJheVNwbGljZSxnbG9iYWwuT2JqZWN0T2JzZXJ2ZXI9T2JqZWN0T2JzZXJ2ZXIsZ2xvYmFsLlBhdGhPYnNlcnZlcj1QYXRoT2JzZXJ2ZXIsZ2xvYmFsLkNvbXBvdW5kT2JzZXJ2ZXI9Q29tcG91bmRPYnNlcnZlcixnbG9iYWwuUGF0aD1QYXRoLGdsb2JhbC5PYnNlcnZlclRyYW5zZm9ybT1PYnNlcnZlclRyYW5zZm9ybX0oInVuZGVmaW5lZCIhPXR5cGVvZiBnbG9iYWwmJmdsb2JhbCYmInVuZGVmaW5lZCIhPXR5cGVvZiBtb2R1bGUmJm1vZHVsZT9nbG9iYWw6dGhpc3x8d2luZG93KSxQbGF0Zm9ybS5mbGFncy5zaGFkb3c/KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbD17fSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYigpe2lmKCJ1bmRlZmluZWQiIT10eXBlb2YgY2hyb21lJiZjaHJvbWUuYXBwJiZjaHJvbWUuYXBwLnJ1bnRpbWUpcmV0dXJuITE7dHJ5e3ZhciBhPW5ldyBGdW5jdGlvbigicmV0dXJuIHRydWU7Iik7cmV0dXJuIGEoKX1jYXRjaChiKXtyZXR1cm4hMX19ZnVuY3Rpb24gYyhhKXtpZighYSl0aHJvdyBuZXcgRXJyb3IoIkFzc2VydGlvbiBmYWlsZWQiKX1mdW5jdGlvbiBkKGEsYil7Zm9yKHZhciBjPUwoYiksZD0wO2Q8Yy5sZW5ndGg7ZCsrKXt2YXIgZT1jW2RdO0soYSxlLE0oYixlKSl9cmV0dXJuIGF9ZnVuY3Rpb24gZShhLGIpe2Zvcih2YXIgYz1MKGIpLGQ9MDtkPGMubGVuZ3RoO2QrKyl7dmFyIGU9Y1tkXTtzd2l0Y2goZSl7Y2FzZSJhcmd1bWVudHMiOmNhc2UiY2FsbGVyIjpjYXNlImxlbmd0aCI6Y2FzZSJuYW1lIjpjYXNlInByb3RvdHlwZSI6Y2FzZSJ0b1N0cmluZyI6Y29udGludWV9SyhhLGUsTShiLGUpKX1yZXR1cm4gYX1mdW5jdGlvbiBmKGEsYil7Zm9yKHZhciBjPTA7YzxiLmxlbmd0aDtjKyspaWYoYltjXWluIGEpcmV0dXJuIGJbY119ZnVuY3Rpb24gZyhhLGIsYyl7Ti52YWx1ZT1jLEsoYSxiLE4pfWZ1bmN0aW9uIGgoYSl7dmFyIGI9YS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihhKSxjPUcuZ2V0KGIpO2lmKGMpcmV0dXJuIGM7dmFyIGQ9aChiKSxlPXYoZCk7cmV0dXJuIHMoYixlLGEpLGV9ZnVuY3Rpb24gaShhLGIpe3EoYSxiLCEwKX1mdW5jdGlvbiBqKGEsYil7cShiLGEsITEpfWZ1bmN0aW9uIGsoYSl7cmV0dXJuL15vblthLXpdKyQvLnRlc3QoYSl9ZnVuY3Rpb24gbChhKXtyZXR1cm4vXlx3W2EtekEtWl8wLTldKiQvLnRlc3QoYSl9ZnVuY3Rpb24gbShhKXtyZXR1cm4gSiYmbChhKT9uZXcgRnVuY3Rpb24oInJldHVybiB0aGlzLmltcGwuIithKTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmltcGxbYV19fWZ1bmN0aW9uIG4oYSl7cmV0dXJuIEomJmwoYSk/bmV3IEZ1bmN0aW9uKCJ2IiwidGhpcy5pbXBsLiIrYSsiID0gdiIpOmZ1bmN0aW9uKGIpe3RoaXMuaW1wbFthXT1ifX1mdW5jdGlvbiBvKGEpe3JldHVybiBKJiZsKGEpP25ldyBGdW5jdGlvbigicmV0dXJuIHRoaXMuaW1wbC4iK2ErIi5hcHBseSh0aGlzLmltcGwsIGFyZ3VtZW50cykiKTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmltcGxbYV0uYXBwbHkodGhpcy5pbXBsLGFyZ3VtZW50cyl9fWZ1bmN0aW9uIHAoYSxiKXt0cnl7cmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoYSxiKX1jYXRjaChjKXtyZXR1cm4gUH19ZnVuY3Rpb24gcShiLGMsZCl7Zm9yKHZhciBlPUwoYiksZj0wO2Y8ZS5sZW5ndGg7ZisrKXt2YXIgZz1lW2ZdO2lmKCJwb2x5bWVyQmxhY2tMaXN0XyIhPT1nJiYhKGcgaW4gY3x8Yi5wb2x5bWVyQmxhY2tMaXN0XyYmYi5wb2x5bWVyQmxhY2tMaXN0X1tnXSkpe08mJmIuX19sb29rdXBHZXR0ZXJfXyhnKTt2YXIgaCxpLGo9cChiLGcpO2lmKGQmJiJmdW5jdGlvbiI9PXR5cGVvZiBqLnZhbHVlKWNbZ109byhnKTtlbHNle3ZhciBsPWsoZyk7aD1sP2EuZ2V0RXZlbnRIYW5kbGVyR2V0dGVyKGcpOm0oZyksKGoud3JpdGFibGV8fGouc2V0KSYmKGk9bD9hLmdldEV2ZW50SGFuZGxlclNldHRlcihnKTpuKGcpKSxLKGMsZyx7Z2V0Omgsc2V0OmksY29uZmlndXJhYmxlOmouY29uZmlndXJhYmxlLGVudW1lcmFibGU6ai5lbnVtZXJhYmxlfSl9fX19ZnVuY3Rpb24gcihhLGIsYyl7dmFyIGQ9YS5wcm90b3R5cGU7cyhkLGIsYyksZShiLGEpfWZ1bmN0aW9uIHMoYSxiLGQpe3ZhciBlPWIucHJvdG90eXBlO2Modm9pZCAwPT09Ry5nZXQoYSkpLEcuc2V0KGEsYiksSC5zZXQoZSxhKSxpKGEsZSksZCYmaihlLGQpLGcoZSwiY29uc3RydWN0b3IiLGIpLGIucHJvdG90eXBlPWV9ZnVuY3Rpb24gdChhLGIpe3JldHVybiBHLmdldChiLnByb3RvdHlwZSk9PT1hfWZ1bmN0aW9uIHUoYSl7dmFyIGI9T2JqZWN0LmdldFByb3RvdHlwZU9mKGEpLGM9aChiKSxkPXYoYyk7cmV0dXJuIHMoYixkLGEpLGR9ZnVuY3Rpb24gdihhKXtmdW5jdGlvbiBiKGIpe2EuY2FsbCh0aGlzLGIpfXZhciBjPU9iamVjdC5jcmVhdGUoYS5wcm90b3R5cGUpO3JldHVybiBjLmNvbnN0cnVjdG9yPWIsYi5wcm90b3R5cGU9YyxifWZ1bmN0aW9uIHcoYSl7cmV0dXJuIGEgaW5zdGFuY2VvZiBJLkV2ZW50VGFyZ2V0fHxhIGluc3RhbmNlb2YgSS5FdmVudHx8YSBpbnN0YW5jZW9mIEkuUmFuZ2V8fGEgaW5zdGFuY2VvZiBJLkRPTUltcGxlbWVudGF0aW9ufHxhIGluc3RhbmNlb2YgSS5DYW52YXNSZW5kZXJpbmdDb250ZXh0MkR8fEkuV2ViR0xSZW5kZXJpbmdDb250ZXh0JiZhIGluc3RhbmNlb2YgSS5XZWJHTFJlbmRlcmluZ0NvbnRleHR9ZnVuY3Rpb24geChhKXtyZXR1cm4gUiYmYSBpbnN0YW5jZW9mIFJ8fGEgaW5zdGFuY2VvZiBUfHxhIGluc3RhbmNlb2YgU3x8YSBpbnN0YW5jZW9mIFV8fGEgaW5zdGFuY2VvZiBWfHxhIGluc3RhbmNlb2YgUXx8YSBpbnN0YW5jZW9mIFd8fFgmJmEgaW5zdGFuY2VvZiBYfHxZJiZhIGluc3RhbmNlb2YgWX1mdW5jdGlvbiB5KGEpe3JldHVybiBudWxsPT09YT9udWxsOihjKHgoYSkpLGEucG9seW1lcldyYXBwZXJffHwoYS5wb2x5bWVyV3JhcHBlcl89bmV3KGgoYSkpKGEpKSl9ZnVuY3Rpb24geihhKXtyZXR1cm4gbnVsbD09PWE/bnVsbDooYyh3KGEpKSxhLmltcGwpfWZ1bmN0aW9uIEEoYSl7cmV0dXJuIGEmJncoYSk/eihhKTphfWZ1bmN0aW9uIEIoYSl7cmV0dXJuIGEmJiF3KGEpP3koYSk6YX1mdW5jdGlvbiBDKGEsYil7bnVsbCE9PWImJihjKHgoYSkpLGModm9pZCAwPT09Ynx8dyhiKSksYS5wb2x5bWVyV3JhcHBlcl89Yil9ZnVuY3Rpb24gRChhLGIsYyl7Wi5nZXQ9YyxLKGEucHJvdG90eXBlLGIsWil9ZnVuY3Rpb24gRShhLGIpe0QoYSxiLGZ1bmN0aW9uKCl7cmV0dXJuIHkodGhpcy5pbXBsW2JdKX0pfWZ1bmN0aW9uIEYoYSxiKXthLmZvckVhY2goZnVuY3Rpb24oYSl7Yi5mb3JFYWNoKGZ1bmN0aW9uKGIpe2EucHJvdG90eXBlW2JdPWZ1bmN0aW9uKCl7dmFyIGE9Qih0aGlzKTtyZXR1cm4gYVtiXS5hcHBseShhLGFyZ3VtZW50cyl9fSl9KX12YXIgRz1uZXcgV2Vha01hcCxIPW5ldyBXZWFrTWFwLEk9T2JqZWN0LmNyZWF0ZShudWxsKSxKPWIoKSxLPU9iamVjdC5kZWZpbmVQcm9wZXJ0eSxMPU9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzLE09T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcixOPXt2YWx1ZTp2b2lkIDAsY29uZmlndXJhYmxlOiEwLGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITB9O0wod2luZG93KTt2YXIgTz0vRmlyZWZveC8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSxQPXtnZXQ6ZnVuY3Rpb24oKXt9LHNldDpmdW5jdGlvbigpe30sY29uZmlndXJhYmxlOiEwLGVudW1lcmFibGU6ITB9LFE9d2luZG93LkRPTUltcGxlbWVudGF0aW9uLFI9d2luZG93LkV2ZW50VGFyZ2V0LFM9d2luZG93LkV2ZW50LFQ9d2luZG93Lk5vZGUsVT13aW5kb3cuV2luZG93LFY9d2luZG93LlJhbmdlLFc9d2luZG93LkNhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCxYPXdpbmRvdy5XZWJHTFJlbmRlcmluZ0NvbnRleHQsWT13aW5kb3cuU1ZHRWxlbWVudEluc3RhbmNlLFo9e2dldDp2b2lkIDAsY29uZmlndXJhYmxlOiEwLGVudW1lcmFibGU6ITB9O2EuYXNzZXJ0PWMsYS5jb25zdHJ1Y3RvclRhYmxlPUcsYS5kZWZpbmVHZXR0ZXI9RCxhLmRlZmluZVdyYXBHZXR0ZXI9RSxhLmZvcndhcmRNZXRob2RzVG9XcmFwcGVyPUYsYS5pc1dyYXBwZXI9dyxhLmlzV3JhcHBlckZvcj10LGEubWl4aW49ZCxhLm5hdGl2ZVByb3RvdHlwZVRhYmxlPUgsYS5vbmVPZj1mLGEucmVnaXN0ZXJPYmplY3Q9dSxhLnJlZ2lzdGVyV3JhcHBlcj1yLGEucmV3cmFwPUMsYS51bndyYXA9eixhLnVud3JhcElmTmVlZGVkPUEsYS53cmFwPXksYS53cmFwSWZOZWVkZWQ9QixhLndyYXBwZXJzPUl9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoKXtnPSExO3ZhciBhPWYuc2xpY2UoMCk7Zj1bXTtmb3IodmFyIGI9MDtiPGEubGVuZ3RoO2IrKylhW2JdKCl9ZnVuY3Rpb24gYyhhKXtmLnB1c2goYSksZ3x8KGc9ITAsZChiLDApKX12YXIgZCxlPXdpbmRvdy5NdXRhdGlvbk9ic2VydmVyLGY9W10sZz0hMTtpZihlKXt2YXIgaD0xLGk9bmV3IGUoYiksaj1kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShoKTtpLm9ic2VydmUoaix7Y2hhcmFjdGVyRGF0YTohMH0pLGQ9ZnVuY3Rpb24oKXtoPShoKzEpJTIsai5kYXRhPWh9fWVsc2UgZD13aW5kb3cuc2V0SW1tZWRpYXRlfHx3aW5kb3cuc2V0VGltZW91dDthLnNldEVuZE9mTWljcm90YXNrPWN9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoKXtwfHwoayhjKSxwPSEwKX1mdW5jdGlvbiBjKCl7cD0hMTtkbyBmb3IodmFyIGE9by5zbGljZSgpLGI9ITEsYz0wO2M8YS5sZW5ndGg7YysrKXt2YXIgZD1hW2NdLGU9ZC50YWtlUmVjb3JkcygpO2YoZCksZS5sZW5ndGgmJihkLmNhbGxiYWNrXyhlLGQpLGI9ITApfXdoaWxlKGIpfWZ1bmN0aW9uIGQoYSxiKXt0aGlzLnR5cGU9YSx0aGlzLnRhcmdldD1iLHRoaXMuYWRkZWROb2Rlcz1uZXcgbS5Ob2RlTGlzdCx0aGlzLnJlbW92ZWROb2Rlcz1uZXcgbS5Ob2RlTGlzdCx0aGlzLnByZXZpb3VzU2libGluZz1udWxsLHRoaXMubmV4dFNpYmxpbmc9bnVsbCx0aGlzLmF0dHJpYnV0ZU5hbWU9bnVsbCx0aGlzLmF0dHJpYnV0ZU5hbWVzcGFjZT1udWxsLHRoaXMub2xkVmFsdWU9bnVsbH1mdW5jdGlvbiBlKGEsYil7Zm9yKDthO2E9YS5wYXJlbnROb2RlKXt2YXIgYz1uLmdldChhKTtpZihjKWZvcih2YXIgZD0wO2Q8Yy5sZW5ndGg7ZCsrKXt2YXIgZT1jW2RdO2Uub3B0aW9ucy5zdWJ0cmVlJiZlLmFkZFRyYW5zaWVudE9ic2VydmVyKGIpfX19ZnVuY3Rpb24gZihhKXtmb3IodmFyIGI9MDtiPGEubm9kZXNfLmxlbmd0aDtiKyspe3ZhciBjPWEubm9kZXNfW2JdLGQ9bi5nZXQoYyk7aWYoIWQpcmV0dXJuO2Zvcih2YXIgZT0wO2U8ZC5sZW5ndGg7ZSsrKXt2YXIgZj1kW2VdO2Yub2JzZXJ2ZXI9PT1hJiZmLnJlbW92ZVRyYW5zaWVudE9ic2VydmVycygpfX19ZnVuY3Rpb24gZyhhLGMsZSl7Zm9yKHZhciBmPU9iamVjdC5jcmVhdGUobnVsbCksZz1PYmplY3QuY3JlYXRlKG51bGwpLGg9YTtoO2g9aC5wYXJlbnROb2RlKXt2YXIgaT1uLmdldChoKTtpZihpKWZvcih2YXIgaj0wO2o8aS5sZW5ndGg7aisrKXt2YXIgaz1pW2pdLGw9ay5vcHRpb25zO2lmKChoPT09YXx8bC5zdWJ0cmVlKSYmISgiYXR0cmlidXRlcyI9PT1jJiYhbC5hdHRyaWJ1dGVzfHwiYXR0cmlidXRlcyI9PT1jJiZsLmF0dHJpYnV0ZUZpbHRlciYmKG51bGwhPT1lLm5hbWVzcGFjZXx8LTE9PT1sLmF0dHJpYnV0ZUZpbHRlci5pbmRleE9mKGUubmFtZSkpfHwiY2hhcmFjdGVyRGF0YSI9PT1jJiYhbC5jaGFyYWN0ZXJEYXRhfHwiY2hpbGRMaXN0Ij09PWMmJiFsLmNoaWxkTGlzdCkpe3ZhciBtPWsub2JzZXJ2ZXI7ZlttLnVpZF9dPW0sKCJhdHRyaWJ1dGVzIj09PWMmJmwuYXR0cmlidXRlT2xkVmFsdWV8fCJjaGFyYWN0ZXJEYXRhIj09PWMmJmwuY2hhcmFjdGVyRGF0YU9sZFZhbHVlKSYmKGdbbS51aWRfXT1lLm9sZFZhbHVlKX19fXZhciBvPSExO2Zvcih2YXIgcCBpbiBmKXt2YXIgbT1mW3BdLHE9bmV3IGQoYyxhKTsibmFtZSJpbiBlJiYibmFtZXNwYWNlImluIGUmJihxLmF0dHJpYnV0ZU5hbWU9ZS5uYW1lLHEuYXR0cmlidXRlTmFtZXNwYWNlPWUubmFtZXNwYWNlKSxlLmFkZGVkTm9kZXMmJihxLmFkZGVkTm9kZXM9ZS5hZGRlZE5vZGVzKSxlLnJlbW92ZWROb2RlcyYmKHEucmVtb3ZlZE5vZGVzPWUucmVtb3ZlZE5vZGVzKSxlLnByZXZpb3VzU2libGluZyYmKHEucHJldmlvdXNTaWJsaW5nPWUucHJldmlvdXNTaWJsaW5nKSxlLm5leHRTaWJsaW5nJiYocS5uZXh0U2libGluZz1lLm5leHRTaWJsaW5nKSx2b2lkIDAhPT1nW3BdJiYocS5vbGRWYWx1ZT1nW3BdKSxtLnJlY29yZHNfLnB1c2gocSksbz0hMH1vJiZiKCl9ZnVuY3Rpb24gaChhKXtpZih0aGlzLmNoaWxkTGlzdD0hIWEuY2hpbGRMaXN0LHRoaXMuc3VidHJlZT0hIWEuc3VidHJlZSx0aGlzLmF0dHJpYnV0ZXM9ImF0dHJpYnV0ZXMiaW4gYXx8ISgiYXR0cmlidXRlT2xkVmFsdWUiaW4gYXx8ImF0dHJpYnV0ZUZpbHRlciJpbiBhKT8hIWEuYXR0cmlidXRlczohMCx0aGlzLmNoYXJhY3RlckRhdGE9ImNoYXJhY3RlckRhdGFPbGRWYWx1ZSJpbiBhJiYhKCJjaGFyYWN0ZXJEYXRhImluIGEpPyEwOiEhYS5jaGFyYWN0ZXJEYXRhLCF0aGlzLmF0dHJpYnV0ZXMmJihhLmF0dHJpYnV0ZU9sZFZhbHVlfHwiYXR0cmlidXRlRmlsdGVyImluIGEpfHwhdGhpcy5jaGFyYWN0ZXJEYXRhJiZhLmNoYXJhY3RlckRhdGFPbGRWYWx1ZSl0aHJvdyBuZXcgVHlwZUVycm9yO2lmKHRoaXMuY2hhcmFjdGVyRGF0YT0hIWEuY2hhcmFjdGVyRGF0YSx0aGlzLmF0dHJpYnV0ZU9sZFZhbHVlPSEhYS5hdHRyaWJ1dGVPbGRWYWx1ZSx0aGlzLmNoYXJhY3RlckRhdGFPbGRWYWx1ZT0hIWEuY2hhcmFjdGVyRGF0YU9sZFZhbHVlLCJhdHRyaWJ1dGVGaWx0ZXIiaW4gYSl7aWYobnVsbD09YS5hdHRyaWJ1dGVGaWx0ZXJ8fCJvYmplY3QiIT10eXBlb2YgYS5hdHRyaWJ1dGVGaWx0ZXIpdGhyb3cgbmV3IFR5cGVFcnJvcjt0aGlzLmF0dHJpYnV0ZUZpbHRlcj1xLmNhbGwoYS5hdHRyaWJ1dGVGaWx0ZXIpfWVsc2UgdGhpcy5hdHRyaWJ1dGVGaWx0ZXI9bnVsbH1mdW5jdGlvbiBpKGEpe3RoaXMuY2FsbGJhY2tfPWEsdGhpcy5ub2Rlc189W10sdGhpcy5yZWNvcmRzXz1bXSx0aGlzLnVpZF89KytyLG8ucHVzaCh0aGlzKX1mdW5jdGlvbiBqKGEsYixjKXt0aGlzLm9ic2VydmVyPWEsdGhpcy50YXJnZXQ9Yix0aGlzLm9wdGlvbnM9Yyx0aGlzLnRyYW5zaWVudE9ic2VydmVkTm9kZXM9W119dmFyIGs9YS5zZXRFbmRPZk1pY3JvdGFzayxsPWEud3JhcElmTmVlZGVkLG09YS53cmFwcGVycyxuPW5ldyBXZWFrTWFwLG89W10scD0hMSxxPUFycmF5LnByb3RvdHlwZS5zbGljZSxyPTA7aS5wcm90b3R5cGU9e29ic2VydmU6ZnVuY3Rpb24oYSxiKXthPWwoYSk7dmFyIGMsZD1uZXcgaChiKSxlPW4uZ2V0KGEpO2V8fG4uc2V0KGEsZT1bXSk7Zm9yKHZhciBmPTA7ZjxlLmxlbmd0aDtmKyspZVtmXS5vYnNlcnZlcj09PXRoaXMmJihjPWVbZl0sYy5yZW1vdmVUcmFuc2llbnRPYnNlcnZlcnMoKSxjLm9wdGlvbnM9ZCk7Y3x8KGM9bmV3IGoodGhpcyxhLGQpLGUucHVzaChjKSx0aGlzLm5vZGVzXy5wdXNoKGEpKX0sZGlzY29ubmVjdDpmdW5jdGlvbigpe3RoaXMubm9kZXNfLmZvckVhY2goZnVuY3Rpb24oYSl7Zm9yKHZhciBiPW4uZ2V0KGEpLGM9MDtjPGIubGVuZ3RoO2MrKyl7dmFyIGQ9YltjXTtpZihkLm9ic2VydmVyPT09dGhpcyl7Yi5zcGxpY2UoYywxKTticmVha319fSx0aGlzKSx0aGlzLnJlY29yZHNfPVtdfSx0YWtlUmVjb3JkczpmdW5jdGlvbigpe3ZhciBhPXRoaXMucmVjb3Jkc187cmV0dXJuIHRoaXMucmVjb3Jkc189W10sYX19LGoucHJvdG90eXBlPXthZGRUcmFuc2llbnRPYnNlcnZlcjpmdW5jdGlvbihhKXtpZihhIT09dGhpcy50YXJnZXQpe3RoaXMudHJhbnNpZW50T2JzZXJ2ZWROb2Rlcy5wdXNoKGEpO3ZhciBiPW4uZ2V0KGEpO2J8fG4uc2V0KGEsYj1bXSksYi5wdXNoKHRoaXMpfX0scmVtb3ZlVHJhbnNpZW50T2JzZXJ2ZXJzOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy50cmFuc2llbnRPYnNlcnZlZE5vZGVzO3RoaXMudHJhbnNpZW50T2JzZXJ2ZWROb2Rlcz1bXTtmb3IodmFyIGI9MDtiPGEubGVuZ3RoO2IrKylmb3IodmFyIGM9YVtiXSxkPW4uZ2V0KGMpLGU9MDtlPGQubGVuZ3RoO2UrKylpZihkW2VdPT09dGhpcyl7ZC5zcGxpY2UoZSwxKTticmVha319fSxhLmVucXVldWVNdXRhdGlvbj1nLGEucmVnaXN0ZXJUcmFuc2llbnRPYnNlcnZlcnM9ZSxhLndyYXBwZXJzLk11dGF0aW9uT2JzZXJ2ZXI9aSxhLndyYXBwZXJzLk11dGF0aW9uUmVjb3JkPWR9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSxiKXt0aGlzLnJvb3Q9YSx0aGlzLnBhcmVudD1ifWZ1bmN0aW9uIGMoYSxiKXtpZihhLnRyZWVTY29wZV8hPT1iKXthLnRyZWVTY29wZV89Yjtmb3IodmFyIGQ9YS5zaGFkb3dSb290O2Q7ZD1kLm9sZGVyU2hhZG93Um9vdClkLnRyZWVTY29wZV8ucGFyZW50PWI7Zm9yKHZhciBlPWEuZmlyc3RDaGlsZDtlO2U9ZS5uZXh0U2libGluZyljKGUsYil9fWZ1bmN0aW9uIGQoYyl7aWYoYyBpbnN0YW5jZW9mIGEud3JhcHBlcnMuV2luZG93LGMudHJlZVNjb3BlXylyZXR1cm4gYy50cmVlU2NvcGVfO3ZhciBlLGY9Yy5wYXJlbnROb2RlO3JldHVybiBlPWY/ZChmKTpuZXcgYihjLG51bGwpLGMudHJlZVNjb3BlXz1lfWIucHJvdG90eXBlPXtnZXQgcmVuZGVyZXIoKXtyZXR1cm4gdGhpcy5yb290IGluc3RhbmNlb2YgYS53cmFwcGVycy5TaGFkb3dSb290P2EuZ2V0UmVuZGVyZXJGb3JIb3N0KHRoaXMucm9vdC5ob3N0KTpudWxsfSxjb250YWluczpmdW5jdGlvbihhKXtmb3IoO2E7YT1hLnBhcmVudClpZihhPT09dGhpcylyZXR1cm4hMDtyZXR1cm4hMX19LGEuVHJlZVNjb3BlPWIsYS5nZXRUcmVlU2NvcGU9ZCxhLnNldFRyZWVTY29wZT1jfSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe3JldHVybiBhIGluc3RhbmNlb2YgUS5TaGFkb3dSb290fWZ1bmN0aW9uIGMoYSl7cmV0dXJuIEwoYSkucm9vdH1mdW5jdGlvbiBkKGEsZCl7dmFyIGg9W10saT1hO2ZvcihoLnB1c2goaSk7aTspe3ZhciBqPWcoaSk7aWYoaiYmai5sZW5ndGg+MCl7Zm9yKHZhciBrPTA7azxqLmxlbmd0aDtrKyspe3ZhciBtPWpba107aWYoZihtKSl7dmFyIG49YyhtKSxvPW4ub2xkZXJTaGFkb3dSb290O28mJmgucHVzaChvKX1oLnB1c2gobSl9aT1qW2oubGVuZ3RoLTFdfWVsc2UgaWYoYihpKSl7aWYobChhLGkpJiZlKGQpKWJyZWFrO2k9aS5ob3N0LGgucHVzaChpKX1lbHNlIGk9aS5wYXJlbnROb2RlLGkmJmgucHVzaChpKX1yZXR1cm4gaH1mdW5jdGlvbiBlKGEpe2lmKCFhKXJldHVybiExO3N3aXRjaChhLnR5cGUpe2Nhc2UiYWJvcnQiOmNhc2UiZXJyb3IiOmNhc2Uic2VsZWN0IjpjYXNlImNoYW5nZSI6Y2FzZSJsb2FkIjpjYXNlInJlc2V0IjpjYXNlInJlc2l6ZSI6Y2FzZSJzY3JvbGwiOmNhc2Uic2VsZWN0c3RhcnQiOnJldHVybiEwfXJldHVybiExfWZ1bmN0aW9uIGYoYSl7cmV0dXJuIGEgaW5zdGFuY2VvZiBIVE1MU2hhZG93RWxlbWVudH1mdW5jdGlvbiBnKGIpe3JldHVybiBhLmdldERlc3RpbmF0aW9uSW5zZXJ0aW9uUG9pbnRzKGIpfWZ1bmN0aW9uIGgoYSxiKXtpZigwPT09YS5sZW5ndGgpcmV0dXJuIGI7YiBpbnN0YW5jZW9mIFEuV2luZG93JiYoYj1iLmRvY3VtZW50KTtmb3IodmFyIGM9TChiKSxkPWFbMF0sZT1MKGQpLGY9aihjLGUpLGc9MDtnPGEubGVuZ3RoO2crKyl7dmFyIGg9YVtnXTtpZihMKGgpPT09ZilyZXR1cm4gaH1yZXR1cm4gYVthLmxlbmd0aC0xXX1mdW5jdGlvbiBpKGEpe2Zvcih2YXIgYj1bXTthO2E9YS5wYXJlbnQpYi5wdXNoKGEpO3JldHVybiBifWZ1bmN0aW9uIGooYSxiKXtmb3IodmFyIGM9aShhKSxkPWkoYiksZT1udWxsO2MubGVuZ3RoPjAmJmQubGVuZ3RoPjA7KXt2YXIgZj1jLnBvcCgpLGc9ZC5wb3AoKTtpZihmIT09ZylicmVhaztlPWZ9cmV0dXJuIGV9ZnVuY3Rpb24gayhhLGIsYyl7YiBpbnN0YW5jZW9mIFEuV2luZG93JiYoYj1iLmRvY3VtZW50KTt2YXIgZSxmPUwoYiksZz1MKGMpLGg9ZChjLGEpLGU9aihmLGcpO2V8fChlPWcucm9vdCk7Zm9yKHZhciBpPWU7aTtpPWkucGFyZW50KWZvcih2YXIgaz0wO2s8aC5sZW5ndGg7aysrKXt2YXIgbD1oW2tdO2lmKEwobCk9PT1pKXJldHVybiBsfXJldHVybiBudWxsfWZ1bmN0aW9uIGwoYSxiKXtyZXR1cm4gTChhKT09PUwoYil9ZnVuY3Rpb24gbShhKXtpZighUy5nZXQoYSkmJihTLnNldChhLCEwKSxuKFAoYSksUChhLnRhcmdldCkpLEopKXt2YXIgYj1KO3Rocm93IEo9bnVsbCxifX1mdW5jdGlvbiBuKGIsYyl7aWYoVC5nZXQoYikpdGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkU3RhdGVFcnJvciIpO1Quc2V0KGIsITApLGEucmVuZGVyQWxsUGVuZGluZygpO3ZhciBlLGYsZyxoPWIudHlwZTtpZigibG9hZCI9PT1oJiYhYi5idWJibGVzKXt2YXIgaT1jO2kgaW5zdGFuY2VvZiBRLkRvY3VtZW50JiYoZz1pLmRlZmF1bHRWaWV3KSYmKGY9aSxlPVtdKX1pZighZSlpZihjIGluc3RhbmNlb2YgUS5XaW5kb3cpZz1jLGU9W107ZWxzZSBpZihlPWQoYyxiKSwibG9hZCIhPT1iLnR5cGUpe3ZhciBpPWVbZS5sZW5ndGgtMV07aSBpbnN0YW5jZW9mIFEuRG9jdW1lbnQmJihnPWkuZGVmYXVsdFZpZXcpfXJldHVybiBfLnNldChiLGUpLG8oYixlLGcsZikmJnAoYixlLGcsZikmJnEoYixlLGcsZiksWC5zZXQoYixhYiksVi5kZWxldGUoYixudWxsKSxULmRlbGV0ZShiKSxiLmRlZmF1bHRQcmV2ZW50ZWQKfWZ1bmN0aW9uIG8oYSxiLGMsZCl7dmFyIGU9YmI7aWYoYyYmIXIoYyxhLGUsYixkKSlyZXR1cm4hMTtmb3IodmFyIGY9Yi5sZW5ndGgtMTtmPjA7Zi0tKWlmKCFyKGJbZl0sYSxlLGIsZCkpcmV0dXJuITE7cmV0dXJuITB9ZnVuY3Rpb24gcChhLGIsYyxkKXt2YXIgZT1jYixmPWJbMF18fGM7cmV0dXJuIHIoZixhLGUsYixkKX1mdW5jdGlvbiBxKGEsYixjLGQpe2Zvcih2YXIgZT1kYixmPTE7ZjxiLmxlbmd0aDtmKyspaWYoIXIoYltmXSxhLGUsYixkKSlyZXR1cm47YyYmYi5sZW5ndGg+MCYmcihjLGEsZSxiLGQpfWZ1bmN0aW9uIHIoYSxiLGMsZCxlKXt2YXIgZj1SLmdldChhKTtpZighZilyZXR1cm4hMDt2YXIgZz1lfHxoKGQsYSk7aWYoZz09PWEpe2lmKGM9PT1iYilyZXR1cm4hMDtjPT09ZGImJihjPWNiKX1lbHNlIGlmKGM9PT1kYiYmIWIuYnViYmxlcylyZXR1cm4hMDtpZigicmVsYXRlZFRhcmdldCJpbiBiKXt2YXIgaT1PKGIpLGo9aS5yZWxhdGVkVGFyZ2V0O2lmKGope2lmKGogaW5zdGFuY2VvZiBPYmplY3QmJmouYWRkRXZlbnRMaXN0ZW5lcil7dmFyIGw9UChqKSxtPWsoYixhLGwpO2lmKG09PT1nKXJldHVybiEwfWVsc2UgbT1udWxsO1cuc2V0KGIsbSl9fVguc2V0KGIsYyk7dmFyIG49Yi50eXBlLG89ITE7VS5zZXQoYixnKSxWLnNldChiLGEpLGYuZGVwdGgrKztmb3IodmFyIHA9MCxxPWYubGVuZ3RoO3E+cDtwKyspe3ZhciByPWZbcF07aWYoci5yZW1vdmVkKW89ITA7ZWxzZSBpZighKHIudHlwZSE9PW58fCFyLmNhcHR1cmUmJmM9PT1iYnx8ci5jYXB0dXJlJiZjPT09ZGIpKXRyeXtpZigiZnVuY3Rpb24iPT10eXBlb2Ygci5oYW5kbGVyP3IuaGFuZGxlci5jYWxsKGEsYik6ci5oYW5kbGVyLmhhbmRsZUV2ZW50KGIpLFouZ2V0KGIpKXJldHVybiExfWNhdGNoKHMpe0p8fChKPXMpfX1pZihmLmRlcHRoLS0sbyYmMD09PWYuZGVwdGgpe3ZhciB0PWYuc2xpY2UoKTtmLmxlbmd0aD0wO2Zvcih2YXIgcD0wO3A8dC5sZW5ndGg7cCsrKXRbcF0ucmVtb3ZlZHx8Zi5wdXNoKHRbcF0pfXJldHVybiFZLmdldChiKX1mdW5jdGlvbiBzKGEsYixjKXt0aGlzLnR5cGU9YSx0aGlzLmhhbmRsZXI9Yix0aGlzLmNhcHR1cmU9Qm9vbGVhbihjKX1mdW5jdGlvbiB0KGEsYil7aWYoIShhIGluc3RhbmNlb2YgZWIpKXJldHVybiBQKHgoZWIsIkV2ZW50IixhLGIpKTt2YXIgYz1hO3JldHVybiBwYnx8ImJlZm9yZXVubG9hZCIhPT1jLnR5cGU/dm9pZCh0aGlzLmltcGw9Yyk6bmV3IHkoYyl9ZnVuY3Rpb24gdShhKXtyZXR1cm4gYSYmYS5yZWxhdGVkVGFyZ2V0P09iamVjdC5jcmVhdGUoYSx7cmVsYXRlZFRhcmdldDp7dmFsdWU6TyhhLnJlbGF0ZWRUYXJnZXQpfX0pOmF9ZnVuY3Rpb24gdihhLGIsYyl7dmFyIGQ9d2luZG93W2FdLGU9ZnVuY3Rpb24oYixjKXtyZXR1cm4gYiBpbnN0YW5jZW9mIGQ/dm9pZCh0aGlzLmltcGw9Yik6UCh4KGQsYSxiLGMpKX07aWYoZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShiLnByb3RvdHlwZSksYyYmTShlLnByb3RvdHlwZSxjKSxkKXRyeXtOKGQsZSxuZXcgZCgidGVtcCIpKX1jYXRjaChmKXtOKGQsZSxkb2N1bWVudC5jcmVhdGVFdmVudChhKSl9cmV0dXJuIGV9ZnVuY3Rpb24gdyhhLGIpe3JldHVybiBmdW5jdGlvbigpe2FyZ3VtZW50c1tiXT1PKGFyZ3VtZW50c1tiXSk7dmFyIGM9Tyh0aGlzKTtjW2FdLmFwcGx5KGMsYXJndW1lbnRzKX19ZnVuY3Rpb24geChhLGIsYyxkKXtpZihuYilyZXR1cm4gbmV3IGEoYyx1KGQpKTt2YXIgZT1PKGRvY3VtZW50LmNyZWF0ZUV2ZW50KGIpKSxmPW1iW2JdLGc9W2NdO3JldHVybiBPYmplY3Qua2V5cyhmKS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3ZhciBiPW51bGwhPWQmJmEgaW4gZD9kW2FdOmZbYV07InJlbGF0ZWRUYXJnZXQiPT09YSYmKGI9TyhiKSksZy5wdXNoKGIpfSksZVsiaW5pdCIrYl0uYXBwbHkoZSxnKSxlfWZ1bmN0aW9uIHkoYSl7dC5jYWxsKHRoaXMsYSl9ZnVuY3Rpb24geihhKXtyZXR1cm4iZnVuY3Rpb24iPT10eXBlb2YgYT8hMDphJiZhLmhhbmRsZUV2ZW50fWZ1bmN0aW9uIEEoYSl7c3dpdGNoKGEpe2Nhc2UiRE9NQXR0ck1vZGlmaWVkIjpjYXNlIkRPTUF0dHJpYnV0ZU5hbWVDaGFuZ2VkIjpjYXNlIkRPTUNoYXJhY3RlckRhdGFNb2RpZmllZCI6Y2FzZSJET01FbGVtZW50TmFtZUNoYW5nZWQiOmNhc2UiRE9NTm9kZUluc2VydGVkIjpjYXNlIkRPTU5vZGVJbnNlcnRlZEludG9Eb2N1bWVudCI6Y2FzZSJET01Ob2RlUmVtb3ZlZCI6Y2FzZSJET01Ob2RlUmVtb3ZlZEZyb21Eb2N1bWVudCI6Y2FzZSJET01TdWJ0cmVlTW9kaWZpZWQiOnJldHVybiEwfXJldHVybiExfWZ1bmN0aW9uIEIoYSl7dGhpcy5pbXBsPWF9ZnVuY3Rpb24gQyhhKXtyZXR1cm4gYSBpbnN0YW5jZW9mIFEuU2hhZG93Um9vdCYmKGE9YS5ob3N0KSxPKGEpfWZ1bmN0aW9uIEQoYSxiKXt2YXIgYz1SLmdldChhKTtpZihjKWZvcih2YXIgZD0wO2Q8Yy5sZW5ndGg7ZCsrKWlmKCFjW2RdLnJlbW92ZWQmJmNbZF0udHlwZT09PWIpcmV0dXJuITA7cmV0dXJuITF9ZnVuY3Rpb24gRShhLGIpe2Zvcih2YXIgYz1PKGEpO2M7Yz1jLnBhcmVudE5vZGUpaWYoRChQKGMpLGIpKXJldHVybiEwO3JldHVybiExfWZ1bmN0aW9uIEYoYSl7SyhhLHJiKX1mdW5jdGlvbiBHKGIsYyxlLGYpe2EucmVuZGVyQWxsUGVuZGluZygpO3ZhciBnPVAoc2IuY2FsbChjLmltcGwsZSxmKSk7aWYoIWcpcmV0dXJuIG51bGw7dmFyIGk9ZChnLG51bGwpLGo9aS5sYXN0SW5kZXhPZihiKTtyZXR1cm4tMT09aj9udWxsOihpPWkuc2xpY2UoMCxqKSxoKGksYikpfWZ1bmN0aW9uIEgoYSl7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGI9JC5nZXQodGhpcyk7cmV0dXJuIGImJmJbYV0mJmJbYV0udmFsdWV8fG51bGx9fWZ1bmN0aW9uIEkoYSl7dmFyIGI9YS5zbGljZSgyKTtyZXR1cm4gZnVuY3Rpb24oYyl7dmFyIGQ9JC5nZXQodGhpcyk7ZHx8KGQ9T2JqZWN0LmNyZWF0ZShudWxsKSwkLnNldCh0aGlzLGQpKTt2YXIgZT1kW2FdO2lmKGUmJnRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihiLGUud3JhcHBlZCwhMSksImZ1bmN0aW9uIj09dHlwZW9mIGMpe3ZhciBmPWZ1bmN0aW9uKGIpe3ZhciBkPWMuY2FsbCh0aGlzLGIpO2Q9PT0hMT9iLnByZXZlbnREZWZhdWx0KCk6Im9uYmVmb3JldW5sb2FkIj09PWEmJiJzdHJpbmciPT10eXBlb2YgZCYmKGIucmV0dXJuVmFsdWU9ZCl9O3RoaXMuYWRkRXZlbnRMaXN0ZW5lcihiLGYsITEpLGRbYV09e3ZhbHVlOmMsd3JhcHBlZDpmfX19fXZhciBKLEs9YS5mb3J3YXJkTWV0aG9kc1RvV3JhcHBlcixMPWEuZ2V0VHJlZVNjb3BlLE09YS5taXhpbixOPWEucmVnaXN0ZXJXcmFwcGVyLE89YS51bndyYXAsUD1hLndyYXAsUT1hLndyYXBwZXJzLFI9KG5ldyBXZWFrTWFwLG5ldyBXZWFrTWFwKSxTPW5ldyBXZWFrTWFwLFQ9bmV3IFdlYWtNYXAsVT1uZXcgV2Vha01hcCxWPW5ldyBXZWFrTWFwLFc9bmV3IFdlYWtNYXAsWD1uZXcgV2Vha01hcCxZPW5ldyBXZWFrTWFwLFo9bmV3IFdlYWtNYXAsJD1uZXcgV2Vha01hcCxfPW5ldyBXZWFrTWFwLGFiPTAsYmI9MSxjYj0yLGRiPTM7cy5wcm90b3R5cGU9e2VxdWFsczpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5oYW5kbGVyPT09YS5oYW5kbGVyJiZ0aGlzLnR5cGU9PT1hLnR5cGUmJnRoaXMuY2FwdHVyZT09PWEuY2FwdHVyZX0sZ2V0IHJlbW92ZWQoKXtyZXR1cm4gbnVsbD09PXRoaXMuaGFuZGxlcn0scmVtb3ZlOmZ1bmN0aW9uKCl7dGhpcy5oYW5kbGVyPW51bGx9fTt2YXIgZWI9d2luZG93LkV2ZW50O2ViLnByb3RvdHlwZS5wb2x5bWVyQmxhY2tMaXN0Xz17cmV0dXJuVmFsdWU6ITAsa2V5TG9jYXRpb246ITB9LHQucHJvdG90eXBlPXtnZXQgdGFyZ2V0KCl7cmV0dXJuIFUuZ2V0KHRoaXMpfSxnZXQgY3VycmVudFRhcmdldCgpe3JldHVybiBWLmdldCh0aGlzKX0sZ2V0IGV2ZW50UGhhc2UoKXtyZXR1cm4gWC5nZXQodGhpcyl9LGdldCBwYXRoKCl7dmFyIGE9Xy5nZXQodGhpcyk7cmV0dXJuIGE/YS5zbGljZSgpOltdfSxzdG9wUHJvcGFnYXRpb246ZnVuY3Rpb24oKXtZLnNldCh0aGlzLCEwKX0sc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uOmZ1bmN0aW9uKCl7WS5zZXQodGhpcywhMCksWi5zZXQodGhpcywhMCl9fSxOKGViLHQsZG9jdW1lbnQuY3JlYXRlRXZlbnQoIkV2ZW50IikpO3ZhciBmYj12KCJVSUV2ZW50Iix0KSxnYj12KCJDdXN0b21FdmVudCIsdCksaGI9e2dldCByZWxhdGVkVGFyZ2V0KCl7dmFyIGE9Vy5nZXQodGhpcyk7cmV0dXJuIHZvaWQgMCE9PWE/YTpQKE8odGhpcykucmVsYXRlZFRhcmdldCl9fSxpYj1NKHtpbml0TW91c2VFdmVudDp3KCJpbml0TW91c2VFdmVudCIsMTQpfSxoYiksamI9TSh7aW5pdEZvY3VzRXZlbnQ6dygiaW5pdEZvY3VzRXZlbnQiLDUpfSxoYiksa2I9digiTW91c2VFdmVudCIsZmIsaWIpLGxiPXYoIkZvY3VzRXZlbnQiLGZiLGpiKSxtYj1PYmplY3QuY3JlYXRlKG51bGwpLG5iPWZ1bmN0aW9uKCl7dHJ5e25ldyB3aW5kb3cuRm9jdXNFdmVudCgiZm9jdXMiKX1jYXRjaChhKXtyZXR1cm4hMX1yZXR1cm4hMH0oKTtpZighbmIpe3ZhciBvYj1mdW5jdGlvbihhLGIsYyl7aWYoYyl7dmFyIGQ9bWJbY107Yj1NKE0oe30sZCksYil9bWJbYV09Yn07b2IoIkV2ZW50Iix7YnViYmxlczohMSxjYW5jZWxhYmxlOiExfSksb2IoIkN1c3RvbUV2ZW50Iix7ZGV0YWlsOm51bGx9LCJFdmVudCIpLG9iKCJVSUV2ZW50Iix7dmlldzpudWxsLGRldGFpbDowfSwiRXZlbnQiKSxvYigiTW91c2VFdmVudCIse3NjcmVlblg6MCxzY3JlZW5ZOjAsY2xpZW50WDowLGNsaWVudFk6MCxjdHJsS2V5OiExLGFsdEtleTohMSxzaGlmdEtleTohMSxtZXRhS2V5OiExLGJ1dHRvbjowLHJlbGF0ZWRUYXJnZXQ6bnVsbH0sIlVJRXZlbnQiKSxvYigiRm9jdXNFdmVudCIse3JlbGF0ZWRUYXJnZXQ6bnVsbH0sIlVJRXZlbnQiKX12YXIgcGI9d2luZG93LkJlZm9yZVVubG9hZEV2ZW50O3kucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodC5wcm90b3R5cGUpLE0oeS5wcm90b3R5cGUse2dldCByZXR1cm5WYWx1ZSgpe3JldHVybiB0aGlzLmltcGwucmV0dXJuVmFsdWV9LHNldCByZXR1cm5WYWx1ZShhKXt0aGlzLmltcGwucmV0dXJuVmFsdWU9YX19KSxwYiYmTihwYix5KTt2YXIgcWI9d2luZG93LkV2ZW50VGFyZ2V0LHJiPVsiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJkaXNwYXRjaEV2ZW50Il07W05vZGUsV2luZG93XS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3ZhciBiPWEucHJvdG90eXBlO3JiLmZvckVhY2goZnVuY3Rpb24oYSl7T2JqZWN0LmRlZmluZVByb3BlcnR5KGIsYSsiXyIse3ZhbHVlOmJbYV19KX0pfSksQi5wcm90b3R5cGU9e2FkZEV2ZW50TGlzdGVuZXI6ZnVuY3Rpb24oYSxiLGMpe2lmKHooYikmJiFBKGEpKXt2YXIgZD1uZXcgcyhhLGIsYyksZT1SLmdldCh0aGlzKTtpZihlKXtmb3IodmFyIGY9MDtmPGUubGVuZ3RoO2YrKylpZihkLmVxdWFscyhlW2ZdKSlyZXR1cm59ZWxzZSBlPVtdLGUuZGVwdGg9MCxSLnNldCh0aGlzLGUpO2UucHVzaChkKTt2YXIgZz1DKHRoaXMpO2cuYWRkRXZlbnRMaXN0ZW5lcl8oYSxtLCEwKX19LHJlbW92ZUV2ZW50TGlzdGVuZXI6ZnVuY3Rpb24oYSxiLGMpe2M9Qm9vbGVhbihjKTt2YXIgZD1SLmdldCh0aGlzKTtpZihkKXtmb3IodmFyIGU9MCxmPSExLGc9MDtnPGQubGVuZ3RoO2crKylkW2ddLnR5cGU9PT1hJiZkW2ddLmNhcHR1cmU9PT1jJiYoZSsrLGRbZ10uaGFuZGxlcj09PWImJihmPSEwLGRbZ10ucmVtb3ZlKCkpKTtpZihmJiYxPT09ZSl7dmFyIGg9Qyh0aGlzKTtoLnJlbW92ZUV2ZW50TGlzdGVuZXJfKGEsbSwhMCl9fX0sZGlzcGF0Y2hFdmVudDpmdW5jdGlvbihiKXt2YXIgYz1PKGIpLGQ9Yy50eXBlO1Muc2V0KGMsITEpLGEucmVuZGVyQWxsUGVuZGluZygpO3ZhciBlO0UodGhpcyxkKXx8KGU9ZnVuY3Rpb24oKXt9LHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihkLGUsITApKTt0cnl7cmV0dXJuIE8odGhpcykuZGlzcGF0Y2hFdmVudF8oYyl9ZmluYWxseXtlJiZ0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoZCxlLCEwKX19fSxxYiYmTihxYixCKTt2YXIgc2I9ZG9jdW1lbnQuZWxlbWVudEZyb21Qb2ludDthLmVsZW1lbnRGcm9tUG9pbnQ9RyxhLmdldEV2ZW50SGFuZGxlckdldHRlcj1ILGEuZ2V0RXZlbnRIYW5kbGVyU2V0dGVyPUksYS53cmFwRXZlbnRUYXJnZXRNZXRob2RzPUYsYS53cmFwcGVycy5CZWZvcmVVbmxvYWRFdmVudD15LGEud3JhcHBlcnMuQ3VzdG9tRXZlbnQ9Z2IsYS53cmFwcGVycy5FdmVudD10LGEud3JhcHBlcnMuRXZlbnRUYXJnZXQ9QixhLndyYXBwZXJzLkZvY3VzRXZlbnQ9bGIsYS53cmFwcGVycy5Nb3VzZUV2ZW50PWtiLGEud3JhcHBlcnMuVUlFdmVudD1mYn0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhLGIpe09iamVjdC5kZWZpbmVQcm9wZXJ0eShhLGIsbyl9ZnVuY3Rpb24gYyhhKXt0aGlzLmltcGw9YX1mdW5jdGlvbiBkKCl7dGhpcy5sZW5ndGg9MCxiKHRoaXMsImxlbmd0aCIpfWZ1bmN0aW9uIGUoYSl7Zm9yKHZhciBiPW5ldyBkLGU9MDtlPGEubGVuZ3RoO2UrKyliW2VdPW5ldyBjKGFbZV0pO3JldHVybiBiLmxlbmd0aD1lLGJ9ZnVuY3Rpb24gZihhKXtnLmNhbGwodGhpcyxhKX12YXIgZz1hLndyYXBwZXJzLlVJRXZlbnQsaD1hLm1peGluLGk9YS5yZWdpc3RlcldyYXBwZXIsaj1hLnVud3JhcCxrPWEud3JhcCxsPXdpbmRvdy5Ub3VjaEV2ZW50O2lmKGwpe3ZhciBtO3RyeXttPWRvY3VtZW50LmNyZWF0ZUV2ZW50KCJUb3VjaEV2ZW50Iil9Y2F0Y2gobil7cmV0dXJufXZhciBvPXtlbnVtZXJhYmxlOiExfTtjLnByb3RvdHlwZT17Z2V0IHRhcmdldCgpe3JldHVybiBrKHRoaXMuaW1wbC50YXJnZXQpfX07dmFyIHA9e2NvbmZpZ3VyYWJsZTohMCxlbnVtZXJhYmxlOiEwLGdldDpudWxsfTtbImNsaWVudFgiLCJjbGllbnRZIiwic2NyZWVuWCIsInNjcmVlblkiLCJwYWdlWCIsInBhZ2VZIiwiaWRlbnRpZmllciIsIndlYmtpdFJhZGl1c1giLCJ3ZWJraXRSYWRpdXNZIiwid2Via2l0Um90YXRpb25BbmdsZSIsIndlYmtpdEZvcmNlIl0uZm9yRWFjaChmdW5jdGlvbihhKXtwLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmltcGxbYV19LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjLnByb3RvdHlwZSxhLHApfSksZC5wcm90b3R5cGU9e2l0ZW06ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXNbYV19fSxmLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGcucHJvdG90eXBlKSxoKGYucHJvdG90eXBlLHtnZXQgdG91Y2hlcygpe3JldHVybiBlKGoodGhpcykudG91Y2hlcyl9LGdldCB0YXJnZXRUb3VjaGVzKCl7cmV0dXJuIGUoaih0aGlzKS50YXJnZXRUb3VjaGVzKX0sZ2V0IGNoYW5nZWRUb3VjaGVzKCl7cmV0dXJuIGUoaih0aGlzKS5jaGFuZ2VkVG91Y2hlcyl9LGluaXRUb3VjaEV2ZW50OmZ1bmN0aW9uKCl7dGhyb3cgbmV3IEVycm9yKCJOb3QgaW1wbGVtZW50ZWQiKX19KSxpKGwsZixtKSxhLndyYXBwZXJzLlRvdWNoPWMsYS53cmFwcGVycy5Ub3VjaEV2ZW50PWYsYS53cmFwcGVycy5Ub3VjaExpc3Q9ZH19KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSxiKXtPYmplY3QuZGVmaW5lUHJvcGVydHkoYSxiLGcpfWZ1bmN0aW9uIGMoKXt0aGlzLmxlbmd0aD0wLGIodGhpcywibGVuZ3RoIil9ZnVuY3Rpb24gZChhKXtpZihudWxsPT1hKXJldHVybiBhO2Zvcih2YXIgYj1uZXcgYyxkPTAsZT1hLmxlbmd0aDtlPmQ7ZCsrKWJbZF09ZihhW2RdKTtyZXR1cm4gYi5sZW5ndGg9ZSxifWZ1bmN0aW9uIGUoYSxiKXthLnByb3RvdHlwZVtiXT1mdW5jdGlvbigpe3JldHVybiBkKHRoaXMuaW1wbFtiXS5hcHBseSh0aGlzLmltcGwsYXJndW1lbnRzKSl9fXZhciBmPWEud3JhcCxnPXtlbnVtZXJhYmxlOiExfTtjLnByb3RvdHlwZT17aXRlbTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpc1thXX19LGIoYy5wcm90b3R5cGUsIml0ZW0iKSxhLndyYXBwZXJzLk5vZGVMaXN0PWMsYS5hZGRXcmFwTm9kZUxpc3RNZXRob2Q9ZSxhLndyYXBOb2RlTGlzdD1kfSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjthLndyYXBIVE1MQ29sbGVjdGlvbj1hLndyYXBOb2RlTGlzdCxhLndyYXBwZXJzLkhUTUxDb2xsZWN0aW9uPWEud3JhcHBlcnMuTm9kZUxpc3R9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7QShhIGluc3RhbmNlb2Ygdyl9ZnVuY3Rpb24gYyhhKXt2YXIgYj1uZXcgeTtyZXR1cm4gYlswXT1hLGIubGVuZ3RoPTEsYn1mdW5jdGlvbiBkKGEsYixjKXtDKGIsImNoaWxkTGlzdCIse3JlbW92ZWROb2RlczpjLHByZXZpb3VzU2libGluZzphLnByZXZpb3VzU2libGluZyxuZXh0U2libGluZzphLm5leHRTaWJsaW5nfSl9ZnVuY3Rpb24gZShhLGIpe0MoYSwiY2hpbGRMaXN0Iix7cmVtb3ZlZE5vZGVzOmJ9KX1mdW5jdGlvbiBmKGEsYixkLGUpe2lmKGEgaW5zdGFuY2VvZiBEb2N1bWVudEZyYWdtZW50KXt2YXIgZj1oKGEpO089ITA7Zm9yKHZhciBnPWYubGVuZ3RoLTE7Zz49MDtnLS0pYS5yZW1vdmVDaGlsZChmW2ddKSxmW2ddLnBhcmVudE5vZGVfPWI7Tz0hMTtmb3IodmFyIGc9MDtnPGYubGVuZ3RoO2crKylmW2ddLnByZXZpb3VzU2libGluZ189ZltnLTFdfHxkLGZbZ10ubmV4dFNpYmxpbmdfPWZbZysxXXx8ZTtyZXR1cm4gZCYmKGQubmV4dFNpYmxpbmdfPWZbMF0pLGUmJihlLnByZXZpb3VzU2libGluZ189ZltmLmxlbmd0aC0xXSksZn12YXIgZj1jKGEpLGk9YS5wYXJlbnROb2RlO3JldHVybiBpJiZpLnJlbW92ZUNoaWxkKGEpLGEucGFyZW50Tm9kZV89YixhLnByZXZpb3VzU2libGluZ189ZCxhLm5leHRTaWJsaW5nXz1lLGQmJihkLm5leHRTaWJsaW5nXz1hKSxlJiYoZS5wcmV2aW91c1NpYmxpbmdfPWEpLGZ9ZnVuY3Rpb24gZyhhKXtpZihhIGluc3RhbmNlb2YgRG9jdW1lbnRGcmFnbWVudClyZXR1cm4gaChhKTt2YXIgYj1jKGEpLGU9YS5wYXJlbnROb2RlO3JldHVybiBlJiZkKGEsZSxiKSxifWZ1bmN0aW9uIGgoYSl7Zm9yKHZhciBiPW5ldyB5LGM9MCxkPWEuZmlyc3RDaGlsZDtkO2Q9ZC5uZXh0U2libGluZyliW2MrK109ZDtyZXR1cm4gYi5sZW5ndGg9YyxlKGEsYiksYn1mdW5jdGlvbiBpKGEpe3JldHVybiBhfWZ1bmN0aW9uIGooYSxiKXtJKGEsYiksYS5ub2RlSXNJbnNlcnRlZF8oKX1mdW5jdGlvbiBrKGEsYil7Zm9yKHZhciBjPUQoYiksZD0wO2Q8YS5sZW5ndGg7ZCsrKWooYVtkXSxjKX1mdW5jdGlvbiBsKGEpe0koYSxuZXcgeihhLG51bGwpKX1mdW5jdGlvbiBtKGEpe2Zvcih2YXIgYj0wO2I8YS5sZW5ndGg7YisrKWwoYVtiXSl9ZnVuY3Rpb24gbihhLGIpe3ZhciBjPWEubm9kZVR5cGU9PT13LkRPQ1VNRU5UX05PREU/YTphLm93bmVyRG9jdW1lbnQ7YyE9PWIub3duZXJEb2N1bWVudCYmYy5hZG9wdE5vZGUoYil9ZnVuY3Rpb24gbyhiLGMpe2lmKGMubGVuZ3RoKXt2YXIgZD1iLm93bmVyRG9jdW1lbnQ7aWYoZCE9PWNbMF0ub3duZXJEb2N1bWVudClmb3IodmFyIGU9MDtlPGMubGVuZ3RoO2UrKylhLmFkb3B0Tm9kZU5vUmVtb3ZlKGNbZV0sZCl9fWZ1bmN0aW9uIHAoYSxiKXtvKGEsYik7dmFyIGM9Yi5sZW5ndGg7aWYoMT09PWMpcmV0dXJuIEooYlswXSk7Zm9yKHZhciBkPUooYS5vd25lckRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSksZT0wO2M+ZTtlKyspZC5hcHBlbmRDaGlsZChKKGJbZV0pKTtyZXR1cm4gZH1mdW5jdGlvbiBxKGEpe2lmKHZvaWQgMCE9PWEuZmlyc3RDaGlsZF8pZm9yKHZhciBiPWEuZmlyc3RDaGlsZF87Yjspe3ZhciBjPWI7Yj1iLm5leHRTaWJsaW5nXyxjLnBhcmVudE5vZGVfPWMucHJldmlvdXNTaWJsaW5nXz1jLm5leHRTaWJsaW5nXz12b2lkIDB9YS5maXJzdENoaWxkXz1hLmxhc3RDaGlsZF89dm9pZCAwfWZ1bmN0aW9uIHIoYSl7aWYoYS5pbnZhbGlkYXRlU2hhZG93UmVuZGVyZXIoKSl7Zm9yKHZhciBiPWEuZmlyc3RDaGlsZDtiOyl7QShiLnBhcmVudE5vZGU9PT1hKTt2YXIgYz1iLm5leHRTaWJsaW5nLGQ9SihiKSxlPWQucGFyZW50Tm9kZTtlJiZWLmNhbGwoZSxkKSxiLnByZXZpb3VzU2libGluZ189Yi5uZXh0U2libGluZ189Yi5wYXJlbnROb2RlXz1udWxsLGI9Y31hLmZpcnN0Q2hpbGRfPWEubGFzdENoaWxkXz1udWxsfWVsc2UgZm9yKHZhciBjLGY9SihhKSxnPWYuZmlyc3RDaGlsZDtnOyljPWcubmV4dFNpYmxpbmcsVi5jYWxsKGYsZyksZz1jfWZ1bmN0aW9uIHMoYSl7dmFyIGI9YS5wYXJlbnROb2RlO3JldHVybiBiJiZiLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcigpfWZ1bmN0aW9uIHQoYSl7Zm9yKHZhciBiLGM9MDtjPGEubGVuZ3RoO2MrKyliPWFbY10sYi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGIpfWZ1bmN0aW9uIHUoYSxiLGMpe3ZhciBkO2lmKGQ9TChjP1AuY2FsbChjLGEuaW1wbCwhMSk6US5jYWxsKGEuaW1wbCwhMSkpLGIpe2Zvcih2YXIgZT1hLmZpcnN0Q2hpbGQ7ZTtlPWUubmV4dFNpYmxpbmcpZC5hcHBlbmRDaGlsZCh1KGUsITAsYykpO2lmKGEgaW5zdGFuY2VvZiBOLkhUTUxUZW1wbGF0ZUVsZW1lbnQpZm9yKHZhciBmPWQuY29udGVudCxlPWEuY29udGVudC5maXJzdENoaWxkO2U7ZT1lLm5leHRTaWJsaW5nKWYuYXBwZW5kQ2hpbGQodShlLCEwLGMpKX1yZXR1cm4gZH1mdW5jdGlvbiB2KGEsYil7aWYoIWJ8fEQoYSkhPT1EKGIpKXJldHVybiExO2Zvcih2YXIgYz1iO2M7Yz1jLnBhcmVudE5vZGUpaWYoYz09PWEpcmV0dXJuITA7cmV0dXJuITF9ZnVuY3Rpb24gdyhhKXtBKGEgaW5zdGFuY2VvZiBSKSx4LmNhbGwodGhpcyxhKSx0aGlzLnBhcmVudE5vZGVfPXZvaWQgMCx0aGlzLmZpcnN0Q2hpbGRfPXZvaWQgMCx0aGlzLmxhc3RDaGlsZF89dm9pZCAwLHRoaXMubmV4dFNpYmxpbmdfPXZvaWQgMCx0aGlzLnByZXZpb3VzU2libGluZ189dm9pZCAwLHRoaXMudHJlZVNjb3BlXz12b2lkIDB9dmFyIHg9YS53cmFwcGVycy5FdmVudFRhcmdldCx5PWEud3JhcHBlcnMuTm9kZUxpc3Qsej1hLlRyZWVTY29wZSxBPWEuYXNzZXJ0LEI9YS5kZWZpbmVXcmFwR2V0dGVyLEM9YS5lbnF1ZXVlTXV0YXRpb24sRD1hLmdldFRyZWVTY29wZSxFPWEuaXNXcmFwcGVyLEY9YS5taXhpbixHPWEucmVnaXN0ZXJUcmFuc2llbnRPYnNlcnZlcnMsSD1hLnJlZ2lzdGVyV3JhcHBlcixJPWEuc2V0VHJlZVNjb3BlLEo9YS51bndyYXAsSz1hLnVud3JhcElmTmVlZGVkLEw9YS53cmFwLE09YS53cmFwSWZOZWVkZWQsTj1hLndyYXBwZXJzLE89ITEsUD1kb2N1bWVudC5pbXBvcnROb2RlLFE9d2luZG93Lk5vZGUucHJvdG90eXBlLmNsb25lTm9kZSxSPXdpbmRvdy5Ob2RlLFM9d2luZG93LkRvY3VtZW50RnJhZ21lbnQsVD0oUi5wcm90b3R5cGUuYXBwZW5kQ2hpbGQsUi5wcm90b3R5cGUuY29tcGFyZURvY3VtZW50UG9zaXRpb24pLFU9Ui5wcm90b3R5cGUuaW5zZXJ0QmVmb3JlLFY9Ui5wcm90b3R5cGUucmVtb3ZlQ2hpbGQsVz1SLnByb3RvdHlwZS5yZXBsYWNlQ2hpbGQsWD0vVHJpZGVudC8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSxZPVg/ZnVuY3Rpb24oYSxiKXt0cnl7Vi5jYWxsKGEsYil9Y2F0Y2goYyl7aWYoIShhIGluc3RhbmNlb2YgUykpdGhyb3cgY319OmZ1bmN0aW9uKGEsYil7Vi5jYWxsKGEsYil9O3cucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoeC5wcm90b3R5cGUpLEYody5wcm90b3R5cGUse2FwcGVuZENoaWxkOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmluc2VydEJlZm9yZShhLG51bGwpfSxpbnNlcnRCZWZvcmU6ZnVuY3Rpb24oYSxjKXtiKGEpO3ZhciBkO2M/RShjKT9kPUooYyk6KGQ9YyxjPUwoZCkpOihjPW51bGwsZD1udWxsKSxjJiZBKGMucGFyZW50Tm9kZT09PXRoaXMpO3ZhciBlLGg9Yz9jLnByZXZpb3VzU2libGluZzp0aGlzLmxhc3RDaGlsZCxpPSF0aGlzLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcigpJiYhcyhhKTtpZihlPWk/ZyhhKTpmKGEsdGhpcyxoLGMpLGkpbih0aGlzLGEpLHEodGhpcyksVS5jYWxsKHRoaXMuaW1wbCxKKGEpLGQpO2Vsc2V7aHx8KHRoaXMuZmlyc3RDaGlsZF89ZVswXSksY3x8KHRoaXMubGFzdENoaWxkXz1lW2UubGVuZ3RoLTFdLHZvaWQgMD09PXRoaXMuZmlyc3RDaGlsZF8mJih0aGlzLmZpcnN0Q2hpbGRfPXRoaXMuZmlyc3RDaGlsZCkpO3ZhciBqPWQ/ZC5wYXJlbnROb2RlOnRoaXMuaW1wbDtqP1UuY2FsbChqLHAodGhpcyxlKSxkKTpvKHRoaXMsZSl9cmV0dXJuIEModGhpcywiY2hpbGRMaXN0Iix7YWRkZWROb2RlczplLG5leHRTaWJsaW5nOmMscHJldmlvdXNTaWJsaW5nOmh9KSxrKGUsdGhpcyksYX0scmVtb3ZlQ2hpbGQ6ZnVuY3Rpb24oYSl7aWYoYihhKSxhLnBhcmVudE5vZGUhPT10aGlzKXtmb3IodmFyIGQ9ITEsZT0odGhpcy5jaGlsZE5vZGVzLHRoaXMuZmlyc3RDaGlsZCk7ZTtlPWUubmV4dFNpYmxpbmcpaWYoZT09PWEpe2Q9ITA7YnJlYWt9aWYoIWQpdGhyb3cgbmV3IEVycm9yKCJOb3RGb3VuZEVycm9yIil9dmFyIGY9SihhKSxnPWEubmV4dFNpYmxpbmcsaD1hLnByZXZpb3VzU2libGluZztpZih0aGlzLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcigpKXt2YXIgaT10aGlzLmZpcnN0Q2hpbGQsaj10aGlzLmxhc3RDaGlsZCxrPWYucGFyZW50Tm9kZTtrJiZZKGssZiksaT09PWEmJih0aGlzLmZpcnN0Q2hpbGRfPWcpLGo9PT1hJiYodGhpcy5sYXN0Q2hpbGRfPWgpLGgmJihoLm5leHRTaWJsaW5nXz1nKSxnJiYoZy5wcmV2aW91c1NpYmxpbmdfPWgpLGEucHJldmlvdXNTaWJsaW5nXz1hLm5leHRTaWJsaW5nXz1hLnBhcmVudE5vZGVfPXZvaWQgMH1lbHNlIHEodGhpcyksWSh0aGlzLmltcGwsZik7cmV0dXJuIE98fEModGhpcywiY2hpbGRMaXN0Iix7cmVtb3ZlZE5vZGVzOmMoYSksbmV4dFNpYmxpbmc6ZyxwcmV2aW91c1NpYmxpbmc6aH0pLEcodGhpcyxhKSxhfSxyZXBsYWNlQ2hpbGQ6ZnVuY3Rpb24oYSxkKXtiKGEpO3ZhciBlO2lmKEUoZCk/ZT1KKGQpOihlPWQsZD1MKGUpKSxkLnBhcmVudE5vZGUhPT10aGlzKXRocm93IG5ldyBFcnJvcigiTm90Rm91bmRFcnJvciIpO3ZhciBoLGk9ZC5uZXh0U2libGluZyxqPWQucHJldmlvdXNTaWJsaW5nLG09IXRoaXMuaW52YWxpZGF0ZVNoYWRvd1JlbmRlcmVyKCkmJiFzKGEpO3JldHVybiBtP2g9ZyhhKTooaT09PWEmJihpPWEubmV4dFNpYmxpbmcpLGg9ZihhLHRoaXMsaixpKSksbT8obih0aGlzLGEpLHEodGhpcyksVy5jYWxsKHRoaXMuaW1wbCxKKGEpLGUpKToodGhpcy5maXJzdENoaWxkPT09ZCYmKHRoaXMuZmlyc3RDaGlsZF89aFswXSksdGhpcy5sYXN0Q2hpbGQ9PT1kJiYodGhpcy5sYXN0Q2hpbGRfPWhbaC5sZW5ndGgtMV0pLGQucHJldmlvdXNTaWJsaW5nXz1kLm5leHRTaWJsaW5nXz1kLnBhcmVudE5vZGVfPXZvaWQgMCxlLnBhcmVudE5vZGUmJlcuY2FsbChlLnBhcmVudE5vZGUscCh0aGlzLGgpLGUpKSxDKHRoaXMsImNoaWxkTGlzdCIse2FkZGVkTm9kZXM6aCxyZW1vdmVkTm9kZXM6YyhkKSxuZXh0U2libGluZzppLHByZXZpb3VzU2libGluZzpqfSksbChkKSxrKGgsdGhpcyksZH0sbm9kZUlzSW5zZXJ0ZWRfOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPXRoaXMuZmlyc3RDaGlsZDthO2E9YS5uZXh0U2libGluZylhLm5vZGVJc0luc2VydGVkXygpfSxoYXNDaGlsZE5vZGVzOmZ1bmN0aW9uKCl7cmV0dXJuIG51bGwhPT10aGlzLmZpcnN0Q2hpbGR9LGdldCBwYXJlbnROb2RlKCl7cmV0dXJuIHZvaWQgMCE9PXRoaXMucGFyZW50Tm9kZV8/dGhpcy5wYXJlbnROb2RlXzpMKHRoaXMuaW1wbC5wYXJlbnROb2RlKX0sZ2V0IGZpcnN0Q2hpbGQoKXtyZXR1cm4gdm9pZCAwIT09dGhpcy5maXJzdENoaWxkXz90aGlzLmZpcnN0Q2hpbGRfOkwodGhpcy5pbXBsLmZpcnN0Q2hpbGQpfSxnZXQgbGFzdENoaWxkKCl7cmV0dXJuIHZvaWQgMCE9PXRoaXMubGFzdENoaWxkXz90aGlzLmxhc3RDaGlsZF86TCh0aGlzLmltcGwubGFzdENoaWxkKX0sZ2V0IG5leHRTaWJsaW5nKCl7cmV0dXJuIHZvaWQgMCE9PXRoaXMubmV4dFNpYmxpbmdfP3RoaXMubmV4dFNpYmxpbmdfOkwodGhpcy5pbXBsLm5leHRTaWJsaW5nKX0sZ2V0IHByZXZpb3VzU2libGluZygpe3JldHVybiB2b2lkIDAhPT10aGlzLnByZXZpb3VzU2libGluZ18/dGhpcy5wcmV2aW91c1NpYmxpbmdfOkwodGhpcy5pbXBsLnByZXZpb3VzU2libGluZyl9LGdldCBwYXJlbnRFbGVtZW50KCl7Zm9yKHZhciBhPXRoaXMucGFyZW50Tm9kZTthJiZhLm5vZGVUeXBlIT09dy5FTEVNRU5UX05PREU7KWE9YS5wYXJlbnROb2RlO3JldHVybiBhfSxnZXQgdGV4dENvbnRlbnQoKXtmb3IodmFyIGE9IiIsYj10aGlzLmZpcnN0Q2hpbGQ7YjtiPWIubmV4dFNpYmxpbmcpYi5ub2RlVHlwZSE9dy5DT01NRU5UX05PREUmJihhKz1iLnRleHRDb250ZW50KTtyZXR1cm4gYX0sc2V0IHRleHRDb250ZW50KGEpe3ZhciBiPWkodGhpcy5jaGlsZE5vZGVzKTtpZih0aGlzLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcigpKXtpZihyKHRoaXMpLCIiIT09YSl7dmFyIGM9dGhpcy5pbXBsLm93bmVyRG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoYSk7dGhpcy5hcHBlbmRDaGlsZChjKX19ZWxzZSBxKHRoaXMpLHRoaXMuaW1wbC50ZXh0Q29udGVudD1hO3ZhciBkPWkodGhpcy5jaGlsZE5vZGVzKTtDKHRoaXMsImNoaWxkTGlzdCIse2FkZGVkTm9kZXM6ZCxyZW1vdmVkTm9kZXM6Yn0pLG0oYiksayhkLHRoaXMpfSxnZXQgY2hpbGROb2Rlcygpe2Zvcih2YXIgYT1uZXcgeSxiPTAsYz10aGlzLmZpcnN0Q2hpbGQ7YztjPWMubmV4dFNpYmxpbmcpYVtiKytdPWM7cmV0dXJuIGEubGVuZ3RoPWIsYX0sY2xvbmVOb2RlOmZ1bmN0aW9uKGEpe3JldHVybiB1KHRoaXMsYSl9LGNvbnRhaW5zOmZ1bmN0aW9uKGEpe3JldHVybiB2KHRoaXMsTShhKSl9LGNvbXBhcmVEb2N1bWVudFBvc2l0aW9uOmZ1bmN0aW9uKGEpe3JldHVybiBULmNhbGwodGhpcy5pbXBsLEsoYSkpfSxub3JtYWxpemU6ZnVuY3Rpb24oKXtmb3IodmFyIGEsYixjPWkodGhpcy5jaGlsZE5vZGVzKSxkPVtdLGU9IiIsZj0wO2Y8Yy5sZW5ndGg7ZisrKWI9Y1tmXSxiLm5vZGVUeXBlPT09dy5URVhUX05PREU/YXx8Yi5kYXRhLmxlbmd0aD9hPyhlKz1iLmRhdGEsZC5wdXNoKGIpKTphPWI6dGhpcy5yZW1vdmVOb2RlKGIpOihhJiZkLmxlbmd0aCYmKGEuZGF0YSs9ZSx0KGQpKSxkPVtdLGU9IiIsYT1udWxsLGIuY2hpbGROb2Rlcy5sZW5ndGgmJmIubm9ybWFsaXplKCkpO2EmJmQubGVuZ3RoJiYoYS5kYXRhKz1lLHQoZCkpfX0pLEIodywib3duZXJEb2N1bWVudCIpLEgoUix3LGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSksZGVsZXRlIHcucHJvdG90eXBlLnF1ZXJ5U2VsZWN0b3IsZGVsZXRlIHcucHJvdG90eXBlLnF1ZXJ5U2VsZWN0b3JBbGwsdy5wcm90b3R5cGU9RihPYmplY3QuY3JlYXRlKHgucHJvdG90eXBlKSx3LnByb3RvdHlwZSksYS5jbG9uZU5vZGU9dSxhLm5vZGVXYXNBZGRlZD1qLGEubm9kZVdhc1JlbW92ZWQ9bCxhLm5vZGVzV2VyZUFkZGVkPWssYS5ub2Rlc1dlcmVSZW1vdmVkPW0sYS5zbmFwc2hvdE5vZGVMaXN0PWksYS53cmFwcGVycy5Ob2RlPXd9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSxjKXtmb3IodmFyIGQsZT1hLmZpcnN0RWxlbWVudENoaWxkO2U7KXtpZihlLm1hdGNoZXMoYykpcmV0dXJuIGU7aWYoZD1iKGUsYykpcmV0dXJuIGQ7ZT1lLm5leHRFbGVtZW50U2libGluZ31yZXR1cm4gbnVsbH1mdW5jdGlvbiBjKGEsYil7cmV0dXJuIGEubWF0Y2hlcyhiKX1mdW5jdGlvbiBkKGEsYixjKXt2YXIgZD1hLmxvY2FsTmFtZTtyZXR1cm4gZD09PWJ8fGQ9PT1jJiZhLm5hbWVzcGFjZVVSST09PWx9ZnVuY3Rpb24gZSgpe3JldHVybiEwfWZ1bmN0aW9uIGYoYSxiKXtyZXR1cm4gYS5sb2NhbE5hbWU9PT1ifWZ1bmN0aW9uIGcoYSxiKXtyZXR1cm4gYS5uYW1lc3BhY2VVUkk9PT1ifWZ1bmN0aW9uIGgoYSxiLGMpe3JldHVybiBhLm5hbWVzcGFjZVVSST09PWImJmEubG9jYWxOYW1lPT09Y31mdW5jdGlvbiBpKGEsYixjLGQsZSl7Zm9yKHZhciBmPWEuZmlyc3RFbGVtZW50Q2hpbGQ7ZjspYyhmLGQsZSkmJihiW2IubGVuZ3RoKytdPWYpLGkoZixiLGMsZCxlKSxmPWYubmV4dEVsZW1lbnRTaWJsaW5nO3JldHVybiBifXZhciBqPWEud3JhcHBlcnMuSFRNTENvbGxlY3Rpb24saz1hLndyYXBwZXJzLk5vZGVMaXN0LGw9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwiLG09e3F1ZXJ5U2VsZWN0b3I6ZnVuY3Rpb24oYSl7cmV0dXJuIGIodGhpcyxhKX0scXVlcnlTZWxlY3RvckFsbDpmdW5jdGlvbihhKXtyZXR1cm4gaSh0aGlzLG5ldyBrLGMsYSl9fSxuPXtnZXRFbGVtZW50c0J5VGFnTmFtZTpmdW5jdGlvbihhKXt2YXIgYj1uZXcgajtyZXR1cm4iKiI9PT1hP2kodGhpcyxiLGUpOmkodGhpcyxiLGQsYSxhLnRvTG93ZXJDYXNlKCkpfSxnZXRFbGVtZW50c0J5Q2xhc3NOYW1lOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnF1ZXJ5U2VsZWN0b3JBbGwoIi4iK2EpfSxnZXRFbGVtZW50c0J5VGFnTmFtZU5TOmZ1bmN0aW9uKGEsYil7dmFyIGM9bmV3IGo7aWYoIiI9PT1hKWE9bnVsbDtlbHNlIGlmKCIqIj09PWEpcmV0dXJuIioiPT09Yj9pKHRoaXMsYyxlKTppKHRoaXMsYyxmLGIpO3JldHVybiIqIj09PWI/aSh0aGlzLGMsZyxhKTppKHRoaXMsYyxoLGEsYil9fTthLkdldEVsZW1lbnRzQnlJbnRlcmZhY2U9bixhLlNlbGVjdG9yc0ludGVyZmFjZT1tfSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe2Zvcig7YSYmYS5ub2RlVHlwZSE9PU5vZGUuRUxFTUVOVF9OT0RFOylhPWEubmV4dFNpYmxpbmc7cmV0dXJuIGF9ZnVuY3Rpb24gYyhhKXtmb3IoO2EmJmEubm9kZVR5cGUhPT1Ob2RlLkVMRU1FTlRfTk9ERTspYT1hLnByZXZpb3VzU2libGluZztyZXR1cm4gYX12YXIgZD1hLndyYXBwZXJzLk5vZGVMaXN0LGU9e2dldCBmaXJzdEVsZW1lbnRDaGlsZCgpe3JldHVybiBiKHRoaXMuZmlyc3RDaGlsZCl9LGdldCBsYXN0RWxlbWVudENoaWxkKCl7cmV0dXJuIGModGhpcy5sYXN0Q2hpbGQpfSxnZXQgY2hpbGRFbGVtZW50Q291bnQoKXtmb3IodmFyIGE9MCxiPXRoaXMuZmlyc3RFbGVtZW50Q2hpbGQ7YjtiPWIubmV4dEVsZW1lbnRTaWJsaW5nKWErKztyZXR1cm4gYX0sZ2V0IGNoaWxkcmVuKCl7Zm9yKHZhciBhPW5ldyBkLGI9MCxjPXRoaXMuZmlyc3RFbGVtZW50Q2hpbGQ7YztjPWMubmV4dEVsZW1lbnRTaWJsaW5nKWFbYisrXT1jO3JldHVybiBhLmxlbmd0aD1iLGF9LHJlbW92ZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMucGFyZW50Tm9kZTthJiZhLnJlbW92ZUNoaWxkKHRoaXMpfX0sZj17Z2V0IG5leHRFbGVtZW50U2libGluZygpe3JldHVybiBiKHRoaXMubmV4dFNpYmxpbmcpfSxnZXQgcHJldmlvdXNFbGVtZW50U2libGluZygpe3JldHVybiBjKHRoaXMucHJldmlvdXNTaWJsaW5nKX19O2EuQ2hpbGROb2RlSW50ZXJmYWNlPWYsYS5QYXJlbnROb2RlSW50ZXJmYWNlPWV9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7ZC5jYWxsKHRoaXMsYSl9dmFyIGM9YS5DaGlsZE5vZGVJbnRlcmZhY2UsZD1hLndyYXBwZXJzLk5vZGUsZT1hLmVucXVldWVNdXRhdGlvbixmPWEubWl4aW4sZz1hLnJlZ2lzdGVyV3JhcHBlcixoPXdpbmRvdy5DaGFyYWN0ZXJEYXRhO2IucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZC5wcm90b3R5cGUpLGYoYi5wcm90b3R5cGUse2dldCB0ZXh0Q29udGVudCgpe3JldHVybiB0aGlzLmRhdGF9LHNldCB0ZXh0Q29udGVudChhKXt0aGlzLmRhdGE9YX0sZ2V0IGRhdGEoKXtyZXR1cm4gdGhpcy5pbXBsLmRhdGF9LHNldCBkYXRhKGEpe3ZhciBiPXRoaXMuaW1wbC5kYXRhO2UodGhpcywiY2hhcmFjdGVyRGF0YSIse29sZFZhbHVlOmJ9KSx0aGlzLmltcGwuZGF0YT1hfX0pLGYoYi5wcm90b3R5cGUsYyksZyhoLGIsZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoIiIpKSxhLndyYXBwZXJzLkNoYXJhY3RlckRhdGE9Yn0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtyZXR1cm4gYT4+PjB9ZnVuY3Rpb24gYyhhKXtkLmNhbGwodGhpcyxhKX12YXIgZD1hLndyYXBwZXJzLkNoYXJhY3RlckRhdGEsZT0oYS5lbnF1ZXVlTXV0YXRpb24sYS5taXhpbiksZj1hLnJlZ2lzdGVyV3JhcHBlcixnPXdpbmRvdy5UZXh0O2MucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZC5wcm90b3R5cGUpLGUoYy5wcm90b3R5cGUse3NwbGl0VGV4dDpmdW5jdGlvbihhKXthPWIoYSk7dmFyIGM9dGhpcy5kYXRhO2lmKGE+Yy5sZW5ndGgpdGhyb3cgbmV3IEVycm9yKCJJbmRleFNpemVFcnJvciIpO3ZhciBkPWMuc2xpY2UoMCxhKSxlPWMuc2xpY2UoYSk7dGhpcy5kYXRhPWQ7dmFyIGY9dGhpcy5vd25lckRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGUpO3JldHVybiB0aGlzLnBhcmVudE5vZGUmJnRoaXMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoZix0aGlzLm5leHRTaWJsaW5nKSxmfX0pLGYoZyxjLGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCIiKSksYS53cmFwcGVycy5UZXh0PWN9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYil7YS5pbnZhbGlkYXRlUmVuZGVyZXJCYXNlZE9uQXR0cmlidXRlKGIsImNsYXNzIil9ZnVuY3Rpb24gYyhhLGIpe3RoaXMuaW1wbD1hLHRoaXMub3duZXJFbGVtZW50Xz1ifWMucHJvdG90eXBlPXtnZXQgbGVuZ3RoKCl7cmV0dXJuIHRoaXMuaW1wbC5sZW5ndGh9LGl0ZW06ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuaW1wbC5pdGVtKGEpfSxjb250YWluczpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5pbXBsLmNvbnRhaW5zKGEpfSxhZGQ6ZnVuY3Rpb24oKXt0aGlzLmltcGwuYWRkLmFwcGx5KHRoaXMuaW1wbCxhcmd1bWVudHMpLGIodGhpcy5vd25lckVsZW1lbnRfKX0scmVtb3ZlOmZ1bmN0aW9uKCl7dGhpcy5pbXBsLnJlbW92ZS5hcHBseSh0aGlzLmltcGwsYXJndW1lbnRzKSxiKHRoaXMub3duZXJFbGVtZW50Xyl9LHRvZ2dsZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMuaW1wbC50b2dnbGUuYXBwbHkodGhpcy5pbXBsLGFyZ3VtZW50cyk7cmV0dXJuIGIodGhpcy5vd25lckVsZW1lbnRfKSxhfSx0b1N0cmluZzpmdW5jdGlvbigpe3JldHVybiB0aGlzLmltcGwudG9TdHJpbmcoKX19LGEud3JhcHBlcnMuRE9NVG9rZW5MaXN0PWN9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYixjKXt2YXIgZD1iLnBhcmVudE5vZGU7aWYoZCYmZC5zaGFkb3dSb290KXt2YXIgZT1hLmdldFJlbmRlcmVyRm9ySG9zdChkKTtlLmRlcGVuZHNPbkF0dHJpYnV0ZShjKSYmZS5pbnZhbGlkYXRlKCl9fWZ1bmN0aW9uIGMoYSxiLGMpe2soYSwiYXR0cmlidXRlcyIse25hbWU6YixuYW1lc3BhY2U6bnVsbCxvbGRWYWx1ZTpjfSl9ZnVuY3Rpb24gZChhKXtnLmNhbGwodGhpcyxhKX12YXIgZT1hLkNoaWxkTm9kZUludGVyZmFjZSxmPWEuR2V0RWxlbWVudHNCeUludGVyZmFjZSxnPWEud3JhcHBlcnMuTm9kZSxoPWEud3JhcHBlcnMuRE9NVG9rZW5MaXN0LGk9YS5QYXJlbnROb2RlSW50ZXJmYWNlLGo9YS5TZWxlY3RvcnNJbnRlcmZhY2Usaz0oYS5hZGRXcmFwTm9kZUxpc3RNZXRob2QsYS5lbnF1ZXVlTXV0YXRpb24pLGw9YS5taXhpbixtPShhLm9uZU9mLGEucmVnaXN0ZXJXcmFwcGVyKSxuPWEudW53cmFwLG89YS53cmFwcGVycyxwPXdpbmRvdy5FbGVtZW50LHE9WyJtYXRjaGVzIiwibW96TWF0Y2hlc1NlbGVjdG9yIiwibXNNYXRjaGVzU2VsZWN0b3IiLCJ3ZWJraXRNYXRjaGVzU2VsZWN0b3IiXS5maWx0ZXIoZnVuY3Rpb24oYSl7cmV0dXJuIHAucHJvdG90eXBlW2FdfSkscj1xWzBdLHM9cC5wcm90b3R5cGVbcl0sdD1uZXcgV2Vha01hcDtkLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGcucHJvdG90eXBlKSxsKGQucHJvdG90eXBlLHtjcmVhdGVTaGFkb3dSb290OmZ1bmN0aW9uKCl7dmFyIGI9bmV3IG8uU2hhZG93Um9vdCh0aGlzKTt0aGlzLmltcGwucG9seW1lclNoYWRvd1Jvb3RfPWI7dmFyIGM9YS5nZXRSZW5kZXJlckZvckhvc3QodGhpcyk7cmV0dXJuIGMuaW52YWxpZGF0ZSgpLGJ9LGdldCBzaGFkb3dSb290KCl7cmV0dXJuIHRoaXMuaW1wbC5wb2x5bWVyU2hhZG93Um9vdF98fG51bGx9LHNldEF0dHJpYnV0ZTpmdW5jdGlvbihhLGQpe3ZhciBlPXRoaXMuaW1wbC5nZXRBdHRyaWJ1dGUoYSk7dGhpcy5pbXBsLnNldEF0dHJpYnV0ZShhLGQpLGModGhpcyxhLGUpLGIodGhpcyxhKX0scmVtb3ZlQXR0cmlidXRlOmZ1bmN0aW9uKGEpe3ZhciBkPXRoaXMuaW1wbC5nZXRBdHRyaWJ1dGUoYSk7dGhpcy5pbXBsLnJlbW92ZUF0dHJpYnV0ZShhKSxjKHRoaXMsYSxkKSxiKHRoaXMsYSl9LG1hdGNoZXM6ZnVuY3Rpb24oYSl7cmV0dXJuIHMuY2FsbCh0aGlzLmltcGwsYSl9LGdldCBjbGFzc0xpc3QoKXt2YXIgYT10LmdldCh0aGlzKTtyZXR1cm4gYXx8dC5zZXQodGhpcyxhPW5ldyBoKG4odGhpcykuY2xhc3NMaXN0LHRoaXMpKSxhfSxnZXQgY2xhc3NOYW1lKCl7cmV0dXJuIG4odGhpcykuY2xhc3NOYW1lfSxzZXQgY2xhc3NOYW1lKGEpe3RoaXMuc2V0QXR0cmlidXRlKCJjbGFzcyIsYSl9LGdldCBpZCgpe3JldHVybiBuKHRoaXMpLmlkfSxzZXQgaWQoYSl7dGhpcy5zZXRBdHRyaWJ1dGUoImlkIixhKX19KSxxLmZvckVhY2goZnVuY3Rpb24oYSl7Im1hdGNoZXMiIT09YSYmKGQucHJvdG90eXBlW2FdPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLm1hdGNoZXMoYSl9KX0pLHAucHJvdG90eXBlLndlYmtpdENyZWF0ZVNoYWRvd1Jvb3QmJihkLnByb3RvdHlwZS53ZWJraXRDcmVhdGVTaGFkb3dSb290PWQucHJvdG90eXBlLmNyZWF0ZVNoYWRvd1Jvb3QpLGwoZC5wcm90b3R5cGUsZSksbChkLnByb3RvdHlwZSxmKSxsKGQucHJvdG90eXBlLGkpLGwoZC5wcm90b3R5cGUsaiksbShwLGQsZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKG51bGwsIngiKSksYS5pbnZhbGlkYXRlUmVuZGVyZXJCYXNlZE9uQXR0cmlidXRlPWIsYS5tYXRjaGVzTmFtZXM9cSxhLndyYXBwZXJzLkVsZW1lbnQ9ZH0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtzd2l0Y2goYSl7Y2FzZSImIjpyZXR1cm4iJmFtcDsiO2Nhc2UiPCI6cmV0dXJuIiZsdDsiO2Nhc2UiPiI6cmV0dXJuIiZndDsiO2Nhc2UnIic6cmV0dXJuIiZxdW90OyI7Y2FzZSJceGEwIjpyZXR1cm4iJm5ic3A7In19ZnVuY3Rpb24gYyhhKXtyZXR1cm4gYS5yZXBsYWNlKHosYil9ZnVuY3Rpb24gZChhKXtyZXR1cm4gYS5yZXBsYWNlKEEsYil9ZnVuY3Rpb24gZShhKXtmb3IodmFyIGI9e30sYz0wO2M8YS5sZW5ndGg7YysrKWJbYVtjXV09ITA7cmV0dXJuIGJ9ZnVuY3Rpb24gZihhLGIpe3N3aXRjaChhLm5vZGVUeXBlKXtjYXNlIE5vZGUuRUxFTUVOVF9OT0RFOmZvcih2YXIgZSxmPWEudGFnTmFtZS50b0xvd2VyQ2FzZSgpLGg9IjwiK2YsaT1hLmF0dHJpYnV0ZXMsaj0wO2U9aVtqXTtqKyspaCs9IiAiK2UubmFtZSsnPSInK2MoZS52YWx1ZSkrJyInO3JldHVybiBoKz0iPiIsQltmXT9oOmgrZyhhKSsiPC8iK2YrIj4iO2Nhc2UgTm9kZS5URVhUX05PREU6dmFyIGs9YS5kYXRhO3JldHVybiBiJiZDW2IubG9jYWxOYW1lXT9rOmQoayk7Y2FzZSBOb2RlLkNPTU1FTlRfTk9ERTpyZXR1cm4iPCEtLSIrYS5kYXRhKyItLT4iO2RlZmF1bHQ6dGhyb3cgY29uc29sZS5lcnJvcihhKSxuZXcgRXJyb3IoIm5vdCBpbXBsZW1lbnRlZCIpfX1mdW5jdGlvbiBnKGEpe2EgaW5zdGFuY2VvZiB5LkhUTUxUZW1wbGF0ZUVsZW1lbnQmJihhPWEuY29udGVudCk7Zm9yKHZhciBiPSIiLGM9YS5maXJzdENoaWxkO2M7Yz1jLm5leHRTaWJsaW5nKWIrPWYoYyxhKTtyZXR1cm4gYn1mdW5jdGlvbiBoKGEsYixjKXt2YXIgZD1jfHwiZGl2IjthLnRleHRDb250ZW50PSIiO3ZhciBlPXcoYS5vd25lckRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoZCkpO2UuaW5uZXJIVE1MPWI7Zm9yKHZhciBmO2Y9ZS5maXJzdENoaWxkOylhLmFwcGVuZENoaWxkKHgoZikpfWZ1bmN0aW9uIGkoYSl7by5jYWxsKHRoaXMsYSl9ZnVuY3Rpb24gaihhLGIpe3ZhciBjPXcoYS5jbG9uZU5vZGUoITEpKTtjLmlubmVySFRNTD1iO2Zvcih2YXIgZCxlPXcoZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpKTtkPWMuZmlyc3RDaGlsZDspZS5hcHBlbmRDaGlsZChkKTtyZXR1cm4geChlKX1mdW5jdGlvbiBrKGIpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBhLnJlbmRlckFsbFBlbmRpbmcoKSx0aGlzLmltcGxbYl19fWZ1bmN0aW9uIGwoYSl7cChpLGEsayhhKSl9ZnVuY3Rpb24gbShiKXtPYmplY3QuZGVmaW5lUHJvcGVydHkoaS5wcm90b3R5cGUsYix7Z2V0OmsoYiksc2V0OmZ1bmN0aW9uKGMpe2EucmVuZGVyQWxsUGVuZGluZygpLHRoaXMuaW1wbFtiXT1jfSxjb25maWd1cmFibGU6ITAsZW51bWVyYWJsZTohMH0pfWZ1bmN0aW9uIG4oYil7T2JqZWN0LmRlZmluZVByb3BlcnR5KGkucHJvdG90eXBlLGIse3ZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIGEucmVuZGVyQWxsUGVuZGluZygpLHRoaXMuaW1wbFtiXS5hcHBseSh0aGlzLmltcGwsYXJndW1lbnRzKX0sY29uZmlndXJhYmxlOiEwLGVudW1lcmFibGU6ITB9KX12YXIgbz1hLndyYXBwZXJzLkVsZW1lbnQscD1hLmRlZmluZUdldHRlcixxPWEuZW5xdWV1ZU11dGF0aW9uLHI9YS5taXhpbixzPWEubm9kZXNXZXJlQWRkZWQsdD1hLm5vZGVzV2VyZVJlbW92ZWQsdT1hLnJlZ2lzdGVyV3JhcHBlcix2PWEuc25hcHNob3ROb2RlTGlzdCx3PWEudW53cmFwLHg9YS53cmFwLHk9YS53cmFwcGVycyx6PS9bJlx1MDBBMCJdL2csQT0vWyZcdTAwQTA8Pl0vZyxCPWUoWyJhcmVhIiwiYmFzZSIsImJyIiwiY29sIiwiY29tbWFuZCIsImVtYmVkIiwiaHIiLCJpbWciLCJpbnB1dCIsImtleWdlbiIsImxpbmsiLCJtZXRhIiwicGFyYW0iLCJzb3VyY2UiLCJ0cmFjayIsIndiciJdKSxDPWUoWyJzdHlsZSIsInNjcmlwdCIsInhtcCIsImlmcmFtZSIsIm5vZW1iZWQiLCJub2ZyYW1lcyIsInBsYWludGV4dCIsIm5vc2NyaXB0Il0pLEQ9L01TSUUvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCksRT13aW5kb3cuSFRNTEVsZW1lbnQsRj13aW5kb3cuSFRNTFRlbXBsYXRlRWxlbWVudDtpLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKG8ucHJvdG90eXBlKSxyKGkucHJvdG90eXBlLHtnZXQgaW5uZXJIVE1MKCl7cmV0dXJuIGcodGhpcyl9LHNldCBpbm5lckhUTUwoYSl7aWYoRCYmQ1t0aGlzLmxvY2FsTmFtZV0pcmV0dXJuIHZvaWQodGhpcy50ZXh0Q29udGVudD1hKTt2YXIgYj12KHRoaXMuY2hpbGROb2Rlcyk7dGhpcy5pbnZhbGlkYXRlU2hhZG93UmVuZGVyZXIoKT90aGlzIGluc3RhbmNlb2YgeS5IVE1MVGVtcGxhdGVFbGVtZW50P2godGhpcy5jb250ZW50LGEpOmgodGhpcyxhLHRoaXMudGFnTmFtZSk6IUYmJnRoaXMgaW5zdGFuY2VvZiB5LkhUTUxUZW1wbGF0ZUVsZW1lbnQ/aCh0aGlzLmNvbnRlbnQsYSk6dGhpcy5pbXBsLmlubmVySFRNTD1hO3ZhciBjPXYodGhpcy5jaGlsZE5vZGVzKTtxKHRoaXMsImNoaWxkTGlzdCIse2FkZGVkTm9kZXM6YyxyZW1vdmVkTm9kZXM6Yn0pLHQoYikscyhjLHRoaXMpfSxnZXQgb3V0ZXJIVE1MKCl7cmV0dXJuIGYodGhpcyx0aGlzLnBhcmVudE5vZGUpfSxzZXQgb3V0ZXJIVE1MKGEpe3ZhciBiPXRoaXMucGFyZW50Tm9kZTtpZihiKXtiLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcigpO3ZhciBjPWooYixhKTtiLnJlcGxhY2VDaGlsZChjLHRoaXMpfX0saW5zZXJ0QWRqYWNlbnRIVE1MOmZ1bmN0aW9uKGEsYil7dmFyIGMsZDtzd2l0Y2goU3RyaW5nKGEpLnRvTG93ZXJDYXNlKCkpe2Nhc2UiYmVmb3JlYmVnaW4iOmM9dGhpcy5wYXJlbnROb2RlLGQ9dGhpczticmVhaztjYXNlImFmdGVyZW5kIjpjPXRoaXMucGFyZW50Tm9kZSxkPXRoaXMubmV4dFNpYmxpbmc7YnJlYWs7Y2FzZSJhZnRlcmJlZ2luIjpjPXRoaXMsZD10aGlzLmZpcnN0Q2hpbGQ7YnJlYWs7Y2FzZSJiZWZvcmVlbmQiOmM9dGhpcyxkPW51bGw7YnJlYWs7ZGVmYXVsdDpyZXR1cm59dmFyIGU9aihjLGIpO2MuaW5zZXJ0QmVmb3JlKGUsZCl9fSksWyJjbGllbnRIZWlnaHQiLCJjbGllbnRMZWZ0IiwiY2xpZW50VG9wIiwiY2xpZW50V2lkdGgiLCJvZmZzZXRIZWlnaHQiLCJvZmZzZXRMZWZ0Iiwib2Zmc2V0VG9wIiwib2Zmc2V0V2lkdGgiLCJzY3JvbGxIZWlnaHQiLCJzY3JvbGxXaWR0aCJdLmZvckVhY2gobCksWyJzY3JvbGxMZWZ0Iiwic2Nyb2xsVG9wIl0uZm9yRWFjaChtKSxbImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsImdldENsaWVudFJlY3RzIiwic2Nyb2xsSW50b1ZpZXciXS5mb3JFYWNoKG4pLHUoRSxpLGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImIiKSksYS53cmFwcGVycy5IVE1MRWxlbWVudD1pLGEuZ2V0SW5uZXJIVE1MPWcsYS5zZXRJbm5lckhUTUw9aH0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtjLmNhbGwodGhpcyxhKX12YXIgYz1hLndyYXBwZXJzLkhUTUxFbGVtZW50LGQ9YS5taXhpbixlPWEucmVnaXN0ZXJXcmFwcGVyLGY9YS53cmFwLGc9d2luZG93LkhUTUxDYW52YXNFbGVtZW50O2IucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYy5wcm90b3R5cGUpLGQoYi5wcm90b3R5cGUse2dldENvbnRleHQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmltcGwuZ2V0Q29udGV4dC5hcHBseSh0aGlzLmltcGwsYXJndW1lbnRzKTtyZXR1cm4gYSYmZihhKX19KSxlKGcsYixkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJjYW52YXMiKSksYS53cmFwcGVycy5IVE1MQ2FudmFzRWxlbWVudD1ifSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe2MuY2FsbCh0aGlzLGEpfXZhciBjPWEud3JhcHBlcnMuSFRNTEVsZW1lbnQsZD1hLm1peGluLGU9YS5yZWdpc3RlcldyYXBwZXIsZj13aW5kb3cuSFRNTENvbnRlbnRFbGVtZW50O2IucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYy5wcm90b3R5cGUpLGQoYi5wcm90b3R5cGUse2dldCBzZWxlY3QoKXtyZXR1cm4gdGhpcy5nZXRBdHRyaWJ1dGUoInNlbGVjdCIpfSxzZXQgc2VsZWN0KGEpe3RoaXMuc2V0QXR0cmlidXRlKCJzZWxlY3QiLGEpfSxzZXRBdHRyaWJ1dGU6ZnVuY3Rpb24oYSxiKXtjLnByb3RvdHlwZS5zZXRBdHRyaWJ1dGUuY2FsbCh0aGlzLGEsYiksInNlbGVjdCI9PT1TdHJpbmcoYSkudG9Mb3dlckNhc2UoKSYmdGhpcy5pbnZhbGlkYXRlU2hhZG93UmVuZGVyZXIoITApfX0pLGYmJmUoZixiKSxhLndyYXBwZXJzLkhUTUxDb250ZW50RWxlbWVudD1ifSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe2MuY2FsbCh0aGlzLGEpfXZhciBjPWEud3JhcHBlcnMuSFRNTEVsZW1lbnQsZD1hLm1peGluLGU9YS5yZWdpc3RlcldyYXBwZXIsZj1hLndyYXBIVE1MQ29sbGVjdGlvbixnPWEudW53cmFwLGg9d2luZG93LkhUTUxGb3JtRWxlbWVudDtiLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGMucHJvdG90eXBlKSxkKGIucHJvdG90eXBlLHtnZXQgZWxlbWVudHMoKXtyZXR1cm4gZihnKHRoaXMpLmVsZW1lbnRzKX19KSxlKGgsYixkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJmb3JtIikpLGEud3JhcHBlcnMuSFRNTEZvcm1FbGVtZW50PWJ9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7ZC5jYWxsKHRoaXMsYSl9ZnVuY3Rpb24gYyhhLGIpe2lmKCEodGhpcyBpbnN0YW5jZW9mIGMpKXRocm93IG5ldyBUeXBlRXJyb3IoIkRPTSBvYmplY3QgY29uc3RydWN0b3IgY2Fubm90IGJlIGNhbGxlZCBhcyBhIGZ1bmN0aW9uLiIpO3ZhciBlPWYoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW1nIikpO2QuY2FsbCh0aGlzLGUpLGcoZSx0aGlzKSx2b2lkIDAhPT1hJiYoZS53aWR0aD1hKSx2b2lkIDAhPT1iJiYoZS5oZWlnaHQ9Yil9dmFyIGQ9YS53cmFwcGVycy5IVE1MRWxlbWVudCxlPWEucmVnaXN0ZXJXcmFwcGVyLGY9YS51bndyYXAsZz1hLnJld3JhcCxoPXdpbmRvdy5IVE1MSW1hZ2VFbGVtZW50O2IucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZC5wcm90b3R5cGUpLGUoaCxiLGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImltZyIpKSxjLnByb3RvdHlwZT1iLnByb3RvdHlwZSxhLndyYXBwZXJzLkhUTUxJbWFnZUVsZW1lbnQ9YixhLndyYXBwZXJzLkltYWdlPWN9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7Yy5jYWxsKHRoaXMsYSl9dmFyIGM9YS53cmFwcGVycy5IVE1MRWxlbWVudCxkPShhLm1peGluLGEud3JhcHBlcnMuTm9kZUxpc3QsYS5yZWdpc3RlcldyYXBwZXIpLGU9d2luZG93LkhUTUxTaGFkb3dFbGVtZW50O2IucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYy5wcm90b3R5cGUpLGUmJmQoZSxiKSxhLndyYXBwZXJzLkhUTUxTaGFkb3dFbGVtZW50PWJ9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7aWYoIWEuZGVmYXVsdFZpZXcpcmV0dXJuIGE7dmFyIGI9ay5nZXQoYSk7aWYoIWIpe2ZvcihiPWEuaW1wbGVtZW50YXRpb24uY3JlYXRlSFRNTERvY3VtZW50KCIiKTtiLmxhc3RDaGlsZDspYi5yZW1vdmVDaGlsZChiLmxhc3RDaGlsZCk7ay5zZXQoYSxiKX1yZXR1cm4gYn1mdW5jdGlvbiBjKGEpe2Zvcih2YXIgYyxkPWIoYS5vd25lckRvY3VtZW50KSxlPWgoZC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCkpO2M9YS5maXJzdENoaWxkOyllLmFwcGVuZENoaWxkKGMpO3JldHVybiBlfWZ1bmN0aW9uIGQoYSl7aWYoZS5jYWxsKHRoaXMsYSksIWwpe3ZhciBiPWMoYSk7ai5zZXQodGhpcyxpKGIpKX19dmFyIGU9YS53cmFwcGVycy5IVE1MRWxlbWVudCxmPWEubWl4aW4sZz1hLnJlZ2lzdGVyV3JhcHBlcixoPWEudW53cmFwLGk9YS53cmFwLGo9bmV3IFdlYWtNYXAsaz1uZXcgV2Vha01hcCxsPXdpbmRvdy5IVE1MVGVtcGxhdGVFbGVtZW50O2QucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZS5wcm90b3R5cGUpLGYoZC5wcm90b3R5cGUse2dldCBjb250ZW50KCl7cmV0dXJuIGw/aSh0aGlzLmltcGwuY29udGVudCk6ai5nZXQodGhpcyl9fSksbCYmZyhsLGQpLGEud3JhcHBlcnMuSFRNTFRlbXBsYXRlRWxlbWVudD1kfSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe2MuY2FsbCh0aGlzLGEpfXZhciBjPWEud3JhcHBlcnMuSFRNTEVsZW1lbnQsZD1hLnJlZ2lzdGVyV3JhcHBlcixlPXdpbmRvdy5IVE1MTWVkaWFFbGVtZW50O2IucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYy5wcm90b3R5cGUpLGQoZSxiLGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImF1ZGlvIikpLGEud3JhcHBlcnMuSFRNTE1lZGlhRWxlbWVudD1ifSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe2QuY2FsbCh0aGlzLGEpfWZ1bmN0aW9uIGMoYSl7aWYoISh0aGlzIGluc3RhbmNlb2YgYykpdGhyb3cgbmV3IFR5cGVFcnJvcigiRE9NIG9iamVjdCBjb25zdHJ1Y3RvciBjYW5ub3QgYmUgY2FsbGVkIGFzIGEgZnVuY3Rpb24uIik7dmFyIGI9Zihkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJhdWRpbyIpKTtkLmNhbGwodGhpcyxiKSxnKGIsdGhpcyksYi5zZXRBdHRyaWJ1dGUoInByZWxvYWQiLCJhdXRvIiksdm9pZCAwIT09YSYmYi5zZXRBdHRyaWJ1dGUoInNyYyIsYSl9dmFyIGQ9YS53cmFwcGVycy5IVE1MTWVkaWFFbGVtZW50LGU9YS5yZWdpc3RlcldyYXBwZXIsZj1hLnVud3JhcCxnPWEucmV3cmFwLGg9d2luZG93LkhUTUxBdWRpb0VsZW1lbnQ7Yi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShkLnByb3RvdHlwZSksZShoLGIsZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYXVkaW8iKSksYy5wcm90b3R5cGU9Yi5wcm90b3R5cGUsYS53cmFwcGVycy5IVE1MQXVkaW9FbGVtZW50PWIsYS53cmFwcGVycy5BdWRpbz1jfSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe3JldHVybiBhLnJlcGxhY2UoL1xzKy9nLCIgIikudHJpbSgpfWZ1bmN0aW9uIGMoYSl7ZS5jYWxsKHRoaXMsYSl9ZnVuY3Rpb24gZChhLGIsYyxmKXtpZighKHRoaXMgaW5zdGFuY2VvZiBkKSl0aHJvdyBuZXcgVHlwZUVycm9yKCJET00gb2JqZWN0IGNvbnN0cnVjdG9yIGNhbm5vdCBiZSBjYWxsZWQgYXMgYSBmdW5jdGlvbi4iKTt2YXIgZz1pKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIm9wdGlvbiIpKTtlLmNhbGwodGhpcyxnKSxoKGcsdGhpcyksdm9pZCAwIT09YSYmKGcudGV4dD1hKSx2b2lkIDAhPT1iJiZnLnNldEF0dHJpYnV0ZSgidmFsdWUiLGIpLGM9PT0hMCYmZy5zZXRBdHRyaWJ1dGUoInNlbGVjdGVkIiwiIiksZy5zZWxlY3RlZD1mPT09ITB9dmFyIGU9YS53cmFwcGVycy5IVE1MRWxlbWVudCxmPWEubWl4aW4sZz1hLnJlZ2lzdGVyV3JhcHBlcixoPWEucmV3cmFwLGk9YS51bndyYXAsaj1hLndyYXAsaz13aW5kb3cuSFRNTE9wdGlvbkVsZW1lbnQ7Yy5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShlLnByb3RvdHlwZSksZihjLnByb3RvdHlwZSx7Z2V0IHRleHQoKXtyZXR1cm4gYih0aGlzLnRleHRDb250ZW50KX0sc2V0IHRleHQoYSl7dGhpcy50ZXh0Q29udGVudD1iKFN0cmluZyhhKSl9LGdldCBmb3JtKCl7cmV0dXJuIGooaSh0aGlzKS5mb3JtKX19KSxnKGssYyxkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJvcHRpb24iKSksZC5wcm90b3R5cGU9Yy5wcm90b3R5cGUsYS53cmFwcGVycy5IVE1MT3B0aW9uRWxlbWVudD1jLGEud3JhcHBlcnMuT3B0aW9uPWR9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7Yy5jYWxsKHRoaXMsYSl9dmFyIGM9YS53cmFwcGVycy5IVE1MRWxlbWVudCxkPWEubWl4aW4sZT1hLnJlZ2lzdGVyV3JhcHBlcixmPWEudW53cmFwLGc9YS53cmFwLGg9d2luZG93LkhUTUxTZWxlY3RFbGVtZW50O2IucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYy5wcm90b3R5cGUpLGQoYi5wcm90b3R5cGUse2FkZDpmdW5jdGlvbihhLGIpeyJvYmplY3QiPT10eXBlb2YgYiYmKGI9ZihiKSksZih0aGlzKS5hZGQoZihhKSxiKX0scmVtb3ZlOmZ1bmN0aW9uKGEpe3JldHVybiB2b2lkIDA9PT1hP3ZvaWQgYy5wcm90b3R5cGUucmVtb3ZlLmNhbGwodGhpcyk6KCJvYmplY3QiPT10eXBlb2YgYSYmKGE9ZihhKSksdm9pZCBmKHRoaXMpLnJlbW92ZShhKSl9LGdldCBmb3JtKCl7cmV0dXJuIGcoZih0aGlzKS5mb3JtKX19KSxlKGgsYixkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzZWxlY3QiKSksYS53cmFwcGVycy5IVE1MU2VsZWN0RWxlbWVudD1ifSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe2MuY2FsbCh0aGlzLGEpfXZhciBjPWEud3JhcHBlcnMuSFRNTEVsZW1lbnQsZD1hLm1peGluLGU9YS5yZWdpc3RlcldyYXBwZXIsZj1hLnVud3JhcCxnPWEud3JhcCxoPWEud3JhcEhUTUxDb2xsZWN0aW9uLGk9d2luZG93LkhUTUxUYWJsZUVsZW1lbnQ7Yi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShjLnByb3RvdHlwZSksZChiLnByb3RvdHlwZSx7Z2V0IGNhcHRpb24oKXtyZXR1cm4gZyhmKHRoaXMpLmNhcHRpb24pfSxjcmVhdGVDYXB0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIGcoZih0aGlzKS5jcmVhdGVDYXB0aW9uKCkpfSxnZXQgdEhlYWQoKXtyZXR1cm4gZyhmKHRoaXMpLnRIZWFkKX0sY3JlYXRlVEhlYWQ6ZnVuY3Rpb24oKXtyZXR1cm4gZyhmKHRoaXMpLmNyZWF0ZVRIZWFkKCkpfSxjcmVhdGVURm9vdDpmdW5jdGlvbigpe3JldHVybiBnKGYodGhpcykuY3JlYXRlVEZvb3QoKSl9LGdldCB0Rm9vdCgpe3JldHVybiBnKGYodGhpcykudEZvb3QpfSxnZXQgdEJvZGllcygpe3JldHVybiBoKGYodGhpcykudEJvZGllcyl9LGNyZWF0ZVRCb2R5OmZ1bmN0aW9uKCl7cmV0dXJuIGcoZih0aGlzKS5jcmVhdGVUQm9keSgpKX0sZ2V0IHJvd3MoKXtyZXR1cm4gaChmKHRoaXMpLnJvd3MpfSxpbnNlcnRSb3c6ZnVuY3Rpb24oYSl7cmV0dXJuIGcoZih0aGlzKS5pbnNlcnRSb3coYSkpfX0pLGUoaSxiLGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInRhYmxlIikpLGEud3JhcHBlcnMuSFRNTFRhYmxlRWxlbWVudD1ifSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe2MuY2FsbCh0aGlzLGEpfXZhciBjPWEud3JhcHBlcnMuSFRNTEVsZW1lbnQsZD1hLm1peGluLGU9YS5yZWdpc3RlcldyYXBwZXIsZj1hLndyYXBIVE1MQ29sbGVjdGlvbixnPWEudW53cmFwLGg9YS53cmFwLGk9d2luZG93LkhUTUxUYWJsZVNlY3Rpb25FbGVtZW50O2IucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYy5wcm90b3R5cGUpLGQoYi5wcm90b3R5cGUse2dldCByb3dzKCl7cmV0dXJuIGYoZyh0aGlzKS5yb3dzKX0saW5zZXJ0Um93OmZ1bmN0aW9uKGEpe3JldHVybiBoKGcodGhpcykuaW5zZXJ0Um93KGEpKX19KSxlKGksYixkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0aGVhZCIpKSxhLndyYXBwZXJzLkhUTUxUYWJsZVNlY3Rpb25FbGVtZW50PWJ9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7Yy5jYWxsKHRoaXMsYSl9dmFyIGM9YS53cmFwcGVycy5IVE1MRWxlbWVudCxkPWEubWl4aW4sZT1hLnJlZ2lzdGVyV3JhcHBlcixmPWEud3JhcEhUTUxDb2xsZWN0aW9uLGc9YS51bndyYXAsaD1hLndyYXAsaT13aW5kb3cuSFRNTFRhYmxlUm93RWxlbWVudDtiLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGMucHJvdG90eXBlKSxkKGIucHJvdG90eXBlLHtnZXQgY2VsbHMoKXtyZXR1cm4gZihnKHRoaXMpLmNlbGxzKX0saW5zZXJ0Q2VsbDpmdW5jdGlvbihhKXtyZXR1cm4gaChnKHRoaXMpLmluc2VydENlbGwoYSkpfX0pLGUoaSxiLGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInRyIikpLGEud3JhcHBlcnMuSFRNTFRhYmxlUm93RWxlbWVudD1ifSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe3N3aXRjaChhLmxvY2FsTmFtZSl7Y2FzZSJjb250ZW50IjpyZXR1cm4gbmV3IGMoYSk7Y2FzZSJzaGFkb3ciOnJldHVybiBuZXcgZShhKTtjYXNlInRlbXBsYXRlIjpyZXR1cm4gbmV3IGYoYSl9ZC5jYWxsKHRoaXMsYSl9dmFyIGM9YS53cmFwcGVycy5IVE1MQ29udGVudEVsZW1lbnQsZD1hLndyYXBwZXJzLkhUTUxFbGVtZW50LGU9YS53cmFwcGVycy5IVE1MU2hhZG93RWxlbWVudCxmPWEud3JhcHBlcnMuSFRNTFRlbXBsYXRlRWxlbWVudCxnPShhLm1peGluLGEucmVnaXN0ZXJXcmFwcGVyKSxoPXdpbmRvdy5IVE1MVW5rbm93bkVsZW1lbnQ7Yi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShkLnByb3RvdHlwZSksZyhoLGIpLGEud3JhcHBlcnMuSFRNTFVua25vd25FbGVtZW50PWJ9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO3ZhciBiPWEud3JhcHBlcnMuRWxlbWVudCxjPWEud3JhcHBlcnMuSFRNTEVsZW1lbnQsZD1hLnJlZ2lzdGVyT2JqZWN0LGU9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIixmPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhlLCJ0aXRsZSIpLGc9ZChmKSxoPU9iamVjdC5nZXRQcm90b3R5cGVPZihnLnByb3RvdHlwZSkuY29uc3RydWN0b3I7aWYoISgiY2xhc3NMaXN0ImluIGYpKXt2YXIgaT1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGIucHJvdG90eXBlLCJjbGFzc0xpc3QiKTtPYmplY3QuZGVmaW5lUHJvcGVydHkoYy5wcm90b3R5cGUsImNsYXNzTGlzdCIsaSksZGVsZXRlIGIucHJvdG90eXBlLmNsYXNzTGlzdAp9YS53cmFwcGVycy5TVkdFbGVtZW50PWh9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7bS5jYWxsKHRoaXMsYSl9dmFyIGM9YS5taXhpbixkPWEucmVnaXN0ZXJXcmFwcGVyLGU9YS51bndyYXAsZj1hLndyYXAsZz13aW5kb3cuU1ZHVXNlRWxlbWVudCxoPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIsaT1mKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhoLCJnIikpLGo9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKGgsInVzZSIpLGs9aS5jb25zdHJ1Y3RvcixsPU9iamVjdC5nZXRQcm90b3R5cGVPZihrLnByb3RvdHlwZSksbT1sLmNvbnN0cnVjdG9yO2IucHJvdG90eXBlPU9iamVjdC5jcmVhdGUobCksImluc3RhbmNlUm9vdCJpbiBqJiZjKGIucHJvdG90eXBlLHtnZXQgaW5zdGFuY2VSb290KCl7cmV0dXJuIGYoZSh0aGlzKS5pbnN0YW5jZVJvb3QpfSxnZXQgYW5pbWF0ZWRJbnN0YW5jZVJvb3QoKXtyZXR1cm4gZihlKHRoaXMpLmFuaW1hdGVkSW5zdGFuY2VSb290KX19KSxkKGcsYixqKSxhLndyYXBwZXJzLlNWR1VzZUVsZW1lbnQ9Yn0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtjLmNhbGwodGhpcyxhKX12YXIgYz1hLndyYXBwZXJzLkV2ZW50VGFyZ2V0LGQ9YS5taXhpbixlPWEucmVnaXN0ZXJXcmFwcGVyLGY9YS53cmFwLGc9d2luZG93LlNWR0VsZW1lbnRJbnN0YW5jZTtnJiYoYi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShjLnByb3RvdHlwZSksZChiLnByb3RvdHlwZSx7Z2V0IGNvcnJlc3BvbmRpbmdFbGVtZW50KCl7cmV0dXJuIGYodGhpcy5pbXBsLmNvcnJlc3BvbmRpbmdFbGVtZW50KX0sZ2V0IGNvcnJlc3BvbmRpbmdVc2VFbGVtZW50KCl7cmV0dXJuIGYodGhpcy5pbXBsLmNvcnJlc3BvbmRpbmdVc2VFbGVtZW50KX0sZ2V0IHBhcmVudE5vZGUoKXtyZXR1cm4gZih0aGlzLmltcGwucGFyZW50Tm9kZSl9LGdldCBjaGlsZE5vZGVzKCl7dGhyb3cgbmV3IEVycm9yKCJOb3QgaW1wbGVtZW50ZWQiKX0sZ2V0IGZpcnN0Q2hpbGQoKXtyZXR1cm4gZih0aGlzLmltcGwuZmlyc3RDaGlsZCl9LGdldCBsYXN0Q2hpbGQoKXtyZXR1cm4gZih0aGlzLmltcGwubGFzdENoaWxkKX0sZ2V0IHByZXZpb3VzU2libGluZygpe3JldHVybiBmKHRoaXMuaW1wbC5wcmV2aW91c1NpYmxpbmcpfSxnZXQgbmV4dFNpYmxpbmcoKXtyZXR1cm4gZih0aGlzLmltcGwubmV4dFNpYmxpbmcpfX0pLGUoZyxiKSxhLndyYXBwZXJzLlNWR0VsZW1lbnRJbnN0YW5jZT1iKX0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXt0aGlzLmltcGw9YX12YXIgYz1hLm1peGluLGQ9YS5yZWdpc3RlcldyYXBwZXIsZT1hLnVud3JhcCxmPWEudW53cmFwSWZOZWVkZWQsZz1hLndyYXAsaD13aW5kb3cuQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEO2MoYi5wcm90b3R5cGUse2dldCBjYW52YXMoKXtyZXR1cm4gZyh0aGlzLmltcGwuY2FudmFzKX0sZHJhd0ltYWdlOmZ1bmN0aW9uKCl7YXJndW1lbnRzWzBdPWYoYXJndW1lbnRzWzBdKSx0aGlzLmltcGwuZHJhd0ltYWdlLmFwcGx5KHRoaXMuaW1wbCxhcmd1bWVudHMpfSxjcmVhdGVQYXR0ZXJuOmZ1bmN0aW9uKCl7cmV0dXJuIGFyZ3VtZW50c1swXT1lKGFyZ3VtZW50c1swXSksdGhpcy5pbXBsLmNyZWF0ZVBhdHRlcm4uYXBwbHkodGhpcy5pbXBsLGFyZ3VtZW50cyl9fSksZChoLGIsZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiY2FudmFzIikuZ2V0Q29udGV4dCgiMmQiKSksYS53cmFwcGVycy5DYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ9Yn0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXt0aGlzLmltcGw9YX12YXIgYz1hLm1peGluLGQ9YS5yZWdpc3RlcldyYXBwZXIsZT1hLnVud3JhcElmTmVlZGVkLGY9YS53cmFwLGc9d2luZG93LldlYkdMUmVuZGVyaW5nQ29udGV4dDtpZihnKXtjKGIucHJvdG90eXBlLHtnZXQgY2FudmFzKCl7cmV0dXJuIGYodGhpcy5pbXBsLmNhbnZhcyl9LHRleEltYWdlMkQ6ZnVuY3Rpb24oKXthcmd1bWVudHNbNV09ZShhcmd1bWVudHNbNV0pLHRoaXMuaW1wbC50ZXhJbWFnZTJELmFwcGx5KHRoaXMuaW1wbCxhcmd1bWVudHMpfSx0ZXhTdWJJbWFnZTJEOmZ1bmN0aW9uKCl7YXJndW1lbnRzWzZdPWUoYXJndW1lbnRzWzZdKSx0aGlzLmltcGwudGV4U3ViSW1hZ2UyRC5hcHBseSh0aGlzLmltcGwsYXJndW1lbnRzKX19KTt2YXIgaD0vV2ViS2l0Ly50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpP3tkcmF3aW5nQnVmZmVySGVpZ2h0Om51bGwsZHJhd2luZ0J1ZmZlcldpZHRoOm51bGx9Ont9O2QoZyxiLGgpLGEud3JhcHBlcnMuV2ViR0xSZW5kZXJpbmdDb250ZXh0PWJ9fSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe3RoaXMuaW1wbD1hfXZhciBjPWEucmVnaXN0ZXJXcmFwcGVyLGQ9YS51bndyYXAsZT1hLnVud3JhcElmTmVlZGVkLGY9YS53cmFwLGc9d2luZG93LlJhbmdlO2IucHJvdG90eXBlPXtnZXQgc3RhcnRDb250YWluZXIoKXtyZXR1cm4gZih0aGlzLmltcGwuc3RhcnRDb250YWluZXIpfSxnZXQgZW5kQ29udGFpbmVyKCl7cmV0dXJuIGYodGhpcy5pbXBsLmVuZENvbnRhaW5lcil9LGdldCBjb21tb25BbmNlc3RvckNvbnRhaW5lcigpe3JldHVybiBmKHRoaXMuaW1wbC5jb21tb25BbmNlc3RvckNvbnRhaW5lcil9LHNldFN0YXJ0OmZ1bmN0aW9uKGEsYil7dGhpcy5pbXBsLnNldFN0YXJ0KGUoYSksYil9LHNldEVuZDpmdW5jdGlvbihhLGIpe3RoaXMuaW1wbC5zZXRFbmQoZShhKSxiKX0sc2V0U3RhcnRCZWZvcmU6ZnVuY3Rpb24oYSl7dGhpcy5pbXBsLnNldFN0YXJ0QmVmb3JlKGUoYSkpfSxzZXRTdGFydEFmdGVyOmZ1bmN0aW9uKGEpe3RoaXMuaW1wbC5zZXRTdGFydEFmdGVyKGUoYSkpfSxzZXRFbmRCZWZvcmU6ZnVuY3Rpb24oYSl7dGhpcy5pbXBsLnNldEVuZEJlZm9yZShlKGEpKX0sc2V0RW5kQWZ0ZXI6ZnVuY3Rpb24oYSl7dGhpcy5pbXBsLnNldEVuZEFmdGVyKGUoYSkpfSxzZWxlY3ROb2RlOmZ1bmN0aW9uKGEpe3RoaXMuaW1wbC5zZWxlY3ROb2RlKGUoYSkpfSxzZWxlY3ROb2RlQ29udGVudHM6ZnVuY3Rpb24oYSl7dGhpcy5pbXBsLnNlbGVjdE5vZGVDb250ZW50cyhlKGEpKX0sY29tcGFyZUJvdW5kYXJ5UG9pbnRzOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuaW1wbC5jb21wYXJlQm91bmRhcnlQb2ludHMoYSxkKGIpKX0sZXh0cmFjdENvbnRlbnRzOmZ1bmN0aW9uKCl7cmV0dXJuIGYodGhpcy5pbXBsLmV4dHJhY3RDb250ZW50cygpKX0sY2xvbmVDb250ZW50czpmdW5jdGlvbigpe3JldHVybiBmKHRoaXMuaW1wbC5jbG9uZUNvbnRlbnRzKCkpfSxpbnNlcnROb2RlOmZ1bmN0aW9uKGEpe3RoaXMuaW1wbC5pbnNlcnROb2RlKGUoYSkpfSxzdXJyb3VuZENvbnRlbnRzOmZ1bmN0aW9uKGEpe3RoaXMuaW1wbC5zdXJyb3VuZENvbnRlbnRzKGUoYSkpfSxjbG9uZVJhbmdlOmZ1bmN0aW9uKCl7cmV0dXJuIGYodGhpcy5pbXBsLmNsb25lUmFuZ2UoKSl9LGlzUG9pbnRJblJhbmdlOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuaW1wbC5pc1BvaW50SW5SYW5nZShlKGEpLGIpfSxjb21wYXJlUG9pbnQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5pbXBsLmNvbXBhcmVQb2ludChlKGEpLGIpfSxpbnRlcnNlY3RzTm9kZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5pbXBsLmludGVyc2VjdHNOb2RlKGUoYSkpfSx0b1N0cmluZzpmdW5jdGlvbigpe3JldHVybiB0aGlzLmltcGwudG9TdHJpbmcoKX19LGcucHJvdG90eXBlLmNyZWF0ZUNvbnRleHR1YWxGcmFnbWVudCYmKGIucHJvdG90eXBlLmNyZWF0ZUNvbnRleHR1YWxGcmFnbWVudD1mdW5jdGlvbihhKXtyZXR1cm4gZih0aGlzLmltcGwuY3JlYXRlQ29udGV4dHVhbEZyYWdtZW50KGEpKX0pLGMod2luZG93LlJhbmdlLGIsZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKSksYS53cmFwcGVycy5SYW5nZT1ifSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0Ijt2YXIgYj1hLkdldEVsZW1lbnRzQnlJbnRlcmZhY2UsYz1hLlBhcmVudE5vZGVJbnRlcmZhY2UsZD1hLlNlbGVjdG9yc0ludGVyZmFjZSxlPWEubWl4aW4sZj1hLnJlZ2lzdGVyT2JqZWN0LGc9Zihkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCkpO2UoZy5wcm90b3R5cGUsYyksZShnLnByb3RvdHlwZSxkKSxlKGcucHJvdG90eXBlLGIpO3ZhciBoPWYoZG9jdW1lbnQuY3JlYXRlQ29tbWVudCgiIikpO2Eud3JhcHBlcnMuQ29tbWVudD1oLGEud3JhcHBlcnMuRG9jdW1lbnRGcmFnbWVudD1nfSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe3ZhciBiPWsoYS5pbXBsLm93bmVyRG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpKTtjLmNhbGwodGhpcyxiKSxpKGIsdGhpcyk7dmFyIGU9YS5zaGFkb3dSb290O20uc2V0KHRoaXMsZSksdGhpcy50cmVlU2NvcGVfPW5ldyBkKHRoaXMsZyhlfHxhKSksbC5zZXQodGhpcyxhKX12YXIgYz1hLndyYXBwZXJzLkRvY3VtZW50RnJhZ21lbnQsZD1hLlRyZWVTY29wZSxlPWEuZWxlbWVudEZyb21Qb2ludCxmPWEuZ2V0SW5uZXJIVE1MLGc9YS5nZXRUcmVlU2NvcGUsaD1hLm1peGluLGk9YS5yZXdyYXAsaj1hLnNldElubmVySFRNTCxrPWEudW53cmFwLGw9bmV3IFdlYWtNYXAsbT1uZXcgV2Vha01hcCxuPS9bIFx0XG5cclxmXS87Yi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShjLnByb3RvdHlwZSksaChiLnByb3RvdHlwZSx7Z2V0IGlubmVySFRNTCgpe3JldHVybiBmKHRoaXMpfSxzZXQgaW5uZXJIVE1MKGEpe2oodGhpcyxhKSx0aGlzLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcigpfSxnZXQgb2xkZXJTaGFkb3dSb290KCl7cmV0dXJuIG0uZ2V0KHRoaXMpfHxudWxsfSxnZXQgaG9zdCgpe3JldHVybiBsLmdldCh0aGlzKXx8bnVsbH0saW52YWxpZGF0ZVNoYWRvd1JlbmRlcmVyOmZ1bmN0aW9uKCl7cmV0dXJuIGwuZ2V0KHRoaXMpLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcigpfSxlbGVtZW50RnJvbVBvaW50OmZ1bmN0aW9uKGEsYil7cmV0dXJuIGUodGhpcyx0aGlzLm93bmVyRG9jdW1lbnQsYSxiKX0sZ2V0RWxlbWVudEJ5SWQ6ZnVuY3Rpb24oYSl7cmV0dXJuIG4udGVzdChhKT9udWxsOnRoaXMucXVlcnlTZWxlY3RvcignW2lkPSInK2ErJyJdJyl9fSksYS53cmFwcGVycy5TaGFkb3dSb290PWJ9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7YS5wcmV2aW91c1NpYmxpbmdfPWEucHJldmlvdXNTaWJsaW5nLGEubmV4dFNpYmxpbmdfPWEubmV4dFNpYmxpbmcsYS5wYXJlbnROb2RlXz1hLnBhcmVudE5vZGV9ZnVuY3Rpb24gYyhhLGMsZSl7dmFyIGY9RyhhKSxnPUcoYyksaD1lP0coZSk6bnVsbDtpZihkKGMpLGIoYyksZSlhLmZpcnN0Q2hpbGQ9PT1lJiYoYS5maXJzdENoaWxkXz1lKSxlLnByZXZpb3VzU2libGluZ189ZS5wcmV2aW91c1NpYmxpbmc7ZWxzZXthLmxhc3RDaGlsZF89YS5sYXN0Q2hpbGQsYS5sYXN0Q2hpbGQ9PT1hLmZpcnN0Q2hpbGQmJihhLmZpcnN0Q2hpbGRfPWEuZmlyc3RDaGlsZCk7dmFyIGk9SChmLmxhc3RDaGlsZCk7aSYmKGkubmV4dFNpYmxpbmdfPWkubmV4dFNpYmxpbmcpfWYuaW5zZXJ0QmVmb3JlKGcsaCl9ZnVuY3Rpb24gZChhKXt2YXIgYz1HKGEpLGQ9Yy5wYXJlbnROb2RlO2lmKGQpe3ZhciBlPUgoZCk7YihhKSxhLnByZXZpb3VzU2libGluZyYmKGEucHJldmlvdXNTaWJsaW5nLm5leHRTaWJsaW5nXz1hKSxhLm5leHRTaWJsaW5nJiYoYS5uZXh0U2libGluZy5wcmV2aW91c1NpYmxpbmdfPWEpLGUubGFzdENoaWxkPT09YSYmKGUubGFzdENoaWxkXz1hKSxlLmZpcnN0Q2hpbGQ9PT1hJiYoZS5maXJzdENoaWxkXz1hKSxkLnJlbW92ZUNoaWxkKGMpfX1mdW5jdGlvbiBlKGEpe0kuc2V0KGEsW10pfWZ1bmN0aW9uIGYoYSl7dmFyIGI9SS5nZXQoYSk7cmV0dXJuIGJ8fEkuc2V0KGEsYj1bXSksYn1mdW5jdGlvbiBnKGEpe2Zvcih2YXIgYj1bXSxjPTAsZD1hLmZpcnN0Q2hpbGQ7ZDtkPWQubmV4dFNpYmxpbmcpYltjKytdPWQ7cmV0dXJuIGJ9ZnVuY3Rpb24gaCgpe2Zvcih2YXIgYT0wO2E8TS5sZW5ndGg7YSsrKXt2YXIgYj1NW2FdLGM9Yi5wYXJlbnRSZW5kZXJlcjtjJiZjLmRpcnR5fHxiLnJlbmRlcigpfU09W119ZnVuY3Rpb24gaSgpe3k9bnVsbCxoKCl9ZnVuY3Rpb24gaihhKXt2YXIgYj1LLmdldChhKTtyZXR1cm4gYnx8KGI9bmV3IG4oYSksSy5zZXQoYSxiKSksYn1mdW5jdGlvbiBrKGEpe3ZhciBiPUUoYSkucm9vdDtyZXR1cm4gYiBpbnN0YW5jZW9mIEQ/YjpudWxsfWZ1bmN0aW9uIGwoYSl7cmV0dXJuIGooYS5ob3N0KX1mdW5jdGlvbiBtKGEpe3RoaXMuc2tpcD0hMSx0aGlzLm5vZGU9YSx0aGlzLmNoaWxkTm9kZXM9W119ZnVuY3Rpb24gbihhKXt0aGlzLmhvc3Q9YSx0aGlzLmRpcnR5PSExLHRoaXMuaW52YWxpZGF0ZUF0dHJpYnV0ZXMoKSx0aGlzLmFzc29jaWF0ZU5vZGUoYSl9ZnVuY3Rpb24gbyhhKXtmb3IodmFyIGI9W10sYz1hLmZpcnN0Q2hpbGQ7YztjPWMubmV4dFNpYmxpbmcpdihjKT9iLnB1c2guYXBwbHkoYixmKGMpKTpiLnB1c2goYyk7cmV0dXJuIGJ9ZnVuY3Rpb24gcChhKXtpZihhIGluc3RhbmNlb2YgQilyZXR1cm4gYTtpZihhIGluc3RhbmNlb2YgQSlyZXR1cm4gbnVsbDtmb3IodmFyIGI9YS5maXJzdENoaWxkO2I7Yj1iLm5leHRTaWJsaW5nKXt2YXIgYz1wKGIpO2lmKGMpcmV0dXJuIGN9cmV0dXJuIG51bGx9ZnVuY3Rpb24gcShhLGIpe2YoYikucHVzaChhKTt2YXIgYz1KLmdldChhKTtjP2MucHVzaChiKTpKLnNldChhLFtiXSl9ZnVuY3Rpb24gcihhKXtyZXR1cm4gSi5nZXQoYSl9ZnVuY3Rpb24gcyhhKXtKLnNldChhLHZvaWQgMCl9ZnVuY3Rpb24gdChhLGIpe3ZhciBjPWIuZ2V0QXR0cmlidXRlKCJzZWxlY3QiKTtpZighYylyZXR1cm4hMDtpZihjPWMudHJpbSgpLCFjKXJldHVybiEwO2lmKCEoYSBpbnN0YW5jZW9mIHopKXJldHVybiExO2lmKCFPLnRlc3QoYykpcmV0dXJuITE7dHJ5e3JldHVybiBhLm1hdGNoZXMoYyl9Y2F0Y2goZCl7cmV0dXJuITF9fWZ1bmN0aW9uIHUoYSxiKXt2YXIgYz1yKGIpO3JldHVybiBjJiZjW2MubGVuZ3RoLTFdPT09YX1mdW5jdGlvbiB2KGEpe3JldHVybiBhIGluc3RhbmNlb2YgQXx8YSBpbnN0YW5jZW9mIEJ9ZnVuY3Rpb24gdyhhKXtyZXR1cm4gYS5zaGFkb3dSb290fWZ1bmN0aW9uIHgoYSl7Zm9yKHZhciBiPVtdLGM9YS5zaGFkb3dSb290O2M7Yz1jLm9sZGVyU2hhZG93Um9vdCliLnB1c2goYyk7cmV0dXJuIGJ9dmFyIHksej1hLndyYXBwZXJzLkVsZW1lbnQsQT1hLndyYXBwZXJzLkhUTUxDb250ZW50RWxlbWVudCxCPWEud3JhcHBlcnMuSFRNTFNoYWRvd0VsZW1lbnQsQz1hLndyYXBwZXJzLk5vZGUsRD1hLndyYXBwZXJzLlNoYWRvd1Jvb3QsRT0oYS5hc3NlcnQsYS5nZXRUcmVlU2NvcGUpLEY9KGEubWl4aW4sYS5vbmVPZiksRz1hLnVud3JhcCxIPWEud3JhcCxJPW5ldyBXZWFrTWFwLEo9bmV3IFdlYWtNYXAsSz1uZXcgV2Vha01hcCxMPUYod2luZG93LFsicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwibW96UmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwid2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwic2V0VGltZW91dCJdKSxNPVtdLE49bmV3IEFycmF5U3BsaWNlO04uZXF1YWxzPWZ1bmN0aW9uKGEsYil7cmV0dXJuIEcoYS5ub2RlKT09PWJ9LG0ucHJvdG90eXBlPXthcHBlbmQ6ZnVuY3Rpb24oYSl7dmFyIGI9bmV3IG0oYSk7cmV0dXJuIHRoaXMuY2hpbGROb2Rlcy5wdXNoKGIpLGJ9LHN5bmM6ZnVuY3Rpb24oYSl7aWYoIXRoaXMuc2tpcCl7Zm9yKHZhciBiPXRoaXMubm9kZSxlPXRoaXMuY2hpbGROb2RlcyxmPWcoRyhiKSksaD1hfHxuZXcgV2Vha01hcCxpPU4uY2FsY3VsYXRlU3BsaWNlcyhlLGYpLGo9MCxrPTAsbD0wLG09MDttPGkubGVuZ3RoO20rKyl7Zm9yKHZhciBuPWlbbV07bDxuLmluZGV4O2wrKylrKyssZVtqKytdLnN5bmMoaCk7Zm9yKHZhciBvPW4ucmVtb3ZlZC5sZW5ndGgscD0wO28+cDtwKyspe3ZhciBxPUgoZltrKytdKTtoLmdldChxKXx8ZChxKX1mb3IodmFyIHI9bi5hZGRlZENvdW50LHM9ZltrXSYmSChmW2tdKSxwPTA7cj5wO3ArKyl7dmFyIHQ9ZVtqKytdLHU9dC5ub2RlO2MoYix1LHMpLGguc2V0KHUsITApLHQuc3luYyhoKX1sKz1yfWZvcih2YXIgbT1sO208ZS5sZW5ndGg7bSsrKWVbbV0uc3luYyhoKX19fSxuLnByb3RvdHlwZT17cmVuZGVyOmZ1bmN0aW9uKGEpe2lmKHRoaXMuZGlydHkpe3RoaXMuaW52YWxpZGF0ZUF0dHJpYnV0ZXMoKTt2YXIgYj10aGlzLmhvc3Q7dGhpcy5kaXN0cmlidXRpb24oYik7dmFyIGM9YXx8bmV3IG0oYik7dGhpcy5idWlsZFJlbmRlclRyZWUoYyxiKTt2YXIgZD0hYTtkJiZjLnN5bmMoKSx0aGlzLmRpcnR5PSExfX0sZ2V0IHBhcmVudFJlbmRlcmVyKCl7cmV0dXJuIEUodGhpcy5ob3N0KS5yZW5kZXJlcn0saW52YWxpZGF0ZTpmdW5jdGlvbigpe2lmKCF0aGlzLmRpcnR5KXt0aGlzLmRpcnR5PSEwO3ZhciBhPXRoaXMucGFyZW50UmVuZGVyZXI7aWYoYSYmYS5pbnZhbGlkYXRlKCksTS5wdXNoKHRoaXMpLHkpcmV0dXJuO3k9d2luZG93W0xdKGksMCl9fSxkaXN0cmlidXRpb246ZnVuY3Rpb24oYSl7dGhpcy5yZXNldEFsbChhKSx0aGlzLmRpc3RyaWJ1dGlvblJlc29sdXRpb24oYSl9LHJlc2V0QWxsOmZ1bmN0aW9uKGEpe3YoYSk/ZShhKTpzKGEpO2Zvcih2YXIgYj1hLmZpcnN0Q2hpbGQ7YjtiPWIubmV4dFNpYmxpbmcpdGhpcy5yZXNldEFsbChiKTthLnNoYWRvd1Jvb3QmJnRoaXMucmVzZXRBbGwoYS5zaGFkb3dSb290KSxhLm9sZGVyU2hhZG93Um9vdCYmdGhpcy5yZXNldEFsbChhLm9sZGVyU2hhZG93Um9vdCl9LGRpc3RyaWJ1dGlvblJlc29sdXRpb246ZnVuY3Rpb24oYSl7aWYodyhhKSl7Zm9yKHZhciBiPWEsYz1vKGIpLGQ9eChiKSxlPTA7ZTxkLmxlbmd0aDtlKyspdGhpcy5wb29sRGlzdHJpYnV0aW9uKGRbZV0sYyk7Zm9yKHZhciBlPWQubGVuZ3RoLTE7ZT49MDtlLS0pe3ZhciBmPWRbZV0sZz1wKGYpO2lmKGcpe3ZhciBoPWYub2xkZXJTaGFkb3dSb290O2gmJihjPW8oaCkpO2Zvcih2YXIgaT0wO2k8Yy5sZW5ndGg7aSsrKXEoY1tpXSxnKX10aGlzLmRpc3RyaWJ1dGlvblJlc29sdXRpb24oZil9fWZvcih2YXIgaj1hLmZpcnN0Q2hpbGQ7ajtqPWoubmV4dFNpYmxpbmcpdGhpcy5kaXN0cmlidXRpb25SZXNvbHV0aW9uKGopfSxwb29sRGlzdHJpYnV0aW9uOmZ1bmN0aW9uKGEsYil7aWYoIShhIGluc3RhbmNlb2YgQikpaWYoYSBpbnN0YW5jZW9mIEEpe3ZhciBjPWE7dGhpcy51cGRhdGVEZXBlbmRlbnRBdHRyaWJ1dGVzKGMuZ2V0QXR0cmlidXRlKCJzZWxlY3QiKSk7Zm9yKHZhciBkPSExLGU9MDtlPGIubGVuZ3RoO2UrKyl7dmFyIGE9YltlXTthJiZ0KGEsYykmJihxKGEsYyksYltlXT12b2lkIDAsZD0hMCl9aWYoIWQpZm9yKHZhciBmPWMuZmlyc3RDaGlsZDtmO2Y9Zi5uZXh0U2libGluZylxKGYsYyl9ZWxzZSBmb3IodmFyIGY9YS5maXJzdENoaWxkO2Y7Zj1mLm5leHRTaWJsaW5nKXRoaXMucG9vbERpc3RyaWJ1dGlvbihmLGIpfSxidWlsZFJlbmRlclRyZWU6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9dGhpcy5jb21wb3NlKGIpLGQ9MDtkPGMubGVuZ3RoO2QrKyl7dmFyIGU9Y1tkXSxmPWEuYXBwZW5kKGUpO3RoaXMuYnVpbGRSZW5kZXJUcmVlKGYsZSl9aWYodyhiKSl7dmFyIGc9aihiKTtnLmRpcnR5PSExfX0sY29tcG9zZTpmdW5jdGlvbihhKXtmb3IodmFyIGI9W10sYz1hLnNoYWRvd1Jvb3R8fGEsZD1jLmZpcnN0Q2hpbGQ7ZDtkPWQubmV4dFNpYmxpbmcpaWYodihkKSl7dGhpcy5hc3NvY2lhdGVOb2RlKGMpO2Zvcih2YXIgZT1mKGQpLGc9MDtnPGUubGVuZ3RoO2crKyl7dmFyIGg9ZVtnXTt1KGQsaCkmJmIucHVzaChoKX19ZWxzZSBiLnB1c2goZCk7cmV0dXJuIGJ9LGludmFsaWRhdGVBdHRyaWJ1dGVzOmZ1bmN0aW9uKCl7dGhpcy5hdHRyaWJ1dGVzPU9iamVjdC5jcmVhdGUobnVsbCl9LHVwZGF0ZURlcGVuZGVudEF0dHJpYnV0ZXM6ZnVuY3Rpb24oYSl7aWYoYSl7dmFyIGI9dGhpcy5hdHRyaWJ1dGVzOy9cLlx3Ky8udGVzdChhKSYmKGJbImNsYXNzIl09ITApLC8jXHcrLy50ZXN0KGEpJiYoYi5pZD0hMCksYS5yZXBsYWNlKC9cW1xzKihbXlxzPVx8flxdXSspL2csZnVuY3Rpb24oYSxjKXtiW2NdPSEwfSl9fSxkZXBlbmRzT25BdHRyaWJ1dGU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuYXR0cmlidXRlc1thXX0sYXNzb2NpYXRlTm9kZTpmdW5jdGlvbihhKXthLmltcGwucG9seW1lclNoYWRvd1JlbmRlcmVyXz10aGlzfX07dmFyIE89L15bKi4jW2EtekEtWl98XS87Qy5wcm90b3R5cGUuaW52YWxpZGF0ZVNoYWRvd1JlbmRlcmVyPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5pbXBsLnBvbHltZXJTaGFkb3dSZW5kZXJlcl87cmV0dXJuIGE/KGEuaW52YWxpZGF0ZSgpLCEwKTohMX0sQS5wcm90b3R5cGUuZ2V0RGlzdHJpYnV0ZWROb2Rlcz1CLnByb3RvdHlwZS5nZXREaXN0cmlidXRlZE5vZGVzPWZ1bmN0aW9uKCl7cmV0dXJuIGgoKSxmKHRoaXMpfSx6LnByb3RvdHlwZS5nZXREZXN0aW5hdGlvbkluc2VydGlvblBvaW50cz1mdW5jdGlvbigpe3JldHVybiBoKCkscih0aGlzKXx8W119LEEucHJvdG90eXBlLm5vZGVJc0luc2VydGVkXz1CLnByb3RvdHlwZS5ub2RlSXNJbnNlcnRlZF89ZnVuY3Rpb24oKXt0aGlzLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcigpO3ZhciBhLGI9ayh0aGlzKTtiJiYoYT1sKGIpKSx0aGlzLmltcGwucG9seW1lclNoYWRvd1JlbmRlcmVyXz1hLGEmJmEuaW52YWxpZGF0ZSgpfSxhLmdldFJlbmRlcmVyRm9ySG9zdD1qLGEuZ2V0U2hhZG93VHJlZXM9eCxhLnJlbmRlckFsbFBlbmRpbmc9aCxhLmdldERlc3RpbmF0aW9uSW5zZXJ0aW9uUG9pbnRzPXIsYS52aXN1YWw9e2luc2VydEJlZm9yZTpjLHJlbW92ZTpkfX0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihiKXtpZih3aW5kb3dbYl0pe2QoIWEud3JhcHBlcnNbYl0pO3ZhciBpPWZ1bmN0aW9uKGEpe2MuY2FsbCh0aGlzLGEpfTtpLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGMucHJvdG90eXBlKSxlKGkucHJvdG90eXBlLHtnZXQgZm9ybSgpe3JldHVybiBoKGcodGhpcykuZm9ybSl9fSksZih3aW5kb3dbYl0saSxkb2N1bWVudC5jcmVhdGVFbGVtZW50KGIuc2xpY2UoNCwtNykpKSxhLndyYXBwZXJzW2JdPWl9fXZhciBjPWEud3JhcHBlcnMuSFRNTEVsZW1lbnQsZD1hLmFzc2VydCxlPWEubWl4aW4sZj1hLnJlZ2lzdGVyV3JhcHBlcixnPWEudW53cmFwLGg9YS53cmFwLGk9WyJIVE1MQnV0dG9uRWxlbWVudCIsIkhUTUxGaWVsZFNldEVsZW1lbnQiLCJIVE1MSW5wdXRFbGVtZW50IiwiSFRNTEtleWdlbkVsZW1lbnQiLCJIVE1MTGFiZWxFbGVtZW50IiwiSFRNTExlZ2VuZEVsZW1lbnQiLCJIVE1MT2JqZWN0RWxlbWVudCIsIkhUTUxPdXRwdXRFbGVtZW50IiwiSFRNTFRleHRBcmVhRWxlbWVudCJdO2kuZm9yRWFjaChiKX0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXt0aGlzLmltcGw9YX17dmFyIGM9YS5yZWdpc3RlcldyYXBwZXIsZD1hLnVud3JhcCxlPWEudW53cmFwSWZOZWVkZWQsZj1hLndyYXA7d2luZG93LlNlbGVjdGlvbn1iLnByb3RvdHlwZT17Z2V0IGFuY2hvck5vZGUoKXtyZXR1cm4gZih0aGlzLmltcGwuYW5jaG9yTm9kZSl9LGdldCBmb2N1c05vZGUoKXtyZXR1cm4gZih0aGlzLmltcGwuZm9jdXNOb2RlKX0sYWRkUmFuZ2U6ZnVuY3Rpb24oYSl7dGhpcy5pbXBsLmFkZFJhbmdlKGQoYSkpfSxjb2xsYXBzZTpmdW5jdGlvbihhLGIpe3RoaXMuaW1wbC5jb2xsYXBzZShlKGEpLGIpfSxjb250YWluc05vZGU6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5pbXBsLmNvbnRhaW5zTm9kZShlKGEpLGIpfSxleHRlbmQ6ZnVuY3Rpb24oYSxiKXt0aGlzLmltcGwuZXh0ZW5kKGUoYSksYil9LGdldFJhbmdlQXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGYodGhpcy5pbXBsLmdldFJhbmdlQXQoYSkpfSxyZW1vdmVSYW5nZTpmdW5jdGlvbihhKXt0aGlzLmltcGwucmVtb3ZlUmFuZ2UoZChhKSl9LHNlbGVjdEFsbENoaWxkcmVuOmZ1bmN0aW9uKGEpe3RoaXMuaW1wbC5zZWxlY3RBbGxDaGlsZHJlbihlKGEpKX0sdG9TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbXBsLnRvU3RyaW5nKCl9fSxjKHdpbmRvdy5TZWxlY3Rpb24sYix3aW5kb3cuZ2V0U2VsZWN0aW9uKCkpLGEud3JhcHBlcnMuU2VsZWN0aW9uPWJ9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7ay5jYWxsKHRoaXMsYSksdGhpcy50cmVlU2NvcGVfPW5ldyBwKHRoaXMsbnVsbCl9ZnVuY3Rpb24gYyhhKXt2YXIgYz1kb2N1bWVudFthXTtiLnByb3RvdHlwZVthXT1mdW5jdGlvbigpe3JldHVybiBBKGMuYXBwbHkodGhpcy5pbXBsLGFyZ3VtZW50cykpfX1mdW5jdGlvbiBkKGEsYil7RC5jYWxsKGIuaW1wbCx6KGEpKSxlKGEsYil9ZnVuY3Rpb24gZShhLGIpe2Euc2hhZG93Um9vdCYmYi5hZG9wdE5vZGUoYS5zaGFkb3dSb290KSxhIGluc3RhbmNlb2YgbyYmZihhLGIpO2Zvcih2YXIgYz1hLmZpcnN0Q2hpbGQ7YztjPWMubmV4dFNpYmxpbmcpZShjLGIpfWZ1bmN0aW9uIGYoYSxiKXt2YXIgYz1hLm9sZGVyU2hhZG93Um9vdDtjJiZiLmFkb3B0Tm9kZShjKX1mdW5jdGlvbiBnKGEpe3RoaXMuaW1wbD1hfWZ1bmN0aW9uIGgoYSxiKXt2YXIgYz1kb2N1bWVudC5pbXBsZW1lbnRhdGlvbltiXTthLnByb3RvdHlwZVtiXT1mdW5jdGlvbigpe3JldHVybiBBKGMuYXBwbHkodGhpcy5pbXBsLGFyZ3VtZW50cykpfX1mdW5jdGlvbiBpKGEsYil7dmFyIGM9ZG9jdW1lbnQuaW1wbGVtZW50YXRpb25bYl07YS5wcm90b3R5cGVbYl09ZnVuY3Rpb24oKXtyZXR1cm4gYy5hcHBseSh0aGlzLmltcGwsYXJndW1lbnRzKX19dmFyIGo9YS5HZXRFbGVtZW50c0J5SW50ZXJmYWNlLGs9YS53cmFwcGVycy5Ob2RlLGw9YS5QYXJlbnROb2RlSW50ZXJmYWNlLG09YS53cmFwcGVycy5TZWxlY3Rpb24sbj1hLlNlbGVjdG9yc0ludGVyZmFjZSxvPWEud3JhcHBlcnMuU2hhZG93Um9vdCxwPWEuVHJlZVNjb3BlLHE9YS5jbG9uZU5vZGUscj1hLmRlZmluZVdyYXBHZXR0ZXIscz1hLmVsZW1lbnRGcm9tUG9pbnQsdD1hLmZvcndhcmRNZXRob2RzVG9XcmFwcGVyLHU9YS5tYXRjaGVzTmFtZXMsdj1hLm1peGluLHc9YS5yZWdpc3RlcldyYXBwZXIseD1hLnJlbmRlckFsbFBlbmRpbmcseT1hLnJld3JhcCx6PWEudW53cmFwLEE9YS53cmFwLEI9YS53cmFwRXZlbnRUYXJnZXRNZXRob2RzLEM9KGEud3JhcE5vZGVMaXN0LG5ldyBXZWFrTWFwKTtiLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGsucHJvdG90eXBlKSxyKGIsImRvY3VtZW50RWxlbWVudCIpLHIoYiwiYm9keSIpLHIoYiwiaGVhZCIpLFsiY3JlYXRlQ29tbWVudCIsImNyZWF0ZURvY3VtZW50RnJhZ21lbnQiLCJjcmVhdGVFbGVtZW50IiwiY3JlYXRlRWxlbWVudE5TIiwiY3JlYXRlRXZlbnQiLCJjcmVhdGVFdmVudE5TIiwiY3JlYXRlUmFuZ2UiLCJjcmVhdGVUZXh0Tm9kZSIsImdldEVsZW1lbnRCeUlkIl0uZm9yRWFjaChjKTt2YXIgRD1kb2N1bWVudC5hZG9wdE5vZGUsRT1kb2N1bWVudC5nZXRTZWxlY3Rpb247aWYodihiLnByb3RvdHlwZSx7YWRvcHROb2RlOmZ1bmN0aW9uKGEpe3JldHVybiBhLnBhcmVudE5vZGUmJmEucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChhKSxkKGEsdGhpcyksYX0sZWxlbWVudEZyb21Qb2ludDpmdW5jdGlvbihhLGIpe3JldHVybiBzKHRoaXMsdGhpcyxhLGIpfSxpbXBvcnROb2RlOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHEoYSxiLHRoaXMuaW1wbCl9LGdldFNlbGVjdGlvbjpmdW5jdGlvbigpe3JldHVybiB4KCksbmV3IG0oRS5jYWxsKHoodGhpcykpKX0sZ2V0RWxlbWVudHNCeU5hbWU6ZnVuY3Rpb24oYSl7cmV0dXJuIG4ucXVlcnlTZWxlY3RvckFsbC5jYWxsKHRoaXMsIltuYW1lPSIrSlNPTi5zdHJpbmdpZnkoU3RyaW5nKGEpKSsiXSIpfX0pLGRvY3VtZW50LnJlZ2lzdGVyRWxlbWVudCl7dmFyIEY9ZG9jdW1lbnQucmVnaXN0ZXJFbGVtZW50O2IucHJvdG90eXBlLnJlZ2lzdGVyRWxlbWVudD1mdW5jdGlvbihiLGMpe2Z1bmN0aW9uIGQoYSl7cmV0dXJuIGE/dm9pZCh0aGlzLmltcGw9YSk6Zj9kb2N1bWVudC5jcmVhdGVFbGVtZW50KGYsYik6ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChiKX12YXIgZSxmO2lmKHZvaWQgMCE9PWMmJihlPWMucHJvdG90eXBlLGY9Yy5leHRlbmRzKSxlfHwoZT1PYmplY3QuY3JlYXRlKEhUTUxFbGVtZW50LnByb3RvdHlwZSkpLGEubmF0aXZlUHJvdG90eXBlVGFibGUuZ2V0KGUpKXRocm93IG5ldyBFcnJvcigiTm90U3VwcG9ydGVkRXJyb3IiKTtmb3IodmFyIGcsaD1PYmplY3QuZ2V0UHJvdG90eXBlT2YoZSksaT1bXTtoJiYhKGc9YS5uYXRpdmVQcm90b3R5cGVUYWJsZS5nZXQoaCkpOylpLnB1c2goaCksaD1PYmplY3QuZ2V0UHJvdG90eXBlT2YoaCk7aWYoIWcpdGhyb3cgbmV3IEVycm9yKCJOb3RTdXBwb3J0ZWRFcnJvciIpO2Zvcih2YXIgaj1PYmplY3QuY3JlYXRlKGcpLGs9aS5sZW5ndGgtMTtrPj0wO2stLSlqPU9iamVjdC5jcmVhdGUoaik7WyJjcmVhdGVkQ2FsbGJhY2siLCJhdHRhY2hlZENhbGxiYWNrIiwiZGV0YWNoZWRDYWxsYmFjayIsImF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjayJdLmZvckVhY2goZnVuY3Rpb24oYSl7dmFyIGI9ZVthXTtiJiYoalthXT1mdW5jdGlvbigpe0EodGhpcylpbnN0YW5jZW9mIGR8fHkodGhpcyksYi5hcHBseShBKHRoaXMpLGFyZ3VtZW50cyl9KX0pO3ZhciBsPXtwcm90b3R5cGU6an07ZiYmKGwuZXh0ZW5kcz1mKSxkLnByb3RvdHlwZT1lLGQucHJvdG90eXBlLmNvbnN0cnVjdG9yPWQsYS5jb25zdHJ1Y3RvclRhYmxlLnNldChqLGQpLGEubmF0aXZlUHJvdG90eXBlVGFibGUuc2V0KGUsaik7Ri5jYWxsKHoodGhpcyksYixsKTtyZXR1cm4gZH0sdChbd2luZG93LkhUTUxEb2N1bWVudHx8d2luZG93LkRvY3VtZW50XSxbInJlZ2lzdGVyRWxlbWVudCJdKX10KFt3aW5kb3cuSFRNTEJvZHlFbGVtZW50LHdpbmRvdy5IVE1MRG9jdW1lbnR8fHdpbmRvdy5Eb2N1bWVudCx3aW5kb3cuSFRNTEhlYWRFbGVtZW50LHdpbmRvdy5IVE1MSHRtbEVsZW1lbnRdLFsiYXBwZW5kQ2hpbGQiLCJjb21wYXJlRG9jdW1lbnRQb3NpdGlvbiIsImNvbnRhaW5zIiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWVOUyIsImluc2VydEJlZm9yZSIsInF1ZXJ5U2VsZWN0b3IiLCJxdWVyeVNlbGVjdG9yQWxsIiwicmVtb3ZlQ2hpbGQiLCJyZXBsYWNlQ2hpbGQiXS5jb25jYXQodSkpLHQoW3dpbmRvdy5IVE1MRG9jdW1lbnR8fHdpbmRvdy5Eb2N1bWVudF0sWyJhZG9wdE5vZGUiLCJpbXBvcnROb2RlIiwiY29udGFpbnMiLCJjcmVhdGVDb21tZW50IiwiY3JlYXRlRG9jdW1lbnRGcmFnbWVudCIsImNyZWF0ZUVsZW1lbnQiLCJjcmVhdGVFbGVtZW50TlMiLCJjcmVhdGVFdmVudCIsImNyZWF0ZUV2ZW50TlMiLCJjcmVhdGVSYW5nZSIsImNyZWF0ZVRleHROb2RlIiwiZWxlbWVudEZyb21Qb2ludCIsImdldEVsZW1lbnRCeUlkIiwiZ2V0RWxlbWVudHNCeU5hbWUiLCJnZXRTZWxlY3Rpb24iXSksdihiLnByb3RvdHlwZSxqKSx2KGIucHJvdG90eXBlLGwpLHYoYi5wcm90b3R5cGUsbiksdihiLnByb3RvdHlwZSx7Z2V0IGltcGxlbWVudGF0aW9uKCl7dmFyIGE9Qy5nZXQodGhpcyk7cmV0dXJuIGE/YTooYT1uZXcgZyh6KHRoaXMpLmltcGxlbWVudGF0aW9uKSxDLnNldCh0aGlzLGEpLGEpfSxnZXQgZGVmYXVsdFZpZXcoKXtyZXR1cm4gQSh6KHRoaXMpLmRlZmF1bHRWaWV3KX19KSx3KHdpbmRvdy5Eb2N1bWVudCxiLGRvY3VtZW50LmltcGxlbWVudGF0aW9uLmNyZWF0ZUhUTUxEb2N1bWVudCgiIikpLHdpbmRvdy5IVE1MRG9jdW1lbnQmJncod2luZG93LkhUTUxEb2N1bWVudCxiKSxCKFt3aW5kb3cuSFRNTEJvZHlFbGVtZW50LHdpbmRvdy5IVE1MRG9jdW1lbnR8fHdpbmRvdy5Eb2N1bWVudCx3aW5kb3cuSFRNTEhlYWRFbGVtZW50XSksaChnLCJjcmVhdGVEb2N1bWVudFR5cGUiKSxoKGcsImNyZWF0ZURvY3VtZW50IiksaChnLCJjcmVhdGVIVE1MRG9jdW1lbnQiKSxpKGcsImhhc0ZlYXR1cmUiKSx3KHdpbmRvdy5ET01JbXBsZW1lbnRhdGlvbixnKSx0KFt3aW5kb3cuRE9NSW1wbGVtZW50YXRpb25dLFsiY3JlYXRlRG9jdW1lbnRUeXBlIiwiY3JlYXRlRG9jdW1lbnQiLCJjcmVhdGVIVE1MRG9jdW1lbnQiLCJoYXNGZWF0dXJlIl0pLGEuYWRvcHROb2RlTm9SZW1vdmU9ZCxhLndyYXBwZXJzLkRPTUltcGxlbWVudGF0aW9uPWcsYS53cmFwcGVycy5Eb2N1bWVudD1ifSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe2MuY2FsbCh0aGlzLGEpfXZhciBjPWEud3JhcHBlcnMuRXZlbnRUYXJnZXQsZD1hLndyYXBwZXJzLlNlbGVjdGlvbixlPWEubWl4aW4sZj1hLnJlZ2lzdGVyV3JhcHBlcixnPWEucmVuZGVyQWxsUGVuZGluZyxoPWEudW53cmFwLGk9YS51bndyYXBJZk5lZWRlZCxqPWEud3JhcCxrPXdpbmRvdy5XaW5kb3csbD13aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSxtPXdpbmRvdy5nZXRTZWxlY3Rpb247Yi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShjLnByb3RvdHlwZSksay5wcm90b3R5cGUuZ2V0Q29tcHV0ZWRTdHlsZT1mdW5jdGlvbihhLGIpe3JldHVybiBqKHRoaXN8fHdpbmRvdykuZ2V0Q29tcHV0ZWRTdHlsZShpKGEpLGIpfSxrLnByb3RvdHlwZS5nZXRTZWxlY3Rpb249ZnVuY3Rpb24oKXtyZXR1cm4gaih0aGlzfHx3aW5kb3cpLmdldFNlbGVjdGlvbigpfSxkZWxldGUgd2luZG93LmdldENvbXB1dGVkU3R5bGUsZGVsZXRlIHdpbmRvdy5nZXRTZWxlY3Rpb24sWyJhZGRFdmVudExpc3RlbmVyIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImRpc3BhdGNoRXZlbnQiXS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2sucHJvdG90eXBlW2FdPWZ1bmN0aW9uKCl7dmFyIGI9aih0aGlzfHx3aW5kb3cpO3JldHVybiBiW2FdLmFwcGx5KGIsYXJndW1lbnRzKX0sZGVsZXRlIHdpbmRvd1thXX0pLGUoYi5wcm90b3R5cGUse2dldENvbXB1dGVkU3R5bGU6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gZygpLGwuY2FsbChoKHRoaXMpLGkoYSksYil9LGdldFNlbGVjdGlvbjpmdW5jdGlvbigpe3JldHVybiBnKCksbmV3IGQobS5jYWxsKGgodGhpcykpKX0sZ2V0IGRvY3VtZW50KCl7cmV0dXJuIGooaCh0aGlzKS5kb2N1bWVudCl9fSksZihrLGIsd2luZG93KSxhLndyYXBwZXJzLldpbmRvdz1ifSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0Ijt2YXIgYj1hLnVud3JhcCxjPXdpbmRvdy5EYXRhVHJhbnNmZXJ8fHdpbmRvdy5DbGlwYm9hcmQsZD1jLnByb3RvdHlwZS5zZXREcmFnSW1hZ2U7ZCYmKGMucHJvdG90eXBlLnNldERyYWdJbWFnZT1mdW5jdGlvbihhLGMsZSl7ZC5jYWxsKHRoaXMsYihhKSxjLGUpfSl9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7dGhpcy5pbXBsPW5ldyBlKGEmJmQoYSkpfXZhciBjPWEucmVnaXN0ZXJXcmFwcGVyLGQ9YS51bndyYXAsZT13aW5kb3cuRm9ybURhdGE7YyhlLGIsbmV3IGUpLGEud3JhcHBlcnMuRm9ybURhdGE9Yn0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXt2YXIgYj1jW2FdLGQ9d2luZG93W2JdO2lmKGQpe3ZhciBlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoYSksZj1lLmNvbnN0cnVjdG9yO3dpbmRvd1tiXT1mfX12YXIgYz0oYS5pc1dyYXBwZXJGb3Ise2E6IkhUTUxBbmNob3JFbGVtZW50IixhcmVhOiJIVE1MQXJlYUVsZW1lbnQiLGF1ZGlvOiJIVE1MQXVkaW9FbGVtZW50IixiYXNlOiJIVE1MQmFzZUVsZW1lbnQiLGJvZHk6IkhUTUxCb2R5RWxlbWVudCIsYnI6IkhUTUxCUkVsZW1lbnQiLGJ1dHRvbjoiSFRNTEJ1dHRvbkVsZW1lbnQiLGNhbnZhczoiSFRNTENhbnZhc0VsZW1lbnQiLGNhcHRpb246IkhUTUxUYWJsZUNhcHRpb25FbGVtZW50Iixjb2w6IkhUTUxUYWJsZUNvbEVsZW1lbnQiLGNvbnRlbnQ6IkhUTUxDb250ZW50RWxlbWVudCIsZGF0YToiSFRNTERhdGFFbGVtZW50IixkYXRhbGlzdDoiSFRNTERhdGFMaXN0RWxlbWVudCIsZGVsOiJIVE1MTW9kRWxlbWVudCIsZGlyOiJIVE1MRGlyZWN0b3J5RWxlbWVudCIsZGl2OiJIVE1MRGl2RWxlbWVudCIsZGw6IkhUTUxETGlzdEVsZW1lbnQiLGVtYmVkOiJIVE1MRW1iZWRFbGVtZW50IixmaWVsZHNldDoiSFRNTEZpZWxkU2V0RWxlbWVudCIsZm9udDoiSFRNTEZvbnRFbGVtZW50Iixmb3JtOiJIVE1MRm9ybUVsZW1lbnQiLGZyYW1lOiJIVE1MRnJhbWVFbGVtZW50IixmcmFtZXNldDoiSFRNTEZyYW1lU2V0RWxlbWVudCIsaDE6IkhUTUxIZWFkaW5nRWxlbWVudCIsaGVhZDoiSFRNTEhlYWRFbGVtZW50IixocjoiSFRNTEhSRWxlbWVudCIsaHRtbDoiSFRNTEh0bWxFbGVtZW50IixpZnJhbWU6IkhUTUxJRnJhbWVFbGVtZW50IixpbWc6IkhUTUxJbWFnZUVsZW1lbnQiLGlucHV0OiJIVE1MSW5wdXRFbGVtZW50IixrZXlnZW46IkhUTUxLZXlnZW5FbGVtZW50IixsYWJlbDoiSFRNTExhYmVsRWxlbWVudCIsbGVnZW5kOiJIVE1MTGVnZW5kRWxlbWVudCIsbGk6IkhUTUxMSUVsZW1lbnQiLGxpbms6IkhUTUxMaW5rRWxlbWVudCIsbWFwOiJIVE1MTWFwRWxlbWVudCIsbWFycXVlZToiSFRNTE1hcnF1ZWVFbGVtZW50IixtZW51OiJIVE1MTWVudUVsZW1lbnQiLG1lbnVpdGVtOiJIVE1MTWVudUl0ZW1FbGVtZW50IixtZXRhOiJIVE1MTWV0YUVsZW1lbnQiLG1ldGVyOiJIVE1MTWV0ZXJFbGVtZW50IixvYmplY3Q6IkhUTUxPYmplY3RFbGVtZW50IixvbDoiSFRNTE9MaXN0RWxlbWVudCIsb3B0Z3JvdXA6IkhUTUxPcHRHcm91cEVsZW1lbnQiLG9wdGlvbjoiSFRNTE9wdGlvbkVsZW1lbnQiLG91dHB1dDoiSFRNTE91dHB1dEVsZW1lbnQiLHA6IkhUTUxQYXJhZ3JhcGhFbGVtZW50IixwYXJhbToiSFRNTFBhcmFtRWxlbWVudCIscHJlOiJIVE1MUHJlRWxlbWVudCIscHJvZ3Jlc3M6IkhUTUxQcm9ncmVzc0VsZW1lbnQiLHE6IkhUTUxRdW90ZUVsZW1lbnQiLHNjcmlwdDoiSFRNTFNjcmlwdEVsZW1lbnQiLHNlbGVjdDoiSFRNTFNlbGVjdEVsZW1lbnQiLHNoYWRvdzoiSFRNTFNoYWRvd0VsZW1lbnQiLHNvdXJjZToiSFRNTFNvdXJjZUVsZW1lbnQiLHNwYW46IkhUTUxTcGFuRWxlbWVudCIsc3R5bGU6IkhUTUxTdHlsZUVsZW1lbnQiLHRhYmxlOiJIVE1MVGFibGVFbGVtZW50Iix0Ym9keToiSFRNTFRhYmxlU2VjdGlvbkVsZW1lbnQiLHRlbXBsYXRlOiJIVE1MVGVtcGxhdGVFbGVtZW50Iix0ZXh0YXJlYToiSFRNTFRleHRBcmVhRWxlbWVudCIsdGhlYWQ6IkhUTUxUYWJsZVNlY3Rpb25FbGVtZW50Iix0aW1lOiJIVE1MVGltZUVsZW1lbnQiLHRpdGxlOiJIVE1MVGl0bGVFbGVtZW50Iix0cjoiSFRNTFRhYmxlUm93RWxlbWVudCIsdHJhY2s6IkhUTUxUcmFja0VsZW1lbnQiLHVsOiJIVE1MVUxpc3RFbGVtZW50Iix2aWRlbzoiSFRNTFZpZGVvRWxlbWVudCJ9KTtPYmplY3Qua2V5cyhjKS5mb3JFYWNoKGIpLE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGEud3JhcHBlcnMpLmZvckVhY2goZnVuY3Rpb24oYil7d2luZG93W2JdPWEud3JhcHBlcnNbYl19KX0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEsYyl7dmFyIGQsZSxmLGcsaD1hLmZpcnN0RWxlbWVudENoaWxkO2ZvcihlPVtdLGY9YS5zaGFkb3dSb290O2Y7KWUucHVzaChmKSxmPWYub2xkZXJTaGFkb3dSb290O2ZvcihnPWUubGVuZ3RoLTE7Zz49MDtnLS0paWYoZD1lW2ddLnF1ZXJ5U2VsZWN0b3IoYykpcmV0dXJuIGQ7Zm9yKDtoOyl7aWYoZD1iKGgsYykpcmV0dXJuIGQ7aD1oLm5leHRFbGVtZW50U2libGluZ31yZXR1cm4gbnVsbH1mdW5jdGlvbiBjKGEsYixkKXt2YXIgZSxmLGcsaCxpLGo9YS5maXJzdEVsZW1lbnRDaGlsZDtmb3IoZz1bXSxmPWEuc2hhZG93Um9vdDtmOylnLnB1c2goZiksZj1mLm9sZGVyU2hhZG93Um9vdDtmb3IoaD1nLmxlbmd0aC0xO2g+PTA7aC0tKWZvcihlPWdbaF0ucXVlcnlTZWxlY3RvckFsbChiKSxpPTA7aTxlLmxlbmd0aDtpKyspZC5wdXNoKGVbaV0pO2Zvcig7ajspYyhqLGIsZCksaj1qLm5leHRFbGVtZW50U2libGluZztyZXR1cm4gZH13aW5kb3cud3JhcD1TaGFkb3dET01Qb2x5ZmlsbC53cmFwSWZOZWVkZWQsd2luZG93LnVud3JhcD1TaGFkb3dET01Qb2x5ZmlsbC51bndyYXBJZk5lZWRlZCxPYmplY3QuZGVmaW5lUHJvcGVydHkoRWxlbWVudC5wcm90b3R5cGUsIndlYmtpdFNoYWRvd1Jvb3QiLE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoRWxlbWVudC5wcm90b3R5cGUsInNoYWRvd1Jvb3QiKSk7dmFyIGQ9RWxlbWVudC5wcm90b3R5cGUuY3JlYXRlU2hhZG93Um9vdDtFbGVtZW50LnByb3RvdHlwZS5jcmVhdGVTaGFkb3dSb290PWZ1bmN0aW9uKCl7dmFyIGE9ZC5jYWxsKHRoaXMpO3JldHVybiBDdXN0b21FbGVtZW50cy53YXRjaFNoYWRvdyh0aGlzKSxhfSxFbGVtZW50LnByb3RvdHlwZS53ZWJraXRDcmVhdGVTaGFkb3dSb290PUVsZW1lbnQucHJvdG90eXBlLmNyZWF0ZVNoYWRvd1Jvb3QsYS5xdWVyeUFsbFNoYWRvd3M9ZnVuY3Rpb24oYSxkLGUpe3JldHVybiBlP2MoYSxkLFtdKTpiKGEsZCl9fSh3aW5kb3cuUGxhdGZvcm0pLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSxiKXt2YXIgYz0iIjtyZXR1cm4gQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChhLGZ1bmN0aW9uKGEpe2MrPWEudGV4dENvbnRlbnQrIlxuXG4ifSksYnx8KGM9Yy5yZXBsYWNlKGwsIiIpKSxjfWZ1bmN0aW9uIGMoYSl7dmFyIGI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3R5bGUiKTtyZXR1cm4gYi50ZXh0Q29udGVudD1hLGJ9ZnVuY3Rpb24gZChhKXt2YXIgYj1jKGEpO2RvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoYik7dmFyIGQ9W107aWYoYi5zaGVldCl0cnl7ZD1iLnNoZWV0LmNzc1J1bGVzfWNhdGNoKGUpe31lbHNlIGNvbnNvbGUud2Fybigic2hlZXQgbm90IGZvdW5kIixiKTtyZXR1cm4gYi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGIpLGR9ZnVuY3Rpb24gZSgpe3YuaW5pdGlhbGl6ZWQ9ITAsZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh2KTt2YXIgYT12LmNvbnRlbnREb2N1bWVudCxiPWEuY3JlYXRlRWxlbWVudCgiYmFzZSIpO2IuaHJlZj1kb2N1bWVudC5iYXNlVVJJLGEuaGVhZC5hcHBlbmRDaGlsZChiKX1mdW5jdGlvbiBmKGEpe3YuaW5pdGlhbGl6ZWR8fGUoKSxkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHYpLGEodi5jb250ZW50RG9jdW1lbnQpLGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQodil9ZnVuY3Rpb24gZyhhLGIpe2lmKGIpe3ZhciBlO2lmKGEubWF0Y2goIkBpbXBvcnQiKSYmeCl7dmFyIGc9YyhhKTtmKGZ1bmN0aW9uKGEpe2EuaGVhZC5hcHBlbmRDaGlsZChnLmltcGwpLGU9Zy5zaGVldC5jc3NSdWxlcyxiKGUpfSl9ZWxzZSBlPWQoYSksYihlKX19ZnVuY3Rpb24gaChhKXthJiZqKCkuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoYSkpfWZ1bmN0aW9uIGkoYSxiKXt2YXIgZD1jKGEpO2Quc2V0QXR0cmlidXRlKGIsIiIpLGQuc2V0QXR0cmlidXRlKHosIiIpLGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoZCl9ZnVuY3Rpb24gaigpe3JldHVybiB3fHwodz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzdHlsZSIpLHcuc2V0QXR0cmlidXRlKHosIiIpLHdbel09ITApLHd9dmFyIGs9e3N0cmljdFN0eWxpbmc6ITEscmVnaXN0cnk6e30sc2hpbVN0eWxpbmc6ZnVuY3Rpb24oYSxjLGQpe3ZhciBlPXRoaXMucHJlcGFyZVJvb3QoYSxjLGQpLGY9dGhpcy5pc1R5cGVFeHRlbnNpb24oZCksZz10aGlzLm1ha2VTY29wZVNlbGVjdG9yKGMsZiksaD1iKGUsITApO2g9dGhpcy5zY29wZUNzc1RleHQoaCxnKSxhJiYoYS5zaGltbWVkU3R5bGU9aCksdGhpcy5hZGRDc3NUb0RvY3VtZW50KGgsYyl9LHNoaW1TdHlsZTpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLnNoaW1Dc3NUZXh0KGEudGV4dENvbnRlbnQsYil9LHNoaW1Dc3NUZXh0OmZ1bmN0aW9uKGEsYil7cmV0dXJuIGE9dGhpcy5pbnNlcnREaXJlY3RpdmVzKGEpLHRoaXMuc2NvcGVDc3NUZXh0KGEsYil9LG1ha2VTY29wZVNlbGVjdG9yOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGE/Yj8iW2lzPSIrYSsiXSI6YToiIn0saXNUeXBlRXh0ZW5zaW9uOmZ1bmN0aW9uKGEpe3JldHVybiBhJiZhLmluZGV4T2YoIi0iKTwwfSxwcmVwYXJlUm9vdDpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9dGhpcy5yZWdpc3RlclJvb3QoYSxiLGMpO3JldHVybiB0aGlzLnJlcGxhY2VUZXh0SW5TdHlsZXMoZC5yb290U3R5bGVzLHRoaXMuaW5zZXJ0RGlyZWN0aXZlcyksdGhpcy5yZW1vdmVTdHlsZXMoYSxkLnJvb3RTdHlsZXMpLHRoaXMuc3RyaWN0U3R5bGluZyYmdGhpcy5hcHBseVNjb3BlVG9Db250ZW50KGEsYiksZC5zY29wZVN0eWxlc30scmVtb3ZlU3R5bGVzOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjLGQ9MCxlPWIubGVuZ3RoO2U+ZCYmKGM9YltkXSk7ZCsrKWMucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChjKX0scmVnaXN0ZXJSb290OmZ1bmN0aW9uKGEsYixjKXt2YXIgZD10aGlzLnJlZ2lzdHJ5W2JdPXtyb290OmEsbmFtZTpiLGV4dGVuZHNOYW1lOmN9LGU9dGhpcy5maW5kU3R5bGVzKGEpO2Qucm9vdFN0eWxlcz1lLGQuc2NvcGVTdHlsZXM9ZC5yb290U3R5bGVzO3ZhciBmPXRoaXMucmVnaXN0cnlbZC5leHRlbmRzTmFtZV07cmV0dXJuIGYmJihkLnNjb3BlU3R5bGVzPWYuc2NvcGVTdHlsZXMuY29uY2F0KGQuc2NvcGVTdHlsZXMpKSxkfSxmaW5kU3R5bGVzOmZ1bmN0aW9uKGEpe2lmKCFhKXJldHVybltdO3ZhciBiPWEucXVlcnlTZWxlY3RvckFsbCgic3R5bGUiKTtyZXR1cm4gQXJyYXkucHJvdG90eXBlLmZpbHRlci5jYWxsKGIsZnVuY3Rpb24oYSl7cmV0dXJuIWEuaGFzQXR0cmlidXRlKEEpfSl9LGFwcGx5U2NvcGVUb0NvbnRlbnQ6ZnVuY3Rpb24oYSxiKXthJiYoQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChhLnF1ZXJ5U2VsZWN0b3JBbGwoIioiKSxmdW5jdGlvbihhKXthLnNldEF0dHJpYnV0ZShiLCIiKX0pLEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoYS5xdWVyeVNlbGVjdG9yQWxsKCJ0ZW1wbGF0ZSIpLGZ1bmN0aW9uKGEpe3RoaXMuYXBwbHlTY29wZVRvQ29udGVudChhLmNvbnRlbnQsYil9LHRoaXMpKX0saW5zZXJ0RGlyZWN0aXZlczpmdW5jdGlvbihhKXtyZXR1cm4gYT10aGlzLmluc2VydFBvbHlmaWxsRGlyZWN0aXZlc0luQ3NzVGV4dChhKSx0aGlzLmluc2VydFBvbHlmaWxsUnVsZXNJbkNzc1RleHQoYSl9LGluc2VydFBvbHlmaWxsRGlyZWN0aXZlc0luQ3NzVGV4dDpmdW5jdGlvbihhKXtyZXR1cm4gYT1hLnJlcGxhY2UobSxmdW5jdGlvbihhLGIpe3JldHVybiBiLnNsaWNlKDAsLTIpKyJ7In0pLGEucmVwbGFjZShuLGZ1bmN0aW9uKGEsYil7cmV0dXJuIGIrIiB7In0pfSxpbnNlcnRQb2x5ZmlsbFJ1bGVzSW5Dc3NUZXh0OmZ1bmN0aW9uKGEpe3JldHVybiBhPWEucmVwbGFjZShvLGZ1bmN0aW9uKGEsYil7cmV0dXJuIGIuc2xpY2UoMCwtMSl9KSxhLnJlcGxhY2UocCxmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1hLnJlcGxhY2UoYiwiIikucmVwbGFjZShjLCIiKTtyZXR1cm4gZCtlfSl9LHNjb3BlQ3NzVGV4dDpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuZXh0cmFjdFVuc2NvcGVkUnVsZXNGcm9tQ3NzVGV4dChhKTtpZihhPXRoaXMuaW5zZXJ0UG9seWZpbGxIb3N0SW5Dc3NUZXh0KGEpLGE9dGhpcy5jb252ZXJ0Q29sb25Ib3N0KGEpLGE9dGhpcy5jb252ZXJ0Q29sb25Ib3N0Q29udGV4dChhKSxhPXRoaXMuY29udmVydFNoYWRvd0RPTVNlbGVjdG9ycyhhKSxiKXt2YXIgYSxkPXRoaXM7ZyhhLGZ1bmN0aW9uKGMpe2E9ZC5zY29wZVJ1bGVzKGMsYil9KX1yZXR1cm4gYT1hKyJcbiIrYyxhLnRyaW0oKX0sZXh0cmFjdFVuc2NvcGVkUnVsZXNGcm9tQ3NzVGV4dDpmdW5jdGlvbihhKXtmb3IodmFyIGIsYz0iIjtiPXEuZXhlYyhhKTspYys9YlsxXS5zbGljZSgwLC0xKSsiXG5cbiI7Zm9yKDtiPXIuZXhlYyhhKTspYys9YlswXS5yZXBsYWNlKGJbMl0sIiIpLnJlcGxhY2UoYlsxXSxiWzNdKSsiXG5cbiI7cmV0dXJuIGN9LGNvbnZlcnRDb2xvbkhvc3Q6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuY29udmVydENvbG9uUnVsZShhLGNzc0NvbG9uSG9zdFJlLHRoaXMuY29sb25Ib3N0UGFydFJlcGxhY2VyKX0sY29udmVydENvbG9uSG9zdENvbnRleHQ6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuY29udmVydENvbG9uUnVsZShhLGNzc0NvbG9uSG9zdENvbnRleHRSZSx0aGlzLmNvbG9uSG9zdENvbnRleHRQYXJ0UmVwbGFjZXIpfSxjb252ZXJ0Q29sb25SdWxlOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gYS5yZXBsYWNlKGIsZnVuY3Rpb24oYSxiLGQsZSl7aWYoYj1wb2x5ZmlsbEhvc3ROb0NvbWJpbmF0b3IsZCl7Zm9yKHZhciBmLGc9ZC5zcGxpdCgiLCIpLGg9W10saT0wLGo9Zy5sZW5ndGg7aj5pJiYoZj1nW2ldKTtpKyspZj1mLnRyaW0oKSxoLnB1c2goYyhiLGYsZSkpO3JldHVybiBoLmpvaW4oIiwiKX1yZXR1cm4gYitlfSl9LGNvbG9uSG9zdENvbnRleHRQYXJ0UmVwbGFjZXI6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBiLm1hdGNoKHMpP3RoaXMuY29sb25Ib3N0UGFydFJlcGxhY2VyKGEsYixjKTphK2IrYysiLCAiK2IrIiAiK2ErY30sY29sb25Ib3N0UGFydFJlcGxhY2VyOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gYStiLnJlcGxhY2UocywiIikrY30sY29udmVydFNoYWRvd0RPTVNlbGVjdG9yczpmdW5jdGlvbihhKXtmb3IodmFyIGI9MDtiPHNoYWRvd0RPTVNlbGVjdG9yc1JlLmxlbmd0aDtiKyspYT1hLnJlcGxhY2Uoc2hhZG93RE9NU2VsZWN0b3JzUmVbYl0sIiAiKTtyZXR1cm4gYX0sc2NvcGVSdWxlczpmdW5jdGlvbihhLGIpe3ZhciBjPSIiO3JldHVybiBhJiZBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGEsZnVuY3Rpb24oYSl7aWYoYS5zZWxlY3RvclRleHQmJmEuc3R5bGUmJnZvaWQgMCE9PWEuc3R5bGUuY3NzVGV4dCljKz10aGlzLnNjb3BlU2VsZWN0b3IoYS5zZWxlY3RvclRleHQsYix0aGlzLnN0cmljdFN0eWxpbmcpKyIge1xuCSIsYys9dGhpcy5wcm9wZXJ0aWVzRnJvbVJ1bGUoYSkrIlxufVxuXG4iO2Vsc2UgaWYoYS50eXBlPT09Q1NTUnVsZS5NRURJQV9SVUxFKWMrPSJAbWVkaWEgIithLm1lZGlhLm1lZGlhVGV4dCsiIHtcbiIsYys9dGhpcy5zY29wZVJ1bGVzKGEuY3NzUnVsZXMsYiksYys9IlxufVxuXG4iO2Vsc2UgdHJ5e2EuY3NzVGV4dCYmKGMrPWEuY3NzVGV4dCsiXG5cbiIpfWNhdGNoKGQpe319LHRoaXMpLGN9LHNjb3BlU2VsZWN0b3I6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPVtdLGU9YS5zcGxpdCgiLCIpO3JldHVybiBlLmZvckVhY2goZnVuY3Rpb24oYSl7YT1hLnRyaW0oKSx0aGlzLnNlbGVjdG9yTmVlZHNTY29waW5nKGEsYikmJihhPWMmJiFhLm1hdGNoKHBvbHlmaWxsSG9zdE5vQ29tYmluYXRvcik/dGhpcy5hcHBseVN0cmljdFNlbGVjdG9yU2NvcGUoYSxiKTp0aGlzLmFwcGx5U2VsZWN0b3JTY29wZShhLGIpKSxkLnB1c2goYSl9LHRoaXMpLGQuam9pbigiLCAiKX0sc2VsZWN0b3JOZWVkc1Njb3Bpbmc6ZnVuY3Rpb24oYSxiKXtpZihBcnJheS5pc0FycmF5KGIpKXJldHVybiEwO3ZhciBjPXRoaXMubWFrZVNjb3BlTWF0Y2hlcihiKTtyZXR1cm4hYS5tYXRjaChjKX0sbWFrZVNjb3BlTWF0Y2hlcjpmdW5jdGlvbihhKXtyZXR1cm4gYT1hLnJlcGxhY2UoL1xbL2csIlxcWyIpLnJlcGxhY2UoL1xbL2csIlxcXSIpLG5ldyBSZWdFeHAoIl4oIithKyIpIitzZWxlY3RvclJlU3VmZml4LCJtIil9LGFwcGx5U2VsZWN0b3JTY29wZTpmdW5jdGlvbihhLGIpe3JldHVybiBBcnJheS5pc0FycmF5KGIpP3RoaXMuYXBwbHlTZWxlY3RvclNjb3BlTGlzdChhLGIpOnRoaXMuYXBwbHlTaW1wbGVTZWxlY3RvclNjb3BlKGEsYil9LGFwcGx5U2VsZWN0b3JTY29wZUxpc3Q6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGMsZD1bXSxlPTA7Yz1iW2VdO2UrKylkLnB1c2godGhpcy5hcHBseVNpbXBsZVNlbGVjdG9yU2NvcGUoYSxjKSk7cmV0dXJuIGQuam9pbigiLCAiKX0sYXBwbHlTaW1wbGVTZWxlY3RvclNjb3BlOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGEubWF0Y2gocG9seWZpbGxIb3N0UmUpPyhhPWEucmVwbGFjZShwb2x5ZmlsbEhvc3ROb0NvbWJpbmF0b3IsYiksYS5yZXBsYWNlKHBvbHlmaWxsSG9zdFJlLGIrIiAiKSk6YisiICIrYX0sYXBwbHlTdHJpY3RTZWxlY3RvclNjb3BlOmZ1bmN0aW9uKGEsYil7Yj1iLnJlcGxhY2UoL1xbaXM9KFteXF1dKilcXS9nLCIkMSIpO3ZhciBjPVsiICIsIj4iLCIrIiwifiJdLGQ9YSxlPSJbIitiKyJdIjtyZXR1cm4gYy5mb3JFYWNoKGZ1bmN0aW9uKGEpe3ZhciBiPWQuc3BsaXQoYSk7ZD1iLm1hcChmdW5jdGlvbihhKXt2YXIgYj1hLnRyaW0oKS5yZXBsYWNlKHBvbHlmaWxsSG9zdFJlLCIiKTtyZXR1cm4gYiYmYy5pbmRleE9mKGIpPDAmJmIuaW5kZXhPZihlKTwwJiYoYT1iLnJlcGxhY2UoLyhbXjpdKikoOiopKC4qKS8sIiQxIitlKyIkMiQzIikpLGF9KS5qb2luKGEpfSksZH0saW5zZXJ0UG9seWZpbGxIb3N0SW5Dc3NUZXh0OmZ1bmN0aW9uKGEpe3JldHVybiBhLnJlcGxhY2UoY29sb25Ib3N0Q29udGV4dFJlLHQpLnJlcGxhY2UoY29sb25Ib3N0UmUscyl9LHByb3BlcnRpZXNGcm9tUnVsZTpmdW5jdGlvbihhKXt2YXIgYj1hLnN0eWxlLmNzc1RleHQ7YS5zdHlsZS5jb250ZW50JiYhYS5zdHlsZS5jb250ZW50Lm1hdGNoKC9bJyJdK3xhdHRyLykmJihiPWIucmVwbGFjZSgvY29udGVudDpbXjtdKjsvZywiY29udGVudDogJyIrYS5zdHlsZS5jb250ZW50KyInOyIpKTt2YXIgYz1hLnN0eWxlO2Zvcih2YXIgZCBpbiBjKSJpbml0aWFsIj09PWNbZF0mJihiKz1kKyI6IGluaXRpYWw7ICIpO3JldHVybiBifSxyZXBsYWNlVGV4dEluU3R5bGVzOmZ1bmN0aW9uKGEsYil7YSYmYiYmKGEgaW5zdGFuY2VvZiBBcnJheXx8KGE9W2FdKSxBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGEsZnVuY3Rpb24oYSl7YS50ZXh0Q29udGVudD1iLmNhbGwodGhpcyxhLnRleHRDb250ZW50KX0sdGhpcykpfSxhZGRDc3NUb0RvY3VtZW50OmZ1bmN0aW9uKGEsYil7YS5tYXRjaCgiQGltcG9ydCIpP2koYSxiKTpoKGEpfX0sbD0vXC9cKlteKl0qXCorKFteLypdW14qXSpcKispKlwvL2dpbSxtPS9cL1wqXHMqQHBvbHlmaWxsIChbXipdKlwqKyhbXi8qXVteKl0qXCorKSpcLykoW157XSo/KXsvZ2ltLG49L3BvbHlmaWxsLW5leHQtc2VsZWN0b3JbXn1dKmNvbnRlbnRcOltcc10qWyd8Il0oW14nIl0qKVsnfCJdW159XSp9KFtee10qPyl7L2dpbSxvPS9cL1wqXHNAcG9seWZpbGwtcnVsZShbXipdKlwqKyhbXi8qXVteKl0qXCorKSopXC8vZ2ltLHA9Lyhwb2x5ZmlsbC1ydWxlKVtefV0qKGNvbnRlbnRcOltcc10qWyd8Il0oW14nIl0qKVsnfCJdW147XSo7KVtefV0qfS9naW0scT0vXC9cKlxzQHBvbHlmaWxsLXVuc2NvcGVkLXJ1bGUoW14qXSpcKisoW14vKl1bXipdKlwqKykqKVwvL2dpbSxyPS8ocG9seWZpbGwtdW5zY29wZWQtcnVsZSlbXn1dKihjb250ZW50XDpbXHNdKlsnfCJdKFteJyJdKilbJ3wiXVteO10qOylbXn1dKn0vZ2ltLHM9Ii1zaGFkb3djc3Nob3N0Iix0PSItc2hhZG93Y3NzY29udGV4dCIsdT0iKSg/OlxcKCgoPzpcXChbXikoXSpcXCl8W14pKF0qKSs/KVxcKSk/KFteLHtdKikiO2Nzc0NvbG9uSG9zdFJlPW5ldyBSZWdFeHAoIigiK3MrdSwiZ2ltIiksY3NzQ29sb25Ib3N0Q29udGV4dFJlPW5ldyBSZWdFeHAoIigiK3QrdSwiZ2ltIiksc2VsZWN0b3JSZVN1ZmZpeD0iKFs+XFxzfitbLix7Ol1bXFxzXFxTXSopPyQiLGNvbG9uSG9zdFJlPS9cOmhvc3QvZ2ltLGNvbG9uSG9zdENvbnRleHRSZT0vXDpob3N0LWNvbnRleHQvZ2ltLHBvbHlmaWxsSG9zdE5vQ29tYmluYXRvcj1zKyItbm8tY29tYmluYXRvciIscG9seWZpbGxIb3N0UmU9bmV3IFJlZ0V4cChzLCJnaW0iKSxwb2x5ZmlsbEhvc3RDb250ZXh0UmU9bmV3IFJlZ0V4cCh0LCJnaW0iKSxzaGFkb3dET01TZWxlY3RvcnNSZT1bL1xeXF4vZywvXF4vZywvXC9zaGFkb3dcLy9nLC9cL3NoYWRvdy1kZWVwXC8vZywvOjpzaGFkb3cvZywvXC9kZWVwXC8vZywvOjpjb250ZW50L2ddO3ZhciB2PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImlmcmFtZSIpO3Yuc3R5bGUuZGlzcGxheT0ibm9uZSI7dmFyIHcseD1uYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKCJDaHJvbWUiKSx5PSJzaGltLXNoYWRvd2RvbSIsej0ic2hpbS1zaGFkb3dkb20tY3NzIixBPSJuby1zaGltIjtpZih3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpe2goInN0eWxlIHsgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyB9XG4iKTt2YXIgQj13cmFwKGRvY3VtZW50KSxDPUIucXVlcnlTZWxlY3RvcigiaGVhZCIpO0MuaW5zZXJ0QmVmb3JlKGooKSxDLmNoaWxkTm9kZXNbMF0pLGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoIkRPTUNvbnRlbnRMb2FkZWQiLGZ1bmN0aW9uKCl7dmFyIGI9YS51cmxSZXNvbHZlcjtpZih3aW5kb3cuSFRNTEltcG9ydHMmJiFIVE1MSW1wb3J0cy51c2VOYXRpdmUpe3ZhciBjPSJsaW5rW3JlbD1zdHlsZXNoZWV0XVsiK3krIl0iLGQ9InN0eWxlWyIreSsiXSI7SFRNTEltcG9ydHMuaW1wb3J0ZXIuZG9jdW1lbnRQcmVsb2FkU2VsZWN0b3JzKz0iLCIrYyxIVE1MSW1wb3J0cy5pbXBvcnRlci5pbXBvcnRzUHJlbG9hZFNlbGVjdG9ycys9IiwiK2MsSFRNTEltcG9ydHMucGFyc2VyLmRvY3VtZW50U2VsZWN0b3JzPVtIVE1MSW1wb3J0cy5wYXJzZXIuZG9jdW1lbnRTZWxlY3RvcnMsYyxkXS5qb2luKCIsIik7dmFyIGU9SFRNTEltcG9ydHMucGFyc2VyLnBhcnNlR2VuZXJpYztIVE1MSW1wb3J0cy5wYXJzZXIucGFyc2VHZW5lcmljPWZ1bmN0aW9uKGEpe2lmKCFhW3pdKXt2YXIgYz1hLl9faW1wb3J0RWxlbWVudHx8YTtpZighYy5oYXNBdHRyaWJ1dGUoeSkpcmV0dXJuIHZvaWQgZS5jYWxsKHRoaXMsYSk7YS5fX3Jlc291cmNlPyhjPWEub3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzdHlsZSIpLGMudGV4dENvbnRlbnQ9Yi5yZXNvbHZlQ3NzVGV4dChhLl9fcmVzb3VyY2UsYS5ocmVmKSk6Yi5yZXNvbHZlU3R5bGUoYyksYy50ZXh0Q29udGVudD1rLnNoaW1TdHlsZShjKSxjLnJlbW92ZUF0dHJpYnV0ZSh5LCIiKSxjLnNldEF0dHJpYnV0ZSh6LCIiKSxjW3pdPSEwLGMucGFyZW50Tm9kZSE9PUMmJihhLnBhcmVudE5vZGU9PT1DP0MucmVwbGFjZUNoaWxkKGMsYSk6Qy5hcHBlbmRDaGlsZChjKSksYy5fX2ltcG9ydFBhcnNlZD0hMCx0aGlzLm1hcmtQYXJzaW5nQ29tcGxldGUoYSksdGhpcy5wYXJzZU5leHQoKX19O3ZhciBmPUhUTUxJbXBvcnRzLnBhcnNlci5oYXNSZXNvdXJjZTtIVE1MSW1wb3J0cy5wYXJzZXIuaGFzUmVzb3VyY2U9ZnVuY3Rpb24oYSl7cmV0dXJuImxpbmsiPT09YS5sb2NhbE5hbWUmJiJzdHlsZXNoZWV0Ij09PWEucmVsJiZhLmhhc0F0dHJpYnV0ZSh5KT9hLl9fcmVzb3VyY2U6Zi5jYWxsKHRoaXMsYSl9fX0pfWEuU2hhZG93Q1NTPWt9KHdpbmRvdy5QbGF0Zm9ybSkpOiFmdW5jdGlvbigpe3dpbmRvdy53cmFwPXdpbmRvdy51bndyYXA9ZnVuY3Rpb24oYSl7cmV0dXJuIGF9LGFkZEV2ZW50TGlzdGVuZXIoIkRPTUNvbnRlbnRMb2FkZWQiLGZ1bmN0aW9uKCl7aWYoQ3VzdG9tRWxlbWVudHMudXNlTmF0aXZlPT09ITEpe3ZhciBhPUVsZW1lbnQucHJvdG90eXBlLmNyZWF0ZVNoYWRvd1Jvb3Q7RWxlbWVudC5wcm90b3R5cGUuY3JlYXRlU2hhZG93Um9vdD1mdW5jdGlvbigpe3ZhciBiPWEuY2FsbCh0aGlzKTtyZXR1cm4gQ3VzdG9tRWxlbWVudHMud2F0Y2hTaGFkb3codGhpcyksYn19fSksUGxhdGZvcm0udGVtcGxhdGVDb250ZW50PWZ1bmN0aW9uKGEpe2lmKHdpbmRvdy5IVE1MVGVtcGxhdGVFbGVtZW50JiZIVE1MVGVtcGxhdGVFbGVtZW50LmJvb3RzdHJhcCYmSFRNTFRlbXBsYXRlRWxlbWVudC5ib290c3RyYXAoYSksIWEuY29udGVudCYmIWEuX2NvbnRlbnQpe2Zvcih2YXIgYj1kb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7YS5maXJzdENoaWxkOyliLmFwcGVuZENoaWxkKGEuZmlyc3RDaGlsZCk7YS5fY29udGVudD1ifXJldHVybiBhLmNvbnRlbnR8fGEuX2NvbnRlbnR9fSh3aW5kb3cuUGxhdGZvcm0pLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe3JldHVybiB2b2lkIDAhPT1tW2FdfWZ1bmN0aW9uIGMoKXtoLmNhbGwodGhpcyksdGhpcy5faXNJbnZhbGlkPSEwfWZ1bmN0aW9uIGQoYSl7cmV0dXJuIiI9PWEmJmMuY2FsbCh0aGlzKSxhLnRvTG93ZXJDYXNlKCl9ZnVuY3Rpb24gZShhKXt2YXIgYj1hLmNoYXJDb2RlQXQoMCk7cmV0dXJuIGI+MzImJjEyNz5iJiYtMT09WzM0LDM1LDYwLDYyLDYzLDk2XS5pbmRleE9mKGIpP2E6ZW5jb2RlVVJJQ29tcG9uZW50KGEpfWZ1bmN0aW9uIGYoYSl7dmFyIGI9YS5jaGFyQ29kZUF0KDApO3JldHVybiBiPjMyJiYxMjc+YiYmLTE9PVszNCwzNSw2MCw2Miw5Nl0uaW5kZXhPZihiKT9hOmVuY29kZVVSSUNvbXBvbmVudChhKX1mdW5jdGlvbiBnKGEsZyxoKXtmdW5jdGlvbiBpKGEpe3QucHVzaChhKX12YXIgaj1nfHwic2NoZW1lIHN0YXJ0IixrPTAsbD0iIixyPSExLHM9ITEsdD1bXTthOmZvcig7KGFbay0xXSE9b3x8MD09aykmJiF0aGlzLl9pc0ludmFsaWQ7KXt2YXIgdT1hW2tdO3N3aXRjaChqKXtjYXNlInNjaGVtZSBzdGFydCI6aWYoIXV8fCFwLnRlc3QodSkpe2lmKGcpe2koIkludmFsaWQgc2NoZW1lLiIpO2JyZWFrIGF9bD0iIixqPSJubyBzY2hlbWUiO2NvbnRpbnVlfWwrPXUudG9Mb3dlckNhc2UoKSxqPSJzY2hlbWUiO2JyZWFrO2Nhc2Uic2NoZW1lIjppZih1JiZxLnRlc3QodSkpbCs9dS50b0xvd2VyQ2FzZSgpO2Vsc2V7aWYoIjoiIT11KXtpZihnKXtpZihvPT11KWJyZWFrIGE7aSgiQ29kZSBwb2ludCBub3QgYWxsb3dlZCBpbiBzY2hlbWU6ICIrdSk7YnJlYWsgYX1sPSIiLGs9MCxqPSJubyBzY2hlbWUiO2NvbnRpbnVlfWlmKHRoaXMuX3NjaGVtZT1sLGw9IiIsZylicmVhayBhO2IodGhpcy5fc2NoZW1lKSYmKHRoaXMuX2lzUmVsYXRpdmU9ITApLGo9ImZpbGUiPT10aGlzLl9zY2hlbWU/InJlbGF0aXZlIjp0aGlzLl9pc1JlbGF0aXZlJiZoJiZoLl9zY2hlbWU9PXRoaXMuX3NjaGVtZT8icmVsYXRpdmUgb3IgYXV0aG9yaXR5Ijp0aGlzLl9pc1JlbGF0aXZlPyJhdXRob3JpdHkgZmlyc3Qgc2xhc2giOiJzY2hlbWUgZGF0YSJ9YnJlYWs7Y2FzZSJzY2hlbWUgZGF0YSI6Ij8iPT11PyhxdWVyeT0iPyIsaj0icXVlcnkiKToiIyI9PXU/KHRoaXMuX2ZyYWdtZW50PSIjIixqPSJmcmFnbWVudCIpOm8hPXUmJiIJIiE9dSYmIlxuIiE9dSYmIlxyIiE9dSYmKHRoaXMuX3NjaGVtZURhdGErPWUodSkpO2JyZWFrO2Nhc2Uibm8gc2NoZW1lIjppZihoJiZiKGguX3NjaGVtZSkpe2o9InJlbGF0aXZlIjtjb250aW51ZX1pKCJNaXNzaW5nIHNjaGVtZS4iKSxjLmNhbGwodGhpcyk7YnJlYWs7Y2FzZSJyZWxhdGl2ZSBvciBhdXRob3JpdHkiOmlmKCIvIiE9dXx8Ii8iIT1hW2srMV0pe2koIkV4cGVjdGVkIC8sIGdvdDogIit1KSxqPSJyZWxhdGl2ZSI7Y29udGludWV9aj0iYXV0aG9yaXR5IGlnbm9yZSBzbGFzaGVzIjticmVhaztjYXNlInJlbGF0aXZlIjppZih0aGlzLl9pc1JlbGF0aXZlPSEwLCJmaWxlIiE9dGhpcy5fc2NoZW1lJiYodGhpcy5fc2NoZW1lPWguX3NjaGVtZSksbz09dSl7dGhpcy5faG9zdD1oLl9ob3N0LHRoaXMuX3BvcnQ9aC5fcG9ydCx0aGlzLl9wYXRoPWguX3BhdGguc2xpY2UoKSx0aGlzLl9xdWVyeT1oLl9xdWVyeTsKYnJlYWsgYX1pZigiLyI9PXV8fCJcXCI9PXUpIlxcIj09dSYmaSgiXFwgaXMgYW4gaW52YWxpZCBjb2RlIHBvaW50LiIpLGo9InJlbGF0aXZlIHNsYXNoIjtlbHNlIGlmKCI/Ij09dSl0aGlzLl9ob3N0PWguX2hvc3QsdGhpcy5fcG9ydD1oLl9wb3J0LHRoaXMuX3BhdGg9aC5fcGF0aC5zbGljZSgpLHRoaXMuX3F1ZXJ5PSI/IixqPSJxdWVyeSI7ZWxzZXtpZigiIyIhPXUpe3ZhciB2PWFbaysxXSx3PWFbaysyXTsoImZpbGUiIT10aGlzLl9zY2hlbWV8fCFwLnRlc3QodSl8fCI6IiE9diYmInwiIT12fHxvIT13JiYiLyIhPXcmJiJcXCIhPXcmJiI/IiE9dyYmIiMiIT13KSYmKHRoaXMuX2hvc3Q9aC5faG9zdCx0aGlzLl9wb3J0PWguX3BvcnQsdGhpcy5fcGF0aD1oLl9wYXRoLnNsaWNlKCksdGhpcy5fcGF0aC5wb3AoKSksaj0icmVsYXRpdmUgcGF0aCI7Y29udGludWV9dGhpcy5faG9zdD1oLl9ob3N0LHRoaXMuX3BvcnQ9aC5fcG9ydCx0aGlzLl9wYXRoPWguX3BhdGguc2xpY2UoKSx0aGlzLl9xdWVyeT1oLl9xdWVyeSx0aGlzLl9mcmFnbWVudD0iIyIsaj0iZnJhZ21lbnQifWJyZWFrO2Nhc2UicmVsYXRpdmUgc2xhc2giOmlmKCIvIiE9dSYmIlxcIiE9dSl7ImZpbGUiIT10aGlzLl9zY2hlbWUmJih0aGlzLl9ob3N0PWguX2hvc3QsdGhpcy5fcG9ydD1oLl9wb3J0KSxqPSJyZWxhdGl2ZSBwYXRoIjtjb250aW51ZX0iXFwiPT11JiZpKCJcXCBpcyBhbiBpbnZhbGlkIGNvZGUgcG9pbnQuIiksaj0iZmlsZSI9PXRoaXMuX3NjaGVtZT8iZmlsZSBob3N0IjoiYXV0aG9yaXR5IGlnbm9yZSBzbGFzaGVzIjticmVhaztjYXNlImF1dGhvcml0eSBmaXJzdCBzbGFzaCI6aWYoIi8iIT11KXtpKCJFeHBlY3RlZCAnLycsIGdvdDogIit1KSxqPSJhdXRob3JpdHkgaWdub3JlIHNsYXNoZXMiO2NvbnRpbnVlfWo9ImF1dGhvcml0eSBzZWNvbmQgc2xhc2giO2JyZWFrO2Nhc2UiYXV0aG9yaXR5IHNlY29uZCBzbGFzaCI6aWYoaj0iYXV0aG9yaXR5IGlnbm9yZSBzbGFzaGVzIiwiLyIhPXUpe2koIkV4cGVjdGVkICcvJywgZ290OiAiK3UpO2NvbnRpbnVlfWJyZWFrO2Nhc2UiYXV0aG9yaXR5IGlnbm9yZSBzbGFzaGVzIjppZigiLyIhPXUmJiJcXCIhPXUpe2o9ImF1dGhvcml0eSI7Y29udGludWV9aSgiRXhwZWN0ZWQgYXV0aG9yaXR5LCBnb3Q6ICIrdSk7YnJlYWs7Y2FzZSJhdXRob3JpdHkiOmlmKCJAIj09dSl7ciYmKGkoIkAgYWxyZWFkeSBzZWVuLiIpLGwrPSIlNDAiKSxyPSEwO2Zvcih2YXIgeD0wO3g8bC5sZW5ndGg7eCsrKXt2YXIgeT1sW3hdO2lmKCIJIiE9eSYmIlxuIiE9eSYmIlxyIiE9eSlpZigiOiIhPXl8fG51bGwhPT10aGlzLl9wYXNzd29yZCl7dmFyIHo9ZSh5KTtudWxsIT09dGhpcy5fcGFzc3dvcmQ/dGhpcy5fcGFzc3dvcmQrPXo6dGhpcy5fdXNlcm5hbWUrPXp9ZWxzZSB0aGlzLl9wYXNzd29yZD0iIjtlbHNlIGkoIkludmFsaWQgd2hpdGVzcGFjZSBpbiBhdXRob3JpdHkuIil9bD0iIn1lbHNle2lmKG89PXV8fCIvIj09dXx8IlxcIj09dXx8Ij8iPT11fHwiIyI9PXUpe2stPWwubGVuZ3RoLGw9IiIsaj0iaG9zdCI7Y29udGludWV9bCs9dX1icmVhaztjYXNlImZpbGUgaG9zdCI6aWYobz09dXx8Ii8iPT11fHwiXFwiPT11fHwiPyI9PXV8fCIjIj09dSl7MiE9bC5sZW5ndGh8fCFwLnRlc3QobFswXSl8fCI6IiE9bFsxXSYmInwiIT1sWzFdPzA9PWwubGVuZ3RoP2o9InJlbGF0aXZlIHBhdGggc3RhcnQiOih0aGlzLl9ob3N0PWQuY2FsbCh0aGlzLGwpLGw9IiIsaj0icmVsYXRpdmUgcGF0aCBzdGFydCIpOmo9InJlbGF0aXZlIHBhdGgiO2NvbnRpbnVlfSIJIj09dXx8IlxuIj09dXx8IlxyIj09dT9pKCJJbnZhbGlkIHdoaXRlc3BhY2UgaW4gZmlsZSBob3N0LiIpOmwrPXU7YnJlYWs7Y2FzZSJob3N0IjpjYXNlImhvc3RuYW1lIjppZigiOiIhPXV8fHMpe2lmKG89PXV8fCIvIj09dXx8IlxcIj09dXx8Ij8iPT11fHwiIyI9PXUpe2lmKHRoaXMuX2hvc3Q9ZC5jYWxsKHRoaXMsbCksbD0iIixqPSJyZWxhdGl2ZSBwYXRoIHN0YXJ0IixnKWJyZWFrIGE7Y29udGludWV9IgkiIT11JiYiXG4iIT11JiYiXHIiIT11PygiWyI9PXU/cz0hMDoiXSI9PXUmJihzPSExKSxsKz11KTppKCJJbnZhbGlkIGNvZGUgcG9pbnQgaW4gaG9zdC9ob3N0bmFtZTogIit1KX1lbHNlIGlmKHRoaXMuX2hvc3Q9ZC5jYWxsKHRoaXMsbCksbD0iIixqPSJwb3J0IiwiaG9zdG5hbWUiPT1nKWJyZWFrIGE7YnJlYWs7Y2FzZSJwb3J0IjppZigvWzAtOV0vLnRlc3QodSkpbCs9dTtlbHNle2lmKG89PXV8fCIvIj09dXx8IlxcIj09dXx8Ij8iPT11fHwiIyI9PXV8fGcpe2lmKCIiIT1sKXt2YXIgQT1wYXJzZUludChsLDEwKTtBIT1tW3RoaXMuX3NjaGVtZV0mJih0aGlzLl9wb3J0PUErIiIpLGw9IiJ9aWYoZylicmVhayBhO2o9InJlbGF0aXZlIHBhdGggc3RhcnQiO2NvbnRpbnVlfSIJIj09dXx8IlxuIj09dXx8IlxyIj09dT9pKCJJbnZhbGlkIGNvZGUgcG9pbnQgaW4gcG9ydDogIit1KTpjLmNhbGwodGhpcyl9YnJlYWs7Y2FzZSJyZWxhdGl2ZSBwYXRoIHN0YXJ0IjppZigiXFwiPT11JiZpKCInXFwnIG5vdCBhbGxvd2VkIGluIHBhdGguIiksaj0icmVsYXRpdmUgcGF0aCIsIi8iIT11JiYiXFwiIT11KWNvbnRpbnVlO2JyZWFrO2Nhc2UicmVsYXRpdmUgcGF0aCI6aWYobyE9dSYmIi8iIT11JiYiXFwiIT11JiYoZ3x8Ij8iIT11JiYiIyIhPXUpKSIJIiE9dSYmIlxuIiE9dSYmIlxyIiE9dSYmKGwrPWUodSkpO2Vsc2V7IlxcIj09dSYmaSgiXFwgbm90IGFsbG93ZWQgaW4gcmVsYXRpdmUgcGF0aC4iKTt2YXIgQjsoQj1uW2wudG9Mb3dlckNhc2UoKV0pJiYobD1CKSwiLi4iPT1sPyh0aGlzLl9wYXRoLnBvcCgpLCIvIiE9dSYmIlxcIiE9dSYmdGhpcy5fcGF0aC5wdXNoKCIiKSk6Ii4iPT1sJiYiLyIhPXUmJiJcXCIhPXU/dGhpcy5fcGF0aC5wdXNoKCIiKToiLiIhPWwmJigiZmlsZSI9PXRoaXMuX3NjaGVtZSYmMD09dGhpcy5fcGF0aC5sZW5ndGgmJjI9PWwubGVuZ3RoJiZwLnRlc3QobFswXSkmJiJ8Ij09bFsxXSYmKGw9bFswXSsiOiIpLHRoaXMuX3BhdGgucHVzaChsKSksbD0iIiwiPyI9PXU/KHRoaXMuX3F1ZXJ5PSI/IixqPSJxdWVyeSIpOiIjIj09dSYmKHRoaXMuX2ZyYWdtZW50PSIjIixqPSJmcmFnbWVudCIpfWJyZWFrO2Nhc2UicXVlcnkiOmd8fCIjIiE9dT9vIT11JiYiCSIhPXUmJiJcbiIhPXUmJiJcciIhPXUmJih0aGlzLl9xdWVyeSs9Zih1KSk6KHRoaXMuX2ZyYWdtZW50PSIjIixqPSJmcmFnbWVudCIpO2JyZWFrO2Nhc2UiZnJhZ21lbnQiOm8hPXUmJiIJIiE9dSYmIlxuIiE9dSYmIlxyIiE9dSYmKHRoaXMuX2ZyYWdtZW50Kz11KX1rKyt9fWZ1bmN0aW9uIGgoKXt0aGlzLl9zY2hlbWU9IiIsdGhpcy5fc2NoZW1lRGF0YT0iIix0aGlzLl91c2VybmFtZT0iIix0aGlzLl9wYXNzd29yZD1udWxsLHRoaXMuX2hvc3Q9IiIsdGhpcy5fcG9ydD0iIix0aGlzLl9wYXRoPVtdLHRoaXMuX3F1ZXJ5PSIiLHRoaXMuX2ZyYWdtZW50PSIiLHRoaXMuX2lzSW52YWxpZD0hMSx0aGlzLl9pc1JlbGF0aXZlPSExfWZ1bmN0aW9uIGkoYSxiKXt2b2lkIDA9PT1ifHxiIGluc3RhbmNlb2YgaXx8KGI9bmV3IGkoU3RyaW5nKGIpKSksdGhpcy5fdXJsPWEsaC5jYWxsKHRoaXMpO3ZhciBjPWEucmVwbGFjZSgvXlsgXHRcclxuXGZdK3xbIFx0XHJcblxmXSskL2csIiIpO2cuY2FsbCh0aGlzLGMsbnVsbCxiKX12YXIgaj0hMTtpZighYS5mb3JjZUpVUkwpdHJ5e3ZhciBrPW5ldyBVUkwoImIiLCJodHRwOi8vYSIpO2o9Imh0dHA6Ly9hL2IiPT09ay5ocmVmfWNhdGNoKGwpe31pZighail7dmFyIG09T2JqZWN0LmNyZWF0ZShudWxsKTttLmZ0cD0yMSxtLmZpbGU9MCxtLmdvcGhlcj03MCxtLmh0dHA9ODAsbS5odHRwcz00NDMsbS53cz04MCxtLndzcz00NDM7dmFyIG49T2JqZWN0LmNyZWF0ZShudWxsKTtuWyIlMmUiXT0iLiIsblsiLiUyZSJdPSIuLiIsblsiJTJlLiJdPSIuLiIsblsiJTJlJTJlIl09Ii4uIjt2YXIgbz12b2lkIDAscD0vW2EtekEtWl0vLHE9L1thLXpBLVowLTlcK1wtXC5dLztpLnByb3RvdHlwZT17Z2V0IGhyZWYoKXtpZih0aGlzLl9pc0ludmFsaWQpcmV0dXJuIHRoaXMuX3VybDt2YXIgYT0iIjtyZXR1cm4oIiIhPXRoaXMuX3VzZXJuYW1lfHxudWxsIT10aGlzLl9wYXNzd29yZCkmJihhPXRoaXMuX3VzZXJuYW1lKyhudWxsIT10aGlzLl9wYXNzd29yZD8iOiIrdGhpcy5fcGFzc3dvcmQ6IiIpKyJAIiksdGhpcy5wcm90b2NvbCsodGhpcy5faXNSZWxhdGl2ZT8iLy8iK2ErdGhpcy5ob3N0OiIiKSt0aGlzLnBhdGhuYW1lK3RoaXMuX3F1ZXJ5K3RoaXMuX2ZyYWdtZW50fSxzZXQgaHJlZihhKXtoLmNhbGwodGhpcyksZy5jYWxsKHRoaXMsYSl9LGdldCBwcm90b2NvbCgpe3JldHVybiB0aGlzLl9zY2hlbWUrIjoifSxzZXQgcHJvdG9jb2woYSl7dGhpcy5faXNJbnZhbGlkfHxnLmNhbGwodGhpcyxhKyI6Iiwic2NoZW1lIHN0YXJ0Iil9LGdldCBob3N0KCl7cmV0dXJuIHRoaXMuX2lzSW52YWxpZD8iIjp0aGlzLl9wb3J0P3RoaXMuX2hvc3QrIjoiK3RoaXMuX3BvcnQ6dGhpcy5faG9zdH0sc2V0IGhvc3QoYSl7IXRoaXMuX2lzSW52YWxpZCYmdGhpcy5faXNSZWxhdGl2ZSYmZy5jYWxsKHRoaXMsYSwiaG9zdCIpfSxnZXQgaG9zdG5hbWUoKXtyZXR1cm4gdGhpcy5faG9zdH0sc2V0IGhvc3RuYW1lKGEpeyF0aGlzLl9pc0ludmFsaWQmJnRoaXMuX2lzUmVsYXRpdmUmJmcuY2FsbCh0aGlzLGEsImhvc3RuYW1lIil9LGdldCBwb3J0KCl7cmV0dXJuIHRoaXMuX3BvcnR9LHNldCBwb3J0KGEpeyF0aGlzLl9pc0ludmFsaWQmJnRoaXMuX2lzUmVsYXRpdmUmJmcuY2FsbCh0aGlzLGEsInBvcnQiKX0sZ2V0IHBhdGhuYW1lKCl7cmV0dXJuIHRoaXMuX2lzSW52YWxpZD8iIjp0aGlzLl9pc1JlbGF0aXZlPyIvIit0aGlzLl9wYXRoLmpvaW4oIi8iKTp0aGlzLl9zY2hlbWVEYXRhfSxzZXQgcGF0aG5hbWUoYSl7IXRoaXMuX2lzSW52YWxpZCYmdGhpcy5faXNSZWxhdGl2ZSYmKHRoaXMuX3BhdGg9W10sZy5jYWxsKHRoaXMsYSwicmVsYXRpdmUgcGF0aCBzdGFydCIpKX0sZ2V0IHNlYXJjaCgpe3JldHVybiB0aGlzLl9pc0ludmFsaWR8fCF0aGlzLl9xdWVyeXx8Ij8iPT10aGlzLl9xdWVyeT8iIjp0aGlzLl9xdWVyeX0sc2V0IHNlYXJjaChhKXshdGhpcy5faXNJbnZhbGlkJiZ0aGlzLl9pc1JlbGF0aXZlJiYodGhpcy5fcXVlcnk9Ij8iLCI/Ij09YVswXSYmKGE9YS5zbGljZSgxKSksZy5jYWxsKHRoaXMsYSwicXVlcnkiKSl9LGdldCBoYXNoKCl7cmV0dXJuIHRoaXMuX2lzSW52YWxpZHx8IXRoaXMuX2ZyYWdtZW50fHwiIyI9PXRoaXMuX2ZyYWdtZW50PyIiOnRoaXMuX2ZyYWdtZW50fSxzZXQgaGFzaChhKXt0aGlzLl9pc0ludmFsaWR8fCh0aGlzLl9mcmFnbWVudD0iIyIsIiMiPT1hWzBdJiYoYT1hLnNsaWNlKDEpKSxnLmNhbGwodGhpcyxhLCJmcmFnbWVudCIpKX19LGEuVVJMPWl9fSh3aW5kb3cpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7Zm9yKHZhciBiPWF8fHt9LGQ9MTtkPGFyZ3VtZW50cy5sZW5ndGg7ZCsrKXt2YXIgZT1hcmd1bWVudHNbZF07dHJ5e2Zvcih2YXIgZiBpbiBlKWMoZixlLGIpfWNhdGNoKGcpe319cmV0dXJuIGJ9ZnVuY3Rpb24gYyhhLGIsYyl7dmFyIGU9ZChiLGEpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShjLGEsZSl9ZnVuY3Rpb24gZChhLGIpe2lmKGEpe3ZhciBjPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoYSxiKTtyZXR1cm4gY3x8ZChPYmplY3QuZ2V0UHJvdG90eXBlT2YoYSksYil9fUZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kfHwoRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQ9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcyxjPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKTtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgZD1jLnNsaWNlKCk7cmV0dXJuIGQucHVzaC5hcHBseShkLGFyZ3VtZW50cyksYi5hcHBseShhLGQpfX0pLGEubWl4aW49Yn0od2luZG93LlBsYXRmb3JtKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhLGIsYyl7dmFyIGQ9InN0cmluZyI9PXR5cGVvZiBhP2RvY3VtZW50LmNyZWF0ZUVsZW1lbnQoYSk6YS5jbG9uZU5vZGUoITApO2lmKGQuaW5uZXJIVE1MPWIsYylmb3IodmFyIGUgaW4gYylkLnNldEF0dHJpYnV0ZShlLGNbZV0pO3JldHVybiBkfXZhciBjPURPTVRva2VuTGlzdC5wcm90b3R5cGUuYWRkLGQ9RE9NVG9rZW5MaXN0LnByb3RvdHlwZS5yZW1vdmU7RE9NVG9rZW5MaXN0LnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24oKXtmb3IodmFyIGE9MDthPGFyZ3VtZW50cy5sZW5ndGg7YSsrKWMuY2FsbCh0aGlzLGFyZ3VtZW50c1thXSl9LERPTVRva2VuTGlzdC5wcm90b3R5cGUucmVtb3ZlPWZ1bmN0aW9uKCl7Zm9yKHZhciBhPTA7YTxhcmd1bWVudHMubGVuZ3RoO2ErKylkLmNhbGwodGhpcyxhcmd1bWVudHNbYV0pfSxET01Ub2tlbkxpc3QucHJvdG90eXBlLnRvZ2dsZT1mdW5jdGlvbihhLGIpezE9PWFyZ3VtZW50cy5sZW5ndGgmJihiPSF0aGlzLmNvbnRhaW5zKGEpKSxiP3RoaXMuYWRkKGEpOnRoaXMucmVtb3ZlKGEpfSxET01Ub2tlbkxpc3QucHJvdG90eXBlLnN3aXRjaD1mdW5jdGlvbihhLGIpe2EmJnRoaXMucmVtb3ZlKGEpLGImJnRoaXMuYWRkKGIpfTt2YXIgZT1mdW5jdGlvbigpe3JldHVybiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh0aGlzKX0sZj13aW5kb3cuTmFtZWROb2RlTWFwfHx3aW5kb3cuTW96TmFtZWRBdHRyTWFwfHx7fTtpZihOb2RlTGlzdC5wcm90b3R5cGUuYXJyYXk9ZSxmLnByb3RvdHlwZS5hcnJheT1lLEhUTUxDb2xsZWN0aW9uLnByb3RvdHlwZS5hcnJheT1lLCF3aW5kb3cucGVyZm9ybWFuY2Upe3ZhciBnPURhdGUubm93KCk7d2luZG93LnBlcmZvcm1hbmNlPXtub3c6ZnVuY3Rpb24oKXtyZXR1cm4gRGF0ZS5ub3coKS1nfX19d2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZXx8KHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWU9ZnVuY3Rpb24oKXt2YXIgYT13aW5kb3cud2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lfHx3aW5kb3cubW96UmVxdWVzdEFuaW1hdGlvbkZyYW1lO3JldHVybiBhP2Z1bmN0aW9uKGIpe3JldHVybiBhKGZ1bmN0aW9uKCl7YihwZXJmb3JtYW5jZS5ub3coKSl9KX06ZnVuY3Rpb24oYSl7cmV0dXJuIHdpbmRvdy5zZXRUaW1lb3V0KGEsMWUzLzYwKX19KCkpLHdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZXx8KHdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZT1mdW5jdGlvbigpe3JldHVybiB3aW5kb3cud2Via2l0Q2FuY2VsQW5pbWF0aW9uRnJhbWV8fHdpbmRvdy5tb3pDYW5jZWxBbmltYXRpb25GcmFtZXx8ZnVuY3Rpb24oYSl7Y2xlYXJUaW1lb3V0KGEpfX0oKSk7dmFyIGg9W10saT1mdW5jdGlvbigpe2gucHVzaChhcmd1bWVudHMpfTt3aW5kb3cuUG9seW1lcj1pLGEuZGVsaXZlckRlY2xhcmF0aW9ucz1mdW5jdGlvbigpe3JldHVybiBhLmRlbGl2ZXJEZWNsYXJhdGlvbnM9ZnVuY3Rpb24oKXt0aHJvdyJQb3NzaWJsZSBhdHRlbXB0IHRvIGxvYWQgUG9seW1lciB0d2ljZSJ9LGh9LHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJET01Db250ZW50TG9hZGVkIixmdW5jdGlvbigpe3dpbmRvdy5Qb2x5bWVyPT09aSYmKHdpbmRvdy5Qb2x5bWVyPWZ1bmN0aW9uKCl7Y29uc29sZS5lcnJvcignWW91IHRyaWVkIHRvIHVzZSBwb2x5bWVyIHdpdGhvdXQgbG9hZGluZyBpdCBmaXJzdC4gVG8gbG9hZCBwb2x5bWVyLCA8bGluayByZWw9ImltcG9ydCIgaHJlZj0iY29tcG9uZW50cy9wb2x5bWVyL3BvbHltZXIuaHRtbCI+Jyl9KX0pLGEuY3JlYXRlRE9NPWJ9KHdpbmRvdy5QbGF0Zm9ybSksZnVuY3Rpb24oYSl7YS50ZW1wbGF0ZUNvbnRlbnQ9YS50ZW1wbGF0ZUNvbnRlbnR8fGZ1bmN0aW9uKGEpe3JldHVybiBhLmNvbnRlbnR9fSh3aW5kb3cuUGxhdGZvcm0pLGZ1bmN0aW9uKGEpe2E9YXx8KHdpbmRvdy5JbnNwZWN0b3I9e30pO3ZhciBiO3dpbmRvdy5zaW5zcGVjdD1mdW5jdGlvbihhLGQpe2J8fChiPXdpbmRvdy5vcGVuKCIiLCJTaGFkb3dET00gSW5zcGVjdG9yIixudWxsLCEwKSxiLmRvY3VtZW50LndyaXRlKGMpLGIuYXBpPXtzaGFkb3dpemU6c2hhZG93aXplfSksZihhfHx3cmFwKGRvY3VtZW50LmJvZHkpLGQpfTt2YXIgYz1bIjwhRE9DVFlQRSBodG1sPiIsIjxodG1sPiIsIiAgPGhlYWQ+IiwiICAgIDx0aXRsZT5TaGFkb3dET00gSW5zcGVjdG9yPC90aXRsZT4iLCIgICAgPHN0eWxlPiIsIiAgICAgIGJvZHkgeyIsIiAgICAgIH0iLCIgICAgICBwcmUgeyIsJyAgICAgICAgZm9udDogOXB0ICJDb3VyaWVyIE5ldyIsIG1vbm9zcGFjZTsnLCIgICAgICAgIGxpbmUtaGVpZ2h0OiAxLjVlbTsiLCIgICAgICB9IiwiICAgICAgdGFnIHsiLCIgICAgICAgIGNvbG9yOiBwdXJwbGU7IiwiICAgICAgfSIsIiAgICAgIHVsIHsiLCIgICAgICAgICBtYXJnaW46IDA7IiwiICAgICAgICAgcGFkZGluZzogMDsiLCIgICAgICAgICBsaXN0LXN0eWxlOiBub25lOyIsIiAgICAgIH0iLCIgICAgICBsaSB7IiwiICAgICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrOyIsIiAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmMWYxZjE7IiwiICAgICAgICAgcGFkZGluZzogNHB4IDZweDsiLCIgICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7IiwiICAgICAgICAgbWFyZ2luLXJpZ2h0OiA0cHg7IiwiICAgICAgfSIsIiAgICA8L3N0eWxlPiIsIiAgPC9oZWFkPiIsIiAgPGJvZHk+IiwnICAgIDx1bCBpZD0iY3J1bWJzIj4nLCIgICAgPC91bD4iLCcgICAgPGRpdiBpZD0idHJlZSI+PC9kaXY+JywiICA8L2JvZHk+IiwiPC9odG1sPiJdLmpvaW4oIlxuIiksZD1bXSxlPWZ1bmN0aW9uKCl7dmFyIGE9Yi5kb2N1bWVudCxjPWEucXVlcnlTZWxlY3RvcigiI2NydW1icyIpO2MudGV4dENvbnRlbnQ9IiI7Zm9yKHZhciBlLGc9MDtlPWRbZ107ZysrKXt2YXIgaD1hLmNyZWF0ZUVsZW1lbnQoImEiKTtoLmhyZWY9IiMiLGgudGV4dENvbnRlbnQ9ZS5sb2NhbE5hbWUsaC5pZHg9ZyxoLm9uY2xpY2s9ZnVuY3Rpb24oYSl7Zm9yKHZhciBiO2QubGVuZ3RoPnRoaXMuaWR4OyliPWQucG9wKCk7ZihiLnNoYWRvd3x8YixiKSxhLnByZXZlbnREZWZhdWx0KCl9LGMuYXBwZW5kQ2hpbGQoYS5jcmVhdGVFbGVtZW50KCJsaSIpKS5hcHBlbmRDaGlsZChoKX19LGY9ZnVuY3Rpb24oYSxjKXt2YXIgZj1iLmRvY3VtZW50O2s9W107dmFyIGc9Y3x8YTtkLnB1c2goZyksZSgpLGYuYm9keS5xdWVyeVNlbGVjdG9yKCIjdHJlZSIpLmlubmVySFRNTD0iPHByZT4iK2ooYSxhLmNoaWxkTm9kZXMpKyI8L3ByZT4ifSxnPUFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwuYmluZChBcnJheS5wcm90b3R5cGUuZm9yRWFjaCksaD17U1RZTEU6MSxTQ1JJUFQ6MSwiI2NvbW1lbnQiOjEsVEVNUExBVEU6MX0saT1mdW5jdGlvbihhKXtyZXR1cm4gaFthLm5vZGVOYW1lXX0saj1mdW5jdGlvbihhLGIsYyl7aWYoaShhKSlyZXR1cm4iIjt2YXIgZD1jfHwiIjtpZihhLmxvY2FsTmFtZXx8MTE9PWEubm9kZVR5cGUpe3ZhciBlPWEubG9jYWxOYW1lfHwic2hhZG93LXJvb3QiLGY9ZCtsKGEpOyJjb250ZW50Ij09ZSYmKGI9YS5nZXREaXN0cmlidXRlZE5vZGVzKCkpLGYrPSI8YnIvPiI7dmFyIGg9ZCsiJm5ic3A7Jm5ic3A7IjtnKGIsZnVuY3Rpb24oYSl7Zis9aihhLGEuY2hpbGROb2RlcyxoKX0pLGYrPWQse2JyOjF9W2VdfHwoZis9Ijx0YWc+Jmx0Oy8iK2UrIiZndDs8L3RhZz4iLGYrPSI8YnIvPiIpfWVsc2V7dmFyIGs9YS50ZXh0Q29udGVudC50cmltKCk7Zj1rP2QrJyInK2srJyI8YnIvPic6IiJ9cmV0dXJuIGZ9LGs9W10sbD1mdW5jdGlvbihhKXt2YXIgYj0iPHRhZz4mbHQ7IixjPWEubG9jYWxOYW1lfHwic2hhZG93LXJvb3QiO3JldHVybiBhLndlYmtpdFNoYWRvd1Jvb3R8fGEuc2hhZG93Um9vdD8oYis9JyA8YnV0dG9uIGlkeD0iJytrLmxlbmd0aCsnIiBvbmNsaWNrPSJhcGkuc2hhZG93aXplLmNhbGwodGhpcykiPicrYysiPC9idXR0b24+IixrLnB1c2goYSkpOmIrPWN8fCJzaGFkb3ctcm9vdCIsYS5hdHRyaWJ1dGVzJiZnKGEuYXR0cmlidXRlcyxmdW5jdGlvbihhKXtiKz0iICIrYS5uYW1lKyhhLnZhbHVlPyc9IicrYS52YWx1ZSsnIic6IiIpfSksYis9IiZndDs8L3RhZz4ifTtzaGFkb3dpemU9ZnVuY3Rpb24oKXt2YXIgYT1OdW1iZXIodGhpcy5hdHRyaWJ1dGVzLmlkeC52YWx1ZSksYj1rW2FdO2I/ZihiLndlYmtpdFNoYWRvd1Jvb3R8fGIuc2hhZG93Um9vdCxiKTooY29uc29sZS5sb2coImJhZCBzaGFkb3dpemUgbm9kZSIpLGNvbnNvbGUuZGlyKHRoaXMpKX0sYS5vdXRwdXQ9an0od2luZG93Lkluc3BlY3RvciksZnVuY3Rpb24oKXt2YXIgYT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzdHlsZSIpO2EudGV4dENvbnRlbnQ9ImJvZHkge3RyYW5zaXRpb246IG9wYWNpdHkgZWFzZS1pbiAwLjJzOyB9IFxuYm9keVt1bnJlc29sdmVkXSB7b3BhY2l0eTogMDsgZGlzcGxheTogYmxvY2s7IG92ZXJmbG93OiBoaWRkZW47IH0gXG4iO3ZhciBiPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoImhlYWQiKTtiLmluc2VydEJlZm9yZShhLGIuZmlyc3RDaGlsZCl9KFBsYXRmb3JtKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEsYil7cmV0dXJuIGI9Ynx8W10sYi5tYXB8fChiPVtiXSksYS5hcHBseSh0aGlzLGIubWFwKGQpKX1mdW5jdGlvbiBjKGEsYyxkKXt2YXIgZTtzd2l0Y2goYXJndW1lbnRzLmxlbmd0aCl7Y2FzZSAwOnJldHVybjtjYXNlIDE6ZT1udWxsO2JyZWFrO2Nhc2UgMjplPWMuYXBwbHkodGhpcyk7YnJlYWs7ZGVmYXVsdDplPWIoZCxjKX1mW2FdPWV9ZnVuY3Rpb24gZChhKXtyZXR1cm4gZlthXX1mdW5jdGlvbiBlKGEsYyl7SFRNTEltcG9ydHMud2hlbkltcG9ydHNSZWFkeShmdW5jdGlvbigpe2IoYyxhKX0pfXZhciBmPXt9O2EubWFyc2hhbD1kLGEubW9kdWxhcml6ZT1jLGEudXNpbmc9ZX0od2luZG93KSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEpe2YudGV4dENvbnRlbnQ9ZCsrLGUucHVzaChhKX1mdW5jdGlvbiBjKCl7Zm9yKDtlLmxlbmd0aDspZS5zaGlmdCgpKCl9dmFyIGQ9MCxlPVtdLGY9ZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoIiIpO25ldyh3aW5kb3cuTXV0YXRpb25PYnNlcnZlcnx8SnNNdXRhdGlvbk9ic2VydmVyKShjKS5vYnNlcnZlKGYse2NoYXJhY3RlckRhdGE6ITB9KSxhLmVuZE9mTWljcm90YXNrPWJ9KFBsYXRmb3JtKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEsYixkLGUpe3JldHVybiBhLnJlcGxhY2UoZSxmdW5jdGlvbihhLGUsZixnKXt2YXIgaD1mLnJlcGxhY2UoL1siJ10vZywiIik7cmV0dXJuIGg9YyhiLGgsZCksZSsiJyIraCsiJyIrZ30pfWZ1bmN0aW9uIGMoYSxiLGMpe2lmKGImJiIvIj09PWJbMF0pcmV0dXJuIGI7dmFyIGU9bmV3IFVSTChiLGEpO3JldHVybiBjP2UuaHJlZjpkKGUuaHJlZil9ZnVuY3Rpb24gZChhKXt2YXIgYj1uZXcgVVJMKGRvY3VtZW50LmJhc2VVUkkpLGM9bmV3IFVSTChhLGIpO3JldHVybiBjLmhvc3Q9PT1iLmhvc3QmJmMucG9ydD09PWIucG9ydCYmYy5wcm90b2NvbD09PWIucHJvdG9jb2w/ZShiLGMpOmF9ZnVuY3Rpb24gZShhLGIpe2Zvcih2YXIgYz1hLnBhdGhuYW1lLGQ9Yi5wYXRobmFtZSxlPWMuc3BsaXQoIi8iKSxmPWQuc3BsaXQoIi8iKTtlLmxlbmd0aCYmZVswXT09PWZbMF07KWUuc2hpZnQoKSxmLnNoaWZ0KCk7Zm9yKHZhciBnPTAsaD1lLmxlbmd0aC0xO2g+ZztnKyspZi51bnNoaWZ0KCIuLiIpO3JldHVybiBmLmpvaW4oIi8iKStiLnNlYXJjaCtiLmhhc2h9dmFyIGY9e3Jlc29sdmVEb206ZnVuY3Rpb24oYSxiKXtiPWJ8fGEub3duZXJEb2N1bWVudC5iYXNlVVJJLHRoaXMucmVzb2x2ZUF0dHJpYnV0ZXMoYSxiKSx0aGlzLnJlc29sdmVTdHlsZXMoYSxiKTt2YXIgYz1hLnF1ZXJ5U2VsZWN0b3JBbGwoInRlbXBsYXRlIik7aWYoYylmb3IodmFyIGQsZT0wLGY9Yy5sZW5ndGg7Zj5lJiYoZD1jW2VdKTtlKyspZC5jb250ZW50JiZ0aGlzLnJlc29sdmVEb20oZC5jb250ZW50LGIpfSxyZXNvbHZlVGVtcGxhdGU6ZnVuY3Rpb24oYSl7dGhpcy5yZXNvbHZlRG9tKGEuY29udGVudCxhLm93bmVyRG9jdW1lbnQuYmFzZVVSSSl9LHJlc29sdmVTdHlsZXM6ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLnF1ZXJ5U2VsZWN0b3JBbGwoInN0eWxlIik7aWYoYylmb3IodmFyIGQsZT0wLGY9Yy5sZW5ndGg7Zj5lJiYoZD1jW2VdKTtlKyspdGhpcy5yZXNvbHZlU3R5bGUoZCxiKX0scmVzb2x2ZVN0eWxlOmZ1bmN0aW9uKGEsYil7Yj1ifHxhLm93bmVyRG9jdW1lbnQuYmFzZVVSSSxhLnRleHRDb250ZW50PXRoaXMucmVzb2x2ZUNzc1RleHQoYS50ZXh0Q29udGVudCxiKX0scmVzb2x2ZUNzc1RleHQ6ZnVuY3Rpb24oYSxjLGQpe3JldHVybiBhPWIoYSxjLGQsZyksYihhLGMsZCxoKX0scmVzb2x2ZUF0dHJpYnV0ZXM6ZnVuY3Rpb24oYSxiKXthLmhhc0F0dHJpYnV0ZXMmJmEuaGFzQXR0cmlidXRlcygpJiZ0aGlzLnJlc29sdmVFbGVtZW50QXR0cmlidXRlcyhhLGIpO3ZhciBjPWEmJmEucXVlcnlTZWxlY3RvckFsbChqKTtpZihjKWZvcih2YXIgZCxlPTAsZj1jLmxlbmd0aDtmPmUmJihkPWNbZV0pO2UrKyl0aGlzLnJlc29sdmVFbGVtZW50QXR0cmlidXRlcyhkLGIpfSxyZXNvbHZlRWxlbWVudEF0dHJpYnV0ZXM6ZnVuY3Rpb24oYSxkKXtkPWR8fGEub3duZXJEb2N1bWVudC5iYXNlVVJJLGkuZm9yRWFjaChmdW5jdGlvbihlKXt2YXIgZixoPWEuYXR0cmlidXRlc1tlXSxpPWgmJmgudmFsdWU7aSYmaS5zZWFyY2goayk8MCYmKGY9InN0eWxlIj09PWU/YihpLGQsITEsZyk6YyhkLGkpLGgudmFsdWU9Zil9KX19LGc9Lyh1cmxcKCkoW14pXSopKFwpKS9nLGg9LyhAaW1wb3J0W1xzXSsoPyF1cmxcKCkpKFteO10qKSg7KS9nLGk9WyJocmVmIiwic3JjIiwiYWN0aW9uIiwic3R5bGUiLCJ1cmwiXSxqPSJbIitpLmpvaW4oIl0sWyIpKyJdIixrPSJ7ey4qfX0iO2EudXJsUmVzb2x2ZXI9Zn0oUGxhdGZvcm0pLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7dS5wdXNoKGEpLHR8fCh0PSEwLHEoZCkpfWZ1bmN0aW9uIGMoYSl7cmV0dXJuIHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCYmd2luZG93LlNoYWRvd0RPTVBvbHlmaWxsLndyYXBJZk5lZWRlZChhKXx8YX1mdW5jdGlvbiBkKCl7dD0hMTt2YXIgYT11O3U9W10sYS5zb3J0KGZ1bmN0aW9uKGEsYil7cmV0dXJuIGEudWlkXy1iLnVpZF99KTt2YXIgYj0hMTthLmZvckVhY2goZnVuY3Rpb24oYSl7dmFyIGM9YS50YWtlUmVjb3JkcygpO2UoYSksYy5sZW5ndGgmJihhLmNhbGxiYWNrXyhjLGEpLGI9ITApfSksYiYmZCgpfWZ1bmN0aW9uIGUoYSl7YS5ub2Rlc18uZm9yRWFjaChmdW5jdGlvbihiKXt2YXIgYz1wLmdldChiKTtjJiZjLmZvckVhY2goZnVuY3Rpb24oYil7Yi5vYnNlcnZlcj09PWEmJmIucmVtb3ZlVHJhbnNpZW50T2JzZXJ2ZXJzKCl9KX0pfWZ1bmN0aW9uIGYoYSxiKXtmb3IodmFyIGM9YTtjO2M9Yy5wYXJlbnROb2RlKXt2YXIgZD1wLmdldChjKTtpZihkKWZvcih2YXIgZT0wO2U8ZC5sZW5ndGg7ZSsrKXt2YXIgZj1kW2VdLGc9Zi5vcHRpb25zO2lmKGM9PT1hfHxnLnN1YnRyZWUpe3ZhciBoPWIoZyk7aCYmZi5lbnF1ZXVlKGgpfX19fWZ1bmN0aW9uIGcoYSl7dGhpcy5jYWxsYmFja189YSx0aGlzLm5vZGVzXz1bXSx0aGlzLnJlY29yZHNfPVtdLHRoaXMudWlkXz0rK3Z9ZnVuY3Rpb24gaChhLGIpe3RoaXMudHlwZT1hLHRoaXMudGFyZ2V0PWIsdGhpcy5hZGRlZE5vZGVzPVtdLHRoaXMucmVtb3ZlZE5vZGVzPVtdLHRoaXMucHJldmlvdXNTaWJsaW5nPW51bGwsdGhpcy5uZXh0U2libGluZz1udWxsLHRoaXMuYXR0cmlidXRlTmFtZT1udWxsLHRoaXMuYXR0cmlidXRlTmFtZXNwYWNlPW51bGwsdGhpcy5vbGRWYWx1ZT1udWxsfWZ1bmN0aW9uIGkoYSl7dmFyIGI9bmV3IGgoYS50eXBlLGEudGFyZ2V0KTtyZXR1cm4gYi5hZGRlZE5vZGVzPWEuYWRkZWROb2Rlcy5zbGljZSgpLGIucmVtb3ZlZE5vZGVzPWEucmVtb3ZlZE5vZGVzLnNsaWNlKCksYi5wcmV2aW91c1NpYmxpbmc9YS5wcmV2aW91c1NpYmxpbmcsYi5uZXh0U2libGluZz1hLm5leHRTaWJsaW5nLGIuYXR0cmlidXRlTmFtZT1hLmF0dHJpYnV0ZU5hbWUsYi5hdHRyaWJ1dGVOYW1lc3BhY2U9YS5hdHRyaWJ1dGVOYW1lc3BhY2UsYi5vbGRWYWx1ZT1hLm9sZFZhbHVlLGJ9ZnVuY3Rpb24gaihhLGIpe3JldHVybiB3PW5ldyBoKGEsYil9ZnVuY3Rpb24gayhhKXtyZXR1cm4geD94Oih4PWkodykseC5vbGRWYWx1ZT1hLHgpfWZ1bmN0aW9uIGwoKXt3PXg9dm9pZCAwfWZ1bmN0aW9uIG0oYSl7cmV0dXJuIGE9PT14fHxhPT09d31mdW5jdGlvbiBuKGEsYil7cmV0dXJuIGE9PT1iP2E6eCYmbShhKT94Om51bGx9ZnVuY3Rpb24gbyhhLGIsYyl7dGhpcy5vYnNlcnZlcj1hLHRoaXMudGFyZ2V0PWIsdGhpcy5vcHRpb25zPWMsdGhpcy50cmFuc2llbnRPYnNlcnZlZE5vZGVzPVtdfXZhciBwPW5ldyBXZWFrTWFwLHE9d2luZG93Lm1zU2V0SW1tZWRpYXRlO2lmKCFxKXt2YXIgcj1bXSxzPVN0cmluZyhNYXRoLnJhbmRvbSgpKTt3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsZnVuY3Rpb24oYSl7aWYoYS5kYXRhPT09cyl7dmFyIGI9cjtyPVtdLGIuZm9yRWFjaChmdW5jdGlvbihhKXthKCl9KX19KSxxPWZ1bmN0aW9uKGEpe3IucHVzaChhKSx3aW5kb3cucG9zdE1lc3NhZ2UocywiKiIpfX12YXIgdD0hMSx1PVtdLHY9MDtnLnByb3RvdHlwZT17b2JzZXJ2ZTpmdW5jdGlvbihhLGIpe2lmKGE9YyhhKSwhYi5jaGlsZExpc3QmJiFiLmF0dHJpYnV0ZXMmJiFiLmNoYXJhY3RlckRhdGF8fGIuYXR0cmlidXRlT2xkVmFsdWUmJiFiLmF0dHJpYnV0ZXN8fGIuYXR0cmlidXRlRmlsdGVyJiZiLmF0dHJpYnV0ZUZpbHRlci5sZW5ndGgmJiFiLmF0dHJpYnV0ZXN8fGIuY2hhcmFjdGVyRGF0YU9sZFZhbHVlJiYhYi5jaGFyYWN0ZXJEYXRhKXRocm93IG5ldyBTeW50YXhFcnJvcjt2YXIgZD1wLmdldChhKTtkfHxwLnNldChhLGQ9W10pO2Zvcih2YXIgZSxmPTA7ZjxkLmxlbmd0aDtmKyspaWYoZFtmXS5vYnNlcnZlcj09PXRoaXMpe2U9ZFtmXSxlLnJlbW92ZUxpc3RlbmVycygpLGUub3B0aW9ucz1iO2JyZWFrfWV8fChlPW5ldyBvKHRoaXMsYSxiKSxkLnB1c2goZSksdGhpcy5ub2Rlc18ucHVzaChhKSksZS5hZGRMaXN0ZW5lcnMoKX0sZGlzY29ubmVjdDpmdW5jdGlvbigpe3RoaXMubm9kZXNfLmZvckVhY2goZnVuY3Rpb24oYSl7Zm9yKHZhciBiPXAuZ2V0KGEpLGM9MDtjPGIubGVuZ3RoO2MrKyl7dmFyIGQ9YltjXTtpZihkLm9ic2VydmVyPT09dGhpcyl7ZC5yZW1vdmVMaXN0ZW5lcnMoKSxiLnNwbGljZShjLDEpO2JyZWFrfX19LHRoaXMpLHRoaXMucmVjb3Jkc189W119LHRha2VSZWNvcmRzOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5yZWNvcmRzXztyZXR1cm4gdGhpcy5yZWNvcmRzXz1bXSxhfX07dmFyIHcseDtvLnByb3RvdHlwZT17ZW5xdWV1ZTpmdW5jdGlvbihhKXt2YXIgYz10aGlzLm9ic2VydmVyLnJlY29yZHNfLGQ9Yy5sZW5ndGg7aWYoYy5sZW5ndGg+MCl7dmFyIGU9Y1tkLTFdLGY9bihlLGEpO2lmKGYpcmV0dXJuIHZvaWQoY1tkLTFdPWYpfWVsc2UgYih0aGlzLm9ic2VydmVyKTtjW2RdPWF9LGFkZExpc3RlbmVyczpmdW5jdGlvbigpe3RoaXMuYWRkTGlzdGVuZXJzXyh0aGlzLnRhcmdldCl9LGFkZExpc3RlbmVyc186ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5vcHRpb25zO2IuYXR0cmlidXRlcyYmYS5hZGRFdmVudExpc3RlbmVyKCJET01BdHRyTW9kaWZpZWQiLHRoaXMsITApLGIuY2hhcmFjdGVyRGF0YSYmYS5hZGRFdmVudExpc3RlbmVyKCJET01DaGFyYWN0ZXJEYXRhTW9kaWZpZWQiLHRoaXMsITApLGIuY2hpbGRMaXN0JiZhLmFkZEV2ZW50TGlzdGVuZXIoIkRPTU5vZGVJbnNlcnRlZCIsdGhpcywhMCksKGIuY2hpbGRMaXN0fHxiLnN1YnRyZWUpJiZhLmFkZEV2ZW50TGlzdGVuZXIoIkRPTU5vZGVSZW1vdmVkIix0aGlzLCEwKX0scmVtb3ZlTGlzdGVuZXJzOmZ1bmN0aW9uKCl7dGhpcy5yZW1vdmVMaXN0ZW5lcnNfKHRoaXMudGFyZ2V0KX0scmVtb3ZlTGlzdGVuZXJzXzpmdW5jdGlvbihhKXt2YXIgYj10aGlzLm9wdGlvbnM7Yi5hdHRyaWJ1dGVzJiZhLnJlbW92ZUV2ZW50TGlzdGVuZXIoIkRPTUF0dHJNb2RpZmllZCIsdGhpcywhMCksYi5jaGFyYWN0ZXJEYXRhJiZhLnJlbW92ZUV2ZW50TGlzdGVuZXIoIkRPTUNoYXJhY3RlckRhdGFNb2RpZmllZCIsdGhpcywhMCksYi5jaGlsZExpc3QmJmEucmVtb3ZlRXZlbnRMaXN0ZW5lcigiRE9NTm9kZUluc2VydGVkIix0aGlzLCEwKSwoYi5jaGlsZExpc3R8fGIuc3VidHJlZSkmJmEucmVtb3ZlRXZlbnRMaXN0ZW5lcigiRE9NTm9kZVJlbW92ZWQiLHRoaXMsITApfSxhZGRUcmFuc2llbnRPYnNlcnZlcjpmdW5jdGlvbihhKXtpZihhIT09dGhpcy50YXJnZXQpe3RoaXMuYWRkTGlzdGVuZXJzXyhhKSx0aGlzLnRyYW5zaWVudE9ic2VydmVkTm9kZXMucHVzaChhKTt2YXIgYj1wLmdldChhKTtifHxwLnNldChhLGI9W10pLGIucHVzaCh0aGlzKX19LHJlbW92ZVRyYW5zaWVudE9ic2VydmVyczpmdW5jdGlvbigpe3ZhciBhPXRoaXMudHJhbnNpZW50T2JzZXJ2ZWROb2Rlczt0aGlzLnRyYW5zaWVudE9ic2VydmVkTm9kZXM9W10sYS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3RoaXMucmVtb3ZlTGlzdGVuZXJzXyhhKTtmb3IodmFyIGI9cC5nZXQoYSksYz0wO2M8Yi5sZW5ndGg7YysrKWlmKGJbY109PT10aGlzKXtiLnNwbGljZShjLDEpO2JyZWFrfX0sdGhpcyl9LGhhbmRsZUV2ZW50OmZ1bmN0aW9uKGEpe3N3aXRjaChhLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpLGEudHlwZSl7Y2FzZSJET01BdHRyTW9kaWZpZWQiOnZhciBiPWEuYXR0ck5hbWUsYz1hLnJlbGF0ZWROb2RlLm5hbWVzcGFjZVVSSSxkPWEudGFyZ2V0LGU9bmV3IGooImF0dHJpYnV0ZXMiLGQpO2UuYXR0cmlidXRlTmFtZT1iLGUuYXR0cmlidXRlTmFtZXNwYWNlPWM7dmFyIGc9YS5hdHRyQ2hhbmdlPT09TXV0YXRpb25FdmVudC5BRERJVElPTj9udWxsOmEucHJldlZhbHVlO2YoZCxmdW5jdGlvbihhKXtyZXR1cm4hYS5hdHRyaWJ1dGVzfHxhLmF0dHJpYnV0ZUZpbHRlciYmYS5hdHRyaWJ1dGVGaWx0ZXIubGVuZ3RoJiYtMT09PWEuYXR0cmlidXRlRmlsdGVyLmluZGV4T2YoYikmJi0xPT09YS5hdHRyaWJ1dGVGaWx0ZXIuaW5kZXhPZihjKT92b2lkIDA6YS5hdHRyaWJ1dGVPbGRWYWx1ZT9rKGcpOmV9KTticmVhaztjYXNlIkRPTUNoYXJhY3RlckRhdGFNb2RpZmllZCI6dmFyIGQ9YS50YXJnZXQsZT1qKCJjaGFyYWN0ZXJEYXRhIixkKSxnPWEucHJldlZhbHVlO2YoZCxmdW5jdGlvbihhKXtyZXR1cm4gYS5jaGFyYWN0ZXJEYXRhP2EuY2hhcmFjdGVyRGF0YU9sZFZhbHVlP2soZyk6ZTp2b2lkIDB9KTticmVhaztjYXNlIkRPTU5vZGVSZW1vdmVkIjp0aGlzLmFkZFRyYW5zaWVudE9ic2VydmVyKGEudGFyZ2V0KTtjYXNlIkRPTU5vZGVJbnNlcnRlZCI6dmFyIGgsaSxkPWEucmVsYXRlZE5vZGUsbT1hLnRhcmdldDsiRE9NTm9kZUluc2VydGVkIj09PWEudHlwZT8oaD1bbV0saT1bXSk6KGg9W10saT1bbV0pO3ZhciBuPW0ucHJldmlvdXNTaWJsaW5nLG89bS5uZXh0U2libGluZyxlPWooImNoaWxkTGlzdCIsZCk7ZS5hZGRlZE5vZGVzPWgsZS5yZW1vdmVkTm9kZXM9aSxlLnByZXZpb3VzU2libGluZz1uLGUubmV4dFNpYmxpbmc9byxmKGQsZnVuY3Rpb24oYSl7cmV0dXJuIGEuY2hpbGRMaXN0P2U6dm9pZCAwfSl9bCgpfX0sYS5Kc011dGF0aW9uT2JzZXJ2ZXI9ZyxhLk11dGF0aW9uT2JzZXJ2ZXJ8fChhLk11dGF0aW9uT2JzZXJ2ZXI9Zyl9KHRoaXMpLHdpbmRvdy5IVE1MSW1wb3J0cz13aW5kb3cuSFRNTEltcG9ydHN8fHtmbGFnczp7fX0sZnVuY3Rpb24oYSl7dmFyIGI9KGEucGF0aCxhLnhociksYz1hLmZsYWdzLGQ9ZnVuY3Rpb24oYSxiKXt0aGlzLmNhY2hlPXt9LHRoaXMub25sb2FkPWEsdGhpcy5vbmNvbXBsZXRlPWIsdGhpcy5pbmZsaWdodD0wLHRoaXMucGVuZGluZz17fX07ZC5wcm90b3R5cGU9e2FkZE5vZGVzOmZ1bmN0aW9uKGEpe3RoaXMuaW5mbGlnaHQrPWEubGVuZ3RoO2Zvcih2YXIgYixjPTAsZD1hLmxlbmd0aDtkPmMmJihiPWFbY10pO2MrKyl0aGlzLnJlcXVpcmUoYik7dGhpcy5jaGVja0RvbmUoKX0sYWRkTm9kZTpmdW5jdGlvbihhKXt0aGlzLmluZmxpZ2h0KyssdGhpcy5yZXF1aXJlKGEpLHRoaXMuY2hlY2tEb25lKCl9LHJlcXVpcmU6ZnVuY3Rpb24oYSl7dmFyIGI9YS5zcmN8fGEuaHJlZjthLl9fbm9kZVVybD1iLHRoaXMuZGVkdXBlKGIsYSl8fHRoaXMuZmV0Y2goYixhKX0sZGVkdXBlOmZ1bmN0aW9uKGEsYil7aWYodGhpcy5wZW5kaW5nW2FdKXJldHVybiB0aGlzLnBlbmRpbmdbYV0ucHVzaChiKSwhMDtyZXR1cm4gdGhpcy5jYWNoZVthXT8odGhpcy5vbmxvYWQoYSxiLHRoaXMuY2FjaGVbYV0pLHRoaXMudGFpbCgpLCEwKToodGhpcy5wZW5kaW5nW2FdPVtiXSwhMSl9LGZldGNoOmZ1bmN0aW9uKGEsZCl7aWYoYy5sb2FkJiZjb25zb2xlLmxvZygiZmV0Y2giLGEsZCksYS5tYXRjaCgvXmRhdGE6Lykpe3ZhciBlPWEuc3BsaXQoIiwiKSxmPWVbMF0sZz1lWzFdO2c9Zi5pbmRleE9mKCI7YmFzZTY0Iik+LTE/YXRvYihnKTpkZWNvZGVVUklDb21wb25lbnQoZyksc2V0VGltZW91dChmdW5jdGlvbigpe3RoaXMucmVjZWl2ZShhLGQsbnVsbCxnKX0uYmluZCh0aGlzKSwwKX1lbHNle3ZhciBoPWZ1bmN0aW9uKGIsYyxlKXt0aGlzLnJlY2VpdmUoYSxkLGIsYyxlKX0uYmluZCh0aGlzKTtiLmxvYWQoYSxoKX19LHJlY2VpdmU6ZnVuY3Rpb24oYSxiLGMsZCxlKXt0aGlzLmNhY2hlW2FdPWQ7dmFyIGY9dGhpcy5wZW5kaW5nW2FdO2UmJmUhPT1hJiYodGhpcy5jYWNoZVtlXT1kLGY9Zi5jb25jYXQodGhpcy5wZW5kaW5nW2VdKSk7Zm9yKHZhciBnLGg9MCxpPWYubGVuZ3RoO2k+aCYmKGc9ZltoXSk7aCsrKXRoaXMub25sb2FkKGV8fGEsZyxkKSx0aGlzLnRhaWwoKTt0aGlzLnBlbmRpbmdbYV09bnVsbCxlJiZlIT09YSYmKHRoaXMucGVuZGluZ1tlXT1udWxsKX0sdGFpbDpmdW5jdGlvbigpey0tdGhpcy5pbmZsaWdodCx0aGlzLmNoZWNrRG9uZSgpfSxjaGVja0RvbmU6ZnVuY3Rpb24oKXt0aGlzLmluZmxpZ2h0fHx0aGlzLm9uY29tcGxldGUoKX19LGI9Ynx8e2FzeW5jOiEwLG9rOmZ1bmN0aW9uKGEpe3JldHVybiBhLnN0YXR1cz49MjAwJiZhLnN0YXR1czwzMDB8fDMwND09PWEuc3RhdHVzfHwwPT09YS5zdGF0dXN9LGxvYWQ6ZnVuY3Rpb24oYyxkLGUpe3ZhciBmPW5ldyBYTUxIdHRwUmVxdWVzdDtyZXR1cm4oYS5mbGFncy5kZWJ1Z3x8YS5mbGFncy5idXN0KSYmKGMrPSI/IitNYXRoLnJhbmRvbSgpKSxmLm9wZW4oIkdFVCIsYyxiLmFzeW5jKSxmLmFkZEV2ZW50TGlzdGVuZXIoInJlYWR5c3RhdGVjaGFuZ2UiLGZ1bmN0aW9uKCl7aWYoND09PWYucmVhZHlTdGF0ZSl7dmFyIGE9Zi5nZXRSZXNwb25zZUhlYWRlcigiTG9jYXRpb24iKSxjPW51bGw7aWYoYSl2YXIgYz0iLyI9PT1hLnN1YnN0cigwLDEpP2xvY2F0aW9uLm9yaWdpbithOmM7ZC5jYWxsKGUsIWIub2soZikmJmYsZi5yZXNwb25zZXx8Zi5yZXNwb25zZVRleHQsYyl9fSksZi5zZW5kKCksZn0sbG9hZERvY3VtZW50OmZ1bmN0aW9uKGEsYixjKXt0aGlzLmxvYWQoYSxiLGMpLnJlc3BvbnNlVHlwZT0iZG9jdW1lbnQifX0sYS54aHI9YixhLkxvYWRlcj1kfSh3aW5kb3cuSFRNTEltcG9ydHMpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7cmV0dXJuImxpbmsiPT09YS5sb2NhbE5hbWUmJmEucmVsPT09Z31mdW5jdGlvbiBjKGEpe3ZhciBiPWQoYSksYz0iZGF0YTp0ZXh0L2phdmFzY3JpcHQiO3RyeXtjKz0iO2Jhc2U2NCwiK2J0b2EoYil9Y2F0Y2goZSl7Yys9IjtjaGFyc2V0PXV0Zi04LCIrZW5jb2RlVVJJQ29tcG9uZW50KGIpfXJldHVybiBjfWZ1bmN0aW9uIGQoYSl7cmV0dXJuIGEudGV4dENvbnRlbnQrZShhKX1mdW5jdGlvbiBlKGEpe3ZhciBiPWEuX19ub2RlVXJsO2lmKCFiKXtiPWEub3duZXJEb2N1bWVudC5iYXNlVVJJO3ZhciBjPSJbIitNYXRoLmZsb29yKDFlMyooTWF0aC5yYW5kb20oKSsxKSkrIl0iLGQ9YS50ZXh0Q29udGVudC5tYXRjaCgvUG9seW1lclwoWyciXShbXiciXSopLyk7Yz1kJiZkWzFdfHxjLGIrPSIvIitjKyIuanMifXJldHVybiJcbi8vIyBzb3VyY2VVUkw9IitiKyJcbiJ9ZnVuY3Rpb24gZihhKXt2YXIgYj1hLm93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3R5bGUiKTtyZXR1cm4gYi50ZXh0Q29udGVudD1hLnRleHRDb250ZW50LG4ucmVzb2x2ZVVybHNJblN0eWxlKGIpLGJ9dmFyIGc9ImltcG9ydCIsaD1hLmZsYWdzLGk9L1RyaWRlbnQvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCksaj13aW5kb3cuU2hhZG93RE9NUG9seWZpbGw/d2luZG93LlNoYWRvd0RPTVBvbHlmaWxsLndyYXBJZk5lZWRlZChkb2N1bWVudCk6ZG9jdW1lbnQsaz17ZG9jdW1lbnRTZWxlY3RvcnM6ImxpbmtbcmVsPSIrZysiXSIsaW1wb3J0c1NlbGVjdG9yczpbImxpbmtbcmVsPSIrZysiXSIsImxpbmtbcmVsPXN0eWxlc2hlZXRdIiwic3R5bGUiLCJzY3JpcHQ6bm90KFt0eXBlXSkiLCdzY3JpcHRbdHlwZT0idGV4dC9qYXZhc2NyaXB0Il0nXS5qb2luKCIsIiksbWFwOntsaW5rOiJwYXJzZUxpbmsiLHNjcmlwdDoicGFyc2VTY3JpcHQiLHN0eWxlOiJwYXJzZVN0eWxlIn0scGFyc2VOZXh0OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5uZXh0VG9QYXJzZSgpO2EmJnRoaXMucGFyc2UoYSl9LHBhcnNlOmZ1bmN0aW9uKGEpe2lmKHRoaXMuaXNQYXJzZWQoYSkpcmV0dXJuIHZvaWQoaC5wYXJzZSYmY29uc29sZS5sb2coIlslc10gaXMgYWxyZWFkeSBwYXJzZWQiLGEubG9jYWxOYW1lKSk7dmFyIGI9dGhpc1t0aGlzLm1hcFthLmxvY2FsTmFtZV1dO2ImJih0aGlzLm1hcmtQYXJzaW5nKGEpLGIuY2FsbCh0aGlzLGEpKX0sbWFya1BhcnNpbmc6ZnVuY3Rpb24oYSl7aC5wYXJzZSYmY29uc29sZS5sb2coInBhcnNpbmciLGEpLHRoaXMucGFyc2luZ0VsZW1lbnQ9YX0sbWFya1BhcnNpbmdDb21wbGV0ZTpmdW5jdGlvbihhKXthLl9faW1wb3J0UGFyc2VkPSEwLGEuX19pbXBvcnRFbGVtZW50JiYoYS5fX2ltcG9ydEVsZW1lbnQuX19pbXBvcnRQYXJzZWQ9ITApLHRoaXMucGFyc2luZ0VsZW1lbnQ9bnVsbCxoLnBhcnNlJiZjb25zb2xlLmxvZygiY29tcGxldGVkIixhKX0saW52YWxpZGF0ZVBhcnNlOmZ1bmN0aW9uKGEpe2EmJmEuX19pbXBvcnRMaW5rJiYoYS5fX2ltcG9ydFBhcnNlZD1hLl9faW1wb3J0TGluay5fX2ltcG9ydFBhcnNlZD0hMSx0aGlzLnBhcnNlU29vbigpKX0scGFyc2VTb29uOmZ1bmN0aW9uKCl7dGhpcy5fcGFyc2VTb29uJiZjYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLl9wYXJzZURlbGF5KTt2YXIgYT10aGlzO3RoaXMuX3BhcnNlU29vbj1yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZnVuY3Rpb24oKXthLnBhcnNlTmV4dCgpfSl9LHBhcnNlSW1wb3J0OmZ1bmN0aW9uKGEpe2lmKEhUTUxJbXBvcnRzLl9faW1wb3J0c1BhcnNpbmdIb29rJiZIVE1MSW1wb3J0cy5fX2ltcG9ydHNQYXJzaW5nSG9vayhhKSxhLmltcG9ydC5fX2ltcG9ydFBhcnNlZD0hMCx0aGlzLm1hcmtQYXJzaW5nQ29tcGxldGUoYSksYS5kaXNwYXRjaEV2ZW50KGEuX19yZXNvdXJjZT9uZXcgQ3VzdG9tRXZlbnQoImxvYWQiLHtidWJibGVzOiExfSk6bmV3IEN1c3RvbUV2ZW50KCJlcnJvciIse2J1YmJsZXM6ITF9KSksYS5fX3BlbmRpbmcpZm9yKHZhciBiO2EuX19wZW5kaW5nLmxlbmd0aDspYj1hLl9fcGVuZGluZy5zaGlmdCgpLGImJmIoe3RhcmdldDphfSk7dGhpcy5wYXJzZU5leHQoKX0scGFyc2VMaW5rOmZ1bmN0aW9uKGEpe2IoYSk/dGhpcy5wYXJzZUltcG9ydChhKTooYS5ocmVmPWEuaHJlZix0aGlzLnBhcnNlR2VuZXJpYyhhKSl9LHBhcnNlU3R5bGU6ZnVuY3Rpb24oYSl7dmFyIGI9YTthPWYoYSksYS5fX2ltcG9ydEVsZW1lbnQ9Yix0aGlzLnBhcnNlR2VuZXJpYyhhKX0scGFyc2VHZW5lcmljOmZ1bmN0aW9uKGEpe3RoaXMudHJhY2tFbGVtZW50KGEpLGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoYSl9LHRyYWNrRWxlbWVudDpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMsZD1mdW5jdGlvbihkKXtiJiZiKGQpLGMubWFya1BhcnNpbmdDb21wbGV0ZShhKSxjLnBhcnNlTmV4dCgpfTtpZihhLmFkZEV2ZW50TGlzdGVuZXIoImxvYWQiLGQpLGEuYWRkRXZlbnRMaXN0ZW5lcigiZXJyb3IiLGQpLGkmJiJzdHlsZSI9PT1hLmxvY2FsTmFtZSl7dmFyIGU9ITE7aWYoLTE9PWEudGV4dENvbnRlbnQuaW5kZXhPZigiQGltcG9ydCIpKWU9ITA7ZWxzZSBpZihhLnNoZWV0KXtlPSEwO2Zvcih2YXIgZixnPWEuc2hlZXQuY3NzUnVsZXMsaD1nP2cubGVuZ3RoOjAsaj0wO2g+aiYmKGY9Z1tqXSk7aisrKWYudHlwZT09PUNTU1J1bGUuSU1QT1JUX1JVTEUmJihlPWUmJkJvb2xlYW4oZi5zdHlsZVNoZWV0KSl9ZSYmYS5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgibG9hZCIse2J1YmJsZXM6ITF9KSl9fSxwYXJzZVNjcmlwdDpmdW5jdGlvbihiKXt2YXIgZD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzY3JpcHQiKTtkLl9faW1wb3J0RWxlbWVudD1iLGQuc3JjPWIuc3JjP2Iuc3JjOmMoYiksYS5jdXJyZW50U2NyaXB0PWIsdGhpcy50cmFja0VsZW1lbnQoZCxmdW5jdGlvbigpe2QucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChkKSxhLmN1cnJlbnRTY3JpcHQ9bnVsbH0pLGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoZCl9LG5leHRUb1BhcnNlOmZ1bmN0aW9uKCl7cmV0dXJuIXRoaXMucGFyc2luZ0VsZW1lbnQmJnRoaXMubmV4dFRvUGFyc2VJbkRvYyhqKX0sbmV4dFRvUGFyc2VJbkRvYzpmdW5jdGlvbihhLGMpe2Zvcih2YXIgZCxlPWEucXVlcnlTZWxlY3RvckFsbCh0aGlzLnBhcnNlU2VsZWN0b3JzRm9yTm9kZShhKSksZj0wLGc9ZS5sZW5ndGg7Zz5mJiYoZD1lW2ZdKTtmKyspaWYoIXRoaXMuaXNQYXJzZWQoZCkpcmV0dXJuIHRoaXMuaGFzUmVzb3VyY2UoZCk/YihkKT90aGlzLm5leHRUb1BhcnNlSW5Eb2MoZC5pbXBvcnQsZCk6ZDp2b2lkIDA7cmV0dXJuIGN9LHBhcnNlU2VsZWN0b3JzRm9yTm9kZTpmdW5jdGlvbihhKXt2YXIgYj1hLm93bmVyRG9jdW1lbnR8fGE7cmV0dXJuIGI9PT1qP3RoaXMuZG9jdW1lbnRTZWxlY3RvcnM6dGhpcy5pbXBvcnRzU2VsZWN0b3JzfSxpc1BhcnNlZDpmdW5jdGlvbihhKXtyZXR1cm4gYS5fX2ltcG9ydFBhcnNlZH0saGFzUmVzb3VyY2U6ZnVuY3Rpb24oYSl7cmV0dXJuIGIoYSkmJiFhLmltcG9ydD8hMTohMH19LGw9Lyh1cmxcKCkoW14pXSopKFwpKS9nLG09LyhAaW1wb3J0W1xzXSsoPyF1cmxcKCkpKFteO10qKSg7KS9nLG49e3Jlc29sdmVVcmxzSW5TdHlsZTpmdW5jdGlvbihhKXt2YXIgYj1hLm93bmVyRG9jdW1lbnQsYz1iLmNyZWF0ZUVsZW1lbnQoImEiKTtyZXR1cm4gYS50ZXh0Q29udGVudD10aGlzLnJlc29sdmVVcmxzSW5Dc3NUZXh0KGEudGV4dENvbnRlbnQsYyksYX0scmVzb2x2ZVVybHNJbkNzc1RleHQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLnJlcGxhY2VVcmxzKGEsYixsKTtyZXR1cm4gYz10aGlzLnJlcGxhY2VVcmxzKGMsYixtKX0scmVwbGFjZVVybHM6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBhLnJlcGxhY2UoYyxmdW5jdGlvbihhLGMsZCxlKXt2YXIgZj1kLnJlcGxhY2UoL1siJ10vZywiIik7cmV0dXJuIGIuaHJlZj1mLGY9Yi5ocmVmLGMrIiciK2YrIiciK2V9KX19O2EucGFyc2VyPWssYS5wYXRoPW4sYS5pc0lFPWl9KEhUTUxJbXBvcnRzKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEpe3JldHVybiBjKGEscSl9ZnVuY3Rpb24gYyhhLGIpe3JldHVybiJsaW5rIj09PWEubG9jYWxOYW1lJiZhLmdldEF0dHJpYnV0ZSgicmVsIik9PT1ifWZ1bmN0aW9uIGQoYSxiKXt2YXIgYz1hO2MgaW5zdGFuY2VvZiBEb2N1bWVudHx8KGM9ZG9jdW1lbnQuaW1wbGVtZW50YXRpb24uY3JlYXRlSFRNTERvY3VtZW50KHEpKSxjLl9VUkw9Yjt2YXIgZD1jLmNyZWF0ZUVsZW1lbnQoImJhc2UiKTtkLnNldEF0dHJpYnV0ZSgiaHJlZiIsYiksYy5iYXNlVVJJfHwoYy5iYXNlVVJJPWIpO3ZhciBlPWMuY3JlYXRlRWxlbWVudCgibWV0YSIpO3JldHVybiBlLnNldEF0dHJpYnV0ZSgiY2hhcnNldCIsInV0Zi04IiksYy5oZWFkLmFwcGVuZENoaWxkKGUpLGMuaGVhZC5hcHBlbmRDaGlsZChkKSxhIGluc3RhbmNlb2YgRG9jdW1lbnR8fChjLmJvZHkuaW5uZXJIVE1MPWEpLHdpbmRvdy5IVE1MVGVtcGxhdGVFbGVtZW50JiZIVE1MVGVtcGxhdGVFbGVtZW50LmJvb3RzdHJhcCYmSFRNTFRlbXBsYXRlRWxlbWVudC5ib290c3RyYXAoYyksY31mdW5jdGlvbiBlKGEsYil7Yj1ifHxyLGcoZnVuY3Rpb24oKXtoKGEsYil9LGIpfWZ1bmN0aW9uIGYoYSl7cmV0dXJuImNvbXBsZXRlIj09PWEucmVhZHlTdGF0ZXx8YS5yZWFkeVN0YXRlPT09eX1mdW5jdGlvbiBnKGEsYil7aWYoZihiKSlhJiZhKCk7ZWxzZXt2YXIgYz1mdW5jdGlvbigpeygiY29tcGxldGUiPT09Yi5yZWFkeVN0YXRlfHxiLnJlYWR5U3RhdGU9PT15KSYmKGIucmVtb3ZlRXZlbnRMaXN0ZW5lcih6LGMpLGcoYSxiKSl9O2IuYWRkRXZlbnRMaXN0ZW5lcih6LGMpfX1mdW5jdGlvbiBoKGEsYil7ZnVuY3Rpb24gYygpe2Y9PWcmJmEmJmEoKX1mdW5jdGlvbiBkKCl7ZisrLGMoKX12YXIgZT1iLnF1ZXJ5U2VsZWN0b3JBbGwoImxpbmtbcmVsPWltcG9ydF0iKSxmPTAsZz1lLmxlbmd0aDtpZihnKWZvcih2YXIgaCxqPTA7Zz5qJiYoaD1lW2pdKTtqKyspaShoKT9kLmNhbGwoaCk6KGguYWRkRXZlbnRMaXN0ZW5lcigibG9hZCIsZCksaC5hZGRFdmVudExpc3RlbmVyKCJlcnJvciIsZCkpO2Vsc2UgYygpfWZ1bmN0aW9uIGkoYSl7cmV0dXJuIG8/YS5pbXBvcnQmJiJsb2FkaW5nIiE9PWEuaW1wb3J0LnJlYWR5U3RhdGV8fGEuX19sb2FkZWQ6YS5fX2ltcG9ydFBhcnNlZH1mdW5jdGlvbiBqKGEpe2Zvcih2YXIgYixjPTAsZD1hLmxlbmd0aDtkPmMmJihiPWFbY10pO2MrKylrKGIpJiZsKGIpfWZ1bmN0aW9uIGsoYSl7cmV0dXJuImxpbmsiPT09YS5sb2NhbE5hbWUmJiJpbXBvcnQiPT09YS5yZWx9ZnVuY3Rpb24gbChhKXt2YXIgYj1hLmltcG9ydDtiP20oe3RhcmdldDphfSk6KGEuYWRkRXZlbnRMaXN0ZW5lcigibG9hZCIsbSksYS5hZGRFdmVudExpc3RlbmVyKCJlcnJvciIsbSkpfWZ1bmN0aW9uIG0oYSl7YS50YXJnZXQuX19sb2FkZWQ9ITB9dmFyIG49ImltcG9ydCJpbiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJsaW5rIiksbz1uLHA9YS5mbGFncyxxPSJpbXBvcnQiLHI9d2luZG93LlNoYWRvd0RPTVBvbHlmaWxsP1NoYWRvd0RPTVBvbHlmaWxsLndyYXBJZk5lZWRlZChkb2N1bWVudCk6ZG9jdW1lbnQ7aWYobyl2YXIgcz17fTtlbHNlIHZhciB0PShhLnhocixhLkxvYWRlciksdT1hLnBhcnNlcixzPXtkb2N1bWVudHM6e30sZG9jdW1lbnRQcmVsb2FkU2VsZWN0b3JzOiJsaW5rW3JlbD0iK3ErIl0iLGltcG9ydHNQcmVsb2FkU2VsZWN0b3JzOlsibGlua1tyZWw9IitxKyJdIl0uam9pbigiLCIpLGxvYWROb2RlOmZ1bmN0aW9uKGEpe3YuYWRkTm9kZShhKX0sbG9hZFN1YnRyZWU6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5tYXJzaGFsTm9kZXMoYSk7di5hZGROb2RlcyhiKX0sbWFyc2hhbE5vZGVzOmZ1bmN0aW9uKGEpe3JldHVybiBhLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5sb2FkU2VsZWN0b3JzRm9yTm9kZShhKSl9LGxvYWRTZWxlY3RvcnNGb3JOb2RlOmZ1bmN0aW9uKGEpe3ZhciBiPWEub3duZXJEb2N1bWVudHx8YTtyZXR1cm4gYj09PXI/dGhpcy5kb2N1bWVudFByZWxvYWRTZWxlY3RvcnM6dGhpcy5pbXBvcnRzUHJlbG9hZFNlbGVjdG9yc30sbG9hZGVkOmZ1bmN0aW9uKGEsYyxlKXtpZihwLmxvYWQmJmNvbnNvbGUubG9nKCJsb2FkZWQiLGEsYyksYy5fX3Jlc291cmNlPWUsYihjKSl7dmFyIGY9dGhpcy5kb2N1bWVudHNbYV07Znx8KGY9ZChlLGEpLGYuX19pbXBvcnRMaW5rPWMsdGhpcy5ib290RG9jdW1lbnQoZiksdGhpcy5kb2N1bWVudHNbYV09ZiksYy5pbXBvcnQ9Zn11LnBhcnNlTmV4dCgpfSxib290RG9jdW1lbnQ6ZnVuY3Rpb24oYSl7dGhpcy5sb2FkU3VidHJlZShhKSx0aGlzLm9ic2VydmUoYSksdS5wYXJzZU5leHQoKX0sbG9hZGVkQWxsOmZ1bmN0aW9uKCl7dS5wYXJzZU5leHQoKX19LHY9bmV3IHQocy5sb2FkZWQuYmluZChzKSxzLmxvYWRlZEFsbC5iaW5kKHMpKTt2YXIgdz17Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIEhUTUxJbXBvcnRzLmN1cnJlbnRTY3JpcHR8fGRvY3VtZW50LmN1cnJlbnRTY3JpcHR9LGNvbmZpZ3VyYWJsZTohMH07aWYoT2JqZWN0LmRlZmluZVByb3BlcnR5KGRvY3VtZW50LCJfY3VycmVudFNjcmlwdCIsdyksT2JqZWN0LmRlZmluZVByb3BlcnR5KHIsIl9jdXJyZW50U2NyaXB0Iix3KSwhZG9jdW1lbnQuYmFzZVVSSSl7dmFyIHg9e2dldDpmdW5jdGlvbigpe3JldHVybiB3aW5kb3cubG9jYXRpb24uaHJlZn0sY29uZmlndXJhYmxlOiEwfTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZG9jdW1lbnQsImJhc2VVUkkiLHgpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLCJiYXNlVVJJIix4KX12YXIgeT1IVE1MSW1wb3J0cy5pc0lFPyJjb21wbGV0ZSI6ImludGVyYWN0aXZlIix6PSJyZWFkeXN0YXRlY2hhbmdlIjtvJiZuZXcgTXV0YXRpb25PYnNlcnZlcihmdW5jdGlvbihhKXtmb3IodmFyIGIsYz0wLGQ9YS5sZW5ndGg7ZD5jJiYoYj1hW2NdKTtjKyspYi5hZGRlZE5vZGVzJiZqKGIuYWRkZWROb2Rlcyl9KS5vYnNlcnZlKGRvY3VtZW50LmhlYWQse2NoaWxkTGlzdDohMH0pLGEuaGFzTmF0aXZlPW4sYS51c2VOYXRpdmU9byxhLmltcG9ydGVyPXMsYS5JTVBPUlRfTElOS19UWVBFPXEsYS5pc0ltcG9ydExvYWRlZD1pLGEuaW1wb3J0TG9hZGVyPXYsYS53aGVuUmVhZHk9ZSxhLndoZW5JbXBvcnRzUmVhZHk9ZX0od2luZG93LkhUTUxJbXBvcnRzKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEpe2Zvcih2YXIgYixkPTAsZT1hLmxlbmd0aDtlPmQmJihiPWFbZF0pO2QrKykiY2hpbGRMaXN0Ij09PWIudHlwZSYmYi5hZGRlZE5vZGVzLmxlbmd0aCYmYyhiLmFkZGVkTm9kZXMpfWZ1bmN0aW9uIGMoYSl7Zm9yKHZhciBiLGUsZz0wLGg9YS5sZW5ndGg7aD5nJiYoZT1hW2ddKTtnKyspYj1ifHxlLm93bmVyRG9jdW1lbnQsZChlKSYmZi5sb2FkTm9kZShlKSxlLmNoaWxkcmVuJiZlLmNoaWxkcmVuLmxlbmd0aCYmYyhlLmNoaWxkcmVuKX1mdW5jdGlvbiBkKGEpe3JldHVybiAxPT09YS5ub2RlVHlwZSYmZy5jYWxsKGEsZi5sb2FkU2VsZWN0b3JzRm9yTm9kZShhKSl9ZnVuY3Rpb24gZShhKXtoLm9ic2VydmUoYSx7Y2hpbGRMaXN0OiEwLHN1YnRyZWU6ITB9KX12YXIgZj0oYS5JTVBPUlRfTElOS19UWVBFLGEuaW1wb3J0ZXIpLGc9KGEucGFyc2VyLEhUTUxFbGVtZW50LnByb3RvdHlwZS5tYXRjaGVzfHxIVE1MRWxlbWVudC5wcm90b3R5cGUubWF0Y2hlc1NlbGVjdG9yfHxIVE1MRWxlbWVudC5wcm90b3R5cGUud2Via2l0TWF0Y2hlc1NlbGVjdG9yfHxIVE1MRWxlbWVudC5wcm90b3R5cGUubW96TWF0Y2hlc1NlbGVjdG9yfHxIVE1MRWxlbWVudC5wcm90b3R5cGUubXNNYXRjaGVzU2VsZWN0b3IpLGg9bmV3IE11dGF0aW9uT2JzZXJ2ZXIoYik7YS5vYnNlcnZlPWUsZi5vYnNlcnZlPWV9KEhUTUxJbXBvcnRzKSxmdW5jdGlvbigpe2Z1bmN0aW9uIGEoKXtIVE1MSW1wb3J0cy5pbXBvcnRlci5ib290RG9jdW1lbnQoYil9ImZ1bmN0aW9uIiE9dHlwZW9mIHdpbmRvdy5DdXN0b21FdmVudCYmKHdpbmRvdy5DdXN0b21FdmVudD1mdW5jdGlvbihhLGIpe3ZhciBjPWRvY3VtZW50LmNyZWF0ZUV2ZW50KCJIVE1MRXZlbnRzIik7cmV0dXJuIGMuaW5pdEV2ZW50KGEsYi5idWJibGVzPT09ITE/ITE6ITAsYi5jYW5jZWxhYmxlPT09ITE/ITE6ITAsYi5kZXRhaWwpLGN9KTt2YXIgYj13aW5kb3cuU2hhZG93RE9NUG9seWZpbGw/d2luZG93LlNoYWRvd0RPTVBvbHlmaWxsLndyYXBJZk5lZWRlZChkb2N1bWVudCk6ZG9jdW1lbnQ7SFRNTEltcG9ydHMud2hlbkltcG9ydHNSZWFkeShmdW5jdGlvbigpe0hUTUxJbXBvcnRzLnJlYWR5PSEwLEhUTUxJbXBvcnRzLnJlYWR5VGltZT0obmV3IERhdGUpLmdldFRpbWUoKSxiLmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KCJIVE1MSW1wb3J0c0xvYWRlZCIse2J1YmJsZXM6ITB9KSl9KSxIVE1MSW1wb3J0cy51c2VOYXRpdmV8fCgiY29tcGxldGUiPT09ZG9jdW1lbnQucmVhZHlTdGF0ZXx8ImludGVyYWN0aXZlIj09PWRvY3VtZW50LnJlYWR5U3RhdGUmJiF3aW5kb3cuYXR0YWNoRXZlbnQ/YSgpOmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoIkRPTUNvbnRlbnRMb2FkZWQiLGEpKX0oKSx3aW5kb3cuQ3VzdG9tRWxlbWVudHM9d2luZG93LkN1c3RvbUVsZW1lbnRzfHx7ZmxhZ3M6e319LGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSxjLGQpe3ZhciBlPWEuZmlyc3RFbGVtZW50Q2hpbGQ7aWYoIWUpZm9yKGU9YS5maXJzdENoaWxkO2UmJmUubm9kZVR5cGUhPT1Ob2RlLkVMRU1FTlRfTk9ERTspZT1lLm5leHRTaWJsaW5nO2Zvcig7ZTspYyhlLGQpIT09ITAmJmIoZSxjLGQpLGU9ZS5uZXh0RWxlbWVudFNpYmxpbmc7cmV0dXJuIG51bGx9ZnVuY3Rpb24gYyhhLGIpe2Zvcih2YXIgYz1hLnNoYWRvd1Jvb3Q7YzspZChjLGIpLGM9Yy5vbGRlclNoYWRvd1Jvb3R9ZnVuY3Rpb24gZChhLGQpe2IoYSxmdW5jdGlvbihhKXtyZXR1cm4gZChhKT8hMDp2b2lkIGMoYSxkKX0pLGMoYSxkKX1mdW5jdGlvbiBlKGEpe3JldHVybiBoKGEpPyhpKGEpLCEwKTp2b2lkIGwoYSl9ZnVuY3Rpb24gZihhKXtkKGEsZnVuY3Rpb24oYSl7cmV0dXJuIGUoYSk/ITA6dm9pZCAwfSl9ZnVuY3Rpb24gZyhhKXtyZXR1cm4gZShhKXx8ZihhKX1mdW5jdGlvbiBoKGIpe2lmKCFiLl9fdXBncmFkZWRfXyYmYi5ub2RlVHlwZT09PU5vZGUuRUxFTUVOVF9OT0RFKXt2YXIgYz1iLmdldEF0dHJpYnV0ZSgiaXMiKXx8Yi5sb2NhbE5hbWUsZD1hLnJlZ2lzdHJ5W2NdO2lmKGQpcmV0dXJuIEEuZG9tJiZjb25zb2xlLmdyb3VwKCJ1cGdyYWRlOiIsYi5sb2NhbE5hbWUpLGEudXBncmFkZShiKSxBLmRvbSYmY29uc29sZS5ncm91cEVuZCgpLCEwfX1mdW5jdGlvbiBpKGEpe2woYSkscihhKSYmZChhLGZ1bmN0aW9uKGEpe2woYSl9KX1mdW5jdGlvbiBqKGEpe2lmKEUucHVzaChhKSwhRCl7RD0hMDt2YXIgYj13aW5kb3cuUGxhdGZvcm0mJndpbmRvdy5QbGF0Zm9ybS5lbmRPZk1pY3JvdGFza3x8c2V0VGltZW91dDtiKGspfX1mdW5jdGlvbiBrKCl7RD0hMTtmb3IodmFyIGEsYj1FLGM9MCxkPWIubGVuZ3RoO2Q+YyYmKGE9YltjXSk7YysrKWEoKTtFPVtdfWZ1bmN0aW9uIGwoYSl7Qz9qKGZ1bmN0aW9uKCl7bShhKX0pOm0oYSl9ZnVuY3Rpb24gbShhKXsoYS5hdHRhY2hlZENhbGxiYWNrfHxhLmRldGFjaGVkQ2FsbGJhY2t8fGEuX191cGdyYWRlZF9fJiZBLmRvbSkmJihBLmRvbSYmY29uc29sZS5ncm91cCgiaW5zZXJ0ZWQ6IixhLmxvY2FsTmFtZSkscihhKSYmKGEuX19pbnNlcnRlZD0oYS5fX2luc2VydGVkfHwwKSsxLGEuX19pbnNlcnRlZDwxJiYoYS5fX2luc2VydGVkPTEpLGEuX19pbnNlcnRlZD4xP0EuZG9tJiZjb25zb2xlLndhcm4oImluc2VydGVkOiIsYS5sb2NhbE5hbWUsImluc2VydC9yZW1vdmUgY291bnQ6IixhLl9faW5zZXJ0ZWQpOmEuYXR0YWNoZWRDYWxsYmFjayYmKEEuZG9tJiZjb25zb2xlLmxvZygiaW5zZXJ0ZWQ6IixhLmxvY2FsTmFtZSksYS5hdHRhY2hlZENhbGxiYWNrKCkpKSxBLmRvbSYmY29uc29sZS5ncm91cEVuZCgpKX1mdW5jdGlvbiBuKGEpe28oYSksZChhLGZ1bmN0aW9uKGEpe28oYSl9KX1mdW5jdGlvbiBvKGEpe0M/aihmdW5jdGlvbigpe3AoYSl9KTpwKGEpfWZ1bmN0aW9uIHAoYSl7KGEuYXR0YWNoZWRDYWxsYmFja3x8YS5kZXRhY2hlZENhbGxiYWNrfHxhLl9fdXBncmFkZWRfXyYmQS5kb20pJiYoQS5kb20mJmNvbnNvbGUuZ3JvdXAoInJlbW92ZWQ6IixhLmxvY2FsTmFtZSkscihhKXx8KGEuX19pbnNlcnRlZD0oYS5fX2luc2VydGVkfHwwKS0xLGEuX19pbnNlcnRlZD4wJiYoYS5fX2luc2VydGVkPTApLGEuX19pbnNlcnRlZDwwP0EuZG9tJiZjb25zb2xlLndhcm4oInJlbW92ZWQ6IixhLmxvY2FsTmFtZSwiaW5zZXJ0L3JlbW92ZSBjb3VudDoiLGEuX19pbnNlcnRlZCk6YS5kZXRhY2hlZENhbGxiYWNrJiZhLmRldGFjaGVkQ2FsbGJhY2soKSksQS5kb20mJmNvbnNvbGUuZ3JvdXBFbmQoKSl9ZnVuY3Rpb24gcShhKXtyZXR1cm4gd2luZG93LlNoYWRvd0RPTVBvbHlmaWxsP1NoYWRvd0RPTVBvbHlmaWxsLndyYXBJZk5lZWRlZChhKTphfWZ1bmN0aW9uIHIoYSl7Zm9yKHZhciBiPWEsYz1xKGRvY3VtZW50KTtiOyl7aWYoYj09YylyZXR1cm4hMDtiPWIucGFyZW50Tm9kZXx8Yi5ob3N0fX1mdW5jdGlvbiBzKGEpe2lmKGEuc2hhZG93Um9vdCYmIWEuc2hhZG93Um9vdC5fX3dhdGNoZWQpe0EuZG9tJiZjb25zb2xlLmxvZygid2F0Y2hpbmcgc2hhZG93LXJvb3QgZm9yOiAiLGEubG9jYWxOYW1lKTtmb3IodmFyIGI9YS5zaGFkb3dSb290O2I7KXQoYiksYj1iLm9sZGVyU2hhZG93Um9vdH19ZnVuY3Rpb24gdChhKXthLl9fd2F0Y2hlZHx8KHcoYSksYS5fX3dhdGNoZWQ9ITApfWZ1bmN0aW9uIHUoYSl7aWYoQS5kb20pe3ZhciBiPWFbMF07aWYoYiYmImNoaWxkTGlzdCI9PT1iLnR5cGUmJmIuYWRkZWROb2RlcyYmYi5hZGRlZE5vZGVzKXtmb3IodmFyIGM9Yi5hZGRlZE5vZGVzWzBdO2MmJmMhPT1kb2N1bWVudCYmIWMuaG9zdDspYz1jLnBhcmVudE5vZGU7dmFyIGQ9YyYmKGMuVVJMfHxjLl9VUkx8fGMuaG9zdCYmYy5ob3N0LmxvY2FsTmFtZSl8fCIiO2Q9ZC5zcGxpdCgiLz8iKS5zaGlmdCgpLnNwbGl0KCIvIikucG9wKCl9Y29uc29sZS5ncm91cCgibXV0YXRpb25zICglZCkgWyVzXSIsYS5sZW5ndGgsZHx8IiIpfWEuZm9yRWFjaChmdW5jdGlvbihhKXsiY2hpbGRMaXN0Ij09PWEudHlwZSYmKEcoYS5hZGRlZE5vZGVzLGZ1bmN0aW9uKGEpe2EubG9jYWxOYW1lJiZnKGEpfSksRyhhLnJlbW92ZWROb2RlcyxmdW5jdGlvbihhKXthLmxvY2FsTmFtZSYmbihhKX0pKX0pLEEuZG9tJiZjb25zb2xlLmdyb3VwRW5kKCl9ZnVuY3Rpb24gdigpe3UoRi50YWtlUmVjb3JkcygpKSxrKCl9ZnVuY3Rpb24gdyhhKXtGLm9ic2VydmUoYSx7Y2hpbGRMaXN0OiEwLHN1YnRyZWU6ITB9KX1mdW5jdGlvbiB4KGEpe3coYSl9ZnVuY3Rpb24geShhKXtBLmRvbSYmY29uc29sZS5ncm91cCgidXBncmFkZURvY3VtZW50OiAiLGEuYmFzZVVSSS5zcGxpdCgiLyIpLnBvcCgpKSxnKGEpLEEuZG9tJiZjb25zb2xlLmdyb3VwRW5kKCl9ZnVuY3Rpb24geihhKXthPXEoYSk7Zm9yKHZhciBiLGM9YS5xdWVyeVNlbGVjdG9yQWxsKCJsaW5rW3JlbD0iK0IrIl0iKSxkPTAsZT1jLmxlbmd0aDtlPmQmJihiPWNbZF0pO2QrKyliLmltcG9ydCYmYi5pbXBvcnQuX19wYXJzZWQmJnooYi5pbXBvcnQpO3koYSl9dmFyIEE9d2luZG93LmxvZ0ZsYWdzfHx7fSxCPXdpbmRvdy5IVE1MSW1wb3J0cz9IVE1MSW1wb3J0cy5JTVBPUlRfTElOS19UWVBFOiJub25lIixDPSF3aW5kb3cuTXV0YXRpb25PYnNlcnZlcnx8d2luZG93Lk11dGF0aW9uT2JzZXJ2ZXI9PT13aW5kb3cuSnNNdXRhdGlvbk9ic2VydmVyO2EuaGFzUG9seWZpbGxNdXRhdGlvbnM9Qzt2YXIgRD0hMSxFPVtdLEY9bmV3IE11dGF0aW9uT2JzZXJ2ZXIodSksRz1BcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsLmJpbmQoQXJyYXkucHJvdG90eXBlLmZvckVhY2gpO2EuSU1QT1JUX0xJTktfVFlQRT1CLGEud2F0Y2hTaGFkb3c9cyxhLnVwZ3JhZGVEb2N1bWVudFRyZWU9eixhLnVwZ3JhZGVBbGw9ZyxhLnVwZ3JhZGVTdWJ0cmVlPWYsYS5pbnNlcnRlZE5vZGU9aSxhLm9ic2VydmVEb2N1bWVudD14LGEudXBncmFkZURvY3VtZW50PXksYS50YWtlUmVjb3Jkcz12fSh3aW5kb3cuQ3VzdG9tRWxlbWVudHMpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYixnKXt2YXIgaD1nfHx7fTtpZighYil0aHJvdyBuZXcgRXJyb3IoImRvY3VtZW50LnJlZ2lzdGVyRWxlbWVudDogZmlyc3QgYXJndW1lbnQgYG5hbWVgIG11c3Qgbm90IGJlIGVtcHR5Iik7aWYoYi5pbmRleE9mKCItIik8MCl0aHJvdyBuZXcgRXJyb3IoImRvY3VtZW50LnJlZ2lzdGVyRWxlbWVudDogZmlyc3QgYXJndW1lbnQgKCduYW1lJykgbXVzdCBjb250YWluIGEgZGFzaCAoJy0nKS4gQXJndW1lbnQgcHJvdmlkZWQgd2FzICciK1N0cmluZyhiKSsiJy4iKTsKaWYoYyhiKSl0aHJvdyBuZXcgRXJyb3IoIkZhaWxlZCB0byBleGVjdXRlICdyZWdpc3RlckVsZW1lbnQnIG9uICdEb2N1bWVudCc6IFJlZ2lzdHJhdGlvbiBmYWlsZWQgZm9yIHR5cGUgJyIrU3RyaW5nKGIpKyInLiBUaGUgdHlwZSBuYW1lIGlzIGludmFsaWQuIik7aWYobihiKSl0aHJvdyBuZXcgRXJyb3IoIkR1cGxpY2F0ZURlZmluaXRpb25FcnJvcjogYSB0eXBlIHdpdGggbmFtZSAnIitTdHJpbmcoYikrIicgaXMgYWxyZWFkeSByZWdpc3RlcmVkIik7aWYoIWgucHJvdG90eXBlKXRocm93IG5ldyBFcnJvcigiT3B0aW9ucyBtaXNzaW5nIHJlcXVpcmVkIHByb3RvdHlwZSBwcm9wZXJ0eSIpO3JldHVybiBoLl9fbmFtZT1iLnRvTG93ZXJDYXNlKCksaC5saWZlY3ljbGU9aC5saWZlY3ljbGV8fHt9LGguYW5jZXN0cnk9ZChoLmV4dGVuZHMpLGUoaCksZihoKSxsKGgucHJvdG90eXBlKSxvKGguX19uYW1lLGgpLGguY3Rvcj1wKGgpLGguY3Rvci5wcm90b3R5cGU9aC5wcm90b3R5cGUsaC5wcm90b3R5cGUuY29uc3RydWN0b3I9aC5jdG9yLGEucmVhZHkmJmEudXBncmFkZURvY3VtZW50VHJlZShkb2N1bWVudCksaC5jdG9yfWZ1bmN0aW9uIGMoYSl7Zm9yKHZhciBiPTA7Yjx5Lmxlbmd0aDtiKyspaWYoYT09PXlbYl0pcmV0dXJuITB9ZnVuY3Rpb24gZChhKXt2YXIgYj1uKGEpO3JldHVybiBiP2QoYi5leHRlbmRzKS5jb25jYXQoW2JdKTpbXX1mdW5jdGlvbiBlKGEpe2Zvcih2YXIgYixjPWEuZXh0ZW5kcyxkPTA7Yj1hLmFuY2VzdHJ5W2RdO2QrKyljPWIuaXMmJmIudGFnO2EudGFnPWN8fGEuX19uYW1lLGMmJihhLmlzPWEuX19uYW1lKX1mdW5jdGlvbiBmKGEpe2lmKCFPYmplY3QuX19wcm90b19fKXt2YXIgYj1IVE1MRWxlbWVudC5wcm90b3R5cGU7aWYoYS5pcyl7dmFyIGM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChhLnRhZyksZD1PYmplY3QuZ2V0UHJvdG90eXBlT2YoYyk7ZD09PWEucHJvdG90eXBlJiYoYj1kKX1mb3IodmFyIGUsZj1hLnByb3RvdHlwZTtmJiZmIT09YjspZT1PYmplY3QuZ2V0UHJvdG90eXBlT2YoZiksZi5fX3Byb3RvX189ZSxmPWU7YS5uYXRpdmU9Yn19ZnVuY3Rpb24gZyhhKXtyZXR1cm4gaChCKGEudGFnKSxhKX1mdW5jdGlvbiBoKGIsYyl7cmV0dXJuIGMuaXMmJmIuc2V0QXR0cmlidXRlKCJpcyIsYy5pcyksYi5yZW1vdmVBdHRyaWJ1dGUoInVucmVzb2x2ZWQiKSxpKGIsYyksYi5fX3VwZ3JhZGVkX189ITAsayhiKSxhLmluc2VydGVkTm9kZShiKSxhLnVwZ3JhZGVTdWJ0cmVlKGIpLGJ9ZnVuY3Rpb24gaShhLGIpe09iamVjdC5fX3Byb3RvX18/YS5fX3Byb3RvX189Yi5wcm90b3R5cGU6KGooYSxiLnByb3RvdHlwZSxiLm5hdGl2ZSksYS5fX3Byb3RvX189Yi5wcm90b3R5cGUpfWZ1bmN0aW9uIGooYSxiLGMpe2Zvcih2YXIgZD17fSxlPWI7ZSE9PWMmJmUhPT1IVE1MRWxlbWVudC5wcm90b3R5cGU7KXtmb3IodmFyIGYsZz1PYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhlKSxoPTA7Zj1nW2hdO2grKylkW2ZdfHwoT2JqZWN0LmRlZmluZVByb3BlcnR5KGEsZixPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsZikpLGRbZl09MSk7ZT1PYmplY3QuZ2V0UHJvdG90eXBlT2YoZSl9fWZ1bmN0aW9uIGsoYSl7YS5jcmVhdGVkQ2FsbGJhY2smJmEuY3JlYXRlZENhbGxiYWNrKCl9ZnVuY3Rpb24gbChhKXtpZighYS5zZXRBdHRyaWJ1dGUuX3BvbHlmaWxsZWQpe3ZhciBiPWEuc2V0QXR0cmlidXRlO2Euc2V0QXR0cmlidXRlPWZ1bmN0aW9uKGEsYyl7bS5jYWxsKHRoaXMsYSxjLGIpfTt2YXIgYz1hLnJlbW92ZUF0dHJpYnV0ZTthLnJlbW92ZUF0dHJpYnV0ZT1mdW5jdGlvbihhKXttLmNhbGwodGhpcyxhLG51bGwsYyl9LGEuc2V0QXR0cmlidXRlLl9wb2x5ZmlsbGVkPSEwfX1mdW5jdGlvbiBtKGEsYixjKXthPWEudG9Mb3dlckNhc2UoKTt2YXIgZD10aGlzLmdldEF0dHJpYnV0ZShhKTtjLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt2YXIgZT10aGlzLmdldEF0dHJpYnV0ZShhKTt0aGlzLmF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjayYmZSE9PWQmJnRoaXMuYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrKGEsZCxlKX1mdW5jdGlvbiBuKGEpe3JldHVybiBhP3pbYS50b0xvd2VyQ2FzZSgpXTp2b2lkIDB9ZnVuY3Rpb24gbyhhLGIpe3pbYV09Yn1mdW5jdGlvbiBwKGEpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBnKGEpfX1mdW5jdGlvbiBxKGEsYixjKXtyZXR1cm4gYT09PUE/cihiLGMpOkMoYSxiKX1mdW5jdGlvbiByKGEsYil7dmFyIGM9bihifHxhKTtpZihjKXtpZihhPT1jLnRhZyYmYj09Yy5pcylyZXR1cm4gbmV3IGMuY3RvcjtpZighYiYmIWMuaXMpcmV0dXJuIG5ldyBjLmN0b3J9aWYoYil7dmFyIGQ9cihhKTtyZXR1cm4gZC5zZXRBdHRyaWJ1dGUoImlzIixiKSxkfXZhciBkPUIoYSk7cmV0dXJuIGEuaW5kZXhPZigiLSIpPj0wJiZpKGQsSFRNTEVsZW1lbnQpLGR9ZnVuY3Rpb24gcyhhKXtpZighYS5fX3VwZ3JhZGVkX18mJmEubm9kZVR5cGU9PT1Ob2RlLkVMRU1FTlRfTk9ERSl7dmFyIGI9YS5nZXRBdHRyaWJ1dGUoImlzIiksYz1uKGJ8fGEubG9jYWxOYW1lKTtpZihjKXtpZihiJiZjLnRhZz09YS5sb2NhbE5hbWUpcmV0dXJuIGgoYSxjKTtpZighYiYmIWMuZXh0ZW5kcylyZXR1cm4gaChhLGMpfX19ZnVuY3Rpb24gdChiKXt2YXIgYz1ELmNhbGwodGhpcyxiKTtyZXR1cm4gYS51cGdyYWRlQWxsKGMpLGN9YXx8KGE9d2luZG93LkN1c3RvbUVsZW1lbnRzPXtmbGFnczp7fX0pO3ZhciB1PWEuZmxhZ3Msdj1Cb29sZWFuKGRvY3VtZW50LnJlZ2lzdGVyRWxlbWVudCksdz0hdS5yZWdpc3RlciYmdiYmIXdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCYmKCF3aW5kb3cuSFRNTEltcG9ydHN8fEhUTUxJbXBvcnRzLnVzZU5hdGl2ZSk7aWYodyl7dmFyIHg9ZnVuY3Rpb24oKXt9O2EucmVnaXN0cnk9e30sYS51cGdyYWRlRWxlbWVudD14LGEud2F0Y2hTaGFkb3c9eCxhLnVwZ3JhZGU9eCxhLnVwZ3JhZGVBbGw9eCxhLnVwZ3JhZGVTdWJ0cmVlPXgsYS5vYnNlcnZlRG9jdW1lbnQ9eCxhLnVwZ3JhZGVEb2N1bWVudD14LGEudXBncmFkZURvY3VtZW50VHJlZT14LGEudGFrZVJlY29yZHM9eCxhLnJlc2VydmVkVGFnTGlzdD1bXX1lbHNle3ZhciB5PVsiYW5ub3RhdGlvbi14bWwiLCJjb2xvci1wcm9maWxlIiwiZm9udC1mYWNlIiwiZm9udC1mYWNlLXNyYyIsImZvbnQtZmFjZS11cmkiLCJmb250LWZhY2UtZm9ybWF0IiwiZm9udC1mYWNlLW5hbWUiLCJtaXNzaW5nLWdseXBoIl0sej17fSxBPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sIixCPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQuYmluZChkb2N1bWVudCksQz1kb2N1bWVudC5jcmVhdGVFbGVtZW50TlMuYmluZChkb2N1bWVudCksRD1Ob2RlLnByb3RvdHlwZS5jbG9uZU5vZGU7ZG9jdW1lbnQucmVnaXN0ZXJFbGVtZW50PWIsZG9jdW1lbnQuY3JlYXRlRWxlbWVudD1yLGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUz1xLE5vZGUucHJvdG90eXBlLmNsb25lTm9kZT10LGEucmVnaXN0cnk9eixhLnVwZ3JhZGU9c312YXIgRTtFPU9iamVjdC5fX3Byb3RvX198fHc/ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYSBpbnN0YW5jZW9mIGJ9OmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPWE7Yzspe2lmKGM9PT1iLnByb3RvdHlwZSlyZXR1cm4hMDtjPWMuX19wcm90b19ffXJldHVybiExfSxhLmluc3RhbmNlb2Y9RSxhLnJlc2VydmVkVGFnTGlzdD15LGRvY3VtZW50LnJlZ2lzdGVyPWRvY3VtZW50LnJlZ2lzdGVyRWxlbWVudCxhLmhhc05hdGl2ZT12LGEudXNlTmF0aXZlPXd9KHdpbmRvdy5DdXN0b21FbGVtZW50cyksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhKXtyZXR1cm4ibGluayI9PT1hLmxvY2FsTmFtZSYmYS5nZXRBdHRyaWJ1dGUoInJlbCIpPT09Y312YXIgYz1hLklNUE9SVF9MSU5LX1RZUEUsZD17c2VsZWN0b3JzOlsibGlua1tyZWw9IitjKyJdIl0sbWFwOntsaW5rOiJwYXJzZUxpbmsifSxwYXJzZTpmdW5jdGlvbihhKXtpZighYS5fX3BhcnNlZCl7YS5fX3BhcnNlZD0hMDt2YXIgYj1hLnF1ZXJ5U2VsZWN0b3JBbGwoZC5zZWxlY3RvcnMpO2UoYixmdW5jdGlvbihhKXtkW2QubWFwW2EubG9jYWxOYW1lXV0oYSl9KSxDdXN0b21FbGVtZW50cy51cGdyYWRlRG9jdW1lbnQoYSksQ3VzdG9tRWxlbWVudHMub2JzZXJ2ZURvY3VtZW50KGEpfX0scGFyc2VMaW5rOmZ1bmN0aW9uKGEpe2IoYSkmJnRoaXMucGFyc2VJbXBvcnQoYSl9LHBhcnNlSW1wb3J0OmZ1bmN0aW9uKGEpe2EuaW1wb3J0JiZkLnBhcnNlKGEuaW1wb3J0KX19LGU9QXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbC5iaW5kKEFycmF5LnByb3RvdHlwZS5mb3JFYWNoKTthLnBhcnNlcj1kLGEuSU1QT1JUX0xJTktfVFlQRT1jfSh3aW5kb3cuQ3VzdG9tRWxlbWVudHMpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoKXtDdXN0b21FbGVtZW50cy5wYXJzZXIucGFyc2UoZG9jdW1lbnQpLEN1c3RvbUVsZW1lbnRzLnVwZ3JhZGVEb2N1bWVudChkb2N1bWVudCk7dmFyIGE9d2luZG93LlBsYXRmb3JtJiZQbGF0Zm9ybS5lbmRPZk1pY3JvdGFzaz9QbGF0Zm9ybS5lbmRPZk1pY3JvdGFzazpzZXRUaW1lb3V0O2EoZnVuY3Rpb24oKXtDdXN0b21FbGVtZW50cy5yZWFkeT0hMCxDdXN0b21FbGVtZW50cy5yZWFkeVRpbWU9RGF0ZS5ub3coKSx3aW5kb3cuSFRNTEltcG9ydHMmJihDdXN0b21FbGVtZW50cy5lbGFwc2VkPUN1c3RvbUVsZW1lbnRzLnJlYWR5VGltZS1IVE1MSW1wb3J0cy5yZWFkeVRpbWUpLGRvY3VtZW50LmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KCJXZWJDb21wb25lbnRzUmVhZHkiLHtidWJibGVzOiEwfSkpLHdpbmRvdy5IVE1MSW1wb3J0cyYmKEhUTUxJbXBvcnRzLl9faW1wb3J0c1BhcnNpbmdIb29rPWZ1bmN0aW9uKGEpe0N1c3RvbUVsZW1lbnRzLnBhcnNlci5wYXJzZShhLmltcG9ydCl9KX0pfWlmKCJmdW5jdGlvbiIhPXR5cGVvZiB3aW5kb3cuQ3VzdG9tRXZlbnQmJih3aW5kb3cuQ3VzdG9tRXZlbnQ9ZnVuY3Rpb24oYSl7dmFyIGI9ZG9jdW1lbnQuY3JlYXRlRXZlbnQoIkhUTUxFdmVudHMiKTtyZXR1cm4gYi5pbml0RXZlbnQoYSwhMCwhMCksYn0pLCJjb21wbGV0ZSI9PT1kb2N1bWVudC5yZWFkeVN0YXRlfHxhLmZsYWdzLmVhZ2VyKWIoKTtlbHNlIGlmKCJpbnRlcmFjdGl2ZSIhPT1kb2N1bWVudC5yZWFkeVN0YXRlfHx3aW5kb3cuYXR0YWNoRXZlbnR8fHdpbmRvdy5IVE1MSW1wb3J0cyYmIXdpbmRvdy5IVE1MSW1wb3J0cy5yZWFkeSl7dmFyIGM9d2luZG93LkhUTUxJbXBvcnRzJiYhSFRNTEltcG9ydHMucmVhZHk/IkhUTUxJbXBvcnRzTG9hZGVkIjoiRE9NQ29udGVudExvYWRlZCI7d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoYyxiKX1lbHNlIGIoKX0od2luZG93LkN1c3RvbUVsZW1lbnRzKSxmdW5jdGlvbigpe2lmKHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCl7dmFyIGE9WyJ1cGdyYWRlQWxsIiwidXBncmFkZVN1YnRyZWUiLCJvYnNlcnZlRG9jdW1lbnQiLCJ1cGdyYWRlRG9jdW1lbnQiXSxiPXt9O2EuZm9yRWFjaChmdW5jdGlvbihhKXtiW2FdPUN1c3RvbUVsZW1lbnRzW2FdfSksYS5mb3JFYWNoKGZ1bmN0aW9uKGEpe0N1c3RvbUVsZW1lbnRzW2FdPWZ1bmN0aW9uKGMpe3JldHVybiBiW2FdKHdyYXAoYykpfX0pfX0oKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEpe3RoaXMuY2FjaGU9T2JqZWN0LmNyZWF0ZShudWxsKSx0aGlzLm1hcD1PYmplY3QuY3JlYXRlKG51bGwpLHRoaXMucmVxdWVzdHM9MCx0aGlzLnJlZ2V4PWF9dmFyIGM9YS5lbmRPZk1pY3JvdGFzaztiLnByb3RvdHlwZT17ZXh0cmFjdFVybHM6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGMsZCxlPVtdO2M9dGhpcy5yZWdleC5leGVjKGEpOylkPW5ldyBVUkwoY1sxXSxiKSxlLnB1c2goe21hdGNoZWQ6Y1swXSx1cmw6ZC5ocmVmfSk7cmV0dXJuIGV9LHByb2Nlc3M6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXRoaXMuZXh0cmFjdFVybHMoYSxiKSxlPWMuYmluZChudWxsLHRoaXMubWFwKTt0aGlzLmZldGNoKGQsZSl9LGZldGNoOmZ1bmN0aW9uKGEsYil7dmFyIGM9YS5sZW5ndGg7aWYoIWMpcmV0dXJuIGIoKTtmb3IodmFyIGQsZSxmLGc9ZnVuY3Rpb24oKXswPT09LS1jJiZiKCl9LGg9MDtjPmg7aCsrKWQ9YVtoXSxmPWQudXJsLGU9dGhpcy5jYWNoZVtmXSxlfHwoZT10aGlzLnhocihmKSxlLm1hdGNoPWQsdGhpcy5jYWNoZVtmXT1lKSxlLndhaXQoZyl9LGhhbmRsZVhocjpmdW5jdGlvbihhKXt2YXIgYj1hLm1hdGNoLGM9Yi51cmwsZD1hLnJlc3BvbnNlfHxhLnJlc3BvbnNlVGV4dHx8IiI7dGhpcy5tYXBbY109ZCx0aGlzLmZldGNoKHRoaXMuZXh0cmFjdFVybHMoZCxjKSxhLnJlc29sdmUpfSx4aHI6ZnVuY3Rpb24oYSl7dGhpcy5yZXF1ZXN0cysrO3ZhciBiPW5ldyBYTUxIdHRwUmVxdWVzdDtyZXR1cm4gYi5vcGVuKCJHRVQiLGEsITApLGIuc2VuZCgpLGIub25lcnJvcj1iLm9ubG9hZD10aGlzLmhhbmRsZVhoci5iaW5kKHRoaXMsYiksYi5wZW5kaW5nPVtdLGIucmVzb2x2ZT1mdW5jdGlvbigpe2Zvcih2YXIgYT1iLnBlbmRpbmcsYz0wO2M8YS5sZW5ndGg7YysrKWFbY10oKTtiLnBlbmRpbmc9bnVsbH0sYi53YWl0PWZ1bmN0aW9uKGEpe2IucGVuZGluZz9iLnBlbmRpbmcucHVzaChhKTpjKGEpfSxifX0sYS5Mb2FkZXI9Yn0od2luZG93LlBsYXRmb3JtKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKCl7dGhpcy5sb2FkZXI9bmV3IGQodGhpcy5yZWdleCl9dmFyIGM9YS51cmxSZXNvbHZlcixkPWEuTG9hZGVyO2IucHJvdG90eXBlPXtyZWdleDovQGltcG9ydFxzKyg/OnVybCk/WyInXChdKihbXiciXCldKilbJyJcKV0qOy9nLHJlc29sdmU6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWZ1bmN0aW9uKGQpe2ModGhpcy5mbGF0dGVuKGEsYixkKSl9LmJpbmQodGhpcyk7dGhpcy5sb2FkZXIucHJvY2VzcyhhLGIsZCl9LHJlc29sdmVOb2RlOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD1hLnRleHRDb250ZW50LGU9ZnVuY3Rpb24oYil7YS50ZXh0Q29udGVudD1iLGMoYSl9O3RoaXMucmVzb2x2ZShkLGIsZSl9LGZsYXR0ZW46ZnVuY3Rpb24oYSxiLGQpe2Zvcih2YXIgZSxmLGcsaD10aGlzLmxvYWRlci5leHRyYWN0VXJscyhhLGIpLGk9MDtpPGgubGVuZ3RoO2krKyllPWhbaV0sZj1lLnVybCxnPWMucmVzb2x2ZUNzc1RleHQoZFtmXSxmLCEwKSxnPXRoaXMuZmxhdHRlbihnLGIsZCksYT1hLnJlcGxhY2UoZS5tYXRjaGVkLGcpO3JldHVybiBhfSxsb2FkU3R5bGVzOmZ1bmN0aW9uKGEsYixjKXtmdW5jdGlvbiBkKCl7ZisrLGY9PT1nJiZjJiZjKCl9Zm9yKHZhciBlLGY9MCxnPWEubGVuZ3RoLGg9MDtnPmgmJihlPWFbaF0pO2grKyl0aGlzLnJlc29sdmVOb2RlKGUsYixkKX19O3ZhciBlPW5ldyBiO2Euc3R5bGVSZXNvbHZlcj1lfSh3aW5kb3cuUGxhdGZvcm0pLGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGEoYSl7Zm9yKDthLnBhcmVudE5vZGU7KWE9YS5wYXJlbnROb2RlO3JldHVybiJmdW5jdGlvbiI9PXR5cGVvZiBhLmdldEVsZW1lbnRCeUlkP2E6bnVsbH1mdW5jdGlvbiBiKGEsYixjKXt2YXIgZD1hLmJpbmRpbmdzXztyZXR1cm4gZHx8KGQ9YS5iaW5kaW5nc189e30pLGRbYl0mJmNbYl0uY2xvc2UoKSxkW2JdPWN9ZnVuY3Rpb24gYyhhLGIsYyl7cmV0dXJuIGN9ZnVuY3Rpb24gZChhKXtyZXR1cm4gbnVsbD09YT8iIjphfWZ1bmN0aW9uIGUoYSxiKXthLmRhdGE9ZChiKX1mdW5jdGlvbiBmKGEpe3JldHVybiBmdW5jdGlvbihiKXtyZXR1cm4gZShhLGIpfX1mdW5jdGlvbiBnKGEsYixjLGUpe3JldHVybiBjP3ZvaWQoZT9hLnNldEF0dHJpYnV0ZShiLCIiKTphLnJlbW92ZUF0dHJpYnV0ZShiKSk6dm9pZCBhLnNldEF0dHJpYnV0ZShiLGQoZSkpfWZ1bmN0aW9uIGgoYSxiLGMpe3JldHVybiBmdW5jdGlvbihkKXtnKGEsYixjLGQpfX1mdW5jdGlvbiBpKGEpe3N3aXRjaChhLnR5cGUpe2Nhc2UiY2hlY2tib3giOnJldHVybiB1O2Nhc2UicmFkaW8iOmNhc2Uic2VsZWN0LW11bHRpcGxlIjpjYXNlInNlbGVjdC1vbmUiOnJldHVybiJjaGFuZ2UiO2Nhc2UicmFuZ2UiOmlmKC9UcmlkZW50fE1TSUUvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkpcmV0dXJuImNoYW5nZSI7ZGVmYXVsdDpyZXR1cm4iaW5wdXQifX1mdW5jdGlvbiBqKGEsYixjLGUpe2FbYl09KGV8fGQpKGMpfWZ1bmN0aW9uIGsoYSxiLGMpe3JldHVybiBmdW5jdGlvbihkKXtyZXR1cm4gaihhLGIsZCxjKX19ZnVuY3Rpb24gbCgpe31mdW5jdGlvbiBtKGEsYixjLGQpe2Z1bmN0aW9uIGUoKXtjLnNldFZhbHVlKGFbYl0pLGMuZGlzY2FyZENoYW5nZXMoKSwoZHx8bCkoYSksUGxhdGZvcm0ucGVyZm9ybU1pY3JvdGFza0NoZWNrcG9pbnQoKX12YXIgZj1pKGEpO3JldHVybiBhLmFkZEV2ZW50TGlzdGVuZXIoZixlKSx7Y2xvc2U6ZnVuY3Rpb24oKXthLnJlbW92ZUV2ZW50TGlzdGVuZXIoZixlKSxjLmNsb3NlKCl9LG9ic2VydmFibGVfOmN9fWZ1bmN0aW9uIG4oYSl7cmV0dXJuIEJvb2xlYW4oYSl9ZnVuY3Rpb24gbyhiKXtpZihiLmZvcm0pcmV0dXJuIHMoYi5mb3JtLmVsZW1lbnRzLGZ1bmN0aW9uKGEpe3JldHVybiBhIT1iJiYiSU5QVVQiPT1hLnRhZ05hbWUmJiJyYWRpbyI9PWEudHlwZSYmYS5uYW1lPT1iLm5hbWV9KTt2YXIgYz1hKGIpO2lmKCFjKXJldHVybltdO3ZhciBkPWMucXVlcnlTZWxlY3RvckFsbCgnaW5wdXRbdHlwZT0icmFkaW8iXVtuYW1lPSInK2IubmFtZSsnIl0nKTtyZXR1cm4gcyhkLGZ1bmN0aW9uKGEpe3JldHVybiBhIT1iJiYhYS5mb3JtfSl9ZnVuY3Rpb24gcChhKXsiSU5QVVQiPT09YS50YWdOYW1lJiYicmFkaW8iPT09YS50eXBlJiZvKGEpLmZvckVhY2goZnVuY3Rpb24oYSl7dmFyIGI9YS5iaW5kaW5nc18uY2hlY2tlZDtiJiZiLm9ic2VydmFibGVfLnNldFZhbHVlKCExKX0pfWZ1bmN0aW9uIHEoYSxiKXt2YXIgYyxlLGYsZz1hLnBhcmVudE5vZGU7ZyBpbnN0YW5jZW9mIEhUTUxTZWxlY3RFbGVtZW50JiZnLmJpbmRpbmdzXyYmZy5iaW5kaW5nc18udmFsdWUmJihjPWcsZT1jLmJpbmRpbmdzXy52YWx1ZSxmPWMudmFsdWUpLGEudmFsdWU9ZChiKSxjJiZjLnZhbHVlIT1mJiYoZS5vYnNlcnZhYmxlXy5zZXRWYWx1ZShjLnZhbHVlKSxlLm9ic2VydmFibGVfLmRpc2NhcmRDaGFuZ2VzKCksUGxhdGZvcm0ucGVyZm9ybU1pY3JvdGFza0NoZWNrcG9pbnQoKSl9ZnVuY3Rpb24gcihhKXtyZXR1cm4gZnVuY3Rpb24oYil7cShhLGIpfX12YXIgcz1BcnJheS5wcm90b3R5cGUuZmlsdGVyLmNhbGwuYmluZChBcnJheS5wcm90b3R5cGUuZmlsdGVyKTtOb2RlLnByb3RvdHlwZS5iaW5kPWZ1bmN0aW9uKGEsYil7Y29uc29sZS5lcnJvcigiVW5oYW5kbGVkIGJpbmRpbmcgdG8gTm9kZTogIix0aGlzLGEsYil9LE5vZGUucHJvdG90eXBlLmJpbmRGaW5pc2hlZD1mdW5jdGlvbigpe307dmFyIHQ9YztPYmplY3QuZGVmaW5lUHJvcGVydHkoUGxhdGZvcm0sImVuYWJsZUJpbmRpbmdzUmVmbGVjdGlvbiIse2dldDpmdW5jdGlvbigpe3JldHVybiB0PT09Yn0sc2V0OmZ1bmN0aW9uKGEpe3JldHVybiB0PWE/YjpjLGF9LGNvbmZpZ3VyYWJsZTohMH0pLFRleHQucHJvdG90eXBlLmJpbmQ9ZnVuY3Rpb24oYSxiLGMpe2lmKCJ0ZXh0Q29udGVudCIhPT1hKXJldHVybiBOb2RlLnByb3RvdHlwZS5iaW5kLmNhbGwodGhpcyxhLGIsYyk7aWYoYylyZXR1cm4gZSh0aGlzLGIpO3ZhciBkPWI7cmV0dXJuIGUodGhpcyxkLm9wZW4oZih0aGlzKSkpLHQodGhpcyxhLGQpfSxFbGVtZW50LnByb3RvdHlwZS5iaW5kPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD0iPyI9PWFbYS5sZW5ndGgtMV07aWYoZCYmKHRoaXMucmVtb3ZlQXR0cmlidXRlKGEpLGE9YS5zbGljZSgwLC0xKSksYylyZXR1cm4gZyh0aGlzLGEsZCxiKTt2YXIgZT1iO3JldHVybiBnKHRoaXMsYSxkLGUub3BlbihoKHRoaXMsYSxkKSkpLHQodGhpcyxhLGUpfTt2YXIgdTshZnVuY3Rpb24oKXt2YXIgYT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKSxiPWEuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW5wdXQiKSk7Yi5zZXRBdHRyaWJ1dGUoInR5cGUiLCJjaGVja2JveCIpO3ZhciBjLGQ9MDtiLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIixmdW5jdGlvbigpe2QrKyxjPWN8fCJjbGljayJ9KSxiLmFkZEV2ZW50TGlzdGVuZXIoImNoYW5nZSIsZnVuY3Rpb24oKXtkKyssYz1jfHwiY2hhbmdlIn0pO3ZhciBlPWRvY3VtZW50LmNyZWF0ZUV2ZW50KCJNb3VzZUV2ZW50Iik7ZS5pbml0TW91c2VFdmVudCgiY2xpY2siLCEwLCEwLHdpbmRvdywwLDAsMCwwLDAsITEsITEsITEsITEsMCxudWxsKSxiLmRpc3BhdGNoRXZlbnQoZSksdT0xPT1kPyJjaGFuZ2UiOmN9KCksSFRNTElucHV0RWxlbWVudC5wcm90b3R5cGUuYmluZD1mdW5jdGlvbihhLGMsZSl7aWYoInZhbHVlIiE9PWEmJiJjaGVja2VkIiE9PWEpcmV0dXJuIEhUTUxFbGVtZW50LnByb3RvdHlwZS5iaW5kLmNhbGwodGhpcyxhLGMsZSk7dGhpcy5yZW1vdmVBdHRyaWJ1dGUoYSk7dmFyIGY9ImNoZWNrZWQiPT1hP246ZCxnPSJjaGVja2VkIj09YT9wOmw7aWYoZSlyZXR1cm4gaih0aGlzLGEsYyxmKTt2YXIgaD1jLGk9bSh0aGlzLGEsaCxnKTtyZXR1cm4gaih0aGlzLGEsaC5vcGVuKGsodGhpcyxhLGYpKSxmKSxiKHRoaXMsYSxpKX0sSFRNTFRleHRBcmVhRWxlbWVudC5wcm90b3R5cGUuYmluZD1mdW5jdGlvbihhLGIsYyl7aWYoInZhbHVlIiE9PWEpcmV0dXJuIEhUTUxFbGVtZW50LnByb3RvdHlwZS5iaW5kLmNhbGwodGhpcyxhLGIsYyk7aWYodGhpcy5yZW1vdmVBdHRyaWJ1dGUoInZhbHVlIiksYylyZXR1cm4gaih0aGlzLCJ2YWx1ZSIsYik7dmFyIGU9YixmPW0odGhpcywidmFsdWUiLGUpO3JldHVybiBqKHRoaXMsInZhbHVlIixlLm9wZW4oayh0aGlzLCJ2YWx1ZSIsZCkpKSx0KHRoaXMsYSxmKX0sSFRNTE9wdGlvbkVsZW1lbnQucHJvdG90eXBlLmJpbmQ9ZnVuY3Rpb24oYSxiLGMpe2lmKCJ2YWx1ZSIhPT1hKXJldHVybiBIVE1MRWxlbWVudC5wcm90b3R5cGUuYmluZC5jYWxsKHRoaXMsYSxiLGMpO2lmKHRoaXMucmVtb3ZlQXR0cmlidXRlKCJ2YWx1ZSIpLGMpcmV0dXJuIHEodGhpcyxiKTt2YXIgZD1iLGU9bSh0aGlzLCJ2YWx1ZSIsZCk7cmV0dXJuIHEodGhpcyxkLm9wZW4ocih0aGlzKSkpLHQodGhpcyxhLGUpfSxIVE1MU2VsZWN0RWxlbWVudC5wcm90b3R5cGUuYmluZD1mdW5jdGlvbihhLGMsZCl7aWYoInNlbGVjdGVkaW5kZXgiPT09YSYmKGE9InNlbGVjdGVkSW5kZXgiKSwic2VsZWN0ZWRJbmRleCIhPT1hJiYidmFsdWUiIT09YSlyZXR1cm4gSFRNTEVsZW1lbnQucHJvdG90eXBlLmJpbmQuY2FsbCh0aGlzLGEsYyxkKTtpZih0aGlzLnJlbW92ZUF0dHJpYnV0ZShhKSxkKXJldHVybiBqKHRoaXMsYSxjKTt2YXIgZT1jLGY9bSh0aGlzLGEsZSk7cmV0dXJuIGoodGhpcyxhLGUub3BlbihrKHRoaXMsYSkpKSxiKHRoaXMsYSxmKX19KHRoaXMpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe2lmKCFhKXRocm93IG5ldyBFcnJvcigiQXNzZXJ0aW9uIGZhaWxlZCIpfWZ1bmN0aW9uIGMoYSl7Zm9yKHZhciBiO2I9YS5wYXJlbnROb2RlOylhPWI7cmV0dXJuIGF9ZnVuY3Rpb24gZChhLGIpe2lmKGIpe2Zvcih2YXIgZCxlPSIjIitiOyFkJiYoYT1jKGEpLGEucHJvdG9Db250ZW50Xz9kPWEucHJvdG9Db250ZW50Xy5xdWVyeVNlbGVjdG9yKGUpOmEuZ2V0RWxlbWVudEJ5SWQmJihkPWEuZ2V0RWxlbWVudEJ5SWQoYikpLCFkJiZhLnRlbXBsYXRlQ3JlYXRvcl8pOylhPWEudGVtcGxhdGVDcmVhdG9yXztyZXR1cm4gZH19ZnVuY3Rpb24gZShhKXtyZXR1cm4idGVtcGxhdGUiPT1hLnRhZ05hbWUmJiJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI9PWEubmFtZXNwYWNlVVJJfWZ1bmN0aW9uIGYoYSl7cmV0dXJuIlRFTVBMQVRFIj09YS50YWdOYW1lJiYiaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCI9PWEubmFtZXNwYWNlVVJJfWZ1bmN0aW9uIGcoYSl7cmV0dXJuIEJvb2xlYW4oTFthLnRhZ05hbWVdJiZhLmhhc0F0dHJpYnV0ZSgidGVtcGxhdGUiKSl9ZnVuY3Rpb24gaChhKXtyZXR1cm4gdm9pZCAwPT09YS5pc1RlbXBsYXRlXyYmKGEuaXNUZW1wbGF0ZV89IlRFTVBMQVRFIj09YS50YWdOYW1lfHxnKGEpKSxhLmlzVGVtcGxhdGVffWZ1bmN0aW9uIGkoYSxiKXt2YXIgYz1hLnF1ZXJ5U2VsZWN0b3JBbGwoTik7aChhKSYmYihhKSxHKGMsYil9ZnVuY3Rpb24gaihhKXtmdW5jdGlvbiBiKGEpe0hUTUxUZW1wbGF0ZUVsZW1lbnQuZGVjb3JhdGUoYSl8fGooYS5jb250ZW50KX1pKGEsYil9ZnVuY3Rpb24gayhhLGIpe09iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGIpLmZvckVhY2goZnVuY3Rpb24oYyl7T2JqZWN0LmRlZmluZVByb3BlcnR5KGEsYyxPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGIsYykpfSl9ZnVuY3Rpb24gbChhKXt2YXIgYj1hLm93bmVyRG9jdW1lbnQ7aWYoIWIuZGVmYXVsdFZpZXcpcmV0dXJuIGI7dmFyIGM9Yi50ZW1wbGF0ZUNvbnRlbnRzT3duZXJfO2lmKCFjKXtmb3IoYz1iLmltcGxlbWVudGF0aW9uLmNyZWF0ZUhUTUxEb2N1bWVudCgiIik7Yy5sYXN0Q2hpbGQ7KWMucmVtb3ZlQ2hpbGQoYy5sYXN0Q2hpbGQpO2IudGVtcGxhdGVDb250ZW50c093bmVyXz1jfXJldHVybiBjfWZ1bmN0aW9uIG0oYSl7aWYoIWEuc3RhZ2luZ0RvY3VtZW50Xyl7dmFyIGI9YS5vd25lckRvY3VtZW50O2lmKCFiLnN0YWdpbmdEb2N1bWVudF8pe2Iuc3RhZ2luZ0RvY3VtZW50Xz1iLmltcGxlbWVudGF0aW9uLmNyZWF0ZUhUTUxEb2N1bWVudCgiIiksYi5zdGFnaW5nRG9jdW1lbnRfLmlzU3RhZ2luZ0RvY3VtZW50PSEwO3ZhciBjPWIuc3RhZ2luZ0RvY3VtZW50Xy5jcmVhdGVFbGVtZW50KCJiYXNlIik7Yy5ocmVmPWRvY3VtZW50LmJhc2VVUkksYi5zdGFnaW5nRG9jdW1lbnRfLmhlYWQuYXBwZW5kQ2hpbGQoYyksYi5zdGFnaW5nRG9jdW1lbnRfLnN0YWdpbmdEb2N1bWVudF89Yi5zdGFnaW5nRG9jdW1lbnRffWEuc3RhZ2luZ0RvY3VtZW50Xz1iLnN0YWdpbmdEb2N1bWVudF99cmV0dXJuIGEuc3RhZ2luZ0RvY3VtZW50X31mdW5jdGlvbiBuKGEpe3ZhciBiPWEub3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0ZW1wbGF0ZSIpO2EucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoYixhKTtmb3IodmFyIGM9YS5hdHRyaWJ1dGVzLGQ9Yy5sZW5ndGg7ZC0tPjA7KXt2YXIgZT1jW2RdO0tbZS5uYW1lXSYmKCJ0ZW1wbGF0ZSIhPT1lLm5hbWUmJmIuc2V0QXR0cmlidXRlKGUubmFtZSxlLnZhbHVlKSxhLnJlbW92ZUF0dHJpYnV0ZShlLm5hbWUpKX1yZXR1cm4gYn1mdW5jdGlvbiBvKGEpe3ZhciBiPWEub3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0ZW1wbGF0ZSIpO2EucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoYixhKTtmb3IodmFyIGM9YS5hdHRyaWJ1dGVzLGQ9Yy5sZW5ndGg7ZC0tPjA7KXt2YXIgZT1jW2RdO2Iuc2V0QXR0cmlidXRlKGUubmFtZSxlLnZhbHVlKSxhLnJlbW92ZUF0dHJpYnV0ZShlLm5hbWUpfXJldHVybiBhLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYSksYn1mdW5jdGlvbiBwKGEsYixjKXt2YXIgZD1hLmNvbnRlbnQ7aWYoYylyZXR1cm4gdm9pZCBkLmFwcGVuZENoaWxkKGIpO2Zvcih2YXIgZTtlPWIuZmlyc3RDaGlsZDspZC5hcHBlbmRDaGlsZChlKX1mdW5jdGlvbiBxKGEpe1A/YS5fX3Byb3RvX189SFRNTFRlbXBsYXRlRWxlbWVudC5wcm90b3R5cGU6ayhhLEhUTUxUZW1wbGF0ZUVsZW1lbnQucHJvdG90eXBlKX1mdW5jdGlvbiByKGEpe2Euc2V0TW9kZWxGbl98fChhLnNldE1vZGVsRm5fPWZ1bmN0aW9uKCl7YS5zZXRNb2RlbEZuU2NoZWR1bGVkXz0hMTt2YXIgYj16KGEsYS5kZWxlZ2F0ZV8mJmEuZGVsZWdhdGVfLnByZXBhcmVCaW5kaW5nKTt3KGEsYixhLm1vZGVsXyl9KSxhLnNldE1vZGVsRm5TY2hlZHVsZWRffHwoYS5zZXRNb2RlbEZuU2NoZWR1bGVkXz0hMCxPYnNlcnZlci5ydW5FT01fKGEuc2V0TW9kZWxGbl8pKX1mdW5jdGlvbiBzKGEsYixjLGQpe2lmKGEmJmEubGVuZ3RoKXtmb3IodmFyIGUsZj1hLmxlbmd0aCxnPTAsaD0wLGk9MCxqPSEwO2Y+aDspe3ZhciBnPWEuaW5kZXhPZigie3siLGgpLGs9YS5pbmRleE9mKCJbWyIsaCksbD0hMSxtPSJ9fSI7aWYoaz49MCYmKDA+Z3x8Zz5rKSYmKGc9ayxsPSEwLG09Il1dIiksaT0wPmc/LTE6YS5pbmRleE9mKG0sZysyKSwwPmkpe2lmKCFlKXJldHVybjtlLnB1c2goYS5zbGljZShoKSk7YnJlYWt9ZT1lfHxbXSxlLnB1c2goYS5zbGljZShoLGcpKTt2YXIgbj1hLnNsaWNlKGcrMixpKS50cmltKCk7ZS5wdXNoKGwpLGo9aiYmbDt2YXIgbz1kJiZkKG4sYixjKTtlLnB1c2gobnVsbD09bz9QYXRoLmdldChuKTpudWxsKSxlLnB1c2gobyksaD1pKzJ9cmV0dXJuIGg9PT1mJiZlLnB1c2goIiIpLGUuaGFzT25lUGF0aD01PT09ZS5sZW5ndGgsZS5pc1NpbXBsZVBhdGg9ZS5oYXNPbmVQYXRoJiYiIj09ZVswXSYmIiI9PWVbNF0sZS5vbmx5T25lVGltZT1qLGUuY29tYmluYXRvcj1mdW5jdGlvbihhKXtmb3IodmFyIGI9ZVswXSxjPTE7YzxlLmxlbmd0aDtjKz00KXt2YXIgZD1lLmhhc09uZVBhdGg/YTphWyhjLTEpLzRdO3ZvaWQgMCE9PWQmJihiKz1kKSxiKz1lW2MrM119cmV0dXJuIGJ9LGV9fWZ1bmN0aW9uIHQoYSxiLGMsZCl7aWYoYi5oYXNPbmVQYXRoKXt2YXIgZT1iWzNdLGY9ZT9lKGQsYywhMCk6YlsyXS5nZXRWYWx1ZUZyb20oZCk7cmV0dXJuIGIuaXNTaW1wbGVQYXRoP2Y6Yi5jb21iaW5hdG9yKGYpfWZvcih2YXIgZz1bXSxoPTE7aDxiLmxlbmd0aDtoKz00KXt2YXIgZT1iW2grMl07Z1soaC0xKS80XT1lP2UoZCxjKTpiW2grMV0uZ2V0VmFsdWVGcm9tKGQpfXJldHVybiBiLmNvbWJpbmF0b3IoZyl9ZnVuY3Rpb24gdShhLGIsYyxkKXt2YXIgZT1iWzNdLGY9ZT9lKGQsYywhMSk6bmV3IFBhdGhPYnNlcnZlcihkLGJbMl0pO3JldHVybiBiLmlzU2ltcGxlUGF0aD9mOm5ldyBPYnNlcnZlclRyYW5zZm9ybShmLGIuY29tYmluYXRvcil9ZnVuY3Rpb24gdihhLGIsYyxkKXtpZihiLm9ubHlPbmVUaW1lKXJldHVybiB0KGEsYixjLGQpO2lmKGIuaGFzT25lUGF0aClyZXR1cm4gdShhLGIsYyxkKTtmb3IodmFyIGU9bmV3IENvbXBvdW5kT2JzZXJ2ZXIsZj0xO2Y8Yi5sZW5ndGg7Zis9NCl7dmFyIGc9YltmXSxoPWJbZisyXTtpZihoKXt2YXIgaT1oKGQsYyxnKTtnP2UuYWRkUGF0aChpKTplLmFkZE9ic2VydmVyKGkpfWVsc2V7dmFyIGo9YltmKzFdO2c/ZS5hZGRQYXRoKGouZ2V0VmFsdWVGcm9tKGQpKTplLmFkZFBhdGgoZCxqKX19cmV0dXJuIG5ldyBPYnNlcnZlclRyYW5zZm9ybShlLGIuY29tYmluYXRvcil9ZnVuY3Rpb24gdyhhLGIsYyxkKXtmb3IodmFyIGU9MDtlPGIubGVuZ3RoO2UrPTIpe3ZhciBmPWJbZV0sZz1iW2UrMV0saD12KGYsZyxhLGMpLGk9YS5iaW5kKGYsaCxnLm9ubHlPbmVUaW1lKTtpJiZkJiZkLnB1c2goaSl9aWYoYS5iaW5kRmluaXNoZWQoKSxiLmlzVGVtcGxhdGUpe2EubW9kZWxfPWM7dmFyIGo9YS5wcm9jZXNzQmluZGluZ0RpcmVjdGl2ZXNfKGIpO2QmJmomJmQucHVzaChqKX19ZnVuY3Rpb24geChhLGIsYyl7dmFyIGQ9YS5nZXRBdHRyaWJ1dGUoYik7cmV0dXJuIHMoIiI9PWQ/Int7fX0iOmQsYixhLGMpfWZ1bmN0aW9uIHkoYSxjKXtiKGEpO2Zvcih2YXIgZD1bXSxlPTA7ZTxhLmF0dHJpYnV0ZXMubGVuZ3RoO2UrKyl7Zm9yKHZhciBmPWEuYXR0cmlidXRlc1tlXSxnPWYubmFtZSxpPWYudmFsdWU7Il8iPT09Z1swXTspZz1nLnN1YnN0cmluZygxKTtpZighaChhKXx8ZyE9PUomJmchPT1IJiZnIT09SSl7dmFyIGo9cyhpLGcsYSxjKTtqJiZkLnB1c2goZyxqKX19cmV0dXJuIGgoYSkmJihkLmlzVGVtcGxhdGU9ITAsZC5pZj14KGEsSixjKSxkLmJpbmQ9eChhLEgsYyksZC5yZXBlYXQ9eChhLEksYyksIWQuaWZ8fGQuYmluZHx8ZC5yZXBlYXR8fChkLmJpbmQ9cygie3t9fSIsSCxhLGMpKSksZH1mdW5jdGlvbiB6KGEsYil7aWYoYS5ub2RlVHlwZT09PU5vZGUuRUxFTUVOVF9OT0RFKXJldHVybiB5KGEsYik7aWYoYS5ub2RlVHlwZT09PU5vZGUuVEVYVF9OT0RFKXt2YXIgYz1zKGEuZGF0YSwidGV4dENvbnRlbnQiLGEsYik7aWYoYylyZXR1cm5bInRleHRDb250ZW50IixjXX1yZXR1cm5bXX1mdW5jdGlvbiBBKGEsYixjLGQsZSxmLGcpe2Zvcih2YXIgaD1iLmFwcGVuZENoaWxkKGMuaW1wb3J0Tm9kZShhLCExKSksaT0wLGo9YS5maXJzdENoaWxkO2o7aj1qLm5leHRTaWJsaW5nKUEoaixoLGMsZC5jaGlsZHJlbltpKytdLGUsZixnKTtyZXR1cm4gZC5pc1RlbXBsYXRlJiYoSFRNTFRlbXBsYXRlRWxlbWVudC5kZWNvcmF0ZShoLGEpLGYmJmguc2V0RGVsZWdhdGVfKGYpKSx3KGgsZCxlLGcpLGh9ZnVuY3Rpb24gQihhLGIpe3ZhciBjPXooYSxiKTtjLmNoaWxkcmVuPXt9O2Zvcih2YXIgZD0wLGU9YS5maXJzdENoaWxkO2U7ZT1lLm5leHRTaWJsaW5nKWMuY2hpbGRyZW5bZCsrXT1CKGUsYik7cmV0dXJuIGN9ZnVuY3Rpb24gQyhhKXt2YXIgYj1hLmlkXztyZXR1cm4gYnx8KGI9YS5pZF89UysrKSxifWZ1bmN0aW9uIEQoYSxiKXt2YXIgYz1DKGEpO2lmKGIpe3ZhciBkPWIuYmluZGluZ01hcHNbY107cmV0dXJuIGR8fChkPWIuYmluZGluZ01hcHNbY109QihhLGIucHJlcGFyZUJpbmRpbmcpfHxbXSksZH12YXIgZD1hLmJpbmRpbmdNYXBfO3JldHVybiBkfHwoZD1hLmJpbmRpbmdNYXBfPUIoYSx2b2lkIDApfHxbXSksZH1mdW5jdGlvbiBFKGEpe3RoaXMuY2xvc2VkPSExLHRoaXMudGVtcGxhdGVFbGVtZW50Xz1hLHRoaXMuaW5zdGFuY2VzPVtdLHRoaXMuZGVwcz12b2lkIDAsdGhpcy5pdGVyYXRlZFZhbHVlPVtdLHRoaXMucHJlc2VudFZhbHVlPXZvaWQgMCx0aGlzLmFycmF5T2JzZXJ2ZXI9dm9pZCAwfXZhciBGLEc9QXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbC5iaW5kKEFycmF5LnByb3RvdHlwZS5mb3JFYWNoKTthLk1hcCYmImZ1bmN0aW9uIj09dHlwZW9mIGEuTWFwLnByb3RvdHlwZS5mb3JFYWNoP0Y9YS5NYXA6KEY9ZnVuY3Rpb24oKXt0aGlzLmtleXM9W10sdGhpcy52YWx1ZXM9W119LEYucHJvdG90eXBlPXtzZXQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmtleXMuaW5kZXhPZihhKTswPmM/KHRoaXMua2V5cy5wdXNoKGEpLHRoaXMudmFsdWVzLnB1c2goYikpOnRoaXMudmFsdWVzW2NdPWJ9LGdldDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmtleXMuaW5kZXhPZihhKTtpZighKDA+YikpcmV0dXJuIHRoaXMudmFsdWVzW2JdfSwiZGVsZXRlIjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmtleXMuaW5kZXhPZihhKTtyZXR1cm4gMD5iPyExOih0aGlzLmtleXMuc3BsaWNlKGIsMSksdGhpcy52YWx1ZXMuc3BsaWNlKGIsMSksITApfSxmb3JFYWNoOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTA7Yzx0aGlzLmtleXMubGVuZ3RoO2MrKylhLmNhbGwoYnx8dGhpcyx0aGlzLnZhbHVlc1tjXSx0aGlzLmtleXNbY10sdGhpcyl9fSk7ImZ1bmN0aW9uIiE9dHlwZW9mIGRvY3VtZW50LmNvbnRhaW5zJiYoRG9jdW1lbnQucHJvdG90eXBlLmNvbnRhaW5zPWZ1bmN0aW9uKGEpe3JldHVybiBhPT09dGhpc3x8YS5wYXJlbnROb2RlPT09dGhpcz8hMDp0aGlzLmRvY3VtZW50RWxlbWVudC5jb250YWlucyhhKX0pO3ZhciBIPSJiaW5kIixJPSJyZXBlYXQiLEo9ImlmIixLPXt0ZW1wbGF0ZTohMCxyZXBlYXQ6ITAsYmluZDohMCxyZWY6ITB9LEw9e1RIRUFEOiEwLFRCT0RZOiEwLFRGT09UOiEwLFRIOiEwLFRSOiEwLFREOiEwLENPTEdST1VQOiEwLENPTDohMCxDQVBUSU9OOiEwLE9QVElPTjohMCxPUFRHUk9VUDohMH0sTT0idW5kZWZpbmVkIiE9dHlwZW9mIEhUTUxUZW1wbGF0ZUVsZW1lbnQ7TSYmIWZ1bmN0aW9uKCl7dmFyIGE9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidGVtcGxhdGUiKSxiPWEuY29udGVudC5vd25lckRvY3VtZW50LGM9Yi5hcHBlbmRDaGlsZChiLmNyZWF0ZUVsZW1lbnQoImh0bWwiKSksZD1jLmFwcGVuZENoaWxkKGIuY3JlYXRlRWxlbWVudCgiaGVhZCIpKSxlPWIuY3JlYXRlRWxlbWVudCgiYmFzZSIpO2UuaHJlZj1kb2N1bWVudC5iYXNlVVJJLGQuYXBwZW5kQ2hpbGQoZSl9KCk7dmFyIE49InRlbXBsYXRlLCAiK09iamVjdC5rZXlzKEwpLm1hcChmdW5jdGlvbihhKXtyZXR1cm4gYS50b0xvd2VyQ2FzZSgpKyJbdGVtcGxhdGVdIn0pLmpvaW4oIiwgIik7ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsZnVuY3Rpb24oKXtqKGRvY3VtZW50KSxQbGF0Zm9ybS5wZXJmb3JtTWljcm90YXNrQ2hlY2twb2ludCgpfSwhMSksTXx8KGEuSFRNTFRlbXBsYXRlRWxlbWVudD1mdW5jdGlvbigpe3Rocm93IFR5cGVFcnJvcigiSWxsZWdhbCBjb25zdHJ1Y3RvciIpfSk7dmFyIE8sUD0iX19wcm90b19fImlue307ImZ1bmN0aW9uIj09dHlwZW9mIE11dGF0aW9uT2JzZXJ2ZXImJihPPW5ldyBNdXRhdGlvbk9ic2VydmVyKGZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0wO2I8YS5sZW5ndGg7YisrKWFbYl0udGFyZ2V0LnJlZkNoYW5nZWRfKCl9KSksSFRNTFRlbXBsYXRlRWxlbWVudC5kZWNvcmF0ZT1mdW5jdGlvbihhLGMpe2lmKGEudGVtcGxhdGVJc0RlY29yYXRlZF8pcmV0dXJuITE7dmFyIGQ9YTtkLnRlbXBsYXRlSXNEZWNvcmF0ZWRfPSEwO3ZhciBoPWYoZCkmJk0saT1oLGs9IWgsbT0hMTtpZihofHwoZyhkKT8oYighYyksZD1uKGEpLGQudGVtcGxhdGVJc0RlY29yYXRlZF89ITAsaD1NLG09ITApOmUoZCkmJihkPW8oYSksZC50ZW1wbGF0ZUlzRGVjb3JhdGVkXz0hMCxoPU0pKSwhaCl7cShkKTt2YXIgcj1sKGQpO2QuY29udGVudF89ci5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCl9cmV0dXJuIGM/ZC5pbnN0YW5jZVJlZl89YzprP3AoZCxhLG0pOmkmJmooZC5jb250ZW50KSwhMH0sSFRNTFRlbXBsYXRlRWxlbWVudC5ib290c3RyYXA9ajt2YXIgUT1hLkhUTUxVbmtub3duRWxlbWVudHx8SFRNTEVsZW1lbnQsUj17Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudF99LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfTtNfHwoSFRNTFRlbXBsYXRlRWxlbWVudC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShRLnByb3RvdHlwZSksT2JqZWN0LmRlZmluZVByb3BlcnR5KEhUTUxUZW1wbGF0ZUVsZW1lbnQucHJvdG90eXBlLCJjb250ZW50IixSKSksayhIVE1MVGVtcGxhdGVFbGVtZW50LnByb3RvdHlwZSx7YmluZDpmdW5jdGlvbihhLGIsYyl7aWYoInJlZiIhPWEpcmV0dXJuIEVsZW1lbnQucHJvdG90eXBlLmJpbmQuY2FsbCh0aGlzLGEsYixjKTt2YXIgZD10aGlzLGU9Yz9iOmIub3BlbihmdW5jdGlvbihhKXtkLnNldEF0dHJpYnV0ZSgicmVmIixhKSxkLnJlZkNoYW5nZWRfKCl9KTtyZXR1cm4gdGhpcy5zZXRBdHRyaWJ1dGUoInJlZiIsZSksdGhpcy5yZWZDaGFuZ2VkXygpLGM/dm9pZCAwOih0aGlzLmJpbmRpbmdzXz90aGlzLmJpbmRpbmdzXy5yZWY9Yjp0aGlzLmJpbmRpbmdzXz17cmVmOmJ9LGIpfSxwcm9jZXNzQmluZGluZ0RpcmVjdGl2ZXNfOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLml0ZXJhdG9yXyYmdGhpcy5pdGVyYXRvcl8uY2xvc2VEZXBzKCksYS5pZnx8YS5iaW5kfHxhLnJlcGVhdD8odGhpcy5pdGVyYXRvcl98fCh0aGlzLml0ZXJhdG9yXz1uZXcgRSh0aGlzKSksdGhpcy5pdGVyYXRvcl8udXBkYXRlRGVwZW5kZW5jaWVzKGEsdGhpcy5tb2RlbF8pLE8mJk8ub2JzZXJ2ZSh0aGlzLHthdHRyaWJ1dGVzOiEwLGF0dHJpYnV0ZUZpbHRlcjpbInJlZiJdfSksdGhpcy5pdGVyYXRvcl8pOnZvaWQodGhpcy5pdGVyYXRvcl8mJih0aGlzLml0ZXJhdG9yXy5jbG9zZSgpLHRoaXMuaXRlcmF0b3JfPXZvaWQgMCkpfSxjcmVhdGVJbnN0YW5jZTpmdW5jdGlvbihhLGIsYyl7Yj9jPXRoaXMubmV3RGVsZWdhdGVfKGIpOmN8fChjPXRoaXMuZGVsZWdhdGVfKSx0aGlzLnJlZkNvbnRlbnRffHwodGhpcy5yZWZDb250ZW50Xz10aGlzLnJlZl8uY29udGVudCk7dmFyIGQ9dGhpcy5yZWZDb250ZW50XztpZihudWxsPT09ZC5maXJzdENoaWxkKXJldHVybiBUO3ZhciBlPUQoZCxjKSxmPW0odGhpcyksZz1mLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtnLnRlbXBsYXRlQ3JlYXRvcl89dGhpcyxnLnByb3RvQ29udGVudF89ZCxnLmJpbmRpbmdzXz1bXSxnLnRlcm1pbmF0b3JfPW51bGw7Zm9yKHZhciBoPWcudGVtcGxhdGVJbnN0YW5jZV89e2ZpcnN0Tm9kZTpudWxsLGxhc3ROb2RlOm51bGwsbW9kZWw6YX0saT0wLGo9ITEsaz1kLmZpcnN0Q2hpbGQ7aztrPWsubmV4dFNpYmxpbmcpe251bGw9PT1rLm5leHRTaWJsaW5nJiYoaj0hMCk7dmFyIGw9QShrLGcsZixlLmNoaWxkcmVuW2krK10sYSxjLGcuYmluZGluZ3NfKTtsLnRlbXBsYXRlSW5zdGFuY2VfPWgsaiYmKGcudGVybWluYXRvcl89bCl9cmV0dXJuIGguZmlyc3ROb2RlPWcuZmlyc3RDaGlsZCxoLmxhc3ROb2RlPWcubGFzdENoaWxkLGcudGVtcGxhdGVDcmVhdG9yXz12b2lkIDAsZy5wcm90b0NvbnRlbnRfPXZvaWQgMCxnfSxnZXQgbW9kZWwoKXtyZXR1cm4gdGhpcy5tb2RlbF99LHNldCBtb2RlbChhKXt0aGlzLm1vZGVsXz1hLHIodGhpcyl9LGdldCBiaW5kaW5nRGVsZWdhdGUoKXtyZXR1cm4gdGhpcy5kZWxlZ2F0ZV8mJnRoaXMuZGVsZWdhdGVfLnJhd30scmVmQ2hhbmdlZF86ZnVuY3Rpb24oKXt0aGlzLml0ZXJhdG9yXyYmdGhpcy5yZWZDb250ZW50XyE9PXRoaXMucmVmXy5jb250ZW50JiYodGhpcy5yZWZDb250ZW50Xz12b2lkIDAsdGhpcy5pdGVyYXRvcl8udmFsdWVDaGFuZ2VkKCksdGhpcy5pdGVyYXRvcl8udXBkYXRlSXRlcmF0ZWRWYWx1ZSgpKX0sY2xlYXI6ZnVuY3Rpb24oKXt0aGlzLm1vZGVsXz12b2lkIDAsdGhpcy5kZWxlZ2F0ZV89dm9pZCAwLHRoaXMuYmluZGluZ3NfJiZ0aGlzLmJpbmRpbmdzXy5yZWYmJnRoaXMuYmluZGluZ3NfLnJlZi5jbG9zZSgpLHRoaXMucmVmQ29udGVudF89dm9pZCAwLHRoaXMuaXRlcmF0b3JfJiYodGhpcy5pdGVyYXRvcl8udmFsdWVDaGFuZ2VkKCksdGhpcy5pdGVyYXRvcl8uY2xvc2UoKSx0aGlzLml0ZXJhdG9yXz12b2lkIDApfSxzZXREZWxlZ2F0ZV86ZnVuY3Rpb24oYSl7dGhpcy5kZWxlZ2F0ZV89YSx0aGlzLmJpbmRpbmdNYXBfPXZvaWQgMCx0aGlzLml0ZXJhdG9yXyYmKHRoaXMuaXRlcmF0b3JfLmluc3RhbmNlUG9zaXRpb25DaGFuZ2VkRm5fPXZvaWQgMCx0aGlzLml0ZXJhdG9yXy5pbnN0YW5jZU1vZGVsRm5fPXZvaWQgMCl9LG5ld0RlbGVnYXRlXzpmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGIpe3ZhciBjPWEmJmFbYl07aWYoImZ1bmN0aW9uIj09dHlwZW9mIGMpcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGMuYXBwbHkoYSxhcmd1bWVudHMpfX1pZihhKXJldHVybntiaW5kaW5nTWFwczp7fSxyYXc6YSxwcmVwYXJlQmluZGluZzpiKCJwcmVwYXJlQmluZGluZyIpLHByZXBhcmVJbnN0YW5jZU1vZGVsOmIoInByZXBhcmVJbnN0YW5jZU1vZGVsIikscHJlcGFyZUluc3RhbmNlUG9zaXRpb25DaGFuZ2VkOmIoInByZXBhcmVJbnN0YW5jZVBvc2l0aW9uQ2hhbmdlZCIpfX0sc2V0IGJpbmRpbmdEZWxlZ2F0ZShhKXtpZih0aGlzLmRlbGVnYXRlXyl0aHJvdyBFcnJvcigiVGVtcGxhdGUgbXVzdCBiZSBjbGVhcmVkIGJlZm9yZSBhIG5ldyBiaW5kaW5nRGVsZWdhdGUgY2FuIGJlIGFzc2lnbmVkIik7dGhpcy5zZXREZWxlZ2F0ZV8odGhpcy5uZXdEZWxlZ2F0ZV8oYSkpfSxnZXQgcmVmXygpe3ZhciBhPWQodGhpcyx0aGlzLmdldEF0dHJpYnV0ZSgicmVmIikpO2lmKGF8fChhPXRoaXMuaW5zdGFuY2VSZWZfKSwhYSlyZXR1cm4gdGhpczt2YXIgYj1hLnJlZl87cmV0dXJuIGI/YjphfX0pO3ZhciBTPTE7T2JqZWN0LmRlZmluZVByb3BlcnR5KE5vZGUucHJvdG90eXBlLCJ0ZW1wbGF0ZUluc3RhbmNlIix7Z2V0OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy50ZW1wbGF0ZUluc3RhbmNlXztyZXR1cm4gYT9hOnRoaXMucGFyZW50Tm9kZT90aGlzLnBhcmVudE5vZGUudGVtcGxhdGVJbnN0YW5jZTp2b2lkIDB9fSk7dmFyIFQ9ZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1QuYmluZGluZ3NfPVtdLFQudGVybWluYXRvcl89bnVsbCxFLnByb3RvdHlwZT17Y2xvc2VEZXBzOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5kZXBzO2EmJihhLmlmT25lVGltZT09PSExJiZhLmlmVmFsdWUuY2xvc2UoKSxhLm9uZVRpbWU9PT0hMSYmYS52YWx1ZS5jbG9zZSgpKX0sdXBkYXRlRGVwZW5kZW5jaWVzOmZ1bmN0aW9uKGEsYil7dGhpcy5jbG9zZURlcHMoKTt2YXIgYz10aGlzLmRlcHM9e30sZD10aGlzLnRlbXBsYXRlRWxlbWVudF87aWYoYS5pZil7aWYoYy5oYXNJZj0hMCxjLmlmT25lVGltZT1hLmlmLm9ubHlPbmVUaW1lLGMuaWZWYWx1ZT12KEosYS5pZixkLGIpLGMuaWZPbmVUaW1lJiYhYy5pZlZhbHVlKXJldHVybiB2b2lkIHRoaXMudXBkYXRlSXRlcmF0ZWRWYWx1ZSgpO2MuaWZPbmVUaW1lfHxjLmlmVmFsdWUub3Blbih0aGlzLnVwZGF0ZUl0ZXJhdGVkVmFsdWUsdGhpcyl9YS5yZXBlYXQ/KGMucmVwZWF0PSEwLGMub25lVGltZT1hLnJlcGVhdC5vbmx5T25lVGltZSxjLnZhbHVlPXYoSSxhLnJlcGVhdCxkLGIpKTooYy5yZXBlYXQ9ITEsYy5vbmVUaW1lPWEuYmluZC5vbmx5T25lVGltZSxjLnZhbHVlPXYoSCxhLmJpbmQsZCxiKSksYy5vbmVUaW1lfHxjLnZhbHVlLm9wZW4odGhpcy51cGRhdGVJdGVyYXRlZFZhbHVlLHRoaXMpLHRoaXMudXBkYXRlSXRlcmF0ZWRWYWx1ZSgpfSx1cGRhdGVJdGVyYXRlZFZhbHVlOmZ1bmN0aW9uKCl7aWYodGhpcy5kZXBzLmhhc0lmKXt2YXIgYT10aGlzLmRlcHMuaWZWYWx1ZTtpZih0aGlzLmRlcHMuaWZPbmVUaW1lfHwoYT1hLmRpc2NhcmRDaGFuZ2VzKCkpLCFhKXJldHVybiB2b2lkIHRoaXMudmFsdWVDaGFuZ2VkKCl9dmFyIGI9dGhpcy5kZXBzLnZhbHVlO3RoaXMuZGVwcy5vbmVUaW1lfHwoYj1iLmRpc2NhcmRDaGFuZ2VzKCkpLHRoaXMuZGVwcy5yZXBlYXR8fChiPVtiXSk7dmFyIGM9dGhpcy5kZXBzLnJlcGVhdCYmIXRoaXMuZGVwcy5vbmVUaW1lJiZBcnJheS5pc0FycmF5KGIpO3RoaXMudmFsdWVDaGFuZ2VkKGIsYyl9LHZhbHVlQ2hhbmdlZDpmdW5jdGlvbihhLGIpe0FycmF5LmlzQXJyYXkoYSl8fChhPVtdKSxhIT09dGhpcy5pdGVyYXRlZFZhbHVlJiYodGhpcy51bm9ic2VydmUoKSx0aGlzLnByZXNlbnRWYWx1ZT1hLGImJih0aGlzLmFycmF5T2JzZXJ2ZXI9bmV3IEFycmF5T2JzZXJ2ZXIodGhpcy5wcmVzZW50VmFsdWUpLHRoaXMuYXJyYXlPYnNlcnZlci5vcGVuKHRoaXMuaGFuZGxlU3BsaWNlcyx0aGlzKSksdGhpcy5oYW5kbGVTcGxpY2VzKEFycmF5T2JzZXJ2ZXIuY2FsY3VsYXRlU3BsaWNlcyh0aGlzLnByZXNlbnRWYWx1ZSx0aGlzLml0ZXJhdGVkVmFsdWUpKSl9LGdldExhc3RJbnN0YW5jZU5vZGU6ZnVuY3Rpb24oYSl7aWYoLTE9PWEpcmV0dXJuIHRoaXMudGVtcGxhdGVFbGVtZW50Xzt2YXIgYj10aGlzLmluc3RhbmNlc1thXSxjPWIudGVybWluYXRvcl87aWYoIWMpcmV0dXJuIHRoaXMuZ2V0TGFzdEluc3RhbmNlTm9kZShhLTEpO2lmKGMubm9kZVR5cGUhPT1Ob2RlLkVMRU1FTlRfTk9ERXx8dGhpcy50ZW1wbGF0ZUVsZW1lbnRfPT09YylyZXR1cm4gYzt2YXIgZD1jLml0ZXJhdG9yXztyZXR1cm4gZD9kLmdldExhc3RUZW1wbGF0ZU5vZGUoKTpjfSxnZXRMYXN0VGVtcGxhdGVOb2RlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0TGFzdEluc3RhbmNlTm9kZSh0aGlzLmluc3RhbmNlcy5sZW5ndGgtMSl9LGluc2VydEluc3RhbmNlQXQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmdldExhc3RJbnN0YW5jZU5vZGUoYS0xKSxkPXRoaXMudGVtcGxhdGVFbGVtZW50Xy5wYXJlbnROb2RlO3RoaXMuaW5zdGFuY2VzLnNwbGljZShhLDAsYiksZC5pbnNlcnRCZWZvcmUoYixjLm5leHRTaWJsaW5nKX0sZXh0cmFjdEluc3RhbmNlQXQ6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPXRoaXMuZ2V0TGFzdEluc3RhbmNlTm9kZShhLTEpLGM9dGhpcy5nZXRMYXN0SW5zdGFuY2VOb2RlKGEpLGQ9dGhpcy50ZW1wbGF0ZUVsZW1lbnRfLnBhcmVudE5vZGUsZT10aGlzLmluc3RhbmNlcy5zcGxpY2UoYSwxKVswXTtjIT09Yjspe3ZhciBmPWIubmV4dFNpYmxpbmc7Zj09YyYmKGM9YiksZS5hcHBlbmRDaGlsZChkLnJlbW92ZUNoaWxkKGYpKX1yZXR1cm4gZX0sZ2V0RGVsZWdhdGVGbjpmdW5jdGlvbihhKXtyZXR1cm4gYT1hJiZhKHRoaXMudGVtcGxhdGVFbGVtZW50XyksImZ1bmN0aW9uIj09dHlwZW9mIGE/YTpudWxsfSxoYW5kbGVTcGxpY2VzOmZ1bmN0aW9uKGEpe2lmKCF0aGlzLmNsb3NlZCYmYS5sZW5ndGgpe3ZhciBiPXRoaXMudGVtcGxhdGVFbGVtZW50XztpZighYi5wYXJlbnROb2RlKXJldHVybiB2b2lkIHRoaXMuY2xvc2UoKTtBcnJheU9ic2VydmVyLmFwcGx5U3BsaWNlcyh0aGlzLml0ZXJhdGVkVmFsdWUsdGhpcy5wcmVzZW50VmFsdWUsYSk7dmFyIGM9Yi5kZWxlZ2F0ZV87dm9pZCAwPT09dGhpcy5pbnN0YW5jZU1vZGVsRm5fJiYodGhpcy5pbnN0YW5jZU1vZGVsRm5fPXRoaXMuZ2V0RGVsZWdhdGVGbihjJiZjLnByZXBhcmVJbnN0YW5jZU1vZGVsKSksdm9pZCAwPT09dGhpcy5pbnN0YW5jZVBvc2l0aW9uQ2hhbmdlZEZuXyYmKHRoaXMuaW5zdGFuY2VQb3NpdGlvbkNoYW5nZWRGbl89dGhpcy5nZXREZWxlZ2F0ZUZuKGMmJmMucHJlcGFyZUluc3RhbmNlUG9zaXRpb25DaGFuZ2VkKSk7Zm9yKHZhciBkPW5ldyBGLGU9MCxmPTA7ZjxhLmxlbmd0aDtmKyspe2Zvcih2YXIgZz1hW2ZdLGg9Zy5yZW1vdmVkLGk9MDtpPGgubGVuZ3RoO2krKyl7dmFyIGo9aFtpXSxrPXRoaXMuZXh0cmFjdEluc3RhbmNlQXQoZy5pbmRleCtlKTtrIT09VCYmZC5zZXQoaixrKX1lLT1nLmFkZGVkQ291bnR9Zm9yKHZhciBmPTA7ZjxhLmxlbmd0aDtmKyspZm9yKHZhciBnPWFbZl0sbD1nLmluZGV4O2w8Zy5pbmRleCtnLmFkZGVkQ291bnQ7bCsrKXt2YXIgaj10aGlzLml0ZXJhdGVkVmFsdWVbbF0saz1kLmdldChqKTtrP2QuZGVsZXRlKGopOih0aGlzLmluc3RhbmNlTW9kZWxGbl8mJihqPXRoaXMuaW5zdGFuY2VNb2RlbEZuXyhqKSksaz12b2lkIDA9PT1qP1Q6Yi5jcmVhdGVJbnN0YW5jZShqLHZvaWQgMCxjKSksdGhpcy5pbnNlcnRJbnN0YW5jZUF0KGwsayl9ZC5mb3JFYWNoKGZ1bmN0aW9uKGEpe3RoaXMuY2xvc2VJbnN0YW5jZUJpbmRpbmdzKGEpfSx0aGlzKSx0aGlzLmluc3RhbmNlUG9zaXRpb25DaGFuZ2VkRm5fJiZ0aGlzLnJlcG9ydEluc3RhbmNlc01vdmVkKGEpfX0scmVwb3J0SW5zdGFuY2VNb3ZlZDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmluc3RhbmNlc1thXTtiIT09VCYmdGhpcy5pbnN0YW5jZVBvc2l0aW9uQ2hhbmdlZEZuXyhiLnRlbXBsYXRlSW5zdGFuY2VfLGEpfSxyZXBvcnRJbnN0YW5jZXNNb3ZlZDpmdW5jdGlvbihhKXtmb3IodmFyIGI9MCxjPTAsZD0wO2Q8YS5sZW5ndGg7ZCsrKXt2YXIgZT1hW2RdO2lmKDAhPWMpZm9yKDtiPGUuaW5kZXg7KXRoaXMucmVwb3J0SW5zdGFuY2VNb3ZlZChiKSxiKys7ZWxzZSBiPWUuaW5kZXg7Zm9yKDtiPGUuaW5kZXgrZS5hZGRlZENvdW50Oyl0aGlzLnJlcG9ydEluc3RhbmNlTW92ZWQoYiksYisrO2MrPWUuYWRkZWRDb3VudC1lLnJlbW92ZWQubGVuZ3RofWlmKDAhPWMpZm9yKHZhciBmPXRoaXMuaW5zdGFuY2VzLmxlbmd0aDtmPmI7KXRoaXMucmVwb3J0SW5zdGFuY2VNb3ZlZChiKSxiKyt9LGNsb3NlSW5zdGFuY2VCaW5kaW5nczpmdW5jdGlvbihhKXtmb3IodmFyIGI9YS5iaW5kaW5nc18sYz0wO2M8Yi5sZW5ndGg7YysrKWJbY10uY2xvc2UoKX0sdW5vYnNlcnZlOmZ1bmN0aW9uKCl7dGhpcy5hcnJheU9ic2VydmVyJiYodGhpcy5hcnJheU9ic2VydmVyLmNsb3NlKCksdGhpcy5hcnJheU9ic2VydmVyPXZvaWQgMCl9LGNsb3NlOmZ1bmN0aW9uKCl7aWYoIXRoaXMuY2xvc2VkKXt0aGlzLnVub2JzZXJ2ZSgpO2Zvcih2YXIgYT0wO2E8dGhpcy5pbnN0YW5jZXMubGVuZ3RoO2ErKyl0aGlzLmNsb3NlSW5zdGFuY2VCaW5kaW5ncyh0aGlzLmluc3RhbmNlc1thXSk7dGhpcy5pbnN0YW5jZXMubGVuZ3RoPTAsdGhpcy5jbG9zZURlcHMoKSx0aGlzLnRlbXBsYXRlRWxlbWVudF8uaXRlcmF0b3JfPXZvaWQgMCx0aGlzLmNsb3NlZD0hMH19fSxIVE1MVGVtcGxhdGVFbGVtZW50LmZvckFsbFRlbXBsYXRlc0Zyb21fPWl9KHRoaXMpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoKXtlfHwoZT0hMCxhLmVuZE9mTWljcm90YXNrKGZ1bmN0aW9uKCl7ZT0hMSxsb2dGbGFncy5kYXRhJiZjb25zb2xlLmdyb3VwKCJQbGF0Zm9ybS5mbHVzaCgpIiksYS5wZXJmb3JtTWljcm90YXNrQ2hlY2twb2ludCgpLGxvZ0ZsYWdzLmRhdGEmJmNvbnNvbGUuZ3JvdXBFbmQoKX0pKX12YXIgYz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzdHlsZSIpO2MudGV4dENvbnRlbnQ9InRlbXBsYXRlIHtkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7fSAvKiBpbmplY3RlZCBieSBwbGF0Zm9ybS5qcyAqLyI7dmFyIGQ9ZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiaGVhZCIpO2QuaW5zZXJ0QmVmb3JlKGMsZC5maXJzdENoaWxkKTt2YXIgZTtpZihPYnNlcnZlci5oYXNPYmplY3RPYnNlcnZlKWI9ZnVuY3Rpb24oKXt9O2Vsc2V7dmFyIGY9MTI1O3dpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJXZWJDb21wb25lbnRzUmVhZHkiLGZ1bmN0aW9uKCl7YigpLGEuZmx1c2hQb2xsPXNldEludGVydmFsKGIsZil9KX1pZih3aW5kb3cuQ3VzdG9tRWxlbWVudHMmJiFDdXN0b21FbGVtZW50cy51c2VOYXRpdmUpe3ZhciBnPURvY3VtZW50LnByb3RvdHlwZS5pbXBvcnROb2RlO0RvY3VtZW50LnByb3RvdHlwZS5pbXBvcnROb2RlPWZ1bmN0aW9uKGEsYil7dmFyIGM9Zy5jYWxsKHRoaXMsYSxiKTtyZXR1cm4gQ3VzdG9tRWxlbWVudHMudXBncmFkZUFsbChjKSxjfX1hLmZsdXNoPWJ9KHdpbmRvdy5QbGF0Zm9ybSk7Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPXBsYXRmb3JtLmpzLm1hcA==",
                "headers": {
                    "Accept-Ranges": "bytes",
                    "Last-Modified": "Fri, 07 Nov 2014 02:02:03 GMT",
                    "Content-Length": "155527",
                    "Date": "Fri, 07 Nov 2014 02:02:03 GMT",
                    "Content-Type": "application/javascript"
                },
                "cookies": [],
                "mimeType": "script",
                "host": "localhost",
                "protocol": "http",
                "port": 9999,
                "inScope": false,
                "toolFlag": 16962,
                "referenceID": 0,
                "messageType": "response"
            },
            "messageType": "requestResponse"
        }
    ],
    "inScope": true,
    "messageType": "scanIssue"
}