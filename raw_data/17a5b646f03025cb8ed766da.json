{
    "url": "http://localhost:9999/sporritt/jsPlumb/external/mootools-core-full-compat-yc-1.4.5.min.js",
    "host": "localhost",
    "port": 9999,
    "protocol": "http",
    "name": "Open redirection (DOM-based)",
    "issueType": 5243152,
    "severity": "Low",
    "confidence": "Firm",
    "issueBackground": "DOM-based open redirection vulnerabilities arise when a client-side script within an application's response reads data from a controllable part of the DOM (for example, the URL), and writes this data into the target of a redirection in an unsafe way. An attacker may be able to use the vulnerability to construct a URL which, if visited by another application user, will cause a redirection to an arbitrary external domain. This behavior can be leveraged to facilitate phishing attacks against users of the application. The ability to use an authentic application URL, targeting the correct domain with a valid SSL certificate (if SSL is used) lends credibility to the phishing attack because many users, even if they verify these features, will not notice the subsequent redirection to a different domain.<br><br><b>Note:</b> If an attacker is able to control the start of the string that is passed to the redirection API, then it may be possible to escalate this vulnerability into a JavaScript injection attack, by using a URL with the javascript: pseudo-protocol to execute arbitrary script code when the URL is processed by the browser.",
    "remediationBackground": "Static analysis of code to identify vulnerabilities of this kind may lead to false positives that are not actually exploitable. You should review the highlighted code and related execution paths to determine whether the application is indeed vulnerable, or whether mitigations are in place that would prevent exploitation.<br><br>The most effective way to avoid DOM-based open redirection vulnerabilities is not to dynamically set redirection targets using data that originated from any untrusted source. If the desired functionality of the application means that this behavior is unavoidable, then defenses must be implemented within the client-side code to prevent malicious data from introducing an arbitrary URL as a redirection target. In general, this is best achieved by using a whitelist of URLs that are permitted redirection targets, and strictly validating the target against this list before performing the redirection.",
    "issueDetail": "The application may be vulnerable to DOM-based open redirection. Data is read from <b>document.location.pathname</b> and written to <b>the 'open()' function of an XMLHttpRequest object</b> via the following statements:<ul><li>o||(o=document.location.pathname);</li><li>o= o.substr(0 , u) </li><li>return t&amp;&amp;(h.onloadstart=this.loadstart.bind(this),h.onprogress=this.progress.bind(this)),h.open(s.toUpperCase(),o,this.options.async,this.options.use</li></ul>",
    "requestResponses": [
        {
            "request": {
                "host": "localhost",
                "port": 9999,
                "protocol": "http",
                "url": "http://localhost:9999/sporritt/jsPlumb/external/mootools-core-full-compat-yc-1.4.5.min.js",
                "path": "/sporritt/jsPlumb/external/mootools-core-full-compat-yc-1.4.5.min.js",
                "httpVersion": "HTTP/1.1",
                "method": "GET",
                "headers": {
                    "Host": "localhost:9999"
                },
                "body": "",
                "raw": "R0VUIC9zcG9ycml0dC9qc1BsdW1iL2V4dGVybmFsL21vb3Rvb2xzLWNvcmUtZnVsbC1jb21wYXQteWMtMS40LjUubWluLmpzIEhUVFAvMS4xDQpIb3N0OiBsb2NhbGhvc3Q6OTk5OQ0KDQo=",
                "inScope": true,
                "toolFlag": 16962,
                "referenceID": 0,
                "messageType": "request"
            },
            "response": {
                "statusCode": 200,
                "raw": "SFRUUC8xLjEgMjAwIE9LDQpDb250ZW50LUxlbmd0aDogODk5MTYNCkFjY2VwdC1SYW5nZXM6IGJ5dGVzDQpDb250ZW50LVR5cGU6IGFwcGxpY2F0aW9uL2phdmFzY3JpcHQNCkRhdGU6IEZyaSwgMDcgTm92IDIwMTQgMDc6NDU6MDEgR01UDQpMYXN0LU1vZGlmaWVkOiBGcmksIDA3IE5vdiAyMDE0IDA3OjQ1OjAwIEdNVA0KDQooZnVuY3Rpb24oKXt0aGlzLk1vb1Rvb2xzPXt2ZXJzaW9uOiIxLjQuNSIsYnVpbGQ6ImFiOGVhODgyNGRjM2IyNGI2NjY2ODY3YTJjNGVkNThlYmI3NjJjZjAifTt2YXIgZT10aGlzLnR5cGVPZj1mdW5jdGlvbihlKXtpZihudWxsPT1lKXJldHVybiJudWxsIjtpZihudWxsIT1lLiRmYW1pbHkpcmV0dXJuIGUuJGZhbWlseSgpO2lmKGUubm9kZU5hbWUpe2lmKDE9PWUubm9kZVR5cGUpcmV0dXJuImVsZW1lbnQiO2lmKDM9PWUubm9kZVR5cGUpcmV0dXJuL1xTLy50ZXN0KGUubm9kZVZhbHVlKT8idGV4dG5vZGUiOiJ3aGl0ZXNwYWNlIn1lbHNlIGlmKCJudW1iZXIiPT10eXBlb2YgZS5sZW5ndGgpe2lmKGUuY2FsbGVlKXJldHVybiJhcmd1bWVudHMiO2lmKCJpdGVtImluIGUpcmV0dXJuImNvbGxlY3Rpb24ifXJldHVybiB0eXBlb2YgZX0sdD10aGlzLmluc3RhbmNlT2Y9ZnVuY3Rpb24oZSx0KXtpZihudWxsPT1lKXJldHVybiExO2Zvcih2YXIgaT1lLiRjb25zdHJ1Y3Rvcnx8ZS5jb25zdHJ1Y3RvcjtpOyl7aWYoaT09PXQpcmV0dXJuITA7aT1pLnBhcmVudH1yZXR1cm4gZS5oYXNPd25Qcm9wZXJ0eT9lIGluc3RhbmNlb2YgdDohMX0saT10aGlzLkZ1bmN0aW9uLG49ITA7Zm9yKHZhciByIGlue3RvU3RyaW5nOjF9KW49bnVsbDtuJiYobj1bImhhc093blByb3BlcnR5IiwidmFsdWVPZiIsImlzUHJvdG90eXBlT2YiLCJwcm9wZXJ0eUlzRW51bWVyYWJsZSIsInRvTG9jYWxlU3RyaW5nIiwidG9TdHJpbmciLCJjb25zdHJ1Y3RvciJdKSxpLnByb3RvdHlwZS5vdmVybG9hZFNldHRlcj1mdW5jdGlvbihlKXt2YXIgdD10aGlzO3JldHVybiBmdW5jdGlvbihpLHIpe2lmKG51bGw9PWkpcmV0dXJuIHRoaXM7aWYoZXx8InN0cmluZyIhPXR5cGVvZiBpKXtmb3IodmFyIG8gaW4gaSl0LmNhbGwodGhpcyxvLGlbb10pO2lmKG4pZm9yKHZhciBzPW4ubGVuZ3RoO3MtLTspbz1uW3NdLGkuaGFzT3duUHJvcGVydHkobykmJnQuY2FsbCh0aGlzLG8saVtvXSl9ZWxzZSB0LmNhbGwodGhpcyxpLHIpO3JldHVybiB0aGlzfX0saS5wcm90b3R5cGUub3ZlcmxvYWRHZXR0ZXI9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztyZXR1cm4gZnVuY3Rpb24oaSl7dmFyIG4scjtpZigic3RyaW5nIiE9dHlwZW9mIGk/bj1pOmFyZ3VtZW50cy5sZW5ndGg+MT9uPWFyZ3VtZW50czplJiYobj1baV0pLG4pe3I9e307Zm9yKHZhciBvPTA7bi5sZW5ndGg+bztvKyspcltuW29dXT10LmNhbGwodGhpcyxuW29dKX1lbHNlIHI9dC5jYWxsKHRoaXMsaSk7cmV0dXJuIHJ9fSxpLnByb3RvdHlwZS5leHRlbmQ9ZnVuY3Rpb24oZSx0KXt0aGlzW2VdPXR9Lm92ZXJsb2FkU2V0dGVyKCksaS5wcm90b3R5cGUuaW1wbGVtZW50PWZ1bmN0aW9uKGUsdCl7dGhpcy5wcm90b3R5cGVbZV09dH0ub3ZlcmxvYWRTZXR0ZXIoKTt2YXIgbz1BcnJheS5wcm90b3R5cGUuc2xpY2U7aS5mcm9tPWZ1bmN0aW9uKHQpe3JldHVybiJmdW5jdGlvbiI9PWUodCk/dDpmdW5jdGlvbigpe3JldHVybiB0fX0sQXJyYXkuZnJvbT1mdW5jdGlvbih0KXtyZXR1cm4gbnVsbD09dD9bXTpzLmlzRW51bWVyYWJsZSh0KSYmInN0cmluZyIhPXR5cGVvZiB0PyJhcnJheSI9PWUodCk/dDpvLmNhbGwodCk6W3RdfSxOdW1iZXIuZnJvbT1mdW5jdGlvbihlKXt2YXIgdD1wYXJzZUZsb2F0KGUpO3JldHVybiBpc0Zpbml0ZSh0KT90Om51bGx9LFN0cmluZy5mcm9tPWZ1bmN0aW9uKGUpe3JldHVybiBlKyIifSxpLmltcGxlbWVudCh7aGlkZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLiRoaWRkZW49ITAsdGhpc30scHJvdGVjdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLiRwcm90ZWN0ZWQ9ITAsdGhpc319KTt2YXIgcz10aGlzLlR5cGU9ZnVuY3Rpb24odCxpKXtpZih0KXt2YXIgbj10LnRvTG93ZXJDYXNlKCkscj1mdW5jdGlvbih0KXtyZXR1cm4gZSh0KT09bn07c1siaXMiK3RdPXIsbnVsbCE9aSYmKGkucHJvdG90eXBlLiRmYW1pbHk9ZnVuY3Rpb24oKXtyZXR1cm4gbn0uaGlkZSgpLGkudHlwZT1yKX1yZXR1cm4gbnVsbD09aT9udWxsOihpLmV4dGVuZCh0aGlzKSxpLiRjb25zdHJ1Y3Rvcj1zLGkucHJvdG90eXBlLiRjb25zdHJ1Y3Rvcj1pLGkpfSxhPU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7cy5pc0VudW1lcmFibGU9ZnVuY3Rpb24oZSl7cmV0dXJuIG51bGwhPWUmJiJudW1iZXIiPT10eXBlb2YgZS5sZW5ndGgmJiJbb2JqZWN0IEZ1bmN0aW9uXSIhPWEuY2FsbChlKX07dmFyIGw9e30sYz1mdW5jdGlvbih0KXt2YXIgaT1lKHQucHJvdG90eXBlKTtyZXR1cm4gbFtpXXx8KGxbaV09W10pfSx1PWZ1bmN0aW9uKHQsaSl7aWYoIWl8fCFpLiRoaWRkZW4pe2Zvcih2YXIgbj1jKHRoaXMpLHI9MDtuLmxlbmd0aD5yO3IrKyl7dmFyIHM9bltyXTsidHlwZSI9PWUocyk/dS5jYWxsKHMsdCxpKTpzLmNhbGwodGhpcyx0LGkpfXZhciBhPXRoaXMucHJvdG90eXBlW3RdO251bGwhPWEmJmEuJHByb3RlY3RlZHx8KHRoaXMucHJvdG90eXBlW3RdPWkpLG51bGw9PXRoaXNbdF0mJiJmdW5jdGlvbiI9PWUoaSkmJmguY2FsbCh0aGlzLHQsZnVuY3Rpb24oZSl7cmV0dXJuIGkuYXBwbHkoZSxvLmNhbGwoYXJndW1lbnRzLDEpKX0pfX0saD1mdW5jdGlvbihlLHQpe2lmKCF0fHwhdC4kaGlkZGVuKXt2YXIgaT10aGlzW2VdO251bGwhPWkmJmkuJHByb3RlY3RlZHx8KHRoaXNbZV09dCl9fTtzLmltcGxlbWVudCh7aW1wbGVtZW50OnUub3ZlcmxvYWRTZXR0ZXIoKSxleHRlbmQ6aC5vdmVybG9hZFNldHRlcigpLGFsaWFzOmZ1bmN0aW9uKGUsdCl7dS5jYWxsKHRoaXMsZSx0aGlzLnByb3RvdHlwZVt0XSl9Lm92ZXJsb2FkU2V0dGVyKCksbWlycm9yOmZ1bmN0aW9uKGUpe3JldHVybiBjKHRoaXMpLnB1c2goZSksdGhpc319KSxuZXcgcygiVHlwZSIscyk7dmFyIGQ9ZnVuY3Rpb24oZSx0LGkpe3ZhciBuPXQhPU9iamVjdCxyPXQucHJvdG90eXBlO24mJih0PW5ldyBzKGUsdCkpO2Zvcih2YXIgbz0wLGE9aS5sZW5ndGg7YT5vO28rKyl7dmFyIGw9aVtvXSxjPXRbbF0sdT1yW2xdO2MmJmMucHJvdGVjdCgpLG4mJnUmJnQuaW1wbGVtZW50KGwsdS5wcm90ZWN0KCkpfWlmKG4pe3ZhciBoPXIucHJvcGVydHlJc0VudW1lcmFibGUoaVswXSk7dC5mb3JFYWNoTWV0aG9kPWZ1bmN0aW9uKGUpe2lmKCFoKWZvcih2YXIgdD0wLG49aS5sZW5ndGg7bj50O3QrKyllLmNhbGwocixyW2lbdF1dLGlbdF0pO2Zvcih2YXIgbyBpbiByKWUuY2FsbChyLHJbb10sbyl9fXJldHVybiBkfTtkKCJTdHJpbmciLFN0cmluZyxbImNoYXJBdCIsImNoYXJDb2RlQXQiLCJjb25jYXQiLCJpbmRleE9mIiwibGFzdEluZGV4T2YiLCJtYXRjaCIsInF1b3RlIiwicmVwbGFjZSIsInNlYXJjaCIsInNsaWNlIiwic3BsaXQiLCJzdWJzdHIiLCJzdWJzdHJpbmciLCJ0cmltIiwidG9Mb3dlckNhc2UiLCJ0b1VwcGVyQ2FzZSJdKSgiQXJyYXkiLEFycmF5LFsicG9wIiwicHVzaCIsInJldmVyc2UiLCJzaGlmdCIsInNvcnQiLCJzcGxpY2UiLCJ1bnNoaWZ0IiwiY29uY2F0Iiwiam9pbiIsInNsaWNlIiwiaW5kZXhPZiIsImxhc3RJbmRleE9mIiwiZmlsdGVyIiwiZm9yRWFjaCIsImV2ZXJ5IiwibWFwIiwic29tZSIsInJlZHVjZSIsInJlZHVjZVJpZ2h0Il0pKCJOdW1iZXIiLE51bWJlcixbInRvRXhwb25lbnRpYWwiLCJ0b0ZpeGVkIiwidG9Mb2NhbGVTdHJpbmciLCJ0b1ByZWNpc2lvbiJdKSgiRnVuY3Rpb24iLGksWyJhcHBseSIsImNhbGwiLCJiaW5kIl0pKCJSZWdFeHAiLFJlZ0V4cCxbImV4ZWMiLCJ0ZXN0Il0pKCJPYmplY3QiLE9iamVjdCxbImNyZWF0ZSIsImRlZmluZVByb3BlcnR5IiwiZGVmaW5lUHJvcGVydGllcyIsImtleXMiLCJnZXRQcm90b3R5cGVPZiIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsImdldE93blByb3BlcnR5TmFtZXMiLCJwcmV2ZW50RXh0ZW5zaW9ucyIsImlzRXh0ZW5zaWJsZSIsInNlYWwiLCJpc1NlYWxlZCIsImZyZWV6ZSIsImlzRnJvemVuIl0pKCJEYXRlIixEYXRlLFsibm93Il0pLE9iamVjdC5leHRlbmQ9aC5vdmVybG9hZFNldHRlcigpLERhdGUuZXh0ZW5kKCJub3ciLGZ1bmN0aW9uKCl7cmV0dXJuK25ldyBEYXRlfSksbmV3IHMoIkJvb2xlYW4iLEJvb2xlYW4pLE51bWJlci5wcm90b3R5cGUuJGZhbWlseT1mdW5jdGlvbigpe3JldHVybiBpc0Zpbml0ZSh0aGlzKT8ibnVtYmVyIjoibnVsbCJ9LmhpZGUoKSxOdW1iZXIuZXh0ZW5kKCJyYW5kb20iLGZ1bmN0aW9uKGUsdCl7cmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSoodC1lKzEpK2UpfSk7dmFyIHA9T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtPYmplY3QuZXh0ZW5kKCJmb3JFYWNoIixmdW5jdGlvbihlLHQsaSl7Zm9yKHZhciBuIGluIGUpcC5jYWxsKGUsbikmJnQuY2FsbChpLGVbbl0sbixlKX0pLE9iamVjdC5lYWNoPU9iamVjdC5mb3JFYWNoLEFycmF5LmltcGxlbWVudCh7Zm9yRWFjaDpmdW5jdGlvbihlLHQpe2Zvcih2YXIgaT0wLG49dGhpcy5sZW5ndGg7bj5pO2krKylpIGluIHRoaXMmJmUuY2FsbCh0LHRoaXNbaV0saSx0aGlzKX0sZWFjaDpmdW5jdGlvbihlLHQpe3JldHVybiBBcnJheS5mb3JFYWNoKHRoaXMsZSx0KSx0aGlzfX0pO3ZhciBmPWZ1bmN0aW9uKHQpe3N3aXRjaChlKHQpKXtjYXNlImFycmF5IjpyZXR1cm4gdC5jbG9uZSgpO2Nhc2Uib2JqZWN0IjpyZXR1cm4gT2JqZWN0LmNsb25lKHQpO2RlZmF1bHQ6cmV0dXJuIHR9fTtBcnJheS5pbXBsZW1lbnQoImNsb25lIixmdW5jdGlvbigpe2Zvcih2YXIgZT10aGlzLmxlbmd0aCx0PUFycmF5KGUpO2UtLTspdFtlXT1mKHRoaXNbZV0pO3JldHVybiB0fSk7dmFyIG09ZnVuY3Rpb24odCxpLG4pe3N3aXRjaChlKG4pKXtjYXNlIm9iamVjdCI6Im9iamVjdCI9PWUodFtpXSk/T2JqZWN0Lm1lcmdlKHRbaV0sbik6dFtpXT1PYmplY3QuY2xvbmUobik7YnJlYWs7Y2FzZSJhcnJheSI6dFtpXT1uLmNsb25lKCk7YnJlYWs7ZGVmYXVsdDp0W2ldPW59cmV0dXJuIHR9O09iamVjdC5leHRlbmQoe21lcmdlOmZ1bmN0aW9uKHQsaSxuKXtpZigic3RyaW5nIj09ZShpKSlyZXR1cm4gbSh0LGksbik7Zm9yKHZhciByPTEsbz1hcmd1bWVudHMubGVuZ3RoO28+cjtyKyspe3ZhciBzPWFyZ3VtZW50c1tyXTtmb3IodmFyIGEgaW4gcyltKHQsYSxzW2FdKX1yZXR1cm4gdH0sY2xvbmU6ZnVuY3Rpb24oZSl7dmFyIHQ9e307Zm9yKHZhciBpIGluIGUpdFtpXT1mKGVbaV0pO3JldHVybiB0fSxhcHBlbmQ6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PTEsaT1hcmd1bWVudHMubGVuZ3RoO2k+dDt0Kyspe3ZhciBuPWFyZ3VtZW50c1t0XXx8e307Zm9yKHZhciByIGluIG4pZVtyXT1uW3JdfXJldHVybiBlfX0pLFsiT2JqZWN0IiwiV2hpdGVTcGFjZSIsIlRleHROb2RlIiwiQ29sbGVjdGlvbiIsIkFyZ3VtZW50cyJdLmVhY2goZnVuY3Rpb24oZSl7bmV3IHMoZSl9KTt2YXIgZz1EYXRlLm5vdygpO1N0cmluZy5leHRlbmQoInVuaXF1ZUlEIixmdW5jdGlvbigpe3JldHVybihnKyspLnRvU3RyaW5nKDM2KX0pO3ZhciB2PXRoaXMuSGFzaD1uZXcgcygiSGFzaCIsZnVuY3Rpb24odCl7Imhhc2giPT1lKHQpJiYodD1PYmplY3QuY2xvbmUodC5nZXRDbGVhbigpKSk7Zm9yKHZhciBpIGluIHQpdGhpc1tpXT10W2ldO3JldHVybiB0aGlzfSk7di5pbXBsZW1lbnQoe2ZvckVhY2g6ZnVuY3Rpb24oZSx0KXtPYmplY3QuZm9yRWFjaCh0aGlzLGUsdCl9LGdldENsZWFuOmZ1bmN0aW9uKCl7dmFyIGU9e307Zm9yKHZhciB0IGluIHRoaXMpdGhpcy5oYXNPd25Qcm9wZXJ0eSh0KSYmKGVbdF09dGhpc1t0XSk7cmV0dXJuIGV9LGdldExlbmd0aDpmdW5jdGlvbigpe3ZhciBlPTA7Zm9yKHZhciB0IGluIHRoaXMpdGhpcy5oYXNPd25Qcm9wZXJ0eSh0KSYmZSsrO3JldHVybiBlfX0pLHYuYWxpYXMoImVhY2giLCJmb3JFYWNoIiksT2JqZWN0LnR5cGU9cy5pc09iamVjdDt2YXIgYj10aGlzLk5hdGl2ZT1mdW5jdGlvbihlKXtyZXR1cm4gbmV3IHMoZS5uYW1lLGUuaW5pdGlhbGl6ZSl9O2IudHlwZT1zLnR5cGUsYi5pbXBsZW1lbnQ9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIGk9MDtlLmxlbmd0aD5pO2krKyllW2ldLmltcGxlbWVudCh0KTtyZXR1cm4gYn07dmFyIHk9QXJyYXkudHlwZTtBcnJheS50eXBlPWZ1bmN0aW9uKGUpe3JldHVybiB0KGUsQXJyYXkpfHx5KGUpfSx0aGlzLiRBPWZ1bmN0aW9uKGUpe3JldHVybiBBcnJheS5mcm9tKGUpLnNsaWNlKCl9LHRoaXMuJGFyZ3VtZW50cz1mdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gYXJndW1lbnRzW2VdfX0sdGhpcy4kY2hrPWZ1bmN0aW9uKGUpe3JldHVybiEoIWUmJjAhPT1lKX0sdGhpcy4kY2xlYXI9ZnVuY3Rpb24oZSl7cmV0dXJuIGNsZWFyVGltZW91dChlKSxjbGVhckludGVydmFsKGUpLG51bGx9LHRoaXMuJGRlZmluZWQ9ZnVuY3Rpb24oZSl7cmV0dXJuIG51bGwhPWV9LHRoaXMuJGVhY2g9ZnVuY3Rpb24odCxpLG4pe3ZhciByPWUodCk7KCJhcmd1bWVudHMiPT1yfHwiY29sbGVjdGlvbiI9PXJ8fCJhcnJheSI9PXJ8fCJlbGVtZW50cyI9PXI/QXJyYXk6T2JqZWN0KS5lYWNoKHQsaSxuKX0sdGhpcy4kZW1wdHk9ZnVuY3Rpb24oKXt9LHRoaXMuJGV4dGVuZD1mdW5jdGlvbihlLHQpe3JldHVybiBPYmplY3QuYXBwZW5kKGUsdCl9LHRoaXMuJEg9ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyB2KGUpfSx0aGlzLiRtZXJnZT1mdW5jdGlvbigpe3ZhciBlPUFycmF5LnNsaWNlKGFyZ3VtZW50cyk7cmV0dXJuIGUudW5zaGlmdCh7fSksT2JqZWN0Lm1lcmdlLmFwcGx5KG51bGwsZSl9LHRoaXMuJGxhbWJkYT1pLmZyb20sdGhpcy4kbWl4aW49T2JqZWN0Lm1lcmdlLHRoaXMuJHJhbmRvbT1OdW1iZXIucmFuZG9tLHRoaXMuJHNwbGF0PUFycmF5LmZyb20sdGhpcy4kdGltZT1EYXRlLm5vdyx0aGlzLiR0eXBlPWZ1bmN0aW9uKHQpe3ZhciBpPWUodCk7cmV0dXJuImVsZW1lbnRzIj09aT8iYXJyYXkiOiJudWxsIj09aT8hMTppfSx0aGlzLiR1bmxpbms9ZnVuY3Rpb24odCl7c3dpdGNoKGUodCkpe2Nhc2Uib2JqZWN0IjpyZXR1cm4gT2JqZWN0LmNsb25lKHQpO2Nhc2UiYXJyYXkiOnJldHVybiBBcnJheS5jbG9uZSh0KTtjYXNlImhhc2giOnJldHVybiBuZXcgdih0KTtkZWZhdWx0OnJldHVybiB0fX19KSgpLEFycmF5LmltcGxlbWVudCh7ZXZlcnk6ZnVuY3Rpb24oZSx0KXtmb3IodmFyIGk9MCxuPXRoaXMubGVuZ3RoPj4+MDtuPmk7aSsrKWlmKGkgaW4gdGhpcyYmIWUuY2FsbCh0LHRoaXNbaV0saSx0aGlzKSlyZXR1cm4hMTtyZXR1cm4hMH0sZmlsdGVyOmZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBpLG49W10scj0wLG89dGhpcy5sZW5ndGg+Pj4wO28+cjtyKyspciBpbiB0aGlzJiYoaT10aGlzW3JdLGUuY2FsbCh0LGkscix0aGlzKSYmbi5wdXNoKGkpKTtyZXR1cm4gbn0saW5kZXhPZjpmdW5jdGlvbihlLHQpe2Zvcih2YXIgaT10aGlzLmxlbmd0aD4+PjAsbj0wPnQ/TWF0aC5tYXgoMCxpK3QpOnR8fDA7aT5uO24rKylpZih0aGlzW25dPT09ZSlyZXR1cm4gbjtyZXR1cm4tMX0sbWFwOmZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBpPXRoaXMubGVuZ3RoPj4+MCxuPUFycmF5KGkpLHI9MDtpPnI7cisrKXIgaW4gdGhpcyYmKG5bcl09ZS5jYWxsKHQsdGhpc1tyXSxyLHRoaXMpKTtyZXR1cm4gbn0sc29tZTpmdW5jdGlvbihlLHQpe2Zvcih2YXIgaT0wLG49dGhpcy5sZW5ndGg+Pj4wO24+aTtpKyspaWYoaSBpbiB0aGlzJiZlLmNhbGwodCx0aGlzW2ldLGksdGhpcykpcmV0dXJuITA7cmV0dXJuITF9LGNsZWFuOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiBudWxsIT1lfSl9LGludm9rZTpmdW5jdGlvbihlKXt2YXIgdD1BcnJheS5zbGljZShhcmd1bWVudHMsMSk7cmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uKGkpe3JldHVybiBpW2VdLmFwcGx5KGksdCl9KX0sYXNzb2NpYXRlOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD17fSxpPU1hdGgubWluKHRoaXMubGVuZ3RoLGUubGVuZ3RoKSxuPTA7aT5uO24rKyl0W2Vbbl1dPXRoaXNbbl07cmV0dXJuIHR9LGxpbms6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PXt9LGk9MCxuPXRoaXMubGVuZ3RoO24+aTtpKyspZm9yKHZhciByIGluIGUpaWYoZVtyXSh0aGlzW2ldKSl7dFtyXT10aGlzW2ldLGRlbGV0ZSBlW3JdO2JyZWFrfXJldHVybiB0fSxjb250YWluczpmdW5jdGlvbihlLHQpe3JldHVybi0xIT10aGlzLmluZGV4T2YoZSx0KX0sYXBwZW5kOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnB1c2guYXBwbHkodGhpcyxlKSx0aGlzfSxnZXRMYXN0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubGVuZ3RoP3RoaXNbdGhpcy5sZW5ndGgtMV06bnVsbH0sZ2V0UmFuZG9tOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubGVuZ3RoP3RoaXNbTnVtYmVyLnJhbmRvbSgwLHRoaXMubGVuZ3RoLTEpXTpudWxsfSxpbmNsdWRlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmNvbnRhaW5zKGUpfHx0aGlzLnB1c2goZSksdGhpc30sY29tYmluZTpmdW5jdGlvbihlKXtmb3IodmFyIHQ9MCxpPWUubGVuZ3RoO2k+dDt0KyspdGhpcy5pbmNsdWRlKGVbdF0pO3JldHVybiB0aGlzfSxlcmFzZTpmdW5jdGlvbihlKXtmb3IodmFyIHQ9dGhpcy5sZW5ndGg7dC0tOyl0aGlzW3RdPT09ZSYmdGhpcy5zcGxpY2UodCwxKTtyZXR1cm4gdGhpc30sZW1wdHk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sZW5ndGg9MCx0aGlzfSxmbGF0dGVuOmZ1bmN0aW9uKCl7Zm9yKHZhciBlPVtdLHQ9MCxpPXRoaXMubGVuZ3RoO2k+dDt0Kyspe3ZhciBuPXR5cGVPZih0aGlzW3RdKTsibnVsbCIhPW4mJihlPWUuY29uY2F0KCJhcnJheSI9PW58fCJjb2xsZWN0aW9uIj09bnx8ImFyZ3VtZW50cyI9PW58fGluc3RhbmNlT2YodGhpc1t0XSxBcnJheSk/QXJyYXkuZmxhdHRlbih0aGlzW3RdKTp0aGlzW3RdKSl9cmV0dXJuIGV9LHBpY2s6ZnVuY3Rpb24oKXtmb3IodmFyIGU9MCx0PXRoaXMubGVuZ3RoO3Q+ZTtlKyspaWYobnVsbCE9dGhpc1tlXSlyZXR1cm4gdGhpc1tlXTtyZXR1cm4gbnVsbH0saGV4VG9SZ2I6ZnVuY3Rpb24oZSl7aWYoMyE9dGhpcy5sZW5ndGgpcmV0dXJuIG51bGw7dmFyIHQ9dGhpcy5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIDE9PWUubGVuZ3RoJiYoZSs9ZSksZS50b0ludCgxNil9KTtyZXR1cm4gZT90OiJyZ2IoIit0KyIpIn0scmdiVG9IZXg6ZnVuY3Rpb24oZSl7aWYoMz50aGlzLmxlbmd0aClyZXR1cm4gbnVsbDtpZig0PT10aGlzLmxlbmd0aCYmMD09dGhpc1szXSYmIWUpcmV0dXJuInRyYW5zcGFyZW50Ijtmb3IodmFyIHQ9W10saT0wOzM+aTtpKyspe3ZhciBuPSh0aGlzW2ldLTApLnRvU3RyaW5nKDE2KTt0LnB1c2goMT09bi5sZW5ndGg/IjAiK246bil9cmV0dXJuIGU/dDoiIyIrdC5qb2luKCIiKX19KSxBcnJheS5hbGlhcygiZXh0ZW5kIiwiYXBwZW5kIik7dmFyICRwaWNrPWZ1bmN0aW9uKCl7cmV0dXJuIEFycmF5LmZyb20oYXJndW1lbnRzKS5waWNrKCl9O1N0cmluZy5pbXBsZW1lbnQoe3Rlc3Q6ZnVuY3Rpb24oZSx0KXtyZXR1cm4oInJlZ2V4cCI9PXR5cGVPZihlKT9lOlJlZ0V4cCgiIitlLHQpKS50ZXN0KHRoaXMpfSxjb250YWluczpmdW5jdGlvbihlLHQpe3JldHVybiB0Pyh0K3RoaXMrdCkuaW5kZXhPZih0K2UrdCk+LTE6KHRoaXMrIiIpLmluZGV4T2YoZSk+LTF9LHRyaW06ZnVuY3Rpb24oKXtyZXR1cm4odGhpcysiIikucmVwbGFjZSgvXlxzK3xccyskL2csIiIpfSxjbGVhbjpmdW5jdGlvbigpe3JldHVybih0aGlzKyIiKS5yZXBsYWNlKC9ccysvZywiICIpLnRyaW0oKX0sY2FtZWxDYXNlOmZ1bmN0aW9uKCl7cmV0dXJuKHRoaXMrIiIpLnJlcGxhY2UoLy1cRC9nLGZ1bmN0aW9uKGUpe3JldHVybiBlLmNoYXJBdCgxKS50b1VwcGVyQ2FzZSgpfSl9LGh5cGhlbmF0ZTpmdW5jdGlvbigpe3JldHVybih0aGlzKyIiKS5yZXBsYWNlKC9bQS1aXS9nLGZ1bmN0aW9uKGUpe3JldHVybiItIitlLmNoYXJBdCgwKS50b0xvd2VyQ2FzZSgpfSl9LGNhcGl0YWxpemU6ZnVuY3Rpb24oKXtyZXR1cm4odGhpcysiIikucmVwbGFjZSgvXGJbYS16XS9nLGZ1bmN0aW9uKGUpe3JldHVybiBlLnRvVXBwZXJDYXNlKCl9KX0sZXNjYXBlUmVnRXhwOmZ1bmN0aW9uKCl7cmV0dXJuKHRoaXMrIiIpLnJlcGxhY2UoLyhbLS4qKz9eJHt9KCl8W1xdXC9cXF0pL2csIlxcJDEiKX0sdG9JbnQ6ZnVuY3Rpb24oZSl7cmV0dXJuIHBhcnNlSW50KHRoaXMsZXx8MTApfSx0b0Zsb2F0OmZ1bmN0aW9uKCl7cmV0dXJuIHBhcnNlRmxvYXQodGhpcyl9LGhleFRvUmdiOmZ1bmN0aW9uKGUpe3ZhciB0PSh0aGlzKyIiKS5tYXRjaCgvXiM/KFx3ezEsMn0pKFx3ezEsMn0pKFx3ezEsMn0pJC8pO3JldHVybiB0P3Quc2xpY2UoMSkuaGV4VG9SZ2IoZSk6bnVsbH0scmdiVG9IZXg6ZnVuY3Rpb24oZSl7dmFyIHQ9KHRoaXMrIiIpLm1hdGNoKC9cZHsxLDN9L2cpO3JldHVybiB0P3QucmdiVG9IZXgoZSk6bnVsbH0sc3Vic3RpdHV0ZTpmdW5jdGlvbihlLHQpe3JldHVybih0aGlzKyIiKS5yZXBsYWNlKHR8fC9cXD9ceyhbXnt9XSspXH0vZyxmdW5jdGlvbih0LGkpe3JldHVybiJcXCI9PXQuY2hhckF0KDApP3Quc2xpY2UoMSk6bnVsbCE9ZVtpXT9lW2ldOiIifSl9fSksTnVtYmVyLmltcGxlbWVudCh7bGltaXQ6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gTWF0aC5taW4odCxNYXRoLm1heChlLHRoaXMpKX0scm91bmQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGU9TWF0aC5wb3coMTAsZXx8MCkudG9GaXhlZCgwPmU/LWU6MCksTWF0aC5yb3VuZCh0aGlzKmUpL2V9LHRpbWVzOmZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBpPTA7dGhpcz5pO2krKyllLmNhbGwodCxpLHRoaXMpfSx0b0Zsb2F0OmZ1bmN0aW9uKCl7cmV0dXJuIHBhcnNlRmxvYXQodGhpcyl9LHRvSW50OmZ1bmN0aW9uKGUpe3JldHVybiBwYXJzZUludCh0aGlzLGV8fDEwKX19KSxOdW1iZXIuYWxpYXMoImVhY2giLCJ0aW1lcyIpLGZ1bmN0aW9uKGUpe3ZhciB0PXt9O2UuZWFjaChmdW5jdGlvbihlKXtOdW1iZXJbZV18fCh0W2VdPWZ1bmN0aW9uKCl7cmV0dXJuIE1hdGhbZV0uYXBwbHkobnVsbCxbdGhpc10uY29uY2F0KEFycmF5LmZyb20oYXJndW1lbnRzKSkpfSl9KSxOdW1iZXIuaW1wbGVtZW50KHQpfShbImFicyIsImFjb3MiLCJhc2luIiwiYXRhbiIsImF0YW4yIiwiY2VpbCIsImNvcyIsImV4cCIsImZsb29yIiwibG9nIiwibWF4IiwibWluIiwicG93Iiwic2luIiwic3FydCIsInRhbiJdKSxGdW5jdGlvbi5leHRlbmQoe2F0dGVtcHQ6ZnVuY3Rpb24oKXtmb3IodmFyIGU9MCx0PWFyZ3VtZW50cy5sZW5ndGg7dD5lO2UrKyl0cnl7cmV0dXJuIGFyZ3VtZW50c1tlXSgpfWNhdGNoKGkpe31yZXR1cm4gbnVsbH19KSxGdW5jdGlvbi5pbXBsZW1lbnQoe2F0dGVtcHQ6ZnVuY3Rpb24oZSx0KXt0cnl7cmV0dXJuIHRoaXMuYXBwbHkodCxBcnJheS5mcm9tKGUpKX1jYXRjaChpKXt9cmV0dXJuIG51bGx9LGJpbmQ6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxpPWFyZ3VtZW50cy5sZW5ndGg+MT9BcnJheS5zbGljZShhcmd1bWVudHMsMSk6bnVsbCxuPWZ1bmN0aW9uKCl7fSxyPWZ1bmN0aW9uKCl7dmFyIG89ZSxzPWFyZ3VtZW50cy5sZW5ndGg7dGhpcyBpbnN0YW5jZW9mIHImJihuLnByb3RvdHlwZT10LnByb3RvdHlwZSxvPW5ldyBuKTt2YXIgYT1pfHxzP3QuYXBwbHkobyxpJiZzP2kuY29uY2F0KEFycmF5LnNsaWNlKGFyZ3VtZW50cykpOml8fGFyZ3VtZW50cyk6dC5jYWxsKG8pO3JldHVybiBvPT1lP2E6b307cmV0dXJuIHJ9LHBhc3M6ZnVuY3Rpb24oZSx0KXt2YXIgaT10aGlzO3JldHVybiBudWxsIT1lJiYoZT1BcnJheS5mcm9tKGUpKSxmdW5jdGlvbigpe3JldHVybiBpLmFwcGx5KHQsZXx8YXJndW1lbnRzKX19LGRlbGF5OmZ1bmN0aW9uKGUsdCxpKXtyZXR1cm4gc2V0VGltZW91dCh0aGlzLnBhc3MobnVsbD09aT9bXTppLHQpLGUpfSxwZXJpb2RpY2FsOmZ1bmN0aW9uKGUsdCxpKXtyZXR1cm4gc2V0SW50ZXJ2YWwodGhpcy5wYXNzKG51bGw9PWk/W106aSx0KSxlKX19KSxkZWxldGUgRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQsRnVuY3Rpb24uaW1wbGVtZW50KHtjcmVhdGU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztyZXR1cm4gZT1lfHx7fSxmdW5jdGlvbihpKXt2YXIgbj1lLmFyZ3VtZW50cztuPW51bGwhPW4/QXJyYXkuZnJvbShuKTpBcnJheS5zbGljZShhcmd1bWVudHMsZS5ldmVudD8xOjApLGUuZXZlbnQmJihuPVtpfHx3aW5kb3cuZXZlbnRdLmV4dGVuZChuKSk7dmFyIHI9ZnVuY3Rpb24oKXtyZXR1cm4gdC5hcHBseShlLmJpbmR8fG51bGwsbil9O3JldHVybiBlLmRlbGF5P3NldFRpbWVvdXQocixlLmRlbGF5KTplLnBlcmlvZGljYWw/c2V0SW50ZXJ2YWwocixlLnBlcmlvZGljYWwpOmUuYXR0ZW1wdD9GdW5jdGlvbi5hdHRlbXB0KHIpOnIoKX19LGJpbmQ6ZnVuY3Rpb24oZSx0KXt2YXIgaT10aGlzO3JldHVybiBudWxsIT10JiYodD1BcnJheS5mcm9tKHQpKSxmdW5jdGlvbigpe3JldHVybiBpLmFwcGx5KGUsdHx8YXJndW1lbnRzKX19LGJpbmRXaXRoRXZlbnQ6ZnVuY3Rpb24oZSx0KXt2YXIgaT10aGlzO3JldHVybiBudWxsIT10JiYodD1BcnJheS5mcm9tKHQpKSxmdW5jdGlvbihuKXtyZXR1cm4gaS5hcHBseShlLG51bGw9PXQ/YXJndW1lbnRzOltuXS5jb25jYXQodCkpfX0scnVuOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuYXBwbHkodCxBcnJheS5mcm9tKGUpKX19KSxPYmplY3QuY3JlYXRlPT1GdW5jdGlvbi5wcm90b3R5cGUuY3JlYXRlJiYoT2JqZWN0LmNyZWF0ZT1udWxsKTt2YXIgJHRyeT1GdW5jdGlvbi5hdHRlbXB0OyhmdW5jdGlvbigpe3ZhciBlPU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7T2JqZWN0LmV4dGVuZCh7c3Vic2V0OmZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBpPXt9LG49MCxyPXQubGVuZ3RoO3I+bjtuKyspe3ZhciBvPXRbbl07byBpbiBlJiYoaVtvXT1lW29dKX1yZXR1cm4gaX0sbWFwOmZ1bmN0aW9uKHQsaSxuKXt2YXIgcj17fTtmb3IodmFyIG8gaW4gdCllLmNhbGwodCxvKSYmKHJbb109aS5jYWxsKG4sdFtvXSxvLHQpKTtyZXR1cm4gcn0sZmlsdGVyOmZ1bmN0aW9uKHQsaSxuKXt2YXIgcj17fTtmb3IodmFyIG8gaW4gdCl7dmFyIHM9dFtvXTtlLmNhbGwodCxvKSYmaS5jYWxsKG4scyxvLHQpJiYocltvXT1zKX1yZXR1cm4gcn0sZXZlcnk6ZnVuY3Rpb24odCxpLG4pe2Zvcih2YXIgciBpbiB0KWlmKGUuY2FsbCh0LHIpJiYhaS5jYWxsKG4sdFtyXSxyKSlyZXR1cm4hMTtyZXR1cm4hMH0sc29tZTpmdW5jdGlvbih0LGksbil7Zm9yKHZhciByIGluIHQpaWYoZS5jYWxsKHQscikmJmkuY2FsbChuLHRbcl0scikpcmV0dXJuITA7cmV0dXJuITF9LGtleXM6ZnVuY3Rpb24odCl7dmFyIGk9W107Zm9yKHZhciBuIGluIHQpZS5jYWxsKHQsbikmJmkucHVzaChuKTtyZXR1cm4gaX0sdmFsdWVzOmZ1bmN0aW9uKHQpe3ZhciBpPVtdO2Zvcih2YXIgbiBpbiB0KWUuY2FsbCh0LG4pJiZpLnB1c2godFtuXSk7cmV0dXJuIGl9LGdldExlbmd0aDpmdW5jdGlvbihlKXtyZXR1cm4gT2JqZWN0LmtleXMoZSkubGVuZ3RofSxrZXlPZjpmdW5jdGlvbih0LGkpe2Zvcih2YXIgbiBpbiB0KWlmKGUuY2FsbCh0LG4pJiZ0W25dPT09aSlyZXR1cm4gbjtyZXR1cm4gbnVsbH0sY29udGFpbnM6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gbnVsbCE9T2JqZWN0LmtleU9mKGUsdCl9LHRvUXVlcnlTdHJpbmc6ZnVuY3Rpb24oZSx0KXt2YXIgaT1bXTtyZXR1cm4gT2JqZWN0LmVhY2goZSxmdW5jdGlvbihlLG4pe3QmJihuPXQrIlsiK24rIl0iKTt2YXIgcjtzd2l0Y2godHlwZU9mKGUpKXtjYXNlIm9iamVjdCI6cj1PYmplY3QudG9RdWVyeVN0cmluZyhlLG4pO2JyZWFrO2Nhc2UiYXJyYXkiOnZhciBvPXt9O2UuZWFjaChmdW5jdGlvbihlLHQpe29bdF09ZX0pLHI9T2JqZWN0LnRvUXVlcnlTdHJpbmcobyxuKTticmVhaztkZWZhdWx0OnI9bisiPSIrZW5jb2RlVVJJQ29tcG9uZW50KGUpfW51bGwhPWUmJmkucHVzaChyKX0pLGkuam9pbigiJiIpfX0pfSkoKSxIYXNoLmltcGxlbWVudCh7aGFzOk9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHksa2V5T2Y6ZnVuY3Rpb24oZSl7cmV0dXJuIE9iamVjdC5rZXlPZih0aGlzLGUpfSxoYXNWYWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gT2JqZWN0LmNvbnRhaW5zKHRoaXMsZSl9LGV4dGVuZDpmdW5jdGlvbihlKXtyZXR1cm4gSGFzaC5lYWNoKGV8fHt9LGZ1bmN0aW9uKGUsdCl7SGFzaC5zZXQodGhpcyx0LGUpfSx0aGlzKSx0aGlzfSxjb21iaW5lOmZ1bmN0aW9uKGUpe3JldHVybiBIYXNoLmVhY2goZXx8e30sZnVuY3Rpb24oZSx0KXtIYXNoLmluY2x1ZGUodGhpcyx0LGUpfSx0aGlzKSx0aGlzfSxlcmFzZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5oYXNPd25Qcm9wZXJ0eShlKSYmZGVsZXRlIHRoaXNbZV0sdGhpc30sZ2V0OmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmhhc093blByb3BlcnR5KGUpP3RoaXNbZV06bnVsbH0sc2V0OmZ1bmN0aW9uKGUsdCl7cmV0dXJuKCF0aGlzW2VdfHx0aGlzLmhhc093blByb3BlcnR5KGUpKSYmKHRoaXNbZV09dCksdGhpc30sZW1wdHk6ZnVuY3Rpb24oKXtyZXR1cm4gSGFzaC5lYWNoKHRoaXMsZnVuY3Rpb24oZSx0KXtkZWxldGUgdGhpc1t0XX0sdGhpcyksdGhpc30saW5jbHVkZTpmdW5jdGlvbihlLHQpe3JldHVybiBudWxsPT10aGlzW2VdJiYodGhpc1tlXT10KSx0aGlzfSxtYXA6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gbmV3IEhhc2goT2JqZWN0Lm1hcCh0aGlzLGUsdCkpfSxmaWx0ZXI6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gbmV3IEhhc2goT2JqZWN0LmZpbHRlcih0aGlzLGUsdCkpfSxldmVyeTpmdW5jdGlvbihlLHQpe3JldHVybiBPYmplY3QuZXZlcnkodGhpcyxlLHQpfSxzb21lOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIE9iamVjdC5zb21lKHRoaXMsZSx0KX0sZ2V0S2V5czpmdW5jdGlvbigpe3JldHVybiBPYmplY3Qua2V5cyh0aGlzKX0sZ2V0VmFsdWVzOmZ1bmN0aW9uKCl7cmV0dXJuIE9iamVjdC52YWx1ZXModGhpcyl9LHRvUXVlcnlTdHJpbmc6ZnVuY3Rpb24oZSl7cmV0dXJuIE9iamVjdC50b1F1ZXJ5U3RyaW5nKHRoaXMsZSl9fSksSGFzaC5leHRlbmQ9T2JqZWN0LmFwcGVuZCxIYXNoLmFsaWFzKHtpbmRleE9mOiJrZXlPZiIsY29udGFpbnM6Imhhc1ZhbHVlIn0pLGZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5kb2N1bWVudCx0PWUud2luZG93PXRoaXMsaT1uYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCksbj1uYXZpZ2F0b3IucGxhdGZvcm0udG9Mb3dlckNhc2UoKSxyPWkubWF0Y2goLyhvcGVyYXxpZXxmaXJlZm94fGNocm9tZXx2ZXJzaW9uKVtcc1wvOl0oW1x3XGRcLl0rKT8uKj8oc2FmYXJpfHZlcnNpb25bXHNcLzpdKFtcd1xkXC5dKyl8JCkvKXx8W251bGwsInVua25vd24iLDBdLG89ImllIj09clsxXSYmZS5kb2N1bWVudE1vZGUscz10aGlzLkJyb3dzZXI9e2V4dGVuZDpGdW5jdGlvbi5wcm90b3R5cGUuZXh0ZW5kLG5hbWU6InZlcnNpb24iPT1yWzFdP3JbM106clsxXSx2ZXJzaW9uOm98fHBhcnNlRmxvYXQoIm9wZXJhIj09clsxXSYmcls0XT9yWzRdOnJbMl0pLFBsYXRmb3JtOntuYW1lOmkubWF0Y2goL2lwKD86YWR8b2R8aG9uZSkvKT8iaW9zIjooaS5tYXRjaCgvKD86d2Vib3N8YW5kcm9pZCkvKXx8bi5tYXRjaCgvbWFjfHdpbnxsaW51eC8pfHxbIm90aGVyIl0pWzBdfSxGZWF0dXJlczp7eHBhdGg6ISFlLmV2YWx1YXRlLGFpcjohIXQucnVudGltZSxxdWVyeTohIWUucXVlcnlTZWxlY3Rvcixqc29uOiEhdC5KU09OfSxQbHVnaW5zOnt9fTtzW3MubmFtZV09ITAsc1tzLm5hbWUrcGFyc2VJbnQocy52ZXJzaW9uLDEwKV09ITAscy5QbGF0Zm9ybVtzLlBsYXRmb3JtLm5hbWVdPSEwLHMuUmVxdWVzdD1mdW5jdGlvbigpe3ZhciBlPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBYTUxIdHRwUmVxdWVzdH0sdD1mdW5jdGlvbigpe3JldHVybiBuZXcgQWN0aXZlWE9iamVjdCgiTVNYTUwyLlhNTEhUVFAiKX0saT1mdW5jdGlvbigpe3JldHVybiBuZXcgQWN0aXZlWE9iamVjdCgiTWljcm9zb2Z0LlhNTEhUVFAiKX07cmV0dXJuIEZ1bmN0aW9uLmF0dGVtcHQoZnVuY3Rpb24oKXtyZXR1cm4gZSgpLGV9LGZ1bmN0aW9uKCl7cmV0dXJuIHQoKSx0fSxmdW5jdGlvbigpe3JldHVybiBpKCksaX0pfSgpLHMuRmVhdHVyZXMueGhyPSEhcy5SZXF1ZXN0O3ZhciBhPShGdW5jdGlvbi5hdHRlbXB0KGZ1bmN0aW9uKCl7cmV0dXJuIG5hdmlnYXRvci5wbHVnaW5zWyJTaG9ja3dhdmUgRmxhc2giXS5kZXNjcmlwdGlvbn0sZnVuY3Rpb24oKXtyZXR1cm4gbmV3IEFjdGl2ZVhPYmplY3QoIlNob2Nrd2F2ZUZsYXNoLlNob2Nrd2F2ZUZsYXNoIikuR2V0VmFyaWFibGUoIiR2ZXJzaW9uIil9KXx8IjAgcjAiKS5tYXRjaCgvXGQrL2cpO2lmKHMuUGx1Z2lucy5GbGFzaD17dmVyc2lvbjpOdW1iZXIoYVswXXx8IjAuIithWzFdKXx8MCxidWlsZDpOdW1iZXIoYVsyXSl8fDB9LHMuZXhlYz1mdW5jdGlvbihpKXtpZighaSlyZXR1cm4gaTtpZih0LmV4ZWNTY3JpcHQpdC5leGVjU2NyaXB0KGkpO2Vsc2V7dmFyIG49ZS5jcmVhdGVFbGVtZW50KCJzY3JpcHQiKTtuLnNldEF0dHJpYnV0ZSgidHlwZSIsInRleHQvamF2YXNjcmlwdCIpLG4udGV4dD1pLGUuaGVhZC5hcHBlbmRDaGlsZChuKSxlLmhlYWQucmVtb3ZlQ2hpbGQobil9cmV0dXJuIGl9LFN0cmluZy5pbXBsZW1lbnQoInN0cmlwU2NyaXB0cyIsZnVuY3Rpb24oZSl7dmFyIHQ9IiIsaT10aGlzLnJlcGxhY2UoLzxzY3JpcHRbXj5dKj4oW1xzXFNdKj8pPFwvc2NyaXB0Pi9naSxmdW5jdGlvbihlLGkpe3JldHVybiB0Kz1pKyJcbiIsIiJ9KTtyZXR1cm4gZT09PSEwP3MuZXhlYyh0KToiZnVuY3Rpb24iPT10eXBlT2YoZSkmJmUodCxpKSxpfSkscy5leHRlbmQoe0RvY3VtZW50OnRoaXMuRG9jdW1lbnQsV2luZG93OnRoaXMuV2luZG93LEVsZW1lbnQ6dGhpcy5FbGVtZW50LEV2ZW50OnRoaXMuRXZlbnR9KSx0aGlzLldpbmRvdz10aGlzLiRjb25zdHJ1Y3Rvcj1uZXcgVHlwZSgiV2luZG93IixmdW5jdGlvbigpe30pLHRoaXMuJGZhbWlseT1GdW5jdGlvbi5mcm9tKCJ3aW5kb3ciKS5oaWRlKCksV2luZG93Lm1pcnJvcihmdW5jdGlvbihlLGkpe3RbZV09aX0pLHRoaXMuRG9jdW1lbnQ9ZS4kY29uc3RydWN0b3I9bmV3IFR5cGUoIkRvY3VtZW50IixmdW5jdGlvbigpe30pLGUuJGZhbWlseT1GdW5jdGlvbi5mcm9tKCJkb2N1bWVudCIpLmhpZGUoKSxEb2N1bWVudC5taXJyb3IoZnVuY3Rpb24odCxpKXtlW3RdPWl9KSxlLmh0bWw9ZS5kb2N1bWVudEVsZW1lbnQsZS5oZWFkfHwoZS5oZWFkPWUuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImhlYWQiKVswXSksZS5leGVjQ29tbWFuZCl0cnl7ZS5leGVjQ29tbWFuZCgiQmFja2dyb3VuZEltYWdlQ2FjaGUiLCExLCEwKX1jYXRjaChsKXt9aWYodGhpcy5hdHRhY2hFdmVudCYmIXRoaXMuYWRkRXZlbnRMaXN0ZW5lcil7dmFyIGM9ZnVuY3Rpb24oKXt0aGlzLmRldGFjaEV2ZW50KCJvbnVubG9hZCIsYyksZS5oZWFkPWUuaHRtbD1lLndpbmRvdz1udWxsfTt0aGlzLmF0dGFjaEV2ZW50KCJvbnVubG9hZCIsYyl9dmFyIHU9QXJyYXkuZnJvbTt0cnl7dShlLmh0bWwuY2hpbGROb2Rlcyl9Y2F0Y2gobCl7QXJyYXkuZnJvbT1mdW5jdGlvbihlKXtpZigic3RyaW5nIiE9dHlwZW9mIGUmJlR5cGUuaXNFbnVtZXJhYmxlKGUpJiYiYXJyYXkiIT10eXBlT2YoZSkpe2Zvcih2YXIgdD1lLmxlbmd0aCxpPUFycmF5KHQpO3QtLTspaVt0XT1lW3RdO3JldHVybiBpfXJldHVybiB1KGUpfTt2YXIgaD1BcnJheS5wcm90b3R5cGUsZD1oLnNsaWNlO1sicG9wIiwicHVzaCIsInJldmVyc2UiLCJzaGlmdCIsInNvcnQiLCJzcGxpY2UiLCJ1bnNoaWZ0IiwiY29uY2F0Iiwiam9pbiIsInNsaWNlIl0uZWFjaChmdW5jdGlvbihlKXt2YXIgdD1oW2VdO0FycmF5W2VdPWZ1bmN0aW9uKGUpe3JldHVybiB0LmFwcGx5KEFycmF5LmZyb20oZSksZC5jYWxsKGFyZ3VtZW50cywxKSl9fSl9cy5QbGF0Zm9ybS5pb3MmJihzLlBsYXRmb3JtLmlwb2Q9ITApLHMuRW5naW5lPXt9O3ZhciBwPWZ1bmN0aW9uKGUsdCl7cy5FbmdpbmUubmFtZT1lLHMuRW5naW5lW2UrdF09ITAscy5FbmdpbmUudmVyc2lvbj10fTtpZihzLmllKXN3aXRjaChzLkVuZ2luZS50cmlkZW50PSEwLHMudmVyc2lvbil7Y2FzZSA2OnAoInRyaWRlbnQiLDQpO2JyZWFrO2Nhc2UgNzpwKCJ0cmlkZW50Iiw1KTticmVhaztjYXNlIDg6cCgidHJpZGVudCIsNil9aWYocy5maXJlZm94JiYocy5FbmdpbmUuZ2Vja289ITAscy52ZXJzaW9uPj0zP3AoImdlY2tvIiwxOSk6cCgiZ2Vja28iLDE4KSkscy5zYWZhcml8fHMuY2hyb21lKXN3aXRjaChzLkVuZ2luZS53ZWJraXQ9ITAscy52ZXJzaW9uKXtjYXNlIDI6cCgid2Via2l0Iiw0MTkpO2JyZWFrO2Nhc2UgMzpwKCJ3ZWJraXQiLDQyMCk7YnJlYWs7Y2FzZSA0OnAoIndlYmtpdCIsNTI1KX1pZihzLm9wZXJhJiYocy5FbmdpbmUucHJlc3RvPSEwLHMudmVyc2lvbj49OS42P3AoInByZXN0byIsOTYwKTpzLnZlcnNpb24+PTkuNT9wKCJwcmVzdG8iLDk1MCk6cCgicHJlc3RvIiw5MjUpKSwidW5rbm93biI9PXMubmFtZSlzd2l0Y2goKGkubWF0Y2goLyg/OndlYmtpdHxraHRtbHxnZWNrbykvKXx8W10pWzBdKXtjYXNlIndlYmtpdCI6Y2FzZSJraHRtbCI6cy5FbmdpbmUud2Via2l0PSEwO2JyZWFrO2Nhc2UiZ2Vja28iOnMuRW5naW5lLmdlY2tvPSEwfXRoaXMuJGV4ZWM9cy5leGVjfSgpLGZ1bmN0aW9uKCl7dmFyIGU9e30sdD10aGlzLkRPTUV2ZW50PW5ldyBUeXBlKCJET01FdmVudCIsZnVuY3Rpb24odCxpKXtpZihpfHwoaT13aW5kb3cpLHQ9dHx8aS5ldmVudCx0LiRleHRlbmRlZClyZXR1cm4gdDt0aGlzLmV2ZW50PXQsdGhpcy4kZXh0ZW5kZWQ9ITAsdGhpcy5zaGlmdD10LnNoaWZ0S2V5LHRoaXMuY29udHJvbD10LmN0cmxLZXksdGhpcy5hbHQ9dC5hbHRLZXksdGhpcy5tZXRhPXQubWV0YUtleTtmb3IodmFyIG49dGhpcy50eXBlPXQudHlwZSxyPXQudGFyZ2V0fHx0LnNyY0VsZW1lbnQ7ciYmMz09ci5ub2RlVHlwZTspcj1yLnBhcmVudE5vZGU7aWYodGhpcy50YXJnZXQ9ZG9jdW1lbnQuaWQociksMD09bi5pbmRleE9mKCJrZXkiKSl7dmFyIG89dGhpcy5jb2RlPXQud2hpY2h8fHQua2V5Q29kZTt0aGlzLmtleT1lW29dfHxPYmplY3Qua2V5T2YoRXZlbnQuS2V5cyxvKSwia2V5ZG93biI9PW4mJihvPjExMSYmMTI0Pm8/dGhpcy5rZXk9ImYiKyhvLTExMSk6bz45NSYmMTA2Pm8mJih0aGlzLmtleT1vLTk2KSksbnVsbD09dGhpcy5rZXkmJih0aGlzLmtleT1TdHJpbmcuZnJvbUNoYXJDb2RlKG8pLnRvTG93ZXJDYXNlKCkpfWVsc2UgaWYoImNsaWNrIj09bnx8ImRibGNsaWNrIj09bnx8ImNvbnRleHRtZW51Ij09bnx8IkRPTU1vdXNlU2Nyb2xsIj09bnx8MD09bi5pbmRleE9mKCJtb3VzZSIpKXt2YXIgcz1pLmRvY3VtZW50O2lmKHM9cy5jb21wYXRNb2RlJiYiQ1NTMUNvbXBhdCIhPXMuY29tcGF0TW9kZT9zLmJvZHk6cy5odG1sLHRoaXMucGFnZT17eDpudWxsIT10LnBhZ2VYP3QucGFnZVg6dC5jbGllbnRYK3Muc2Nyb2xsTGVmdCx5Om51bGwhPXQucGFnZVk/dC5wYWdlWTp0LmNsaWVudFkrcy5zY3JvbGxUb3B9LHRoaXMuY2xpZW50PXt4Om51bGwhPXQucGFnZVg/dC5wYWdlWC1pLnBhZ2VYT2Zmc2V0OnQuY2xpZW50WCx5Om51bGwhPXQucGFnZVk/dC5wYWdlWS1pLnBhZ2VZT2Zmc2V0OnQuY2xpZW50WX0sKCJET01Nb3VzZVNjcm9sbCI9PW58fCJtb3VzZXdoZWVsIj09bikmJih0aGlzLndoZWVsPXQud2hlZWxEZWx0YT90LndoZWVsRGVsdGEvMTIwOi0odC5kZXRhaWx8fDApLzMpLHRoaXMucmlnaHRDbGljaz0zPT10LndoaWNofHwyPT10LmJ1dHRvbiwibW91c2VvdmVyIj09bnx8Im1vdXNlb3V0Ij09bil7Zm9yKHZhciBhPXQucmVsYXRlZFRhcmdldHx8dFsoIm1vdXNlb3ZlciI9PW4/ImZyb20iOiJ0byIpKyJFbGVtZW50Il07YSYmMz09YS5ub2RlVHlwZTspYT1hLnBhcmVudE5vZGU7dGhpcy5yZWxhdGVkVGFyZ2V0PWRvY3VtZW50LmlkKGEpfX1lbHNlIGlmKDA9PW4uaW5kZXhPZigidG91Y2giKXx8MD09bi5pbmRleE9mKCJnZXN0dXJlIikpe3RoaXMucm90YXRpb249dC5yb3RhdGlvbix0aGlzLnNjYWxlPXQuc2NhbGUsdGhpcy50YXJnZXRUb3VjaGVzPXQudGFyZ2V0VG91Y2hlcyx0aGlzLmNoYW5nZWRUb3VjaGVzPXQuY2hhbmdlZFRvdWNoZXM7dmFyIGw9dGhpcy50b3VjaGVzPXQudG91Y2hlcztpZihsJiZsWzBdKXt2YXIgYz1sWzBdO3RoaXMucGFnZT17eDpjLnBhZ2VYLHk6Yy5wYWdlWX0sdGhpcy5jbGllbnQ9e3g6Yy5jbGllbnRYLHk6Yy5jbGllbnRZfX19dGhpcy5jbGllbnR8fCh0aGlzLmNsaWVudD17fSksdGhpcy5wYWdlfHwodGhpcy5wYWdlPXt9KX0pO3QuaW1wbGVtZW50KHtzdG9wOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHJldmVudERlZmF1bHQoKS5zdG9wUHJvcGFnYXRpb24oKX0sc3RvcFByb3BhZ2F0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZXZlbnQuc3RvcFByb3BhZ2F0aW9uP3RoaXMuZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk6dGhpcy5ldmVudC5jYW5jZWxCdWJibGU9ITAsdGhpc30scHJldmVudERlZmF1bHQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ldmVudC5wcmV2ZW50RGVmYXVsdD90aGlzLmV2ZW50LnByZXZlbnREZWZhdWx0KCk6dGhpcy5ldmVudC5yZXR1cm5WYWx1ZT0hMSx0aGlzfX0pLHQuZGVmaW5lS2V5PWZ1bmN0aW9uKHQsaSl7cmV0dXJuIGVbdF09aSx0aGlzfSx0LmRlZmluZUtleXM9dC5kZWZpbmVLZXkub3ZlcmxvYWRTZXR0ZXIoITApLHQuZGVmaW5lS2V5cyh7Mzg6InVwIiw0MDoiZG93biIsMzc6ImxlZnQiLDM5OiJyaWdodCIsMjc6ImVzYyIsMzI6InNwYWNlIiw4OiJiYWNrc3BhY2UiLDk6InRhYiIsNDY6ImRlbGV0ZSIsMTM6ImVudGVyIn0pfSgpO3ZhciBFdmVudD1ET01FdmVudDtFdmVudC5LZXlzPXt9LEV2ZW50LktleXM9bmV3IEhhc2goRXZlbnQuS2V5cyksZnVuY3Rpb24oKXt2YXIgZT10aGlzLkNsYXNzPW5ldyBUeXBlKCJDbGFzcyIsZnVuY3Rpb24obil7aW5zdGFuY2VPZihuLEZ1bmN0aW9uKSYmKG49e2luaXRpYWxpemU6bn0pO3ZhciByPWZ1bmN0aW9uKCl7aWYoaSh0aGlzKSxyLiRwcm90b3R5cGluZylyZXR1cm4gdGhpczt0aGlzLiRjYWxsZXI9bnVsbDt2YXIgZT10aGlzLmluaXRpYWxpemU/dGhpcy5pbml0aWFsaXplLmFwcGx5KHRoaXMsYXJndW1lbnRzKTp0aGlzO3JldHVybiB0aGlzLiRjYWxsZXI9dGhpcy5jYWxsZXI9bnVsbCxlfS5leHRlbmQodGhpcykuaW1wbGVtZW50KG4pO3JldHVybiByLiRjb25zdHJ1Y3Rvcj1lLHIucHJvdG90eXBlLiRjb25zdHJ1Y3Rvcj1yLHIucHJvdG90eXBlLnBhcmVudD10LHJ9KSx0PWZ1bmN0aW9uKCl7aWYoIXRoaXMuJGNhbGxlcil0aHJvdyBFcnJvcignVGhlIG1ldGhvZCAicGFyZW50IiBjYW5ub3QgYmUgY2FsbGVkLicpO3ZhciBlPXRoaXMuJGNhbGxlci4kbmFtZSx0PXRoaXMuJGNhbGxlci4kb3duZXIucGFyZW50LGk9dD90LnByb3RvdHlwZVtlXTpudWxsO2lmKCFpKXRocm93IEVycm9yKCdUaGUgbWV0aG9kICInK2UrJyIgaGFzIG5vIHBhcmVudC4nKTtyZXR1cm4gaS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGk9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0IGluIGUpe3ZhciBuPWVbdF07c3dpdGNoKHR5cGVPZihuKSl7Y2FzZSJvYmplY3QiOnZhciByPWZ1bmN0aW9uKCl7fTtyLnByb3RvdHlwZT1uLGVbdF09aShuZXcgcik7YnJlYWs7Y2FzZSJhcnJheSI6ZVt0XT1uLmNsb25lKCl9fXJldHVybiBlfSxuPWZ1bmN0aW9uKGUsdCxpKXtpLiRvcmlnaW4mJihpPWkuJG9yaWdpbik7dmFyIG49ZnVuY3Rpb24oKXtpZihpLiRwcm90ZWN0ZWQmJm51bGw9PXRoaXMuJGNhbGxlcil0aHJvdyBFcnJvcignVGhlIG1ldGhvZCAiJyt0KyciIGNhbm5vdCBiZSBjYWxsZWQuJyk7dmFyIGU9dGhpcy5jYWxsZXIscj10aGlzLiRjYWxsZXI7dGhpcy5jYWxsZXI9cix0aGlzLiRjYWxsZXI9bjt2YXIgbz1pLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtyZXR1cm4gdGhpcy4kY2FsbGVyPXIsdGhpcy5jYWxsZXI9ZSxvfS5leHRlbmQoeyRvd25lcjplLCRvcmlnaW46aSwkbmFtZTp0fSk7cmV0dXJuIG59LHI9ZnVuY3Rpb24odCxpLHIpe2lmKGUuTXV0YXRvcnMuaGFzT3duUHJvcGVydHkodCkmJihpPWUuTXV0YXRvcnNbdF0uY2FsbCh0aGlzLGkpLG51bGw9PWkpKXJldHVybiB0aGlzO2lmKCJmdW5jdGlvbiI9PXR5cGVPZihpKSl7aWYoaS4kaGlkZGVuKXJldHVybiB0aGlzO3RoaXMucHJvdG90eXBlW3RdPXI/aTpuKHRoaXMsdCxpKX1lbHNlIE9iamVjdC5tZXJnZSh0aGlzLnByb3RvdHlwZSx0LGkpO3JldHVybiB0aGlzfSxvPWZ1bmN0aW9uKGUpe2UuJHByb3RvdHlwaW5nPSEwO3ZhciB0PW5ldyBlO3JldHVybiBkZWxldGUgZS4kcHJvdG90eXBpbmcsdH07ZS5pbXBsZW1lbnQoImltcGxlbWVudCIsci5vdmVybG9hZFNldHRlcigpKSxlLk11dGF0b3JzPXtFeHRlbmRzOmZ1bmN0aW9uKGUpe3RoaXMucGFyZW50PWUsdGhpcy5wcm90b3R5cGU9byhlKX0sSW1wbGVtZW50czpmdW5jdGlvbihlKXtBcnJheS5mcm9tKGUpLmVhY2goZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IGU7Zm9yKHZhciBpIGluIHQpci5jYWxsKHRoaXMsaSx0W2ldLCEwKX0sdGhpcyl9fX0oKSxmdW5jdGlvbigpe3RoaXMuQ2hhaW49bmV3IENsYXNzKHskY2hhaW46W10sY2hhaW46ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kY2hhaW4uYXBwZW5kKEFycmF5LmZsYXR0ZW4oYXJndW1lbnRzKSksdGhpc30sY2FsbENoYWluOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGNoYWluLmxlbmd0aD90aGlzLiRjaGFpbi5zaGlmdCgpLmFwcGx5KHRoaXMsYXJndW1lbnRzKTohMX0sY2xlYXJDaGFpbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLiRjaGFpbi5lbXB0eSgpLHRoaXN9fSk7dmFyIGU9ZnVuY3Rpb24oZSl7cmV0dXJuIGUucmVwbGFjZSgvXm9uKFtBLVpdKS8sZnVuY3Rpb24oZSx0KXtyZXR1cm4gdC50b0xvd2VyQ2FzZSgpfSl9O3RoaXMuRXZlbnRzPW5ldyBDbGFzcyh7JGV2ZW50czp7fSxhZGRFdmVudDpmdW5jdGlvbih0LGksbil7cmV0dXJuIHQ9ZSh0KSxpPT0kZW1wdHk/dGhpczoodGhpcy4kZXZlbnRzW3RdPSh0aGlzLiRldmVudHNbdF18fFtdKS5pbmNsdWRlKGkpLG4mJihpLmludGVybmFsPSEwKSx0aGlzKX0sYWRkRXZlbnRzOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdCBpbiBlKXRoaXMuYWRkRXZlbnQodCxlW3RdKTtyZXR1cm4gdGhpc30sZmlyZUV2ZW50OmZ1bmN0aW9uKHQsaSxuKXt0PWUodCk7dmFyIHI9dGhpcy4kZXZlbnRzW3RdO3JldHVybiByPyhpPUFycmF5LmZyb20oaSksci5lYWNoKGZ1bmN0aW9uKGUpe24/ZS5kZWxheShuLHRoaXMsaSk6ZS5hcHBseSh0aGlzLGkpfSx0aGlzKSx0aGlzKTp0aGlzfSxyZW1vdmVFdmVudDpmdW5jdGlvbih0LGkpe3Q9ZSh0KTt2YXIgbj10aGlzLiRldmVudHNbdF07aWYobiYmIWkuaW50ZXJuYWwpe3ZhciByPW4uaW5kZXhPZihpKTstMSE9ciYmZGVsZXRlIG5bcl19cmV0dXJuIHRoaXN9LHJlbW92ZUV2ZW50czpmdW5jdGlvbih0KXt2YXIgaTtpZigib2JqZWN0Ij09dHlwZU9mKHQpKXtmb3IoaSBpbiB0KXRoaXMucmVtb3ZlRXZlbnQoaSx0W2ldKTtyZXR1cm4gdGhpc310JiYodD1lKHQpKTtmb3IoaSBpbiB0aGlzLiRldmVudHMpaWYoIXR8fHQ9PWkpZm9yKHZhciBuPXRoaXMuJGV2ZW50c1tpXSxyPW4ubGVuZ3RoO3ItLTspciBpbiBuJiZ0aGlzLnJlbW92ZUV2ZW50KGksbltyXSk7cmV0dXJuIHRoaXN9fSksdGhpcy5PcHRpb25zPW5ldyBDbGFzcyh7c2V0T3B0aW9uczpmdW5jdGlvbigpe3ZhciBlPXRoaXMub3B0aW9ucz1PYmplY3QubWVyZ2UuYXBwbHkobnVsbCxbe30sdGhpcy5vcHRpb25zXS5hcHBlbmQoYXJndW1lbnRzKSk7aWYodGhpcy5hZGRFdmVudClmb3IodmFyIHQgaW4gZSkiZnVuY3Rpb24iPT10eXBlT2YoZVt0XSkmJi9eb25bQS1aXS8udGVzdCh0KSYmKHRoaXMuYWRkRXZlbnQodCxlW3RdKSxkZWxldGUgZVt0XSk7cmV0dXJuIHRoaXN9fSl9KCksZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsbyxzLGwsdSxkLHAsZixtLGcsdixiLHksXyx4LEMpe2lmKChvfHwtMT09PWkpJiYodC5leHByZXNzaW9uc1srK2ldPVtdLG49LTEsbykpcmV0dXJuIiI7aWYoc3x8bHx8LTE9PT1uKXtzPXN8fCIgIjt2YXIgdz10LmV4cHJlc3Npb25zW2ldO3ImJndbbl0mJih3W25dLnJldmVyc2VDb21iaW5hdG9yPWMocykpLHdbKytuXT17Y29tYmluYXRvcjpzLHRhZzoiKiJ9fXZhciBrPXQuZXhwcmVzc2lvbnNbaV1bbl07aWYodSlrLnRhZz11LnJlcGxhY2UoYSwiIik7ZWxzZSBpZihkKWsuaWQ9ZC5yZXBsYWNlKGEsIiIpO2Vsc2UgaWYocClwPXAucmVwbGFjZShhLCIiKSxrLmNsYXNzTGlzdHx8KGsuY2xhc3NMaXN0PVtdKSxrLmNsYXNzZXN8fChrLmNsYXNzZXM9W10pLGsuY2xhc3NMaXN0LnB1c2gocCksay5jbGFzc2VzLnB1c2goe3ZhbHVlOnAscmVnZXhwOlJlZ0V4cCgiKF58XFxzKSIraChwKSsiKFxcc3wkKSIpfSk7ZWxzZSBpZih5KUM9Q3x8eCxDPUM/Qy5yZXBsYWNlKGEsIiIpOm51bGwsay5wc2V1ZG9zfHwoay5wc2V1ZG9zPVtdKSxrLnBzZXVkb3MucHVzaCh7a2V5OnkucmVwbGFjZShhLCIiKSx2YWx1ZTpDLHR5cGU6MT09Yi5sZW5ndGg/ImNsYXNzIjoiZWxlbWVudCJ9KTtlbHNlIGlmKGYpe2Y9Zi5yZXBsYWNlKGEsIiIpLHY9KHZ8fCIiKS5yZXBsYWNlKGEsIiIpO3ZhciBULEU7c3dpdGNoKG0pe2Nhc2UiXj0iOkU9UmVnRXhwKCJeIitoKHYpKTticmVhaztjYXNlIiQ9IjpFPVJlZ0V4cChoKHYpKyIkIik7YnJlYWs7Y2FzZSJ+PSI6RT1SZWdFeHAoIihefFxccykiK2godikrIihcXHN8JCkiKTticmVhaztjYXNlInw9IjpFPVJlZ0V4cCgiXiIraCh2KSsiKC18JCkiKTticmVhaztjYXNlIj0iOlQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHY9PWV9O2JyZWFrO2Nhc2UiKj0iOlQ9ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJmUuaW5kZXhPZih2KT4tMX07YnJlYWs7Y2FzZSIhPSI6VD1mdW5jdGlvbihlKXtyZXR1cm4gdiE9ZX07YnJlYWs7ZGVmYXVsdDpUPWZ1bmN0aW9uKGUpe3JldHVybiEhZX19IiI9PXYmJi9eWyokXl09JC8udGVzdChtKSYmKFQ9ZnVuY3Rpb24oKXtyZXR1cm4hMX0pLFR8fChUPWZ1bmN0aW9uKGUpe3JldHVybiBlJiZFLnRlc3QoZSl9KSxrLmF0dHJpYnV0ZXN8fChrLmF0dHJpYnV0ZXM9W10pLGsuYXR0cmlidXRlcy5wdXNoKHtrZXk6ZixvcGVyYXRvcjptLHZhbHVlOnYsdGVzdDpUfSl9cmV0dXJuIiJ9dmFyIHQsaSxuLHIsbz17fSxzPXt9LGE9L1xcL2csbD1mdW5jdGlvbihuLGEpe2lmKG51bGw9PW4pcmV0dXJuIG51bGw7aWYobi5TbGljaz09PSEwKXJldHVybiBuO249KCIiK24pLnJlcGxhY2UoL15ccyt8XHMrJC9nLCIiKSxyPSEhYTt2YXIgYz1yP3M6bztpZihjW25dKXJldHVybiBjW25dO2Zvcih0PXtTbGljazohMCxleHByZXNzaW9uczpbXSxyYXc6bixyZXZlcnNlOmZ1bmN0aW9uKCl7cmV0dXJuIGwodGhpcy5yYXcsITApfX0saT0tMTtuIT0obj1uLnJlcGxhY2UoZCxlKSk7KTtyZXR1cm4gdC5sZW5ndGg9dC5leHByZXNzaW9ucy5sZW5ndGgsY1t0LnJhd109cj91KHQpOnR9LGM9ZnVuY3Rpb24oZSl7cmV0dXJuIiEiPT09ZT8iICI6IiAiPT09ZT8iISI6L14hLy50ZXN0KGUpP2UucmVwbGFjZSgvXiEvLCIiKToiISIrZX0sdT1mdW5jdGlvbihlKXtmb3IodmFyIHQ9ZS5leHByZXNzaW9ucyxpPTA7dC5sZW5ndGg+aTtpKyspe2Zvcih2YXIgbj10W2ldLHI9e3BhcnRzOltdLHRhZzoiKiIsY29tYmluYXRvcjpjKG5bMF0uY29tYmluYXRvcil9LG89MDtuLmxlbmd0aD5vO28rKyl7dmFyIHM9bltvXTtzLnJldmVyc2VDb21iaW5hdG9yfHwocy5yZXZlcnNlQ29tYmluYXRvcj0iICIpLHMuY29tYmluYXRvcj1zLnJldmVyc2VDb21iaW5hdG9yLGRlbGV0ZSBzLnJldmVyc2VDb21iaW5hdG9yfW4ucmV2ZXJzZSgpLnB1c2gocil9cmV0dXJuIGV9LGg9ZnVuY3Rpb24oZSl7cmV0dXJuIGUucmVwbGFjZSgvWy1bXF17fSgpKis/LlxcXiR8LCNcc10vZyxmdW5jdGlvbihlKXtyZXR1cm4iXFwiK2V9KX0sZD1SZWdFeHAoIl4oPzpcXHMqKCwpXFxzKnxcXHMqKDxjb21iaW5hdG9yPispXFxzKnwoXFxzKyl8KDx1bmljb2RlPit8XFwqKXxcXCMoPHVuaWNvZGU+Kyl8XFwuKDx1bmljb2RlPispfFxcW1xccyooPHVuaWNvZGUxPispKD86XFxzKihbKl4kIX58XT89KSg/OlxccyooPzooW1wiJ10/KSguKj8pXFw5KSkpP1xccypcXF0oPyFcXF0pfCg6KykoPHVuaWNvZGU+KykoPzpcXCgoPzooPzooW1wiJ10pKFteXFwxM10qKVxcMTMpfCgoPzpcXChbXildK1xcKXxbXigpXSopKykpXFwpKT8pIi5yZXBsYWNlKC88Y29tYmluYXRvcj4vLCJbIitoKCI+K35gIUAkJV4mPXt9XFw7PC8iKSsiXSIpLnJlcGxhY2UoLzx1bmljb2RlPi9nLCIoPzpbXFx3XFx1MDBhMS1cXHVGRkZGLV18XFxcXFteXFxzMC05YS1mXSkiKS5yZXBsYWNlKC88dW5pY29kZTE+L2csIig/Ols6XFx3XFx1MDBhMS1cXHVGRkZGLV18XFxcXFteXFxzMC05YS1mXSkiKSkscD10aGlzLlNsaWNrfHx7fTtwLnBhcnNlPWZ1bmN0aW9uKGUpe3JldHVybiBsKGUpfSxwLmVzY2FwZVJlZ0V4cD1oLHRoaXMuU2xpY2t8fCh0aGlzLlNsaWNrPXApfS5hcHBseSgidW5kZWZpbmVkIiE9dHlwZW9mIGV4cG9ydHM/ZXhwb3J0czp0aGlzKSxmdW5jdGlvbigpe3ZhciBlPXt9LHQ9e30saT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO2UuaXNOYXRpdmVDb2RlPWZ1bmN0aW9uKGUpe3JldHVybi9ce1xzKlxbbmF0aXZlIGNvZGVcXVxzKlx9Ly50ZXN0KCIiK2UpfSxlLmlzWE1MPWZ1bmN0aW9uKGUpe3JldHVybiEhZS54bWxWZXJzaW9ufHwhIWUueG1sfHwiW29iamVjdCBYTUxEb2N1bWVudF0iPT1pLmNhbGwoZSl8fDk9PWUubm9kZVR5cGUmJiJIVE1MIiE9ZS5kb2N1bWVudEVsZW1lbnQubm9kZU5hbWV9LGUuc2V0RG9jdW1lbnQ9ZnVuY3Rpb24oZSl7dmFyIGk9ZS5ub2RlVHlwZTtpZig5PT1pKTtlbHNlIGlmKGkpZT1lLm93bmVyRG9jdW1lbnQ7ZWxzZXtpZighZS5uYXZpZ2F0b3IpcmV0dXJuO2U9ZS5kb2N1bWVudH1pZih0aGlzLmRvY3VtZW50IT09ZSl7dGhpcy5kb2N1bWVudD1lO3ZhciBuLHI9ZS5kb2N1bWVudEVsZW1lbnQsbz10aGlzLmdldFVJRFhNTChyKSxzPXRbb107aWYocylmb3IobiBpbiBzKXRoaXNbbl09c1tuXTtlbHNle3M9dFtvXT17fSxzLnJvb3Q9cixzLmlzWE1MRG9jdW1lbnQ9dGhpcy5pc1hNTChlKSxzLmJyb2tlblN0YXJHRUJUTj1zLnN0YXJTZWxlY3RzQ2xvc2VkUVNBPXMuaWRHZXRzTmFtZT1zLmJyb2tlbk1peGVkQ2FzZVFTQT1zLmJyb2tlbkdFQkNOPXMuYnJva2VuQ2hlY2tlZFFTQT1zLmJyb2tlbkVtcHR5QXR0cmlidXRlUVNBPXMuaXNIVE1MRG9jdW1lbnQ9cy5uYXRpdmVNYXRjaGVzU2VsZWN0b3I9ITE7dmFyIGEsbCxjLHUsaCxkLHA9InNsaWNrX3VuaXF1ZWlkIixmPWUuY3JlYXRlRWxlbWVudCgiZGl2IiksbT1lLmJvZHl8fGUuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImJvZHkiKVswXXx8cjttLmFwcGVuZENoaWxkKGYpO3RyeXtmLmlubmVySFRNTD0nPGEgaWQ9IicrcCsnIj48L2E+JyxzLmlzSFRNTERvY3VtZW50PSEhZS5nZXRFbGVtZW50QnlJZChwKX1jYXRjaChnKXt9aWYocy5pc0hUTUxEb2N1bWVudCl7Zi5zdHlsZS5kaXNwbGF5PSJub25lIixmLmFwcGVuZENoaWxkKGUuY3JlYXRlQ29tbWVudCgiIikpLGw9Zi5nZXRFbGVtZW50c0J5VGFnTmFtZSgiKiIpLmxlbmd0aD4xO3RyeXtmLmlubmVySFRNTD0iZm9vPC9mb28+IixkPWYuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIioiKSxhPWQmJiEhZC5sZW5ndGgmJiIvIj09ZFswXS5ub2RlTmFtZS5jaGFyQXQoMCl9Y2F0Y2goZyl7fXMuYnJva2VuU3RhckdFQlROPWx8fGE7dHJ5e2YuaW5uZXJIVE1MPSc8YSBuYW1lPSInK3ArJyI+PC9hPjxiIGlkPSInK3ArJyI+PC9iPicscy5pZEdldHNOYW1lPWUuZ2V0RWxlbWVudEJ5SWQocCk9PT1mLmZpcnN0Q2hpbGR9Y2F0Y2goZyl7fWlmKGYuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSl7dHJ5e2YuaW5uZXJIVE1MPSc8YSBjbGFzcz0iZiI+PC9hPjxhIGNsYXNzPSJiIj48L2E+JyxmLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoImIiKS5sZW5ndGgsZi5maXJzdENoaWxkLmNsYXNzTmFtZT0iYiIsdT0yIT1mLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoImIiKS5sZW5ndGh9Y2F0Y2goZyl7fXRyeXtmLmlubmVySFRNTD0nPGEgY2xhc3M9ImEiPjwvYT48YSBjbGFzcz0iZiBiIGEiPjwvYT4nLGM9MiE9Zi5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJhIikubGVuZ3RofWNhdGNoKGcpe31zLmJyb2tlbkdFQkNOPXV8fGN9aWYoZi5xdWVyeVNlbGVjdG9yQWxsKXt0cnl7Zi5pbm5lckhUTUw9ImZvbzwvZm9vPiIsZD1mLnF1ZXJ5U2VsZWN0b3JBbGwoIioiKSxzLnN0YXJTZWxlY3RzQ2xvc2VkUVNBPWQmJiEhZC5sZW5ndGgmJiIvIj09ZFswXS5ub2RlTmFtZS5jaGFyQXQoMCl9Y2F0Y2goZyl7fXRyeXtmLmlubmVySFRNTD0nPGEgY2xhc3M9Ik1pWCI+PC9hPicscy5icm9rZW5NaXhlZENhc2VRU0E9IWYucXVlcnlTZWxlY3RvckFsbCgiLk1pWCIpLmxlbmd0aH1jYXRjaChnKXt9dHJ5e2YuaW5uZXJIVE1MPSc8c2VsZWN0PjxvcHRpb24gc2VsZWN0ZWQ9InNlbGVjdGVkIj5hPC9vcHRpb24+PC9zZWxlY3Q+JyxzLmJyb2tlbkNoZWNrZWRRU0E9MD09Zi5xdWVyeVNlbGVjdG9yQWxsKCI6Y2hlY2tlZCIpLmxlbmd0aH1jYXRjaChnKXt9dHJ5e2YuaW5uZXJIVE1MPSc8YSBjbGFzcz0iIj48L2E+JyxzLmJyb2tlbkVtcHR5QXR0cmlidXRlUVNBPTAhPWYucXVlcnlTZWxlY3RvckFsbCgnW2NsYXNzKj0iIl0nKS5sZW5ndGh9Y2F0Y2goZyl7fX10cnl7Zi5pbm5lckhUTUw9Jzxmb3JtIGFjdGlvbj0icyI+PGlucHV0IGlkPSJhY3Rpb24iLz48L2Zvcm0+JyxoPSJzIiE9Zi5maXJzdENoaWxkLmdldEF0dHJpYnV0ZSgiYWN0aW9uIil9Y2F0Y2goZyl7fWlmKHMubmF0aXZlTWF0Y2hlc1NlbGVjdG9yPXIubWF0Y2hlc1NlbGVjdG9yfHxyLm1vek1hdGNoZXNTZWxlY3Rvcnx8ci53ZWJraXRNYXRjaGVzU2VsZWN0b3Iscy5uYXRpdmVNYXRjaGVzU2VsZWN0b3IpdHJ5e3MubmF0aXZlTWF0Y2hlc1NlbGVjdG9yLmNhbGwociwiOnNsaWNrIikscy5uYXRpdmVNYXRjaGVzU2VsZWN0b3I9bnVsbH1jYXRjaChnKXt9fXRyeXtyLnNsaWNrX2V4cGFuZG89MSxkZWxldGUgci5zbGlja19leHBhbmRvLHMuZ2V0VUlEPXRoaXMuZ2V0VUlESFRNTH1jYXRjaChnKXtzLmdldFVJRD10aGlzLmdldFVJRFhNTH1tLnJlbW92ZUNoaWxkKGYpLGY9ZD1tPW51bGwscy5nZXRBdHRyaWJ1dGU9cy5pc0hUTUxEb2N1bWVudCYmaD9mdW5jdGlvbihlLHQpe3ZhciBpPXRoaXMuYXR0cmlidXRlR2V0dGVyc1t0XTtpZihpKXJldHVybiBpLmNhbGwoZSk7dmFyIG49ZS5nZXRBdHRyaWJ1dGVOb2RlKHQpO3JldHVybiBuP24ubm9kZVZhbHVlOm51bGx9OmZ1bmN0aW9uKGUsdCl7dmFyIGk9dGhpcy5hdHRyaWJ1dGVHZXR0ZXJzW3RdO3JldHVybiBpP2kuY2FsbChlKTplLmdldEF0dHJpYnV0ZSh0KX0scy5oYXNBdHRyaWJ1dGU9ciYmdGhpcy5pc05hdGl2ZUNvZGUoci5oYXNBdHRyaWJ1dGUpP2Z1bmN0aW9uKGUsdCl7cmV0dXJuIGUuaGFzQXR0cmlidXRlKHQpfTpmdW5jdGlvbihlLHQpe3JldHVybiBlPWUuZ2V0QXR0cmlidXRlTm9kZSh0KSwhKCFlfHwhZS5zcGVjaWZpZWQmJiFlLm5vZGVWYWx1ZSl9O3ZhciB2PXImJnRoaXMuaXNOYXRpdmVDb2RlKHIuY29udGFpbnMpLGI9ZSYmdGhpcy5pc05hdGl2ZUNvZGUoZS5jb250YWlucyk7cy5jb250YWlucz12JiZiP2Z1bmN0aW9uKGUsdCl7cmV0dXJuIGUuY29udGFpbnModCl9OnYmJiFiP2Z1bmN0aW9uKHQsaSl7cmV0dXJuIHQ9PT1pfHwodD09PWU/ZS5kb2N1bWVudEVsZW1lbnQ6dCkuY29udGFpbnMoaSl9OnImJnIuY29tcGFyZURvY3VtZW50UG9zaXRpb24/ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZT09PXR8fCEhKDE2JmUuY29tcGFyZURvY3VtZW50UG9zaXRpb24odCkpfTpmdW5jdGlvbihlLHQpe2lmKHQpZG8gaWYodD09PWUpcmV0dXJuITA7d2hpbGUodD10LnBhcmVudE5vZGUpO3JldHVybiExfSxzLmRvY3VtZW50U29ydGVyPXIuY29tcGFyZURvY3VtZW50UG9zaXRpb24/ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiYmdC5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbj80JmUuY29tcGFyZURvY3VtZW50UG9zaXRpb24odCk/LTE6ZT09PXQ/MDoxOjB9OiJzb3VyY2VJbmRleCJpbiByP2Z1bmN0aW9uKGUsdCl7cmV0dXJuIGUuc291cmNlSW5kZXgmJnQuc291cmNlSW5kZXg/ZS5zb3VyY2VJbmRleC10LnNvdXJjZUluZGV4OjB9OmUuY3JlYXRlUmFuZ2U/ZnVuY3Rpb24oZSx0KXtpZighZS5vd25lckRvY3VtZW50fHwhdC5vd25lckRvY3VtZW50KXJldHVybiAwO3ZhciBpPWUub3duZXJEb2N1bWVudC5jcmVhdGVSYW5nZSgpLG49dC5vd25lckRvY3VtZW50LmNyZWF0ZVJhbmdlKCk7cmV0dXJuIGkuc2V0U3RhcnQoZSwwKSxpLnNldEVuZChlLDApLG4uc2V0U3RhcnQodCwwKSxuLnNldEVuZCh0LDApLGkuY29tcGFyZUJvdW5kYXJ5UG9pbnRzKFJhbmdlLlNUQVJUX1RPX0VORCxuKX06bnVsbCxyPW51bGw7Zm9yKG4gaW4gcyl0aGlzW25dPXNbbl19fX07dmFyIG49L14oWyMuXT8pKCg/Oltcdy1dK3xcKikpJC8scj0vXFsuK1sqJF5dPSg/OiIifCcnKT9cXS8sbz17fTtlLnNlYXJjaD1mdW5jdGlvbihlLHQsaSxzKXt2YXIgYT10aGlzLmZvdW5kPXM/bnVsbDppfHxbXTtpZighZSlyZXR1cm4gYTtpZihlLm5hdmlnYXRvcillPWUuZG9jdW1lbnQ7ZWxzZSBpZighZS5ub2RlVHlwZSlyZXR1cm4gYTt2YXIgbCxjLHU9dGhpcy51bmlxdWVzPXt9LGQ9ISghaXx8IWkubGVuZ3RoKSxwPTk9PWUubm9kZVR5cGU7aWYodGhpcy5kb2N1bWVudCE9PShwP2U6ZS5vd25lckRvY3VtZW50KSYmdGhpcy5zZXREb2N1bWVudChlKSxkKWZvcihjPWEubGVuZ3RoO2MtLTspdVt0aGlzLmdldFVJRChhW2NdKV09ITA7aWYoInN0cmluZyI9PXR5cGVvZiB0KXt2YXIgZj10Lm1hdGNoKG4pO2U6aWYoZil7dmFyIG0sZyx2PWZbMV0sYj1mWzJdO2lmKHYpe2lmKCIjIj09dil7aWYoIXRoaXMuaXNIVE1MRG9jdW1lbnR8fCFwKWJyZWFrIGU7aWYobT1lLmdldEVsZW1lbnRCeUlkKGIpLCFtKXJldHVybiBhO2lmKHRoaXMuaWRHZXRzTmFtZSYmbS5nZXRBdHRyaWJ1dGVOb2RlKCJpZCIpLm5vZGVWYWx1ZSE9YilicmVhayBlO2lmKHMpcmV0dXJuIG18fG51bGw7ZCYmdVt0aGlzLmdldFVJRChtKV18fGEucHVzaChtKX1lbHNlIGlmKCIuIj09dil7aWYoIXRoaXMuaXNIVE1MRG9jdW1lbnR8fCghZS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lfHx0aGlzLmJyb2tlbkdFQkNOKSYmZS5xdWVyeVNlbGVjdG9yQWxsKWJyZWFrIGU7aWYoZS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lJiYhdGhpcy5icm9rZW5HRUJDTil7aWYoZz1lLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoYikscylyZXR1cm4gZ1swXXx8bnVsbDtmb3IoYz0wO209Z1tjKytdOylkJiZ1W3RoaXMuZ2V0VUlEKG0pXXx8YS5wdXNoKG0pfWVsc2V7dmFyIHk9UmVnRXhwKCIoXnxcXHMpIitoLmVzY2FwZVJlZ0V4cChiKSsiKFxcc3wkKSIpO2ZvcihnPWUuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIioiKSxjPTA7bT1nW2MrK107KWlmKGNsYXNzTmFtZT1tLmNsYXNzTmFtZSxjbGFzc05hbWUmJnkudGVzdChjbGFzc05hbWUpKXtpZihzKXJldHVybiBtO2QmJnVbdGhpcy5nZXRVSUQobSldfHxhLnB1c2gobSl9fX19ZWxzZXtpZigiKiI9PWImJnRoaXMuYnJva2VuU3RhckdFQlROKWJyZWFrIGU7aWYoZz1lLmdldEVsZW1lbnRzQnlUYWdOYW1lKGIpLHMpcmV0dXJuIGdbMF18fG51bGw7Zm9yKGM9MDttPWdbYysrXTspZCYmdVt0aGlzLmdldFVJRChtKV18fGEucHVzaChtKX1yZXR1cm4gZCYmdGhpcy5zb3J0KGEpLHM/bnVsbDphfWU6aWYoZS5xdWVyeVNlbGVjdG9yQWxsKXtpZighdGhpcy5pc0hUTUxEb2N1bWVudHx8b1t0XXx8dGhpcy5icm9rZW5NaXhlZENhc2VRU0F8fHRoaXMuYnJva2VuQ2hlY2tlZFFTQSYmdC5pbmRleE9mKCI6Y2hlY2tlZCIpPi0xfHx0aGlzLmJyb2tlbkVtcHR5QXR0cmlidXRlUVNBJiZyLnRlc3QodCl8fCFwJiZ0LmluZGV4T2YoIiwiKT4tMXx8aC5kaXNhYmxlUVNBKWJyZWFrIGU7dmFyIF89dCx4PWU7aWYoIXApe3ZhciBDPXguZ2V0QXR0cmlidXRlKCJpZCIpLHc9InNsaWNraWRfXyI7eC5zZXRBdHRyaWJ1dGUoImlkIix3KSxfPSIjIit3KyIgIitfLGU9eC5wYXJlbnROb2RlCn10cnl7aWYocylyZXR1cm4gZS5xdWVyeVNlbGVjdG9yKF8pfHxudWxsO2c9ZS5xdWVyeVNlbGVjdG9yQWxsKF8pfWNhdGNoKGspe29bdF09MTticmVhayBlfWZpbmFsbHl7cHx8KEM/eC5zZXRBdHRyaWJ1dGUoImlkIixDKTp4LnJlbW92ZUF0dHJpYnV0ZSgiaWQiKSxlPXgpfWlmKHRoaXMuc3RhclNlbGVjdHNDbG9zZWRRU0EpZm9yKGM9MDttPWdbYysrXTspIShtLm5vZGVOYW1lPiJAIil8fGQmJnVbdGhpcy5nZXRVSUQobSldfHxhLnB1c2gobSk7ZWxzZSBmb3IoYz0wO209Z1tjKytdOylkJiZ1W3RoaXMuZ2V0VUlEKG0pXXx8YS5wdXNoKG0pO3JldHVybiBkJiZ0aGlzLnNvcnQoYSksYX1pZihsPXRoaXMuU2xpY2sucGFyc2UodCksIWwubGVuZ3RoKXJldHVybiBhfWVsc2V7aWYobnVsbD09dClyZXR1cm4gYTtpZighdC5TbGljaylyZXR1cm4gdGhpcy5jb250YWlucyhlLmRvY3VtZW50RWxlbWVudHx8ZSx0KT8oYT9hLnB1c2godCk6YT10LGEpOmE7bD10fXRoaXMucG9zTlRIPXt9LHRoaXMucG9zTlRITGFzdD17fSx0aGlzLnBvc05USFR5cGU9e30sdGhpcy5wb3NOVEhUeXBlTGFzdD17fSx0aGlzLnB1c2g9IWQmJihzfHwxPT1sLmxlbmd0aCYmMT09bC5leHByZXNzaW9uc1swXS5sZW5ndGgpP3RoaXMucHVzaEFycmF5OnRoaXMucHVzaFVJRCxudWxsPT1hJiYoYT1bXSk7dmFyIFQsRSxTLEEsUCxMLE8sTSxELFIsSSxHLE4sWCxCPWwuZXhwcmVzc2lvbnM7ZTpmb3IoYz0wO0c9QltjXTtjKyspZm9yKFQ9MDtOPUdbVF07VCsrKXtpZihBPSJjb21iaW5hdG9yOiIrTi5jb21iaW5hdG9yLCF0aGlzW0FdKWNvbnRpbnVlIGU7aWYoUD10aGlzLmlzWE1MRG9jdW1lbnQ/Ti50YWc6Ti50YWcudG9VcHBlckNhc2UoKSxMPU4uaWQsTz1OLmNsYXNzTGlzdCxNPU4uY2xhc3NlcyxEPU4uYXR0cmlidXRlcyxSPU4ucHNldWRvcyxYPVQ9PT1HLmxlbmd0aC0xLHRoaXMuYml0VW5pcXVlcz17fSxYPyh0aGlzLnVuaXF1ZXM9dSx0aGlzLmZvdW5kPWEpOih0aGlzLnVuaXF1ZXM9e30sdGhpcy5mb3VuZD1bXSksMD09PVQpe2lmKHRoaXNbQV0oZSxQLEwsTSxELFIsTykscyYmWCYmYS5sZW5ndGgpYnJlYWsgZX1lbHNlIGlmKHMmJlgpe2ZvcihFPTAsUz1JLmxlbmd0aDtTPkU7RSsrKWlmKHRoaXNbQV0oSVtFXSxQLEwsTSxELFIsTyksYS5sZW5ndGgpYnJlYWsgZX1lbHNlIGZvcihFPTAsUz1JLmxlbmd0aDtTPkU7RSsrKXRoaXNbQV0oSVtFXSxQLEwsTSxELFIsTyk7ST10aGlzLmZvdW5kfXJldHVybihkfHxsLmV4cHJlc3Npb25zLmxlbmd0aD4xKSYmdGhpcy5zb3J0KGEpLHM/YVswXXx8bnVsbDphfSxlLnVpZHg9MSxlLnVpZGs9InNsaWNrLXVuaXF1ZWlkIixlLmdldFVJRFhNTD1mdW5jdGlvbihlKXt2YXIgdD1lLmdldEF0dHJpYnV0ZSh0aGlzLnVpZGspO3JldHVybiB0fHwodD10aGlzLnVpZHgrKyxlLnNldEF0dHJpYnV0ZSh0aGlzLnVpZGssdCkpLHR9LGUuZ2V0VUlESFRNTD1mdW5jdGlvbihlKXtyZXR1cm4gZS51bmlxdWVOdW1iZXJ8fChlLnVuaXF1ZU51bWJlcj10aGlzLnVpZHgrKyl9LGUuc29ydD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5kb2N1bWVudFNvcnRlcj8oZS5zb3J0KHRoaXMuZG9jdW1lbnRTb3J0ZXIpLGUpOmV9LGUuY2FjaGVOVEg9e30sZS5tYXRjaE5USD0vXihbKy1dP1xkKik/KFthLXpdKyk/KFsrLV1cZCspPyQvLGUucGFyc2VOVEhBcmd1bWVudD1mdW5jdGlvbihlKXt2YXIgdD1lLm1hdGNoKHRoaXMubWF0Y2hOVEgpO2lmKCF0KXJldHVybiExO3ZhciBpPXRbMl18fCExLG49dFsxXXx8MTsiLSI9PW4mJihuPS0xKTt2YXIgcj0rdFszXXx8MDtyZXR1cm4gdD0ibiI9PWk/e2E6bixiOnJ9OiJvZGQiPT1pP3thOjIsYjoxfToiZXZlbiI9PWk/e2E6MixiOjB9OnthOjAsYjpufSx0aGlzLmNhY2hlTlRIW2VdPXR9LGUuY3JlYXRlTlRIUHNldWRvPWZ1bmN0aW9uKGUsdCxpLG4pe3JldHVybiBmdW5jdGlvbihyLG8pe3ZhciBzPXRoaXMuZ2V0VUlEKHIpO2lmKCF0aGlzW2ldW3NdKXt2YXIgYT1yLnBhcmVudE5vZGU7aWYoIWEpcmV0dXJuITE7dmFyIGw9YVtlXSxjPTE7aWYobil7dmFyIHU9ci5ub2RlTmFtZTtkbyBsLm5vZGVOYW1lPT11JiYodGhpc1tpXVt0aGlzLmdldFVJRChsKV09YysrKTt3aGlsZShsPWxbdF0pfWVsc2UgZG8gMT09bC5ub2RlVHlwZSYmKHRoaXNbaV1bdGhpcy5nZXRVSUQobCldPWMrKyk7d2hpbGUobD1sW3RdKX1vPW98fCJuIjt2YXIgaD10aGlzLmNhY2hlTlRIW29dfHx0aGlzLnBhcnNlTlRIQXJndW1lbnQobyk7aWYoIWgpcmV0dXJuITE7dmFyIGQ9aC5hLHA9aC5iLGY9dGhpc1tpXVtzXTtpZigwPT1kKXJldHVybiBwPT1mO2lmKGQ+MCl7aWYocD5mKXJldHVybiExfWVsc2UgaWYoZj5wKXJldHVybiExO3JldHVybiAwPT0oZi1wKSVkfX0sZS5wdXNoQXJyYXk9ZnVuY3Rpb24oZSx0LGksbixyLG8pe3RoaXMubWF0Y2hTZWxlY3RvcihlLHQsaSxuLHIsbykmJnRoaXMuZm91bmQucHVzaChlKX0sZS5wdXNoVUlEPWZ1bmN0aW9uKGUsdCxpLG4scixvKXt2YXIgcz10aGlzLmdldFVJRChlKTshdGhpcy51bmlxdWVzW3NdJiZ0aGlzLm1hdGNoU2VsZWN0b3IoZSx0LGksbixyLG8pJiYodGhpcy51bmlxdWVzW3NdPSEwLHRoaXMuZm91bmQucHVzaChlKSl9LGUubWF0Y2hOb2RlPWZ1bmN0aW9uKGUsdCl7aWYodGhpcy5pc0hUTUxEb2N1bWVudCYmdGhpcy5uYXRpdmVNYXRjaGVzU2VsZWN0b3IpdHJ5e3JldHVybiB0aGlzLm5hdGl2ZU1hdGNoZXNTZWxlY3Rvci5jYWxsKGUsdC5yZXBsYWNlKC9cWyhbXj1dKyk9XHMqKFteJyJcXV0rPylccypcXS9nLCdbJDE9IiQyIl0nKSl9Y2F0Y2goaSl7fXZhciBuPXRoaXMuU2xpY2sucGFyc2UodCk7aWYoIW4pcmV0dXJuITA7dmFyIHIsbz1uLmV4cHJlc3Npb25zLHM9MDtmb3Iocj0wO2N1cnJlbnRFeHByZXNzaW9uPW9bcl07cisrKWlmKDE9PWN1cnJlbnRFeHByZXNzaW9uLmxlbmd0aCl7dmFyIGE9Y3VycmVudEV4cHJlc3Npb25bMF07aWYodGhpcy5tYXRjaFNlbGVjdG9yKGUsdGhpcy5pc1hNTERvY3VtZW50P2EudGFnOmEudGFnLnRvVXBwZXJDYXNlKCksYS5pZCxhLmNsYXNzZXMsYS5hdHRyaWJ1dGVzLGEucHNldWRvcykpcmV0dXJuITA7cysrfWlmKHM9PW4ubGVuZ3RoKXJldHVybiExO3ZhciBsLGM9dGhpcy5zZWFyY2godGhpcy5kb2N1bWVudCxuKTtmb3Iocj0wO2w9Y1tyKytdOylpZihsPT09ZSlyZXR1cm4hMDtyZXR1cm4hMX0sZS5tYXRjaFBzZXVkbz1mdW5jdGlvbihlLHQsaSl7dmFyIG49InBzZXVkbzoiK3Q7aWYodGhpc1tuXSlyZXR1cm4gdGhpc1tuXShlLGkpO3ZhciByPXRoaXMuZ2V0QXR0cmlidXRlKGUsdCk7cmV0dXJuIGk/aT09cjohIXJ9LGUubWF0Y2hTZWxlY3Rvcj1mdW5jdGlvbihlLHQsaSxuLHIsbyl7aWYodCl7dmFyIHM9dGhpcy5pc1hNTERvY3VtZW50P2Uubm9kZU5hbWU6ZS5ub2RlTmFtZS50b1VwcGVyQ2FzZSgpO2lmKCIqIj09dCl7aWYoIkAiPnMpcmV0dXJuITF9ZWxzZSBpZihzIT10KXJldHVybiExfWlmKGkmJmUuZ2V0QXR0cmlidXRlKCJpZCIpIT1pKXJldHVybiExO3ZhciBhLGwsYztpZihuKWZvcihhPW4ubGVuZ3RoO2EtLTspaWYoYz10aGlzLmdldEF0dHJpYnV0ZShlLCJjbGFzcyIpLCFjfHwhblthXS5yZWdleHAudGVzdChjKSlyZXR1cm4hMTtpZihyKWZvcihhPXIubGVuZ3RoO2EtLTspaWYobD1yW2FdLGwub3BlcmF0b3I/IWwudGVzdCh0aGlzLmdldEF0dHJpYnV0ZShlLGwua2V5KSk6IXRoaXMuaGFzQXR0cmlidXRlKGUsbC5rZXkpKXJldHVybiExO2lmKG8pZm9yKGE9by5sZW5ndGg7YS0tOylpZihsPW9bYV0sIXRoaXMubWF0Y2hQc2V1ZG8oZSxsLmtleSxsLnZhbHVlKSlyZXR1cm4hMTtyZXR1cm4hMH07dmFyIHM9eyIgIjpmdW5jdGlvbihlLHQsaSxuLHIsbyxzKXt2YXIgYSxsLGM7aWYodGhpcy5pc0hUTUxEb2N1bWVudCl7ZTppZihpKXtpZihsPXRoaXMuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaSksIWwmJmUuYWxsfHx0aGlzLmlkR2V0c05hbWUmJmwmJmwuZ2V0QXR0cmlidXRlTm9kZSgiaWQiKS5ub2RlVmFsdWUhPWkpe2lmKGM9ZS5hbGxbaV0sIWMpcmV0dXJuO2ZvcihjWzBdfHwoYz1bY10pLGE9MDtsPWNbYSsrXTspe3ZhciB1PWwuZ2V0QXR0cmlidXRlTm9kZSgiaWQiKTtpZih1JiZ1Lm5vZGVWYWx1ZT09aSl7dGhpcy5wdXNoKGwsdCxudWxsLG4scixvKTticmVha319cmV0dXJufWlmKCFsKXtpZih0aGlzLmNvbnRhaW5zKHRoaXMucm9vdCxlKSlyZXR1cm47YnJlYWsgZX1pZih0aGlzLmRvY3VtZW50IT09ZSYmIXRoaXMuY29udGFpbnMoZSxsKSlyZXR1cm47cmV0dXJuIHRoaXMucHVzaChsLHQsbnVsbCxuLHIsbyksdm9pZCAwfWU6aWYobiYmZS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lJiYhdGhpcy5icm9rZW5HRUJDTil7aWYoYz1lLmdldEVsZW1lbnRzQnlDbGFzc05hbWUocy5qb2luKCIgIikpLCFjfHwhYy5sZW5ndGgpYnJlYWsgZTtmb3IoYT0wO2w9Y1thKytdOyl0aGlzLnB1c2gobCx0LGksbnVsbCxyLG8pO3JldHVybn19aWYoYz1lLmdldEVsZW1lbnRzQnlUYWdOYW1lKHQpLGMmJmMubGVuZ3RoKWZvcih0aGlzLmJyb2tlblN0YXJHRUJUTnx8KHQ9bnVsbCksYT0wO2w9Y1thKytdOyl0aGlzLnB1c2gobCx0LGksbixyLG8pfSwiPiI6ZnVuY3Rpb24oZSx0LGksbixyLG8pe2lmKGU9ZS5maXJzdENoaWxkKWRvIDE9PWUubm9kZVR5cGUmJnRoaXMucHVzaChlLHQsaSxuLHIsbyk7d2hpbGUoZT1lLm5leHRTaWJsaW5nKX0sIisiOmZ1bmN0aW9uKGUsdCxpLG4scixvKXtmb3IoO2U9ZS5uZXh0U2libGluZzspaWYoMT09ZS5ub2RlVHlwZSl7dGhpcy5wdXNoKGUsdCxpLG4scixvKTticmVha319LCJeIjpmdW5jdGlvbihlLHQsaSxuLHIsbyl7ZT1lLmZpcnN0Q2hpbGQsZSYmKDE9PWUubm9kZVR5cGU/dGhpcy5wdXNoKGUsdCxpLG4scixvKTp0aGlzWyJjb21iaW5hdG9yOisiXShlLHQsaSxuLHIsbykpfSwifiI6ZnVuY3Rpb24oZSx0LGksbixyLG8pe2Zvcig7ZT1lLm5leHRTaWJsaW5nOylpZigxPT1lLm5vZGVUeXBlKXt2YXIgcz10aGlzLmdldFVJRChlKTtpZih0aGlzLmJpdFVuaXF1ZXNbc10pYnJlYWs7dGhpcy5iaXRVbmlxdWVzW3NdPSEwLHRoaXMucHVzaChlLHQsaSxuLHIsbyl9fSwiKysiOmZ1bmN0aW9uKGUsdCxpLG4scixvKXt0aGlzWyJjb21iaW5hdG9yOisiXShlLHQsaSxuLHIsbyksdGhpc1siY29tYmluYXRvcjohKyJdKGUsdCxpLG4scixvKX0sIn5+IjpmdW5jdGlvbihlLHQsaSxuLHIsbyl7dGhpc1siY29tYmluYXRvcjp+Il0oZSx0LGksbixyLG8pLHRoaXNbImNvbWJpbmF0b3I6IX4iXShlLHQsaSxuLHIsbyl9LCIhIjpmdW5jdGlvbihlLHQsaSxuLHIsbyl7Zm9yKDtlPWUucGFyZW50Tm9kZTspZSE9PXRoaXMuZG9jdW1lbnQmJnRoaXMucHVzaChlLHQsaSxuLHIsbyl9LCIhPiI6ZnVuY3Rpb24oZSx0LGksbixyLG8pe2U9ZS5wYXJlbnROb2RlLGUhPT10aGlzLmRvY3VtZW50JiZ0aGlzLnB1c2goZSx0LGksbixyLG8pfSwiISsiOmZ1bmN0aW9uKGUsdCxpLG4scixvKXtmb3IoO2U9ZS5wcmV2aW91c1NpYmxpbmc7KWlmKDE9PWUubm9kZVR5cGUpe3RoaXMucHVzaChlLHQsaSxuLHIsbyk7YnJlYWt9fSwiIV4iOmZ1bmN0aW9uKGUsdCxpLG4scixvKXtlPWUubGFzdENoaWxkLGUmJigxPT1lLm5vZGVUeXBlP3RoaXMucHVzaChlLHQsaSxuLHIsbyk6dGhpc1siY29tYmluYXRvcjohKyJdKGUsdCxpLG4scixvKSl9LCIhfiI6ZnVuY3Rpb24oZSx0LGksbixyLG8pe2Zvcig7ZT1lLnByZXZpb3VzU2libGluZzspaWYoMT09ZS5ub2RlVHlwZSl7dmFyIHM9dGhpcy5nZXRVSUQoZSk7aWYodGhpcy5iaXRVbmlxdWVzW3NdKWJyZWFrO3RoaXMuYml0VW5pcXVlc1tzXT0hMCx0aGlzLnB1c2goZSx0LGksbixyLG8pfX19O2Zvcih2YXIgYSBpbiBzKWVbImNvbWJpbmF0b3I6IithXT1zW2FdO3ZhciBsPXtlbXB0eTpmdW5jdGlvbihlKXt2YXIgdD1lLmZpcnN0Q2hpbGQ7cmV0dXJuISh0JiYxPT10Lm5vZGVUeXBlfHwoZS5pbm5lclRleHR8fGUudGV4dENvbnRlbnR8fCIiKS5sZW5ndGgpfSxub3Q6ZnVuY3Rpb24oZSx0KXtyZXR1cm4hdGhpcy5tYXRjaE5vZGUoZSx0KX0sY29udGFpbnM6ZnVuY3Rpb24oZSx0KXtyZXR1cm4oZS5pbm5lclRleHR8fGUudGV4dENvbnRlbnR8fCIiKS5pbmRleE9mKHQpPi0xfSwiZmlyc3QtY2hpbGQiOmZ1bmN0aW9uKGUpe2Zvcig7ZT1lLnByZXZpb3VzU2libGluZzspaWYoMT09ZS5ub2RlVHlwZSlyZXR1cm4hMTtyZXR1cm4hMH0sImxhc3QtY2hpbGQiOmZ1bmN0aW9uKGUpe2Zvcig7ZT1lLm5leHRTaWJsaW5nOylpZigxPT1lLm5vZGVUeXBlKXJldHVybiExO3JldHVybiEwfSwib25seS1jaGlsZCI6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PWU7dD10LnByZXZpb3VzU2libGluZzspaWYoMT09dC5ub2RlVHlwZSlyZXR1cm4hMTtmb3IodmFyIGk9ZTtpPWkubmV4dFNpYmxpbmc7KWlmKDE9PWkubm9kZVR5cGUpcmV0dXJuITE7cmV0dXJuITB9LCJudGgtY2hpbGQiOmUuY3JlYXRlTlRIUHNldWRvKCJmaXJzdENoaWxkIiwibmV4dFNpYmxpbmciLCJwb3NOVEgiKSwibnRoLWxhc3QtY2hpbGQiOmUuY3JlYXRlTlRIUHNldWRvKCJsYXN0Q2hpbGQiLCJwcmV2aW91c1NpYmxpbmciLCJwb3NOVEhMYXN0IiksIm50aC1vZi10eXBlIjplLmNyZWF0ZU5USFBzZXVkbygiZmlyc3RDaGlsZCIsIm5leHRTaWJsaW5nIiwicG9zTlRIVHlwZSIsITApLCJudGgtbGFzdC1vZi10eXBlIjplLmNyZWF0ZU5USFBzZXVkbygibGFzdENoaWxkIiwicHJldmlvdXNTaWJsaW5nIiwicG9zTlRIVHlwZUxhc3QiLCEwKSxpbmRleDpmdW5jdGlvbihlLHQpe3JldHVybiB0aGlzWyJwc2V1ZG86bnRoLWNoaWxkIl0oZSwiIisodCsxKSl9LGV2ZW46ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXNbInBzZXVkbzpudGgtY2hpbGQiXShlLCIybiIpfSxvZGQ6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXNbInBzZXVkbzpudGgtY2hpbGQiXShlLCIybisxIil9LCJmaXJzdC1vZi10eXBlIjpmdW5jdGlvbihlKXtmb3IodmFyIHQ9ZS5ub2RlTmFtZTtlPWUucHJldmlvdXNTaWJsaW5nOylpZihlLm5vZGVOYW1lPT10KXJldHVybiExO3JldHVybiEwfSwibGFzdC1vZi10eXBlIjpmdW5jdGlvbihlKXtmb3IodmFyIHQ9ZS5ub2RlTmFtZTtlPWUubmV4dFNpYmxpbmc7KWlmKGUubm9kZU5hbWU9PXQpcmV0dXJuITE7cmV0dXJuITB9LCJvbmx5LW9mLXR5cGUiOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1lLGk9ZS5ub2RlTmFtZTt0PXQucHJldmlvdXNTaWJsaW5nOylpZih0Lm5vZGVOYW1lPT1pKXJldHVybiExO2Zvcih2YXIgbj1lO249bi5uZXh0U2libGluZzspaWYobi5ub2RlTmFtZT09aSlyZXR1cm4hMTtyZXR1cm4hMH0sZW5hYmxlZDpmdW5jdGlvbihlKXtyZXR1cm4hZS5kaXNhYmxlZH0sZGlzYWJsZWQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuZGlzYWJsZWR9LGNoZWNrZWQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuY2hlY2tlZHx8ZS5zZWxlY3RlZH0sZm9jdXM6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuaXNIVE1MRG9jdW1lbnQmJnRoaXMuZG9jdW1lbnQuYWN0aXZlRWxlbWVudD09PWUmJihlLmhyZWZ8fGUudHlwZXx8dGhpcy5oYXNBdHRyaWJ1dGUoZSwidGFiaW5kZXgiKSl9LHJvb3Q6ZnVuY3Rpb24oZSl7cmV0dXJuIGU9PT10aGlzLnJvb3R9LHNlbGVjdGVkOmZ1bmN0aW9uKGUpe3JldHVybiBlLnNlbGVjdGVkfX07Zm9yKHZhciBjIGluIGwpZVsicHNldWRvOiIrY109bFtjXTt2YXIgdT1lLmF0dHJpYnV0ZUdldHRlcnM9eyJmb3IiOmZ1bmN0aW9uKCl7cmV0dXJuImh0bWxGb3IiaW4gdGhpcz90aGlzLmh0bWxGb3I6dGhpcy5nZXRBdHRyaWJ1dGUoImZvciIpfSxocmVmOmZ1bmN0aW9uKCl7cmV0dXJuImhyZWYiaW4gdGhpcz90aGlzLmdldEF0dHJpYnV0ZSgiaHJlZiIsMik6dGhpcy5nZXRBdHRyaWJ1dGUoImhyZWYiKX0sc3R5bGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdHlsZT90aGlzLnN0eWxlLmNzc1RleHQ6dGhpcy5nZXRBdHRyaWJ1dGUoInN0eWxlIil9LHRhYmluZGV4OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5nZXRBdHRyaWJ1dGVOb2RlKCJ0YWJpbmRleCIpO3JldHVybiBlJiZlLnNwZWNpZmllZD9lLm5vZGVWYWx1ZTpudWxsfSx0eXBlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0QXR0cmlidXRlKCJ0eXBlIil9LG1heGxlbmd0aDpmdW5jdGlvbigpe3ZhciBlPXRoaXMuZ2V0QXR0cmlidXRlTm9kZSgibWF4TGVuZ3RoIik7cmV0dXJuIGUmJmUuc3BlY2lmaWVkP2Uubm9kZVZhbHVlOm51bGx9fTt1Lk1BWExFTkdUSD11Lm1heExlbmd0aD11Lm1heGxlbmd0aDt2YXIgaD1lLlNsaWNrPXRoaXMuU2xpY2t8fHt9O2gudmVyc2lvbj0iMS4xLjciLGguc2VhcmNoPWZ1bmN0aW9uKHQsaSxuKXtyZXR1cm4gZS5zZWFyY2godCxpLG4pfSxoLmZpbmQ9ZnVuY3Rpb24odCxpKXtyZXR1cm4gZS5zZWFyY2godCxpLG51bGwsITApfSxoLmNvbnRhaW5zPWZ1bmN0aW9uKHQsaSl7cmV0dXJuIGUuc2V0RG9jdW1lbnQodCksZS5jb250YWlucyh0LGkpfSxoLmdldEF0dHJpYnV0ZT1mdW5jdGlvbih0LGkpe3JldHVybiBlLnNldERvY3VtZW50KHQpLGUuZ2V0QXR0cmlidXRlKHQsaSl9LGguaGFzQXR0cmlidXRlPWZ1bmN0aW9uKHQsaSl7cmV0dXJuIGUuc2V0RG9jdW1lbnQodCksZS5oYXNBdHRyaWJ1dGUodCxpKX0saC5tYXRjaD1mdW5jdGlvbih0LGkpe3JldHVybiB0JiZpP2kmJmkhPT10PyhlLnNldERvY3VtZW50KHQpLGUubWF0Y2hOb2RlKHQsaSkpOiEwOiExfSxoLmRlZmluZUF0dHJpYnV0ZUdldHRlcj1mdW5jdGlvbih0LGkpe3JldHVybiBlLmF0dHJpYnV0ZUdldHRlcnNbdF09aSx0aGlzfSxoLmxvb2t1cEF0dHJpYnV0ZUdldHRlcj1mdW5jdGlvbih0KXtyZXR1cm4gZS5hdHRyaWJ1dGVHZXR0ZXJzW3RdfSxoLmRlZmluZVBzZXVkbz1mdW5jdGlvbih0LGkpe3JldHVybiBlWyJwc2V1ZG86Iit0XT1mdW5jdGlvbihlLHQpe3JldHVybiBpLmNhbGwoZSx0KX0sdGhpc30saC5sb29rdXBQc2V1ZG89ZnVuY3Rpb24odCl7dmFyIGk9ZVsicHNldWRvOiIrdF07cmV0dXJuIGk/ZnVuY3Rpb24oZSl7cmV0dXJuIGkuY2FsbCh0aGlzLGUpfTpudWxsfSxoLm92ZXJyaWRlPWZ1bmN0aW9uKHQsaSl7cmV0dXJuIGUub3ZlcnJpZGUodCxpKSx0aGlzfSxoLmlzWE1MPWUuaXNYTUwsaC51aWRPZj1mdW5jdGlvbih0KXtyZXR1cm4gZS5nZXRVSURIVE1MKHQpfSx0aGlzLlNsaWNrfHwodGhpcy5TbGljaz1oKX0uYXBwbHkoInVuZGVmaW5lZCIhPXR5cGVvZiBleHBvcnRzP2V4cG9ydHM6dGhpcyk7dmFyIEVsZW1lbnQ9ZnVuY3Rpb24oZSx0KXt2YXIgaT1FbGVtZW50LkNvbnN0cnVjdG9yc1tlXTtpZihpKXJldHVybiBpKHQpO2lmKCJzdHJpbmciIT10eXBlb2YgZSlyZXR1cm4gZG9jdW1lbnQuaWQoZSkuc2V0KHQpO2lmKHR8fCh0PXt9KSwhL15bXHctXSskLy50ZXN0KGUpKXt2YXIgbj1TbGljay5wYXJzZShlKS5leHByZXNzaW9uc1swXVswXTtlPSIqIj09bi50YWc/ImRpdiI6bi50YWcsbi5pZCYmbnVsbD09dC5pZCYmKHQuaWQ9bi5pZCk7dmFyIHI9bi5hdHRyaWJ1dGVzO2lmKHIpZm9yKHZhciBvLHM9MCxhPXIubGVuZ3RoO2E+cztzKyspbz1yW3NdLG51bGw9PXRbby5rZXldJiYobnVsbCE9by52YWx1ZSYmIj0iPT1vLm9wZXJhdG9yP3Rbby5rZXldPW8udmFsdWU6by52YWx1ZXx8by5vcGVyYXRvcnx8KHRbby5rZXldPSEwKSk7bi5jbGFzc0xpc3QmJm51bGw9PXRbImNsYXNzIl0mJih0WyJjbGFzcyJdPW4uY2xhc3NMaXN0LmpvaW4oIiAiKSl9cmV0dXJuIGRvY3VtZW50Lm5ld0VsZW1lbnQoZSx0KX07QnJvd3Nlci5FbGVtZW50JiYoRWxlbWVudC5wcm90b3R5cGU9QnJvd3Nlci5FbGVtZW50LnByb3RvdHlwZSxFbGVtZW50LnByb3RvdHlwZS5fZmlyZUV2ZW50PWZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0LGkpe3JldHVybiBlLmNhbGwodGhpcyx0LGkpfX0oRWxlbWVudC5wcm90b3R5cGUuZmlyZUV2ZW50KSksbmV3IFR5cGUoIkVsZW1lbnQiLEVsZW1lbnQpLm1pcnJvcihmdW5jdGlvbihlKXtpZighQXJyYXkucHJvdG90eXBlW2VdKXt2YXIgdD17fTt0W2VdPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PVtdLGk9YXJndW1lbnRzLG49ITAscj0wLG89dGhpcy5sZW5ndGg7bz5yO3IrKyl7dmFyIHM9dGhpc1tyXSxhPXRbcl09c1tlXS5hcHBseShzLGkpO249biYmImVsZW1lbnQiPT10eXBlT2YoYSl9cmV0dXJuIG4/bmV3IEVsZW1lbnRzKHQpOnR9LEVsZW1lbnRzLmltcGxlbWVudCh0KX19KSxCcm93c2VyLkVsZW1lbnR8fChFbGVtZW50LnBhcmVudD1PYmplY3QsRWxlbWVudC5Qcm90b3R5cGU9eyRjb25zdHJ1Y3RvcjpFbGVtZW50LCRmYW1pbHk6RnVuY3Rpb24uZnJvbSgiZWxlbWVudCIpLmhpZGUoKX0sRWxlbWVudC5taXJyb3IoZnVuY3Rpb24oZSx0KXtFbGVtZW50LlByb3RvdHlwZVtlXT10fSkpLEVsZW1lbnQuQ29uc3RydWN0b3JzPXt9LEVsZW1lbnQuQ29uc3RydWN0b3JzPW5ldyBIYXNoO3ZhciBJRnJhbWU9bmV3IFR5cGUoIklGcmFtZSIsZnVuY3Rpb24oKXt2YXIgZSx0PUFycmF5LmxpbmsoYXJndW1lbnRzLHtwcm9wZXJ0aWVzOlR5cGUuaXNPYmplY3QsaWZyYW1lOmZ1bmN0aW9uKGUpe3JldHVybiBudWxsIT1lfX0pLGk9dC5wcm9wZXJ0aWVzfHx7fTt0LmlmcmFtZSYmKGU9ZG9jdW1lbnQuaWQodC5pZnJhbWUpKTt2YXIgbj1pLm9ubG9hZHx8ZnVuY3Rpb24oKXt9O2RlbGV0ZSBpLm9ubG9hZCxpLmlkPWkubmFtZT1baS5pZCxpLm5hbWUsZT9lLmlkfHxlLm5hbWU6IklGcmFtZV8iK1N0cmluZy51bmlxdWVJRCgpXS5waWNrKCksZT1uZXcgRWxlbWVudChlfHwiaWZyYW1lIixpKTt2YXIgcj1mdW5jdGlvbigpe24uY2FsbChlLmNvbnRlbnRXaW5kb3cpfTtyZXR1cm4gd2luZG93LmZyYW1lc1tpLmlkXT9yKCk6ZS5hZGRMaXN0ZW5lcigibG9hZCIsciksZX0pLEVsZW1lbnRzPXRoaXMuRWxlbWVudHM9ZnVuY3Rpb24oZSl7aWYoZSYmZS5sZW5ndGgpZm9yKHZhciB0LGk9e30sbj0wO3Q9ZVtuKytdOyl7dmFyIHI9U2xpY2sudWlkT2YodCk7aVtyXXx8KGlbcl09ITAsdGhpcy5wdXNoKHQpKX19O0VsZW1lbnRzLnByb3RvdHlwZT17bGVuZ3RoOjB9LEVsZW1lbnRzLnBhcmVudD1BcnJheSxuZXcgVHlwZSgiRWxlbWVudHMiLEVsZW1lbnRzKS5pbXBsZW1lbnQoe2ZpbHRlcjpmdW5jdGlvbihlLHQpe3JldHVybiBlP25ldyBFbGVtZW50cyhBcnJheS5maWx0ZXIodGhpcywic3RyaW5nIj09dHlwZU9mKGUpP2Z1bmN0aW9uKHQpe3JldHVybiB0Lm1hdGNoKGUpfTplLHQpKTp0aGlzfS5wcm90ZWN0KCkscHVzaDpmdW5jdGlvbigpe2Zvcih2YXIgZT10aGlzLmxlbmd0aCx0PTAsaT1hcmd1bWVudHMubGVuZ3RoO2k+dDt0Kyspe3ZhciBuPWRvY3VtZW50LmlkKGFyZ3VtZW50c1t0XSk7biYmKHRoaXNbZSsrXT1uKX1yZXR1cm4gdGhpcy5sZW5ndGg9ZX0ucHJvdGVjdCgpLHVuc2hpZnQ6ZnVuY3Rpb24oKXtmb3IodmFyIGU9W10sdD0wLGk9YXJndW1lbnRzLmxlbmd0aDtpPnQ7dCsrKXt2YXIgbj1kb2N1bWVudC5pZChhcmd1bWVudHNbdF0pO24mJmUucHVzaChuKX1yZXR1cm4gQXJyYXkucHJvdG90eXBlLnVuc2hpZnQuYXBwbHkodGhpcyxlKX0ucHJvdGVjdCgpLGNvbmNhdDpmdW5jdGlvbigpe2Zvcih2YXIgZT1uZXcgRWxlbWVudHModGhpcyksdD0wLGk9YXJndW1lbnRzLmxlbmd0aDtpPnQ7dCsrKXt2YXIgbj1hcmd1bWVudHNbdF07VHlwZS5pc0VudW1lcmFibGUobik/ZS5hcHBlbmQobik6ZS5wdXNoKG4pfXJldHVybiBlfS5wcm90ZWN0KCksYXBwZW5kOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD0wLGk9ZS5sZW5ndGg7aT50O3QrKyl0aGlzLnB1c2goZVt0XSk7cmV0dXJuIHRoaXN9LnByb3RlY3QoKSxlbXB0eTpmdW5jdGlvbigpe2Zvcig7dGhpcy5sZW5ndGg7KWRlbGV0ZSB0aGlzWy0tdGhpcy5sZW5ndGhdO3JldHVybiB0aGlzfS5wcm90ZWN0KCl9KSxFbGVtZW50cy5hbGlhcygiZXh0ZW5kIiwiYXBwZW5kIiksZnVuY3Rpb24oKXt2YXIgZT1BcnJheS5wcm90b3R5cGUuc3BsaWNlLHQ9ezA6MCwxOjEsbGVuZ3RoOjJ9O2UuY2FsbCh0LDEsMSksMT09dFsxXSYmRWxlbWVudHMuaW1wbGVtZW50KCJzcGxpY2UiLGZ1bmN0aW9uKCl7Zm9yKHZhciB0PXRoaXMubGVuZ3RoLGk9ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dD49dGhpcy5sZW5ndGg7KWRlbGV0ZSB0aGlzW3QtLV07cmV0dXJuIGl9LnByb3RlY3QoKSksQXJyYXkuZm9yRWFjaE1ldGhvZChmdW5jdGlvbihlLHQpe0VsZW1lbnRzLmltcGxlbWVudCh0LGUpfSksQXJyYXkubWlycm9yKEVsZW1lbnRzKTt2YXIgaTt0cnl7aT0ieCI9PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIjxpbnB1dCBuYW1lPXg+IikubmFtZX1jYXRjaChuKXt9dmFyIHI9ZnVuY3Rpb24oZSl7cmV0dXJuKCIiK2UpLnJlcGxhY2UoLyYvZywiJmFtcDsiKS5yZXBsYWNlKC8iL2csIiZxdW90OyIpfTtEb2N1bWVudC5pbXBsZW1lbnQoe25ld0VsZW1lbnQ6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdCYmbnVsbCE9dC5jaGVja2VkJiYodC5kZWZhdWx0Q2hlY2tlZD10LmNoZWNrZWQpLGkmJnQmJihlPSI8IitlLHQubmFtZSYmKGUrPScgbmFtZT0iJytyKHQubmFtZSkrJyInKSx0LnR5cGUmJihlKz0nIHR5cGU9Iicrcih0LnR5cGUpKyciJyksZSs9Ij4iLGRlbGV0ZSB0Lm5hbWUsZGVsZXRlIHQudHlwZSksdGhpcy5pZCh0aGlzLmNyZWF0ZUVsZW1lbnQoZSkpLnNldCh0KX19KX0oKSxmdW5jdGlvbigpe1NsaWNrLnVpZE9mKHdpbmRvdyksU2xpY2sudWlkT2YoZG9jdW1lbnQpLERvY3VtZW50LmltcGxlbWVudCh7bmV3VGV4dE5vZGU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuY3JlYXRlVGV4dE5vZGUoZSl9LGdldERvY3VtZW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9LGdldFdpbmRvdzpmdW5jdGlvbigpe3JldHVybiB0aGlzLndpbmRvd30saWQ6ZnVuY3Rpb24oKXt2YXIgZT17c3RyaW5nOmZ1bmN0aW9uKHQsaSxuKXtyZXR1cm4gdD1TbGljay5maW5kKG4sIiMiK3QucmVwbGFjZSgvKFxXKS9nLCJcXCQxIikpLHQ/ZS5lbGVtZW50KHQsaSk6bnVsbH0sZWxlbWVudDpmdW5jdGlvbihlLHQpe2lmKFNsaWNrLnVpZE9mKGUpLCF0JiYhZS4kZmFtaWx5JiYhL14oPzpvYmplY3R8ZW1iZWQpJC9pLnRlc3QoZS50YWdOYW1lKSl7dmFyIGk9ZS5maXJlRXZlbnQ7ZS5fZmlyZUV2ZW50PWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGkoZSx0KX0sT2JqZWN0LmFwcGVuZChlLEVsZW1lbnQuUHJvdG90eXBlKX1yZXR1cm4gZX0sb2JqZWN0OmZ1bmN0aW9uKHQsaSxuKXtyZXR1cm4gdC50b0VsZW1lbnQ/ZS5lbGVtZW50KHQudG9FbGVtZW50KG4pLGkpOm51bGx9fTtyZXR1cm4gZS50ZXh0bm9kZT1lLndoaXRlc3BhY2U9ZS53aW5kb3c9ZS5kb2N1bWVudD1mdW5jdGlvbihlKXtyZXR1cm4gZX0sZnVuY3Rpb24odCxpLG4pe2lmKHQmJnQuJGZhbWlseSYmdC51bmlxdWVOdW1iZXIpcmV0dXJuIHQ7dmFyIHI9dHlwZU9mKHQpO3JldHVybiBlW3JdP2Vbcl0odCxpLG58fGRvY3VtZW50KTpudWxsfX0oKX0pLG51bGw9PXdpbmRvdy4kJiZXaW5kb3cuaW1wbGVtZW50KCIkIixmdW5jdGlvbihlLHQpe3JldHVybiBkb2N1bWVudC5pZChlLHQsdGhpcy5kb2N1bWVudCl9KSxXaW5kb3cuaW1wbGVtZW50KHtnZXREb2N1bWVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRvY3VtZW50fSxnZXRXaW5kb3c6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc319KSxbRG9jdW1lbnQsRWxlbWVudF0uaW52b2tlKCJpbXBsZW1lbnQiLHtnZXRFbGVtZW50czpmdW5jdGlvbihlKXtyZXR1cm4gU2xpY2suc2VhcmNoKHRoaXMsZSxuZXcgRWxlbWVudHMpfSxnZXRFbGVtZW50OmZ1bmN0aW9uKGUpe3JldHVybiBkb2N1bWVudC5pZChTbGljay5maW5kKHRoaXMsZSkpfX0pO3ZhciBlPXtjb250YWluczpmdW5jdGlvbihlKXtyZXR1cm4gU2xpY2suY29udGFpbnModGhpcyxlKX19O2RvY3VtZW50LmNvbnRhaW5zfHxEb2N1bWVudC5pbXBsZW1lbnQoZSksZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2IikuY29udGFpbnN8fEVsZW1lbnQuaW1wbGVtZW50KGUpLEVsZW1lbnQuaW1wbGVtZW50KCJoYXNDaGlsZCIsZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMhPT1lJiZ0aGlzLmNvbnRhaW5zKGUpfSksZnVuY3Rpb24oZSx0LGkpe3RoaXMuU2VsZWN0b3JzPXt9O3ZhciBuPXRoaXMuU2VsZWN0b3JzLlBzZXVkbz1uZXcgSGFzaCxyPWZ1bmN0aW9uKCl7Zm9yKHZhciBlIGluIG4pbi5oYXNPd25Qcm9wZXJ0eShlKSYmKFNsaWNrLmRlZmluZVBzZXVkbyhlLG5bZV0pLGRlbGV0ZSBuW2VdKX07U2xpY2suc2VhcmNoPWZ1bmN0aW9uKHQsaSxuKXtyZXR1cm4gcigpLGUuY2FsbCh0aGlzLHQsaSxuKX0sU2xpY2suZmluZD1mdW5jdGlvbihlLGkpe3JldHVybiByKCksdC5jYWxsKHRoaXMsZSxpKX0sU2xpY2subWF0Y2g9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gcigpLGkuY2FsbCh0aGlzLGUsdCl9fShTbGljay5zZWFyY2gsU2xpY2suZmluZCxTbGljay5tYXRjaCk7dmFyIHQ9ZnVuY3Rpb24oZSx0KXtpZighZSlyZXR1cm4gdDtlPU9iamVjdC5jbG9uZShTbGljay5wYXJzZShlKSk7Zm9yKHZhciBpPWUuZXhwcmVzc2lvbnMsbj1pLmxlbmd0aDtuLS07KWlbbl1bMF0uY29tYmluYXRvcj10O3JldHVybiBlfTtPYmplY3QuZm9yRWFjaCh7Z2V0TmV4dDoifiIsZ2V0UHJldmlvdXM6IiF+IixnZXRQYXJlbnQ6IiEifSxmdW5jdGlvbihlLGkpe0VsZW1lbnQuaW1wbGVtZW50KGksZnVuY3Rpb24oaSl7cmV0dXJuIHRoaXMuZ2V0RWxlbWVudCh0KGksZSkpfSl9KSxPYmplY3QuZm9yRWFjaCh7Z2V0QWxsTmV4dDoifiIsZ2V0QWxsUHJldmlvdXM6IiF+IixnZXRTaWJsaW5nczoifn4iLGdldENoaWxkcmVuOiI+IixnZXRQYXJlbnRzOiIhIn0sZnVuY3Rpb24oZSxpKXtFbGVtZW50LmltcGxlbWVudChpLGZ1bmN0aW9uKGkpe3JldHVybiB0aGlzLmdldEVsZW1lbnRzKHQoaSxlKSl9KX0pLEVsZW1lbnQuaW1wbGVtZW50KHtnZXRGaXJzdDpmdW5jdGlvbihlKXtyZXR1cm4gZG9jdW1lbnQuaWQoU2xpY2suc2VhcmNoKHRoaXMsdChlLCI+IikpWzBdKX0sZ2V0TGFzdDpmdW5jdGlvbihlKXtyZXR1cm4gZG9jdW1lbnQuaWQoU2xpY2suc2VhcmNoKHRoaXMsdChlLCI+IikpLmdldExhc3QoKSl9LGdldFdpbmRvdzpmdW5jdGlvbigpe3JldHVybiB0aGlzLm93bmVyRG9jdW1lbnQud2luZG93fSxnZXREb2N1bWVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLm93bmVyRG9jdW1lbnR9LGdldEVsZW1lbnRCeUlkOmZ1bmN0aW9uKGUpe3JldHVybiBkb2N1bWVudC5pZChTbGljay5maW5kKHRoaXMsIiMiKygiIitlKS5yZXBsYWNlKC8oXFcpL2csIlxcJDEiKSkpfSxtYXRjaDpmdW5jdGlvbihlKXtyZXR1cm4hZXx8U2xpY2subWF0Y2godGhpcyxlKX19KSxudWxsPT13aW5kb3cuJCQmJldpbmRvdy5pbXBsZW1lbnQoIiQkIixmdW5jdGlvbihlKXt2YXIgdD1uZXcgRWxlbWVudHM7aWYoMT09YXJndW1lbnRzLmxlbmd0aCYmInN0cmluZyI9PXR5cGVvZiBlKXJldHVybiBTbGljay5zZWFyY2godGhpcy5kb2N1bWVudCxlLHQpO2Zvcih2YXIgaT1BcnJheS5mbGF0dGVuKGFyZ3VtZW50cyksbj0wLHI9aS5sZW5ndGg7cj5uO24rKyl7dmFyIG89aVtuXTtzd2l0Y2godHlwZU9mKG8pKXtjYXNlImVsZW1lbnQiOnQucHVzaChvKTticmVhaztjYXNlInN0cmluZyI6U2xpY2suc2VhcmNoKHRoaXMuZG9jdW1lbnQsbyx0KX19cmV0dXJuIHR9KSxudWxsPT13aW5kb3cuJCQmJldpbmRvdy5pbXBsZW1lbnQoIiQkIixmdW5jdGlvbihlKXtpZigxPT1hcmd1bWVudHMubGVuZ3RoKXtpZigic3RyaW5nIj09dHlwZW9mIGUpcmV0dXJuIFNsaWNrLnNlYXJjaCh0aGlzLmRvY3VtZW50LGUsbmV3IEVsZW1lbnRzKTtpZihUeXBlLmlzRW51bWVyYWJsZShlKSlyZXR1cm4gbmV3IEVsZW1lbnRzKGUpfXJldHVybiBuZXcgRWxlbWVudHMoYXJndW1lbnRzKX0pO3ZhciBpPXtiZWZvcmU6ZnVuY3Rpb24oZSx0KXt2YXIgaT10LnBhcmVudE5vZGU7aSYmaS5pbnNlcnRCZWZvcmUoZSx0KX0sYWZ0ZXI6ZnVuY3Rpb24oZSx0KXt2YXIgaT10LnBhcmVudE5vZGU7aSYmaS5pbnNlcnRCZWZvcmUoZSx0Lm5leHRTaWJsaW5nKX0sYm90dG9tOmZ1bmN0aW9uKGUsdCl7dC5hcHBlbmRDaGlsZChlKX0sdG9wOmZ1bmN0aW9uKGUsdCl7dC5pbnNlcnRCZWZvcmUoZSx0LmZpcnN0Q2hpbGQpfX07aS5pbnNpZGU9aS5ib3R0b20sT2JqZWN0LmVhY2goaSxmdW5jdGlvbihlLHQpe3Q9dC5jYXBpdGFsaXplKCk7dmFyIGk9e307aVsiaW5qZWN0Iit0XT1mdW5jdGlvbih0KXtyZXR1cm4gZSh0aGlzLGRvY3VtZW50LmlkKHQsITApKSx0aGlzfSxpWyJncmFiIit0XT1mdW5jdGlvbih0KXtyZXR1cm4gZShkb2N1bWVudC5pZCh0LCEwKSx0aGlzKSx0aGlzfSxFbGVtZW50LmltcGxlbWVudChpKX0pO3ZhciBuPXt9LHI9e30sbz17fTtBcnJheS5mb3JFYWNoKFsidHlwZSIsInZhbHVlIiwiZGVmYXVsdFZhbHVlIiwiYWNjZXNzS2V5IiwiY2VsbFBhZGRpbmciLCJjZWxsU3BhY2luZyIsImNvbFNwYW4iLCJmcmFtZUJvcmRlciIsInJvd1NwYW4iLCJ0YWJJbmRleCIsInVzZU1hcCJdLGZ1bmN0aW9uKGUpe29bZS50b0xvd2VyQ2FzZSgpXT1lfSksby5odG1sPSJpbm5lckhUTUwiLG8udGV4dD1udWxsPT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKS50ZXh0Q29udGVudD8iaW5uZXJUZXh0IjoidGV4dENvbnRlbnQiLE9iamVjdC5mb3JFYWNoKG8sZnVuY3Rpb24oZSx0KXtyW3RdPWZ1bmN0aW9uKHQsaSl7dFtlXT1pfSxuW3RdPWZ1bmN0aW9uKHQpe3JldHVybiB0W2VdfX0pO3ZhciBzPVsiY29tcGFjdCIsIm5vd3JhcCIsImlzbWFwIiwiZGVjbGFyZSIsIm5vc2hhZGUiLCJjaGVja2VkIiwiZGlzYWJsZWQiLCJyZWFkT25seSIsIm11bHRpcGxlIiwic2VsZWN0ZWQiLCJub3Jlc2l6ZSIsImRlZmVyIiwiZGVmYXVsdENoZWNrZWQiLCJhdXRvZm9jdXMiLCJjb250cm9scyIsImF1dG9wbGF5IiwibG9vcCJdLGE9e307QXJyYXkuZm9yRWFjaChzLGZ1bmN0aW9uKGUpe3ZhciB0PWUudG9Mb3dlckNhc2UoKTthW3RdPWUsclt0XT1mdW5jdGlvbih0LGkpe3RbZV09ISFpfSxuW3RdPWZ1bmN0aW9uKHQpe3JldHVybiEhdFtlXX19KSxPYmplY3QuYXBwZW5kKHIseyJjbGFzcyI6ZnVuY3Rpb24oZSx0KXsiY2xhc3NOYW1lImluIGU/ZS5jbGFzc05hbWU9dHx8IiI6ZS5zZXRBdHRyaWJ1dGUoImNsYXNzIix0KX0sImZvciI6ZnVuY3Rpb24oZSx0KXsiaHRtbEZvciJpbiBlP2UuaHRtbEZvcj10OmUuc2V0QXR0cmlidXRlKCJmb3IiLHQpfSxzdHlsZTpmdW5jdGlvbihlLHQpe2Uuc3R5bGU/ZS5zdHlsZS5jc3NUZXh0PXQ6ZS5zZXRBdHRyaWJ1dGUoInN0eWxlIix0KX0sdmFsdWU6ZnVuY3Rpb24oZSx0KXtlLnZhbHVlPW51bGwhPXQ/dDoiIn19KSxuWyJjbGFzcyJdPWZ1bmN0aW9uKGUpe3JldHVybiJjbGFzc05hbWUiaW4gZT9lLmNsYXNzTmFtZXx8bnVsbDplLmdldEF0dHJpYnV0ZSgiY2xhc3MiKX07dmFyIGw9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYnV0dG9uIik7dHJ5e2wudHlwZT0iYnV0dG9uIn1jYXRjaChjKXt9ImJ1dHRvbiIhPWwudHlwZSYmKHIudHlwZT1mdW5jdGlvbihlLHQpe2Uuc2V0QXR0cmlidXRlKCJ0eXBlIix0KX0pLGw9bnVsbDt2YXIgdT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbnB1dCIpO3UudmFsdWU9InQiLHUudHlwZT0ic3VibWl0IiwidCIhPXUudmFsdWUmJihyLnR5cGU9ZnVuY3Rpb24oZSx0KXt2YXIgaT1lLnZhbHVlO2UudHlwZT10LGUudmFsdWU9aX0pLHU9bnVsbDt2YXIgaD1mdW5jdGlvbihlKXtyZXR1cm4gZS5yYW5kb209ImF0dHJpYnV0ZSIsImF0dHJpYnV0ZSI9PWUuZ2V0QXR0cmlidXRlKCJyYW5kb20iKX0oZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2IikpO0VsZW1lbnQuaW1wbGVtZW50KHtzZXRQcm9wZXJ0eTpmdW5jdGlvbihlLHQpe3ZhciBpPXJbZS50b0xvd2VyQ2FzZSgpXTtpZihpKWkodGhpcyx0KTtlbHNle2lmKGgpdmFyIG49dGhpcy5yZXRyaWV2ZSgiJGF0dHJpYnV0ZVdoaXRlTGlzdCIse30pO251bGw9PXQ/KHRoaXMucmVtb3ZlQXR0cmlidXRlKGUpLGgmJmRlbGV0ZSBuW2VdKToodGhpcy5zZXRBdHRyaWJ1dGUoZSwiIit0KSxoJiYobltlXT0hMCkpfXJldHVybiB0aGlzfSxzZXRQcm9wZXJ0aWVzOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdCBpbiBlKXRoaXMuc2V0UHJvcGVydHkodCxlW3RdKTtyZXR1cm4gdGhpc30sZ2V0UHJvcGVydHk6ZnVuY3Rpb24oZSl7dmFyIHQ9bltlLnRvTG93ZXJDYXNlKCldO2lmKHQpcmV0dXJuIHQodGhpcyk7aWYoaCl7dmFyIGk9dGhpcy5nZXRBdHRyaWJ1dGVOb2RlKGUpLHI9dGhpcy5yZXRyaWV2ZSgiJGF0dHJpYnV0ZVdoaXRlTGlzdCIse30pO2lmKCFpKXJldHVybiBudWxsO2lmKGkuZXhwYW5kbyYmIXJbZV0pe3ZhciBvPXRoaXMub3V0ZXJIVE1MO2lmKDA+by5zdWJzdHIoMCxvLnNlYXJjaCgvXC8/WyciXT8+KD8hW148XSo8WyciXSkvKSkuaW5kZXhPZihlKSlyZXR1cm4gbnVsbDtyW2VdPSEwfX12YXIgcz1TbGljay5nZXRBdHRyaWJ1dGUodGhpcyxlKTtyZXR1cm4gc3x8U2xpY2suaGFzQXR0cmlidXRlKHRoaXMsZSk/czpudWxsfSxnZXRQcm9wZXJ0aWVzOmZ1bmN0aW9uKCl7dmFyIGU9QXJyYXkuZnJvbShhcmd1bWVudHMpO3JldHVybiBlLm1hcCh0aGlzLmdldFByb3BlcnR5LHRoaXMpLmFzc29jaWF0ZShlKX0scmVtb3ZlUHJvcGVydHk6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuc2V0UHJvcGVydHkoZSxudWxsKX0scmVtb3ZlUHJvcGVydGllczpmdW5jdGlvbigpe3JldHVybiBBcnJheS5lYWNoKGFyZ3VtZW50cyx0aGlzLnJlbW92ZVByb3BlcnR5LHRoaXMpLHRoaXN9LHNldDpmdW5jdGlvbihlLHQpe3ZhciBpPUVsZW1lbnQuUHJvcGVydGllc1tlXTtpJiZpLnNldD9pLnNldC5jYWxsKHRoaXMsdCk6dGhpcy5zZXRQcm9wZXJ0eShlLHQpfS5vdmVybG9hZFNldHRlcigpLGdldDpmdW5jdGlvbihlKXt2YXIgdD1FbGVtZW50LlByb3BlcnRpZXNbZV07cmV0dXJuIHQmJnQuZ2V0P3QuZ2V0LmFwcGx5KHRoaXMpOnRoaXMuZ2V0UHJvcGVydHkoZSl9Lm92ZXJsb2FkR2V0dGVyKCksZXJhc2U6ZnVuY3Rpb24oZSl7dmFyIHQ9RWxlbWVudC5Qcm9wZXJ0aWVzW2VdO3JldHVybiB0JiZ0LmVyYXNlP3QuZXJhc2UuYXBwbHkodGhpcyk6dGhpcy5yZW1vdmVQcm9wZXJ0eShlKSx0aGlzfSxoYXNDbGFzczpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5jbGFzc05hbWUuY2xlYW4oKS5jb250YWlucyhlLCIgIil9LGFkZENsYXNzOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmhhc0NsYXNzKGUpfHwodGhpcy5jbGFzc05hbWU9KHRoaXMuY2xhc3NOYW1lKyIgIitlKS5jbGVhbigpKSx0aGlzfSxyZW1vdmVDbGFzczpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5jbGFzc05hbWU9dGhpcy5jbGFzc05hbWUucmVwbGFjZShSZWdFeHAoIihefFxccykiK2UrIig/Olxcc3wkKSIpLCIkMSIpLHRoaXN9LHRvZ2dsZUNsYXNzOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIG51bGw9PXQmJih0PSF0aGlzLmhhc0NsYXNzKGUpKSx0P3RoaXMuYWRkQ2xhc3MoZSk6dGhpcy5yZW1vdmVDbGFzcyhlKX0sYWRvcHQ6ZnVuY3Rpb24oKXt2YXIgZSx0PXRoaXMsaT1BcnJheS5mbGF0dGVuKGFyZ3VtZW50cyksbj1pLmxlbmd0aDtuPjEmJih0PWU9ZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpKTtmb3IodmFyIHI9MDtuPnI7cisrKXt2YXIgbz1kb2N1bWVudC5pZChpW3JdLCEwKTtvJiZ0LmFwcGVuZENoaWxkKG8pfXJldHVybiBlJiZ0aGlzLmFwcGVuZENoaWxkKGUpLHRoaXN9LGFwcGVuZFRleHQ6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5ncmFiKHRoaXMuZ2V0RG9jdW1lbnQoKS5uZXdUZXh0Tm9kZShlKSx0KX0sZ3JhYjpmdW5jdGlvbihlLHQpe3JldHVybiBpW3R8fCJib3R0b20iXShkb2N1bWVudC5pZChlLCEwKSx0aGlzKSx0aGlzfSxpbmplY3Q6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gaVt0fHwiYm90dG9tIl0odGhpcyxkb2N1bWVudC5pZChlLCEwKSksdGhpc30scmVwbGFjZXM6ZnVuY3Rpb24oZSl7cmV0dXJuIGU9ZG9jdW1lbnQuaWQoZSwhMCksZS5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZCh0aGlzLGUpLHRoaXN9LHdyYXBzOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGU9ZG9jdW1lbnQuaWQoZSwhMCksdGhpcy5yZXBsYWNlcyhlKS5ncmFiKGUsdCl9LGdldFNlbGVjdGVkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2VsZWN0ZWRJbmRleCxuZXcgRWxlbWVudHMoQXJyYXkuZnJvbSh0aGlzLm9wdGlvbnMpLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4gZS5zZWxlY3RlZH0pKX0sdG9RdWVyeVN0cmluZzpmdW5jdGlvbigpe3ZhciBlPVtdO3JldHVybiB0aGlzLmdldEVsZW1lbnRzKCJpbnB1dCwgc2VsZWN0LCB0ZXh0YXJlYSIpLmVhY2goZnVuY3Rpb24odCl7dmFyIGk9dC50eXBlO2lmKHQubmFtZSYmIXQuZGlzYWJsZWQmJiJzdWJtaXQiIT1pJiYicmVzZXQiIT1pJiYiZmlsZSIhPWkmJiJpbWFnZSIhPWkpe3ZhciBuPSJzZWxlY3QiPT10LmdldCgidGFnIik/dC5nZXRTZWxlY3RlZCgpLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gZG9jdW1lbnQuaWQoZSkuZ2V0KCJ2YWx1ZSIpfSk6InJhZGlvIiE9aSYmImNoZWNrYm94IiE9aXx8dC5jaGVja2VkP3QuZ2V0KCJ2YWx1ZSIpOm51bGw7QXJyYXkuZnJvbShuKS5lYWNoKGZ1bmN0aW9uKGkpe2khPT12b2lkIDAmJmUucHVzaChlbmNvZGVVUklDb21wb25lbnQodC5uYW1lKSsiPSIrZW5jb2RlVVJJQ29tcG9uZW50KGkpKX0pfX0pLGUuam9pbigiJiIpfX0pO3ZhciBkPXt9LHA9e30sZj1mdW5jdGlvbihlKXtyZXR1cm4gcFtlXXx8KHBbZV09e30pfSxtPWZ1bmN0aW9uKGUpe3ZhciB0PWUudW5pcXVlTnVtYmVyO3JldHVybiBlLnJlbW92ZUV2ZW50cyYmZS5yZW1vdmVFdmVudHMoKSxlLmNsZWFyQXR0cmlidXRlcyYmZS5jbGVhckF0dHJpYnV0ZXMoKSxudWxsIT10JiYoZGVsZXRlIGRbdF0sZGVsZXRlIHBbdF0pLGV9LGc9e2lucHV0OiJjaGVja2VkIixvcHRpb246InNlbGVjdGVkIix0ZXh0YXJlYToidmFsdWUifTtFbGVtZW50LmltcGxlbWVudCh7ZGVzdHJveTpmdW5jdGlvbigpe3ZhciBlPW0odGhpcykuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIioiKTtyZXR1cm4gQXJyYXkuZWFjaChlLG0pLEVsZW1lbnQuZGlzcG9zZSh0aGlzKSxudWxsfSxlbXB0eTpmdW5jdGlvbigpe3JldHVybiBBcnJheS5mcm9tKHRoaXMuY2hpbGROb2RlcykuZWFjaChFbGVtZW50LmRpc3Bvc2UpLHRoaXN9LGRpc3Bvc2U6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wYXJlbnROb2RlP3RoaXMucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzKTp0aGlzfSxjbG9uZTpmdW5jdGlvbihlLHQpe2U9ZSE9PSExO3ZhciBpLG49dGhpcy5jbG9uZU5vZGUoZSkscj1bbl0sbz1bdGhpc107Zm9yKGUmJihyLmFwcGVuZChBcnJheS5mcm9tKG4uZ2V0RWxlbWVudHNCeVRhZ05hbWUoIioiKSkpLG8uYXBwZW5kKEFycmF5LmZyb20odGhpcy5nZXRFbGVtZW50c0J5VGFnTmFtZSgiKiIpKSkpLGk9ci5sZW5ndGg7aS0tOyl7dmFyIHM9cltpXSxhPW9baV07aWYodHx8cy5yZW1vdmVBdHRyaWJ1dGUoImlkIikscy5jbGVhckF0dHJpYnV0ZXMmJihzLmNsZWFyQXR0cmlidXRlcygpLHMubWVyZ2VBdHRyaWJ1dGVzKGEpLHMucmVtb3ZlQXR0cmlidXRlKCJ1bmlxdWVOdW1iZXIiKSxzLm9wdGlvbnMpKWZvcih2YXIgbD1zLm9wdGlvbnMsYz1hLm9wdGlvbnMsdT1sLmxlbmd0aDt1LS07KWxbdV0uc2VsZWN0ZWQ9Y1t1XS5zZWxlY3RlZDt2YXIgaD1nW2EudGFnTmFtZS50b0xvd2VyQ2FzZSgpXTtoJiZhW2hdJiYoc1toXT1hW2hdKX1pZihCcm93c2VyLmllKXt2YXIgZD1uLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJvYmplY3QiKSxwPXRoaXMuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIm9iamVjdCIpO2ZvcihpPWQubGVuZ3RoO2ktLTspZFtpXS5vdXRlckhUTUw9cFtpXS5vdXRlckhUTUx9cmV0dXJuIGRvY3VtZW50LmlkKG4pfX0pLFtFbGVtZW50LFdpbmRvdyxEb2N1bWVudF0uaW52b2tlKCJpbXBsZW1lbnQiLHthZGRMaXN0ZW5lcjpmdW5jdGlvbihlLHQpe2lmKCJ1bmxvYWQiPT1lKXt2YXIgaT10LG49dGhpczt0PWZ1bmN0aW9uKCl7bi5yZW1vdmVMaXN0ZW5lcigidW5sb2FkIix0KSxpKCl9fWVsc2UgZFtTbGljay51aWRPZih0aGlzKV09dGhpcztyZXR1cm4gdGhpcy5hZGRFdmVudExpc3RlbmVyP3RoaXMuYWRkRXZlbnRMaXN0ZW5lcihlLHQsISFhcmd1bWVudHNbMl0pOnRoaXMuYXR0YWNoRXZlbnQoIm9uIitlLHQpLHRoaXN9LHJlbW92ZUxpc3RlbmVyOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcj90aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoZSx0LCEhYXJndW1lbnRzWzJdKTp0aGlzLmRldGFjaEV2ZW50KCJvbiIrZSx0KSx0aGlzfSxyZXRyaWV2ZTpmdW5jdGlvbihlLHQpe3ZhciBpPWYoU2xpY2sudWlkT2YodGhpcykpLG49aVtlXTtyZXR1cm4gbnVsbCE9dCYmbnVsbD09biYmKG49aVtlXT10KSxudWxsIT1uP246bnVsbH0sc3RvcmU6ZnVuY3Rpb24oZSx0KXt2YXIgaT1mKFNsaWNrLnVpZE9mKHRoaXMpKTtyZXR1cm4gaVtlXT10LHRoaXN9LGVsaW1pbmF0ZTpmdW5jdGlvbihlKXt2YXIgdD1mKFNsaWNrLnVpZE9mKHRoaXMpKTtyZXR1cm4gZGVsZXRlIHRbZV0sdGhpc319KSx3aW5kb3cuYXR0YWNoRXZlbnQmJiF3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lciYmd2luZG93LmFkZExpc3RlbmVyKCJ1bmxvYWQiLGZ1bmN0aW9uKCl7T2JqZWN0LmVhY2goZCxtKSx3aW5kb3cuQ29sbGVjdEdhcmJhZ2UmJkNvbGxlY3RHYXJiYWdlKCl9KSxFbGVtZW50LlByb3BlcnRpZXM9e30sRWxlbWVudC5Qcm9wZXJ0aWVzPW5ldyBIYXNoLEVsZW1lbnQuUHJvcGVydGllcy5zdHlsZT17c2V0OmZ1bmN0aW9uKGUpe3RoaXMuc3R5bGUuY3NzVGV4dD1lfSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdHlsZS5jc3NUZXh0fSxlcmFzZTpmdW5jdGlvbigpe3RoaXMuc3R5bGUuY3NzVGV4dD0iIn19LEVsZW1lbnQuUHJvcGVydGllcy50YWc9e2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnRhZ05hbWUudG9Mb3dlckNhc2UoKX19LEVsZW1lbnQuUHJvcGVydGllcy5odG1sPXtzZXQ6ZnVuY3Rpb24oZSl7bnVsbD09ZT9lPSIiOiJhcnJheSI9PXR5cGVPZihlKSYmKGU9ZS5qb2luKCIiKSksdGhpcy5pbm5lckhUTUw9ZX0sZXJhc2U6ZnVuY3Rpb24oKXt0aGlzLmlubmVySFRNTD0iIn19O3ZhciB2PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO3YuaW5uZXJIVE1MPSI8bmF2PjwvbmF2PiI7dmFyIGI9MT09di5jaGlsZE5vZGVzLmxlbmd0aDtpZighYilmb3IodmFyIHk9ImFiYnIgYXJ0aWNsZSBhc2lkZSBhdWRpbyBjYW52YXMgZGF0YWxpc3QgZGV0YWlscyBmaWdjYXB0aW9uIGZpZ3VyZSBmb290ZXIgaGVhZGVyIGhncm91cCBtYXJrIG1ldGVyIG5hdiBvdXRwdXQgcHJvZ3Jlc3Mgc2VjdGlvbiBzdW1tYXJ5IHRpbWUgdmlkZW8iLnNwbGl0KCIgIiksXz1kb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCkseD15Lmxlbmd0aDt4LS07KV8uY3JlYXRlRWxlbWVudCh5W3hdKTt2PW51bGw7dmFyIEM9RnVuY3Rpb24uYXR0ZW1wdChmdW5jdGlvbigpe3ZhciBlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInRhYmxlIik7cmV0dXJuIGUuaW5uZXJIVE1MPSI8dHI+PHRkPjwvdGQ+PC90cj4iLCEwfSksdz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0ciIpLGs9Ijx0ZD48L3RkPiI7dy5pbm5lckhUTUw9azt2YXIgVD13LmlubmVySFRNTD09azt3PW51bGwsQyYmVCYmYnx8KEVsZW1lbnQuUHJvcGVydGllcy5odG1sLnNldD1mdW5jdGlvbihlKXt2YXIgdD17dGFibGU6WzEsIjx0YWJsZT4iLCI8L3RhYmxlPiJdLHNlbGVjdDpbMSwiPHNlbGVjdD4iLCI8L3NlbGVjdD4iXSx0Ym9keTpbMiwiPHRhYmxlPjx0Ym9keT4iLCI8L3Rib2R5PjwvdGFibGU+Il0sdHI6WzMsIjx0YWJsZT48dGJvZHk+PHRyPiIsIjwvdHI+PC90Ym9keT48L3RhYmxlPiJdfTtyZXR1cm4gdC50aGVhZD10LnRmb290PXQudGJvZHksZnVuY3Rpb24oaSl7dmFyIG49dFt0aGlzLmdldCgidGFnIildO2lmKG58fGJ8fChuPVswLCIiLCIiXSksIW4pcmV0dXJuIGUuY2FsbCh0aGlzLGkpO3ZhciByPW5bMF0sbz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKSxzPW87Zm9yKGJ8fF8uYXBwZW5kQ2hpbGQobyksby5pbm5lckhUTUw9W25bMV0saSxuWzJdXS5mbGF0dGVuKCkuam9pbigiIik7ci0tOylzPXMuZmlyc3RDaGlsZDt0aGlzLmVtcHR5KCkuYWRvcHQocy5jaGlsZE5vZGVzKSxifHxfLnJlbW92ZUNoaWxkKG8pLG89bnVsbH19KEVsZW1lbnQuUHJvcGVydGllcy5odG1sLnNldCkpO3ZhciBFPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImZvcm0iKTtFLmlubmVySFRNTD0iPHNlbGVjdD48b3B0aW9uPnM8L29wdGlvbj48L3NlbGVjdD4iLCJzIiE9RS5maXJzdENoaWxkLnZhbHVlJiYoRWxlbWVudC5Qcm9wZXJ0aWVzLnZhbHVlPXtzZXQ6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5nZXQoInRhZyIpO2lmKCJzZWxlY3QiIT10KXJldHVybiB0aGlzLnNldFByb3BlcnR5KCJ2YWx1ZSIsZSk7Zm9yKHZhciBpPXRoaXMuZ2V0RWxlbWVudHMoIm9wdGlvbiIpLG49MDtpLmxlbmd0aD5uO24rKyl7dmFyIHI9aVtuXSxvPXIuZ2V0QXR0cmlidXRlTm9kZSgidmFsdWUiKSxzPW8mJm8uc3BlY2lmaWVkP3IudmFsdWU6ci5nZXQoInRleHQiKTtpZihzPT1lKXJldHVybiByLnNlbGVjdGVkPSEwfX0sZ2V0OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWUuZ2V0KCJ0YWciKTtpZigic2VsZWN0IiE9dCYmIm9wdGlvbiIhPXQpcmV0dXJuIHRoaXMuZ2V0UHJvcGVydHkoInZhbHVlIik7aWYoInNlbGVjdCI9PXQmJiEoZT1lLmdldFNlbGVjdGVkKClbMF0pKXJldHVybiIiO3ZhciBpPWUuZ2V0QXR0cmlidXRlTm9kZSgidmFsdWUiKTtyZXR1cm4gaSYmaS5zcGVjaWZpZWQ/ZS52YWx1ZTplLmdldCgidGV4dCIpfX0pLEU9bnVsbCxkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKS5nZXRBdHRyaWJ1dGVOb2RlKCJpZCIpJiYoRWxlbWVudC5Qcm9wZXJ0aWVzLmlkPXtzZXQ6ZnVuY3Rpb24oZSl7dGhpcy5pZD10aGlzLmdldEF0dHJpYnV0ZU5vZGUoImlkIikudmFsdWU9ZX0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaWR8fG51bGx9LGVyYXNlOmZ1bmN0aW9uKCl7dGhpcy5pZD10aGlzLmdldEF0dHJpYnV0ZU5vZGUoImlkIikudmFsdWU9IiJ9fSl9KCksZnVuY3Rpb24oKXt2YXIgZT1kb2N1bWVudC5odG1sLHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7dC5zdHlsZS5jb2xvcj0icmVkIix0LnN0eWxlLmNvbG9yPW51bGw7dmFyIGk9InJlZCI9PXQuc3R5bGUuY29sb3I7dD1udWxsLEVsZW1lbnQuUHJvcGVydGllcy5zdHlsZXM9e3NldDpmdW5jdGlvbihlKXt0aGlzLnNldFN0eWxlcyhlKX19O3ZhciBuPW51bGwhPWUuc3R5bGUub3BhY2l0eSxyPW51bGwhPWUuc3R5bGUuZmlsdGVyLG89L2FscGhhXChvcGFjaXR5PShbXGQuXSspXCkvaSxzPWZ1bmN0aW9uKGUsdCl7ZS5zdG9yZSgiJG9wYWNpdHkiLHQpLGUuc3R5bGUudmlzaWJpbGl0eT10PjB8fG51bGw9PXQ/InZpc2libGUiOiJoaWRkZW4ifSxhPW4/ZnVuY3Rpb24oZSx0KXtlLnN0eWxlLm9wYWNpdHk9dH06cj9mdW5jdGlvbihlLHQpe3ZhciBpPWUuc3R5bGU7ZS5jdXJyZW50U3R5bGUmJmUuY3VycmVudFN0eWxlLmhhc0xheW91dHx8KGkuem9vbT0xKSx0PW51bGw9PXR8fDE9PXQ/IiI6ImFscGhhKG9wYWNpdHk9IisoMTAwKnQpLmxpbWl0KDAsMTAwKS5yb3VuZCgpKyIpIjt2YXIgbj1pLmZpbHRlcnx8ZS5nZXRDb21wdXRlZFN0eWxlKCJmaWx0ZXIiKXx8IiI7aS5maWx0ZXI9by50ZXN0KG4pP24ucmVwbGFjZShvLHQpOm4rdCxpLmZpbHRlcnx8aS5yZW1vdmVBdHRyaWJ1dGUoImZpbHRlciIpfTpzLGw9bj9mdW5jdGlvbihlKXt2YXIgdD1lLnN0eWxlLm9wYWNpdHl8fGUuZ2V0Q29tcHV0ZWRTdHlsZSgib3BhY2l0eSIpO3JldHVybiIiPT10PzE6dC50b0Zsb2F0KCl9OnI/ZnVuY3Rpb24oZSl7dmFyIHQsaT1lLnN0eWxlLmZpbHRlcnx8ZS5nZXRDb21wdXRlZFN0eWxlKCJmaWx0ZXIiKTtyZXR1cm4gaSYmKHQ9aS5tYXRjaChvKSksbnVsbD09dHx8bnVsbD09aT8xOnRbMV0vMTAwfTpmdW5jdGlvbihlKXt2YXIgdD1lLnJldHJpZXZlKCIkb3BhY2l0eSIpO3JldHVybiBudWxsPT10JiYodD0iaGlkZGVuIj09ZS5zdHlsZS52aXNpYmlsaXR5PzA6MSksdH0sYz1udWxsPT1lLnN0eWxlLmNzc0Zsb2F0PyJzdHlsZUZsb2F0IjoiY3NzRmxvYXQiO0VsZW1lbnQuaW1wbGVtZW50KHtnZXRDb21wdXRlZFN0eWxlOmZ1bmN0aW9uKGUpe2lmKHRoaXMuY3VycmVudFN0eWxlKXJldHVybiB0aGlzLmN1cnJlbnRTdHlsZVtlLmNhbWVsQ2FzZSgpXTt2YXIgdD1FbGVtZW50LmdldERvY3VtZW50KHRoaXMpLmRlZmF1bHRWaWV3LGk9dD90LmdldENvbXB1dGVkU3R5bGUodGhpcyxudWxsKTpudWxsO3JldHVybiBpP2kuZ2V0UHJvcGVydHlWYWx1ZShlPT1jPyJmbG9hdCI6ZS5oeXBoZW5hdGUoKSk6bnVsbH0sc2V0U3R5bGU6ZnVuY3Rpb24oZSx0KXtpZigib3BhY2l0eSI9PWUpcmV0dXJuIG51bGwhPXQmJih0PXBhcnNlRmxvYXQodCkpLGEodGhpcyx0KSx0aGlzO2lmKGU9KCJmbG9hdCI9PWU/YzplKS5jYW1lbENhc2UoKSwic3RyaW5nIiE9dHlwZU9mKHQpKXt2YXIgbj0oRWxlbWVudC5TdHlsZXNbZV18fCJAIikuc3BsaXQoIiAiKTt0PUFycmF5LmZyb20odCkubWFwKGZ1bmN0aW9uKGUsdCl7cmV0dXJuIG5bdF0/Im51bWJlciI9PXR5cGVPZihlKT9uW3RdLnJlcGxhY2UoIkAiLE1hdGgucm91bmQoZSkpOmU6IiJ9KS5qb2luKCIgIil9ZWxzZSB0PT1OdW1iZXIodCkrIiImJih0PU1hdGgucm91bmQodCkpO3JldHVybiB0aGlzLnN0eWxlW2VdPXQsKCIiPT10fHxudWxsPT10KSYmaSYmdGhpcy5zdHlsZS5yZW1vdmVBdHRyaWJ1dGUmJnRoaXMuc3R5bGUucmVtb3ZlQXR0cmlidXRlKGUpLHRoaXN9LGdldFN0eWxlOmZ1bmN0aW9uKGUpe2lmKCJvcGFjaXR5Ij09ZSlyZXR1cm4gbCh0aGlzKTtlPSgiZmxvYXQiPT1lP2M6ZSkuY2FtZWxDYXNlKCk7dmFyIHQ9dGhpcy5zdHlsZVtlXTtpZighdHx8InpJbmRleCI9PWUpe3Q9W107Zm9yKHZhciBpIGluIEVsZW1lbnQuU2hvcnRTdHlsZXMpaWYoZT09aSl7Zm9yKHZhciBuIGluIEVsZW1lbnQuU2hvcnRTdHlsZXNbaV0pdC5wdXNoKHRoaXMuZ2V0U3R5bGUobikpO3JldHVybiB0LmpvaW4oIiAiKX10PXRoaXMuZ2V0Q29tcHV0ZWRTdHlsZShlKX1pZih0KXt0Kz0iIjt2YXIgcj10Lm1hdGNoKC9yZ2JhP1woW1xkXHMsXStcKS8pO3ImJih0PXQucmVwbGFjZShyWzBdLHJbMF0ucmdiVG9IZXgoKSkpfWlmKEJyb3dzZXIub3BlcmF8fEJyb3dzZXIuaWUpe2lmKC9eKGhlaWdodHx3aWR0aCkkLy50ZXN0KGUpJiYhL3B4JC8udGVzdCh0KSl7dmFyIG89IndpZHRoIj09ZT9bImxlZnQiLCJyaWdodCJdOlsidG9wIiwiYm90dG9tIl0scz0wO3JldHVybiBvLmVhY2goZnVuY3Rpb24oZSl7cys9dGhpcy5nZXRTdHlsZSgiYm9yZGVyLSIrZSsiLXdpZHRoIikudG9JbnQoKSt0aGlzLmdldFN0eWxlKCJwYWRkaW5nLSIrZSkudG9JbnQoKX0sdGhpcyksdGhpc1sib2Zmc2V0IitlLmNhcGl0YWxpemUoKV0tcysicHgifWlmKEJyb3dzZXIuaWUmJi9eYm9yZGVyKC4rKVdpZHRofG1hcmdpbnxwYWRkaW5nLy50ZXN0KGUpJiZpc05hTihwYXJzZUZsb2F0KHQpKSlyZXR1cm4iMHB4In1yZXR1cm4gdH0sc2V0U3R5bGVzOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdCBpbiBlKXRoaXMuc2V0U3R5bGUodCxlW3RdKTtyZXR1cm4gdGhpc30sZ2V0U3R5bGVzOmZ1bmN0aW9uKCl7dmFyIGU9e307cmV0dXJuIEFycmF5LmZsYXR0ZW4oYXJndW1lbnRzKS5lYWNoKGZ1bmN0aW9uKHQpe2VbdF09dGhpcy5nZXRTdHlsZSh0KX0sdGhpcyksZX19KSxFbGVtZW50LlN0eWxlcz17bGVmdDoiQHB4Iix0b3A6IkBweCIsYm90dG9tOiJAcHgiLHJpZ2h0OiJAcHgiLHdpZHRoOiJAcHgiLGhlaWdodDoiQHB4IixtYXhXaWR0aDoiQHB4IixtYXhIZWlnaHQ6IkBweCIsbWluV2lkdGg6IkBweCIsbWluSGVpZ2h0OiJAcHgiLGJhY2tncm91bmRDb2xvcjoicmdiKEAsIEAsIEApIixiYWNrZ3JvdW5kUG9zaXRpb246IkBweCBAcHgiLGNvbG9yOiJyZ2IoQCwgQCwgQCkiLGZvbnRTaXplOiJAcHgiLGxldHRlclNwYWNpbmc6IkBweCIsbGluZUhlaWdodDoiQHB4IixjbGlwOiJyZWN0KEBweCBAcHggQHB4IEBweCkiLG1hcmdpbjoiQHB4IEBweCBAcHggQHB4IixwYWRkaW5nOiJAcHggQHB4IEBweCBAcHgiLGJvcmRlcjoiQHB4IEAgcmdiKEAsIEAsIEApIEBweCBAIHJnYihALCBALCBAKSBAcHggQCByZ2IoQCwgQCwgQCkiLGJvcmRlcldpZHRoOiJAcHggQHB4IEBweCBAcHgiLGJvcmRlclN0eWxlOiJAIEAgQCBAIixib3JkZXJDb2xvcjoicmdiKEAsIEAsIEApIHJnYihALCBALCBAKSByZ2IoQCwgQCwgQCkgcmdiKEAsIEAsIEApIix6SW5kZXg6IkAiLHpvb206IkAiLGZvbnRXZWlnaHQ6IkAiLHRleHRJbmRlbnQ6IkBweCIsb3BhY2l0eToiQCJ9LEVsZW1lbnQuaW1wbGVtZW50KHtzZXRPcGFjaXR5OmZ1bmN0aW9uKGUpe3JldHVybiBhKHRoaXMsZSksdGhpc30sZ2V0T3BhY2l0eTpmdW5jdGlvbigpe3JldHVybiBsKHRoaXMpfX0pLEVsZW1lbnQuUHJvcGVydGllcy5vcGFjaXR5PXtzZXQ6ZnVuY3Rpb24oZSl7YSh0aGlzLGUpLHModGhpcyxlKX0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGwodGhpcyl9fSxFbGVtZW50LlN0eWxlcz1uZXcgSGFzaChFbGVtZW50LlN0eWxlcyksRWxlbWVudC5TaG9ydFN0eWxlcz17bWFyZ2luOnt9LHBhZGRpbmc6e30sYm9yZGVyOnt9LGJvcmRlcldpZHRoOnt9LGJvcmRlclN0eWxlOnt9LGJvcmRlckNvbG9yOnt9fSxbIlRvcCIsIlJpZ2h0IiwiQm90dG9tIiwiTGVmdCJdLmVhY2goZnVuY3Rpb24oZSl7dmFyIHQ9RWxlbWVudC5TaG9ydFN0eWxlcyxpPUVsZW1lbnQuU3R5bGVzO1sibWFyZ2luIiwicGFkZGluZyJdLmVhY2goZnVuY3Rpb24obil7dmFyIHI9bitlO3Rbbl1bcl09aVtyXT0iQHB4In0pO3ZhciBuPSJib3JkZXIiK2U7dC5ib3JkZXJbbl09aVtuXT0iQHB4IEAgcmdiKEAsIEAsIEApIjt2YXIgcj1uKyJXaWR0aCIsbz1uKyJTdHlsZSIscz1uKyJDb2xvciI7dFtuXT17fSx0LmJvcmRlcldpZHRoW3JdPXRbbl1bcl09aVtyXT0iQHB4Iix0LmJvcmRlclN0eWxlW29dPXRbbl1bb109aVtvXT0iQCIsdC5ib3JkZXJDb2xvcltzXT10W25dW3NdPWlbc109InJnYihALCBALCBAKSJ9KX0oKSxmdW5jdGlvbigpe2lmKEVsZW1lbnQuUHJvcGVydGllcy5ldmVudHM9e3NldDpmdW5jdGlvbihlKXt0aGlzLmFkZEV2ZW50cyhlKX19LFtFbGVtZW50LFdpbmRvdyxEb2N1bWVudF0uaW52b2tlKCJpbXBsZW1lbnQiLHthZGRFdmVudDpmdW5jdGlvbihlLHQpe3ZhciBpPXRoaXMucmV0cmlldmUoImV2ZW50cyIse30pO2lmKGlbZV18fChpW2VdPXtrZXlzOltdLHZhbHVlczpbXX0pLGlbZV0ua2V5cy5jb250YWlucyh0KSlyZXR1cm4gdGhpcztpW2VdLmtleXMucHVzaCh0KTt2YXIgbj1lLHI9RWxlbWVudC5FdmVudHNbZV0sbz10LHM9dGhpcztyJiYoci5vbkFkZCYmci5vbkFkZC5jYWxsKHRoaXMsdCxlKSxyLmNvbmRpdGlvbiYmKG89ZnVuY3Rpb24oaSl7cmV0dXJuIHIuY29uZGl0aW9uLmNhbGwodGhpcyxpLGUpP3QuY2FsbCh0aGlzLGkpOiEwfSksci5iYXNlJiYobj1GdW5jdGlvbi5mcm9tKHIuYmFzZSkuY2FsbCh0aGlzLGUpKSk7dmFyIGE9ZnVuY3Rpb24oKXtyZXR1cm4gdC5jYWxsKHMpfSxsPUVsZW1lbnQuTmF0aXZlRXZlbnRzW25dO3JldHVybiBsJiYoMj09bCYmKGE9ZnVuY3Rpb24oZSl7ZT1uZXcgRE9NRXZlbnQoZSxzLmdldFdpbmRvdygpKSxvLmNhbGwocyxlKT09PSExJiZlLnN0b3AoKX0pLHRoaXMuYWRkTGlzdGVuZXIobixhLGFyZ3VtZW50c1syXSkpLGlbZV0udmFsdWVzLnB1c2goYSksdGhpc30scmVtb3ZlRXZlbnQ6ZnVuY3Rpb24oZSx0KXt2YXIgaT10aGlzLnJldHJpZXZlKCJldmVudHMiKTtpZighaXx8IWlbZV0pcmV0dXJuIHRoaXM7dmFyIG49aVtlXSxyPW4ua2V5cy5pbmRleE9mKHQpO2lmKC0xPT1yKXJldHVybiB0aGlzO3ZhciBvPW4udmFsdWVzW3JdO2RlbGV0ZSBuLmtleXNbcl0sZGVsZXRlIG4udmFsdWVzW3JdO3ZhciBzPUVsZW1lbnQuRXZlbnRzW2VdO3JldHVybiBzJiYocy5vblJlbW92ZSYmcy5vblJlbW92ZS5jYWxsKHRoaXMsdCxlKSxzLmJhc2UmJihlPUZ1bmN0aW9uLmZyb20ocy5iYXNlKS5jYWxsKHRoaXMsZSkpKSxFbGVtZW50Lk5hdGl2ZUV2ZW50c1tlXT90aGlzLnJlbW92ZUxpc3RlbmVyKGUsbyxhcmd1bWVudHNbMl0pOnRoaXN9LGFkZEV2ZW50czpmdW5jdGlvbihlKXtmb3IodmFyIHQgaW4gZSl0aGlzLmFkZEV2ZW50KHQsZVt0XSk7cmV0dXJuIHRoaXN9LHJlbW92ZUV2ZW50czpmdW5jdGlvbihlKXt2YXIgdDtpZigib2JqZWN0Ij09dHlwZU9mKGUpKXtmb3IodCBpbiBlKXRoaXMucmVtb3ZlRXZlbnQodCxlW3RdKTtyZXR1cm4gdGhpc312YXIgaT10aGlzLnJldHJpZXZlKCJldmVudHMiKTtpZighaSlyZXR1cm4gdGhpcztpZihlKWlbZV0mJihpW2VdLmtleXMuZWFjaChmdW5jdGlvbih0KXt0aGlzLnJlbW92ZUV2ZW50KGUsdCl9LHRoaXMpLGRlbGV0ZSBpW2VdKTtlbHNle2Zvcih0IGluIGkpdGhpcy5yZW1vdmVFdmVudHModCk7dGhpcy5lbGltaW5hdGUoImV2ZW50cyIpfXJldHVybiB0aGlzfSxmaXJlRXZlbnQ6ZnVuY3Rpb24oZSx0LGkpe3ZhciBuPXRoaXMucmV0cmlldmUoImV2ZW50cyIpO3JldHVybiBuJiZuW2VdPyh0PUFycmF5LmZyb20odCksbltlXS5rZXlzLmVhY2goZnVuY3Rpb24oZSl7aT9lLmRlbGF5KGksdGhpcyx0KTplLmFwcGx5KHRoaXMsdCl9LHRoaXMpLHRoaXMpOnRoaXN9LGNsb25lRXZlbnRzOmZ1bmN0aW9uKGUsdCl7ZT1kb2N1bWVudC5pZChlKTt2YXIgaT1lLnJldHJpZXZlKCJldmVudHMiKTtpZighaSlyZXR1cm4gdGhpcztpZih0KWlbdF0mJmlbdF0ua2V5cy5lYWNoKGZ1bmN0aW9uKGUpe3RoaXMuYWRkRXZlbnQodCxlKX0sdGhpcyk7ZWxzZSBmb3IodmFyIG4gaW4gaSl0aGlzLmNsb25lRXZlbnRzKGUsbik7cmV0dXJuIHRoaXN9fSksRWxlbWVudC5OYXRpdmVFdmVudHM9e2NsaWNrOjIsZGJsY2xpY2s6Mixtb3VzZXVwOjIsbW91c2Vkb3duOjIsY29udGV4dG1lbnU6Mixtb3VzZXdoZWVsOjIsRE9NTW91c2VTY3JvbGw6Mixtb3VzZW92ZXI6Mixtb3VzZW91dDoyLG1vdXNlbW92ZToyLHNlbGVjdHN0YXJ0OjIsc2VsZWN0ZW5kOjIsa2V5ZG93bjoyLGtleXByZXNzOjIsa2V5dXA6MixvcmllbnRhdGlvbmNoYW5nZToyLHRvdWNoc3RhcnQ6Mix0b3VjaG1vdmU6Mix0b3VjaGVuZDoyLHRvdWNoY2FuY2VsOjIsZ2VzdHVyZXN0YXJ0OjIsZ2VzdHVyZWNoYW5nZToyLGdlc3R1cmVlbmQ6Mixmb2N1czoyLGJsdXI6MixjaGFuZ2U6MixyZXNldDoyLHNlbGVjdDoyLHN1Ym1pdDoyLHBhc3RlOjIsaW5wdXQ6Mixsb2FkOjIsdW5sb2FkOjEsYmVmb3JldW5sb2FkOjIscmVzaXplOjEsbW92ZToxLERPTUNvbnRlbnRMb2FkZWQ6MSxyZWFkeXN0YXRlY2hhbmdlOjEsZXJyb3I6MSxhYm9ydDoxLHNjcm9sbDoxfSxFbGVtZW50LkV2ZW50cz17bW91c2V3aGVlbDp7YmFzZTpCcm93c2VyLmZpcmVmb3g/IkRPTU1vdXNlU2Nyb2xsIjoibW91c2V3aGVlbCJ9fSwib25tb3VzZWVudGVyImluIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudClFbGVtZW50Lk5hdGl2ZUV2ZW50cy5tb3VzZWVudGVyPUVsZW1lbnQuTmF0aXZlRXZlbnRzLm1vdXNlbGVhdmU9MjtlbHNle3ZhciBlPWZ1bmN0aW9uKGUpe3ZhciB0PWUucmVsYXRlZFRhcmdldDtyZXR1cm4gbnVsbD09dD8hMDp0P3QhPXRoaXMmJiJ4dWwiIT10LnByZWZpeCYmImRvY3VtZW50IiE9dHlwZU9mKHRoaXMpJiYhdGhpcy5jb250YWlucyh0KTohMX07RWxlbWVudC5FdmVudHMubW91c2VlbnRlcj17YmFzZToibW91c2VvdmVyIixjb25kaXRpb246ZX0sRWxlbWVudC5FdmVudHMubW91c2VsZWF2ZT17YmFzZToibW91c2VvdXQiLGNvbmRpdGlvbjplfX13aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcnx8KEVsZW1lbnQuTmF0aXZlRXZlbnRzLnByb3BlcnR5Y2hhbmdlPTIsRWxlbWVudC5FdmVudHMuY2hhbmdlPXtiYXNlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy50eXBlO3JldHVybiJpbnB1dCIhPXRoaXMuZ2V0KCJ0YWciKXx8InJhZGlvIiE9ZSYmImNoZWNrYm94IiE9ZT8iY2hhbmdlIjoicHJvcGVydHljaGFuZ2UifSxjb25kaXRpb246ZnVuY3Rpb24oZSl7cmV0dXJuInJhZGlvIiE9dGhpcy50eXBlfHwiY2hlY2tlZCI9PWUuZXZlbnQucHJvcGVydHlOYW1lJiZ0aGlzLmNoZWNrZWQKfX0pLEVsZW1lbnQuRXZlbnRzPW5ldyBIYXNoKEVsZW1lbnQuRXZlbnRzKX0oKSxmdW5jdGlvbigpe3ZhciBlPSEhd2luZG93LmFkZEV2ZW50TGlzdGVuZXI7RWxlbWVudC5OYXRpdmVFdmVudHMuZm9jdXNpbj1FbGVtZW50Lk5hdGl2ZUV2ZW50cy5mb2N1c291dD0yO3ZhciB0PWZ1bmN0aW9uKGUsdCxpLG4scil7Zm9yKDtyJiZyIT1lOyl7aWYodChyLG4pKXJldHVybiBpLmNhbGwocixuLHIpO3I9ZG9jdW1lbnQuaWQoci5wYXJlbnROb2RlKX19LGk9e21vdXNlZW50ZXI6e2Jhc2U6Im1vdXNlb3ZlciJ9LG1vdXNlbGVhdmU6e2Jhc2U6Im1vdXNlb3V0In0sZm9jdXM6e2Jhc2U6ImZvY3VzIisoZT8iIjoiaW4iKSxjYXB0dXJlOiEwfSxibHVyOntiYXNlOmU/ImJsdXIiOiJmb2N1c291dCIsY2FwdHVyZTohMH19LG49IiRkZWxlZ2F0aW9uOiIscj1mdW5jdGlvbihlKXtyZXR1cm57YmFzZToiZm9jdXNpbiIscmVtb3ZlOmZ1bmN0aW9uKHQsaSl7dmFyIHI9dC5yZXRyaWV2ZShuK2UrImxpc3RlbmVycyIse30pW2ldO2lmKHImJnIuZm9ybXMpZm9yKHZhciBvPXIuZm9ybXMubGVuZ3RoO28tLTspci5mb3Jtc1tvXS5yZW1vdmVFdmVudChlLHIuZm5zW29dKX0sbGlzdGVuOmZ1bmN0aW9uKGkscixvLHMsYSxsKXt2YXIgYz0iZm9ybSI9PWEuZ2V0KCJ0YWciKT9hOnMudGFyZ2V0LmdldFBhcmVudCgiZm9ybSIpO2lmKGMpe3ZhciB1PWkucmV0cmlldmUobitlKyJsaXN0ZW5lcnMiLHt9KSxoPXVbbF18fHtmb3JtczpbXSxmbnM6W119LGQ9aC5mb3JtcyxwPWguZm5zO2lmKC0xPT1kLmluZGV4T2YoYykpe2QucHVzaChjKTt2YXIgZj1mdW5jdGlvbihlKXt0KGkscixvLGUsYSl9O2MuYWRkRXZlbnQoZSxmKSxwLnB1c2goZiksdVtsXT1oLGkuc3RvcmUobitlKyJsaXN0ZW5lcnMiLHUpfX19fX0sbz1mdW5jdGlvbihlKXtyZXR1cm57YmFzZToiZm9jdXNpbiIsbGlzdGVuOmZ1bmN0aW9uKGksbixyLG8scyl7dmFyIGE9e2JsdXI6ZnVuY3Rpb24oKXt0aGlzLnJlbW92ZUV2ZW50cyhhKX19O2FbZV09ZnVuY3Rpb24oZSl7dChpLG4scixlLHMpfSxvLnRhcmdldC5hZGRFdmVudHMoYSl9fX07ZXx8T2JqZWN0LmFwcGVuZChpLHtzdWJtaXQ6cigic3VibWl0IikscmVzZXQ6cigicmVzZXQiKSxjaGFuZ2U6bygiY2hhbmdlIiksc2VsZWN0Om8oInNlbGVjdCIpfSk7dmFyIHM9RWxlbWVudC5wcm90b3R5cGUsYT1zLmFkZEV2ZW50LGw9cy5yZW1vdmVFdmVudCxjPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGZ1bmN0aW9uKGksbixyKXtpZigtMT09aS5pbmRleE9mKCI6cmVsYXkiKSlyZXR1cm4gZS5jYWxsKHRoaXMsaSxuLHIpO3ZhciBvPVNsaWNrLnBhcnNlKGkpLmV4cHJlc3Npb25zWzBdWzBdO2lmKCJyZWxheSIhPW8ucHNldWRvc1swXS5rZXkpcmV0dXJuIGUuY2FsbCh0aGlzLGksbixyKTt2YXIgcz1vLnRhZztyZXR1cm4gby5wc2V1ZG9zLnNsaWNlKDEpLmVhY2goZnVuY3Rpb24oZSl7cys9IjoiK2Uua2V5KyhlLnZhbHVlPyIoIitlLnZhbHVlKyIpIjoiIil9KSxlLmNhbGwodGhpcyxpLG4pLHQuY2FsbCh0aGlzLHMsby5wc2V1ZG9zWzBdLnZhbHVlLG4pfX0sdT17YWRkRXZlbnQ6ZnVuY3Rpb24oZSxuLHIpe3ZhciBvPXRoaXMucmV0cmlldmUoIiRkZWxlZ2F0ZXMiLHt9KSxzPW9bZV07aWYocylmb3IodmFyIGwgaW4gcylpZihzW2xdLmZuPT1yJiZzW2xdLm1hdGNoPT1uKXJldHVybiB0aGlzO3ZhciBjPWUsdT1uLGg9cixkPWlbZV18fHt9O2U9ZC5iYXNlfHxjLG49ZnVuY3Rpb24oZSl7cmV0dXJuIFNsaWNrLm1hdGNoKGUsdSl9O3ZhciBwPUVsZW1lbnQuRXZlbnRzW2NdO2lmKHAmJnAuY29uZGl0aW9uKXt2YXIgZj1uLG09cC5jb25kaXRpb247bj1mdW5jdGlvbih0LGkpe3JldHVybiBmKHQsaSkmJm0uY2FsbCh0LGksZSl9fXZhciBnPXRoaXMsdj1TdHJpbmcudW5pcXVlSUQoKSxiPWQubGlzdGVuP2Z1bmN0aW9uKGUsdCl7IXQmJmUmJmUudGFyZ2V0JiYodD1lLnRhcmdldCksdCYmZC5saXN0ZW4oZyxuLHIsZSx0LHYpfTpmdW5jdGlvbihlLGkpeyFpJiZlJiZlLnRhcmdldCYmKGk9ZS50YXJnZXQpLGkmJnQoZyxuLHIsZSxpKX07cmV0dXJuIHN8fChzPXt9KSxzW3ZdPXttYXRjaDp1LGZuOmgsZGVsZWdhdG9yOmJ9LG9bY109cyxhLmNhbGwodGhpcyxlLGIsZC5jYXB0dXJlKX0scmVtb3ZlRXZlbnQ6ZnVuY3Rpb24oZSx0LG4scil7dmFyIG89dGhpcy5yZXRyaWV2ZSgiJGRlbGVnYXRlcyIse30pLHM9b1tlXTtpZighcylyZXR1cm4gdGhpcztpZihyKXt2YXIgYT1lLGM9c1tyXS5kZWxlZ2F0b3IsaD1pW2VdfHx7fTtyZXR1cm4gZT1oLmJhc2V8fGEsaC5yZW1vdmUmJmgucmVtb3ZlKHRoaXMsciksZGVsZXRlIHNbcl0sb1thXT1zLGwuY2FsbCh0aGlzLGUsYyl9dmFyIGQscDtpZihuKXtmb3IoZCBpbiBzKWlmKHA9c1tkXSxwLm1hdGNoPT10JiZwLmZuPT1uKXJldHVybiB1LnJlbW92ZUV2ZW50LmNhbGwodGhpcyxlLHQsbixkKX1lbHNlIGZvcihkIGluIHMpcD1zW2RdLHAubWF0Y2g9PXQmJnUucmVtb3ZlRXZlbnQuY2FsbCh0aGlzLGUsdCxwLmZuLGQpO3JldHVybiB0aGlzfX07W0VsZW1lbnQsV2luZG93LERvY3VtZW50XS5pbnZva2UoImltcGxlbWVudCIse2FkZEV2ZW50OmMoYSx1LmFkZEV2ZW50KSxyZW1vdmVFdmVudDpjKGwsdS5yZW1vdmVFdmVudCl9KX0oKSxmdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXtyZXR1cm4gaChlLHQpLnRvSW50KCl8fDB9ZnVuY3Rpb24gdChlKXtyZXR1cm4iYm9yZGVyLWJveCI9PWgoZSwiLW1vei1ib3gtc2l6aW5nIil9ZnVuY3Rpb24gaSh0KXtyZXR1cm4gZSh0LCJib3JkZXItdG9wLXdpZHRoIil9ZnVuY3Rpb24gbih0KXtyZXR1cm4gZSh0LCJib3JkZXItbGVmdC13aWR0aCIpfWZ1bmN0aW9uIHIoZSl7cmV0dXJuL14oPzpib2R5fGh0bWwpJC9pLnRlc3QoZS50YWdOYW1lKX1mdW5jdGlvbiBvKGUpe3ZhciB0PWUuZ2V0RG9jdW1lbnQoKTtyZXR1cm4gdC5jb21wYXRNb2RlJiYiQ1NTMUNvbXBhdCIhPXQuY29tcGF0TW9kZT90LmJvZHk6dC5odG1sfXZhciBzPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpLGE9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7cy5zdHlsZS5oZWlnaHQ9IjAiLHMuYXBwZW5kQ2hpbGQoYSk7dmFyIGw9YS5vZmZzZXRQYXJlbnQ9PT1zO3M9YT1udWxsO3ZhciBjPWZ1bmN0aW9uKGUpe3JldHVybiJzdGF0aWMiIT1oKGUsInBvc2l0aW9uIil8fHIoZSl9LHU9ZnVuY3Rpb24oZSl7cmV0dXJuIGMoZSl8fC9eKD86dGFibGV8dGR8dGgpJC9pLnRlc3QoZS50YWdOYW1lKX07RWxlbWVudC5pbXBsZW1lbnQoe3Njcm9sbFRvOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHIodGhpcyk/dGhpcy5nZXRXaW5kb3coKS5zY3JvbGxUbyhlLHQpOih0aGlzLnNjcm9sbExlZnQ9ZSx0aGlzLnNjcm9sbFRvcD10KSx0aGlzfSxnZXRTaXplOmZ1bmN0aW9uKCl7cmV0dXJuIHIodGhpcyk/dGhpcy5nZXRXaW5kb3coKS5nZXRTaXplKCk6e3g6dGhpcy5vZmZzZXRXaWR0aCx5OnRoaXMub2Zmc2V0SGVpZ2h0fX0sZ2V0U2Nyb2xsU2l6ZTpmdW5jdGlvbigpe3JldHVybiByKHRoaXMpP3RoaXMuZ2V0V2luZG93KCkuZ2V0U2Nyb2xsU2l6ZSgpOnt4OnRoaXMuc2Nyb2xsV2lkdGgseTp0aGlzLnNjcm9sbEhlaWdodH19LGdldFNjcm9sbDpmdW5jdGlvbigpe3JldHVybiByKHRoaXMpP3RoaXMuZ2V0V2luZG93KCkuZ2V0U2Nyb2xsKCk6e3g6dGhpcy5zY3JvbGxMZWZ0LHk6dGhpcy5zY3JvbGxUb3B9fSxnZXRTY3JvbGxzOmZ1bmN0aW9uKCl7Zm9yKHZhciBlPXRoaXMucGFyZW50Tm9kZSx0PXt4OjAseTowfTtlJiYhcihlKTspdC54Kz1lLnNjcm9sbExlZnQsdC55Kz1lLnNjcm9sbFRvcCxlPWUucGFyZW50Tm9kZTtyZXR1cm4gdH0sZ2V0T2Zmc2V0UGFyZW50Omw/ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2lmKHIoZSl8fCJmaXhlZCI9PWgoZSwicG9zaXRpb24iKSlyZXR1cm4gbnVsbDtmb3IodmFyIHQ9InN0YXRpYyI9PWgoZSwicG9zaXRpb24iKT91OmM7ZT1lLnBhcmVudE5vZGU7KWlmKHQoZSkpcmV0dXJuIGU7cmV0dXJuIG51bGx9OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztpZihyKGUpfHwiZml4ZWQiPT1oKGUsInBvc2l0aW9uIikpcmV0dXJuIG51bGw7dHJ5e3JldHVybiBlLm9mZnNldFBhcmVudH1jYXRjaCh0KXt9cmV0dXJuIG51bGx9LGdldE9mZnNldHM6ZnVuY3Rpb24oKXtpZih0aGlzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCYmIUJyb3dzZXIuUGxhdGZvcm0uaW9zKXt2YXIgZT10aGlzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLG89ZG9jdW1lbnQuaWQodGhpcy5nZXREb2N1bWVudCgpLmRvY3VtZW50RWxlbWVudCkscz1vLmdldFNjcm9sbCgpLGE9dGhpcy5nZXRTY3JvbGxzKCksbD0iZml4ZWQiPT1oKHRoaXMsInBvc2l0aW9uIik7cmV0dXJue3g6ZS5sZWZ0LnRvSW50KCkrYS54KyhsPzA6cy54KS1vLmNsaWVudExlZnQseTplLnRvcC50b0ludCgpK2EueSsobD8wOnMueSktby5jbGllbnRUb3B9fXZhciBjPXRoaXMsdT17eDowLHk6MH07aWYocih0aGlzKSlyZXR1cm4gdTtmb3IoO2MmJiFyKGMpOyl7aWYodS54Kz1jLm9mZnNldExlZnQsdS55Kz1jLm9mZnNldFRvcCxCcm93c2VyLmZpcmVmb3gpe3QoYyl8fCh1LngrPW4oYyksdS55Kz1pKGMpKTt2YXIgZD1jLnBhcmVudE5vZGU7ZCYmInZpc2libGUiIT1oKGQsIm92ZXJmbG93IikmJih1LngrPW4oZCksdS55Kz1pKGQpKX1lbHNlIGMhPXRoaXMmJkJyb3dzZXIuc2FmYXJpJiYodS54Kz1uKGMpLHUueSs9aShjKSk7Yz1jLm9mZnNldFBhcmVudH1yZXR1cm4gQnJvd3Nlci5maXJlZm94JiYhdCh0aGlzKSYmKHUueC09bih0aGlzKSx1LnktPWkodGhpcykpLHV9LGdldFBvc2l0aW9uOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuZ2V0T2Zmc2V0cygpLHI9dGhpcy5nZXRTY3JvbGxzKCksbz17eDp0Lngtci54LHk6dC55LXIueX07aWYoZSYmKGU9ZG9jdW1lbnQuaWQoZSkpKXt2YXIgcz1lLmdldFBvc2l0aW9uKCk7cmV0dXJue3g6by54LXMueC1uKGUpLHk6by55LXMueS1pKGUpfX1yZXR1cm4gb30sZ2V0Q29vcmRpbmF0ZXM6ZnVuY3Rpb24oZSl7aWYocih0aGlzKSlyZXR1cm4gdGhpcy5nZXRXaW5kb3coKS5nZXRDb29yZGluYXRlcygpO3ZhciB0PXRoaXMuZ2V0UG9zaXRpb24oZSksaT10aGlzLmdldFNpemUoKSxuPXtsZWZ0OnQueCx0b3A6dC55LHdpZHRoOmkueCxoZWlnaHQ6aS55fTtyZXR1cm4gbi5yaWdodD1uLmxlZnQrbi53aWR0aCxuLmJvdHRvbT1uLnRvcCtuLmhlaWdodCxufSxjb21wdXRlUG9zaXRpb246ZnVuY3Rpb24odCl7cmV0dXJue2xlZnQ6dC54LWUodGhpcywibWFyZ2luLWxlZnQiKSx0b3A6dC55LWUodGhpcywibWFyZ2luLXRvcCIpfX0sc2V0UG9zaXRpb246ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuc2V0U3R5bGVzKHRoaXMuY29tcHV0ZVBvc2l0aW9uKGUpKX19KSxbRG9jdW1lbnQsV2luZG93XS5pbnZva2UoImltcGxlbWVudCIse2dldFNpemU6ZnVuY3Rpb24oKXt2YXIgZT1vKHRoaXMpO3JldHVybnt4OmUuY2xpZW50V2lkdGgseTplLmNsaWVudEhlaWdodH19LGdldFNjcm9sbDpmdW5jdGlvbigpe3ZhciBlPXRoaXMuZ2V0V2luZG93KCksdD1vKHRoaXMpO3JldHVybnt4OmUucGFnZVhPZmZzZXR8fHQuc2Nyb2xsTGVmdCx5OmUucGFnZVlPZmZzZXR8fHQuc2Nyb2xsVG9wfX0sZ2V0U2Nyb2xsU2l6ZTpmdW5jdGlvbigpe3ZhciBlPW8odGhpcyksdD10aGlzLmdldFNpemUoKSxpPXRoaXMuZ2V0RG9jdW1lbnQoKS5ib2R5O3JldHVybnt4Ok1hdGgubWF4KGUuc2Nyb2xsV2lkdGgsaS5zY3JvbGxXaWR0aCx0LngpLHk6TWF0aC5tYXgoZS5zY3JvbGxIZWlnaHQsaS5zY3JvbGxIZWlnaHQsdC55KX19LGdldFBvc2l0aW9uOmZ1bmN0aW9uKCl7cmV0dXJue3g6MCx5OjB9fSxnZXRDb29yZGluYXRlczpmdW5jdGlvbigpe3ZhciBlPXRoaXMuZ2V0U2l6ZSgpO3JldHVybnt0b3A6MCxsZWZ0OjAsYm90dG9tOmUueSxyaWdodDplLngsaGVpZ2h0OmUueSx3aWR0aDplLnh9fX0pO3ZhciBoPUVsZW1lbnQuZ2V0Q29tcHV0ZWRTdHlsZX0oKSxFbGVtZW50LmFsaWFzKHtwb3NpdGlvbjoic2V0UG9zaXRpb24ifSksW1dpbmRvdyxEb2N1bWVudCxFbGVtZW50XS5pbnZva2UoImltcGxlbWVudCIse2dldEhlaWdodDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldFNpemUoKS55fSxnZXRXaWR0aDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldFNpemUoKS54fSxnZXRTY3JvbGxUb3A6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRTY3JvbGwoKS55fSxnZXRTY3JvbGxMZWZ0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0U2Nyb2xsKCkueH0sZ2V0U2Nyb2xsSGVpZ2h0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0U2Nyb2xsU2l6ZSgpLnl9LGdldFNjcm9sbFdpZHRoOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0U2Nyb2xsU2l6ZSgpLnh9LGdldFRvcDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldFBvc2l0aW9uKCkueX0sZ2V0TGVmdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldFBvc2l0aW9uKCkueH19KSxmdW5jdGlvbigpe3ZhciBlPXRoaXMuRng9bmV3IENsYXNzKHtJbXBsZW1lbnRzOltDaGFpbixFdmVudHMsT3B0aW9uc10sb3B0aW9uczp7ZnBzOjYwLHVuaXQ6ITEsZHVyYXRpb246NTAwLGZyYW1lczpudWxsLGZyYW1lU2tpcDohMCxsaW5rOiJpZ25vcmUifSxpbml0aWFsaXplOmZ1bmN0aW9uKGUpe3RoaXMuc3ViamVjdD10aGlzLnN1YmplY3R8fHRoaXMsdGhpcy5zZXRPcHRpb25zKGUpfSxnZXRUcmFuc2l0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybi0oTWF0aC5jb3MoTWF0aC5QSSplKS0xKS8yfX0sc3RlcDpmdW5jdGlvbihlKXtpZih0aGlzLm9wdGlvbnMuZnJhbWVTa2lwKXt2YXIgdD1udWxsIT10aGlzLnRpbWU/ZS10aGlzLnRpbWU6MCxpPXQvdGhpcy5mcmFtZUludGVydmFsO3RoaXMudGltZT1lLHRoaXMuZnJhbWUrPWl9ZWxzZSB0aGlzLmZyYW1lKys7aWYodGhpcy5mcmFtZTx0aGlzLmZyYW1lcyl7dmFyIG49dGhpcy50cmFuc2l0aW9uKHRoaXMuZnJhbWUvdGhpcy5mcmFtZXMpO3RoaXMuc2V0KHRoaXMuY29tcHV0ZSh0aGlzLmZyb20sdGhpcy50byxuKSl9ZWxzZSB0aGlzLmZyYW1lPXRoaXMuZnJhbWVzLHRoaXMuc2V0KHRoaXMuY29tcHV0ZSh0aGlzLmZyb20sdGhpcy50bywxKSksdGhpcy5zdG9wKCl9LHNldDpmdW5jdGlvbihlKXtyZXR1cm4gZX0sY29tcHV0ZTpmdW5jdGlvbih0LGksbil7cmV0dXJuIGUuY29tcHV0ZSh0LGksbil9LGNoZWNrOmZ1bmN0aW9uKCl7aWYoIXRoaXMuaXNSdW5uaW5nKCkpcmV0dXJuITA7c3dpdGNoKHRoaXMub3B0aW9ucy5saW5rKXtjYXNlImNhbmNlbCI6cmV0dXJuIHRoaXMuY2FuY2VsKCksITA7Y2FzZSJjaGFpbiI6cmV0dXJuIHRoaXMuY2hhaW4odGhpcy5jYWxsZXIucGFzcyhhcmd1bWVudHMsdGhpcykpLCExfXJldHVybiExfSxzdGFydDpmdW5jdGlvbih0LGkpe2lmKCF0aGlzLmNoZWNrKHQsaSkpcmV0dXJuIHRoaXM7dGhpcy5mcm9tPXQsdGhpcy50bz1pLHRoaXMuZnJhbWU9dGhpcy5vcHRpb25zLmZyYW1lU2tpcD8wOi0xLHRoaXMudGltZT1udWxsLHRoaXMudHJhbnNpdGlvbj10aGlzLmdldFRyYW5zaXRpb24oKTt2YXIgbj10aGlzLm9wdGlvbnMuZnJhbWVzLG89dGhpcy5vcHRpb25zLmZwcyxzPXRoaXMub3B0aW9ucy5kdXJhdGlvbjtyZXR1cm4gdGhpcy5kdXJhdGlvbj1lLkR1cmF0aW9uc1tzXXx8cy50b0ludCgpLHRoaXMuZnJhbWVJbnRlcnZhbD0xZTMvbyx0aGlzLmZyYW1lcz1ufHxNYXRoLnJvdW5kKHRoaXMuZHVyYXRpb24vdGhpcy5mcmFtZUludGVydmFsKSx0aGlzLmZpcmVFdmVudCgic3RhcnQiLHRoaXMuc3ViamVjdCksci5jYWxsKHRoaXMsbyksdGhpc30sc3RvcDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmlzUnVubmluZygpJiYodGhpcy50aW1lPW51bGwsby5jYWxsKHRoaXMsdGhpcy5vcHRpb25zLmZwcyksdGhpcy5mcmFtZXM9PXRoaXMuZnJhbWU/KHRoaXMuZmlyZUV2ZW50KCJjb21wbGV0ZSIsdGhpcy5zdWJqZWN0KSx0aGlzLmNhbGxDaGFpbigpfHx0aGlzLmZpcmVFdmVudCgiY2hhaW5Db21wbGV0ZSIsdGhpcy5zdWJqZWN0KSk6dGhpcy5maXJlRXZlbnQoInN0b3AiLHRoaXMuc3ViamVjdCkpLHRoaXN9LGNhbmNlbDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmlzUnVubmluZygpJiYodGhpcy50aW1lPW51bGwsby5jYWxsKHRoaXMsdGhpcy5vcHRpb25zLmZwcyksdGhpcy5mcmFtZT10aGlzLmZyYW1lcyx0aGlzLmZpcmVFdmVudCgiY2FuY2VsIix0aGlzLnN1YmplY3QpLmNsZWFyQ2hhaW4oKSksdGhpc30scGF1c2U6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc1J1bm5pbmcoKSYmKHRoaXMudGltZT1udWxsLG8uY2FsbCh0aGlzLHRoaXMub3B0aW9ucy5mcHMpKSx0aGlzfSxyZXN1bWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5mcmFtZTx0aGlzLmZyYW1lcyYmIXRoaXMuaXNSdW5uaW5nKCkmJnIuY2FsbCh0aGlzLHRoaXMub3B0aW9ucy5mcHMpLHRoaXN9LGlzUnVubmluZzpmdW5jdGlvbigpe3ZhciBlPXRbdGhpcy5vcHRpb25zLmZwc107cmV0dXJuIGUmJmUuY29udGFpbnModGhpcyl9fSk7ZS5jb21wdXRlPWZ1bmN0aW9uKGUsdCxpKXtyZXR1cm4odC1lKSppK2V9LGUuRHVyYXRpb25zPXsic2hvcnQiOjI1MCxub3JtYWw6NTAwLCJsb25nIjoxZTN9O3ZhciB0PXt9LGk9e30sbj1mdW5jdGlvbigpe2Zvcih2YXIgZT1EYXRlLm5vdygpLHQ9dGhpcy5sZW5ndGg7dC0tOyl7dmFyIGk9dGhpc1t0XTtpJiZpLnN0ZXAoZSl9fSxyPWZ1bmN0aW9uKGUpe3ZhciByPXRbZV18fCh0W2VdPVtdKTtyLnB1c2godGhpcyksaVtlXXx8KGlbZV09bi5wZXJpb2RpY2FsKE1hdGgucm91bmQoMWUzL2UpLHIpKX0sbz1mdW5jdGlvbihlKXt2YXIgbj10W2VdO24mJihuLmVyYXNlKHRoaXMpLCFuLmxlbmd0aCYmaVtlXSYmKGRlbGV0ZSB0W2VdLGlbZV09Y2xlYXJJbnRlcnZhbChpW2VdKSkpfX0oKSxGeC5DU1M9bmV3IENsYXNzKHtFeHRlbmRzOkZ4LHByZXBhcmU6ZnVuY3Rpb24oZSx0LGkpe2k9QXJyYXkuZnJvbShpKTt2YXIgbj1pWzBdLHI9aVsxXTtpZihudWxsPT1yKXtyPW4sbj1lLmdldFN0eWxlKHQpO3ZhciBvPXRoaXMub3B0aW9ucy51bml0O2lmKG8mJm4uc2xpY2UoLW8ubGVuZ3RoKSE9byYmMCE9cGFyc2VGbG9hdChuKSl7ZS5zZXRTdHlsZSh0LHIrbyk7dmFyIHM9ZS5nZXRDb21wdXRlZFN0eWxlKHQpO2lmKCEvcHgkLy50ZXN0KHMpJiYocz1lLnN0eWxlWygicGl4ZWwtIit0KS5jYW1lbENhc2UoKV0sbnVsbD09cykpe3ZhciBhPWUuc3R5bGUubGVmdDtlLnN0eWxlLmxlZnQ9citvLHM9ZS5zdHlsZS5waXhlbExlZnQsZS5zdHlsZS5sZWZ0PWF9bj0ocnx8MSkvKHBhcnNlRmxvYXQocyl8fDEpKihwYXJzZUZsb2F0KG4pfHwwKSxlLnNldFN0eWxlKHQsbitvKX19cmV0dXJue2Zyb206dGhpcy5wYXJzZShuKSx0bzp0aGlzLnBhcnNlKHIpfX0scGFyc2U6ZnVuY3Rpb24oZSl7cmV0dXJuIGU9RnVuY3Rpb24uZnJvbShlKSgpLGU9InN0cmluZyI9PXR5cGVvZiBlP2Uuc3BsaXQoIiAiKTpBcnJheS5mcm9tKGUpLGUubWFwKGZ1bmN0aW9uKGUpe2UrPSIiO3ZhciB0PSExO3JldHVybiBPYmplY3QuZWFjaChGeC5DU1MuUGFyc2VycyxmdW5jdGlvbihpKXtpZighdCl7dmFyIG49aS5wYXJzZShlKTsobnx8MD09PW4pJiYodD17dmFsdWU6bixwYXJzZXI6aX0pfX0pLHQ9dHx8e3ZhbHVlOmUscGFyc2VyOkZ4LkNTUy5QYXJzZXJzLlN0cmluZ319KX0sY29tcHV0ZTpmdW5jdGlvbihlLHQsaSl7dmFyIG49W107cmV0dXJuIE1hdGgubWluKGUubGVuZ3RoLHQubGVuZ3RoKS50aW1lcyhmdW5jdGlvbihyKXtuLnB1c2goe3ZhbHVlOmVbcl0ucGFyc2VyLmNvbXB1dGUoZVtyXS52YWx1ZSx0W3JdLnZhbHVlLGkpLHBhcnNlcjplW3JdLnBhcnNlcn0pfSksbi4kZmFtaWx5PUZ1bmN0aW9uLmZyb20oImZ4OmNzczp2YWx1ZSIpLG59LHNlcnZlOmZ1bmN0aW9uKGUsdCl7ImZ4OmNzczp2YWx1ZSIhPXR5cGVPZihlKSYmKGU9dGhpcy5wYXJzZShlKSk7dmFyIGk9W107cmV0dXJuIGUuZWFjaChmdW5jdGlvbihlKXtpPWkuY29uY2F0KGUucGFyc2VyLnNlcnZlKGUudmFsdWUsdCkpfSksaX0scmVuZGVyOmZ1bmN0aW9uKGUsdCxpLG4pe2Uuc2V0U3R5bGUodCx0aGlzLnNlcnZlKGksbikpfSxzZWFyY2g6ZnVuY3Rpb24oZSl7aWYoRnguQ1NTLkNhY2hlW2VdKXJldHVybiBGeC5DU1MuQ2FjaGVbZV07dmFyIHQ9e30saT1SZWdFeHAoIl4iK2UuZXNjYXBlUmVnRXhwKCkrIiQiKTtyZXR1cm4gQXJyYXkuZWFjaChkb2N1bWVudC5zdHlsZVNoZWV0cyxmdW5jdGlvbihlKXt2YXIgbj1lLmhyZWY7aWYoIW58fCFuLmNvbnRhaW5zKCI6Ly8iKXx8bi5jb250YWlucyhkb2N1bWVudC5kb21haW4pKXt2YXIgcj1lLnJ1bGVzfHxlLmNzc1J1bGVzO0FycmF5LmVhY2gocixmdW5jdGlvbihlKXtpZihlLnN0eWxlKXt2YXIgbj1lLnNlbGVjdG9yVGV4dD9lLnNlbGVjdG9yVGV4dC5yZXBsYWNlKC9eXHcrLyxmdW5jdGlvbihlKXtyZXR1cm4gZS50b0xvd2VyQ2FzZSgpfSk6bnVsbDtuJiZpLnRlc3QobikmJk9iamVjdC5lYWNoKEVsZW1lbnQuU3R5bGVzLGZ1bmN0aW9uKGksbil7ZS5zdHlsZVtuXSYmIUVsZW1lbnQuU2hvcnRTdHlsZXNbbl0mJihpPWUuc3R5bGVbbl0rIiIsdFtuXT0vXnJnYi8udGVzdChpKT9pLnJnYlRvSGV4KCk6aSl9KX19KX19KSxGeC5DU1MuQ2FjaGVbZV09dH19KSxGeC5DU1MuQ2FjaGU9e30sRnguQ1NTLlBhcnNlcnM9e0NvbG9yOntwYXJzZTpmdW5jdGlvbihlKXtyZXR1cm4gZS5tYXRjaCgvXiNbMC05YS1mXXszLDZ9JC9pKT9lLmhleFRvUmdiKCEwKTooZT1lLm1hdGNoKC8oXGQrKSxccyooXGQrKSxccyooXGQrKS8pKT9bZVsxXSxlWzJdLGVbM11dOiExfSxjb21wdXRlOmZ1bmN0aW9uKGUsdCxpKXtyZXR1cm4gZS5tYXAoZnVuY3Rpb24obixyKXtyZXR1cm4gTWF0aC5yb3VuZChGeC5jb21wdXRlKGVbcl0sdFtyXSxpKSl9KX0sc2VydmU6ZnVuY3Rpb24oZSl7cmV0dXJuIGUubWFwKE51bWJlcil9fSxOdW1iZXI6e3BhcnNlOnBhcnNlRmxvYXQsY29tcHV0ZTpGeC5jb21wdXRlLHNlcnZlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQ/ZSt0OmV9fSxTdHJpbmc6e3BhcnNlOkZ1bmN0aW9uLmZyb20oITEpLGNvbXB1dGU6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdH0sc2VydmU6ZnVuY3Rpb24oZSl7cmV0dXJuIGV9fX0sRnguQ1NTLlBhcnNlcnM9bmV3IEhhc2goRnguQ1NTLlBhcnNlcnMpLEZ4LlR3ZWVuPW5ldyBDbGFzcyh7RXh0ZW5kczpGeC5DU1MsaW5pdGlhbGl6ZTpmdW5jdGlvbihlLHQpe3RoaXMuZWxlbWVudD10aGlzLnN1YmplY3Q9ZG9jdW1lbnQuaWQoZSksdGhpcy5wYXJlbnQodCl9LHNldDpmdW5jdGlvbihlLHQpe3JldHVybiAxPT1hcmd1bWVudHMubGVuZ3RoJiYodD1lLGU9dGhpcy5wcm9wZXJ0eXx8dGhpcy5vcHRpb25zLnByb3BlcnR5KSx0aGlzLnJlbmRlcih0aGlzLmVsZW1lbnQsZSx0LHRoaXMub3B0aW9ucy51bml0KSx0aGlzfSxzdGFydDpmdW5jdGlvbihlLHQsaSl7aWYoIXRoaXMuY2hlY2soZSx0LGkpKXJldHVybiB0aGlzO3ZhciBuPUFycmF5LmZsYXR0ZW4oYXJndW1lbnRzKTt0aGlzLnByb3BlcnR5PXRoaXMub3B0aW9ucy5wcm9wZXJ0eXx8bi5zaGlmdCgpO3ZhciByPXRoaXMucHJlcGFyZSh0aGlzLmVsZW1lbnQsdGhpcy5wcm9wZXJ0eSxuKTtyZXR1cm4gdGhpcy5wYXJlbnQoci5mcm9tLHIudG8pfX0pLEVsZW1lbnQuUHJvcGVydGllcy50d2Vlbj17c2V0OmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmdldCgidHdlZW4iKS5jYW5jZWwoKS5zZXRPcHRpb25zKGUpLHRoaXN9LGdldDpmdW5jdGlvbigpe3ZhciBlPXRoaXMucmV0cmlldmUoInR3ZWVuIik7cmV0dXJuIGV8fChlPW5ldyBGeC5Ud2Vlbih0aGlzLHtsaW5rOiJjYW5jZWwifSksdGhpcy5zdG9yZSgidHdlZW4iLGUpKSxlfX0sRWxlbWVudC5pbXBsZW1lbnQoe3R3ZWVuOmZ1bmN0aW9uKGUsdCxpKXtyZXR1cm4gdGhpcy5nZXQoInR3ZWVuIikuc3RhcnQoZSx0LGkpLHRoaXN9LGZhZGU6ZnVuY3Rpb24oKXt2YXIgZSx0LGk9dGhpcy5nZXQoInR3ZWVuIiksbj1bIm9wYWNpdHkiXS5hcHBlbmQoYXJndW1lbnRzKTtzd2l0Y2gobnVsbD09blsxXSYmKG5bMV09InRvZ2dsZSIpLG5bMV0pe2Nhc2UiaW4iOmU9InN0YXJ0IixuWzFdPTE7YnJlYWs7Y2FzZSJvdXQiOmU9InN0YXJ0IixuWzFdPTA7YnJlYWs7Y2FzZSJzaG93IjplPSJzZXQiLG5bMV09MTticmVhaztjYXNlImhpZGUiOmU9InNldCIsblsxXT0wO2JyZWFrO2Nhc2UidG9nZ2xlIjp2YXIgcj10aGlzLnJldHJpZXZlKCJmYWRlOmZsYWciLDE9PXRoaXMuZ2V0U3R5bGUoIm9wYWNpdHkiKSk7ZT0ic3RhcnQiLG5bMV09cj8wOjEsdGhpcy5zdG9yZSgiZmFkZTpmbGFnIiwhciksdD0hMDticmVhaztkZWZhdWx0OmU9InN0YXJ0In10fHx0aGlzLmVsaW1pbmF0ZSgiZmFkZTpmbGFnIiksaVtlXS5hcHBseShpLG4pO3ZhciBvPW5bbi5sZW5ndGgtMV07cmV0dXJuInNldCI9PWV8fDAhPW8/dGhpcy5zZXRTdHlsZSgidmlzaWJpbGl0eSIsMD09bz8iaGlkZGVuIjoidmlzaWJsZSIpOmkuY2hhaW4oZnVuY3Rpb24oKXt0aGlzLmVsZW1lbnQuc2V0U3R5bGUoInZpc2liaWxpdHkiLCJoaWRkZW4iKSx0aGlzLmNhbGxDaGFpbigpfSksdGhpc30saGlnaGxpZ2h0OmZ1bmN0aW9uKGUsdCl7dHx8KHQ9dGhpcy5yZXRyaWV2ZSgiaGlnaGxpZ2h0Om9yaWdpbmFsIix0aGlzLmdldFN0eWxlKCJiYWNrZ3JvdW5kLWNvbG9yIikpLHQ9InRyYW5zcGFyZW50Ij09dD8iI2ZmZiI6dCk7dmFyIGk9dGhpcy5nZXQoInR3ZWVuIik7cmV0dXJuIGkuc3RhcnQoImJhY2tncm91bmQtY29sb3IiLGV8fCIjZmZmZjg4Iix0KS5jaGFpbihmdW5jdGlvbigpe3RoaXMuc2V0U3R5bGUoImJhY2tncm91bmQtY29sb3IiLHRoaXMucmV0cmlldmUoImhpZ2hsaWdodDpvcmlnaW5hbCIpKSxpLmNhbGxDaGFpbigpfS5iaW5kKHRoaXMpKSx0aGlzfX0pLEZ4Lk1vcnBoPW5ldyBDbGFzcyh7RXh0ZW5kczpGeC5DU1MsaW5pdGlhbGl6ZTpmdW5jdGlvbihlLHQpe3RoaXMuZWxlbWVudD10aGlzLnN1YmplY3Q9ZG9jdW1lbnQuaWQoZSksdGhpcy5wYXJlbnQodCl9LHNldDpmdW5jdGlvbihlKXsic3RyaW5nIj09dHlwZW9mIGUmJihlPXRoaXMuc2VhcmNoKGUpKTtmb3IodmFyIHQgaW4gZSl0aGlzLnJlbmRlcih0aGlzLmVsZW1lbnQsdCxlW3RdLHRoaXMub3B0aW9ucy51bml0KTtyZXR1cm4gdGhpc30sY29tcHV0ZTpmdW5jdGlvbihlLHQsaSl7dmFyIG49e307Zm9yKHZhciByIGluIGUpbltyXT10aGlzLnBhcmVudChlW3JdLHRbcl0saSk7cmV0dXJuIG59LHN0YXJ0OmZ1bmN0aW9uKGUpe2lmKCF0aGlzLmNoZWNrKGUpKXJldHVybiB0aGlzOyJzdHJpbmciPT10eXBlb2YgZSYmKGU9dGhpcy5zZWFyY2goZSkpO3ZhciB0PXt9LGk9e307Zm9yKHZhciBuIGluIGUpe3ZhciByPXRoaXMucHJlcGFyZSh0aGlzLmVsZW1lbnQsbixlW25dKTt0W25dPXIuZnJvbSxpW25dPXIudG99cmV0dXJuIHRoaXMucGFyZW50KHQsaSl9fSksRWxlbWVudC5Qcm9wZXJ0aWVzLm1vcnBoPXtzZXQ6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuZ2V0KCJtb3JwaCIpLmNhbmNlbCgpLnNldE9wdGlvbnMoZSksdGhpc30sZ2V0OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5yZXRyaWV2ZSgibW9ycGgiKTtyZXR1cm4gZXx8KGU9bmV3IEZ4Lk1vcnBoKHRoaXMse2xpbms6ImNhbmNlbCJ9KSx0aGlzLnN0b3JlKCJtb3JwaCIsZSkpLGV9fSxFbGVtZW50LmltcGxlbWVudCh7bW9ycGg6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuZ2V0KCJtb3JwaCIpLnN0YXJ0KGUpLHRoaXN9fSksRnguaW1wbGVtZW50KHtnZXRUcmFuc2l0aW9uOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcHRpb25zLnRyYW5zaXRpb258fEZ4LlRyYW5zaXRpb25zLlNpbmUuZWFzZUluT3V0O2lmKCJzdHJpbmciPT10eXBlb2YgZSl7dmFyIHQ9ZS5zcGxpdCgiOiIpO2U9RnguVHJhbnNpdGlvbnMsZT1lW3RbMF1dfHxlW3RbMF0uY2FwaXRhbGl6ZSgpXSx0WzFdJiYoZT1lWyJlYXNlIit0WzFdLmNhcGl0YWxpemUoKSsodFsyXT90WzJdLmNhcGl0YWxpemUoKToiIildKX1yZXR1cm4gZX19KSxGeC5UcmFuc2l0aW9uPWZ1bmN0aW9uKGUsdCl7dD1BcnJheS5mcm9tKHQpO3ZhciBpPWZ1bmN0aW9uKGkpe3JldHVybiBlKGksdCl9O3JldHVybiBPYmplY3QuYXBwZW5kKGkse2Vhc2VJbjppLGVhc2VPdXQ6ZnVuY3Rpb24oaSl7cmV0dXJuIDEtZSgxLWksdCl9LGVhc2VJbk91dDpmdW5jdGlvbihpKXtyZXR1cm4oLjU+PWk/ZSgyKmksdCk6Mi1lKDIqKDEtaSksdCkpLzJ9fSl9LEZ4LlRyYW5zaXRpb25zPXtsaW5lYXI6ZnVuY3Rpb24oZSl7cmV0dXJuIGV9fSxGeC5UcmFuc2l0aW9ucz1uZXcgSGFzaChGeC5UcmFuc2l0aW9ucyksRnguVHJhbnNpdGlvbnMuZXh0ZW5kPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdCBpbiBlKUZ4LlRyYW5zaXRpb25zW3RdPW5ldyBGeC5UcmFuc2l0aW9uKGVbdF0pfSxGeC5UcmFuc2l0aW9ucy5leHRlbmQoe1BvdzpmdW5jdGlvbihlLHQpe3JldHVybiBNYXRoLnBvdyhlLHQmJnRbMF18fDYpfSxFeHBvOmZ1bmN0aW9uKGUpe3JldHVybiBNYXRoLnBvdygyLDgqKGUtMSkpfSxDaXJjOmZ1bmN0aW9uKGUpe3JldHVybiAxLU1hdGguc2luKE1hdGguYWNvcyhlKSl9LFNpbmU6ZnVuY3Rpb24oZSl7cmV0dXJuIDEtTWF0aC5jb3MoZSpNYXRoLlBJLzIpfSxCYWNrOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQ9dCYmdFswXXx8MS42MTgsTWF0aC5wb3coZSwyKSooKHQrMSkqZS10KX0sQm91bmNlOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdCxpPTAsbj0xOzE7aSs9bixuLz0yKWlmKGU+PSg3LTQqaSkvMTEpe3Q9bipuLU1hdGgucG93KCgxMS02KmktMTEqZSkvNCwyKTticmVha31yZXR1cm4gdH0sRWxhc3RpYzpmdW5jdGlvbihlLHQpe3JldHVybiBNYXRoLnBvdygyLDEwKi0tZSkqTWF0aC5jb3MoMjAqZSpNYXRoLlBJKih0JiZ0WzBdfHwxKS8zKX19KSxbIlF1YWQiLCJDdWJpYyIsIlF1YXJ0IiwiUXVpbnQiXS5lYWNoKGZ1bmN0aW9uKGUsdCl7RnguVHJhbnNpdGlvbnNbZV09bmV3IEZ4LlRyYW5zaXRpb24oZnVuY3Rpb24oZSl7cmV0dXJuIE1hdGgucG93KGUsdCsyKX0pfSksZnVuY3Rpb24oKXt2YXIgZT1mdW5jdGlvbigpe30sdD0ib25wcm9ncmVzcyJpbiBuZXcgQnJvd3Nlci5SZXF1ZXN0LGk9dGhpcy5SZXF1ZXN0PW5ldyBDbGFzcyh7SW1wbGVtZW50czpbQ2hhaW4sRXZlbnRzLE9wdGlvbnNdLG9wdGlvbnM6e3VybDoiIixkYXRhOiIiLGhlYWRlcnM6eyJYLVJlcXVlc3RlZC1XaXRoIjoiWE1MSHR0cFJlcXVlc3QiLEFjY2VwdDoidGV4dC9qYXZhc2NyaXB0LCB0ZXh0L2h0bWwsIGFwcGxpY2F0aW9uL3htbCwgdGV4dC94bWwsICovKiJ9LGFzeW5jOiEwLGZvcm1hdDohMSxtZXRob2Q6InBvc3QiLGxpbms6Imlnbm9yZSIsaXNTdWNjZXNzOm51bGwsZW11bGF0aW9uOiEwLHVybEVuY29kZWQ6ITAsZW5jb2Rpbmc6InV0Zi04IixldmFsU2NyaXB0czohMSxldmFsUmVzcG9uc2U6ITEsdGltZW91dDowLG5vQ2FjaGU6ITF9LGluaXRpYWxpemU6ZnVuY3Rpb24oZSl7dGhpcy54aHI9bmV3IEJyb3dzZXIuUmVxdWVzdCx0aGlzLnNldE9wdGlvbnMoZSksdGhpcy5oZWFkZXJzPXRoaXMub3B0aW9ucy5oZWFkZXJzfSxvblN0YXRlQ2hhbmdlOmZ1bmN0aW9uKCl7dmFyIGk9dGhpcy54aHI7ND09aS5yZWFkeVN0YXRlJiZ0aGlzLnJ1bm5pbmcmJih0aGlzLnJ1bm5pbmc9ITEsdGhpcy5zdGF0dXM9MCxGdW5jdGlvbi5hdHRlbXB0KGZ1bmN0aW9uKCl7dmFyIGU9aS5zdGF0dXM7dGhpcy5zdGF0dXM9MTIyMz09ZT8yMDQ6ZX0uYmluZCh0aGlzKSksaS5vbnJlYWR5c3RhdGVjaGFuZ2U9ZSx0JiYoaS5vbnByb2dyZXNzPWkub25sb2Fkc3RhcnQ9ZSksY2xlYXJUaW1lb3V0KHRoaXMudGltZXIpLHRoaXMucmVzcG9uc2U9e3RleHQ6dGhpcy54aHIucmVzcG9uc2VUZXh0fHwiIix4bWw6dGhpcy54aHIucmVzcG9uc2VYTUx9LHRoaXMub3B0aW9ucy5pc1N1Y2Nlc3MuY2FsbCh0aGlzLHRoaXMuc3RhdHVzKT90aGlzLnN1Y2Nlc3ModGhpcy5yZXNwb25zZS50ZXh0LHRoaXMucmVzcG9uc2UueG1sKTp0aGlzLmZhaWx1cmUoKSl9LGlzU3VjY2VzczpmdW5jdGlvbigpe3ZhciBlPXRoaXMuc3RhdHVzO3JldHVybiBlPj0yMDAmJjMwMD5lfSxpc1J1bm5pbmc6ZnVuY3Rpb24oKXtyZXR1cm4hIXRoaXMucnVubmluZ30scHJvY2Vzc1NjcmlwdHM6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMub3B0aW9ucy5ldmFsUmVzcG9uc2V8fC8oZWNtYXxqYXZhKXNjcmlwdC8udGVzdCh0aGlzLmdldEhlYWRlcigiQ29udGVudC10eXBlIikpP0Jyb3dzZXIuZXhlYyhlKTplLnN0cmlwU2NyaXB0cyh0aGlzLm9wdGlvbnMuZXZhbFNjcmlwdHMpfSxzdWNjZXNzOmZ1bmN0aW9uKGUsdCl7dGhpcy5vblN1Y2Nlc3ModGhpcy5wcm9jZXNzU2NyaXB0cyhlKSx0KX0sb25TdWNjZXNzOmZ1bmN0aW9uKCl7dGhpcy5maXJlRXZlbnQoImNvbXBsZXRlIixhcmd1bWVudHMpLmZpcmVFdmVudCgic3VjY2VzcyIsYXJndW1lbnRzKS5jYWxsQ2hhaW4oKX0sZmFpbHVyZTpmdW5jdGlvbigpe3RoaXMub25GYWlsdXJlKCl9LG9uRmFpbHVyZTpmdW5jdGlvbigpe3RoaXMuZmlyZUV2ZW50KCJjb21wbGV0ZSIpLmZpcmVFdmVudCgiZmFpbHVyZSIsdGhpcy54aHIpfSxsb2Fkc3RhcnQ6ZnVuY3Rpb24oZSl7dGhpcy5maXJlRXZlbnQoImxvYWRzdGFydCIsW2UsdGhpcy54aHJdKX0scHJvZ3Jlc3M6ZnVuY3Rpb24oZSl7dGhpcy5maXJlRXZlbnQoInByb2dyZXNzIixbZSx0aGlzLnhocl0pfSx0aW1lb3V0OmZ1bmN0aW9uKCl7dGhpcy5maXJlRXZlbnQoInRpbWVvdXQiLHRoaXMueGhyKX0sc2V0SGVhZGVyOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuaGVhZGVyc1tlXT10LHRoaXN9LGdldEhlYWRlcjpmdW5jdGlvbihlKXtyZXR1cm4gRnVuY3Rpb24uYXR0ZW1wdChmdW5jdGlvbigpe3JldHVybiB0aGlzLnhoci5nZXRSZXNwb25zZUhlYWRlcihlKX0uYmluZCh0aGlzKSl9LGNoZWNrOmZ1bmN0aW9uKCl7aWYoIXRoaXMucnVubmluZylyZXR1cm4hMDtzd2l0Y2godGhpcy5vcHRpb25zLmxpbmspe2Nhc2UiY2FuY2VsIjpyZXR1cm4gdGhpcy5jYW5jZWwoKSwhMDtjYXNlImNoYWluIjpyZXR1cm4gdGhpcy5jaGFpbih0aGlzLmNhbGxlci5wYXNzKGFyZ3VtZW50cyx0aGlzKSksITF9cmV0dXJuITF9LHNlbmQ6ZnVuY3Rpb24oZSl7aWYoIXRoaXMuY2hlY2soZSkpcmV0dXJuIHRoaXM7dGhpcy5vcHRpb25zLmlzU3VjY2Vzcz10aGlzLm9wdGlvbnMuaXNTdWNjZXNzfHx0aGlzLmlzU3VjY2Vzcyx0aGlzLnJ1bm5pbmc9ITA7dmFyIGk9dHlwZU9mKGUpOygic3RyaW5nIj09aXx8ImVsZW1lbnQiPT1pKSYmKGU9e2RhdGE6ZX0pO3ZhciBuPXRoaXMub3B0aW9ucztlPU9iamVjdC5hcHBlbmQoe2RhdGE6bi5kYXRhLHVybDpuLnVybCxtZXRob2Q6bi5tZXRob2R9LGUpO3ZhciByPWUuZGF0YSxvPWUudXJsKyIiLHM9ZS5tZXRob2QudG9Mb3dlckNhc2UoKTtzd2l0Y2godHlwZU9mKHIpKXtjYXNlImVsZW1lbnQiOnI9ZG9jdW1lbnQuaWQocikudG9RdWVyeVN0cmluZygpO2JyZWFrO2Nhc2Uib2JqZWN0IjpjYXNlImhhc2giOnI9T2JqZWN0LnRvUXVlcnlTdHJpbmcocil9aWYodGhpcy5vcHRpb25zLmZvcm1hdCl7dmFyIGE9ImZvcm1hdD0iK3RoaXMub3B0aW9ucy5mb3JtYXQ7cj1yP2ErIiYiK3I6YX1pZih0aGlzLm9wdGlvbnMuZW11bGF0aW9uJiYhWyJnZXQiLCJwb3N0Il0uY29udGFpbnMocykpe3ZhciBsPSJfbWV0aG9kPSIrcztyPXI/bCsiJiIrcjpsLHM9InBvc3QifWlmKHRoaXMub3B0aW9ucy51cmxFbmNvZGVkJiZbInBvc3QiLCJwdXQiXS5jb250YWlucyhzKSl7dmFyIGM9dGhpcy5vcHRpb25zLmVuY29kaW5nPyI7IGNoYXJzZXQ9Iit0aGlzLm9wdGlvbnMuZW5jb2Rpbmc6IiI7dGhpcy5oZWFkZXJzWyJDb250ZW50LXR5cGUiXT0iYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIitjfW98fChvPWRvY3VtZW50LmxvY2F0aW9uLnBhdGhuYW1lKTt2YXIgdT1vLmxhc3RJbmRleE9mKCIvIik7dT4tMSYmKHU9by5pbmRleE9mKCIjIikpPi0xJiYobz1vLnN1YnN0cigwLHUpKSx0aGlzLm9wdGlvbnMubm9DYWNoZSYmKG8rPShvLmNvbnRhaW5zKCI/Iik/IiYiOiI/IikrU3RyaW5nLnVuaXF1ZUlEKCkpLHImJiJnZXQiPT1zJiYobys9KG8uY29udGFpbnMoIj8iKT8iJiI6Ij8iKStyLHI9bnVsbCk7dmFyIGg9dGhpcy54aHI7cmV0dXJuIHQmJihoLm9ubG9hZHN0YXJ0PXRoaXMubG9hZHN0YXJ0LmJpbmQodGhpcyksaC5vbnByb2dyZXNzPXRoaXMucHJvZ3Jlc3MuYmluZCh0aGlzKSksaC5vcGVuKHMudG9VcHBlckNhc2UoKSxvLHRoaXMub3B0aW9ucy5hc3luYyx0aGlzLm9wdGlvbnMudXNlcix0aGlzLm9wdGlvbnMucGFzc3dvcmQpLHRoaXMub3B0aW9ucy51c2VyJiYid2l0aENyZWRlbnRpYWxzImluIGgmJihoLndpdGhDcmVkZW50aWFscz0hMCksaC5vbnJlYWR5c3RhdGVjaGFuZ2U9dGhpcy5vblN0YXRlQ2hhbmdlLmJpbmQodGhpcyksT2JqZWN0LmVhY2godGhpcy5oZWFkZXJzLGZ1bmN0aW9uKGUsdCl7dHJ5e2guc2V0UmVxdWVzdEhlYWRlcih0LGUpfWNhdGNoKGkpe3RoaXMuZmlyZUV2ZW50KCJleGNlcHRpb24iLFt0LGVdKX19LHRoaXMpLHRoaXMuZmlyZUV2ZW50KCJyZXF1ZXN0IiksaC5zZW5kKHIpLHRoaXMub3B0aW9ucy5hc3luYz90aGlzLm9wdGlvbnMudGltZW91dCYmKHRoaXMudGltZXI9dGhpcy50aW1lb3V0LmRlbGF5KHRoaXMub3B0aW9ucy50aW1lb3V0LHRoaXMpKTp0aGlzLm9uU3RhdGVDaGFuZ2UoKSx0aGlzfSxjYW5jZWw6ZnVuY3Rpb24oKXtpZighdGhpcy5ydW5uaW5nKXJldHVybiB0aGlzO3RoaXMucnVubmluZz0hMTt2YXIgaT10aGlzLnhocjtyZXR1cm4gaS5hYm9ydCgpLGNsZWFyVGltZW91dCh0aGlzLnRpbWVyKSxpLm9ucmVhZHlzdGF0ZWNoYW5nZT1lLHQmJihpLm9ucHJvZ3Jlc3M9aS5vbmxvYWRzdGFydD1lKSx0aGlzLnhocj1uZXcgQnJvd3Nlci5SZXF1ZXN0LHRoaXMuZmlyZUV2ZW50KCJjYW5jZWwiKSx0aGlzfX0pLG49e307WyJnZXQiLCJwb3N0IiwicHV0IiwiZGVsZXRlIiwiR0VUIiwiUE9TVCIsIlBVVCIsIkRFTEVURSJdLmVhY2goZnVuY3Rpb24oZSl7bltlXT1mdW5jdGlvbih0KXt2YXIgaT17bWV0aG9kOmV9O3JldHVybiBudWxsIT10JiYoaS5kYXRhPXQpLHRoaXMuc2VuZChpKX19KSxpLmltcGxlbWVudChuKSxFbGVtZW50LlByb3BlcnRpZXMuc2VuZD17c2V0OmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuZ2V0KCJzZW5kIikuY2FuY2VsKCk7cmV0dXJuIHQuc2V0T3B0aW9ucyhlKSx0aGlzfSxnZXQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnJldHJpZXZlKCJzZW5kIik7cmV0dXJuIGV8fChlPW5ldyBpKHtkYXRhOnRoaXMsbGluazoiY2FuY2VsIixtZXRob2Q6dGhpcy5nZXQoIm1ldGhvZCIpfHwicG9zdCIsdXJsOnRoaXMuZ2V0KCJhY3Rpb24iKX0pLHRoaXMuc3RvcmUoInNlbmQiLGUpKSxlfX0sRWxlbWVudC5pbXBsZW1lbnQoe3NlbmQ6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5nZXQoInNlbmQiKTtyZXR1cm4gdC5zZW5kKHtkYXRhOnRoaXMsdXJsOmV8fHQub3B0aW9ucy51cmx9KSx0aGlzfX0pfSgpLFJlcXVlc3QuSFRNTD1uZXcgQ2xhc3Moe0V4dGVuZHM6UmVxdWVzdCxvcHRpb25zOnt1cGRhdGU6ITEsYXBwZW5kOiExLGV2YWxTY3JpcHRzOiEwLGZpbHRlcjohMSxoZWFkZXJzOntBY2NlcHQ6InRleHQvaHRtbCwgYXBwbGljYXRpb24veG1sLCB0ZXh0L3htbCwgKi8qIn19LHN1Y2Nlc3M6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5vcHRpb25zLGk9dGhpcy5yZXNwb25zZTtpLmh0bWw9ZS5zdHJpcFNjcmlwdHMoZnVuY3Rpb24oZSl7aS5qYXZhc2NyaXB0PWV9KTt2YXIgbj1pLmh0bWwubWF0Y2goLzxib2R5W14+XSo+KFtcc1xTXSo/KTxcL2JvZHk+L2kpO24mJihpLmh0bWw9blsxXSk7dmFyIHI9bmV3IEVsZW1lbnQoImRpdiIpLnNldCgiaHRtbCIsaS5odG1sKTtpZihpLnRyZWU9ci5jaGlsZE5vZGVzLGkuZWxlbWVudHM9ci5nZXRFbGVtZW50cyh0LmZpbHRlcnx8IioiKSx0LmZpbHRlciYmKGkudHJlZT1pLmVsZW1lbnRzKSx0LnVwZGF0ZSl7dmFyIG89ZG9jdW1lbnQuaWQodC51cGRhdGUpLmVtcHR5KCk7dC5maWx0ZXI/by5hZG9wdChpLmVsZW1lbnRzKTpvLnNldCgiaHRtbCIsaS5odG1sKX1lbHNlIGlmKHQuYXBwZW5kKXt2YXIgcz1kb2N1bWVudC5pZCh0LmFwcGVuZCk7dC5maWx0ZXI/aS5lbGVtZW50cy5yZXZlcnNlKCkuaW5qZWN0KHMpOnMuYWRvcHQoci5nZXRDaGlsZHJlbigpKX10LmV2YWxTY3JpcHRzJiZCcm93c2VyLmV4ZWMoaS5qYXZhc2NyaXB0KSx0aGlzLm9uU3VjY2VzcyhpLnRyZWUsaS5lbGVtZW50cyxpLmh0bWwsaS5qYXZhc2NyaXB0KX19KSxFbGVtZW50LlByb3BlcnRpZXMubG9hZD17c2V0OmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuZ2V0KCJsb2FkIikuY2FuY2VsKCk7cmV0dXJuIHQuc2V0T3B0aW9ucyhlKSx0aGlzfSxnZXQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnJldHJpZXZlKCJsb2FkIik7cmV0dXJuIGV8fChlPW5ldyBSZXF1ZXN0LkhUTUwoe2RhdGE6dGhpcyxsaW5rOiJjYW5jZWwiLHVwZGF0ZTp0aGlzLG1ldGhvZDoiZ2V0In0pLHRoaXMuc3RvcmUoImxvYWQiLGUpKSxlfX0sRWxlbWVudC5pbXBsZW1lbnQoe2xvYWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXQoImxvYWQiKS5zZW5kKEFycmF5LmxpbmsoYXJndW1lbnRzLHtkYXRhOlR5cGUuaXNPYmplY3QsdXJsOlR5cGUuaXNTdHJpbmd9KSksdGhpc319KSwidW5kZWZpbmVkIj09dHlwZW9mIEpTT04mJih0aGlzLkpTT049e30pLEpTT049bmV3IEhhc2goe3N0cmluZ2lmeTpKU09OLnN0cmluZ2lmeSxwYXJzZTpKU09OLnBhcnNlfSksZnVuY3Rpb24oKXt2YXIgc3BlY2lhbD17IlxiIjoiXFxiIiwiCSI6IlxcdCIsIlxuIjoiXFxuIiwiXGYiOiJcXGYiLCJcciI6IlxcciIsJyInOidcXCInLCJcXCI6IlxcXFwifSxlc2NhcGU9ZnVuY3Rpb24oZSl7cmV0dXJuIHNwZWNpYWxbZV18fCJcXHUiKygiMDAwMCIrZS5jaGFyQ29kZUF0KDApLnRvU3RyaW5nKDE2KSkuc2xpY2UoLTQpfTtKU09OLnZhbGlkYXRlPWZ1bmN0aW9uKGUpe3JldHVybiBlPWUucmVwbGFjZSgvXFwoPzpbIlxcXC9iZm5ydF18dVswLTlhLWZBLUZdezR9KS9nLCJAIikucmVwbGFjZSgvIlteIlxcXG5ccl0qInx0cnVlfGZhbHNlfG51bGx8LT9cZCsoPzpcLlxkKik/KD86W2VFXVsrXC1dP1xkKyk/L2csIl0iKS5yZXBsYWNlKC8oPzpefDp8LCkoPzpccypcWykrL2csIiIpLC9eW1xdLDp7fVxzXSokLy50ZXN0KGUpfSxKU09OLmVuY29kZT1KU09OLnN0cmluZ2lmeT9mdW5jdGlvbihlKXtyZXR1cm4gSlNPTi5zdHJpbmdpZnkoZSl9OmZ1bmN0aW9uKGUpe3N3aXRjaChlJiZlLnRvSlNPTiYmKGU9ZS50b0pTT04oKSksdHlwZU9mKGUpKXtjYXNlInN0cmluZyI6cmV0dXJuJyInK2UucmVwbGFjZSgvW1x4MDAtXHgxZlxcIl0vZyxlc2NhcGUpKyciJztjYXNlImFycmF5IjpyZXR1cm4iWyIrZS5tYXAoSlNPTi5lbmNvZGUpLmNsZWFuKCkrIl0iO2Nhc2Uib2JqZWN0IjpjYXNlImhhc2giOnZhciB0PVtdO3JldHVybiBPYmplY3QuZWFjaChlLGZ1bmN0aW9uKGUsaSl7dmFyIG49SlNPTi5lbmNvZGUoZSk7biYmdC5wdXNoKEpTT04uZW5jb2RlKGkpKyI6IituKX0pLCJ7Iit0KyJ9IjtjYXNlIm51bWJlciI6Y2FzZSJib29sZWFuIjpyZXR1cm4iIitlO2Nhc2UibnVsbCI6cmV0dXJuIm51bGwifXJldHVybiBudWxsfSxKU09OLmRlY29kZT1mdW5jdGlvbihzdHJpbmcsc2VjdXJlKXtpZighc3RyaW5nfHwic3RyaW5nIiE9dHlwZU9mKHN0cmluZykpcmV0dXJuIG51bGw7aWYoc2VjdXJlfHxKU09OLnNlY3VyZSl7aWYoSlNPTi5wYXJzZSlyZXR1cm4gSlNPTi5wYXJzZShzdHJpbmcpO2lmKCFKU09OLnZhbGlkYXRlKHN0cmluZykpdGhyb3cgRXJyb3IoIkpTT04gY291bGQgbm90IGRlY29kZSB0aGUgaW5wdXQ7IHNlY3VyaXR5IGlzIGVuYWJsZWQgYW5kIHRoZSB2YWx1ZSBpcyBub3Qgc2VjdXJlLiIpfXJldHVybiBldmFsKCIoIitzdHJpbmcrIikiKX19KCksUmVxdWVzdC5KU09OPW5ldyBDbGFzcyh7RXh0ZW5kczpSZXF1ZXN0LG9wdGlvbnM6e3NlY3VyZTohMH0saW5pdGlhbGl6ZTpmdW5jdGlvbihlKXt0aGlzLnBhcmVudChlKSxPYmplY3QuYXBwZW5kKHRoaXMuaGVhZGVycyx7QWNjZXB0OiJhcHBsaWNhdGlvbi9qc29uIiwiWC1SZXF1ZXN0IjoiSlNPTiJ9KX0sc3VjY2VzczpmdW5jdGlvbihlKXt2YXIgdDt0cnl7dD10aGlzLnJlc3BvbnNlLmpzb249SlNPTi5kZWNvZGUoZSx0aGlzLm9wdGlvbnMuc2VjdXJlKX1jYXRjaChpKXtyZXR1cm4gdGhpcy5maXJlRXZlbnQoImVycm9yIixbZSxpXSksdm9pZCAwfW51bGw9PXQ/dGhpcy5vbkZhaWx1cmUoKTp0aGlzLm9uU3VjY2Vzcyh0LGUpfX0pO3ZhciBDb29raWU9bmV3IENsYXNzKHtJbXBsZW1lbnRzOk9wdGlvbnMsb3B0aW9uczp7cGF0aDoiLyIsZG9tYWluOiExLGR1cmF0aW9uOiExLHNlY3VyZTohMSxkb2N1bWVudDpkb2N1bWVudCxlbmNvZGU6ITB9LGluaXRpYWxpemU6ZnVuY3Rpb24oZSx0KXt0aGlzLmtleT1lLHRoaXMuc2V0T3B0aW9ucyh0KX0sd3JpdGU6ZnVuY3Rpb24oZSl7aWYodGhpcy5vcHRpb25zLmVuY29kZSYmKGU9ZW5jb2RlVVJJQ29tcG9uZW50KGUpKSx0aGlzLm9wdGlvbnMuZG9tYWluJiYoZSs9IjsgZG9tYWluPSIrdGhpcy5vcHRpb25zLmRvbWFpbiksdGhpcy5vcHRpb25zLnBhdGgmJihlKz0iOyBwYXRoPSIrdGhpcy5vcHRpb25zLnBhdGgpLHRoaXMub3B0aW9ucy5kdXJhdGlvbil7dmFyIHQ9bmV3IERhdGU7dC5zZXRUaW1lKHQuZ2V0VGltZSgpKzFlMyo2MCo2MCoyNCp0aGlzLm9wdGlvbnMuZHVyYXRpb24pLGUrPSI7IGV4cGlyZXM9Iit0LnRvR01UU3RyaW5nKCl9cmV0dXJuIHRoaXMub3B0aW9ucy5zZWN1cmUmJihlKz0iOyBzZWN1cmUiKSx0aGlzLm9wdGlvbnMuZG9jdW1lbnQuY29va2llPXRoaXMua2V5KyI9IitlLHRoaXN9LHJlYWQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9wdGlvbnMuZG9jdW1lbnQuY29va2llLm1hdGNoKCIoPzpefDspXFxzKiIrdGhpcy5rZXkuZXNjYXBlUmVnRXhwKCkrIj0oW147XSopIik7cmV0dXJuIGU/ZGVjb2RlVVJJQ29tcG9uZW50KGVbMV0pOm51bGx9LGRpc3Bvc2U6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IENvb2tpZSh0aGlzLmtleSxPYmplY3QubWVyZ2Uoe30sdGhpcy5vcHRpb25zLHtkdXJhdGlvbjotMX0pKS53cml0ZSgiIiksdGhpc319KTtDb29raWUud3JpdGU9ZnVuY3Rpb24oZSx0LGkpe3JldHVybiBuZXcgQ29va2llKGUsaSkud3JpdGUodCl9LENvb2tpZS5yZWFkPWZ1bmN0aW9uKGUpe3JldHVybiBuZXcgQ29va2llKGUpLnJlYWQoKX0sQ29va2llLmRpc3Bvc2U9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gbmV3IENvb2tpZShlLHQpLmRpc3Bvc2UoKX0sZnVuY3Rpb24oZSx0KXt2YXIgaSxuLHIsbyxzPVtdLGE9dC5jcmVhdGVFbGVtZW50KCJkaXYiKSxsPWZ1bmN0aW9uKCl7Y2xlYXJUaW1lb3V0KG8pLGl8fChCcm93c2VyLmxvYWRlZD1pPSEwLHQucmVtb3ZlTGlzdGVuZXIoIkRPTUNvbnRlbnRMb2FkZWQiLGwpLnJlbW92ZUxpc3RlbmVyKCJyZWFkeXN0YXRlY2hhbmdlIixjKSx0LmZpcmVFdmVudCgiZG9tcmVhZHkiKSxlLmZpcmVFdmVudCgiZG9tcmVhZHkiKSl9LGM9ZnVuY3Rpb24oKXtmb3IodmFyIGU9cy5sZW5ndGg7ZS0tOylpZihzW2VdKCkpcmV0dXJuIGwoKSwhMDtyZXR1cm4hMX0sdT1mdW5jdGlvbigpe2NsZWFyVGltZW91dChvKSxjKCl8fChvPXNldFRpbWVvdXQodSwxMCkpfTt0LmFkZExpc3RlbmVyKCJET01Db250ZW50TG9hZGVkIixsKTt2YXIgaD1mdW5jdGlvbigpe3RyeXtyZXR1cm4gYS5kb1Njcm9sbCgpLCEwfWNhdGNoKGUpe31yZXR1cm4hMX07YS5kb1Njcm9sbCYmIWgoKSYmKHMucHVzaChoKSxyPSEwKSx0LnJlYWR5U3RhdGUmJnMucHVzaChmdW5jdGlvbigpe3ZhciBlPXQucmVhZHlTdGF0ZTtyZXR1cm4ibG9hZGVkIj09ZXx8ImNvbXBsZXRlIj09ZX0pLCJvbnJlYWR5c3RhdGVjaGFuZ2UiaW4gdD90LmFkZExpc3RlbmVyKCJyZWFkeXN0YXRlY2hhbmdlIixjKTpyPSEwLHImJnUoKSxFbGVtZW50LkV2ZW50cy5kb21yZWFkeT17b25BZGQ6ZnVuY3Rpb24oZSl7aSYmZS5jYWxsKHRoaXMpfX0sRWxlbWVudC5FdmVudHMubG9hZD17YmFzZToibG9hZCIsb25BZGQ6ZnVuY3Rpb24odCl7biYmdGhpcz09ZSYmdC5jYWxsKHRoaXMpfSxjb25kaXRpb246ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcz09ZSYmKGwoKSxkZWxldGUgRWxlbWVudC5FdmVudHMubG9hZCksITB9fSxlLmFkZEV2ZW50KCJsb2FkIixmdW5jdGlvbigpe249ITB9KX0od2luZG93LGRvY3VtZW50KSxmdW5jdGlvbigpe3ZhciBTd2lmZj10aGlzLlN3aWZmPW5ldyBDbGFzcyh7SW1wbGVtZW50czpPcHRpb25zLG9wdGlvbnM6e2lkOm51bGwsaGVpZ2h0OjEsd2lkdGg6MSxjb250YWluZXI6bnVsbCxwcm9wZXJ0aWVzOnt9LHBhcmFtczp7cXVhbGl0eToiaGlnaCIsYWxsb3dTY3JpcHRBY2Nlc3M6ImFsd2F5cyIsd01vZGU6IndpbmRvdyIsc3dMaXZlQ29ubmVjdDohMH0sY2FsbEJhY2tzOnt9LHZhcnM6e319LHRvRWxlbWVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLm9iamVjdH0saW5pdGlhbGl6ZTpmdW5jdGlvbihlLHQpe3RoaXMuaW5zdGFuY2U9IlN3aWZmXyIrU3RyaW5nLnVuaXF1ZUlEKCksdGhpcy5zZXRPcHRpb25zKHQpLHQ9dGhpcy5vcHRpb25zO3ZhciBpPXRoaXMuaWQ9dC5pZHx8dGhpcy5pbnN0YW5jZSxuPWRvY3VtZW50LmlkKHQuY29udGFpbmVyKTtTd2lmZi5DYWxsQmFja3NbdGhpcy5pbnN0YW5jZV09e307dmFyIHI9dC5wYXJhbXMsbz10LnZhcnMscz10LmNhbGxCYWNrcyxhPU9iamVjdC5hcHBlbmQoe2hlaWdodDp0LmhlaWdodCx3aWR0aDp0LndpZHRofSx0LnByb3BlcnRpZXMpLGw9dGhpcztmb3IodmFyIGMgaW4gcylTd2lmZi5DYWxsQmFja3NbdGhpcy5pbnN0YW5jZV1bY109ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGUuYXBwbHkobC5vYmplY3QsYXJndW1lbnRzKX19KHNbY10pLG9bY109IlN3aWZmLkNhbGxCYWNrcy4iK3RoaXMuaW5zdGFuY2UrIi4iK2M7ci5mbGFzaFZhcnM9T2JqZWN0LnRvUXVlcnlTdHJpbmcobyksQnJvd3Nlci5pZT8oYS5jbGFzc2lkPSJjbHNpZDpEMjdDREI2RS1BRTZELTExY2YtOTZCOC00NDQ1NTM1NDAwMDAiLHIubW92aWU9ZSk6YS50eXBlPSJhcHBsaWNhdGlvbi94LXNob2Nrd2F2ZS1mbGFzaCIsYS5kYXRhPWU7dmFyIHU9JzxvYmplY3QgaWQ9IicraSsnIic7Zm9yKHZhciBoIGluIGEpdSs9IiAiK2grJz0iJythW2hdKyciJzt1Kz0iPiI7Zm9yKHZhciBkIGluIHIpcltkXSYmKHUrPSc8cGFyYW0gbmFtZT0iJytkKyciIHZhbHVlPSInK3JbZF0rJyIgLz4nKTt1Kz0iPC9vYmplY3Q+Iix0aGlzLm9iamVjdD0obj9uLmVtcHR5KCk6bmV3IEVsZW1lbnQoImRpdiIpKS5zZXQoImh0bWwiLHUpLmZpcnN0Q2hpbGR9LHJlcGxhY2VzOmZ1bmN0aW9uKGUpe3JldHVybiBlPWRvY3VtZW50LmlkKGUsITApLGUucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQodGhpcy50b0VsZW1lbnQoKSxlKSx0aGlzfSxpbmplY3Q6ZnVuY3Rpb24oZSl7cmV0dXJuIGRvY3VtZW50LmlkKGUsITApLmFwcGVuZENoaWxkKHRoaXMudG9FbGVtZW50KCkpLHRoaXN9LHJlbW90ZTpmdW5jdGlvbigpe3JldHVybiBTd2lmZi5yZW1vdGUuYXBwbHkoU3dpZmYsW3RoaXMudG9FbGVtZW50KCldLmFwcGVuZChhcmd1bWVudHMpKX19KTtTd2lmZi5DYWxsQmFja3M9e30sU3dpZmYucmVtb3RlPWZ1bmN0aW9uKG9iaixmbil7dmFyIHJzPW9iai5DYWxsRnVuY3Rpb24oJzxpbnZva2UgbmFtZT0iJytmbisnIiByZXR1cm50eXBlPSJqYXZhc2NyaXB0Ij4nK19fZmxhc2hfX2FyZ3VtZW50c1RvWE1MKGFyZ3VtZW50cywyKSsiPC9pbnZva2U+Iik7cmV0dXJuIGV2YWwocnMpfX0oKTs=",
                "body": "KGZ1bmN0aW9uKCl7dGhpcy5Nb29Ub29scz17dmVyc2lvbjoiMS40LjUiLGJ1aWxkOiJhYjhlYTg4MjRkYzNiMjRiNjY2Njg2N2EyYzRlZDU4ZWJiNzYyY2YwIn07dmFyIGU9dGhpcy50eXBlT2Y9ZnVuY3Rpb24oZSl7aWYobnVsbD09ZSlyZXR1cm4ibnVsbCI7aWYobnVsbCE9ZS4kZmFtaWx5KXJldHVybiBlLiRmYW1pbHkoKTtpZihlLm5vZGVOYW1lKXtpZigxPT1lLm5vZGVUeXBlKXJldHVybiJlbGVtZW50IjtpZigzPT1lLm5vZGVUeXBlKXJldHVybi9cUy8udGVzdChlLm5vZGVWYWx1ZSk/InRleHRub2RlIjoid2hpdGVzcGFjZSJ9ZWxzZSBpZigibnVtYmVyIj09dHlwZW9mIGUubGVuZ3RoKXtpZihlLmNhbGxlZSlyZXR1cm4iYXJndW1lbnRzIjtpZigiaXRlbSJpbiBlKXJldHVybiJjb2xsZWN0aW9uIn1yZXR1cm4gdHlwZW9mIGV9LHQ9dGhpcy5pbnN0YW5jZU9mPWZ1bmN0aW9uKGUsdCl7aWYobnVsbD09ZSlyZXR1cm4hMTtmb3IodmFyIGk9ZS4kY29uc3RydWN0b3J8fGUuY29uc3RydWN0b3I7aTspe2lmKGk9PT10KXJldHVybiEwO2k9aS5wYXJlbnR9cmV0dXJuIGUuaGFzT3duUHJvcGVydHk/ZSBpbnN0YW5jZW9mIHQ6ITF9LGk9dGhpcy5GdW5jdGlvbixuPSEwO2Zvcih2YXIgciBpbnt0b1N0cmluZzoxfSluPW51bGw7biYmKG49WyJoYXNPd25Qcm9wZXJ0eSIsInZhbHVlT2YiLCJpc1Byb3RvdHlwZU9mIiwicHJvcGVydHlJc0VudW1lcmFibGUiLCJ0b0xvY2FsZVN0cmluZyIsInRvU3RyaW5nIiwiY29uc3RydWN0b3IiXSksaS5wcm90b3R5cGUub3ZlcmxvYWRTZXR0ZXI9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztyZXR1cm4gZnVuY3Rpb24oaSxyKXtpZihudWxsPT1pKXJldHVybiB0aGlzO2lmKGV8fCJzdHJpbmciIT10eXBlb2YgaSl7Zm9yKHZhciBvIGluIGkpdC5jYWxsKHRoaXMsbyxpW29dKTtpZihuKWZvcih2YXIgcz1uLmxlbmd0aDtzLS07KW89bltzXSxpLmhhc093blByb3BlcnR5KG8pJiZ0LmNhbGwodGhpcyxvLGlbb10pfWVsc2UgdC5jYWxsKHRoaXMsaSxyKTtyZXR1cm4gdGhpc319LGkucHJvdG90eXBlLm92ZXJsb2FkR2V0dGVyPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7cmV0dXJuIGZ1bmN0aW9uKGkpe3ZhciBuLHI7aWYoInN0cmluZyIhPXR5cGVvZiBpP249aTphcmd1bWVudHMubGVuZ3RoPjE/bj1hcmd1bWVudHM6ZSYmKG49W2ldKSxuKXtyPXt9O2Zvcih2YXIgbz0wO24ubGVuZ3RoPm87bysrKXJbbltvXV09dC5jYWxsKHRoaXMsbltvXSl9ZWxzZSByPXQuY2FsbCh0aGlzLGkpO3JldHVybiByfX0saS5wcm90b3R5cGUuZXh0ZW5kPWZ1bmN0aW9uKGUsdCl7dGhpc1tlXT10fS5vdmVybG9hZFNldHRlcigpLGkucHJvdG90eXBlLmltcGxlbWVudD1mdW5jdGlvbihlLHQpe3RoaXMucHJvdG90eXBlW2VdPXR9Lm92ZXJsb2FkU2V0dGVyKCk7dmFyIG89QXJyYXkucHJvdG90eXBlLnNsaWNlO2kuZnJvbT1mdW5jdGlvbih0KXtyZXR1cm4iZnVuY3Rpb24iPT1lKHQpP3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdH19LEFycmF5LmZyb209ZnVuY3Rpb24odCl7cmV0dXJuIG51bGw9PXQ/W106cy5pc0VudW1lcmFibGUodCkmJiJzdHJpbmciIT10eXBlb2YgdD8iYXJyYXkiPT1lKHQpP3Q6by5jYWxsKHQpOlt0XX0sTnVtYmVyLmZyb209ZnVuY3Rpb24oZSl7dmFyIHQ9cGFyc2VGbG9hdChlKTtyZXR1cm4gaXNGaW5pdGUodCk/dDpudWxsfSxTdHJpbmcuZnJvbT1mdW5jdGlvbihlKXtyZXR1cm4gZSsiIn0saS5pbXBsZW1lbnQoe2hpZGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kaGlkZGVuPSEwLHRoaXN9LHByb3RlY3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kcHJvdGVjdGVkPSEwLHRoaXN9fSk7dmFyIHM9dGhpcy5UeXBlPWZ1bmN0aW9uKHQsaSl7aWYodCl7dmFyIG49dC50b0xvd2VyQ2FzZSgpLHI9ZnVuY3Rpb24odCl7cmV0dXJuIGUodCk9PW59O3NbImlzIit0XT1yLG51bGwhPWkmJihpLnByb3RvdHlwZS4kZmFtaWx5PWZ1bmN0aW9uKCl7cmV0dXJuIG59LmhpZGUoKSxpLnR5cGU9cil9cmV0dXJuIG51bGw9PWk/bnVsbDooaS5leHRlbmQodGhpcyksaS4kY29uc3RydWN0b3I9cyxpLnByb3RvdHlwZS4kY29uc3RydWN0b3I9aSxpKX0sYT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO3MuaXNFbnVtZXJhYmxlPWZ1bmN0aW9uKGUpe3JldHVybiBudWxsIT1lJiYibnVtYmVyIj09dHlwZW9mIGUubGVuZ3RoJiYiW29iamVjdCBGdW5jdGlvbl0iIT1hLmNhbGwoZSl9O3ZhciBsPXt9LGM9ZnVuY3Rpb24odCl7dmFyIGk9ZSh0LnByb3RvdHlwZSk7cmV0dXJuIGxbaV18fChsW2ldPVtdKX0sdT1mdW5jdGlvbih0LGkpe2lmKCFpfHwhaS4kaGlkZGVuKXtmb3IodmFyIG49Yyh0aGlzKSxyPTA7bi5sZW5ndGg+cjtyKyspe3ZhciBzPW5bcl07InR5cGUiPT1lKHMpP3UuY2FsbChzLHQsaSk6cy5jYWxsKHRoaXMsdCxpKX12YXIgYT10aGlzLnByb3RvdHlwZVt0XTtudWxsIT1hJiZhLiRwcm90ZWN0ZWR8fCh0aGlzLnByb3RvdHlwZVt0XT1pKSxudWxsPT10aGlzW3RdJiYiZnVuY3Rpb24iPT1lKGkpJiZoLmNhbGwodGhpcyx0LGZ1bmN0aW9uKGUpe3JldHVybiBpLmFwcGx5KGUsby5jYWxsKGFyZ3VtZW50cywxKSl9KX19LGg9ZnVuY3Rpb24oZSx0KXtpZighdHx8IXQuJGhpZGRlbil7dmFyIGk9dGhpc1tlXTtudWxsIT1pJiZpLiRwcm90ZWN0ZWR8fCh0aGlzW2VdPXQpfX07cy5pbXBsZW1lbnQoe2ltcGxlbWVudDp1Lm92ZXJsb2FkU2V0dGVyKCksZXh0ZW5kOmgub3ZlcmxvYWRTZXR0ZXIoKSxhbGlhczpmdW5jdGlvbihlLHQpe3UuY2FsbCh0aGlzLGUsdGhpcy5wcm90b3R5cGVbdF0pfS5vdmVybG9hZFNldHRlcigpLG1pcnJvcjpmdW5jdGlvbihlKXtyZXR1cm4gYyh0aGlzKS5wdXNoKGUpLHRoaXN9fSksbmV3IHMoIlR5cGUiLHMpO3ZhciBkPWZ1bmN0aW9uKGUsdCxpKXt2YXIgbj10IT1PYmplY3Qscj10LnByb3RvdHlwZTtuJiYodD1uZXcgcyhlLHQpKTtmb3IodmFyIG89MCxhPWkubGVuZ3RoO2E+bztvKyspe3ZhciBsPWlbb10sYz10W2xdLHU9cltsXTtjJiZjLnByb3RlY3QoKSxuJiZ1JiZ0LmltcGxlbWVudChsLHUucHJvdGVjdCgpKX1pZihuKXt2YXIgaD1yLnByb3BlcnR5SXNFbnVtZXJhYmxlKGlbMF0pO3QuZm9yRWFjaE1ldGhvZD1mdW5jdGlvbihlKXtpZighaClmb3IodmFyIHQ9MCxuPWkubGVuZ3RoO24+dDt0KyspZS5jYWxsKHIscltpW3RdXSxpW3RdKTtmb3IodmFyIG8gaW4gcillLmNhbGwocixyW29dLG8pfX1yZXR1cm4gZH07ZCgiU3RyaW5nIixTdHJpbmcsWyJjaGFyQXQiLCJjaGFyQ29kZUF0IiwiY29uY2F0IiwiaW5kZXhPZiIsImxhc3RJbmRleE9mIiwibWF0Y2giLCJxdW90ZSIsInJlcGxhY2UiLCJzZWFyY2giLCJzbGljZSIsInNwbGl0Iiwic3Vic3RyIiwic3Vic3RyaW5nIiwidHJpbSIsInRvTG93ZXJDYXNlIiwidG9VcHBlckNhc2UiXSkoIkFycmF5IixBcnJheSxbInBvcCIsInB1c2giLCJyZXZlcnNlIiwic2hpZnQiLCJzb3J0Iiwic3BsaWNlIiwidW5zaGlmdCIsImNvbmNhdCIsImpvaW4iLCJzbGljZSIsImluZGV4T2YiLCJsYXN0SW5kZXhPZiIsImZpbHRlciIsImZvckVhY2giLCJldmVyeSIsIm1hcCIsInNvbWUiLCJyZWR1Y2UiLCJyZWR1Y2VSaWdodCJdKSgiTnVtYmVyIixOdW1iZXIsWyJ0b0V4cG9uZW50aWFsIiwidG9GaXhlZCIsInRvTG9jYWxlU3RyaW5nIiwidG9QcmVjaXNpb24iXSkoIkZ1bmN0aW9uIixpLFsiYXBwbHkiLCJjYWxsIiwiYmluZCJdKSgiUmVnRXhwIixSZWdFeHAsWyJleGVjIiwidGVzdCJdKSgiT2JqZWN0IixPYmplY3QsWyJjcmVhdGUiLCJkZWZpbmVQcm9wZXJ0eSIsImRlZmluZVByb3BlcnRpZXMiLCJrZXlzIiwiZ2V0UHJvdG90eXBlT2YiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJnZXRPd25Qcm9wZXJ0eU5hbWVzIiwicHJldmVudEV4dGVuc2lvbnMiLCJpc0V4dGVuc2libGUiLCJzZWFsIiwiaXNTZWFsZWQiLCJmcmVlemUiLCJpc0Zyb3plbiJdKSgiRGF0ZSIsRGF0ZSxbIm5vdyJdKSxPYmplY3QuZXh0ZW5kPWgub3ZlcmxvYWRTZXR0ZXIoKSxEYXRlLmV4dGVuZCgibm93IixmdW5jdGlvbigpe3JldHVybituZXcgRGF0ZX0pLG5ldyBzKCJCb29sZWFuIixCb29sZWFuKSxOdW1iZXIucHJvdG90eXBlLiRmYW1pbHk9ZnVuY3Rpb24oKXtyZXR1cm4gaXNGaW5pdGUodGhpcyk/Im51bWJlciI6Im51bGwifS5oaWRlKCksTnVtYmVyLmV4dGVuZCgicmFuZG9tIixmdW5jdGlvbihlLHQpe3JldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqKHQtZSsxKStlKX0pO3ZhciBwPU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7T2JqZWN0LmV4dGVuZCgiZm9yRWFjaCIsZnVuY3Rpb24oZSx0LGkpe2Zvcih2YXIgbiBpbiBlKXAuY2FsbChlLG4pJiZ0LmNhbGwoaSxlW25dLG4sZSl9KSxPYmplY3QuZWFjaD1PYmplY3QuZm9yRWFjaCxBcnJheS5pbXBsZW1lbnQoe2ZvckVhY2g6ZnVuY3Rpb24oZSx0KXtmb3IodmFyIGk9MCxuPXRoaXMubGVuZ3RoO24+aTtpKyspaSBpbiB0aGlzJiZlLmNhbGwodCx0aGlzW2ldLGksdGhpcyl9LGVhY2g6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gQXJyYXkuZm9yRWFjaCh0aGlzLGUsdCksdGhpc319KTt2YXIgZj1mdW5jdGlvbih0KXtzd2l0Y2goZSh0KSl7Y2FzZSJhcnJheSI6cmV0dXJuIHQuY2xvbmUoKTtjYXNlIm9iamVjdCI6cmV0dXJuIE9iamVjdC5jbG9uZSh0KTtkZWZhdWx0OnJldHVybiB0fX07QXJyYXkuaW1wbGVtZW50KCJjbG9uZSIsZnVuY3Rpb24oKXtmb3IodmFyIGU9dGhpcy5sZW5ndGgsdD1BcnJheShlKTtlLS07KXRbZV09Zih0aGlzW2VdKTtyZXR1cm4gdH0pO3ZhciBtPWZ1bmN0aW9uKHQsaSxuKXtzd2l0Y2goZShuKSl7Y2FzZSJvYmplY3QiOiJvYmplY3QiPT1lKHRbaV0pP09iamVjdC5tZXJnZSh0W2ldLG4pOnRbaV09T2JqZWN0LmNsb25lKG4pO2JyZWFrO2Nhc2UiYXJyYXkiOnRbaV09bi5jbG9uZSgpO2JyZWFrO2RlZmF1bHQ6dFtpXT1ufXJldHVybiB0fTtPYmplY3QuZXh0ZW5kKHttZXJnZTpmdW5jdGlvbih0LGksbil7aWYoInN0cmluZyI9PWUoaSkpcmV0dXJuIG0odCxpLG4pO2Zvcih2YXIgcj0xLG89YXJndW1lbnRzLmxlbmd0aDtvPnI7cisrKXt2YXIgcz1hcmd1bWVudHNbcl07Zm9yKHZhciBhIGluIHMpbSh0LGEsc1thXSl9cmV0dXJuIHR9LGNsb25lOmZ1bmN0aW9uKGUpe3ZhciB0PXt9O2Zvcih2YXIgaSBpbiBlKXRbaV09ZihlW2ldKTtyZXR1cm4gdH0sYXBwZW5kOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD0xLGk9YXJndW1lbnRzLmxlbmd0aDtpPnQ7dCsrKXt2YXIgbj1hcmd1bWVudHNbdF18fHt9O2Zvcih2YXIgciBpbiBuKWVbcl09bltyXX1yZXR1cm4gZX19KSxbIk9iamVjdCIsIldoaXRlU3BhY2UiLCJUZXh0Tm9kZSIsIkNvbGxlY3Rpb24iLCJBcmd1bWVudHMiXS5lYWNoKGZ1bmN0aW9uKGUpe25ldyBzKGUpfSk7dmFyIGc9RGF0ZS5ub3coKTtTdHJpbmcuZXh0ZW5kKCJ1bmlxdWVJRCIsZnVuY3Rpb24oKXtyZXR1cm4oZysrKS50b1N0cmluZygzNil9KTt2YXIgdj10aGlzLkhhc2g9bmV3IHMoIkhhc2giLGZ1bmN0aW9uKHQpeyJoYXNoIj09ZSh0KSYmKHQ9T2JqZWN0LmNsb25lKHQuZ2V0Q2xlYW4oKSkpO2Zvcih2YXIgaSBpbiB0KXRoaXNbaV09dFtpXTtyZXR1cm4gdGhpc30pO3YuaW1wbGVtZW50KHtmb3JFYWNoOmZ1bmN0aW9uKGUsdCl7T2JqZWN0LmZvckVhY2godGhpcyxlLHQpfSxnZXRDbGVhbjpmdW5jdGlvbigpe3ZhciBlPXt9O2Zvcih2YXIgdCBpbiB0aGlzKXRoaXMuaGFzT3duUHJvcGVydHkodCkmJihlW3RdPXRoaXNbdF0pO3JldHVybiBlfSxnZXRMZW5ndGg6ZnVuY3Rpb24oKXt2YXIgZT0wO2Zvcih2YXIgdCBpbiB0aGlzKXRoaXMuaGFzT3duUHJvcGVydHkodCkmJmUrKztyZXR1cm4gZX19KSx2LmFsaWFzKCJlYWNoIiwiZm9yRWFjaCIpLE9iamVjdC50eXBlPXMuaXNPYmplY3Q7dmFyIGI9dGhpcy5OYXRpdmU9ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBzKGUubmFtZSxlLmluaXRpYWxpemUpfTtiLnR5cGU9cy50eXBlLGIuaW1wbGVtZW50PWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBpPTA7ZS5sZW5ndGg+aTtpKyspZVtpXS5pbXBsZW1lbnQodCk7cmV0dXJuIGJ9O3ZhciB5PUFycmF5LnR5cGU7QXJyYXkudHlwZT1mdW5jdGlvbihlKXtyZXR1cm4gdChlLEFycmF5KXx8eShlKX0sdGhpcy4kQT1mdW5jdGlvbihlKXtyZXR1cm4gQXJyYXkuZnJvbShlKS5zbGljZSgpfSx0aGlzLiRhcmd1bWVudHM9ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGFyZ3VtZW50c1tlXX19LHRoaXMuJGNoaz1mdW5jdGlvbihlKXtyZXR1cm4hKCFlJiYwIT09ZSl9LHRoaXMuJGNsZWFyPWZ1bmN0aW9uKGUpe3JldHVybiBjbGVhclRpbWVvdXQoZSksY2xlYXJJbnRlcnZhbChlKSxudWxsfSx0aGlzLiRkZWZpbmVkPWZ1bmN0aW9uKGUpe3JldHVybiBudWxsIT1lfSx0aGlzLiRlYWNoPWZ1bmN0aW9uKHQsaSxuKXt2YXIgcj1lKHQpOygiYXJndW1lbnRzIj09cnx8ImNvbGxlY3Rpb24iPT1yfHwiYXJyYXkiPT1yfHwiZWxlbWVudHMiPT1yP0FycmF5Ok9iamVjdCkuZWFjaCh0LGksbil9LHRoaXMuJGVtcHR5PWZ1bmN0aW9uKCl7fSx0aGlzLiRleHRlbmQ9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gT2JqZWN0LmFwcGVuZChlLHQpfSx0aGlzLiRIPWZ1bmN0aW9uKGUpe3JldHVybiBuZXcgdihlKX0sdGhpcy4kbWVyZ2U9ZnVuY3Rpb24oKXt2YXIgZT1BcnJheS5zbGljZShhcmd1bWVudHMpO3JldHVybiBlLnVuc2hpZnQoe30pLE9iamVjdC5tZXJnZS5hcHBseShudWxsLGUpfSx0aGlzLiRsYW1iZGE9aS5mcm9tLHRoaXMuJG1peGluPU9iamVjdC5tZXJnZSx0aGlzLiRyYW5kb209TnVtYmVyLnJhbmRvbSx0aGlzLiRzcGxhdD1BcnJheS5mcm9tLHRoaXMuJHRpbWU9RGF0ZS5ub3csdGhpcy4kdHlwZT1mdW5jdGlvbih0KXt2YXIgaT1lKHQpO3JldHVybiJlbGVtZW50cyI9PWk/ImFycmF5IjoibnVsbCI9PWk/ITE6aX0sdGhpcy4kdW5saW5rPWZ1bmN0aW9uKHQpe3N3aXRjaChlKHQpKXtjYXNlIm9iamVjdCI6cmV0dXJuIE9iamVjdC5jbG9uZSh0KTtjYXNlImFycmF5IjpyZXR1cm4gQXJyYXkuY2xvbmUodCk7Y2FzZSJoYXNoIjpyZXR1cm4gbmV3IHYodCk7ZGVmYXVsdDpyZXR1cm4gdH19fSkoKSxBcnJheS5pbXBsZW1lbnQoe2V2ZXJ5OmZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBpPTAsbj10aGlzLmxlbmd0aD4+PjA7bj5pO2krKylpZihpIGluIHRoaXMmJiFlLmNhbGwodCx0aGlzW2ldLGksdGhpcykpcmV0dXJuITE7cmV0dXJuITB9LGZpbHRlcjpmdW5jdGlvbihlLHQpe2Zvcih2YXIgaSxuPVtdLHI9MCxvPXRoaXMubGVuZ3RoPj4+MDtvPnI7cisrKXIgaW4gdGhpcyYmKGk9dGhpc1tyXSxlLmNhbGwodCxpLHIsdGhpcykmJm4ucHVzaChpKSk7cmV0dXJuIG59LGluZGV4T2Y6ZnVuY3Rpb24oZSx0KXtmb3IodmFyIGk9dGhpcy5sZW5ndGg+Pj4wLG49MD50P01hdGgubWF4KDAsaSt0KTp0fHwwO2k+bjtuKyspaWYodGhpc1tuXT09PWUpcmV0dXJuIG47cmV0dXJuLTF9LG1hcDpmdW5jdGlvbihlLHQpe2Zvcih2YXIgaT10aGlzLmxlbmd0aD4+PjAsbj1BcnJheShpKSxyPTA7aT5yO3IrKylyIGluIHRoaXMmJihuW3JdPWUuY2FsbCh0LHRoaXNbcl0scix0aGlzKSk7cmV0dXJuIG59LHNvbWU6ZnVuY3Rpb24oZSx0KXtmb3IodmFyIGk9MCxuPXRoaXMubGVuZ3RoPj4+MDtuPmk7aSsrKWlmKGkgaW4gdGhpcyYmZS5jYWxsKHQsdGhpc1tpXSxpLHRoaXMpKXJldHVybiEwO3JldHVybiExfSxjbGVhbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4gbnVsbCE9ZX0pfSxpbnZva2U6ZnVuY3Rpb24oZSl7dmFyIHQ9QXJyYXkuc2xpY2UoYXJndW1lbnRzLDEpO3JldHVybiB0aGlzLm1hcChmdW5jdGlvbihpKXtyZXR1cm4gaVtlXS5hcHBseShpLHQpfSl9LGFzc29jaWF0ZTpmdW5jdGlvbihlKXtmb3IodmFyIHQ9e30saT1NYXRoLm1pbih0aGlzLmxlbmd0aCxlLmxlbmd0aCksbj0wO2k+bjtuKyspdFtlW25dXT10aGlzW25dO3JldHVybiB0fSxsaW5rOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD17fSxpPTAsbj10aGlzLmxlbmd0aDtuPmk7aSsrKWZvcih2YXIgciBpbiBlKWlmKGVbcl0odGhpc1tpXSkpe3Rbcl09dGhpc1tpXSxkZWxldGUgZVtyXTticmVha31yZXR1cm4gdH0sY29udGFpbnM6ZnVuY3Rpb24oZSx0KXtyZXR1cm4tMSE9dGhpcy5pbmRleE9mKGUsdCl9LGFwcGVuZDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5wdXNoLmFwcGx5KHRoaXMsZSksdGhpc30sZ2V0TGFzdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmxlbmd0aD90aGlzW3RoaXMubGVuZ3RoLTFdOm51bGx9LGdldFJhbmRvbTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmxlbmd0aD90aGlzW051bWJlci5yYW5kb20oMCx0aGlzLmxlbmd0aC0xKV06bnVsbH0saW5jbHVkZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5jb250YWlucyhlKXx8dGhpcy5wdXNoKGUpLHRoaXN9LGNvbWJpbmU6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PTAsaT1lLmxlbmd0aDtpPnQ7dCsrKXRoaXMuaW5jbHVkZShlW3RdKTtyZXR1cm4gdGhpc30sZXJhc2U6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PXRoaXMubGVuZ3RoO3QtLTspdGhpc1t0XT09PWUmJnRoaXMuc3BsaWNlKHQsMSk7cmV0dXJuIHRoaXN9LGVtcHR5OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubGVuZ3RoPTAsdGhpc30sZmxhdHRlbjpmdW5jdGlvbigpe2Zvcih2YXIgZT1bXSx0PTAsaT10aGlzLmxlbmd0aDtpPnQ7dCsrKXt2YXIgbj10eXBlT2YodGhpc1t0XSk7Im51bGwiIT1uJiYoZT1lLmNvbmNhdCgiYXJyYXkiPT1ufHwiY29sbGVjdGlvbiI9PW58fCJhcmd1bWVudHMiPT1ufHxpbnN0YW5jZU9mKHRoaXNbdF0sQXJyYXkpP0FycmF5LmZsYXR0ZW4odGhpc1t0XSk6dGhpc1t0XSkpfXJldHVybiBlfSxwaWNrOmZ1bmN0aW9uKCl7Zm9yKHZhciBlPTAsdD10aGlzLmxlbmd0aDt0PmU7ZSsrKWlmKG51bGwhPXRoaXNbZV0pcmV0dXJuIHRoaXNbZV07cmV0dXJuIG51bGx9LGhleFRvUmdiOmZ1bmN0aW9uKGUpe2lmKDMhPXRoaXMubGVuZ3RoKXJldHVybiBudWxsO3ZhciB0PXRoaXMubWFwKGZ1bmN0aW9uKGUpe3JldHVybiAxPT1lLmxlbmd0aCYmKGUrPWUpLGUudG9JbnQoMTYpfSk7cmV0dXJuIGU/dDoicmdiKCIrdCsiKSJ9LHJnYlRvSGV4OmZ1bmN0aW9uKGUpe2lmKDM+dGhpcy5sZW5ndGgpcmV0dXJuIG51bGw7aWYoND09dGhpcy5sZW5ndGgmJjA9PXRoaXNbM10mJiFlKXJldHVybiJ0cmFuc3BhcmVudCI7Zm9yKHZhciB0PVtdLGk9MDszPmk7aSsrKXt2YXIgbj0odGhpc1tpXS0wKS50b1N0cmluZygxNik7dC5wdXNoKDE9PW4ubGVuZ3RoPyIwIituOm4pfXJldHVybiBlP3Q6IiMiK3Quam9pbigiIil9fSksQXJyYXkuYWxpYXMoImV4dGVuZCIsImFwcGVuZCIpO3ZhciAkcGljaz1mdW5jdGlvbigpe3JldHVybiBBcnJheS5mcm9tKGFyZ3VtZW50cykucGljaygpfTtTdHJpbmcuaW1wbGVtZW50KHt0ZXN0OmZ1bmN0aW9uKGUsdCl7cmV0dXJuKCJyZWdleHAiPT10eXBlT2YoZSk/ZTpSZWdFeHAoIiIrZSx0KSkudGVzdCh0aGlzKX0sY29udGFpbnM6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdD8odCt0aGlzK3QpLmluZGV4T2YodCtlK3QpPi0xOih0aGlzKyIiKS5pbmRleE9mKGUpPi0xfSx0cmltOmZ1bmN0aW9uKCl7cmV0dXJuKHRoaXMrIiIpLnJlcGxhY2UoL15ccyt8XHMrJC9nLCIiKX0sY2xlYW46ZnVuY3Rpb24oKXtyZXR1cm4odGhpcysiIikucmVwbGFjZSgvXHMrL2csIiAiKS50cmltKCl9LGNhbWVsQ2FzZTpmdW5jdGlvbigpe3JldHVybih0aGlzKyIiKS5yZXBsYWNlKC8tXEQvZyxmdW5jdGlvbihlKXtyZXR1cm4gZS5jaGFyQXQoMSkudG9VcHBlckNhc2UoKX0pfSxoeXBoZW5hdGU6ZnVuY3Rpb24oKXtyZXR1cm4odGhpcysiIikucmVwbGFjZSgvW0EtWl0vZyxmdW5jdGlvbihlKXtyZXR1cm4iLSIrZS5jaGFyQXQoMCkudG9Mb3dlckNhc2UoKX0pfSxjYXBpdGFsaXplOmZ1bmN0aW9uKCl7cmV0dXJuKHRoaXMrIiIpLnJlcGxhY2UoL1xiW2Etel0vZyxmdW5jdGlvbihlKXtyZXR1cm4gZS50b1VwcGVyQ2FzZSgpfSl9LGVzY2FwZVJlZ0V4cDpmdW5jdGlvbigpe3JldHVybih0aGlzKyIiKS5yZXBsYWNlKC8oWy0uKis/XiR7fSgpfFtcXVwvXFxdKS9nLCJcXCQxIil9LHRvSW50OmZ1bmN0aW9uKGUpe3JldHVybiBwYXJzZUludCh0aGlzLGV8fDEwKX0sdG9GbG9hdDpmdW5jdGlvbigpe3JldHVybiBwYXJzZUZsb2F0KHRoaXMpfSxoZXhUb1JnYjpmdW5jdGlvbihlKXt2YXIgdD0odGhpcysiIikubWF0Y2goL14jPyhcd3sxLDJ9KShcd3sxLDJ9KShcd3sxLDJ9KSQvKTtyZXR1cm4gdD90LnNsaWNlKDEpLmhleFRvUmdiKGUpOm51bGx9LHJnYlRvSGV4OmZ1bmN0aW9uKGUpe3ZhciB0PSh0aGlzKyIiKS5tYXRjaCgvXGR7MSwzfS9nKTtyZXR1cm4gdD90LnJnYlRvSGV4KGUpOm51bGx9LHN1YnN0aXR1dGU6ZnVuY3Rpb24oZSx0KXtyZXR1cm4odGhpcysiIikucmVwbGFjZSh0fHwvXFw/XHsoW157fV0rKVx9L2csZnVuY3Rpb24odCxpKXtyZXR1cm4iXFwiPT10LmNoYXJBdCgwKT90LnNsaWNlKDEpOm51bGwhPWVbaV0/ZVtpXToiIn0pfX0pLE51bWJlci5pbXBsZW1lbnQoe2xpbWl0OmZ1bmN0aW9uKGUsdCl7cmV0dXJuIE1hdGgubWluKHQsTWF0aC5tYXgoZSx0aGlzKSl9LHJvdW5kOmZ1bmN0aW9uKGUpe3JldHVybiBlPU1hdGgucG93KDEwLGV8fDApLnRvRml4ZWQoMD5lPy1lOjApLE1hdGgucm91bmQodGhpcyplKS9lfSx0aW1lczpmdW5jdGlvbihlLHQpe2Zvcih2YXIgaT0wO3RoaXM+aTtpKyspZS5jYWxsKHQsaSx0aGlzKX0sdG9GbG9hdDpmdW5jdGlvbigpe3JldHVybiBwYXJzZUZsb2F0KHRoaXMpfSx0b0ludDpmdW5jdGlvbihlKXtyZXR1cm4gcGFyc2VJbnQodGhpcyxlfHwxMCl9fSksTnVtYmVyLmFsaWFzKCJlYWNoIiwidGltZXMiKSxmdW5jdGlvbihlKXt2YXIgdD17fTtlLmVhY2goZnVuY3Rpb24oZSl7TnVtYmVyW2VdfHwodFtlXT1mdW5jdGlvbigpe3JldHVybiBNYXRoW2VdLmFwcGx5KG51bGwsW3RoaXNdLmNvbmNhdChBcnJheS5mcm9tKGFyZ3VtZW50cykpKX0pfSksTnVtYmVyLmltcGxlbWVudCh0KX0oWyJhYnMiLCJhY29zIiwiYXNpbiIsImF0YW4iLCJhdGFuMiIsImNlaWwiLCJjb3MiLCJleHAiLCJmbG9vciIsImxvZyIsIm1heCIsIm1pbiIsInBvdyIsInNpbiIsInNxcnQiLCJ0YW4iXSksRnVuY3Rpb24uZXh0ZW5kKHthdHRlbXB0OmZ1bmN0aW9uKCl7Zm9yKHZhciBlPTAsdD1hcmd1bWVudHMubGVuZ3RoO3Q+ZTtlKyspdHJ5e3JldHVybiBhcmd1bWVudHNbZV0oKX1jYXRjaChpKXt9cmV0dXJuIG51bGx9fSksRnVuY3Rpb24uaW1wbGVtZW50KHthdHRlbXB0OmZ1bmN0aW9uKGUsdCl7dHJ5e3JldHVybiB0aGlzLmFwcGx5KHQsQXJyYXkuZnJvbShlKSl9Y2F0Y2goaSl7fXJldHVybiBudWxsfSxiaW5kOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsaT1hcmd1bWVudHMubGVuZ3RoPjE/QXJyYXkuc2xpY2UoYXJndW1lbnRzLDEpOm51bGwsbj1mdW5jdGlvbigpe30scj1mdW5jdGlvbigpe3ZhciBvPWUscz1hcmd1bWVudHMubGVuZ3RoO3RoaXMgaW5zdGFuY2VvZiByJiYobi5wcm90b3R5cGU9dC5wcm90b3R5cGUsbz1uZXcgbik7dmFyIGE9aXx8cz90LmFwcGx5KG8saSYmcz9pLmNvbmNhdChBcnJheS5zbGljZShhcmd1bWVudHMpKTppfHxhcmd1bWVudHMpOnQuY2FsbChvKTtyZXR1cm4gbz09ZT9hOm99O3JldHVybiByfSxwYXNzOmZ1bmN0aW9uKGUsdCl7dmFyIGk9dGhpcztyZXR1cm4gbnVsbCE9ZSYmKGU9QXJyYXkuZnJvbShlKSksZnVuY3Rpb24oKXtyZXR1cm4gaS5hcHBseSh0LGV8fGFyZ3VtZW50cyl9fSxkZWxheTpmdW5jdGlvbihlLHQsaSl7cmV0dXJuIHNldFRpbWVvdXQodGhpcy5wYXNzKG51bGw9PWk/W106aSx0KSxlKX0scGVyaW9kaWNhbDpmdW5jdGlvbihlLHQsaSl7cmV0dXJuIHNldEludGVydmFsKHRoaXMucGFzcyhudWxsPT1pP1tdOmksdCksZSl9fSksZGVsZXRlIEZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kLEZ1bmN0aW9uLmltcGxlbWVudCh7Y3JlYXRlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7cmV0dXJuIGU9ZXx8e30sZnVuY3Rpb24oaSl7dmFyIG49ZS5hcmd1bWVudHM7bj1udWxsIT1uP0FycmF5LmZyb20obik6QXJyYXkuc2xpY2UoYXJndW1lbnRzLGUuZXZlbnQ/MTowKSxlLmV2ZW50JiYobj1baXx8d2luZG93LmV2ZW50XS5leHRlbmQobikpO3ZhciByPWZ1bmN0aW9uKCl7cmV0dXJuIHQuYXBwbHkoZS5iaW5kfHxudWxsLG4pfTtyZXR1cm4gZS5kZWxheT9zZXRUaW1lb3V0KHIsZS5kZWxheSk6ZS5wZXJpb2RpY2FsP3NldEludGVydmFsKHIsZS5wZXJpb2RpY2FsKTplLmF0dGVtcHQ/RnVuY3Rpb24uYXR0ZW1wdChyKTpyKCl9fSxiaW5kOmZ1bmN0aW9uKGUsdCl7dmFyIGk9dGhpcztyZXR1cm4gbnVsbCE9dCYmKHQ9QXJyYXkuZnJvbSh0KSksZnVuY3Rpb24oKXtyZXR1cm4gaS5hcHBseShlLHR8fGFyZ3VtZW50cyl9fSxiaW5kV2l0aEV2ZW50OmZ1bmN0aW9uKGUsdCl7dmFyIGk9dGhpcztyZXR1cm4gbnVsbCE9dCYmKHQ9QXJyYXkuZnJvbSh0KSksZnVuY3Rpb24obil7cmV0dXJuIGkuYXBwbHkoZSxudWxsPT10P2FyZ3VtZW50czpbbl0uY29uY2F0KHQpKX19LHJ1bjpmdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLmFwcGx5KHQsQXJyYXkuZnJvbShlKSl9fSksT2JqZWN0LmNyZWF0ZT09RnVuY3Rpb24ucHJvdG90eXBlLmNyZWF0ZSYmKE9iamVjdC5jcmVhdGU9bnVsbCk7dmFyICR0cnk9RnVuY3Rpb24uYXR0ZW1wdDsoZnVuY3Rpb24oKXt2YXIgZT1PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O09iamVjdC5leHRlbmQoe3N1YnNldDpmdW5jdGlvbihlLHQpe2Zvcih2YXIgaT17fSxuPTAscj10Lmxlbmd0aDtyPm47bisrKXt2YXIgbz10W25dO28gaW4gZSYmKGlbb109ZVtvXSl9cmV0dXJuIGl9LG1hcDpmdW5jdGlvbih0LGksbil7dmFyIHI9e307Zm9yKHZhciBvIGluIHQpZS5jYWxsKHQsbykmJihyW29dPWkuY2FsbChuLHRbb10sbyx0KSk7cmV0dXJuIHJ9LGZpbHRlcjpmdW5jdGlvbih0LGksbil7dmFyIHI9e307Zm9yKHZhciBvIGluIHQpe3ZhciBzPXRbb107ZS5jYWxsKHQsbykmJmkuY2FsbChuLHMsbyx0KSYmKHJbb109cyl9cmV0dXJuIHJ9LGV2ZXJ5OmZ1bmN0aW9uKHQsaSxuKXtmb3IodmFyIHIgaW4gdClpZihlLmNhbGwodCxyKSYmIWkuY2FsbChuLHRbcl0scikpcmV0dXJuITE7cmV0dXJuITB9LHNvbWU6ZnVuY3Rpb24odCxpLG4pe2Zvcih2YXIgciBpbiB0KWlmKGUuY2FsbCh0LHIpJiZpLmNhbGwobix0W3JdLHIpKXJldHVybiEwO3JldHVybiExfSxrZXlzOmZ1bmN0aW9uKHQpe3ZhciBpPVtdO2Zvcih2YXIgbiBpbiB0KWUuY2FsbCh0LG4pJiZpLnB1c2gobik7cmV0dXJuIGl9LHZhbHVlczpmdW5jdGlvbih0KXt2YXIgaT1bXTtmb3IodmFyIG4gaW4gdCllLmNhbGwodCxuKSYmaS5wdXNoKHRbbl0pO3JldHVybiBpfSxnZXRMZW5ndGg6ZnVuY3Rpb24oZSl7cmV0dXJuIE9iamVjdC5rZXlzKGUpLmxlbmd0aH0sa2V5T2Y6ZnVuY3Rpb24odCxpKXtmb3IodmFyIG4gaW4gdClpZihlLmNhbGwodCxuKSYmdFtuXT09PWkpcmV0dXJuIG47cmV0dXJuIG51bGx9LGNvbnRhaW5zOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIG51bGwhPU9iamVjdC5rZXlPZihlLHQpfSx0b1F1ZXJ5U3RyaW5nOmZ1bmN0aW9uKGUsdCl7dmFyIGk9W107cmV0dXJuIE9iamVjdC5lYWNoKGUsZnVuY3Rpb24oZSxuKXt0JiYobj10KyJbIituKyJdIik7dmFyIHI7c3dpdGNoKHR5cGVPZihlKSl7Y2FzZSJvYmplY3QiOnI9T2JqZWN0LnRvUXVlcnlTdHJpbmcoZSxuKTticmVhaztjYXNlImFycmF5Ijp2YXIgbz17fTtlLmVhY2goZnVuY3Rpb24oZSx0KXtvW3RdPWV9KSxyPU9iamVjdC50b1F1ZXJ5U3RyaW5nKG8sbik7YnJlYWs7ZGVmYXVsdDpyPW4rIj0iK2VuY29kZVVSSUNvbXBvbmVudChlKX1udWxsIT1lJiZpLnB1c2gocil9KSxpLmpvaW4oIiYiKX19KX0pKCksSGFzaC5pbXBsZW1lbnQoe2hhczpPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LGtleU9mOmZ1bmN0aW9uKGUpe3JldHVybiBPYmplY3Qua2V5T2YodGhpcyxlKX0saGFzVmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIE9iamVjdC5jb250YWlucyh0aGlzLGUpfSxleHRlbmQ6ZnVuY3Rpb24oZSl7cmV0dXJuIEhhc2guZWFjaChlfHx7fSxmdW5jdGlvbihlLHQpe0hhc2guc2V0KHRoaXMsdCxlKX0sdGhpcyksdGhpc30sY29tYmluZTpmdW5jdGlvbihlKXtyZXR1cm4gSGFzaC5lYWNoKGV8fHt9LGZ1bmN0aW9uKGUsdCl7SGFzaC5pbmNsdWRlKHRoaXMsdCxlKX0sdGhpcyksdGhpc30sZXJhc2U6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuaGFzT3duUHJvcGVydHkoZSkmJmRlbGV0ZSB0aGlzW2VdLHRoaXN9LGdldDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5oYXNPd25Qcm9wZXJ0eShlKT90aGlzW2VdOm51bGx9LHNldDpmdW5jdGlvbihlLHQpe3JldHVybighdGhpc1tlXXx8dGhpcy5oYXNPd25Qcm9wZXJ0eShlKSkmJih0aGlzW2VdPXQpLHRoaXN9LGVtcHR5OmZ1bmN0aW9uKCl7cmV0dXJuIEhhc2guZWFjaCh0aGlzLGZ1bmN0aW9uKGUsdCl7ZGVsZXRlIHRoaXNbdF19LHRoaXMpLHRoaXN9LGluY2x1ZGU6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gbnVsbD09dGhpc1tlXSYmKHRoaXNbZV09dCksdGhpc30sbWFwOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIG5ldyBIYXNoKE9iamVjdC5tYXAodGhpcyxlLHQpKX0sZmlsdGVyOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIG5ldyBIYXNoKE9iamVjdC5maWx0ZXIodGhpcyxlLHQpKX0sZXZlcnk6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gT2JqZWN0LmV2ZXJ5KHRoaXMsZSx0KX0sc29tZTpmdW5jdGlvbihlLHQpe3JldHVybiBPYmplY3Quc29tZSh0aGlzLGUsdCl9LGdldEtleXM6ZnVuY3Rpb24oKXtyZXR1cm4gT2JqZWN0LmtleXModGhpcyl9LGdldFZhbHVlczpmdW5jdGlvbigpe3JldHVybiBPYmplY3QudmFsdWVzKHRoaXMpfSx0b1F1ZXJ5U3RyaW5nOmZ1bmN0aW9uKGUpe3JldHVybiBPYmplY3QudG9RdWVyeVN0cmluZyh0aGlzLGUpfX0pLEhhc2guZXh0ZW5kPU9iamVjdC5hcHBlbmQsSGFzaC5hbGlhcyh7aW5kZXhPZjoia2V5T2YiLGNvbnRhaW5zOiJoYXNWYWx1ZSJ9KSxmdW5jdGlvbigpe3ZhciBlPXRoaXMuZG9jdW1lbnQsdD1lLndpbmRvdz10aGlzLGk9bmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLG49bmF2aWdhdG9yLnBsYXRmb3JtLnRvTG93ZXJDYXNlKCkscj1pLm1hdGNoKC8ob3BlcmF8aWV8ZmlyZWZveHxjaHJvbWV8dmVyc2lvbilbXHNcLzpdKFtcd1xkXC5dKyk/Lio/KHNhZmFyaXx2ZXJzaW9uW1xzXC86XShbXHdcZFwuXSspfCQpLyl8fFtudWxsLCJ1bmtub3duIiwwXSxvPSJpZSI9PXJbMV0mJmUuZG9jdW1lbnRNb2RlLHM9dGhpcy5Ccm93c2VyPXtleHRlbmQ6RnVuY3Rpb24ucHJvdG90eXBlLmV4dGVuZCxuYW1lOiJ2ZXJzaW9uIj09clsxXT9yWzNdOnJbMV0sdmVyc2lvbjpvfHxwYXJzZUZsb2F0KCJvcGVyYSI9PXJbMV0mJnJbNF0/cls0XTpyWzJdKSxQbGF0Zm9ybTp7bmFtZTppLm1hdGNoKC9pcCg/OmFkfG9kfGhvbmUpLyk/ImlvcyI6KGkubWF0Y2goLyg/OndlYm9zfGFuZHJvaWQpLyl8fG4ubWF0Y2goL21hY3x3aW58bGludXgvKXx8WyJvdGhlciJdKVswXX0sRmVhdHVyZXM6e3hwYXRoOiEhZS5ldmFsdWF0ZSxhaXI6ISF0LnJ1bnRpbWUscXVlcnk6ISFlLnF1ZXJ5U2VsZWN0b3IsanNvbjohIXQuSlNPTn0sUGx1Z2luczp7fX07c1tzLm5hbWVdPSEwLHNbcy5uYW1lK3BhcnNlSW50KHMudmVyc2lvbiwxMCldPSEwLHMuUGxhdGZvcm1bcy5QbGF0Zm9ybS5uYW1lXT0hMCxzLlJlcXVlc3Q9ZnVuY3Rpb24oKXt2YXIgZT1mdW5jdGlvbigpe3JldHVybiBuZXcgWE1MSHR0cFJlcXVlc3R9LHQ9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IEFjdGl2ZVhPYmplY3QoIk1TWE1MMi5YTUxIVFRQIil9LGk9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IEFjdGl2ZVhPYmplY3QoIk1pY3Jvc29mdC5YTUxIVFRQIil9O3JldHVybiBGdW5jdGlvbi5hdHRlbXB0KGZ1bmN0aW9uKCl7cmV0dXJuIGUoKSxlfSxmdW5jdGlvbigpe3JldHVybiB0KCksdH0sZnVuY3Rpb24oKXtyZXR1cm4gaSgpLGl9KX0oKSxzLkZlYXR1cmVzLnhocj0hIXMuUmVxdWVzdDt2YXIgYT0oRnVuY3Rpb24uYXR0ZW1wdChmdW5jdGlvbigpe3JldHVybiBuYXZpZ2F0b3IucGx1Z2luc1siU2hvY2t3YXZlIEZsYXNoIl0uZGVzY3JpcHRpb259LGZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBBY3RpdmVYT2JqZWN0KCJTaG9ja3dhdmVGbGFzaC5TaG9ja3dhdmVGbGFzaCIpLkdldFZhcmlhYmxlKCIkdmVyc2lvbiIpfSl8fCIwIHIwIikubWF0Y2goL1xkKy9nKTtpZihzLlBsdWdpbnMuRmxhc2g9e3ZlcnNpb246TnVtYmVyKGFbMF18fCIwLiIrYVsxXSl8fDAsYnVpbGQ6TnVtYmVyKGFbMl0pfHwwfSxzLmV4ZWM9ZnVuY3Rpb24oaSl7aWYoIWkpcmV0dXJuIGk7aWYodC5leGVjU2NyaXB0KXQuZXhlY1NjcmlwdChpKTtlbHNle3ZhciBuPWUuY3JlYXRlRWxlbWVudCgic2NyaXB0Iik7bi5zZXRBdHRyaWJ1dGUoInR5cGUiLCJ0ZXh0L2phdmFzY3JpcHQiKSxuLnRleHQ9aSxlLmhlYWQuYXBwZW5kQ2hpbGQobiksZS5oZWFkLnJlbW92ZUNoaWxkKG4pfXJldHVybiBpfSxTdHJpbmcuaW1wbGVtZW50KCJzdHJpcFNjcmlwdHMiLGZ1bmN0aW9uKGUpe3ZhciB0PSIiLGk9dGhpcy5yZXBsYWNlKC88c2NyaXB0W14+XSo+KFtcc1xTXSo/KTxcL3NjcmlwdD4vZ2ksZnVuY3Rpb24oZSxpKXtyZXR1cm4gdCs9aSsiXG4iLCIifSk7cmV0dXJuIGU9PT0hMD9zLmV4ZWModCk6ImZ1bmN0aW9uIj09dHlwZU9mKGUpJiZlKHQsaSksaX0pLHMuZXh0ZW5kKHtEb2N1bWVudDp0aGlzLkRvY3VtZW50LFdpbmRvdzp0aGlzLldpbmRvdyxFbGVtZW50OnRoaXMuRWxlbWVudCxFdmVudDp0aGlzLkV2ZW50fSksdGhpcy5XaW5kb3c9dGhpcy4kY29uc3RydWN0b3I9bmV3IFR5cGUoIldpbmRvdyIsZnVuY3Rpb24oKXt9KSx0aGlzLiRmYW1pbHk9RnVuY3Rpb24uZnJvbSgid2luZG93IikuaGlkZSgpLFdpbmRvdy5taXJyb3IoZnVuY3Rpb24oZSxpKXt0W2VdPWl9KSx0aGlzLkRvY3VtZW50PWUuJGNvbnN0cnVjdG9yPW5ldyBUeXBlKCJEb2N1bWVudCIsZnVuY3Rpb24oKXt9KSxlLiRmYW1pbHk9RnVuY3Rpb24uZnJvbSgiZG9jdW1lbnQiKS5oaWRlKCksRG9jdW1lbnQubWlycm9yKGZ1bmN0aW9uKHQsaSl7ZVt0XT1pfSksZS5odG1sPWUuZG9jdW1lbnRFbGVtZW50LGUuaGVhZHx8KGUuaGVhZD1lLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJoZWFkIilbMF0pLGUuZXhlY0NvbW1hbmQpdHJ5e2UuZXhlY0NvbW1hbmQoIkJhY2tncm91bmRJbWFnZUNhY2hlIiwhMSwhMCl9Y2F0Y2gobCl7fWlmKHRoaXMuYXR0YWNoRXZlbnQmJiF0aGlzLmFkZEV2ZW50TGlzdGVuZXIpe3ZhciBjPWZ1bmN0aW9uKCl7dGhpcy5kZXRhY2hFdmVudCgib251bmxvYWQiLGMpLGUuaGVhZD1lLmh0bWw9ZS53aW5kb3c9bnVsbH07dGhpcy5hdHRhY2hFdmVudCgib251bmxvYWQiLGMpfXZhciB1PUFycmF5LmZyb207dHJ5e3UoZS5odG1sLmNoaWxkTm9kZXMpfWNhdGNoKGwpe0FycmF5LmZyb209ZnVuY3Rpb24oZSl7aWYoInN0cmluZyIhPXR5cGVvZiBlJiZUeXBlLmlzRW51bWVyYWJsZShlKSYmImFycmF5IiE9dHlwZU9mKGUpKXtmb3IodmFyIHQ9ZS5sZW5ndGgsaT1BcnJheSh0KTt0LS07KWlbdF09ZVt0XTtyZXR1cm4gaX1yZXR1cm4gdShlKX07dmFyIGg9QXJyYXkucHJvdG90eXBlLGQ9aC5zbGljZTtbInBvcCIsInB1c2giLCJyZXZlcnNlIiwic2hpZnQiLCJzb3J0Iiwic3BsaWNlIiwidW5zaGlmdCIsImNvbmNhdCIsImpvaW4iLCJzbGljZSJdLmVhY2goZnVuY3Rpb24oZSl7dmFyIHQ9aFtlXTtBcnJheVtlXT1mdW5jdGlvbihlKXtyZXR1cm4gdC5hcHBseShBcnJheS5mcm9tKGUpLGQuY2FsbChhcmd1bWVudHMsMSkpfX0pfXMuUGxhdGZvcm0uaW9zJiYocy5QbGF0Zm9ybS5pcG9kPSEwKSxzLkVuZ2luZT17fTt2YXIgcD1mdW5jdGlvbihlLHQpe3MuRW5naW5lLm5hbWU9ZSxzLkVuZ2luZVtlK3RdPSEwLHMuRW5naW5lLnZlcnNpb249dH07aWYocy5pZSlzd2l0Y2gocy5FbmdpbmUudHJpZGVudD0hMCxzLnZlcnNpb24pe2Nhc2UgNjpwKCJ0cmlkZW50Iiw0KTticmVhaztjYXNlIDc6cCgidHJpZGVudCIsNSk7YnJlYWs7Y2FzZSA4OnAoInRyaWRlbnQiLDYpfWlmKHMuZmlyZWZveCYmKHMuRW5naW5lLmdlY2tvPSEwLHMudmVyc2lvbj49Mz9wKCJnZWNrbyIsMTkpOnAoImdlY2tvIiwxOCkpLHMuc2FmYXJpfHxzLmNocm9tZSlzd2l0Y2gocy5FbmdpbmUud2Via2l0PSEwLHMudmVyc2lvbil7Y2FzZSAyOnAoIndlYmtpdCIsNDE5KTticmVhaztjYXNlIDM6cCgid2Via2l0Iiw0MjApO2JyZWFrO2Nhc2UgNDpwKCJ3ZWJraXQiLDUyNSl9aWYocy5vcGVyYSYmKHMuRW5naW5lLnByZXN0bz0hMCxzLnZlcnNpb24+PTkuNj9wKCJwcmVzdG8iLDk2MCk6cy52ZXJzaW9uPj05LjU/cCgicHJlc3RvIiw5NTApOnAoInByZXN0byIsOTI1KSksInVua25vd24iPT1zLm5hbWUpc3dpdGNoKChpLm1hdGNoKC8oPzp3ZWJraXR8a2h0bWx8Z2Vja28pLyl8fFtdKVswXSl7Y2FzZSJ3ZWJraXQiOmNhc2Uia2h0bWwiOnMuRW5naW5lLndlYmtpdD0hMDticmVhaztjYXNlImdlY2tvIjpzLkVuZ2luZS5nZWNrbz0hMH10aGlzLiRleGVjPXMuZXhlY30oKSxmdW5jdGlvbigpe3ZhciBlPXt9LHQ9dGhpcy5ET01FdmVudD1uZXcgVHlwZSgiRE9NRXZlbnQiLGZ1bmN0aW9uKHQsaSl7aWYoaXx8KGk9d2luZG93KSx0PXR8fGkuZXZlbnQsdC4kZXh0ZW5kZWQpcmV0dXJuIHQ7dGhpcy5ldmVudD10LHRoaXMuJGV4dGVuZGVkPSEwLHRoaXMuc2hpZnQ9dC5zaGlmdEtleSx0aGlzLmNvbnRyb2w9dC5jdHJsS2V5LHRoaXMuYWx0PXQuYWx0S2V5LHRoaXMubWV0YT10Lm1ldGFLZXk7Zm9yKHZhciBuPXRoaXMudHlwZT10LnR5cGUscj10LnRhcmdldHx8dC5zcmNFbGVtZW50O3ImJjM9PXIubm9kZVR5cGU7KXI9ci5wYXJlbnROb2RlO2lmKHRoaXMudGFyZ2V0PWRvY3VtZW50LmlkKHIpLDA9PW4uaW5kZXhPZigia2V5Iikpe3ZhciBvPXRoaXMuY29kZT10LndoaWNofHx0LmtleUNvZGU7dGhpcy5rZXk9ZVtvXXx8T2JqZWN0LmtleU9mKEV2ZW50LktleXMsbyksImtleWRvd24iPT1uJiYobz4xMTEmJjEyND5vP3RoaXMua2V5PSJmIisoby0xMTEpOm8+OTUmJjEwNj5vJiYodGhpcy5rZXk9by05NikpLG51bGw9PXRoaXMua2V5JiYodGhpcy5rZXk9U3RyaW5nLmZyb21DaGFyQ29kZShvKS50b0xvd2VyQ2FzZSgpKX1lbHNlIGlmKCJjbGljayI9PW58fCJkYmxjbGljayI9PW58fCJjb250ZXh0bWVudSI9PW58fCJET01Nb3VzZVNjcm9sbCI9PW58fDA9PW4uaW5kZXhPZigibW91c2UiKSl7dmFyIHM9aS5kb2N1bWVudDtpZihzPXMuY29tcGF0TW9kZSYmIkNTUzFDb21wYXQiIT1zLmNvbXBhdE1vZGU/cy5ib2R5OnMuaHRtbCx0aGlzLnBhZ2U9e3g6bnVsbCE9dC5wYWdlWD90LnBhZ2VYOnQuY2xpZW50WCtzLnNjcm9sbExlZnQseTpudWxsIT10LnBhZ2VZP3QucGFnZVk6dC5jbGllbnRZK3Muc2Nyb2xsVG9wfSx0aGlzLmNsaWVudD17eDpudWxsIT10LnBhZ2VYP3QucGFnZVgtaS5wYWdlWE9mZnNldDp0LmNsaWVudFgseTpudWxsIT10LnBhZ2VZP3QucGFnZVktaS5wYWdlWU9mZnNldDp0LmNsaWVudFl9LCgiRE9NTW91c2VTY3JvbGwiPT1ufHwibW91c2V3aGVlbCI9PW4pJiYodGhpcy53aGVlbD10LndoZWVsRGVsdGE/dC53aGVlbERlbHRhLzEyMDotKHQuZGV0YWlsfHwwKS8zKSx0aGlzLnJpZ2h0Q2xpY2s9Mz09dC53aGljaHx8Mj09dC5idXR0b24sIm1vdXNlb3ZlciI9PW58fCJtb3VzZW91dCI9PW4pe2Zvcih2YXIgYT10LnJlbGF0ZWRUYXJnZXR8fHRbKCJtb3VzZW92ZXIiPT1uPyJmcm9tIjoidG8iKSsiRWxlbWVudCJdO2EmJjM9PWEubm9kZVR5cGU7KWE9YS5wYXJlbnROb2RlO3RoaXMucmVsYXRlZFRhcmdldD1kb2N1bWVudC5pZChhKX19ZWxzZSBpZigwPT1uLmluZGV4T2YoInRvdWNoIil8fDA9PW4uaW5kZXhPZigiZ2VzdHVyZSIpKXt0aGlzLnJvdGF0aW9uPXQucm90YXRpb24sdGhpcy5zY2FsZT10LnNjYWxlLHRoaXMudGFyZ2V0VG91Y2hlcz10LnRhcmdldFRvdWNoZXMsdGhpcy5jaGFuZ2VkVG91Y2hlcz10LmNoYW5nZWRUb3VjaGVzO3ZhciBsPXRoaXMudG91Y2hlcz10LnRvdWNoZXM7aWYobCYmbFswXSl7dmFyIGM9bFswXTt0aGlzLnBhZ2U9e3g6Yy5wYWdlWCx5OmMucGFnZVl9LHRoaXMuY2xpZW50PXt4OmMuY2xpZW50WCx5OmMuY2xpZW50WX19fXRoaXMuY2xpZW50fHwodGhpcy5jbGllbnQ9e30pLHRoaXMucGFnZXx8KHRoaXMucGFnZT17fSl9KTt0LmltcGxlbWVudCh7c3RvcDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnByZXZlbnREZWZhdWx0KCkuc3RvcFByb3BhZ2F0aW9uKCl9LHN0b3BQcm9wYWdhdGlvbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLmV2ZW50LnN0b3BQcm9wYWdhdGlvbj90aGlzLmV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOnRoaXMuZXZlbnQuY2FuY2VsQnViYmxlPSEwLHRoaXN9LHByZXZlbnREZWZhdWx0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZXZlbnQucHJldmVudERlZmF1bHQ/dGhpcy5ldmVudC5wcmV2ZW50RGVmYXVsdCgpOnRoaXMuZXZlbnQucmV0dXJuVmFsdWU9ITEsdGhpc319KSx0LmRlZmluZUtleT1mdW5jdGlvbih0LGkpe3JldHVybiBlW3RdPWksdGhpc30sdC5kZWZpbmVLZXlzPXQuZGVmaW5lS2V5Lm92ZXJsb2FkU2V0dGVyKCEwKSx0LmRlZmluZUtleXMoezM4OiJ1cCIsNDA6ImRvd24iLDM3OiJsZWZ0IiwzOToicmlnaHQiLDI3OiJlc2MiLDMyOiJzcGFjZSIsODoiYmFja3NwYWNlIiw5OiJ0YWIiLDQ2OiJkZWxldGUiLDEzOiJlbnRlciJ9KX0oKTt2YXIgRXZlbnQ9RE9NRXZlbnQ7RXZlbnQuS2V5cz17fSxFdmVudC5LZXlzPW5ldyBIYXNoKEV2ZW50LktleXMpLGZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5DbGFzcz1uZXcgVHlwZSgiQ2xhc3MiLGZ1bmN0aW9uKG4pe2luc3RhbmNlT2YobixGdW5jdGlvbikmJihuPXtpbml0aWFsaXplOm59KTt2YXIgcj1mdW5jdGlvbigpe2lmKGkodGhpcyksci4kcHJvdG90eXBpbmcpcmV0dXJuIHRoaXM7dGhpcy4kY2FsbGVyPW51bGw7dmFyIGU9dGhpcy5pbml0aWFsaXplP3RoaXMuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk6dGhpcztyZXR1cm4gdGhpcy4kY2FsbGVyPXRoaXMuY2FsbGVyPW51bGwsZX0uZXh0ZW5kKHRoaXMpLmltcGxlbWVudChuKTtyZXR1cm4gci4kY29uc3RydWN0b3I9ZSxyLnByb3RvdHlwZS4kY29uc3RydWN0b3I9cixyLnByb3RvdHlwZS5wYXJlbnQ9dCxyfSksdD1mdW5jdGlvbigpe2lmKCF0aGlzLiRjYWxsZXIpdGhyb3cgRXJyb3IoJ1RoZSBtZXRob2QgInBhcmVudCIgY2Fubm90IGJlIGNhbGxlZC4nKTt2YXIgZT10aGlzLiRjYWxsZXIuJG5hbWUsdD10aGlzLiRjYWxsZXIuJG93bmVyLnBhcmVudCxpPXQ/dC5wcm90b3R5cGVbZV06bnVsbDtpZighaSl0aHJvdyBFcnJvcignVGhlIG1ldGhvZCAiJytlKyciIGhhcyBubyBwYXJlbnQuJyk7cmV0dXJuIGkuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxpPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdCBpbiBlKXt2YXIgbj1lW3RdO3N3aXRjaCh0eXBlT2Yobikpe2Nhc2Uib2JqZWN0Ijp2YXIgcj1mdW5jdGlvbigpe307ci5wcm90b3R5cGU9bixlW3RdPWkobmV3IHIpO2JyZWFrO2Nhc2UiYXJyYXkiOmVbdF09bi5jbG9uZSgpfX1yZXR1cm4gZX0sbj1mdW5jdGlvbihlLHQsaSl7aS4kb3JpZ2luJiYoaT1pLiRvcmlnaW4pO3ZhciBuPWZ1bmN0aW9uKCl7aWYoaS4kcHJvdGVjdGVkJiZudWxsPT10aGlzLiRjYWxsZXIpdGhyb3cgRXJyb3IoJ1RoZSBtZXRob2QgIicrdCsnIiBjYW5ub3QgYmUgY2FsbGVkLicpO3ZhciBlPXRoaXMuY2FsbGVyLHI9dGhpcy4kY2FsbGVyO3RoaXMuY2FsbGVyPXIsdGhpcy4kY2FsbGVyPW47dmFyIG89aS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7cmV0dXJuIHRoaXMuJGNhbGxlcj1yLHRoaXMuY2FsbGVyPWUsb30uZXh0ZW5kKHskb3duZXI6ZSwkb3JpZ2luOmksJG5hbWU6dH0pO3JldHVybiBufSxyPWZ1bmN0aW9uKHQsaSxyKXtpZihlLk11dGF0b3JzLmhhc093blByb3BlcnR5KHQpJiYoaT1lLk11dGF0b3JzW3RdLmNhbGwodGhpcyxpKSxudWxsPT1pKSlyZXR1cm4gdGhpcztpZigiZnVuY3Rpb24iPT10eXBlT2YoaSkpe2lmKGkuJGhpZGRlbilyZXR1cm4gdGhpczt0aGlzLnByb3RvdHlwZVt0XT1yP2k6bih0aGlzLHQsaSl9ZWxzZSBPYmplY3QubWVyZ2UodGhpcy5wcm90b3R5cGUsdCxpKTtyZXR1cm4gdGhpc30sbz1mdW5jdGlvbihlKXtlLiRwcm90b3R5cGluZz0hMDt2YXIgdD1uZXcgZTtyZXR1cm4gZGVsZXRlIGUuJHByb3RvdHlwaW5nLHR9O2UuaW1wbGVtZW50KCJpbXBsZW1lbnQiLHIub3ZlcmxvYWRTZXR0ZXIoKSksZS5NdXRhdG9ycz17RXh0ZW5kczpmdW5jdGlvbihlKXt0aGlzLnBhcmVudD1lLHRoaXMucHJvdG90eXBlPW8oZSl9LEltcGxlbWVudHM6ZnVuY3Rpb24oZSl7QXJyYXkuZnJvbShlKS5lYWNoKGZ1bmN0aW9uKGUpe3ZhciB0PW5ldyBlO2Zvcih2YXIgaSBpbiB0KXIuY2FsbCh0aGlzLGksdFtpXSwhMCl9LHRoaXMpfX19KCksZnVuY3Rpb24oKXt0aGlzLkNoYWluPW5ldyBDbGFzcyh7JGNoYWluOltdLGNoYWluOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGNoYWluLmFwcGVuZChBcnJheS5mbGF0dGVuKGFyZ3VtZW50cykpLHRoaXN9LGNhbGxDaGFpbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLiRjaGFpbi5sZW5ndGg/dGhpcy4kY2hhaW4uc2hpZnQoKS5hcHBseSh0aGlzLGFyZ3VtZW50cyk6ITF9LGNsZWFyQ2hhaW46ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kY2hhaW4uZW1wdHkoKSx0aGlzfX0pO3ZhciBlPWZ1bmN0aW9uKGUpe3JldHVybiBlLnJlcGxhY2UoL15vbihbQS1aXSkvLGZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQudG9Mb3dlckNhc2UoKX0pfTt0aGlzLkV2ZW50cz1uZXcgQ2xhc3MoeyRldmVudHM6e30sYWRkRXZlbnQ6ZnVuY3Rpb24odCxpLG4pe3JldHVybiB0PWUodCksaT09JGVtcHR5P3RoaXM6KHRoaXMuJGV2ZW50c1t0XT0odGhpcy4kZXZlbnRzW3RdfHxbXSkuaW5jbHVkZShpKSxuJiYoaS5pbnRlcm5hbD0hMCksdGhpcyl9LGFkZEV2ZW50czpmdW5jdGlvbihlKXtmb3IodmFyIHQgaW4gZSl0aGlzLmFkZEV2ZW50KHQsZVt0XSk7cmV0dXJuIHRoaXN9LGZpcmVFdmVudDpmdW5jdGlvbih0LGksbil7dD1lKHQpO3ZhciByPXRoaXMuJGV2ZW50c1t0XTtyZXR1cm4gcj8oaT1BcnJheS5mcm9tKGkpLHIuZWFjaChmdW5jdGlvbihlKXtuP2UuZGVsYXkobix0aGlzLGkpOmUuYXBwbHkodGhpcyxpKX0sdGhpcyksdGhpcyk6dGhpc30scmVtb3ZlRXZlbnQ6ZnVuY3Rpb24odCxpKXt0PWUodCk7dmFyIG49dGhpcy4kZXZlbnRzW3RdO2lmKG4mJiFpLmludGVybmFsKXt2YXIgcj1uLmluZGV4T2YoaSk7LTEhPXImJmRlbGV0ZSBuW3JdfXJldHVybiB0aGlzfSxyZW1vdmVFdmVudHM6ZnVuY3Rpb24odCl7dmFyIGk7aWYoIm9iamVjdCI9PXR5cGVPZih0KSl7Zm9yKGkgaW4gdCl0aGlzLnJlbW92ZUV2ZW50KGksdFtpXSk7cmV0dXJuIHRoaXN9dCYmKHQ9ZSh0KSk7Zm9yKGkgaW4gdGhpcy4kZXZlbnRzKWlmKCF0fHx0PT1pKWZvcih2YXIgbj10aGlzLiRldmVudHNbaV0scj1uLmxlbmd0aDtyLS07KXIgaW4gbiYmdGhpcy5yZW1vdmVFdmVudChpLG5bcl0pO3JldHVybiB0aGlzfX0pLHRoaXMuT3B0aW9ucz1uZXcgQ2xhc3Moe3NldE9wdGlvbnM6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9wdGlvbnM9T2JqZWN0Lm1lcmdlLmFwcGx5KG51bGwsW3t9LHRoaXMub3B0aW9uc10uYXBwZW5kKGFyZ3VtZW50cykpO2lmKHRoaXMuYWRkRXZlbnQpZm9yKHZhciB0IGluIGUpImZ1bmN0aW9uIj09dHlwZU9mKGVbdF0pJiYvXm9uW0EtWl0vLnRlc3QodCkmJih0aGlzLmFkZEV2ZW50KHQsZVt0XSksZGVsZXRlIGVbdF0pO3JldHVybiB0aGlzfX0pfSgpLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLG8scyxsLHUsZCxwLGYsbSxnLHYsYix5LF8seCxDKXtpZigob3x8LTE9PT1pKSYmKHQuZXhwcmVzc2lvbnNbKytpXT1bXSxuPS0xLG8pKXJldHVybiIiO2lmKHN8fGx8fC0xPT09bil7cz1zfHwiICI7dmFyIHc9dC5leHByZXNzaW9uc1tpXTtyJiZ3W25dJiYod1tuXS5yZXZlcnNlQ29tYmluYXRvcj1jKHMpKSx3Wysrbl09e2NvbWJpbmF0b3I6cyx0YWc6IioifX12YXIgaz10LmV4cHJlc3Npb25zW2ldW25dO2lmKHUpay50YWc9dS5yZXBsYWNlKGEsIiIpO2Vsc2UgaWYoZClrLmlkPWQucmVwbGFjZShhLCIiKTtlbHNlIGlmKHApcD1wLnJlcGxhY2UoYSwiIiksay5jbGFzc0xpc3R8fChrLmNsYXNzTGlzdD1bXSksay5jbGFzc2VzfHwoay5jbGFzc2VzPVtdKSxrLmNsYXNzTGlzdC5wdXNoKHApLGsuY2xhc3Nlcy5wdXNoKHt2YWx1ZTpwLHJlZ2V4cDpSZWdFeHAoIihefFxccykiK2gocCkrIihcXHN8JCkiKX0pO2Vsc2UgaWYoeSlDPUN8fHgsQz1DP0MucmVwbGFjZShhLCIiKTpudWxsLGsucHNldWRvc3x8KGsucHNldWRvcz1bXSksay5wc2V1ZG9zLnB1c2goe2tleTp5LnJlcGxhY2UoYSwiIiksdmFsdWU6Qyx0eXBlOjE9PWIubGVuZ3RoPyJjbGFzcyI6ImVsZW1lbnQifSk7ZWxzZSBpZihmKXtmPWYucmVwbGFjZShhLCIiKSx2PSh2fHwiIikucmVwbGFjZShhLCIiKTt2YXIgVCxFO3N3aXRjaChtKXtjYXNlIl49IjpFPVJlZ0V4cCgiXiIraCh2KSk7YnJlYWs7Y2FzZSIkPSI6RT1SZWdFeHAoaCh2KSsiJCIpO2JyZWFrO2Nhc2Uifj0iOkU9UmVnRXhwKCIoXnxcXHMpIitoKHYpKyIoXFxzfCQpIik7YnJlYWs7Y2FzZSJ8PSI6RT1SZWdFeHAoIl4iK2godikrIigtfCQpIik7YnJlYWs7Y2FzZSI9IjpUPWZ1bmN0aW9uKGUpe3JldHVybiB2PT1lfTticmVhaztjYXNlIio9IjpUPWZ1bmN0aW9uKGUpe3JldHVybiBlJiZlLmluZGV4T2Yodik+LTF9O2JyZWFrO2Nhc2UiIT0iOlQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHYhPWV9O2JyZWFrO2RlZmF1bHQ6VD1mdW5jdGlvbihlKXtyZXR1cm4hIWV9fSIiPT12JiYvXlsqJF5dPSQvLnRlc3QobSkmJihUPWZ1bmN0aW9uKCl7cmV0dXJuITF9KSxUfHwoVD1mdW5jdGlvbihlKXtyZXR1cm4gZSYmRS50ZXN0KGUpfSksay5hdHRyaWJ1dGVzfHwoay5hdHRyaWJ1dGVzPVtdKSxrLmF0dHJpYnV0ZXMucHVzaCh7a2V5OmYsb3BlcmF0b3I6bSx2YWx1ZTp2LHRlc3Q6VH0pfXJldHVybiIifXZhciB0LGksbixyLG89e30scz17fSxhPS9cXC9nLGw9ZnVuY3Rpb24obixhKXtpZihudWxsPT1uKXJldHVybiBudWxsO2lmKG4uU2xpY2s9PT0hMClyZXR1cm4gbjtuPSgiIituKS5yZXBsYWNlKC9eXHMrfFxzKyQvZywiIikscj0hIWE7dmFyIGM9cj9zOm87aWYoY1tuXSlyZXR1cm4gY1tuXTtmb3IodD17U2xpY2s6ITAsZXhwcmVzc2lvbnM6W10scmF3Om4scmV2ZXJzZTpmdW5jdGlvbigpe3JldHVybiBsKHRoaXMucmF3LCEwKX19LGk9LTE7biE9KG49bi5yZXBsYWNlKGQsZSkpOyk7cmV0dXJuIHQubGVuZ3RoPXQuZXhwcmVzc2lvbnMubGVuZ3RoLGNbdC5yYXddPXI/dSh0KTp0fSxjPWZ1bmN0aW9uKGUpe3JldHVybiIhIj09PWU/IiAiOiIgIj09PWU/IiEiOi9eIS8udGVzdChlKT9lLnJlcGxhY2UoL14hLywiIik6IiEiK2V9LHU9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PWUuZXhwcmVzc2lvbnMsaT0wO3QubGVuZ3RoPmk7aSsrKXtmb3IodmFyIG49dFtpXSxyPXtwYXJ0czpbXSx0YWc6IioiLGNvbWJpbmF0b3I6YyhuWzBdLmNvbWJpbmF0b3IpfSxvPTA7bi5sZW5ndGg+bztvKyspe3ZhciBzPW5bb107cy5yZXZlcnNlQ29tYmluYXRvcnx8KHMucmV2ZXJzZUNvbWJpbmF0b3I9IiAiKSxzLmNvbWJpbmF0b3I9cy5yZXZlcnNlQ29tYmluYXRvcixkZWxldGUgcy5yZXZlcnNlQ29tYmluYXRvcn1uLnJldmVyc2UoKS5wdXNoKHIpfXJldHVybiBlfSxoPWZ1bmN0aW9uKGUpe3JldHVybiBlLnJlcGxhY2UoL1stW1xde30oKSorPy5cXF4kfCwjXHNdL2csZnVuY3Rpb24oZSl7cmV0dXJuIlxcIitlfSl9LGQ9UmVnRXhwKCJeKD86XFxzKigsKVxccyp8XFxzKig8Y29tYmluYXRvcj4rKVxccyp8KFxccyspfCg8dW5pY29kZT4rfFxcKil8XFwjKDx1bmljb2RlPispfFxcLig8dW5pY29kZT4rKXxcXFtcXHMqKDx1bmljb2RlMT4rKSg/OlxccyooWypeJCF+fF0/PSkoPzpcXHMqKD86KFtcIiddPykoLio/KVxcOSkpKT9cXHMqXFxdKD8hXFxdKXwoOispKDx1bmljb2RlPispKD86XFwoKD86KD86KFtcIiddKShbXlxcMTNdKilcXDEzKXwoKD86XFwoW14pXStcXCl8W14oKV0qKSspKVxcKSk/KSIucmVwbGFjZSgvPGNvbWJpbmF0b3I+LywiWyIraCgiPit+YCFAJCVeJj17fVxcOzwvIikrIl0iKS5yZXBsYWNlKC88dW5pY29kZT4vZywiKD86W1xcd1xcdTAwYTEtXFx1RkZGRi1dfFxcXFxbXlxcczAtOWEtZl0pIikucmVwbGFjZSgvPHVuaWNvZGUxPi9nLCIoPzpbOlxcd1xcdTAwYTEtXFx1RkZGRi1dfFxcXFxbXlxcczAtOWEtZl0pIikpLHA9dGhpcy5TbGlja3x8e307cC5wYXJzZT1mdW5jdGlvbihlKXtyZXR1cm4gbChlKX0scC5lc2NhcGVSZWdFeHA9aCx0aGlzLlNsaWNrfHwodGhpcy5TbGljaz1wKX0uYXBwbHkoInVuZGVmaW5lZCIhPXR5cGVvZiBleHBvcnRzP2V4cG9ydHM6dGhpcyksZnVuY3Rpb24oKXt2YXIgZT17fSx0PXt9LGk9T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztlLmlzTmF0aXZlQ29kZT1mdW5jdGlvbihlKXtyZXR1cm4vXHtccypcW25hdGl2ZSBjb2RlXF1ccypcfS8udGVzdCgiIitlKX0sZS5pc1hNTD1mdW5jdGlvbihlKXtyZXR1cm4hIWUueG1sVmVyc2lvbnx8ISFlLnhtbHx8IltvYmplY3QgWE1MRG9jdW1lbnRdIj09aS5jYWxsKGUpfHw5PT1lLm5vZGVUeXBlJiYiSFRNTCIhPWUuZG9jdW1lbnRFbGVtZW50Lm5vZGVOYW1lfSxlLnNldERvY3VtZW50PWZ1bmN0aW9uKGUpe3ZhciBpPWUubm9kZVR5cGU7aWYoOT09aSk7ZWxzZSBpZihpKWU9ZS5vd25lckRvY3VtZW50O2Vsc2V7aWYoIWUubmF2aWdhdG9yKXJldHVybjtlPWUuZG9jdW1lbnR9aWYodGhpcy5kb2N1bWVudCE9PWUpe3RoaXMuZG9jdW1lbnQ9ZTt2YXIgbixyPWUuZG9jdW1lbnRFbGVtZW50LG89dGhpcy5nZXRVSURYTUwocikscz10W29dO2lmKHMpZm9yKG4gaW4gcyl0aGlzW25dPXNbbl07ZWxzZXtzPXRbb109e30scy5yb290PXIscy5pc1hNTERvY3VtZW50PXRoaXMuaXNYTUwoZSkscy5icm9rZW5TdGFyR0VCVE49cy5zdGFyU2VsZWN0c0Nsb3NlZFFTQT1zLmlkR2V0c05hbWU9cy5icm9rZW5NaXhlZENhc2VRU0E9cy5icm9rZW5HRUJDTj1zLmJyb2tlbkNoZWNrZWRRU0E9cy5icm9rZW5FbXB0eUF0dHJpYnV0ZVFTQT1zLmlzSFRNTERvY3VtZW50PXMubmF0aXZlTWF0Y2hlc1NlbGVjdG9yPSExO3ZhciBhLGwsYyx1LGgsZCxwPSJzbGlja191bmlxdWVpZCIsZj1lLmNyZWF0ZUVsZW1lbnQoImRpdiIpLG09ZS5ib2R5fHxlLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJib2R5IilbMF18fHI7bS5hcHBlbmRDaGlsZChmKTt0cnl7Zi5pbm5lckhUTUw9JzxhIGlkPSInK3ArJyI+PC9hPicscy5pc0hUTUxEb2N1bWVudD0hIWUuZ2V0RWxlbWVudEJ5SWQocCl9Y2F0Y2goZyl7fWlmKHMuaXNIVE1MRG9jdW1lbnQpe2Yuc3R5bGUuZGlzcGxheT0ibm9uZSIsZi5hcHBlbmRDaGlsZChlLmNyZWF0ZUNvbW1lbnQoIiIpKSxsPWYuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIioiKS5sZW5ndGg+MTt0cnl7Zi5pbm5lckhUTUw9ImZvbzwvZm9vPiIsZD1mLmdldEVsZW1lbnRzQnlUYWdOYW1lKCIqIiksYT1kJiYhIWQubGVuZ3RoJiYiLyI9PWRbMF0ubm9kZU5hbWUuY2hhckF0KDApfWNhdGNoKGcpe31zLmJyb2tlblN0YXJHRUJUTj1sfHxhO3RyeXtmLmlubmVySFRNTD0nPGEgbmFtZT0iJytwKyciPjwvYT48YiBpZD0iJytwKyciPjwvYj4nLHMuaWRHZXRzTmFtZT1lLmdldEVsZW1lbnRCeUlkKHApPT09Zi5maXJzdENoaWxkfWNhdGNoKGcpe31pZihmLmdldEVsZW1lbnRzQnlDbGFzc05hbWUpe3RyeXtmLmlubmVySFRNTD0nPGEgY2xhc3M9ImYiPjwvYT48YSBjbGFzcz0iYiI+PC9hPicsZi5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJiIikubGVuZ3RoLGYuZmlyc3RDaGlsZC5jbGFzc05hbWU9ImIiLHU9MiE9Zi5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJiIikubGVuZ3RofWNhdGNoKGcpe310cnl7Zi5pbm5lckhUTUw9JzxhIGNsYXNzPSJhIj48L2E+PGEgY2xhc3M9ImYgYiBhIj48L2E+JyxjPTIhPWYuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgiYSIpLmxlbmd0aH1jYXRjaChnKXt9cy5icm9rZW5HRUJDTj11fHxjfWlmKGYucXVlcnlTZWxlY3RvckFsbCl7dHJ5e2YuaW5uZXJIVE1MPSJmb288L2Zvbz4iLGQ9Zi5xdWVyeVNlbGVjdG9yQWxsKCIqIikscy5zdGFyU2VsZWN0c0Nsb3NlZFFTQT1kJiYhIWQubGVuZ3RoJiYiLyI9PWRbMF0ubm9kZU5hbWUuY2hhckF0KDApfWNhdGNoKGcpe310cnl7Zi5pbm5lckhUTUw9JzxhIGNsYXNzPSJNaVgiPjwvYT4nLHMuYnJva2VuTWl4ZWRDYXNlUVNBPSFmLnF1ZXJ5U2VsZWN0b3JBbGwoIi5NaVgiKS5sZW5ndGh9Y2F0Y2goZyl7fXRyeXtmLmlubmVySFRNTD0nPHNlbGVjdD48b3B0aW9uIHNlbGVjdGVkPSJzZWxlY3RlZCI+YTwvb3B0aW9uPjwvc2VsZWN0Picscy5icm9rZW5DaGVja2VkUVNBPTA9PWYucXVlcnlTZWxlY3RvckFsbCgiOmNoZWNrZWQiKS5sZW5ndGh9Y2F0Y2goZyl7fXRyeXtmLmlubmVySFRNTD0nPGEgY2xhc3M9IiI+PC9hPicscy5icm9rZW5FbXB0eUF0dHJpYnV0ZVFTQT0wIT1mLnF1ZXJ5U2VsZWN0b3JBbGwoJ1tjbGFzcyo9IiJdJykubGVuZ3RofWNhdGNoKGcpe319dHJ5e2YuaW5uZXJIVE1MPSc8Zm9ybSBhY3Rpb249InMiPjxpbnB1dCBpZD0iYWN0aW9uIi8+PC9mb3JtPicsaD0icyIhPWYuZmlyc3RDaGlsZC5nZXRBdHRyaWJ1dGUoImFjdGlvbiIpfWNhdGNoKGcpe31pZihzLm5hdGl2ZU1hdGNoZXNTZWxlY3Rvcj1yLm1hdGNoZXNTZWxlY3Rvcnx8ci5tb3pNYXRjaGVzU2VsZWN0b3J8fHIud2Via2l0TWF0Y2hlc1NlbGVjdG9yLHMubmF0aXZlTWF0Y2hlc1NlbGVjdG9yKXRyeXtzLm5hdGl2ZU1hdGNoZXNTZWxlY3Rvci5jYWxsKHIsIjpzbGljayIpLHMubmF0aXZlTWF0Y2hlc1NlbGVjdG9yPW51bGx9Y2F0Y2goZyl7fX10cnl7ci5zbGlja19leHBhbmRvPTEsZGVsZXRlIHIuc2xpY2tfZXhwYW5kbyxzLmdldFVJRD10aGlzLmdldFVJREhUTUx9Y2F0Y2goZyl7cy5nZXRVSUQ9dGhpcy5nZXRVSURYTUx9bS5yZW1vdmVDaGlsZChmKSxmPWQ9bT1udWxsLHMuZ2V0QXR0cmlidXRlPXMuaXNIVE1MRG9jdW1lbnQmJmg/ZnVuY3Rpb24oZSx0KXt2YXIgaT10aGlzLmF0dHJpYnV0ZUdldHRlcnNbdF07aWYoaSlyZXR1cm4gaS5jYWxsKGUpO3ZhciBuPWUuZ2V0QXR0cmlidXRlTm9kZSh0KTtyZXR1cm4gbj9uLm5vZGVWYWx1ZTpudWxsfTpmdW5jdGlvbihlLHQpe3ZhciBpPXRoaXMuYXR0cmlidXRlR2V0dGVyc1t0XTtyZXR1cm4gaT9pLmNhbGwoZSk6ZS5nZXRBdHRyaWJ1dGUodCl9LHMuaGFzQXR0cmlidXRlPXImJnRoaXMuaXNOYXRpdmVDb2RlKHIuaGFzQXR0cmlidXRlKT9mdW5jdGlvbihlLHQpe3JldHVybiBlLmhhc0F0dHJpYnV0ZSh0KX06ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZT1lLmdldEF0dHJpYnV0ZU5vZGUodCksISghZXx8IWUuc3BlY2lmaWVkJiYhZS5ub2RlVmFsdWUpfTt2YXIgdj1yJiZ0aGlzLmlzTmF0aXZlQ29kZShyLmNvbnRhaW5zKSxiPWUmJnRoaXMuaXNOYXRpdmVDb2RlKGUuY29udGFpbnMpO3MuY29udGFpbnM9diYmYj9mdW5jdGlvbihlLHQpe3JldHVybiBlLmNvbnRhaW5zKHQpfTp2JiYhYj9mdW5jdGlvbih0LGkpe3JldHVybiB0PT09aXx8KHQ9PT1lP2UuZG9jdW1lbnRFbGVtZW50OnQpLmNvbnRhaW5zKGkpfTpyJiZyLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uP2Z1bmN0aW9uKGUsdCl7cmV0dXJuIGU9PT10fHwhISgxNiZlLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKHQpKX06ZnVuY3Rpb24oZSx0KXtpZih0KWRvIGlmKHQ9PT1lKXJldHVybiEwO3doaWxlKHQ9dC5wYXJlbnROb2RlKTtyZXR1cm4hMX0scy5kb2N1bWVudFNvcnRlcj1yLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uP2Z1bmN0aW9uKGUsdCl7cmV0dXJuIGUuY29tcGFyZURvY3VtZW50UG9zaXRpb24mJnQuY29tcGFyZURvY3VtZW50UG9zaXRpb24/NCZlLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKHQpPy0xOmU9PT10PzA6MTowfToic291cmNlSW5kZXgiaW4gcj9mdW5jdGlvbihlLHQpe3JldHVybiBlLnNvdXJjZUluZGV4JiZ0LnNvdXJjZUluZGV4P2Uuc291cmNlSW5kZXgtdC5zb3VyY2VJbmRleDowfTplLmNyZWF0ZVJhbmdlP2Z1bmN0aW9uKGUsdCl7aWYoIWUub3duZXJEb2N1bWVudHx8IXQub3duZXJEb2N1bWVudClyZXR1cm4gMDt2YXIgaT1lLm93bmVyRG9jdW1lbnQuY3JlYXRlUmFuZ2UoKSxuPXQub3duZXJEb2N1bWVudC5jcmVhdGVSYW5nZSgpO3JldHVybiBpLnNldFN0YXJ0KGUsMCksaS5zZXRFbmQoZSwwKSxuLnNldFN0YXJ0KHQsMCksbi5zZXRFbmQodCwwKSxpLmNvbXBhcmVCb3VuZGFyeVBvaW50cyhSYW5nZS5TVEFSVF9UT19FTkQsbil9Om51bGwscj1udWxsO2ZvcihuIGluIHMpdGhpc1tuXT1zW25dfX19O3ZhciBuPS9eKFsjLl0/KSgoPzpbXHctXSt8XCopKSQvLHI9L1xbLitbKiReXT0oPzoiInwnJyk/XF0vLG89e307ZS5zZWFyY2g9ZnVuY3Rpb24oZSx0LGkscyl7dmFyIGE9dGhpcy5mb3VuZD1zP251bGw6aXx8W107aWYoIWUpcmV0dXJuIGE7aWYoZS5uYXZpZ2F0b3IpZT1lLmRvY3VtZW50O2Vsc2UgaWYoIWUubm9kZVR5cGUpcmV0dXJuIGE7dmFyIGwsYyx1PXRoaXMudW5pcXVlcz17fSxkPSEoIWl8fCFpLmxlbmd0aCkscD05PT1lLm5vZGVUeXBlO2lmKHRoaXMuZG9jdW1lbnQhPT0ocD9lOmUub3duZXJEb2N1bWVudCkmJnRoaXMuc2V0RG9jdW1lbnQoZSksZClmb3IoYz1hLmxlbmd0aDtjLS07KXVbdGhpcy5nZXRVSUQoYVtjXSldPSEwO2lmKCJzdHJpbmciPT10eXBlb2YgdCl7dmFyIGY9dC5tYXRjaChuKTtlOmlmKGYpe3ZhciBtLGcsdj1mWzFdLGI9ZlsyXTtpZih2KXtpZigiIyI9PXYpe2lmKCF0aGlzLmlzSFRNTERvY3VtZW50fHwhcClicmVhayBlO2lmKG09ZS5nZXRFbGVtZW50QnlJZChiKSwhbSlyZXR1cm4gYTtpZih0aGlzLmlkR2V0c05hbWUmJm0uZ2V0QXR0cmlidXRlTm9kZSgiaWQiKS5ub2RlVmFsdWUhPWIpYnJlYWsgZTtpZihzKXJldHVybiBtfHxudWxsO2QmJnVbdGhpcy5nZXRVSUQobSldfHxhLnB1c2gobSl9ZWxzZSBpZigiLiI9PXYpe2lmKCF0aGlzLmlzSFRNTERvY3VtZW50fHwoIWUuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZXx8dGhpcy5icm9rZW5HRUJDTikmJmUucXVlcnlTZWxlY3RvckFsbClicmVhayBlO2lmKGUuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSYmIXRoaXMuYnJva2VuR0VCQ04pe2lmKGc9ZS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGIpLHMpcmV0dXJuIGdbMF18fG51bGw7Zm9yKGM9MDttPWdbYysrXTspZCYmdVt0aGlzLmdldFVJRChtKV18fGEucHVzaChtKX1lbHNle3ZhciB5PVJlZ0V4cCgiKF58XFxzKSIraC5lc2NhcGVSZWdFeHAoYikrIihcXHN8JCkiKTtmb3IoZz1lLmdldEVsZW1lbnRzQnlUYWdOYW1lKCIqIiksYz0wO209Z1tjKytdOylpZihjbGFzc05hbWU9bS5jbGFzc05hbWUsY2xhc3NOYW1lJiZ5LnRlc3QoY2xhc3NOYW1lKSl7aWYocylyZXR1cm4gbTtkJiZ1W3RoaXMuZ2V0VUlEKG0pXXx8YS5wdXNoKG0pfX19fWVsc2V7aWYoIioiPT1iJiZ0aGlzLmJyb2tlblN0YXJHRUJUTilicmVhayBlO2lmKGc9ZS5nZXRFbGVtZW50c0J5VGFnTmFtZShiKSxzKXJldHVybiBnWzBdfHxudWxsO2ZvcihjPTA7bT1nW2MrK107KWQmJnVbdGhpcy5nZXRVSUQobSldfHxhLnB1c2gobSl9cmV0dXJuIGQmJnRoaXMuc29ydChhKSxzP251bGw6YX1lOmlmKGUucXVlcnlTZWxlY3RvckFsbCl7aWYoIXRoaXMuaXNIVE1MRG9jdW1lbnR8fG9bdF18fHRoaXMuYnJva2VuTWl4ZWRDYXNlUVNBfHx0aGlzLmJyb2tlbkNoZWNrZWRRU0EmJnQuaW5kZXhPZigiOmNoZWNrZWQiKT4tMXx8dGhpcy5icm9rZW5FbXB0eUF0dHJpYnV0ZVFTQSYmci50ZXN0KHQpfHwhcCYmdC5pbmRleE9mKCIsIik+LTF8fGguZGlzYWJsZVFTQSlicmVhayBlO3ZhciBfPXQseD1lO2lmKCFwKXt2YXIgQz14LmdldEF0dHJpYnV0ZSgiaWQiKSx3PSJzbGlja2lkX18iO3guc2V0QXR0cmlidXRlKCJpZCIsdyksXz0iIyIrdysiICIrXyxlPXgucGFyZW50Tm9kZQp9dHJ5e2lmKHMpcmV0dXJuIGUucXVlcnlTZWxlY3RvcihfKXx8bnVsbDtnPWUucXVlcnlTZWxlY3RvckFsbChfKX1jYXRjaChrKXtvW3RdPTE7YnJlYWsgZX1maW5hbGx5e3B8fChDP3guc2V0QXR0cmlidXRlKCJpZCIsQyk6eC5yZW1vdmVBdHRyaWJ1dGUoImlkIiksZT14KX1pZih0aGlzLnN0YXJTZWxlY3RzQ2xvc2VkUVNBKWZvcihjPTA7bT1nW2MrK107KSEobS5ub2RlTmFtZT4iQCIpfHxkJiZ1W3RoaXMuZ2V0VUlEKG0pXXx8YS5wdXNoKG0pO2Vsc2UgZm9yKGM9MDttPWdbYysrXTspZCYmdVt0aGlzLmdldFVJRChtKV18fGEucHVzaChtKTtyZXR1cm4gZCYmdGhpcy5zb3J0KGEpLGF9aWYobD10aGlzLlNsaWNrLnBhcnNlKHQpLCFsLmxlbmd0aClyZXR1cm4gYX1lbHNle2lmKG51bGw9PXQpcmV0dXJuIGE7aWYoIXQuU2xpY2spcmV0dXJuIHRoaXMuY29udGFpbnMoZS5kb2N1bWVudEVsZW1lbnR8fGUsdCk/KGE/YS5wdXNoKHQpOmE9dCxhKTphO2w9dH10aGlzLnBvc05USD17fSx0aGlzLnBvc05USExhc3Q9e30sdGhpcy5wb3NOVEhUeXBlPXt9LHRoaXMucG9zTlRIVHlwZUxhc3Q9e30sdGhpcy5wdXNoPSFkJiYoc3x8MT09bC5sZW5ndGgmJjE9PWwuZXhwcmVzc2lvbnNbMF0ubGVuZ3RoKT90aGlzLnB1c2hBcnJheTp0aGlzLnB1c2hVSUQsbnVsbD09YSYmKGE9W10pO3ZhciBULEUsUyxBLFAsTCxPLE0sRCxSLEksRyxOLFgsQj1sLmV4cHJlc3Npb25zO2U6Zm9yKGM9MDtHPUJbY107YysrKWZvcihUPTA7Tj1HW1RdO1QrKyl7aWYoQT0iY29tYmluYXRvcjoiK04uY29tYmluYXRvciwhdGhpc1tBXSljb250aW51ZSBlO2lmKFA9dGhpcy5pc1hNTERvY3VtZW50P04udGFnOk4udGFnLnRvVXBwZXJDYXNlKCksTD1OLmlkLE89Ti5jbGFzc0xpc3QsTT1OLmNsYXNzZXMsRD1OLmF0dHJpYnV0ZXMsUj1OLnBzZXVkb3MsWD1UPT09Ry5sZW5ndGgtMSx0aGlzLmJpdFVuaXF1ZXM9e30sWD8odGhpcy51bmlxdWVzPXUsdGhpcy5mb3VuZD1hKToodGhpcy51bmlxdWVzPXt9LHRoaXMuZm91bmQ9W10pLDA9PT1UKXtpZih0aGlzW0FdKGUsUCxMLE0sRCxSLE8pLHMmJlgmJmEubGVuZ3RoKWJyZWFrIGV9ZWxzZSBpZihzJiZYKXtmb3IoRT0wLFM9SS5sZW5ndGg7Uz5FO0UrKylpZih0aGlzW0FdKElbRV0sUCxMLE0sRCxSLE8pLGEubGVuZ3RoKWJyZWFrIGV9ZWxzZSBmb3IoRT0wLFM9SS5sZW5ndGg7Uz5FO0UrKyl0aGlzW0FdKElbRV0sUCxMLE0sRCxSLE8pO0k9dGhpcy5mb3VuZH1yZXR1cm4oZHx8bC5leHByZXNzaW9ucy5sZW5ndGg+MSkmJnRoaXMuc29ydChhKSxzP2FbMF18fG51bGw6YX0sZS51aWR4PTEsZS51aWRrPSJzbGljay11bmlxdWVpZCIsZS5nZXRVSURYTUw9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5nZXRBdHRyaWJ1dGUodGhpcy51aWRrKTtyZXR1cm4gdHx8KHQ9dGhpcy51aWR4KyssZS5zZXRBdHRyaWJ1dGUodGhpcy51aWRrLHQpKSx0fSxlLmdldFVJREhUTUw9ZnVuY3Rpb24oZSl7cmV0dXJuIGUudW5pcXVlTnVtYmVyfHwoZS51bmlxdWVOdW1iZXI9dGhpcy51aWR4KyspfSxlLnNvcnQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuZG9jdW1lbnRTb3J0ZXI/KGUuc29ydCh0aGlzLmRvY3VtZW50U29ydGVyKSxlKTplfSxlLmNhY2hlTlRIPXt9LGUubWF0Y2hOVEg9L14oWystXT9cZCopPyhbYS16XSspPyhbKy1dXGQrKT8kLyxlLnBhcnNlTlRIQXJndW1lbnQ9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5tYXRjaCh0aGlzLm1hdGNoTlRIKTtpZighdClyZXR1cm4hMTt2YXIgaT10WzJdfHwhMSxuPXRbMV18fDE7Ii0iPT1uJiYobj0tMSk7dmFyIHI9K3RbM118fDA7cmV0dXJuIHQ9Im4iPT1pP3thOm4sYjpyfToib2RkIj09aT97YToyLGI6MX06ImV2ZW4iPT1pP3thOjIsYjowfTp7YTowLGI6bn0sdGhpcy5jYWNoZU5USFtlXT10fSxlLmNyZWF0ZU5USFBzZXVkbz1mdW5jdGlvbihlLHQsaSxuKXtyZXR1cm4gZnVuY3Rpb24ocixvKXt2YXIgcz10aGlzLmdldFVJRChyKTtpZighdGhpc1tpXVtzXSl7dmFyIGE9ci5wYXJlbnROb2RlO2lmKCFhKXJldHVybiExO3ZhciBsPWFbZV0sYz0xO2lmKG4pe3ZhciB1PXIubm9kZU5hbWU7ZG8gbC5ub2RlTmFtZT09dSYmKHRoaXNbaV1bdGhpcy5nZXRVSUQobCldPWMrKyk7d2hpbGUobD1sW3RdKX1lbHNlIGRvIDE9PWwubm9kZVR5cGUmJih0aGlzW2ldW3RoaXMuZ2V0VUlEKGwpXT1jKyspO3doaWxlKGw9bFt0XSl9bz1vfHwibiI7dmFyIGg9dGhpcy5jYWNoZU5USFtvXXx8dGhpcy5wYXJzZU5USEFyZ3VtZW50KG8pO2lmKCFoKXJldHVybiExO3ZhciBkPWguYSxwPWguYixmPXRoaXNbaV1bc107aWYoMD09ZClyZXR1cm4gcD09ZjtpZihkPjApe2lmKHA+ZilyZXR1cm4hMX1lbHNlIGlmKGY+cClyZXR1cm4hMTtyZXR1cm4gMD09KGYtcCklZH19LGUucHVzaEFycmF5PWZ1bmN0aW9uKGUsdCxpLG4scixvKXt0aGlzLm1hdGNoU2VsZWN0b3IoZSx0LGksbixyLG8pJiZ0aGlzLmZvdW5kLnB1c2goZSl9LGUucHVzaFVJRD1mdW5jdGlvbihlLHQsaSxuLHIsbyl7dmFyIHM9dGhpcy5nZXRVSUQoZSk7IXRoaXMudW5pcXVlc1tzXSYmdGhpcy5tYXRjaFNlbGVjdG9yKGUsdCxpLG4scixvKSYmKHRoaXMudW5pcXVlc1tzXT0hMCx0aGlzLmZvdW5kLnB1c2goZSkpfSxlLm1hdGNoTm9kZT1mdW5jdGlvbihlLHQpe2lmKHRoaXMuaXNIVE1MRG9jdW1lbnQmJnRoaXMubmF0aXZlTWF0Y2hlc1NlbGVjdG9yKXRyeXtyZXR1cm4gdGhpcy5uYXRpdmVNYXRjaGVzU2VsZWN0b3IuY2FsbChlLHQucmVwbGFjZSgvXFsoW149XSspPVxzKihbXiciXF1dKz8pXHMqXF0vZywnWyQxPSIkMiJdJykpfWNhdGNoKGkpe312YXIgbj10aGlzLlNsaWNrLnBhcnNlKHQpO2lmKCFuKXJldHVybiEwO3ZhciByLG89bi5leHByZXNzaW9ucyxzPTA7Zm9yKHI9MDtjdXJyZW50RXhwcmVzc2lvbj1vW3JdO3IrKylpZigxPT1jdXJyZW50RXhwcmVzc2lvbi5sZW5ndGgpe3ZhciBhPWN1cnJlbnRFeHByZXNzaW9uWzBdO2lmKHRoaXMubWF0Y2hTZWxlY3RvcihlLHRoaXMuaXNYTUxEb2N1bWVudD9hLnRhZzphLnRhZy50b1VwcGVyQ2FzZSgpLGEuaWQsYS5jbGFzc2VzLGEuYXR0cmlidXRlcyxhLnBzZXVkb3MpKXJldHVybiEwO3MrK31pZihzPT1uLmxlbmd0aClyZXR1cm4hMTt2YXIgbCxjPXRoaXMuc2VhcmNoKHRoaXMuZG9jdW1lbnQsbik7Zm9yKHI9MDtsPWNbcisrXTspaWYobD09PWUpcmV0dXJuITA7cmV0dXJuITF9LGUubWF0Y2hQc2V1ZG89ZnVuY3Rpb24oZSx0LGkpe3ZhciBuPSJwc2V1ZG86Iit0O2lmKHRoaXNbbl0pcmV0dXJuIHRoaXNbbl0oZSxpKTt2YXIgcj10aGlzLmdldEF0dHJpYnV0ZShlLHQpO3JldHVybiBpP2k9PXI6ISFyfSxlLm1hdGNoU2VsZWN0b3I9ZnVuY3Rpb24oZSx0LGksbixyLG8pe2lmKHQpe3ZhciBzPXRoaXMuaXNYTUxEb2N1bWVudD9lLm5vZGVOYW1lOmUubm9kZU5hbWUudG9VcHBlckNhc2UoKTtpZigiKiI9PXQpe2lmKCJAIj5zKXJldHVybiExfWVsc2UgaWYocyE9dClyZXR1cm4hMX1pZihpJiZlLmdldEF0dHJpYnV0ZSgiaWQiKSE9aSlyZXR1cm4hMTt2YXIgYSxsLGM7aWYobilmb3IoYT1uLmxlbmd0aDthLS07KWlmKGM9dGhpcy5nZXRBdHRyaWJ1dGUoZSwiY2xhc3MiKSwhY3x8IW5bYV0ucmVnZXhwLnRlc3QoYykpcmV0dXJuITE7aWYocilmb3IoYT1yLmxlbmd0aDthLS07KWlmKGw9clthXSxsLm9wZXJhdG9yPyFsLnRlc3QodGhpcy5nZXRBdHRyaWJ1dGUoZSxsLmtleSkpOiF0aGlzLmhhc0F0dHJpYnV0ZShlLGwua2V5KSlyZXR1cm4hMTtpZihvKWZvcihhPW8ubGVuZ3RoO2EtLTspaWYobD1vW2FdLCF0aGlzLm1hdGNoUHNldWRvKGUsbC5rZXksbC52YWx1ZSkpcmV0dXJuITE7cmV0dXJuITB9O3ZhciBzPXsiICI6ZnVuY3Rpb24oZSx0LGksbixyLG8scyl7dmFyIGEsbCxjO2lmKHRoaXMuaXNIVE1MRG9jdW1lbnQpe2U6aWYoaSl7aWYobD10aGlzLmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGkpLCFsJiZlLmFsbHx8dGhpcy5pZEdldHNOYW1lJiZsJiZsLmdldEF0dHJpYnV0ZU5vZGUoImlkIikubm9kZVZhbHVlIT1pKXtpZihjPWUuYWxsW2ldLCFjKXJldHVybjtmb3IoY1swXXx8KGM9W2NdKSxhPTA7bD1jW2ErK107KXt2YXIgdT1sLmdldEF0dHJpYnV0ZU5vZGUoImlkIik7aWYodSYmdS5ub2RlVmFsdWU9PWkpe3RoaXMucHVzaChsLHQsbnVsbCxuLHIsbyk7YnJlYWt9fXJldHVybn1pZighbCl7aWYodGhpcy5jb250YWlucyh0aGlzLnJvb3QsZSkpcmV0dXJuO2JyZWFrIGV9aWYodGhpcy5kb2N1bWVudCE9PWUmJiF0aGlzLmNvbnRhaW5zKGUsbCkpcmV0dXJuO3JldHVybiB0aGlzLnB1c2gobCx0LG51bGwsbixyLG8pLHZvaWQgMH1lOmlmKG4mJmUuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSYmIXRoaXMuYnJva2VuR0VCQ04pe2lmKGM9ZS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKHMuam9pbigiICIpKSwhY3x8IWMubGVuZ3RoKWJyZWFrIGU7Zm9yKGE9MDtsPWNbYSsrXTspdGhpcy5wdXNoKGwsdCxpLG51bGwscixvKTtyZXR1cm59fWlmKGM9ZS5nZXRFbGVtZW50c0J5VGFnTmFtZSh0KSxjJiZjLmxlbmd0aClmb3IodGhpcy5icm9rZW5TdGFyR0VCVE58fCh0PW51bGwpLGE9MDtsPWNbYSsrXTspdGhpcy5wdXNoKGwsdCxpLG4scixvKX0sIj4iOmZ1bmN0aW9uKGUsdCxpLG4scixvKXtpZihlPWUuZmlyc3RDaGlsZClkbyAxPT1lLm5vZGVUeXBlJiZ0aGlzLnB1c2goZSx0LGksbixyLG8pO3doaWxlKGU9ZS5uZXh0U2libGluZyl9LCIrIjpmdW5jdGlvbihlLHQsaSxuLHIsbyl7Zm9yKDtlPWUubmV4dFNpYmxpbmc7KWlmKDE9PWUubm9kZVR5cGUpe3RoaXMucHVzaChlLHQsaSxuLHIsbyk7YnJlYWt9fSwiXiI6ZnVuY3Rpb24oZSx0LGksbixyLG8pe2U9ZS5maXJzdENoaWxkLGUmJigxPT1lLm5vZGVUeXBlP3RoaXMucHVzaChlLHQsaSxuLHIsbyk6dGhpc1siY29tYmluYXRvcjorIl0oZSx0LGksbixyLG8pKX0sIn4iOmZ1bmN0aW9uKGUsdCxpLG4scixvKXtmb3IoO2U9ZS5uZXh0U2libGluZzspaWYoMT09ZS5ub2RlVHlwZSl7dmFyIHM9dGhpcy5nZXRVSUQoZSk7aWYodGhpcy5iaXRVbmlxdWVzW3NdKWJyZWFrO3RoaXMuYml0VW5pcXVlc1tzXT0hMCx0aGlzLnB1c2goZSx0LGksbixyLG8pfX0sIisrIjpmdW5jdGlvbihlLHQsaSxuLHIsbyl7dGhpc1siY29tYmluYXRvcjorIl0oZSx0LGksbixyLG8pLHRoaXNbImNvbWJpbmF0b3I6ISsiXShlLHQsaSxuLHIsbyl9LCJ+fiI6ZnVuY3Rpb24oZSx0LGksbixyLG8pe3RoaXNbImNvbWJpbmF0b3I6fiJdKGUsdCxpLG4scixvKSx0aGlzWyJjb21iaW5hdG9yOiF+Il0oZSx0LGksbixyLG8pfSwiISI6ZnVuY3Rpb24oZSx0LGksbixyLG8pe2Zvcig7ZT1lLnBhcmVudE5vZGU7KWUhPT10aGlzLmRvY3VtZW50JiZ0aGlzLnB1c2goZSx0LGksbixyLG8pfSwiIT4iOmZ1bmN0aW9uKGUsdCxpLG4scixvKXtlPWUucGFyZW50Tm9kZSxlIT09dGhpcy5kb2N1bWVudCYmdGhpcy5wdXNoKGUsdCxpLG4scixvKX0sIiErIjpmdW5jdGlvbihlLHQsaSxuLHIsbyl7Zm9yKDtlPWUucHJldmlvdXNTaWJsaW5nOylpZigxPT1lLm5vZGVUeXBlKXt0aGlzLnB1c2goZSx0LGksbixyLG8pO2JyZWFrfX0sIiFeIjpmdW5jdGlvbihlLHQsaSxuLHIsbyl7ZT1lLmxhc3RDaGlsZCxlJiYoMT09ZS5ub2RlVHlwZT90aGlzLnB1c2goZSx0LGksbixyLG8pOnRoaXNbImNvbWJpbmF0b3I6ISsiXShlLHQsaSxuLHIsbykpfSwiIX4iOmZ1bmN0aW9uKGUsdCxpLG4scixvKXtmb3IoO2U9ZS5wcmV2aW91c1NpYmxpbmc7KWlmKDE9PWUubm9kZVR5cGUpe3ZhciBzPXRoaXMuZ2V0VUlEKGUpO2lmKHRoaXMuYml0VW5pcXVlc1tzXSlicmVhazt0aGlzLmJpdFVuaXF1ZXNbc109ITAsdGhpcy5wdXNoKGUsdCxpLG4scixvKX19fTtmb3IodmFyIGEgaW4gcyllWyJjb21iaW5hdG9yOiIrYV09c1thXTt2YXIgbD17ZW1wdHk6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5maXJzdENoaWxkO3JldHVybiEodCYmMT09dC5ub2RlVHlwZXx8KGUuaW5uZXJUZXh0fHxlLnRleHRDb250ZW50fHwiIikubGVuZ3RoKX0sbm90OmZ1bmN0aW9uKGUsdCl7cmV0dXJuIXRoaXMubWF0Y2hOb2RlKGUsdCl9LGNvbnRhaW5zOmZ1bmN0aW9uKGUsdCl7cmV0dXJuKGUuaW5uZXJUZXh0fHxlLnRleHRDb250ZW50fHwiIikuaW5kZXhPZih0KT4tMX0sImZpcnN0LWNoaWxkIjpmdW5jdGlvbihlKXtmb3IoO2U9ZS5wcmV2aW91c1NpYmxpbmc7KWlmKDE9PWUubm9kZVR5cGUpcmV0dXJuITE7cmV0dXJuITB9LCJsYXN0LWNoaWxkIjpmdW5jdGlvbihlKXtmb3IoO2U9ZS5uZXh0U2libGluZzspaWYoMT09ZS5ub2RlVHlwZSlyZXR1cm4hMTtyZXR1cm4hMH0sIm9ubHktY2hpbGQiOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1lO3Q9dC5wcmV2aW91c1NpYmxpbmc7KWlmKDE9PXQubm9kZVR5cGUpcmV0dXJuITE7Zm9yKHZhciBpPWU7aT1pLm5leHRTaWJsaW5nOylpZigxPT1pLm5vZGVUeXBlKXJldHVybiExO3JldHVybiEwfSwibnRoLWNoaWxkIjplLmNyZWF0ZU5USFBzZXVkbygiZmlyc3RDaGlsZCIsIm5leHRTaWJsaW5nIiwicG9zTlRIIiksIm50aC1sYXN0LWNoaWxkIjplLmNyZWF0ZU5USFBzZXVkbygibGFzdENoaWxkIiwicHJldmlvdXNTaWJsaW5nIiwicG9zTlRITGFzdCIpLCJudGgtb2YtdHlwZSI6ZS5jcmVhdGVOVEhQc2V1ZG8oImZpcnN0Q2hpbGQiLCJuZXh0U2libGluZyIsInBvc05USFR5cGUiLCEwKSwibnRoLWxhc3Qtb2YtdHlwZSI6ZS5jcmVhdGVOVEhQc2V1ZG8oImxhc3RDaGlsZCIsInByZXZpb3VzU2libGluZyIsInBvc05USFR5cGVMYXN0IiwhMCksaW5kZXg6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpc1sicHNldWRvOm50aC1jaGlsZCJdKGUsIiIrKHQrMSkpfSxldmVuOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzWyJwc2V1ZG86bnRoLWNoaWxkIl0oZSwiMm4iKX0sb2RkOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzWyJwc2V1ZG86bnRoLWNoaWxkIl0oZSwiMm4rMSIpfSwiZmlyc3Qtb2YtdHlwZSI6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PWUubm9kZU5hbWU7ZT1lLnByZXZpb3VzU2libGluZzspaWYoZS5ub2RlTmFtZT09dClyZXR1cm4hMTtyZXR1cm4hMH0sImxhc3Qtb2YtdHlwZSI6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PWUubm9kZU5hbWU7ZT1lLm5leHRTaWJsaW5nOylpZihlLm5vZGVOYW1lPT10KXJldHVybiExO3JldHVybiEwfSwib25seS1vZi10eXBlIjpmdW5jdGlvbihlKXtmb3IodmFyIHQ9ZSxpPWUubm9kZU5hbWU7dD10LnByZXZpb3VzU2libGluZzspaWYodC5ub2RlTmFtZT09aSlyZXR1cm4hMTtmb3IodmFyIG49ZTtuPW4ubmV4dFNpYmxpbmc7KWlmKG4ubm9kZU5hbWU9PWkpcmV0dXJuITE7cmV0dXJuITB9LGVuYWJsZWQ6ZnVuY3Rpb24oZSl7cmV0dXJuIWUuZGlzYWJsZWR9LGRpc2FibGVkOmZ1bmN0aW9uKGUpe3JldHVybiBlLmRpc2FibGVkfSxjaGVja2VkOmZ1bmN0aW9uKGUpe3JldHVybiBlLmNoZWNrZWR8fGUuc2VsZWN0ZWR9LGZvY3VzOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmlzSFRNTERvY3VtZW50JiZ0aGlzLmRvY3VtZW50LmFjdGl2ZUVsZW1lbnQ9PT1lJiYoZS5ocmVmfHxlLnR5cGV8fHRoaXMuaGFzQXR0cmlidXRlKGUsInRhYmluZGV4IikpfSxyb290OmZ1bmN0aW9uKGUpe3JldHVybiBlPT09dGhpcy5yb290fSxzZWxlY3RlZDpmdW5jdGlvbihlKXtyZXR1cm4gZS5zZWxlY3RlZH19O2Zvcih2YXIgYyBpbiBsKWVbInBzZXVkbzoiK2NdPWxbY107dmFyIHU9ZS5hdHRyaWJ1dGVHZXR0ZXJzPXsiZm9yIjpmdW5jdGlvbigpe3JldHVybiJodG1sRm9yImluIHRoaXM/dGhpcy5odG1sRm9yOnRoaXMuZ2V0QXR0cmlidXRlKCJmb3IiKX0saHJlZjpmdW5jdGlvbigpe3JldHVybiJocmVmImluIHRoaXM/dGhpcy5nZXRBdHRyaWJ1dGUoImhyZWYiLDIpOnRoaXMuZ2V0QXR0cmlidXRlKCJocmVmIil9LHN0eWxlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3R5bGU/dGhpcy5zdHlsZS5jc3NUZXh0OnRoaXMuZ2V0QXR0cmlidXRlKCJzdHlsZSIpfSx0YWJpbmRleDpmdW5jdGlvbigpe3ZhciBlPXRoaXMuZ2V0QXR0cmlidXRlTm9kZSgidGFiaW5kZXgiKTtyZXR1cm4gZSYmZS5zcGVjaWZpZWQ/ZS5ub2RlVmFsdWU6bnVsbH0sdHlwZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldEF0dHJpYnV0ZSgidHlwZSIpfSxtYXhsZW5ndGg6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmdldEF0dHJpYnV0ZU5vZGUoIm1heExlbmd0aCIpO3JldHVybiBlJiZlLnNwZWNpZmllZD9lLm5vZGVWYWx1ZTpudWxsfX07dS5NQVhMRU5HVEg9dS5tYXhMZW5ndGg9dS5tYXhsZW5ndGg7dmFyIGg9ZS5TbGljaz10aGlzLlNsaWNrfHx7fTtoLnZlcnNpb249IjEuMS43IixoLnNlYXJjaD1mdW5jdGlvbih0LGksbil7cmV0dXJuIGUuc2VhcmNoKHQsaSxuKX0saC5maW5kPWZ1bmN0aW9uKHQsaSl7cmV0dXJuIGUuc2VhcmNoKHQsaSxudWxsLCEwKX0saC5jb250YWlucz1mdW5jdGlvbih0LGkpe3JldHVybiBlLnNldERvY3VtZW50KHQpLGUuY29udGFpbnModCxpKX0saC5nZXRBdHRyaWJ1dGU9ZnVuY3Rpb24odCxpKXtyZXR1cm4gZS5zZXREb2N1bWVudCh0KSxlLmdldEF0dHJpYnV0ZSh0LGkpfSxoLmhhc0F0dHJpYnV0ZT1mdW5jdGlvbih0LGkpe3JldHVybiBlLnNldERvY3VtZW50KHQpLGUuaGFzQXR0cmlidXRlKHQsaSl9LGgubWF0Y2g9ZnVuY3Rpb24odCxpKXtyZXR1cm4gdCYmaT9pJiZpIT09dD8oZS5zZXREb2N1bWVudCh0KSxlLm1hdGNoTm9kZSh0LGkpKTohMDohMX0saC5kZWZpbmVBdHRyaWJ1dGVHZXR0ZXI9ZnVuY3Rpb24odCxpKXtyZXR1cm4gZS5hdHRyaWJ1dGVHZXR0ZXJzW3RdPWksdGhpc30saC5sb29rdXBBdHRyaWJ1dGVHZXR0ZXI9ZnVuY3Rpb24odCl7cmV0dXJuIGUuYXR0cmlidXRlR2V0dGVyc1t0XX0saC5kZWZpbmVQc2V1ZG89ZnVuY3Rpb24odCxpKXtyZXR1cm4gZVsicHNldWRvOiIrdF09ZnVuY3Rpb24oZSx0KXtyZXR1cm4gaS5jYWxsKGUsdCl9LHRoaXN9LGgubG9va3VwUHNldWRvPWZ1bmN0aW9uKHQpe3ZhciBpPWVbInBzZXVkbzoiK3RdO3JldHVybiBpP2Z1bmN0aW9uKGUpe3JldHVybiBpLmNhbGwodGhpcyxlKX06bnVsbH0saC5vdmVycmlkZT1mdW5jdGlvbih0LGkpe3JldHVybiBlLm92ZXJyaWRlKHQsaSksdGhpc30saC5pc1hNTD1lLmlzWE1MLGgudWlkT2Y9ZnVuY3Rpb24odCl7cmV0dXJuIGUuZ2V0VUlESFRNTCh0KX0sdGhpcy5TbGlja3x8KHRoaXMuU2xpY2s9aCl9LmFwcGx5KCJ1bmRlZmluZWQiIT10eXBlb2YgZXhwb3J0cz9leHBvcnRzOnRoaXMpO3ZhciBFbGVtZW50PWZ1bmN0aW9uKGUsdCl7dmFyIGk9RWxlbWVudC5Db25zdHJ1Y3RvcnNbZV07aWYoaSlyZXR1cm4gaSh0KTtpZigic3RyaW5nIiE9dHlwZW9mIGUpcmV0dXJuIGRvY3VtZW50LmlkKGUpLnNldCh0KTtpZih0fHwodD17fSksIS9eW1x3LV0rJC8udGVzdChlKSl7dmFyIG49U2xpY2sucGFyc2UoZSkuZXhwcmVzc2lvbnNbMF1bMF07ZT0iKiI9PW4udGFnPyJkaXYiOm4udGFnLG4uaWQmJm51bGw9PXQuaWQmJih0LmlkPW4uaWQpO3ZhciByPW4uYXR0cmlidXRlcztpZihyKWZvcih2YXIgbyxzPTAsYT1yLmxlbmd0aDthPnM7cysrKW89cltzXSxudWxsPT10W28ua2V5XSYmKG51bGwhPW8udmFsdWUmJiI9Ij09by5vcGVyYXRvcj90W28ua2V5XT1vLnZhbHVlOm8udmFsdWV8fG8ub3BlcmF0b3J8fCh0W28ua2V5XT0hMCkpO24uY2xhc3NMaXN0JiZudWxsPT10WyJjbGFzcyJdJiYodFsiY2xhc3MiXT1uLmNsYXNzTGlzdC5qb2luKCIgIikpfXJldHVybiBkb2N1bWVudC5uZXdFbGVtZW50KGUsdCl9O0Jyb3dzZXIuRWxlbWVudCYmKEVsZW1lbnQucHJvdG90eXBlPUJyb3dzZXIuRWxlbWVudC5wcm90b3R5cGUsRWxlbWVudC5wcm90b3R5cGUuX2ZpcmVFdmVudD1mdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCxpKXtyZXR1cm4gZS5jYWxsKHRoaXMsdCxpKX19KEVsZW1lbnQucHJvdG90eXBlLmZpcmVFdmVudCkpLG5ldyBUeXBlKCJFbGVtZW50IixFbGVtZW50KS5taXJyb3IoZnVuY3Rpb24oZSl7aWYoIUFycmF5LnByb3RvdHlwZVtlXSl7dmFyIHQ9e307dFtlXT1mdW5jdGlvbigpe2Zvcih2YXIgdD1bXSxpPWFyZ3VtZW50cyxuPSEwLHI9MCxvPXRoaXMubGVuZ3RoO28+cjtyKyspe3ZhciBzPXRoaXNbcl0sYT10W3JdPXNbZV0uYXBwbHkocyxpKTtuPW4mJiJlbGVtZW50Ij09dHlwZU9mKGEpfXJldHVybiBuP25ldyBFbGVtZW50cyh0KTp0fSxFbGVtZW50cy5pbXBsZW1lbnQodCl9fSksQnJvd3Nlci5FbGVtZW50fHwoRWxlbWVudC5wYXJlbnQ9T2JqZWN0LEVsZW1lbnQuUHJvdG90eXBlPXskY29uc3RydWN0b3I6RWxlbWVudCwkZmFtaWx5OkZ1bmN0aW9uLmZyb20oImVsZW1lbnQiKS5oaWRlKCl9LEVsZW1lbnQubWlycm9yKGZ1bmN0aW9uKGUsdCl7RWxlbWVudC5Qcm90b3R5cGVbZV09dH0pKSxFbGVtZW50LkNvbnN0cnVjdG9ycz17fSxFbGVtZW50LkNvbnN0cnVjdG9ycz1uZXcgSGFzaDt2YXIgSUZyYW1lPW5ldyBUeXBlKCJJRnJhbWUiLGZ1bmN0aW9uKCl7dmFyIGUsdD1BcnJheS5saW5rKGFyZ3VtZW50cyx7cHJvcGVydGllczpUeXBlLmlzT2JqZWN0LGlmcmFtZTpmdW5jdGlvbihlKXtyZXR1cm4gbnVsbCE9ZX19KSxpPXQucHJvcGVydGllc3x8e307dC5pZnJhbWUmJihlPWRvY3VtZW50LmlkKHQuaWZyYW1lKSk7dmFyIG49aS5vbmxvYWR8fGZ1bmN0aW9uKCl7fTtkZWxldGUgaS5vbmxvYWQsaS5pZD1pLm5hbWU9W2kuaWQsaS5uYW1lLGU/ZS5pZHx8ZS5uYW1lOiJJRnJhbWVfIitTdHJpbmcudW5pcXVlSUQoKV0ucGljaygpLGU9bmV3IEVsZW1lbnQoZXx8ImlmcmFtZSIsaSk7dmFyIHI9ZnVuY3Rpb24oKXtuLmNhbGwoZS5jb250ZW50V2luZG93KX07cmV0dXJuIHdpbmRvdy5mcmFtZXNbaS5pZF0/cigpOmUuYWRkTGlzdGVuZXIoImxvYWQiLHIpLGV9KSxFbGVtZW50cz10aGlzLkVsZW1lbnRzPWZ1bmN0aW9uKGUpe2lmKGUmJmUubGVuZ3RoKWZvcih2YXIgdCxpPXt9LG49MDt0PWVbbisrXTspe3ZhciByPVNsaWNrLnVpZE9mKHQpO2lbcl18fChpW3JdPSEwLHRoaXMucHVzaCh0KSl9fTtFbGVtZW50cy5wcm90b3R5cGU9e2xlbmd0aDowfSxFbGVtZW50cy5wYXJlbnQ9QXJyYXksbmV3IFR5cGUoIkVsZW1lbnRzIixFbGVtZW50cykuaW1wbGVtZW50KHtmaWx0ZXI6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZT9uZXcgRWxlbWVudHMoQXJyYXkuZmlsdGVyKHRoaXMsInN0cmluZyI9PXR5cGVPZihlKT9mdW5jdGlvbih0KXtyZXR1cm4gdC5tYXRjaChlKX06ZSx0KSk6dGhpc30ucHJvdGVjdCgpLHB1c2g6ZnVuY3Rpb24oKXtmb3IodmFyIGU9dGhpcy5sZW5ndGgsdD0wLGk9YXJndW1lbnRzLmxlbmd0aDtpPnQ7dCsrKXt2YXIgbj1kb2N1bWVudC5pZChhcmd1bWVudHNbdF0pO24mJih0aGlzW2UrK109bil9cmV0dXJuIHRoaXMubGVuZ3RoPWV9LnByb3RlY3QoKSx1bnNoaWZ0OmZ1bmN0aW9uKCl7Zm9yKHZhciBlPVtdLHQ9MCxpPWFyZ3VtZW50cy5sZW5ndGg7aT50O3QrKyl7dmFyIG49ZG9jdW1lbnQuaWQoYXJndW1lbnRzW3RdKTtuJiZlLnB1c2gobil9cmV0dXJuIEFycmF5LnByb3RvdHlwZS51bnNoaWZ0LmFwcGx5KHRoaXMsZSl9LnByb3RlY3QoKSxjb25jYXQ6ZnVuY3Rpb24oKXtmb3IodmFyIGU9bmV3IEVsZW1lbnRzKHRoaXMpLHQ9MCxpPWFyZ3VtZW50cy5sZW5ndGg7aT50O3QrKyl7dmFyIG49YXJndW1lbnRzW3RdO1R5cGUuaXNFbnVtZXJhYmxlKG4pP2UuYXBwZW5kKG4pOmUucHVzaChuKX1yZXR1cm4gZX0ucHJvdGVjdCgpLGFwcGVuZDpmdW5jdGlvbihlKXtmb3IodmFyIHQ9MCxpPWUubGVuZ3RoO2k+dDt0KyspdGhpcy5wdXNoKGVbdF0pO3JldHVybiB0aGlzfS5wcm90ZWN0KCksZW1wdHk6ZnVuY3Rpb24oKXtmb3IoO3RoaXMubGVuZ3RoOylkZWxldGUgdGhpc1stLXRoaXMubGVuZ3RoXTtyZXR1cm4gdGhpc30ucHJvdGVjdCgpfSksRWxlbWVudHMuYWxpYXMoImV4dGVuZCIsImFwcGVuZCIpLGZ1bmN0aW9uKCl7dmFyIGU9QXJyYXkucHJvdG90eXBlLnNwbGljZSx0PXswOjAsMToxLGxlbmd0aDoyfTtlLmNhbGwodCwxLDEpLDE9PXRbMV0mJkVsZW1lbnRzLmltcGxlbWVudCgic3BsaWNlIixmdW5jdGlvbigpe2Zvcih2YXIgdD10aGlzLmxlbmd0aCxpPWUuYXBwbHkodGhpcyxhcmd1bWVudHMpO3Q+PXRoaXMubGVuZ3RoOylkZWxldGUgdGhpc1t0LS1dO3JldHVybiBpfS5wcm90ZWN0KCkpLEFycmF5LmZvckVhY2hNZXRob2QoZnVuY3Rpb24oZSx0KXtFbGVtZW50cy5pbXBsZW1lbnQodCxlKX0pLEFycmF5Lm1pcnJvcihFbGVtZW50cyk7dmFyIGk7dHJ5e2k9IngiPT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCI8aW5wdXQgbmFtZT14PiIpLm5hbWV9Y2F0Y2gobil7fXZhciByPWZ1bmN0aW9uKGUpe3JldHVybigiIitlKS5yZXBsYWNlKC8mL2csIiZhbXA7IikucmVwbGFjZSgvIi9nLCImcXVvdDsiKX07RG9jdW1lbnQuaW1wbGVtZW50KHtuZXdFbGVtZW50OmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQmJm51bGwhPXQuY2hlY2tlZCYmKHQuZGVmYXVsdENoZWNrZWQ9dC5jaGVja2VkKSxpJiZ0JiYoZT0iPCIrZSx0Lm5hbWUmJihlKz0nIG5hbWU9Iicrcih0Lm5hbWUpKyciJyksdC50eXBlJiYoZSs9JyB0eXBlPSInK3IodC50eXBlKSsnIicpLGUrPSI+IixkZWxldGUgdC5uYW1lLGRlbGV0ZSB0LnR5cGUpLHRoaXMuaWQodGhpcy5jcmVhdGVFbGVtZW50KGUpKS5zZXQodCl9fSl9KCksZnVuY3Rpb24oKXtTbGljay51aWRPZih3aW5kb3cpLFNsaWNrLnVpZE9mKGRvY3VtZW50KSxEb2N1bWVudC5pbXBsZW1lbnQoe25ld1RleHROb2RlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmNyZWF0ZVRleHROb2RlKGUpfSxnZXREb2N1bWVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzfSxnZXRXaW5kb3c6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy53aW5kb3d9LGlkOmZ1bmN0aW9uKCl7dmFyIGU9e3N0cmluZzpmdW5jdGlvbih0LGksbil7cmV0dXJuIHQ9U2xpY2suZmluZChuLCIjIit0LnJlcGxhY2UoLyhcVykvZywiXFwkMSIpKSx0P2UuZWxlbWVudCh0LGkpOm51bGx9LGVsZW1lbnQ6ZnVuY3Rpb24oZSx0KXtpZihTbGljay51aWRPZihlKSwhdCYmIWUuJGZhbWlseSYmIS9eKD86b2JqZWN0fGVtYmVkKSQvaS50ZXN0KGUudGFnTmFtZSkpe3ZhciBpPWUuZmlyZUV2ZW50O2UuX2ZpcmVFdmVudD1mdW5jdGlvbihlLHQpe3JldHVybiBpKGUsdCl9LE9iamVjdC5hcHBlbmQoZSxFbGVtZW50LlByb3RvdHlwZSl9cmV0dXJuIGV9LG9iamVjdDpmdW5jdGlvbih0LGksbil7cmV0dXJuIHQudG9FbGVtZW50P2UuZWxlbWVudCh0LnRvRWxlbWVudChuKSxpKTpudWxsfX07cmV0dXJuIGUudGV4dG5vZGU9ZS53aGl0ZXNwYWNlPWUud2luZG93PWUuZG9jdW1lbnQ9ZnVuY3Rpb24oZSl7cmV0dXJuIGV9LGZ1bmN0aW9uKHQsaSxuKXtpZih0JiZ0LiRmYW1pbHkmJnQudW5pcXVlTnVtYmVyKXJldHVybiB0O3ZhciByPXR5cGVPZih0KTtyZXR1cm4gZVtyXT9lW3JdKHQsaSxufHxkb2N1bWVudCk6bnVsbH19KCl9KSxudWxsPT13aW5kb3cuJCYmV2luZG93LmltcGxlbWVudCgiJCIsZnVuY3Rpb24oZSx0KXtyZXR1cm4gZG9jdW1lbnQuaWQoZSx0LHRoaXMuZG9jdW1lbnQpfSksV2luZG93LmltcGxlbWVudCh7Z2V0RG9jdW1lbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kb2N1bWVudH0sZ2V0V2luZG93OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9fSksW0RvY3VtZW50LEVsZW1lbnRdLmludm9rZSgiaW1wbGVtZW50Iix7Z2V0RWxlbWVudHM6ZnVuY3Rpb24oZSl7cmV0dXJuIFNsaWNrLnNlYXJjaCh0aGlzLGUsbmV3IEVsZW1lbnRzKX0sZ2V0RWxlbWVudDpmdW5jdGlvbihlKXtyZXR1cm4gZG9jdW1lbnQuaWQoU2xpY2suZmluZCh0aGlzLGUpKX19KTt2YXIgZT17Y29udGFpbnM6ZnVuY3Rpb24oZSl7cmV0dXJuIFNsaWNrLmNvbnRhaW5zKHRoaXMsZSl9fTtkb2N1bWVudC5jb250YWluc3x8RG9jdW1lbnQuaW1wbGVtZW50KGUpLGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpLmNvbnRhaW5zfHxFbGVtZW50LmltcGxlbWVudChlKSxFbGVtZW50LmltcGxlbWVudCgiaGFzQ2hpbGQiLGZ1bmN0aW9uKGUpe3JldHVybiB0aGlzIT09ZSYmdGhpcy5jb250YWlucyhlKX0pLGZ1bmN0aW9uKGUsdCxpKXt0aGlzLlNlbGVjdG9ycz17fTt2YXIgbj10aGlzLlNlbGVjdG9ycy5Qc2V1ZG89bmV3IEhhc2gscj1mdW5jdGlvbigpe2Zvcih2YXIgZSBpbiBuKW4uaGFzT3duUHJvcGVydHkoZSkmJihTbGljay5kZWZpbmVQc2V1ZG8oZSxuW2VdKSxkZWxldGUgbltlXSl9O1NsaWNrLnNlYXJjaD1mdW5jdGlvbih0LGksbil7cmV0dXJuIHIoKSxlLmNhbGwodGhpcyx0LGksbil9LFNsaWNrLmZpbmQ9ZnVuY3Rpb24oZSxpKXtyZXR1cm4gcigpLHQuY2FsbCh0aGlzLGUsaSl9LFNsaWNrLm1hdGNoPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHIoKSxpLmNhbGwodGhpcyxlLHQpfX0oU2xpY2suc2VhcmNoLFNsaWNrLmZpbmQsU2xpY2subWF0Y2gpO3ZhciB0PWZ1bmN0aW9uKGUsdCl7aWYoIWUpcmV0dXJuIHQ7ZT1PYmplY3QuY2xvbmUoU2xpY2sucGFyc2UoZSkpO2Zvcih2YXIgaT1lLmV4cHJlc3Npb25zLG49aS5sZW5ndGg7bi0tOylpW25dWzBdLmNvbWJpbmF0b3I9dDtyZXR1cm4gZX07T2JqZWN0LmZvckVhY2goe2dldE5leHQ6In4iLGdldFByZXZpb3VzOiIhfiIsZ2V0UGFyZW50OiIhIn0sZnVuY3Rpb24oZSxpKXtFbGVtZW50LmltcGxlbWVudChpLGZ1bmN0aW9uKGkpe3JldHVybiB0aGlzLmdldEVsZW1lbnQodChpLGUpKX0pfSksT2JqZWN0LmZvckVhY2goe2dldEFsbE5leHQ6In4iLGdldEFsbFByZXZpb3VzOiIhfiIsZ2V0U2libGluZ3M6In5+IixnZXRDaGlsZHJlbjoiPiIsZ2V0UGFyZW50czoiISJ9LGZ1bmN0aW9uKGUsaSl7RWxlbWVudC5pbXBsZW1lbnQoaSxmdW5jdGlvbihpKXtyZXR1cm4gdGhpcy5nZXRFbGVtZW50cyh0KGksZSkpfSl9KSxFbGVtZW50LmltcGxlbWVudCh7Z2V0Rmlyc3Q6ZnVuY3Rpb24oZSl7cmV0dXJuIGRvY3VtZW50LmlkKFNsaWNrLnNlYXJjaCh0aGlzLHQoZSwiPiIpKVswXSl9LGdldExhc3Q6ZnVuY3Rpb24oZSl7cmV0dXJuIGRvY3VtZW50LmlkKFNsaWNrLnNlYXJjaCh0aGlzLHQoZSwiPiIpKS5nZXRMYXN0KCkpfSxnZXRXaW5kb3c6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vd25lckRvY3VtZW50LndpbmRvd30sZ2V0RG9jdW1lbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vd25lckRvY3VtZW50fSxnZXRFbGVtZW50QnlJZDpmdW5jdGlvbihlKXtyZXR1cm4gZG9jdW1lbnQuaWQoU2xpY2suZmluZCh0aGlzLCIjIisoIiIrZSkucmVwbGFjZSgvKFxXKS9nLCJcXCQxIikpKX0sbWF0Y2g6ZnVuY3Rpb24oZSl7cmV0dXJuIWV8fFNsaWNrLm1hdGNoKHRoaXMsZSl9fSksbnVsbD09d2luZG93LiQkJiZXaW5kb3cuaW1wbGVtZW50KCIkJCIsZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IEVsZW1lbnRzO2lmKDE9PWFyZ3VtZW50cy5sZW5ndGgmJiJzdHJpbmciPT10eXBlb2YgZSlyZXR1cm4gU2xpY2suc2VhcmNoKHRoaXMuZG9jdW1lbnQsZSx0KTtmb3IodmFyIGk9QXJyYXkuZmxhdHRlbihhcmd1bWVudHMpLG49MCxyPWkubGVuZ3RoO3I+bjtuKyspe3ZhciBvPWlbbl07c3dpdGNoKHR5cGVPZihvKSl7Y2FzZSJlbGVtZW50Ijp0LnB1c2gobyk7YnJlYWs7Y2FzZSJzdHJpbmciOlNsaWNrLnNlYXJjaCh0aGlzLmRvY3VtZW50LG8sdCl9fXJldHVybiB0fSksbnVsbD09d2luZG93LiQkJiZXaW5kb3cuaW1wbGVtZW50KCIkJCIsZnVuY3Rpb24oZSl7aWYoMT09YXJndW1lbnRzLmxlbmd0aCl7aWYoInN0cmluZyI9PXR5cGVvZiBlKXJldHVybiBTbGljay5zZWFyY2godGhpcy5kb2N1bWVudCxlLG5ldyBFbGVtZW50cyk7aWYoVHlwZS5pc0VudW1lcmFibGUoZSkpcmV0dXJuIG5ldyBFbGVtZW50cyhlKX1yZXR1cm4gbmV3IEVsZW1lbnRzKGFyZ3VtZW50cyl9KTt2YXIgaT17YmVmb3JlOmZ1bmN0aW9uKGUsdCl7dmFyIGk9dC5wYXJlbnROb2RlO2kmJmkuaW5zZXJ0QmVmb3JlKGUsdCl9LGFmdGVyOmZ1bmN0aW9uKGUsdCl7dmFyIGk9dC5wYXJlbnROb2RlO2kmJmkuaW5zZXJ0QmVmb3JlKGUsdC5uZXh0U2libGluZyl9LGJvdHRvbTpmdW5jdGlvbihlLHQpe3QuYXBwZW5kQ2hpbGQoZSl9LHRvcDpmdW5jdGlvbihlLHQpe3QuaW5zZXJ0QmVmb3JlKGUsdC5maXJzdENoaWxkKX19O2kuaW5zaWRlPWkuYm90dG9tLE9iamVjdC5lYWNoKGksZnVuY3Rpb24oZSx0KXt0PXQuY2FwaXRhbGl6ZSgpO3ZhciBpPXt9O2lbImluamVjdCIrdF09ZnVuY3Rpb24odCl7cmV0dXJuIGUodGhpcyxkb2N1bWVudC5pZCh0LCEwKSksdGhpc30saVsiZ3JhYiIrdF09ZnVuY3Rpb24odCl7cmV0dXJuIGUoZG9jdW1lbnQuaWQodCwhMCksdGhpcyksdGhpc30sRWxlbWVudC5pbXBsZW1lbnQoaSl9KTt2YXIgbj17fSxyPXt9LG89e307QXJyYXkuZm9yRWFjaChbInR5cGUiLCJ2YWx1ZSIsImRlZmF1bHRWYWx1ZSIsImFjY2Vzc0tleSIsImNlbGxQYWRkaW5nIiwiY2VsbFNwYWNpbmciLCJjb2xTcGFuIiwiZnJhbWVCb3JkZXIiLCJyb3dTcGFuIiwidGFiSW5kZXgiLCJ1c2VNYXAiXSxmdW5jdGlvbihlKXtvW2UudG9Mb3dlckNhc2UoKV09ZX0pLG8uaHRtbD0iaW5uZXJIVE1MIixvLnRleHQ9bnVsbD09ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2IikudGV4dENvbnRlbnQ/ImlubmVyVGV4dCI6InRleHRDb250ZW50IixPYmplY3QuZm9yRWFjaChvLGZ1bmN0aW9uKGUsdCl7clt0XT1mdW5jdGlvbih0LGkpe3RbZV09aX0sblt0XT1mdW5jdGlvbih0KXtyZXR1cm4gdFtlXX19KTt2YXIgcz1bImNvbXBhY3QiLCJub3dyYXAiLCJpc21hcCIsImRlY2xhcmUiLCJub3NoYWRlIiwiY2hlY2tlZCIsImRpc2FibGVkIiwicmVhZE9ubHkiLCJtdWx0aXBsZSIsInNlbGVjdGVkIiwibm9yZXNpemUiLCJkZWZlciIsImRlZmF1bHRDaGVja2VkIiwiYXV0b2ZvY3VzIiwiY29udHJvbHMiLCJhdXRvcGxheSIsImxvb3AiXSxhPXt9O0FycmF5LmZvckVhY2gocyxmdW5jdGlvbihlKXt2YXIgdD1lLnRvTG93ZXJDYXNlKCk7YVt0XT1lLHJbdF09ZnVuY3Rpb24odCxpKXt0W2VdPSEhaX0sblt0XT1mdW5jdGlvbih0KXtyZXR1cm4hIXRbZV19fSksT2JqZWN0LmFwcGVuZChyLHsiY2xhc3MiOmZ1bmN0aW9uKGUsdCl7ImNsYXNzTmFtZSJpbiBlP2UuY2xhc3NOYW1lPXR8fCIiOmUuc2V0QXR0cmlidXRlKCJjbGFzcyIsdCl9LCJmb3IiOmZ1bmN0aW9uKGUsdCl7Imh0bWxGb3IiaW4gZT9lLmh0bWxGb3I9dDplLnNldEF0dHJpYnV0ZSgiZm9yIix0KX0sc3R5bGU6ZnVuY3Rpb24oZSx0KXtlLnN0eWxlP2Uuc3R5bGUuY3NzVGV4dD10OmUuc2V0QXR0cmlidXRlKCJzdHlsZSIsdCl9LHZhbHVlOmZ1bmN0aW9uKGUsdCl7ZS52YWx1ZT1udWxsIT10P3Q6IiJ9fSksblsiY2xhc3MiXT1mdW5jdGlvbihlKXtyZXR1cm4iY2xhc3NOYW1lImluIGU/ZS5jbGFzc05hbWV8fG51bGw6ZS5nZXRBdHRyaWJ1dGUoImNsYXNzIil9O3ZhciBsPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImJ1dHRvbiIpO3RyeXtsLnR5cGU9ImJ1dHRvbiJ9Y2F0Y2goYyl7fSJidXR0b24iIT1sLnR5cGUmJihyLnR5cGU9ZnVuY3Rpb24oZSx0KXtlLnNldEF0dHJpYnV0ZSgidHlwZSIsdCl9KSxsPW51bGw7dmFyIHU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW5wdXQiKTt1LnZhbHVlPSJ0Iix1LnR5cGU9InN1Ym1pdCIsInQiIT11LnZhbHVlJiYoci50eXBlPWZ1bmN0aW9uKGUsdCl7dmFyIGk9ZS52YWx1ZTtlLnR5cGU9dCxlLnZhbHVlPWl9KSx1PW51bGw7dmFyIGg9ZnVuY3Rpb24oZSl7cmV0dXJuIGUucmFuZG9tPSJhdHRyaWJ1dGUiLCJhdHRyaWJ1dGUiPT1lLmdldEF0dHJpYnV0ZSgicmFuZG9tIil9KGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpKTtFbGVtZW50LmltcGxlbWVudCh7c2V0UHJvcGVydHk6ZnVuY3Rpb24oZSx0KXt2YXIgaT1yW2UudG9Mb3dlckNhc2UoKV07aWYoaSlpKHRoaXMsdCk7ZWxzZXtpZihoKXZhciBuPXRoaXMucmV0cmlldmUoIiRhdHRyaWJ1dGVXaGl0ZUxpc3QiLHt9KTtudWxsPT10Pyh0aGlzLnJlbW92ZUF0dHJpYnV0ZShlKSxoJiZkZWxldGUgbltlXSk6KHRoaXMuc2V0QXR0cmlidXRlKGUsIiIrdCksaCYmKG5bZV09ITApKX1yZXR1cm4gdGhpc30sc2V0UHJvcGVydGllczpmdW5jdGlvbihlKXtmb3IodmFyIHQgaW4gZSl0aGlzLnNldFByb3BlcnR5KHQsZVt0XSk7cmV0dXJuIHRoaXN9LGdldFByb3BlcnR5OmZ1bmN0aW9uKGUpe3ZhciB0PW5bZS50b0xvd2VyQ2FzZSgpXTtpZih0KXJldHVybiB0KHRoaXMpO2lmKGgpe3ZhciBpPXRoaXMuZ2V0QXR0cmlidXRlTm9kZShlKSxyPXRoaXMucmV0cmlldmUoIiRhdHRyaWJ1dGVXaGl0ZUxpc3QiLHt9KTtpZighaSlyZXR1cm4gbnVsbDtpZihpLmV4cGFuZG8mJiFyW2VdKXt2YXIgbz10aGlzLm91dGVySFRNTDtpZigwPm8uc3Vic3RyKDAsby5zZWFyY2goL1wvP1snIl0/Pig/IVtePF0qPFsnIl0pLykpLmluZGV4T2YoZSkpcmV0dXJuIG51bGw7cltlXT0hMH19dmFyIHM9U2xpY2suZ2V0QXR0cmlidXRlKHRoaXMsZSk7cmV0dXJuIHN8fFNsaWNrLmhhc0F0dHJpYnV0ZSh0aGlzLGUpP3M6bnVsbH0sZ2V0UHJvcGVydGllczpmdW5jdGlvbigpe3ZhciBlPUFycmF5LmZyb20oYXJndW1lbnRzKTtyZXR1cm4gZS5tYXAodGhpcy5nZXRQcm9wZXJ0eSx0aGlzKS5hc3NvY2lhdGUoZSl9LHJlbW92ZVByb3BlcnR5OmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnNldFByb3BlcnR5KGUsbnVsbCl9LHJlbW92ZVByb3BlcnRpZXM6ZnVuY3Rpb24oKXtyZXR1cm4gQXJyYXkuZWFjaChhcmd1bWVudHMsdGhpcy5yZW1vdmVQcm9wZXJ0eSx0aGlzKSx0aGlzfSxzZXQ6ZnVuY3Rpb24oZSx0KXt2YXIgaT1FbGVtZW50LlByb3BlcnRpZXNbZV07aSYmaS5zZXQ/aS5zZXQuY2FsbCh0aGlzLHQpOnRoaXMuc2V0UHJvcGVydHkoZSx0KX0ub3ZlcmxvYWRTZXR0ZXIoKSxnZXQ6ZnVuY3Rpb24oZSl7dmFyIHQ9RWxlbWVudC5Qcm9wZXJ0aWVzW2VdO3JldHVybiB0JiZ0LmdldD90LmdldC5hcHBseSh0aGlzKTp0aGlzLmdldFByb3BlcnR5KGUpfS5vdmVybG9hZEdldHRlcigpLGVyYXNlOmZ1bmN0aW9uKGUpe3ZhciB0PUVsZW1lbnQuUHJvcGVydGllc1tlXTtyZXR1cm4gdCYmdC5lcmFzZT90LmVyYXNlLmFwcGx5KHRoaXMpOnRoaXMucmVtb3ZlUHJvcGVydHkoZSksdGhpc30saGFzQ2xhc3M6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuY2xhc3NOYW1lLmNsZWFuKCkuY29udGFpbnMoZSwiICIpfSxhZGRDbGFzczpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5oYXNDbGFzcyhlKXx8KHRoaXMuY2xhc3NOYW1lPSh0aGlzLmNsYXNzTmFtZSsiICIrZSkuY2xlYW4oKSksdGhpc30scmVtb3ZlQ2xhc3M6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuY2xhc3NOYW1lPXRoaXMuY2xhc3NOYW1lLnJlcGxhY2UoUmVnRXhwKCIoXnxcXHMpIitlKyIoPzpcXHN8JCkiKSwiJDEiKSx0aGlzfSx0b2dnbGVDbGFzczpmdW5jdGlvbihlLHQpe3JldHVybiBudWxsPT10JiYodD0hdGhpcy5oYXNDbGFzcyhlKSksdD90aGlzLmFkZENsYXNzKGUpOnRoaXMucmVtb3ZlQ2xhc3MoZSl9LGFkb3B0OmZ1bmN0aW9uKCl7dmFyIGUsdD10aGlzLGk9QXJyYXkuZmxhdHRlbihhcmd1bWVudHMpLG49aS5sZW5ndGg7bj4xJiYodD1lPWRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSk7Zm9yKHZhciByPTA7bj5yO3IrKyl7dmFyIG89ZG9jdW1lbnQuaWQoaVtyXSwhMCk7byYmdC5hcHBlbmRDaGlsZChvKX1yZXR1cm4gZSYmdGhpcy5hcHBlbmRDaGlsZChlKSx0aGlzfSxhcHBlbmRUZXh0OmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuZ3JhYih0aGlzLmdldERvY3VtZW50KCkubmV3VGV4dE5vZGUoZSksdCl9LGdyYWI6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gaVt0fHwiYm90dG9tIl0oZG9jdW1lbnQuaWQoZSwhMCksdGhpcyksdGhpc30saW5qZWN0OmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGlbdHx8ImJvdHRvbSJdKHRoaXMsZG9jdW1lbnQuaWQoZSwhMCkpLHRoaXN9LHJlcGxhY2VzOmZ1bmN0aW9uKGUpe3JldHVybiBlPWRvY3VtZW50LmlkKGUsITApLGUucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQodGhpcyxlKSx0aGlzfSx3cmFwczpmdW5jdGlvbihlLHQpe3JldHVybiBlPWRvY3VtZW50LmlkKGUsITApLHRoaXMucmVwbGFjZXMoZSkuZ3JhYihlLHQpfSxnZXRTZWxlY3RlZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNlbGVjdGVkSW5kZXgsbmV3IEVsZW1lbnRzKEFycmF5LmZyb20odGhpcy5vcHRpb25zKS5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIGUuc2VsZWN0ZWR9KSl9LHRvUXVlcnlTdHJpbmc6ZnVuY3Rpb24oKXt2YXIgZT1bXTtyZXR1cm4gdGhpcy5nZXRFbGVtZW50cygiaW5wdXQsIHNlbGVjdCwgdGV4dGFyZWEiKS5lYWNoKGZ1bmN0aW9uKHQpe3ZhciBpPXQudHlwZTtpZih0Lm5hbWUmJiF0LmRpc2FibGVkJiYic3VibWl0IiE9aSYmInJlc2V0IiE9aSYmImZpbGUiIT1pJiYiaW1hZ2UiIT1pKXt2YXIgbj0ic2VsZWN0Ij09dC5nZXQoInRhZyIpP3QuZ2V0U2VsZWN0ZWQoKS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGRvY3VtZW50LmlkKGUpLmdldCgidmFsdWUiKX0pOiJyYWRpbyIhPWkmJiJjaGVja2JveCIhPWl8fHQuY2hlY2tlZD90LmdldCgidmFsdWUiKTpudWxsO0FycmF5LmZyb20obikuZWFjaChmdW5jdGlvbihpKXtpIT09dm9pZCAwJiZlLnB1c2goZW5jb2RlVVJJQ29tcG9uZW50KHQubmFtZSkrIj0iK2VuY29kZVVSSUNvbXBvbmVudChpKSl9KX19KSxlLmpvaW4oIiYiKX19KTt2YXIgZD17fSxwPXt9LGY9ZnVuY3Rpb24oZSl7cmV0dXJuIHBbZV18fChwW2VdPXt9KX0sbT1mdW5jdGlvbihlKXt2YXIgdD1lLnVuaXF1ZU51bWJlcjtyZXR1cm4gZS5yZW1vdmVFdmVudHMmJmUucmVtb3ZlRXZlbnRzKCksZS5jbGVhckF0dHJpYnV0ZXMmJmUuY2xlYXJBdHRyaWJ1dGVzKCksbnVsbCE9dCYmKGRlbGV0ZSBkW3RdLGRlbGV0ZSBwW3RdKSxlfSxnPXtpbnB1dDoiY2hlY2tlZCIsb3B0aW9uOiJzZWxlY3RlZCIsdGV4dGFyZWE6InZhbHVlIn07RWxlbWVudC5pbXBsZW1lbnQoe2Rlc3Ryb3k6ZnVuY3Rpb24oKXt2YXIgZT1tKHRoaXMpLmdldEVsZW1lbnRzQnlUYWdOYW1lKCIqIik7cmV0dXJuIEFycmF5LmVhY2goZSxtKSxFbGVtZW50LmRpc3Bvc2UodGhpcyksbnVsbH0sZW1wdHk6ZnVuY3Rpb24oKXtyZXR1cm4gQXJyYXkuZnJvbSh0aGlzLmNoaWxkTm9kZXMpLmVhY2goRWxlbWVudC5kaXNwb3NlKSx0aGlzfSxkaXNwb3NlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucGFyZW50Tm9kZT90aGlzLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcyk6dGhpc30sY2xvbmU6ZnVuY3Rpb24oZSx0KXtlPWUhPT0hMTt2YXIgaSxuPXRoaXMuY2xvbmVOb2RlKGUpLHI9W25dLG89W3RoaXNdO2ZvcihlJiYoci5hcHBlbmQoQXJyYXkuZnJvbShuLmdldEVsZW1lbnRzQnlUYWdOYW1lKCIqIikpKSxvLmFwcGVuZChBcnJheS5mcm9tKHRoaXMuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIioiKSkpKSxpPXIubGVuZ3RoO2ktLTspe3ZhciBzPXJbaV0sYT1vW2ldO2lmKHR8fHMucmVtb3ZlQXR0cmlidXRlKCJpZCIpLHMuY2xlYXJBdHRyaWJ1dGVzJiYocy5jbGVhckF0dHJpYnV0ZXMoKSxzLm1lcmdlQXR0cmlidXRlcyhhKSxzLnJlbW92ZUF0dHJpYnV0ZSgidW5pcXVlTnVtYmVyIikscy5vcHRpb25zKSlmb3IodmFyIGw9cy5vcHRpb25zLGM9YS5vcHRpb25zLHU9bC5sZW5ndGg7dS0tOylsW3VdLnNlbGVjdGVkPWNbdV0uc2VsZWN0ZWQ7dmFyIGg9Z1thLnRhZ05hbWUudG9Mb3dlckNhc2UoKV07aCYmYVtoXSYmKHNbaF09YVtoXSl9aWYoQnJvd3Nlci5pZSl7dmFyIGQ9bi5nZXRFbGVtZW50c0J5VGFnTmFtZSgib2JqZWN0IikscD10aGlzLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJvYmplY3QiKTtmb3IoaT1kLmxlbmd0aDtpLS07KWRbaV0ub3V0ZXJIVE1MPXBbaV0ub3V0ZXJIVE1MfXJldHVybiBkb2N1bWVudC5pZChuKX19KSxbRWxlbWVudCxXaW5kb3csRG9jdW1lbnRdLmludm9rZSgiaW1wbGVtZW50Iix7YWRkTGlzdGVuZXI6ZnVuY3Rpb24oZSx0KXtpZigidW5sb2FkIj09ZSl7dmFyIGk9dCxuPXRoaXM7dD1mdW5jdGlvbigpe24ucmVtb3ZlTGlzdGVuZXIoInVubG9hZCIsdCksaSgpfX1lbHNlIGRbU2xpY2sudWlkT2YodGhpcyldPXRoaXM7cmV0dXJuIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcj90aGlzLmFkZEV2ZW50TGlzdGVuZXIoZSx0LCEhYXJndW1lbnRzWzJdKTp0aGlzLmF0dGFjaEV2ZW50KCJvbiIrZSx0KSx0aGlzfSxyZW1vdmVMaXN0ZW5lcjpmdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXI/dGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKGUsdCwhIWFyZ3VtZW50c1syXSk6dGhpcy5kZXRhY2hFdmVudCgib24iK2UsdCksdGhpc30scmV0cmlldmU6ZnVuY3Rpb24oZSx0KXt2YXIgaT1mKFNsaWNrLnVpZE9mKHRoaXMpKSxuPWlbZV07cmV0dXJuIG51bGwhPXQmJm51bGw9PW4mJihuPWlbZV09dCksbnVsbCE9bj9uOm51bGx9LHN0b3JlOmZ1bmN0aW9uKGUsdCl7dmFyIGk9ZihTbGljay51aWRPZih0aGlzKSk7cmV0dXJuIGlbZV09dCx0aGlzfSxlbGltaW5hdGU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZihTbGljay51aWRPZih0aGlzKSk7cmV0dXJuIGRlbGV0ZSB0W2VdLHRoaXN9fSksd2luZG93LmF0dGFjaEV2ZW50JiYhd2luZG93LmFkZEV2ZW50TGlzdGVuZXImJndpbmRvdy5hZGRMaXN0ZW5lcigidW5sb2FkIixmdW5jdGlvbigpe09iamVjdC5lYWNoKGQsbSksd2luZG93LkNvbGxlY3RHYXJiYWdlJiZDb2xsZWN0R2FyYmFnZSgpfSksRWxlbWVudC5Qcm9wZXJ0aWVzPXt9LEVsZW1lbnQuUHJvcGVydGllcz1uZXcgSGFzaCxFbGVtZW50LlByb3BlcnRpZXMuc3R5bGU9e3NldDpmdW5jdGlvbihlKXt0aGlzLnN0eWxlLmNzc1RleHQ9ZX0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3R5bGUuY3NzVGV4dH0sZXJhc2U6ZnVuY3Rpb24oKXt0aGlzLnN0eWxlLmNzc1RleHQ9IiJ9fSxFbGVtZW50LlByb3BlcnRpZXMudGFnPXtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50YWdOYW1lLnRvTG93ZXJDYXNlKCl9fSxFbGVtZW50LlByb3BlcnRpZXMuaHRtbD17c2V0OmZ1bmN0aW9uKGUpe251bGw9PWU/ZT0iIjoiYXJyYXkiPT10eXBlT2YoZSkmJihlPWUuam9pbigiIikpLHRoaXMuaW5uZXJIVE1MPWV9LGVyYXNlOmZ1bmN0aW9uKCl7dGhpcy5pbm5lckhUTUw9IiJ9fTt2YXIgdj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTt2LmlubmVySFRNTD0iPG5hdj48L25hdj4iO3ZhciBiPTE9PXYuY2hpbGROb2Rlcy5sZW5ndGg7aWYoIWIpZm9yKHZhciB5PSJhYmJyIGFydGljbGUgYXNpZGUgYXVkaW8gY2FudmFzIGRhdGFsaXN0IGRldGFpbHMgZmlnY2FwdGlvbiBmaWd1cmUgZm9vdGVyIGhlYWRlciBoZ3JvdXAgbWFyayBtZXRlciBuYXYgb3V0cHV0IHByb2dyZXNzIHNlY3Rpb24gc3VtbWFyeSB0aW1lIHZpZGVvIi5zcGxpdCgiICIpLF89ZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLHg9eS5sZW5ndGg7eC0tOylfLmNyZWF0ZUVsZW1lbnQoeVt4XSk7dj1udWxsO3ZhciBDPUZ1bmN0aW9uLmF0dGVtcHQoZnVuY3Rpb24oKXt2YXIgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0YWJsZSIpO3JldHVybiBlLmlubmVySFRNTD0iPHRyPjx0ZD48L3RkPjwvdHI+IiwhMH0pLHc9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidHIiKSxrPSI8dGQ+PC90ZD4iO3cuaW5uZXJIVE1MPWs7dmFyIFQ9dy5pbm5lckhUTUw9PWs7dz1udWxsLEMmJlQmJmJ8fChFbGVtZW50LlByb3BlcnRpZXMuaHRtbC5zZXQ9ZnVuY3Rpb24oZSl7dmFyIHQ9e3RhYmxlOlsxLCI8dGFibGU+IiwiPC90YWJsZT4iXSxzZWxlY3Q6WzEsIjxzZWxlY3Q+IiwiPC9zZWxlY3Q+Il0sdGJvZHk6WzIsIjx0YWJsZT48dGJvZHk+IiwiPC90Ym9keT48L3RhYmxlPiJdLHRyOlszLCI8dGFibGU+PHRib2R5Pjx0cj4iLCI8L3RyPjwvdGJvZHk+PC90YWJsZT4iXX07cmV0dXJuIHQudGhlYWQ9dC50Zm9vdD10LnRib2R5LGZ1bmN0aW9uKGkpe3ZhciBuPXRbdGhpcy5nZXQoInRhZyIpXTtpZihufHxifHwobj1bMCwiIiwiIl0pLCFuKXJldHVybiBlLmNhbGwodGhpcyxpKTt2YXIgcj1uWzBdLG89ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iikscz1vO2ZvcihifHxfLmFwcGVuZENoaWxkKG8pLG8uaW5uZXJIVE1MPVtuWzFdLGksblsyXV0uZmxhdHRlbigpLmpvaW4oIiIpO3ItLTspcz1zLmZpcnN0Q2hpbGQ7dGhpcy5lbXB0eSgpLmFkb3B0KHMuY2hpbGROb2RlcyksYnx8Xy5yZW1vdmVDaGlsZChvKSxvPW51bGx9fShFbGVtZW50LlByb3BlcnRpZXMuaHRtbC5zZXQpKTt2YXIgRT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJmb3JtIik7RS5pbm5lckhUTUw9IjxzZWxlY3Q+PG9wdGlvbj5zPC9vcHRpb24+PC9zZWxlY3Q+IiwicyIhPUUuZmlyc3RDaGlsZC52YWx1ZSYmKEVsZW1lbnQuUHJvcGVydGllcy52YWx1ZT17c2V0OmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuZ2V0KCJ0YWciKTtpZigic2VsZWN0IiE9dClyZXR1cm4gdGhpcy5zZXRQcm9wZXJ0eSgidmFsdWUiLGUpO2Zvcih2YXIgaT10aGlzLmdldEVsZW1lbnRzKCJvcHRpb24iKSxuPTA7aS5sZW5ndGg+bjtuKyspe3ZhciByPWlbbl0sbz1yLmdldEF0dHJpYnV0ZU5vZGUoInZhbHVlIikscz1vJiZvLnNwZWNpZmllZD9yLnZhbHVlOnIuZ2V0KCJ0ZXh0Iik7aWYocz09ZSlyZXR1cm4gci5zZWxlY3RlZD0hMH19LGdldDpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1lLmdldCgidGFnIik7aWYoInNlbGVjdCIhPXQmJiJvcHRpb24iIT10KXJldHVybiB0aGlzLmdldFByb3BlcnR5KCJ2YWx1ZSIpO2lmKCJzZWxlY3QiPT10JiYhKGU9ZS5nZXRTZWxlY3RlZCgpWzBdKSlyZXR1cm4iIjt2YXIgaT1lLmdldEF0dHJpYnV0ZU5vZGUoInZhbHVlIik7cmV0dXJuIGkmJmkuc3BlY2lmaWVkP2UudmFsdWU6ZS5nZXQoInRleHQiKX19KSxFPW51bGwsZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2IikuZ2V0QXR0cmlidXRlTm9kZSgiaWQiKSYmKEVsZW1lbnQuUHJvcGVydGllcy5pZD17c2V0OmZ1bmN0aW9uKGUpe3RoaXMuaWQ9dGhpcy5nZXRBdHRyaWJ1dGVOb2RlKCJpZCIpLnZhbHVlPWV9LGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmlkfHxudWxsfSxlcmFzZTpmdW5jdGlvbigpe3RoaXMuaWQ9dGhpcy5nZXRBdHRyaWJ1dGVOb2RlKCJpZCIpLnZhbHVlPSIifX0pfSgpLGZ1bmN0aW9uKCl7dmFyIGU9ZG9jdW1lbnQuaHRtbCx0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO3Quc3R5bGUuY29sb3I9InJlZCIsdC5zdHlsZS5jb2xvcj1udWxsO3ZhciBpPSJyZWQiPT10LnN0eWxlLmNvbG9yO3Q9bnVsbCxFbGVtZW50LlByb3BlcnRpZXMuc3R5bGVzPXtzZXQ6ZnVuY3Rpb24oZSl7dGhpcy5zZXRTdHlsZXMoZSl9fTt2YXIgbj1udWxsIT1lLnN0eWxlLm9wYWNpdHkscj1udWxsIT1lLnN0eWxlLmZpbHRlcixvPS9hbHBoYVwob3BhY2l0eT0oW1xkLl0rKVwpL2kscz1mdW5jdGlvbihlLHQpe2Uuc3RvcmUoIiRvcGFjaXR5Iix0KSxlLnN0eWxlLnZpc2liaWxpdHk9dD4wfHxudWxsPT10PyJ2aXNpYmxlIjoiaGlkZGVuIn0sYT1uP2Z1bmN0aW9uKGUsdCl7ZS5zdHlsZS5vcGFjaXR5PXR9OnI/ZnVuY3Rpb24oZSx0KXt2YXIgaT1lLnN0eWxlO2UuY3VycmVudFN0eWxlJiZlLmN1cnJlbnRTdHlsZS5oYXNMYXlvdXR8fChpLnpvb209MSksdD1udWxsPT10fHwxPT10PyIiOiJhbHBoYShvcGFjaXR5PSIrKDEwMCp0KS5saW1pdCgwLDEwMCkucm91bmQoKSsiKSI7dmFyIG49aS5maWx0ZXJ8fGUuZ2V0Q29tcHV0ZWRTdHlsZSgiZmlsdGVyIil8fCIiO2kuZmlsdGVyPW8udGVzdChuKT9uLnJlcGxhY2Uobyx0KTpuK3QsaS5maWx0ZXJ8fGkucmVtb3ZlQXR0cmlidXRlKCJmaWx0ZXIiKX06cyxsPW4/ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5zdHlsZS5vcGFjaXR5fHxlLmdldENvbXB1dGVkU3R5bGUoIm9wYWNpdHkiKTtyZXR1cm4iIj09dD8xOnQudG9GbG9hdCgpfTpyP2Z1bmN0aW9uKGUpe3ZhciB0LGk9ZS5zdHlsZS5maWx0ZXJ8fGUuZ2V0Q29tcHV0ZWRTdHlsZSgiZmlsdGVyIik7cmV0dXJuIGkmJih0PWkubWF0Y2gobykpLG51bGw9PXR8fG51bGw9PWk/MTp0WzFdLzEwMH06ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5yZXRyaWV2ZSgiJG9wYWNpdHkiKTtyZXR1cm4gbnVsbD09dCYmKHQ9ImhpZGRlbiI9PWUuc3R5bGUudmlzaWJpbGl0eT8wOjEpLHR9LGM9bnVsbD09ZS5zdHlsZS5jc3NGbG9hdD8ic3R5bGVGbG9hdCI6ImNzc0Zsb2F0IjtFbGVtZW50LmltcGxlbWVudCh7Z2V0Q29tcHV0ZWRTdHlsZTpmdW5jdGlvbihlKXtpZih0aGlzLmN1cnJlbnRTdHlsZSlyZXR1cm4gdGhpcy5jdXJyZW50U3R5bGVbZS5jYW1lbENhc2UoKV07dmFyIHQ9RWxlbWVudC5nZXREb2N1bWVudCh0aGlzKS5kZWZhdWx0VmlldyxpPXQ/dC5nZXRDb21wdXRlZFN0eWxlKHRoaXMsbnVsbCk6bnVsbDtyZXR1cm4gaT9pLmdldFByb3BlcnR5VmFsdWUoZT09Yz8iZmxvYXQiOmUuaHlwaGVuYXRlKCkpOm51bGx9LHNldFN0eWxlOmZ1bmN0aW9uKGUsdCl7aWYoIm9wYWNpdHkiPT1lKXJldHVybiBudWxsIT10JiYodD1wYXJzZUZsb2F0KHQpKSxhKHRoaXMsdCksdGhpcztpZihlPSgiZmxvYXQiPT1lP2M6ZSkuY2FtZWxDYXNlKCksInN0cmluZyIhPXR5cGVPZih0KSl7dmFyIG49KEVsZW1lbnQuU3R5bGVzW2VdfHwiQCIpLnNwbGl0KCIgIik7dD1BcnJheS5mcm9tKHQpLm1hcChmdW5jdGlvbihlLHQpe3JldHVybiBuW3RdPyJudW1iZXIiPT10eXBlT2YoZSk/blt0XS5yZXBsYWNlKCJAIixNYXRoLnJvdW5kKGUpKTplOiIifSkuam9pbigiICIpfWVsc2UgdD09TnVtYmVyKHQpKyIiJiYodD1NYXRoLnJvdW5kKHQpKTtyZXR1cm4gdGhpcy5zdHlsZVtlXT10LCgiIj09dHx8bnVsbD09dCkmJmkmJnRoaXMuc3R5bGUucmVtb3ZlQXR0cmlidXRlJiZ0aGlzLnN0eWxlLnJlbW92ZUF0dHJpYnV0ZShlKSx0aGlzfSxnZXRTdHlsZTpmdW5jdGlvbihlKXtpZigib3BhY2l0eSI9PWUpcmV0dXJuIGwodGhpcyk7ZT0oImZsb2F0Ij09ZT9jOmUpLmNhbWVsQ2FzZSgpO3ZhciB0PXRoaXMuc3R5bGVbZV07aWYoIXR8fCJ6SW5kZXgiPT1lKXt0PVtdO2Zvcih2YXIgaSBpbiBFbGVtZW50LlNob3J0U3R5bGVzKWlmKGU9PWkpe2Zvcih2YXIgbiBpbiBFbGVtZW50LlNob3J0U3R5bGVzW2ldKXQucHVzaCh0aGlzLmdldFN0eWxlKG4pKTtyZXR1cm4gdC5qb2luKCIgIil9dD10aGlzLmdldENvbXB1dGVkU3R5bGUoZSl9aWYodCl7dCs9IiI7dmFyIHI9dC5tYXRjaCgvcmdiYT9cKFtcZFxzLF0rXCkvKTtyJiYodD10LnJlcGxhY2UoclswXSxyWzBdLnJnYlRvSGV4KCkpKX1pZihCcm93c2VyLm9wZXJhfHxCcm93c2VyLmllKXtpZigvXihoZWlnaHR8d2lkdGgpJC8udGVzdChlKSYmIS9weCQvLnRlc3QodCkpe3ZhciBvPSJ3aWR0aCI9PWU/WyJsZWZ0IiwicmlnaHQiXTpbInRvcCIsImJvdHRvbSJdLHM9MDtyZXR1cm4gby5lYWNoKGZ1bmN0aW9uKGUpe3MrPXRoaXMuZ2V0U3R5bGUoImJvcmRlci0iK2UrIi13aWR0aCIpLnRvSW50KCkrdGhpcy5nZXRTdHlsZSgicGFkZGluZy0iK2UpLnRvSW50KCl9LHRoaXMpLHRoaXNbIm9mZnNldCIrZS5jYXBpdGFsaXplKCldLXMrInB4In1pZihCcm93c2VyLmllJiYvXmJvcmRlciguKylXaWR0aHxtYXJnaW58cGFkZGluZy8udGVzdChlKSYmaXNOYU4ocGFyc2VGbG9hdCh0KSkpcmV0dXJuIjBweCJ9cmV0dXJuIHR9LHNldFN0eWxlczpmdW5jdGlvbihlKXtmb3IodmFyIHQgaW4gZSl0aGlzLnNldFN0eWxlKHQsZVt0XSk7cmV0dXJuIHRoaXN9LGdldFN0eWxlczpmdW5jdGlvbigpe3ZhciBlPXt9O3JldHVybiBBcnJheS5mbGF0dGVuKGFyZ3VtZW50cykuZWFjaChmdW5jdGlvbih0KXtlW3RdPXRoaXMuZ2V0U3R5bGUodCl9LHRoaXMpLGV9fSksRWxlbWVudC5TdHlsZXM9e2xlZnQ6IkBweCIsdG9wOiJAcHgiLGJvdHRvbToiQHB4IixyaWdodDoiQHB4Iix3aWR0aDoiQHB4IixoZWlnaHQ6IkBweCIsbWF4V2lkdGg6IkBweCIsbWF4SGVpZ2h0OiJAcHgiLG1pbldpZHRoOiJAcHgiLG1pbkhlaWdodDoiQHB4IixiYWNrZ3JvdW5kQ29sb3I6InJnYihALCBALCBAKSIsYmFja2dyb3VuZFBvc2l0aW9uOiJAcHggQHB4Iixjb2xvcjoicmdiKEAsIEAsIEApIixmb250U2l6ZToiQHB4IixsZXR0ZXJTcGFjaW5nOiJAcHgiLGxpbmVIZWlnaHQ6IkBweCIsY2xpcDoicmVjdChAcHggQHB4IEBweCBAcHgpIixtYXJnaW46IkBweCBAcHggQHB4IEBweCIscGFkZGluZzoiQHB4IEBweCBAcHggQHB4Iixib3JkZXI6IkBweCBAIHJnYihALCBALCBAKSBAcHggQCByZ2IoQCwgQCwgQCkgQHB4IEAgcmdiKEAsIEAsIEApIixib3JkZXJXaWR0aDoiQHB4IEBweCBAcHggQHB4Iixib3JkZXJTdHlsZToiQCBAIEAgQCIsYm9yZGVyQ29sb3I6InJnYihALCBALCBAKSByZ2IoQCwgQCwgQCkgcmdiKEAsIEAsIEApIHJnYihALCBALCBAKSIsekluZGV4OiJAIix6b29tOiJAIixmb250V2VpZ2h0OiJAIix0ZXh0SW5kZW50OiJAcHgiLG9wYWNpdHk6IkAifSxFbGVtZW50LmltcGxlbWVudCh7c2V0T3BhY2l0eTpmdW5jdGlvbihlKXtyZXR1cm4gYSh0aGlzLGUpLHRoaXN9LGdldE9wYWNpdHk6ZnVuY3Rpb24oKXtyZXR1cm4gbCh0aGlzKX19KSxFbGVtZW50LlByb3BlcnRpZXMub3BhY2l0eT17c2V0OmZ1bmN0aW9uKGUpe2EodGhpcyxlKSxzKHRoaXMsZSl9LGdldDpmdW5jdGlvbigpe3JldHVybiBsKHRoaXMpfX0sRWxlbWVudC5TdHlsZXM9bmV3IEhhc2goRWxlbWVudC5TdHlsZXMpLEVsZW1lbnQuU2hvcnRTdHlsZXM9e21hcmdpbjp7fSxwYWRkaW5nOnt9LGJvcmRlcjp7fSxib3JkZXJXaWR0aDp7fSxib3JkZXJTdHlsZTp7fSxib3JkZXJDb2xvcjp7fX0sWyJUb3AiLCJSaWdodCIsIkJvdHRvbSIsIkxlZnQiXS5lYWNoKGZ1bmN0aW9uKGUpe3ZhciB0PUVsZW1lbnQuU2hvcnRTdHlsZXMsaT1FbGVtZW50LlN0eWxlcztbIm1hcmdpbiIsInBhZGRpbmciXS5lYWNoKGZ1bmN0aW9uKG4pe3ZhciByPW4rZTt0W25dW3JdPWlbcl09IkBweCJ9KTt2YXIgbj0iYm9yZGVyIitlO3QuYm9yZGVyW25dPWlbbl09IkBweCBAIHJnYihALCBALCBAKSI7dmFyIHI9bisiV2lkdGgiLG89bisiU3R5bGUiLHM9bisiQ29sb3IiO3Rbbl09e30sdC5ib3JkZXJXaWR0aFtyXT10W25dW3JdPWlbcl09IkBweCIsdC5ib3JkZXJTdHlsZVtvXT10W25dW29dPWlbb109IkAiLHQuYm9yZGVyQ29sb3Jbc109dFtuXVtzXT1pW3NdPSJyZ2IoQCwgQCwgQCkifSl9KCksZnVuY3Rpb24oKXtpZihFbGVtZW50LlByb3BlcnRpZXMuZXZlbnRzPXtzZXQ6ZnVuY3Rpb24oZSl7dGhpcy5hZGRFdmVudHMoZSl9fSxbRWxlbWVudCxXaW5kb3csRG9jdW1lbnRdLmludm9rZSgiaW1wbGVtZW50Iix7YWRkRXZlbnQ6ZnVuY3Rpb24oZSx0KXt2YXIgaT10aGlzLnJldHJpZXZlKCJldmVudHMiLHt9KTtpZihpW2VdfHwoaVtlXT17a2V5czpbXSx2YWx1ZXM6W119KSxpW2VdLmtleXMuY29udGFpbnModCkpcmV0dXJuIHRoaXM7aVtlXS5rZXlzLnB1c2godCk7dmFyIG49ZSxyPUVsZW1lbnQuRXZlbnRzW2VdLG89dCxzPXRoaXM7ciYmKHIub25BZGQmJnIub25BZGQuY2FsbCh0aGlzLHQsZSksci5jb25kaXRpb24mJihvPWZ1bmN0aW9uKGkpe3JldHVybiByLmNvbmRpdGlvbi5jYWxsKHRoaXMsaSxlKT90LmNhbGwodGhpcyxpKTohMH0pLHIuYmFzZSYmKG49RnVuY3Rpb24uZnJvbShyLmJhc2UpLmNhbGwodGhpcyxlKSkpO3ZhciBhPWZ1bmN0aW9uKCl7cmV0dXJuIHQuY2FsbChzKX0sbD1FbGVtZW50Lk5hdGl2ZUV2ZW50c1tuXTtyZXR1cm4gbCYmKDI9PWwmJihhPWZ1bmN0aW9uKGUpe2U9bmV3IERPTUV2ZW50KGUscy5nZXRXaW5kb3coKSksby5jYWxsKHMsZSk9PT0hMSYmZS5zdG9wKCl9KSx0aGlzLmFkZExpc3RlbmVyKG4sYSxhcmd1bWVudHNbMl0pKSxpW2VdLnZhbHVlcy5wdXNoKGEpLHRoaXN9LHJlbW92ZUV2ZW50OmZ1bmN0aW9uKGUsdCl7dmFyIGk9dGhpcy5yZXRyaWV2ZSgiZXZlbnRzIik7aWYoIWl8fCFpW2VdKXJldHVybiB0aGlzO3ZhciBuPWlbZV0scj1uLmtleXMuaW5kZXhPZih0KTtpZigtMT09cilyZXR1cm4gdGhpczt2YXIgbz1uLnZhbHVlc1tyXTtkZWxldGUgbi5rZXlzW3JdLGRlbGV0ZSBuLnZhbHVlc1tyXTt2YXIgcz1FbGVtZW50LkV2ZW50c1tlXTtyZXR1cm4gcyYmKHMub25SZW1vdmUmJnMub25SZW1vdmUuY2FsbCh0aGlzLHQsZSkscy5iYXNlJiYoZT1GdW5jdGlvbi5mcm9tKHMuYmFzZSkuY2FsbCh0aGlzLGUpKSksRWxlbWVudC5OYXRpdmVFdmVudHNbZV0/dGhpcy5yZW1vdmVMaXN0ZW5lcihlLG8sYXJndW1lbnRzWzJdKTp0aGlzfSxhZGRFdmVudHM6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0IGluIGUpdGhpcy5hZGRFdmVudCh0LGVbdF0pO3JldHVybiB0aGlzfSxyZW1vdmVFdmVudHM6ZnVuY3Rpb24oZSl7dmFyIHQ7aWYoIm9iamVjdCI9PXR5cGVPZihlKSl7Zm9yKHQgaW4gZSl0aGlzLnJlbW92ZUV2ZW50KHQsZVt0XSk7cmV0dXJuIHRoaXN9dmFyIGk9dGhpcy5yZXRyaWV2ZSgiZXZlbnRzIik7aWYoIWkpcmV0dXJuIHRoaXM7aWYoZSlpW2VdJiYoaVtlXS5rZXlzLmVhY2goZnVuY3Rpb24odCl7dGhpcy5yZW1vdmVFdmVudChlLHQpfSx0aGlzKSxkZWxldGUgaVtlXSk7ZWxzZXtmb3IodCBpbiBpKXRoaXMucmVtb3ZlRXZlbnRzKHQpO3RoaXMuZWxpbWluYXRlKCJldmVudHMiKX1yZXR1cm4gdGhpc30sZmlyZUV2ZW50OmZ1bmN0aW9uKGUsdCxpKXt2YXIgbj10aGlzLnJldHJpZXZlKCJldmVudHMiKTtyZXR1cm4gbiYmbltlXT8odD1BcnJheS5mcm9tKHQpLG5bZV0ua2V5cy5lYWNoKGZ1bmN0aW9uKGUpe2k/ZS5kZWxheShpLHRoaXMsdCk6ZS5hcHBseSh0aGlzLHQpfSx0aGlzKSx0aGlzKTp0aGlzfSxjbG9uZUV2ZW50czpmdW5jdGlvbihlLHQpe2U9ZG9jdW1lbnQuaWQoZSk7dmFyIGk9ZS5yZXRyaWV2ZSgiZXZlbnRzIik7aWYoIWkpcmV0dXJuIHRoaXM7aWYodClpW3RdJiZpW3RdLmtleXMuZWFjaChmdW5jdGlvbihlKXt0aGlzLmFkZEV2ZW50KHQsZSl9LHRoaXMpO2Vsc2UgZm9yKHZhciBuIGluIGkpdGhpcy5jbG9uZUV2ZW50cyhlLG4pO3JldHVybiB0aGlzfX0pLEVsZW1lbnQuTmF0aXZlRXZlbnRzPXtjbGljazoyLGRibGNsaWNrOjIsbW91c2V1cDoyLG1vdXNlZG93bjoyLGNvbnRleHRtZW51OjIsbW91c2V3aGVlbDoyLERPTU1vdXNlU2Nyb2xsOjIsbW91c2VvdmVyOjIsbW91c2VvdXQ6Mixtb3VzZW1vdmU6MixzZWxlY3RzdGFydDoyLHNlbGVjdGVuZDoyLGtleWRvd246MixrZXlwcmVzczoyLGtleXVwOjIsb3JpZW50YXRpb25jaGFuZ2U6Mix0b3VjaHN0YXJ0OjIsdG91Y2htb3ZlOjIsdG91Y2hlbmQ6Mix0b3VjaGNhbmNlbDoyLGdlc3R1cmVzdGFydDoyLGdlc3R1cmVjaGFuZ2U6MixnZXN0dXJlZW5kOjIsZm9jdXM6MixibHVyOjIsY2hhbmdlOjIscmVzZXQ6MixzZWxlY3Q6MixzdWJtaXQ6MixwYXN0ZToyLGlucHV0OjIsbG9hZDoyLHVubG9hZDoxLGJlZm9yZXVubG9hZDoyLHJlc2l6ZToxLG1vdmU6MSxET01Db250ZW50TG9hZGVkOjEscmVhZHlzdGF0ZWNoYW5nZToxLGVycm9yOjEsYWJvcnQ6MSxzY3JvbGw6MX0sRWxlbWVudC5FdmVudHM9e21vdXNld2hlZWw6e2Jhc2U6QnJvd3Nlci5maXJlZm94PyJET01Nb3VzZVNjcm9sbCI6Im1vdXNld2hlZWwifX0sIm9ubW91c2VlbnRlciJpbiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpRWxlbWVudC5OYXRpdmVFdmVudHMubW91c2VlbnRlcj1FbGVtZW50Lk5hdGl2ZUV2ZW50cy5tb3VzZWxlYXZlPTI7ZWxzZXt2YXIgZT1mdW5jdGlvbihlKXt2YXIgdD1lLnJlbGF0ZWRUYXJnZXQ7cmV0dXJuIG51bGw9PXQ/ITA6dD90IT10aGlzJiYieHVsIiE9dC5wcmVmaXgmJiJkb2N1bWVudCIhPXR5cGVPZih0aGlzKSYmIXRoaXMuY29udGFpbnModCk6ITF9O0VsZW1lbnQuRXZlbnRzLm1vdXNlZW50ZXI9e2Jhc2U6Im1vdXNlb3ZlciIsY29uZGl0aW9uOmV9LEVsZW1lbnQuRXZlbnRzLm1vdXNlbGVhdmU9e2Jhc2U6Im1vdXNlb3V0Iixjb25kaXRpb246ZX19d2luZG93LmFkZEV2ZW50TGlzdGVuZXJ8fChFbGVtZW50Lk5hdGl2ZUV2ZW50cy5wcm9wZXJ0eWNoYW5nZT0yLEVsZW1lbnQuRXZlbnRzLmNoYW5nZT17YmFzZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMudHlwZTtyZXR1cm4iaW5wdXQiIT10aGlzLmdldCgidGFnIil8fCJyYWRpbyIhPWUmJiJjaGVja2JveCIhPWU/ImNoYW5nZSI6InByb3BlcnR5Y2hhbmdlIn0sY29uZGl0aW9uOmZ1bmN0aW9uKGUpe3JldHVybiJyYWRpbyIhPXRoaXMudHlwZXx8ImNoZWNrZWQiPT1lLmV2ZW50LnByb3BlcnR5TmFtZSYmdGhpcy5jaGVja2VkCn19KSxFbGVtZW50LkV2ZW50cz1uZXcgSGFzaChFbGVtZW50LkV2ZW50cyl9KCksZnVuY3Rpb24oKXt2YXIgZT0hIXdpbmRvdy5hZGRFdmVudExpc3RlbmVyO0VsZW1lbnQuTmF0aXZlRXZlbnRzLmZvY3VzaW49RWxlbWVudC5OYXRpdmVFdmVudHMuZm9jdXNvdXQ9Mjt2YXIgdD1mdW5jdGlvbihlLHQsaSxuLHIpe2Zvcig7ciYmciE9ZTspe2lmKHQocixuKSlyZXR1cm4gaS5jYWxsKHIsbixyKTtyPWRvY3VtZW50LmlkKHIucGFyZW50Tm9kZSl9fSxpPXttb3VzZWVudGVyOntiYXNlOiJtb3VzZW92ZXIifSxtb3VzZWxlYXZlOntiYXNlOiJtb3VzZW91dCJ9LGZvY3VzOntiYXNlOiJmb2N1cyIrKGU/IiI6ImluIiksY2FwdHVyZTohMH0sYmx1cjp7YmFzZTplPyJibHVyIjoiZm9jdXNvdXQiLGNhcHR1cmU6ITB9fSxuPSIkZGVsZWdhdGlvbjoiLHI9ZnVuY3Rpb24oZSl7cmV0dXJue2Jhc2U6ImZvY3VzaW4iLHJlbW92ZTpmdW5jdGlvbih0LGkpe3ZhciByPXQucmV0cmlldmUobitlKyJsaXN0ZW5lcnMiLHt9KVtpXTtpZihyJiZyLmZvcm1zKWZvcih2YXIgbz1yLmZvcm1zLmxlbmd0aDtvLS07KXIuZm9ybXNbb10ucmVtb3ZlRXZlbnQoZSxyLmZuc1tvXSl9LGxpc3RlbjpmdW5jdGlvbihpLHIsbyxzLGEsbCl7dmFyIGM9ImZvcm0iPT1hLmdldCgidGFnIik/YTpzLnRhcmdldC5nZXRQYXJlbnQoImZvcm0iKTtpZihjKXt2YXIgdT1pLnJldHJpZXZlKG4rZSsibGlzdGVuZXJzIix7fSksaD11W2xdfHx7Zm9ybXM6W10sZm5zOltdfSxkPWguZm9ybXMscD1oLmZucztpZigtMT09ZC5pbmRleE9mKGMpKXtkLnB1c2goYyk7dmFyIGY9ZnVuY3Rpb24oZSl7dChpLHIsbyxlLGEpfTtjLmFkZEV2ZW50KGUsZikscC5wdXNoKGYpLHVbbF09aCxpLnN0b3JlKG4rZSsibGlzdGVuZXJzIix1KX19fX19LG89ZnVuY3Rpb24oZSl7cmV0dXJue2Jhc2U6ImZvY3VzaW4iLGxpc3RlbjpmdW5jdGlvbihpLG4scixvLHMpe3ZhciBhPXtibHVyOmZ1bmN0aW9uKCl7dGhpcy5yZW1vdmVFdmVudHMoYSl9fTthW2VdPWZ1bmN0aW9uKGUpe3QoaSxuLHIsZSxzKX0sby50YXJnZXQuYWRkRXZlbnRzKGEpfX19O2V8fE9iamVjdC5hcHBlbmQoaSx7c3VibWl0OnIoInN1Ym1pdCIpLHJlc2V0OnIoInJlc2V0IiksY2hhbmdlOm8oImNoYW5nZSIpLHNlbGVjdDpvKCJzZWxlY3QiKX0pO3ZhciBzPUVsZW1lbnQucHJvdG90eXBlLGE9cy5hZGRFdmVudCxsPXMucmVtb3ZlRXZlbnQsYz1mdW5jdGlvbihlLHQpe3JldHVybiBmdW5jdGlvbihpLG4scil7aWYoLTE9PWkuaW5kZXhPZigiOnJlbGF5IikpcmV0dXJuIGUuY2FsbCh0aGlzLGksbixyKTt2YXIgbz1TbGljay5wYXJzZShpKS5leHByZXNzaW9uc1swXVswXTtpZigicmVsYXkiIT1vLnBzZXVkb3NbMF0ua2V5KXJldHVybiBlLmNhbGwodGhpcyxpLG4scik7dmFyIHM9by50YWc7cmV0dXJuIG8ucHNldWRvcy5zbGljZSgxKS5lYWNoKGZ1bmN0aW9uKGUpe3MrPSI6IitlLmtleSsoZS52YWx1ZT8iKCIrZS52YWx1ZSsiKSI6IiIpfSksZS5jYWxsKHRoaXMsaSxuKSx0LmNhbGwodGhpcyxzLG8ucHNldWRvc1swXS52YWx1ZSxuKX19LHU9e2FkZEV2ZW50OmZ1bmN0aW9uKGUsbixyKXt2YXIgbz10aGlzLnJldHJpZXZlKCIkZGVsZWdhdGVzIix7fSkscz1vW2VdO2lmKHMpZm9yKHZhciBsIGluIHMpaWYoc1tsXS5mbj09ciYmc1tsXS5tYXRjaD09bilyZXR1cm4gdGhpczt2YXIgYz1lLHU9bixoPXIsZD1pW2VdfHx7fTtlPWQuYmFzZXx8YyxuPWZ1bmN0aW9uKGUpe3JldHVybiBTbGljay5tYXRjaChlLHUpfTt2YXIgcD1FbGVtZW50LkV2ZW50c1tjXTtpZihwJiZwLmNvbmRpdGlvbil7dmFyIGY9bixtPXAuY29uZGl0aW9uO249ZnVuY3Rpb24odCxpKXtyZXR1cm4gZih0LGkpJiZtLmNhbGwodCxpLGUpfX12YXIgZz10aGlzLHY9U3RyaW5nLnVuaXF1ZUlEKCksYj1kLmxpc3Rlbj9mdW5jdGlvbihlLHQpeyF0JiZlJiZlLnRhcmdldCYmKHQ9ZS50YXJnZXQpLHQmJmQubGlzdGVuKGcsbixyLGUsdCx2KX06ZnVuY3Rpb24oZSxpKXshaSYmZSYmZS50YXJnZXQmJihpPWUudGFyZ2V0KSxpJiZ0KGcsbixyLGUsaSl9O3JldHVybiBzfHwocz17fSksc1t2XT17bWF0Y2g6dSxmbjpoLGRlbGVnYXRvcjpifSxvW2NdPXMsYS5jYWxsKHRoaXMsZSxiLGQuY2FwdHVyZSl9LHJlbW92ZUV2ZW50OmZ1bmN0aW9uKGUsdCxuLHIpe3ZhciBvPXRoaXMucmV0cmlldmUoIiRkZWxlZ2F0ZXMiLHt9KSxzPW9bZV07aWYoIXMpcmV0dXJuIHRoaXM7aWYocil7dmFyIGE9ZSxjPXNbcl0uZGVsZWdhdG9yLGg9aVtlXXx8e307cmV0dXJuIGU9aC5iYXNlfHxhLGgucmVtb3ZlJiZoLnJlbW92ZSh0aGlzLHIpLGRlbGV0ZSBzW3JdLG9bYV09cyxsLmNhbGwodGhpcyxlLGMpfXZhciBkLHA7aWYobil7Zm9yKGQgaW4gcylpZihwPXNbZF0scC5tYXRjaD09dCYmcC5mbj09bilyZXR1cm4gdS5yZW1vdmVFdmVudC5jYWxsKHRoaXMsZSx0LG4sZCl9ZWxzZSBmb3IoZCBpbiBzKXA9c1tkXSxwLm1hdGNoPT10JiZ1LnJlbW92ZUV2ZW50LmNhbGwodGhpcyxlLHQscC5mbixkKTtyZXR1cm4gdGhpc319O1tFbGVtZW50LFdpbmRvdyxEb2N1bWVudF0uaW52b2tlKCJpbXBsZW1lbnQiLHthZGRFdmVudDpjKGEsdS5hZGRFdmVudCkscmVtb3ZlRXZlbnQ6YyhsLHUucmVtb3ZlRXZlbnQpfSl9KCksZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7cmV0dXJuIGgoZSx0KS50b0ludCgpfHwwfWZ1bmN0aW9uIHQoZSl7cmV0dXJuImJvcmRlci1ib3giPT1oKGUsIi1tb3otYm94LXNpemluZyIpfWZ1bmN0aW9uIGkodCl7cmV0dXJuIGUodCwiYm9yZGVyLXRvcC13aWR0aCIpfWZ1bmN0aW9uIG4odCl7cmV0dXJuIGUodCwiYm9yZGVyLWxlZnQtd2lkdGgiKX1mdW5jdGlvbiByKGUpe3JldHVybi9eKD86Ym9keXxodG1sKSQvaS50ZXN0KGUudGFnTmFtZSl9ZnVuY3Rpb24gbyhlKXt2YXIgdD1lLmdldERvY3VtZW50KCk7cmV0dXJuIHQuY29tcGF0TW9kZSYmIkNTUzFDb21wYXQiIT10LmNvbXBhdE1vZGU/dC5ib2R5OnQuaHRtbH12YXIgcz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKSxhPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO3Muc3R5bGUuaGVpZ2h0PSIwIixzLmFwcGVuZENoaWxkKGEpO3ZhciBsPWEub2Zmc2V0UGFyZW50PT09cztzPWE9bnVsbDt2YXIgYz1mdW5jdGlvbihlKXtyZXR1cm4ic3RhdGljIiE9aChlLCJwb3NpdGlvbiIpfHxyKGUpfSx1PWZ1bmN0aW9uKGUpe3JldHVybiBjKGUpfHwvXig/OnRhYmxlfHRkfHRoKSQvaS50ZXN0KGUudGFnTmFtZSl9O0VsZW1lbnQuaW1wbGVtZW50KHtzY3JvbGxUbzpmdW5jdGlvbihlLHQpe3JldHVybiByKHRoaXMpP3RoaXMuZ2V0V2luZG93KCkuc2Nyb2xsVG8oZSx0KToodGhpcy5zY3JvbGxMZWZ0PWUsdGhpcy5zY3JvbGxUb3A9dCksdGhpc30sZ2V0U2l6ZTpmdW5jdGlvbigpe3JldHVybiByKHRoaXMpP3RoaXMuZ2V0V2luZG93KCkuZ2V0U2l6ZSgpOnt4OnRoaXMub2Zmc2V0V2lkdGgseTp0aGlzLm9mZnNldEhlaWdodH19LGdldFNjcm9sbFNpemU6ZnVuY3Rpb24oKXtyZXR1cm4gcih0aGlzKT90aGlzLmdldFdpbmRvdygpLmdldFNjcm9sbFNpemUoKTp7eDp0aGlzLnNjcm9sbFdpZHRoLHk6dGhpcy5zY3JvbGxIZWlnaHR9fSxnZXRTY3JvbGw6ZnVuY3Rpb24oKXtyZXR1cm4gcih0aGlzKT90aGlzLmdldFdpbmRvdygpLmdldFNjcm9sbCgpOnt4OnRoaXMuc2Nyb2xsTGVmdCx5OnRoaXMuc2Nyb2xsVG9wfX0sZ2V0U2Nyb2xsczpmdW5jdGlvbigpe2Zvcih2YXIgZT10aGlzLnBhcmVudE5vZGUsdD17eDowLHk6MH07ZSYmIXIoZSk7KXQueCs9ZS5zY3JvbGxMZWZ0LHQueSs9ZS5zY3JvbGxUb3AsZT1lLnBhcmVudE5vZGU7cmV0dXJuIHR9LGdldE9mZnNldFBhcmVudDpsP2Z1bmN0aW9uKCl7dmFyIGU9dGhpcztpZihyKGUpfHwiZml4ZWQiPT1oKGUsInBvc2l0aW9uIikpcmV0dXJuIG51bGw7Zm9yKHZhciB0PSJzdGF0aWMiPT1oKGUsInBvc2l0aW9uIik/dTpjO2U9ZS5wYXJlbnROb2RlOylpZih0KGUpKXJldHVybiBlO3JldHVybiBudWxsfTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7aWYocihlKXx8ImZpeGVkIj09aChlLCJwb3NpdGlvbiIpKXJldHVybiBudWxsO3RyeXtyZXR1cm4gZS5vZmZzZXRQYXJlbnR9Y2F0Y2godCl7fXJldHVybiBudWxsfSxnZXRPZmZzZXRzOmZ1bmN0aW9uKCl7aWYodGhpcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QmJiFCcm93c2VyLlBsYXRmb3JtLmlvcyl7dmFyIGU9dGhpcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxvPWRvY3VtZW50LmlkKHRoaXMuZ2V0RG9jdW1lbnQoKS5kb2N1bWVudEVsZW1lbnQpLHM9by5nZXRTY3JvbGwoKSxhPXRoaXMuZ2V0U2Nyb2xscygpLGw9ImZpeGVkIj09aCh0aGlzLCJwb3NpdGlvbiIpO3JldHVybnt4OmUubGVmdC50b0ludCgpK2EueCsobD8wOnMueCktby5jbGllbnRMZWZ0LHk6ZS50b3AudG9JbnQoKSthLnkrKGw/MDpzLnkpLW8uY2xpZW50VG9wfX12YXIgYz10aGlzLHU9e3g6MCx5OjB9O2lmKHIodGhpcykpcmV0dXJuIHU7Zm9yKDtjJiYhcihjKTspe2lmKHUueCs9Yy5vZmZzZXRMZWZ0LHUueSs9Yy5vZmZzZXRUb3AsQnJvd3Nlci5maXJlZm94KXt0KGMpfHwodS54Kz1uKGMpLHUueSs9aShjKSk7dmFyIGQ9Yy5wYXJlbnROb2RlO2QmJiJ2aXNpYmxlIiE9aChkLCJvdmVyZmxvdyIpJiYodS54Kz1uKGQpLHUueSs9aShkKSl9ZWxzZSBjIT10aGlzJiZCcm93c2VyLnNhZmFyaSYmKHUueCs9bihjKSx1LnkrPWkoYykpO2M9Yy5vZmZzZXRQYXJlbnR9cmV0dXJuIEJyb3dzZXIuZmlyZWZveCYmIXQodGhpcykmJih1LngtPW4odGhpcyksdS55LT1pKHRoaXMpKSx1fSxnZXRQb3NpdGlvbjpmdW5jdGlvbihlKXt2YXIgdD10aGlzLmdldE9mZnNldHMoKSxyPXRoaXMuZ2V0U2Nyb2xscygpLG89e3g6dC54LXIueCx5OnQueS1yLnl9O2lmKGUmJihlPWRvY3VtZW50LmlkKGUpKSl7dmFyIHM9ZS5nZXRQb3NpdGlvbigpO3JldHVybnt4Om8ueC1zLngtbihlKSx5Om8ueS1zLnktaShlKX19cmV0dXJuIG99LGdldENvb3JkaW5hdGVzOmZ1bmN0aW9uKGUpe2lmKHIodGhpcykpcmV0dXJuIHRoaXMuZ2V0V2luZG93KCkuZ2V0Q29vcmRpbmF0ZXMoKTt2YXIgdD10aGlzLmdldFBvc2l0aW9uKGUpLGk9dGhpcy5nZXRTaXplKCksbj17bGVmdDp0LngsdG9wOnQueSx3aWR0aDppLngsaGVpZ2h0OmkueX07cmV0dXJuIG4ucmlnaHQ9bi5sZWZ0K24ud2lkdGgsbi5ib3R0b209bi50b3Arbi5oZWlnaHQsbn0sY29tcHV0ZVBvc2l0aW9uOmZ1bmN0aW9uKHQpe3JldHVybntsZWZ0OnQueC1lKHRoaXMsIm1hcmdpbi1sZWZ0IiksdG9wOnQueS1lKHRoaXMsIm1hcmdpbi10b3AiKX19LHNldFBvc2l0aW9uOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnNldFN0eWxlcyh0aGlzLmNvbXB1dGVQb3NpdGlvbihlKSl9fSksW0RvY3VtZW50LFdpbmRvd10uaW52b2tlKCJpbXBsZW1lbnQiLHtnZXRTaXplOmZ1bmN0aW9uKCl7dmFyIGU9byh0aGlzKTtyZXR1cm57eDplLmNsaWVudFdpZHRoLHk6ZS5jbGllbnRIZWlnaHR9fSxnZXRTY3JvbGw6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmdldFdpbmRvdygpLHQ9byh0aGlzKTtyZXR1cm57eDplLnBhZ2VYT2Zmc2V0fHx0LnNjcm9sbExlZnQseTplLnBhZ2VZT2Zmc2V0fHx0LnNjcm9sbFRvcH19LGdldFNjcm9sbFNpemU6ZnVuY3Rpb24oKXt2YXIgZT1vKHRoaXMpLHQ9dGhpcy5nZXRTaXplKCksaT10aGlzLmdldERvY3VtZW50KCkuYm9keTtyZXR1cm57eDpNYXRoLm1heChlLnNjcm9sbFdpZHRoLGkuc2Nyb2xsV2lkdGgsdC54KSx5Ok1hdGgubWF4KGUuc2Nyb2xsSGVpZ2h0LGkuc2Nyb2xsSGVpZ2h0LHQueSl9fSxnZXRQb3NpdGlvbjpmdW5jdGlvbigpe3JldHVybnt4OjAseTowfX0sZ2V0Q29vcmRpbmF0ZXM6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmdldFNpemUoKTtyZXR1cm57dG9wOjAsbGVmdDowLGJvdHRvbTplLnkscmlnaHQ6ZS54LGhlaWdodDplLnksd2lkdGg6ZS54fX19KTt2YXIgaD1FbGVtZW50LmdldENvbXB1dGVkU3R5bGV9KCksRWxlbWVudC5hbGlhcyh7cG9zaXRpb246InNldFBvc2l0aW9uIn0pLFtXaW5kb3csRG9jdW1lbnQsRWxlbWVudF0uaW52b2tlKCJpbXBsZW1lbnQiLHtnZXRIZWlnaHQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRTaXplKCkueX0sZ2V0V2lkdGg6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRTaXplKCkueH0sZ2V0U2Nyb2xsVG9wOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0U2Nyb2xsKCkueX0sZ2V0U2Nyb2xsTGVmdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldFNjcm9sbCgpLnh9LGdldFNjcm9sbEhlaWdodDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldFNjcm9sbFNpemUoKS55fSxnZXRTY3JvbGxXaWR0aDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldFNjcm9sbFNpemUoKS54fSxnZXRUb3A6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRQb3NpdGlvbigpLnl9LGdldExlZnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRQb3NpdGlvbigpLnh9fSksZnVuY3Rpb24oKXt2YXIgZT10aGlzLkZ4PW5ldyBDbGFzcyh7SW1wbGVtZW50czpbQ2hhaW4sRXZlbnRzLE9wdGlvbnNdLG9wdGlvbnM6e2Zwczo2MCx1bml0OiExLGR1cmF0aW9uOjUwMCxmcmFtZXM6bnVsbCxmcmFtZVNraXA6ITAsbGluazoiaWdub3JlIn0saW5pdGlhbGl6ZTpmdW5jdGlvbihlKXt0aGlzLnN1YmplY3Q9dGhpcy5zdWJqZWN0fHx0aGlzLHRoaXMuc2V0T3B0aW9ucyhlKX0sZ2V0VHJhbnNpdGlvbjpmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4tKE1hdGguY29zKE1hdGguUEkqZSktMSkvMn19LHN0ZXA6ZnVuY3Rpb24oZSl7aWYodGhpcy5vcHRpb25zLmZyYW1lU2tpcCl7dmFyIHQ9bnVsbCE9dGhpcy50aW1lP2UtdGhpcy50aW1lOjAsaT10L3RoaXMuZnJhbWVJbnRlcnZhbDt0aGlzLnRpbWU9ZSx0aGlzLmZyYW1lKz1pfWVsc2UgdGhpcy5mcmFtZSsrO2lmKHRoaXMuZnJhbWU8dGhpcy5mcmFtZXMpe3ZhciBuPXRoaXMudHJhbnNpdGlvbih0aGlzLmZyYW1lL3RoaXMuZnJhbWVzKTt0aGlzLnNldCh0aGlzLmNvbXB1dGUodGhpcy5mcm9tLHRoaXMudG8sbikpfWVsc2UgdGhpcy5mcmFtZT10aGlzLmZyYW1lcyx0aGlzLnNldCh0aGlzLmNvbXB1dGUodGhpcy5mcm9tLHRoaXMudG8sMSkpLHRoaXMuc3RvcCgpfSxzZXQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGV9LGNvbXB1dGU6ZnVuY3Rpb24odCxpLG4pe3JldHVybiBlLmNvbXB1dGUodCxpLG4pfSxjaGVjazpmdW5jdGlvbigpe2lmKCF0aGlzLmlzUnVubmluZygpKXJldHVybiEwO3N3aXRjaCh0aGlzLm9wdGlvbnMubGluayl7Y2FzZSJjYW5jZWwiOnJldHVybiB0aGlzLmNhbmNlbCgpLCEwO2Nhc2UiY2hhaW4iOnJldHVybiB0aGlzLmNoYWluKHRoaXMuY2FsbGVyLnBhc3MoYXJndW1lbnRzLHRoaXMpKSwhMX1yZXR1cm4hMX0sc3RhcnQ6ZnVuY3Rpb24odCxpKXtpZighdGhpcy5jaGVjayh0LGkpKXJldHVybiB0aGlzO3RoaXMuZnJvbT10LHRoaXMudG89aSx0aGlzLmZyYW1lPXRoaXMub3B0aW9ucy5mcmFtZVNraXA/MDotMSx0aGlzLnRpbWU9bnVsbCx0aGlzLnRyYW5zaXRpb249dGhpcy5nZXRUcmFuc2l0aW9uKCk7dmFyIG49dGhpcy5vcHRpb25zLmZyYW1lcyxvPXRoaXMub3B0aW9ucy5mcHMscz10aGlzLm9wdGlvbnMuZHVyYXRpb247cmV0dXJuIHRoaXMuZHVyYXRpb249ZS5EdXJhdGlvbnNbc118fHMudG9JbnQoKSx0aGlzLmZyYW1lSW50ZXJ2YWw9MWUzL28sdGhpcy5mcmFtZXM9bnx8TWF0aC5yb3VuZCh0aGlzLmR1cmF0aW9uL3RoaXMuZnJhbWVJbnRlcnZhbCksdGhpcy5maXJlRXZlbnQoInN0YXJ0Iix0aGlzLnN1YmplY3QpLHIuY2FsbCh0aGlzLG8pLHRoaXN9LHN0b3A6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc1J1bm5pbmcoKSYmKHRoaXMudGltZT1udWxsLG8uY2FsbCh0aGlzLHRoaXMub3B0aW9ucy5mcHMpLHRoaXMuZnJhbWVzPT10aGlzLmZyYW1lPyh0aGlzLmZpcmVFdmVudCgiY29tcGxldGUiLHRoaXMuc3ViamVjdCksdGhpcy5jYWxsQ2hhaW4oKXx8dGhpcy5maXJlRXZlbnQoImNoYWluQ29tcGxldGUiLHRoaXMuc3ViamVjdCkpOnRoaXMuZmlyZUV2ZW50KCJzdG9wIix0aGlzLnN1YmplY3QpKSx0aGlzfSxjYW5jZWw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc1J1bm5pbmcoKSYmKHRoaXMudGltZT1udWxsLG8uY2FsbCh0aGlzLHRoaXMub3B0aW9ucy5mcHMpLHRoaXMuZnJhbWU9dGhpcy5mcmFtZXMsdGhpcy5maXJlRXZlbnQoImNhbmNlbCIsdGhpcy5zdWJqZWN0KS5jbGVhckNoYWluKCkpLHRoaXN9LHBhdXNlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNSdW5uaW5nKCkmJih0aGlzLnRpbWU9bnVsbCxvLmNhbGwodGhpcyx0aGlzLm9wdGlvbnMuZnBzKSksdGhpc30scmVzdW1lOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZnJhbWU8dGhpcy5mcmFtZXMmJiF0aGlzLmlzUnVubmluZygpJiZyLmNhbGwodGhpcyx0aGlzLm9wdGlvbnMuZnBzKSx0aGlzfSxpc1J1bm5pbmc6ZnVuY3Rpb24oKXt2YXIgZT10W3RoaXMub3B0aW9ucy5mcHNdO3JldHVybiBlJiZlLmNvbnRhaW5zKHRoaXMpfX0pO2UuY29tcHV0ZT1mdW5jdGlvbihlLHQsaSl7cmV0dXJuKHQtZSkqaStlfSxlLkR1cmF0aW9ucz17InNob3J0IjoyNTAsbm9ybWFsOjUwMCwibG9uZyI6MWUzfTt2YXIgdD17fSxpPXt9LG49ZnVuY3Rpb24oKXtmb3IodmFyIGU9RGF0ZS5ub3coKSx0PXRoaXMubGVuZ3RoO3QtLTspe3ZhciBpPXRoaXNbdF07aSYmaS5zdGVwKGUpfX0scj1mdW5jdGlvbihlKXt2YXIgcj10W2VdfHwodFtlXT1bXSk7ci5wdXNoKHRoaXMpLGlbZV18fChpW2VdPW4ucGVyaW9kaWNhbChNYXRoLnJvdW5kKDFlMy9lKSxyKSl9LG89ZnVuY3Rpb24oZSl7dmFyIG49dFtlXTtuJiYobi5lcmFzZSh0aGlzKSwhbi5sZW5ndGgmJmlbZV0mJihkZWxldGUgdFtlXSxpW2VdPWNsZWFySW50ZXJ2YWwoaVtlXSkpKX19KCksRnguQ1NTPW5ldyBDbGFzcyh7RXh0ZW5kczpGeCxwcmVwYXJlOmZ1bmN0aW9uKGUsdCxpKXtpPUFycmF5LmZyb20oaSk7dmFyIG49aVswXSxyPWlbMV07aWYobnVsbD09cil7cj1uLG49ZS5nZXRTdHlsZSh0KTt2YXIgbz10aGlzLm9wdGlvbnMudW5pdDtpZihvJiZuLnNsaWNlKC1vLmxlbmd0aCkhPW8mJjAhPXBhcnNlRmxvYXQobikpe2Uuc2V0U3R5bGUodCxyK28pO3ZhciBzPWUuZ2V0Q29tcHV0ZWRTdHlsZSh0KTtpZighL3B4JC8udGVzdChzKSYmKHM9ZS5zdHlsZVsoInBpeGVsLSIrdCkuY2FtZWxDYXNlKCldLG51bGw9PXMpKXt2YXIgYT1lLnN0eWxlLmxlZnQ7ZS5zdHlsZS5sZWZ0PXIrbyxzPWUuc3R5bGUucGl4ZWxMZWZ0LGUuc3R5bGUubGVmdD1hfW49KHJ8fDEpLyhwYXJzZUZsb2F0KHMpfHwxKSoocGFyc2VGbG9hdChuKXx8MCksZS5zZXRTdHlsZSh0LG4rbyl9fXJldHVybntmcm9tOnRoaXMucGFyc2UobiksdG86dGhpcy5wYXJzZShyKX19LHBhcnNlOmZ1bmN0aW9uKGUpe3JldHVybiBlPUZ1bmN0aW9uLmZyb20oZSkoKSxlPSJzdHJpbmciPT10eXBlb2YgZT9lLnNwbGl0KCIgIik6QXJyYXkuZnJvbShlKSxlLm1hcChmdW5jdGlvbihlKXtlKz0iIjt2YXIgdD0hMTtyZXR1cm4gT2JqZWN0LmVhY2goRnguQ1NTLlBhcnNlcnMsZnVuY3Rpb24oaSl7aWYoIXQpe3ZhciBuPWkucGFyc2UoZSk7KG58fDA9PT1uKSYmKHQ9e3ZhbHVlOm4scGFyc2VyOml9KX19KSx0PXR8fHt2YWx1ZTplLHBhcnNlcjpGeC5DU1MuUGFyc2Vycy5TdHJpbmd9fSl9LGNvbXB1dGU6ZnVuY3Rpb24oZSx0LGkpe3ZhciBuPVtdO3JldHVybiBNYXRoLm1pbihlLmxlbmd0aCx0Lmxlbmd0aCkudGltZXMoZnVuY3Rpb24ocil7bi5wdXNoKHt2YWx1ZTplW3JdLnBhcnNlci5jb21wdXRlKGVbcl0udmFsdWUsdFtyXS52YWx1ZSxpKSxwYXJzZXI6ZVtyXS5wYXJzZXJ9KX0pLG4uJGZhbWlseT1GdW5jdGlvbi5mcm9tKCJmeDpjc3M6dmFsdWUiKSxufSxzZXJ2ZTpmdW5jdGlvbihlLHQpeyJmeDpjc3M6dmFsdWUiIT10eXBlT2YoZSkmJihlPXRoaXMucGFyc2UoZSkpO3ZhciBpPVtdO3JldHVybiBlLmVhY2goZnVuY3Rpb24oZSl7aT1pLmNvbmNhdChlLnBhcnNlci5zZXJ2ZShlLnZhbHVlLHQpKX0pLGl9LHJlbmRlcjpmdW5jdGlvbihlLHQsaSxuKXtlLnNldFN0eWxlKHQsdGhpcy5zZXJ2ZShpLG4pKX0sc2VhcmNoOmZ1bmN0aW9uKGUpe2lmKEZ4LkNTUy5DYWNoZVtlXSlyZXR1cm4gRnguQ1NTLkNhY2hlW2VdO3ZhciB0PXt9LGk9UmVnRXhwKCJeIitlLmVzY2FwZVJlZ0V4cCgpKyIkIik7cmV0dXJuIEFycmF5LmVhY2goZG9jdW1lbnQuc3R5bGVTaGVldHMsZnVuY3Rpb24oZSl7dmFyIG49ZS5ocmVmO2lmKCFufHwhbi5jb250YWlucygiOi8vIil8fG4uY29udGFpbnMoZG9jdW1lbnQuZG9tYWluKSl7dmFyIHI9ZS5ydWxlc3x8ZS5jc3NSdWxlcztBcnJheS5lYWNoKHIsZnVuY3Rpb24oZSl7aWYoZS5zdHlsZSl7dmFyIG49ZS5zZWxlY3RvclRleHQ/ZS5zZWxlY3RvclRleHQucmVwbGFjZSgvXlx3Ky8sZnVuY3Rpb24oZSl7cmV0dXJuIGUudG9Mb3dlckNhc2UoKX0pOm51bGw7biYmaS50ZXN0KG4pJiZPYmplY3QuZWFjaChFbGVtZW50LlN0eWxlcyxmdW5jdGlvbihpLG4pe2Uuc3R5bGVbbl0mJiFFbGVtZW50LlNob3J0U3R5bGVzW25dJiYoaT1lLnN0eWxlW25dKyIiLHRbbl09L15yZ2IvLnRlc3QoaSk/aS5yZ2JUb0hleCgpOmkpfSl9fSl9fSksRnguQ1NTLkNhY2hlW2VdPXR9fSksRnguQ1NTLkNhY2hlPXt9LEZ4LkNTUy5QYXJzZXJzPXtDb2xvcjp7cGFyc2U6ZnVuY3Rpb24oZSl7cmV0dXJuIGUubWF0Y2goL14jWzAtOWEtZl17Myw2fSQvaSk/ZS5oZXhUb1JnYighMCk6KGU9ZS5tYXRjaCgvKFxkKyksXHMqKFxkKyksXHMqKFxkKykvKSk/W2VbMV0sZVsyXSxlWzNdXTohMX0sY29tcHV0ZTpmdW5jdGlvbihlLHQsaSl7cmV0dXJuIGUubWFwKGZ1bmN0aW9uKG4scil7cmV0dXJuIE1hdGgucm91bmQoRnguY29tcHV0ZShlW3JdLHRbcl0saSkpfSl9LHNlcnZlOmZ1bmN0aW9uKGUpe3JldHVybiBlLm1hcChOdW1iZXIpfX0sTnVtYmVyOntwYXJzZTpwYXJzZUZsb2F0LGNvbXB1dGU6RnguY29tcHV0ZSxzZXJ2ZTpmdW5jdGlvbihlLHQpe3JldHVybiB0P2UrdDplfX0sU3RyaW5nOntwYXJzZTpGdW5jdGlvbi5mcm9tKCExKSxjb21wdXRlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHR9LHNlcnZlOmZ1bmN0aW9uKGUpe3JldHVybiBlfX19LEZ4LkNTUy5QYXJzZXJzPW5ldyBIYXNoKEZ4LkNTUy5QYXJzZXJzKSxGeC5Ud2Vlbj1uZXcgQ2xhc3Moe0V4dGVuZHM6RnguQ1NTLGluaXRpYWxpemU6ZnVuY3Rpb24oZSx0KXt0aGlzLmVsZW1lbnQ9dGhpcy5zdWJqZWN0PWRvY3VtZW50LmlkKGUpLHRoaXMucGFyZW50KHQpfSxzZXQ6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gMT09YXJndW1lbnRzLmxlbmd0aCYmKHQ9ZSxlPXRoaXMucHJvcGVydHl8fHRoaXMub3B0aW9ucy5wcm9wZXJ0eSksdGhpcy5yZW5kZXIodGhpcy5lbGVtZW50LGUsdCx0aGlzLm9wdGlvbnMudW5pdCksdGhpc30sc3RhcnQ6ZnVuY3Rpb24oZSx0LGkpe2lmKCF0aGlzLmNoZWNrKGUsdCxpKSlyZXR1cm4gdGhpczt2YXIgbj1BcnJheS5mbGF0dGVuKGFyZ3VtZW50cyk7dGhpcy5wcm9wZXJ0eT10aGlzLm9wdGlvbnMucHJvcGVydHl8fG4uc2hpZnQoKTt2YXIgcj10aGlzLnByZXBhcmUodGhpcy5lbGVtZW50LHRoaXMucHJvcGVydHksbik7cmV0dXJuIHRoaXMucGFyZW50KHIuZnJvbSxyLnRvKX19KSxFbGVtZW50LlByb3BlcnRpZXMudHdlZW49e3NldDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5nZXQoInR3ZWVuIikuY2FuY2VsKCkuc2V0T3B0aW9ucyhlKSx0aGlzfSxnZXQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnJldHJpZXZlKCJ0d2VlbiIpO3JldHVybiBlfHwoZT1uZXcgRnguVHdlZW4odGhpcyx7bGluazoiY2FuY2VsIn0pLHRoaXMuc3RvcmUoInR3ZWVuIixlKSksZX19LEVsZW1lbnQuaW1wbGVtZW50KHt0d2VlbjpmdW5jdGlvbihlLHQsaSl7cmV0dXJuIHRoaXMuZ2V0KCJ0d2VlbiIpLnN0YXJ0KGUsdCxpKSx0aGlzfSxmYWRlOmZ1bmN0aW9uKCl7dmFyIGUsdCxpPXRoaXMuZ2V0KCJ0d2VlbiIpLG49WyJvcGFjaXR5Il0uYXBwZW5kKGFyZ3VtZW50cyk7c3dpdGNoKG51bGw9PW5bMV0mJihuWzFdPSJ0b2dnbGUiKSxuWzFdKXtjYXNlImluIjplPSJzdGFydCIsblsxXT0xO2JyZWFrO2Nhc2Uib3V0IjplPSJzdGFydCIsblsxXT0wO2JyZWFrO2Nhc2Uic2hvdyI6ZT0ic2V0IixuWzFdPTE7YnJlYWs7Y2FzZSJoaWRlIjplPSJzZXQiLG5bMV09MDticmVhaztjYXNlInRvZ2dsZSI6dmFyIHI9dGhpcy5yZXRyaWV2ZSgiZmFkZTpmbGFnIiwxPT10aGlzLmdldFN0eWxlKCJvcGFjaXR5IikpO2U9InN0YXJ0IixuWzFdPXI/MDoxLHRoaXMuc3RvcmUoImZhZGU6ZmxhZyIsIXIpLHQ9ITA7YnJlYWs7ZGVmYXVsdDplPSJzdGFydCJ9dHx8dGhpcy5lbGltaW5hdGUoImZhZGU6ZmxhZyIpLGlbZV0uYXBwbHkoaSxuKTt2YXIgbz1uW24ubGVuZ3RoLTFdO3JldHVybiJzZXQiPT1lfHwwIT1vP3RoaXMuc2V0U3R5bGUoInZpc2liaWxpdHkiLDA9PW8/ImhpZGRlbiI6InZpc2libGUiKTppLmNoYWluKGZ1bmN0aW9uKCl7dGhpcy5lbGVtZW50LnNldFN0eWxlKCJ2aXNpYmlsaXR5IiwiaGlkZGVuIiksdGhpcy5jYWxsQ2hhaW4oKX0pLHRoaXN9LGhpZ2hsaWdodDpmdW5jdGlvbihlLHQpe3R8fCh0PXRoaXMucmV0cmlldmUoImhpZ2hsaWdodDpvcmlnaW5hbCIsdGhpcy5nZXRTdHlsZSgiYmFja2dyb3VuZC1jb2xvciIpKSx0PSJ0cmFuc3BhcmVudCI9PXQ/IiNmZmYiOnQpO3ZhciBpPXRoaXMuZ2V0KCJ0d2VlbiIpO3JldHVybiBpLnN0YXJ0KCJiYWNrZ3JvdW5kLWNvbG9yIixlfHwiI2ZmZmY4OCIsdCkuY2hhaW4oZnVuY3Rpb24oKXt0aGlzLnNldFN0eWxlKCJiYWNrZ3JvdW5kLWNvbG9yIix0aGlzLnJldHJpZXZlKCJoaWdobGlnaHQ6b3JpZ2luYWwiKSksaS5jYWxsQ2hhaW4oKX0uYmluZCh0aGlzKSksdGhpc319KSxGeC5Nb3JwaD1uZXcgQ2xhc3Moe0V4dGVuZHM6RnguQ1NTLGluaXRpYWxpemU6ZnVuY3Rpb24oZSx0KXt0aGlzLmVsZW1lbnQ9dGhpcy5zdWJqZWN0PWRvY3VtZW50LmlkKGUpLHRoaXMucGFyZW50KHQpfSxzZXQ6ZnVuY3Rpb24oZSl7InN0cmluZyI9PXR5cGVvZiBlJiYoZT10aGlzLnNlYXJjaChlKSk7Zm9yKHZhciB0IGluIGUpdGhpcy5yZW5kZXIodGhpcy5lbGVtZW50LHQsZVt0XSx0aGlzLm9wdGlvbnMudW5pdCk7cmV0dXJuIHRoaXN9LGNvbXB1dGU6ZnVuY3Rpb24oZSx0LGkpe3ZhciBuPXt9O2Zvcih2YXIgciBpbiBlKW5bcl09dGhpcy5wYXJlbnQoZVtyXSx0W3JdLGkpO3JldHVybiBufSxzdGFydDpmdW5jdGlvbihlKXtpZighdGhpcy5jaGVjayhlKSlyZXR1cm4gdGhpczsic3RyaW5nIj09dHlwZW9mIGUmJihlPXRoaXMuc2VhcmNoKGUpKTt2YXIgdD17fSxpPXt9O2Zvcih2YXIgbiBpbiBlKXt2YXIgcj10aGlzLnByZXBhcmUodGhpcy5lbGVtZW50LG4sZVtuXSk7dFtuXT1yLmZyb20saVtuXT1yLnRvfXJldHVybiB0aGlzLnBhcmVudCh0LGkpfX0pLEVsZW1lbnQuUHJvcGVydGllcy5tb3JwaD17c2V0OmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmdldCgibW9ycGgiKS5jYW5jZWwoKS5zZXRPcHRpb25zKGUpLHRoaXN9LGdldDpmdW5jdGlvbigpe3ZhciBlPXRoaXMucmV0cmlldmUoIm1vcnBoIik7cmV0dXJuIGV8fChlPW5ldyBGeC5Nb3JwaCh0aGlzLHtsaW5rOiJjYW5jZWwifSksdGhpcy5zdG9yZSgibW9ycGgiLGUpKSxlfX0sRWxlbWVudC5pbXBsZW1lbnQoe21vcnBoOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmdldCgibW9ycGgiKS5zdGFydChlKSx0aGlzfX0pLEZ4LmltcGxlbWVudCh7Z2V0VHJhbnNpdGlvbjpmdW5jdGlvbigpe3ZhciBlPXRoaXMub3B0aW9ucy50cmFuc2l0aW9ufHxGeC5UcmFuc2l0aW9ucy5TaW5lLmVhc2VJbk91dDtpZigic3RyaW5nIj09dHlwZW9mIGUpe3ZhciB0PWUuc3BsaXQoIjoiKTtlPUZ4LlRyYW5zaXRpb25zLGU9ZVt0WzBdXXx8ZVt0WzBdLmNhcGl0YWxpemUoKV0sdFsxXSYmKGU9ZVsiZWFzZSIrdFsxXS5jYXBpdGFsaXplKCkrKHRbMl0/dFsyXS5jYXBpdGFsaXplKCk6IiIpXSl9cmV0dXJuIGV9fSksRnguVHJhbnNpdGlvbj1mdW5jdGlvbihlLHQpe3Q9QXJyYXkuZnJvbSh0KTt2YXIgaT1mdW5jdGlvbihpKXtyZXR1cm4gZShpLHQpfTtyZXR1cm4gT2JqZWN0LmFwcGVuZChpLHtlYXNlSW46aSxlYXNlT3V0OmZ1bmN0aW9uKGkpe3JldHVybiAxLWUoMS1pLHQpfSxlYXNlSW5PdXQ6ZnVuY3Rpb24oaSl7cmV0dXJuKC41Pj1pP2UoMippLHQpOjItZSgyKigxLWkpLHQpKS8yfX0pfSxGeC5UcmFuc2l0aW9ucz17bGluZWFyOmZ1bmN0aW9uKGUpe3JldHVybiBlfX0sRnguVHJhbnNpdGlvbnM9bmV3IEhhc2goRnguVHJhbnNpdGlvbnMpLEZ4LlRyYW5zaXRpb25zLmV4dGVuZD1mdW5jdGlvbihlKXtmb3IodmFyIHQgaW4gZSlGeC5UcmFuc2l0aW9uc1t0XT1uZXcgRnguVHJhbnNpdGlvbihlW3RdKX0sRnguVHJhbnNpdGlvbnMuZXh0ZW5kKHtQb3c6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gTWF0aC5wb3coZSx0JiZ0WzBdfHw2KX0sRXhwbzpmdW5jdGlvbihlKXtyZXR1cm4gTWF0aC5wb3coMiw4KihlLTEpKX0sQ2lyYzpmdW5jdGlvbihlKXtyZXR1cm4gMS1NYXRoLnNpbihNYXRoLmFjb3MoZSkpfSxTaW5lOmZ1bmN0aW9uKGUpe3JldHVybiAxLU1hdGguY29zKGUqTWF0aC5QSS8yKX0sQmFjazpmdW5jdGlvbihlLHQpe3JldHVybiB0PXQmJnRbMF18fDEuNjE4LE1hdGgucG93KGUsMikqKCh0KzEpKmUtdCl9LEJvdW5jZTpmdW5jdGlvbihlKXtmb3IodmFyIHQsaT0wLG49MTsxO2krPW4sbi89MilpZihlPj0oNy00KmkpLzExKXt0PW4qbi1NYXRoLnBvdygoMTEtNippLTExKmUpLzQsMik7YnJlYWt9cmV0dXJuIHR9LEVsYXN0aWM6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gTWF0aC5wb3coMiwxMCotLWUpKk1hdGguY29zKDIwKmUqTWF0aC5QSSoodCYmdFswXXx8MSkvMyl9fSksWyJRdWFkIiwiQ3ViaWMiLCJRdWFydCIsIlF1aW50Il0uZWFjaChmdW5jdGlvbihlLHQpe0Z4LlRyYW5zaXRpb25zW2VdPW5ldyBGeC5UcmFuc2l0aW9uKGZ1bmN0aW9uKGUpe3JldHVybiBNYXRoLnBvdyhlLHQrMil9KX0pLGZ1bmN0aW9uKCl7dmFyIGU9ZnVuY3Rpb24oKXt9LHQ9Im9ucHJvZ3Jlc3MiaW4gbmV3IEJyb3dzZXIuUmVxdWVzdCxpPXRoaXMuUmVxdWVzdD1uZXcgQ2xhc3Moe0ltcGxlbWVudHM6W0NoYWluLEV2ZW50cyxPcHRpb25zXSxvcHRpb25zOnt1cmw6IiIsZGF0YToiIixoZWFkZXJzOnsiWC1SZXF1ZXN0ZWQtV2l0aCI6IlhNTEh0dHBSZXF1ZXN0IixBY2NlcHQ6InRleHQvamF2YXNjcmlwdCwgdGV4dC9odG1sLCBhcHBsaWNhdGlvbi94bWwsIHRleHQveG1sLCAqLyoifSxhc3luYzohMCxmb3JtYXQ6ITEsbWV0aG9kOiJwb3N0IixsaW5rOiJpZ25vcmUiLGlzU3VjY2VzczpudWxsLGVtdWxhdGlvbjohMCx1cmxFbmNvZGVkOiEwLGVuY29kaW5nOiJ1dGYtOCIsZXZhbFNjcmlwdHM6ITEsZXZhbFJlc3BvbnNlOiExLHRpbWVvdXQ6MCxub0NhY2hlOiExfSxpbml0aWFsaXplOmZ1bmN0aW9uKGUpe3RoaXMueGhyPW5ldyBCcm93c2VyLlJlcXVlc3QsdGhpcy5zZXRPcHRpb25zKGUpLHRoaXMuaGVhZGVycz10aGlzLm9wdGlvbnMuaGVhZGVyc30sb25TdGF0ZUNoYW5nZTpmdW5jdGlvbigpe3ZhciBpPXRoaXMueGhyOzQ9PWkucmVhZHlTdGF0ZSYmdGhpcy5ydW5uaW5nJiYodGhpcy5ydW5uaW5nPSExLHRoaXMuc3RhdHVzPTAsRnVuY3Rpb24uYXR0ZW1wdChmdW5jdGlvbigpe3ZhciBlPWkuc3RhdHVzO3RoaXMuc3RhdHVzPTEyMjM9PWU/MjA0OmV9LmJpbmQodGhpcykpLGkub25yZWFkeXN0YXRlY2hhbmdlPWUsdCYmKGkub25wcm9ncmVzcz1pLm9ubG9hZHN0YXJ0PWUpLGNsZWFyVGltZW91dCh0aGlzLnRpbWVyKSx0aGlzLnJlc3BvbnNlPXt0ZXh0OnRoaXMueGhyLnJlc3BvbnNlVGV4dHx8IiIseG1sOnRoaXMueGhyLnJlc3BvbnNlWE1MfSx0aGlzLm9wdGlvbnMuaXNTdWNjZXNzLmNhbGwodGhpcyx0aGlzLnN0YXR1cyk/dGhpcy5zdWNjZXNzKHRoaXMucmVzcG9uc2UudGV4dCx0aGlzLnJlc3BvbnNlLnhtbCk6dGhpcy5mYWlsdXJlKCkpfSxpc1N1Y2Nlc3M6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnN0YXR1cztyZXR1cm4gZT49MjAwJiYzMDA+ZX0saXNSdW5uaW5nOmZ1bmN0aW9uKCl7cmV0dXJuISF0aGlzLnJ1bm5pbmd9LHByb2Nlc3NTY3JpcHRzOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLm9wdGlvbnMuZXZhbFJlc3BvbnNlfHwvKGVjbWF8amF2YSlzY3JpcHQvLnRlc3QodGhpcy5nZXRIZWFkZXIoIkNvbnRlbnQtdHlwZSIpKT9Ccm93c2VyLmV4ZWMoZSk6ZS5zdHJpcFNjcmlwdHModGhpcy5vcHRpb25zLmV2YWxTY3JpcHRzKX0sc3VjY2VzczpmdW5jdGlvbihlLHQpe3RoaXMub25TdWNjZXNzKHRoaXMucHJvY2Vzc1NjcmlwdHMoZSksdCl9LG9uU3VjY2VzczpmdW5jdGlvbigpe3RoaXMuZmlyZUV2ZW50KCJjb21wbGV0ZSIsYXJndW1lbnRzKS5maXJlRXZlbnQoInN1Y2Nlc3MiLGFyZ3VtZW50cykuY2FsbENoYWluKCl9LGZhaWx1cmU6ZnVuY3Rpb24oKXt0aGlzLm9uRmFpbHVyZSgpfSxvbkZhaWx1cmU6ZnVuY3Rpb24oKXt0aGlzLmZpcmVFdmVudCgiY29tcGxldGUiKS5maXJlRXZlbnQoImZhaWx1cmUiLHRoaXMueGhyKX0sbG9hZHN0YXJ0OmZ1bmN0aW9uKGUpe3RoaXMuZmlyZUV2ZW50KCJsb2Fkc3RhcnQiLFtlLHRoaXMueGhyXSl9LHByb2dyZXNzOmZ1bmN0aW9uKGUpe3RoaXMuZmlyZUV2ZW50KCJwcm9ncmVzcyIsW2UsdGhpcy54aHJdKX0sdGltZW91dDpmdW5jdGlvbigpe3RoaXMuZmlyZUV2ZW50KCJ0aW1lb3V0Iix0aGlzLnhocil9LHNldEhlYWRlcjpmdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLmhlYWRlcnNbZV09dCx0aGlzfSxnZXRIZWFkZXI6ZnVuY3Rpb24oZSl7cmV0dXJuIEZ1bmN0aW9uLmF0dGVtcHQoZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy54aHIuZ2V0UmVzcG9uc2VIZWFkZXIoZSl9LmJpbmQodGhpcykpfSxjaGVjazpmdW5jdGlvbigpe2lmKCF0aGlzLnJ1bm5pbmcpcmV0dXJuITA7c3dpdGNoKHRoaXMub3B0aW9ucy5saW5rKXtjYXNlImNhbmNlbCI6cmV0dXJuIHRoaXMuY2FuY2VsKCksITA7Y2FzZSJjaGFpbiI6cmV0dXJuIHRoaXMuY2hhaW4odGhpcy5jYWxsZXIucGFzcyhhcmd1bWVudHMsdGhpcykpLCExfXJldHVybiExfSxzZW5kOmZ1bmN0aW9uKGUpe2lmKCF0aGlzLmNoZWNrKGUpKXJldHVybiB0aGlzO3RoaXMub3B0aW9ucy5pc1N1Y2Nlc3M9dGhpcy5vcHRpb25zLmlzU3VjY2Vzc3x8dGhpcy5pc1N1Y2Nlc3MsdGhpcy5ydW5uaW5nPSEwO3ZhciBpPXR5cGVPZihlKTsoInN0cmluZyI9PWl8fCJlbGVtZW50Ij09aSkmJihlPXtkYXRhOmV9KTt2YXIgbj10aGlzLm9wdGlvbnM7ZT1PYmplY3QuYXBwZW5kKHtkYXRhOm4uZGF0YSx1cmw6bi51cmwsbWV0aG9kOm4ubWV0aG9kfSxlKTt2YXIgcj1lLmRhdGEsbz1lLnVybCsiIixzPWUubWV0aG9kLnRvTG93ZXJDYXNlKCk7c3dpdGNoKHR5cGVPZihyKSl7Y2FzZSJlbGVtZW50IjpyPWRvY3VtZW50LmlkKHIpLnRvUXVlcnlTdHJpbmcoKTticmVhaztjYXNlIm9iamVjdCI6Y2FzZSJoYXNoIjpyPU9iamVjdC50b1F1ZXJ5U3RyaW5nKHIpfWlmKHRoaXMub3B0aW9ucy5mb3JtYXQpe3ZhciBhPSJmb3JtYXQ9Iit0aGlzLm9wdGlvbnMuZm9ybWF0O3I9cj9hKyImIityOmF9aWYodGhpcy5vcHRpb25zLmVtdWxhdGlvbiYmIVsiZ2V0IiwicG9zdCJdLmNvbnRhaW5zKHMpKXt2YXIgbD0iX21ldGhvZD0iK3M7cj1yP2wrIiYiK3I6bCxzPSJwb3N0In1pZih0aGlzLm9wdGlvbnMudXJsRW5jb2RlZCYmWyJwb3N0IiwicHV0Il0uY29udGFpbnMocykpe3ZhciBjPXRoaXMub3B0aW9ucy5lbmNvZGluZz8iOyBjaGFyc2V0PSIrdGhpcy5vcHRpb25zLmVuY29kaW5nOiIiO3RoaXMuaGVhZGVyc1siQ29udGVudC10eXBlIl09ImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCIrY31vfHwobz1kb2N1bWVudC5sb2NhdGlvbi5wYXRobmFtZSk7dmFyIHU9by5sYXN0SW5kZXhPZigiLyIpO3U+LTEmJih1PW8uaW5kZXhPZigiIyIpKT4tMSYmKG89by5zdWJzdHIoMCx1KSksdGhpcy5vcHRpb25zLm5vQ2FjaGUmJihvKz0oby5jb250YWlucygiPyIpPyImIjoiPyIpK1N0cmluZy51bmlxdWVJRCgpKSxyJiYiZ2V0Ij09cyYmKG8rPShvLmNvbnRhaW5zKCI/Iik/IiYiOiI/IikrcixyPW51bGwpO3ZhciBoPXRoaXMueGhyO3JldHVybiB0JiYoaC5vbmxvYWRzdGFydD10aGlzLmxvYWRzdGFydC5iaW5kKHRoaXMpLGgub25wcm9ncmVzcz10aGlzLnByb2dyZXNzLmJpbmQodGhpcykpLGgub3BlbihzLnRvVXBwZXJDYXNlKCksbyx0aGlzLm9wdGlvbnMuYXN5bmMsdGhpcy5vcHRpb25zLnVzZXIsdGhpcy5vcHRpb25zLnBhc3N3b3JkKSx0aGlzLm9wdGlvbnMudXNlciYmIndpdGhDcmVkZW50aWFscyJpbiBoJiYoaC53aXRoQ3JlZGVudGlhbHM9ITApLGgub25yZWFkeXN0YXRlY2hhbmdlPXRoaXMub25TdGF0ZUNoYW5nZS5iaW5kKHRoaXMpLE9iamVjdC5lYWNoKHRoaXMuaGVhZGVycyxmdW5jdGlvbihlLHQpe3RyeXtoLnNldFJlcXVlc3RIZWFkZXIodCxlKX1jYXRjaChpKXt0aGlzLmZpcmVFdmVudCgiZXhjZXB0aW9uIixbdCxlXSl9fSx0aGlzKSx0aGlzLmZpcmVFdmVudCgicmVxdWVzdCIpLGguc2VuZChyKSx0aGlzLm9wdGlvbnMuYXN5bmM/dGhpcy5vcHRpb25zLnRpbWVvdXQmJih0aGlzLnRpbWVyPXRoaXMudGltZW91dC5kZWxheSh0aGlzLm9wdGlvbnMudGltZW91dCx0aGlzKSk6dGhpcy5vblN0YXRlQ2hhbmdlKCksdGhpc30sY2FuY2VsOmZ1bmN0aW9uKCl7aWYoIXRoaXMucnVubmluZylyZXR1cm4gdGhpczt0aGlzLnJ1bm5pbmc9ITE7dmFyIGk9dGhpcy54aHI7cmV0dXJuIGkuYWJvcnQoKSxjbGVhclRpbWVvdXQodGhpcy50aW1lciksaS5vbnJlYWR5c3RhdGVjaGFuZ2U9ZSx0JiYoaS5vbnByb2dyZXNzPWkub25sb2Fkc3RhcnQ9ZSksdGhpcy54aHI9bmV3IEJyb3dzZXIuUmVxdWVzdCx0aGlzLmZpcmVFdmVudCgiY2FuY2VsIiksdGhpc319KSxuPXt9O1siZ2V0IiwicG9zdCIsInB1dCIsImRlbGV0ZSIsIkdFVCIsIlBPU1QiLCJQVVQiLCJERUxFVEUiXS5lYWNoKGZ1bmN0aW9uKGUpe25bZV09ZnVuY3Rpb24odCl7dmFyIGk9e21ldGhvZDplfTtyZXR1cm4gbnVsbCE9dCYmKGkuZGF0YT10KSx0aGlzLnNlbmQoaSl9fSksaS5pbXBsZW1lbnQobiksRWxlbWVudC5Qcm9wZXJ0aWVzLnNlbmQ9e3NldDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLmdldCgic2VuZCIpLmNhbmNlbCgpO3JldHVybiB0LnNldE9wdGlvbnMoZSksdGhpc30sZ2V0OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5yZXRyaWV2ZSgic2VuZCIpO3JldHVybiBlfHwoZT1uZXcgaSh7ZGF0YTp0aGlzLGxpbms6ImNhbmNlbCIsbWV0aG9kOnRoaXMuZ2V0KCJtZXRob2QiKXx8InBvc3QiLHVybDp0aGlzLmdldCgiYWN0aW9uIil9KSx0aGlzLnN0b3JlKCJzZW5kIixlKSksZX19LEVsZW1lbnQuaW1wbGVtZW50KHtzZW5kOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuZ2V0KCJzZW5kIik7cmV0dXJuIHQuc2VuZCh7ZGF0YTp0aGlzLHVybDplfHx0Lm9wdGlvbnMudXJsfSksdGhpc319KX0oKSxSZXF1ZXN0LkhUTUw9bmV3IENsYXNzKHtFeHRlbmRzOlJlcXVlc3Qsb3B0aW9uczp7dXBkYXRlOiExLGFwcGVuZDohMSxldmFsU2NyaXB0czohMCxmaWx0ZXI6ITEsaGVhZGVyczp7QWNjZXB0OiJ0ZXh0L2h0bWwsIGFwcGxpY2F0aW9uL3htbCwgdGV4dC94bWwsICovKiJ9fSxzdWNjZXNzOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMub3B0aW9ucyxpPXRoaXMucmVzcG9uc2U7aS5odG1sPWUuc3RyaXBTY3JpcHRzKGZ1bmN0aW9uKGUpe2kuamF2YXNjcmlwdD1lfSk7dmFyIG49aS5odG1sLm1hdGNoKC88Ym9keVtePl0qPihbXHNcU10qPyk8XC9ib2R5Pi9pKTtuJiYoaS5odG1sPW5bMV0pO3ZhciByPW5ldyBFbGVtZW50KCJkaXYiKS5zZXQoImh0bWwiLGkuaHRtbCk7aWYoaS50cmVlPXIuY2hpbGROb2RlcyxpLmVsZW1lbnRzPXIuZ2V0RWxlbWVudHModC5maWx0ZXJ8fCIqIiksdC5maWx0ZXImJihpLnRyZWU9aS5lbGVtZW50cyksdC51cGRhdGUpe3ZhciBvPWRvY3VtZW50LmlkKHQudXBkYXRlKS5lbXB0eSgpO3QuZmlsdGVyP28uYWRvcHQoaS5lbGVtZW50cyk6by5zZXQoImh0bWwiLGkuaHRtbCl9ZWxzZSBpZih0LmFwcGVuZCl7dmFyIHM9ZG9jdW1lbnQuaWQodC5hcHBlbmQpO3QuZmlsdGVyP2kuZWxlbWVudHMucmV2ZXJzZSgpLmluamVjdChzKTpzLmFkb3B0KHIuZ2V0Q2hpbGRyZW4oKSl9dC5ldmFsU2NyaXB0cyYmQnJvd3Nlci5leGVjKGkuamF2YXNjcmlwdCksdGhpcy5vblN1Y2Nlc3MoaS50cmVlLGkuZWxlbWVudHMsaS5odG1sLGkuamF2YXNjcmlwdCl9fSksRWxlbWVudC5Qcm9wZXJ0aWVzLmxvYWQ9e3NldDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLmdldCgibG9hZCIpLmNhbmNlbCgpO3JldHVybiB0LnNldE9wdGlvbnMoZSksdGhpc30sZ2V0OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5yZXRyaWV2ZSgibG9hZCIpO3JldHVybiBlfHwoZT1uZXcgUmVxdWVzdC5IVE1MKHtkYXRhOnRoaXMsbGluazoiY2FuY2VsIix1cGRhdGU6dGhpcyxtZXRob2Q6ImdldCJ9KSx0aGlzLnN0b3JlKCJsb2FkIixlKSksZX19LEVsZW1lbnQuaW1wbGVtZW50KHtsb2FkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0KCJsb2FkIikuc2VuZChBcnJheS5saW5rKGFyZ3VtZW50cyx7ZGF0YTpUeXBlLmlzT2JqZWN0LHVybDpUeXBlLmlzU3RyaW5nfSkpLHRoaXN9fSksInVuZGVmaW5lZCI9PXR5cGVvZiBKU09OJiYodGhpcy5KU09OPXt9KSxKU09OPW5ldyBIYXNoKHtzdHJpbmdpZnk6SlNPTi5zdHJpbmdpZnkscGFyc2U6SlNPTi5wYXJzZX0pLGZ1bmN0aW9uKCl7dmFyIHNwZWNpYWw9eyJcYiI6IlxcYiIsIgkiOiJcXHQiLCJcbiI6IlxcbiIsIlxmIjoiXFxmIiwiXHIiOiJcXHIiLCciJzonXFwiJywiXFwiOiJcXFxcIn0sZXNjYXBlPWZ1bmN0aW9uKGUpe3JldHVybiBzcGVjaWFsW2VdfHwiXFx1IisoIjAwMDAiK2UuY2hhckNvZGVBdCgwKS50b1N0cmluZygxNikpLnNsaWNlKC00KX07SlNPTi52YWxpZGF0ZT1mdW5jdGlvbihlKXtyZXR1cm4gZT1lLnJlcGxhY2UoL1xcKD86WyJcXFwvYmZucnRdfHVbMC05YS1mQS1GXXs0fSkvZywiQCIpLnJlcGxhY2UoLyJbXiJcXFxuXHJdKiJ8dHJ1ZXxmYWxzZXxudWxsfC0/XGQrKD86XC5cZCopPyg/OltlRV1bK1wtXT9cZCspPy9nLCJdIikucmVwbGFjZSgvKD86Xnw6fCwpKD86XHMqXFspKy9nLCIiKSwvXltcXSw6e31cc10qJC8udGVzdChlKX0sSlNPTi5lbmNvZGU9SlNPTi5zdHJpbmdpZnk/ZnVuY3Rpb24oZSl7cmV0dXJuIEpTT04uc3RyaW5naWZ5KGUpfTpmdW5jdGlvbihlKXtzd2l0Y2goZSYmZS50b0pTT04mJihlPWUudG9KU09OKCkpLHR5cGVPZihlKSl7Y2FzZSJzdHJpbmciOnJldHVybiciJytlLnJlcGxhY2UoL1tceDAwLVx4MWZcXCJdL2csZXNjYXBlKSsnIic7Y2FzZSJhcnJheSI6cmV0dXJuIlsiK2UubWFwKEpTT04uZW5jb2RlKS5jbGVhbigpKyJdIjtjYXNlIm9iamVjdCI6Y2FzZSJoYXNoIjp2YXIgdD1bXTtyZXR1cm4gT2JqZWN0LmVhY2goZSxmdW5jdGlvbihlLGkpe3ZhciBuPUpTT04uZW5jb2RlKGUpO24mJnQucHVzaChKU09OLmVuY29kZShpKSsiOiIrbil9KSwieyIrdCsifSI7Y2FzZSJudW1iZXIiOmNhc2UiYm9vbGVhbiI6cmV0dXJuIiIrZTtjYXNlIm51bGwiOnJldHVybiJudWxsIn1yZXR1cm4gbnVsbH0sSlNPTi5kZWNvZGU9ZnVuY3Rpb24oc3RyaW5nLHNlY3VyZSl7aWYoIXN0cmluZ3x8InN0cmluZyIhPXR5cGVPZihzdHJpbmcpKXJldHVybiBudWxsO2lmKHNlY3VyZXx8SlNPTi5zZWN1cmUpe2lmKEpTT04ucGFyc2UpcmV0dXJuIEpTT04ucGFyc2Uoc3RyaW5nKTtpZighSlNPTi52YWxpZGF0ZShzdHJpbmcpKXRocm93IEVycm9yKCJKU09OIGNvdWxkIG5vdCBkZWNvZGUgdGhlIGlucHV0OyBzZWN1cml0eSBpcyBlbmFibGVkIGFuZCB0aGUgdmFsdWUgaXMgbm90IHNlY3VyZS4iKX1yZXR1cm4gZXZhbCgiKCIrc3RyaW5nKyIpIil9fSgpLFJlcXVlc3QuSlNPTj1uZXcgQ2xhc3Moe0V4dGVuZHM6UmVxdWVzdCxvcHRpb25zOntzZWN1cmU6ITB9LGluaXRpYWxpemU6ZnVuY3Rpb24oZSl7dGhpcy5wYXJlbnQoZSksT2JqZWN0LmFwcGVuZCh0aGlzLmhlYWRlcnMse0FjY2VwdDoiYXBwbGljYXRpb24vanNvbiIsIlgtUmVxdWVzdCI6IkpTT04ifSl9LHN1Y2Nlc3M6ZnVuY3Rpb24oZSl7dmFyIHQ7dHJ5e3Q9dGhpcy5yZXNwb25zZS5qc29uPUpTT04uZGVjb2RlKGUsdGhpcy5vcHRpb25zLnNlY3VyZSl9Y2F0Y2goaSl7cmV0dXJuIHRoaXMuZmlyZUV2ZW50KCJlcnJvciIsW2UsaV0pLHZvaWQgMH1udWxsPT10P3RoaXMub25GYWlsdXJlKCk6dGhpcy5vblN1Y2Nlc3ModCxlKX19KTt2YXIgQ29va2llPW5ldyBDbGFzcyh7SW1wbGVtZW50czpPcHRpb25zLG9wdGlvbnM6e3BhdGg6Ii8iLGRvbWFpbjohMSxkdXJhdGlvbjohMSxzZWN1cmU6ITEsZG9jdW1lbnQ6ZG9jdW1lbnQsZW5jb2RlOiEwfSxpbml0aWFsaXplOmZ1bmN0aW9uKGUsdCl7dGhpcy5rZXk9ZSx0aGlzLnNldE9wdGlvbnModCl9LHdyaXRlOmZ1bmN0aW9uKGUpe2lmKHRoaXMub3B0aW9ucy5lbmNvZGUmJihlPWVuY29kZVVSSUNvbXBvbmVudChlKSksdGhpcy5vcHRpb25zLmRvbWFpbiYmKGUrPSI7IGRvbWFpbj0iK3RoaXMub3B0aW9ucy5kb21haW4pLHRoaXMub3B0aW9ucy5wYXRoJiYoZSs9IjsgcGF0aD0iK3RoaXMub3B0aW9ucy5wYXRoKSx0aGlzLm9wdGlvbnMuZHVyYXRpb24pe3ZhciB0PW5ldyBEYXRlO3Quc2V0VGltZSh0LmdldFRpbWUoKSsxZTMqNjAqNjAqMjQqdGhpcy5vcHRpb25zLmR1cmF0aW9uKSxlKz0iOyBleHBpcmVzPSIrdC50b0dNVFN0cmluZygpfXJldHVybiB0aGlzLm9wdGlvbnMuc2VjdXJlJiYoZSs9Ijsgc2VjdXJlIiksdGhpcy5vcHRpb25zLmRvY3VtZW50LmNvb2tpZT10aGlzLmtleSsiPSIrZSx0aGlzfSxyZWFkOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcHRpb25zLmRvY3VtZW50LmNvb2tpZS5tYXRjaCgiKD86Xnw7KVxccyoiK3RoaXMua2V5LmVzY2FwZVJlZ0V4cCgpKyI9KFteO10qKSIpO3JldHVybiBlP2RlY29kZVVSSUNvbXBvbmVudChlWzFdKTpudWxsfSxkaXNwb3NlOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBDb29raWUodGhpcy5rZXksT2JqZWN0Lm1lcmdlKHt9LHRoaXMub3B0aW9ucyx7ZHVyYXRpb246LTF9KSkud3JpdGUoIiIpLHRoaXN9fSk7Q29va2llLndyaXRlPWZ1bmN0aW9uKGUsdCxpKXtyZXR1cm4gbmV3IENvb2tpZShlLGkpLndyaXRlKHQpfSxDb29raWUucmVhZD1mdW5jdGlvbihlKXtyZXR1cm4gbmV3IENvb2tpZShlKS5yZWFkKCl9LENvb2tpZS5kaXNwb3NlPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIG5ldyBDb29raWUoZSx0KS5kaXNwb3NlKCl9LGZ1bmN0aW9uKGUsdCl7dmFyIGksbixyLG8scz1bXSxhPXQuY3JlYXRlRWxlbWVudCgiZGl2IiksbD1mdW5jdGlvbigpe2NsZWFyVGltZW91dChvKSxpfHwoQnJvd3Nlci5sb2FkZWQ9aT0hMCx0LnJlbW92ZUxpc3RlbmVyKCJET01Db250ZW50TG9hZGVkIixsKS5yZW1vdmVMaXN0ZW5lcigicmVhZHlzdGF0ZWNoYW5nZSIsYyksdC5maXJlRXZlbnQoImRvbXJlYWR5IiksZS5maXJlRXZlbnQoImRvbXJlYWR5IikpfSxjPWZ1bmN0aW9uKCl7Zm9yKHZhciBlPXMubGVuZ3RoO2UtLTspaWYoc1tlXSgpKXJldHVybiBsKCksITA7cmV0dXJuITF9LHU9ZnVuY3Rpb24oKXtjbGVhclRpbWVvdXQobyksYygpfHwobz1zZXRUaW1lb3V0KHUsMTApKX07dC5hZGRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsbCk7dmFyIGg9ZnVuY3Rpb24oKXt0cnl7cmV0dXJuIGEuZG9TY3JvbGwoKSwhMH1jYXRjaChlKXt9cmV0dXJuITF9O2EuZG9TY3JvbGwmJiFoKCkmJihzLnB1c2goaCkscj0hMCksdC5yZWFkeVN0YXRlJiZzLnB1c2goZnVuY3Rpb24oKXt2YXIgZT10LnJlYWR5U3RhdGU7cmV0dXJuImxvYWRlZCI9PWV8fCJjb21wbGV0ZSI9PWV9KSwib25yZWFkeXN0YXRlY2hhbmdlImluIHQ/dC5hZGRMaXN0ZW5lcigicmVhZHlzdGF0ZWNoYW5nZSIsYyk6cj0hMCxyJiZ1KCksRWxlbWVudC5FdmVudHMuZG9tcmVhZHk9e29uQWRkOmZ1bmN0aW9uKGUpe2kmJmUuY2FsbCh0aGlzKX19LEVsZW1lbnQuRXZlbnRzLmxvYWQ9e2Jhc2U6ImxvYWQiLG9uQWRkOmZ1bmN0aW9uKHQpe24mJnRoaXM9PWUmJnQuY2FsbCh0aGlzKX0sY29uZGl0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXM9PWUmJihsKCksZGVsZXRlIEVsZW1lbnQuRXZlbnRzLmxvYWQpLCEwfX0sZS5hZGRFdmVudCgibG9hZCIsZnVuY3Rpb24oKXtuPSEwfSl9KHdpbmRvdyxkb2N1bWVudCksZnVuY3Rpb24oKXt2YXIgU3dpZmY9dGhpcy5Td2lmZj1uZXcgQ2xhc3Moe0ltcGxlbWVudHM6T3B0aW9ucyxvcHRpb25zOntpZDpudWxsLGhlaWdodDoxLHdpZHRoOjEsY29udGFpbmVyOm51bGwscHJvcGVydGllczp7fSxwYXJhbXM6e3F1YWxpdHk6ImhpZ2giLGFsbG93U2NyaXB0QWNjZXNzOiJhbHdheXMiLHdNb2RlOiJ3aW5kb3ciLHN3TGl2ZUNvbm5lY3Q6ITB9LGNhbGxCYWNrczp7fSx2YXJzOnt9fSx0b0VsZW1lbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vYmplY3R9LGluaXRpYWxpemU6ZnVuY3Rpb24oZSx0KXt0aGlzLmluc3RhbmNlPSJTd2lmZl8iK1N0cmluZy51bmlxdWVJRCgpLHRoaXMuc2V0T3B0aW9ucyh0KSx0PXRoaXMub3B0aW9uczt2YXIgaT10aGlzLmlkPXQuaWR8fHRoaXMuaW5zdGFuY2Usbj1kb2N1bWVudC5pZCh0LmNvbnRhaW5lcik7U3dpZmYuQ2FsbEJhY2tzW3RoaXMuaW5zdGFuY2VdPXt9O3ZhciByPXQucGFyYW1zLG89dC52YXJzLHM9dC5jYWxsQmFja3MsYT1PYmplY3QuYXBwZW5kKHtoZWlnaHQ6dC5oZWlnaHQsd2lkdGg6dC53aWR0aH0sdC5wcm9wZXJ0aWVzKSxsPXRoaXM7Zm9yKHZhciBjIGluIHMpU3dpZmYuQ2FsbEJhY2tzW3RoaXMuaW5zdGFuY2VdW2NdPWZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBlLmFwcGx5KGwub2JqZWN0LGFyZ3VtZW50cyl9fShzW2NdKSxvW2NdPSJTd2lmZi5DYWxsQmFja3MuIit0aGlzLmluc3RhbmNlKyIuIitjO3IuZmxhc2hWYXJzPU9iamVjdC50b1F1ZXJ5U3RyaW5nKG8pLEJyb3dzZXIuaWU/KGEuY2xhc3NpZD0iY2xzaWQ6RDI3Q0RCNkUtQUU2RC0xMWNmLTk2QjgtNDQ0NTUzNTQwMDAwIixyLm1vdmllPWUpOmEudHlwZT0iYXBwbGljYXRpb24veC1zaG9ja3dhdmUtZmxhc2giLGEuZGF0YT1lO3ZhciB1PSc8b2JqZWN0IGlkPSInK2krJyInO2Zvcih2YXIgaCBpbiBhKXUrPSIgIitoKyc9IicrYVtoXSsnIic7dSs9Ij4iO2Zvcih2YXIgZCBpbiByKXJbZF0mJih1Kz0nPHBhcmFtIG5hbWU9IicrZCsnIiB2YWx1ZT0iJytyW2RdKyciIC8+Jyk7dSs9Ijwvb2JqZWN0PiIsdGhpcy5vYmplY3Q9KG4/bi5lbXB0eSgpOm5ldyBFbGVtZW50KCJkaXYiKSkuc2V0KCJodG1sIix1KS5maXJzdENoaWxkfSxyZXBsYWNlczpmdW5jdGlvbihlKXtyZXR1cm4gZT1kb2N1bWVudC5pZChlLCEwKSxlLnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKHRoaXMudG9FbGVtZW50KCksZSksdGhpc30saW5qZWN0OmZ1bmN0aW9uKGUpe3JldHVybiBkb2N1bWVudC5pZChlLCEwKS5hcHBlbmRDaGlsZCh0aGlzLnRvRWxlbWVudCgpKSx0aGlzfSxyZW1vdGU6ZnVuY3Rpb24oKXtyZXR1cm4gU3dpZmYucmVtb3RlLmFwcGx5KFN3aWZmLFt0aGlzLnRvRWxlbWVudCgpXS5hcHBlbmQoYXJndW1lbnRzKSl9fSk7U3dpZmYuQ2FsbEJhY2tzPXt9LFN3aWZmLnJlbW90ZT1mdW5jdGlvbihvYmosZm4pe3ZhciBycz1vYmouQ2FsbEZ1bmN0aW9uKCc8aW52b2tlIG5hbWU9IicrZm4rJyIgcmV0dXJudHlwZT0iamF2YXNjcmlwdCI+JytfX2ZsYXNoX19hcmd1bWVudHNUb1hNTChhcmd1bWVudHMsMikrIjwvaW52b2tlPiIpO3JldHVybiBldmFsKHJzKX19KCk7",
                "headers": {
                    "Accept-Ranges": "bytes",
                    "Last-Modified": "Fri, 07 Nov 2014 07:45:00 GMT",
                    "Content-Length": "89916",
                    "Date": "Fri, 07 Nov 2014 07:45:01 GMT",
                    "Content-Type": "application/javascript"
                },
                "cookies": [],
                "mimeType": "script",
                "host": "localhost",
                "protocol": "http",
                "port": 9999,
                "inScope": false,
                "toolFlag": 16962,
                "referenceID": 0,
                "messageType": "response"
            },
            "messageType": "requestResponse"
        }
    ],
    "inScope": true,
    "messageType": "scanIssue"
}