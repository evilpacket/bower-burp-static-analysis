{
    "url": "http://localhost:9999/dysfunc/opentok/opentok-webrtc.min.js",
    "host": "localhost",
    "port": 9999,
    "protocol": "http",
    "name": "Open redirection (DOM-based)",
    "issueType": 5243152,
    "severity": "Low",
    "confidence": "Firm",
    "issueBackground": "DOM-based open redirection vulnerabilities arise when a client-side script within an application's response reads data from a controllable part of the DOM (for example, the URL), and writes this data into the target of a redirection in an unsafe way. An attacker may be able to use the vulnerability to construct a URL which, if visited by another application user, will cause a redirection to an arbitrary external domain. This behavior can be leveraged to facilitate phishing attacks against users of the application. The ability to use an authentic application URL, targeting the correct domain with a valid SSL certificate (if SSL is used) lends credibility to the phishing attack because many users, even if they verify these features, will not notice the subsequent redirection to a different domain.<br><br><b>Note:</b> If an attacker is able to control the start of the string that is passed to the redirection API, then it may be possible to escalate this vulnerability into a JavaScript injection attack, by using a URL with the javascript: pseudo-protocol to execute arbitrary script code when the URL is processed by the browser.",
    "remediationBackground": "Static analysis of code to identify vulnerabilities of this kind may lead to false positives that are not actually exploitable. You should review the highlighted code and related execution paths to determine whether the application is indeed vulnerable, or whether mitigations are in place that would prevent exploitation.<br><br>The most effective way to avoid DOM-based open redirection vulnerabilities is not to dynamically set redirection targets using data that originated from any untrusted source. If the desired functionality of the application means that this behavior is unavoidable, then defenses must be implemented within the client-side code to prevent malicious data from introducing an arbitrary URL as a redirection target. In general, this is best achieved by using a whitelist of URLs that are permitted redirection targets, and strictly validating the target against this list before performing the redirection.",
    "issueDetail": "The application may be vulnerable to DOM-based open redirection. Data is read from <b>document.location.href</b> and written to <b>document.location.href</b> via the following statement:<ul><li>document.location.href=document.location.href.replace(\"#\",\"\")</li></ul>",
    "requestResponses": [
        {
            "request": {
                "host": "localhost",
                "port": 9999,
                "protocol": "http",
                "url": "http://localhost:9999/dysfunc/opentok/opentok-webrtc.min.js",
                "path": "/dysfunc/opentok/opentok-webrtc.min.js",
                "httpVersion": "HTTP/1.1",
                "method": "GET",
                "headers": {
                    "Host": "localhost:9999"
                },
                "body": "",
                "raw": "R0VUIC9keXNmdW5jL29wZW50b2svb3BlbnRvay13ZWJydGMubWluLmpzIEhUVFAvMS4xDQpIb3N0OiBsb2NhbGhvc3Q6OTk5OQ0KDQo=",
                "inScope": true,
                "toolFlag": 16962,
                "referenceID": 0,
                "messageType": "request"
            },
            "response": {
                "statusCode": 200,
                "raw": "SFRUUC8xLjEgMjAwIE9LDQpDb250ZW50LUxlbmd0aDogMTQxNzA5DQpBY2NlcHQtUmFuZ2VzOiBieXRlcw0KQ29udGVudC1UeXBlOiBhcHBsaWNhdGlvbi9qYXZhc2NyaXB0DQpEYXRlOiBGcmksIDA3IE5vdiAyMDE0IDIxOjI0OjQ2IEdNVA0KTGFzdC1Nb2RpZmllZDogRnJpLCAwNyBOb3YgMjAxNCAyMToyNDo0NiBHTVQNCg0KLyoKICBPcGVuVG9rIEphdmFTY3JpcHQgTGlicmFyeSB2Mi4wLjE2CiBodHRwOi8vd3d3LnRva2JveC5jb20vCgogQ29weXJpZ2h0IChjKSAyMDEzIFRva0JveCwgSW5jLgoKIERhdGU6IERlY2VtYmVyIDEyIDEwOjUyOjE3IDIwMTMKICBDb21tb24gSlMgSGVscGVycyBvbiBPcGVuVG9rIDAuMS4wIDQ5OTdmZTIgbWFzdGVyCiBodHRwOi8vd3d3LnRva2JveC5jb20vCgogQ29weXJpZ2h0IChjKSAyMDEzIFRva0JveCwgSW5jLgoKIERhdGU6IE9jdG9iZXIgMDMgMTI6MjM6MDkgMjAxMwoKKi8KKGZ1bmN0aW9uKGcpe2cuT1R8fChnLk9UPXt9KTtPVC5wcm9wZXJ0aWVzPXt2ZXJzaW9uOiJ2Mi4wLjE2IixidWlsZDoiMzJhODJiZiIsZGVidWc6ImZhbHNlIix3ZWJzaXRlVVJMOiJodHRwOi8vd3d3LnRva2JveC5jb20iLGNkblVSTDoiaHR0cDovL3N0YXRpYy5vcGVudG9rLmNvbSIsbG9nZ2luZ1VSTDoiaHR0cDovL2hsZy50b2tib3guY29tL3Byb2QiLGFwaVVSTDoiaHR0cDovL2FudmlsLm9wZW50b2suY29tIixtZXNzYWdpbmdQcm90b2NvbDoid3NzIixtZXNzYWdpbmdQb3J0OjQ0MyxzdXBwb3J0U1NMOiJ0cnVlIixjZG5VUkxTU0w6Imh0dHBzOi8vc3d3dy50b2tib3guY29tIixsb2dnaW5nVVJMU1NMOiJodHRwczovL2hsZy50b2tib3guY29tL3Byb2QiLAphcGlVUkxTU0w6Imh0dHBzOi8vYW52aWwub3BlbnRvay5jb20ifX0pKHdpbmRvdyk7CiFmdW5jdGlvbihnLGIpe3ZhciBmPWZ1bmN0aW9uKGEpe3JldHVybiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChhKX0sYT1nLk9USGVscGVycztnLk9USGVscGVycz1mO2Yubm9Db25mbGljdD1mdW5jdGlvbigpe2Yubm9Db25mbGljdD1mdW5jdGlvbigpe3JldHVybiBmfTtnLk9USGVscGVycz1hO3JldHVybiBmfTtmLmlzRW1wdHk9ZnVuY3Rpb24oYSl7aWYobnVsbD09PWF8fGE9PT1iKXJldHVybiEwO2lmKEFycmF5LmlzQXJyYXkoYSl8fCJzdHJpbmciPT09dHlwZW9mIGEpcmV0dXJuIDA9PT1hLmxlbmd0aDtmb3IodmFyIGMgaW4gYSlpZihhLmhhc093blByb3BlcnR5KGMpKXJldHVybiExO3JldHVybiEwfTtmLmlzTm9uZT1mdW5jdGlvbihhKXtyZXR1cm4gYT09PWJ8fG51bGw9PT1hfTtmLmlzT2JqZWN0PWZ1bmN0aW9uKGEpe3JldHVybiBhPT09T2JqZWN0KGEpfTtmLmlzRnVuY3Rpb249ZnVuY3Rpb24oYSl7cmV0dXJuImZ1bmN0aW9uIj09PXR5cGVvZiBhfTtmLmV4dGVuZD1mdW5jdGlvbigpe3ZhciBhPQpBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpLGI9YS5zaGlmdCgpO2EuZm9yRWFjaChmdW5jdGlvbihhKXtmb3IodmFyIGMgaW4gYSliW2NdPWFbY119KTtyZXR1cm4gYn07Zi5kZWZhdWx0cz1mdW5jdGlvbigpe3ZhciBhPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyksYj1hLnNoaWZ0KCk7YS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2Zvcih2YXIgYyBpbiBhKXZvaWQgMD09PWJbY10mJihiW2NdPWFbY10pfSk7cmV0dXJuIGJ9O2YuY2xvbmU9ZnVuY3Rpb24oYSl7cmV0dXJuIWYuaXNPYmplY3QoYSk/YTpBcnJheS5pc0FycmF5KGEpP2Euc2xpY2UoKTpmLmV4dGVuZCh7fSxhKX07Zi5ub29wPWZ1bmN0aW9uKCl7fTtmLnN1cHBvcnRzV2ViU29ja2V0cz1mdW5jdGlvbigpe3JldHVybiJXZWJTb2NrZXQiaW4gZ307Zi5ub3c9ZnVuY3Rpb24oKXt2YXIgYT1nLnBlcmZvcm1hbmNlfHx7fSxiLGM9YS5ub3d8fGEubW96Tm93fHxhLm1zTm93fHxhLm9Ob3d8fAphLndlYmtpdE5vdztyZXR1cm4gYz8oYz1jLmJpbmQoYSksYj1hLnRpbWluZy5uYXZpZ2F0aW9uU3RhcnQsZnVuY3Rpb24oKXtyZXR1cm4gYitjKCl9KTpmdW5jdGlvbigpe3JldHVybihuZXcgRGF0ZSkuZ2V0VGltZSgpfX0oKTtmLmJyb3dzZXI9ZnVuY3Rpb24oKXt2YXIgYT1nLm5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKSxiLGM9IlVua25vd24iOy0xPGEuaW5kZXhPZigiZmlyZWZveCIpJiYoYz0iRmlyZWZveCIpOy0xPGEuaW5kZXhPZigib3BlcmEiKT9jPSJPcGVyYSI6LTE8YS5pbmRleE9mKCJtc2llIik/Yz0iSUUiOi0xPGEuaW5kZXhPZigiY2hyb21lIikmJihjPSJDaHJvbWUiKTtpZigoYj1nLm5hdmlnYXRvci52ZW5kb3IpJiYtMTxiLnRvTG93ZXJDYXNlKCkuaW5kZXhPZigiYXBwbGUiKSljPSJTYWZhcmkiO2E9bnVsbDtmLmJyb3dzZXI9ZnVuY3Rpb24oKXtyZXR1cm4gY307cmV0dXJuIGN9O2YuY2FuRGVmaW5lUHJvcGVydHk9ITA7dHJ5e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh7fSwKIngiLHt9KX1jYXRjaChkKXtmLmNhbkRlZmluZVByb3BlcnR5PSExfWYuZGVmaW5lR2V0dGVycz1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9e307dm9pZCAwPT09YyYmKGM9ITEpO2Zvcih2YXIgaCBpbiBiKWRbaF09e2dldDpiW2hdLGVudW1lcmFibGU6Y307T2JqZWN0LmRlZmluZVByb3BlcnRpZXMoYSxkKX07T2JqZWN0LmNyZWF0ZXx8KE9iamVjdC5jcmVhdGU9ZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYigpe31pZigxPGFyZ3VtZW50cy5sZW5ndGgpdGhyb3cgRXJyb3IoIk9iamVjdC5jcmVhdGUgaW1wbGVtZW50YXRpb24gb25seSBhY2NlcHRzIHRoZSBmaXJzdCBwYXJhbWV0ZXIuIik7Yi5wcm90b3R5cGU9YTtyZXR1cm4gbmV3IGJ9KTtmLnNldENvb2tpZT1mdW5jdGlvbihhLGIpe3RyeXtsb2NhbFN0b3JhZ2Uuc2V0SXRlbShhLGIpfWNhdGNoKGMpe3ZhciBkPW5ldyBEYXRlO2Quc2V0VGltZShkLmdldFRpbWUoKSszMTUzNkU2KTtkPSI7IGV4cGlyZXM9IitkLnRvR01UU3RyaW5nKCk7CmRvY3VtZW50LmNvb2tpZT1hKyI9IitiK2QrIjsgcGF0aD0vIn19O2YuZ2V0Q29va2llPWZ1bmN0aW9uKGEpe3ZhciBiO3RyeXtyZXR1cm4gYj1sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgib3BlbnRva19jbGllbnRfaWQiKX1jYXRjaChjKXtmb3IodmFyIGE9YSsiPSIsZD1kb2N1bWVudC5jb29raWUuc3BsaXQoIjsiKSxoPTA7aDxkLmxlbmd0aDtoKyspe2Zvcih2YXIgZT1kW2hdO2UuY2hhckF0KDApPT0iICI7KWU9ZS5zdWJzdHJpbmcoMSxlLmxlbmd0aCk7ZS5pbmRleE9mKGEpPT09MCYmKGI9ZS5zdWJzdHJpbmcoYS5sZW5ndGgsZS5sZW5ndGgpKX1pZihiKXJldHVybiBifXJldHVybiBudWxsfTtmLmludmVydD1mdW5jdGlvbihhKXt2YXIgYj17fSxjO2ZvcihjIGluIGEpYS5oYXNPd25Qcm9wZXJ0eShjKSYmKGJbYVtjXV09Yyk7cmV0dXJuIGJ9O3ZhciBjPXtlc2NhcGU6eyImIjoiJmFtcDsiLCI8IjoiJmx0OyIsIj4iOiImZ3Q7IiwnIic6IiZxdW90OyIsIiciOiImI3gyNzsiLCIvIjoiJiN4MkY7In19OwpjLnVuZXNjYXBlPWYuaW52ZXJ0KGMuZXNjYXBlKTt2YXIgZT17ZXNjYXBlOlJlZ0V4cCgiWyIrT2JqZWN0LmtleXMoYy5lc2NhcGUpLmpvaW4oIiIpKyJdIiwiZyIpLHVuZXNjYXBlOlJlZ0V4cCgiKCIrT2JqZWN0LmtleXMoYy51bmVzY2FwZSkuam9pbigifCIpKyIpIiwiZyIpfTtbImVzY2FwZSIsInVuZXNjYXBlIl0uZm9yRWFjaChmdW5jdGlvbihhKXtmW2FdPWZ1bmN0aW9uKGQpe3JldHVybiBkPT09bnVsbHx8ZD09PWI/IiI6KCIiK2QpLnJlcGxhY2UoZVthXSxmdW5jdGlvbihiKXtyZXR1cm4gY1thXVtiXX0pfX0pO2YudGVtcGxhdGVTZXR0aW5ncz17ZXZhbHVhdGU6LzwlKFtcc1xTXSs/KSU+L2csaW50ZXJwb2xhdGU6LzwlPShbXHNcU10rPyklPi9nLGVzY2FwZTovPCUtKFtcc1xTXSs/KSU+L2d9O3ZhciBoPS8oLileLyxpPXsiJyI6IiciLCJcXCI6IlxcIiwiXHIiOiJyIiwiXG4iOiJuIiwiXHQiOiJ0IiwiXHUyMDI4IjoidTIwMjgiLCJcdTIwMjkiOiJ1MjAyOSJ9LGs9Ci9cXHwnfFxyfFxufFx0fFx1MjAyOHxcdTIwMjkvZztmLnRlbXBsYXRlPWZ1bmN0aW9uKGEsYixjKXt2YXIgZCxjPWYuZGVmYXVsdHMoe30sYyxmLnRlbXBsYXRlU2V0dGluZ3MpLGU9UmVnRXhwKFsoYy5lc2NhcGV8fGgpLnNvdXJjZSwoYy5pbnRlcnBvbGF0ZXx8aCkuc291cmNlLChjLmV2YWx1YXRlfHxoKS5zb3VyY2VdLmpvaW4oInwiKSsifCQiLCJnIiksZz0wLHE9Il9fcCs9JyI7YS5yZXBsYWNlKGUsZnVuY3Rpb24oYixjLGQsaCxlKXtxPXErYS5zbGljZShnLGUpLnJlcGxhY2UoayxmdW5jdGlvbihhKXtyZXR1cm4iXFwiK2lbYV19KTtjJiYocT1xKygiJytcbigoX190PSgiK2MrIikpPT1udWxsPycnOk9USGVscGVycy5lc2NhcGUoX190KSkrXG4nIikpO2QmJihxPXErKCInK1xuKChfX3Q9KCIrZCsiKSk9PW51bGw/Jyc6X190KStcbiciKSk7aCYmKHE9cSsoIic7XG4iK2grIlxuX19wKz0nIikpO2c9ZStiLmxlbmd0aDtyZXR1cm4gYn0pO3E9cSsiJztcbiI7Yy52YXJpYWJsZXx8CihxPSJ3aXRoKG9ianx8e30pe1xuIitxKyJ9XG4iKTtxPSJ2YXIgX190LF9fcD0nJyxfX2o9QXJyYXkucHJvdG90eXBlLmpvaW4scHJpbnQ9ZnVuY3Rpb24oKXtfX3ArPV9fai5jYWxsKGFyZ3VtZW50cywnJyk7fTtcbiIrcSsicmV0dXJuIF9fcDtcbiI7dHJ5e2Q9bmV3IEZ1bmN0aW9uKGMudmFyaWFibGV8fCJvYmoiLHEpfWNhdGNoKG8pe28uc291cmNlPXE7dGhyb3cgbzt9aWYoYilyZXR1cm4gZChiKTtiPWZ1bmN0aW9uKGEpe3JldHVybiBkLmNhbGwodGhpcyxhKX07Yi5zb3VyY2U9ImZ1bmN0aW9uKCIrKGMudmFyaWFibGV8fCJvYmoiKSsiKXtcbiIrcSsifSI7cmV0dXJuIGJ9fSh3aW5kb3cpOwooZnVuY3Rpb24oZyxiKXtiLnN0YXRhYmxlPWZ1bmN0aW9uKGYsYSxkLGMsZSl7dmFyIGgsaT1kO2YuaXM9ZnVuY3Rpb24oKXtyZXR1cm4tMSE9PUFycmF5LnByb3RvdHlwZS5pbmRleE9mLmNhbGwoYXJndW1lbnRzLGkpfTtmLmlzTm90PWZ1bmN0aW9uKCl7cmV0dXJuLTE9PT1BcnJheS5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKGFyZ3VtZW50cyxpKX07T2JqZWN0LmRlZmluZVByb3BlcnRpZXMoZix7c3RhdGU6e2dldDpmdW5jdGlvbigpe3JldHVybiBpfX0scHJldmlvdXNTdGF0ZTp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGh9fX0pO3JldHVybiBmdW5jdGlvbihkKXtpIT09ZCYmKC0xPT09YS5pbmRleE9mKGQpP2UmJmIuaXNGdW5jdGlvbihlKSYmZSgiaW52YWxpZFN0YXRlIixkKTooaD1pLGk9ZCxjJiZiLmlzRnVuY3Rpb24oYykmJmMoZCxoKSkpfX19KSh3aW5kb3csd2luZG93Lk9USGVscGVycyk7CihmdW5jdGlvbihnLGIpe2Z1bmN0aW9uIGYoYSxiKXt2YXIgYz1ifHwwLGQ9ajtyZXR1cm4gZFthW2MrK11dK2RbYVtjKytdXStkW2FbYysrXV0rZFthW2MrK11dKyItIitkW2FbYysrXV0rZFthW2MrK11dKyItIitkW2FbYysrXV0rZFthW2MrK11dKyItIitkW2FbYysrXV0rZFthW2MrK11dKyItIitkW2FbYysrXV0rZFthW2MrK11dK2RbYVtjKytdXStkW2FbYysrXV0rZFthW2MrK11dK2RbYVtjKytdXX1mdW5jdGlvbiBhKGEsYyxiKXtiPWMmJmJ8fDA7InN0cmluZyI9PXR5cGVvZiBhJiYoYz0iYmluYXJ5Ij09YT9uZXcgaygxNik6bnVsbCxhPW51bGwpO2E9YXx8e307YT1hLnJhbmRvbXx8KGEucm5nfHxpKSgpO2FbNl09YVs2XSYxNXw2NDthWzhdPWFbOF0mNjN8MTI4O2lmKGMpZm9yKHZhciBkPTA7MTY+ZDtkKyspY1tiK2RdPWFbZF07cmV0dXJuIGN8fGYoYSl9dmFyIGQsYyxlPUFycmF5KDE2KTtkPWZ1bmN0aW9uKCl7Zm9yKHZhciBhLGM9MCxjPTA7MTY+YztjKyspMD09PShjJgozKSYmKGE9NDI5NDk2NzI5NipNYXRoLnJhbmRvbSgpKSxlW2NdPWE+Pj4oKGMmMyk8PDMpJjI1NTtyZXR1cm4gZX07aWYoZy5jcnlwdG8mJmNyeXB0by5nZXRSYW5kb21WYWx1ZXMpe3ZhciBoPW5ldyBVaW50MzJBcnJheSg0KTtjPWZ1bmN0aW9uKCl7Y3J5cHRvLmdldFJhbmRvbVZhbHVlcyhoKTtmb3IodmFyIGE9MDsxNj5hO2ErKyllW2FdPWhbYT4+Ml0+Pj44KihhJjMpJjI1NTtyZXR1cm4gZX19Zm9yKHZhciBpPWN8fGQsaz0iZnVuY3Rpb24iPT10eXBlb2YgQnVmZmVyP0J1ZmZlcjpBcnJheSxqPVtdLGw9e30sbT0wOzI1Nj5tO20rKylqW21dPShtKzI1NikudG9TdHJpbmcoMTYpLnN1YnN0cigxKSxsW2pbbV1dPW07YS52ND1hO2EucGFyc2U9ZnVuY3Rpb24oYSxjLGIpe3ZhciBkPWMmJmJ8fDAsaD0wLGM9Y3x8W107Zm9yKGEudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9bMC05YS1mXXsyfS9nLGZ1bmN0aW9uKGEpezE2PmgmJihjW2QraCsrXT1sW2FdKX0pOzE2Pmg7KWNbZCtoKytdPQowO3JldHVybiBjfTthLnVucGFyc2U9ZjthLkJ1ZmZlckNsYXNzPWs7YS5tYXRoUk5HPWQ7YS53aGF0d2dSTkc9YztiLnV1aWQ9YX0pKHdpbmRvdyx3aW5kb3cuT1RIZWxwZXJzKTsKKGZ1bmN0aW9uKGcsYil7ZnVuY3Rpb24gZihhKXtPYmplY3QuZGVmaW5lUHJvcGVydHkoYS5wcm90b3R5cGUsImZpcnN0RWxlbWVudENoaWxkIix7Z2V0OmZ1bmN0aW9uKCl7dmFyIGE7Zm9yKGE9dGhpcy5maXJzdENoaWxkO2EmJjEhPWEubm9kZVR5cGU7KWE9YS5uZXh0U2libGluZztyZXR1cm4gYX19KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoYS5wcm90b3R5cGUsImxhc3RFbGVtZW50Q2hpbGQiLHtnZXQ6ZnVuY3Rpb24oKXt2YXIgYTtmb3IoYT10aGlzLmxhc3RDaGlsZDthJiYxIT1hLm5vZGVUeXBlOylhPWEucHJldmlvdXNTaWJsaW5nO3JldHVybiBhfX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShhLnByb3RvdHlwZSwibmV4dEVsZW1lbnRTaWJsaW5nIix7Z2V0OmZ1bmN0aW9uKCl7Zm9yKHZhciBhPXRoaXM7IWIuaXNOb25lKGE9YS5uZXh0U2libGluZykmJjEhPWEubm9kZVR5cGU7KTtyZXR1cm4gYX19KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoYS5wcm90b3R5cGUsInByZXZpb3VzRWxlbWVudFNpYmxpbmciLAp7Z2V0OmZ1bmN0aW9uKCl7Zm9yKHZhciBhPXRoaXM7IWIuaXNOb25lKGE9YS5wcmV2aW91c1NpYmxpbmcpJiYxIT1hLm5vZGVUeXBlOyk7cmV0dXJuIGF9fSl9Yi5wYXJzZVhNTD1mdW5jdGlvbihhKXt2YXIgYjtnLkRPTVBhcnNlcj9iPShuZXcgRE9NUGFyc2VyKS5wYXJzZUZyb21TdHJpbmcoYSwidGV4dC94bWwiKTooYj1uZXcgQWN0aXZlWE9iamVjdCgiTWljcm9zb2Z0LlhNTERPTSIpLGIuYXN5bmM9ImZhbHNlIixiLmxvYWRYTUwoYSksZihiKSk7YT1iLmRvY3VtZW50RWxlbWVudDtyZXR1cm4hYXx8IWEubm9kZU5hbWV8fCJwYXJzZXJlcnJvciI9PT1hLm5vZGVOYW1lP251bGw6Yn19KSh3aW5kb3csd2luZG93Lk9USGVscGVycyk7CihmdW5jdGlvbihnLGIpe2IudXNlTG9nSGVscGVycz1mdW5jdGlvbihiKXtmdW5jdGlvbiBhKGEsYyxrKXtyZXR1cm4gZnVuY3Rpb24oKXtpZihiLnNob3VsZExvZyhjKSl7dmFyIGo9Zy5jb25zb2xlO2lmKGomJmpbYV0paWYoalthXS5hcHBseXx8RnVuY3Rpb24ucHJvdG90eXBlLmJpbmQpalthXS5hcHBseXx8KGpbYV09RnVuY3Rpb24ucHJvdG90eXBlLmJpbmQuY2FsbChqW2FdLGopKSxqW2FdLmFwcGx5KGosYXJndW1lbnRzKTtlbHNlIGpbYV0oQXJyYXkucHJvdG90eXBlLnNsaWNlLmFwcGx5KGFyZ3VtZW50cykuam9pbigiICIpKTtlbHNlIGsmJmsuYXBwbHkoYixhcmd1bWVudHMpO2lmKGo9YXJndW1lbnRzKXt2YXIgbDt0cnl7bD1KU09OLnN0cmluZ2lmeShqKX1jYXRjaChtKXtsPWoudG9TdHJpbmcoKX0yPj1sLmxlbmd0aHx8ZS5wdXNoKFthLGQoKSxsXSl9fX19ZnVuY3Rpb24gZCgpe3ZhciBhPW5ldyBEYXRlO3JldHVybiBhLnRvTG9jYWxlVGltZVN0cmluZygpK2EuZ2V0TWlsbGlzZWNvbmRzKCl9CmIuREVCVUc9NTtiLkxPRz00O2IuSU5GTz0zO2IuV0FSTj0yO2IuRVJST1I9MTtiLk5PTkU9MDt2YXIgYz1iLk5PTkUsZT1bXTtiLmxvZz1hKCJsb2ciLGIuTE9HKTtiLmRlYnVnPWEoImRlYnVnIixiLkRFQlVHLGIubG9nKTtiLmluZm89YSgiaW5mbyIsYi5JTkZPLGIubG9nKTtiLndhcm49YSgid2FybiIsYi5XQVJOLGIubG9nKTtiLmVycm9yPWEoImVycm9yIixiLkVSUk9SLGIubG9nKTtiLnNldExvZ0xldmVsPWZ1bmN0aW9uKGEpe2M9Im51bWJlciI9PT10eXBlb2YgYT9hOjA7Yi5kZWJ1ZygiVEIuc2V0TG9nTGV2ZWwoIitjKyIpIik7cmV0dXJuIGN9O2IuZ2V0TG9ncz1mdW5jdGlvbigpe3JldHVybiBlfTtiLnNob3VsZExvZz1mdW5jdGlvbihhKXtyZXR1cm4gYz49YX19O2IudXNlTG9nSGVscGVycyhiKTtiLnNldExvZ0xldmVsKGIuRVJST1IpfSkod2luZG93LHdpbmRvdy5PVEhlbHBlcnMpOwooZnVuY3Rpb24oZyxiLGYpe2IuY2FzdFRvQm9vbGVhbj1mdW5jdGlvbihhLGIpe3JldHVybiBhPT09Zj9iOiJ0cnVlIj09PWF8fCEwPT09YX07Yi5yb3VuZEZsb2F0PWZ1bmN0aW9uKGEsYil7cmV0dXJuIHBhcnNlSW50KE1hdGgucm91bmQoYSpNYXRoLnBvdygxMCxiKSksMTApL01hdGgucG93KDEwLGIpfX0pKHdpbmRvdyx3aW5kb3cuT1RIZWxwZXJzKTsKKGZ1bmN0aW9uKGcsYil7dmFyIGY9W10sYT0iT1RIZWxwZXJzLiIrYi51dWlkLnY0KCkrIi56ZXJvLXRpbWVvdXQiO2cuYWRkRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsZnVuY3Rpb24oYil7Yi5zb3VyY2U9PWcmJmIuZGF0YT09YSYmKGIuc3RvcFByb3BhZ2F0aW9uKCksMDxmLmxlbmd0aCYmKGI9Zi5zaGlmdCgpLGIuc2hpZnQoKS5hcHBseShudWxsLGIpKSl9LCEwKTtiLmNhbGxBc3luYz1mdW5jdGlvbigpe2YucHVzaChBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpKTtnLnBvc3RNZXNzYWdlKGEsIioiKX07Yi5jcmVhdGVBc3luY0hhbmRsZXI9ZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGM9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKTtiLmNhbGxBc3luYyhmdW5jdGlvbigpe2EuYXBwbHkobnVsbCxjKX0pfX19KSh3aW5kb3csd2luZG93Lk9USGVscGVycyk7CihmdW5jdGlvbihnLGIsZil7Yi5ldmVudGluZz1mdW5jdGlvbihhLGQpe2Z1bmN0aW9uIGMoYSxjLGQpe3ZhciBlPWhbYV07aWYoZSYmMCE9PWUubGVuZ3RoKXt2YXIgaT1lLmxlbmd0aDtlLmZvckVhY2goZnVuY3Rpb24oZSl7ZnVuY3Rpb24gZihhKXtyZXR1cm4gYS5jb250ZXh0PT09ZS5jb250ZXh0JiZhLmhhbmRsZXI9PT1lLmhhbmRsZXJ9Yi5jYWxsQXN5bmMoZnVuY3Rpb24oKXt0cnl7aFthXSYmaFthXS5zb21lKGYpJiYoZS5jbG9zdXJlfHxlLmhhbmRsZXIpLmFwcGx5KGUuY29udGV4dHx8bnVsbCxjKX1maW5hbGx5e2ktLSwwPT09aSYmZCYmZC5hcHBseShudWxsLGMuc2xpY2UoKSl9fSl9KX19ZnVuY3Rpb24gZShhLGIpe3ZhciBjPWhbYV07YyYmMCE9PWMubGVuZ3RoJiZjLmZvckVhY2goZnVuY3Rpb24oYSl7KGEuY2xvc3VyZXx8YS5oYW5kbGVyKS5hcHBseShhLmNvbnRleHR8fG51bGwsYil9KX12YXIgaD17fSxpPSEwPT09ZD9lOmMsZj1mdW5jdGlvbihhLGIpe2hbYV0mJgooYj9oW2FdPWhbYV0uZmlsdGVyKGZ1bmN0aW9uKGEpe3JldHVybiBhLmNvbnRleHQhPT1ifSk6ZGVsZXRlIGhbYV0pfSxnPWZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPXtoYW5kbGVyOmJ9O2MmJihlLmNvbnRleHQ9Yyk7ZCYmKGUuY2xvc3VyZT1kKTthLmZvckVhY2goZnVuY3Rpb24oYSl7aFthXXx8KGhbYV09W10pO2hbYV0ucHVzaChlKX0pfS5iaW5kKGEpLGw9ZnVuY3Rpb24oYSxiLGMpe2Z1bmN0aW9uIGQoYSl7cmV0dXJuIShhLmhhbmRsZXI9PT1iJiZhLmNvbnRleHQ9PT1jKX1hLmZvckVhY2goZnVuY3Rpb24oYSl7aFthXSYmKGhbYV09aFthXS5maWx0ZXIoZCksMD09PWhbYV0ubGVuZ3RoJiZkZWxldGUgaFthXSl9KX0uYmluZChhKTthLmRpc3BhdGNoRXZlbnQ9ZnVuY3Rpb24oYSxjKXtpZighYS50eXBlKXRocm93IGIuZXJyb3IoIk9USGVscGVycy5FdmVudGluZy5kaXNwYXRjaEV2ZW50OiBFdmVudCBoYXMgbm8gdHlwZSIpLGIuZXJyb3IoYSksRXJyb3IoIk9USGVscGVycy5FdmVudGluZy5kaXNwYXRjaEV2ZW50OiBFdmVudCBoYXMgbm8gdHlwZSIpOwphLnRhcmdldHx8KGEudGFyZ2V0PXRoaXMpO2lmKCFoW2EudHlwZV18fDA9PT1oW2EudHlwZV0ubGVuZ3RoKXt2YXIgZD1bYV07YyYmYy5hcHBseShudWxsLGQuc2xpY2UoKSl9ZWxzZSByZXR1cm4gaShhLnR5cGUsW2FdLGMpLHRoaXN9O2EudHJpZ2dlcj1mdW5jdGlvbihhKXtpZihoW2FdJiYwIT09aFthXS5sZW5ndGgpe3ZhciBiPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7Yi5zaGlmdCgpO2koYSxiKTtyZXR1cm4gdGhpc319O2Eub249ZnVuY3Rpb24oYSxiLGMpe2lmKCJzdHJpbmciPT09dHlwZW9mIGEmJmIpZyhhLnNwbGl0KCIgIiksYixjKTtlbHNlIGZvcih2YXIgZCBpbiBhKWEuaGFzT3duUHJvcGVydHkoZCkmJmcoW2RdLGFbZF0sYik7cmV0dXJuIHRoaXN9O2Eub2ZmPWZ1bmN0aW9uKGEsYyxkKXtpZigic3RyaW5nIj09PXR5cGVvZiBhKWMmJmIuaXNGdW5jdGlvbihjKT9sKGEuc3BsaXQoIiAiKSxjLGQpOmEuc3BsaXQoIiAiKS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2YoYSwKYyl9LHRoaXMpO2Vsc2UgaWYoYSlmb3IodmFyIGUgaW4gYSlhLmhhc093blByb3BlcnR5KGUpJiZsKFtlXSxhW2VdLGMpO2Vsc2UgaD17fTtyZXR1cm4gdGhpc307YS5vbmNlPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1hLnNwbGl0KCIgIiksYT1mdW5jdGlvbigpe3ZhciBhPWIuYXBwbHkoY3x8bnVsbCxhcmd1bWVudHMpO2woZCxiLGMpO3JldHVybiBhfS5iaW5kKHRoaXMpO2coZCxiLGMsYSk7cmV0dXJuIHRoaXN9O2EuYWRkRXZlbnRMaXN0ZW5lcj1mdW5jdGlvbihhLGIsYyl7ZyhbYV0sYixjKX07YS5yZW1vdmVFdmVudExpc3RlbmVyPWZ1bmN0aW9uKGEsYixjKXtsKFthXSxiLGMpfTtyZXR1cm4gYX07Yi5ldmVudGluZy5FdmVudD1mdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihhLGQpe3RoaXMudHlwZT1hO3RoaXMuY2FuY2VsYWJsZT1kIT09Zj9kOiEwO3ZhciBjPSExLGU9bnVsbDt0aGlzLnByZXZlbnREZWZhdWx0PWZ1bmN0aW9uKCl7dGhpcy5jYW5jZWxhYmxlP2M9ITA6Yi53YXJuKCJFdmVudC5wcmV2ZW50RGVmYXVsdCA6OiBUcnlpbmcgdG8gcHJldmVudERlZmF1bHQgb24gYW4gRXZlbnQgdGhhdCBpc24ndCBjYW5jZWxhYmxlIil9Owp0aGlzLmlzRGVmYXVsdFByZXZlbnRlZD1mdW5jdGlvbigpe3JldHVybiBjfTtiLmNhbkRlZmluZVByb3BlcnR5JiZPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywidGFyZ2V0Iix7c2V0OmZ1bmN0aW9uKGEpe2U9YX0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGV9fSl9fX0pKHdpbmRvdyx3aW5kb3cuT1RIZWxwZXJzKTsKKGZ1bmN0aW9uKGcsYil7ZnVuY3Rpb24gZihhKXtmb3IodmFyIGIgaW4gYSlpZihhLmhhc093blByb3BlcnR5KGIpKXJldHVybiEwO3JldHVybiExfWIuc3VwcG9ydHNDbGFzc0xpc3Q9ZnVuY3Rpb24oKXt2YXIgYT10eXBlb2YoInVuZGVmaW5lZCIhPT1kb2N1bWVudCkmJiJjbGFzc0xpc3QiaW4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYSIpO2Iuc3VwcG9ydHNDbGFzc0xpc3Q9ZnVuY3Rpb24oKXtyZXR1cm4gYX07cmV0dXJuIGF9O2IucmVtb3ZlRWxlbWVudD1mdW5jdGlvbihhKXthJiZhLnBhcmVudE5vZGUmJmEucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChhKX07Yi5yZW1vdmVFbGVtZW50QnlJZD1mdW5jdGlvbihhKXt0aGlzLnJlbW92ZUVsZW1lbnQoYihhKSl9O2IucmVtb3ZlRWxlbWVudHNCeVR5cGU9ZnVuY3Rpb24oYSxiKXtpZihhKWZvcih2YXIgYz1hLmdldEVsZW1lbnRzQnlUYWdOYW1lKGIpO2MubGVuZ3RoOylhLnJlbW92ZUNoaWxkKGNbMF0pfTtiLmVtcHR5RWxlbWVudD0KZnVuY3Rpb24oYSl7Zm9yKDthLmZpcnN0Q2hpbGQ7KWEucmVtb3ZlQ2hpbGQoYS5maXJzdENoaWxkKTtyZXR1cm4gYX07Yi5jcmVhdGVFbGVtZW50PWZ1bmN0aW9uKGEsYixjKXthPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoYSk7aWYoYilmb3IodmFyIGUgaW4gYilpZigib2JqZWN0Ij09PXR5cGVvZiBiW2VdKXthW2VdfHwoYVtlXT17fSk7dmFyIGg9YltlXSxpO2ZvcihpIGluIGgpYVtlXVtpXT1oW2ldfWVsc2UiY2xhc3NOYW1lIj09PWU/YS5jbGFzc05hbWU9YltlXTphLnNldEF0dHJpYnV0ZShlLGJbZV0pO2MmJihhLmlubmVySFRNTD1jKTtyZXR1cm4gYX07Yi5jcmVhdGVCdXR0b249ZnVuY3Rpb24oYSxkLGMpe2E9Yi5jcmVhdGVFbGVtZW50KCJidXR0b24iLGQsYSk7aWYoYyl7Zm9yKHZhciBlIGluIGMpaWYoYy5oYXNPd25Qcm9wZXJ0eShlKSliLm9uKGEsZSxjW2VdKTthLl9ib3VuZEV2ZW50cz1jfXJldHVybiBhfTtiLm9uPWZ1bmN0aW9uKGEsYixjKXtpZihhLmFkZEV2ZW50TGlzdGVuZXIpYS5hZGRFdmVudExpc3RlbmVyKGIsCmMsITEpO2Vsc2UgaWYoYS5hdHRhY2hFdmVudClhLmF0dGFjaEV2ZW50KCJvbiIrYixjKTtlbHNle3ZhciBlPWFbIm9uIitiXTthWyJvbiIrYl09ZnVuY3Rpb24oKXtjLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtlJiZlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19fTtiLm9mZj1mdW5jdGlvbihhLGIsYyl7YS5yZW1vdmVFdmVudExpc3RlbmVyP2EucmVtb3ZlRXZlbnRMaXN0ZW5lcihiLGMsITEpOmEuZGV0YWNoRXZlbnQmJmEuZGV0YWNoRXZlbnQoIm9uIitiLGMpfTtiLmlzRGlzcGxheU5vbmU9ZnVuY3Rpb24oYSl7cmV0dXJuKDA9PT1hLm9mZnNldFdpZHRofHwwPT09YS5vZmZzZXRIZWlnaHQpJiYibm9uZSI9PT1iLmNzcyhhLCJkaXNwbGF5Iik/ITA6YS5wYXJlbnROb2RlJiZhLnBhcmVudE5vZGUuc3R5bGU/Yi5pc0Rpc3BsYXlOb25lKGEucGFyZW50Tm9kZSk6ITF9O2IuZmluZEVsZW1lbnRXaXRoRGlzcGxheU5vbmU9ZnVuY3Rpb24oYSl7cmV0dXJuKDA9PT1hLm9mZnNldFdpZHRofHwKMD09PWEub2Zmc2V0SGVpZ2h0KSYmIm5vbmUiPT09Yi5jc3MoYSwiZGlzcGxheSIpP2E6YS5wYXJlbnROb2RlJiZhLnBhcmVudE5vZGUuc3R5bGU/Yi5maW5kRWxlbWVudFdpdGhEaXNwbGF5Tm9uZShhLnBhcmVudE5vZGUpOm51bGx9O2Iub2JzZXJ2ZVN0eWxlQ2hhbmdlcz1mdW5jdGlvbihhLGQsYyl7dmFyIGU9e30saD1mdW5jdGlvbihjKXtzd2l0Y2goYyl7Y2FzZSAid2lkdGgiOnJldHVybiBiLndpZHRoKGEpO2Nhc2UgImhlaWdodCI6cmV0dXJuIGIuaGVpZ2h0KGEpO2RlZmF1bHQ6cmV0dXJuIGIuY3NzKGEpfX07ZC5mb3JFYWNoKGZ1bmN0aW9uKGEpe2VbYV09aChhKX0pO3ZhciBpPW5ldyBNdXRhdGlvbk9ic2VydmVyKGZ1bmN0aW9uKGEpe3ZhciBpPXt9O2EuZm9yRWFjaChmdW5jdGlvbihhKXsic3R5bGUiPT09YS5hdHRyaWJ1dGVOYW1lJiZkLmZvckVhY2goZnVuY3Rpb24oYSl7dmFyIGI9aChhKTtiIT09ZVthXSYmKGlbYV09W2VbYV0sYl0sZVthXT1iKX0pfSk7ZihpKSYmCmIuY2FsbEFzeW5jKGZ1bmN0aW9uKCl7Yy5jYWxsKG51bGwsaSl9KX0pO2kub2JzZXJ2ZShhLHthdHRyaWJ1dGVzOiEwLGF0dHJpYnV0ZUZpbHRlcjpbInN0eWxlIl0sY2hpbGRMaXN0OiExLGNoYXJhY3RlckRhdGE6ITEsc3VidHJlZTohMX0pO3JldHVybiBpfTtiLm9ic2VydmVOb2RlT3JDaGlsZE5vZGVSZW1vdmFsPWZ1bmN0aW9uKGEsZCl7dmFyIGM9bmV3IE11dGF0aW9uT2JzZXJ2ZXIoZnVuY3Rpb24oYSl7dmFyIGM9W107YS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2EucmVtb3ZlZE5vZGVzLmxlbmd0aCYmKGM9Yy5jb25jYXQoQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYS5yZW1vdmVkTm9kZXMpKSl9KTtjLmxlbmd0aCYmYi5jYWxsQXN5bmMoZnVuY3Rpb24oKXtkKGMpfSl9KTtjLm9ic2VydmUoYSx7YXR0cmlidXRlczohMSxjaGlsZExpc3Q6ITAsY2hhcmFjdGVyRGF0YTohMSxzdWJ0cmVlOiEwfSk7cmV0dXJuIGN9fSkod2luZG93LHdpbmRvdy5PVEhlbHBlcnMpOwooZnVuY3Rpb24oZyxiKXtiLk1vZGFsPWZ1bmN0aW9uKGYsYSl7dGhpcy5lbD1iLmNyZWF0ZUVsZW1lbnQoInNlY3Rpb24iLHtjbGFzc05hbWU6Ik9UX3Jvb3QgT1RfZGlhbG9nIE9UX21vZGFsIn0sYi50ZW1wbGF0ZSgiICAgICAgICA8aGVhZGVyPiAgICAgICAgICAgIDxoMT48JT0gdGl0bGUgJT48L2gxPiAgICAgICAgPC9oZWFkZXI+ICAgICAgICA8ZGl2IGNsYXNzPSdPVF9kaWFsb2ctYm9keSc+ICAgICAgICAgICAgPCU9IGJvZHkgJT4gICAgICAgIDwvZGl2PiAgICAiLHt0aXRsZTpmLGJvZHk6YX0pKTt0aGlzLmVsLnN0eWxlLmRpc3BsYXk9Im5vbmUiO2RvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGhpcy5lbCk7Yi5jZW50ZXJFbGVtZW50KHRoaXMuZWwpO2Iuc2hvdyh0aGlzLmVsKTt0aGlzLmNsb3NlPWZ1bmN0aW9uKCl7Yi5yZW1vdmVFbGVtZW50KHRoaXMuZWwpO3RoaXMuZWw9bnVsbDtyZXR1cm4gdGhpc319O2IudGJBbGVydD1mdW5jdGlvbihmLGEpe3ZhciBkPW5ldyBiLk1vZGFsKGYsCiI8ZGl2PiIrYSsiPC9kaXY+Iik7Yi5hZGRDbGFzcyhkLmVsLCJPVF90YmFsZXJ0Iik7dmFyIGM9Yi5jcmVhdGVFbGVtZW50KCJpbnB1dCIse2NsYXNzTmFtZToiT1RfY2xvc2VCdXR0b24iLHR5cGU6ImJ1dHRvbiIsdmFsdWU6ImNsb3NlIn0pO2QuZWwuYXBwZW5kQ2hpbGQoYyk7Yy5vbmNsaWNrPWZ1bmN0aW9uKCl7ZCYmZC5jbG9zZSgpO2Q9bnVsbH19fSkod2luZG93LHdpbmRvdy5PVEhlbHBlcnMpOwooZnVuY3Rpb24oZyxiKXtiLmFkZENsYXNzPWZ1bmN0aW9uKGEsZCl7aWYoMT09PWEubm9kZVR5cGUpe3ZhciBjPWQudHJpbSgpLnNwbGl0KC9ccysvKSxlLGg7aWYoYi5zdXBwb3J0c0NsYXNzTGlzdCgpKXtlPTA7Zm9yKGg9Yy5sZW5ndGg7ZTxoOysrZSlhLmNsYXNzTGlzdC5hZGQoY1tlXSl9ZWxzZXtpZighYS5jbGFzc05hbWUmJjE9PT1jLmxlbmd0aClhLmNsYXNzTmFtZT1kO2Vsc2V7dmFyIGk9IiAiK2EuY2xhc3NOYW1lKyIgIjtlPTA7Zm9yKGg9Yy5sZW5ndGg7ZTxoOysrZSl+aS5pbmRleE9mKCIgIitjW2VdKyIgIil8fChpKz1jW2VdKyIgIik7YS5jbGFzc05hbWU9aS50cmltKCl9cmV0dXJuIHRoaXN9fX07Yi5yZW1vdmVDbGFzcz1mdW5jdGlvbihhLGQpe2lmKGQmJjE9PT1hLm5vZGVUeXBlKXt2YXIgYz1kLnRyaW0oKS5zcGxpdCgvXHMrLyksZSxoO2lmKGIuc3VwcG9ydHNDbGFzc0xpc3QoKSl7ZT0wO2ZvcihoPWMubGVuZ3RoO2U8aDsrK2UpYS5jbGFzc0xpc3QucmVtb3ZlKGNbZV0pfWVsc2V7dmFyIGk9CigiICIrYS5jbGFzc05hbWUrIiAiKS5yZXBsYWNlKC9bXHMrXS8sIiAiKTtlPTA7Zm9yKGg9Yy5sZW5ndGg7ZTxoOysrZSlpPWkucmVwbGFjZSgiICIrY1tlXSsiICIsIiAiKTthLmNsYXNzTmFtZT1pLnRyaW0oKTtyZXR1cm4gdGhpc319fTt2YXIgZj1mdW5jdGlvbihhKXtyZXR1cm4gMDxhLm9mZnNldEhlaWdodD9hLm9mZnNldEhlaWdodCsicHgiOmIuY3NzKGEsImhlaWdodCIpfTtiLndpZHRoPWZ1bmN0aW9uKGEsZCl7cmV0dXJuIGQ/KGIuY3NzKGEsIndpZHRoIixkKSx0aGlzKTpiLmlzRGlzcGxheU5vbmUoYSk/Yi5tYWtlVmlzaWJsZUFuZFlpZWxkKGEsZnVuY3Rpb24oKXtyZXR1cm4gMDxhLm9mZnNldFdpZHRoP2Eub2Zmc2V0V2lkdGgrInB4IjpiLmNzcyhhLCJ3aWR0aCIpfSk6MDxhLm9mZnNldFdpZHRoP2Eub2Zmc2V0V2lkdGgrInB4IjpiLmNzcyhhLCJ3aWR0aCIpfTtiLmhlaWdodD1mdW5jdGlvbihhLGQpe3JldHVybiBkPyhiLmNzcyhhLCJoZWlnaHQiLGQpLHRoaXMpOgpiLmlzRGlzcGxheU5vbmUoYSk/Yi5tYWtlVmlzaWJsZUFuZFlpZWxkKGEsZnVuY3Rpb24oKXtyZXR1cm4gZihhKX0pOmYoYSl9O2IuY2VudGVyRWxlbWVudD1mdW5jdGlvbihhLGQsYyl7ZHx8KGQ9cGFyc2VJbnQoYi53aWR0aChhKSwxMCkpO2N8fChjPXBhcnNlSW50KGIuaGVpZ2h0KGEpLDEwKSk7Yi5jc3MoYSwibWFyZ2luIiwtMC41KmMrInB4IDAgMCAiKygtMC41KmQrInB4IikpO2IuYWRkQ2xhc3MoYSwiT1RfY2VudGVyZWQiKX19KSh3aW5kb3csd2luZG93Lk9USGVscGVycyk7CihmdW5jdGlvbihnLGIsZil7dmFyIGE9e30sZD17fTtiLnNob3c9ZnVuY3Rpb24oYyl7dmFyIGU9Yy5zdHlsZS5kaXNwbGF5O2lmKCIiPT09ZXx8Im5vbmUiPT09ZSljLnN0eWxlLmRpc3BsYXk9YVtjXXx8IiIsZGVsZXRlIGFbY107aWYoIm5vbmUiPT09Yy5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3LmdldENvbXB1dGVkU3R5bGUoYyxudWxsKS5nZXRQcm9wZXJ0eVZhbHVlKCJkaXNwbGF5Iikpe2FbY109Im5vbmUiO2U9Yy5zdHlsZTtpZihkW2Mub3duZXJEb2N1bWVudF0mJmRbYy5vd25lckRvY3VtZW50XVtjLm5vZGVOYW1lXSljPWRbYy5vd25lckRvY3VtZW50XVtjLm5vZGVOYW1lXTtlbHNle2RbYy5vd25lckRvY3VtZW50XXx8KGRbYy5vd25lckRvY3VtZW50XT17fSk7dmFyIGg9Yy5vd25lckRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoYy5ub2RlTmFtZSk7Yy5vd25lckRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoaCk7Yz1kW2Mub3duZXJEb2N1bWVudF1bYy5ub2RlTmFtZV09Yi5jc3MoaCwKImRpc3BsYXkiKTtiLnJlbW92ZUVsZW1lbnQoaCl9ZS5kaXNwbGF5PWN9cmV0dXJuIHRoaXN9O2IuaGlkZT1mdW5jdGlvbihiKXtpZigibm9uZSIhPT1iLnN0eWxlLmRpc3BsYXkpcmV0dXJuIGFbYl09Yi5zdHlsZS5kaXNwbGF5LGIuc3R5bGUuZGlzcGxheT0ibm9uZSIsdGhpc307Yi5jc3M9ZnVuY3Rpb24oYSxiLGQpe2lmKCJzdHJpbmciIT09dHlwZW9mIGIpe3ZhciBhPWEuc3R5bGUsaTtmb3IoaSBpbiBiKWFbaV09YltpXTtyZXR1cm4gdGhpc31pZihkIT09ZilyZXR1cm4gYS5zdHlsZVtiXT1kLHRoaXM7Yj1iLnJlcGxhY2UoLyhbQS1aXXxebXMpL2csIi0kMSIpLnRvTG93ZXJDYXNlKCk7aT1hLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcuZ2V0Q29tcHV0ZWRTdHlsZShhLG51bGwpLmdldFByb3BlcnR5VmFsdWUoYik7IiI9PT1pJiYoaT1hLnN0eWxlW2JdKTtyZXR1cm4gaX07Yi5hcHBseUNTUz1mdW5jdGlvbihhLGQsaCl7dmFyIGk9e30sZjtmb3IoZiBpbiBkKWQuaGFzT3duUHJvcGVydHkoZikmJgooaVtmXT1hLnN0eWxlW2ZdLGIuY3NzKGEsZixkW2ZdKSk7aD1oKCk7Zm9yKGYgaW4gZClkLmhhc093blByb3BlcnR5KGYpJiZiLmNzcyhhLGYsaVtmXXx8IiIpO3JldHVybiBofTtiLm1ha2VWaXNpYmxlQW5kWWllbGQ9ZnVuY3Rpb24oYSxkKXt2YXIgaD1iLmZpbmRFbGVtZW50V2l0aERpc3BsYXlOb25lKGEpO2lmKGgpcmV0dXJuIGIuYXBwbHlDU1MoaCx7ZGlzcGxheToiYmxvY2siLHZpc2liaWxpdHk6ImhpZGRlbiJ9LGQpfX0pKHdpbmRvdyx3aW5kb3cuT1RIZWxwZXJzKTsKKGZ1bmN0aW9uKGcsYixmKXtmdW5jdGlvbiBhKGEpe2lmKCJzdHJpbmciPT09dHlwZW9mIGEpcmV0dXJuIGE7dmFyIGI9W10sZDtmb3IoZCBpbiBhKWIucHVzaChlbmNvZGVVUklDb21wb25lbnQoZCkrIj0iK2VuY29kZVVSSUNvbXBvbmVudChhW2RdKSk7cmV0dXJuIGIuam9pbigiJiIpLnJlcGxhY2UoL1wrL2csIiUyMCIpfWIuZ2V0WE1MPWZ1bmN0aW9uKGEsZCl7dmFyIGg9ZCYmZC5zdWNjZXNzLGk9Yi5leHRlbmQoZC5oZWFkZXJzfHx7fSx7IkNvbnRlbnQtVHlwZSI6ImFwcGxpY2F0aW9uL3htbCJ9KTtiLmdldChhLGIuZXh0ZW5kKGR8fHt9LHtzdWNjZXNzOmZ1bmN0aW9uKGEpe3ZhciBiPWEudGFyZ2V0LnJlc3BvbnNlWE1MLGM7Yj8oYz1iLmRvY3VtZW50RWxlbWVudCxjPSFjfHwhYy5ub2RlTmFtZXx8InBhcnNlcmVycm9yIj09PWMubm9kZU5hbWU/ITE6ITApOmM9ITE7Yz9oJiZoKGIsYSxhLnRhcmdldCk6ZCYmZC5lcnJvciYmZC5lcnJvcihhLGEudGFyZ2V0KX0saGVhZGVyczppfSkpfTsKYi5nZXRKU09OPWZ1bmN0aW9uKGEsZCl7dmFyIGg9ZCYmZC5zdWNjZXNzO2IuZ2V0KGEsYi5leHRlbmQoZHx8e30se3N1Y2Nlc3M6ZnVuY3Rpb24oYSl7dmFyIGI7dHJ5e2I9SlNPTi5wYXJzZShhLnRhcmdldC5yZXNwb25zZVRleHQpfWNhdGNoKGMpe2QmJmQuZXJyb3ImJmQuZXJyb3IoYSxhLnRhcmdldCk7cmV0dXJufWgmJmgoYixhLGEudGFyZ2V0KX0saGVhZGVyczp7IkNvbnRlbnQtVHlwZSI6ImFwcGxpY2F0aW9uL2pzb24ifX0pKX07Yi5nZXQ9ZnVuY3Rpb24oYSxiKXt2YXIgaD1uZXcgWE1MSHR0cFJlcXVlc3QsZj1ifHx7fTtkKGgsZi5zdWNjZXNzLGYuZXJyb3IpO2YucHJvY2VzcyYmaC5hZGRFdmVudExpc3RlbmVyKCJwcm9ncmVzcyIsZi5wcm9ncmVzcywhMSk7Zi5jYW5jZWxsZWQmJmguYWRkRXZlbnRMaXN0ZW5lcigiYWJvcnQiLGYuY2FuY2VsbGVkLCExKTtoLm9wZW4oIkdFVCIsYSwhMCk7Zi5oZWFkZXJzfHwoZi5oZWFkZXJzPXt9KTtmb3IodmFyIGcgaW4gZi5oZWFkZXJzKWguc2V0UmVxdWVzdEhlYWRlcihnLApmLmhlYWRlcnNbZ10pO2guc2VuZCgpfTtiLnBvc3Q9ZnVuY3Rpb24oYixlKXt2YXIgaD1uZXcgWE1MSHR0cFJlcXVlc3QsZj1lfHx7fTtkKGgsZi5zdWNjZXNzLGYuZXJyb3IpO2YucHJvY2VzcyYmaC5hZGRFdmVudExpc3RlbmVyKCJwcm9ncmVzcyIsZi5wcm9ncmVzcywhMSk7Zi5jYW5jZWxsZWQmJmguYWRkRXZlbnRMaXN0ZW5lcigiYWJvcnQiLGYuY2FuY2VsbGVkLCExKTtoLm9wZW4oIlBPU1QiLGIsITApO2YuaGVhZGVyc3x8KGYuaGVhZGVycz17fSk7Zm9yKHZhciBnIGluIGYuaGVhZGVycyloLnNldFJlcXVlc3RIZWFkZXIoZyxmLmhlYWRlcnNbZ10pO2guc2VuZChhKGYuZGF0YSkpfTtiLnBvc3RGb3JtRGF0YT1mdW5jdGlvbihhLGQsaCl7aWYoIWQpdGhyb3cgRXJyb3IoIk9USGVscGVycy5wb3N0Rm9ybURhdGEgbXVzdCBiZSBwYXNzZWQgYSBkYXRhIG9wdGlvbnMuIik7dmFyIGY9bmV3IEZvcm1EYXRhLGc7Zm9yKGcgaW4gZClmLmFwcGVuZChnLGRbZ10pO2IucG9zdChhLGIuZXh0ZW5kKGh8fAp7fSx7ZGF0YTpmfSkpfTtiLmdldEpTT05QPWZ1bmN0aW9uKGEsZCl7dmFyIGgsaT1kb2N1bWVudC5oZWFkfHxkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgiaGVhZCIpWzBdLGcsaj1hLGw9Yi5leHRlbmQoZHx8e30se2NhbGxiYWNrUGFyYW1ldGVyOiJjYWxsYmFjayJ9KSxtPWZ1bmN0aW9uKCl7ZyYmKGNsZWFyVGltZW91dChnKSxnPW51bGwpO2gmJihoLm9ubG9hZD1oLm9ucmVhZHlzdGF0ZWNoYW5nZT1udWxsLGIucmVtb3ZlRWxlbWVudChoKSxoPWYpfSxwPWZ1bmN0aW9uKCl7aWYoKCFoLnJlYWR5U3RhdGV8fC9sb2FkZWR8Y29tcGxldGUvLnRlc3QoaC5yZWFkeVN0YXRlKSkmJmcpY2xlYXJUaW1lb3V0KGcpLGc9bnVsbH07bC5jYWxsYmFja05hbWU9Impzb25wX2NhbGxiYWNrXyIrICtuZXcgRGF0ZTt0aGlzLmpzb25wX2NhbGxiYWNrc1tsLmNhbGxiYWNrTmFtZV09ZnVuY3Rpb24oYSl7bSgpO2wuc3VjY2VzcyYmbC5zdWNjZXNzKGEpfTtqKz0oL1w/Ly50ZXN0KGopPyImIjoKIj8iKStsLmNhbGxiYWNrUGFyYW1ldGVyKyI9IitsLmNhbGxiYWNrTmFtZTtoPWIuY3JlYXRlRWxlbWVudCgic2NyaXB0Iix7YXN5bmM6ImFzeW5jIixzcmM6aixvbmxvYWQ6cCxvbnJlYWR5c3RhdGVjaGFuZ2U6cH0pO2kuYXBwZW5kQ2hpbGQoaCk7Zz1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7bSgpO2IuZXJyb3IoIlRoZSBKU09OUCByZXF1ZXN0IHRvICIraisiIHRpbWVkIG91dCBhZnRlciAzMDAwMG1zLiIpO2wuZXJyb3ImJmwuZXJyb3IoIlRoZSBKU09OUCByZXF1ZXN0IHRvICIrYSsiIHRpbWVkIG91dCBhZnRlciAzMDAwMG1zLiIsaixsKX0sM0U0KX07dmFyIGQ9ZnVuY3Rpb24oYSxiLGQpe2EuYWRkRXZlbnRMaXN0ZW5lcigibG9hZCIsZnVuY3Rpb24oYSl7dmFyIGM9YS50YXJnZXQuc3RhdHVzOzIwMDw9YyYmMzAwPmN8fDMwND09PWM/YiYmYi5hcHBseShudWxsLGFyZ3VtZW50cyk6ZCYmZChhKX0sITEpO2QmJmEuYWRkRXZlbnRMaXN0ZW5lcigiZXJyb3IiLGQsITEpfX0pKHdpbmRvdywKd2luZG93Lk9USGVscGVycyk7CiFmdW5jdGlvbihnKXtnLk9UfHwoZy5PVD17fSk7T1QuJD1PVEhlbHBlcnMubm9Db25mbGljdCgpO09ULiQuZXZlbnRpbmcoT1QpO09ULk1vZGFsPU9ULiQuTW9kYWw7T1QuJC51c2VMb2dIZWxwZXJzKE9UKTt2YXIgYj0hMSxmPU9ULnNldExvZ0xldmVsO09ULnNldExvZ0xldmVsPWZ1bmN0aW9uKGEpe09ULiQuc2V0TG9nTGV2ZWwoYSk7YT1mLmNhbGwoT1QsYSk7aWYoT1Quc2hvdWxkTG9nKE9ULkRFQlVHKSYmIWIpe09ULmRlYnVnKCJPcGVuVG9rIEphdmFTY3JpcHQgbGlicmFyeSAiK09ULnByb3BlcnRpZXMudmVyc2lvbik7T1QuZGVidWcoIlJlbGVhc2Ugbm90ZXM6ICIrT1QucHJvcGVydGllcy53ZWJzaXRlVVJMKyIvb3BlbnRvay93ZWJydGMvZG9jcy9qcy9yZWxlYXNlLW5vdGVzLmh0bWwiKTtPVC5kZWJ1ZygiS25vd24gaXNzdWVzOiAiK09ULnByb3BlcnRpZXMud2Vic2l0ZVVSTCsiL29wZW50b2svd2VicnRjL2RvY3MvanMvcmVsZWFzZS1ub3Rlcy5odG1sI2tub3duSXNzdWVzIik7Yj0KdHJ1ZX1PVC5kZWJ1ZygiVEIuc2V0TG9nTGV2ZWwoIithKyIpIik7cmV0dXJuIGF9O09ULnNldExvZ0xldmVsKE9ULnByb3BlcnRpZXMuZGVidWc/T1QuREVCVUc6T1QuRVJST1IpfSh3aW5kb3cpOwooZnVuY3Rpb24oZyl7Zy5PVHx8KGcuT1Q9e30pO2lmKCFPVC5wcm9wZXJ0aWVzKXRocm93IEVycm9yKCJPVC5wcm9wZXJ0aWVzIGRvZXMgbm90IGV4aXN0LCBwbGVhc2UgZW5zdXJlIHRoYXQgeW91IGluY2x1ZGUgYSB2YWxpZCBwcm9wZXJ0aWVzIGZpbGUuIik7dmFyIGI9T1QsZj1PVC5wcm9wZXJ0aWVzLGE9T1QuJC5jbG9uZShmKTthLmRlYnVnPSJ0cnVlIj09PWYuZGVidWd8fCEwPT09Zi5kZWJ1ZzthLnN1cHBvcnRTU0w9InRydWUiPT09Zi5zdXBwb3J0U1NMfHwhMD09PWYuc3VwcG9ydFNTTDthLnN1cHBvcnRTU0wmJigwPD1nLmxvY2F0aW9uLnByb3RvY29sLmluZGV4T2YoImh0dHBzIil8fDA8PWcubG9jYXRpb24ucHJvdG9jb2wuaW5kZXhPZigiY2hyb21lLWV4dGVuc2lvbiIpKT8oYS5hc3NldFVSTD1hLmNkblVSTFNTTCsiL3dlYnJ0Yy8iK2EudmVyc2lvbixhLmxvZ2dpbmdVUkw9YS5sb2dnaW5nVVJMU1NMLGEuYXBpVVJMPWEuYXBpVVJMU1NMKTphLmFzc2V0VVJMPWEuY2RuVVJMKwoiL3dlYnJ0Yy8iK2EudmVyc2lvbjthLmNvbmZpZ1VSTD1hLmFzc2V0VVJMKyIvanMvZHluYW1pY19jb25maWcubWluLmpzIjthLmNzc1VSTD1hLmFzc2V0VVJMKyIvY3NzL290Lm1pbi5jc3MiO2IucHJvcGVydGllcz1hfSkod2luZG93KTsKKGZ1bmN0aW9uKCl7T1QuQ29uZmlnPWZ1bmN0aW9uKCl7dmFyIGc9ITEsYj17fSxmPXt9LGEsZD1kb2N1bWVudC5oZWFkfHxkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgiaGVhZCIpWzBdLGMsZT1mdW5jdGlvbigpe2MmJihjbGVhclRpbWVvdXQoYyksYz1udWxsKTthJiYoYS5vbmxvYWQ9YS5vbnJlYWR5c3RhdGVjaGFuZ2U9bnVsbCxkJiZhLnBhcmVudE5vZGUmJmQucmVtb3ZlQ2hpbGQoYSksYT12b2lkIDApfSxoPWZ1bmN0aW9uKCl7aWYoIWEucmVhZHlTdGF0ZXx8L2xvYWRlZHxjb21wbGV0ZS8udGVzdChhLnJlYWR5U3RhdGUpKWMmJihjbGVhclRpbWVvdXQoYyksYz1udWxsKSxnfHxpLl9vbkxvYWRUaW1lb3V0KCl9LGk9e2xvYWRUaW1lb3V0OjRFMyxsb2FkOmZ1bmN0aW9uKGIpe2lmKCFiKXRocm93IEVycm9yKCJZb3UgbXVzdCBwYXNzIGEgdmFsaWQgY29uZmlnVXJsIHRvIENvbmZpZy5sb2FkIik7Zz0hMTtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7YT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzY3JpcHQiKTsKYS5hc3luYz0iYXN5bmMiO2Euc3JjPWI7YS5vbmxvYWQ9YS5vbnJlYWR5c3RhdGVjaGFuZ2U9aC5iaW5kKHRoaXMpO2QuYXBwZW5kQ2hpbGQoYSl9LDEpO2M9c2V0VGltZW91dChmdW5jdGlvbigpe2kuX29uTG9hZFRpbWVvdXQoKX0sdGhpcy5sb2FkVGltZW91dCl9LF9vbkxvYWRUaW1lb3V0OmZ1bmN0aW9uKCl7ZSgpO09ULndhcm4oIlRCIER5bmFtaWNDb25maWcgZmFpbGVkIHRvIGxvYWQgaW4gIitpLmxvYWRUaW1lb3V0KyIgbXMiKTt0aGlzLnRyaWdnZXIoImR5bmFtaWNDb25maWdMb2FkRmFpbGVkIil9LGlzTG9hZGVkOmZ1bmN0aW9uKCl7cmV0dXJuIGd9LHJlc2V0OmZ1bmN0aW9uKCl7ZSgpO2c9ITE7Yj17fTtmPXt9fSxyZXBsYWNlV2l0aDpmdW5jdGlvbihhKXtlKCk7YXx8KGE9e30pO2I9YS5nbG9iYWx8fHt9O2Y9YS5wYXJ0bmVyc3x8e307Z3x8KGc9ITApO3RoaXMudHJpZ2dlcigiZHluYW1pY0NvbmZpZ0NoYW5nZWQiKX0sZ2V0OmZ1bmN0aW9uKGEsYyxkKXthPWQmJmZbZF0mJgpmW2RdW2FdP2ZbZF1bYV06YlthXTtyZXR1cm4gYT9hW2NdOm51bGx9fTtPVC4kLmV2ZW50aW5nKGkpO3JldHVybiBpfSgpfSkod2luZG93KTsKKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gZyhhLGQsYyxlLGgpe2Q9ZD9wYXJzZUludChkLDEwKTpwYXJzZUludChPVC4kLndpZHRoKGEucGFyZW50Tm9kZSksMTApO2M9Yz9wYXJzZUludChjLDEwKTpwYXJzZUludChPVC4kLmhlaWdodChhLnBhcmVudE5vZGUpLDEwKTtpZighKDA9PT1kfHwwPT09YykpaWYoZXx8KGU9YiksYz0oZCswKS9jLGQ9e3dpZHRoOiIxMDAlIixoZWlnaHQ6IjEwMCUiLGxlZnQ6MCx0b3A6MH0sYz5lPyhlPTEwMCooYy9lKSxkLmhlaWdodD1lKyIlIixkLnRvcD0iLSIrKGUtMTAwKS8yKyIlIik6YzxlJiYoZT0xMDAqKGUvYyksZC53aWR0aD1lKyIlIixkLmxlZnQ9Ii0iKyhlLTEwMCkvMisiJSIpLE9ULiQuY3NzKGEsZCksZT1hLnF1ZXJ5U2VsZWN0b3IoInZpZGVvIikpaD8oaD1hLm9mZnNldFdpZHRoLGE9YS5vZmZzZXRIZWlnaHQsZD17d2lkdGg6YSsicHgiLGhlaWdodDpoKyJweCIsbWFyZ2luVG9wOiIiLG1hcmdpbkxlZnQ6IiJ9LGE9aC1hLGQubWFyZ2luTGVmdD0KYS8yKyJweCIsZC5tYXJnaW5Ub3A9LShhLzIpKyJweCIsT1QuJC5jc3MoZSxkKSk6T1QuJC5jc3MoZSx7d2lkdGg6IiIsaGVpZ2h0OiIiLG1hcmdpblRvcDoiIixtYXJnaW5MZWZ0OiIifSl9dmFyIGI9NC8zLGY9ZnVuY3Rpb24oYSxiKXt2YXIgYyxlO2EmJmEubm9kZU5hbWU/KGM9YSwoIWMuZ2V0QXR0cmlidXRlKCJpZCIpfHwwPT09Yy5nZXRBdHRyaWJ1dGUoImlkIikubGVuZ3RoKSYmYy5zZXRBdHRyaWJ1dGUoImlkIiwiT1RfIitPVC4kLnV1aWQoKSksZT1jLmdldEF0dHJpYnV0ZSgiaWQiKSk6KGM9T1QuJChhKSxlPWF8fCJPVF8iK09ULiQudXVpZCgpKTtjP09ULiQuZW1wdHlFbGVtZW50KGMpOihjPU9ULiQuY3JlYXRlRWxlbWVudCgiZGl2Iix7aWQ6ZX0pLGMuc3R5bGUuYmFja2dyb3VuZENvbG9yPSIjMDAwMDAwIixkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGMpKTtudWxsPT1ifHwicmVwbGFjZSI9PWJ8fChlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpLGUuaWQ9CiJPVF8iK09ULiQudXVpZCgpLCJhcHBlbmQiPT1iPyhjLmFwcGVuZENoaWxkKGUpLGM9ZSk6ImJlZm9yZSI9PWI/KGMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoZSxjKSxjPWUpOiJhZnRlciI9PWImJihjLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGUsYy5uZXh0U2libGluZyksYz1lKSk7cmV0dXJuIGN9O09ULldpZGdldFZpZXc9ZnVuY3Rpb24oYSxiKXt2YXIgYz1mKGEsYiYmYi5pbnNlcnRNb2RlKSxlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpLGgsaSxrLGosbCxtPSEwO2ImJih3aWR0aD1iLndpZHRoLGhlaWdodD1iLmhlaWdodCx3aWR0aCYmIm51bWJlciI9PXR5cGVvZiB3aWR0aCYmKHdpZHRoKz0icHgiKSxoZWlnaHQmJiJudW1iZXIiPT10eXBlb2YgaGVpZ2h0JiYoaGVpZ2h0Kz0icHgiKSxjLnN0eWxlLndpZHRoPXdpZHRoP3dpZHRoOiIyNjRweCIsYy5zdHlsZS5oZWlnaHQ9aGVpZ2h0P2hlaWdodDoiMTk4cHgiLGMuc3R5bGUub3ZlcmZsb3c9ImhpZGRlbiIsKHZvaWQgMD09PQpiLm1pcnJvcnx8Yi5taXJyb3IpJiZPVC4kLmFkZENsYXNzKGMsIk9UX21pcnJvcmVkIikpO2IuY2xhc3NOYW1lcyYmT1QuJC5hZGRDbGFzcyhjLGIuY2xhc3NOYW1lcyk7T1QuJC5hZGRDbGFzcyhjLCJPVF9sb2FkaW5nIik7T1QuJC5hZGRDbGFzcyhlLCJPVF92aWRlby1jb250YWluZXIiKTtlLnN0eWxlLndpZHRoPWMuc3R5bGUud2lkdGg7ZS5zdHlsZS5oZWlnaHQ9Yy5zdHlsZS5oZWlnaHQ7Yy5hcHBlbmRDaGlsZChlKTtnKGUsYy5vZmZzZXRXaWR0aCxjLm9mZnNldEhlaWdodCk7bD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTtPVC4kLmFkZENsYXNzKGwsIk9UX3ZpZGVvLWxvYWRpbmciKTtlLmFwcGVuZENoaWxkKGwpO2o9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7T1QuJC5hZGRDbGFzcyhqLCJPVF92aWRlby1wb3N0ZXIiKTtlLmFwcGVuZENoaWxkKGopO2g9T1QuJC5vYnNlcnZlU3R5bGVDaGFuZ2VzKGMsWyJ3aWR0aCIsImhlaWdodCJdLGZ1bmN0aW9uKGEpe2coZSwKYS53aWR0aD9hLndpZHRoWzFdOmMub2Zmc2V0V2lkdGgsYS5oZWlnaHQ/YS5oZWlnaHRbMV06Yy5vZmZzZXRIZWlnaHQsaT9pLmFzcGVjdFJhdGlvOm51bGwpfSk7az1PVC4kLm9ic2VydmVOb2RlT3JDaGlsZE5vZGVSZW1vdmFsKGMsZnVuY3Rpb24oYSl7aWYoaSl7aWYoYS5zb21lKGZ1bmN0aW9uKGEpe3JldHVybiBhPT09ZXx8YS5ub2RlTmFtZT09PSJWSURFTyJ9KSl7aS5kZXN0cm95KCk7aT1udWxsfWlmKGUpe09ULiQucmVtb3ZlRWxlbWVudChlKTtlPW51bGx9aWYoaCl7aC5kaXNjb25uZWN0KCk7aD1udWxsfWlmKGspe2suZGlzY29ubmVjdCgpO2s9bnVsbH19fSk7dGhpcy5kZXN0cm95PWZ1bmN0aW9uKCl7aWYoaCl7aC5kaXNjb25uZWN0KCk7aD1udWxsfWlmKGspe2suZGlzY29ubmVjdCgpO2s9bnVsbH1pZihpKXtpLmRlc3Ryb3koKTtpPW51bGx9aWYoYyl7T1QuJC5yZW1vdmVFbGVtZW50KGMpO2M9bnVsbH19O09iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRoaXMse3Nob3dQb3N0ZXI6e2dldDpmdW5jdGlvbigpe3JldHVybiFPVC4kLmlzRGlzcGxheU5vbmUoail9LApzZXQ6ZnVuY3Rpb24oYSl7YT9PVC4kLnNob3coaik6T1QuJC5oaWRlKGopfX0scG9zdGVyOntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gT1QuJC5jc3MoaiwiYmFja2dyb3VuZEltYWdlIil9LHNldDpmdW5jdGlvbihhKXtPVC4kLmNzcyhqLCJiYWNrZ3JvdW5kSW1hZ2UiLCJ1cmwoIithKyIpIil9fSxsb2FkaW5nOntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gbX0sc2V0OmZ1bmN0aW9uKGEpeyhtPWEpP09ULiQuYWRkQ2xhc3MoYywiT1RfbG9hZGluZyIpOk9ULiQucmVtb3ZlQ2xhc3MoYywiT1RfbG9hZGluZyIpfX0sdmlkZW86e2dldDpmdW5jdGlvbigpe3JldHVybiBpfSxzZXQ6ZnVuY3Rpb24oYSl7aSYmaS5kZXN0cm95KCk7YS5hcHBlbmRUbyhlKTtpPWE7aS5vbih7b3JpZW50YXRpb25DaGFuZ2VkOmZ1bmN0aW9uKCl7ZyhlLGMub2Zmc2V0V2lkdGgsYy5vZmZzZXRIZWlnaHQsaS5hc3BlY3RSYXRpbyxpLmlzUm90YXRlZCl9fSk7ZyhlLGMub2Zmc2V0V2lkdGgsYy5vZmZzZXRIZWlnaHQsCmk/aS5hc3BlY3RSYXRpbzpudWxsLGk/aS5pc1JvdGF0ZWQ6bnVsbCl9fSxkb21FbGVtZW50OntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gY319LGRvbUlkOntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gYy5nZXRBdHRyaWJ1dGUoImlkIil9fX0pO3RoaXMuYWRkRXJyb3I9ZnVuY3Rpb24oYSl7Yy5pbm5lckhUTUw9IjxwPiIrYSsiPHA+IjtPVC4kLmFkZENsYXNzKGMsIk9UX3N1YnNjcmliZXJfZXJyb3IiKX19fSkod2luZG93KTsKKGZ1bmN0aW9uKGcpe3ZhciBiPWZ1bmN0aW9uKCl7aWYobmF2aWdhdG9yLmdldFVzZXJNZWRpYSlyZXR1cm4gbmF2aWdhdG9yLmdldFVzZXJNZWRpYS5iaW5kKG5hdmlnYXRvcik7aWYobmF2aWdhdG9yLm1vekdldFVzZXJNZWRpYSlyZXR1cm4gbmF2aWdhdG9yLm1vekdldFVzZXJNZWRpYS5iaW5kKG5hdmlnYXRvcik7aWYobmF2aWdhdG9yLndlYmtpdEdldFVzZXJNZWRpYSlyZXR1cm4gbmF2aWdhdG9yLndlYmtpdEdldFVzZXJNZWRpYS5iaW5kKG5hdmlnYXRvcil9KCk7aWYobmF2aWdhdG9yLndlYmtpdEdldFVzZXJNZWRpYSl7aWYod2Via2l0TWVkaWFTdHJlYW0ucHJvdG90eXBlLmdldFZpZGVvVHJhY2tzfHwod2Via2l0TWVkaWFTdHJlYW0ucHJvdG90eXBlLmdldFZpZGVvVHJhY2tzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudmlkZW9UcmFja3N9KSx3ZWJraXRNZWRpYVN0cmVhbS5wcm90b3R5cGUuZ2V0QXVkaW9UcmFja3N8fCh3ZWJraXRNZWRpYVN0cmVhbS5wcm90b3R5cGUuZ2V0QXVkaW9UcmFja3M9CmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYXVkaW9UcmFja3N9KSx3ZWJraXRSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0TG9jYWxTdHJlYW1zfHwod2Via2l0UlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldExvY2FsU3RyZWFtcz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmxvY2FsU3RyZWFtc30pLCF3ZWJraXRSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0UmVtb3RlU3RyZWFtcyl3ZWJraXRSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0UmVtb3RlU3RyZWFtcz1mdW5jdGlvbigpe3JldHVybiB0aGlzLnJlbW90ZVN0cmVhbXN9fWVsc2UgaWYobmF2aWdhdG9yLm1vekdldFVzZXJNZWRpYSYmKE1lZGlhU3RyZWFtLnByb3RvdHlwZS5nZXRWaWRlb1RyYWNrc3x8KE1lZGlhU3RyZWFtLnByb3RvdHlwZS5nZXRWaWRlb1RyYWNrcz1mdW5jdGlvbigpe3JldHVybltdfSksIU1lZGlhU3RyZWFtLnByb3RvdHlwZS5nZXRBdWRpb1RyYWNrcykpTWVkaWFTdHJlYW0ucHJvdG90eXBlLmdldEF1ZGlvVHJhY2tzPQpmdW5jdGlvbigpe3JldHVybltdfTt2YXIgZj17UEVSTUlTU0lPTl9ERU5JRUQ6IlBFUk1JU1NJT05fREVOSUVEIixOT1RfU1VQUE9SVEVEX0VSUk9SOiJBIGNvbnN0cmFpbnQgc3BlY2lmaWVkIGlzIG5vdCBzdXBwb3J0ZWQgYnkgdGhlIGJyb3dzZXIuIixNQU5EQVRPUllfVU5TQVRJU0ZJRURfRVJST1I6IkNPTlNUUkFJTlRfTk9UX1NBVElTRklFRCJ9LGE9ezE6IlBFUk1JU1NJT05fREVOSUVEIn0sZD17UEVSTUlTU0lPTl9ERU5JRUQ6IlVzZXIgZGVuaWVkIHBlcm1pc3Npb24gZm9yIHNjcmlwdHMgZnJvbSB0aGlzIG9yaWdpbiB0byBhY2Nlc3MgdGhlIG1lZGlhIGRldmljZS4iLENPTlNUUkFJTlRfTk9UX1NBVElTRklFRDoiT25lIG9mIHRoZSBtYW5kYXRvcnkgY29uc3RyYWludHMgY291bGQgbm90IGJlIHNhdGlzZmllZC4ifSxjPWZ1bmN0aW9uKGEsYil7dmFyIGM9YlthXSxlPWRbY107ZXx8KGU9ZXZlbnROYW1lLGM9YSk7cmV0dXJue25hbWU6YyxtZXNzYWdlOmV9fSxlPWZ1bmN0aW9uKGEpe2lmKCFhfHwKIU9ULiQuaXNPYmplY3QoYSkpcmV0dXJuITA7Zm9yKHZhciBiIGluIGEpaWYoYVtiXSlyZXR1cm4hMTtyZXR1cm4hMH07T1QuJC5zdXBwb3J0c1dlYlJUQz1mdW5jdGlvbigpe3ZhciBhPSExO2lmKG5hdmlnYXRvci53ZWJraXRHZXRVc2VyTWVkaWEpYT0iZnVuY3Rpb24iPT09dHlwZW9mIHdlYmtpdFJUQ1BlZXJDb25uZWN0aW9uJiYhIXdlYmtpdFJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRTdHJlYW07ZWxzZSBpZihuYXZpZ2F0b3IubW96R2V0VXNlck1lZGlhKXt2YXIgYj1nLm5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKS5tYXRjaCgvRmlyZWZveFwvKFswLTlcLl0rKS9pKTtpZihhPSJmdW5jdGlvbiI9PT10eXBlb2YgbW96UlRDUGVlckNvbm5lY3Rpb24mJm51bGwhPT1iJiYyMDxwYXJzZUZsb2F0KGJbMV0sMTApKXRyeXtuZXcgbW96UlRDUGVlckNvbm5lY3Rpb24sYT0hMH1jYXRjaChjKXthPSExfX1PVC4kLnN1cHBvcnRzV2ViUlRDPWZ1bmN0aW9uKCl7cmV0dXJuIGF9OwpyZXR1cm4gYX07T1QuJC5zdXBwb3J0ZWRDcnlwdG9TY2hlbWU9ZnVuY3Rpb24oKXtpZighT1QuJC5zdXBwb3J0c1dlYlJUQygpKXJldHVybiJOT05FIjt2YXIgYT1nLm5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKS5tYXRjaCgvY2hyb21lXC8oWzAtOVwuXSspL2kpO3JldHVybiBhJiYyNT5wYXJzZUZsb2F0KGFbMV0sMTApPyJTREVTX1NSVFAiOiJEVExTX1NSVFAifTtPVC4kLnN1cHBvcnRzQnVuZGxlPWZ1bmN0aW9uKCl7cmV0dXJuIE9ULiQuc3VwcG9ydHNXZWJSVEMoKSYmIkNocm9tZSI9PT1PVC4kLmJyb3dzZXIoKX07T1QuJC5zdXBwb3J0c1J0Y3BNdXg9ZnVuY3Rpb24oKXtyZXR1cm4gT1QuJC5zdXBwb3J0c1dlYlJUQygpJiYiQ2hyb21lIj09PU9ULiQuYnJvd3NlcigpfTtPVC4kLmdldFVzZXJNZWRpYT1mdW5jdGlvbihkLGksZyxqLGwsbSl7aWYoZShkKSlPVC5lcnJvcigiQ291bGRuJ3QgZ2V0IFVzZXJNZWRpYTogQWxsIGNvbnN0cmFpbnRzIHdlcmUgZmFsc2UiKSwKZy5jYWxsKG51bGwse25hbWU6Ik5PX1ZBTElEX0NPTlNUUkFJTlRTIixtZXNzYWdlOiJWaWRlbyBhbmQgQXVkaW8gd2FzIGRpc2FibGVkLCB5b3UgbmVlZCB0byBlbmFibGVkIGF0IGxlYXN0IG9uZSJ9KTtlbHNle3ZhciBwPW51bGwsbj0hMSxyPWZ1bmN0aW9uKCl7cD1udWxsO249ITA7aiYmaigpfSxxPWZ1bmN0aW9uKGEpe3AmJmNsZWFyVGltZW91dChwKTtuJiZsJiZsKCk7aS5jYWxsKG51bGwsYSl9LG89ZnVuY3Rpb24oYil7cCYmY2xlYXJUaW1lb3V0KHApO24mJmwmJmwoKTt2YXIgZDtpZihPVC4kLmlzT2JqZWN0KGIpJiZiLm5hbWUpZD17bmFtZTpiLm5hbWUsbWVzc2FnZTpiLm1lc3NhZ2UsY29uc3RyYWludE5hbWU6Yi5jb25zdHJhaW50TmFtZX07ZWxzZSBpZihPVC4kLmlzT2JqZWN0KGIpKXtpZihkPWMoYi5jb2RlLGEpLGIubWVzc2FnZSYmKGQubWVzc2FnZT1iLm1lc3NhZ2UpLGIuY29uc3RyYWludE5hbWUpZC5jb25zdHJhaW50TmFtZT1iLmNvbnN0cmFpbnROYW1lfWVsc2UgZD0KYiYmZi5oYXNPd25Qcm9wZXJ0eShiKT9jKGIsZik6e21lc3NhZ2U6IlVua25vd24gRXJyb3Igd2hpbGUgZ2V0dGluZyB1c2VyIG1lZGlhIn07Yj1kOyJQRVJNSVNTSU9OX0RFTklFRCI9PT1iLm5hbWU/bS5jYWxsKG51bGwsYik6Zy5jYWxsKG51bGwsYil9O3RyeXtiKGQscSxvKX1jYXRjaChzKXtPVC5lcnJvcigiQ291bGRuJ3QgZ2V0IFVzZXJNZWRpYTogIitzLnRvU3RyaW5nKCkpO28oKTtyZXR1cm59LTE9PT1sb2NhdGlvbi5wcm90b2NvbC5pbmRleE9mKCJodHRwcyIpP3NldFRpbWVvdXQociwxMDApOnA9c2V0VGltZW91dChyLDUwMCl9fX0pKHdpbmRvdyk7CihmdW5jdGlvbihnKXtmdW5jdGlvbiBiKGEsYil7dmFyIGM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidmlkZW8iKTtjLnNldEF0dHJpYnV0ZSgiYXV0b3BsYXkiLCIiKTtjLmlubmVySFRNTD1hO2lmKGIpeyEwPT09Yi5tdXRlZCYmKGRlbGV0ZSBiLm11dGVkLGMubXV0ZWQ9InRydWUiKTtmb3IodmFyIGQgaW4gYiljLnNldEF0dHJpYnV0ZShkLGJbZF0pfXJldHVybiBjfWZ1bmN0aW9uIGYoYSl7cmV0dXJuIGNbcGFyc2VJbnQoYSwxMCldfHwiQW4gdW5rbm93biBlcnJvciBvY2N1cnJlZC4ifWZ1bmN0aW9uIGEoYSxiLGMsZCl7aWYobmF2aWdhdG9yLm1vekdldFVzZXJNZWRpYXx8MDxiLmdldFZpZGVvVHJhY2tzKCkubGVuZ3RoJiZiLmdldFZpZGVvVHJhY2tzKClbMF0uZW5hYmxlZCl7dmFyIGo9ZnVuY3Rpb24oKXtjbGVhclRpbWVvdXQocCk7YS5yZW1vdmVFdmVudExpc3RlbmVyKCJsb2FkZWRtZXRhZGF0YSIsbCwhMSk7YS5yZW1vdmVFdmVudExpc3RlbmVyKCJlcnJvciIsbSwhMSl9LApsPWZ1bmN0aW9uKCl7aigpO2MoKX0sbT1mdW5jdGlvbihhKXtqKCk7ZCgiVGhlcmUgd2FzIGFuIHVuZXhwZWN0ZWQgcHJvYmxlbSB3aXRoIHRoZSBWaWRlbyBTdHJlYW06ICIrZihhLnRhcmdldC5lcnJvci5jb2RlKSl9LHA9c2V0VGltZW91dChmdW5jdGlvbigpezA9PT1hLmN1cnJlbnRUaW1lP2QoIlRoZSB2aWRlbyBzdHJlYW0gZmFpbGVkIHRvIGNvbm5lY3QuIFBsZWFzZSBub3RpZnkgdGhlIHNpdGUgb3duZXIgaWYgdGhpcyBjb250aW51ZXMgdG8gaGFwcGVuLiIpOihPVC53YXJuKCJOZXZlciBnb3QgdGhlIGxvYWRlZG1ldGFkYXRhIGV2ZW50IGJ1dCBjdXJyZW50VGltZSA+IDAiKSxjKCkpfS5iaW5kKHRoaXMpLDNFNCk7YS5hZGRFdmVudExpc3RlbmVyKCJsb2FkZWRtZXRhZGF0YSIsbCwhMSk7YS5hZGRFdmVudExpc3RlbmVyKCJlcnJvciIsbSwhMSk7Yi5vbmVuZGVkPWZ1bmN0aW9uKCl7aigpO2QoIlN0cmVhbSBlbmRlZCB3aGlsZSB0cnlpbmcgdG8gYmluZCBpdCB0byBhIHZpZGVvIGVsZW1lbnQuIil9fWVsc2UgYygpOwp2b2lkIDAhPT1hLnNyY09iamVjdD9hLnNyY09iamVjdD1iOnZvaWQgMCE9PWEubW96U3JjT2JqZWN0P2EubW96U3JjT2JqZWN0PWI6YS5zcmM9Zy5VUkwuY3JlYXRlT2JqZWN0VVJMKGIpO2EucGxheSgpfU9ULlZpZGVvT3JpZW50YXRpb249e1JPVEFURURfTk9STUFMOiJPVFZpZGVvT3JpZW50YXRpb25Sb3RhdGVkTm9ybWFsIixST1RBVEVEX0xFRlQ6Ik9UVmlkZW9PcmllbnRhdGlvblJvdGF0ZWRMZWZ0IixST1RBVEVEX1JJR0hUOiJPVFZpZGVvT3JpZW50YXRpb25Sb3RhdGVkUmlnaHQiLFJPVEFURURfVVBTSURFX0RPV046Ik9UVmlkZW9PcmllbnRhdGlvblJvdGF0ZWRVcHNpZGVEb3duIn07T1QuVmlkZW9FbGVtZW50PWZ1bmN0aW9uKGMpe3ZhciBkLGksayxqPSExLGw9ITEsYz1PVC4kLmRlZmF1bHRzKGN8fHt9LHtmYWxsYmFja1RleHQ6IlNvcnJ5LCBXZWIgUlRDIGlzIG5vdCBhdmFpbGFibGUgaW4geW91ciBicm93c2VyIn0pO09ULiQuZXZlbnRpbmcodGhpcyk7dmFyIG09ZnVuY3Rpb24oYSl7dGhpcy50cmlnZ2VyKCJlcnJvciIsCm51bGwsIlRoZXJlIHdhcyBhbiB1bmV4cGVjdGVkIHByb2JsZW0gd2l0aCB0aGUgVmlkZW8gU3RyZWFtOiAiK2YoYS50YXJnZXQuZXJyb3IuY29kZSksdGhpcyl9LmJpbmQodGhpcykscD1mdW5jdGlvbigpe2o9ITA7aS5hZGRFdmVudExpc3RlbmVyKCJlcnJvciIsbSwhMSk7dGhpcy50cmlnZ2VyKCJzdHJlYW1Cb3VuZCIsdGhpcyl9LmJpbmQodGhpcyksbj1mdW5jdGlvbihhKXt0aGlzLnRyaWdnZXIoImxvYWRFcnJvciIsT1QuRXhjZXB0aW9uQ29kZXMuUDJQX0NPTk5FQ1RJT05fRkFJTEVELGEsdGhpcyl9LmJpbmQodGhpcykscj1mdW5jdGlvbigpe2x8fChPVC53YXJuKCJWaWRlbyBlbGVtZW50IHBhdXNlZCwgYXV0by1yZXN1bWluZy4gSWYgeW91IGludGVuZGVkIHRvIGRvIHRoaXMsIHVzZSBwdWJsaXNoVmlkZW8oZmFsc2UpIG9yIHN1YnNjcmliZVRvVmlkZW8oZmFsc2UpIGluc3RlYWQuIiksbD0hMCk7aS5wbGF5KCl9O2k9YihjLmZhbGxiYWNrVGV4dCxjLmF0dHJpYnV0ZXMpOwppLmFkZEV2ZW50TGlzdGVuZXIoInBhdXNlIixyKTtPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0aGlzLHtzdHJlYW06e2dldDpmdW5jdGlvbigpe3JldHVybiBkfX0sZG9tRWxlbWVudDp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGl9fSxwYXJlbnRFbGVtZW50OntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4ga319LGlzQm91bmRUb1N0cmVhbTp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGp9fSxwb3N0ZXI6e2dldDpmdW5jdGlvbigpe3JldHVybiBpLmdldEF0dHJpYnV0ZSgicG9zdGVyIil9LHNldDpmdW5jdGlvbihhKXtpLnNldEF0dHJpYnV0ZSgicG9zdGVyIixhKX19fSk7dGhpcy5hcHBlbmRUbz1mdW5jdGlvbihhKXtrPWE7ay5hcHBlbmRDaGlsZChpKTtyZXR1cm4gdGhpc307dGhpcy5iaW5kVG9TdHJlYW09ZnVuY3Rpb24oYil7aj0hMTtkPWI7YShpLGQscCxuKTtyZXR1cm4gdGhpc307dGhpcy51bmJpbmRTdHJlYW09ZnVuY3Rpb24oKXtpZighZClyZXR1cm4gdGhpcztpJiYobmF2aWdhdG9yLm1vekdldFVzZXJNZWRpYT8KaS5tb3pTcmNPYmplY3Q9bnVsbDpnLlVSTC5yZXZva2VPYmplY3RVUkwoaS5zcmMpKTtkPW51bGw7cmV0dXJuIHRoaXN9O3RoaXMuc2V0QXVkaW9Wb2x1bWU9ZnVuY3Rpb24oYSl7aSYmKGkudm9sdW1lPU9ULiQucm91bmRGbG9hdChhLzEwMCwyKSl9O3RoaXMuZ2V0QXVkaW9Wb2x1bWU9ZnVuY3Rpb24oKXtyZXR1cm4gaT9wYXJzZUludCgxMDAqaS52b2x1bWUsMTApOjUwfTt0aGlzLndoZW5UaW1lSW5jcmVtZW50cz1mdW5jdGlvbihhLGIpe2lmKGkpe3ZhciBjLGQ9ZnVuY3Rpb24oKXshY3x8Yz49aS5jdXJyZW50VGltZT9jPWkuY3VycmVudFRpbWU6KGkucmVtb3ZlRXZlbnRMaXN0ZW5lcigidGltZXVwZGF0ZSIsZCwhMSksYS5jYWxsKGIsdGhpcykpfS5iaW5kKHRoaXMpO2kuYWRkRXZlbnRMaXN0ZW5lcigidGltZXVwZGF0ZSIsZCwhMSl9fTt0aGlzLmRlc3Ryb3k9ZnVuY3Rpb24oKXt0aGlzLm9mZigpO3RoaXMudW5iaW5kU3RyZWFtKCk7aSYmKGkucmVtb3ZlRXZlbnRMaXN0ZW5lcigicGF1c2UiLApyKSxPVC4kLnJlbW92ZUVsZW1lbnQoaSksaT1udWxsKTtrPW51bGx9fTtPVC4kLmNhbkRlZmluZVByb3BlcnR5JiZPYmplY3QuZGVmaW5lUHJvcGVydGllcyhPVC5WaWRlb0VsZW1lbnQucHJvdG90eXBlLHtpbWdEYXRhOntnZXQ6ZnVuY3Rpb24oKXt2YXIgYT1PVC4kLmNyZWF0ZUVsZW1lbnQoImNhbnZhcyIse3dpZHRoOnRoaXMuZG9tRWxlbWVudC52aWRlb1dpZHRoLGhlaWdodDp0aGlzLmRvbUVsZW1lbnQudmlkZW9IZWlnaHQsc3R5bGU6e2Rpc3BsYXk6Im5vbmUifX0pO2RvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYSk7dHJ5e2EuZ2V0Q29udGV4dCgiMmQiKS5kcmF3SW1hZ2UodGhpcy5kb21FbGVtZW50LDAsMCxhLndpZHRoLGEuaGVpZ2h0KX1jYXRjaChiKXtyZXR1cm4gT1Qud2FybigiQ2Fubm90IGdldCBpbWFnZSBkYXRhIHlldCIpLG51bGx9dmFyIGM9YS50b0RhdGFVUkwoImltYWdlL3BuZyIpO09ULiQucmVtb3ZlRWxlbWVudChhKTtyZXR1cm4gYy5yZXBsYWNlKCJkYXRhOmltYWdlL3BuZztiYXNlNjQsIiwKIiIpLnRyaW0oKX19LHZpZGVvV2lkdGg6e2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vcmllbnRhdGlvbiYmdGhpcy5fb3JpZW50YXRpb24ud2lkdGg/dGhpcy5fb3JpZW50YXRpb24ud2lkdGg6dGhpcy5kb21FbGVtZW50WyJ2aWRlbyIrKHRoaXMuaXNSb3RhdGVkPyJIZWlnaHQiOiJXaWR0aCIpXX19LHZpZGVvSGVpZ2h0OntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb3JpZW50YXRpb24mJnRoaXMuX29yaWVudGF0aW9uLmhlaWdodD90aGlzLl9vcmllbnRhdGlvbi5oZWlnaHQ6dGhpcy5kb21FbGVtZW50WyJ2aWRlbyIrKHRoaXMuaXNSb3RhdGVkPyJXaWR0aCI6IkhlaWdodCIpXX19LGFzcGVjdFJhdGlvOntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4odGhpcy52aWRlb1dpZHRoKzApL3RoaXMudmlkZW9IZWlnaHR9fSxpc1JvdGF0ZWQ6e2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vcmllbnRhdGlvbiYmKCJPVFZpZGVvT3JpZW50YXRpb25Sb3RhdGVkTGVmdCI9PXRoaXMuX29yaWVudGF0aW9uLnZpZGVvT3JpZW50YXRpb258fAoiT1RWaWRlb09yaWVudGF0aW9uUm90YXRlZFJpZ2h0Ij09dGhpcy5fb3JpZW50YXRpb24udmlkZW9PcmllbnRhdGlvbil9fX0pO3ZhciBkPXtPVFZpZGVvT3JpZW50YXRpb25Sb3RhdGVkTm9ybWFsOiJyb3RhdGUoMGRlZykiLE9UVmlkZW9PcmllbnRhdGlvblJvdGF0ZWRMZWZ0OiJyb3RhdGUoOTBkZWcpIixPVFZpZGVvT3JpZW50YXRpb25Sb3RhdGVkUmlnaHQ6InJvdGF0ZSgtOTBkZWcpIixPVFZpZGVvT3JpZW50YXRpb25Sb3RhdGVkVXBzaWRlRG93bjoicm90YXRlKDE4MGRlZykifTtPVC4kLmNhbkRlZmluZVByb3BlcnR5JiZPYmplY3QuZGVmaW5lUHJvcGVydHkoT1QuVmlkZW9FbGVtZW50LnByb3RvdHlwZSwib3JpZW50YXRpb24iLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb3JpZW50YXRpb259LHNldDpmdW5jdGlvbihhKXt0aGlzLl9vcmllbnRhdGlvbj1hO2E9ZFthLnZpZGVvT3JpZW50YXRpb25dfHxkLlJPVEFURURfTk9STUFMO3N3aXRjaChPVC4kLmJyb3dzZXIoKSl7Y2FzZSAiQ2hyb21lIjpjYXNlICJTYWZhcmkiOnRoaXMuZG9tRWxlbWVudC5zdHlsZS53ZWJraXRUcmFuc2Zvcm09CmE7YnJlYWs7Y2FzZSAiSUUiOnRoaXMuZG9tRWxlbWVudC5zdHlsZS5tc1RyYW5zZm9ybT1hO2JyZWFrO2RlZmF1bHQ6dGhpcy5kb21FbGVtZW50LnN0eWxlLnRyYW5zZm9ybT1hfXRoaXMudHJpZ2dlcigib3JpZW50YXRpb25DaGFuZ2VkIil9fSk7dmFyIGM9e307Zy5NZWRpYUVycm9yJiYoY1tnLk1lZGlhRXJyb3IuTUVESUFfRVJSX0FCT1JURURdPSJUaGUgZmV0Y2hpbmcgcHJvY2VzcyBmb3IgdGhlIG1lZGlhIHJlc291cmNlIHdhcyBhYm9ydGVkIGJ5IHRoZSB1c2VyIGFnZW50IGF0IHRoZSB1c2VyJ3MgcmVxdWVzdC4iLGNbZy5NZWRpYUVycm9yLk1FRElBX0VSUl9ORVRXT1JLXT0iQSBuZXR3b3JrIGVycm9yIG9mIHNvbWUgZGVzY3JpcHRpb24gY2F1c2VkIHRoZSB1c2VyIGFnZW50IHRvIHN0b3AgZmV0Y2hpbmcgdGhlIG1lZGlhIHJlc291cmNlLCBhZnRlciB0aGUgcmVzb3VyY2Ugd2FzIGVzdGFibGlzaGVkIHRvIGJlIHVzYWJsZS4iLGNbZy5NZWRpYUVycm9yLk1FRElBX0VSUl9ERUNPREVdPQoiQW4gZXJyb3Igb2Ygc29tZSBkZXNjcmlwdGlvbiBvY2N1cnJlZCB3aGlsZSBkZWNvZGluZyB0aGUgbWVkaWEgcmVzb3VyY2UsIGFmdGVyIHRoZSByZXNvdXJjZSB3YXMgZXN0YWJsaXNoZWQgdG8gYmUgdXNhYmxlLiIsY1tnLk1lZGlhRXJyb3IuTUVESUFfRVJSX1NSQ19OT1RfU1VQUE9SVEVEXT0iVGhlIG1lZGlhIHJlc291cmNlIGluZGljYXRlZCBieSB0aGUgc3JjIGF0dHJpYnV0ZSB3YXMgbm90IHN1aXRhYmxlLiAiKX0pKHdpbmRvdyk7CihmdW5jdGlvbihnKXt2YXIgYj1bXSxmPSExO09ULkFuYWx5dGljcz1mdW5jdGlvbigpe3ZhciBhPU9ULnByb3BlcnRpZXMubG9nZ2luZ1VSTCsiL2xvZ2dpbmcvQ2xpZW50RXZlbnQiLGQ9T1QucHJvcGVydGllcy5sb2dnaW5nVVJMKyIvbG9nZ2luZy9DbGllbnRRb3MiLGM9e30sZT17cGF5bG9hZFR5cGU6InBheWxvYWRfdHlwZSIscGFydG5lcklkOiJwYXJ0bmVyX2lkIixzdHJlYW1JZDoic3RyZWFtX2lkIixzZXNzaW9uSWQ6InNlc3Npb25faWQiLGNvbm5lY3Rpb25JZDoiY29ubmVjdGlvbl9pZCIsd2lkZ2V0VHlwZToid2lkZ2V0X3R5cGUiLHdpZGdldElkOiJ3aWRnZXRfaWQiLGF2Z0F1ZGlvQml0cmF0ZToiYXZnX2F1ZGlvX2JpdHJhdGUiLGF2Z1ZpZGVvQml0cmF0ZToiYXZnX3ZpZGVvX2JpdHJhdGUifSxoPWZ1bmN0aW9uKGIsYyxoLGUpe09ULiQucG9zdChjP2Q6YSx7c3VjY2VzczpoLGVycm9yOmUsZGF0YTpiLGhlYWRlcnM6eyJDb250ZW50LVR5cGUiOiJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQifX0pfSwKaT1mdW5jdGlvbigpe2lmKCFmJiYwPGIubGVuZ3RoKXtmPSEwO3ZhciBhPWJbMF0sYz1mdW5jdGlvbigpe2Iuc2hpZnQoKTtmPSExO2koKX07YSYmaChhLmRhdGEsYS5pc1FvcyxmdW5jdGlvbigpe2Eub25Db21wbGV0ZSgpO3NldFRpbWVvdXQoYyw1MCl9LGZ1bmN0aW9uKCl7T1QuZGVidWcoIkZhaWxlZCB0byBzZW5kIENsaWVudEV2ZW50LCBtb3Zpbmcgb24gdG8gdGhlIG5leHQgaXRlbS4iKTtzZXRUaW1lb3V0KGMsNTApfSl9fTt0aGlzLmxvZ0Vycm9yPWZ1bmN0aW9uKGEsYixkLGgsZSl7ZXx8KGU9e30pO2Q9ZS5wYXJ0bmVySWQ7aWYoITA9PT1PVC5Db25maWcuZ2V0KCJleGNlcHRpb25Mb2dnaW5nIiwiZW5hYmxlZCIsZCkpe3ZhciBmO2Q/KGY9W2QsYixhXS5qb2luKCJfIiksZj0xMDA+PShjW2ZdfHwwKSk6Zj0hMTtpZighZil7dmFyIGQ9W2QsYixhXS5qb2luKCJfIiksZz10aGlzLmVzY2FwZVBheWxvYWQoT1QuJC5leHRlbmQoaHx8e30se21lc3NhZ2U6Zyx1c2VyQWdlbnQ6bmF2aWdhdG9yLnVzZXJBZ2VudH0pKTsKY1tkXT0idW5kZWZpbmVkIiE9PXR5cGVvZiBjW2RdP2NbZF0rMToxO3JldHVybiB0aGlzLmxvZ0V2ZW50KE9ULiQuZXh0ZW5kKGUse2FjdGlvbjpiKyIuIithLHBheWxvYWRUeXBlOmdbMF0scGF5bG9hZDpnWzFdfSkpfX19O3RoaXMubG9nRXZlbnQ9ZnVuY3Rpb24oYSl7dmFyIGM9YS5wYXJ0bmVySWQ7YXx8KGE9e30pO3ZhciBhPU9ULiQuZXh0ZW5kKHt2YXJpYXRpb246IiIsZ3VpZDp0aGlzLmdldENsaWVudEd1aWQoKSx3aWRnZXRfaWQ6IiIsc2Vzc2lvbl9pZDoiIixjb25uZWN0aW9uX2lkOiIiLHN0cmVhbV9pZDoiIixwYXJ0bmVyX2lkOmMsc291cmNlOmcubG9jYXRpb24uaHJlZixzZWN0aW9uOiIiLGJ1aWxkOiIifSxhKSxkO2ZvcihkIGluIGUpZS5oYXNPd25Qcm9wZXJ0eShkKSYmYVtkXSYmKGFbZVtkXV09YVtkXSxkZWxldGUgYVtkXSk7Yi5wdXNoKHtkYXRhOmEsb25Db21wbGV0ZTpmdW5jdGlvbigpe30saXNRb3M6ITF9KTtpKCl9O3RoaXMubG9nUU9TPWZ1bmN0aW9uKGEpe3ZhciBjPQphLnBhcnRuZXJJZDthfHwoYT17fSk7dmFyIGE9T1QuJC5leHRlbmQoe2d1aWQ6dGhpcy5nZXRDbGllbnRHdWlkKCksd2lkZ2V0X2lkOiIiLHNlc3Npb25faWQ6IiIsY29ubmVjdGlvbl9pZDoiIixzdHJlYW1faWQ6IiIscGFydG5lcl9pZDpjLHNvdXJjZTpnLmxvY2F0aW9uLmhyZWYsYnVpbGQ6IiIsZHVyYXRpb246MH0sYSksZDtmb3IoZCBpbiBlKWUuaGFzT3duUHJvcGVydHkoZCkmJmFbZF0mJihhW2VbZF1dPWFbZF0sZGVsZXRlIGFbZF0pO2IucHVzaCh7ZGF0YTphLG9uQ29tcGxldGU6ZnVuY3Rpb24oKXt9LGlzUW9zOiEwfSk7aSgpfTt0aGlzLmVzY2FwZVBheWxvYWQ9ZnVuY3Rpb24oYSl7dmFyIGI9W10sYz1bXSxkO2ZvcihkIGluIGEpYS5oYXNPd25Qcm9wZXJ0eShkKSYmKG51bGwhPT1hW2RdJiZ2b2lkIDAhPT1hW2RdKSYmKGIucHVzaChhW2RdP2FbZF0udG9TdHJpbmcoKS5yZXBsYWNlKCJ8IiwiXFx8Iik6IiIpLGMucHVzaChkLnRvU3RyaW5nKCkucmVwbGFjZSgifCIsIlxcfCIpKSk7CnJldHVybltjLmpvaW4oInwiKSxiLmpvaW4oInwiKV19O3RoaXMuZ2V0Q2xpZW50R3VpZD1mdW5jdGlvbigpe3ZhciBhPU9ULiQuZ2V0Q29va2llKCJvcGVudG9rX2NsaWVudF9pZCIpO2F8fChhPU9ULiQudXVpZCgpLE9ULiQuc2V0Q29va2llKCJvcGVudG9rX2NsaWVudF9pZCIsYSkpO3JldHVybiBhfX19KSh3aW5kb3cpOwooZnVuY3Rpb24oZyl7ImZpbGU6Ij09PWxvY2F0aW9uLnByb3RvY29sJiZhbGVydCgiWW91IGNhbm5vdCB0ZXN0IGEgcGFnZSB1c2luZyBXZWJSVEMgdGhyb3VnaCB0aGUgZmlsZSBzeXN0ZW0gZHVlIHRvIGJyb3dzZXIgcGVybWlzc2lvbnMuIFlvdSBtdXN0IHJ1biBpdCBvdmVyIGEgd2ViIHNlcnZlci4iKTtnLk9UfHwoZy5PVD17fSk7IWcuVVJMJiZnLndlYmtpdFVSTCYmKGcuVVJMPWcud2Via2l0VVJMKTt2YXIgYixmPWRvY3VtZW50LmxvY2F0aW9uLmhhc2g7T1QuaW5pdFNlc3Npb249ZnVuY3Rpb24oYSl7dmFyIGI9T1Quc2Vzc2lvbnMuZ2V0KGEpO2lmKCFiKXtiPW5ldyBPVC5TZXNzaW9uKGEpO09ULnNlc3Npb25zLmFkZChiKX1yZXR1cm4gYn07T1QuaW5pdFB1Ymxpc2hlcj1mdW5jdGlvbihhLGIsYyxlKXtPVC5kZWJ1ZygiVEIuaW5pdFB1Ymxpc2hlcigiK2IrIikiKTt2YXIgaD1uZXcgT1QuUHVibGlzaGVyO09ULnB1Ymxpc2hlcnMuYWRkKGgpO2lmKGUmJk9ULiQuaXNGdW5jdGlvbihlKSl7YT0KZnVuY3Rpb24gayhhKXtoLm9mZigiaW5pdFN1Y2Nlc3MiLGspO2gub2ZmKCJwdWJsaXNoQ29tcGxldGUiLGspO2UuYXBwbHkobnVsbCxhcmd1bWVudHMpfTtoLm9uY2UoImluaXRTdWNjZXNzIixhKTtoLm9uY2UoInB1Ymxpc2hDb21wbGV0ZSIsYSl9aC5wdWJsaXNoKGIsYyk7cmV0dXJuIGh9O09ULmNoZWNrU3lzdGVtUmVxdWlyZW1lbnRzPWZ1bmN0aW9uKCl7T1QuZGVidWcoIlRCLmNoZWNrU3lzdGVtUmVxdWlyZW1lbnRzKCkiKTt2YXIgYT1PVC4kLnN1cHBvcnRzV2ViU29ja2V0cygpJiZPVC4kLnN1cHBvcnRzV2ViUlRDKCk/dGhpcy5IQVNfUkVRVUlSRU1FTlRTOnRoaXMuTk9UX0hBU19SRVFVSVJFTUVOVFM7T1QuY2hlY2tTeXN0ZW1SZXF1aXJlbWVudHM9ZnVuY3Rpb24oKXtPVC5kZWJ1ZygiVEIuY2hlY2tTeXN0ZW1SZXF1aXJlbWVudHMoKSIpO3JldHVybiBhfTtyZXR1cm4gYX07T1QudXBncmFkZVN5c3RlbVJlcXVpcmVtZW50cz1mdW5jdGlvbigpe09ULm9uTG9hZChmdW5jdGlvbigpe2Zvcih2YXIgYT0KZmFsc2UsZD1kb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgibWV0YSIpLGM9MDtjPGQubGVuZ3RoO2MrKyl7dmFyIGU9ZFtjXS5odHRwRXF1aXYsaD1kW2NdLmNvbnRlbnQ7aWYoZSYmZS50b0xvd2VyQ2FzZSgpPT09IngtdWEtY29tcGF0aWJsZSImJmgmJmgudG9Mb3dlckNhc2UoKS5pbmRleE9mKCJjaHJvbWU9MSIpPi0xKXthPXRydWU7YnJlYWt9fWRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZnVuY3Rpb24oKXt2YXIgYj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpZnJhbWUiKTtiLmlkPSJfdXBncmFkZUZsYXNoIjtiLnN0eWxlLnBvc2l0aW9uPSJhYnNvbHV0ZSI7Yi5zdHlsZS5wb3NpdGlvbj0iZml4ZWQiO2Iuc3R5bGUuaGVpZ2h0PSIxMDAlIjtiLnN0eWxlLndpZHRoPSIxMDAlIjtiLnN0eWxlLnRvcD0iMHB4IjtiLnN0eWxlLmxlZnQ9IjBweCI7Yi5zdHlsZS5yaWdodD0iMHB4IjtiLnN0eWxlLmJvdHRvbT0iMHB4IjtiLnN0eWxlLnpJbmRleD0xRTM7dHJ5e2Iuc3R5bGUuYmFja2dyb3VuZENvbG9yPQoicmdiYSgwLDAsMCwwLjIpIn1jYXRjaChjKXtiLnN0eWxlLmJhY2tncm91bmRDb2xvcj0idHJhbnNwYXJlbnQiO2Iuc2V0QXR0cmlidXRlKCJhbGxvd1RyYW5zcGFyZW5jeSIsInRydWUiKX1iLnNldEF0dHJpYnV0ZSgiZnJhbWVCb3JkZXIiLCIwIik7Yi5mcmFtZUJvcmRlcj0iMCI7Yi5zY3JvbGxpbmc9Im5vIjtiLnNldEF0dHJpYnV0ZSgic2Nyb2xsaW5nIiwibm8iKTtiLnNyYz1PVC5wcm9wZXJ0aWVzLmFzc2V0VVJMKyIvaHRtbC91cGdyYWRlRmxhc2guaHRtbCIrKGE/Ij9jZj0xIjoiIikrIiMiK2VuY29kZVVSSUNvbXBvbmVudChkb2N1bWVudC5sb2NhdGlvbi5ocmVmKTtyZXR1cm4gYn0oKSk7YiYmY2xlYXJJbnRlcnZhbChiKTtiPXNldEludGVydmFsKGZ1bmN0aW9uKCl7dmFyIGE9ZG9jdW1lbnQubG9jYXRpb24uaGFzaCxiPS9eIz9cZCsmLztpZihhIT09ZiYmYi50ZXN0KGEpKXtmPWE7aWYoYS5yZXBsYWNlKGIsIiIpPT09ImNsb3NlX3dpbmRvdyIpe2RvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIl91cGdyYWRlRmxhc2giKSk7CmRvY3VtZW50LmxvY2F0aW9uLmhhc2g9IiJ9ZWxzZSBpZihhLnJlcGxhY2UoYiwiIik9PT0iaW5zdGFsbGVkX2djZiIpe2RvY3VtZW50LmxvY2F0aW9uLmhhc2g9IiI7ZG9jdW1lbnQubG9jYXRpb24uaHJlZj1kb2N1bWVudC5sb2NhdGlvbi5ocmVmLnJlcGxhY2UoIiMiLCIiKX19fSwxMDApfSl9O09ULnJlcG9ydElzc3VlPWZ1bmN0aW9uKCl7T1Qud2FybigiVG9EbzogaGF2ZW4ndCB5ZXQgaW1wbGVtZW50ZWQgVEIucmVwb3J0SXNzdWUiKX07T1QuY29tcG9uZW50cz17fTtPVC5zZXNzaW9ucz17fTtPVC5ydGM9e307T1QuQVBJS0VZPWZ1bmN0aW9uKCl7dmFyIGE9ZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoInNjcmlwdCIpLGE9YVthLmxlbmd0aC0xXSxhPWEuZ2V0QXR0cmlidXRlKCJzcmMiKXx8YS5zcmM7cmV0dXJuKGE9YS5tYXRjaCgvW1w/XCZdYXBpa2V5PShbXiZdKykvaSkpP2FbMV06IiJ9KCk7T1QuSEFTX1JFUVVJUkVNRU5UUz0xO09ULk5PVF9IQVNfUkVRVUlSRU1FTlRTPQowO2cuT1R8fChnLk9UPU9UKTtnLlRCfHwoZy5UQj1PVCl9KSh3aW5kb3cpOwooZnVuY3Rpb24oKXtPVC5Db2xsZWN0aW9uPWZ1bmN0aW9uKGcpe3ZhciBiPVtdLGY9e30sYT1nfHwiaWQiO09ULiQuZXZlbnRpbmcodGhpcywhMCk7dmFyIGQ9ZnVuY3Rpb24oYSl7dGhpcy50cmlnZ2VyKCJ1cGRhdGUiLGEpO3RoaXMudHJpZ2dlcigidXBkYXRlOiIrYS50YXJnZXQuaWQsYSl9LmJpbmQodGhpcyksYz1mdW5jdGlvbihhLGIpe2lmKHZvaWQgMCE9PWZbYV0pe3ZhciBjPWZbYV07ZGVsZXRlIGZbYV07ZltiXT1jfX0uYmluZCh0aGlzKSxlPWZ1bmN0aW9uKGEpe3RoaXMucmVtb3ZlKGEudGFyZ2V0LGEucmVhc29uKX0uYmluZCh0aGlzKTt0aGlzLnJlc2V0PWZ1bmN0aW9uKCl7Yi5mb3JFYWNoKGZ1bmN0aW9uKGEpe2Eub2ZmKCJ1cGRhdGVkIixkLHRoaXMpO2Eub2ZmKCJkZXN0cm95ZWQiLGUsdGhpcyk7YS5vZmYoImlkVXBkYXRlZCIsYyx0aGlzKX0sdGhpcyk7Yj1bXTtmPXt9fTt0aGlzLmRlc3Ryb3k9ZnVuY3Rpb24oKXtiLmZvckVhY2goZnVuY3Rpb24oYSl7YS5kZXN0cm95KHZvaWQgMCwKITApfSk7dGhpcy5yZXNldCgpO3RoaXMub2ZmKCl9O3RoaXMuZ2V0PWZ1bmN0aW9uKGEpe3JldHVybiBhJiZ2b2lkIDAhPT1mW2FdP2JbZlthXV06dm9pZCAwfTt0aGlzLmhhcz1mdW5jdGlvbihhKXtyZXR1cm4gYSYmdm9pZCAwIT09ZlthXX07dGhpcy50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiBiLnRvU3RyaW5nKCl9O3RoaXMud2hlcmU9ZnVuY3Rpb24oYSxjKXtyZXR1cm4gT1QuJC5pc0Z1bmN0aW9uKGEpP2IuZmlsdGVyKGEsYyk6Yi5maWx0ZXIoZnVuY3Rpb24oYil7Zm9yKHZhciBjIGluIGEpaWYoYltjXSE9PWFbY10pcmV0dXJuITE7cmV0dXJuITB9KX07dGhpcy5maW5kPWZ1bmN0aW9uKGEsYyl7dmFyIGQ7ZD1PVC4kLmlzRnVuY3Rpb24oYSk/YTpmdW5jdGlvbihiKXtmb3IodmFyIGMgaW4gYSlpZihiW2NdIT09YVtjXSlyZXR1cm4hMTtyZXR1cm4hMH07ZD1kLmJpbmQoYyk7Zm9yKHZhciBlPTA7ZTxiLmxlbmd0aDsrK2UpaWYoITA9PT1kKGJbZV0pKXJldHVybiBiW2VdOwpyZXR1cm4gbnVsbH07dGhpcy5hZGQ9ZnVuY3Rpb24oaCl7dmFyIGc9aFthXTtpZih0aGlzLmhhcyhnKSlyZXR1cm4gT1Qud2FybigiTW9kZWwgIitnKyIgaXMgYWxyZWFkeSBpbiB0aGUgY29sbGVjdGlvbiIsYiksdGhpcztmW2ddPWIucHVzaChoKS0xO2gub24oInVwZGF0ZWQiLGQsdGhpcyk7aC5vbigiZGVzdHJveWVkIixlLHRoaXMpO2gub24oImlkVXBkYXRlZCIsYyx0aGlzKTt0aGlzLnRyaWdnZXIoImFkZCIsaCk7dGhpcy50cmlnZ2VyKCJhZGQ6IitnLGgpO3JldHVybiB0aGlzfTt0aGlzLnJlbW92ZT1mdW5jdGlvbihoLGcpe3ZhciBrPWhbYV07Yi5zcGxpY2UoZltrXSwxKTtmb3IodmFyIGo9ZltrXTtqPGIubGVuZ3RoOysrailmW2Jbal1bYV1dPWo7ZGVsZXRlIGZba107aC5vZmYoInVwZGF0ZWQiLGQsdGhpcyk7aC5vZmYoImRlc3Ryb3llZCIsZSx0aGlzKTtoLm9mZigiaWRVcGRhdGVkIixjLHRoaXMpO3RoaXMudHJpZ2dlcigicmVtb3ZlIixoLGcpO3RoaXMudHJpZ2dlcigicmVtb3ZlOiIrCmssaCxnKTtyZXR1cm4gdGhpc307T1QuJC5kZWZpbmVHZXR0ZXJzKHRoaXMse2xlbmd0aDpmdW5jdGlvbigpe3JldHVybiBiLmxlbmd0aH19KX19KSh0aGlzKTsKKGZ1bmN0aW9uKCl7T1QuRXZlbnQ9T1QuJC5ldmVudGluZy5FdmVudCgpO09ULkV2ZW50Lm5hbWVzPXtBQ1RJVkU6ImFjdGl2ZSIsSU5BQ1RJVkU6ImluYWN0aXZlIixVTktOT1dOOiJ1bmtub3duIixQRVJfU0VTU0lPTjoicGVyU2Vzc2lvbiIsUEVSX1NUUkVBTToicGVyU3RyZWFtIixFWENFUFRJT046ImV4Y2VwdGlvbiIsSVNTVUVfUkVQT1JURUQ6Imlzc3VlUmVwb3J0ZWQiLFNFU1NJT05fQ09OTkVDVEVEOiJzZXNzaW9uQ29ubmVjdGVkIixTRVNTSU9OX0RJU0NPTk5FQ1RFRDoic2Vzc2lvbkRpc2Nvbm5lY3RlZCIsU1RSRUFNX0NSRUFURUQ6InN0cmVhbUNyZWF0ZWQiLFNUUkVBTV9ERVNUUk9ZRUQ6InN0cmVhbURlc3Ryb3llZCIsQ09OTkVDVElPTl9DUkVBVEVEOiJjb25uZWN0aW9uQ3JlYXRlZCIsQ09OTkVDVElPTl9ERVNUUk9ZRUQ6ImNvbm5lY3Rpb25EZXN0cm95ZWQiLFNJR05BTDoic2lnbmFsIixTVFJFQU1fUFJPUEVSVFlfQ0hBTkdFRDoic3RyZWFtUHJvcGVydHlDaGFuZ2VkIiwKTUlDUk9QSE9ORV9MRVZFTF9DSEFOR0VEOiJtaWNyb3Bob25lTGV2ZWxDaGFuZ2VkIixSRVNJWkU6InJlc2l6ZSIsU0VUVElOR1NfQlVUVE9OX0NMSUNLOiJzZXR0aW5nc0J1dHRvbkNsaWNrIixERVZJQ0VfSU5BQ1RJVkU6ImRldmljZUluYWN0aXZlIixJTlZBTElEX0RFVklDRV9OQU1FOiJpbnZhbGlkRGV2aWNlTmFtZSIsQUNDRVNTX0FMTE9XRUQ6ImFjY2Vzc0FsbG93ZWQiLEFDQ0VTU19ERU5JRUQ6ImFjY2Vzc0RlbmllZCIsQUNDRVNTX0RJQUxPR19PUEVORUQ6ImFjY2Vzc0RpYWxvZ09wZW5lZCIsQUNDRVNTX0RJQUxPR19DTE9TRUQ6ImFjY2Vzc0RpYWxvZ0Nsb3NlZCIsRUNIT19DQU5DRUxMQVRJT05fTU9ERV9DSEFOR0VEOiJlY2hvQ2FuY2VsbGF0aW9uTW9kZUNoYW5nZWQiLFBVQkxJU0hFUl9ERVNUUk9ZRUQ6ImRlc3Ryb3llZCIsU1VCU0NSSUJFUl9ERVNUUk9ZRUQ6ImRlc3Ryb3llZCIsREVWSUNFU19ERVRFQ1RFRDoiZGV2aWNlc0RldGVjdGVkIixERVZJQ0VTX1NFTEVDVEVEOiJkZXZpY2VzU2VsZWN0ZWQiLApDTE9TRV9CVVRUT05fQ0xJQ0s6ImNsb3NlQnV0dG9uQ2xpY2siLE1JQ0xFVkVMOiJtaWNyb3Bob25lQWN0aXZpdHlMZXZlbCIsTUlDR0FJTkNIQU5HRUQ6Im1pY3JvcGhvbmVHYWluQ2hhbmdlZCIsRU5WX0xPQURFRDoiZW52TG9hZGVkIn07T1QuVmFsdWVFdmVudD1mdW5jdGlvbihnLGIpe09ULkV2ZW50LmNhbGwodGhpcyxnKTt0aGlzLnZhbHVlPWJ9O09ULkV4Y2VwdGlvbkNvZGVzPXtKU19FWENFUFRJT046MkUzLEFVVEhFTlRJQ0FUSU9OX0VSUk9SOjEwMDQsSU5WQUxJRF9TRVNTSU9OX0lEOjEwMDUsQ09OTkVDVF9GQUlMRUQ6MTAwNixDT05ORUNUX1JFSkVDVEVEOjEwMDcsQ09OTkVDVElPTl9USU1FT1VUOjEwMDgsTk9UX0NPTk5FQ1RFRDoxMDEwLFAyUF9DT05ORUNUSU9OX0ZBSUxFRDoxMDEzLEFQSV9SRVNQT05TRV9GQUlMVVJFOjEwMTQsVU5BQkxFX1RPX1BVQkxJU0g6MTUwMCxVTkFCTEVfVE9fU0lHTkFMOjE1MTAsVU5BQkxFX1RPX0ZPUkNFX0RJU0NPTk5FQ1Q6MTUyMCwKVU5BQkxFX1RPX0ZPUkNFX1VOUFVCTElTSDoxNTMwfTtPVC5FeGNlcHRpb25FdmVudD1mdW5jdGlvbihnLGIsZixhLGQsYyl7T1QuRXZlbnQuY2FsbCh0aGlzLGcpO3RoaXMubWVzc2FnZT1iO3RoaXMudGl0bGU9Zjt0aGlzLmNvZGU9YTt0aGlzLmNvbXBvbmVudD1kO3RoaXMudGFyZ2V0PWN9O09ULklzc3VlUmVwb3J0ZWRFdmVudD1mdW5jdGlvbihnLGIpe09ULkV2ZW50LmNhbGwodGhpcyxnKTt0aGlzLmlzc3VlSWQ9Yn07T1QuRW52TG9hZGVkRXZlbnQ9ZnVuY3Rpb24oZyl7T1QuRXZlbnQuY2FsbCh0aGlzLGcpfTtPVC5Db25uZWN0aW9uRXZlbnQ9ZnVuY3Rpb24oZyxiLGYpe09ULkV2ZW50LmNhbGwodGhpcyxnKTt0aGlzLmNvbm5lY3Rpb25zPWI7dGhpcy5yZWFzb249Zn07T1QuU3RyZWFtRXZlbnQ9ZnVuY3Rpb24oZyxiLGYsYSl7T1QuRXZlbnQuY2FsbCh0aGlzLGcsYSk7dGhpcy5zdHJlYW1zPWI7dGhpcy5yZWFzb249Zn07T1QuU2Vzc2lvbkNvbm5lY3RFdmVudD1mdW5jdGlvbihnLApiLGYsYSl7T1QuRXZlbnQuY2FsbCh0aGlzLGcpO3RoaXMuY29ubmVjdGlvbnM9Yjt0aGlzLnN0cmVhbXM9Zjt0aGlzLmFyY2hpdmVzPWE7dGhpcy5ncm91cHM9W119O09ULlNlc3Npb25EaXNjb25uZWN0RXZlbnQ9ZnVuY3Rpb24oZyxiLGYpe09ULkV2ZW50LmNhbGwodGhpcyxnLGYpO3RoaXMucmVhc29uPWJ9O09ULlZvbHVtZUV2ZW50PWZ1bmN0aW9uKGcsYixmKXtPVC5FdmVudC5jYWxsKHRoaXMsZyk7dGhpcy5zdHJlYW1JZD1iO3RoaXMudm9sdW1lPWZ9O09ULkRldmljZUV2ZW50PWZ1bmN0aW9uKGcsYixmKXtPVC5FdmVudC5jYWxsKHRoaXMsZyk7dGhpcy5jYW1lcmE9Yjt0aGlzLm1pY3JvcGhvbmU9Zn07T1QuRGV2aWNlU3RhdHVzRXZlbnQ9ZnVuY3Rpb24oZyxiLGYsYSxkKXtPVC5FdmVudC5jYWxsKHRoaXMsZyk7dGhpcy5jYW1lcmFzPWI7dGhpcy5taWNyb3Bob25lcz1mO3RoaXMuc2VsZWN0ZWRDYW1lcmE9YTt0aGlzLnNlbGVjdGVkTWljcm9waG9uZT1kfTtPVC5SZXNpemVFdmVudD0KZnVuY3Rpb24oZyxiLGYsYSxkKXtPVC5FdmVudC5jYWxsKHRoaXMsZyk7dGhpcy53aWR0aEZyb209Yjt0aGlzLndpZHRoVG89Zjt0aGlzLmhlaWdodEZyb209YTt0aGlzLmhlaWdodFRvPWR9O09ULlN0cmVhbVByb3BlcnR5Q2hhbmdlZEV2ZW50PWZ1bmN0aW9uKGcsYixmLGEsZCl7T1QuRXZlbnQuY2FsbCh0aGlzLGcpO3RoaXMudHlwZT1nO3RoaXMuc3RyZWFtPWI7dGhpcy5jaGFuZ2VkUHJvcGVydHk9Zjt0aGlzLm9sZFZhbHVlPWE7dGhpcy5uZXdWYWx1ZT1kfTtPVC5BcmNoaXZlRXZlbnQ9ZnVuY3Rpb24oZyxiKXtPVC5FdmVudC5jYWxsKHRoaXMsZyk7dGhpcy5hcmNoaXZlcz1ifTtPVC5BcmNoaXZlU3RyZWFtRXZlbnQ9ZnVuY3Rpb24oZyxiLGYpe09ULkV2ZW50LmNhbGwodGhpcyxnKTt0aGlzLmFyY2hpdmU9Yjt0aGlzLnN0cmVhbXM9Zn07T1QuU3RhdGVDaGFuZ2VkRXZlbnQ9ZnVuY3Rpb24oZyxiKXtPVC5FdmVudC5jYWxsKHRoaXMsZyk7dGhpcy5jaGFuZ2VkVmFsdWVzPWJ9OwpPVC5DaGFuZ2VGYWlsZWRFdmVudD1mdW5jdGlvbihnLGIsZixhKXtPVC5FdmVudC5jYWxsKHRoaXMsZyk7dGhpcy5yZWFzb25Db2RlPWI7dGhpcy5yZWFzb249Zjt0aGlzLmZhaWxlZFZhbHVlcz1hfTtPVC5TaWduYWxFdmVudD1mdW5jdGlvbihnLGIsZil7T1QuRXZlbnQuY2FsbCh0aGlzLGc/InNpZ25hbDoiK2c6T1QuRXZlbnQubmFtZXMuU0lHTkFMLCExKTt0aGlzLmRhdGE9Yjt0aGlzLmZyb209Zn07T1QuU3RyZWFtVXBkYXRlZEV2ZW50PWZ1bmN0aW9uKGcsYixmLGEpe09ULkV2ZW50LmNhbGwodGhpcywidXBkYXRlZCIpO3RoaXMudGFyZ2V0PWc7dGhpcy5jaGFuZ2VkUHJvcGVydHk9Yjt0aGlzLm9sZFZhbHVlPWY7dGhpcy5uZXdWYWx1ZT1hfTtPVC5EZXN0cm95ZWRFdmVudD1mdW5jdGlvbihnLGIsZil7T1QuRXZlbnQuY2FsbCh0aGlzLGcsITEpO3RoaXMudGFyZ2V0PWI7dGhpcy5yZWFzb249Zn19KSh3aW5kb3cpOwooZnVuY3Rpb24oZyl7ZnVuY3Rpb24gYihhLGIsYyl7cmV0dXJuIGI8PWEmJmE8PWN9ZnVuY3Rpb24gZihhLGIpe3JldHVybiBNYXRoLmZsb29yKGEvYil9ZnVuY3Rpb24gYShhKXt2YXIgYj0wO3RoaXMuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIGI+PWEubGVuZ3RoPy0xOk51bWJlcihhW2JdKX07dGhpcy5vZmZzZXQ9ZnVuY3Rpb24oYyl7Yis9YztpZigwPmIpdGhyb3cgRXJyb3IoIlNlZWtpbmcgcGFzdCBzdGFydCBvZiB0aGUgYnVmZmVyIik7aWYoYj5hLmxlbmd0aCl0aHJvdyBFcnJvcigiU2Vla2luZyBwYXN0IEVPRiIpO307dGhpcy5tYXRjaD1mdW5jdGlvbihjKXtpZihjLmxlbmd0aD5iK2EubGVuZ3RoKXJldHVybiExO3ZhciBkO2ZvcihkPTA7ZDxjLmxlbmd0aDtkKz0xKWlmKE51bWJlcihhW2IrZF0pIT09Y1tkXSlyZXR1cm4hMTtyZXR1cm4hMH19ZnVuY3Rpb24gZChhKXt2YXIgYj0wO3RoaXMuZW1pdD1mdW5jdGlvbihjKXt2YXIgZD0tMSxlO2ZvcihlPTA7ZTxhcmd1bWVudHMubGVuZ3RoOysrZSlkPQpOdW1iZXIoYXJndW1lbnRzW2VdKSxhW2IrK109ZDtyZXR1cm4gZH19ZnVuY3Rpb24gYyhhKXt2YXIgYz0wLGQ9ZnVuY3Rpb24oYSl7Zm9yKHZhciBjPVtdLGQ9MCxlPWEubGVuZ3RoO2Q8YS5sZW5ndGg7KXt2YXIgZj1hLmNoYXJDb2RlQXQoZCk7aWYoYihmLDU1Mjk2LDU3MzQzKSlpZihiKGYsNTYzMjAsNTczNDMpKWMucHVzaCg2NTUzMyk7ZWxzZSBpZihkPT09ZS0xKWMucHVzaCg2NTUzMyk7ZWxzZXt2YXIgaD1hLmNoYXJDb2RlQXQoZCsxKTtiKGgsNTYzMjAsNTczNDMpPyhmJj0xMDIzLGgmPTEwMjMsZCs9MSxjLnB1c2goNjU1MzYrKGY8PDEwKStoKSk6Yy5wdXNoKDY1NTMzKX1lbHNlIGMucHVzaChmKTtkKz0xfXJldHVybiBjfShhKTt0aGlzLm9mZnNldD1mdW5jdGlvbihhKXtjKz1hO2lmKDA+Yyl0aHJvdyBFcnJvcigiU2Vla2luZyBwYXN0IHN0YXJ0IG9mIHRoZSBidWZmZXIiKTtpZihjPmQubGVuZ3RoKXRocm93IEVycm9yKCJTZWVraW5nIHBhc3QgRU9GIik7fTt0aGlzLmdldD0KZnVuY3Rpb24oKXtyZXR1cm4gYz49ZC5sZW5ndGg/LTE6ZFtjXX19ZnVuY3Rpb24gZSgpe3ZhciBhPSIiO3RoaXMuc3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIGF9O3RoaXMuZW1pdD1mdW5jdGlvbihiKXs2NTUzNT49Yj9hKz1TdHJpbmcuZnJvbUNoYXJDb2RlKGIpOihiLT02NTUzNixhKz1TdHJpbmcuZnJvbUNoYXJDb2RlKDU1Mjk2KyhiPj4xMCYxMDIzKSksYSs9U3RyaW5nLmZyb21DaGFyQ29kZSg1NjMyMCsoYiYxMDIzKSkpfX1mdW5jdGlvbiBoKGEpe3RoaXMubmFtZT0iRW5jb2RpbmdFcnJvciI7dGhpcy5tZXNzYWdlPWE7dGhpcy5jb2RlPTB9ZnVuY3Rpb24gaShhLGIpe2lmKGEpdGhyb3cgbmV3IGgoIkRlY29kZXIgZXJyb3IiKTtyZXR1cm4gYnx8NjU1MzN9ZnVuY3Rpb24gayhhKXt0aHJvdyBuZXcgaCgiVGhlIGNvZGUgcG9pbnQgIithKyIgY291bGQgbm90IGJlIGVuY29kZWQuIik7fWZ1bmN0aW9uIGooYSl7YT0oIiIrYSkudHJpbSgpLnRvTG93ZXJDYXNlKCk7cmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChILAphKT9IW2FdOm51bGx9ZnVuY3Rpb24gbChhLGIpe3JldHVybihifHxbXSlbYV18fG51bGx9ZnVuY3Rpb24gbShhLGIpe3ZhciBjPWIuaW5kZXhPZihhKTtyZXR1cm4tMT09PWM/bnVsbDpjfWZ1bmN0aW9uIHAoYSl7dmFyIGM9YS5mYXRhbCxkPTAsZT0wLGY9MCxoPTA7dGhpcy5kZWNvZGU9ZnVuY3Rpb24oYSl7dmFyIGc9YS5nZXQoKTtpZigtMT09PWcpcmV0dXJuIDAhPT1lP2koYyk6LTE7YS5vZmZzZXQoMSk7aWYoMD09PWUpe2lmKGIoZywwLDEyNykpcmV0dXJuIGc7aWYoYihnLDE5NCwyMjMpKWU9MSxoPTEyOCxkPWctMTkyO2Vsc2UgaWYoYihnLDIyNCwyMzkpKWU9MixoPTIwNDgsZD1nLTIyNDtlbHNlIGlmKGIoZywyNDAsMjQ0KSllPTMsaD02NTUzNixkPWctMjQwO2Vsc2UgcmV0dXJuIGkoYyk7ZCo9TWF0aC5wb3coNjQsZSk7cmV0dXJuIG51bGx9aWYoIWIoZywxMjgsMTkxKSlyZXR1cm4gaD1mPWU9ZD0wLGEub2Zmc2V0KC0xKSxpKGMpO2YrPTE7ZCs9KGctMTI4KSpNYXRoLnBvdyg2NCwKZS1mKTtpZihmIT09ZSlyZXR1cm4gbnVsbDthPWQ7Zz1oO2g9Zj1lPWQ9MDtyZXR1cm4gYihhLGcsMTExNDExMSkmJiFiKGEsNTUyOTYsNTczNDMpP2E6aShjKX19ZnVuY3Rpb24gbigpe3RoaXMuZW5jb2RlPWZ1bmN0aW9uKGEsYyl7dmFyIGQ9Yy5nZXQoKTtpZigtMT09PWQpcmV0dXJuLTE7Yy5vZmZzZXQoMSk7aWYoYihkLDU1Mjk2LDU3MzQzKSlyZXR1cm4gayhkKTtpZihiKGQsMCwxMjcpKXJldHVybiBhLmVtaXQoZCk7dmFyIGUsaDtiKGQsMTI4LDIwNDcpPyhlPTEsaD0xOTIpOmIoZCwyMDQ4LDY1NTM1KT8oZT0yLGg9MjI0KTpiKGQsNjU1MzYsMTExNDExMSkmJihlPTMsaD0yNDApO2ZvcihoPWEuZW1pdChmKGQsTWF0aC5wb3coNjQsZSkpK2gpOzA8ZTspaD1mKGQsTWF0aC5wb3coNjQsZS0xKSksaD1hLmVtaXQoMTI4K2glNjQpLGUtPTE7cmV0dXJuIGh9fWZ1bmN0aW9uIHIoYSxjKXt2YXIgZD1jLmZhdGFsO3RoaXMuZGVjb2RlPWZ1bmN0aW9uKGMpe3ZhciBlPWMuZ2V0KCk7CmlmKC0xPT09ZSlyZXR1cm4tMTtjLm9mZnNldCgxKTtpZihiKGUsMCwxMjcpKXJldHVybiBlO2M9YVtlLTEyOF07cmV0dXJuIG51bGw9PT1jP2koZCk6Y319ZnVuY3Rpb24gcShhKXt0aGlzLmVuY29kZT1mdW5jdGlvbihjLGQpe3ZhciBlPWQuZ2V0KCk7aWYoLTE9PT1lKXJldHVybi0xO2Qub2Zmc2V0KDEpO2lmKGIoZSwwLDEyNykpcmV0dXJuIGMuZW1pdChlKTt2YXIgZj1tKGUsYSk7bnVsbD09PWYmJmsoZSk7cmV0dXJuIGMuZW1pdChmKzEyOCl9fWZ1bmN0aW9uIG8oYSxjKXt2YXIgZD1jLmZhdGFsLGU9MCxmPTAsaD0wO3RoaXMuZGVjb2RlPWZ1bmN0aW9uKGMpe3ZhciBnPWMuZ2V0KCk7aWYoLTE9PT1nJiYwPT09ZSYmMD09PWYmJjA9PT1oKXJldHVybi0xO2lmKC0xPT09ZyYmKDAhPT1lfHwwIT09Znx8MCE9PWgpKWg9Zj1lPTAsaShkKTtjLm9mZnNldCgxKTt2YXIgajtpZigwIT09aCl7aj1udWxsO2lmKGIoZyw0OCw1NykpaWYoZz0xMCooMTI2KigxMCooZS0xMjkpKyhmLTQ4KSkrCihoLTEyOSkpK2ctNDgsMzk0MTk8ZyYmMTg5RTM+Z3x8MTIzNzU3NTxnKWo9bnVsbDtlbHNle3ZhciBrPTA7aj0wO3ZhciB3PXUuZ2IxODAzMCxBO2ZvcihBPTA7QTx3Lmxlbmd0aDsrK0Epe3ZhciBHPXdbQV07aWYoR1swXTw9ZylrPUdbMF0saj1HWzFdO2Vsc2UgYnJlYWt9aj1qK2cta31oPWY9ZT0wO3JldHVybiBudWxsPT09aj8oYy5vZmZzZXQoLTMpLGkoZCkpOmp9aWYoMCE9PWYpe2lmKGIoZywxMjksMjU0KSlyZXR1cm4gaD1nLG51bGw7Yy5vZmZzZXQoLTIpO2Y9ZT0wO3JldHVybiBpKGQpfWlmKDAhPT1lKXtpZihiKGcsNDgsNTcpJiZhKXJldHVybiBmPWcsbnVsbDtqPWU7az1udWxsO2U9MDt3PTEyNz5nPzY0OjY1O2lmKGIoZyw2NCwxMjYpfHxiKGcsMTI4LDI1NCkpaz0xOTAqKGotMTI5KSsoZy13KTtqPW51bGw9PT1rP251bGw6bChrLHUuZ2JrKTtudWxsPT09ayYmYy5vZmZzZXQoLTEpO3JldHVybiBudWxsPT09aj9pKGQpOmp9cmV0dXJuIGIoZywwLDEyNyk/ZzoxMjg9PT0KZz84MzY0OmIoZywxMjksMjU0KT8oZT1nLG51bGwpOmkoZCl9fWZ1bmN0aW9uIHMoYSl7dGhpcy5lbmNvZGU9ZnVuY3Rpb24oYyxkKXt2YXIgZT1kLmdldCgpO2lmKC0xPT09ZSlyZXR1cm4tMTtkLm9mZnNldCgxKTtpZihiKGUsMCwxMjcpKXJldHVybiBjLmVtaXQoZSk7dmFyIGg9bShlLHUuZ2JrKTtpZihudWxsIT09aClyZXR1cm4gZT1mKGgsMTkwKSsxMjksaCU9MTkwLGMuZW1pdChlLGgrKDYzPmg/NjQ6NjUpKTtpZihudWxsPT09aCYmIWEpcmV0dXJuIGsoZSk7dmFyIGc9aD0wLGk9dS5nYjE4MDMwLGo7Zm9yKGo9MDtqPGkubGVuZ3RoOysrail7dmFyIHc9aVtqXTtpZih3WzFdPD1lKWg9d1sxXSxnPXdbMF07ZWxzZSBicmVha31oPWcrZS1oO2U9ZihmKGYoaCwxMCksMTI2KSwxMCk7aC09MTI2MDAqZTtnPWYoZihoLDEwKSwxMjYpO2gtPTEyNjAqZztpPWYoaCwxMCk7cmV0dXJuIGMuZW1pdChlKzEyOSxnKzQ4LGkrMTI5LGgtMTAqaSs0OCl9fWZ1bmN0aW9uIHgoYSl7dmFyIGM9CmEuZmF0YWwsZD0hMSxlPTA7dGhpcy5kZWNvZGU9ZnVuY3Rpb24oYSl7dmFyIGY9YS5nZXQoKTtpZigtMT09PWYmJjA9PT1lKXJldHVybi0xO2lmKC0xPT09ZiYmMCE9PWUpcmV0dXJuIGU9MCxpKGMpO2Eub2Zmc2V0KDEpO2lmKDEyNj09PWUpe2U9MDtpZigxMjM9PT1mKXJldHVybiBkPSEwLG51bGw7aWYoMTI1PT09ZilyZXR1cm4gZD0hMSxudWxsO2lmKDEyNj09PWYpcmV0dXJuIDEyNjtpZigxMD09PWYpcmV0dXJuIG51bGw7YS5vZmZzZXQoLTEpO3JldHVybiBpKGMpfWlmKDAhPT1lKXthPWU7ZT0wO3ZhciBoPW51bGw7YihmLDMzLDEyNikmJihoPWwoMTkwKihhLTEpKyhmKzYzKSx1LmdiaykpOzEwPT09ZiYmKGQ9ITEpO3JldHVybiBudWxsPT09aD9pKGMpOmh9aWYoMTI2PT09ZilyZXR1cm4gZT0xMjYsbnVsbDtpZihkKXtpZihiKGYsMzIsMTI3KSlyZXR1cm4gZT1mLG51bGw7MTA9PT1mJiYoZD0hMSk7cmV0dXJuIGkoYyl9cmV0dXJuIGIoZiwwLDEyNyk/ZjppKGMpfX1mdW5jdGlvbiB2KCl7dmFyIGE9CiExO3RoaXMuZW5jb2RlPWZ1bmN0aW9uKGMsZCl7dmFyIGU9ZC5nZXQoKTtpZigtMT09PWUpcmV0dXJuLTE7ZC5vZmZzZXQoMSk7aWYoYihlLDAsMTI3KSYmYSlyZXR1cm4gZC5vZmZzZXQoLTEpLGE9ITEsYy5lbWl0KDEyNiwxMjUpO2lmKDEyNj09PWUpcmV0dXJuIGMuZW1pdCgxMjYsMTI2KTtpZihiKGUsMCwxMjcpKXJldHVybiBjLmVtaXQoZSk7aWYoIWEpcmV0dXJuIGQub2Zmc2V0KC0xKSxhPSEwLGMuZW1pdCgxMjYsMTIzKTt2YXIgaD1tKGUsdS5nYmspO2lmKG51bGw9PT1oKXJldHVybiBrKGUpO3ZhciBnPWYoaCwxOTApKzEsaD1oJTE5MC02MztyZXR1cm4hYihnLDMzLDEyNil8fCFiKGgsMzMsMTI2KT9rKGUpOmMuZW1pdChnLGgpfX1mdW5jdGlvbiB5KGEpe3ZhciBjPWEuZmF0YWwsZD0wLGU9bnVsbDt0aGlzLmRlY29kZT1mdW5jdGlvbihhKXtpZihudWxsIT09ZSlyZXR1cm4gYT1lLGU9bnVsbCxhO3ZhciBmPWEuZ2V0KCk7aWYoLTE9PT1mJiYwPT09ZClyZXR1cm4tMTtpZigtMT09PQpmJiYwIT09ZClyZXR1cm4gZD0wLGkoYyk7YS5vZmZzZXQoMSk7aWYoMCE9PWQpe3ZhciBoPWQsZz1udWxsO2Q9MDt2YXIgaj0xMjc+Zj82NDo5ODtpZihiKGYsNjQsMTI2KXx8YihmLDE2MSwyNTQpKWc9MTU3KihoLTEyOSkrKGYtaik7aWYoMTEzMz09PWcpcmV0dXJuIGU9NzcyLDIwMjtpZigxMTM1PT09ZylyZXR1cm4gZT03ODAsMjAyO2lmKDExNjQ9PT1nKXJldHVybiBlPTc3MiwyMzQ7aWYoMTE2Nj09PWcpcmV0dXJuIGU9NzgwLDIzNDtmPW51bGw9PT1nP251bGw6bChnLHUuYmlnNSk7bnVsbD09PWcmJmEub2Zmc2V0KC0xKTtyZXR1cm4gbnVsbD09PWY/aShjKTpmfXJldHVybiBiKGYsMCwxMjcpP2Y6YihmLDEyOSwyNTQpPyhkPWYsbnVsbCk6aShjKX19ZnVuY3Rpb24gQigpe3RoaXMuZW5jb2RlPWZ1bmN0aW9uKGEsYyl7dmFyIGQ9Yy5nZXQoKTtpZigtMT09PWQpcmV0dXJuLTE7Yy5vZmZzZXQoMSk7aWYoYihkLDAsMTI3KSlyZXR1cm4gYS5lbWl0KGQpO3ZhciBlPW0oZCx1LmJpZzUpOwppZihudWxsPT09ZSlyZXR1cm4gayhkKTtkPWYoZSwxNTcpKzEyOTtlJT0xNTc7cmV0dXJuIGEuZW1pdChkLGUrKDYzPmU/NjQ6OTgpKX19ZnVuY3Rpb24geihhKXt2YXIgYz1hLmZhdGFsLGQ9MCxlPTA7dGhpcy5kZWNvZGU9ZnVuY3Rpb24oYSl7dmFyIGY9YS5nZXQoKTtpZigtMT09PWYpe2lmKDA9PT1kJiYwPT09ZSlyZXR1cm4tMTtlPWQ9MDtyZXR1cm4gaShjKX1hLm9mZnNldCgxKTt2YXIgaCxnO3JldHVybiAwIT09ZT8oaD1lLGU9MCxnPW51bGwsYihoLDE2MSwyNTQpJiZiKGYsMTYxLDI1NCkmJihnPWwoOTQqKGgtMTYxKStmLTE2MSx1LmppczAyMTIpKSxiKGYsMTYxLDI1NCl8fGEub2Zmc2V0KC0xKSxudWxsPT09Zz9pKGMpOmcpOjE0Mj09PWQmJmIoZiwxNjEsMjIzKT8oZD0wLDY1Mzc3K2YtMTYxKToxNDM9PT1kJiZiKGYsMTYxLDI1NCk/KGQ9MCxlPWYsbnVsbCk6MCE9PWQ/KGg9ZCxkPTAsZz1udWxsLGIoaCwxNjEsMjU0KSYmYihmLDE2MSwyNTQpJiYoZz1sKDk0KihoLTE2MSkrCmYtMTYxLHUuamlzMDIwOCkpLGIoZiwxNjEsMjU0KXx8YS5vZmZzZXQoLTEpLG51bGw9PT1nP2koYyk6Zyk6YihmLDAsMTI3KT9mOjE0Mj09PWZ8fDE0Mz09PWZ8fGIoZiwxNjEsMjU0KT8oZD1mLG51bGwpOmkoYyl9fWZ1bmN0aW9uIHcoKXt0aGlzLmVuY29kZT1mdW5jdGlvbihhLGMpe3ZhciBkPWMuZ2V0KCk7aWYoLTE9PT1kKXJldHVybi0xO2Mub2Zmc2V0KDEpO2lmKGIoZCwwLDEyNykpcmV0dXJuIGEuZW1pdChkKTtpZigxNjU9PT1kKXJldHVybiBhLmVtaXQoOTIpO2lmKDgyNTQ9PT1kKXJldHVybiBhLmVtaXQoMTI2KTtpZihiKGQsNjUzNzcsNjU0MzkpKXJldHVybiBhLmVtaXQoMTQyLGQtNjUzNzcrMTYxKTt2YXIgZT1tKGQsdS5qaXMwMjA4KTtpZihudWxsPT09ZSlyZXR1cm4gayhkKTtkPWYoZSw5NCkrMTYxO3JldHVybiBhLmVtaXQoZCxlJTk0KzE2MSl9fWZ1bmN0aW9uIEQoYSl7dmFyIGM9YS5mYXRhbCxkPTAsZT0hMSxmPTA7dGhpcy5kZWNvZGU9ZnVuY3Rpb24oYSl7dmFyIGg9CmEuZ2V0KCk7LTEhPT1oJiZhLm9mZnNldCgxKTtzd2l0Y2goZCl7ZGVmYXVsdDpjYXNlIDA6cmV0dXJuIDI3PT09aD8oZD0xLG51bGwpOmIoaCwwLDEyNyk/aDotMT09PWg/LTE6aShjKTtjYXNlIDE6aWYoMzY9PT1ofHw0MD09PWgpcmV0dXJuIGY9aCxkPTIsbnVsbDstMSE9PWgmJmEub2Zmc2V0KC0xKTtkPTA7cmV0dXJuIGkoYyk7Y2FzZSAyOnZhciBnPWY7Zj0wO2lmKDM2PT09ZyYmKDY0PT09aHx8NjY9PT1oKSlyZXR1cm4gZT0hMSxkPTQsbnVsbDtpZigzNj09PWcmJjQwPT09aClyZXR1cm4gZD0zLG51bGw7aWYoNDA9PT1nJiYoNjY9PT1ofHw3ND09PWgpKXJldHVybiBkPTAsbnVsbDtpZig0MD09PWcmJjczPT09aClyZXR1cm4gZD02LG51bGw7LTE9PT1oP2Eub2Zmc2V0KC0xKTphLm9mZnNldCgtMik7ZD0wO3JldHVybiBpKGMpO2Nhc2UgMzppZig2OD09PWgpcmV0dXJuIGU9ITAsZD00LG51bGw7LTE9PT1oP2Eub2Zmc2V0KC0yKTphLm9mZnNldCgtMyk7ZD0wO3JldHVybiBpKGMpOwpjYXNlIDQ6aWYoMTA9PT1oKXJldHVybiBkPTAsaShjLDEwKTtpZigyNz09PWgpcmV0dXJuIGQ9MSxudWxsO2lmKC0xPT09aClyZXR1cm4tMTtmPWg7ZD01O3JldHVybiBudWxsO2Nhc2UgNTpkPTQ7aWYoLTE9PT1oKXJldHVybiBpKGMpO2E9bnVsbDtnPTk0KihmLTMzKStoLTMzO2IoZiwzMywxMjYpJiZiKGgsMzMsMTI2KSYmKGE9ITE9PT1lP2woZyx1LmppczAyMDgpOmwoZyx1LmppczAyMTIpKTtyZXR1cm4gbnVsbD09PWE/aShjKTphO2Nhc2UgNjpyZXR1cm4gMjc9PT1oPyhkPTEsbnVsbCk6YihoLDMzLDk1KT82NTM3NytoLTMzOi0xPT09aD8tMTppKGMpfX19ZnVuY3Rpb24gQygpe3ZhciBhPTA7dGhpcy5lbmNvZGU9ZnVuY3Rpb24oYyxkKXt2YXIgZT1kLmdldCgpO2lmKC0xPT09ZSlyZXR1cm4tMTtkLm9mZnNldCgxKTtpZigoYihlLDAsMTI3KXx8MTY1PT09ZXx8ODI1ND09PWUpJiYwIT09YSlyZXR1cm4gZC5vZmZzZXQoLTEpLGE9MCxjLmVtaXQoMjcsNDAsNjYpO2lmKGIoZSwKMCwxMjcpKXJldHVybiBjLmVtaXQoZSk7aWYoMTY1PT09ZSlyZXR1cm4gYy5lbWl0KDkyKTtpZig4MjU0PT09ZSlyZXR1cm4gYy5lbWl0KDEyNik7aWYoYihlLDY1Mzc3LDY1NDM5KSYmMiE9PWEpcmV0dXJuIGQub2Zmc2V0KC0xKSxhPTIsYy5lbWl0KDI3LDQwLDczKTtpZihiKGUsNjUzNzcsNjU0MzkpKXJldHVybiBjLmVtaXQoZS02NTM3Ny0zMyk7aWYoMSE9PWEpcmV0dXJuIGQub2Zmc2V0KC0xKSxhPTEsYy5lbWl0KDI3LDM2LDY2KTt2YXIgaD1tKGUsdS5qaXMwMjA4KTtpZihudWxsPT09aClyZXR1cm4gayhlKTtlPWYoaCw5NCkrMzM7cmV0dXJuIGMuZW1pdChlLGglOTQrMzMpfX1mdW5jdGlvbiBBKGEpe3ZhciBjPWEuZmF0YWwsZD0wO3RoaXMuZGVjb2RlPWZ1bmN0aW9uKGEpe3ZhciBlPWEuZ2V0KCk7aWYoLTE9PT1lJiYwPT09ZClyZXR1cm4tMTtpZigtMT09PWUmJjAhPT1kKXJldHVybiBkPTAsaShjKTthLm9mZnNldCgxKTtpZigwIT09ZCl7dmFyIGY9ZDtkPTA7aWYoYihlLAo2NCwxMjYpfHxiKGUsMTI4LDI1MikpcmV0dXJuIGE9bCgxODgqKGYtKDE2MD5mPzEyOToxOTMpKStlLSgxMjc+ZT82NDo2NSksdS5qaXMwMjA4KSxudWxsPT09YT9pKGMpOmE7YS5vZmZzZXQoLTEpO3JldHVybiBpKGMpfXJldHVybiBiKGUsMCwxMjgpP2U6YihlLDE2MSwyMjMpPzY1Mzc3K2UtMTYxOmIoZSwxMjksMTU5KXx8YihlLDIyNCwyNTIpPyhkPWUsbnVsbCk6aShjKX19ZnVuY3Rpb24gRSgpe3RoaXMuZW5jb2RlPWZ1bmN0aW9uKGEsYyl7dmFyIGQ9Yy5nZXQoKTtpZigtMT09PWQpcmV0dXJuLTE7Yy5vZmZzZXQoMSk7aWYoYihkLDAsMTI4KSlyZXR1cm4gYS5lbWl0KGQpO2lmKDE2NT09PWQpcmV0dXJuIGEuZW1pdCg5Mik7aWYoODI1ND09PWQpcmV0dXJuIGEuZW1pdCgxMjYpO2lmKGIoZCw2NTM3Nyw2NTQzOSkpcmV0dXJuIGEuZW1pdChkLTY1Mzc3KzE2MSk7dmFyIGU9bShkLHUuamlzMDIwOCk7aWYobnVsbD09PWUpcmV0dXJuIGsoZCk7ZD1mKGUsMTg4KTtlJT0xODg7cmV0dXJuIGEuZW1pdChkKwooMzE+ZD8xMjk6MTkzKSxlKyg2Mz5lPzY0OjY1KSl9fWZ1bmN0aW9uIEkoYSl7dmFyIGM9YS5mYXRhbCxkPTA7dGhpcy5kZWNvZGU9ZnVuY3Rpb24oYSl7dmFyIGU9YS5nZXQoKTtpZigtMT09PWUmJjA9PT1kKXJldHVybi0xO2lmKC0xPT09ZSYmMCE9PWQpcmV0dXJuIGQ9MCxpKGMpO2Eub2Zmc2V0KDEpO2lmKDAhPT1kKXt2YXIgZj1kLGg9bnVsbDtkPTA7aWYoYihmLDEyOSwxOTgpKXt2YXIgZz0xNzgqKGYtMTI5KTtiKGUsNjUsOTApP2g9ZytlLTY1OmIoZSw5NywxMjIpP2g9ZysyNitlLTk3OmIoZSwxMjksMjU0KSYmKGg9ZysyNisyNitlLTEyOSl9YihmLDE5OSwyNTMpJiZiKGUsMTYxLDI1NCkmJihoPTEyNDYwKzk0KihmLTE5OSkrKGUtMTYxKSk7ZT1udWxsPT09aD9udWxsOmwoaCx1WyJldWMta3IiXSk7bnVsbD09PWgmJmEub2Zmc2V0KC0xKTtyZXR1cm4gbnVsbD09PWU/aShjKTplfXJldHVybiBiKGUsMCwxMjcpP2U6YihlLDEyOSwyNTMpPyhkPWUsbnVsbCk6aShjKX19ZnVuY3Rpb24gSigpe3RoaXMuZW5jb2RlPQpmdW5jdGlvbihhLGMpe3ZhciBkPWMuZ2V0KCk7aWYoLTE9PT1kKXJldHVybi0xO2Mub2Zmc2V0KDEpO2lmKGIoZCwwLDEyNykpcmV0dXJuIGEuZW1pdChkKTt2YXIgZT1tKGQsdVsiZXVjLWtyIl0pO2lmKG51bGw9PT1lKXJldHVybiBrKGQpO2lmKDEyNDYwPmUpcmV0dXJuIGQ9ZihlLDE3OCkrMTI5LGUlPTE3OCxhLmVtaXQoZCxlKygyNj5lPzY1OjUyPmU/NzE6NzcpKTtlLT0xMjQ2MDtkPWYoZSw5NCkrMTk5O3JldHVybiBhLmVtaXQoZCxlJTk0KzE2MSl9fWZ1bmN0aW9uIEsoYSl7dmFyIGM9YS5mYXRhbCxkPTAsZT0wO3RoaXMuZGVjb2RlPWZ1bmN0aW9uKGEpe3ZhciBmPWEuZ2V0KCk7LTEhPT1mJiZhLm9mZnNldCgxKTtzd2l0Y2goZCl7ZGVmYXVsdDpjYXNlIDA6cmV0dXJuIDE0PT09Zj8oZD00LG51bGwpOjE1PT09Zj9udWxsOjI3PT09Zj8oZD0xLG51bGwpOmIoZiwwLDEyNyk/ZjotMT09PWY/LTE6aShjKTtjYXNlIDE6aWYoMzY9PT1mKXJldHVybiBkPTIsbnVsbDstMSE9PWYmJgphLm9mZnNldCgtMSk7ZD0wO3JldHVybiBpKGMpO2Nhc2UgMjppZig0MT09PWYpcmV0dXJuIGQ9MyxudWxsOy0xPT09Zj9hLm9mZnNldCgtMSk6YS5vZmZzZXQoLTIpO2Q9MDtyZXR1cm4gaShjKTtjYXNlIDM6aWYoNjc9PT1mKXJldHVybiBkPTAsbnVsbDstMT09PWY/YS5vZmZzZXQoLTIpOmEub2Zmc2V0KC0zKTtkPTA7cmV0dXJuIGkoYyk7Y2FzZSA0OmlmKDEwPT09ZilyZXR1cm4gZD0wLGkoYywxMCk7aWYoMTQ9PT1mKXJldHVybiBudWxsO2lmKDE1PT09ZilyZXR1cm4gZD0wLG51bGw7aWYoLTE9PT1mKXJldHVybi0xO2U9ZjtkPTU7cmV0dXJuIG51bGw7Y2FzZSA1OmQ9NDtpZigtMT09PWYpcmV0dXJuIGkoYyk7YT1udWxsO2IoZSwzMyw3MCkmJmIoZiwzMywxMjYpP2E9bCgxNzgqKGUtMSkrNTIrZi0xLHVbImV1Yy1rciJdKTpiKGUsNzEsMTI2KSYmYihmLDMzLDEyNikmJihhPWwoMTI0NjArOTQqKGUtNzEpKyhmLTMzKSx1WyJldWMta3IiXSkpO3JldHVybiBudWxsIT09YT9hOmkoYyl9fX0KZnVuY3Rpb24gRigpe3ZhciBhPSExLGM9MDt0aGlzLmVuY29kZT1mdW5jdGlvbihkLGUpe3ZhciBoPWUuZ2V0KCk7aWYoLTE9PT1oKXJldHVybi0xO2F8fChhPSEwLGQuZW1pdCgyNywzNiw0MSw2NykpO2Uub2Zmc2V0KDEpO2lmKGIoaCwwLDEyNykmJjAhPT1jKXJldHVybiBlLm9mZnNldCgtMSksYz0wLGQuZW1pdCgxNSk7aWYoYihoLDAsMTI3KSlyZXR1cm4gZC5lbWl0KGgpO2lmKDEhPT1jKXJldHVybiBlLm9mZnNldCgtMSksYz0xLGQuZW1pdCgxNCk7dmFyIGc9bShoLHVbImV1Yy1rciJdKTtpZihudWxsPT09ZylyZXR1cm4gayhoKTt2YXIgaTtpZigxMjQ2MD5nKXJldHVybiBpPWYoZywxNzgpKzEsZz1nJTE3OC0yNi0yNisxLCFiKGksMzMsNzApfHwhYihnLDMzLDEyNik/ayhoKTpkLmVtaXQoaSxnKTtnLT0xMjQ2MDtpPWYoZyw5NCkrNzE7Zz1nJTk0KzMzO3JldHVybiFiKGksNzEsMTI2KXx8IWIoZywzMywxMjYpP2soaCk6ZC5lbWl0KGksZyl9fWZ1bmN0aW9uIE4oYSxkKXt2YXIgYz0KZC5mYXRhbCxlPW51bGwsZj1udWxsO3RoaXMuZGVjb2RlPWZ1bmN0aW9uKGQpe3ZhciBoPWQuZ2V0KCk7aWYoLTE9PT1oJiZudWxsPT09ZSYmbnVsbD09PWYpcmV0dXJuLTE7aWYoLTE9PT1oJiYobnVsbCE9PWV8fG51bGwhPT1mKSlyZXR1cm4gaShjKTtkLm9mZnNldCgxKTtpZihudWxsPT09ZSlyZXR1cm4gZT1oLG51bGw7aD1hPyhlPDw4KStoOihoPDw4KStlO2U9bnVsbDtpZihudWxsIT09Zil7dmFyIGc9ZjtmPW51bGw7aWYoYihoLDU2MzIwLDU3MzQzKSlyZXR1cm4gNjU1MzYrMTAyNCooZy01NTI5NikrKGgtNTYzMjApO2Qub2Zmc2V0KC0yKTtyZXR1cm4gaShjKX1yZXR1cm4gYihoLDU1Mjk2LDU2MzE5KT8oZj1oLG51bGwpOmIoaCw1NjMyMCw1NzM0Myk/aShjKTpofX1mdW5jdGlvbiBPKGEpe3RoaXMuZW5jb2RlPWZ1bmN0aW9uKGQsYyl7ZnVuY3Rpb24gZShiKXt2YXIgYz1iPj44LGI9YiYyNTU7cmV0dXJuIGE/ZC5lbWl0KGMsYik6ZC5lbWl0KGIsYyl9dmFyIGg9Yy5nZXQoKTsKaWYoLTE9PT1oKXJldHVybi0xO2Mub2Zmc2V0KDEpO2IoaCw1NTI5Niw1NzM0MykmJmsoaCk7aWYoNjU1MzU+PWgpcmV0dXJuIGUoaCk7dmFyIGc9ZihoLTY1NTM2LDEwMjQpKzU1Mjk2LGg9KGgtNjU1MzYpJTEwMjQrNTYzMjA7ZShnKTtyZXR1cm4gZShoKX19ZnVuY3Rpb24gTChhLGIpe2lmKCF0aGlzfHx0aGlzPT09ZylyZXR1cm4gbmV3IEwoYSxiKTthPWE/IiIrYToidXRmLTgiO2I9T2JqZWN0KGIpO3RoaXMuX2VuY29kaW5nPWooYSk7aWYobnVsbD09PXRoaXMuX2VuY29kaW5nfHwidXRmLTgiIT09dGhpcy5fZW5jb2RpbmcubmFtZSYmInV0Zi0xNiIhPT10aGlzLl9lbmNvZGluZy5uYW1lJiYidXRmLTE2YmUiIT09dGhpcy5fZW5jb2RpbmcubmFtZSl0aHJvdyBuZXcgVHlwZUVycm9yKCJVbmtub3duIGVuY29kaW5nOiAiK2EpO3RoaXMuX3N0cmVhbWluZz0hMTt0aGlzLl9lbmNvZGVyPW51bGw7dGhpcy5fb3B0aW9ucz17ZmF0YWw6Qm9vbGVhbihiLmZhdGFsKX07T2JqZWN0LmRlZmluZVByb3BlcnR5PwpPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywiZW5jb2RpbmciLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZW5jb2RpbmcubmFtZX19KTp0aGlzLmVuY29kaW5nPXRoaXMuX2VuY29kaW5nLm5hbWU7cmV0dXJuIHRoaXN9ZnVuY3Rpb24gTShhLGIpe2lmKCF0aGlzfHx0aGlzPT09ZylyZXR1cm4gbmV3IE0oYSxiKTthPWE/IiIrYToidXRmLTgiO2I9T2JqZWN0KGIpO3RoaXMuX2VuY29kaW5nPWooYSk7aWYobnVsbD09PXRoaXMuX2VuY29kaW5nKXRocm93IG5ldyBUeXBlRXJyb3IoIlVua25vd24gZW5jb2Rpbmc6ICIrYSk7dGhpcy5fc3RyZWFtaW5nPSExO3RoaXMuX2RlY29kZXI9bnVsbDt0aGlzLl9vcHRpb25zPXtmYXRhbDpCb29sZWFuKGIuZmF0YWwpfTtPYmplY3QuZGVmaW5lUHJvcGVydHk/T2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsImVuY29kaW5nIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2VuY29kaW5nLm5hbWV9fSk6dGhpcy5lbmNvZGluZz10aGlzLl9lbmNvZGluZy5uYW1lOwpyZXR1cm4gdGhpc31pZighKHZvaWQgMCE9PWcuVGV4dEVuY29kZXImJnZvaWQgMCE9PWcuVGV4dERlY29kZXIpKXtoLnByb3RvdHlwZT1FcnJvci5wcm90b3R5cGU7dmFyIHQ9e30sSD17fTtbe2VuY29kaW5nczpbe2xhYmVsczpbInVuaWNvZGUtMS0xLXV0Zi04IiwidXRmLTgiLCJ1dGY4Il0sbmFtZToidXRmLTgifV0saGVhZGluZzoiVGhlIEVuY29kaW5nIn0se2VuY29kaW5nczpbe2xhYmVsczpbImNwODY0IiwiaWJtODY0Il0sbmFtZToiaWJtODY0In0se2xhYmVsczpbImNwODY2IiwiaWJtODY2Il0sbmFtZToiaWJtODY2In0se2xhYmVsczoiY3Npc29sYXRpbjIgaXNvLTg4NTktMiBpc28taXItMTAxIGlzbzg4NTktMiBpc29fODg1OS0yIGwyIGxhdGluMiIuc3BsaXQoIiAiKSxuYW1lOiJpc28tODg1OS0yIn0se2xhYmVsczoiY3Npc29sYXRpbjMgaXNvLTg4NTktMyBpc29fODg1OS0zIGlzby1pci0xMDkgbDMgbGF0aW4zIi5zcGxpdCgiICIpLG5hbWU6Imlzby04ODU5LTMifSwKe2xhYmVsczoiY3Npc29sYXRpbjQgaXNvLTg4NTktNCBpc29fODg1OS00IGlzby1pci0xMTAgbDQgbGF0aW40Ii5zcGxpdCgiICIpLG5hbWU6Imlzby04ODU5LTQifSx7bGFiZWxzOlsiY3Npc29sYXRpbmN5cmlsbGljIiwiY3lyaWxsaWMiLCJpc28tODg1OS01IiwiaXNvXzg4NTktNSIsImlzby1pci0xNDQiXSxuYW1lOiJpc28tODg1OS01In0se2xhYmVsczoiYXJhYmljIGNzaXNvbGF0aW5hcmFiaWMgZWNtYS0xMTQgaXNvLTg4NTktNiBpc29fODg1OS02IGlzby1pci0xMjciLnNwbGl0KCIgIiksbmFtZToiaXNvLTg4NTktNiJ9LHtsYWJlbHM6ImNzaXNvbGF0aW5ncmVlayBlY21hLTExOCBlbG90XzkyOCBncmVlayBncmVlazggaXNvLTg4NTktNyBpc29fODg1OS03IGlzby1pci0xMjYiLnNwbGl0KCIgIiksbmFtZToiaXNvLTg4NTktNyJ9LHtsYWJlbHM6ImNzaXNvbGF0aW5oZWJyZXcgaGVicmV3IGlzby04ODU5LTggaXNvLTg4NTktOC1pIGlzby1pci0xMzggaXNvXzg4NTktOCB2aXN1YWwiLnNwbGl0KCIgIiksCm5hbWU6Imlzby04ODU5LTgifSx7bGFiZWxzOiJjc2lzb2xhdGluNiBpc28tODg1OS0xMCBpc28taXItMTU3IGlzbzg4NTktMTAgbDYgbGF0aW42Ii5zcGxpdCgiICIpLG5hbWU6Imlzby04ODU5LTEwIn0se2xhYmVsczpbImlzby04ODU5LTEzIl0sbmFtZToiaXNvLTg4NTktMTMifSx7bGFiZWxzOlsiaXNvLTg4NTktMTQiLCJpc284ODU5LTE0Il0sbmFtZToiaXNvLTg4NTktMTQifSx7bGFiZWxzOlsiaXNvLTg4NTktMTUiLCJpc29fODg1OS0xNSJdLG5hbWU6Imlzby04ODU5LTE1In0se2xhYmVsczpbImlzby04ODU5LTE2Il0sbmFtZToiaXNvLTg4NTktMTYifSx7bGFiZWxzOlsia29pOC1yIiwia29pOF9yIl0sbmFtZToia29pOC1yIn0se2xhYmVsczpbImtvaTgtdSJdLG5hbWU6ImtvaTgtdSJ9LHtsYWJlbHM6WyJjc21hY2ludG9zaCIsIm1hYyIsIm1hY2ludG9zaCIsIngtbWFjLXJvbWFuIl0sbmFtZToibWFjaW50b3NoIn0se2xhYmVsczpbImlzby04ODU5LTExIiwidGlzLTYyMCIsCiJ3aW5kb3dzLTg3NCJdLG5hbWU6IndpbmRvd3MtODc0In0se2xhYmVsczpbIndpbmRvd3MtMTI1MCIsIngtY3AxMjUwIl0sbmFtZToid2luZG93cy0xMjUwIn0se2xhYmVsczpbIndpbmRvd3MtMTI1MSIsIngtY3AxMjUxIl0sbmFtZToid2luZG93cy0xMjUxIn0se2xhYmVsczoiYXNjaWkgYW5zaV94My40LTE5NjggY3Npc29sYXRpbjEgaXNvLTg4NTktMSBpc284ODU5LTEgaXNvXzg4NTktMSBsMSBsYXRpbjEgdXMtYXNjaWkgd2luZG93cy0xMjUyIi5zcGxpdCgiICIpLG5hbWU6IndpbmRvd3MtMTI1MiJ9LHtsYWJlbHM6WyJjcDEyNTMiLCJ3aW5kb3dzLTEyNTMiXSxuYW1lOiJ3aW5kb3dzLTEyNTMifSx7bGFiZWxzOiJjc2lzb2xhdGluNSBpc28tODg1OS05IGlzby1pci0xNDggbDUgbGF0aW41IHdpbmRvd3MtMTI1NCIuc3BsaXQoIiAiKSxuYW1lOiJ3aW5kb3dzLTEyNTQifSx7bGFiZWxzOlsiY3AxMjU1Iiwid2luZG93cy0xMjU1Il0sbmFtZToid2luZG93cy0xMjU1In0se2xhYmVsczpbImNwMTI1NiIsCiJ3aW5kb3dzLTEyNTYiXSxuYW1lOiJ3aW5kb3dzLTEyNTYifSx7bGFiZWxzOlsid2luZG93cy0xMjU3Il0sbmFtZToid2luZG93cy0xMjU3In0se2xhYmVsczpbImNwMTI1OCIsIndpbmRvd3MtMTI1OCJdLG5hbWU6IndpbmRvd3MtMTI1OCJ9LHtsYWJlbHM6WyJ4LW1hYy1jeXJpbGxpYyIsIngtbWFjLXVrcmFpbmlhbiJdLG5hbWU6IngtbWFjLWN5cmlsbGljIn1dLGhlYWRpbmc6IkxlZ2FjeSBzaW5nbGUtYnl0ZSBlbmNvZGluZ3MifSx7ZW5jb2RpbmdzOlt7bGFiZWxzOiJjaGluZXNlIGNzZ2IyMzEyIGNzaXNvNThnYjIzMTI4MCBnYjIzMTIgZ2JrIGdiXzIzMTIgZ2JfMjMxMi04MCBpc28taXItNTggeC1nYmsiLnNwbGl0KCIgIiksbmFtZToiZ2JrIn0se2xhYmVsczpbImdiMTgwMzAiXSxuYW1lOiJnYjE4MDMwIn0se2xhYmVsczpbImh6LWdiLTIzMTIiXSxuYW1lOiJoei1nYi0yMzEyIn1dLGhlYWRpbmc6IkxlZ2FjeSBtdWx0aS1ieXRlIENoaW5lc2UgKHNpbXBsaWZpZWQpIGVuY29kaW5ncyJ9LAp7ZW5jb2RpbmdzOlt7bGFiZWxzOlsiYmlnNSIsImJpZzUtaGtzY3MiLCJjbi1iaWc1IiwiY3NiaWc1IiwieC14LWJpZzUiXSxuYW1lOiJiaWc1In1dLGhlYWRpbmc6IkxlZ2FjeSBtdWx0aS1ieXRlIENoaW5lc2UgKHRyYWRpdGlvbmFsKSBlbmNvZGluZ3MifSx7ZW5jb2RpbmdzOlt7bGFiZWxzOlsiY3NldWNwa2RmbXRqYXBhbmVzZSIsImV1Yy1qcCIsIngtZXVjLWpwIl0sbmFtZToiZXVjLWpwIn0se2xhYmVsczpbImNzaXNvMjAyMmpwIiwiaXNvLTIwMjItanAiXSxuYW1lOiJpc28tMjAyMi1qcCJ9LHtsYWJlbHM6ImNzc2hpZnRqaXMgbXNfa2Fuamkgc2hpZnQtamlzIHNoaWZ0X2ppcyBzamlzIHdpbmRvd3MtMzFqIHgtc2ppcyIuc3BsaXQoIiAiKSxuYW1lOiJzaGlmdF9qaXMifV0saGVhZGluZzoiTGVnYWN5IG11bHRpLWJ5dGUgSmFwYW5lc2UgZW5jb2RpbmdzIn0se2VuY29kaW5nczpbe2xhYmVsczoiY3NldWNrciBjc2tzYzU2MDExOTg3IGV1Yy1rciBpc28taXItMTQ5IGtvcmVhbiBrc19jXzU2MDEtMTk4NyBrc19jXzU2MDEtMTk4OSBrc2M1NjAxIGtzY181NjAxIHdpbmRvd3MtOTQ5Ii5zcGxpdCgiICIpLApuYW1lOiJldWMta3IifSx7bGFiZWxzOlsiY3Npc28yMDIya3IiLCJpc28tMjAyMi1rciJdLG5hbWU6Imlzby0yMDIyLWtyIn1dLGhlYWRpbmc6IkxlZ2FjeSBtdWx0aS1ieXRlIEtvcmVhbiBlbmNvZGluZ3MifSx7ZW5jb2RpbmdzOlt7bGFiZWxzOlsidXRmLTE2IiwidXRmLTE2bGUiXSxuYW1lOiJ1dGYtMTYifSx7bGFiZWxzOlsidXRmLTE2YmUiXSxuYW1lOiJ1dGYtMTZiZSJ9XSxoZWFkaW5nOiJMZWdhY3kgdXRmLTE2IGVuY29kaW5ncyJ9XS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2EuZW5jb2RpbmdzLmZvckVhY2goZnVuY3Rpb24oYSl7dFthLm5hbWVdPWE7YS5sYWJlbHMuZm9yRWFjaChmdW5jdGlvbihiKXtIW2JdPWF9KX0pfSk7dmFyIHU9Z1siZW5jb2RpbmctaW5kZXhlcyJdfHx7fTt0WyJ1dGYtOCJdLmdldEVuY29kZXI9ZnVuY3Rpb24oYSl7cmV0dXJuIG5ldyBuKGEpfTt0WyJ1dGYtOCJdLmdldERlY29kZXI9ZnVuY3Rpb24oYSl7cmV0dXJuIG5ldyBwKGEpfTsoZnVuY3Rpb24oKXsiaWJtODY0IGlibTg2NiBpc28tODg1OS0yIGlzby04ODU5LTMgaXNvLTg4NTktNCBpc28tODg1OS01IGlzby04ODU5LTYgaXNvLTg4NTktNyBpc28tODg1OS04IGlzby04ODU5LTEwIGlzby04ODU5LTEzIGlzby04ODU5LTE0IGlzby04ODU5LTE1IGlzby04ODU5LTE2IGtvaTgtciBrb2k4LXUgbWFjaW50b3NoIHdpbmRvd3MtODc0IHdpbmRvd3MtMTI1MCB3aW5kb3dzLTEyNTEgd2luZG93cy0xMjUyIHdpbmRvd3MtMTI1MyB3aW5kb3dzLTEyNTQgd2luZG93cy0xMjU1IHdpbmRvd3MtMTI1NiB3aW5kb3dzLTEyNTcgd2luZG93cy0xMjU4IHgtbWFjLWN5cmlsbGljIi5zcGxpdCgiICIpLmZvckVhY2goZnVuY3Rpb24oYSl7dmFyIGI9CnRbYV0sZD11W2FdO2IuZ2V0RGVjb2Rlcj1mdW5jdGlvbihhKXtyZXR1cm4gbmV3IHIoZCxhKX07Yi5nZXRFbmNvZGVyPWZ1bmN0aW9uKGEpe3JldHVybiBuZXcgcShkLGEpfX0pfSkoKTt0Lmdiay5nZXRFbmNvZGVyPWZ1bmN0aW9uKGEpe3JldHVybiBuZXcgcyghMSxhKX07dC5nYmsuZ2V0RGVjb2Rlcj1mdW5jdGlvbihhKXtyZXR1cm4gbmV3IG8oITEsYSl9O3QuZ2IxODAzMC5nZXRFbmNvZGVyPWZ1bmN0aW9uKGEpe3JldHVybiBuZXcgcyghMCxhKX07dC5nYjE4MDMwLmdldERlY29kZXI9ZnVuY3Rpb24oYSl7cmV0dXJuIG5ldyBvKCEwLGEpfTt0WyJoei1nYi0yMzEyIl0uZ2V0RW5jb2Rlcj1mdW5jdGlvbihhKXtyZXR1cm4gbmV3IHYoYSl9O3RbImh6LWdiLTIzMTIiXS5nZXREZWNvZGVyPWZ1bmN0aW9uKGEpe3JldHVybiBuZXcgeChhKX07dC5iaWc1LmdldEVuY29kZXI9ZnVuY3Rpb24oYSl7cmV0dXJuIG5ldyBCKGEpfTt0LmJpZzUuZ2V0RGVjb2Rlcj1mdW5jdGlvbihhKXtyZXR1cm4gbmV3IHkoYSl9Owp0WyJldWMtanAiXS5nZXRFbmNvZGVyPWZ1bmN0aW9uKGEpe3JldHVybiBuZXcgdyhhKX07dFsiZXVjLWpwIl0uZ2V0RGVjb2Rlcj1mdW5jdGlvbihhKXtyZXR1cm4gbmV3IHooYSl9O3RbImlzby0yMDIyLWpwIl0uZ2V0RW5jb2Rlcj1mdW5jdGlvbihhKXtyZXR1cm4gbmV3IEMoYSl9O3RbImlzby0yMDIyLWpwIl0uZ2V0RGVjb2Rlcj1mdW5jdGlvbihhKXtyZXR1cm4gbmV3IEQoYSl9O3Quc2hpZnRfamlzLmdldEVuY29kZXI9ZnVuY3Rpb24oYSl7cmV0dXJuIG5ldyBFKGEpfTt0LnNoaWZ0X2ppcy5nZXREZWNvZGVyPWZ1bmN0aW9uKGEpe3JldHVybiBuZXcgQShhKX07dFsiZXVjLWtyIl0uZ2V0RW5jb2Rlcj1mdW5jdGlvbihhKXtyZXR1cm4gbmV3IEooYSl9O3RbImV1Yy1rciJdLmdldERlY29kZXI9ZnVuY3Rpb24oYSl7cmV0dXJuIG5ldyBJKGEpfTt0WyJpc28tMjAyMi1rciJdLmdldEVuY29kZXI9ZnVuY3Rpb24oYSl7cmV0dXJuIG5ldyBGKGEpfTt0WyJpc28tMjAyMi1rciJdLmdldERlY29kZXI9CmZ1bmN0aW9uKGEpe3JldHVybiBuZXcgSyhhKX07dFsidXRmLTE2Il0uZ2V0RW5jb2Rlcj1mdW5jdGlvbihhKXtyZXR1cm4gbmV3IE8oITEsYSl9O3RbInV0Zi0xNiJdLmdldERlY29kZXI9ZnVuY3Rpb24oYSl7cmV0dXJuIG5ldyBOKCExLGEpfTt0WyJ1dGYtMTZiZSJdLmdldEVuY29kZXI9ZnVuY3Rpb24oYSl7cmV0dXJuIG5ldyBPKCEwLGEpfTt0WyJ1dGYtMTZiZSJdLmdldERlY29kZXI9ZnVuY3Rpb24oYSl7cmV0dXJuIG5ldyBOKCEwLGEpfTtMLnByb3RvdHlwZT17ZW5jb2RlOmZ1bmN0aW9uKGEsYil7YT1hPyIiK2E6IiI7Yj1PYmplY3QoYik7dGhpcy5fc3RyZWFtaW5nfHwodGhpcy5fZW5jb2Rlcj10aGlzLl9lbmNvZGluZy5nZXRFbmNvZGVyKHRoaXMuX29wdGlvbnMpKTt0aGlzLl9zdHJlYW1pbmc9Qm9vbGVhbihiLnN0cmVhbSk7Zm9yKHZhciBlPVtdLGY9bmV3IGQoZSksaD1uZXcgYyhhKTstMSE9PWguZ2V0KCk7KXRoaXMuX2VuY29kZXIuZW5jb2RlKGYsaCk7aWYoIXRoaXMuX3N0cmVhbWluZyl7dmFyIGc7CmRvIGc9dGhpcy5fZW5jb2Rlci5lbmNvZGUoZixoKTt3aGlsZSgtMSE9PWcpO3RoaXMuX2VuY29kZXI9bnVsbH1yZXR1cm4gbmV3IFVpbnQ4QXJyYXkoZSl9fTtNLnByb3RvdHlwZT17ZGVjb2RlOmZ1bmN0aW9uKGIsZCl7aWYoYiYmISgiYnVmZmVyImluIGImJiJieXRlT2Zmc2V0ImluIGImJiJieXRlTGVuZ3RoImluIGIpKXRocm93IG5ldyBUeXBlRXJyb3IoIkV4cGVjdGVkIEFycmF5QnVmZmVyVmlldyIpO2J8fChiPW5ldyBVaW50OEFycmF5KDApKTtkPU9iamVjdChkKTt0aGlzLl9zdHJlYW1pbmd8fCh0aGlzLl9kZWNvZGVyPXRoaXMuX2VuY29kaW5nLmdldERlY29kZXIodGhpcy5fb3B0aW9ucykpO3RoaXMuX3N0cmVhbWluZz1Cb29sZWFuKGQuc3RyZWFtKTt2YXIgYz1uZXcgVWludDhBcnJheShiLmJ1ZmZlcixiLmJ5dGVPZmZzZXQsYi5ieXRlTGVuZ3RoKSxjPW5ldyBhKGMpO2lmKCF0aGlzLl9CT01zZWVuKXt0aGlzLl9CT01zZWVuPSEwO3ZhciBmPXRoaXMuX2VuY29kaW5nLm5hbWU7CmMubWF0Y2goWzI1NSwyNTRdKSYmInV0Zi0xNiI9PT1mP2Mub2Zmc2V0KDIpOmMubWF0Y2goWzI1NCwyNTVdKSYmInV0Zi0xNmJlIj09Zj9jLm9mZnNldCgyKTpjLm1hdGNoKFsyMzksMTg3LDE5MV0pJiYidXRmLTgiPT1mJiZjLm9mZnNldCgzKX1mb3IodmFyIGY9bmV3IGUsaDstMSE9PWMuZ2V0KCk7KWg9dGhpcy5fZGVjb2Rlci5kZWNvZGUoYyksbnVsbCE9PWgmJi0xIT09aCYmZi5lbWl0KGgpO2lmKCF0aGlzLl9zdHJlYW1pbmcpe2RvIGg9dGhpcy5fZGVjb2Rlci5kZWNvZGUoYyksbnVsbCE9PWgmJi0xIT09aCYmZi5lbWl0KGgpO3doaWxlKC0xIT09aCYmLTEhPWMuZ2V0KCkpO3RoaXMuX2RlY29kZXI9bnVsbH1yZXR1cm4gZi5zdHJpbmcoKX19O2cuVGV4dEVuY29kZXI9Zy5UZXh0RW5jb2Rlcnx8TDtnLlRleHREZWNvZGVyPWcuVGV4dERlY29kZXJ8fE19fSkodGhpcyk7CihmdW5jdGlvbigpe09ULlJ1bW9yPXtNZXNzYWdlVHlwZTp7U1VCU0NSSUJFOjAsVU5TVUJTQ1JJQkU6MSxNRVNTQUdFOjIsQ09OTkVDVDozLERJU0NPTk5FQ1Q6NCxQSU5HOjcsUE9ORzo4LFNUQVRVUzo5fX19KSh0aGlzKTsKKGZ1bmN0aW9uKCl7dmFyIGc9ezEwMDI6IlRoZSBlbmRwb2ludCBpcyB0ZXJtaW5hdGluZyB0aGUgY29ubmVjdGlvbiBkdWUgdG8gYSBwcm90b2NvbCBlcnJvci4gKENMT1NFX1BST1RPQ09MX0VSUk9SKSIsMTAwMzoiVGhlIGNvbm5lY3Rpb24gaXMgYmVpbmcgdGVybWluYXRlZCBiZWNhdXNlIHRoZSBlbmRwb2ludCByZWNlaXZlZCBkYXRhIG9mIGEgdHlwZSBpdCBjYW5ub3QgYWNjZXB0IChmb3IgZXhhbXBsZSwgYSB0ZXh0LW9ubHkgZW5kcG9pbnQgcmVjZWl2ZWQgYmluYXJ5IGRhdGEpLiAoQ0xPU0VfVU5TVVBQT1JURUQpIiwxMDA0OiJUaGUgZW5kcG9pbnQgaXMgdGVybWluYXRpbmcgdGhlIGNvbm5lY3Rpb24gYmVjYXVzZSBhIGRhdGEgZnJhbWUgd2FzIHJlY2VpdmVkIHRoYXQgaXMgdG9vIGxhcmdlLiAoQ0xPU0VfVE9PX0xBUkdFKSIsMTAwNToiSW5kaWNhdGVzIHRoYXQgbm8gc3RhdHVzIGNvZGUgd2FzIHByb3ZpZGVkIGV2ZW4gdGhvdWdoIG9uZSB3YXMgZXhwZWN0ZWQuIChDTE9TRV9OT19TVEFUVVMpIiwKMTAwNjoiVXNlZCB0byBpbmRpY2F0ZSB0aGF0IGEgY29ubmVjdGlvbiB3YXMgY2xvc2VkIGFibm9ybWFsbHkgKHRoYXQgaXMsIHdpdGggbm8gY2xvc2UgZnJhbWUgYmVpbmcgc2VudCkgd2hlbiBhIHN0YXR1cyBjb2RlIGlzIGV4cGVjdGVkLiAoQ0xPU0VfQUJOT1JNQUwpIiwxMDA3OiJJbmRpY2F0ZXMgdGhhdCBhbiBlbmRwb2ludCBpcyB0ZXJtaW5hdGluZyB0aGUgY29ubmVjdGlvbiBiZWNhdXNlIGl0IGhhcyByZWNlaXZlZCBkYXRhIHdpdGhpbiBhIG1lc3NhZ2UgdGhhdCB3YXMgbm90IGNvbnNpc3RlbnQgd2l0aCB0aGUgdHlwZSBvZiB0aGUgbWVzc2FnZSAoZS5nLiwgbm9uLVVURi04IFtSRkMzNjI5XSBkYXRhIHdpdGhpbiBhIHRleHQgbWVzc2FnZSkiLDEwMDg6IkluZGljYXRlcyB0aGF0IGFuIGVuZHBvaW50IGlzIHRlcm1pbmF0aW5nIHRoZSBjb25uZWN0aW9uIGJlY2F1c2UgaXQgaGFzIHJlY2VpdmVkIGEgbWVzc2FnZSB0aGF0IHZpb2xhdGVzIGl0cyBwb2xpY3kuICBUaGlzIGlzIGEgZ2VuZXJpYyBzdGF0dXMgY29kZSB0aGF0IGNhbiBiZSByZXR1cm5lZCB3aGVuIHRoZXJlIGlzIG5vIG90aGVyIG1vcmUgc3VpdGFibGUgc3RhdHVzIGNvZGUgKGUuZy4sIDEwMDMgb3IgMTAwOSkgb3IgaWYgdGhlcmUgaXMgYSBuZWVkIHRvIGhpZGUgc3BlY2lmaWMgZGV0YWlscyBhYm91dCB0aGUgcG9saWN5IiwKMTAwOToiSW5kaWNhdGVzIHRoYXQgYW4gZW5kcG9pbnQgaXMgdGVybWluYXRpbmcgdGhlIGNvbm5lY3Rpb24gYmVjYXVzZSBpdCBoYXMgcmVjZWl2ZWQgYSBtZXNzYWdlIHRoYXQgaXMgdG9vIGJpZyBmb3IgaXQgdG8gcHJvY2VzcyIsMTAxMToiSW5kaWNhdGVzIHRoYXQgYSBzZXJ2ZXIgaXMgdGVybWluYXRpbmcgdGhlIGNvbm5lY3Rpb24gYmVjYXVzZSBpdCBlbmNvdW50ZXJlZCBhbiB1bmV4cGVjdGVkIGNvbmRpdGlvbiB0aGF0IHByZXZlbnRlZCBpdCBmcm9tIGZ1bGZpbGxpbmcgdGhlIHJlcXVlc3QiLDQwMDE6IkNvbm5lY3Rpdml0eSBsb3NzIHdhcyBkZXRlY3RlZCBhcyBpdCB3YXMgdG9vIGxvbmcgc2luY2UgdGhlIHNvY2tldCByZWNlaXZlZCB0aGUgbGFzdCBQT05HIG1lc3NhZ2UifTtPVC5SdW1vci5Tb2NrZXRFcnJvcj1mdW5jdGlvbihiLGYpe3RoaXMuY29kZT1iO3RoaXMubWVzc2FnZT1mfTtPVC5SdW1vci5Tb2NrZXQ9ZnVuY3Rpb24oYixmLGEpe3ZhciBkLGMsZSxoLGksCmssaixsLG0scCxuLHI9T1QuJC5zdGF0YWJsZSh0aGlzLFsiZGlzY29ubmVjdGVkIiwiZXJyb3IiLCJjb25uZWN0ZWQiLCJjb25uZWN0aW5nIiwiZGlzY29ubmVjdGluZyJdLCJkaXNjb25uZWN0ZWQiLGZ1bmN0aW9uKGEpe3N3aXRjaChhKXtjYXNlICJkaXNjb25uZWN0ZWQiOmNhc2UgImVycm9yIjppZihkPW51bGwsaSl7dmFyIGI7aWYoIXA/MDoxNDkwMDw9T1QuJC5ub3coKS1wKWI9RXJyb3IoZ1s0MDAxXSksYi5jb2RlPTQwMDE7aShiKX19fSkscT1mdW5jdGlvbihhLGIpe2lmKG51bGw9PT1ifHwhT1QuJC5pc0Z1bmN0aW9uKGIpKXRocm93IEVycm9yKCJUaGUgUnVtb3IuU29ja2V0ICIrYSsiIGNhbGxiYWNrIG11c3QgYmUgYSB2YWxpZCBmdW5jdGlvbiBvciBudWxsIik7fSxvPWZ1bmN0aW9uKGEpe09ULmVycm9yKCJSdW1vci5Tb2NrZXQ6ICIrYSk7YT1uZXcgT1QuUnVtb3IuU29ja2V0RXJyb3IobnVsbCxhfHwiVW5rbm93biBTb2NrZXQgRXJyb3IiKTttJiZjbGVhclRpbWVvdXQobSk7CnIoImVycm9yIik7ImNvbm5lY3RpbmciPT09dGhpcy5wcmV2aW91c1N0YXRlJiZqJiYoaihhLG51bGwpLGo9bnVsbCk7aCYmaChhKX0uYmluZCh0aGlzKSxzPWZ1bmN0aW9uIEMoYSl7ZCYmKHZvaWQgMD09PWEmJihhPTApLGwmJmNsZWFyVGltZW91dChsKSwwPGQuYnVmZmVyZWRBbW91bnQmJjEwPj1hKzE/bD1zZXRUaW1lb3V0KEMsMTAwLGErMSk6KHIoImRpc2Nvbm5lY3RpbmciKSxsJiYoY2xlYXJUaW1lb3V0KGwpLGw9bnVsbCksY29uc29sZS5pbmZvKCJDQUxMRUQgQ0xPU0UgT04gV0VCU09DS0VUIiksZC5jbG9zZSgpKSl9LHg9ZnVuY3Rpb24gQSgpe3RoaXMuaXMoImNvbm5lY3RlZCIpJiYoKCFwPzA6MTQ5MDA8PU9ULiQubm93KCktcCk/eih7Y29kZTo0MDAxfSk6KGQuc2VuZChPVC5SdW1vci5NZXNzYWdlLlBpbmcoKS5zZXJpYWxpemUoKSksbj1zZXRUaW1lb3V0KEEuYmluZCh0aGlzKSw1RTMpKSl9LmJpbmQodGhpcyksdj1mdW5jdGlvbigpe20mJmNsZWFyVGltZW91dChtKTsKZC5zZW5kKE9ULlJ1bW9yLk1lc3NhZ2UuQ29ubmVjdChjLGYpLnNlcmlhbGl6ZSgpKTtyKCJjb25uZWN0ZWQiKTtqJiYoaihudWxsLGMpLGo9bnVsbCk7ZSYmZShjKTtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7cD1PVC4kLm5vdygpO3goKX0sNUUzKX0seT1mdW5jdGlvbigpe28oIlRpbWVkIG91dCB3aGlsZSB3YWl0aW5nIGZvciB0aGUgUnVtb3Igc29ja2V0IHRvIGNvbm5lY3QuIil9LEI9ZnVuY3Rpb24oKXt9LHo9ZnVuY3Rpb24oYSl7bSYmY2xlYXJUaW1lb3V0KG0pO24mJmNsZWFyVGltZW91dChuKTtpZigxRTMhPT1hLmNvZGUmJjEwMDEhPT1hLmNvZGUpe3ZhciBiPWEucmVhc29ufHxhLm1lc3NhZ2U7IWImJmcuaGFzT3duUHJvcGVydHkoYS5jb2RlKSYmKGI9Z1thLmNvZGVdKTtvKCJSdW1vciBTb2NrZXQgRGlzY29ubmVjdGVkOiAiK2IpfXRoaXMuaXNOb3QoImVycm9yIikmJnIoImRpc2Nvbm5lY3RlZCIpfS5iaW5kKHRoaXMpLHc9ZnVuY3Rpb24oYSl7cD1PVC4kLm5vdygpO2smJgooYT1PVC5SdW1vci5NZXNzYWdlLmRlc2VyaWFsaXplKGEuZGF0YSksYS50eXBlIT09T1QuUnVtb3IuTWVzc2FnZVR5cGUuUE9ORyYmayhhLnRvQWRkcmVzcyxhLmRhdGEpKX07dGhpcy5wdWJsaXNoPWZ1bmN0aW9uKGEsYil7ZC5zZW5kKE9ULlJ1bW9yLk1lc3NhZ2UuUHVibGlzaChhLGIpLnNlcmlhbGl6ZSgpKX07dGhpcy5zdWJzY3JpYmU9ZnVuY3Rpb24oYSl7ZC5zZW5kKE9ULlJ1bW9yLk1lc3NhZ2UuU3Vic2NyaWJlKGEpLnNlcmlhbGl6ZSgpKX07dGhpcy51bnN1YnNjcmliZT1mdW5jdGlvbihhKXtkLnNlbmQoT1QuUnVtb3IuTWVzc2FnZS5VbnN1YnNjcmliZShhKS5zZXJpYWxpemUoKSl9O3RoaXMuY29ubmVjdD1mdW5jdGlvbihlLGYpe2lmKHRoaXMuaXMoImNvbm5lY3RpbmciLCJjb25uZWN0ZWQiKSlmKG51bGwsIlJ1bW9yLlNvY2tldCBjYW5ub3QgY29ubmVjdCB3aGVuIGl0IGlzIGFscmVhZHkgY29ubmVjdGluZyBvciBjb25uZWN0ZWQuIik7ZWxzZXtjPWU7aj1mO3RyeXtyKCJjb25uZWN0aW5nIiksCmQ9bmV3IChhfHxXZWJTb2NrZXQpKGIpLGQuYmluYXJ5VHlwZT0iYXJyYXlidWZmZXIiLGQub25vcGVuPXYsZC5vbmNsb3NlPXosZC5vbmVycm9yPUIsZC5vbm1lc3NhZ2U9dyxtPXNldFRpbWVvdXQoeSxPVC5SdW1vci5Tb2NrZXQuQ09OTkVDVF9USU1FT1VUKX1jYXRjaChoKXtPVC5lcnJvcihoKSxvKCJDb3VsZCBub3QgY29ubmVjdCB0byB0aGUgUnVtb3Igc29ja2V0LCBwb3NzaWJseSBiZWNhdXNlIG9mIGEgYmxvY2tlZCBwb3J0LiIpfX19O3RoaXMuZGlzY29ubmVjdD1mdW5jdGlvbigpe20mJmNsZWFyVGltZW91dChtKTtuJiZjbGVhclRpbWVvdXQobik7ZD8zPT09ZC5yZWFkeVN0YXRlP3RoaXMuaXNOb3QoImVycm9yIikmJnIoImRpc2Nvbm5lY3RlZCIpOih0aGlzLmlzKCJjb25uZWN0ZWQiKSYmZC5zZW5kKE9ULlJ1bW9yLk1lc3NhZ2UuRGlzY29ubmVjdCgpLnNlcmlhbGl6ZSgpKSxzKCkpOnRoaXMuaXNOb3QoImVycm9yIikmJnIoImRpc2Nvbm5lY3RlZCIpfTtPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0aGlzLAp7aWQ6e2dldDpmdW5jdGlvbigpe3JldHVybiBjfX0sb25PcGVuOntzZXQ6ZnVuY3Rpb24oYSl7cSgib25PcGVuIixhKTtlPWF9LGdldDpmdW5jdGlvbigpe3JldHVybiBlfX0sb25FcnJvcjp7c2V0OmZ1bmN0aW9uKGEpe3EoIm9uRXJyb3IiLGEpO2g9YX0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGh9fSxvbkNsb3NlOntzZXQ6ZnVuY3Rpb24oYSl7cSgib25DbG9zZSIsYSk7aT1hfSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gaX19LG9uTWVzc2FnZTp7c2V0OmZ1bmN0aW9uKGEpe3EoIm9uTWVzc2FnZSIsYSk7az1hfSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4ga319fSl9O09ULlJ1bW9yLlNvY2tldC5DT05ORUNUX1RJTUVPVVQ9MTVFM30pKHRoaXMpOwooZnVuY3Rpb24oKXtPVC5SdW1vci5NZXNzYWdlPWZ1bmN0aW9uKGcsYixmLGEpe3RoaXMudHlwZT1nO3RoaXMudG9BZGRyZXNzPWI7dGhpcy5oZWFkZXJzPWY7dGhpcy5kYXRhPWF9O09ULlJ1bW9yLk1lc3NhZ2UucHJvdG90eXBlLnNlcmlhbGl6ZT1mdW5jdGlvbigpe3ZhciBnPTgsYj03LGY9QXJyYXkodGhpcy50b0FkZHJlc3MubGVuZ3RoKSxhPUFycmF5KHRoaXMuaGVhZGVycy5sZW5ndGgpLGQ9QXJyYXkodGhpcy5oZWFkZXJzLmxlbmd0aCksYztiKys7Zm9yKHZhciBlPTA7ZTx0aGlzLnRvQWRkcmVzcy5sZW5ndGg7ZSsrKWZbZV09VGV4dEVuY29kZXIoInV0Zi04IikuZW5jb2RlKHRoaXMudG9BZGRyZXNzW2VdKSxiKz0yLGIrPWZbZV0ubGVuZ3RoO2IrKztmb3IoZT0wO2U8dGhpcy5oZWFkZXJzLmxlbmd0aDtlKyspYVtlXT1UZXh0RW5jb2RlcigidXRmLTgiKS5lbmNvZGUodGhpcy5oZWFkZXJzW2VdLmtleSksZFtlXT1UZXh0RW5jb2RlcigidXRmLTgiKS5lbmNvZGUodGhpcy5oZWFkZXJzW2VdLnZhbCksCmIrPTQsYis9YVtlXS5sZW5ndGgsYis9ZFtlXS5sZW5ndGg7Yz1UZXh0RW5jb2RlcigidXRmLTgiKS5lbmNvZGUodGhpcy5kYXRhKTt2YXIgYj1iK2MubGVuZ3RoLGg9bmV3IEFycmF5QnVmZmVyKGIpLGk9bmV3IFVpbnQ4QXJyYXkoaCwwLGIpLGI9Yi00O2lbMF09KGImNDI3ODE5MDA4MCk+Pj4yNDtpWzFdPShiJjE2NzExNjgwKT4+PjE2O2lbMl09KGImNjUyODApPj4+ODtpWzNdPShiJjI1NSk+Pj4wO2lbNF09MDtpWzVdPTA7aVs2XT10aGlzLnR5cGU7aVs3XT10aGlzLnRvQWRkcmVzcy5sZW5ndGg7Zm9yKGU9MDtlPGYubGVuZ3RoO2UrKyl7c3RyQXJyYXk9ZltlXTtpW2crK109c3RyQXJyYXkubGVuZ3RoPj44JjI1NTtpW2crK109c3RyQXJyYXkubGVuZ3RoPj4wJjI1NTtmb3IoYj0wO2I8c3RyQXJyYXkubGVuZ3RoO2IrKylpW2crK109c3RyQXJyYXlbYl19aVtnKytdPWEubGVuZ3RoO2ZvcihlPTA7ZTxhLmxlbmd0aDtlKyspe3N0ckFycmF5PWFbZV07aVtnKytdPXN0ckFycmF5Lmxlbmd0aD4+CjgmMjU1O2lbZysrXT1zdHJBcnJheS5sZW5ndGg+PjAmMjU1O2ZvcihiPTA7YjxzdHJBcnJheS5sZW5ndGg7YisrKWlbZysrXT1zdHJBcnJheVtiXTtzdHJBcnJheT1kW2VdO2lbZysrXT1zdHJBcnJheS5sZW5ndGg+PjgmMjU1O2lbZysrXT1zdHJBcnJheS5sZW5ndGg+PjAmMjU1O2ZvcihiPTA7YjxzdHJBcnJheS5sZW5ndGg7YisrKWlbZysrXT1zdHJBcnJheVtiXX1mb3IoZT0wO2U8Yy5sZW5ndGg7ZSsrKWlbZysrXT1jW2VdO3JldHVybiBofTtPVC5SdW1vci5NZXNzYWdlLmRlc2VyaWFsaXplPWZ1bmN0aW9uKGcpe3ZhciBiLGY9OCxhPW5ldyBVaW50OEFycmF5KGcpO2I9YVs2XTtmb3IodmFyIGQ9W10sYz0wO2M8YVs3XTtjKyspe2xlbmd0aD1hW2YrK108PDg7bGVuZ3RoKz1hW2YrK107dmFyIGU9bmV3IFVpbnQ4QXJyYXkoZyxmLGxlbmd0aCk7ZFtjXT1UZXh0RGVjb2RlcigidXRmLTgiKS5kZWNvZGUoZSk7Zis9bGVuZ3RofWZvcih2YXIgaD1hW2YrK10saT1bXSxjPTA7YzxoO2MrKyl7bGVuZ3RoPQphW2YrK108PDg7bGVuZ3RoKz1hW2YrK107dmFyIGU9bmV3IFVpbnQ4QXJyYXkoZyxmLGxlbmd0aCksaz1UZXh0RGVjb2RlcigidXRmLTgiKS5kZWNvZGUoZSksZj1mK2xlbmd0aDtsZW5ndGg9YVtmKytdPDw4O2xlbmd0aCs9YVtmKytdO2U9bmV3IFVpbnQ4QXJyYXkoZyxmLGxlbmd0aCk7ZT1UZXh0RGVjb2RlcigidXRmLTgiKS5kZWNvZGUoZSk7aVtjXT17a2V5OmssdmFsOmV9O2YrPWxlbmd0aH1nPW5ldyBVaW50OEFycmF5KGcsZik7Zz1UZXh0RGVjb2RlcigidXRmLTgiKS5kZWNvZGUoZyk7cmV0dXJuIG5ldyBPVC5SdW1vci5NZXNzYWdlKGIsZCxpLGcpfTtPVC5SdW1vci5NZXNzYWdlLkNvbm5lY3Q9ZnVuY3Rpb24oZyxiKXtyZXR1cm4gbmV3IE9ULlJ1bW9yLk1lc3NhZ2UoT1QuUnVtb3IuTWVzc2FnZVR5cGUuQ09OTkVDVCxbXSxbe2tleToidW5pcXVlSWQiLHZhbDpnfSx7a2V5OiJub3RpZnlEaXNjb25uZWN0QWRkcmVzcyIsdmFsOmJ9XSwiIil9O09ULlJ1bW9yLk1lc3NhZ2UuRGlzY29ubmVjdD0KZnVuY3Rpb24oKXtyZXR1cm4gbmV3IE9ULlJ1bW9yLk1lc3NhZ2UoT1QuUnVtb3IuTWVzc2FnZVR5cGUuRElTQ09OTkVDVCxbXSxbXSwiIil9O09ULlJ1bW9yLk1lc3NhZ2UuU3Vic2NyaWJlPWZ1bmN0aW9uKGcpe3JldHVybiBuZXcgT1QuUnVtb3IuTWVzc2FnZShPVC5SdW1vci5NZXNzYWdlVHlwZS5TVUJTQ1JJQkUsZyxbXSwiIil9O09ULlJ1bW9yLk1lc3NhZ2UuVW5zdWJzY3JpYmU9ZnVuY3Rpb24oZyl7cmV0dXJuIG5ldyBPVC5SdW1vci5NZXNzYWdlKE9ULlJ1bW9yLk1lc3NhZ2VUeXBlLlVOU1VCU0NSSUJFLGcsW10sIiIpfTtPVC5SdW1vci5NZXNzYWdlLlB1Ymxpc2g9ZnVuY3Rpb24oZyxiKXtyZXR1cm4gbmV3IE9ULlJ1bW9yLk1lc3NhZ2UoT1QuUnVtb3IuTWVzc2FnZVR5cGUuTUVTU0FHRSxnLFtdLGIpfTtPVC5SdW1vci5NZXNzYWdlLlBpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IE9ULlJ1bW9yLk1lc3NhZ2UoT1QuUnVtb3IuTWVzc2FnZVR5cGUuUElORyxbXSxbXSwiIil9fSkodGhpcyk7CihmdW5jdGlvbigpe09ULlJhcHRvcj17QWN0aW9uczp7Q09OTkVDVDoxMDAsQ1JFQVRFOjEwMSxVUERBVEU6MTAyLERFTEVURToxMDMsU1RBVEU6MTA0LEZPUkNFX0RJU0NPTk5FQ1Q6MTA1LEZPUkNFX1VOUFVCTElTSDoxMDYsU0lHTkFMOjEwNyxDUkVBVEVfQVJDSElWRToxMDgsQ0xPU0VfQVJDSElWRToxMDksU1RBUlRfUkVDT1JESU5HX1NFU1NJT046MTEwLFNUT1BfUkVDT1JESU5HX1NFU1NJT046MTExLFNUQVJUX1JFQ09SRElOR19TVFJFQU06MTEyLFNUT1BfUkVDT1JESU5HX1NUUkVBTToxMTMsTE9BRF9BUkNISVZFOjExNCxTVEFSVF9QTEFZQkFDSzoxMTUsU1RPUF9QTEFZQkFDSzoxMTYsQVBQU1RBVEVfUFVUOjExNyxBUFBTVEFURV9ERUxFVEU6MTE4LE9GRkVSOjExOSxBTlNXRVI6MTIwLFBSQU5TV0VSOjEyMSxDQU5ESURBVEU6MTIyLFNVQlNDUklCRToxMjMsVU5TVUJTQ1JJQkU6MTI0LFFVRVJZOjEyNSxTRFBfQU5TV0VSOjEyNixQT05HOjEyNyxSRUdJU1RFUjoxMjgsUVVBTElUWV9DSEFOR0VEOjEyOX0sClR5cGVzOntSUENfUkVRVUVTVDoxMDAsUlBDX1JFU1BPTlNFOjEwMSxTVFJFQU06MTAyLEFSQ0hJVkU6MTAzLENPTk5FQ1RJT046MTA0LEFQUFNUQVRFOjEwNSxDT05ORUNUSU9OQ09VTlQ6MTA2LE1PREVSQVRJT046MTA3LFNJR05BTDoxMDgsU1VCU0NSSUJFUjoxMTAsSlNFUDoxMDl9fX0pKHRoaXMpOwooZnVuY3Rpb24oKXt2YXIgZz17fSxiPXt9LGY9T1QuUmFwdG9yLlR5cGVzLGE7Zm9yKGEgaW4gZilnW2ZbYV1dPWE7Zj1PVC5SYXB0b3IuQWN0aW9ucztmb3IoYSBpbiBmKWJbZlthXV09YTtPVC5SYXB0b3Iuc2VyaWFsaXplTWVzc2FnZT1mdW5jdGlvbihhKXtyZXR1cm4gSlNPTi5zdHJpbmdpZnkoYSl9O09ULlJhcHRvci5kZXNlcmlhbGl6ZU1lc3NhZ2U9ZnVuY3Rpb24oYSl7YT1KU09OLnBhcnNlKGEpO2EudHlwZSYmKGEudHlwZT1wYXJzZUludChhLnR5cGUsMTApLGEudHlwZU5hbWU9Z1thLnR5cGVdfHxudWxsKTthLmFjdGlvbiYmKGEuYWN0aW9uPXBhcnNlSW50KGEuYWN0aW9uLDEwKSxhLmFjdGlvbk5hbWU9YlthLmFjdGlvbl18fG51bGwpO2Euc2lnbmF0dXJlPWEudHlwZU5hbWUrIjoiK2EuYWN0aW9uTmFtZTtyZXR1cm4gYX07T1QuUmFwdG9yLk1lc3NhZ2U9e307T1QuUmFwdG9yLk1lc3NhZ2UuY29ubmVjdD1mdW5jdGlvbihhLGIsZSxmLGcsayl7YT17Y3JlZGVudGlhbHM6e2Nvbm5lY3Rpb25JZDpiLApzb0FjY2Vzc1N0YXRlOjIsc3VwcG9ydHNXZWJSVEM6ITAscDJwRW5hYmxlZDprLEdVSUQ6YSx3aWRnZXRJZDphLHBhcnRuZXJJZDpmfSxzZXNzaW9uSWQ6ZSxwYXJhbXM6e3Rva2VuUGVybWlzc2lvbnM6e2FwaUtleTpmfSx0b2tlbjpnfSx1bmlxdWVJZDpifTtyZXR1cm4gT1QuUmFwdG9yLnNlcmlhbGl6ZU1lc3NhZ2Uoe2lkOk9ULiQudXVpZCgpLHR5cGU6T1QuUmFwdG9yLlR5cGVzLlJQQ19SRVFVRVNULGFjdGlvbjpPVC5SYXB0b3IuQWN0aW9ucy5DT05ORUNULHBheWxvYWQ6YSxyZXBseVRvOmJ9KX07T1QuUmFwdG9yLk1lc3NhZ2UuZ2V0U2Vzc2lvblN0YXRlPWZ1bmN0aW9uKGEsYixlKXtyZXR1cm4gT1QuUmFwdG9yLnNlcmlhbGl6ZU1lc3NhZ2Uoe2lkOk9ULiQudXVpZCgpLHR5cGU6T1QuUmFwdG9yLlR5cGVzLlJQQ19SRVFVRVNULGFjdGlvbjpPVC5SYXB0b3IuQWN0aW9ucy5TVEFURSxwYXlsb2FkOntzZXNzaW9uSWQ6Yixjb25uZWN0aW9uc1JlcXVpcmVkOmV8fCEwfSxyZXBseVRvOmF9KX07Ck9ULlJhcHRvci5NZXNzYWdlLmZvcmNlRGlzY29ubmVjdD1mdW5jdGlvbihhLGIsZSl7cmV0dXJuIE9ULlJhcHRvci5zZXJpYWxpemVNZXNzYWdlKHtpZDphLHR5cGU6T1QuUmFwdG9yLlR5cGVzLlJQQ19SRVFVRVNULGFjdGlvbjpPVC5SYXB0b3IuQWN0aW9ucy5GT1JDRV9ESVNDT05ORUNULHBheWxvYWQ6e2Nvbm5lY3Rpb25JZDpiLHNlc3Npb25JZDplfSxyZXBseVRvOmF9KX07T1QuUmFwdG9yLk1lc3NhZ2Uuc3RyZWFtQ3JlYXRlPWZ1bmN0aW9uKGEsYixlLGYsZyxrLGosbCxtLHApe2I9e2tleTpiLHZhbHVlOntwMnBFbmFibGVkOnB8fCExLHB1Ymxpc2hlcklkOmUsY29ubmVjdGlvbjp7Y29ubmVjdGlvbklkOmF9LHR5cGU6IldlYlJUQyIsbmFtZTpmfHwiIixjcmVhdGlvblRpbWU6RGF0ZS5ub3coKSxvcmllbnRhdGlvbjp7d2lkdGg6ayxoZWlnaHQ6aix2aWRlb09yaWVudGF0aW9uOmd8fCJPVFZpZGVvT3JpZW50YXRpb25Sb3RhdGVkTm9ybWFsIn0saGFzQXVkaW86dm9pZCAwIT09Cmw/bDohMCxoYXNWaWRlbzp2b2lkIDAhPT1tP206ITB9fTtyZXR1cm4gT1QuUmFwdG9yLnNlcmlhbGl6ZU1lc3NhZ2Uoe2lkOmEsdHlwZTpPVC5SYXB0b3IuVHlwZXMuU1RSRUFNLGFjdGlvbjpPVC5SYXB0b3IuQWN0aW9ucy5DUkVBVEUscGF5bG9hZDpiLHJlcGx5VG86IiJ9KX07T1QuUmFwdG9yLk1lc3NhZ2Uuc3RyZWFtRGVzdHJveT1mdW5jdGlvbihhLGIsZSl7cmV0dXJuIE9ULlJhcHRvci5zZXJpYWxpemVNZXNzYWdlKHtpZDphLHR5cGU6T1QuUmFwdG9yLlR5cGVzLlNUUkVBTSxhY3Rpb246T1QuUmFwdG9yLkFjdGlvbnMuREVMRVRFLHBheWxvYWQ6e2tleTpiKyIvU1RSRUFNUy8iK2V9LHJlcGx5VG86YX0pfTtPVC5SYXB0b3IuTWVzc2FnZS5zdHJlYW1Nb2RpZnk9ZnVuY3Rpb24oYSxiLGUsZixnKXtyZXR1cm4gT1QuUmFwdG9yLnNlcmlhbGl6ZU1lc3NhZ2Uoe2lkOmEsdHlwZTpPVC5SYXB0b3IuVHlwZXMuU1RSRUFNLGFjdGlvbjpPVC5SYXB0b3IuQWN0aW9ucy5VUERBVEUscGF5bG9hZDp7a2V5OltiLAoiU1RSRUFNUyIsZSxmXS5qb2luKCIvIiksdmFsdWU6Z30scmVwbHlUbzphfSl9O09ULlJhcHRvci5NZXNzYWdlLmZvcmNlVW5wdWJsaXNoPWZ1bmN0aW9uKGEsYixlKXtyZXR1cm4gT1QuUmFwdG9yLnNlcmlhbGl6ZU1lc3NhZ2Uoe2lkOmEsdHlwZTpPVC5SYXB0b3IuVHlwZXMuUlBDX1JFUVVFU1QsYWN0aW9uOk9ULlJhcHRvci5BY3Rpb25zLkZPUkNFX1VOUFVCTElTSCxwYXlsb2FkOntzZXNzaW9uSWQ6Yixjb25uZWN0aW9uSWQ6YSxzdHJlYW1JZDplLHdlYlJUQ1N0cmVhbTohMH0scmVwbHlUbzphfSl9O09ULlJhcHRvci5NZXNzYWdlLmpzZXBPZmZlcj1mdW5jdGlvbihhLGIsZSxmKXtyZXR1cm4gT1QuUmFwdG9yLnNlcmlhbGl6ZU1lc3NhZ2Uoe2lkOmEsdHlwZTpPVC5SYXB0b3IuVHlwZXMuSlNFUCxhY3Rpb246T1QuUmFwdG9yLkFjdGlvbnMuT0ZGRVIscGF5bG9hZDp7ZnJvbUFkZHJlc3M6YSx0b0FkZHJlc3NlczpiLHNkcDpmLHN0cmVhbUlkOmV9LHJlcGx5VG86YX0pfTtPVC5SYXB0b3IuTWVzc2FnZS5qc2VwQW5zd2VyPQpmdW5jdGlvbihhLGIsZSxmKXtyZXR1cm4gT1QuUmFwdG9yLnNlcmlhbGl6ZU1lc3NhZ2Uoe2lkOmEsdHlwZTpPVC5SYXB0b3IuVHlwZXMuSlNFUCxhY3Rpb246T1QuUmFwdG9yLkFjdGlvbnMuQU5TV0VSLHBheWxvYWQ6e2Zyb21BZGRyZXNzOmEsdG9BZGRyZXNzZXM6YixzZHA6ZixzdHJlYW1JZDplfSxyZXBseVRvOmF9KX07T1QuUmFwdG9yLk1lc3NhZ2UuanNlcFN1YnNjcmliZT1mdW5jdGlvbihhLGIsZSxmLGcpe3JldHVybiBPVC5SYXB0b3Iuc2VyaWFsaXplTWVzc2FnZSh7aWQ6YSx0eXBlOk9ULlJhcHRvci5UeXBlcy5KU0VQLGFjdGlvbjpPVC5SYXB0b3IuQWN0aW9ucy5TVUJTQ1JJQkUscGF5bG9hZDp7a2V5TWFuYWdlbWVuTWV0aG9kOk9ULiQuc3VwcG9ydGVkQ3J5cHRvU2NoZW1lKCksYnVuZGxlU3VwcG9ydDpPVC4kLnN1cHBvcnRzQnVuZGxlKCkscnRjcE11eFN1cHBvcnQ6T1QuJC5zdXBwb3J0c1J0Y3BNdXgoKSxmcm9tQWRkcmVzczphLHRvQWRkcmVzc2VzOmIsc3RyZWFtSWQ6ZSwKaGFzVmlkZW86ZixoYXNBdWRpbzpnfSxyZXBseVRvOmF9KX07T1QuUmFwdG9yLk1lc3NhZ2UuanNlcFVuc3Vic2NyaWJlPWZ1bmN0aW9uKGEsYixlKXtyZXR1cm4gT1QuUmFwdG9yLnNlcmlhbGl6ZU1lc3NhZ2Uoe2lkOmEsdHlwZTpPVC5SYXB0b3IuVHlwZXMuSlNFUCxhY3Rpb246T1QuUmFwdG9yLkFjdGlvbnMuVU5TVUJTQ1JJQkUscGF5bG9hZDp7ZnJvbUFkZHJlc3M6YSx0b0FkZHJlc3NlczpiLHN0cmVhbUlkOmV9LHJlcGx5VG86YX0pfTtPVC5SYXB0b3IuTWVzc2FnZS5qc2VwQ2FuZGlkYXRlPWZ1bmN0aW9uKGEsYixlLGYpe3JldHVybiBPVC5SYXB0b3Iuc2VyaWFsaXplTWVzc2FnZSh7aWQ6YSx0eXBlOk9ULlJhcHRvci5UeXBlcy5KU0VQLGFjdGlvbjpPVC5SYXB0b3IuQWN0aW9ucy5DQU5ESURBVEUscGF5bG9hZDp7ZnJvbUFkZHJlc3M6YSx0b0FkZHJlc3NlczpiLGNhbmRpZGF0ZTpmLHN0cmVhbUlkOmV9LHJlcGx5VG86YX0pfTtPVC5SYXB0b3IuTWVzc2FnZS5zdWJzY3JpYmVyTW9kaWZ5PQpmdW5jdGlvbihhLGIsZSxmLGcsayl7cmV0dXJuIE9ULlJhcHRvci5zZXJpYWxpemVNZXNzYWdlKHtpZDpPVC4kLnV1aWQoKSx0eXBlOk9ULlJhcHRvci5UeXBlcy5TVUJTQ1JJQkVSLGFjdGlvbjpPVC5SYXB0b3IuQWN0aW9ucy5VUERBVEUscGF5bG9hZDp7a2V5OltiLCJTVUJTQ1JJQkVSIixlLGEsZ10uam9pbigiLyIpLHZhbHVlOmt9LHJlcGx5VG86YX0pfTtPVC5SYXB0b3IuTWVzc2FnZS5zaWduYWw9ZnVuY3Rpb24oYSxiLGUsZixnKXt2YXIgaz17aWQ6T1QuJC51dWlkKCksZnJvbUFkZHJlc3M6YX07ay50b0FkZHJlc3Nlcz1mJiYhQXJyYXkuaXNBcnJheShmKT9bZl06IWZ8fDA9PT1mLmxlbmd0aD9bYl06Zjt2b2lkIDAhPT1lJiYoay50eXBlPWUpO3ZvaWQgMCE9PWcmJihrLmRhdGE9Zyk7cmV0dXJuIE9ULlJhcHRvci5zZXJpYWxpemVNZXNzYWdlKHtpZDphLHR5cGU6T1QuUmFwdG9yLlR5cGVzLlNJR05BTCxhY3Rpb246T1QuUmFwdG9yLkFjdGlvbnMuU0lHTkFMLHBheWxvYWQ6aywKcmVwbHlUbzphfSl9fSkodGhpcyk7CihmdW5jdGlvbigpe09ULlNpZ25hbD1mdW5jdGlvbihnLGIsZil7dmFyIGE9ZnVuY3Rpb24oYSl7aWYoYSl7aWYoIUFycmF5LmlzQXJyYXkoYSkpcmV0dXJue2NvZGU6NDAwLHJlYXNvbjoiVGhlIFRvIGZpZWxkIHdhcyBpbnZhbGlkIn19ZWxzZSByZXR1cm57Y29kZTo0MDAscmVhc29uOiJUaGUgc2lnbmFsIHR5cGUgd2FzIG51bGwgb3IgYW4gZW1wdHkgU3RyaW5nLiBFaXRoZXIgc2V0IGl0IHRvIGEgbm9uLWVtcHR5IFN0cmluZyB2YWx1ZSBvciBvbWl0IGl0In07Zm9yKHZhciBiPTA7YjxhLmxlbmd0aDtiKyspaWYoIShhW2JdaW5zdGFuY2VvZiBPVC5Db25uZWN0aW9ufHxhW2JdaW5zdGFuY2VvZiBPVC5TZXNzaW9uKSlyZXR1cm57Y29kZTo0MDAscmVhc29uOiJUaGUgVG8gZmllbGQgd2FzIGludmFsaWQifTtyZXR1cm4gbnVsbH0sZD1mdW5jdGlvbihhKXt2YXIgYj1udWxsO251bGw9PT1hfHx2b2lkIDA9PT1hP2I9e2NvZGU6NDAwLHJlYXNvbjoiVGhlIHNpZ25hbCB0eXBlIHdhcyBudWxsIG9yIHVuZGVmaW5lZC4gRWl0aGVyIHNldCBpdCB0byBhIFN0cmluZyB2YWx1ZSBvciBvbWl0IGl0In06MTI4PAphLmxlbmd0aD9iPXtjb2RlOjQxMyxyZWFzb246IlRoZSBzaWduYWwgdHlwZSB3YXMgdG9vIGxvbmcsIHRoZSBtYXhpbXVtIGxlbmd0aCBvZiBpdCBpcyAxMjggY2hhcmFjdGVycyJ9Oi9eW2EtekEtWjAtOVwtXC5ffl0rJC8uZXhlYyhhKXx8KGI9e2NvZGU6NDAwLHJlYXNvbjoiVGhlIHNpZ25hbCB0eXBlIHdhcyBpbnZhbGlkLCBpdCBjYW4gb25seSBjb250YWluIGxldHRlcnMsIG51bWJlcnMsICctJywgJ18nLCBhbmQgJ34nLiJ9KTtyZXR1cm4gYn0sYz1mdW5jdGlvbihhKXt2YXIgYj1udWxsO2lmKG51bGw9PT1hfHx2b2lkIDA9PT1hKWI9e2NvZGU6NDAwLHJlYXNvbjoiVGhlIHNpZ25hbCBkYXRhIHdhcyBudWxsIG9yIHVuZGVmaW5lZC4gRWl0aGVyIHNldCBpdCB0byBhIFN0cmluZyB2YWx1ZSBvciBvbWl0IGl0In07ZWxzZSB0cnl7ODE5MjxKU09OLnN0cmluZ2lmeShhKS5sZW5ndGgmJihiPXtjb2RlOjQxMyxyZWFzb246IlRoZSBkYXRhIGZpZWxkIHdhcyB0b28gbG9uZywgdGhlIG1heGltdW0gc2l6ZSBvZiBpdCBpcyA4MTkyIGNoYXJhY3RlcnMifSl9Y2F0Y2goYyl7Yj0Ke2NvZGU6NDAwLHJlYXNvbjoiVGhlIGRhdGEgZmllbGQgd2FzIG5vdCB2YWxpZCBKU09OIn19cmV0dXJuIGJ9O3RoaXMudG9SYXB0b3JNZXNzYWdlPWZ1bmN0aW9uKCl7dmFyIGE7dGhpcy50byYmKGE9dGhpcy50by5tYXAoZnVuY3Rpb24oYSl7cmV0dXJuInN0cmluZyI9PT10eXBlb2YgYT9hOmEuaWR9KSk7cmV0dXJuIE9ULlJhcHRvci5NZXNzYWdlLnNpZ25hbChiLGcsdGhpcy50eXBlLGEsdGhpcy5kYXRhKX07dGhpcy50b0hhc2g9ZnVuY3Rpb24oKXt2YXIgYT1PVC4kLmNsb25lKGYpO3ZvaWQgMD09PWEudG8mJihhLnRvPW51bGwpO3ZvaWQgMD09PWEuZGF0YSYmKGEuZGF0YT1udWxsKTtyZXR1cm4gYX07dGhpcy5lcnJvcj1udWxsO2lmKGYmJihmLmhhc093blByb3BlcnR5KCJkYXRhIikmJih0aGlzLmRhdGE9T1QuJC5jbG9uZShmLmRhdGEpLHRoaXMuZXJyb3I9Yyh0aGlzLmRhdGEpKSxmLmhhc093blByb3BlcnR5KCJ0byIpJiYodGhpcy50bz1BcnJheS5pc0FycmF5KGYudG8pPwpPVC4kLmNsb25lKGYudG8pOltmLnRvXSx0aGlzLmVycm9yfHwodGhpcy5lcnJvcj1hKHRoaXMudG8pKSksZi5oYXNPd25Qcm9wZXJ0eSgidHlwZSIpKSl0aGlzLmVycm9yfHwodGhpcy5lcnJvcj1kKGYudHlwZSkpLHRoaXMudHlwZT1mLnR5cGU7dGhpcy52YWxpZD1udWxsPT09dGhpcy5lcnJvcn19KSh0aGlzKTsKKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gZyhiLGYsYSl7dGhpcy5jb2RlPWI7dGhpcy5yZWFzb249Zjt0aGlzLnNpZ25hbD1hfU9ULlJhcHRvci5Tb2NrZXQ9ZnVuY3Rpb24oYixmLGEpe3ZhciBkPU9ULnByb3BlcnRpZXMubWVzc2FnaW5nUHJvdG9jb2wrIjovLyIrZisiOiIrT1QucHJvcGVydGllcy5tZXNzYWdpbmdQb3J0KyIvcnVtb3J3ZWJzb2NrZXRzdjIiLGM9InN5bXBob255LiIrZixlLGgsaSxrLGo9bmV3IE9ULkNhcGFiaWxpdGllcyhbXSksbD1uZXcgT1QuQW5hbHl0aWNzLG09T1QuJC5zdGF0YWJsZSh0aGlzLFsiZGlzY29ubmVjdGVkIiwiY29ubmVjdGluZyIsImNvbm5lY3RlZCIsImVycm9yIiwiZGlzY29ubmVjdGluZyJdLCJkaXNjb25uZWN0ZWQiKSxwPWZ1bmN0aW9uKGEsYyxkLGYpe2E9e2FjdGlvbjoid2ViU29ja2V0Q29ubmVjdGlvbiIsdmFyaWF0aW9uOmEscGF5bG9hZF90eXBlOmMscGF5bG9hZDpkLHNlc3Npb25faWQ6ZSxwYXJ0bmVyX2lkOk9ULkFQSUtFWSx3aWRnZXRfaWQ6YiwKd2lkZ2V0X3R5cGU6IkNvbnRyb2xsZXIifTtmJiYoYT1PVC4kLmV4dGVuZChmLGEpKTtsLmxvZ0V2ZW50KGEpfSxuPWZ1bmN0aW9uKGEsYil7YT8ocCgiRmFpbHVyZSIsInJlYXNvbiIsYS5yZWFzb24pLG0oImVycm9yIikpOihwKCJTdWNjZXNzIiwid2ViU29ja2V0U2VydmVyVXJsIixkLHtjb25uZWN0aW9uSWQ6aC5pZH0pLG0oImNvbm5lY3RlZCIpLGo9bmV3IE9ULkNhcGFiaWxpdGllcyhiLnBlcm1pc3Npb25zKSk7ay5hcHBseShudWxsLGFyZ3VtZW50cyl9LHI9ZnVuY3Rpb24oYSl7dmFyIGI9T1Quc2Vzc2lvbnMuZ2V0KGUpLmNvbm5lY3Rpb24sYz10aGlzLmlzKCJkaXNjb25uZWN0aW5nIik/ImNsaWVudERpc2Nvbm5lY3RlZCI6Im5ldHdvcmtEaXNjb25uZWN0ZWQiO2EmJjQwMDE9PWEuY29kZSYmKGM9Im5ldHdvcmtUaW1lZG91dCIpO20oImRpc2Nvbm5lY3RlZCIpO2ImJihiLmRlc3Ryb3llZFJlYXNvbj9jb25zb2xlLmRlYnVnKCJPVC5SYXB0b3IuU29ja2V0OiBTb2NrZXQgd2FzIGNsb3NlZCBidXQgdGhlIGNvbm5lY3Rpb24gaGFkIGFscmVhZHkgYmVlbiBkZXN0cm95ZWQuIFJlYXNvbjogIisKYi5kZXN0cm95ZWRSZWFzb24pOmIuZGVzdHJveShjKSl9LmJpbmQodGhpcykscT1mdW5jdGlvbigpe307dGhpcy5wZXJtaXR0ZWRUbz1mdW5jdGlvbihhKXtyZXR1cm4gMT09PWpbYV19O3RoaXMuY29ubmVjdD1mdW5jdGlvbihhLGcsail7dGhpcy5pcygiZGlzY29ubmVjdGVkIiwiZXJyb3IiKT8obSgiY29ubmVjdGluZyIpLGU9Zy5zZXNzaW9uSWQsaz1qLGo9T1QuJC51dWlkKCksT1Quc2Vzc2lvbnMuZ2V0KGUpLHAoIkF0dGVtcHQiLCJ3ZWJTb2NrZXRTZXJ2ZXJVcmx8dXNlckFnZW50fHNka1ZlcnNpb258Y2hyb21lRnJhbWUiLFtkLG5hdmlnYXRvci51c2VyQWdlbnQsT1QucHJvcGVydGllcy52ZXJzaW9uLHdpbmRvdy5leHRlcm5hbEhvc3Q/InllcyI6Im5vIl0ubWFwKGZ1bmN0aW9uKGEpe3JldHVybiBhLnJlcGxhY2UoInwiLCJcXHwiKX0pLmpvaW4oInwiKSksaD1uZXcgT1QuUnVtb3IuU29ja2V0KGQsYyksaC5vbkNsb3NlPXIsaC5vbk1lc3NhZ2U9aS5kaXNwYXRjaC5iaW5kKGkpLApoLmNvbm5lY3QoaixmdW5jdGlvbihjKXtjP24oYyk6KGgub25FcnJvcj1xLE9ULmRlYnVnKCJSYXB0b3IgU29ja2V0IGNvbm5lY3RlZCB0byAiK2UrIiBvbiAiK2YpLGguc3Vic2NyaWJlKFtlXSksdGhpcy5wdWJsaXNoKE9ULlJhcHRvci5NZXNzYWdlLmNvbm5lY3QoYixoLmlkLGUsT1QuQVBJS0VZLGEsZy5wMnBFbmFibGVkKSkpfS5iaW5kKHRoaXMpKSk6T1Qud2FybigiQ2Fubm90IGNvbm5lY3QgdGhlIFJhcHRvciBTb2NrZXQgYXMgaXQgaXMgY3VycmVudGx5IGNvbm5lY3RlZC4gWW91IHNob3VsZCBkaXNjb25uZWN0IGZpcnN0LiIpfTt0aGlzLmRpc2Nvbm5lY3Q9ZnVuY3Rpb24oKXt0aGlzLmlzKCJkaXNjb25uZWN0ZWQiKXx8KG0oImRpc2Nvbm5lY3RpbmciKSxoLmRpc2Nvbm5lY3QoKSl9O3RoaXMucHVibGlzaD1mdW5jdGlvbihhKXtoLmlzTm90KCJjb25uZWN0ZWQiKT9PVC5lcnJvcigiT1QuUmFwdG9yLlNvY2tldDogY2Fubm90IHB1Ymxpc2ggdW50aWwgdGhlIHNvY2tldCBpcyBjb25uZWN0ZWQuIisKYSk6KE9ULmRlYnVnKCJPVC5SYXB0b3IuU29ja2V0IFB1Ymxpc2g6ICIrYSksaC5wdWJsaXNoKFtjXSxhKSl9O3RoaXMuY3JlYXRlU3RyZWFtPWZ1bmN0aW9uKGEsYixjLGQsZixnLGkpe3ZhciBqPU9ULnNlc3Npb25zLmdldChlKTt0aGlzLnB1Ymxpc2goT1QuUmFwdG9yLk1lc3NhZ2Uuc3RyZWFtQ3JlYXRlKGguaWQsZSxhLGIsYyxkLGYsZyxpLGouc2Vzc2lvbkluZm8ucDJwRW5hYmxlZCkpfTt0aGlzLnVwZGF0ZVN0cmVhbT1mdW5jdGlvbihhLGIsYyl7dGhpcy5wdWJsaXNoKE9ULlJhcHRvci5NZXNzYWdlLnN0cmVhbU1vZGlmeShoLmlkLGUsYSxiLGMpKX07dGhpcy5kZXN0cm95U3RyZWFtPWZ1bmN0aW9uKGEpe3RoaXMucHVibGlzaChPVC5SYXB0b3IuTWVzc2FnZS5zdHJlYW1EZXN0cm95KGguaWQsZSxhKSl9O3RoaXMubW9kaWZ5U3Vic2NyaWJlcj1mdW5jdGlvbihhLGIsYyl7dGhpcy5wdWJsaXNoKE9ULlJhcHRvci5NZXNzYWdlLnN1YnNjcmliZXJNb2RpZnkoaC5pZCxlLGEuc3RyZWFtSWQsCmEud2lkZ2V0SWQsYixjKSl9O3RoaXMuZm9yY2VEaXNjb25uZWN0PWZ1bmN0aW9uKGEpe3RoaXMucHVibGlzaChPVC5SYXB0b3IuTWVzc2FnZS5mb3JjZURpc2Nvbm5lY3QoaC5pZCxhLGUpKX07dGhpcy5mb3JjZVVucHVibGlzaD1mdW5jdGlvbihhKXt0aGlzLnB1Ymxpc2goT1QuUmFwdG9yLk1lc3NhZ2UuZm9yY2VVbnB1Ymxpc2goaC5pZCxlLGEpKX07dGhpcy5qc2VwU3Vic2NyaWJlPWZ1bmN0aW9uKGEsYixjLGQpe3RoaXMucHVibGlzaChPVC5SYXB0b3IuTWVzc2FnZS5qc2VwU3Vic2NyaWJlKGguaWQsYSxiLGMsZCkpfTt0aGlzLmpzZXBVbnN1YnNjcmliZT1mdW5jdGlvbihhLGIpe3RoaXMucHVibGlzaChPVC5SYXB0b3IuTWVzc2FnZS5qc2VwVW5zdWJzY3JpYmUoaC5pZCxhLGIpKX07dGhpcy5qc2VwQ2FuZGlkYXRlPWZ1bmN0aW9uKGEsYixjKXt0aGlzLnB1Ymxpc2goT1QuUmFwdG9yLk1lc3NhZ2UuanNlcENhbmRpZGF0ZShoLmlkLGEsYixjKSl9O3RoaXMuanNlcE9mZmVyPQpmdW5jdGlvbihhLGIsYyl7dGhpcy5wdWJsaXNoKE9ULlJhcHRvci5NZXNzYWdlLmpzZXBPZmZlcihoLmlkLGEsYixjKSl9O3RoaXMuanNlcEFuc3dlcj1mdW5jdGlvbihhLGIsYyl7dGhpcy5wdWJsaXNoKE9ULlJhcHRvci5NZXNzYWdlLmpzZXBBbnN3ZXIoaC5pZCxhLGIsYykpfTt0aGlzLnNpZ25hbD1mdW5jdGlvbihhLGIpe3ZhciBjPW5ldyBPVC5TaWduYWwoZSxoLmlkLGF8fHt9KTtjLnZhbGlkPyh0aGlzLnB1Ymxpc2goYy50b1JhcHRvck1lc3NhZ2UoKSksYiYmT1QuJC5pc0Z1bmN0aW9uKGIpJiZiKG51bGwsYy50b0hhc2goKSkpOmImJk9ULiQuaXNGdW5jdGlvbihiKSYmYihuZXcgZyhjLmVycm9yLmNvZGUsYy5lcnJvci5yZWFzb24sYy50b0hhc2goKSkpfTtPVC4kLmRlZmluZUdldHRlcnModGhpcyx7aWQ6ZnVuY3Rpb24oKXtyZXR1cm4gaC5pZH0sY2FwYWJpbGl0aWVzOmZ1bmN0aW9uKCl7cmV0dXJuIGp9LHNlc3Npb25JZDpmdW5jdGlvbigpe3JldHVybiBlfX0pO2k9bmV3IChhfHwKT1QuUmFwdG9yLkRpc3BhdGNoZXIpKHRoaXMsbil9fSkodGhpcyk7CihmdW5jdGlvbigpe2Z1bmN0aW9uIGcoYSxiKXt2YXIgYz1uZXcgT1QuU3RyZWFtKGEuc3RyZWFtSWQsYi5jb25uZWN0aW9ucy5nZXQoYS5jb25uZWN0aW9uLmNvbm5lY3Rpb25JZCksYS5uYW1lLGEuc3RyZWFtRGF0YSxhLnR5cGUsYS5jcmVhdGlvblRpbWUsYS5oYXNBdWRpbyxhLmhhc1ZpZGVvLGEub3JpZW50YXRpb24/YS5vcmllbnRhdGlvbi52aWRlb09yaWVudGF0aW9uOm51bGwsYS5wZWVySWQsYS5xdWFsaXR5LGEub3JpZW50YXRpb24/YS5vcmllbnRhdGlvbi53aWR0aDpudWxsLGEub3JpZW50YXRpb24/YS5vcmllbnRhdGlvbi5oZWlnaHQ6bnVsbCk7YS5wdWJsaXNoZXJJZCYmKGMucHVibGlzaGVySWQ9YS5wdWJsaXNoZXJJZCk7cmV0dXJuIGN9ZnVuY3Rpb24gYihhLGIpe2lmKCFiLnN0cmVhbXMuaGFzKGEuc3RyZWFtSWQpKXt2YXIgYz1nKGEsYik7Yi5zdHJlYW1zLmFkZChjKTtyZXR1cm4gY319dmFyIGY9ezQwOToiVGhpcyBQMlAgc2Vzc2lvbiBhbHJlYWR5IGhhcyAyIHBhcnRpY2lwYW50cy4iLAo0MTA6IlRoZSBzZXNzaW9uIGFscmVhZHkgaGFzIGZvdXIgcGFydGljaXBhbnRzLiIsMTAwNDoiVGhlIHRva2VuIHBhc3NlZCBpcyBpbnZhbGlkLiJ9O09ULnB1Ymxpc2hlcnM9bmV3IE9ULkNvbGxlY3Rpb24oImd1aWQiKTtPVC5zdWJzY3JpYmVycz1uZXcgT1QuQ29sbGVjdGlvbigid2lkZ2V0SWQiKTtPVC5zZXNzaW9ucz1uZXcgT1QuQ29sbGVjdGlvbjtPVC5SYXB0b3IuRGlzcGF0Y2hlcj1mdW5jdGlvbihhLGIpe3RoaXMuc29ja2V0PWE7dGhpcy5jb25uZWN0aW9uQ29tcGxldGlvbj1ifTtPVC5SYXB0b3IuRGlzcGF0Y2hlci5wcm90b3R5cGUuZGlzcGF0Y2g9ZnVuY3Rpb24oYSxiKXt2YXIgYz1PVC5SYXB0b3IuZGVzZXJpYWxpemVNZXNzYWdlKGIpO2lmKGMudHlwZU5hbWUpaWYoYy5hY3Rpb25OYW1lKXN3aXRjaChPVC5kZWJ1ZygiT1QuUmFwdG9yLmRpc3BhdGNoICIrYy5zaWduYXR1cmUrIjogIitiKSxjLnR5cGUpe2Nhc2UgT1QuUmFwdG9yLlR5cGVzLlJQQ19SRVNQT05TRTp0aGlzLmRpc3BhdGNoUlBDUmVzcG9uc2UoYyk7CmJyZWFrO2Nhc2UgT1QuUmFwdG9yLlR5cGVzLkNPTk5FQ1RJT046dGhpcy5kaXNwYXRjaENvbm5lY3Rpb24oYyk7YnJlYWs7Y2FzZSBPVC5SYXB0b3IuVHlwZXMuQ09OTkVDVElPTkNPVU5UOnRoaXMuZGlzcGF0Y2hDb25uZWN0aW9uQ291bnQoYyk7YnJlYWs7Y2FzZSBPVC5SYXB0b3IuVHlwZXMuU1RSRUFNOnRoaXMuZGlzcGF0Y2hTdHJlYW0oYyk7YnJlYWs7Y2FzZSBPVC5SYXB0b3IuVHlwZXMuU1VCU0NSSUJFUjp0aGlzLmRpc3BhdGNoU3Vic2NyaWJlcihjKTticmVhaztjYXNlIE9ULlJhcHRvci5UeXBlcy5NT0RFUkFUSU9OOnRoaXMuZGlzcGF0Y2hNb2RlcmF0aW9uKGMpO2JyZWFrO2Nhc2UgT1QuUmFwdG9yLlR5cGVzLkpTRVA6dGhpcy5kaXNwYXRjaEpzZXAoYyk7YnJlYWs7Y2FzZSBPVC5SYXB0b3IuVHlwZXMuU0lHTkFMOnRoaXMuZGlzcGF0Y2hTaWduYWwoYyk7YnJlYWs7ZGVmYXVsdDpPVC53YXJuKCJPVC5SYXB0b3IuZGlzcGF0Y2g6IFR5cGUgIitjLnR5cGVOYW1lKyIgaXMgbm90IGN1cnJlbnRseSBpbXBsZW1lbnRlZCIpfWVsc2UgT1QuZXJyb3IoIk9ULlJhcHRvci5kaXNwYXRjaDogSW52YWxpZCBhY3Rpb24gKCIrCmMuYWN0aW9uKyIpIGZvciAiK2MudHlwZU5hbWUpLE9ULmVycm9yKGMpO2Vsc2UgT1QuZXJyb3IoIk9ULlJhcHRvci5kaXNwYXRjaDogSW52YWxpZCBtZXNzYWdlIHR5cGUgKCIrYy50eXBlKyIpIil9O09ULlJhcHRvci5EaXNwYXRjaGVyLnByb3RvdHlwZS5kaXNwYXRjaFJQQ1Jlc3BvbnNlPWZ1bmN0aW9uKGEpe3N3aXRjaChhLmFjdGlvbil7Y2FzZSBPVC5SYXB0b3IuQWN0aW9ucy5DT05ORUNUOiExPT1hLnBheWxvYWQuY29ubmVjdFN1Y2Nlc3M/dGhpcy5jb25uZWN0aW9uQ29tcGxldGlvbi5jYWxsKG51bGwsbmV3IE9ULkVycm9yKE9ULkV4Y2VwdGlvbkNvZGVzLkNPTk5FQ1RfUkVKRUNURUQsZlthLnBheWxvYWQucmVhc29uXXx8IkZhaWxlZCB0byBjb25uZWN0IikpOnRoaXMuc29ja2V0LnB1Ymxpc2goT1QuUmFwdG9yLk1lc3NhZ2UuZ2V0U2Vzc2lvblN0YXRlKHRoaXMuc29ja2V0LmlkLGEucGF5bG9hZC5zZXNzaW9uSWQsITApKTticmVhaztjYXNlIE9ULlJhcHRvci5BY3Rpb25zLlNUQVRFOnZhciBkPQphLnBheWxvYWQudmFsdWUsYT1PVC5zZXNzaW9ucy5nZXQoYS5wYXlsb2FkLmtleSksYztkLnN0cmVhbXM9W107ZC5jb25uZWN0aW9ucz1bXTtkLmFyY2hpdmVzPVtdO2lmKGQuaGFzT3duUHJvcGVydHkoIkNPTk5FQ1RJT05TIikpe2Zvcih2YXIgZSBpbiBkLkNPTk5FQ1RJT05TKWM9T1QuQ29ubmVjdGlvbi5mcm9tSGFzaChkLkNPTk5FQ1RJT05TW2VdKSxkLmNvbm5lY3Rpb25zLnB1c2goYyksYS5jb25uZWN0aW9ucy5hZGQoYyk7ZGVsZXRlIGQuQ09OTkVDVElPTlN9aWYoZC5oYXNPd25Qcm9wZXJ0eSgiU1RSRUFNUyIpKXtmb3IoZSBpbiBkLlNUUkVBTVMpZC5zdHJlYW1zLnB1c2goYihkLlNUUkVBTVNbZV0sYSkpO2RlbGV0ZSBkLlNUUkVBTVN9dGhpcy5jb25uZWN0aW9uQ29tcGxldGlvbi5jYWxsKG51bGwsbnVsbCxkKTticmVhaztkZWZhdWx0Ok9ULndhcm4oIk9ULlJhcHRvci5kaXNwYXRjaDogIithLnNpZ25hdHVyZSsiIGlzIG5vdCBjdXJyZW50bHkgaW1wbGVtZW50ZWQiKX19OwpPVC5SYXB0b3IuRGlzcGF0Y2hlci5wcm90b3R5cGUuZGlzcGF0Y2hDb25uZWN0aW9uPWZ1bmN0aW9uKGEpe3ZhciBiPU9ULnNlc3Npb25zLmdldChhLnBheWxvYWQudmFsdWUuc2Vzc2lvbklkKSxjO2lmKGIpc3dpdGNoKGEuYWN0aW9uKXtjYXNlIE9ULlJhcHRvci5BY3Rpb25zLkNSRUFURTpjPU9ULkNvbm5lY3Rpb24uZnJvbUhhc2goYS5wYXlsb2FkLnZhbHVlKTtiLmNvbm5lY3Rpb24mJmMuaWQhPT1iLmNvbm5lY3Rpb24uaWQmJmIuY29ubmVjdGlvbnMuYWRkKGMpO2JyZWFrO2Nhc2UgT1QuUmFwdG9yLkFjdGlvbnMuREVMRVRFOmM9Yi5jb25uZWN0aW9ucy5nZXQoYS5wYXlsb2FkLnZhbHVlLmNvbm5lY3Rpb25JZCk7Yy5kZXN0cm95KGEucGF5bG9hZC5yZWFzb24pO2JyZWFrO2RlZmF1bHQ6T1Qud2FybigiT1QuUmFwdG9yLmRpc3BhdGNoOiAiK2Euc2lnbmF0dXJlKyIgaXMgbm90IGN1cnJlbnRseSBpbXBsZW1lbnRlZCIpfWVsc2UgT1QuZXJyb3IoIk9ULlJhcHRvci5kaXNwYXRjaDogVW5hYmxlIHRvIGRldGVybWluZSBzZXNzaW9uIGZvciAiKwphLnBheWxvYWQudmFsdWUuc2Vzc2lvbklkKyIgb24gIithLnNpZ25hdHVyZSsiIG1lc3NhZ2UhIil9O09ULlJhcHRvci5EaXNwYXRjaGVyLnByb3RvdHlwZS5kaXNwYXRjaENvbm5lY3Rpb25Db3VudD1mdW5jdGlvbigpe307T1QuUmFwdG9yLkRpc3BhdGNoZXIucHJvdG90eXBlLmRpc3BhdGNoU3RyZWFtPWZ1bmN0aW9uKGEpe3ZhciBkPWEucGF5bG9hZC5rZXkuc3BsaXQoIi8iKSxjPWRbMF0sZSxmO2MmJihlPU9ULnNlc3Npb25zLmdldChjKSk7aWYoZSlzd2l0Y2goYS5hY3Rpb24pe2Nhc2UgT1QuUmFwdG9yLkFjdGlvbnMuUkVHSVNURVI6Zj1nKGEucGF5bG9hZC52YWx1ZSxlKTtmLnB1Ymxpc2hlcklkJiYoKGQ9T1QucHVibGlzaGVycy5nZXQoZi5wdWJsaXNoZXJJZCkpP2QuXy5zdHJlYW1SZWdpc3RlcmVkSGFuZGxlcihmKTpPVC53YXJuKCJPVC5SYXB0b3IuZGlzcGF0Y2g6IENvdWxkIGZpbmQgYSBwdWJsaXNoZXIgIitmLnB1Ymxpc2hlcklkKyIgZm9yICIrYS5zaWduYXR1cmUpKTsKYnJlYWs7Y2FzZSBPVC5SYXB0b3IuQWN0aW9ucy5DUkVBVEU6YihhLnBheWxvYWQudmFsdWUsZSk7YnJlYWs7Y2FzZSBPVC5SYXB0b3IuQWN0aW9ucy5VUERBVEU6ZFsxXSYmKGY9ZS5zdHJlYW1zLmdldChkWzFdKSk7aWYoIWYpe09ULmVycm9yKCJPVC5SYXB0b3IuZGlzcGF0Y2g6IFVuYWJsZSB0byBkZXRlcm1pbmUgc3RyZWFtSWQsIG9yIHRoZSBzdHJlYW0gZG9lcyBub3QgZXhpc3QsIGZvciAiK2Euc2lnbmF0dXJlKyIgbWVzc2FnZSEiKTticmVha31mLnVwZGF0ZShkWzJdLGEucGF5bG9hZC52YWx1ZSk7YnJlYWs7Y2FzZSBPVC5SYXB0b3IuQWN0aW9ucy5ERUxFVEU6ZFsyXSYmKGY9ZS5zdHJlYW1zLmdldChkWzJdKSk7aWYoIWYpe09ULmVycm9yKCJPVC5SYXB0b3IuZGlzcGF0Y2g6IFVuYWJsZSB0byBkZXRlcm1pbmUgc3RyZWFtSWQsIG9yIHRoZSBzdHJlYW0gZG9lcyBub3QgZXhpc3QsIGZvciAiK2Euc2lnbmF0dXJlKyIgbWVzc2FnZSEiKTticmVha31mLmRlc3Ryb3koYS5wYXlsb2FkLnJlYXNvbik7CmJyZWFrO2RlZmF1bHQ6T1Qud2FybigiT1QuUmFwdG9yLmRpc3BhdGNoOiAiK2Euc2lnbmF0dXJlKyIgaXMgbm90IGN1cnJlbnRseSBpbXBsZW1lbnRlZCIpfWVsc2UgT1QuZXJyb3IoIk9ULlJhcHRvci5kaXNwYXRjaDogVW5hYmxlIHRvIGRldGVybWluZSBzZXNzaW9uSWQsIG9yIHRoZSBzZXNzaW9uIGRvZXMgbm90IGV4aXN0LCBmb3IgIithLnNpZ25hdHVyZSsiIG1lc3NhZ2UhIil9O09ULlJhcHRvci5EaXNwYXRjaGVyLnByb3RvdHlwZS5kaXNwYXRjaE1vZGVyYXRpb249ZnVuY3Rpb24oKXt9O09ULlJhcHRvci5EaXNwYXRjaGVyLnByb3RvdHlwZS5kaXNwYXRjaEpzZXA9ZnVuY3Rpb24oYSl7dmFyIGIsYz1hLnBheWxvYWQuc3RyZWFtSWQsZTtzd2l0Y2goYS5hY3Rpb24pe2Nhc2UgT1QuUmFwdG9yLkFjdGlvbnMuT0ZGRVI6ZT1bXTsoYz1PVC5zdWJzY3JpYmVycy5maW5kKHtzdHJlYW1JZDpjfSkpJiZlLnB1c2goYyk7YnJlYWs7Y2FzZSBPVC5SYXB0b3IuQWN0aW9ucy5BTlNXRVI6Y2FzZSBPVC5SYXB0b3IuQWN0aW9ucy5QUkFOU1dFUjpjYXNlIE9ULlJhcHRvci5BY3Rpb25zLlNVQlNDUklCRTpjYXNlIE9ULlJhcHRvci5BY3Rpb25zLlVOU1VCU0NSSUJFOmU9Ck9ULnB1Ymxpc2hlcnMud2hlcmUoe3N0cmVhbUlkOmN9KTticmVhaztjYXNlIE9ULlJhcHRvci5BY3Rpb25zLkNBTkRJREFURTplPU9ULnB1Ymxpc2hlcnMud2hlcmUoe3N0cmVhbUlkOmN9KS5jb25jYXQoT1Quc3Vic2NyaWJlcnMud2hlcmUoe3N0cmVhbUlkOmN9KSk7YnJlYWs7ZGVmYXVsdDpPVC53YXJuKCJPVC5SYXB0b3IuZGlzcGF0Y2g6ICIrYS5zaWduYXR1cmUrIiBpcyBub3QgY3VycmVudGx5IGltcGxlbWVudGVkIik7cmV0dXJufWUubGVuZ3RoJiYoYj1lWzBdLnNlc3Npb24uY29ubmVjdGlvbnMuZ2V0KGEucGF5bG9hZC5mcm9tQWRkcmVzcyksIWImJmEucGF5bG9hZC5mcm9tQWRkcmVzcy5tYXRjaCgvXnN5bXBob255XC4vKT8oYj1uZXcgT1QuQ29ubmVjdGlvbihhLnBheWxvYWQuZnJvbUFkZHJlc3MsRGF0ZS5ub3coKSxudWxsLHtzdXBwb3J0c1dlYlJUQzohMH0pLGVbMF0uc2Vzc2lvbi5jb25uZWN0aW9ucy5hZGQoYikpOmJ8fE9ULndhcm4oIk1lc3NzYWdlIGNvbWVzIGZyb20gYSBjb25uZWN0aW9uICgiKwphLnBheWxvYWQuZnJvbUFkZHJlc3MrIikgdGhhdCB3ZSBkbyBub3Qga25vdyBhYm91dC4iKSk7ZS5mb3JFYWNoKGZ1bmN0aW9uKGMpe2MucHJvY2Vzc01lc3NhZ2UoYS5hY3Rpb24sYixhLnBheWxvYWQpfSl9O09ULlJhcHRvci5EaXNwYXRjaGVyLnByb3RvdHlwZS5kaXNwYXRjaFN1YnNjcmliZXI9ZnVuY3Rpb24oYSl7dmFyIGI9YS5wYXlsb2FkLmtleS5zcGxpdCgiLyIpLGM9T1Quc2Vzc2lvbnMuZ2V0KGJbMF0pLGU7aWYoYylpZihlPWJbMl0/Yy5zdHJlYW1zLmdldChiWzJdKTpudWxsKWlmKGI9T1Quc3Vic2NyaWJlcnMuZmluZChmdW5jdGlvbihhKXtyZXR1cm4gYS5zdHJlYW1JZD09PWUuaWQmJmEuc2Vzc2lvbi5pZD09PWMuaWR9KSlzd2l0Y2goYS5hY3Rpb24pe2Nhc2UgT1QuUmFwdG9yLkFjdGlvbnMuUVVBTElUWV9DSEFOR0VEOmIudXBkYXRlUXVhbGl0eShwYXJzZUludChhLnBheWxvYWQudmFsdWUsMTApKTticmVhaztkZWZhdWx0Ok9ULndhcm4oIk9ULlJhcHRvci5kaXNwYXRjaDogIisKYS5zaWduYXR1cmUrIiBpcyBub3QgY3VycmVudGx5IGltcGxlbWVudGVkIil9ZWxzZSBPVC5lcnJvcigiT1QuUmFwdG9yLmRpc3BhdGNoOiBVbmFibGUgdG8gZGV0ZXJtaW5lIHN1YnNjcmliZXJJZCwgb3IgdGhlIHN1YnNjcmliZXIgZG9lcyBub3QgZXhpc3QsIGZvciAiK2Euc2lnbmF0dXJlKyIgbWVzc2FnZSEiKTtlbHNlIE9ULmVycm9yKCJPVC5SYXB0b3IuZGlzcGF0Y2g6IFVuYWJsZSB0byBkZXRlcm1pbmUgc3RyZWFtSWQsIG9yIHRoZSBzdHJlYW0gZG9lcyBub3QgZXhpc3QsIGZvciAiK2Euc2lnbmF0dXJlKyIgbWVzc2FnZSEiKTtlbHNlIE9ULmVycm9yKCJPVC5SYXB0b3IuZGlzcGF0Y2g6IFVuYWJsZSB0byBkZXRlcm1pbmUgc2Vzc2lvbklkLCBvciB0aGUgc2Vzc2lvbiBkb2VzIG5vdCBleGlzdCwgZm9yICIrYS5zaWduYXR1cmUrIiBtZXNzYWdlISIpfTtPVC5SYXB0b3IuRGlzcGF0Y2hlci5wcm90b3R5cGUuZGlzcGF0Y2hTaWduYWw9ZnVuY3Rpb24oYSl7aWYoYS5hY3Rpb24hPT0KT1QuUmFwdG9yLkFjdGlvbnMuU0lHTkFMKU9ULndhcm4oIk9ULlJhcHRvci5kaXNwYXRjaDogIithLnNpZ25hdHVyZSsiIGlzIG5vdCBjdXJyZW50bHkgaW1wbGVtZW50ZWQiKTtlbHNle3ZhciBiPU9ULnNlc3Npb25zLmdldCh0aGlzLnNvY2tldC5zZXNzaW9uSWQpO2I/Yi5fLmRpc3BhdGNoU2lnbmFsKGIuY29ubmVjdGlvbnMuZ2V0KGEucGF5bG9hZC5mcm9tQWRkcmVzcyksYS5wYXlsb2FkLnR5cGUsYS5wYXlsb2FkLmRhdGEpOk9ULmVycm9yKCJPVC5SYXB0b3IuZGlzcGF0Y2g6ICIrYS5zaWduYXR1cmUrIiBFUlJPUiAtIHNlc3Npb25JZCBtdXN0IGJlIHByb3ZpZGVkIGFuZCBiZSB2YWxpZCIpfX19KSh0aGlzKTsKKGZ1bmN0aW9uKGcpe3ZhciBiPW5ldyBmdW5jdGlvbigpe3ZhciBiPSExLGE9ITEsZD1mdW5jdGlvbigpe2EmJmImJk9ULmRpc3BhdGNoRXZlbnQobmV3IE9ULkVudkxvYWRlZEV2ZW50KE9ULkV2ZW50Lm5hbWVzLkVOVl9MT0FERUQpKX0sYz1mdW5jdGlvbigpe2E9ITA7T1QuJC5vbihnLCJiZWZvcmV1bmxvYWQiLGZ1bmN0aW9uKCl7T1QucHVibGlzaGVycy5kZXN0cm95KCk7T1Quc3Vic2NyaWJlcnMuZGVzdHJveSgpO09ULnNlc3Npb25zLmRlc3Ryb3koKX0pO09ULkNvbmZpZy5sb2FkKE9ULnByb3BlcnRpZXMuY29uZmlnVVJMKTtkKCl9LGU9ZnVuY3Rpb24oKXtiPSEwO09ULkNvbmZpZy5vZmYoImR5bmFtaWNDb25maWdDaGFuZ2VkIixlKTtPVC5Db25maWcub2ZmKCJkeW5hbWljQ29uZmlnTG9hZEZhaWxlZCIsaCk7ZCgpfSxoPWZ1bmN0aW9uKCl7ZSgpfTtPVC5Db25maWcub24oImR5bmFtaWNDb25maWdDaGFuZ2VkIixlKTtPVC5Db25maWcub24oImR5bmFtaWNDb25maWdMb2FkRmFpbGVkIiwKaCk7ImNvbXBsZXRlIj09ZG9jdW1lbnQucmVhZHlTdGF0ZXx8ImludGVyYWN0aXZlIj09ZG9jdW1lbnQucmVhZHlTdGF0ZSYmZG9jdW1lbnQuYm9keT9jKCk6ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcj9kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJET01Db250ZW50TG9hZGVkIixjLCExKTpkb2N1bWVudC5hdHRhY2hFdmVudCYmZG9jdW1lbnQuYXR0YWNoRXZlbnQoIm9ucmVhZHlzdGF0ZWNoYW5nZSIsZnVuY3Rpb24oKXsiY29tcGxldGUiPT1kb2N1bWVudC5yZWFkeVN0YXRlJiZjKCl9KTt0aGlzLm9uTG9hZD1mdW5jdGlvbihjKXtpZihhJiZiKWMoKTtlbHNlIE9ULm9uKE9ULkV2ZW50Lm5hbWVzLkVOVl9MT0FERUQsYyl9fTtPVC5vbkxvYWQ9ZnVuY3Rpb24oZixhKXtpZihhKWIub25Mb2FkKGYuYmluZChhKSk7ZWxzZSBiLm9uTG9hZChmKX19KSh3aW5kb3cpOwooZnVuY3Rpb24oKXtmdW5jdGlvbiBnKGEsZCxjLGUpe3ZhciBoPWJbY10sZT1lP09ULiQuY2xvbmUoZSk6e307T1QuZXJyb3IoIlRCLmV4Y2VwdGlvbiA6OiB0aXRsZTogIitoKyIgKCIrYysiKSBtc2c6ICIrZCk7ZS5wYXJ0bmVySWR8fChlLnBhcnRuZXJJZD1PVC5BUElLRVkpO3RyeXtmfHwoZj1uZXcgT1QuQW5hbHl0aWNzKSxmLmxvZ0Vycm9yKGMsInRiLmV4Y2VwdGlvbiIsaCx7ZGV0YWlsczpkfSxlKSxPVC5kaXNwYXRjaEV2ZW50KG5ldyBPVC5FeGNlcHRpb25FdmVudChPVC5FdmVudC5uYW1lcy5FWENFUFRJT04sZCxoLGMsYSxhKSl9Y2F0Y2goZyl7T1QuZXJyb3IoIlRCLmV4Y2VwdGlvbiA6OiBGYWlsZWQgdG8gZGlzcGF0Y2ggZXhjZXB0aW9uIC0gIitnLnRvU3RyaW5nKCkpfX1PVC5FcnJvcj1mdW5jdGlvbihhLGIpe3RoaXMuY29kZT1hO3RoaXMubWVzc2FnZT1ifTt2YXIgYj17MUUzOiJGYWlsZWQgVG8gTG9hZCIsMTAwNDoiQXV0aGVudGljYXRpb24gZXJyb3IiLDEwMDU6IkludmFsaWQgU2Vzc2lvbiBJRCIsCjEwMDY6IkNvbm5lY3QgRmFpbGVkIiwxMDA3OiJDb25uZWN0IFJlamVjdGVkIiwxMDA4OiJDb25uZWN0IFRpbWUtb3V0IiwxMDA5OiJTZWN1cml0eSBFcnJvciIsMTAxMDoiTm90IENvbm5lY3RlZCIsMTAxMToiSW52YWxpZCBQYXJhbWV0ZXIiLDEwMTI6IlBlZXItdG8tcGVlciBTdHJlYW0gUGxheSBGYWlsZWQiLDEwMTM6IkNvbm5lY3Rpb24gRmFpbGVkIiwxMDE0OiJBUEkgUmVzcG9uc2UgRmFpbHVyZSIsMTUwMDoiVW5hYmxlIHRvIFB1Ymxpc2giLDE1MTA6IlVuYWJsZSB0byBTaWduYWwiLDE1MjA6IlVuYWJsZSB0byBGb3JjZSBEaXNjb25uZWN0IiwxNTMwOiJVbmFibGUgdG8gRm9yY2UgVW5wdWJsaXNoIiwxNTQwOiJVbmFibGUgdG8gcmVjb3JkIGFyY2hpdmUiLDE1NTA6IlVuYWJsZSB0byBwbGF5IGJhY2sgYXJjaGl2ZSIsMTU2MDoiVW5hYmxlIHRvIGNyZWF0ZSBhcmNoaXZlIiwxNTcwOiJVbmFibGUgdG8gbG9hZCBhcmNoaXZlIiwyRTM6IkludGVybmFsIEVycm9yIiwyMDAxOiJFbWJlZCBGYWlsZWQiLAozRTM6IkFyY2hpdmUgbG9hZCBleGNlcHRpb24iLDMwMDE6IkFyY2hpdmUgY3JlYXRlIGV4Y2VwdGlvbiIsMzAwMjoiUGxheWJhY2sgc3RvcCBleGNlcHRpb24iLDMwMDM6IlBsYXliYWNrIHN0YXJ0IGV4Y2VwdGlvbiIsMzAwNDoiUmVjb3JkIHN0YXJ0IGV4Y2VwdGlvbiIsMzAwNToiUmVjb3JkIHN0b3AgZXhjZXB0aW9uIiwzMDA2OiJBcmNoaXZlIGxvYWQgZXhjZXB0aW9uIiwzMDA3OiJTZXNzaW9uIHJlY29yZGluZyBpbiBwcm9ncmVzcyIsMzAwODoiQXJjaGl2ZSByZWNvcmRpbmcgaW50ZXJuYWwgZmFpbHVyZSIsNEUzOiJXZWJTb2NrZXQgQ29ubmVjdGlvbiBGYWlsZWQiLDQwMDE6IldlYlNvY2tldCBOZXR3b3JrIERpc2Nvbm5lY3RlZCJ9LGY7T1QuaGFuZGxlSnNFeGNlcHRpb249ZnVuY3Rpb24oYSxiLGMpe3ZhciBjPWN8fHt9LGUsZj1jLnNlc3Npb247aWYoZil7aWYoZT17c2Vzc2lvbklkOmYuc2Vzc2lvbklkfSxmLmNvbm5lY3RlZCYmKGUuY29ubmVjdGlvbklkPWYuY29ubmVjdGlvbi5jb25uZWN0aW9uSWQpLAohYy50YXJnZXQpYy50YXJnZXQ9Zn1lbHNlIGMuc2Vzc2lvbklkJiYoZT17c2Vzc2lvbklkOmMuc2Vzc2lvbklkfSxjLnRhcmdldHx8KGMudGFyZ2V0PW51bGwpKTtnKGMudGFyZ2V0LGEsYixlKX07T1QuZXhjZXB0aW9uSGFuZGxlcj1mdW5jdGlvbihhLGIsYyxlLGYpe3ZhciBpO2EmJigoaT1PVC5jb21wb25lbnRzW2FdKXx8T1Qud2FybigiQ291bGQgbm90IGZpbmQgdGhlIGNvbXBvbmVudCB3aXRoIGNvbXBvbmVudCBJRCAiK2EpKTtnKGksYixlLGYpfX0pKHdpbmRvdyk7KGZ1bmN0aW9uKCl7T1QuQ29ubmVjdGlvbkNhcGFiaWxpdGllcz1mdW5jdGlvbihnKXtnLnN1cHBvcnRzV2ViUlRDPU9ULiQuY2FzdFRvQm9vbGVhbihnLnN1cHBvcnRzV2ViUlRDKTt0aGlzLnN1cHBvcnRzV2ViUlRDPWcuc3VwcG9ydHNXZWJSVEN9fSkod2luZG93KTsKKGZ1bmN0aW9uKCl7T1QuQ29ubmVjdGlvbj1mdW5jdGlvbihnLGIsZixhKXt2YXIgZDt0aGlzLmlkPXRoaXMuY29ubmVjdGlvbklkPWc7dGhpcy5jcmVhdGlvblRpbWU9Yj9OdW1iZXIoYik6bnVsbDt0aGlzLmRhdGE9Zjt0aGlzLmNhcGFiaWxpdGllcz1uZXcgT1QuQ29ubmVjdGlvbkNhcGFiaWxpdGllcyhhKTt0aGlzLnF1YWxpdHk9bnVsbDtPVC4kLmV2ZW50aW5nKHRoaXMpO3RoaXMuZGVzdHJveT1mdW5jdGlvbihhLGIpe2Q9YXx8ImNsaWVudERpc2Nvbm5lY3RlZCI7ITAhPT1iJiZ0aGlzLmRpc3BhdGNoRXZlbnQobmV3IE9ULkRlc3Ryb3llZEV2ZW50KCJkZXN0cm95ZWQiLHRoaXMsZCkpfS5iaW5kKHRoaXMpO09iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRoaXMse2Rlc3Ryb3llZDp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHZvaWQgMCE9PWR9LGVudW1lcmFibGU6ITB9LGRlc3Ryb3llZFJlYXNvbjp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGR9LGVudW1lcmFibGU6ITB9fSl9O09ULkNvbm5lY3Rpb24uZnJvbUhhc2g9CmZ1bmN0aW9uKGcpe3JldHVybiBuZXcgT1QuQ29ubmVjdGlvbihnLmNvbm5lY3Rpb25JZCxnLmNyZWF0aW9uVGltZSxnLmRhdGEse3N1cHBvcnRzV2ViUlRDOmcuc3VwcG9ydHNXZWJSVEN9KX19KSh3aW5kb3cpOwooZnVuY3Rpb24oKXt2YXIgZz0iaGFzQXVkaW8gaGFzVmlkZW8gcXVhbGl0eSBuYW1lIHZpZGVvRGltZW5zaW9ucyBvcmllbnRhdGlvbiIuc3BsaXQoIiAiKTtPVC5TdHJlYW09ZnVuY3Rpb24oYixmLGEsZCxjLGUsaCxpLGssaixsLG0scCl7dmFyIG47dGhpcy5pZD10aGlzLnN0cmVhbUlkPWI7dGhpcy5jb25uZWN0aW9uPWY7dGhpcy5uYW1lPWE7dGhpcy5kYXRhPWQ7dGhpcy50eXBlPWN8fCJiYXNpYyI7dGhpcy5jcmVhdGlvblRpbWU9ZT9OdW1iZXIoZSk6bnVsbDt0aGlzLmhhc0F1ZGlvPU9ULiQuY2FzdFRvQm9vbGVhbihoLCEwKTt0aGlzLmhhc1ZpZGVvPU9ULiQuY2FzdFRvQm9vbGVhbihpLCEwKTt0aGlzLnBlZXJJZD1qO3RoaXMucXVhbGl0eT1sO3RoaXMudmlkZW9EaW1lbnNpb25zPXt3aWR0aDptfHw2NDAsaGVpZ2h0OnB8fDQ4MCxvcmllbnRhdGlvbjprfHxPVC5WaWRlb09yaWVudGF0aW9uLlJPVEFURURfTk9STUFMfTtPVC4kLmV2ZW50aW5nKHRoaXMpO3RoaXMudXBkYXRlPQpmdW5jdGlvbihhLGIpe2lmKC0xPT09Zy5pbmRleE9mKGEpKU9ULndhcm4oJ1Vua25vd24gc3RyZWFtIHByb3BlcnR5ICInK2ErJyIgd2FzIG1vZGlmaWVkIHRvICInK2IrJyIuJyk7ZWxzZXt2YXIgYz10aGlzW2FdLGQ9Yjtzd2l0Y2goYSl7Y2FzZSAiaGFzQXVkaW8iOmNhc2UgImhhc1ZpZGVvIjpkPU9ULiQuY2FzdFRvQm9vbGVhbihkLCEwKTt0aGlzW2FdPWQ7YnJlYWs7Y2FzZSAicXVhbGl0eSI6Y2FzZSAibmFtZSI6dGhpc1thXT1kO2JyZWFrO2Nhc2UgIm9yaWVudGF0aW9uIjp0aGlzLnZpZGVvRGltZW5zaW9ucz17d2lkdGg6ZC53aWR0aCxoZWlnaHQ6ZC5oZWlnaHQsb3JpZW50YXRpb246ZC52aWRlb09yaWVudGF0aW9ufX10aGlzLmRpc3BhdGNoRXZlbnQobmV3IE9ULlN0cmVhbVVwZGF0ZWRFdmVudCh0aGlzLGEsYyxkKSl9fTt0aGlzLmRlc3Ryb3k9ZnVuY3Rpb24oYSxiKXtuPWF8fCJjbGllbnREaXNjb25uZWN0ZWQiOyEwIT09YiYmdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBPVC5EZXN0cm95ZWRFdmVudCgiZGVzdHJveWVkIiwKdGhpcyxuKSl9O09iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRoaXMse2Rlc3Ryb3llZDp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHZvaWQgMCE9PW59LGVudW1lcmFibGU6ITB9LGRlc3Ryb3llZFJlYXNvbjp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIG59LGVudW1lcmFibGU6ITB9fSl9fSkod2luZG93KTsKKGZ1bmN0aW9uKGcpe3ZhciBiPWcud2Via2l0UlRDUGVlckNvbm5lY3Rpb258fGcubW96UlRDUGVlckNvbm5lY3Rpb24sZj1nLm1velJUQ1Nlc3Npb25EZXNjcmlwdGlvbnx8Zy5SVENTZXNzaW9uRGVzY3JpcHRpb24sYT1nLm1velJUQ0ljZUNhbmRpZGF0ZXx8Zy5SVENJY2VDYW5kaWRhdGUsZD1mdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oYil7T1QuZGVidWcoIkljZUNhbmRpZGF0ZUZvcndhcmRlcjogSWNlIENhbmRpZGF0ZSIpO2IuY2FuZGlkYXRlP2EoT1QuUmFwdG9yLkFjdGlvbnMuQ0FORElEQVRFLGIuY2FuZGlkYXRlKTpPVC5kZWJ1ZygiSWNlQ2FuZGlkYXRlRm9yd2FyZGVyOiBObyBtb3JlIElDRSBjYW5kaWRhdGVzLiIpfX0sYz1mdW5jdGlvbigpe3ZhciBiPVtdLGM9bnVsbDtPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywicGVlckNvbm5lY3Rpb24iLHtzZXQ6ZnVuY3Rpb24oYSl7Yz1hfX0pO3RoaXMucHJvY2Vzcz1mdW5jdGlvbihkKXtkPW5ldyBhKGQuY2FuZGlkYXRlKTsKYz9jLmFkZEljZUNhbmRpZGF0ZShkKTpiLnB1c2goZCl9O3RoaXMucHJvY2Vzc1BlbmRpbmc9ZnVuY3Rpb24oKXtmb3IoO2IubGVuZ3RoOyljLmFkZEljZUNhbmRpZGF0ZShiLnNoaWZ0KCkpfX0sZT1mdW5jdGlvbihhKXt2YXIgYj0vYT1ydHBtYXA6KFxkKykgQ05cL1xkKy9pLGM9W10sZCxlLGE9YS5zcGxpdCgiXHJcbiIpLmZpbHRlcihmdW5jdGlvbihhLGYpey0xIT09YS5pbmRleE9mKCJtPWF1ZGlvIikmJihkPWYpO2U9YS5tYXRjaChiKTtyZXR1cm4gbnVsbCE9PWU/KGMucHVzaChlWzFdKSwhMSk6ITB9KTtjLmxlbmd0aCYmZCYmKGFbZF09YVtkXS5yZXBsYWNlKFJlZ0V4cChjLmpvaW4oInwiKSwiaWciKSwiIikucmVwbGFjZSgvXHMrL2csIiAiKSk7cmV0dXJuIGEuam9pbigiXHJcbiIpfSxoPWZ1bmN0aW9uKGEsYixjLGQpe3ZhciBmPWZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihiKXtkJiZkKGEsYil9fSxoPWZ1bmN0aW9uKGIpe2Iuc2RwPWUoYi5zZHApO2Euc2V0TG9jYWxEZXNjcmlwdGlvbihiLApmdW5jdGlvbigpe2MoYil9LGYoIkVycm9yIHdoaWxlIHNldHRpbmcgTG9jYWxEZXNjcmlwdGlvbiIpKX07LTE9PT1iLnNkcC5pbmRleE9mKCJhPWNyeXB0byIpJiYoYi5zZHA9Yi5zZHAucmVwbGFjZSgvXmM9SU4oLiopJC9nbWksImM9SU4kMVxyXG5hPWNyeXB0bzoxIEFFU19DTV8xMjhfSE1BQ19TSEExXzgwIGlubGluZTpGYWtlRmFrZUZha2VGYWtlRmFrZUZha2VGYWtlRmFrZUZha2VGYWtlXFxyXFxuIikpOy0xPT09Yi5zZHAuaW5kZXhPZigiYT1ydGNwLWZiIikmJihiLnNkcD1iLnNkcC5yZXBsYWNlKC9ebT12aWRlbyguKikkL2dtaSwibT12aWRlbyQxXHJcbmE9cnRjcC1mYjoqIGNjbSBmaXJcclxuYT1ydGNwLWZiOiogbmFjayAiKSk7YS5zZXRSZW1vdGVEZXNjcmlwdGlvbihiLGZ1bmN0aW9uKCl7YS5jcmVhdGVBbnN3ZXIoaCxmKCJFcnJvciB3aGlsZSBzZXR0aW5nIGNyZWF0ZUFuc3dlciIpLG51bGwsZmFsc2UpfSxmKCJFcnJvciB3aGlsZSBzZXR0aW5nIFJlbW90ZURlc2NyaXB0aW9uIikpfSwKaT1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9e21hbmRhdG9yeTp7fSxvcHRpb25hbDpbXX0sZj1mdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oYil7YyYmYyhhLGIpfX07bmF2aWdhdG9yLm1vekdldFVzZXJNZWRpYSYmKGQubWFuZGF0b3J5Lk1vekRvbnRPZmZlckRhdGFDaGFubmVsPSEwKTthLmNyZWF0ZU9mZmVyKGZ1bmN0aW9uKGMpe2Muc2RwPWUoYy5zZHApO2Euc2V0TG9jYWxEZXNjcmlwdGlvbihjLGZ1bmN0aW9uKCl7YihjKX0sZigiRXJyb3Igd2hpbGUgc2V0dGluZyBMb2NhbERlc2NyaXB0aW9uIikpfSxmKCJFcnJvciB3aGlsZSBjcmVhdGluZyBPZmZlciIpLGQpfTtPVC5QZWVyQ29ubmVjdGlvbj1mdW5jdGlvbihhKXt2YXIgZSxnPW5ldyBjLG0scCxuPSJuZXciLHI9W10scSxvPU9ULiQubm93KCk7T1QuJC5ldmVudGluZyh0aGlzKTthLmljZVNlcnZlcnN8fChhLmljZVNlcnZlcnM9W10pO3ZhciBzPWZ1bmN0aW9uKGEsYil7aWYoci5sZW5ndGgpclswXShhLGIpfS5iaW5kKHRoaXMpLAp4PWZ1bmN0aW9uKCl7aWYoIWUpe3RyeXtPVC5kZWJ1ZygnQ3JlYXRpbmcgcGVlciBjb25uZWN0aW9uIGNvbmZpZyAiJytKU09OLnN0cmluZ2lmeShhKSsnIi4nKTtlPW5ldyBiKGEse29wdGlvbmFsOlt7RHRsc1NydHBLZXlBZ3JlZW1lbnQ6dHJ1ZX1dfSl9Y2F0Y2goYyl7T1QuZXJyb3IoIkZhaWxlZCB0byBjcmVhdGUgUGVlckNvbm5lY3Rpb24sIGV4Y2VwdGlvbjogIitjLm1lc3NhZ2UpO3JldHVybiBudWxsfWcucGVlckNvbm5lY3Rpb249ZTtlLm9uaWNlY2FuZGlkYXRlPWQocyk7ZS5vbmFkZHN0cmVhbT1CLmJpbmQodGhpcyk7ZS5vbnJlbW92ZXN0cmVhbT16LmJpbmQodGhpcyk7aWYoZS5vbnNpZ25hbGluZ3N0YXRlY2hhbmdlIT09dm9pZCAwKWUub25zaWduYWxpbmdzdGF0ZWNoYW5nZT15LmJpbmQodGhpcyk7ZWxzZSBpZihlLm9uc3RhdGVjaGFuZ2UhPT12b2lkIDApZS5vbnN0YXRlY2hhbmdlPXkuYmluZCh0aGlzKX1yZXR1cm4gZX0uYmluZCh0aGlzKSx2PWZ1bmN0aW9uKCl7aWYoZylnLnBlZXJDb25uZWN0aW9uPQpudWxsO2lmKGUhPT1udWxsKXtlPW51bGw7dGhpcy50cmlnZ2VyKCJjbG9zZSIpfX0seT1mdW5jdGlvbihhKXthPXR5cGVvZiBhPT09InN0cmluZyI/YTphLnRhcmdldCYmYS50YXJnZXQuc2lnbmFsaW5nU3RhdGU/YS50YXJnZXQuc2lnbmFsaW5nU3RhdGU6YS50YXJnZXQucmVhZHlTdGF0ZTtPVC5kZWJ1ZygiUGVlckNvbm5lY3Rpb24uc3RhdGVDaGFuZ2U6ICIrYSk7aWYoYSYmYS50b0xvd2VyQ2FzZSgpIT09bil7bj1hLnRvTG93ZXJDYXNlKCk7T1QuZGVidWcoIlBlZXJDb25uZWN0aW9uLnN0YXRlQ2hhbmdlOiAiK24pO3N3aXRjaChuKXtjYXNlICJjbG9zZWQiOnYuY2FsbCh0aGlzKX19fSxCPWZ1bmN0aW9uKGEpe3RoaXMudHJpZ2dlcigic3RyZWFtQWRkZWQiLGEuc3RyZWFtKX0sej1mdW5jdGlvbihhKXt0aGlzLnRyaWdnZXIoInN0cmVhbVJlbW92ZWQiLGEuc3RyZWFtKX0sdz1mdW5jdGlvbihhKXthPW5ldyBmKGEuc2RwKTt4KCk7X3JlbW90ZURlc2NyaXB0aW9uVHlwZT1hLnR5cGU7Cl9yZW1vdGVEZXNjcmlwdGlvbj1hO2goZSxhLGZ1bmN0aW9uKGEpe3MoT1QuUmFwdG9yLkFjdGlvbnMuQU5TV0VSLGEpfSxmdW5jdGlvbihhLGIpe0MoIlBlZXJDb25uZWN0aW9uLm9mZmVyUHJvY2Vzc29yICIrYSsiOiAiK2IpfSl9LEQ9ZnVuY3Rpb24oKXtPVC5kZWJ1ZygiUGVlckNvbm5lY3Rpb24ucHJvY2Vzc1N1YnNjcmliZTogU2VuZGluZyBvZmZlciB0byBzdWJzY3JpYmVyLiIpO3goKTtpKGUsZnVuY3Rpb24oYSl7bT1hO3MoT1QuUmFwdG9yLkFjdGlvbnMuT0ZGRVIsbSl9LGZ1bmN0aW9uKGEsYil7QygiUGVlckNvbm5lY3Rpb24uc3VzY3JpYmVQcm9jZXNzb3IgIithKyI6ICIrYil9KX0sQz1mdW5jdGlvbihhKXtPVC5lcnJvcihhKTt0aGlzLnRyaWdnZXIoImVycm9yIixhKX0uYmluZCh0aGlzKTt0aGlzLmFkZExvY2FsU3RyZWFtPWZ1bmN0aW9uKGEpe3goKTtlLmFkZFN0cmVhbShhKX07dGhpcy5kaXNjb25uZWN0PWZ1bmN0aW9uKCl7Zz1udWxsO2lmKGUpe3ZhciBhPWUuc2lnbmFsaW5nU3RhdGV8fAplLnJlYWR5U3RhdGU7YSYmYS50b0xvd2VyQ2FzZSgpIT09ImNsb3NlZCImJmUuY2xvc2UoKTt2LmNhbGwodGhpcyl9dGhpcy5vZmYoKX07dGhpcy5wcm9jZXNzTWVzc2FnZT1mdW5jdGlvbihhLGIpe09ULmRlYnVnKCJQZWVyQ29ubmVjdGlvbi5wcm9jZXNzTWVzc2FnZTogUmVjZWl2ZWQgIithKyIgZnJvbSAiK2IuZnJvbUFkZHJlc3MpO09ULmRlYnVnKGIpO3N3aXRjaChhKXtjYXNlIE9ULlJhcHRvci5BY3Rpb25zLlNVQlNDUklCRTpELmNhbGwodGhpcyxiKTticmVhaztjYXNlIE9ULlJhcHRvci5BY3Rpb25zLk9GRkVSOncuY2FsbCh0aGlzLGIpO2JyZWFrO2Nhc2UgT1QuUmFwdG9yLkFjdGlvbnMuQU5TV0VSOmlmKGIuc2RwKXtwPW5ldyBmKGIuc2RwKTtfcmVtb3RlRGVzY3JpcHRpb25UeXBlPXAudHlwZTtfcmVtb3RlRGVzY3JpcHRpb249cDtlLnNldFJlbW90ZURlc2NyaXB0aW9uKHApO2cucHJvY2Vzc1BlbmRpbmcoKX1lbHNlIE9ULmVycm9yKCJQZWVyQ29ubmVjdGlvbi5wcm9jZXNzTWVzc2FnZTogV2VpcmQgbWVzc2FnZSwgbm8gU0RQLiIpOwpicmVhaztjYXNlIE9ULlJhcHRvci5BY3Rpb25zLkNBTkRJREFURTpnLnByb2Nlc3MoYik7YnJlYWs7ZGVmYXVsdDpPVC5kZWJ1ZygiUGVlckNvbm5lY3Rpb24ucHJvY2Vzc01lc3NhZ2U6IFJlY2VpdmVkIGFuIHVuZXhwZWN0ZWQgbWVzc2FnZSBvZiB0eXBlICIrYSsiIGZyb20gIitiLmZyb21BZGRyZXNzKyI6ICIrSlNPTi5zdHJpbmdpZnkoYikpfXJldHVybiB0aGlzfTt0aGlzLnJlZ2lzdGVyTWVzc2FnZURlbGVnYXRlPWZ1bmN0aW9uKGEpe3JldHVybiByLnB1c2goYSl9O3RoaXMudW5yZWdpc3Rlck1lc3NhZ2VEZWxlZ2F0ZT1mdW5jdGlvbihhKXthPXIuaW5kZXhPZihhKTthIT09LTEmJnIuc3BsaWNlKGEsMSk7cmV0dXJuIHIubGVuZ3RofTt0aGlzLmdldFN0YXRzPWZ1bmN0aW9uKGEsYil7aWYocT09dHJ1ZSlPVC53YXJuKCJQZWVyQ29ubmVjdGlvbi5nZXRTdGF0czogQWxyZWFkeSBnZXR0aW5nIHRoZSBzdGF0cyEiKTtlbHNle3E9dHJ1ZTt2YXIgYz1PVC4kLm5vdygpLGQ9KGMtCmEudGltZVN0YW1wKS8xRTM7YS50aW1lU3RhbXA9Yzt2YXIgZj17fSxoPWZ1bmN0aW9uKGMpe2lmKGMucmVzdWx0KWZvcih2YXIgYz1jLnJlc3VsdCgpLGU9MDtlPGMubGVuZ3RoO2UrKyl7dmFyIGg9Y1tlXTtpZihoLnN0YXQpe3ZhciBnO2c9aDt2YXIgaT1hLnZpZGVvQnl0ZXNUcmFuc2ZlcnJlZHx8MDtpZihnLnN0YXQoImdvb2dGcmFtZUhlaWdodFNlbnQiKSl7YS52aWRlb0J5dGVzVHJhbnNmZXJyZWQ9Zy5zdGF0KCJieXRlc1NlbnQiKTtnPU1hdGgucm91bmQoKGEudmlkZW9CeXRlc1RyYW5zZmVycmVkLWkpKjgvZCl9ZWxzZSBpZihnLnN0YXQoImdvb2dGcmFtZUhlaWdodFJlY2VpdmVkIikpe2EudmlkZW9CeXRlc1RyYW5zZmVycmVkPWcuc3RhdCgiYnl0ZXNSZWNlaXZlZCIpO2c9TWF0aC5yb3VuZCgoYS52aWRlb0J5dGVzVHJhbnNmZXJyZWQtaSkqOC9kKX1lbHNlIGc9TmFOO2lzTmFOKGcpfHwoZi5hdmdWaWRlb0JpdHJhdGU9Zyk7Zz1hLmF1ZGlvQnl0ZXNUcmFuc2ZlcnJlZHx8CjA7aWYoaC5zdGF0KCJhdWRpb0lucHV0TGV2ZWwiKSl7YS5hdWRpb0J5dGVzVHJhbnNmZXJyZWQ9aC5zdGF0KCJieXRlc1NlbnQiKTtoPU1hdGgucm91bmQoKGEuYXVkaW9CeXRlc1RyYW5zZmVycmVkLWcpKjgvZCl9ZWxzZSBpZihoLnN0YXQoImF1ZGlvT3V0cHV0TGV2ZWwiKSl7YS5hdWRpb0J5dGVzVHJhbnNmZXJyZWQ9aC5zdGF0KCJieXRlc1JlY2VpdmVkIik7aD1NYXRoLnJvdW5kKChhLmF1ZGlvQnl0ZXNUcmFuc2ZlcnJlZC1nKSo4L2QpfWVsc2UgaD1OYU47aXNOYU4oaCl8fChmLmF2Z0F1ZGlvQml0cmF0ZT1oKX19cT1mYWxzZTtiKGYpfTtmLmR1cmF0aW9uPU1hdGgucm91bmQoYy1vKTtpZihlJiZlLmdldFN0YXRzKWUuZ2V0U3RhdHMoaCk7ZWxzZXtxPWZhbHNlO2IoZil9fX07T2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsInJlbW90ZVN0cmVhbXMiLHtnZXQ6ZnVuY3Rpb24oKXt2YXIgYTtpZihlKXtpZihlLmdldFJlbW90ZVN0cmVhbXMpYT1lLmdldFJlbW90ZVN0cmVhbXMoKTsKZWxzZSBpZihlLnJlbW90ZVN0cmVhbXMpYT1lLnJlbW90ZVN0cmVhbXM7ZWxzZSB0aHJvdyBFcnJvcigiSW52YWxpZCBQZWVyIENvbm5lY3Rpb24gb2JqZWN0IGltcGxlbWVudHMgbm8gbWV0aG9kIGZvciByZXRyaWV2aW5nIHJlbW90ZSBzdHJlYW1zIik7YT1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhKX1lbHNlIGE9W107cmV0dXJuIGF9fSl9fSkod2luZG93KTsoZnVuY3Rpb24oKXt2YXIgZz17fTtPVC5QZWVyQ29ubmVjdGlvbnM9e2FkZDpmdW5jdGlvbihiLGYsYSl7Yj1iLmlkKyJfIitmLmlkOyhmPWdbYl0pfHwoZj1nW2JdPXtjb3VudDowLHBjOm5ldyBPVC5QZWVyQ29ubmVjdGlvbihhKX0pO2YuY291bnQrPTE7cmV0dXJuIGYucGN9LHJlbW92ZTpmdW5jdGlvbihiLGYpe3ZhciBhPWIuaWQrIl8iK2YuaWQsZD1nW2FdO2QmJihkLmNvdW50LT0xLDA9PT1kLmNvdW50JiYoZC5wYy5kaXNjb25uZWN0KCksZGVsZXRlIGdbYV0pKX19fSkod2luZG93KTsKKGZ1bmN0aW9uKCl7T1QuUHVibGlzaGVyUGVlckNvbm5lY3Rpb249ZnVuY3Rpb24oZyxiLGYsYSl7dmFyIGQsYz0hMSxlPWZ1bmN0aW9uKCl7dGhpcy5kZXN0cm95KCk7dGhpcy50cmlnZ2VyKCJkaXNjb25uZWN0ZWQiLHRoaXMpfSxoPWZ1bmN0aW9uKGEpe3RoaXMudHJpZ2dlcigiZXJyb3IiLG51bGwsYSx0aGlzKTt0aGlzLmRlc3Ryb3koKX0saT1mdW5jdGlvbihhLGQpe2lmKCFjJiYoYT09PU9ULlJhcHRvci5BY3Rpb25zLkNBTkRJREFURXx8YT09PU9ULlJhcHRvci5BY3Rpb25zLk9GRkVSfHxhPT09T1QuUmFwdG9yLkFjdGlvbnMuQU5TV0VSfHxhPT09T1QuUmFwdG9yLkFjdGlvbnMuUFJBTlNXRVIpKWM9LTEhPT0oYT09PU9ULlJhcHRvci5BY3Rpb25zLkNBTkRJREFURT9kLmNhbmRpZGF0ZTpkLnNkcCkuaW5kZXhPZigidHlwIHJlbGF5Iik7c3dpdGNoKGEpe2Nhc2UgT1QuUmFwdG9yLkFjdGlvbnMuQU5TV0VSOmNhc2UgT1QuUmFwdG9yLkFjdGlvbnMuUFJBTlNXRVI6Yi5fLmpzZXBBbnN3ZXIoZy5pZCwKZixkKTticmVhaztjYXNlIE9ULlJhcHRvci5BY3Rpb25zLk9GRkVSOnRoaXMudHJpZ2dlcigiY29ubmVjdGVkIik7Yi5fLmpzZXBPZmZlcihnLmlkLGYsZCk7YnJlYWs7Y2FzZSBPVC5SYXB0b3IuQWN0aW9ucy5DQU5ESURBVEU6Yi5fLmpzZXBDYW5kaWRhdGUoZy5pZCxmLGQpfX0uYmluZCh0aGlzKTtPVC4kLmV2ZW50aW5nKHRoaXMpO3RoaXMuZGVzdHJveT1mdW5jdGlvbigpe2QmJk9ULlBlZXJDb25uZWN0aW9ucy5yZW1vdmUoZyxmKTtkPW51bGw7dGhpcy5vZmYoKX07dGhpcy5wcm9jZXNzTWVzc2FnZT1mdW5jdGlvbihhLGIpe2QucHJvY2Vzc01lc3NhZ2UoYSxiKX07dGhpcy5nZXRTdGF0cz1mdW5jdGlvbihhLGIpe2QuZ2V0U3RhdHMoYSxiKX07dGhpcy5pbml0PWZ1bmN0aW9uKCl7dmFyIGs9Yi5zZXNzaW9uSW5mby5pY2VTZXJ2ZXJzLm1hcChmdW5jdGlvbihhKXthPU9ULiQuY2xvbmUoYSk7InR1cm46Ij09PWEudXJsLnRyaW0oKS5zdWJzdHIoMCw1KSYmKGEudXNlcm5hbWU9CmIuaWQrIi4iK2IuY29ubmVjdGlvbi5pZCsiLiIrZi5pZCk7cmV0dXJuIGF9KTtkPU9ULlBlZXJDb25uZWN0aW9ucy5hZGQoZyxmLHtpY2VTZXJ2ZXJzOmt9KTtkLm9uKHtjbG9zZTplLGVycm9yOmh9LHRoaXMpO2QucmVnaXN0ZXJNZXNzYWdlRGVsZWdhdGUoaSk7ZC5hZGRMb2NhbFN0cmVhbShhKTtPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywicmVtb3RlQ29ubmVjdGlvbiIse3ZhbHVlOmd9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywiaGFzUmVsYXlDYW5kaWRhdGVzIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGN9fSl9fX0pKHdpbmRvdyk7CihmdW5jdGlvbigpe09ULlN1YnNjcmliZXJQZWVyQ29ubmVjdGlvbj1mdW5jdGlvbihnLGIsZixhKXt2YXIgZCxjPSExLGU9ZnVuY3Rpb24oKXt0aGlzLmRlc3Ryb3koKTt0aGlzLnRyaWdnZXIoImRpc2Nvbm5lY3RlZCIsdGhpcyl9LGg9ZnVuY3Rpb24oYSl7dGhpcy50cmlnZ2VyKCJyZW1vdGVTdHJlYW1BZGRlZCIsYSx0aGlzKX0saT1mdW5jdGlvbihhKXt0aGlzLnRyaWdnZXIoInJlbW90ZVN0cmVhbVJlbW92ZWQiLGEsdGhpcyl9LGs9ZnVuY3Rpb24oYSl7dGhpcy50cmlnZ2VyKCJlcnJvciIsbnVsbCxhLHRoaXMpfSxqPWZ1bmN0aW9uKGEsZCl7aWYoIWMmJihhPT09T1QuUmFwdG9yLkFjdGlvbnMuQ0FORElEQVRFfHxhPT09T1QuUmFwdG9yLkFjdGlvbnMuT0ZGRVJ8fGE9PT1PVC5SYXB0b3IuQWN0aW9ucy5BTlNXRVJ8fGE9PT1PVC5SYXB0b3IuQWN0aW9ucy5QUkFOU1dFUikpYz0tMSE9PShhPT09T1QuUmFwdG9yLkFjdGlvbnMuQ0FORElEQVRFP2QuY2FuZGlkYXRlOmQuc2RwKS5pbmRleE9mKCJ0eXAgcmVsYXkiKTsKc3dpdGNoKGEpe2Nhc2UgT1QuUmFwdG9yLkFjdGlvbnMuQU5TV0VSOmNhc2UgT1QuUmFwdG9yLkFjdGlvbnMuUFJBTlNXRVI6dGhpcy50cmlnZ2VyKCJjb25uZWN0ZWQiKTtiLl8uanNlcEFuc3dlcihnLmlkLGYsZCk7YnJlYWs7Y2FzZSBPVC5SYXB0b3IuQWN0aW9ucy5PRkZFUjpiLl8uanNlcE9mZmVyKGcuaWQsZixkKTticmVhaztjYXNlIE9ULlJhcHRvci5BY3Rpb25zLkNBTkRJREFURTpiLl8uanNlcENhbmRpZGF0ZShnLmlkLGYsZCl9fS5iaW5kKHRoaXMpLGw9ZnVuY3Rpb24oYSl7dmFyIGI9ImdldCIrKGE/IlZpZGVvIjoiQXVkaW8iKSsiVHJhY2tzIjtyZXR1cm4gZnVuY3Rpb24oYSl7dmFyIGM9ZC5yZW1vdGVTdHJlYW1zLGU7aWYoMCE9PWMubGVuZ3RoJiZjWzBdW2JdKWZvcih2YXIgZj0wLGg9Yy5sZW5ndGg7ZjxoOysrZil7ZT1jW2ZdO2U9ZVtiXSgpO2Zvcih2YXIgZz0wLGk9ZS5sZW5ndGg7ZzxpOysrZyllW2ddLmVuYWJsZWQ9YX19fTtPVC4kLmV2ZW50aW5nKHRoaXMpOwp0aGlzLmRlc3Ryb3k9ZnVuY3Rpb24oKXtkJiYoMD09PWQudW5yZWdpc3Rlck1lc3NhZ2VEZWxlZ2F0ZShqKSYmKGImJihiLmNvbm5lY3RlZCYmZiYmIWYuZGVzdHJveWVkKSYmYi5fLmpzZXBVbnN1YnNjcmliZShmKSx0aGlzLnN1YnNjcmliZVRvQXVkaW8oITEpKSxPVC5QZWVyQ29ubmVjdGlvbnMucmVtb3ZlKGcsZi5zdHJlYW1JZCkpO2Q9bnVsbDt0aGlzLm9mZigpfTt0aGlzLnByb2Nlc3NNZXNzYWdlPWZ1bmN0aW9uKGEsYil7ZC5wcm9jZXNzTWVzc2FnZShhLGIpfTt0aGlzLmdldFN0YXRzPWZ1bmN0aW9uKGEsYil7ZC5nZXRTdGF0cyhhLGIpfTt0aGlzLnN1YnNjcmliZVRvQXVkaW89bCghMSk7dGhpcy5zdWJzY3JpYmVUb1ZpZGVvPWwoITApO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCJoYXNSZWxheUNhbmRpZGF0ZXMiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gY319KTt0aGlzLmluaXQ9ZnVuY3Rpb24oKXt2YXIgYz1iLnNlc3Npb25JbmZvLmljZVNlcnZlcnMubWFwKGZ1bmN0aW9uKGEpe2E9Ck9ULiQuY2xvbmUoYSk7InR1cm46Ij09PWEudXJsLnRyaW0oKS5zdWJzdHIoMCw1KSYmKGEudXNlcm5hbWU9Yi5pZCsiLiIrYi5jb25uZWN0aW9uLmlkKyIuIitmLmlkKTtyZXR1cm4gYX0pO2Q9T1QuUGVlckNvbm5lY3Rpb25zLmFkZChnLGYuc3RyZWFtSWQse2ljZVNlcnZlcnM6Y30pO2Qub24oe2Nsb3NlOmUsc3RyZWFtQWRkZWQ6aCxzdHJlYW1SZW1vdmVkOmksZXJyb3I6a30sdGhpcyk7Yz1kLnJlZ2lzdGVyTWVzc2FnZURlbGVnYXRlKGopOzA8ZC5yZW1vdGVTdHJlYW1zLmxlbmd0aD9kLnJlbW90ZVN0cmVhbXMuZm9yRWFjaChoLHRoaXMpOjE9PT1jJiZiLl8uanNlcFN1YnNjcmliZShmLGEuc3Vic2NyaWJlVG9WaWRlbyxhLnN1YnNjcmliZVRvQXVkaW8pfX19KSh3aW5kb3cpOwooZnVuY3Rpb24oKXtPVC5DaHJvbWU9ZnVuY3Rpb24oZyl7dmFyIGI9e30sZj1mdW5jdGlvbihhLGQpe2QucGFyZW50PXRoaXM7ZC5hcHBlbmRUbyhnLnBhcmVudCk7YlthXT1kO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLGEse2dldDpmdW5jdGlvbigpe3JldHVybiBiW2FdfX0pfTtnLnBhcmVudCYmKE9ULiQuZXZlbnRpbmcodGhpcyksdGhpcy5kZXN0cm95PWZ1bmN0aW9uKCl7dGhpcy5vZmYoKTt0aGlzLmhpZGUoKTtmb3IodmFyIGEgaW4gYiliW2FdLmRlc3Ryb3koKX0sdGhpcy5zaG93PWZ1bmN0aW9uKCl7Zm9yKHZhciBhIGluIGIpYlthXS5zaG93KCl9LHRoaXMuaGlkZT1mdW5jdGlvbigpe2Zvcih2YXIgYSBpbiBiKWJbYV0uaGlkZSgpfSx0aGlzLnNldD1mdW5jdGlvbihhLGIpe2lmKCJzdHJpbmciPT09dHlwZW9mIGEmJmIpZi5jYWxsKHRoaXMsYSxiKTtlbHNlIGZvcih2YXIgYyBpbiBhKWEuaGFzT3duUHJvcGVydHkoYykmJmYuY2FsbCh0aGlzLGMsYVtjXSk7cmV0dXJuIHRoaXN9KX19KSh3aW5kb3cpOwooZnVuY3Rpb24oKXtPVC5DaHJvbWUuQmVoYXZpb3VyfHwoT1QuQ2hyb21lLkJlaGF2aW91cj17fSk7T1QuQ2hyb21lLkJlaGF2aW91ci5XaWRnZXQ9ZnVuY3Rpb24oZyxiKXt2YXIgZj1ifHx7fSxhLGQ7Zy5zZXREaXNwbGF5TW9kZT1mdW5jdGlvbihiKXtiPWJ8fCJhdXRvIjtpZihhIT09Yil7T1QuJC5yZW1vdmVDbGFzcyh0aGlzLmRvbUVsZW1lbnQsIk9UX21vZGUtIithKTtPVC4kLmFkZENsYXNzKHRoaXMuZG9tRWxlbWVudCwiT1RfbW9kZS0iK2IpO2Q9YTthPWJ9fTtnLnNob3c9ZnVuY3Rpb24oKXt0aGlzLnNldERpc3BsYXlNb2RlKGQpO2lmKGYub25TaG93KWYub25TaG93KCk7cmV0dXJuIHRoaXN9O2cuaGlkZT1mdW5jdGlvbigpe3RoaXMuc2V0RGlzcGxheU1vZGUoIm9mZiIpO2lmKGYub25IaWRlKWYub25IaWRlKCk7cmV0dXJuIHRoaXN9O2cuZGVzdHJveT1mdW5jdGlvbigpe2lmKGYub25EZXN0cm95KWYub25EZXN0cm95KHRoaXMuZG9tRWxlbWVudCk7dGhpcy5kb21FbGVtZW50JiYKT1QuJC5yZW1vdmVFbGVtZW50KHRoaXMuZG9tRWxlbWVudCk7cmV0dXJuIGd9O2cuYXBwZW5kVG89ZnVuY3Rpb24oYSl7dGhpcy5kb21FbGVtZW50PU9ULiQuY3JlYXRlRWxlbWVudChmLm5vZGVOYW1lfHwiZGl2IixmLmh0bWxBdHRyaWJ1dGVzLGYuaHRtbENvbnRlbnQpO2lmKGYub25DcmVhdGUpZi5vbkNyZWF0ZSh0aGlzLmRvbUVsZW1lbnQpO2lmKGYubW9kZSE9ImF1dG8iKWcuc2V0RGlzcGxheU1vZGUoZi5tb2RlKTtlbHNle2cuc2V0RGlzcGxheU1vZGUoIm9uIik7c2V0VGltZW91dChmdW5jdGlvbigpe2cuc2V0RGlzcGxheU1vZGUoZi5tb2RlKX0sMkUzKX1hLmFwcGVuZENoaWxkKHRoaXMuZG9tRWxlbWVudCk7cmV0dXJuIGd9fX0pKHdpbmRvdyk7CihmdW5jdGlvbigpe09ULkNocm9tZS5OYW1lUGFuZWw9ZnVuY3Rpb24oZyl7dmFyIGI9Zy5uYW1lO2lmKCFifHwiIj09PWIudHJpbSgpLmxlbmd0aCliPW51bGwsZy5tb2RlPSJvZmYiO3ZhciBmO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCJkb21FbGVtZW50Iix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGZ9LHNldDpmdW5jdGlvbihhKXtmPWF9fSk7T1QuQ2hyb21lLkJlaGF2aW91ci5XaWRnZXQodGhpcyx7bW9kZTpnLm1vZGUsbm9kZU5hbWU6ImgxIixodG1sQ29udGVudDpiLGh0bWxBdHRyaWJ1dGVzOntjbGFzc05hbWU6Ik9UX25hbWUifX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCJuYW1lIix7c2V0OmZ1bmN0aW9uKGEpe2J8fHRoaXMuc2V0RGlzcGxheU1vZGUoImF1dG8iKTtiPWE7Zi5pbm5lckhUTUw9Yn0uYmluZCh0aGlzKX0pfX0pKHdpbmRvdyk7CihmdW5jdGlvbigpe09ULkNocm9tZS5NdXRlQnV0dG9uPWZ1bmN0aW9uKGcpe3ZhciBiLGY9Zy5tdXRlZHx8ITEsYTtPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywiZG9tRWxlbWVudCIse2dldDpmdW5jdGlvbigpe3JldHVybiBhfSxzZXQ6ZnVuY3Rpb24oYil7YT1ifX0pO3ZhciBkPWZ1bmN0aW9uKCl7KGY9IWYpPyhPVC4kLmFkZENsYXNzKGEsIk9UX2FjdGl2ZSIpLHRoaXMucGFyZW50LnRyaWdnZXIoIm11dGVkIix0aGlzKSk6KE9ULiQucmVtb3ZlQ2xhc3MoYSwiT1RfYWN0aXZlIiksdGhpcy5wYXJlbnQudHJpZ2dlcigidW5tdXRlZCIsdGhpcykpO3JldHVybiExfTtPVC5DaHJvbWUuQmVoYXZpb3VyLldpZGdldCh0aGlzLHttb2RlOmcubW9kZSxub2RlTmFtZToiYnV0dG9uIixodG1sQ29udGVudDoiTXV0ZSIsaHRtbEF0dHJpYnV0ZXM6e2NsYXNzTmFtZTpmPyJPVF9tdXRlIE9UX2FjdGl2ZSI6Ik9UX211dGUifSxvbkNyZWF0ZTpmdW5jdGlvbihhKXtiPWQuYmluZCh0aGlzKTsKYS5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsYiwhMSl9LmJpbmQodGhpcyksb25EZXN0cm95OmZ1bmN0aW9uKGEpe2I9bnVsbDthLnJlbW92ZUV2ZW50TGlzdGVuZXIoImNsaWNrIixiLCExKX0uYmluZCh0aGlzKX0pfX0pKHdpbmRvdyk7CihmdW5jdGlvbigpe09ULkNocm9tZS5NaWNWb2x1bWU9ZnVuY3Rpb24oZyl7dmFyIGIsZj1nLm11dGVkfHwhMSxhO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCJkb21FbGVtZW50Iix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGF9LHNldDpmdW5jdGlvbihiKXthPWJ9fSk7dmFyIGQ9ZnVuY3Rpb24oKXsoZj0hZik/KE9ULiQuYWRkQ2xhc3MoYSwiYWN0aXZlIiksdGhpcy5wYXJlbnQudHJpZ2dlcigibXV0ZWQiLHRoaXMpKTooT1QuJC5yZW1vdmVDbGFzcyhhLCJhY3RpdmUiKSx0aGlzLnBhcmVudC50cmlnZ2VyKCJ1bm11dGVkIix0aGlzKSk7cmV0dXJuITF9O09ULkNocm9tZS5CZWhhdmlvdXIuV2lkZ2V0KHRoaXMse21vZGU6Zy5tb2RlLG5vZGVOYW1lOiJidXR0b24iLGh0bWxDb250ZW50OiJNdXRlIixodG1sQXR0cmlidXRlczp7Y2xhc3NOYW1lOiJPVF9taWMtdm9sdW1lIn0sb25DcmVhdGU6ZnVuY3Rpb24oYSl7Yj1kLmJpbmQodGhpcyk7YS5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsCmIsITEpfS5iaW5kKHRoaXMpLG9uRGVzdHJveTpmdW5jdGlvbihhKXtiPW51bGw7YS5yZW1vdmVFdmVudExpc3RlbmVyKCJjbGljayIsYiwhMSl9LmJpbmQodGhpcyl9KX19KSh3aW5kb3cpOwooZnVuY3Rpb24oKXtPVC5DaHJvbWUuU2V0dGluZ3NQYW5lbEJ1dHRvbj1mdW5jdGlvbihnKXt2YXIgYixmPWZ1bmN0aW9uKCl7dGhpcy5wYXJlbnQudHJpZ2dlcigiU2V0dGluZ3NQYW5lbDpvcGVuIix0aGlzKTtyZXR1cm4hMX0sYTtPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywiZG9tRWxlbWVudCIse2dldDpmdW5jdGlvbigpe3JldHVybiBhfSxzZXQ6ZnVuY3Rpb24oYil7YT1ifX0pO09ULkNocm9tZS5CZWhhdmlvdXIuV2lkZ2V0KHRoaXMse21vZGU6Zy5tb2RlLG5vZGVOYW1lOiJidXR0b24iLGh0bWxDb250ZW50OiJTZXR0aW5ncyIsaHRtbEF0dHJpYnV0ZXM6e2NsYXNzTmFtZToiT1Rfc2V0dGluZ3MtcGFuZWwifSxvbkNyZWF0ZTpmdW5jdGlvbihhKXtiPWYuYmluZCh0aGlzKTthLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIixiLCExKX0uYmluZCh0aGlzKSxvbkRlc3Ryb3k6ZnVuY3Rpb24oYSl7Yj1udWxsO2EucmVtb3ZlRXZlbnRMaXN0ZW5lcigiY2xpY2siLGIsITEpfS5iaW5kKHRoaXMpfSl9fSkod2luZG93KTsKKGZ1bmN0aW9uKCl7T1QuQ2hyb21lLlNldHRpbmdzUGFuZWw9ZnVuY3Rpb24oZyl7aWYoZy5zdHJlYW0pe3ZhciBiPWcuc3RyZWFtLGY7T2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsImRvbUVsZW1lbnQiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gZn0sc2V0OmZ1bmN0aW9uKGEpe2Y9YX19KTt2YXIgYT1mdW5jdGlvbigpe3ZhciBhPWIuZ2V0VmlkZW9UcmFja3MoKS5sZW5ndGg/Yi5nZXRWaWRlb1RyYWNrcygpWzBdLmxhYmVsOiJOb25lIixlPWIuZ2V0QXVkaW9UcmFja3MoKS5sZW5ndGg/Yi5nZXRBdWRpb1RyYWNrcygpWzBdLmxhYmVsOiJOb25lIjtmLmlubmVySFRNTD0iPGRsPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZHQ+Q2FtPC9kdD4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRkPiIrYSsiPC9kZD4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGR0Pk1pYzwvZHQ+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkZD4iKwplKyI8L2RkPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGw+IjthPU9ULiQuY3JlYXRlQnV0dG9uKCJDbG9zZSIse2NsYXNzTmFtZToiT1RfY2xvc2UifSx7Y2xpY2s6ZC5iaW5kKHRoaXMpfSk7Zi5hcHBlbmRDaGlsZChhKX0sZD1mdW5jdGlvbigpe3RoaXMucGFyZW50LnRyaWdnZXIoIlNldHRpbmdzUGFuZWw6Y2xvc2UiLHRoaXMpO3JldHVybiExfTtPVC5DaHJvbWUuQmVoYXZpb3VyLldpZGdldCh0aGlzLHttb2RlOmcubW9kZSxub2RlTmFtZToic2VjdGlvbiIsaHRtbENvbnRlbnQ6IlNldHRpbmdzIixodG1sQXR0cmlidXRlczp7Y2xhc3NOYW1lOiJPVF9zZXR0aW5ncy1wYW5lbCJ9LG9uQ3JlYXRlOmEuYmluZCh0aGlzKSxvblNob3c6ZnVuY3Rpb24oKXthLmNhbGwodGhpcyl9LmJpbmQodGhpcyl9KX19fSkod2luZG93KTsKKGZ1bmN0aW9uKCl7T1QuQ2hyb21lLk9wZW5Ub2tCdXR0b249ZnVuY3Rpb24oZyl7dmFyIGI7dGhpcy5fX2RlZmluZUdldHRlcl9fKCJkb21FbGVtZW50IixmdW5jdGlvbigpe3JldHVybiBifSk7dGhpcy5fX2RlZmluZVNldHRlcl9fKCJkb21FbGVtZW50IixmdW5jdGlvbihmKXtiPWZ9KTtPVC5DaHJvbWUuQmVoYXZpb3VyLldpZGdldCh0aGlzLHttb2RlOmc/Zy5tb2RlOm51bGwsbm9kZU5hbWU6InNwYW4iLGh0bWxDb250ZW50OiJPcGVuVG9rIixodG1sQXR0cmlidXRlczp7Y2xhc3NOYW1lOiJPVF9vcGVudG9rIn19KX19KSh3aW5kb3cpOwooZnVuY3Rpb24oKXtPVC5TdHlsYWJsZUNvbXBvbmVudD1mdW5jdGlvbihiLGYpe2lmKCFiLnRyaWdnZXIpdGhyb3cgRXJyb3IoIk9ULlN0eWxhYmxlQ29tcG9uZW50IGlzIGRlcGVuZGVudCBvbiB0aGUgbWl4aW4gT1QuJC5ldmVudGluZy4gRW5zdXJlIHRoYXQgdGhpcyBpcyBpbmNsdWRlZCBpbiB0aGUgb2JqZWN0IGJlZm9yZSBTdHlsYWJsZUNvbXBvbmVudC4iKTt2YXIgYT1uZXcgZyhmLGZ1bmN0aW9uKGEsYyxlKXtlP2IudHJpZ2dlcigic3R5bGVWYWx1ZUNoYW5nZWQiLGEsYyxlKTpiLnRyaWdnZXIoInN0eWxlVmFsdWVDaGFuZ2VkIixhLGMpfSk7Yi5nZXRTdHlsZT1mdW5jdGlvbihiKXtyZXR1cm4gYS5nZXQoYil9O2Iuc2V0U3R5bGU9ZnVuY3Rpb24oYixjLGUpeyJzdHJpbmciIT09dHlwZW9mIGI/YS5zZXRBbGwoYixlKTphLnNldChiLGMpO3JldHVybiB0aGlzfX07dmFyIGc9ZnVuY3Rpb24oYixmKXt2YXIgYT0ic2hvd01pY0J1dHRvbiBzaG93U3BlYWtlckJ1dHRvbiBzaG93U2V0dGluZ3NCdXR0b24gc2hvd0NhbWVyYVRvZ2dsZUJ1dHRvbiBuYW1lRGlzcGxheU1vZGUgYnV0dG9uRGlzcGxheU1vZGUgc2hvd1NhdmVCdXR0b24gc2hvd1JlY29yZEJ1dHRvbiBzaG93UmVjb3JkU3RvcEJ1dHRvbiBzaG93UmVSZWNvcmRCdXR0b24gc2hvd1BhdXNlQnV0dG9uIHNob3dQbGF5QnV0dG9uIHNob3dQbGF5U3RvcEJ1dHRvbiBzaG93U3RvcEJ1dHRvbiBiYWNrZ3JvdW5kSW1hZ2VVUkkgc2hvd0NvbnRyb2xQYW5lbCBzaG93UmVjb3JkQ291bnRlciBzaG93UGxheUNvdW50ZXIgc2hvd0NvbnRyb2xCYXIgc2hvd1ByZXZpZXdUaW1lIi5zcGxpdCgiICIpLApkPXtidXR0b25EaXNwbGF5TW9kZTpbImF1dG8iLCJvZmYiLCJvbiJdLG5hbWVEaXNwbGF5TW9kZTpbImF1dG8iLCJvZmYiLCJvbiJdLHNob3dTZXR0aW5nc0J1dHRvbjpbITAsITFdLHNob3dNaWNCdXR0b246WyEwLCExXSxzaG93Q2FtZXJhVG9nZ2xlQnV0dG9uOlshMCwhMV0sc2hvd1NhdmVCdXR0b246WyEwLCExXSxiYWNrZ3JvdW5kSW1hZ2VVUkk6bnVsbCxzaG93Q29udHJvbEJhcjpbITAsITFdLHNob3dQbGF5Q291bnRlcjpbITAsITFdLHNob3dSZWNvcmRDb3VudGVyOlshMCwhMV0sc2hvd1ByZXZpZXdUaW1lOlshMCwhMV19LGM9e30sZT1mdW5jdGlvbihhLGIpe3JldHVybiJiYWNrZ3JvdW5kSW1hZ2VVUkkiPT09YXx8ZC5oYXNPd25Qcm9wZXJ0eShhKSYmLTEhPT1kW2FdLmluZGV4T2YoYil9LGg9ZnVuY3Rpb24oYSl7c3dpdGNoKGEpe2Nhc2UgInRydWUiOnJldHVybiEwO2Nhc2UgImZhbHNlIjpyZXR1cm4hMTtkZWZhdWx0OnJldHVybiBhfX07dGhpcy5nZXRBbGw9ZnVuY3Rpb24oKXt2YXIgYj0KT1QuJC5jbG9uZShjKSxkO2ZvcihkIGluIGIpMD5hLmluZGV4T2YoZCkmJmRlbGV0ZSBiW2RdO3JldHVybiBifTt0aGlzLmdldD1mdW5jdGlvbihhKXtyZXR1cm4gYT9jW2FdOnRoaXMuZ2V0QWxsKCl9O3RoaXMuc2V0QWxsPWZ1bmN0aW9uKGEsYil7dmFyIGQsZyxtO2ZvcihtIGluIGEpZz1oKGFbbV0pLGUobSxnKT8oZD1jW21dLGchPT1kJiYoY1ttXT1nLGJ8fGYobSxnLGQpKSk6T1Qud2FybigiU3R5bGUuc2V0QWxsOjpJbnZhbGlkIHN0eWxlIHByb3BlcnR5IHBhc3NlZCAiK20rIiA6ICIrZyk7cmV0dXJuIHRoaXN9O3RoaXMuc2V0PWZ1bmN0aW9uKGEsYil7T1QuZGVidWcoIlB1Ymxpc2hlci5zZXRTdHlsZTogIithLnRvU3RyaW5nKCkpO3ZhciBkPWgoYiksZztpZighZShhLGQpKXJldHVybiBPVC53YXJuKCJTdHlsZS5zZXQ6OkludmFsaWQgc3R5bGUgcHJvcGVydHkgcGFzc2VkICIrYSsiIDogIitkKSx0aGlzO2c9Y1thXTtkIT09ZyYmKGNbYV09ZCxmKGEsYixnKSk7cmV0dXJuIHRoaXN9OwpiJiZ0aGlzLnNldEFsbChiLCEwKX19KSh3aW5kb3cpOyhmdW5jdGlvbigpe09ULk1pY3JvcGhvbmU9ZnVuY3Rpb24oZyxiKXt2YXIgZixhPTUwO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCJtdXRlZCIse2dldDpmdW5jdGlvbigpe3JldHVybiBmfSxzZXQ6ZnVuY3Rpb24oYSl7aWYoZiE9PWEpe2Y9YTtmb3IodmFyIGE9Zy5nZXRBdWRpb1RyYWNrcygpLGI9MCxlPWEubGVuZ3RoO2I8ZTsrK2IpYVtiXS5lbmFibGVkPSFmfX19KTtPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywiZ2FpbiIse2dldDpmdW5jdGlvbigpe3JldHVybiBhfSxzZXQ6ZnVuY3Rpb24oYil7T1Qud2FybigiT1QuTWljcm9waG9uZS5nYWluIElTIE5PVCBZRVQgSU1QTEVNRU5URUQiKTthPWJ9fSk7dGhpcy5tdXRlZD12b2lkIDAhPT1iPyEwPT09YjpnLmdldEF1ZGlvVHJhY2tzKCkubGVuZ3RoPyFnLmdldEF1ZGlvVHJhY2tzKClbMF0uZW5hYmxlZDohMX19KSh3aW5kb3cpOwooZnVuY3Rpb24oKXtPVC5nZW5lcmF0ZVNpbXBsZVN0YXRlTWFjaGluZT1mdW5jdGlvbihnLGIsZil7dmFyIGE9Yi5zbGljZSgpLGQ9T1QuJC5jbG9uZShmKTtyZXR1cm4gZnVuY3Rpb24oYil7ZnVuY3Rpb24gZShhLGQpe2Ioe21lc3NhZ2U6YSxuZXdTdGF0ZTpkLGN1cnJlbnRTdGF0ZTpmLHByZXZpb3VzU3RhdGU6aX0pfXZhciBmPWcsaT1udWxsO3RoaXMuc2V0PWZ1bmN0aW9uKGIpe3ZhciBjOy0xIT09YS5pbmRleE9mKGIpP2RbZl0mJi0xIT09ZFtmXS5pbmRleE9mKGIpP2M9ITA6KGUoIiciK2YrIicgY2Fubm90IHRyYW5zaXRpb24gdG8gJyIrYisiJyIsYiksYz0hMSk6KGUoIiciK2IrIicgaXMgbm90IGEgdmFsaWQgc3RhdGUiLGIpLGM9ITEpO2MmJihpPWYsZj1iKX07T2JqZWN0LmRlZmluZVByb3BlcnRpZXModGhpcyx7Y3VycmVudDp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGZ9fSxzdWJzY3JpYmluZzp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIlN1YnNjcmliaW5nIj09PWZ9fX0pfX19KSh3aW5kb3cpOwooZnVuY3Rpb24oKXtPVC5TdWJzY3JpYmluZ1N0YXRlPU9ULmdlbmVyYXRlU2ltcGxlU3RhdGVNYWNoaW5lKCJOb3RTdWJzY3JpYmluZyIsIk5vdFN1YnNjcmliaW5nIEluaXQgQ29ubmVjdGluZ1RvUGVlciBCaW5kaW5nUmVtb3RlU3RyZWFtIFN1YnNjcmliaW5nIEZhaWxlZCIuc3BsaXQoIiAiKSx7Tm90U3Vic2NyaWJpbmc6WyJOb3RTdWJzY3JpYmluZyIsIkluaXQiXSxJbml0OlsiTm90U3Vic2NyaWJpbmciLCJDb25uZWN0aW5nVG9QZWVyIiwiQmluZGluZ1JlbW90ZVN0cmVhbSJdLENvbm5lY3RpbmdUb1BlZXI6WyJOb3RTdWJzY3JpYmluZyIsIkJpbmRpbmdSZW1vdGVTdHJlYW0iLCJGYWlsZWQiXSxCaW5kaW5nUmVtb3RlU3RyZWFtOlsiTm90U3Vic2NyaWJpbmciLCJTdWJzY3JpYmluZyIsIkZhaWxlZCJdLFN1YnNjcmliaW5nOlsiTm90U3Vic2NyaWJpbmciLCJGYWlsZWQiXSxGYWlsZWQ6W119KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoT1QuU3Vic2NyaWJpbmdTdGF0ZS5wcm90b3R5cGUsCiJhdHRlbXB0aW5nVG9TdWJzY3JpYmUiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4tMSE9PVsiSW5pdCIsIkNvbm5lY3RpbmdUb1BlZXIiLCJCaW5kaW5nUmVtb3RlU3RyZWFtIl0uaW5kZXhPZih0aGlzLmN1cnJlbnQpfX0pfSkod2luZG93KTsKKGZ1bmN0aW9uKCl7T1QuUHVibGlzaGluZ1N0YXRlPU9ULmdlbmVyYXRlU2ltcGxlU3RhdGVNYWNoaW5lKCJOb3RQdWJsaXNoaW5nIiwiTm90UHVibGlzaGluZyBHZXRVc2VyTWVkaWEgQmluZGluZ01lZGlhIE1lZGlhQm91bmQgUHVibGlzaGluZ1RvU2Vzc2lvbiBQdWJsaXNoaW5nIEZhaWxlZCIuc3BsaXQoIiAiKSx7Tm90UHVibGlzaGluZzpbIk5vdFB1Ymxpc2hpbmciLCJHZXRVc2VyTWVkaWEiXSxHZXRVc2VyTWVkaWE6WyJCaW5kaW5nTWVkaWEiLCJGYWlsZWQiLCJOb3RQdWJsaXNoaW5nIl0sQmluZGluZ01lZGlhOlsiTWVkaWFCb3VuZCIsIkZhaWxlZCIsIk5vdFB1Ymxpc2hpbmciXSxNZWRpYUJvdW5kOlsiTm90UHVibGlzaGluZyIsIlB1Ymxpc2hpbmdUb1Nlc3Npb24iLCJGYWlsZWQiXSxQdWJsaXNoaW5nVG9TZXNzaW9uOlsiTm90UHVibGlzaGluZyIsIlB1Ymxpc2hpbmciLCJGYWlsZWQiXSxQdWJsaXNoaW5nOlsiTm90UHVibGlzaGluZyIsIk1lZGlhQm91bmQiLCJGYWlsZWQiXSwKRmFpbGVkOltdfSk7T2JqZWN0LmRlZmluZVByb3BlcnRpZXMoT1QuUHVibGlzaGluZ1N0YXRlLnByb3RvdHlwZSx7YXR0ZW1wdGluZ1RvUHVibGlzaDp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuLTEhPT1bIkdldFVzZXJNZWRpYSIsIkJpbmRpbmdNZWRpYSIsIk1lZGlhQm91bmQiLCJQdWJsaXNoaW5nVG9TZXNzaW9uIl0uaW5kZXhPZih0aGlzLmN1cnJlbnQpfX0scHVibGlzaGluZzp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIlB1Ymxpc2hpbmciPT09dGhpcy5jdXJyZW50fX19KX0pKHdpbmRvdyk7CihmdW5jdGlvbigpe3ZhciBnPXthdWRpbzohMCx2aWRlbzohMH07T1QuUHVibGlzaGVyPWZ1bmN0aW9uKCl7aWYoT1QuY2hlY2tTeXN0ZW1SZXF1aXJlbWVudHMoKSl7dmFyIGI9T1QuUHVibGlzaGVyLm5leHRJZCgpLGYsYSxkLGMsZSxoLGk9e30saz0hMSxqLGwsbSxwLG49bmV3IE9ULkFuYWx5dGljcyxyPXt9LHE9e3RpbWVTdGFtcDpPVC4kLm5vdygpfSxvO09ULiQuZXZlbnRpbmcodGhpcyk7T1QuU3R5bGFibGVDb21wb25lbnQodGhpcyx7c2hvd01pY0J1dHRvbjohMCxzaG93U2V0dGluZ3NCdXR0b246ITAsc2hvd0NhbWVyYVRvZ2dsZUJ1dHRvbjohMCxuYW1lRGlzcGxheU1vZGU6ImF1dG8iLGJ1dHRvbkRpc3BsYXlNb2RlOiJhdXRvIixiYWNrZ3JvdW5kSW1hZ2VVUkk6bnVsbH0pO3ZhciBzPWZ1bmN0aW9uKGEsZCxlLGYpe24ubG9nRXZlbnQoe2FjdGlvbjphLHZhcmlhdGlvbjpkLHBheWxvYWRfdHlwZTplLHBheWxvYWQ6ZixzZXNzaW9uX2lkOmg/aC5zZXNzaW9uSWQ6bnVsbCwKY29ubmVjdGlvbl9pZDpoJiZoLmNvbm5lY3RlZD9oLmNvbm5lY3Rpb24uY29ubmVjdGlvbklkOm51bGwscGFydG5lcl9pZDpoP2guYXBpS2V5Ok9ULkFQSUtFWSxzdHJlYW1JZDpjP2MuaWQ6bnVsbCx3aWRnZXRfaWQ6Yix3aWRnZXRfdHlwZToiUHVibGlzaGVyIn0pfSx4PWZ1bmN0aW9uKGEpe3ZhciBkPXt3aWRnZXRfdHlwZToiUHVibGlzaGVyIixzdHJlYW1fdHlwZToiV2ViUlRDIixzZXNzaW9uSWQ6aD9oLnNlc3Npb25JZDpudWxsLGNvbm5lY3Rpb25JZDpoJiZoLmNvbm5lY3RlZD9oLmNvbm5lY3Rpb24uY29ubmVjdGlvbklkOm51bGwscGFydG5lcklkOmg/aC5hcGlLZXk6T1QuQVBJS0VZLHN0cmVhbUlkOmM/Yy5pZDpudWxsLHdpZGdldElkOmIsdmVyc2lvbjpPVC5wcm9wZXJ0aWVzLnZlcnNpb24sbWVkaWFfc2VydmVyX25hbWU6aD9oLnNlc3Npb25JbmZvLm1lc3NhZ2luZ1NlcnZlcjpudWxsLHAycEZsYWc6aD9oLnNlc3Npb25JbmZvLnAycEVuYWJsZWQ6ITEsZHVyYXRpb246KG5ldyBEYXRlKS5nZXRUaW1lKCktCmwuZ2V0VGltZSgpLHJlbW90ZV9jb25uZWN0aW9uX2lkOmF9O2lbYV0uZ2V0U3RhdHMocSxmdW5jdGlvbihhKXtpZihhKWZvcihzdGF0X2luZGV4IGluIGEpZFtzdGF0X2luZGV4XT1hW3N0YXRfaW5kZXhdO24ubG9nUU9TKGQpfSl9LHY9ZnVuY3Rpb24oKXtPVC5kZWJ1ZygiT1QuUHVibGlzaGVyLm9uTG9hZGVkIik7cygicHVibGlzaCIsIlN1Y2Nlc3MiLCJzdHJlYW1UeXBlIiwiV2ViUlRDIik7by5zZXQoIk1lZGlhQm91bmQiKTthLmxvYWRpbmc9ITE7az0hMDtwPShuZXcgT1QuQ2hyb21lKHtwYXJlbnQ6YS5kb21FbGVtZW50fSkpLnNldCh7bmFtZTpuZXcgT1QuQ2hyb21lLk5hbWVQYW5lbCh7bmFtZTpqLm5hbWUsbW9kZTp0aGlzLmdldFN0eWxlKCJuYW1lRGlzcGxheU1vZGUiKX0pLG11dGVCdXR0b246bmV3IE9ULkNocm9tZS5NdXRlQnV0dG9uKHttdXRlZDohMT09PWoucHVibGlzaEF1ZGlvLG1vZGU6Sy5jYWxsKHRoaXMsdGhpcy5nZXRTdHlsZSgic2hvd01pY0J1dHRvbiIpKX0pLApvcGVudG9rQnV0dG9uOm5ldyBPVC5DaHJvbWUuT3BlblRva0J1dHRvbn0pLm9uKHttdXRlZDp0aGlzLnB1Ymxpc2hBdWRpby5iaW5kKHRoaXMsITEpLHVubXV0ZWQ6dGhpcy5wdWJsaXNoQXVkaW8uYmluZCh0aGlzLCEwKX0pO3RoaXMudHJpZ2dlcigiaW5pdFN1Y2Nlc3MiLHRoaXMpO3RoaXMudHJpZ2dlcigibG9hZGVkIix0aGlzKX0seT1mdW5jdGlvbihhKXtzKCJwdWJsaXNoIiwiRmFpbHVyZSIsInJlYXNvbiIsIlB1Ymxpc2hlciBQZWVyQ29ubmVjdGlvbiBFcnJvcjogIithKTtvLnNldCgiRmFpbGVkIik7dGhpcy50cmlnZ2VyKCJwdWJsaXNoRXJyb3IiLCJQdWJsaXNoZXIgUGVlckNvbm5lY3Rpb24gRXJyb3I6ICIrYSk7T1QuaGFuZGxlSnNFeGNlcHRpb24oIlB1Ymxpc2hlciBQZWVyQ29ubmVjdGlvbiBFcnJvcjogIithLE9ULkV4Y2VwdGlvbkNvZGVzLlAyUF9DT05ORUNUSU9OX0ZBSUxFRCx7c2Vzc2lvbjpoLHRhcmdldDp0aGlzfSl9LEI9ZnVuY3Rpb24oYil7T1QuZGVidWcoIk9ULlB1Ymxpc2hlci5vblN0cmVhbUF2YWlsYWJsZSIpOwpvLnNldCgiQmluZGluZ01lZGlhIik7ZSYmKGUuc3RvcCgpLGU9bnVsbCk7ZT1iO209bmV3IE9ULk1pY3JvcGhvbmUoZSwhai5wdWJsaXNoQXVkaW8pO3RoaXMucHVibGlzaFZpZGVvKGoucHVibGlzaFZpZGVvKTt0aGlzLmRpc3BhdGNoRXZlbnQobmV3IE9ULkV2ZW50KE9ULkV2ZW50Lm5hbWVzLkFDQ0VTU19BTExPV0VELCExKSk7ZD1uZXcgT1QuVmlkZW9FbGVtZW50KHthdHRyaWJ1dGVzOnttdXRlZDohMH19KTtkLm9uKHtzdHJlYW1Cb3VuZDp2LGxvYWRFcnJvcjp5LGVycm9yOkF9LHRoaXMpLmJpbmRUb1N0cmVhbShlKTthLnZpZGVvPWR9LHo9ZnVuY3Rpb24oYil7T1QuZXJyb3IoIk9ULlB1Ymxpc2hlci5vblN0cmVhbUF2YWlsYWJsZUVycm9yICIrYi5uYW1lKyI6ICIrYi5tZXNzYWdlKTtvLnNldCgiRmFpbGVkIik7dGhpcy50cmlnZ2VyKCJwdWJsaXNoRXJyb3IiLGIubWVzc2FnZSk7YSYmYS5kZXN0cm95KCk7cygicHVibGlzaCIsIkZhaWx1cmUiLCJyZWFzb24iLCJQdWJsaXNoZXIgZmFpbGVkIHRvIGFjY2VzcyBjYW1lcmEvbWljOiAiKwpiLm1lc3NhZ2UpO09ULmhhbmRsZUpzRXhjZXB0aW9uKCJQdWJsaXNoZXIgZmFpbGVkIHRvIGFjY2VzcyBjYW1lcmEvbWljOiAiK2IubWVzc2FnZSwyRTMse3Nlc3Npb246aCx0YXJnZXQ6dGhpc30pfSx3PWZ1bmN0aW9uKGIpe09ULmVycm9yKCJPVC5QdWJsaXNoZXIub25TdHJlYW1BdmFpbGFibGVFcnJvciBQZXJtaXNzaW9uIERlbmllZCIpO28uc2V0KCJGYWlsZWQiKTt0aGlzLnRyaWdnZXIoInB1Ymxpc2hFcnJvciIsYi5tZXNzYWdlKTtzKCJwdWJsaXNoIiwiRmFpbHVyZSIsInJlYXNvbiIsIlB1Ymxpc2hlciBBY2Nlc3MgRGVuaWVkOiBQZXJtaXNzaW9uIERlbmllZCIpO3ZhciBjPW5ldyBPVC5FdmVudChPVC5FdmVudC5uYW1lcy5BQ0NFU1NfREVOSUVEKTt0aGlzLmRpc3BhdGNoRXZlbnQoYyxmdW5jdGlvbigpeyFjLmlzRGVmYXVsdFByZXZlbnRlZCgpJiZhJiZhLmRlc3Ryb3koKX0pfSxEPWZ1bmN0aW9uKCl7cygiYWNjZXNzRGlhbG9nIiwiT3BlbmVkIiwiIiwiIik7dGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBPVC5FdmVudChPVC5FdmVudC5uYW1lcy5BQ0NFU1NfRElBTE9HX09QRU5FRCwKITEpKX0sQz1mdW5jdGlvbigpe3MoImFjY2Vzc0RpYWxvZyIsIkNsb3NlZCIsIiIsIiIpO3RoaXMuZGlzcGF0Y2hFdmVudChuZXcgT1QuRXZlbnQoT1QuRXZlbnQubmFtZXMuQUNDRVNTX0RJQUxPR19DTE9TRUQsITEpKX0sQT1mdW5jdGlvbihhLGIpe09ULmVycm9yKCJPVC5QdWJsaXNoZXIub25WaWRlb0Vycm9yIik7dmFyIGM9YisoYT8iICgiK2ErIikiOiIiKTtzKCJzdHJlYW0iLG51bGwsInJlYXNvbiIsIlB1Ymxpc2hlciB3aGlsZSBwbGF5aW5nIHN0cmVhbTogIitjKTtvLnNldCgiRmFpbGVkIik7by5hdHRlbXB0aW5nVG9QdWJsaXNoP3RoaXMudHJpZ2dlcigicHVibGlzaEVycm9yIixjKTp0aGlzLnRyaWdnZXIoImVycm9yIixjKTtPVC5oYW5kbGVKc0V4Y2VwdGlvbigiUHVibGlzaGVyIGVycm9yIHBsYXlpbmcgc3RyZWFtOiAiK2MsMkUzLHtzZXNzaW9uOmgsdGFyZ2V0OnRoaXN9KX0sRT1mdW5jdGlvbihhKXtPVC5kZWJ1ZygiT1QuU3Vic2NyaWJlciBoYXMgYmVlbiBkaXNjb25uZWN0ZWQgZnJvbSB0aGUgUHVibGlzaGVyJ3MgUGVlckNvbm5lY3Rpb24iKTsKdGhpcy5jbGVhbnVwU3Vic2NyaWJlcihhLnJlbW90ZUNvbm5lY3Rpb24uaWQpfSxJPWZ1bmN0aW9uKGEsYixjKXtzKCJwdWJsaXNoIiwiRmFpbHVyZSIsInJlYXNvbnxoYXNSZWxheUNhbmRpZGF0ZXMiLFsiUHVibGlzaGVyIFBlZXJDb25uZWN0aW9uIHdpdGggY29ubmVjdGlvbiAiK2MucmVtb3RlQ29ubmVjdGlvbi5pZCsiIGZhaWxlZDogIitiLGMuaGFzUmVsYXlDYW5kaWRhdGVzXS5qb2luKCJ8IikpO09ULmhhbmRsZUpzRXhjZXB0aW9uKCJQdWJsaXNoZXIgUGVlckNvbm5lY3Rpb24gRXJyb3I6ICIrYiwyRTMse3Nlc3Npb246aCx0YXJnZXQ6dGhpc30pO2NsZWFySW50ZXJ2YWwocltjLnJlbW90ZUNvbm5lY3Rpb24uaWRdKTtkZWxldGUgcltjLnJlbW90ZUNvbm5lY3Rpb24uaWRdO2RlbGV0ZSBpW2MucmVtb3RlQ29ubmVjdGlvbi5pZF19LEo9ZnVuY3Rpb24oYSl7dmFyIGI9aVthLmlkXTtpZighYil7dmFyIGQ9T1QuJC5ub3coKTtzKCJjcmVhdGVQZWVyQ29ubmVjdGlvbiIsIkF0dGVtcHQiLAoiIiwiIik7YS5vbigiZGVzdHJveWVkIix0aGlzLmNsZWFudXBTdWJzY3JpYmVyLmJpbmQodGhpcyxhLmlkKSk7Yj1pW2EuaWRdPW5ldyBPVC5QdWJsaXNoZXJQZWVyQ29ubmVjdGlvbihhLGgsYyxlKTtiLm9uKHtjb25uZWN0ZWQ6ZnVuY3Rpb24oKXtzKCJjcmVhdGVQZWVyQ29ubmVjdGlvbiIsIlN1Y2Nlc3MiLCJwY2N8aGFzUmVsYXlDYW5kaWRhdGVzIixbcGFyc2VJbnQoT1QuJC5ub3coKS1kLDEwKSxiLmhhc1JlbGF5Q2FuZGlkYXRlc10uam9pbigifCIpKTtyW2EuaWRdPXNldEludGVydmFsKGZ1bmN0aW9uKCl7eChhLmlkKX0sM0U0KX0sZGlzY29ubmVjdGVkOkUsZXJyb3I6SX0sdGhpcyk7Yi5pbml0KCl9cmV0dXJuIGJ9LEs9ZnVuY3Rpb24oYSl7aWYoITE9PT1hKXJldHVybiJvZmYiO2E9dGhpcy5nZXRTdHlsZSgiYnV0dG9uRGlzcGxheU1vZGUiKTtyZXR1cm4hMT09PWE/Im9uIjphfSxGPWZ1bmN0aW9uKCl7cCYmKHAuZGVzdHJveSgpLHA9bnVsbCk7dGhpcy5kaXNjb25uZWN0KCk7Cm09bnVsbDtkJiYoZC5kZXN0cm95KCksZD1udWxsKTtlJiYoZS5zdG9wKCksZT1udWxsKTthJiYoYS5kZXN0cm95KCksYT1udWxsKTt0aGlzLnNlc3Npb24mJnRoaXMuXy51bnB1Ymxpc2hGcm9tU2Vzc2lvbih0aGlzLnNlc3Npb24pO2Zvcih2YXIgYiBpbiByKWNsZWFySW50ZXJ2YWwocltiXSksZGVsZXRlIHJbYl07Yz1mPW51bGw7az0hMTtfcHJvcGVydGllcz1oPW51bGw7by5zZXQoIk5vdFB1Ymxpc2hpbmciKX0uYmluZCh0aGlzKTt0aGlzLnB1Ymxpc2g9ZnVuY3Rpb24oYixjKXtPVC5kZWJ1ZygiT1QuUHVibGlzaGVyOiBwdWJsaXNoIik7KG8uYXR0ZW1wdGluZ1RvUHVibGlzaHx8by5wdWJsaXNoaW5nKSYmRigpO28uc2V0KCJHZXRVc2VyTWVkaWEiKTtqPU9ULiQuZGVmYXVsdHMoY3x8e30se3B1Ymxpc2hBdWRpbzohMCxwdWJsaXNoVmlkZW86ITAsbWlycm9yOiEwfSk7ai5jb25zdHJhaW50cz1PVC4kLmRlZmF1bHRzKGouY29uc3RyYWludHN8fHt9LGcpO2ouc3R5bGUmJnRoaXMuc2V0U3R5bGUoai5zdHlsZSwKbnVsbCwhMCk7ai5uYW1lJiYoai5uYW1lPWoubmFtZS50b1N0cmluZygpKTtqLmNsYXNzTmFtZXM9Ik9UX3Jvb3QgT1RfcHVibGlzaGVyIjtPVC5vbkxvYWQoZnVuY3Rpb24oKXthPW5ldyBPVC5XaWRnZXRWaWV3KGIsaik7Zj1hLmRvbUlkO09ULiQuZ2V0VXNlck1lZGlhKGouY29uc3RyYWludHMsQi5iaW5kKHRoaXMpLHouYmluZCh0aGlzKSxELmJpbmQodGhpcyksQy5iaW5kKHRoaXMpLHcuYmluZCh0aGlzKSl9LHRoaXMpO3JldHVybiB0aGlzfTt0aGlzLnB1Ymxpc2hBdWRpbz1mdW5jdGlvbihhKXtqLnB1Ymxpc2hBdWRpbz1hO20mJihtLm11dGVkPSFhKTtoJiZjJiZoLl8ubW9kaWZ5U3RyZWFtKGMuc3RyZWFtSWQsImhhc0F1ZGlvIixhKTtyZXR1cm4gdGhpc307dGhpcy5wdWJsaXNoVmlkZW89ZnVuY3Rpb24oYil7dmFyIGQ9ai5wdWJsaXNoVmlkZW87ai5wdWJsaXNoVmlkZW89YjtoJiYoYyYmai5wdWJsaXNoVmlkZW8hPT1kKSYmaC5fLm1vZGlmeVN0cmVhbShjLnN0cmVhbUlkLAoiaGFzVmlkZW8iLGIpO2lmKGUpZm9yKHZhciBkPWUuZ2V0VmlkZW9UcmFja3MoKSxmPTAsZz1kLmxlbmd0aDtmPGc7KytmKWRbZl0uZW5hYmxlZD1iO2EmJihhLnNob3dQb3N0ZXI9IWIpO3JldHVybiB0aGlzfTt0aGlzLnJlY29yZFFPUz1mdW5jdGlvbigpe2Zvcih2YXIgYSBpbiBpKXgoYSl9O3RoaXMuZGVzdHJveT1mdW5jdGlvbihhLGIpe0YoKTshMCE9PWImJnRoaXMuZGlzcGF0Y2hFdmVudChuZXcgT1QuRGVzdHJveWVkRXZlbnQoT1QuRXZlbnQubmFtZXMuUFVCTElTSEVSX0RFU1RST1lFRCx0aGlzLGEpLHRoaXMub2ZmLmJpbmQodGhpcykpO3JldHVybiB0aGlzfTt0aGlzLmRpc2Nvbm5lY3Q9ZnVuY3Rpb24oKXtmb3IodmFyIGEgaW4gaSl0aGlzLmNsZWFudXBTdWJzY3JpYmVyKGEpfTt0aGlzLmNsZWFudXBTdWJzY3JpYmVyPWZ1bmN0aW9uKGEpe3ZhciBiPWlbYV07Y2xlYXJJbnRlcnZhbChyW2FdKTtkZWxldGUgclthXTtiJiYoYi5kZXN0cm95KCksZGVsZXRlIGlbYV0scygiZGlzY29ubmVjdCIsCiJQZWVyQ29ubmVjdGlvbiIsInN1YnNjcmliZXJDb25uZWN0aW9uIixhKSl9O3RoaXMucHJvY2Vzc01lc3NhZ2U9ZnVuY3Rpb24oYSxiLGMpe09ULmRlYnVnKCJPVC5QdWJsaXNoZXIucHJvY2Vzc01lc3NhZ2U6IFJlY2VpdmVkICIrYSsiIGZyb20gIitiLmlkKTtPVC5kZWJ1ZyhjKTtzd2l0Y2goYSl7Y2FzZSBPVC5SYXB0b3IuQWN0aW9ucy5VTlNVQlNDUklCRTp0aGlzLmNsZWFudXBTdWJzY3JpYmVyKGIuaWQpO2JyZWFrO2RlZmF1bHQ6Si5jYWxsKHRoaXMsYikucHJvY2Vzc01lc3NhZ2UoYSxjKX19O3RoaXMuZ2V0SW1nRGF0YT1mdW5jdGlvbigpe3JldHVybiFrPyhPVC5lcnJvcigiT1QuUHVibGlzaGVyLmdldEltZ0RhdGE6IENhbm5vdCBnZXRJbWdEYXRhIGJlZm9yZSB0aGUgUHVibGlzaGVyIGlzIHB1Ymxpc2hpbmcuIiksbnVsbCk6ZC5pbWdEYXRhfTt0aGlzLl89e3B1Ymxpc2hUb1Nlc3Npb246ZnVuY3Rpb24oYSl7dGhpcy5zZXNzaW9uPWE7dmFyIGI9ZnVuY3Rpb24oKXt0aGlzLnNlc3Npb24mJgooby5zZXQoIlB1Ymxpc2hpbmdUb1Nlc3Npb24iKSxhLl8uY3JlYXRlU3RyZWFtKHRoaXMuZ3VpZCxqJiZqLm5hbWU/ai5uYW1lOiIiLE9ULlZpZGVvT3JpZW50YXRpb24uUk9UQVRFRF9OT1JNQUwsZC52aWRlb1dpZHRoLGQudmlkZW9IZWlnaHQsai5wdWJsaXNoQXVkaW8sai5wdWJsaXNoVmlkZW8pKX07aWYoayliLmNhbGwodGhpcyk7ZWxzZSB0aGlzLm9uKCJpbml0U3VjY2VzcyIsYix0aGlzKTtzKCJwdWJsaXNoIiwiQXR0ZW1wdCIsInN0cmVhbVR5cGUiLCJXZWJSVEMiKTtyZXR1cm4gdGhpc30uYmluZCh0aGlzKSx1bnB1Ymxpc2hGcm9tU2Vzc2lvbjpmdW5jdGlvbihhKXtpZighdGhpcy5zZXNzaW9ufHxhLmlkIT09dGhpcy5zZXNzaW9uLmlkKXJldHVybiBPVC53YXJuKCJUaGUgcHVibGlzaGVyICIrdGhpcy5ndWlkKyIgaXMgdHJ5aW5nIHRvIHVucHVibGlzaCBmcm9tIGEgc2Vzc2lvbiAiK2EuaWQrIiBpdCBpcyBub3QgYXR0YWNoZWQgdG8iKSx0aGlzO2EuY29ubmVjdGVkJiYKdGhpcy5zdHJlYW0mJmEuXy5kZXN0cm95U3RyZWFtKHRoaXMuc3RyZWFtLmlkKTt0aGlzLmRpc2Nvbm5lY3QoKTt0aGlzLnNlc3Npb249bnVsbDtvLnNldCgiTWVkaWFCb3VuZCIpO3MoInVucHVibGlzaCIsIlN1Y2Nlc3MiLCJzZXNzaW9uSWQiLGEuaWQpO3JldHVybiB0aGlzfS5iaW5kKHRoaXMpLHN0cmVhbVJlZ2lzdGVyZWRIYW5kbGVyOmZ1bmN0aW9uKGEpe3RoaXMuc3RyZWFtPWE7dGhpcy5zdHJlYW0ub24oImRlc3Ryb3llZCIsdGhpcy5kaXNjb25uZWN0LHRoaXMpO2E9YjtiPU9ULlB1Ymxpc2hlci5uZXh0SWQoKTthJiZ0aGlzLnRyaWdnZXIoImlkVXBkYXRlZCIsYSxiKTtvLnNldCgiUHVibGlzaGluZyIpO2w9bmV3IERhdGU7dGhpcy50cmlnZ2VyKCJwdWJsaXNoU3VjY2VzcyIpfS5iaW5kKHRoaXMpfTt0aGlzLmRldGVjdERldmljZXM9ZnVuY3Rpb24oKXtPVC53YXJuKCJGaXhtZTogSGF2ZW4ndCBpbXBsZW1lbnRlZCBkZXRlY3REZXZpY2VzIil9O3RoaXMuZGV0ZWN0TWljQWN0aXZpdHk9CmZ1bmN0aW9uKCl7T1Qud2FybigiRml4bWU6IEhhdmVuJ3QgaW1wbGVtZW50ZWQgZGV0ZWN0TWljQWN0aXZpdHkiKX07dGhpcy5nZXRFY2hvQ2FuY2VsbGF0aW9uTW9kZT1mdW5jdGlvbigpe09ULndhcm4oIkZpeG1lOiBIYXZlbid0IGltcGxlbWVudGVkIGdldEVjaG9DYW5jZWxsYXRpb25Nb2RlIik7cmV0dXJuImZ1bGxEdXBsZXgifTt0aGlzLnNldE1pY3JvcGhvbmVHYWluPWZ1bmN0aW9uKCl7T1Qud2FybigiRml4bWU6IEhhdmVuJ3QgaW1wbGVtZW50ZWQgc2V0TWljcm9waG9uZUdhaW4iKX07dGhpcy5nZXRNaWNyb3Bob25lR2Fpbj1mdW5jdGlvbigpe09ULndhcm4oIkZpeG1lOiBIYXZlbid0IGltcGxlbWVudGVkIGdldE1pY3JvcGhvbmVHYWluIik7cmV0dXJuIDAuNX07dGhpcy5zZXRDYW1lcmE9ZnVuY3Rpb24oKXtPVC53YXJuKCJGaXhtZTogSGF2ZW4ndCBpbXBsZW1lbnRlZCBzZXRDYW1lcmEiKX07dGhpcy5zZXRNaWNyb3Bob25lPWZ1bmN0aW9uKCl7T1Qud2FybigiRml4bWU6IEhhdmVuJ3QgaW1wbGVtZW50ZWQgc2V0TWljcm9waG9uZSIpfTsKT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGhpcyx7aWQ6e2dldDpmdW5jdGlvbigpe3JldHVybiBmfSxlbnVtZXJhYmxlOiEwfSxndWlkOntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gYn0sZW51bWVyYWJsZTohMH0sc3RyZWFtOntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gY30sc2V0OmZ1bmN0aW9uKGEpe2M9YX0sZW51bWVyYWJsZTohMH0sc3RyZWFtSWQ6e2dldDpmdW5jdGlvbigpe3JldHVybiFjP251bGw6Yy5pZH0sZW51bWVyYWJsZTohMH0sdGFyZ2V0RWxlbWVudDp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGQuZG9tRWxlbWVudH19LGRvbUlkOntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gZn19LHNlc3Npb246e2dldDpmdW5jdGlvbigpe3JldHVybiBofSxzZXQ6ZnVuY3Rpb24oYSl7aD1hfSxlbnVtZXJhYmxlOiEwfSxpc1dlYlJUQzp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuITB9fSxsb2FkaW5nOntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gYSYmYS5sb2FkaW5nfX19KTtPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcy5fLAoid2ViUnRjU3RyZWFtIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGV9fSk7dGhpcy5vbigic3R5bGVWYWx1ZUNoYW5nZWQiLGZ1bmN0aW9uKGEsYil7aWYocClzd2l0Y2goYSl7Y2FzZSAibmFtZURpc3BsYXlNb2RlIjpwLm5hbWUuc2V0RGlzcGxheU1vZGUoYil9fSx0aGlzKTtvPW5ldyBPVC5QdWJsaXNoaW5nU3RhdGUoZnVuY3Rpb24oYSl7T1QuZXJyb3IoIlB1Ymxpc2hlciBTdGF0ZSBDaGFuZ2UgRmFpbGVkOiAiLGEubWVzc2FnZSk7T1QuZGVidWcoYSl9KX1lbHNlIE9ULnVwZ3JhZGVTeXN0ZW1SZXF1aXJlbWVudHMoKX07T1QuUHVibGlzaGVyLm5leHRJZD1PVC4kLnV1aWR9KSh3aW5kb3cpOwooZnVuY3Rpb24oKXtPVC5TdWJzY3JpYmVyPWZ1bmN0aW9uKGcsYil7dmFyIGY9T1QuJC51dWlkKCksYT1nfHxmLGQsYyxlLGgsaSxrLGo9Yi5zZXNzaW9uLGwsbSxwLG49T1QuJC5jbG9uZShiKSxyPW5ldyBPVC5BbmFseXRpY3MscT01MCxvLHMseD17dGltZVN0YW1wOk9ULiQubm93KCl9O2lmKGope09ULiQuZXZlbnRpbmcodGhpcyk7T1QuU3R5bGFibGVDb21wb25lbnQodGhpcyx7bmFtZURpc3BsYXlNb2RlOiJhdXRvIixidXR0b25EaXNwbGF5TW9kZToiYXV0byIsYmFja2dyb3VuZEltYWdlVVJJOm51bGx9KTt2YXIgdj1mdW5jdGlvbihhLGIsYyxkKXtyLmxvZ0V2ZW50KHthY3Rpb246YSx2YXJpYXRpb246YixwYXlsb2FkX3R5cGU6YyxwYXlsb2FkOmQsc3RyZWFtX2lkOmg/aC5pZDpudWxsLHNlc3Npb25faWQ6aj9qLnNlc3Npb25JZDpudWxsLGNvbm5lY3Rpb25faWQ6aiYmai5jb25uZWN0ZWQ/ai5jb25uZWN0aW9uLmNvbm5lY3Rpb25JZDpudWxsLHBhcnRuZXJfaWQ6aiYmai5jb25uZWN0ZWQ/Cmouc2Vzc2lvbkluZm8ucGFydG5lcklkOm51bGwsd2lkZ2V0X2lkOmYsd2lkZ2V0X3R5cGU6IlN1YnNjcmliZXIifSl9LHk9ZnVuY3Rpb24oKXtpZihvLnN1YnNjcmliaW5nJiZqJiZqLmNvbm5lY3RlZCl7dmFyIGE9e3dpZGdldF90eXBlOiJTdWJzY3JpYmVyIixzdHJlYW1fdHlwZToiV2ViUlRDIixzZXNzaW9uX2lkOmo/ai5zZXNzaW9uSWQ6bnVsbCxjb25uZWN0aW9uSWQ6aj9qLmNvbm5lY3Rpb24uY29ubmVjdGlvbklkOm51bGwsbWVkaWFfc2VydmVyX25hbWU6aj9qLnNlc3Npb25JbmZvLm1lc3NhZ2luZ1NlcnZlcjpudWxsLHAycEZsYWc6aj9qLnNlc3Npb25JbmZvLnAycEVuYWJsZWQ6ITEscGFydG5lcl9pZDpqP2ouYXBpS2V5Om51bGwsc3RyZWFtX2lkOmguaWQsd2lkZ2V0X2lkOmYsdmVyc2lvbjpPVC5wcm9wZXJ0aWVzLnZlcnNpb24sZHVyYXRpb246cGFyc2VJbnQoT1QuJC5ub3coKS1sLDEwKSxyZW1vdGVfY29ubmVjdGlvbl9pZDpoLmNvbm5lY3Rpb24uY29ubmVjdGlvbklkfTsKay5nZXRTdGF0cyh4LGZ1bmN0aW9uKGIpe2lmKGIpZm9yKHN0YXRfaW5kZXggaW4gYilhW3N0YXRfaW5kZXhdPWJbc3RhdF9pbmRleF07ci5sb2dRT1MoYSl9KX19LEI9ZnVuY3Rpb24oKXshby5zdWJzY3JpYmluZyYmYyYmKE9ULmRlYnVnKCJPVC5TdWJzY3JpYmVyLm9uTG9hZGVkIiksby5zZXQoIlN1YnNjcmliaW5nIiksbD1PVC4kLm5vdygpLHYoImNyZWF0ZVBlZXJDb25uZWN0aW9uIiwiU3VjY2VzcyIsInBjY3xoYXNSZWxheUNhbmRpZGF0ZXMiLFtwYXJzZUludChsLW0sMTApLGsmJmsuaGFzUmVsYXlDYW5kaWRhdGVzXS5qb2luKCJ8IikpLHA9c2V0SW50ZXJ2YWwoeSwzRTQpLHMmJihzPW51bGwsdGhpcy5zdWJzY3JpYmVUb1ZpZGVvKCExKSksZC5sb2FkaW5nPSExLEUuY2FsbCh0aGlzKSx0aGlzLnRyaWdnZXIoInN1YnNjcmliZVN1Y2Nlc3MiLHRoaXMpLHRoaXMudHJpZ2dlcigibG9hZGVkIix0aGlzKSx2KCJzdWJzY3JpYmUiLCJTdWNjZXNzIiwic3RyZWFtSWQiLGguaWQpKX0sCno9ZnVuY3Rpb24oKXtPVC5kZWJ1ZygiT1QuU3Vic2NyaWJlciBoYXMgYmVlbiBkaXNjb25uZWN0ZWQgZnJvbSB0aGUgUHVibGlzaGVyJ3MgUGVlckNvbm5lY3Rpb24iKTtvLmF0dGVtcHRpbmdUb1N1YnNjcmliZT8oby5zZXQoIkZhaWxlZCIpLHRoaXMudHJpZ2dlcigic3Vic2NyaWJlRXJyb3IiLCJDbGllbnREaXNjb25uZWN0ZWQiKSk6by5zdWJzY3JpYmluZyYmby5zZXQoIkZhaWxlZCIpO3RoaXMuZGlzY29ubmVjdCgpfSx3PWZ1bmN0aW9uKGEsYil7by5hdHRlbXB0aW5nVG9TdWJzY3JpYmU/KHYoImNyZWF0ZVBlZXJDb25uZWN0aW9uIiwiRmFpbHVyZSIsInJlYXNvbnxoYXNSZWxheUNhbmRpZGF0ZXMiLFsiU3Vic2NyaWJlciBQZWVyQ29ubmVjdGlvbiBFcnJvcjogIitiLGsmJmsuaGFzUmVsYXlDYW5kaWRhdGVzXS5qb2luKCJ8IikpLG8uc2V0KCJGYWlsZWQiKSx0aGlzLnRyaWdnZXIoInN1YnNjcmliZUVycm9yIixiKSk6by5zdWJzY3JpYmluZyYmKG8uc2V0KCJGYWlsZWQiKSwKdGhpcy50cmlnZ2VyKCJlcnJvciIsYikpO3RoaXMuZGlzY29ubmVjdCgpO3YoInN1YnNjcmliZSIsIkZhaWx1cmUiLCJyZWFzb24iLCJTdWJzY3JpYmVyIFBlZXJDb25uZWN0aW9uIEVycm9yOiAiK2IpO09ULmhhbmRsZUpzRXhjZXB0aW9uKCJTdWJzY3JpYmVyIFBlZXJDb25uZWN0aW9uIEVycm9yOiAiK2IsT1QuRXhjZXB0aW9uQ29kZXMuUDJQX0NPTk5FQ1RJT05fRkFJTEVELHtzZXNzaW9uOmosdGFyZ2V0OnRoaXN9KTtkJiZkLmFkZEVycm9yKGIpfSxEPWZ1bmN0aW9uKGEpe09ULmRlYnVnKCJPVC5TdWJzY3JpYmVyLm9uUmVtb3RlU3RyZWFtQWRkZWQiKTtvLnNldCgiQmluZGluZ1JlbW90ZVN0cmVhbSIpO3RoaXMuc3Vic2NyaWJlVG9BdWRpbyhuLnN1YnNjcmliZVRvQXVkaW8pO3ZhciBiPXM7dGhpcy5zdWJzY3JpYmVUb1ZpZGVvKG4uc3Vic2NyaWJlVG9WaWRlbyk7cz1iO2I9bmV3IE9ULlZpZGVvRWxlbWVudDtiLnNldEF1ZGlvVm9sdW1lKHEpO2Iub24oe3N0cmVhbUJvdW5kOkIsCmxvYWRFcnJvcjp3LGVycm9yOnd9LHRoaXMpO2IuYmluZFRvU3RyZWFtKGEpO2M9ZC52aWRlbz1iO2Mub3JpZW50YXRpb249e3dpZHRoOmgudmlkZW9EaW1lbnNpb25zLndpZHRoLGhlaWdodDpoLnZpZGVvRGltZW5zaW9ucy5oZWlnaHQsdmlkZW9PcmllbnRhdGlvbjpoLnZpZGVvRGltZW5zaW9ucy5vcmllbnRhdGlvbn07digiY3JlYXRlUGVlckNvbm5lY3Rpb24iLCJTdHJlYW1BZGRlZCIsIiIsIiIpO3RoaXMudHJpZ2dlcigic3RyZWFtQWRkZWQiLHRoaXMpfSxDPWZ1bmN0aW9uKGEpe09ULmRlYnVnKCJPVC5TdWJzY3JpYmVyLm9uU3RyZWFtUmVtb3ZlZCIpO2Muc3RyZWFtPT1hJiYoYy5kZXN0cm95KCksYz1udWxsKTt0aGlzLnRyaWdnZXIoInN0cmVhbVJlbW92ZWQiLHRoaXMpfSxBPWZ1bmN0aW9uKGEpe3N3aXRjaChhLmNoYW5nZWRQcm9wZXJ0eSl7Y2FzZSAib3JpZW50YXRpb24iOmMub3JpZW50YXRpb249e3dpZHRoOmgudmlkZW9EaW1lbnNpb25zLndpZHRoLGhlaWdodDpoLnZpZGVvRGltZW5zaW9ucy5oZWlnaHQsCnZpZGVvT3JpZW50YXRpb246aC52aWRlb0RpbWVuc2lvbnMub3JpZW50YXRpb259O2JyZWFrO2Nhc2UgImhhc1ZpZGVvIjpkJiYoZC5zaG93UG9zdGVyPSEoaC5oYXNWaWRlbyYmbi5zdWJzY3JpYmVUb1ZpZGVvKSl9fSxFPWZ1bmN0aW9uKCl7ZT0obmV3IE9ULkNocm9tZSh7cGFyZW50OmQuZG9tRWxlbWVudH0pKS5zZXQoe25hbWU6bmV3IE9ULkNocm9tZS5OYW1lUGFuZWwoe25hbWU6bi5uYW1lLG1vZGU6dGhpcy5nZXRTdHlsZSgibmFtZURpc3BsYXlNb2RlIil9KSxvcGVudG9rQnV0dG9uOm5ldyBPVC5DaHJvbWUuT3BlblRva0J1dHRvbn0pLm9uKHttdXRlZDpmdW5jdGlvbigpe30sdW5tdXRlZDpmdW5jdGlvbigpe319KX07dGhpcy5yZWNvcmRRT1M9ZnVuY3Rpb24oKXt5KCl9O3RoaXMuc3Vic2NyaWJlPWZ1bmN0aW9uKGIpe09ULmRlYnVnKCJPVC5TdWJzY3JpYmVyOiBzdWJzY3JpYmUgdG8gIitiLmlkKTtpZihvLnN1YnNjcmliaW5nKXJldHVybiBPVC5lcnJvcigiT1QuU3Vic2NyaWJlci5TdWJzY3JpYmU6IENhbm5vdCBzdWJzY3JpYmUsIGFscmVhZHkgc3Vic2NyaWJpbmcuIiksCiExO28uc2V0KCJJbml0Iik7aWYoIWIpcmV0dXJuIE9ULmVycm9yKCJPVC5TdWJzY3JpYmVyOiBObyBzdHJlYW0gcGFyYW1ldGVyLiIpLCExO2lmKGgpcmV0dXJuIE9ULmVycm9yKCJPVC5TdWJzY3JpYmVyOiBBbHJlYWR5IHN1YnNjcmliZWQiKSwhMTtoPWI7aC5vbih7dXBkYXRlZDpBLGRlc3Ryb3llZDp0aGlzLmRpc2Nvbm5lY3R9LHRoaXMpO2k9Yi5jb25uZWN0aW9uLmNvbm5lY3Rpb25JZDtuLm5hbWU9aC5uYW1lO24uY2xhc3NOYW1lcz0iT1Rfcm9vdCBPVF9zdWJzY3JpYmVyIjtuLnN0eWxlJiZ0aGlzLnNldFN0eWxlKG4uc3R5bGUsbnVsbCwhMCk7bi5hdWRpb1ZvbHVtZSYmdGhpcy5zZXRBdWRpb1ZvbHVtZShuLmF1ZGlvVm9sdW1lKTtuLnN1YnNjcmliZVRvQXVkaW89T1QuJC5jYXN0VG9Cb29sZWFuKG4uc3Vic2NyaWJlVG9BdWRpbywhMCk7bi5zdWJzY3JpYmVUb1ZpZGVvPU9ULiQuY2FzdFRvQm9vbGVhbihuLnN1YnNjcmliZVRvVmlkZW8sITApO2Q9bmV3IE9ULldpZGdldFZpZXcoZywKbik7YT1kLmRvbUlkOyFuLnN1YnNjcmliZVRvVmlkZW8mJiJDaHJvbWUiPT1PVC4kLmJyb3dzZXIoKSYmKHM9ITAsbi5zdWJzY3JpYmVUb1ZpZGVvPSEwKTttPU9ULiQubm93KCk7aC5jb25uZWN0aW9uLmlkIT09ai5jb25uZWN0aW9uLmlkPyh2KCJjcmVhdGVQZWVyQ29ubmVjdGlvbiIsIkF0dGVtcHQiLCIiLCIiKSxvLnNldCgiQ29ubmVjdGluZ1RvUGVlciIpLGs9bmV3IE9ULlN1YnNjcmliZXJQZWVyQ29ubmVjdGlvbihoLmNvbm5lY3Rpb24saixoLG4pLGsub24oe2Rpc2Nvbm5lY3RlZDp6LGVycm9yOncscmVtb3RlU3RyZWFtQWRkZWQ6RCxyZW1vdGVTdHJlYW1SZW1vdmVkOkN9LHRoaXMpLGsuaW5pdCgpKToodigiY3JlYXRlUGVlckNvbm5lY3Rpb24iLCJBdHRlbXB0IiwiIiwiIiksRC5jYWxsKHRoaXMsai5nZXRQdWJsaXNoZXJGb3JTdHJlYW0oaCkuXy53ZWJSdGNTdHJlYW0pKTt2KCJzdWJzY3JpYmUiLCJBdHRlbXB0Iiwic3RyZWFtSWQiLGguaWQpO3JldHVybiB0aGlzfTt0aGlzLmRlc3Ryb3k9CmZ1bmN0aW9uKGIsYyl7Y2xlYXJJbnRlcnZhbChwKTtwPW51bGw7dGhpcy5kaXNjb25uZWN0KCk7ZSYmKGUuZGVzdHJveSgpLGU9bnVsbCk7ZCYmKGQuZGVzdHJveSgpLGQ9bnVsbCk7aCYmIWguZGVzdHJveWVkJiZ2KCJ1bnN1YnNjcmliZSIsbnVsbCwic3RyZWFtSWQiLGguaWQpO249aj1oPWE9bnVsbDshMCE9PWMmJnRoaXMuZGlzcGF0Y2hFdmVudChuZXcgT1QuRGVzdHJveWVkRXZlbnQoT1QuRXZlbnQubmFtZXMuU1VCU0NSSUJFUl9ERVNUUk9ZRUQsdGhpcyxiKSx0aGlzLm9mZi5iaW5kKHRoaXMpKTtyZXR1cm4gdGhpc307dGhpcy5kaXNjb25uZWN0PWZ1bmN0aW9uKCl7by5zZXQoIk5vdFN1YnNjcmliaW5nIik7YyYmKGMuZGVzdHJveSgpLGM9bnVsbCk7ayYmKGsuZGVzdHJveSgpLGs9bnVsbCx2KCJkaXNjb25uZWN0IiwiUGVlckNvbm5lY3Rpb24iLCJzdHJlYW1JZCIsaC5pZCkpfTt0aGlzLnByb2Nlc3NNZXNzYWdlPWZ1bmN0aW9uKGEsYixjKXtPVC5kZWJ1ZygiT1QuU3Vic2NyaWJlci5wcm9jZXNzTWVzc2FnZTogUmVjZWl2ZWQgIisKYSsiIG1lc3NhZ2UgZnJvbSAiK2IuaWQpO09ULmRlYnVnKGMpO2khPWIuaWQmJihpPWIuaWQpO2smJmsucHJvY2Vzc01lc3NhZ2UoYSxjKX07dGhpcy51cGRhdGVRdWFsaXR5PWZ1bmN0aW9uKCl7dGhpcy5zdWJzY3JpYmVUb1ZpZGVvKCExKTt0aGlzLmRpc3BhdGNoRXZlbnQobmV3IE9ULkV2ZW50KCJ2aWRlb0Rpc2FibGVkIikpfTt0aGlzLmdldEltZ0RhdGE9ZnVuY3Rpb24oKXtyZXR1cm4hdGhpcy5zdWJzY3JpYmluZz8oT1QuZXJyb3IoIk9ULlN1YnNjcmliZXIuZ2V0SW1nRGF0YTogQ2Fubm90IGdldEltZ0RhdGEgYmVmb3JlIHRoZSBTdWJzY3JpYmVyIGlzIHN1YnNjcmliaW5nLiIpLG51bGwpOmMuaW1nRGF0YX07dGhpcy5zZXRBdWRpb1ZvbHVtZT1mdW5jdGlvbihhKXthPXBhcnNlSW50KGEsMTApO2lmKGlzTmFOKGEpKXJldHVybiBPVC5lcnJvcigiT1QuU3Vic2NyaWJlci5zZXRBdWRpb1ZvbHVtZTogdmFsdWUgc2hvdWxkIGJlIGFuIGludGVnZXIgYmV0d2VlbiAwIGFuZCAxMDAiKSwKdGhpcztxPU1hdGgubWF4KDAsTWF0aC5taW4oMTAwLGEpKTtxIT1hJiZPVC53YXJuKCJPVC5TdWJzY3JpYmVyLnNldEF1ZGlvVm9sdW1lOiB2YWx1ZSBzaG91bGQgYmUgYW4gaW50ZWdlciBiZXR3ZWVuIDAgYW5kIDEwMCIpO2MmJmMuc2V0QXVkaW9Wb2x1bWUocSk7cmV0dXJuIHRoaXN9O3RoaXMuZ2V0QXVkaW9Wb2x1bWU9ZnVuY3Rpb24oKXtyZXR1cm4gYz9jLmdldEF1ZGlvVm9sdW1lKCk6cX07dGhpcy5zdWJzY3JpYmVUb0F1ZGlvPWZ1bmN0aW9uKGEpe2E9T1QuJC5jYXN0VG9Cb29sZWFuKGEsITApO2smJihrLnN1YnNjcmliZVRvQXVkaW8oYSksaiYmKGgmJmEhPT1uLnN1YnNjcmliZVRvQXVkaW8pJiZqLl8ubW9kaWZ5U3Vic2NyaWJlcih0aGlzLCJoYXNBdWRpbyIsYSkpO24uc3Vic2NyaWJlVG9BdWRpbz1hO3JldHVybiB0aGlzfTt0aGlzLnN1YnNjcmliZVRvVmlkZW89ZnVuY3Rpb24oYSl7aWYocyYmITA9PWEpcz0hMTtlbHNlIHJldHVybiBhPU9ULiQuY2FzdFRvQm9vbGVhbihhLAohMCksZCYmKGQuc2hvd1Bvc3Rlcj0hKGEmJmguaGFzVmlkZW8pLGEmJmQudmlkZW8mJihkLmxvYWRpbmc9YSxkLnZpZGVvLndoZW5UaW1lSW5jcmVtZW50cyhmdW5jdGlvbigpe2QubG9hZGluZz0hMX0sdGhpcykpKSxrJiYoay5zdWJzY3JpYmVUb1ZpZGVvKGEpLGomJihoJiZhIT09bi5zdWJzY3JpYmVUb1ZpZGVvKSYmai5fLm1vZGlmeVN1YnNjcmliZXIodGhpcywiaGFzVmlkZW8iLGEpKSxuLnN1YnNjcmliZVRvVmlkZW89YSx0aGlzfTtPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0aGlzLHtpZDp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGF9LGVudW1lcmFibGU6ITB9LHdpZGdldElkOntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gZn19LHN0cmVhbTp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGh9LGVudW1lcmFibGU6ITB9LHN0cmVhbUlkOntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4haD9udWxsOmguaWR9LGVudW1lcmFibGU6ITB9LHRhcmdldEVsZW1lbnQ6e2dldDpmdW5jdGlvbigpe3JldHVybiBjPwpjLmRvbUVsZW1lbnQ6bnVsbH19LHN1YnNjcmliaW5nOntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gby5zdWJzY3JpYmluZ30sZW51bWVyYWJsZTohMH0saXNXZWJSVEM6e2dldDpmdW5jdGlvbigpe3JldHVybiEwfX0sbG9hZGluZzp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGQmJmQubG9hZGluZ319LHNlc3Npb246e2dldDpmdW5jdGlvbigpe3JldHVybiBqfX19KTt0aGlzLm9uKCJzdHlsZVZhbHVlQ2hhbmdlZCIsZnVuY3Rpb24oYSxiKXtpZihlKXN3aXRjaChhKXtjYXNlICJuYW1lRGlzcGxheU1vZGUiOmUubmFtZS5zZXREaXNwbGF5TW9kZShiKX19LHRoaXMpO289bmV3IE9ULlN1YnNjcmliaW5nU3RhdGUoZnVuY3Rpb24oYSl7T1QuZXJyb3IoIlN1YnNjcmliZXIgU3RhdGUgQ2hhbmdlIEZhaWxlZDogIixhLm1lc3NhZ2UpO09ULmRlYnVnKGEpfSl9ZWxzZSBPVC5oYW5kbGVKc0V4Y2VwdGlvbigiU3Vic2NyaWJlciBtdXN0IGJlIHBhc3NlZCBhIHNlc3Npb24gb3B0aW9uIiwyRTMse3Nlc3Npb246aiwKdGFyZ2V0OnRoaXN9KX19KSh3aW5kb3cpOwooZnVuY3Rpb24oKXtPVC5TZXNzaW9uSW5mbz1mdW5jdGlvbihiKXt2YXIgZj1udWxsO3RoaXMuc2Vzc2lvblN0YXR1cz10aGlzLnBhcnRuZXJJZD10aGlzLnNlc3Npb25JZD1udWxsO3RoaXMucDJwRW5hYmxlZD0hMTt0aGlzLmljZVNlcnZlcnM9dGhpcy5tZXNzYWdpbmdTZXJ2ZXI9bnVsbDtPVC5sb2coIlNlc3Npb25JbmZvIFJlc3BvbnNlOiIpO09ULmxvZyhiKTtiJiYoYi5kb2N1bWVudEVsZW1lbnQmJm51bGwhPT1iLmRvY3VtZW50RWxlbWVudC5maXJzdEVsZW1lbnRDaGlsZCkmJihmPWIuZG9jdW1lbnRFbGVtZW50LmZpcnN0RWxlbWVudENoaWxkKTtiPWYuZmlyc3RFbGVtZW50Q2hpbGQ7ZG8gc3dpdGNoKGIubG9jYWxOYW1lKXtjYXNlICJzZXNzaW9uX2lkIjp0aGlzLnNlc3Npb25JZD1iLnRleHRDb250ZW50O2JyZWFrO2Nhc2UgInBhcnRuZXJfaWQiOnRoaXMucGFydG5lcklkPWIudGV4dENvbnRlbnQ7YnJlYWs7Y2FzZSAic2Vzc2lvbl9zdGF0dXMiOnRoaXMuc2Vzc2lvblN0YXR1cz1iLnRleHRDb250ZW50OwpicmVhaztjYXNlICJtZXNzYWdpbmdfc2VydmVyX3VybCI6dGhpcy5tZXNzYWdpbmdTZXJ2ZXI9Yi50ZXh0Q29udGVudDticmVhaztjYXNlICJpY2Vfc2VydmVycyI6dGhpcy5pY2VTZXJ2ZXJzPW5vcm1hbGlzZUljZVNlcnZlcnMocGFyc2VJY2VTZXJ2ZXJzWG1sKGIuY2hpbGROb2RlcykpOzA9PT10aGlzLmljZVNlcnZlcnMubGVuZ3RoJiYoT1Qud2FybigiU2Vzc2lvbkluZm8gY29udGFpbmVkIG5vdCBJQ0UgU2VydmVycywgdXNpbmcgdGhlIGRlZmF1bHQiKSx0aGlzLmljZVNlcnZlcnM9W3t1cmw6InN0dW46c3R1bi5sLmdvb2dsZS5jb206MTkzMDIifV0pO2JyZWFrO2Nhc2UgInByb3BlcnRpZXMiOmlmKGY9Yi5maXJzdEVsZW1lbnRDaGlsZCl7ZG8gaWYoInAycCI9PT1mLmxvY2FsTmFtZSYmbnVsbCE9PWYuZmlyc3RFbGVtZW50Q2hpbGQpe3RoaXMucDJwRW5hYmxlZD0iZW5hYmxlZCI9PT1mLmZpcnN0RWxlbWVudENoaWxkLnRleHRDb250ZW50O2JyZWFrfXdoaWxlKGY9Zi5uZXh0RWxlbWVudFNpYmxpbmcpCn19d2hpbGUoYj1iLm5leHRFbGVtZW50U2libGluZyl9O09ULlNlc3Npb25JbmZvLmdldD1mdW5jdGlvbihiLGYsYSl7dmFyIGQ9T1QucHJvcGVydGllcy5hcGlVUkwrIi9zZXNzaW9uLyIrYi5pZCsiP2V4dGVuZGVkPXRydWUiLGM9T1QuJC5ub3coKTtiLmxvZ0V2ZW50KCJnZXRTZXNzaW9uSW5mbyIsIkF0dGVtcHQiLCJhcGlfdXJsIixPVC5wcm9wZXJ0aWVzLmFwaVVSTCk7T1QuJC5nZXRYTUwoZCx7aGVhZGVyczp7IlgtVEItVE9LRU4tQVVUSCI6Yi50b2tlbiwiWC1UQi1WRVJTSU9OIjoxfSxzdWNjZXNzOmZ1bmN0aW9uKGQpe2IubG9nRXZlbnQoIkluc3RydW1lbnRhdGlvbiIsbnVsbCwiZ3NpIixPVC4kLm5vdygpLWMpO3ZhciBnPXBhcnNlRXJyb3JGcm9tWE1MRG9jdW1lbnQoZCk7ITE9PT1nP29uR2V0UmVzcG9uc2VDYWxsYmFjayhiLGYsZCk6b25HZXRFcnJvckNhbGxiYWNrKGIsYSxnKX0sZXJyb3I6ZnVuY3Rpb24oYyl7b25HZXRFcnJvckNhbGxiYWNrKGIsYSxwYXJzZUVycm9yRnJvbVhNTERvY3VtZW50KGMudGFyZ2V0LnJlc3BvbnNlWE1MKSl9fSl9Owp2YXIgZz17fTtnWyI0MDQiXT1PVC5FeGNlcHRpb25Db2Rlcy5JTlZBTElEX1NFU1NJT05fSUQ7Z1siNDAzIl09T1QuRXhjZXB0aW9uQ29kZXMuQVVUSEVOVElDQVRJT05fRVJST1I7cGFyc2VFcnJvckZyb21YTUxEb2N1bWVudD1mdW5jdGlvbihiKXtpZihiJiZiLmRvY3VtZW50RWxlbWVudCYmbnVsbCE9PWIuZG9jdW1lbnRFbGVtZW50LmZpcnN0RWxlbWVudENoaWxkKXt2YXIgYj1iLmV2YWx1YXRlKCIvL2Vycm9yIixiLmRvY3VtZW50RWxlbWVudCxudWxsLFhQYXRoUmVzdWx0Lk9SREVSRURfTk9ERV9TTkFQU0hPVF9UWVBFLG51bGwpLGY9Yi5zbmFwc2hvdExlbmd0aDtpZigwPT09ZilyZXR1cm4hMTtmb3IoOzA8ZjspcmV0dXJuIGI9Yi5zbmFwc2hvdEl0ZW0oMCkse2NvZGU6Yi5nZXRBdHRyaWJ1dGUoImNvZGUiKSxtZXNzYWdlOmIuZmlyc3RFbGVtZW50Q2hpbGQuZ2V0QXR0cmlidXRlKCJtZXNzYWdlIil9fXJldHVybntjb2RlOm51bGwsbWVzc2FnZToiVW5rbm93biBlcnJvcjogZ2V0U2Vzc2lvbkluZm8gWE1MIHJlc3BvbnNlIHdhcyBiYWRseSBmb3JtZWQifX07Cm9uR2V0UmVzcG9uc2VDYWxsYmFjaz1mdW5jdGlvbihiLGYsYSl7Yi5sb2dFdmVudCgiZ2V0U2Vzc2lvbkluZm8iLCJTdWNjZXNzIiwiYXBpX3VybCIsT1QucHJvcGVydGllcy5hcGlVUkwpO2YobmV3IE9ULlNlc3Npb25JbmZvKGEpKX07b25HZXRFcnJvckNhbGxiYWNrPWZ1bmN0aW9uKGIsZixhKXtUQi5oYW5kbGVKc0V4Y2VwdGlvbigiVEIuU2Vzc2lvbkluZm9FcnJvciA6OiBVbmFibGUgdG8gZ2V0IHNlc3Npb24gaW5mbyAiK2EubWVzc2FnZSxnW2EuY29kZV0se3Nlc3Npb246Yn0pO2IubG9nRXZlbnQoImdldFNlc3Npb25JbmZvIiwiRmFpbHVyZSIsImVycm9yTWVzc2FnZSIsIlRCLlNlc3Npb25JbmZvRXJyb3IgOjogVW5hYmxlIHRvIGdldCBzZXNzaW9uIGluZm8gIithLm1lc3NhZ2UpO2YoYSxiKX07cGFyc2VJY2VTZXJ2ZXJzWG1sPWZ1bmN0aW9uKGIpe2Zvcih2YXIgZj1bXSxhLGQsYz0wLGU9Yi5sZW5ndGg7YzxlOysrYykiaWNlX3NlcnZlciI9PT1iW2NdLmxvY2FsTmFtZSYmCihkPWJbY10uYXR0cmlidXRlcyxhPXt1cmw6ZC5nZXROYW1lZEl0ZW0oInVybCIpLm5vZGVWYWx1ZX0sZC5nZXROYW1lZEl0ZW0oImNyZWRlbnRpYWwiKSYmZC5nZXROYW1lZEl0ZW0oImNyZWRlbnRpYWwiKS5ub2RlVmFsdWUubGVuZ3RoJiYoYS5jcmVkZW50aWFsPWQuZ2V0TmFtZWRJdGVtKCJjcmVkZW50aWFsIikubm9kZVZhbHVlKSxmLnB1c2goYSkpO3JldHVybiBmfTtub3JtYWxpc2VJY2VTZXJ2ZXJzPWZ1bmN0aW9uKGIpe3ZhciBmPW5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goLyhGaXJlZm94KVwvKFswLTldK1wuWzAtOV0rKS8pLGE9Zj9wYXJzZUZsb2F0KGZbMl0sMTApOnZvaWQgMCxkO3JldHVybiBiLm1hcChmdW5jdGlvbihiKXtpZigidHVybjoiIT09Yi51cmwudHJpbSgpLnN1YnN0cigwLDUpKXJldHVybiBiO2lmKG51bGwhPT1mKXtpZigyNT5hKXJldHVybnt1cmw6Yi51cmwucmVwbGFjZSgidHVybjoiLCJzdHVuOiIpfTsyNz5hJiYtMSE9PWIudXJsLmluZGV4T2YoIj8iKSYmCihiLnVybD1iLnVybC50cmltKCkuc3BsaXQoIj8iKVswXSl9ZD1iLnVybC50cmltKCkuc3BsaXQoL1s6QF0vKTtyZXR1cm57dXNlcm5hbWU6ZFsxXSxjcmVkZW50aWFsOmIuY3JlZGVudGlhbCx1cmw6ZFswXSsiOiIrZFsyXX19KX19KSh3aW5kb3cpOyhmdW5jdGlvbigpe09ULkNhcGFiaWxpdGllcz1mdW5jdGlvbihnKXt0aGlzLnB1Ymxpc2g9LTEhPT1nLmluZGV4T2YoInB1Ymxpc2giKT8xOjA7dGhpcy5zdWJzY3JpYmU9LTEhPT1nLmluZGV4T2YoInN1YnNjcmliZSIpPzE6MDt0aGlzLmZvcmNlVW5wdWJsaXNoPS0xIT09Zy5pbmRleE9mKCJmb3JjZXVucHVibGlzaCIpPzE6MDt0aGlzLmZvcmNlRGlzY29ubmVjdD0tMSE9PWcuaW5kZXhPZigiZm9yY2VkaXNjb25uZWN0Iik/MTowO3RoaXMuc3VwcG9ydHNXZWJSVEM9T1QuJC5zdXBwb3J0c1dlYlJUQygpPzE6MH19KSh3aW5kb3cpOwooZnVuY3Rpb24oKXt2YXIgZz1mdW5jdGlvbihiLGYsYSxkKXt2YXIgYyxlPXt9LGc9ZnVuY3Rpb24oKXtjbGVhclRpbWVvdXQoYyk7Yi5vZmYoImV4Y2VwdGlvbiIsaSl9LGk9ZnVuY3Rpb24oYSl7ZS5oYXNPd25Qcm9wZXJ0eShhLmNvZGUpJiZ0aGlzLmZhaWxlZChlW2EuY29kZV0pfTt0aGlzLmZhaWxzT25FeGNlcHRpb25Db2Rlcz1mdW5jdGlvbihhKXtlPWF9O3RoaXMuc3VjY2VlZGVkPWZ1bmN0aW9uKCl7ZygpO2NvbXBsZXRpb25IYW5kbGVyJiZPVC4kLmNhbGxBc3luYyhjb21wbGV0aW9uSGFuZGxlcixudWxsKX07dGhpcy5mYWlsZWQ9ZnVuY3Rpb24oYSl7ZygpO2NvbXBsZXRpb25IYW5kbGVyJiZPVC4kLmNhbGxBc3luYyhjb21wbGV0aW9uSGFuZGxlcixuZXcgT1QuRXJyb3IobnVsbCxhKSl9O2Iub24oImV4Y2VwdGlvbiIsaSx0aGlzKTtjPXNldFRpbWVvdXQoZnVuY3Rpb24oKXt0aGlzLmZhaWxlZChkJiZkLnRpbWVvdXRNZXNzYWdlP2QudGltZW91dE1lc3NhZ2U6IlRpbWVkIG91dCB3aGlsZSB3YWl0aW5nIGZvciB0aGUgc2VydmVyIHRvIHJlc3BvbmQuIil9LmJpbmQodGhpcyksCjNFNCl9O09ULlNlc3Npb249ZnVuY3Rpb24oYil7aWYoT1QuY2hlY2tTeXN0ZW1SZXF1aXJlbWVudHMoKSl7dmFyIGY9ITAsYSxkLGMsZT1PVC4kLnV1aWQoKSxoPW5ldyBPVC5BbmFseXRpY3MsaT17fSxrPXt9O09ULiQuZXZlbnRpbmcodGhpcyk7dmFyIGo9T1QuJC5zdGF0YWJsZSh0aGlzLFsiZGlzY29ubmVjdGVkIiwiY29ubmVjdGluZyIsImNvbm5lY3RlZCIsImRpc2Nvbm5lY3RpbmciXSwiZGlzY29ubmVjdGVkIik7dGhpcy5jb25uZWN0aW9ucz1uZXcgT1QuQ29sbGVjdGlvbjt0aGlzLnN0cmVhbXM9bmV3IE9ULkNvbGxlY3Rpb247dmFyIGw9ZnVuY3Rpb24oYSxiKXtqKCJkaXNjb25uZWN0ZWQiKTtPVC5lcnJvcihhKTt0aGlzLnRyaWdnZXIoInNlc3Npb25Db25uZWN0RmFpbGVkIixhKTtUQi5oYW5kbGVKc0V4Y2VwdGlvbihhLGJ8fE9ULkV4Y2VwdGlvbkNvZGVzLkNPTk5FQ1RfRkFJTEVELHtzZXNzaW9uOnRoaXN9KX0sbT1mdW5jdGlvbihhKXt2YXIgYj1hLnJlYXNvbjsibmV0d29ya1RpbWVkb3V0Ij09CmI/KGI9Im5ldHdvcmtEaXNjb25uZWN0ZWQiLHRoaXMubG9nRXZlbnQoIndlYlNvY2tldENvbm5lY3Rpb24iLCJUaW1lT3V0RGlzY29ubmVjdCIsInJlYXNvbiIsYS5yZWFzb24pKTp0aGlzLmxvZ0V2ZW50KCJ3ZWJTb2NrZXRDb25uZWN0aW9uIiwiRGlzY29ubmVjdGVkIiwicmVhc29uIixhLnJlYXNvbik7dmFyIGM9bmV3IE9ULlNlc3Npb25EaXNjb25uZWN0RXZlbnQoInNlc3Npb25EaXNjb25uZWN0ZWQiLGIpO3MuY2FsbCh0aGlzKTt4LmNhbGwodGhpcyk7YT1mdW5jdGlvbigpe2MuaXNEZWZhdWx0UHJldmVudGVkKCl8fHYuY2FsbCh0aGlzLGMucmVhc29uKX0uYmluZCh0aGlzKTt0aGlzLmRpc3BhdGNoRXZlbnQoYyxhKX0scD1mdW5jdGlvbihhKXthLmlkLm1hdGNoKC9ec3ltcGhvbnlcLi8pfHx0aGlzLmRpc3BhdGNoRXZlbnQobmV3IE9ULkNvbm5lY3Rpb25FdmVudChPVC5FdmVudC5uYW1lcy5DT05ORUNUSU9OX0NSRUFURUQsW2FdKSl9LG49ZnVuY3Rpb24oYSxiKXtpZighYS5pZC5tYXRjaCgvXnN5bXBob255XC4vKSYmCmEuaWQhPT1jLmlkKXtpZihpW2EuaWRdKXt2YXIgZD1pW2EuaWRdO2RlbGV0ZSBpW2EuaWRdOyJmb3JjZURpc2Nvbm5lY3RlZCIhPT1iJiZPVC53YXJuKCJFeHBlY3RlZCBhIGZvcmNlRGlzY29ubmVjdCBmb3IgY29ubmVjdGlvbiAiK2EuaWQrIiwgYnV0IGEgIitiKyIgd2FzIHJlY2VpdmVkIGluc3RlYWQuIik7ZC5zdWNjZWVkZWQoKX10aGlzLmRpc3BhdGNoRXZlbnQobmV3IE9ULkNvbm5lY3Rpb25FdmVudChPVC5FdmVudC5uYW1lcy5DT05ORUNUSU9OX0RFU1RST1lFRCxbYV0sYikpfX0scj1mdW5jdGlvbihhKXt0aGlzLmRpc3BhdGNoRXZlbnQobmV3IE9ULlN0cmVhbUV2ZW50KE9ULkV2ZW50Lm5hbWVzLlNUUkVBTV9DUkVBVEVELFthXSkpfSxxPWZ1bmN0aW9uKGEpe3ZhciBiPWEudGFyZ2V0LGM9YS5jaGFuZ2VkUHJvcGVydHksZD1hLm5ld1ZhbHVlOyJvcmllbnRhdGlvbiI9PT1jJiYoYz0idmlkZW9EaW1lbnNpb25zIixkPXt3aWR0aDpkLndpZHRoLGhlaWdodDpkLmhlaWdodH0pOwp0aGlzLmRpc3BhdGNoRXZlbnQobmV3IE9ULlN0cmVhbVByb3BlcnR5Q2hhbmdlZEV2ZW50KE9ULkV2ZW50Lm5hbWVzLlNUUkVBTV9QUk9QRVJUWV9DSEFOR0VELGIsYyxhLm9sZFZhbHVlLGQpKX0sbz1mdW5jdGlvbihhLGIpe2lmKGtbYS5pZF0pe3ZhciBjPWtbYS5pZF07ZGVsZXRlIGtbYS5pZF07ImZvcmNlVW5wdWJsaXNoZWQiIT09YiYmT1Qud2FybigiRXhwZWN0ZWQgYSBmb3JjZVVucHVibGlzaCBmb3Igc3RyZWFtICIrYS5pZCsiLCBidXQgYSAiK2IrIiBkZXN0cm95ZWQgd2FzIHJlY2VpdmVkIGluc3RlYWQuIik7Yy5zdWNjZWVkZWQoKX12YXIgZD1uZXcgT1QuU3RyZWFtRXZlbnQoInN0cmVhbURlc3Ryb3llZCIsW2FdLGIpLGM9ZnVuY3Rpb24oKXtpZighZC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSl7dmFyIGI9T1QucHVibGlzaGVycy53aGVyZSh7c3RyZWFtSWQ6YS5pZH0pWzBdO2ImJihiLl8udW5wdWJsaXNoRnJvbVNlc3Npb24odGhpcyksYi5kZXN0cm95KCkpO09ULnN1YnNjcmliZXJzLndoZXJlKHtzdHJlYW1JZDphLmlkfSkuZm9yRWFjaChmdW5jdGlvbihhKXthLnNlc3Npb24uaWQ9PT0KdGhpcy5pZCYmdGhpcy51bnN1YnNjcmliZShhKX0sdGhpcyl9fS5iaW5kKHRoaXMpO3RoaXMuZGlzcGF0Y2hFdmVudChkLGMpfSxzPWZ1bmN0aW9uKCl7ZD1hPW51bGw7aigiZGlzY29ubmVjdGVkIik7dGhpcy5jb25uZWN0aW9ucy5kZXN0cm95KCk7dGhpcy5zdHJlYW1zLmRlc3Ryb3koKX0seD1mdW5jdGlvbigpe09ULnB1Ymxpc2hlcnMud2hlcmUoe3Nlc3Npb246dGhpc30pLmZvckVhY2goZnVuY3Rpb24oYSl7YS5kaXNjb25uZWN0KCl9KTtPVC5zdWJzY3JpYmVycy53aGVyZSh7c2Vzc2lvbjp0aGlzfSkuZm9yRWFjaChmdW5jdGlvbihhKXthLmRpc2Nvbm5lY3QoKX0pfSx2PWZ1bmN0aW9uKGEpe09ULnB1Ymxpc2hlcnMud2hlcmUoe3Nlc3Npb246dGhpc30pLmZvckVhY2goZnVuY3Rpb24oYil7Yi5kZXN0cm95KGEpfSk7T1Quc3Vic2NyaWJlcnMud2hlcmUoe3Nlc3Npb246dGhpc30pLmZvckVhY2goZnVuY3Rpb24oYil7Yi5kZXN0cm95KGEpfSl9LHk9ZnVuY3Rpb24oKXtUQi5kZWJ1ZygiT1QuU2Vzc2lvbjogY29ubmVjdGluZyB0byBSYXB0b3IiKTsKYz1uZXcgT1QuUmFwdG9yLlNvY2tldChlLHRoaXMuc2Vzc2lvbkluZm8ubWVzc2FnaW5nU2VydmVyKTtjLmNvbm5lY3QoZCx0aGlzLnNlc3Npb25JbmZvLGZ1bmN0aW9uKGEsYil7YT9sLmNhbGwodGhpcyxhLnJlYXNvbixhLmNvZGUpOihPVC5kZWJ1ZygiT1QuU2Vzc2lvbjogUmVjZWl2ZWQgc2Vzc2lvbiBzdGF0ZSBmcm9tIFJhcHRvciIsYiksaigiY29ubmVjdGVkIiksdGhpcy5jb25uZWN0aW9uLm9uKCJkZXN0cm95ZWQiLG0sdGhpcyksdGhpcy5jb25uZWN0aW9ucy5vbih7YWRkOnAscmVtb3ZlOm59LHRoaXMpLHRoaXMuc3RyZWFtcy5vbih7YWRkOnIscmVtb3ZlOm8sdXBkYXRlOnF9LHRoaXMpLHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgT1QuU2Vzc2lvbkNvbm5lY3RFdmVudChPVC5FdmVudC5uYW1lcy5TRVNTSU9OX0NPTk5FQ1RFRCxiLmNvbm5lY3Rpb25zLGIuc3RyZWFtcyxiLmFyY2hpdmVzKSkpfS5iaW5kKHRoaXMpKX0sQj1mdW5jdGlvbigpe3RoaXMuaXMoImNvbm5lY3RpbmciKSYmCk9ULlNlc3Npb25JbmZvLmdldCh0aGlzLHouYmluZCh0aGlzKSxmdW5jdGlvbihhKXtsLmNhbGwodGhpcyxhLm1lc3NhZ2UrKGEuY29kZT8iICgiK2EuY29kZSsiKSI6IiIpKX0uYmluZCh0aGlzKSl9LHo9ZnVuY3Rpb24oYil7dGhpcy5pcygiY29ubmVjdGluZyIpJiYodGhpcy5zZXNzaW9uSW5mbz1iLHRoaXMuc2Vzc2lvbkluZm8ucGFydG5lcklkJiZ0aGlzLnNlc3Npb25JbmZvLnBhcnRuZXJJZCE9YT8oYT10aGlzLnNlc3Npb25JbmZvLnBhcnRuZXJJZCxsLmNhbGwodGhpcywiQXV0aGVudGljYXRpb24gRXJyb3I6IFRoZSBhcGlLZXkgcGFzc2VkIGludG8gdGhlIHNlc3Npb24uY29ubmVjdCBtZXRob2QgZG9lcyBub3QgbWF0Y2ggdGhlIGFwaUtleSBpbiB0aGUgdG9rZW4gb3Igc2Vzc2lvbiB5b3UgYXJlIHRyeWluZyB0byBjb25uZWN0IHRvLiIsT1QuRXhjZXB0aW9uQ29kZXMuQVVUSEVOVElDQVRJT05fRVJST1IpKTp5LmNhbGwodGhpcykpfTt0aGlzLmxvZ0V2ZW50PWZ1bmN0aW9uKGMsCmQsZixnKXtoLmxvZ0V2ZW50KHthY3Rpb246Yyx2YXJpYXRpb246ZCxwYXlsb2FkX3R5cGU6ZixwYXlsb2FkOmcsc2Vzc2lvbl9pZDpiLHBhcnRuZXJfaWQ6YSx3aWRnZXRfaWQ6ZSx3aWRnZXRfdHlwZToiQ29udHJvbGxlciJ9KX07dGhpcy5jb25uZWN0PWZ1bmN0aW9uKGIsYyxnKXt0aGlzLmlzKCJjb25uZWN0aW5nIiwiY29ubmVjdGVkIik/T1Qud2FybigiT1QuU2Vzc2lvbjogQ2Fubm90IGNvbm5lY3QsIHRoZSBzZXNzaW9uIGlzIGFscmVhZHkgIit0aGlzLnN0YXRlKToocy5jYWxsKHRoaXMpLGooImNvbm5lY3RpbmciKSxkPWMsZj9mPSExOmU9T1QuJC51dWlkKCksYT1iLnRvU3RyaW5nKCksMD09PU9ULkFQSUtFWS5sZW5ndGgmJihPVC5BUElLRVk9YSksZyYmT1QuJC5pc0Z1bmN0aW9uKGcpJiYodGhpcy5vbmNlKE9ULkV2ZW50Lm5hbWVzLlNFU1NJT05fQ09OTkVDVEVELGcuYmluZChudWxsLG51bGwpKSx0aGlzLm9uY2UoInNlc3Npb25Db25uZWN0RmFpbGVkIixnKSksQi5jYWxsKHRoaXMpKX07CnRoaXMuZGlzY29ubmVjdD1mdW5jdGlvbigpe2MmJmMuaXNOb3QoImRpc2Nvbm5lY3RlZCIpPyhqKCJkaXNjb25uZWN0aW5nIiksYy5kaXNjb25uZWN0KCkpOnMuY2FsbCh0aGlzKX07dGhpcy5kZXN0cm95PWZ1bmN0aW9uKCl7dGhpcy5zdHJlYW1zLmRlc3Ryb3koKTt0aGlzLmNvbm5lY3Rpb25zLmRlc3Ryb3koKTt0aGlzLmRpc2Nvbm5lY3QoKX07dGhpcy5wdWJsaXNoPWZ1bmN0aW9uKGQsZixnKXtpZih0aGlzLmlzTm90KCJjb25uZWN0ZWQiKSlyZXR1cm4gaC5sb2dFcnJvcigxMDEwLCJ0Yi5leGNlcHRpb24iLCJXZSBuZWVkIHRvIGJlIGNvbm5lY3RlZCBiZWZvcmUgeW91IGNhbiBwdWJsaXNoIixudWxsLHthY3Rpb246InB1Ymxpc2giLHZhcmlhdGlvbjoiRmFpbHVyZSIscGF5bG9hZF90eXBlOiJyZWFzb24iLHBheWxvYWQ6IldlIG5lZWQgdG8gYmUgY29ubmVjdGVkIGJlZm9yZSB5b3UgY2FuIHB1Ymxpc2giLHNlc3Npb25faWQ6YixwYXJ0bmVyX2lkOmEsd2lkZ2V0SWQ6ZSx3aWRnZXRfdHlwZToiQ29udHJvbGxlciJ9KSwKZyYmT1QuJC5pc0Z1bmN0aW9uKGcpJiZPVC4kLmNhbGxBc3luYyhnLG5ldyBPVC5FcnJvcihPVC5FeGNlcHRpb25Db2Rlcy5OT1RfQ09OTkVDVEVELCJXZSBuZWVkIHRvIGJlIGNvbm5lY3RlZCBiZWZvcmUgeW91IGNhbiBwdWJsaXNoIikpLG51bGw7aWYoIWN8fCFjLnBlcm1pdHRlZFRvKCJwdWJsaXNoIikpcmV0dXJuIHRoaXMubG9nRXZlbnQoInB1Ymxpc2giLCJGYWlsdXJlIiwicmVhc29uIiwiVGhpcyB0b2tlbiBkb2VzIG5vdCBhbGxvdyBwdWJsaXNoaW5nLiBUaGUgcm9sZSBtdXN0IGJlIGF0IGxlYXN0IGBwdWJsaXNoZXJgIHRvIGVuYWJsZSB0aGlzIGZ1bmN0aW9uYWxpdHkiKSxUQi5oYW5kbGVKc0V4Y2VwdGlvbigiVGhpcyB0b2tlbiBkb2VzIG5vdCBhbGxvdyBwdWJsaXNoaW5nLiBUaGUgcm9sZSBtdXN0IGJlIGF0IGxlYXN0IGBwdWJsaXNoZXJgIHRvIGVuYWJsZSB0aGlzIGZ1bmN0aW9uYWxpdHkiLE9ULkV4Y2VwdGlvbkNvZGVzLlVOQUJMRV9UT19QVUJMSVNILHtzZXNzaW9uOnRoaXN9KSwKbnVsbDtpZighZHx8InN0cmluZyI9PT10eXBlb2YgZHx8ZC5ub2RlVHlwZT09Tm9kZS5FTEVNRU5UX05PREUpZD1PVC5pbml0UHVibGlzaGVyKHRoaXMuYXBpS2V5LGQsZik7ZWxzZSBpZihkIGluc3RhbmNlb2YgT1QuUHVibGlzaGVyKSJzZXNzaW9uImluIGQmJihkLnNlc3Npb24mJiJzZXNzaW9uSWQiaW4gZC5zZXNzaW9uKSYmKGQuc2Vzc2lvbi5zZXNzaW9uSWQ9PT10aGlzLnNlc3Npb25JZD9PVC53YXJuKCJDYW5ub3QgcHVibGlzaCAiK2QuZ3VpZCsiIGFnYWluIHRvICIrdGhpcy5zZXNzaW9uSWQrIi4gUGxlYXNlIGNhbGwgc2Vzc2lvbi51bnB1Ymxpc2gocHVibGlzaGVyKSBmaXJzdC4iKTpPVC53YXJuKCJDYW5ub3QgcHVibGlzaCAiK2QuZ3VpZCsiIHB1Ymxpc2hlciBhbHJlYWR5IGF0dGFjaGVkIHRvICIrZC5zZXNzaW9uLnNlc3Npb25JZCsiLiBQbGVhc2UgY2FsbCBzZXNzaW9uLnVucHVibGlzaChwdWJsaXNoZXIpIGZpcnN0LiIpKTtlbHNlIHRocm93IGQ9IlNlc3Npb24ucHVibGlzaCA6OiBGaXJzdCBwYXJhbWV0ZXIgcGFzc2VkIGluIGlzIG5laXRoZXIgYSBzdHJpbmcgbm9yIGFuIGluc3RhbmNlIG9mIHRoZSBQdWJsaXNoZXIiLApPVC5lcnJvcihkKSxFcnJvcihkKTtpZihnJiZPVC4kLmlzRnVuY3Rpb24oZykpZC5vbmNlKCJwdWJsaXNoQ29tcGxldGUiLGcpO2QuXy5wdWJsaXNoVG9TZXNzaW9uKHRoaXMpO3JldHVybiBkfTt0aGlzLnVucHVibGlzaD1mdW5jdGlvbihhKXthP2EuXy51bnB1Ymxpc2hGcm9tU2Vzc2lvbih0aGlzKTpPVC5lcnJvcigiT1QuU2Vzc2lvbi51bnB1Ymxpc2g6IHB1Ymxpc2hlciBwYXJhbWV0ZXIgbWlzc2luZy4iKX07dGhpcy5zdWJzY3JpYmU9ZnVuY3Rpb24oYSxiLGMsZCl7aWYoIXRoaXMuY29ubmVjdGlvbnx8IXRoaXMuY29ubmVjdGlvbi5jb25uZWN0aW9uSWQpdGhyb3cgYT0iU2Vzc2lvbi5zdWJzY3JpYmUgOjogQ29ubmVjdGlvbiByZXF1aXJlZCB0byBzdWJzY3JpYmUiLE9ULmVycm9yKGEpLEVycm9yKGEpO2lmKCFhKXRocm93IGE9IlNlc3Npb24uc3Vic2NyaWJlIDo6IHN0cmVhbSBjYW5ub3QgYmUgbnVsbCIsT1QuZXJyb3IoYSksRXJyb3IoYSk7aWYoIWEuaGFzT3duUHJvcGVydHkoInN0cmVhbUlkIikpdGhyb3cgYT0KIlNlc3Npb24uc3Vic2NyaWJlIDo6IGludmFsaWQgc3RyZWFtIG9iamVjdCIsT1QuZXJyb3IoYSksRXJyb3IoYSk7Yj1uZXcgT1QuU3Vic2NyaWJlcihiLE9ULiQuZXh0ZW5kKGN8fHt9LHtzZXNzaW9uOnRoaXN9KSk7aWYoZCYmT1QuJC5pc0Z1bmN0aW9uKGQpKWIub25jZSgic3Vic2NyaWJlQ29tcGxldGUiLGQpO09ULnN1YnNjcmliZXJzLmFkZChiKTtiLnN1YnNjcmliZShhKTtyZXR1cm4gYn07dGhpcy51bnN1YnNjcmliZT1mdW5jdGlvbihhKXtpZighYSl0aHJvdyBPVC5lcnJvcigiT1QuU2Vzc2lvbi51bnN1YnNjcmliZTogc3Vic2NyaWJlciBjYW5ub3QgYmUgbnVsbCIpLEVycm9yKCJPVC5TZXNzaW9uLnVuc3Vic2NyaWJlOiBzdWJzY3JpYmVyIGNhbm5vdCBiZSBudWxsIik7aWYoIWEuc3RyZWFtKXJldHVybiBPVC53YXJuKCJPVC5TZXNzaW9uLnVuc3Vic2NyaWJlOjogdHJpZWQgdG8gdW5zdWJzY3JpYmUgYSBzdWJzY3JpYmVyIHRoYXQgaGFkIG5vIHN0cmVhbSIpLCExO09ULmRlYnVnKCJPVC5TZXNzaW9uLnVuc3Vic2NyaWJlOiBzdWJzY3JpYmVyICIrCmEuaWQpO2EuZGVzdHJveSgpO3JldHVybiEwfTt0aGlzLmdldFN1YnNjcmliZXJzRm9yU3RyZWFtPWZ1bmN0aW9uKGEpe3JldHVybiBPVC5zdWJzY3JpYmVycy53aGVyZSh7c3RyZWFtSWQ6YS5pZH0pfTt0aGlzLmdldFB1Ymxpc2hlckZvclN0cmVhbT1mdW5jdGlvbihhKXtpZigic3RyaW5nIiE9dHlwZW9mIGEpaWYoIm9iamVjdCI9PXR5cGVvZiBhJiZhJiZhLmhhc093blByb3BlcnR5KCJpZCIpKWE9YS5pZDtlbHNlIHRocm93IGVycm9yTXNnPSJTZXNzaW9uLmdldFB1Ymxpc2hlckZvclN0cmVhbSA6OiBJbnZhbGlkIHN0cmVhbSB0eXBlIixPVC5lcnJvcihlcnJvck1zZyksRXJyb3IoZXJyb3JNc2cpO3JldHVybiBPVC5wdWJsaXNoZXJzLndoZXJlKHtzdHJlYW1JZDphfSlbMF19O3RoaXMuXz17anNlcFN1YnNjcmliZTpmdW5jdGlvbihhLGIsZCl7cmV0dXJuIGMuanNlcFN1YnNjcmliZShhLmNvbm5lY3Rpb24uaWQsYS5pZCxiLGQpfS5iaW5kKHRoaXMpLGpzZXBVbnN1YnNjcmliZTpmdW5jdGlvbihhKXtyZXR1cm4gYy5qc2VwVW5zdWJzY3JpYmUoYS5jb25uZWN0aW9uLmlkLAphLmlkKX0uYmluZCh0aGlzKSxqc2VwQ2FuZGlkYXRlOmZ1bmN0aW9uKGEsYixkKXtyZXR1cm4gYy5qc2VwQ2FuZGlkYXRlKGEsYi5pZCxkKX0uYmluZCh0aGlzKSxqc2VwT2ZmZXI6ZnVuY3Rpb24oYSxiLGQpe3JldHVybiBjLmpzZXBPZmZlcihhLGIuaWQsZCl9LmJpbmQodGhpcyksanNlcEFuc3dlcjpmdW5jdGlvbihhLGIsZCl7cmV0dXJuIGMuanNlcEFuc3dlcihhLGIuaWQsZCl9LmJpbmQodGhpcyksZGlzcGF0Y2hTaWduYWw6ZnVuY3Rpb24oYSxiLGMpe2E9bmV3IE9ULlNpZ25hbEV2ZW50KGIsYyxhKTthLnRhcmdldD10aGlzO3RoaXMudHJpZ2dlcihPVC5FdmVudC5uYW1lcy5TSUdOQUwsYSk7YiYmdGhpcy5kaXNwYXRjaEV2ZW50KGEpfS5iaW5kKHRoaXMpLG1vZGlmeVN1YnNjcmliZXI6ZnVuY3Rpb24oYSxiLGQpe3JldHVybiBjLm1vZGlmeVN1YnNjcmliZXIoYSxiLGQpfS5iaW5kKHRoaXMpLGNyZWF0ZVN0cmVhbTpmdW5jdGlvbihhLGIsZCxlLGYsZyxoKXtjLmNyZWF0ZVN0cmVhbShhLApiLGQsZSxmLGcsaCl9LmJpbmQodGhpcyksbW9kaWZ5U3RyZWFtOmZ1bmN0aW9uKGEsYixkKXshYXx8IWJ8fHZvaWQgMD09PWQ/T1QuZXJyb3IoIk9ULlNlc3Npb24ubW9kaWZ5U3RyZWFtOiBtdXN0IHByb3ZpZGUgc3RyZWFtSWQsIGtleSBhbmQgdmFsdWUgdG8gbW9kaWZ5IGEgc3RyZWFtIHByb3BlcnR5LiIpOmMudXBkYXRlU3RyZWFtKGEsYixkKX0uYmluZCh0aGlzKSxkZXN0cm95U3RyZWFtOmZ1bmN0aW9uKGEpe2MuZGVzdHJveVN0cmVhbShhKX0uYmluZCh0aGlzKX07dGhpcy5zaWduYWw9ZnVuY3Rpb24oYSxiKXtjLnNpZ25hbChhLGIpfTt0aGlzLmZvcmNlRGlzY29ubmVjdD1mdW5jdGlvbihhLGIpe2lmKGMmJmMucGVybWl0dGVkVG8oImZvcmNlRGlzY29ubmVjdCIpKXt2YXIgZD0ic3RyaW5nIj09PXR5cGVvZiBhP2E6YS5pZDtpZihiKXt2YXIgZT1uZXcgZyh0aGlzLGIse3RpbWVvdXRNZXNzYWdlOiJUaW1lZCBvdXQgd2hpbGUgd2FpdGluZyBmb3IgY29ubmVjdGlvbiAiK2QrCiIgdG8gYmUgZm9yY2UgRGlzY29ubmVjdGVkLiJ9KTtlLmZhaWxzT25FeGNlcHRpb25Db2Rlcyh7MTUyMDoiVGhpcyB0b2tlbiBkb2VzIG5vdCBhbGxvdyBmb3JjZURpc2Nvbm5lY3QuIFRoZSByb2xlIG11c3QgYmUgYXQgbGVhc3QgYG1vZGVyYXRvcmAgdG8gZW5hYmxlIHRoaXMgZnVuY3Rpb25hbGl0eSJ9KTtpW2RdPWV9Yy5mb3JjZURpc2Nvbm5lY3QoZCl9ZWxzZSBiJiZPVC4kLmNhbGxBc3luYyhiLG5ldyBPVC5FcnJvcihudWxsLCJUaGlzIHRva2VuIGRvZXMgbm90IGFsbG93IGZvcmNlRGlzY29ubmVjdC4gVGhlIHJvbGUgbXVzdCBiZSBhdCBsZWFzdCBgbW9kZXJhdG9yYCB0byBlbmFibGUgdGhpcyBmdW5jdGlvbmFsaXR5IikpLFRCLmhhbmRsZUpzRXhjZXB0aW9uKCJUaGlzIHRva2VuIGRvZXMgbm90IGFsbG93IGZvcmNlRGlzY29ubmVjdC4gVGhlIHJvbGUgbXVzdCBiZSBhdCBsZWFzdCBgbW9kZXJhdG9yYCB0byBlbmFibGUgdGhpcyBmdW5jdGlvbmFsaXR5IixPVC5FeGNlcHRpb25Db2Rlcy5VTkFCTEVfVE9fRk9SQ0VfRElTQ09OTkVDVCwKe3Nlc3Npb246dGhpc30pfTt0aGlzLmZvcmNlVW5wdWJsaXNoPWZ1bmN0aW9uKGEsYil7aWYoYyYmYy5wZXJtaXR0ZWRUbygiZm9yY2VVbnB1Ymxpc2giKSl7dmFyIGQ9InN0cmluZyI9PT10eXBlb2YgYT90aGlzLnN0cmVhbXMuZ2V0KGEpOmE7aWYoYil7dmFyIGU9bmV3IGcodGhpcyxiLHt0aW1lb3V0TWVzc2FnZToiVGltZWQgb3V0IHdoaWxlIHdhaXRpbmcgZm9yIHN0cmVhbSAiK2QuaWQrIiB0byBiZSBmb3JjZSB1bnB1Ymxpc2hlZC4ifSk7ZS5mYWlsc09uRXhjZXB0aW9uQ29kZXMoezE1MzA6IlRoaXMgdG9rZW4gZG9lcyBub3QgYWxsb3cgZm9yY2VVbnB1Ymxpc2guIFRoZSByb2xlIG11c3QgYmUgYXQgbGVhc3QgYG1vZGVyYXRvcmAgdG8gZW5hYmxlIHRoaXMgZnVuY3Rpb25hbGl0eSJ9KTtrW2QuaWRdPWV9Yy5mb3JjZVVucHVibGlzaChkLmlkKX1lbHNlIGImJk9ULiQuY2FsbEFzeW5jKGIsbmV3IE9ULkVycm9yKG51bGwsIlRoaXMgdG9rZW4gZG9lcyBub3QgYWxsb3cgZm9yY2VVbnB1Ymxpc2guIFRoZSByb2xlIG11c3QgYmUgYXQgbGVhc3QgYG1vZGVyYXRvcmAgdG8gZW5hYmxlIHRoaXMgZnVuY3Rpb25hbGl0eSIpKSwKVEIuaGFuZGxlSnNFeGNlcHRpb24oIlRoaXMgdG9rZW4gZG9lcyBub3QgYWxsb3cgZm9yY2VVbnB1Ymxpc2guIFRoZSByb2xlIG11c3QgYmUgYXQgbGVhc3QgYG1vZGVyYXRvcmAgdG8gZW5hYmxlIHRoaXMgZnVuY3Rpb25hbGl0eSIsT1QuRXhjZXB0aW9uQ29kZXMuVU5BQkxFX1RPX0ZPUkNFX1VOUFVCTElTSCx7c2Vzc2lvbjp0aGlzfSl9O3RoaXMuZ2V0U3RhdGVNYW5hZ2VyPWZ1bmN0aW9uKCl7T1Qud2FybigiRml4bWU6IEhhdmUgbm90IGltcGxlbWVudGVkIHNlc3Npb24uZ2V0U3RhdGVNYW5hZ2VyIil9O09ULiQuZGVmaW5lR2V0dGVycyh0aGlzLHthcGlLZXk6ZnVuY3Rpb24oKXtyZXR1cm4gYX0sdG9rZW46ZnVuY3Rpb24oKXtyZXR1cm4gZH0sY29ubmVjdGVkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXMoImNvbm5lY3RlZCIpfSxjb25uZWN0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIGMmJmMuaWQ/dGhpcy5jb25uZWN0aW9ucy5nZXQoYy5pZCk6bnVsbH0sY2FwYWJpbGl0aWVzOmZ1bmN0aW9uKCl7cmV0dXJuIGM/CmMuY2FwYWJpbGl0aWVzOm5ldyBPVC5DYXBhYmlsaXRpZXMoW10pfSxzZXNzaW9uSWQ6ZnVuY3Rpb24oKXtyZXR1cm4gYn0saWQ6ZnVuY3Rpb24oKXtyZXR1cm4gYn19LCEwKX1lbHNlIE9ULnVwZ3JhZGVTeXN0ZW1SZXF1aXJlbWVudHMoKX19KSh3aW5kb3cpOyhmdW5jdGlvbigpe3ZhciBnPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImxpbmsiKTtnLnR5cGU9InRleHQvY3NzIjtnLm1lZGlhPSJzY3JlZW4iO2cucmVsPSJzdHlsZXNoZWV0IjtnLmhyZWY9T1QucHJvcGVydGllcy5jc3NVUkw7KGRvY3VtZW50LmhlYWR8fGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJoZWFkIilbMF0pLmFwcGVuZENoaWxkKGcpfSkod2luZG93KTsoZnVuY3Rpb24oKXsiZnVuY3Rpb24iPT09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZCYmZGVmaW5lKCJUQiIsW10sZnVuY3Rpb24oKXtyZXR1cm4gVEJ9KX0pKHdpbmRvdyk7Cg==",
                "body": "LyoKICBPcGVuVG9rIEphdmFTY3JpcHQgTGlicmFyeSB2Mi4wLjE2CiBodHRwOi8vd3d3LnRva2JveC5jb20vCgogQ29weXJpZ2h0IChjKSAyMDEzIFRva0JveCwgSW5jLgoKIERhdGU6IERlY2VtYmVyIDEyIDEwOjUyOjE3IDIwMTMKICBDb21tb24gSlMgSGVscGVycyBvbiBPcGVuVG9rIDAuMS4wIDQ5OTdmZTIgbWFzdGVyCiBodHRwOi8vd3d3LnRva2JveC5jb20vCgogQ29weXJpZ2h0IChjKSAyMDEzIFRva0JveCwgSW5jLgoKIERhdGU6IE9jdG9iZXIgMDMgMTI6MjM6MDkgMjAxMwoKKi8KKGZ1bmN0aW9uKGcpe2cuT1R8fChnLk9UPXt9KTtPVC5wcm9wZXJ0aWVzPXt2ZXJzaW9uOiJ2Mi4wLjE2IixidWlsZDoiMzJhODJiZiIsZGVidWc6ImZhbHNlIix3ZWJzaXRlVVJMOiJodHRwOi8vd3d3LnRva2JveC5jb20iLGNkblVSTDoiaHR0cDovL3N0YXRpYy5vcGVudG9rLmNvbSIsbG9nZ2luZ1VSTDoiaHR0cDovL2hsZy50b2tib3guY29tL3Byb2QiLGFwaVVSTDoiaHR0cDovL2FudmlsLm9wZW50b2suY29tIixtZXNzYWdpbmdQcm90b2NvbDoid3NzIixtZXNzYWdpbmdQb3J0OjQ0MyxzdXBwb3J0U1NMOiJ0cnVlIixjZG5VUkxTU0w6Imh0dHBzOi8vc3d3dy50b2tib3guY29tIixsb2dnaW5nVVJMU1NMOiJodHRwczovL2hsZy50b2tib3guY29tL3Byb2QiLAphcGlVUkxTU0w6Imh0dHBzOi8vYW52aWwub3BlbnRvay5jb20ifX0pKHdpbmRvdyk7CiFmdW5jdGlvbihnLGIpe3ZhciBmPWZ1bmN0aW9uKGEpe3JldHVybiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChhKX0sYT1nLk9USGVscGVycztnLk9USGVscGVycz1mO2Yubm9Db25mbGljdD1mdW5jdGlvbigpe2Yubm9Db25mbGljdD1mdW5jdGlvbigpe3JldHVybiBmfTtnLk9USGVscGVycz1hO3JldHVybiBmfTtmLmlzRW1wdHk9ZnVuY3Rpb24oYSl7aWYobnVsbD09PWF8fGE9PT1iKXJldHVybiEwO2lmKEFycmF5LmlzQXJyYXkoYSl8fCJzdHJpbmciPT09dHlwZW9mIGEpcmV0dXJuIDA9PT1hLmxlbmd0aDtmb3IodmFyIGMgaW4gYSlpZihhLmhhc093blByb3BlcnR5KGMpKXJldHVybiExO3JldHVybiEwfTtmLmlzTm9uZT1mdW5jdGlvbihhKXtyZXR1cm4gYT09PWJ8fG51bGw9PT1hfTtmLmlzT2JqZWN0PWZ1bmN0aW9uKGEpe3JldHVybiBhPT09T2JqZWN0KGEpfTtmLmlzRnVuY3Rpb249ZnVuY3Rpb24oYSl7cmV0dXJuImZ1bmN0aW9uIj09PXR5cGVvZiBhfTtmLmV4dGVuZD1mdW5jdGlvbigpe3ZhciBhPQpBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpLGI9YS5zaGlmdCgpO2EuZm9yRWFjaChmdW5jdGlvbihhKXtmb3IodmFyIGMgaW4gYSliW2NdPWFbY119KTtyZXR1cm4gYn07Zi5kZWZhdWx0cz1mdW5jdGlvbigpe3ZhciBhPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyksYj1hLnNoaWZ0KCk7YS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2Zvcih2YXIgYyBpbiBhKXZvaWQgMD09PWJbY10mJihiW2NdPWFbY10pfSk7cmV0dXJuIGJ9O2YuY2xvbmU9ZnVuY3Rpb24oYSl7cmV0dXJuIWYuaXNPYmplY3QoYSk/YTpBcnJheS5pc0FycmF5KGEpP2Euc2xpY2UoKTpmLmV4dGVuZCh7fSxhKX07Zi5ub29wPWZ1bmN0aW9uKCl7fTtmLnN1cHBvcnRzV2ViU29ja2V0cz1mdW5jdGlvbigpe3JldHVybiJXZWJTb2NrZXQiaW4gZ307Zi5ub3c9ZnVuY3Rpb24oKXt2YXIgYT1nLnBlcmZvcm1hbmNlfHx7fSxiLGM9YS5ub3d8fGEubW96Tm93fHxhLm1zTm93fHxhLm9Ob3d8fAphLndlYmtpdE5vdztyZXR1cm4gYz8oYz1jLmJpbmQoYSksYj1hLnRpbWluZy5uYXZpZ2F0aW9uU3RhcnQsZnVuY3Rpb24oKXtyZXR1cm4gYitjKCl9KTpmdW5jdGlvbigpe3JldHVybihuZXcgRGF0ZSkuZ2V0VGltZSgpfX0oKTtmLmJyb3dzZXI9ZnVuY3Rpb24oKXt2YXIgYT1nLm5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKSxiLGM9IlVua25vd24iOy0xPGEuaW5kZXhPZigiZmlyZWZveCIpJiYoYz0iRmlyZWZveCIpOy0xPGEuaW5kZXhPZigib3BlcmEiKT9jPSJPcGVyYSI6LTE8YS5pbmRleE9mKCJtc2llIik/Yz0iSUUiOi0xPGEuaW5kZXhPZigiY2hyb21lIikmJihjPSJDaHJvbWUiKTtpZigoYj1nLm5hdmlnYXRvci52ZW5kb3IpJiYtMTxiLnRvTG93ZXJDYXNlKCkuaW5kZXhPZigiYXBwbGUiKSljPSJTYWZhcmkiO2E9bnVsbDtmLmJyb3dzZXI9ZnVuY3Rpb24oKXtyZXR1cm4gY307cmV0dXJuIGN9O2YuY2FuRGVmaW5lUHJvcGVydHk9ITA7dHJ5e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh7fSwKIngiLHt9KX1jYXRjaChkKXtmLmNhbkRlZmluZVByb3BlcnR5PSExfWYuZGVmaW5lR2V0dGVycz1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9e307dm9pZCAwPT09YyYmKGM9ITEpO2Zvcih2YXIgaCBpbiBiKWRbaF09e2dldDpiW2hdLGVudW1lcmFibGU6Y307T2JqZWN0LmRlZmluZVByb3BlcnRpZXMoYSxkKX07T2JqZWN0LmNyZWF0ZXx8KE9iamVjdC5jcmVhdGU9ZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYigpe31pZigxPGFyZ3VtZW50cy5sZW5ndGgpdGhyb3cgRXJyb3IoIk9iamVjdC5jcmVhdGUgaW1wbGVtZW50YXRpb24gb25seSBhY2NlcHRzIHRoZSBmaXJzdCBwYXJhbWV0ZXIuIik7Yi5wcm90b3R5cGU9YTtyZXR1cm4gbmV3IGJ9KTtmLnNldENvb2tpZT1mdW5jdGlvbihhLGIpe3RyeXtsb2NhbFN0b3JhZ2Uuc2V0SXRlbShhLGIpfWNhdGNoKGMpe3ZhciBkPW5ldyBEYXRlO2Quc2V0VGltZShkLmdldFRpbWUoKSszMTUzNkU2KTtkPSI7IGV4cGlyZXM9IitkLnRvR01UU3RyaW5nKCk7CmRvY3VtZW50LmNvb2tpZT1hKyI9IitiK2QrIjsgcGF0aD0vIn19O2YuZ2V0Q29va2llPWZ1bmN0aW9uKGEpe3ZhciBiO3RyeXtyZXR1cm4gYj1sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgib3BlbnRva19jbGllbnRfaWQiKX1jYXRjaChjKXtmb3IodmFyIGE9YSsiPSIsZD1kb2N1bWVudC5jb29raWUuc3BsaXQoIjsiKSxoPTA7aDxkLmxlbmd0aDtoKyspe2Zvcih2YXIgZT1kW2hdO2UuY2hhckF0KDApPT0iICI7KWU9ZS5zdWJzdHJpbmcoMSxlLmxlbmd0aCk7ZS5pbmRleE9mKGEpPT09MCYmKGI9ZS5zdWJzdHJpbmcoYS5sZW5ndGgsZS5sZW5ndGgpKX1pZihiKXJldHVybiBifXJldHVybiBudWxsfTtmLmludmVydD1mdW5jdGlvbihhKXt2YXIgYj17fSxjO2ZvcihjIGluIGEpYS5oYXNPd25Qcm9wZXJ0eShjKSYmKGJbYVtjXV09Yyk7cmV0dXJuIGJ9O3ZhciBjPXtlc2NhcGU6eyImIjoiJmFtcDsiLCI8IjoiJmx0OyIsIj4iOiImZ3Q7IiwnIic6IiZxdW90OyIsIiciOiImI3gyNzsiLCIvIjoiJiN4MkY7In19OwpjLnVuZXNjYXBlPWYuaW52ZXJ0KGMuZXNjYXBlKTt2YXIgZT17ZXNjYXBlOlJlZ0V4cCgiWyIrT2JqZWN0LmtleXMoYy5lc2NhcGUpLmpvaW4oIiIpKyJdIiwiZyIpLHVuZXNjYXBlOlJlZ0V4cCgiKCIrT2JqZWN0LmtleXMoYy51bmVzY2FwZSkuam9pbigifCIpKyIpIiwiZyIpfTtbImVzY2FwZSIsInVuZXNjYXBlIl0uZm9yRWFjaChmdW5jdGlvbihhKXtmW2FdPWZ1bmN0aW9uKGQpe3JldHVybiBkPT09bnVsbHx8ZD09PWI/IiI6KCIiK2QpLnJlcGxhY2UoZVthXSxmdW5jdGlvbihiKXtyZXR1cm4gY1thXVtiXX0pfX0pO2YudGVtcGxhdGVTZXR0aW5ncz17ZXZhbHVhdGU6LzwlKFtcc1xTXSs/KSU+L2csaW50ZXJwb2xhdGU6LzwlPShbXHNcU10rPyklPi9nLGVzY2FwZTovPCUtKFtcc1xTXSs/KSU+L2d9O3ZhciBoPS8oLileLyxpPXsiJyI6IiciLCJcXCI6IlxcIiwiXHIiOiJyIiwiXG4iOiJuIiwiXHQiOiJ0IiwiXHUyMDI4IjoidTIwMjgiLCJcdTIwMjkiOiJ1MjAyOSJ9LGs9Ci9cXHwnfFxyfFxufFx0fFx1MjAyOHxcdTIwMjkvZztmLnRlbXBsYXRlPWZ1bmN0aW9uKGEsYixjKXt2YXIgZCxjPWYuZGVmYXVsdHMoe30sYyxmLnRlbXBsYXRlU2V0dGluZ3MpLGU9UmVnRXhwKFsoYy5lc2NhcGV8fGgpLnNvdXJjZSwoYy5pbnRlcnBvbGF0ZXx8aCkuc291cmNlLChjLmV2YWx1YXRlfHxoKS5zb3VyY2VdLmpvaW4oInwiKSsifCQiLCJnIiksZz0wLHE9Il9fcCs9JyI7YS5yZXBsYWNlKGUsZnVuY3Rpb24oYixjLGQsaCxlKXtxPXErYS5zbGljZShnLGUpLnJlcGxhY2UoayxmdW5jdGlvbihhKXtyZXR1cm4iXFwiK2lbYV19KTtjJiYocT1xKygiJytcbigoX190PSgiK2MrIikpPT1udWxsPycnOk9USGVscGVycy5lc2NhcGUoX190KSkrXG4nIikpO2QmJihxPXErKCInK1xuKChfX3Q9KCIrZCsiKSk9PW51bGw/Jyc6X190KStcbiciKSk7aCYmKHE9cSsoIic7XG4iK2grIlxuX19wKz0nIikpO2c9ZStiLmxlbmd0aDtyZXR1cm4gYn0pO3E9cSsiJztcbiI7Yy52YXJpYWJsZXx8CihxPSJ3aXRoKG9ianx8e30pe1xuIitxKyJ9XG4iKTtxPSJ2YXIgX190LF9fcD0nJyxfX2o9QXJyYXkucHJvdG90eXBlLmpvaW4scHJpbnQ9ZnVuY3Rpb24oKXtfX3ArPV9fai5jYWxsKGFyZ3VtZW50cywnJyk7fTtcbiIrcSsicmV0dXJuIF9fcDtcbiI7dHJ5e2Q9bmV3IEZ1bmN0aW9uKGMudmFyaWFibGV8fCJvYmoiLHEpfWNhdGNoKG8pe28uc291cmNlPXE7dGhyb3cgbzt9aWYoYilyZXR1cm4gZChiKTtiPWZ1bmN0aW9uKGEpe3JldHVybiBkLmNhbGwodGhpcyxhKX07Yi5zb3VyY2U9ImZ1bmN0aW9uKCIrKGMudmFyaWFibGV8fCJvYmoiKSsiKXtcbiIrcSsifSI7cmV0dXJuIGJ9fSh3aW5kb3cpOwooZnVuY3Rpb24oZyxiKXtiLnN0YXRhYmxlPWZ1bmN0aW9uKGYsYSxkLGMsZSl7dmFyIGgsaT1kO2YuaXM9ZnVuY3Rpb24oKXtyZXR1cm4tMSE9PUFycmF5LnByb3RvdHlwZS5pbmRleE9mLmNhbGwoYXJndW1lbnRzLGkpfTtmLmlzTm90PWZ1bmN0aW9uKCl7cmV0dXJuLTE9PT1BcnJheS5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKGFyZ3VtZW50cyxpKX07T2JqZWN0LmRlZmluZVByb3BlcnRpZXMoZix7c3RhdGU6e2dldDpmdW5jdGlvbigpe3JldHVybiBpfX0scHJldmlvdXNTdGF0ZTp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGh9fX0pO3JldHVybiBmdW5jdGlvbihkKXtpIT09ZCYmKC0xPT09YS5pbmRleE9mKGQpP2UmJmIuaXNGdW5jdGlvbihlKSYmZSgiaW52YWxpZFN0YXRlIixkKTooaD1pLGk9ZCxjJiZiLmlzRnVuY3Rpb24oYykmJmMoZCxoKSkpfX19KSh3aW5kb3csd2luZG93Lk9USGVscGVycyk7CihmdW5jdGlvbihnLGIpe2Z1bmN0aW9uIGYoYSxiKXt2YXIgYz1ifHwwLGQ9ajtyZXR1cm4gZFthW2MrK11dK2RbYVtjKytdXStkW2FbYysrXV0rZFthW2MrK11dKyItIitkW2FbYysrXV0rZFthW2MrK11dKyItIitkW2FbYysrXV0rZFthW2MrK11dKyItIitkW2FbYysrXV0rZFthW2MrK11dKyItIitkW2FbYysrXV0rZFthW2MrK11dK2RbYVtjKytdXStkW2FbYysrXV0rZFthW2MrK11dK2RbYVtjKytdXX1mdW5jdGlvbiBhKGEsYyxiKXtiPWMmJmJ8fDA7InN0cmluZyI9PXR5cGVvZiBhJiYoYz0iYmluYXJ5Ij09YT9uZXcgaygxNik6bnVsbCxhPW51bGwpO2E9YXx8e307YT1hLnJhbmRvbXx8KGEucm5nfHxpKSgpO2FbNl09YVs2XSYxNXw2NDthWzhdPWFbOF0mNjN8MTI4O2lmKGMpZm9yKHZhciBkPTA7MTY+ZDtkKyspY1tiK2RdPWFbZF07cmV0dXJuIGN8fGYoYSl9dmFyIGQsYyxlPUFycmF5KDE2KTtkPWZ1bmN0aW9uKCl7Zm9yKHZhciBhLGM9MCxjPTA7MTY+YztjKyspMD09PShjJgozKSYmKGE9NDI5NDk2NzI5NipNYXRoLnJhbmRvbSgpKSxlW2NdPWE+Pj4oKGMmMyk8PDMpJjI1NTtyZXR1cm4gZX07aWYoZy5jcnlwdG8mJmNyeXB0by5nZXRSYW5kb21WYWx1ZXMpe3ZhciBoPW5ldyBVaW50MzJBcnJheSg0KTtjPWZ1bmN0aW9uKCl7Y3J5cHRvLmdldFJhbmRvbVZhbHVlcyhoKTtmb3IodmFyIGE9MDsxNj5hO2ErKyllW2FdPWhbYT4+Ml0+Pj44KihhJjMpJjI1NTtyZXR1cm4gZX19Zm9yKHZhciBpPWN8fGQsaz0iZnVuY3Rpb24iPT10eXBlb2YgQnVmZmVyP0J1ZmZlcjpBcnJheSxqPVtdLGw9e30sbT0wOzI1Nj5tO20rKylqW21dPShtKzI1NikudG9TdHJpbmcoMTYpLnN1YnN0cigxKSxsW2pbbV1dPW07YS52ND1hO2EucGFyc2U9ZnVuY3Rpb24oYSxjLGIpe3ZhciBkPWMmJmJ8fDAsaD0wLGM9Y3x8W107Zm9yKGEudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9bMC05YS1mXXsyfS9nLGZ1bmN0aW9uKGEpezE2PmgmJihjW2QraCsrXT1sW2FdKX0pOzE2Pmg7KWNbZCtoKytdPQowO3JldHVybiBjfTthLnVucGFyc2U9ZjthLkJ1ZmZlckNsYXNzPWs7YS5tYXRoUk5HPWQ7YS53aGF0d2dSTkc9YztiLnV1aWQ9YX0pKHdpbmRvdyx3aW5kb3cuT1RIZWxwZXJzKTsKKGZ1bmN0aW9uKGcsYil7ZnVuY3Rpb24gZihhKXtPYmplY3QuZGVmaW5lUHJvcGVydHkoYS5wcm90b3R5cGUsImZpcnN0RWxlbWVudENoaWxkIix7Z2V0OmZ1bmN0aW9uKCl7dmFyIGE7Zm9yKGE9dGhpcy5maXJzdENoaWxkO2EmJjEhPWEubm9kZVR5cGU7KWE9YS5uZXh0U2libGluZztyZXR1cm4gYX19KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoYS5wcm90b3R5cGUsImxhc3RFbGVtZW50Q2hpbGQiLHtnZXQ6ZnVuY3Rpb24oKXt2YXIgYTtmb3IoYT10aGlzLmxhc3RDaGlsZDthJiYxIT1hLm5vZGVUeXBlOylhPWEucHJldmlvdXNTaWJsaW5nO3JldHVybiBhfX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShhLnByb3RvdHlwZSwibmV4dEVsZW1lbnRTaWJsaW5nIix7Z2V0OmZ1bmN0aW9uKCl7Zm9yKHZhciBhPXRoaXM7IWIuaXNOb25lKGE9YS5uZXh0U2libGluZykmJjEhPWEubm9kZVR5cGU7KTtyZXR1cm4gYX19KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoYS5wcm90b3R5cGUsInByZXZpb3VzRWxlbWVudFNpYmxpbmciLAp7Z2V0OmZ1bmN0aW9uKCl7Zm9yKHZhciBhPXRoaXM7IWIuaXNOb25lKGE9YS5wcmV2aW91c1NpYmxpbmcpJiYxIT1hLm5vZGVUeXBlOyk7cmV0dXJuIGF9fSl9Yi5wYXJzZVhNTD1mdW5jdGlvbihhKXt2YXIgYjtnLkRPTVBhcnNlcj9iPShuZXcgRE9NUGFyc2VyKS5wYXJzZUZyb21TdHJpbmcoYSwidGV4dC94bWwiKTooYj1uZXcgQWN0aXZlWE9iamVjdCgiTWljcm9zb2Z0LlhNTERPTSIpLGIuYXN5bmM9ImZhbHNlIixiLmxvYWRYTUwoYSksZihiKSk7YT1iLmRvY3VtZW50RWxlbWVudDtyZXR1cm4hYXx8IWEubm9kZU5hbWV8fCJwYXJzZXJlcnJvciI9PT1hLm5vZGVOYW1lP251bGw6Yn19KSh3aW5kb3csd2luZG93Lk9USGVscGVycyk7CihmdW5jdGlvbihnLGIpe2IudXNlTG9nSGVscGVycz1mdW5jdGlvbihiKXtmdW5jdGlvbiBhKGEsYyxrKXtyZXR1cm4gZnVuY3Rpb24oKXtpZihiLnNob3VsZExvZyhjKSl7dmFyIGo9Zy5jb25zb2xlO2lmKGomJmpbYV0paWYoalthXS5hcHBseXx8RnVuY3Rpb24ucHJvdG90eXBlLmJpbmQpalthXS5hcHBseXx8KGpbYV09RnVuY3Rpb24ucHJvdG90eXBlLmJpbmQuY2FsbChqW2FdLGopKSxqW2FdLmFwcGx5KGosYXJndW1lbnRzKTtlbHNlIGpbYV0oQXJyYXkucHJvdG90eXBlLnNsaWNlLmFwcGx5KGFyZ3VtZW50cykuam9pbigiICIpKTtlbHNlIGsmJmsuYXBwbHkoYixhcmd1bWVudHMpO2lmKGo9YXJndW1lbnRzKXt2YXIgbDt0cnl7bD1KU09OLnN0cmluZ2lmeShqKX1jYXRjaChtKXtsPWoudG9TdHJpbmcoKX0yPj1sLmxlbmd0aHx8ZS5wdXNoKFthLGQoKSxsXSl9fX19ZnVuY3Rpb24gZCgpe3ZhciBhPW5ldyBEYXRlO3JldHVybiBhLnRvTG9jYWxlVGltZVN0cmluZygpK2EuZ2V0TWlsbGlzZWNvbmRzKCl9CmIuREVCVUc9NTtiLkxPRz00O2IuSU5GTz0zO2IuV0FSTj0yO2IuRVJST1I9MTtiLk5PTkU9MDt2YXIgYz1iLk5PTkUsZT1bXTtiLmxvZz1hKCJsb2ciLGIuTE9HKTtiLmRlYnVnPWEoImRlYnVnIixiLkRFQlVHLGIubG9nKTtiLmluZm89YSgiaW5mbyIsYi5JTkZPLGIubG9nKTtiLndhcm49YSgid2FybiIsYi5XQVJOLGIubG9nKTtiLmVycm9yPWEoImVycm9yIixiLkVSUk9SLGIubG9nKTtiLnNldExvZ0xldmVsPWZ1bmN0aW9uKGEpe2M9Im51bWJlciI9PT10eXBlb2YgYT9hOjA7Yi5kZWJ1ZygiVEIuc2V0TG9nTGV2ZWwoIitjKyIpIik7cmV0dXJuIGN9O2IuZ2V0TG9ncz1mdW5jdGlvbigpe3JldHVybiBlfTtiLnNob3VsZExvZz1mdW5jdGlvbihhKXtyZXR1cm4gYz49YX19O2IudXNlTG9nSGVscGVycyhiKTtiLnNldExvZ0xldmVsKGIuRVJST1IpfSkod2luZG93LHdpbmRvdy5PVEhlbHBlcnMpOwooZnVuY3Rpb24oZyxiLGYpe2IuY2FzdFRvQm9vbGVhbj1mdW5jdGlvbihhLGIpe3JldHVybiBhPT09Zj9iOiJ0cnVlIj09PWF8fCEwPT09YX07Yi5yb3VuZEZsb2F0PWZ1bmN0aW9uKGEsYil7cmV0dXJuIHBhcnNlSW50KE1hdGgucm91bmQoYSpNYXRoLnBvdygxMCxiKSksMTApL01hdGgucG93KDEwLGIpfX0pKHdpbmRvdyx3aW5kb3cuT1RIZWxwZXJzKTsKKGZ1bmN0aW9uKGcsYil7dmFyIGY9W10sYT0iT1RIZWxwZXJzLiIrYi51dWlkLnY0KCkrIi56ZXJvLXRpbWVvdXQiO2cuYWRkRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsZnVuY3Rpb24oYil7Yi5zb3VyY2U9PWcmJmIuZGF0YT09YSYmKGIuc3RvcFByb3BhZ2F0aW9uKCksMDxmLmxlbmd0aCYmKGI9Zi5zaGlmdCgpLGIuc2hpZnQoKS5hcHBseShudWxsLGIpKSl9LCEwKTtiLmNhbGxBc3luYz1mdW5jdGlvbigpe2YucHVzaChBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpKTtnLnBvc3RNZXNzYWdlKGEsIioiKX07Yi5jcmVhdGVBc3luY0hhbmRsZXI9ZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGM9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKTtiLmNhbGxBc3luYyhmdW5jdGlvbigpe2EuYXBwbHkobnVsbCxjKX0pfX19KSh3aW5kb3csd2luZG93Lk9USGVscGVycyk7CihmdW5jdGlvbihnLGIsZil7Yi5ldmVudGluZz1mdW5jdGlvbihhLGQpe2Z1bmN0aW9uIGMoYSxjLGQpe3ZhciBlPWhbYV07aWYoZSYmMCE9PWUubGVuZ3RoKXt2YXIgaT1lLmxlbmd0aDtlLmZvckVhY2goZnVuY3Rpb24oZSl7ZnVuY3Rpb24gZihhKXtyZXR1cm4gYS5jb250ZXh0PT09ZS5jb250ZXh0JiZhLmhhbmRsZXI9PT1lLmhhbmRsZXJ9Yi5jYWxsQXN5bmMoZnVuY3Rpb24oKXt0cnl7aFthXSYmaFthXS5zb21lKGYpJiYoZS5jbG9zdXJlfHxlLmhhbmRsZXIpLmFwcGx5KGUuY29udGV4dHx8bnVsbCxjKX1maW5hbGx5e2ktLSwwPT09aSYmZCYmZC5hcHBseShudWxsLGMuc2xpY2UoKSl9fSl9KX19ZnVuY3Rpb24gZShhLGIpe3ZhciBjPWhbYV07YyYmMCE9PWMubGVuZ3RoJiZjLmZvckVhY2goZnVuY3Rpb24oYSl7KGEuY2xvc3VyZXx8YS5oYW5kbGVyKS5hcHBseShhLmNvbnRleHR8fG51bGwsYil9KX12YXIgaD17fSxpPSEwPT09ZD9lOmMsZj1mdW5jdGlvbihhLGIpe2hbYV0mJgooYj9oW2FdPWhbYV0uZmlsdGVyKGZ1bmN0aW9uKGEpe3JldHVybiBhLmNvbnRleHQhPT1ifSk6ZGVsZXRlIGhbYV0pfSxnPWZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPXtoYW5kbGVyOmJ9O2MmJihlLmNvbnRleHQ9Yyk7ZCYmKGUuY2xvc3VyZT1kKTthLmZvckVhY2goZnVuY3Rpb24oYSl7aFthXXx8KGhbYV09W10pO2hbYV0ucHVzaChlKX0pfS5iaW5kKGEpLGw9ZnVuY3Rpb24oYSxiLGMpe2Z1bmN0aW9uIGQoYSl7cmV0dXJuIShhLmhhbmRsZXI9PT1iJiZhLmNvbnRleHQ9PT1jKX1hLmZvckVhY2goZnVuY3Rpb24oYSl7aFthXSYmKGhbYV09aFthXS5maWx0ZXIoZCksMD09PWhbYV0ubGVuZ3RoJiZkZWxldGUgaFthXSl9KX0uYmluZChhKTthLmRpc3BhdGNoRXZlbnQ9ZnVuY3Rpb24oYSxjKXtpZighYS50eXBlKXRocm93IGIuZXJyb3IoIk9USGVscGVycy5FdmVudGluZy5kaXNwYXRjaEV2ZW50OiBFdmVudCBoYXMgbm8gdHlwZSIpLGIuZXJyb3IoYSksRXJyb3IoIk9USGVscGVycy5FdmVudGluZy5kaXNwYXRjaEV2ZW50OiBFdmVudCBoYXMgbm8gdHlwZSIpOwphLnRhcmdldHx8KGEudGFyZ2V0PXRoaXMpO2lmKCFoW2EudHlwZV18fDA9PT1oW2EudHlwZV0ubGVuZ3RoKXt2YXIgZD1bYV07YyYmYy5hcHBseShudWxsLGQuc2xpY2UoKSl9ZWxzZSByZXR1cm4gaShhLnR5cGUsW2FdLGMpLHRoaXN9O2EudHJpZ2dlcj1mdW5jdGlvbihhKXtpZihoW2FdJiYwIT09aFthXS5sZW5ndGgpe3ZhciBiPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7Yi5zaGlmdCgpO2koYSxiKTtyZXR1cm4gdGhpc319O2Eub249ZnVuY3Rpb24oYSxiLGMpe2lmKCJzdHJpbmciPT09dHlwZW9mIGEmJmIpZyhhLnNwbGl0KCIgIiksYixjKTtlbHNlIGZvcih2YXIgZCBpbiBhKWEuaGFzT3duUHJvcGVydHkoZCkmJmcoW2RdLGFbZF0sYik7cmV0dXJuIHRoaXN9O2Eub2ZmPWZ1bmN0aW9uKGEsYyxkKXtpZigic3RyaW5nIj09PXR5cGVvZiBhKWMmJmIuaXNGdW5jdGlvbihjKT9sKGEuc3BsaXQoIiAiKSxjLGQpOmEuc3BsaXQoIiAiKS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2YoYSwKYyl9LHRoaXMpO2Vsc2UgaWYoYSlmb3IodmFyIGUgaW4gYSlhLmhhc093blByb3BlcnR5KGUpJiZsKFtlXSxhW2VdLGMpO2Vsc2UgaD17fTtyZXR1cm4gdGhpc307YS5vbmNlPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1hLnNwbGl0KCIgIiksYT1mdW5jdGlvbigpe3ZhciBhPWIuYXBwbHkoY3x8bnVsbCxhcmd1bWVudHMpO2woZCxiLGMpO3JldHVybiBhfS5iaW5kKHRoaXMpO2coZCxiLGMsYSk7cmV0dXJuIHRoaXN9O2EuYWRkRXZlbnRMaXN0ZW5lcj1mdW5jdGlvbihhLGIsYyl7ZyhbYV0sYixjKX07YS5yZW1vdmVFdmVudExpc3RlbmVyPWZ1bmN0aW9uKGEsYixjKXtsKFthXSxiLGMpfTtyZXR1cm4gYX07Yi5ldmVudGluZy5FdmVudD1mdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihhLGQpe3RoaXMudHlwZT1hO3RoaXMuY2FuY2VsYWJsZT1kIT09Zj9kOiEwO3ZhciBjPSExLGU9bnVsbDt0aGlzLnByZXZlbnREZWZhdWx0PWZ1bmN0aW9uKCl7dGhpcy5jYW5jZWxhYmxlP2M9ITA6Yi53YXJuKCJFdmVudC5wcmV2ZW50RGVmYXVsdCA6OiBUcnlpbmcgdG8gcHJldmVudERlZmF1bHQgb24gYW4gRXZlbnQgdGhhdCBpc24ndCBjYW5jZWxhYmxlIil9Owp0aGlzLmlzRGVmYXVsdFByZXZlbnRlZD1mdW5jdGlvbigpe3JldHVybiBjfTtiLmNhbkRlZmluZVByb3BlcnR5JiZPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywidGFyZ2V0Iix7c2V0OmZ1bmN0aW9uKGEpe2U9YX0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGV9fSl9fX0pKHdpbmRvdyx3aW5kb3cuT1RIZWxwZXJzKTsKKGZ1bmN0aW9uKGcsYil7ZnVuY3Rpb24gZihhKXtmb3IodmFyIGIgaW4gYSlpZihhLmhhc093blByb3BlcnR5KGIpKXJldHVybiEwO3JldHVybiExfWIuc3VwcG9ydHNDbGFzc0xpc3Q9ZnVuY3Rpb24oKXt2YXIgYT10eXBlb2YoInVuZGVmaW5lZCIhPT1kb2N1bWVudCkmJiJjbGFzc0xpc3QiaW4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYSIpO2Iuc3VwcG9ydHNDbGFzc0xpc3Q9ZnVuY3Rpb24oKXtyZXR1cm4gYX07cmV0dXJuIGF9O2IucmVtb3ZlRWxlbWVudD1mdW5jdGlvbihhKXthJiZhLnBhcmVudE5vZGUmJmEucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChhKX07Yi5yZW1vdmVFbGVtZW50QnlJZD1mdW5jdGlvbihhKXt0aGlzLnJlbW92ZUVsZW1lbnQoYihhKSl9O2IucmVtb3ZlRWxlbWVudHNCeVR5cGU9ZnVuY3Rpb24oYSxiKXtpZihhKWZvcih2YXIgYz1hLmdldEVsZW1lbnRzQnlUYWdOYW1lKGIpO2MubGVuZ3RoOylhLnJlbW92ZUNoaWxkKGNbMF0pfTtiLmVtcHR5RWxlbWVudD0KZnVuY3Rpb24oYSl7Zm9yKDthLmZpcnN0Q2hpbGQ7KWEucmVtb3ZlQ2hpbGQoYS5maXJzdENoaWxkKTtyZXR1cm4gYX07Yi5jcmVhdGVFbGVtZW50PWZ1bmN0aW9uKGEsYixjKXthPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoYSk7aWYoYilmb3IodmFyIGUgaW4gYilpZigib2JqZWN0Ij09PXR5cGVvZiBiW2VdKXthW2VdfHwoYVtlXT17fSk7dmFyIGg9YltlXSxpO2ZvcihpIGluIGgpYVtlXVtpXT1oW2ldfWVsc2UiY2xhc3NOYW1lIj09PWU/YS5jbGFzc05hbWU9YltlXTphLnNldEF0dHJpYnV0ZShlLGJbZV0pO2MmJihhLmlubmVySFRNTD1jKTtyZXR1cm4gYX07Yi5jcmVhdGVCdXR0b249ZnVuY3Rpb24oYSxkLGMpe2E9Yi5jcmVhdGVFbGVtZW50KCJidXR0b24iLGQsYSk7aWYoYyl7Zm9yKHZhciBlIGluIGMpaWYoYy5oYXNPd25Qcm9wZXJ0eShlKSliLm9uKGEsZSxjW2VdKTthLl9ib3VuZEV2ZW50cz1jfXJldHVybiBhfTtiLm9uPWZ1bmN0aW9uKGEsYixjKXtpZihhLmFkZEV2ZW50TGlzdGVuZXIpYS5hZGRFdmVudExpc3RlbmVyKGIsCmMsITEpO2Vsc2UgaWYoYS5hdHRhY2hFdmVudClhLmF0dGFjaEV2ZW50KCJvbiIrYixjKTtlbHNle3ZhciBlPWFbIm9uIitiXTthWyJvbiIrYl09ZnVuY3Rpb24oKXtjLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtlJiZlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19fTtiLm9mZj1mdW5jdGlvbihhLGIsYyl7YS5yZW1vdmVFdmVudExpc3RlbmVyP2EucmVtb3ZlRXZlbnRMaXN0ZW5lcihiLGMsITEpOmEuZGV0YWNoRXZlbnQmJmEuZGV0YWNoRXZlbnQoIm9uIitiLGMpfTtiLmlzRGlzcGxheU5vbmU9ZnVuY3Rpb24oYSl7cmV0dXJuKDA9PT1hLm9mZnNldFdpZHRofHwwPT09YS5vZmZzZXRIZWlnaHQpJiYibm9uZSI9PT1iLmNzcyhhLCJkaXNwbGF5Iik/ITA6YS5wYXJlbnROb2RlJiZhLnBhcmVudE5vZGUuc3R5bGU/Yi5pc0Rpc3BsYXlOb25lKGEucGFyZW50Tm9kZSk6ITF9O2IuZmluZEVsZW1lbnRXaXRoRGlzcGxheU5vbmU9ZnVuY3Rpb24oYSl7cmV0dXJuKDA9PT1hLm9mZnNldFdpZHRofHwKMD09PWEub2Zmc2V0SGVpZ2h0KSYmIm5vbmUiPT09Yi5jc3MoYSwiZGlzcGxheSIpP2E6YS5wYXJlbnROb2RlJiZhLnBhcmVudE5vZGUuc3R5bGU/Yi5maW5kRWxlbWVudFdpdGhEaXNwbGF5Tm9uZShhLnBhcmVudE5vZGUpOm51bGx9O2Iub2JzZXJ2ZVN0eWxlQ2hhbmdlcz1mdW5jdGlvbihhLGQsYyl7dmFyIGU9e30saD1mdW5jdGlvbihjKXtzd2l0Y2goYyl7Y2FzZSAid2lkdGgiOnJldHVybiBiLndpZHRoKGEpO2Nhc2UgImhlaWdodCI6cmV0dXJuIGIuaGVpZ2h0KGEpO2RlZmF1bHQ6cmV0dXJuIGIuY3NzKGEpfX07ZC5mb3JFYWNoKGZ1bmN0aW9uKGEpe2VbYV09aChhKX0pO3ZhciBpPW5ldyBNdXRhdGlvbk9ic2VydmVyKGZ1bmN0aW9uKGEpe3ZhciBpPXt9O2EuZm9yRWFjaChmdW5jdGlvbihhKXsic3R5bGUiPT09YS5hdHRyaWJ1dGVOYW1lJiZkLmZvckVhY2goZnVuY3Rpb24oYSl7dmFyIGI9aChhKTtiIT09ZVthXSYmKGlbYV09W2VbYV0sYl0sZVthXT1iKX0pfSk7ZihpKSYmCmIuY2FsbEFzeW5jKGZ1bmN0aW9uKCl7Yy5jYWxsKG51bGwsaSl9KX0pO2kub2JzZXJ2ZShhLHthdHRyaWJ1dGVzOiEwLGF0dHJpYnV0ZUZpbHRlcjpbInN0eWxlIl0sY2hpbGRMaXN0OiExLGNoYXJhY3RlckRhdGE6ITEsc3VidHJlZTohMX0pO3JldHVybiBpfTtiLm9ic2VydmVOb2RlT3JDaGlsZE5vZGVSZW1vdmFsPWZ1bmN0aW9uKGEsZCl7dmFyIGM9bmV3IE11dGF0aW9uT2JzZXJ2ZXIoZnVuY3Rpb24oYSl7dmFyIGM9W107YS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2EucmVtb3ZlZE5vZGVzLmxlbmd0aCYmKGM9Yy5jb25jYXQoQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYS5yZW1vdmVkTm9kZXMpKSl9KTtjLmxlbmd0aCYmYi5jYWxsQXN5bmMoZnVuY3Rpb24oKXtkKGMpfSl9KTtjLm9ic2VydmUoYSx7YXR0cmlidXRlczohMSxjaGlsZExpc3Q6ITAsY2hhcmFjdGVyRGF0YTohMSxzdWJ0cmVlOiEwfSk7cmV0dXJuIGN9fSkod2luZG93LHdpbmRvdy5PVEhlbHBlcnMpOwooZnVuY3Rpb24oZyxiKXtiLk1vZGFsPWZ1bmN0aW9uKGYsYSl7dGhpcy5lbD1iLmNyZWF0ZUVsZW1lbnQoInNlY3Rpb24iLHtjbGFzc05hbWU6Ik9UX3Jvb3QgT1RfZGlhbG9nIE9UX21vZGFsIn0sYi50ZW1wbGF0ZSgiICAgICAgICA8aGVhZGVyPiAgICAgICAgICAgIDxoMT48JT0gdGl0bGUgJT48L2gxPiAgICAgICAgPC9oZWFkZXI+ICAgICAgICA8ZGl2IGNsYXNzPSdPVF9kaWFsb2ctYm9keSc+ICAgICAgICAgICAgPCU9IGJvZHkgJT4gICAgICAgIDwvZGl2PiAgICAiLHt0aXRsZTpmLGJvZHk6YX0pKTt0aGlzLmVsLnN0eWxlLmRpc3BsYXk9Im5vbmUiO2RvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGhpcy5lbCk7Yi5jZW50ZXJFbGVtZW50KHRoaXMuZWwpO2Iuc2hvdyh0aGlzLmVsKTt0aGlzLmNsb3NlPWZ1bmN0aW9uKCl7Yi5yZW1vdmVFbGVtZW50KHRoaXMuZWwpO3RoaXMuZWw9bnVsbDtyZXR1cm4gdGhpc319O2IudGJBbGVydD1mdW5jdGlvbihmLGEpe3ZhciBkPW5ldyBiLk1vZGFsKGYsCiI8ZGl2PiIrYSsiPC9kaXY+Iik7Yi5hZGRDbGFzcyhkLmVsLCJPVF90YmFsZXJ0Iik7dmFyIGM9Yi5jcmVhdGVFbGVtZW50KCJpbnB1dCIse2NsYXNzTmFtZToiT1RfY2xvc2VCdXR0b24iLHR5cGU6ImJ1dHRvbiIsdmFsdWU6ImNsb3NlIn0pO2QuZWwuYXBwZW5kQ2hpbGQoYyk7Yy5vbmNsaWNrPWZ1bmN0aW9uKCl7ZCYmZC5jbG9zZSgpO2Q9bnVsbH19fSkod2luZG93LHdpbmRvdy5PVEhlbHBlcnMpOwooZnVuY3Rpb24oZyxiKXtiLmFkZENsYXNzPWZ1bmN0aW9uKGEsZCl7aWYoMT09PWEubm9kZVR5cGUpe3ZhciBjPWQudHJpbSgpLnNwbGl0KC9ccysvKSxlLGg7aWYoYi5zdXBwb3J0c0NsYXNzTGlzdCgpKXtlPTA7Zm9yKGg9Yy5sZW5ndGg7ZTxoOysrZSlhLmNsYXNzTGlzdC5hZGQoY1tlXSl9ZWxzZXtpZighYS5jbGFzc05hbWUmJjE9PT1jLmxlbmd0aClhLmNsYXNzTmFtZT1kO2Vsc2V7dmFyIGk9IiAiK2EuY2xhc3NOYW1lKyIgIjtlPTA7Zm9yKGg9Yy5sZW5ndGg7ZTxoOysrZSl+aS5pbmRleE9mKCIgIitjW2VdKyIgIil8fChpKz1jW2VdKyIgIik7YS5jbGFzc05hbWU9aS50cmltKCl9cmV0dXJuIHRoaXN9fX07Yi5yZW1vdmVDbGFzcz1mdW5jdGlvbihhLGQpe2lmKGQmJjE9PT1hLm5vZGVUeXBlKXt2YXIgYz1kLnRyaW0oKS5zcGxpdCgvXHMrLyksZSxoO2lmKGIuc3VwcG9ydHNDbGFzc0xpc3QoKSl7ZT0wO2ZvcihoPWMubGVuZ3RoO2U8aDsrK2UpYS5jbGFzc0xpc3QucmVtb3ZlKGNbZV0pfWVsc2V7dmFyIGk9CigiICIrYS5jbGFzc05hbWUrIiAiKS5yZXBsYWNlKC9bXHMrXS8sIiAiKTtlPTA7Zm9yKGg9Yy5sZW5ndGg7ZTxoOysrZSlpPWkucmVwbGFjZSgiICIrY1tlXSsiICIsIiAiKTthLmNsYXNzTmFtZT1pLnRyaW0oKTtyZXR1cm4gdGhpc319fTt2YXIgZj1mdW5jdGlvbihhKXtyZXR1cm4gMDxhLm9mZnNldEhlaWdodD9hLm9mZnNldEhlaWdodCsicHgiOmIuY3NzKGEsImhlaWdodCIpfTtiLndpZHRoPWZ1bmN0aW9uKGEsZCl7cmV0dXJuIGQ/KGIuY3NzKGEsIndpZHRoIixkKSx0aGlzKTpiLmlzRGlzcGxheU5vbmUoYSk/Yi5tYWtlVmlzaWJsZUFuZFlpZWxkKGEsZnVuY3Rpb24oKXtyZXR1cm4gMDxhLm9mZnNldFdpZHRoP2Eub2Zmc2V0V2lkdGgrInB4IjpiLmNzcyhhLCJ3aWR0aCIpfSk6MDxhLm9mZnNldFdpZHRoP2Eub2Zmc2V0V2lkdGgrInB4IjpiLmNzcyhhLCJ3aWR0aCIpfTtiLmhlaWdodD1mdW5jdGlvbihhLGQpe3JldHVybiBkPyhiLmNzcyhhLCJoZWlnaHQiLGQpLHRoaXMpOgpiLmlzRGlzcGxheU5vbmUoYSk/Yi5tYWtlVmlzaWJsZUFuZFlpZWxkKGEsZnVuY3Rpb24oKXtyZXR1cm4gZihhKX0pOmYoYSl9O2IuY2VudGVyRWxlbWVudD1mdW5jdGlvbihhLGQsYyl7ZHx8KGQ9cGFyc2VJbnQoYi53aWR0aChhKSwxMCkpO2N8fChjPXBhcnNlSW50KGIuaGVpZ2h0KGEpLDEwKSk7Yi5jc3MoYSwibWFyZ2luIiwtMC41KmMrInB4IDAgMCAiKygtMC41KmQrInB4IikpO2IuYWRkQ2xhc3MoYSwiT1RfY2VudGVyZWQiKX19KSh3aW5kb3csd2luZG93Lk9USGVscGVycyk7CihmdW5jdGlvbihnLGIsZil7dmFyIGE9e30sZD17fTtiLnNob3c9ZnVuY3Rpb24oYyl7dmFyIGU9Yy5zdHlsZS5kaXNwbGF5O2lmKCIiPT09ZXx8Im5vbmUiPT09ZSljLnN0eWxlLmRpc3BsYXk9YVtjXXx8IiIsZGVsZXRlIGFbY107aWYoIm5vbmUiPT09Yy5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3LmdldENvbXB1dGVkU3R5bGUoYyxudWxsKS5nZXRQcm9wZXJ0eVZhbHVlKCJkaXNwbGF5Iikpe2FbY109Im5vbmUiO2U9Yy5zdHlsZTtpZihkW2Mub3duZXJEb2N1bWVudF0mJmRbYy5vd25lckRvY3VtZW50XVtjLm5vZGVOYW1lXSljPWRbYy5vd25lckRvY3VtZW50XVtjLm5vZGVOYW1lXTtlbHNle2RbYy5vd25lckRvY3VtZW50XXx8KGRbYy5vd25lckRvY3VtZW50XT17fSk7dmFyIGg9Yy5vd25lckRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoYy5ub2RlTmFtZSk7Yy5vd25lckRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoaCk7Yz1kW2Mub3duZXJEb2N1bWVudF1bYy5ub2RlTmFtZV09Yi5jc3MoaCwKImRpc3BsYXkiKTtiLnJlbW92ZUVsZW1lbnQoaCl9ZS5kaXNwbGF5PWN9cmV0dXJuIHRoaXN9O2IuaGlkZT1mdW5jdGlvbihiKXtpZigibm9uZSIhPT1iLnN0eWxlLmRpc3BsYXkpcmV0dXJuIGFbYl09Yi5zdHlsZS5kaXNwbGF5LGIuc3R5bGUuZGlzcGxheT0ibm9uZSIsdGhpc307Yi5jc3M9ZnVuY3Rpb24oYSxiLGQpe2lmKCJzdHJpbmciIT09dHlwZW9mIGIpe3ZhciBhPWEuc3R5bGUsaTtmb3IoaSBpbiBiKWFbaV09YltpXTtyZXR1cm4gdGhpc31pZihkIT09ZilyZXR1cm4gYS5zdHlsZVtiXT1kLHRoaXM7Yj1iLnJlcGxhY2UoLyhbQS1aXXxebXMpL2csIi0kMSIpLnRvTG93ZXJDYXNlKCk7aT1hLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcuZ2V0Q29tcHV0ZWRTdHlsZShhLG51bGwpLmdldFByb3BlcnR5VmFsdWUoYik7IiI9PT1pJiYoaT1hLnN0eWxlW2JdKTtyZXR1cm4gaX07Yi5hcHBseUNTUz1mdW5jdGlvbihhLGQsaCl7dmFyIGk9e30sZjtmb3IoZiBpbiBkKWQuaGFzT3duUHJvcGVydHkoZikmJgooaVtmXT1hLnN0eWxlW2ZdLGIuY3NzKGEsZixkW2ZdKSk7aD1oKCk7Zm9yKGYgaW4gZClkLmhhc093blByb3BlcnR5KGYpJiZiLmNzcyhhLGYsaVtmXXx8IiIpO3JldHVybiBofTtiLm1ha2VWaXNpYmxlQW5kWWllbGQ9ZnVuY3Rpb24oYSxkKXt2YXIgaD1iLmZpbmRFbGVtZW50V2l0aERpc3BsYXlOb25lKGEpO2lmKGgpcmV0dXJuIGIuYXBwbHlDU1MoaCx7ZGlzcGxheToiYmxvY2siLHZpc2liaWxpdHk6ImhpZGRlbiJ9LGQpfX0pKHdpbmRvdyx3aW5kb3cuT1RIZWxwZXJzKTsKKGZ1bmN0aW9uKGcsYixmKXtmdW5jdGlvbiBhKGEpe2lmKCJzdHJpbmciPT09dHlwZW9mIGEpcmV0dXJuIGE7dmFyIGI9W10sZDtmb3IoZCBpbiBhKWIucHVzaChlbmNvZGVVUklDb21wb25lbnQoZCkrIj0iK2VuY29kZVVSSUNvbXBvbmVudChhW2RdKSk7cmV0dXJuIGIuam9pbigiJiIpLnJlcGxhY2UoL1wrL2csIiUyMCIpfWIuZ2V0WE1MPWZ1bmN0aW9uKGEsZCl7dmFyIGg9ZCYmZC5zdWNjZXNzLGk9Yi5leHRlbmQoZC5oZWFkZXJzfHx7fSx7IkNvbnRlbnQtVHlwZSI6ImFwcGxpY2F0aW9uL3htbCJ9KTtiLmdldChhLGIuZXh0ZW5kKGR8fHt9LHtzdWNjZXNzOmZ1bmN0aW9uKGEpe3ZhciBiPWEudGFyZ2V0LnJlc3BvbnNlWE1MLGM7Yj8oYz1iLmRvY3VtZW50RWxlbWVudCxjPSFjfHwhYy5ub2RlTmFtZXx8InBhcnNlcmVycm9yIj09PWMubm9kZU5hbWU/ITE6ITApOmM9ITE7Yz9oJiZoKGIsYSxhLnRhcmdldCk6ZCYmZC5lcnJvciYmZC5lcnJvcihhLGEudGFyZ2V0KX0saGVhZGVyczppfSkpfTsKYi5nZXRKU09OPWZ1bmN0aW9uKGEsZCl7dmFyIGg9ZCYmZC5zdWNjZXNzO2IuZ2V0KGEsYi5leHRlbmQoZHx8e30se3N1Y2Nlc3M6ZnVuY3Rpb24oYSl7dmFyIGI7dHJ5e2I9SlNPTi5wYXJzZShhLnRhcmdldC5yZXNwb25zZVRleHQpfWNhdGNoKGMpe2QmJmQuZXJyb3ImJmQuZXJyb3IoYSxhLnRhcmdldCk7cmV0dXJufWgmJmgoYixhLGEudGFyZ2V0KX0saGVhZGVyczp7IkNvbnRlbnQtVHlwZSI6ImFwcGxpY2F0aW9uL2pzb24ifX0pKX07Yi5nZXQ9ZnVuY3Rpb24oYSxiKXt2YXIgaD1uZXcgWE1MSHR0cFJlcXVlc3QsZj1ifHx7fTtkKGgsZi5zdWNjZXNzLGYuZXJyb3IpO2YucHJvY2VzcyYmaC5hZGRFdmVudExpc3RlbmVyKCJwcm9ncmVzcyIsZi5wcm9ncmVzcywhMSk7Zi5jYW5jZWxsZWQmJmguYWRkRXZlbnRMaXN0ZW5lcigiYWJvcnQiLGYuY2FuY2VsbGVkLCExKTtoLm9wZW4oIkdFVCIsYSwhMCk7Zi5oZWFkZXJzfHwoZi5oZWFkZXJzPXt9KTtmb3IodmFyIGcgaW4gZi5oZWFkZXJzKWguc2V0UmVxdWVzdEhlYWRlcihnLApmLmhlYWRlcnNbZ10pO2guc2VuZCgpfTtiLnBvc3Q9ZnVuY3Rpb24oYixlKXt2YXIgaD1uZXcgWE1MSHR0cFJlcXVlc3QsZj1lfHx7fTtkKGgsZi5zdWNjZXNzLGYuZXJyb3IpO2YucHJvY2VzcyYmaC5hZGRFdmVudExpc3RlbmVyKCJwcm9ncmVzcyIsZi5wcm9ncmVzcywhMSk7Zi5jYW5jZWxsZWQmJmguYWRkRXZlbnRMaXN0ZW5lcigiYWJvcnQiLGYuY2FuY2VsbGVkLCExKTtoLm9wZW4oIlBPU1QiLGIsITApO2YuaGVhZGVyc3x8KGYuaGVhZGVycz17fSk7Zm9yKHZhciBnIGluIGYuaGVhZGVycyloLnNldFJlcXVlc3RIZWFkZXIoZyxmLmhlYWRlcnNbZ10pO2guc2VuZChhKGYuZGF0YSkpfTtiLnBvc3RGb3JtRGF0YT1mdW5jdGlvbihhLGQsaCl7aWYoIWQpdGhyb3cgRXJyb3IoIk9USGVscGVycy5wb3N0Rm9ybURhdGEgbXVzdCBiZSBwYXNzZWQgYSBkYXRhIG9wdGlvbnMuIik7dmFyIGY9bmV3IEZvcm1EYXRhLGc7Zm9yKGcgaW4gZClmLmFwcGVuZChnLGRbZ10pO2IucG9zdChhLGIuZXh0ZW5kKGh8fAp7fSx7ZGF0YTpmfSkpfTtiLmdldEpTT05QPWZ1bmN0aW9uKGEsZCl7dmFyIGgsaT1kb2N1bWVudC5oZWFkfHxkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgiaGVhZCIpWzBdLGcsaj1hLGw9Yi5leHRlbmQoZHx8e30se2NhbGxiYWNrUGFyYW1ldGVyOiJjYWxsYmFjayJ9KSxtPWZ1bmN0aW9uKCl7ZyYmKGNsZWFyVGltZW91dChnKSxnPW51bGwpO2gmJihoLm9ubG9hZD1oLm9ucmVhZHlzdGF0ZWNoYW5nZT1udWxsLGIucmVtb3ZlRWxlbWVudChoKSxoPWYpfSxwPWZ1bmN0aW9uKCl7aWYoKCFoLnJlYWR5U3RhdGV8fC9sb2FkZWR8Y29tcGxldGUvLnRlc3QoaC5yZWFkeVN0YXRlKSkmJmcpY2xlYXJUaW1lb3V0KGcpLGc9bnVsbH07bC5jYWxsYmFja05hbWU9Impzb25wX2NhbGxiYWNrXyIrICtuZXcgRGF0ZTt0aGlzLmpzb25wX2NhbGxiYWNrc1tsLmNhbGxiYWNrTmFtZV09ZnVuY3Rpb24oYSl7bSgpO2wuc3VjY2VzcyYmbC5zdWNjZXNzKGEpfTtqKz0oL1w/Ly50ZXN0KGopPyImIjoKIj8iKStsLmNhbGxiYWNrUGFyYW1ldGVyKyI9IitsLmNhbGxiYWNrTmFtZTtoPWIuY3JlYXRlRWxlbWVudCgic2NyaXB0Iix7YXN5bmM6ImFzeW5jIixzcmM6aixvbmxvYWQ6cCxvbnJlYWR5c3RhdGVjaGFuZ2U6cH0pO2kuYXBwZW5kQ2hpbGQoaCk7Zz1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7bSgpO2IuZXJyb3IoIlRoZSBKU09OUCByZXF1ZXN0IHRvICIraisiIHRpbWVkIG91dCBhZnRlciAzMDAwMG1zLiIpO2wuZXJyb3ImJmwuZXJyb3IoIlRoZSBKU09OUCByZXF1ZXN0IHRvICIrYSsiIHRpbWVkIG91dCBhZnRlciAzMDAwMG1zLiIsaixsKX0sM0U0KX07dmFyIGQ9ZnVuY3Rpb24oYSxiLGQpe2EuYWRkRXZlbnRMaXN0ZW5lcigibG9hZCIsZnVuY3Rpb24oYSl7dmFyIGM9YS50YXJnZXQuc3RhdHVzOzIwMDw9YyYmMzAwPmN8fDMwND09PWM/YiYmYi5hcHBseShudWxsLGFyZ3VtZW50cyk6ZCYmZChhKX0sITEpO2QmJmEuYWRkRXZlbnRMaXN0ZW5lcigiZXJyb3IiLGQsITEpfX0pKHdpbmRvdywKd2luZG93Lk9USGVscGVycyk7CiFmdW5jdGlvbihnKXtnLk9UfHwoZy5PVD17fSk7T1QuJD1PVEhlbHBlcnMubm9Db25mbGljdCgpO09ULiQuZXZlbnRpbmcoT1QpO09ULk1vZGFsPU9ULiQuTW9kYWw7T1QuJC51c2VMb2dIZWxwZXJzKE9UKTt2YXIgYj0hMSxmPU9ULnNldExvZ0xldmVsO09ULnNldExvZ0xldmVsPWZ1bmN0aW9uKGEpe09ULiQuc2V0TG9nTGV2ZWwoYSk7YT1mLmNhbGwoT1QsYSk7aWYoT1Quc2hvdWxkTG9nKE9ULkRFQlVHKSYmIWIpe09ULmRlYnVnKCJPcGVuVG9rIEphdmFTY3JpcHQgbGlicmFyeSAiK09ULnByb3BlcnRpZXMudmVyc2lvbik7T1QuZGVidWcoIlJlbGVhc2Ugbm90ZXM6ICIrT1QucHJvcGVydGllcy53ZWJzaXRlVVJMKyIvb3BlbnRvay93ZWJydGMvZG9jcy9qcy9yZWxlYXNlLW5vdGVzLmh0bWwiKTtPVC5kZWJ1ZygiS25vd24gaXNzdWVzOiAiK09ULnByb3BlcnRpZXMud2Vic2l0ZVVSTCsiL29wZW50b2svd2VicnRjL2RvY3MvanMvcmVsZWFzZS1ub3Rlcy5odG1sI2tub3duSXNzdWVzIik7Yj0KdHJ1ZX1PVC5kZWJ1ZygiVEIuc2V0TG9nTGV2ZWwoIithKyIpIik7cmV0dXJuIGF9O09ULnNldExvZ0xldmVsKE9ULnByb3BlcnRpZXMuZGVidWc/T1QuREVCVUc6T1QuRVJST1IpfSh3aW5kb3cpOwooZnVuY3Rpb24oZyl7Zy5PVHx8KGcuT1Q9e30pO2lmKCFPVC5wcm9wZXJ0aWVzKXRocm93IEVycm9yKCJPVC5wcm9wZXJ0aWVzIGRvZXMgbm90IGV4aXN0LCBwbGVhc2UgZW5zdXJlIHRoYXQgeW91IGluY2x1ZGUgYSB2YWxpZCBwcm9wZXJ0aWVzIGZpbGUuIik7dmFyIGI9T1QsZj1PVC5wcm9wZXJ0aWVzLGE9T1QuJC5jbG9uZShmKTthLmRlYnVnPSJ0cnVlIj09PWYuZGVidWd8fCEwPT09Zi5kZWJ1ZzthLnN1cHBvcnRTU0w9InRydWUiPT09Zi5zdXBwb3J0U1NMfHwhMD09PWYuc3VwcG9ydFNTTDthLnN1cHBvcnRTU0wmJigwPD1nLmxvY2F0aW9uLnByb3RvY29sLmluZGV4T2YoImh0dHBzIil8fDA8PWcubG9jYXRpb24ucHJvdG9jb2wuaW5kZXhPZigiY2hyb21lLWV4dGVuc2lvbiIpKT8oYS5hc3NldFVSTD1hLmNkblVSTFNTTCsiL3dlYnJ0Yy8iK2EudmVyc2lvbixhLmxvZ2dpbmdVUkw9YS5sb2dnaW5nVVJMU1NMLGEuYXBpVVJMPWEuYXBpVVJMU1NMKTphLmFzc2V0VVJMPWEuY2RuVVJMKwoiL3dlYnJ0Yy8iK2EudmVyc2lvbjthLmNvbmZpZ1VSTD1hLmFzc2V0VVJMKyIvanMvZHluYW1pY19jb25maWcubWluLmpzIjthLmNzc1VSTD1hLmFzc2V0VVJMKyIvY3NzL290Lm1pbi5jc3MiO2IucHJvcGVydGllcz1hfSkod2luZG93KTsKKGZ1bmN0aW9uKCl7T1QuQ29uZmlnPWZ1bmN0aW9uKCl7dmFyIGc9ITEsYj17fSxmPXt9LGEsZD1kb2N1bWVudC5oZWFkfHxkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgiaGVhZCIpWzBdLGMsZT1mdW5jdGlvbigpe2MmJihjbGVhclRpbWVvdXQoYyksYz1udWxsKTthJiYoYS5vbmxvYWQ9YS5vbnJlYWR5c3RhdGVjaGFuZ2U9bnVsbCxkJiZhLnBhcmVudE5vZGUmJmQucmVtb3ZlQ2hpbGQoYSksYT12b2lkIDApfSxoPWZ1bmN0aW9uKCl7aWYoIWEucmVhZHlTdGF0ZXx8L2xvYWRlZHxjb21wbGV0ZS8udGVzdChhLnJlYWR5U3RhdGUpKWMmJihjbGVhclRpbWVvdXQoYyksYz1udWxsKSxnfHxpLl9vbkxvYWRUaW1lb3V0KCl9LGk9e2xvYWRUaW1lb3V0OjRFMyxsb2FkOmZ1bmN0aW9uKGIpe2lmKCFiKXRocm93IEVycm9yKCJZb3UgbXVzdCBwYXNzIGEgdmFsaWQgY29uZmlnVXJsIHRvIENvbmZpZy5sb2FkIik7Zz0hMTtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7YT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzY3JpcHQiKTsKYS5hc3luYz0iYXN5bmMiO2Euc3JjPWI7YS5vbmxvYWQ9YS5vbnJlYWR5c3RhdGVjaGFuZ2U9aC5iaW5kKHRoaXMpO2QuYXBwZW5kQ2hpbGQoYSl9LDEpO2M9c2V0VGltZW91dChmdW5jdGlvbigpe2kuX29uTG9hZFRpbWVvdXQoKX0sdGhpcy5sb2FkVGltZW91dCl9LF9vbkxvYWRUaW1lb3V0OmZ1bmN0aW9uKCl7ZSgpO09ULndhcm4oIlRCIER5bmFtaWNDb25maWcgZmFpbGVkIHRvIGxvYWQgaW4gIitpLmxvYWRUaW1lb3V0KyIgbXMiKTt0aGlzLnRyaWdnZXIoImR5bmFtaWNDb25maWdMb2FkRmFpbGVkIil9LGlzTG9hZGVkOmZ1bmN0aW9uKCl7cmV0dXJuIGd9LHJlc2V0OmZ1bmN0aW9uKCl7ZSgpO2c9ITE7Yj17fTtmPXt9fSxyZXBsYWNlV2l0aDpmdW5jdGlvbihhKXtlKCk7YXx8KGE9e30pO2I9YS5nbG9iYWx8fHt9O2Y9YS5wYXJ0bmVyc3x8e307Z3x8KGc9ITApO3RoaXMudHJpZ2dlcigiZHluYW1pY0NvbmZpZ0NoYW5nZWQiKX0sZ2V0OmZ1bmN0aW9uKGEsYyxkKXthPWQmJmZbZF0mJgpmW2RdW2FdP2ZbZF1bYV06YlthXTtyZXR1cm4gYT9hW2NdOm51bGx9fTtPVC4kLmV2ZW50aW5nKGkpO3JldHVybiBpfSgpfSkod2luZG93KTsKKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gZyhhLGQsYyxlLGgpe2Q9ZD9wYXJzZUludChkLDEwKTpwYXJzZUludChPVC4kLndpZHRoKGEucGFyZW50Tm9kZSksMTApO2M9Yz9wYXJzZUludChjLDEwKTpwYXJzZUludChPVC4kLmhlaWdodChhLnBhcmVudE5vZGUpLDEwKTtpZighKDA9PT1kfHwwPT09YykpaWYoZXx8KGU9YiksYz0oZCswKS9jLGQ9e3dpZHRoOiIxMDAlIixoZWlnaHQ6IjEwMCUiLGxlZnQ6MCx0b3A6MH0sYz5lPyhlPTEwMCooYy9lKSxkLmhlaWdodD1lKyIlIixkLnRvcD0iLSIrKGUtMTAwKS8yKyIlIik6YzxlJiYoZT0xMDAqKGUvYyksZC53aWR0aD1lKyIlIixkLmxlZnQ9Ii0iKyhlLTEwMCkvMisiJSIpLE9ULiQuY3NzKGEsZCksZT1hLnF1ZXJ5U2VsZWN0b3IoInZpZGVvIikpaD8oaD1hLm9mZnNldFdpZHRoLGE9YS5vZmZzZXRIZWlnaHQsZD17d2lkdGg6YSsicHgiLGhlaWdodDpoKyJweCIsbWFyZ2luVG9wOiIiLG1hcmdpbkxlZnQ6IiJ9LGE9aC1hLGQubWFyZ2luTGVmdD0KYS8yKyJweCIsZC5tYXJnaW5Ub3A9LShhLzIpKyJweCIsT1QuJC5jc3MoZSxkKSk6T1QuJC5jc3MoZSx7d2lkdGg6IiIsaGVpZ2h0OiIiLG1hcmdpblRvcDoiIixtYXJnaW5MZWZ0OiIifSl9dmFyIGI9NC8zLGY9ZnVuY3Rpb24oYSxiKXt2YXIgYyxlO2EmJmEubm9kZU5hbWU/KGM9YSwoIWMuZ2V0QXR0cmlidXRlKCJpZCIpfHwwPT09Yy5nZXRBdHRyaWJ1dGUoImlkIikubGVuZ3RoKSYmYy5zZXRBdHRyaWJ1dGUoImlkIiwiT1RfIitPVC4kLnV1aWQoKSksZT1jLmdldEF0dHJpYnV0ZSgiaWQiKSk6KGM9T1QuJChhKSxlPWF8fCJPVF8iK09ULiQudXVpZCgpKTtjP09ULiQuZW1wdHlFbGVtZW50KGMpOihjPU9ULiQuY3JlYXRlRWxlbWVudCgiZGl2Iix7aWQ6ZX0pLGMuc3R5bGUuYmFja2dyb3VuZENvbG9yPSIjMDAwMDAwIixkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGMpKTtudWxsPT1ifHwicmVwbGFjZSI9PWJ8fChlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpLGUuaWQ9CiJPVF8iK09ULiQudXVpZCgpLCJhcHBlbmQiPT1iPyhjLmFwcGVuZENoaWxkKGUpLGM9ZSk6ImJlZm9yZSI9PWI/KGMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoZSxjKSxjPWUpOiJhZnRlciI9PWImJihjLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGUsYy5uZXh0U2libGluZyksYz1lKSk7cmV0dXJuIGN9O09ULldpZGdldFZpZXc9ZnVuY3Rpb24oYSxiKXt2YXIgYz1mKGEsYiYmYi5pbnNlcnRNb2RlKSxlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpLGgsaSxrLGosbCxtPSEwO2ImJih3aWR0aD1iLndpZHRoLGhlaWdodD1iLmhlaWdodCx3aWR0aCYmIm51bWJlciI9PXR5cGVvZiB3aWR0aCYmKHdpZHRoKz0icHgiKSxoZWlnaHQmJiJudW1iZXIiPT10eXBlb2YgaGVpZ2h0JiYoaGVpZ2h0Kz0icHgiKSxjLnN0eWxlLndpZHRoPXdpZHRoP3dpZHRoOiIyNjRweCIsYy5zdHlsZS5oZWlnaHQ9aGVpZ2h0P2hlaWdodDoiMTk4cHgiLGMuc3R5bGUub3ZlcmZsb3c9ImhpZGRlbiIsKHZvaWQgMD09PQpiLm1pcnJvcnx8Yi5taXJyb3IpJiZPVC4kLmFkZENsYXNzKGMsIk9UX21pcnJvcmVkIikpO2IuY2xhc3NOYW1lcyYmT1QuJC5hZGRDbGFzcyhjLGIuY2xhc3NOYW1lcyk7T1QuJC5hZGRDbGFzcyhjLCJPVF9sb2FkaW5nIik7T1QuJC5hZGRDbGFzcyhlLCJPVF92aWRlby1jb250YWluZXIiKTtlLnN0eWxlLndpZHRoPWMuc3R5bGUud2lkdGg7ZS5zdHlsZS5oZWlnaHQ9Yy5zdHlsZS5oZWlnaHQ7Yy5hcHBlbmRDaGlsZChlKTtnKGUsYy5vZmZzZXRXaWR0aCxjLm9mZnNldEhlaWdodCk7bD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTtPVC4kLmFkZENsYXNzKGwsIk9UX3ZpZGVvLWxvYWRpbmciKTtlLmFwcGVuZENoaWxkKGwpO2o9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7T1QuJC5hZGRDbGFzcyhqLCJPVF92aWRlby1wb3N0ZXIiKTtlLmFwcGVuZENoaWxkKGopO2g9T1QuJC5vYnNlcnZlU3R5bGVDaGFuZ2VzKGMsWyJ3aWR0aCIsImhlaWdodCJdLGZ1bmN0aW9uKGEpe2coZSwKYS53aWR0aD9hLndpZHRoWzFdOmMub2Zmc2V0V2lkdGgsYS5oZWlnaHQ/YS5oZWlnaHRbMV06Yy5vZmZzZXRIZWlnaHQsaT9pLmFzcGVjdFJhdGlvOm51bGwpfSk7az1PVC4kLm9ic2VydmVOb2RlT3JDaGlsZE5vZGVSZW1vdmFsKGMsZnVuY3Rpb24oYSl7aWYoaSl7aWYoYS5zb21lKGZ1bmN0aW9uKGEpe3JldHVybiBhPT09ZXx8YS5ub2RlTmFtZT09PSJWSURFTyJ9KSl7aS5kZXN0cm95KCk7aT1udWxsfWlmKGUpe09ULiQucmVtb3ZlRWxlbWVudChlKTtlPW51bGx9aWYoaCl7aC5kaXNjb25uZWN0KCk7aD1udWxsfWlmKGspe2suZGlzY29ubmVjdCgpO2s9bnVsbH19fSk7dGhpcy5kZXN0cm95PWZ1bmN0aW9uKCl7aWYoaCl7aC5kaXNjb25uZWN0KCk7aD1udWxsfWlmKGspe2suZGlzY29ubmVjdCgpO2s9bnVsbH1pZihpKXtpLmRlc3Ryb3koKTtpPW51bGx9aWYoYyl7T1QuJC5yZW1vdmVFbGVtZW50KGMpO2M9bnVsbH19O09iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRoaXMse3Nob3dQb3N0ZXI6e2dldDpmdW5jdGlvbigpe3JldHVybiFPVC4kLmlzRGlzcGxheU5vbmUoail9LApzZXQ6ZnVuY3Rpb24oYSl7YT9PVC4kLnNob3coaik6T1QuJC5oaWRlKGopfX0scG9zdGVyOntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gT1QuJC5jc3MoaiwiYmFja2dyb3VuZEltYWdlIil9LHNldDpmdW5jdGlvbihhKXtPVC4kLmNzcyhqLCJiYWNrZ3JvdW5kSW1hZ2UiLCJ1cmwoIithKyIpIil9fSxsb2FkaW5nOntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gbX0sc2V0OmZ1bmN0aW9uKGEpeyhtPWEpP09ULiQuYWRkQ2xhc3MoYywiT1RfbG9hZGluZyIpOk9ULiQucmVtb3ZlQ2xhc3MoYywiT1RfbG9hZGluZyIpfX0sdmlkZW86e2dldDpmdW5jdGlvbigpe3JldHVybiBpfSxzZXQ6ZnVuY3Rpb24oYSl7aSYmaS5kZXN0cm95KCk7YS5hcHBlbmRUbyhlKTtpPWE7aS5vbih7b3JpZW50YXRpb25DaGFuZ2VkOmZ1bmN0aW9uKCl7ZyhlLGMub2Zmc2V0V2lkdGgsYy5vZmZzZXRIZWlnaHQsaS5hc3BlY3RSYXRpbyxpLmlzUm90YXRlZCl9fSk7ZyhlLGMub2Zmc2V0V2lkdGgsYy5vZmZzZXRIZWlnaHQsCmk/aS5hc3BlY3RSYXRpbzpudWxsLGk/aS5pc1JvdGF0ZWQ6bnVsbCl9fSxkb21FbGVtZW50OntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gY319LGRvbUlkOntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gYy5nZXRBdHRyaWJ1dGUoImlkIil9fX0pO3RoaXMuYWRkRXJyb3I9ZnVuY3Rpb24oYSl7Yy5pbm5lckhUTUw9IjxwPiIrYSsiPHA+IjtPVC4kLmFkZENsYXNzKGMsIk9UX3N1YnNjcmliZXJfZXJyb3IiKX19fSkod2luZG93KTsKKGZ1bmN0aW9uKGcpe3ZhciBiPWZ1bmN0aW9uKCl7aWYobmF2aWdhdG9yLmdldFVzZXJNZWRpYSlyZXR1cm4gbmF2aWdhdG9yLmdldFVzZXJNZWRpYS5iaW5kKG5hdmlnYXRvcik7aWYobmF2aWdhdG9yLm1vekdldFVzZXJNZWRpYSlyZXR1cm4gbmF2aWdhdG9yLm1vekdldFVzZXJNZWRpYS5iaW5kKG5hdmlnYXRvcik7aWYobmF2aWdhdG9yLndlYmtpdEdldFVzZXJNZWRpYSlyZXR1cm4gbmF2aWdhdG9yLndlYmtpdEdldFVzZXJNZWRpYS5iaW5kKG5hdmlnYXRvcil9KCk7aWYobmF2aWdhdG9yLndlYmtpdEdldFVzZXJNZWRpYSl7aWYod2Via2l0TWVkaWFTdHJlYW0ucHJvdG90eXBlLmdldFZpZGVvVHJhY2tzfHwod2Via2l0TWVkaWFTdHJlYW0ucHJvdG90eXBlLmdldFZpZGVvVHJhY2tzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudmlkZW9UcmFja3N9KSx3ZWJraXRNZWRpYVN0cmVhbS5wcm90b3R5cGUuZ2V0QXVkaW9UcmFja3N8fCh3ZWJraXRNZWRpYVN0cmVhbS5wcm90b3R5cGUuZ2V0QXVkaW9UcmFja3M9CmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYXVkaW9UcmFja3N9KSx3ZWJraXRSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0TG9jYWxTdHJlYW1zfHwod2Via2l0UlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldExvY2FsU3RyZWFtcz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmxvY2FsU3RyZWFtc30pLCF3ZWJraXRSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0UmVtb3RlU3RyZWFtcyl3ZWJraXRSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0UmVtb3RlU3RyZWFtcz1mdW5jdGlvbigpe3JldHVybiB0aGlzLnJlbW90ZVN0cmVhbXN9fWVsc2UgaWYobmF2aWdhdG9yLm1vekdldFVzZXJNZWRpYSYmKE1lZGlhU3RyZWFtLnByb3RvdHlwZS5nZXRWaWRlb1RyYWNrc3x8KE1lZGlhU3RyZWFtLnByb3RvdHlwZS5nZXRWaWRlb1RyYWNrcz1mdW5jdGlvbigpe3JldHVybltdfSksIU1lZGlhU3RyZWFtLnByb3RvdHlwZS5nZXRBdWRpb1RyYWNrcykpTWVkaWFTdHJlYW0ucHJvdG90eXBlLmdldEF1ZGlvVHJhY2tzPQpmdW5jdGlvbigpe3JldHVybltdfTt2YXIgZj17UEVSTUlTU0lPTl9ERU5JRUQ6IlBFUk1JU1NJT05fREVOSUVEIixOT1RfU1VQUE9SVEVEX0VSUk9SOiJBIGNvbnN0cmFpbnQgc3BlY2lmaWVkIGlzIG5vdCBzdXBwb3J0ZWQgYnkgdGhlIGJyb3dzZXIuIixNQU5EQVRPUllfVU5TQVRJU0ZJRURfRVJST1I6IkNPTlNUUkFJTlRfTk9UX1NBVElTRklFRCJ9LGE9ezE6IlBFUk1JU1NJT05fREVOSUVEIn0sZD17UEVSTUlTU0lPTl9ERU5JRUQ6IlVzZXIgZGVuaWVkIHBlcm1pc3Npb24gZm9yIHNjcmlwdHMgZnJvbSB0aGlzIG9yaWdpbiB0byBhY2Nlc3MgdGhlIG1lZGlhIGRldmljZS4iLENPTlNUUkFJTlRfTk9UX1NBVElTRklFRDoiT25lIG9mIHRoZSBtYW5kYXRvcnkgY29uc3RyYWludHMgY291bGQgbm90IGJlIHNhdGlzZmllZC4ifSxjPWZ1bmN0aW9uKGEsYil7dmFyIGM9YlthXSxlPWRbY107ZXx8KGU9ZXZlbnROYW1lLGM9YSk7cmV0dXJue25hbWU6YyxtZXNzYWdlOmV9fSxlPWZ1bmN0aW9uKGEpe2lmKCFhfHwKIU9ULiQuaXNPYmplY3QoYSkpcmV0dXJuITA7Zm9yKHZhciBiIGluIGEpaWYoYVtiXSlyZXR1cm4hMTtyZXR1cm4hMH07T1QuJC5zdXBwb3J0c1dlYlJUQz1mdW5jdGlvbigpe3ZhciBhPSExO2lmKG5hdmlnYXRvci53ZWJraXRHZXRVc2VyTWVkaWEpYT0iZnVuY3Rpb24iPT09dHlwZW9mIHdlYmtpdFJUQ1BlZXJDb25uZWN0aW9uJiYhIXdlYmtpdFJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRTdHJlYW07ZWxzZSBpZihuYXZpZ2F0b3IubW96R2V0VXNlck1lZGlhKXt2YXIgYj1nLm5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKS5tYXRjaCgvRmlyZWZveFwvKFswLTlcLl0rKS9pKTtpZihhPSJmdW5jdGlvbiI9PT10eXBlb2YgbW96UlRDUGVlckNvbm5lY3Rpb24mJm51bGwhPT1iJiYyMDxwYXJzZUZsb2F0KGJbMV0sMTApKXRyeXtuZXcgbW96UlRDUGVlckNvbm5lY3Rpb24sYT0hMH1jYXRjaChjKXthPSExfX1PVC4kLnN1cHBvcnRzV2ViUlRDPWZ1bmN0aW9uKCl7cmV0dXJuIGF9OwpyZXR1cm4gYX07T1QuJC5zdXBwb3J0ZWRDcnlwdG9TY2hlbWU9ZnVuY3Rpb24oKXtpZighT1QuJC5zdXBwb3J0c1dlYlJUQygpKXJldHVybiJOT05FIjt2YXIgYT1nLm5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKS5tYXRjaCgvY2hyb21lXC8oWzAtOVwuXSspL2kpO3JldHVybiBhJiYyNT5wYXJzZUZsb2F0KGFbMV0sMTApPyJTREVTX1NSVFAiOiJEVExTX1NSVFAifTtPVC4kLnN1cHBvcnRzQnVuZGxlPWZ1bmN0aW9uKCl7cmV0dXJuIE9ULiQuc3VwcG9ydHNXZWJSVEMoKSYmIkNocm9tZSI9PT1PVC4kLmJyb3dzZXIoKX07T1QuJC5zdXBwb3J0c1J0Y3BNdXg9ZnVuY3Rpb24oKXtyZXR1cm4gT1QuJC5zdXBwb3J0c1dlYlJUQygpJiYiQ2hyb21lIj09PU9ULiQuYnJvd3NlcigpfTtPVC4kLmdldFVzZXJNZWRpYT1mdW5jdGlvbihkLGksZyxqLGwsbSl7aWYoZShkKSlPVC5lcnJvcigiQ291bGRuJ3QgZ2V0IFVzZXJNZWRpYTogQWxsIGNvbnN0cmFpbnRzIHdlcmUgZmFsc2UiKSwKZy5jYWxsKG51bGwse25hbWU6Ik5PX1ZBTElEX0NPTlNUUkFJTlRTIixtZXNzYWdlOiJWaWRlbyBhbmQgQXVkaW8gd2FzIGRpc2FibGVkLCB5b3UgbmVlZCB0byBlbmFibGVkIGF0IGxlYXN0IG9uZSJ9KTtlbHNle3ZhciBwPW51bGwsbj0hMSxyPWZ1bmN0aW9uKCl7cD1udWxsO249ITA7aiYmaigpfSxxPWZ1bmN0aW9uKGEpe3AmJmNsZWFyVGltZW91dChwKTtuJiZsJiZsKCk7aS5jYWxsKG51bGwsYSl9LG89ZnVuY3Rpb24oYil7cCYmY2xlYXJUaW1lb3V0KHApO24mJmwmJmwoKTt2YXIgZDtpZihPVC4kLmlzT2JqZWN0KGIpJiZiLm5hbWUpZD17bmFtZTpiLm5hbWUsbWVzc2FnZTpiLm1lc3NhZ2UsY29uc3RyYWludE5hbWU6Yi5jb25zdHJhaW50TmFtZX07ZWxzZSBpZihPVC4kLmlzT2JqZWN0KGIpKXtpZihkPWMoYi5jb2RlLGEpLGIubWVzc2FnZSYmKGQubWVzc2FnZT1iLm1lc3NhZ2UpLGIuY29uc3RyYWludE5hbWUpZC5jb25zdHJhaW50TmFtZT1iLmNvbnN0cmFpbnROYW1lfWVsc2UgZD0KYiYmZi5oYXNPd25Qcm9wZXJ0eShiKT9jKGIsZik6e21lc3NhZ2U6IlVua25vd24gRXJyb3Igd2hpbGUgZ2V0dGluZyB1c2VyIG1lZGlhIn07Yj1kOyJQRVJNSVNTSU9OX0RFTklFRCI9PT1iLm5hbWU/bS5jYWxsKG51bGwsYik6Zy5jYWxsKG51bGwsYil9O3RyeXtiKGQscSxvKX1jYXRjaChzKXtPVC5lcnJvcigiQ291bGRuJ3QgZ2V0IFVzZXJNZWRpYTogIitzLnRvU3RyaW5nKCkpO28oKTtyZXR1cm59LTE9PT1sb2NhdGlvbi5wcm90b2NvbC5pbmRleE9mKCJodHRwcyIpP3NldFRpbWVvdXQociwxMDApOnA9c2V0VGltZW91dChyLDUwMCl9fX0pKHdpbmRvdyk7CihmdW5jdGlvbihnKXtmdW5jdGlvbiBiKGEsYil7dmFyIGM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidmlkZW8iKTtjLnNldEF0dHJpYnV0ZSgiYXV0b3BsYXkiLCIiKTtjLmlubmVySFRNTD1hO2lmKGIpeyEwPT09Yi5tdXRlZCYmKGRlbGV0ZSBiLm11dGVkLGMubXV0ZWQ9InRydWUiKTtmb3IodmFyIGQgaW4gYiljLnNldEF0dHJpYnV0ZShkLGJbZF0pfXJldHVybiBjfWZ1bmN0aW9uIGYoYSl7cmV0dXJuIGNbcGFyc2VJbnQoYSwxMCldfHwiQW4gdW5rbm93biBlcnJvciBvY2N1cnJlZC4ifWZ1bmN0aW9uIGEoYSxiLGMsZCl7aWYobmF2aWdhdG9yLm1vekdldFVzZXJNZWRpYXx8MDxiLmdldFZpZGVvVHJhY2tzKCkubGVuZ3RoJiZiLmdldFZpZGVvVHJhY2tzKClbMF0uZW5hYmxlZCl7dmFyIGo9ZnVuY3Rpb24oKXtjbGVhclRpbWVvdXQocCk7YS5yZW1vdmVFdmVudExpc3RlbmVyKCJsb2FkZWRtZXRhZGF0YSIsbCwhMSk7YS5yZW1vdmVFdmVudExpc3RlbmVyKCJlcnJvciIsbSwhMSl9LApsPWZ1bmN0aW9uKCl7aigpO2MoKX0sbT1mdW5jdGlvbihhKXtqKCk7ZCgiVGhlcmUgd2FzIGFuIHVuZXhwZWN0ZWQgcHJvYmxlbSB3aXRoIHRoZSBWaWRlbyBTdHJlYW06ICIrZihhLnRhcmdldC5lcnJvci5jb2RlKSl9LHA9c2V0VGltZW91dChmdW5jdGlvbigpezA9PT1hLmN1cnJlbnRUaW1lP2QoIlRoZSB2aWRlbyBzdHJlYW0gZmFpbGVkIHRvIGNvbm5lY3QuIFBsZWFzZSBub3RpZnkgdGhlIHNpdGUgb3duZXIgaWYgdGhpcyBjb250aW51ZXMgdG8gaGFwcGVuLiIpOihPVC53YXJuKCJOZXZlciBnb3QgdGhlIGxvYWRlZG1ldGFkYXRhIGV2ZW50IGJ1dCBjdXJyZW50VGltZSA+IDAiKSxjKCkpfS5iaW5kKHRoaXMpLDNFNCk7YS5hZGRFdmVudExpc3RlbmVyKCJsb2FkZWRtZXRhZGF0YSIsbCwhMSk7YS5hZGRFdmVudExpc3RlbmVyKCJlcnJvciIsbSwhMSk7Yi5vbmVuZGVkPWZ1bmN0aW9uKCl7aigpO2QoIlN0cmVhbSBlbmRlZCB3aGlsZSB0cnlpbmcgdG8gYmluZCBpdCB0byBhIHZpZGVvIGVsZW1lbnQuIil9fWVsc2UgYygpOwp2b2lkIDAhPT1hLnNyY09iamVjdD9hLnNyY09iamVjdD1iOnZvaWQgMCE9PWEubW96U3JjT2JqZWN0P2EubW96U3JjT2JqZWN0PWI6YS5zcmM9Zy5VUkwuY3JlYXRlT2JqZWN0VVJMKGIpO2EucGxheSgpfU9ULlZpZGVvT3JpZW50YXRpb249e1JPVEFURURfTk9STUFMOiJPVFZpZGVvT3JpZW50YXRpb25Sb3RhdGVkTm9ybWFsIixST1RBVEVEX0xFRlQ6Ik9UVmlkZW9PcmllbnRhdGlvblJvdGF0ZWRMZWZ0IixST1RBVEVEX1JJR0hUOiJPVFZpZGVvT3JpZW50YXRpb25Sb3RhdGVkUmlnaHQiLFJPVEFURURfVVBTSURFX0RPV046Ik9UVmlkZW9PcmllbnRhdGlvblJvdGF0ZWRVcHNpZGVEb3duIn07T1QuVmlkZW9FbGVtZW50PWZ1bmN0aW9uKGMpe3ZhciBkLGksayxqPSExLGw9ITEsYz1PVC4kLmRlZmF1bHRzKGN8fHt9LHtmYWxsYmFja1RleHQ6IlNvcnJ5LCBXZWIgUlRDIGlzIG5vdCBhdmFpbGFibGUgaW4geW91ciBicm93c2VyIn0pO09ULiQuZXZlbnRpbmcodGhpcyk7dmFyIG09ZnVuY3Rpb24oYSl7dGhpcy50cmlnZ2VyKCJlcnJvciIsCm51bGwsIlRoZXJlIHdhcyBhbiB1bmV4cGVjdGVkIHByb2JsZW0gd2l0aCB0aGUgVmlkZW8gU3RyZWFtOiAiK2YoYS50YXJnZXQuZXJyb3IuY29kZSksdGhpcyl9LmJpbmQodGhpcykscD1mdW5jdGlvbigpe2o9ITA7aS5hZGRFdmVudExpc3RlbmVyKCJlcnJvciIsbSwhMSk7dGhpcy50cmlnZ2VyKCJzdHJlYW1Cb3VuZCIsdGhpcyl9LmJpbmQodGhpcyksbj1mdW5jdGlvbihhKXt0aGlzLnRyaWdnZXIoImxvYWRFcnJvciIsT1QuRXhjZXB0aW9uQ29kZXMuUDJQX0NPTk5FQ1RJT05fRkFJTEVELGEsdGhpcyl9LmJpbmQodGhpcykscj1mdW5jdGlvbigpe2x8fChPVC53YXJuKCJWaWRlbyBlbGVtZW50IHBhdXNlZCwgYXV0by1yZXN1bWluZy4gSWYgeW91IGludGVuZGVkIHRvIGRvIHRoaXMsIHVzZSBwdWJsaXNoVmlkZW8oZmFsc2UpIG9yIHN1YnNjcmliZVRvVmlkZW8oZmFsc2UpIGluc3RlYWQuIiksbD0hMCk7aS5wbGF5KCl9O2k9YihjLmZhbGxiYWNrVGV4dCxjLmF0dHJpYnV0ZXMpOwppLmFkZEV2ZW50TGlzdGVuZXIoInBhdXNlIixyKTtPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0aGlzLHtzdHJlYW06e2dldDpmdW5jdGlvbigpe3JldHVybiBkfX0sZG9tRWxlbWVudDp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGl9fSxwYXJlbnRFbGVtZW50OntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4ga319LGlzQm91bmRUb1N0cmVhbTp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGp9fSxwb3N0ZXI6e2dldDpmdW5jdGlvbigpe3JldHVybiBpLmdldEF0dHJpYnV0ZSgicG9zdGVyIil9LHNldDpmdW5jdGlvbihhKXtpLnNldEF0dHJpYnV0ZSgicG9zdGVyIixhKX19fSk7dGhpcy5hcHBlbmRUbz1mdW5jdGlvbihhKXtrPWE7ay5hcHBlbmRDaGlsZChpKTtyZXR1cm4gdGhpc307dGhpcy5iaW5kVG9TdHJlYW09ZnVuY3Rpb24oYil7aj0hMTtkPWI7YShpLGQscCxuKTtyZXR1cm4gdGhpc307dGhpcy51bmJpbmRTdHJlYW09ZnVuY3Rpb24oKXtpZighZClyZXR1cm4gdGhpcztpJiYobmF2aWdhdG9yLm1vekdldFVzZXJNZWRpYT8KaS5tb3pTcmNPYmplY3Q9bnVsbDpnLlVSTC5yZXZva2VPYmplY3RVUkwoaS5zcmMpKTtkPW51bGw7cmV0dXJuIHRoaXN9O3RoaXMuc2V0QXVkaW9Wb2x1bWU9ZnVuY3Rpb24oYSl7aSYmKGkudm9sdW1lPU9ULiQucm91bmRGbG9hdChhLzEwMCwyKSl9O3RoaXMuZ2V0QXVkaW9Wb2x1bWU9ZnVuY3Rpb24oKXtyZXR1cm4gaT9wYXJzZUludCgxMDAqaS52b2x1bWUsMTApOjUwfTt0aGlzLndoZW5UaW1lSW5jcmVtZW50cz1mdW5jdGlvbihhLGIpe2lmKGkpe3ZhciBjLGQ9ZnVuY3Rpb24oKXshY3x8Yz49aS5jdXJyZW50VGltZT9jPWkuY3VycmVudFRpbWU6KGkucmVtb3ZlRXZlbnRMaXN0ZW5lcigidGltZXVwZGF0ZSIsZCwhMSksYS5jYWxsKGIsdGhpcykpfS5iaW5kKHRoaXMpO2kuYWRkRXZlbnRMaXN0ZW5lcigidGltZXVwZGF0ZSIsZCwhMSl9fTt0aGlzLmRlc3Ryb3k9ZnVuY3Rpb24oKXt0aGlzLm9mZigpO3RoaXMudW5iaW5kU3RyZWFtKCk7aSYmKGkucmVtb3ZlRXZlbnRMaXN0ZW5lcigicGF1c2UiLApyKSxPVC4kLnJlbW92ZUVsZW1lbnQoaSksaT1udWxsKTtrPW51bGx9fTtPVC4kLmNhbkRlZmluZVByb3BlcnR5JiZPYmplY3QuZGVmaW5lUHJvcGVydGllcyhPVC5WaWRlb0VsZW1lbnQucHJvdG90eXBlLHtpbWdEYXRhOntnZXQ6ZnVuY3Rpb24oKXt2YXIgYT1PVC4kLmNyZWF0ZUVsZW1lbnQoImNhbnZhcyIse3dpZHRoOnRoaXMuZG9tRWxlbWVudC52aWRlb1dpZHRoLGhlaWdodDp0aGlzLmRvbUVsZW1lbnQudmlkZW9IZWlnaHQsc3R5bGU6e2Rpc3BsYXk6Im5vbmUifX0pO2RvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYSk7dHJ5e2EuZ2V0Q29udGV4dCgiMmQiKS5kcmF3SW1hZ2UodGhpcy5kb21FbGVtZW50LDAsMCxhLndpZHRoLGEuaGVpZ2h0KX1jYXRjaChiKXtyZXR1cm4gT1Qud2FybigiQ2Fubm90IGdldCBpbWFnZSBkYXRhIHlldCIpLG51bGx9dmFyIGM9YS50b0RhdGFVUkwoImltYWdlL3BuZyIpO09ULiQucmVtb3ZlRWxlbWVudChhKTtyZXR1cm4gYy5yZXBsYWNlKCJkYXRhOmltYWdlL3BuZztiYXNlNjQsIiwKIiIpLnRyaW0oKX19LHZpZGVvV2lkdGg6e2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vcmllbnRhdGlvbiYmdGhpcy5fb3JpZW50YXRpb24ud2lkdGg/dGhpcy5fb3JpZW50YXRpb24ud2lkdGg6dGhpcy5kb21FbGVtZW50WyJ2aWRlbyIrKHRoaXMuaXNSb3RhdGVkPyJIZWlnaHQiOiJXaWR0aCIpXX19LHZpZGVvSGVpZ2h0OntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb3JpZW50YXRpb24mJnRoaXMuX29yaWVudGF0aW9uLmhlaWdodD90aGlzLl9vcmllbnRhdGlvbi5oZWlnaHQ6dGhpcy5kb21FbGVtZW50WyJ2aWRlbyIrKHRoaXMuaXNSb3RhdGVkPyJXaWR0aCI6IkhlaWdodCIpXX19LGFzcGVjdFJhdGlvOntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4odGhpcy52aWRlb1dpZHRoKzApL3RoaXMudmlkZW9IZWlnaHR9fSxpc1JvdGF0ZWQ6e2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vcmllbnRhdGlvbiYmKCJPVFZpZGVvT3JpZW50YXRpb25Sb3RhdGVkTGVmdCI9PXRoaXMuX29yaWVudGF0aW9uLnZpZGVvT3JpZW50YXRpb258fAoiT1RWaWRlb09yaWVudGF0aW9uUm90YXRlZFJpZ2h0Ij09dGhpcy5fb3JpZW50YXRpb24udmlkZW9PcmllbnRhdGlvbil9fX0pO3ZhciBkPXtPVFZpZGVvT3JpZW50YXRpb25Sb3RhdGVkTm9ybWFsOiJyb3RhdGUoMGRlZykiLE9UVmlkZW9PcmllbnRhdGlvblJvdGF0ZWRMZWZ0OiJyb3RhdGUoOTBkZWcpIixPVFZpZGVvT3JpZW50YXRpb25Sb3RhdGVkUmlnaHQ6InJvdGF0ZSgtOTBkZWcpIixPVFZpZGVvT3JpZW50YXRpb25Sb3RhdGVkVXBzaWRlRG93bjoicm90YXRlKDE4MGRlZykifTtPVC4kLmNhbkRlZmluZVByb3BlcnR5JiZPYmplY3QuZGVmaW5lUHJvcGVydHkoT1QuVmlkZW9FbGVtZW50LnByb3RvdHlwZSwib3JpZW50YXRpb24iLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb3JpZW50YXRpb259LHNldDpmdW5jdGlvbihhKXt0aGlzLl9vcmllbnRhdGlvbj1hO2E9ZFthLnZpZGVvT3JpZW50YXRpb25dfHxkLlJPVEFURURfTk9STUFMO3N3aXRjaChPVC4kLmJyb3dzZXIoKSl7Y2FzZSAiQ2hyb21lIjpjYXNlICJTYWZhcmkiOnRoaXMuZG9tRWxlbWVudC5zdHlsZS53ZWJraXRUcmFuc2Zvcm09CmE7YnJlYWs7Y2FzZSAiSUUiOnRoaXMuZG9tRWxlbWVudC5zdHlsZS5tc1RyYW5zZm9ybT1hO2JyZWFrO2RlZmF1bHQ6dGhpcy5kb21FbGVtZW50LnN0eWxlLnRyYW5zZm9ybT1hfXRoaXMudHJpZ2dlcigib3JpZW50YXRpb25DaGFuZ2VkIil9fSk7dmFyIGM9e307Zy5NZWRpYUVycm9yJiYoY1tnLk1lZGlhRXJyb3IuTUVESUFfRVJSX0FCT1JURURdPSJUaGUgZmV0Y2hpbmcgcHJvY2VzcyBmb3IgdGhlIG1lZGlhIHJlc291cmNlIHdhcyBhYm9ydGVkIGJ5IHRoZSB1c2VyIGFnZW50IGF0IHRoZSB1c2VyJ3MgcmVxdWVzdC4iLGNbZy5NZWRpYUVycm9yLk1FRElBX0VSUl9ORVRXT1JLXT0iQSBuZXR3b3JrIGVycm9yIG9mIHNvbWUgZGVzY3JpcHRpb24gY2F1c2VkIHRoZSB1c2VyIGFnZW50IHRvIHN0b3AgZmV0Y2hpbmcgdGhlIG1lZGlhIHJlc291cmNlLCBhZnRlciB0aGUgcmVzb3VyY2Ugd2FzIGVzdGFibGlzaGVkIHRvIGJlIHVzYWJsZS4iLGNbZy5NZWRpYUVycm9yLk1FRElBX0VSUl9ERUNPREVdPQoiQW4gZXJyb3Igb2Ygc29tZSBkZXNjcmlwdGlvbiBvY2N1cnJlZCB3aGlsZSBkZWNvZGluZyB0aGUgbWVkaWEgcmVzb3VyY2UsIGFmdGVyIHRoZSByZXNvdXJjZSB3YXMgZXN0YWJsaXNoZWQgdG8gYmUgdXNhYmxlLiIsY1tnLk1lZGlhRXJyb3IuTUVESUFfRVJSX1NSQ19OT1RfU1VQUE9SVEVEXT0iVGhlIG1lZGlhIHJlc291cmNlIGluZGljYXRlZCBieSB0aGUgc3JjIGF0dHJpYnV0ZSB3YXMgbm90IHN1aXRhYmxlLiAiKX0pKHdpbmRvdyk7CihmdW5jdGlvbihnKXt2YXIgYj1bXSxmPSExO09ULkFuYWx5dGljcz1mdW5jdGlvbigpe3ZhciBhPU9ULnByb3BlcnRpZXMubG9nZ2luZ1VSTCsiL2xvZ2dpbmcvQ2xpZW50RXZlbnQiLGQ9T1QucHJvcGVydGllcy5sb2dnaW5nVVJMKyIvbG9nZ2luZy9DbGllbnRRb3MiLGM9e30sZT17cGF5bG9hZFR5cGU6InBheWxvYWRfdHlwZSIscGFydG5lcklkOiJwYXJ0bmVyX2lkIixzdHJlYW1JZDoic3RyZWFtX2lkIixzZXNzaW9uSWQ6InNlc3Npb25faWQiLGNvbm5lY3Rpb25JZDoiY29ubmVjdGlvbl9pZCIsd2lkZ2V0VHlwZToid2lkZ2V0X3R5cGUiLHdpZGdldElkOiJ3aWRnZXRfaWQiLGF2Z0F1ZGlvQml0cmF0ZToiYXZnX2F1ZGlvX2JpdHJhdGUiLGF2Z1ZpZGVvQml0cmF0ZToiYXZnX3ZpZGVvX2JpdHJhdGUifSxoPWZ1bmN0aW9uKGIsYyxoLGUpe09ULiQucG9zdChjP2Q6YSx7c3VjY2VzczpoLGVycm9yOmUsZGF0YTpiLGhlYWRlcnM6eyJDb250ZW50LVR5cGUiOiJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQifX0pfSwKaT1mdW5jdGlvbigpe2lmKCFmJiYwPGIubGVuZ3RoKXtmPSEwO3ZhciBhPWJbMF0sYz1mdW5jdGlvbigpe2Iuc2hpZnQoKTtmPSExO2koKX07YSYmaChhLmRhdGEsYS5pc1FvcyxmdW5jdGlvbigpe2Eub25Db21wbGV0ZSgpO3NldFRpbWVvdXQoYyw1MCl9LGZ1bmN0aW9uKCl7T1QuZGVidWcoIkZhaWxlZCB0byBzZW5kIENsaWVudEV2ZW50LCBtb3Zpbmcgb24gdG8gdGhlIG5leHQgaXRlbS4iKTtzZXRUaW1lb3V0KGMsNTApfSl9fTt0aGlzLmxvZ0Vycm9yPWZ1bmN0aW9uKGEsYixkLGgsZSl7ZXx8KGU9e30pO2Q9ZS5wYXJ0bmVySWQ7aWYoITA9PT1PVC5Db25maWcuZ2V0KCJleGNlcHRpb25Mb2dnaW5nIiwiZW5hYmxlZCIsZCkpe3ZhciBmO2Q/KGY9W2QsYixhXS5qb2luKCJfIiksZj0xMDA+PShjW2ZdfHwwKSk6Zj0hMTtpZighZil7dmFyIGQ9W2QsYixhXS5qb2luKCJfIiksZz10aGlzLmVzY2FwZVBheWxvYWQoT1QuJC5leHRlbmQoaHx8e30se21lc3NhZ2U6Zyx1c2VyQWdlbnQ6bmF2aWdhdG9yLnVzZXJBZ2VudH0pKTsKY1tkXT0idW5kZWZpbmVkIiE9PXR5cGVvZiBjW2RdP2NbZF0rMToxO3JldHVybiB0aGlzLmxvZ0V2ZW50KE9ULiQuZXh0ZW5kKGUse2FjdGlvbjpiKyIuIithLHBheWxvYWRUeXBlOmdbMF0scGF5bG9hZDpnWzFdfSkpfX19O3RoaXMubG9nRXZlbnQ9ZnVuY3Rpb24oYSl7dmFyIGM9YS5wYXJ0bmVySWQ7YXx8KGE9e30pO3ZhciBhPU9ULiQuZXh0ZW5kKHt2YXJpYXRpb246IiIsZ3VpZDp0aGlzLmdldENsaWVudEd1aWQoKSx3aWRnZXRfaWQ6IiIsc2Vzc2lvbl9pZDoiIixjb25uZWN0aW9uX2lkOiIiLHN0cmVhbV9pZDoiIixwYXJ0bmVyX2lkOmMsc291cmNlOmcubG9jYXRpb24uaHJlZixzZWN0aW9uOiIiLGJ1aWxkOiIifSxhKSxkO2ZvcihkIGluIGUpZS5oYXNPd25Qcm9wZXJ0eShkKSYmYVtkXSYmKGFbZVtkXV09YVtkXSxkZWxldGUgYVtkXSk7Yi5wdXNoKHtkYXRhOmEsb25Db21wbGV0ZTpmdW5jdGlvbigpe30saXNRb3M6ITF9KTtpKCl9O3RoaXMubG9nUU9TPWZ1bmN0aW9uKGEpe3ZhciBjPQphLnBhcnRuZXJJZDthfHwoYT17fSk7dmFyIGE9T1QuJC5leHRlbmQoe2d1aWQ6dGhpcy5nZXRDbGllbnRHdWlkKCksd2lkZ2V0X2lkOiIiLHNlc3Npb25faWQ6IiIsY29ubmVjdGlvbl9pZDoiIixzdHJlYW1faWQ6IiIscGFydG5lcl9pZDpjLHNvdXJjZTpnLmxvY2F0aW9uLmhyZWYsYnVpbGQ6IiIsZHVyYXRpb246MH0sYSksZDtmb3IoZCBpbiBlKWUuaGFzT3duUHJvcGVydHkoZCkmJmFbZF0mJihhW2VbZF1dPWFbZF0sZGVsZXRlIGFbZF0pO2IucHVzaCh7ZGF0YTphLG9uQ29tcGxldGU6ZnVuY3Rpb24oKXt9LGlzUW9zOiEwfSk7aSgpfTt0aGlzLmVzY2FwZVBheWxvYWQ9ZnVuY3Rpb24oYSl7dmFyIGI9W10sYz1bXSxkO2ZvcihkIGluIGEpYS5oYXNPd25Qcm9wZXJ0eShkKSYmKG51bGwhPT1hW2RdJiZ2b2lkIDAhPT1hW2RdKSYmKGIucHVzaChhW2RdP2FbZF0udG9TdHJpbmcoKS5yZXBsYWNlKCJ8IiwiXFx8Iik6IiIpLGMucHVzaChkLnRvU3RyaW5nKCkucmVwbGFjZSgifCIsIlxcfCIpKSk7CnJldHVybltjLmpvaW4oInwiKSxiLmpvaW4oInwiKV19O3RoaXMuZ2V0Q2xpZW50R3VpZD1mdW5jdGlvbigpe3ZhciBhPU9ULiQuZ2V0Q29va2llKCJvcGVudG9rX2NsaWVudF9pZCIpO2F8fChhPU9ULiQudXVpZCgpLE9ULiQuc2V0Q29va2llKCJvcGVudG9rX2NsaWVudF9pZCIsYSkpO3JldHVybiBhfX19KSh3aW5kb3cpOwooZnVuY3Rpb24oZyl7ImZpbGU6Ij09PWxvY2F0aW9uLnByb3RvY29sJiZhbGVydCgiWW91IGNhbm5vdCB0ZXN0IGEgcGFnZSB1c2luZyBXZWJSVEMgdGhyb3VnaCB0aGUgZmlsZSBzeXN0ZW0gZHVlIHRvIGJyb3dzZXIgcGVybWlzc2lvbnMuIFlvdSBtdXN0IHJ1biBpdCBvdmVyIGEgd2ViIHNlcnZlci4iKTtnLk9UfHwoZy5PVD17fSk7IWcuVVJMJiZnLndlYmtpdFVSTCYmKGcuVVJMPWcud2Via2l0VVJMKTt2YXIgYixmPWRvY3VtZW50LmxvY2F0aW9uLmhhc2g7T1QuaW5pdFNlc3Npb249ZnVuY3Rpb24oYSl7dmFyIGI9T1Quc2Vzc2lvbnMuZ2V0KGEpO2lmKCFiKXtiPW5ldyBPVC5TZXNzaW9uKGEpO09ULnNlc3Npb25zLmFkZChiKX1yZXR1cm4gYn07T1QuaW5pdFB1Ymxpc2hlcj1mdW5jdGlvbihhLGIsYyxlKXtPVC5kZWJ1ZygiVEIuaW5pdFB1Ymxpc2hlcigiK2IrIikiKTt2YXIgaD1uZXcgT1QuUHVibGlzaGVyO09ULnB1Ymxpc2hlcnMuYWRkKGgpO2lmKGUmJk9ULiQuaXNGdW5jdGlvbihlKSl7YT0KZnVuY3Rpb24gayhhKXtoLm9mZigiaW5pdFN1Y2Nlc3MiLGspO2gub2ZmKCJwdWJsaXNoQ29tcGxldGUiLGspO2UuYXBwbHkobnVsbCxhcmd1bWVudHMpfTtoLm9uY2UoImluaXRTdWNjZXNzIixhKTtoLm9uY2UoInB1Ymxpc2hDb21wbGV0ZSIsYSl9aC5wdWJsaXNoKGIsYyk7cmV0dXJuIGh9O09ULmNoZWNrU3lzdGVtUmVxdWlyZW1lbnRzPWZ1bmN0aW9uKCl7T1QuZGVidWcoIlRCLmNoZWNrU3lzdGVtUmVxdWlyZW1lbnRzKCkiKTt2YXIgYT1PVC4kLnN1cHBvcnRzV2ViU29ja2V0cygpJiZPVC4kLnN1cHBvcnRzV2ViUlRDKCk/dGhpcy5IQVNfUkVRVUlSRU1FTlRTOnRoaXMuTk9UX0hBU19SRVFVSVJFTUVOVFM7T1QuY2hlY2tTeXN0ZW1SZXF1aXJlbWVudHM9ZnVuY3Rpb24oKXtPVC5kZWJ1ZygiVEIuY2hlY2tTeXN0ZW1SZXF1aXJlbWVudHMoKSIpO3JldHVybiBhfTtyZXR1cm4gYX07T1QudXBncmFkZVN5c3RlbVJlcXVpcmVtZW50cz1mdW5jdGlvbigpe09ULm9uTG9hZChmdW5jdGlvbigpe2Zvcih2YXIgYT0KZmFsc2UsZD1kb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgibWV0YSIpLGM9MDtjPGQubGVuZ3RoO2MrKyl7dmFyIGU9ZFtjXS5odHRwRXF1aXYsaD1kW2NdLmNvbnRlbnQ7aWYoZSYmZS50b0xvd2VyQ2FzZSgpPT09IngtdWEtY29tcGF0aWJsZSImJmgmJmgudG9Mb3dlckNhc2UoKS5pbmRleE9mKCJjaHJvbWU9MSIpPi0xKXthPXRydWU7YnJlYWt9fWRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZnVuY3Rpb24oKXt2YXIgYj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpZnJhbWUiKTtiLmlkPSJfdXBncmFkZUZsYXNoIjtiLnN0eWxlLnBvc2l0aW9uPSJhYnNvbHV0ZSI7Yi5zdHlsZS5wb3NpdGlvbj0iZml4ZWQiO2Iuc3R5bGUuaGVpZ2h0PSIxMDAlIjtiLnN0eWxlLndpZHRoPSIxMDAlIjtiLnN0eWxlLnRvcD0iMHB4IjtiLnN0eWxlLmxlZnQ9IjBweCI7Yi5zdHlsZS5yaWdodD0iMHB4IjtiLnN0eWxlLmJvdHRvbT0iMHB4IjtiLnN0eWxlLnpJbmRleD0xRTM7dHJ5e2Iuc3R5bGUuYmFja2dyb3VuZENvbG9yPQoicmdiYSgwLDAsMCwwLjIpIn1jYXRjaChjKXtiLnN0eWxlLmJhY2tncm91bmRDb2xvcj0idHJhbnNwYXJlbnQiO2Iuc2V0QXR0cmlidXRlKCJhbGxvd1RyYW5zcGFyZW5jeSIsInRydWUiKX1iLnNldEF0dHJpYnV0ZSgiZnJhbWVCb3JkZXIiLCIwIik7Yi5mcmFtZUJvcmRlcj0iMCI7Yi5zY3JvbGxpbmc9Im5vIjtiLnNldEF0dHJpYnV0ZSgic2Nyb2xsaW5nIiwibm8iKTtiLnNyYz1PVC5wcm9wZXJ0aWVzLmFzc2V0VVJMKyIvaHRtbC91cGdyYWRlRmxhc2guaHRtbCIrKGE/Ij9jZj0xIjoiIikrIiMiK2VuY29kZVVSSUNvbXBvbmVudChkb2N1bWVudC5sb2NhdGlvbi5ocmVmKTtyZXR1cm4gYn0oKSk7YiYmY2xlYXJJbnRlcnZhbChiKTtiPXNldEludGVydmFsKGZ1bmN0aW9uKCl7dmFyIGE9ZG9jdW1lbnQubG9jYXRpb24uaGFzaCxiPS9eIz9cZCsmLztpZihhIT09ZiYmYi50ZXN0KGEpKXtmPWE7aWYoYS5yZXBsYWNlKGIsIiIpPT09ImNsb3NlX3dpbmRvdyIpe2RvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIl91cGdyYWRlRmxhc2giKSk7CmRvY3VtZW50LmxvY2F0aW9uLmhhc2g9IiJ9ZWxzZSBpZihhLnJlcGxhY2UoYiwiIik9PT0iaW5zdGFsbGVkX2djZiIpe2RvY3VtZW50LmxvY2F0aW9uLmhhc2g9IiI7ZG9jdW1lbnQubG9jYXRpb24uaHJlZj1kb2N1bWVudC5sb2NhdGlvbi5ocmVmLnJlcGxhY2UoIiMiLCIiKX19fSwxMDApfSl9O09ULnJlcG9ydElzc3VlPWZ1bmN0aW9uKCl7T1Qud2FybigiVG9EbzogaGF2ZW4ndCB5ZXQgaW1wbGVtZW50ZWQgVEIucmVwb3J0SXNzdWUiKX07T1QuY29tcG9uZW50cz17fTtPVC5zZXNzaW9ucz17fTtPVC5ydGM9e307T1QuQVBJS0VZPWZ1bmN0aW9uKCl7dmFyIGE9ZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoInNjcmlwdCIpLGE9YVthLmxlbmd0aC0xXSxhPWEuZ2V0QXR0cmlidXRlKCJzcmMiKXx8YS5zcmM7cmV0dXJuKGE9YS5tYXRjaCgvW1w/XCZdYXBpa2V5PShbXiZdKykvaSkpP2FbMV06IiJ9KCk7T1QuSEFTX1JFUVVJUkVNRU5UUz0xO09ULk5PVF9IQVNfUkVRVUlSRU1FTlRTPQowO2cuT1R8fChnLk9UPU9UKTtnLlRCfHwoZy5UQj1PVCl9KSh3aW5kb3cpOwooZnVuY3Rpb24oKXtPVC5Db2xsZWN0aW9uPWZ1bmN0aW9uKGcpe3ZhciBiPVtdLGY9e30sYT1nfHwiaWQiO09ULiQuZXZlbnRpbmcodGhpcywhMCk7dmFyIGQ9ZnVuY3Rpb24oYSl7dGhpcy50cmlnZ2VyKCJ1cGRhdGUiLGEpO3RoaXMudHJpZ2dlcigidXBkYXRlOiIrYS50YXJnZXQuaWQsYSl9LmJpbmQodGhpcyksYz1mdW5jdGlvbihhLGIpe2lmKHZvaWQgMCE9PWZbYV0pe3ZhciBjPWZbYV07ZGVsZXRlIGZbYV07ZltiXT1jfX0uYmluZCh0aGlzKSxlPWZ1bmN0aW9uKGEpe3RoaXMucmVtb3ZlKGEudGFyZ2V0LGEucmVhc29uKX0uYmluZCh0aGlzKTt0aGlzLnJlc2V0PWZ1bmN0aW9uKCl7Yi5mb3JFYWNoKGZ1bmN0aW9uKGEpe2Eub2ZmKCJ1cGRhdGVkIixkLHRoaXMpO2Eub2ZmKCJkZXN0cm95ZWQiLGUsdGhpcyk7YS5vZmYoImlkVXBkYXRlZCIsYyx0aGlzKX0sdGhpcyk7Yj1bXTtmPXt9fTt0aGlzLmRlc3Ryb3k9ZnVuY3Rpb24oKXtiLmZvckVhY2goZnVuY3Rpb24oYSl7YS5kZXN0cm95KHZvaWQgMCwKITApfSk7dGhpcy5yZXNldCgpO3RoaXMub2ZmKCl9O3RoaXMuZ2V0PWZ1bmN0aW9uKGEpe3JldHVybiBhJiZ2b2lkIDAhPT1mW2FdP2JbZlthXV06dm9pZCAwfTt0aGlzLmhhcz1mdW5jdGlvbihhKXtyZXR1cm4gYSYmdm9pZCAwIT09ZlthXX07dGhpcy50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiBiLnRvU3RyaW5nKCl9O3RoaXMud2hlcmU9ZnVuY3Rpb24oYSxjKXtyZXR1cm4gT1QuJC5pc0Z1bmN0aW9uKGEpP2IuZmlsdGVyKGEsYyk6Yi5maWx0ZXIoZnVuY3Rpb24oYil7Zm9yKHZhciBjIGluIGEpaWYoYltjXSE9PWFbY10pcmV0dXJuITE7cmV0dXJuITB9KX07dGhpcy5maW5kPWZ1bmN0aW9uKGEsYyl7dmFyIGQ7ZD1PVC4kLmlzRnVuY3Rpb24oYSk/YTpmdW5jdGlvbihiKXtmb3IodmFyIGMgaW4gYSlpZihiW2NdIT09YVtjXSlyZXR1cm4hMTtyZXR1cm4hMH07ZD1kLmJpbmQoYyk7Zm9yKHZhciBlPTA7ZTxiLmxlbmd0aDsrK2UpaWYoITA9PT1kKGJbZV0pKXJldHVybiBiW2VdOwpyZXR1cm4gbnVsbH07dGhpcy5hZGQ9ZnVuY3Rpb24oaCl7dmFyIGc9aFthXTtpZih0aGlzLmhhcyhnKSlyZXR1cm4gT1Qud2FybigiTW9kZWwgIitnKyIgaXMgYWxyZWFkeSBpbiB0aGUgY29sbGVjdGlvbiIsYiksdGhpcztmW2ddPWIucHVzaChoKS0xO2gub24oInVwZGF0ZWQiLGQsdGhpcyk7aC5vbigiZGVzdHJveWVkIixlLHRoaXMpO2gub24oImlkVXBkYXRlZCIsYyx0aGlzKTt0aGlzLnRyaWdnZXIoImFkZCIsaCk7dGhpcy50cmlnZ2VyKCJhZGQ6IitnLGgpO3JldHVybiB0aGlzfTt0aGlzLnJlbW92ZT1mdW5jdGlvbihoLGcpe3ZhciBrPWhbYV07Yi5zcGxpY2UoZltrXSwxKTtmb3IodmFyIGo9ZltrXTtqPGIubGVuZ3RoOysrailmW2Jbal1bYV1dPWo7ZGVsZXRlIGZba107aC5vZmYoInVwZGF0ZWQiLGQsdGhpcyk7aC5vZmYoImRlc3Ryb3llZCIsZSx0aGlzKTtoLm9mZigiaWRVcGRhdGVkIixjLHRoaXMpO3RoaXMudHJpZ2dlcigicmVtb3ZlIixoLGcpO3RoaXMudHJpZ2dlcigicmVtb3ZlOiIrCmssaCxnKTtyZXR1cm4gdGhpc307T1QuJC5kZWZpbmVHZXR0ZXJzKHRoaXMse2xlbmd0aDpmdW5jdGlvbigpe3JldHVybiBiLmxlbmd0aH19KX19KSh0aGlzKTsKKGZ1bmN0aW9uKCl7T1QuRXZlbnQ9T1QuJC5ldmVudGluZy5FdmVudCgpO09ULkV2ZW50Lm5hbWVzPXtBQ1RJVkU6ImFjdGl2ZSIsSU5BQ1RJVkU6ImluYWN0aXZlIixVTktOT1dOOiJ1bmtub3duIixQRVJfU0VTU0lPTjoicGVyU2Vzc2lvbiIsUEVSX1NUUkVBTToicGVyU3RyZWFtIixFWENFUFRJT046ImV4Y2VwdGlvbiIsSVNTVUVfUkVQT1JURUQ6Imlzc3VlUmVwb3J0ZWQiLFNFU1NJT05fQ09OTkVDVEVEOiJzZXNzaW9uQ29ubmVjdGVkIixTRVNTSU9OX0RJU0NPTk5FQ1RFRDoic2Vzc2lvbkRpc2Nvbm5lY3RlZCIsU1RSRUFNX0NSRUFURUQ6InN0cmVhbUNyZWF0ZWQiLFNUUkVBTV9ERVNUUk9ZRUQ6InN0cmVhbURlc3Ryb3llZCIsQ09OTkVDVElPTl9DUkVBVEVEOiJjb25uZWN0aW9uQ3JlYXRlZCIsQ09OTkVDVElPTl9ERVNUUk9ZRUQ6ImNvbm5lY3Rpb25EZXN0cm95ZWQiLFNJR05BTDoic2lnbmFsIixTVFJFQU1fUFJPUEVSVFlfQ0hBTkdFRDoic3RyZWFtUHJvcGVydHlDaGFuZ2VkIiwKTUlDUk9QSE9ORV9MRVZFTF9DSEFOR0VEOiJtaWNyb3Bob25lTGV2ZWxDaGFuZ2VkIixSRVNJWkU6InJlc2l6ZSIsU0VUVElOR1NfQlVUVE9OX0NMSUNLOiJzZXR0aW5nc0J1dHRvbkNsaWNrIixERVZJQ0VfSU5BQ1RJVkU6ImRldmljZUluYWN0aXZlIixJTlZBTElEX0RFVklDRV9OQU1FOiJpbnZhbGlkRGV2aWNlTmFtZSIsQUNDRVNTX0FMTE9XRUQ6ImFjY2Vzc0FsbG93ZWQiLEFDQ0VTU19ERU5JRUQ6ImFjY2Vzc0RlbmllZCIsQUNDRVNTX0RJQUxPR19PUEVORUQ6ImFjY2Vzc0RpYWxvZ09wZW5lZCIsQUNDRVNTX0RJQUxPR19DTE9TRUQ6ImFjY2Vzc0RpYWxvZ0Nsb3NlZCIsRUNIT19DQU5DRUxMQVRJT05fTU9ERV9DSEFOR0VEOiJlY2hvQ2FuY2VsbGF0aW9uTW9kZUNoYW5nZWQiLFBVQkxJU0hFUl9ERVNUUk9ZRUQ6ImRlc3Ryb3llZCIsU1VCU0NSSUJFUl9ERVNUUk9ZRUQ6ImRlc3Ryb3llZCIsREVWSUNFU19ERVRFQ1RFRDoiZGV2aWNlc0RldGVjdGVkIixERVZJQ0VTX1NFTEVDVEVEOiJkZXZpY2VzU2VsZWN0ZWQiLApDTE9TRV9CVVRUT05fQ0xJQ0s6ImNsb3NlQnV0dG9uQ2xpY2siLE1JQ0xFVkVMOiJtaWNyb3Bob25lQWN0aXZpdHlMZXZlbCIsTUlDR0FJTkNIQU5HRUQ6Im1pY3JvcGhvbmVHYWluQ2hhbmdlZCIsRU5WX0xPQURFRDoiZW52TG9hZGVkIn07T1QuVmFsdWVFdmVudD1mdW5jdGlvbihnLGIpe09ULkV2ZW50LmNhbGwodGhpcyxnKTt0aGlzLnZhbHVlPWJ9O09ULkV4Y2VwdGlvbkNvZGVzPXtKU19FWENFUFRJT046MkUzLEFVVEhFTlRJQ0FUSU9OX0VSUk9SOjEwMDQsSU5WQUxJRF9TRVNTSU9OX0lEOjEwMDUsQ09OTkVDVF9GQUlMRUQ6MTAwNixDT05ORUNUX1JFSkVDVEVEOjEwMDcsQ09OTkVDVElPTl9USU1FT1VUOjEwMDgsTk9UX0NPTk5FQ1RFRDoxMDEwLFAyUF9DT05ORUNUSU9OX0ZBSUxFRDoxMDEzLEFQSV9SRVNQT05TRV9GQUlMVVJFOjEwMTQsVU5BQkxFX1RPX1BVQkxJU0g6MTUwMCxVTkFCTEVfVE9fU0lHTkFMOjE1MTAsVU5BQkxFX1RPX0ZPUkNFX0RJU0NPTk5FQ1Q6MTUyMCwKVU5BQkxFX1RPX0ZPUkNFX1VOUFVCTElTSDoxNTMwfTtPVC5FeGNlcHRpb25FdmVudD1mdW5jdGlvbihnLGIsZixhLGQsYyl7T1QuRXZlbnQuY2FsbCh0aGlzLGcpO3RoaXMubWVzc2FnZT1iO3RoaXMudGl0bGU9Zjt0aGlzLmNvZGU9YTt0aGlzLmNvbXBvbmVudD1kO3RoaXMudGFyZ2V0PWN9O09ULklzc3VlUmVwb3J0ZWRFdmVudD1mdW5jdGlvbihnLGIpe09ULkV2ZW50LmNhbGwodGhpcyxnKTt0aGlzLmlzc3VlSWQ9Yn07T1QuRW52TG9hZGVkRXZlbnQ9ZnVuY3Rpb24oZyl7T1QuRXZlbnQuY2FsbCh0aGlzLGcpfTtPVC5Db25uZWN0aW9uRXZlbnQ9ZnVuY3Rpb24oZyxiLGYpe09ULkV2ZW50LmNhbGwodGhpcyxnKTt0aGlzLmNvbm5lY3Rpb25zPWI7dGhpcy5yZWFzb249Zn07T1QuU3RyZWFtRXZlbnQ9ZnVuY3Rpb24oZyxiLGYsYSl7T1QuRXZlbnQuY2FsbCh0aGlzLGcsYSk7dGhpcy5zdHJlYW1zPWI7dGhpcy5yZWFzb249Zn07T1QuU2Vzc2lvbkNvbm5lY3RFdmVudD1mdW5jdGlvbihnLApiLGYsYSl7T1QuRXZlbnQuY2FsbCh0aGlzLGcpO3RoaXMuY29ubmVjdGlvbnM9Yjt0aGlzLnN0cmVhbXM9Zjt0aGlzLmFyY2hpdmVzPWE7dGhpcy5ncm91cHM9W119O09ULlNlc3Npb25EaXNjb25uZWN0RXZlbnQ9ZnVuY3Rpb24oZyxiLGYpe09ULkV2ZW50LmNhbGwodGhpcyxnLGYpO3RoaXMucmVhc29uPWJ9O09ULlZvbHVtZUV2ZW50PWZ1bmN0aW9uKGcsYixmKXtPVC5FdmVudC5jYWxsKHRoaXMsZyk7dGhpcy5zdHJlYW1JZD1iO3RoaXMudm9sdW1lPWZ9O09ULkRldmljZUV2ZW50PWZ1bmN0aW9uKGcsYixmKXtPVC5FdmVudC5jYWxsKHRoaXMsZyk7dGhpcy5jYW1lcmE9Yjt0aGlzLm1pY3JvcGhvbmU9Zn07T1QuRGV2aWNlU3RhdHVzRXZlbnQ9ZnVuY3Rpb24oZyxiLGYsYSxkKXtPVC5FdmVudC5jYWxsKHRoaXMsZyk7dGhpcy5jYW1lcmFzPWI7dGhpcy5taWNyb3Bob25lcz1mO3RoaXMuc2VsZWN0ZWRDYW1lcmE9YTt0aGlzLnNlbGVjdGVkTWljcm9waG9uZT1kfTtPVC5SZXNpemVFdmVudD0KZnVuY3Rpb24oZyxiLGYsYSxkKXtPVC5FdmVudC5jYWxsKHRoaXMsZyk7dGhpcy53aWR0aEZyb209Yjt0aGlzLndpZHRoVG89Zjt0aGlzLmhlaWdodEZyb209YTt0aGlzLmhlaWdodFRvPWR9O09ULlN0cmVhbVByb3BlcnR5Q2hhbmdlZEV2ZW50PWZ1bmN0aW9uKGcsYixmLGEsZCl7T1QuRXZlbnQuY2FsbCh0aGlzLGcpO3RoaXMudHlwZT1nO3RoaXMuc3RyZWFtPWI7dGhpcy5jaGFuZ2VkUHJvcGVydHk9Zjt0aGlzLm9sZFZhbHVlPWE7dGhpcy5uZXdWYWx1ZT1kfTtPVC5BcmNoaXZlRXZlbnQ9ZnVuY3Rpb24oZyxiKXtPVC5FdmVudC5jYWxsKHRoaXMsZyk7dGhpcy5hcmNoaXZlcz1ifTtPVC5BcmNoaXZlU3RyZWFtRXZlbnQ9ZnVuY3Rpb24oZyxiLGYpe09ULkV2ZW50LmNhbGwodGhpcyxnKTt0aGlzLmFyY2hpdmU9Yjt0aGlzLnN0cmVhbXM9Zn07T1QuU3RhdGVDaGFuZ2VkRXZlbnQ9ZnVuY3Rpb24oZyxiKXtPVC5FdmVudC5jYWxsKHRoaXMsZyk7dGhpcy5jaGFuZ2VkVmFsdWVzPWJ9OwpPVC5DaGFuZ2VGYWlsZWRFdmVudD1mdW5jdGlvbihnLGIsZixhKXtPVC5FdmVudC5jYWxsKHRoaXMsZyk7dGhpcy5yZWFzb25Db2RlPWI7dGhpcy5yZWFzb249Zjt0aGlzLmZhaWxlZFZhbHVlcz1hfTtPVC5TaWduYWxFdmVudD1mdW5jdGlvbihnLGIsZil7T1QuRXZlbnQuY2FsbCh0aGlzLGc/InNpZ25hbDoiK2c6T1QuRXZlbnQubmFtZXMuU0lHTkFMLCExKTt0aGlzLmRhdGE9Yjt0aGlzLmZyb209Zn07T1QuU3RyZWFtVXBkYXRlZEV2ZW50PWZ1bmN0aW9uKGcsYixmLGEpe09ULkV2ZW50LmNhbGwodGhpcywidXBkYXRlZCIpO3RoaXMudGFyZ2V0PWc7dGhpcy5jaGFuZ2VkUHJvcGVydHk9Yjt0aGlzLm9sZFZhbHVlPWY7dGhpcy5uZXdWYWx1ZT1hfTtPVC5EZXN0cm95ZWRFdmVudD1mdW5jdGlvbihnLGIsZil7T1QuRXZlbnQuY2FsbCh0aGlzLGcsITEpO3RoaXMudGFyZ2V0PWI7dGhpcy5yZWFzb249Zn19KSh3aW5kb3cpOwooZnVuY3Rpb24oZyl7ZnVuY3Rpb24gYihhLGIsYyl7cmV0dXJuIGI8PWEmJmE8PWN9ZnVuY3Rpb24gZihhLGIpe3JldHVybiBNYXRoLmZsb29yKGEvYil9ZnVuY3Rpb24gYShhKXt2YXIgYj0wO3RoaXMuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIGI+PWEubGVuZ3RoPy0xOk51bWJlcihhW2JdKX07dGhpcy5vZmZzZXQ9ZnVuY3Rpb24oYyl7Yis9YztpZigwPmIpdGhyb3cgRXJyb3IoIlNlZWtpbmcgcGFzdCBzdGFydCBvZiB0aGUgYnVmZmVyIik7aWYoYj5hLmxlbmd0aCl0aHJvdyBFcnJvcigiU2Vla2luZyBwYXN0IEVPRiIpO307dGhpcy5tYXRjaD1mdW5jdGlvbihjKXtpZihjLmxlbmd0aD5iK2EubGVuZ3RoKXJldHVybiExO3ZhciBkO2ZvcihkPTA7ZDxjLmxlbmd0aDtkKz0xKWlmKE51bWJlcihhW2IrZF0pIT09Y1tkXSlyZXR1cm4hMTtyZXR1cm4hMH19ZnVuY3Rpb24gZChhKXt2YXIgYj0wO3RoaXMuZW1pdD1mdW5jdGlvbihjKXt2YXIgZD0tMSxlO2ZvcihlPTA7ZTxhcmd1bWVudHMubGVuZ3RoOysrZSlkPQpOdW1iZXIoYXJndW1lbnRzW2VdKSxhW2IrK109ZDtyZXR1cm4gZH19ZnVuY3Rpb24gYyhhKXt2YXIgYz0wLGQ9ZnVuY3Rpb24oYSl7Zm9yKHZhciBjPVtdLGQ9MCxlPWEubGVuZ3RoO2Q8YS5sZW5ndGg7KXt2YXIgZj1hLmNoYXJDb2RlQXQoZCk7aWYoYihmLDU1Mjk2LDU3MzQzKSlpZihiKGYsNTYzMjAsNTczNDMpKWMucHVzaCg2NTUzMyk7ZWxzZSBpZihkPT09ZS0xKWMucHVzaCg2NTUzMyk7ZWxzZXt2YXIgaD1hLmNoYXJDb2RlQXQoZCsxKTtiKGgsNTYzMjAsNTczNDMpPyhmJj0xMDIzLGgmPTEwMjMsZCs9MSxjLnB1c2goNjU1MzYrKGY8PDEwKStoKSk6Yy5wdXNoKDY1NTMzKX1lbHNlIGMucHVzaChmKTtkKz0xfXJldHVybiBjfShhKTt0aGlzLm9mZnNldD1mdW5jdGlvbihhKXtjKz1hO2lmKDA+Yyl0aHJvdyBFcnJvcigiU2Vla2luZyBwYXN0IHN0YXJ0IG9mIHRoZSBidWZmZXIiKTtpZihjPmQubGVuZ3RoKXRocm93IEVycm9yKCJTZWVraW5nIHBhc3QgRU9GIik7fTt0aGlzLmdldD0KZnVuY3Rpb24oKXtyZXR1cm4gYz49ZC5sZW5ndGg/LTE6ZFtjXX19ZnVuY3Rpb24gZSgpe3ZhciBhPSIiO3RoaXMuc3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIGF9O3RoaXMuZW1pdD1mdW5jdGlvbihiKXs2NTUzNT49Yj9hKz1TdHJpbmcuZnJvbUNoYXJDb2RlKGIpOihiLT02NTUzNixhKz1TdHJpbmcuZnJvbUNoYXJDb2RlKDU1Mjk2KyhiPj4xMCYxMDIzKSksYSs9U3RyaW5nLmZyb21DaGFyQ29kZSg1NjMyMCsoYiYxMDIzKSkpfX1mdW5jdGlvbiBoKGEpe3RoaXMubmFtZT0iRW5jb2RpbmdFcnJvciI7dGhpcy5tZXNzYWdlPWE7dGhpcy5jb2RlPTB9ZnVuY3Rpb24gaShhLGIpe2lmKGEpdGhyb3cgbmV3IGgoIkRlY29kZXIgZXJyb3IiKTtyZXR1cm4gYnx8NjU1MzN9ZnVuY3Rpb24gayhhKXt0aHJvdyBuZXcgaCgiVGhlIGNvZGUgcG9pbnQgIithKyIgY291bGQgbm90IGJlIGVuY29kZWQuIik7fWZ1bmN0aW9uIGooYSl7YT0oIiIrYSkudHJpbSgpLnRvTG93ZXJDYXNlKCk7cmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChILAphKT9IW2FdOm51bGx9ZnVuY3Rpb24gbChhLGIpe3JldHVybihifHxbXSlbYV18fG51bGx9ZnVuY3Rpb24gbShhLGIpe3ZhciBjPWIuaW5kZXhPZihhKTtyZXR1cm4tMT09PWM/bnVsbDpjfWZ1bmN0aW9uIHAoYSl7dmFyIGM9YS5mYXRhbCxkPTAsZT0wLGY9MCxoPTA7dGhpcy5kZWNvZGU9ZnVuY3Rpb24oYSl7dmFyIGc9YS5nZXQoKTtpZigtMT09PWcpcmV0dXJuIDAhPT1lP2koYyk6LTE7YS5vZmZzZXQoMSk7aWYoMD09PWUpe2lmKGIoZywwLDEyNykpcmV0dXJuIGc7aWYoYihnLDE5NCwyMjMpKWU9MSxoPTEyOCxkPWctMTkyO2Vsc2UgaWYoYihnLDIyNCwyMzkpKWU9MixoPTIwNDgsZD1nLTIyNDtlbHNlIGlmKGIoZywyNDAsMjQ0KSllPTMsaD02NTUzNixkPWctMjQwO2Vsc2UgcmV0dXJuIGkoYyk7ZCo9TWF0aC5wb3coNjQsZSk7cmV0dXJuIG51bGx9aWYoIWIoZywxMjgsMTkxKSlyZXR1cm4gaD1mPWU9ZD0wLGEub2Zmc2V0KC0xKSxpKGMpO2YrPTE7ZCs9KGctMTI4KSpNYXRoLnBvdyg2NCwKZS1mKTtpZihmIT09ZSlyZXR1cm4gbnVsbDthPWQ7Zz1oO2g9Zj1lPWQ9MDtyZXR1cm4gYihhLGcsMTExNDExMSkmJiFiKGEsNTUyOTYsNTczNDMpP2E6aShjKX19ZnVuY3Rpb24gbigpe3RoaXMuZW5jb2RlPWZ1bmN0aW9uKGEsYyl7dmFyIGQ9Yy5nZXQoKTtpZigtMT09PWQpcmV0dXJuLTE7Yy5vZmZzZXQoMSk7aWYoYihkLDU1Mjk2LDU3MzQzKSlyZXR1cm4gayhkKTtpZihiKGQsMCwxMjcpKXJldHVybiBhLmVtaXQoZCk7dmFyIGUsaDtiKGQsMTI4LDIwNDcpPyhlPTEsaD0xOTIpOmIoZCwyMDQ4LDY1NTM1KT8oZT0yLGg9MjI0KTpiKGQsNjU1MzYsMTExNDExMSkmJihlPTMsaD0yNDApO2ZvcihoPWEuZW1pdChmKGQsTWF0aC5wb3coNjQsZSkpK2gpOzA8ZTspaD1mKGQsTWF0aC5wb3coNjQsZS0xKSksaD1hLmVtaXQoMTI4K2glNjQpLGUtPTE7cmV0dXJuIGh9fWZ1bmN0aW9uIHIoYSxjKXt2YXIgZD1jLmZhdGFsO3RoaXMuZGVjb2RlPWZ1bmN0aW9uKGMpe3ZhciBlPWMuZ2V0KCk7CmlmKC0xPT09ZSlyZXR1cm4tMTtjLm9mZnNldCgxKTtpZihiKGUsMCwxMjcpKXJldHVybiBlO2M9YVtlLTEyOF07cmV0dXJuIG51bGw9PT1jP2koZCk6Y319ZnVuY3Rpb24gcShhKXt0aGlzLmVuY29kZT1mdW5jdGlvbihjLGQpe3ZhciBlPWQuZ2V0KCk7aWYoLTE9PT1lKXJldHVybi0xO2Qub2Zmc2V0KDEpO2lmKGIoZSwwLDEyNykpcmV0dXJuIGMuZW1pdChlKTt2YXIgZj1tKGUsYSk7bnVsbD09PWYmJmsoZSk7cmV0dXJuIGMuZW1pdChmKzEyOCl9fWZ1bmN0aW9uIG8oYSxjKXt2YXIgZD1jLmZhdGFsLGU9MCxmPTAsaD0wO3RoaXMuZGVjb2RlPWZ1bmN0aW9uKGMpe3ZhciBnPWMuZ2V0KCk7aWYoLTE9PT1nJiYwPT09ZSYmMD09PWYmJjA9PT1oKXJldHVybi0xO2lmKC0xPT09ZyYmKDAhPT1lfHwwIT09Znx8MCE9PWgpKWg9Zj1lPTAsaShkKTtjLm9mZnNldCgxKTt2YXIgajtpZigwIT09aCl7aj1udWxsO2lmKGIoZyw0OCw1NykpaWYoZz0xMCooMTI2KigxMCooZS0xMjkpKyhmLTQ4KSkrCihoLTEyOSkpK2ctNDgsMzk0MTk8ZyYmMTg5RTM+Z3x8MTIzNzU3NTxnKWo9bnVsbDtlbHNle3ZhciBrPTA7aj0wO3ZhciB3PXUuZ2IxODAzMCxBO2ZvcihBPTA7QTx3Lmxlbmd0aDsrK0Epe3ZhciBHPXdbQV07aWYoR1swXTw9ZylrPUdbMF0saj1HWzFdO2Vsc2UgYnJlYWt9aj1qK2cta31oPWY9ZT0wO3JldHVybiBudWxsPT09aj8oYy5vZmZzZXQoLTMpLGkoZCkpOmp9aWYoMCE9PWYpe2lmKGIoZywxMjksMjU0KSlyZXR1cm4gaD1nLG51bGw7Yy5vZmZzZXQoLTIpO2Y9ZT0wO3JldHVybiBpKGQpfWlmKDAhPT1lKXtpZihiKGcsNDgsNTcpJiZhKXJldHVybiBmPWcsbnVsbDtqPWU7az1udWxsO2U9MDt3PTEyNz5nPzY0OjY1O2lmKGIoZyw2NCwxMjYpfHxiKGcsMTI4LDI1NCkpaz0xOTAqKGotMTI5KSsoZy13KTtqPW51bGw9PT1rP251bGw6bChrLHUuZ2JrKTtudWxsPT09ayYmYy5vZmZzZXQoLTEpO3JldHVybiBudWxsPT09aj9pKGQpOmp9cmV0dXJuIGIoZywwLDEyNyk/ZzoxMjg9PT0KZz84MzY0OmIoZywxMjksMjU0KT8oZT1nLG51bGwpOmkoZCl9fWZ1bmN0aW9uIHMoYSl7dGhpcy5lbmNvZGU9ZnVuY3Rpb24oYyxkKXt2YXIgZT1kLmdldCgpO2lmKC0xPT09ZSlyZXR1cm4tMTtkLm9mZnNldCgxKTtpZihiKGUsMCwxMjcpKXJldHVybiBjLmVtaXQoZSk7dmFyIGg9bShlLHUuZ2JrKTtpZihudWxsIT09aClyZXR1cm4gZT1mKGgsMTkwKSsxMjksaCU9MTkwLGMuZW1pdChlLGgrKDYzPmg/NjQ6NjUpKTtpZihudWxsPT09aCYmIWEpcmV0dXJuIGsoZSk7dmFyIGc9aD0wLGk9dS5nYjE4MDMwLGo7Zm9yKGo9MDtqPGkubGVuZ3RoOysrail7dmFyIHc9aVtqXTtpZih3WzFdPD1lKWg9d1sxXSxnPXdbMF07ZWxzZSBicmVha31oPWcrZS1oO2U9ZihmKGYoaCwxMCksMTI2KSwxMCk7aC09MTI2MDAqZTtnPWYoZihoLDEwKSwxMjYpO2gtPTEyNjAqZztpPWYoaCwxMCk7cmV0dXJuIGMuZW1pdChlKzEyOSxnKzQ4LGkrMTI5LGgtMTAqaSs0OCl9fWZ1bmN0aW9uIHgoYSl7dmFyIGM9CmEuZmF0YWwsZD0hMSxlPTA7dGhpcy5kZWNvZGU9ZnVuY3Rpb24oYSl7dmFyIGY9YS5nZXQoKTtpZigtMT09PWYmJjA9PT1lKXJldHVybi0xO2lmKC0xPT09ZiYmMCE9PWUpcmV0dXJuIGU9MCxpKGMpO2Eub2Zmc2V0KDEpO2lmKDEyNj09PWUpe2U9MDtpZigxMjM9PT1mKXJldHVybiBkPSEwLG51bGw7aWYoMTI1PT09ZilyZXR1cm4gZD0hMSxudWxsO2lmKDEyNj09PWYpcmV0dXJuIDEyNjtpZigxMD09PWYpcmV0dXJuIG51bGw7YS5vZmZzZXQoLTEpO3JldHVybiBpKGMpfWlmKDAhPT1lKXthPWU7ZT0wO3ZhciBoPW51bGw7YihmLDMzLDEyNikmJihoPWwoMTkwKihhLTEpKyhmKzYzKSx1LmdiaykpOzEwPT09ZiYmKGQ9ITEpO3JldHVybiBudWxsPT09aD9pKGMpOmh9aWYoMTI2PT09ZilyZXR1cm4gZT0xMjYsbnVsbDtpZihkKXtpZihiKGYsMzIsMTI3KSlyZXR1cm4gZT1mLG51bGw7MTA9PT1mJiYoZD0hMSk7cmV0dXJuIGkoYyl9cmV0dXJuIGIoZiwwLDEyNyk/ZjppKGMpfX1mdW5jdGlvbiB2KCl7dmFyIGE9CiExO3RoaXMuZW5jb2RlPWZ1bmN0aW9uKGMsZCl7dmFyIGU9ZC5nZXQoKTtpZigtMT09PWUpcmV0dXJuLTE7ZC5vZmZzZXQoMSk7aWYoYihlLDAsMTI3KSYmYSlyZXR1cm4gZC5vZmZzZXQoLTEpLGE9ITEsYy5lbWl0KDEyNiwxMjUpO2lmKDEyNj09PWUpcmV0dXJuIGMuZW1pdCgxMjYsMTI2KTtpZihiKGUsMCwxMjcpKXJldHVybiBjLmVtaXQoZSk7aWYoIWEpcmV0dXJuIGQub2Zmc2V0KC0xKSxhPSEwLGMuZW1pdCgxMjYsMTIzKTt2YXIgaD1tKGUsdS5nYmspO2lmKG51bGw9PT1oKXJldHVybiBrKGUpO3ZhciBnPWYoaCwxOTApKzEsaD1oJTE5MC02MztyZXR1cm4hYihnLDMzLDEyNil8fCFiKGgsMzMsMTI2KT9rKGUpOmMuZW1pdChnLGgpfX1mdW5jdGlvbiB5KGEpe3ZhciBjPWEuZmF0YWwsZD0wLGU9bnVsbDt0aGlzLmRlY29kZT1mdW5jdGlvbihhKXtpZihudWxsIT09ZSlyZXR1cm4gYT1lLGU9bnVsbCxhO3ZhciBmPWEuZ2V0KCk7aWYoLTE9PT1mJiYwPT09ZClyZXR1cm4tMTtpZigtMT09PQpmJiYwIT09ZClyZXR1cm4gZD0wLGkoYyk7YS5vZmZzZXQoMSk7aWYoMCE9PWQpe3ZhciBoPWQsZz1udWxsO2Q9MDt2YXIgaj0xMjc+Zj82NDo5ODtpZihiKGYsNjQsMTI2KXx8YihmLDE2MSwyNTQpKWc9MTU3KihoLTEyOSkrKGYtaik7aWYoMTEzMz09PWcpcmV0dXJuIGU9NzcyLDIwMjtpZigxMTM1PT09ZylyZXR1cm4gZT03ODAsMjAyO2lmKDExNjQ9PT1nKXJldHVybiBlPTc3MiwyMzQ7aWYoMTE2Nj09PWcpcmV0dXJuIGU9NzgwLDIzNDtmPW51bGw9PT1nP251bGw6bChnLHUuYmlnNSk7bnVsbD09PWcmJmEub2Zmc2V0KC0xKTtyZXR1cm4gbnVsbD09PWY/aShjKTpmfXJldHVybiBiKGYsMCwxMjcpP2Y6YihmLDEyOSwyNTQpPyhkPWYsbnVsbCk6aShjKX19ZnVuY3Rpb24gQigpe3RoaXMuZW5jb2RlPWZ1bmN0aW9uKGEsYyl7dmFyIGQ9Yy5nZXQoKTtpZigtMT09PWQpcmV0dXJuLTE7Yy5vZmZzZXQoMSk7aWYoYihkLDAsMTI3KSlyZXR1cm4gYS5lbWl0KGQpO3ZhciBlPW0oZCx1LmJpZzUpOwppZihudWxsPT09ZSlyZXR1cm4gayhkKTtkPWYoZSwxNTcpKzEyOTtlJT0xNTc7cmV0dXJuIGEuZW1pdChkLGUrKDYzPmU/NjQ6OTgpKX19ZnVuY3Rpb24geihhKXt2YXIgYz1hLmZhdGFsLGQ9MCxlPTA7dGhpcy5kZWNvZGU9ZnVuY3Rpb24oYSl7dmFyIGY9YS5nZXQoKTtpZigtMT09PWYpe2lmKDA9PT1kJiYwPT09ZSlyZXR1cm4tMTtlPWQ9MDtyZXR1cm4gaShjKX1hLm9mZnNldCgxKTt2YXIgaCxnO3JldHVybiAwIT09ZT8oaD1lLGU9MCxnPW51bGwsYihoLDE2MSwyNTQpJiZiKGYsMTYxLDI1NCkmJihnPWwoOTQqKGgtMTYxKStmLTE2MSx1LmppczAyMTIpKSxiKGYsMTYxLDI1NCl8fGEub2Zmc2V0KC0xKSxudWxsPT09Zz9pKGMpOmcpOjE0Mj09PWQmJmIoZiwxNjEsMjIzKT8oZD0wLDY1Mzc3K2YtMTYxKToxNDM9PT1kJiZiKGYsMTYxLDI1NCk/KGQ9MCxlPWYsbnVsbCk6MCE9PWQ/KGg9ZCxkPTAsZz1udWxsLGIoaCwxNjEsMjU0KSYmYihmLDE2MSwyNTQpJiYoZz1sKDk0KihoLTE2MSkrCmYtMTYxLHUuamlzMDIwOCkpLGIoZiwxNjEsMjU0KXx8YS5vZmZzZXQoLTEpLG51bGw9PT1nP2koYyk6Zyk6YihmLDAsMTI3KT9mOjE0Mj09PWZ8fDE0Mz09PWZ8fGIoZiwxNjEsMjU0KT8oZD1mLG51bGwpOmkoYyl9fWZ1bmN0aW9uIHcoKXt0aGlzLmVuY29kZT1mdW5jdGlvbihhLGMpe3ZhciBkPWMuZ2V0KCk7aWYoLTE9PT1kKXJldHVybi0xO2Mub2Zmc2V0KDEpO2lmKGIoZCwwLDEyNykpcmV0dXJuIGEuZW1pdChkKTtpZigxNjU9PT1kKXJldHVybiBhLmVtaXQoOTIpO2lmKDgyNTQ9PT1kKXJldHVybiBhLmVtaXQoMTI2KTtpZihiKGQsNjUzNzcsNjU0MzkpKXJldHVybiBhLmVtaXQoMTQyLGQtNjUzNzcrMTYxKTt2YXIgZT1tKGQsdS5qaXMwMjA4KTtpZihudWxsPT09ZSlyZXR1cm4gayhkKTtkPWYoZSw5NCkrMTYxO3JldHVybiBhLmVtaXQoZCxlJTk0KzE2MSl9fWZ1bmN0aW9uIEQoYSl7dmFyIGM9YS5mYXRhbCxkPTAsZT0hMSxmPTA7dGhpcy5kZWNvZGU9ZnVuY3Rpb24oYSl7dmFyIGg9CmEuZ2V0KCk7LTEhPT1oJiZhLm9mZnNldCgxKTtzd2l0Y2goZCl7ZGVmYXVsdDpjYXNlIDA6cmV0dXJuIDI3PT09aD8oZD0xLG51bGwpOmIoaCwwLDEyNyk/aDotMT09PWg/LTE6aShjKTtjYXNlIDE6aWYoMzY9PT1ofHw0MD09PWgpcmV0dXJuIGY9aCxkPTIsbnVsbDstMSE9PWgmJmEub2Zmc2V0KC0xKTtkPTA7cmV0dXJuIGkoYyk7Y2FzZSAyOnZhciBnPWY7Zj0wO2lmKDM2PT09ZyYmKDY0PT09aHx8NjY9PT1oKSlyZXR1cm4gZT0hMSxkPTQsbnVsbDtpZigzNj09PWcmJjQwPT09aClyZXR1cm4gZD0zLG51bGw7aWYoNDA9PT1nJiYoNjY9PT1ofHw3ND09PWgpKXJldHVybiBkPTAsbnVsbDtpZig0MD09PWcmJjczPT09aClyZXR1cm4gZD02LG51bGw7LTE9PT1oP2Eub2Zmc2V0KC0xKTphLm9mZnNldCgtMik7ZD0wO3JldHVybiBpKGMpO2Nhc2UgMzppZig2OD09PWgpcmV0dXJuIGU9ITAsZD00LG51bGw7LTE9PT1oP2Eub2Zmc2V0KC0yKTphLm9mZnNldCgtMyk7ZD0wO3JldHVybiBpKGMpOwpjYXNlIDQ6aWYoMTA9PT1oKXJldHVybiBkPTAsaShjLDEwKTtpZigyNz09PWgpcmV0dXJuIGQ9MSxudWxsO2lmKC0xPT09aClyZXR1cm4tMTtmPWg7ZD01O3JldHVybiBudWxsO2Nhc2UgNTpkPTQ7aWYoLTE9PT1oKXJldHVybiBpKGMpO2E9bnVsbDtnPTk0KihmLTMzKStoLTMzO2IoZiwzMywxMjYpJiZiKGgsMzMsMTI2KSYmKGE9ITE9PT1lP2woZyx1LmppczAyMDgpOmwoZyx1LmppczAyMTIpKTtyZXR1cm4gbnVsbD09PWE/aShjKTphO2Nhc2UgNjpyZXR1cm4gMjc9PT1oPyhkPTEsbnVsbCk6YihoLDMzLDk1KT82NTM3NytoLTMzOi0xPT09aD8tMTppKGMpfX19ZnVuY3Rpb24gQygpe3ZhciBhPTA7dGhpcy5lbmNvZGU9ZnVuY3Rpb24oYyxkKXt2YXIgZT1kLmdldCgpO2lmKC0xPT09ZSlyZXR1cm4tMTtkLm9mZnNldCgxKTtpZigoYihlLDAsMTI3KXx8MTY1PT09ZXx8ODI1ND09PWUpJiYwIT09YSlyZXR1cm4gZC5vZmZzZXQoLTEpLGE9MCxjLmVtaXQoMjcsNDAsNjYpO2lmKGIoZSwKMCwxMjcpKXJldHVybiBjLmVtaXQoZSk7aWYoMTY1PT09ZSlyZXR1cm4gYy5lbWl0KDkyKTtpZig4MjU0PT09ZSlyZXR1cm4gYy5lbWl0KDEyNik7aWYoYihlLDY1Mzc3LDY1NDM5KSYmMiE9PWEpcmV0dXJuIGQub2Zmc2V0KC0xKSxhPTIsYy5lbWl0KDI3LDQwLDczKTtpZihiKGUsNjUzNzcsNjU0MzkpKXJldHVybiBjLmVtaXQoZS02NTM3Ny0zMyk7aWYoMSE9PWEpcmV0dXJuIGQub2Zmc2V0KC0xKSxhPTEsYy5lbWl0KDI3LDM2LDY2KTt2YXIgaD1tKGUsdS5qaXMwMjA4KTtpZihudWxsPT09aClyZXR1cm4gayhlKTtlPWYoaCw5NCkrMzM7cmV0dXJuIGMuZW1pdChlLGglOTQrMzMpfX1mdW5jdGlvbiBBKGEpe3ZhciBjPWEuZmF0YWwsZD0wO3RoaXMuZGVjb2RlPWZ1bmN0aW9uKGEpe3ZhciBlPWEuZ2V0KCk7aWYoLTE9PT1lJiYwPT09ZClyZXR1cm4tMTtpZigtMT09PWUmJjAhPT1kKXJldHVybiBkPTAsaShjKTthLm9mZnNldCgxKTtpZigwIT09ZCl7dmFyIGY9ZDtkPTA7aWYoYihlLAo2NCwxMjYpfHxiKGUsMTI4LDI1MikpcmV0dXJuIGE9bCgxODgqKGYtKDE2MD5mPzEyOToxOTMpKStlLSgxMjc+ZT82NDo2NSksdS5qaXMwMjA4KSxudWxsPT09YT9pKGMpOmE7YS5vZmZzZXQoLTEpO3JldHVybiBpKGMpfXJldHVybiBiKGUsMCwxMjgpP2U6YihlLDE2MSwyMjMpPzY1Mzc3K2UtMTYxOmIoZSwxMjksMTU5KXx8YihlLDIyNCwyNTIpPyhkPWUsbnVsbCk6aShjKX19ZnVuY3Rpb24gRSgpe3RoaXMuZW5jb2RlPWZ1bmN0aW9uKGEsYyl7dmFyIGQ9Yy5nZXQoKTtpZigtMT09PWQpcmV0dXJuLTE7Yy5vZmZzZXQoMSk7aWYoYihkLDAsMTI4KSlyZXR1cm4gYS5lbWl0KGQpO2lmKDE2NT09PWQpcmV0dXJuIGEuZW1pdCg5Mik7aWYoODI1ND09PWQpcmV0dXJuIGEuZW1pdCgxMjYpO2lmKGIoZCw2NTM3Nyw2NTQzOSkpcmV0dXJuIGEuZW1pdChkLTY1Mzc3KzE2MSk7dmFyIGU9bShkLHUuamlzMDIwOCk7aWYobnVsbD09PWUpcmV0dXJuIGsoZCk7ZD1mKGUsMTg4KTtlJT0xODg7cmV0dXJuIGEuZW1pdChkKwooMzE+ZD8xMjk6MTkzKSxlKyg2Mz5lPzY0OjY1KSl9fWZ1bmN0aW9uIEkoYSl7dmFyIGM9YS5mYXRhbCxkPTA7dGhpcy5kZWNvZGU9ZnVuY3Rpb24oYSl7dmFyIGU9YS5nZXQoKTtpZigtMT09PWUmJjA9PT1kKXJldHVybi0xO2lmKC0xPT09ZSYmMCE9PWQpcmV0dXJuIGQ9MCxpKGMpO2Eub2Zmc2V0KDEpO2lmKDAhPT1kKXt2YXIgZj1kLGg9bnVsbDtkPTA7aWYoYihmLDEyOSwxOTgpKXt2YXIgZz0xNzgqKGYtMTI5KTtiKGUsNjUsOTApP2g9ZytlLTY1OmIoZSw5NywxMjIpP2g9ZysyNitlLTk3OmIoZSwxMjksMjU0KSYmKGg9ZysyNisyNitlLTEyOSl9YihmLDE5OSwyNTMpJiZiKGUsMTYxLDI1NCkmJihoPTEyNDYwKzk0KihmLTE5OSkrKGUtMTYxKSk7ZT1udWxsPT09aD9udWxsOmwoaCx1WyJldWMta3IiXSk7bnVsbD09PWgmJmEub2Zmc2V0KC0xKTtyZXR1cm4gbnVsbD09PWU/aShjKTplfXJldHVybiBiKGUsMCwxMjcpP2U6YihlLDEyOSwyNTMpPyhkPWUsbnVsbCk6aShjKX19ZnVuY3Rpb24gSigpe3RoaXMuZW5jb2RlPQpmdW5jdGlvbihhLGMpe3ZhciBkPWMuZ2V0KCk7aWYoLTE9PT1kKXJldHVybi0xO2Mub2Zmc2V0KDEpO2lmKGIoZCwwLDEyNykpcmV0dXJuIGEuZW1pdChkKTt2YXIgZT1tKGQsdVsiZXVjLWtyIl0pO2lmKG51bGw9PT1lKXJldHVybiBrKGQpO2lmKDEyNDYwPmUpcmV0dXJuIGQ9ZihlLDE3OCkrMTI5LGUlPTE3OCxhLmVtaXQoZCxlKygyNj5lPzY1OjUyPmU/NzE6NzcpKTtlLT0xMjQ2MDtkPWYoZSw5NCkrMTk5O3JldHVybiBhLmVtaXQoZCxlJTk0KzE2MSl9fWZ1bmN0aW9uIEsoYSl7dmFyIGM9YS5mYXRhbCxkPTAsZT0wO3RoaXMuZGVjb2RlPWZ1bmN0aW9uKGEpe3ZhciBmPWEuZ2V0KCk7LTEhPT1mJiZhLm9mZnNldCgxKTtzd2l0Y2goZCl7ZGVmYXVsdDpjYXNlIDA6cmV0dXJuIDE0PT09Zj8oZD00LG51bGwpOjE1PT09Zj9udWxsOjI3PT09Zj8oZD0xLG51bGwpOmIoZiwwLDEyNyk/ZjotMT09PWY/LTE6aShjKTtjYXNlIDE6aWYoMzY9PT1mKXJldHVybiBkPTIsbnVsbDstMSE9PWYmJgphLm9mZnNldCgtMSk7ZD0wO3JldHVybiBpKGMpO2Nhc2UgMjppZig0MT09PWYpcmV0dXJuIGQ9MyxudWxsOy0xPT09Zj9hLm9mZnNldCgtMSk6YS5vZmZzZXQoLTIpO2Q9MDtyZXR1cm4gaShjKTtjYXNlIDM6aWYoNjc9PT1mKXJldHVybiBkPTAsbnVsbDstMT09PWY/YS5vZmZzZXQoLTIpOmEub2Zmc2V0KC0zKTtkPTA7cmV0dXJuIGkoYyk7Y2FzZSA0OmlmKDEwPT09ZilyZXR1cm4gZD0wLGkoYywxMCk7aWYoMTQ9PT1mKXJldHVybiBudWxsO2lmKDE1PT09ZilyZXR1cm4gZD0wLG51bGw7aWYoLTE9PT1mKXJldHVybi0xO2U9ZjtkPTU7cmV0dXJuIG51bGw7Y2FzZSA1OmQ9NDtpZigtMT09PWYpcmV0dXJuIGkoYyk7YT1udWxsO2IoZSwzMyw3MCkmJmIoZiwzMywxMjYpP2E9bCgxNzgqKGUtMSkrNTIrZi0xLHVbImV1Yy1rciJdKTpiKGUsNzEsMTI2KSYmYihmLDMzLDEyNikmJihhPWwoMTI0NjArOTQqKGUtNzEpKyhmLTMzKSx1WyJldWMta3IiXSkpO3JldHVybiBudWxsIT09YT9hOmkoYyl9fX0KZnVuY3Rpb24gRigpe3ZhciBhPSExLGM9MDt0aGlzLmVuY29kZT1mdW5jdGlvbihkLGUpe3ZhciBoPWUuZ2V0KCk7aWYoLTE9PT1oKXJldHVybi0xO2F8fChhPSEwLGQuZW1pdCgyNywzNiw0MSw2NykpO2Uub2Zmc2V0KDEpO2lmKGIoaCwwLDEyNykmJjAhPT1jKXJldHVybiBlLm9mZnNldCgtMSksYz0wLGQuZW1pdCgxNSk7aWYoYihoLDAsMTI3KSlyZXR1cm4gZC5lbWl0KGgpO2lmKDEhPT1jKXJldHVybiBlLm9mZnNldCgtMSksYz0xLGQuZW1pdCgxNCk7dmFyIGc9bShoLHVbImV1Yy1rciJdKTtpZihudWxsPT09ZylyZXR1cm4gayhoKTt2YXIgaTtpZigxMjQ2MD5nKXJldHVybiBpPWYoZywxNzgpKzEsZz1nJTE3OC0yNi0yNisxLCFiKGksMzMsNzApfHwhYihnLDMzLDEyNik/ayhoKTpkLmVtaXQoaSxnKTtnLT0xMjQ2MDtpPWYoZyw5NCkrNzE7Zz1nJTk0KzMzO3JldHVybiFiKGksNzEsMTI2KXx8IWIoZywzMywxMjYpP2soaCk6ZC5lbWl0KGksZyl9fWZ1bmN0aW9uIE4oYSxkKXt2YXIgYz0KZC5mYXRhbCxlPW51bGwsZj1udWxsO3RoaXMuZGVjb2RlPWZ1bmN0aW9uKGQpe3ZhciBoPWQuZ2V0KCk7aWYoLTE9PT1oJiZudWxsPT09ZSYmbnVsbD09PWYpcmV0dXJuLTE7aWYoLTE9PT1oJiYobnVsbCE9PWV8fG51bGwhPT1mKSlyZXR1cm4gaShjKTtkLm9mZnNldCgxKTtpZihudWxsPT09ZSlyZXR1cm4gZT1oLG51bGw7aD1hPyhlPDw4KStoOihoPDw4KStlO2U9bnVsbDtpZihudWxsIT09Zil7dmFyIGc9ZjtmPW51bGw7aWYoYihoLDU2MzIwLDU3MzQzKSlyZXR1cm4gNjU1MzYrMTAyNCooZy01NTI5NikrKGgtNTYzMjApO2Qub2Zmc2V0KC0yKTtyZXR1cm4gaShjKX1yZXR1cm4gYihoLDU1Mjk2LDU2MzE5KT8oZj1oLG51bGwpOmIoaCw1NjMyMCw1NzM0Myk/aShjKTpofX1mdW5jdGlvbiBPKGEpe3RoaXMuZW5jb2RlPWZ1bmN0aW9uKGQsYyl7ZnVuY3Rpb24gZShiKXt2YXIgYz1iPj44LGI9YiYyNTU7cmV0dXJuIGE/ZC5lbWl0KGMsYik6ZC5lbWl0KGIsYyl9dmFyIGg9Yy5nZXQoKTsKaWYoLTE9PT1oKXJldHVybi0xO2Mub2Zmc2V0KDEpO2IoaCw1NTI5Niw1NzM0MykmJmsoaCk7aWYoNjU1MzU+PWgpcmV0dXJuIGUoaCk7dmFyIGc9ZihoLTY1NTM2LDEwMjQpKzU1Mjk2LGg9KGgtNjU1MzYpJTEwMjQrNTYzMjA7ZShnKTtyZXR1cm4gZShoKX19ZnVuY3Rpb24gTChhLGIpe2lmKCF0aGlzfHx0aGlzPT09ZylyZXR1cm4gbmV3IEwoYSxiKTthPWE/IiIrYToidXRmLTgiO2I9T2JqZWN0KGIpO3RoaXMuX2VuY29kaW5nPWooYSk7aWYobnVsbD09PXRoaXMuX2VuY29kaW5nfHwidXRmLTgiIT09dGhpcy5fZW5jb2RpbmcubmFtZSYmInV0Zi0xNiIhPT10aGlzLl9lbmNvZGluZy5uYW1lJiYidXRmLTE2YmUiIT09dGhpcy5fZW5jb2RpbmcubmFtZSl0aHJvdyBuZXcgVHlwZUVycm9yKCJVbmtub3duIGVuY29kaW5nOiAiK2EpO3RoaXMuX3N0cmVhbWluZz0hMTt0aGlzLl9lbmNvZGVyPW51bGw7dGhpcy5fb3B0aW9ucz17ZmF0YWw6Qm9vbGVhbihiLmZhdGFsKX07T2JqZWN0LmRlZmluZVByb3BlcnR5PwpPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywiZW5jb2RpbmciLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZW5jb2RpbmcubmFtZX19KTp0aGlzLmVuY29kaW5nPXRoaXMuX2VuY29kaW5nLm5hbWU7cmV0dXJuIHRoaXN9ZnVuY3Rpb24gTShhLGIpe2lmKCF0aGlzfHx0aGlzPT09ZylyZXR1cm4gbmV3IE0oYSxiKTthPWE/IiIrYToidXRmLTgiO2I9T2JqZWN0KGIpO3RoaXMuX2VuY29kaW5nPWooYSk7aWYobnVsbD09PXRoaXMuX2VuY29kaW5nKXRocm93IG5ldyBUeXBlRXJyb3IoIlVua25vd24gZW5jb2Rpbmc6ICIrYSk7dGhpcy5fc3RyZWFtaW5nPSExO3RoaXMuX2RlY29kZXI9bnVsbDt0aGlzLl9vcHRpb25zPXtmYXRhbDpCb29sZWFuKGIuZmF0YWwpfTtPYmplY3QuZGVmaW5lUHJvcGVydHk/T2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsImVuY29kaW5nIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2VuY29kaW5nLm5hbWV9fSk6dGhpcy5lbmNvZGluZz10aGlzLl9lbmNvZGluZy5uYW1lOwpyZXR1cm4gdGhpc31pZighKHZvaWQgMCE9PWcuVGV4dEVuY29kZXImJnZvaWQgMCE9PWcuVGV4dERlY29kZXIpKXtoLnByb3RvdHlwZT1FcnJvci5wcm90b3R5cGU7dmFyIHQ9e30sSD17fTtbe2VuY29kaW5nczpbe2xhYmVsczpbInVuaWNvZGUtMS0xLXV0Zi04IiwidXRmLTgiLCJ1dGY4Il0sbmFtZToidXRmLTgifV0saGVhZGluZzoiVGhlIEVuY29kaW5nIn0se2VuY29kaW5nczpbe2xhYmVsczpbImNwODY0IiwiaWJtODY0Il0sbmFtZToiaWJtODY0In0se2xhYmVsczpbImNwODY2IiwiaWJtODY2Il0sbmFtZToiaWJtODY2In0se2xhYmVsczoiY3Npc29sYXRpbjIgaXNvLTg4NTktMiBpc28taXItMTAxIGlzbzg4NTktMiBpc29fODg1OS0yIGwyIGxhdGluMiIuc3BsaXQoIiAiKSxuYW1lOiJpc28tODg1OS0yIn0se2xhYmVsczoiY3Npc29sYXRpbjMgaXNvLTg4NTktMyBpc29fODg1OS0zIGlzby1pci0xMDkgbDMgbGF0aW4zIi5zcGxpdCgiICIpLG5hbWU6Imlzby04ODU5LTMifSwKe2xhYmVsczoiY3Npc29sYXRpbjQgaXNvLTg4NTktNCBpc29fODg1OS00IGlzby1pci0xMTAgbDQgbGF0aW40Ii5zcGxpdCgiICIpLG5hbWU6Imlzby04ODU5LTQifSx7bGFiZWxzOlsiY3Npc29sYXRpbmN5cmlsbGljIiwiY3lyaWxsaWMiLCJpc28tODg1OS01IiwiaXNvXzg4NTktNSIsImlzby1pci0xNDQiXSxuYW1lOiJpc28tODg1OS01In0se2xhYmVsczoiYXJhYmljIGNzaXNvbGF0aW5hcmFiaWMgZWNtYS0xMTQgaXNvLTg4NTktNiBpc29fODg1OS02IGlzby1pci0xMjciLnNwbGl0KCIgIiksbmFtZToiaXNvLTg4NTktNiJ9LHtsYWJlbHM6ImNzaXNvbGF0aW5ncmVlayBlY21hLTExOCBlbG90XzkyOCBncmVlayBncmVlazggaXNvLTg4NTktNyBpc29fODg1OS03IGlzby1pci0xMjYiLnNwbGl0KCIgIiksbmFtZToiaXNvLTg4NTktNyJ9LHtsYWJlbHM6ImNzaXNvbGF0aW5oZWJyZXcgaGVicmV3IGlzby04ODU5LTggaXNvLTg4NTktOC1pIGlzby1pci0xMzggaXNvXzg4NTktOCB2aXN1YWwiLnNwbGl0KCIgIiksCm5hbWU6Imlzby04ODU5LTgifSx7bGFiZWxzOiJjc2lzb2xhdGluNiBpc28tODg1OS0xMCBpc28taXItMTU3IGlzbzg4NTktMTAgbDYgbGF0aW42Ii5zcGxpdCgiICIpLG5hbWU6Imlzby04ODU5LTEwIn0se2xhYmVsczpbImlzby04ODU5LTEzIl0sbmFtZToiaXNvLTg4NTktMTMifSx7bGFiZWxzOlsiaXNvLTg4NTktMTQiLCJpc284ODU5LTE0Il0sbmFtZToiaXNvLTg4NTktMTQifSx7bGFiZWxzOlsiaXNvLTg4NTktMTUiLCJpc29fODg1OS0xNSJdLG5hbWU6Imlzby04ODU5LTE1In0se2xhYmVsczpbImlzby04ODU5LTE2Il0sbmFtZToiaXNvLTg4NTktMTYifSx7bGFiZWxzOlsia29pOC1yIiwia29pOF9yIl0sbmFtZToia29pOC1yIn0se2xhYmVsczpbImtvaTgtdSJdLG5hbWU6ImtvaTgtdSJ9LHtsYWJlbHM6WyJjc21hY2ludG9zaCIsIm1hYyIsIm1hY2ludG9zaCIsIngtbWFjLXJvbWFuIl0sbmFtZToibWFjaW50b3NoIn0se2xhYmVsczpbImlzby04ODU5LTExIiwidGlzLTYyMCIsCiJ3aW5kb3dzLTg3NCJdLG5hbWU6IndpbmRvd3MtODc0In0se2xhYmVsczpbIndpbmRvd3MtMTI1MCIsIngtY3AxMjUwIl0sbmFtZToid2luZG93cy0xMjUwIn0se2xhYmVsczpbIndpbmRvd3MtMTI1MSIsIngtY3AxMjUxIl0sbmFtZToid2luZG93cy0xMjUxIn0se2xhYmVsczoiYXNjaWkgYW5zaV94My40LTE5NjggY3Npc29sYXRpbjEgaXNvLTg4NTktMSBpc284ODU5LTEgaXNvXzg4NTktMSBsMSBsYXRpbjEgdXMtYXNjaWkgd2luZG93cy0xMjUyIi5zcGxpdCgiICIpLG5hbWU6IndpbmRvd3MtMTI1MiJ9LHtsYWJlbHM6WyJjcDEyNTMiLCJ3aW5kb3dzLTEyNTMiXSxuYW1lOiJ3aW5kb3dzLTEyNTMifSx7bGFiZWxzOiJjc2lzb2xhdGluNSBpc28tODg1OS05IGlzby1pci0xNDggbDUgbGF0aW41IHdpbmRvd3MtMTI1NCIuc3BsaXQoIiAiKSxuYW1lOiJ3aW5kb3dzLTEyNTQifSx7bGFiZWxzOlsiY3AxMjU1Iiwid2luZG93cy0xMjU1Il0sbmFtZToid2luZG93cy0xMjU1In0se2xhYmVsczpbImNwMTI1NiIsCiJ3aW5kb3dzLTEyNTYiXSxuYW1lOiJ3aW5kb3dzLTEyNTYifSx7bGFiZWxzOlsid2luZG93cy0xMjU3Il0sbmFtZToid2luZG93cy0xMjU3In0se2xhYmVsczpbImNwMTI1OCIsIndpbmRvd3MtMTI1OCJdLG5hbWU6IndpbmRvd3MtMTI1OCJ9LHtsYWJlbHM6WyJ4LW1hYy1jeXJpbGxpYyIsIngtbWFjLXVrcmFpbmlhbiJdLG5hbWU6IngtbWFjLWN5cmlsbGljIn1dLGhlYWRpbmc6IkxlZ2FjeSBzaW5nbGUtYnl0ZSBlbmNvZGluZ3MifSx7ZW5jb2RpbmdzOlt7bGFiZWxzOiJjaGluZXNlIGNzZ2IyMzEyIGNzaXNvNThnYjIzMTI4MCBnYjIzMTIgZ2JrIGdiXzIzMTIgZ2JfMjMxMi04MCBpc28taXItNTggeC1nYmsiLnNwbGl0KCIgIiksbmFtZToiZ2JrIn0se2xhYmVsczpbImdiMTgwMzAiXSxuYW1lOiJnYjE4MDMwIn0se2xhYmVsczpbImh6LWdiLTIzMTIiXSxuYW1lOiJoei1nYi0yMzEyIn1dLGhlYWRpbmc6IkxlZ2FjeSBtdWx0aS1ieXRlIENoaW5lc2UgKHNpbXBsaWZpZWQpIGVuY29kaW5ncyJ9LAp7ZW5jb2RpbmdzOlt7bGFiZWxzOlsiYmlnNSIsImJpZzUtaGtzY3MiLCJjbi1iaWc1IiwiY3NiaWc1IiwieC14LWJpZzUiXSxuYW1lOiJiaWc1In1dLGhlYWRpbmc6IkxlZ2FjeSBtdWx0aS1ieXRlIENoaW5lc2UgKHRyYWRpdGlvbmFsKSBlbmNvZGluZ3MifSx7ZW5jb2RpbmdzOlt7bGFiZWxzOlsiY3NldWNwa2RmbXRqYXBhbmVzZSIsImV1Yy1qcCIsIngtZXVjLWpwIl0sbmFtZToiZXVjLWpwIn0se2xhYmVsczpbImNzaXNvMjAyMmpwIiwiaXNvLTIwMjItanAiXSxuYW1lOiJpc28tMjAyMi1qcCJ9LHtsYWJlbHM6ImNzc2hpZnRqaXMgbXNfa2Fuamkgc2hpZnQtamlzIHNoaWZ0X2ppcyBzamlzIHdpbmRvd3MtMzFqIHgtc2ppcyIuc3BsaXQoIiAiKSxuYW1lOiJzaGlmdF9qaXMifV0saGVhZGluZzoiTGVnYWN5IG11bHRpLWJ5dGUgSmFwYW5lc2UgZW5jb2RpbmdzIn0se2VuY29kaW5nczpbe2xhYmVsczoiY3NldWNrciBjc2tzYzU2MDExOTg3IGV1Yy1rciBpc28taXItMTQ5IGtvcmVhbiBrc19jXzU2MDEtMTk4NyBrc19jXzU2MDEtMTk4OSBrc2M1NjAxIGtzY181NjAxIHdpbmRvd3MtOTQ5Ii5zcGxpdCgiICIpLApuYW1lOiJldWMta3IifSx7bGFiZWxzOlsiY3Npc28yMDIya3IiLCJpc28tMjAyMi1rciJdLG5hbWU6Imlzby0yMDIyLWtyIn1dLGhlYWRpbmc6IkxlZ2FjeSBtdWx0aS1ieXRlIEtvcmVhbiBlbmNvZGluZ3MifSx7ZW5jb2RpbmdzOlt7bGFiZWxzOlsidXRmLTE2IiwidXRmLTE2bGUiXSxuYW1lOiJ1dGYtMTYifSx7bGFiZWxzOlsidXRmLTE2YmUiXSxuYW1lOiJ1dGYtMTZiZSJ9XSxoZWFkaW5nOiJMZWdhY3kgdXRmLTE2IGVuY29kaW5ncyJ9XS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2EuZW5jb2RpbmdzLmZvckVhY2goZnVuY3Rpb24oYSl7dFthLm5hbWVdPWE7YS5sYWJlbHMuZm9yRWFjaChmdW5jdGlvbihiKXtIW2JdPWF9KX0pfSk7dmFyIHU9Z1siZW5jb2RpbmctaW5kZXhlcyJdfHx7fTt0WyJ1dGYtOCJdLmdldEVuY29kZXI9ZnVuY3Rpb24oYSl7cmV0dXJuIG5ldyBuKGEpfTt0WyJ1dGYtOCJdLmdldERlY29kZXI9ZnVuY3Rpb24oYSl7cmV0dXJuIG5ldyBwKGEpfTsoZnVuY3Rpb24oKXsiaWJtODY0IGlibTg2NiBpc28tODg1OS0yIGlzby04ODU5LTMgaXNvLTg4NTktNCBpc28tODg1OS01IGlzby04ODU5LTYgaXNvLTg4NTktNyBpc28tODg1OS04IGlzby04ODU5LTEwIGlzby04ODU5LTEzIGlzby04ODU5LTE0IGlzby04ODU5LTE1IGlzby04ODU5LTE2IGtvaTgtciBrb2k4LXUgbWFjaW50b3NoIHdpbmRvd3MtODc0IHdpbmRvd3MtMTI1MCB3aW5kb3dzLTEyNTEgd2luZG93cy0xMjUyIHdpbmRvd3MtMTI1MyB3aW5kb3dzLTEyNTQgd2luZG93cy0xMjU1IHdpbmRvd3MtMTI1NiB3aW5kb3dzLTEyNTcgd2luZG93cy0xMjU4IHgtbWFjLWN5cmlsbGljIi5zcGxpdCgiICIpLmZvckVhY2goZnVuY3Rpb24oYSl7dmFyIGI9CnRbYV0sZD11W2FdO2IuZ2V0RGVjb2Rlcj1mdW5jdGlvbihhKXtyZXR1cm4gbmV3IHIoZCxhKX07Yi5nZXRFbmNvZGVyPWZ1bmN0aW9uKGEpe3JldHVybiBuZXcgcShkLGEpfX0pfSkoKTt0Lmdiay5nZXRFbmNvZGVyPWZ1bmN0aW9uKGEpe3JldHVybiBuZXcgcyghMSxhKX07dC5nYmsuZ2V0RGVjb2Rlcj1mdW5jdGlvbihhKXtyZXR1cm4gbmV3IG8oITEsYSl9O3QuZ2IxODAzMC5nZXRFbmNvZGVyPWZ1bmN0aW9uKGEpe3JldHVybiBuZXcgcyghMCxhKX07dC5nYjE4MDMwLmdldERlY29kZXI9ZnVuY3Rpb24oYSl7cmV0dXJuIG5ldyBvKCEwLGEpfTt0WyJoei1nYi0yMzEyIl0uZ2V0RW5jb2Rlcj1mdW5jdGlvbihhKXtyZXR1cm4gbmV3IHYoYSl9O3RbImh6LWdiLTIzMTIiXS5nZXREZWNvZGVyPWZ1bmN0aW9uKGEpe3JldHVybiBuZXcgeChhKX07dC5iaWc1LmdldEVuY29kZXI9ZnVuY3Rpb24oYSl7cmV0dXJuIG5ldyBCKGEpfTt0LmJpZzUuZ2V0RGVjb2Rlcj1mdW5jdGlvbihhKXtyZXR1cm4gbmV3IHkoYSl9Owp0WyJldWMtanAiXS5nZXRFbmNvZGVyPWZ1bmN0aW9uKGEpe3JldHVybiBuZXcgdyhhKX07dFsiZXVjLWpwIl0uZ2V0RGVjb2Rlcj1mdW5jdGlvbihhKXtyZXR1cm4gbmV3IHooYSl9O3RbImlzby0yMDIyLWpwIl0uZ2V0RW5jb2Rlcj1mdW5jdGlvbihhKXtyZXR1cm4gbmV3IEMoYSl9O3RbImlzby0yMDIyLWpwIl0uZ2V0RGVjb2Rlcj1mdW5jdGlvbihhKXtyZXR1cm4gbmV3IEQoYSl9O3Quc2hpZnRfamlzLmdldEVuY29kZXI9ZnVuY3Rpb24oYSl7cmV0dXJuIG5ldyBFKGEpfTt0LnNoaWZ0X2ppcy5nZXREZWNvZGVyPWZ1bmN0aW9uKGEpe3JldHVybiBuZXcgQShhKX07dFsiZXVjLWtyIl0uZ2V0RW5jb2Rlcj1mdW5jdGlvbihhKXtyZXR1cm4gbmV3IEooYSl9O3RbImV1Yy1rciJdLmdldERlY29kZXI9ZnVuY3Rpb24oYSl7cmV0dXJuIG5ldyBJKGEpfTt0WyJpc28tMjAyMi1rciJdLmdldEVuY29kZXI9ZnVuY3Rpb24oYSl7cmV0dXJuIG5ldyBGKGEpfTt0WyJpc28tMjAyMi1rciJdLmdldERlY29kZXI9CmZ1bmN0aW9uKGEpe3JldHVybiBuZXcgSyhhKX07dFsidXRmLTE2Il0uZ2V0RW5jb2Rlcj1mdW5jdGlvbihhKXtyZXR1cm4gbmV3IE8oITEsYSl9O3RbInV0Zi0xNiJdLmdldERlY29kZXI9ZnVuY3Rpb24oYSl7cmV0dXJuIG5ldyBOKCExLGEpfTt0WyJ1dGYtMTZiZSJdLmdldEVuY29kZXI9ZnVuY3Rpb24oYSl7cmV0dXJuIG5ldyBPKCEwLGEpfTt0WyJ1dGYtMTZiZSJdLmdldERlY29kZXI9ZnVuY3Rpb24oYSl7cmV0dXJuIG5ldyBOKCEwLGEpfTtMLnByb3RvdHlwZT17ZW5jb2RlOmZ1bmN0aW9uKGEsYil7YT1hPyIiK2E6IiI7Yj1PYmplY3QoYik7dGhpcy5fc3RyZWFtaW5nfHwodGhpcy5fZW5jb2Rlcj10aGlzLl9lbmNvZGluZy5nZXRFbmNvZGVyKHRoaXMuX29wdGlvbnMpKTt0aGlzLl9zdHJlYW1pbmc9Qm9vbGVhbihiLnN0cmVhbSk7Zm9yKHZhciBlPVtdLGY9bmV3IGQoZSksaD1uZXcgYyhhKTstMSE9PWguZ2V0KCk7KXRoaXMuX2VuY29kZXIuZW5jb2RlKGYsaCk7aWYoIXRoaXMuX3N0cmVhbWluZyl7dmFyIGc7CmRvIGc9dGhpcy5fZW5jb2Rlci5lbmNvZGUoZixoKTt3aGlsZSgtMSE9PWcpO3RoaXMuX2VuY29kZXI9bnVsbH1yZXR1cm4gbmV3IFVpbnQ4QXJyYXkoZSl9fTtNLnByb3RvdHlwZT17ZGVjb2RlOmZ1bmN0aW9uKGIsZCl7aWYoYiYmISgiYnVmZmVyImluIGImJiJieXRlT2Zmc2V0ImluIGImJiJieXRlTGVuZ3RoImluIGIpKXRocm93IG5ldyBUeXBlRXJyb3IoIkV4cGVjdGVkIEFycmF5QnVmZmVyVmlldyIpO2J8fChiPW5ldyBVaW50OEFycmF5KDApKTtkPU9iamVjdChkKTt0aGlzLl9zdHJlYW1pbmd8fCh0aGlzLl9kZWNvZGVyPXRoaXMuX2VuY29kaW5nLmdldERlY29kZXIodGhpcy5fb3B0aW9ucykpO3RoaXMuX3N0cmVhbWluZz1Cb29sZWFuKGQuc3RyZWFtKTt2YXIgYz1uZXcgVWludDhBcnJheShiLmJ1ZmZlcixiLmJ5dGVPZmZzZXQsYi5ieXRlTGVuZ3RoKSxjPW5ldyBhKGMpO2lmKCF0aGlzLl9CT01zZWVuKXt0aGlzLl9CT01zZWVuPSEwO3ZhciBmPXRoaXMuX2VuY29kaW5nLm5hbWU7CmMubWF0Y2goWzI1NSwyNTRdKSYmInV0Zi0xNiI9PT1mP2Mub2Zmc2V0KDIpOmMubWF0Y2goWzI1NCwyNTVdKSYmInV0Zi0xNmJlIj09Zj9jLm9mZnNldCgyKTpjLm1hdGNoKFsyMzksMTg3LDE5MV0pJiYidXRmLTgiPT1mJiZjLm9mZnNldCgzKX1mb3IodmFyIGY9bmV3IGUsaDstMSE9PWMuZ2V0KCk7KWg9dGhpcy5fZGVjb2Rlci5kZWNvZGUoYyksbnVsbCE9PWgmJi0xIT09aCYmZi5lbWl0KGgpO2lmKCF0aGlzLl9zdHJlYW1pbmcpe2RvIGg9dGhpcy5fZGVjb2Rlci5kZWNvZGUoYyksbnVsbCE9PWgmJi0xIT09aCYmZi5lbWl0KGgpO3doaWxlKC0xIT09aCYmLTEhPWMuZ2V0KCkpO3RoaXMuX2RlY29kZXI9bnVsbH1yZXR1cm4gZi5zdHJpbmcoKX19O2cuVGV4dEVuY29kZXI9Zy5UZXh0RW5jb2Rlcnx8TDtnLlRleHREZWNvZGVyPWcuVGV4dERlY29kZXJ8fE19fSkodGhpcyk7CihmdW5jdGlvbigpe09ULlJ1bW9yPXtNZXNzYWdlVHlwZTp7U1VCU0NSSUJFOjAsVU5TVUJTQ1JJQkU6MSxNRVNTQUdFOjIsQ09OTkVDVDozLERJU0NPTk5FQ1Q6NCxQSU5HOjcsUE9ORzo4LFNUQVRVUzo5fX19KSh0aGlzKTsKKGZ1bmN0aW9uKCl7dmFyIGc9ezEwMDI6IlRoZSBlbmRwb2ludCBpcyB0ZXJtaW5hdGluZyB0aGUgY29ubmVjdGlvbiBkdWUgdG8gYSBwcm90b2NvbCBlcnJvci4gKENMT1NFX1BST1RPQ09MX0VSUk9SKSIsMTAwMzoiVGhlIGNvbm5lY3Rpb24gaXMgYmVpbmcgdGVybWluYXRlZCBiZWNhdXNlIHRoZSBlbmRwb2ludCByZWNlaXZlZCBkYXRhIG9mIGEgdHlwZSBpdCBjYW5ub3QgYWNjZXB0IChmb3IgZXhhbXBsZSwgYSB0ZXh0LW9ubHkgZW5kcG9pbnQgcmVjZWl2ZWQgYmluYXJ5IGRhdGEpLiAoQ0xPU0VfVU5TVVBQT1JURUQpIiwxMDA0OiJUaGUgZW5kcG9pbnQgaXMgdGVybWluYXRpbmcgdGhlIGNvbm5lY3Rpb24gYmVjYXVzZSBhIGRhdGEgZnJhbWUgd2FzIHJlY2VpdmVkIHRoYXQgaXMgdG9vIGxhcmdlLiAoQ0xPU0VfVE9PX0xBUkdFKSIsMTAwNToiSW5kaWNhdGVzIHRoYXQgbm8gc3RhdHVzIGNvZGUgd2FzIHByb3ZpZGVkIGV2ZW4gdGhvdWdoIG9uZSB3YXMgZXhwZWN0ZWQuIChDTE9TRV9OT19TVEFUVVMpIiwKMTAwNjoiVXNlZCB0byBpbmRpY2F0ZSB0aGF0IGEgY29ubmVjdGlvbiB3YXMgY2xvc2VkIGFibm9ybWFsbHkgKHRoYXQgaXMsIHdpdGggbm8gY2xvc2UgZnJhbWUgYmVpbmcgc2VudCkgd2hlbiBhIHN0YXR1cyBjb2RlIGlzIGV4cGVjdGVkLiAoQ0xPU0VfQUJOT1JNQUwpIiwxMDA3OiJJbmRpY2F0ZXMgdGhhdCBhbiBlbmRwb2ludCBpcyB0ZXJtaW5hdGluZyB0aGUgY29ubmVjdGlvbiBiZWNhdXNlIGl0IGhhcyByZWNlaXZlZCBkYXRhIHdpdGhpbiBhIG1lc3NhZ2UgdGhhdCB3YXMgbm90IGNvbnNpc3RlbnQgd2l0aCB0aGUgdHlwZSBvZiB0aGUgbWVzc2FnZSAoZS5nLiwgbm9uLVVURi04IFtSRkMzNjI5XSBkYXRhIHdpdGhpbiBhIHRleHQgbWVzc2FnZSkiLDEwMDg6IkluZGljYXRlcyB0aGF0IGFuIGVuZHBvaW50IGlzIHRlcm1pbmF0aW5nIHRoZSBjb25uZWN0aW9uIGJlY2F1c2UgaXQgaGFzIHJlY2VpdmVkIGEgbWVzc2FnZSB0aGF0IHZpb2xhdGVzIGl0cyBwb2xpY3kuICBUaGlzIGlzIGEgZ2VuZXJpYyBzdGF0dXMgY29kZSB0aGF0IGNhbiBiZSByZXR1cm5lZCB3aGVuIHRoZXJlIGlzIG5vIG90aGVyIG1vcmUgc3VpdGFibGUgc3RhdHVzIGNvZGUgKGUuZy4sIDEwMDMgb3IgMTAwOSkgb3IgaWYgdGhlcmUgaXMgYSBuZWVkIHRvIGhpZGUgc3BlY2lmaWMgZGV0YWlscyBhYm91dCB0aGUgcG9saWN5IiwKMTAwOToiSW5kaWNhdGVzIHRoYXQgYW4gZW5kcG9pbnQgaXMgdGVybWluYXRpbmcgdGhlIGNvbm5lY3Rpb24gYmVjYXVzZSBpdCBoYXMgcmVjZWl2ZWQgYSBtZXNzYWdlIHRoYXQgaXMgdG9vIGJpZyBmb3IgaXQgdG8gcHJvY2VzcyIsMTAxMToiSW5kaWNhdGVzIHRoYXQgYSBzZXJ2ZXIgaXMgdGVybWluYXRpbmcgdGhlIGNvbm5lY3Rpb24gYmVjYXVzZSBpdCBlbmNvdW50ZXJlZCBhbiB1bmV4cGVjdGVkIGNvbmRpdGlvbiB0aGF0IHByZXZlbnRlZCBpdCBmcm9tIGZ1bGZpbGxpbmcgdGhlIHJlcXVlc3QiLDQwMDE6IkNvbm5lY3Rpdml0eSBsb3NzIHdhcyBkZXRlY3RlZCBhcyBpdCB3YXMgdG9vIGxvbmcgc2luY2UgdGhlIHNvY2tldCByZWNlaXZlZCB0aGUgbGFzdCBQT05HIG1lc3NhZ2UifTtPVC5SdW1vci5Tb2NrZXRFcnJvcj1mdW5jdGlvbihiLGYpe3RoaXMuY29kZT1iO3RoaXMubWVzc2FnZT1mfTtPVC5SdW1vci5Tb2NrZXQ9ZnVuY3Rpb24oYixmLGEpe3ZhciBkLGMsZSxoLGksCmssaixsLG0scCxuLHI9T1QuJC5zdGF0YWJsZSh0aGlzLFsiZGlzY29ubmVjdGVkIiwiZXJyb3IiLCJjb25uZWN0ZWQiLCJjb25uZWN0aW5nIiwiZGlzY29ubmVjdGluZyJdLCJkaXNjb25uZWN0ZWQiLGZ1bmN0aW9uKGEpe3N3aXRjaChhKXtjYXNlICJkaXNjb25uZWN0ZWQiOmNhc2UgImVycm9yIjppZihkPW51bGwsaSl7dmFyIGI7aWYoIXA/MDoxNDkwMDw9T1QuJC5ub3coKS1wKWI9RXJyb3IoZ1s0MDAxXSksYi5jb2RlPTQwMDE7aShiKX19fSkscT1mdW5jdGlvbihhLGIpe2lmKG51bGw9PT1ifHwhT1QuJC5pc0Z1bmN0aW9uKGIpKXRocm93IEVycm9yKCJUaGUgUnVtb3IuU29ja2V0ICIrYSsiIGNhbGxiYWNrIG11c3QgYmUgYSB2YWxpZCBmdW5jdGlvbiBvciBudWxsIik7fSxvPWZ1bmN0aW9uKGEpe09ULmVycm9yKCJSdW1vci5Tb2NrZXQ6ICIrYSk7YT1uZXcgT1QuUnVtb3IuU29ja2V0RXJyb3IobnVsbCxhfHwiVW5rbm93biBTb2NrZXQgRXJyb3IiKTttJiZjbGVhclRpbWVvdXQobSk7CnIoImVycm9yIik7ImNvbm5lY3RpbmciPT09dGhpcy5wcmV2aW91c1N0YXRlJiZqJiYoaihhLG51bGwpLGo9bnVsbCk7aCYmaChhKX0uYmluZCh0aGlzKSxzPWZ1bmN0aW9uIEMoYSl7ZCYmKHZvaWQgMD09PWEmJihhPTApLGwmJmNsZWFyVGltZW91dChsKSwwPGQuYnVmZmVyZWRBbW91bnQmJjEwPj1hKzE/bD1zZXRUaW1lb3V0KEMsMTAwLGErMSk6KHIoImRpc2Nvbm5lY3RpbmciKSxsJiYoY2xlYXJUaW1lb3V0KGwpLGw9bnVsbCksY29uc29sZS5pbmZvKCJDQUxMRUQgQ0xPU0UgT04gV0VCU09DS0VUIiksZC5jbG9zZSgpKSl9LHg9ZnVuY3Rpb24gQSgpe3RoaXMuaXMoImNvbm5lY3RlZCIpJiYoKCFwPzA6MTQ5MDA8PU9ULiQubm93KCktcCk/eih7Y29kZTo0MDAxfSk6KGQuc2VuZChPVC5SdW1vci5NZXNzYWdlLlBpbmcoKS5zZXJpYWxpemUoKSksbj1zZXRUaW1lb3V0KEEuYmluZCh0aGlzKSw1RTMpKSl9LmJpbmQodGhpcyksdj1mdW5jdGlvbigpe20mJmNsZWFyVGltZW91dChtKTsKZC5zZW5kKE9ULlJ1bW9yLk1lc3NhZ2UuQ29ubmVjdChjLGYpLnNlcmlhbGl6ZSgpKTtyKCJjb25uZWN0ZWQiKTtqJiYoaihudWxsLGMpLGo9bnVsbCk7ZSYmZShjKTtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7cD1PVC4kLm5vdygpO3goKX0sNUUzKX0seT1mdW5jdGlvbigpe28oIlRpbWVkIG91dCB3aGlsZSB3YWl0aW5nIGZvciB0aGUgUnVtb3Igc29ja2V0IHRvIGNvbm5lY3QuIil9LEI9ZnVuY3Rpb24oKXt9LHo9ZnVuY3Rpb24oYSl7bSYmY2xlYXJUaW1lb3V0KG0pO24mJmNsZWFyVGltZW91dChuKTtpZigxRTMhPT1hLmNvZGUmJjEwMDEhPT1hLmNvZGUpe3ZhciBiPWEucmVhc29ufHxhLm1lc3NhZ2U7IWImJmcuaGFzT3duUHJvcGVydHkoYS5jb2RlKSYmKGI9Z1thLmNvZGVdKTtvKCJSdW1vciBTb2NrZXQgRGlzY29ubmVjdGVkOiAiK2IpfXRoaXMuaXNOb3QoImVycm9yIikmJnIoImRpc2Nvbm5lY3RlZCIpfS5iaW5kKHRoaXMpLHc9ZnVuY3Rpb24oYSl7cD1PVC4kLm5vdygpO2smJgooYT1PVC5SdW1vci5NZXNzYWdlLmRlc2VyaWFsaXplKGEuZGF0YSksYS50eXBlIT09T1QuUnVtb3IuTWVzc2FnZVR5cGUuUE9ORyYmayhhLnRvQWRkcmVzcyxhLmRhdGEpKX07dGhpcy5wdWJsaXNoPWZ1bmN0aW9uKGEsYil7ZC5zZW5kKE9ULlJ1bW9yLk1lc3NhZ2UuUHVibGlzaChhLGIpLnNlcmlhbGl6ZSgpKX07dGhpcy5zdWJzY3JpYmU9ZnVuY3Rpb24oYSl7ZC5zZW5kKE9ULlJ1bW9yLk1lc3NhZ2UuU3Vic2NyaWJlKGEpLnNlcmlhbGl6ZSgpKX07dGhpcy51bnN1YnNjcmliZT1mdW5jdGlvbihhKXtkLnNlbmQoT1QuUnVtb3IuTWVzc2FnZS5VbnN1YnNjcmliZShhKS5zZXJpYWxpemUoKSl9O3RoaXMuY29ubmVjdD1mdW5jdGlvbihlLGYpe2lmKHRoaXMuaXMoImNvbm5lY3RpbmciLCJjb25uZWN0ZWQiKSlmKG51bGwsIlJ1bW9yLlNvY2tldCBjYW5ub3QgY29ubmVjdCB3aGVuIGl0IGlzIGFscmVhZHkgY29ubmVjdGluZyBvciBjb25uZWN0ZWQuIik7ZWxzZXtjPWU7aj1mO3RyeXtyKCJjb25uZWN0aW5nIiksCmQ9bmV3IChhfHxXZWJTb2NrZXQpKGIpLGQuYmluYXJ5VHlwZT0iYXJyYXlidWZmZXIiLGQub25vcGVuPXYsZC5vbmNsb3NlPXosZC5vbmVycm9yPUIsZC5vbm1lc3NhZ2U9dyxtPXNldFRpbWVvdXQoeSxPVC5SdW1vci5Tb2NrZXQuQ09OTkVDVF9USU1FT1VUKX1jYXRjaChoKXtPVC5lcnJvcihoKSxvKCJDb3VsZCBub3QgY29ubmVjdCB0byB0aGUgUnVtb3Igc29ja2V0LCBwb3NzaWJseSBiZWNhdXNlIG9mIGEgYmxvY2tlZCBwb3J0LiIpfX19O3RoaXMuZGlzY29ubmVjdD1mdW5jdGlvbigpe20mJmNsZWFyVGltZW91dChtKTtuJiZjbGVhclRpbWVvdXQobik7ZD8zPT09ZC5yZWFkeVN0YXRlP3RoaXMuaXNOb3QoImVycm9yIikmJnIoImRpc2Nvbm5lY3RlZCIpOih0aGlzLmlzKCJjb25uZWN0ZWQiKSYmZC5zZW5kKE9ULlJ1bW9yLk1lc3NhZ2UuRGlzY29ubmVjdCgpLnNlcmlhbGl6ZSgpKSxzKCkpOnRoaXMuaXNOb3QoImVycm9yIikmJnIoImRpc2Nvbm5lY3RlZCIpfTtPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0aGlzLAp7aWQ6e2dldDpmdW5jdGlvbigpe3JldHVybiBjfX0sb25PcGVuOntzZXQ6ZnVuY3Rpb24oYSl7cSgib25PcGVuIixhKTtlPWF9LGdldDpmdW5jdGlvbigpe3JldHVybiBlfX0sb25FcnJvcjp7c2V0OmZ1bmN0aW9uKGEpe3EoIm9uRXJyb3IiLGEpO2g9YX0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGh9fSxvbkNsb3NlOntzZXQ6ZnVuY3Rpb24oYSl7cSgib25DbG9zZSIsYSk7aT1hfSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gaX19LG9uTWVzc2FnZTp7c2V0OmZ1bmN0aW9uKGEpe3EoIm9uTWVzc2FnZSIsYSk7az1hfSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4ga319fSl9O09ULlJ1bW9yLlNvY2tldC5DT05ORUNUX1RJTUVPVVQ9MTVFM30pKHRoaXMpOwooZnVuY3Rpb24oKXtPVC5SdW1vci5NZXNzYWdlPWZ1bmN0aW9uKGcsYixmLGEpe3RoaXMudHlwZT1nO3RoaXMudG9BZGRyZXNzPWI7dGhpcy5oZWFkZXJzPWY7dGhpcy5kYXRhPWF9O09ULlJ1bW9yLk1lc3NhZ2UucHJvdG90eXBlLnNlcmlhbGl6ZT1mdW5jdGlvbigpe3ZhciBnPTgsYj03LGY9QXJyYXkodGhpcy50b0FkZHJlc3MubGVuZ3RoKSxhPUFycmF5KHRoaXMuaGVhZGVycy5sZW5ndGgpLGQ9QXJyYXkodGhpcy5oZWFkZXJzLmxlbmd0aCksYztiKys7Zm9yKHZhciBlPTA7ZTx0aGlzLnRvQWRkcmVzcy5sZW5ndGg7ZSsrKWZbZV09VGV4dEVuY29kZXIoInV0Zi04IikuZW5jb2RlKHRoaXMudG9BZGRyZXNzW2VdKSxiKz0yLGIrPWZbZV0ubGVuZ3RoO2IrKztmb3IoZT0wO2U8dGhpcy5oZWFkZXJzLmxlbmd0aDtlKyspYVtlXT1UZXh0RW5jb2RlcigidXRmLTgiKS5lbmNvZGUodGhpcy5oZWFkZXJzW2VdLmtleSksZFtlXT1UZXh0RW5jb2RlcigidXRmLTgiKS5lbmNvZGUodGhpcy5oZWFkZXJzW2VdLnZhbCksCmIrPTQsYis9YVtlXS5sZW5ndGgsYis9ZFtlXS5sZW5ndGg7Yz1UZXh0RW5jb2RlcigidXRmLTgiKS5lbmNvZGUodGhpcy5kYXRhKTt2YXIgYj1iK2MubGVuZ3RoLGg9bmV3IEFycmF5QnVmZmVyKGIpLGk9bmV3IFVpbnQ4QXJyYXkoaCwwLGIpLGI9Yi00O2lbMF09KGImNDI3ODE5MDA4MCk+Pj4yNDtpWzFdPShiJjE2NzExNjgwKT4+PjE2O2lbMl09KGImNjUyODApPj4+ODtpWzNdPShiJjI1NSk+Pj4wO2lbNF09MDtpWzVdPTA7aVs2XT10aGlzLnR5cGU7aVs3XT10aGlzLnRvQWRkcmVzcy5sZW5ndGg7Zm9yKGU9MDtlPGYubGVuZ3RoO2UrKyl7c3RyQXJyYXk9ZltlXTtpW2crK109c3RyQXJyYXkubGVuZ3RoPj44JjI1NTtpW2crK109c3RyQXJyYXkubGVuZ3RoPj4wJjI1NTtmb3IoYj0wO2I8c3RyQXJyYXkubGVuZ3RoO2IrKylpW2crK109c3RyQXJyYXlbYl19aVtnKytdPWEubGVuZ3RoO2ZvcihlPTA7ZTxhLmxlbmd0aDtlKyspe3N0ckFycmF5PWFbZV07aVtnKytdPXN0ckFycmF5Lmxlbmd0aD4+CjgmMjU1O2lbZysrXT1zdHJBcnJheS5sZW5ndGg+PjAmMjU1O2ZvcihiPTA7YjxzdHJBcnJheS5sZW5ndGg7YisrKWlbZysrXT1zdHJBcnJheVtiXTtzdHJBcnJheT1kW2VdO2lbZysrXT1zdHJBcnJheS5sZW5ndGg+PjgmMjU1O2lbZysrXT1zdHJBcnJheS5sZW5ndGg+PjAmMjU1O2ZvcihiPTA7YjxzdHJBcnJheS5sZW5ndGg7YisrKWlbZysrXT1zdHJBcnJheVtiXX1mb3IoZT0wO2U8Yy5sZW5ndGg7ZSsrKWlbZysrXT1jW2VdO3JldHVybiBofTtPVC5SdW1vci5NZXNzYWdlLmRlc2VyaWFsaXplPWZ1bmN0aW9uKGcpe3ZhciBiLGY9OCxhPW5ldyBVaW50OEFycmF5KGcpO2I9YVs2XTtmb3IodmFyIGQ9W10sYz0wO2M8YVs3XTtjKyspe2xlbmd0aD1hW2YrK108PDg7bGVuZ3RoKz1hW2YrK107dmFyIGU9bmV3IFVpbnQ4QXJyYXkoZyxmLGxlbmd0aCk7ZFtjXT1UZXh0RGVjb2RlcigidXRmLTgiKS5kZWNvZGUoZSk7Zis9bGVuZ3RofWZvcih2YXIgaD1hW2YrK10saT1bXSxjPTA7YzxoO2MrKyl7bGVuZ3RoPQphW2YrK108PDg7bGVuZ3RoKz1hW2YrK107dmFyIGU9bmV3IFVpbnQ4QXJyYXkoZyxmLGxlbmd0aCksaz1UZXh0RGVjb2RlcigidXRmLTgiKS5kZWNvZGUoZSksZj1mK2xlbmd0aDtsZW5ndGg9YVtmKytdPDw4O2xlbmd0aCs9YVtmKytdO2U9bmV3IFVpbnQ4QXJyYXkoZyxmLGxlbmd0aCk7ZT1UZXh0RGVjb2RlcigidXRmLTgiKS5kZWNvZGUoZSk7aVtjXT17a2V5OmssdmFsOmV9O2YrPWxlbmd0aH1nPW5ldyBVaW50OEFycmF5KGcsZik7Zz1UZXh0RGVjb2RlcigidXRmLTgiKS5kZWNvZGUoZyk7cmV0dXJuIG5ldyBPVC5SdW1vci5NZXNzYWdlKGIsZCxpLGcpfTtPVC5SdW1vci5NZXNzYWdlLkNvbm5lY3Q9ZnVuY3Rpb24oZyxiKXtyZXR1cm4gbmV3IE9ULlJ1bW9yLk1lc3NhZ2UoT1QuUnVtb3IuTWVzc2FnZVR5cGUuQ09OTkVDVCxbXSxbe2tleToidW5pcXVlSWQiLHZhbDpnfSx7a2V5OiJub3RpZnlEaXNjb25uZWN0QWRkcmVzcyIsdmFsOmJ9XSwiIil9O09ULlJ1bW9yLk1lc3NhZ2UuRGlzY29ubmVjdD0KZnVuY3Rpb24oKXtyZXR1cm4gbmV3IE9ULlJ1bW9yLk1lc3NhZ2UoT1QuUnVtb3IuTWVzc2FnZVR5cGUuRElTQ09OTkVDVCxbXSxbXSwiIil9O09ULlJ1bW9yLk1lc3NhZ2UuU3Vic2NyaWJlPWZ1bmN0aW9uKGcpe3JldHVybiBuZXcgT1QuUnVtb3IuTWVzc2FnZShPVC5SdW1vci5NZXNzYWdlVHlwZS5TVUJTQ1JJQkUsZyxbXSwiIil9O09ULlJ1bW9yLk1lc3NhZ2UuVW5zdWJzY3JpYmU9ZnVuY3Rpb24oZyl7cmV0dXJuIG5ldyBPVC5SdW1vci5NZXNzYWdlKE9ULlJ1bW9yLk1lc3NhZ2VUeXBlLlVOU1VCU0NSSUJFLGcsW10sIiIpfTtPVC5SdW1vci5NZXNzYWdlLlB1Ymxpc2g9ZnVuY3Rpb24oZyxiKXtyZXR1cm4gbmV3IE9ULlJ1bW9yLk1lc3NhZ2UoT1QuUnVtb3IuTWVzc2FnZVR5cGUuTUVTU0FHRSxnLFtdLGIpfTtPVC5SdW1vci5NZXNzYWdlLlBpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IE9ULlJ1bW9yLk1lc3NhZ2UoT1QuUnVtb3IuTWVzc2FnZVR5cGUuUElORyxbXSxbXSwiIil9fSkodGhpcyk7CihmdW5jdGlvbigpe09ULlJhcHRvcj17QWN0aW9uczp7Q09OTkVDVDoxMDAsQ1JFQVRFOjEwMSxVUERBVEU6MTAyLERFTEVURToxMDMsU1RBVEU6MTA0LEZPUkNFX0RJU0NPTk5FQ1Q6MTA1LEZPUkNFX1VOUFVCTElTSDoxMDYsU0lHTkFMOjEwNyxDUkVBVEVfQVJDSElWRToxMDgsQ0xPU0VfQVJDSElWRToxMDksU1RBUlRfUkVDT1JESU5HX1NFU1NJT046MTEwLFNUT1BfUkVDT1JESU5HX1NFU1NJT046MTExLFNUQVJUX1JFQ09SRElOR19TVFJFQU06MTEyLFNUT1BfUkVDT1JESU5HX1NUUkVBTToxMTMsTE9BRF9BUkNISVZFOjExNCxTVEFSVF9QTEFZQkFDSzoxMTUsU1RPUF9QTEFZQkFDSzoxMTYsQVBQU1RBVEVfUFVUOjExNyxBUFBTVEFURV9ERUxFVEU6MTE4LE9GRkVSOjExOSxBTlNXRVI6MTIwLFBSQU5TV0VSOjEyMSxDQU5ESURBVEU6MTIyLFNVQlNDUklCRToxMjMsVU5TVUJTQ1JJQkU6MTI0LFFVRVJZOjEyNSxTRFBfQU5TV0VSOjEyNixQT05HOjEyNyxSRUdJU1RFUjoxMjgsUVVBTElUWV9DSEFOR0VEOjEyOX0sClR5cGVzOntSUENfUkVRVUVTVDoxMDAsUlBDX1JFU1BPTlNFOjEwMSxTVFJFQU06MTAyLEFSQ0hJVkU6MTAzLENPTk5FQ1RJT046MTA0LEFQUFNUQVRFOjEwNSxDT05ORUNUSU9OQ09VTlQ6MTA2LE1PREVSQVRJT046MTA3LFNJR05BTDoxMDgsU1VCU0NSSUJFUjoxMTAsSlNFUDoxMDl9fX0pKHRoaXMpOwooZnVuY3Rpb24oKXt2YXIgZz17fSxiPXt9LGY9T1QuUmFwdG9yLlR5cGVzLGE7Zm9yKGEgaW4gZilnW2ZbYV1dPWE7Zj1PVC5SYXB0b3IuQWN0aW9ucztmb3IoYSBpbiBmKWJbZlthXV09YTtPVC5SYXB0b3Iuc2VyaWFsaXplTWVzc2FnZT1mdW5jdGlvbihhKXtyZXR1cm4gSlNPTi5zdHJpbmdpZnkoYSl9O09ULlJhcHRvci5kZXNlcmlhbGl6ZU1lc3NhZ2U9ZnVuY3Rpb24oYSl7YT1KU09OLnBhcnNlKGEpO2EudHlwZSYmKGEudHlwZT1wYXJzZUludChhLnR5cGUsMTApLGEudHlwZU5hbWU9Z1thLnR5cGVdfHxudWxsKTthLmFjdGlvbiYmKGEuYWN0aW9uPXBhcnNlSW50KGEuYWN0aW9uLDEwKSxhLmFjdGlvbk5hbWU9YlthLmFjdGlvbl18fG51bGwpO2Euc2lnbmF0dXJlPWEudHlwZU5hbWUrIjoiK2EuYWN0aW9uTmFtZTtyZXR1cm4gYX07T1QuUmFwdG9yLk1lc3NhZ2U9e307T1QuUmFwdG9yLk1lc3NhZ2UuY29ubmVjdD1mdW5jdGlvbihhLGIsZSxmLGcsayl7YT17Y3JlZGVudGlhbHM6e2Nvbm5lY3Rpb25JZDpiLApzb0FjY2Vzc1N0YXRlOjIsc3VwcG9ydHNXZWJSVEM6ITAscDJwRW5hYmxlZDprLEdVSUQ6YSx3aWRnZXRJZDphLHBhcnRuZXJJZDpmfSxzZXNzaW9uSWQ6ZSxwYXJhbXM6e3Rva2VuUGVybWlzc2lvbnM6e2FwaUtleTpmfSx0b2tlbjpnfSx1bmlxdWVJZDpifTtyZXR1cm4gT1QuUmFwdG9yLnNlcmlhbGl6ZU1lc3NhZ2Uoe2lkOk9ULiQudXVpZCgpLHR5cGU6T1QuUmFwdG9yLlR5cGVzLlJQQ19SRVFVRVNULGFjdGlvbjpPVC5SYXB0b3IuQWN0aW9ucy5DT05ORUNULHBheWxvYWQ6YSxyZXBseVRvOmJ9KX07T1QuUmFwdG9yLk1lc3NhZ2UuZ2V0U2Vzc2lvblN0YXRlPWZ1bmN0aW9uKGEsYixlKXtyZXR1cm4gT1QuUmFwdG9yLnNlcmlhbGl6ZU1lc3NhZ2Uoe2lkOk9ULiQudXVpZCgpLHR5cGU6T1QuUmFwdG9yLlR5cGVzLlJQQ19SRVFVRVNULGFjdGlvbjpPVC5SYXB0b3IuQWN0aW9ucy5TVEFURSxwYXlsb2FkOntzZXNzaW9uSWQ6Yixjb25uZWN0aW9uc1JlcXVpcmVkOmV8fCEwfSxyZXBseVRvOmF9KX07Ck9ULlJhcHRvci5NZXNzYWdlLmZvcmNlRGlzY29ubmVjdD1mdW5jdGlvbihhLGIsZSl7cmV0dXJuIE9ULlJhcHRvci5zZXJpYWxpemVNZXNzYWdlKHtpZDphLHR5cGU6T1QuUmFwdG9yLlR5cGVzLlJQQ19SRVFVRVNULGFjdGlvbjpPVC5SYXB0b3IuQWN0aW9ucy5GT1JDRV9ESVNDT05ORUNULHBheWxvYWQ6e2Nvbm5lY3Rpb25JZDpiLHNlc3Npb25JZDplfSxyZXBseVRvOmF9KX07T1QuUmFwdG9yLk1lc3NhZ2Uuc3RyZWFtQ3JlYXRlPWZ1bmN0aW9uKGEsYixlLGYsZyxrLGosbCxtLHApe2I9e2tleTpiLHZhbHVlOntwMnBFbmFibGVkOnB8fCExLHB1Ymxpc2hlcklkOmUsY29ubmVjdGlvbjp7Y29ubmVjdGlvbklkOmF9LHR5cGU6IldlYlJUQyIsbmFtZTpmfHwiIixjcmVhdGlvblRpbWU6RGF0ZS5ub3coKSxvcmllbnRhdGlvbjp7d2lkdGg6ayxoZWlnaHQ6aix2aWRlb09yaWVudGF0aW9uOmd8fCJPVFZpZGVvT3JpZW50YXRpb25Sb3RhdGVkTm9ybWFsIn0saGFzQXVkaW86dm9pZCAwIT09Cmw/bDohMCxoYXNWaWRlbzp2b2lkIDAhPT1tP206ITB9fTtyZXR1cm4gT1QuUmFwdG9yLnNlcmlhbGl6ZU1lc3NhZ2Uoe2lkOmEsdHlwZTpPVC5SYXB0b3IuVHlwZXMuU1RSRUFNLGFjdGlvbjpPVC5SYXB0b3IuQWN0aW9ucy5DUkVBVEUscGF5bG9hZDpiLHJlcGx5VG86IiJ9KX07T1QuUmFwdG9yLk1lc3NhZ2Uuc3RyZWFtRGVzdHJveT1mdW5jdGlvbihhLGIsZSl7cmV0dXJuIE9ULlJhcHRvci5zZXJpYWxpemVNZXNzYWdlKHtpZDphLHR5cGU6T1QuUmFwdG9yLlR5cGVzLlNUUkVBTSxhY3Rpb246T1QuUmFwdG9yLkFjdGlvbnMuREVMRVRFLHBheWxvYWQ6e2tleTpiKyIvU1RSRUFNUy8iK2V9LHJlcGx5VG86YX0pfTtPVC5SYXB0b3IuTWVzc2FnZS5zdHJlYW1Nb2RpZnk9ZnVuY3Rpb24oYSxiLGUsZixnKXtyZXR1cm4gT1QuUmFwdG9yLnNlcmlhbGl6ZU1lc3NhZ2Uoe2lkOmEsdHlwZTpPVC5SYXB0b3IuVHlwZXMuU1RSRUFNLGFjdGlvbjpPVC5SYXB0b3IuQWN0aW9ucy5VUERBVEUscGF5bG9hZDp7a2V5OltiLAoiU1RSRUFNUyIsZSxmXS5qb2luKCIvIiksdmFsdWU6Z30scmVwbHlUbzphfSl9O09ULlJhcHRvci5NZXNzYWdlLmZvcmNlVW5wdWJsaXNoPWZ1bmN0aW9uKGEsYixlKXtyZXR1cm4gT1QuUmFwdG9yLnNlcmlhbGl6ZU1lc3NhZ2Uoe2lkOmEsdHlwZTpPVC5SYXB0b3IuVHlwZXMuUlBDX1JFUVVFU1QsYWN0aW9uOk9ULlJhcHRvci5BY3Rpb25zLkZPUkNFX1VOUFVCTElTSCxwYXlsb2FkOntzZXNzaW9uSWQ6Yixjb25uZWN0aW9uSWQ6YSxzdHJlYW1JZDplLHdlYlJUQ1N0cmVhbTohMH0scmVwbHlUbzphfSl9O09ULlJhcHRvci5NZXNzYWdlLmpzZXBPZmZlcj1mdW5jdGlvbihhLGIsZSxmKXtyZXR1cm4gT1QuUmFwdG9yLnNlcmlhbGl6ZU1lc3NhZ2Uoe2lkOmEsdHlwZTpPVC5SYXB0b3IuVHlwZXMuSlNFUCxhY3Rpb246T1QuUmFwdG9yLkFjdGlvbnMuT0ZGRVIscGF5bG9hZDp7ZnJvbUFkZHJlc3M6YSx0b0FkZHJlc3NlczpiLHNkcDpmLHN0cmVhbUlkOmV9LHJlcGx5VG86YX0pfTtPVC5SYXB0b3IuTWVzc2FnZS5qc2VwQW5zd2VyPQpmdW5jdGlvbihhLGIsZSxmKXtyZXR1cm4gT1QuUmFwdG9yLnNlcmlhbGl6ZU1lc3NhZ2Uoe2lkOmEsdHlwZTpPVC5SYXB0b3IuVHlwZXMuSlNFUCxhY3Rpb246T1QuUmFwdG9yLkFjdGlvbnMuQU5TV0VSLHBheWxvYWQ6e2Zyb21BZGRyZXNzOmEsdG9BZGRyZXNzZXM6YixzZHA6ZixzdHJlYW1JZDplfSxyZXBseVRvOmF9KX07T1QuUmFwdG9yLk1lc3NhZ2UuanNlcFN1YnNjcmliZT1mdW5jdGlvbihhLGIsZSxmLGcpe3JldHVybiBPVC5SYXB0b3Iuc2VyaWFsaXplTWVzc2FnZSh7aWQ6YSx0eXBlOk9ULlJhcHRvci5UeXBlcy5KU0VQLGFjdGlvbjpPVC5SYXB0b3IuQWN0aW9ucy5TVUJTQ1JJQkUscGF5bG9hZDp7a2V5TWFuYWdlbWVuTWV0aG9kOk9ULiQuc3VwcG9ydGVkQ3J5cHRvU2NoZW1lKCksYnVuZGxlU3VwcG9ydDpPVC4kLnN1cHBvcnRzQnVuZGxlKCkscnRjcE11eFN1cHBvcnQ6T1QuJC5zdXBwb3J0c1J0Y3BNdXgoKSxmcm9tQWRkcmVzczphLHRvQWRkcmVzc2VzOmIsc3RyZWFtSWQ6ZSwKaGFzVmlkZW86ZixoYXNBdWRpbzpnfSxyZXBseVRvOmF9KX07T1QuUmFwdG9yLk1lc3NhZ2UuanNlcFVuc3Vic2NyaWJlPWZ1bmN0aW9uKGEsYixlKXtyZXR1cm4gT1QuUmFwdG9yLnNlcmlhbGl6ZU1lc3NhZ2Uoe2lkOmEsdHlwZTpPVC5SYXB0b3IuVHlwZXMuSlNFUCxhY3Rpb246T1QuUmFwdG9yLkFjdGlvbnMuVU5TVUJTQ1JJQkUscGF5bG9hZDp7ZnJvbUFkZHJlc3M6YSx0b0FkZHJlc3NlczpiLHN0cmVhbUlkOmV9LHJlcGx5VG86YX0pfTtPVC5SYXB0b3IuTWVzc2FnZS5qc2VwQ2FuZGlkYXRlPWZ1bmN0aW9uKGEsYixlLGYpe3JldHVybiBPVC5SYXB0b3Iuc2VyaWFsaXplTWVzc2FnZSh7aWQ6YSx0eXBlOk9ULlJhcHRvci5UeXBlcy5KU0VQLGFjdGlvbjpPVC5SYXB0b3IuQWN0aW9ucy5DQU5ESURBVEUscGF5bG9hZDp7ZnJvbUFkZHJlc3M6YSx0b0FkZHJlc3NlczpiLGNhbmRpZGF0ZTpmLHN0cmVhbUlkOmV9LHJlcGx5VG86YX0pfTtPVC5SYXB0b3IuTWVzc2FnZS5zdWJzY3JpYmVyTW9kaWZ5PQpmdW5jdGlvbihhLGIsZSxmLGcsayl7cmV0dXJuIE9ULlJhcHRvci5zZXJpYWxpemVNZXNzYWdlKHtpZDpPVC4kLnV1aWQoKSx0eXBlOk9ULlJhcHRvci5UeXBlcy5TVUJTQ1JJQkVSLGFjdGlvbjpPVC5SYXB0b3IuQWN0aW9ucy5VUERBVEUscGF5bG9hZDp7a2V5OltiLCJTVUJTQ1JJQkVSIixlLGEsZ10uam9pbigiLyIpLHZhbHVlOmt9LHJlcGx5VG86YX0pfTtPVC5SYXB0b3IuTWVzc2FnZS5zaWduYWw9ZnVuY3Rpb24oYSxiLGUsZixnKXt2YXIgaz17aWQ6T1QuJC51dWlkKCksZnJvbUFkZHJlc3M6YX07ay50b0FkZHJlc3Nlcz1mJiYhQXJyYXkuaXNBcnJheShmKT9bZl06IWZ8fDA9PT1mLmxlbmd0aD9bYl06Zjt2b2lkIDAhPT1lJiYoay50eXBlPWUpO3ZvaWQgMCE9PWcmJihrLmRhdGE9Zyk7cmV0dXJuIE9ULlJhcHRvci5zZXJpYWxpemVNZXNzYWdlKHtpZDphLHR5cGU6T1QuUmFwdG9yLlR5cGVzLlNJR05BTCxhY3Rpb246T1QuUmFwdG9yLkFjdGlvbnMuU0lHTkFMLHBheWxvYWQ6aywKcmVwbHlUbzphfSl9fSkodGhpcyk7CihmdW5jdGlvbigpe09ULlNpZ25hbD1mdW5jdGlvbihnLGIsZil7dmFyIGE9ZnVuY3Rpb24oYSl7aWYoYSl7aWYoIUFycmF5LmlzQXJyYXkoYSkpcmV0dXJue2NvZGU6NDAwLHJlYXNvbjoiVGhlIFRvIGZpZWxkIHdhcyBpbnZhbGlkIn19ZWxzZSByZXR1cm57Y29kZTo0MDAscmVhc29uOiJUaGUgc2lnbmFsIHR5cGUgd2FzIG51bGwgb3IgYW4gZW1wdHkgU3RyaW5nLiBFaXRoZXIgc2V0IGl0IHRvIGEgbm9uLWVtcHR5IFN0cmluZyB2YWx1ZSBvciBvbWl0IGl0In07Zm9yKHZhciBiPTA7YjxhLmxlbmd0aDtiKyspaWYoIShhW2JdaW5zdGFuY2VvZiBPVC5Db25uZWN0aW9ufHxhW2JdaW5zdGFuY2VvZiBPVC5TZXNzaW9uKSlyZXR1cm57Y29kZTo0MDAscmVhc29uOiJUaGUgVG8gZmllbGQgd2FzIGludmFsaWQifTtyZXR1cm4gbnVsbH0sZD1mdW5jdGlvbihhKXt2YXIgYj1udWxsO251bGw9PT1hfHx2b2lkIDA9PT1hP2I9e2NvZGU6NDAwLHJlYXNvbjoiVGhlIHNpZ25hbCB0eXBlIHdhcyBudWxsIG9yIHVuZGVmaW5lZC4gRWl0aGVyIHNldCBpdCB0byBhIFN0cmluZyB2YWx1ZSBvciBvbWl0IGl0In06MTI4PAphLmxlbmd0aD9iPXtjb2RlOjQxMyxyZWFzb246IlRoZSBzaWduYWwgdHlwZSB3YXMgdG9vIGxvbmcsIHRoZSBtYXhpbXVtIGxlbmd0aCBvZiBpdCBpcyAxMjggY2hhcmFjdGVycyJ9Oi9eW2EtekEtWjAtOVwtXC5ffl0rJC8uZXhlYyhhKXx8KGI9e2NvZGU6NDAwLHJlYXNvbjoiVGhlIHNpZ25hbCB0eXBlIHdhcyBpbnZhbGlkLCBpdCBjYW4gb25seSBjb250YWluIGxldHRlcnMsIG51bWJlcnMsICctJywgJ18nLCBhbmQgJ34nLiJ9KTtyZXR1cm4gYn0sYz1mdW5jdGlvbihhKXt2YXIgYj1udWxsO2lmKG51bGw9PT1hfHx2b2lkIDA9PT1hKWI9e2NvZGU6NDAwLHJlYXNvbjoiVGhlIHNpZ25hbCBkYXRhIHdhcyBudWxsIG9yIHVuZGVmaW5lZC4gRWl0aGVyIHNldCBpdCB0byBhIFN0cmluZyB2YWx1ZSBvciBvbWl0IGl0In07ZWxzZSB0cnl7ODE5MjxKU09OLnN0cmluZ2lmeShhKS5sZW5ndGgmJihiPXtjb2RlOjQxMyxyZWFzb246IlRoZSBkYXRhIGZpZWxkIHdhcyB0b28gbG9uZywgdGhlIG1heGltdW0gc2l6ZSBvZiBpdCBpcyA4MTkyIGNoYXJhY3RlcnMifSl9Y2F0Y2goYyl7Yj0Ke2NvZGU6NDAwLHJlYXNvbjoiVGhlIGRhdGEgZmllbGQgd2FzIG5vdCB2YWxpZCBKU09OIn19cmV0dXJuIGJ9O3RoaXMudG9SYXB0b3JNZXNzYWdlPWZ1bmN0aW9uKCl7dmFyIGE7dGhpcy50byYmKGE9dGhpcy50by5tYXAoZnVuY3Rpb24oYSl7cmV0dXJuInN0cmluZyI9PT10eXBlb2YgYT9hOmEuaWR9KSk7cmV0dXJuIE9ULlJhcHRvci5NZXNzYWdlLnNpZ25hbChiLGcsdGhpcy50eXBlLGEsdGhpcy5kYXRhKX07dGhpcy50b0hhc2g9ZnVuY3Rpb24oKXt2YXIgYT1PVC4kLmNsb25lKGYpO3ZvaWQgMD09PWEudG8mJihhLnRvPW51bGwpO3ZvaWQgMD09PWEuZGF0YSYmKGEuZGF0YT1udWxsKTtyZXR1cm4gYX07dGhpcy5lcnJvcj1udWxsO2lmKGYmJihmLmhhc093blByb3BlcnR5KCJkYXRhIikmJih0aGlzLmRhdGE9T1QuJC5jbG9uZShmLmRhdGEpLHRoaXMuZXJyb3I9Yyh0aGlzLmRhdGEpKSxmLmhhc093blByb3BlcnR5KCJ0byIpJiYodGhpcy50bz1BcnJheS5pc0FycmF5KGYudG8pPwpPVC4kLmNsb25lKGYudG8pOltmLnRvXSx0aGlzLmVycm9yfHwodGhpcy5lcnJvcj1hKHRoaXMudG8pKSksZi5oYXNPd25Qcm9wZXJ0eSgidHlwZSIpKSl0aGlzLmVycm9yfHwodGhpcy5lcnJvcj1kKGYudHlwZSkpLHRoaXMudHlwZT1mLnR5cGU7dGhpcy52YWxpZD1udWxsPT09dGhpcy5lcnJvcn19KSh0aGlzKTsKKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gZyhiLGYsYSl7dGhpcy5jb2RlPWI7dGhpcy5yZWFzb249Zjt0aGlzLnNpZ25hbD1hfU9ULlJhcHRvci5Tb2NrZXQ9ZnVuY3Rpb24oYixmLGEpe3ZhciBkPU9ULnByb3BlcnRpZXMubWVzc2FnaW5nUHJvdG9jb2wrIjovLyIrZisiOiIrT1QucHJvcGVydGllcy5tZXNzYWdpbmdQb3J0KyIvcnVtb3J3ZWJzb2NrZXRzdjIiLGM9InN5bXBob255LiIrZixlLGgsaSxrLGo9bmV3IE9ULkNhcGFiaWxpdGllcyhbXSksbD1uZXcgT1QuQW5hbHl0aWNzLG09T1QuJC5zdGF0YWJsZSh0aGlzLFsiZGlzY29ubmVjdGVkIiwiY29ubmVjdGluZyIsImNvbm5lY3RlZCIsImVycm9yIiwiZGlzY29ubmVjdGluZyJdLCJkaXNjb25uZWN0ZWQiKSxwPWZ1bmN0aW9uKGEsYyxkLGYpe2E9e2FjdGlvbjoid2ViU29ja2V0Q29ubmVjdGlvbiIsdmFyaWF0aW9uOmEscGF5bG9hZF90eXBlOmMscGF5bG9hZDpkLHNlc3Npb25faWQ6ZSxwYXJ0bmVyX2lkOk9ULkFQSUtFWSx3aWRnZXRfaWQ6YiwKd2lkZ2V0X3R5cGU6IkNvbnRyb2xsZXIifTtmJiYoYT1PVC4kLmV4dGVuZChmLGEpKTtsLmxvZ0V2ZW50KGEpfSxuPWZ1bmN0aW9uKGEsYil7YT8ocCgiRmFpbHVyZSIsInJlYXNvbiIsYS5yZWFzb24pLG0oImVycm9yIikpOihwKCJTdWNjZXNzIiwid2ViU29ja2V0U2VydmVyVXJsIixkLHtjb25uZWN0aW9uSWQ6aC5pZH0pLG0oImNvbm5lY3RlZCIpLGo9bmV3IE9ULkNhcGFiaWxpdGllcyhiLnBlcm1pc3Npb25zKSk7ay5hcHBseShudWxsLGFyZ3VtZW50cyl9LHI9ZnVuY3Rpb24oYSl7dmFyIGI9T1Quc2Vzc2lvbnMuZ2V0KGUpLmNvbm5lY3Rpb24sYz10aGlzLmlzKCJkaXNjb25uZWN0aW5nIik/ImNsaWVudERpc2Nvbm5lY3RlZCI6Im5ldHdvcmtEaXNjb25uZWN0ZWQiO2EmJjQwMDE9PWEuY29kZSYmKGM9Im5ldHdvcmtUaW1lZG91dCIpO20oImRpc2Nvbm5lY3RlZCIpO2ImJihiLmRlc3Ryb3llZFJlYXNvbj9jb25zb2xlLmRlYnVnKCJPVC5SYXB0b3IuU29ja2V0OiBTb2NrZXQgd2FzIGNsb3NlZCBidXQgdGhlIGNvbm5lY3Rpb24gaGFkIGFscmVhZHkgYmVlbiBkZXN0cm95ZWQuIFJlYXNvbjogIisKYi5kZXN0cm95ZWRSZWFzb24pOmIuZGVzdHJveShjKSl9LmJpbmQodGhpcykscT1mdW5jdGlvbigpe307dGhpcy5wZXJtaXR0ZWRUbz1mdW5jdGlvbihhKXtyZXR1cm4gMT09PWpbYV19O3RoaXMuY29ubmVjdD1mdW5jdGlvbihhLGcsail7dGhpcy5pcygiZGlzY29ubmVjdGVkIiwiZXJyb3IiKT8obSgiY29ubmVjdGluZyIpLGU9Zy5zZXNzaW9uSWQsaz1qLGo9T1QuJC51dWlkKCksT1Quc2Vzc2lvbnMuZ2V0KGUpLHAoIkF0dGVtcHQiLCJ3ZWJTb2NrZXRTZXJ2ZXJVcmx8dXNlckFnZW50fHNka1ZlcnNpb258Y2hyb21lRnJhbWUiLFtkLG5hdmlnYXRvci51c2VyQWdlbnQsT1QucHJvcGVydGllcy52ZXJzaW9uLHdpbmRvdy5leHRlcm5hbEhvc3Q/InllcyI6Im5vIl0ubWFwKGZ1bmN0aW9uKGEpe3JldHVybiBhLnJlcGxhY2UoInwiLCJcXHwiKX0pLmpvaW4oInwiKSksaD1uZXcgT1QuUnVtb3IuU29ja2V0KGQsYyksaC5vbkNsb3NlPXIsaC5vbk1lc3NhZ2U9aS5kaXNwYXRjaC5iaW5kKGkpLApoLmNvbm5lY3QoaixmdW5jdGlvbihjKXtjP24oYyk6KGgub25FcnJvcj1xLE9ULmRlYnVnKCJSYXB0b3IgU29ja2V0IGNvbm5lY3RlZCB0byAiK2UrIiBvbiAiK2YpLGguc3Vic2NyaWJlKFtlXSksdGhpcy5wdWJsaXNoKE9ULlJhcHRvci5NZXNzYWdlLmNvbm5lY3QoYixoLmlkLGUsT1QuQVBJS0VZLGEsZy5wMnBFbmFibGVkKSkpfS5iaW5kKHRoaXMpKSk6T1Qud2FybigiQ2Fubm90IGNvbm5lY3QgdGhlIFJhcHRvciBTb2NrZXQgYXMgaXQgaXMgY3VycmVudGx5IGNvbm5lY3RlZC4gWW91IHNob3VsZCBkaXNjb25uZWN0IGZpcnN0LiIpfTt0aGlzLmRpc2Nvbm5lY3Q9ZnVuY3Rpb24oKXt0aGlzLmlzKCJkaXNjb25uZWN0ZWQiKXx8KG0oImRpc2Nvbm5lY3RpbmciKSxoLmRpc2Nvbm5lY3QoKSl9O3RoaXMucHVibGlzaD1mdW5jdGlvbihhKXtoLmlzTm90KCJjb25uZWN0ZWQiKT9PVC5lcnJvcigiT1QuUmFwdG9yLlNvY2tldDogY2Fubm90IHB1Ymxpc2ggdW50aWwgdGhlIHNvY2tldCBpcyBjb25uZWN0ZWQuIisKYSk6KE9ULmRlYnVnKCJPVC5SYXB0b3IuU29ja2V0IFB1Ymxpc2g6ICIrYSksaC5wdWJsaXNoKFtjXSxhKSl9O3RoaXMuY3JlYXRlU3RyZWFtPWZ1bmN0aW9uKGEsYixjLGQsZixnLGkpe3ZhciBqPU9ULnNlc3Npb25zLmdldChlKTt0aGlzLnB1Ymxpc2goT1QuUmFwdG9yLk1lc3NhZ2Uuc3RyZWFtQ3JlYXRlKGguaWQsZSxhLGIsYyxkLGYsZyxpLGouc2Vzc2lvbkluZm8ucDJwRW5hYmxlZCkpfTt0aGlzLnVwZGF0ZVN0cmVhbT1mdW5jdGlvbihhLGIsYyl7dGhpcy5wdWJsaXNoKE9ULlJhcHRvci5NZXNzYWdlLnN0cmVhbU1vZGlmeShoLmlkLGUsYSxiLGMpKX07dGhpcy5kZXN0cm95U3RyZWFtPWZ1bmN0aW9uKGEpe3RoaXMucHVibGlzaChPVC5SYXB0b3IuTWVzc2FnZS5zdHJlYW1EZXN0cm95KGguaWQsZSxhKSl9O3RoaXMubW9kaWZ5U3Vic2NyaWJlcj1mdW5jdGlvbihhLGIsYyl7dGhpcy5wdWJsaXNoKE9ULlJhcHRvci5NZXNzYWdlLnN1YnNjcmliZXJNb2RpZnkoaC5pZCxlLGEuc3RyZWFtSWQsCmEud2lkZ2V0SWQsYixjKSl9O3RoaXMuZm9yY2VEaXNjb25uZWN0PWZ1bmN0aW9uKGEpe3RoaXMucHVibGlzaChPVC5SYXB0b3IuTWVzc2FnZS5mb3JjZURpc2Nvbm5lY3QoaC5pZCxhLGUpKX07dGhpcy5mb3JjZVVucHVibGlzaD1mdW5jdGlvbihhKXt0aGlzLnB1Ymxpc2goT1QuUmFwdG9yLk1lc3NhZ2UuZm9yY2VVbnB1Ymxpc2goaC5pZCxlLGEpKX07dGhpcy5qc2VwU3Vic2NyaWJlPWZ1bmN0aW9uKGEsYixjLGQpe3RoaXMucHVibGlzaChPVC5SYXB0b3IuTWVzc2FnZS5qc2VwU3Vic2NyaWJlKGguaWQsYSxiLGMsZCkpfTt0aGlzLmpzZXBVbnN1YnNjcmliZT1mdW5jdGlvbihhLGIpe3RoaXMucHVibGlzaChPVC5SYXB0b3IuTWVzc2FnZS5qc2VwVW5zdWJzY3JpYmUoaC5pZCxhLGIpKX07dGhpcy5qc2VwQ2FuZGlkYXRlPWZ1bmN0aW9uKGEsYixjKXt0aGlzLnB1Ymxpc2goT1QuUmFwdG9yLk1lc3NhZ2UuanNlcENhbmRpZGF0ZShoLmlkLGEsYixjKSl9O3RoaXMuanNlcE9mZmVyPQpmdW5jdGlvbihhLGIsYyl7dGhpcy5wdWJsaXNoKE9ULlJhcHRvci5NZXNzYWdlLmpzZXBPZmZlcihoLmlkLGEsYixjKSl9O3RoaXMuanNlcEFuc3dlcj1mdW5jdGlvbihhLGIsYyl7dGhpcy5wdWJsaXNoKE9ULlJhcHRvci5NZXNzYWdlLmpzZXBBbnN3ZXIoaC5pZCxhLGIsYykpfTt0aGlzLnNpZ25hbD1mdW5jdGlvbihhLGIpe3ZhciBjPW5ldyBPVC5TaWduYWwoZSxoLmlkLGF8fHt9KTtjLnZhbGlkPyh0aGlzLnB1Ymxpc2goYy50b1JhcHRvck1lc3NhZ2UoKSksYiYmT1QuJC5pc0Z1bmN0aW9uKGIpJiZiKG51bGwsYy50b0hhc2goKSkpOmImJk9ULiQuaXNGdW5jdGlvbihiKSYmYihuZXcgZyhjLmVycm9yLmNvZGUsYy5lcnJvci5yZWFzb24sYy50b0hhc2goKSkpfTtPVC4kLmRlZmluZUdldHRlcnModGhpcyx7aWQ6ZnVuY3Rpb24oKXtyZXR1cm4gaC5pZH0sY2FwYWJpbGl0aWVzOmZ1bmN0aW9uKCl7cmV0dXJuIGp9LHNlc3Npb25JZDpmdW5jdGlvbigpe3JldHVybiBlfX0pO2k9bmV3IChhfHwKT1QuUmFwdG9yLkRpc3BhdGNoZXIpKHRoaXMsbil9fSkodGhpcyk7CihmdW5jdGlvbigpe2Z1bmN0aW9uIGcoYSxiKXt2YXIgYz1uZXcgT1QuU3RyZWFtKGEuc3RyZWFtSWQsYi5jb25uZWN0aW9ucy5nZXQoYS5jb25uZWN0aW9uLmNvbm5lY3Rpb25JZCksYS5uYW1lLGEuc3RyZWFtRGF0YSxhLnR5cGUsYS5jcmVhdGlvblRpbWUsYS5oYXNBdWRpbyxhLmhhc1ZpZGVvLGEub3JpZW50YXRpb24/YS5vcmllbnRhdGlvbi52aWRlb09yaWVudGF0aW9uOm51bGwsYS5wZWVySWQsYS5xdWFsaXR5LGEub3JpZW50YXRpb24/YS5vcmllbnRhdGlvbi53aWR0aDpudWxsLGEub3JpZW50YXRpb24/YS5vcmllbnRhdGlvbi5oZWlnaHQ6bnVsbCk7YS5wdWJsaXNoZXJJZCYmKGMucHVibGlzaGVySWQ9YS5wdWJsaXNoZXJJZCk7cmV0dXJuIGN9ZnVuY3Rpb24gYihhLGIpe2lmKCFiLnN0cmVhbXMuaGFzKGEuc3RyZWFtSWQpKXt2YXIgYz1nKGEsYik7Yi5zdHJlYW1zLmFkZChjKTtyZXR1cm4gY319dmFyIGY9ezQwOToiVGhpcyBQMlAgc2Vzc2lvbiBhbHJlYWR5IGhhcyAyIHBhcnRpY2lwYW50cy4iLAo0MTA6IlRoZSBzZXNzaW9uIGFscmVhZHkgaGFzIGZvdXIgcGFydGljaXBhbnRzLiIsMTAwNDoiVGhlIHRva2VuIHBhc3NlZCBpcyBpbnZhbGlkLiJ9O09ULnB1Ymxpc2hlcnM9bmV3IE9ULkNvbGxlY3Rpb24oImd1aWQiKTtPVC5zdWJzY3JpYmVycz1uZXcgT1QuQ29sbGVjdGlvbigid2lkZ2V0SWQiKTtPVC5zZXNzaW9ucz1uZXcgT1QuQ29sbGVjdGlvbjtPVC5SYXB0b3IuRGlzcGF0Y2hlcj1mdW5jdGlvbihhLGIpe3RoaXMuc29ja2V0PWE7dGhpcy5jb25uZWN0aW9uQ29tcGxldGlvbj1ifTtPVC5SYXB0b3IuRGlzcGF0Y2hlci5wcm90b3R5cGUuZGlzcGF0Y2g9ZnVuY3Rpb24oYSxiKXt2YXIgYz1PVC5SYXB0b3IuZGVzZXJpYWxpemVNZXNzYWdlKGIpO2lmKGMudHlwZU5hbWUpaWYoYy5hY3Rpb25OYW1lKXN3aXRjaChPVC5kZWJ1ZygiT1QuUmFwdG9yLmRpc3BhdGNoICIrYy5zaWduYXR1cmUrIjogIitiKSxjLnR5cGUpe2Nhc2UgT1QuUmFwdG9yLlR5cGVzLlJQQ19SRVNQT05TRTp0aGlzLmRpc3BhdGNoUlBDUmVzcG9uc2UoYyk7CmJyZWFrO2Nhc2UgT1QuUmFwdG9yLlR5cGVzLkNPTk5FQ1RJT046dGhpcy5kaXNwYXRjaENvbm5lY3Rpb24oYyk7YnJlYWs7Y2FzZSBPVC5SYXB0b3IuVHlwZXMuQ09OTkVDVElPTkNPVU5UOnRoaXMuZGlzcGF0Y2hDb25uZWN0aW9uQ291bnQoYyk7YnJlYWs7Y2FzZSBPVC5SYXB0b3IuVHlwZXMuU1RSRUFNOnRoaXMuZGlzcGF0Y2hTdHJlYW0oYyk7YnJlYWs7Y2FzZSBPVC5SYXB0b3IuVHlwZXMuU1VCU0NSSUJFUjp0aGlzLmRpc3BhdGNoU3Vic2NyaWJlcihjKTticmVhaztjYXNlIE9ULlJhcHRvci5UeXBlcy5NT0RFUkFUSU9OOnRoaXMuZGlzcGF0Y2hNb2RlcmF0aW9uKGMpO2JyZWFrO2Nhc2UgT1QuUmFwdG9yLlR5cGVzLkpTRVA6dGhpcy5kaXNwYXRjaEpzZXAoYyk7YnJlYWs7Y2FzZSBPVC5SYXB0b3IuVHlwZXMuU0lHTkFMOnRoaXMuZGlzcGF0Y2hTaWduYWwoYyk7YnJlYWs7ZGVmYXVsdDpPVC53YXJuKCJPVC5SYXB0b3IuZGlzcGF0Y2g6IFR5cGUgIitjLnR5cGVOYW1lKyIgaXMgbm90IGN1cnJlbnRseSBpbXBsZW1lbnRlZCIpfWVsc2UgT1QuZXJyb3IoIk9ULlJhcHRvci5kaXNwYXRjaDogSW52YWxpZCBhY3Rpb24gKCIrCmMuYWN0aW9uKyIpIGZvciAiK2MudHlwZU5hbWUpLE9ULmVycm9yKGMpO2Vsc2UgT1QuZXJyb3IoIk9ULlJhcHRvci5kaXNwYXRjaDogSW52YWxpZCBtZXNzYWdlIHR5cGUgKCIrYy50eXBlKyIpIil9O09ULlJhcHRvci5EaXNwYXRjaGVyLnByb3RvdHlwZS5kaXNwYXRjaFJQQ1Jlc3BvbnNlPWZ1bmN0aW9uKGEpe3N3aXRjaChhLmFjdGlvbil7Y2FzZSBPVC5SYXB0b3IuQWN0aW9ucy5DT05ORUNUOiExPT1hLnBheWxvYWQuY29ubmVjdFN1Y2Nlc3M/dGhpcy5jb25uZWN0aW9uQ29tcGxldGlvbi5jYWxsKG51bGwsbmV3IE9ULkVycm9yKE9ULkV4Y2VwdGlvbkNvZGVzLkNPTk5FQ1RfUkVKRUNURUQsZlthLnBheWxvYWQucmVhc29uXXx8IkZhaWxlZCB0byBjb25uZWN0IikpOnRoaXMuc29ja2V0LnB1Ymxpc2goT1QuUmFwdG9yLk1lc3NhZ2UuZ2V0U2Vzc2lvblN0YXRlKHRoaXMuc29ja2V0LmlkLGEucGF5bG9hZC5zZXNzaW9uSWQsITApKTticmVhaztjYXNlIE9ULlJhcHRvci5BY3Rpb25zLlNUQVRFOnZhciBkPQphLnBheWxvYWQudmFsdWUsYT1PVC5zZXNzaW9ucy5nZXQoYS5wYXlsb2FkLmtleSksYztkLnN0cmVhbXM9W107ZC5jb25uZWN0aW9ucz1bXTtkLmFyY2hpdmVzPVtdO2lmKGQuaGFzT3duUHJvcGVydHkoIkNPTk5FQ1RJT05TIikpe2Zvcih2YXIgZSBpbiBkLkNPTk5FQ1RJT05TKWM9T1QuQ29ubmVjdGlvbi5mcm9tSGFzaChkLkNPTk5FQ1RJT05TW2VdKSxkLmNvbm5lY3Rpb25zLnB1c2goYyksYS5jb25uZWN0aW9ucy5hZGQoYyk7ZGVsZXRlIGQuQ09OTkVDVElPTlN9aWYoZC5oYXNPd25Qcm9wZXJ0eSgiU1RSRUFNUyIpKXtmb3IoZSBpbiBkLlNUUkVBTVMpZC5zdHJlYW1zLnB1c2goYihkLlNUUkVBTVNbZV0sYSkpO2RlbGV0ZSBkLlNUUkVBTVN9dGhpcy5jb25uZWN0aW9uQ29tcGxldGlvbi5jYWxsKG51bGwsbnVsbCxkKTticmVhaztkZWZhdWx0Ok9ULndhcm4oIk9ULlJhcHRvci5kaXNwYXRjaDogIithLnNpZ25hdHVyZSsiIGlzIG5vdCBjdXJyZW50bHkgaW1wbGVtZW50ZWQiKX19OwpPVC5SYXB0b3IuRGlzcGF0Y2hlci5wcm90b3R5cGUuZGlzcGF0Y2hDb25uZWN0aW9uPWZ1bmN0aW9uKGEpe3ZhciBiPU9ULnNlc3Npb25zLmdldChhLnBheWxvYWQudmFsdWUuc2Vzc2lvbklkKSxjO2lmKGIpc3dpdGNoKGEuYWN0aW9uKXtjYXNlIE9ULlJhcHRvci5BY3Rpb25zLkNSRUFURTpjPU9ULkNvbm5lY3Rpb24uZnJvbUhhc2goYS5wYXlsb2FkLnZhbHVlKTtiLmNvbm5lY3Rpb24mJmMuaWQhPT1iLmNvbm5lY3Rpb24uaWQmJmIuY29ubmVjdGlvbnMuYWRkKGMpO2JyZWFrO2Nhc2UgT1QuUmFwdG9yLkFjdGlvbnMuREVMRVRFOmM9Yi5jb25uZWN0aW9ucy5nZXQoYS5wYXlsb2FkLnZhbHVlLmNvbm5lY3Rpb25JZCk7Yy5kZXN0cm95KGEucGF5bG9hZC5yZWFzb24pO2JyZWFrO2RlZmF1bHQ6T1Qud2FybigiT1QuUmFwdG9yLmRpc3BhdGNoOiAiK2Euc2lnbmF0dXJlKyIgaXMgbm90IGN1cnJlbnRseSBpbXBsZW1lbnRlZCIpfWVsc2UgT1QuZXJyb3IoIk9ULlJhcHRvci5kaXNwYXRjaDogVW5hYmxlIHRvIGRldGVybWluZSBzZXNzaW9uIGZvciAiKwphLnBheWxvYWQudmFsdWUuc2Vzc2lvbklkKyIgb24gIithLnNpZ25hdHVyZSsiIG1lc3NhZ2UhIil9O09ULlJhcHRvci5EaXNwYXRjaGVyLnByb3RvdHlwZS5kaXNwYXRjaENvbm5lY3Rpb25Db3VudD1mdW5jdGlvbigpe307T1QuUmFwdG9yLkRpc3BhdGNoZXIucHJvdG90eXBlLmRpc3BhdGNoU3RyZWFtPWZ1bmN0aW9uKGEpe3ZhciBkPWEucGF5bG9hZC5rZXkuc3BsaXQoIi8iKSxjPWRbMF0sZSxmO2MmJihlPU9ULnNlc3Npb25zLmdldChjKSk7aWYoZSlzd2l0Y2goYS5hY3Rpb24pe2Nhc2UgT1QuUmFwdG9yLkFjdGlvbnMuUkVHSVNURVI6Zj1nKGEucGF5bG9hZC52YWx1ZSxlKTtmLnB1Ymxpc2hlcklkJiYoKGQ9T1QucHVibGlzaGVycy5nZXQoZi5wdWJsaXNoZXJJZCkpP2QuXy5zdHJlYW1SZWdpc3RlcmVkSGFuZGxlcihmKTpPVC53YXJuKCJPVC5SYXB0b3IuZGlzcGF0Y2g6IENvdWxkIGZpbmQgYSBwdWJsaXNoZXIgIitmLnB1Ymxpc2hlcklkKyIgZm9yICIrYS5zaWduYXR1cmUpKTsKYnJlYWs7Y2FzZSBPVC5SYXB0b3IuQWN0aW9ucy5DUkVBVEU6YihhLnBheWxvYWQudmFsdWUsZSk7YnJlYWs7Y2FzZSBPVC5SYXB0b3IuQWN0aW9ucy5VUERBVEU6ZFsxXSYmKGY9ZS5zdHJlYW1zLmdldChkWzFdKSk7aWYoIWYpe09ULmVycm9yKCJPVC5SYXB0b3IuZGlzcGF0Y2g6IFVuYWJsZSB0byBkZXRlcm1pbmUgc3RyZWFtSWQsIG9yIHRoZSBzdHJlYW0gZG9lcyBub3QgZXhpc3QsIGZvciAiK2Euc2lnbmF0dXJlKyIgbWVzc2FnZSEiKTticmVha31mLnVwZGF0ZShkWzJdLGEucGF5bG9hZC52YWx1ZSk7YnJlYWs7Y2FzZSBPVC5SYXB0b3IuQWN0aW9ucy5ERUxFVEU6ZFsyXSYmKGY9ZS5zdHJlYW1zLmdldChkWzJdKSk7aWYoIWYpe09ULmVycm9yKCJPVC5SYXB0b3IuZGlzcGF0Y2g6IFVuYWJsZSB0byBkZXRlcm1pbmUgc3RyZWFtSWQsIG9yIHRoZSBzdHJlYW0gZG9lcyBub3QgZXhpc3QsIGZvciAiK2Euc2lnbmF0dXJlKyIgbWVzc2FnZSEiKTticmVha31mLmRlc3Ryb3koYS5wYXlsb2FkLnJlYXNvbik7CmJyZWFrO2RlZmF1bHQ6T1Qud2FybigiT1QuUmFwdG9yLmRpc3BhdGNoOiAiK2Euc2lnbmF0dXJlKyIgaXMgbm90IGN1cnJlbnRseSBpbXBsZW1lbnRlZCIpfWVsc2UgT1QuZXJyb3IoIk9ULlJhcHRvci5kaXNwYXRjaDogVW5hYmxlIHRvIGRldGVybWluZSBzZXNzaW9uSWQsIG9yIHRoZSBzZXNzaW9uIGRvZXMgbm90IGV4aXN0LCBmb3IgIithLnNpZ25hdHVyZSsiIG1lc3NhZ2UhIil9O09ULlJhcHRvci5EaXNwYXRjaGVyLnByb3RvdHlwZS5kaXNwYXRjaE1vZGVyYXRpb249ZnVuY3Rpb24oKXt9O09ULlJhcHRvci5EaXNwYXRjaGVyLnByb3RvdHlwZS5kaXNwYXRjaEpzZXA9ZnVuY3Rpb24oYSl7dmFyIGIsYz1hLnBheWxvYWQuc3RyZWFtSWQsZTtzd2l0Y2goYS5hY3Rpb24pe2Nhc2UgT1QuUmFwdG9yLkFjdGlvbnMuT0ZGRVI6ZT1bXTsoYz1PVC5zdWJzY3JpYmVycy5maW5kKHtzdHJlYW1JZDpjfSkpJiZlLnB1c2goYyk7YnJlYWs7Y2FzZSBPVC5SYXB0b3IuQWN0aW9ucy5BTlNXRVI6Y2FzZSBPVC5SYXB0b3IuQWN0aW9ucy5QUkFOU1dFUjpjYXNlIE9ULlJhcHRvci5BY3Rpb25zLlNVQlNDUklCRTpjYXNlIE9ULlJhcHRvci5BY3Rpb25zLlVOU1VCU0NSSUJFOmU9Ck9ULnB1Ymxpc2hlcnMud2hlcmUoe3N0cmVhbUlkOmN9KTticmVhaztjYXNlIE9ULlJhcHRvci5BY3Rpb25zLkNBTkRJREFURTplPU9ULnB1Ymxpc2hlcnMud2hlcmUoe3N0cmVhbUlkOmN9KS5jb25jYXQoT1Quc3Vic2NyaWJlcnMud2hlcmUoe3N0cmVhbUlkOmN9KSk7YnJlYWs7ZGVmYXVsdDpPVC53YXJuKCJPVC5SYXB0b3IuZGlzcGF0Y2g6ICIrYS5zaWduYXR1cmUrIiBpcyBub3QgY3VycmVudGx5IGltcGxlbWVudGVkIik7cmV0dXJufWUubGVuZ3RoJiYoYj1lWzBdLnNlc3Npb24uY29ubmVjdGlvbnMuZ2V0KGEucGF5bG9hZC5mcm9tQWRkcmVzcyksIWImJmEucGF5bG9hZC5mcm9tQWRkcmVzcy5tYXRjaCgvXnN5bXBob255XC4vKT8oYj1uZXcgT1QuQ29ubmVjdGlvbihhLnBheWxvYWQuZnJvbUFkZHJlc3MsRGF0ZS5ub3coKSxudWxsLHtzdXBwb3J0c1dlYlJUQzohMH0pLGVbMF0uc2Vzc2lvbi5jb25uZWN0aW9ucy5hZGQoYikpOmJ8fE9ULndhcm4oIk1lc3NzYWdlIGNvbWVzIGZyb20gYSBjb25uZWN0aW9uICgiKwphLnBheWxvYWQuZnJvbUFkZHJlc3MrIikgdGhhdCB3ZSBkbyBub3Qga25vdyBhYm91dC4iKSk7ZS5mb3JFYWNoKGZ1bmN0aW9uKGMpe2MucHJvY2Vzc01lc3NhZ2UoYS5hY3Rpb24sYixhLnBheWxvYWQpfSl9O09ULlJhcHRvci5EaXNwYXRjaGVyLnByb3RvdHlwZS5kaXNwYXRjaFN1YnNjcmliZXI9ZnVuY3Rpb24oYSl7dmFyIGI9YS5wYXlsb2FkLmtleS5zcGxpdCgiLyIpLGM9T1Quc2Vzc2lvbnMuZ2V0KGJbMF0pLGU7aWYoYylpZihlPWJbMl0/Yy5zdHJlYW1zLmdldChiWzJdKTpudWxsKWlmKGI9T1Quc3Vic2NyaWJlcnMuZmluZChmdW5jdGlvbihhKXtyZXR1cm4gYS5zdHJlYW1JZD09PWUuaWQmJmEuc2Vzc2lvbi5pZD09PWMuaWR9KSlzd2l0Y2goYS5hY3Rpb24pe2Nhc2UgT1QuUmFwdG9yLkFjdGlvbnMuUVVBTElUWV9DSEFOR0VEOmIudXBkYXRlUXVhbGl0eShwYXJzZUludChhLnBheWxvYWQudmFsdWUsMTApKTticmVhaztkZWZhdWx0Ok9ULndhcm4oIk9ULlJhcHRvci5kaXNwYXRjaDogIisKYS5zaWduYXR1cmUrIiBpcyBub3QgY3VycmVudGx5IGltcGxlbWVudGVkIil9ZWxzZSBPVC5lcnJvcigiT1QuUmFwdG9yLmRpc3BhdGNoOiBVbmFibGUgdG8gZGV0ZXJtaW5lIHN1YnNjcmliZXJJZCwgb3IgdGhlIHN1YnNjcmliZXIgZG9lcyBub3QgZXhpc3QsIGZvciAiK2Euc2lnbmF0dXJlKyIgbWVzc2FnZSEiKTtlbHNlIE9ULmVycm9yKCJPVC5SYXB0b3IuZGlzcGF0Y2g6IFVuYWJsZSB0byBkZXRlcm1pbmUgc3RyZWFtSWQsIG9yIHRoZSBzdHJlYW0gZG9lcyBub3QgZXhpc3QsIGZvciAiK2Euc2lnbmF0dXJlKyIgbWVzc2FnZSEiKTtlbHNlIE9ULmVycm9yKCJPVC5SYXB0b3IuZGlzcGF0Y2g6IFVuYWJsZSB0byBkZXRlcm1pbmUgc2Vzc2lvbklkLCBvciB0aGUgc2Vzc2lvbiBkb2VzIG5vdCBleGlzdCwgZm9yICIrYS5zaWduYXR1cmUrIiBtZXNzYWdlISIpfTtPVC5SYXB0b3IuRGlzcGF0Y2hlci5wcm90b3R5cGUuZGlzcGF0Y2hTaWduYWw9ZnVuY3Rpb24oYSl7aWYoYS5hY3Rpb24hPT0KT1QuUmFwdG9yLkFjdGlvbnMuU0lHTkFMKU9ULndhcm4oIk9ULlJhcHRvci5kaXNwYXRjaDogIithLnNpZ25hdHVyZSsiIGlzIG5vdCBjdXJyZW50bHkgaW1wbGVtZW50ZWQiKTtlbHNle3ZhciBiPU9ULnNlc3Npb25zLmdldCh0aGlzLnNvY2tldC5zZXNzaW9uSWQpO2I/Yi5fLmRpc3BhdGNoU2lnbmFsKGIuY29ubmVjdGlvbnMuZ2V0KGEucGF5bG9hZC5mcm9tQWRkcmVzcyksYS5wYXlsb2FkLnR5cGUsYS5wYXlsb2FkLmRhdGEpOk9ULmVycm9yKCJPVC5SYXB0b3IuZGlzcGF0Y2g6ICIrYS5zaWduYXR1cmUrIiBFUlJPUiAtIHNlc3Npb25JZCBtdXN0IGJlIHByb3ZpZGVkIGFuZCBiZSB2YWxpZCIpfX19KSh0aGlzKTsKKGZ1bmN0aW9uKGcpe3ZhciBiPW5ldyBmdW5jdGlvbigpe3ZhciBiPSExLGE9ITEsZD1mdW5jdGlvbigpe2EmJmImJk9ULmRpc3BhdGNoRXZlbnQobmV3IE9ULkVudkxvYWRlZEV2ZW50KE9ULkV2ZW50Lm5hbWVzLkVOVl9MT0FERUQpKX0sYz1mdW5jdGlvbigpe2E9ITA7T1QuJC5vbihnLCJiZWZvcmV1bmxvYWQiLGZ1bmN0aW9uKCl7T1QucHVibGlzaGVycy5kZXN0cm95KCk7T1Quc3Vic2NyaWJlcnMuZGVzdHJveSgpO09ULnNlc3Npb25zLmRlc3Ryb3koKX0pO09ULkNvbmZpZy5sb2FkKE9ULnByb3BlcnRpZXMuY29uZmlnVVJMKTtkKCl9LGU9ZnVuY3Rpb24oKXtiPSEwO09ULkNvbmZpZy5vZmYoImR5bmFtaWNDb25maWdDaGFuZ2VkIixlKTtPVC5Db25maWcub2ZmKCJkeW5hbWljQ29uZmlnTG9hZEZhaWxlZCIsaCk7ZCgpfSxoPWZ1bmN0aW9uKCl7ZSgpfTtPVC5Db25maWcub24oImR5bmFtaWNDb25maWdDaGFuZ2VkIixlKTtPVC5Db25maWcub24oImR5bmFtaWNDb25maWdMb2FkRmFpbGVkIiwKaCk7ImNvbXBsZXRlIj09ZG9jdW1lbnQucmVhZHlTdGF0ZXx8ImludGVyYWN0aXZlIj09ZG9jdW1lbnQucmVhZHlTdGF0ZSYmZG9jdW1lbnQuYm9keT9jKCk6ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcj9kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJET01Db250ZW50TG9hZGVkIixjLCExKTpkb2N1bWVudC5hdHRhY2hFdmVudCYmZG9jdW1lbnQuYXR0YWNoRXZlbnQoIm9ucmVhZHlzdGF0ZWNoYW5nZSIsZnVuY3Rpb24oKXsiY29tcGxldGUiPT1kb2N1bWVudC5yZWFkeVN0YXRlJiZjKCl9KTt0aGlzLm9uTG9hZD1mdW5jdGlvbihjKXtpZihhJiZiKWMoKTtlbHNlIE9ULm9uKE9ULkV2ZW50Lm5hbWVzLkVOVl9MT0FERUQsYyl9fTtPVC5vbkxvYWQ9ZnVuY3Rpb24oZixhKXtpZihhKWIub25Mb2FkKGYuYmluZChhKSk7ZWxzZSBiLm9uTG9hZChmKX19KSh3aW5kb3cpOwooZnVuY3Rpb24oKXtmdW5jdGlvbiBnKGEsZCxjLGUpe3ZhciBoPWJbY10sZT1lP09ULiQuY2xvbmUoZSk6e307T1QuZXJyb3IoIlRCLmV4Y2VwdGlvbiA6OiB0aXRsZTogIitoKyIgKCIrYysiKSBtc2c6ICIrZCk7ZS5wYXJ0bmVySWR8fChlLnBhcnRuZXJJZD1PVC5BUElLRVkpO3RyeXtmfHwoZj1uZXcgT1QuQW5hbHl0aWNzKSxmLmxvZ0Vycm9yKGMsInRiLmV4Y2VwdGlvbiIsaCx7ZGV0YWlsczpkfSxlKSxPVC5kaXNwYXRjaEV2ZW50KG5ldyBPVC5FeGNlcHRpb25FdmVudChPVC5FdmVudC5uYW1lcy5FWENFUFRJT04sZCxoLGMsYSxhKSl9Y2F0Y2goZyl7T1QuZXJyb3IoIlRCLmV4Y2VwdGlvbiA6OiBGYWlsZWQgdG8gZGlzcGF0Y2ggZXhjZXB0aW9uIC0gIitnLnRvU3RyaW5nKCkpfX1PVC5FcnJvcj1mdW5jdGlvbihhLGIpe3RoaXMuY29kZT1hO3RoaXMubWVzc2FnZT1ifTt2YXIgYj17MUUzOiJGYWlsZWQgVG8gTG9hZCIsMTAwNDoiQXV0aGVudGljYXRpb24gZXJyb3IiLDEwMDU6IkludmFsaWQgU2Vzc2lvbiBJRCIsCjEwMDY6IkNvbm5lY3QgRmFpbGVkIiwxMDA3OiJDb25uZWN0IFJlamVjdGVkIiwxMDA4OiJDb25uZWN0IFRpbWUtb3V0IiwxMDA5OiJTZWN1cml0eSBFcnJvciIsMTAxMDoiTm90IENvbm5lY3RlZCIsMTAxMToiSW52YWxpZCBQYXJhbWV0ZXIiLDEwMTI6IlBlZXItdG8tcGVlciBTdHJlYW0gUGxheSBGYWlsZWQiLDEwMTM6IkNvbm5lY3Rpb24gRmFpbGVkIiwxMDE0OiJBUEkgUmVzcG9uc2UgRmFpbHVyZSIsMTUwMDoiVW5hYmxlIHRvIFB1Ymxpc2giLDE1MTA6IlVuYWJsZSB0byBTaWduYWwiLDE1MjA6IlVuYWJsZSB0byBGb3JjZSBEaXNjb25uZWN0IiwxNTMwOiJVbmFibGUgdG8gRm9yY2UgVW5wdWJsaXNoIiwxNTQwOiJVbmFibGUgdG8gcmVjb3JkIGFyY2hpdmUiLDE1NTA6IlVuYWJsZSB0byBwbGF5IGJhY2sgYXJjaGl2ZSIsMTU2MDoiVW5hYmxlIHRvIGNyZWF0ZSBhcmNoaXZlIiwxNTcwOiJVbmFibGUgdG8gbG9hZCBhcmNoaXZlIiwyRTM6IkludGVybmFsIEVycm9yIiwyMDAxOiJFbWJlZCBGYWlsZWQiLAozRTM6IkFyY2hpdmUgbG9hZCBleGNlcHRpb24iLDMwMDE6IkFyY2hpdmUgY3JlYXRlIGV4Y2VwdGlvbiIsMzAwMjoiUGxheWJhY2sgc3RvcCBleGNlcHRpb24iLDMwMDM6IlBsYXliYWNrIHN0YXJ0IGV4Y2VwdGlvbiIsMzAwNDoiUmVjb3JkIHN0YXJ0IGV4Y2VwdGlvbiIsMzAwNToiUmVjb3JkIHN0b3AgZXhjZXB0aW9uIiwzMDA2OiJBcmNoaXZlIGxvYWQgZXhjZXB0aW9uIiwzMDA3OiJTZXNzaW9uIHJlY29yZGluZyBpbiBwcm9ncmVzcyIsMzAwODoiQXJjaGl2ZSByZWNvcmRpbmcgaW50ZXJuYWwgZmFpbHVyZSIsNEUzOiJXZWJTb2NrZXQgQ29ubmVjdGlvbiBGYWlsZWQiLDQwMDE6IldlYlNvY2tldCBOZXR3b3JrIERpc2Nvbm5lY3RlZCJ9LGY7T1QuaGFuZGxlSnNFeGNlcHRpb249ZnVuY3Rpb24oYSxiLGMpe3ZhciBjPWN8fHt9LGUsZj1jLnNlc3Npb247aWYoZil7aWYoZT17c2Vzc2lvbklkOmYuc2Vzc2lvbklkfSxmLmNvbm5lY3RlZCYmKGUuY29ubmVjdGlvbklkPWYuY29ubmVjdGlvbi5jb25uZWN0aW9uSWQpLAohYy50YXJnZXQpYy50YXJnZXQ9Zn1lbHNlIGMuc2Vzc2lvbklkJiYoZT17c2Vzc2lvbklkOmMuc2Vzc2lvbklkfSxjLnRhcmdldHx8KGMudGFyZ2V0PW51bGwpKTtnKGMudGFyZ2V0LGEsYixlKX07T1QuZXhjZXB0aW9uSGFuZGxlcj1mdW5jdGlvbihhLGIsYyxlLGYpe3ZhciBpO2EmJigoaT1PVC5jb21wb25lbnRzW2FdKXx8T1Qud2FybigiQ291bGQgbm90IGZpbmQgdGhlIGNvbXBvbmVudCB3aXRoIGNvbXBvbmVudCBJRCAiK2EpKTtnKGksYixlLGYpfX0pKHdpbmRvdyk7KGZ1bmN0aW9uKCl7T1QuQ29ubmVjdGlvbkNhcGFiaWxpdGllcz1mdW5jdGlvbihnKXtnLnN1cHBvcnRzV2ViUlRDPU9ULiQuY2FzdFRvQm9vbGVhbihnLnN1cHBvcnRzV2ViUlRDKTt0aGlzLnN1cHBvcnRzV2ViUlRDPWcuc3VwcG9ydHNXZWJSVEN9fSkod2luZG93KTsKKGZ1bmN0aW9uKCl7T1QuQ29ubmVjdGlvbj1mdW5jdGlvbihnLGIsZixhKXt2YXIgZDt0aGlzLmlkPXRoaXMuY29ubmVjdGlvbklkPWc7dGhpcy5jcmVhdGlvblRpbWU9Yj9OdW1iZXIoYik6bnVsbDt0aGlzLmRhdGE9Zjt0aGlzLmNhcGFiaWxpdGllcz1uZXcgT1QuQ29ubmVjdGlvbkNhcGFiaWxpdGllcyhhKTt0aGlzLnF1YWxpdHk9bnVsbDtPVC4kLmV2ZW50aW5nKHRoaXMpO3RoaXMuZGVzdHJveT1mdW5jdGlvbihhLGIpe2Q9YXx8ImNsaWVudERpc2Nvbm5lY3RlZCI7ITAhPT1iJiZ0aGlzLmRpc3BhdGNoRXZlbnQobmV3IE9ULkRlc3Ryb3llZEV2ZW50KCJkZXN0cm95ZWQiLHRoaXMsZCkpfS5iaW5kKHRoaXMpO09iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRoaXMse2Rlc3Ryb3llZDp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHZvaWQgMCE9PWR9LGVudW1lcmFibGU6ITB9LGRlc3Ryb3llZFJlYXNvbjp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGR9LGVudW1lcmFibGU6ITB9fSl9O09ULkNvbm5lY3Rpb24uZnJvbUhhc2g9CmZ1bmN0aW9uKGcpe3JldHVybiBuZXcgT1QuQ29ubmVjdGlvbihnLmNvbm5lY3Rpb25JZCxnLmNyZWF0aW9uVGltZSxnLmRhdGEse3N1cHBvcnRzV2ViUlRDOmcuc3VwcG9ydHNXZWJSVEN9KX19KSh3aW5kb3cpOwooZnVuY3Rpb24oKXt2YXIgZz0iaGFzQXVkaW8gaGFzVmlkZW8gcXVhbGl0eSBuYW1lIHZpZGVvRGltZW5zaW9ucyBvcmllbnRhdGlvbiIuc3BsaXQoIiAiKTtPVC5TdHJlYW09ZnVuY3Rpb24oYixmLGEsZCxjLGUsaCxpLGssaixsLG0scCl7dmFyIG47dGhpcy5pZD10aGlzLnN0cmVhbUlkPWI7dGhpcy5jb25uZWN0aW9uPWY7dGhpcy5uYW1lPWE7dGhpcy5kYXRhPWQ7dGhpcy50eXBlPWN8fCJiYXNpYyI7dGhpcy5jcmVhdGlvblRpbWU9ZT9OdW1iZXIoZSk6bnVsbDt0aGlzLmhhc0F1ZGlvPU9ULiQuY2FzdFRvQm9vbGVhbihoLCEwKTt0aGlzLmhhc1ZpZGVvPU9ULiQuY2FzdFRvQm9vbGVhbihpLCEwKTt0aGlzLnBlZXJJZD1qO3RoaXMucXVhbGl0eT1sO3RoaXMudmlkZW9EaW1lbnNpb25zPXt3aWR0aDptfHw2NDAsaGVpZ2h0OnB8fDQ4MCxvcmllbnRhdGlvbjprfHxPVC5WaWRlb09yaWVudGF0aW9uLlJPVEFURURfTk9STUFMfTtPVC4kLmV2ZW50aW5nKHRoaXMpO3RoaXMudXBkYXRlPQpmdW5jdGlvbihhLGIpe2lmKC0xPT09Zy5pbmRleE9mKGEpKU9ULndhcm4oJ1Vua25vd24gc3RyZWFtIHByb3BlcnR5ICInK2ErJyIgd2FzIG1vZGlmaWVkIHRvICInK2IrJyIuJyk7ZWxzZXt2YXIgYz10aGlzW2FdLGQ9Yjtzd2l0Y2goYSl7Y2FzZSAiaGFzQXVkaW8iOmNhc2UgImhhc1ZpZGVvIjpkPU9ULiQuY2FzdFRvQm9vbGVhbihkLCEwKTt0aGlzW2FdPWQ7YnJlYWs7Y2FzZSAicXVhbGl0eSI6Y2FzZSAibmFtZSI6dGhpc1thXT1kO2JyZWFrO2Nhc2UgIm9yaWVudGF0aW9uIjp0aGlzLnZpZGVvRGltZW5zaW9ucz17d2lkdGg6ZC53aWR0aCxoZWlnaHQ6ZC5oZWlnaHQsb3JpZW50YXRpb246ZC52aWRlb09yaWVudGF0aW9ufX10aGlzLmRpc3BhdGNoRXZlbnQobmV3IE9ULlN0cmVhbVVwZGF0ZWRFdmVudCh0aGlzLGEsYyxkKSl9fTt0aGlzLmRlc3Ryb3k9ZnVuY3Rpb24oYSxiKXtuPWF8fCJjbGllbnREaXNjb25uZWN0ZWQiOyEwIT09YiYmdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBPVC5EZXN0cm95ZWRFdmVudCgiZGVzdHJveWVkIiwKdGhpcyxuKSl9O09iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRoaXMse2Rlc3Ryb3llZDp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHZvaWQgMCE9PW59LGVudW1lcmFibGU6ITB9LGRlc3Ryb3llZFJlYXNvbjp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIG59LGVudW1lcmFibGU6ITB9fSl9fSkod2luZG93KTsKKGZ1bmN0aW9uKGcpe3ZhciBiPWcud2Via2l0UlRDUGVlckNvbm5lY3Rpb258fGcubW96UlRDUGVlckNvbm5lY3Rpb24sZj1nLm1velJUQ1Nlc3Npb25EZXNjcmlwdGlvbnx8Zy5SVENTZXNzaW9uRGVzY3JpcHRpb24sYT1nLm1velJUQ0ljZUNhbmRpZGF0ZXx8Zy5SVENJY2VDYW5kaWRhdGUsZD1mdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oYil7T1QuZGVidWcoIkljZUNhbmRpZGF0ZUZvcndhcmRlcjogSWNlIENhbmRpZGF0ZSIpO2IuY2FuZGlkYXRlP2EoT1QuUmFwdG9yLkFjdGlvbnMuQ0FORElEQVRFLGIuY2FuZGlkYXRlKTpPVC5kZWJ1ZygiSWNlQ2FuZGlkYXRlRm9yd2FyZGVyOiBObyBtb3JlIElDRSBjYW5kaWRhdGVzLiIpfX0sYz1mdW5jdGlvbigpe3ZhciBiPVtdLGM9bnVsbDtPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywicGVlckNvbm5lY3Rpb24iLHtzZXQ6ZnVuY3Rpb24oYSl7Yz1hfX0pO3RoaXMucHJvY2Vzcz1mdW5jdGlvbihkKXtkPW5ldyBhKGQuY2FuZGlkYXRlKTsKYz9jLmFkZEljZUNhbmRpZGF0ZShkKTpiLnB1c2goZCl9O3RoaXMucHJvY2Vzc1BlbmRpbmc9ZnVuY3Rpb24oKXtmb3IoO2IubGVuZ3RoOyljLmFkZEljZUNhbmRpZGF0ZShiLnNoaWZ0KCkpfX0sZT1mdW5jdGlvbihhKXt2YXIgYj0vYT1ydHBtYXA6KFxkKykgQ05cL1xkKy9pLGM9W10sZCxlLGE9YS5zcGxpdCgiXHJcbiIpLmZpbHRlcihmdW5jdGlvbihhLGYpey0xIT09YS5pbmRleE9mKCJtPWF1ZGlvIikmJihkPWYpO2U9YS5tYXRjaChiKTtyZXR1cm4gbnVsbCE9PWU/KGMucHVzaChlWzFdKSwhMSk6ITB9KTtjLmxlbmd0aCYmZCYmKGFbZF09YVtkXS5yZXBsYWNlKFJlZ0V4cChjLmpvaW4oInwiKSwiaWciKSwiIikucmVwbGFjZSgvXHMrL2csIiAiKSk7cmV0dXJuIGEuam9pbigiXHJcbiIpfSxoPWZ1bmN0aW9uKGEsYixjLGQpe3ZhciBmPWZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihiKXtkJiZkKGEsYil9fSxoPWZ1bmN0aW9uKGIpe2Iuc2RwPWUoYi5zZHApO2Euc2V0TG9jYWxEZXNjcmlwdGlvbihiLApmdW5jdGlvbigpe2MoYil9LGYoIkVycm9yIHdoaWxlIHNldHRpbmcgTG9jYWxEZXNjcmlwdGlvbiIpKX07LTE9PT1iLnNkcC5pbmRleE9mKCJhPWNyeXB0byIpJiYoYi5zZHA9Yi5zZHAucmVwbGFjZSgvXmM9SU4oLiopJC9nbWksImM9SU4kMVxyXG5hPWNyeXB0bzoxIEFFU19DTV8xMjhfSE1BQ19TSEExXzgwIGlubGluZTpGYWtlRmFrZUZha2VGYWtlRmFrZUZha2VGYWtlRmFrZUZha2VGYWtlXFxyXFxuIikpOy0xPT09Yi5zZHAuaW5kZXhPZigiYT1ydGNwLWZiIikmJihiLnNkcD1iLnNkcC5yZXBsYWNlKC9ebT12aWRlbyguKikkL2dtaSwibT12aWRlbyQxXHJcbmE9cnRjcC1mYjoqIGNjbSBmaXJcclxuYT1ydGNwLWZiOiogbmFjayAiKSk7YS5zZXRSZW1vdGVEZXNjcmlwdGlvbihiLGZ1bmN0aW9uKCl7YS5jcmVhdGVBbnN3ZXIoaCxmKCJFcnJvciB3aGlsZSBzZXR0aW5nIGNyZWF0ZUFuc3dlciIpLG51bGwsZmFsc2UpfSxmKCJFcnJvciB3aGlsZSBzZXR0aW5nIFJlbW90ZURlc2NyaXB0aW9uIikpfSwKaT1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9e21hbmRhdG9yeTp7fSxvcHRpb25hbDpbXX0sZj1mdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oYil7YyYmYyhhLGIpfX07bmF2aWdhdG9yLm1vekdldFVzZXJNZWRpYSYmKGQubWFuZGF0b3J5Lk1vekRvbnRPZmZlckRhdGFDaGFubmVsPSEwKTthLmNyZWF0ZU9mZmVyKGZ1bmN0aW9uKGMpe2Muc2RwPWUoYy5zZHApO2Euc2V0TG9jYWxEZXNjcmlwdGlvbihjLGZ1bmN0aW9uKCl7YihjKX0sZigiRXJyb3Igd2hpbGUgc2V0dGluZyBMb2NhbERlc2NyaXB0aW9uIikpfSxmKCJFcnJvciB3aGlsZSBjcmVhdGluZyBPZmZlciIpLGQpfTtPVC5QZWVyQ29ubmVjdGlvbj1mdW5jdGlvbihhKXt2YXIgZSxnPW5ldyBjLG0scCxuPSJuZXciLHI9W10scSxvPU9ULiQubm93KCk7T1QuJC5ldmVudGluZyh0aGlzKTthLmljZVNlcnZlcnN8fChhLmljZVNlcnZlcnM9W10pO3ZhciBzPWZ1bmN0aW9uKGEsYil7aWYoci5sZW5ndGgpclswXShhLGIpfS5iaW5kKHRoaXMpLAp4PWZ1bmN0aW9uKCl7aWYoIWUpe3RyeXtPVC5kZWJ1ZygnQ3JlYXRpbmcgcGVlciBjb25uZWN0aW9uIGNvbmZpZyAiJytKU09OLnN0cmluZ2lmeShhKSsnIi4nKTtlPW5ldyBiKGEse29wdGlvbmFsOlt7RHRsc1NydHBLZXlBZ3JlZW1lbnQ6dHJ1ZX1dfSl9Y2F0Y2goYyl7T1QuZXJyb3IoIkZhaWxlZCB0byBjcmVhdGUgUGVlckNvbm5lY3Rpb24sIGV4Y2VwdGlvbjogIitjLm1lc3NhZ2UpO3JldHVybiBudWxsfWcucGVlckNvbm5lY3Rpb249ZTtlLm9uaWNlY2FuZGlkYXRlPWQocyk7ZS5vbmFkZHN0cmVhbT1CLmJpbmQodGhpcyk7ZS5vbnJlbW92ZXN0cmVhbT16LmJpbmQodGhpcyk7aWYoZS5vbnNpZ25hbGluZ3N0YXRlY2hhbmdlIT09dm9pZCAwKWUub25zaWduYWxpbmdzdGF0ZWNoYW5nZT15LmJpbmQodGhpcyk7ZWxzZSBpZihlLm9uc3RhdGVjaGFuZ2UhPT12b2lkIDApZS5vbnN0YXRlY2hhbmdlPXkuYmluZCh0aGlzKX1yZXR1cm4gZX0uYmluZCh0aGlzKSx2PWZ1bmN0aW9uKCl7aWYoZylnLnBlZXJDb25uZWN0aW9uPQpudWxsO2lmKGUhPT1udWxsKXtlPW51bGw7dGhpcy50cmlnZ2VyKCJjbG9zZSIpfX0seT1mdW5jdGlvbihhKXthPXR5cGVvZiBhPT09InN0cmluZyI/YTphLnRhcmdldCYmYS50YXJnZXQuc2lnbmFsaW5nU3RhdGU/YS50YXJnZXQuc2lnbmFsaW5nU3RhdGU6YS50YXJnZXQucmVhZHlTdGF0ZTtPVC5kZWJ1ZygiUGVlckNvbm5lY3Rpb24uc3RhdGVDaGFuZ2U6ICIrYSk7aWYoYSYmYS50b0xvd2VyQ2FzZSgpIT09bil7bj1hLnRvTG93ZXJDYXNlKCk7T1QuZGVidWcoIlBlZXJDb25uZWN0aW9uLnN0YXRlQ2hhbmdlOiAiK24pO3N3aXRjaChuKXtjYXNlICJjbG9zZWQiOnYuY2FsbCh0aGlzKX19fSxCPWZ1bmN0aW9uKGEpe3RoaXMudHJpZ2dlcigic3RyZWFtQWRkZWQiLGEuc3RyZWFtKX0sej1mdW5jdGlvbihhKXt0aGlzLnRyaWdnZXIoInN0cmVhbVJlbW92ZWQiLGEuc3RyZWFtKX0sdz1mdW5jdGlvbihhKXthPW5ldyBmKGEuc2RwKTt4KCk7X3JlbW90ZURlc2NyaXB0aW9uVHlwZT1hLnR5cGU7Cl9yZW1vdGVEZXNjcmlwdGlvbj1hO2goZSxhLGZ1bmN0aW9uKGEpe3MoT1QuUmFwdG9yLkFjdGlvbnMuQU5TV0VSLGEpfSxmdW5jdGlvbihhLGIpe0MoIlBlZXJDb25uZWN0aW9uLm9mZmVyUHJvY2Vzc29yICIrYSsiOiAiK2IpfSl9LEQ9ZnVuY3Rpb24oKXtPVC5kZWJ1ZygiUGVlckNvbm5lY3Rpb24ucHJvY2Vzc1N1YnNjcmliZTogU2VuZGluZyBvZmZlciB0byBzdWJzY3JpYmVyLiIpO3goKTtpKGUsZnVuY3Rpb24oYSl7bT1hO3MoT1QuUmFwdG9yLkFjdGlvbnMuT0ZGRVIsbSl9LGZ1bmN0aW9uKGEsYil7QygiUGVlckNvbm5lY3Rpb24uc3VzY3JpYmVQcm9jZXNzb3IgIithKyI6ICIrYil9KX0sQz1mdW5jdGlvbihhKXtPVC5lcnJvcihhKTt0aGlzLnRyaWdnZXIoImVycm9yIixhKX0uYmluZCh0aGlzKTt0aGlzLmFkZExvY2FsU3RyZWFtPWZ1bmN0aW9uKGEpe3goKTtlLmFkZFN0cmVhbShhKX07dGhpcy5kaXNjb25uZWN0PWZ1bmN0aW9uKCl7Zz1udWxsO2lmKGUpe3ZhciBhPWUuc2lnbmFsaW5nU3RhdGV8fAplLnJlYWR5U3RhdGU7YSYmYS50b0xvd2VyQ2FzZSgpIT09ImNsb3NlZCImJmUuY2xvc2UoKTt2LmNhbGwodGhpcyl9dGhpcy5vZmYoKX07dGhpcy5wcm9jZXNzTWVzc2FnZT1mdW5jdGlvbihhLGIpe09ULmRlYnVnKCJQZWVyQ29ubmVjdGlvbi5wcm9jZXNzTWVzc2FnZTogUmVjZWl2ZWQgIithKyIgZnJvbSAiK2IuZnJvbUFkZHJlc3MpO09ULmRlYnVnKGIpO3N3aXRjaChhKXtjYXNlIE9ULlJhcHRvci5BY3Rpb25zLlNVQlNDUklCRTpELmNhbGwodGhpcyxiKTticmVhaztjYXNlIE9ULlJhcHRvci5BY3Rpb25zLk9GRkVSOncuY2FsbCh0aGlzLGIpO2JyZWFrO2Nhc2UgT1QuUmFwdG9yLkFjdGlvbnMuQU5TV0VSOmlmKGIuc2RwKXtwPW5ldyBmKGIuc2RwKTtfcmVtb3RlRGVzY3JpcHRpb25UeXBlPXAudHlwZTtfcmVtb3RlRGVzY3JpcHRpb249cDtlLnNldFJlbW90ZURlc2NyaXB0aW9uKHApO2cucHJvY2Vzc1BlbmRpbmcoKX1lbHNlIE9ULmVycm9yKCJQZWVyQ29ubmVjdGlvbi5wcm9jZXNzTWVzc2FnZTogV2VpcmQgbWVzc2FnZSwgbm8gU0RQLiIpOwpicmVhaztjYXNlIE9ULlJhcHRvci5BY3Rpb25zLkNBTkRJREFURTpnLnByb2Nlc3MoYik7YnJlYWs7ZGVmYXVsdDpPVC5kZWJ1ZygiUGVlckNvbm5lY3Rpb24ucHJvY2Vzc01lc3NhZ2U6IFJlY2VpdmVkIGFuIHVuZXhwZWN0ZWQgbWVzc2FnZSBvZiB0eXBlICIrYSsiIGZyb20gIitiLmZyb21BZGRyZXNzKyI6ICIrSlNPTi5zdHJpbmdpZnkoYikpfXJldHVybiB0aGlzfTt0aGlzLnJlZ2lzdGVyTWVzc2FnZURlbGVnYXRlPWZ1bmN0aW9uKGEpe3JldHVybiByLnB1c2goYSl9O3RoaXMudW5yZWdpc3Rlck1lc3NhZ2VEZWxlZ2F0ZT1mdW5jdGlvbihhKXthPXIuaW5kZXhPZihhKTthIT09LTEmJnIuc3BsaWNlKGEsMSk7cmV0dXJuIHIubGVuZ3RofTt0aGlzLmdldFN0YXRzPWZ1bmN0aW9uKGEsYil7aWYocT09dHJ1ZSlPVC53YXJuKCJQZWVyQ29ubmVjdGlvbi5nZXRTdGF0czogQWxyZWFkeSBnZXR0aW5nIHRoZSBzdGF0cyEiKTtlbHNle3E9dHJ1ZTt2YXIgYz1PVC4kLm5vdygpLGQ9KGMtCmEudGltZVN0YW1wKS8xRTM7YS50aW1lU3RhbXA9Yzt2YXIgZj17fSxoPWZ1bmN0aW9uKGMpe2lmKGMucmVzdWx0KWZvcih2YXIgYz1jLnJlc3VsdCgpLGU9MDtlPGMubGVuZ3RoO2UrKyl7dmFyIGg9Y1tlXTtpZihoLnN0YXQpe3ZhciBnO2c9aDt2YXIgaT1hLnZpZGVvQnl0ZXNUcmFuc2ZlcnJlZHx8MDtpZihnLnN0YXQoImdvb2dGcmFtZUhlaWdodFNlbnQiKSl7YS52aWRlb0J5dGVzVHJhbnNmZXJyZWQ9Zy5zdGF0KCJieXRlc1NlbnQiKTtnPU1hdGgucm91bmQoKGEudmlkZW9CeXRlc1RyYW5zZmVycmVkLWkpKjgvZCl9ZWxzZSBpZihnLnN0YXQoImdvb2dGcmFtZUhlaWdodFJlY2VpdmVkIikpe2EudmlkZW9CeXRlc1RyYW5zZmVycmVkPWcuc3RhdCgiYnl0ZXNSZWNlaXZlZCIpO2c9TWF0aC5yb3VuZCgoYS52aWRlb0J5dGVzVHJhbnNmZXJyZWQtaSkqOC9kKX1lbHNlIGc9TmFOO2lzTmFOKGcpfHwoZi5hdmdWaWRlb0JpdHJhdGU9Zyk7Zz1hLmF1ZGlvQnl0ZXNUcmFuc2ZlcnJlZHx8CjA7aWYoaC5zdGF0KCJhdWRpb0lucHV0TGV2ZWwiKSl7YS5hdWRpb0J5dGVzVHJhbnNmZXJyZWQ9aC5zdGF0KCJieXRlc1NlbnQiKTtoPU1hdGgucm91bmQoKGEuYXVkaW9CeXRlc1RyYW5zZmVycmVkLWcpKjgvZCl9ZWxzZSBpZihoLnN0YXQoImF1ZGlvT3V0cHV0TGV2ZWwiKSl7YS5hdWRpb0J5dGVzVHJhbnNmZXJyZWQ9aC5zdGF0KCJieXRlc1JlY2VpdmVkIik7aD1NYXRoLnJvdW5kKChhLmF1ZGlvQnl0ZXNUcmFuc2ZlcnJlZC1nKSo4L2QpfWVsc2UgaD1OYU47aXNOYU4oaCl8fChmLmF2Z0F1ZGlvQml0cmF0ZT1oKX19cT1mYWxzZTtiKGYpfTtmLmR1cmF0aW9uPU1hdGgucm91bmQoYy1vKTtpZihlJiZlLmdldFN0YXRzKWUuZ2V0U3RhdHMoaCk7ZWxzZXtxPWZhbHNlO2IoZil9fX07T2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsInJlbW90ZVN0cmVhbXMiLHtnZXQ6ZnVuY3Rpb24oKXt2YXIgYTtpZihlKXtpZihlLmdldFJlbW90ZVN0cmVhbXMpYT1lLmdldFJlbW90ZVN0cmVhbXMoKTsKZWxzZSBpZihlLnJlbW90ZVN0cmVhbXMpYT1lLnJlbW90ZVN0cmVhbXM7ZWxzZSB0aHJvdyBFcnJvcigiSW52YWxpZCBQZWVyIENvbm5lY3Rpb24gb2JqZWN0IGltcGxlbWVudHMgbm8gbWV0aG9kIGZvciByZXRyaWV2aW5nIHJlbW90ZSBzdHJlYW1zIik7YT1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhKX1lbHNlIGE9W107cmV0dXJuIGF9fSl9fSkod2luZG93KTsoZnVuY3Rpb24oKXt2YXIgZz17fTtPVC5QZWVyQ29ubmVjdGlvbnM9e2FkZDpmdW5jdGlvbihiLGYsYSl7Yj1iLmlkKyJfIitmLmlkOyhmPWdbYl0pfHwoZj1nW2JdPXtjb3VudDowLHBjOm5ldyBPVC5QZWVyQ29ubmVjdGlvbihhKX0pO2YuY291bnQrPTE7cmV0dXJuIGYucGN9LHJlbW92ZTpmdW5jdGlvbihiLGYpe3ZhciBhPWIuaWQrIl8iK2YuaWQsZD1nW2FdO2QmJihkLmNvdW50LT0xLDA9PT1kLmNvdW50JiYoZC5wYy5kaXNjb25uZWN0KCksZGVsZXRlIGdbYV0pKX19fSkod2luZG93KTsKKGZ1bmN0aW9uKCl7T1QuUHVibGlzaGVyUGVlckNvbm5lY3Rpb249ZnVuY3Rpb24oZyxiLGYsYSl7dmFyIGQsYz0hMSxlPWZ1bmN0aW9uKCl7dGhpcy5kZXN0cm95KCk7dGhpcy50cmlnZ2VyKCJkaXNjb25uZWN0ZWQiLHRoaXMpfSxoPWZ1bmN0aW9uKGEpe3RoaXMudHJpZ2dlcigiZXJyb3IiLG51bGwsYSx0aGlzKTt0aGlzLmRlc3Ryb3koKX0saT1mdW5jdGlvbihhLGQpe2lmKCFjJiYoYT09PU9ULlJhcHRvci5BY3Rpb25zLkNBTkRJREFURXx8YT09PU9ULlJhcHRvci5BY3Rpb25zLk9GRkVSfHxhPT09T1QuUmFwdG9yLkFjdGlvbnMuQU5TV0VSfHxhPT09T1QuUmFwdG9yLkFjdGlvbnMuUFJBTlNXRVIpKWM9LTEhPT0oYT09PU9ULlJhcHRvci5BY3Rpb25zLkNBTkRJREFURT9kLmNhbmRpZGF0ZTpkLnNkcCkuaW5kZXhPZigidHlwIHJlbGF5Iik7c3dpdGNoKGEpe2Nhc2UgT1QuUmFwdG9yLkFjdGlvbnMuQU5TV0VSOmNhc2UgT1QuUmFwdG9yLkFjdGlvbnMuUFJBTlNXRVI6Yi5fLmpzZXBBbnN3ZXIoZy5pZCwKZixkKTticmVhaztjYXNlIE9ULlJhcHRvci5BY3Rpb25zLk9GRkVSOnRoaXMudHJpZ2dlcigiY29ubmVjdGVkIik7Yi5fLmpzZXBPZmZlcihnLmlkLGYsZCk7YnJlYWs7Y2FzZSBPVC5SYXB0b3IuQWN0aW9ucy5DQU5ESURBVEU6Yi5fLmpzZXBDYW5kaWRhdGUoZy5pZCxmLGQpfX0uYmluZCh0aGlzKTtPVC4kLmV2ZW50aW5nKHRoaXMpO3RoaXMuZGVzdHJveT1mdW5jdGlvbigpe2QmJk9ULlBlZXJDb25uZWN0aW9ucy5yZW1vdmUoZyxmKTtkPW51bGw7dGhpcy5vZmYoKX07dGhpcy5wcm9jZXNzTWVzc2FnZT1mdW5jdGlvbihhLGIpe2QucHJvY2Vzc01lc3NhZ2UoYSxiKX07dGhpcy5nZXRTdGF0cz1mdW5jdGlvbihhLGIpe2QuZ2V0U3RhdHMoYSxiKX07dGhpcy5pbml0PWZ1bmN0aW9uKCl7dmFyIGs9Yi5zZXNzaW9uSW5mby5pY2VTZXJ2ZXJzLm1hcChmdW5jdGlvbihhKXthPU9ULiQuY2xvbmUoYSk7InR1cm46Ij09PWEudXJsLnRyaW0oKS5zdWJzdHIoMCw1KSYmKGEudXNlcm5hbWU9CmIuaWQrIi4iK2IuY29ubmVjdGlvbi5pZCsiLiIrZi5pZCk7cmV0dXJuIGF9KTtkPU9ULlBlZXJDb25uZWN0aW9ucy5hZGQoZyxmLHtpY2VTZXJ2ZXJzOmt9KTtkLm9uKHtjbG9zZTplLGVycm9yOmh9LHRoaXMpO2QucmVnaXN0ZXJNZXNzYWdlRGVsZWdhdGUoaSk7ZC5hZGRMb2NhbFN0cmVhbShhKTtPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywicmVtb3RlQ29ubmVjdGlvbiIse3ZhbHVlOmd9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywiaGFzUmVsYXlDYW5kaWRhdGVzIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGN9fSl9fX0pKHdpbmRvdyk7CihmdW5jdGlvbigpe09ULlN1YnNjcmliZXJQZWVyQ29ubmVjdGlvbj1mdW5jdGlvbihnLGIsZixhKXt2YXIgZCxjPSExLGU9ZnVuY3Rpb24oKXt0aGlzLmRlc3Ryb3koKTt0aGlzLnRyaWdnZXIoImRpc2Nvbm5lY3RlZCIsdGhpcyl9LGg9ZnVuY3Rpb24oYSl7dGhpcy50cmlnZ2VyKCJyZW1vdGVTdHJlYW1BZGRlZCIsYSx0aGlzKX0saT1mdW5jdGlvbihhKXt0aGlzLnRyaWdnZXIoInJlbW90ZVN0cmVhbVJlbW92ZWQiLGEsdGhpcyl9LGs9ZnVuY3Rpb24oYSl7dGhpcy50cmlnZ2VyKCJlcnJvciIsbnVsbCxhLHRoaXMpfSxqPWZ1bmN0aW9uKGEsZCl7aWYoIWMmJihhPT09T1QuUmFwdG9yLkFjdGlvbnMuQ0FORElEQVRFfHxhPT09T1QuUmFwdG9yLkFjdGlvbnMuT0ZGRVJ8fGE9PT1PVC5SYXB0b3IuQWN0aW9ucy5BTlNXRVJ8fGE9PT1PVC5SYXB0b3IuQWN0aW9ucy5QUkFOU1dFUikpYz0tMSE9PShhPT09T1QuUmFwdG9yLkFjdGlvbnMuQ0FORElEQVRFP2QuY2FuZGlkYXRlOmQuc2RwKS5pbmRleE9mKCJ0eXAgcmVsYXkiKTsKc3dpdGNoKGEpe2Nhc2UgT1QuUmFwdG9yLkFjdGlvbnMuQU5TV0VSOmNhc2UgT1QuUmFwdG9yLkFjdGlvbnMuUFJBTlNXRVI6dGhpcy50cmlnZ2VyKCJjb25uZWN0ZWQiKTtiLl8uanNlcEFuc3dlcihnLmlkLGYsZCk7YnJlYWs7Y2FzZSBPVC5SYXB0b3IuQWN0aW9ucy5PRkZFUjpiLl8uanNlcE9mZmVyKGcuaWQsZixkKTticmVhaztjYXNlIE9ULlJhcHRvci5BY3Rpb25zLkNBTkRJREFURTpiLl8uanNlcENhbmRpZGF0ZShnLmlkLGYsZCl9fS5iaW5kKHRoaXMpLGw9ZnVuY3Rpb24oYSl7dmFyIGI9ImdldCIrKGE/IlZpZGVvIjoiQXVkaW8iKSsiVHJhY2tzIjtyZXR1cm4gZnVuY3Rpb24oYSl7dmFyIGM9ZC5yZW1vdGVTdHJlYW1zLGU7aWYoMCE9PWMubGVuZ3RoJiZjWzBdW2JdKWZvcih2YXIgZj0wLGg9Yy5sZW5ndGg7ZjxoOysrZil7ZT1jW2ZdO2U9ZVtiXSgpO2Zvcih2YXIgZz0wLGk9ZS5sZW5ndGg7ZzxpOysrZyllW2ddLmVuYWJsZWQ9YX19fTtPVC4kLmV2ZW50aW5nKHRoaXMpOwp0aGlzLmRlc3Ryb3k9ZnVuY3Rpb24oKXtkJiYoMD09PWQudW5yZWdpc3Rlck1lc3NhZ2VEZWxlZ2F0ZShqKSYmKGImJihiLmNvbm5lY3RlZCYmZiYmIWYuZGVzdHJveWVkKSYmYi5fLmpzZXBVbnN1YnNjcmliZShmKSx0aGlzLnN1YnNjcmliZVRvQXVkaW8oITEpKSxPVC5QZWVyQ29ubmVjdGlvbnMucmVtb3ZlKGcsZi5zdHJlYW1JZCkpO2Q9bnVsbDt0aGlzLm9mZigpfTt0aGlzLnByb2Nlc3NNZXNzYWdlPWZ1bmN0aW9uKGEsYil7ZC5wcm9jZXNzTWVzc2FnZShhLGIpfTt0aGlzLmdldFN0YXRzPWZ1bmN0aW9uKGEsYil7ZC5nZXRTdGF0cyhhLGIpfTt0aGlzLnN1YnNjcmliZVRvQXVkaW89bCghMSk7dGhpcy5zdWJzY3JpYmVUb1ZpZGVvPWwoITApO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCJoYXNSZWxheUNhbmRpZGF0ZXMiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gY319KTt0aGlzLmluaXQ9ZnVuY3Rpb24oKXt2YXIgYz1iLnNlc3Npb25JbmZvLmljZVNlcnZlcnMubWFwKGZ1bmN0aW9uKGEpe2E9Ck9ULiQuY2xvbmUoYSk7InR1cm46Ij09PWEudXJsLnRyaW0oKS5zdWJzdHIoMCw1KSYmKGEudXNlcm5hbWU9Yi5pZCsiLiIrYi5jb25uZWN0aW9uLmlkKyIuIitmLmlkKTtyZXR1cm4gYX0pO2Q9T1QuUGVlckNvbm5lY3Rpb25zLmFkZChnLGYuc3RyZWFtSWQse2ljZVNlcnZlcnM6Y30pO2Qub24oe2Nsb3NlOmUsc3RyZWFtQWRkZWQ6aCxzdHJlYW1SZW1vdmVkOmksZXJyb3I6a30sdGhpcyk7Yz1kLnJlZ2lzdGVyTWVzc2FnZURlbGVnYXRlKGopOzA8ZC5yZW1vdGVTdHJlYW1zLmxlbmd0aD9kLnJlbW90ZVN0cmVhbXMuZm9yRWFjaChoLHRoaXMpOjE9PT1jJiZiLl8uanNlcFN1YnNjcmliZShmLGEuc3Vic2NyaWJlVG9WaWRlbyxhLnN1YnNjcmliZVRvQXVkaW8pfX19KSh3aW5kb3cpOwooZnVuY3Rpb24oKXtPVC5DaHJvbWU9ZnVuY3Rpb24oZyl7dmFyIGI9e30sZj1mdW5jdGlvbihhLGQpe2QucGFyZW50PXRoaXM7ZC5hcHBlbmRUbyhnLnBhcmVudCk7YlthXT1kO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLGEse2dldDpmdW5jdGlvbigpe3JldHVybiBiW2FdfX0pfTtnLnBhcmVudCYmKE9ULiQuZXZlbnRpbmcodGhpcyksdGhpcy5kZXN0cm95PWZ1bmN0aW9uKCl7dGhpcy5vZmYoKTt0aGlzLmhpZGUoKTtmb3IodmFyIGEgaW4gYiliW2FdLmRlc3Ryb3koKX0sdGhpcy5zaG93PWZ1bmN0aW9uKCl7Zm9yKHZhciBhIGluIGIpYlthXS5zaG93KCl9LHRoaXMuaGlkZT1mdW5jdGlvbigpe2Zvcih2YXIgYSBpbiBiKWJbYV0uaGlkZSgpfSx0aGlzLnNldD1mdW5jdGlvbihhLGIpe2lmKCJzdHJpbmciPT09dHlwZW9mIGEmJmIpZi5jYWxsKHRoaXMsYSxiKTtlbHNlIGZvcih2YXIgYyBpbiBhKWEuaGFzT3duUHJvcGVydHkoYykmJmYuY2FsbCh0aGlzLGMsYVtjXSk7cmV0dXJuIHRoaXN9KX19KSh3aW5kb3cpOwooZnVuY3Rpb24oKXtPVC5DaHJvbWUuQmVoYXZpb3VyfHwoT1QuQ2hyb21lLkJlaGF2aW91cj17fSk7T1QuQ2hyb21lLkJlaGF2aW91ci5XaWRnZXQ9ZnVuY3Rpb24oZyxiKXt2YXIgZj1ifHx7fSxhLGQ7Zy5zZXREaXNwbGF5TW9kZT1mdW5jdGlvbihiKXtiPWJ8fCJhdXRvIjtpZihhIT09Yil7T1QuJC5yZW1vdmVDbGFzcyh0aGlzLmRvbUVsZW1lbnQsIk9UX21vZGUtIithKTtPVC4kLmFkZENsYXNzKHRoaXMuZG9tRWxlbWVudCwiT1RfbW9kZS0iK2IpO2Q9YTthPWJ9fTtnLnNob3c9ZnVuY3Rpb24oKXt0aGlzLnNldERpc3BsYXlNb2RlKGQpO2lmKGYub25TaG93KWYub25TaG93KCk7cmV0dXJuIHRoaXN9O2cuaGlkZT1mdW5jdGlvbigpe3RoaXMuc2V0RGlzcGxheU1vZGUoIm9mZiIpO2lmKGYub25IaWRlKWYub25IaWRlKCk7cmV0dXJuIHRoaXN9O2cuZGVzdHJveT1mdW5jdGlvbigpe2lmKGYub25EZXN0cm95KWYub25EZXN0cm95KHRoaXMuZG9tRWxlbWVudCk7dGhpcy5kb21FbGVtZW50JiYKT1QuJC5yZW1vdmVFbGVtZW50KHRoaXMuZG9tRWxlbWVudCk7cmV0dXJuIGd9O2cuYXBwZW5kVG89ZnVuY3Rpb24oYSl7dGhpcy5kb21FbGVtZW50PU9ULiQuY3JlYXRlRWxlbWVudChmLm5vZGVOYW1lfHwiZGl2IixmLmh0bWxBdHRyaWJ1dGVzLGYuaHRtbENvbnRlbnQpO2lmKGYub25DcmVhdGUpZi5vbkNyZWF0ZSh0aGlzLmRvbUVsZW1lbnQpO2lmKGYubW9kZSE9ImF1dG8iKWcuc2V0RGlzcGxheU1vZGUoZi5tb2RlKTtlbHNle2cuc2V0RGlzcGxheU1vZGUoIm9uIik7c2V0VGltZW91dChmdW5jdGlvbigpe2cuc2V0RGlzcGxheU1vZGUoZi5tb2RlKX0sMkUzKX1hLmFwcGVuZENoaWxkKHRoaXMuZG9tRWxlbWVudCk7cmV0dXJuIGd9fX0pKHdpbmRvdyk7CihmdW5jdGlvbigpe09ULkNocm9tZS5OYW1lUGFuZWw9ZnVuY3Rpb24oZyl7dmFyIGI9Zy5uYW1lO2lmKCFifHwiIj09PWIudHJpbSgpLmxlbmd0aCliPW51bGwsZy5tb2RlPSJvZmYiO3ZhciBmO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCJkb21FbGVtZW50Iix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGZ9LHNldDpmdW5jdGlvbihhKXtmPWF9fSk7T1QuQ2hyb21lLkJlaGF2aW91ci5XaWRnZXQodGhpcyx7bW9kZTpnLm1vZGUsbm9kZU5hbWU6ImgxIixodG1sQ29udGVudDpiLGh0bWxBdHRyaWJ1dGVzOntjbGFzc05hbWU6Ik9UX25hbWUifX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCJuYW1lIix7c2V0OmZ1bmN0aW9uKGEpe2J8fHRoaXMuc2V0RGlzcGxheU1vZGUoImF1dG8iKTtiPWE7Zi5pbm5lckhUTUw9Yn0uYmluZCh0aGlzKX0pfX0pKHdpbmRvdyk7CihmdW5jdGlvbigpe09ULkNocm9tZS5NdXRlQnV0dG9uPWZ1bmN0aW9uKGcpe3ZhciBiLGY9Zy5tdXRlZHx8ITEsYTtPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywiZG9tRWxlbWVudCIse2dldDpmdW5jdGlvbigpe3JldHVybiBhfSxzZXQ6ZnVuY3Rpb24oYil7YT1ifX0pO3ZhciBkPWZ1bmN0aW9uKCl7KGY9IWYpPyhPVC4kLmFkZENsYXNzKGEsIk9UX2FjdGl2ZSIpLHRoaXMucGFyZW50LnRyaWdnZXIoIm11dGVkIix0aGlzKSk6KE9ULiQucmVtb3ZlQ2xhc3MoYSwiT1RfYWN0aXZlIiksdGhpcy5wYXJlbnQudHJpZ2dlcigidW5tdXRlZCIsdGhpcykpO3JldHVybiExfTtPVC5DaHJvbWUuQmVoYXZpb3VyLldpZGdldCh0aGlzLHttb2RlOmcubW9kZSxub2RlTmFtZToiYnV0dG9uIixodG1sQ29udGVudDoiTXV0ZSIsaHRtbEF0dHJpYnV0ZXM6e2NsYXNzTmFtZTpmPyJPVF9tdXRlIE9UX2FjdGl2ZSI6Ik9UX211dGUifSxvbkNyZWF0ZTpmdW5jdGlvbihhKXtiPWQuYmluZCh0aGlzKTsKYS5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsYiwhMSl9LmJpbmQodGhpcyksb25EZXN0cm95OmZ1bmN0aW9uKGEpe2I9bnVsbDthLnJlbW92ZUV2ZW50TGlzdGVuZXIoImNsaWNrIixiLCExKX0uYmluZCh0aGlzKX0pfX0pKHdpbmRvdyk7CihmdW5jdGlvbigpe09ULkNocm9tZS5NaWNWb2x1bWU9ZnVuY3Rpb24oZyl7dmFyIGIsZj1nLm11dGVkfHwhMSxhO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCJkb21FbGVtZW50Iix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGF9LHNldDpmdW5jdGlvbihiKXthPWJ9fSk7dmFyIGQ9ZnVuY3Rpb24oKXsoZj0hZik/KE9ULiQuYWRkQ2xhc3MoYSwiYWN0aXZlIiksdGhpcy5wYXJlbnQudHJpZ2dlcigibXV0ZWQiLHRoaXMpKTooT1QuJC5yZW1vdmVDbGFzcyhhLCJhY3RpdmUiKSx0aGlzLnBhcmVudC50cmlnZ2VyKCJ1bm11dGVkIix0aGlzKSk7cmV0dXJuITF9O09ULkNocm9tZS5CZWhhdmlvdXIuV2lkZ2V0KHRoaXMse21vZGU6Zy5tb2RlLG5vZGVOYW1lOiJidXR0b24iLGh0bWxDb250ZW50OiJNdXRlIixodG1sQXR0cmlidXRlczp7Y2xhc3NOYW1lOiJPVF9taWMtdm9sdW1lIn0sb25DcmVhdGU6ZnVuY3Rpb24oYSl7Yj1kLmJpbmQodGhpcyk7YS5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsCmIsITEpfS5iaW5kKHRoaXMpLG9uRGVzdHJveTpmdW5jdGlvbihhKXtiPW51bGw7YS5yZW1vdmVFdmVudExpc3RlbmVyKCJjbGljayIsYiwhMSl9LmJpbmQodGhpcyl9KX19KSh3aW5kb3cpOwooZnVuY3Rpb24oKXtPVC5DaHJvbWUuU2V0dGluZ3NQYW5lbEJ1dHRvbj1mdW5jdGlvbihnKXt2YXIgYixmPWZ1bmN0aW9uKCl7dGhpcy5wYXJlbnQudHJpZ2dlcigiU2V0dGluZ3NQYW5lbDpvcGVuIix0aGlzKTtyZXR1cm4hMX0sYTtPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywiZG9tRWxlbWVudCIse2dldDpmdW5jdGlvbigpe3JldHVybiBhfSxzZXQ6ZnVuY3Rpb24oYil7YT1ifX0pO09ULkNocm9tZS5CZWhhdmlvdXIuV2lkZ2V0KHRoaXMse21vZGU6Zy5tb2RlLG5vZGVOYW1lOiJidXR0b24iLGh0bWxDb250ZW50OiJTZXR0aW5ncyIsaHRtbEF0dHJpYnV0ZXM6e2NsYXNzTmFtZToiT1Rfc2V0dGluZ3MtcGFuZWwifSxvbkNyZWF0ZTpmdW5jdGlvbihhKXtiPWYuYmluZCh0aGlzKTthLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIixiLCExKX0uYmluZCh0aGlzKSxvbkRlc3Ryb3k6ZnVuY3Rpb24oYSl7Yj1udWxsO2EucmVtb3ZlRXZlbnRMaXN0ZW5lcigiY2xpY2siLGIsITEpfS5iaW5kKHRoaXMpfSl9fSkod2luZG93KTsKKGZ1bmN0aW9uKCl7T1QuQ2hyb21lLlNldHRpbmdzUGFuZWw9ZnVuY3Rpb24oZyl7aWYoZy5zdHJlYW0pe3ZhciBiPWcuc3RyZWFtLGY7T2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsImRvbUVsZW1lbnQiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gZn0sc2V0OmZ1bmN0aW9uKGEpe2Y9YX19KTt2YXIgYT1mdW5jdGlvbigpe3ZhciBhPWIuZ2V0VmlkZW9UcmFja3MoKS5sZW5ndGg/Yi5nZXRWaWRlb1RyYWNrcygpWzBdLmxhYmVsOiJOb25lIixlPWIuZ2V0QXVkaW9UcmFja3MoKS5sZW5ndGg/Yi5nZXRBdWRpb1RyYWNrcygpWzBdLmxhYmVsOiJOb25lIjtmLmlubmVySFRNTD0iPGRsPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZHQ+Q2FtPC9kdD4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRkPiIrYSsiPC9kZD4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGR0Pk1pYzwvZHQ+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkZD4iKwplKyI8L2RkPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGw+IjthPU9ULiQuY3JlYXRlQnV0dG9uKCJDbG9zZSIse2NsYXNzTmFtZToiT1RfY2xvc2UifSx7Y2xpY2s6ZC5iaW5kKHRoaXMpfSk7Zi5hcHBlbmRDaGlsZChhKX0sZD1mdW5jdGlvbigpe3RoaXMucGFyZW50LnRyaWdnZXIoIlNldHRpbmdzUGFuZWw6Y2xvc2UiLHRoaXMpO3JldHVybiExfTtPVC5DaHJvbWUuQmVoYXZpb3VyLldpZGdldCh0aGlzLHttb2RlOmcubW9kZSxub2RlTmFtZToic2VjdGlvbiIsaHRtbENvbnRlbnQ6IlNldHRpbmdzIixodG1sQXR0cmlidXRlczp7Y2xhc3NOYW1lOiJPVF9zZXR0aW5ncy1wYW5lbCJ9LG9uQ3JlYXRlOmEuYmluZCh0aGlzKSxvblNob3c6ZnVuY3Rpb24oKXthLmNhbGwodGhpcyl9LmJpbmQodGhpcyl9KX19fSkod2luZG93KTsKKGZ1bmN0aW9uKCl7T1QuQ2hyb21lLk9wZW5Ub2tCdXR0b249ZnVuY3Rpb24oZyl7dmFyIGI7dGhpcy5fX2RlZmluZUdldHRlcl9fKCJkb21FbGVtZW50IixmdW5jdGlvbigpe3JldHVybiBifSk7dGhpcy5fX2RlZmluZVNldHRlcl9fKCJkb21FbGVtZW50IixmdW5jdGlvbihmKXtiPWZ9KTtPVC5DaHJvbWUuQmVoYXZpb3VyLldpZGdldCh0aGlzLHttb2RlOmc/Zy5tb2RlOm51bGwsbm9kZU5hbWU6InNwYW4iLGh0bWxDb250ZW50OiJPcGVuVG9rIixodG1sQXR0cmlidXRlczp7Y2xhc3NOYW1lOiJPVF9vcGVudG9rIn19KX19KSh3aW5kb3cpOwooZnVuY3Rpb24oKXtPVC5TdHlsYWJsZUNvbXBvbmVudD1mdW5jdGlvbihiLGYpe2lmKCFiLnRyaWdnZXIpdGhyb3cgRXJyb3IoIk9ULlN0eWxhYmxlQ29tcG9uZW50IGlzIGRlcGVuZGVudCBvbiB0aGUgbWl4aW4gT1QuJC5ldmVudGluZy4gRW5zdXJlIHRoYXQgdGhpcyBpcyBpbmNsdWRlZCBpbiB0aGUgb2JqZWN0IGJlZm9yZSBTdHlsYWJsZUNvbXBvbmVudC4iKTt2YXIgYT1uZXcgZyhmLGZ1bmN0aW9uKGEsYyxlKXtlP2IudHJpZ2dlcigic3R5bGVWYWx1ZUNoYW5nZWQiLGEsYyxlKTpiLnRyaWdnZXIoInN0eWxlVmFsdWVDaGFuZ2VkIixhLGMpfSk7Yi5nZXRTdHlsZT1mdW5jdGlvbihiKXtyZXR1cm4gYS5nZXQoYil9O2Iuc2V0U3R5bGU9ZnVuY3Rpb24oYixjLGUpeyJzdHJpbmciIT09dHlwZW9mIGI/YS5zZXRBbGwoYixlKTphLnNldChiLGMpO3JldHVybiB0aGlzfX07dmFyIGc9ZnVuY3Rpb24oYixmKXt2YXIgYT0ic2hvd01pY0J1dHRvbiBzaG93U3BlYWtlckJ1dHRvbiBzaG93U2V0dGluZ3NCdXR0b24gc2hvd0NhbWVyYVRvZ2dsZUJ1dHRvbiBuYW1lRGlzcGxheU1vZGUgYnV0dG9uRGlzcGxheU1vZGUgc2hvd1NhdmVCdXR0b24gc2hvd1JlY29yZEJ1dHRvbiBzaG93UmVjb3JkU3RvcEJ1dHRvbiBzaG93UmVSZWNvcmRCdXR0b24gc2hvd1BhdXNlQnV0dG9uIHNob3dQbGF5QnV0dG9uIHNob3dQbGF5U3RvcEJ1dHRvbiBzaG93U3RvcEJ1dHRvbiBiYWNrZ3JvdW5kSW1hZ2VVUkkgc2hvd0NvbnRyb2xQYW5lbCBzaG93UmVjb3JkQ291bnRlciBzaG93UGxheUNvdW50ZXIgc2hvd0NvbnRyb2xCYXIgc2hvd1ByZXZpZXdUaW1lIi5zcGxpdCgiICIpLApkPXtidXR0b25EaXNwbGF5TW9kZTpbImF1dG8iLCJvZmYiLCJvbiJdLG5hbWVEaXNwbGF5TW9kZTpbImF1dG8iLCJvZmYiLCJvbiJdLHNob3dTZXR0aW5nc0J1dHRvbjpbITAsITFdLHNob3dNaWNCdXR0b246WyEwLCExXSxzaG93Q2FtZXJhVG9nZ2xlQnV0dG9uOlshMCwhMV0sc2hvd1NhdmVCdXR0b246WyEwLCExXSxiYWNrZ3JvdW5kSW1hZ2VVUkk6bnVsbCxzaG93Q29udHJvbEJhcjpbITAsITFdLHNob3dQbGF5Q291bnRlcjpbITAsITFdLHNob3dSZWNvcmRDb3VudGVyOlshMCwhMV0sc2hvd1ByZXZpZXdUaW1lOlshMCwhMV19LGM9e30sZT1mdW5jdGlvbihhLGIpe3JldHVybiJiYWNrZ3JvdW5kSW1hZ2VVUkkiPT09YXx8ZC5oYXNPd25Qcm9wZXJ0eShhKSYmLTEhPT1kW2FdLmluZGV4T2YoYil9LGg9ZnVuY3Rpb24oYSl7c3dpdGNoKGEpe2Nhc2UgInRydWUiOnJldHVybiEwO2Nhc2UgImZhbHNlIjpyZXR1cm4hMTtkZWZhdWx0OnJldHVybiBhfX07dGhpcy5nZXRBbGw9ZnVuY3Rpb24oKXt2YXIgYj0KT1QuJC5jbG9uZShjKSxkO2ZvcihkIGluIGIpMD5hLmluZGV4T2YoZCkmJmRlbGV0ZSBiW2RdO3JldHVybiBifTt0aGlzLmdldD1mdW5jdGlvbihhKXtyZXR1cm4gYT9jW2FdOnRoaXMuZ2V0QWxsKCl9O3RoaXMuc2V0QWxsPWZ1bmN0aW9uKGEsYil7dmFyIGQsZyxtO2ZvcihtIGluIGEpZz1oKGFbbV0pLGUobSxnKT8oZD1jW21dLGchPT1kJiYoY1ttXT1nLGJ8fGYobSxnLGQpKSk6T1Qud2FybigiU3R5bGUuc2V0QWxsOjpJbnZhbGlkIHN0eWxlIHByb3BlcnR5IHBhc3NlZCAiK20rIiA6ICIrZyk7cmV0dXJuIHRoaXN9O3RoaXMuc2V0PWZ1bmN0aW9uKGEsYil7T1QuZGVidWcoIlB1Ymxpc2hlci5zZXRTdHlsZTogIithLnRvU3RyaW5nKCkpO3ZhciBkPWgoYiksZztpZighZShhLGQpKXJldHVybiBPVC53YXJuKCJTdHlsZS5zZXQ6OkludmFsaWQgc3R5bGUgcHJvcGVydHkgcGFzc2VkICIrYSsiIDogIitkKSx0aGlzO2c9Y1thXTtkIT09ZyYmKGNbYV09ZCxmKGEsYixnKSk7cmV0dXJuIHRoaXN9OwpiJiZ0aGlzLnNldEFsbChiLCEwKX19KSh3aW5kb3cpOyhmdW5jdGlvbigpe09ULk1pY3JvcGhvbmU9ZnVuY3Rpb24oZyxiKXt2YXIgZixhPTUwO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCJtdXRlZCIse2dldDpmdW5jdGlvbigpe3JldHVybiBmfSxzZXQ6ZnVuY3Rpb24oYSl7aWYoZiE9PWEpe2Y9YTtmb3IodmFyIGE9Zy5nZXRBdWRpb1RyYWNrcygpLGI9MCxlPWEubGVuZ3RoO2I8ZTsrK2IpYVtiXS5lbmFibGVkPSFmfX19KTtPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywiZ2FpbiIse2dldDpmdW5jdGlvbigpe3JldHVybiBhfSxzZXQ6ZnVuY3Rpb24oYil7T1Qud2FybigiT1QuTWljcm9waG9uZS5nYWluIElTIE5PVCBZRVQgSU1QTEVNRU5URUQiKTthPWJ9fSk7dGhpcy5tdXRlZD12b2lkIDAhPT1iPyEwPT09YjpnLmdldEF1ZGlvVHJhY2tzKCkubGVuZ3RoPyFnLmdldEF1ZGlvVHJhY2tzKClbMF0uZW5hYmxlZDohMX19KSh3aW5kb3cpOwooZnVuY3Rpb24oKXtPVC5nZW5lcmF0ZVNpbXBsZVN0YXRlTWFjaGluZT1mdW5jdGlvbihnLGIsZil7dmFyIGE9Yi5zbGljZSgpLGQ9T1QuJC5jbG9uZShmKTtyZXR1cm4gZnVuY3Rpb24oYil7ZnVuY3Rpb24gZShhLGQpe2Ioe21lc3NhZ2U6YSxuZXdTdGF0ZTpkLGN1cnJlbnRTdGF0ZTpmLHByZXZpb3VzU3RhdGU6aX0pfXZhciBmPWcsaT1udWxsO3RoaXMuc2V0PWZ1bmN0aW9uKGIpe3ZhciBjOy0xIT09YS5pbmRleE9mKGIpP2RbZl0mJi0xIT09ZFtmXS5pbmRleE9mKGIpP2M9ITA6KGUoIiciK2YrIicgY2Fubm90IHRyYW5zaXRpb24gdG8gJyIrYisiJyIsYiksYz0hMSk6KGUoIiciK2IrIicgaXMgbm90IGEgdmFsaWQgc3RhdGUiLGIpLGM9ITEpO2MmJihpPWYsZj1iKX07T2JqZWN0LmRlZmluZVByb3BlcnRpZXModGhpcyx7Y3VycmVudDp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGZ9fSxzdWJzY3JpYmluZzp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIlN1YnNjcmliaW5nIj09PWZ9fX0pfX19KSh3aW5kb3cpOwooZnVuY3Rpb24oKXtPVC5TdWJzY3JpYmluZ1N0YXRlPU9ULmdlbmVyYXRlU2ltcGxlU3RhdGVNYWNoaW5lKCJOb3RTdWJzY3JpYmluZyIsIk5vdFN1YnNjcmliaW5nIEluaXQgQ29ubmVjdGluZ1RvUGVlciBCaW5kaW5nUmVtb3RlU3RyZWFtIFN1YnNjcmliaW5nIEZhaWxlZCIuc3BsaXQoIiAiKSx7Tm90U3Vic2NyaWJpbmc6WyJOb3RTdWJzY3JpYmluZyIsIkluaXQiXSxJbml0OlsiTm90U3Vic2NyaWJpbmciLCJDb25uZWN0aW5nVG9QZWVyIiwiQmluZGluZ1JlbW90ZVN0cmVhbSJdLENvbm5lY3RpbmdUb1BlZXI6WyJOb3RTdWJzY3JpYmluZyIsIkJpbmRpbmdSZW1vdGVTdHJlYW0iLCJGYWlsZWQiXSxCaW5kaW5nUmVtb3RlU3RyZWFtOlsiTm90U3Vic2NyaWJpbmciLCJTdWJzY3JpYmluZyIsIkZhaWxlZCJdLFN1YnNjcmliaW5nOlsiTm90U3Vic2NyaWJpbmciLCJGYWlsZWQiXSxGYWlsZWQ6W119KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoT1QuU3Vic2NyaWJpbmdTdGF0ZS5wcm90b3R5cGUsCiJhdHRlbXB0aW5nVG9TdWJzY3JpYmUiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4tMSE9PVsiSW5pdCIsIkNvbm5lY3RpbmdUb1BlZXIiLCJCaW5kaW5nUmVtb3RlU3RyZWFtIl0uaW5kZXhPZih0aGlzLmN1cnJlbnQpfX0pfSkod2luZG93KTsKKGZ1bmN0aW9uKCl7T1QuUHVibGlzaGluZ1N0YXRlPU9ULmdlbmVyYXRlU2ltcGxlU3RhdGVNYWNoaW5lKCJOb3RQdWJsaXNoaW5nIiwiTm90UHVibGlzaGluZyBHZXRVc2VyTWVkaWEgQmluZGluZ01lZGlhIE1lZGlhQm91bmQgUHVibGlzaGluZ1RvU2Vzc2lvbiBQdWJsaXNoaW5nIEZhaWxlZCIuc3BsaXQoIiAiKSx7Tm90UHVibGlzaGluZzpbIk5vdFB1Ymxpc2hpbmciLCJHZXRVc2VyTWVkaWEiXSxHZXRVc2VyTWVkaWE6WyJCaW5kaW5nTWVkaWEiLCJGYWlsZWQiLCJOb3RQdWJsaXNoaW5nIl0sQmluZGluZ01lZGlhOlsiTWVkaWFCb3VuZCIsIkZhaWxlZCIsIk5vdFB1Ymxpc2hpbmciXSxNZWRpYUJvdW5kOlsiTm90UHVibGlzaGluZyIsIlB1Ymxpc2hpbmdUb1Nlc3Npb24iLCJGYWlsZWQiXSxQdWJsaXNoaW5nVG9TZXNzaW9uOlsiTm90UHVibGlzaGluZyIsIlB1Ymxpc2hpbmciLCJGYWlsZWQiXSxQdWJsaXNoaW5nOlsiTm90UHVibGlzaGluZyIsIk1lZGlhQm91bmQiLCJGYWlsZWQiXSwKRmFpbGVkOltdfSk7T2JqZWN0LmRlZmluZVByb3BlcnRpZXMoT1QuUHVibGlzaGluZ1N0YXRlLnByb3RvdHlwZSx7YXR0ZW1wdGluZ1RvUHVibGlzaDp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuLTEhPT1bIkdldFVzZXJNZWRpYSIsIkJpbmRpbmdNZWRpYSIsIk1lZGlhQm91bmQiLCJQdWJsaXNoaW5nVG9TZXNzaW9uIl0uaW5kZXhPZih0aGlzLmN1cnJlbnQpfX0scHVibGlzaGluZzp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIlB1Ymxpc2hpbmciPT09dGhpcy5jdXJyZW50fX19KX0pKHdpbmRvdyk7CihmdW5jdGlvbigpe3ZhciBnPXthdWRpbzohMCx2aWRlbzohMH07T1QuUHVibGlzaGVyPWZ1bmN0aW9uKCl7aWYoT1QuY2hlY2tTeXN0ZW1SZXF1aXJlbWVudHMoKSl7dmFyIGI9T1QuUHVibGlzaGVyLm5leHRJZCgpLGYsYSxkLGMsZSxoLGk9e30saz0hMSxqLGwsbSxwLG49bmV3IE9ULkFuYWx5dGljcyxyPXt9LHE9e3RpbWVTdGFtcDpPVC4kLm5vdygpfSxvO09ULiQuZXZlbnRpbmcodGhpcyk7T1QuU3R5bGFibGVDb21wb25lbnQodGhpcyx7c2hvd01pY0J1dHRvbjohMCxzaG93U2V0dGluZ3NCdXR0b246ITAsc2hvd0NhbWVyYVRvZ2dsZUJ1dHRvbjohMCxuYW1lRGlzcGxheU1vZGU6ImF1dG8iLGJ1dHRvbkRpc3BsYXlNb2RlOiJhdXRvIixiYWNrZ3JvdW5kSW1hZ2VVUkk6bnVsbH0pO3ZhciBzPWZ1bmN0aW9uKGEsZCxlLGYpe24ubG9nRXZlbnQoe2FjdGlvbjphLHZhcmlhdGlvbjpkLHBheWxvYWRfdHlwZTplLHBheWxvYWQ6ZixzZXNzaW9uX2lkOmg/aC5zZXNzaW9uSWQ6bnVsbCwKY29ubmVjdGlvbl9pZDpoJiZoLmNvbm5lY3RlZD9oLmNvbm5lY3Rpb24uY29ubmVjdGlvbklkOm51bGwscGFydG5lcl9pZDpoP2guYXBpS2V5Ok9ULkFQSUtFWSxzdHJlYW1JZDpjP2MuaWQ6bnVsbCx3aWRnZXRfaWQ6Yix3aWRnZXRfdHlwZToiUHVibGlzaGVyIn0pfSx4PWZ1bmN0aW9uKGEpe3ZhciBkPXt3aWRnZXRfdHlwZToiUHVibGlzaGVyIixzdHJlYW1fdHlwZToiV2ViUlRDIixzZXNzaW9uSWQ6aD9oLnNlc3Npb25JZDpudWxsLGNvbm5lY3Rpb25JZDpoJiZoLmNvbm5lY3RlZD9oLmNvbm5lY3Rpb24uY29ubmVjdGlvbklkOm51bGwscGFydG5lcklkOmg/aC5hcGlLZXk6T1QuQVBJS0VZLHN0cmVhbUlkOmM/Yy5pZDpudWxsLHdpZGdldElkOmIsdmVyc2lvbjpPVC5wcm9wZXJ0aWVzLnZlcnNpb24sbWVkaWFfc2VydmVyX25hbWU6aD9oLnNlc3Npb25JbmZvLm1lc3NhZ2luZ1NlcnZlcjpudWxsLHAycEZsYWc6aD9oLnNlc3Npb25JbmZvLnAycEVuYWJsZWQ6ITEsZHVyYXRpb246KG5ldyBEYXRlKS5nZXRUaW1lKCktCmwuZ2V0VGltZSgpLHJlbW90ZV9jb25uZWN0aW9uX2lkOmF9O2lbYV0uZ2V0U3RhdHMocSxmdW5jdGlvbihhKXtpZihhKWZvcihzdGF0X2luZGV4IGluIGEpZFtzdGF0X2luZGV4XT1hW3N0YXRfaW5kZXhdO24ubG9nUU9TKGQpfSl9LHY9ZnVuY3Rpb24oKXtPVC5kZWJ1ZygiT1QuUHVibGlzaGVyLm9uTG9hZGVkIik7cygicHVibGlzaCIsIlN1Y2Nlc3MiLCJzdHJlYW1UeXBlIiwiV2ViUlRDIik7by5zZXQoIk1lZGlhQm91bmQiKTthLmxvYWRpbmc9ITE7az0hMDtwPShuZXcgT1QuQ2hyb21lKHtwYXJlbnQ6YS5kb21FbGVtZW50fSkpLnNldCh7bmFtZTpuZXcgT1QuQ2hyb21lLk5hbWVQYW5lbCh7bmFtZTpqLm5hbWUsbW9kZTp0aGlzLmdldFN0eWxlKCJuYW1lRGlzcGxheU1vZGUiKX0pLG11dGVCdXR0b246bmV3IE9ULkNocm9tZS5NdXRlQnV0dG9uKHttdXRlZDohMT09PWoucHVibGlzaEF1ZGlvLG1vZGU6Sy5jYWxsKHRoaXMsdGhpcy5nZXRTdHlsZSgic2hvd01pY0J1dHRvbiIpKX0pLApvcGVudG9rQnV0dG9uOm5ldyBPVC5DaHJvbWUuT3BlblRva0J1dHRvbn0pLm9uKHttdXRlZDp0aGlzLnB1Ymxpc2hBdWRpby5iaW5kKHRoaXMsITEpLHVubXV0ZWQ6dGhpcy5wdWJsaXNoQXVkaW8uYmluZCh0aGlzLCEwKX0pO3RoaXMudHJpZ2dlcigiaW5pdFN1Y2Nlc3MiLHRoaXMpO3RoaXMudHJpZ2dlcigibG9hZGVkIix0aGlzKX0seT1mdW5jdGlvbihhKXtzKCJwdWJsaXNoIiwiRmFpbHVyZSIsInJlYXNvbiIsIlB1Ymxpc2hlciBQZWVyQ29ubmVjdGlvbiBFcnJvcjogIithKTtvLnNldCgiRmFpbGVkIik7dGhpcy50cmlnZ2VyKCJwdWJsaXNoRXJyb3IiLCJQdWJsaXNoZXIgUGVlckNvbm5lY3Rpb24gRXJyb3I6ICIrYSk7T1QuaGFuZGxlSnNFeGNlcHRpb24oIlB1Ymxpc2hlciBQZWVyQ29ubmVjdGlvbiBFcnJvcjogIithLE9ULkV4Y2VwdGlvbkNvZGVzLlAyUF9DT05ORUNUSU9OX0ZBSUxFRCx7c2Vzc2lvbjpoLHRhcmdldDp0aGlzfSl9LEI9ZnVuY3Rpb24oYil7T1QuZGVidWcoIk9ULlB1Ymxpc2hlci5vblN0cmVhbUF2YWlsYWJsZSIpOwpvLnNldCgiQmluZGluZ01lZGlhIik7ZSYmKGUuc3RvcCgpLGU9bnVsbCk7ZT1iO209bmV3IE9ULk1pY3JvcGhvbmUoZSwhai5wdWJsaXNoQXVkaW8pO3RoaXMucHVibGlzaFZpZGVvKGoucHVibGlzaFZpZGVvKTt0aGlzLmRpc3BhdGNoRXZlbnQobmV3IE9ULkV2ZW50KE9ULkV2ZW50Lm5hbWVzLkFDQ0VTU19BTExPV0VELCExKSk7ZD1uZXcgT1QuVmlkZW9FbGVtZW50KHthdHRyaWJ1dGVzOnttdXRlZDohMH19KTtkLm9uKHtzdHJlYW1Cb3VuZDp2LGxvYWRFcnJvcjp5LGVycm9yOkF9LHRoaXMpLmJpbmRUb1N0cmVhbShlKTthLnZpZGVvPWR9LHo9ZnVuY3Rpb24oYil7T1QuZXJyb3IoIk9ULlB1Ymxpc2hlci5vblN0cmVhbUF2YWlsYWJsZUVycm9yICIrYi5uYW1lKyI6ICIrYi5tZXNzYWdlKTtvLnNldCgiRmFpbGVkIik7dGhpcy50cmlnZ2VyKCJwdWJsaXNoRXJyb3IiLGIubWVzc2FnZSk7YSYmYS5kZXN0cm95KCk7cygicHVibGlzaCIsIkZhaWx1cmUiLCJyZWFzb24iLCJQdWJsaXNoZXIgZmFpbGVkIHRvIGFjY2VzcyBjYW1lcmEvbWljOiAiKwpiLm1lc3NhZ2UpO09ULmhhbmRsZUpzRXhjZXB0aW9uKCJQdWJsaXNoZXIgZmFpbGVkIHRvIGFjY2VzcyBjYW1lcmEvbWljOiAiK2IubWVzc2FnZSwyRTMse3Nlc3Npb246aCx0YXJnZXQ6dGhpc30pfSx3PWZ1bmN0aW9uKGIpe09ULmVycm9yKCJPVC5QdWJsaXNoZXIub25TdHJlYW1BdmFpbGFibGVFcnJvciBQZXJtaXNzaW9uIERlbmllZCIpO28uc2V0KCJGYWlsZWQiKTt0aGlzLnRyaWdnZXIoInB1Ymxpc2hFcnJvciIsYi5tZXNzYWdlKTtzKCJwdWJsaXNoIiwiRmFpbHVyZSIsInJlYXNvbiIsIlB1Ymxpc2hlciBBY2Nlc3MgRGVuaWVkOiBQZXJtaXNzaW9uIERlbmllZCIpO3ZhciBjPW5ldyBPVC5FdmVudChPVC5FdmVudC5uYW1lcy5BQ0NFU1NfREVOSUVEKTt0aGlzLmRpc3BhdGNoRXZlbnQoYyxmdW5jdGlvbigpeyFjLmlzRGVmYXVsdFByZXZlbnRlZCgpJiZhJiZhLmRlc3Ryb3koKX0pfSxEPWZ1bmN0aW9uKCl7cygiYWNjZXNzRGlhbG9nIiwiT3BlbmVkIiwiIiwiIik7dGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBPVC5FdmVudChPVC5FdmVudC5uYW1lcy5BQ0NFU1NfRElBTE9HX09QRU5FRCwKITEpKX0sQz1mdW5jdGlvbigpe3MoImFjY2Vzc0RpYWxvZyIsIkNsb3NlZCIsIiIsIiIpO3RoaXMuZGlzcGF0Y2hFdmVudChuZXcgT1QuRXZlbnQoT1QuRXZlbnQubmFtZXMuQUNDRVNTX0RJQUxPR19DTE9TRUQsITEpKX0sQT1mdW5jdGlvbihhLGIpe09ULmVycm9yKCJPVC5QdWJsaXNoZXIub25WaWRlb0Vycm9yIik7dmFyIGM9YisoYT8iICgiK2ErIikiOiIiKTtzKCJzdHJlYW0iLG51bGwsInJlYXNvbiIsIlB1Ymxpc2hlciB3aGlsZSBwbGF5aW5nIHN0cmVhbTogIitjKTtvLnNldCgiRmFpbGVkIik7by5hdHRlbXB0aW5nVG9QdWJsaXNoP3RoaXMudHJpZ2dlcigicHVibGlzaEVycm9yIixjKTp0aGlzLnRyaWdnZXIoImVycm9yIixjKTtPVC5oYW5kbGVKc0V4Y2VwdGlvbigiUHVibGlzaGVyIGVycm9yIHBsYXlpbmcgc3RyZWFtOiAiK2MsMkUzLHtzZXNzaW9uOmgsdGFyZ2V0OnRoaXN9KX0sRT1mdW5jdGlvbihhKXtPVC5kZWJ1ZygiT1QuU3Vic2NyaWJlciBoYXMgYmVlbiBkaXNjb25uZWN0ZWQgZnJvbSB0aGUgUHVibGlzaGVyJ3MgUGVlckNvbm5lY3Rpb24iKTsKdGhpcy5jbGVhbnVwU3Vic2NyaWJlcihhLnJlbW90ZUNvbm5lY3Rpb24uaWQpfSxJPWZ1bmN0aW9uKGEsYixjKXtzKCJwdWJsaXNoIiwiRmFpbHVyZSIsInJlYXNvbnxoYXNSZWxheUNhbmRpZGF0ZXMiLFsiUHVibGlzaGVyIFBlZXJDb25uZWN0aW9uIHdpdGggY29ubmVjdGlvbiAiK2MucmVtb3RlQ29ubmVjdGlvbi5pZCsiIGZhaWxlZDogIitiLGMuaGFzUmVsYXlDYW5kaWRhdGVzXS5qb2luKCJ8IikpO09ULmhhbmRsZUpzRXhjZXB0aW9uKCJQdWJsaXNoZXIgUGVlckNvbm5lY3Rpb24gRXJyb3I6ICIrYiwyRTMse3Nlc3Npb246aCx0YXJnZXQ6dGhpc30pO2NsZWFySW50ZXJ2YWwocltjLnJlbW90ZUNvbm5lY3Rpb24uaWRdKTtkZWxldGUgcltjLnJlbW90ZUNvbm5lY3Rpb24uaWRdO2RlbGV0ZSBpW2MucmVtb3RlQ29ubmVjdGlvbi5pZF19LEo9ZnVuY3Rpb24oYSl7dmFyIGI9aVthLmlkXTtpZighYil7dmFyIGQ9T1QuJC5ub3coKTtzKCJjcmVhdGVQZWVyQ29ubmVjdGlvbiIsIkF0dGVtcHQiLAoiIiwiIik7YS5vbigiZGVzdHJveWVkIix0aGlzLmNsZWFudXBTdWJzY3JpYmVyLmJpbmQodGhpcyxhLmlkKSk7Yj1pW2EuaWRdPW5ldyBPVC5QdWJsaXNoZXJQZWVyQ29ubmVjdGlvbihhLGgsYyxlKTtiLm9uKHtjb25uZWN0ZWQ6ZnVuY3Rpb24oKXtzKCJjcmVhdGVQZWVyQ29ubmVjdGlvbiIsIlN1Y2Nlc3MiLCJwY2N8aGFzUmVsYXlDYW5kaWRhdGVzIixbcGFyc2VJbnQoT1QuJC5ub3coKS1kLDEwKSxiLmhhc1JlbGF5Q2FuZGlkYXRlc10uam9pbigifCIpKTtyW2EuaWRdPXNldEludGVydmFsKGZ1bmN0aW9uKCl7eChhLmlkKX0sM0U0KX0sZGlzY29ubmVjdGVkOkUsZXJyb3I6SX0sdGhpcyk7Yi5pbml0KCl9cmV0dXJuIGJ9LEs9ZnVuY3Rpb24oYSl7aWYoITE9PT1hKXJldHVybiJvZmYiO2E9dGhpcy5nZXRTdHlsZSgiYnV0dG9uRGlzcGxheU1vZGUiKTtyZXR1cm4hMT09PWE/Im9uIjphfSxGPWZ1bmN0aW9uKCl7cCYmKHAuZGVzdHJveSgpLHA9bnVsbCk7dGhpcy5kaXNjb25uZWN0KCk7Cm09bnVsbDtkJiYoZC5kZXN0cm95KCksZD1udWxsKTtlJiYoZS5zdG9wKCksZT1udWxsKTthJiYoYS5kZXN0cm95KCksYT1udWxsKTt0aGlzLnNlc3Npb24mJnRoaXMuXy51bnB1Ymxpc2hGcm9tU2Vzc2lvbih0aGlzLnNlc3Npb24pO2Zvcih2YXIgYiBpbiByKWNsZWFySW50ZXJ2YWwocltiXSksZGVsZXRlIHJbYl07Yz1mPW51bGw7az0hMTtfcHJvcGVydGllcz1oPW51bGw7by5zZXQoIk5vdFB1Ymxpc2hpbmciKX0uYmluZCh0aGlzKTt0aGlzLnB1Ymxpc2g9ZnVuY3Rpb24oYixjKXtPVC5kZWJ1ZygiT1QuUHVibGlzaGVyOiBwdWJsaXNoIik7KG8uYXR0ZW1wdGluZ1RvUHVibGlzaHx8by5wdWJsaXNoaW5nKSYmRigpO28uc2V0KCJHZXRVc2VyTWVkaWEiKTtqPU9ULiQuZGVmYXVsdHMoY3x8e30se3B1Ymxpc2hBdWRpbzohMCxwdWJsaXNoVmlkZW86ITAsbWlycm9yOiEwfSk7ai5jb25zdHJhaW50cz1PVC4kLmRlZmF1bHRzKGouY29uc3RyYWludHN8fHt9LGcpO2ouc3R5bGUmJnRoaXMuc2V0U3R5bGUoai5zdHlsZSwKbnVsbCwhMCk7ai5uYW1lJiYoai5uYW1lPWoubmFtZS50b1N0cmluZygpKTtqLmNsYXNzTmFtZXM9Ik9UX3Jvb3QgT1RfcHVibGlzaGVyIjtPVC5vbkxvYWQoZnVuY3Rpb24oKXthPW5ldyBPVC5XaWRnZXRWaWV3KGIsaik7Zj1hLmRvbUlkO09ULiQuZ2V0VXNlck1lZGlhKGouY29uc3RyYWludHMsQi5iaW5kKHRoaXMpLHouYmluZCh0aGlzKSxELmJpbmQodGhpcyksQy5iaW5kKHRoaXMpLHcuYmluZCh0aGlzKSl9LHRoaXMpO3JldHVybiB0aGlzfTt0aGlzLnB1Ymxpc2hBdWRpbz1mdW5jdGlvbihhKXtqLnB1Ymxpc2hBdWRpbz1hO20mJihtLm11dGVkPSFhKTtoJiZjJiZoLl8ubW9kaWZ5U3RyZWFtKGMuc3RyZWFtSWQsImhhc0F1ZGlvIixhKTtyZXR1cm4gdGhpc307dGhpcy5wdWJsaXNoVmlkZW89ZnVuY3Rpb24oYil7dmFyIGQ9ai5wdWJsaXNoVmlkZW87ai5wdWJsaXNoVmlkZW89YjtoJiYoYyYmai5wdWJsaXNoVmlkZW8hPT1kKSYmaC5fLm1vZGlmeVN0cmVhbShjLnN0cmVhbUlkLAoiaGFzVmlkZW8iLGIpO2lmKGUpZm9yKHZhciBkPWUuZ2V0VmlkZW9UcmFja3MoKSxmPTAsZz1kLmxlbmd0aDtmPGc7KytmKWRbZl0uZW5hYmxlZD1iO2EmJihhLnNob3dQb3N0ZXI9IWIpO3JldHVybiB0aGlzfTt0aGlzLnJlY29yZFFPUz1mdW5jdGlvbigpe2Zvcih2YXIgYSBpbiBpKXgoYSl9O3RoaXMuZGVzdHJveT1mdW5jdGlvbihhLGIpe0YoKTshMCE9PWImJnRoaXMuZGlzcGF0Y2hFdmVudChuZXcgT1QuRGVzdHJveWVkRXZlbnQoT1QuRXZlbnQubmFtZXMuUFVCTElTSEVSX0RFU1RST1lFRCx0aGlzLGEpLHRoaXMub2ZmLmJpbmQodGhpcykpO3JldHVybiB0aGlzfTt0aGlzLmRpc2Nvbm5lY3Q9ZnVuY3Rpb24oKXtmb3IodmFyIGEgaW4gaSl0aGlzLmNsZWFudXBTdWJzY3JpYmVyKGEpfTt0aGlzLmNsZWFudXBTdWJzY3JpYmVyPWZ1bmN0aW9uKGEpe3ZhciBiPWlbYV07Y2xlYXJJbnRlcnZhbChyW2FdKTtkZWxldGUgclthXTtiJiYoYi5kZXN0cm95KCksZGVsZXRlIGlbYV0scygiZGlzY29ubmVjdCIsCiJQZWVyQ29ubmVjdGlvbiIsInN1YnNjcmliZXJDb25uZWN0aW9uIixhKSl9O3RoaXMucHJvY2Vzc01lc3NhZ2U9ZnVuY3Rpb24oYSxiLGMpe09ULmRlYnVnKCJPVC5QdWJsaXNoZXIucHJvY2Vzc01lc3NhZ2U6IFJlY2VpdmVkICIrYSsiIGZyb20gIitiLmlkKTtPVC5kZWJ1ZyhjKTtzd2l0Y2goYSl7Y2FzZSBPVC5SYXB0b3IuQWN0aW9ucy5VTlNVQlNDUklCRTp0aGlzLmNsZWFudXBTdWJzY3JpYmVyKGIuaWQpO2JyZWFrO2RlZmF1bHQ6Si5jYWxsKHRoaXMsYikucHJvY2Vzc01lc3NhZ2UoYSxjKX19O3RoaXMuZ2V0SW1nRGF0YT1mdW5jdGlvbigpe3JldHVybiFrPyhPVC5lcnJvcigiT1QuUHVibGlzaGVyLmdldEltZ0RhdGE6IENhbm5vdCBnZXRJbWdEYXRhIGJlZm9yZSB0aGUgUHVibGlzaGVyIGlzIHB1Ymxpc2hpbmcuIiksbnVsbCk6ZC5pbWdEYXRhfTt0aGlzLl89e3B1Ymxpc2hUb1Nlc3Npb246ZnVuY3Rpb24oYSl7dGhpcy5zZXNzaW9uPWE7dmFyIGI9ZnVuY3Rpb24oKXt0aGlzLnNlc3Npb24mJgooby5zZXQoIlB1Ymxpc2hpbmdUb1Nlc3Npb24iKSxhLl8uY3JlYXRlU3RyZWFtKHRoaXMuZ3VpZCxqJiZqLm5hbWU/ai5uYW1lOiIiLE9ULlZpZGVvT3JpZW50YXRpb24uUk9UQVRFRF9OT1JNQUwsZC52aWRlb1dpZHRoLGQudmlkZW9IZWlnaHQsai5wdWJsaXNoQXVkaW8sai5wdWJsaXNoVmlkZW8pKX07aWYoayliLmNhbGwodGhpcyk7ZWxzZSB0aGlzLm9uKCJpbml0U3VjY2VzcyIsYix0aGlzKTtzKCJwdWJsaXNoIiwiQXR0ZW1wdCIsInN0cmVhbVR5cGUiLCJXZWJSVEMiKTtyZXR1cm4gdGhpc30uYmluZCh0aGlzKSx1bnB1Ymxpc2hGcm9tU2Vzc2lvbjpmdW5jdGlvbihhKXtpZighdGhpcy5zZXNzaW9ufHxhLmlkIT09dGhpcy5zZXNzaW9uLmlkKXJldHVybiBPVC53YXJuKCJUaGUgcHVibGlzaGVyICIrdGhpcy5ndWlkKyIgaXMgdHJ5aW5nIHRvIHVucHVibGlzaCBmcm9tIGEgc2Vzc2lvbiAiK2EuaWQrIiBpdCBpcyBub3QgYXR0YWNoZWQgdG8iKSx0aGlzO2EuY29ubmVjdGVkJiYKdGhpcy5zdHJlYW0mJmEuXy5kZXN0cm95U3RyZWFtKHRoaXMuc3RyZWFtLmlkKTt0aGlzLmRpc2Nvbm5lY3QoKTt0aGlzLnNlc3Npb249bnVsbDtvLnNldCgiTWVkaWFCb3VuZCIpO3MoInVucHVibGlzaCIsIlN1Y2Nlc3MiLCJzZXNzaW9uSWQiLGEuaWQpO3JldHVybiB0aGlzfS5iaW5kKHRoaXMpLHN0cmVhbVJlZ2lzdGVyZWRIYW5kbGVyOmZ1bmN0aW9uKGEpe3RoaXMuc3RyZWFtPWE7dGhpcy5zdHJlYW0ub24oImRlc3Ryb3llZCIsdGhpcy5kaXNjb25uZWN0LHRoaXMpO2E9YjtiPU9ULlB1Ymxpc2hlci5uZXh0SWQoKTthJiZ0aGlzLnRyaWdnZXIoImlkVXBkYXRlZCIsYSxiKTtvLnNldCgiUHVibGlzaGluZyIpO2w9bmV3IERhdGU7dGhpcy50cmlnZ2VyKCJwdWJsaXNoU3VjY2VzcyIpfS5iaW5kKHRoaXMpfTt0aGlzLmRldGVjdERldmljZXM9ZnVuY3Rpb24oKXtPVC53YXJuKCJGaXhtZTogSGF2ZW4ndCBpbXBsZW1lbnRlZCBkZXRlY3REZXZpY2VzIil9O3RoaXMuZGV0ZWN0TWljQWN0aXZpdHk9CmZ1bmN0aW9uKCl7T1Qud2FybigiRml4bWU6IEhhdmVuJ3QgaW1wbGVtZW50ZWQgZGV0ZWN0TWljQWN0aXZpdHkiKX07dGhpcy5nZXRFY2hvQ2FuY2VsbGF0aW9uTW9kZT1mdW5jdGlvbigpe09ULndhcm4oIkZpeG1lOiBIYXZlbid0IGltcGxlbWVudGVkIGdldEVjaG9DYW5jZWxsYXRpb25Nb2RlIik7cmV0dXJuImZ1bGxEdXBsZXgifTt0aGlzLnNldE1pY3JvcGhvbmVHYWluPWZ1bmN0aW9uKCl7T1Qud2FybigiRml4bWU6IEhhdmVuJ3QgaW1wbGVtZW50ZWQgc2V0TWljcm9waG9uZUdhaW4iKX07dGhpcy5nZXRNaWNyb3Bob25lR2Fpbj1mdW5jdGlvbigpe09ULndhcm4oIkZpeG1lOiBIYXZlbid0IGltcGxlbWVudGVkIGdldE1pY3JvcGhvbmVHYWluIik7cmV0dXJuIDAuNX07dGhpcy5zZXRDYW1lcmE9ZnVuY3Rpb24oKXtPVC53YXJuKCJGaXhtZTogSGF2ZW4ndCBpbXBsZW1lbnRlZCBzZXRDYW1lcmEiKX07dGhpcy5zZXRNaWNyb3Bob25lPWZ1bmN0aW9uKCl7T1Qud2FybigiRml4bWU6IEhhdmVuJ3QgaW1wbGVtZW50ZWQgc2V0TWljcm9waG9uZSIpfTsKT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGhpcyx7aWQ6e2dldDpmdW5jdGlvbigpe3JldHVybiBmfSxlbnVtZXJhYmxlOiEwfSxndWlkOntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gYn0sZW51bWVyYWJsZTohMH0sc3RyZWFtOntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gY30sc2V0OmZ1bmN0aW9uKGEpe2M9YX0sZW51bWVyYWJsZTohMH0sc3RyZWFtSWQ6e2dldDpmdW5jdGlvbigpe3JldHVybiFjP251bGw6Yy5pZH0sZW51bWVyYWJsZTohMH0sdGFyZ2V0RWxlbWVudDp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGQuZG9tRWxlbWVudH19LGRvbUlkOntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gZn19LHNlc3Npb246e2dldDpmdW5jdGlvbigpe3JldHVybiBofSxzZXQ6ZnVuY3Rpb24oYSl7aD1hfSxlbnVtZXJhYmxlOiEwfSxpc1dlYlJUQzp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuITB9fSxsb2FkaW5nOntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gYSYmYS5sb2FkaW5nfX19KTtPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcy5fLAoid2ViUnRjU3RyZWFtIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGV9fSk7dGhpcy5vbigic3R5bGVWYWx1ZUNoYW5nZWQiLGZ1bmN0aW9uKGEsYil7aWYocClzd2l0Y2goYSl7Y2FzZSAibmFtZURpc3BsYXlNb2RlIjpwLm5hbWUuc2V0RGlzcGxheU1vZGUoYil9fSx0aGlzKTtvPW5ldyBPVC5QdWJsaXNoaW5nU3RhdGUoZnVuY3Rpb24oYSl7T1QuZXJyb3IoIlB1Ymxpc2hlciBTdGF0ZSBDaGFuZ2UgRmFpbGVkOiAiLGEubWVzc2FnZSk7T1QuZGVidWcoYSl9KX1lbHNlIE9ULnVwZ3JhZGVTeXN0ZW1SZXF1aXJlbWVudHMoKX07T1QuUHVibGlzaGVyLm5leHRJZD1PVC4kLnV1aWR9KSh3aW5kb3cpOwooZnVuY3Rpb24oKXtPVC5TdWJzY3JpYmVyPWZ1bmN0aW9uKGcsYil7dmFyIGY9T1QuJC51dWlkKCksYT1nfHxmLGQsYyxlLGgsaSxrLGo9Yi5zZXNzaW9uLGwsbSxwLG49T1QuJC5jbG9uZShiKSxyPW5ldyBPVC5BbmFseXRpY3MscT01MCxvLHMseD17dGltZVN0YW1wOk9ULiQubm93KCl9O2lmKGope09ULiQuZXZlbnRpbmcodGhpcyk7T1QuU3R5bGFibGVDb21wb25lbnQodGhpcyx7bmFtZURpc3BsYXlNb2RlOiJhdXRvIixidXR0b25EaXNwbGF5TW9kZToiYXV0byIsYmFja2dyb3VuZEltYWdlVVJJOm51bGx9KTt2YXIgdj1mdW5jdGlvbihhLGIsYyxkKXtyLmxvZ0V2ZW50KHthY3Rpb246YSx2YXJpYXRpb246YixwYXlsb2FkX3R5cGU6YyxwYXlsb2FkOmQsc3RyZWFtX2lkOmg/aC5pZDpudWxsLHNlc3Npb25faWQ6aj9qLnNlc3Npb25JZDpudWxsLGNvbm5lY3Rpb25faWQ6aiYmai5jb25uZWN0ZWQ/ai5jb25uZWN0aW9uLmNvbm5lY3Rpb25JZDpudWxsLHBhcnRuZXJfaWQ6aiYmai5jb25uZWN0ZWQ/Cmouc2Vzc2lvbkluZm8ucGFydG5lcklkOm51bGwsd2lkZ2V0X2lkOmYsd2lkZ2V0X3R5cGU6IlN1YnNjcmliZXIifSl9LHk9ZnVuY3Rpb24oKXtpZihvLnN1YnNjcmliaW5nJiZqJiZqLmNvbm5lY3RlZCl7dmFyIGE9e3dpZGdldF90eXBlOiJTdWJzY3JpYmVyIixzdHJlYW1fdHlwZToiV2ViUlRDIixzZXNzaW9uX2lkOmo/ai5zZXNzaW9uSWQ6bnVsbCxjb25uZWN0aW9uSWQ6aj9qLmNvbm5lY3Rpb24uY29ubmVjdGlvbklkOm51bGwsbWVkaWFfc2VydmVyX25hbWU6aj9qLnNlc3Npb25JbmZvLm1lc3NhZ2luZ1NlcnZlcjpudWxsLHAycEZsYWc6aj9qLnNlc3Npb25JbmZvLnAycEVuYWJsZWQ6ITEscGFydG5lcl9pZDpqP2ouYXBpS2V5Om51bGwsc3RyZWFtX2lkOmguaWQsd2lkZ2V0X2lkOmYsdmVyc2lvbjpPVC5wcm9wZXJ0aWVzLnZlcnNpb24sZHVyYXRpb246cGFyc2VJbnQoT1QuJC5ub3coKS1sLDEwKSxyZW1vdGVfY29ubmVjdGlvbl9pZDpoLmNvbm5lY3Rpb24uY29ubmVjdGlvbklkfTsKay5nZXRTdGF0cyh4LGZ1bmN0aW9uKGIpe2lmKGIpZm9yKHN0YXRfaW5kZXggaW4gYilhW3N0YXRfaW5kZXhdPWJbc3RhdF9pbmRleF07ci5sb2dRT1MoYSl9KX19LEI9ZnVuY3Rpb24oKXshby5zdWJzY3JpYmluZyYmYyYmKE9ULmRlYnVnKCJPVC5TdWJzY3JpYmVyLm9uTG9hZGVkIiksby5zZXQoIlN1YnNjcmliaW5nIiksbD1PVC4kLm5vdygpLHYoImNyZWF0ZVBlZXJDb25uZWN0aW9uIiwiU3VjY2VzcyIsInBjY3xoYXNSZWxheUNhbmRpZGF0ZXMiLFtwYXJzZUludChsLW0sMTApLGsmJmsuaGFzUmVsYXlDYW5kaWRhdGVzXS5qb2luKCJ8IikpLHA9c2V0SW50ZXJ2YWwoeSwzRTQpLHMmJihzPW51bGwsdGhpcy5zdWJzY3JpYmVUb1ZpZGVvKCExKSksZC5sb2FkaW5nPSExLEUuY2FsbCh0aGlzKSx0aGlzLnRyaWdnZXIoInN1YnNjcmliZVN1Y2Nlc3MiLHRoaXMpLHRoaXMudHJpZ2dlcigibG9hZGVkIix0aGlzKSx2KCJzdWJzY3JpYmUiLCJTdWNjZXNzIiwic3RyZWFtSWQiLGguaWQpKX0sCno9ZnVuY3Rpb24oKXtPVC5kZWJ1ZygiT1QuU3Vic2NyaWJlciBoYXMgYmVlbiBkaXNjb25uZWN0ZWQgZnJvbSB0aGUgUHVibGlzaGVyJ3MgUGVlckNvbm5lY3Rpb24iKTtvLmF0dGVtcHRpbmdUb1N1YnNjcmliZT8oby5zZXQoIkZhaWxlZCIpLHRoaXMudHJpZ2dlcigic3Vic2NyaWJlRXJyb3IiLCJDbGllbnREaXNjb25uZWN0ZWQiKSk6by5zdWJzY3JpYmluZyYmby5zZXQoIkZhaWxlZCIpO3RoaXMuZGlzY29ubmVjdCgpfSx3PWZ1bmN0aW9uKGEsYil7by5hdHRlbXB0aW5nVG9TdWJzY3JpYmU/KHYoImNyZWF0ZVBlZXJDb25uZWN0aW9uIiwiRmFpbHVyZSIsInJlYXNvbnxoYXNSZWxheUNhbmRpZGF0ZXMiLFsiU3Vic2NyaWJlciBQZWVyQ29ubmVjdGlvbiBFcnJvcjogIitiLGsmJmsuaGFzUmVsYXlDYW5kaWRhdGVzXS5qb2luKCJ8IikpLG8uc2V0KCJGYWlsZWQiKSx0aGlzLnRyaWdnZXIoInN1YnNjcmliZUVycm9yIixiKSk6by5zdWJzY3JpYmluZyYmKG8uc2V0KCJGYWlsZWQiKSwKdGhpcy50cmlnZ2VyKCJlcnJvciIsYikpO3RoaXMuZGlzY29ubmVjdCgpO3YoInN1YnNjcmliZSIsIkZhaWx1cmUiLCJyZWFzb24iLCJTdWJzY3JpYmVyIFBlZXJDb25uZWN0aW9uIEVycm9yOiAiK2IpO09ULmhhbmRsZUpzRXhjZXB0aW9uKCJTdWJzY3JpYmVyIFBlZXJDb25uZWN0aW9uIEVycm9yOiAiK2IsT1QuRXhjZXB0aW9uQ29kZXMuUDJQX0NPTk5FQ1RJT05fRkFJTEVELHtzZXNzaW9uOmosdGFyZ2V0OnRoaXN9KTtkJiZkLmFkZEVycm9yKGIpfSxEPWZ1bmN0aW9uKGEpe09ULmRlYnVnKCJPVC5TdWJzY3JpYmVyLm9uUmVtb3RlU3RyZWFtQWRkZWQiKTtvLnNldCgiQmluZGluZ1JlbW90ZVN0cmVhbSIpO3RoaXMuc3Vic2NyaWJlVG9BdWRpbyhuLnN1YnNjcmliZVRvQXVkaW8pO3ZhciBiPXM7dGhpcy5zdWJzY3JpYmVUb1ZpZGVvKG4uc3Vic2NyaWJlVG9WaWRlbyk7cz1iO2I9bmV3IE9ULlZpZGVvRWxlbWVudDtiLnNldEF1ZGlvVm9sdW1lKHEpO2Iub24oe3N0cmVhbUJvdW5kOkIsCmxvYWRFcnJvcjp3LGVycm9yOnd9LHRoaXMpO2IuYmluZFRvU3RyZWFtKGEpO2M9ZC52aWRlbz1iO2Mub3JpZW50YXRpb249e3dpZHRoOmgudmlkZW9EaW1lbnNpb25zLndpZHRoLGhlaWdodDpoLnZpZGVvRGltZW5zaW9ucy5oZWlnaHQsdmlkZW9PcmllbnRhdGlvbjpoLnZpZGVvRGltZW5zaW9ucy5vcmllbnRhdGlvbn07digiY3JlYXRlUGVlckNvbm5lY3Rpb24iLCJTdHJlYW1BZGRlZCIsIiIsIiIpO3RoaXMudHJpZ2dlcigic3RyZWFtQWRkZWQiLHRoaXMpfSxDPWZ1bmN0aW9uKGEpe09ULmRlYnVnKCJPVC5TdWJzY3JpYmVyLm9uU3RyZWFtUmVtb3ZlZCIpO2Muc3RyZWFtPT1hJiYoYy5kZXN0cm95KCksYz1udWxsKTt0aGlzLnRyaWdnZXIoInN0cmVhbVJlbW92ZWQiLHRoaXMpfSxBPWZ1bmN0aW9uKGEpe3N3aXRjaChhLmNoYW5nZWRQcm9wZXJ0eSl7Y2FzZSAib3JpZW50YXRpb24iOmMub3JpZW50YXRpb249e3dpZHRoOmgudmlkZW9EaW1lbnNpb25zLndpZHRoLGhlaWdodDpoLnZpZGVvRGltZW5zaW9ucy5oZWlnaHQsCnZpZGVvT3JpZW50YXRpb246aC52aWRlb0RpbWVuc2lvbnMub3JpZW50YXRpb259O2JyZWFrO2Nhc2UgImhhc1ZpZGVvIjpkJiYoZC5zaG93UG9zdGVyPSEoaC5oYXNWaWRlbyYmbi5zdWJzY3JpYmVUb1ZpZGVvKSl9fSxFPWZ1bmN0aW9uKCl7ZT0obmV3IE9ULkNocm9tZSh7cGFyZW50OmQuZG9tRWxlbWVudH0pKS5zZXQoe25hbWU6bmV3IE9ULkNocm9tZS5OYW1lUGFuZWwoe25hbWU6bi5uYW1lLG1vZGU6dGhpcy5nZXRTdHlsZSgibmFtZURpc3BsYXlNb2RlIil9KSxvcGVudG9rQnV0dG9uOm5ldyBPVC5DaHJvbWUuT3BlblRva0J1dHRvbn0pLm9uKHttdXRlZDpmdW5jdGlvbigpe30sdW5tdXRlZDpmdW5jdGlvbigpe319KX07dGhpcy5yZWNvcmRRT1M9ZnVuY3Rpb24oKXt5KCl9O3RoaXMuc3Vic2NyaWJlPWZ1bmN0aW9uKGIpe09ULmRlYnVnKCJPVC5TdWJzY3JpYmVyOiBzdWJzY3JpYmUgdG8gIitiLmlkKTtpZihvLnN1YnNjcmliaW5nKXJldHVybiBPVC5lcnJvcigiT1QuU3Vic2NyaWJlci5TdWJzY3JpYmU6IENhbm5vdCBzdWJzY3JpYmUsIGFscmVhZHkgc3Vic2NyaWJpbmcuIiksCiExO28uc2V0KCJJbml0Iik7aWYoIWIpcmV0dXJuIE9ULmVycm9yKCJPVC5TdWJzY3JpYmVyOiBObyBzdHJlYW0gcGFyYW1ldGVyLiIpLCExO2lmKGgpcmV0dXJuIE9ULmVycm9yKCJPVC5TdWJzY3JpYmVyOiBBbHJlYWR5IHN1YnNjcmliZWQiKSwhMTtoPWI7aC5vbih7dXBkYXRlZDpBLGRlc3Ryb3llZDp0aGlzLmRpc2Nvbm5lY3R9LHRoaXMpO2k9Yi5jb25uZWN0aW9uLmNvbm5lY3Rpb25JZDtuLm5hbWU9aC5uYW1lO24uY2xhc3NOYW1lcz0iT1Rfcm9vdCBPVF9zdWJzY3JpYmVyIjtuLnN0eWxlJiZ0aGlzLnNldFN0eWxlKG4uc3R5bGUsbnVsbCwhMCk7bi5hdWRpb1ZvbHVtZSYmdGhpcy5zZXRBdWRpb1ZvbHVtZShuLmF1ZGlvVm9sdW1lKTtuLnN1YnNjcmliZVRvQXVkaW89T1QuJC5jYXN0VG9Cb29sZWFuKG4uc3Vic2NyaWJlVG9BdWRpbywhMCk7bi5zdWJzY3JpYmVUb1ZpZGVvPU9ULiQuY2FzdFRvQm9vbGVhbihuLnN1YnNjcmliZVRvVmlkZW8sITApO2Q9bmV3IE9ULldpZGdldFZpZXcoZywKbik7YT1kLmRvbUlkOyFuLnN1YnNjcmliZVRvVmlkZW8mJiJDaHJvbWUiPT1PVC4kLmJyb3dzZXIoKSYmKHM9ITAsbi5zdWJzY3JpYmVUb1ZpZGVvPSEwKTttPU9ULiQubm93KCk7aC5jb25uZWN0aW9uLmlkIT09ai5jb25uZWN0aW9uLmlkPyh2KCJjcmVhdGVQZWVyQ29ubmVjdGlvbiIsIkF0dGVtcHQiLCIiLCIiKSxvLnNldCgiQ29ubmVjdGluZ1RvUGVlciIpLGs9bmV3IE9ULlN1YnNjcmliZXJQZWVyQ29ubmVjdGlvbihoLmNvbm5lY3Rpb24saixoLG4pLGsub24oe2Rpc2Nvbm5lY3RlZDp6LGVycm9yOncscmVtb3RlU3RyZWFtQWRkZWQ6RCxyZW1vdGVTdHJlYW1SZW1vdmVkOkN9LHRoaXMpLGsuaW5pdCgpKToodigiY3JlYXRlUGVlckNvbm5lY3Rpb24iLCJBdHRlbXB0IiwiIiwiIiksRC5jYWxsKHRoaXMsai5nZXRQdWJsaXNoZXJGb3JTdHJlYW0oaCkuXy53ZWJSdGNTdHJlYW0pKTt2KCJzdWJzY3JpYmUiLCJBdHRlbXB0Iiwic3RyZWFtSWQiLGguaWQpO3JldHVybiB0aGlzfTt0aGlzLmRlc3Ryb3k9CmZ1bmN0aW9uKGIsYyl7Y2xlYXJJbnRlcnZhbChwKTtwPW51bGw7dGhpcy5kaXNjb25uZWN0KCk7ZSYmKGUuZGVzdHJveSgpLGU9bnVsbCk7ZCYmKGQuZGVzdHJveSgpLGQ9bnVsbCk7aCYmIWguZGVzdHJveWVkJiZ2KCJ1bnN1YnNjcmliZSIsbnVsbCwic3RyZWFtSWQiLGguaWQpO249aj1oPWE9bnVsbDshMCE9PWMmJnRoaXMuZGlzcGF0Y2hFdmVudChuZXcgT1QuRGVzdHJveWVkRXZlbnQoT1QuRXZlbnQubmFtZXMuU1VCU0NSSUJFUl9ERVNUUk9ZRUQsdGhpcyxiKSx0aGlzLm9mZi5iaW5kKHRoaXMpKTtyZXR1cm4gdGhpc307dGhpcy5kaXNjb25uZWN0PWZ1bmN0aW9uKCl7by5zZXQoIk5vdFN1YnNjcmliaW5nIik7YyYmKGMuZGVzdHJveSgpLGM9bnVsbCk7ayYmKGsuZGVzdHJveSgpLGs9bnVsbCx2KCJkaXNjb25uZWN0IiwiUGVlckNvbm5lY3Rpb24iLCJzdHJlYW1JZCIsaC5pZCkpfTt0aGlzLnByb2Nlc3NNZXNzYWdlPWZ1bmN0aW9uKGEsYixjKXtPVC5kZWJ1ZygiT1QuU3Vic2NyaWJlci5wcm9jZXNzTWVzc2FnZTogUmVjZWl2ZWQgIisKYSsiIG1lc3NhZ2UgZnJvbSAiK2IuaWQpO09ULmRlYnVnKGMpO2khPWIuaWQmJihpPWIuaWQpO2smJmsucHJvY2Vzc01lc3NhZ2UoYSxjKX07dGhpcy51cGRhdGVRdWFsaXR5PWZ1bmN0aW9uKCl7dGhpcy5zdWJzY3JpYmVUb1ZpZGVvKCExKTt0aGlzLmRpc3BhdGNoRXZlbnQobmV3IE9ULkV2ZW50KCJ2aWRlb0Rpc2FibGVkIikpfTt0aGlzLmdldEltZ0RhdGE9ZnVuY3Rpb24oKXtyZXR1cm4hdGhpcy5zdWJzY3JpYmluZz8oT1QuZXJyb3IoIk9ULlN1YnNjcmliZXIuZ2V0SW1nRGF0YTogQ2Fubm90IGdldEltZ0RhdGEgYmVmb3JlIHRoZSBTdWJzY3JpYmVyIGlzIHN1YnNjcmliaW5nLiIpLG51bGwpOmMuaW1nRGF0YX07dGhpcy5zZXRBdWRpb1ZvbHVtZT1mdW5jdGlvbihhKXthPXBhcnNlSW50KGEsMTApO2lmKGlzTmFOKGEpKXJldHVybiBPVC5lcnJvcigiT1QuU3Vic2NyaWJlci5zZXRBdWRpb1ZvbHVtZTogdmFsdWUgc2hvdWxkIGJlIGFuIGludGVnZXIgYmV0d2VlbiAwIGFuZCAxMDAiKSwKdGhpcztxPU1hdGgubWF4KDAsTWF0aC5taW4oMTAwLGEpKTtxIT1hJiZPVC53YXJuKCJPVC5TdWJzY3JpYmVyLnNldEF1ZGlvVm9sdW1lOiB2YWx1ZSBzaG91bGQgYmUgYW4gaW50ZWdlciBiZXR3ZWVuIDAgYW5kIDEwMCIpO2MmJmMuc2V0QXVkaW9Wb2x1bWUocSk7cmV0dXJuIHRoaXN9O3RoaXMuZ2V0QXVkaW9Wb2x1bWU9ZnVuY3Rpb24oKXtyZXR1cm4gYz9jLmdldEF1ZGlvVm9sdW1lKCk6cX07dGhpcy5zdWJzY3JpYmVUb0F1ZGlvPWZ1bmN0aW9uKGEpe2E9T1QuJC5jYXN0VG9Cb29sZWFuKGEsITApO2smJihrLnN1YnNjcmliZVRvQXVkaW8oYSksaiYmKGgmJmEhPT1uLnN1YnNjcmliZVRvQXVkaW8pJiZqLl8ubW9kaWZ5U3Vic2NyaWJlcih0aGlzLCJoYXNBdWRpbyIsYSkpO24uc3Vic2NyaWJlVG9BdWRpbz1hO3JldHVybiB0aGlzfTt0aGlzLnN1YnNjcmliZVRvVmlkZW89ZnVuY3Rpb24oYSl7aWYocyYmITA9PWEpcz0hMTtlbHNlIHJldHVybiBhPU9ULiQuY2FzdFRvQm9vbGVhbihhLAohMCksZCYmKGQuc2hvd1Bvc3Rlcj0hKGEmJmguaGFzVmlkZW8pLGEmJmQudmlkZW8mJihkLmxvYWRpbmc9YSxkLnZpZGVvLndoZW5UaW1lSW5jcmVtZW50cyhmdW5jdGlvbigpe2QubG9hZGluZz0hMX0sdGhpcykpKSxrJiYoay5zdWJzY3JpYmVUb1ZpZGVvKGEpLGomJihoJiZhIT09bi5zdWJzY3JpYmVUb1ZpZGVvKSYmai5fLm1vZGlmeVN1YnNjcmliZXIodGhpcywiaGFzVmlkZW8iLGEpKSxuLnN1YnNjcmliZVRvVmlkZW89YSx0aGlzfTtPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0aGlzLHtpZDp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGF9LGVudW1lcmFibGU6ITB9LHdpZGdldElkOntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gZn19LHN0cmVhbTp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGh9LGVudW1lcmFibGU6ITB9LHN0cmVhbUlkOntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4haD9udWxsOmguaWR9LGVudW1lcmFibGU6ITB9LHRhcmdldEVsZW1lbnQ6e2dldDpmdW5jdGlvbigpe3JldHVybiBjPwpjLmRvbUVsZW1lbnQ6bnVsbH19LHN1YnNjcmliaW5nOntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gby5zdWJzY3JpYmluZ30sZW51bWVyYWJsZTohMH0saXNXZWJSVEM6e2dldDpmdW5jdGlvbigpe3JldHVybiEwfX0sbG9hZGluZzp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGQmJmQubG9hZGluZ319LHNlc3Npb246e2dldDpmdW5jdGlvbigpe3JldHVybiBqfX19KTt0aGlzLm9uKCJzdHlsZVZhbHVlQ2hhbmdlZCIsZnVuY3Rpb24oYSxiKXtpZihlKXN3aXRjaChhKXtjYXNlICJuYW1lRGlzcGxheU1vZGUiOmUubmFtZS5zZXREaXNwbGF5TW9kZShiKX19LHRoaXMpO289bmV3IE9ULlN1YnNjcmliaW5nU3RhdGUoZnVuY3Rpb24oYSl7T1QuZXJyb3IoIlN1YnNjcmliZXIgU3RhdGUgQ2hhbmdlIEZhaWxlZDogIixhLm1lc3NhZ2UpO09ULmRlYnVnKGEpfSl9ZWxzZSBPVC5oYW5kbGVKc0V4Y2VwdGlvbigiU3Vic2NyaWJlciBtdXN0IGJlIHBhc3NlZCBhIHNlc3Npb24gb3B0aW9uIiwyRTMse3Nlc3Npb246aiwKdGFyZ2V0OnRoaXN9KX19KSh3aW5kb3cpOwooZnVuY3Rpb24oKXtPVC5TZXNzaW9uSW5mbz1mdW5jdGlvbihiKXt2YXIgZj1udWxsO3RoaXMuc2Vzc2lvblN0YXR1cz10aGlzLnBhcnRuZXJJZD10aGlzLnNlc3Npb25JZD1udWxsO3RoaXMucDJwRW5hYmxlZD0hMTt0aGlzLmljZVNlcnZlcnM9dGhpcy5tZXNzYWdpbmdTZXJ2ZXI9bnVsbDtPVC5sb2coIlNlc3Npb25JbmZvIFJlc3BvbnNlOiIpO09ULmxvZyhiKTtiJiYoYi5kb2N1bWVudEVsZW1lbnQmJm51bGwhPT1iLmRvY3VtZW50RWxlbWVudC5maXJzdEVsZW1lbnRDaGlsZCkmJihmPWIuZG9jdW1lbnRFbGVtZW50LmZpcnN0RWxlbWVudENoaWxkKTtiPWYuZmlyc3RFbGVtZW50Q2hpbGQ7ZG8gc3dpdGNoKGIubG9jYWxOYW1lKXtjYXNlICJzZXNzaW9uX2lkIjp0aGlzLnNlc3Npb25JZD1iLnRleHRDb250ZW50O2JyZWFrO2Nhc2UgInBhcnRuZXJfaWQiOnRoaXMucGFydG5lcklkPWIudGV4dENvbnRlbnQ7YnJlYWs7Y2FzZSAic2Vzc2lvbl9zdGF0dXMiOnRoaXMuc2Vzc2lvblN0YXR1cz1iLnRleHRDb250ZW50OwpicmVhaztjYXNlICJtZXNzYWdpbmdfc2VydmVyX3VybCI6dGhpcy5tZXNzYWdpbmdTZXJ2ZXI9Yi50ZXh0Q29udGVudDticmVhaztjYXNlICJpY2Vfc2VydmVycyI6dGhpcy5pY2VTZXJ2ZXJzPW5vcm1hbGlzZUljZVNlcnZlcnMocGFyc2VJY2VTZXJ2ZXJzWG1sKGIuY2hpbGROb2RlcykpOzA9PT10aGlzLmljZVNlcnZlcnMubGVuZ3RoJiYoT1Qud2FybigiU2Vzc2lvbkluZm8gY29udGFpbmVkIG5vdCBJQ0UgU2VydmVycywgdXNpbmcgdGhlIGRlZmF1bHQiKSx0aGlzLmljZVNlcnZlcnM9W3t1cmw6InN0dW46c3R1bi5sLmdvb2dsZS5jb206MTkzMDIifV0pO2JyZWFrO2Nhc2UgInByb3BlcnRpZXMiOmlmKGY9Yi5maXJzdEVsZW1lbnRDaGlsZCl7ZG8gaWYoInAycCI9PT1mLmxvY2FsTmFtZSYmbnVsbCE9PWYuZmlyc3RFbGVtZW50Q2hpbGQpe3RoaXMucDJwRW5hYmxlZD0iZW5hYmxlZCI9PT1mLmZpcnN0RWxlbWVudENoaWxkLnRleHRDb250ZW50O2JyZWFrfXdoaWxlKGY9Zi5uZXh0RWxlbWVudFNpYmxpbmcpCn19d2hpbGUoYj1iLm5leHRFbGVtZW50U2libGluZyl9O09ULlNlc3Npb25JbmZvLmdldD1mdW5jdGlvbihiLGYsYSl7dmFyIGQ9T1QucHJvcGVydGllcy5hcGlVUkwrIi9zZXNzaW9uLyIrYi5pZCsiP2V4dGVuZGVkPXRydWUiLGM9T1QuJC5ub3coKTtiLmxvZ0V2ZW50KCJnZXRTZXNzaW9uSW5mbyIsIkF0dGVtcHQiLCJhcGlfdXJsIixPVC5wcm9wZXJ0aWVzLmFwaVVSTCk7T1QuJC5nZXRYTUwoZCx7aGVhZGVyczp7IlgtVEItVE9LRU4tQVVUSCI6Yi50b2tlbiwiWC1UQi1WRVJTSU9OIjoxfSxzdWNjZXNzOmZ1bmN0aW9uKGQpe2IubG9nRXZlbnQoIkluc3RydW1lbnRhdGlvbiIsbnVsbCwiZ3NpIixPVC4kLm5vdygpLWMpO3ZhciBnPXBhcnNlRXJyb3JGcm9tWE1MRG9jdW1lbnQoZCk7ITE9PT1nP29uR2V0UmVzcG9uc2VDYWxsYmFjayhiLGYsZCk6b25HZXRFcnJvckNhbGxiYWNrKGIsYSxnKX0sZXJyb3I6ZnVuY3Rpb24oYyl7b25HZXRFcnJvckNhbGxiYWNrKGIsYSxwYXJzZUVycm9yRnJvbVhNTERvY3VtZW50KGMudGFyZ2V0LnJlc3BvbnNlWE1MKSl9fSl9Owp2YXIgZz17fTtnWyI0MDQiXT1PVC5FeGNlcHRpb25Db2Rlcy5JTlZBTElEX1NFU1NJT05fSUQ7Z1siNDAzIl09T1QuRXhjZXB0aW9uQ29kZXMuQVVUSEVOVElDQVRJT05fRVJST1I7cGFyc2VFcnJvckZyb21YTUxEb2N1bWVudD1mdW5jdGlvbihiKXtpZihiJiZiLmRvY3VtZW50RWxlbWVudCYmbnVsbCE9PWIuZG9jdW1lbnRFbGVtZW50LmZpcnN0RWxlbWVudENoaWxkKXt2YXIgYj1iLmV2YWx1YXRlKCIvL2Vycm9yIixiLmRvY3VtZW50RWxlbWVudCxudWxsLFhQYXRoUmVzdWx0Lk9SREVSRURfTk9ERV9TTkFQU0hPVF9UWVBFLG51bGwpLGY9Yi5zbmFwc2hvdExlbmd0aDtpZigwPT09ZilyZXR1cm4hMTtmb3IoOzA8ZjspcmV0dXJuIGI9Yi5zbmFwc2hvdEl0ZW0oMCkse2NvZGU6Yi5nZXRBdHRyaWJ1dGUoImNvZGUiKSxtZXNzYWdlOmIuZmlyc3RFbGVtZW50Q2hpbGQuZ2V0QXR0cmlidXRlKCJtZXNzYWdlIil9fXJldHVybntjb2RlOm51bGwsbWVzc2FnZToiVW5rbm93biBlcnJvcjogZ2V0U2Vzc2lvbkluZm8gWE1MIHJlc3BvbnNlIHdhcyBiYWRseSBmb3JtZWQifX07Cm9uR2V0UmVzcG9uc2VDYWxsYmFjaz1mdW5jdGlvbihiLGYsYSl7Yi5sb2dFdmVudCgiZ2V0U2Vzc2lvbkluZm8iLCJTdWNjZXNzIiwiYXBpX3VybCIsT1QucHJvcGVydGllcy5hcGlVUkwpO2YobmV3IE9ULlNlc3Npb25JbmZvKGEpKX07b25HZXRFcnJvckNhbGxiYWNrPWZ1bmN0aW9uKGIsZixhKXtUQi5oYW5kbGVKc0V4Y2VwdGlvbigiVEIuU2Vzc2lvbkluZm9FcnJvciA6OiBVbmFibGUgdG8gZ2V0IHNlc3Npb24gaW5mbyAiK2EubWVzc2FnZSxnW2EuY29kZV0se3Nlc3Npb246Yn0pO2IubG9nRXZlbnQoImdldFNlc3Npb25JbmZvIiwiRmFpbHVyZSIsImVycm9yTWVzc2FnZSIsIlRCLlNlc3Npb25JbmZvRXJyb3IgOjogVW5hYmxlIHRvIGdldCBzZXNzaW9uIGluZm8gIithLm1lc3NhZ2UpO2YoYSxiKX07cGFyc2VJY2VTZXJ2ZXJzWG1sPWZ1bmN0aW9uKGIpe2Zvcih2YXIgZj1bXSxhLGQsYz0wLGU9Yi5sZW5ndGg7YzxlOysrYykiaWNlX3NlcnZlciI9PT1iW2NdLmxvY2FsTmFtZSYmCihkPWJbY10uYXR0cmlidXRlcyxhPXt1cmw6ZC5nZXROYW1lZEl0ZW0oInVybCIpLm5vZGVWYWx1ZX0sZC5nZXROYW1lZEl0ZW0oImNyZWRlbnRpYWwiKSYmZC5nZXROYW1lZEl0ZW0oImNyZWRlbnRpYWwiKS5ub2RlVmFsdWUubGVuZ3RoJiYoYS5jcmVkZW50aWFsPWQuZ2V0TmFtZWRJdGVtKCJjcmVkZW50aWFsIikubm9kZVZhbHVlKSxmLnB1c2goYSkpO3JldHVybiBmfTtub3JtYWxpc2VJY2VTZXJ2ZXJzPWZ1bmN0aW9uKGIpe3ZhciBmPW5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goLyhGaXJlZm94KVwvKFswLTldK1wuWzAtOV0rKS8pLGE9Zj9wYXJzZUZsb2F0KGZbMl0sMTApOnZvaWQgMCxkO3JldHVybiBiLm1hcChmdW5jdGlvbihiKXtpZigidHVybjoiIT09Yi51cmwudHJpbSgpLnN1YnN0cigwLDUpKXJldHVybiBiO2lmKG51bGwhPT1mKXtpZigyNT5hKXJldHVybnt1cmw6Yi51cmwucmVwbGFjZSgidHVybjoiLCJzdHVuOiIpfTsyNz5hJiYtMSE9PWIudXJsLmluZGV4T2YoIj8iKSYmCihiLnVybD1iLnVybC50cmltKCkuc3BsaXQoIj8iKVswXSl9ZD1iLnVybC50cmltKCkuc3BsaXQoL1s6QF0vKTtyZXR1cm57dXNlcm5hbWU6ZFsxXSxjcmVkZW50aWFsOmIuY3JlZGVudGlhbCx1cmw6ZFswXSsiOiIrZFsyXX19KX19KSh3aW5kb3cpOyhmdW5jdGlvbigpe09ULkNhcGFiaWxpdGllcz1mdW5jdGlvbihnKXt0aGlzLnB1Ymxpc2g9LTEhPT1nLmluZGV4T2YoInB1Ymxpc2giKT8xOjA7dGhpcy5zdWJzY3JpYmU9LTEhPT1nLmluZGV4T2YoInN1YnNjcmliZSIpPzE6MDt0aGlzLmZvcmNlVW5wdWJsaXNoPS0xIT09Zy5pbmRleE9mKCJmb3JjZXVucHVibGlzaCIpPzE6MDt0aGlzLmZvcmNlRGlzY29ubmVjdD0tMSE9PWcuaW5kZXhPZigiZm9yY2VkaXNjb25uZWN0Iik/MTowO3RoaXMuc3VwcG9ydHNXZWJSVEM9T1QuJC5zdXBwb3J0c1dlYlJUQygpPzE6MH19KSh3aW5kb3cpOwooZnVuY3Rpb24oKXt2YXIgZz1mdW5jdGlvbihiLGYsYSxkKXt2YXIgYyxlPXt9LGc9ZnVuY3Rpb24oKXtjbGVhclRpbWVvdXQoYyk7Yi5vZmYoImV4Y2VwdGlvbiIsaSl9LGk9ZnVuY3Rpb24oYSl7ZS5oYXNPd25Qcm9wZXJ0eShhLmNvZGUpJiZ0aGlzLmZhaWxlZChlW2EuY29kZV0pfTt0aGlzLmZhaWxzT25FeGNlcHRpb25Db2Rlcz1mdW5jdGlvbihhKXtlPWF9O3RoaXMuc3VjY2VlZGVkPWZ1bmN0aW9uKCl7ZygpO2NvbXBsZXRpb25IYW5kbGVyJiZPVC4kLmNhbGxBc3luYyhjb21wbGV0aW9uSGFuZGxlcixudWxsKX07dGhpcy5mYWlsZWQ9ZnVuY3Rpb24oYSl7ZygpO2NvbXBsZXRpb25IYW5kbGVyJiZPVC4kLmNhbGxBc3luYyhjb21wbGV0aW9uSGFuZGxlcixuZXcgT1QuRXJyb3IobnVsbCxhKSl9O2Iub24oImV4Y2VwdGlvbiIsaSx0aGlzKTtjPXNldFRpbWVvdXQoZnVuY3Rpb24oKXt0aGlzLmZhaWxlZChkJiZkLnRpbWVvdXRNZXNzYWdlP2QudGltZW91dE1lc3NhZ2U6IlRpbWVkIG91dCB3aGlsZSB3YWl0aW5nIGZvciB0aGUgc2VydmVyIHRvIHJlc3BvbmQuIil9LmJpbmQodGhpcyksCjNFNCl9O09ULlNlc3Npb249ZnVuY3Rpb24oYil7aWYoT1QuY2hlY2tTeXN0ZW1SZXF1aXJlbWVudHMoKSl7dmFyIGY9ITAsYSxkLGMsZT1PVC4kLnV1aWQoKSxoPW5ldyBPVC5BbmFseXRpY3MsaT17fSxrPXt9O09ULiQuZXZlbnRpbmcodGhpcyk7dmFyIGo9T1QuJC5zdGF0YWJsZSh0aGlzLFsiZGlzY29ubmVjdGVkIiwiY29ubmVjdGluZyIsImNvbm5lY3RlZCIsImRpc2Nvbm5lY3RpbmciXSwiZGlzY29ubmVjdGVkIik7dGhpcy5jb25uZWN0aW9ucz1uZXcgT1QuQ29sbGVjdGlvbjt0aGlzLnN0cmVhbXM9bmV3IE9ULkNvbGxlY3Rpb247dmFyIGw9ZnVuY3Rpb24oYSxiKXtqKCJkaXNjb25uZWN0ZWQiKTtPVC5lcnJvcihhKTt0aGlzLnRyaWdnZXIoInNlc3Npb25Db25uZWN0RmFpbGVkIixhKTtUQi5oYW5kbGVKc0V4Y2VwdGlvbihhLGJ8fE9ULkV4Y2VwdGlvbkNvZGVzLkNPTk5FQ1RfRkFJTEVELHtzZXNzaW9uOnRoaXN9KX0sbT1mdW5jdGlvbihhKXt2YXIgYj1hLnJlYXNvbjsibmV0d29ya1RpbWVkb3V0Ij09CmI/KGI9Im5ldHdvcmtEaXNjb25uZWN0ZWQiLHRoaXMubG9nRXZlbnQoIndlYlNvY2tldENvbm5lY3Rpb24iLCJUaW1lT3V0RGlzY29ubmVjdCIsInJlYXNvbiIsYS5yZWFzb24pKTp0aGlzLmxvZ0V2ZW50KCJ3ZWJTb2NrZXRDb25uZWN0aW9uIiwiRGlzY29ubmVjdGVkIiwicmVhc29uIixhLnJlYXNvbik7dmFyIGM9bmV3IE9ULlNlc3Npb25EaXNjb25uZWN0RXZlbnQoInNlc3Npb25EaXNjb25uZWN0ZWQiLGIpO3MuY2FsbCh0aGlzKTt4LmNhbGwodGhpcyk7YT1mdW5jdGlvbigpe2MuaXNEZWZhdWx0UHJldmVudGVkKCl8fHYuY2FsbCh0aGlzLGMucmVhc29uKX0uYmluZCh0aGlzKTt0aGlzLmRpc3BhdGNoRXZlbnQoYyxhKX0scD1mdW5jdGlvbihhKXthLmlkLm1hdGNoKC9ec3ltcGhvbnlcLi8pfHx0aGlzLmRpc3BhdGNoRXZlbnQobmV3IE9ULkNvbm5lY3Rpb25FdmVudChPVC5FdmVudC5uYW1lcy5DT05ORUNUSU9OX0NSRUFURUQsW2FdKSl9LG49ZnVuY3Rpb24oYSxiKXtpZighYS5pZC5tYXRjaCgvXnN5bXBob255XC4vKSYmCmEuaWQhPT1jLmlkKXtpZihpW2EuaWRdKXt2YXIgZD1pW2EuaWRdO2RlbGV0ZSBpW2EuaWRdOyJmb3JjZURpc2Nvbm5lY3RlZCIhPT1iJiZPVC53YXJuKCJFeHBlY3RlZCBhIGZvcmNlRGlzY29ubmVjdCBmb3IgY29ubmVjdGlvbiAiK2EuaWQrIiwgYnV0IGEgIitiKyIgd2FzIHJlY2VpdmVkIGluc3RlYWQuIik7ZC5zdWNjZWVkZWQoKX10aGlzLmRpc3BhdGNoRXZlbnQobmV3IE9ULkNvbm5lY3Rpb25FdmVudChPVC5FdmVudC5uYW1lcy5DT05ORUNUSU9OX0RFU1RST1lFRCxbYV0sYikpfX0scj1mdW5jdGlvbihhKXt0aGlzLmRpc3BhdGNoRXZlbnQobmV3IE9ULlN0cmVhbUV2ZW50KE9ULkV2ZW50Lm5hbWVzLlNUUkVBTV9DUkVBVEVELFthXSkpfSxxPWZ1bmN0aW9uKGEpe3ZhciBiPWEudGFyZ2V0LGM9YS5jaGFuZ2VkUHJvcGVydHksZD1hLm5ld1ZhbHVlOyJvcmllbnRhdGlvbiI9PT1jJiYoYz0idmlkZW9EaW1lbnNpb25zIixkPXt3aWR0aDpkLndpZHRoLGhlaWdodDpkLmhlaWdodH0pOwp0aGlzLmRpc3BhdGNoRXZlbnQobmV3IE9ULlN0cmVhbVByb3BlcnR5Q2hhbmdlZEV2ZW50KE9ULkV2ZW50Lm5hbWVzLlNUUkVBTV9QUk9QRVJUWV9DSEFOR0VELGIsYyxhLm9sZFZhbHVlLGQpKX0sbz1mdW5jdGlvbihhLGIpe2lmKGtbYS5pZF0pe3ZhciBjPWtbYS5pZF07ZGVsZXRlIGtbYS5pZF07ImZvcmNlVW5wdWJsaXNoZWQiIT09YiYmT1Qud2FybigiRXhwZWN0ZWQgYSBmb3JjZVVucHVibGlzaCBmb3Igc3RyZWFtICIrYS5pZCsiLCBidXQgYSAiK2IrIiBkZXN0cm95ZWQgd2FzIHJlY2VpdmVkIGluc3RlYWQuIik7Yy5zdWNjZWVkZWQoKX12YXIgZD1uZXcgT1QuU3RyZWFtRXZlbnQoInN0cmVhbURlc3Ryb3llZCIsW2FdLGIpLGM9ZnVuY3Rpb24oKXtpZighZC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSl7dmFyIGI9T1QucHVibGlzaGVycy53aGVyZSh7c3RyZWFtSWQ6YS5pZH0pWzBdO2ImJihiLl8udW5wdWJsaXNoRnJvbVNlc3Npb24odGhpcyksYi5kZXN0cm95KCkpO09ULnN1YnNjcmliZXJzLndoZXJlKHtzdHJlYW1JZDphLmlkfSkuZm9yRWFjaChmdW5jdGlvbihhKXthLnNlc3Npb24uaWQ9PT0KdGhpcy5pZCYmdGhpcy51bnN1YnNjcmliZShhKX0sdGhpcyl9fS5iaW5kKHRoaXMpO3RoaXMuZGlzcGF0Y2hFdmVudChkLGMpfSxzPWZ1bmN0aW9uKCl7ZD1hPW51bGw7aigiZGlzY29ubmVjdGVkIik7dGhpcy5jb25uZWN0aW9ucy5kZXN0cm95KCk7dGhpcy5zdHJlYW1zLmRlc3Ryb3koKX0seD1mdW5jdGlvbigpe09ULnB1Ymxpc2hlcnMud2hlcmUoe3Nlc3Npb246dGhpc30pLmZvckVhY2goZnVuY3Rpb24oYSl7YS5kaXNjb25uZWN0KCl9KTtPVC5zdWJzY3JpYmVycy53aGVyZSh7c2Vzc2lvbjp0aGlzfSkuZm9yRWFjaChmdW5jdGlvbihhKXthLmRpc2Nvbm5lY3QoKX0pfSx2PWZ1bmN0aW9uKGEpe09ULnB1Ymxpc2hlcnMud2hlcmUoe3Nlc3Npb246dGhpc30pLmZvckVhY2goZnVuY3Rpb24oYil7Yi5kZXN0cm95KGEpfSk7T1Quc3Vic2NyaWJlcnMud2hlcmUoe3Nlc3Npb246dGhpc30pLmZvckVhY2goZnVuY3Rpb24oYil7Yi5kZXN0cm95KGEpfSl9LHk9ZnVuY3Rpb24oKXtUQi5kZWJ1ZygiT1QuU2Vzc2lvbjogY29ubmVjdGluZyB0byBSYXB0b3IiKTsKYz1uZXcgT1QuUmFwdG9yLlNvY2tldChlLHRoaXMuc2Vzc2lvbkluZm8ubWVzc2FnaW5nU2VydmVyKTtjLmNvbm5lY3QoZCx0aGlzLnNlc3Npb25JbmZvLGZ1bmN0aW9uKGEsYil7YT9sLmNhbGwodGhpcyxhLnJlYXNvbixhLmNvZGUpOihPVC5kZWJ1ZygiT1QuU2Vzc2lvbjogUmVjZWl2ZWQgc2Vzc2lvbiBzdGF0ZSBmcm9tIFJhcHRvciIsYiksaigiY29ubmVjdGVkIiksdGhpcy5jb25uZWN0aW9uLm9uKCJkZXN0cm95ZWQiLG0sdGhpcyksdGhpcy5jb25uZWN0aW9ucy5vbih7YWRkOnAscmVtb3ZlOm59LHRoaXMpLHRoaXMuc3RyZWFtcy5vbih7YWRkOnIscmVtb3ZlOm8sdXBkYXRlOnF9LHRoaXMpLHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgT1QuU2Vzc2lvbkNvbm5lY3RFdmVudChPVC5FdmVudC5uYW1lcy5TRVNTSU9OX0NPTk5FQ1RFRCxiLmNvbm5lY3Rpb25zLGIuc3RyZWFtcyxiLmFyY2hpdmVzKSkpfS5iaW5kKHRoaXMpKX0sQj1mdW5jdGlvbigpe3RoaXMuaXMoImNvbm5lY3RpbmciKSYmCk9ULlNlc3Npb25JbmZvLmdldCh0aGlzLHouYmluZCh0aGlzKSxmdW5jdGlvbihhKXtsLmNhbGwodGhpcyxhLm1lc3NhZ2UrKGEuY29kZT8iICgiK2EuY29kZSsiKSI6IiIpKX0uYmluZCh0aGlzKSl9LHo9ZnVuY3Rpb24oYil7dGhpcy5pcygiY29ubmVjdGluZyIpJiYodGhpcy5zZXNzaW9uSW5mbz1iLHRoaXMuc2Vzc2lvbkluZm8ucGFydG5lcklkJiZ0aGlzLnNlc3Npb25JbmZvLnBhcnRuZXJJZCE9YT8oYT10aGlzLnNlc3Npb25JbmZvLnBhcnRuZXJJZCxsLmNhbGwodGhpcywiQXV0aGVudGljYXRpb24gRXJyb3I6IFRoZSBhcGlLZXkgcGFzc2VkIGludG8gdGhlIHNlc3Npb24uY29ubmVjdCBtZXRob2QgZG9lcyBub3QgbWF0Y2ggdGhlIGFwaUtleSBpbiB0aGUgdG9rZW4gb3Igc2Vzc2lvbiB5b3UgYXJlIHRyeWluZyB0byBjb25uZWN0IHRvLiIsT1QuRXhjZXB0aW9uQ29kZXMuQVVUSEVOVElDQVRJT05fRVJST1IpKTp5LmNhbGwodGhpcykpfTt0aGlzLmxvZ0V2ZW50PWZ1bmN0aW9uKGMsCmQsZixnKXtoLmxvZ0V2ZW50KHthY3Rpb246Yyx2YXJpYXRpb246ZCxwYXlsb2FkX3R5cGU6ZixwYXlsb2FkOmcsc2Vzc2lvbl9pZDpiLHBhcnRuZXJfaWQ6YSx3aWRnZXRfaWQ6ZSx3aWRnZXRfdHlwZToiQ29udHJvbGxlciJ9KX07dGhpcy5jb25uZWN0PWZ1bmN0aW9uKGIsYyxnKXt0aGlzLmlzKCJjb25uZWN0aW5nIiwiY29ubmVjdGVkIik/T1Qud2FybigiT1QuU2Vzc2lvbjogQ2Fubm90IGNvbm5lY3QsIHRoZSBzZXNzaW9uIGlzIGFscmVhZHkgIit0aGlzLnN0YXRlKToocy5jYWxsKHRoaXMpLGooImNvbm5lY3RpbmciKSxkPWMsZj9mPSExOmU9T1QuJC51dWlkKCksYT1iLnRvU3RyaW5nKCksMD09PU9ULkFQSUtFWS5sZW5ndGgmJihPVC5BUElLRVk9YSksZyYmT1QuJC5pc0Z1bmN0aW9uKGcpJiYodGhpcy5vbmNlKE9ULkV2ZW50Lm5hbWVzLlNFU1NJT05fQ09OTkVDVEVELGcuYmluZChudWxsLG51bGwpKSx0aGlzLm9uY2UoInNlc3Npb25Db25uZWN0RmFpbGVkIixnKSksQi5jYWxsKHRoaXMpKX07CnRoaXMuZGlzY29ubmVjdD1mdW5jdGlvbigpe2MmJmMuaXNOb3QoImRpc2Nvbm5lY3RlZCIpPyhqKCJkaXNjb25uZWN0aW5nIiksYy5kaXNjb25uZWN0KCkpOnMuY2FsbCh0aGlzKX07dGhpcy5kZXN0cm95PWZ1bmN0aW9uKCl7dGhpcy5zdHJlYW1zLmRlc3Ryb3koKTt0aGlzLmNvbm5lY3Rpb25zLmRlc3Ryb3koKTt0aGlzLmRpc2Nvbm5lY3QoKX07dGhpcy5wdWJsaXNoPWZ1bmN0aW9uKGQsZixnKXtpZih0aGlzLmlzTm90KCJjb25uZWN0ZWQiKSlyZXR1cm4gaC5sb2dFcnJvcigxMDEwLCJ0Yi5leGNlcHRpb24iLCJXZSBuZWVkIHRvIGJlIGNvbm5lY3RlZCBiZWZvcmUgeW91IGNhbiBwdWJsaXNoIixudWxsLHthY3Rpb246InB1Ymxpc2giLHZhcmlhdGlvbjoiRmFpbHVyZSIscGF5bG9hZF90eXBlOiJyZWFzb24iLHBheWxvYWQ6IldlIG5lZWQgdG8gYmUgY29ubmVjdGVkIGJlZm9yZSB5b3UgY2FuIHB1Ymxpc2giLHNlc3Npb25faWQ6YixwYXJ0bmVyX2lkOmEsd2lkZ2V0SWQ6ZSx3aWRnZXRfdHlwZToiQ29udHJvbGxlciJ9KSwKZyYmT1QuJC5pc0Z1bmN0aW9uKGcpJiZPVC4kLmNhbGxBc3luYyhnLG5ldyBPVC5FcnJvcihPVC5FeGNlcHRpb25Db2Rlcy5OT1RfQ09OTkVDVEVELCJXZSBuZWVkIHRvIGJlIGNvbm5lY3RlZCBiZWZvcmUgeW91IGNhbiBwdWJsaXNoIikpLG51bGw7aWYoIWN8fCFjLnBlcm1pdHRlZFRvKCJwdWJsaXNoIikpcmV0dXJuIHRoaXMubG9nRXZlbnQoInB1Ymxpc2giLCJGYWlsdXJlIiwicmVhc29uIiwiVGhpcyB0b2tlbiBkb2VzIG5vdCBhbGxvdyBwdWJsaXNoaW5nLiBUaGUgcm9sZSBtdXN0IGJlIGF0IGxlYXN0IGBwdWJsaXNoZXJgIHRvIGVuYWJsZSB0aGlzIGZ1bmN0aW9uYWxpdHkiKSxUQi5oYW5kbGVKc0V4Y2VwdGlvbigiVGhpcyB0b2tlbiBkb2VzIG5vdCBhbGxvdyBwdWJsaXNoaW5nLiBUaGUgcm9sZSBtdXN0IGJlIGF0IGxlYXN0IGBwdWJsaXNoZXJgIHRvIGVuYWJsZSB0aGlzIGZ1bmN0aW9uYWxpdHkiLE9ULkV4Y2VwdGlvbkNvZGVzLlVOQUJMRV9UT19QVUJMSVNILHtzZXNzaW9uOnRoaXN9KSwKbnVsbDtpZighZHx8InN0cmluZyI9PT10eXBlb2YgZHx8ZC5ub2RlVHlwZT09Tm9kZS5FTEVNRU5UX05PREUpZD1PVC5pbml0UHVibGlzaGVyKHRoaXMuYXBpS2V5LGQsZik7ZWxzZSBpZihkIGluc3RhbmNlb2YgT1QuUHVibGlzaGVyKSJzZXNzaW9uImluIGQmJihkLnNlc3Npb24mJiJzZXNzaW9uSWQiaW4gZC5zZXNzaW9uKSYmKGQuc2Vzc2lvbi5zZXNzaW9uSWQ9PT10aGlzLnNlc3Npb25JZD9PVC53YXJuKCJDYW5ub3QgcHVibGlzaCAiK2QuZ3VpZCsiIGFnYWluIHRvICIrdGhpcy5zZXNzaW9uSWQrIi4gUGxlYXNlIGNhbGwgc2Vzc2lvbi51bnB1Ymxpc2gocHVibGlzaGVyKSBmaXJzdC4iKTpPVC53YXJuKCJDYW5ub3QgcHVibGlzaCAiK2QuZ3VpZCsiIHB1Ymxpc2hlciBhbHJlYWR5IGF0dGFjaGVkIHRvICIrZC5zZXNzaW9uLnNlc3Npb25JZCsiLiBQbGVhc2UgY2FsbCBzZXNzaW9uLnVucHVibGlzaChwdWJsaXNoZXIpIGZpcnN0LiIpKTtlbHNlIHRocm93IGQ9IlNlc3Npb24ucHVibGlzaCA6OiBGaXJzdCBwYXJhbWV0ZXIgcGFzc2VkIGluIGlzIG5laXRoZXIgYSBzdHJpbmcgbm9yIGFuIGluc3RhbmNlIG9mIHRoZSBQdWJsaXNoZXIiLApPVC5lcnJvcihkKSxFcnJvcihkKTtpZihnJiZPVC4kLmlzRnVuY3Rpb24oZykpZC5vbmNlKCJwdWJsaXNoQ29tcGxldGUiLGcpO2QuXy5wdWJsaXNoVG9TZXNzaW9uKHRoaXMpO3JldHVybiBkfTt0aGlzLnVucHVibGlzaD1mdW5jdGlvbihhKXthP2EuXy51bnB1Ymxpc2hGcm9tU2Vzc2lvbih0aGlzKTpPVC5lcnJvcigiT1QuU2Vzc2lvbi51bnB1Ymxpc2g6IHB1Ymxpc2hlciBwYXJhbWV0ZXIgbWlzc2luZy4iKX07dGhpcy5zdWJzY3JpYmU9ZnVuY3Rpb24oYSxiLGMsZCl7aWYoIXRoaXMuY29ubmVjdGlvbnx8IXRoaXMuY29ubmVjdGlvbi5jb25uZWN0aW9uSWQpdGhyb3cgYT0iU2Vzc2lvbi5zdWJzY3JpYmUgOjogQ29ubmVjdGlvbiByZXF1aXJlZCB0byBzdWJzY3JpYmUiLE9ULmVycm9yKGEpLEVycm9yKGEpO2lmKCFhKXRocm93IGE9IlNlc3Npb24uc3Vic2NyaWJlIDo6IHN0cmVhbSBjYW5ub3QgYmUgbnVsbCIsT1QuZXJyb3IoYSksRXJyb3IoYSk7aWYoIWEuaGFzT3duUHJvcGVydHkoInN0cmVhbUlkIikpdGhyb3cgYT0KIlNlc3Npb24uc3Vic2NyaWJlIDo6IGludmFsaWQgc3RyZWFtIG9iamVjdCIsT1QuZXJyb3IoYSksRXJyb3IoYSk7Yj1uZXcgT1QuU3Vic2NyaWJlcihiLE9ULiQuZXh0ZW5kKGN8fHt9LHtzZXNzaW9uOnRoaXN9KSk7aWYoZCYmT1QuJC5pc0Z1bmN0aW9uKGQpKWIub25jZSgic3Vic2NyaWJlQ29tcGxldGUiLGQpO09ULnN1YnNjcmliZXJzLmFkZChiKTtiLnN1YnNjcmliZShhKTtyZXR1cm4gYn07dGhpcy51bnN1YnNjcmliZT1mdW5jdGlvbihhKXtpZighYSl0aHJvdyBPVC5lcnJvcigiT1QuU2Vzc2lvbi51bnN1YnNjcmliZTogc3Vic2NyaWJlciBjYW5ub3QgYmUgbnVsbCIpLEVycm9yKCJPVC5TZXNzaW9uLnVuc3Vic2NyaWJlOiBzdWJzY3JpYmVyIGNhbm5vdCBiZSBudWxsIik7aWYoIWEuc3RyZWFtKXJldHVybiBPVC53YXJuKCJPVC5TZXNzaW9uLnVuc3Vic2NyaWJlOjogdHJpZWQgdG8gdW5zdWJzY3JpYmUgYSBzdWJzY3JpYmVyIHRoYXQgaGFkIG5vIHN0cmVhbSIpLCExO09ULmRlYnVnKCJPVC5TZXNzaW9uLnVuc3Vic2NyaWJlOiBzdWJzY3JpYmVyICIrCmEuaWQpO2EuZGVzdHJveSgpO3JldHVybiEwfTt0aGlzLmdldFN1YnNjcmliZXJzRm9yU3RyZWFtPWZ1bmN0aW9uKGEpe3JldHVybiBPVC5zdWJzY3JpYmVycy53aGVyZSh7c3RyZWFtSWQ6YS5pZH0pfTt0aGlzLmdldFB1Ymxpc2hlckZvclN0cmVhbT1mdW5jdGlvbihhKXtpZigic3RyaW5nIiE9dHlwZW9mIGEpaWYoIm9iamVjdCI9PXR5cGVvZiBhJiZhJiZhLmhhc093blByb3BlcnR5KCJpZCIpKWE9YS5pZDtlbHNlIHRocm93IGVycm9yTXNnPSJTZXNzaW9uLmdldFB1Ymxpc2hlckZvclN0cmVhbSA6OiBJbnZhbGlkIHN0cmVhbSB0eXBlIixPVC5lcnJvcihlcnJvck1zZyksRXJyb3IoZXJyb3JNc2cpO3JldHVybiBPVC5wdWJsaXNoZXJzLndoZXJlKHtzdHJlYW1JZDphfSlbMF19O3RoaXMuXz17anNlcFN1YnNjcmliZTpmdW5jdGlvbihhLGIsZCl7cmV0dXJuIGMuanNlcFN1YnNjcmliZShhLmNvbm5lY3Rpb24uaWQsYS5pZCxiLGQpfS5iaW5kKHRoaXMpLGpzZXBVbnN1YnNjcmliZTpmdW5jdGlvbihhKXtyZXR1cm4gYy5qc2VwVW5zdWJzY3JpYmUoYS5jb25uZWN0aW9uLmlkLAphLmlkKX0uYmluZCh0aGlzKSxqc2VwQ2FuZGlkYXRlOmZ1bmN0aW9uKGEsYixkKXtyZXR1cm4gYy5qc2VwQ2FuZGlkYXRlKGEsYi5pZCxkKX0uYmluZCh0aGlzKSxqc2VwT2ZmZXI6ZnVuY3Rpb24oYSxiLGQpe3JldHVybiBjLmpzZXBPZmZlcihhLGIuaWQsZCl9LmJpbmQodGhpcyksanNlcEFuc3dlcjpmdW5jdGlvbihhLGIsZCl7cmV0dXJuIGMuanNlcEFuc3dlcihhLGIuaWQsZCl9LmJpbmQodGhpcyksZGlzcGF0Y2hTaWduYWw6ZnVuY3Rpb24oYSxiLGMpe2E9bmV3IE9ULlNpZ25hbEV2ZW50KGIsYyxhKTthLnRhcmdldD10aGlzO3RoaXMudHJpZ2dlcihPVC5FdmVudC5uYW1lcy5TSUdOQUwsYSk7YiYmdGhpcy5kaXNwYXRjaEV2ZW50KGEpfS5iaW5kKHRoaXMpLG1vZGlmeVN1YnNjcmliZXI6ZnVuY3Rpb24oYSxiLGQpe3JldHVybiBjLm1vZGlmeVN1YnNjcmliZXIoYSxiLGQpfS5iaW5kKHRoaXMpLGNyZWF0ZVN0cmVhbTpmdW5jdGlvbihhLGIsZCxlLGYsZyxoKXtjLmNyZWF0ZVN0cmVhbShhLApiLGQsZSxmLGcsaCl9LmJpbmQodGhpcyksbW9kaWZ5U3RyZWFtOmZ1bmN0aW9uKGEsYixkKXshYXx8IWJ8fHZvaWQgMD09PWQ/T1QuZXJyb3IoIk9ULlNlc3Npb24ubW9kaWZ5U3RyZWFtOiBtdXN0IHByb3ZpZGUgc3RyZWFtSWQsIGtleSBhbmQgdmFsdWUgdG8gbW9kaWZ5IGEgc3RyZWFtIHByb3BlcnR5LiIpOmMudXBkYXRlU3RyZWFtKGEsYixkKX0uYmluZCh0aGlzKSxkZXN0cm95U3RyZWFtOmZ1bmN0aW9uKGEpe2MuZGVzdHJveVN0cmVhbShhKX0uYmluZCh0aGlzKX07dGhpcy5zaWduYWw9ZnVuY3Rpb24oYSxiKXtjLnNpZ25hbChhLGIpfTt0aGlzLmZvcmNlRGlzY29ubmVjdD1mdW5jdGlvbihhLGIpe2lmKGMmJmMucGVybWl0dGVkVG8oImZvcmNlRGlzY29ubmVjdCIpKXt2YXIgZD0ic3RyaW5nIj09PXR5cGVvZiBhP2E6YS5pZDtpZihiKXt2YXIgZT1uZXcgZyh0aGlzLGIse3RpbWVvdXRNZXNzYWdlOiJUaW1lZCBvdXQgd2hpbGUgd2FpdGluZyBmb3IgY29ubmVjdGlvbiAiK2QrCiIgdG8gYmUgZm9yY2UgRGlzY29ubmVjdGVkLiJ9KTtlLmZhaWxzT25FeGNlcHRpb25Db2Rlcyh7MTUyMDoiVGhpcyB0b2tlbiBkb2VzIG5vdCBhbGxvdyBmb3JjZURpc2Nvbm5lY3QuIFRoZSByb2xlIG11c3QgYmUgYXQgbGVhc3QgYG1vZGVyYXRvcmAgdG8gZW5hYmxlIHRoaXMgZnVuY3Rpb25hbGl0eSJ9KTtpW2RdPWV9Yy5mb3JjZURpc2Nvbm5lY3QoZCl9ZWxzZSBiJiZPVC4kLmNhbGxBc3luYyhiLG5ldyBPVC5FcnJvcihudWxsLCJUaGlzIHRva2VuIGRvZXMgbm90IGFsbG93IGZvcmNlRGlzY29ubmVjdC4gVGhlIHJvbGUgbXVzdCBiZSBhdCBsZWFzdCBgbW9kZXJhdG9yYCB0byBlbmFibGUgdGhpcyBmdW5jdGlvbmFsaXR5IikpLFRCLmhhbmRsZUpzRXhjZXB0aW9uKCJUaGlzIHRva2VuIGRvZXMgbm90IGFsbG93IGZvcmNlRGlzY29ubmVjdC4gVGhlIHJvbGUgbXVzdCBiZSBhdCBsZWFzdCBgbW9kZXJhdG9yYCB0byBlbmFibGUgdGhpcyBmdW5jdGlvbmFsaXR5IixPVC5FeGNlcHRpb25Db2Rlcy5VTkFCTEVfVE9fRk9SQ0VfRElTQ09OTkVDVCwKe3Nlc3Npb246dGhpc30pfTt0aGlzLmZvcmNlVW5wdWJsaXNoPWZ1bmN0aW9uKGEsYil7aWYoYyYmYy5wZXJtaXR0ZWRUbygiZm9yY2VVbnB1Ymxpc2giKSl7dmFyIGQ9InN0cmluZyI9PT10eXBlb2YgYT90aGlzLnN0cmVhbXMuZ2V0KGEpOmE7aWYoYil7dmFyIGU9bmV3IGcodGhpcyxiLHt0aW1lb3V0TWVzc2FnZToiVGltZWQgb3V0IHdoaWxlIHdhaXRpbmcgZm9yIHN0cmVhbSAiK2QuaWQrIiB0byBiZSBmb3JjZSB1bnB1Ymxpc2hlZC4ifSk7ZS5mYWlsc09uRXhjZXB0aW9uQ29kZXMoezE1MzA6IlRoaXMgdG9rZW4gZG9lcyBub3QgYWxsb3cgZm9yY2VVbnB1Ymxpc2guIFRoZSByb2xlIG11c3QgYmUgYXQgbGVhc3QgYG1vZGVyYXRvcmAgdG8gZW5hYmxlIHRoaXMgZnVuY3Rpb25hbGl0eSJ9KTtrW2QuaWRdPWV9Yy5mb3JjZVVucHVibGlzaChkLmlkKX1lbHNlIGImJk9ULiQuY2FsbEFzeW5jKGIsbmV3IE9ULkVycm9yKG51bGwsIlRoaXMgdG9rZW4gZG9lcyBub3QgYWxsb3cgZm9yY2VVbnB1Ymxpc2guIFRoZSByb2xlIG11c3QgYmUgYXQgbGVhc3QgYG1vZGVyYXRvcmAgdG8gZW5hYmxlIHRoaXMgZnVuY3Rpb25hbGl0eSIpKSwKVEIuaGFuZGxlSnNFeGNlcHRpb24oIlRoaXMgdG9rZW4gZG9lcyBub3QgYWxsb3cgZm9yY2VVbnB1Ymxpc2guIFRoZSByb2xlIG11c3QgYmUgYXQgbGVhc3QgYG1vZGVyYXRvcmAgdG8gZW5hYmxlIHRoaXMgZnVuY3Rpb25hbGl0eSIsT1QuRXhjZXB0aW9uQ29kZXMuVU5BQkxFX1RPX0ZPUkNFX1VOUFVCTElTSCx7c2Vzc2lvbjp0aGlzfSl9O3RoaXMuZ2V0U3RhdGVNYW5hZ2VyPWZ1bmN0aW9uKCl7T1Qud2FybigiRml4bWU6IEhhdmUgbm90IGltcGxlbWVudGVkIHNlc3Npb24uZ2V0U3RhdGVNYW5hZ2VyIil9O09ULiQuZGVmaW5lR2V0dGVycyh0aGlzLHthcGlLZXk6ZnVuY3Rpb24oKXtyZXR1cm4gYX0sdG9rZW46ZnVuY3Rpb24oKXtyZXR1cm4gZH0sY29ubmVjdGVkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXMoImNvbm5lY3RlZCIpfSxjb25uZWN0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIGMmJmMuaWQ/dGhpcy5jb25uZWN0aW9ucy5nZXQoYy5pZCk6bnVsbH0sY2FwYWJpbGl0aWVzOmZ1bmN0aW9uKCl7cmV0dXJuIGM/CmMuY2FwYWJpbGl0aWVzOm5ldyBPVC5DYXBhYmlsaXRpZXMoW10pfSxzZXNzaW9uSWQ6ZnVuY3Rpb24oKXtyZXR1cm4gYn0saWQ6ZnVuY3Rpb24oKXtyZXR1cm4gYn19LCEwKX1lbHNlIE9ULnVwZ3JhZGVTeXN0ZW1SZXF1aXJlbWVudHMoKX19KSh3aW5kb3cpOyhmdW5jdGlvbigpe3ZhciBnPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImxpbmsiKTtnLnR5cGU9InRleHQvY3NzIjtnLm1lZGlhPSJzY3JlZW4iO2cucmVsPSJzdHlsZXNoZWV0IjtnLmhyZWY9T1QucHJvcGVydGllcy5jc3NVUkw7KGRvY3VtZW50LmhlYWR8fGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJoZWFkIilbMF0pLmFwcGVuZENoaWxkKGcpfSkod2luZG93KTsoZnVuY3Rpb24oKXsiZnVuY3Rpb24iPT09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZCYmZGVmaW5lKCJUQiIsW10sZnVuY3Rpb24oKXtyZXR1cm4gVEJ9KX0pKHdpbmRvdyk7Cg==",
                "headers": {
                    "Accept-Ranges": "bytes",
                    "Last-Modified": "Fri, 07 Nov 2014 21:24:46 GMT",
                    "Content-Length": "141709",
                    "Date": "Fri, 07 Nov 2014 21:24:46 GMT",
                    "Content-Type": "application/javascript"
                },
                "cookies": [],
                "mimeType": "script",
                "host": "localhost",
                "protocol": "http",
                "port": 9999,
                "inScope": false,
                "toolFlag": 16962,
                "referenceID": 0,
                "messageType": "response"
            },
            "messageType": "requestResponse"
        }
    ],
    "inScope": true,
    "messageType": "scanIssue"
}