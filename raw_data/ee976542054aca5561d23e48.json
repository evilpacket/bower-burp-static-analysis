{
    "url": "http://localhost:9999/the-gss/engine/spec/js/polymer/polymer.min.js",
    "host": "localhost",
    "port": 9999,
    "protocol": "http",
    "name": "Cross-site scripting (DOM-based)",
    "issueType": 2097936,
    "severity": "High",
    "confidence": "Firm",
    "issueBackground": "DOM-based cross-site scripting vulnerabilities arise when a client-side script within an application's response reads data from a controllable part of the DOM (for example, the URL), and writes this data into the HTML document in an unsafe way. An attacker may be able to use the vulnerability to construct a URL which, if visited by another application user, will cause JavaScript code supplied by the attacker to execute within the user's browser in the context of that user's session with the application.<br><br>The attacker-supplied code can perform a wide variety of actions, such as stealing the victim's session token or login credentials, performing arbitrary actions on the victim's behalf, and logging their keystrokes.<br><br>Users can be induced to visit the attacker's crafted URL in various ways, similar to the usual attack delivery vectors for reflected cross-site scripting vulnerabilities. ",
    "remediationBackground": "Static analysis of code to identify vulnerabilities of this kind may lead to false positives that are not actually exploitable. You should review the highlighted code and related execution paths to determine whether the application is indeed vulnerable, or whether mitigations are in place that would prevent exploitation.<br><br>The most effective way to avoid DOM-based cross-site scripting vulnerabilities is not to dynamically write data into the HTML document that originated from any untrusted source. If the desired functionality of the application means that this behavior is unavoidable, then defenses must be implemented within the client-side code to prevent malicious data from introducing script code into the document. In many cases, the relevant data can be validated on a whitelist basis, to allow only content that is known to be safe. In other cases, it will be necessary to sanitize or encode the data. This can be a complex task, and depending on the context that the data is to be inserted may need to involve a combination of JavaScript escaping, HTML encoding, and URL encoding, in the appropriate sequence.",
    "issueDetail": "The application may be vulnerable to DOM-based cross-site scripting. Data is read from <b>document.URL</b> and written to <b>the 'setAttribute()' function of a DOM element</b> via the following statement:<ul><li>d.setAttribu...(\"href\" , document.baseURI|| document.URL) </li></ul>",
    "requestResponses": [
        {
            "request": {
                "host": "localhost",
                "port": 9999,
                "protocol": "http",
                "url": "http://localhost:9999/the-gss/engine/spec/js/polymer/polymer.min.js",
                "path": "/the-gss/engine/spec/js/polymer/polymer.min.js",
                "httpVersion": "HTTP/1.1",
                "method": "GET",
                "headers": {
                    "Host": "localhost:9999"
                },
                "body": "",
                "raw": "R0VUIC90aGUtZ3NzL2VuZ2luZS9zcGVjL2pzL3BvbHltZXIvcG9seW1lci5taW4uanMgSFRUUC8xLjENCkhvc3Q6IGxvY2FsaG9zdDo5OTk5DQoNCg==",
                "inScope": true,
                "toolFlag": 16962,
                "referenceID": 0,
                "messageType": "request"
            },
            "response": {
                "statusCode": 200,
                "raw": "SFRUUC8xLjEgMjAwIE9LDQpDb250ZW50LUxlbmd0aDogMTcyMzYxDQpBY2NlcHQtUmFuZ2VzOiBieXRlcw0KQ29udGVudC1UeXBlOiBhcHBsaWNhdGlvbi9qYXZhc2NyaXB0DQpEYXRlOiBGcmksIDA3IE5vdiAyMDE0IDAyOjQ0OjU5IEdNVA0KTGFzdC1Nb2RpZmllZDogRnJpLCAwNyBOb3YgMjAxNCAwMjo0NDo1OSBHTVQNCg0KLyogQGxpY2Vuc2UKLy8gQ29weXJpZ2h0IChjKSAyMDEyIFRoZSBQb2x5bWVyIEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuCi8vCi8vIFJlZGlzdHJpYnV0aW9uIGFuZCB1c2UgaW4gc291cmNlIGFuZCBiaW5hcnkgZm9ybXMsIHdpdGggb3Igd2l0aG91dAovLyBtb2RpZmljYXRpb24sIGFyZSBwZXJtaXR0ZWQgcHJvdmlkZWQgdGhhdCB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnMgYXJlCi8vIG1ldDoKLy8KLy8gICAgKiBSZWRpc3RyaWJ1dGlvbnMgb2Ygc291cmNlIGNvZGUgbXVzdCByZXRhaW4gdGhlIGFib3ZlIGNvcHlyaWdodAovLyBub3RpY2UsIHRoaXMgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIuCi8vICAgICogUmVkaXN0cmlidXRpb25zIGluIGJpbmFyeSBmb3JtIG11c3QgcmVwcm9kdWNlIHRoZSBhYm92ZQovLyBjb3B5cmlnaHQgbm90aWNlLCB0aGlzIGxpc3Qgb2YgY29uZGl0aW9ucyBhbmQgdGhlIGZvbGxvd2luZyBkaXNjbGFpbWVyCi8vIGluIHRoZSBkb2N1bWVudGF0aW9uIGFuZC9vciBvdGhlciBtYXRlcmlhbHMgcHJvdmlkZWQgd2l0aCB0aGUKLy8gZGlzdHJpYnV0aW9uLgovLyAgICAqIE5laXRoZXIgdGhlIG5hbWUgb2YgR29vZ2xlIEluYy4gbm9yIHRoZSBuYW1lcyBvZiBpdHMKLy8gY29udHJpYnV0b3JzIG1heSBiZSB1c2VkIHRvIGVuZG9yc2Ugb3IgcHJvbW90ZSBwcm9kdWN0cyBkZXJpdmVkIGZyb20KLy8gdGhpcyBzb2Z0d2FyZSB3aXRob3V0IHNwZWNpZmljIHByaW9yIHdyaXR0ZW4gcGVybWlzc2lvbi4KLy8KLy8gVEhJUyBTT0ZUV0FSRSBJUyBQUk9WSURFRCBCWSBUSEUgQ09QWVJJR0hUIEhPTERFUlMgQU5EIENPTlRSSUJVVE9SUwovLyAiQVMgSVMiIEFORCBBTlkgRVhQUkVTUyBPUiBJTVBMSUVEIFdBUlJBTlRJRVMsIElOQ0xVRElORywgQlVUIE5PVAovLyBMSU1JVEVEIFRPLCBUSEUgSU1QTElFRCBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSBBTkQgRklUTkVTUyBGT1IKLy8gQSBQQVJUSUNVTEFSIFBVUlBPU0UgQVJFIERJU0NMQUlNRUQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBDT1BZUklHSFQKLy8gT1dORVIgT1IgQ09OVFJJQlVUT1JTIEJFIExJQUJMRSBGT1IgQU5ZIERJUkVDVCwgSU5ESVJFQ1QsIElOQ0lERU5UQUwsCi8vIFNQRUNJQUwsIEVYRU1QTEFSWSwgT1IgQ09OU0VRVUVOVElBTCBEQU1BR0VTIChJTkNMVURJTkcsIEJVVCBOT1QKLy8gTElNSVRFRCBUTywgUFJPQ1VSRU1FTlQgT0YgU1VCU1RJVFVURSBHT09EUyBPUiBTRVJWSUNFUzsgTE9TUyBPRiBVU0UsCi8vIERBVEEsIE9SIFBST0ZJVFM7IE9SIEJVU0lORVNTIElOVEVSUlVQVElPTikgSE9XRVZFUiBDQVVTRUQgQU5EIE9OIEFOWQovLyBUSEVPUlkgT0YgTElBQklMSVRZLCBXSEVUSEVSIElOIENPTlRSQUNULCBTVFJJQ1QgTElBQklMSVRZLCBPUiBUT1JUCi8vIChJTkNMVURJTkcgTkVHTElHRU5DRSBPUiBPVEhFUldJU0UpIEFSSVNJTkcgSU4gQU5ZIFdBWSBPVVQgT0YgVEhFIFVTRQovLyBPRiBUSElTIFNPRlRXQVJFLCBFVkVOIElGIEFEVklTRUQgT0YgVEhFIFBPU1NJQklMSVRZIE9GIFNVQ0ggREFNQUdFLgoKQHZlcnNpb24gMC4wLjIwMTMxMDI1CiovCmZ1bmN0aW9uIFBvaW50ZXJHZXN0dXJlRXZlbnQoYSxiKXt2YXIgYz1ifHx7fSxkPWRvY3VtZW50LmNyZWF0ZUV2ZW50KCJFdmVudCIpLGU9e2J1YmJsZXM6Qm9vbGVhbihjLmJ1YmJsZXMpPT09Yy5idWJibGVzfHwhMCxjYW5jZWxhYmxlOkJvb2xlYW4oYy5jYW5jZWxhYmxlKT09PWMuY2FuY2VsYWJsZXx8ITB9O2QuaW5pdEV2ZW50KGEsZS5idWJibGVzLGUuY2FuY2VsYWJsZSk7Zm9yKHZhciBmLGc9T2JqZWN0LmtleXMoYyksaD0wO2g8Zy5sZW5ndGg7aCsrKWY9Z1toXSxkW2ZdPWNbZl07cmV0dXJuIGQucHJldmVudFRhcD10aGlzLnByZXZlbnRUYXAsZH1pZigidW5kZWZpbmVkIj09dHlwZW9mIFdlYWtNYXAmJiFmdW5jdGlvbigpe3ZhciBhPU9iamVjdC5kZWZpbmVQcm9wZXJ0eSxiPURhdGUubm93KCklMWU5LGM9ZnVuY3Rpb24oKXt0aGlzLm5hbWU9Il9fc3QiKygxZTkqTWF0aC5yYW5kb20oKT4+PjApKyhiKysgKyJfXyIpfTtjLnByb3RvdHlwZT17c2V0OmZ1bmN0aW9uKGIsYyl7dmFyIGQ9Ylt0aGlzLm5hbWVdO2QmJmRbMF09PT1iP2RbMV09YzphKGIsdGhpcy5uYW1lLHt2YWx1ZTpbYixjXSx3cml0YWJsZTohMH0pfSxnZXQ6ZnVuY3Rpb24oYSl7dmFyIGI7cmV0dXJuKGI9YVt0aGlzLm5hbWVdKSYmYlswXT09PWE/YlsxXTp2b2lkIDB9LCJkZWxldGUiOmZ1bmN0aW9uKGEpe3RoaXMuc2V0KGEsdm9pZCAwKX19LHdpbmRvdy5XZWFrTWFwPWN9KCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoKXtmdW5jdGlvbiBhKGEpeyJzcGxpY2UiPT09YVswXS50eXBlJiYic3BsaWNlIj09PWFbMV0udHlwZSYmKGI9ITApfWlmKCJmdW5jdGlvbiIhPXR5cGVvZiBPYmplY3Qub2JzZXJ2ZXx8ImZ1bmN0aW9uIiE9dHlwZW9mIEFycmF5Lm9ic2VydmUpcmV0dXJuITE7dmFyIGI9ITEsYz1bMF07cmV0dXJuIEFycmF5Lm9ic2VydmUoYyxhKSxjWzFdPTEsYy5sZW5ndGg9MCxPYmplY3QuZGVsaXZlckNoYW5nZVJlY29yZHMoYSksYn1mdW5jdGlvbiBjKCl7aWYoYS5kb2N1bWVudCYmInNlY3VyaXR5UG9saWN5ImluIGEuZG9jdW1lbnQmJiFhLmRvY3VtZW50LnNlY3VyaXR5UG9saWN5LmFsbG93c0V2YWwpcmV0dXJuITE7dHJ5e3ZhciBiPW5ldyBGdW5jdGlvbigiIiwicmV0dXJuIHRydWU7Iik7cmV0dXJuIGIoKX1jYXRjaChjKXtyZXR1cm4hMX19ZnVuY3Rpb24gZChhKXtyZXR1cm4rYT09PWE+Pj4wfWZ1bmN0aW9uIGUoYSl7cmV0dXJuK2F9ZnVuY3Rpb24gZihhKXtyZXR1cm4gYT09PU9iamVjdChhKX1mdW5jdGlvbiBnKGEsYil7cmV0dXJuIGE9PT1iPzAhPT1hfHwxL2E9PT0xL2I6SChhKSYmSChiKT8hMDphIT09YSYmYiE9PWJ9ZnVuY3Rpb24gaChhKXtyZXR1cm4ic3RyaW5nIiE9dHlwZW9mIGE/ITE6KGE9YS50cmltKCksIiI9PWE/ITA6Ii4iPT1hWzBdPyExOlAudGVzdChhKSl9ZnVuY3Rpb24gaShhLGIpe2lmKGIhPT1RKXRocm93IEVycm9yKCJVc2UgUGF0aC5nZXQgdG8gcmV0cmlldmUgcGF0aCBvYmplY3RzIik7cmV0dXJuIiI9PWEudHJpbSgpP3RoaXM6ZChhKT8odGhpcy5wdXNoKGEpLHRoaXMpOihhLnNwbGl0KC9ccypcLlxzKi8pLmZpbHRlcihmdW5jdGlvbihhKXtyZXR1cm4gYX0pLmZvckVhY2goZnVuY3Rpb24oYSl7dGhpcy5wdXNoKGEpfSx0aGlzKSxHJiYhRiYmdGhpcy5sZW5ndGgmJih0aGlzLmdldFZhbHVlRnJvbT10aGlzLmNvbXBpbGVkR2V0VmFsdWVGcm9tRm4oKSksdm9pZCAwKX1mdW5jdGlvbiBqKGEpe2lmKGEgaW5zdGFuY2VvZiBpKXJldHVybiBhO251bGw9PWEmJihhPSIiKSwic3RyaW5nIiE9dHlwZW9mIGEmJihhPVN0cmluZyhhKSk7dmFyIGI9UlthXTtpZihiKXJldHVybiBiO2lmKCFoKGEpKXJldHVybiBTO3ZhciBiPW5ldyBpKGEsUSk7cmV0dXJuIFJbYV09YixifWZ1bmN0aW9uIGsoYil7Zm9yKHZhciBjPTA7VD5jJiZiLmNoZWNrKCk7KWIucmVwb3J0KCksYysrO2EudGVzdGluZ0V4cG9zZUN5Y2xlQ291bnQmJihhLmRpcnR5Q2hlY2tDeWNsZUNvdW50PWMpfWZ1bmN0aW9uIGwoYSl7Zm9yKHZhciBiIGluIGEpcmV0dXJuITE7cmV0dXJuITB9ZnVuY3Rpb24gbShhKXtyZXR1cm4gbChhLmFkZGVkKSYmbChhLnJlbW92ZWQpJiZsKGEuY2hhbmdlZCl9ZnVuY3Rpb24gbihhLGIpe3ZhciBjPXt9LGQ9e30sZT17fTtmb3IodmFyIGYgaW4gYil7dmFyIGc9YVtmXTsodm9pZCAwPT09Z3x8ZyE9PWJbZl0pJiYoZiBpbiBhP2chPT1iW2ZdJiYoZVtmXT1nKTpkW2ZdPXZvaWQgMCl9Zm9yKHZhciBmIGluIGEpZiBpbiBifHwoY1tmXT1hW2ZdKTtyZXR1cm4gQXJyYXkuaXNBcnJheShhKSYmYS5sZW5ndGghPT1iLmxlbmd0aCYmKGUubGVuZ3RoPWEubGVuZ3RoKSx7YWRkZWQ6YyxyZW1vdmVkOmQsY2hhbmdlZDplfX1mdW5jdGlvbiBvKGEsYil7dmFyIGM9Ynx8KEFycmF5LmlzQXJyYXkoYSk/W106e30pO2Zvcih2YXIgZCBpbiBhKWNbZF09YVtkXTtyZXR1cm4gQXJyYXkuaXNBcnJheShhKSYmKGMubGVuZ3RoPWEubGVuZ3RoKSxjfWZ1bmN0aW9uIHAoYSxiLGMsZCl7aWYodGhpcy5jbG9zZWQ9ITEsdGhpcy5vYmplY3Q9YSx0aGlzLmNhbGxiYWNrPWIsdGhpcy50YXJnZXQ9Yyx0aGlzLnRva2VuPWQsdGhpcy5yZXBvcnRpbmc9ITAsRil7dmFyIGU9dGhpczt0aGlzLmJvdW5kSW50ZXJuYWxDYWxsYmFjaz1mdW5jdGlvbihhKXtlLmludGVybmFsQ2FsbGJhY2soYSl9fXEodGhpcyl9ZnVuY3Rpb24gcShhKXtWJiYoVS5wdXNoKGEpLHAuX2FsbE9ic2VydmVyc0NvdW50KyspfWZ1bmN0aW9uIHIoYSxiLGMsZCl7cC5jYWxsKHRoaXMsYSxiLGMsZCksdGhpcy5jb25uZWN0KCksdGhpcy5zeW5jKCEwKX1mdW5jdGlvbiBzKGEsYixjLGQpe2lmKCFBcnJheS5pc0FycmF5KGEpKXRocm93IEVycm9yKCJQcm92aWRlZCBvYmplY3QgaXMgbm90IGFuIEFycmF5Iik7ci5jYWxsKHRoaXMsYSxiLGMsZCl9ZnVuY3Rpb24gdChhKXt0aGlzLmFycj1bXSx0aGlzLmNhbGxiYWNrPWEsdGhpcy5pc09ic2VydmVkPSEwfWZ1bmN0aW9uIHUoYSxiLGMsZCxlLGcsaCl7dmFyIGI9YiBpbnN0YW5jZW9mIGk/YjpqKGIpO3JldHVybiBiJiZiLmxlbmd0aCYmZihhKT8ocC5jYWxsKHRoaXMsYSxjLGQsZSksdGhpcy52YWx1ZUZuPWcsdGhpcy5zZXRWYWx1ZUZuPWgsdGhpcy5wYXRoPWIsdGhpcy5jb25uZWN0KCksdGhpcy5zeW5jKCEwKSx2b2lkIDApOih0aGlzLnZhbHVlXz1iP2IuZ2V0VmFsdWVGcm9tKGEpOnZvaWQgMCx0aGlzLnZhbHVlPWc/Zyh0aGlzLnZhbHVlXyk6dGhpcy52YWx1ZV8sdGhpcy5jbG9zZWQ9ITAsdm9pZCAwKX1mdW5jdGlvbiB2KGEsYixjLGQpe3AuY2FsbCh0aGlzLHZvaWQgMCxhLGIsYyksdGhpcy52YWx1ZUZuPWQsdGhpcy5vYnNlcnZlZD1bXSx0aGlzLnZhbHVlcz1bXSx0aGlzLnZhbHVlPXZvaWQgMCx0aGlzLm9sZFZhbHVlPXZvaWQgMCx0aGlzLm9sZFZhbHVlcz12b2lkIDAsdGhpcy5jaGFuZ2VGbGFncz12b2lkIDAsdGhpcy5zdGFydGVkPSExfWZ1bmN0aW9uIHcoYSxiKXtpZigiZnVuY3Rpb24iPT10eXBlb2YgT2JqZWN0Lm9ic2VydmUpe3ZhciBjPU9iamVjdC5nZXROb3RpZmllcihhKTtyZXR1cm4gZnVuY3Rpb24oZCxlKXt2YXIgZj17b2JqZWN0OmEsdHlwZTpkLG5hbWU6Yn07Mj09PWFyZ3VtZW50cy5sZW5ndGgmJihmLm9sZFZhbHVlPWUpLGMubm90aWZ5KGYpfX19ZnVuY3Rpb24geChhLGIsYyl7Zm9yKHZhciBkPXt9LGU9e30sZj0wO2Y8Yi5sZW5ndGg7ZisrKXt2YXIgZz1iW2ZdOyRbZy50eXBlXT8oZy5uYW1lIGluIGN8fChjW2cubmFtZV09Zy5vbGRWYWx1ZSksInVwZGF0ZWQiIT1nLnR5cGUmJigibmV3IiE9Zy50eXBlP2cubmFtZSBpbiBkPyhkZWxldGUgZFtnLm5hbWVdLGRlbGV0ZSBjW2cubmFtZV0pOmVbZy5uYW1lXT0hMDpnLm5hbWUgaW4gZT9kZWxldGUgZVtnLm5hbWVdOmRbZy5uYW1lXT0hMCkpOihjb25zb2xlLmVycm9yKCJVbmtub3duIGNoYW5nZVJlY29yZCB0eXBlOiAiK2cudHlwZSksY29uc29sZS5lcnJvcihnKSl9Zm9yKHZhciBoIGluIGQpZFtoXT1hW2hdO2Zvcih2YXIgaCBpbiBlKWVbaF09dm9pZCAwO3ZhciBpPXt9O2Zvcih2YXIgaCBpbiBjKWlmKCEoaCBpbiBkfHxoIGluIGUpKXt2YXIgaj1hW2hdO2NbaF0hPT1qJiYoaVtoXT1qKX1yZXR1cm57YWRkZWQ6ZCxyZW1vdmVkOmUsY2hhbmdlZDppfX1mdW5jdGlvbiB5KGEsYixjKXtyZXR1cm57aW5kZXg6YSxyZW1vdmVkOmIsYWRkZWRDb3VudDpjfX1mdW5jdGlvbiB6KCl7fWZ1bmN0aW9uIEEoYSxiLGMsZCxlLGYpe3JldHVybiBkYi5jYWxjU3BsaWNlcyhhLGIsYyxkLGUsZil9ZnVuY3Rpb24gQihhLGIsYyxkKXtyZXR1cm4gYz5ifHxhPmQ/LTE6Yj09Y3x8ZD09YT8wOmM+YT9kPmI/Yi1jOmQtYzpiPmQ/ZC1hOmItYX1mdW5jdGlvbiBDKGEsYixjLGQpe2Zvcih2YXIgZT15KGIsYyxkKSxmPSExLGc9MCxoPTA7aDxhLmxlbmd0aDtoKyspe3ZhciBpPWFbaF07aWYoaS5pbmRleCs9ZywhZil7dmFyIGo9QihlLmluZGV4LGUuaW5kZXgrZS5yZW1vdmVkLmxlbmd0aCxpLmluZGV4LGkuaW5kZXgraS5hZGRlZENvdW50KTtpZihqPj0wKXthLnNwbGljZShoLDEpLGgtLSxnLT1pLmFkZGVkQ291bnQtaS5yZW1vdmVkLmxlbmd0aCxlLmFkZGVkQ291bnQrPWkuYWRkZWRDb3VudC1qO3ZhciBrPWUucmVtb3ZlZC5sZW5ndGgraS5yZW1vdmVkLmxlbmd0aC1qO2lmKGUuYWRkZWRDb3VudHx8ayl7dmFyIGM9aS5yZW1vdmVkO2lmKGUuaW5kZXg8aS5pbmRleCl7dmFyIGw9ZS5yZW1vdmVkLnNsaWNlKDAsaS5pbmRleC1lLmluZGV4KTtBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShsLGMpLGM9bH1pZihlLmluZGV4K2UucmVtb3ZlZC5sZW5ndGg+aS5pbmRleCtpLmFkZGVkQ291bnQpe3ZhciBtPWUucmVtb3ZlZC5zbGljZShpLmluZGV4K2kuYWRkZWRDb3VudC1lLmluZGV4KTtBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShjLG0pfWUucmVtb3ZlZD1jLGkuaW5kZXg8ZS5pbmRleCYmKGUuaW5kZXg9aS5pbmRleCl9ZWxzZSBmPSEwfWVsc2UgaWYoZS5pbmRleDxpLmluZGV4KXtmPSEwLGEuc3BsaWNlKGgsMCxlKSxoKys7dmFyIG49ZS5hZGRlZENvdW50LWUucmVtb3ZlZC5sZW5ndGg7aS5pbmRleCs9bixnKz1ufX19Znx8YS5wdXNoKGUpfWZ1bmN0aW9uIEQoYSxiKXtmb3IodmFyIGM9W10sZj0wO2Y8Yi5sZW5ndGg7ZisrKXt2YXIgZz1iW2ZdO3N3aXRjaChnLnR5cGUpe2Nhc2Uic3BsaWNlIjpDKGMsZy5pbmRleCxnLnJlbW92ZWQuc2xpY2UoKSxnLmFkZGVkQ291bnQpO2JyZWFrO2Nhc2UibmV3IjpjYXNlInVwZGF0ZWQiOmNhc2UiZGVsZXRlZCI6aWYoIWQoZy5uYW1lKSljb250aW51ZTt2YXIgaD1lKGcubmFtZSk7aWYoMD5oKWNvbnRpbnVlO0MoYyxoLFtnLm9sZFZhbHVlXSwxKTticmVhaztkZWZhdWx0OmNvbnNvbGUuZXJyb3IoIlVuZXhwZWN0ZWQgcmVjb3JkIHR5cGU6ICIrSlNPTi5zdHJpbmdpZnkoZykpfX1yZXR1cm4gY31mdW5jdGlvbiBFKGEsYil7dmFyIGM9W107cmV0dXJuIEQoYSxiKS5mb3JFYWNoKGZ1bmN0aW9uKGIpe3JldHVybiAxPT1iLmFkZGVkQ291bnQmJjE9PWIucmVtb3ZlZC5sZW5ndGg/KGIucmVtb3ZlZFswXSE9PWFbYi5pbmRleF0mJmMucHVzaChiKSx2b2lkIDApOihjPWMuY29uY2F0KEEoYSxiLmluZGV4LGIuaW5kZXgrYi5hZGRlZENvdW50LGIucmVtb3ZlZCwwLGIucmVtb3ZlZC5sZW5ndGgpKSx2b2lkIDApfSksY312YXIgRj1iKCksRz1jKCksSD1hLk51bWJlci5pc05hTnx8ZnVuY3Rpb24oYil7cmV0dXJuIm51bWJlciI9PXR5cGVvZiBiJiZhLmlzTmFOKGIpfSxJPSJfX3Byb3RvX18iaW57fT9mdW5jdGlvbihhKXtyZXR1cm4gYX06ZnVuY3Rpb24oYSl7dmFyIGI9YS5fX3Byb3RvX187aWYoIWIpcmV0dXJuIGE7dmFyIGM9T2JqZWN0LmNyZWF0ZShiKTtyZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoYSkuZm9yRWFjaChmdW5jdGlvbihiKXtPYmplY3QuZGVmaW5lUHJvcGVydHkoYyxiLE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoYSxiKSl9KSxjfSxKPSJbJF9hLXpBLVpdIixLPSJbJF9hLXpBLVowLTldIixMPUorIisiK0srIioiLE09Iig/OlswLTldfFsxLTldK1swLTldKykiLE49Iig/OiIrTCsifCIrTSsiKSIsTz0iKD86IitOKyIpKD86XFxzKlxcLlxccyoiK04rIikqIixQPW5ldyBSZWdFeHAoIl4iK08rIiQiKSxRPXt9LFI9e307aS5nZXQ9aixpLnByb3RvdHlwZT1JKHtfX3Byb3RvX186W10sdmFsaWQ6ITAsdG9TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5qb2luKCIuIil9LGdldFZhbHVlRnJvbTpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz0wO2M8dGhpcy5sZW5ndGg7YysrKXtpZihudWxsPT1hKXJldHVybjtiJiZiLm9ic2VydmUoYSksYT1hW3RoaXNbY11dfXJldHVybiBhfSxjb21waWxlZEdldFZhbHVlRnJvbUZuOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5tYXAoZnVuY3Rpb24oYSl7cmV0dXJuIGQoYSk/J1siJythKyciXSc6Ii4iK2F9KSxiPSIiLGM9Im9iaiI7Yis9ImlmIChvYmogIT0gbnVsbCI7Zm9yKHZhciBlPTA7ZTx0aGlzLmxlbmd0aC0xO2UrKyl0aGlzW2VdLGMrPWFbZV0sYis9IiAmJlxuICAgICAiK2MrIiAhPSBudWxsIjtyZXR1cm4gYis9IilcbiIsYys9YVtlXSxiKz0iICByZXR1cm4gIitjKyI7XG5lbHNlXG4gIHJldHVybiB1bmRlZmluZWQ7IixuZXcgRnVuY3Rpb24oIm9iaiIsYil9LHNldFZhbHVlRnJvbTpmdW5jdGlvbihhLGIpe2lmKCF0aGlzLmxlbmd0aClyZXR1cm4hMTtmb3IodmFyIGM9MDtjPHRoaXMubGVuZ3RoLTE7YysrKXtpZighZihhKSlyZXR1cm4hMTthPWFbdGhpc1tjXV19cmV0dXJuIGYoYSk/KGFbdGhpc1tjXV09YiwhMCk6ITF9fSk7dmFyIFM9bmV3IGkoIiIsUSk7Uy52YWxpZD0hMSxTLmdldFZhbHVlRnJvbT1TLnNldFZhbHVlRnJvbT1mdW5jdGlvbigpe307dmFyIFQ9MWUzO3AucHJvdG90eXBlPXtpbnRlcm5hbENhbGxiYWNrOmZ1bmN0aW9uKGEpe3RoaXMuY2xvc2VkfHx0aGlzLnJlcG9ydGluZyYmdGhpcy5jaGVjayhhKSYmKHRoaXMucmVwb3J0KCksdGhpcy50ZXN0aW5nUmVzdWx0cyYmKHRoaXMudGVzdGluZ1Jlc3VsdHMuYW55Q2hhbmdlZD0hMCkpfSxjbG9zZTpmdW5jdGlvbigpe3RoaXMuY2xvc2VkfHwodGhpcy5vYmplY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiB0aGlzLm9iamVjdC5jbG9zZSYmdGhpcy5vYmplY3QuY2xvc2UoKSx0aGlzLmRpc2Nvbm5lY3QoKSx0aGlzLm9iamVjdD12b2lkIDAsdGhpcy5jbG9zZWQ9ITApfSxkZWxpdmVyOmZ1bmN0aW9uKGEpe3RoaXMuY2xvc2VkfHwoRj8odGhpcy50ZXN0aW5nUmVzdWx0cz1hLE9iamVjdC5kZWxpdmVyQ2hhbmdlUmVjb3Jkcyh0aGlzLmJvdW5kSW50ZXJuYWxDYWxsYmFjayksdGhpcy50ZXN0aW5nUmVzdWx0cz12b2lkIDApOmsodGhpcykpfSxyZXBvcnQ6ZnVuY3Rpb24oKXt0aGlzLnJlcG9ydGluZyYmKHRoaXMuc3luYyghMSksdGhpcy5jYWxsYmFjayYmKHRoaXMucmVwb3J0QXJncy5wdXNoKHRoaXMudG9rZW4pLHRoaXMuaW52b2tlQ2FsbGJhY2sodGhpcy5yZXBvcnRBcmdzKSksdGhpcy5yZXBvcnRBcmdzPXZvaWQgMCl9LGludm9rZUNhbGxiYWNrOmZ1bmN0aW9uKGEpe3RyeXt0aGlzLmNhbGxiYWNrLmFwcGx5KHRoaXMudGFyZ2V0LGEpfWNhdGNoKGIpe3AuX2Vycm9yVGhyb3duRHVyaW5nQ2FsbGJhY2s9ITAsY29uc29sZS5lcnJvcigiRXhjZXB0aW9uIGNhdWdodCBkdXJpbmcgb2JzZXJ2ZXIgY2FsbGJhY2s6ICIrKGIuc3RhY2t8fGIpKX19LHJlc2V0OmZ1bmN0aW9uKCl7dGhpcy5jbG9zZWR8fChGJiYodGhpcy5yZXBvcnRpbmc9ITEsT2JqZWN0LmRlbGl2ZXJDaGFuZ2VSZWNvcmRzKHRoaXMuYm91bmRJbnRlcm5hbENhbGxiYWNrKSx0aGlzLnJlcG9ydGluZz0hMCksdGhpcy5zeW5jKCEwKSl9fTt2YXIgVSxWPSFGfHxhLmZvcmNlQ29sbGVjdE9ic2VydmVycztwLl9hbGxPYnNlcnZlcnNDb3VudD0wLFYmJihVPVtdKTt2YXIgVz0hMSxYPSJmdW5jdGlvbiI9PXR5cGVvZiBPYmplY3QuZGVsaXZlckFsbENoYW5nZVJlY29yZHM7YS5QbGF0Zm9ybT1hLlBsYXRmb3JtfHx7fSxhLlBsYXRmb3JtLnBlcmZvcm1NaWNyb3Rhc2tDaGVja3BvaW50PWZ1bmN0aW9uKCl7aWYoIVcpe2lmKFgpcmV0dXJuIE9iamVjdC5kZWxpdmVyQWxsQ2hhbmdlUmVjb3JkcygpLHZvaWQgMDtpZihWKXtXPSEwO3ZhciBiPTAsYz17fTtkb3tiKys7dmFyIGQ9VTtVPVtdLGMuYW55Q2hhbmdlZD0hMTtmb3IodmFyIGU9MDtlPGQubGVuZ3RoO2UrKyl7dmFyIGY9ZFtlXTtmLmNsb3NlZHx8KEY/Zi5kZWxpdmVyKGMpOmYuY2hlY2soKSYmKGMuYW55Q2hhbmdlZD0hMCxmLnJlcG9ydCgpKSxVLnB1c2goZikpfX13aGlsZShUPmImJmMuYW55Q2hhbmdlZCk7YS50ZXN0aW5nRXhwb3NlQ3ljbGVDb3VudCYmKGEuZGlydHlDaGVja0N5Y2xlQ291bnQ9YikscC5fYWxsT2JzZXJ2ZXJzQ291bnQ9VS5sZW5ndGgsVz0hMX19fSxWJiYoYS5QbGF0Zm9ybS5jbGVhck9ic2VydmVycz1mdW5jdGlvbigpe1U9W119KSxyLnByb3RvdHlwZT1JKHtfX3Byb3RvX186cC5wcm90b3R5cGUsY29ubmVjdDpmdW5jdGlvbigpe0YmJk9iamVjdC5vYnNlcnZlKHRoaXMub2JqZWN0LHRoaXMuYm91bmRJbnRlcm5hbENhbGxiYWNrKX0sc3luYzpmdW5jdGlvbigpe0Z8fCh0aGlzLm9sZE9iamVjdD1vKHRoaXMub2JqZWN0KSl9LGNoZWNrOmZ1bmN0aW9uKGEpe3ZhciBiLGM7aWYoRil7aWYoIWEpcmV0dXJuITE7Yz17fSxiPXgodGhpcy5vYmplY3QsYSxjKX1lbHNlIGM9dGhpcy5vbGRPYmplY3QsYj1uKHRoaXMub2JqZWN0LHRoaXMub2xkT2JqZWN0KTtyZXR1cm4gbShiKT8hMToodGhpcy5yZXBvcnRBcmdzPVtiLmFkZGVkfHx7fSxiLnJlbW92ZWR8fHt9LGIuY2hhbmdlZHx8e31dLHRoaXMucmVwb3J0QXJncy5wdXNoKGZ1bmN0aW9uKGEpe3JldHVybiBjW2FdfSksITApfSxkaXNjb25uZWN0OmZ1bmN0aW9uKCl7Rj90aGlzLm9iamVjdCYmT2JqZWN0LnVub2JzZXJ2ZSh0aGlzLm9iamVjdCx0aGlzLmJvdW5kSW50ZXJuYWxDYWxsYmFjayk6dGhpcy5vbGRPYmplY3Q9dm9pZCAwfX0pLHMucHJvdG90eXBlPUkoe19fcHJvdG9fXzpyLnByb3RvdHlwZSxjb25uZWN0OmZ1bmN0aW9uKCl7RiYmQXJyYXkub2JzZXJ2ZSh0aGlzLm9iamVjdCx0aGlzLmJvdW5kSW50ZXJuYWxDYWxsYmFjayl9LHN5bmM6ZnVuY3Rpb24oKXtGfHwodGhpcy5vbGRPYmplY3Q9dGhpcy5vYmplY3Quc2xpY2UoKSl9LGNoZWNrOmZ1bmN0aW9uKGEpe3ZhciBiO2lmKEYpe2lmKCFhKXJldHVybiExO2I9RSh0aGlzLm9iamVjdCxhKX1lbHNlIGI9QSh0aGlzLm9iamVjdCwwLHRoaXMub2JqZWN0Lmxlbmd0aCx0aGlzLm9sZE9iamVjdCwwLHRoaXMub2xkT2JqZWN0Lmxlbmd0aCk7cmV0dXJuIGImJmIubGVuZ3RoPyh0aGlzLnJlcG9ydEFyZ3M9W2JdLCEwKTohMX19KSxzLmFwcGx5U3BsaWNlcz1mdW5jdGlvbihhLGIsYyl7Yy5mb3JFYWNoKGZ1bmN0aW9uKGMpe2Zvcih2YXIgZD1bYy5pbmRleCxjLnJlbW92ZWQubGVuZ3RoXSxlPWMuaW5kZXg7ZTxjLmluZGV4K2MuYWRkZWRDb3VudDspZC5wdXNoKGJbZV0pLGUrKztBcnJheS5wcm90b3R5cGUuc3BsaWNlLmFwcGx5KGEsZCl9KX07dmFyIFk9T2JqZWN0LmdldFByb3RvdHlwZU9mKHt9KSxaPU9iamVjdC5nZXRQcm90b3R5cGVPZihbXSk7dC5wcm90b3R5cGU9e3Jlc2V0OmZ1bmN0aW9uKCl7dGhpcy5pc09ic2VydmVkPSF0aGlzLmlzT2JzZXJ2ZWR9LG9ic2VydmU6ZnVuY3Rpb24oYSl7aWYoZihhKSYmYSE9PVkmJmEhPT1aKXt2YXIgYj10aGlzLmFyci5pbmRleE9mKGEpO2I+PTAmJnRoaXMuYXJyW2IrMV09PT10aGlzLmlzT2JzZXJ2ZWR8fCgwPmImJihiPXRoaXMuYXJyLmxlbmd0aCx0aGlzLmFycltiXT1hLE9iamVjdC5vYnNlcnZlKGEsdGhpcy5jYWxsYmFjaykpLHRoaXMuYXJyW2IrMV09dGhpcy5pc09ic2VydmVkLHRoaXMub2JzZXJ2ZShPYmplY3QuZ2V0UHJvdG90eXBlT2YoYSkpKX19LGNsZWFudXA6ZnVuY3Rpb24oKXtmb3IodmFyIGE9MCxiPTAsYz10aGlzLmlzT2JzZXJ2ZWQ7Yjx0aGlzLmFyci5sZW5ndGg7KXt2YXIgZD10aGlzLmFycltiXTt0aGlzLmFycltiKzFdPT1jPyhiPmEmJih0aGlzLmFyclthXT1kLHRoaXMuYXJyW2ErMV09YyksYSs9Mik6T2JqZWN0LnVub2JzZXJ2ZShkLHRoaXMuY2FsbGJhY2spLGIrPTJ9dGhpcy5hcnIubGVuZ3RoPWF9fSx1LnByb3RvdHlwZT1JKHtfX3Byb3RvX186cC5wcm90b3R5cGUsY29ubmVjdDpmdW5jdGlvbigpe0YmJih0aGlzLm9ic2VydmVkU2V0PW5ldyB0KHRoaXMuYm91bmRJbnRlcm5hbENhbGxiYWNrKSl9LGRpc2Nvbm5lY3Q6ZnVuY3Rpb24oKXt0aGlzLnZhbHVlPXZvaWQgMCx0aGlzLnZhbHVlXz12b2lkIDAsdGhpcy5vYnNlcnZlZFNldCYmKHRoaXMub2JzZXJ2ZWRTZXQucmVzZXQoKSx0aGlzLm9ic2VydmVkU2V0LmNsZWFudXAoKSx0aGlzLm9ic2VydmVkU2V0PXZvaWQgMCl9LGNoZWNrOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub2JzZXJ2ZWRTZXQmJnRoaXMub2JzZXJ2ZWRTZXQucmVzZXQoKSx0aGlzLnZhbHVlXz10aGlzLnBhdGguZ2V0VmFsdWVGcm9tKHRoaXMub2JqZWN0LHRoaXMub2JzZXJ2ZWRTZXQpLHRoaXMub2JzZXJ2ZWRTZXQmJnRoaXMub2JzZXJ2ZWRTZXQuY2xlYW51cCgpLGcodGhpcy52YWx1ZV8sdGhpcy5vbGRWYWx1ZV8pPyExOih0aGlzLnZhbHVlPXRoaXMudmFsdWVGbj90aGlzLnZhbHVlRm4odGhpcy52YWx1ZV8pOnRoaXMudmFsdWVfLHRoaXMucmVwb3J0QXJncz1bdGhpcy52YWx1ZSx0aGlzLm9sZFZhbHVlXSwhMCl9LHN5bmM6ZnVuY3Rpb24oYSl7YSYmKHRoaXMub2JzZXJ2ZWRTZXQmJnRoaXMub2JzZXJ2ZWRTZXQucmVzZXQoKSx0aGlzLnZhbHVlXz10aGlzLnBhdGguZ2V0VmFsdWVGcm9tKHRoaXMub2JqZWN0LHRoaXMub2JzZXJ2ZWRTZXQpLHRoaXMudmFsdWU9dGhpcy52YWx1ZUZuP3RoaXMudmFsdWVGbih0aGlzLnZhbHVlXyk6dGhpcy52YWx1ZV8sdGhpcy5vYnNlcnZlZFNldCYmdGhpcy5vYnNlcnZlZFNldC5jbGVhbnVwKCkpLHRoaXMub2xkVmFsdWVfPXRoaXMudmFsdWVfLHRoaXMub2xkVmFsdWU9dGhpcy52YWx1ZX0sc2V0VmFsdWU6ZnVuY3Rpb24oYSl7dGhpcy5wYXRoJiYoImZ1bmN0aW9uIj09dHlwZW9mIHRoaXMuc2V0VmFsdWVGbiYmKGE9dGhpcy5zZXRWYWx1ZUZuKGEpKSx0aGlzLnBhdGguc2V0VmFsdWVGcm9tKHRoaXMub2JqZWN0LGEpKX19KSx2LnByb3RvdHlwZT1JKHtfX3Byb3RvX186dS5wcm90b3R5cGUsYWRkUGF0aDpmdW5jdGlvbihhLGIpe2lmKHRoaXMuc3RhcnRlZCl0aHJvdyBFcnJvcigiQ2Fubm90IGFkZCBtb3JlIHBhdGhzIG9uY2Ugc3RhcnRlZC4iKTt2YXIgYj1iIGluc3RhbmNlb2YgaT9iOmooYiksYz1iP2IuZ2V0VmFsdWVGcm9tKGEpOnZvaWQgMDt0aGlzLm9ic2VydmVkLnB1c2goYSxiKSx0aGlzLnZhbHVlcy5wdXNoKGMpfSxzdGFydDpmdW5jdGlvbigpe3RoaXMuY29ubmVjdCgpLHRoaXMuc3luYyghMCl9LGdldFZhbHVlczpmdW5jdGlvbigpe3RoaXMub2JzZXJ2ZWRTZXQmJnRoaXMub2JzZXJ2ZWRTZXQucmVzZXQoKTtmb3IodmFyIGE9ITEsYj0wO2I8dGhpcy5vYnNlcnZlZC5sZW5ndGg7Yis9Mil7dmFyIGM9dGhpcy5vYnNlcnZlZFtiKzFdO2lmKGMpe3ZhciBkPXRoaXMub2JzZXJ2ZWRbYl0sZT1jLmdldFZhbHVlRnJvbShkLHRoaXMub2JzZXJ2ZWRTZXQpLGY9dGhpcy52YWx1ZXNbYi8yXTtpZighZyhlLGYpKXtpZighYSYmIXRoaXMudmFsdWVGbil7dGhpcy5vbGRWYWx1ZXM9dGhpcy5vbGRWYWx1ZXN8fFtdLHRoaXMuY2hhbmdlRmxhZ3M9dGhpcy5jaGFuZ2VGbGFnc3x8W107Zm9yKHZhciBoPTA7aDx0aGlzLnZhbHVlcy5sZW5ndGg7aCsrKXRoaXMub2xkVmFsdWVzW2hdPXRoaXMudmFsdWVzW2hdLHRoaXMuY2hhbmdlRmxhZ3NbaF09ITF9dGhpcy52YWx1ZUZufHwodGhpcy5jaGFuZ2VGbGFnc1tiLzJdPSEwKSx0aGlzLnZhbHVlc1tiLzJdPWUsYT0hMH19fXJldHVybiB0aGlzLm9ic2VydmVkU2V0JiZ0aGlzLm9ic2VydmVkU2V0LmNsZWFudXAoKSxhfSxjaGVjazpmdW5jdGlvbigpe2lmKHRoaXMuZ2V0VmFsdWVzKCkpe2lmKHRoaXMudmFsdWVGbil7aWYodGhpcy52YWx1ZT10aGlzLnZhbHVlRm4odGhpcy52YWx1ZXMpLGcodGhpcy52YWx1ZSx0aGlzLm9sZFZhbHVlKSlyZXR1cm4hMTt0aGlzLnJlcG9ydEFyZ3M9W3RoaXMudmFsdWUsdGhpcy5vbGRWYWx1ZV19ZWxzZSB0aGlzLnJlcG9ydEFyZ3M9W3RoaXMudmFsdWVzLHRoaXMub2xkVmFsdWVzLHRoaXMuY2hhbmdlRmxhZ3MsdGhpcy5vYnNlcnZlZF07cmV0dXJuITB9fSxzeW5jOmZ1bmN0aW9uKGEpe2EmJih0aGlzLmdldFZhbHVlcygpLHRoaXMudmFsdWVGbiYmKHRoaXMudmFsdWU9dGhpcy52YWx1ZUZuKHRoaXMudmFsdWVzKSkpLHRoaXMudmFsdWVGbiYmKHRoaXMub2xkVmFsdWU9dGhpcy52YWx1ZSl9LGNsb3NlOmZ1bmN0aW9uKCl7aWYodGhpcy5vYnNlcnZlZCl7Zm9yKHZhciBhPTA7YTx0aGlzLm9ic2VydmVkLmxlbmd0aDthKz0yKXt2YXIgYj10aGlzLm9ic2VydmVkW2FdO2ImJiJmdW5jdGlvbiI9PXR5cGVvZiBiLmNsb3NlJiZiLmNsb3NlKCl9dGhpcy5vYnNlcnZlZD12b2lkIDAsdGhpcy52YWx1ZXM9dm9pZCAwfXAucHJvdG90eXBlLmNsb3NlLmNhbGwodGhpcyl9fSk7dmFyICQ9eyJuZXciOiEwLHVwZGF0ZWQ6ITAsZGVsZXRlZDohMH07dS5kZWZpbmVQcm9wZXJ0eT1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9Yy5vYmplY3QsZT1qKGMucGF0aCksZj13KGEsYiksZz1uZXcgdShkLGMucGF0aCxmdW5jdGlvbihhLGIpe2YmJmYoInVwZGF0ZWQiLGIpfSk7cmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShhLGIse2dldDpmdW5jdGlvbigpe3JldHVybiBlLmdldFZhbHVlRnJvbShkKX0sc2V0OmZ1bmN0aW9uKGEpe2Uuc2V0VmFsdWVGcm9tKGQsYSl9LGNvbmZpZ3VyYWJsZTohMH0pLHtjbG9zZTpmdW5jdGlvbigpe3ZhciBjPWUuZ2V0VmFsdWVGcm9tKGQpO2YmJmcuZGVsaXZlcigpLGcuY2xvc2UoKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoYSxiLHt2YWx1ZTpjLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pfX19O3ZhciBfPTAsYWI9MSxiYj0yLGNiPTM7ei5wcm90b3R5cGU9e2NhbGNFZGl0RGlzdGFuY2VzOmZ1bmN0aW9uKGEsYixjLGQsZSxmKXtmb3IodmFyIGc9Zi1lKzEsaD1jLWIrMSxpPW5ldyBBcnJheShnKSxqPTA7Zz5qO2orKylpW2pdPW5ldyBBcnJheShoKSxpW2pdWzBdPWo7Zm9yKHZhciBrPTA7aD5rO2srKylpWzBdW2tdPWs7Zm9yKHZhciBqPTE7Zz5qO2orKylmb3IodmFyIGs9MTtoPms7aysrKWlmKHRoaXMuZXF1YWxzKGFbYitrLTFdLGRbZStqLTFdKSlpW2pdW2tdPWlbai0xXVtrLTFdO2Vsc2V7dmFyIGw9aVtqLTFdW2tdKzEsbT1pW2pdW2stMV0rMTtpW2pdW2tdPW0+bD9sOm19cmV0dXJuIGl9LHNwbGljZU9wZXJhdGlvbnNGcm9tRWRpdERpc3RhbmNlczpmdW5jdGlvbihhKXtmb3IodmFyIGI9YS5sZW5ndGgtMSxjPWFbMF0ubGVuZ3RoLTEsZD1hW2JdW2NdLGU9W107Yj4wfHxjPjA7KWlmKDAhPWIpaWYoMCE9Yyl7dmFyIGYsZz1hW2ItMV1bYy0xXSxoPWFbYi0xXVtjXSxpPWFbYl1bYy0xXTtmPWk+aD9nPmg/aDpnOmc+aT9pOmcsZj09Zz8oZz09ZD9lLnB1c2goXyk6KGUucHVzaChhYiksZD1nKSxiLS0sYy0tKTpmPT1oPyhlLnB1c2goY2IpLGItLSxkPWgpOihlLnB1c2goYmIpLGMtLSxkPWkpfWVsc2UgZS5wdXNoKGNiKSxiLS07ZWxzZSBlLnB1c2goYmIpLGMtLTtyZXR1cm4gZS5yZXZlcnNlKCksZX0sY2FsY1NwbGljZXM6ZnVuY3Rpb24oYSxiLGMsZCxlLGYpe3ZhciBnPTAsaD0wLGk9TWF0aC5taW4oYy1iLGYtZSk7aWYoMD09YiYmMD09ZSYmKGc9dGhpcy5zaGFyZWRQcmVmaXgoYSxkLGkpKSxjPT1hLmxlbmd0aCYmZj09ZC5sZW5ndGgmJihoPXRoaXMuc2hhcmVkU3VmZml4KGEsZCxpLWcpKSxiKz1nLGUrPWcsYy09aCxmLT1oLDA9PWMtYiYmMD09Zi1lKXJldHVybltdO2lmKGI9PWMpe2Zvcih2YXIgaj15KGIsW10sMCk7Zj5lOylqLnJlbW92ZWQucHVzaChkW2UrK10pO3JldHVybltqXX1pZihlPT1mKXJldHVyblt5KGIsW10sYy1iKV07Zm9yKHZhciBrPXRoaXMuc3BsaWNlT3BlcmF0aW9uc0Zyb21FZGl0RGlzdGFuY2VzKHRoaXMuY2FsY0VkaXREaXN0YW5jZXMoYSxiLGMsZCxlLGYpKSxqPXZvaWQgMCxsPVtdLG09YixuPWUsbz0wO288ay5sZW5ndGg7bysrKXN3aXRjaChrW29dKXtjYXNlIF86aiYmKGwucHVzaChqKSxqPXZvaWQgMCksbSsrLG4rKzticmVhaztjYXNlIGFiOmp8fChqPXkobSxbXSwwKSksai5hZGRlZENvdW50KyssbSsrLGoucmVtb3ZlZC5wdXNoKGRbbl0pLG4rKzticmVhaztjYXNlIGJiOmp8fChqPXkobSxbXSwwKSksai5hZGRlZENvdW50KyssbSsrO2JyZWFrO2Nhc2UgY2I6anx8KGo9eShtLFtdLDApKSxqLnJlbW92ZWQucHVzaChkW25dKSxuKyt9cmV0dXJuIGomJmwucHVzaChqKSxsfSxzaGFyZWRQcmVmaXg6ZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZD0wO2M+ZDtkKyspaWYoIXRoaXMuZXF1YWxzKGFbZF0sYltkXSkpcmV0dXJuIGQ7cmV0dXJuIGN9LHNoYXJlZFN1ZmZpeDpmdW5jdGlvbihhLGIsYyl7Zm9yKHZhciBkPWEubGVuZ3RoLGU9Yi5sZW5ndGgsZj0wO2M+ZiYmdGhpcy5lcXVhbHMoYVstLWRdLGJbLS1lXSk7KWYrKztyZXR1cm4gZn0sY2FsY3VsYXRlU3BsaWNlczpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLmNhbGNTcGxpY2VzKGEsMCxhLmxlbmd0aCxiLDAsYi5sZW5ndGgpfSxlcXVhbHM6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT09PWJ9fTt2YXIgZGI9bmV3IHo7YS5PYnNlcnZlcj1wLGEuT2JzZXJ2ZXIuaGFzT2JqZWN0T2JzZXJ2ZT1GLGEuQXJyYXlPYnNlcnZlcj1zLGEuQXJyYXlPYnNlcnZlci5jYWxjdWxhdGVTcGxpY2VzPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGRiLmNhbGN1bGF0ZVNwbGljZXMoYSxiKX0sYS5BcnJheVNwbGljZT16LGEuT2JqZWN0T2JzZXJ2ZXI9cixhLlBhdGhPYnNlcnZlcj11LGEuQ29tcG91bmRQYXRoT2JzZXJ2ZXI9dixhLlBhdGg9aX0oInVuZGVmaW5lZCIhPXR5cGVvZiBnbG9iYWwmJmdsb2JhbD9nbG9iYWw6dGhpcyksd2luZG93LlBsYXRmb3JtPXdpbmRvdy5QbGF0Zm9ybXx8e30sd2luZG93LmxvZ0ZsYWdzPXdpbmRvdy5sb2dGbGFnc3x8e30sZnVuY3Rpb24oYSl7dmFyIGI9YS5mbGFnc3x8e307bG9jYXRpb24uc2VhcmNoLnNsaWNlKDEpLnNwbGl0KCImIikuZm9yRWFjaChmdW5jdGlvbihhKXthPWEuc3BsaXQoIj0iKSxhWzBdJiYoYlthWzBdXT1hWzFdfHwhMCl9KSxiLnNoYWRvdz1iLnNoYWRvd3x8Yi5zaGFkb3dkb218fGIucG9seWZpbGwsYi5zaGFkb3c9Im5hdGl2ZSI9PT1iLnNoYWRvdz8hMTpiLnNoYWRvd3x8IUhUTUxFbGVtZW50LnByb3RvdHlwZS5jcmVhdGVTaGFkb3dSb290JiYicG9seWZpbGwiLGEuZmxhZ3M9Yn0oUGxhdGZvcm0pLCJwb2x5ZmlsbCI9PT1QbGF0Zm9ybS5mbGFncy5zaGFkb3cpe3ZhciBTaGFkb3dET01Qb2x5ZmlsbD17fTshZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7aWYoIWEpdGhyb3cgbmV3IEVycm9yKCJBc3NlcnRpb24gZmFpbGVkIil9ZnVuY3Rpb24gYyhhLGIpe3JldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhiKS5mb3JFYWNoKGZ1bmN0aW9uKGMpe09iamVjdC5kZWZpbmVQcm9wZXJ0eShhLGMsT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihiLGMpKX0pLGF9ZnVuY3Rpb24gZChhLGIpe3JldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhiKS5mb3JFYWNoKGZ1bmN0aW9uKGMpe3N3aXRjaChjKXtjYXNlImFyZ3VtZW50cyI6Y2FzZSJjYWxsZXIiOmNhc2UibGVuZ3RoIjpjYXNlIm5hbWUiOmNhc2UicHJvdG90eXBlIjpjYXNlInRvU3RyaW5nIjpyZXR1cm59T2JqZWN0LmRlZmluZVByb3BlcnR5KGEsYyxPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGIsYykpfSksYX1mdW5jdGlvbiBlKGEsYil7Zm9yKHZhciBjPTA7YzxiLmxlbmd0aDtjKyspaWYoYltjXWluIGEpcmV0dXJuIGJbY119ZnVuY3Rpb24gZihhKXt2YXIgYj1hLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGEpLGM9RC5nZXQoYik7aWYoYylyZXR1cm4gYzt2YXIgZD1mKGIpLGU9cyhkKTtyZXR1cm4gcChiLGUsYSksZX1mdW5jdGlvbiBnKGEsYil7bihhLGIsITApfWZ1bmN0aW9uIGgoYSxiKXtuKGIsYSwhMSl9ZnVuY3Rpb24gaShhKXtyZXR1cm4vXm9uW2Etel0rJC8udGVzdChhKX1mdW5jdGlvbiBqKGEpe3JldHVybi9eXHdbYS16QS1aXzAtOV0qJC8udGVzdChhKX1mdW5jdGlvbiBrKGEpe3JldHVybiBHJiZqKGEpP25ldyBGdW5jdGlvbigicmV0dXJuIHRoaXMuaW1wbC4iK2EpOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaW1wbFthXX19ZnVuY3Rpb24gbChhKXtyZXR1cm4gRyYmaihhKT9uZXcgRnVuY3Rpb24oInYiLCJ0aGlzLmltcGwuIithKyIgPSB2Iik6ZnVuY3Rpb24oYil7dGhpcy5pbXBsW2FdPWJ9fWZ1bmN0aW9uIG0oYSl7cmV0dXJuIEcmJmooYSk/bmV3IEZ1bmN0aW9uKCJyZXR1cm4gdGhpcy5pbXBsLiIrYSsiLmFwcGx5KHRoaXMuaW1wbCwgYXJndW1lbnRzKSIpOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaW1wbFthXS5hcHBseSh0aGlzLmltcGwsYXJndW1lbnRzKX19ZnVuY3Rpb24gbihiLGMsZCl7T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoYikuZm9yRWFjaChmdW5jdGlvbihlKXtpZighKGUgaW4gYykpe0omJmIuX19sb29rdXBHZXR0ZXJfXyhlKTt2YXIgZjt0cnl7Zj1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGIsZSl9Y2F0Y2goZyl7Zj1LfXZhciBoLGo7aWYoZCYmImZ1bmN0aW9uIj09dHlwZW9mIGYudmFsdWUpcmV0dXJuIGNbZV09bShlKSx2b2lkIDA7dmFyIG49aShlKTtoPW4/YS5nZXRFdmVudEhhbmRsZXJHZXR0ZXIoZSk6ayhlKSwoZi53cml0YWJsZXx8Zi5zZXQpJiYoaj1uP2EuZ2V0RXZlbnRIYW5kbGVyU2V0dGVyKGUpOmwoZSkpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjLGUse2dldDpoLHNldDpqLGNvbmZpZ3VyYWJsZTpmLmNvbmZpZ3VyYWJsZSxlbnVtZXJhYmxlOmYuZW51bWVyYWJsZX0pfX0pfWZ1bmN0aW9uIG8oYSxiLGMpe3ZhciBlPWEucHJvdG90eXBlO3AoZSxiLGMpLGQoYixhKX1mdW5jdGlvbiBwKGEsYyxkKXt2YXIgZT1jLnByb3RvdHlwZTtiKHZvaWQgMD09PUQuZ2V0KGEpKSxELnNldChhLGMpLEUuc2V0KGUsYSksZyhhLGUpLGQmJmgoZSxkKX1mdW5jdGlvbiBxKGEsYil7cmV0dXJuIEQuZ2V0KGIucHJvdG90eXBlKT09PWF9ZnVuY3Rpb24gcihhKXt2YXIgYj1PYmplY3QuZ2V0UHJvdG90eXBlT2YoYSksYz1mKGIpLGQ9cyhjKTtyZXR1cm4gcChiLGQsYSksZH1mdW5jdGlvbiBzKGEpe2Z1bmN0aW9uIGIoYil7YS5jYWxsKHRoaXMsYil9cmV0dXJuIGIucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYS5wcm90b3R5cGUpLGIucHJvdG90eXBlLmNvbnN0cnVjdG9yPWIsYn1mdW5jdGlvbiB0KGEpe3JldHVybiBhIGluc3RhbmNlb2YgRi5FdmVudFRhcmdldHx8YSBpbnN0YW5jZW9mIEYuRXZlbnR8fGEgaW5zdGFuY2VvZiBGLlJhbmdlfHxhIGluc3RhbmNlb2YgRi5ET01JbXBsZW1lbnRhdGlvbnx8YSBpbnN0YW5jZW9mIEYuQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfHxGLldlYkdMUmVuZGVyaW5nQ29udGV4dCYmYSBpbnN0YW5jZW9mIEYuV2ViR0xSZW5kZXJpbmdDb250ZXh0fWZ1bmN0aW9uIHUoYSl7cmV0dXJuIGEgaW5zdGFuY2VvZiBOfHxhIGluc3RhbmNlb2YgTXx8YSBpbnN0YW5jZW9mIE98fGEgaW5zdGFuY2VvZiBQfHxhIGluc3RhbmNlb2YgTHx8YSBpbnN0YW5jZW9mIFF8fFImJmEgaW5zdGFuY2VvZiBSfWZ1bmN0aW9uIHYoYSl7cmV0dXJuIG51bGw9PT1hP251bGw6KGIodShhKSksYS5wb2x5bWVyV3JhcHBlcl98fChhLnBvbHltZXJXcmFwcGVyXz1uZXcoZihhKSkoYSkpKX1mdW5jdGlvbiB3KGEpe3JldHVybiBudWxsPT09YT9udWxsOihiKHQoYSkpLGEuaW1wbCl9ZnVuY3Rpb24geChhKXtyZXR1cm4gYSYmdChhKT93KGEpOmF9ZnVuY3Rpb24geShhKXtyZXR1cm4gYSYmIXQoYSk/dihhKTphfWZ1bmN0aW9uIHooYSxjKXtudWxsIT09YyYmKGIodShhKSksYih2b2lkIDA9PT1jfHx0KGMpKSxhLnBvbHltZXJXcmFwcGVyXz1jKX1mdW5jdGlvbiBBKGEsYixjKXtPYmplY3QuZGVmaW5lUHJvcGVydHkoYS5wcm90b3R5cGUsYix7Z2V0OmMsY29uZmlndXJhYmxlOiEwLGVudW1lcmFibGU6ITB9KX1mdW5jdGlvbiBCKGEsYil7QShhLGIsZnVuY3Rpb24oKXtyZXR1cm4gdih0aGlzLmltcGxbYl0pfSl9ZnVuY3Rpb24gQyhhLGIpe2EuZm9yRWFjaChmdW5jdGlvbihhKXtiLmZvckVhY2goZnVuY3Rpb24oYil7YS5wcm90b3R5cGVbYl09ZnVuY3Rpb24oKXt2YXIgYT15KHRoaXMpO3JldHVybiBhW2JdLmFwcGx5KGEsYXJndW1lbnRzKX19KX0pfXZhciBEPW5ldyBXZWFrTWFwLEU9bmV3IFdlYWtNYXAsRj1PYmplY3QuY3JlYXRlKG51bGwpLEc9ISgic2VjdXJpdHlQb2xpY3kiaW4gZG9jdW1lbnQpfHxkb2N1bWVudC5zZWN1cml0eVBvbGljeS5hbGxvd3NFdmFsO2lmKEcpdHJ5e3ZhciBIPW5ldyBGdW5jdGlvbigiIiwicmV0dXJuIHRydWU7Iik7Rz1IKCl9Y2F0Y2goSSl7fU9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHdpbmRvdyk7dmFyIEo9L0ZpcmVmb3gvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCksSz17Z2V0OmZ1bmN0aW9uKCl7fSxzZXQ6ZnVuY3Rpb24oKXt9LGNvbmZpZ3VyYWJsZTohMCxlbnVtZXJhYmxlOiEwfSxMPXdpbmRvdy5ET01JbXBsZW1lbnRhdGlvbixNPXdpbmRvdy5FdmVudCxOPXdpbmRvdy5Ob2RlLE89d2luZG93LldpbmRvdyxQPXdpbmRvdy5SYW5nZSxRPXdpbmRvdy5DYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsUj13aW5kb3cuV2ViR0xSZW5kZXJpbmdDb250ZXh0O2EuYXNzZXJ0PWIsYS5jb25zdHJ1Y3RvclRhYmxlPUQsYS5kZWZpbmVHZXR0ZXI9QSxhLmRlZmluZVdyYXBHZXR0ZXI9QixhLmZvcndhcmRNZXRob2RzVG9XcmFwcGVyPUMsYS5pc1dyYXBwZXJGb3I9cSxhLm1peGluPWMsYS5uYXRpdmVQcm90b3R5cGVUYWJsZT1FLGEub25lT2Y9ZSxhLnJlZ2lzdGVyT2JqZWN0PXIsYS5yZWdpc3RlcldyYXBwZXI9byxhLnJld3JhcD16LGEudW53cmFwPXcsYS51bndyYXBJZk5lZWRlZD14LGEud3JhcD12LGEud3JhcElmTmVlZGVkPXksYS53cmFwcGVycz1GfSh0aGlzLlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtyZXR1cm4gYSBpbnN0YW5jZW9mIE8uU2hhZG93Um9vdH1mdW5jdGlvbiBjKGEpe3ZhciBiPWEubG9jYWxOYW1lO3JldHVybiJjb250ZW50Ij09PWJ8fCJzaGFkb3ciPT09Yn1mdW5jdGlvbiBkKGEpe3JldHVybiEhYS5zaGFkb3dSb290fWZ1bmN0aW9uIGUoYSl7dmFyIGI7cmV0dXJuIGEucGFyZW50Tm9kZXx8KGI9YS5kZWZhdWx0VmlldykmJk4oYil8fG51bGx9ZnVuY3Rpb24gZihmLGcsaCl7aWYoaC5sZW5ndGgpcmV0dXJuIGguc2hpZnQoKTtpZihiKGYpKXJldHVybiBqKGYpfHxhLmdldEhvc3RGb3JTaGFkb3dSb290KGYpO3ZhciBpPWEuZXZlbnRQYXJlbnRzVGFibGUuZ2V0KGYpO2lmKGkpe2Zvcih2YXIgaz0xO2s8aS5sZW5ndGg7aysrKWhbay0xXT1pW2tdO3JldHVybiBpWzBdfWlmKGcmJmMoZikpe3ZhciBsPWYucGFyZW50Tm9kZTtpZihsJiZkKGwpKWZvcih2YXIgbT1hLmdldFNoYWRvd1RyZWVzKGwpLG49aihnKSxrPTA7azxtLmxlbmd0aDtrKyspaWYobVtrXS5jb250YWlucyhuKSlyZXR1cm4gbn1yZXR1cm4gZShmKX1mdW5jdGlvbiBnKGEpe2Zvcih2YXIgZD1bXSxlPWEsZz1bXSxpPVtdO2U7KXt2YXIgaj1udWxsO2lmKGMoZSkpe2o9aChkKTt2YXIgaz1kW2QubGVuZ3RoLTFdfHxlO2QucHVzaChrKX1lbHNlIGQubGVuZ3RofHxkLnB1c2goZSk7dmFyIGw9ZFtkLmxlbmd0aC0xXTtnLnB1c2goe3RhcmdldDpsLGN1cnJlbnRUYXJnZXQ6ZX0pLGIoZSkmJmQucG9wKCksZT1mKGUsaixpKX1yZXR1cm4gZ31mdW5jdGlvbiBoKGEpe2Zvcih2YXIgYj1hLmxlbmd0aC0xO2I+PTA7Yi0tKWlmKCFjKGFbYl0pKXJldHVybiBhW2JdO3JldHVybiBudWxsfWZ1bmN0aW9uIGkoZCxlKXtmb3IodmFyIGc9W107ZDspe2Zvcih2YXIgaT1bXSxqPWUsbD12b2lkIDA7ajspe3ZhciBuPW51bGw7aWYoaS5sZW5ndGgpe2lmKGMoaikmJihuPWgoaSksayhsKSkpe3ZhciBvPWlbaS5sZW5ndGgtMV07aS5wdXNoKG8pfX1lbHNlIGkucHVzaChqKTtpZihtKGosZCkpcmV0dXJuIGlbaS5sZW5ndGgtMV07YihqKSYmaS5wb3AoKSxsPWosaj1mKGosbixnKX1kPWIoZCk/YS5nZXRIb3N0Rm9yU2hhZG93Um9vdChkKTpkLnBhcmVudE5vZGV9fWZ1bmN0aW9uIGooYil7cmV0dXJuIGEuaW5zZXJ0aW9uUGFyZW50VGFibGUuZ2V0KGIpfWZ1bmN0aW9uIGsoYSl7cmV0dXJuIGooYSl9ZnVuY3Rpb24gbChhKXtmb3IodmFyIGI7Yj1hLnBhcmVudE5vZGU7KWE9YjtyZXR1cm4gYX1mdW5jdGlvbiBtKGEsYil7cmV0dXJuIGwoYSk9PT1sKGIpfWZ1bmN0aW9uIG4oYixjKXtpZihiPT09YylyZXR1cm4hMDtpZihiIGluc3RhbmNlb2YgTy5TaGFkb3dSb290KXt2YXIgZD1hLmdldEhvc3RGb3JTaGFkb3dSb290KGIpO3JldHVybiBuKGwoZCksYyl9cmV0dXJuITF9ZnVuY3Rpb24gbygpe1orK31mdW5jdGlvbiBwKCl7Wi0tfWZ1bmN0aW9uIHEoYil7aWYoIVEuZ2V0KGIpKXtpZihRLnNldChiLCEwKSxiIGluc3RhbmNlb2YgJCl7aWYoWilyZXR1cm59ZWxzZSBhLnJlbmRlckFsbFBlbmRpbmcoKTt2YXIgYz1OKGIudGFyZ2V0KSxkPU4oYik7cmV0dXJuIHIoZCxjKX19ZnVuY3Rpb24gcihhLGIpe3ZhciBjPWcoYik7cmV0dXJuImxvYWQiPT09YS50eXBlJiYyPT09Yy5sZW5ndGgmJmNbMF0udGFyZ2V0IGluc3RhbmNlb2YgTy5Eb2N1bWVudCYmYy5zaGlmdCgpLFkuc2V0KGEsYykscyhhLGMpJiZ0KGEsYykmJnUoYSxjKSxVLnNldChhLHguTk9ORSksUy5zZXQoYSxudWxsKSxhLmRlZmF1bHRQcmV2ZW50ZWR9ZnVuY3Rpb24gcyhhLGIpe2Zvcih2YXIgYyxkPWIubGVuZ3RoLTE7ZD4wO2QtLSl7dmFyIGU9YltkXS50YXJnZXQsZj1iW2RdLmN1cnJlbnRUYXJnZXQ7aWYoZSE9PWYmJihjPXguQ0FQVFVSSU5HX1BIQVNFLCF2KGJbZF0sYSxjKSkpcmV0dXJuITF9cmV0dXJuITB9ZnVuY3Rpb24gdChhLGIpe3ZhciBjPXguQVRfVEFSR0VUO3JldHVybiB2KGJbMF0sYSxjKX1mdW5jdGlvbiB1KGEsYil7Zm9yKHZhciBjLGQ9YS5idWJibGVzLGU9MTtlPGIubGVuZ3RoO2UrKyl7dmFyIGY9YltlXS50YXJnZXQsZz1iW2VdLmN1cnJlbnRUYXJnZXQ7aWYoZj09PWcpYz14LkFUX1RBUkdFVDtlbHNle2lmKCFkfHxXLmdldChhKSljb250aW51ZTtjPXguQlVCQkxJTkdfUEhBU0V9aWYoIXYoYltlXSxhLGMpKXJldHVybn19ZnVuY3Rpb24gdihhLGIsYyl7dmFyIGQ9YS50YXJnZXQsZT1hLmN1cnJlbnRUYXJnZXQsZj1QLmdldChlKTtpZighZilyZXR1cm4hMDtpZigicmVsYXRlZFRhcmdldCJpbiBiKXt2YXIgZz1NKGIpO2lmKGcucmVsYXRlZFRhcmdldCl7dmFyIGg9TihnLnJlbGF0ZWRUYXJnZXQpLGo9aShlLGgpO2lmKGo9PT1kKXJldHVybiEwO1Quc2V0KGIsail9fVUuc2V0KGIsYyk7dmFyIGs9Yi50eXBlLGw9ITE7Ui5zZXQoYixkKSxTLnNldChiLGUpO2Zvcih2YXIgbT0wO208Zi5sZW5ndGg7bSsrKXt2YXIgbj1mW21dO2lmKG4ucmVtb3ZlZClsPSEwO2Vsc2UgaWYoIShuLnR5cGUhPT1rfHwhbi5jYXB0dXJlJiZjPT09eC5DQVBUVVJJTkdfUEhBU0V8fG4uY2FwdHVyZSYmYz09PXguQlVCQkxJTkdfUEhBU0UpKXRyeXtpZigiZnVuY3Rpb24iPT10eXBlb2Ygbi5oYW5kbGVyP24uaGFuZGxlci5jYWxsKGUsYik6bi5oYW5kbGVyLmhhbmRsZUV2ZW50KGIpLFcuZ2V0KGIpKXJldHVybiExfWNhdGNoKG8pe3dpbmRvdy5vbmVycm9yP3dpbmRvdy5vbmVycm9yKG8ubWVzc2FnZSk6Y29uc29sZS5lcnJvcihvLG8uc3RhY2spfX1pZihsKXt2YXIgcD1mLnNsaWNlKCk7Zi5sZW5ndGg9MDtmb3IodmFyIG09MDttPHAubGVuZ3RoO20rKylwW21dLnJlbW92ZWR8fGYucHVzaChwW21dKX1yZXR1cm4hVi5nZXQoYil9ZnVuY3Rpb24gdyhhLGIsYyl7dGhpcy50eXBlPWEsdGhpcy5oYW5kbGVyPWIsdGhpcy5jYXB0dXJlPUJvb2xlYW4oYyl9ZnVuY3Rpb24geChhLGIpe3JldHVybiBhIGluc3RhbmNlb2YgXz8odGhpcy5pbXBsPWEsdm9pZCAwKTpOKEIoXywiRXZlbnQiLGEsYikpfWZ1bmN0aW9uIHkoYSl7cmV0dXJuIGEmJmEucmVsYXRlZFRhcmdldD9PYmplY3QuY3JlYXRlKGEse3JlbGF0ZWRUYXJnZXQ6e3ZhbHVlOk0oYS5yZWxhdGVkVGFyZ2V0KX19KTphfWZ1bmN0aW9uIHooYSxiLGMpe3ZhciBkPXdpbmRvd1thXSxlPWZ1bmN0aW9uKGIsYyl7cmV0dXJuIGIgaW5zdGFuY2VvZiBkPyh0aGlzLmltcGw9Yix2b2lkIDApOk4oQihkLGEsYixjKSl9O3JldHVybiBlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGIucHJvdG90eXBlKSxjJiZLKGUucHJvdG90eXBlLGMpLGQmJihkLnByb3RvdHlwZVsiaW5pdCIrYV0/TChkLGUsZG9jdW1lbnQuY3JlYXRlRXZlbnQoYSkpOkwoZCxlLG5ldyBkKCJ0ZW1wIikpKSxlfWZ1bmN0aW9uIEEoYSxiKXtyZXR1cm4gZnVuY3Rpb24oKXthcmd1bWVudHNbYl09TShhcmd1bWVudHNbYl0pO3ZhciBjPU0odGhpcyk7Y1thXS5hcHBseShjLGFyZ3VtZW50cyl9fWZ1bmN0aW9uIEIoYSxiLGMsZCl7aWYoamIpcmV0dXJuIG5ldyBhKGMseShkKSk7dmFyIGU9TShkb2N1bWVudC5jcmVhdGVFdmVudChiKSksZj1pYltiXSxnPVtjXTtyZXR1cm4gT2JqZWN0LmtleXMoZikuZm9yRWFjaChmdW5jdGlvbihhKXt2YXIgYj1udWxsIT1kJiZhIGluIGQ/ZFthXTpmW2FdOyJyZWxhdGVkVGFyZ2V0Ij09PWEmJihiPU0oYikpLGcucHVzaChiKX0pLGVbImluaXQiK2JdLmFwcGx5KGUsZyksZX1mdW5jdGlvbiBDKGEpe3JldHVybiJmdW5jdGlvbiI9PXR5cGVvZiBhPyEwOmEmJmEuaGFuZGxlRXZlbnR9ZnVuY3Rpb24gRChhKXt0aGlzLmltcGw9YX1mdW5jdGlvbiBFKGIpe3JldHVybiBiIGluc3RhbmNlb2YgTy5TaGFkb3dSb290JiYoYj1hLmdldEhvc3RGb3JTaGFkb3dSb290KGIpKSxNKGIpfWZ1bmN0aW9uIEYoYSl7SihhLG1iKX1mdW5jdGlvbiBHKGIsYyxkLGUpe2EucmVuZGVyQWxsUGVuZGluZygpO2Zvcih2YXIgZj1OKG5iLmNhbGwoYy5pbXBsLGQsZSkpLGg9ZyhmLHRoaXMpLGk9MDtpPGgubGVuZ3RoO2krKyl7dmFyIGo9aFtpXTtpZihqLmN1cnJlbnRUYXJnZXQ9PT1iKXJldHVybiBqLnRhcmdldH1yZXR1cm4gbnVsbH1mdW5jdGlvbiBIKGEpe3JldHVybiBmdW5jdGlvbigpe3ZhciBiPVguZ2V0KHRoaXMpO3JldHVybiBiJiZiW2FdJiZiW2FdLnZhbHVlfHxudWxsfX1mdW5jdGlvbiBJKGEpe3ZhciBiPWEuc2xpY2UoMik7cmV0dXJuIGZ1bmN0aW9uKGMpe3ZhciBkPVguZ2V0KHRoaXMpO2R8fChkPU9iamVjdC5jcmVhdGUobnVsbCksWC5zZXQodGhpcyxkKSk7dmFyIGU9ZFthXTtpZihlJiZ0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoYixlLndyYXBwZWQsITEpLCJmdW5jdGlvbiI9PXR5cGVvZiBjKXt2YXIgZj1mdW5jdGlvbihiKXt2YXIgZD1jLmNhbGwodGhpcyxiKTtkPT09ITE/Yi5wcmV2ZW50RGVmYXVsdCgpOiJvbmJlZm9yZXVubG9hZCI9PT1hJiYic3RyaW5nIj09dHlwZW9mIGQmJihiLnJldHVyblZhbHVlPWQpfTt0aGlzLmFkZEV2ZW50TGlzdGVuZXIoYixmLCExKSxkW2FdPXt2YWx1ZTpjLHdyYXBwZWQ6Zn19fX12YXIgSj1hLmZvcndhcmRNZXRob2RzVG9XcmFwcGVyLEs9YS5taXhpbixMPWEucmVnaXN0ZXJXcmFwcGVyLE09YS51bndyYXAsTj1hLndyYXAsTz1hLndyYXBwZXJzO25ldyBXZWFrTWFwO3ZhciBQPW5ldyBXZWFrTWFwLFE9bmV3IFdlYWtNYXAsUj1uZXcgV2Vha01hcCxTPW5ldyBXZWFrTWFwLFQ9bmV3IFdlYWtNYXAsVT1uZXcgV2Vha01hcCxWPW5ldyBXZWFrTWFwLFc9bmV3IFdlYWtNYXAsWD1uZXcgV2Vha01hcCxZPW5ldyBXZWFrTWFwLFo9MCwkPXdpbmRvdy5NdXRhdGlvbkV2ZW50O3cucHJvdG90eXBlPXtlcXVhbHM6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuaGFuZGxlcj09PWEuaGFuZGxlciYmdGhpcy50eXBlPT09YS50eXBlJiZ0aGlzLmNhcHR1cmU9PT1hLmNhcHR1cmV9LGdldCByZW1vdmVkKCl7cmV0dXJuIG51bGw9PT10aGlzLmhhbmRsZXJ9LHJlbW92ZTpmdW5jdGlvbigpe3RoaXMuaGFuZGxlcj1udWxsfX07dmFyIF89d2luZG93LkV2ZW50O3gucHJvdG90eXBlPXtnZXQgdGFyZ2V0KCl7cmV0dXJuIFIuZ2V0KHRoaXMpfSxnZXQgY3VycmVudFRhcmdldCgpe3JldHVybiBTLmdldCh0aGlzKX0sZ2V0IGV2ZW50UGhhc2UoKXtyZXR1cm4gVS5nZXQodGhpcyl9LGdldCBwYXRoKCl7dmFyIGE9bmV3IE8uTm9kZUxpc3QsYj1ZLmdldCh0aGlzKTtpZihiKXtmb3IodmFyIGM9MCxkPWIubGVuZ3RoLTEsZT1sKFMuZ2V0KHRoaXMpKSxmPTA7ZD49ZjtmKyspe3ZhciBnPWJbZl0uY3VycmVudFRhcmdldCxoPWwoZyk7bihlLGgpJiYoZiE9PWR8fGcgaW5zdGFuY2VvZiBPLk5vZGUpJiYoYVtjKytdPWcpfWEubGVuZ3RoPWN9cmV0dXJuIGF9LHN0b3BQcm9wYWdhdGlvbjpmdW5jdGlvbigpe1Yuc2V0KHRoaXMsITApfSxzdG9wSW1tZWRpYXRlUHJvcGFnYXRpb246ZnVuY3Rpb24oKXtWLnNldCh0aGlzLCEwKSxXLnNldCh0aGlzLCEwKX19LEwoXyx4LGRvY3VtZW50LmNyZWF0ZUV2ZW50KCJFdmVudCIpKTt2YXIgYWI9eigiVUlFdmVudCIseCksYmI9eigiQ3VzdG9tRXZlbnQiLHgpLGNiPXtnZXQgcmVsYXRlZFRhcmdldCgpe3JldHVybiBULmdldCh0aGlzKXx8TihNKHRoaXMpLnJlbGF0ZWRUYXJnZXQpfX0sZGI9Syh7aW5pdE1vdXNlRXZlbnQ6QSgiaW5pdE1vdXNlRXZlbnQiLDE0KX0sY2IpLGViPUsoe2luaXRGb2N1c0V2ZW50OkEoImluaXRGb2N1c0V2ZW50Iiw1KX0sY2IpLGZiPXooIk1vdXNlRXZlbnQiLGFiLGRiKSxnYj16KCJGb2N1c0V2ZW50IixhYixlYiksaGI9eigiTXV0YXRpb25FdmVudCIseCx7aW5pdE11dGF0aW9uRXZlbnQ6QSgiaW5pdE11dGF0aW9uRXZlbnQiLDMpLGdldCByZWxhdGVkTm9kZSgpe3JldHVybiBOKHRoaXMuaW1wbC5yZWxhdGVkTm9kZSl9fSksaWI9T2JqZWN0LmNyZWF0ZShudWxsKSxqYj1mdW5jdGlvbigpe3RyeXtuZXcgd2luZG93Lk1vdXNlRXZlbnQoImNsaWNrIil9Y2F0Y2goYSl7cmV0dXJuITF9cmV0dXJuITB9KCk7aWYoIWpiKXt2YXIga2I9ZnVuY3Rpb24oYSxiLGMpe2lmKGMpe3ZhciBkPWliW2NdO2I9SyhLKHt9LGQpLGIpfWliW2FdPWJ9O2tiKCJFdmVudCIse2J1YmJsZXM6ITEsY2FuY2VsYWJsZTohMX0pLGtiKCJDdXN0b21FdmVudCIse2RldGFpbDpudWxsfSwiRXZlbnQiKSxrYigiVUlFdmVudCIse3ZpZXc6bnVsbCxkZXRhaWw6MH0sIkV2ZW50Iiksa2IoIk1vdXNlRXZlbnQiLHtzY3JlZW5YOjAsc2NyZWVuWTowLGNsaWVudFg6MCxjbGllbnRZOjAsY3RybEtleTohMSxhbHRLZXk6ITEsc2hpZnRLZXk6ITEsbWV0YUtleTohMSxidXR0b246MCxyZWxhdGVkVGFyZ2V0Om51bGx9LCJVSUV2ZW50Iiksa2IoIkZvY3VzRXZlbnQiLHtyZWxhdGVkVGFyZ2V0Om51bGx9LCJVSUV2ZW50Iil9dmFyIGxiPXdpbmRvdy5FdmVudFRhcmdldCxtYj1bImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZGlzcGF0Y2hFdmVudCJdO1tOb2RlLFdpbmRvd10uZm9yRWFjaChmdW5jdGlvbihhKXt2YXIgYj1hLnByb3RvdHlwZTttYi5mb3JFYWNoKGZ1bmN0aW9uKGEpe09iamVjdC5kZWZpbmVQcm9wZXJ0eShiLGErIl8iLHt2YWx1ZTpiW2FdfSl9KX0pLEQucHJvdG90eXBlPXthZGRFdmVudExpc3RlbmVyOmZ1bmN0aW9uKGEsYixjKXtpZihDKGIpKXt2YXIgZD1uZXcgdyhhLGIsYyksZT1QLmdldCh0aGlzKTtpZihlKXtmb3IodmFyIGY9MDtmPGUubGVuZ3RoO2YrKylpZihkLmVxdWFscyhlW2ZdKSlyZXR1cm59ZWxzZSBlPVtdLFAuc2V0KHRoaXMsZSk7ZS5wdXNoKGQpO3ZhciBnPUUodGhpcyk7Zy5hZGRFdmVudExpc3RlbmVyXyhhLHEsITApfX0scmVtb3ZlRXZlbnRMaXN0ZW5lcjpmdW5jdGlvbihhLGIsYyl7Yz1Cb29sZWFuKGMpO3ZhciBkPVAuZ2V0KHRoaXMpO2lmKGQpe2Zvcih2YXIgZT0wLGY9ITEsZz0wO2c8ZC5sZW5ndGg7ZysrKWRbZ10udHlwZT09PWEmJmRbZ10uY2FwdHVyZT09PWMmJihlKyssZFtnXS5oYW5kbGVyPT09YiYmKGY9ITAsZFtnXS5yZW1vdmUoKSkpO2lmKGYmJjE9PT1lKXt2YXIgaD1FKHRoaXMpO2gucmVtb3ZlRXZlbnRMaXN0ZW5lcl8oYSxxLCEwKX19fSxkaXNwYXRjaEV2ZW50OmZ1bmN0aW9uKGEpe3ZhciBiPUUodGhpcyksYz1NKGEpO3JldHVybiBRLnNldChjLCExKSxiLmRpc3BhdGNoRXZlbnRfKGMpfX0sbGImJkwobGIsRCk7dmFyIG5iPWRvY3VtZW50LmVsZW1lbnRGcm9tUG9pbnQ7YS5hZGp1c3RSZWxhdGVkVGFyZ2V0PWksYS5lbGVtZW50RnJvbVBvaW50PUcsYS5nZXRFdmVudEhhbmRsZXJHZXR0ZXI9SCxhLmdldEV2ZW50SGFuZGxlclNldHRlcj1JLGEubXV0ZU11dGF0aW9uRXZlbnRzPW8sYS51bm11dGVNdXRhdGlvbkV2ZW50cz1wLGEud3JhcEV2ZW50VGFyZ2V0TWV0aG9kcz1GLGEud3JhcHBlcnMuQ3VzdG9tRXZlbnQ9YmIsYS53cmFwcGVycy5FdmVudD14LGEud3JhcHBlcnMuRXZlbnRUYXJnZXQ9RCxhLndyYXBwZXJzLkZvY3VzRXZlbnQ9Z2IsYS53cmFwcGVycy5Nb3VzZUV2ZW50PWZiLGEud3JhcHBlcnMuTXV0YXRpb25FdmVudD1oYixhLndyYXBwZXJzLlVJRXZlbnQ9YWJ9KHRoaXMuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEsYil7T2JqZWN0LmRlZmluZVByb3BlcnR5KGEsYix7ZW51bWVyYWJsZTohMX0pfWZ1bmN0aW9uIGMoKXt0aGlzLmxlbmd0aD0wLGIodGhpcywibGVuZ3RoIil9ZnVuY3Rpb24gZChhKXtpZihudWxsPT1hKXJldHVybiBhO2Zvcih2YXIgYj1uZXcgYyxkPTAsZT1hLmxlbmd0aDtlPmQ7ZCsrKWJbZF09ZihhW2RdKTtyZXR1cm4gYi5sZW5ndGg9ZSxifWZ1bmN0aW9uIGUoYSxiKXthLnByb3RvdHlwZVtiXT1mdW5jdGlvbigpe3JldHVybiBkKHRoaXMuaW1wbFtiXS5hcHBseSh0aGlzLmltcGwsYXJndW1lbnRzKSl9fXZhciBmPWEud3JhcDtjLnByb3RvdHlwZT17aXRlbTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpc1thXX19LGIoYy5wcm90b3R5cGUsIml0ZW0iKSxhLndyYXBwZXJzLk5vZGVMaXN0PWMsYS5hZGRXcmFwTm9kZUxpc3RNZXRob2Q9ZSxhLndyYXBOb2RlTGlzdD1kfSh0aGlzLlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtvKGEgaW5zdGFuY2VvZiBrKX1mdW5jdGlvbiBjKGEsYixjLGQpe2lmKCEoYSBpbnN0YW5jZW9mIERvY3VtZW50RnJhZ21lbnQpKXJldHVybiBhLnBhcmVudE5vZGUmJmEucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChhKSxhLnBhcmVudE5vZGVfPWIsYS5wcmV2aW91c1NpYmxpbmdfPWMsYS5uZXh0U2libGluZ189ZCxjJiYoYy5uZXh0U2libGluZ189YSksZCYmKGQucHJldmlvdXNTaWJsaW5nXz1hKSxbYV07Zm9yKHZhciBlLGY9W107ZT1hLmZpcnN0Q2hpbGQ7KWEucmVtb3ZlQ2hpbGQoZSksZi5wdXNoKGUpLGUucGFyZW50Tm9kZV89Yjtmb3IodmFyIGc9MDtnPGYubGVuZ3RoO2crKylmW2ddLnByZXZpb3VzU2libGluZ189ZltnLTFdfHxjLGZbZ10ubmV4dFNpYmxpbmdfPWZbZysxXXx8ZDtyZXR1cm4gYyYmKGMubmV4dFNpYmxpbmdfPWZbMF0pLGQmJihkLnByZXZpb3VzU2libGluZ189ZltmLmxlbmd0aC0xXSksZn1mdW5jdGlvbiBkKGEpe2lmKGEgaW5zdGFuY2VvZiBEb2N1bWVudEZyYWdtZW50KXtmb3IodmFyIGI9W10sYz0wLGQ9YS5maXJzdENoaWxkO2Q7ZD1kLm5leHRTaWJsaW5nKWJbYysrXT1kO3JldHVybiBifXJldHVyblthXX1mdW5jdGlvbiBlKGEpe2Zvcih2YXIgYj0wO2I8YS5sZW5ndGg7YisrKWFbYl0ubm9kZVdhc0FkZGVkXygpfWZ1bmN0aW9uIGYoYSxiKXt2YXIgYz1hLm5vZGVUeXBlPT09ay5ET0NVTUVOVF9OT0RFP2E6YS5vd25lckRvY3VtZW50O2MhPT1iLm93bmVyRG9jdW1lbnQmJmMuYWRvcHROb2RlKGIpfWZ1bmN0aW9uIGcoYixjKXtpZihjLmxlbmd0aCl7dmFyIGQ9Yi5vd25lckRvY3VtZW50O2lmKGQhPT1jWzBdLm93bmVyRG9jdW1lbnQpZm9yKHZhciBlPTA7ZTxjLmxlbmd0aDtlKyspYS5hZG9wdE5vZGVOb1JlbW92ZShjW2VdLGQpfX1mdW5jdGlvbiBoKGEsYil7ZyhhLGIpO3ZhciBjPWIubGVuZ3RoO2lmKDE9PT1jKXJldHVybiByKGJbMF0pO2Zvcih2YXIgZD1yKGEub3duZXJEb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCkpLGU9MDtjPmU7ZSsrKWQuYXBwZW5kQ2hpbGQocihiW2VdKSk7cmV0dXJuIGR9ZnVuY3Rpb24gaShhKXtpZihhLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcigpKXtmb3IodmFyIGI9YS5maXJzdENoaWxkO2I7KXtvKGIucGFyZW50Tm9kZT09PWEpO3ZhciBjPWIubmV4dFNpYmxpbmcsZD1yKGIpLGU9ZC5wYXJlbnROb2RlO2UmJnkuY2FsbChlLGQpLGIucHJldmlvdXNTaWJsaW5nXz1iLm5leHRTaWJsaW5nXz1iLnBhcmVudE5vZGVfPW51bGwsYj1jfWEuZmlyc3RDaGlsZF89YS5sYXN0Q2hpbGRfPW51bGx9ZWxzZSBmb3IodmFyIGMsZj1yKGEpLGc9Zi5maXJzdENoaWxkO2c7KWM9Zy5uZXh0U2libGluZyx5LmNhbGwoZixnKSxnPWN9ZnVuY3Rpb24gaihhKXt2YXIgYj1hLnBhcmVudE5vZGU7cmV0dXJuIGImJmIuaW52YWxpZGF0ZVNoYWRvd1JlbmRlcmVyKCl9ZnVuY3Rpb24gayhhKXtvKGEgaW5zdGFuY2VvZiB1KSxsLmNhbGwodGhpcyxhKSx0aGlzLnBhcmVudE5vZGVfPXZvaWQgMCx0aGlzLmZpcnN0Q2hpbGRfPXZvaWQgMCx0aGlzLmxhc3RDaGlsZF89dm9pZCAwLHRoaXMubmV4dFNpYmxpbmdfPXZvaWQgMCx0aGlzLnByZXZpb3VzU2libGluZ189dm9pZCAwfXZhciBsPWEud3JhcHBlcnMuRXZlbnRUYXJnZXQsbT1hLndyYXBwZXJzLk5vZGVMaXN0LG49YS5kZWZpbmVXcmFwR2V0dGVyLG89YS5hc3NlcnQscD1hLm1peGluLHE9YS5yZWdpc3RlcldyYXBwZXIscj1hLnVud3JhcCxzPWEud3JhcCx0PWEud3JhcElmTmVlZGVkLHU9d2luZG93Lk5vZGUsdj11LnByb3RvdHlwZS5hcHBlbmRDaGlsZCx3PXUucHJvdG90eXBlLmluc2VydEJlZm9yZSx4PXUucHJvdG90eXBlLnJlcGxhY2VDaGlsZCx5PXUucHJvdG90eXBlLnJlbW92ZUNoaWxkLHo9dS5wcm90b3R5cGUuY29tcGFyZURvY3VtZW50UG9zaXRpb247ay5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShsLnByb3RvdHlwZSkscChrLnByb3RvdHlwZSx7YXBwZW5kQ2hpbGQ6ZnVuY3Rpb24oYSl7YihhKTt2YXIgZztpZih0aGlzLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcigpfHxqKGEpKXt2YXIgaT10aGlzLmxhc3RDaGlsZCxrPW51bGw7Zz1jKGEsdGhpcyxpLGspLHRoaXMubGFzdENoaWxkXz1nW2cubGVuZ3RoLTFdLGl8fCh0aGlzLmZpcnN0Q2hpbGRfPWdbMF0pLHYuY2FsbCh0aGlzLmltcGwsaCh0aGlzLGcpKX1lbHNlIGc9ZChhKSxmKHRoaXMsYSksdi5jYWxsKHRoaXMuaW1wbCxyKGEpKTtyZXR1cm4gZShnKSxhfSxpbnNlcnRCZWZvcmU6ZnVuY3Rpb24oYSxpKXtpZighaSlyZXR1cm4gdGhpcy5hcHBlbmRDaGlsZChhKTtiKGEpLGIoaSksbyhpLnBhcmVudE5vZGU9PT10aGlzKTt2YXIgaztpZih0aGlzLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcigpfHxqKGEpKXt2YXIgbD1pLnByZXZpb3VzU2libGluZyxtPWk7az1jKGEsdGhpcyxsLG0pLHRoaXMuZmlyc3RDaGlsZD09PWkmJih0aGlzLmZpcnN0Q2hpbGRfPWtbMF0pO3ZhciBuPXIoaSkscD1uLnBhcmVudE5vZGU7cD93LmNhbGwocCxoKHRoaXMsayksbik6Zyh0aGlzLGspfWVsc2Ugaz1kKGEpLGYodGhpcyxhKSx3LmNhbGwodGhpcy5pbXBsLHIoYSkscihpKSk7cmV0dXJuIGUoayksYX0scmVtb3ZlQ2hpbGQ6ZnVuY3Rpb24oYSl7aWYoYihhKSxhLnBhcmVudE5vZGUhPT10aGlzKXRocm93IG5ldyBFcnJvcigiTm90Rm91bmRFcnJvciIpO3ZhciBjPXIoYSk7aWYodGhpcy5pbnZhbGlkYXRlU2hhZG93UmVuZGVyZXIoKSl7dmFyIGQ9dGhpcy5maXJzdENoaWxkLGU9dGhpcy5sYXN0Q2hpbGQsZj1hLm5leHRTaWJsaW5nLGc9YS5wcmV2aW91c1NpYmxpbmcsaD1jLnBhcmVudE5vZGU7aCYmeS5jYWxsKGgsYyksZD09PWEmJih0aGlzLmZpcnN0Q2hpbGRfPWYpLGU9PT1hJiYodGhpcy5sYXN0Q2hpbGRfPWcpLGcmJihnLm5leHRTaWJsaW5nXz1mKSxmJiYoZi5wcmV2aW91c1NpYmxpbmdfPWcpLGEucHJldmlvdXNTaWJsaW5nXz1hLm5leHRTaWJsaW5nXz1hLnBhcmVudE5vZGVfPXZvaWQgMH1lbHNlIHkuY2FsbCh0aGlzLmltcGwsYyk7cmV0dXJuIGF9LHJlcGxhY2VDaGlsZDpmdW5jdGlvbihhLGcpe2lmKGIoYSksYihnKSxnLnBhcmVudE5vZGUhPT10aGlzKXRocm93IG5ldyBFcnJvcigiTm90Rm91bmRFcnJvciIpO3ZhciBpLGs9cihnKTtpZih0aGlzLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcigpfHxqKGEpKXt2YXIgbD1nLnByZXZpb3VzU2libGluZyxtPWcubmV4dFNpYmxpbmc7bT09PWEmJihtPWEubmV4dFNpYmxpbmcpLGk9YyhhLHRoaXMsbCxtKSx0aGlzLmZpcnN0Q2hpbGQ9PT1nJiYodGhpcy5maXJzdENoaWxkXz1pWzBdKSx0aGlzLmxhc3RDaGlsZD09PWcmJih0aGlzLmxhc3RDaGlsZF89aVtpLmxlbmd0aC0xXSksZy5wcmV2aW91c1NpYmxpbmdfPWcubmV4dFNpYmxpbmdfPWcucGFyZW50Tm9kZV89dm9pZCAwLGsucGFyZW50Tm9kZSYmeC5jYWxsKGsucGFyZW50Tm9kZSxoKHRoaXMsaSksayl9ZWxzZSBpPWQoYSksZih0aGlzLGEpLHguY2FsbCh0aGlzLmltcGwscihhKSxrKTtyZXR1cm4gZShpKSxnfSxub2RlV2FzQWRkZWRfOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPXRoaXMuZmlyc3RDaGlsZDthO2E9YS5uZXh0U2libGluZylhLm5vZGVXYXNBZGRlZF8oKX0saGFzQ2hpbGROb2RlczpmdW5jdGlvbigpe3JldHVybiBudWxsIT09dGhpcy5maXJzdENoaWxkfSxnZXQgcGFyZW50Tm9kZSgpe3JldHVybiB2b2lkIDAhPT10aGlzLnBhcmVudE5vZGVfP3RoaXMucGFyZW50Tm9kZV86cyh0aGlzLmltcGwucGFyZW50Tm9kZSl9LGdldCBmaXJzdENoaWxkKCl7cmV0dXJuIHZvaWQgMCE9PXRoaXMuZmlyc3RDaGlsZF8/dGhpcy5maXJzdENoaWxkXzpzKHRoaXMuaW1wbC5maXJzdENoaWxkKX0sZ2V0IGxhc3RDaGlsZCgpe3JldHVybiB2b2lkIDAhPT10aGlzLmxhc3RDaGlsZF8/dGhpcy5sYXN0Q2hpbGRfOnModGhpcy5pbXBsLmxhc3RDaGlsZCl9LGdldCBuZXh0U2libGluZygpe3JldHVybiB2b2lkIDAhPT10aGlzLm5leHRTaWJsaW5nXz90aGlzLm5leHRTaWJsaW5nXzpzKHRoaXMuaW1wbC5uZXh0U2libGluZyl9LGdldCBwcmV2aW91c1NpYmxpbmcoKXtyZXR1cm4gdm9pZCAwIT09dGhpcy5wcmV2aW91c1NpYmxpbmdfP3RoaXMucHJldmlvdXNTaWJsaW5nXzpzKHRoaXMuaW1wbC5wcmV2aW91c1NpYmxpbmcpfSxnZXQgcGFyZW50RWxlbWVudCgpe2Zvcih2YXIgYT10aGlzLnBhcmVudE5vZGU7YSYmYS5ub2RlVHlwZSE9PWsuRUxFTUVOVF9OT0RFOylhPWEucGFyZW50Tm9kZTtyZXR1cm4gYX0sZ2V0IHRleHRDb250ZW50KCl7Zm9yKHZhciBhPSIiLGI9dGhpcy5maXJzdENoaWxkO2I7Yj1iLm5leHRTaWJsaW5nKWErPWIudGV4dENvbnRlbnQ7cmV0dXJuIGF9LHNldCB0ZXh0Q29udGVudChhKXtpZih0aGlzLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcigpKXtpZihpKHRoaXMpLCIiIT09YSl7dmFyIGI9dGhpcy5pbXBsLm93bmVyRG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoYSk7dGhpcy5hcHBlbmRDaGlsZChiKX19ZWxzZSB0aGlzLmltcGwudGV4dENvbnRlbnQ9YX0sZ2V0IGNoaWxkTm9kZXMoKXtmb3IodmFyIGE9bmV3IG0sYj0wLGM9dGhpcy5maXJzdENoaWxkO2M7Yz1jLm5leHRTaWJsaW5nKWFbYisrXT1jO3JldHVybiBhLmxlbmd0aD1iLGF9LGNsb25lTm9kZTpmdW5jdGlvbihhKXtpZighdGhpcy5pbnZhbGlkYXRlU2hhZG93UmVuZGVyZXIoKSlyZXR1cm4gcyh0aGlzLmltcGwuY2xvbmVOb2RlKGEpKTt2YXIgYj1zKHRoaXMuaW1wbC5jbG9uZU5vZGUoITEpKTtpZihhKWZvcih2YXIgYz10aGlzLmZpcnN0Q2hpbGQ7YztjPWMubmV4dFNpYmxpbmcpYi5hcHBlbmRDaGlsZChjLmNsb25lTm9kZSghMCkpO3JldHVybiBifSxjb250YWluczpmdW5jdGlvbihhKXtpZighYSlyZXR1cm4hMTtpZihhPXQoYSksYT09PXRoaXMpcmV0dXJuITA7CnZhciBiPWEucGFyZW50Tm9kZTtyZXR1cm4gYj90aGlzLmNvbnRhaW5zKGIpOiExfSxjb21wYXJlRG9jdW1lbnRQb3NpdGlvbjpmdW5jdGlvbihhKXtyZXR1cm4gei5jYWxsKHRoaXMuaW1wbCxyKGEpKX19KSxuKGssIm93bmVyRG9jdW1lbnQiKSxxKHUsayxkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCkpLGRlbGV0ZSBrLnByb3RvdHlwZS5xdWVyeVNlbGVjdG9yLGRlbGV0ZSBrLnByb3RvdHlwZS5xdWVyeVNlbGVjdG9yQWxsLGsucHJvdG90eXBlPXAoT2JqZWN0LmNyZWF0ZShsLnByb3RvdHlwZSksay5wcm90b3R5cGUpLGEud3JhcHBlcnMuTm9kZT1rfSh0aGlzLlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhLGMpe2Zvcih2YXIgZCxlPWEuZmlyc3RFbGVtZW50Q2hpbGQ7ZTspe2lmKGUubWF0Y2hlcyhjKSlyZXR1cm4gZTtpZihkPWIoZSxjKSlyZXR1cm4gZDtlPWUubmV4dEVsZW1lbnRTaWJsaW5nfXJldHVybiBudWxsfWZ1bmN0aW9uIGMoYSxiLGQpe2Zvcih2YXIgZT1hLmZpcnN0RWxlbWVudENoaWxkO2U7KWUubWF0Y2hlcyhiKSYmKGRbZC5sZW5ndGgrK109ZSksYyhlLGIsZCksZT1lLm5leHRFbGVtZW50U2libGluZztyZXR1cm4gZH12YXIgZD17cXVlcnlTZWxlY3RvcjpmdW5jdGlvbihhKXtyZXR1cm4gYih0aGlzLGEpfSxxdWVyeVNlbGVjdG9yQWxsOmZ1bmN0aW9uKGEpe3JldHVybiBjKHRoaXMsYSxuZXcgTm9kZUxpc3QpfX0sZT17Z2V0RWxlbWVudHNCeVRhZ05hbWU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMucXVlcnlTZWxlY3RvckFsbChhKX0sZ2V0RWxlbWVudHNCeUNsYXNzTmFtZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5xdWVyeVNlbGVjdG9yQWxsKCIuIithKX0sZ2V0RWxlbWVudHNCeVRhZ05hbWVOUzpmdW5jdGlvbihhLGIpe2lmKCIqIj09PWEpcmV0dXJuIHRoaXMuZ2V0RWxlbWVudHNCeVRhZ05hbWUoYik7Zm9yKHZhciBjPW5ldyBOb2RlTGlzdCxkPXRoaXMuZ2V0RWxlbWVudHNCeVRhZ05hbWUoYiksZT0wLGY9MDtlPGQubGVuZ3RoO2UrKylkW2VdLm5hbWVzcGFjZVVSST09PWEmJihjW2YrK109ZFtlXSk7cmV0dXJuIGMubGVuZ3RoPWYsY319O2EuR2V0RWxlbWVudHNCeUludGVyZmFjZT1lLGEuU2VsZWN0b3JzSW50ZXJmYWNlPWR9KHRoaXMuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe2Zvcig7YSYmYS5ub2RlVHlwZSE9PU5vZGUuRUxFTUVOVF9OT0RFOylhPWEubmV4dFNpYmxpbmc7cmV0dXJuIGF9ZnVuY3Rpb24gYyhhKXtmb3IoO2EmJmEubm9kZVR5cGUhPT1Ob2RlLkVMRU1FTlRfTk9ERTspYT1hLnByZXZpb3VzU2libGluZztyZXR1cm4gYX12YXIgZD1hLndyYXBwZXJzLk5vZGVMaXN0LGU9e2dldCBmaXJzdEVsZW1lbnRDaGlsZCgpe3JldHVybiBiKHRoaXMuZmlyc3RDaGlsZCl9LGdldCBsYXN0RWxlbWVudENoaWxkKCl7cmV0dXJuIGModGhpcy5sYXN0Q2hpbGQpfSxnZXQgY2hpbGRFbGVtZW50Q291bnQoKXtmb3IodmFyIGE9MCxiPXRoaXMuZmlyc3RFbGVtZW50Q2hpbGQ7YjtiPWIubmV4dEVsZW1lbnRTaWJsaW5nKWErKztyZXR1cm4gYX0sZ2V0IGNoaWxkcmVuKCl7Zm9yKHZhciBhPW5ldyBkLGI9MCxjPXRoaXMuZmlyc3RFbGVtZW50Q2hpbGQ7YztjPWMubmV4dEVsZW1lbnRTaWJsaW5nKWFbYisrXT1jO3JldHVybiBhLmxlbmd0aD1iLGF9fSxmPXtnZXQgbmV4dEVsZW1lbnRTaWJsaW5nKCl7cmV0dXJuIGIodGhpcy5uZXh0U2libGluZyl9LGdldCBwcmV2aW91c0VsZW1lbnRTaWJsaW5nKCl7cmV0dXJuIGModGhpcy5wcmV2aW91c1NpYmxpbmcpfX07YS5DaGlsZE5vZGVJbnRlcmZhY2U9ZixhLlBhcmVudE5vZGVJbnRlcmZhY2U9ZX0odGhpcy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7ZC5jYWxsKHRoaXMsYSl9dmFyIGM9YS5DaGlsZE5vZGVJbnRlcmZhY2UsZD1hLndyYXBwZXJzLk5vZGUsZT1hLm1peGluLGY9YS5yZWdpc3RlcldyYXBwZXIsZz13aW5kb3cuQ2hhcmFjdGVyRGF0YTtiLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGQucHJvdG90eXBlKSxlKGIucHJvdG90eXBlLHtnZXQgdGV4dENvbnRlbnQoKXtyZXR1cm4gdGhpcy5kYXRhfSxzZXQgdGV4dENvbnRlbnQoYSl7dGhpcy5kYXRhPWF9fSksZShiLnByb3RvdHlwZSxjKSxmKGcsYixkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgiIikpLGEud3JhcHBlcnMuQ2hhcmFjdGVyRGF0YT1ifSh0aGlzLlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihiLGMpe3ZhciBkPWIucGFyZW50Tm9kZTtpZihkJiZkLnNoYWRvd1Jvb3Qpe3ZhciBlPWEuZ2V0UmVuZGVyZXJGb3JIb3N0KGQpO2UuZGVwZW5kc09uQXR0cmlidXRlKGMpJiZlLmludmFsaWRhdGUoKX19ZnVuY3Rpb24gYyhhKXtnLmNhbGwodGhpcyxhKX1mdW5jdGlvbiBkKGEsYyxkKXt2YXIgZT1kfHxjO09iamVjdC5kZWZpbmVQcm9wZXJ0eShhLGMse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmltcGxbY119LHNldDpmdW5jdGlvbihhKXt0aGlzLmltcGxbY109YSxiKHRoaXMsZSl9LGNvbmZpZ3VyYWJsZTohMCxlbnVtZXJhYmxlOiEwfSl9dmFyIGU9YS5DaGlsZE5vZGVJbnRlcmZhY2UsZj1hLkdldEVsZW1lbnRzQnlJbnRlcmZhY2UsZz1hLndyYXBwZXJzLk5vZGUsaD1hLlBhcmVudE5vZGVJbnRlcmZhY2UsaT1hLlNlbGVjdG9yc0ludGVyZmFjZTthLmFkZFdyYXBOb2RlTGlzdE1ldGhvZDt2YXIgaj1hLm1peGluLGs9YS5vbmVPZixsPWEucmVnaXN0ZXJXcmFwcGVyLG09YS53cmFwcGVycyxuPXdpbmRvdy5FbGVtZW50LG89ayhuLnByb3RvdHlwZSxbIm1hdGNoZXMiLCJtb3pNYXRjaGVzU2VsZWN0b3IiLCJtc01hdGNoZXNTZWxlY3RvciIsIndlYmtpdE1hdGNoZXNTZWxlY3RvciJdKSxwPW4ucHJvdG90eXBlW29dO2MucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZy5wcm90b3R5cGUpLGooYy5wcm90b3R5cGUse2NyZWF0ZVNoYWRvd1Jvb3Q6ZnVuY3Rpb24oKXt2YXIgYj1uZXcgbS5TaGFkb3dSb290KHRoaXMpO3RoaXMuaW1wbC5wb2x5bWVyU2hhZG93Um9vdF89Yjt2YXIgYz1hLmdldFJlbmRlcmVyRm9ySG9zdCh0aGlzKTtyZXR1cm4gYy5pbnZhbGlkYXRlKCksYn0sZ2V0IHNoYWRvd1Jvb3QoKXtyZXR1cm4gdGhpcy5pbXBsLnBvbHltZXJTaGFkb3dSb290X3x8bnVsbH0sc2V0QXR0cmlidXRlOmZ1bmN0aW9uKGEsYyl7dGhpcy5pbXBsLnNldEF0dHJpYnV0ZShhLGMpLGIodGhpcyxhKX0scmVtb3ZlQXR0cmlidXRlOmZ1bmN0aW9uKGEpe3RoaXMuaW1wbC5yZW1vdmVBdHRyaWJ1dGUoYSksYih0aGlzLGEpfSxtYXRjaGVzOmZ1bmN0aW9uKGEpe3JldHVybiBwLmNhbGwodGhpcy5pbXBsLGEpfX0pLGMucHJvdG90eXBlW29dPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLm1hdGNoZXMoYSl9LG4ucHJvdG90eXBlLndlYmtpdENyZWF0ZVNoYWRvd1Jvb3QmJihjLnByb3RvdHlwZS53ZWJraXRDcmVhdGVTaGFkb3dSb290PWMucHJvdG90eXBlLmNyZWF0ZVNoYWRvd1Jvb3QpLGQoYy5wcm90b3R5cGUsImlkIiksZChjLnByb3RvdHlwZSwiY2xhc3NOYW1lIiwiY2xhc3MiKSxqKGMucHJvdG90eXBlLGUpLGooYy5wcm90b3R5cGUsZiksaihjLnByb3RvdHlwZSxoKSxqKGMucHJvdG90eXBlLGkpLGwobixjKSxhLm1hdGNoZXNOYW1lPW8sYS53cmFwcGVycy5FbGVtZW50PWN9KHRoaXMuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe3N3aXRjaChhKXtjYXNlIiYiOnJldHVybiImYW1wOyI7Y2FzZSI8IjpyZXR1cm4iJmx0OyI7Y2FzZSciJzpyZXR1cm4iJnF1b3Q7In19ZnVuY3Rpb24gYyhhKXtyZXR1cm4gYS5yZXBsYWNlKHIsYil9ZnVuY3Rpb24gZChhKXtzd2l0Y2goYS5ub2RlVHlwZSl7Y2FzZSBOb2RlLkVMRU1FTlRfTk9ERTpmb3IodmFyIGIsZD1hLnRhZ05hbWUudG9Mb3dlckNhc2UoKSxmPSI8IitkLGc9YS5hdHRyaWJ1dGVzLGg9MDtiPWdbaF07aCsrKWYrPSIgIitiLm5hbWUrJz0iJytjKGIudmFsdWUpKyciJztyZXR1cm4gZis9Ij4iLHNbZF0/ZjpmK2UoYSkrIjwvIitkKyI+IjtjYXNlIE5vZGUuVEVYVF9OT0RFOnJldHVybiBjKGEubm9kZVZhbHVlKTtjYXNlIE5vZGUuQ09NTUVOVF9OT0RFOnJldHVybiI8IS0tIitjKGEubm9kZVZhbHVlKSsiLS0+IjtkZWZhdWx0OnRocm93IGNvbnNvbGUuZXJyb3IoYSksbmV3IEVycm9yKCJub3QgaW1wbGVtZW50ZWQiKX19ZnVuY3Rpb24gZShhKXtmb3IodmFyIGI9IiIsYz1hLmZpcnN0Q2hpbGQ7YztjPWMubmV4dFNpYmxpbmcpYis9ZChjKTtyZXR1cm4gYn1mdW5jdGlvbiBmKGEsYixjKXt2YXIgZD1jfHwiZGl2IjthLnRleHRDb250ZW50PSIiO3ZhciBlPXAoYS5vd25lckRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoZCkpO2UuaW5uZXJIVE1MPWI7Zm9yKHZhciBmO2Y9ZS5maXJzdENoaWxkOylhLmFwcGVuZENoaWxkKHEoZikpfWZ1bmN0aW9uIGcoYSl7bC5jYWxsKHRoaXMsYSl9ZnVuY3Rpb24gaChiKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gYS5yZW5kZXJBbGxQZW5kaW5nKCksdGhpcy5pbXBsW2JdfX1mdW5jdGlvbiBpKGEpe20oZyxhLGgoYSkpfWZ1bmN0aW9uIGooYil7T2JqZWN0LmRlZmluZVByb3BlcnR5KGcucHJvdG90eXBlLGIse2dldDpoKGIpLHNldDpmdW5jdGlvbihjKXthLnJlbmRlckFsbFBlbmRpbmcoKSx0aGlzLmltcGxbYl09Y30sY29uZmlndXJhYmxlOiEwLGVudW1lcmFibGU6ITB9KX1mdW5jdGlvbiBrKGIpe09iamVjdC5kZWZpbmVQcm9wZXJ0eShnLnByb3RvdHlwZSxiLHt2YWx1ZTpmdW5jdGlvbigpe3JldHVybiBhLnJlbmRlckFsbFBlbmRpbmcoKSx0aGlzLmltcGxbYl0uYXBwbHkodGhpcy5pbXBsLGFyZ3VtZW50cyl9LGNvbmZpZ3VyYWJsZTohMCxlbnVtZXJhYmxlOiEwfSl9dmFyIGw9YS53cmFwcGVycy5FbGVtZW50LG09YS5kZWZpbmVHZXR0ZXIsbj1hLm1peGluLG89YS5yZWdpc3RlcldyYXBwZXIscD1hLnVud3JhcCxxPWEud3JhcCxyPS8mfDx8Ii9nLHM9e2FyZWE6ITAsYmFzZTohMCxicjohMCxjb2w6ITAsY29tbWFuZDohMCxlbWJlZDohMCxocjohMCxpbWc6ITAsaW5wdXQ6ITAsa2V5Z2VuOiEwLGxpbms6ITAsbWV0YTohMCxwYXJhbTohMCxzb3VyY2U6ITAsdHJhY2s6ITAsd2JyOiEwfSx0PXdpbmRvdy5IVE1MRWxlbWVudDtnLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGwucHJvdG90eXBlKSxuKGcucHJvdG90eXBlLHtnZXQgaW5uZXJIVE1MKCl7cmV0dXJuIGUodGhpcyl9LHNldCBpbm5lckhUTUwoYSl7dGhpcy5pbnZhbGlkYXRlU2hhZG93UmVuZGVyZXIoKT9mKHRoaXMsYSx0aGlzLnRhZ05hbWUpOnRoaXMuaW1wbC5pbm5lckhUTUw9YX0sZ2V0IG91dGVySFRNTCgpe3JldHVybiBkKHRoaXMpfSxzZXQgb3V0ZXJIVE1MKGEpe3ZhciBiPXRoaXMucGFyZW50Tm9kZTtiJiYoYi5pbnZhbGlkYXRlU2hhZG93UmVuZGVyZXIoKSx0aGlzLmltcGwub3V0ZXJIVE1MPWEpfX0pLFsiY2xpZW50SGVpZ2h0IiwiY2xpZW50TGVmdCIsImNsaWVudFRvcCIsImNsaWVudFdpZHRoIiwib2Zmc2V0SGVpZ2h0Iiwib2Zmc2V0TGVmdCIsIm9mZnNldFRvcCIsIm9mZnNldFdpZHRoIiwic2Nyb2xsSGVpZ2h0Iiwic2Nyb2xsV2lkdGgiXS5mb3JFYWNoKGkpLFsic2Nyb2xsTGVmdCIsInNjcm9sbFRvcCJdLmZvckVhY2goaiksWyJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJnZXRDbGllbnRSZWN0cyIsInNjcm9sbEludG9WaWV3Il0uZm9yRWFjaChrKSxvKHQsZyxkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJiIikpLGEud3JhcHBlcnMuSFRNTEVsZW1lbnQ9ZyxhLmdldElubmVySFRNTD1lLGEuc2V0SW5uZXJIVE1MPWZ9KHRoaXMuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe2MuY2FsbCh0aGlzLGEpfXZhciBjPWEud3JhcHBlcnMuSFRNTEVsZW1lbnQsZD1hLm1peGluLGU9YS5yZWdpc3RlcldyYXBwZXIsZj1hLndyYXAsZz13aW5kb3cuSFRNTENhbnZhc0VsZW1lbnQ7Yi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShjLnByb3RvdHlwZSksZChiLnByb3RvdHlwZSx7Z2V0Q29udGV4dDpmdW5jdGlvbigpe3ZhciBhPXRoaXMuaW1wbC5nZXRDb250ZXh0LmFwcGx5KHRoaXMuaW1wbCxhcmd1bWVudHMpO3JldHVybiBhJiZmKGEpfX0pLGUoZyxiLGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImNhbnZhcyIpKSxhLndyYXBwZXJzLkhUTUxDYW52YXNFbGVtZW50PWJ9KHRoaXMuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe2MuY2FsbCh0aGlzLGEpfXZhciBjPWEud3JhcHBlcnMuSFRNTEVsZW1lbnQsZD1hLm1peGluLGU9YS5yZWdpc3RlcldyYXBwZXIsZj13aW5kb3cuSFRNTENvbnRlbnRFbGVtZW50O2IucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYy5wcm90b3R5cGUpLGQoYi5wcm90b3R5cGUse2dldCBzZWxlY3QoKXtyZXR1cm4gdGhpcy5nZXRBdHRyaWJ1dGUoInNlbGVjdCIpfSxzZXQgc2VsZWN0KGEpe3RoaXMuc2V0QXR0cmlidXRlKCJzZWxlY3QiLGEpfSxzZXRBdHRyaWJ1dGU6ZnVuY3Rpb24oYSxiKXtjLnByb3RvdHlwZS5zZXRBdHRyaWJ1dGUuY2FsbCh0aGlzLGEsYiksInNlbGVjdCI9PT1TdHJpbmcoYSkudG9Mb3dlckNhc2UoKSYmdGhpcy5pbnZhbGlkYXRlU2hhZG93UmVuZGVyZXIoITApfX0pLGYmJmUoZixiKSxhLndyYXBwZXJzLkhUTUxDb250ZW50RWxlbWVudD1ifSh0aGlzLlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtkLmNhbGwodGhpcyxhKX1mdW5jdGlvbiBjKGEsYil7aWYoISh0aGlzIGluc3RhbmNlb2YgYykpdGhyb3cgbmV3IFR5cGVFcnJvcigiRE9NIG9iamVjdCBjb25zdHJ1Y3RvciBjYW5ub3QgYmUgY2FsbGVkIGFzIGEgZnVuY3Rpb24uIik7dmFyIGU9Zihkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbWciKSk7dm9pZCAwIT09YSYmKGUud2lkdGg9YSksdm9pZCAwIT09YiYmKGUuaGVpZ2h0PWIpLGQuY2FsbCh0aGlzLGUpLGcoZSx0aGlzKX12YXIgZD1hLndyYXBwZXJzLkhUTUxFbGVtZW50LGU9YS5yZWdpc3RlcldyYXBwZXIsZj1hLnVud3JhcCxnPWEucmV3cmFwLGg9d2luZG93LkhUTUxJbWFnZUVsZW1lbnQ7Yi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShkLnByb3RvdHlwZSksZShoLGIsZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW1nIikpLGMucHJvdG90eXBlPWIucHJvdG90eXBlLGEud3JhcHBlcnMuSFRNTEltYWdlRWxlbWVudD1iLGEud3JhcHBlcnMuSW1hZ2U9Y30odGhpcy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7Yy5jYWxsKHRoaXMsYSl9dmFyIGM9YS53cmFwcGVycy5IVE1MRWxlbWVudCxkPWEubWl4aW4sZT1hLnJlZ2lzdGVyV3JhcHBlcixmPXdpbmRvdy5IVE1MU2hhZG93RWxlbWVudDtiLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGMucHJvdG90eXBlKSxkKGIucHJvdG90eXBlLHt9KSxmJiZlKGYsYiksYS53cmFwcGVycy5IVE1MU2hhZG93RWxlbWVudD1ifSh0aGlzLlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtpZighYS5kZWZhdWx0VmlldylyZXR1cm4gYTt2YXIgYj1vLmdldChhKTtpZighYil7Zm9yKGI9YS5pbXBsZW1lbnRhdGlvbi5jcmVhdGVIVE1MRG9jdW1lbnQoIiIpO2IubGFzdENoaWxkOyliLnJlbW92ZUNoaWxkKGIubGFzdENoaWxkKTtvLnNldChhLGIpfXJldHVybiBifWZ1bmN0aW9uIGMoYSl7dmFyIGMsZD1iKGEub3duZXJEb2N1bWVudCksZT1sKGQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpKTtmb3IoaCgpO2M9YS5maXJzdENoaWxkOyllLmFwcGVuZENoaWxkKGMpO3JldHVybiBrKCksZX1mdW5jdGlvbiBkKGEpe2lmKGUuY2FsbCh0aGlzLGEpLCFwKXt2YXIgYj1jKGEpO24uc2V0KHRoaXMsbShiKSl9fXZhciBlPWEud3JhcHBlcnMuSFRNTEVsZW1lbnQsZj1hLmdldElubmVySFRNTCxnPWEubWl4aW4saD1hLm11dGVNdXRhdGlvbkV2ZW50cyxpPWEucmVnaXN0ZXJXcmFwcGVyLGo9YS5zZXRJbm5lckhUTUwsaz1hLnVubXV0ZU11dGF0aW9uRXZlbnRzLGw9YS51bndyYXAsbT1hLndyYXAsbj1uZXcgV2Vha01hcCxvPW5ldyBXZWFrTWFwLHA9d2luZG93LkhUTUxUZW1wbGF0ZUVsZW1lbnQ7ZC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShlLnByb3RvdHlwZSksZyhkLnByb3RvdHlwZSx7Z2V0IGNvbnRlbnQoKXtyZXR1cm4gcD9tKHRoaXMuaW1wbC5jb250ZW50KTpuLmdldCh0aGlzKX0sZ2V0IGlubmVySFRNTCgpe3JldHVybiBmKHRoaXMuY29udGVudCl9LHNldCBpbm5lckhUTUwoYSl7aih0aGlzLmNvbnRlbnQsYSl9fSkscCYmaShwLGQpLGEud3JhcHBlcnMuSFRNTFRlbXBsYXRlRWxlbWVudD1kfSh0aGlzLlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtzd2l0Y2goYS5sb2NhbE5hbWUpe2Nhc2UiY29udGVudCI6cmV0dXJuIG5ldyBjKGEpO2Nhc2Uic2hhZG93IjpyZXR1cm4gbmV3IGUoYSk7Y2FzZSJ0ZW1wbGF0ZSI6cmV0dXJuIG5ldyBmKGEpfWQuY2FsbCh0aGlzLGEpfXZhciBjPWEud3JhcHBlcnMuSFRNTENvbnRlbnRFbGVtZW50LGQ9YS53cmFwcGVycy5IVE1MRWxlbWVudCxlPWEud3JhcHBlcnMuSFRNTFNoYWRvd0VsZW1lbnQsZj1hLndyYXBwZXJzLkhUTUxUZW1wbGF0ZUVsZW1lbnQ7YS5taXhpbjt2YXIgZz1hLnJlZ2lzdGVyV3JhcHBlcixoPXdpbmRvdy5IVE1MVW5rbm93bkVsZW1lbnQ7Yi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShkLnByb3RvdHlwZSksZyhoLGIpLGEud3JhcHBlcnMuSFRNTFVua25vd25FbGVtZW50PWJ9KHRoaXMuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe3RoaXMuaW1wbD1hfXZhciBjPWEubWl4aW4sZD1hLnJlZ2lzdGVyV3JhcHBlcixlPWEudW53cmFwLGY9YS53cmFwLGc9d2luZG93LkNhbnZhc1JlbmRlcmluZ0NvbnRleHQyRDtjKGIucHJvdG90eXBlLHtnZXQgY2FudmFzKCl7cmV0dXJuIGYodGhpcy5pbXBsLmNhbnZhcyl9LGRyYXdJbWFnZTpmdW5jdGlvbigpe2FyZ3VtZW50c1swXT1lKGFyZ3VtZW50c1swXSksdGhpcy5pbXBsLmRyYXdJbWFnZS5hcHBseSh0aGlzLmltcGwsYXJndW1lbnRzKX0sY3JlYXRlUGF0dGVybjpmdW5jdGlvbigpe3JldHVybiBhcmd1bWVudHNbMF09ZShhcmd1bWVudHNbMF0pLHRoaXMuaW1wbC5jcmVhdGVQYXR0ZXJuLmFwcGx5KHRoaXMuaW1wbCxhcmd1bWVudHMpfX0pLGQoZyxiKSxhLndyYXBwZXJzLkNhbnZhc1JlbmRlcmluZ0NvbnRleHQyRD1ifSh0aGlzLlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXt0aGlzLmltcGw9YX12YXIgYz1hLm1peGluLGQ9YS5yZWdpc3RlcldyYXBwZXIsZT1hLnVud3JhcCxmPWEud3JhcCxnPXdpbmRvdy5XZWJHTFJlbmRlcmluZ0NvbnRleHQ7ZyYmKGMoYi5wcm90b3R5cGUse2dldCBjYW52YXMoKXtyZXR1cm4gZih0aGlzLmltcGwuY2FudmFzKX0sdGV4SW1hZ2UyRDpmdW5jdGlvbigpe2FyZ3VtZW50c1s1XT1lKGFyZ3VtZW50c1s1XSksdGhpcy5pbXBsLnRleEltYWdlMkQuYXBwbHkodGhpcy5pbXBsLGFyZ3VtZW50cyl9LHRleFN1YkltYWdlMkQ6ZnVuY3Rpb24oKXthcmd1bWVudHNbNl09ZShhcmd1bWVudHNbNl0pLHRoaXMuaW1wbC50ZXhTdWJJbWFnZTJELmFwcGx5KHRoaXMuaW1wbCxhcmd1bWVudHMpfX0pLGQoZyxiKSxhLndyYXBwZXJzLldlYkdMUmVuZGVyaW5nQ29udGV4dD1iKX0odGhpcy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO3ZhciBiPWEuR2V0RWxlbWVudHNCeUludGVyZmFjZSxjPWEuUGFyZW50Tm9kZUludGVyZmFjZSxkPWEuU2VsZWN0b3JzSW50ZXJmYWNlLGU9YS5taXhpbixmPWEucmVnaXN0ZXJPYmplY3QsZz1mKGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSk7ZShnLnByb3RvdHlwZSxjKSxlKGcucHJvdG90eXBlLGQpLGUoZy5wcm90b3R5cGUsYik7dmFyIGg9Zihkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgiIikpLGk9Zihkb2N1bWVudC5jcmVhdGVDb21tZW50KCIiKSk7YS53cmFwcGVycy5Db21tZW50PWksYS53cmFwcGVycy5Eb2N1bWVudEZyYWdtZW50PWcsYS53cmFwcGVycy5UZXh0PWh9KHRoaXMuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe3ZhciBiPWkoYS5pbXBsLm93bmVyRG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpKTtjLmNhbGwodGhpcyxiKSxnKGIsdGhpcyk7dmFyIGQ9YS5zaGFkb3dSb290O2suc2V0KHRoaXMsZCksai5zZXQodGhpcyxhKX12YXIgYz1hLndyYXBwZXJzLkRvY3VtZW50RnJhZ21lbnQsZD1hLmVsZW1lbnRGcm9tUG9pbnQsZT1hLmdldElubmVySFRNTCxmPWEubWl4aW4sZz1hLnJld3JhcCxoPWEuc2V0SW5uZXJIVE1MLGk9YS51bndyYXAsaj1uZXcgV2Vha01hcCxrPW5ldyBXZWFrTWFwO2IucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYy5wcm90b3R5cGUpLGYoYi5wcm90b3R5cGUse2dldCBpbm5lckhUTUwoKXtyZXR1cm4gZSh0aGlzKX0sc2V0IGlubmVySFRNTChhKXtoKHRoaXMsYSksdGhpcy5pbnZhbGlkYXRlU2hhZG93UmVuZGVyZXIoKX0sZ2V0IG9sZGVyU2hhZG93Um9vdCgpe3JldHVybiBrLmdldCh0aGlzKXx8bnVsbH0saW52YWxpZGF0ZVNoYWRvd1JlbmRlcmVyOmZ1bmN0aW9uKCl7cmV0dXJuIGouZ2V0KHRoaXMpLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcigpfSxlbGVtZW50RnJvbVBvaW50OmZ1bmN0aW9uKGEsYil7cmV0dXJuIGQodGhpcyx0aGlzLm93bmVyRG9jdW1lbnQsYSxiKX0sZ2V0RWxlbWVudEJ5SWQ6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMucXVlcnlTZWxlY3RvcigiIyIrYSl9fSksYS53cmFwcGVycy5TaGFkb3dSb290PWIsYS5nZXRIb3N0Rm9yU2hhZG93Um9vdD1mdW5jdGlvbihhKXtyZXR1cm4gai5nZXQoYSl9fSh0aGlzLlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXthLnByZXZpb3VzU2libGluZ189YS5wcmV2aW91c1NpYmxpbmcsYS5uZXh0U2libGluZ189YS5uZXh0U2libGluZyxhLnBhcmVudE5vZGVfPWEucGFyZW50Tm9kZX1mdW5jdGlvbiBjKGEsYyxlKXt2YXIgZj1HKGEpLGc9RyhjKSxoPWU/RyhlKTpudWxsO2lmKGQoYyksYihjKSxlKWEuZmlyc3RDaGlsZD09PWUmJihhLmZpcnN0Q2hpbGRfPWUpLGUucHJldmlvdXNTaWJsaW5nXz1lLnByZXZpb3VzU2libGluZztlbHNle2EubGFzdENoaWxkXz1hLmxhc3RDaGlsZCxhLmxhc3RDaGlsZD09PWEuZmlyc3RDaGlsZCYmKGEuZmlyc3RDaGlsZF89YS5maXJzdENoaWxkKTt2YXIgaT1IKGYubGFzdENoaWxkKTtpJiYoaS5uZXh0U2libGluZ189aS5uZXh0U2libGluZyl9Zi5pbnNlcnRCZWZvcmUoZyxoKX1mdW5jdGlvbiBkKGEpe3ZhciBjPUcoYSksZD1jLnBhcmVudE5vZGU7aWYoZCl7dmFyIGU9SChkKTtiKGEpLGEucHJldmlvdXNTaWJsaW5nJiYoYS5wcmV2aW91c1NpYmxpbmcubmV4dFNpYmxpbmdfPWEpLGEubmV4dFNpYmxpbmcmJihhLm5leHRTaWJsaW5nLnByZXZpb3VzU2libGluZ189YSksZS5sYXN0Q2hpbGQ9PT1hJiYoZS5sYXN0Q2hpbGRfPWEpLGUuZmlyc3RDaGlsZD09PWEmJihlLmZpcnN0Q2hpbGRfPWEpLGQucmVtb3ZlQ2hpbGQoYyl9fWZ1bmN0aW9uIGUoYSxiKXtnKGIpLnB1c2goYSkseChhLGIpO3ZhciBjPUouZ2V0KGEpO2N8fEouc2V0KGEsYz1bXSksYy5wdXNoKGIpfWZ1bmN0aW9uIGYoYSl7SS5zZXQoYSxbXSl9ZnVuY3Rpb24gZyhhKXtyZXR1cm4gSS5nZXQoYSl9ZnVuY3Rpb24gaChhKXtmb3IodmFyIGI9W10sYz0wLGQ9YS5maXJzdENoaWxkO2Q7ZD1kLm5leHRTaWJsaW5nKWJbYysrXT1kO3JldHVybiBifWZ1bmN0aW9uIGkoYSxiLGMpe2Zvcih2YXIgZD1hLmZpcnN0Q2hpbGQ7ZDtkPWQubmV4dFNpYmxpbmcpaWYoYihkKSl7aWYoYyhkKT09PSExKXJldHVybn1lbHNlIGkoZCxiLGMpfWZ1bmN0aW9uIGooYSxiKXt2YXIgYz1iLmdldEF0dHJpYnV0ZSgic2VsZWN0Iik7aWYoIWMpcmV0dXJuITA7aWYoYz1jLnRyaW0oKSwhYylyZXR1cm4hMDtpZighKGEgaW5zdGFuY2VvZiB5KSlyZXR1cm4hMTtpZighTS50ZXN0KGMpKXJldHVybiExO2lmKCI6Ij09PWNbMF0mJiFOLnRlc3QoYykpcmV0dXJuITE7dHJ5e3JldHVybiBhLm1hdGNoZXMoYyl9Y2F0Y2goZCl7cmV0dXJuITF9fWZ1bmN0aW9uIGsoKXtmb3IodmFyIGE9MDthPFAubGVuZ3RoO2ErKylQW2FdLnJlbmRlcigpO1A9W119ZnVuY3Rpb24gbCgpe0Y9bnVsbCxrKCl9ZnVuY3Rpb24gbShhKXt2YXIgYj1MLmdldChhKTtyZXR1cm4gYnx8KGI9bmV3IHEoYSksTC5zZXQoYSxiKSksYn1mdW5jdGlvbiBuKGEpe2Zvcig7YTthPWEucGFyZW50Tm9kZSlpZihhIGluc3RhbmNlb2YgQylyZXR1cm4gYTtyZXR1cm4gbnVsbH1mdW5jdGlvbiBvKGEpe3JldHVybiBtKEQoYSkpfWZ1bmN0aW9uIHAoYSl7dGhpcy5za2lwPSExLHRoaXMubm9kZT1hLHRoaXMuY2hpbGROb2Rlcz1bXX1mdW5jdGlvbiBxKGEpe3RoaXMuaG9zdD1hLHRoaXMuZGlydHk9ITEsdGhpcy5pbnZhbGlkYXRlQXR0cmlidXRlcygpLHRoaXMuYXNzb2NpYXRlTm9kZShhKX1mdW5jdGlvbiByKGEpe3JldHVybiBhIGluc3RhbmNlb2Ygen1mdW5jdGlvbiBzKGEpe3JldHVybiBhIGluc3RhbmNlb2Ygen1mdW5jdGlvbiB0KGEpe3JldHVybiBhIGluc3RhbmNlb2YgQX1mdW5jdGlvbiB1KGEpe3JldHVybiBhIGluc3RhbmNlb2YgQX1mdW5jdGlvbiB2KGEpe3JldHVybiBhLnNoYWRvd1Jvb3R9ZnVuY3Rpb24gdyhhKXtmb3IodmFyIGI9W10sYz1hLnNoYWRvd1Jvb3Q7YztjPWMub2xkZXJTaGFkb3dSb290KWIucHVzaChjKTtyZXR1cm4gYn1mdW5jdGlvbiB4KGEsYil7Sy5zZXQoYSxiKX12YXIgeT1hLndyYXBwZXJzLkVsZW1lbnQsej1hLndyYXBwZXJzLkhUTUxDb250ZW50RWxlbWVudCxBPWEud3JhcHBlcnMuSFRNTFNoYWRvd0VsZW1lbnQsQj1hLndyYXBwZXJzLk5vZGUsQz1hLndyYXBwZXJzLlNoYWRvd1Jvb3Q7YS5hc3NlcnQ7dmFyIEQ9YS5nZXRIb3N0Rm9yU2hhZG93Um9vdDthLm1peGluLGEubXV0ZU11dGF0aW9uRXZlbnRzO3ZhciBFPWEub25lT2Y7YS51bm11dGVNdXRhdGlvbkV2ZW50czt2YXIgRixHPWEudW53cmFwLEg9YS53cmFwLEk9bmV3IFdlYWtNYXAsSj1uZXcgV2Vha01hcCxLPW5ldyBXZWFrTWFwLEw9bmV3IFdlYWtNYXAsTT0vXlsqLjojW2EtekEtWl98XS8sTj1uZXcgUmVnRXhwKCJeOigiK1sibGluayIsInZpc2l0ZWQiLCJ0YXJnZXQiLCJlbmFibGVkIiwiZGlzYWJsZWQiLCJjaGVja2VkIiwiaW5kZXRlcm1pbmF0ZSIsIm50aC1jaGlsZCIsIm50aC1sYXN0LWNoaWxkIiwibnRoLW9mLXR5cGUiLCJudGgtbGFzdC1vZi10eXBlIiwiZmlyc3QtY2hpbGQiLCJsYXN0LWNoaWxkIiwiZmlyc3Qtb2YtdHlwZSIsImxhc3Qtb2YtdHlwZSIsIm9ubHktb2YtdHlwZSJdLmpvaW4oInwiKSsiKSIpLE89RSh3aW5kb3csWyJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJtb3pSZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJ3ZWJraXRSZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJzZXRUaW1lb3V0Il0pLFA9W10sUT1uZXcgQXJyYXlTcGxpY2U7US5lcXVhbHM9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gRyhhLm5vZGUpPT09Yn0scC5wcm90b3R5cGU9e2FwcGVuZDpmdW5jdGlvbihhKXt2YXIgYj1uZXcgcChhKTtyZXR1cm4gdGhpcy5jaGlsZE5vZGVzLnB1c2goYiksYn0sc3luYzpmdW5jdGlvbihhKXtpZighdGhpcy5za2lwKXtmb3IodmFyIGI9dGhpcy5ub2RlLGU9dGhpcy5jaGlsZE5vZGVzLGY9aChHKGIpKSxnPWF8fG5ldyBXZWFrTWFwLGk9US5jYWxjdWxhdGVTcGxpY2VzKGUsZiksaj0wLGs9MCxsPTAsbT0wO208aS5sZW5ndGg7bSsrKXtmb3IodmFyIG49aVttXTtsPG4uaW5kZXg7bCsrKWsrKyxlW2orK10uc3luYyhnKTtmb3IodmFyIG89bi5yZW1vdmVkLmxlbmd0aCxwPTA7bz5wO3ArKyl7dmFyIHE9SChmW2srK10pO2cuZ2V0KHEpfHxkKHEpfWZvcih2YXIgcj1uLmFkZGVkQ291bnQscz1mW2tdJiZIKGZba10pLHA9MDtyPnA7cCsrKXt2YXIgdD1lW2orK10sdT10Lm5vZGU7YyhiLHUscyksZy5zZXQodSwhMCksdC5zeW5jKGcpfWwrPXJ9Zm9yKHZhciBtPWw7bTxlLmxlbmd0aDttKyspZVttXS5zeW5jKGcpfX19LHEucHJvdG90eXBlPXtyZW5kZXI6ZnVuY3Rpb24oYSl7aWYodGhpcy5kaXJ0eSl7dGhpcy5pbnZhbGlkYXRlQXR0cmlidXRlcygpLHRoaXMudHJlZUNvbXBvc2l0aW9uKCk7dmFyIGI9dGhpcy5ob3N0LGM9Yi5zaGFkb3dSb290O3RoaXMuYXNzb2NpYXRlTm9kZShiKTtmb3IodmFyIGQ9IWUsZT1hfHxuZXcgcChiKSxmPWMuZmlyc3RDaGlsZDtmO2Y9Zi5uZXh0U2libGluZyl0aGlzLnJlbmRlck5vZGUoYyxlLGYsITEpO2QmJmUuc3luYygpLHRoaXMuZGlydHk9ITF9fSxpbnZhbGlkYXRlOmZ1bmN0aW9uKCl7aWYoIXRoaXMuZGlydHkpe2lmKHRoaXMuZGlydHk9ITAsUC5wdXNoKHRoaXMpLEYpcmV0dXJuO0Y9d2luZG93W09dKGwsMCl9fSxyZW5kZXJOb2RlOmZ1bmN0aW9uKGEsYixjLGQpe2lmKHYoYykpe2I9Yi5hcHBlbmQoYyk7dmFyIGU9bShjKTtlLmRpcnR5PSEwLGUucmVuZGVyKGIpfWVsc2UgcihjKT90aGlzLnJlbmRlckluc2VydGlvblBvaW50KGEsYixjLGQpOnQoYyk/dGhpcy5yZW5kZXJTaGFkb3dJbnNlcnRpb25Qb2ludChhLGIsYyk6dGhpcy5yZW5kZXJBc0FueURvbVRyZWUoYSxiLGMsZCl9LHJlbmRlckFzQW55RG9tVHJlZTpmdW5jdGlvbihhLGIsYyxkKXtpZihiPWIuYXBwZW5kKGMpLHYoYykpe3ZhciBlPW0oYyk7Yi5za2lwPSFlLmRpcnR5LGUucmVuZGVyKGIpfWVsc2UgZm9yKHZhciBmPWMuZmlyc3RDaGlsZDtmO2Y9Zi5uZXh0U2libGluZyl0aGlzLnJlbmRlck5vZGUoYSxiLGYsZCl9LHJlbmRlckluc2VydGlvblBvaW50OmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPWcoYyk7aWYoZS5sZW5ndGgpe3RoaXMuYXNzb2NpYXRlTm9kZShjKTtmb3IodmFyIGY9MDtmPGUubGVuZ3RoO2YrKyl7dmFyIGg9ZVtmXTtyKGgpJiZkP3RoaXMucmVuZGVySW5zZXJ0aW9uUG9pbnQoYSxiLGgsZCk6dGhpcy5yZW5kZXJBc0FueURvbVRyZWUoYSxiLGgsZCl9fWVsc2UgdGhpcy5yZW5kZXJGYWxsYmFja0NvbnRlbnQoYSxiLGMpO3RoaXMuYXNzb2NpYXRlTm9kZShjLnBhcmVudE5vZGUpfSxyZW5kZXJTaGFkb3dJbnNlcnRpb25Qb2ludDpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9YS5vbGRlclNoYWRvd1Jvb3Q7aWYoZCl7eChkLGMpLHRoaXMuYXNzb2NpYXRlTm9kZShjLnBhcmVudE5vZGUpO2Zvcih2YXIgZT1kLmZpcnN0Q2hpbGQ7ZTtlPWUubmV4dFNpYmxpbmcpdGhpcy5yZW5kZXJOb2RlKGQsYixlLCEwKX1lbHNlIHRoaXMucmVuZGVyRmFsbGJhY2tDb250ZW50KGEsYixjKX0scmVuZGVyRmFsbGJhY2tDb250ZW50OmZ1bmN0aW9uKGEsYixjKXt0aGlzLmFzc29jaWF0ZU5vZGUoYyksdGhpcy5hc3NvY2lhdGVOb2RlKGMucGFyZW50Tm9kZSk7Zm9yKHZhciBkPWMuZmlyc3RDaGlsZDtkO2Q9ZC5uZXh0U2libGluZyl0aGlzLnJlbmRlckFzQW55RG9tVHJlZShhLGIsZCwhMSl9LGludmFsaWRhdGVBdHRyaWJ1dGVzOmZ1bmN0aW9uKCl7dGhpcy5hdHRyaWJ1dGVzPU9iamVjdC5jcmVhdGUobnVsbCl9LHVwZGF0ZURlcGVuZGVudEF0dHJpYnV0ZXM6ZnVuY3Rpb24oYSl7aWYoYSl7dmFyIGI9dGhpcy5hdHRyaWJ1dGVzOy9cLlx3Ky8udGVzdChhKSYmKGJbImNsYXNzIl09ITApLC8jXHcrLy50ZXN0KGEpJiYoYi5pZD0hMCksYS5yZXBsYWNlKC9cW1xzKihbXlxzPVx8flxdXSspL2csZnVuY3Rpb24oYSxjKXtiW2NdPSEwfSl9fSxkZXBlbmRzT25BdHRyaWJ1dGU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuYXR0cmlidXRlc1thXX0sZGlzdHJpYnV0ZTpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXM7aShhLHMsZnVuY3Rpb24oYSl7ZihhKSxjLnVwZGF0ZURlcGVuZGVudEF0dHJpYnV0ZXMoYS5nZXRBdHRyaWJ1dGUoInNlbGVjdCIpKTtmb3IodmFyIGQ9MDtkPGIubGVuZ3RoO2QrKyl7dmFyIGc9YltkXTt2b2lkIDAhPT1nJiZqKGcsYSkmJihlKGcsYSksYltkXT12b2lkIDApfX0pfSx0cmVlQ29tcG9zaXRpb246ZnVuY3Rpb24oKXtmb3IodmFyIGE9dGhpcy5ob3N0LGI9YS5zaGFkb3dSb290LGM9W10sZD1hLmZpcnN0Q2hpbGQ7ZDtkPWQubmV4dFNpYmxpbmcpaWYocihkKSl7dmFyIGU9ZyhkKTtlJiZlLmxlbmd0aHx8KGU9aChkKSksYy5wdXNoLmFwcGx5KGMsZSl9ZWxzZSBjLnB1c2goZCk7Zm9yKHZhciBmLGo7Yjspe2lmKGY9dm9pZCAwLGkoYix1LGZ1bmN0aW9uKGEpe3JldHVybiBmPWEsITF9KSxqPWYsdGhpcy5kaXN0cmlidXRlKGIsYyksail7dmFyIGs9Yi5vbGRlclNoYWRvd1Jvb3Q7aWYoayl7Yj1rLHgoYixqKTtjb250aW51ZX1icmVha31icmVha319LGFzc29jaWF0ZU5vZGU6ZnVuY3Rpb24oYSl7YS5pbXBsLnBvbHltZXJTaGFkb3dSZW5kZXJlcl89dGhpc319LEIucHJvdG90eXBlLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcj1mdW5jdGlvbigpe3ZhciBhPXRoaXMuaW1wbC5wb2x5bWVyU2hhZG93UmVuZGVyZXJfO3JldHVybiBhPyhhLmludmFsaWRhdGUoKSwhMCk6ITF9LHoucHJvdG90eXBlLmdldERpc3RyaWJ1dGVkTm9kZXM9ZnVuY3Rpb24oKXtyZXR1cm4gaygpLGcodGhpcyl9LEEucHJvdG90eXBlLm5vZGVXYXNBZGRlZF89ei5wcm90b3R5cGUubm9kZVdhc0FkZGVkXz1mdW5jdGlvbigpe3RoaXMuaW52YWxpZGF0ZVNoYWRvd1JlbmRlcmVyKCk7dmFyIGEsYj1uKHRoaXMpO2ImJihhPW8oYikpLHRoaXMuaW1wbC5wb2x5bWVyU2hhZG93UmVuZGVyZXJfPWEsYSYmYS5pbnZhbGlkYXRlKCl9LGEuZXZlbnRQYXJlbnRzVGFibGU9SixhLmdldFJlbmRlcmVyRm9ySG9zdD1tLGEuZ2V0U2hhZG93VHJlZXM9dyxhLmluc2VydGlvblBhcmVudFRhYmxlPUssYS5yZW5kZXJBbGxQZW5kaW5nPWssYS52aXN1YWw9e2luc2VydEJlZm9yZTpjLHJlbW92ZTpkfX0odGhpcy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYil7aWYod2luZG93W2JdKXtkKCFhLndyYXBwZXJzW2JdKTt2YXIgaT1mdW5jdGlvbihhKXtjLmNhbGwodGhpcyxhKX07aS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShjLnByb3RvdHlwZSksZShpLnByb3RvdHlwZSx7Z2V0IGZvcm0oKXtyZXR1cm4gaChnKHRoaXMpLmZvcm0pfX0pLGYod2luZG93W2JdLGksZG9jdW1lbnQuY3JlYXRlRWxlbWVudChiLnNsaWNlKDQsLTcpKSksYS53cmFwcGVyc1tiXT1pfX12YXIgYz1hLndyYXBwZXJzLkhUTUxFbGVtZW50LGQ9YS5hc3NlcnQsZT1hLm1peGluLGY9YS5yZWdpc3RlcldyYXBwZXIsZz1hLnVud3JhcCxoPWEud3JhcCxpPVsiSFRNTEJ1dHRvbkVsZW1lbnQiLCJIVE1MRmllbGRTZXRFbGVtZW50IiwiSFRNTElucHV0RWxlbWVudCIsIkhUTUxLZXlnZW5FbGVtZW50IiwiSFRNTExhYmVsRWxlbWVudCIsIkhUTUxMZWdlbmRFbGVtZW50IiwiSFRNTE9iamVjdEVsZW1lbnQiLCJIVE1MT3B0aW9uRWxlbWVudCIsIkhUTUxPdXRwdXRFbGVtZW50IiwiSFRNTFNlbGVjdEVsZW1lbnQiLCJIVE1MVGV4dEFyZWFFbGVtZW50Il07aS5mb3JFYWNoKGIpfSh0aGlzLlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtrLmNhbGwodGhpcyxhKX1mdW5jdGlvbiBjKGEpe3ZhciBjPWRvY3VtZW50W2FdO2IucHJvdG90eXBlW2FdPWZ1bmN0aW9uKCl7cmV0dXJuIHYoYy5hcHBseSh0aGlzLmltcGwsYXJndW1lbnRzKSl9fWZ1bmN0aW9uIGQoYSxiKXt5LmNhbGwoYi5pbXBsLHUoYSkpLGUoYSxiKX1mdW5jdGlvbiBlKGEsYil7YS5zaGFkb3dSb290JiZiLmFkb3B0Tm9kZShhLnNoYWRvd1Jvb3QpLGEgaW5zdGFuY2VvZiBuJiZmKGEsYik7Zm9yKHZhciBjPWEuZmlyc3RDaGlsZDtjO2M9Yy5uZXh0U2libGluZyllKGMsYil9ZnVuY3Rpb24gZihhLGIpe3ZhciBjPWEub2xkZXJTaGFkb3dSb290O2MmJmIuYWRvcHROb2RlKGMpfWZ1bmN0aW9uIGcoYSl7dGhpcy5pbXBsPWF9ZnVuY3Rpb24gaChhLGIpe3ZhciBjPWRvY3VtZW50LmltcGxlbWVudGF0aW9uW2JdO2EucHJvdG90eXBlW2JdPWZ1bmN0aW9uKCl7cmV0dXJuIHYoYy5hcHBseSh0aGlzLmltcGwsYXJndW1lbnRzKSl9fWZ1bmN0aW9uIGkoYSxiKXt2YXIgYz1kb2N1bWVudC5pbXBsZW1lbnRhdGlvbltiXTthLnByb3RvdHlwZVtiXT1mdW5jdGlvbigpe3JldHVybiBjLmFwcGx5KHRoaXMuaW1wbCxhcmd1bWVudHMpfX12YXIgaj1hLkdldEVsZW1lbnRzQnlJbnRlcmZhY2Usaz1hLndyYXBwZXJzLk5vZGUsbD1hLlBhcmVudE5vZGVJbnRlcmZhY2UsbT1hLlNlbGVjdG9yc0ludGVyZmFjZSxuPWEud3JhcHBlcnMuU2hhZG93Um9vdCxvPWEuZGVmaW5lV3JhcEdldHRlcixwPWEuZWxlbWVudEZyb21Qb2ludCxxPWEuZm9yd2FyZE1ldGhvZHNUb1dyYXBwZXIscj1hLm1hdGNoZXNOYW1lLHM9YS5taXhpbix0PWEucmVnaXN0ZXJXcmFwcGVyLHU9YS51bndyYXAsdj1hLndyYXAsdz1hLndyYXBFdmVudFRhcmdldE1ldGhvZHM7YS53cmFwTm9kZUxpc3Q7dmFyIHg9bmV3IFdlYWtNYXA7Yi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShrLnByb3RvdHlwZSksbyhiLCJkb2N1bWVudEVsZW1lbnQiKSxvKGIsImJvZHkiKSxvKGIsImhlYWQiKSxbImNyZWF0ZUNvbW1lbnQiLCJjcmVhdGVEb2N1bWVudEZyYWdtZW50IiwiY3JlYXRlRWxlbWVudCIsImNyZWF0ZUVsZW1lbnROUyIsImNyZWF0ZUV2ZW50IiwiY3JlYXRlRXZlbnROUyIsImNyZWF0ZVJhbmdlIiwiY3JlYXRlVGV4dE5vZGUiLCJnZXRFbGVtZW50QnlJZCJdLmZvckVhY2goYyk7dmFyIHk9ZG9jdW1lbnQuYWRvcHROb2RlO2lmKHMoYi5wcm90b3R5cGUse2Fkb3B0Tm9kZTpmdW5jdGlvbihhKXtyZXR1cm4gYS5wYXJlbnROb2RlJiZhLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYSksZChhLHRoaXMpLGF9LGVsZW1lbnRGcm9tUG9pbnQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gcCh0aGlzLHRoaXMsYSxiKX19KSxkb2N1bWVudC5yZWdpc3Rlcil7dmFyIHo9ZG9jdW1lbnQucmVnaXN0ZXI7Yi5wcm90b3R5cGUucmVnaXN0ZXI9ZnVuY3Rpb24oYixjKXtmdW5jdGlvbiBkKGEpe3JldHVybiBhPyh0aGlzLmltcGw9YSx2b2lkIDApOmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoYil9dmFyIGU9Yy5wcm90b3R5cGU7aWYoYS5uYXRpdmVQcm90b3R5cGVUYWJsZS5nZXQoZSkpdGhyb3cgbmV3IEVycm9yKCJOb3RTdXBwb3J0ZWRFcnJvciIpO2Zvcih2YXIgZixnPU9iamVjdC5nZXRQcm90b3R5cGVPZihlKSxoPVtdO2cmJiEoZj1hLm5hdGl2ZVByb3RvdHlwZVRhYmxlLmdldChnKSk7KWgucHVzaChnKSxnPU9iamVjdC5nZXRQcm90b3R5cGVPZihnKTtpZighZil0aHJvdyBuZXcgRXJyb3IoIk5vdFN1cHBvcnRlZEVycm9yIik7Zm9yKHZhciBpPU9iamVjdC5jcmVhdGUoZiksaj1oLmxlbmd0aC0xO2o+PTA7ai0tKWk9T2JqZWN0LmNyZWF0ZShpKTtyZXR1cm5bImNyZWF0ZWRDYWxsYmFjayIsImVudGVyZWRWaWV3Q2FsbGJhY2siLCJsZWZ0Vmlld0NhbGxiYWNrIiwiYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrIl0uZm9yRWFjaChmdW5jdGlvbihhKXt2YXIgYj1lW2FdO2ImJihpW2FdPWZ1bmN0aW9uKCl7Yi5hcHBseSh2KHRoaXMpLGFyZ3VtZW50cyl9KX0pLHouY2FsbCh1KHRoaXMpLGIse3Byb3RvdHlwZTppfSksZC5wcm90b3R5cGU9ZSxkLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1kLGEuY29uc3RydWN0b3JUYWJsZS5zZXQoaSxkKSxhLm5hdGl2ZVByb3RvdHlwZVRhYmxlLnNldChlLGkpLGR9LHEoW3dpbmRvdy5IVE1MRG9jdW1lbnR8fHdpbmRvdy5Eb2N1bWVudF0sWyJyZWdpc3RlciJdKX1xKFt3aW5kb3cuSFRNTEJvZHlFbGVtZW50LHdpbmRvdy5IVE1MRG9jdW1lbnR8fHdpbmRvdy5Eb2N1bWVudCx3aW5kb3cuSFRNTEhlYWRFbGVtZW50LHdpbmRvdy5IVE1MSHRtbEVsZW1lbnRdLFsiYXBwZW5kQ2hpbGQiLCJjb21wYXJlRG9jdW1lbnRQb3NpdGlvbiIsImNvbnRhaW5zIiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWVOUyIsImluc2VydEJlZm9yZSIsInF1ZXJ5U2VsZWN0b3IiLCJxdWVyeVNlbGVjdG9yQWxsIiwicmVtb3ZlQ2hpbGQiLCJyZXBsYWNlQ2hpbGQiLHJdKSxxKFt3aW5kb3cuSFRNTERvY3VtZW50fHx3aW5kb3cuRG9jdW1lbnRdLFsiYWRvcHROb2RlIiwiY29udGFpbnMiLCJjcmVhdGVDb21tZW50IiwiY3JlYXRlRG9jdW1lbnRGcmFnbWVudCIsImNyZWF0ZUVsZW1lbnQiLCJjcmVhdGVFbGVtZW50TlMiLCJjcmVhdGVFdmVudCIsImNyZWF0ZUV2ZW50TlMiLCJjcmVhdGVSYW5nZSIsImNyZWF0ZVRleHROb2RlIiwiZWxlbWVudEZyb21Qb2ludCIsImdldEVsZW1lbnRCeUlkIl0pLHMoYi5wcm90b3R5cGUsaikscyhiLnByb3RvdHlwZSxsKSxzKGIucHJvdG90eXBlLG0pLHMoYi5wcm90b3R5cGUse2dldCBpbXBsZW1lbnRhdGlvbigpe3ZhciBhPXguZ2V0KHRoaXMpO3JldHVybiBhP2E6KGE9bmV3IGcodSh0aGlzKS5pbXBsZW1lbnRhdGlvbikseC5zZXQodGhpcyxhKSxhKX19KSx0KHdpbmRvdy5Eb2N1bWVudCxiLGRvY3VtZW50LmltcGxlbWVudGF0aW9uLmNyZWF0ZUhUTUxEb2N1bWVudCgiIikpLHdpbmRvdy5IVE1MRG9jdW1lbnQmJnQod2luZG93LkhUTUxEb2N1bWVudCxiKSx3KFt3aW5kb3cuSFRNTEJvZHlFbGVtZW50LHdpbmRvdy5IVE1MRG9jdW1lbnR8fHdpbmRvdy5Eb2N1bWVudCx3aW5kb3cuSFRNTEhlYWRFbGVtZW50XSksaChnLCJjcmVhdGVEb2N1bWVudFR5cGUiKSxoKGcsImNyZWF0ZURvY3VtZW50IiksaChnLCJjcmVhdGVIVE1MRG9jdW1lbnQiKSxpKGcsImhhc0ZlYXR1cmUiKSx0KHdpbmRvdy5ET01JbXBsZW1lbnRhdGlvbixnKSxxKFt3aW5kb3cuRE9NSW1wbGVtZW50YXRpb25dLFsiY3JlYXRlRG9jdW1lbnRUeXBlIiwiY3JlYXRlRG9jdW1lbnQiLCJjcmVhdGVIVE1MRG9jdW1lbnQiLCJoYXNGZWF0dXJlIl0pLGEuYWRvcHROb2RlTm9SZW1vdmU9ZCxhLndyYXBwZXJzLkRPTUltcGxlbWVudGF0aW9uPWcsYS53cmFwcGVycy5Eb2N1bWVudD1ifSh0aGlzLlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtjLmNhbGwodGhpcyxhKX12YXIgYz1hLndyYXBwZXJzLkV2ZW50VGFyZ2V0LGQ9YS5taXhpbixlPWEucmVnaXN0ZXJXcmFwcGVyLGY9YS51bndyYXAsZz1hLnVud3JhcElmTmVlZGVkLGg9YS53cmFwLGk9YS5yZW5kZXJBbGxQZW5kaW5nLGo9d2luZG93LldpbmRvdztiLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGMucHJvdG90eXBlKTt2YXIgaz13aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZTtqLnByb3RvdHlwZS5nZXRDb21wdXRlZFN0eWxlPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGkoKSxrLmNhbGwodGhpc3x8d2luZG93LGcoYSksYil9LFsiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJkaXNwYXRjaEV2ZW50Il0uZm9yRWFjaChmdW5jdGlvbihhKXtqLnByb3RvdHlwZVthXT1mdW5jdGlvbigpe3ZhciBiPWgodGhpc3x8d2luZG93KTtyZXR1cm4gYlthXS5hcHBseShiLGFyZ3VtZW50cyl9fSksZChiLnByb3RvdHlwZSx7Z2V0Q29tcHV0ZWRTdHlsZTpmdW5jdGlvbihhLGIpe3JldHVybiBrLmNhbGwoZih0aGlzKSxnKGEpLGIpfX0pLGUoaixiKSxhLndyYXBwZXJzLldpbmRvdz1ifSh0aGlzLlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXt0aGlzLmltcGw9YX1mdW5jdGlvbiBjKGEpe3JldHVybiBuZXcgYihhKX1mdW5jdGlvbiBkKGEpe3JldHVybiBhLm1hcChjKX1mdW5jdGlvbiBlKGEpe3ZhciBiPXRoaXM7dGhpcy5pbXBsPW5ldyBrKGZ1bmN0aW9uKGMpe2EuY2FsbChiLGQoYyksYil9KX12YXIgZj1hLmRlZmluZUdldHRlcixnPWEuZGVmaW5lV3JhcEdldHRlcixoPWEucmVnaXN0ZXJXcmFwcGVyLGk9YS51bndyYXBJZk5lZWRlZCxqPWEud3JhcE5vZGVMaXN0O2Eud3JhcHBlcnM7dmFyIGs9d2luZG93Lk11dGF0aW9uT2JzZXJ2ZXJ8fHdpbmRvdy5XZWJLaXRNdXRhdGlvbk9ic2VydmVyO2lmKGspe3ZhciBsPXdpbmRvdy5NdXRhdGlvblJlY29yZDtiLnByb3RvdHlwZT17Z2V0IGFkZGVkTm9kZXMoKXtyZXR1cm4gaih0aGlzLmltcGwuYWRkZWROb2Rlcyl9LGdldCByZW1vdmVkTm9kZXMoKXtyZXR1cm4gaih0aGlzLmltcGwucmVtb3ZlZE5vZGVzKX19LFsidGFyZ2V0IiwicHJldmlvdXNTaWJsaW5nIiwibmV4dFNpYmxpbmciXS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2coYixhKX0pLFsidHlwZSIsImF0dHJpYnV0ZU5hbWUiLCJhdHRyaWJ1dGVOYW1lc3BhY2UiLCJvbGRWYWx1ZSJdLmZvckVhY2goZnVuY3Rpb24oYSl7ZihiLGEsZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbXBsW2FdfSl9KSxsJiZoKGwsYiksd2luZG93Lk5vZGUsZS5wcm90b3R5cGU9e29ic2VydmU6ZnVuY3Rpb24oYSxiKXt0aGlzLmltcGwub2JzZXJ2ZShpKGEpLGIpfSxkaXNjb25uZWN0OmZ1bmN0aW9uKCl7dGhpcy5pbXBsLmRpc2Nvbm5lY3QoKX0sdGFrZVJlY29yZHM6ZnVuY3Rpb24oKXtyZXR1cm4gZCh0aGlzLmltcGwudGFrZVJlY29yZHMoKSl9fSxhLndyYXBwZXJzLk11dGF0aW9uT2JzZXJ2ZXI9ZSxhLndyYXBwZXJzLk11dGF0aW9uUmVjb3JkPWJ9fSh0aGlzLlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXt0aGlzLmltcGw9YX12YXIgYz1hLnJlZ2lzdGVyV3JhcHBlcixkPWEudW53cmFwLGU9YS51bndyYXBJZk5lZWRlZCxmPWEud3JhcCxnPXdpbmRvdy5SYW5nZTtiLnByb3RvdHlwZT17Z2V0IHN0YXJ0Q29udGFpbmVyKCl7cmV0dXJuIGYodGhpcy5pbXBsLnN0YXJ0Q29udGFpbmVyKX0sZ2V0IGVuZENvbnRhaW5lcigpe3JldHVybiBmKHRoaXMuaW1wbC5lbmRDb250YWluZXIpfSxnZXQgY29tbW9uQW5jZXN0b3JDb250YWluZXIoKXtyZXR1cm4gZih0aGlzLmltcGwuY29tbW9uQW5jZXN0b3JDb250YWluZXIpfSxzZXRTdGFydDpmdW5jdGlvbihhLGIpe3RoaXMuaW1wbC5zZXRTdGFydChlKGEpLGIpfSxzZXRFbmQ6ZnVuY3Rpb24oYSxiKXt0aGlzLmltcGwuc2V0RW5kKGUoYSksYil9LHNldFN0YXJ0QmVmb3JlOmZ1bmN0aW9uKGEpe3RoaXMuaW1wbC5zZXRTdGFydEJlZm9yZShlKGEpKX0sc2V0U3RhcnRBZnRlcjpmdW5jdGlvbihhKXt0aGlzLmltcGwuc2V0U3RhcnRBZnRlcihlKGEpKX0sc2V0RW5kQmVmb3JlOmZ1bmN0aW9uKGEpe3RoaXMuaW1wbC5zZXRFbmRCZWZvcmUoZShhKSl9LHNldEVuZEFmdGVyOmZ1bmN0aW9uKGEpe3RoaXMuaW1wbC5zZXRFbmRBZnRlcihlKGEpKX0sc2VsZWN0Tm9kZTpmdW5jdGlvbihhKXt0aGlzLmltcGwuc2VsZWN0Tm9kZShlKGEpKX0sc2VsZWN0Tm9kZUNvbnRlbnRzOmZ1bmN0aW9uKGEpe3RoaXMuaW1wbC5zZWxlY3ROb2RlQ29udGVudHMoZShhKSl9LGNvbXBhcmVCb3VuZGFyeVBvaW50czpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLmltcGwuY29tcGFyZUJvdW5kYXJ5UG9pbnRzKGEsZChiKSl9LGV4dHJhY3RDb250ZW50czpmdW5jdGlvbigpe3JldHVybiBmKHRoaXMuaW1wbC5leHRyYWN0Q29udGVudHMoKSl9LGNsb25lQ29udGVudHM6ZnVuY3Rpb24oKXtyZXR1cm4gZih0aGlzLmltcGwuY2xvbmVDb250ZW50cygpKX0saW5zZXJ0Tm9kZTpmdW5jdGlvbihhKXt0aGlzLmltcGwuaW5zZXJ0Tm9kZShlKGEpKX0sc3Vycm91bmRDb250ZW50czpmdW5jdGlvbihhKXt0aGlzLmltcGwuc3Vycm91bmRDb250ZW50cyhlKGEpKX0sY2xvbmVSYW5nZTpmdW5jdGlvbigpe3JldHVybiBmKHRoaXMuaW1wbC5jbG9uZVJhbmdlKCkpfSxpc1BvaW50SW5SYW5nZTpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLmltcGwuaXNQb2ludEluUmFuZ2UoZShhKSxiKX0sY29tcGFyZVBvaW50OmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuaW1wbC5jb21wYXJlUG9pbnQoZShhKSxiKX0saW50ZXJzZWN0c05vZGU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuaW1wbC5pbnRlcnNlY3RzTm9kZShlKGEpKX19LGcucHJvdG90eXBlLmNyZWF0ZUNvbnRleHR1YWxGcmFnbWVudCYmKGIucHJvdG90eXBlLmNyZWF0ZUNvbnRleHR1YWxGcmFnbWVudD1mdW5jdGlvbihhKXtyZXR1cm4gZih0aGlzLmltcGwuY3JlYXRlQ29udGV4dHVhbEZyYWdtZW50KGEpKX0pLGMod2luZG93LlJhbmdlLGIpLGEud3JhcHBlcnMuUmFuZ2U9Yn0odGhpcy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7dmFyIGI9Y1thXSxkPXdpbmRvd1tiXTtpZihkKXt2YXIgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KGEpLGY9ZS5jb25zdHJ1Y3Rvcjt3aW5kb3dbYl09Zn19YS5pc1dyYXBwZXJGb3I7dmFyIGM9e2E6IkhUTUxBbmNob3JFbGVtZW50IixhcHBsZXQ6IkhUTUxBcHBsZXRFbGVtZW50IixhcmVhOiJIVE1MQXJlYUVsZW1lbnQiLGF1ZGlvOiJIVE1MQXVkaW9FbGVtZW50IixicjoiSFRNTEJSRWxlbWVudCIsYmFzZToiSFRNTEJhc2VFbGVtZW50Iixib2R5OiJIVE1MQm9keUVsZW1lbnQiLGJ1dHRvbjoiSFRNTEJ1dHRvbkVsZW1lbnQiLGRsOiJIVE1MRExpc3RFbGVtZW50IixkYXRhbGlzdDoiSFRNTERhdGFMaXN0RWxlbWVudCIsZGF0YToiSFRNTERhdGFFbGVtZW50IixkaXI6IkhUTUxEaXJlY3RvcnlFbGVtZW50IixkaXY6IkhUTUxEaXZFbGVtZW50IixlbWJlZDoiSFRNTEVtYmVkRWxlbWVudCIsZmllbGRzZXQ6IkhUTUxGaWVsZFNldEVsZW1lbnQiLGZvbnQ6IkhUTUxGb250RWxlbWVudCIsZm9ybToiSFRNTEZvcm1FbGVtZW50IixmcmFtZToiSFRNTEZyYW1lRWxlbWVudCIsZnJhbWVzZXQ6IkhUTUxGcmFtZVNldEVsZW1lbnQiLGhyOiJIVE1MSFJFbGVtZW50IixoZWFkOiJIVE1MSGVhZEVsZW1lbnQiLGgxOiJIVE1MSGVhZGluZ0VsZW1lbnQiLGh0bWw6IkhUTUxIdG1sRWxlbWVudCIsaWZyYW1lOiJIVE1MSUZyYW1lRWxlbWVudCIsaW5wdXQ6IkhUTUxJbnB1dEVsZW1lbnQiLGxpOiJIVE1MTElFbGVtZW50IixsYWJlbDoiSFRNTExhYmVsRWxlbWVudCIsbGVnZW5kOiJIVE1MTGVnZW5kRWxlbWVudCIsbGluazoiSFRNTExpbmtFbGVtZW50IixtYXA6IkhUTUxNYXBFbGVtZW50IixtYXJxdWVlOiJIVE1MTWFycXVlZUVsZW1lbnQiLG1lbnU6IkhUTUxNZW51RWxlbWVudCIsbWVudWl0ZW06IkhUTUxNZW51SXRlbUVsZW1lbnQiLG1ldGE6IkhUTUxNZXRhRWxlbWVudCIsbWV0ZXI6IkhUTUxNZXRlckVsZW1lbnQiLGRlbDoiSFRNTE1vZEVsZW1lbnQiLG9sOiJIVE1MT0xpc3RFbGVtZW50IixvYmplY3Q6IkhUTUxPYmplY3RFbGVtZW50IixvcHRncm91cDoiSFRNTE9wdEdyb3VwRWxlbWVudCIsb3B0aW9uOiJIVE1MT3B0aW9uRWxlbWVudCIsb3V0cHV0OiJIVE1MT3V0cHV0RWxlbWVudCIscDoiSFRNTFBhcmFncmFwaEVsZW1lbnQiLHBhcmFtOiJIVE1MUGFyYW1FbGVtZW50IixwcmU6IkhUTUxQcmVFbGVtZW50Iixwcm9ncmVzczoiSFRNTFByb2dyZXNzRWxlbWVudCIscToiSFRNTFF1b3RlRWxlbWVudCIsc2NyaXB0OiJIVE1MU2NyaXB0RWxlbWVudCIsc2VsZWN0OiJIVE1MU2VsZWN0RWxlbWVudCIsc291cmNlOiJIVE1MU291cmNlRWxlbWVudCIsc3BhbjoiSFRNTFNwYW5FbGVtZW50IixzdHlsZToiSFRNTFN0eWxlRWxlbWVudCIsdGltZToiSFRNTFRpbWVFbGVtZW50IixjYXB0aW9uOiJIVE1MVGFibGVDYXB0aW9uRWxlbWVudCIsY29sOiJIVE1MVGFibGVDb2xFbGVtZW50Iix0YWJsZToiSFRNTFRhYmxlRWxlbWVudCIsdHI6IkhUTUxUYWJsZVJvd0VsZW1lbnQiLHRoZWFkOiJIVE1MVGFibGVTZWN0aW9uRWxlbWVudCIsdGJvZHk6IkhUTUxUYWJsZVNlY3Rpb25FbGVtZW50Iix0ZXh0YXJlYToiSFRNTFRleHRBcmVhRWxlbWVudCIsdHJhY2s6IkhUTUxUcmFja0VsZW1lbnQiLHRpdGxlOiJIVE1MVGl0bGVFbGVtZW50Iix1bDoiSFRNTFVMaXN0RWxlbWVudCIsdmlkZW86IkhUTUxWaWRlb0VsZW1lbnQifTtPYmplY3Qua2V5cyhjKS5mb3JFYWNoKGIpLE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGEud3JhcHBlcnMpLmZvckVhY2goZnVuY3Rpb24oYil7d2luZG93W2JdPWEud3JhcHBlcnNbYl19KSxhLmtub3duRWxlbWVudHM9Y30odGhpcy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oKXt3aW5kb3cud3JhcD1mdW5jdGlvbihhKXtyZXR1cm4gYS5pbXBsP2E6U2hhZG93RE9NUG9seWZpbGwud3JhcChhKX0sd2luZG93LnVud3JhcD1mdW5jdGlvbihhKXtyZXR1cm4gYS5pbXBsP1NoYWRvd0RPTVBvbHlmaWxsLnVud3JhcChhKTphfTt2YXIgYT13aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZTt3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZT1mdW5jdGlvbihiLGMpe3JldHVybiBhLmNhbGwod2luZG93LHdyYXAoYiksYyl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKEhUTUxFbGVtZW50LnByb3RvdHlwZSx7d2Via2l0U2hhZG93Um9vdDp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2hhZG93Um9vdH19fSk7dmFyIGI9SFRNTEVsZW1lbnQucHJvdG90eXBlLmNyZWF0ZVNoYWRvd1Jvb3Q7SFRNTEVsZW1lbnQucHJvdG90eXBlLmNyZWF0ZVNoYWRvd1Jvb3Q9ZnVuY3Rpb24oKXt2YXIgYT1iLmNhbGwodGhpcyk7cmV0dXJuIGEuaG9zdD10aGlzLGF9LEhUTUxFbGVtZW50LnByb3RvdHlwZS53ZWJraXRDcmVhdGVTaGFkb3dSb290PUhUTUxFbGVtZW50LnByb3RvdHlwZS5jcmVhdGVTaGFkb3dSb290fSgpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSxiKXt2YXIgYz0iIjtyZXR1cm4gQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChhLGZ1bmN0aW9uKGEpe2MrPWEudGV4dENvbnRlbnQrIlxuXG4ifSksYnx8KGM9Yy5yZXBsYWNlKG4sIiIpKSxjfWZ1bmN0aW9uIGMoYSl7dmFyIGI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3R5bGUiKTtyZXR1cm4gYi50ZXh0Q29udGVudD1hLGJ9ZnVuY3Rpb24gZChhKXt2YXIgYj1jKGEpO2RvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoYik7dmFyIGQ9Yi5zaGVldC5jc3NSdWxlcztyZXR1cm4gYi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGIpLGR9ZnVuY3Rpb24gZShhKXtmb3IodmFyIGI9MCxjPVtdO2I8YS5sZW5ndGg7YisrKWMucHVzaChhW2JdLmNzc1RleHQpO3JldHVybiBjLmpvaW4oIlxuXG4iKX1mdW5jdGlvbiBmKGEpe2EmJmcoKS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShhKSl9ZnVuY3Rpb24gZygpe3JldHVybiBofHwoaD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzdHlsZSIpLGguc2V0QXR0cmlidXRlKCJTaGFkb3dDU1NTaGltIiwiIikpLGh9dmFyIGgsaT17c3RyaWN0U3R5bGluZzohMSxyZWdpc3RyeTp7fSxzaGltU3R5bGluZzpmdW5jdGlvbihhLGIsZCl7dmFyIGU9dGhpcy5pc1R5cGVFeHRlbnNpb24oZCksZz10aGlzLnJlZ2lzdGVyRGVmaW5pdGlvbihhLGIsZCk7dGhpcy5zdHJpY3RTdHlsaW5nJiZ0aGlzLmFwcGx5U2NvcGVUb0NvbnRlbnQoYSxiKSx0aGlzLmluc2VydFBvbHlmaWxsRGlyZWN0aXZlcyhnLnJvb3RTdHlsZXMpLHRoaXMuaW5zZXJ0UG9seWZpbGxSdWxlcyhnLnJvb3RTdHlsZXMpO3ZhciBoPXRoaXMuc3R5bGVzVG9TaGltbWVkQ3NzVGV4dChnLnNjb3BlU3R5bGVzLGIsZSk7aCs9dGhpcy5leHRyYWN0UG9seWZpbGxVbnNjb3BlZFJ1bGVzKGcucm9vdFN0eWxlcyksZy5zaGltbWVkU3R5bGU9YyhoKSxhJiYoYS5zaGltbWVkU3R5bGU9Zy5zaGltbWVkU3R5bGUpO2Zvcih2YXIgaSxqPTAsaz1nLnJvb3RTdHlsZXMubGVuZ3RoO2s+aiYmKGk9Zy5yb290U3R5bGVzW2pdKTtqKyspaS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGkpO2YoaCl9LHJlZ2lzdGVyRGVmaW5pdGlvbjpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9dGhpcy5yZWdpc3RyeVtiXT17cm9vdDphLG5hbWU6YixleHRlbmRzTmFtZTpjfSxlPWE/YS5xdWVyeVNlbGVjdG9yQWxsKCJzdHlsZSIpOltdO2U9ZT9BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChlLDApOltdLGQucm9vdFN0eWxlcz1lLGQuc2NvcGVTdHlsZXM9ZC5yb290U3R5bGVzO3ZhciBmPXRoaXMucmVnaXN0cnlbZC5leHRlbmRzTmFtZV07cmV0dXJuIWZ8fGEmJiFhLnF1ZXJ5U2VsZWN0b3IoInNoYWRvdyIpfHwoZC5zY29wZVN0eWxlcz1mLnNjb3BlU3R5bGVzLmNvbmNhdChkLnNjb3BlU3R5bGVzKSksZH0saXNUeXBlRXh0ZW5zaW9uOmZ1bmN0aW9uKGEpe3JldHVybiBhJiZhLmluZGV4T2YoIi0iKTwwfSxhcHBseVNjb3BlVG9Db250ZW50OmZ1bmN0aW9uKGEsYil7YSYmKEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoYS5xdWVyeVNlbGVjdG9yQWxsKCIqIiksZnVuY3Rpb24oYSl7YS5zZXRBdHRyaWJ1dGUoYiwiIil9KSxBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGEucXVlcnlTZWxlY3RvckFsbCgidGVtcGxhdGUiKSxmdW5jdGlvbihhKXt0aGlzLmFwcGx5U2NvcGVUb0NvbnRlbnQoYS5jb250ZW50LGIpfSx0aGlzKSl9LGluc2VydFBvbHlmaWxsRGlyZWN0aXZlczpmdW5jdGlvbihhKXthJiZBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGEsZnVuY3Rpb24oYSl7YS50ZXh0Q29udGVudD10aGlzLmluc2VydFBvbHlmaWxsRGlyZWN0aXZlc0luQ3NzVGV4dChhLnRleHRDb250ZW50KX0sdGhpcyl9LGluc2VydFBvbHlmaWxsRGlyZWN0aXZlc0luQ3NzVGV4dDpmdW5jdGlvbihhKXtyZXR1cm4gYS5yZXBsYWNlKG8sZnVuY3Rpb24oYSxiKXtyZXR1cm4gYi5zbGljZSgwLC0yKSsieyJ9KX0saW5zZXJ0UG9seWZpbGxSdWxlczpmdW5jdGlvbihhKXthJiZBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGEsZnVuY3Rpb24oYSl7YS50ZXh0Q29udGVudD10aGlzLmluc2VydFBvbHlmaWxsUnVsZXNJbkNzc1RleHQoYS50ZXh0Q29udGVudCl9LHRoaXMpfSxpbnNlcnRQb2x5ZmlsbFJ1bGVzSW5Dc3NUZXh0OmZ1bmN0aW9uKGEpe3JldHVybiBhLnJlcGxhY2UocCxmdW5jdGlvbihhLGIpe3JldHVybiBiLnNsaWNlKDAsLTEpfSl9LGV4dHJhY3RQb2x5ZmlsbFVuc2NvcGVkUnVsZXM6ZnVuY3Rpb24oYSl7dmFyIGI9IiI7cmV0dXJuIGEmJkFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoYSxmdW5jdGlvbihhKXtiKz10aGlzLmV4dHJhY3RQb2x5ZmlsbFVuc2NvcGVkUnVsZXNGcm9tQ3NzVGV4dChhLnRleHRDb250ZW50KSsiXG5cbiJ9LHRoaXMpLGJ9LGV4dHJhY3RQb2x5ZmlsbFVuc2NvcGVkUnVsZXNGcm9tQ3NzVGV4dDpmdW5jdGlvbihhKXtmb3IodmFyIGIsYz0iIjtiPXEuZXhlYyhhKTspYys9YlsxXS5zbGljZSgwLC0xKSsiXG5cbiI7cmV0dXJuIGN9LHN0eWxlc1RvU2hpbW1lZENzc1RleHQ6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiB0aGlzLnNoaW1BdEhvc3QoYSxiLGMpK3RoaXMuc2hpbVNjb3BpbmcoYSxiLGMpfSxzaGltQXRIb3N0OmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gYT90aGlzLmNvbnZlcnRBdEhvc3RTdHlsZXMoYSxiLGMpOnZvaWQgMH0sY29udmVydEF0SG9zdFN0eWxlczpmdW5jdGlvbihhLGMsZil7dmFyIGc9YihhKSxoPXRoaXM7cmV0dXJuIGc9Zy5yZXBsYWNlKGosZnVuY3Rpb24oYSxiKXtyZXR1cm4gaC5zY29wZUhvc3RDc3MoYixjLGYpfSksZz1lKHRoaXMuZmluZEF0SG9zdFJ1bGVzKGQoZyksbmV3IFJlZ0V4cCgiXiIrYyt1LCJtIikpKX0sc2NvcGVIb3N0Q3NzOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD10aGlzO3JldHVybiBhLnJlcGxhY2UoayxmdW5jdGlvbihhLGUsZil7cmV0dXJuIGQuc2NvcGVIb3N0U2VsZWN0b3IoZSxiLGMpKyIgIitmKyJcbgkifSl9LHNjb3BlSG9zdFNlbGVjdG9yOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD1bXSxlPWEuc3BsaXQoIiwiKSxmPSJbaXM9IitiKyJdIjtyZXR1cm4gZS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2E9YS50cmltKCksYS5tYXRjaChsKT9hPWEucmVwbGFjZShsLGM/ZisiJDEkMyI6YisiJDEkMyIpOmEubWF0Y2gobSkmJihhPWM/ZithOmIrYSksZC5wdXNoKGEpfSx0aGlzKSxkLmpvaW4oIiwgIil9LGZpbmRBdEhvc3RSdWxlczpmdW5jdGlvbihhLGIpe3JldHVybiBBcnJheS5wcm90b3R5cGUuZmlsdGVyLmNhbGwoYSx0aGlzLmlzSG9zdFJ1bGUuYmluZCh0aGlzLGIpKX0saXNIb3N0UnVsZTpmdW5jdGlvbihhLGIpe3JldHVybiBiLnNlbGVjdG9yVGV4dCYmYi5zZWxlY3RvclRleHQubWF0Y2goYSl8fGIuY3NzUnVsZXMmJnRoaXMuZmluZEF0SG9zdFJ1bGVzKGIuY3NzUnVsZXMsYSkubGVuZ3RofHxiLnR5cGU9PUNTU1J1bGUuV0VCS0lUX0tFWUZSQU1FU19SVUxFfSxzaGltU2NvcGluZzpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGE/dGhpcy5jb252ZXJ0U2NvcGVkU3R5bGVzKGEsYixjKTp2b2lkIDB9LGNvbnZlcnRTY29wZWRTdHlsZXM6ZnVuY3Rpb24oYSxjLGUpe3ZhciBmPWIoYSkucmVwbGFjZShqLCIiKTtmPXRoaXMuaW5zZXJ0UG9seWZpbGxIb3N0SW5Dc3NUZXh0KGYpLGY9dGhpcy5jb252ZXJ0Q29sb25Ib3N0KGYpLGY9dGhpcy5jb252ZXJ0UHNldWRvcyhmKSxmPXRoaXMuY29udmVydFBhcnRzKGYpLGY9dGhpcy5jb252ZXJ0Q29tYmluYXRvcnMoZik7dmFyIGc9ZChmKTtyZXR1cm4gZj10aGlzLnNjb3BlUnVsZXMoZyxjLGUpfSxjb252ZXJ0UHNldWRvczpmdW5jdGlvbihhKXtyZXR1cm4gYS5yZXBsYWNlKHIsIiBbcHNldWRvPSQxXSIpfSxjb252ZXJ0UGFydHM6ZnVuY3Rpb24oYSl7cmV0dXJuIGEucmVwbGFjZShzLCIgW3BhcnQ9JDFdIil9LGNvbnZlcnRDb2xvbkhvc3Q6ZnVuY3Rpb24oYSl7cmV0dXJuIGEucmVwbGFjZSh0LGZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiBjP3krYytkKyIsICIrYysiICIrYitkOmIrZH0pfSxjb252ZXJ0Q29tYmluYXRvcnM6ZnVuY3Rpb24oYSl7cmV0dXJuIGEucmVwbGFjZSgiXl4iLCIgIikucmVwbGFjZSgiXiIsIiAiKX0sc2NvcGVSdWxlczpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9IiI7cmV0dXJuIEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoYSxmdW5jdGlvbihhKXthLnNlbGVjdG9yVGV4dCYmYS5zdHlsZSYmYS5zdHlsZS5jc3NUZXh0PyhkKz10aGlzLnNjb3BlU2VsZWN0b3IoYS5zZWxlY3RvclRleHQsYixjLHRoaXMuc3RyaWN0U3R5bGluZykrIiB7XG4JIixkKz10aGlzLnByb3BlcnRpZXNGcm9tUnVsZShhKSsiXG59XG5cbiIpOmEubWVkaWE/KGQrPSJAbWVkaWEgIithLm1lZGlhLm1lZGlhVGV4dCsiIHtcbiIsZCs9dGhpcy5zY29wZVJ1bGVzKGEuY3NzUnVsZXMsYiksZCs9IlxufVxuXG4iKTphLmNzc1RleHQmJihkKz1hLmNzc1RleHQrIlxuXG4iKX0sdGhpcyksZH0sc2NvcGVTZWxlY3RvcjpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1bXSxmPWEuc3BsaXQoIiwiKTtyZXR1cm4gZi5mb3JFYWNoKGZ1bmN0aW9uKGEpe2E9YS50cmltKCksdGhpcy5zZWxlY3Rvck5lZWRzU2NvcGluZyhhLGIsYykmJihhPWQ/dGhpcy5hcHBseVN0cmljdFNlbGVjdG9yU2NvcGUoYSxiKTp0aGlzLmFwcGx5U2ltcGxlU2VsZWN0b3JTY29wZShhLGIsYykpLGUucHVzaChhKX0sdGhpcyksZS5qb2luKCIsICIpfSxzZWxlY3Rvck5lZWRzU2NvcGluZzpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9Yz9iOiJcXFtpcz0iK2IrIlxcXSIsZT1uZXcgUmVnRXhwKCJeKCIrZCsiKSIrdSwibSIpO3JldHVybiFhLm1hdGNoKGUpfSxhcHBseVNpbXBsZVNlbGVjdG9yU2NvcGU6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWM/Iltpcz0iK2IrIl0iOmI7cmV0dXJuIGEubWF0Y2goeik/KGE9YS5yZXBsYWNlKHksZCksYS5yZXBsYWNlKHosZCsiICIpKTpkKyIgIithfSxhcHBseVN0cmljdFNlbGVjdG9yU2NvcGU6ZnVuY3Rpb24oYSxiKXt2YXIgYz1bIiAiLCI+IiwiKyIsIn4iXSxkPWEsZT0iWyIrYisiXSI7cmV0dXJuIGMuZm9yRWFjaChmdW5jdGlvbihhKXt2YXIgYj1kLnNwbGl0KGEpO2Q9Yi5tYXAoZnVuY3Rpb24oYSl7dmFyIGI9YS50cmltKCkucmVwbGFjZSh6LCIiKTtyZXR1cm4gYiYmYy5pbmRleE9mKGIpPDAmJmIuaW5kZXhPZihlKTwwJiYoYT1iLnJlcGxhY2UoLyhbXjpdKikoOiopKC4qKS8sIiQxIitlKyIkMiQzIikpLGEKfSkuam9pbihhKX0pLGR9LGluc2VydFBvbHlmaWxsSG9zdEluQ3NzVGV4dDpmdW5jdGlvbihhKXtyZXR1cm4gYS5yZXBsYWNlKHYseCkucmVwbGFjZSh3LHgpfSxwcm9wZXJ0aWVzRnJvbVJ1bGU6ZnVuY3Rpb24oYSl7dmFyIGI9YS5zdHlsZS5jc3NUZXh0O3JldHVybiBhLnN0eWxlLmNvbnRlbnQmJiFhLnN0eWxlLmNvbnRlbnQubWF0Y2goL1snIl0rLykmJihiPSJjb250ZW50OiAnIithLnN0eWxlLmNvbnRlbnQrIic7XG4iK2Euc3R5bGUuY3NzVGV4dC5yZXBsYWNlKC9jb250ZW50OlteO10qOy9nLCIiKSksYn19LGo9L0Bob3N0W157XSp7KChbXn1dKj97W157XSo/fVtcc1xTXSo/KSspfS9naW0saz0vKFtee10qKSh7W1xzXFNdKj99KS9naW0sbD0vKC4qKSgoPzpcKil8KD86XDpzY29wZSkpKC4qKS8sbT0vXlsuXFs6XS8sbj0vXC9cKlteKl0qXCorKFteLypdW14qXSpcKispKlwvL2dpbSxvPS9cL1wqXHMqQHBvbHlmaWxsIChbXipdKlwqKyhbXi8qXVteKl0qXCorKSpcLykoW157XSo/KXsvZ2ltLHA9L1wvXCpcc0Bwb2x5ZmlsbC1ydWxlKFteKl0qXCorKFteLypdW14qXSpcKispKilcLy9naW0scT0vXC9cKlxzQHBvbHlmaWxsLXVuc2NvcGVkLXJ1bGUoW14qXSpcKisoW14vKl1bXipdKlwqKykqKVwvL2dpbSxyPS86Oih4LVteXHN7LChdKikvZ2ltLHM9Lzo6cGFydFwoKFteKV0qKVwpL2dpbSx0PS8oLWhvc3QpKD86XCgoW14pXSopXCkpPyhbXix7XSopL2dpbSx1PSIoWz5cXHN+K1suLHs6XVtcXHNcXFNdKik/JCIsdj0vQGhvc3QvZ2ltLHc9L1w6aG9zdC9naW0seD0iLWhvc3QiLHk9Ii1ob3N0LW5vLWNvbWJpbmF0b3IiLHo9Ly1ob3N0L2dpbTtpZih3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpe2YoInN0eWxlIHsgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyB9XG4iKTt2YXIgQT1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCJoZWFkIik7QS5pbnNlcnRCZWZvcmUoZygpLEEuY2hpbGROb2Rlc1swXSl9YS5TaGFkb3dDU1M9aX0od2luZG93LlBsYXRmb3JtKX1lbHNlIWZ1bmN0aW9uKCl7d2luZG93LnRlbXBsYXRlQ29udGVudD13aW5kb3cudGVtcGxhdGVDb250ZW50fHxmdW5jdGlvbihhKXtyZXR1cm4gYS5jb250ZW50fSx3aW5kb3cud3JhcD13aW5kb3cudW53cmFwPWZ1bmN0aW9uKGEpe3JldHVybiBhfTt2YXIgYT1IVE1MRWxlbWVudC5wcm90b3R5cGUud2Via2l0Q3JlYXRlU2hhZG93Um9vdDtIVE1MRWxlbWVudC5wcm90b3R5cGUud2Via2l0Q3JlYXRlU2hhZG93Um9vdD1mdW5jdGlvbigpe3ZhciBiPXRoaXMud2Via2l0U2hhZG93Um9vdCxjPWEuY2FsbCh0aGlzKTtyZXR1cm4gYy5vbGRlclNoYWRvd1Jvb3Q9YixjLmhvc3Q9dGhpcyxDdXN0b21FbGVtZW50cy53YXRjaFNoYWRvdyh0aGlzKSxjfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhIVE1MRWxlbWVudC5wcm90b3R5cGUse3NoYWRvd1Jvb3Q6e2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLndlYmtpdFNoYWRvd1Jvb3R9fSxjcmVhdGVTaGFkb3dSb290Ont2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLndlYmtpdENyZWF0ZVNoYWRvd1Jvb3QoKX19fSksd2luZG93LnRlbXBsYXRlQ29udGVudD1mdW5jdGlvbihhKXtpZih3aW5kb3cuSFRNTFRlbXBsYXRlRWxlbWVudCYmSFRNTFRlbXBsYXRlRWxlbWVudC5ib290c3RyYXAmJkhUTUxUZW1wbGF0ZUVsZW1lbnQuYm9vdHN0cmFwKGEpLCFhLmNvbnRlbnQmJiFhLl9jb250ZW50KXtmb3IodmFyIGI9ZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO2EuZmlyc3RDaGlsZDspYi5hcHBlbmRDaGlsZChhLmZpcnN0Q2hpbGQpO2EuX2NvbnRlbnQ9Yn1yZXR1cm4gYS5jb250ZW50fHxhLl9jb250ZW50fX0oKTshZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhKXtmb3IodmFyIGI9YXx8e30sZD0xO2Q8YXJndW1lbnRzLmxlbmd0aDtkKyspe3ZhciBlPWFyZ3VtZW50c1tkXTt0cnl7Zm9yKHZhciBmIGluIGUpYyhmLGUsYil9Y2F0Y2goZyl7fX1yZXR1cm4gYn1mdW5jdGlvbiBjKGEsYixjKXt2YXIgZT1kKGIsYSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGMsYSxlKX1mdW5jdGlvbiBkKGEsYil7aWYoYSl7dmFyIGM9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihhLGIpO3JldHVybiBjfHxkKE9iamVjdC5nZXRQcm90b3R5cGVPZihhKSxiKX19RnVuY3Rpb24ucHJvdG90eXBlLmJpbmR8fChGdW5jdGlvbi5wcm90b3R5cGUuYmluZD1mdW5jdGlvbihhKXt2YXIgYj10aGlzLGM9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpO3JldHVybiBmdW5jdGlvbigpe3ZhciBkPWMuc2xpY2UoKTtyZXR1cm4gZC5wdXNoLmFwcGx5KGQsYXJndW1lbnRzKSxiLmFwcGx5KGEsZCl9fSksYS5taXhpbj1ifSh3aW5kb3cuUGxhdGZvcm0pLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEsYixjKXt2YXIgZD0ic3RyaW5nIj09dHlwZW9mIGE/ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChhKTphLmNsb25lTm9kZSghMCk7aWYoZC5pbm5lckhUTUw9YixjKWZvcih2YXIgZSBpbiBjKWQuc2V0QXR0cmlidXRlKGUsY1tlXSk7cmV0dXJuIGR9dmFyIGM9RE9NVG9rZW5MaXN0LnByb3RvdHlwZS5hZGQsZD1ET01Ub2tlbkxpc3QucHJvdG90eXBlLnJlbW92ZTtET01Ub2tlbkxpc3QucHJvdG90eXBlLmFkZD1mdW5jdGlvbigpe2Zvcih2YXIgYT0wO2E8YXJndW1lbnRzLmxlbmd0aDthKyspYy5jYWxsKHRoaXMsYXJndW1lbnRzW2FdKX0sRE9NVG9rZW5MaXN0LnByb3RvdHlwZS5yZW1vdmU9ZnVuY3Rpb24oKXtmb3IodmFyIGE9MDthPGFyZ3VtZW50cy5sZW5ndGg7YSsrKWQuY2FsbCh0aGlzLGFyZ3VtZW50c1thXSl9LERPTVRva2VuTGlzdC5wcm90b3R5cGUudG9nZ2xlPWZ1bmN0aW9uKGEsYil7MT09YXJndW1lbnRzLmxlbmd0aCYmKGI9IXRoaXMuY29udGFpbnMoYSkpLGI/dGhpcy5hZGQoYSk6dGhpcy5yZW1vdmUoYSl9LERPTVRva2VuTGlzdC5wcm90b3R5cGUuc3dpdGNoPWZ1bmN0aW9uKGEsYil7YSYmdGhpcy5yZW1vdmUoYSksYiYmdGhpcy5hZGQoYil9O3ZhciBlPWZ1bmN0aW9uKCl7cmV0dXJuIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHRoaXMpfSxmPXdpbmRvdy5OYW1lZE5vZGVNYXB8fHdpbmRvdy5Nb3pOYW1lZEF0dHJNYXB8fHt9O2lmKE5vZGVMaXN0LnByb3RvdHlwZS5hcnJheT1lLGYucHJvdG90eXBlLmFycmF5PWUsSFRNTENvbGxlY3Rpb24ucHJvdG90eXBlLmFycmF5PWUsIXdpbmRvdy5wZXJmb3JtYW5jZSl7dmFyIGc9RGF0ZS5ub3coKTt3aW5kb3cucGVyZm9ybWFuY2U9e25vdzpmdW5jdGlvbigpe3JldHVybiBEYXRlLm5vdygpLWd9fX13aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lfHwod2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZT1mdW5jdGlvbigpe3ZhciBhPXdpbmRvdy53ZWJraXRSZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fHdpbmRvdy5tb3pSZXF1ZXN0QW5pbWF0aW9uRnJhbWU7cmV0dXJuIGE/ZnVuY3Rpb24oYil7cmV0dXJuIGEoZnVuY3Rpb24oKXtiKHBlcmZvcm1hbmNlLm5vdygpKX0pfTpmdW5jdGlvbihhKXtyZXR1cm4gd2luZG93LnNldFRpbWVvdXQoYSwxZTMvNjApfX0oKSksd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lfHwod2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lPWZ1bmN0aW9uKCl7cmV0dXJuIHdpbmRvdy53ZWJraXRDYW5jZWxBbmltYXRpb25GcmFtZXx8d2luZG93Lm1vekNhbmNlbEFuaW1hdGlvbkZyYW1lfHxmdW5jdGlvbihhKXtjbGVhclRpbWVvdXQoYSl9fSgpKSxhLmNyZWF0ZURPTT1ifSh3aW5kb3cuUGxhdGZvcm0pLHdpbmRvdy50ZW1wbGF0ZUNvbnRlbnQ9d2luZG93LnRlbXBsYXRlQ29udGVudHx8ZnVuY3Rpb24oYSl7cmV0dXJuIGEuY29udGVudH0sZnVuY3Rpb24oYSl7YT1hfHwod2luZG93Lkluc3BlY3Rvcj17fSk7dmFyIGI7d2luZG93LnNpbnNwZWN0PWZ1bmN0aW9uKGEsZCl7Ynx8KGI9d2luZG93Lm9wZW4oIiIsIlNoYWRvd0RPTSBJbnNwZWN0b3IiLG51bGwsITApLGIuZG9jdW1lbnQud3JpdGUoYyksYi5hcGk9e3NoYWRvd2l6ZTpzaGFkb3dpemV9KSxmKGF8fHdyYXAoZG9jdW1lbnQuYm9keSksZCl9O3ZhciBjPVsiPCFET0NUWVBFIGh0bWw+IiwiPGh0bWw+IiwiICA8aGVhZD4iLCIgICAgPHRpdGxlPlNoYWRvd0RPTSBJbnNwZWN0b3I8L3RpdGxlPiIsIiAgICA8c3R5bGU+IiwiICAgICAgYm9keSB7IiwiICAgICAgfSIsIiAgICAgIHByZSB7IiwnICAgICAgICBmb250OiA5cHQgIkNvdXJpZXIgTmV3IiwgbW9ub3NwYWNlOycsIiAgICAgICAgbGluZS1oZWlnaHQ6IDEuNWVtOyIsIiAgICAgIH0iLCIgICAgICB0YWcgeyIsIiAgICAgICAgY29sb3I6IHB1cnBsZTsiLCIgICAgICB9IiwiICAgICAgdWwgeyIsIiAgICAgICAgIG1hcmdpbjogMDsiLCIgICAgICAgICBwYWRkaW5nOiAwOyIsIiAgICAgICAgIGxpc3Qtc3R5bGU6IG5vbmU7IiwiICAgICAgfSIsIiAgICAgIGxpIHsiLCIgICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IiwiICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2YxZjFmMTsiLCIgICAgICAgICBwYWRkaW5nOiA0cHggNnB4OyIsIiAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDsiLCIgICAgICAgICBtYXJnaW4tcmlnaHQ6IDRweDsiLCIgICAgICB9IiwiICAgIDwvc3R5bGU+IiwiICA8L2hlYWQ+IiwiICA8Ym9keT4iLCcgICAgPHVsIGlkPSJjcnVtYnMiPicsIiAgICA8L3VsPiIsJyAgICA8ZGl2IGlkPSJ0cmVlIj48L2Rpdj4nLCIgIDwvYm9keT4iLCI8L2h0bWw+Il0uam9pbigiXG4iKSxkPVtdLGU9ZnVuY3Rpb24oKXt2YXIgYT1iLmRvY3VtZW50LGM9YS5xdWVyeVNlbGVjdG9yKCIjY3J1bWJzIik7Yy50ZXh0Q29udGVudD0iIjtmb3IodmFyIGUsZz0wO2U9ZFtnXTtnKyspe3ZhciBoPWEuY3JlYXRlRWxlbWVudCgiYSIpO2guaHJlZj0iIyIsaC50ZXh0Q29udGVudD1lLmxvY2FsTmFtZSxoLmlkeD1nLGgub25jbGljaz1mdW5jdGlvbihhKXtmb3IodmFyIGI7ZC5sZW5ndGg+dGhpcy5pZHg7KWI9ZC5wb3AoKTtmKGIuc2hhZG93fHxiLGIpLGEucHJldmVudERlZmF1bHQoKX0sYy5hcHBlbmRDaGlsZChhLmNyZWF0ZUVsZW1lbnQoImxpIikpLmFwcGVuZENoaWxkKGgpfX0sZj1mdW5jdGlvbihhLGMpe3ZhciBmPWIuZG9jdW1lbnQ7az1bXTt2YXIgZz1jfHxhO2QucHVzaChnKSxlKCksZi5ib2R5LnF1ZXJ5U2VsZWN0b3IoIiN0cmVlIikuaW5uZXJIVE1MPSI8cHJlPiIraihhLGEuY2hpbGROb2RlcykrIjwvcHJlPiJ9LGc9QXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbC5iaW5kKEFycmF5LnByb3RvdHlwZS5mb3JFYWNoKSxoPXtTVFlMRToxLFNDUklQVDoxLCIjY29tbWVudCI6MSxURU1QTEFURToxfSxpPWZ1bmN0aW9uKGEpe3JldHVybiBoW2Eubm9kZU5hbWVdfSxqPWZ1bmN0aW9uKGEsYixjKXtpZihpKGEpKXJldHVybiIiO3ZhciBkPWN8fCIiO2lmKGEubG9jYWxOYW1lfHwxMT09YS5ub2RlVHlwZSl7dmFyIGU9YS5sb2NhbE5hbWV8fCJzaGFkb3ctcm9vdCIsZj1kK2woYSk7ImNvbnRlbnQiPT1lJiYoYj1hLmdldERpc3RyaWJ1dGVkTm9kZXMoKSksZis9Ijxici8+Ijt2YXIgaD1kKyImbmJzcDsmbmJzcDsiO2coYixmdW5jdGlvbihhKXtmKz1qKGEsYS5jaGlsZE5vZGVzLGgpfSksZis9ZCx7YnI6MX1bZV18fChmKz0iPHRhZz4mbHQ7LyIrZSsiJmd0OzwvdGFnPiIsZis9Ijxici8+Iil9ZWxzZXt2YXIgaz1hLnRleHRDb250ZW50LnRyaW0oKTtmPWs/ZCsnIicraysnIjxici8+JzoiIn1yZXR1cm4gZn0saz1bXSxsPWZ1bmN0aW9uKGEpe3ZhciBiPSI8dGFnPiZsdDsiLGM9YS5sb2NhbE5hbWV8fCJzaGFkb3ctcm9vdCI7cmV0dXJuIGEud2Via2l0U2hhZG93Um9vdHx8YS5zaGFkb3dSb290PyhiKz0nIDxidXR0b24gaWR4PSInK2subGVuZ3RoKyciIG9uY2xpY2s9ImFwaS5zaGFkb3dpemUuY2FsbCh0aGlzKSI+JytjKyI8L2J1dHRvbj4iLGsucHVzaChhKSk6Yis9Y3x8InNoYWRvdy1yb290IixhLmF0dHJpYnV0ZXMmJmcoYS5hdHRyaWJ1dGVzLGZ1bmN0aW9uKGEpe2IrPSIgIithLm5hbWUrKGEudmFsdWU/Jz0iJythLnZhbHVlKyciJzoiIil9KSxiKz0iJmd0OzwvdGFnPiJ9O3NoYWRvd2l6ZT1mdW5jdGlvbigpe3ZhciBhPU51bWJlcih0aGlzLmF0dHJpYnV0ZXMuaWR4LnZhbHVlKSxiPWtbYV07Yj9mKGIud2Via2l0U2hhZG93Um9vdHx8Yi5zaGFkb3dSb290LGIpOihjb25zb2xlLmxvZygiYmFkIHNoYWRvd2l6ZSBub2RlIiksY29uc29sZS5kaXIodGhpcykpfSxhLm91dHB1dD1qfSh3aW5kb3cuSW5zcGVjdG9yKSxmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBhKGEpe2Zvcig7YS5wYXJlbnROb2RlOylhPWEucGFyZW50Tm9kZTtyZXR1cm4iZnVuY3Rpb24iPT10eXBlb2YgYS5nZXRFbGVtZW50QnlJZD9hOm51bGx9ZnVuY3Rpb24gYihhLGIsYyxkKXt0aGlzLmNsb3NlZD0hMSx0aGlzLm5vZGU9YSx0aGlzLnByb3BlcnR5PWIsdGhpcy5tb2RlbD1jLHRoaXMucGF0aD1QYXRoLmdldChkKSwodGhpcy5tb2RlbCBpbnN0YW5jZW9mIFBhdGhPYnNlcnZlcnx8dGhpcy5tb2RlbCBpbnN0YW5jZW9mIENvbXBvdW5kUGF0aE9ic2VydmVyKSYmdGhpcy5wYXRoPT09bD8odGhpcy5vYnNlcnZlcj10aGlzLm1vZGVsLHRoaXMub2JzZXJ2ZXIudGFyZ2V0PXRoaXMsdGhpcy5vYnNlcnZlci5jYWxsYmFjaz10aGlzLnZhbHVlQ2hhbmdlZCk6dGhpcy5vYnNlcnZlcj1uZXcgUGF0aE9ic2VydmVyKHRoaXMubW9kZWwsdGhpcy5wYXRoLHRoaXMudmFsdWVDaGFuZ2VkLHRoaXMpLHRoaXMudmFsdWVDaGFuZ2VkKHRoaXMudmFsdWUpfWZ1bmN0aW9uIGMoYSxjLGQsZSl7dGhpcy5jb25kaXRpb25hbD0iPyI9PWNbYy5sZW5ndGgtMV0sdGhpcy5jb25kaXRpb25hbCYmKGEucmVtb3ZlQXR0cmlidXRlKGMpLGM9Yy5zbGljZSgwLC0xKSksYi5jYWxsKHRoaXMsYSxjLGQsZSl9ZnVuY3Rpb24gZChhKXtzd2l0Y2goYS50eXBlKXtjYXNlImNoZWNrYm94IjpyZXR1cm4gbTtjYXNlInJhZGlvIjpjYXNlInNlbGVjdC1tdWx0aXBsZSI6Y2FzZSJzZWxlY3Qtb25lIjpyZXR1cm4iY2hhbmdlIjtkZWZhdWx0OnJldHVybiJpbnB1dCJ9fWZ1bmN0aW9uIGUoYSxjLGUsZil7Yi5jYWxsKHRoaXMsYSxjLGUsZiksdGhpcy5ldmVudFR5cGU9ZCh0aGlzLm5vZGUpLHRoaXMuYm91bmROb2RlVmFsdWVDaGFuZ2VkPXRoaXMubm9kZVZhbHVlQ2hhbmdlZC5iaW5kKHRoaXMpLHRoaXMubm9kZS5hZGRFdmVudExpc3RlbmVyKHRoaXMuZXZlbnRUeXBlLHRoaXMuYm91bmROb2RlVmFsdWVDaGFuZ2VkLCEwKX1mdW5jdGlvbiBmKGIpe2lmKGIuZm9ybSlyZXR1cm4gaihiLmZvcm0uZWxlbWVudHMsZnVuY3Rpb24oYSl7cmV0dXJuIGEhPWImJiJJTlBVVCI9PWEudGFnTmFtZSYmInJhZGlvIj09YS50eXBlJiZhLm5hbWU9PWIubmFtZX0pO3ZhciBjPWEoYik7aWYoIWMpcmV0dXJuW107dmFyIGQ9Yy5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dFt0eXBlPSJyYWRpbyJdW25hbWU9IicrYi5uYW1lKyciXScpO3JldHVybiBqKGQsZnVuY3Rpb24oYSl7cmV0dXJuIGEhPWImJiFhLmZvcm19KX1mdW5jdGlvbiBnKGEsYixjKXtlLmNhbGwodGhpcyxhLCJjaGVja2VkIixiLGMpfWZ1bmN0aW9uIGgoYSxiLGMpe2UuY2FsbCh0aGlzLGEsInZhbHVlIixiLGMpfWZ1bmN0aW9uIGkoYSxiLGMsZCl7ZS5jYWxsKHRoaXMsYSxiLGMsZCl9dmFyIGo9QXJyYXkucHJvdG90eXBlLmZpbHRlci5jYWxsLmJpbmQoQXJyYXkucHJvdG90eXBlLmZpbHRlciksaz0iX19wcm90b19fImlue30/ZnVuY3Rpb24oYSl7cmV0dXJuIGF9OmZ1bmN0aW9uKGEpe3ZhciBiPWEuX19wcm90b19fO2lmKCFiKXJldHVybiBhO3ZhciBjPU9iamVjdC5jcmVhdGUoYik7cmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGEpLmZvckVhY2goZnVuY3Rpb24oYil7T2JqZWN0LmRlZmluZVByb3BlcnR5KGMsYixPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGEsYikpfSksY307ImZ1bmN0aW9uIiE9dHlwZW9mIGRvY3VtZW50LmNvbnRhaW5zJiYoRG9jdW1lbnQucHJvdG90eXBlLmNvbnRhaW5zPWZ1bmN0aW9uKGEpe3JldHVybiBhPT09dGhpc3x8YS5wYXJlbnROb2RlPT09dGhpcz8hMDp0aGlzLmRvY3VtZW50RWxlbWVudC5jb250YWlucyhhKX0pLE5vZGUucHJvdG90eXBlLmJpbmQ9ZnVuY3Rpb24oYSxiLGMpe2NvbnNvbGUuZXJyb3IoIlVuaGFuZGxlZCBiaW5kaW5nIHRvIE5vZGU6ICIsdGhpcyxhLGIsYyl9LE5vZGUucHJvdG90eXBlLnVuYmluZD1mdW5jdGlvbihhKXt0aGlzLmJpbmRpbmdzfHwodGhpcy5iaW5kaW5ncz17fSk7dmFyIGI9dGhpcy5iaW5kaW5nc1thXTtiJiYoImZ1bmN0aW9uIj09dHlwZW9mIGIuY2xvc2UmJmIuY2xvc2UoKSx0aGlzLmJpbmRpbmdzW2FdPXZvaWQgMCl9LE5vZGUucHJvdG90eXBlLnVuYmluZEFsbD1mdW5jdGlvbigpe2lmKHRoaXMuYmluZGluZ3Mpe2Zvcih2YXIgYT1PYmplY3Qua2V5cyh0aGlzLmJpbmRpbmdzKSxiPTA7YjxhLmxlbmd0aDtiKyspe3ZhciBjPXRoaXMuYmluZGluZ3NbYVtiXV07YyYmYy5jbG9zZSgpfXRoaXMuYmluZGluZ3M9e319fTt2YXIgbD1QYXRoLmdldCgidmFsdWUiKTtiLnByb3RvdHlwZT17dmFsdWVDaGFuZ2VkOmZ1bmN0aW9uKGEpe3RoaXMubm9kZVt0aGlzLnByb3BlcnR5XT10aGlzLnNhbml0aXplQm91bmRWYWx1ZShhKX0sc2FuaXRpemVCb3VuZFZhbHVlOmZ1bmN0aW9uKGEpe3JldHVybiB2b2lkIDA9PWE/IiI6U3RyaW5nKGEpfSxjbG9zZTpmdW5jdGlvbigpe3RoaXMuY2xvc2VkfHwodGhpcy5vYnNlcnZlci5jbG9zZSgpLHRoaXMub2JzZXJ2ZXI9dm9pZCAwLHRoaXMubm9kZT12b2lkIDAsdGhpcy5tb2RlbD12b2lkIDAsdGhpcy5jbG9zZWQ9ITApfSxnZXQgdmFsdWUoKXtyZXR1cm4gdGhpcy5vYnNlcnZlci52YWx1ZX0sc2V0IHZhbHVlKGEpe3RoaXMub2JzZXJ2ZXIuc2V0VmFsdWUoYSl9LHJlc2V0OmZ1bmN0aW9uKCl7dGhpcy5vYnNlcnZlci5yZXNldCgpfX0sVGV4dC5wcm90b3R5cGUuYmluZD1mdW5jdGlvbihhLGMsZCl7cmV0dXJuInRleHRDb250ZW50IiE9PWE/Tm9kZS5wcm90b3R5cGUuYmluZC5jYWxsKHRoaXMsYSxjLGQpOih0aGlzLnVuYmluZChhKSx0aGlzLmJpbmRpbmdzW2FdPW5ldyBiKHRoaXMsImRhdGEiLGMsZCkpfSxjLnByb3RvdHlwZT1rKHtfX3Byb3RvX186Yi5wcm90b3R5cGUsdmFsdWVDaGFuZ2VkOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNvbmRpdGlvbmFsPyhhP3RoaXMubm9kZS5zZXRBdHRyaWJ1dGUodGhpcy5wcm9wZXJ0eSwiIik6dGhpcy5ub2RlLnJlbW92ZUF0dHJpYnV0ZSh0aGlzLnByb3BlcnR5KSx2b2lkIDApOih0aGlzLm5vZGUuc2V0QXR0cmlidXRlKHRoaXMucHJvcGVydHksdGhpcy5zYW5pdGl6ZUJvdW5kVmFsdWUoYSkpLHZvaWQgMCl9fSksRWxlbWVudC5wcm90b3R5cGUuYmluZD1mdW5jdGlvbihhLGIsZCl7cmV0dXJuIHRoaXMudW5iaW5kKGEpLHRoaXMuYmluZGluZ3NbYV09bmV3IGModGhpcyxhLGIsZCl9O3ZhciBtOyFmdW5jdGlvbigpe3ZhciBhPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpLGI9YS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbnB1dCIpKTtiLnNldEF0dHJpYnV0ZSgidHlwZSIsImNoZWNrYm94Iik7dmFyIGMsZD0wO2IuYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLGZ1bmN0aW9uKCl7ZCsrLGM9Y3x8ImNsaWNrIn0pLGIuYWRkRXZlbnRMaXN0ZW5lcigiY2hhbmdlIixmdW5jdGlvbigpe2QrKyxjPWN8fCJjaGFuZ2UifSk7dmFyIGU9ZG9jdW1lbnQuY3JlYXRlRXZlbnQoIk1vdXNlRXZlbnQiKTtlLmluaXRNb3VzZUV2ZW50KCJjbGljayIsITAsITAsd2luZG93LDAsMCwwLDAsMCwhMSwhMSwhMSwhMSwwLG51bGwpLGIuZGlzcGF0Y2hFdmVudChlKSxtPTE9PWQ/ImNoYW5nZSI6Y30oKSxlLnByb3RvdHlwZT1rKHtfX3Byb3RvX186Yi5wcm90b3R5cGUsbm9kZVZhbHVlQ2hhbmdlZDpmdW5jdGlvbigpe3RoaXMudmFsdWU9dGhpcy5ub2RlW3RoaXMucHJvcGVydHldLHRoaXMucmVzZXQoKSx0aGlzLnBvc3RVcGRhdGVCaW5kaW5nKCksUGxhdGZvcm0ucGVyZm9ybU1pY3JvdGFza0NoZWNrcG9pbnQoKX0scG9zdFVwZGF0ZUJpbmRpbmc6ZnVuY3Rpb24oKXt9LGNsb3NlOmZ1bmN0aW9uKCl7dGhpcy5jbG9zZWR8fCh0aGlzLm5vZGUucmVtb3ZlRXZlbnRMaXN0ZW5lcih0aGlzLmV2ZW50VHlwZSx0aGlzLmJvdW5kTm9kZVZhbHVlQ2hhbmdlZCwhMCksYi5wcm90b3R5cGUuY2xvc2UuY2FsbCh0aGlzKSl9fSksZy5wcm90b3R5cGU9ayh7X19wcm90b19fOmUucHJvdG90eXBlLHNhbml0aXplQm91bmRWYWx1ZTpmdW5jdGlvbihhKXtyZXR1cm4gQm9vbGVhbihhKX0scG9zdFVwZGF0ZUJpbmRpbmc6ZnVuY3Rpb24oKXsiSU5QVVQiPT09dGhpcy5ub2RlLnRhZ05hbWUmJiJyYWRpbyI9PT10aGlzLm5vZGUudHlwZSYmZih0aGlzLm5vZGUpLmZvckVhY2goZnVuY3Rpb24oYSl7dmFyIGI9YS5iaW5kaW5ncy5jaGVja2VkO2ImJihiLnZhbHVlPSExKX0pfX0pLEhUTUxJbnB1dEVsZW1lbnQucHJvdG90eXBlLmJpbmQ9ZnVuY3Rpb24oYSxiLGMpe3JldHVybiJ2YWx1ZSIhPT1hJiYiY2hlY2tlZCIhPT1hP0hUTUxFbGVtZW50LnByb3RvdHlwZS5iaW5kLmNhbGwodGhpcyxhLGIsYyk6KHRoaXMudW5iaW5kKGEpLHRoaXMucmVtb3ZlQXR0cmlidXRlKGEpLHRoaXMuYmluZGluZ3NbYV09InZhbHVlIj09PWE/bmV3IGUodGhpcywidmFsdWUiLGIsYyk6bmV3IGcodGhpcyxiLGMpKX0sSFRNTFRleHRBcmVhRWxlbWVudC5wcm90b3R5cGUuYmluZD1mdW5jdGlvbihhLGIsYyl7cmV0dXJuInZhbHVlIiE9PWE/SFRNTEVsZW1lbnQucHJvdG90eXBlLmJpbmQuY2FsbCh0aGlzLGEsYixjKToodGhpcy51bmJpbmQoYSksdGhpcy5yZW1vdmVBdHRyaWJ1dGUoYSksdGhpcy5iaW5kaW5nc1thXT1uZXcgZSh0aGlzLGEsYixjKSl9LGgucHJvdG90eXBlPWsoe19fcHJvdG9fXzplLnByb3RvdHlwZSx2YWx1ZUNoYW5nZWQ6ZnVuY3Rpb24oYSl7dmFyIGIsYyxkPXRoaXMubm9kZS5wYXJlbnROb2RlIGluc3RhbmNlb2YgSFRNTFNlbGVjdEVsZW1lbnQ/dGhpcy5ub2RlLnBhcmVudE5vZGU6dm9pZCAwO2QmJmQuYmluZGluZ3MmJmQuYmluZGluZ3MudmFsdWUgaW5zdGFuY2VvZiBpJiYoYj1kLmJpbmRpbmdzLnZhbHVlLGM9ZC52YWx1ZSksZS5wcm90b3R5cGUudmFsdWVDaGFuZ2VkLmNhbGwodGhpcyxhKSxiJiYhYi5jbG9zZWQmJmQudmFsdWUhPT1jJiZiLm5vZGVWYWx1ZUNoYW5nZWQoKX19KSxIVE1MT3B0aW9uRWxlbWVudC5wcm90b3R5cGUuYmluZD1mdW5jdGlvbihhLGIsYyl7cmV0dXJuInZhbHVlIiE9PWE/SFRNTEVsZW1lbnQucHJvdG90eXBlLmJpbmQuY2FsbCh0aGlzLGEsYixjKToodGhpcy51bmJpbmQoYSksdGhpcy5yZW1vdmVBdHRyaWJ1dGUoYSksdGhpcy5iaW5kaW5nc1thXT1uZXcgaCh0aGlzLGIsYykpfSxpLnByb3RvdHlwZT1rKHtfX3Byb3RvX186ZS5wcm90b3R5cGUsdmFsdWVDaGFuZ2VkOmZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoKXtkLm5vZGVbZC5wcm9wZXJ0eV09YSxkLm5vZGVbZC5wcm9wZXJ0eV0hPWEmJmMtLSYmbihiKX1pZih0aGlzLm5vZGVbdGhpcy5wcm9wZXJ0eV09YSx0aGlzLm5vZGVbdGhpcy5wcm9wZXJ0eV0hPWEpe3ZhciBjPTIsZD10aGlzO24oYil9fX0pLEhUTUxTZWxlY3RFbGVtZW50LnByb3RvdHlwZS5iaW5kPWZ1bmN0aW9uKGEsYixjKXtyZXR1cm4ic2VsZWN0ZWRpbmRleCI9PT1hJiYoYT0ic2VsZWN0ZWRJbmRleCIpLCJzZWxlY3RlZEluZGV4IiE9PWEmJiJ2YWx1ZSIhPT1hP0hUTUxFbGVtZW50LnByb3RvdHlwZS5iaW5kLmNhbGwodGhpcyxhLGIsYyk6KHRoaXMudW5iaW5kKGEpLHRoaXMucmVtb3ZlQXR0cmlidXRlKGEpLHRoaXMuYmluZGluZ3NbYV09bmV3IGkodGhpcyxhLGIsYykpfTt2YXIgbj1mdW5jdGlvbigpe2Z1bmN0aW9uIGEoYSl7dGhpcy5uZXh0UnVubmVyPWEsdGhpcy52YWx1ZT0hMSx0aGlzLmxhc3RWYWx1ZT10aGlzLnZhbHVlLHRoaXMuc2NoZWR1bGVkPVtdLHRoaXMuc2NoZWR1bGVkSWRzPVtdLHRoaXMucnVubmluZz0hMSx0aGlzLm9ic2VydmVyPW5ldyBQYXRoT2JzZXJ2ZXIodGhpcywidmFsdWUiLHRoaXMucnVuLHRoaXMpfWZ1bmN0aW9uIGIoYSl7dmFyIGI9YVtlXTthW2VdfHwoYj1kKyssYVtlXT1iKSxjLnNjaGVkdWxlKGEsYil9YS5wcm90b3R5cGU9e3NjaGVkdWxlOmZ1bmN0aW9uKGEsYil7aWYoIXRoaXMuc2NoZWR1bGVkSWRzW2JdKXtpZih0aGlzLnJ1bm5pbmcpcmV0dXJuIHRoaXMubmV4dFJ1bm5lci5zY2hlZHVsZShhLGIpO3RoaXMuc2NoZWR1bGVkSWRzW2JdPSEwLHRoaXMuc2NoZWR1bGVkLnB1c2goYSksdGhpcy5sYXN0VmFsdWU9PT10aGlzLnZhbHVlJiYodGhpcy52YWx1ZT0hdGhpcy52YWx1ZSl9fSxydW46ZnVuY3Rpb24oKXt0aGlzLnJ1bm5pbmc9ITA7Zm9yKHZhciBhPTA7YTx0aGlzLnNjaGVkdWxlZC5sZW5ndGg7YSsrKXt2YXIgYj10aGlzLnNjaGVkdWxlZFthXSxjPWJbZV07dGhpcy5zY2hlZHVsZWRJZHNbY109ITEsImZ1bmN0aW9uIj09dHlwZW9mIGI/YigpOmIucmVzb2x2ZSgpfXRoaXMuc2NoZWR1bGVkPVtdLHRoaXMuc2NoZWR1bGVkSWRzPVtdLHRoaXMubGFzdFZhbHVlPXRoaXMudmFsdWUsdGhpcy5ydW5uaW5nPSExfX07dmFyIGM9bmV3IGEobmV3IGEpLGQ9MSxlPSJfX3NjaGVkdWxlZElkX18iO3JldHVybiBifSgpfSh0aGlzKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtpZighYSl0aHJvdyBuZXcgRXJyb3IoIkFzc2VydGlvbiBmYWlsZWQiKX1mdW5jdGlvbiBjKGEpe2Zvcig7YS5wYXJlbnROb2RlOylhPWEucGFyZW50Tm9kZTtyZXR1cm4iZnVuY3Rpb24iPT10eXBlb2YgYS5nZXRFbGVtZW50QnlJZD9hOm51bGx9ZnVuY3Rpb24gZChhKXtyZXR1cm4gRlthLnRhZ05hbWVdJiZhLmhhc0F0dHJpYnV0ZSgidGVtcGxhdGUiKX1mdW5jdGlvbiBlKGEpe3JldHVybiJURU1QTEFURSI9PWEudGFnTmFtZXx8ZChhKX1mdW5jdGlvbiBmKGEpe3JldHVybiBHJiYiVEVNUExBVEUiPT1hLnRhZ05hbWV9ZnVuY3Rpb24gZyhhLGIpe3ZhciBjPWEucXVlcnlTZWxlY3RvckFsbChIKTtlKGEpJiZiKGEpLEEoYyxiKX1mdW5jdGlvbiBoKGEpe2Z1bmN0aW9uIGIoYSl7SFRNTFRlbXBsYXRlRWxlbWVudC5kZWNvcmF0ZShhKXx8aChhLmNvbnRlbnQpfWcoYSxiKX1mdW5jdGlvbiBpKGEsYil7T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoYikuZm9yRWFjaChmdW5jdGlvbihjKXtPYmplY3QuZGVmaW5lUHJvcGVydHkoYSxjLE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoYixjKSl9KX1mdW5jdGlvbiBqKGEpe2lmKCFhLmRlZmF1bHRWaWV3KXJldHVybiBhO3ZhciBiPWEudGVtcGxhdGVDb250ZW50c093bmVyXztpZighYil7Zm9yKGI9YS5pbXBsZW1lbnRhdGlvbi5jcmVhdGVIVE1MRG9jdW1lbnQoIiIpO2IubGFzdENoaWxkOyliLnJlbW92ZUNoaWxkKGIubGFzdENoaWxkKTthLnRlbXBsYXRlQ29udGVudHNPd25lcl89Yn1yZXR1cm4gYn1mdW5jdGlvbiBrKGEpe3ZhciBiPWEub3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0ZW1wbGF0ZSIpO2EucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoYixhKTtmb3IodmFyIGM9YS5hdHRyaWJ1dGVzLGQ9Yy5sZW5ndGg7ZC0tPjA7KXt2YXIgZT1jW2RdO0VbZS5uYW1lXSYmKCJ0ZW1wbGF0ZSIhPT1lLm5hbWUmJmIuc2V0QXR0cmlidXRlKGUubmFtZSxlLnZhbHVlKSxhLnJlbW92ZUF0dHJpYnV0ZShlLm5hbWUpKX1yZXR1cm4gYn1mdW5jdGlvbiBsKGEsYixjKXt2YXIgZD1hLmNvbnRlbnQ7aWYoYylyZXR1cm4gZC5hcHBlbmRDaGlsZChiKSx2b2lkIDA7Zm9yKHZhciBlO2U9Yi5maXJzdENoaWxkOylkLmFwcGVuZENoaWxkKGUpfWZ1bmN0aW9uIG0oYSl7IlRFTVBMQVRFIj09PWEudGFnTmFtZT9HfHwoSj9hLl9fcHJvdG9fXz1IVE1MVGVtcGxhdGVFbGVtZW50LnByb3RvdHlwZTppKGEsSFRNTFRlbXBsYXRlRWxlbWVudC5wcm90b3R5cGUpKTooaShhLEhUTUxUZW1wbGF0ZUVsZW1lbnQucHJvdG90eXBlKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoYSwiY29udGVudCIsTCkpfWZ1bmN0aW9uIG4oYSl7YS5zZXRNb2RlbEZuX3x8KGEuc2V0TW9kZWxGbl89ZnVuY3Rpb24oKXt0KGEsYS5tb2RlbCxhLmJpbmRpbmdEZWxlZ2F0ZSl9KSxJKGEuc2V0TW9kZWxGbl8pfWZ1bmN0aW9uIG8oYSxiLGMsZCl7aWYoYSYmYS5sZW5ndGgpe2Zvcih2YXIgZSxmPWEubGVuZ3RoLGc9MCxoPTAsaT0wO2Y+aDspe2lmKGc9YS5pbmRleE9mKCJ7eyIsaCksaT0wPmc/LTE6YS5pbmRleE9mKCJ9fSIsZysyKSwwPmkpe2lmKCFlKXJldHVybjtlLnB1c2goYS5zbGljZShoKSk7YnJlYWt9ZT1lfHxbXSxlLnB1c2goYS5zbGljZShoLGcpKTt2YXIgaj1hLnNsaWNlKGcrMixpKS50cmltKCk7ZS5wdXNoKFBhdGguZ2V0KGopKTt2YXIgaz1kJiZkKGosYixjKTtlLnB1c2goayksaD1pKzJ9cmV0dXJuIGg9PT1mJiZlLnB1c2goIiIpLGUuaGFzT25lUGF0aD00PT09ZS5sZW5ndGgsZS5pc1NpbXBsZVBhdGg9ZS5oYXNPbmVQYXRoJiYiIj09ZVswXSYmIiI9PWVbM10sZS5jb21iaW5hdG9yPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1lWzBdLGM9MTtjPGUubGVuZ3RoO2MrPTMpe3ZhciBkPWUuaGFzT25lUGF0aD9hOmFbKGMtMSkvM107dm9pZCAwIT09ZCYmKGIrPWQpLGIrPWVbYysyXX1yZXR1cm4gYn0sZX19ZnVuY3Rpb24gcChhLGIsYyxkKXtmb3IodmFyIGU9MDtlPGEubGVuZ3RoO2UrPTIpe3ZhciBmPWFbZV0sZz1hW2UrMV0saD1jLGk9Z1sxXTtpZihnLmhhc09uZVBhdGgpe3ZhciBqPWdbMl0saz1qJiZqKGMsZixiKTt2b2lkIDAhPT1rJiYoaD1rLGk9TSksZy5pc1NpbXBsZVBhdGh8fChoPW5ldyBQYXRoT2JzZXJ2ZXIoaCxpLHZvaWQgMCx2b2lkIDAsdm9pZCAwLGcuY29tYmluYXRvciksaT1NKX1lbHNle2Zvcih2YXIgbD1uZXcgQ29tcG91bmRQYXRoT2JzZXJ2ZXIodm9pZCAwLHZvaWQgMCx2b2lkIDAsZy5jb21iaW5hdG9yKSxtPTE7bTxnLmxlbmd0aDttKz0zKXt2YXIgbj1jLG89Z1ttXSxqPWdbbSsxXSxrPWomJmoobixmLGIpO3ZvaWQgMCE9PWsmJihuPWssbz1NKSxsLmFkZFBhdGgobixvKX1sLnN0YXJ0KCksaD1sLGk9TX12YXIgcD1iLmJpbmQoZixoLGkpO2QmJmQucHVzaChwKX19ZnVuY3Rpb24gcShhLGMpe2IoYSk7Zm9yKHZhciBkLGY9ZShhKSxnPSExLGg9ITEsaT0wO2k8YS5hdHRyaWJ1dGVzLmxlbmd0aDtpKyspe2Zvcih2YXIgaj1hLmF0dHJpYnV0ZXNbaV0saz1qLm5hbWUsbD1qLnZhbHVlOyJfIj09PWtbMF07KWs9ay5zdWJzdHJpbmcoMSk7ZiYmKGs9PT1EPyhnPSEwLGw9bHx8Int7fX0iKTooaz09PUJ8fGs9PT1DKSYmKGg9ITAsbD1sfHwie3t9fSIpKTt2YXIgbT1vKGwsayxhLGMpO20mJihkPWR8fFtdLGQucHVzaChrLG0pKX1yZXR1cm4gZyYmIWgmJihkPWR8fFtdLGQucHVzaChCLG8oInt7fX0iLEIsYSxjKSkpLGR9ZnVuY3Rpb24gcihhLGIpe2lmKGEubm9kZVR5cGU9PT1Ob2RlLkVMRU1FTlRfTk9ERSlyZXR1cm4gcShhLGIpO2lmKGEubm9kZVR5cGU9PT1Ob2RlLlRFWFRfTk9ERSl7dmFyIGM9byhhLmRhdGEsInRleHRDb250ZW50IixhLGIpO2lmKGMpcmV0dXJuWyJ0ZXh0Q29udGVudCIsY119fWZ1bmN0aW9uIHMoYSxiLGMsZCxlKXtpZihiJiYoYi50ZW1wbGF0ZVJlZiYmKEhUTUxUZW1wbGF0ZUVsZW1lbnQuZGVjb3JhdGUoYSxiLnRlbXBsYXRlUmVmKSxkJiYoYS5iaW5kaW5nRGVsZWdhdGVfPWQpKSxiLmxlbmd0aCYmcChiLGEsYyxlKSxiLmNoaWxkcmVuKSlmb3IodmFyIGY9MCxnPWEuZmlyc3RDaGlsZDtnO2c9Zy5uZXh0U2libGluZylzKGcsYi5jaGlsZHJlbltmKytdLGMsZCxlKX1mdW5jdGlvbiB0KGEsYyxkKXtiKGEpO3ZhciBlPWQmJiJmdW5jdGlvbiI9PXR5cGVvZiBkLnByZXBhcmVCaW5kaW5nP2QucHJlcGFyZUJpbmRpbmc6dm9pZCAwLGY9cihhLGUpO2YmJnAoZixhLGMpO2Zvcih2YXIgZz1hLmZpcnN0Q2hpbGQ7ZztnPWcubmV4dFNpYmxpbmcpdChnLGMsZCl9ZnVuY3Rpb24gdShhLGIpe3ZhciBjPWEuY2xvbmVOb2RlKCExKTtpZihhLmlzVGVtcGxhdGVfKXJldHVybiBjO2Zvcih2YXIgZD1hLmZpcnN0Q2hpbGQ7ZDtkPWQubmV4dFNpYmxpbmcpYy5hcHBlbmRDaGlsZCh1KGQsYikpO3JldHVybiBjfWZ1bmN0aW9uIHYoYSxiKXt2YXIgYz1yKGEsYik7ZShhKSYmKGEuaXNUZW1wbGF0ZV89ITAsYz1jfHxbXSxjLnRlbXBsYXRlUmVmPWEsYy5oYXNTdWJUZW1wbGF0ZT0hMCk7Zm9yKHZhciBkPWEuZmlyc3RDaGlsZCxmPTA7ZDtkPWQubmV4dFNpYmxpbmcsZisrKXt2YXIgZz12KGQsYik7ZyYmKGM9Y3x8W10sYy5jaGlsZHJlbj1jLmNoaWxkcmVufHx7fSxjLmNoaWxkcmVuW2ZdPWcsZy5oYXNTdWJUZW1wbGF0ZSYmKGMuaGFzU3ViVGVtcGxhdGU9ITApKX1yZXR1cm4gY31mdW5jdGlvbiB3KGEsYixjKXt0aGlzLmZpcnN0Tm9kZT1hLHRoaXMubGFzdE5vZGU9Yix0aGlzLm1vZGVsPWN9ZnVuY3Rpb24geChhLGIpe2lmKGEuZmlyc3RDaGlsZClmb3IodmFyIGM9bmV3IHcoYS5maXJzdENoaWxkLGEubGFzdENoaWxkLGIpLGQ9Yy5maXJzdE5vZGU7ZDspZC50ZW1wbGF0ZUluc3RhbmNlXz1jLGQ9ZC5uZXh0U2libGluZ31mdW5jdGlvbiB5KGEpe3RoaXMuY2xvc2VkPSExLHRoaXMudGVtcGxhdGVFbGVtZW50Xz1hLHRoaXMudGVybWluYXRvcnM9W10sdGhpcy5pdGVyYXRlZFZhbHVlPXZvaWQgMCx0aGlzLmFycmF5T2JzZXJ2ZXI9dm9pZCAwLHRoaXMuZGVwc0NoYW5nZWQ9ITEsdGhpcy5oYXNSZXBlYXQ9ITEsdGhpcy5yZXBlYXRNb2RlbD12b2lkIDAsdGhpcy5yZXBlYXRQYXRoPXZvaWQgMCx0aGlzLmhhc0JpbmQ9ITEsdGhpcy5iaW5kTW9kZWw9dm9pZCAwLHRoaXMuYmluZFBhdGg9dm9pZCAwLHRoaXMuaGFzSWY9ITEsdGhpcy5pZk1vZGVsPXZvaWQgMCx0aGlzLmlmUGF0aD12b2lkIDB9dmFyIHosQT1BcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsLmJpbmQoQXJyYXkucHJvdG90eXBlLmZvckVhY2gpO2EuTWFwJiYiZnVuY3Rpb24iPT10eXBlb2YgYS5NYXAucHJvdG90eXBlLmZvckVhY2g/ej1hLk1hcDooej1mdW5jdGlvbigpe3RoaXMua2V5cz1bXSx0aGlzLnZhbHVlcz1bXX0sei5wcm90b3R5cGU9e3NldDpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMua2V5cy5pbmRleE9mKGEpOzA+Yz8odGhpcy5rZXlzLnB1c2goYSksdGhpcy52YWx1ZXMucHVzaChiKSk6dGhpcy52YWx1ZXNbY109Yn0sZ2V0OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMua2V5cy5pbmRleE9mKGEpO2lmKCEoMD5iKSlyZXR1cm4gdGhpcy52YWx1ZXNbYl19LCJkZWxldGUiOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMua2V5cy5pbmRleE9mKGEpO3JldHVybiAwPmI/ITE6KHRoaXMua2V5cy5zcGxpY2UoYiwxKSx0aGlzLnZhbHVlcy5zcGxpY2UoYiwxKSwhMCl9LGZvckVhY2g6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9MDtjPHRoaXMua2V5cy5sZW5ndGg7YysrKWEuY2FsbChifHx0aGlzLHRoaXMudmFsdWVzW2NdLHRoaXMua2V5c1tjXSx0aGlzKX19KSwiZnVuY3Rpb24iIT10eXBlb2YgZG9jdW1lbnQuY29udGFpbnMmJihEb2N1bWVudC5wcm90b3R5cGUuY29udGFpbnM9ZnVuY3Rpb24oYSl7cmV0dXJuIGE9PT10aGlzfHxhLnBhcmVudE5vZGU9PT10aGlzPyEwOnRoaXMuZG9jdW1lbnRFbGVtZW50LmNvbnRhaW5zKGEpfSk7dmFyIEI9ImJpbmQiLEM9InJlcGVhdCIsRD0iaWYiLEU9e3RlbXBsYXRlOiEwLHJlcGVhdDohMCxiaW5kOiEwLHJlZjohMH0sRj17VEhFQUQ6ITAsVEJPRFk6ITAsVEZPT1Q6ITAsVEg6ITAsVFI6ITAsVEQ6ITAsQ09MR1JPVVA6ITAsQ09MOiEwLENBUFRJT046ITAsT1BUSU9OOiEwLE9QVEdST1VQOiEwfSxHPSJ1bmRlZmluZWQiIT10eXBlb2YgSFRNTFRlbXBsYXRlRWxlbWVudCxIPSJ0ZW1wbGF0ZSwgIitPYmplY3Qua2V5cyhGKS5tYXAoZnVuY3Rpb24oYSl7cmV0dXJuIGEudG9Mb3dlckNhc2UoKSsiW3RlbXBsYXRlXSJ9KS5qb2luKCIsICIpLEk9ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGEpe3RoaXMubmV4dFJ1bm5lcj1hLHRoaXMudmFsdWU9ITEsdGhpcy5sYXN0VmFsdWU9dGhpcy52YWx1ZSx0aGlzLnNjaGVkdWxlZD1bXSx0aGlzLnNjaGVkdWxlZElkcz1bXSx0aGlzLnJ1bm5pbmc9ITEsdGhpcy5vYnNlcnZlcj1uZXcgUGF0aE9ic2VydmVyKHRoaXMsInZhbHVlIix0aGlzLnJ1bix0aGlzKX1mdW5jdGlvbiBiKGEpe3ZhciBiPWFbZV07YVtlXXx8KGI9ZCsrLGFbZV09YiksYy5zY2hlZHVsZShhLGIpfWEucHJvdG90eXBlPXtzY2hlZHVsZTpmdW5jdGlvbihhLGIpe2lmKCF0aGlzLnNjaGVkdWxlZElkc1tiXSl7aWYodGhpcy5ydW5uaW5nKXJldHVybiB0aGlzLm5leHRSdW5uZXIuc2NoZWR1bGUoYSxiKTt0aGlzLnNjaGVkdWxlZElkc1tiXT0hMCx0aGlzLnNjaGVkdWxlZC5wdXNoKGEpLHRoaXMubGFzdFZhbHVlPT09dGhpcy52YWx1ZSYmKHRoaXMudmFsdWU9IXRoaXMudmFsdWUpfX0scnVuOmZ1bmN0aW9uKCl7dGhpcy5ydW5uaW5nPSEwO2Zvcih2YXIgYT0wO2E8dGhpcy5zY2hlZHVsZWQubGVuZ3RoO2ErKyl7dmFyIGI9dGhpcy5zY2hlZHVsZWRbYV0sYz1iW2VdO3RoaXMuc2NoZWR1bGVkSWRzW2NdPSExLCJmdW5jdGlvbiI9PXR5cGVvZiBiP2IoKTpiLnJlc29sdmUoKX10aGlzLnNjaGVkdWxlZD1bXSx0aGlzLnNjaGVkdWxlZElkcz1bXSx0aGlzLmxhc3RWYWx1ZT10aGlzLnZhbHVlLHRoaXMucnVubmluZz0hMX19O3ZhciBjPW5ldyBhKG5ldyBhKSxkPTEsZT0iX19zY2hlZHVsZWRJZF9fIjtyZXR1cm4gYn0oKTtkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJET01Db250ZW50TG9hZGVkIixmdW5jdGlvbigpe2goZG9jdW1lbnQpLFBsYXRmb3JtLnBlcmZvcm1NaWNyb3Rhc2tDaGVja3BvaW50KCl9LCExKSxHfHwoYS5IVE1MVGVtcGxhdGVFbGVtZW50PWZ1bmN0aW9uKCl7dGhyb3cgVHlwZUVycm9yKCJJbGxlZ2FsIGNvbnN0cnVjdG9yIil9KTt2YXIgSj0iX19wcm90b19fImlue307SFRNTFRlbXBsYXRlRWxlbWVudC5kZWNvcmF0ZT1mdW5jdGlvbihhLGMpe2lmKGEudGVtcGxhdGVJc0RlY29yYXRlZF8pcmV0dXJuITE7dmFyIGU9YTtlLnRlbXBsYXRlSXNEZWNvcmF0ZWRfPSEwO3ZhciBnPWYoZSksaT1nLG49IWcsbz0hMTtpZighZyYmZChlKSYmKGIoIWMpLGU9ayhhKSxlLnRlbXBsYXRlSXNEZWNvcmF0ZWRfPSEwLGc9ZihlKSxvPSEwKSwhZyl7bShlKTt2YXIgcD1qKGUub3duZXJEb2N1bWVudCk7ZS5jb250ZW50Xz1wLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKX1yZXR1cm4gYz9lLmluc3RhbmNlUmVmXz1jOm4/bChlLGEsbyk6aSYmaChlLmNvbnRlbnQpLCEwfSxIVE1MVGVtcGxhdGVFbGVtZW50LmJvb3RzdHJhcD1oO3ZhciBLPWEuSFRNTFVua25vd25FbGVtZW50fHxIVE1MRWxlbWVudCxMPXtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZW50X30sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9O0d8fChIVE1MVGVtcGxhdGVFbGVtZW50LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKEsucHJvdG90eXBlKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoSFRNTFRlbXBsYXRlRWxlbWVudC5wcm90b3R5cGUsImNvbnRlbnQiLEwpKSxpKEhUTUxUZW1wbGF0ZUVsZW1lbnQucHJvdG90eXBlLHtiaW5kOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gdGhpcy5pdGVyYXRvcl98fCh0aGlzLml0ZXJhdG9yXz1uZXcgeSh0aGlzKSksdGhpcy5iaW5kaW5ncz10aGlzLmJpbmRpbmdzfHx7fSwiYmluZCI9PT1hPyh0aGlzLml0ZXJhdG9yXy5oYXNCaW5kPSEwLHRoaXMuaXRlcmF0b3JfLmJpbmRNb2RlbD1iLHRoaXMuaXRlcmF0b3JfLmJpbmRQYXRoPWMsdGhpcy5pdGVyYXRvcl8uZGVwc0NoYW5naW5nfHwodGhpcy5pdGVyYXRvcl8uZGVwc0NoYW5naW5nPSEwLEkodGhpcy5pdGVyYXRvcl8pKSx0aGlzLmJpbmRpbmdzLmJpbmQ9dGhpcy5pdGVyYXRvcl8pOiJyZXBlYXQiPT09YT8odGhpcy5pdGVyYXRvcl8uaGFzUmVwZWF0PSEwLHRoaXMuaXRlcmF0b3JfLnJlcGVhdE1vZGVsPWIsdGhpcy5pdGVyYXRvcl8ucmVwZWF0UGF0aD1jLHRoaXMuaXRlcmF0b3JfLmRlcHNDaGFuZ2luZ3x8KHRoaXMuaXRlcmF0b3JfLmRlcHNDaGFuZ2luZz0hMCxJKHRoaXMuaXRlcmF0b3JfKSksdGhpcy5iaW5kaW5ncy5yZXBlYXQ9dGhpcy5pdGVyYXRvcl8pOiJpZiI9PT1hPyh0aGlzLml0ZXJhdG9yXy5oYXNJZj0hMCx0aGlzLml0ZXJhdG9yXy5pZk1vZGVsPWIsdGhpcy5pdGVyYXRvcl8uaWZQYXRoPWMsdGhpcy5pdGVyYXRvcl8uZGVwc0NoYW5naW5nfHwodGhpcy5pdGVyYXRvcl8uZGVwc0NoYW5naW5nPSEwLEkodGhpcy5pdGVyYXRvcl8pKSx0aGlzLmJpbmRpbmdzLmlmPXRoaXMuaXRlcmF0b3JfKTpIVE1MRWxlbWVudC5wcm90b3R5cGUuYmluZC5jYWxsKHRoaXMsYSxiLGMpfSx1bmJpbmQ6ZnVuY3Rpb24oYSl7aWYoImJpbmQiPT09YSl7aWYoIXRoaXMuaXRlcmF0b3JfKXJldHVybjtyZXR1cm4gdGhpcy5pdGVyYXRvcl8uaGFzQmluZD0hMSx0aGlzLml0ZXJhdG9yXy5iaW5kTW9kZWw9dm9pZCAwLHRoaXMuaXRlcmF0b3JfLmJpbmRQYXRoPXZvaWQgMCx0aGlzLml0ZXJhdG9yXy5kZXBzQ2hhbmdpbmd8fCh0aGlzLml0ZXJhdG9yXy5kZXBzQ2hhbmdpbmc9ITAsSSh0aGlzLml0ZXJhdG9yXykpLHRoaXMuYmluZGluZ3MuYmluZD12b2lkIDB9aWYoInJlcGVhdCI9PT1hKXtpZighdGhpcy5pdGVyYXRvcl8pcmV0dXJuO3JldHVybiB0aGlzLml0ZXJhdG9yXy5oYXNSZXBlYXQ9ITEsdGhpcy5pdGVyYXRvcl8ucmVwZWF0TW9kZWw9dm9pZCAwLHRoaXMuaXRlcmF0b3JfLnJlcGVhdFBhdGg9dm9pZCAwLHRoaXMuaXRlcmF0b3JfLmRlcHNDaGFuZ2luZ3x8KHRoaXMuaXRlcmF0b3JfLmRlcHNDaGFuZ2luZz0hMCxJKHRoaXMuaXRlcmF0b3JfKSksdGhpcy5iaW5kaW5ncy5yZXBlYXQ9dm9pZCAwfWlmKCJpZiI9PT1hKXtpZighdGhpcy5pdGVyYXRvcl8pcmV0dXJuO3JldHVybiB0aGlzLml0ZXJhdG9yXy5oYXNJZj0hMSx0aGlzLml0ZXJhdG9yXy5pZk1vZGVsPXZvaWQgMCx0aGlzLml0ZXJhdG9yXy5pZlBhdGg9dm9pZCAwLHRoaXMuaXRlcmF0b3JfLmRlcHNDaGFuZ2luZ3x8KHRoaXMuaXRlcmF0b3JfLmRlcHNDaGFuZ2luZz0hMCxJKHRoaXMuaXRlcmF0b3JfKSksdGhpcy5iaW5kaW5ncy5pZj12b2lkIDB9cmV0dXJuIEhUTUxFbGVtZW50LnByb3RvdHlwZS51bmJpbmQuY2FsbCh0aGlzLGEpfSxjcmVhdGVJbnN0YW5jZTpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9dGhpcy5yZWYuY29udGVudCxlPWQuYmluZGluZ01hcF87aWYoIWUpe3ZhciBmPWImJiJmdW5jdGlvbiI9PXR5cGVvZiBiLnByZXBhcmVCaW5kaW5nP2IucHJlcGFyZUJpbmRpbmc6dm9pZCAwO2U9dihkLGYpfHxbXSxkLmJpbmRpbmdNYXBfPWV9dmFyIGc9ZS5oYXNTdWJUZW1wbGF0ZT91KGQpOmQuY2xvbmVOb2RlKCEwKTtyZXR1cm4gcyhnLGUsYSxiLGMpLHgoZyxhKSxnfSxnZXQgbW9kZWwoKXtyZXR1cm4gdGhpcy5tb2RlbF99LHNldCBtb2RlbChhKXt0aGlzLm1vZGVsXz1hLG4odGhpcyl9LGdldCBiaW5kaW5nRGVsZWdhdGUoKXtyZXR1cm4gdGhpcy5iaW5kaW5nRGVsZWdhdGVffSxzZXQgYmluZGluZ0RlbGVnYXRlKGEpe3RoaXMuYmluZGluZ0RlbGVnYXRlXz1hLG4odGhpcyl9LGdldCByZWYoKXt2YXIgYSxiPXRoaXMuZ2V0QXR0cmlidXRlKCJyZWYiKTtpZihiKXt2YXIgZD1jKHRoaXMpO2QmJihhPWQuZ2V0RWxlbWVudEJ5SWQoYikpfWlmKGF8fChhPXRoaXMuaW5zdGFuY2VSZWZfKSwhYSlyZXR1cm4gdGhpczt2YXIgZT1hLnJlZjtyZXR1cm4gZT9lOmF9fSk7dmFyIE09UGF0aC5nZXQoInZhbHVlIik7T2JqZWN0LmRlZmluZVByb3BlcnR5KE5vZGUucHJvdG90eXBlLCJ0ZW1wbGF0ZUluc3RhbmNlIix7Z2V0OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy50ZW1wbGF0ZUluc3RhbmNlXztyZXR1cm4gYT9hOnRoaXMucGFyZW50Tm9kZT90aGlzLnBhcmVudE5vZGUudGVtcGxhdGVJbnN0YW5jZTp2b2lkIDB9fSkseS5wcm90b3R5cGU9e3Jlc29sdmU6ZnVuY3Rpb24oKXtpZih0aGlzLmRlcHNDaGFuZ2luZz0hMSx0aGlzLnZhbHVlT2JzZXJ2ZXImJih0aGlzLnZhbHVlT2JzZXJ2ZXIuY2xvc2UoKSx0aGlzLnZhbHVlT2JzZXJ2ZXI9dm9pZCAwKSwhdGhpcy5oYXNSZXBlYXQmJiF0aGlzLmhhc0JpbmQpcmV0dXJuIHRoaXMudmFsdWVDaGFuZ2VkKCksdm9pZCAwO3ZhciBhPXRoaXMuaGFzUmVwZWF0PT09ITAsYj1hP3RoaXMucmVwZWF0TW9kZWw6dGhpcy5iaW5kTW9kZWwsYz1hP3RoaXMucmVwZWF0UGF0aDp0aGlzLmJpbmRQYXRoO2lmKHRoaXMuaGFzSWYpe3ZhciBkPWZ1bmN0aW9uKGIpe3ZhciBjPWJbMF0sZD1iWzFdO3JldHVybiBkP2E/YzpbY106dm9pZCAwfTt0aGlzLnZhbHVlT2JzZXJ2ZXI9bmV3IENvbXBvdW5kUGF0aE9ic2VydmVyKHRoaXMudmFsdWVDaGFuZ2VkLHRoaXMsdm9pZCAwLGQpLHRoaXMudmFsdWVPYnNlcnZlci5hZGRQYXRoKGIsYyksdGhpcy52YWx1ZU9ic2VydmVyLmFkZFBhdGgodGhpcy5pZk1vZGVsLHRoaXMuaWZQYXRoKSx0aGlzLnZhbHVlT2JzZXJ2ZXIuc3RhcnQoKX1lbHNle3ZhciBkPXRoaXMuaGFzUmVwZWF0P3ZvaWQgMDpmdW5jdGlvbihhKXtyZXR1cm5bYV19O3RoaXMudmFsdWVPYnNlcnZlcj1uZXcgUGF0aE9ic2VydmVyKGIsYyx0aGlzLnZhbHVlQ2hhbmdlZCx0aGlzLHZvaWQgMCxkKX10aGlzLnZhbHVlQ2hhbmdlZCh0aGlzLnZhbHVlT2JzZXJ2ZXIudmFsdWUpfSx2YWx1ZUNoYW5nZWQ6ZnVuY3Rpb24oYSl7QXJyYXkuaXNBcnJheShhKXx8KGE9dm9pZCAwKTt2YXIgYj10aGlzLml0ZXJhdGVkVmFsdWU7dGhpcy51bm9ic2VydmUoKSx0aGlzLml0ZXJhdGVkVmFsdWU9YSx0aGlzLml0ZXJhdGVkVmFsdWUmJih0aGlzLmFycmF5T2JzZXJ2ZXI9bmV3IEFycmF5T2JzZXJ2ZXIodGhpcy5pdGVyYXRlZFZhbHVlLHRoaXMuaGFuZGxlU3BsaWNlcyx0aGlzKSk7dmFyIGM9QXJyYXlPYnNlcnZlci5jYWxjdWxhdGVTcGxpY2VzKHRoaXMuaXRlcmF0ZWRWYWx1ZXx8W10sYnx8W10pO2MubGVuZ3RoJiZ0aGlzLmhhbmRsZVNwbGljZXMoYyl9LGdldFRlcm1pbmF0b3JBdDpmdW5jdGlvbihhKXtpZigtMT09YSlyZXR1cm4gdGhpcy50ZW1wbGF0ZUVsZW1lbnRfO3ZhciBiPXRoaXMudGVybWluYXRvcnNbMiphXTtpZihiLm5vZGVUeXBlIT09Tm9kZS5FTEVNRU5UX05PREV8fHRoaXMudGVtcGxhdGVFbGVtZW50Xz09PWIpcmV0dXJuIGI7dmFyIGM9Yi5pdGVyYXRvcl87cmV0dXJuIGM/Yy5nZXRUZXJtaW5hdG9yQXQoYy50ZXJtaW5hdG9ycy5sZW5ndGgvMi0xKTpifSxpbnNlcnRJbnN0YW5jZUF0OmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPXRoaXMuZ2V0VGVybWluYXRvckF0KGEtMSksZj1lO2I/Zj1iLmxhc3RDaGlsZHx8ZjpjJiYoZj1jW2MubGVuZ3RoLTFdfHxmKSx0aGlzLnRlcm1pbmF0b3JzLnNwbGljZSgyKmEsMCxmLGQpO3ZhciBnPXRoaXMudGVtcGxhdGVFbGVtZW50Xy5wYXJlbnROb2RlLGg9ZS5uZXh0U2libGluZztpZihiKWcuaW5zZXJ0QmVmb3JlKGIsaCk7ZWxzZSBpZihjKWZvcih2YXIgaT0wO2k8Yy5sZW5ndGg7aSsrKWcuaW5zZXJ0QmVmb3JlKGNbaV0saCl9LGV4dHJhY3RJbnN0YW5jZUF0OmZ1bmN0aW9uKGEpe3ZhciBiPVtdLGM9dGhpcy5nZXRUZXJtaW5hdG9yQXQoYS0xKSxkPXRoaXMuZ2V0VGVybWluYXRvckF0KGEpO2IuYm91bmQ9dGhpcy50ZXJtaW5hdG9yc1syKmErMV0sdGhpcy50ZXJtaW5hdG9ycy5zcGxpY2UoMiphLDIpO2Zvcih2YXIgZT10aGlzLnRlbXBsYXRlRWxlbWVudF8ucGFyZW50Tm9kZTtkIT09Yzspe3ZhciBmPWMubmV4dFNpYmxpbmc7Zj09ZCYmKGQ9YyksZS5yZW1vdmVDaGlsZChmKSxiLnB1c2goZil9cmV0dXJuIGJ9LGdldERlbGVnYXRlRnVuY3Rpb246ZnVuY3Rpb24oYSxiLGMpe2lmKCFhfHwiZnVuY3Rpb24iIT10eXBlb2YgYVtiXSlyZXR1cm4gbnVsbDt2YXIgZD1hW2JdKGMpO3JldHVybiJmdW5jdGlvbiI9PXR5cGVvZiBkP2Q6bnVsbH0saGFuZGxlU3BsaWNlczpmdW5jdGlvbihhKXtpZighdGhpcy5jbG9zZWQpe3ZhciBiPXRoaXMudGVtcGxhdGVFbGVtZW50XyxjPWIuYmluZGluZ0RlbGVnYXRlO2lmKCFiLnBhcmVudE5vZGV8fCFiLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcpcmV0dXJuIHRoaXMuY2xvc2UoKSx2b2lkIDA7dm9pZCAwPT09dGhpcy5pbnN0YW5jZU1vZGVsRm5fJiYodGhpcy5pbnN0YW5jZU1vZGVsRm5fPXRoaXMuZ2V0RGVsZWdhdGVGdW5jdGlvbihjLCJwcmVwYXJlSW5zdGFuY2VNb2RlbCIsYikpLHZvaWQgMD09PXRoaXMuaW5zdGFuY2VQb3NpdGlvbkNoYW5nZWRGbl8mJih0aGlzLmluc3RhbmNlUG9zaXRpb25DaGFuZ2VkRm5fPXRoaXMuZ2V0RGVsZWdhdGVGdW5jdGlvbihjLCJwcmVwYXJlSW5zdGFuY2VQb3NpdGlvbkNoYW5nZWQiLGIpKTt2YXIgZD1uZXcgeixlPTA7YS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2EucmVtb3ZlZC5mb3JFYWNoKGZ1bmN0aW9uKGIpe3ZhciBjPXRoaXMuZXh0cmFjdEluc3RhbmNlQXQoYS5pbmRleCtlKTtkLnNldChiLGMpfSx0aGlzKSxlLT1hLmFkZGVkQ291bnR9LHRoaXMpLGEuZm9yRWFjaChmdW5jdGlvbihhKXtmb3IodmFyIGI9YS5pbmRleDtiPGEuaW5kZXgrYS5hZGRlZENvdW50O2IrKyl7dmFyIGUsZj10aGlzLml0ZXJhdGVkVmFsdWVbYl0sZz12b2lkIDAsaD1kLmdldChmKTtoPyhkLmRlbGV0ZShmKSxlPWguYm91bmQpOihlPVtdLHRoaXMuaW5zdGFuY2VNb2RlbEZuXyYmKGY9dGhpcy5pbnN0YW5jZU1vZGVsRm5fKGYpKSx2b2lkIDAhPT1mJiYoZz10aGlzLnRlbXBsYXRlRWxlbWVudF8uY3JlYXRlSW5zdGFuY2UoZixjLGUpKSksdGhpcy5pbnNlcnRJbnN0YW5jZUF0KGIsZyxoLGUpfX0sdGhpcyksZC5mb3JFYWNoKGZ1bmN0aW9uKGEpe3RoaXMuY2xvc2VJbnN0YW5jZUJpbmRpbmdzKGEuYm91bmQpfSx0aGlzKSx0aGlzLmluc3RhbmNlUG9zaXRpb25DaGFuZ2VkRm5fJiZ0aGlzLnJlcG9ydEluc3RhbmNlc01vdmVkKGEpfX0scmVwb3J0SW5zdGFuY2VNb3ZlZDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmdldFRlcm1pbmF0b3JBdChhLTEpLGM9dGhpcy5nZXRUZXJtaW5hdG9yQXQoYSk7aWYoYiE9PWMpe3ZhciBkPWIubmV4dFNpYmxpbmcudGVtcGxhdGVJbnN0YW5jZTt0aGlzLmluc3RhbmNlUG9zaXRpb25DaGFuZ2VkRm5fKGQsYSl9fSxyZXBvcnRJbnN0YW5jZXNNb3ZlZDpmdW5jdGlvbihhKXtmb3IodmFyIGI9MCxjPTAsZD0wO2Q8YS5sZW5ndGg7ZCsrKXt2YXIgZT1hW2RdO2lmKDAhPWMpZm9yKDtiPGUuaW5kZXg7KXRoaXMucmVwb3J0SW5zdGFuY2VNb3ZlZChiKSxiKys7ZWxzZSBiPWUuaW5kZXg7Zm9yKDtiPGUuaW5kZXgrZS5hZGRlZENvdW50Oyl0aGlzLnJlcG9ydEluc3RhbmNlTW92ZWQoYiksYisrO2MrPWUuYWRkZWRDb3VudC1lLnJlbW92ZWQubGVuZ3RofWlmKDAhPWMpZm9yKHZhciBmPXRoaXMudGVybWluYXRvcnMubGVuZ3RoLzI7Zj5iOyl0aGlzLnJlcG9ydEluc3RhbmNlTW92ZWQoYiksYisrfSxjbG9zZUluc3RhbmNlQmluZGluZ3M6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPTA7YjxhLmxlbmd0aDtiKyspYVtiXS5jbG9zZSgpfSx1bm9ic2VydmU6ZnVuY3Rpb24oKXt0aGlzLmFycmF5T2JzZXJ2ZXImJih0aGlzLmFycmF5T2JzZXJ2ZXIuY2xvc2UoKSx0aGlzLmFycmF5T2JzZXJ2ZXI9dm9pZCAwKX0sY2xvc2U6ZnVuY3Rpb24oKXtpZighdGhpcy5jbG9zZWQpe3RoaXMudW5vYnNlcnZlKCk7Zm9yKHZhciBhPTE7YTx0aGlzLnRlcm1pbmF0b3JzLmxlbmd0aDthKz0yKXRoaXMuY2xvc2VJbnN0YW5jZUJpbmRpbmdzKHRoaXMudGVybWluYXRvcnNbYV0pO3RoaXMudGVybWluYXRvcnMubGVuZ3RoPTAsdGhpcy52YWx1ZU9ic2VydmVyJiZ0aGlzLnZhbHVlT2JzZXJ2ZXIuY2xvc2UoKSx0aGlzLnZhbHVlT2JzZXJ2ZXI9dm9pZCAwLHRoaXMudGVtcGxhdGVFbGVtZW50Xy5pdGVyYXRvcl89dm9pZCAwLHRoaXMuY2xvc2VkPSEwfX19LEhUTUxUZW1wbGF0ZUVsZW1lbnQuZm9yQWxsVGVtcGxhdGVzRnJvbV89Z30odGhpcyksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSxiKXtpZighYSl0aHJvdyBuZXcgRXJyb3IoIkFTU0VSVDogIitiKX1mdW5jdGlvbiBjKGEpe3JldHVybiBhPj00OCYmNTc+PWF9ZnVuY3Rpb24gZChhKXtyZXR1cm4gMzI9PT1hfHw5PT09YXx8MTE9PT1hfHwxMj09PWF8fDE2MD09PWF8fGE+PTU3NjAmJiLhmoDhoI7igIDigIHigILigIPigITigIXigIbigIfigIjigInigIrigK/igZ/jgIDvu78iLmluZGV4T2YoU3RyaW5nLmZyb21DaGFyQ29kZShhKSk+MH1mdW5jdGlvbiBlKGEpe3JldHVybiAxMD09PWF8fDEzPT09YXx8ODIzMj09PWF8fDgyMzM9PT1hfWZ1bmN0aW9uIGYoYSl7cmV0dXJuIDM2PT09YXx8OTU9PT1hfHxhPj02NSYmOTA+PWF8fGE+PTk3JiYxMjI+PWF9ZnVuY3Rpb24gZyhhKXtyZXR1cm4gMzY9PT1hfHw5NT09PWF8fGE+PTY1JiY5MD49YXx8YT49OTcmJjEyMj49YXx8YT49NDgmJjU3Pj1hfWZ1bmN0aW9uIGgoYSl7cmV0dXJuInRoaXMiPT09YX1mdW5jdGlvbiBpKCl7Zm9yKDskPlomJmQoWS5jaGFyQ29kZUF0KFopKTspKytafWZ1bmN0aW9uIGooKXt2YXIgYSxiO2ZvcihhPVorKzskPlomJihiPVkuY2hhckNvZGVBdChaKSxnKGIpKTspKytaO3JldHVybiBZLnNsaWNlKGEsWil9ZnVuY3Rpb24gaygpe3ZhciBhLGIsYztyZXR1cm4gYT1aLGI9aigpLGM9MT09PWIubGVuZ3RoP1UuSWRlbnRpZmllcjpoKGIpP1UuS2V5d29yZDoibnVsbCI9PT1iP1UuTnVsbExpdGVyYWw6InRydWUiPT09Ynx8ImZhbHNlIj09PWI/VS5Cb29sZWFuTGl0ZXJhbDpVLklkZW50aWZpZXIse3R5cGU6Yyx2YWx1ZTpiLHJhbmdlOlthLFpdfX1mdW5jdGlvbiBsKCl7dmFyIGEsYixjPVosZD1ZLmNoYXJDb2RlQXQoWiksZT1ZW1pdO3N3aXRjaChkKXtjYXNlIDQ2OmNhc2UgNDA6Y2FzZSA0MTpjYXNlIDU5OmNhc2UgNDQ6Y2FzZSAxMjM6Y2FzZSAxMjU6Y2FzZSA5MTpjYXNlIDkzOmNhc2UgNTg6Y2FzZSA2MzpyZXR1cm4rK1ose3R5cGU6VS5QdW5jdHVhdG9yLHZhbHVlOlN0cmluZy5mcm9tQ2hhckNvZGUoZCkscmFuZ2U6W2MsWl19O2RlZmF1bHQ6aWYoYT1ZLmNoYXJDb2RlQXQoWisxKSw2MT09PWEpc3dpdGNoKGQpe2Nhc2UgMzc6Y2FzZSAzODpjYXNlIDQyOmNhc2UgNDM6Y2FzZSA0NTpjYXNlIDQ3OmNhc2UgNjA6Y2FzZSA2MjpjYXNlIDEyNDpyZXR1cm4gWis9Mix7dHlwZTpVLlB1bmN0dWF0b3IsdmFsdWU6U3RyaW5nLmZyb21DaGFyQ29kZShkKStTdHJpbmcuZnJvbUNoYXJDb2RlKGEpLHJhbmdlOltjLFpdfTtjYXNlIDMzOmNhc2UgNjE6cmV0dXJuIForPTIsNjE9PT1ZLmNoYXJDb2RlQXQoWikmJisrWix7dHlwZTpVLlB1bmN0dWF0b3IsdmFsdWU6WS5zbGljZShjLFopLHJhbmdlOltjLFpdfX19cmV0dXJuIGI9WVtaKzFdLGU9PT1iJiYiJnwiLmluZGV4T2YoZSk+PTA/KForPTIse3R5cGU6VS5QdW5jdHVhdG9yLHZhbHVlOmUrYixyYW5nZTpbYyxaXX0pOiI8Pj0hKy0qJSZ8Xi8iLmluZGV4T2YoZSk+PTA/KCsrWix7dHlwZTpVLlB1bmN0dWF0b3IsdmFsdWU6ZSxyYW5nZTpbYyxaXX0pOihzKHt9LFguVW5leHBlY3RlZFRva2VuLCJJTExFR0FMIiksdm9pZCAwKX1mdW5jdGlvbiBtKCl7dmFyIGEsZCxlO2lmKGU9WVtaXSxiKGMoZS5jaGFyQ29kZUF0KDApKXx8Ii4iPT09ZSwiTnVtZXJpYyBsaXRlcmFsIG11c3Qgc3RhcnQgd2l0aCBhIGRlY2ltYWwgZGlnaXQgb3IgYSBkZWNpbWFsIHBvaW50IiksZD1aLGE9IiIsIi4iIT09ZSl7Zm9yKGE9WVtaKytdLGU9WVtaXSwiMCI9PT1hJiZlJiZjKGUuY2hhckNvZGVBdCgwKSkmJnMoe30sWC5VbmV4cGVjdGVkVG9rZW4sIklMTEVHQUwiKTtjKFkuY2hhckNvZGVBdChaKSk7KWErPVlbWisrXTtlPVlbWl19aWYoIi4iPT09ZSl7Zm9yKGErPVlbWisrXTtjKFkuY2hhckNvZGVBdChaKSk7KWErPVlbWisrXTtlPVlbWl19aWYoImUiPT09ZXx8IkUiPT09ZSlpZihhKz1ZW1orK10sZT1ZW1pdLCgiKyI9PT1lfHwiLSI9PT1lKSYmKGErPVlbWisrXSksYyhZLmNoYXJDb2RlQXQoWikpKWZvcig7YyhZLmNoYXJDb2RlQXQoWikpOylhKz1ZW1orK107ZWxzZSBzKHt9LFguVW5leHBlY3RlZFRva2VuLCJJTExFR0FMIik7cmV0dXJuIGYoWS5jaGFyQ29kZUF0KFopKSYmcyh7fSxYLlVuZXhwZWN0ZWRUb2tlbiwiSUxMRUdBTCIpLHt0eXBlOlUuTnVtZXJpY0xpdGVyYWwsdmFsdWU6cGFyc2VGbG9hdChhKSxyYW5nZTpbZCxaXX19ZnVuY3Rpb24gbigpe3ZhciBhLGMsZCxmPSIiLGc9ITE7Zm9yKGE9WVtaXSxiKCInIj09PWF8fCciJz09PWEsIlN0cmluZyBsaXRlcmFsIG11c3Qgc3RhcnRzIHdpdGggYSBxdW90ZSIpLGM9WiwrK1o7JD5aOyl7aWYoZD1ZW1orK10sZD09PWEpe2E9IiI7YnJlYWt9aWYoIlxcIj09PWQpaWYoZD1ZW1orK10sZCYmZShkLmNoYXJDb2RlQXQoMCkpKSJcciI9PT1kJiYiXG4iPT09WVtaXSYmKytaO2Vsc2Ugc3dpdGNoKGQpe2Nhc2UibiI6Zis9IlxuIjticmVhaztjYXNlInIiOmYrPSJcciI7YnJlYWs7Y2FzZSJ0IjpmKz0iCSI7YnJlYWs7Y2FzZSJiIjpmKz0iXGIiO2JyZWFrO2Nhc2UiZiI6Zis9IlxmIjticmVhaztjYXNlInYiOmYrPSILIjticmVhaztkZWZhdWx0OmYrPWR9ZWxzZXtpZihlKGQuY2hhckNvZGVBdCgwKSkpYnJlYWs7Zis9ZH19cmV0dXJuIiIhPT1hJiZzKHt9LFguVW5leHBlY3RlZFRva2VuLCJJTExFR0FMIikse3R5cGU6VS5TdHJpbmdMaXRlcmFsLHZhbHVlOmYsb2N0YWw6ZyxyYW5nZTpbYyxaXX19ZnVuY3Rpb24gbyhhKXtyZXR1cm4gYS50eXBlPT09VS5JZGVudGlmaWVyfHxhLnR5cGU9PT1VLktleXdvcmR8fGEudHlwZT09PVUuQm9vbGVhbkxpdGVyYWx8fGEudHlwZT09PVUuTnVsbExpdGVyYWx9ZnVuY3Rpb24gcCgpe3ZhciBhO3JldHVybiBpKCksWj49JD97dHlwZTpVLkVPRixyYW5nZTpbWixaXX06KGE9WS5jaGFyQ29kZUF0KFopLDQwPT09YXx8NDE9PT1hfHw1OD09PWE/bCgpOjM5PT09YXx8MzQ9PT1hP24oKTpmKGEpP2soKTo0Nj09PWE/YyhZLmNoYXJDb2RlQXQoWisxKSk/bSgpOmwoKTpjKGEpP20oKTpsKCkpfWZ1bmN0aW9uIHEoKXt2YXIgYTtyZXR1cm4gYT1hYixaPWEucmFuZ2VbMV0sYWI9cCgpLFo9YS5yYW5nZVsxXSxhfWZ1bmN0aW9uIHIoKXt2YXIgYTthPVosYWI9cCgpLFo9YX1mdW5jdGlvbiBzKGEsYyl7dmFyIGQsZT1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMiksZj1jLnJlcGxhY2UoLyUoXGQpL2csZnVuY3Rpb24oYSxjKXtyZXR1cm4gYihjPGUubGVuZ3RoLCJNZXNzYWdlIHJlZmVyZW5jZSBtdXN0IGJlIGluIHJhbmdlIiksZVtjXX0pO3Rocm93IGQ9bmV3IEVycm9yKGYpLGQuaW5kZXg9WixkLmRlc2NyaXB0aW9uPWYsZH1mdW5jdGlvbiB0KGEpe3MoYSxYLlVuZXhwZWN0ZWRUb2tlbixhLnZhbHVlKX1mdW5jdGlvbiB1KGEpe3ZhciBiPXEoKTsoYi50eXBlIT09VS5QdW5jdHVhdG9yfHxiLnZhbHVlIT09YSkmJnQoYil9ZnVuY3Rpb24gdihhKXtyZXR1cm4gYWIudHlwZT09PVUuUHVuY3R1YXRvciYmYWIudmFsdWU9PT1hfWZ1bmN0aW9uIHcoYSl7cmV0dXJuIGFiLnR5cGU9PT1VLktleXdvcmQmJmFiLnZhbHVlPT09YX1mdW5jdGlvbiB4KCl7cmV0dXJuIDU5PT09WS5jaGFyQ29kZUF0KFopPyhxKCksdm9pZCAwKTooaSgpLHYoIjsiKT8ocSgpLHZvaWQgMCk6KGFiLnR5cGU9PT1VLkVPRnx8digifSIpfHx0KGFiKSx2b2lkIDApKX1mdW5jdGlvbiB5KCl7dmFyIGE9W107Zm9yKHUoIlsiKTshdigiXSIpOyl2KCIsIik/KHEoKSxhLnB1c2gobnVsbCkpOihhLnB1c2goZGIoKSksdigiXSIpfHx1KCIsIikpO3JldHVybiB1KCJdIiksXy5jcmVhdGVBcnJheUV4cHJlc3Npb24oYSl9ZnVuY3Rpb24geigpe3ZhciBhO3JldHVybiBpKCksYT1xKCksYS50eXBlPT09VS5TdHJpbmdMaXRlcmFsfHxhLnR5cGU9PT1VLk51bWVyaWNMaXRlcmFsP18uY3JlYXRlTGl0ZXJhbChhKTpfLmNyZWF0ZUlkZW50aWZpZXIoYS52YWx1ZSl9ZnVuY3Rpb24gQSgpe3ZhciBhLGI7cmV0dXJuIGE9YWIsaSgpLChhLnR5cGU9PT1VLkVPRnx8YS50eXBlPT09VS5QdW5jdHVhdG9yKSYmdChhKSxiPXooKSx1KCI6IiksXy5jcmVhdGVQcm9wZXJ0eSgiaW5pdCIsYixkYigpKX1mdW5jdGlvbiBCKCl7dmFyIGE9W107Zm9yKHUoInsiKTshdigifSIpOylhLnB1c2goQSgpKSx2KCJ9Iil8fHUoIiwiKTtyZXR1cm4gdSgifSIpLF8uY3JlYXRlT2JqZWN0RXhwcmVzc2lvbihhKX1mdW5jdGlvbiBDKCl7dmFyIGE7cmV0dXJuIHUoIigiKSxhPWRiKCksdSgiKSIpLGF9ZnVuY3Rpb24gRCgpe3ZhciBhLGIsYztyZXR1cm4gdigiKCIpP0MoKTooYT1hYi50eXBlLGE9PT1VLklkZW50aWZpZXI/Yz1fLmNyZWF0ZUlkZW50aWZpZXIocSgpLnZhbHVlKTphPT09VS5TdHJpbmdMaXRlcmFsfHxhPT09VS5OdW1lcmljTGl0ZXJhbD9jPV8uY3JlYXRlTGl0ZXJhbChxKCkpOmE9PT1VLktleXdvcmQ/dygidGhpcyIpJiYocSgpLGM9Xy5jcmVhdGVUaGlzRXhwcmVzc2lvbigpKTphPT09VS5Cb29sZWFuTGl0ZXJhbD8oYj1xKCksYi52YWx1ZT0idHJ1ZSI9PT1iLnZhbHVlLGM9Xy5jcmVhdGVMaXRlcmFsKGIpKTphPT09VS5OdWxsTGl0ZXJhbD8oYj1xKCksYi52YWx1ZT1udWxsLGM9Xy5jcmVhdGVMaXRlcmFsKGIpKTp2KCJbIik/Yz15KCk6digieyIpJiYoYz1CKCkpLGM/YzoodChxKCkpLHZvaWQgMCkpfWZ1bmN0aW9uIEUoKXt2YXIgYT1bXTtpZih1KCIoIiksIXYoIikiKSlmb3IoOyQ+WiYmKGEucHVzaChkYigpKSwhdigiKSIpKTspdSgiLCIpO3JldHVybiB1KCIpIiksYX1mdW5jdGlvbiBGKCl7dmFyIGE7cmV0dXJuIGE9cSgpLG8oYSl8fHQoYSksXy5jcmVhdGVJZGVudGlmaWVyKGEudmFsdWUpfWZ1bmN0aW9uIEcoKXtyZXR1cm4gdSgiLiIpLEYoKX1mdW5jdGlvbiBIKCl7dmFyIGE7cmV0dXJuIHUoIlsiKSxhPWRiKCksdSgiXSIpLGF9ZnVuY3Rpb24gSSgpe3ZhciBhLGI7Zm9yKGE9RCgpO3YoIi4iKXx8digiWyIpOyl2KCJbIik/KGI9SCgpLGE9Xy5jcmVhdGVNZW1iZXJFeHByZXNzaW9uKCJbIixhLGIpKTooYj1HKCksYT1fLmNyZWF0ZU1lbWJlckV4cHJlc3Npb24oIi4iLGEsYikpO3JldHVybiBhfWZ1bmN0aW9uIEooKXt2YXIgYSxiO3JldHVybiBhYi50eXBlIT09VS5QdW5jdHVhdG9yJiZhYi50eXBlIT09VS5LZXl3b3JkP2I9Y2IoKTp2KCIrIil8fHYoIi0iKXx8digiISIpPyhhPXEoKSxiPUooKSxiPV8uY3JlYXRlVW5hcnlFeHByZXNzaW9uKGEudmFsdWUsYikpOncoImRlbGV0ZSIpfHx3KCJ2b2lkIil8fHcoInR5cGVvZiIpP3Moe30sWC5VbmV4cGVjdGVkVG9rZW4pOmI9Y2IoKSxifWZ1bmN0aW9uIEsoYSl7dmFyIGI9MDtpZihhLnR5cGUhPT1VLlB1bmN0dWF0b3ImJmEudHlwZSE9PVUuS2V5d29yZClyZXR1cm4gMDtzd2l0Y2goYS52YWx1ZSl7Y2FzZSJ8fCI6Yj0xO2JyZWFrO2Nhc2UiJiYiOmI9MjticmVhaztjYXNlIj09IjpjYXNlIiE9IjpjYXNlIj09PSI6Y2FzZSIhPT0iOmI9NjticmVhaztjYXNlIjwiOmNhc2UiPiI6Y2FzZSI8PSI6Y2FzZSI+PSI6Y2FzZSJpbnN0YW5jZW9mIjpiPTc7YnJlYWs7Y2FzZSJpbiI6Yj03O2JyZWFrO2Nhc2UiKyI6Y2FzZSItIjpiPTk7YnJlYWs7Y2FzZSIqIjpjYXNlIi8iOmNhc2UiJSI6Yj0xMX1yZXR1cm4gYn1mdW5jdGlvbiBMKCl7dmFyIGEsYixjLGQsZSxmLGcsaDtpZihnPUooKSxiPWFiLGM9SyhiKSwwPT09YylyZXR1cm4gZztmb3IoYi5wcmVjPWMscSgpLGU9SigpLGQ9W2csYixlXTsoYz1LKGFiKSk+MDspe2Zvcig7ZC5sZW5ndGg+MiYmYzw9ZFtkLmxlbmd0aC0yXS5wcmVjOyllPWQucG9wKCksZj1kLnBvcCgpLnZhbHVlLGc9ZC5wb3AoKSxhPV8uY3JlYXRlQmluYXJ5RXhwcmVzc2lvbihmLGcsZSksZC5wdXNoKGEpO2I9cSgpLGIucHJlYz1jLGQucHVzaChiKSxhPUooKSxkLnB1c2goYSl9Zm9yKGg9ZC5sZW5ndGgtMSxhPWRbaF07aD4xOylhPV8uY3JlYXRlQmluYXJ5RXhwcmVzc2lvbihkW2gtMV0udmFsdWUsZFtoLTJdLGEpLGgtPTI7cmV0dXJuIGF9ZnVuY3Rpb24gTSgpe3ZhciBhLGIsYztyZXR1cm4gYT1MKCksdigiPyIpJiYocSgpLGI9TSgpLHUoIjoiKSxjPU0oKSxhPV8uY3JlYXRlQ29uZGl0aW9uYWxFeHByZXNzaW9uKGEsYixjKSksYX1mdW5jdGlvbiBOKCl7dmFyIGEsYjtyZXR1cm4gYT1xKCksYS50eXBlIT09VS5JZGVudGlmaWVyJiZ0KGEpLGI9digiKCIpP0UoKTpbXSxfLmNyZWF0ZUZpbHRlcihhLnZhbHVlLGIpfWZ1bmN0aW9uIE8oYSl7Zm9yKF8uY3JlYXRlVG9wTGV2ZWwoYSk7digifCIpOylxKCksTigpCn1mdW5jdGlvbiBQKCl7aSgpLHIoKTt2YXIgYT1kYigpO2EmJigiYXMiPT09YWIudmFsdWU/UihhKToiLCI9PT1hYi52YWx1ZXx8ImluIj09YWIudmFsdWUmJmEudHlwZT09PVcuSWRlbnRpZmllcj9TKGEpOnYoInwiKT9PKGEpOmEudHlwZT09PVcuSWRlbnRpZmllciYmdigiOiIpP1EoYSk6Xy5jcmVhdGVUb3BMZXZlbChhKSksYWIudHlwZSE9PVUuRU9GJiZ0KGFiKX1mdW5jdGlvbiBRKGEpe2NvbnNvbGUud2FybigiTGFiZWxsZWQgZXhwcmVzc2lvbnMgYXJlIGRlcHJlY2F0ZWQuIFVzZSB0b2tlbkxpc3QgZmlsdGVyIGluc3RlYWQiKTt2YXIgYj1hLm5hbWU7Zm9yKHUoIjoiKSxhPWRiKCksXy5jcmVhdGVMYWJlbGVkU3RhdGVtZW50KGIsYSkseCgpO2FiLnR5cGU9PT1VLklkZW50aWZpZXI7KWI9cSgpLnZhbHVlLHUoIjoiKSxhPWRiKCksXy5jcmVhdGVMYWJlbGVkU3RhdGVtZW50KGIsYSkseCgpO3JldHVybiBudWxsfWZ1bmN0aW9uIFIoYSl7cSgpO3ZhciBiPXEoKS52YWx1ZTtfLmNyZWF0ZUFzRXhwcmVzc2lvbihhLGIpfWZ1bmN0aW9uIFMoYSl7dmFyIGI7IiwiPT09YWIudmFsdWUmJihxKCksYWIudHlwZSE9PVUuSWRlbnRpZmllciYmdChhYiksYj1xKCkudmFsdWUpLHEoKTt2YXIgYz1kYigpO18uY3JlYXRlSW5FeHByZXNzaW9uKGEubmFtZSxiLGMpfWZ1bmN0aW9uIFQoYSxiKXtyZXR1cm4gXz1iLFk9YSxaPTAsJD1ZLmxlbmd0aCxhYj1udWxsLGJiPXtsYWJlbFNldDp7fX0sUCgpfXZhciBVLFYsVyxYLFksWiwkLF8sYWIsYmI7VT17Qm9vbGVhbkxpdGVyYWw6MSxFT0Y6MixJZGVudGlmaWVyOjMsS2V5d29yZDo0LE51bGxMaXRlcmFsOjUsTnVtZXJpY0xpdGVyYWw6NixQdW5jdHVhdG9yOjcsU3RyaW5nTGl0ZXJhbDo4fSxWPXt9LFZbVS5Cb29sZWFuTGl0ZXJhbF09IkJvb2xlYW4iLFZbVS5FT0ZdPSI8ZW5kPiIsVltVLklkZW50aWZpZXJdPSJJZGVudGlmaWVyIixWW1UuS2V5d29yZF09IktleXdvcmQiLFZbVS5OdWxsTGl0ZXJhbF09Ik51bGwiLFZbVS5OdW1lcmljTGl0ZXJhbF09Ik51bWVyaWMiLFZbVS5QdW5jdHVhdG9yXT0iUHVuY3R1YXRvciIsVltVLlN0cmluZ0xpdGVyYWxdPSJTdHJpbmciLFc9e0FycmF5RXhwcmVzc2lvbjoiQXJyYXlFeHByZXNzaW9uIixCaW5hcnlFeHByZXNzaW9uOiJCaW5hcnlFeHByZXNzaW9uIixDYWxsRXhwcmVzc2lvbjoiQ2FsbEV4cHJlc3Npb24iLENvbmRpdGlvbmFsRXhwcmVzc2lvbjoiQ29uZGl0aW9uYWxFeHByZXNzaW9uIixFbXB0eVN0YXRlbWVudDoiRW1wdHlTdGF0ZW1lbnQiLEV4cHJlc3Npb25TdGF0ZW1lbnQ6IkV4cHJlc3Npb25TdGF0ZW1lbnQiLElkZW50aWZpZXI6IklkZW50aWZpZXIiLExpdGVyYWw6IkxpdGVyYWwiLExhYmVsZWRTdGF0ZW1lbnQ6IkxhYmVsZWRTdGF0ZW1lbnQiLExvZ2ljYWxFeHByZXNzaW9uOiJMb2dpY2FsRXhwcmVzc2lvbiIsTWVtYmVyRXhwcmVzc2lvbjoiTWVtYmVyRXhwcmVzc2lvbiIsT2JqZWN0RXhwcmVzc2lvbjoiT2JqZWN0RXhwcmVzc2lvbiIsUHJvZ3JhbToiUHJvZ3JhbSIsUHJvcGVydHk6IlByb3BlcnR5IixUaGlzRXhwcmVzc2lvbjoiVGhpc0V4cHJlc3Npb24iLFVuYXJ5RXhwcmVzc2lvbjoiVW5hcnlFeHByZXNzaW9uIn0sWD17VW5leHBlY3RlZFRva2VuOiJVbmV4cGVjdGVkIHRva2VuICUwIixVbmtub3duTGFiZWw6IlVuZGVmaW5lZCBsYWJlbCAnJTAnIixSZWRlY2xhcmF0aW9uOiIlMCAnJTEnIGhhcyBhbHJlYWR5IGJlZW4gZGVjbGFyZWQifTt2YXIgY2I9SSxkYj1NO2EuZXNwcmltYT17cGFyc2U6VH19KHRoaXMpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEsYixkKXt2YXIgZTt0cnl7aWYoZT1jKGEpLGUuc2NvcGVJZGVudCYmKGQubm9kZVR5cGUhPT1Ob2RlLkVMRU1FTlRfTk9ERXx8IlRFTVBMQVRFIiE9PWQudGFnTmFtZXx8ImJpbmQiIT09YiYmInJlcGVhdCIhPT1iKSl0aHJvdyBFcnJvcigiYXMgYW5kIGluIGNhbiBvbmx5IGJlIHVzZWQgd2l0aGluIDx0ZW1wbGF0ZSBiaW5kL3JlcGVhdD4iKX1jYXRjaChmKXtyZXR1cm4gY29uc29sZS5lcnJvcigiSW52YWxpZCBleHByZXNzaW9uIHN5bnRheDogIithLGYpLHZvaWQgMH1yZXR1cm4gZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWUuZ2V0QmluZGluZyhhKTtyZXR1cm4gZS5zY29wZUlkZW50JiZkJiYoYy5wb2x5bWVyRXhwcmVzc2lvblNjb3BlSWRlbnRfPWUuc2NvcGVJZGVudCxlLmluZGV4SWRlbnQmJihjLnBvbHltZXJFeHByZXNzaW9uSW5kZXhJZGVudF89ZS5pbmRleElkZW50KSksZH19ZnVuY3Rpb24gYyhhKXt2YXIgYj1tW2FdO2lmKCFiKXt2YXIgYz1uZXcgaTtlc3ByaW1hLnBhcnNlKGEsYyksYj1uZXcgaihjKSxtW2FdPWJ9cmV0dXJuIGJ9ZnVuY3Rpb24gZChhKXtyZXR1cm4gZnVuY3Rpb24oYil7Zm9yKHZhciBjPVtdLGQ9MDtkPGEubGVuZ3RoO2QrKylhW2RdLmV4cHJlc3Npb24oYikmJmMucHVzaChhW2RdLmxhYmVsKTtyZXR1cm4gYy5qb2luKCIgIil9fWZ1bmN0aW9uIGUoYSxiLGMpe3RoaXMuZGVsZWdhdGU9YSx0aGlzLm5hbWU9Yix0aGlzLmxhc3Q9Y31mdW5jdGlvbiBmKGEsYil7dGhpcy5uYW1lPWEsdGhpcy5hcmdzPWIsdGhpcy5vYmplY3RfPW51bGx9ZnVuY3Rpb24gZygpe3Rocm93IEVycm9yKCJOb3QgSW1wbGVtZW50ZWQiKX1mdW5jdGlvbiBoKGEpe3JldHVybiBhIGluc3RhbmNlb2YgZT9hLnZhbHVlRm4oKTphfWZ1bmN0aW9uIGkoKXt0aGlzLmV4cHJlc3Npb249bnVsbCx0aGlzLmZpbHRlcnM9W10sdGhpcy5sYWJlbGVkU3RhdGVtZW50cz1bXSx0aGlzLmRlcHM9e30sdGhpcy5kZXBzTGlzdD1bXSx0aGlzLmN1cnJlbnRQYXRoPXZvaWQgMCx0aGlzLnNjb3BlSWRlbnQ9dm9pZCAwLHRoaXMuaW5kZXhJZGVudD12b2lkIDB9ZnVuY3Rpb24gaihhKXtpZih0aGlzLnNjb3BlSWRlbnQ9YS5zY29wZUlkZW50LHRoaXMuaW5kZXhJZGVudD1hLmluZGV4SWRlbnQsIWEuZXhwcmVzc2lvbiYmIWEubGFiZWxlZFN0YXRlbWVudHMubGVuZ3RoKXRocm93IEVycm9yKCJObyBleHByZXNzaW9uIG9yIGxhYmVsbGVkIHN0YXRlbWVudHMgZm91bmQuIik7dmFyIGI9YS5sYWJlbGVkU3RhdGVtZW50cy5sZW5ndGg/ZChhLmxhYmVsZWRTdGF0ZW1lbnRzKTpoKGEuZXhwcmVzc2lvbik7YS5maWx0ZXJzLmZvckVhY2goZnVuY3Rpb24oYSl7Yj1hLnRvRE9NKGIpfSksdGhpcy5yZXNvbHZlRm49Yix0aGlzLnBhdGhzPWEuZGVwc0xpc3QsMT09PXRoaXMucGF0aHMubGVuZ3RoJiZhLmZpbHRlcnMubGVuZ3RoJiZhLmV4cHJlc3Npb24gaW5zdGFuY2VvZiBlJiYodGhpcy5maWx0ZXJzU2V0VmFsdWVGbj1hLmZpbHRlcnNTZXRWYWx1ZUZuKX1mdW5jdGlvbiBrKCl7fWZ1bmN0aW9uIGwoYSl7cmV0dXJuIFN0cmluZyhhKS5yZXBsYWNlKC9bQS1aXS9nLGZ1bmN0aW9uKGEpe3JldHVybiItIithLnRvTG93ZXJDYXNlKCl9KX12YXIgbT1PYmplY3QuY3JlYXRlKG51bGwpO2UucHJvdG90eXBlPXtnZXRQYXRoOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucGF0aF98fCh0aGlzLnBhdGhfPXRoaXMubGFzdD9QYXRoLmdldCh0aGlzLmxhc3QuZ2V0UGF0aCgpKyIuIit0aGlzLm5hbWUpOlBhdGguZ2V0KHRoaXMubmFtZSkpLHRoaXMucGF0aF99LHZhbHVlRm46ZnVuY3Rpb24oKXtpZighdGhpcy52YWx1ZUZuXyl7dmFyIGE9dGhpcy5nZXRQYXRoKCksYj10aGlzLmRlbGVnYXRlLGM9dGhpcy5kZWxlZ2F0ZS5kZXBzW2FdO3ZvaWQgMD09PWMmJihjPXRoaXMuZGVsZWdhdGUuZGVwc1thXT10aGlzLmRlbGVnYXRlLmRlcHNMaXN0Lmxlbmd0aCx0aGlzLmRlbGVnYXRlLmRlcHNMaXN0LnB1c2goYSkpO3ZhciBkPWIuZGVwc0xpc3Q7dGhpcy52YWx1ZUZuXz1mdW5jdGlvbihhKXtyZXR1cm4gMT09PWQubGVuZ3RoP2E6YVtjXX19cmV0dXJuIHRoaXMudmFsdWVGbl99fSxmLnByb3RvdHlwZT17Z2V0IG9iamVjdCgpe2lmKHRoaXMub2JqZWN0XylyZXR1cm4gdGhpcy5vYmplY3RfO3ZhciBhPWsuZmlsdGVyc1t0aGlzLm5hbWVdLGI9dGhpcy5hcmdzLm1hcChmdW5jdGlvbihhKXt2YXIgYj1oKGEpO3JldHVybiBiKCl9KTtyZXR1cm4gdGhpcy5vYmplY3RfPWEuYXBwbHkobnVsbCxiKX0sdG9ET006ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5vYmplY3Q7cmV0dXJuIGZ1bmN0aW9uKGMpe3ZhciBkPWEoYyk7cmV0dXJuIGIudG9ET00oZCl9fSx0b01vZGVsOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMub2JqZWN0O3JldHVybiBiLnRvTW9kZWw/Yi50b01vZGVsKGEpOmF9fTt2YXIgbj17IisiOmZ1bmN0aW9uKGEpe3JldHVybithfSwiLSI6ZnVuY3Rpb24oYSl7cmV0dXJuLWF9LCIhIjpmdW5jdGlvbihhKXtyZXR1cm4hYX19LG89eyIrIjpmdW5jdGlvbihhLGIpe3JldHVybiBhK2J9LCItIjpmdW5jdGlvbihhLGIpe3JldHVybiBhLWJ9LCIqIjpmdW5jdGlvbihhLGIpe3JldHVybiBhKmJ9LCIvIjpmdW5jdGlvbihhLGIpe3JldHVybiBhL2J9LCIlIjpmdW5jdGlvbihhLGIpe3JldHVybiBhJWJ9LCI8IjpmdW5jdGlvbihhLGIpe3JldHVybiBiPmF9LCI+IjpmdW5jdGlvbihhLGIpe3JldHVybiBhPmJ9LCI8PSI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYj49YX0sIj49IjpmdW5jdGlvbihhLGIpe3JldHVybiBhPj1ifSwiPT0iOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGE9PWJ9LCIhPSI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYSE9Yn0sIj09PSI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT09PWJ9LCIhPT0iOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGEhPT1ifSwiJiYiOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGEmJmJ9LCJ8fCI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYXx8Yn19O2kucHJvdG90eXBlPXtnZXQgZmlsdGVyc1NldFZhbHVlRm4oKXtpZighdGhpcy5maWx0ZXJzU2V0VmFsdWVGbl8pe3ZhciBhPXRoaXMuZmlsdGVyczt0aGlzLmZpbHRlcnNTZXRWYWx1ZUZuXz1mdW5jdGlvbihiKXtmb3IodmFyIGM9YS5sZW5ndGgtMTtjPj0wO2MtLSliPWFbY10udG9Nb2RlbChiKTtyZXR1cm4gYn19cmV0dXJuIHRoaXMuZmlsdGVyc1NldFZhbHVlRm5ffSxjcmVhdGVMYWJlbGVkU3RhdGVtZW50OmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMubGFiZWxlZFN0YXRlbWVudHMucHVzaCh7bGFiZWw6YSxleHByZXNzaW9uOmIgaW5zdGFuY2VvZiBlP2IudmFsdWVGbigpOmJ9KSxifSxjcmVhdGVVbmFyeUV4cHJlc3Npb246ZnVuY3Rpb24oYSxiKXtpZighblthXSl0aHJvdyBFcnJvcigiRGlzYWxsb3dlZCBvcGVyYXRvcjogIithKTtyZXR1cm4gYj1oKGIpLGZ1bmN0aW9uKGMpe3JldHVybiBuW2FdKGIoYykpfX0sY3JlYXRlQmluYXJ5RXhwcmVzc2lvbjpmdW5jdGlvbihhLGIsYyl7aWYoIW9bYV0pdGhyb3cgRXJyb3IoIkRpc2FsbG93ZWQgb3BlcmF0b3I6ICIrYSk7cmV0dXJuIGI9aChiKSxjPWgoYyksZnVuY3Rpb24oZCl7cmV0dXJuIG9bYV0oYihkKSxjKGQpKX19LGNyZWF0ZUNvbmRpdGlvbmFsRXhwcmVzc2lvbjpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGE9aChhKSxiPWgoYiksYz1oKGMpLGZ1bmN0aW9uKGQpe3JldHVybiBhKGQpP2IoZCk6YyhkKX19LGNyZWF0ZUlkZW50aWZpZXI6ZnVuY3Rpb24oYSl7dmFyIGI9bmV3IGUodGhpcyxhKTtyZXR1cm4gYi50eXBlPSJJZGVudGlmaWVyIixifSxjcmVhdGVNZW1iZXJFeHByZXNzaW9uOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4iWyI9PT1hPyhiPWgoYiksYz1oKGMpLGZ1bmN0aW9uKGEpe3JldHVybiBiKGEpW2MoYSldfSk6bmV3IGUodGhpcyxjLm5hbWUsYil9LGNyZWF0ZUxpdGVyYWw6ZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGEudmFsdWV9fSxjcmVhdGVBcnJheUV4cHJlc3Npb246ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPTA7YjxhLmxlbmd0aDtiKyspYVtiXT1oKGFbYl0pO3JldHVybiBmdW5jdGlvbihiKXtmb3IodmFyIGM9W10sZD0wO2Q8YS5sZW5ndGg7ZCsrKWMucHVzaChhW2RdKGIpKTtyZXR1cm4gY319LGNyZWF0ZVByb3BlcnR5OmZ1bmN0aW9uKGEsYixjKXtyZXR1cm57a2V5OmIgaW5zdGFuY2VvZiBlP2IuZ2V0UGF0aCgpOmIoKSx2YWx1ZTpjfX0sY3JlYXRlT2JqZWN0RXhwcmVzc2lvbjpmdW5jdGlvbihhKXtmb3IodmFyIGI9MDtiPGEubGVuZ3RoO2IrKylhW2JdLnZhbHVlPWgoYVtiXS52YWx1ZSk7cmV0dXJuIGZ1bmN0aW9uKGIpe2Zvcih2YXIgYz17fSxkPTA7ZDxhLmxlbmd0aDtkKyspY1thW2RdLmtleV09YVtkXS52YWx1ZShiKTtyZXR1cm4gY319LGNyZWF0ZUZpbHRlcjpmdW5jdGlvbihhLGIpe3RoaXMuZmlsdGVycy5wdXNoKG5ldyBmKGEsYikpfSxjcmVhdGVBc0V4cHJlc3Npb246ZnVuY3Rpb24oYSxiKXt0aGlzLmV4cHJlc3Npb249YSx0aGlzLnNjb3BlSWRlbnQ9Yn0sY3JlYXRlSW5FeHByZXNzaW9uOmZ1bmN0aW9uKGEsYixjKXt0aGlzLmV4cHJlc3Npb249Yyx0aGlzLnNjb3BlSWRlbnQ9YSx0aGlzLmluZGV4SWRlbnQ9Yn0sY3JlYXRlVG9wTGV2ZWw6ZnVuY3Rpb24oYSl7dGhpcy5leHByZXNzaW9uPWF9LGNyZWF0ZVRoaXNFeHByZXNzaW9uOmd9LGoucHJvdG90eXBlPXtnZXRCaW5kaW5nOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMucGF0aHM7aWYoIWIubGVuZ3RoKXJldHVybnt2YWx1ZTp0aGlzLnJlc29sdmVGbih7fSl9O2lmKDE9PT1iLmxlbmd0aClyZXR1cm4gbmV3IFBhdGhPYnNlcnZlcihhLGJbMF0sdm9pZCAwLHZvaWQgMCx2b2lkIDAsdGhpcy5yZXNvbHZlRm4sdGhpcy5maWx0ZXJzU2V0VmFsdWVGbik7Zm9yKHZhciBjPW5ldyBDb21wb3VuZFBhdGhPYnNlcnZlcih2b2lkIDAsdm9pZCAwLHZvaWQgMCx0aGlzLnJlc29sdmVGbiksZD0wO2Q8Yi5sZW5ndGg7ZCsrKWMuYWRkUGF0aChhLGJbZF0pO3JldHVybiBjLnN0YXJ0KCksY319LGsuZmlsdGVycz1PYmplY3QuY3JlYXRlKG51bGwpLGsuZmlsdGVycy50b2tlbkxpc3Q9ZnVuY3Rpb24oKXtyZXR1cm57dG9ET006ZnVuY3Rpb24oYSl7dmFyIGI9W107Zm9yKHZhciBjIGluIGEpYVtjXSYmYi5wdXNoKGMpO3JldHVybiBiLmpvaW4oIiAiKX19fSxrLmZpbHRlcnMuc3R5bGVPYmplY3Q9ZnVuY3Rpb24oKXtyZXR1cm57dG9ET006ZnVuY3Rpb24oYSl7dmFyIGI9W107Zm9yKHZhciBjIGluIGEpYi5wdXNoKGwoYykrIjogIithW2NdKTtyZXR1cm4gYi5qb2luKCI7ICIpfX19LGsucHJvdG90eXBlPXtwcmVwYXJlSW5zdGFuY2VQb3NpdGlvbkNoYW5nZWQ6ZnVuY3Rpb24oYSl7dmFyIGI9YS5wb2x5bWVyRXhwcmVzc2lvbkluZGV4SWRlbnRfO2lmKGIpcmV0dXJuIGZ1bmN0aW9uKGEsYyl7YS5tb2RlbFtiXT1jfX0scHJlcGFyZUJpbmRpbmc6ZnVuY3Rpb24oYSxjLGQpe3JldHVybiBQYXRoLmdldChhKS52YWxpZD92b2lkIDA6YihhLGMsZCl9LHByZXBhcmVJbnN0YW5jZU1vZGVsOmZ1bmN0aW9uKGEpe3ZhciBiPWEucG9seW1lckV4cHJlc3Npb25TY29wZUlkZW50XztpZihiKXt2YXIgYz1hLnRlbXBsYXRlSW5zdGFuY2U/YS50ZW1wbGF0ZUluc3RhbmNlLm1vZGVsOmEubW9kZWw7cmV0dXJuIGZ1bmN0aW9uKGEpe3ZhciBkPU9iamVjdC5jcmVhdGUoYyk7cmV0dXJuIGRbYl09YSxkfX19fSxhLlBvbHltZXJFeHByZXNzaW9ucz1rfSh0aGlzKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKCl7ZXx8KGU9ITAsYS5lbmRPZk1pY3JvdGFzayhmdW5jdGlvbigpe2U9ITEsbG9nRmxhZ3MuZGF0YSYmY29uc29sZS5ncm91cCgiUGxhdGZvcm0uZmx1c2goKSIpLGEucGVyZm9ybU1pY3JvdGFza0NoZWNrcG9pbnQoKSxsb2dGbGFncy5kYXRhJiZjb25zb2xlLmdyb3VwRW5kKCl9KSl9dmFyIGM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3R5bGUiKTtjLnRleHRDb250ZW50PSJ0ZW1wbGF0ZSB7ZGlzcGxheTogbm9uZSAhaW1wb3J0YW50O30gLyogaW5qZWN0ZWQgYnkgcGxhdGZvcm0uanMgKi8iO3ZhciBkPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoImhlYWQiKTtkLmluc2VydEJlZm9yZShjLGQuZmlyc3RDaGlsZCk7dmFyIGUsZj0xMjU7d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoIldlYkNvbXBvbmVudHNSZWFkeSIsZnVuY3Rpb24oKXtiKCksT2JzZXJ2ZXIuaGFzT2JqZWN0T2JzZXJ2ZXx8KGEuZmx1c2hQb2xsPXNldEludGVydmFsKGIsZikpfSksYS5mbHVzaD1ifSh3aW5kb3cuUGxhdGZvcm0pLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7cmV0dXJuIGQoYSxpKX1mdW5jdGlvbiBjKGEpe3JldHVybiBkKGEsail9ZnVuY3Rpb24gZChhLGIpe3JldHVybiJsaW5rIj09PWEubG9jYWxOYW1lJiZhLmdldEF0dHJpYnV0ZSgicmVsIik9PT1ifWZ1bmN0aW9uIGUoYSl7cmV0dXJuInNjcmlwdCI9PT1hLmxvY2FsTmFtZX1mdW5jdGlvbiBmKGEsYil7dmFyIGM9YTtjIGluc3RhbmNlb2YgRG9jdW1lbnR8fChjPWRvY3VtZW50LmltcGxlbWVudGF0aW9uLmNyZWF0ZUhUTUxEb2N1bWVudChpKSksYy5fVVJMPWI7dmFyIGQ9Yy5jcmVhdGVFbGVtZW50KCJiYXNlIik7cmV0dXJuIGQuc2V0QXR0cmlidXRlKCJocmVmIixkb2N1bWVudC5iYXNlVVJJfHxkb2N1bWVudC5VUkwpLGMuaGVhZC5hcHBlbmRDaGlsZChkKSxhIGluc3RhbmNlb2YgRG9jdW1lbnR8fChjLmJvZHkuaW5uZXJIVE1MPWEpLHdpbmRvdy5IVE1MVGVtcGxhdGVFbGVtZW50JiZIVE1MVGVtcGxhdGVFbGVtZW50LmJvb3RzdHJhcCYmSFRNTFRlbXBsYXRlRWxlbWVudC5ib290c3RyYXAoYyksY31hfHwoYT13aW5kb3cuSFRNTEltcG9ydHM9e2ZsYWdzOnt9fSk7dmFyIGcsaD1hLnhocixpPSJpbXBvcnQiLGo9InN0eWxlc2hlZXQiLGs9e2RvY3VtZW50czp7fSxjYWNoZTp7fSxwcmVsb2FkU2VsZWN0b3JzOlsibGlua1tyZWw9IitpKyJdIiwiZWxlbWVudCBsaW5rW3JlbD0iK2orIl0iLCJ0ZW1wbGF0ZSIsInNjcmlwdFtzcmNdOm5vdChbdHlwZV0pIiwnc2NyaXB0W3NyY11bdHlwZT0idGV4dC9qYXZhc2NyaXB0Il0nXS5qb2luKCIsIiksbG9hZGVyOmZ1bmN0aW9uKGEpe3JldHVybiBnPW5ldyBsKGsubG9hZGVkLGEpLGcuY2FjaGU9ay5jYWNoZSxnfSxsb2FkOmZ1bmN0aW9uKGEsYil7Zz1rLmxvYWRlcihiKSxrLnByZWxvYWQoYSl9LHByZWxvYWQ6ZnVuY3Rpb24oYSl7dmFyIGI9YS5xdWVyeVNlbGVjdG9yQWxsKGsucHJlbG9hZFNlbGVjdG9ycyk7Yj10aGlzLmZpbHRlck1haW5Eb2N1bWVudE5vZGVzKGEsYiksYj10aGlzLmV4dHJhY3RUZW1wbGF0ZU5vZGVzKGIpLGcuYWRkTm9kZXMoYil9LGZpbHRlck1haW5Eb2N1bWVudE5vZGVzOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGE9PT1kb2N1bWVudCYmKGI9QXJyYXkucHJvdG90eXBlLmZpbHRlci5jYWxsKGIsZnVuY3Rpb24oYSl7cmV0dXJuIWUoYSl9KSksYn0sZXh0cmFjdFRlbXBsYXRlTm9kZXM6ZnVuY3Rpb24oYSl7dmFyIGI9W107cmV0dXJuIGE9QXJyYXkucHJvdG90eXBlLmZpbHRlci5jYWxsKGEsZnVuY3Rpb24oYSl7aWYoInRlbXBsYXRlIj09PWEubG9jYWxOYW1lKXtpZihhLmNvbnRlbnQpe3ZhciBjPWEuY29udGVudC5xdWVyeVNlbGVjdG9yQWxsKCJsaW5rW3JlbD0iK2orIl0iKTtjLmxlbmd0aCYmKGI9Yi5jb25jYXQoQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYywwKSkpfXJldHVybiExfXJldHVybiEwfSksYi5sZW5ndGgmJihhPWEuY29uY2F0KGIpKSxhfSxsb2FkZWQ6ZnVuY3Rpb24oYSxkLGUpe2lmKGIoZCkpe3ZhciBnPWsuZG9jdW1lbnRzW2FdO2d8fChnPWYoZSxhKSxwLnJlc29sdmVQYXRoc0luSFRNTChnKSxrLmRvY3VtZW50c1thXT1nLGsucHJlbG9hZChnKSksZC5pbXBvcnQ9e2hyZWY6YSxvd25lck5vZGU6ZCxjb250ZW50Omd9LGQuY29udGVudD1lPWd9ZC5fX3Jlc291cmNlPWUsYyhkKSYmcC5yZXNvbHZlUGF0aHNJblN0eWxlc2hlZXQoZCl9fSxsPWZ1bmN0aW9uKGEsYil7dGhpcy5vbmxvYWQ9YSx0aGlzLm9uY29tcGxldGU9Yix0aGlzLmluZmxpZ2h0PTAsdGhpcy5wZW5kaW5nPXt9LHRoaXMuY2FjaGU9e319O2wucHJvdG90eXBlPXthZGROb2RlczpmdW5jdGlvbihhKXt0aGlzLmluZmxpZ2h0Kz1hLmxlbmd0aCxxKGEsdGhpcy5yZXF1aXJlLHRoaXMpLHRoaXMuY2hlY2tEb25lKCl9LHJlcXVpcmU6ZnVuY3Rpb24oYSl7dmFyIGI9cC5ub2RlVXJsKGEpO2EuX19ub2RlVXJsPWIsdGhpcy5kZWR1cGUoYixhKXx8dGhpcy5mZXRjaChiLGEpfSxkZWR1cGU6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5wZW5kaW5nW2FdPyh0aGlzLnBlbmRpbmdbYV0ucHVzaChiKSwhMCk6dGhpcy5jYWNoZVthXT8odGhpcy5vbmxvYWQoYSxiLGcuY2FjaGVbYV0pLHRoaXMudGFpbCgpLCEwKToodGhpcy5wZW5kaW5nW2FdPVtiXSwhMSl9LGZldGNoOmZ1bmN0aW9uKGEsYil7dmFyIGM9ZnVuY3Rpb24oYyxkKXt0aGlzLnJlY2VpdmUoYSxiLGMsZCl9LmJpbmQodGhpcyk7aC5sb2FkKGEsYyl9LHJlY2VpdmU6ZnVuY3Rpb24oYSxiLGMsZCl7Y3x8KGcuY2FjaGVbYV09ZCksZy5wZW5kaW5nW2FdLmZvckVhY2goZnVuY3Rpb24oYil7Y3x8dGhpcy5vbmxvYWQoYSxiLGQpLHRoaXMudGFpbCgpfSx0aGlzKSxnLnBlbmRpbmdbYV09bnVsbH0sdGFpbDpmdW5jdGlvbigpey0tdGhpcy5pbmZsaWdodCx0aGlzLmNoZWNrRG9uZSgpfSxjaGVja0RvbmU6ZnVuY3Rpb24oKXt0aGlzLmluZmxpZ2h0fHx0aGlzLm9uY29tcGxldGUoKX19O3ZhciBtPVsiaHJlZiIsInNyYyIsImFjdGlvbiJdLG49IlsiK20uam9pbigiXSxbIikrIl0iLG89Int7Lip9fSIscD17bm9kZVVybDpmdW5jdGlvbihhKXtyZXR1cm4gcC5yZXNvbHZlVXJsKHAuZG9jdW1lbnRVUkwscC5ocmVmT3JTcmMoYSkpfSxocmVmT3JTcmM6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuZ2V0QXR0cmlidXRlKCJocmVmIil8fGEuZ2V0QXR0cmlidXRlKCJzcmMiKX0sZG9jdW1lbnRVcmxGcm9tTm9kZTpmdW5jdGlvbihhKXtyZXR1cm4gcC5nZXREb2N1bWVudFVybChhLm93bmVyRG9jdW1lbnR8fGEpfSxnZXREb2N1bWVudFVybDpmdW5jdGlvbihhKXt2YXIgYj1hJiYoYS5fVVJMfHxhLmltcGwmJmEuaW1wbC5fVVJMfHxhLmJhc2VVUkl8fGEuVVJMKXx8IiI7cmV0dXJuIGIuc3BsaXQoIiMiKVswXX0scmVzb2x2ZVVybDpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLmlzQWJzVXJsKGIpP2I6dGhpcy5jb21wcmVzc1VybCh0aGlzLnVybFRvUGF0aChhKStiKX0scmVzb2x2ZVJlbGF0aXZlVXJsOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuaXNBYnNVcmwoYik/Yjp0aGlzLm1ha2VEb2N1bWVudFJlbFBhdGgodGhpcy5yZXNvbHZlVXJsKGEsYikpfSxpc0Fic1VybDpmdW5jdGlvbihhKXtyZXR1cm4vKF5kYXRhOil8KF5odHRwW3NdPzopfCheXC8pLy50ZXN0KGEpfSx1cmxUb1BhdGg6ZnVuY3Rpb24oYSl7dmFyIGI9YS5zcGxpdCgiLyIpO3JldHVybiBiLnBvcCgpLGIucHVzaCgiIiksYi5qb2luKCIvIil9LGNvbXByZXNzVXJsOmZ1bmN0aW9uKGEpe3ZhciBiPSIiLGM9YS5pbmRleE9mKCI/Iik7Yz4tMSYmKGI9YS5zdWJzdHJpbmcoYyksYT1hLnN1YnN0cmluZyhjLDApKTtmb3IodmFyIGQsZT1hLnNwbGl0KCIvIiksZj0wO2Y8ZS5sZW5ndGg7ZisrKWQ9ZVtmXSwiLi4iPT09ZCYmKGUuc3BsaWNlKGYtMSwyKSxmLT0yKTtyZXR1cm4gZS5qb2luKCIvIikrYn0sbWFrZURvY3VtZW50UmVsUGF0aDpmdW5jdGlvbihhKXtyZXR1cm4gcC51cmxFbHQuaHJlZj1hLCFwLnVybEVsdC5ob3N0fHxwLnVybEVsdC5ob3N0PT09d2luZG93LmxvY2F0aW9uLmhvc3QmJnAudXJsRWx0LnByb3RvY29sPT09d2luZG93LmxvY2F0aW9uLnByb3RvY29sP3RoaXMubWFrZVJlbFBhdGgocC5kb2N1bWVudFVSTCxwLnVybEVsdC5ocmVmKTphfSxtYWtlUmVsUGF0aDpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz1hLnNwbGl0KCIvIiksZD1iLnNwbGl0KCIvIik7Yy5sZW5ndGgmJmNbMF09PT1kWzBdOyljLnNoaWZ0KCksZC5zaGlmdCgpO2Zvcih2YXIgZT0wLGY9Yy5sZW5ndGgtMTtmPmU7ZSsrKWQudW5zaGlmdCgiLi4iKTt2YXIgZz1kLmpvaW4oIi8iKTtyZXR1cm4gZ30scmVzb2x2ZVBhdGhzSW5IVE1MOmZ1bmN0aW9uKGEsYil7Yj1ifHxwLmRvY3VtZW50VXJsRnJvbU5vZGUoYSkscC5yZXNvbHZlQXR0cmlidXRlcyhhLGIpLHAucmVzb2x2ZVN0eWxlRWx0cyhhLGIpO3ZhciBjPWEucXVlcnlTZWxlY3RvckFsbCgidGVtcGxhdGUiKTtjJiZxKGMsZnVuY3Rpb24oYSl7YS5jb250ZW50JiZwLnJlc29sdmVQYXRoc0luSFRNTChhLmNvbnRlbnQsYil9KX0scmVzb2x2ZVBhdGhzSW5TdHlsZXNoZWV0OmZ1bmN0aW9uKGEpe3ZhciBiPXAubm9kZVVybChhKTthLl9fcmVzb3VyY2U9cC5yZXNvbHZlQ3NzVGV4dChhLl9fcmVzb3VyY2UsYil9LHJlc29sdmVTdHlsZUVsdHM6ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLnF1ZXJ5U2VsZWN0b3JBbGwoInN0eWxlIik7YyYmcShjLGZ1bmN0aW9uKGEpe2EudGV4dENvbnRlbnQ9cC5yZXNvbHZlQ3NzVGV4dChhLnRleHRDb250ZW50LGIpfSl9LHJlc29sdmVDc3NUZXh0OmZ1bmN0aW9uKGEsYil7cmV0dXJuIGEucmVwbGFjZSgvdXJsXChbXildKlwpL2csZnVuY3Rpb24oYSl7dmFyIGM9YS5yZXBsYWNlKC9bIiddL2csIiIpLnNsaWNlKDQsLTEpO3JldHVybiBjPXAucmVzb2x2ZVJlbGF0aXZlVXJsKGIsYyksInVybCgiK2MrIikifSl9LHJlc29sdmVBdHRyaWJ1dGVzOmZ1bmN0aW9uKGEsYil7dmFyIGM9YSYmYS5xdWVyeVNlbGVjdG9yQWxsKG4pO2MmJnEoYyxmdW5jdGlvbihhKXt0aGlzLnJlc29sdmVOb2RlQXR0cmlidXRlcyhhLGIpfSx0aGlzKX0scmVzb2x2ZU5vZGVBdHRyaWJ1dGVzOmZ1bmN0aW9uKGEsYil7bS5mb3JFYWNoKGZ1bmN0aW9uKGMpe3ZhciBkPWEuYXR0cmlidXRlc1tjXTtpZihkJiZkLnZhbHVlJiZkLnZhbHVlLnNlYXJjaChvKTwwKXt2YXIgZT1wLnJlc29sdmVSZWxhdGl2ZVVybChiLGQudmFsdWUpO2QudmFsdWU9ZX19KX19O3AuZG9jdW1lbnRVUkw9cC5nZXREb2N1bWVudFVybChkb2N1bWVudCkscC51cmxFbHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYSIpLGg9aHx8e2FzeW5jOiEwLG9rOmZ1bmN0aW9uKGEpe3JldHVybiBhLnN0YXR1cz49MjAwJiZhLnN0YXR1czwzMDB8fDMwND09PWEuc3RhdHVzfHwwPT09YS5zdGF0dXN9LGxvYWQ6ZnVuY3Rpb24oYixjLGQpe3ZhciBlPW5ldyBYTUxIdHRwUmVxdWVzdDtyZXR1cm4oYS5mbGFncy5kZWJ1Z3x8YS5mbGFncy5idXN0KSYmKGIrPSI/IitNYXRoLnJhbmRvbSgpKSxlLm9wZW4oIkdFVCIsYixoLmFzeW5jKSxlLmFkZEV2ZW50TGlzdGVuZXIoInJlYWR5c3RhdGVjaGFuZ2UiLGZ1bmN0aW9uKCl7ND09PWUucmVhZHlTdGF0ZSYmYy5jYWxsKGQsIWgub2soZSkmJmUsZS5yZXNwb25zZXx8ZS5yZXNwb25zZVRleHQsYil9KSxlLnNlbmQoKSxlfSxsb2FkRG9jdW1lbnQ6ZnVuY3Rpb24oYSxiLGMpe3RoaXMubG9hZChhLGIsYykucmVzcG9uc2VUeXBlPSJkb2N1bWVudCJ9fTt2YXIgcT1BcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsLmJpbmQoQXJyYXkucHJvdG90eXBlLmZvckVhY2gpO2EucGF0aD1wLGEueGhyPWgsYS5pbXBvcnRlcj1rLGEuZ2V0RG9jdW1lbnRVcmw9cC5nZXREb2N1bWVudFVybCxhLklNUE9SVF9MSU5LX1RZUEU9aX0od2luZG93LkhUTUxJbXBvcnRzKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEpe3JldHVybiJsaW5rIj09PWEubG9jYWxOYW1lJiZhLmdldEF0dHJpYnV0ZSgicmVsIik9PT1mfWZ1bmN0aW9uIGMoYSl7cmV0dXJuIGEucGFyZW50Tm9kZSYmIWQoYSkmJiFlKGEpfWZ1bmN0aW9uIGQoYSl7cmV0dXJuIGEub3duZXJEb2N1bWVudD09PWRvY3VtZW50fHxhLm93bmVyRG9jdW1lbnQuaW1wbD09PWRvY3VtZW50fWZ1bmN0aW9uIGUoYSl7cmV0dXJuIGEucGFyZW50Tm9kZSYmImVsZW1lbnQiPT09YS5wYXJlbnROb2RlLmxvY2FsTmFtZX12YXIgZj0iaW1wb3J0IixnPXtzZWxlY3RvcnM6WyJsaW5rW3JlbD0iK2YrIl0iLCJsaW5rW3JlbD1zdHlsZXNoZWV0XSIsInN0eWxlIiwic2NyaXB0Om5vdChbdHlwZV0pIiwnc2NyaXB0W3R5cGU9InRleHQvamF2YXNjcmlwdCJdJ10sbWFwOntsaW5rOiJwYXJzZUxpbmsiLHNjcmlwdDoicGFyc2VTY3JpcHQiLHN0eWxlOiJwYXJzZUdlbmVyaWMifSxwYXJzZTpmdW5jdGlvbihhKXtpZighYS5fX2ltcG9ydFBhcnNlZCl7YS5fX2ltcG9ydFBhcnNlZD0hMDt2YXIgYj1hLnF1ZXJ5U2VsZWN0b3JBbGwoZy5zZWxlY3RvcnMpO2goYixmdW5jdGlvbihhKXtnW2cubWFwW2EubG9jYWxOYW1lXV0oYSl9KX19LHBhcnNlTGluazpmdW5jdGlvbihhKXtiKGEpP2EuY29udGVudCYmZy5wYXJzZShhLmNvbnRlbnQpOnRoaXMucGFyc2VHZW5lcmljKGEpfSxwYXJzZUdlbmVyaWM6ZnVuY3Rpb24oYSl7YyhhKSYmZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChhKX0scGFyc2VTY3JpcHQ6ZnVuY3Rpb24oYil7aWYoYyhiKSl7dmFyIGQ9KGIuX19yZXNvdXJjZXx8Yi50ZXh0Q29udGVudCkudHJpbSgpO2lmKGQpe3ZhciBlPWIuX19ub2RlVXJsO2lmKCFlKXt2YXIgZT1hLnBhdGguZG9jdW1lbnRVcmxGcm9tTm9kZShiKSxmPSJbIitNYXRoLmZsb29yKDFlMyooTWF0aC5yYW5kb20oKSsxKSkrIl0iLGc9ZC5tYXRjaCgvUG9seW1lclwoWyciXShbXiciXSopLyk7Zj1nJiZnWzFdfHxmLGUrPSIvIitmKyIuanMifWQrPSJcbi8vIyBzb3VyY2VVUkw9IitlKyJcbiIsZXZhbC5jYWxsKHdpbmRvdyxkKX19fX0saD1BcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsLmJpbmQoQXJyYXkucHJvdG90eXBlLmZvckVhY2gpO2EucGFyc2VyPWd9KEhUTUxJbXBvcnRzKSxmdW5jdGlvbigpe2Z1bmN0aW9uIGEoKXtIVE1MSW1wb3J0cy5pbXBvcnRlci5sb2FkKGRvY3VtZW50LGZ1bmN0aW9uKCl7SFRNTEltcG9ydHMucGFyc2VyLnBhcnNlKGRvY3VtZW50KSxIVE1MSW1wb3J0cy5yZWFkeT0hMCxIVE1MSW1wb3J0cy5yZWFkeVRpbWU9KG5ldyBEYXRlKS5nZXRUaW1lKCksZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoIkhUTUxJbXBvcnRzTG9hZGVkIix7YnViYmxlczohMH0pKX0pfSJmdW5jdGlvbiIhPXR5cGVvZiB3aW5kb3cuQ3VzdG9tRXZlbnQmJih3aW5kb3cuQ3VzdG9tRXZlbnQ9ZnVuY3Rpb24oYSl7dmFyIGI9ZG9jdW1lbnQuY3JlYXRlRXZlbnQoIkhUTUxFdmVudHMiKTtyZXR1cm4gYi5pbml0RXZlbnQoYSwhMCwhMCksYn0pLCJjb21wbGV0ZSI9PT1kb2N1bWVudC5yZWFkeVN0YXRlfHwiaW50ZXJhY3RpdmUiPT09ZG9jdW1lbnQucmVhZHlTdGF0ZSYmIXdpbmRvdy5hdHRhY2hFdmVudD9hKCk6d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoIkRPTUNvbnRlbnRMb2FkZWQiLGEpfSgpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7dS5wdXNoKGEpLHR8fCh0PSEwLHEoZCkpfWZ1bmN0aW9uIGMoYSl7cmV0dXJuIHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCYmd2luZG93LlNoYWRvd0RPTVBvbHlmaWxsLndyYXBJZk5lZWRlZChhKXx8YX1mdW5jdGlvbiBkKCl7dD0hMTt2YXIgYT11O3U9W10sYS5zb3J0KGZ1bmN0aW9uKGEsYil7cmV0dXJuIGEudWlkXy1iLnVpZF99KTt2YXIgYj0hMTthLmZvckVhY2goZnVuY3Rpb24oYSl7dmFyIGM9YS50YWtlUmVjb3JkcygpO2UoYSksYy5sZW5ndGgmJihhLmNhbGxiYWNrXyhjLGEpLGI9ITApfSksYiYmZCgpfWZ1bmN0aW9uIGUoYSl7YS5ub2Rlc18uZm9yRWFjaChmdW5jdGlvbihiKXt2YXIgYz1wLmdldChiKTtjJiZjLmZvckVhY2goZnVuY3Rpb24oYil7Yi5vYnNlcnZlcj09PWEmJmIucmVtb3ZlVHJhbnNpZW50T2JzZXJ2ZXJzKCl9KX0pfWZ1bmN0aW9uIGYoYSxiKXtmb3IodmFyIGM9YTtjO2M9Yy5wYXJlbnROb2RlKXt2YXIgZD1wLmdldChjKTtpZihkKWZvcih2YXIgZT0wO2U8ZC5sZW5ndGg7ZSsrKXt2YXIgZj1kW2VdLGc9Zi5vcHRpb25zO2lmKGM9PT1hfHxnLnN1YnRyZWUpe3ZhciBoPWIoZyk7aCYmZi5lbnF1ZXVlKGgpfX19fWZ1bmN0aW9uIGcoYSl7dGhpcy5jYWxsYmFja189YSx0aGlzLm5vZGVzXz1bXSx0aGlzLnJlY29yZHNfPVtdLHRoaXMudWlkXz0rK3Z9ZnVuY3Rpb24gaChhLGIpe3RoaXMudHlwZT1hLHRoaXMudGFyZ2V0PWIsdGhpcy5hZGRlZE5vZGVzPVtdLHRoaXMucmVtb3ZlZE5vZGVzPVtdLHRoaXMucHJldmlvdXNTaWJsaW5nPW51bGwsdGhpcy5uZXh0U2libGluZz1udWxsLHRoaXMuYXR0cmlidXRlTmFtZT1udWxsLHRoaXMuYXR0cmlidXRlTmFtZXNwYWNlPW51bGwsdGhpcy5vbGRWYWx1ZT1udWxsfWZ1bmN0aW9uIGkoYSl7dmFyIGI9bmV3IGgoYS50eXBlLGEudGFyZ2V0KTtyZXR1cm4gYi5hZGRlZE5vZGVzPWEuYWRkZWROb2Rlcy5zbGljZSgpLGIucmVtb3ZlZE5vZGVzPWEucmVtb3ZlZE5vZGVzLnNsaWNlKCksYi5wcmV2aW91c1NpYmxpbmc9YS5wcmV2aW91c1NpYmxpbmcsYi5uZXh0U2libGluZz1hLm5leHRTaWJsaW5nLGIuYXR0cmlidXRlTmFtZT1hLmF0dHJpYnV0ZU5hbWUsYi5hdHRyaWJ1dGVOYW1lc3BhY2U9YS5hdHRyaWJ1dGVOYW1lc3BhY2UsYi5vbGRWYWx1ZT1hLm9sZFZhbHVlLGJ9ZnVuY3Rpb24gaihhLGIpe3JldHVybiB3PW5ldyBoKGEsYil9ZnVuY3Rpb24gayhhKXtyZXR1cm4geD94Oih4PWkodykseC5vbGRWYWx1ZT1hLHgpfWZ1bmN0aW9uIGwoKXt3PXg9dm9pZCAwfWZ1bmN0aW9uIG0oYSl7cmV0dXJuIGE9PT14fHxhPT09d31mdW5jdGlvbiBuKGEsYil7cmV0dXJuIGE9PT1iP2E6eCYmbShhKT94Om51bGx9ZnVuY3Rpb24gbyhhLGIsYyl7dGhpcy5vYnNlcnZlcj1hLHRoaXMudGFyZ2V0PWIsdGhpcy5vcHRpb25zPWMsdGhpcy50cmFuc2llbnRPYnNlcnZlZE5vZGVzPVtdfXZhciBwPW5ldyBXZWFrTWFwLHE9d2luZG93Lm1zU2V0SW1tZWRpYXRlO2lmKCFxKXt2YXIgcj1bXSxzPVN0cmluZyhNYXRoLnJhbmRvbSgpKTt3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsZnVuY3Rpb24oYSl7aWYoYS5kYXRhPT09cyl7dmFyIGI9cjtyPVtdLGIuZm9yRWFjaChmdW5jdGlvbihhKXthKCl9KX19KSxxPWZ1bmN0aW9uKGEpe3IucHVzaChhKSx3aW5kb3cucG9zdE1lc3NhZ2UocywiKiIpfX12YXIgdD0hMSx1PVtdLHY9MDtnLnByb3RvdHlwZT17b2JzZXJ2ZTpmdW5jdGlvbihhLGIpe2lmKGE9YyhhKSwhYi5jaGlsZExpc3QmJiFiLmF0dHJpYnV0ZXMmJiFiLmNoYXJhY3RlckRhdGF8fGIuYXR0cmlidXRlT2xkVmFsdWUmJiFiLmF0dHJpYnV0ZXN8fGIuYXR0cmlidXRlRmlsdGVyJiZiLmF0dHJpYnV0ZUZpbHRlci5sZW5ndGgmJiFiLmF0dHJpYnV0ZXN8fGIuY2hhcmFjdGVyRGF0YU9sZFZhbHVlJiYhYi5jaGFyYWN0ZXJEYXRhKXRocm93IG5ldyBTeW50YXhFcnJvcjt2YXIgZD1wLmdldChhKTtkfHxwLnNldChhLGQ9W10pO2Zvcih2YXIgZSxmPTA7ZjxkLmxlbmd0aDtmKyspaWYoZFtmXS5vYnNlcnZlcj09PXRoaXMpe2U9ZFtmXSxlLnJlbW92ZUxpc3RlbmVycygpLGUub3B0aW9ucz1iO2JyZWFrfWV8fChlPW5ldyBvKHRoaXMsYSxiKSxkLnB1c2goZSksdGhpcy5ub2Rlc18ucHVzaChhKSksZS5hZGRMaXN0ZW5lcnMoKX0sZGlzY29ubmVjdDpmdW5jdGlvbigpe3RoaXMubm9kZXNfLmZvckVhY2goZnVuY3Rpb24oYSl7Zm9yKHZhciBiPXAuZ2V0KGEpLGM9MDtjPGIubGVuZ3RoO2MrKyl7dmFyIGQ9YltjXTtpZihkLm9ic2VydmVyPT09dGhpcyl7ZC5yZW1vdmVMaXN0ZW5lcnMoKSxiLnNwbGljZShjLDEpO2JyZWFrfX19LHRoaXMpLHRoaXMucmVjb3Jkc189W119LHRha2VSZWNvcmRzOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5yZWNvcmRzXztyZXR1cm4gdGhpcy5yZWNvcmRzXz1bXSxhfX07dmFyIHcseDtvLnByb3RvdHlwZT17ZW5xdWV1ZTpmdW5jdGlvbihhKXt2YXIgYz10aGlzLm9ic2VydmVyLnJlY29yZHNfLGQ9Yy5sZW5ndGg7aWYoYy5sZW5ndGg+MCl7dmFyIGU9Y1tkLTFdLGY9bihlLGEpO2lmKGYpcmV0dXJuIGNbZC0xXT1mLHZvaWQgMH1lbHNlIGIodGhpcy5vYnNlcnZlcik7Y1tkXT1hfSxhZGRMaXN0ZW5lcnM6ZnVuY3Rpb24oKXt0aGlzLmFkZExpc3RlbmVyc18odGhpcy50YXJnZXQpfSxhZGRMaXN0ZW5lcnNfOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMub3B0aW9ucztiLmF0dHJpYnV0ZXMmJmEuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQXR0ck1vZGlmaWVkIix0aGlzLCEwKSxiLmNoYXJhY3RlckRhdGEmJmEuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ2hhcmFjdGVyRGF0YU1vZGlmaWVkIix0aGlzLCEwKSxiLmNoaWxkTGlzdCYmYS5hZGRFdmVudExpc3RlbmVyKCJET01Ob2RlSW5zZXJ0ZWQiLHRoaXMsITApLChiLmNoaWxkTGlzdHx8Yi5zdWJ0cmVlKSYmYS5hZGRFdmVudExpc3RlbmVyKCJET01Ob2RlUmVtb3ZlZCIsdGhpcywhMCl9LHJlbW92ZUxpc3RlbmVyczpmdW5jdGlvbigpe3RoaXMucmVtb3ZlTGlzdGVuZXJzXyh0aGlzLnRhcmdldCl9LHJlbW92ZUxpc3RlbmVyc186ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5vcHRpb25zO2IuYXR0cmlidXRlcyYmYS5yZW1vdmVFdmVudExpc3RlbmVyKCJET01BdHRyTW9kaWZpZWQiLHRoaXMsITApLGIuY2hhcmFjdGVyRGF0YSYmYS5yZW1vdmVFdmVudExpc3RlbmVyKCJET01DaGFyYWN0ZXJEYXRhTW9kaWZpZWQiLHRoaXMsITApLGIuY2hpbGRMaXN0JiZhLnJlbW92ZUV2ZW50TGlzdGVuZXIoIkRPTU5vZGVJbnNlcnRlZCIsdGhpcywhMCksKGIuY2hpbGRMaXN0fHxiLnN1YnRyZWUpJiZhLnJlbW92ZUV2ZW50TGlzdGVuZXIoIkRPTU5vZGVSZW1vdmVkIix0aGlzLCEwKX0sYWRkVHJhbnNpZW50T2JzZXJ2ZXI6ZnVuY3Rpb24oYSl7aWYoYSE9PXRoaXMudGFyZ2V0KXt0aGlzLmFkZExpc3RlbmVyc18oYSksdGhpcy50cmFuc2llbnRPYnNlcnZlZE5vZGVzLnB1c2goYSk7dmFyIGI9cC5nZXQoYSk7Ynx8cC5zZXQoYSxiPVtdKSxiLnB1c2godGhpcyl9fSxyZW1vdmVUcmFuc2llbnRPYnNlcnZlcnM6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnRyYW5zaWVudE9ic2VydmVkTm9kZXM7dGhpcy50cmFuc2llbnRPYnNlcnZlZE5vZGVzPVtdLGEuZm9yRWFjaChmdW5jdGlvbihhKXt0aGlzLnJlbW92ZUxpc3RlbmVyc18oYSk7Zm9yKHZhciBiPXAuZ2V0KGEpLGM9MDtjPGIubGVuZ3RoO2MrKylpZihiW2NdPT09dGhpcyl7Yi5zcGxpY2UoYywxKTticmVha319LHRoaXMpfSxoYW5kbGVFdmVudDpmdW5jdGlvbihhKXtzd2l0Y2goYS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKSxhLnR5cGUpe2Nhc2UiRE9NQXR0ck1vZGlmaWVkIjp2YXIgYj1hLmF0dHJOYW1lLGM9YS5yZWxhdGVkTm9kZS5uYW1lc3BhY2VVUkksZD1hLnRhcmdldCxlPW5ldyBqKCJhdHRyaWJ1dGVzIixkKTtlLmF0dHJpYnV0ZU5hbWU9YixlLmF0dHJpYnV0ZU5hbWVzcGFjZT1jO3ZhciBnPWEuYXR0ckNoYW5nZT09PU11dGF0aW9uRXZlbnQuQURESVRJT04/bnVsbDphLnByZXZWYWx1ZTtmKGQsZnVuY3Rpb24oYSl7cmV0dXJuIWEuYXR0cmlidXRlc3x8YS5hdHRyaWJ1dGVGaWx0ZXImJmEuYXR0cmlidXRlRmlsdGVyLmxlbmd0aCYmLTE9PT1hLmF0dHJpYnV0ZUZpbHRlci5pbmRleE9mKGIpJiYtMT09PWEuYXR0cmlidXRlRmlsdGVyLmluZGV4T2YoYyk/dm9pZCAwOmEuYXR0cmlidXRlT2xkVmFsdWU/ayhnKTplfSk7YnJlYWs7Y2FzZSJET01DaGFyYWN0ZXJEYXRhTW9kaWZpZWQiOnZhciBkPWEudGFyZ2V0LGU9aigiY2hhcmFjdGVyRGF0YSIsZCksZz1hLnByZXZWYWx1ZTtmKGQsZnVuY3Rpb24oYSl7cmV0dXJuIGEuY2hhcmFjdGVyRGF0YT9hLmNoYXJhY3RlckRhdGFPbGRWYWx1ZT9rKGcpOmU6dm9pZCAwfSk7YnJlYWs7Y2FzZSJET01Ob2RlUmVtb3ZlZCI6dGhpcy5hZGRUcmFuc2llbnRPYnNlcnZlcihhLnRhcmdldCk7Y2FzZSJET01Ob2RlSW5zZXJ0ZWQiOnZhciBoLGksZD1hLnJlbGF0ZWROb2RlLG09YS50YXJnZXQ7IkRPTU5vZGVJbnNlcnRlZCI9PT1hLnR5cGU/KGg9W21dLGk9W10pOihoPVtdLGk9W21dKTt2YXIgbj1tLnByZXZpb3VzU2libGluZyxvPW0ubmV4dFNpYmxpbmcsZT1qKCJjaGlsZExpc3QiLGQpO2UuYWRkZWROb2Rlcz1oLGUucmVtb3ZlZE5vZGVzPWksZS5wcmV2aW91c1NpYmxpbmc9bixlLm5leHRTaWJsaW5nPW8sZihkLGZ1bmN0aW9uKGEpe3JldHVybiBhLmNoaWxkTGlzdD9lOnZvaWQgMH0pfWwoKX19LGEuSnNNdXRhdGlvbk9ic2VydmVyPWcsIWEuTXV0YXRpb25PYnNlcnZlciYmYS5XZWJLaXRNdXRhdGlvbk9ic2VydmVyJiYoYS5NdXRhdGlvbk9ic2VydmVyPWEuV2ViS2l0TXV0YXRpb25PYnNlcnZlciksYS5NdXRhdGlvbk9ic2VydmVyfHwoYS5NdXRhdGlvbk9ic2VydmVyPWcpfSh0aGlzKSx3aW5kb3cuQ3VzdG9tRWxlbWVudHM9e2ZsYWdzOnt9fSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEsYyxkKXt2YXIgZT1hLmZpcnN0RWxlbWVudENoaWxkO2lmKCFlKWZvcihlPWEuZmlyc3RDaGlsZDtlJiZlLm5vZGVUeXBlIT09Tm9kZS5FTEVNRU5UX05PREU7KWU9ZS5uZXh0U2libGluZztmb3IoO2U7KWMoZSxkKSE9PSEwJiZiKGUsYyxkKSxlPWUubmV4dEVsZW1lbnRTaWJsaW5nO3JldHVybiBudWxsfWZ1bmN0aW9uIGMoYSxiKXtmb3IodmFyIGM9YS5zaGFkb3dSb290O2M7KWQoYyxiKSxjPWMub2xkZXJTaGFkb3dSb290fWZ1bmN0aW9uIGQoYSxkKXtiKGEsZnVuY3Rpb24oYSl7cmV0dXJuIGQoYSk/ITA6KGMoYSxkKSx2b2lkIDApfSksYyhhLGQpfWZ1bmN0aW9uIGUoYSl7cmV0dXJuIGgoYSk/KGkoYSksITApOihsKGEpLHZvaWQgMCl9ZnVuY3Rpb24gZihhKXtkKGEsZnVuY3Rpb24oYSl7cmV0dXJuIGUoYSk/ITA6dm9pZCAwfSl9ZnVuY3Rpb24gZyhhKXtyZXR1cm4gZShhKXx8ZihhKX1mdW5jdGlvbiBoKGIpe2lmKCFiLl9fdXBncmFkZWRfXyYmYi5ub2RlVHlwZT09PU5vZGUuRUxFTUVOVF9OT0RFKXt2YXIgYz1iLmdldEF0dHJpYnV0ZSgiaXMiKXx8Yi5sb2NhbE5hbWUsZD1hLnJlZ2lzdHJ5W2NdO2lmKGQpcmV0dXJuIHkuZG9tJiZjb25zb2xlLmdyb3VwKCJ1cGdyYWRlOiIsYi5sb2NhbE5hbWUpLGEudXBncmFkZShiKSx5LmRvbSYmY29uc29sZS5ncm91cEVuZCgpLCEwfX1mdW5jdGlvbiBpKGEpe2woYSkscShhKSYmZChhLGZ1bmN0aW9uKGEpe2woYSl9KX1mdW5jdGlvbiBqKGEpe2lmKEIucHVzaChhKSwhQSl7QT0hMDt2YXIgYj13aW5kb3cuUGxhdGZvcm0mJndpbmRvdy5QbGF0Zm9ybS5lbmRPZk1pY3JvdGFza3x8c2V0VGltZW91dDtiKGspfX1mdW5jdGlvbiBrKCl7QT0hMTtmb3IodmFyIGEsYj1CLGM9MCxkPWIubGVuZ3RoO2Q+YyYmKGE9YltjXSk7YysrKWEoKTtCPVtdfWZ1bmN0aW9uIGwoYSl7ej9qKGZ1bmN0aW9uKCl7bShhKX0pOm0oYSl9ZnVuY3Rpb24gbShhKXsoYS5lbnRlcmVkVmlld0NhbGxiYWNrfHxhLl9fdXBncmFkZWRfXyYmeS5kb20pJiYoeS5kb20mJmNvbnNvbGUuZ3JvdXAoImluc2VydGVkOiIsYS5sb2NhbE5hbWUpLHEoYSkmJihhLl9faW5zZXJ0ZWQ9KGEuX19pbnNlcnRlZHx8MCkrMSxhLl9faW5zZXJ0ZWQ8MSYmKGEuX19pbnNlcnRlZD0xKSxhLl9faW5zZXJ0ZWQ+MT95LmRvbSYmY29uc29sZS53YXJuKCJpbnNlcnRlZDoiLGEubG9jYWxOYW1lLCJpbnNlcnQvcmVtb3ZlIGNvdW50OiIsYS5fX2luc2VydGVkKTphLmVudGVyZWRWaWV3Q2FsbGJhY2smJih5LmRvbSYmY29uc29sZS5sb2coImluc2VydGVkOiIsYS5sb2NhbE5hbWUpLGEuZW50ZXJlZFZpZXdDYWxsYmFjaygpKSkseS5kb20mJmNvbnNvbGUuZ3JvdXBFbmQoKSl9ZnVuY3Rpb24gbihhKXtvKGEpLGQoYSxmdW5jdGlvbihhKXtvKGEpfSl9ZnVuY3Rpb24gbyhhKXt6P2ooZnVuY3Rpb24oKXtwKGEpfSk6cChhKX1mdW5jdGlvbiBwKGEpeyhhLmxlZnRWaWV3Q2FsbGJhY2t8fGEuX191cGdyYWRlZF9fJiZ5LmRvbSkmJih5LmRvbSYmY29uc29sZS5sb2coInJlbW92ZWQ6IixhLmxvY2FsTmFtZSkscShhKXx8KGEuX19pbnNlcnRlZD0oYS5fX2luc2VydGVkfHwwKS0xLGEuX19pbnNlcnRlZD4wJiYoYS5fX2luc2VydGVkPTApLGEuX19pbnNlcnRlZDwwP3kuZG9tJiZjb25zb2xlLndhcm4oInJlbW92ZWQ6IixhLmxvY2FsTmFtZSwiaW5zZXJ0L3JlbW92ZSBjb3VudDoiLGEuX19pbnNlcnRlZCk6YS5sZWZ0Vmlld0NhbGxiYWNrJiZhLmxlZnRWaWV3Q2FsbGJhY2soKSkpfWZ1bmN0aW9uIHEoYSl7Zm9yKHZhciBiPWEsYz13aW5kb3cuU2hhZG93RE9NUG9seWZpbGwmJndpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbC53cmFwSWZOZWVkZWQoZG9jdW1lbnQpfHxkb2N1bWVudDtiOyl7aWYoYj09YylyZXR1cm4hMDtiPWIucGFyZW50Tm9kZXx8Yi5ob3N0fX1mdW5jdGlvbiByKGEpe2lmKGEuc2hhZG93Um9vdCYmIWEuc2hhZG93Um9vdC5fX3dhdGNoZWQpe3kuZG9tJiZjb25zb2xlLmxvZygid2F0Y2hpbmcgc2hhZG93LXJvb3QgZm9yOiAiLGEubG9jYWxOYW1lKTtmb3IodmFyIGI9YS5zaGFkb3dSb290O2I7KXMoYiksYj1iLm9sZGVyU2hhZG93Um9vdH19ZnVuY3Rpb24gcyhhKXthLl9fd2F0Y2hlZHx8KHYoYSksYS5fX3dhdGNoZWQ9ITApfWZ1bmN0aW9uIHQoYSl7aWYoeS5kb20pe3ZhciBiPWFbMF07aWYoYiYmImNoaWxkTGlzdCI9PT1iLnR5cGUmJmIuYWRkZWROb2RlcyYmYi5hZGRlZE5vZGVzKXtmb3IodmFyIGM9Yi5hZGRlZE5vZGVzWzBdO2MmJmMhPT1kb2N1bWVudCYmIWMuaG9zdDspYz1jLnBhcmVudE5vZGU7dmFyIGQ9YyYmKGMuVVJMfHxjLl9VUkx8fGMuaG9zdCYmYy5ob3N0LmxvY2FsTmFtZSl8fCIiO2Q9ZC5zcGxpdCgiLz8iKS5zaGlmdCgpLnNwbGl0KCIvIikucG9wKCl9Y29uc29sZS5ncm91cCgibXV0YXRpb25zICglZCkgWyVzXSIsYS5sZW5ndGgsZHx8IiIpfWEuZm9yRWFjaChmdW5jdGlvbihhKXsiY2hpbGRMaXN0Ij09PWEudHlwZSYmKEQoYS5hZGRlZE5vZGVzLGZ1bmN0aW9uKGEpe2EubG9jYWxOYW1lJiZnKGEpfSksRChhLnJlbW92ZWROb2RlcyxmdW5jdGlvbihhKXthLmxvY2FsTmFtZSYmbihhKX0pKX0pLHkuZG9tJiZjb25zb2xlLmdyb3VwRW5kKCl9ZnVuY3Rpb24gdSgpe3QoQy50YWtlUmVjb3JkcygpKSxrKCl9ZnVuY3Rpb24gdihhKXtDLm9ic2VydmUoYSx7Y2hpbGRMaXN0OiEwLHN1YnRyZWU6ITB9KX1mdW5jdGlvbiB3KGEpe3YoYSl9ZnVuY3Rpb24geChhKXt5LmRvbSYmY29uc29sZS5ncm91cCgidXBncmFkZURvY3VtZW50OiAiLChhLlVSTHx8YS5fVVJMfHwiIikuc3BsaXQoIi8iKS5wb3AoKSksZyhhKSx5LmRvbSYmY29uc29sZS5ncm91cEVuZCgpfXZhciB5PXdpbmRvdy5sb2dGbGFnc3x8e30sej0hd2luZG93Lk11dGF0aW9uT2JzZXJ2ZXJ8fHdpbmRvdy5NdXRhdGlvbk9ic2VydmVyPT09d2luZG93LkpzTXV0YXRpb25PYnNlcnZlcjthLmhhc1BvbHlmaWxsTXV0YXRpb25zPXo7dmFyIEE9ITEsQj1bXSxDPW5ldyBNdXRhdGlvbk9ic2VydmVyKHQpLEQ9QXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbC5iaW5kKEFycmF5LnByb3RvdHlwZS5mb3JFYWNoKTthLndhdGNoU2hhZG93PXIsYS51cGdyYWRlQWxsPWcsYS51cGdyYWRlU3VidHJlZT1mLGEub2JzZXJ2ZURvY3VtZW50PXcsYS51cGdyYWRlRG9jdW1lbnQ9eCxhLnRha2VSZWNvcmRzPXV9KHdpbmRvdy5DdXN0b21FbGVtZW50cyksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihiLGYpe3ZhciBnPWZ8fHt9O2lmKCFiKXRocm93IG5ldyBFcnJvcigiZG9jdW1lbnQucmVnaXN0ZXI6IGZpcnN0IGFyZ3VtZW50IGBuYW1lYCBtdXN0IG5vdCBiZSBlbXB0eSIpO2lmKGIuaW5kZXhPZigiLSIpPDApdGhyb3cgbmV3IEVycm9yKCJkb2N1bWVudC5yZWdpc3RlcjogZmlyc3QgYXJndW1lbnQgKCduYW1lJykgbXVzdCBjb250YWluIGEgZGFzaCAoJy0nKS4gQXJndW1lbnQgcHJvdmlkZWQgd2FzICciK1N0cmluZyhiKSsiJy4iKTtpZihnLm5hbWU9YiwhZy5wcm90b3R5cGUpdGhyb3cgbmV3IEVycm9yKCJPcHRpb25zIG1pc3NpbmcgcmVxdWlyZWQgcHJvdG90eXBlIHByb3BlcnR5Iik7cmV0dXJuIGcubGlmZWN5Y2xlPWcubGlmZWN5Y2xlfHx7fSxnLmFuY2VzdHJ5PWMoZy5leHRlbmRzKSxkKGcpLGUoZyksayhnLnByb3RvdHlwZSksbShiLGcpLGcuY3Rvcj1uKGcpLGcuY3Rvci5wcm90b3R5cGU9Zy5wcm90b3R5cGUsZy5wcm90b3R5cGUuY29uc3RydWN0b3I9Zy5jdG9yLGEucmVhZHkmJmEudXBncmFkZUFsbChkb2N1bWVudCksZy5jdG9yfWZ1bmN0aW9uIGMoYSl7dmFyIGI9dlthXTtyZXR1cm4gYj9jKGIuZXh0ZW5kcykuY29uY2F0KFtiXSk6W119ZnVuY3Rpb24gZChhKXtmb3IodmFyIGIsYz1hLmV4dGVuZHMsZD0wO2I9YS5hbmNlc3RyeVtkXTtkKyspYz1iLmlzJiZiLnRhZzthLnRhZz1jfHxhLm5hbWUsYyYmKGEuaXM9YS5uYW1lKX1mdW5jdGlvbiBlKGEpe2lmKCFPYmplY3QuX19wcm90b19fKXt2YXIgYj1IVE1MRWxlbWVudC5wcm90b3R5cGU7aWYoYS5pcyl7dmFyIGM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChhLnRhZyk7Yj1PYmplY3QuZ2V0UHJvdG90eXBlT2YoYyl9Zm9yKHZhciBkLGU9YS5wcm90b3R5cGU7ZSYmZSE9PWI7KXt2YXIgZD1PYmplY3QuZ2V0UHJvdG90eXBlT2YoZSk7ZS5fX3Byb3RvX189ZCxlPWR9fWEubmF0aXZlPWJ9ZnVuY3Rpb24gZihhKXtyZXR1cm4gZyh3KGEudGFnKSxhKX1mdW5jdGlvbiBnKGIsYyl7cmV0dXJuIGMuaXMmJmIuc2V0QXR0cmlidXRlKCJpcyIsYy5pcyksaChiLGMpLGIuX191cGdyYWRlZF9fPSEwLGEudXBncmFkZVN1YnRyZWUoYiksaihiKSxifWZ1bmN0aW9uIGgoYSxiKXtPYmplY3QuX19wcm90b19fP2EuX19wcm90b19fPWIucHJvdG90eXBlOihpKGEsYi5wcm90b3R5cGUsYi5uYXRpdmUpLGEuX19wcm90b19fPWIucHJvdG90eXBlKX1mdW5jdGlvbiBpKGEsYixjKXtmb3IodmFyIGQ9e30sZT1iO2UhPT1jJiZlIT09SFRNTFVua25vd25FbGVtZW50LnByb3RvdHlwZTspe2Zvcih2YXIgZixnPU9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGUpLGg9MDtmPWdbaF07aCsrKWRbZl18fChPYmplY3QuZGVmaW5lUHJvcGVydHkoYSxmLE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSxmKSksZFtmXT0xKTtlPU9iamVjdC5nZXRQcm90b3R5cGVPZihlKX19ZnVuY3Rpb24gaihhKXthLmNyZWF0ZWRDYWxsYmFjayYmYS5jcmVhdGVkQ2FsbGJhY2soKX1mdW5jdGlvbiBrKGEpe3ZhciBiPWEuc2V0QXR0cmlidXRlO2Euc2V0QXR0cmlidXRlPWZ1bmN0aW9uKGEsYyl7bC5jYWxsKHRoaXMsYSxjLGIpfTt2YXIgYz1hLnJlbW92ZUF0dHJpYnV0ZTthLnJlbW92ZUF0dHJpYnV0ZT1mdW5jdGlvbihhLGIpe2wuY2FsbCh0aGlzLGEsYixjKX19ZnVuY3Rpb24gbChhLGIsYyl7dmFyIGQ9dGhpcy5nZXRBdHRyaWJ1dGUoYSk7Yy5hcHBseSh0aGlzLGFyZ3VtZW50cyksdGhpcy5hdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2smJnRoaXMuZ2V0QXR0cmlidXRlKGEpIT09ZCYmdGhpcy5hdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2soYSxkKX1mdW5jdGlvbiBtKGEsYil7dlthXT1ifWZ1bmN0aW9uIG4oYSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGYoYSl9fWZ1bmN0aW9uIG8oYSxiKXt2YXIgYz12W2J8fGFdO3JldHVybiBjP25ldyBjLmN0b3I6dyhhKX1mdW5jdGlvbiBwKGEpe2lmKCFhLl9fdXBncmFkZWRfXyYmYS5ub2RlVHlwZT09PU5vZGUuRUxFTUVOVF9OT0RFKXt2YXIgYj1hLmdldEF0dHJpYnV0ZSgiaXMiKXx8YS5sb2NhbE5hbWUsYz12W2JdO3JldHVybiBjJiZnKGEsYyl9fWZ1bmN0aW9uIHEoYil7dmFyIGM9eC5jYWxsKHRoaXMsYik7cmV0dXJuIGEudXBncmFkZUFsbChjKSxjfWF8fChhPXdpbmRvdy5DdXN0b21FbGVtZW50cz17ZmxhZ3M6e319KTt2YXIgcj1hLmZsYWdzLHM9Qm9vbGVhbihkb2N1bWVudC5yZWdpc3RlciksdD0hci5yZWdpc3RlciYmcztpZih0KXt2YXIgdT1mdW5jdGlvbigpe307YS5yZWdpc3RyeT17fSxhLnVwZ3JhZGVFbGVtZW50PXUsYS53YXRjaFNoYWRvdz11LGEudXBncmFkZT11LGEudXBncmFkZUFsbD11LGEudXBncmFkZVN1YnRyZWU9dSxhLm9ic2VydmVEb2N1bWVudD11LGEudXBncmFkZURvY3VtZW50PXUsYS50YWtlUmVjb3Jkcz11fWVsc2V7dmFyIHY9e30sdz1kb2N1bWVudC5jcmVhdGVFbGVtZW50LmJpbmQoZG9jdW1lbnQpLHg9Tm9kZS5wcm90b3R5cGUuY2xvbmVOb2RlO2RvY3VtZW50LnJlZ2lzdGVyPWIsZG9jdW1lbnQuY3JlYXRlRWxlbWVudD1vLE5vZGUucHJvdG90eXBlLmNsb25lTm9kZT1xLGEucmVnaXN0cnk9dixhLnVwZ3JhZGU9cH1hLmhhc05hdGl2ZT1zLGEudXNlTmF0aXZlPXR9KHdpbmRvdy5DdXN0b21FbGVtZW50cyksZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGEpe3JldHVybiJsaW5rIj09PWEubG9jYWxOYW1lJiZhLmdldEF0dHJpYnV0ZSgicmVsIik9PT1ifXZhciBiPXdpbmRvdy5IVE1MSW1wb3J0cz9IVE1MSW1wb3J0cy5JTVBPUlRfTElOS19UWVBFOiJub25lIixjPXtzZWxlY3RvcnM6WyJsaW5rW3JlbD0iK2IrIl0iXSxtYXA6e2xpbms6InBhcnNlTGluayJ9LHBhcnNlOmZ1bmN0aW9uKGEpe2lmKCFhLl9fcGFyc2VkKXthLl9fcGFyc2VkPSEwO3ZhciBiPWEucXVlcnlTZWxlY3RvckFsbChjLnNlbGVjdG9ycyk7ZChiLGZ1bmN0aW9uKGEpe2NbYy5tYXBbYS5sb2NhbE5hbWVdXShhKX0pLEN1c3RvbUVsZW1lbnRzLnVwZ3JhZGVEb2N1bWVudChhKSxDdXN0b21FbGVtZW50cy5vYnNlcnZlRG9jdW1lbnQoYSl9fSxwYXJzZUxpbms6ZnVuY3Rpb24oYil7YShiKSYmdGhpcy5wYXJzZUltcG9ydChiKX0scGFyc2VJbXBvcnQ6ZnVuY3Rpb24oYSl7YS5jb250ZW50JiZjLnBhcnNlKGEuY29udGVudCl9fSxkPUFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwuYmluZChBcnJheS5wcm90b3R5cGUuZm9yRWFjaCk7Q3VzdG9tRWxlbWVudHMucGFyc2VyPWN9KCksZnVuY3Rpb24oKXtmdW5jdGlvbiBhKCl7Q3VzdG9tRWxlbWVudHMucGFyc2VyLnBhcnNlKGRvY3VtZW50KSxDdXN0b21FbGVtZW50cy51cGdyYWRlRG9jdW1lbnQoZG9jdW1lbnQpO3ZhciBhPXdpbmRvdy5QbGF0Zm9ybSYmUGxhdGZvcm0uZW5kT2ZNaWNyb3Rhc2s/UGxhdGZvcm0uZW5kT2ZNaWNyb3Rhc2s6c2V0VGltZW91dDthKGZ1bmN0aW9uKCl7Q3VzdG9tRWxlbWVudHMucmVhZHk9ITAsQ3VzdG9tRWxlbWVudHMucmVhZHlUaW1lPURhdGUubm93KCksd2luZG93LkhUTUxJbXBvcnRzJiYoQ3VzdG9tRWxlbWVudHMuZWxhcHNlZD1DdXN0b21FbGVtZW50cy5yZWFkeVRpbWUtSFRNTEltcG9ydHMucmVhZHlUaW1lKSxkb2N1bWVudC5ib2R5LmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KCJXZWJDb21wb25lbnRzUmVhZHkiLHtidWJibGVzOiEwfSkpfSl9aWYoImZ1bmN0aW9uIiE9dHlwZW9mIHdpbmRvdy5DdXN0b21FdmVudCYmKHdpbmRvdy5DdXN0b21FdmVudD1mdW5jdGlvbihhKXt2YXIgYj1kb2N1bWVudC5jcmVhdGVFdmVudCgiSFRNTEV2ZW50cyIpO3JldHVybiBiLmluaXRFdmVudChhLCEwLCEwKSxifSksImNvbXBsZXRlIj09PWRvY3VtZW50LnJlYWR5U3RhdGUpYSgpO2Vsc2UgaWYoImludGVyYWN0aXZlIiE9PWRvY3VtZW50LnJlYWR5U3RhdGV8fHdpbmRvdy5hdHRhY2hFdmVudHx8d2luZG93LkhUTUxJbXBvcnRzJiYhd2luZG93LkhUTUxJbXBvcnRzLnJlYWR5KXt2YXIgYj13aW5kb3cuSFRNTEltcG9ydHM/IkhUTUxJbXBvcnRzTG9hZGVkIjoiRE9NQ29udGVudExvYWRlZCI7d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoYixhKX1lbHNlIGEoKX0oKSxmdW5jdGlvbigpe2Z1bmN0aW9uIGEoKXt9dmFyIGI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3R5bGUiKTtiLnRleHRDb250ZW50PSJlbGVtZW50IHtkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7fSAvKiBpbmplY3RlZCBieSBwbGF0Zm9ybS5qcyAqLyI7dmFyIGM9ZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiaGVhZCIpO2lmKGMuaW5zZXJ0QmVmb3JlKGIsYy5maXJzdENoaWxkKSx3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpe0N1c3RvbUVsZW1lbnRzLndhdGNoU2hhZG93PWEsQ3VzdG9tRWxlbWVudHMud2F0Y2hBbGxTaGFkb3dzPWE7dmFyIGQ9WyJ1cGdyYWRlQWxsIiwidXBncmFkZVN1YnRyZWUiLCJvYnNlcnZlRG9jdW1lbnQiLCJ1cGdyYWRlRG9jdW1lbnQiXSxlPXt9O2QuZm9yRWFjaChmdW5jdGlvbihhKXtlW2FdPUN1c3RvbUVsZW1lbnRzW2FdfSksZC5mb3JFYWNoKGZ1bmN0aW9uKGEpe0N1c3RvbUVsZW1lbnRzW2FdPWZ1bmN0aW9uKGIpe3JldHVybiBlW2FdKHdyYXAoYikpfX0pfX0oKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEpe2YudGV4dENvbnRlbnQ9ZCsrLGUucHVzaChhKX1mdW5jdGlvbiBjKCl7Zm9yKDtlLmxlbmd0aDspZS5zaGlmdCgpKCl9dmFyIGQ9MCxlPVtdLGY9ZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoIiIpO25ldyh3aW5kb3cuTXV0YXRpb25PYnNlcnZlcnx8SnNNdXRhdGlvbk9ic2VydmVyKShjKS5vYnNlcnZlKGYse2NoYXJhY3RlckRhdGE6ITB9KSxhLmVuZE9mTWljcm90YXNrPWJ9KFBsYXRmb3JtKSxmdW5jdGlvbihhKXthPWF8fHt9O3ZhciBiPXtzaGFkb3c6ZnVuY3Rpb24oYSl7cmV0dXJuIGE/YS5zaGFkb3dSb290fHxhLndlYmtpdFNoYWRvd1Jvb3Q6dm9pZCAwfSxjYW5UYXJnZXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGEmJkJvb2xlYW4oYS5lbGVtZW50RnJvbVBvaW50KX0sdGFyZ2V0aW5nU2hhZG93OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuc2hhZG93KGEpO3JldHVybiB0aGlzLmNhblRhcmdldChiKT9iOnZvaWQgMH0sb2xkZXJTaGFkb3c6ZnVuY3Rpb24oYSl7dmFyIGI9YS5vbGRlclNoYWRvd1Jvb3Q7aWYoIWIpe3ZhciBjPWEucXVlcnlTZWxlY3Rvcigic2hhZG93Iik7YyYmKGI9Yy5vbGRlclNoYWRvd1Jvb3QpfXJldHVybiBifSxhbGxTaGFkb3dzOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1bXSxjPXRoaXMuc2hhZG93KGEpO2M7KWIucHVzaChjKSxjPXRoaXMub2xkZXJTaGFkb3coYyk7cmV0dXJuIGJ9LHNlYXJjaFJvb3Q6ZnVuY3Rpb24oYSxiLGMpe2lmKGEpe3ZhciBkLGUsZj1hLmVsZW1lbnRGcm9tUG9pbnQoYixjKTtmb3IoZT10aGlzLnRhcmdldGluZ1NoYWRvdyhmKTtlOyl7aWYoZD1lLmVsZW1lbnRGcm9tUG9pbnQoYixjKSl7dmFyIGc9dGhpcy50YXJnZXRpbmdTaGFkb3coZCk7cmV0dXJuIHRoaXMuc2VhcmNoUm9vdChnLGIsYyl8fGR9ZT10aGlzLm9sZGVyU2hhZG93KGUpfXJldHVybiBmfX0sb3duZXI6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPWE7Yi5wYXJlbnROb2RlOyliPWIucGFyZW50Tm9kZTtyZXR1cm4gYn0sZmluZFRhcmdldDpmdW5jdGlvbihhKXt2YXIgYj1hLmNsaWVudFgsYz1hLmNsaWVudFksZD10aGlzLm93bmVyKGEudGFyZ2V0KTtyZXR1cm4gZC5lbGVtZW50RnJvbVBvaW50KGIsYyl8fChkPWRvY3VtZW50KSx0aGlzLnNlYXJjaFJvb3QoZG9jdW1lbnQsYixjKX19O2EudGFyZ2V0RmluZGluZz1iLGEuZmluZFRhcmdldD1iLmZpbmRUYXJnZXQuYmluZChiKSx3aW5kb3cuUG9pbnRlckV2ZW50c1BvbHlmaWxsPWF9KHdpbmRvdy5Qb2ludGVyRXZlbnRzUG9seWZpbGwpLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhKXtyZXR1cm4nW3RvdWNoLWFjdGlvbj0iJythKyciXSd9ZnVuY3Rpb24gYihhKXtyZXR1cm4ieyAtbXMtdG91Y2gtYWN0aW9uOiAiK2ErIjsgdG91Y2gtYWN0aW9uOiAiK2ErIjsgdG91Y2gtYWN0aW9uLWRlbGF5OiBub25lOyB9In12YXIgYz1bIm5vbmUiLCJhdXRvIiwicGFuLXgiLCJwYW4teSIse3J1bGU6InBhbi14IHBhbi15IixzZWxlY3RvcnM6WyJwYW4teCBwYW4teSIsInBhbi15IHBhbi14Il19XSxkPSIiO2MuZm9yRWFjaChmdW5jdGlvbihjKXtkKz1TdHJpbmcoYyk9PT1jP2EoYykrYihjKTpjLnNlbGVjdG9ycy5tYXAoYSkrYihjLnJ1bGUpfSk7dmFyIGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3R5bGUiKTtlLnRleHRDb250ZW50PWQsZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChlKX0oKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEsZSl7ZT1lfHx7fTt2YXIgZj1lLmJ1dHRvbnM7aWYodm9pZCAwPT09Zilzd2l0Y2goZS53aGljaCl7Y2FzZSAxOmY9MTticmVhaztjYXNlIDI6Zj00O2JyZWFrO2Nhc2UgMzpmPTI7YnJlYWs7ZGVmYXVsdDpmPTB9dmFyIGk7aWYoYylpPW5ldyBNb3VzZUV2ZW50KGEsZSk7ZWxzZXtpPWRvY3VtZW50LmNyZWF0ZUV2ZW50KCJNb3VzZUV2ZW50Iik7Zm9yKHZhciBqLGs9e30sbD0wO2w8Zy5sZW5ndGg7bCsrKWo9Z1tsXSxrW2pdPWVbal18fGhbbF07aS5pbml0TW91c2VFdmVudChhLGsuYnViYmxlcyxrLmNhbmNlbGFibGUsay52aWV3LGsuZGV0YWlsLGsuc2NyZWVuWCxrLnNjcmVlblksay5jbGllbnRYLGsuY2xpZW50WSxrLmN0cmxLZXksay5hbHRLZXksay5zaGlmdEtleSxrLm1ldGFLZXksay5idXR0b24say5yZWxhdGVkVGFyZ2V0KX1pLl9fcHJvdG9fXz1iLnByb3RvdHlwZSxkfHxPYmplY3QuZGVmaW5lUHJvcGVydHkoaSwiYnV0dG9ucyIse2dldDpmdW5jdGlvbigpe3JldHVybiBmfSxlbnVtZXJhYmxlOiEwfSk7dmFyIG09MDtyZXR1cm4gbT1lLnByZXNzdXJlP2UucHJlc3N1cmU6Zj8uNTowLE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGkse3BvaW50ZXJJZDp7dmFsdWU6ZS5wb2ludGVySWR8fDAsZW51bWVyYWJsZTohMH0sd2lkdGg6e3ZhbHVlOmUud2lkdGh8fDAsZW51bWVyYWJsZTohMH0saGVpZ2h0Ont2YWx1ZTplLmhlaWdodHx8MCxlbnVtZXJhYmxlOiEwfSxwcmVzc3VyZTp7dmFsdWU6bSxlbnVtZXJhYmxlOiEwfSx0aWx0WDp7dmFsdWU6ZS50aWx0WHx8MCxlbnVtZXJhYmxlOiEwfSx0aWx0WTp7dmFsdWU6ZS50aWx0WXx8MCxlbnVtZXJhYmxlOiEwfSxwb2ludGVyVHlwZTp7dmFsdWU6ZS5wb2ludGVyVHlwZXx8IiIsZW51bWVyYWJsZTohMH0saHdUaW1lc3RhbXA6e3ZhbHVlOmUuaHdUaW1lc3RhbXB8fDAsZW51bWVyYWJsZTohMH0saXNQcmltYXJ5Ont2YWx1ZTplLmlzUHJpbWFyeXx8ITEsZW51bWVyYWJsZTohMH19KSxpfXZhciBjPSExLGQ9ITE7dHJ5e3ZhciBlPW5ldyBNb3VzZUV2ZW50KCJjbGljayIse2J1dHRvbnM6MX0pO2M9ITAsZD0xPT09ZS5idXR0b25zfWNhdGNoKGYpe312YXIgZz1bImJ1YmJsZXMiLCJjYW5jZWxhYmxlIiwidmlldyIsImRldGFpbCIsInNjcmVlblgiLCJzY3JlZW5ZIiwiY2xpZW50WCIsImNsaWVudFkiLCJjdHJsS2V5IiwiYWx0S2V5Iiwic2hpZnRLZXkiLCJtZXRhS2V5IiwiYnV0dG9uIiwicmVsYXRlZFRhcmdldCJdLGg9WyExLCExLG51bGwsbnVsbCwwLDAsMCwwLCExLCExLCExLCExLDAsbnVsbF07Yi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShNb3VzZUV2ZW50LnByb3RvdHlwZSksYS5Qb2ludGVyRXZlbnR8fChhLlBvaW50ZXJFdmVudD1iKX0od2luZG93KSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKCl7dGhpcy5pZHM9W10sdGhpcy5wb2ludGVycz1bXX1iLnByb3RvdHlwZT17c2V0OmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5pZHMuaW5kZXhPZihhKTtjPi0xP3RoaXMucG9pbnRlcnNbY109YjoodGhpcy5pZHMucHVzaChhKSx0aGlzLnBvaW50ZXJzLnB1c2goYikpfSxoYXM6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuaWRzLmluZGV4T2YoYSk+LTF9LCJkZWxldGUiOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuaWRzLmluZGV4T2YoYSk7Yj4tMSYmKHRoaXMuaWRzLnNwbGljZShiLDEpLHRoaXMucG9pbnRlcnMuc3BsaWNlKGIsMSkpfSxnZXQ6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5pZHMuaW5kZXhPZihhKTtyZXR1cm4gdGhpcy5wb2ludGVyc1tiXX0sZ2V0IHNpemUoKXtyZXR1cm4gdGhpcy5wb2ludGVycy5sZW5ndGh9LGNsZWFyOmZ1bmN0aW9uKCl7dGhpcy5pZHMubGVuZ3RoPTAsdGhpcy5wb2ludGVycy5sZW5ndGg9MH0sZm9yRWFjaDpmdW5jdGlvbihhLGIpe3RoaXMuaWRzLmZvckVhY2goZnVuY3Rpb24oYyxkKXthLmNhbGwoYixjLHRoaXMucG9pbnRlcnNbZF0sdGhpcyl9LHRoaXMpfX0sYS5Qb2ludGVyTWFwPXdpbmRvdy5NYXAmJk1hcC5wcm90b3R5cGUuZm9yRWFjaD9NYXA6Yn0od2luZG93LlBvaW50ZXJFdmVudHNQb2x5ZmlsbCksZnVuY3Rpb24oYSl7dmFyIGI9WyJidWJibGVzIiwiY2FuY2VsYWJsZSIsInZpZXciLCJkZXRhaWwiLCJzY3JlZW5YIiwic2NyZWVuWSIsImNsaWVudFgiLCJjbGllbnRZIiwiY3RybEtleSIsImFsdEtleSIsInNoaWZ0S2V5IiwibWV0YUtleSIsImJ1dHRvbiIsInJlbGF0ZWRUYXJnZXQiLCJidXR0b25zIiwicG9pbnRlcklkIiwid2lkdGgiLCJoZWlnaHQiLCJwcmVzc3VyZSIsInRpbHRYIiwidGlsdFkiLCJwb2ludGVyVHlwZSIsImh3VGltZXN0YW1wIiwiaXNQcmltYXJ5IiwidHlwZSIsInRhcmdldCIsImN1cnJlbnRUYXJnZXQiLCJ3aGljaCJdLGM9WyExLCExLG51bGwsbnVsbCwwLDAsMCwwLCExLCExLCExLCExLDAsbnVsbCx2b2lkIDAsMCwwLDAsMCwwLDAsIiIsMCwhMSwiIixudWxsLG51bGwsMF0sZD17dGFyZ2V0czpuZXcgV2Vha01hcCxoYW5kbGVkRXZlbnRzOm5ldyBXZWFrTWFwLHBvaW50ZXJtYXA6bmV3IGEuUG9pbnRlck1hcCxldmVudE1hcDp7fSxldmVudFNvdXJjZXM6e30sZXZlbnRTb3VyY2VMaXN0OltdLHJlZ2lzdGVyU291cmNlOmZ1bmN0aW9uKGEsYil7dmFyIGM9YixkPWMuZXZlbnRzOwpkJiYoZC5mb3JFYWNoKGZ1bmN0aW9uKGEpe2NbYV0mJih0aGlzLmV2ZW50TWFwW2FdPWNbYV0uYmluZChjKSl9LHRoaXMpLHRoaXMuZXZlbnRTb3VyY2VzW2FdPWMsdGhpcy5ldmVudFNvdXJjZUxpc3QucHVzaChjKSl9LHJlZ2lzdGVyOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYixjPXRoaXMuZXZlbnRTb3VyY2VMaXN0Lmxlbmd0aCxkPTA7Yz5kJiYoYj10aGlzLmV2ZW50U291cmNlTGlzdFtkXSk7ZCsrKWIucmVnaXN0ZXIuY2FsbChiLGEpfSx1bnJlZ2lzdGVyOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYixjPXRoaXMuZXZlbnRTb3VyY2VMaXN0Lmxlbmd0aCxkPTA7Yz5kJiYoYj10aGlzLmV2ZW50U291cmNlTGlzdFtkXSk7ZCsrKWIudW5yZWdpc3Rlci5jYWxsKGIsYSl9LGRvd246ZnVuY3Rpb24oYSl7dGhpcy5maXJlRXZlbnQoInBvaW50ZXJkb3duIixhKX0sbW92ZTpmdW5jdGlvbihhKXt0aGlzLmZpcmVFdmVudCgicG9pbnRlcm1vdmUiLGEpfSx1cDpmdW5jdGlvbihhKXt0aGlzLmZpcmVFdmVudCgicG9pbnRlcnVwIixhKX0sZW50ZXI6ZnVuY3Rpb24oYSl7YS5idWJibGVzPSExLHRoaXMuZmlyZUV2ZW50KCJwb2ludGVyZW50ZXIiLGEpfSxsZWF2ZTpmdW5jdGlvbihhKXthLmJ1YmJsZXM9ITEsdGhpcy5maXJlRXZlbnQoInBvaW50ZXJsZWF2ZSIsYSl9LG92ZXI6ZnVuY3Rpb24oYSl7YS5idWJibGVzPSEwLHRoaXMuZmlyZUV2ZW50KCJwb2ludGVyb3ZlciIsYSl9LG91dDpmdW5jdGlvbihhKXthLmJ1YmJsZXM9ITAsdGhpcy5maXJlRXZlbnQoInBvaW50ZXJvdXQiLGEpfSxjYW5jZWw6ZnVuY3Rpb24oYSl7dGhpcy5maXJlRXZlbnQoInBvaW50ZXJjYW5jZWwiLGEpfSxsZWF2ZU91dDpmdW5jdGlvbihhKXthLnRhcmdldC5jb250YWlucyhhLnJlbGF0ZWRUYXJnZXQpfHx0aGlzLmxlYXZlKGEpLHRoaXMub3V0KGEpfSxlbnRlck92ZXI6ZnVuY3Rpb24oYSl7YS50YXJnZXQuY29udGFpbnMoYS5yZWxhdGVkVGFyZ2V0KXx8dGhpcy5lbnRlcihhKSx0aGlzLm92ZXIoYSl9LGV2ZW50SGFuZGxlcjpmdW5jdGlvbihhKXtpZighdGhpcy5oYW5kbGVkRXZlbnRzLmdldChhKSl7dmFyIGI9YS50eXBlLGM9dGhpcy5ldmVudE1hcCYmdGhpcy5ldmVudE1hcFtiXTtjJiZjKGEpLHRoaXMuaGFuZGxlZEV2ZW50cy5zZXQoYSwhMCl9fSxsaXN0ZW46ZnVuY3Rpb24oYSxiKXtiLmZvckVhY2goZnVuY3Rpb24oYil7dGhpcy5hZGRFdmVudChhLGIpfSx0aGlzKX0sdW5saXN0ZW46ZnVuY3Rpb24oYSxiKXtiLmZvckVhY2goZnVuY3Rpb24oYil7dGhpcy5yZW1vdmVFdmVudChhLGIpfSx0aGlzKX0sYWRkRXZlbnQ6ZnVuY3Rpb24oYSxiKXthLmFkZEV2ZW50TGlzdGVuZXIoYix0aGlzLmJvdW5kSGFuZGxlcil9LHJlbW92ZUV2ZW50OmZ1bmN0aW9uKGEsYil7YS5yZW1vdmVFdmVudExpc3RlbmVyKGIsdGhpcy5ib3VuZEhhbmRsZXIpfSxtYWtlRXZlbnQ6ZnVuY3Rpb24oYSxiKXt0aGlzLmNhcHR1cmVJbmZvJiYoYi5yZWxhdGVkVGFyZ2V0PW51bGwpO3ZhciBjPW5ldyBQb2ludGVyRXZlbnQoYSxiKTtyZXR1cm4gdGhpcy50YXJnZXRzLnNldChjLHRoaXMudGFyZ2V0cy5nZXQoYil8fGIudGFyZ2V0KSxjfSxmaXJlRXZlbnQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLm1ha2VFdmVudChhLGIpO3JldHVybiB0aGlzLmRpc3BhdGNoRXZlbnQoYyl9LGNsb25lRXZlbnQ6ZnVuY3Rpb24oYSl7Zm9yKHZhciBkLGU9e30sZj0wO2Y8Yi5sZW5ndGg7ZisrKWQ9YltmXSxlW2RdPWFbZF18fGNbZl07cmV0dXJuIGV9LGdldFRhcmdldDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5jYXB0dXJlSW5mbyYmdGhpcy5jYXB0dXJlSW5mby5pZD09PWEucG9pbnRlcklkP3RoaXMuY2FwdHVyZUluZm8udGFyZ2V0OnRoaXMudGFyZ2V0cy5nZXQoYSl9LHNldENhcHR1cmU6ZnVuY3Rpb24oYSxiKXt0aGlzLmNhcHR1cmVJbmZvJiZ0aGlzLnJlbGVhc2VDYXB0dXJlKHRoaXMuY2FwdHVyZUluZm8uaWQpLHRoaXMuY2FwdHVyZUluZm89e2lkOmEsdGFyZ2V0OmJ9O3ZhciBjPW5ldyBQb2ludGVyRXZlbnQoImdvdHBvaW50ZXJjYXB0dXJlIix7YnViYmxlczohMH0pO3RoaXMuaW1wbGljaXRSZWxlYXNlPXRoaXMucmVsZWFzZUNhcHR1cmUuYmluZCh0aGlzLGEpLGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoInBvaW50ZXJ1cCIsdGhpcy5pbXBsaWNpdFJlbGVhc2UpLGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoInBvaW50ZXJjYW5jZWwiLHRoaXMuaW1wbGljaXRSZWxlYXNlKSx0aGlzLnRhcmdldHMuc2V0KGMsYiksdGhpcy5hc3luY0Rpc3BhdGNoRXZlbnQoYyl9LHJlbGVhc2VDYXB0dXJlOmZ1bmN0aW9uKGEpe2lmKHRoaXMuY2FwdHVyZUluZm8mJnRoaXMuY2FwdHVyZUluZm8uaWQ9PT1hKXt2YXIgYj1uZXcgUG9pbnRlckV2ZW50KCJsb3N0cG9pbnRlcmNhcHR1cmUiLHtidWJibGVzOiEwfSksYz10aGlzLmNhcHR1cmVJbmZvLnRhcmdldDt0aGlzLmNhcHR1cmVJbmZvPW51bGwsZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigicG9pbnRlcnVwIix0aGlzLmltcGxpY2l0UmVsZWFzZSksZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigicG9pbnRlcmNhbmNlbCIsdGhpcy5pbXBsaWNpdFJlbGVhc2UpLHRoaXMudGFyZ2V0cy5zZXQoYixjKSx0aGlzLmFzeW5jRGlzcGF0Y2hFdmVudChiKX19LGRpc3BhdGNoRXZlbnQ6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5nZXRUYXJnZXQoYSk7cmV0dXJuIGI/Yi5kaXNwYXRjaEV2ZW50KGEpOnZvaWQgMH0sYXN5bmNEaXNwYXRjaEV2ZW50OmZ1bmN0aW9uKGEpe3NldFRpbWVvdXQodGhpcy5kaXNwYXRjaEV2ZW50LmJpbmQodGhpcyxhKSwwKX19O2QuYm91bmRIYW5kbGVyPWQuZXZlbnRIYW5kbGVyLmJpbmQoZCksYS5kaXNwYXRjaGVyPWQsYS5yZWdpc3Rlcj1kLnJlZ2lzdGVyLmJpbmQoZCksYS51bnJlZ2lzdGVyPWQudW5yZWdpc3Rlci5iaW5kKGQpfSh3aW5kb3cuUG9pbnRlckV2ZW50c1BvbHlmaWxsKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEsYixjLGQpe3RoaXMuYWRkQ2FsbGJhY2s9YS5iaW5kKGQpLHRoaXMucmVtb3ZlQ2FsbGJhY2s9Yi5iaW5kKGQpLHRoaXMuY2hhbmdlZENhbGxiYWNrPWMuYmluZChkKSxnJiYodGhpcy5vYnNlcnZlcj1uZXcgZyh0aGlzLm11dGF0aW9uV2F0Y2hlci5iaW5kKHRoaXMpKSl9dmFyIGM9QXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbC5iaW5kKEFycmF5LnByb3RvdHlwZS5mb3JFYWNoKSxkPUFycmF5LnByb3RvdHlwZS5tYXAuY2FsbC5iaW5kKEFycmF5LnByb3RvdHlwZS5tYXApLGU9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwuYmluZChBcnJheS5wcm90b3R5cGUuc2xpY2UpLGY9QXJyYXkucHJvdG90eXBlLmZpbHRlci5jYWxsLmJpbmQoQXJyYXkucHJvdG90eXBlLmZpbHRlciksZz13aW5kb3cuTXV0YXRpb25PYnNlcnZlcnx8d2luZG93LldlYktpdE11dGF0aW9uT2JzZXJ2ZXIsaD0iW3RvdWNoLWFjdGlvbl0iLGk9e3N1YnRyZWU6ITAsY2hpbGRMaXN0OiEwLGF0dHJpYnV0ZXM6ITAsYXR0cmlidXRlT2xkVmFsdWU6ITAsYXR0cmlidXRlRmlsdGVyOlsidG91Y2gtYWN0aW9uIl19O2IucHJvdG90eXBlPXt3YXRjaFN1YnRyZWU6ZnVuY3Rpb24oYil7YS50YXJnZXRGaW5kaW5nLmNhblRhcmdldChiKSYmdGhpcy5vYnNlcnZlci5vYnNlcnZlKGIsaSl9LGVuYWJsZU9uU3VidHJlZTpmdW5jdGlvbihhKXt0aGlzLndhdGNoU3VidHJlZShhKSxhPT09ZG9jdW1lbnQmJiJjb21wbGV0ZSIhPT1kb2N1bWVudC5yZWFkeVN0YXRlP3RoaXMuaW5zdGFsbE9uTG9hZCgpOnRoaXMuaW5zdGFsbE5ld1N1YnRyZWUoYSl9LGluc3RhbGxOZXdTdWJ0cmVlOmZ1bmN0aW9uKGEpe2ModGhpcy5maW5kRWxlbWVudHMoYSksdGhpcy5hZGRFbGVtZW50LHRoaXMpfSxmaW5kRWxlbWVudHM6ZnVuY3Rpb24oYSl7cmV0dXJuIGEucXVlcnlTZWxlY3RvckFsbD9hLnF1ZXJ5U2VsZWN0b3JBbGwoaCk6W119LHJlbW92ZUVsZW1lbnQ6ZnVuY3Rpb24oYSl7dGhpcy5yZW1vdmVDYWxsYmFjayhhKX0sYWRkRWxlbWVudDpmdW5jdGlvbihhKXt0aGlzLmFkZENhbGxiYWNrKGEpfSxlbGVtZW50Q2hhbmdlZDpmdW5jdGlvbihhLGIpe3RoaXMuY2hhbmdlZENhbGxiYWNrKGEsYil9LGNvbmNhdExpc3RzOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGEuY29uY2F0KGUoYikpfSxpbnN0YWxsT25Mb2FkOmZ1bmN0aW9uKCl7ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsdGhpcy5pbnN0YWxsTmV3U3VidHJlZS5iaW5kKHRoaXMsZG9jdW1lbnQpKX0saXNFbGVtZW50OmZ1bmN0aW9uKGEpe3JldHVybiBhLm5vZGVUeXBlPT09Tm9kZS5FTEVNRU5UX05PREV9LGZsYXR0ZW5NdXRhdGlvblRyZWU6ZnVuY3Rpb24oYSl7dmFyIGI9ZChhLHRoaXMuZmluZEVsZW1lbnRzLHRoaXMpO3JldHVybiBiLnB1c2goZihhLHRoaXMuaXNFbGVtZW50KSksYi5yZWR1Y2UodGhpcy5jb25jYXRMaXN0cyxbXSl9LG11dGF0aW9uV2F0Y2hlcjpmdW5jdGlvbihhKXthLmZvckVhY2godGhpcy5tdXRhdGlvbkhhbmRsZXIsdGhpcyl9LG11dGF0aW9uSGFuZGxlcjpmdW5jdGlvbihhKXtpZigiY2hpbGRMaXN0Ij09PWEudHlwZSl7dmFyIGI9dGhpcy5mbGF0dGVuTXV0YXRpb25UcmVlKGEuYWRkZWROb2Rlcyk7Yi5mb3JFYWNoKHRoaXMuYWRkRWxlbWVudCx0aGlzKTt2YXIgYz10aGlzLmZsYXR0ZW5NdXRhdGlvblRyZWUoYS5yZW1vdmVkTm9kZXMpO2MuZm9yRWFjaCh0aGlzLnJlbW92ZUVsZW1lbnQsdGhpcyl9ZWxzZSJhdHRyaWJ1dGVzIj09PWEudHlwZSYmdGhpcy5lbGVtZW50Q2hhbmdlZChhLnRhcmdldCxhLm9sZFZhbHVlKX19LGd8fChiLnByb3RvdHlwZS53YXRjaFN1YnRyZWU9ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oIlBvaW50ZXJFdmVudHNQb2x5ZmlsbDogTXV0YXRpb25PYnNlcnZlcnMgbm90IGZvdW5kLCB0b3VjaC1hY3Rpb24gd2lsbCBub3QgYmUgZHluYW1pY2FsbHkgZGV0ZWN0ZWQiKX0pLGEuSW5zdGFsbGVyPWJ9KHdpbmRvdy5Qb2ludGVyRXZlbnRzUG9seWZpbGwpLGZ1bmN0aW9uKGEpe3ZhciBiPWEuZGlzcGF0Y2hlcixjPWIucG9pbnRlcm1hcCxkPTI1LGU9e1BPSU5URVJfSUQ6MSxQT0lOVEVSX1RZUEU6Im1vdXNlIixldmVudHM6WyJtb3VzZWRvd24iLCJtb3VzZW1vdmUiLCJtb3VzZXVwIiwibW91c2VvdmVyIiwibW91c2VvdXQiXSxyZWdpc3RlcjpmdW5jdGlvbihhKXtiLmxpc3RlbihhLHRoaXMuZXZlbnRzKX0sdW5yZWdpc3RlcjpmdW5jdGlvbihhKXtiLnVubGlzdGVuKGEsdGhpcy5ldmVudHMpfSxsYXN0VG91Y2hlczpbXSxpc0V2ZW50U2ltdWxhdGVkRnJvbVRvdWNoOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYixjPXRoaXMubGFzdFRvdWNoZXMsZT1hLmNsaWVudFgsZj1hLmNsaWVudFksZz0wLGg9Yy5sZW5ndGg7aD5nJiYoYj1jW2ddKTtnKyspe3ZhciBpPU1hdGguYWJzKGUtYi54KSxqPU1hdGguYWJzKGYtYi55KTtpZihkPj1pJiZkPj1qKXJldHVybiEwfX0scHJlcGFyZUV2ZW50OmZ1bmN0aW9uKGEpe3ZhciBjPWIuY2xvbmVFdmVudChhKTtyZXR1cm4gYy5wb2ludGVySWQ9dGhpcy5QT0lOVEVSX0lELGMuaXNQcmltYXJ5PSEwLGMucG9pbnRlclR5cGU9dGhpcy5QT0lOVEVSX1RZUEUsY30sbW91c2Vkb3duOmZ1bmN0aW9uKGEpe2lmKCF0aGlzLmlzRXZlbnRTaW11bGF0ZWRGcm9tVG91Y2goYSkpe3ZhciBkPWMuaGFzKHRoaXMuUE9JTlRFUl9JRCk7ZCYmdGhpcy5jYW5jZWwoYSk7dmFyIGU9dGhpcy5wcmVwYXJlRXZlbnQoYSk7Yy5zZXQodGhpcy5QT0lOVEVSX0lELGEpLGIuZG93bihlKX19LG1vdXNlbW92ZTpmdW5jdGlvbihhKXtpZighdGhpcy5pc0V2ZW50U2ltdWxhdGVkRnJvbVRvdWNoKGEpKXt2YXIgYz10aGlzLnByZXBhcmVFdmVudChhKTtiLm1vdmUoYyl9fSxtb3VzZXVwOmZ1bmN0aW9uKGEpe2lmKCF0aGlzLmlzRXZlbnRTaW11bGF0ZWRGcm9tVG91Y2goYSkpe3ZhciBkPWMuZ2V0KHRoaXMuUE9JTlRFUl9JRCk7aWYoZCYmZC5idXR0b249PT1hLmJ1dHRvbil7dmFyIGU9dGhpcy5wcmVwYXJlRXZlbnQoYSk7Yi51cChlKSx0aGlzLmNsZWFudXBNb3VzZSgpfX19LG1vdXNlb3ZlcjpmdW5jdGlvbihhKXtpZighdGhpcy5pc0V2ZW50U2ltdWxhdGVkRnJvbVRvdWNoKGEpKXt2YXIgYz10aGlzLnByZXBhcmVFdmVudChhKTtiLmVudGVyT3ZlcihjKX19LG1vdXNlb3V0OmZ1bmN0aW9uKGEpe2lmKCF0aGlzLmlzRXZlbnRTaW11bGF0ZWRGcm9tVG91Y2goYSkpe3ZhciBjPXRoaXMucHJlcGFyZUV2ZW50KGEpO2IubGVhdmVPdXQoYyl9fSxjYW5jZWw6ZnVuY3Rpb24oYSl7dmFyIGM9dGhpcy5wcmVwYXJlRXZlbnQoYSk7Yi5jYW5jZWwoYyksdGhpcy5jbGVhbnVwTW91c2UoKX0sY2xlYW51cE1vdXNlOmZ1bmN0aW9uKCl7Yy5kZWxldGUodGhpcy5QT0lOVEVSX0lEKX19O2EubW91c2VFdmVudHM9ZX0od2luZG93LlBvaW50ZXJFdmVudHNQb2x5ZmlsbCksZnVuY3Rpb24oYSl7dmFyIGIsYz1hLmRpc3BhdGNoZXIsZD1hLmZpbmRUYXJnZXQsZT1hLnRhcmdldEZpbmRpbmcuYWxsU2hhZG93cy5iaW5kKGEudGFyZ2V0RmluZGluZyksZj1jLnBvaW50ZXJtYXAsZz1BcnJheS5wcm90b3R5cGUubWFwLmNhbGwuYmluZChBcnJheS5wcm90b3R5cGUubWFwKSxoPTI1MDAsaT0yMDAsaj0idG91Y2gtYWN0aW9uIixrPSJzdHJpbmciPT10eXBlb2YgZG9jdW1lbnQuaGVhZC5zdHlsZS50b3VjaEFjdGlvbixsPXtzY3JvbGxUeXBlOm5ldyBXZWFrTWFwLGV2ZW50czpbInRvdWNoc3RhcnQiLCJ0b3VjaG1vdmUiLCJ0b3VjaGVuZCIsInRvdWNoY2FuY2VsIl0scmVnaXN0ZXI6ZnVuY3Rpb24oYSl7az9jLmxpc3RlbihhLHRoaXMuZXZlbnRzKTpiLmVuYWJsZU9uU3VidHJlZShhKX0sdW5yZWdpc3RlcjpmdW5jdGlvbihhKXtrJiZjLnVubGlzdGVuKGEsdGhpcy5ldmVudHMpfSxlbGVtZW50QWRkZWQ6ZnVuY3Rpb24oYSl7dmFyIGI9YS5nZXRBdHRyaWJ1dGUoaiksZD10aGlzLnRvdWNoQWN0aW9uVG9TY3JvbGxUeXBlKGIpO2QmJih0aGlzLnNjcm9sbFR5cGUuc2V0KGEsZCksYy5saXN0ZW4oYSx0aGlzLmV2ZW50cyksZShhKS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3RoaXMuc2Nyb2xsVHlwZS5zZXQoYSxkKSxjLmxpc3RlbihhLHRoaXMuZXZlbnRzKX0sdGhpcykpfSxlbGVtZW50UmVtb3ZlZDpmdW5jdGlvbihhKXt0aGlzLnNjcm9sbFR5cGUuZGVsZXRlKGEpLGMudW5saXN0ZW4oYSx0aGlzLmV2ZW50cyksZShhKS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3RoaXMuc2Nyb2xsVHlwZS5kZWxldGUoYSksYy51bmxpc3RlbihhLHRoaXMuZXZlbnRzKX0sdGhpcyl9LGVsZW1lbnRDaGFuZ2VkOmZ1bmN0aW9uKGEsYil7dmFyIGM9YS5nZXRBdHRyaWJ1dGUoaiksZD10aGlzLnRvdWNoQWN0aW9uVG9TY3JvbGxUeXBlKGMpLGY9dGhpcy50b3VjaEFjdGlvblRvU2Nyb2xsVHlwZShiKTtkJiZmPyh0aGlzLnNjcm9sbFR5cGUuc2V0KGEsZCksZShhKS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3RoaXMuc2Nyb2xsVHlwZS5zZXQoYSxkKX0sdGhpcykpOmY/dGhpcy5lbGVtZW50UmVtb3ZlZChhKTpkJiZ0aGlzLmVsZW1lbnRBZGRlZChhKX0sc2Nyb2xsVHlwZXM6e0VNSVRURVI6Im5vbmUiLFhTQ1JPTExFUjoicGFuLXgiLFlTQ1JPTExFUjoicGFuLXkiLFNDUk9MTEVSOi9eKD86cGFuLXggcGFuLXkpfCg/OnBhbi15IHBhbi14KXxhdXRvJC99LHRvdWNoQWN0aW9uVG9TY3JvbGxUeXBlOmZ1bmN0aW9uKGEpe3ZhciBiPWEsYz10aGlzLnNjcm9sbFR5cGVzO3JldHVybiJub25lIj09PWI/Im5vbmUiOmI9PT1jLlhTQ1JPTExFUj8iWCI6Yj09PWMuWVNDUk9MTEVSPyJZIjpjLlNDUk9MTEVSLmV4ZWMoYik/IlhZIjp2b2lkIDB9LFBPSU5URVJfVFlQRToidG91Y2giLGZpcnN0VG91Y2g6bnVsbCxpc1ByaW1hcnlUb3VjaDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5maXJzdFRvdWNoPT09YS5pZGVudGlmaWVyfSxzZXRQcmltYXJ5VG91Y2g6ZnVuY3Rpb24oYSl7KDA9PWYuc2l6ZXx8MT09Zi5zaXplJiZmLmhhcygxKSkmJih0aGlzLmZpcnN0VG91Y2g9YS5pZGVudGlmaWVyLHRoaXMuZmlyc3RYWT17WDphLmNsaWVudFgsWTphLmNsaWVudFl9LHRoaXMuc2Nyb2xsaW5nPSExLHRoaXMuY2FuY2VsUmVzZXRDbGlja0NvdW50KCkpfSxyZW1vdmVQcmltYXJ5UG9pbnRlcjpmdW5jdGlvbihhKXthLmlzUHJpbWFyeSYmKHRoaXMuZmlyc3RUb3VjaD1udWxsLHRoaXMuZmlyc3RYWT1udWxsLHRoaXMucmVzZXRDbGlja0NvdW50KCkpfSxjbGlja0NvdW50OjAscmVzZXRJZDpudWxsLHJlc2V0Q2xpY2tDb3VudDpmdW5jdGlvbigpe3ZhciBhPWZ1bmN0aW9uKCl7dGhpcy5jbGlja0NvdW50PTAsdGhpcy5yZXNldElkPW51bGx9LmJpbmQodGhpcyk7dGhpcy5yZXNldElkPXNldFRpbWVvdXQoYSxpKX0sY2FuY2VsUmVzZXRDbGlja0NvdW50OmZ1bmN0aW9uKCl7dGhpcy5yZXNldElkJiZjbGVhclRpbWVvdXQodGhpcy5yZXNldElkKX0sdG91Y2hUb1BvaW50ZXI6ZnVuY3Rpb24oYSl7dmFyIGI9Yy5jbG9uZUV2ZW50KGEpO3JldHVybiBiLnBvaW50ZXJJZD1hLmlkZW50aWZpZXIrMixiLnRhcmdldD1kKGIpLGIuYnViYmxlcz0hMCxiLmNhbmNlbGFibGU9ITAsYi5kZXRhaWw9dGhpcy5jbGlja0NvdW50LGIuYnV0dG9uPTAsYi5idXR0b25zPTEsYi53aWR0aD1hLndlYmtpdFJhZGl1c1h8fGEucmFkaXVzWHx8MCxiLmhlaWdodD1hLndlYmtpdFJhZGl1c1l8fGEucmFkaXVzWXx8MCxiLnByZXNzdXJlPWEud2Via2l0Rm9yY2V8fGEuZm9yY2V8fC41LGIuaXNQcmltYXJ5PXRoaXMuaXNQcmltYXJ5VG91Y2goYSksYi5wb2ludGVyVHlwZT10aGlzLlBPSU5URVJfVFlQRSxifSxwcm9jZXNzVG91Y2hlczpmdW5jdGlvbihhLGIpe3ZhciBjPWEuY2hhbmdlZFRvdWNoZXMsZD1nKGMsdGhpcy50b3VjaFRvUG9pbnRlcix0aGlzKTtkLmZvckVhY2goYix0aGlzKX0sc2hvdWxkU2Nyb2xsOmZ1bmN0aW9uKGEpe2lmKHRoaXMuZmlyc3RYWSl7dmFyIGIsYz10aGlzLnNjcm9sbFR5cGUuZ2V0KGEuY3VycmVudFRhcmdldCk7aWYoIm5vbmUiPT09YyliPSExO2Vsc2UgaWYoIlhZIj09PWMpYj0hMDtlbHNle3ZhciBkPWEuY2hhbmdlZFRvdWNoZXNbMF0sZT1jLGY9IlkiPT09Yz8iWCI6IlkiLGc9TWF0aC5hYnMoZFsiY2xpZW50IitlXS10aGlzLmZpcnN0WFlbZV0pLGg9TWF0aC5hYnMoZFsiY2xpZW50IitmXS10aGlzLmZpcnN0WFlbZl0pO2I9Zz49aH1yZXR1cm4gdGhpcy5maXJzdFhZPW51bGwsYn19LGZpbmRUb3VjaDpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYyxkPTAsZT1hLmxlbmd0aDtlPmQmJihjPWFbZF0pO2QrKylpZihjLmlkZW50aWZpZXI9PT1iKXJldHVybiEwfSx2YWN1dW1Ub3VjaGVzOmZ1bmN0aW9uKGEpe3ZhciBiPWEudG91Y2hlcztpZihmLnNpemU+PWIubGVuZ3RoKXt2YXIgYz1bXTtmLmZvckVhY2goZnVuY3Rpb24oYSxkKXtpZigxIT09YSYmIXRoaXMuZmluZFRvdWNoKGIsYS0yKSl7dmFyIGU9ZC5vdXQ7Yy5wdXNoKHRoaXMudG91Y2hUb1BvaW50ZXIoZSkpfX0sdGhpcyksYy5mb3JFYWNoKHRoaXMuY2FuY2VsT3V0LHRoaXMpfX0sdG91Y2hzdGFydDpmdW5jdGlvbihhKXt0aGlzLnZhY3V1bVRvdWNoZXMoYSksdGhpcy5zZXRQcmltYXJ5VG91Y2goYS5jaGFuZ2VkVG91Y2hlc1swXSksdGhpcy5kZWR1cFN5bnRoTW91c2UoYSksdGhpcy5zY3JvbGxpbmd8fCh0aGlzLmNsaWNrQ291bnQrKyx0aGlzLnByb2Nlc3NUb3VjaGVzKGEsdGhpcy5vdmVyRG93bikpfSxvdmVyRG93bjpmdW5jdGlvbihhKXtmLnNldChhLnBvaW50ZXJJZCx7dGFyZ2V0OmEudGFyZ2V0LG91dDphLG91dFRhcmdldDphLnRhcmdldH0pLGMub3ZlcihhKSxjLmRvd24oYSl9LHRvdWNobW92ZTpmdW5jdGlvbihhKXt0aGlzLnNjcm9sbGluZ3x8KHRoaXMuc2hvdWxkU2Nyb2xsKGEpPyh0aGlzLnNjcm9sbGluZz0hMCx0aGlzLnRvdWNoY2FuY2VsKGEpKTooYS5wcmV2ZW50RGVmYXVsdCgpLHRoaXMucHJvY2Vzc1RvdWNoZXMoYSx0aGlzLm1vdmVPdmVyT3V0KSkpfSxtb3ZlT3Zlck91dDpmdW5jdGlvbihhKXt2YXIgYj1hLGQ9Zi5nZXQoYi5wb2ludGVySWQpO2lmKGQpe3ZhciBlPWQub3V0LGc9ZC5vdXRUYXJnZXQ7Yy5tb3ZlKGIpLGUmJmchPT1iLnRhcmdldCYmKGUucmVsYXRlZFRhcmdldD1iLnRhcmdldCxiLnJlbGF0ZWRUYXJnZXQ9ZyxlLnRhcmdldD1nLGIudGFyZ2V0PyhjLmxlYXZlT3V0KGUpLGMuZW50ZXJPdmVyKGIpKTooYi50YXJnZXQ9ZyxiLnJlbGF0ZWRUYXJnZXQ9bnVsbCx0aGlzLmNhbmNlbE91dChiKSkpLGQub3V0PWIsZC5vdXRUYXJnZXQ9Yi50YXJnZXR9fSx0b3VjaGVuZDpmdW5jdGlvbihhKXt0aGlzLmRlZHVwU3ludGhNb3VzZShhKSx0aGlzLnByb2Nlc3NUb3VjaGVzKGEsdGhpcy51cE91dCl9LHVwT3V0OmZ1bmN0aW9uKGEpe3RoaXMuc2Nyb2xsaW5nfHwoYy51cChhKSxjLm91dChhKSksdGhpcy5jbGVhblVwUG9pbnRlcihhKX0sdG91Y2hjYW5jZWw6ZnVuY3Rpb24oYSl7dGhpcy5wcm9jZXNzVG91Y2hlcyhhLHRoaXMuY2FuY2VsT3V0KX0sY2FuY2VsT3V0OmZ1bmN0aW9uKGEpe2MuY2FuY2VsKGEpLGMub3V0KGEpLHRoaXMuY2xlYW5VcFBvaW50ZXIoYSl9LGNsZWFuVXBQb2ludGVyOmZ1bmN0aW9uKGEpe2YuZGVsZXRlKGEucG9pbnRlcklkKSx0aGlzLnJlbW92ZVByaW1hcnlQb2ludGVyKGEpfSxkZWR1cFN5bnRoTW91c2U6ZnVuY3Rpb24oYil7dmFyIGM9YS5tb3VzZUV2ZW50cy5sYXN0VG91Y2hlcyxkPWIuY2hhbmdlZFRvdWNoZXNbMF07aWYodGhpcy5pc1ByaW1hcnlUb3VjaChkKSl7dmFyIGU9e3g6ZC5jbGllbnRYLHk6ZC5jbGllbnRZfTtjLnB1c2goZSk7dmFyIGY9ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLmluZGV4T2YoYik7Yz4tMSYmYS5zcGxpY2UoYywxKX0uYmluZChudWxsLGMsZSk7c2V0VGltZW91dChmLGgpfX19O2t8fChiPW5ldyBhLkluc3RhbGxlcihsLmVsZW1lbnRBZGRlZCxsLmVsZW1lbnRSZW1vdmVkLGwuZWxlbWVudENoYW5nZWQsbCkpLGEudG91Y2hFdmVudHM9bH0od2luZG93LlBvaW50ZXJFdmVudHNQb2x5ZmlsbCksZnVuY3Rpb24oYSl7dmFyIGI9YS5kaXNwYXRjaGVyLGM9Yi5wb2ludGVybWFwLGQ9d2luZG93Lk1TUG9pbnRlckV2ZW50JiYibnVtYmVyIj09dHlwZW9mIHdpbmRvdy5NU1BvaW50ZXJFdmVudC5NU1BPSU5URVJfVFlQRV9NT1VTRSxlPXtldmVudHM6WyJNU1BvaW50ZXJEb3duIiwiTVNQb2ludGVyTW92ZSIsIk1TUG9pbnRlclVwIiwiTVNQb2ludGVyT3V0IiwiTVNQb2ludGVyT3ZlciIsIk1TUG9pbnRlckNhbmNlbCIsIk1TR290UG9pbnRlckNhcHR1cmUiLCJNU0xvc3RQb2ludGVyQ2FwdHVyZSJdLHJlZ2lzdGVyOmZ1bmN0aW9uKGEpe2IubGlzdGVuKGEsdGhpcy5ldmVudHMpfSx1bnJlZ2lzdGVyOmZ1bmN0aW9uKGEpe2IudW5saXN0ZW4oYSx0aGlzLmV2ZW50cyl9LFBPSU5URVJfVFlQRVM6WyIiLCJ1bmF2YWlsYWJsZSIsInRvdWNoIiwicGVuIiwibW91c2UiXSxwcmVwYXJlRXZlbnQ6ZnVuY3Rpb24oYSl7dmFyIGM9YTtyZXR1cm4gZCYmKGM9Yi5jbG9uZUV2ZW50KGEpLGMucG9pbnRlclR5cGU9dGhpcy5QT0lOVEVSX1RZUEVTW2EucG9pbnRlclR5cGVdKSxjfSxjbGVhbnVwOmZ1bmN0aW9uKGEpe2MuZGVsZXRlKGEpfSxNU1BvaW50ZXJEb3duOmZ1bmN0aW9uKGEpe2Muc2V0KGEucG9pbnRlcklkLGEpO3ZhciBkPXRoaXMucHJlcGFyZUV2ZW50KGEpO2IuZG93bihkKX0sTVNQb2ludGVyTW92ZTpmdW5jdGlvbihhKXt2YXIgYz10aGlzLnByZXBhcmVFdmVudChhKTtiLm1vdmUoYyl9LE1TUG9pbnRlclVwOmZ1bmN0aW9uKGEpe3ZhciBjPXRoaXMucHJlcGFyZUV2ZW50KGEpO2IudXAoYyksdGhpcy5jbGVhbnVwKGEucG9pbnRlcklkKX0sTVNQb2ludGVyT3V0OmZ1bmN0aW9uKGEpe3ZhciBjPXRoaXMucHJlcGFyZUV2ZW50KGEpO2IubGVhdmVPdXQoYyl9LE1TUG9pbnRlck92ZXI6ZnVuY3Rpb24oYSl7dmFyIGM9dGhpcy5wcmVwYXJlRXZlbnQoYSk7Yi5lbnRlck92ZXIoYyl9LE1TUG9pbnRlckNhbmNlbDpmdW5jdGlvbihhKXt2YXIgYz10aGlzLnByZXBhcmVFdmVudChhKTtiLmNhbmNlbChjKSx0aGlzLmNsZWFudXAoYS5wb2ludGVySWQpfSxNU0xvc3RQb2ludGVyQ2FwdHVyZTpmdW5jdGlvbihhKXt2YXIgYz1iLm1ha2VFdmVudCgibG9zdHBvaW50ZXJjYXB0dXJlIixhKTtiLmRpc3BhdGNoRXZlbnQoYyl9LE1TR290UG9pbnRlckNhcHR1cmU6ZnVuY3Rpb24oYSl7dmFyIGM9Yi5tYWtlRXZlbnQoImdvdHBvaW50ZXJjYXB0dXJlIixhKTtiLmRpc3BhdGNoRXZlbnQoYyl9fTthLm1zRXZlbnRzPWV9KHdpbmRvdy5Qb2ludGVyRXZlbnRzUG9seWZpbGwpLGZ1bmN0aW9uKGEpe3ZhciBiPWEuZGlzcGF0Y2hlcjtpZih2b2lkIDA9PT13aW5kb3cubmF2aWdhdG9yLnBvaW50ZXJFbmFibGVkKXtpZihPYmplY3QuZGVmaW5lUHJvcGVydHkod2luZG93Lm5hdmlnYXRvciwicG9pbnRlckVuYWJsZWQiLHt2YWx1ZTohMCxlbnVtZXJhYmxlOiEwfSksd2luZG93Lm5hdmlnYXRvci5tc1BvaW50ZXJFbmFibGVkKXt2YXIgYz13aW5kb3cubmF2aWdhdG9yLm1zTWF4VG91Y2hQb2ludHM7T2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbmRvdy5uYXZpZ2F0b3IsIm1heFRvdWNoUG9pbnRzIix7dmFsdWU6YyxlbnVtZXJhYmxlOiEwfSksYi5yZWdpc3RlclNvdXJjZSgibXMiLGEubXNFdmVudHMpfWVsc2UgYi5yZWdpc3RlclNvdXJjZSgibW91c2UiLGEubW91c2VFdmVudHMpLHZvaWQgMCE9PXdpbmRvdy5vbnRvdWNoc3RhcnQmJmIucmVnaXN0ZXJTb3VyY2UoInRvdWNoIixhLnRvdWNoRXZlbnRzKTtiLnJlZ2lzdGVyKGRvY3VtZW50KX19KHdpbmRvdy5Qb2ludGVyRXZlbnRzUG9seWZpbGwpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7aWYoIWUucG9pbnRlcm1hcC5oYXMoYSkpdGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkUG9pbnRlcklkIil9dmFyIGMsZCxlPWEuZGlzcGF0Y2hlcixmPXdpbmRvdy5uYXZpZ2F0b3I7Zi5tc1BvaW50ZXJFbmFibGVkPyhjPWZ1bmN0aW9uKGEpe2IoYSksdGhpcy5tc1NldFBvaW50ZXJDYXB0dXJlKGEpfSxkPWZ1bmN0aW9uKGEpe2IoYSksdGhpcy5tc1JlbGVhc2VQb2ludGVyQ2FwdHVyZShhKX0pOihjPWZ1bmN0aW9uKGEpe2IoYSksZS5zZXRDYXB0dXJlKGEsdGhpcyl9LGQ9ZnVuY3Rpb24oYSl7YihhKSxlLnJlbGVhc2VDYXB0dXJlKGEsdGhpcyl9KSxFbGVtZW50LnByb3RvdHlwZS5zZXRQb2ludGVyQ2FwdHVyZXx8T2JqZWN0LmRlZmluZVByb3BlcnRpZXMoRWxlbWVudC5wcm90b3R5cGUse3NldFBvaW50ZXJDYXB0dXJlOnt2YWx1ZTpjfSxyZWxlYXNlUG9pbnRlckNhcHR1cmU6e3ZhbHVlOmR9fSl9KHdpbmRvdy5Qb2ludGVyRXZlbnRzUG9seWZpbGwpLFBvaW50ZXJHZXN0dXJlRXZlbnQucHJvdG90eXBlLnByZXZlbnRUYXA9ZnVuY3Rpb24oKXt0aGlzLnRhcFByZXZlbnRlZD0hMH0sZnVuY3Rpb24oYSl7YT1hfHx7fSxhLnV0aWxzPXtMQ0E6e2ZpbmQ6ZnVuY3Rpb24oYSxiKXtpZihhPT09YilyZXR1cm4gYTtpZihhLmNvbnRhaW5zKXtpZihhLmNvbnRhaW5zKGIpKXJldHVybiBhO2lmKGIuY29udGFpbnMoYSkpcmV0dXJuIGJ9dmFyIGM9dGhpcy5kZXB0aChhKSxkPXRoaXMuZGVwdGgoYiksZT1jLWQ7Zm9yKGU+MD9hPXRoaXMud2FsayhhLGUpOmI9dGhpcy53YWxrKGIsLWUpO2EmJmImJmEhPT1iOylhPXRoaXMud2FsayhhLDEpLGI9dGhpcy53YWxrKGIsMSk7cmV0dXJuIGF9LHdhbGs6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9MDtiPmM7YysrKWE9YS5wYXJlbnROb2RlO3JldHVybiBhfSxkZXB0aDpmdW5jdGlvbihhKXtmb3IodmFyIGI9MDthOyliKyssYT1hLnBhcmVudE5vZGU7cmV0dXJuIGJ9fX0sYS5maW5kTENBPWZ1bmN0aW9uKGIsYyl7cmV0dXJuIGEudXRpbHMuTENBLmZpbmQoYixjKX0sd2luZG93LlBvaW50ZXJHZXN0dXJlcz1hfSh3aW5kb3cuUG9pbnRlckdlc3R1cmVzKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKCl7dGhpcy5pZHM9W10sdGhpcy5wb2ludGVycz1bXX1iLnByb3RvdHlwZT17c2V0OmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5pZHMuaW5kZXhPZihhKTtjPi0xP3RoaXMucG9pbnRlcnNbY109YjoodGhpcy5pZHMucHVzaChhKSx0aGlzLnBvaW50ZXJzLnB1c2goYikpfSxoYXM6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuaWRzLmluZGV4T2YoYSk+LTF9LCJkZWxldGUiOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuaWRzLmluZGV4T2YoYSk7Yj4tMSYmKHRoaXMuaWRzLnNwbGljZShiLDEpLHRoaXMucG9pbnRlcnMuc3BsaWNlKGIsMSkpfSxnZXQ6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5pZHMuaW5kZXhPZihhKTtyZXR1cm4gdGhpcy5wb2ludGVyc1tiXX0sZ2V0IHNpemUoKXtyZXR1cm4gdGhpcy5wb2ludGVycy5sZW5ndGh9LGNsZWFyOmZ1bmN0aW9uKCl7dGhpcy5pZHMubGVuZ3RoPTAsdGhpcy5wb2ludGVycy5sZW5ndGg9MH19LHdpbmRvdy5NYXAmJihiPXdpbmRvdy5NYXApLGEuUG9pbnRlck1hcD1ifSh3aW5kb3cuUG9pbnRlckdlc3R1cmVzKSxmdW5jdGlvbihhKXt2YXIgYj1bImJ1YmJsZXMiLCJjYW5jZWxhYmxlIiwidmlldyIsImRldGFpbCIsInNjcmVlblgiLCJzY3JlZW5ZIiwiY2xpZW50WCIsImNsaWVudFkiLCJjdHJsS2V5IiwiYWx0S2V5Iiwic2hpZnRLZXkiLCJtZXRhS2V5IiwiYnV0dG9uIiwicmVsYXRlZFRhcmdldCIsImJ1dHRvbnMiLCJwb2ludGVySWQiLCJ3aWR0aCIsImhlaWdodCIsInByZXNzdXJlIiwidGlsdFgiLCJ0aWx0WSIsInBvaW50ZXJUeXBlIiwiaHdUaW1lc3RhbXAiLCJpc1ByaW1hcnkiLCJ0eXBlIiwidGFyZ2V0IiwiY3VycmVudFRhcmdldCIsInNjcmVlblgiLCJzY3JlZW5ZIiwicGFnZVgiLCJwYWdlWSJdLGM9WyExLCExLG51bGwsbnVsbCwwLDAsMCwwLCExLCExLCExLCExLDAsbnVsbCwwLDAsMCwwLDAsMCwwLCIiLDAsITEsIiIsbnVsbCxudWxsLDAsMCwwLDBdLGQ9e2hhbmRsZWRFdmVudHM6bmV3IFdlYWtNYXAsdGFyZ2V0czpuZXcgV2Vha01hcCxoYW5kbGVyczp7fSxyZWNvZ25pemVyczp7fSxldmVudHM6e30scmVnaXN0ZXJSZWNvZ25pemVyOmZ1bmN0aW9uKGEsYil7dmFyIGM9Yjt0aGlzLnJlY29nbml6ZXJzW2FdPWMsYy5ldmVudHMuZm9yRWFjaChmdW5jdGlvbihhKXtpZihjW2FdKXt0aGlzLmV2ZW50c1thXT0hMDt2YXIgYj1jW2FdLmJpbmQoYyk7dGhpcy5hZGRIYW5kbGVyKGEsYil9fSx0aGlzKX0sYWRkSGFuZGxlcjpmdW5jdGlvbihhLGIpe3ZhciBjPWE7dGhpcy5oYW5kbGVyc1tjXXx8KHRoaXMuaGFuZGxlcnNbY109W10pLHRoaXMuaGFuZGxlcnNbY10ucHVzaChiKX0scmVnaXN0ZXJUYXJnZXQ6ZnVuY3Rpb24oYSl7dGhpcy5saXN0ZW4oT2JqZWN0LmtleXModGhpcy5ldmVudHMpLGEpfSx1bnJlZ2lzdGVyVGFyZ2V0OmZ1bmN0aW9uKGEpe3RoaXMudW5saXN0ZW4oT2JqZWN0LmtleXModGhpcy5ldmVudHMpLGEpfSxldmVudEhhbmRsZXI6ZnVuY3Rpb24oYSl7aWYoIXRoaXMuaGFuZGxlZEV2ZW50cy5nZXQoYSkpe3ZhciBiPWEudHlwZSxjPXRoaXMuaGFuZGxlcnNbYl07YyYmdGhpcy5tYWtlUXVldWUoYyxhKSx0aGlzLmhhbmRsZWRFdmVudHMuc2V0KGEsITApfX0sbWFrZVF1ZXVlOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5jbG9uZUV2ZW50KGIpO3NldFRpbWVvdXQodGhpcy5ydW5RdWV1ZS5iaW5kKHRoaXMsYSxjKSwwKX0scnVuUXVldWU6ZnVuY3Rpb24oYSxiKXt0aGlzLmN1cnJlbnRQb2ludGVySWQ9Yi5wb2ludGVySWQ7Zm9yKHZhciBjLGQ9MCxlPWEubGVuZ3RoO2U+ZCYmKGM9YVtkXSk7ZCsrKWMoYik7dGhpcy5jdXJyZW50UG9pbnRlcklkPTB9LGxpc3RlbjpmdW5jdGlvbihhLGIpe2EuZm9yRWFjaChmdW5jdGlvbihhKXt0aGlzLmFkZEV2ZW50KGEsdGhpcy5ib3VuZEhhbmRsZXIsITEsYil9LHRoaXMpfSx1bmxpc3RlbjpmdW5jdGlvbihhKXthLmZvckVhY2goZnVuY3Rpb24oYSl7dGhpcy5yZW1vdmVFdmVudChhLHRoaXMuYm91bmRIYW5kbGVyLCExLGluVGFyZ2V0KX0sdGhpcyl9LGFkZEV2ZW50OmZ1bmN0aW9uKGEsYixjLGQpe2QuYWRkRXZlbnRMaXN0ZW5lcihhLGIsYyl9LHJlbW92ZUV2ZW50OmZ1bmN0aW9uKGEsYixjLGQpe2QucmVtb3ZlRXZlbnRMaXN0ZW5lcihhLGIsYyl9LG1ha2VFdmVudDpmdW5jdGlvbihhLGIpe3JldHVybiBuZXcgUG9pbnRlckdlc3R1cmVFdmVudChhLGIpfSxjbG9uZUV2ZW50OmZ1bmN0aW9uKGEpe2Zvcih2YXIgZCxlPXt9LGY9MDtmPGIubGVuZ3RoO2YrKylkPWJbZl0sZVtkXT1hW2RdfHxjW2ZdO3JldHVybiBlfSxkaXNwYXRjaEV2ZW50OmZ1bmN0aW9uKGEsYil7dmFyIGM9Ynx8dGhpcy50YXJnZXRzLmdldChhKTtjJiYoYy5kaXNwYXRjaEV2ZW50KGEpLGEudGFwUHJldmVudGVkJiZ0aGlzLnByZXZlbnRUYXAodGhpcy5jdXJyZW50UG9pbnRlcklkKSl9LGFzeW5jRGlzcGF0Y2hFdmVudDpmdW5jdGlvbihhLGIpe3ZhciBjPWZ1bmN0aW9uKCl7dGhpcy5kaXNwYXRjaEV2ZW50KGEsYil9LmJpbmQodGhpcyk7c2V0VGltZW91dChjLDApfSxwcmV2ZW50VGFwOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMucmVjb2duaXplcnMudGFwO2ImJmIucHJldmVudFRhcChhKX19O2QuYm91bmRIYW5kbGVyPWQuZXZlbnRIYW5kbGVyLmJpbmQoZCksYS5kaXNwYXRjaGVyPWQ7dmFyIGU9W10sZj0hMTthLnJlZ2lzdGVyPWZ1bmN0aW9uKGIpe2lmKGYpe3ZhciBjPXdpbmRvdy5Qb2ludGVyRXZlbnRzUG9seWZpbGw7YyYmYy5yZWdpc3RlcihiKSxhLmRpc3BhdGNoZXIucmVnaXN0ZXJUYXJnZXQoYil9ZWxzZSBlLnB1c2goYil9LGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoIkRPTUNvbnRlbnRMb2FkZWQiLGZ1bmN0aW9uKCl7Zj0hMCxlLnB1c2goZG9jdW1lbnQpLGUuZm9yRWFjaChhLnJlZ2lzdGVyKX0pfSh3aW5kb3cuUG9pbnRlckdlc3R1cmVzKSxmdW5jdGlvbihhKXt2YXIgYj1hLmRpc3BhdGNoZXIsYz17SE9MRF9ERUxBWToyMDAsV0lHR0xFX1RIUkVTSE9MRDoxNixldmVudHM6WyJwb2ludGVyZG93biIsInBvaW50ZXJtb3ZlIiwicG9pbnRlcnVwIiwicG9pbnRlcmNhbmNlbCJdLGhlbGRQb2ludGVyOm51bGwsaG9sZEpvYjpudWxsLHB1bHNlOmZ1bmN0aW9uKCl7dmFyIGE9RGF0ZS5ub3coKS10aGlzLmhlbGRQb2ludGVyLnRpbWVTdGFtcCxiPXRoaXMuaGVsZD8iaG9sZHB1bHNlIjoiaG9sZCI7dGhpcy5maXJlSG9sZChiLGEpLHRoaXMuaGVsZD0hMH0sY2FuY2VsOmZ1bmN0aW9uKCl7Y2xlYXJJbnRlcnZhbCh0aGlzLmhvbGRKb2IpLHRoaXMuaGVsZCYmdGhpcy5maXJlSG9sZCgicmVsZWFzZSIpLHRoaXMuaGVsZD0hMSx0aGlzLmhlbGRQb2ludGVyPW51bGwsdGhpcy50YXJnZXQ9bnVsbCx0aGlzLmhvbGRKb2I9bnVsbH0scG9pbnRlcmRvd246ZnVuY3Rpb24oYSl7YS5pc1ByaW1hcnkmJiF0aGlzLmhlbGRQb2ludGVyJiYodGhpcy5oZWxkUG9pbnRlcj1hLHRoaXMudGFyZ2V0PWEudGFyZ2V0LHRoaXMuaG9sZEpvYj1zZXRJbnRlcnZhbCh0aGlzLnB1bHNlLmJpbmQodGhpcyksdGhpcy5IT0xEX0RFTEFZKSl9LHBvaW50ZXJ1cDpmdW5jdGlvbihhKXt0aGlzLmhlbGRQb2ludGVyJiZ0aGlzLmhlbGRQb2ludGVyLnBvaW50ZXJJZD09PWEucG9pbnRlcklkJiZ0aGlzLmNhbmNlbCgpfSxwb2ludGVyY2FuY2VsOmZ1bmN0aW9uKCl7dGhpcy5jYW5jZWwoKX0scG9pbnRlcm1vdmU6ZnVuY3Rpb24oYSl7aWYodGhpcy5oZWxkUG9pbnRlciYmdGhpcy5oZWxkUG9pbnRlci5wb2ludGVySWQ9PT1hLnBvaW50ZXJJZCl7dmFyIGI9YS5jbGllbnRYLXRoaXMuaGVsZFBvaW50ZXIuY2xpZW50WCxjPWEuY2xpZW50WS10aGlzLmhlbGRQb2ludGVyLmNsaWVudFk7YipiK2MqYz50aGlzLldJR0dMRV9USFJFU0hPTEQmJnRoaXMuY2FuY2VsKCl9fSxmaXJlSG9sZDpmdW5jdGlvbihhLGMpe3ZhciBkPXtwb2ludGVyVHlwZTp0aGlzLmhlbGRQb2ludGVyLnBvaW50ZXJUeXBlfTtjJiYoZC5ob2xkVGltZT1jKTt2YXIgZT1iLm1ha2VFdmVudChhLGQpO2IuZGlzcGF0Y2hFdmVudChlLHRoaXMudGFyZ2V0KSxlLnRhcFByZXZlbnRlZCYmYi5wcmV2ZW50VGFwKHRoaXMuaGVsZFBvaW50ZXIucG9pbnRlcklkKX19O2IucmVnaXN0ZXJSZWNvZ25pemVyKCJob2xkIixjKX0od2luZG93LlBvaW50ZXJHZXN0dXJlcyksZnVuY3Rpb24oYSl7dmFyIGI9YS5kaXNwYXRjaGVyLGM9bmV3IGEuUG9pbnRlck1hcCxkPXtldmVudHM6WyJwb2ludGVyZG93biIsInBvaW50ZXJtb3ZlIiwicG9pbnRlcnVwIiwicG9pbnRlcmNhbmNlbCJdLFdJR0dMRV9USFJFU0hPTEQ6NCxjbGFtcERpcjpmdW5jdGlvbihhKXtyZXR1cm4gYT4wPzE6LTF9LGNhbGNQb3NpdGlvbkRlbHRhOmZ1bmN0aW9uKGEsYil7dmFyIGM9MCxkPTA7cmV0dXJuIGEmJmImJihjPWIucGFnZVgtYS5wYWdlWCxkPWIucGFnZVktYS5wYWdlWSkse3g6Yyx5OmR9fSxmaXJlVHJhY2s6ZnVuY3Rpb24oYSxjLGQpe3ZhciBlPWQsZj10aGlzLmNhbGNQb3NpdGlvbkRlbHRhKGUuZG93bkV2ZW50LGMpLGc9dGhpcy5jYWxjUG9zaXRpb25EZWx0YShlLmxhc3RNb3ZlRXZlbnQsYyk7Zy54JiYoZS54RGlyZWN0aW9uPXRoaXMuY2xhbXBEaXIoZy54KSksZy55JiYoZS55RGlyZWN0aW9uPXRoaXMuY2xhbXBEaXIoZy55KSk7dmFyIGg9e2R4OmYueCxkeTpmLnksZGR4OmcueCxkZHk6Zy55LGNsaWVudFg6Yy5jbGllbnRYLGNsaWVudFk6Yy5jbGllbnRZLHBhZ2VYOmMucGFnZVgscGFnZVk6Yy5wYWdlWSxzY3JlZW5YOmMuc2NyZWVuWCxzY3JlZW5ZOmMuc2NyZWVuWSx4RGlyZWN0aW9uOmUueERpcmVjdGlvbix5RGlyZWN0aW9uOmUueURpcmVjdGlvbix0cmFja0luZm86ZS50cmFja0luZm8scG9pbnRlclR5cGU6Yy5wb2ludGVyVHlwZX07InRyYWNrZW5kIj09PWEmJihoLl9yZWxlYXNlVGFyZ2V0PWMudGFyZ2V0KTt2YXIgaT1iLm1ha2VFdmVudChhLGgpO2UubGFzdE1vdmVFdmVudD1jLGIuZGlzcGF0Y2hFdmVudChpLGUuZG93blRhcmdldCl9LHBvaW50ZXJkb3duOmZ1bmN0aW9uKGEpe2lmKGEuaXNQcmltYXJ5JiYoIm1vdXNlIj09PWEucG9pbnRlclR5cGU/MT09PWEuYnV0dG9uczohMCkpe3ZhciBiPXtkb3duRXZlbnQ6YSxkb3duVGFyZ2V0OmEudGFyZ2V0LHRyYWNrSW5mbzp7fSxsYXN0TW92ZUV2ZW50Om51bGwseERpcmVjdGlvbjowLHlEaXJlY3Rpb246MCx0cmFja2luZzohMX07Yy5zZXQoYS5wb2ludGVySWQsYil9fSxwb2ludGVybW92ZTpmdW5jdGlvbihhKXt2YXIgYj1jLmdldChhLnBvaW50ZXJJZCk7aWYoYilpZihiLnRyYWNraW5nKXRoaXMuZmlyZVRyYWNrKCJ0cmFjayIsYSxiKTtlbHNle3ZhciBkPXRoaXMuY2FsY1Bvc2l0aW9uRGVsdGEoYi5kb3duRXZlbnQsYSksZT1kLngqZC54K2QueSpkLnk7ZT50aGlzLldJR0dMRV9USFJFU0hPTEQmJihiLnRyYWNraW5nPSEwLHRoaXMuZmlyZVRyYWNrKCJ0cmFja3N0YXJ0IixiLmRvd25FdmVudCxiKSx0aGlzLmZpcmVUcmFjaygidHJhY2siLGEsYikpfX0scG9pbnRlcnVwOmZ1bmN0aW9uKGEpe3ZhciBiPWMuZ2V0KGEucG9pbnRlcklkKTtiJiYoYi50cmFja2luZyYmdGhpcy5maXJlVHJhY2soInRyYWNrZW5kIixhLGIpLGMuZGVsZXRlKGEucG9pbnRlcklkKSl9LHBvaW50ZXJjYW5jZWw6ZnVuY3Rpb24oYSl7dGhpcy5wb2ludGVydXAoYSl9fTtiLnJlZ2lzdGVyUmVjb2duaXplcigidHJhY2siLGQpfSh3aW5kb3cuUG9pbnRlckdlc3R1cmVzKSxmdW5jdGlvbihhKXt2YXIgYj1hLmRpc3BhdGNoZXIsYz17TUlOX1ZFTE9DSVRZOi41LE1BWF9RVUVVRTo0LG1vdmVRdWV1ZTpbXSx0YXJnZXQ6bnVsbCxwb2ludGVySWQ6bnVsbCxldmVudHM6WyJwb2ludGVyZG93biIsInBvaW50ZXJtb3ZlIiwicG9pbnRlcnVwIiwicG9pbnRlcmNhbmNlbCJdLHBvaW50ZXJkb3duOmZ1bmN0aW9uKGEpe2EuaXNQcmltYXJ5JiYhdGhpcy5wb2ludGVySWQmJih0aGlzLnBvaW50ZXJJZD1hLnBvaW50ZXJJZCx0aGlzLnRhcmdldD1hLnRhcmdldCx0aGlzLmFkZE1vdmUoYSkpfSxwb2ludGVybW92ZTpmdW5jdGlvbihhKXthLnBvaW50ZXJJZD09PXRoaXMucG9pbnRlcklkJiZ0aGlzLmFkZE1vdmUoYSl9LHBvaW50ZXJ1cDpmdW5jdGlvbihhKXthLnBvaW50ZXJJZD09PXRoaXMucG9pbnRlcklkJiZ0aGlzLmZpcmVGbGljayhhKSx0aGlzLmNsZWFudXAoKX0scG9pbnRlcmNhbmNlbDpmdW5jdGlvbigpe3RoaXMuY2xlYW51cCgpfSxjbGVhbnVwOmZ1bmN0aW9uKCl7dGhpcy5tb3ZlUXVldWU9W10sdGhpcy50YXJnZXQ9bnVsbCx0aGlzLnBvaW50ZXJJZD1udWxsfSxhZGRNb3ZlOmZ1bmN0aW9uKGEpe3RoaXMubW92ZVF1ZXVlLmxlbmd0aD49dGhpcy5NQVhfUVVFVUUmJnRoaXMubW92ZVF1ZXVlLnNoaWZ0KCksdGhpcy5tb3ZlUXVldWUucHVzaChhKX0sZmlyZUZsaWNrOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYyxkLGUsZixnLGgsaSxqPWEsaz10aGlzLm1vdmVRdWV1ZS5sZW5ndGgsbD0wLG09MCxuPTAsbz0wO2s+byYmKGk9dGhpcy5tb3ZlUXVldWVbb10pO28rKyljPWoudGltZVN0YW1wLWkudGltZVN0YW1wLGQ9ai5jbGllbnRYLWkuY2xpZW50WCxlPWouY2xpZW50WS1pLmNsaWVudFksZj1kL2MsZz1lL2MsaD1NYXRoLnNxcnQoZipmK2cqZyksaD5uJiYobD1mLG09ZyxuPWgpO3ZhciBwPU1hdGguYWJzKGwpPk1hdGguYWJzKG0pPyJ4IjoieSIscT10aGlzLmNhbGNBbmdsZShsLG0pO2lmKE1hdGguYWJzKG4pPj10aGlzLk1JTl9WRUxPQ0lUWSl7dmFyIHI9Yi5tYWtlRXZlbnQoImZsaWNrIix7eFZlbG9jaXR5OmwseVZlbG9jaXR5Om0sdmVsb2NpdHk6bixhbmdsZTpxLG1ham9yQXhpczpwLHBvaW50ZXJUeXBlOmEucG9pbnRlclR5cGV9KTtiLmRpc3BhdGNoRXZlbnQocix0aGlzLnRhcmdldCl9fSxjYWxjQW5nbGU6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gMTgwKk1hdGguYXRhbjIoYixhKS9NYXRoLlBJfX07Yi5yZWdpc3RlclJlY29nbml6ZXIoImZsaWNrIixjKX0od2luZG93LlBvaW50ZXJHZXN0dXJlcyksZnVuY3Rpb24oYSl7dmFyIGI9YS5kaXNwYXRjaGVyLGM9bmV3IGEuUG9pbnRlck1hcCxkPXtldmVudHM6WyJwb2ludGVyZG93biIsInBvaW50ZXJtb3ZlIiwicG9pbnRlcnVwIiwicG9pbnRlcmNhbmNlbCIsImtleXVwIl0scG9pbnRlcmRvd246ZnVuY3Rpb24oYSl7YS5pc1ByaW1hcnkmJiFhLnRhcFByZXZlbnRlZCYmYy5zZXQoYS5wb2ludGVySWQse3RhcmdldDphLnRhcmdldCx4OmEuY2xpZW50WCx5OmEuY2xpZW50WX0pfSxwb2ludGVybW92ZTpmdW5jdGlvbihhKXtpZihhLmlzUHJpbWFyeSl7dmFyIGI9Yy5nZXQoYS5wb2ludGVySWQpO2ImJmEudGFwUHJldmVudGVkJiZjLmRlbGV0ZShhLnBvaW50ZXJJZCl9fSxwb2ludGVydXA6ZnVuY3Rpb24oZCl7dmFyIGU9Yy5nZXQoZC5wb2ludGVySWQpO2lmKGUmJiFkLnRhcFByZXZlbnRlZCl7dmFyIGY9YS5maW5kTENBKGUudGFyZ2V0LGQudGFyZ2V0KTtpZihmKXt2YXIgZz1iLm1ha2VFdmVudCgidGFwIix7eDpkLmNsaWVudFgseTpkLmNsaWVudFksZGV0YWlsOmQuZGV0YWlsLHBvaW50ZXJUeXBlOmQucG9pbnRlclR5cGV9KTtiLmRpc3BhdGNoRXZlbnQoZyxmKX19Yy5kZWxldGUoZC5wb2ludGVySWQpfSxwb2ludGVyY2FuY2VsOmZ1bmN0aW9uKGEpe2MuZGVsZXRlKGEucG9pbnRlcklkKX0sa2V5dXA6ZnVuY3Rpb24oYSl7dmFyIGM9YS5rZXlDb2RlO2lmKDMyPT09Yyl7dmFyIGQ9YS50YXJnZXQ7ZCBpbnN0YW5jZW9mIEhUTUxJbnB1dEVsZW1lbnR8fGQgaW5zdGFuY2VvZiBIVE1MVGV4dEFyZWFFbGVtZW50fHxiLmRpc3BhdGNoRXZlbnQoYi5tYWtlRXZlbnQoInRhcCIse3g6MCx5OjAsZGV0YWlsOjAscG9pbnRlclR5cGU6InVuYXZhaWxhYmxlIn0pLGQpfX0scHJldmVudFRhcDpmdW5jdGlvbihhKXtjLmRlbGV0ZShhKX19O2IucmVnaXN0ZXJSZWNvZ25pemVyKCJ0YXAiLGQpfSh3aW5kb3cuUG9pbnRlckdlc3R1cmVzKSxQb2x5bWVyPXt9LGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoKXt2YXIgYT1Qb2x5bWVyLnZlaWxlZEVsZW1lbnRzO2lmKGEpZm9yKHZhciBiLGQ9MCxlPWEubGVuZ3RoO2U+ZCYmKGI9YVtkXSk7ZCsrKWMoYil9ZnVuY3Rpb24gYyhhKXtmb3IodmFyIGIsYz1kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGEpLGQ9MCxmPWMubGVuZ3RoO2Y+ZCYmKGI9Y1tkXSk7ZCsrKWIuY2xhc3NMaXN0LmFkZChlKX1mdW5jdGlvbiBkKCl7cmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZ1bmN0aW9uKCl7Zm9yKHZhciBhLGI9ZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgiLiIrZSksYz0wLGQ9Yi5sZW5ndGg7ZD5jJiYoYT1iW2NdKTtjKyspYS5jbGFzc0xpc3QuYWRkKGYpLGEuY2xhc3NMaXN0LnJlbW92ZShlKTtpZihiLmxlbmd0aCl7dmFyIGc9ZnVuY3Rpb24oKXtmb3IodmFyIGEsYz0wLGQ9Yi5sZW5ndGg7ZD5jJiYoYT1iW2NdKTtjKyspYS5jbGFzc0xpc3QucmVtb3ZlKGYpO2RvY3VtZW50LmJvZHkucmVtb3ZlRXZlbnRMaXN0ZW5lcihqLGcsITEpfTtkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoaixnLCExKX19KX1hLnZlaWxlZEVsZW1lbnRzPVsiYm9keSJdO3ZhciBlPSJwb2x5bWVyLXZlaWxlZCIsZj0icG9seW1lci11bnZlaWwiLGc9LjMsaD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzdHlsZSIpO2gudGV4dENvbnRlbnQ9Ii4iK2UrIiB7IG9wYWNpdHk6IDA7IH0gXG4uIitmKyJ7IC13ZWJraXQtdHJhbnNpdGlvbjogb3BhY2l0eSAiK2crInM7IHRyYW5zaXRpb246IG9wYWNpdHkgIitnKyJzOyB9XG4iO3ZhciBpPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoImhlYWQiKTtpLmluc2VydEJlZm9yZShoLGkuZmlyc3RDaGlsZCk7dmFyIGo9dm9pZCAwIT09ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlLndlYmtpdFRyYW5zaXRpb24/IndlYmtpdFRyYW5zaXRpb25FbmQiOiJ0cmFuc2l0aW9uZW5kIjtkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJET01Db250ZW50TG9hZGVkIixiKSx3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigiV2ViQ29tcG9uZW50c1JlYWR5IixkKSxhLnVudmVpbEVsZW1lbnRzPWR9KFBvbHltZXIpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSxiKXtyZXR1cm4gYSYmYiYmT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoYikuZm9yRWFjaChmdW5jdGlvbihjKXt2YXIgZD1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGIsYyk7ZCYmKE9iamVjdC5kZWZpbmVQcm9wZXJ0eShhLGMsZCksImZ1bmN0aW9uIj09dHlwZW9mIGQudmFsdWUmJihkLnZhbHVlLm5vbT1jKSl9KSxhfWEuZXh0ZW5kPWJ9KFBvbHltZXIpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSxiLGQpe3JldHVybiBhP2Euc3RvcCgpOmE9bmV3IGModGhpcyksYS5nbyhiLGQpLGF9dmFyIGM9ZnVuY3Rpb24oYSl7dGhpcy5jb250ZXh0PWF9O2MucHJvdG90eXBlPXtnbzpmdW5jdGlvbihhLGIpe3RoaXMuY2FsbGJhY2s9YSx0aGlzLmhhbmRsZT1zZXRUaW1lb3V0KHRoaXMuY29tcGxldGUuYmluZCh0aGlzKSxiKX0sc3RvcDpmdW5jdGlvbigpe3RoaXMuaGFuZGxlJiYoY2xlYXJUaW1lb3V0KHRoaXMuaGFuZGxlKSx0aGlzLmhhbmRsZT1udWxsKX0sY29tcGxldGU6ZnVuY3Rpb24oKXt0aGlzLmhhbmRsZSYmKHRoaXMuc3RvcCgpLHRoaXMuY2FsbGJhY2suY2FsbCh0aGlzLmNvbnRleHQpKX19LGEuam9iPWJ9KFBvbHltZXIpLGZ1bmN0aW9uKCl7dmFyIGE9e307SFRNTEVsZW1lbnQucmVnaXN0ZXI9ZnVuY3Rpb24oYixjKXthW2JdPWN9LEhUTUxFbGVtZW50LmdldFByb3RvdHlwZUZvclRhZz1mdW5jdGlvbihiKXt2YXIgYz1iP2FbYl06SFRNTEVsZW1lbnQucHJvdG90eXBlO3JldHVybiBjfHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZG9jdW1lbnQuY3JlYXRlRWxlbWVudChiKSl9O3ZhciBiPUV2ZW50LnByb3RvdHlwZS5zdG9wUHJvcGFnYXRpb247RXZlbnQucHJvdG90eXBlLnN0b3BQcm9wYWdhdGlvbj1mdW5jdGlvbigpe3RoaXMuY2FuY2VsQnViYmxlPSEwLGIuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxIVE1MSW1wb3J0cy5pbXBvcnRlci5wcmVsb2FkU2VsZWN0b3JzKz0iLCBwb2x5bWVyLWVsZW1lbnQgbGlua1tyZWw9c3R5bGVzaGVldF0ifShQb2x5bWVyKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEpe3ZhciBjPWIuY2FsbGVyLGc9Yy5ub20saD1jLl9zdXBlcjtpZihofHwoZ3x8KGc9Yy5ub209ZS5jYWxsKHRoaXMsYykpLGd8fGNvbnNvbGUud2FybigiY2FsbGVkIHN1cGVyKCkgb24gYSBtZXRob2Qgbm90IGluc3RhbGxlZCBkZWNsYXJhdGl2ZWx5IChoYXMgbm8gLm5vbSBwcm9wZXJ0eSkiKSxoPWQoYyxnLGYodGhpcykpKSxoKXt2YXIgaT1oW2ddO3JldHVybiBpLl9zdXBlcnx8ZChpLGcsaCksaS5hcHBseSh0aGlzLGF8fFtdKX19ZnVuY3Rpb24gYyhhLGIsYyl7Zm9yKDthOyl7aWYoYVtiXSE9PWMmJmFbYl0pcmV0dXJuIGE7YT1mKGEpfX1mdW5jdGlvbiBkKGEsYixkKXtyZXR1cm4gYS5fc3VwZXI9YyhkLGIsYSksYS5fc3VwZXImJihhLl9zdXBlcltiXS5ub209YiksYS5fc3VwZXJ9ZnVuY3Rpb24gZShhKXtmb3IodmFyIGI9dGhpcy5fX3Byb3RvX187YiYmYiE9PUhUTUxFbGVtZW50LnByb3RvdHlwZTspe2Zvcih2YXIgYyxkPU9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGIpLGU9MCxmPWQubGVuZ3RoO2Y+ZSYmKGM9ZFtlXSk7ZSsrKXt2YXIgZz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGIsYyk7aWYoImZ1bmN0aW9uIj09dHlwZW9mIGcudmFsdWUmJmcudmFsdWU9PT1hKXJldHVybiBjfWI9Yi5fX3Byb3RvX199fWZ1bmN0aW9uIGYoYSl7cmV0dXJuIGEuX19wcm90b19ffWEuc3VwZXI9Yn0oUG9seW1lciksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhLGIpe3ZhciBkPXR5cGVvZiBiO3JldHVybiBiIGluc3RhbmNlb2YgRGF0ZSYmKGQ9ImRhdGUiKSxjW2RdKGEsYil9dmFyIGM9e3N0cmluZzpmdW5jdGlvbihhKXtyZXR1cm4gYX0sZGF0ZTpmdW5jdGlvbihhKXtyZXR1cm4gbmV3IERhdGUoRGF0ZS5wYXJzZShhKXx8RGF0ZS5ub3coKSl9LCJib29sZWFuIjpmdW5jdGlvbihhKXtyZXR1cm4iIj09PWE/ITA6ImZhbHNlIj09PWE/ITE6ISFhfSxudW1iZXI6ZnVuY3Rpb24oYSl7dmFyIGI9cGFyc2VGbG9hdChhKTtyZXR1cm4gU3RyaW5nKGIpPT09YT9iOmF9LG9iamVjdDpmdW5jdGlvbihhLGIpe2lmKG51bGw9PT1iKXJldHVybiBhO3RyeXtyZXR1cm4gSlNPTi5wYXJzZShhLnJlcGxhY2UoLycvZywnIicpKX1jYXRjaChjKXtyZXR1cm4gYX19fTthLmRlc2VyaWFsaXplVmFsdWU9Yn0oUG9seW1lciksZnVuY3Rpb24oYSl7dmFyIGI9e307Yi5kZWNsYXJhdGlvbj17fSxiLmluc3RhbmNlPXt9LGEuYXBpPWJ9KFBvbHltZXIpLGZ1bmN0aW9uKGEpe3ZhciBiPXthc3luYzpmdW5jdGlvbihhLGIsYyl7UGxhdGZvcm0uZmx1c2goKSxiPWImJmIubGVuZ3RoP2I6W2JdO3ZhciBkPWZ1bmN0aW9uKCl7KHRoaXNbYV18fGEpLmFwcGx5KHRoaXMsYil9LmJpbmQodGhpcyk7cmV0dXJuIGM/c2V0VGltZW91dChkLGMpOnJlcXVlc3RBbmltYXRpb25GcmFtZShkKX0sZmlyZTpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1jfHx0aGlzO3JldHVybiBlLmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KGEse2J1YmJsZXM6dm9pZCAwIT09ZD9kOiEwLGRldGFpbDpifSkpLGJ9LGFzeW5jRmlyZTpmdW5jdGlvbigpe3RoaXMuYXN5bmMoImZpcmUiLGFyZ3VtZW50cyl9LGNsYXNzRm9sbG93czpmdW5jdGlvbihhLGIsYyl7YiYmYi5jbGFzc0xpc3QucmVtb3ZlKGMpLGEmJmEuY2xhc3NMaXN0LmFkZChjKX19O2IuYXN5bmNNZXRob2Q9Yi5hc3luYyxhLmFwaS5pbnN0YW5jZS51dGlscz1ifShQb2x5bWVyKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEpe2Zvcig7YS5wYXJlbnROb2RlOylhPWEucGFyZW50Tm9kZTtyZXR1cm4gYS5ob3N0fXZhciBjPXdpbmRvdy5sb2dGbGFnc3x8e30sZD0ib24tIixlPXtFVkVOVF9QUkVGSVg6ZCxoYXNFdmVudFByZWZpeDpmdW5jdGlvbihhKXtyZXR1cm4gYSYmIm8iPT09YVswXSYmIm4iPT09YVsxXSYmIi0iPT09YVsyXX0scmVtb3ZlRXZlbnRQcmVmaXg6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuc2xpY2UoZil9LGFkZEhvc3RMaXN0ZW5lcnM6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmV2ZW50RGVsZWdhdGVzO2MuZXZlbnRzJiZPYmplY3Qua2V5cyhhKS5sZW5ndGg+MCYmY29uc29sZS5sb2coIlslc10gYWRkSG9zdExpc3RlbmVyczoiLHRoaXMubG9jYWxOYW1lLGEpLHRoaXMuYWRkTm9kZUxpc3RlbmVycyh0aGlzLGEsdGhpcy5ob3N0RXZlbnRMaXN0ZW5lcil9LGFkZE5vZGVMaXN0ZW5lcnM6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkO2Zvcih2YXIgZSBpbiBiKWR8fChkPWMuYmluZCh0aGlzKSksdGhpcy5hZGROb2RlTGlzdGVuZXIoYSxlLGQpfSxhZGROb2RlTGlzdGVuZXI6ZnVuY3Rpb24oYSxiLGMpe2EuYWRkRXZlbnRMaXN0ZW5lcihiLGMpfSxob3N0RXZlbnRMaXN0ZW5lcjpmdW5jdGlvbihhKXtpZighYS5jYW5jZWxCdWJibGUpe2MuZXZlbnRzJiZjb25zb2xlLmdyb3VwKCJbJXNdOiBob3N0RXZlbnRMaXN0ZW5lciglcykiLHRoaXMubG9jYWxOYW1lLGEudHlwZSk7dmFyIGI9dGhpcy5maW5kRXZlbnREZWxlZ2F0ZShhKTtiJiYoYy5ldmVudHMmJmNvbnNvbGUubG9nKCJbJXNdIGZvdW5kIGhvc3QgaGFuZGxlciBuYW1lIFslc10iLHRoaXMubG9jYWxOYW1lLGIpLHRoaXMuZGlzcGF0Y2hNZXRob2QodGhpcyxiLFthLGEuZGV0YWlsLHRoaXNdKSksYy5ldmVudHMmJmNvbnNvbGUuZ3JvdXBFbmQoKX19LGZpbmRFdmVudERlbGVnYXRlOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmV2ZW50RGVsZWdhdGVzW2EudHlwZV19LGRpc3BhdGNoTWV0aG9kOmZ1bmN0aW9uKGEsYixkKXtpZihhKXtjLmV2ZW50cyYmY29uc29sZS5ncm91cCgiWyVzXSBkaXNwYXRjaCBbJXNdIixhLmxvY2FsTmFtZSxiKTt2YXIgZT0iZnVuY3Rpb24iPT10eXBlb2YgYj9iOmFbYl07ZSYmZVtkPyJhcHBseSI6ImNhbGwiXShhLGQpLGMuZXZlbnRzJiZjb25zb2xlLmdyb3VwRW5kKCksUGxhdGZvcm0uZmx1c2goKX19LHByZXBhcmVCaW5kaW5nOmZ1bmN0aW9uKGEsZCl7cmV0dXJuIGUuaGFzRXZlbnRQcmVmaXgoZCk/ZnVuY3Rpb24oZCxmLGcpe2MuZXZlbnRzJiZjb25zb2xlLmxvZygnZXZlbnQ6IFslc10uJXMgPT4gWyVzXS4lcygpIicsZy5sb2NhbE5hbWUsZixkLmxvY2FsTmFtZSxhKTt2YXIgaD1mdW5jdGlvbihjKXt2YXIgZT1iKGcpO2lmKGUmJmUuZGlzcGF0Y2hNZXRob2Qpe3ZhciBmPWUsaD1hOyJAIj09YVswXSYmKGY9ZCxoPVBhdGguZ2V0KGEuc2xpY2UoMSkpLmdldFZhbHVlRnJvbShkKSksZS5kaXNwYXRjaE1ldGhvZChmLGgsW2MsYy5kZXRhaWwsZ10pfX0saT1lLnJlbW92ZUV2ZW50UHJlZml4KGYpO3JldHVybiBnLmFkZEV2ZW50TGlzdGVuZXIoaSxoLCExKSx7Y2xvc2U6ZnVuY3Rpb24oKXtjLmV2ZW50cyYmY29uc29sZS5sb2coJ2V2ZW50LnJlbW92ZTogWyVzXS4lcyA9PiBbJXNdLiVzKCkiJyxnLmxvY2FsTmFtZSxmLGQubG9jYWxOYW1lLGEpLGcucmVtb3ZlRXZlbnRMaXN0ZW5lcihpLGgsITEpfX19OnZvaWQgMH19LGY9ZC5sZW5ndGg7YS5hcGkuaW5zdGFuY2UuZXZlbnRzPWV9KFBvbHltZXIpLGZ1bmN0aW9uKGEpe3ZhciBiPXtjb3B5SW5zdGFuY2VBdHRyaWJ1dGVzOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5faW5zdGFuY2VBdHRyaWJ1dGVzO2Zvcih2YXIgYiBpbiBhKXRoaXMuaGFzQXR0cmlidXRlKGIpfHx0aGlzLnNldEF0dHJpYnV0ZShiLGFbYl0pfSx0YWtlQXR0cmlidXRlczpmdW5jdGlvbigpe2lmKHRoaXMuX3B1Ymxpc2hMQylmb3IodmFyIGEsYj0wLGM9dGhpcy5hdHRyaWJ1dGVzLGQ9Yy5sZW5ndGg7KGE9Y1tiXSkmJmQ+YjtiKyspdGhpcy5hdHRyaWJ1dGVUb1Byb3BlcnR5KGEubmFtZSxhLnZhbHVlKX0sYXR0cmlidXRlVG9Qcm9wZXJ0eTpmdW5jdGlvbihiLGMpe3ZhciBiPXRoaXMucHJvcGVydHlGb3JBdHRyaWJ1dGUoYik7aWYoYil7aWYoYyYmYy5zZWFyY2goYS5iaW5kUGF0dGVybik+PTApcmV0dXJuO3ZhciBkPXRoaXNbYl0sYz10aGlzLmRlc2VyaWFsaXplVmFsdWUoYyxkKTtjIT09ZCYmKHRoaXNbYl09Yyl9fSxwcm9wZXJ0eUZvckF0dHJpYnV0ZTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLl9wdWJsaXNoTEMmJnRoaXMuX3B1Ymxpc2hMQ1thXTtyZXR1cm4gYn0sZGVzZXJpYWxpemVWYWx1ZTpmdW5jdGlvbihiLGMpe3JldHVybiBhLmRlc2VyaWFsaXplVmFsdWUoYixjKX0sc2VyaWFsaXplVmFsdWU6ZnVuY3Rpb24oYSxiKXtyZXR1cm4iYm9vbGVhbiI9PT1iP2E/IiI6dm9pZCAwOiJvYmplY3QiIT09YiYmdm9pZCAwIT09YT9hOnZvaWQgMH0scmVmbGVjdFByb3BlcnR5VG9BdHRyaWJ1dGU6ZnVuY3Rpb24oYSl7dmFyIGI9dHlwZW9mIHRoaXNbYV0sYz10aGlzLnNlcmlhbGl6ZVZhbHVlKHRoaXNbYV0sYik7dm9pZCAwIT09Yz90aGlzLnNldEF0dHJpYnV0ZShhLGMpOiJib29sZWFuIj09PWImJnRoaXMucmVtb3ZlQXR0cmlidXRlKGEpfX07YS5hcGkuaW5zdGFuY2UuYXR0cmlidXRlcz1ifShQb2x5bWVyKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEpe3JldHVybiBuZXcgQ29tcG91bmRQYXRoT2JzZXJ2ZXIoZnVuY3Rpb24oYixjLGQsZSl7YS5ub3RpZnlQcm9wZXJ0eUNoYW5nZXMoYixjLGQsZSl9LGEsdm9pZCAwLHZvaWQgMCl9ZnVuY3Rpb24gYyhhLGIsYyxlKXtkLmJpbmQmJmNvbnNvbGUubG9nKGYsYy5sb2NhbE5hbWV8fCJvYmplY3QiLGUsYS5sb2NhbE5hbWUsYik7dmFyIGc9UGF0aC5nZXQoZSksaD1nLmdldFZhbHVlRnJvbShjKTtyZXR1cm4obnVsbD09PWh8fHZvaWQgMD09PWgpJiZnLnNldFZhbHVlRnJvbShjLGFbYl0pLFBhdGhPYnNlcnZlci5kZWZpbmVQcm9wZXJ0eShhLGIse29iamVjdDpjLHBhdGg6ZX0pfXZhciBkPXdpbmRvdy5sb2dGbGFnc3x8e30sZT17b2JzZXJ2ZVByb3BlcnRpZXM6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLl9vYnNlcnZlTmFtZXMsYz10aGlzLl9wdWJsaXNoTmFtZXM7aWYoYSYmYS5sZW5ndGh8fGMmJmMubGVuZ3RoKXtmb3IodmFyIGQsZT10aGlzLl9wcm9wZXJ0eU9ic2VydmVyPWIodGhpcyksZj0wLGc9YS5sZW5ndGg7Zz5mJiYoZD1hW2ZdKTtmKyspe2UuYWRkUGF0aCh0aGlzLGQpO3ZhciBoPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGhpcy5fX3Byb3RvX18sZCk7aCYmaC52YWx1ZSYmdGhpcy5vYnNlcnZlQXJyYXlWYWx1ZShkLGgudmFsdWUsbnVsbCl9Zm9yKHZhciBkLGY9MCxnPWMubGVuZ3RoO2c+ZiYmKGQ9Y1tmXSk7ZisrKXRoaXMub2JzZXJ2ZSYmdm9pZCAwIT09dGhpcy5vYnNlcnZlW2RdfHxlLmFkZFBhdGgodGhpcyxkKTtlLnN0YXJ0KCl9fSxub3RpZnlQcm9wZXJ0eUNoYW5nZXM6ZnVuY3Rpb24oYSxiLGMsZCl7Zm9yKHZhciBlLGYsZz17fSxoPTAsaT1jLmxlbmd0aDtpPmg7aCsrKWNbaF0mJihlPWRbMipoKzFdLHZvaWQgMCE9PXRoaXMucHVibGlzaFtlXSYmdGhpcy5yZWZsZWN0UHJvcGVydHlUb0F0dHJpYnV0ZShlKSxmPXRoaXMub2JzZXJ2ZVtlXSxmJiYodGhpcy5vYnNlcnZlQXJyYXlWYWx1ZShlLGFbaF0sYltoXSksZ1tmXXx8KGdbZl09ITAsdGhpcy5pbnZva2VNZXRob2QoZixbYltoXSxhW2hdLGFyZ3VtZW50c10pKSkpfSxvYnNlcnZlQXJyYXlWYWx1ZTpmdW5jdGlvbihhLGIsYyl7dmFyIGU9dGhpcy5vYnNlcnZlW2FdO2lmKGUmJihBcnJheS5pc0FycmF5KGMpJiYoZC5vYnNlcnZlJiZjb25zb2xlLmxvZygiWyVzXSBvYnNlcnZlQXJyYXlWYWx1ZTogdW5yZWdpc3RlciBvYnNlcnZlciBbJXNdIix0aGlzLmxvY2FsTmFtZSxhKSx0aGlzLnVucmVnaXN0ZXJPYnNlcnZlcihhKyJfX2FycmF5IikpLEFycmF5LmlzQXJyYXkoYikpKXtkLm9ic2VydmUmJmNvbnNvbGUubG9nKCJbJXNdIG9ic2VydmVBcnJheVZhbHVlOiByZWdpc3RlciBvYnNlcnZlciBbJXNdIix0aGlzLmxvY2FsTmFtZSxhLGIpO3ZhciBmPXRoaXMsZz1uZXcgQXJyYXlPYnNlcnZlcihiLGZ1bmN0aW9uKGEsYil7Zi5pbnZva2VNZXRob2QoZSxbYl0pfSk7dGhpcy5yZWdpc3Rlck9ic2VydmVyKGErIl9fYXJyYXkiLGcpfX0sYmluZFByb3BlcnR5OmZ1bmN0aW9uKGEsYixkKXtyZXR1cm4gYyh0aGlzLGEsYixkKX0sdW5iaW5kQWxsUHJvcGVydGllczpmdW5jdGlvbigpe3RoaXMuX3Byb3BlcnR5T2JzZXJ2ZXImJnRoaXMuX3Byb3BlcnR5T2JzZXJ2ZXIuY2xvc2UoKSx0aGlzLnVucmVnaXN0ZXJPYnNlcnZlcnMoKX0sdW5iaW5kUHJvcGVydHk6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMudW5yZWdpc3Rlck9ic2VydmVyKGEpfSxpbnZva2VNZXRob2Q6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzW2FdfHxhOyJmdW5jdGlvbiI9PXR5cGVvZiBjJiZjLmFwcGx5KHRoaXMsYil9LHJlZ2lzdGVyT2JzZXJ2ZXI6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLl9vYnNlcnZlcnN8fCh0aGlzLl9vYnNlcnZlcnM9e30pO2NbYV09Yn0sdW5yZWdpc3Rlck9ic2VydmVyOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuX29ic2VydmVycztyZXR1cm4gYiYmYlthXT8oYlthXS5jbG9zZSgpLGJbYV09bnVsbCwhMCk6dm9pZCAwfSx1bnJlZ2lzdGVyT2JzZXJ2ZXJzOmZ1bmN0aW9uKCl7aWYodGhpcy5fb2JzZXJ2ZXJzKXtmb3IodmFyIGEsYixjPU9iamVjdC5rZXlzKHRoaXMuX29ic2VydmVycyksZD0wLGU9Yy5sZW5ndGg7ZT5kJiYoYT1jW2RdKTtkKyspYj10aGlzLl9vYnNlcnZlcnNbYV0sYi5jbG9zZSgpO3RoaXMuX29ic2VydmVycz17fX19fSxmPSJbJXNdOiBiaW5kUHJvcGVydGllczogWyVzXSB0byBbJXNdLlslc10iO2EuYXBpLmluc3RhbmNlLnByb3BlcnRpZXM9ZX0oUG9seW1lciksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhKXtkKGEsYyl9ZnVuY3Rpb24gYyhhKXthLnVuYmluZEFsbCgpfWZ1bmN0aW9uIGQoYSxiKXtpZihhKXtiKGEpO2Zvcih2YXIgYz1hLmZpcnN0Q2hpbGQ7YztjPWMubmV4dFNpYmxpbmcpZChjLGIpfX12YXIgZT13aW5kb3cubG9nRmxhZ3N8fDAsZj1hLmFwaS5pbnN0YW5jZS5ldmVudHMsZz1uZXcgUG9seW1lckV4cHJlc3Npb25zLGg9Zy5wcmVwYXJlQmluZGluZztnLnByZXBhcmVCaW5kaW5nPWZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gZi5wcmVwYXJlQmluZGluZyhhLGIsYyl8fGguY2FsbCh0aGlzLGEsYixjKX07dmFyIGk9e3N5bnRheDpnLGluc3RhbmNlVGVtcGxhdGU6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuY3JlYXRlSW5zdGFuY2UodGhpcyx0aGlzLnN5bnRheCl9LGJpbmQ6ZnVuY3Rpb24oYSxiLGMpe3RoaXMuX2VsZW1lbnRQcmVwYXJlZHx8dGhpcy5wcmVwYXJlRWxlbWVudCgpO3ZhciBkPXRoaXMucHJvcGVydHlGb3JBdHRyaWJ1dGUoYSk7aWYoZCl7dGhpcy51bmJpbmQoYSk7dmFyIGU9dGhpcy5iaW5kUHJvcGVydHkoZCxiLGMpO3JldHVybiBlLnBhdGg9Yyx0aGlzLnJlZmxlY3RQcm9wZXJ0eVRvQXR0cmlidXRlKGQpLHRoaXMuYmluZGluZ3NbYV09ZX1yZXR1cm4gdGhpcy5zdXBlcihhcmd1bWVudHMpfSxhc3luY1VuYmluZEFsbDpmdW5jdGlvbigpe3RoaXMuX3VuYm91bmR8fChlLnVuYmluZCYmY29uc29sZS5sb2coIlslc10gYXN5bmNVbmJpbmRBbGwiLHRoaXMubG9jYWxOYW1lKSx0aGlzLl91bmJpbmRBbGxKb2I9dGhpcy5qb2IodGhpcy5fdW5iaW5kQWxsSm9iLHRoaXMudW5iaW5kQWxsLDApKX0sdW5iaW5kQWxsOmZ1bmN0aW9uKCl7aWYoIXRoaXMuX3VuYm91bmQpe3RoaXMudW5iaW5kQWxsUHJvcGVydGllcygpLHRoaXMuc3VwZXIoKTtmb3IodmFyIGE9dGhpcy5zaGFkb3dSb290O2E7KWIoYSksYT1hLm9sZGVyU2hhZG93Um9vdDt0aGlzLl91bmJvdW5kPSEwfX0sY2FuY2VsVW5iaW5kQWxsOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLl91bmJvdW5kPyhlLnVuYmluZCYmY29uc29sZS53YXJuKCJbJXNdIGFscmVhZHkgdW5ib3VuZCwgY2Fubm90IGNhbmNlbCB1bmJpbmRBbGwiLHRoaXMubG9jYWxOYW1lKSx2b2lkIDApOihlLnVuYmluZCYmY29uc29sZS5sb2coIlslc10gY2FuY2VsVW5iaW5kQWxsIix0aGlzLmxvY2FsTmFtZSksdGhpcy5fdW5iaW5kQWxsSm9iJiYodGhpcy5fdW5iaW5kQWxsSm9iPXRoaXMuX3VuYmluZEFsbEpvYi5zdG9wKCkpLGF8fGQodGhpcy5zaGFkb3dSb290LGZ1bmN0aW9uKGEpe2EuY2FuY2VsVW5iaW5kQWxsJiZhLmNhbmNlbFVuYmluZEFsbCgpfSksdm9pZCAwKX19LGo9L1x7XHsoW157fV0qKX19LzthLmJpbmRQYXR0ZXJuPWosYS5hcGkuaW5zdGFuY2UubWR2PWl9KFBvbHltZXIpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7cmV0dXJuIGEuaGFzT3duUHJvcGVydHkoIlBvbHltZXJCYXNlIikKfWZ1bmN0aW9uIGMoKXt9dmFyIGQ9MCxlPXtQb2x5bWVyQmFzZTohMCxqb2I6UG9seW1lci5qb2IsInN1cGVyIjpQb2x5bWVyLnN1cGVyLGNyZWF0ZWQ6ZnVuY3Rpb24oKXt9LHJlYWR5OmZ1bmN0aW9uKCl7fSxjcmVhdGVkQ2FsbGJhY2s6ZnVuY3Rpb24oKXt0aGlzLmNyZWF0ZWQoKSwodGhpcy5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3fHx0aGlzLmFsd2F5c1ByZXBhcmV8fGQ+MCkmJnRoaXMucHJlcGFyZUVsZW1lbnQoKX0scHJlcGFyZUVsZW1lbnQ6ZnVuY3Rpb24oKXt0aGlzLl9lbGVtZW50UHJlcGFyZWQ9ITAsdGhpcy5vYnNlcnZlUHJvcGVydGllcygpLHRoaXMuY29weUluc3RhbmNlQXR0cmlidXRlcygpLHRoaXMudGFrZUF0dHJpYnV0ZXMoKSx0aGlzLmFkZEhvc3RMaXN0ZW5lcnMoKSxkKyssdGhpcy5wYXJzZURlY2xhcmF0aW9ucyh0aGlzLl9fcHJvdG9fXyksZC0tLHRoaXMucmVhZHkoKX0sZW50ZXJlZFZpZXdDYWxsYmFjazpmdW5jdGlvbigpe3RoaXMuX2VsZW1lbnRQcmVwYXJlZHx8dGhpcy5wcmVwYXJlRWxlbWVudCgpLHRoaXMuY2FuY2VsVW5iaW5kQWxsKCEwKSx0aGlzLmVudGVyZWRWaWV3JiZ0aGlzLmVudGVyZWRWaWV3KCl9LGxlZnRWaWV3Q2FsbGJhY2s6ZnVuY3Rpb24oKXt0aGlzLnByZXZlbnREaXNwb3NlfHx0aGlzLmFzeW5jVW5iaW5kQWxsKCksdGhpcy5sZWZ0VmlldyYmdGhpcy5sZWZ0VmlldygpfSxwYXJzZURlY2xhcmF0aW9uczpmdW5jdGlvbihhKXthJiZhLmVsZW1lbnQmJih0aGlzLnBhcnNlRGVjbGFyYXRpb25zKGEuX19wcm90b19fKSxhLnBhcnNlRGVjbGFyYXRpb24uY2FsbCh0aGlzLGEuZWxlbWVudCkpfSxwYXJzZURlY2xhcmF0aW9uOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZmV0Y2hUZW1wbGF0ZShhKTtiJiYodGhpcy5lbGVtZW50Lmhhc0F0dHJpYnV0ZSgibGlnaHRkb20iKT90aGlzLmxpZ2h0RnJvbVRlbXBsYXRlKGIpOnRoaXMuc2hhZG93RnJvbVRlbXBsYXRlKGIpKX0sZmV0Y2hUZW1wbGF0ZTpmdW5jdGlvbihhKXtyZXR1cm4gYS5xdWVyeVNlbGVjdG9yKCJ0ZW1wbGF0ZSIpfSxzaGFkb3dGcm9tVGVtcGxhdGU6ZnVuY3Rpb24oYSl7aWYoYSl7dGhpcy5zaGFkb3dSb290O3ZhciBiPXRoaXMuY3JlYXRlU2hhZG93Um9vdCgpO2IuYXBwbHlBdXRob3JTdHlsZXM9dGhpcy5hcHBseUF1dGhvclN0eWxlcyxiLnJlc2V0U3R5bGVJbmhlcml0YW5jZT10aGlzLnJlc2V0U3R5bGVJbmhlcml0YW5jZTt2YXIgYz10aGlzLmluc3RhbmNlVGVtcGxhdGUoYSk7cmV0dXJuIGIuYXBwZW5kQ2hpbGQoYyksdGhpcy5zaGFkb3dSb290UmVhZHkoYixhKSxifX0sbGlnaHRGcm9tVGVtcGxhdGU6ZnVuY3Rpb24oYSl7aWYoYSl7dmFyIGI9dGhpcy5pbnN0YW5jZVRlbXBsYXRlKGEpO3JldHVybiB0aGlzLmFwcGVuZENoaWxkKGIpLHRoaXMuc2hhZG93Um9vdFJlYWR5KHRoaXMsYSksYn19LHNoYWRvd1Jvb3RSZWFkeTpmdW5jdGlvbihhKXt0aGlzLm1hcnNoYWxOb2RlUmVmZXJlbmNlcyhhKSxQb2ludGVyR2VzdHVyZXMucmVnaXN0ZXIoYSl9LG1hcnNoYWxOb2RlUmVmZXJlbmNlczpmdW5jdGlvbihhKXt2YXIgYj10aGlzLiQ9dGhpcy4kfHx7fTtpZihhKWZvcih2YXIgYyxkPWEucXVlcnlTZWxlY3RvckFsbCgiW2lkXSIpLGU9MCxmPWQubGVuZ3RoO2Y+ZSYmKGM9ZFtlXSk7ZSsrKWJbYy5pZF09Y30sYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrOmZ1bmN0aW9uKGEpeyJjbGFzcyIhPT1hJiYic3R5bGUiIT09YSYmdGhpcy5hdHRyaWJ1dGVUb1Byb3BlcnR5KGEsdGhpcy5nZXRBdHRyaWJ1dGUoYSkpLHRoaXMuYXR0cmlidXRlQ2hhbmdlZCYmdGhpcy5hdHRyaWJ1dGVDaGFuZ2VkLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sb25NdXRhdGlvbjpmdW5jdGlvbihhLGIpe3ZhciBjPW5ldyBNdXRhdGlvbk9ic2VydmVyKGZ1bmN0aW9uKGEpe2IuY2FsbCh0aGlzLGMsYSksYy5kaXNjb25uZWN0KCl9LmJpbmQodGhpcykpO2Mub2JzZXJ2ZShhLHtjaGlsZExpc3Q6ITAsc3VidHJlZTohMH0pfX07Yy5wcm90b3R5cGU9ZSxlLmNvbnN0cnVjdG9yPWMsYS5CYXNlPWMsYS5pc0Jhc2U9YixhLmFwaS5pbnN0YW5jZS5iYXNlPWV9KFBvbHltZXIpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7cmV0dXJuIGEuX19wcm90b19ffXdpbmRvdy5sb2dGbGFnc3x8e307dmFyIGM9ImVsZW1lbnQiLGQ9ImNvbnRyb2xsZXIiLGU9e1NUWUxFX1NDT1BFX0FUVFJJQlVURTpjLGluc3RhbGxDb250cm9sbGVyU3R5bGVzOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5maW5kU3R5bGVDb250cm9sbGVyKCk7aWYoYSYmIXRoaXMuc2NvcGVIYXNFbGVtZW50U3R5bGUoYSxkKSl7Zm9yKHZhciBjPWIodGhpcyksZT0iIjtjJiZjLmVsZW1lbnQ7KWUrPWMuZWxlbWVudC5jc3NUZXh0Rm9yU2NvcGUoZCksYz1iKGMpO2lmKGUpe3ZhciBmPXRoaXMuZWxlbWVudC5jc3NUZXh0VG9TY29wZVN0eWxlKGUsZCk7UG9seW1lci5hcHBseVN0eWxlVG9TY29wZShmLGEpfX19LGZpbmRTdHlsZUNvbnRyb2xsZXI6ZnVuY3Rpb24oKXtpZih3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpcmV0dXJuIHdyYXAoZG9jdW1lbnQuaGVhZCk7Zm9yKHZhciBhPXRoaXM7YS5wYXJlbnROb2RlOylhPWEucGFyZW50Tm9kZTtyZXR1cm4gYT09PWRvY3VtZW50P2RvY3VtZW50LmhlYWQ6YX0sc2NvcGVIYXNFbGVtZW50U3R5bGU6ZnVuY3Rpb24oYSxiKXt2YXIgZD1jKyI9Iit0aGlzLmxvY2FsTmFtZSsiLSIrYjtyZXR1cm4gYS5xdWVyeVNlbGVjdG9yKCJzdHlsZVsiK2QrIl0iKX19O2EuYXBpLmluc3RhbmNlLnN0eWxlcz1lfShQb2x5bWVyKSxmdW5jdGlvbihhKXt2YXIgYj17YWRkUmVzb2x2ZVBhdGhBcGk6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmVsZW1lbnRQYXRoKCksYj10aGlzLmdldEF0dHJpYnV0ZSgiYXNzZXRwYXRoIil8fCIiO3RoaXMucHJvdG90eXBlLnJlc29sdmVQYXRoPWZ1bmN0aW9uKGMpe3JldHVybiBhK2IrY319LGVsZW1lbnRQYXRoOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudXJsVG9QYXRoKEhUTUxJbXBvcnRzLmdldERvY3VtZW50VXJsKHRoaXMub3duZXJEb2N1bWVudCkpfSx1cmxUb1BhdGg6ZnVuY3Rpb24oYSl7aWYoYSl7dmFyIGI9YS5zcGxpdCgiLyIpO3JldHVybiBiLnBvcCgpLGIucHVzaCgiIiksYi5qb2luKCIvIil9cmV0dXJuIiJ9fTthLmFwaS5kZWNsYXJhdGlvbi5wYXRoPWJ9KFBvbHltZXIpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSxiKXtpZihhKXt2YXIgZD1jKGEudGV4dENvbnRlbnQpLGU9YS5nZXRBdHRyaWJ1dGUoZyk7ZSYmZC5zZXRBdHRyaWJ1dGUoZyxlKSxiLmFwcGVuZENoaWxkKGQpfX1mdW5jdGlvbiBjKGEpe3ZhciBiPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInN0eWxlIik7cmV0dXJuIGIudGV4dENvbnRlbnQ9YSxifWZ1bmN0aW9uIGQoYSl7cmV0dXJuIGEmJmEuX19yZXNvdXJjZXx8IiJ9ZnVuY3Rpb24gZShhLGIpe3JldHVybiBuP24uY2FsbChhLGIpOnZvaWQgMH13aW5kb3cubG9nRmxhZ3N8fHt9O3ZhciBmPWEuYXBpLmluc3RhbmNlLnN0eWxlcyxnPWYuU1RZTEVfU0NPUEVfQVRUUklCVVRFLGg9InN0eWxlIixpPSJbcmVsPXN0eWxlc2hlZXRdIixqPSJnbG9iYWwiLGs9InBvbHltZXItc2NvcGUiLGw9e2luc3RhbGxTaGVldHM6ZnVuY3Rpb24oKXt0aGlzLmNhY2hlU2hlZXRzKCksdGhpcy5jYWNoZVN0eWxlcygpLHRoaXMuaW5zdGFsbExvY2FsU2hlZXRzKCksdGhpcy5pbnN0YWxsR2xvYmFsU3R5bGVzKCl9LGNhY2hlU2hlZXRzOmZ1bmN0aW9uKCl7dGhpcy5zaGVldHM9dGhpcy5maW5kTm9kZXMoaSksdGhpcy5zaGVldHMuZm9yRWFjaChmdW5jdGlvbihhKXthLnBhcmVudE5vZGUmJmEucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChhKX0pfSxjYWNoZVN0eWxlczpmdW5jdGlvbigpe3RoaXMuc3R5bGVzPXRoaXMuZmluZE5vZGVzKGgrIlsiK2srIl0iKSx0aGlzLnN0eWxlcy5mb3JFYWNoKGZ1bmN0aW9uKGEpe2EucGFyZW50Tm9kZSYmYS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGEpfSl9LGluc3RhbGxMb2NhbFNoZWV0czpmdW5jdGlvbigpe3ZhciBhPXRoaXMuc2hlZXRzLmZpbHRlcihmdW5jdGlvbihhKXtyZXR1cm4hYS5oYXNBdHRyaWJ1dGUoayl9KSxiPXRoaXMudGVtcGxhdGVDb250ZW50KCk7aWYoYil7dmFyIGU9IiI7YS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2UrPWQoYSkrIlxuIn0pLGUmJmIuaW5zZXJ0QmVmb3JlKGMoZSksYi5maXJzdENoaWxkKX19LGZpbmROb2RlczpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMucXVlcnlTZWxlY3RvckFsbChhKS5hcnJheSgpLGQ9dGhpcy50ZW1wbGF0ZUNvbnRlbnQoKTtpZihkKXt2YXIgZT1kLnF1ZXJ5U2VsZWN0b3JBbGwoYSkuYXJyYXkoKTtjPWMuY29uY2F0KGUpfXJldHVybiBiP2MuZmlsdGVyKGIpOmN9LHRlbXBsYXRlQ29udGVudDpmdW5jdGlvbigpe3ZhciBhPXRoaXMucXVlcnlTZWxlY3RvcigidGVtcGxhdGUiKTtyZXR1cm4gYSYmdGVtcGxhdGVDb250ZW50KGEpfSxpbnN0YWxsR2xvYmFsU3R5bGVzOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5zdHlsZUZvclNjb3BlKGopO2IoYSxkb2N1bWVudC5oZWFkKX0sY3NzVGV4dEZvclNjb3BlOmZ1bmN0aW9uKGEpe3ZhciBiPSIiLGM9IlsiK2srIj0iK2ErIl0iLGY9ZnVuY3Rpb24oYSl7cmV0dXJuIGUoYSxjKX0sZz10aGlzLnNoZWV0cy5maWx0ZXIoZik7Zy5mb3JFYWNoKGZ1bmN0aW9uKGEpe2IrPWQoYSkrIlxuXG4ifSk7dmFyIGg9dGhpcy5zdHlsZXMuZmlsdGVyKGYpO3JldHVybiBoLmZvckVhY2goZnVuY3Rpb24oYSl7Yis9YS50ZXh0Q29udGVudCsiXG5cbiJ9KSxifSxzdHlsZUZvclNjb3BlOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3NzVGV4dEZvclNjb3BlKGEpO3JldHVybiB0aGlzLmNzc1RleHRUb1Njb3BlU3R5bGUoYixhKX0sY3NzVGV4dFRvU2NvcGVTdHlsZTpmdW5jdGlvbihhLGIpe2lmKGEpe3ZhciBkPWMoYSk7cmV0dXJuIGQuc2V0QXR0cmlidXRlKGcsdGhpcy5nZXRBdHRyaWJ1dGUoIm5hbWUiKSsiLSIrYiksZH19fSxtPUhUTUxFbGVtZW50LnByb3RvdHlwZSxuPW0ubWF0Y2hlc3x8bS5tYXRjaGVzU2VsZWN0b3J8fG0ud2Via2l0TWF0Y2hlc1NlbGVjdG9yfHxtLm1vek1hdGNoZXNTZWxlY3RvcjthLmFwaS5kZWNsYXJhdGlvbi5zdHlsZXM9bCxhLmFwcGx5U3R5bGVUb1Njb3BlPWJ9KFBvbHltZXIpLGZ1bmN0aW9uKGEpe3ZhciBiPWEuYXBpLmluc3RhbmNlLmV2ZW50czt3aW5kb3cubG9nRmxhZ3N8fHt9O3ZhciBjPXtwYXJzZUhvc3RFdmVudHM6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnByb3RvdHlwZS5ldmVudERlbGVnYXRlczt0aGlzLmFkZEF0dHJpYnV0ZURlbGVnYXRlcyhhKX0sYWRkQXR0cmlidXRlRGVsZWdhdGVzOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYyxkPTA7Yz10aGlzLmF0dHJpYnV0ZXNbZF07ZCsrKWIuaGFzRXZlbnRQcmVmaXgoYy5uYW1lKSYmKGFbYi5yZW1vdmVFdmVudFByZWZpeChjLm5hbWUpXT1jLnZhbHVlLnJlcGxhY2UoInt7IiwiIikucmVwbGFjZSgifX0iLCIiKS50cmltKCkpfSxldmVudF90cmFuc2xhdGlvbnM6e3dlYmtpdGFuaW1hdGlvbnN0YXJ0OiJ3ZWJraXRBbmltYXRpb25TdGFydCIsd2Via2l0YW5pbWF0aW9uZW5kOiJ3ZWJraXRBbmltYXRpb25FbmQiLHdlYmtpdHRyYW5zaXRpb25lbmQ6IndlYmtpdFRyYW5zaXRpb25FbmQiLGRvbWZvY3Vzb3V0OiJET01Gb2N1c091dCIsZG9tZm9jdXNpbjoiRE9NRm9jdXNJbiJ9fTthLmFwaS5kZWNsYXJhdGlvbi5ldmVudHM9Y30oUG9seW1lciksZnVuY3Rpb24oYSl7dmFyIGI9e2luZmVyT2JzZXJ2ZXJzOmZ1bmN0aW9uKGEpe3ZhciBiLGM9YS5vYnNlcnZlO2Zvcih2YXIgZCBpbiBhKSJDaGFuZ2VkIj09PWQuc2xpY2UoLTcpJiYoY3x8KGM9YS5vYnNlcnZlPXt9KSxiPWQuc2xpY2UoMCwtNyksY1tiXT1jW2JdfHxkKX0sb3B0aW1pemVQcm9wZXJ0eU1hcHM6ZnVuY3Rpb24oYSl7aWYoYS5vYnNlcnZlKXt2YXIgYj1hLl9vYnNlcnZlTmFtZXM9W107Zm9yKHZhciBjIGluIGEub2JzZXJ2ZSliLnB1c2goYyl9aWYoYS5wdWJsaXNoKXt2YXIgYj1hLl9wdWJsaXNoTmFtZXM9W107Zm9yKHZhciBjIGluIGEucHVibGlzaCliLnB1c2goYyl9fSxwdWJsaXNoUHJvcGVydGllczpmdW5jdGlvbihhLGIpe3ZhciBjPWEucHVibGlzaDtjJiYodGhpcy5yZXF1aXJlUHJvcGVydGllcyhjLGEsYiksYS5fcHVibGlzaExDPXRoaXMubG93ZXJDYXNlTWFwKGMpKX0scmVxdWlyZVByb3BlcnRpZXM6ZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZCBpbiBhKXZvaWQgMD09PWJbZF0mJnZvaWQgMD09PWNbZF0mJihiW2RdPWFbZF0pfSxsb3dlckNhc2VNYXA6ZnVuY3Rpb24oYSl7dmFyIGI9e307Zm9yKHZhciBjIGluIGEpYltjLnRvTG93ZXJDYXNlKCldPWM7cmV0dXJuIGJ9fTthLmFwaS5kZWNsYXJhdGlvbi5wcm9wZXJ0aWVzPWJ9KFBvbHltZXIpLGZ1bmN0aW9uKGEpe3ZhciBiPSJhdHRyaWJ1dGVzIixjPXtpbmhlcml0QXR0cmlidXRlc09iamVjdHM6ZnVuY3Rpb24oYSl7dGhpcy5pbmhlcml0T2JqZWN0KGEsInB1Ymxpc2hMQyIpLHRoaXMuaW5oZXJpdE9iamVjdChhLCJfaW5zdGFuY2VBdHRyaWJ1dGVzIil9LHB1Ymxpc2hBdHRyaWJ1dGVzOmZ1bmN0aW9uKGEsYyl7dmFyIGQ9dGhpcy5nZXRBdHRyaWJ1dGUoYik7aWYoZClmb3IodmFyIGUsZj1hLnB1Ymxpc2h8fChhLnB1Ymxpc2g9e30pLGc9ZC5zcGxpdChkLmluZGV4T2YoIiwiKT49MD8iLCI6IiAiKSxoPTAsaT1nLmxlbmd0aDtpPmg7aCsrKWU9Z1toXS50cmltKCksZSYmdm9pZCAwPT09ZltlXSYmdm9pZCAwPT09Y1tlXSYmKGZbZV09bnVsbCl9LGFjY3VtdWxhdGVJbnN0YW5jZUF0dHJpYnV0ZXM6ZnVuY3Rpb24oKXtmb3IodmFyIGEsYj10aGlzLnByb3RvdHlwZS5faW5zdGFuY2VBdHRyaWJ1dGVzLGM9dGhpcy5hdHRyaWJ1dGVzLGQ9MCxlPWMubGVuZ3RoO2U+ZCYmKGE9Y1tkXSk7ZCsrKXRoaXMuaXNJbnN0YW5jZUF0dHJpYnV0ZShhLm5hbWUpJiYoYlthLm5hbWVdPWEudmFsdWUpfSxpc0luc3RhbmNlQXR0cmlidXRlOmZ1bmN0aW9uKGEpe3JldHVybiF0aGlzLmJsYWNrTGlzdFthXSYmIm9uLSIhPT1hLnNsaWNlKDAsMyl9LGJsYWNrTGlzdDp7bmFtZToxLCJleHRlbmRzIjoxLGNvbnN0cnVjdG9yOjEsbm9zY3JpcHQ6MX19O2MuYmxhY2tMaXN0W2JdPTEsYS5hcGkuZGVjbGFyYXRpb24uYXR0cmlidXRlcz1jfShQb2x5bWVyKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEpe2lmKCFPYmplY3QuX19wcm90b19fKXt2YXIgYj1PYmplY3QuZ2V0UHJvdG90eXBlT2YoYSk7YS5fX3Byb3RvX189YixkKGIpJiYoYi5fX3Byb3RvX189T2JqZWN0LmdldFByb3RvdHlwZU9mKGIpKX19dmFyIGM9YS5hcGksZD1hLmlzQmFzZSxlPWEuZXh0ZW5kLGY9e3JlZ2lzdGVyOmZ1bmN0aW9uKGEsYil7dGhpcy5wcm90b3R5cGU9dGhpcy5idWlsZFByb3RvdHlwZShhLGIpLHRoaXMucHJvdG90eXBlLmVsZW1lbnQ9dGhpcyx0aGlzLmRlc3VnYXIoYSxiKSx0aGlzLnJlZ2lzdGVyUHJvdG90eXBlKGEsYiksdGhpcy5wdWJsaXNoQ29uc3RydWN0b3IoKX0sYnVpbGRQcm90b3R5cGU6ZnVuY3Rpb24oYyxkKXt2YXIgZT1hLmdldFJlZ2lzdGVyZWRQcm90b3R5cGUoYyksZj10aGlzLmdlbmVyYXRlQmFzZVByb3RvdHlwZShkKTtyZXR1cm4gdGhpcy5wdWJsaXNoQXR0cmlidXRlcyhlLGYpLHRoaXMucHVibGlzaFByb3BlcnRpZXMoZSxmKSx0aGlzLmluZmVyT2JzZXJ2ZXJzKGUpLHRoaXMuaW5oZXJpdE1ldGFEYXRhKGUsZiksZT10aGlzLmNoYWluT2JqZWN0KGUsZiksdGhpcy5vcHRpbWl6ZVByb3BlcnR5TWFwcyhlKSxiKGUpLGV9LGluaGVyaXRNZXRhRGF0YTpmdW5jdGlvbihhLGIpe3RoaXMuaW5oZXJpdE9iamVjdCgib2JzZXJ2ZSIsYSxiKSx0aGlzLmluaGVyaXRPYmplY3QoInB1Ymxpc2giLGEsYiksdGhpcy5pbmhlcml0T2JqZWN0KCJfcHVibGlzaExDIixhLGIpLHRoaXMuaW5oZXJpdE9iamVjdCgiX2luc3RhbmNlQXR0cmlidXRlcyIsYSxiKSx0aGlzLmluaGVyaXRPYmplY3QoImV2ZW50RGVsZWdhdGVzIixhLGIpfSxkZXN1Z2FyOmZ1bmN0aW9uKGEsYil7dGhpcy5hY2N1bXVsYXRlSW5zdGFuY2VBdHRyaWJ1dGVzKCksdGhpcy5wYXJzZUhvc3RFdmVudHMoKSx0aGlzLmluc3RhbGxTaGVldHMoKSx0aGlzLmFkZFJlc29sdmVQYXRoQXBpKCksd2luZG93LlNoYWRvd0RPTVBvbHlmaWxsJiZQbGF0Zm9ybS5TaGFkb3dDU1Muc2hpbVN0eWxpbmcodGhpcy50ZW1wbGF0ZUNvbnRlbnQoKSxhLGIpLHRoaXMucHJvdG90eXBlLnJlZ2lzdGVyQ2FsbGJhY2smJnRoaXMucHJvdG90eXBlLnJlZ2lzdGVyQ2FsbGJhY2sodGhpcyl9LHB1Ymxpc2hDb25zdHJ1Y3RvcjpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZ2V0QXR0cmlidXRlKCJjb25zdHJ1Y3RvciIpO2EmJih3aW5kb3dbYV09dGhpcy5jdG9yKX0sZ2VuZXJhdGVCYXNlUHJvdG90eXBlOmZ1bmN0aW9uKGEpe3ZhciBiPW1lbW9pemVkQmFzZXNbYV07aWYoIWIpe3ZhciBiPUhUTUxFbGVtZW50LmdldFByb3RvdHlwZUZvclRhZyhhKTtiPXRoaXMuZW5zdXJlQmFzZUFwaShiKSxtZW1vaXplZEJhc2VzW2FdPWJ9cmV0dXJuIGJ9LGVuc3VyZUJhc2VBcGk6ZnVuY3Rpb24oYSl7aWYoIWEuUG9seW1lckJhc2Upe2E9T2JqZWN0LmNyZWF0ZShhKTtmb3IodmFyIGIgaW4gYy5pbnN0YW5jZSllKGEsYy5pbnN0YW5jZVtiXSl9cmV0dXJuIGF9LGluaGVyaXRPYmplY3Q6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWJbYV18fHt9O2JbYV09dGhpcy5jaGFpbk9iamVjdChkLGNbYV0pfSxyZWdpc3RlclByb3RvdHlwZTpmdW5jdGlvbihhLGIpe3ZhciBjPXtwcm90b3R5cGU6dGhpcy5wcm90b3R5cGV9O2ImJmIuaW5kZXhPZigiLSIpPDAmJihjLmV4dGVuZHM9YiksdGhpcy5jdG9yPWRvY3VtZW50LnJlZ2lzdGVyKGEsYyksdGhpcy5wcm90b3R5cGUuY29uc3RydWN0b3I9dGhpcy5jdG9yLEhUTUxFbGVtZW50LnJlZ2lzdGVyKGEsdGhpcy5wcm90b3R5cGUpfX07Zi5jaGFpbk9iamVjdD1PYmplY3QuX19wcm90b19fP2Z1bmN0aW9uKGEsYil7cmV0dXJuIGEmJmImJmEhPT1iJiYoYS5fX3Byb3RvX189YiksYX06ZnVuY3Rpb24oYSxiKXtpZihhJiZiJiZhIT09Yil7dmFyIGM9T2JqZWN0LmNyZWF0ZShiKTthPWUoYyxhKX1yZXR1cm4gYX0sbWVtb2l6ZWRCYXNlcz17fSxjLmRlY2xhcmF0aW9uLnByb3RvdHlwZT1mfShQb2x5bWVyKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEsYil7a1thXT1ifHx7fSxkKGEpfWZ1bmN0aW9uIGMoYSl7cmV0dXJuIGtbYV19ZnVuY3Rpb24gZChhKXtsW2FdJiYobFthXS5yZWdpc3RlcldoZW5SZWFkeSgpLGRlbGV0ZSBsW2FdKX1mdW5jdGlvbiBlKGEpe25bYV09ITA7dmFyIGI9bVthXTtiJiYoYi5mb3JFYWNoKGZ1bmN0aW9uKGEpe2EucmVnaXN0ZXJXaGVuUmVhZHkoKX0pLGRlbGV0ZSBtW2FdKX1mdW5jdGlvbiBmKGEpe3JldHVybiBuW2FdfWZ1bmN0aW9uIGcoYSl7d2luZG93LkhUTUxJbXBvcnRzJiYhSFRNTEltcG9ydHMucmVhZHlUaW1lP2FkZEV2ZW50TGlzdGVuZXIoIkhUTUxJbXBvcnRzTG9hZGVkIixhKTphKCl9dmFyIGg9YS5leHRlbmQsaT1hLmFwaS5kZWNsYXJhdGlvbixqPWgoT2JqZWN0LmNyZWF0ZShIVE1MRWxlbWVudC5wcm90b3R5cGUpLHtjcmVhdGVkQ2FsbGJhY2s6ZnVuY3Rpb24oKXt0aGlzLm5hbWU9dGhpcy5nZXRBdHRyaWJ1dGUoIm5hbWUiKSx0aGlzLnJlZ2lzdGVyV2hlblJlYWR5KCl9LHJlZ2lzdGVyV2hlblJlYWR5OmZ1bmN0aW9uKCl7aWYoIXRoaXMud2FpdGluZ0ZvclByb3RvdHlwZSh0aGlzLm5hbWUpKXt2YXIgYT10aGlzLmdldEF0dHJpYnV0ZSgiZXh0ZW5kcyIpO3RoaXMud2FpdGluZ0ZvckV4dGVuZGVlKGEpfHwoZG9jdW1lbnQuY29udGFpbnModGhpcyk/ZyhmdW5jdGlvbigpe3RoaXMuX3JlZ2lzdGVyKGEpfS5iaW5kKHRoaXMpKTp0aGlzLl9yZWdpc3RlcihhKSl9fSxfcmVnaXN0ZXI6ZnVuY3Rpb24oYSl7dGhpcy5yZWdpc3Rlcih0aGlzLm5hbWUsYSksZSh0aGlzLm5hbWUpfSx3YWl0aW5nRm9yUHJvdG90eXBlOmZ1bmN0aW9uKGEpe2lmKCFjKGEpKXtpZihsW2FdPXRoaXMsdGhpcy5oYXNBdHRyaWJ1dGUoIm5vc2NyaXB0IikpaWYod2luZG93LkN1c3RvbUVsZW1lbnRzJiYhQ3VzdG9tRWxlbWVudHMudXNlTmF0aXZlKWIoYSk7ZWxzZXt2YXIgZD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzY3JpcHQiKTtkLnRleHRDb250ZW50PSJQb2x5bWVyKCciK2ErIicpOyIsdGhpcy5hcHBlbmRDaGlsZChkKX1yZXR1cm4hMH19LHdhaXRpbmdGb3JFeHRlbmRlZTpmdW5jdGlvbihhKXtyZXR1cm4gYSYmYS5pbmRleE9mKCItIik+PTAmJiFmKGEpPygobVthXT1tW2FdfHxbXSkucHVzaCh0aGlzKSwhMCk6dm9pZCAwfX0pO09iamVjdC5rZXlzKGkpLmZvckVhY2goZnVuY3Rpb24oYSl7aChqLGlbYV0pfSk7dmFyIGs9e30sbD17fSxtPXt9LG49e307YS5nZXRSZWdpc3RlcmVkUHJvdG90eXBlPWMsaChiLGEpLHdpbmRvdy5Qb2x5bWVyPWIsZG9jdW1lbnQucmVnaXN0ZXIoInBvbHltZXItZWxlbWVudCIse3Byb3RvdHlwZTpqfSl9KFBvbHltZXIpOwovLyMgc291cmNlTWFwcGluZ1VSTD1wb2x5bWVyLm1pbi5qcy5tYXA=",
                "body": "LyogQGxpY2Vuc2UKLy8gQ29weXJpZ2h0IChjKSAyMDEyIFRoZSBQb2x5bWVyIEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuCi8vCi8vIFJlZGlzdHJpYnV0aW9uIGFuZCB1c2UgaW4gc291cmNlIGFuZCBiaW5hcnkgZm9ybXMsIHdpdGggb3Igd2l0aG91dAovLyBtb2RpZmljYXRpb24sIGFyZSBwZXJtaXR0ZWQgcHJvdmlkZWQgdGhhdCB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnMgYXJlCi8vIG1ldDoKLy8KLy8gICAgKiBSZWRpc3RyaWJ1dGlvbnMgb2Ygc291cmNlIGNvZGUgbXVzdCByZXRhaW4gdGhlIGFib3ZlIGNvcHlyaWdodAovLyBub3RpY2UsIHRoaXMgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIuCi8vICAgICogUmVkaXN0cmlidXRpb25zIGluIGJpbmFyeSBmb3JtIG11c3QgcmVwcm9kdWNlIHRoZSBhYm92ZQovLyBjb3B5cmlnaHQgbm90aWNlLCB0aGlzIGxpc3Qgb2YgY29uZGl0aW9ucyBhbmQgdGhlIGZvbGxvd2luZyBkaXNjbGFpbWVyCi8vIGluIHRoZSBkb2N1bWVudGF0aW9uIGFuZC9vciBvdGhlciBtYXRlcmlhbHMgcHJvdmlkZWQgd2l0aCB0aGUKLy8gZGlzdHJpYnV0aW9uLgovLyAgICAqIE5laXRoZXIgdGhlIG5hbWUgb2YgR29vZ2xlIEluYy4gbm9yIHRoZSBuYW1lcyBvZiBpdHMKLy8gY29udHJpYnV0b3JzIG1heSBiZSB1c2VkIHRvIGVuZG9yc2Ugb3IgcHJvbW90ZSBwcm9kdWN0cyBkZXJpdmVkIGZyb20KLy8gdGhpcyBzb2Z0d2FyZSB3aXRob3V0IHNwZWNpZmljIHByaW9yIHdyaXR0ZW4gcGVybWlzc2lvbi4KLy8KLy8gVEhJUyBTT0ZUV0FSRSBJUyBQUk9WSURFRCBCWSBUSEUgQ09QWVJJR0hUIEhPTERFUlMgQU5EIENPTlRSSUJVVE9SUwovLyAiQVMgSVMiIEFORCBBTlkgRVhQUkVTUyBPUiBJTVBMSUVEIFdBUlJBTlRJRVMsIElOQ0xVRElORywgQlVUIE5PVAovLyBMSU1JVEVEIFRPLCBUSEUgSU1QTElFRCBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSBBTkQgRklUTkVTUyBGT1IKLy8gQSBQQVJUSUNVTEFSIFBVUlBPU0UgQVJFIERJU0NMQUlNRUQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBDT1BZUklHSFQKLy8gT1dORVIgT1IgQ09OVFJJQlVUT1JTIEJFIExJQUJMRSBGT1IgQU5ZIERJUkVDVCwgSU5ESVJFQ1QsIElOQ0lERU5UQUwsCi8vIFNQRUNJQUwsIEVYRU1QTEFSWSwgT1IgQ09OU0VRVUVOVElBTCBEQU1BR0VTIChJTkNMVURJTkcsIEJVVCBOT1QKLy8gTElNSVRFRCBUTywgUFJPQ1VSRU1FTlQgT0YgU1VCU1RJVFVURSBHT09EUyBPUiBTRVJWSUNFUzsgTE9TUyBPRiBVU0UsCi8vIERBVEEsIE9SIFBST0ZJVFM7IE9SIEJVU0lORVNTIElOVEVSUlVQVElPTikgSE9XRVZFUiBDQVVTRUQgQU5EIE9OIEFOWQovLyBUSEVPUlkgT0YgTElBQklMSVRZLCBXSEVUSEVSIElOIENPTlRSQUNULCBTVFJJQ1QgTElBQklMSVRZLCBPUiBUT1JUCi8vIChJTkNMVURJTkcgTkVHTElHRU5DRSBPUiBPVEhFUldJU0UpIEFSSVNJTkcgSU4gQU5ZIFdBWSBPVVQgT0YgVEhFIFVTRQovLyBPRiBUSElTIFNPRlRXQVJFLCBFVkVOIElGIEFEVklTRUQgT0YgVEhFIFBPU1NJQklMSVRZIE9GIFNVQ0ggREFNQUdFLgoKQHZlcnNpb24gMC4wLjIwMTMxMDI1CiovCmZ1bmN0aW9uIFBvaW50ZXJHZXN0dXJlRXZlbnQoYSxiKXt2YXIgYz1ifHx7fSxkPWRvY3VtZW50LmNyZWF0ZUV2ZW50KCJFdmVudCIpLGU9e2J1YmJsZXM6Qm9vbGVhbihjLmJ1YmJsZXMpPT09Yy5idWJibGVzfHwhMCxjYW5jZWxhYmxlOkJvb2xlYW4oYy5jYW5jZWxhYmxlKT09PWMuY2FuY2VsYWJsZXx8ITB9O2QuaW5pdEV2ZW50KGEsZS5idWJibGVzLGUuY2FuY2VsYWJsZSk7Zm9yKHZhciBmLGc9T2JqZWN0LmtleXMoYyksaD0wO2g8Zy5sZW5ndGg7aCsrKWY9Z1toXSxkW2ZdPWNbZl07cmV0dXJuIGQucHJldmVudFRhcD10aGlzLnByZXZlbnRUYXAsZH1pZigidW5kZWZpbmVkIj09dHlwZW9mIFdlYWtNYXAmJiFmdW5jdGlvbigpe3ZhciBhPU9iamVjdC5kZWZpbmVQcm9wZXJ0eSxiPURhdGUubm93KCklMWU5LGM9ZnVuY3Rpb24oKXt0aGlzLm5hbWU9Il9fc3QiKygxZTkqTWF0aC5yYW5kb20oKT4+PjApKyhiKysgKyJfXyIpfTtjLnByb3RvdHlwZT17c2V0OmZ1bmN0aW9uKGIsYyl7dmFyIGQ9Ylt0aGlzLm5hbWVdO2QmJmRbMF09PT1iP2RbMV09YzphKGIsdGhpcy5uYW1lLHt2YWx1ZTpbYixjXSx3cml0YWJsZTohMH0pfSxnZXQ6ZnVuY3Rpb24oYSl7dmFyIGI7cmV0dXJuKGI9YVt0aGlzLm5hbWVdKSYmYlswXT09PWE/YlsxXTp2b2lkIDB9LCJkZWxldGUiOmZ1bmN0aW9uKGEpe3RoaXMuc2V0KGEsdm9pZCAwKX19LHdpbmRvdy5XZWFrTWFwPWN9KCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoKXtmdW5jdGlvbiBhKGEpeyJzcGxpY2UiPT09YVswXS50eXBlJiYic3BsaWNlIj09PWFbMV0udHlwZSYmKGI9ITApfWlmKCJmdW5jdGlvbiIhPXR5cGVvZiBPYmplY3Qub2JzZXJ2ZXx8ImZ1bmN0aW9uIiE9dHlwZW9mIEFycmF5Lm9ic2VydmUpcmV0dXJuITE7dmFyIGI9ITEsYz1bMF07cmV0dXJuIEFycmF5Lm9ic2VydmUoYyxhKSxjWzFdPTEsYy5sZW5ndGg9MCxPYmplY3QuZGVsaXZlckNoYW5nZVJlY29yZHMoYSksYn1mdW5jdGlvbiBjKCl7aWYoYS5kb2N1bWVudCYmInNlY3VyaXR5UG9saWN5ImluIGEuZG9jdW1lbnQmJiFhLmRvY3VtZW50LnNlY3VyaXR5UG9saWN5LmFsbG93c0V2YWwpcmV0dXJuITE7dHJ5e3ZhciBiPW5ldyBGdW5jdGlvbigiIiwicmV0dXJuIHRydWU7Iik7cmV0dXJuIGIoKX1jYXRjaChjKXtyZXR1cm4hMX19ZnVuY3Rpb24gZChhKXtyZXR1cm4rYT09PWE+Pj4wfWZ1bmN0aW9uIGUoYSl7cmV0dXJuK2F9ZnVuY3Rpb24gZihhKXtyZXR1cm4gYT09PU9iamVjdChhKX1mdW5jdGlvbiBnKGEsYil7cmV0dXJuIGE9PT1iPzAhPT1hfHwxL2E9PT0xL2I6SChhKSYmSChiKT8hMDphIT09YSYmYiE9PWJ9ZnVuY3Rpb24gaChhKXtyZXR1cm4ic3RyaW5nIiE9dHlwZW9mIGE/ITE6KGE9YS50cmltKCksIiI9PWE/ITA6Ii4iPT1hWzBdPyExOlAudGVzdChhKSl9ZnVuY3Rpb24gaShhLGIpe2lmKGIhPT1RKXRocm93IEVycm9yKCJVc2UgUGF0aC5nZXQgdG8gcmV0cmlldmUgcGF0aCBvYmplY3RzIik7cmV0dXJuIiI9PWEudHJpbSgpP3RoaXM6ZChhKT8odGhpcy5wdXNoKGEpLHRoaXMpOihhLnNwbGl0KC9ccypcLlxzKi8pLmZpbHRlcihmdW5jdGlvbihhKXtyZXR1cm4gYX0pLmZvckVhY2goZnVuY3Rpb24oYSl7dGhpcy5wdXNoKGEpfSx0aGlzKSxHJiYhRiYmdGhpcy5sZW5ndGgmJih0aGlzLmdldFZhbHVlRnJvbT10aGlzLmNvbXBpbGVkR2V0VmFsdWVGcm9tRm4oKSksdm9pZCAwKX1mdW5jdGlvbiBqKGEpe2lmKGEgaW5zdGFuY2VvZiBpKXJldHVybiBhO251bGw9PWEmJihhPSIiKSwic3RyaW5nIiE9dHlwZW9mIGEmJihhPVN0cmluZyhhKSk7dmFyIGI9UlthXTtpZihiKXJldHVybiBiO2lmKCFoKGEpKXJldHVybiBTO3ZhciBiPW5ldyBpKGEsUSk7cmV0dXJuIFJbYV09YixifWZ1bmN0aW9uIGsoYil7Zm9yKHZhciBjPTA7VD5jJiZiLmNoZWNrKCk7KWIucmVwb3J0KCksYysrO2EudGVzdGluZ0V4cG9zZUN5Y2xlQ291bnQmJihhLmRpcnR5Q2hlY2tDeWNsZUNvdW50PWMpfWZ1bmN0aW9uIGwoYSl7Zm9yKHZhciBiIGluIGEpcmV0dXJuITE7cmV0dXJuITB9ZnVuY3Rpb24gbShhKXtyZXR1cm4gbChhLmFkZGVkKSYmbChhLnJlbW92ZWQpJiZsKGEuY2hhbmdlZCl9ZnVuY3Rpb24gbihhLGIpe3ZhciBjPXt9LGQ9e30sZT17fTtmb3IodmFyIGYgaW4gYil7dmFyIGc9YVtmXTsodm9pZCAwPT09Z3x8ZyE9PWJbZl0pJiYoZiBpbiBhP2chPT1iW2ZdJiYoZVtmXT1nKTpkW2ZdPXZvaWQgMCl9Zm9yKHZhciBmIGluIGEpZiBpbiBifHwoY1tmXT1hW2ZdKTtyZXR1cm4gQXJyYXkuaXNBcnJheShhKSYmYS5sZW5ndGghPT1iLmxlbmd0aCYmKGUubGVuZ3RoPWEubGVuZ3RoKSx7YWRkZWQ6YyxyZW1vdmVkOmQsY2hhbmdlZDplfX1mdW5jdGlvbiBvKGEsYil7dmFyIGM9Ynx8KEFycmF5LmlzQXJyYXkoYSk/W106e30pO2Zvcih2YXIgZCBpbiBhKWNbZF09YVtkXTtyZXR1cm4gQXJyYXkuaXNBcnJheShhKSYmKGMubGVuZ3RoPWEubGVuZ3RoKSxjfWZ1bmN0aW9uIHAoYSxiLGMsZCl7aWYodGhpcy5jbG9zZWQ9ITEsdGhpcy5vYmplY3Q9YSx0aGlzLmNhbGxiYWNrPWIsdGhpcy50YXJnZXQ9Yyx0aGlzLnRva2VuPWQsdGhpcy5yZXBvcnRpbmc9ITAsRil7dmFyIGU9dGhpczt0aGlzLmJvdW5kSW50ZXJuYWxDYWxsYmFjaz1mdW5jdGlvbihhKXtlLmludGVybmFsQ2FsbGJhY2soYSl9fXEodGhpcyl9ZnVuY3Rpb24gcShhKXtWJiYoVS5wdXNoKGEpLHAuX2FsbE9ic2VydmVyc0NvdW50KyspfWZ1bmN0aW9uIHIoYSxiLGMsZCl7cC5jYWxsKHRoaXMsYSxiLGMsZCksdGhpcy5jb25uZWN0KCksdGhpcy5zeW5jKCEwKX1mdW5jdGlvbiBzKGEsYixjLGQpe2lmKCFBcnJheS5pc0FycmF5KGEpKXRocm93IEVycm9yKCJQcm92aWRlZCBvYmplY3QgaXMgbm90IGFuIEFycmF5Iik7ci5jYWxsKHRoaXMsYSxiLGMsZCl9ZnVuY3Rpb24gdChhKXt0aGlzLmFycj1bXSx0aGlzLmNhbGxiYWNrPWEsdGhpcy5pc09ic2VydmVkPSEwfWZ1bmN0aW9uIHUoYSxiLGMsZCxlLGcsaCl7dmFyIGI9YiBpbnN0YW5jZW9mIGk/YjpqKGIpO3JldHVybiBiJiZiLmxlbmd0aCYmZihhKT8ocC5jYWxsKHRoaXMsYSxjLGQsZSksdGhpcy52YWx1ZUZuPWcsdGhpcy5zZXRWYWx1ZUZuPWgsdGhpcy5wYXRoPWIsdGhpcy5jb25uZWN0KCksdGhpcy5zeW5jKCEwKSx2b2lkIDApOih0aGlzLnZhbHVlXz1iP2IuZ2V0VmFsdWVGcm9tKGEpOnZvaWQgMCx0aGlzLnZhbHVlPWc/Zyh0aGlzLnZhbHVlXyk6dGhpcy52YWx1ZV8sdGhpcy5jbG9zZWQ9ITAsdm9pZCAwKX1mdW5jdGlvbiB2KGEsYixjLGQpe3AuY2FsbCh0aGlzLHZvaWQgMCxhLGIsYyksdGhpcy52YWx1ZUZuPWQsdGhpcy5vYnNlcnZlZD1bXSx0aGlzLnZhbHVlcz1bXSx0aGlzLnZhbHVlPXZvaWQgMCx0aGlzLm9sZFZhbHVlPXZvaWQgMCx0aGlzLm9sZFZhbHVlcz12b2lkIDAsdGhpcy5jaGFuZ2VGbGFncz12b2lkIDAsdGhpcy5zdGFydGVkPSExfWZ1bmN0aW9uIHcoYSxiKXtpZigiZnVuY3Rpb24iPT10eXBlb2YgT2JqZWN0Lm9ic2VydmUpe3ZhciBjPU9iamVjdC5nZXROb3RpZmllcihhKTtyZXR1cm4gZnVuY3Rpb24oZCxlKXt2YXIgZj17b2JqZWN0OmEsdHlwZTpkLG5hbWU6Yn07Mj09PWFyZ3VtZW50cy5sZW5ndGgmJihmLm9sZFZhbHVlPWUpLGMubm90aWZ5KGYpfX19ZnVuY3Rpb24geChhLGIsYyl7Zm9yKHZhciBkPXt9LGU9e30sZj0wO2Y8Yi5sZW5ndGg7ZisrKXt2YXIgZz1iW2ZdOyRbZy50eXBlXT8oZy5uYW1lIGluIGN8fChjW2cubmFtZV09Zy5vbGRWYWx1ZSksInVwZGF0ZWQiIT1nLnR5cGUmJigibmV3IiE9Zy50eXBlP2cubmFtZSBpbiBkPyhkZWxldGUgZFtnLm5hbWVdLGRlbGV0ZSBjW2cubmFtZV0pOmVbZy5uYW1lXT0hMDpnLm5hbWUgaW4gZT9kZWxldGUgZVtnLm5hbWVdOmRbZy5uYW1lXT0hMCkpOihjb25zb2xlLmVycm9yKCJVbmtub3duIGNoYW5nZVJlY29yZCB0eXBlOiAiK2cudHlwZSksY29uc29sZS5lcnJvcihnKSl9Zm9yKHZhciBoIGluIGQpZFtoXT1hW2hdO2Zvcih2YXIgaCBpbiBlKWVbaF09dm9pZCAwO3ZhciBpPXt9O2Zvcih2YXIgaCBpbiBjKWlmKCEoaCBpbiBkfHxoIGluIGUpKXt2YXIgaj1hW2hdO2NbaF0hPT1qJiYoaVtoXT1qKX1yZXR1cm57YWRkZWQ6ZCxyZW1vdmVkOmUsY2hhbmdlZDppfX1mdW5jdGlvbiB5KGEsYixjKXtyZXR1cm57aW5kZXg6YSxyZW1vdmVkOmIsYWRkZWRDb3VudDpjfX1mdW5jdGlvbiB6KCl7fWZ1bmN0aW9uIEEoYSxiLGMsZCxlLGYpe3JldHVybiBkYi5jYWxjU3BsaWNlcyhhLGIsYyxkLGUsZil9ZnVuY3Rpb24gQihhLGIsYyxkKXtyZXR1cm4gYz5ifHxhPmQ/LTE6Yj09Y3x8ZD09YT8wOmM+YT9kPmI/Yi1jOmQtYzpiPmQ/ZC1hOmItYX1mdW5jdGlvbiBDKGEsYixjLGQpe2Zvcih2YXIgZT15KGIsYyxkKSxmPSExLGc9MCxoPTA7aDxhLmxlbmd0aDtoKyspe3ZhciBpPWFbaF07aWYoaS5pbmRleCs9ZywhZil7dmFyIGo9QihlLmluZGV4LGUuaW5kZXgrZS5yZW1vdmVkLmxlbmd0aCxpLmluZGV4LGkuaW5kZXgraS5hZGRlZENvdW50KTtpZihqPj0wKXthLnNwbGljZShoLDEpLGgtLSxnLT1pLmFkZGVkQ291bnQtaS5yZW1vdmVkLmxlbmd0aCxlLmFkZGVkQ291bnQrPWkuYWRkZWRDb3VudC1qO3ZhciBrPWUucmVtb3ZlZC5sZW5ndGgraS5yZW1vdmVkLmxlbmd0aC1qO2lmKGUuYWRkZWRDb3VudHx8ayl7dmFyIGM9aS5yZW1vdmVkO2lmKGUuaW5kZXg8aS5pbmRleCl7dmFyIGw9ZS5yZW1vdmVkLnNsaWNlKDAsaS5pbmRleC1lLmluZGV4KTtBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShsLGMpLGM9bH1pZihlLmluZGV4K2UucmVtb3ZlZC5sZW5ndGg+aS5pbmRleCtpLmFkZGVkQ291bnQpe3ZhciBtPWUucmVtb3ZlZC5zbGljZShpLmluZGV4K2kuYWRkZWRDb3VudC1lLmluZGV4KTtBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShjLG0pfWUucmVtb3ZlZD1jLGkuaW5kZXg8ZS5pbmRleCYmKGUuaW5kZXg9aS5pbmRleCl9ZWxzZSBmPSEwfWVsc2UgaWYoZS5pbmRleDxpLmluZGV4KXtmPSEwLGEuc3BsaWNlKGgsMCxlKSxoKys7dmFyIG49ZS5hZGRlZENvdW50LWUucmVtb3ZlZC5sZW5ndGg7aS5pbmRleCs9bixnKz1ufX19Znx8YS5wdXNoKGUpfWZ1bmN0aW9uIEQoYSxiKXtmb3IodmFyIGM9W10sZj0wO2Y8Yi5sZW5ndGg7ZisrKXt2YXIgZz1iW2ZdO3N3aXRjaChnLnR5cGUpe2Nhc2Uic3BsaWNlIjpDKGMsZy5pbmRleCxnLnJlbW92ZWQuc2xpY2UoKSxnLmFkZGVkQ291bnQpO2JyZWFrO2Nhc2UibmV3IjpjYXNlInVwZGF0ZWQiOmNhc2UiZGVsZXRlZCI6aWYoIWQoZy5uYW1lKSljb250aW51ZTt2YXIgaD1lKGcubmFtZSk7aWYoMD5oKWNvbnRpbnVlO0MoYyxoLFtnLm9sZFZhbHVlXSwxKTticmVhaztkZWZhdWx0OmNvbnNvbGUuZXJyb3IoIlVuZXhwZWN0ZWQgcmVjb3JkIHR5cGU6ICIrSlNPTi5zdHJpbmdpZnkoZykpfX1yZXR1cm4gY31mdW5jdGlvbiBFKGEsYil7dmFyIGM9W107cmV0dXJuIEQoYSxiKS5mb3JFYWNoKGZ1bmN0aW9uKGIpe3JldHVybiAxPT1iLmFkZGVkQ291bnQmJjE9PWIucmVtb3ZlZC5sZW5ndGg/KGIucmVtb3ZlZFswXSE9PWFbYi5pbmRleF0mJmMucHVzaChiKSx2b2lkIDApOihjPWMuY29uY2F0KEEoYSxiLmluZGV4LGIuaW5kZXgrYi5hZGRlZENvdW50LGIucmVtb3ZlZCwwLGIucmVtb3ZlZC5sZW5ndGgpKSx2b2lkIDApfSksY312YXIgRj1iKCksRz1jKCksSD1hLk51bWJlci5pc05hTnx8ZnVuY3Rpb24oYil7cmV0dXJuIm51bWJlciI9PXR5cGVvZiBiJiZhLmlzTmFOKGIpfSxJPSJfX3Byb3RvX18iaW57fT9mdW5jdGlvbihhKXtyZXR1cm4gYX06ZnVuY3Rpb24oYSl7dmFyIGI9YS5fX3Byb3RvX187aWYoIWIpcmV0dXJuIGE7dmFyIGM9T2JqZWN0LmNyZWF0ZShiKTtyZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoYSkuZm9yRWFjaChmdW5jdGlvbihiKXtPYmplY3QuZGVmaW5lUHJvcGVydHkoYyxiLE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoYSxiKSl9KSxjfSxKPSJbJF9hLXpBLVpdIixLPSJbJF9hLXpBLVowLTldIixMPUorIisiK0srIioiLE09Iig/OlswLTldfFsxLTldK1swLTldKykiLE49Iig/OiIrTCsifCIrTSsiKSIsTz0iKD86IitOKyIpKD86XFxzKlxcLlxccyoiK04rIikqIixQPW5ldyBSZWdFeHAoIl4iK08rIiQiKSxRPXt9LFI9e307aS5nZXQ9aixpLnByb3RvdHlwZT1JKHtfX3Byb3RvX186W10sdmFsaWQ6ITAsdG9TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5qb2luKCIuIil9LGdldFZhbHVlRnJvbTpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz0wO2M8dGhpcy5sZW5ndGg7YysrKXtpZihudWxsPT1hKXJldHVybjtiJiZiLm9ic2VydmUoYSksYT1hW3RoaXNbY11dfXJldHVybiBhfSxjb21waWxlZEdldFZhbHVlRnJvbUZuOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5tYXAoZnVuY3Rpb24oYSl7cmV0dXJuIGQoYSk/J1siJythKyciXSc6Ii4iK2F9KSxiPSIiLGM9Im9iaiI7Yis9ImlmIChvYmogIT0gbnVsbCI7Zm9yKHZhciBlPTA7ZTx0aGlzLmxlbmd0aC0xO2UrKyl0aGlzW2VdLGMrPWFbZV0sYis9IiAmJlxuICAgICAiK2MrIiAhPSBudWxsIjtyZXR1cm4gYis9IilcbiIsYys9YVtlXSxiKz0iICByZXR1cm4gIitjKyI7XG5lbHNlXG4gIHJldHVybiB1bmRlZmluZWQ7IixuZXcgRnVuY3Rpb24oIm9iaiIsYil9LHNldFZhbHVlRnJvbTpmdW5jdGlvbihhLGIpe2lmKCF0aGlzLmxlbmd0aClyZXR1cm4hMTtmb3IodmFyIGM9MDtjPHRoaXMubGVuZ3RoLTE7YysrKXtpZighZihhKSlyZXR1cm4hMTthPWFbdGhpc1tjXV19cmV0dXJuIGYoYSk/KGFbdGhpc1tjXV09YiwhMCk6ITF9fSk7dmFyIFM9bmV3IGkoIiIsUSk7Uy52YWxpZD0hMSxTLmdldFZhbHVlRnJvbT1TLnNldFZhbHVlRnJvbT1mdW5jdGlvbigpe307dmFyIFQ9MWUzO3AucHJvdG90eXBlPXtpbnRlcm5hbENhbGxiYWNrOmZ1bmN0aW9uKGEpe3RoaXMuY2xvc2VkfHx0aGlzLnJlcG9ydGluZyYmdGhpcy5jaGVjayhhKSYmKHRoaXMucmVwb3J0KCksdGhpcy50ZXN0aW5nUmVzdWx0cyYmKHRoaXMudGVzdGluZ1Jlc3VsdHMuYW55Q2hhbmdlZD0hMCkpfSxjbG9zZTpmdW5jdGlvbigpe3RoaXMuY2xvc2VkfHwodGhpcy5vYmplY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiB0aGlzLm9iamVjdC5jbG9zZSYmdGhpcy5vYmplY3QuY2xvc2UoKSx0aGlzLmRpc2Nvbm5lY3QoKSx0aGlzLm9iamVjdD12b2lkIDAsdGhpcy5jbG9zZWQ9ITApfSxkZWxpdmVyOmZ1bmN0aW9uKGEpe3RoaXMuY2xvc2VkfHwoRj8odGhpcy50ZXN0aW5nUmVzdWx0cz1hLE9iamVjdC5kZWxpdmVyQ2hhbmdlUmVjb3Jkcyh0aGlzLmJvdW5kSW50ZXJuYWxDYWxsYmFjayksdGhpcy50ZXN0aW5nUmVzdWx0cz12b2lkIDApOmsodGhpcykpfSxyZXBvcnQ6ZnVuY3Rpb24oKXt0aGlzLnJlcG9ydGluZyYmKHRoaXMuc3luYyghMSksdGhpcy5jYWxsYmFjayYmKHRoaXMucmVwb3J0QXJncy5wdXNoKHRoaXMudG9rZW4pLHRoaXMuaW52b2tlQ2FsbGJhY2sodGhpcy5yZXBvcnRBcmdzKSksdGhpcy5yZXBvcnRBcmdzPXZvaWQgMCl9LGludm9rZUNhbGxiYWNrOmZ1bmN0aW9uKGEpe3RyeXt0aGlzLmNhbGxiYWNrLmFwcGx5KHRoaXMudGFyZ2V0LGEpfWNhdGNoKGIpe3AuX2Vycm9yVGhyb3duRHVyaW5nQ2FsbGJhY2s9ITAsY29uc29sZS5lcnJvcigiRXhjZXB0aW9uIGNhdWdodCBkdXJpbmcgb2JzZXJ2ZXIgY2FsbGJhY2s6ICIrKGIuc3RhY2t8fGIpKX19LHJlc2V0OmZ1bmN0aW9uKCl7dGhpcy5jbG9zZWR8fChGJiYodGhpcy5yZXBvcnRpbmc9ITEsT2JqZWN0LmRlbGl2ZXJDaGFuZ2VSZWNvcmRzKHRoaXMuYm91bmRJbnRlcm5hbENhbGxiYWNrKSx0aGlzLnJlcG9ydGluZz0hMCksdGhpcy5zeW5jKCEwKSl9fTt2YXIgVSxWPSFGfHxhLmZvcmNlQ29sbGVjdE9ic2VydmVycztwLl9hbGxPYnNlcnZlcnNDb3VudD0wLFYmJihVPVtdKTt2YXIgVz0hMSxYPSJmdW5jdGlvbiI9PXR5cGVvZiBPYmplY3QuZGVsaXZlckFsbENoYW5nZVJlY29yZHM7YS5QbGF0Zm9ybT1hLlBsYXRmb3JtfHx7fSxhLlBsYXRmb3JtLnBlcmZvcm1NaWNyb3Rhc2tDaGVja3BvaW50PWZ1bmN0aW9uKCl7aWYoIVcpe2lmKFgpcmV0dXJuIE9iamVjdC5kZWxpdmVyQWxsQ2hhbmdlUmVjb3JkcygpLHZvaWQgMDtpZihWKXtXPSEwO3ZhciBiPTAsYz17fTtkb3tiKys7dmFyIGQ9VTtVPVtdLGMuYW55Q2hhbmdlZD0hMTtmb3IodmFyIGU9MDtlPGQubGVuZ3RoO2UrKyl7dmFyIGY9ZFtlXTtmLmNsb3NlZHx8KEY/Zi5kZWxpdmVyKGMpOmYuY2hlY2soKSYmKGMuYW55Q2hhbmdlZD0hMCxmLnJlcG9ydCgpKSxVLnB1c2goZikpfX13aGlsZShUPmImJmMuYW55Q2hhbmdlZCk7YS50ZXN0aW5nRXhwb3NlQ3ljbGVDb3VudCYmKGEuZGlydHlDaGVja0N5Y2xlQ291bnQ9YikscC5fYWxsT2JzZXJ2ZXJzQ291bnQ9VS5sZW5ndGgsVz0hMX19fSxWJiYoYS5QbGF0Zm9ybS5jbGVhck9ic2VydmVycz1mdW5jdGlvbigpe1U9W119KSxyLnByb3RvdHlwZT1JKHtfX3Byb3RvX186cC5wcm90b3R5cGUsY29ubmVjdDpmdW5jdGlvbigpe0YmJk9iamVjdC5vYnNlcnZlKHRoaXMub2JqZWN0LHRoaXMuYm91bmRJbnRlcm5hbENhbGxiYWNrKX0sc3luYzpmdW5jdGlvbigpe0Z8fCh0aGlzLm9sZE9iamVjdD1vKHRoaXMub2JqZWN0KSl9LGNoZWNrOmZ1bmN0aW9uKGEpe3ZhciBiLGM7aWYoRil7aWYoIWEpcmV0dXJuITE7Yz17fSxiPXgodGhpcy5vYmplY3QsYSxjKX1lbHNlIGM9dGhpcy5vbGRPYmplY3QsYj1uKHRoaXMub2JqZWN0LHRoaXMub2xkT2JqZWN0KTtyZXR1cm4gbShiKT8hMToodGhpcy5yZXBvcnRBcmdzPVtiLmFkZGVkfHx7fSxiLnJlbW92ZWR8fHt9LGIuY2hhbmdlZHx8e31dLHRoaXMucmVwb3J0QXJncy5wdXNoKGZ1bmN0aW9uKGEpe3JldHVybiBjW2FdfSksITApfSxkaXNjb25uZWN0OmZ1bmN0aW9uKCl7Rj90aGlzLm9iamVjdCYmT2JqZWN0LnVub2JzZXJ2ZSh0aGlzLm9iamVjdCx0aGlzLmJvdW5kSW50ZXJuYWxDYWxsYmFjayk6dGhpcy5vbGRPYmplY3Q9dm9pZCAwfX0pLHMucHJvdG90eXBlPUkoe19fcHJvdG9fXzpyLnByb3RvdHlwZSxjb25uZWN0OmZ1bmN0aW9uKCl7RiYmQXJyYXkub2JzZXJ2ZSh0aGlzLm9iamVjdCx0aGlzLmJvdW5kSW50ZXJuYWxDYWxsYmFjayl9LHN5bmM6ZnVuY3Rpb24oKXtGfHwodGhpcy5vbGRPYmplY3Q9dGhpcy5vYmplY3Quc2xpY2UoKSl9LGNoZWNrOmZ1bmN0aW9uKGEpe3ZhciBiO2lmKEYpe2lmKCFhKXJldHVybiExO2I9RSh0aGlzLm9iamVjdCxhKX1lbHNlIGI9QSh0aGlzLm9iamVjdCwwLHRoaXMub2JqZWN0Lmxlbmd0aCx0aGlzLm9sZE9iamVjdCwwLHRoaXMub2xkT2JqZWN0Lmxlbmd0aCk7cmV0dXJuIGImJmIubGVuZ3RoPyh0aGlzLnJlcG9ydEFyZ3M9W2JdLCEwKTohMX19KSxzLmFwcGx5U3BsaWNlcz1mdW5jdGlvbihhLGIsYyl7Yy5mb3JFYWNoKGZ1bmN0aW9uKGMpe2Zvcih2YXIgZD1bYy5pbmRleCxjLnJlbW92ZWQubGVuZ3RoXSxlPWMuaW5kZXg7ZTxjLmluZGV4K2MuYWRkZWRDb3VudDspZC5wdXNoKGJbZV0pLGUrKztBcnJheS5wcm90b3R5cGUuc3BsaWNlLmFwcGx5KGEsZCl9KX07dmFyIFk9T2JqZWN0LmdldFByb3RvdHlwZU9mKHt9KSxaPU9iamVjdC5nZXRQcm90b3R5cGVPZihbXSk7dC5wcm90b3R5cGU9e3Jlc2V0OmZ1bmN0aW9uKCl7dGhpcy5pc09ic2VydmVkPSF0aGlzLmlzT2JzZXJ2ZWR9LG9ic2VydmU6ZnVuY3Rpb24oYSl7aWYoZihhKSYmYSE9PVkmJmEhPT1aKXt2YXIgYj10aGlzLmFyci5pbmRleE9mKGEpO2I+PTAmJnRoaXMuYXJyW2IrMV09PT10aGlzLmlzT2JzZXJ2ZWR8fCgwPmImJihiPXRoaXMuYXJyLmxlbmd0aCx0aGlzLmFycltiXT1hLE9iamVjdC5vYnNlcnZlKGEsdGhpcy5jYWxsYmFjaykpLHRoaXMuYXJyW2IrMV09dGhpcy5pc09ic2VydmVkLHRoaXMub2JzZXJ2ZShPYmplY3QuZ2V0UHJvdG90eXBlT2YoYSkpKX19LGNsZWFudXA6ZnVuY3Rpb24oKXtmb3IodmFyIGE9MCxiPTAsYz10aGlzLmlzT2JzZXJ2ZWQ7Yjx0aGlzLmFyci5sZW5ndGg7KXt2YXIgZD10aGlzLmFycltiXTt0aGlzLmFycltiKzFdPT1jPyhiPmEmJih0aGlzLmFyclthXT1kLHRoaXMuYXJyW2ErMV09YyksYSs9Mik6T2JqZWN0LnVub2JzZXJ2ZShkLHRoaXMuY2FsbGJhY2spLGIrPTJ9dGhpcy5hcnIubGVuZ3RoPWF9fSx1LnByb3RvdHlwZT1JKHtfX3Byb3RvX186cC5wcm90b3R5cGUsY29ubmVjdDpmdW5jdGlvbigpe0YmJih0aGlzLm9ic2VydmVkU2V0PW5ldyB0KHRoaXMuYm91bmRJbnRlcm5hbENhbGxiYWNrKSl9LGRpc2Nvbm5lY3Q6ZnVuY3Rpb24oKXt0aGlzLnZhbHVlPXZvaWQgMCx0aGlzLnZhbHVlXz12b2lkIDAsdGhpcy5vYnNlcnZlZFNldCYmKHRoaXMub2JzZXJ2ZWRTZXQucmVzZXQoKSx0aGlzLm9ic2VydmVkU2V0LmNsZWFudXAoKSx0aGlzLm9ic2VydmVkU2V0PXZvaWQgMCl9LGNoZWNrOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub2JzZXJ2ZWRTZXQmJnRoaXMub2JzZXJ2ZWRTZXQucmVzZXQoKSx0aGlzLnZhbHVlXz10aGlzLnBhdGguZ2V0VmFsdWVGcm9tKHRoaXMub2JqZWN0LHRoaXMub2JzZXJ2ZWRTZXQpLHRoaXMub2JzZXJ2ZWRTZXQmJnRoaXMub2JzZXJ2ZWRTZXQuY2xlYW51cCgpLGcodGhpcy52YWx1ZV8sdGhpcy5vbGRWYWx1ZV8pPyExOih0aGlzLnZhbHVlPXRoaXMudmFsdWVGbj90aGlzLnZhbHVlRm4odGhpcy52YWx1ZV8pOnRoaXMudmFsdWVfLHRoaXMucmVwb3J0QXJncz1bdGhpcy52YWx1ZSx0aGlzLm9sZFZhbHVlXSwhMCl9LHN5bmM6ZnVuY3Rpb24oYSl7YSYmKHRoaXMub2JzZXJ2ZWRTZXQmJnRoaXMub2JzZXJ2ZWRTZXQucmVzZXQoKSx0aGlzLnZhbHVlXz10aGlzLnBhdGguZ2V0VmFsdWVGcm9tKHRoaXMub2JqZWN0LHRoaXMub2JzZXJ2ZWRTZXQpLHRoaXMudmFsdWU9dGhpcy52YWx1ZUZuP3RoaXMudmFsdWVGbih0aGlzLnZhbHVlXyk6dGhpcy52YWx1ZV8sdGhpcy5vYnNlcnZlZFNldCYmdGhpcy5vYnNlcnZlZFNldC5jbGVhbnVwKCkpLHRoaXMub2xkVmFsdWVfPXRoaXMudmFsdWVfLHRoaXMub2xkVmFsdWU9dGhpcy52YWx1ZX0sc2V0VmFsdWU6ZnVuY3Rpb24oYSl7dGhpcy5wYXRoJiYoImZ1bmN0aW9uIj09dHlwZW9mIHRoaXMuc2V0VmFsdWVGbiYmKGE9dGhpcy5zZXRWYWx1ZUZuKGEpKSx0aGlzLnBhdGguc2V0VmFsdWVGcm9tKHRoaXMub2JqZWN0LGEpKX19KSx2LnByb3RvdHlwZT1JKHtfX3Byb3RvX186dS5wcm90b3R5cGUsYWRkUGF0aDpmdW5jdGlvbihhLGIpe2lmKHRoaXMuc3RhcnRlZCl0aHJvdyBFcnJvcigiQ2Fubm90IGFkZCBtb3JlIHBhdGhzIG9uY2Ugc3RhcnRlZC4iKTt2YXIgYj1iIGluc3RhbmNlb2YgaT9iOmooYiksYz1iP2IuZ2V0VmFsdWVGcm9tKGEpOnZvaWQgMDt0aGlzLm9ic2VydmVkLnB1c2goYSxiKSx0aGlzLnZhbHVlcy5wdXNoKGMpfSxzdGFydDpmdW5jdGlvbigpe3RoaXMuY29ubmVjdCgpLHRoaXMuc3luYyghMCl9LGdldFZhbHVlczpmdW5jdGlvbigpe3RoaXMub2JzZXJ2ZWRTZXQmJnRoaXMub2JzZXJ2ZWRTZXQucmVzZXQoKTtmb3IodmFyIGE9ITEsYj0wO2I8dGhpcy5vYnNlcnZlZC5sZW5ndGg7Yis9Mil7dmFyIGM9dGhpcy5vYnNlcnZlZFtiKzFdO2lmKGMpe3ZhciBkPXRoaXMub2JzZXJ2ZWRbYl0sZT1jLmdldFZhbHVlRnJvbShkLHRoaXMub2JzZXJ2ZWRTZXQpLGY9dGhpcy52YWx1ZXNbYi8yXTtpZighZyhlLGYpKXtpZighYSYmIXRoaXMudmFsdWVGbil7dGhpcy5vbGRWYWx1ZXM9dGhpcy5vbGRWYWx1ZXN8fFtdLHRoaXMuY2hhbmdlRmxhZ3M9dGhpcy5jaGFuZ2VGbGFnc3x8W107Zm9yKHZhciBoPTA7aDx0aGlzLnZhbHVlcy5sZW5ndGg7aCsrKXRoaXMub2xkVmFsdWVzW2hdPXRoaXMudmFsdWVzW2hdLHRoaXMuY2hhbmdlRmxhZ3NbaF09ITF9dGhpcy52YWx1ZUZufHwodGhpcy5jaGFuZ2VGbGFnc1tiLzJdPSEwKSx0aGlzLnZhbHVlc1tiLzJdPWUsYT0hMH19fXJldHVybiB0aGlzLm9ic2VydmVkU2V0JiZ0aGlzLm9ic2VydmVkU2V0LmNsZWFudXAoKSxhfSxjaGVjazpmdW5jdGlvbigpe2lmKHRoaXMuZ2V0VmFsdWVzKCkpe2lmKHRoaXMudmFsdWVGbil7aWYodGhpcy52YWx1ZT10aGlzLnZhbHVlRm4odGhpcy52YWx1ZXMpLGcodGhpcy52YWx1ZSx0aGlzLm9sZFZhbHVlKSlyZXR1cm4hMTt0aGlzLnJlcG9ydEFyZ3M9W3RoaXMudmFsdWUsdGhpcy5vbGRWYWx1ZV19ZWxzZSB0aGlzLnJlcG9ydEFyZ3M9W3RoaXMudmFsdWVzLHRoaXMub2xkVmFsdWVzLHRoaXMuY2hhbmdlRmxhZ3MsdGhpcy5vYnNlcnZlZF07cmV0dXJuITB9fSxzeW5jOmZ1bmN0aW9uKGEpe2EmJih0aGlzLmdldFZhbHVlcygpLHRoaXMudmFsdWVGbiYmKHRoaXMudmFsdWU9dGhpcy52YWx1ZUZuKHRoaXMudmFsdWVzKSkpLHRoaXMudmFsdWVGbiYmKHRoaXMub2xkVmFsdWU9dGhpcy52YWx1ZSl9LGNsb3NlOmZ1bmN0aW9uKCl7aWYodGhpcy5vYnNlcnZlZCl7Zm9yKHZhciBhPTA7YTx0aGlzLm9ic2VydmVkLmxlbmd0aDthKz0yKXt2YXIgYj10aGlzLm9ic2VydmVkW2FdO2ImJiJmdW5jdGlvbiI9PXR5cGVvZiBiLmNsb3NlJiZiLmNsb3NlKCl9dGhpcy5vYnNlcnZlZD12b2lkIDAsdGhpcy52YWx1ZXM9dm9pZCAwfXAucHJvdG90eXBlLmNsb3NlLmNhbGwodGhpcyl9fSk7dmFyICQ9eyJuZXciOiEwLHVwZGF0ZWQ6ITAsZGVsZXRlZDohMH07dS5kZWZpbmVQcm9wZXJ0eT1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9Yy5vYmplY3QsZT1qKGMucGF0aCksZj13KGEsYiksZz1uZXcgdShkLGMucGF0aCxmdW5jdGlvbihhLGIpe2YmJmYoInVwZGF0ZWQiLGIpfSk7cmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShhLGIse2dldDpmdW5jdGlvbigpe3JldHVybiBlLmdldFZhbHVlRnJvbShkKX0sc2V0OmZ1bmN0aW9uKGEpe2Uuc2V0VmFsdWVGcm9tKGQsYSl9LGNvbmZpZ3VyYWJsZTohMH0pLHtjbG9zZTpmdW5jdGlvbigpe3ZhciBjPWUuZ2V0VmFsdWVGcm9tKGQpO2YmJmcuZGVsaXZlcigpLGcuY2xvc2UoKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoYSxiLHt2YWx1ZTpjLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pfX19O3ZhciBfPTAsYWI9MSxiYj0yLGNiPTM7ei5wcm90b3R5cGU9e2NhbGNFZGl0RGlzdGFuY2VzOmZ1bmN0aW9uKGEsYixjLGQsZSxmKXtmb3IodmFyIGc9Zi1lKzEsaD1jLWIrMSxpPW5ldyBBcnJheShnKSxqPTA7Zz5qO2orKylpW2pdPW5ldyBBcnJheShoKSxpW2pdWzBdPWo7Zm9yKHZhciBrPTA7aD5rO2srKylpWzBdW2tdPWs7Zm9yKHZhciBqPTE7Zz5qO2orKylmb3IodmFyIGs9MTtoPms7aysrKWlmKHRoaXMuZXF1YWxzKGFbYitrLTFdLGRbZStqLTFdKSlpW2pdW2tdPWlbai0xXVtrLTFdO2Vsc2V7dmFyIGw9aVtqLTFdW2tdKzEsbT1pW2pdW2stMV0rMTtpW2pdW2tdPW0+bD9sOm19cmV0dXJuIGl9LHNwbGljZU9wZXJhdGlvbnNGcm9tRWRpdERpc3RhbmNlczpmdW5jdGlvbihhKXtmb3IodmFyIGI9YS5sZW5ndGgtMSxjPWFbMF0ubGVuZ3RoLTEsZD1hW2JdW2NdLGU9W107Yj4wfHxjPjA7KWlmKDAhPWIpaWYoMCE9Yyl7dmFyIGYsZz1hW2ItMV1bYy0xXSxoPWFbYi0xXVtjXSxpPWFbYl1bYy0xXTtmPWk+aD9nPmg/aDpnOmc+aT9pOmcsZj09Zz8oZz09ZD9lLnB1c2goXyk6KGUucHVzaChhYiksZD1nKSxiLS0sYy0tKTpmPT1oPyhlLnB1c2goY2IpLGItLSxkPWgpOihlLnB1c2goYmIpLGMtLSxkPWkpfWVsc2UgZS5wdXNoKGNiKSxiLS07ZWxzZSBlLnB1c2goYmIpLGMtLTtyZXR1cm4gZS5yZXZlcnNlKCksZX0sY2FsY1NwbGljZXM6ZnVuY3Rpb24oYSxiLGMsZCxlLGYpe3ZhciBnPTAsaD0wLGk9TWF0aC5taW4oYy1iLGYtZSk7aWYoMD09YiYmMD09ZSYmKGc9dGhpcy5zaGFyZWRQcmVmaXgoYSxkLGkpKSxjPT1hLmxlbmd0aCYmZj09ZC5sZW5ndGgmJihoPXRoaXMuc2hhcmVkU3VmZml4KGEsZCxpLWcpKSxiKz1nLGUrPWcsYy09aCxmLT1oLDA9PWMtYiYmMD09Zi1lKXJldHVybltdO2lmKGI9PWMpe2Zvcih2YXIgaj15KGIsW10sMCk7Zj5lOylqLnJlbW92ZWQucHVzaChkW2UrK10pO3JldHVybltqXX1pZihlPT1mKXJldHVyblt5KGIsW10sYy1iKV07Zm9yKHZhciBrPXRoaXMuc3BsaWNlT3BlcmF0aW9uc0Zyb21FZGl0RGlzdGFuY2VzKHRoaXMuY2FsY0VkaXREaXN0YW5jZXMoYSxiLGMsZCxlLGYpKSxqPXZvaWQgMCxsPVtdLG09YixuPWUsbz0wO288ay5sZW5ndGg7bysrKXN3aXRjaChrW29dKXtjYXNlIF86aiYmKGwucHVzaChqKSxqPXZvaWQgMCksbSsrLG4rKzticmVhaztjYXNlIGFiOmp8fChqPXkobSxbXSwwKSksai5hZGRlZENvdW50KyssbSsrLGoucmVtb3ZlZC5wdXNoKGRbbl0pLG4rKzticmVhaztjYXNlIGJiOmp8fChqPXkobSxbXSwwKSksai5hZGRlZENvdW50KyssbSsrO2JyZWFrO2Nhc2UgY2I6anx8KGo9eShtLFtdLDApKSxqLnJlbW92ZWQucHVzaChkW25dKSxuKyt9cmV0dXJuIGomJmwucHVzaChqKSxsfSxzaGFyZWRQcmVmaXg6ZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZD0wO2M+ZDtkKyspaWYoIXRoaXMuZXF1YWxzKGFbZF0sYltkXSkpcmV0dXJuIGQ7cmV0dXJuIGN9LHNoYXJlZFN1ZmZpeDpmdW5jdGlvbihhLGIsYyl7Zm9yKHZhciBkPWEubGVuZ3RoLGU9Yi5sZW5ndGgsZj0wO2M+ZiYmdGhpcy5lcXVhbHMoYVstLWRdLGJbLS1lXSk7KWYrKztyZXR1cm4gZn0sY2FsY3VsYXRlU3BsaWNlczpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLmNhbGNTcGxpY2VzKGEsMCxhLmxlbmd0aCxiLDAsYi5sZW5ndGgpfSxlcXVhbHM6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT09PWJ9fTt2YXIgZGI9bmV3IHo7YS5PYnNlcnZlcj1wLGEuT2JzZXJ2ZXIuaGFzT2JqZWN0T2JzZXJ2ZT1GLGEuQXJyYXlPYnNlcnZlcj1zLGEuQXJyYXlPYnNlcnZlci5jYWxjdWxhdGVTcGxpY2VzPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGRiLmNhbGN1bGF0ZVNwbGljZXMoYSxiKX0sYS5BcnJheVNwbGljZT16LGEuT2JqZWN0T2JzZXJ2ZXI9cixhLlBhdGhPYnNlcnZlcj11LGEuQ29tcG91bmRQYXRoT2JzZXJ2ZXI9dixhLlBhdGg9aX0oInVuZGVmaW5lZCIhPXR5cGVvZiBnbG9iYWwmJmdsb2JhbD9nbG9iYWw6dGhpcyksd2luZG93LlBsYXRmb3JtPXdpbmRvdy5QbGF0Zm9ybXx8e30sd2luZG93LmxvZ0ZsYWdzPXdpbmRvdy5sb2dGbGFnc3x8e30sZnVuY3Rpb24oYSl7dmFyIGI9YS5mbGFnc3x8e307bG9jYXRpb24uc2VhcmNoLnNsaWNlKDEpLnNwbGl0KCImIikuZm9yRWFjaChmdW5jdGlvbihhKXthPWEuc3BsaXQoIj0iKSxhWzBdJiYoYlthWzBdXT1hWzFdfHwhMCl9KSxiLnNoYWRvdz1iLnNoYWRvd3x8Yi5zaGFkb3dkb218fGIucG9seWZpbGwsYi5zaGFkb3c9Im5hdGl2ZSI9PT1iLnNoYWRvdz8hMTpiLnNoYWRvd3x8IUhUTUxFbGVtZW50LnByb3RvdHlwZS5jcmVhdGVTaGFkb3dSb290JiYicG9seWZpbGwiLGEuZmxhZ3M9Yn0oUGxhdGZvcm0pLCJwb2x5ZmlsbCI9PT1QbGF0Zm9ybS5mbGFncy5zaGFkb3cpe3ZhciBTaGFkb3dET01Qb2x5ZmlsbD17fTshZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7aWYoIWEpdGhyb3cgbmV3IEVycm9yKCJBc3NlcnRpb24gZmFpbGVkIil9ZnVuY3Rpb24gYyhhLGIpe3JldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhiKS5mb3JFYWNoKGZ1bmN0aW9uKGMpe09iamVjdC5kZWZpbmVQcm9wZXJ0eShhLGMsT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihiLGMpKX0pLGF9ZnVuY3Rpb24gZChhLGIpe3JldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhiKS5mb3JFYWNoKGZ1bmN0aW9uKGMpe3N3aXRjaChjKXtjYXNlImFyZ3VtZW50cyI6Y2FzZSJjYWxsZXIiOmNhc2UibGVuZ3RoIjpjYXNlIm5hbWUiOmNhc2UicHJvdG90eXBlIjpjYXNlInRvU3RyaW5nIjpyZXR1cm59T2JqZWN0LmRlZmluZVByb3BlcnR5KGEsYyxPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGIsYykpfSksYX1mdW5jdGlvbiBlKGEsYil7Zm9yKHZhciBjPTA7YzxiLmxlbmd0aDtjKyspaWYoYltjXWluIGEpcmV0dXJuIGJbY119ZnVuY3Rpb24gZihhKXt2YXIgYj1hLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGEpLGM9RC5nZXQoYik7aWYoYylyZXR1cm4gYzt2YXIgZD1mKGIpLGU9cyhkKTtyZXR1cm4gcChiLGUsYSksZX1mdW5jdGlvbiBnKGEsYil7bihhLGIsITApfWZ1bmN0aW9uIGgoYSxiKXtuKGIsYSwhMSl9ZnVuY3Rpb24gaShhKXtyZXR1cm4vXm9uW2Etel0rJC8udGVzdChhKX1mdW5jdGlvbiBqKGEpe3JldHVybi9eXHdbYS16QS1aXzAtOV0qJC8udGVzdChhKX1mdW5jdGlvbiBrKGEpe3JldHVybiBHJiZqKGEpP25ldyBGdW5jdGlvbigicmV0dXJuIHRoaXMuaW1wbC4iK2EpOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaW1wbFthXX19ZnVuY3Rpb24gbChhKXtyZXR1cm4gRyYmaihhKT9uZXcgRnVuY3Rpb24oInYiLCJ0aGlzLmltcGwuIithKyIgPSB2Iik6ZnVuY3Rpb24oYil7dGhpcy5pbXBsW2FdPWJ9fWZ1bmN0aW9uIG0oYSl7cmV0dXJuIEcmJmooYSk/bmV3IEZ1bmN0aW9uKCJyZXR1cm4gdGhpcy5pbXBsLiIrYSsiLmFwcGx5KHRoaXMuaW1wbCwgYXJndW1lbnRzKSIpOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaW1wbFthXS5hcHBseSh0aGlzLmltcGwsYXJndW1lbnRzKX19ZnVuY3Rpb24gbihiLGMsZCl7T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoYikuZm9yRWFjaChmdW5jdGlvbihlKXtpZighKGUgaW4gYykpe0omJmIuX19sb29rdXBHZXR0ZXJfXyhlKTt2YXIgZjt0cnl7Zj1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGIsZSl9Y2F0Y2goZyl7Zj1LfXZhciBoLGo7aWYoZCYmImZ1bmN0aW9uIj09dHlwZW9mIGYudmFsdWUpcmV0dXJuIGNbZV09bShlKSx2b2lkIDA7dmFyIG49aShlKTtoPW4/YS5nZXRFdmVudEhhbmRsZXJHZXR0ZXIoZSk6ayhlKSwoZi53cml0YWJsZXx8Zi5zZXQpJiYoaj1uP2EuZ2V0RXZlbnRIYW5kbGVyU2V0dGVyKGUpOmwoZSkpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjLGUse2dldDpoLHNldDpqLGNvbmZpZ3VyYWJsZTpmLmNvbmZpZ3VyYWJsZSxlbnVtZXJhYmxlOmYuZW51bWVyYWJsZX0pfX0pfWZ1bmN0aW9uIG8oYSxiLGMpe3ZhciBlPWEucHJvdG90eXBlO3AoZSxiLGMpLGQoYixhKX1mdW5jdGlvbiBwKGEsYyxkKXt2YXIgZT1jLnByb3RvdHlwZTtiKHZvaWQgMD09PUQuZ2V0KGEpKSxELnNldChhLGMpLEUuc2V0KGUsYSksZyhhLGUpLGQmJmgoZSxkKX1mdW5jdGlvbiBxKGEsYil7cmV0dXJuIEQuZ2V0KGIucHJvdG90eXBlKT09PWF9ZnVuY3Rpb24gcihhKXt2YXIgYj1PYmplY3QuZ2V0UHJvdG90eXBlT2YoYSksYz1mKGIpLGQ9cyhjKTtyZXR1cm4gcChiLGQsYSksZH1mdW5jdGlvbiBzKGEpe2Z1bmN0aW9uIGIoYil7YS5jYWxsKHRoaXMsYil9cmV0dXJuIGIucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYS5wcm90b3R5cGUpLGIucHJvdG90eXBlLmNvbnN0cnVjdG9yPWIsYn1mdW5jdGlvbiB0KGEpe3JldHVybiBhIGluc3RhbmNlb2YgRi5FdmVudFRhcmdldHx8YSBpbnN0YW5jZW9mIEYuRXZlbnR8fGEgaW5zdGFuY2VvZiBGLlJhbmdlfHxhIGluc3RhbmNlb2YgRi5ET01JbXBsZW1lbnRhdGlvbnx8YSBpbnN0YW5jZW9mIEYuQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfHxGLldlYkdMUmVuZGVyaW5nQ29udGV4dCYmYSBpbnN0YW5jZW9mIEYuV2ViR0xSZW5kZXJpbmdDb250ZXh0fWZ1bmN0aW9uIHUoYSl7cmV0dXJuIGEgaW5zdGFuY2VvZiBOfHxhIGluc3RhbmNlb2YgTXx8YSBpbnN0YW5jZW9mIE98fGEgaW5zdGFuY2VvZiBQfHxhIGluc3RhbmNlb2YgTHx8YSBpbnN0YW5jZW9mIFF8fFImJmEgaW5zdGFuY2VvZiBSfWZ1bmN0aW9uIHYoYSl7cmV0dXJuIG51bGw9PT1hP251bGw6KGIodShhKSksYS5wb2x5bWVyV3JhcHBlcl98fChhLnBvbHltZXJXcmFwcGVyXz1uZXcoZihhKSkoYSkpKX1mdW5jdGlvbiB3KGEpe3JldHVybiBudWxsPT09YT9udWxsOihiKHQoYSkpLGEuaW1wbCl9ZnVuY3Rpb24geChhKXtyZXR1cm4gYSYmdChhKT93KGEpOmF9ZnVuY3Rpb24geShhKXtyZXR1cm4gYSYmIXQoYSk/dihhKTphfWZ1bmN0aW9uIHooYSxjKXtudWxsIT09YyYmKGIodShhKSksYih2b2lkIDA9PT1jfHx0KGMpKSxhLnBvbHltZXJXcmFwcGVyXz1jKX1mdW5jdGlvbiBBKGEsYixjKXtPYmplY3QuZGVmaW5lUHJvcGVydHkoYS5wcm90b3R5cGUsYix7Z2V0OmMsY29uZmlndXJhYmxlOiEwLGVudW1lcmFibGU6ITB9KX1mdW5jdGlvbiBCKGEsYil7QShhLGIsZnVuY3Rpb24oKXtyZXR1cm4gdih0aGlzLmltcGxbYl0pfSl9ZnVuY3Rpb24gQyhhLGIpe2EuZm9yRWFjaChmdW5jdGlvbihhKXtiLmZvckVhY2goZnVuY3Rpb24oYil7YS5wcm90b3R5cGVbYl09ZnVuY3Rpb24oKXt2YXIgYT15KHRoaXMpO3JldHVybiBhW2JdLmFwcGx5KGEsYXJndW1lbnRzKX19KX0pfXZhciBEPW5ldyBXZWFrTWFwLEU9bmV3IFdlYWtNYXAsRj1PYmplY3QuY3JlYXRlKG51bGwpLEc9ISgic2VjdXJpdHlQb2xpY3kiaW4gZG9jdW1lbnQpfHxkb2N1bWVudC5zZWN1cml0eVBvbGljeS5hbGxvd3NFdmFsO2lmKEcpdHJ5e3ZhciBIPW5ldyBGdW5jdGlvbigiIiwicmV0dXJuIHRydWU7Iik7Rz1IKCl9Y2F0Y2goSSl7fU9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHdpbmRvdyk7dmFyIEo9L0ZpcmVmb3gvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCksSz17Z2V0OmZ1bmN0aW9uKCl7fSxzZXQ6ZnVuY3Rpb24oKXt9LGNvbmZpZ3VyYWJsZTohMCxlbnVtZXJhYmxlOiEwfSxMPXdpbmRvdy5ET01JbXBsZW1lbnRhdGlvbixNPXdpbmRvdy5FdmVudCxOPXdpbmRvdy5Ob2RlLE89d2luZG93LldpbmRvdyxQPXdpbmRvdy5SYW5nZSxRPXdpbmRvdy5DYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsUj13aW5kb3cuV2ViR0xSZW5kZXJpbmdDb250ZXh0O2EuYXNzZXJ0PWIsYS5jb25zdHJ1Y3RvclRhYmxlPUQsYS5kZWZpbmVHZXR0ZXI9QSxhLmRlZmluZVdyYXBHZXR0ZXI9QixhLmZvcndhcmRNZXRob2RzVG9XcmFwcGVyPUMsYS5pc1dyYXBwZXJGb3I9cSxhLm1peGluPWMsYS5uYXRpdmVQcm90b3R5cGVUYWJsZT1FLGEub25lT2Y9ZSxhLnJlZ2lzdGVyT2JqZWN0PXIsYS5yZWdpc3RlcldyYXBwZXI9byxhLnJld3JhcD16LGEudW53cmFwPXcsYS51bndyYXBJZk5lZWRlZD14LGEud3JhcD12LGEud3JhcElmTmVlZGVkPXksYS53cmFwcGVycz1GfSh0aGlzLlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtyZXR1cm4gYSBpbnN0YW5jZW9mIE8uU2hhZG93Um9vdH1mdW5jdGlvbiBjKGEpe3ZhciBiPWEubG9jYWxOYW1lO3JldHVybiJjb250ZW50Ij09PWJ8fCJzaGFkb3ciPT09Yn1mdW5jdGlvbiBkKGEpe3JldHVybiEhYS5zaGFkb3dSb290fWZ1bmN0aW9uIGUoYSl7dmFyIGI7cmV0dXJuIGEucGFyZW50Tm9kZXx8KGI9YS5kZWZhdWx0VmlldykmJk4oYil8fG51bGx9ZnVuY3Rpb24gZihmLGcsaCl7aWYoaC5sZW5ndGgpcmV0dXJuIGguc2hpZnQoKTtpZihiKGYpKXJldHVybiBqKGYpfHxhLmdldEhvc3RGb3JTaGFkb3dSb290KGYpO3ZhciBpPWEuZXZlbnRQYXJlbnRzVGFibGUuZ2V0KGYpO2lmKGkpe2Zvcih2YXIgaz0xO2s8aS5sZW5ndGg7aysrKWhbay0xXT1pW2tdO3JldHVybiBpWzBdfWlmKGcmJmMoZikpe3ZhciBsPWYucGFyZW50Tm9kZTtpZihsJiZkKGwpKWZvcih2YXIgbT1hLmdldFNoYWRvd1RyZWVzKGwpLG49aihnKSxrPTA7azxtLmxlbmd0aDtrKyspaWYobVtrXS5jb250YWlucyhuKSlyZXR1cm4gbn1yZXR1cm4gZShmKX1mdW5jdGlvbiBnKGEpe2Zvcih2YXIgZD1bXSxlPWEsZz1bXSxpPVtdO2U7KXt2YXIgaj1udWxsO2lmKGMoZSkpe2o9aChkKTt2YXIgaz1kW2QubGVuZ3RoLTFdfHxlO2QucHVzaChrKX1lbHNlIGQubGVuZ3RofHxkLnB1c2goZSk7dmFyIGw9ZFtkLmxlbmd0aC0xXTtnLnB1c2goe3RhcmdldDpsLGN1cnJlbnRUYXJnZXQ6ZX0pLGIoZSkmJmQucG9wKCksZT1mKGUsaixpKX1yZXR1cm4gZ31mdW5jdGlvbiBoKGEpe2Zvcih2YXIgYj1hLmxlbmd0aC0xO2I+PTA7Yi0tKWlmKCFjKGFbYl0pKXJldHVybiBhW2JdO3JldHVybiBudWxsfWZ1bmN0aW9uIGkoZCxlKXtmb3IodmFyIGc9W107ZDspe2Zvcih2YXIgaT1bXSxqPWUsbD12b2lkIDA7ajspe3ZhciBuPW51bGw7aWYoaS5sZW5ndGgpe2lmKGMoaikmJihuPWgoaSksayhsKSkpe3ZhciBvPWlbaS5sZW5ndGgtMV07aS5wdXNoKG8pfX1lbHNlIGkucHVzaChqKTtpZihtKGosZCkpcmV0dXJuIGlbaS5sZW5ndGgtMV07YihqKSYmaS5wb3AoKSxsPWosaj1mKGosbixnKX1kPWIoZCk/YS5nZXRIb3N0Rm9yU2hhZG93Um9vdChkKTpkLnBhcmVudE5vZGV9fWZ1bmN0aW9uIGooYil7cmV0dXJuIGEuaW5zZXJ0aW9uUGFyZW50VGFibGUuZ2V0KGIpfWZ1bmN0aW9uIGsoYSl7cmV0dXJuIGooYSl9ZnVuY3Rpb24gbChhKXtmb3IodmFyIGI7Yj1hLnBhcmVudE5vZGU7KWE9YjtyZXR1cm4gYX1mdW5jdGlvbiBtKGEsYil7cmV0dXJuIGwoYSk9PT1sKGIpfWZ1bmN0aW9uIG4oYixjKXtpZihiPT09YylyZXR1cm4hMDtpZihiIGluc3RhbmNlb2YgTy5TaGFkb3dSb290KXt2YXIgZD1hLmdldEhvc3RGb3JTaGFkb3dSb290KGIpO3JldHVybiBuKGwoZCksYyl9cmV0dXJuITF9ZnVuY3Rpb24gbygpe1orK31mdW5jdGlvbiBwKCl7Wi0tfWZ1bmN0aW9uIHEoYil7aWYoIVEuZ2V0KGIpKXtpZihRLnNldChiLCEwKSxiIGluc3RhbmNlb2YgJCl7aWYoWilyZXR1cm59ZWxzZSBhLnJlbmRlckFsbFBlbmRpbmcoKTt2YXIgYz1OKGIudGFyZ2V0KSxkPU4oYik7cmV0dXJuIHIoZCxjKX19ZnVuY3Rpb24gcihhLGIpe3ZhciBjPWcoYik7cmV0dXJuImxvYWQiPT09YS50eXBlJiYyPT09Yy5sZW5ndGgmJmNbMF0udGFyZ2V0IGluc3RhbmNlb2YgTy5Eb2N1bWVudCYmYy5zaGlmdCgpLFkuc2V0KGEsYykscyhhLGMpJiZ0KGEsYykmJnUoYSxjKSxVLnNldChhLHguTk9ORSksUy5zZXQoYSxudWxsKSxhLmRlZmF1bHRQcmV2ZW50ZWR9ZnVuY3Rpb24gcyhhLGIpe2Zvcih2YXIgYyxkPWIubGVuZ3RoLTE7ZD4wO2QtLSl7dmFyIGU9YltkXS50YXJnZXQsZj1iW2RdLmN1cnJlbnRUYXJnZXQ7aWYoZSE9PWYmJihjPXguQ0FQVFVSSU5HX1BIQVNFLCF2KGJbZF0sYSxjKSkpcmV0dXJuITF9cmV0dXJuITB9ZnVuY3Rpb24gdChhLGIpe3ZhciBjPXguQVRfVEFSR0VUO3JldHVybiB2KGJbMF0sYSxjKX1mdW5jdGlvbiB1KGEsYil7Zm9yKHZhciBjLGQ9YS5idWJibGVzLGU9MTtlPGIubGVuZ3RoO2UrKyl7dmFyIGY9YltlXS50YXJnZXQsZz1iW2VdLmN1cnJlbnRUYXJnZXQ7aWYoZj09PWcpYz14LkFUX1RBUkdFVDtlbHNle2lmKCFkfHxXLmdldChhKSljb250aW51ZTtjPXguQlVCQkxJTkdfUEhBU0V9aWYoIXYoYltlXSxhLGMpKXJldHVybn19ZnVuY3Rpb24gdihhLGIsYyl7dmFyIGQ9YS50YXJnZXQsZT1hLmN1cnJlbnRUYXJnZXQsZj1QLmdldChlKTtpZighZilyZXR1cm4hMDtpZigicmVsYXRlZFRhcmdldCJpbiBiKXt2YXIgZz1NKGIpO2lmKGcucmVsYXRlZFRhcmdldCl7dmFyIGg9TihnLnJlbGF0ZWRUYXJnZXQpLGo9aShlLGgpO2lmKGo9PT1kKXJldHVybiEwO1Quc2V0KGIsail9fVUuc2V0KGIsYyk7dmFyIGs9Yi50eXBlLGw9ITE7Ui5zZXQoYixkKSxTLnNldChiLGUpO2Zvcih2YXIgbT0wO208Zi5sZW5ndGg7bSsrKXt2YXIgbj1mW21dO2lmKG4ucmVtb3ZlZClsPSEwO2Vsc2UgaWYoIShuLnR5cGUhPT1rfHwhbi5jYXB0dXJlJiZjPT09eC5DQVBUVVJJTkdfUEhBU0V8fG4uY2FwdHVyZSYmYz09PXguQlVCQkxJTkdfUEhBU0UpKXRyeXtpZigiZnVuY3Rpb24iPT10eXBlb2Ygbi5oYW5kbGVyP24uaGFuZGxlci5jYWxsKGUsYik6bi5oYW5kbGVyLmhhbmRsZUV2ZW50KGIpLFcuZ2V0KGIpKXJldHVybiExfWNhdGNoKG8pe3dpbmRvdy5vbmVycm9yP3dpbmRvdy5vbmVycm9yKG8ubWVzc2FnZSk6Y29uc29sZS5lcnJvcihvLG8uc3RhY2spfX1pZihsKXt2YXIgcD1mLnNsaWNlKCk7Zi5sZW5ndGg9MDtmb3IodmFyIG09MDttPHAubGVuZ3RoO20rKylwW21dLnJlbW92ZWR8fGYucHVzaChwW21dKX1yZXR1cm4hVi5nZXQoYil9ZnVuY3Rpb24gdyhhLGIsYyl7dGhpcy50eXBlPWEsdGhpcy5oYW5kbGVyPWIsdGhpcy5jYXB0dXJlPUJvb2xlYW4oYyl9ZnVuY3Rpb24geChhLGIpe3JldHVybiBhIGluc3RhbmNlb2YgXz8odGhpcy5pbXBsPWEsdm9pZCAwKTpOKEIoXywiRXZlbnQiLGEsYikpfWZ1bmN0aW9uIHkoYSl7cmV0dXJuIGEmJmEucmVsYXRlZFRhcmdldD9PYmplY3QuY3JlYXRlKGEse3JlbGF0ZWRUYXJnZXQ6e3ZhbHVlOk0oYS5yZWxhdGVkVGFyZ2V0KX19KTphfWZ1bmN0aW9uIHooYSxiLGMpe3ZhciBkPXdpbmRvd1thXSxlPWZ1bmN0aW9uKGIsYyl7cmV0dXJuIGIgaW5zdGFuY2VvZiBkPyh0aGlzLmltcGw9Yix2b2lkIDApOk4oQihkLGEsYixjKSl9O3JldHVybiBlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGIucHJvdG90eXBlKSxjJiZLKGUucHJvdG90eXBlLGMpLGQmJihkLnByb3RvdHlwZVsiaW5pdCIrYV0/TChkLGUsZG9jdW1lbnQuY3JlYXRlRXZlbnQoYSkpOkwoZCxlLG5ldyBkKCJ0ZW1wIikpKSxlfWZ1bmN0aW9uIEEoYSxiKXtyZXR1cm4gZnVuY3Rpb24oKXthcmd1bWVudHNbYl09TShhcmd1bWVudHNbYl0pO3ZhciBjPU0odGhpcyk7Y1thXS5hcHBseShjLGFyZ3VtZW50cyl9fWZ1bmN0aW9uIEIoYSxiLGMsZCl7aWYoamIpcmV0dXJuIG5ldyBhKGMseShkKSk7dmFyIGU9TShkb2N1bWVudC5jcmVhdGVFdmVudChiKSksZj1pYltiXSxnPVtjXTtyZXR1cm4gT2JqZWN0LmtleXMoZikuZm9yRWFjaChmdW5jdGlvbihhKXt2YXIgYj1udWxsIT1kJiZhIGluIGQ/ZFthXTpmW2FdOyJyZWxhdGVkVGFyZ2V0Ij09PWEmJihiPU0oYikpLGcucHVzaChiKX0pLGVbImluaXQiK2JdLmFwcGx5KGUsZyksZX1mdW5jdGlvbiBDKGEpe3JldHVybiJmdW5jdGlvbiI9PXR5cGVvZiBhPyEwOmEmJmEuaGFuZGxlRXZlbnR9ZnVuY3Rpb24gRChhKXt0aGlzLmltcGw9YX1mdW5jdGlvbiBFKGIpe3JldHVybiBiIGluc3RhbmNlb2YgTy5TaGFkb3dSb290JiYoYj1hLmdldEhvc3RGb3JTaGFkb3dSb290KGIpKSxNKGIpfWZ1bmN0aW9uIEYoYSl7SihhLG1iKX1mdW5jdGlvbiBHKGIsYyxkLGUpe2EucmVuZGVyQWxsUGVuZGluZygpO2Zvcih2YXIgZj1OKG5iLmNhbGwoYy5pbXBsLGQsZSkpLGg9ZyhmLHRoaXMpLGk9MDtpPGgubGVuZ3RoO2krKyl7dmFyIGo9aFtpXTtpZihqLmN1cnJlbnRUYXJnZXQ9PT1iKXJldHVybiBqLnRhcmdldH1yZXR1cm4gbnVsbH1mdW5jdGlvbiBIKGEpe3JldHVybiBmdW5jdGlvbigpe3ZhciBiPVguZ2V0KHRoaXMpO3JldHVybiBiJiZiW2FdJiZiW2FdLnZhbHVlfHxudWxsfX1mdW5jdGlvbiBJKGEpe3ZhciBiPWEuc2xpY2UoMik7cmV0dXJuIGZ1bmN0aW9uKGMpe3ZhciBkPVguZ2V0KHRoaXMpO2R8fChkPU9iamVjdC5jcmVhdGUobnVsbCksWC5zZXQodGhpcyxkKSk7dmFyIGU9ZFthXTtpZihlJiZ0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoYixlLndyYXBwZWQsITEpLCJmdW5jdGlvbiI9PXR5cGVvZiBjKXt2YXIgZj1mdW5jdGlvbihiKXt2YXIgZD1jLmNhbGwodGhpcyxiKTtkPT09ITE/Yi5wcmV2ZW50RGVmYXVsdCgpOiJvbmJlZm9yZXVubG9hZCI9PT1hJiYic3RyaW5nIj09dHlwZW9mIGQmJihiLnJldHVyblZhbHVlPWQpfTt0aGlzLmFkZEV2ZW50TGlzdGVuZXIoYixmLCExKSxkW2FdPXt2YWx1ZTpjLHdyYXBwZWQ6Zn19fX12YXIgSj1hLmZvcndhcmRNZXRob2RzVG9XcmFwcGVyLEs9YS5taXhpbixMPWEucmVnaXN0ZXJXcmFwcGVyLE09YS51bndyYXAsTj1hLndyYXAsTz1hLndyYXBwZXJzO25ldyBXZWFrTWFwO3ZhciBQPW5ldyBXZWFrTWFwLFE9bmV3IFdlYWtNYXAsUj1uZXcgV2Vha01hcCxTPW5ldyBXZWFrTWFwLFQ9bmV3IFdlYWtNYXAsVT1uZXcgV2Vha01hcCxWPW5ldyBXZWFrTWFwLFc9bmV3IFdlYWtNYXAsWD1uZXcgV2Vha01hcCxZPW5ldyBXZWFrTWFwLFo9MCwkPXdpbmRvdy5NdXRhdGlvbkV2ZW50O3cucHJvdG90eXBlPXtlcXVhbHM6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuaGFuZGxlcj09PWEuaGFuZGxlciYmdGhpcy50eXBlPT09YS50eXBlJiZ0aGlzLmNhcHR1cmU9PT1hLmNhcHR1cmV9LGdldCByZW1vdmVkKCl7cmV0dXJuIG51bGw9PT10aGlzLmhhbmRsZXJ9LHJlbW92ZTpmdW5jdGlvbigpe3RoaXMuaGFuZGxlcj1udWxsfX07dmFyIF89d2luZG93LkV2ZW50O3gucHJvdG90eXBlPXtnZXQgdGFyZ2V0KCl7cmV0dXJuIFIuZ2V0KHRoaXMpfSxnZXQgY3VycmVudFRhcmdldCgpe3JldHVybiBTLmdldCh0aGlzKX0sZ2V0IGV2ZW50UGhhc2UoKXtyZXR1cm4gVS5nZXQodGhpcyl9LGdldCBwYXRoKCl7dmFyIGE9bmV3IE8uTm9kZUxpc3QsYj1ZLmdldCh0aGlzKTtpZihiKXtmb3IodmFyIGM9MCxkPWIubGVuZ3RoLTEsZT1sKFMuZ2V0KHRoaXMpKSxmPTA7ZD49ZjtmKyspe3ZhciBnPWJbZl0uY3VycmVudFRhcmdldCxoPWwoZyk7bihlLGgpJiYoZiE9PWR8fGcgaW5zdGFuY2VvZiBPLk5vZGUpJiYoYVtjKytdPWcpfWEubGVuZ3RoPWN9cmV0dXJuIGF9LHN0b3BQcm9wYWdhdGlvbjpmdW5jdGlvbigpe1Yuc2V0KHRoaXMsITApfSxzdG9wSW1tZWRpYXRlUHJvcGFnYXRpb246ZnVuY3Rpb24oKXtWLnNldCh0aGlzLCEwKSxXLnNldCh0aGlzLCEwKX19LEwoXyx4LGRvY3VtZW50LmNyZWF0ZUV2ZW50KCJFdmVudCIpKTt2YXIgYWI9eigiVUlFdmVudCIseCksYmI9eigiQ3VzdG9tRXZlbnQiLHgpLGNiPXtnZXQgcmVsYXRlZFRhcmdldCgpe3JldHVybiBULmdldCh0aGlzKXx8TihNKHRoaXMpLnJlbGF0ZWRUYXJnZXQpfX0sZGI9Syh7aW5pdE1vdXNlRXZlbnQ6QSgiaW5pdE1vdXNlRXZlbnQiLDE0KX0sY2IpLGViPUsoe2luaXRGb2N1c0V2ZW50OkEoImluaXRGb2N1c0V2ZW50Iiw1KX0sY2IpLGZiPXooIk1vdXNlRXZlbnQiLGFiLGRiKSxnYj16KCJGb2N1c0V2ZW50IixhYixlYiksaGI9eigiTXV0YXRpb25FdmVudCIseCx7aW5pdE11dGF0aW9uRXZlbnQ6QSgiaW5pdE11dGF0aW9uRXZlbnQiLDMpLGdldCByZWxhdGVkTm9kZSgpe3JldHVybiBOKHRoaXMuaW1wbC5yZWxhdGVkTm9kZSl9fSksaWI9T2JqZWN0LmNyZWF0ZShudWxsKSxqYj1mdW5jdGlvbigpe3RyeXtuZXcgd2luZG93Lk1vdXNlRXZlbnQoImNsaWNrIil9Y2F0Y2goYSl7cmV0dXJuITF9cmV0dXJuITB9KCk7aWYoIWpiKXt2YXIga2I9ZnVuY3Rpb24oYSxiLGMpe2lmKGMpe3ZhciBkPWliW2NdO2I9SyhLKHt9LGQpLGIpfWliW2FdPWJ9O2tiKCJFdmVudCIse2J1YmJsZXM6ITEsY2FuY2VsYWJsZTohMX0pLGtiKCJDdXN0b21FdmVudCIse2RldGFpbDpudWxsfSwiRXZlbnQiKSxrYigiVUlFdmVudCIse3ZpZXc6bnVsbCxkZXRhaWw6MH0sIkV2ZW50Iiksa2IoIk1vdXNlRXZlbnQiLHtzY3JlZW5YOjAsc2NyZWVuWTowLGNsaWVudFg6MCxjbGllbnRZOjAsY3RybEtleTohMSxhbHRLZXk6ITEsc2hpZnRLZXk6ITEsbWV0YUtleTohMSxidXR0b246MCxyZWxhdGVkVGFyZ2V0Om51bGx9LCJVSUV2ZW50Iiksa2IoIkZvY3VzRXZlbnQiLHtyZWxhdGVkVGFyZ2V0Om51bGx9LCJVSUV2ZW50Iil9dmFyIGxiPXdpbmRvdy5FdmVudFRhcmdldCxtYj1bImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZGlzcGF0Y2hFdmVudCJdO1tOb2RlLFdpbmRvd10uZm9yRWFjaChmdW5jdGlvbihhKXt2YXIgYj1hLnByb3RvdHlwZTttYi5mb3JFYWNoKGZ1bmN0aW9uKGEpe09iamVjdC5kZWZpbmVQcm9wZXJ0eShiLGErIl8iLHt2YWx1ZTpiW2FdfSl9KX0pLEQucHJvdG90eXBlPXthZGRFdmVudExpc3RlbmVyOmZ1bmN0aW9uKGEsYixjKXtpZihDKGIpKXt2YXIgZD1uZXcgdyhhLGIsYyksZT1QLmdldCh0aGlzKTtpZihlKXtmb3IodmFyIGY9MDtmPGUubGVuZ3RoO2YrKylpZihkLmVxdWFscyhlW2ZdKSlyZXR1cm59ZWxzZSBlPVtdLFAuc2V0KHRoaXMsZSk7ZS5wdXNoKGQpO3ZhciBnPUUodGhpcyk7Zy5hZGRFdmVudExpc3RlbmVyXyhhLHEsITApfX0scmVtb3ZlRXZlbnRMaXN0ZW5lcjpmdW5jdGlvbihhLGIsYyl7Yz1Cb29sZWFuKGMpO3ZhciBkPVAuZ2V0KHRoaXMpO2lmKGQpe2Zvcih2YXIgZT0wLGY9ITEsZz0wO2c8ZC5sZW5ndGg7ZysrKWRbZ10udHlwZT09PWEmJmRbZ10uY2FwdHVyZT09PWMmJihlKyssZFtnXS5oYW5kbGVyPT09YiYmKGY9ITAsZFtnXS5yZW1vdmUoKSkpO2lmKGYmJjE9PT1lKXt2YXIgaD1FKHRoaXMpO2gucmVtb3ZlRXZlbnRMaXN0ZW5lcl8oYSxxLCEwKX19fSxkaXNwYXRjaEV2ZW50OmZ1bmN0aW9uKGEpe3ZhciBiPUUodGhpcyksYz1NKGEpO3JldHVybiBRLnNldChjLCExKSxiLmRpc3BhdGNoRXZlbnRfKGMpfX0sbGImJkwobGIsRCk7dmFyIG5iPWRvY3VtZW50LmVsZW1lbnRGcm9tUG9pbnQ7YS5hZGp1c3RSZWxhdGVkVGFyZ2V0PWksYS5lbGVtZW50RnJvbVBvaW50PUcsYS5nZXRFdmVudEhhbmRsZXJHZXR0ZXI9SCxhLmdldEV2ZW50SGFuZGxlclNldHRlcj1JLGEubXV0ZU11dGF0aW9uRXZlbnRzPW8sYS51bm11dGVNdXRhdGlvbkV2ZW50cz1wLGEud3JhcEV2ZW50VGFyZ2V0TWV0aG9kcz1GLGEud3JhcHBlcnMuQ3VzdG9tRXZlbnQ9YmIsYS53cmFwcGVycy5FdmVudD14LGEud3JhcHBlcnMuRXZlbnRUYXJnZXQ9RCxhLndyYXBwZXJzLkZvY3VzRXZlbnQ9Z2IsYS53cmFwcGVycy5Nb3VzZUV2ZW50PWZiLGEud3JhcHBlcnMuTXV0YXRpb25FdmVudD1oYixhLndyYXBwZXJzLlVJRXZlbnQ9YWJ9KHRoaXMuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEsYil7T2JqZWN0LmRlZmluZVByb3BlcnR5KGEsYix7ZW51bWVyYWJsZTohMX0pfWZ1bmN0aW9uIGMoKXt0aGlzLmxlbmd0aD0wLGIodGhpcywibGVuZ3RoIil9ZnVuY3Rpb24gZChhKXtpZihudWxsPT1hKXJldHVybiBhO2Zvcih2YXIgYj1uZXcgYyxkPTAsZT1hLmxlbmd0aDtlPmQ7ZCsrKWJbZF09ZihhW2RdKTtyZXR1cm4gYi5sZW5ndGg9ZSxifWZ1bmN0aW9uIGUoYSxiKXthLnByb3RvdHlwZVtiXT1mdW5jdGlvbigpe3JldHVybiBkKHRoaXMuaW1wbFtiXS5hcHBseSh0aGlzLmltcGwsYXJndW1lbnRzKSl9fXZhciBmPWEud3JhcDtjLnByb3RvdHlwZT17aXRlbTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpc1thXX19LGIoYy5wcm90b3R5cGUsIml0ZW0iKSxhLndyYXBwZXJzLk5vZGVMaXN0PWMsYS5hZGRXcmFwTm9kZUxpc3RNZXRob2Q9ZSxhLndyYXBOb2RlTGlzdD1kfSh0aGlzLlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtvKGEgaW5zdGFuY2VvZiBrKX1mdW5jdGlvbiBjKGEsYixjLGQpe2lmKCEoYSBpbnN0YW5jZW9mIERvY3VtZW50RnJhZ21lbnQpKXJldHVybiBhLnBhcmVudE5vZGUmJmEucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChhKSxhLnBhcmVudE5vZGVfPWIsYS5wcmV2aW91c1NpYmxpbmdfPWMsYS5uZXh0U2libGluZ189ZCxjJiYoYy5uZXh0U2libGluZ189YSksZCYmKGQucHJldmlvdXNTaWJsaW5nXz1hKSxbYV07Zm9yKHZhciBlLGY9W107ZT1hLmZpcnN0Q2hpbGQ7KWEucmVtb3ZlQ2hpbGQoZSksZi5wdXNoKGUpLGUucGFyZW50Tm9kZV89Yjtmb3IodmFyIGc9MDtnPGYubGVuZ3RoO2crKylmW2ddLnByZXZpb3VzU2libGluZ189ZltnLTFdfHxjLGZbZ10ubmV4dFNpYmxpbmdfPWZbZysxXXx8ZDtyZXR1cm4gYyYmKGMubmV4dFNpYmxpbmdfPWZbMF0pLGQmJihkLnByZXZpb3VzU2libGluZ189ZltmLmxlbmd0aC0xXSksZn1mdW5jdGlvbiBkKGEpe2lmKGEgaW5zdGFuY2VvZiBEb2N1bWVudEZyYWdtZW50KXtmb3IodmFyIGI9W10sYz0wLGQ9YS5maXJzdENoaWxkO2Q7ZD1kLm5leHRTaWJsaW5nKWJbYysrXT1kO3JldHVybiBifXJldHVyblthXX1mdW5jdGlvbiBlKGEpe2Zvcih2YXIgYj0wO2I8YS5sZW5ndGg7YisrKWFbYl0ubm9kZVdhc0FkZGVkXygpfWZ1bmN0aW9uIGYoYSxiKXt2YXIgYz1hLm5vZGVUeXBlPT09ay5ET0NVTUVOVF9OT0RFP2E6YS5vd25lckRvY3VtZW50O2MhPT1iLm93bmVyRG9jdW1lbnQmJmMuYWRvcHROb2RlKGIpfWZ1bmN0aW9uIGcoYixjKXtpZihjLmxlbmd0aCl7dmFyIGQ9Yi5vd25lckRvY3VtZW50O2lmKGQhPT1jWzBdLm93bmVyRG9jdW1lbnQpZm9yKHZhciBlPTA7ZTxjLmxlbmd0aDtlKyspYS5hZG9wdE5vZGVOb1JlbW92ZShjW2VdLGQpfX1mdW5jdGlvbiBoKGEsYil7ZyhhLGIpO3ZhciBjPWIubGVuZ3RoO2lmKDE9PT1jKXJldHVybiByKGJbMF0pO2Zvcih2YXIgZD1yKGEub3duZXJEb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCkpLGU9MDtjPmU7ZSsrKWQuYXBwZW5kQ2hpbGQocihiW2VdKSk7cmV0dXJuIGR9ZnVuY3Rpb24gaShhKXtpZihhLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcigpKXtmb3IodmFyIGI9YS5maXJzdENoaWxkO2I7KXtvKGIucGFyZW50Tm9kZT09PWEpO3ZhciBjPWIubmV4dFNpYmxpbmcsZD1yKGIpLGU9ZC5wYXJlbnROb2RlO2UmJnkuY2FsbChlLGQpLGIucHJldmlvdXNTaWJsaW5nXz1iLm5leHRTaWJsaW5nXz1iLnBhcmVudE5vZGVfPW51bGwsYj1jfWEuZmlyc3RDaGlsZF89YS5sYXN0Q2hpbGRfPW51bGx9ZWxzZSBmb3IodmFyIGMsZj1yKGEpLGc9Zi5maXJzdENoaWxkO2c7KWM9Zy5uZXh0U2libGluZyx5LmNhbGwoZixnKSxnPWN9ZnVuY3Rpb24gaihhKXt2YXIgYj1hLnBhcmVudE5vZGU7cmV0dXJuIGImJmIuaW52YWxpZGF0ZVNoYWRvd1JlbmRlcmVyKCl9ZnVuY3Rpb24gayhhKXtvKGEgaW5zdGFuY2VvZiB1KSxsLmNhbGwodGhpcyxhKSx0aGlzLnBhcmVudE5vZGVfPXZvaWQgMCx0aGlzLmZpcnN0Q2hpbGRfPXZvaWQgMCx0aGlzLmxhc3RDaGlsZF89dm9pZCAwLHRoaXMubmV4dFNpYmxpbmdfPXZvaWQgMCx0aGlzLnByZXZpb3VzU2libGluZ189dm9pZCAwfXZhciBsPWEud3JhcHBlcnMuRXZlbnRUYXJnZXQsbT1hLndyYXBwZXJzLk5vZGVMaXN0LG49YS5kZWZpbmVXcmFwR2V0dGVyLG89YS5hc3NlcnQscD1hLm1peGluLHE9YS5yZWdpc3RlcldyYXBwZXIscj1hLnVud3JhcCxzPWEud3JhcCx0PWEud3JhcElmTmVlZGVkLHU9d2luZG93Lk5vZGUsdj11LnByb3RvdHlwZS5hcHBlbmRDaGlsZCx3PXUucHJvdG90eXBlLmluc2VydEJlZm9yZSx4PXUucHJvdG90eXBlLnJlcGxhY2VDaGlsZCx5PXUucHJvdG90eXBlLnJlbW92ZUNoaWxkLHo9dS5wcm90b3R5cGUuY29tcGFyZURvY3VtZW50UG9zaXRpb247ay5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShsLnByb3RvdHlwZSkscChrLnByb3RvdHlwZSx7YXBwZW5kQ2hpbGQ6ZnVuY3Rpb24oYSl7YihhKTt2YXIgZztpZih0aGlzLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcigpfHxqKGEpKXt2YXIgaT10aGlzLmxhc3RDaGlsZCxrPW51bGw7Zz1jKGEsdGhpcyxpLGspLHRoaXMubGFzdENoaWxkXz1nW2cubGVuZ3RoLTFdLGl8fCh0aGlzLmZpcnN0Q2hpbGRfPWdbMF0pLHYuY2FsbCh0aGlzLmltcGwsaCh0aGlzLGcpKX1lbHNlIGc9ZChhKSxmKHRoaXMsYSksdi5jYWxsKHRoaXMuaW1wbCxyKGEpKTtyZXR1cm4gZShnKSxhfSxpbnNlcnRCZWZvcmU6ZnVuY3Rpb24oYSxpKXtpZighaSlyZXR1cm4gdGhpcy5hcHBlbmRDaGlsZChhKTtiKGEpLGIoaSksbyhpLnBhcmVudE5vZGU9PT10aGlzKTt2YXIgaztpZih0aGlzLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcigpfHxqKGEpKXt2YXIgbD1pLnByZXZpb3VzU2libGluZyxtPWk7az1jKGEsdGhpcyxsLG0pLHRoaXMuZmlyc3RDaGlsZD09PWkmJih0aGlzLmZpcnN0Q2hpbGRfPWtbMF0pO3ZhciBuPXIoaSkscD1uLnBhcmVudE5vZGU7cD93LmNhbGwocCxoKHRoaXMsayksbik6Zyh0aGlzLGspfWVsc2Ugaz1kKGEpLGYodGhpcyxhKSx3LmNhbGwodGhpcy5pbXBsLHIoYSkscihpKSk7cmV0dXJuIGUoayksYX0scmVtb3ZlQ2hpbGQ6ZnVuY3Rpb24oYSl7aWYoYihhKSxhLnBhcmVudE5vZGUhPT10aGlzKXRocm93IG5ldyBFcnJvcigiTm90Rm91bmRFcnJvciIpO3ZhciBjPXIoYSk7aWYodGhpcy5pbnZhbGlkYXRlU2hhZG93UmVuZGVyZXIoKSl7dmFyIGQ9dGhpcy5maXJzdENoaWxkLGU9dGhpcy5sYXN0Q2hpbGQsZj1hLm5leHRTaWJsaW5nLGc9YS5wcmV2aW91c1NpYmxpbmcsaD1jLnBhcmVudE5vZGU7aCYmeS5jYWxsKGgsYyksZD09PWEmJih0aGlzLmZpcnN0Q2hpbGRfPWYpLGU9PT1hJiYodGhpcy5sYXN0Q2hpbGRfPWcpLGcmJihnLm5leHRTaWJsaW5nXz1mKSxmJiYoZi5wcmV2aW91c1NpYmxpbmdfPWcpLGEucHJldmlvdXNTaWJsaW5nXz1hLm5leHRTaWJsaW5nXz1hLnBhcmVudE5vZGVfPXZvaWQgMH1lbHNlIHkuY2FsbCh0aGlzLmltcGwsYyk7cmV0dXJuIGF9LHJlcGxhY2VDaGlsZDpmdW5jdGlvbihhLGcpe2lmKGIoYSksYihnKSxnLnBhcmVudE5vZGUhPT10aGlzKXRocm93IG5ldyBFcnJvcigiTm90Rm91bmRFcnJvciIpO3ZhciBpLGs9cihnKTtpZih0aGlzLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcigpfHxqKGEpKXt2YXIgbD1nLnByZXZpb3VzU2libGluZyxtPWcubmV4dFNpYmxpbmc7bT09PWEmJihtPWEubmV4dFNpYmxpbmcpLGk9YyhhLHRoaXMsbCxtKSx0aGlzLmZpcnN0Q2hpbGQ9PT1nJiYodGhpcy5maXJzdENoaWxkXz1pWzBdKSx0aGlzLmxhc3RDaGlsZD09PWcmJih0aGlzLmxhc3RDaGlsZF89aVtpLmxlbmd0aC0xXSksZy5wcmV2aW91c1NpYmxpbmdfPWcubmV4dFNpYmxpbmdfPWcucGFyZW50Tm9kZV89dm9pZCAwLGsucGFyZW50Tm9kZSYmeC5jYWxsKGsucGFyZW50Tm9kZSxoKHRoaXMsaSksayl9ZWxzZSBpPWQoYSksZih0aGlzLGEpLHguY2FsbCh0aGlzLmltcGwscihhKSxrKTtyZXR1cm4gZShpKSxnfSxub2RlV2FzQWRkZWRfOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPXRoaXMuZmlyc3RDaGlsZDthO2E9YS5uZXh0U2libGluZylhLm5vZGVXYXNBZGRlZF8oKX0saGFzQ2hpbGROb2RlczpmdW5jdGlvbigpe3JldHVybiBudWxsIT09dGhpcy5maXJzdENoaWxkfSxnZXQgcGFyZW50Tm9kZSgpe3JldHVybiB2b2lkIDAhPT10aGlzLnBhcmVudE5vZGVfP3RoaXMucGFyZW50Tm9kZV86cyh0aGlzLmltcGwucGFyZW50Tm9kZSl9LGdldCBmaXJzdENoaWxkKCl7cmV0dXJuIHZvaWQgMCE9PXRoaXMuZmlyc3RDaGlsZF8/dGhpcy5maXJzdENoaWxkXzpzKHRoaXMuaW1wbC5maXJzdENoaWxkKX0sZ2V0IGxhc3RDaGlsZCgpe3JldHVybiB2b2lkIDAhPT10aGlzLmxhc3RDaGlsZF8/dGhpcy5sYXN0Q2hpbGRfOnModGhpcy5pbXBsLmxhc3RDaGlsZCl9LGdldCBuZXh0U2libGluZygpe3JldHVybiB2b2lkIDAhPT10aGlzLm5leHRTaWJsaW5nXz90aGlzLm5leHRTaWJsaW5nXzpzKHRoaXMuaW1wbC5uZXh0U2libGluZyl9LGdldCBwcmV2aW91c1NpYmxpbmcoKXtyZXR1cm4gdm9pZCAwIT09dGhpcy5wcmV2aW91c1NpYmxpbmdfP3RoaXMucHJldmlvdXNTaWJsaW5nXzpzKHRoaXMuaW1wbC5wcmV2aW91c1NpYmxpbmcpfSxnZXQgcGFyZW50RWxlbWVudCgpe2Zvcih2YXIgYT10aGlzLnBhcmVudE5vZGU7YSYmYS5ub2RlVHlwZSE9PWsuRUxFTUVOVF9OT0RFOylhPWEucGFyZW50Tm9kZTtyZXR1cm4gYX0sZ2V0IHRleHRDb250ZW50KCl7Zm9yKHZhciBhPSIiLGI9dGhpcy5maXJzdENoaWxkO2I7Yj1iLm5leHRTaWJsaW5nKWErPWIudGV4dENvbnRlbnQ7cmV0dXJuIGF9LHNldCB0ZXh0Q29udGVudChhKXtpZih0aGlzLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcigpKXtpZihpKHRoaXMpLCIiIT09YSl7dmFyIGI9dGhpcy5pbXBsLm93bmVyRG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoYSk7dGhpcy5hcHBlbmRDaGlsZChiKX19ZWxzZSB0aGlzLmltcGwudGV4dENvbnRlbnQ9YX0sZ2V0IGNoaWxkTm9kZXMoKXtmb3IodmFyIGE9bmV3IG0sYj0wLGM9dGhpcy5maXJzdENoaWxkO2M7Yz1jLm5leHRTaWJsaW5nKWFbYisrXT1jO3JldHVybiBhLmxlbmd0aD1iLGF9LGNsb25lTm9kZTpmdW5jdGlvbihhKXtpZighdGhpcy5pbnZhbGlkYXRlU2hhZG93UmVuZGVyZXIoKSlyZXR1cm4gcyh0aGlzLmltcGwuY2xvbmVOb2RlKGEpKTt2YXIgYj1zKHRoaXMuaW1wbC5jbG9uZU5vZGUoITEpKTtpZihhKWZvcih2YXIgYz10aGlzLmZpcnN0Q2hpbGQ7YztjPWMubmV4dFNpYmxpbmcpYi5hcHBlbmRDaGlsZChjLmNsb25lTm9kZSghMCkpO3JldHVybiBifSxjb250YWluczpmdW5jdGlvbihhKXtpZighYSlyZXR1cm4hMTtpZihhPXQoYSksYT09PXRoaXMpcmV0dXJuITA7CnZhciBiPWEucGFyZW50Tm9kZTtyZXR1cm4gYj90aGlzLmNvbnRhaW5zKGIpOiExfSxjb21wYXJlRG9jdW1lbnRQb3NpdGlvbjpmdW5jdGlvbihhKXtyZXR1cm4gei5jYWxsKHRoaXMuaW1wbCxyKGEpKX19KSxuKGssIm93bmVyRG9jdW1lbnQiKSxxKHUsayxkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCkpLGRlbGV0ZSBrLnByb3RvdHlwZS5xdWVyeVNlbGVjdG9yLGRlbGV0ZSBrLnByb3RvdHlwZS5xdWVyeVNlbGVjdG9yQWxsLGsucHJvdG90eXBlPXAoT2JqZWN0LmNyZWF0ZShsLnByb3RvdHlwZSksay5wcm90b3R5cGUpLGEud3JhcHBlcnMuTm9kZT1rfSh0aGlzLlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhLGMpe2Zvcih2YXIgZCxlPWEuZmlyc3RFbGVtZW50Q2hpbGQ7ZTspe2lmKGUubWF0Y2hlcyhjKSlyZXR1cm4gZTtpZihkPWIoZSxjKSlyZXR1cm4gZDtlPWUubmV4dEVsZW1lbnRTaWJsaW5nfXJldHVybiBudWxsfWZ1bmN0aW9uIGMoYSxiLGQpe2Zvcih2YXIgZT1hLmZpcnN0RWxlbWVudENoaWxkO2U7KWUubWF0Y2hlcyhiKSYmKGRbZC5sZW5ndGgrK109ZSksYyhlLGIsZCksZT1lLm5leHRFbGVtZW50U2libGluZztyZXR1cm4gZH12YXIgZD17cXVlcnlTZWxlY3RvcjpmdW5jdGlvbihhKXtyZXR1cm4gYih0aGlzLGEpfSxxdWVyeVNlbGVjdG9yQWxsOmZ1bmN0aW9uKGEpe3JldHVybiBjKHRoaXMsYSxuZXcgTm9kZUxpc3QpfX0sZT17Z2V0RWxlbWVudHNCeVRhZ05hbWU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMucXVlcnlTZWxlY3RvckFsbChhKX0sZ2V0RWxlbWVudHNCeUNsYXNzTmFtZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5xdWVyeVNlbGVjdG9yQWxsKCIuIithKX0sZ2V0RWxlbWVudHNCeVRhZ05hbWVOUzpmdW5jdGlvbihhLGIpe2lmKCIqIj09PWEpcmV0dXJuIHRoaXMuZ2V0RWxlbWVudHNCeVRhZ05hbWUoYik7Zm9yKHZhciBjPW5ldyBOb2RlTGlzdCxkPXRoaXMuZ2V0RWxlbWVudHNCeVRhZ05hbWUoYiksZT0wLGY9MDtlPGQubGVuZ3RoO2UrKylkW2VdLm5hbWVzcGFjZVVSST09PWEmJihjW2YrK109ZFtlXSk7cmV0dXJuIGMubGVuZ3RoPWYsY319O2EuR2V0RWxlbWVudHNCeUludGVyZmFjZT1lLGEuU2VsZWN0b3JzSW50ZXJmYWNlPWR9KHRoaXMuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe2Zvcig7YSYmYS5ub2RlVHlwZSE9PU5vZGUuRUxFTUVOVF9OT0RFOylhPWEubmV4dFNpYmxpbmc7cmV0dXJuIGF9ZnVuY3Rpb24gYyhhKXtmb3IoO2EmJmEubm9kZVR5cGUhPT1Ob2RlLkVMRU1FTlRfTk9ERTspYT1hLnByZXZpb3VzU2libGluZztyZXR1cm4gYX12YXIgZD1hLndyYXBwZXJzLk5vZGVMaXN0LGU9e2dldCBmaXJzdEVsZW1lbnRDaGlsZCgpe3JldHVybiBiKHRoaXMuZmlyc3RDaGlsZCl9LGdldCBsYXN0RWxlbWVudENoaWxkKCl7cmV0dXJuIGModGhpcy5sYXN0Q2hpbGQpfSxnZXQgY2hpbGRFbGVtZW50Q291bnQoKXtmb3IodmFyIGE9MCxiPXRoaXMuZmlyc3RFbGVtZW50Q2hpbGQ7YjtiPWIubmV4dEVsZW1lbnRTaWJsaW5nKWErKztyZXR1cm4gYX0sZ2V0IGNoaWxkcmVuKCl7Zm9yKHZhciBhPW5ldyBkLGI9MCxjPXRoaXMuZmlyc3RFbGVtZW50Q2hpbGQ7YztjPWMubmV4dEVsZW1lbnRTaWJsaW5nKWFbYisrXT1jO3JldHVybiBhLmxlbmd0aD1iLGF9fSxmPXtnZXQgbmV4dEVsZW1lbnRTaWJsaW5nKCl7cmV0dXJuIGIodGhpcy5uZXh0U2libGluZyl9LGdldCBwcmV2aW91c0VsZW1lbnRTaWJsaW5nKCl7cmV0dXJuIGModGhpcy5wcmV2aW91c1NpYmxpbmcpfX07YS5DaGlsZE5vZGVJbnRlcmZhY2U9ZixhLlBhcmVudE5vZGVJbnRlcmZhY2U9ZX0odGhpcy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7ZC5jYWxsKHRoaXMsYSl9dmFyIGM9YS5DaGlsZE5vZGVJbnRlcmZhY2UsZD1hLndyYXBwZXJzLk5vZGUsZT1hLm1peGluLGY9YS5yZWdpc3RlcldyYXBwZXIsZz13aW5kb3cuQ2hhcmFjdGVyRGF0YTtiLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGQucHJvdG90eXBlKSxlKGIucHJvdG90eXBlLHtnZXQgdGV4dENvbnRlbnQoKXtyZXR1cm4gdGhpcy5kYXRhfSxzZXQgdGV4dENvbnRlbnQoYSl7dGhpcy5kYXRhPWF9fSksZShiLnByb3RvdHlwZSxjKSxmKGcsYixkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgiIikpLGEud3JhcHBlcnMuQ2hhcmFjdGVyRGF0YT1ifSh0aGlzLlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihiLGMpe3ZhciBkPWIucGFyZW50Tm9kZTtpZihkJiZkLnNoYWRvd1Jvb3Qpe3ZhciBlPWEuZ2V0UmVuZGVyZXJGb3JIb3N0KGQpO2UuZGVwZW5kc09uQXR0cmlidXRlKGMpJiZlLmludmFsaWRhdGUoKX19ZnVuY3Rpb24gYyhhKXtnLmNhbGwodGhpcyxhKX1mdW5jdGlvbiBkKGEsYyxkKXt2YXIgZT1kfHxjO09iamVjdC5kZWZpbmVQcm9wZXJ0eShhLGMse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmltcGxbY119LHNldDpmdW5jdGlvbihhKXt0aGlzLmltcGxbY109YSxiKHRoaXMsZSl9LGNvbmZpZ3VyYWJsZTohMCxlbnVtZXJhYmxlOiEwfSl9dmFyIGU9YS5DaGlsZE5vZGVJbnRlcmZhY2UsZj1hLkdldEVsZW1lbnRzQnlJbnRlcmZhY2UsZz1hLndyYXBwZXJzLk5vZGUsaD1hLlBhcmVudE5vZGVJbnRlcmZhY2UsaT1hLlNlbGVjdG9yc0ludGVyZmFjZTthLmFkZFdyYXBOb2RlTGlzdE1ldGhvZDt2YXIgaj1hLm1peGluLGs9YS5vbmVPZixsPWEucmVnaXN0ZXJXcmFwcGVyLG09YS53cmFwcGVycyxuPXdpbmRvdy5FbGVtZW50LG89ayhuLnByb3RvdHlwZSxbIm1hdGNoZXMiLCJtb3pNYXRjaGVzU2VsZWN0b3IiLCJtc01hdGNoZXNTZWxlY3RvciIsIndlYmtpdE1hdGNoZXNTZWxlY3RvciJdKSxwPW4ucHJvdG90eXBlW29dO2MucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZy5wcm90b3R5cGUpLGooYy5wcm90b3R5cGUse2NyZWF0ZVNoYWRvd1Jvb3Q6ZnVuY3Rpb24oKXt2YXIgYj1uZXcgbS5TaGFkb3dSb290KHRoaXMpO3RoaXMuaW1wbC5wb2x5bWVyU2hhZG93Um9vdF89Yjt2YXIgYz1hLmdldFJlbmRlcmVyRm9ySG9zdCh0aGlzKTtyZXR1cm4gYy5pbnZhbGlkYXRlKCksYn0sZ2V0IHNoYWRvd1Jvb3QoKXtyZXR1cm4gdGhpcy5pbXBsLnBvbHltZXJTaGFkb3dSb290X3x8bnVsbH0sc2V0QXR0cmlidXRlOmZ1bmN0aW9uKGEsYyl7dGhpcy5pbXBsLnNldEF0dHJpYnV0ZShhLGMpLGIodGhpcyxhKX0scmVtb3ZlQXR0cmlidXRlOmZ1bmN0aW9uKGEpe3RoaXMuaW1wbC5yZW1vdmVBdHRyaWJ1dGUoYSksYih0aGlzLGEpfSxtYXRjaGVzOmZ1bmN0aW9uKGEpe3JldHVybiBwLmNhbGwodGhpcy5pbXBsLGEpfX0pLGMucHJvdG90eXBlW29dPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLm1hdGNoZXMoYSl9LG4ucHJvdG90eXBlLndlYmtpdENyZWF0ZVNoYWRvd1Jvb3QmJihjLnByb3RvdHlwZS53ZWJraXRDcmVhdGVTaGFkb3dSb290PWMucHJvdG90eXBlLmNyZWF0ZVNoYWRvd1Jvb3QpLGQoYy5wcm90b3R5cGUsImlkIiksZChjLnByb3RvdHlwZSwiY2xhc3NOYW1lIiwiY2xhc3MiKSxqKGMucHJvdG90eXBlLGUpLGooYy5wcm90b3R5cGUsZiksaihjLnByb3RvdHlwZSxoKSxqKGMucHJvdG90eXBlLGkpLGwobixjKSxhLm1hdGNoZXNOYW1lPW8sYS53cmFwcGVycy5FbGVtZW50PWN9KHRoaXMuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe3N3aXRjaChhKXtjYXNlIiYiOnJldHVybiImYW1wOyI7Y2FzZSI8IjpyZXR1cm4iJmx0OyI7Y2FzZSciJzpyZXR1cm4iJnF1b3Q7In19ZnVuY3Rpb24gYyhhKXtyZXR1cm4gYS5yZXBsYWNlKHIsYil9ZnVuY3Rpb24gZChhKXtzd2l0Y2goYS5ub2RlVHlwZSl7Y2FzZSBOb2RlLkVMRU1FTlRfTk9ERTpmb3IodmFyIGIsZD1hLnRhZ05hbWUudG9Mb3dlckNhc2UoKSxmPSI8IitkLGc9YS5hdHRyaWJ1dGVzLGg9MDtiPWdbaF07aCsrKWYrPSIgIitiLm5hbWUrJz0iJytjKGIudmFsdWUpKyciJztyZXR1cm4gZis9Ij4iLHNbZF0/ZjpmK2UoYSkrIjwvIitkKyI+IjtjYXNlIE5vZGUuVEVYVF9OT0RFOnJldHVybiBjKGEubm9kZVZhbHVlKTtjYXNlIE5vZGUuQ09NTUVOVF9OT0RFOnJldHVybiI8IS0tIitjKGEubm9kZVZhbHVlKSsiLS0+IjtkZWZhdWx0OnRocm93IGNvbnNvbGUuZXJyb3IoYSksbmV3IEVycm9yKCJub3QgaW1wbGVtZW50ZWQiKX19ZnVuY3Rpb24gZShhKXtmb3IodmFyIGI9IiIsYz1hLmZpcnN0Q2hpbGQ7YztjPWMubmV4dFNpYmxpbmcpYis9ZChjKTtyZXR1cm4gYn1mdW5jdGlvbiBmKGEsYixjKXt2YXIgZD1jfHwiZGl2IjthLnRleHRDb250ZW50PSIiO3ZhciBlPXAoYS5vd25lckRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoZCkpO2UuaW5uZXJIVE1MPWI7Zm9yKHZhciBmO2Y9ZS5maXJzdENoaWxkOylhLmFwcGVuZENoaWxkKHEoZikpfWZ1bmN0aW9uIGcoYSl7bC5jYWxsKHRoaXMsYSl9ZnVuY3Rpb24gaChiKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gYS5yZW5kZXJBbGxQZW5kaW5nKCksdGhpcy5pbXBsW2JdfX1mdW5jdGlvbiBpKGEpe20oZyxhLGgoYSkpfWZ1bmN0aW9uIGooYil7T2JqZWN0LmRlZmluZVByb3BlcnR5KGcucHJvdG90eXBlLGIse2dldDpoKGIpLHNldDpmdW5jdGlvbihjKXthLnJlbmRlckFsbFBlbmRpbmcoKSx0aGlzLmltcGxbYl09Y30sY29uZmlndXJhYmxlOiEwLGVudW1lcmFibGU6ITB9KX1mdW5jdGlvbiBrKGIpe09iamVjdC5kZWZpbmVQcm9wZXJ0eShnLnByb3RvdHlwZSxiLHt2YWx1ZTpmdW5jdGlvbigpe3JldHVybiBhLnJlbmRlckFsbFBlbmRpbmcoKSx0aGlzLmltcGxbYl0uYXBwbHkodGhpcy5pbXBsLGFyZ3VtZW50cyl9LGNvbmZpZ3VyYWJsZTohMCxlbnVtZXJhYmxlOiEwfSl9dmFyIGw9YS53cmFwcGVycy5FbGVtZW50LG09YS5kZWZpbmVHZXR0ZXIsbj1hLm1peGluLG89YS5yZWdpc3RlcldyYXBwZXIscD1hLnVud3JhcCxxPWEud3JhcCxyPS8mfDx8Ii9nLHM9e2FyZWE6ITAsYmFzZTohMCxicjohMCxjb2w6ITAsY29tbWFuZDohMCxlbWJlZDohMCxocjohMCxpbWc6ITAsaW5wdXQ6ITAsa2V5Z2VuOiEwLGxpbms6ITAsbWV0YTohMCxwYXJhbTohMCxzb3VyY2U6ITAsdHJhY2s6ITAsd2JyOiEwfSx0PXdpbmRvdy5IVE1MRWxlbWVudDtnLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGwucHJvdG90eXBlKSxuKGcucHJvdG90eXBlLHtnZXQgaW5uZXJIVE1MKCl7cmV0dXJuIGUodGhpcyl9LHNldCBpbm5lckhUTUwoYSl7dGhpcy5pbnZhbGlkYXRlU2hhZG93UmVuZGVyZXIoKT9mKHRoaXMsYSx0aGlzLnRhZ05hbWUpOnRoaXMuaW1wbC5pbm5lckhUTUw9YX0sZ2V0IG91dGVySFRNTCgpe3JldHVybiBkKHRoaXMpfSxzZXQgb3V0ZXJIVE1MKGEpe3ZhciBiPXRoaXMucGFyZW50Tm9kZTtiJiYoYi5pbnZhbGlkYXRlU2hhZG93UmVuZGVyZXIoKSx0aGlzLmltcGwub3V0ZXJIVE1MPWEpfX0pLFsiY2xpZW50SGVpZ2h0IiwiY2xpZW50TGVmdCIsImNsaWVudFRvcCIsImNsaWVudFdpZHRoIiwib2Zmc2V0SGVpZ2h0Iiwib2Zmc2V0TGVmdCIsIm9mZnNldFRvcCIsIm9mZnNldFdpZHRoIiwic2Nyb2xsSGVpZ2h0Iiwic2Nyb2xsV2lkdGgiXS5mb3JFYWNoKGkpLFsic2Nyb2xsTGVmdCIsInNjcm9sbFRvcCJdLmZvckVhY2goaiksWyJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJnZXRDbGllbnRSZWN0cyIsInNjcm9sbEludG9WaWV3Il0uZm9yRWFjaChrKSxvKHQsZyxkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJiIikpLGEud3JhcHBlcnMuSFRNTEVsZW1lbnQ9ZyxhLmdldElubmVySFRNTD1lLGEuc2V0SW5uZXJIVE1MPWZ9KHRoaXMuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe2MuY2FsbCh0aGlzLGEpfXZhciBjPWEud3JhcHBlcnMuSFRNTEVsZW1lbnQsZD1hLm1peGluLGU9YS5yZWdpc3RlcldyYXBwZXIsZj1hLndyYXAsZz13aW5kb3cuSFRNTENhbnZhc0VsZW1lbnQ7Yi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShjLnByb3RvdHlwZSksZChiLnByb3RvdHlwZSx7Z2V0Q29udGV4dDpmdW5jdGlvbigpe3ZhciBhPXRoaXMuaW1wbC5nZXRDb250ZXh0LmFwcGx5KHRoaXMuaW1wbCxhcmd1bWVudHMpO3JldHVybiBhJiZmKGEpfX0pLGUoZyxiLGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImNhbnZhcyIpKSxhLndyYXBwZXJzLkhUTUxDYW52YXNFbGVtZW50PWJ9KHRoaXMuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe2MuY2FsbCh0aGlzLGEpfXZhciBjPWEud3JhcHBlcnMuSFRNTEVsZW1lbnQsZD1hLm1peGluLGU9YS5yZWdpc3RlcldyYXBwZXIsZj13aW5kb3cuSFRNTENvbnRlbnRFbGVtZW50O2IucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYy5wcm90b3R5cGUpLGQoYi5wcm90b3R5cGUse2dldCBzZWxlY3QoKXtyZXR1cm4gdGhpcy5nZXRBdHRyaWJ1dGUoInNlbGVjdCIpfSxzZXQgc2VsZWN0KGEpe3RoaXMuc2V0QXR0cmlidXRlKCJzZWxlY3QiLGEpfSxzZXRBdHRyaWJ1dGU6ZnVuY3Rpb24oYSxiKXtjLnByb3RvdHlwZS5zZXRBdHRyaWJ1dGUuY2FsbCh0aGlzLGEsYiksInNlbGVjdCI9PT1TdHJpbmcoYSkudG9Mb3dlckNhc2UoKSYmdGhpcy5pbnZhbGlkYXRlU2hhZG93UmVuZGVyZXIoITApfX0pLGYmJmUoZixiKSxhLndyYXBwZXJzLkhUTUxDb250ZW50RWxlbWVudD1ifSh0aGlzLlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtkLmNhbGwodGhpcyxhKX1mdW5jdGlvbiBjKGEsYil7aWYoISh0aGlzIGluc3RhbmNlb2YgYykpdGhyb3cgbmV3IFR5cGVFcnJvcigiRE9NIG9iamVjdCBjb25zdHJ1Y3RvciBjYW5ub3QgYmUgY2FsbGVkIGFzIGEgZnVuY3Rpb24uIik7dmFyIGU9Zihkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbWciKSk7dm9pZCAwIT09YSYmKGUud2lkdGg9YSksdm9pZCAwIT09YiYmKGUuaGVpZ2h0PWIpLGQuY2FsbCh0aGlzLGUpLGcoZSx0aGlzKX12YXIgZD1hLndyYXBwZXJzLkhUTUxFbGVtZW50LGU9YS5yZWdpc3RlcldyYXBwZXIsZj1hLnVud3JhcCxnPWEucmV3cmFwLGg9d2luZG93LkhUTUxJbWFnZUVsZW1lbnQ7Yi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShkLnByb3RvdHlwZSksZShoLGIsZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW1nIikpLGMucHJvdG90eXBlPWIucHJvdG90eXBlLGEud3JhcHBlcnMuSFRNTEltYWdlRWxlbWVudD1iLGEud3JhcHBlcnMuSW1hZ2U9Y30odGhpcy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7Yy5jYWxsKHRoaXMsYSl9dmFyIGM9YS53cmFwcGVycy5IVE1MRWxlbWVudCxkPWEubWl4aW4sZT1hLnJlZ2lzdGVyV3JhcHBlcixmPXdpbmRvdy5IVE1MU2hhZG93RWxlbWVudDtiLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGMucHJvdG90eXBlKSxkKGIucHJvdG90eXBlLHt9KSxmJiZlKGYsYiksYS53cmFwcGVycy5IVE1MU2hhZG93RWxlbWVudD1ifSh0aGlzLlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtpZighYS5kZWZhdWx0VmlldylyZXR1cm4gYTt2YXIgYj1vLmdldChhKTtpZighYil7Zm9yKGI9YS5pbXBsZW1lbnRhdGlvbi5jcmVhdGVIVE1MRG9jdW1lbnQoIiIpO2IubGFzdENoaWxkOyliLnJlbW92ZUNoaWxkKGIubGFzdENoaWxkKTtvLnNldChhLGIpfXJldHVybiBifWZ1bmN0aW9uIGMoYSl7dmFyIGMsZD1iKGEub3duZXJEb2N1bWVudCksZT1sKGQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpKTtmb3IoaCgpO2M9YS5maXJzdENoaWxkOyllLmFwcGVuZENoaWxkKGMpO3JldHVybiBrKCksZX1mdW5jdGlvbiBkKGEpe2lmKGUuY2FsbCh0aGlzLGEpLCFwKXt2YXIgYj1jKGEpO24uc2V0KHRoaXMsbShiKSl9fXZhciBlPWEud3JhcHBlcnMuSFRNTEVsZW1lbnQsZj1hLmdldElubmVySFRNTCxnPWEubWl4aW4saD1hLm11dGVNdXRhdGlvbkV2ZW50cyxpPWEucmVnaXN0ZXJXcmFwcGVyLGo9YS5zZXRJbm5lckhUTUwsaz1hLnVubXV0ZU11dGF0aW9uRXZlbnRzLGw9YS51bndyYXAsbT1hLndyYXAsbj1uZXcgV2Vha01hcCxvPW5ldyBXZWFrTWFwLHA9d2luZG93LkhUTUxUZW1wbGF0ZUVsZW1lbnQ7ZC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShlLnByb3RvdHlwZSksZyhkLnByb3RvdHlwZSx7Z2V0IGNvbnRlbnQoKXtyZXR1cm4gcD9tKHRoaXMuaW1wbC5jb250ZW50KTpuLmdldCh0aGlzKX0sZ2V0IGlubmVySFRNTCgpe3JldHVybiBmKHRoaXMuY29udGVudCl9LHNldCBpbm5lckhUTUwoYSl7aih0aGlzLmNvbnRlbnQsYSl9fSkscCYmaShwLGQpLGEud3JhcHBlcnMuSFRNTFRlbXBsYXRlRWxlbWVudD1kfSh0aGlzLlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtzd2l0Y2goYS5sb2NhbE5hbWUpe2Nhc2UiY29udGVudCI6cmV0dXJuIG5ldyBjKGEpO2Nhc2Uic2hhZG93IjpyZXR1cm4gbmV3IGUoYSk7Y2FzZSJ0ZW1wbGF0ZSI6cmV0dXJuIG5ldyBmKGEpfWQuY2FsbCh0aGlzLGEpfXZhciBjPWEud3JhcHBlcnMuSFRNTENvbnRlbnRFbGVtZW50LGQ9YS53cmFwcGVycy5IVE1MRWxlbWVudCxlPWEud3JhcHBlcnMuSFRNTFNoYWRvd0VsZW1lbnQsZj1hLndyYXBwZXJzLkhUTUxUZW1wbGF0ZUVsZW1lbnQ7YS5taXhpbjt2YXIgZz1hLnJlZ2lzdGVyV3JhcHBlcixoPXdpbmRvdy5IVE1MVW5rbm93bkVsZW1lbnQ7Yi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShkLnByb3RvdHlwZSksZyhoLGIpLGEud3JhcHBlcnMuSFRNTFVua25vd25FbGVtZW50PWJ9KHRoaXMuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe3RoaXMuaW1wbD1hfXZhciBjPWEubWl4aW4sZD1hLnJlZ2lzdGVyV3JhcHBlcixlPWEudW53cmFwLGY9YS53cmFwLGc9d2luZG93LkNhbnZhc1JlbmRlcmluZ0NvbnRleHQyRDtjKGIucHJvdG90eXBlLHtnZXQgY2FudmFzKCl7cmV0dXJuIGYodGhpcy5pbXBsLmNhbnZhcyl9LGRyYXdJbWFnZTpmdW5jdGlvbigpe2FyZ3VtZW50c1swXT1lKGFyZ3VtZW50c1swXSksdGhpcy5pbXBsLmRyYXdJbWFnZS5hcHBseSh0aGlzLmltcGwsYXJndW1lbnRzKX0sY3JlYXRlUGF0dGVybjpmdW5jdGlvbigpe3JldHVybiBhcmd1bWVudHNbMF09ZShhcmd1bWVudHNbMF0pLHRoaXMuaW1wbC5jcmVhdGVQYXR0ZXJuLmFwcGx5KHRoaXMuaW1wbCxhcmd1bWVudHMpfX0pLGQoZyxiKSxhLndyYXBwZXJzLkNhbnZhc1JlbmRlcmluZ0NvbnRleHQyRD1ifSh0aGlzLlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXt0aGlzLmltcGw9YX12YXIgYz1hLm1peGluLGQ9YS5yZWdpc3RlcldyYXBwZXIsZT1hLnVud3JhcCxmPWEud3JhcCxnPXdpbmRvdy5XZWJHTFJlbmRlcmluZ0NvbnRleHQ7ZyYmKGMoYi5wcm90b3R5cGUse2dldCBjYW52YXMoKXtyZXR1cm4gZih0aGlzLmltcGwuY2FudmFzKX0sdGV4SW1hZ2UyRDpmdW5jdGlvbigpe2FyZ3VtZW50c1s1XT1lKGFyZ3VtZW50c1s1XSksdGhpcy5pbXBsLnRleEltYWdlMkQuYXBwbHkodGhpcy5pbXBsLGFyZ3VtZW50cyl9LHRleFN1YkltYWdlMkQ6ZnVuY3Rpb24oKXthcmd1bWVudHNbNl09ZShhcmd1bWVudHNbNl0pLHRoaXMuaW1wbC50ZXhTdWJJbWFnZTJELmFwcGx5KHRoaXMuaW1wbCxhcmd1bWVudHMpfX0pLGQoZyxiKSxhLndyYXBwZXJzLldlYkdMUmVuZGVyaW5nQ29udGV4dD1iKX0odGhpcy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO3ZhciBiPWEuR2V0RWxlbWVudHNCeUludGVyZmFjZSxjPWEuUGFyZW50Tm9kZUludGVyZmFjZSxkPWEuU2VsZWN0b3JzSW50ZXJmYWNlLGU9YS5taXhpbixmPWEucmVnaXN0ZXJPYmplY3QsZz1mKGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSk7ZShnLnByb3RvdHlwZSxjKSxlKGcucHJvdG90eXBlLGQpLGUoZy5wcm90b3R5cGUsYik7dmFyIGg9Zihkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgiIikpLGk9Zihkb2N1bWVudC5jcmVhdGVDb21tZW50KCIiKSk7YS53cmFwcGVycy5Db21tZW50PWksYS53cmFwcGVycy5Eb2N1bWVudEZyYWdtZW50PWcsYS53cmFwcGVycy5UZXh0PWh9KHRoaXMuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe3ZhciBiPWkoYS5pbXBsLm93bmVyRG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpKTtjLmNhbGwodGhpcyxiKSxnKGIsdGhpcyk7dmFyIGQ9YS5zaGFkb3dSb290O2suc2V0KHRoaXMsZCksai5zZXQodGhpcyxhKX12YXIgYz1hLndyYXBwZXJzLkRvY3VtZW50RnJhZ21lbnQsZD1hLmVsZW1lbnRGcm9tUG9pbnQsZT1hLmdldElubmVySFRNTCxmPWEubWl4aW4sZz1hLnJld3JhcCxoPWEuc2V0SW5uZXJIVE1MLGk9YS51bndyYXAsaj1uZXcgV2Vha01hcCxrPW5ldyBXZWFrTWFwO2IucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYy5wcm90b3R5cGUpLGYoYi5wcm90b3R5cGUse2dldCBpbm5lckhUTUwoKXtyZXR1cm4gZSh0aGlzKX0sc2V0IGlubmVySFRNTChhKXtoKHRoaXMsYSksdGhpcy5pbnZhbGlkYXRlU2hhZG93UmVuZGVyZXIoKX0sZ2V0IG9sZGVyU2hhZG93Um9vdCgpe3JldHVybiBrLmdldCh0aGlzKXx8bnVsbH0saW52YWxpZGF0ZVNoYWRvd1JlbmRlcmVyOmZ1bmN0aW9uKCl7cmV0dXJuIGouZ2V0KHRoaXMpLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcigpfSxlbGVtZW50RnJvbVBvaW50OmZ1bmN0aW9uKGEsYil7cmV0dXJuIGQodGhpcyx0aGlzLm93bmVyRG9jdW1lbnQsYSxiKX0sZ2V0RWxlbWVudEJ5SWQ6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMucXVlcnlTZWxlY3RvcigiIyIrYSl9fSksYS53cmFwcGVycy5TaGFkb3dSb290PWIsYS5nZXRIb3N0Rm9yU2hhZG93Um9vdD1mdW5jdGlvbihhKXtyZXR1cm4gai5nZXQoYSl9fSh0aGlzLlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXthLnByZXZpb3VzU2libGluZ189YS5wcmV2aW91c1NpYmxpbmcsYS5uZXh0U2libGluZ189YS5uZXh0U2libGluZyxhLnBhcmVudE5vZGVfPWEucGFyZW50Tm9kZX1mdW5jdGlvbiBjKGEsYyxlKXt2YXIgZj1HKGEpLGc9RyhjKSxoPWU/RyhlKTpudWxsO2lmKGQoYyksYihjKSxlKWEuZmlyc3RDaGlsZD09PWUmJihhLmZpcnN0Q2hpbGRfPWUpLGUucHJldmlvdXNTaWJsaW5nXz1lLnByZXZpb3VzU2libGluZztlbHNle2EubGFzdENoaWxkXz1hLmxhc3RDaGlsZCxhLmxhc3RDaGlsZD09PWEuZmlyc3RDaGlsZCYmKGEuZmlyc3RDaGlsZF89YS5maXJzdENoaWxkKTt2YXIgaT1IKGYubGFzdENoaWxkKTtpJiYoaS5uZXh0U2libGluZ189aS5uZXh0U2libGluZyl9Zi5pbnNlcnRCZWZvcmUoZyxoKX1mdW5jdGlvbiBkKGEpe3ZhciBjPUcoYSksZD1jLnBhcmVudE5vZGU7aWYoZCl7dmFyIGU9SChkKTtiKGEpLGEucHJldmlvdXNTaWJsaW5nJiYoYS5wcmV2aW91c1NpYmxpbmcubmV4dFNpYmxpbmdfPWEpLGEubmV4dFNpYmxpbmcmJihhLm5leHRTaWJsaW5nLnByZXZpb3VzU2libGluZ189YSksZS5sYXN0Q2hpbGQ9PT1hJiYoZS5sYXN0Q2hpbGRfPWEpLGUuZmlyc3RDaGlsZD09PWEmJihlLmZpcnN0Q2hpbGRfPWEpLGQucmVtb3ZlQ2hpbGQoYyl9fWZ1bmN0aW9uIGUoYSxiKXtnKGIpLnB1c2goYSkseChhLGIpO3ZhciBjPUouZ2V0KGEpO2N8fEouc2V0KGEsYz1bXSksYy5wdXNoKGIpfWZ1bmN0aW9uIGYoYSl7SS5zZXQoYSxbXSl9ZnVuY3Rpb24gZyhhKXtyZXR1cm4gSS5nZXQoYSl9ZnVuY3Rpb24gaChhKXtmb3IodmFyIGI9W10sYz0wLGQ9YS5maXJzdENoaWxkO2Q7ZD1kLm5leHRTaWJsaW5nKWJbYysrXT1kO3JldHVybiBifWZ1bmN0aW9uIGkoYSxiLGMpe2Zvcih2YXIgZD1hLmZpcnN0Q2hpbGQ7ZDtkPWQubmV4dFNpYmxpbmcpaWYoYihkKSl7aWYoYyhkKT09PSExKXJldHVybn1lbHNlIGkoZCxiLGMpfWZ1bmN0aW9uIGooYSxiKXt2YXIgYz1iLmdldEF0dHJpYnV0ZSgic2VsZWN0Iik7aWYoIWMpcmV0dXJuITA7aWYoYz1jLnRyaW0oKSwhYylyZXR1cm4hMDtpZighKGEgaW5zdGFuY2VvZiB5KSlyZXR1cm4hMTtpZighTS50ZXN0KGMpKXJldHVybiExO2lmKCI6Ij09PWNbMF0mJiFOLnRlc3QoYykpcmV0dXJuITE7dHJ5e3JldHVybiBhLm1hdGNoZXMoYyl9Y2F0Y2goZCl7cmV0dXJuITF9fWZ1bmN0aW9uIGsoKXtmb3IodmFyIGE9MDthPFAubGVuZ3RoO2ErKylQW2FdLnJlbmRlcigpO1A9W119ZnVuY3Rpb24gbCgpe0Y9bnVsbCxrKCl9ZnVuY3Rpb24gbShhKXt2YXIgYj1MLmdldChhKTtyZXR1cm4gYnx8KGI9bmV3IHEoYSksTC5zZXQoYSxiKSksYn1mdW5jdGlvbiBuKGEpe2Zvcig7YTthPWEucGFyZW50Tm9kZSlpZihhIGluc3RhbmNlb2YgQylyZXR1cm4gYTtyZXR1cm4gbnVsbH1mdW5jdGlvbiBvKGEpe3JldHVybiBtKEQoYSkpfWZ1bmN0aW9uIHAoYSl7dGhpcy5za2lwPSExLHRoaXMubm9kZT1hLHRoaXMuY2hpbGROb2Rlcz1bXX1mdW5jdGlvbiBxKGEpe3RoaXMuaG9zdD1hLHRoaXMuZGlydHk9ITEsdGhpcy5pbnZhbGlkYXRlQXR0cmlidXRlcygpLHRoaXMuYXNzb2NpYXRlTm9kZShhKX1mdW5jdGlvbiByKGEpe3JldHVybiBhIGluc3RhbmNlb2Ygen1mdW5jdGlvbiBzKGEpe3JldHVybiBhIGluc3RhbmNlb2Ygen1mdW5jdGlvbiB0KGEpe3JldHVybiBhIGluc3RhbmNlb2YgQX1mdW5jdGlvbiB1KGEpe3JldHVybiBhIGluc3RhbmNlb2YgQX1mdW5jdGlvbiB2KGEpe3JldHVybiBhLnNoYWRvd1Jvb3R9ZnVuY3Rpb24gdyhhKXtmb3IodmFyIGI9W10sYz1hLnNoYWRvd1Jvb3Q7YztjPWMub2xkZXJTaGFkb3dSb290KWIucHVzaChjKTtyZXR1cm4gYn1mdW5jdGlvbiB4KGEsYil7Sy5zZXQoYSxiKX12YXIgeT1hLndyYXBwZXJzLkVsZW1lbnQsej1hLndyYXBwZXJzLkhUTUxDb250ZW50RWxlbWVudCxBPWEud3JhcHBlcnMuSFRNTFNoYWRvd0VsZW1lbnQsQj1hLndyYXBwZXJzLk5vZGUsQz1hLndyYXBwZXJzLlNoYWRvd1Jvb3Q7YS5hc3NlcnQ7dmFyIEQ9YS5nZXRIb3N0Rm9yU2hhZG93Um9vdDthLm1peGluLGEubXV0ZU11dGF0aW9uRXZlbnRzO3ZhciBFPWEub25lT2Y7YS51bm11dGVNdXRhdGlvbkV2ZW50czt2YXIgRixHPWEudW53cmFwLEg9YS53cmFwLEk9bmV3IFdlYWtNYXAsSj1uZXcgV2Vha01hcCxLPW5ldyBXZWFrTWFwLEw9bmV3IFdlYWtNYXAsTT0vXlsqLjojW2EtekEtWl98XS8sTj1uZXcgUmVnRXhwKCJeOigiK1sibGluayIsInZpc2l0ZWQiLCJ0YXJnZXQiLCJlbmFibGVkIiwiZGlzYWJsZWQiLCJjaGVja2VkIiwiaW5kZXRlcm1pbmF0ZSIsIm50aC1jaGlsZCIsIm50aC1sYXN0LWNoaWxkIiwibnRoLW9mLXR5cGUiLCJudGgtbGFzdC1vZi10eXBlIiwiZmlyc3QtY2hpbGQiLCJsYXN0LWNoaWxkIiwiZmlyc3Qtb2YtdHlwZSIsImxhc3Qtb2YtdHlwZSIsIm9ubHktb2YtdHlwZSJdLmpvaW4oInwiKSsiKSIpLE89RSh3aW5kb3csWyJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJtb3pSZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJ3ZWJraXRSZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJzZXRUaW1lb3V0Il0pLFA9W10sUT1uZXcgQXJyYXlTcGxpY2U7US5lcXVhbHM9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gRyhhLm5vZGUpPT09Yn0scC5wcm90b3R5cGU9e2FwcGVuZDpmdW5jdGlvbihhKXt2YXIgYj1uZXcgcChhKTtyZXR1cm4gdGhpcy5jaGlsZE5vZGVzLnB1c2goYiksYn0sc3luYzpmdW5jdGlvbihhKXtpZighdGhpcy5za2lwKXtmb3IodmFyIGI9dGhpcy5ub2RlLGU9dGhpcy5jaGlsZE5vZGVzLGY9aChHKGIpKSxnPWF8fG5ldyBXZWFrTWFwLGk9US5jYWxjdWxhdGVTcGxpY2VzKGUsZiksaj0wLGs9MCxsPTAsbT0wO208aS5sZW5ndGg7bSsrKXtmb3IodmFyIG49aVttXTtsPG4uaW5kZXg7bCsrKWsrKyxlW2orK10uc3luYyhnKTtmb3IodmFyIG89bi5yZW1vdmVkLmxlbmd0aCxwPTA7bz5wO3ArKyl7dmFyIHE9SChmW2srK10pO2cuZ2V0KHEpfHxkKHEpfWZvcih2YXIgcj1uLmFkZGVkQ291bnQscz1mW2tdJiZIKGZba10pLHA9MDtyPnA7cCsrKXt2YXIgdD1lW2orK10sdT10Lm5vZGU7YyhiLHUscyksZy5zZXQodSwhMCksdC5zeW5jKGcpfWwrPXJ9Zm9yKHZhciBtPWw7bTxlLmxlbmd0aDttKyspZVttXS5zeW5jKGcpfX19LHEucHJvdG90eXBlPXtyZW5kZXI6ZnVuY3Rpb24oYSl7aWYodGhpcy5kaXJ0eSl7dGhpcy5pbnZhbGlkYXRlQXR0cmlidXRlcygpLHRoaXMudHJlZUNvbXBvc2l0aW9uKCk7dmFyIGI9dGhpcy5ob3N0LGM9Yi5zaGFkb3dSb290O3RoaXMuYXNzb2NpYXRlTm9kZShiKTtmb3IodmFyIGQ9IWUsZT1hfHxuZXcgcChiKSxmPWMuZmlyc3RDaGlsZDtmO2Y9Zi5uZXh0U2libGluZyl0aGlzLnJlbmRlck5vZGUoYyxlLGYsITEpO2QmJmUuc3luYygpLHRoaXMuZGlydHk9ITF9fSxpbnZhbGlkYXRlOmZ1bmN0aW9uKCl7aWYoIXRoaXMuZGlydHkpe2lmKHRoaXMuZGlydHk9ITAsUC5wdXNoKHRoaXMpLEYpcmV0dXJuO0Y9d2luZG93W09dKGwsMCl9fSxyZW5kZXJOb2RlOmZ1bmN0aW9uKGEsYixjLGQpe2lmKHYoYykpe2I9Yi5hcHBlbmQoYyk7dmFyIGU9bShjKTtlLmRpcnR5PSEwLGUucmVuZGVyKGIpfWVsc2UgcihjKT90aGlzLnJlbmRlckluc2VydGlvblBvaW50KGEsYixjLGQpOnQoYyk/dGhpcy5yZW5kZXJTaGFkb3dJbnNlcnRpb25Qb2ludChhLGIsYyk6dGhpcy5yZW5kZXJBc0FueURvbVRyZWUoYSxiLGMsZCl9LHJlbmRlckFzQW55RG9tVHJlZTpmdW5jdGlvbihhLGIsYyxkKXtpZihiPWIuYXBwZW5kKGMpLHYoYykpe3ZhciBlPW0oYyk7Yi5za2lwPSFlLmRpcnR5LGUucmVuZGVyKGIpfWVsc2UgZm9yKHZhciBmPWMuZmlyc3RDaGlsZDtmO2Y9Zi5uZXh0U2libGluZyl0aGlzLnJlbmRlck5vZGUoYSxiLGYsZCl9LHJlbmRlckluc2VydGlvblBvaW50OmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPWcoYyk7aWYoZS5sZW5ndGgpe3RoaXMuYXNzb2NpYXRlTm9kZShjKTtmb3IodmFyIGY9MDtmPGUubGVuZ3RoO2YrKyl7dmFyIGg9ZVtmXTtyKGgpJiZkP3RoaXMucmVuZGVySW5zZXJ0aW9uUG9pbnQoYSxiLGgsZCk6dGhpcy5yZW5kZXJBc0FueURvbVRyZWUoYSxiLGgsZCl9fWVsc2UgdGhpcy5yZW5kZXJGYWxsYmFja0NvbnRlbnQoYSxiLGMpO3RoaXMuYXNzb2NpYXRlTm9kZShjLnBhcmVudE5vZGUpfSxyZW5kZXJTaGFkb3dJbnNlcnRpb25Qb2ludDpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9YS5vbGRlclNoYWRvd1Jvb3Q7aWYoZCl7eChkLGMpLHRoaXMuYXNzb2NpYXRlTm9kZShjLnBhcmVudE5vZGUpO2Zvcih2YXIgZT1kLmZpcnN0Q2hpbGQ7ZTtlPWUubmV4dFNpYmxpbmcpdGhpcy5yZW5kZXJOb2RlKGQsYixlLCEwKX1lbHNlIHRoaXMucmVuZGVyRmFsbGJhY2tDb250ZW50KGEsYixjKX0scmVuZGVyRmFsbGJhY2tDb250ZW50OmZ1bmN0aW9uKGEsYixjKXt0aGlzLmFzc29jaWF0ZU5vZGUoYyksdGhpcy5hc3NvY2lhdGVOb2RlKGMucGFyZW50Tm9kZSk7Zm9yKHZhciBkPWMuZmlyc3RDaGlsZDtkO2Q9ZC5uZXh0U2libGluZyl0aGlzLnJlbmRlckFzQW55RG9tVHJlZShhLGIsZCwhMSl9LGludmFsaWRhdGVBdHRyaWJ1dGVzOmZ1bmN0aW9uKCl7dGhpcy5hdHRyaWJ1dGVzPU9iamVjdC5jcmVhdGUobnVsbCl9LHVwZGF0ZURlcGVuZGVudEF0dHJpYnV0ZXM6ZnVuY3Rpb24oYSl7aWYoYSl7dmFyIGI9dGhpcy5hdHRyaWJ1dGVzOy9cLlx3Ky8udGVzdChhKSYmKGJbImNsYXNzIl09ITApLC8jXHcrLy50ZXN0KGEpJiYoYi5pZD0hMCksYS5yZXBsYWNlKC9cW1xzKihbXlxzPVx8flxdXSspL2csZnVuY3Rpb24oYSxjKXtiW2NdPSEwfSl9fSxkZXBlbmRzT25BdHRyaWJ1dGU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuYXR0cmlidXRlc1thXX0sZGlzdHJpYnV0ZTpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXM7aShhLHMsZnVuY3Rpb24oYSl7ZihhKSxjLnVwZGF0ZURlcGVuZGVudEF0dHJpYnV0ZXMoYS5nZXRBdHRyaWJ1dGUoInNlbGVjdCIpKTtmb3IodmFyIGQ9MDtkPGIubGVuZ3RoO2QrKyl7dmFyIGc9YltkXTt2b2lkIDAhPT1nJiZqKGcsYSkmJihlKGcsYSksYltkXT12b2lkIDApfX0pfSx0cmVlQ29tcG9zaXRpb246ZnVuY3Rpb24oKXtmb3IodmFyIGE9dGhpcy5ob3N0LGI9YS5zaGFkb3dSb290LGM9W10sZD1hLmZpcnN0Q2hpbGQ7ZDtkPWQubmV4dFNpYmxpbmcpaWYocihkKSl7dmFyIGU9ZyhkKTtlJiZlLmxlbmd0aHx8KGU9aChkKSksYy5wdXNoLmFwcGx5KGMsZSl9ZWxzZSBjLnB1c2goZCk7Zm9yKHZhciBmLGo7Yjspe2lmKGY9dm9pZCAwLGkoYix1LGZ1bmN0aW9uKGEpe3JldHVybiBmPWEsITF9KSxqPWYsdGhpcy5kaXN0cmlidXRlKGIsYyksail7dmFyIGs9Yi5vbGRlclNoYWRvd1Jvb3Q7aWYoayl7Yj1rLHgoYixqKTtjb250aW51ZX1icmVha31icmVha319LGFzc29jaWF0ZU5vZGU6ZnVuY3Rpb24oYSl7YS5pbXBsLnBvbHltZXJTaGFkb3dSZW5kZXJlcl89dGhpc319LEIucHJvdG90eXBlLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcj1mdW5jdGlvbigpe3ZhciBhPXRoaXMuaW1wbC5wb2x5bWVyU2hhZG93UmVuZGVyZXJfO3JldHVybiBhPyhhLmludmFsaWRhdGUoKSwhMCk6ITF9LHoucHJvdG90eXBlLmdldERpc3RyaWJ1dGVkTm9kZXM9ZnVuY3Rpb24oKXtyZXR1cm4gaygpLGcodGhpcyl9LEEucHJvdG90eXBlLm5vZGVXYXNBZGRlZF89ei5wcm90b3R5cGUubm9kZVdhc0FkZGVkXz1mdW5jdGlvbigpe3RoaXMuaW52YWxpZGF0ZVNoYWRvd1JlbmRlcmVyKCk7dmFyIGEsYj1uKHRoaXMpO2ImJihhPW8oYikpLHRoaXMuaW1wbC5wb2x5bWVyU2hhZG93UmVuZGVyZXJfPWEsYSYmYS5pbnZhbGlkYXRlKCl9LGEuZXZlbnRQYXJlbnRzVGFibGU9SixhLmdldFJlbmRlcmVyRm9ySG9zdD1tLGEuZ2V0U2hhZG93VHJlZXM9dyxhLmluc2VydGlvblBhcmVudFRhYmxlPUssYS5yZW5kZXJBbGxQZW5kaW5nPWssYS52aXN1YWw9e2luc2VydEJlZm9yZTpjLHJlbW92ZTpkfX0odGhpcy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYil7aWYod2luZG93W2JdKXtkKCFhLndyYXBwZXJzW2JdKTt2YXIgaT1mdW5jdGlvbihhKXtjLmNhbGwodGhpcyxhKX07aS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShjLnByb3RvdHlwZSksZShpLnByb3RvdHlwZSx7Z2V0IGZvcm0oKXtyZXR1cm4gaChnKHRoaXMpLmZvcm0pfX0pLGYod2luZG93W2JdLGksZG9jdW1lbnQuY3JlYXRlRWxlbWVudChiLnNsaWNlKDQsLTcpKSksYS53cmFwcGVyc1tiXT1pfX12YXIgYz1hLndyYXBwZXJzLkhUTUxFbGVtZW50LGQ9YS5hc3NlcnQsZT1hLm1peGluLGY9YS5yZWdpc3RlcldyYXBwZXIsZz1hLnVud3JhcCxoPWEud3JhcCxpPVsiSFRNTEJ1dHRvbkVsZW1lbnQiLCJIVE1MRmllbGRTZXRFbGVtZW50IiwiSFRNTElucHV0RWxlbWVudCIsIkhUTUxLZXlnZW5FbGVtZW50IiwiSFRNTExhYmVsRWxlbWVudCIsIkhUTUxMZWdlbmRFbGVtZW50IiwiSFRNTE9iamVjdEVsZW1lbnQiLCJIVE1MT3B0aW9uRWxlbWVudCIsIkhUTUxPdXRwdXRFbGVtZW50IiwiSFRNTFNlbGVjdEVsZW1lbnQiLCJIVE1MVGV4dEFyZWFFbGVtZW50Il07aS5mb3JFYWNoKGIpfSh0aGlzLlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtrLmNhbGwodGhpcyxhKX1mdW5jdGlvbiBjKGEpe3ZhciBjPWRvY3VtZW50W2FdO2IucHJvdG90eXBlW2FdPWZ1bmN0aW9uKCl7cmV0dXJuIHYoYy5hcHBseSh0aGlzLmltcGwsYXJndW1lbnRzKSl9fWZ1bmN0aW9uIGQoYSxiKXt5LmNhbGwoYi5pbXBsLHUoYSkpLGUoYSxiKX1mdW5jdGlvbiBlKGEsYil7YS5zaGFkb3dSb290JiZiLmFkb3B0Tm9kZShhLnNoYWRvd1Jvb3QpLGEgaW5zdGFuY2VvZiBuJiZmKGEsYik7Zm9yKHZhciBjPWEuZmlyc3RDaGlsZDtjO2M9Yy5uZXh0U2libGluZyllKGMsYil9ZnVuY3Rpb24gZihhLGIpe3ZhciBjPWEub2xkZXJTaGFkb3dSb290O2MmJmIuYWRvcHROb2RlKGMpfWZ1bmN0aW9uIGcoYSl7dGhpcy5pbXBsPWF9ZnVuY3Rpb24gaChhLGIpe3ZhciBjPWRvY3VtZW50LmltcGxlbWVudGF0aW9uW2JdO2EucHJvdG90eXBlW2JdPWZ1bmN0aW9uKCl7cmV0dXJuIHYoYy5hcHBseSh0aGlzLmltcGwsYXJndW1lbnRzKSl9fWZ1bmN0aW9uIGkoYSxiKXt2YXIgYz1kb2N1bWVudC5pbXBsZW1lbnRhdGlvbltiXTthLnByb3RvdHlwZVtiXT1mdW5jdGlvbigpe3JldHVybiBjLmFwcGx5KHRoaXMuaW1wbCxhcmd1bWVudHMpfX12YXIgaj1hLkdldEVsZW1lbnRzQnlJbnRlcmZhY2Usaz1hLndyYXBwZXJzLk5vZGUsbD1hLlBhcmVudE5vZGVJbnRlcmZhY2UsbT1hLlNlbGVjdG9yc0ludGVyZmFjZSxuPWEud3JhcHBlcnMuU2hhZG93Um9vdCxvPWEuZGVmaW5lV3JhcEdldHRlcixwPWEuZWxlbWVudEZyb21Qb2ludCxxPWEuZm9yd2FyZE1ldGhvZHNUb1dyYXBwZXIscj1hLm1hdGNoZXNOYW1lLHM9YS5taXhpbix0PWEucmVnaXN0ZXJXcmFwcGVyLHU9YS51bndyYXAsdj1hLndyYXAsdz1hLndyYXBFdmVudFRhcmdldE1ldGhvZHM7YS53cmFwTm9kZUxpc3Q7dmFyIHg9bmV3IFdlYWtNYXA7Yi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShrLnByb3RvdHlwZSksbyhiLCJkb2N1bWVudEVsZW1lbnQiKSxvKGIsImJvZHkiKSxvKGIsImhlYWQiKSxbImNyZWF0ZUNvbW1lbnQiLCJjcmVhdGVEb2N1bWVudEZyYWdtZW50IiwiY3JlYXRlRWxlbWVudCIsImNyZWF0ZUVsZW1lbnROUyIsImNyZWF0ZUV2ZW50IiwiY3JlYXRlRXZlbnROUyIsImNyZWF0ZVJhbmdlIiwiY3JlYXRlVGV4dE5vZGUiLCJnZXRFbGVtZW50QnlJZCJdLmZvckVhY2goYyk7dmFyIHk9ZG9jdW1lbnQuYWRvcHROb2RlO2lmKHMoYi5wcm90b3R5cGUse2Fkb3B0Tm9kZTpmdW5jdGlvbihhKXtyZXR1cm4gYS5wYXJlbnROb2RlJiZhLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYSksZChhLHRoaXMpLGF9LGVsZW1lbnRGcm9tUG9pbnQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gcCh0aGlzLHRoaXMsYSxiKX19KSxkb2N1bWVudC5yZWdpc3Rlcil7dmFyIHo9ZG9jdW1lbnQucmVnaXN0ZXI7Yi5wcm90b3R5cGUucmVnaXN0ZXI9ZnVuY3Rpb24oYixjKXtmdW5jdGlvbiBkKGEpe3JldHVybiBhPyh0aGlzLmltcGw9YSx2b2lkIDApOmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoYil9dmFyIGU9Yy5wcm90b3R5cGU7aWYoYS5uYXRpdmVQcm90b3R5cGVUYWJsZS5nZXQoZSkpdGhyb3cgbmV3IEVycm9yKCJOb3RTdXBwb3J0ZWRFcnJvciIpO2Zvcih2YXIgZixnPU9iamVjdC5nZXRQcm90b3R5cGVPZihlKSxoPVtdO2cmJiEoZj1hLm5hdGl2ZVByb3RvdHlwZVRhYmxlLmdldChnKSk7KWgucHVzaChnKSxnPU9iamVjdC5nZXRQcm90b3R5cGVPZihnKTtpZighZil0aHJvdyBuZXcgRXJyb3IoIk5vdFN1cHBvcnRlZEVycm9yIik7Zm9yKHZhciBpPU9iamVjdC5jcmVhdGUoZiksaj1oLmxlbmd0aC0xO2o+PTA7ai0tKWk9T2JqZWN0LmNyZWF0ZShpKTtyZXR1cm5bImNyZWF0ZWRDYWxsYmFjayIsImVudGVyZWRWaWV3Q2FsbGJhY2siLCJsZWZ0Vmlld0NhbGxiYWNrIiwiYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrIl0uZm9yRWFjaChmdW5jdGlvbihhKXt2YXIgYj1lW2FdO2ImJihpW2FdPWZ1bmN0aW9uKCl7Yi5hcHBseSh2KHRoaXMpLGFyZ3VtZW50cyl9KX0pLHouY2FsbCh1KHRoaXMpLGIse3Byb3RvdHlwZTppfSksZC5wcm90b3R5cGU9ZSxkLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1kLGEuY29uc3RydWN0b3JUYWJsZS5zZXQoaSxkKSxhLm5hdGl2ZVByb3RvdHlwZVRhYmxlLnNldChlLGkpLGR9LHEoW3dpbmRvdy5IVE1MRG9jdW1lbnR8fHdpbmRvdy5Eb2N1bWVudF0sWyJyZWdpc3RlciJdKX1xKFt3aW5kb3cuSFRNTEJvZHlFbGVtZW50LHdpbmRvdy5IVE1MRG9jdW1lbnR8fHdpbmRvdy5Eb2N1bWVudCx3aW5kb3cuSFRNTEhlYWRFbGVtZW50LHdpbmRvdy5IVE1MSHRtbEVsZW1lbnRdLFsiYXBwZW5kQ2hpbGQiLCJjb21wYXJlRG9jdW1lbnRQb3NpdGlvbiIsImNvbnRhaW5zIiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWVOUyIsImluc2VydEJlZm9yZSIsInF1ZXJ5U2VsZWN0b3IiLCJxdWVyeVNlbGVjdG9yQWxsIiwicmVtb3ZlQ2hpbGQiLCJyZXBsYWNlQ2hpbGQiLHJdKSxxKFt3aW5kb3cuSFRNTERvY3VtZW50fHx3aW5kb3cuRG9jdW1lbnRdLFsiYWRvcHROb2RlIiwiY29udGFpbnMiLCJjcmVhdGVDb21tZW50IiwiY3JlYXRlRG9jdW1lbnRGcmFnbWVudCIsImNyZWF0ZUVsZW1lbnQiLCJjcmVhdGVFbGVtZW50TlMiLCJjcmVhdGVFdmVudCIsImNyZWF0ZUV2ZW50TlMiLCJjcmVhdGVSYW5nZSIsImNyZWF0ZVRleHROb2RlIiwiZWxlbWVudEZyb21Qb2ludCIsImdldEVsZW1lbnRCeUlkIl0pLHMoYi5wcm90b3R5cGUsaikscyhiLnByb3RvdHlwZSxsKSxzKGIucHJvdG90eXBlLG0pLHMoYi5wcm90b3R5cGUse2dldCBpbXBsZW1lbnRhdGlvbigpe3ZhciBhPXguZ2V0KHRoaXMpO3JldHVybiBhP2E6KGE9bmV3IGcodSh0aGlzKS5pbXBsZW1lbnRhdGlvbikseC5zZXQodGhpcyxhKSxhKX19KSx0KHdpbmRvdy5Eb2N1bWVudCxiLGRvY3VtZW50LmltcGxlbWVudGF0aW9uLmNyZWF0ZUhUTUxEb2N1bWVudCgiIikpLHdpbmRvdy5IVE1MRG9jdW1lbnQmJnQod2luZG93LkhUTUxEb2N1bWVudCxiKSx3KFt3aW5kb3cuSFRNTEJvZHlFbGVtZW50LHdpbmRvdy5IVE1MRG9jdW1lbnR8fHdpbmRvdy5Eb2N1bWVudCx3aW5kb3cuSFRNTEhlYWRFbGVtZW50XSksaChnLCJjcmVhdGVEb2N1bWVudFR5cGUiKSxoKGcsImNyZWF0ZURvY3VtZW50IiksaChnLCJjcmVhdGVIVE1MRG9jdW1lbnQiKSxpKGcsImhhc0ZlYXR1cmUiKSx0KHdpbmRvdy5ET01JbXBsZW1lbnRhdGlvbixnKSxxKFt3aW5kb3cuRE9NSW1wbGVtZW50YXRpb25dLFsiY3JlYXRlRG9jdW1lbnRUeXBlIiwiY3JlYXRlRG9jdW1lbnQiLCJjcmVhdGVIVE1MRG9jdW1lbnQiLCJoYXNGZWF0dXJlIl0pLGEuYWRvcHROb2RlTm9SZW1vdmU9ZCxhLndyYXBwZXJzLkRPTUltcGxlbWVudGF0aW9uPWcsYS53cmFwcGVycy5Eb2N1bWVudD1ifSh0aGlzLlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtjLmNhbGwodGhpcyxhKX12YXIgYz1hLndyYXBwZXJzLkV2ZW50VGFyZ2V0LGQ9YS5taXhpbixlPWEucmVnaXN0ZXJXcmFwcGVyLGY9YS51bndyYXAsZz1hLnVud3JhcElmTmVlZGVkLGg9YS53cmFwLGk9YS5yZW5kZXJBbGxQZW5kaW5nLGo9d2luZG93LldpbmRvdztiLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGMucHJvdG90eXBlKTt2YXIgaz13aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZTtqLnByb3RvdHlwZS5nZXRDb21wdXRlZFN0eWxlPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGkoKSxrLmNhbGwodGhpc3x8d2luZG93LGcoYSksYil9LFsiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJkaXNwYXRjaEV2ZW50Il0uZm9yRWFjaChmdW5jdGlvbihhKXtqLnByb3RvdHlwZVthXT1mdW5jdGlvbigpe3ZhciBiPWgodGhpc3x8d2luZG93KTtyZXR1cm4gYlthXS5hcHBseShiLGFyZ3VtZW50cyl9fSksZChiLnByb3RvdHlwZSx7Z2V0Q29tcHV0ZWRTdHlsZTpmdW5jdGlvbihhLGIpe3JldHVybiBrLmNhbGwoZih0aGlzKSxnKGEpLGIpfX0pLGUoaixiKSxhLndyYXBwZXJzLldpbmRvdz1ifSh0aGlzLlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXt0aGlzLmltcGw9YX1mdW5jdGlvbiBjKGEpe3JldHVybiBuZXcgYihhKX1mdW5jdGlvbiBkKGEpe3JldHVybiBhLm1hcChjKX1mdW5jdGlvbiBlKGEpe3ZhciBiPXRoaXM7dGhpcy5pbXBsPW5ldyBrKGZ1bmN0aW9uKGMpe2EuY2FsbChiLGQoYyksYil9KX12YXIgZj1hLmRlZmluZUdldHRlcixnPWEuZGVmaW5lV3JhcEdldHRlcixoPWEucmVnaXN0ZXJXcmFwcGVyLGk9YS51bndyYXBJZk5lZWRlZCxqPWEud3JhcE5vZGVMaXN0O2Eud3JhcHBlcnM7dmFyIGs9d2luZG93Lk11dGF0aW9uT2JzZXJ2ZXJ8fHdpbmRvdy5XZWJLaXRNdXRhdGlvbk9ic2VydmVyO2lmKGspe3ZhciBsPXdpbmRvdy5NdXRhdGlvblJlY29yZDtiLnByb3RvdHlwZT17Z2V0IGFkZGVkTm9kZXMoKXtyZXR1cm4gaih0aGlzLmltcGwuYWRkZWROb2Rlcyl9LGdldCByZW1vdmVkTm9kZXMoKXtyZXR1cm4gaih0aGlzLmltcGwucmVtb3ZlZE5vZGVzKX19LFsidGFyZ2V0IiwicHJldmlvdXNTaWJsaW5nIiwibmV4dFNpYmxpbmciXS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2coYixhKX0pLFsidHlwZSIsImF0dHJpYnV0ZU5hbWUiLCJhdHRyaWJ1dGVOYW1lc3BhY2UiLCJvbGRWYWx1ZSJdLmZvckVhY2goZnVuY3Rpb24oYSl7ZihiLGEsZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbXBsW2FdfSl9KSxsJiZoKGwsYiksd2luZG93Lk5vZGUsZS5wcm90b3R5cGU9e29ic2VydmU6ZnVuY3Rpb24oYSxiKXt0aGlzLmltcGwub2JzZXJ2ZShpKGEpLGIpfSxkaXNjb25uZWN0OmZ1bmN0aW9uKCl7dGhpcy5pbXBsLmRpc2Nvbm5lY3QoKX0sdGFrZVJlY29yZHM6ZnVuY3Rpb24oKXtyZXR1cm4gZCh0aGlzLmltcGwudGFrZVJlY29yZHMoKSl9fSxhLndyYXBwZXJzLk11dGF0aW9uT2JzZXJ2ZXI9ZSxhLndyYXBwZXJzLk11dGF0aW9uUmVjb3JkPWJ9fSh0aGlzLlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXt0aGlzLmltcGw9YX12YXIgYz1hLnJlZ2lzdGVyV3JhcHBlcixkPWEudW53cmFwLGU9YS51bndyYXBJZk5lZWRlZCxmPWEud3JhcCxnPXdpbmRvdy5SYW5nZTtiLnByb3RvdHlwZT17Z2V0IHN0YXJ0Q29udGFpbmVyKCl7cmV0dXJuIGYodGhpcy5pbXBsLnN0YXJ0Q29udGFpbmVyKX0sZ2V0IGVuZENvbnRhaW5lcigpe3JldHVybiBmKHRoaXMuaW1wbC5lbmRDb250YWluZXIpfSxnZXQgY29tbW9uQW5jZXN0b3JDb250YWluZXIoKXtyZXR1cm4gZih0aGlzLmltcGwuY29tbW9uQW5jZXN0b3JDb250YWluZXIpfSxzZXRTdGFydDpmdW5jdGlvbihhLGIpe3RoaXMuaW1wbC5zZXRTdGFydChlKGEpLGIpfSxzZXRFbmQ6ZnVuY3Rpb24oYSxiKXt0aGlzLmltcGwuc2V0RW5kKGUoYSksYil9LHNldFN0YXJ0QmVmb3JlOmZ1bmN0aW9uKGEpe3RoaXMuaW1wbC5zZXRTdGFydEJlZm9yZShlKGEpKX0sc2V0U3RhcnRBZnRlcjpmdW5jdGlvbihhKXt0aGlzLmltcGwuc2V0U3RhcnRBZnRlcihlKGEpKX0sc2V0RW5kQmVmb3JlOmZ1bmN0aW9uKGEpe3RoaXMuaW1wbC5zZXRFbmRCZWZvcmUoZShhKSl9LHNldEVuZEFmdGVyOmZ1bmN0aW9uKGEpe3RoaXMuaW1wbC5zZXRFbmRBZnRlcihlKGEpKX0sc2VsZWN0Tm9kZTpmdW5jdGlvbihhKXt0aGlzLmltcGwuc2VsZWN0Tm9kZShlKGEpKX0sc2VsZWN0Tm9kZUNvbnRlbnRzOmZ1bmN0aW9uKGEpe3RoaXMuaW1wbC5zZWxlY3ROb2RlQ29udGVudHMoZShhKSl9LGNvbXBhcmVCb3VuZGFyeVBvaW50czpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLmltcGwuY29tcGFyZUJvdW5kYXJ5UG9pbnRzKGEsZChiKSl9LGV4dHJhY3RDb250ZW50czpmdW5jdGlvbigpe3JldHVybiBmKHRoaXMuaW1wbC5leHRyYWN0Q29udGVudHMoKSl9LGNsb25lQ29udGVudHM6ZnVuY3Rpb24oKXtyZXR1cm4gZih0aGlzLmltcGwuY2xvbmVDb250ZW50cygpKX0saW5zZXJ0Tm9kZTpmdW5jdGlvbihhKXt0aGlzLmltcGwuaW5zZXJ0Tm9kZShlKGEpKX0sc3Vycm91bmRDb250ZW50czpmdW5jdGlvbihhKXt0aGlzLmltcGwuc3Vycm91bmRDb250ZW50cyhlKGEpKX0sY2xvbmVSYW5nZTpmdW5jdGlvbigpe3JldHVybiBmKHRoaXMuaW1wbC5jbG9uZVJhbmdlKCkpfSxpc1BvaW50SW5SYW5nZTpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLmltcGwuaXNQb2ludEluUmFuZ2UoZShhKSxiKX0sY29tcGFyZVBvaW50OmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuaW1wbC5jb21wYXJlUG9pbnQoZShhKSxiKX0saW50ZXJzZWN0c05vZGU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuaW1wbC5pbnRlcnNlY3RzTm9kZShlKGEpKX19LGcucHJvdG90eXBlLmNyZWF0ZUNvbnRleHR1YWxGcmFnbWVudCYmKGIucHJvdG90eXBlLmNyZWF0ZUNvbnRleHR1YWxGcmFnbWVudD1mdW5jdGlvbihhKXtyZXR1cm4gZih0aGlzLmltcGwuY3JlYXRlQ29udGV4dHVhbEZyYWdtZW50KGEpKX0pLGMod2luZG93LlJhbmdlLGIpLGEud3JhcHBlcnMuUmFuZ2U9Yn0odGhpcy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7dmFyIGI9Y1thXSxkPXdpbmRvd1tiXTtpZihkKXt2YXIgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KGEpLGY9ZS5jb25zdHJ1Y3Rvcjt3aW5kb3dbYl09Zn19YS5pc1dyYXBwZXJGb3I7dmFyIGM9e2E6IkhUTUxBbmNob3JFbGVtZW50IixhcHBsZXQ6IkhUTUxBcHBsZXRFbGVtZW50IixhcmVhOiJIVE1MQXJlYUVsZW1lbnQiLGF1ZGlvOiJIVE1MQXVkaW9FbGVtZW50IixicjoiSFRNTEJSRWxlbWVudCIsYmFzZToiSFRNTEJhc2VFbGVtZW50Iixib2R5OiJIVE1MQm9keUVsZW1lbnQiLGJ1dHRvbjoiSFRNTEJ1dHRvbkVsZW1lbnQiLGRsOiJIVE1MRExpc3RFbGVtZW50IixkYXRhbGlzdDoiSFRNTERhdGFMaXN0RWxlbWVudCIsZGF0YToiSFRNTERhdGFFbGVtZW50IixkaXI6IkhUTUxEaXJlY3RvcnlFbGVtZW50IixkaXY6IkhUTUxEaXZFbGVtZW50IixlbWJlZDoiSFRNTEVtYmVkRWxlbWVudCIsZmllbGRzZXQ6IkhUTUxGaWVsZFNldEVsZW1lbnQiLGZvbnQ6IkhUTUxGb250RWxlbWVudCIsZm9ybToiSFRNTEZvcm1FbGVtZW50IixmcmFtZToiSFRNTEZyYW1lRWxlbWVudCIsZnJhbWVzZXQ6IkhUTUxGcmFtZVNldEVsZW1lbnQiLGhyOiJIVE1MSFJFbGVtZW50IixoZWFkOiJIVE1MSGVhZEVsZW1lbnQiLGgxOiJIVE1MSGVhZGluZ0VsZW1lbnQiLGh0bWw6IkhUTUxIdG1sRWxlbWVudCIsaWZyYW1lOiJIVE1MSUZyYW1lRWxlbWVudCIsaW5wdXQ6IkhUTUxJbnB1dEVsZW1lbnQiLGxpOiJIVE1MTElFbGVtZW50IixsYWJlbDoiSFRNTExhYmVsRWxlbWVudCIsbGVnZW5kOiJIVE1MTGVnZW5kRWxlbWVudCIsbGluazoiSFRNTExpbmtFbGVtZW50IixtYXA6IkhUTUxNYXBFbGVtZW50IixtYXJxdWVlOiJIVE1MTWFycXVlZUVsZW1lbnQiLG1lbnU6IkhUTUxNZW51RWxlbWVudCIsbWVudWl0ZW06IkhUTUxNZW51SXRlbUVsZW1lbnQiLG1ldGE6IkhUTUxNZXRhRWxlbWVudCIsbWV0ZXI6IkhUTUxNZXRlckVsZW1lbnQiLGRlbDoiSFRNTE1vZEVsZW1lbnQiLG9sOiJIVE1MT0xpc3RFbGVtZW50IixvYmplY3Q6IkhUTUxPYmplY3RFbGVtZW50IixvcHRncm91cDoiSFRNTE9wdEdyb3VwRWxlbWVudCIsb3B0aW9uOiJIVE1MT3B0aW9uRWxlbWVudCIsb3V0cHV0OiJIVE1MT3V0cHV0RWxlbWVudCIscDoiSFRNTFBhcmFncmFwaEVsZW1lbnQiLHBhcmFtOiJIVE1MUGFyYW1FbGVtZW50IixwcmU6IkhUTUxQcmVFbGVtZW50Iixwcm9ncmVzczoiSFRNTFByb2dyZXNzRWxlbWVudCIscToiSFRNTFF1b3RlRWxlbWVudCIsc2NyaXB0OiJIVE1MU2NyaXB0RWxlbWVudCIsc2VsZWN0OiJIVE1MU2VsZWN0RWxlbWVudCIsc291cmNlOiJIVE1MU291cmNlRWxlbWVudCIsc3BhbjoiSFRNTFNwYW5FbGVtZW50IixzdHlsZToiSFRNTFN0eWxlRWxlbWVudCIsdGltZToiSFRNTFRpbWVFbGVtZW50IixjYXB0aW9uOiJIVE1MVGFibGVDYXB0aW9uRWxlbWVudCIsY29sOiJIVE1MVGFibGVDb2xFbGVtZW50Iix0YWJsZToiSFRNTFRhYmxlRWxlbWVudCIsdHI6IkhUTUxUYWJsZVJvd0VsZW1lbnQiLHRoZWFkOiJIVE1MVGFibGVTZWN0aW9uRWxlbWVudCIsdGJvZHk6IkhUTUxUYWJsZVNlY3Rpb25FbGVtZW50Iix0ZXh0YXJlYToiSFRNTFRleHRBcmVhRWxlbWVudCIsdHJhY2s6IkhUTUxUcmFja0VsZW1lbnQiLHRpdGxlOiJIVE1MVGl0bGVFbGVtZW50Iix1bDoiSFRNTFVMaXN0RWxlbWVudCIsdmlkZW86IkhUTUxWaWRlb0VsZW1lbnQifTtPYmplY3Qua2V5cyhjKS5mb3JFYWNoKGIpLE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGEud3JhcHBlcnMpLmZvckVhY2goZnVuY3Rpb24oYil7d2luZG93W2JdPWEud3JhcHBlcnNbYl19KSxhLmtub3duRWxlbWVudHM9Y30odGhpcy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oKXt3aW5kb3cud3JhcD1mdW5jdGlvbihhKXtyZXR1cm4gYS5pbXBsP2E6U2hhZG93RE9NUG9seWZpbGwud3JhcChhKX0sd2luZG93LnVud3JhcD1mdW5jdGlvbihhKXtyZXR1cm4gYS5pbXBsP1NoYWRvd0RPTVBvbHlmaWxsLnVud3JhcChhKTphfTt2YXIgYT13aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZTt3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZT1mdW5jdGlvbihiLGMpe3JldHVybiBhLmNhbGwod2luZG93LHdyYXAoYiksYyl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKEhUTUxFbGVtZW50LnByb3RvdHlwZSx7d2Via2l0U2hhZG93Um9vdDp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2hhZG93Um9vdH19fSk7dmFyIGI9SFRNTEVsZW1lbnQucHJvdG90eXBlLmNyZWF0ZVNoYWRvd1Jvb3Q7SFRNTEVsZW1lbnQucHJvdG90eXBlLmNyZWF0ZVNoYWRvd1Jvb3Q9ZnVuY3Rpb24oKXt2YXIgYT1iLmNhbGwodGhpcyk7cmV0dXJuIGEuaG9zdD10aGlzLGF9LEhUTUxFbGVtZW50LnByb3RvdHlwZS53ZWJraXRDcmVhdGVTaGFkb3dSb290PUhUTUxFbGVtZW50LnByb3RvdHlwZS5jcmVhdGVTaGFkb3dSb290fSgpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSxiKXt2YXIgYz0iIjtyZXR1cm4gQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChhLGZ1bmN0aW9uKGEpe2MrPWEudGV4dENvbnRlbnQrIlxuXG4ifSksYnx8KGM9Yy5yZXBsYWNlKG4sIiIpKSxjfWZ1bmN0aW9uIGMoYSl7dmFyIGI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3R5bGUiKTtyZXR1cm4gYi50ZXh0Q29udGVudD1hLGJ9ZnVuY3Rpb24gZChhKXt2YXIgYj1jKGEpO2RvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoYik7dmFyIGQ9Yi5zaGVldC5jc3NSdWxlcztyZXR1cm4gYi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGIpLGR9ZnVuY3Rpb24gZShhKXtmb3IodmFyIGI9MCxjPVtdO2I8YS5sZW5ndGg7YisrKWMucHVzaChhW2JdLmNzc1RleHQpO3JldHVybiBjLmpvaW4oIlxuXG4iKX1mdW5jdGlvbiBmKGEpe2EmJmcoKS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShhKSl9ZnVuY3Rpb24gZygpe3JldHVybiBofHwoaD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzdHlsZSIpLGguc2V0QXR0cmlidXRlKCJTaGFkb3dDU1NTaGltIiwiIikpLGh9dmFyIGgsaT17c3RyaWN0U3R5bGluZzohMSxyZWdpc3RyeTp7fSxzaGltU3R5bGluZzpmdW5jdGlvbihhLGIsZCl7dmFyIGU9dGhpcy5pc1R5cGVFeHRlbnNpb24oZCksZz10aGlzLnJlZ2lzdGVyRGVmaW5pdGlvbihhLGIsZCk7dGhpcy5zdHJpY3RTdHlsaW5nJiZ0aGlzLmFwcGx5U2NvcGVUb0NvbnRlbnQoYSxiKSx0aGlzLmluc2VydFBvbHlmaWxsRGlyZWN0aXZlcyhnLnJvb3RTdHlsZXMpLHRoaXMuaW5zZXJ0UG9seWZpbGxSdWxlcyhnLnJvb3RTdHlsZXMpO3ZhciBoPXRoaXMuc3R5bGVzVG9TaGltbWVkQ3NzVGV4dChnLnNjb3BlU3R5bGVzLGIsZSk7aCs9dGhpcy5leHRyYWN0UG9seWZpbGxVbnNjb3BlZFJ1bGVzKGcucm9vdFN0eWxlcyksZy5zaGltbWVkU3R5bGU9YyhoKSxhJiYoYS5zaGltbWVkU3R5bGU9Zy5zaGltbWVkU3R5bGUpO2Zvcih2YXIgaSxqPTAsaz1nLnJvb3RTdHlsZXMubGVuZ3RoO2s+aiYmKGk9Zy5yb290U3R5bGVzW2pdKTtqKyspaS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGkpO2YoaCl9LHJlZ2lzdGVyRGVmaW5pdGlvbjpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9dGhpcy5yZWdpc3RyeVtiXT17cm9vdDphLG5hbWU6YixleHRlbmRzTmFtZTpjfSxlPWE/YS5xdWVyeVNlbGVjdG9yQWxsKCJzdHlsZSIpOltdO2U9ZT9BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChlLDApOltdLGQucm9vdFN0eWxlcz1lLGQuc2NvcGVTdHlsZXM9ZC5yb290U3R5bGVzO3ZhciBmPXRoaXMucmVnaXN0cnlbZC5leHRlbmRzTmFtZV07cmV0dXJuIWZ8fGEmJiFhLnF1ZXJ5U2VsZWN0b3IoInNoYWRvdyIpfHwoZC5zY29wZVN0eWxlcz1mLnNjb3BlU3R5bGVzLmNvbmNhdChkLnNjb3BlU3R5bGVzKSksZH0saXNUeXBlRXh0ZW5zaW9uOmZ1bmN0aW9uKGEpe3JldHVybiBhJiZhLmluZGV4T2YoIi0iKTwwfSxhcHBseVNjb3BlVG9Db250ZW50OmZ1bmN0aW9uKGEsYil7YSYmKEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoYS5xdWVyeVNlbGVjdG9yQWxsKCIqIiksZnVuY3Rpb24oYSl7YS5zZXRBdHRyaWJ1dGUoYiwiIil9KSxBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGEucXVlcnlTZWxlY3RvckFsbCgidGVtcGxhdGUiKSxmdW5jdGlvbihhKXt0aGlzLmFwcGx5U2NvcGVUb0NvbnRlbnQoYS5jb250ZW50LGIpfSx0aGlzKSl9LGluc2VydFBvbHlmaWxsRGlyZWN0aXZlczpmdW5jdGlvbihhKXthJiZBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGEsZnVuY3Rpb24oYSl7YS50ZXh0Q29udGVudD10aGlzLmluc2VydFBvbHlmaWxsRGlyZWN0aXZlc0luQ3NzVGV4dChhLnRleHRDb250ZW50KX0sdGhpcyl9LGluc2VydFBvbHlmaWxsRGlyZWN0aXZlc0luQ3NzVGV4dDpmdW5jdGlvbihhKXtyZXR1cm4gYS5yZXBsYWNlKG8sZnVuY3Rpb24oYSxiKXtyZXR1cm4gYi5zbGljZSgwLC0yKSsieyJ9KX0saW5zZXJ0UG9seWZpbGxSdWxlczpmdW5jdGlvbihhKXthJiZBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGEsZnVuY3Rpb24oYSl7YS50ZXh0Q29udGVudD10aGlzLmluc2VydFBvbHlmaWxsUnVsZXNJbkNzc1RleHQoYS50ZXh0Q29udGVudCl9LHRoaXMpfSxpbnNlcnRQb2x5ZmlsbFJ1bGVzSW5Dc3NUZXh0OmZ1bmN0aW9uKGEpe3JldHVybiBhLnJlcGxhY2UocCxmdW5jdGlvbihhLGIpe3JldHVybiBiLnNsaWNlKDAsLTEpfSl9LGV4dHJhY3RQb2x5ZmlsbFVuc2NvcGVkUnVsZXM6ZnVuY3Rpb24oYSl7dmFyIGI9IiI7cmV0dXJuIGEmJkFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoYSxmdW5jdGlvbihhKXtiKz10aGlzLmV4dHJhY3RQb2x5ZmlsbFVuc2NvcGVkUnVsZXNGcm9tQ3NzVGV4dChhLnRleHRDb250ZW50KSsiXG5cbiJ9LHRoaXMpLGJ9LGV4dHJhY3RQb2x5ZmlsbFVuc2NvcGVkUnVsZXNGcm9tQ3NzVGV4dDpmdW5jdGlvbihhKXtmb3IodmFyIGIsYz0iIjtiPXEuZXhlYyhhKTspYys9YlsxXS5zbGljZSgwLC0xKSsiXG5cbiI7cmV0dXJuIGN9LHN0eWxlc1RvU2hpbW1lZENzc1RleHQ6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiB0aGlzLnNoaW1BdEhvc3QoYSxiLGMpK3RoaXMuc2hpbVNjb3BpbmcoYSxiLGMpfSxzaGltQXRIb3N0OmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gYT90aGlzLmNvbnZlcnRBdEhvc3RTdHlsZXMoYSxiLGMpOnZvaWQgMH0sY29udmVydEF0SG9zdFN0eWxlczpmdW5jdGlvbihhLGMsZil7dmFyIGc9YihhKSxoPXRoaXM7cmV0dXJuIGc9Zy5yZXBsYWNlKGosZnVuY3Rpb24oYSxiKXtyZXR1cm4gaC5zY29wZUhvc3RDc3MoYixjLGYpfSksZz1lKHRoaXMuZmluZEF0SG9zdFJ1bGVzKGQoZyksbmV3IFJlZ0V4cCgiXiIrYyt1LCJtIikpKX0sc2NvcGVIb3N0Q3NzOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD10aGlzO3JldHVybiBhLnJlcGxhY2UoayxmdW5jdGlvbihhLGUsZil7cmV0dXJuIGQuc2NvcGVIb3N0U2VsZWN0b3IoZSxiLGMpKyIgIitmKyJcbgkifSl9LHNjb3BlSG9zdFNlbGVjdG9yOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD1bXSxlPWEuc3BsaXQoIiwiKSxmPSJbaXM9IitiKyJdIjtyZXR1cm4gZS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2E9YS50cmltKCksYS5tYXRjaChsKT9hPWEucmVwbGFjZShsLGM/ZisiJDEkMyI6YisiJDEkMyIpOmEubWF0Y2gobSkmJihhPWM/ZithOmIrYSksZC5wdXNoKGEpfSx0aGlzKSxkLmpvaW4oIiwgIil9LGZpbmRBdEhvc3RSdWxlczpmdW5jdGlvbihhLGIpe3JldHVybiBBcnJheS5wcm90b3R5cGUuZmlsdGVyLmNhbGwoYSx0aGlzLmlzSG9zdFJ1bGUuYmluZCh0aGlzLGIpKX0saXNIb3N0UnVsZTpmdW5jdGlvbihhLGIpe3JldHVybiBiLnNlbGVjdG9yVGV4dCYmYi5zZWxlY3RvclRleHQubWF0Y2goYSl8fGIuY3NzUnVsZXMmJnRoaXMuZmluZEF0SG9zdFJ1bGVzKGIuY3NzUnVsZXMsYSkubGVuZ3RofHxiLnR5cGU9PUNTU1J1bGUuV0VCS0lUX0tFWUZSQU1FU19SVUxFfSxzaGltU2NvcGluZzpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGE/dGhpcy5jb252ZXJ0U2NvcGVkU3R5bGVzKGEsYixjKTp2b2lkIDB9LGNvbnZlcnRTY29wZWRTdHlsZXM6ZnVuY3Rpb24oYSxjLGUpe3ZhciBmPWIoYSkucmVwbGFjZShqLCIiKTtmPXRoaXMuaW5zZXJ0UG9seWZpbGxIb3N0SW5Dc3NUZXh0KGYpLGY9dGhpcy5jb252ZXJ0Q29sb25Ib3N0KGYpLGY9dGhpcy5jb252ZXJ0UHNldWRvcyhmKSxmPXRoaXMuY29udmVydFBhcnRzKGYpLGY9dGhpcy5jb252ZXJ0Q29tYmluYXRvcnMoZik7dmFyIGc9ZChmKTtyZXR1cm4gZj10aGlzLnNjb3BlUnVsZXMoZyxjLGUpfSxjb252ZXJ0UHNldWRvczpmdW5jdGlvbihhKXtyZXR1cm4gYS5yZXBsYWNlKHIsIiBbcHNldWRvPSQxXSIpfSxjb252ZXJ0UGFydHM6ZnVuY3Rpb24oYSl7cmV0dXJuIGEucmVwbGFjZShzLCIgW3BhcnQ9JDFdIil9LGNvbnZlcnRDb2xvbkhvc3Q6ZnVuY3Rpb24oYSl7cmV0dXJuIGEucmVwbGFjZSh0LGZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiBjP3krYytkKyIsICIrYysiICIrYitkOmIrZH0pfSxjb252ZXJ0Q29tYmluYXRvcnM6ZnVuY3Rpb24oYSl7cmV0dXJuIGEucmVwbGFjZSgiXl4iLCIgIikucmVwbGFjZSgiXiIsIiAiKX0sc2NvcGVSdWxlczpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9IiI7cmV0dXJuIEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoYSxmdW5jdGlvbihhKXthLnNlbGVjdG9yVGV4dCYmYS5zdHlsZSYmYS5zdHlsZS5jc3NUZXh0PyhkKz10aGlzLnNjb3BlU2VsZWN0b3IoYS5zZWxlY3RvclRleHQsYixjLHRoaXMuc3RyaWN0U3R5bGluZykrIiB7XG4JIixkKz10aGlzLnByb3BlcnRpZXNGcm9tUnVsZShhKSsiXG59XG5cbiIpOmEubWVkaWE/KGQrPSJAbWVkaWEgIithLm1lZGlhLm1lZGlhVGV4dCsiIHtcbiIsZCs9dGhpcy5zY29wZVJ1bGVzKGEuY3NzUnVsZXMsYiksZCs9IlxufVxuXG4iKTphLmNzc1RleHQmJihkKz1hLmNzc1RleHQrIlxuXG4iKX0sdGhpcyksZH0sc2NvcGVTZWxlY3RvcjpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1bXSxmPWEuc3BsaXQoIiwiKTtyZXR1cm4gZi5mb3JFYWNoKGZ1bmN0aW9uKGEpe2E9YS50cmltKCksdGhpcy5zZWxlY3Rvck5lZWRzU2NvcGluZyhhLGIsYykmJihhPWQ/dGhpcy5hcHBseVN0cmljdFNlbGVjdG9yU2NvcGUoYSxiKTp0aGlzLmFwcGx5U2ltcGxlU2VsZWN0b3JTY29wZShhLGIsYykpLGUucHVzaChhKX0sdGhpcyksZS5qb2luKCIsICIpfSxzZWxlY3Rvck5lZWRzU2NvcGluZzpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9Yz9iOiJcXFtpcz0iK2IrIlxcXSIsZT1uZXcgUmVnRXhwKCJeKCIrZCsiKSIrdSwibSIpO3JldHVybiFhLm1hdGNoKGUpfSxhcHBseVNpbXBsZVNlbGVjdG9yU2NvcGU6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWM/Iltpcz0iK2IrIl0iOmI7cmV0dXJuIGEubWF0Y2goeik/KGE9YS5yZXBsYWNlKHksZCksYS5yZXBsYWNlKHosZCsiICIpKTpkKyIgIithfSxhcHBseVN0cmljdFNlbGVjdG9yU2NvcGU6ZnVuY3Rpb24oYSxiKXt2YXIgYz1bIiAiLCI+IiwiKyIsIn4iXSxkPWEsZT0iWyIrYisiXSI7cmV0dXJuIGMuZm9yRWFjaChmdW5jdGlvbihhKXt2YXIgYj1kLnNwbGl0KGEpO2Q9Yi5tYXAoZnVuY3Rpb24oYSl7dmFyIGI9YS50cmltKCkucmVwbGFjZSh6LCIiKTtyZXR1cm4gYiYmYy5pbmRleE9mKGIpPDAmJmIuaW5kZXhPZihlKTwwJiYoYT1iLnJlcGxhY2UoLyhbXjpdKikoOiopKC4qKS8sIiQxIitlKyIkMiQzIikpLGEKfSkuam9pbihhKX0pLGR9LGluc2VydFBvbHlmaWxsSG9zdEluQ3NzVGV4dDpmdW5jdGlvbihhKXtyZXR1cm4gYS5yZXBsYWNlKHYseCkucmVwbGFjZSh3LHgpfSxwcm9wZXJ0aWVzRnJvbVJ1bGU6ZnVuY3Rpb24oYSl7dmFyIGI9YS5zdHlsZS5jc3NUZXh0O3JldHVybiBhLnN0eWxlLmNvbnRlbnQmJiFhLnN0eWxlLmNvbnRlbnQubWF0Y2goL1snIl0rLykmJihiPSJjb250ZW50OiAnIithLnN0eWxlLmNvbnRlbnQrIic7XG4iK2Euc3R5bGUuY3NzVGV4dC5yZXBsYWNlKC9jb250ZW50OlteO10qOy9nLCIiKSksYn19LGo9L0Bob3N0W157XSp7KChbXn1dKj97W157XSo/fVtcc1xTXSo/KSspfS9naW0saz0vKFtee10qKSh7W1xzXFNdKj99KS9naW0sbD0vKC4qKSgoPzpcKil8KD86XDpzY29wZSkpKC4qKS8sbT0vXlsuXFs6XS8sbj0vXC9cKlteKl0qXCorKFteLypdW14qXSpcKispKlwvL2dpbSxvPS9cL1wqXHMqQHBvbHlmaWxsIChbXipdKlwqKyhbXi8qXVteKl0qXCorKSpcLykoW157XSo/KXsvZ2ltLHA9L1wvXCpcc0Bwb2x5ZmlsbC1ydWxlKFteKl0qXCorKFteLypdW14qXSpcKispKilcLy9naW0scT0vXC9cKlxzQHBvbHlmaWxsLXVuc2NvcGVkLXJ1bGUoW14qXSpcKisoW14vKl1bXipdKlwqKykqKVwvL2dpbSxyPS86Oih4LVteXHN7LChdKikvZ2ltLHM9Lzo6cGFydFwoKFteKV0qKVwpL2dpbSx0PS8oLWhvc3QpKD86XCgoW14pXSopXCkpPyhbXix7XSopL2dpbSx1PSIoWz5cXHN+K1suLHs6XVtcXHNcXFNdKik/JCIsdj0vQGhvc3QvZ2ltLHc9L1w6aG9zdC9naW0seD0iLWhvc3QiLHk9Ii1ob3N0LW5vLWNvbWJpbmF0b3IiLHo9Ly1ob3N0L2dpbTtpZih3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpe2YoInN0eWxlIHsgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyB9XG4iKTt2YXIgQT1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCJoZWFkIik7QS5pbnNlcnRCZWZvcmUoZygpLEEuY2hpbGROb2Rlc1swXSl9YS5TaGFkb3dDU1M9aX0od2luZG93LlBsYXRmb3JtKX1lbHNlIWZ1bmN0aW9uKCl7d2luZG93LnRlbXBsYXRlQ29udGVudD13aW5kb3cudGVtcGxhdGVDb250ZW50fHxmdW5jdGlvbihhKXtyZXR1cm4gYS5jb250ZW50fSx3aW5kb3cud3JhcD13aW5kb3cudW53cmFwPWZ1bmN0aW9uKGEpe3JldHVybiBhfTt2YXIgYT1IVE1MRWxlbWVudC5wcm90b3R5cGUud2Via2l0Q3JlYXRlU2hhZG93Um9vdDtIVE1MRWxlbWVudC5wcm90b3R5cGUud2Via2l0Q3JlYXRlU2hhZG93Um9vdD1mdW5jdGlvbigpe3ZhciBiPXRoaXMud2Via2l0U2hhZG93Um9vdCxjPWEuY2FsbCh0aGlzKTtyZXR1cm4gYy5vbGRlclNoYWRvd1Jvb3Q9YixjLmhvc3Q9dGhpcyxDdXN0b21FbGVtZW50cy53YXRjaFNoYWRvdyh0aGlzKSxjfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhIVE1MRWxlbWVudC5wcm90b3R5cGUse3NoYWRvd1Jvb3Q6e2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLndlYmtpdFNoYWRvd1Jvb3R9fSxjcmVhdGVTaGFkb3dSb290Ont2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLndlYmtpdENyZWF0ZVNoYWRvd1Jvb3QoKX19fSksd2luZG93LnRlbXBsYXRlQ29udGVudD1mdW5jdGlvbihhKXtpZih3aW5kb3cuSFRNTFRlbXBsYXRlRWxlbWVudCYmSFRNTFRlbXBsYXRlRWxlbWVudC5ib290c3RyYXAmJkhUTUxUZW1wbGF0ZUVsZW1lbnQuYm9vdHN0cmFwKGEpLCFhLmNvbnRlbnQmJiFhLl9jb250ZW50KXtmb3IodmFyIGI9ZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO2EuZmlyc3RDaGlsZDspYi5hcHBlbmRDaGlsZChhLmZpcnN0Q2hpbGQpO2EuX2NvbnRlbnQ9Yn1yZXR1cm4gYS5jb250ZW50fHxhLl9jb250ZW50fX0oKTshZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhKXtmb3IodmFyIGI9YXx8e30sZD0xO2Q8YXJndW1lbnRzLmxlbmd0aDtkKyspe3ZhciBlPWFyZ3VtZW50c1tkXTt0cnl7Zm9yKHZhciBmIGluIGUpYyhmLGUsYil9Y2F0Y2goZyl7fX1yZXR1cm4gYn1mdW5jdGlvbiBjKGEsYixjKXt2YXIgZT1kKGIsYSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGMsYSxlKX1mdW5jdGlvbiBkKGEsYil7aWYoYSl7dmFyIGM9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihhLGIpO3JldHVybiBjfHxkKE9iamVjdC5nZXRQcm90b3R5cGVPZihhKSxiKX19RnVuY3Rpb24ucHJvdG90eXBlLmJpbmR8fChGdW5jdGlvbi5wcm90b3R5cGUuYmluZD1mdW5jdGlvbihhKXt2YXIgYj10aGlzLGM9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpO3JldHVybiBmdW5jdGlvbigpe3ZhciBkPWMuc2xpY2UoKTtyZXR1cm4gZC5wdXNoLmFwcGx5KGQsYXJndW1lbnRzKSxiLmFwcGx5KGEsZCl9fSksYS5taXhpbj1ifSh3aW5kb3cuUGxhdGZvcm0pLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEsYixjKXt2YXIgZD0ic3RyaW5nIj09dHlwZW9mIGE/ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChhKTphLmNsb25lTm9kZSghMCk7aWYoZC5pbm5lckhUTUw9YixjKWZvcih2YXIgZSBpbiBjKWQuc2V0QXR0cmlidXRlKGUsY1tlXSk7cmV0dXJuIGR9dmFyIGM9RE9NVG9rZW5MaXN0LnByb3RvdHlwZS5hZGQsZD1ET01Ub2tlbkxpc3QucHJvdG90eXBlLnJlbW92ZTtET01Ub2tlbkxpc3QucHJvdG90eXBlLmFkZD1mdW5jdGlvbigpe2Zvcih2YXIgYT0wO2E8YXJndW1lbnRzLmxlbmd0aDthKyspYy5jYWxsKHRoaXMsYXJndW1lbnRzW2FdKX0sRE9NVG9rZW5MaXN0LnByb3RvdHlwZS5yZW1vdmU9ZnVuY3Rpb24oKXtmb3IodmFyIGE9MDthPGFyZ3VtZW50cy5sZW5ndGg7YSsrKWQuY2FsbCh0aGlzLGFyZ3VtZW50c1thXSl9LERPTVRva2VuTGlzdC5wcm90b3R5cGUudG9nZ2xlPWZ1bmN0aW9uKGEsYil7MT09YXJndW1lbnRzLmxlbmd0aCYmKGI9IXRoaXMuY29udGFpbnMoYSkpLGI/dGhpcy5hZGQoYSk6dGhpcy5yZW1vdmUoYSl9LERPTVRva2VuTGlzdC5wcm90b3R5cGUuc3dpdGNoPWZ1bmN0aW9uKGEsYil7YSYmdGhpcy5yZW1vdmUoYSksYiYmdGhpcy5hZGQoYil9O3ZhciBlPWZ1bmN0aW9uKCl7cmV0dXJuIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHRoaXMpfSxmPXdpbmRvdy5OYW1lZE5vZGVNYXB8fHdpbmRvdy5Nb3pOYW1lZEF0dHJNYXB8fHt9O2lmKE5vZGVMaXN0LnByb3RvdHlwZS5hcnJheT1lLGYucHJvdG90eXBlLmFycmF5PWUsSFRNTENvbGxlY3Rpb24ucHJvdG90eXBlLmFycmF5PWUsIXdpbmRvdy5wZXJmb3JtYW5jZSl7dmFyIGc9RGF0ZS5ub3coKTt3aW5kb3cucGVyZm9ybWFuY2U9e25vdzpmdW5jdGlvbigpe3JldHVybiBEYXRlLm5vdygpLWd9fX13aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lfHwod2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZT1mdW5jdGlvbigpe3ZhciBhPXdpbmRvdy53ZWJraXRSZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fHdpbmRvdy5tb3pSZXF1ZXN0QW5pbWF0aW9uRnJhbWU7cmV0dXJuIGE/ZnVuY3Rpb24oYil7cmV0dXJuIGEoZnVuY3Rpb24oKXtiKHBlcmZvcm1hbmNlLm5vdygpKX0pfTpmdW5jdGlvbihhKXtyZXR1cm4gd2luZG93LnNldFRpbWVvdXQoYSwxZTMvNjApfX0oKSksd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lfHwod2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lPWZ1bmN0aW9uKCl7cmV0dXJuIHdpbmRvdy53ZWJraXRDYW5jZWxBbmltYXRpb25GcmFtZXx8d2luZG93Lm1vekNhbmNlbEFuaW1hdGlvbkZyYW1lfHxmdW5jdGlvbihhKXtjbGVhclRpbWVvdXQoYSl9fSgpKSxhLmNyZWF0ZURPTT1ifSh3aW5kb3cuUGxhdGZvcm0pLHdpbmRvdy50ZW1wbGF0ZUNvbnRlbnQ9d2luZG93LnRlbXBsYXRlQ29udGVudHx8ZnVuY3Rpb24oYSl7cmV0dXJuIGEuY29udGVudH0sZnVuY3Rpb24oYSl7YT1hfHwod2luZG93Lkluc3BlY3Rvcj17fSk7dmFyIGI7d2luZG93LnNpbnNwZWN0PWZ1bmN0aW9uKGEsZCl7Ynx8KGI9d2luZG93Lm9wZW4oIiIsIlNoYWRvd0RPTSBJbnNwZWN0b3IiLG51bGwsITApLGIuZG9jdW1lbnQud3JpdGUoYyksYi5hcGk9e3NoYWRvd2l6ZTpzaGFkb3dpemV9KSxmKGF8fHdyYXAoZG9jdW1lbnQuYm9keSksZCl9O3ZhciBjPVsiPCFET0NUWVBFIGh0bWw+IiwiPGh0bWw+IiwiICA8aGVhZD4iLCIgICAgPHRpdGxlPlNoYWRvd0RPTSBJbnNwZWN0b3I8L3RpdGxlPiIsIiAgICA8c3R5bGU+IiwiICAgICAgYm9keSB7IiwiICAgICAgfSIsIiAgICAgIHByZSB7IiwnICAgICAgICBmb250OiA5cHQgIkNvdXJpZXIgTmV3IiwgbW9ub3NwYWNlOycsIiAgICAgICAgbGluZS1oZWlnaHQ6IDEuNWVtOyIsIiAgICAgIH0iLCIgICAgICB0YWcgeyIsIiAgICAgICAgY29sb3I6IHB1cnBsZTsiLCIgICAgICB9IiwiICAgICAgdWwgeyIsIiAgICAgICAgIG1hcmdpbjogMDsiLCIgICAgICAgICBwYWRkaW5nOiAwOyIsIiAgICAgICAgIGxpc3Qtc3R5bGU6IG5vbmU7IiwiICAgICAgfSIsIiAgICAgIGxpIHsiLCIgICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IiwiICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2YxZjFmMTsiLCIgICAgICAgICBwYWRkaW5nOiA0cHggNnB4OyIsIiAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDsiLCIgICAgICAgICBtYXJnaW4tcmlnaHQ6IDRweDsiLCIgICAgICB9IiwiICAgIDwvc3R5bGU+IiwiICA8L2hlYWQ+IiwiICA8Ym9keT4iLCcgICAgPHVsIGlkPSJjcnVtYnMiPicsIiAgICA8L3VsPiIsJyAgICA8ZGl2IGlkPSJ0cmVlIj48L2Rpdj4nLCIgIDwvYm9keT4iLCI8L2h0bWw+Il0uam9pbigiXG4iKSxkPVtdLGU9ZnVuY3Rpb24oKXt2YXIgYT1iLmRvY3VtZW50LGM9YS5xdWVyeVNlbGVjdG9yKCIjY3J1bWJzIik7Yy50ZXh0Q29udGVudD0iIjtmb3IodmFyIGUsZz0wO2U9ZFtnXTtnKyspe3ZhciBoPWEuY3JlYXRlRWxlbWVudCgiYSIpO2guaHJlZj0iIyIsaC50ZXh0Q29udGVudD1lLmxvY2FsTmFtZSxoLmlkeD1nLGgub25jbGljaz1mdW5jdGlvbihhKXtmb3IodmFyIGI7ZC5sZW5ndGg+dGhpcy5pZHg7KWI9ZC5wb3AoKTtmKGIuc2hhZG93fHxiLGIpLGEucHJldmVudERlZmF1bHQoKX0sYy5hcHBlbmRDaGlsZChhLmNyZWF0ZUVsZW1lbnQoImxpIikpLmFwcGVuZENoaWxkKGgpfX0sZj1mdW5jdGlvbihhLGMpe3ZhciBmPWIuZG9jdW1lbnQ7az1bXTt2YXIgZz1jfHxhO2QucHVzaChnKSxlKCksZi5ib2R5LnF1ZXJ5U2VsZWN0b3IoIiN0cmVlIikuaW5uZXJIVE1MPSI8cHJlPiIraihhLGEuY2hpbGROb2RlcykrIjwvcHJlPiJ9LGc9QXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbC5iaW5kKEFycmF5LnByb3RvdHlwZS5mb3JFYWNoKSxoPXtTVFlMRToxLFNDUklQVDoxLCIjY29tbWVudCI6MSxURU1QTEFURToxfSxpPWZ1bmN0aW9uKGEpe3JldHVybiBoW2Eubm9kZU5hbWVdfSxqPWZ1bmN0aW9uKGEsYixjKXtpZihpKGEpKXJldHVybiIiO3ZhciBkPWN8fCIiO2lmKGEubG9jYWxOYW1lfHwxMT09YS5ub2RlVHlwZSl7dmFyIGU9YS5sb2NhbE5hbWV8fCJzaGFkb3ctcm9vdCIsZj1kK2woYSk7ImNvbnRlbnQiPT1lJiYoYj1hLmdldERpc3RyaWJ1dGVkTm9kZXMoKSksZis9Ijxici8+Ijt2YXIgaD1kKyImbmJzcDsmbmJzcDsiO2coYixmdW5jdGlvbihhKXtmKz1qKGEsYS5jaGlsZE5vZGVzLGgpfSksZis9ZCx7YnI6MX1bZV18fChmKz0iPHRhZz4mbHQ7LyIrZSsiJmd0OzwvdGFnPiIsZis9Ijxici8+Iil9ZWxzZXt2YXIgaz1hLnRleHRDb250ZW50LnRyaW0oKTtmPWs/ZCsnIicraysnIjxici8+JzoiIn1yZXR1cm4gZn0saz1bXSxsPWZ1bmN0aW9uKGEpe3ZhciBiPSI8dGFnPiZsdDsiLGM9YS5sb2NhbE5hbWV8fCJzaGFkb3ctcm9vdCI7cmV0dXJuIGEud2Via2l0U2hhZG93Um9vdHx8YS5zaGFkb3dSb290PyhiKz0nIDxidXR0b24gaWR4PSInK2subGVuZ3RoKyciIG9uY2xpY2s9ImFwaS5zaGFkb3dpemUuY2FsbCh0aGlzKSI+JytjKyI8L2J1dHRvbj4iLGsucHVzaChhKSk6Yis9Y3x8InNoYWRvdy1yb290IixhLmF0dHJpYnV0ZXMmJmcoYS5hdHRyaWJ1dGVzLGZ1bmN0aW9uKGEpe2IrPSIgIithLm5hbWUrKGEudmFsdWU/Jz0iJythLnZhbHVlKyciJzoiIil9KSxiKz0iJmd0OzwvdGFnPiJ9O3NoYWRvd2l6ZT1mdW5jdGlvbigpe3ZhciBhPU51bWJlcih0aGlzLmF0dHJpYnV0ZXMuaWR4LnZhbHVlKSxiPWtbYV07Yj9mKGIud2Via2l0U2hhZG93Um9vdHx8Yi5zaGFkb3dSb290LGIpOihjb25zb2xlLmxvZygiYmFkIHNoYWRvd2l6ZSBub2RlIiksY29uc29sZS5kaXIodGhpcykpfSxhLm91dHB1dD1qfSh3aW5kb3cuSW5zcGVjdG9yKSxmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBhKGEpe2Zvcig7YS5wYXJlbnROb2RlOylhPWEucGFyZW50Tm9kZTtyZXR1cm4iZnVuY3Rpb24iPT10eXBlb2YgYS5nZXRFbGVtZW50QnlJZD9hOm51bGx9ZnVuY3Rpb24gYihhLGIsYyxkKXt0aGlzLmNsb3NlZD0hMSx0aGlzLm5vZGU9YSx0aGlzLnByb3BlcnR5PWIsdGhpcy5tb2RlbD1jLHRoaXMucGF0aD1QYXRoLmdldChkKSwodGhpcy5tb2RlbCBpbnN0YW5jZW9mIFBhdGhPYnNlcnZlcnx8dGhpcy5tb2RlbCBpbnN0YW5jZW9mIENvbXBvdW5kUGF0aE9ic2VydmVyKSYmdGhpcy5wYXRoPT09bD8odGhpcy5vYnNlcnZlcj10aGlzLm1vZGVsLHRoaXMub2JzZXJ2ZXIudGFyZ2V0PXRoaXMsdGhpcy5vYnNlcnZlci5jYWxsYmFjaz10aGlzLnZhbHVlQ2hhbmdlZCk6dGhpcy5vYnNlcnZlcj1uZXcgUGF0aE9ic2VydmVyKHRoaXMubW9kZWwsdGhpcy5wYXRoLHRoaXMudmFsdWVDaGFuZ2VkLHRoaXMpLHRoaXMudmFsdWVDaGFuZ2VkKHRoaXMudmFsdWUpfWZ1bmN0aW9uIGMoYSxjLGQsZSl7dGhpcy5jb25kaXRpb25hbD0iPyI9PWNbYy5sZW5ndGgtMV0sdGhpcy5jb25kaXRpb25hbCYmKGEucmVtb3ZlQXR0cmlidXRlKGMpLGM9Yy5zbGljZSgwLC0xKSksYi5jYWxsKHRoaXMsYSxjLGQsZSl9ZnVuY3Rpb24gZChhKXtzd2l0Y2goYS50eXBlKXtjYXNlImNoZWNrYm94IjpyZXR1cm4gbTtjYXNlInJhZGlvIjpjYXNlInNlbGVjdC1tdWx0aXBsZSI6Y2FzZSJzZWxlY3Qtb25lIjpyZXR1cm4iY2hhbmdlIjtkZWZhdWx0OnJldHVybiJpbnB1dCJ9fWZ1bmN0aW9uIGUoYSxjLGUsZil7Yi5jYWxsKHRoaXMsYSxjLGUsZiksdGhpcy5ldmVudFR5cGU9ZCh0aGlzLm5vZGUpLHRoaXMuYm91bmROb2RlVmFsdWVDaGFuZ2VkPXRoaXMubm9kZVZhbHVlQ2hhbmdlZC5iaW5kKHRoaXMpLHRoaXMubm9kZS5hZGRFdmVudExpc3RlbmVyKHRoaXMuZXZlbnRUeXBlLHRoaXMuYm91bmROb2RlVmFsdWVDaGFuZ2VkLCEwKX1mdW5jdGlvbiBmKGIpe2lmKGIuZm9ybSlyZXR1cm4gaihiLmZvcm0uZWxlbWVudHMsZnVuY3Rpb24oYSl7cmV0dXJuIGEhPWImJiJJTlBVVCI9PWEudGFnTmFtZSYmInJhZGlvIj09YS50eXBlJiZhLm5hbWU9PWIubmFtZX0pO3ZhciBjPWEoYik7aWYoIWMpcmV0dXJuW107dmFyIGQ9Yy5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dFt0eXBlPSJyYWRpbyJdW25hbWU9IicrYi5uYW1lKyciXScpO3JldHVybiBqKGQsZnVuY3Rpb24oYSl7cmV0dXJuIGEhPWImJiFhLmZvcm19KX1mdW5jdGlvbiBnKGEsYixjKXtlLmNhbGwodGhpcyxhLCJjaGVja2VkIixiLGMpfWZ1bmN0aW9uIGgoYSxiLGMpe2UuY2FsbCh0aGlzLGEsInZhbHVlIixiLGMpfWZ1bmN0aW9uIGkoYSxiLGMsZCl7ZS5jYWxsKHRoaXMsYSxiLGMsZCl9dmFyIGo9QXJyYXkucHJvdG90eXBlLmZpbHRlci5jYWxsLmJpbmQoQXJyYXkucHJvdG90eXBlLmZpbHRlciksaz0iX19wcm90b19fImlue30/ZnVuY3Rpb24oYSl7cmV0dXJuIGF9OmZ1bmN0aW9uKGEpe3ZhciBiPWEuX19wcm90b19fO2lmKCFiKXJldHVybiBhO3ZhciBjPU9iamVjdC5jcmVhdGUoYik7cmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGEpLmZvckVhY2goZnVuY3Rpb24oYil7T2JqZWN0LmRlZmluZVByb3BlcnR5KGMsYixPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGEsYikpfSksY307ImZ1bmN0aW9uIiE9dHlwZW9mIGRvY3VtZW50LmNvbnRhaW5zJiYoRG9jdW1lbnQucHJvdG90eXBlLmNvbnRhaW5zPWZ1bmN0aW9uKGEpe3JldHVybiBhPT09dGhpc3x8YS5wYXJlbnROb2RlPT09dGhpcz8hMDp0aGlzLmRvY3VtZW50RWxlbWVudC5jb250YWlucyhhKX0pLE5vZGUucHJvdG90eXBlLmJpbmQ9ZnVuY3Rpb24oYSxiLGMpe2NvbnNvbGUuZXJyb3IoIlVuaGFuZGxlZCBiaW5kaW5nIHRvIE5vZGU6ICIsdGhpcyxhLGIsYyl9LE5vZGUucHJvdG90eXBlLnVuYmluZD1mdW5jdGlvbihhKXt0aGlzLmJpbmRpbmdzfHwodGhpcy5iaW5kaW5ncz17fSk7dmFyIGI9dGhpcy5iaW5kaW5nc1thXTtiJiYoImZ1bmN0aW9uIj09dHlwZW9mIGIuY2xvc2UmJmIuY2xvc2UoKSx0aGlzLmJpbmRpbmdzW2FdPXZvaWQgMCl9LE5vZGUucHJvdG90eXBlLnVuYmluZEFsbD1mdW5jdGlvbigpe2lmKHRoaXMuYmluZGluZ3Mpe2Zvcih2YXIgYT1PYmplY3Qua2V5cyh0aGlzLmJpbmRpbmdzKSxiPTA7YjxhLmxlbmd0aDtiKyspe3ZhciBjPXRoaXMuYmluZGluZ3NbYVtiXV07YyYmYy5jbG9zZSgpfXRoaXMuYmluZGluZ3M9e319fTt2YXIgbD1QYXRoLmdldCgidmFsdWUiKTtiLnByb3RvdHlwZT17dmFsdWVDaGFuZ2VkOmZ1bmN0aW9uKGEpe3RoaXMubm9kZVt0aGlzLnByb3BlcnR5XT10aGlzLnNhbml0aXplQm91bmRWYWx1ZShhKX0sc2FuaXRpemVCb3VuZFZhbHVlOmZ1bmN0aW9uKGEpe3JldHVybiB2b2lkIDA9PWE/IiI6U3RyaW5nKGEpfSxjbG9zZTpmdW5jdGlvbigpe3RoaXMuY2xvc2VkfHwodGhpcy5vYnNlcnZlci5jbG9zZSgpLHRoaXMub2JzZXJ2ZXI9dm9pZCAwLHRoaXMubm9kZT12b2lkIDAsdGhpcy5tb2RlbD12b2lkIDAsdGhpcy5jbG9zZWQ9ITApfSxnZXQgdmFsdWUoKXtyZXR1cm4gdGhpcy5vYnNlcnZlci52YWx1ZX0sc2V0IHZhbHVlKGEpe3RoaXMub2JzZXJ2ZXIuc2V0VmFsdWUoYSl9LHJlc2V0OmZ1bmN0aW9uKCl7dGhpcy5vYnNlcnZlci5yZXNldCgpfX0sVGV4dC5wcm90b3R5cGUuYmluZD1mdW5jdGlvbihhLGMsZCl7cmV0dXJuInRleHRDb250ZW50IiE9PWE/Tm9kZS5wcm90b3R5cGUuYmluZC5jYWxsKHRoaXMsYSxjLGQpOih0aGlzLnVuYmluZChhKSx0aGlzLmJpbmRpbmdzW2FdPW5ldyBiKHRoaXMsImRhdGEiLGMsZCkpfSxjLnByb3RvdHlwZT1rKHtfX3Byb3RvX186Yi5wcm90b3R5cGUsdmFsdWVDaGFuZ2VkOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNvbmRpdGlvbmFsPyhhP3RoaXMubm9kZS5zZXRBdHRyaWJ1dGUodGhpcy5wcm9wZXJ0eSwiIik6dGhpcy5ub2RlLnJlbW92ZUF0dHJpYnV0ZSh0aGlzLnByb3BlcnR5KSx2b2lkIDApOih0aGlzLm5vZGUuc2V0QXR0cmlidXRlKHRoaXMucHJvcGVydHksdGhpcy5zYW5pdGl6ZUJvdW5kVmFsdWUoYSkpLHZvaWQgMCl9fSksRWxlbWVudC5wcm90b3R5cGUuYmluZD1mdW5jdGlvbihhLGIsZCl7cmV0dXJuIHRoaXMudW5iaW5kKGEpLHRoaXMuYmluZGluZ3NbYV09bmV3IGModGhpcyxhLGIsZCl9O3ZhciBtOyFmdW5jdGlvbigpe3ZhciBhPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpLGI9YS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbnB1dCIpKTtiLnNldEF0dHJpYnV0ZSgidHlwZSIsImNoZWNrYm94Iik7dmFyIGMsZD0wO2IuYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLGZ1bmN0aW9uKCl7ZCsrLGM9Y3x8ImNsaWNrIn0pLGIuYWRkRXZlbnRMaXN0ZW5lcigiY2hhbmdlIixmdW5jdGlvbigpe2QrKyxjPWN8fCJjaGFuZ2UifSk7dmFyIGU9ZG9jdW1lbnQuY3JlYXRlRXZlbnQoIk1vdXNlRXZlbnQiKTtlLmluaXRNb3VzZUV2ZW50KCJjbGljayIsITAsITAsd2luZG93LDAsMCwwLDAsMCwhMSwhMSwhMSwhMSwwLG51bGwpLGIuZGlzcGF0Y2hFdmVudChlKSxtPTE9PWQ/ImNoYW5nZSI6Y30oKSxlLnByb3RvdHlwZT1rKHtfX3Byb3RvX186Yi5wcm90b3R5cGUsbm9kZVZhbHVlQ2hhbmdlZDpmdW5jdGlvbigpe3RoaXMudmFsdWU9dGhpcy5ub2RlW3RoaXMucHJvcGVydHldLHRoaXMucmVzZXQoKSx0aGlzLnBvc3RVcGRhdGVCaW5kaW5nKCksUGxhdGZvcm0ucGVyZm9ybU1pY3JvdGFza0NoZWNrcG9pbnQoKX0scG9zdFVwZGF0ZUJpbmRpbmc6ZnVuY3Rpb24oKXt9LGNsb3NlOmZ1bmN0aW9uKCl7dGhpcy5jbG9zZWR8fCh0aGlzLm5vZGUucmVtb3ZlRXZlbnRMaXN0ZW5lcih0aGlzLmV2ZW50VHlwZSx0aGlzLmJvdW5kTm9kZVZhbHVlQ2hhbmdlZCwhMCksYi5wcm90b3R5cGUuY2xvc2UuY2FsbCh0aGlzKSl9fSksZy5wcm90b3R5cGU9ayh7X19wcm90b19fOmUucHJvdG90eXBlLHNhbml0aXplQm91bmRWYWx1ZTpmdW5jdGlvbihhKXtyZXR1cm4gQm9vbGVhbihhKX0scG9zdFVwZGF0ZUJpbmRpbmc6ZnVuY3Rpb24oKXsiSU5QVVQiPT09dGhpcy5ub2RlLnRhZ05hbWUmJiJyYWRpbyI9PT10aGlzLm5vZGUudHlwZSYmZih0aGlzLm5vZGUpLmZvckVhY2goZnVuY3Rpb24oYSl7dmFyIGI9YS5iaW5kaW5ncy5jaGVja2VkO2ImJihiLnZhbHVlPSExKX0pfX0pLEhUTUxJbnB1dEVsZW1lbnQucHJvdG90eXBlLmJpbmQ9ZnVuY3Rpb24oYSxiLGMpe3JldHVybiJ2YWx1ZSIhPT1hJiYiY2hlY2tlZCIhPT1hP0hUTUxFbGVtZW50LnByb3RvdHlwZS5iaW5kLmNhbGwodGhpcyxhLGIsYyk6KHRoaXMudW5iaW5kKGEpLHRoaXMucmVtb3ZlQXR0cmlidXRlKGEpLHRoaXMuYmluZGluZ3NbYV09InZhbHVlIj09PWE/bmV3IGUodGhpcywidmFsdWUiLGIsYyk6bmV3IGcodGhpcyxiLGMpKX0sSFRNTFRleHRBcmVhRWxlbWVudC5wcm90b3R5cGUuYmluZD1mdW5jdGlvbihhLGIsYyl7cmV0dXJuInZhbHVlIiE9PWE/SFRNTEVsZW1lbnQucHJvdG90eXBlLmJpbmQuY2FsbCh0aGlzLGEsYixjKToodGhpcy51bmJpbmQoYSksdGhpcy5yZW1vdmVBdHRyaWJ1dGUoYSksdGhpcy5iaW5kaW5nc1thXT1uZXcgZSh0aGlzLGEsYixjKSl9LGgucHJvdG90eXBlPWsoe19fcHJvdG9fXzplLnByb3RvdHlwZSx2YWx1ZUNoYW5nZWQ6ZnVuY3Rpb24oYSl7dmFyIGIsYyxkPXRoaXMubm9kZS5wYXJlbnROb2RlIGluc3RhbmNlb2YgSFRNTFNlbGVjdEVsZW1lbnQ/dGhpcy5ub2RlLnBhcmVudE5vZGU6dm9pZCAwO2QmJmQuYmluZGluZ3MmJmQuYmluZGluZ3MudmFsdWUgaW5zdGFuY2VvZiBpJiYoYj1kLmJpbmRpbmdzLnZhbHVlLGM9ZC52YWx1ZSksZS5wcm90b3R5cGUudmFsdWVDaGFuZ2VkLmNhbGwodGhpcyxhKSxiJiYhYi5jbG9zZWQmJmQudmFsdWUhPT1jJiZiLm5vZGVWYWx1ZUNoYW5nZWQoKX19KSxIVE1MT3B0aW9uRWxlbWVudC5wcm90b3R5cGUuYmluZD1mdW5jdGlvbihhLGIsYyl7cmV0dXJuInZhbHVlIiE9PWE/SFRNTEVsZW1lbnQucHJvdG90eXBlLmJpbmQuY2FsbCh0aGlzLGEsYixjKToodGhpcy51bmJpbmQoYSksdGhpcy5yZW1vdmVBdHRyaWJ1dGUoYSksdGhpcy5iaW5kaW5nc1thXT1uZXcgaCh0aGlzLGIsYykpfSxpLnByb3RvdHlwZT1rKHtfX3Byb3RvX186ZS5wcm90b3R5cGUsdmFsdWVDaGFuZ2VkOmZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoKXtkLm5vZGVbZC5wcm9wZXJ0eV09YSxkLm5vZGVbZC5wcm9wZXJ0eV0hPWEmJmMtLSYmbihiKX1pZih0aGlzLm5vZGVbdGhpcy5wcm9wZXJ0eV09YSx0aGlzLm5vZGVbdGhpcy5wcm9wZXJ0eV0hPWEpe3ZhciBjPTIsZD10aGlzO24oYil9fX0pLEhUTUxTZWxlY3RFbGVtZW50LnByb3RvdHlwZS5iaW5kPWZ1bmN0aW9uKGEsYixjKXtyZXR1cm4ic2VsZWN0ZWRpbmRleCI9PT1hJiYoYT0ic2VsZWN0ZWRJbmRleCIpLCJzZWxlY3RlZEluZGV4IiE9PWEmJiJ2YWx1ZSIhPT1hP0hUTUxFbGVtZW50LnByb3RvdHlwZS5iaW5kLmNhbGwodGhpcyxhLGIsYyk6KHRoaXMudW5iaW5kKGEpLHRoaXMucmVtb3ZlQXR0cmlidXRlKGEpLHRoaXMuYmluZGluZ3NbYV09bmV3IGkodGhpcyxhLGIsYykpfTt2YXIgbj1mdW5jdGlvbigpe2Z1bmN0aW9uIGEoYSl7dGhpcy5uZXh0UnVubmVyPWEsdGhpcy52YWx1ZT0hMSx0aGlzLmxhc3RWYWx1ZT10aGlzLnZhbHVlLHRoaXMuc2NoZWR1bGVkPVtdLHRoaXMuc2NoZWR1bGVkSWRzPVtdLHRoaXMucnVubmluZz0hMSx0aGlzLm9ic2VydmVyPW5ldyBQYXRoT2JzZXJ2ZXIodGhpcywidmFsdWUiLHRoaXMucnVuLHRoaXMpfWZ1bmN0aW9uIGIoYSl7dmFyIGI9YVtlXTthW2VdfHwoYj1kKyssYVtlXT1iKSxjLnNjaGVkdWxlKGEsYil9YS5wcm90b3R5cGU9e3NjaGVkdWxlOmZ1bmN0aW9uKGEsYil7aWYoIXRoaXMuc2NoZWR1bGVkSWRzW2JdKXtpZih0aGlzLnJ1bm5pbmcpcmV0dXJuIHRoaXMubmV4dFJ1bm5lci5zY2hlZHVsZShhLGIpO3RoaXMuc2NoZWR1bGVkSWRzW2JdPSEwLHRoaXMuc2NoZWR1bGVkLnB1c2goYSksdGhpcy5sYXN0VmFsdWU9PT10aGlzLnZhbHVlJiYodGhpcy52YWx1ZT0hdGhpcy52YWx1ZSl9fSxydW46ZnVuY3Rpb24oKXt0aGlzLnJ1bm5pbmc9ITA7Zm9yKHZhciBhPTA7YTx0aGlzLnNjaGVkdWxlZC5sZW5ndGg7YSsrKXt2YXIgYj10aGlzLnNjaGVkdWxlZFthXSxjPWJbZV07dGhpcy5zY2hlZHVsZWRJZHNbY109ITEsImZ1bmN0aW9uIj09dHlwZW9mIGI/YigpOmIucmVzb2x2ZSgpfXRoaXMuc2NoZWR1bGVkPVtdLHRoaXMuc2NoZWR1bGVkSWRzPVtdLHRoaXMubGFzdFZhbHVlPXRoaXMudmFsdWUsdGhpcy5ydW5uaW5nPSExfX07dmFyIGM9bmV3IGEobmV3IGEpLGQ9MSxlPSJfX3NjaGVkdWxlZElkX18iO3JldHVybiBifSgpfSh0aGlzKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtpZighYSl0aHJvdyBuZXcgRXJyb3IoIkFzc2VydGlvbiBmYWlsZWQiKX1mdW5jdGlvbiBjKGEpe2Zvcig7YS5wYXJlbnROb2RlOylhPWEucGFyZW50Tm9kZTtyZXR1cm4iZnVuY3Rpb24iPT10eXBlb2YgYS5nZXRFbGVtZW50QnlJZD9hOm51bGx9ZnVuY3Rpb24gZChhKXtyZXR1cm4gRlthLnRhZ05hbWVdJiZhLmhhc0F0dHJpYnV0ZSgidGVtcGxhdGUiKX1mdW5jdGlvbiBlKGEpe3JldHVybiJURU1QTEFURSI9PWEudGFnTmFtZXx8ZChhKX1mdW5jdGlvbiBmKGEpe3JldHVybiBHJiYiVEVNUExBVEUiPT1hLnRhZ05hbWV9ZnVuY3Rpb24gZyhhLGIpe3ZhciBjPWEucXVlcnlTZWxlY3RvckFsbChIKTtlKGEpJiZiKGEpLEEoYyxiKX1mdW5jdGlvbiBoKGEpe2Z1bmN0aW9uIGIoYSl7SFRNTFRlbXBsYXRlRWxlbWVudC5kZWNvcmF0ZShhKXx8aChhLmNvbnRlbnQpfWcoYSxiKX1mdW5jdGlvbiBpKGEsYil7T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoYikuZm9yRWFjaChmdW5jdGlvbihjKXtPYmplY3QuZGVmaW5lUHJvcGVydHkoYSxjLE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoYixjKSl9KX1mdW5jdGlvbiBqKGEpe2lmKCFhLmRlZmF1bHRWaWV3KXJldHVybiBhO3ZhciBiPWEudGVtcGxhdGVDb250ZW50c093bmVyXztpZighYil7Zm9yKGI9YS5pbXBsZW1lbnRhdGlvbi5jcmVhdGVIVE1MRG9jdW1lbnQoIiIpO2IubGFzdENoaWxkOyliLnJlbW92ZUNoaWxkKGIubGFzdENoaWxkKTthLnRlbXBsYXRlQ29udGVudHNPd25lcl89Yn1yZXR1cm4gYn1mdW5jdGlvbiBrKGEpe3ZhciBiPWEub3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0ZW1wbGF0ZSIpO2EucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoYixhKTtmb3IodmFyIGM9YS5hdHRyaWJ1dGVzLGQ9Yy5sZW5ndGg7ZC0tPjA7KXt2YXIgZT1jW2RdO0VbZS5uYW1lXSYmKCJ0ZW1wbGF0ZSIhPT1lLm5hbWUmJmIuc2V0QXR0cmlidXRlKGUubmFtZSxlLnZhbHVlKSxhLnJlbW92ZUF0dHJpYnV0ZShlLm5hbWUpKX1yZXR1cm4gYn1mdW5jdGlvbiBsKGEsYixjKXt2YXIgZD1hLmNvbnRlbnQ7aWYoYylyZXR1cm4gZC5hcHBlbmRDaGlsZChiKSx2b2lkIDA7Zm9yKHZhciBlO2U9Yi5maXJzdENoaWxkOylkLmFwcGVuZENoaWxkKGUpfWZ1bmN0aW9uIG0oYSl7IlRFTVBMQVRFIj09PWEudGFnTmFtZT9HfHwoSj9hLl9fcHJvdG9fXz1IVE1MVGVtcGxhdGVFbGVtZW50LnByb3RvdHlwZTppKGEsSFRNTFRlbXBsYXRlRWxlbWVudC5wcm90b3R5cGUpKTooaShhLEhUTUxUZW1wbGF0ZUVsZW1lbnQucHJvdG90eXBlKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoYSwiY29udGVudCIsTCkpfWZ1bmN0aW9uIG4oYSl7YS5zZXRNb2RlbEZuX3x8KGEuc2V0TW9kZWxGbl89ZnVuY3Rpb24oKXt0KGEsYS5tb2RlbCxhLmJpbmRpbmdEZWxlZ2F0ZSl9KSxJKGEuc2V0TW9kZWxGbl8pfWZ1bmN0aW9uIG8oYSxiLGMsZCl7aWYoYSYmYS5sZW5ndGgpe2Zvcih2YXIgZSxmPWEubGVuZ3RoLGc9MCxoPTAsaT0wO2Y+aDspe2lmKGc9YS5pbmRleE9mKCJ7eyIsaCksaT0wPmc/LTE6YS5pbmRleE9mKCJ9fSIsZysyKSwwPmkpe2lmKCFlKXJldHVybjtlLnB1c2goYS5zbGljZShoKSk7YnJlYWt9ZT1lfHxbXSxlLnB1c2goYS5zbGljZShoLGcpKTt2YXIgaj1hLnNsaWNlKGcrMixpKS50cmltKCk7ZS5wdXNoKFBhdGguZ2V0KGopKTt2YXIgaz1kJiZkKGosYixjKTtlLnB1c2goayksaD1pKzJ9cmV0dXJuIGg9PT1mJiZlLnB1c2goIiIpLGUuaGFzT25lUGF0aD00PT09ZS5sZW5ndGgsZS5pc1NpbXBsZVBhdGg9ZS5oYXNPbmVQYXRoJiYiIj09ZVswXSYmIiI9PWVbM10sZS5jb21iaW5hdG9yPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1lWzBdLGM9MTtjPGUubGVuZ3RoO2MrPTMpe3ZhciBkPWUuaGFzT25lUGF0aD9hOmFbKGMtMSkvM107dm9pZCAwIT09ZCYmKGIrPWQpLGIrPWVbYysyXX1yZXR1cm4gYn0sZX19ZnVuY3Rpb24gcChhLGIsYyxkKXtmb3IodmFyIGU9MDtlPGEubGVuZ3RoO2UrPTIpe3ZhciBmPWFbZV0sZz1hW2UrMV0saD1jLGk9Z1sxXTtpZihnLmhhc09uZVBhdGgpe3ZhciBqPWdbMl0saz1qJiZqKGMsZixiKTt2b2lkIDAhPT1rJiYoaD1rLGk9TSksZy5pc1NpbXBsZVBhdGh8fChoPW5ldyBQYXRoT2JzZXJ2ZXIoaCxpLHZvaWQgMCx2b2lkIDAsdm9pZCAwLGcuY29tYmluYXRvciksaT1NKX1lbHNle2Zvcih2YXIgbD1uZXcgQ29tcG91bmRQYXRoT2JzZXJ2ZXIodm9pZCAwLHZvaWQgMCx2b2lkIDAsZy5jb21iaW5hdG9yKSxtPTE7bTxnLmxlbmd0aDttKz0zKXt2YXIgbj1jLG89Z1ttXSxqPWdbbSsxXSxrPWomJmoobixmLGIpO3ZvaWQgMCE9PWsmJihuPWssbz1NKSxsLmFkZFBhdGgobixvKX1sLnN0YXJ0KCksaD1sLGk9TX12YXIgcD1iLmJpbmQoZixoLGkpO2QmJmQucHVzaChwKX19ZnVuY3Rpb24gcShhLGMpe2IoYSk7Zm9yKHZhciBkLGY9ZShhKSxnPSExLGg9ITEsaT0wO2k8YS5hdHRyaWJ1dGVzLmxlbmd0aDtpKyspe2Zvcih2YXIgaj1hLmF0dHJpYnV0ZXNbaV0saz1qLm5hbWUsbD1qLnZhbHVlOyJfIj09PWtbMF07KWs9ay5zdWJzdHJpbmcoMSk7ZiYmKGs9PT1EPyhnPSEwLGw9bHx8Int7fX0iKTooaz09PUJ8fGs9PT1DKSYmKGg9ITAsbD1sfHwie3t9fSIpKTt2YXIgbT1vKGwsayxhLGMpO20mJihkPWR8fFtdLGQucHVzaChrLG0pKX1yZXR1cm4gZyYmIWgmJihkPWR8fFtdLGQucHVzaChCLG8oInt7fX0iLEIsYSxjKSkpLGR9ZnVuY3Rpb24gcihhLGIpe2lmKGEubm9kZVR5cGU9PT1Ob2RlLkVMRU1FTlRfTk9ERSlyZXR1cm4gcShhLGIpO2lmKGEubm9kZVR5cGU9PT1Ob2RlLlRFWFRfTk9ERSl7dmFyIGM9byhhLmRhdGEsInRleHRDb250ZW50IixhLGIpO2lmKGMpcmV0dXJuWyJ0ZXh0Q29udGVudCIsY119fWZ1bmN0aW9uIHMoYSxiLGMsZCxlKXtpZihiJiYoYi50ZW1wbGF0ZVJlZiYmKEhUTUxUZW1wbGF0ZUVsZW1lbnQuZGVjb3JhdGUoYSxiLnRlbXBsYXRlUmVmKSxkJiYoYS5iaW5kaW5nRGVsZWdhdGVfPWQpKSxiLmxlbmd0aCYmcChiLGEsYyxlKSxiLmNoaWxkcmVuKSlmb3IodmFyIGY9MCxnPWEuZmlyc3RDaGlsZDtnO2c9Zy5uZXh0U2libGluZylzKGcsYi5jaGlsZHJlbltmKytdLGMsZCxlKX1mdW5jdGlvbiB0KGEsYyxkKXtiKGEpO3ZhciBlPWQmJiJmdW5jdGlvbiI9PXR5cGVvZiBkLnByZXBhcmVCaW5kaW5nP2QucHJlcGFyZUJpbmRpbmc6dm9pZCAwLGY9cihhLGUpO2YmJnAoZixhLGMpO2Zvcih2YXIgZz1hLmZpcnN0Q2hpbGQ7ZztnPWcubmV4dFNpYmxpbmcpdChnLGMsZCl9ZnVuY3Rpb24gdShhLGIpe3ZhciBjPWEuY2xvbmVOb2RlKCExKTtpZihhLmlzVGVtcGxhdGVfKXJldHVybiBjO2Zvcih2YXIgZD1hLmZpcnN0Q2hpbGQ7ZDtkPWQubmV4dFNpYmxpbmcpYy5hcHBlbmRDaGlsZCh1KGQsYikpO3JldHVybiBjfWZ1bmN0aW9uIHYoYSxiKXt2YXIgYz1yKGEsYik7ZShhKSYmKGEuaXNUZW1wbGF0ZV89ITAsYz1jfHxbXSxjLnRlbXBsYXRlUmVmPWEsYy5oYXNTdWJUZW1wbGF0ZT0hMCk7Zm9yKHZhciBkPWEuZmlyc3RDaGlsZCxmPTA7ZDtkPWQubmV4dFNpYmxpbmcsZisrKXt2YXIgZz12KGQsYik7ZyYmKGM9Y3x8W10sYy5jaGlsZHJlbj1jLmNoaWxkcmVufHx7fSxjLmNoaWxkcmVuW2ZdPWcsZy5oYXNTdWJUZW1wbGF0ZSYmKGMuaGFzU3ViVGVtcGxhdGU9ITApKX1yZXR1cm4gY31mdW5jdGlvbiB3KGEsYixjKXt0aGlzLmZpcnN0Tm9kZT1hLHRoaXMubGFzdE5vZGU9Yix0aGlzLm1vZGVsPWN9ZnVuY3Rpb24geChhLGIpe2lmKGEuZmlyc3RDaGlsZClmb3IodmFyIGM9bmV3IHcoYS5maXJzdENoaWxkLGEubGFzdENoaWxkLGIpLGQ9Yy5maXJzdE5vZGU7ZDspZC50ZW1wbGF0ZUluc3RhbmNlXz1jLGQ9ZC5uZXh0U2libGluZ31mdW5jdGlvbiB5KGEpe3RoaXMuY2xvc2VkPSExLHRoaXMudGVtcGxhdGVFbGVtZW50Xz1hLHRoaXMudGVybWluYXRvcnM9W10sdGhpcy5pdGVyYXRlZFZhbHVlPXZvaWQgMCx0aGlzLmFycmF5T2JzZXJ2ZXI9dm9pZCAwLHRoaXMuZGVwc0NoYW5nZWQ9ITEsdGhpcy5oYXNSZXBlYXQ9ITEsdGhpcy5yZXBlYXRNb2RlbD12b2lkIDAsdGhpcy5yZXBlYXRQYXRoPXZvaWQgMCx0aGlzLmhhc0JpbmQ9ITEsdGhpcy5iaW5kTW9kZWw9dm9pZCAwLHRoaXMuYmluZFBhdGg9dm9pZCAwLHRoaXMuaGFzSWY9ITEsdGhpcy5pZk1vZGVsPXZvaWQgMCx0aGlzLmlmUGF0aD12b2lkIDB9dmFyIHosQT1BcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsLmJpbmQoQXJyYXkucHJvdG90eXBlLmZvckVhY2gpO2EuTWFwJiYiZnVuY3Rpb24iPT10eXBlb2YgYS5NYXAucHJvdG90eXBlLmZvckVhY2g/ej1hLk1hcDooej1mdW5jdGlvbigpe3RoaXMua2V5cz1bXSx0aGlzLnZhbHVlcz1bXX0sei5wcm90b3R5cGU9e3NldDpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMua2V5cy5pbmRleE9mKGEpOzA+Yz8odGhpcy5rZXlzLnB1c2goYSksdGhpcy52YWx1ZXMucHVzaChiKSk6dGhpcy52YWx1ZXNbY109Yn0sZ2V0OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMua2V5cy5pbmRleE9mKGEpO2lmKCEoMD5iKSlyZXR1cm4gdGhpcy52YWx1ZXNbYl19LCJkZWxldGUiOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMua2V5cy5pbmRleE9mKGEpO3JldHVybiAwPmI/ITE6KHRoaXMua2V5cy5zcGxpY2UoYiwxKSx0aGlzLnZhbHVlcy5zcGxpY2UoYiwxKSwhMCl9LGZvckVhY2g6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9MDtjPHRoaXMua2V5cy5sZW5ndGg7YysrKWEuY2FsbChifHx0aGlzLHRoaXMudmFsdWVzW2NdLHRoaXMua2V5c1tjXSx0aGlzKX19KSwiZnVuY3Rpb24iIT10eXBlb2YgZG9jdW1lbnQuY29udGFpbnMmJihEb2N1bWVudC5wcm90b3R5cGUuY29udGFpbnM9ZnVuY3Rpb24oYSl7cmV0dXJuIGE9PT10aGlzfHxhLnBhcmVudE5vZGU9PT10aGlzPyEwOnRoaXMuZG9jdW1lbnRFbGVtZW50LmNvbnRhaW5zKGEpfSk7dmFyIEI9ImJpbmQiLEM9InJlcGVhdCIsRD0iaWYiLEU9e3RlbXBsYXRlOiEwLHJlcGVhdDohMCxiaW5kOiEwLHJlZjohMH0sRj17VEhFQUQ6ITAsVEJPRFk6ITAsVEZPT1Q6ITAsVEg6ITAsVFI6ITAsVEQ6ITAsQ09MR1JPVVA6ITAsQ09MOiEwLENBUFRJT046ITAsT1BUSU9OOiEwLE9QVEdST1VQOiEwfSxHPSJ1bmRlZmluZWQiIT10eXBlb2YgSFRNTFRlbXBsYXRlRWxlbWVudCxIPSJ0ZW1wbGF0ZSwgIitPYmplY3Qua2V5cyhGKS5tYXAoZnVuY3Rpb24oYSl7cmV0dXJuIGEudG9Mb3dlckNhc2UoKSsiW3RlbXBsYXRlXSJ9KS5qb2luKCIsICIpLEk9ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGEpe3RoaXMubmV4dFJ1bm5lcj1hLHRoaXMudmFsdWU9ITEsdGhpcy5sYXN0VmFsdWU9dGhpcy52YWx1ZSx0aGlzLnNjaGVkdWxlZD1bXSx0aGlzLnNjaGVkdWxlZElkcz1bXSx0aGlzLnJ1bm5pbmc9ITEsdGhpcy5vYnNlcnZlcj1uZXcgUGF0aE9ic2VydmVyKHRoaXMsInZhbHVlIix0aGlzLnJ1bix0aGlzKX1mdW5jdGlvbiBiKGEpe3ZhciBiPWFbZV07YVtlXXx8KGI9ZCsrLGFbZV09YiksYy5zY2hlZHVsZShhLGIpfWEucHJvdG90eXBlPXtzY2hlZHVsZTpmdW5jdGlvbihhLGIpe2lmKCF0aGlzLnNjaGVkdWxlZElkc1tiXSl7aWYodGhpcy5ydW5uaW5nKXJldHVybiB0aGlzLm5leHRSdW5uZXIuc2NoZWR1bGUoYSxiKTt0aGlzLnNjaGVkdWxlZElkc1tiXT0hMCx0aGlzLnNjaGVkdWxlZC5wdXNoKGEpLHRoaXMubGFzdFZhbHVlPT09dGhpcy52YWx1ZSYmKHRoaXMudmFsdWU9IXRoaXMudmFsdWUpfX0scnVuOmZ1bmN0aW9uKCl7dGhpcy5ydW5uaW5nPSEwO2Zvcih2YXIgYT0wO2E8dGhpcy5zY2hlZHVsZWQubGVuZ3RoO2ErKyl7dmFyIGI9dGhpcy5zY2hlZHVsZWRbYV0sYz1iW2VdO3RoaXMuc2NoZWR1bGVkSWRzW2NdPSExLCJmdW5jdGlvbiI9PXR5cGVvZiBiP2IoKTpiLnJlc29sdmUoKX10aGlzLnNjaGVkdWxlZD1bXSx0aGlzLnNjaGVkdWxlZElkcz1bXSx0aGlzLmxhc3RWYWx1ZT10aGlzLnZhbHVlLHRoaXMucnVubmluZz0hMX19O3ZhciBjPW5ldyBhKG5ldyBhKSxkPTEsZT0iX19zY2hlZHVsZWRJZF9fIjtyZXR1cm4gYn0oKTtkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJET01Db250ZW50TG9hZGVkIixmdW5jdGlvbigpe2goZG9jdW1lbnQpLFBsYXRmb3JtLnBlcmZvcm1NaWNyb3Rhc2tDaGVja3BvaW50KCl9LCExKSxHfHwoYS5IVE1MVGVtcGxhdGVFbGVtZW50PWZ1bmN0aW9uKCl7dGhyb3cgVHlwZUVycm9yKCJJbGxlZ2FsIGNvbnN0cnVjdG9yIil9KTt2YXIgSj0iX19wcm90b19fImlue307SFRNTFRlbXBsYXRlRWxlbWVudC5kZWNvcmF0ZT1mdW5jdGlvbihhLGMpe2lmKGEudGVtcGxhdGVJc0RlY29yYXRlZF8pcmV0dXJuITE7dmFyIGU9YTtlLnRlbXBsYXRlSXNEZWNvcmF0ZWRfPSEwO3ZhciBnPWYoZSksaT1nLG49IWcsbz0hMTtpZighZyYmZChlKSYmKGIoIWMpLGU9ayhhKSxlLnRlbXBsYXRlSXNEZWNvcmF0ZWRfPSEwLGc9ZihlKSxvPSEwKSwhZyl7bShlKTt2YXIgcD1qKGUub3duZXJEb2N1bWVudCk7ZS5jb250ZW50Xz1wLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKX1yZXR1cm4gYz9lLmluc3RhbmNlUmVmXz1jOm4/bChlLGEsbyk6aSYmaChlLmNvbnRlbnQpLCEwfSxIVE1MVGVtcGxhdGVFbGVtZW50LmJvb3RzdHJhcD1oO3ZhciBLPWEuSFRNTFVua25vd25FbGVtZW50fHxIVE1MRWxlbWVudCxMPXtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZW50X30sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9O0d8fChIVE1MVGVtcGxhdGVFbGVtZW50LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKEsucHJvdG90eXBlKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoSFRNTFRlbXBsYXRlRWxlbWVudC5wcm90b3R5cGUsImNvbnRlbnQiLEwpKSxpKEhUTUxUZW1wbGF0ZUVsZW1lbnQucHJvdG90eXBlLHtiaW5kOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gdGhpcy5pdGVyYXRvcl98fCh0aGlzLml0ZXJhdG9yXz1uZXcgeSh0aGlzKSksdGhpcy5iaW5kaW5ncz10aGlzLmJpbmRpbmdzfHx7fSwiYmluZCI9PT1hPyh0aGlzLml0ZXJhdG9yXy5oYXNCaW5kPSEwLHRoaXMuaXRlcmF0b3JfLmJpbmRNb2RlbD1iLHRoaXMuaXRlcmF0b3JfLmJpbmRQYXRoPWMsdGhpcy5pdGVyYXRvcl8uZGVwc0NoYW5naW5nfHwodGhpcy5pdGVyYXRvcl8uZGVwc0NoYW5naW5nPSEwLEkodGhpcy5pdGVyYXRvcl8pKSx0aGlzLmJpbmRpbmdzLmJpbmQ9dGhpcy5pdGVyYXRvcl8pOiJyZXBlYXQiPT09YT8odGhpcy5pdGVyYXRvcl8uaGFzUmVwZWF0PSEwLHRoaXMuaXRlcmF0b3JfLnJlcGVhdE1vZGVsPWIsdGhpcy5pdGVyYXRvcl8ucmVwZWF0UGF0aD1jLHRoaXMuaXRlcmF0b3JfLmRlcHNDaGFuZ2luZ3x8KHRoaXMuaXRlcmF0b3JfLmRlcHNDaGFuZ2luZz0hMCxJKHRoaXMuaXRlcmF0b3JfKSksdGhpcy5iaW5kaW5ncy5yZXBlYXQ9dGhpcy5pdGVyYXRvcl8pOiJpZiI9PT1hPyh0aGlzLml0ZXJhdG9yXy5oYXNJZj0hMCx0aGlzLml0ZXJhdG9yXy5pZk1vZGVsPWIsdGhpcy5pdGVyYXRvcl8uaWZQYXRoPWMsdGhpcy5pdGVyYXRvcl8uZGVwc0NoYW5naW5nfHwodGhpcy5pdGVyYXRvcl8uZGVwc0NoYW5naW5nPSEwLEkodGhpcy5pdGVyYXRvcl8pKSx0aGlzLmJpbmRpbmdzLmlmPXRoaXMuaXRlcmF0b3JfKTpIVE1MRWxlbWVudC5wcm90b3R5cGUuYmluZC5jYWxsKHRoaXMsYSxiLGMpfSx1bmJpbmQ6ZnVuY3Rpb24oYSl7aWYoImJpbmQiPT09YSl7aWYoIXRoaXMuaXRlcmF0b3JfKXJldHVybjtyZXR1cm4gdGhpcy5pdGVyYXRvcl8uaGFzQmluZD0hMSx0aGlzLml0ZXJhdG9yXy5iaW5kTW9kZWw9dm9pZCAwLHRoaXMuaXRlcmF0b3JfLmJpbmRQYXRoPXZvaWQgMCx0aGlzLml0ZXJhdG9yXy5kZXBzQ2hhbmdpbmd8fCh0aGlzLml0ZXJhdG9yXy5kZXBzQ2hhbmdpbmc9ITAsSSh0aGlzLml0ZXJhdG9yXykpLHRoaXMuYmluZGluZ3MuYmluZD12b2lkIDB9aWYoInJlcGVhdCI9PT1hKXtpZighdGhpcy5pdGVyYXRvcl8pcmV0dXJuO3JldHVybiB0aGlzLml0ZXJhdG9yXy5oYXNSZXBlYXQ9ITEsdGhpcy5pdGVyYXRvcl8ucmVwZWF0TW9kZWw9dm9pZCAwLHRoaXMuaXRlcmF0b3JfLnJlcGVhdFBhdGg9dm9pZCAwLHRoaXMuaXRlcmF0b3JfLmRlcHNDaGFuZ2luZ3x8KHRoaXMuaXRlcmF0b3JfLmRlcHNDaGFuZ2luZz0hMCxJKHRoaXMuaXRlcmF0b3JfKSksdGhpcy5iaW5kaW5ncy5yZXBlYXQ9dm9pZCAwfWlmKCJpZiI9PT1hKXtpZighdGhpcy5pdGVyYXRvcl8pcmV0dXJuO3JldHVybiB0aGlzLml0ZXJhdG9yXy5oYXNJZj0hMSx0aGlzLml0ZXJhdG9yXy5pZk1vZGVsPXZvaWQgMCx0aGlzLml0ZXJhdG9yXy5pZlBhdGg9dm9pZCAwLHRoaXMuaXRlcmF0b3JfLmRlcHNDaGFuZ2luZ3x8KHRoaXMuaXRlcmF0b3JfLmRlcHNDaGFuZ2luZz0hMCxJKHRoaXMuaXRlcmF0b3JfKSksdGhpcy5iaW5kaW5ncy5pZj12b2lkIDB9cmV0dXJuIEhUTUxFbGVtZW50LnByb3RvdHlwZS51bmJpbmQuY2FsbCh0aGlzLGEpfSxjcmVhdGVJbnN0YW5jZTpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9dGhpcy5yZWYuY29udGVudCxlPWQuYmluZGluZ01hcF87aWYoIWUpe3ZhciBmPWImJiJmdW5jdGlvbiI9PXR5cGVvZiBiLnByZXBhcmVCaW5kaW5nP2IucHJlcGFyZUJpbmRpbmc6dm9pZCAwO2U9dihkLGYpfHxbXSxkLmJpbmRpbmdNYXBfPWV9dmFyIGc9ZS5oYXNTdWJUZW1wbGF0ZT91KGQpOmQuY2xvbmVOb2RlKCEwKTtyZXR1cm4gcyhnLGUsYSxiLGMpLHgoZyxhKSxnfSxnZXQgbW9kZWwoKXtyZXR1cm4gdGhpcy5tb2RlbF99LHNldCBtb2RlbChhKXt0aGlzLm1vZGVsXz1hLG4odGhpcyl9LGdldCBiaW5kaW5nRGVsZWdhdGUoKXtyZXR1cm4gdGhpcy5iaW5kaW5nRGVsZWdhdGVffSxzZXQgYmluZGluZ0RlbGVnYXRlKGEpe3RoaXMuYmluZGluZ0RlbGVnYXRlXz1hLG4odGhpcyl9LGdldCByZWYoKXt2YXIgYSxiPXRoaXMuZ2V0QXR0cmlidXRlKCJyZWYiKTtpZihiKXt2YXIgZD1jKHRoaXMpO2QmJihhPWQuZ2V0RWxlbWVudEJ5SWQoYikpfWlmKGF8fChhPXRoaXMuaW5zdGFuY2VSZWZfKSwhYSlyZXR1cm4gdGhpczt2YXIgZT1hLnJlZjtyZXR1cm4gZT9lOmF9fSk7dmFyIE09UGF0aC5nZXQoInZhbHVlIik7T2JqZWN0LmRlZmluZVByb3BlcnR5KE5vZGUucHJvdG90eXBlLCJ0ZW1wbGF0ZUluc3RhbmNlIix7Z2V0OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy50ZW1wbGF0ZUluc3RhbmNlXztyZXR1cm4gYT9hOnRoaXMucGFyZW50Tm9kZT90aGlzLnBhcmVudE5vZGUudGVtcGxhdGVJbnN0YW5jZTp2b2lkIDB9fSkseS5wcm90b3R5cGU9e3Jlc29sdmU6ZnVuY3Rpb24oKXtpZih0aGlzLmRlcHNDaGFuZ2luZz0hMSx0aGlzLnZhbHVlT2JzZXJ2ZXImJih0aGlzLnZhbHVlT2JzZXJ2ZXIuY2xvc2UoKSx0aGlzLnZhbHVlT2JzZXJ2ZXI9dm9pZCAwKSwhdGhpcy5oYXNSZXBlYXQmJiF0aGlzLmhhc0JpbmQpcmV0dXJuIHRoaXMudmFsdWVDaGFuZ2VkKCksdm9pZCAwO3ZhciBhPXRoaXMuaGFzUmVwZWF0PT09ITAsYj1hP3RoaXMucmVwZWF0TW9kZWw6dGhpcy5iaW5kTW9kZWwsYz1hP3RoaXMucmVwZWF0UGF0aDp0aGlzLmJpbmRQYXRoO2lmKHRoaXMuaGFzSWYpe3ZhciBkPWZ1bmN0aW9uKGIpe3ZhciBjPWJbMF0sZD1iWzFdO3JldHVybiBkP2E/YzpbY106dm9pZCAwfTt0aGlzLnZhbHVlT2JzZXJ2ZXI9bmV3IENvbXBvdW5kUGF0aE9ic2VydmVyKHRoaXMudmFsdWVDaGFuZ2VkLHRoaXMsdm9pZCAwLGQpLHRoaXMudmFsdWVPYnNlcnZlci5hZGRQYXRoKGIsYyksdGhpcy52YWx1ZU9ic2VydmVyLmFkZFBhdGgodGhpcy5pZk1vZGVsLHRoaXMuaWZQYXRoKSx0aGlzLnZhbHVlT2JzZXJ2ZXIuc3RhcnQoKX1lbHNle3ZhciBkPXRoaXMuaGFzUmVwZWF0P3ZvaWQgMDpmdW5jdGlvbihhKXtyZXR1cm5bYV19O3RoaXMudmFsdWVPYnNlcnZlcj1uZXcgUGF0aE9ic2VydmVyKGIsYyx0aGlzLnZhbHVlQ2hhbmdlZCx0aGlzLHZvaWQgMCxkKX10aGlzLnZhbHVlQ2hhbmdlZCh0aGlzLnZhbHVlT2JzZXJ2ZXIudmFsdWUpfSx2YWx1ZUNoYW5nZWQ6ZnVuY3Rpb24oYSl7QXJyYXkuaXNBcnJheShhKXx8KGE9dm9pZCAwKTt2YXIgYj10aGlzLml0ZXJhdGVkVmFsdWU7dGhpcy51bm9ic2VydmUoKSx0aGlzLml0ZXJhdGVkVmFsdWU9YSx0aGlzLml0ZXJhdGVkVmFsdWUmJih0aGlzLmFycmF5T2JzZXJ2ZXI9bmV3IEFycmF5T2JzZXJ2ZXIodGhpcy5pdGVyYXRlZFZhbHVlLHRoaXMuaGFuZGxlU3BsaWNlcyx0aGlzKSk7dmFyIGM9QXJyYXlPYnNlcnZlci5jYWxjdWxhdGVTcGxpY2VzKHRoaXMuaXRlcmF0ZWRWYWx1ZXx8W10sYnx8W10pO2MubGVuZ3RoJiZ0aGlzLmhhbmRsZVNwbGljZXMoYyl9LGdldFRlcm1pbmF0b3JBdDpmdW5jdGlvbihhKXtpZigtMT09YSlyZXR1cm4gdGhpcy50ZW1wbGF0ZUVsZW1lbnRfO3ZhciBiPXRoaXMudGVybWluYXRvcnNbMiphXTtpZihiLm5vZGVUeXBlIT09Tm9kZS5FTEVNRU5UX05PREV8fHRoaXMudGVtcGxhdGVFbGVtZW50Xz09PWIpcmV0dXJuIGI7dmFyIGM9Yi5pdGVyYXRvcl87cmV0dXJuIGM/Yy5nZXRUZXJtaW5hdG9yQXQoYy50ZXJtaW5hdG9ycy5sZW5ndGgvMi0xKTpifSxpbnNlcnRJbnN0YW5jZUF0OmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPXRoaXMuZ2V0VGVybWluYXRvckF0KGEtMSksZj1lO2I/Zj1iLmxhc3RDaGlsZHx8ZjpjJiYoZj1jW2MubGVuZ3RoLTFdfHxmKSx0aGlzLnRlcm1pbmF0b3JzLnNwbGljZSgyKmEsMCxmLGQpO3ZhciBnPXRoaXMudGVtcGxhdGVFbGVtZW50Xy5wYXJlbnROb2RlLGg9ZS5uZXh0U2libGluZztpZihiKWcuaW5zZXJ0QmVmb3JlKGIsaCk7ZWxzZSBpZihjKWZvcih2YXIgaT0wO2k8Yy5sZW5ndGg7aSsrKWcuaW5zZXJ0QmVmb3JlKGNbaV0saCl9LGV4dHJhY3RJbnN0YW5jZUF0OmZ1bmN0aW9uKGEpe3ZhciBiPVtdLGM9dGhpcy5nZXRUZXJtaW5hdG9yQXQoYS0xKSxkPXRoaXMuZ2V0VGVybWluYXRvckF0KGEpO2IuYm91bmQ9dGhpcy50ZXJtaW5hdG9yc1syKmErMV0sdGhpcy50ZXJtaW5hdG9ycy5zcGxpY2UoMiphLDIpO2Zvcih2YXIgZT10aGlzLnRlbXBsYXRlRWxlbWVudF8ucGFyZW50Tm9kZTtkIT09Yzspe3ZhciBmPWMubmV4dFNpYmxpbmc7Zj09ZCYmKGQ9YyksZS5yZW1vdmVDaGlsZChmKSxiLnB1c2goZil9cmV0dXJuIGJ9LGdldERlbGVnYXRlRnVuY3Rpb246ZnVuY3Rpb24oYSxiLGMpe2lmKCFhfHwiZnVuY3Rpb24iIT10eXBlb2YgYVtiXSlyZXR1cm4gbnVsbDt2YXIgZD1hW2JdKGMpO3JldHVybiJmdW5jdGlvbiI9PXR5cGVvZiBkP2Q6bnVsbH0saGFuZGxlU3BsaWNlczpmdW5jdGlvbihhKXtpZighdGhpcy5jbG9zZWQpe3ZhciBiPXRoaXMudGVtcGxhdGVFbGVtZW50XyxjPWIuYmluZGluZ0RlbGVnYXRlO2lmKCFiLnBhcmVudE5vZGV8fCFiLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcpcmV0dXJuIHRoaXMuY2xvc2UoKSx2b2lkIDA7dm9pZCAwPT09dGhpcy5pbnN0YW5jZU1vZGVsRm5fJiYodGhpcy5pbnN0YW5jZU1vZGVsRm5fPXRoaXMuZ2V0RGVsZWdhdGVGdW5jdGlvbihjLCJwcmVwYXJlSW5zdGFuY2VNb2RlbCIsYikpLHZvaWQgMD09PXRoaXMuaW5zdGFuY2VQb3NpdGlvbkNoYW5nZWRGbl8mJih0aGlzLmluc3RhbmNlUG9zaXRpb25DaGFuZ2VkRm5fPXRoaXMuZ2V0RGVsZWdhdGVGdW5jdGlvbihjLCJwcmVwYXJlSW5zdGFuY2VQb3NpdGlvbkNoYW5nZWQiLGIpKTt2YXIgZD1uZXcgeixlPTA7YS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2EucmVtb3ZlZC5mb3JFYWNoKGZ1bmN0aW9uKGIpe3ZhciBjPXRoaXMuZXh0cmFjdEluc3RhbmNlQXQoYS5pbmRleCtlKTtkLnNldChiLGMpfSx0aGlzKSxlLT1hLmFkZGVkQ291bnR9LHRoaXMpLGEuZm9yRWFjaChmdW5jdGlvbihhKXtmb3IodmFyIGI9YS5pbmRleDtiPGEuaW5kZXgrYS5hZGRlZENvdW50O2IrKyl7dmFyIGUsZj10aGlzLml0ZXJhdGVkVmFsdWVbYl0sZz12b2lkIDAsaD1kLmdldChmKTtoPyhkLmRlbGV0ZShmKSxlPWguYm91bmQpOihlPVtdLHRoaXMuaW5zdGFuY2VNb2RlbEZuXyYmKGY9dGhpcy5pbnN0YW5jZU1vZGVsRm5fKGYpKSx2b2lkIDAhPT1mJiYoZz10aGlzLnRlbXBsYXRlRWxlbWVudF8uY3JlYXRlSW5zdGFuY2UoZixjLGUpKSksdGhpcy5pbnNlcnRJbnN0YW5jZUF0KGIsZyxoLGUpfX0sdGhpcyksZC5mb3JFYWNoKGZ1bmN0aW9uKGEpe3RoaXMuY2xvc2VJbnN0YW5jZUJpbmRpbmdzKGEuYm91bmQpfSx0aGlzKSx0aGlzLmluc3RhbmNlUG9zaXRpb25DaGFuZ2VkRm5fJiZ0aGlzLnJlcG9ydEluc3RhbmNlc01vdmVkKGEpfX0scmVwb3J0SW5zdGFuY2VNb3ZlZDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmdldFRlcm1pbmF0b3JBdChhLTEpLGM9dGhpcy5nZXRUZXJtaW5hdG9yQXQoYSk7aWYoYiE9PWMpe3ZhciBkPWIubmV4dFNpYmxpbmcudGVtcGxhdGVJbnN0YW5jZTt0aGlzLmluc3RhbmNlUG9zaXRpb25DaGFuZ2VkRm5fKGQsYSl9fSxyZXBvcnRJbnN0YW5jZXNNb3ZlZDpmdW5jdGlvbihhKXtmb3IodmFyIGI9MCxjPTAsZD0wO2Q8YS5sZW5ndGg7ZCsrKXt2YXIgZT1hW2RdO2lmKDAhPWMpZm9yKDtiPGUuaW5kZXg7KXRoaXMucmVwb3J0SW5zdGFuY2VNb3ZlZChiKSxiKys7ZWxzZSBiPWUuaW5kZXg7Zm9yKDtiPGUuaW5kZXgrZS5hZGRlZENvdW50Oyl0aGlzLnJlcG9ydEluc3RhbmNlTW92ZWQoYiksYisrO2MrPWUuYWRkZWRDb3VudC1lLnJlbW92ZWQubGVuZ3RofWlmKDAhPWMpZm9yKHZhciBmPXRoaXMudGVybWluYXRvcnMubGVuZ3RoLzI7Zj5iOyl0aGlzLnJlcG9ydEluc3RhbmNlTW92ZWQoYiksYisrfSxjbG9zZUluc3RhbmNlQmluZGluZ3M6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPTA7YjxhLmxlbmd0aDtiKyspYVtiXS5jbG9zZSgpfSx1bm9ic2VydmU6ZnVuY3Rpb24oKXt0aGlzLmFycmF5T2JzZXJ2ZXImJih0aGlzLmFycmF5T2JzZXJ2ZXIuY2xvc2UoKSx0aGlzLmFycmF5T2JzZXJ2ZXI9dm9pZCAwKX0sY2xvc2U6ZnVuY3Rpb24oKXtpZighdGhpcy5jbG9zZWQpe3RoaXMudW5vYnNlcnZlKCk7Zm9yKHZhciBhPTE7YTx0aGlzLnRlcm1pbmF0b3JzLmxlbmd0aDthKz0yKXRoaXMuY2xvc2VJbnN0YW5jZUJpbmRpbmdzKHRoaXMudGVybWluYXRvcnNbYV0pO3RoaXMudGVybWluYXRvcnMubGVuZ3RoPTAsdGhpcy52YWx1ZU9ic2VydmVyJiZ0aGlzLnZhbHVlT2JzZXJ2ZXIuY2xvc2UoKSx0aGlzLnZhbHVlT2JzZXJ2ZXI9dm9pZCAwLHRoaXMudGVtcGxhdGVFbGVtZW50Xy5pdGVyYXRvcl89dm9pZCAwLHRoaXMuY2xvc2VkPSEwfX19LEhUTUxUZW1wbGF0ZUVsZW1lbnQuZm9yQWxsVGVtcGxhdGVzRnJvbV89Z30odGhpcyksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSxiKXtpZighYSl0aHJvdyBuZXcgRXJyb3IoIkFTU0VSVDogIitiKX1mdW5jdGlvbiBjKGEpe3JldHVybiBhPj00OCYmNTc+PWF9ZnVuY3Rpb24gZChhKXtyZXR1cm4gMzI9PT1hfHw5PT09YXx8MTE9PT1hfHwxMj09PWF8fDE2MD09PWF8fGE+PTU3NjAmJiLhmoDhoI7igIDigIHigILigIPigITigIXigIbigIfigIjigInigIrigK/igZ/jgIDvu78iLmluZGV4T2YoU3RyaW5nLmZyb21DaGFyQ29kZShhKSk+MH1mdW5jdGlvbiBlKGEpe3JldHVybiAxMD09PWF8fDEzPT09YXx8ODIzMj09PWF8fDgyMzM9PT1hfWZ1bmN0aW9uIGYoYSl7cmV0dXJuIDM2PT09YXx8OTU9PT1hfHxhPj02NSYmOTA+PWF8fGE+PTk3JiYxMjI+PWF9ZnVuY3Rpb24gZyhhKXtyZXR1cm4gMzY9PT1hfHw5NT09PWF8fGE+PTY1JiY5MD49YXx8YT49OTcmJjEyMj49YXx8YT49NDgmJjU3Pj1hfWZ1bmN0aW9uIGgoYSl7cmV0dXJuInRoaXMiPT09YX1mdW5jdGlvbiBpKCl7Zm9yKDskPlomJmQoWS5jaGFyQ29kZUF0KFopKTspKytafWZ1bmN0aW9uIGooKXt2YXIgYSxiO2ZvcihhPVorKzskPlomJihiPVkuY2hhckNvZGVBdChaKSxnKGIpKTspKytaO3JldHVybiBZLnNsaWNlKGEsWil9ZnVuY3Rpb24gaygpe3ZhciBhLGIsYztyZXR1cm4gYT1aLGI9aigpLGM9MT09PWIubGVuZ3RoP1UuSWRlbnRpZmllcjpoKGIpP1UuS2V5d29yZDoibnVsbCI9PT1iP1UuTnVsbExpdGVyYWw6InRydWUiPT09Ynx8ImZhbHNlIj09PWI/VS5Cb29sZWFuTGl0ZXJhbDpVLklkZW50aWZpZXIse3R5cGU6Yyx2YWx1ZTpiLHJhbmdlOlthLFpdfX1mdW5jdGlvbiBsKCl7dmFyIGEsYixjPVosZD1ZLmNoYXJDb2RlQXQoWiksZT1ZW1pdO3N3aXRjaChkKXtjYXNlIDQ2OmNhc2UgNDA6Y2FzZSA0MTpjYXNlIDU5OmNhc2UgNDQ6Y2FzZSAxMjM6Y2FzZSAxMjU6Y2FzZSA5MTpjYXNlIDkzOmNhc2UgNTg6Y2FzZSA2MzpyZXR1cm4rK1ose3R5cGU6VS5QdW5jdHVhdG9yLHZhbHVlOlN0cmluZy5mcm9tQ2hhckNvZGUoZCkscmFuZ2U6W2MsWl19O2RlZmF1bHQ6aWYoYT1ZLmNoYXJDb2RlQXQoWisxKSw2MT09PWEpc3dpdGNoKGQpe2Nhc2UgMzc6Y2FzZSAzODpjYXNlIDQyOmNhc2UgNDM6Y2FzZSA0NTpjYXNlIDQ3OmNhc2UgNjA6Y2FzZSA2MjpjYXNlIDEyNDpyZXR1cm4gWis9Mix7dHlwZTpVLlB1bmN0dWF0b3IsdmFsdWU6U3RyaW5nLmZyb21DaGFyQ29kZShkKStTdHJpbmcuZnJvbUNoYXJDb2RlKGEpLHJhbmdlOltjLFpdfTtjYXNlIDMzOmNhc2UgNjE6cmV0dXJuIForPTIsNjE9PT1ZLmNoYXJDb2RlQXQoWikmJisrWix7dHlwZTpVLlB1bmN0dWF0b3IsdmFsdWU6WS5zbGljZShjLFopLHJhbmdlOltjLFpdfX19cmV0dXJuIGI9WVtaKzFdLGU9PT1iJiYiJnwiLmluZGV4T2YoZSk+PTA/KForPTIse3R5cGU6VS5QdW5jdHVhdG9yLHZhbHVlOmUrYixyYW5nZTpbYyxaXX0pOiI8Pj0hKy0qJSZ8Xi8iLmluZGV4T2YoZSk+PTA/KCsrWix7dHlwZTpVLlB1bmN0dWF0b3IsdmFsdWU6ZSxyYW5nZTpbYyxaXX0pOihzKHt9LFguVW5leHBlY3RlZFRva2VuLCJJTExFR0FMIiksdm9pZCAwKX1mdW5jdGlvbiBtKCl7dmFyIGEsZCxlO2lmKGU9WVtaXSxiKGMoZS5jaGFyQ29kZUF0KDApKXx8Ii4iPT09ZSwiTnVtZXJpYyBsaXRlcmFsIG11c3Qgc3RhcnQgd2l0aCBhIGRlY2ltYWwgZGlnaXQgb3IgYSBkZWNpbWFsIHBvaW50IiksZD1aLGE9IiIsIi4iIT09ZSl7Zm9yKGE9WVtaKytdLGU9WVtaXSwiMCI9PT1hJiZlJiZjKGUuY2hhckNvZGVBdCgwKSkmJnMoe30sWC5VbmV4cGVjdGVkVG9rZW4sIklMTEVHQUwiKTtjKFkuY2hhckNvZGVBdChaKSk7KWErPVlbWisrXTtlPVlbWl19aWYoIi4iPT09ZSl7Zm9yKGErPVlbWisrXTtjKFkuY2hhckNvZGVBdChaKSk7KWErPVlbWisrXTtlPVlbWl19aWYoImUiPT09ZXx8IkUiPT09ZSlpZihhKz1ZW1orK10sZT1ZW1pdLCgiKyI9PT1lfHwiLSI9PT1lKSYmKGErPVlbWisrXSksYyhZLmNoYXJDb2RlQXQoWikpKWZvcig7YyhZLmNoYXJDb2RlQXQoWikpOylhKz1ZW1orK107ZWxzZSBzKHt9LFguVW5leHBlY3RlZFRva2VuLCJJTExFR0FMIik7cmV0dXJuIGYoWS5jaGFyQ29kZUF0KFopKSYmcyh7fSxYLlVuZXhwZWN0ZWRUb2tlbiwiSUxMRUdBTCIpLHt0eXBlOlUuTnVtZXJpY0xpdGVyYWwsdmFsdWU6cGFyc2VGbG9hdChhKSxyYW5nZTpbZCxaXX19ZnVuY3Rpb24gbigpe3ZhciBhLGMsZCxmPSIiLGc9ITE7Zm9yKGE9WVtaXSxiKCInIj09PWF8fCciJz09PWEsIlN0cmluZyBsaXRlcmFsIG11c3Qgc3RhcnRzIHdpdGggYSBxdW90ZSIpLGM9WiwrK1o7JD5aOyl7aWYoZD1ZW1orK10sZD09PWEpe2E9IiI7YnJlYWt9aWYoIlxcIj09PWQpaWYoZD1ZW1orK10sZCYmZShkLmNoYXJDb2RlQXQoMCkpKSJcciI9PT1kJiYiXG4iPT09WVtaXSYmKytaO2Vsc2Ugc3dpdGNoKGQpe2Nhc2UibiI6Zis9IlxuIjticmVhaztjYXNlInIiOmYrPSJcciI7YnJlYWs7Y2FzZSJ0IjpmKz0iCSI7YnJlYWs7Y2FzZSJiIjpmKz0iXGIiO2JyZWFrO2Nhc2UiZiI6Zis9IlxmIjticmVhaztjYXNlInYiOmYrPSILIjticmVhaztkZWZhdWx0OmYrPWR9ZWxzZXtpZihlKGQuY2hhckNvZGVBdCgwKSkpYnJlYWs7Zis9ZH19cmV0dXJuIiIhPT1hJiZzKHt9LFguVW5leHBlY3RlZFRva2VuLCJJTExFR0FMIikse3R5cGU6VS5TdHJpbmdMaXRlcmFsLHZhbHVlOmYsb2N0YWw6ZyxyYW5nZTpbYyxaXX19ZnVuY3Rpb24gbyhhKXtyZXR1cm4gYS50eXBlPT09VS5JZGVudGlmaWVyfHxhLnR5cGU9PT1VLktleXdvcmR8fGEudHlwZT09PVUuQm9vbGVhbkxpdGVyYWx8fGEudHlwZT09PVUuTnVsbExpdGVyYWx9ZnVuY3Rpb24gcCgpe3ZhciBhO3JldHVybiBpKCksWj49JD97dHlwZTpVLkVPRixyYW5nZTpbWixaXX06KGE9WS5jaGFyQ29kZUF0KFopLDQwPT09YXx8NDE9PT1hfHw1OD09PWE/bCgpOjM5PT09YXx8MzQ9PT1hP24oKTpmKGEpP2soKTo0Nj09PWE/YyhZLmNoYXJDb2RlQXQoWisxKSk/bSgpOmwoKTpjKGEpP20oKTpsKCkpfWZ1bmN0aW9uIHEoKXt2YXIgYTtyZXR1cm4gYT1hYixaPWEucmFuZ2VbMV0sYWI9cCgpLFo9YS5yYW5nZVsxXSxhfWZ1bmN0aW9uIHIoKXt2YXIgYTthPVosYWI9cCgpLFo9YX1mdW5jdGlvbiBzKGEsYyl7dmFyIGQsZT1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMiksZj1jLnJlcGxhY2UoLyUoXGQpL2csZnVuY3Rpb24oYSxjKXtyZXR1cm4gYihjPGUubGVuZ3RoLCJNZXNzYWdlIHJlZmVyZW5jZSBtdXN0IGJlIGluIHJhbmdlIiksZVtjXX0pO3Rocm93IGQ9bmV3IEVycm9yKGYpLGQuaW5kZXg9WixkLmRlc2NyaXB0aW9uPWYsZH1mdW5jdGlvbiB0KGEpe3MoYSxYLlVuZXhwZWN0ZWRUb2tlbixhLnZhbHVlKX1mdW5jdGlvbiB1KGEpe3ZhciBiPXEoKTsoYi50eXBlIT09VS5QdW5jdHVhdG9yfHxiLnZhbHVlIT09YSkmJnQoYil9ZnVuY3Rpb24gdihhKXtyZXR1cm4gYWIudHlwZT09PVUuUHVuY3R1YXRvciYmYWIudmFsdWU9PT1hfWZ1bmN0aW9uIHcoYSl7cmV0dXJuIGFiLnR5cGU9PT1VLktleXdvcmQmJmFiLnZhbHVlPT09YX1mdW5jdGlvbiB4KCl7cmV0dXJuIDU5PT09WS5jaGFyQ29kZUF0KFopPyhxKCksdm9pZCAwKTooaSgpLHYoIjsiKT8ocSgpLHZvaWQgMCk6KGFiLnR5cGU9PT1VLkVPRnx8digifSIpfHx0KGFiKSx2b2lkIDApKX1mdW5jdGlvbiB5KCl7dmFyIGE9W107Zm9yKHUoIlsiKTshdigiXSIpOyl2KCIsIik/KHEoKSxhLnB1c2gobnVsbCkpOihhLnB1c2goZGIoKSksdigiXSIpfHx1KCIsIikpO3JldHVybiB1KCJdIiksXy5jcmVhdGVBcnJheUV4cHJlc3Npb24oYSl9ZnVuY3Rpb24geigpe3ZhciBhO3JldHVybiBpKCksYT1xKCksYS50eXBlPT09VS5TdHJpbmdMaXRlcmFsfHxhLnR5cGU9PT1VLk51bWVyaWNMaXRlcmFsP18uY3JlYXRlTGl0ZXJhbChhKTpfLmNyZWF0ZUlkZW50aWZpZXIoYS52YWx1ZSl9ZnVuY3Rpb24gQSgpe3ZhciBhLGI7cmV0dXJuIGE9YWIsaSgpLChhLnR5cGU9PT1VLkVPRnx8YS50eXBlPT09VS5QdW5jdHVhdG9yKSYmdChhKSxiPXooKSx1KCI6IiksXy5jcmVhdGVQcm9wZXJ0eSgiaW5pdCIsYixkYigpKX1mdW5jdGlvbiBCKCl7dmFyIGE9W107Zm9yKHUoInsiKTshdigifSIpOylhLnB1c2goQSgpKSx2KCJ9Iil8fHUoIiwiKTtyZXR1cm4gdSgifSIpLF8uY3JlYXRlT2JqZWN0RXhwcmVzc2lvbihhKX1mdW5jdGlvbiBDKCl7dmFyIGE7cmV0dXJuIHUoIigiKSxhPWRiKCksdSgiKSIpLGF9ZnVuY3Rpb24gRCgpe3ZhciBhLGIsYztyZXR1cm4gdigiKCIpP0MoKTooYT1hYi50eXBlLGE9PT1VLklkZW50aWZpZXI/Yz1fLmNyZWF0ZUlkZW50aWZpZXIocSgpLnZhbHVlKTphPT09VS5TdHJpbmdMaXRlcmFsfHxhPT09VS5OdW1lcmljTGl0ZXJhbD9jPV8uY3JlYXRlTGl0ZXJhbChxKCkpOmE9PT1VLktleXdvcmQ/dygidGhpcyIpJiYocSgpLGM9Xy5jcmVhdGVUaGlzRXhwcmVzc2lvbigpKTphPT09VS5Cb29sZWFuTGl0ZXJhbD8oYj1xKCksYi52YWx1ZT0idHJ1ZSI9PT1iLnZhbHVlLGM9Xy5jcmVhdGVMaXRlcmFsKGIpKTphPT09VS5OdWxsTGl0ZXJhbD8oYj1xKCksYi52YWx1ZT1udWxsLGM9Xy5jcmVhdGVMaXRlcmFsKGIpKTp2KCJbIik/Yz15KCk6digieyIpJiYoYz1CKCkpLGM/YzoodChxKCkpLHZvaWQgMCkpfWZ1bmN0aW9uIEUoKXt2YXIgYT1bXTtpZih1KCIoIiksIXYoIikiKSlmb3IoOyQ+WiYmKGEucHVzaChkYigpKSwhdigiKSIpKTspdSgiLCIpO3JldHVybiB1KCIpIiksYX1mdW5jdGlvbiBGKCl7dmFyIGE7cmV0dXJuIGE9cSgpLG8oYSl8fHQoYSksXy5jcmVhdGVJZGVudGlmaWVyKGEudmFsdWUpfWZ1bmN0aW9uIEcoKXtyZXR1cm4gdSgiLiIpLEYoKX1mdW5jdGlvbiBIKCl7dmFyIGE7cmV0dXJuIHUoIlsiKSxhPWRiKCksdSgiXSIpLGF9ZnVuY3Rpb24gSSgpe3ZhciBhLGI7Zm9yKGE9RCgpO3YoIi4iKXx8digiWyIpOyl2KCJbIik/KGI9SCgpLGE9Xy5jcmVhdGVNZW1iZXJFeHByZXNzaW9uKCJbIixhLGIpKTooYj1HKCksYT1fLmNyZWF0ZU1lbWJlckV4cHJlc3Npb24oIi4iLGEsYikpO3JldHVybiBhfWZ1bmN0aW9uIEooKXt2YXIgYSxiO3JldHVybiBhYi50eXBlIT09VS5QdW5jdHVhdG9yJiZhYi50eXBlIT09VS5LZXl3b3JkP2I9Y2IoKTp2KCIrIil8fHYoIi0iKXx8digiISIpPyhhPXEoKSxiPUooKSxiPV8uY3JlYXRlVW5hcnlFeHByZXNzaW9uKGEudmFsdWUsYikpOncoImRlbGV0ZSIpfHx3KCJ2b2lkIil8fHcoInR5cGVvZiIpP3Moe30sWC5VbmV4cGVjdGVkVG9rZW4pOmI9Y2IoKSxifWZ1bmN0aW9uIEsoYSl7dmFyIGI9MDtpZihhLnR5cGUhPT1VLlB1bmN0dWF0b3ImJmEudHlwZSE9PVUuS2V5d29yZClyZXR1cm4gMDtzd2l0Y2goYS52YWx1ZSl7Y2FzZSJ8fCI6Yj0xO2JyZWFrO2Nhc2UiJiYiOmI9MjticmVhaztjYXNlIj09IjpjYXNlIiE9IjpjYXNlIj09PSI6Y2FzZSIhPT0iOmI9NjticmVhaztjYXNlIjwiOmNhc2UiPiI6Y2FzZSI8PSI6Y2FzZSI+PSI6Y2FzZSJpbnN0YW5jZW9mIjpiPTc7YnJlYWs7Y2FzZSJpbiI6Yj03O2JyZWFrO2Nhc2UiKyI6Y2FzZSItIjpiPTk7YnJlYWs7Y2FzZSIqIjpjYXNlIi8iOmNhc2UiJSI6Yj0xMX1yZXR1cm4gYn1mdW5jdGlvbiBMKCl7dmFyIGEsYixjLGQsZSxmLGcsaDtpZihnPUooKSxiPWFiLGM9SyhiKSwwPT09YylyZXR1cm4gZztmb3IoYi5wcmVjPWMscSgpLGU9SigpLGQ9W2csYixlXTsoYz1LKGFiKSk+MDspe2Zvcig7ZC5sZW5ndGg+MiYmYzw9ZFtkLmxlbmd0aC0yXS5wcmVjOyllPWQucG9wKCksZj1kLnBvcCgpLnZhbHVlLGc9ZC5wb3AoKSxhPV8uY3JlYXRlQmluYXJ5RXhwcmVzc2lvbihmLGcsZSksZC5wdXNoKGEpO2I9cSgpLGIucHJlYz1jLGQucHVzaChiKSxhPUooKSxkLnB1c2goYSl9Zm9yKGg9ZC5sZW5ndGgtMSxhPWRbaF07aD4xOylhPV8uY3JlYXRlQmluYXJ5RXhwcmVzc2lvbihkW2gtMV0udmFsdWUsZFtoLTJdLGEpLGgtPTI7cmV0dXJuIGF9ZnVuY3Rpb24gTSgpe3ZhciBhLGIsYztyZXR1cm4gYT1MKCksdigiPyIpJiYocSgpLGI9TSgpLHUoIjoiKSxjPU0oKSxhPV8uY3JlYXRlQ29uZGl0aW9uYWxFeHByZXNzaW9uKGEsYixjKSksYX1mdW5jdGlvbiBOKCl7dmFyIGEsYjtyZXR1cm4gYT1xKCksYS50eXBlIT09VS5JZGVudGlmaWVyJiZ0KGEpLGI9digiKCIpP0UoKTpbXSxfLmNyZWF0ZUZpbHRlcihhLnZhbHVlLGIpfWZ1bmN0aW9uIE8oYSl7Zm9yKF8uY3JlYXRlVG9wTGV2ZWwoYSk7digifCIpOylxKCksTigpCn1mdW5jdGlvbiBQKCl7aSgpLHIoKTt2YXIgYT1kYigpO2EmJigiYXMiPT09YWIudmFsdWU/UihhKToiLCI9PT1hYi52YWx1ZXx8ImluIj09YWIudmFsdWUmJmEudHlwZT09PVcuSWRlbnRpZmllcj9TKGEpOnYoInwiKT9PKGEpOmEudHlwZT09PVcuSWRlbnRpZmllciYmdigiOiIpP1EoYSk6Xy5jcmVhdGVUb3BMZXZlbChhKSksYWIudHlwZSE9PVUuRU9GJiZ0KGFiKX1mdW5jdGlvbiBRKGEpe2NvbnNvbGUud2FybigiTGFiZWxsZWQgZXhwcmVzc2lvbnMgYXJlIGRlcHJlY2F0ZWQuIFVzZSB0b2tlbkxpc3QgZmlsdGVyIGluc3RlYWQiKTt2YXIgYj1hLm5hbWU7Zm9yKHUoIjoiKSxhPWRiKCksXy5jcmVhdGVMYWJlbGVkU3RhdGVtZW50KGIsYSkseCgpO2FiLnR5cGU9PT1VLklkZW50aWZpZXI7KWI9cSgpLnZhbHVlLHUoIjoiKSxhPWRiKCksXy5jcmVhdGVMYWJlbGVkU3RhdGVtZW50KGIsYSkseCgpO3JldHVybiBudWxsfWZ1bmN0aW9uIFIoYSl7cSgpO3ZhciBiPXEoKS52YWx1ZTtfLmNyZWF0ZUFzRXhwcmVzc2lvbihhLGIpfWZ1bmN0aW9uIFMoYSl7dmFyIGI7IiwiPT09YWIudmFsdWUmJihxKCksYWIudHlwZSE9PVUuSWRlbnRpZmllciYmdChhYiksYj1xKCkudmFsdWUpLHEoKTt2YXIgYz1kYigpO18uY3JlYXRlSW5FeHByZXNzaW9uKGEubmFtZSxiLGMpfWZ1bmN0aW9uIFQoYSxiKXtyZXR1cm4gXz1iLFk9YSxaPTAsJD1ZLmxlbmd0aCxhYj1udWxsLGJiPXtsYWJlbFNldDp7fX0sUCgpfXZhciBVLFYsVyxYLFksWiwkLF8sYWIsYmI7VT17Qm9vbGVhbkxpdGVyYWw6MSxFT0Y6MixJZGVudGlmaWVyOjMsS2V5d29yZDo0LE51bGxMaXRlcmFsOjUsTnVtZXJpY0xpdGVyYWw6NixQdW5jdHVhdG9yOjcsU3RyaW5nTGl0ZXJhbDo4fSxWPXt9LFZbVS5Cb29sZWFuTGl0ZXJhbF09IkJvb2xlYW4iLFZbVS5FT0ZdPSI8ZW5kPiIsVltVLklkZW50aWZpZXJdPSJJZGVudGlmaWVyIixWW1UuS2V5d29yZF09IktleXdvcmQiLFZbVS5OdWxsTGl0ZXJhbF09Ik51bGwiLFZbVS5OdW1lcmljTGl0ZXJhbF09Ik51bWVyaWMiLFZbVS5QdW5jdHVhdG9yXT0iUHVuY3R1YXRvciIsVltVLlN0cmluZ0xpdGVyYWxdPSJTdHJpbmciLFc9e0FycmF5RXhwcmVzc2lvbjoiQXJyYXlFeHByZXNzaW9uIixCaW5hcnlFeHByZXNzaW9uOiJCaW5hcnlFeHByZXNzaW9uIixDYWxsRXhwcmVzc2lvbjoiQ2FsbEV4cHJlc3Npb24iLENvbmRpdGlvbmFsRXhwcmVzc2lvbjoiQ29uZGl0aW9uYWxFeHByZXNzaW9uIixFbXB0eVN0YXRlbWVudDoiRW1wdHlTdGF0ZW1lbnQiLEV4cHJlc3Npb25TdGF0ZW1lbnQ6IkV4cHJlc3Npb25TdGF0ZW1lbnQiLElkZW50aWZpZXI6IklkZW50aWZpZXIiLExpdGVyYWw6IkxpdGVyYWwiLExhYmVsZWRTdGF0ZW1lbnQ6IkxhYmVsZWRTdGF0ZW1lbnQiLExvZ2ljYWxFeHByZXNzaW9uOiJMb2dpY2FsRXhwcmVzc2lvbiIsTWVtYmVyRXhwcmVzc2lvbjoiTWVtYmVyRXhwcmVzc2lvbiIsT2JqZWN0RXhwcmVzc2lvbjoiT2JqZWN0RXhwcmVzc2lvbiIsUHJvZ3JhbToiUHJvZ3JhbSIsUHJvcGVydHk6IlByb3BlcnR5IixUaGlzRXhwcmVzc2lvbjoiVGhpc0V4cHJlc3Npb24iLFVuYXJ5RXhwcmVzc2lvbjoiVW5hcnlFeHByZXNzaW9uIn0sWD17VW5leHBlY3RlZFRva2VuOiJVbmV4cGVjdGVkIHRva2VuICUwIixVbmtub3duTGFiZWw6IlVuZGVmaW5lZCBsYWJlbCAnJTAnIixSZWRlY2xhcmF0aW9uOiIlMCAnJTEnIGhhcyBhbHJlYWR5IGJlZW4gZGVjbGFyZWQifTt2YXIgY2I9SSxkYj1NO2EuZXNwcmltYT17cGFyc2U6VH19KHRoaXMpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEsYixkKXt2YXIgZTt0cnl7aWYoZT1jKGEpLGUuc2NvcGVJZGVudCYmKGQubm9kZVR5cGUhPT1Ob2RlLkVMRU1FTlRfTk9ERXx8IlRFTVBMQVRFIiE9PWQudGFnTmFtZXx8ImJpbmQiIT09YiYmInJlcGVhdCIhPT1iKSl0aHJvdyBFcnJvcigiYXMgYW5kIGluIGNhbiBvbmx5IGJlIHVzZWQgd2l0aGluIDx0ZW1wbGF0ZSBiaW5kL3JlcGVhdD4iKX1jYXRjaChmKXtyZXR1cm4gY29uc29sZS5lcnJvcigiSW52YWxpZCBleHByZXNzaW9uIHN5bnRheDogIithLGYpLHZvaWQgMH1yZXR1cm4gZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWUuZ2V0QmluZGluZyhhKTtyZXR1cm4gZS5zY29wZUlkZW50JiZkJiYoYy5wb2x5bWVyRXhwcmVzc2lvblNjb3BlSWRlbnRfPWUuc2NvcGVJZGVudCxlLmluZGV4SWRlbnQmJihjLnBvbHltZXJFeHByZXNzaW9uSW5kZXhJZGVudF89ZS5pbmRleElkZW50KSksZH19ZnVuY3Rpb24gYyhhKXt2YXIgYj1tW2FdO2lmKCFiKXt2YXIgYz1uZXcgaTtlc3ByaW1hLnBhcnNlKGEsYyksYj1uZXcgaihjKSxtW2FdPWJ9cmV0dXJuIGJ9ZnVuY3Rpb24gZChhKXtyZXR1cm4gZnVuY3Rpb24oYil7Zm9yKHZhciBjPVtdLGQ9MDtkPGEubGVuZ3RoO2QrKylhW2RdLmV4cHJlc3Npb24oYikmJmMucHVzaChhW2RdLmxhYmVsKTtyZXR1cm4gYy5qb2luKCIgIil9fWZ1bmN0aW9uIGUoYSxiLGMpe3RoaXMuZGVsZWdhdGU9YSx0aGlzLm5hbWU9Yix0aGlzLmxhc3Q9Y31mdW5jdGlvbiBmKGEsYil7dGhpcy5uYW1lPWEsdGhpcy5hcmdzPWIsdGhpcy5vYmplY3RfPW51bGx9ZnVuY3Rpb24gZygpe3Rocm93IEVycm9yKCJOb3QgSW1wbGVtZW50ZWQiKX1mdW5jdGlvbiBoKGEpe3JldHVybiBhIGluc3RhbmNlb2YgZT9hLnZhbHVlRm4oKTphfWZ1bmN0aW9uIGkoKXt0aGlzLmV4cHJlc3Npb249bnVsbCx0aGlzLmZpbHRlcnM9W10sdGhpcy5sYWJlbGVkU3RhdGVtZW50cz1bXSx0aGlzLmRlcHM9e30sdGhpcy5kZXBzTGlzdD1bXSx0aGlzLmN1cnJlbnRQYXRoPXZvaWQgMCx0aGlzLnNjb3BlSWRlbnQ9dm9pZCAwLHRoaXMuaW5kZXhJZGVudD12b2lkIDB9ZnVuY3Rpb24gaihhKXtpZih0aGlzLnNjb3BlSWRlbnQ9YS5zY29wZUlkZW50LHRoaXMuaW5kZXhJZGVudD1hLmluZGV4SWRlbnQsIWEuZXhwcmVzc2lvbiYmIWEubGFiZWxlZFN0YXRlbWVudHMubGVuZ3RoKXRocm93IEVycm9yKCJObyBleHByZXNzaW9uIG9yIGxhYmVsbGVkIHN0YXRlbWVudHMgZm91bmQuIik7dmFyIGI9YS5sYWJlbGVkU3RhdGVtZW50cy5sZW5ndGg/ZChhLmxhYmVsZWRTdGF0ZW1lbnRzKTpoKGEuZXhwcmVzc2lvbik7YS5maWx0ZXJzLmZvckVhY2goZnVuY3Rpb24oYSl7Yj1hLnRvRE9NKGIpfSksdGhpcy5yZXNvbHZlRm49Yix0aGlzLnBhdGhzPWEuZGVwc0xpc3QsMT09PXRoaXMucGF0aHMubGVuZ3RoJiZhLmZpbHRlcnMubGVuZ3RoJiZhLmV4cHJlc3Npb24gaW5zdGFuY2VvZiBlJiYodGhpcy5maWx0ZXJzU2V0VmFsdWVGbj1hLmZpbHRlcnNTZXRWYWx1ZUZuKX1mdW5jdGlvbiBrKCl7fWZ1bmN0aW9uIGwoYSl7cmV0dXJuIFN0cmluZyhhKS5yZXBsYWNlKC9bQS1aXS9nLGZ1bmN0aW9uKGEpe3JldHVybiItIithLnRvTG93ZXJDYXNlKCl9KX12YXIgbT1PYmplY3QuY3JlYXRlKG51bGwpO2UucHJvdG90eXBlPXtnZXRQYXRoOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucGF0aF98fCh0aGlzLnBhdGhfPXRoaXMubGFzdD9QYXRoLmdldCh0aGlzLmxhc3QuZ2V0UGF0aCgpKyIuIit0aGlzLm5hbWUpOlBhdGguZ2V0KHRoaXMubmFtZSkpLHRoaXMucGF0aF99LHZhbHVlRm46ZnVuY3Rpb24oKXtpZighdGhpcy52YWx1ZUZuXyl7dmFyIGE9dGhpcy5nZXRQYXRoKCksYj10aGlzLmRlbGVnYXRlLGM9dGhpcy5kZWxlZ2F0ZS5kZXBzW2FdO3ZvaWQgMD09PWMmJihjPXRoaXMuZGVsZWdhdGUuZGVwc1thXT10aGlzLmRlbGVnYXRlLmRlcHNMaXN0Lmxlbmd0aCx0aGlzLmRlbGVnYXRlLmRlcHNMaXN0LnB1c2goYSkpO3ZhciBkPWIuZGVwc0xpc3Q7dGhpcy52YWx1ZUZuXz1mdW5jdGlvbihhKXtyZXR1cm4gMT09PWQubGVuZ3RoP2E6YVtjXX19cmV0dXJuIHRoaXMudmFsdWVGbl99fSxmLnByb3RvdHlwZT17Z2V0IG9iamVjdCgpe2lmKHRoaXMub2JqZWN0XylyZXR1cm4gdGhpcy5vYmplY3RfO3ZhciBhPWsuZmlsdGVyc1t0aGlzLm5hbWVdLGI9dGhpcy5hcmdzLm1hcChmdW5jdGlvbihhKXt2YXIgYj1oKGEpO3JldHVybiBiKCl9KTtyZXR1cm4gdGhpcy5vYmplY3RfPWEuYXBwbHkobnVsbCxiKX0sdG9ET006ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5vYmplY3Q7cmV0dXJuIGZ1bmN0aW9uKGMpe3ZhciBkPWEoYyk7cmV0dXJuIGIudG9ET00oZCl9fSx0b01vZGVsOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMub2JqZWN0O3JldHVybiBiLnRvTW9kZWw/Yi50b01vZGVsKGEpOmF9fTt2YXIgbj17IisiOmZ1bmN0aW9uKGEpe3JldHVybithfSwiLSI6ZnVuY3Rpb24oYSl7cmV0dXJuLWF9LCIhIjpmdW5jdGlvbihhKXtyZXR1cm4hYX19LG89eyIrIjpmdW5jdGlvbihhLGIpe3JldHVybiBhK2J9LCItIjpmdW5jdGlvbihhLGIpe3JldHVybiBhLWJ9LCIqIjpmdW5jdGlvbihhLGIpe3JldHVybiBhKmJ9LCIvIjpmdW5jdGlvbihhLGIpe3JldHVybiBhL2J9LCIlIjpmdW5jdGlvbihhLGIpe3JldHVybiBhJWJ9LCI8IjpmdW5jdGlvbihhLGIpe3JldHVybiBiPmF9LCI+IjpmdW5jdGlvbihhLGIpe3JldHVybiBhPmJ9LCI8PSI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYj49YX0sIj49IjpmdW5jdGlvbihhLGIpe3JldHVybiBhPj1ifSwiPT0iOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGE9PWJ9LCIhPSI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYSE9Yn0sIj09PSI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT09PWJ9LCIhPT0iOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGEhPT1ifSwiJiYiOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGEmJmJ9LCJ8fCI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYXx8Yn19O2kucHJvdG90eXBlPXtnZXQgZmlsdGVyc1NldFZhbHVlRm4oKXtpZighdGhpcy5maWx0ZXJzU2V0VmFsdWVGbl8pe3ZhciBhPXRoaXMuZmlsdGVyczt0aGlzLmZpbHRlcnNTZXRWYWx1ZUZuXz1mdW5jdGlvbihiKXtmb3IodmFyIGM9YS5sZW5ndGgtMTtjPj0wO2MtLSliPWFbY10udG9Nb2RlbChiKTtyZXR1cm4gYn19cmV0dXJuIHRoaXMuZmlsdGVyc1NldFZhbHVlRm5ffSxjcmVhdGVMYWJlbGVkU3RhdGVtZW50OmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMubGFiZWxlZFN0YXRlbWVudHMucHVzaCh7bGFiZWw6YSxleHByZXNzaW9uOmIgaW5zdGFuY2VvZiBlP2IudmFsdWVGbigpOmJ9KSxifSxjcmVhdGVVbmFyeUV4cHJlc3Npb246ZnVuY3Rpb24oYSxiKXtpZighblthXSl0aHJvdyBFcnJvcigiRGlzYWxsb3dlZCBvcGVyYXRvcjogIithKTtyZXR1cm4gYj1oKGIpLGZ1bmN0aW9uKGMpe3JldHVybiBuW2FdKGIoYykpfX0sY3JlYXRlQmluYXJ5RXhwcmVzc2lvbjpmdW5jdGlvbihhLGIsYyl7aWYoIW9bYV0pdGhyb3cgRXJyb3IoIkRpc2FsbG93ZWQgb3BlcmF0b3I6ICIrYSk7cmV0dXJuIGI9aChiKSxjPWgoYyksZnVuY3Rpb24oZCl7cmV0dXJuIG9bYV0oYihkKSxjKGQpKX19LGNyZWF0ZUNvbmRpdGlvbmFsRXhwcmVzc2lvbjpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGE9aChhKSxiPWgoYiksYz1oKGMpLGZ1bmN0aW9uKGQpe3JldHVybiBhKGQpP2IoZCk6YyhkKX19LGNyZWF0ZUlkZW50aWZpZXI6ZnVuY3Rpb24oYSl7dmFyIGI9bmV3IGUodGhpcyxhKTtyZXR1cm4gYi50eXBlPSJJZGVudGlmaWVyIixifSxjcmVhdGVNZW1iZXJFeHByZXNzaW9uOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4iWyI9PT1hPyhiPWgoYiksYz1oKGMpLGZ1bmN0aW9uKGEpe3JldHVybiBiKGEpW2MoYSldfSk6bmV3IGUodGhpcyxjLm5hbWUsYil9LGNyZWF0ZUxpdGVyYWw6ZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGEudmFsdWV9fSxjcmVhdGVBcnJheUV4cHJlc3Npb246ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPTA7YjxhLmxlbmd0aDtiKyspYVtiXT1oKGFbYl0pO3JldHVybiBmdW5jdGlvbihiKXtmb3IodmFyIGM9W10sZD0wO2Q8YS5sZW5ndGg7ZCsrKWMucHVzaChhW2RdKGIpKTtyZXR1cm4gY319LGNyZWF0ZVByb3BlcnR5OmZ1bmN0aW9uKGEsYixjKXtyZXR1cm57a2V5OmIgaW5zdGFuY2VvZiBlP2IuZ2V0UGF0aCgpOmIoKSx2YWx1ZTpjfX0sY3JlYXRlT2JqZWN0RXhwcmVzc2lvbjpmdW5jdGlvbihhKXtmb3IodmFyIGI9MDtiPGEubGVuZ3RoO2IrKylhW2JdLnZhbHVlPWgoYVtiXS52YWx1ZSk7cmV0dXJuIGZ1bmN0aW9uKGIpe2Zvcih2YXIgYz17fSxkPTA7ZDxhLmxlbmd0aDtkKyspY1thW2RdLmtleV09YVtkXS52YWx1ZShiKTtyZXR1cm4gY319LGNyZWF0ZUZpbHRlcjpmdW5jdGlvbihhLGIpe3RoaXMuZmlsdGVycy5wdXNoKG5ldyBmKGEsYikpfSxjcmVhdGVBc0V4cHJlc3Npb246ZnVuY3Rpb24oYSxiKXt0aGlzLmV4cHJlc3Npb249YSx0aGlzLnNjb3BlSWRlbnQ9Yn0sY3JlYXRlSW5FeHByZXNzaW9uOmZ1bmN0aW9uKGEsYixjKXt0aGlzLmV4cHJlc3Npb249Yyx0aGlzLnNjb3BlSWRlbnQ9YSx0aGlzLmluZGV4SWRlbnQ9Yn0sY3JlYXRlVG9wTGV2ZWw6ZnVuY3Rpb24oYSl7dGhpcy5leHByZXNzaW9uPWF9LGNyZWF0ZVRoaXNFeHByZXNzaW9uOmd9LGoucHJvdG90eXBlPXtnZXRCaW5kaW5nOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMucGF0aHM7aWYoIWIubGVuZ3RoKXJldHVybnt2YWx1ZTp0aGlzLnJlc29sdmVGbih7fSl9O2lmKDE9PT1iLmxlbmd0aClyZXR1cm4gbmV3IFBhdGhPYnNlcnZlcihhLGJbMF0sdm9pZCAwLHZvaWQgMCx2b2lkIDAsdGhpcy5yZXNvbHZlRm4sdGhpcy5maWx0ZXJzU2V0VmFsdWVGbik7Zm9yKHZhciBjPW5ldyBDb21wb3VuZFBhdGhPYnNlcnZlcih2b2lkIDAsdm9pZCAwLHZvaWQgMCx0aGlzLnJlc29sdmVGbiksZD0wO2Q8Yi5sZW5ndGg7ZCsrKWMuYWRkUGF0aChhLGJbZF0pO3JldHVybiBjLnN0YXJ0KCksY319LGsuZmlsdGVycz1PYmplY3QuY3JlYXRlKG51bGwpLGsuZmlsdGVycy50b2tlbkxpc3Q9ZnVuY3Rpb24oKXtyZXR1cm57dG9ET006ZnVuY3Rpb24oYSl7dmFyIGI9W107Zm9yKHZhciBjIGluIGEpYVtjXSYmYi5wdXNoKGMpO3JldHVybiBiLmpvaW4oIiAiKX19fSxrLmZpbHRlcnMuc3R5bGVPYmplY3Q9ZnVuY3Rpb24oKXtyZXR1cm57dG9ET006ZnVuY3Rpb24oYSl7dmFyIGI9W107Zm9yKHZhciBjIGluIGEpYi5wdXNoKGwoYykrIjogIithW2NdKTtyZXR1cm4gYi5qb2luKCI7ICIpfX19LGsucHJvdG90eXBlPXtwcmVwYXJlSW5zdGFuY2VQb3NpdGlvbkNoYW5nZWQ6ZnVuY3Rpb24oYSl7dmFyIGI9YS5wb2x5bWVyRXhwcmVzc2lvbkluZGV4SWRlbnRfO2lmKGIpcmV0dXJuIGZ1bmN0aW9uKGEsYyl7YS5tb2RlbFtiXT1jfX0scHJlcGFyZUJpbmRpbmc6ZnVuY3Rpb24oYSxjLGQpe3JldHVybiBQYXRoLmdldChhKS52YWxpZD92b2lkIDA6YihhLGMsZCl9LHByZXBhcmVJbnN0YW5jZU1vZGVsOmZ1bmN0aW9uKGEpe3ZhciBiPWEucG9seW1lckV4cHJlc3Npb25TY29wZUlkZW50XztpZihiKXt2YXIgYz1hLnRlbXBsYXRlSW5zdGFuY2U/YS50ZW1wbGF0ZUluc3RhbmNlLm1vZGVsOmEubW9kZWw7cmV0dXJuIGZ1bmN0aW9uKGEpe3ZhciBkPU9iamVjdC5jcmVhdGUoYyk7cmV0dXJuIGRbYl09YSxkfX19fSxhLlBvbHltZXJFeHByZXNzaW9ucz1rfSh0aGlzKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKCl7ZXx8KGU9ITAsYS5lbmRPZk1pY3JvdGFzayhmdW5jdGlvbigpe2U9ITEsbG9nRmxhZ3MuZGF0YSYmY29uc29sZS5ncm91cCgiUGxhdGZvcm0uZmx1c2goKSIpLGEucGVyZm9ybU1pY3JvdGFza0NoZWNrcG9pbnQoKSxsb2dGbGFncy5kYXRhJiZjb25zb2xlLmdyb3VwRW5kKCl9KSl9dmFyIGM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3R5bGUiKTtjLnRleHRDb250ZW50PSJ0ZW1wbGF0ZSB7ZGlzcGxheTogbm9uZSAhaW1wb3J0YW50O30gLyogaW5qZWN0ZWQgYnkgcGxhdGZvcm0uanMgKi8iO3ZhciBkPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoImhlYWQiKTtkLmluc2VydEJlZm9yZShjLGQuZmlyc3RDaGlsZCk7dmFyIGUsZj0xMjU7d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoIldlYkNvbXBvbmVudHNSZWFkeSIsZnVuY3Rpb24oKXtiKCksT2JzZXJ2ZXIuaGFzT2JqZWN0T2JzZXJ2ZXx8KGEuZmx1c2hQb2xsPXNldEludGVydmFsKGIsZikpfSksYS5mbHVzaD1ifSh3aW5kb3cuUGxhdGZvcm0pLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7cmV0dXJuIGQoYSxpKX1mdW5jdGlvbiBjKGEpe3JldHVybiBkKGEsail9ZnVuY3Rpb24gZChhLGIpe3JldHVybiJsaW5rIj09PWEubG9jYWxOYW1lJiZhLmdldEF0dHJpYnV0ZSgicmVsIik9PT1ifWZ1bmN0aW9uIGUoYSl7cmV0dXJuInNjcmlwdCI9PT1hLmxvY2FsTmFtZX1mdW5jdGlvbiBmKGEsYil7dmFyIGM9YTtjIGluc3RhbmNlb2YgRG9jdW1lbnR8fChjPWRvY3VtZW50LmltcGxlbWVudGF0aW9uLmNyZWF0ZUhUTUxEb2N1bWVudChpKSksYy5fVVJMPWI7dmFyIGQ9Yy5jcmVhdGVFbGVtZW50KCJiYXNlIik7cmV0dXJuIGQuc2V0QXR0cmlidXRlKCJocmVmIixkb2N1bWVudC5iYXNlVVJJfHxkb2N1bWVudC5VUkwpLGMuaGVhZC5hcHBlbmRDaGlsZChkKSxhIGluc3RhbmNlb2YgRG9jdW1lbnR8fChjLmJvZHkuaW5uZXJIVE1MPWEpLHdpbmRvdy5IVE1MVGVtcGxhdGVFbGVtZW50JiZIVE1MVGVtcGxhdGVFbGVtZW50LmJvb3RzdHJhcCYmSFRNTFRlbXBsYXRlRWxlbWVudC5ib290c3RyYXAoYyksY31hfHwoYT13aW5kb3cuSFRNTEltcG9ydHM9e2ZsYWdzOnt9fSk7dmFyIGcsaD1hLnhocixpPSJpbXBvcnQiLGo9InN0eWxlc2hlZXQiLGs9e2RvY3VtZW50czp7fSxjYWNoZTp7fSxwcmVsb2FkU2VsZWN0b3JzOlsibGlua1tyZWw9IitpKyJdIiwiZWxlbWVudCBsaW5rW3JlbD0iK2orIl0iLCJ0ZW1wbGF0ZSIsInNjcmlwdFtzcmNdOm5vdChbdHlwZV0pIiwnc2NyaXB0W3NyY11bdHlwZT0idGV4dC9qYXZhc2NyaXB0Il0nXS5qb2luKCIsIiksbG9hZGVyOmZ1bmN0aW9uKGEpe3JldHVybiBnPW5ldyBsKGsubG9hZGVkLGEpLGcuY2FjaGU9ay5jYWNoZSxnfSxsb2FkOmZ1bmN0aW9uKGEsYil7Zz1rLmxvYWRlcihiKSxrLnByZWxvYWQoYSl9LHByZWxvYWQ6ZnVuY3Rpb24oYSl7dmFyIGI9YS5xdWVyeVNlbGVjdG9yQWxsKGsucHJlbG9hZFNlbGVjdG9ycyk7Yj10aGlzLmZpbHRlck1haW5Eb2N1bWVudE5vZGVzKGEsYiksYj10aGlzLmV4dHJhY3RUZW1wbGF0ZU5vZGVzKGIpLGcuYWRkTm9kZXMoYil9LGZpbHRlck1haW5Eb2N1bWVudE5vZGVzOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGE9PT1kb2N1bWVudCYmKGI9QXJyYXkucHJvdG90eXBlLmZpbHRlci5jYWxsKGIsZnVuY3Rpb24oYSl7cmV0dXJuIWUoYSl9KSksYn0sZXh0cmFjdFRlbXBsYXRlTm9kZXM6ZnVuY3Rpb24oYSl7dmFyIGI9W107cmV0dXJuIGE9QXJyYXkucHJvdG90eXBlLmZpbHRlci5jYWxsKGEsZnVuY3Rpb24oYSl7aWYoInRlbXBsYXRlIj09PWEubG9jYWxOYW1lKXtpZihhLmNvbnRlbnQpe3ZhciBjPWEuY29udGVudC5xdWVyeVNlbGVjdG9yQWxsKCJsaW5rW3JlbD0iK2orIl0iKTtjLmxlbmd0aCYmKGI9Yi5jb25jYXQoQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYywwKSkpfXJldHVybiExfXJldHVybiEwfSksYi5sZW5ndGgmJihhPWEuY29uY2F0KGIpKSxhfSxsb2FkZWQ6ZnVuY3Rpb24oYSxkLGUpe2lmKGIoZCkpe3ZhciBnPWsuZG9jdW1lbnRzW2FdO2d8fChnPWYoZSxhKSxwLnJlc29sdmVQYXRoc0luSFRNTChnKSxrLmRvY3VtZW50c1thXT1nLGsucHJlbG9hZChnKSksZC5pbXBvcnQ9e2hyZWY6YSxvd25lck5vZGU6ZCxjb250ZW50Omd9LGQuY29udGVudD1lPWd9ZC5fX3Jlc291cmNlPWUsYyhkKSYmcC5yZXNvbHZlUGF0aHNJblN0eWxlc2hlZXQoZCl9fSxsPWZ1bmN0aW9uKGEsYil7dGhpcy5vbmxvYWQ9YSx0aGlzLm9uY29tcGxldGU9Yix0aGlzLmluZmxpZ2h0PTAsdGhpcy5wZW5kaW5nPXt9LHRoaXMuY2FjaGU9e319O2wucHJvdG90eXBlPXthZGROb2RlczpmdW5jdGlvbihhKXt0aGlzLmluZmxpZ2h0Kz1hLmxlbmd0aCxxKGEsdGhpcy5yZXF1aXJlLHRoaXMpLHRoaXMuY2hlY2tEb25lKCl9LHJlcXVpcmU6ZnVuY3Rpb24oYSl7dmFyIGI9cC5ub2RlVXJsKGEpO2EuX19ub2RlVXJsPWIsdGhpcy5kZWR1cGUoYixhKXx8dGhpcy5mZXRjaChiLGEpfSxkZWR1cGU6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5wZW5kaW5nW2FdPyh0aGlzLnBlbmRpbmdbYV0ucHVzaChiKSwhMCk6dGhpcy5jYWNoZVthXT8odGhpcy5vbmxvYWQoYSxiLGcuY2FjaGVbYV0pLHRoaXMudGFpbCgpLCEwKToodGhpcy5wZW5kaW5nW2FdPVtiXSwhMSl9LGZldGNoOmZ1bmN0aW9uKGEsYil7dmFyIGM9ZnVuY3Rpb24oYyxkKXt0aGlzLnJlY2VpdmUoYSxiLGMsZCl9LmJpbmQodGhpcyk7aC5sb2FkKGEsYyl9LHJlY2VpdmU6ZnVuY3Rpb24oYSxiLGMsZCl7Y3x8KGcuY2FjaGVbYV09ZCksZy5wZW5kaW5nW2FdLmZvckVhY2goZnVuY3Rpb24oYil7Y3x8dGhpcy5vbmxvYWQoYSxiLGQpLHRoaXMudGFpbCgpfSx0aGlzKSxnLnBlbmRpbmdbYV09bnVsbH0sdGFpbDpmdW5jdGlvbigpey0tdGhpcy5pbmZsaWdodCx0aGlzLmNoZWNrRG9uZSgpfSxjaGVja0RvbmU6ZnVuY3Rpb24oKXt0aGlzLmluZmxpZ2h0fHx0aGlzLm9uY29tcGxldGUoKX19O3ZhciBtPVsiaHJlZiIsInNyYyIsImFjdGlvbiJdLG49IlsiK20uam9pbigiXSxbIikrIl0iLG89Int7Lip9fSIscD17bm9kZVVybDpmdW5jdGlvbihhKXtyZXR1cm4gcC5yZXNvbHZlVXJsKHAuZG9jdW1lbnRVUkwscC5ocmVmT3JTcmMoYSkpfSxocmVmT3JTcmM6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuZ2V0QXR0cmlidXRlKCJocmVmIil8fGEuZ2V0QXR0cmlidXRlKCJzcmMiKX0sZG9jdW1lbnRVcmxGcm9tTm9kZTpmdW5jdGlvbihhKXtyZXR1cm4gcC5nZXREb2N1bWVudFVybChhLm93bmVyRG9jdW1lbnR8fGEpfSxnZXREb2N1bWVudFVybDpmdW5jdGlvbihhKXt2YXIgYj1hJiYoYS5fVVJMfHxhLmltcGwmJmEuaW1wbC5fVVJMfHxhLmJhc2VVUkl8fGEuVVJMKXx8IiI7cmV0dXJuIGIuc3BsaXQoIiMiKVswXX0scmVzb2x2ZVVybDpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLmlzQWJzVXJsKGIpP2I6dGhpcy5jb21wcmVzc1VybCh0aGlzLnVybFRvUGF0aChhKStiKX0scmVzb2x2ZVJlbGF0aXZlVXJsOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuaXNBYnNVcmwoYik/Yjp0aGlzLm1ha2VEb2N1bWVudFJlbFBhdGgodGhpcy5yZXNvbHZlVXJsKGEsYikpfSxpc0Fic1VybDpmdW5jdGlvbihhKXtyZXR1cm4vKF5kYXRhOil8KF5odHRwW3NdPzopfCheXC8pLy50ZXN0KGEpfSx1cmxUb1BhdGg6ZnVuY3Rpb24oYSl7dmFyIGI9YS5zcGxpdCgiLyIpO3JldHVybiBiLnBvcCgpLGIucHVzaCgiIiksYi5qb2luKCIvIil9LGNvbXByZXNzVXJsOmZ1bmN0aW9uKGEpe3ZhciBiPSIiLGM9YS5pbmRleE9mKCI/Iik7Yz4tMSYmKGI9YS5zdWJzdHJpbmcoYyksYT1hLnN1YnN0cmluZyhjLDApKTtmb3IodmFyIGQsZT1hLnNwbGl0KCIvIiksZj0wO2Y8ZS5sZW5ndGg7ZisrKWQ9ZVtmXSwiLi4iPT09ZCYmKGUuc3BsaWNlKGYtMSwyKSxmLT0yKTtyZXR1cm4gZS5qb2luKCIvIikrYn0sbWFrZURvY3VtZW50UmVsUGF0aDpmdW5jdGlvbihhKXtyZXR1cm4gcC51cmxFbHQuaHJlZj1hLCFwLnVybEVsdC5ob3N0fHxwLnVybEVsdC5ob3N0PT09d2luZG93LmxvY2F0aW9uLmhvc3QmJnAudXJsRWx0LnByb3RvY29sPT09d2luZG93LmxvY2F0aW9uLnByb3RvY29sP3RoaXMubWFrZVJlbFBhdGgocC5kb2N1bWVudFVSTCxwLnVybEVsdC5ocmVmKTphfSxtYWtlUmVsUGF0aDpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz1hLnNwbGl0KCIvIiksZD1iLnNwbGl0KCIvIik7Yy5sZW5ndGgmJmNbMF09PT1kWzBdOyljLnNoaWZ0KCksZC5zaGlmdCgpO2Zvcih2YXIgZT0wLGY9Yy5sZW5ndGgtMTtmPmU7ZSsrKWQudW5zaGlmdCgiLi4iKTt2YXIgZz1kLmpvaW4oIi8iKTtyZXR1cm4gZ30scmVzb2x2ZVBhdGhzSW5IVE1MOmZ1bmN0aW9uKGEsYil7Yj1ifHxwLmRvY3VtZW50VXJsRnJvbU5vZGUoYSkscC5yZXNvbHZlQXR0cmlidXRlcyhhLGIpLHAucmVzb2x2ZVN0eWxlRWx0cyhhLGIpO3ZhciBjPWEucXVlcnlTZWxlY3RvckFsbCgidGVtcGxhdGUiKTtjJiZxKGMsZnVuY3Rpb24oYSl7YS5jb250ZW50JiZwLnJlc29sdmVQYXRoc0luSFRNTChhLmNvbnRlbnQsYil9KX0scmVzb2x2ZVBhdGhzSW5TdHlsZXNoZWV0OmZ1bmN0aW9uKGEpe3ZhciBiPXAubm9kZVVybChhKTthLl9fcmVzb3VyY2U9cC5yZXNvbHZlQ3NzVGV4dChhLl9fcmVzb3VyY2UsYil9LHJlc29sdmVTdHlsZUVsdHM6ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLnF1ZXJ5U2VsZWN0b3JBbGwoInN0eWxlIik7YyYmcShjLGZ1bmN0aW9uKGEpe2EudGV4dENvbnRlbnQ9cC5yZXNvbHZlQ3NzVGV4dChhLnRleHRDb250ZW50LGIpfSl9LHJlc29sdmVDc3NUZXh0OmZ1bmN0aW9uKGEsYil7cmV0dXJuIGEucmVwbGFjZSgvdXJsXChbXildKlwpL2csZnVuY3Rpb24oYSl7dmFyIGM9YS5yZXBsYWNlKC9bIiddL2csIiIpLnNsaWNlKDQsLTEpO3JldHVybiBjPXAucmVzb2x2ZVJlbGF0aXZlVXJsKGIsYyksInVybCgiK2MrIikifSl9LHJlc29sdmVBdHRyaWJ1dGVzOmZ1bmN0aW9uKGEsYil7dmFyIGM9YSYmYS5xdWVyeVNlbGVjdG9yQWxsKG4pO2MmJnEoYyxmdW5jdGlvbihhKXt0aGlzLnJlc29sdmVOb2RlQXR0cmlidXRlcyhhLGIpfSx0aGlzKX0scmVzb2x2ZU5vZGVBdHRyaWJ1dGVzOmZ1bmN0aW9uKGEsYil7bS5mb3JFYWNoKGZ1bmN0aW9uKGMpe3ZhciBkPWEuYXR0cmlidXRlc1tjXTtpZihkJiZkLnZhbHVlJiZkLnZhbHVlLnNlYXJjaChvKTwwKXt2YXIgZT1wLnJlc29sdmVSZWxhdGl2ZVVybChiLGQudmFsdWUpO2QudmFsdWU9ZX19KX19O3AuZG9jdW1lbnRVUkw9cC5nZXREb2N1bWVudFVybChkb2N1bWVudCkscC51cmxFbHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYSIpLGg9aHx8e2FzeW5jOiEwLG9rOmZ1bmN0aW9uKGEpe3JldHVybiBhLnN0YXR1cz49MjAwJiZhLnN0YXR1czwzMDB8fDMwND09PWEuc3RhdHVzfHwwPT09YS5zdGF0dXN9LGxvYWQ6ZnVuY3Rpb24oYixjLGQpe3ZhciBlPW5ldyBYTUxIdHRwUmVxdWVzdDtyZXR1cm4oYS5mbGFncy5kZWJ1Z3x8YS5mbGFncy5idXN0KSYmKGIrPSI/IitNYXRoLnJhbmRvbSgpKSxlLm9wZW4oIkdFVCIsYixoLmFzeW5jKSxlLmFkZEV2ZW50TGlzdGVuZXIoInJlYWR5c3RhdGVjaGFuZ2UiLGZ1bmN0aW9uKCl7ND09PWUucmVhZHlTdGF0ZSYmYy5jYWxsKGQsIWgub2soZSkmJmUsZS5yZXNwb25zZXx8ZS5yZXNwb25zZVRleHQsYil9KSxlLnNlbmQoKSxlfSxsb2FkRG9jdW1lbnQ6ZnVuY3Rpb24oYSxiLGMpe3RoaXMubG9hZChhLGIsYykucmVzcG9uc2VUeXBlPSJkb2N1bWVudCJ9fTt2YXIgcT1BcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsLmJpbmQoQXJyYXkucHJvdG90eXBlLmZvckVhY2gpO2EucGF0aD1wLGEueGhyPWgsYS5pbXBvcnRlcj1rLGEuZ2V0RG9jdW1lbnRVcmw9cC5nZXREb2N1bWVudFVybCxhLklNUE9SVF9MSU5LX1RZUEU9aX0od2luZG93LkhUTUxJbXBvcnRzKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEpe3JldHVybiJsaW5rIj09PWEubG9jYWxOYW1lJiZhLmdldEF0dHJpYnV0ZSgicmVsIik9PT1mfWZ1bmN0aW9uIGMoYSl7cmV0dXJuIGEucGFyZW50Tm9kZSYmIWQoYSkmJiFlKGEpfWZ1bmN0aW9uIGQoYSl7cmV0dXJuIGEub3duZXJEb2N1bWVudD09PWRvY3VtZW50fHxhLm93bmVyRG9jdW1lbnQuaW1wbD09PWRvY3VtZW50fWZ1bmN0aW9uIGUoYSl7cmV0dXJuIGEucGFyZW50Tm9kZSYmImVsZW1lbnQiPT09YS5wYXJlbnROb2RlLmxvY2FsTmFtZX12YXIgZj0iaW1wb3J0IixnPXtzZWxlY3RvcnM6WyJsaW5rW3JlbD0iK2YrIl0iLCJsaW5rW3JlbD1zdHlsZXNoZWV0XSIsInN0eWxlIiwic2NyaXB0Om5vdChbdHlwZV0pIiwnc2NyaXB0W3R5cGU9InRleHQvamF2YXNjcmlwdCJdJ10sbWFwOntsaW5rOiJwYXJzZUxpbmsiLHNjcmlwdDoicGFyc2VTY3JpcHQiLHN0eWxlOiJwYXJzZUdlbmVyaWMifSxwYXJzZTpmdW5jdGlvbihhKXtpZighYS5fX2ltcG9ydFBhcnNlZCl7YS5fX2ltcG9ydFBhcnNlZD0hMDt2YXIgYj1hLnF1ZXJ5U2VsZWN0b3JBbGwoZy5zZWxlY3RvcnMpO2goYixmdW5jdGlvbihhKXtnW2cubWFwW2EubG9jYWxOYW1lXV0oYSl9KX19LHBhcnNlTGluazpmdW5jdGlvbihhKXtiKGEpP2EuY29udGVudCYmZy5wYXJzZShhLmNvbnRlbnQpOnRoaXMucGFyc2VHZW5lcmljKGEpfSxwYXJzZUdlbmVyaWM6ZnVuY3Rpb24oYSl7YyhhKSYmZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChhKX0scGFyc2VTY3JpcHQ6ZnVuY3Rpb24oYil7aWYoYyhiKSl7dmFyIGQ9KGIuX19yZXNvdXJjZXx8Yi50ZXh0Q29udGVudCkudHJpbSgpO2lmKGQpe3ZhciBlPWIuX19ub2RlVXJsO2lmKCFlKXt2YXIgZT1hLnBhdGguZG9jdW1lbnRVcmxGcm9tTm9kZShiKSxmPSJbIitNYXRoLmZsb29yKDFlMyooTWF0aC5yYW5kb20oKSsxKSkrIl0iLGc9ZC5tYXRjaCgvUG9seW1lclwoWyciXShbXiciXSopLyk7Zj1nJiZnWzFdfHxmLGUrPSIvIitmKyIuanMifWQrPSJcbi8vIyBzb3VyY2VVUkw9IitlKyJcbiIsZXZhbC5jYWxsKHdpbmRvdyxkKX19fX0saD1BcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsLmJpbmQoQXJyYXkucHJvdG90eXBlLmZvckVhY2gpO2EucGFyc2VyPWd9KEhUTUxJbXBvcnRzKSxmdW5jdGlvbigpe2Z1bmN0aW9uIGEoKXtIVE1MSW1wb3J0cy5pbXBvcnRlci5sb2FkKGRvY3VtZW50LGZ1bmN0aW9uKCl7SFRNTEltcG9ydHMucGFyc2VyLnBhcnNlKGRvY3VtZW50KSxIVE1MSW1wb3J0cy5yZWFkeT0hMCxIVE1MSW1wb3J0cy5yZWFkeVRpbWU9KG5ldyBEYXRlKS5nZXRUaW1lKCksZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoIkhUTUxJbXBvcnRzTG9hZGVkIix7YnViYmxlczohMH0pKX0pfSJmdW5jdGlvbiIhPXR5cGVvZiB3aW5kb3cuQ3VzdG9tRXZlbnQmJih3aW5kb3cuQ3VzdG9tRXZlbnQ9ZnVuY3Rpb24oYSl7dmFyIGI9ZG9jdW1lbnQuY3JlYXRlRXZlbnQoIkhUTUxFdmVudHMiKTtyZXR1cm4gYi5pbml0RXZlbnQoYSwhMCwhMCksYn0pLCJjb21wbGV0ZSI9PT1kb2N1bWVudC5yZWFkeVN0YXRlfHwiaW50ZXJhY3RpdmUiPT09ZG9jdW1lbnQucmVhZHlTdGF0ZSYmIXdpbmRvdy5hdHRhY2hFdmVudD9hKCk6d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoIkRPTUNvbnRlbnRMb2FkZWQiLGEpfSgpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7dS5wdXNoKGEpLHR8fCh0PSEwLHEoZCkpfWZ1bmN0aW9uIGMoYSl7cmV0dXJuIHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCYmd2luZG93LlNoYWRvd0RPTVBvbHlmaWxsLndyYXBJZk5lZWRlZChhKXx8YX1mdW5jdGlvbiBkKCl7dD0hMTt2YXIgYT11O3U9W10sYS5zb3J0KGZ1bmN0aW9uKGEsYil7cmV0dXJuIGEudWlkXy1iLnVpZF99KTt2YXIgYj0hMTthLmZvckVhY2goZnVuY3Rpb24oYSl7dmFyIGM9YS50YWtlUmVjb3JkcygpO2UoYSksYy5sZW5ndGgmJihhLmNhbGxiYWNrXyhjLGEpLGI9ITApfSksYiYmZCgpfWZ1bmN0aW9uIGUoYSl7YS5ub2Rlc18uZm9yRWFjaChmdW5jdGlvbihiKXt2YXIgYz1wLmdldChiKTtjJiZjLmZvckVhY2goZnVuY3Rpb24oYil7Yi5vYnNlcnZlcj09PWEmJmIucmVtb3ZlVHJhbnNpZW50T2JzZXJ2ZXJzKCl9KX0pfWZ1bmN0aW9uIGYoYSxiKXtmb3IodmFyIGM9YTtjO2M9Yy5wYXJlbnROb2RlKXt2YXIgZD1wLmdldChjKTtpZihkKWZvcih2YXIgZT0wO2U8ZC5sZW5ndGg7ZSsrKXt2YXIgZj1kW2VdLGc9Zi5vcHRpb25zO2lmKGM9PT1hfHxnLnN1YnRyZWUpe3ZhciBoPWIoZyk7aCYmZi5lbnF1ZXVlKGgpfX19fWZ1bmN0aW9uIGcoYSl7dGhpcy5jYWxsYmFja189YSx0aGlzLm5vZGVzXz1bXSx0aGlzLnJlY29yZHNfPVtdLHRoaXMudWlkXz0rK3Z9ZnVuY3Rpb24gaChhLGIpe3RoaXMudHlwZT1hLHRoaXMudGFyZ2V0PWIsdGhpcy5hZGRlZE5vZGVzPVtdLHRoaXMucmVtb3ZlZE5vZGVzPVtdLHRoaXMucHJldmlvdXNTaWJsaW5nPW51bGwsdGhpcy5uZXh0U2libGluZz1udWxsLHRoaXMuYXR0cmlidXRlTmFtZT1udWxsLHRoaXMuYXR0cmlidXRlTmFtZXNwYWNlPW51bGwsdGhpcy5vbGRWYWx1ZT1udWxsfWZ1bmN0aW9uIGkoYSl7dmFyIGI9bmV3IGgoYS50eXBlLGEudGFyZ2V0KTtyZXR1cm4gYi5hZGRlZE5vZGVzPWEuYWRkZWROb2Rlcy5zbGljZSgpLGIucmVtb3ZlZE5vZGVzPWEucmVtb3ZlZE5vZGVzLnNsaWNlKCksYi5wcmV2aW91c1NpYmxpbmc9YS5wcmV2aW91c1NpYmxpbmcsYi5uZXh0U2libGluZz1hLm5leHRTaWJsaW5nLGIuYXR0cmlidXRlTmFtZT1hLmF0dHJpYnV0ZU5hbWUsYi5hdHRyaWJ1dGVOYW1lc3BhY2U9YS5hdHRyaWJ1dGVOYW1lc3BhY2UsYi5vbGRWYWx1ZT1hLm9sZFZhbHVlLGJ9ZnVuY3Rpb24gaihhLGIpe3JldHVybiB3PW5ldyBoKGEsYil9ZnVuY3Rpb24gayhhKXtyZXR1cm4geD94Oih4PWkodykseC5vbGRWYWx1ZT1hLHgpfWZ1bmN0aW9uIGwoKXt3PXg9dm9pZCAwfWZ1bmN0aW9uIG0oYSl7cmV0dXJuIGE9PT14fHxhPT09d31mdW5jdGlvbiBuKGEsYil7cmV0dXJuIGE9PT1iP2E6eCYmbShhKT94Om51bGx9ZnVuY3Rpb24gbyhhLGIsYyl7dGhpcy5vYnNlcnZlcj1hLHRoaXMudGFyZ2V0PWIsdGhpcy5vcHRpb25zPWMsdGhpcy50cmFuc2llbnRPYnNlcnZlZE5vZGVzPVtdfXZhciBwPW5ldyBXZWFrTWFwLHE9d2luZG93Lm1zU2V0SW1tZWRpYXRlO2lmKCFxKXt2YXIgcj1bXSxzPVN0cmluZyhNYXRoLnJhbmRvbSgpKTt3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsZnVuY3Rpb24oYSl7aWYoYS5kYXRhPT09cyl7dmFyIGI9cjtyPVtdLGIuZm9yRWFjaChmdW5jdGlvbihhKXthKCl9KX19KSxxPWZ1bmN0aW9uKGEpe3IucHVzaChhKSx3aW5kb3cucG9zdE1lc3NhZ2UocywiKiIpfX12YXIgdD0hMSx1PVtdLHY9MDtnLnByb3RvdHlwZT17b2JzZXJ2ZTpmdW5jdGlvbihhLGIpe2lmKGE9YyhhKSwhYi5jaGlsZExpc3QmJiFiLmF0dHJpYnV0ZXMmJiFiLmNoYXJhY3RlckRhdGF8fGIuYXR0cmlidXRlT2xkVmFsdWUmJiFiLmF0dHJpYnV0ZXN8fGIuYXR0cmlidXRlRmlsdGVyJiZiLmF0dHJpYnV0ZUZpbHRlci5sZW5ndGgmJiFiLmF0dHJpYnV0ZXN8fGIuY2hhcmFjdGVyRGF0YU9sZFZhbHVlJiYhYi5jaGFyYWN0ZXJEYXRhKXRocm93IG5ldyBTeW50YXhFcnJvcjt2YXIgZD1wLmdldChhKTtkfHxwLnNldChhLGQ9W10pO2Zvcih2YXIgZSxmPTA7ZjxkLmxlbmd0aDtmKyspaWYoZFtmXS5vYnNlcnZlcj09PXRoaXMpe2U9ZFtmXSxlLnJlbW92ZUxpc3RlbmVycygpLGUub3B0aW9ucz1iO2JyZWFrfWV8fChlPW5ldyBvKHRoaXMsYSxiKSxkLnB1c2goZSksdGhpcy5ub2Rlc18ucHVzaChhKSksZS5hZGRMaXN0ZW5lcnMoKX0sZGlzY29ubmVjdDpmdW5jdGlvbigpe3RoaXMubm9kZXNfLmZvckVhY2goZnVuY3Rpb24oYSl7Zm9yKHZhciBiPXAuZ2V0KGEpLGM9MDtjPGIubGVuZ3RoO2MrKyl7dmFyIGQ9YltjXTtpZihkLm9ic2VydmVyPT09dGhpcyl7ZC5yZW1vdmVMaXN0ZW5lcnMoKSxiLnNwbGljZShjLDEpO2JyZWFrfX19LHRoaXMpLHRoaXMucmVjb3Jkc189W119LHRha2VSZWNvcmRzOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5yZWNvcmRzXztyZXR1cm4gdGhpcy5yZWNvcmRzXz1bXSxhfX07dmFyIHcseDtvLnByb3RvdHlwZT17ZW5xdWV1ZTpmdW5jdGlvbihhKXt2YXIgYz10aGlzLm9ic2VydmVyLnJlY29yZHNfLGQ9Yy5sZW5ndGg7aWYoYy5sZW5ndGg+MCl7dmFyIGU9Y1tkLTFdLGY9bihlLGEpO2lmKGYpcmV0dXJuIGNbZC0xXT1mLHZvaWQgMH1lbHNlIGIodGhpcy5vYnNlcnZlcik7Y1tkXT1hfSxhZGRMaXN0ZW5lcnM6ZnVuY3Rpb24oKXt0aGlzLmFkZExpc3RlbmVyc18odGhpcy50YXJnZXQpfSxhZGRMaXN0ZW5lcnNfOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMub3B0aW9ucztiLmF0dHJpYnV0ZXMmJmEuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQXR0ck1vZGlmaWVkIix0aGlzLCEwKSxiLmNoYXJhY3RlckRhdGEmJmEuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ2hhcmFjdGVyRGF0YU1vZGlmaWVkIix0aGlzLCEwKSxiLmNoaWxkTGlzdCYmYS5hZGRFdmVudExpc3RlbmVyKCJET01Ob2RlSW5zZXJ0ZWQiLHRoaXMsITApLChiLmNoaWxkTGlzdHx8Yi5zdWJ0cmVlKSYmYS5hZGRFdmVudExpc3RlbmVyKCJET01Ob2RlUmVtb3ZlZCIsdGhpcywhMCl9LHJlbW92ZUxpc3RlbmVyczpmdW5jdGlvbigpe3RoaXMucmVtb3ZlTGlzdGVuZXJzXyh0aGlzLnRhcmdldCl9LHJlbW92ZUxpc3RlbmVyc186ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5vcHRpb25zO2IuYXR0cmlidXRlcyYmYS5yZW1vdmVFdmVudExpc3RlbmVyKCJET01BdHRyTW9kaWZpZWQiLHRoaXMsITApLGIuY2hhcmFjdGVyRGF0YSYmYS5yZW1vdmVFdmVudExpc3RlbmVyKCJET01DaGFyYWN0ZXJEYXRhTW9kaWZpZWQiLHRoaXMsITApLGIuY2hpbGRMaXN0JiZhLnJlbW92ZUV2ZW50TGlzdGVuZXIoIkRPTU5vZGVJbnNlcnRlZCIsdGhpcywhMCksKGIuY2hpbGRMaXN0fHxiLnN1YnRyZWUpJiZhLnJlbW92ZUV2ZW50TGlzdGVuZXIoIkRPTU5vZGVSZW1vdmVkIix0aGlzLCEwKX0sYWRkVHJhbnNpZW50T2JzZXJ2ZXI6ZnVuY3Rpb24oYSl7aWYoYSE9PXRoaXMudGFyZ2V0KXt0aGlzLmFkZExpc3RlbmVyc18oYSksdGhpcy50cmFuc2llbnRPYnNlcnZlZE5vZGVzLnB1c2goYSk7dmFyIGI9cC5nZXQoYSk7Ynx8cC5zZXQoYSxiPVtdKSxiLnB1c2godGhpcyl9fSxyZW1vdmVUcmFuc2llbnRPYnNlcnZlcnM6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnRyYW5zaWVudE9ic2VydmVkTm9kZXM7dGhpcy50cmFuc2llbnRPYnNlcnZlZE5vZGVzPVtdLGEuZm9yRWFjaChmdW5jdGlvbihhKXt0aGlzLnJlbW92ZUxpc3RlbmVyc18oYSk7Zm9yKHZhciBiPXAuZ2V0KGEpLGM9MDtjPGIubGVuZ3RoO2MrKylpZihiW2NdPT09dGhpcyl7Yi5zcGxpY2UoYywxKTticmVha319LHRoaXMpfSxoYW5kbGVFdmVudDpmdW5jdGlvbihhKXtzd2l0Y2goYS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKSxhLnR5cGUpe2Nhc2UiRE9NQXR0ck1vZGlmaWVkIjp2YXIgYj1hLmF0dHJOYW1lLGM9YS5yZWxhdGVkTm9kZS5uYW1lc3BhY2VVUkksZD1hLnRhcmdldCxlPW5ldyBqKCJhdHRyaWJ1dGVzIixkKTtlLmF0dHJpYnV0ZU5hbWU9YixlLmF0dHJpYnV0ZU5hbWVzcGFjZT1jO3ZhciBnPWEuYXR0ckNoYW5nZT09PU11dGF0aW9uRXZlbnQuQURESVRJT04/bnVsbDphLnByZXZWYWx1ZTtmKGQsZnVuY3Rpb24oYSl7cmV0dXJuIWEuYXR0cmlidXRlc3x8YS5hdHRyaWJ1dGVGaWx0ZXImJmEuYXR0cmlidXRlRmlsdGVyLmxlbmd0aCYmLTE9PT1hLmF0dHJpYnV0ZUZpbHRlci5pbmRleE9mKGIpJiYtMT09PWEuYXR0cmlidXRlRmlsdGVyLmluZGV4T2YoYyk/dm9pZCAwOmEuYXR0cmlidXRlT2xkVmFsdWU/ayhnKTplfSk7YnJlYWs7Y2FzZSJET01DaGFyYWN0ZXJEYXRhTW9kaWZpZWQiOnZhciBkPWEudGFyZ2V0LGU9aigiY2hhcmFjdGVyRGF0YSIsZCksZz1hLnByZXZWYWx1ZTtmKGQsZnVuY3Rpb24oYSl7cmV0dXJuIGEuY2hhcmFjdGVyRGF0YT9hLmNoYXJhY3RlckRhdGFPbGRWYWx1ZT9rKGcpOmU6dm9pZCAwfSk7YnJlYWs7Y2FzZSJET01Ob2RlUmVtb3ZlZCI6dGhpcy5hZGRUcmFuc2llbnRPYnNlcnZlcihhLnRhcmdldCk7Y2FzZSJET01Ob2RlSW5zZXJ0ZWQiOnZhciBoLGksZD1hLnJlbGF0ZWROb2RlLG09YS50YXJnZXQ7IkRPTU5vZGVJbnNlcnRlZCI9PT1hLnR5cGU/KGg9W21dLGk9W10pOihoPVtdLGk9W21dKTt2YXIgbj1tLnByZXZpb3VzU2libGluZyxvPW0ubmV4dFNpYmxpbmcsZT1qKCJjaGlsZExpc3QiLGQpO2UuYWRkZWROb2Rlcz1oLGUucmVtb3ZlZE5vZGVzPWksZS5wcmV2aW91c1NpYmxpbmc9bixlLm5leHRTaWJsaW5nPW8sZihkLGZ1bmN0aW9uKGEpe3JldHVybiBhLmNoaWxkTGlzdD9lOnZvaWQgMH0pfWwoKX19LGEuSnNNdXRhdGlvbk9ic2VydmVyPWcsIWEuTXV0YXRpb25PYnNlcnZlciYmYS5XZWJLaXRNdXRhdGlvbk9ic2VydmVyJiYoYS5NdXRhdGlvbk9ic2VydmVyPWEuV2ViS2l0TXV0YXRpb25PYnNlcnZlciksYS5NdXRhdGlvbk9ic2VydmVyfHwoYS5NdXRhdGlvbk9ic2VydmVyPWcpfSh0aGlzKSx3aW5kb3cuQ3VzdG9tRWxlbWVudHM9e2ZsYWdzOnt9fSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEsYyxkKXt2YXIgZT1hLmZpcnN0RWxlbWVudENoaWxkO2lmKCFlKWZvcihlPWEuZmlyc3RDaGlsZDtlJiZlLm5vZGVUeXBlIT09Tm9kZS5FTEVNRU5UX05PREU7KWU9ZS5uZXh0U2libGluZztmb3IoO2U7KWMoZSxkKSE9PSEwJiZiKGUsYyxkKSxlPWUubmV4dEVsZW1lbnRTaWJsaW5nO3JldHVybiBudWxsfWZ1bmN0aW9uIGMoYSxiKXtmb3IodmFyIGM9YS5zaGFkb3dSb290O2M7KWQoYyxiKSxjPWMub2xkZXJTaGFkb3dSb290fWZ1bmN0aW9uIGQoYSxkKXtiKGEsZnVuY3Rpb24oYSl7cmV0dXJuIGQoYSk/ITA6KGMoYSxkKSx2b2lkIDApfSksYyhhLGQpfWZ1bmN0aW9uIGUoYSl7cmV0dXJuIGgoYSk/KGkoYSksITApOihsKGEpLHZvaWQgMCl9ZnVuY3Rpb24gZihhKXtkKGEsZnVuY3Rpb24oYSl7cmV0dXJuIGUoYSk/ITA6dm9pZCAwfSl9ZnVuY3Rpb24gZyhhKXtyZXR1cm4gZShhKXx8ZihhKX1mdW5jdGlvbiBoKGIpe2lmKCFiLl9fdXBncmFkZWRfXyYmYi5ub2RlVHlwZT09PU5vZGUuRUxFTUVOVF9OT0RFKXt2YXIgYz1iLmdldEF0dHJpYnV0ZSgiaXMiKXx8Yi5sb2NhbE5hbWUsZD1hLnJlZ2lzdHJ5W2NdO2lmKGQpcmV0dXJuIHkuZG9tJiZjb25zb2xlLmdyb3VwKCJ1cGdyYWRlOiIsYi5sb2NhbE5hbWUpLGEudXBncmFkZShiKSx5LmRvbSYmY29uc29sZS5ncm91cEVuZCgpLCEwfX1mdW5jdGlvbiBpKGEpe2woYSkscShhKSYmZChhLGZ1bmN0aW9uKGEpe2woYSl9KX1mdW5jdGlvbiBqKGEpe2lmKEIucHVzaChhKSwhQSl7QT0hMDt2YXIgYj13aW5kb3cuUGxhdGZvcm0mJndpbmRvdy5QbGF0Zm9ybS5lbmRPZk1pY3JvdGFza3x8c2V0VGltZW91dDtiKGspfX1mdW5jdGlvbiBrKCl7QT0hMTtmb3IodmFyIGEsYj1CLGM9MCxkPWIubGVuZ3RoO2Q+YyYmKGE9YltjXSk7YysrKWEoKTtCPVtdfWZ1bmN0aW9uIGwoYSl7ej9qKGZ1bmN0aW9uKCl7bShhKX0pOm0oYSl9ZnVuY3Rpb24gbShhKXsoYS5lbnRlcmVkVmlld0NhbGxiYWNrfHxhLl9fdXBncmFkZWRfXyYmeS5kb20pJiYoeS5kb20mJmNvbnNvbGUuZ3JvdXAoImluc2VydGVkOiIsYS5sb2NhbE5hbWUpLHEoYSkmJihhLl9faW5zZXJ0ZWQ9KGEuX19pbnNlcnRlZHx8MCkrMSxhLl9faW5zZXJ0ZWQ8MSYmKGEuX19pbnNlcnRlZD0xKSxhLl9faW5zZXJ0ZWQ+MT95LmRvbSYmY29uc29sZS53YXJuKCJpbnNlcnRlZDoiLGEubG9jYWxOYW1lLCJpbnNlcnQvcmVtb3ZlIGNvdW50OiIsYS5fX2luc2VydGVkKTphLmVudGVyZWRWaWV3Q2FsbGJhY2smJih5LmRvbSYmY29uc29sZS5sb2coImluc2VydGVkOiIsYS5sb2NhbE5hbWUpLGEuZW50ZXJlZFZpZXdDYWxsYmFjaygpKSkseS5kb20mJmNvbnNvbGUuZ3JvdXBFbmQoKSl9ZnVuY3Rpb24gbihhKXtvKGEpLGQoYSxmdW5jdGlvbihhKXtvKGEpfSl9ZnVuY3Rpb24gbyhhKXt6P2ooZnVuY3Rpb24oKXtwKGEpfSk6cChhKX1mdW5jdGlvbiBwKGEpeyhhLmxlZnRWaWV3Q2FsbGJhY2t8fGEuX191cGdyYWRlZF9fJiZ5LmRvbSkmJih5LmRvbSYmY29uc29sZS5sb2coInJlbW92ZWQ6IixhLmxvY2FsTmFtZSkscShhKXx8KGEuX19pbnNlcnRlZD0oYS5fX2luc2VydGVkfHwwKS0xLGEuX19pbnNlcnRlZD4wJiYoYS5fX2luc2VydGVkPTApLGEuX19pbnNlcnRlZDwwP3kuZG9tJiZjb25zb2xlLndhcm4oInJlbW92ZWQ6IixhLmxvY2FsTmFtZSwiaW5zZXJ0L3JlbW92ZSBjb3VudDoiLGEuX19pbnNlcnRlZCk6YS5sZWZ0Vmlld0NhbGxiYWNrJiZhLmxlZnRWaWV3Q2FsbGJhY2soKSkpfWZ1bmN0aW9uIHEoYSl7Zm9yKHZhciBiPWEsYz13aW5kb3cuU2hhZG93RE9NUG9seWZpbGwmJndpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbC53cmFwSWZOZWVkZWQoZG9jdW1lbnQpfHxkb2N1bWVudDtiOyl7aWYoYj09YylyZXR1cm4hMDtiPWIucGFyZW50Tm9kZXx8Yi5ob3N0fX1mdW5jdGlvbiByKGEpe2lmKGEuc2hhZG93Um9vdCYmIWEuc2hhZG93Um9vdC5fX3dhdGNoZWQpe3kuZG9tJiZjb25zb2xlLmxvZygid2F0Y2hpbmcgc2hhZG93LXJvb3QgZm9yOiAiLGEubG9jYWxOYW1lKTtmb3IodmFyIGI9YS5zaGFkb3dSb290O2I7KXMoYiksYj1iLm9sZGVyU2hhZG93Um9vdH19ZnVuY3Rpb24gcyhhKXthLl9fd2F0Y2hlZHx8KHYoYSksYS5fX3dhdGNoZWQ9ITApfWZ1bmN0aW9uIHQoYSl7aWYoeS5kb20pe3ZhciBiPWFbMF07aWYoYiYmImNoaWxkTGlzdCI9PT1iLnR5cGUmJmIuYWRkZWROb2RlcyYmYi5hZGRlZE5vZGVzKXtmb3IodmFyIGM9Yi5hZGRlZE5vZGVzWzBdO2MmJmMhPT1kb2N1bWVudCYmIWMuaG9zdDspYz1jLnBhcmVudE5vZGU7dmFyIGQ9YyYmKGMuVVJMfHxjLl9VUkx8fGMuaG9zdCYmYy5ob3N0LmxvY2FsTmFtZSl8fCIiO2Q9ZC5zcGxpdCgiLz8iKS5zaGlmdCgpLnNwbGl0KCIvIikucG9wKCl9Y29uc29sZS5ncm91cCgibXV0YXRpb25zICglZCkgWyVzXSIsYS5sZW5ndGgsZHx8IiIpfWEuZm9yRWFjaChmdW5jdGlvbihhKXsiY2hpbGRMaXN0Ij09PWEudHlwZSYmKEQoYS5hZGRlZE5vZGVzLGZ1bmN0aW9uKGEpe2EubG9jYWxOYW1lJiZnKGEpfSksRChhLnJlbW92ZWROb2RlcyxmdW5jdGlvbihhKXthLmxvY2FsTmFtZSYmbihhKX0pKX0pLHkuZG9tJiZjb25zb2xlLmdyb3VwRW5kKCl9ZnVuY3Rpb24gdSgpe3QoQy50YWtlUmVjb3JkcygpKSxrKCl9ZnVuY3Rpb24gdihhKXtDLm9ic2VydmUoYSx7Y2hpbGRMaXN0OiEwLHN1YnRyZWU6ITB9KX1mdW5jdGlvbiB3KGEpe3YoYSl9ZnVuY3Rpb24geChhKXt5LmRvbSYmY29uc29sZS5ncm91cCgidXBncmFkZURvY3VtZW50OiAiLChhLlVSTHx8YS5fVVJMfHwiIikuc3BsaXQoIi8iKS5wb3AoKSksZyhhKSx5LmRvbSYmY29uc29sZS5ncm91cEVuZCgpfXZhciB5PXdpbmRvdy5sb2dGbGFnc3x8e30sej0hd2luZG93Lk11dGF0aW9uT2JzZXJ2ZXJ8fHdpbmRvdy5NdXRhdGlvbk9ic2VydmVyPT09d2luZG93LkpzTXV0YXRpb25PYnNlcnZlcjthLmhhc1BvbHlmaWxsTXV0YXRpb25zPXo7dmFyIEE9ITEsQj1bXSxDPW5ldyBNdXRhdGlvbk9ic2VydmVyKHQpLEQ9QXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbC5iaW5kKEFycmF5LnByb3RvdHlwZS5mb3JFYWNoKTthLndhdGNoU2hhZG93PXIsYS51cGdyYWRlQWxsPWcsYS51cGdyYWRlU3VidHJlZT1mLGEub2JzZXJ2ZURvY3VtZW50PXcsYS51cGdyYWRlRG9jdW1lbnQ9eCxhLnRha2VSZWNvcmRzPXV9KHdpbmRvdy5DdXN0b21FbGVtZW50cyksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihiLGYpe3ZhciBnPWZ8fHt9O2lmKCFiKXRocm93IG5ldyBFcnJvcigiZG9jdW1lbnQucmVnaXN0ZXI6IGZpcnN0IGFyZ3VtZW50IGBuYW1lYCBtdXN0IG5vdCBiZSBlbXB0eSIpO2lmKGIuaW5kZXhPZigiLSIpPDApdGhyb3cgbmV3IEVycm9yKCJkb2N1bWVudC5yZWdpc3RlcjogZmlyc3QgYXJndW1lbnQgKCduYW1lJykgbXVzdCBjb250YWluIGEgZGFzaCAoJy0nKS4gQXJndW1lbnQgcHJvdmlkZWQgd2FzICciK1N0cmluZyhiKSsiJy4iKTtpZihnLm5hbWU9YiwhZy5wcm90b3R5cGUpdGhyb3cgbmV3IEVycm9yKCJPcHRpb25zIG1pc3NpbmcgcmVxdWlyZWQgcHJvdG90eXBlIHByb3BlcnR5Iik7cmV0dXJuIGcubGlmZWN5Y2xlPWcubGlmZWN5Y2xlfHx7fSxnLmFuY2VzdHJ5PWMoZy5leHRlbmRzKSxkKGcpLGUoZyksayhnLnByb3RvdHlwZSksbShiLGcpLGcuY3Rvcj1uKGcpLGcuY3Rvci5wcm90b3R5cGU9Zy5wcm90b3R5cGUsZy5wcm90b3R5cGUuY29uc3RydWN0b3I9Zy5jdG9yLGEucmVhZHkmJmEudXBncmFkZUFsbChkb2N1bWVudCksZy5jdG9yfWZ1bmN0aW9uIGMoYSl7dmFyIGI9dlthXTtyZXR1cm4gYj9jKGIuZXh0ZW5kcykuY29uY2F0KFtiXSk6W119ZnVuY3Rpb24gZChhKXtmb3IodmFyIGIsYz1hLmV4dGVuZHMsZD0wO2I9YS5hbmNlc3RyeVtkXTtkKyspYz1iLmlzJiZiLnRhZzthLnRhZz1jfHxhLm5hbWUsYyYmKGEuaXM9YS5uYW1lKX1mdW5jdGlvbiBlKGEpe2lmKCFPYmplY3QuX19wcm90b19fKXt2YXIgYj1IVE1MRWxlbWVudC5wcm90b3R5cGU7aWYoYS5pcyl7dmFyIGM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChhLnRhZyk7Yj1PYmplY3QuZ2V0UHJvdG90eXBlT2YoYyl9Zm9yKHZhciBkLGU9YS5wcm90b3R5cGU7ZSYmZSE9PWI7KXt2YXIgZD1PYmplY3QuZ2V0UHJvdG90eXBlT2YoZSk7ZS5fX3Byb3RvX189ZCxlPWR9fWEubmF0aXZlPWJ9ZnVuY3Rpb24gZihhKXtyZXR1cm4gZyh3KGEudGFnKSxhKX1mdW5jdGlvbiBnKGIsYyl7cmV0dXJuIGMuaXMmJmIuc2V0QXR0cmlidXRlKCJpcyIsYy5pcyksaChiLGMpLGIuX191cGdyYWRlZF9fPSEwLGEudXBncmFkZVN1YnRyZWUoYiksaihiKSxifWZ1bmN0aW9uIGgoYSxiKXtPYmplY3QuX19wcm90b19fP2EuX19wcm90b19fPWIucHJvdG90eXBlOihpKGEsYi5wcm90b3R5cGUsYi5uYXRpdmUpLGEuX19wcm90b19fPWIucHJvdG90eXBlKX1mdW5jdGlvbiBpKGEsYixjKXtmb3IodmFyIGQ9e30sZT1iO2UhPT1jJiZlIT09SFRNTFVua25vd25FbGVtZW50LnByb3RvdHlwZTspe2Zvcih2YXIgZixnPU9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGUpLGg9MDtmPWdbaF07aCsrKWRbZl18fChPYmplY3QuZGVmaW5lUHJvcGVydHkoYSxmLE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSxmKSksZFtmXT0xKTtlPU9iamVjdC5nZXRQcm90b3R5cGVPZihlKX19ZnVuY3Rpb24gaihhKXthLmNyZWF0ZWRDYWxsYmFjayYmYS5jcmVhdGVkQ2FsbGJhY2soKX1mdW5jdGlvbiBrKGEpe3ZhciBiPWEuc2V0QXR0cmlidXRlO2Euc2V0QXR0cmlidXRlPWZ1bmN0aW9uKGEsYyl7bC5jYWxsKHRoaXMsYSxjLGIpfTt2YXIgYz1hLnJlbW92ZUF0dHJpYnV0ZTthLnJlbW92ZUF0dHJpYnV0ZT1mdW5jdGlvbihhLGIpe2wuY2FsbCh0aGlzLGEsYixjKX19ZnVuY3Rpb24gbChhLGIsYyl7dmFyIGQ9dGhpcy5nZXRBdHRyaWJ1dGUoYSk7Yy5hcHBseSh0aGlzLGFyZ3VtZW50cyksdGhpcy5hdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2smJnRoaXMuZ2V0QXR0cmlidXRlKGEpIT09ZCYmdGhpcy5hdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2soYSxkKX1mdW5jdGlvbiBtKGEsYil7dlthXT1ifWZ1bmN0aW9uIG4oYSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGYoYSl9fWZ1bmN0aW9uIG8oYSxiKXt2YXIgYz12W2J8fGFdO3JldHVybiBjP25ldyBjLmN0b3I6dyhhKX1mdW5jdGlvbiBwKGEpe2lmKCFhLl9fdXBncmFkZWRfXyYmYS5ub2RlVHlwZT09PU5vZGUuRUxFTUVOVF9OT0RFKXt2YXIgYj1hLmdldEF0dHJpYnV0ZSgiaXMiKXx8YS5sb2NhbE5hbWUsYz12W2JdO3JldHVybiBjJiZnKGEsYyl9fWZ1bmN0aW9uIHEoYil7dmFyIGM9eC5jYWxsKHRoaXMsYik7cmV0dXJuIGEudXBncmFkZUFsbChjKSxjfWF8fChhPXdpbmRvdy5DdXN0b21FbGVtZW50cz17ZmxhZ3M6e319KTt2YXIgcj1hLmZsYWdzLHM9Qm9vbGVhbihkb2N1bWVudC5yZWdpc3RlciksdD0hci5yZWdpc3RlciYmcztpZih0KXt2YXIgdT1mdW5jdGlvbigpe307YS5yZWdpc3RyeT17fSxhLnVwZ3JhZGVFbGVtZW50PXUsYS53YXRjaFNoYWRvdz11LGEudXBncmFkZT11LGEudXBncmFkZUFsbD11LGEudXBncmFkZVN1YnRyZWU9dSxhLm9ic2VydmVEb2N1bWVudD11LGEudXBncmFkZURvY3VtZW50PXUsYS50YWtlUmVjb3Jkcz11fWVsc2V7dmFyIHY9e30sdz1kb2N1bWVudC5jcmVhdGVFbGVtZW50LmJpbmQoZG9jdW1lbnQpLHg9Tm9kZS5wcm90b3R5cGUuY2xvbmVOb2RlO2RvY3VtZW50LnJlZ2lzdGVyPWIsZG9jdW1lbnQuY3JlYXRlRWxlbWVudD1vLE5vZGUucHJvdG90eXBlLmNsb25lTm9kZT1xLGEucmVnaXN0cnk9dixhLnVwZ3JhZGU9cH1hLmhhc05hdGl2ZT1zLGEudXNlTmF0aXZlPXR9KHdpbmRvdy5DdXN0b21FbGVtZW50cyksZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGEpe3JldHVybiJsaW5rIj09PWEubG9jYWxOYW1lJiZhLmdldEF0dHJpYnV0ZSgicmVsIik9PT1ifXZhciBiPXdpbmRvdy5IVE1MSW1wb3J0cz9IVE1MSW1wb3J0cy5JTVBPUlRfTElOS19UWVBFOiJub25lIixjPXtzZWxlY3RvcnM6WyJsaW5rW3JlbD0iK2IrIl0iXSxtYXA6e2xpbms6InBhcnNlTGluayJ9LHBhcnNlOmZ1bmN0aW9uKGEpe2lmKCFhLl9fcGFyc2VkKXthLl9fcGFyc2VkPSEwO3ZhciBiPWEucXVlcnlTZWxlY3RvckFsbChjLnNlbGVjdG9ycyk7ZChiLGZ1bmN0aW9uKGEpe2NbYy5tYXBbYS5sb2NhbE5hbWVdXShhKX0pLEN1c3RvbUVsZW1lbnRzLnVwZ3JhZGVEb2N1bWVudChhKSxDdXN0b21FbGVtZW50cy5vYnNlcnZlRG9jdW1lbnQoYSl9fSxwYXJzZUxpbms6ZnVuY3Rpb24oYil7YShiKSYmdGhpcy5wYXJzZUltcG9ydChiKX0scGFyc2VJbXBvcnQ6ZnVuY3Rpb24oYSl7YS5jb250ZW50JiZjLnBhcnNlKGEuY29udGVudCl9fSxkPUFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwuYmluZChBcnJheS5wcm90b3R5cGUuZm9yRWFjaCk7Q3VzdG9tRWxlbWVudHMucGFyc2VyPWN9KCksZnVuY3Rpb24oKXtmdW5jdGlvbiBhKCl7Q3VzdG9tRWxlbWVudHMucGFyc2VyLnBhcnNlKGRvY3VtZW50KSxDdXN0b21FbGVtZW50cy51cGdyYWRlRG9jdW1lbnQoZG9jdW1lbnQpO3ZhciBhPXdpbmRvdy5QbGF0Zm9ybSYmUGxhdGZvcm0uZW5kT2ZNaWNyb3Rhc2s/UGxhdGZvcm0uZW5kT2ZNaWNyb3Rhc2s6c2V0VGltZW91dDthKGZ1bmN0aW9uKCl7Q3VzdG9tRWxlbWVudHMucmVhZHk9ITAsQ3VzdG9tRWxlbWVudHMucmVhZHlUaW1lPURhdGUubm93KCksd2luZG93LkhUTUxJbXBvcnRzJiYoQ3VzdG9tRWxlbWVudHMuZWxhcHNlZD1DdXN0b21FbGVtZW50cy5yZWFkeVRpbWUtSFRNTEltcG9ydHMucmVhZHlUaW1lKSxkb2N1bWVudC5ib2R5LmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KCJXZWJDb21wb25lbnRzUmVhZHkiLHtidWJibGVzOiEwfSkpfSl9aWYoImZ1bmN0aW9uIiE9dHlwZW9mIHdpbmRvdy5DdXN0b21FdmVudCYmKHdpbmRvdy5DdXN0b21FdmVudD1mdW5jdGlvbihhKXt2YXIgYj1kb2N1bWVudC5jcmVhdGVFdmVudCgiSFRNTEV2ZW50cyIpO3JldHVybiBiLmluaXRFdmVudChhLCEwLCEwKSxifSksImNvbXBsZXRlIj09PWRvY3VtZW50LnJlYWR5U3RhdGUpYSgpO2Vsc2UgaWYoImludGVyYWN0aXZlIiE9PWRvY3VtZW50LnJlYWR5U3RhdGV8fHdpbmRvdy5hdHRhY2hFdmVudHx8d2luZG93LkhUTUxJbXBvcnRzJiYhd2luZG93LkhUTUxJbXBvcnRzLnJlYWR5KXt2YXIgYj13aW5kb3cuSFRNTEltcG9ydHM/IkhUTUxJbXBvcnRzTG9hZGVkIjoiRE9NQ29udGVudExvYWRlZCI7d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoYixhKX1lbHNlIGEoKX0oKSxmdW5jdGlvbigpe2Z1bmN0aW9uIGEoKXt9dmFyIGI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3R5bGUiKTtiLnRleHRDb250ZW50PSJlbGVtZW50IHtkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7fSAvKiBpbmplY3RlZCBieSBwbGF0Zm9ybS5qcyAqLyI7dmFyIGM9ZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiaGVhZCIpO2lmKGMuaW5zZXJ0QmVmb3JlKGIsYy5maXJzdENoaWxkKSx3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpe0N1c3RvbUVsZW1lbnRzLndhdGNoU2hhZG93PWEsQ3VzdG9tRWxlbWVudHMud2F0Y2hBbGxTaGFkb3dzPWE7dmFyIGQ9WyJ1cGdyYWRlQWxsIiwidXBncmFkZVN1YnRyZWUiLCJvYnNlcnZlRG9jdW1lbnQiLCJ1cGdyYWRlRG9jdW1lbnQiXSxlPXt9O2QuZm9yRWFjaChmdW5jdGlvbihhKXtlW2FdPUN1c3RvbUVsZW1lbnRzW2FdfSksZC5mb3JFYWNoKGZ1bmN0aW9uKGEpe0N1c3RvbUVsZW1lbnRzW2FdPWZ1bmN0aW9uKGIpe3JldHVybiBlW2FdKHdyYXAoYikpfX0pfX0oKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEpe2YudGV4dENvbnRlbnQ9ZCsrLGUucHVzaChhKX1mdW5jdGlvbiBjKCl7Zm9yKDtlLmxlbmd0aDspZS5zaGlmdCgpKCl9dmFyIGQ9MCxlPVtdLGY9ZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoIiIpO25ldyh3aW5kb3cuTXV0YXRpb25PYnNlcnZlcnx8SnNNdXRhdGlvbk9ic2VydmVyKShjKS5vYnNlcnZlKGYse2NoYXJhY3RlckRhdGE6ITB9KSxhLmVuZE9mTWljcm90YXNrPWJ9KFBsYXRmb3JtKSxmdW5jdGlvbihhKXthPWF8fHt9O3ZhciBiPXtzaGFkb3c6ZnVuY3Rpb24oYSl7cmV0dXJuIGE/YS5zaGFkb3dSb290fHxhLndlYmtpdFNoYWRvd1Jvb3Q6dm9pZCAwfSxjYW5UYXJnZXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGEmJkJvb2xlYW4oYS5lbGVtZW50RnJvbVBvaW50KX0sdGFyZ2V0aW5nU2hhZG93OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuc2hhZG93KGEpO3JldHVybiB0aGlzLmNhblRhcmdldChiKT9iOnZvaWQgMH0sb2xkZXJTaGFkb3c6ZnVuY3Rpb24oYSl7dmFyIGI9YS5vbGRlclNoYWRvd1Jvb3Q7aWYoIWIpe3ZhciBjPWEucXVlcnlTZWxlY3Rvcigic2hhZG93Iik7YyYmKGI9Yy5vbGRlclNoYWRvd1Jvb3QpfXJldHVybiBifSxhbGxTaGFkb3dzOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1bXSxjPXRoaXMuc2hhZG93KGEpO2M7KWIucHVzaChjKSxjPXRoaXMub2xkZXJTaGFkb3coYyk7cmV0dXJuIGJ9LHNlYXJjaFJvb3Q6ZnVuY3Rpb24oYSxiLGMpe2lmKGEpe3ZhciBkLGUsZj1hLmVsZW1lbnRGcm9tUG9pbnQoYixjKTtmb3IoZT10aGlzLnRhcmdldGluZ1NoYWRvdyhmKTtlOyl7aWYoZD1lLmVsZW1lbnRGcm9tUG9pbnQoYixjKSl7dmFyIGc9dGhpcy50YXJnZXRpbmdTaGFkb3coZCk7cmV0dXJuIHRoaXMuc2VhcmNoUm9vdChnLGIsYyl8fGR9ZT10aGlzLm9sZGVyU2hhZG93KGUpfXJldHVybiBmfX0sb3duZXI6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPWE7Yi5wYXJlbnROb2RlOyliPWIucGFyZW50Tm9kZTtyZXR1cm4gYn0sZmluZFRhcmdldDpmdW5jdGlvbihhKXt2YXIgYj1hLmNsaWVudFgsYz1hLmNsaWVudFksZD10aGlzLm93bmVyKGEudGFyZ2V0KTtyZXR1cm4gZC5lbGVtZW50RnJvbVBvaW50KGIsYyl8fChkPWRvY3VtZW50KSx0aGlzLnNlYXJjaFJvb3QoZG9jdW1lbnQsYixjKX19O2EudGFyZ2V0RmluZGluZz1iLGEuZmluZFRhcmdldD1iLmZpbmRUYXJnZXQuYmluZChiKSx3aW5kb3cuUG9pbnRlckV2ZW50c1BvbHlmaWxsPWF9KHdpbmRvdy5Qb2ludGVyRXZlbnRzUG9seWZpbGwpLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhKXtyZXR1cm4nW3RvdWNoLWFjdGlvbj0iJythKyciXSd9ZnVuY3Rpb24gYihhKXtyZXR1cm4ieyAtbXMtdG91Y2gtYWN0aW9uOiAiK2ErIjsgdG91Y2gtYWN0aW9uOiAiK2ErIjsgdG91Y2gtYWN0aW9uLWRlbGF5OiBub25lOyB9In12YXIgYz1bIm5vbmUiLCJhdXRvIiwicGFuLXgiLCJwYW4teSIse3J1bGU6InBhbi14IHBhbi15IixzZWxlY3RvcnM6WyJwYW4teCBwYW4teSIsInBhbi15IHBhbi14Il19XSxkPSIiO2MuZm9yRWFjaChmdW5jdGlvbihjKXtkKz1TdHJpbmcoYyk9PT1jP2EoYykrYihjKTpjLnNlbGVjdG9ycy5tYXAoYSkrYihjLnJ1bGUpfSk7dmFyIGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3R5bGUiKTtlLnRleHRDb250ZW50PWQsZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChlKX0oKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEsZSl7ZT1lfHx7fTt2YXIgZj1lLmJ1dHRvbnM7aWYodm9pZCAwPT09Zilzd2l0Y2goZS53aGljaCl7Y2FzZSAxOmY9MTticmVhaztjYXNlIDI6Zj00O2JyZWFrO2Nhc2UgMzpmPTI7YnJlYWs7ZGVmYXVsdDpmPTB9dmFyIGk7aWYoYylpPW5ldyBNb3VzZUV2ZW50KGEsZSk7ZWxzZXtpPWRvY3VtZW50LmNyZWF0ZUV2ZW50KCJNb3VzZUV2ZW50Iik7Zm9yKHZhciBqLGs9e30sbD0wO2w8Zy5sZW5ndGg7bCsrKWo9Z1tsXSxrW2pdPWVbal18fGhbbF07aS5pbml0TW91c2VFdmVudChhLGsuYnViYmxlcyxrLmNhbmNlbGFibGUsay52aWV3LGsuZGV0YWlsLGsuc2NyZWVuWCxrLnNjcmVlblksay5jbGllbnRYLGsuY2xpZW50WSxrLmN0cmxLZXksay5hbHRLZXksay5zaGlmdEtleSxrLm1ldGFLZXksay5idXR0b24say5yZWxhdGVkVGFyZ2V0KX1pLl9fcHJvdG9fXz1iLnByb3RvdHlwZSxkfHxPYmplY3QuZGVmaW5lUHJvcGVydHkoaSwiYnV0dG9ucyIse2dldDpmdW5jdGlvbigpe3JldHVybiBmfSxlbnVtZXJhYmxlOiEwfSk7dmFyIG09MDtyZXR1cm4gbT1lLnByZXNzdXJlP2UucHJlc3N1cmU6Zj8uNTowLE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGkse3BvaW50ZXJJZDp7dmFsdWU6ZS5wb2ludGVySWR8fDAsZW51bWVyYWJsZTohMH0sd2lkdGg6e3ZhbHVlOmUud2lkdGh8fDAsZW51bWVyYWJsZTohMH0saGVpZ2h0Ont2YWx1ZTplLmhlaWdodHx8MCxlbnVtZXJhYmxlOiEwfSxwcmVzc3VyZTp7dmFsdWU6bSxlbnVtZXJhYmxlOiEwfSx0aWx0WDp7dmFsdWU6ZS50aWx0WHx8MCxlbnVtZXJhYmxlOiEwfSx0aWx0WTp7dmFsdWU6ZS50aWx0WXx8MCxlbnVtZXJhYmxlOiEwfSxwb2ludGVyVHlwZTp7dmFsdWU6ZS5wb2ludGVyVHlwZXx8IiIsZW51bWVyYWJsZTohMH0saHdUaW1lc3RhbXA6e3ZhbHVlOmUuaHdUaW1lc3RhbXB8fDAsZW51bWVyYWJsZTohMH0saXNQcmltYXJ5Ont2YWx1ZTplLmlzUHJpbWFyeXx8ITEsZW51bWVyYWJsZTohMH19KSxpfXZhciBjPSExLGQ9ITE7dHJ5e3ZhciBlPW5ldyBNb3VzZUV2ZW50KCJjbGljayIse2J1dHRvbnM6MX0pO2M9ITAsZD0xPT09ZS5idXR0b25zfWNhdGNoKGYpe312YXIgZz1bImJ1YmJsZXMiLCJjYW5jZWxhYmxlIiwidmlldyIsImRldGFpbCIsInNjcmVlblgiLCJzY3JlZW5ZIiwiY2xpZW50WCIsImNsaWVudFkiLCJjdHJsS2V5IiwiYWx0S2V5Iiwic2hpZnRLZXkiLCJtZXRhS2V5IiwiYnV0dG9uIiwicmVsYXRlZFRhcmdldCJdLGg9WyExLCExLG51bGwsbnVsbCwwLDAsMCwwLCExLCExLCExLCExLDAsbnVsbF07Yi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShNb3VzZUV2ZW50LnByb3RvdHlwZSksYS5Qb2ludGVyRXZlbnR8fChhLlBvaW50ZXJFdmVudD1iKX0od2luZG93KSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKCl7dGhpcy5pZHM9W10sdGhpcy5wb2ludGVycz1bXX1iLnByb3RvdHlwZT17c2V0OmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5pZHMuaW5kZXhPZihhKTtjPi0xP3RoaXMucG9pbnRlcnNbY109YjoodGhpcy5pZHMucHVzaChhKSx0aGlzLnBvaW50ZXJzLnB1c2goYikpfSxoYXM6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuaWRzLmluZGV4T2YoYSk+LTF9LCJkZWxldGUiOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuaWRzLmluZGV4T2YoYSk7Yj4tMSYmKHRoaXMuaWRzLnNwbGljZShiLDEpLHRoaXMucG9pbnRlcnMuc3BsaWNlKGIsMSkpfSxnZXQ6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5pZHMuaW5kZXhPZihhKTtyZXR1cm4gdGhpcy5wb2ludGVyc1tiXX0sZ2V0IHNpemUoKXtyZXR1cm4gdGhpcy5wb2ludGVycy5sZW5ndGh9LGNsZWFyOmZ1bmN0aW9uKCl7dGhpcy5pZHMubGVuZ3RoPTAsdGhpcy5wb2ludGVycy5sZW5ndGg9MH0sZm9yRWFjaDpmdW5jdGlvbihhLGIpe3RoaXMuaWRzLmZvckVhY2goZnVuY3Rpb24oYyxkKXthLmNhbGwoYixjLHRoaXMucG9pbnRlcnNbZF0sdGhpcyl9LHRoaXMpfX0sYS5Qb2ludGVyTWFwPXdpbmRvdy5NYXAmJk1hcC5wcm90b3R5cGUuZm9yRWFjaD9NYXA6Yn0od2luZG93LlBvaW50ZXJFdmVudHNQb2x5ZmlsbCksZnVuY3Rpb24oYSl7dmFyIGI9WyJidWJibGVzIiwiY2FuY2VsYWJsZSIsInZpZXciLCJkZXRhaWwiLCJzY3JlZW5YIiwic2NyZWVuWSIsImNsaWVudFgiLCJjbGllbnRZIiwiY3RybEtleSIsImFsdEtleSIsInNoaWZ0S2V5IiwibWV0YUtleSIsImJ1dHRvbiIsInJlbGF0ZWRUYXJnZXQiLCJidXR0b25zIiwicG9pbnRlcklkIiwid2lkdGgiLCJoZWlnaHQiLCJwcmVzc3VyZSIsInRpbHRYIiwidGlsdFkiLCJwb2ludGVyVHlwZSIsImh3VGltZXN0YW1wIiwiaXNQcmltYXJ5IiwidHlwZSIsInRhcmdldCIsImN1cnJlbnRUYXJnZXQiLCJ3aGljaCJdLGM9WyExLCExLG51bGwsbnVsbCwwLDAsMCwwLCExLCExLCExLCExLDAsbnVsbCx2b2lkIDAsMCwwLDAsMCwwLDAsIiIsMCwhMSwiIixudWxsLG51bGwsMF0sZD17dGFyZ2V0czpuZXcgV2Vha01hcCxoYW5kbGVkRXZlbnRzOm5ldyBXZWFrTWFwLHBvaW50ZXJtYXA6bmV3IGEuUG9pbnRlck1hcCxldmVudE1hcDp7fSxldmVudFNvdXJjZXM6e30sZXZlbnRTb3VyY2VMaXN0OltdLHJlZ2lzdGVyU291cmNlOmZ1bmN0aW9uKGEsYil7dmFyIGM9YixkPWMuZXZlbnRzOwpkJiYoZC5mb3JFYWNoKGZ1bmN0aW9uKGEpe2NbYV0mJih0aGlzLmV2ZW50TWFwW2FdPWNbYV0uYmluZChjKSl9LHRoaXMpLHRoaXMuZXZlbnRTb3VyY2VzW2FdPWMsdGhpcy5ldmVudFNvdXJjZUxpc3QucHVzaChjKSl9LHJlZ2lzdGVyOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYixjPXRoaXMuZXZlbnRTb3VyY2VMaXN0Lmxlbmd0aCxkPTA7Yz5kJiYoYj10aGlzLmV2ZW50U291cmNlTGlzdFtkXSk7ZCsrKWIucmVnaXN0ZXIuY2FsbChiLGEpfSx1bnJlZ2lzdGVyOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYixjPXRoaXMuZXZlbnRTb3VyY2VMaXN0Lmxlbmd0aCxkPTA7Yz5kJiYoYj10aGlzLmV2ZW50U291cmNlTGlzdFtkXSk7ZCsrKWIudW5yZWdpc3Rlci5jYWxsKGIsYSl9LGRvd246ZnVuY3Rpb24oYSl7dGhpcy5maXJlRXZlbnQoInBvaW50ZXJkb3duIixhKX0sbW92ZTpmdW5jdGlvbihhKXt0aGlzLmZpcmVFdmVudCgicG9pbnRlcm1vdmUiLGEpfSx1cDpmdW5jdGlvbihhKXt0aGlzLmZpcmVFdmVudCgicG9pbnRlcnVwIixhKX0sZW50ZXI6ZnVuY3Rpb24oYSl7YS5idWJibGVzPSExLHRoaXMuZmlyZUV2ZW50KCJwb2ludGVyZW50ZXIiLGEpfSxsZWF2ZTpmdW5jdGlvbihhKXthLmJ1YmJsZXM9ITEsdGhpcy5maXJlRXZlbnQoInBvaW50ZXJsZWF2ZSIsYSl9LG92ZXI6ZnVuY3Rpb24oYSl7YS5idWJibGVzPSEwLHRoaXMuZmlyZUV2ZW50KCJwb2ludGVyb3ZlciIsYSl9LG91dDpmdW5jdGlvbihhKXthLmJ1YmJsZXM9ITAsdGhpcy5maXJlRXZlbnQoInBvaW50ZXJvdXQiLGEpfSxjYW5jZWw6ZnVuY3Rpb24oYSl7dGhpcy5maXJlRXZlbnQoInBvaW50ZXJjYW5jZWwiLGEpfSxsZWF2ZU91dDpmdW5jdGlvbihhKXthLnRhcmdldC5jb250YWlucyhhLnJlbGF0ZWRUYXJnZXQpfHx0aGlzLmxlYXZlKGEpLHRoaXMub3V0KGEpfSxlbnRlck92ZXI6ZnVuY3Rpb24oYSl7YS50YXJnZXQuY29udGFpbnMoYS5yZWxhdGVkVGFyZ2V0KXx8dGhpcy5lbnRlcihhKSx0aGlzLm92ZXIoYSl9LGV2ZW50SGFuZGxlcjpmdW5jdGlvbihhKXtpZighdGhpcy5oYW5kbGVkRXZlbnRzLmdldChhKSl7dmFyIGI9YS50eXBlLGM9dGhpcy5ldmVudE1hcCYmdGhpcy5ldmVudE1hcFtiXTtjJiZjKGEpLHRoaXMuaGFuZGxlZEV2ZW50cy5zZXQoYSwhMCl9fSxsaXN0ZW46ZnVuY3Rpb24oYSxiKXtiLmZvckVhY2goZnVuY3Rpb24oYil7dGhpcy5hZGRFdmVudChhLGIpfSx0aGlzKX0sdW5saXN0ZW46ZnVuY3Rpb24oYSxiKXtiLmZvckVhY2goZnVuY3Rpb24oYil7dGhpcy5yZW1vdmVFdmVudChhLGIpfSx0aGlzKX0sYWRkRXZlbnQ6ZnVuY3Rpb24oYSxiKXthLmFkZEV2ZW50TGlzdGVuZXIoYix0aGlzLmJvdW5kSGFuZGxlcil9LHJlbW92ZUV2ZW50OmZ1bmN0aW9uKGEsYil7YS5yZW1vdmVFdmVudExpc3RlbmVyKGIsdGhpcy5ib3VuZEhhbmRsZXIpfSxtYWtlRXZlbnQ6ZnVuY3Rpb24oYSxiKXt0aGlzLmNhcHR1cmVJbmZvJiYoYi5yZWxhdGVkVGFyZ2V0PW51bGwpO3ZhciBjPW5ldyBQb2ludGVyRXZlbnQoYSxiKTtyZXR1cm4gdGhpcy50YXJnZXRzLnNldChjLHRoaXMudGFyZ2V0cy5nZXQoYil8fGIudGFyZ2V0KSxjfSxmaXJlRXZlbnQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLm1ha2VFdmVudChhLGIpO3JldHVybiB0aGlzLmRpc3BhdGNoRXZlbnQoYyl9LGNsb25lRXZlbnQ6ZnVuY3Rpb24oYSl7Zm9yKHZhciBkLGU9e30sZj0wO2Y8Yi5sZW5ndGg7ZisrKWQ9YltmXSxlW2RdPWFbZF18fGNbZl07cmV0dXJuIGV9LGdldFRhcmdldDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5jYXB0dXJlSW5mbyYmdGhpcy5jYXB0dXJlSW5mby5pZD09PWEucG9pbnRlcklkP3RoaXMuY2FwdHVyZUluZm8udGFyZ2V0OnRoaXMudGFyZ2V0cy5nZXQoYSl9LHNldENhcHR1cmU6ZnVuY3Rpb24oYSxiKXt0aGlzLmNhcHR1cmVJbmZvJiZ0aGlzLnJlbGVhc2VDYXB0dXJlKHRoaXMuY2FwdHVyZUluZm8uaWQpLHRoaXMuY2FwdHVyZUluZm89e2lkOmEsdGFyZ2V0OmJ9O3ZhciBjPW5ldyBQb2ludGVyRXZlbnQoImdvdHBvaW50ZXJjYXB0dXJlIix7YnViYmxlczohMH0pO3RoaXMuaW1wbGljaXRSZWxlYXNlPXRoaXMucmVsZWFzZUNhcHR1cmUuYmluZCh0aGlzLGEpLGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoInBvaW50ZXJ1cCIsdGhpcy5pbXBsaWNpdFJlbGVhc2UpLGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoInBvaW50ZXJjYW5jZWwiLHRoaXMuaW1wbGljaXRSZWxlYXNlKSx0aGlzLnRhcmdldHMuc2V0KGMsYiksdGhpcy5hc3luY0Rpc3BhdGNoRXZlbnQoYyl9LHJlbGVhc2VDYXB0dXJlOmZ1bmN0aW9uKGEpe2lmKHRoaXMuY2FwdHVyZUluZm8mJnRoaXMuY2FwdHVyZUluZm8uaWQ9PT1hKXt2YXIgYj1uZXcgUG9pbnRlckV2ZW50KCJsb3N0cG9pbnRlcmNhcHR1cmUiLHtidWJibGVzOiEwfSksYz10aGlzLmNhcHR1cmVJbmZvLnRhcmdldDt0aGlzLmNhcHR1cmVJbmZvPW51bGwsZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigicG9pbnRlcnVwIix0aGlzLmltcGxpY2l0UmVsZWFzZSksZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigicG9pbnRlcmNhbmNlbCIsdGhpcy5pbXBsaWNpdFJlbGVhc2UpLHRoaXMudGFyZ2V0cy5zZXQoYixjKSx0aGlzLmFzeW5jRGlzcGF0Y2hFdmVudChiKX19LGRpc3BhdGNoRXZlbnQ6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5nZXRUYXJnZXQoYSk7cmV0dXJuIGI/Yi5kaXNwYXRjaEV2ZW50KGEpOnZvaWQgMH0sYXN5bmNEaXNwYXRjaEV2ZW50OmZ1bmN0aW9uKGEpe3NldFRpbWVvdXQodGhpcy5kaXNwYXRjaEV2ZW50LmJpbmQodGhpcyxhKSwwKX19O2QuYm91bmRIYW5kbGVyPWQuZXZlbnRIYW5kbGVyLmJpbmQoZCksYS5kaXNwYXRjaGVyPWQsYS5yZWdpc3Rlcj1kLnJlZ2lzdGVyLmJpbmQoZCksYS51bnJlZ2lzdGVyPWQudW5yZWdpc3Rlci5iaW5kKGQpfSh3aW5kb3cuUG9pbnRlckV2ZW50c1BvbHlmaWxsKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEsYixjLGQpe3RoaXMuYWRkQ2FsbGJhY2s9YS5iaW5kKGQpLHRoaXMucmVtb3ZlQ2FsbGJhY2s9Yi5iaW5kKGQpLHRoaXMuY2hhbmdlZENhbGxiYWNrPWMuYmluZChkKSxnJiYodGhpcy5vYnNlcnZlcj1uZXcgZyh0aGlzLm11dGF0aW9uV2F0Y2hlci5iaW5kKHRoaXMpKSl9dmFyIGM9QXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbC5iaW5kKEFycmF5LnByb3RvdHlwZS5mb3JFYWNoKSxkPUFycmF5LnByb3RvdHlwZS5tYXAuY2FsbC5iaW5kKEFycmF5LnByb3RvdHlwZS5tYXApLGU9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwuYmluZChBcnJheS5wcm90b3R5cGUuc2xpY2UpLGY9QXJyYXkucHJvdG90eXBlLmZpbHRlci5jYWxsLmJpbmQoQXJyYXkucHJvdG90eXBlLmZpbHRlciksZz13aW5kb3cuTXV0YXRpb25PYnNlcnZlcnx8d2luZG93LldlYktpdE11dGF0aW9uT2JzZXJ2ZXIsaD0iW3RvdWNoLWFjdGlvbl0iLGk9e3N1YnRyZWU6ITAsY2hpbGRMaXN0OiEwLGF0dHJpYnV0ZXM6ITAsYXR0cmlidXRlT2xkVmFsdWU6ITAsYXR0cmlidXRlRmlsdGVyOlsidG91Y2gtYWN0aW9uIl19O2IucHJvdG90eXBlPXt3YXRjaFN1YnRyZWU6ZnVuY3Rpb24oYil7YS50YXJnZXRGaW5kaW5nLmNhblRhcmdldChiKSYmdGhpcy5vYnNlcnZlci5vYnNlcnZlKGIsaSl9LGVuYWJsZU9uU3VidHJlZTpmdW5jdGlvbihhKXt0aGlzLndhdGNoU3VidHJlZShhKSxhPT09ZG9jdW1lbnQmJiJjb21wbGV0ZSIhPT1kb2N1bWVudC5yZWFkeVN0YXRlP3RoaXMuaW5zdGFsbE9uTG9hZCgpOnRoaXMuaW5zdGFsbE5ld1N1YnRyZWUoYSl9LGluc3RhbGxOZXdTdWJ0cmVlOmZ1bmN0aW9uKGEpe2ModGhpcy5maW5kRWxlbWVudHMoYSksdGhpcy5hZGRFbGVtZW50LHRoaXMpfSxmaW5kRWxlbWVudHM6ZnVuY3Rpb24oYSl7cmV0dXJuIGEucXVlcnlTZWxlY3RvckFsbD9hLnF1ZXJ5U2VsZWN0b3JBbGwoaCk6W119LHJlbW92ZUVsZW1lbnQ6ZnVuY3Rpb24oYSl7dGhpcy5yZW1vdmVDYWxsYmFjayhhKX0sYWRkRWxlbWVudDpmdW5jdGlvbihhKXt0aGlzLmFkZENhbGxiYWNrKGEpfSxlbGVtZW50Q2hhbmdlZDpmdW5jdGlvbihhLGIpe3RoaXMuY2hhbmdlZENhbGxiYWNrKGEsYil9LGNvbmNhdExpc3RzOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGEuY29uY2F0KGUoYikpfSxpbnN0YWxsT25Mb2FkOmZ1bmN0aW9uKCl7ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsdGhpcy5pbnN0YWxsTmV3U3VidHJlZS5iaW5kKHRoaXMsZG9jdW1lbnQpKX0saXNFbGVtZW50OmZ1bmN0aW9uKGEpe3JldHVybiBhLm5vZGVUeXBlPT09Tm9kZS5FTEVNRU5UX05PREV9LGZsYXR0ZW5NdXRhdGlvblRyZWU6ZnVuY3Rpb24oYSl7dmFyIGI9ZChhLHRoaXMuZmluZEVsZW1lbnRzLHRoaXMpO3JldHVybiBiLnB1c2goZihhLHRoaXMuaXNFbGVtZW50KSksYi5yZWR1Y2UodGhpcy5jb25jYXRMaXN0cyxbXSl9LG11dGF0aW9uV2F0Y2hlcjpmdW5jdGlvbihhKXthLmZvckVhY2godGhpcy5tdXRhdGlvbkhhbmRsZXIsdGhpcyl9LG11dGF0aW9uSGFuZGxlcjpmdW5jdGlvbihhKXtpZigiY2hpbGRMaXN0Ij09PWEudHlwZSl7dmFyIGI9dGhpcy5mbGF0dGVuTXV0YXRpb25UcmVlKGEuYWRkZWROb2Rlcyk7Yi5mb3JFYWNoKHRoaXMuYWRkRWxlbWVudCx0aGlzKTt2YXIgYz10aGlzLmZsYXR0ZW5NdXRhdGlvblRyZWUoYS5yZW1vdmVkTm9kZXMpO2MuZm9yRWFjaCh0aGlzLnJlbW92ZUVsZW1lbnQsdGhpcyl9ZWxzZSJhdHRyaWJ1dGVzIj09PWEudHlwZSYmdGhpcy5lbGVtZW50Q2hhbmdlZChhLnRhcmdldCxhLm9sZFZhbHVlKX19LGd8fChiLnByb3RvdHlwZS53YXRjaFN1YnRyZWU9ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oIlBvaW50ZXJFdmVudHNQb2x5ZmlsbDogTXV0YXRpb25PYnNlcnZlcnMgbm90IGZvdW5kLCB0b3VjaC1hY3Rpb24gd2lsbCBub3QgYmUgZHluYW1pY2FsbHkgZGV0ZWN0ZWQiKX0pLGEuSW5zdGFsbGVyPWJ9KHdpbmRvdy5Qb2ludGVyRXZlbnRzUG9seWZpbGwpLGZ1bmN0aW9uKGEpe3ZhciBiPWEuZGlzcGF0Y2hlcixjPWIucG9pbnRlcm1hcCxkPTI1LGU9e1BPSU5URVJfSUQ6MSxQT0lOVEVSX1RZUEU6Im1vdXNlIixldmVudHM6WyJtb3VzZWRvd24iLCJtb3VzZW1vdmUiLCJtb3VzZXVwIiwibW91c2VvdmVyIiwibW91c2VvdXQiXSxyZWdpc3RlcjpmdW5jdGlvbihhKXtiLmxpc3RlbihhLHRoaXMuZXZlbnRzKX0sdW5yZWdpc3RlcjpmdW5jdGlvbihhKXtiLnVubGlzdGVuKGEsdGhpcy5ldmVudHMpfSxsYXN0VG91Y2hlczpbXSxpc0V2ZW50U2ltdWxhdGVkRnJvbVRvdWNoOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYixjPXRoaXMubGFzdFRvdWNoZXMsZT1hLmNsaWVudFgsZj1hLmNsaWVudFksZz0wLGg9Yy5sZW5ndGg7aD5nJiYoYj1jW2ddKTtnKyspe3ZhciBpPU1hdGguYWJzKGUtYi54KSxqPU1hdGguYWJzKGYtYi55KTtpZihkPj1pJiZkPj1qKXJldHVybiEwfX0scHJlcGFyZUV2ZW50OmZ1bmN0aW9uKGEpe3ZhciBjPWIuY2xvbmVFdmVudChhKTtyZXR1cm4gYy5wb2ludGVySWQ9dGhpcy5QT0lOVEVSX0lELGMuaXNQcmltYXJ5PSEwLGMucG9pbnRlclR5cGU9dGhpcy5QT0lOVEVSX1RZUEUsY30sbW91c2Vkb3duOmZ1bmN0aW9uKGEpe2lmKCF0aGlzLmlzRXZlbnRTaW11bGF0ZWRGcm9tVG91Y2goYSkpe3ZhciBkPWMuaGFzKHRoaXMuUE9JTlRFUl9JRCk7ZCYmdGhpcy5jYW5jZWwoYSk7dmFyIGU9dGhpcy5wcmVwYXJlRXZlbnQoYSk7Yy5zZXQodGhpcy5QT0lOVEVSX0lELGEpLGIuZG93bihlKX19LG1vdXNlbW92ZTpmdW5jdGlvbihhKXtpZighdGhpcy5pc0V2ZW50U2ltdWxhdGVkRnJvbVRvdWNoKGEpKXt2YXIgYz10aGlzLnByZXBhcmVFdmVudChhKTtiLm1vdmUoYyl9fSxtb3VzZXVwOmZ1bmN0aW9uKGEpe2lmKCF0aGlzLmlzRXZlbnRTaW11bGF0ZWRGcm9tVG91Y2goYSkpe3ZhciBkPWMuZ2V0KHRoaXMuUE9JTlRFUl9JRCk7aWYoZCYmZC5idXR0b249PT1hLmJ1dHRvbil7dmFyIGU9dGhpcy5wcmVwYXJlRXZlbnQoYSk7Yi51cChlKSx0aGlzLmNsZWFudXBNb3VzZSgpfX19LG1vdXNlb3ZlcjpmdW5jdGlvbihhKXtpZighdGhpcy5pc0V2ZW50U2ltdWxhdGVkRnJvbVRvdWNoKGEpKXt2YXIgYz10aGlzLnByZXBhcmVFdmVudChhKTtiLmVudGVyT3ZlcihjKX19LG1vdXNlb3V0OmZ1bmN0aW9uKGEpe2lmKCF0aGlzLmlzRXZlbnRTaW11bGF0ZWRGcm9tVG91Y2goYSkpe3ZhciBjPXRoaXMucHJlcGFyZUV2ZW50KGEpO2IubGVhdmVPdXQoYyl9fSxjYW5jZWw6ZnVuY3Rpb24oYSl7dmFyIGM9dGhpcy5wcmVwYXJlRXZlbnQoYSk7Yi5jYW5jZWwoYyksdGhpcy5jbGVhbnVwTW91c2UoKX0sY2xlYW51cE1vdXNlOmZ1bmN0aW9uKCl7Yy5kZWxldGUodGhpcy5QT0lOVEVSX0lEKX19O2EubW91c2VFdmVudHM9ZX0od2luZG93LlBvaW50ZXJFdmVudHNQb2x5ZmlsbCksZnVuY3Rpb24oYSl7dmFyIGIsYz1hLmRpc3BhdGNoZXIsZD1hLmZpbmRUYXJnZXQsZT1hLnRhcmdldEZpbmRpbmcuYWxsU2hhZG93cy5iaW5kKGEudGFyZ2V0RmluZGluZyksZj1jLnBvaW50ZXJtYXAsZz1BcnJheS5wcm90b3R5cGUubWFwLmNhbGwuYmluZChBcnJheS5wcm90b3R5cGUubWFwKSxoPTI1MDAsaT0yMDAsaj0idG91Y2gtYWN0aW9uIixrPSJzdHJpbmciPT10eXBlb2YgZG9jdW1lbnQuaGVhZC5zdHlsZS50b3VjaEFjdGlvbixsPXtzY3JvbGxUeXBlOm5ldyBXZWFrTWFwLGV2ZW50czpbInRvdWNoc3RhcnQiLCJ0b3VjaG1vdmUiLCJ0b3VjaGVuZCIsInRvdWNoY2FuY2VsIl0scmVnaXN0ZXI6ZnVuY3Rpb24oYSl7az9jLmxpc3RlbihhLHRoaXMuZXZlbnRzKTpiLmVuYWJsZU9uU3VidHJlZShhKX0sdW5yZWdpc3RlcjpmdW5jdGlvbihhKXtrJiZjLnVubGlzdGVuKGEsdGhpcy5ldmVudHMpfSxlbGVtZW50QWRkZWQ6ZnVuY3Rpb24oYSl7dmFyIGI9YS5nZXRBdHRyaWJ1dGUoaiksZD10aGlzLnRvdWNoQWN0aW9uVG9TY3JvbGxUeXBlKGIpO2QmJih0aGlzLnNjcm9sbFR5cGUuc2V0KGEsZCksYy5saXN0ZW4oYSx0aGlzLmV2ZW50cyksZShhKS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3RoaXMuc2Nyb2xsVHlwZS5zZXQoYSxkKSxjLmxpc3RlbihhLHRoaXMuZXZlbnRzKX0sdGhpcykpfSxlbGVtZW50UmVtb3ZlZDpmdW5jdGlvbihhKXt0aGlzLnNjcm9sbFR5cGUuZGVsZXRlKGEpLGMudW5saXN0ZW4oYSx0aGlzLmV2ZW50cyksZShhKS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3RoaXMuc2Nyb2xsVHlwZS5kZWxldGUoYSksYy51bmxpc3RlbihhLHRoaXMuZXZlbnRzKX0sdGhpcyl9LGVsZW1lbnRDaGFuZ2VkOmZ1bmN0aW9uKGEsYil7dmFyIGM9YS5nZXRBdHRyaWJ1dGUoaiksZD10aGlzLnRvdWNoQWN0aW9uVG9TY3JvbGxUeXBlKGMpLGY9dGhpcy50b3VjaEFjdGlvblRvU2Nyb2xsVHlwZShiKTtkJiZmPyh0aGlzLnNjcm9sbFR5cGUuc2V0KGEsZCksZShhKS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3RoaXMuc2Nyb2xsVHlwZS5zZXQoYSxkKX0sdGhpcykpOmY/dGhpcy5lbGVtZW50UmVtb3ZlZChhKTpkJiZ0aGlzLmVsZW1lbnRBZGRlZChhKX0sc2Nyb2xsVHlwZXM6e0VNSVRURVI6Im5vbmUiLFhTQ1JPTExFUjoicGFuLXgiLFlTQ1JPTExFUjoicGFuLXkiLFNDUk9MTEVSOi9eKD86cGFuLXggcGFuLXkpfCg/OnBhbi15IHBhbi14KXxhdXRvJC99LHRvdWNoQWN0aW9uVG9TY3JvbGxUeXBlOmZ1bmN0aW9uKGEpe3ZhciBiPWEsYz10aGlzLnNjcm9sbFR5cGVzO3JldHVybiJub25lIj09PWI/Im5vbmUiOmI9PT1jLlhTQ1JPTExFUj8iWCI6Yj09PWMuWVNDUk9MTEVSPyJZIjpjLlNDUk9MTEVSLmV4ZWMoYik/IlhZIjp2b2lkIDB9LFBPSU5URVJfVFlQRToidG91Y2giLGZpcnN0VG91Y2g6bnVsbCxpc1ByaW1hcnlUb3VjaDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5maXJzdFRvdWNoPT09YS5pZGVudGlmaWVyfSxzZXRQcmltYXJ5VG91Y2g6ZnVuY3Rpb24oYSl7KDA9PWYuc2l6ZXx8MT09Zi5zaXplJiZmLmhhcygxKSkmJih0aGlzLmZpcnN0VG91Y2g9YS5pZGVudGlmaWVyLHRoaXMuZmlyc3RYWT17WDphLmNsaWVudFgsWTphLmNsaWVudFl9LHRoaXMuc2Nyb2xsaW5nPSExLHRoaXMuY2FuY2VsUmVzZXRDbGlja0NvdW50KCkpfSxyZW1vdmVQcmltYXJ5UG9pbnRlcjpmdW5jdGlvbihhKXthLmlzUHJpbWFyeSYmKHRoaXMuZmlyc3RUb3VjaD1udWxsLHRoaXMuZmlyc3RYWT1udWxsLHRoaXMucmVzZXRDbGlja0NvdW50KCkpfSxjbGlja0NvdW50OjAscmVzZXRJZDpudWxsLHJlc2V0Q2xpY2tDb3VudDpmdW5jdGlvbigpe3ZhciBhPWZ1bmN0aW9uKCl7dGhpcy5jbGlja0NvdW50PTAsdGhpcy5yZXNldElkPW51bGx9LmJpbmQodGhpcyk7dGhpcy5yZXNldElkPXNldFRpbWVvdXQoYSxpKX0sY2FuY2VsUmVzZXRDbGlja0NvdW50OmZ1bmN0aW9uKCl7dGhpcy5yZXNldElkJiZjbGVhclRpbWVvdXQodGhpcy5yZXNldElkKX0sdG91Y2hUb1BvaW50ZXI6ZnVuY3Rpb24oYSl7dmFyIGI9Yy5jbG9uZUV2ZW50KGEpO3JldHVybiBiLnBvaW50ZXJJZD1hLmlkZW50aWZpZXIrMixiLnRhcmdldD1kKGIpLGIuYnViYmxlcz0hMCxiLmNhbmNlbGFibGU9ITAsYi5kZXRhaWw9dGhpcy5jbGlja0NvdW50LGIuYnV0dG9uPTAsYi5idXR0b25zPTEsYi53aWR0aD1hLndlYmtpdFJhZGl1c1h8fGEucmFkaXVzWHx8MCxiLmhlaWdodD1hLndlYmtpdFJhZGl1c1l8fGEucmFkaXVzWXx8MCxiLnByZXNzdXJlPWEud2Via2l0Rm9yY2V8fGEuZm9yY2V8fC41LGIuaXNQcmltYXJ5PXRoaXMuaXNQcmltYXJ5VG91Y2goYSksYi5wb2ludGVyVHlwZT10aGlzLlBPSU5URVJfVFlQRSxifSxwcm9jZXNzVG91Y2hlczpmdW5jdGlvbihhLGIpe3ZhciBjPWEuY2hhbmdlZFRvdWNoZXMsZD1nKGMsdGhpcy50b3VjaFRvUG9pbnRlcix0aGlzKTtkLmZvckVhY2goYix0aGlzKX0sc2hvdWxkU2Nyb2xsOmZ1bmN0aW9uKGEpe2lmKHRoaXMuZmlyc3RYWSl7dmFyIGIsYz10aGlzLnNjcm9sbFR5cGUuZ2V0KGEuY3VycmVudFRhcmdldCk7aWYoIm5vbmUiPT09YyliPSExO2Vsc2UgaWYoIlhZIj09PWMpYj0hMDtlbHNle3ZhciBkPWEuY2hhbmdlZFRvdWNoZXNbMF0sZT1jLGY9IlkiPT09Yz8iWCI6IlkiLGc9TWF0aC5hYnMoZFsiY2xpZW50IitlXS10aGlzLmZpcnN0WFlbZV0pLGg9TWF0aC5hYnMoZFsiY2xpZW50IitmXS10aGlzLmZpcnN0WFlbZl0pO2I9Zz49aH1yZXR1cm4gdGhpcy5maXJzdFhZPW51bGwsYn19LGZpbmRUb3VjaDpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYyxkPTAsZT1hLmxlbmd0aDtlPmQmJihjPWFbZF0pO2QrKylpZihjLmlkZW50aWZpZXI9PT1iKXJldHVybiEwfSx2YWN1dW1Ub3VjaGVzOmZ1bmN0aW9uKGEpe3ZhciBiPWEudG91Y2hlcztpZihmLnNpemU+PWIubGVuZ3RoKXt2YXIgYz1bXTtmLmZvckVhY2goZnVuY3Rpb24oYSxkKXtpZigxIT09YSYmIXRoaXMuZmluZFRvdWNoKGIsYS0yKSl7dmFyIGU9ZC5vdXQ7Yy5wdXNoKHRoaXMudG91Y2hUb1BvaW50ZXIoZSkpfX0sdGhpcyksYy5mb3JFYWNoKHRoaXMuY2FuY2VsT3V0LHRoaXMpfX0sdG91Y2hzdGFydDpmdW5jdGlvbihhKXt0aGlzLnZhY3V1bVRvdWNoZXMoYSksdGhpcy5zZXRQcmltYXJ5VG91Y2goYS5jaGFuZ2VkVG91Y2hlc1swXSksdGhpcy5kZWR1cFN5bnRoTW91c2UoYSksdGhpcy5zY3JvbGxpbmd8fCh0aGlzLmNsaWNrQ291bnQrKyx0aGlzLnByb2Nlc3NUb3VjaGVzKGEsdGhpcy5vdmVyRG93bikpfSxvdmVyRG93bjpmdW5jdGlvbihhKXtmLnNldChhLnBvaW50ZXJJZCx7dGFyZ2V0OmEudGFyZ2V0LG91dDphLG91dFRhcmdldDphLnRhcmdldH0pLGMub3ZlcihhKSxjLmRvd24oYSl9LHRvdWNobW92ZTpmdW5jdGlvbihhKXt0aGlzLnNjcm9sbGluZ3x8KHRoaXMuc2hvdWxkU2Nyb2xsKGEpPyh0aGlzLnNjcm9sbGluZz0hMCx0aGlzLnRvdWNoY2FuY2VsKGEpKTooYS5wcmV2ZW50RGVmYXVsdCgpLHRoaXMucHJvY2Vzc1RvdWNoZXMoYSx0aGlzLm1vdmVPdmVyT3V0KSkpfSxtb3ZlT3Zlck91dDpmdW5jdGlvbihhKXt2YXIgYj1hLGQ9Zi5nZXQoYi5wb2ludGVySWQpO2lmKGQpe3ZhciBlPWQub3V0LGc9ZC5vdXRUYXJnZXQ7Yy5tb3ZlKGIpLGUmJmchPT1iLnRhcmdldCYmKGUucmVsYXRlZFRhcmdldD1iLnRhcmdldCxiLnJlbGF0ZWRUYXJnZXQ9ZyxlLnRhcmdldD1nLGIudGFyZ2V0PyhjLmxlYXZlT3V0KGUpLGMuZW50ZXJPdmVyKGIpKTooYi50YXJnZXQ9ZyxiLnJlbGF0ZWRUYXJnZXQ9bnVsbCx0aGlzLmNhbmNlbE91dChiKSkpLGQub3V0PWIsZC5vdXRUYXJnZXQ9Yi50YXJnZXR9fSx0b3VjaGVuZDpmdW5jdGlvbihhKXt0aGlzLmRlZHVwU3ludGhNb3VzZShhKSx0aGlzLnByb2Nlc3NUb3VjaGVzKGEsdGhpcy51cE91dCl9LHVwT3V0OmZ1bmN0aW9uKGEpe3RoaXMuc2Nyb2xsaW5nfHwoYy51cChhKSxjLm91dChhKSksdGhpcy5jbGVhblVwUG9pbnRlcihhKX0sdG91Y2hjYW5jZWw6ZnVuY3Rpb24oYSl7dGhpcy5wcm9jZXNzVG91Y2hlcyhhLHRoaXMuY2FuY2VsT3V0KX0sY2FuY2VsT3V0OmZ1bmN0aW9uKGEpe2MuY2FuY2VsKGEpLGMub3V0KGEpLHRoaXMuY2xlYW5VcFBvaW50ZXIoYSl9LGNsZWFuVXBQb2ludGVyOmZ1bmN0aW9uKGEpe2YuZGVsZXRlKGEucG9pbnRlcklkKSx0aGlzLnJlbW92ZVByaW1hcnlQb2ludGVyKGEpfSxkZWR1cFN5bnRoTW91c2U6ZnVuY3Rpb24oYil7dmFyIGM9YS5tb3VzZUV2ZW50cy5sYXN0VG91Y2hlcyxkPWIuY2hhbmdlZFRvdWNoZXNbMF07aWYodGhpcy5pc1ByaW1hcnlUb3VjaChkKSl7dmFyIGU9e3g6ZC5jbGllbnRYLHk6ZC5jbGllbnRZfTtjLnB1c2goZSk7dmFyIGY9ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLmluZGV4T2YoYik7Yz4tMSYmYS5zcGxpY2UoYywxKX0uYmluZChudWxsLGMsZSk7c2V0VGltZW91dChmLGgpfX19O2t8fChiPW5ldyBhLkluc3RhbGxlcihsLmVsZW1lbnRBZGRlZCxsLmVsZW1lbnRSZW1vdmVkLGwuZWxlbWVudENoYW5nZWQsbCkpLGEudG91Y2hFdmVudHM9bH0od2luZG93LlBvaW50ZXJFdmVudHNQb2x5ZmlsbCksZnVuY3Rpb24oYSl7dmFyIGI9YS5kaXNwYXRjaGVyLGM9Yi5wb2ludGVybWFwLGQ9d2luZG93Lk1TUG9pbnRlckV2ZW50JiYibnVtYmVyIj09dHlwZW9mIHdpbmRvdy5NU1BvaW50ZXJFdmVudC5NU1BPSU5URVJfVFlQRV9NT1VTRSxlPXtldmVudHM6WyJNU1BvaW50ZXJEb3duIiwiTVNQb2ludGVyTW92ZSIsIk1TUG9pbnRlclVwIiwiTVNQb2ludGVyT3V0IiwiTVNQb2ludGVyT3ZlciIsIk1TUG9pbnRlckNhbmNlbCIsIk1TR290UG9pbnRlckNhcHR1cmUiLCJNU0xvc3RQb2ludGVyQ2FwdHVyZSJdLHJlZ2lzdGVyOmZ1bmN0aW9uKGEpe2IubGlzdGVuKGEsdGhpcy5ldmVudHMpfSx1bnJlZ2lzdGVyOmZ1bmN0aW9uKGEpe2IudW5saXN0ZW4oYSx0aGlzLmV2ZW50cyl9LFBPSU5URVJfVFlQRVM6WyIiLCJ1bmF2YWlsYWJsZSIsInRvdWNoIiwicGVuIiwibW91c2UiXSxwcmVwYXJlRXZlbnQ6ZnVuY3Rpb24oYSl7dmFyIGM9YTtyZXR1cm4gZCYmKGM9Yi5jbG9uZUV2ZW50KGEpLGMucG9pbnRlclR5cGU9dGhpcy5QT0lOVEVSX1RZUEVTW2EucG9pbnRlclR5cGVdKSxjfSxjbGVhbnVwOmZ1bmN0aW9uKGEpe2MuZGVsZXRlKGEpfSxNU1BvaW50ZXJEb3duOmZ1bmN0aW9uKGEpe2Muc2V0KGEucG9pbnRlcklkLGEpO3ZhciBkPXRoaXMucHJlcGFyZUV2ZW50KGEpO2IuZG93bihkKX0sTVNQb2ludGVyTW92ZTpmdW5jdGlvbihhKXt2YXIgYz10aGlzLnByZXBhcmVFdmVudChhKTtiLm1vdmUoYyl9LE1TUG9pbnRlclVwOmZ1bmN0aW9uKGEpe3ZhciBjPXRoaXMucHJlcGFyZUV2ZW50KGEpO2IudXAoYyksdGhpcy5jbGVhbnVwKGEucG9pbnRlcklkKX0sTVNQb2ludGVyT3V0OmZ1bmN0aW9uKGEpe3ZhciBjPXRoaXMucHJlcGFyZUV2ZW50KGEpO2IubGVhdmVPdXQoYyl9LE1TUG9pbnRlck92ZXI6ZnVuY3Rpb24oYSl7dmFyIGM9dGhpcy5wcmVwYXJlRXZlbnQoYSk7Yi5lbnRlck92ZXIoYyl9LE1TUG9pbnRlckNhbmNlbDpmdW5jdGlvbihhKXt2YXIgYz10aGlzLnByZXBhcmVFdmVudChhKTtiLmNhbmNlbChjKSx0aGlzLmNsZWFudXAoYS5wb2ludGVySWQpfSxNU0xvc3RQb2ludGVyQ2FwdHVyZTpmdW5jdGlvbihhKXt2YXIgYz1iLm1ha2VFdmVudCgibG9zdHBvaW50ZXJjYXB0dXJlIixhKTtiLmRpc3BhdGNoRXZlbnQoYyl9LE1TR290UG9pbnRlckNhcHR1cmU6ZnVuY3Rpb24oYSl7dmFyIGM9Yi5tYWtlRXZlbnQoImdvdHBvaW50ZXJjYXB0dXJlIixhKTtiLmRpc3BhdGNoRXZlbnQoYyl9fTthLm1zRXZlbnRzPWV9KHdpbmRvdy5Qb2ludGVyRXZlbnRzUG9seWZpbGwpLGZ1bmN0aW9uKGEpe3ZhciBiPWEuZGlzcGF0Y2hlcjtpZih2b2lkIDA9PT13aW5kb3cubmF2aWdhdG9yLnBvaW50ZXJFbmFibGVkKXtpZihPYmplY3QuZGVmaW5lUHJvcGVydHkod2luZG93Lm5hdmlnYXRvciwicG9pbnRlckVuYWJsZWQiLHt2YWx1ZTohMCxlbnVtZXJhYmxlOiEwfSksd2luZG93Lm5hdmlnYXRvci5tc1BvaW50ZXJFbmFibGVkKXt2YXIgYz13aW5kb3cubmF2aWdhdG9yLm1zTWF4VG91Y2hQb2ludHM7T2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbmRvdy5uYXZpZ2F0b3IsIm1heFRvdWNoUG9pbnRzIix7dmFsdWU6YyxlbnVtZXJhYmxlOiEwfSksYi5yZWdpc3RlclNvdXJjZSgibXMiLGEubXNFdmVudHMpfWVsc2UgYi5yZWdpc3RlclNvdXJjZSgibW91c2UiLGEubW91c2VFdmVudHMpLHZvaWQgMCE9PXdpbmRvdy5vbnRvdWNoc3RhcnQmJmIucmVnaXN0ZXJTb3VyY2UoInRvdWNoIixhLnRvdWNoRXZlbnRzKTtiLnJlZ2lzdGVyKGRvY3VtZW50KX19KHdpbmRvdy5Qb2ludGVyRXZlbnRzUG9seWZpbGwpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7aWYoIWUucG9pbnRlcm1hcC5oYXMoYSkpdGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkUG9pbnRlcklkIil9dmFyIGMsZCxlPWEuZGlzcGF0Y2hlcixmPXdpbmRvdy5uYXZpZ2F0b3I7Zi5tc1BvaW50ZXJFbmFibGVkPyhjPWZ1bmN0aW9uKGEpe2IoYSksdGhpcy5tc1NldFBvaW50ZXJDYXB0dXJlKGEpfSxkPWZ1bmN0aW9uKGEpe2IoYSksdGhpcy5tc1JlbGVhc2VQb2ludGVyQ2FwdHVyZShhKX0pOihjPWZ1bmN0aW9uKGEpe2IoYSksZS5zZXRDYXB0dXJlKGEsdGhpcyl9LGQ9ZnVuY3Rpb24oYSl7YihhKSxlLnJlbGVhc2VDYXB0dXJlKGEsdGhpcyl9KSxFbGVtZW50LnByb3RvdHlwZS5zZXRQb2ludGVyQ2FwdHVyZXx8T2JqZWN0LmRlZmluZVByb3BlcnRpZXMoRWxlbWVudC5wcm90b3R5cGUse3NldFBvaW50ZXJDYXB0dXJlOnt2YWx1ZTpjfSxyZWxlYXNlUG9pbnRlckNhcHR1cmU6e3ZhbHVlOmR9fSl9KHdpbmRvdy5Qb2ludGVyRXZlbnRzUG9seWZpbGwpLFBvaW50ZXJHZXN0dXJlRXZlbnQucHJvdG90eXBlLnByZXZlbnRUYXA9ZnVuY3Rpb24oKXt0aGlzLnRhcFByZXZlbnRlZD0hMH0sZnVuY3Rpb24oYSl7YT1hfHx7fSxhLnV0aWxzPXtMQ0E6e2ZpbmQ6ZnVuY3Rpb24oYSxiKXtpZihhPT09YilyZXR1cm4gYTtpZihhLmNvbnRhaW5zKXtpZihhLmNvbnRhaW5zKGIpKXJldHVybiBhO2lmKGIuY29udGFpbnMoYSkpcmV0dXJuIGJ9dmFyIGM9dGhpcy5kZXB0aChhKSxkPXRoaXMuZGVwdGgoYiksZT1jLWQ7Zm9yKGU+MD9hPXRoaXMud2FsayhhLGUpOmI9dGhpcy53YWxrKGIsLWUpO2EmJmImJmEhPT1iOylhPXRoaXMud2FsayhhLDEpLGI9dGhpcy53YWxrKGIsMSk7cmV0dXJuIGF9LHdhbGs6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9MDtiPmM7YysrKWE9YS5wYXJlbnROb2RlO3JldHVybiBhfSxkZXB0aDpmdW5jdGlvbihhKXtmb3IodmFyIGI9MDthOyliKyssYT1hLnBhcmVudE5vZGU7cmV0dXJuIGJ9fX0sYS5maW5kTENBPWZ1bmN0aW9uKGIsYyl7cmV0dXJuIGEudXRpbHMuTENBLmZpbmQoYixjKX0sd2luZG93LlBvaW50ZXJHZXN0dXJlcz1hfSh3aW5kb3cuUG9pbnRlckdlc3R1cmVzKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKCl7dGhpcy5pZHM9W10sdGhpcy5wb2ludGVycz1bXX1iLnByb3RvdHlwZT17c2V0OmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5pZHMuaW5kZXhPZihhKTtjPi0xP3RoaXMucG9pbnRlcnNbY109YjoodGhpcy5pZHMucHVzaChhKSx0aGlzLnBvaW50ZXJzLnB1c2goYikpfSxoYXM6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuaWRzLmluZGV4T2YoYSk+LTF9LCJkZWxldGUiOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuaWRzLmluZGV4T2YoYSk7Yj4tMSYmKHRoaXMuaWRzLnNwbGljZShiLDEpLHRoaXMucG9pbnRlcnMuc3BsaWNlKGIsMSkpfSxnZXQ6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5pZHMuaW5kZXhPZihhKTtyZXR1cm4gdGhpcy5wb2ludGVyc1tiXX0sZ2V0IHNpemUoKXtyZXR1cm4gdGhpcy5wb2ludGVycy5sZW5ndGh9LGNsZWFyOmZ1bmN0aW9uKCl7dGhpcy5pZHMubGVuZ3RoPTAsdGhpcy5wb2ludGVycy5sZW5ndGg9MH19LHdpbmRvdy5NYXAmJihiPXdpbmRvdy5NYXApLGEuUG9pbnRlck1hcD1ifSh3aW5kb3cuUG9pbnRlckdlc3R1cmVzKSxmdW5jdGlvbihhKXt2YXIgYj1bImJ1YmJsZXMiLCJjYW5jZWxhYmxlIiwidmlldyIsImRldGFpbCIsInNjcmVlblgiLCJzY3JlZW5ZIiwiY2xpZW50WCIsImNsaWVudFkiLCJjdHJsS2V5IiwiYWx0S2V5Iiwic2hpZnRLZXkiLCJtZXRhS2V5IiwiYnV0dG9uIiwicmVsYXRlZFRhcmdldCIsImJ1dHRvbnMiLCJwb2ludGVySWQiLCJ3aWR0aCIsImhlaWdodCIsInByZXNzdXJlIiwidGlsdFgiLCJ0aWx0WSIsInBvaW50ZXJUeXBlIiwiaHdUaW1lc3RhbXAiLCJpc1ByaW1hcnkiLCJ0eXBlIiwidGFyZ2V0IiwiY3VycmVudFRhcmdldCIsInNjcmVlblgiLCJzY3JlZW5ZIiwicGFnZVgiLCJwYWdlWSJdLGM9WyExLCExLG51bGwsbnVsbCwwLDAsMCwwLCExLCExLCExLCExLDAsbnVsbCwwLDAsMCwwLDAsMCwwLCIiLDAsITEsIiIsbnVsbCxudWxsLDAsMCwwLDBdLGQ9e2hhbmRsZWRFdmVudHM6bmV3IFdlYWtNYXAsdGFyZ2V0czpuZXcgV2Vha01hcCxoYW5kbGVyczp7fSxyZWNvZ25pemVyczp7fSxldmVudHM6e30scmVnaXN0ZXJSZWNvZ25pemVyOmZ1bmN0aW9uKGEsYil7dmFyIGM9Yjt0aGlzLnJlY29nbml6ZXJzW2FdPWMsYy5ldmVudHMuZm9yRWFjaChmdW5jdGlvbihhKXtpZihjW2FdKXt0aGlzLmV2ZW50c1thXT0hMDt2YXIgYj1jW2FdLmJpbmQoYyk7dGhpcy5hZGRIYW5kbGVyKGEsYil9fSx0aGlzKX0sYWRkSGFuZGxlcjpmdW5jdGlvbihhLGIpe3ZhciBjPWE7dGhpcy5oYW5kbGVyc1tjXXx8KHRoaXMuaGFuZGxlcnNbY109W10pLHRoaXMuaGFuZGxlcnNbY10ucHVzaChiKX0scmVnaXN0ZXJUYXJnZXQ6ZnVuY3Rpb24oYSl7dGhpcy5saXN0ZW4oT2JqZWN0LmtleXModGhpcy5ldmVudHMpLGEpfSx1bnJlZ2lzdGVyVGFyZ2V0OmZ1bmN0aW9uKGEpe3RoaXMudW5saXN0ZW4oT2JqZWN0LmtleXModGhpcy5ldmVudHMpLGEpfSxldmVudEhhbmRsZXI6ZnVuY3Rpb24oYSl7aWYoIXRoaXMuaGFuZGxlZEV2ZW50cy5nZXQoYSkpe3ZhciBiPWEudHlwZSxjPXRoaXMuaGFuZGxlcnNbYl07YyYmdGhpcy5tYWtlUXVldWUoYyxhKSx0aGlzLmhhbmRsZWRFdmVudHMuc2V0KGEsITApfX0sbWFrZVF1ZXVlOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5jbG9uZUV2ZW50KGIpO3NldFRpbWVvdXQodGhpcy5ydW5RdWV1ZS5iaW5kKHRoaXMsYSxjKSwwKX0scnVuUXVldWU6ZnVuY3Rpb24oYSxiKXt0aGlzLmN1cnJlbnRQb2ludGVySWQ9Yi5wb2ludGVySWQ7Zm9yKHZhciBjLGQ9MCxlPWEubGVuZ3RoO2U+ZCYmKGM9YVtkXSk7ZCsrKWMoYik7dGhpcy5jdXJyZW50UG9pbnRlcklkPTB9LGxpc3RlbjpmdW5jdGlvbihhLGIpe2EuZm9yRWFjaChmdW5jdGlvbihhKXt0aGlzLmFkZEV2ZW50KGEsdGhpcy5ib3VuZEhhbmRsZXIsITEsYil9LHRoaXMpfSx1bmxpc3RlbjpmdW5jdGlvbihhKXthLmZvckVhY2goZnVuY3Rpb24oYSl7dGhpcy5yZW1vdmVFdmVudChhLHRoaXMuYm91bmRIYW5kbGVyLCExLGluVGFyZ2V0KX0sdGhpcyl9LGFkZEV2ZW50OmZ1bmN0aW9uKGEsYixjLGQpe2QuYWRkRXZlbnRMaXN0ZW5lcihhLGIsYyl9LHJlbW92ZUV2ZW50OmZ1bmN0aW9uKGEsYixjLGQpe2QucmVtb3ZlRXZlbnRMaXN0ZW5lcihhLGIsYyl9LG1ha2VFdmVudDpmdW5jdGlvbihhLGIpe3JldHVybiBuZXcgUG9pbnRlckdlc3R1cmVFdmVudChhLGIpfSxjbG9uZUV2ZW50OmZ1bmN0aW9uKGEpe2Zvcih2YXIgZCxlPXt9LGY9MDtmPGIubGVuZ3RoO2YrKylkPWJbZl0sZVtkXT1hW2RdfHxjW2ZdO3JldHVybiBlfSxkaXNwYXRjaEV2ZW50OmZ1bmN0aW9uKGEsYil7dmFyIGM9Ynx8dGhpcy50YXJnZXRzLmdldChhKTtjJiYoYy5kaXNwYXRjaEV2ZW50KGEpLGEudGFwUHJldmVudGVkJiZ0aGlzLnByZXZlbnRUYXAodGhpcy5jdXJyZW50UG9pbnRlcklkKSl9LGFzeW5jRGlzcGF0Y2hFdmVudDpmdW5jdGlvbihhLGIpe3ZhciBjPWZ1bmN0aW9uKCl7dGhpcy5kaXNwYXRjaEV2ZW50KGEsYil9LmJpbmQodGhpcyk7c2V0VGltZW91dChjLDApfSxwcmV2ZW50VGFwOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMucmVjb2duaXplcnMudGFwO2ImJmIucHJldmVudFRhcChhKX19O2QuYm91bmRIYW5kbGVyPWQuZXZlbnRIYW5kbGVyLmJpbmQoZCksYS5kaXNwYXRjaGVyPWQ7dmFyIGU9W10sZj0hMTthLnJlZ2lzdGVyPWZ1bmN0aW9uKGIpe2lmKGYpe3ZhciBjPXdpbmRvdy5Qb2ludGVyRXZlbnRzUG9seWZpbGw7YyYmYy5yZWdpc3RlcihiKSxhLmRpc3BhdGNoZXIucmVnaXN0ZXJUYXJnZXQoYil9ZWxzZSBlLnB1c2goYil9LGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoIkRPTUNvbnRlbnRMb2FkZWQiLGZ1bmN0aW9uKCl7Zj0hMCxlLnB1c2goZG9jdW1lbnQpLGUuZm9yRWFjaChhLnJlZ2lzdGVyKX0pfSh3aW5kb3cuUG9pbnRlckdlc3R1cmVzKSxmdW5jdGlvbihhKXt2YXIgYj1hLmRpc3BhdGNoZXIsYz17SE9MRF9ERUxBWToyMDAsV0lHR0xFX1RIUkVTSE9MRDoxNixldmVudHM6WyJwb2ludGVyZG93biIsInBvaW50ZXJtb3ZlIiwicG9pbnRlcnVwIiwicG9pbnRlcmNhbmNlbCJdLGhlbGRQb2ludGVyOm51bGwsaG9sZEpvYjpudWxsLHB1bHNlOmZ1bmN0aW9uKCl7dmFyIGE9RGF0ZS5ub3coKS10aGlzLmhlbGRQb2ludGVyLnRpbWVTdGFtcCxiPXRoaXMuaGVsZD8iaG9sZHB1bHNlIjoiaG9sZCI7dGhpcy5maXJlSG9sZChiLGEpLHRoaXMuaGVsZD0hMH0sY2FuY2VsOmZ1bmN0aW9uKCl7Y2xlYXJJbnRlcnZhbCh0aGlzLmhvbGRKb2IpLHRoaXMuaGVsZCYmdGhpcy5maXJlSG9sZCgicmVsZWFzZSIpLHRoaXMuaGVsZD0hMSx0aGlzLmhlbGRQb2ludGVyPW51bGwsdGhpcy50YXJnZXQ9bnVsbCx0aGlzLmhvbGRKb2I9bnVsbH0scG9pbnRlcmRvd246ZnVuY3Rpb24oYSl7YS5pc1ByaW1hcnkmJiF0aGlzLmhlbGRQb2ludGVyJiYodGhpcy5oZWxkUG9pbnRlcj1hLHRoaXMudGFyZ2V0PWEudGFyZ2V0LHRoaXMuaG9sZEpvYj1zZXRJbnRlcnZhbCh0aGlzLnB1bHNlLmJpbmQodGhpcyksdGhpcy5IT0xEX0RFTEFZKSl9LHBvaW50ZXJ1cDpmdW5jdGlvbihhKXt0aGlzLmhlbGRQb2ludGVyJiZ0aGlzLmhlbGRQb2ludGVyLnBvaW50ZXJJZD09PWEucG9pbnRlcklkJiZ0aGlzLmNhbmNlbCgpfSxwb2ludGVyY2FuY2VsOmZ1bmN0aW9uKCl7dGhpcy5jYW5jZWwoKX0scG9pbnRlcm1vdmU6ZnVuY3Rpb24oYSl7aWYodGhpcy5oZWxkUG9pbnRlciYmdGhpcy5oZWxkUG9pbnRlci5wb2ludGVySWQ9PT1hLnBvaW50ZXJJZCl7dmFyIGI9YS5jbGllbnRYLXRoaXMuaGVsZFBvaW50ZXIuY2xpZW50WCxjPWEuY2xpZW50WS10aGlzLmhlbGRQb2ludGVyLmNsaWVudFk7YipiK2MqYz50aGlzLldJR0dMRV9USFJFU0hPTEQmJnRoaXMuY2FuY2VsKCl9fSxmaXJlSG9sZDpmdW5jdGlvbihhLGMpe3ZhciBkPXtwb2ludGVyVHlwZTp0aGlzLmhlbGRQb2ludGVyLnBvaW50ZXJUeXBlfTtjJiYoZC5ob2xkVGltZT1jKTt2YXIgZT1iLm1ha2VFdmVudChhLGQpO2IuZGlzcGF0Y2hFdmVudChlLHRoaXMudGFyZ2V0KSxlLnRhcFByZXZlbnRlZCYmYi5wcmV2ZW50VGFwKHRoaXMuaGVsZFBvaW50ZXIucG9pbnRlcklkKX19O2IucmVnaXN0ZXJSZWNvZ25pemVyKCJob2xkIixjKX0od2luZG93LlBvaW50ZXJHZXN0dXJlcyksZnVuY3Rpb24oYSl7dmFyIGI9YS5kaXNwYXRjaGVyLGM9bmV3IGEuUG9pbnRlck1hcCxkPXtldmVudHM6WyJwb2ludGVyZG93biIsInBvaW50ZXJtb3ZlIiwicG9pbnRlcnVwIiwicG9pbnRlcmNhbmNlbCJdLFdJR0dMRV9USFJFU0hPTEQ6NCxjbGFtcERpcjpmdW5jdGlvbihhKXtyZXR1cm4gYT4wPzE6LTF9LGNhbGNQb3NpdGlvbkRlbHRhOmZ1bmN0aW9uKGEsYil7dmFyIGM9MCxkPTA7cmV0dXJuIGEmJmImJihjPWIucGFnZVgtYS5wYWdlWCxkPWIucGFnZVktYS5wYWdlWSkse3g6Yyx5OmR9fSxmaXJlVHJhY2s6ZnVuY3Rpb24oYSxjLGQpe3ZhciBlPWQsZj10aGlzLmNhbGNQb3NpdGlvbkRlbHRhKGUuZG93bkV2ZW50LGMpLGc9dGhpcy5jYWxjUG9zaXRpb25EZWx0YShlLmxhc3RNb3ZlRXZlbnQsYyk7Zy54JiYoZS54RGlyZWN0aW9uPXRoaXMuY2xhbXBEaXIoZy54KSksZy55JiYoZS55RGlyZWN0aW9uPXRoaXMuY2xhbXBEaXIoZy55KSk7dmFyIGg9e2R4OmYueCxkeTpmLnksZGR4OmcueCxkZHk6Zy55LGNsaWVudFg6Yy5jbGllbnRYLGNsaWVudFk6Yy5jbGllbnRZLHBhZ2VYOmMucGFnZVgscGFnZVk6Yy5wYWdlWSxzY3JlZW5YOmMuc2NyZWVuWCxzY3JlZW5ZOmMuc2NyZWVuWSx4RGlyZWN0aW9uOmUueERpcmVjdGlvbix5RGlyZWN0aW9uOmUueURpcmVjdGlvbix0cmFja0luZm86ZS50cmFja0luZm8scG9pbnRlclR5cGU6Yy5wb2ludGVyVHlwZX07InRyYWNrZW5kIj09PWEmJihoLl9yZWxlYXNlVGFyZ2V0PWMudGFyZ2V0KTt2YXIgaT1iLm1ha2VFdmVudChhLGgpO2UubGFzdE1vdmVFdmVudD1jLGIuZGlzcGF0Y2hFdmVudChpLGUuZG93blRhcmdldCl9LHBvaW50ZXJkb3duOmZ1bmN0aW9uKGEpe2lmKGEuaXNQcmltYXJ5JiYoIm1vdXNlIj09PWEucG9pbnRlclR5cGU/MT09PWEuYnV0dG9uczohMCkpe3ZhciBiPXtkb3duRXZlbnQ6YSxkb3duVGFyZ2V0OmEudGFyZ2V0LHRyYWNrSW5mbzp7fSxsYXN0TW92ZUV2ZW50Om51bGwseERpcmVjdGlvbjowLHlEaXJlY3Rpb246MCx0cmFja2luZzohMX07Yy5zZXQoYS5wb2ludGVySWQsYil9fSxwb2ludGVybW92ZTpmdW5jdGlvbihhKXt2YXIgYj1jLmdldChhLnBvaW50ZXJJZCk7aWYoYilpZihiLnRyYWNraW5nKXRoaXMuZmlyZVRyYWNrKCJ0cmFjayIsYSxiKTtlbHNle3ZhciBkPXRoaXMuY2FsY1Bvc2l0aW9uRGVsdGEoYi5kb3duRXZlbnQsYSksZT1kLngqZC54K2QueSpkLnk7ZT50aGlzLldJR0dMRV9USFJFU0hPTEQmJihiLnRyYWNraW5nPSEwLHRoaXMuZmlyZVRyYWNrKCJ0cmFja3N0YXJ0IixiLmRvd25FdmVudCxiKSx0aGlzLmZpcmVUcmFjaygidHJhY2siLGEsYikpfX0scG9pbnRlcnVwOmZ1bmN0aW9uKGEpe3ZhciBiPWMuZ2V0KGEucG9pbnRlcklkKTtiJiYoYi50cmFja2luZyYmdGhpcy5maXJlVHJhY2soInRyYWNrZW5kIixhLGIpLGMuZGVsZXRlKGEucG9pbnRlcklkKSl9LHBvaW50ZXJjYW5jZWw6ZnVuY3Rpb24oYSl7dGhpcy5wb2ludGVydXAoYSl9fTtiLnJlZ2lzdGVyUmVjb2duaXplcigidHJhY2siLGQpfSh3aW5kb3cuUG9pbnRlckdlc3R1cmVzKSxmdW5jdGlvbihhKXt2YXIgYj1hLmRpc3BhdGNoZXIsYz17TUlOX1ZFTE9DSVRZOi41LE1BWF9RVUVVRTo0LG1vdmVRdWV1ZTpbXSx0YXJnZXQ6bnVsbCxwb2ludGVySWQ6bnVsbCxldmVudHM6WyJwb2ludGVyZG93biIsInBvaW50ZXJtb3ZlIiwicG9pbnRlcnVwIiwicG9pbnRlcmNhbmNlbCJdLHBvaW50ZXJkb3duOmZ1bmN0aW9uKGEpe2EuaXNQcmltYXJ5JiYhdGhpcy5wb2ludGVySWQmJih0aGlzLnBvaW50ZXJJZD1hLnBvaW50ZXJJZCx0aGlzLnRhcmdldD1hLnRhcmdldCx0aGlzLmFkZE1vdmUoYSkpfSxwb2ludGVybW92ZTpmdW5jdGlvbihhKXthLnBvaW50ZXJJZD09PXRoaXMucG9pbnRlcklkJiZ0aGlzLmFkZE1vdmUoYSl9LHBvaW50ZXJ1cDpmdW5jdGlvbihhKXthLnBvaW50ZXJJZD09PXRoaXMucG9pbnRlcklkJiZ0aGlzLmZpcmVGbGljayhhKSx0aGlzLmNsZWFudXAoKX0scG9pbnRlcmNhbmNlbDpmdW5jdGlvbigpe3RoaXMuY2xlYW51cCgpfSxjbGVhbnVwOmZ1bmN0aW9uKCl7dGhpcy5tb3ZlUXVldWU9W10sdGhpcy50YXJnZXQ9bnVsbCx0aGlzLnBvaW50ZXJJZD1udWxsfSxhZGRNb3ZlOmZ1bmN0aW9uKGEpe3RoaXMubW92ZVF1ZXVlLmxlbmd0aD49dGhpcy5NQVhfUVVFVUUmJnRoaXMubW92ZVF1ZXVlLnNoaWZ0KCksdGhpcy5tb3ZlUXVldWUucHVzaChhKX0sZmlyZUZsaWNrOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYyxkLGUsZixnLGgsaSxqPWEsaz10aGlzLm1vdmVRdWV1ZS5sZW5ndGgsbD0wLG09MCxuPTAsbz0wO2s+byYmKGk9dGhpcy5tb3ZlUXVldWVbb10pO28rKyljPWoudGltZVN0YW1wLWkudGltZVN0YW1wLGQ9ai5jbGllbnRYLWkuY2xpZW50WCxlPWouY2xpZW50WS1pLmNsaWVudFksZj1kL2MsZz1lL2MsaD1NYXRoLnNxcnQoZipmK2cqZyksaD5uJiYobD1mLG09ZyxuPWgpO3ZhciBwPU1hdGguYWJzKGwpPk1hdGguYWJzKG0pPyJ4IjoieSIscT10aGlzLmNhbGNBbmdsZShsLG0pO2lmKE1hdGguYWJzKG4pPj10aGlzLk1JTl9WRUxPQ0lUWSl7dmFyIHI9Yi5tYWtlRXZlbnQoImZsaWNrIix7eFZlbG9jaXR5OmwseVZlbG9jaXR5Om0sdmVsb2NpdHk6bixhbmdsZTpxLG1ham9yQXhpczpwLHBvaW50ZXJUeXBlOmEucG9pbnRlclR5cGV9KTtiLmRpc3BhdGNoRXZlbnQocix0aGlzLnRhcmdldCl9fSxjYWxjQW5nbGU6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gMTgwKk1hdGguYXRhbjIoYixhKS9NYXRoLlBJfX07Yi5yZWdpc3RlclJlY29nbml6ZXIoImZsaWNrIixjKX0od2luZG93LlBvaW50ZXJHZXN0dXJlcyksZnVuY3Rpb24oYSl7dmFyIGI9YS5kaXNwYXRjaGVyLGM9bmV3IGEuUG9pbnRlck1hcCxkPXtldmVudHM6WyJwb2ludGVyZG93biIsInBvaW50ZXJtb3ZlIiwicG9pbnRlcnVwIiwicG9pbnRlcmNhbmNlbCIsImtleXVwIl0scG9pbnRlcmRvd246ZnVuY3Rpb24oYSl7YS5pc1ByaW1hcnkmJiFhLnRhcFByZXZlbnRlZCYmYy5zZXQoYS5wb2ludGVySWQse3RhcmdldDphLnRhcmdldCx4OmEuY2xpZW50WCx5OmEuY2xpZW50WX0pfSxwb2ludGVybW92ZTpmdW5jdGlvbihhKXtpZihhLmlzUHJpbWFyeSl7dmFyIGI9Yy5nZXQoYS5wb2ludGVySWQpO2ImJmEudGFwUHJldmVudGVkJiZjLmRlbGV0ZShhLnBvaW50ZXJJZCl9fSxwb2ludGVydXA6ZnVuY3Rpb24oZCl7dmFyIGU9Yy5nZXQoZC5wb2ludGVySWQpO2lmKGUmJiFkLnRhcFByZXZlbnRlZCl7dmFyIGY9YS5maW5kTENBKGUudGFyZ2V0LGQudGFyZ2V0KTtpZihmKXt2YXIgZz1iLm1ha2VFdmVudCgidGFwIix7eDpkLmNsaWVudFgseTpkLmNsaWVudFksZGV0YWlsOmQuZGV0YWlsLHBvaW50ZXJUeXBlOmQucG9pbnRlclR5cGV9KTtiLmRpc3BhdGNoRXZlbnQoZyxmKX19Yy5kZWxldGUoZC5wb2ludGVySWQpfSxwb2ludGVyY2FuY2VsOmZ1bmN0aW9uKGEpe2MuZGVsZXRlKGEucG9pbnRlcklkKX0sa2V5dXA6ZnVuY3Rpb24oYSl7dmFyIGM9YS5rZXlDb2RlO2lmKDMyPT09Yyl7dmFyIGQ9YS50YXJnZXQ7ZCBpbnN0YW5jZW9mIEhUTUxJbnB1dEVsZW1lbnR8fGQgaW5zdGFuY2VvZiBIVE1MVGV4dEFyZWFFbGVtZW50fHxiLmRpc3BhdGNoRXZlbnQoYi5tYWtlRXZlbnQoInRhcCIse3g6MCx5OjAsZGV0YWlsOjAscG9pbnRlclR5cGU6InVuYXZhaWxhYmxlIn0pLGQpfX0scHJldmVudFRhcDpmdW5jdGlvbihhKXtjLmRlbGV0ZShhKX19O2IucmVnaXN0ZXJSZWNvZ25pemVyKCJ0YXAiLGQpfSh3aW5kb3cuUG9pbnRlckdlc3R1cmVzKSxQb2x5bWVyPXt9LGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoKXt2YXIgYT1Qb2x5bWVyLnZlaWxlZEVsZW1lbnRzO2lmKGEpZm9yKHZhciBiLGQ9MCxlPWEubGVuZ3RoO2U+ZCYmKGI9YVtkXSk7ZCsrKWMoYil9ZnVuY3Rpb24gYyhhKXtmb3IodmFyIGIsYz1kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGEpLGQ9MCxmPWMubGVuZ3RoO2Y+ZCYmKGI9Y1tkXSk7ZCsrKWIuY2xhc3NMaXN0LmFkZChlKX1mdW5jdGlvbiBkKCl7cmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZ1bmN0aW9uKCl7Zm9yKHZhciBhLGI9ZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgiLiIrZSksYz0wLGQ9Yi5sZW5ndGg7ZD5jJiYoYT1iW2NdKTtjKyspYS5jbGFzc0xpc3QuYWRkKGYpLGEuY2xhc3NMaXN0LnJlbW92ZShlKTtpZihiLmxlbmd0aCl7dmFyIGc9ZnVuY3Rpb24oKXtmb3IodmFyIGEsYz0wLGQ9Yi5sZW5ndGg7ZD5jJiYoYT1iW2NdKTtjKyspYS5jbGFzc0xpc3QucmVtb3ZlKGYpO2RvY3VtZW50LmJvZHkucmVtb3ZlRXZlbnRMaXN0ZW5lcihqLGcsITEpfTtkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoaixnLCExKX19KX1hLnZlaWxlZEVsZW1lbnRzPVsiYm9keSJdO3ZhciBlPSJwb2x5bWVyLXZlaWxlZCIsZj0icG9seW1lci11bnZlaWwiLGc9LjMsaD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzdHlsZSIpO2gudGV4dENvbnRlbnQ9Ii4iK2UrIiB7IG9wYWNpdHk6IDA7IH0gXG4uIitmKyJ7IC13ZWJraXQtdHJhbnNpdGlvbjogb3BhY2l0eSAiK2crInM7IHRyYW5zaXRpb246IG9wYWNpdHkgIitnKyJzOyB9XG4iO3ZhciBpPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoImhlYWQiKTtpLmluc2VydEJlZm9yZShoLGkuZmlyc3RDaGlsZCk7dmFyIGo9dm9pZCAwIT09ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlLndlYmtpdFRyYW5zaXRpb24/IndlYmtpdFRyYW5zaXRpb25FbmQiOiJ0cmFuc2l0aW9uZW5kIjtkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJET01Db250ZW50TG9hZGVkIixiKSx3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigiV2ViQ29tcG9uZW50c1JlYWR5IixkKSxhLnVudmVpbEVsZW1lbnRzPWR9KFBvbHltZXIpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSxiKXtyZXR1cm4gYSYmYiYmT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoYikuZm9yRWFjaChmdW5jdGlvbihjKXt2YXIgZD1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGIsYyk7ZCYmKE9iamVjdC5kZWZpbmVQcm9wZXJ0eShhLGMsZCksImZ1bmN0aW9uIj09dHlwZW9mIGQudmFsdWUmJihkLnZhbHVlLm5vbT1jKSl9KSxhfWEuZXh0ZW5kPWJ9KFBvbHltZXIpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSxiLGQpe3JldHVybiBhP2Euc3RvcCgpOmE9bmV3IGModGhpcyksYS5nbyhiLGQpLGF9dmFyIGM9ZnVuY3Rpb24oYSl7dGhpcy5jb250ZXh0PWF9O2MucHJvdG90eXBlPXtnbzpmdW5jdGlvbihhLGIpe3RoaXMuY2FsbGJhY2s9YSx0aGlzLmhhbmRsZT1zZXRUaW1lb3V0KHRoaXMuY29tcGxldGUuYmluZCh0aGlzKSxiKX0sc3RvcDpmdW5jdGlvbigpe3RoaXMuaGFuZGxlJiYoY2xlYXJUaW1lb3V0KHRoaXMuaGFuZGxlKSx0aGlzLmhhbmRsZT1udWxsKX0sY29tcGxldGU6ZnVuY3Rpb24oKXt0aGlzLmhhbmRsZSYmKHRoaXMuc3RvcCgpLHRoaXMuY2FsbGJhY2suY2FsbCh0aGlzLmNvbnRleHQpKX19LGEuam9iPWJ9KFBvbHltZXIpLGZ1bmN0aW9uKCl7dmFyIGE9e307SFRNTEVsZW1lbnQucmVnaXN0ZXI9ZnVuY3Rpb24oYixjKXthW2JdPWN9LEhUTUxFbGVtZW50LmdldFByb3RvdHlwZUZvclRhZz1mdW5jdGlvbihiKXt2YXIgYz1iP2FbYl06SFRNTEVsZW1lbnQucHJvdG90eXBlO3JldHVybiBjfHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZG9jdW1lbnQuY3JlYXRlRWxlbWVudChiKSl9O3ZhciBiPUV2ZW50LnByb3RvdHlwZS5zdG9wUHJvcGFnYXRpb247RXZlbnQucHJvdG90eXBlLnN0b3BQcm9wYWdhdGlvbj1mdW5jdGlvbigpe3RoaXMuY2FuY2VsQnViYmxlPSEwLGIuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxIVE1MSW1wb3J0cy5pbXBvcnRlci5wcmVsb2FkU2VsZWN0b3JzKz0iLCBwb2x5bWVyLWVsZW1lbnQgbGlua1tyZWw9c3R5bGVzaGVldF0ifShQb2x5bWVyKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEpe3ZhciBjPWIuY2FsbGVyLGc9Yy5ub20saD1jLl9zdXBlcjtpZihofHwoZ3x8KGc9Yy5ub209ZS5jYWxsKHRoaXMsYykpLGd8fGNvbnNvbGUud2FybigiY2FsbGVkIHN1cGVyKCkgb24gYSBtZXRob2Qgbm90IGluc3RhbGxlZCBkZWNsYXJhdGl2ZWx5IChoYXMgbm8gLm5vbSBwcm9wZXJ0eSkiKSxoPWQoYyxnLGYodGhpcykpKSxoKXt2YXIgaT1oW2ddO3JldHVybiBpLl9zdXBlcnx8ZChpLGcsaCksaS5hcHBseSh0aGlzLGF8fFtdKX19ZnVuY3Rpb24gYyhhLGIsYyl7Zm9yKDthOyl7aWYoYVtiXSE9PWMmJmFbYl0pcmV0dXJuIGE7YT1mKGEpfX1mdW5jdGlvbiBkKGEsYixkKXtyZXR1cm4gYS5fc3VwZXI9YyhkLGIsYSksYS5fc3VwZXImJihhLl9zdXBlcltiXS5ub209YiksYS5fc3VwZXJ9ZnVuY3Rpb24gZShhKXtmb3IodmFyIGI9dGhpcy5fX3Byb3RvX187YiYmYiE9PUhUTUxFbGVtZW50LnByb3RvdHlwZTspe2Zvcih2YXIgYyxkPU9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGIpLGU9MCxmPWQubGVuZ3RoO2Y+ZSYmKGM9ZFtlXSk7ZSsrKXt2YXIgZz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGIsYyk7aWYoImZ1bmN0aW9uIj09dHlwZW9mIGcudmFsdWUmJmcudmFsdWU9PT1hKXJldHVybiBjfWI9Yi5fX3Byb3RvX199fWZ1bmN0aW9uIGYoYSl7cmV0dXJuIGEuX19wcm90b19ffWEuc3VwZXI9Yn0oUG9seW1lciksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhLGIpe3ZhciBkPXR5cGVvZiBiO3JldHVybiBiIGluc3RhbmNlb2YgRGF0ZSYmKGQ9ImRhdGUiKSxjW2RdKGEsYil9dmFyIGM9e3N0cmluZzpmdW5jdGlvbihhKXtyZXR1cm4gYX0sZGF0ZTpmdW5jdGlvbihhKXtyZXR1cm4gbmV3IERhdGUoRGF0ZS5wYXJzZShhKXx8RGF0ZS5ub3coKSl9LCJib29sZWFuIjpmdW5jdGlvbihhKXtyZXR1cm4iIj09PWE/ITA6ImZhbHNlIj09PWE/ITE6ISFhfSxudW1iZXI6ZnVuY3Rpb24oYSl7dmFyIGI9cGFyc2VGbG9hdChhKTtyZXR1cm4gU3RyaW5nKGIpPT09YT9iOmF9LG9iamVjdDpmdW5jdGlvbihhLGIpe2lmKG51bGw9PT1iKXJldHVybiBhO3RyeXtyZXR1cm4gSlNPTi5wYXJzZShhLnJlcGxhY2UoLycvZywnIicpKX1jYXRjaChjKXtyZXR1cm4gYX19fTthLmRlc2VyaWFsaXplVmFsdWU9Yn0oUG9seW1lciksZnVuY3Rpb24oYSl7dmFyIGI9e307Yi5kZWNsYXJhdGlvbj17fSxiLmluc3RhbmNlPXt9LGEuYXBpPWJ9KFBvbHltZXIpLGZ1bmN0aW9uKGEpe3ZhciBiPXthc3luYzpmdW5jdGlvbihhLGIsYyl7UGxhdGZvcm0uZmx1c2goKSxiPWImJmIubGVuZ3RoP2I6W2JdO3ZhciBkPWZ1bmN0aW9uKCl7KHRoaXNbYV18fGEpLmFwcGx5KHRoaXMsYil9LmJpbmQodGhpcyk7cmV0dXJuIGM/c2V0VGltZW91dChkLGMpOnJlcXVlc3RBbmltYXRpb25GcmFtZShkKX0sZmlyZTpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1jfHx0aGlzO3JldHVybiBlLmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KGEse2J1YmJsZXM6dm9pZCAwIT09ZD9kOiEwLGRldGFpbDpifSkpLGJ9LGFzeW5jRmlyZTpmdW5jdGlvbigpe3RoaXMuYXN5bmMoImZpcmUiLGFyZ3VtZW50cyl9LGNsYXNzRm9sbG93czpmdW5jdGlvbihhLGIsYyl7YiYmYi5jbGFzc0xpc3QucmVtb3ZlKGMpLGEmJmEuY2xhc3NMaXN0LmFkZChjKX19O2IuYXN5bmNNZXRob2Q9Yi5hc3luYyxhLmFwaS5pbnN0YW5jZS51dGlscz1ifShQb2x5bWVyKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEpe2Zvcig7YS5wYXJlbnROb2RlOylhPWEucGFyZW50Tm9kZTtyZXR1cm4gYS5ob3N0fXZhciBjPXdpbmRvdy5sb2dGbGFnc3x8e30sZD0ib24tIixlPXtFVkVOVF9QUkVGSVg6ZCxoYXNFdmVudFByZWZpeDpmdW5jdGlvbihhKXtyZXR1cm4gYSYmIm8iPT09YVswXSYmIm4iPT09YVsxXSYmIi0iPT09YVsyXX0scmVtb3ZlRXZlbnRQcmVmaXg6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuc2xpY2UoZil9LGFkZEhvc3RMaXN0ZW5lcnM6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmV2ZW50RGVsZWdhdGVzO2MuZXZlbnRzJiZPYmplY3Qua2V5cyhhKS5sZW5ndGg+MCYmY29uc29sZS5sb2coIlslc10gYWRkSG9zdExpc3RlbmVyczoiLHRoaXMubG9jYWxOYW1lLGEpLHRoaXMuYWRkTm9kZUxpc3RlbmVycyh0aGlzLGEsdGhpcy5ob3N0RXZlbnRMaXN0ZW5lcil9LGFkZE5vZGVMaXN0ZW5lcnM6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkO2Zvcih2YXIgZSBpbiBiKWR8fChkPWMuYmluZCh0aGlzKSksdGhpcy5hZGROb2RlTGlzdGVuZXIoYSxlLGQpfSxhZGROb2RlTGlzdGVuZXI6ZnVuY3Rpb24oYSxiLGMpe2EuYWRkRXZlbnRMaXN0ZW5lcihiLGMpfSxob3N0RXZlbnRMaXN0ZW5lcjpmdW5jdGlvbihhKXtpZighYS5jYW5jZWxCdWJibGUpe2MuZXZlbnRzJiZjb25zb2xlLmdyb3VwKCJbJXNdOiBob3N0RXZlbnRMaXN0ZW5lciglcykiLHRoaXMubG9jYWxOYW1lLGEudHlwZSk7dmFyIGI9dGhpcy5maW5kRXZlbnREZWxlZ2F0ZShhKTtiJiYoYy5ldmVudHMmJmNvbnNvbGUubG9nKCJbJXNdIGZvdW5kIGhvc3QgaGFuZGxlciBuYW1lIFslc10iLHRoaXMubG9jYWxOYW1lLGIpLHRoaXMuZGlzcGF0Y2hNZXRob2QodGhpcyxiLFthLGEuZGV0YWlsLHRoaXNdKSksYy5ldmVudHMmJmNvbnNvbGUuZ3JvdXBFbmQoKX19LGZpbmRFdmVudERlbGVnYXRlOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmV2ZW50RGVsZWdhdGVzW2EudHlwZV19LGRpc3BhdGNoTWV0aG9kOmZ1bmN0aW9uKGEsYixkKXtpZihhKXtjLmV2ZW50cyYmY29uc29sZS5ncm91cCgiWyVzXSBkaXNwYXRjaCBbJXNdIixhLmxvY2FsTmFtZSxiKTt2YXIgZT0iZnVuY3Rpb24iPT10eXBlb2YgYj9iOmFbYl07ZSYmZVtkPyJhcHBseSI6ImNhbGwiXShhLGQpLGMuZXZlbnRzJiZjb25zb2xlLmdyb3VwRW5kKCksUGxhdGZvcm0uZmx1c2goKX19LHByZXBhcmVCaW5kaW5nOmZ1bmN0aW9uKGEsZCl7cmV0dXJuIGUuaGFzRXZlbnRQcmVmaXgoZCk/ZnVuY3Rpb24oZCxmLGcpe2MuZXZlbnRzJiZjb25zb2xlLmxvZygnZXZlbnQ6IFslc10uJXMgPT4gWyVzXS4lcygpIicsZy5sb2NhbE5hbWUsZixkLmxvY2FsTmFtZSxhKTt2YXIgaD1mdW5jdGlvbihjKXt2YXIgZT1iKGcpO2lmKGUmJmUuZGlzcGF0Y2hNZXRob2Qpe3ZhciBmPWUsaD1hOyJAIj09YVswXSYmKGY9ZCxoPVBhdGguZ2V0KGEuc2xpY2UoMSkpLmdldFZhbHVlRnJvbShkKSksZS5kaXNwYXRjaE1ldGhvZChmLGgsW2MsYy5kZXRhaWwsZ10pfX0saT1lLnJlbW92ZUV2ZW50UHJlZml4KGYpO3JldHVybiBnLmFkZEV2ZW50TGlzdGVuZXIoaSxoLCExKSx7Y2xvc2U6ZnVuY3Rpb24oKXtjLmV2ZW50cyYmY29uc29sZS5sb2coJ2V2ZW50LnJlbW92ZTogWyVzXS4lcyA9PiBbJXNdLiVzKCkiJyxnLmxvY2FsTmFtZSxmLGQubG9jYWxOYW1lLGEpLGcucmVtb3ZlRXZlbnRMaXN0ZW5lcihpLGgsITEpfX19OnZvaWQgMH19LGY9ZC5sZW5ndGg7YS5hcGkuaW5zdGFuY2UuZXZlbnRzPWV9KFBvbHltZXIpLGZ1bmN0aW9uKGEpe3ZhciBiPXtjb3B5SW5zdGFuY2VBdHRyaWJ1dGVzOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5faW5zdGFuY2VBdHRyaWJ1dGVzO2Zvcih2YXIgYiBpbiBhKXRoaXMuaGFzQXR0cmlidXRlKGIpfHx0aGlzLnNldEF0dHJpYnV0ZShiLGFbYl0pfSx0YWtlQXR0cmlidXRlczpmdW5jdGlvbigpe2lmKHRoaXMuX3B1Ymxpc2hMQylmb3IodmFyIGEsYj0wLGM9dGhpcy5hdHRyaWJ1dGVzLGQ9Yy5sZW5ndGg7KGE9Y1tiXSkmJmQ+YjtiKyspdGhpcy5hdHRyaWJ1dGVUb1Byb3BlcnR5KGEubmFtZSxhLnZhbHVlKX0sYXR0cmlidXRlVG9Qcm9wZXJ0eTpmdW5jdGlvbihiLGMpe3ZhciBiPXRoaXMucHJvcGVydHlGb3JBdHRyaWJ1dGUoYik7aWYoYil7aWYoYyYmYy5zZWFyY2goYS5iaW5kUGF0dGVybik+PTApcmV0dXJuO3ZhciBkPXRoaXNbYl0sYz10aGlzLmRlc2VyaWFsaXplVmFsdWUoYyxkKTtjIT09ZCYmKHRoaXNbYl09Yyl9fSxwcm9wZXJ0eUZvckF0dHJpYnV0ZTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLl9wdWJsaXNoTEMmJnRoaXMuX3B1Ymxpc2hMQ1thXTtyZXR1cm4gYn0sZGVzZXJpYWxpemVWYWx1ZTpmdW5jdGlvbihiLGMpe3JldHVybiBhLmRlc2VyaWFsaXplVmFsdWUoYixjKX0sc2VyaWFsaXplVmFsdWU6ZnVuY3Rpb24oYSxiKXtyZXR1cm4iYm9vbGVhbiI9PT1iP2E/IiI6dm9pZCAwOiJvYmplY3QiIT09YiYmdm9pZCAwIT09YT9hOnZvaWQgMH0scmVmbGVjdFByb3BlcnR5VG9BdHRyaWJ1dGU6ZnVuY3Rpb24oYSl7dmFyIGI9dHlwZW9mIHRoaXNbYV0sYz10aGlzLnNlcmlhbGl6ZVZhbHVlKHRoaXNbYV0sYik7dm9pZCAwIT09Yz90aGlzLnNldEF0dHJpYnV0ZShhLGMpOiJib29sZWFuIj09PWImJnRoaXMucmVtb3ZlQXR0cmlidXRlKGEpfX07YS5hcGkuaW5zdGFuY2UuYXR0cmlidXRlcz1ifShQb2x5bWVyKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEpe3JldHVybiBuZXcgQ29tcG91bmRQYXRoT2JzZXJ2ZXIoZnVuY3Rpb24oYixjLGQsZSl7YS5ub3RpZnlQcm9wZXJ0eUNoYW5nZXMoYixjLGQsZSl9LGEsdm9pZCAwLHZvaWQgMCl9ZnVuY3Rpb24gYyhhLGIsYyxlKXtkLmJpbmQmJmNvbnNvbGUubG9nKGYsYy5sb2NhbE5hbWV8fCJvYmplY3QiLGUsYS5sb2NhbE5hbWUsYik7dmFyIGc9UGF0aC5nZXQoZSksaD1nLmdldFZhbHVlRnJvbShjKTtyZXR1cm4obnVsbD09PWh8fHZvaWQgMD09PWgpJiZnLnNldFZhbHVlRnJvbShjLGFbYl0pLFBhdGhPYnNlcnZlci5kZWZpbmVQcm9wZXJ0eShhLGIse29iamVjdDpjLHBhdGg6ZX0pfXZhciBkPXdpbmRvdy5sb2dGbGFnc3x8e30sZT17b2JzZXJ2ZVByb3BlcnRpZXM6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLl9vYnNlcnZlTmFtZXMsYz10aGlzLl9wdWJsaXNoTmFtZXM7aWYoYSYmYS5sZW5ndGh8fGMmJmMubGVuZ3RoKXtmb3IodmFyIGQsZT10aGlzLl9wcm9wZXJ0eU9ic2VydmVyPWIodGhpcyksZj0wLGc9YS5sZW5ndGg7Zz5mJiYoZD1hW2ZdKTtmKyspe2UuYWRkUGF0aCh0aGlzLGQpO3ZhciBoPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGhpcy5fX3Byb3RvX18sZCk7aCYmaC52YWx1ZSYmdGhpcy5vYnNlcnZlQXJyYXlWYWx1ZShkLGgudmFsdWUsbnVsbCl9Zm9yKHZhciBkLGY9MCxnPWMubGVuZ3RoO2c+ZiYmKGQ9Y1tmXSk7ZisrKXRoaXMub2JzZXJ2ZSYmdm9pZCAwIT09dGhpcy5vYnNlcnZlW2RdfHxlLmFkZFBhdGgodGhpcyxkKTtlLnN0YXJ0KCl9fSxub3RpZnlQcm9wZXJ0eUNoYW5nZXM6ZnVuY3Rpb24oYSxiLGMsZCl7Zm9yKHZhciBlLGYsZz17fSxoPTAsaT1jLmxlbmd0aDtpPmg7aCsrKWNbaF0mJihlPWRbMipoKzFdLHZvaWQgMCE9PXRoaXMucHVibGlzaFtlXSYmdGhpcy5yZWZsZWN0UHJvcGVydHlUb0F0dHJpYnV0ZShlKSxmPXRoaXMub2JzZXJ2ZVtlXSxmJiYodGhpcy5vYnNlcnZlQXJyYXlWYWx1ZShlLGFbaF0sYltoXSksZ1tmXXx8KGdbZl09ITAsdGhpcy5pbnZva2VNZXRob2QoZixbYltoXSxhW2hdLGFyZ3VtZW50c10pKSkpfSxvYnNlcnZlQXJyYXlWYWx1ZTpmdW5jdGlvbihhLGIsYyl7dmFyIGU9dGhpcy5vYnNlcnZlW2FdO2lmKGUmJihBcnJheS5pc0FycmF5KGMpJiYoZC5vYnNlcnZlJiZjb25zb2xlLmxvZygiWyVzXSBvYnNlcnZlQXJyYXlWYWx1ZTogdW5yZWdpc3RlciBvYnNlcnZlciBbJXNdIix0aGlzLmxvY2FsTmFtZSxhKSx0aGlzLnVucmVnaXN0ZXJPYnNlcnZlcihhKyJfX2FycmF5IikpLEFycmF5LmlzQXJyYXkoYikpKXtkLm9ic2VydmUmJmNvbnNvbGUubG9nKCJbJXNdIG9ic2VydmVBcnJheVZhbHVlOiByZWdpc3RlciBvYnNlcnZlciBbJXNdIix0aGlzLmxvY2FsTmFtZSxhLGIpO3ZhciBmPXRoaXMsZz1uZXcgQXJyYXlPYnNlcnZlcihiLGZ1bmN0aW9uKGEsYil7Zi5pbnZva2VNZXRob2QoZSxbYl0pfSk7dGhpcy5yZWdpc3Rlck9ic2VydmVyKGErIl9fYXJyYXkiLGcpfX0sYmluZFByb3BlcnR5OmZ1bmN0aW9uKGEsYixkKXtyZXR1cm4gYyh0aGlzLGEsYixkKX0sdW5iaW5kQWxsUHJvcGVydGllczpmdW5jdGlvbigpe3RoaXMuX3Byb3BlcnR5T2JzZXJ2ZXImJnRoaXMuX3Byb3BlcnR5T2JzZXJ2ZXIuY2xvc2UoKSx0aGlzLnVucmVnaXN0ZXJPYnNlcnZlcnMoKX0sdW5iaW5kUHJvcGVydHk6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMudW5yZWdpc3Rlck9ic2VydmVyKGEpfSxpbnZva2VNZXRob2Q6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzW2FdfHxhOyJmdW5jdGlvbiI9PXR5cGVvZiBjJiZjLmFwcGx5KHRoaXMsYil9LHJlZ2lzdGVyT2JzZXJ2ZXI6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLl9vYnNlcnZlcnN8fCh0aGlzLl9vYnNlcnZlcnM9e30pO2NbYV09Yn0sdW5yZWdpc3Rlck9ic2VydmVyOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuX29ic2VydmVycztyZXR1cm4gYiYmYlthXT8oYlthXS5jbG9zZSgpLGJbYV09bnVsbCwhMCk6dm9pZCAwfSx1bnJlZ2lzdGVyT2JzZXJ2ZXJzOmZ1bmN0aW9uKCl7aWYodGhpcy5fb2JzZXJ2ZXJzKXtmb3IodmFyIGEsYixjPU9iamVjdC5rZXlzKHRoaXMuX29ic2VydmVycyksZD0wLGU9Yy5sZW5ndGg7ZT5kJiYoYT1jW2RdKTtkKyspYj10aGlzLl9vYnNlcnZlcnNbYV0sYi5jbG9zZSgpO3RoaXMuX29ic2VydmVycz17fX19fSxmPSJbJXNdOiBiaW5kUHJvcGVydGllczogWyVzXSB0byBbJXNdLlslc10iO2EuYXBpLmluc3RhbmNlLnByb3BlcnRpZXM9ZX0oUG9seW1lciksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhKXtkKGEsYyl9ZnVuY3Rpb24gYyhhKXthLnVuYmluZEFsbCgpfWZ1bmN0aW9uIGQoYSxiKXtpZihhKXtiKGEpO2Zvcih2YXIgYz1hLmZpcnN0Q2hpbGQ7YztjPWMubmV4dFNpYmxpbmcpZChjLGIpfX12YXIgZT13aW5kb3cubG9nRmxhZ3N8fDAsZj1hLmFwaS5pbnN0YW5jZS5ldmVudHMsZz1uZXcgUG9seW1lckV4cHJlc3Npb25zLGg9Zy5wcmVwYXJlQmluZGluZztnLnByZXBhcmVCaW5kaW5nPWZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gZi5wcmVwYXJlQmluZGluZyhhLGIsYyl8fGguY2FsbCh0aGlzLGEsYixjKX07dmFyIGk9e3N5bnRheDpnLGluc3RhbmNlVGVtcGxhdGU6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuY3JlYXRlSW5zdGFuY2UodGhpcyx0aGlzLnN5bnRheCl9LGJpbmQ6ZnVuY3Rpb24oYSxiLGMpe3RoaXMuX2VsZW1lbnRQcmVwYXJlZHx8dGhpcy5wcmVwYXJlRWxlbWVudCgpO3ZhciBkPXRoaXMucHJvcGVydHlGb3JBdHRyaWJ1dGUoYSk7aWYoZCl7dGhpcy51bmJpbmQoYSk7dmFyIGU9dGhpcy5iaW5kUHJvcGVydHkoZCxiLGMpO3JldHVybiBlLnBhdGg9Yyx0aGlzLnJlZmxlY3RQcm9wZXJ0eVRvQXR0cmlidXRlKGQpLHRoaXMuYmluZGluZ3NbYV09ZX1yZXR1cm4gdGhpcy5zdXBlcihhcmd1bWVudHMpfSxhc3luY1VuYmluZEFsbDpmdW5jdGlvbigpe3RoaXMuX3VuYm91bmR8fChlLnVuYmluZCYmY29uc29sZS5sb2coIlslc10gYXN5bmNVbmJpbmRBbGwiLHRoaXMubG9jYWxOYW1lKSx0aGlzLl91bmJpbmRBbGxKb2I9dGhpcy5qb2IodGhpcy5fdW5iaW5kQWxsSm9iLHRoaXMudW5iaW5kQWxsLDApKX0sdW5iaW5kQWxsOmZ1bmN0aW9uKCl7aWYoIXRoaXMuX3VuYm91bmQpe3RoaXMudW5iaW5kQWxsUHJvcGVydGllcygpLHRoaXMuc3VwZXIoKTtmb3IodmFyIGE9dGhpcy5zaGFkb3dSb290O2E7KWIoYSksYT1hLm9sZGVyU2hhZG93Um9vdDt0aGlzLl91bmJvdW5kPSEwfX0sY2FuY2VsVW5iaW5kQWxsOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLl91bmJvdW5kPyhlLnVuYmluZCYmY29uc29sZS53YXJuKCJbJXNdIGFscmVhZHkgdW5ib3VuZCwgY2Fubm90IGNhbmNlbCB1bmJpbmRBbGwiLHRoaXMubG9jYWxOYW1lKSx2b2lkIDApOihlLnVuYmluZCYmY29uc29sZS5sb2coIlslc10gY2FuY2VsVW5iaW5kQWxsIix0aGlzLmxvY2FsTmFtZSksdGhpcy5fdW5iaW5kQWxsSm9iJiYodGhpcy5fdW5iaW5kQWxsSm9iPXRoaXMuX3VuYmluZEFsbEpvYi5zdG9wKCkpLGF8fGQodGhpcy5zaGFkb3dSb290LGZ1bmN0aW9uKGEpe2EuY2FuY2VsVW5iaW5kQWxsJiZhLmNhbmNlbFVuYmluZEFsbCgpfSksdm9pZCAwKX19LGo9L1x7XHsoW157fV0qKX19LzthLmJpbmRQYXR0ZXJuPWosYS5hcGkuaW5zdGFuY2UubWR2PWl9KFBvbHltZXIpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7cmV0dXJuIGEuaGFzT3duUHJvcGVydHkoIlBvbHltZXJCYXNlIikKfWZ1bmN0aW9uIGMoKXt9dmFyIGQ9MCxlPXtQb2x5bWVyQmFzZTohMCxqb2I6UG9seW1lci5qb2IsInN1cGVyIjpQb2x5bWVyLnN1cGVyLGNyZWF0ZWQ6ZnVuY3Rpb24oKXt9LHJlYWR5OmZ1bmN0aW9uKCl7fSxjcmVhdGVkQ2FsbGJhY2s6ZnVuY3Rpb24oKXt0aGlzLmNyZWF0ZWQoKSwodGhpcy5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3fHx0aGlzLmFsd2F5c1ByZXBhcmV8fGQ+MCkmJnRoaXMucHJlcGFyZUVsZW1lbnQoKX0scHJlcGFyZUVsZW1lbnQ6ZnVuY3Rpb24oKXt0aGlzLl9lbGVtZW50UHJlcGFyZWQ9ITAsdGhpcy5vYnNlcnZlUHJvcGVydGllcygpLHRoaXMuY29weUluc3RhbmNlQXR0cmlidXRlcygpLHRoaXMudGFrZUF0dHJpYnV0ZXMoKSx0aGlzLmFkZEhvc3RMaXN0ZW5lcnMoKSxkKyssdGhpcy5wYXJzZURlY2xhcmF0aW9ucyh0aGlzLl9fcHJvdG9fXyksZC0tLHRoaXMucmVhZHkoKX0sZW50ZXJlZFZpZXdDYWxsYmFjazpmdW5jdGlvbigpe3RoaXMuX2VsZW1lbnRQcmVwYXJlZHx8dGhpcy5wcmVwYXJlRWxlbWVudCgpLHRoaXMuY2FuY2VsVW5iaW5kQWxsKCEwKSx0aGlzLmVudGVyZWRWaWV3JiZ0aGlzLmVudGVyZWRWaWV3KCl9LGxlZnRWaWV3Q2FsbGJhY2s6ZnVuY3Rpb24oKXt0aGlzLnByZXZlbnREaXNwb3NlfHx0aGlzLmFzeW5jVW5iaW5kQWxsKCksdGhpcy5sZWZ0VmlldyYmdGhpcy5sZWZ0VmlldygpfSxwYXJzZURlY2xhcmF0aW9uczpmdW5jdGlvbihhKXthJiZhLmVsZW1lbnQmJih0aGlzLnBhcnNlRGVjbGFyYXRpb25zKGEuX19wcm90b19fKSxhLnBhcnNlRGVjbGFyYXRpb24uY2FsbCh0aGlzLGEuZWxlbWVudCkpfSxwYXJzZURlY2xhcmF0aW9uOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZmV0Y2hUZW1wbGF0ZShhKTtiJiYodGhpcy5lbGVtZW50Lmhhc0F0dHJpYnV0ZSgibGlnaHRkb20iKT90aGlzLmxpZ2h0RnJvbVRlbXBsYXRlKGIpOnRoaXMuc2hhZG93RnJvbVRlbXBsYXRlKGIpKX0sZmV0Y2hUZW1wbGF0ZTpmdW5jdGlvbihhKXtyZXR1cm4gYS5xdWVyeVNlbGVjdG9yKCJ0ZW1wbGF0ZSIpfSxzaGFkb3dGcm9tVGVtcGxhdGU6ZnVuY3Rpb24oYSl7aWYoYSl7dGhpcy5zaGFkb3dSb290O3ZhciBiPXRoaXMuY3JlYXRlU2hhZG93Um9vdCgpO2IuYXBwbHlBdXRob3JTdHlsZXM9dGhpcy5hcHBseUF1dGhvclN0eWxlcyxiLnJlc2V0U3R5bGVJbmhlcml0YW5jZT10aGlzLnJlc2V0U3R5bGVJbmhlcml0YW5jZTt2YXIgYz10aGlzLmluc3RhbmNlVGVtcGxhdGUoYSk7cmV0dXJuIGIuYXBwZW5kQ2hpbGQoYyksdGhpcy5zaGFkb3dSb290UmVhZHkoYixhKSxifX0sbGlnaHRGcm9tVGVtcGxhdGU6ZnVuY3Rpb24oYSl7aWYoYSl7dmFyIGI9dGhpcy5pbnN0YW5jZVRlbXBsYXRlKGEpO3JldHVybiB0aGlzLmFwcGVuZENoaWxkKGIpLHRoaXMuc2hhZG93Um9vdFJlYWR5KHRoaXMsYSksYn19LHNoYWRvd1Jvb3RSZWFkeTpmdW5jdGlvbihhKXt0aGlzLm1hcnNoYWxOb2RlUmVmZXJlbmNlcyhhKSxQb2ludGVyR2VzdHVyZXMucmVnaXN0ZXIoYSl9LG1hcnNoYWxOb2RlUmVmZXJlbmNlczpmdW5jdGlvbihhKXt2YXIgYj10aGlzLiQ9dGhpcy4kfHx7fTtpZihhKWZvcih2YXIgYyxkPWEucXVlcnlTZWxlY3RvckFsbCgiW2lkXSIpLGU9MCxmPWQubGVuZ3RoO2Y+ZSYmKGM9ZFtlXSk7ZSsrKWJbYy5pZF09Y30sYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrOmZ1bmN0aW9uKGEpeyJjbGFzcyIhPT1hJiYic3R5bGUiIT09YSYmdGhpcy5hdHRyaWJ1dGVUb1Byb3BlcnR5KGEsdGhpcy5nZXRBdHRyaWJ1dGUoYSkpLHRoaXMuYXR0cmlidXRlQ2hhbmdlZCYmdGhpcy5hdHRyaWJ1dGVDaGFuZ2VkLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sb25NdXRhdGlvbjpmdW5jdGlvbihhLGIpe3ZhciBjPW5ldyBNdXRhdGlvbk9ic2VydmVyKGZ1bmN0aW9uKGEpe2IuY2FsbCh0aGlzLGMsYSksYy5kaXNjb25uZWN0KCl9LmJpbmQodGhpcykpO2Mub2JzZXJ2ZShhLHtjaGlsZExpc3Q6ITAsc3VidHJlZTohMH0pfX07Yy5wcm90b3R5cGU9ZSxlLmNvbnN0cnVjdG9yPWMsYS5CYXNlPWMsYS5pc0Jhc2U9YixhLmFwaS5pbnN0YW5jZS5iYXNlPWV9KFBvbHltZXIpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7cmV0dXJuIGEuX19wcm90b19ffXdpbmRvdy5sb2dGbGFnc3x8e307dmFyIGM9ImVsZW1lbnQiLGQ9ImNvbnRyb2xsZXIiLGU9e1NUWUxFX1NDT1BFX0FUVFJJQlVURTpjLGluc3RhbGxDb250cm9sbGVyU3R5bGVzOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5maW5kU3R5bGVDb250cm9sbGVyKCk7aWYoYSYmIXRoaXMuc2NvcGVIYXNFbGVtZW50U3R5bGUoYSxkKSl7Zm9yKHZhciBjPWIodGhpcyksZT0iIjtjJiZjLmVsZW1lbnQ7KWUrPWMuZWxlbWVudC5jc3NUZXh0Rm9yU2NvcGUoZCksYz1iKGMpO2lmKGUpe3ZhciBmPXRoaXMuZWxlbWVudC5jc3NUZXh0VG9TY29wZVN0eWxlKGUsZCk7UG9seW1lci5hcHBseVN0eWxlVG9TY29wZShmLGEpfX19LGZpbmRTdHlsZUNvbnRyb2xsZXI6ZnVuY3Rpb24oKXtpZih3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpcmV0dXJuIHdyYXAoZG9jdW1lbnQuaGVhZCk7Zm9yKHZhciBhPXRoaXM7YS5wYXJlbnROb2RlOylhPWEucGFyZW50Tm9kZTtyZXR1cm4gYT09PWRvY3VtZW50P2RvY3VtZW50LmhlYWQ6YX0sc2NvcGVIYXNFbGVtZW50U3R5bGU6ZnVuY3Rpb24oYSxiKXt2YXIgZD1jKyI9Iit0aGlzLmxvY2FsTmFtZSsiLSIrYjtyZXR1cm4gYS5xdWVyeVNlbGVjdG9yKCJzdHlsZVsiK2QrIl0iKX19O2EuYXBpLmluc3RhbmNlLnN0eWxlcz1lfShQb2x5bWVyKSxmdW5jdGlvbihhKXt2YXIgYj17YWRkUmVzb2x2ZVBhdGhBcGk6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmVsZW1lbnRQYXRoKCksYj10aGlzLmdldEF0dHJpYnV0ZSgiYXNzZXRwYXRoIil8fCIiO3RoaXMucHJvdG90eXBlLnJlc29sdmVQYXRoPWZ1bmN0aW9uKGMpe3JldHVybiBhK2IrY319LGVsZW1lbnRQYXRoOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudXJsVG9QYXRoKEhUTUxJbXBvcnRzLmdldERvY3VtZW50VXJsKHRoaXMub3duZXJEb2N1bWVudCkpfSx1cmxUb1BhdGg6ZnVuY3Rpb24oYSl7aWYoYSl7dmFyIGI9YS5zcGxpdCgiLyIpO3JldHVybiBiLnBvcCgpLGIucHVzaCgiIiksYi5qb2luKCIvIil9cmV0dXJuIiJ9fTthLmFwaS5kZWNsYXJhdGlvbi5wYXRoPWJ9KFBvbHltZXIpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSxiKXtpZihhKXt2YXIgZD1jKGEudGV4dENvbnRlbnQpLGU9YS5nZXRBdHRyaWJ1dGUoZyk7ZSYmZC5zZXRBdHRyaWJ1dGUoZyxlKSxiLmFwcGVuZENoaWxkKGQpfX1mdW5jdGlvbiBjKGEpe3ZhciBiPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInN0eWxlIik7cmV0dXJuIGIudGV4dENvbnRlbnQ9YSxifWZ1bmN0aW9uIGQoYSl7cmV0dXJuIGEmJmEuX19yZXNvdXJjZXx8IiJ9ZnVuY3Rpb24gZShhLGIpe3JldHVybiBuP24uY2FsbChhLGIpOnZvaWQgMH13aW5kb3cubG9nRmxhZ3N8fHt9O3ZhciBmPWEuYXBpLmluc3RhbmNlLnN0eWxlcyxnPWYuU1RZTEVfU0NPUEVfQVRUUklCVVRFLGg9InN0eWxlIixpPSJbcmVsPXN0eWxlc2hlZXRdIixqPSJnbG9iYWwiLGs9InBvbHltZXItc2NvcGUiLGw9e2luc3RhbGxTaGVldHM6ZnVuY3Rpb24oKXt0aGlzLmNhY2hlU2hlZXRzKCksdGhpcy5jYWNoZVN0eWxlcygpLHRoaXMuaW5zdGFsbExvY2FsU2hlZXRzKCksdGhpcy5pbnN0YWxsR2xvYmFsU3R5bGVzKCl9LGNhY2hlU2hlZXRzOmZ1bmN0aW9uKCl7dGhpcy5zaGVldHM9dGhpcy5maW5kTm9kZXMoaSksdGhpcy5zaGVldHMuZm9yRWFjaChmdW5jdGlvbihhKXthLnBhcmVudE5vZGUmJmEucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChhKX0pfSxjYWNoZVN0eWxlczpmdW5jdGlvbigpe3RoaXMuc3R5bGVzPXRoaXMuZmluZE5vZGVzKGgrIlsiK2srIl0iKSx0aGlzLnN0eWxlcy5mb3JFYWNoKGZ1bmN0aW9uKGEpe2EucGFyZW50Tm9kZSYmYS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGEpfSl9LGluc3RhbGxMb2NhbFNoZWV0czpmdW5jdGlvbigpe3ZhciBhPXRoaXMuc2hlZXRzLmZpbHRlcihmdW5jdGlvbihhKXtyZXR1cm4hYS5oYXNBdHRyaWJ1dGUoayl9KSxiPXRoaXMudGVtcGxhdGVDb250ZW50KCk7aWYoYil7dmFyIGU9IiI7YS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2UrPWQoYSkrIlxuIn0pLGUmJmIuaW5zZXJ0QmVmb3JlKGMoZSksYi5maXJzdENoaWxkKX19LGZpbmROb2RlczpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMucXVlcnlTZWxlY3RvckFsbChhKS5hcnJheSgpLGQ9dGhpcy50ZW1wbGF0ZUNvbnRlbnQoKTtpZihkKXt2YXIgZT1kLnF1ZXJ5U2VsZWN0b3JBbGwoYSkuYXJyYXkoKTtjPWMuY29uY2F0KGUpfXJldHVybiBiP2MuZmlsdGVyKGIpOmN9LHRlbXBsYXRlQ29udGVudDpmdW5jdGlvbigpe3ZhciBhPXRoaXMucXVlcnlTZWxlY3RvcigidGVtcGxhdGUiKTtyZXR1cm4gYSYmdGVtcGxhdGVDb250ZW50KGEpfSxpbnN0YWxsR2xvYmFsU3R5bGVzOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5zdHlsZUZvclNjb3BlKGopO2IoYSxkb2N1bWVudC5oZWFkKX0sY3NzVGV4dEZvclNjb3BlOmZ1bmN0aW9uKGEpe3ZhciBiPSIiLGM9IlsiK2srIj0iK2ErIl0iLGY9ZnVuY3Rpb24oYSl7cmV0dXJuIGUoYSxjKX0sZz10aGlzLnNoZWV0cy5maWx0ZXIoZik7Zy5mb3JFYWNoKGZ1bmN0aW9uKGEpe2IrPWQoYSkrIlxuXG4ifSk7dmFyIGg9dGhpcy5zdHlsZXMuZmlsdGVyKGYpO3JldHVybiBoLmZvckVhY2goZnVuY3Rpb24oYSl7Yis9YS50ZXh0Q29udGVudCsiXG5cbiJ9KSxifSxzdHlsZUZvclNjb3BlOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3NzVGV4dEZvclNjb3BlKGEpO3JldHVybiB0aGlzLmNzc1RleHRUb1Njb3BlU3R5bGUoYixhKX0sY3NzVGV4dFRvU2NvcGVTdHlsZTpmdW5jdGlvbihhLGIpe2lmKGEpe3ZhciBkPWMoYSk7cmV0dXJuIGQuc2V0QXR0cmlidXRlKGcsdGhpcy5nZXRBdHRyaWJ1dGUoIm5hbWUiKSsiLSIrYiksZH19fSxtPUhUTUxFbGVtZW50LnByb3RvdHlwZSxuPW0ubWF0Y2hlc3x8bS5tYXRjaGVzU2VsZWN0b3J8fG0ud2Via2l0TWF0Y2hlc1NlbGVjdG9yfHxtLm1vek1hdGNoZXNTZWxlY3RvcjthLmFwaS5kZWNsYXJhdGlvbi5zdHlsZXM9bCxhLmFwcGx5U3R5bGVUb1Njb3BlPWJ9KFBvbHltZXIpLGZ1bmN0aW9uKGEpe3ZhciBiPWEuYXBpLmluc3RhbmNlLmV2ZW50czt3aW5kb3cubG9nRmxhZ3N8fHt9O3ZhciBjPXtwYXJzZUhvc3RFdmVudHM6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnByb3RvdHlwZS5ldmVudERlbGVnYXRlczt0aGlzLmFkZEF0dHJpYnV0ZURlbGVnYXRlcyhhKX0sYWRkQXR0cmlidXRlRGVsZWdhdGVzOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYyxkPTA7Yz10aGlzLmF0dHJpYnV0ZXNbZF07ZCsrKWIuaGFzRXZlbnRQcmVmaXgoYy5uYW1lKSYmKGFbYi5yZW1vdmVFdmVudFByZWZpeChjLm5hbWUpXT1jLnZhbHVlLnJlcGxhY2UoInt7IiwiIikucmVwbGFjZSgifX0iLCIiKS50cmltKCkpfSxldmVudF90cmFuc2xhdGlvbnM6e3dlYmtpdGFuaW1hdGlvbnN0YXJ0OiJ3ZWJraXRBbmltYXRpb25TdGFydCIsd2Via2l0YW5pbWF0aW9uZW5kOiJ3ZWJraXRBbmltYXRpb25FbmQiLHdlYmtpdHRyYW5zaXRpb25lbmQ6IndlYmtpdFRyYW5zaXRpb25FbmQiLGRvbWZvY3Vzb3V0OiJET01Gb2N1c091dCIsZG9tZm9jdXNpbjoiRE9NRm9jdXNJbiJ9fTthLmFwaS5kZWNsYXJhdGlvbi5ldmVudHM9Y30oUG9seW1lciksZnVuY3Rpb24oYSl7dmFyIGI9e2luZmVyT2JzZXJ2ZXJzOmZ1bmN0aW9uKGEpe3ZhciBiLGM9YS5vYnNlcnZlO2Zvcih2YXIgZCBpbiBhKSJDaGFuZ2VkIj09PWQuc2xpY2UoLTcpJiYoY3x8KGM9YS5vYnNlcnZlPXt9KSxiPWQuc2xpY2UoMCwtNyksY1tiXT1jW2JdfHxkKX0sb3B0aW1pemVQcm9wZXJ0eU1hcHM6ZnVuY3Rpb24oYSl7aWYoYS5vYnNlcnZlKXt2YXIgYj1hLl9vYnNlcnZlTmFtZXM9W107Zm9yKHZhciBjIGluIGEub2JzZXJ2ZSliLnB1c2goYyl9aWYoYS5wdWJsaXNoKXt2YXIgYj1hLl9wdWJsaXNoTmFtZXM9W107Zm9yKHZhciBjIGluIGEucHVibGlzaCliLnB1c2goYyl9fSxwdWJsaXNoUHJvcGVydGllczpmdW5jdGlvbihhLGIpe3ZhciBjPWEucHVibGlzaDtjJiYodGhpcy5yZXF1aXJlUHJvcGVydGllcyhjLGEsYiksYS5fcHVibGlzaExDPXRoaXMubG93ZXJDYXNlTWFwKGMpKX0scmVxdWlyZVByb3BlcnRpZXM6ZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZCBpbiBhKXZvaWQgMD09PWJbZF0mJnZvaWQgMD09PWNbZF0mJihiW2RdPWFbZF0pfSxsb3dlckNhc2VNYXA6ZnVuY3Rpb24oYSl7dmFyIGI9e307Zm9yKHZhciBjIGluIGEpYltjLnRvTG93ZXJDYXNlKCldPWM7cmV0dXJuIGJ9fTthLmFwaS5kZWNsYXJhdGlvbi5wcm9wZXJ0aWVzPWJ9KFBvbHltZXIpLGZ1bmN0aW9uKGEpe3ZhciBiPSJhdHRyaWJ1dGVzIixjPXtpbmhlcml0QXR0cmlidXRlc09iamVjdHM6ZnVuY3Rpb24oYSl7dGhpcy5pbmhlcml0T2JqZWN0KGEsInB1Ymxpc2hMQyIpLHRoaXMuaW5oZXJpdE9iamVjdChhLCJfaW5zdGFuY2VBdHRyaWJ1dGVzIil9LHB1Ymxpc2hBdHRyaWJ1dGVzOmZ1bmN0aW9uKGEsYyl7dmFyIGQ9dGhpcy5nZXRBdHRyaWJ1dGUoYik7aWYoZClmb3IodmFyIGUsZj1hLnB1Ymxpc2h8fChhLnB1Ymxpc2g9e30pLGc9ZC5zcGxpdChkLmluZGV4T2YoIiwiKT49MD8iLCI6IiAiKSxoPTAsaT1nLmxlbmd0aDtpPmg7aCsrKWU9Z1toXS50cmltKCksZSYmdm9pZCAwPT09ZltlXSYmdm9pZCAwPT09Y1tlXSYmKGZbZV09bnVsbCl9LGFjY3VtdWxhdGVJbnN0YW5jZUF0dHJpYnV0ZXM6ZnVuY3Rpb24oKXtmb3IodmFyIGEsYj10aGlzLnByb3RvdHlwZS5faW5zdGFuY2VBdHRyaWJ1dGVzLGM9dGhpcy5hdHRyaWJ1dGVzLGQ9MCxlPWMubGVuZ3RoO2U+ZCYmKGE9Y1tkXSk7ZCsrKXRoaXMuaXNJbnN0YW5jZUF0dHJpYnV0ZShhLm5hbWUpJiYoYlthLm5hbWVdPWEudmFsdWUpfSxpc0luc3RhbmNlQXR0cmlidXRlOmZ1bmN0aW9uKGEpe3JldHVybiF0aGlzLmJsYWNrTGlzdFthXSYmIm9uLSIhPT1hLnNsaWNlKDAsMyl9LGJsYWNrTGlzdDp7bmFtZToxLCJleHRlbmRzIjoxLGNvbnN0cnVjdG9yOjEsbm9zY3JpcHQ6MX19O2MuYmxhY2tMaXN0W2JdPTEsYS5hcGkuZGVjbGFyYXRpb24uYXR0cmlidXRlcz1jfShQb2x5bWVyKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEpe2lmKCFPYmplY3QuX19wcm90b19fKXt2YXIgYj1PYmplY3QuZ2V0UHJvdG90eXBlT2YoYSk7YS5fX3Byb3RvX189YixkKGIpJiYoYi5fX3Byb3RvX189T2JqZWN0LmdldFByb3RvdHlwZU9mKGIpKX19dmFyIGM9YS5hcGksZD1hLmlzQmFzZSxlPWEuZXh0ZW5kLGY9e3JlZ2lzdGVyOmZ1bmN0aW9uKGEsYil7dGhpcy5wcm90b3R5cGU9dGhpcy5idWlsZFByb3RvdHlwZShhLGIpLHRoaXMucHJvdG90eXBlLmVsZW1lbnQ9dGhpcyx0aGlzLmRlc3VnYXIoYSxiKSx0aGlzLnJlZ2lzdGVyUHJvdG90eXBlKGEsYiksdGhpcy5wdWJsaXNoQ29uc3RydWN0b3IoKX0sYnVpbGRQcm90b3R5cGU6ZnVuY3Rpb24oYyxkKXt2YXIgZT1hLmdldFJlZ2lzdGVyZWRQcm90b3R5cGUoYyksZj10aGlzLmdlbmVyYXRlQmFzZVByb3RvdHlwZShkKTtyZXR1cm4gdGhpcy5wdWJsaXNoQXR0cmlidXRlcyhlLGYpLHRoaXMucHVibGlzaFByb3BlcnRpZXMoZSxmKSx0aGlzLmluZmVyT2JzZXJ2ZXJzKGUpLHRoaXMuaW5oZXJpdE1ldGFEYXRhKGUsZiksZT10aGlzLmNoYWluT2JqZWN0KGUsZiksdGhpcy5vcHRpbWl6ZVByb3BlcnR5TWFwcyhlKSxiKGUpLGV9LGluaGVyaXRNZXRhRGF0YTpmdW5jdGlvbihhLGIpe3RoaXMuaW5oZXJpdE9iamVjdCgib2JzZXJ2ZSIsYSxiKSx0aGlzLmluaGVyaXRPYmplY3QoInB1Ymxpc2giLGEsYiksdGhpcy5pbmhlcml0T2JqZWN0KCJfcHVibGlzaExDIixhLGIpLHRoaXMuaW5oZXJpdE9iamVjdCgiX2luc3RhbmNlQXR0cmlidXRlcyIsYSxiKSx0aGlzLmluaGVyaXRPYmplY3QoImV2ZW50RGVsZWdhdGVzIixhLGIpfSxkZXN1Z2FyOmZ1bmN0aW9uKGEsYil7dGhpcy5hY2N1bXVsYXRlSW5zdGFuY2VBdHRyaWJ1dGVzKCksdGhpcy5wYXJzZUhvc3RFdmVudHMoKSx0aGlzLmluc3RhbGxTaGVldHMoKSx0aGlzLmFkZFJlc29sdmVQYXRoQXBpKCksd2luZG93LlNoYWRvd0RPTVBvbHlmaWxsJiZQbGF0Zm9ybS5TaGFkb3dDU1Muc2hpbVN0eWxpbmcodGhpcy50ZW1wbGF0ZUNvbnRlbnQoKSxhLGIpLHRoaXMucHJvdG90eXBlLnJlZ2lzdGVyQ2FsbGJhY2smJnRoaXMucHJvdG90eXBlLnJlZ2lzdGVyQ2FsbGJhY2sodGhpcyl9LHB1Ymxpc2hDb25zdHJ1Y3RvcjpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZ2V0QXR0cmlidXRlKCJjb25zdHJ1Y3RvciIpO2EmJih3aW5kb3dbYV09dGhpcy5jdG9yKX0sZ2VuZXJhdGVCYXNlUHJvdG90eXBlOmZ1bmN0aW9uKGEpe3ZhciBiPW1lbW9pemVkQmFzZXNbYV07aWYoIWIpe3ZhciBiPUhUTUxFbGVtZW50LmdldFByb3RvdHlwZUZvclRhZyhhKTtiPXRoaXMuZW5zdXJlQmFzZUFwaShiKSxtZW1vaXplZEJhc2VzW2FdPWJ9cmV0dXJuIGJ9LGVuc3VyZUJhc2VBcGk6ZnVuY3Rpb24oYSl7aWYoIWEuUG9seW1lckJhc2Upe2E9T2JqZWN0LmNyZWF0ZShhKTtmb3IodmFyIGIgaW4gYy5pbnN0YW5jZSllKGEsYy5pbnN0YW5jZVtiXSl9cmV0dXJuIGF9LGluaGVyaXRPYmplY3Q6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWJbYV18fHt9O2JbYV09dGhpcy5jaGFpbk9iamVjdChkLGNbYV0pfSxyZWdpc3RlclByb3RvdHlwZTpmdW5jdGlvbihhLGIpe3ZhciBjPXtwcm90b3R5cGU6dGhpcy5wcm90b3R5cGV9O2ImJmIuaW5kZXhPZigiLSIpPDAmJihjLmV4dGVuZHM9YiksdGhpcy5jdG9yPWRvY3VtZW50LnJlZ2lzdGVyKGEsYyksdGhpcy5wcm90b3R5cGUuY29uc3RydWN0b3I9dGhpcy5jdG9yLEhUTUxFbGVtZW50LnJlZ2lzdGVyKGEsdGhpcy5wcm90b3R5cGUpfX07Zi5jaGFpbk9iamVjdD1PYmplY3QuX19wcm90b19fP2Z1bmN0aW9uKGEsYil7cmV0dXJuIGEmJmImJmEhPT1iJiYoYS5fX3Byb3RvX189YiksYX06ZnVuY3Rpb24oYSxiKXtpZihhJiZiJiZhIT09Yil7dmFyIGM9T2JqZWN0LmNyZWF0ZShiKTthPWUoYyxhKX1yZXR1cm4gYX0sbWVtb2l6ZWRCYXNlcz17fSxjLmRlY2xhcmF0aW9uLnByb3RvdHlwZT1mfShQb2x5bWVyKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEsYil7a1thXT1ifHx7fSxkKGEpfWZ1bmN0aW9uIGMoYSl7cmV0dXJuIGtbYV19ZnVuY3Rpb24gZChhKXtsW2FdJiYobFthXS5yZWdpc3RlcldoZW5SZWFkeSgpLGRlbGV0ZSBsW2FdKX1mdW5jdGlvbiBlKGEpe25bYV09ITA7dmFyIGI9bVthXTtiJiYoYi5mb3JFYWNoKGZ1bmN0aW9uKGEpe2EucmVnaXN0ZXJXaGVuUmVhZHkoKX0pLGRlbGV0ZSBtW2FdKX1mdW5jdGlvbiBmKGEpe3JldHVybiBuW2FdfWZ1bmN0aW9uIGcoYSl7d2luZG93LkhUTUxJbXBvcnRzJiYhSFRNTEltcG9ydHMucmVhZHlUaW1lP2FkZEV2ZW50TGlzdGVuZXIoIkhUTUxJbXBvcnRzTG9hZGVkIixhKTphKCl9dmFyIGg9YS5leHRlbmQsaT1hLmFwaS5kZWNsYXJhdGlvbixqPWgoT2JqZWN0LmNyZWF0ZShIVE1MRWxlbWVudC5wcm90b3R5cGUpLHtjcmVhdGVkQ2FsbGJhY2s6ZnVuY3Rpb24oKXt0aGlzLm5hbWU9dGhpcy5nZXRBdHRyaWJ1dGUoIm5hbWUiKSx0aGlzLnJlZ2lzdGVyV2hlblJlYWR5KCl9LHJlZ2lzdGVyV2hlblJlYWR5OmZ1bmN0aW9uKCl7aWYoIXRoaXMud2FpdGluZ0ZvclByb3RvdHlwZSh0aGlzLm5hbWUpKXt2YXIgYT10aGlzLmdldEF0dHJpYnV0ZSgiZXh0ZW5kcyIpO3RoaXMud2FpdGluZ0ZvckV4dGVuZGVlKGEpfHwoZG9jdW1lbnQuY29udGFpbnModGhpcyk/ZyhmdW5jdGlvbigpe3RoaXMuX3JlZ2lzdGVyKGEpfS5iaW5kKHRoaXMpKTp0aGlzLl9yZWdpc3RlcihhKSl9fSxfcmVnaXN0ZXI6ZnVuY3Rpb24oYSl7dGhpcy5yZWdpc3Rlcih0aGlzLm5hbWUsYSksZSh0aGlzLm5hbWUpfSx3YWl0aW5nRm9yUHJvdG90eXBlOmZ1bmN0aW9uKGEpe2lmKCFjKGEpKXtpZihsW2FdPXRoaXMsdGhpcy5oYXNBdHRyaWJ1dGUoIm5vc2NyaXB0IikpaWYod2luZG93LkN1c3RvbUVsZW1lbnRzJiYhQ3VzdG9tRWxlbWVudHMudXNlTmF0aXZlKWIoYSk7ZWxzZXt2YXIgZD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzY3JpcHQiKTtkLnRleHRDb250ZW50PSJQb2x5bWVyKCciK2ErIicpOyIsdGhpcy5hcHBlbmRDaGlsZChkKX1yZXR1cm4hMH19LHdhaXRpbmdGb3JFeHRlbmRlZTpmdW5jdGlvbihhKXtyZXR1cm4gYSYmYS5pbmRleE9mKCItIik+PTAmJiFmKGEpPygobVthXT1tW2FdfHxbXSkucHVzaCh0aGlzKSwhMCk6dm9pZCAwfX0pO09iamVjdC5rZXlzKGkpLmZvckVhY2goZnVuY3Rpb24oYSl7aChqLGlbYV0pfSk7dmFyIGs9e30sbD17fSxtPXt9LG49e307YS5nZXRSZWdpc3RlcmVkUHJvdG90eXBlPWMsaChiLGEpLHdpbmRvdy5Qb2x5bWVyPWIsZG9jdW1lbnQucmVnaXN0ZXIoInBvbHltZXItZWxlbWVudCIse3Byb3RvdHlwZTpqfSl9KFBvbHltZXIpOwovLyMgc291cmNlTWFwcGluZ1VSTD1wb2x5bWVyLm1pbi5qcy5tYXA=",
                "headers": {
                    "Accept-Ranges": "bytes",
                    "Last-Modified": "Fri, 07 Nov 2014 02:44:59 GMT",
                    "Content-Length": "172361",
                    "Date": "Fri, 07 Nov 2014 02:44:59 GMT",
                    "Content-Type": "application/javascript"
                },
                "cookies": [],
                "mimeType": "script",
                "host": "localhost",
                "protocol": "http",
                "port": 9999,
                "inScope": false,
                "toolFlag": 16962,
                "referenceID": 0,
                "messageType": "response"
            },
            "messageType": "requestResponse"
        }
    ],
    "inScope": true,
    "messageType": "scanIssue"
}