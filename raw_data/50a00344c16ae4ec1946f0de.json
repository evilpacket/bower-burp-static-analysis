{
    "url": "http://localhost:9999/plasm/simplemodal/Demos/assets/javascript/mootools-core-1.3.1.js",
    "host": "localhost",
    "port": 9999,
    "protocol": "http",
    "name": "Open redirection (DOM-based)",
    "issueType": 5243152,
    "severity": "Low",
    "confidence": "Firm",
    "issueBackground": "DOM-based open redirection vulnerabilities arise when a client-side script within an application's response reads data from a controllable part of the DOM (for example, the URL), and writes this data into the target of a redirection in an unsafe way. An attacker may be able to use the vulnerability to construct a URL which, if visited by another application user, will cause a redirection to an arbitrary external domain. This behavior can be leveraged to facilitate phishing attacks against users of the application. The ability to use an authentic application URL, targeting the correct domain with a valid SSL certificate (if SSL is used) lends credibility to the phishing attack because many users, even if they verify these features, will not notice the subsequent redirection to a different domain.<br><br><b>Note:</b> If an attacker is able to control the start of the string that is passed to the redirection API, then it may be possible to escalate this vulnerability into a JavaScript injection attack, by using a URL with the javascript: pseudo-protocol to execute arbitrary script code when the URL is processed by the browser.",
    "remediationBackground": "Static analysis of code to identify vulnerabilities of this kind may lead to false positives that are not actually exploitable. You should review the highlighted code and related execution paths to determine whether the application is indeed vulnerable, or whether mitigations are in place that would prevent exploitation.<br><br>The most effective way to avoid DOM-based open redirection vulnerabilities is not to dynamically set redirection targets using data that originated from any untrusted source. If the desired functionality of the application means that this behavior is unavoidable, then defenses must be implemented within the client-side code to prevent malicious data from introducing an arbitrary URL as a redirection target. In general, this is best achieved by using a whitelist of URLs that are permitted redirection targets, and strictly validating the target against this list before performing the redirection.",
    "issueDetail": "The application may be vulnerable to DOM-based open redirection. Data is read from <b>document.location.pathname</b> and written to <b>the 'open()' function of an XMLHttpRequest object</b> via the following statements:<ul><li>f=document.location.pathname;</li><li>f=f.substr(0,i);</li><li>n.open(e.toUpperCase(),f,this.options.async,this.options.user,this.options.password);</li></ul>",
    "requestResponses": [
        {
            "request": {
                "host": "localhost",
                "port": 9999,
                "protocol": "http",
                "url": "http://localhost:9999/plasm/simplemodal/Demos/assets/javascript/mootools-core-1.3.1.js",
                "path": "/plasm/simplemodal/Demos/assets/javascript/mootools-core-1.3.1.js",
                "httpVersion": "HTTP/1.1",
                "method": "GET",
                "headers": {
                    "Host": "localhost:9999"
                },
                "body": "",
                "raw": "R0VUIC9wbGFzbS9zaW1wbGVtb2RhbC9EZW1vcy9hc3NldHMvamF2YXNjcmlwdC9tb290b29scy1jb3JlLTEuMy4xLmpzIEhUVFAvMS4xDQpIb3N0OiBsb2NhbGhvc3Q6OTk5OQ0KDQo=",
                "inScope": true,
                "toolFlag": 16962,
                "referenceID": 0,
                "messageType": "request"
            },
            "response": {
                "statusCode": 200,
                "raw": "SFRUUC8xLjEgMjAwIE9LDQpDb250ZW50LUxlbmd0aDogODg0OTYNCkFjY2VwdC1SYW5nZXM6IGJ5dGVzDQpDb250ZW50LVR5cGU6IGFwcGxpY2F0aW9uL2phdmFzY3JpcHQNCkRhdGU6IFNhdCwgMDggTm92IDIwMTQgMDQ6NDE6NDEgR01UDQpMYXN0LU1vZGlmaWVkOiBTYXQsIDA4IE5vdiAyMDE0IDA0OjQxOjQxIEdNVA0KDQovKgotLS0KTW9vVG9vbHM6IHRoZSBqYXZhc2NyaXB0IGZyYW1ld29yawoKd2ViIGJ1aWxkOgogLSBodHRwOi8vbW9vdG9vbHMubmV0L2NvcmUvN2M1NmNmZWY5ZGRkY2YxNzBhNWQ2OGUzZmI2MWNmZDcKCnBhY2thZ2VyIGJ1aWxkOgogLSBwYWNrYWdlciBidWlsZCBDb3JlL0NvcmUgQ29yZS9BcnJheSBDb3JlL1N0cmluZyBDb3JlL051bWJlciBDb3JlL0Z1bmN0aW9uIENvcmUvT2JqZWN0IENvcmUvRXZlbnQgQ29yZS9Ccm93c2VyIENvcmUvQ2xhc3MgQ29yZS9DbGFzcy5FeHRyYXMgQ29yZS9TbGljay5QYXJzZXIgQ29yZS9TbGljay5GaW5kZXIgQ29yZS9FbGVtZW50IENvcmUvRWxlbWVudC5TdHlsZSBDb3JlL0VsZW1lbnQuRXZlbnQgQ29yZS9FbGVtZW50LkRpbWVuc2lvbnMgQ29yZS9GeCBDb3JlL0Z4LkNTUyBDb3JlL0Z4LlR3ZWVuIENvcmUvRnguTW9ycGggQ29yZS9GeC5UcmFuc2l0aW9ucyBDb3JlL1JlcXVlc3QgQ29yZS9SZXF1ZXN0LkhUTUwgQ29yZS9SZXF1ZXN0LkpTT04gQ29yZS9Db29raWUgQ29yZS9KU09OIENvcmUvRE9NUmVhZHkgQ29yZS9Td2lmZgoKY29weXJpZ2h0czoKICAtIFtNb29Ub29sc10oaHR0cDovL21vb3Rvb2xzLm5ldCkKCmxpY2Vuc2VzOgogIC0gW01JVCBMaWNlbnNlXShodHRwOi8vbW9vdG9vbHMubmV0L2xpY2Vuc2UudHh0KQouLi4KKi8KKGZ1bmN0aW9uKCl7dGhpcy5Nb29Ub29scz17dmVyc2lvbjoiMS4zLjEiLGJ1aWxkOiJhZjQ4YzhkNTg5ZjQzZjMyMjEyZjliYjhmZjY4YTEyN2U2YTNiYTZjIn07dmFyIGU9dGhpcy50eXBlT2Y9ZnVuY3Rpb24oaSl7aWYoaT09bnVsbCl7cmV0dXJuIm51bGwiO31pZihpLiRmYW1pbHkpe3JldHVybiBpLiRmYW1pbHkoKTsKfWlmKGkubm9kZU5hbWUpe2lmKGkubm9kZVR5cGU9PTEpe3JldHVybiJlbGVtZW50Ijt9aWYoaS5ub2RlVHlwZT09Myl7cmV0dXJuKC9cUy8pLnRlc3QoaS5ub2RlVmFsdWUpPyJ0ZXh0bm9kZSI6IndoaXRlc3BhY2UiO319ZWxzZXtpZih0eXBlb2YgaS5sZW5ndGg9PSJudW1iZXIiKXtpZihpLmNhbGxlZSl7cmV0dXJuImFyZ3VtZW50cyI7Cn1pZigiaXRlbSIgaW4gaSl7cmV0dXJuImNvbGxlY3Rpb24iO319fXJldHVybiB0eXBlb2YgaTt9O3ZhciB1PXRoaXMuaW5zdGFuY2VPZj1mdW5jdGlvbih3LGkpe2lmKHc9PW51bGwpe3JldHVybiBmYWxzZTt9dmFyIHY9dy4kY29uc3RydWN0b3J8fHcuY29uc3RydWN0b3I7CndoaWxlKHYpe2lmKHY9PT1pKXtyZXR1cm4gdHJ1ZTt9dj12LnBhcmVudDt9cmV0dXJuIHcgaW5zdGFuY2VvZiBpO307dmFyIGY9dGhpcy5GdW5jdGlvbjt2YXIgcj10cnVlO2Zvcih2YXIgcSBpbiB7dG9TdHJpbmc6MX0pe3I9bnVsbDt9aWYocil7cj1bImhhc093blByb3BlcnR5IiwidmFsdWVPZiIsImlzUHJvdG90eXBlT2YiLCJwcm9wZXJ0eUlzRW51bWVyYWJsZSIsInRvTG9jYWxlU3RyaW5nIiwidG9TdHJpbmciLCJjb25zdHJ1Y3RvciJdOwp9Zi5wcm90b3R5cGUub3ZlcmxvYWRTZXR0ZXI9ZnVuY3Rpb24odil7dmFyIGk9dGhpcztyZXR1cm4gZnVuY3Rpb24oeCx3KXtpZih4PT1udWxsKXtyZXR1cm4gdGhpczt9aWYodnx8dHlwZW9mIHghPSJzdHJpbmciKXtmb3IodmFyIHkgaW4geCl7aS5jYWxsKHRoaXMseSx4W3ldKTsKfWlmKHIpe2Zvcih2YXIgej1yLmxlbmd0aDt6LS07KXt5PXJbel07aWYoeC5oYXNPd25Qcm9wZXJ0eSh5KSl7aS5jYWxsKHRoaXMseSx4W3ldKTt9fX19ZWxzZXtpLmNhbGwodGhpcyx4LHcpO31yZXR1cm4gdGhpczt9O307Zi5wcm90b3R5cGUub3ZlcmxvYWRHZXR0ZXI9ZnVuY3Rpb24odil7dmFyIGk9dGhpczsKcmV0dXJuIGZ1bmN0aW9uKHgpe3ZhciB5LHc7aWYodnx8dHlwZW9mIHghPSJzdHJpbmciKXt5PXg7fWVsc2V7aWYoYXJndW1lbnRzLmxlbmd0aD4xKXt5PWFyZ3VtZW50czt9fWlmKHkpe3c9e307Zm9yKHZhciB6PTA7ejx5Lmxlbmd0aDt6Kyspe3dbeVt6XV09aS5jYWxsKHRoaXMseVt6XSk7Cn19ZWxzZXt3PWkuY2FsbCh0aGlzLHgpO31yZXR1cm4gdzt9O307Zi5wcm90b3R5cGUuZXh0ZW5kPWZ1bmN0aW9uKGksdil7dGhpc1tpXT12O30ub3ZlcmxvYWRTZXR0ZXIoKTtmLnByb3RvdHlwZS5pbXBsZW1lbnQ9ZnVuY3Rpb24oaSx2KXt0aGlzLnByb3RvdHlwZVtpXT12Owp9Lm92ZXJsb2FkU2V0dGVyKCk7dmFyIG89QXJyYXkucHJvdG90eXBlLnNsaWNlO2YuZnJvbT1mdW5jdGlvbihpKXtyZXR1cm4oZShpKT09ImZ1bmN0aW9uIik/aTpmdW5jdGlvbigpe3JldHVybiBpO307fTtBcnJheS5mcm9tPWZ1bmN0aW9uKGkpe2lmKGk9PW51bGwpe3JldHVybltdOwp9cmV0dXJuKGsuaXNFbnVtZXJhYmxlKGkpJiZ0eXBlb2YgaSE9InN0cmluZyIpPyhlKGkpPT0iYXJyYXkiKT9pOm8uY2FsbChpKTpbaV07fTtOdW1iZXIuZnJvbT1mdW5jdGlvbih2KXt2YXIgaT1wYXJzZUZsb2F0KHYpO3JldHVybiBpc0Zpbml0ZShpKT9pOm51bGw7Cn07U3RyaW5nLmZyb209ZnVuY3Rpb24oaSl7cmV0dXJuIGkrIiI7fTtmLmltcGxlbWVudCh7aGlkZTpmdW5jdGlvbigpe3RoaXMuJGhpZGRlbj10cnVlO3JldHVybiB0aGlzO30scHJvdGVjdDpmdW5jdGlvbigpe3RoaXMuJHByb3RlY3RlZD10cnVlO3JldHVybiB0aGlzOwp9fSk7dmFyIGs9dGhpcy5UeXBlPWZ1bmN0aW9uKHgsdyl7aWYoeCl7dmFyIHY9eC50b0xvd2VyQ2FzZSgpO3ZhciBpPWZ1bmN0aW9uKHkpe3JldHVybihlKHkpPT12KTt9O2tbImlzIit4XT1pO2lmKHchPW51bGwpe3cucHJvdG90eXBlLiRmYW1pbHk9KGZ1bmN0aW9uKCl7cmV0dXJuIHY7Cn0pLmhpZGUoKTt3LnR5cGU9aTt9fWlmKHc9PW51bGwpe3JldHVybiBudWxsO313LmV4dGVuZCh0aGlzKTt3LiRjb25zdHJ1Y3Rvcj1rO3cucHJvdG90eXBlLiRjb25zdHJ1Y3Rvcj13O3JldHVybiB3O307dmFyIHA9T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztrLmlzRW51bWVyYWJsZT1mdW5jdGlvbihpKXtyZXR1cm4oaSE9bnVsbCYmdHlwZW9mIGkubGVuZ3RoPT0ibnVtYmVyIiYmcC5jYWxsKGkpIT0iW29iamVjdCBGdW5jdGlvbl0iKTsKfTt2YXIgYj17fTt2YXIgZD1mdW5jdGlvbihpKXt2YXIgdj1lKGkucHJvdG90eXBlKTtyZXR1cm4gYlt2XXx8KGJbdl09W10pO307dmFyIGg9ZnVuY3Rpb24odyxBKXtpZihBJiZBLiRoaWRkZW4pe3JldHVybjt9dmFyIHY9ZCh0aGlzKTtmb3IodmFyIHg9MDt4PHYubGVuZ3RoOwp4Kyspe3ZhciB6PXZbeF07aWYoZSh6KT09InR5cGUiKXtoLmNhbGwoeix3LEEpO31lbHNle3ouY2FsbCh0aGlzLHcsQSk7fX12YXIgeT10aGlzLnByb3RvdHlwZVt3XTtpZih5PT1udWxsfHwheS4kcHJvdGVjdGVkKXt0aGlzLnByb3RvdHlwZVt3XT1BO31pZih0aGlzW3ddPT1udWxsJiZlKEEpPT0iZnVuY3Rpb24iKXt0LmNhbGwodGhpcyx3LGZ1bmN0aW9uKGkpe3JldHVybiBBLmFwcGx5KGksby5jYWxsKGFyZ3VtZW50cywxKSk7Cn0pO319O3ZhciB0PWZ1bmN0aW9uKGksdyl7aWYodyYmdy4kaGlkZGVuKXtyZXR1cm47fXZhciB2PXRoaXNbaV07aWYodj09bnVsbHx8IXYuJHByb3RlY3RlZCl7dGhpc1tpXT13O319O2suaW1wbGVtZW50KHtpbXBsZW1lbnQ6aC5vdmVybG9hZFNldHRlcigpLGV4dGVuZDp0Lm92ZXJsb2FkU2V0dGVyKCksYWxpYXM6ZnVuY3Rpb24oaSx2KXtoLmNhbGwodGhpcyxpLHRoaXMucHJvdG90eXBlW3ZdKTsKfS5vdmVybG9hZFNldHRlcigpLG1pcnJvcjpmdW5jdGlvbihpKXtkKHRoaXMpLnB1c2goaSk7cmV0dXJuIHRoaXM7fX0pO25ldyBrKCJUeXBlIixrKTt2YXIgYz1mdW5jdGlvbih2LHoseCl7dmFyIHc9KHohPU9iamVjdCksRD16LnByb3RvdHlwZTtpZih3KXt6PW5ldyBrKHYseik7Cn1mb3IodmFyIEE9MCx5PXgubGVuZ3RoO0E8eTtBKyspe3ZhciBFPXhbQV0sQz16W0VdLEI9RFtFXTtpZihDKXtDLnByb3RlY3QoKTt9aWYodyYmQil7ZGVsZXRlIERbRV07RFtFXT1CLnByb3RlY3QoKTt9fWlmKHcpe3ouaW1wbGVtZW50KEQpO31yZXR1cm4gYzt9O2MoIlN0cmluZyIsU3RyaW5nLFsiY2hhckF0IiwiY2hhckNvZGVBdCIsImNvbmNhdCIsImluZGV4T2YiLCJsYXN0SW5kZXhPZiIsIm1hdGNoIiwicXVvdGUiLCJyZXBsYWNlIiwic2VhcmNoIiwic2xpY2UiLCJzcGxpdCIsInN1YnN0ciIsInN1YnN0cmluZyIsInRvTG93ZXJDYXNlIiwidG9VcHBlckNhc2UiXSkoIkFycmF5IixBcnJheSxbInBvcCIsInB1c2giLCJyZXZlcnNlIiwic2hpZnQiLCJzb3J0Iiwic3BsaWNlIiwidW5zaGlmdCIsImNvbmNhdCIsImpvaW4iLCJzbGljZSIsImluZGV4T2YiLCJsYXN0SW5kZXhPZiIsImZpbHRlciIsImZvckVhY2giLCJldmVyeSIsIm1hcCIsInNvbWUiLCJyZWR1Y2UiLCJyZWR1Y2VSaWdodCJdKSgiTnVtYmVyIixOdW1iZXIsWyJ0b0V4cG9uZW50aWFsIiwidG9GaXhlZCIsInRvTG9jYWxlU3RyaW5nIiwidG9QcmVjaXNpb24iXSkoIkZ1bmN0aW9uIixmLFsiYXBwbHkiLCJjYWxsIiwiYmluZCJdKSgiUmVnRXhwIixSZWdFeHAsWyJleGVjIiwidGVzdCJdKSgiT2JqZWN0IixPYmplY3QsWyJjcmVhdGUiLCJkZWZpbmVQcm9wZXJ0eSIsImRlZmluZVByb3BlcnRpZXMiLCJrZXlzIiwiZ2V0UHJvdG90eXBlT2YiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJnZXRPd25Qcm9wZXJ0eU5hbWVzIiwicHJldmVudEV4dGVuc2lvbnMiLCJpc0V4dGVuc2libGUiLCJzZWFsIiwiaXNTZWFsZWQiLCJmcmVlemUiLCJpc0Zyb3plbiJdKSgiRGF0ZSIsRGF0ZSxbIm5vdyJdKTsKT2JqZWN0LmV4dGVuZD10Lm92ZXJsb2FkU2V0dGVyKCk7RGF0ZS5leHRlbmQoIm5vdyIsZnVuY3Rpb24oKXtyZXR1cm4gKyhuZXcgRGF0ZSk7fSk7bmV3IGsoIkJvb2xlYW4iLEJvb2xlYW4pO051bWJlci5wcm90b3R5cGUuJGZhbWlseT1mdW5jdGlvbigpe3JldHVybiBpc0Zpbml0ZSh0aGlzKT8ibnVtYmVyIjoibnVsbCI7Cn0uaGlkZSgpO051bWJlci5leHRlbmQoInJhbmRvbSIsZnVuY3Rpb24odixpKXtyZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKihpLXYrMSkrdik7fSk7dmFyIGw9T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtPYmplY3QuZXh0ZW5kKCJmb3JFYWNoIixmdW5jdGlvbihpLHcseCl7Zm9yKHZhciB2IGluIGkpe2lmKGwuY2FsbChpLHYpKXt3LmNhbGwoeCxpW3ZdLHYsaSk7Cn19fSk7T2JqZWN0LmVhY2g9T2JqZWN0LmZvckVhY2g7QXJyYXkuaW1wbGVtZW50KHtmb3JFYWNoOmZ1bmN0aW9uKHgseSl7Zm9yKHZhciB3PTAsdj10aGlzLmxlbmd0aDt3PHY7dysrKXtpZih3IGluIHRoaXMpe3guY2FsbCh5LHRoaXNbd10sdyx0aGlzKTt9fX0sZWFjaDpmdW5jdGlvbihpLHYpe0FycmF5LmZvckVhY2godGhpcyxpLHYpOwpyZXR1cm4gdGhpczt9fSk7dmFyIHM9ZnVuY3Rpb24oaSl7c3dpdGNoKGUoaSkpe2Nhc2UiYXJyYXkiOnJldHVybiBpLmNsb25lKCk7Y2FzZSJvYmplY3QiOnJldHVybiBPYmplY3QuY2xvbmUoaSk7ZGVmYXVsdDpyZXR1cm4gaTt9fTtBcnJheS5pbXBsZW1lbnQoImNsb25lIixmdW5jdGlvbigpe3ZhciB2PXRoaXMubGVuZ3RoLHc9bmV3IEFycmF5KHYpOwp3aGlsZSh2LS0pe3dbdl09cyh0aGlzW3ZdKTt9cmV0dXJuIHc7fSk7dmFyIGE9ZnVuY3Rpb24odixpLHcpe3N3aXRjaChlKHcpKXtjYXNlIm9iamVjdCI6aWYoZSh2W2ldKT09Im9iamVjdCIpe09iamVjdC5tZXJnZSh2W2ldLHcpO31lbHNle3ZbaV09T2JqZWN0LmNsb25lKHcpOwp9YnJlYWs7Y2FzZSJhcnJheSI6dltpXT13LmNsb25lKCk7YnJlYWs7ZGVmYXVsdDp2W2ldPXc7fXJldHVybiB2O307T2JqZWN0LmV4dGVuZCh7bWVyZ2U6ZnVuY3Rpb24oQyx5LHgpe2lmKGUoeSk9PSJzdHJpbmciKXtyZXR1cm4gYShDLHkseCk7fWZvcih2YXIgQj0xLHc9YXJndW1lbnRzLmxlbmd0aDsKQjx3O0IrKyl7dmFyIHo9YXJndW1lbnRzW0JdO2Zvcih2YXIgQSBpbiB6KXthKEMsQSx6W0FdKTt9fXJldHVybiBDO30sY2xvbmU6ZnVuY3Rpb24oaSl7dmFyIHc9e307Zm9yKHZhciB2IGluIGkpe3dbdl09cyhpW3ZdKTt9cmV0dXJuIHc7fSxhcHBlbmQ6ZnVuY3Rpb24oeil7Zm9yKHZhciB5PTEsdz1hcmd1bWVudHMubGVuZ3RoOwp5PHc7eSsrKXt2YXIgdj1hcmd1bWVudHNbeV18fHt9O2Zvcih2YXIgeCBpbiB2KXt6W3hdPXZbeF07fX1yZXR1cm4gejt9fSk7WyJPYmplY3QiLCJXaGl0ZVNwYWNlIiwiVGV4dE5vZGUiLCJDb2xsZWN0aW9uIiwiQXJndW1lbnRzIl0uZWFjaChmdW5jdGlvbihpKXtuZXcgayhpKTsKfSk7dmFyIGo9RGF0ZS5ub3coKTtTdHJpbmcuZXh0ZW5kKCJ1bmlxdWVJRCIsZnVuY3Rpb24oKXtyZXR1cm4oaisrKS50b1N0cmluZygzNik7fSk7dmFyIGc9dGhpcy5IYXNoPW5ldyBrKCJIYXNoIixmdW5jdGlvbihpKXtpZihlKGkpPT0iaGFzaCIpe2k9T2JqZWN0LmNsb25lKGkuZ2V0Q2xlYW4oKSk7Cn1mb3IodmFyIHYgaW4gaSl7dGhpc1t2XT1pW3ZdO31yZXR1cm4gdGhpczt9KTtnLmltcGxlbWVudCh7Zm9yRWFjaDpmdW5jdGlvbihpLHYpe09iamVjdC5mb3JFYWNoKHRoaXMsaSx2KTt9LGdldENsZWFuOmZ1bmN0aW9uKCl7dmFyIHY9e307Zm9yKHZhciBpIGluIHRoaXMpe2lmKHRoaXMuaGFzT3duUHJvcGVydHkoaSkpe3ZbaV09dGhpc1tpXTsKfX1yZXR1cm4gdjt9LGdldExlbmd0aDpmdW5jdGlvbigpe3ZhciB2PTA7Zm9yKHZhciBpIGluIHRoaXMpe2lmKHRoaXMuaGFzT3duUHJvcGVydHkoaSkpe3YrKzt9fXJldHVybiB2O319KTtnLmFsaWFzKCJlYWNoIiwiZm9yRWFjaCIpO09iamVjdC50eXBlPWsuaXNPYmplY3Q7CnZhciBuPXRoaXMuTmF0aXZlPWZ1bmN0aW9uKGkpe3JldHVybiBuZXcgayhpLm5hbWUsaS5pbml0aWFsaXplKTt9O24udHlwZT1rLnR5cGU7bi5pbXBsZW1lbnQ9ZnVuY3Rpb24oeCx2KXtmb3IodmFyIHc9MDt3PHgubGVuZ3RoO3crKyl7eFt3XS5pbXBsZW1lbnQodik7Cn1yZXR1cm4gbjt9O3ZhciBtPUFycmF5LnR5cGU7QXJyYXkudHlwZT1mdW5jdGlvbihpKXtyZXR1cm4gdShpLEFycmF5KXx8bShpKTt9O3RoaXMuJEE9ZnVuY3Rpb24oaSl7cmV0dXJuIEFycmF5LmZyb20oaSkuc2xpY2UoKTt9O3RoaXMuJGFyZ3VtZW50cz1mdW5jdGlvbih2KXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gYXJndW1lbnRzW3ZdOwp9O307dGhpcy4kY2hrPWZ1bmN0aW9uKGkpe3JldHVybiAhIShpfHxpPT09MCk7fTt0aGlzLiRjbGVhcj1mdW5jdGlvbihpKXtjbGVhclRpbWVvdXQoaSk7Y2xlYXJJbnRlcnZhbChpKTtyZXR1cm4gbnVsbDt9O3RoaXMuJGRlZmluZWQ9ZnVuY3Rpb24oaSl7cmV0dXJuKGkhPW51bGwpOwp9O3RoaXMuJGVhY2g9ZnVuY3Rpb24odyx2LHgpe3ZhciBpPWUodyk7KChpPT0iYXJndW1lbnRzInx8aT09ImNvbGxlY3Rpb24ifHxpPT0iYXJyYXkifHxpPT0iZWxlbWVudHMiKT9BcnJheTpPYmplY3QpLmVhY2godyx2LHgpO307dGhpcy4kZW1wdHk9ZnVuY3Rpb24oKXt9Owp0aGlzLiRleHRlbmQ9ZnVuY3Rpb24odixpKXtyZXR1cm4gT2JqZWN0LmFwcGVuZCh2LGkpO307dGhpcy4kSD1mdW5jdGlvbihpKXtyZXR1cm4gbmV3IGcoaSk7fTt0aGlzLiRtZXJnZT1mdW5jdGlvbigpe3ZhciBpPUFycmF5LnNsaWNlKGFyZ3VtZW50cyk7aS51bnNoaWZ0KHt9KTsKcmV0dXJuIE9iamVjdC5tZXJnZS5hcHBseShudWxsLGkpO307dGhpcy4kbGFtYmRhPWYuZnJvbTt0aGlzLiRtaXhpbj1PYmplY3QubWVyZ2U7dGhpcy4kcmFuZG9tPU51bWJlci5yYW5kb207dGhpcy4kc3BsYXQ9QXJyYXkuZnJvbTt0aGlzLiR0aW1lPURhdGUubm93Owp0aGlzLiR0eXBlPWZ1bmN0aW9uKGkpe3ZhciB2PWUoaSk7aWYodj09ImVsZW1lbnRzIil7cmV0dXJuImFycmF5Ijt9cmV0dXJuKHY9PSJudWxsIik/ZmFsc2U6djt9O3RoaXMuJHVubGluaz1mdW5jdGlvbihpKXtzd2l0Y2goZShpKSl7Y2FzZSJvYmplY3QiOnJldHVybiBPYmplY3QuY2xvbmUoaSk7CmNhc2UiYXJyYXkiOnJldHVybiBBcnJheS5jbG9uZShpKTtjYXNlImhhc2giOnJldHVybiBuZXcgZyhpKTtkZWZhdWx0OnJldHVybiBpO319O30pLmNhbGwodGhpcyk7QXJyYXkuaW1wbGVtZW50KHtpbnZva2U6ZnVuY3Rpb24oYSl7dmFyIGI9QXJyYXkuc2xpY2UoYXJndW1lbnRzLDEpOwpyZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24oYyl7cmV0dXJuIGNbYV0uYXBwbHkoYyxiKTt9KTt9LGV2ZXJ5OmZ1bmN0aW9uKGMsZCl7Zm9yKHZhciBiPTAsYT10aGlzLmxlbmd0aDtiPGE7YisrKXtpZigoYiBpbiB0aGlzKSYmIWMuY2FsbChkLHRoaXNbYl0sYix0aGlzKSl7cmV0dXJuIGZhbHNlOwp9fXJldHVybiB0cnVlO30sZmlsdGVyOmZ1bmN0aW9uKGQsZSl7dmFyIGM9W107Zm9yKHZhciBiPTAsYT10aGlzLmxlbmd0aDtiPGE7YisrKXtpZigoYiBpbiB0aGlzKSYmZC5jYWxsKGUsdGhpc1tiXSxiLHRoaXMpKXtjLnB1c2godGhpc1tiXSk7fX1yZXR1cm4gYzt9LGNsZWFuOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZmlsdGVyKGZ1bmN0aW9uKGEpe3JldHVybiBhIT1udWxsOwp9KTt9LGluZGV4T2Y6ZnVuY3Rpb24oYyxkKXt2YXIgYT10aGlzLmxlbmd0aDtmb3IodmFyIGI9KGQ8MCk/TWF0aC5tYXgoMCxhK2QpOmR8fDA7YjxhO2IrKyl7aWYodGhpc1tiXT09PWMpe3JldHVybiBiO319cmV0dXJuIC0xO30sbWFwOmZ1bmN0aW9uKGQsZSl7dmFyIGM9W107CmZvcih2YXIgYj0wLGE9dGhpcy5sZW5ndGg7YjxhO2IrKyl7aWYoYiBpbiB0aGlzKXtjW2JdPWQuY2FsbChlLHRoaXNbYl0sYix0aGlzKTt9fXJldHVybiBjO30sc29tZTpmdW5jdGlvbihjLGQpe2Zvcih2YXIgYj0wLGE9dGhpcy5sZW5ndGg7YjxhO2IrKyl7aWYoKGIgaW4gdGhpcykmJmMuY2FsbChkLHRoaXNbYl0sYix0aGlzKSl7cmV0dXJuIHRydWU7Cn19cmV0dXJuIGZhbHNlO30sYXNzb2NpYXRlOmZ1bmN0aW9uKGMpe3ZhciBkPXt9LGI9TWF0aC5taW4odGhpcy5sZW5ndGgsYy5sZW5ndGgpO2Zvcih2YXIgYT0wO2E8YjthKyspe2RbY1thXV09dGhpc1thXTt9cmV0dXJuIGQ7fSxsaW5rOmZ1bmN0aW9uKGMpe3ZhciBhPXt9Owpmb3IodmFyIGU9MCxiPXRoaXMubGVuZ3RoO2U8YjtlKyspe2Zvcih2YXIgZCBpbiBjKXtpZihjW2RdKHRoaXNbZV0pKXthW2RdPXRoaXNbZV07ZGVsZXRlIGNbZF07YnJlYWs7fX19cmV0dXJuIGE7fSxjb250YWluczpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLmluZGV4T2YoYSxiKSE9LTE7Cn0sYXBwZW5kOmZ1bmN0aW9uKGEpe3RoaXMucHVzaC5hcHBseSh0aGlzLGEpO3JldHVybiB0aGlzO30sZ2V0TGFzdDpmdW5jdGlvbigpe3JldHVybih0aGlzLmxlbmd0aCk/dGhpc1t0aGlzLmxlbmd0aC0xXTpudWxsO30sZ2V0UmFuZG9tOmZ1bmN0aW9uKCl7cmV0dXJuKHRoaXMubGVuZ3RoKT90aGlzW051bWJlci5yYW5kb20oMCx0aGlzLmxlbmd0aC0xKV06bnVsbDsKfSxpbmNsdWRlOmZ1bmN0aW9uKGEpe2lmKCF0aGlzLmNvbnRhaW5zKGEpKXt0aGlzLnB1c2goYSk7fXJldHVybiB0aGlzO30sY29tYmluZTpmdW5jdGlvbihjKXtmb3IodmFyIGI9MCxhPWMubGVuZ3RoO2I8YTtiKyspe3RoaXMuaW5jbHVkZShjW2JdKTt9cmV0dXJuIHRoaXM7Cn0sZXJhc2U6ZnVuY3Rpb24oYil7Zm9yKHZhciBhPXRoaXMubGVuZ3RoO2EtLTspe2lmKHRoaXNbYV09PT1iKXt0aGlzLnNwbGljZShhLDEpO319cmV0dXJuIHRoaXM7fSxlbXB0eTpmdW5jdGlvbigpe3RoaXMubGVuZ3RoPTA7cmV0dXJuIHRoaXM7fSxmbGF0dGVuOmZ1bmN0aW9uKCl7dmFyIGQ9W107CmZvcih2YXIgYj0wLGE9dGhpcy5sZW5ndGg7YjxhO2IrKyl7dmFyIGM9dHlwZU9mKHRoaXNbYl0pO2lmKGM9PSJudWxsIil7Y29udGludWU7fWQ9ZC5jb25jYXQoKGM9PSJhcnJheSJ8fGM9PSJjb2xsZWN0aW9uInx8Yz09ImFyZ3VtZW50cyJ8fGluc3RhbmNlT2YodGhpc1tiXSxBcnJheSkpP0FycmF5LmZsYXR0ZW4odGhpc1tiXSk6dGhpc1tiXSk7Cn1yZXR1cm4gZDt9LHBpY2s6ZnVuY3Rpb24oKXtmb3IodmFyIGI9MCxhPXRoaXMubGVuZ3RoO2I8YTtiKyspe2lmKHRoaXNbYl0hPW51bGwpe3JldHVybiB0aGlzW2JdO319cmV0dXJuIG51bGw7fSxoZXhUb1JnYjpmdW5jdGlvbihiKXtpZih0aGlzLmxlbmd0aCE9Myl7cmV0dXJuIG51bGw7Cn12YXIgYT10aGlzLm1hcChmdW5jdGlvbihjKXtpZihjLmxlbmd0aD09MSl7Yys9Yzt9cmV0dXJuIGMudG9JbnQoMTYpO30pO3JldHVybihiKT9hOiJyZ2IoIithKyIpIjt9LHJnYlRvSGV4OmZ1bmN0aW9uKGQpe2lmKHRoaXMubGVuZ3RoPDMpe3JldHVybiBudWxsO31pZih0aGlzLmxlbmd0aD09NCYmdGhpc1szXT09MCYmIWQpe3JldHVybiJ0cmFuc3BhcmVudCI7Cn12YXIgYj1bXTtmb3IodmFyIGE9MDthPDM7YSsrKXt2YXIgYz0odGhpc1thXS0wKS50b1N0cmluZygxNik7Yi5wdXNoKChjLmxlbmd0aD09MSk/IjAiK2M6Yyk7fXJldHVybihkKT9iOiIjIitiLmpvaW4oIiIpO319KTtBcnJheS5hbGlhcygiZXh0ZW5kIiwiYXBwZW5kIik7CnZhciAkcGljaz1mdW5jdGlvbigpe3JldHVybiBBcnJheS5mcm9tKGFyZ3VtZW50cykucGljaygpO307U3RyaW5nLmltcGxlbWVudCh7dGVzdDpmdW5jdGlvbihhLGIpe3JldHVybigodHlwZU9mKGEpPT0icmVnZXhwIik/YTpuZXcgUmVnRXhwKCIiK2EsYikpLnRlc3QodGhpcyk7Cn0sY29udGFpbnM6ZnVuY3Rpb24oYSxiKXtyZXR1cm4oYik/KGIrdGhpcytiKS5pbmRleE9mKGIrYStiKT4tMTp0aGlzLmluZGV4T2YoYSk+LTE7fSx0cmltOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmVwbGFjZSgvXlxzK3xccyskL2csIiIpO30sY2xlYW46ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yZXBsYWNlKC9ccysvZywiICIpLnRyaW0oKTsKfSxjYW1lbENhc2U6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yZXBsYWNlKC8tXEQvZyxmdW5jdGlvbihhKXtyZXR1cm4gYS5jaGFyQXQoMSkudG9VcHBlckNhc2UoKTt9KTt9LGh5cGhlbmF0ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnJlcGxhY2UoL1tBLVpdL2csZnVuY3Rpb24oYSl7cmV0dXJuKCItIithLmNoYXJBdCgwKS50b0xvd2VyQ2FzZSgpKTsKfSk7fSxjYXBpdGFsaXplOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmVwbGFjZSgvXGJbYS16XS9nLGZ1bmN0aW9uKGEpe3JldHVybiBhLnRvVXBwZXJDYXNlKCk7fSk7fSxlc2NhcGVSZWdFeHA6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yZXBsYWNlKC8oWy0uKis/XiR7fSgpfFtcXVwvXFxdKS9nLCJcXCQxIik7Cn0sdG9JbnQ6ZnVuY3Rpb24oYSl7cmV0dXJuIHBhcnNlSW50KHRoaXMsYXx8MTApO30sdG9GbG9hdDpmdW5jdGlvbigpe3JldHVybiBwYXJzZUZsb2F0KHRoaXMpO30saGV4VG9SZ2I6ZnVuY3Rpb24oYil7dmFyIGE9dGhpcy5tYXRjaCgvXiM/KFx3ezEsMn0pKFx3ezEsMn0pKFx3ezEsMn0pJC8pOwpyZXR1cm4oYSk/YS5zbGljZSgxKS5oZXhUb1JnYihiKTpudWxsO30scmdiVG9IZXg6ZnVuY3Rpb24oYil7dmFyIGE9dGhpcy5tYXRjaCgvXGR7MSwzfS9nKTtyZXR1cm4oYSk/YS5yZ2JUb0hleChiKTpudWxsO30sc3Vic3RpdHV0ZTpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLnJlcGxhY2UoYnx8KC9cXD9ceyhbXnt9XSspXH0vZyksZnVuY3Rpb24oZCxjKXtpZihkLmNoYXJBdCgwKT09IlxcIil7cmV0dXJuIGQuc2xpY2UoMSk7Cn1yZXR1cm4oYVtjXSE9bnVsbCk/YVtjXToiIjt9KTt9fSk7TnVtYmVyLmltcGxlbWVudCh7bGltaXQ6ZnVuY3Rpb24oYixhKXtyZXR1cm4gTWF0aC5taW4oYSxNYXRoLm1heChiLHRoaXMpKTt9LHJvdW5kOmZ1bmN0aW9uKGEpe2E9TWF0aC5wb3coMTAsYXx8MCkudG9GaXhlZChhPDA/LWE6MCk7CnJldHVybiBNYXRoLnJvdW5kKHRoaXMqYSkvYTt9LHRpbWVzOmZ1bmN0aW9uKGIsYyl7Zm9yKHZhciBhPTA7YTx0aGlzO2ErKyl7Yi5jYWxsKGMsYSx0aGlzKTt9fSx0b0Zsb2F0OmZ1bmN0aW9uKCl7cmV0dXJuIHBhcnNlRmxvYXQodGhpcyk7fSx0b0ludDpmdW5jdGlvbihhKXtyZXR1cm4gcGFyc2VJbnQodGhpcyxhfHwxMCk7Cn19KTtOdW1iZXIuYWxpYXMoImVhY2giLCJ0aW1lcyIpOyhmdW5jdGlvbihiKXt2YXIgYT17fTtiLmVhY2goZnVuY3Rpb24oYyl7aWYoIU51bWJlcltjXSl7YVtjXT1mdW5jdGlvbigpe3JldHVybiBNYXRoW2NdLmFwcGx5KG51bGwsW3RoaXNdLmNvbmNhdChBcnJheS5mcm9tKGFyZ3VtZW50cykpKTsKfTt9fSk7TnVtYmVyLmltcGxlbWVudChhKTt9KShbImFicyIsImFjb3MiLCJhc2luIiwiYXRhbiIsImF0YW4yIiwiY2VpbCIsImNvcyIsImV4cCIsImZsb29yIiwibG9nIiwibWF4IiwibWluIiwicG93Iiwic2luIiwic3FydCIsInRhbiJdKTtGdW5jdGlvbi5leHRlbmQoe2F0dGVtcHQ6ZnVuY3Rpb24oKXtmb3IodmFyIGI9MCxhPWFyZ3VtZW50cy5sZW5ndGg7CmI8YTtiKyspe3RyeXtyZXR1cm4gYXJndW1lbnRzW2JdKCk7fWNhdGNoKGMpe319cmV0dXJuIG51bGw7fX0pO0Z1bmN0aW9uLmltcGxlbWVudCh7YXR0ZW1wdDpmdW5jdGlvbihhLGMpe3RyeXtyZXR1cm4gdGhpcy5hcHBseShjLEFycmF5LmZyb20oYSkpO31jYXRjaChiKXt9cmV0dXJuIG51bGw7Cn0sYmluZDpmdW5jdGlvbihjKXt2YXIgYT10aGlzLGI9KGFyZ3VtZW50cy5sZW5ndGg+MSk/QXJyYXkuc2xpY2UoYXJndW1lbnRzLDEpOm51bGw7cmV0dXJuIGZ1bmN0aW9uKCl7aWYoIWImJiFhcmd1bWVudHMubGVuZ3RoKXtyZXR1cm4gYS5jYWxsKGMpO31pZihiJiZhcmd1bWVudHMubGVuZ3RoKXtyZXR1cm4gYS5hcHBseShjLGIuY29uY2F0KEFycmF5LmZyb20oYXJndW1lbnRzKSkpOwp9cmV0dXJuIGEuYXBwbHkoYyxifHxhcmd1bWVudHMpO307fSxwYXNzOmZ1bmN0aW9uKGIsYyl7dmFyIGE9dGhpcztpZihiIT1udWxsKXtiPUFycmF5LmZyb20oYik7fXJldHVybiBmdW5jdGlvbigpe3JldHVybiBhLmFwcGx5KGMsYnx8YXJndW1lbnRzKTt9O30sZGVsYXk6ZnVuY3Rpb24oYixjLGEpe3JldHVybiBzZXRUaW1lb3V0KHRoaXMucGFzcygoYT09bnVsbD9bXTphKSxjKSxiKTsKfSxwZXJpb2RpY2FsOmZ1bmN0aW9uKGMsYixhKXtyZXR1cm4gc2V0SW50ZXJ2YWwodGhpcy5wYXNzKChhPT1udWxsP1tdOmEpLGIpLGMpO319KTtkZWxldGUgRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQ7RnVuY3Rpb24uaW1wbGVtZW50KHtjcmVhdGU6ZnVuY3Rpb24oYil7dmFyIGE9dGhpczsKYj1ifHx7fTtyZXR1cm4gZnVuY3Rpb24oZCl7dmFyIGM9Yi5hcmd1bWVudHM7Yz0oYyE9bnVsbCk/QXJyYXkuZnJvbShjKTpBcnJheS5zbGljZShhcmd1bWVudHMsKGIuZXZlbnQpPzE6MCk7aWYoYi5ldmVudCl7Yz1bZHx8d2luZG93LmV2ZW50XS5leHRlbmQoYyk7fXZhciBlPWZ1bmN0aW9uKCl7cmV0dXJuIGEuYXBwbHkoYi5iaW5kfHxudWxsLGMpOwp9O2lmKGIuZGVsYXkpe3JldHVybiBzZXRUaW1lb3V0KGUsYi5kZWxheSk7fWlmKGIucGVyaW9kaWNhbCl7cmV0dXJuIHNldEludGVydmFsKGUsYi5wZXJpb2RpY2FsKTt9aWYoYi5hdHRlbXB0KXtyZXR1cm4gRnVuY3Rpb24uYXR0ZW1wdChlKTt9cmV0dXJuIGUoKTt9Owp9LGJpbmQ6ZnVuY3Rpb24oYyxiKXt2YXIgYT10aGlzO2lmKGIhPW51bGwpe2I9QXJyYXkuZnJvbShiKTt9cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGEuYXBwbHkoYyxifHxhcmd1bWVudHMpO307fSxiaW5kV2l0aEV2ZW50OmZ1bmN0aW9uKGMsYil7dmFyIGE9dGhpczsKaWYoYiE9bnVsbCl7Yj1BcnJheS5mcm9tKGIpO31yZXR1cm4gZnVuY3Rpb24oZCl7cmV0dXJuIGEuYXBwbHkoYywoYj09bnVsbCk/YXJndW1lbnRzOltkXS5jb25jYXQoYikpO307fSxydW46ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5hcHBseShiLEFycmF5LmZyb20oYSkpOwp9fSk7dmFyICR0cnk9RnVuY3Rpb24uYXR0ZW1wdDsoZnVuY3Rpb24oKXt2YXIgYT1PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O09iamVjdC5leHRlbmQoe3N1YnNldDpmdW5jdGlvbihkLGcpe3ZhciBmPXt9O2Zvcih2YXIgZT0wLGI9Zy5sZW5ndGg7ZTxiOwplKyspe3ZhciBjPWdbZV07ZltjXT1kW2NdO31yZXR1cm4gZjt9LG1hcDpmdW5jdGlvbihiLGUsZil7dmFyIGQ9e307Zm9yKHZhciBjIGluIGIpe2lmKGEuY2FsbChiLGMpKXtkW2NdPWUuY2FsbChmLGJbY10sYyxiKTt9fXJldHVybiBkO30sZmlsdGVyOmZ1bmN0aW9uKGIsZCxlKXt2YXIgYz17fTsKT2JqZWN0LmVhY2goYixmdW5jdGlvbihnLGYpe2lmKGQuY2FsbChlLGcsZixiKSl7Y1tmXT1nO319KTtyZXR1cm4gYzt9LGV2ZXJ5OmZ1bmN0aW9uKGIsZCxlKXtmb3IodmFyIGMgaW4gYil7aWYoYS5jYWxsKGIsYykmJiFkLmNhbGwoZSxiW2NdLGMpKXtyZXR1cm4gZmFsc2U7Cn19cmV0dXJuIHRydWU7fSxzb21lOmZ1bmN0aW9uKGIsZCxlKXtmb3IodmFyIGMgaW4gYil7aWYoYS5jYWxsKGIsYykmJmQuY2FsbChlLGJbY10sYykpe3JldHVybiB0cnVlO319cmV0dXJuIGZhbHNlO30sa2V5czpmdW5jdGlvbihiKXt2YXIgZD1bXTtmb3IodmFyIGMgaW4gYil7aWYoYS5jYWxsKGIsYykpe2QucHVzaChjKTsKfX1yZXR1cm4gZDt9LHZhbHVlczpmdW5jdGlvbihjKXt2YXIgYj1bXTtmb3IodmFyIGQgaW4gYyl7aWYoYS5jYWxsKGMsZCkpe2IucHVzaChjW2RdKTt9fXJldHVybiBiO30sZ2V0TGVuZ3RoOmZ1bmN0aW9uKGIpe3JldHVybiBPYmplY3Qua2V5cyhiKS5sZW5ndGg7fSxrZXlPZjpmdW5jdGlvbihiLGQpe2Zvcih2YXIgYyBpbiBiKXtpZihhLmNhbGwoYixjKSYmYltjXT09PWQpe3JldHVybiBjOwp9fXJldHVybiBudWxsO30sY29udGFpbnM6ZnVuY3Rpb24oYixjKXtyZXR1cm4gT2JqZWN0LmtleU9mKGIsYykhPW51bGw7fSx0b1F1ZXJ5U3RyaW5nOmZ1bmN0aW9uKGIsYyl7dmFyIGQ9W107T2JqZWN0LmVhY2goYixmdW5jdGlvbihoLGcpe2lmKGMpe2c9YysiWyIrZysiXSI7Cn12YXIgZjtzd2l0Y2godHlwZU9mKGgpKXtjYXNlIm9iamVjdCI6Zj1PYmplY3QudG9RdWVyeVN0cmluZyhoLGcpO2JyZWFrO2Nhc2UiYXJyYXkiOnZhciBlPXt9O2guZWFjaChmdW5jdGlvbihrLGope2Vbal09azt9KTtmPU9iamVjdC50b1F1ZXJ5U3RyaW5nKGUsZyk7CmJyZWFrO2RlZmF1bHQ6Zj1nKyI9IitlbmNvZGVVUklDb21wb25lbnQoaCk7fWlmKGghPW51bGwpe2QucHVzaChmKTt9fSk7cmV0dXJuIGQuam9pbigiJiIpO319KTt9KSgpO0hhc2guaW1wbGVtZW50KHtoYXM6T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eSxrZXlPZjpmdW5jdGlvbihhKXtyZXR1cm4gT2JqZWN0LmtleU9mKHRoaXMsYSk7Cn0saGFzVmFsdWU6ZnVuY3Rpb24oYSl7cmV0dXJuIE9iamVjdC5jb250YWlucyh0aGlzLGEpO30sZXh0ZW5kOmZ1bmN0aW9uKGEpe0hhc2guZWFjaChhfHx7fSxmdW5jdGlvbihjLGIpe0hhc2guc2V0KHRoaXMsYixjKTt9LHRoaXMpO3JldHVybiB0aGlzO30sY29tYmluZTpmdW5jdGlvbihhKXtIYXNoLmVhY2goYXx8e30sZnVuY3Rpb24oYyxiKXtIYXNoLmluY2x1ZGUodGhpcyxiLGMpOwp9LHRoaXMpO3JldHVybiB0aGlzO30sZXJhc2U6ZnVuY3Rpb24oYSl7aWYodGhpcy5oYXNPd25Qcm9wZXJ0eShhKSl7ZGVsZXRlIHRoaXNbYV07fXJldHVybiB0aGlzO30sZ2V0OmZ1bmN0aW9uKGEpe3JldHVybih0aGlzLmhhc093blByb3BlcnR5KGEpKT90aGlzW2FdOm51bGw7Cn0sc2V0OmZ1bmN0aW9uKGEsYil7aWYoIXRoaXNbYV18fHRoaXMuaGFzT3duUHJvcGVydHkoYSkpe3RoaXNbYV09Yjt9cmV0dXJuIHRoaXM7fSxlbXB0eTpmdW5jdGlvbigpe0hhc2guZWFjaCh0aGlzLGZ1bmN0aW9uKGIsYSl7ZGVsZXRlIHRoaXNbYV07fSx0aGlzKTsKcmV0dXJuIHRoaXM7fSxpbmNsdWRlOmZ1bmN0aW9uKGEsYil7aWYodGhpc1thXT09bnVsbCl7dGhpc1thXT1iO31yZXR1cm4gdGhpczt9LG1hcDpmdW5jdGlvbihhLGIpe3JldHVybiBuZXcgSGFzaChPYmplY3QubWFwKHRoaXMsYSxiKSk7fSxmaWx0ZXI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbmV3IEhhc2goT2JqZWN0LmZpbHRlcih0aGlzLGEsYikpOwp9LGV2ZXJ5OmZ1bmN0aW9uKGEsYil7cmV0dXJuIE9iamVjdC5ldmVyeSh0aGlzLGEsYik7fSxzb21lOmZ1bmN0aW9uKGEsYil7cmV0dXJuIE9iamVjdC5zb21lKHRoaXMsYSxiKTt9LGdldEtleXM6ZnVuY3Rpb24oKXtyZXR1cm4gT2JqZWN0LmtleXModGhpcyk7fSxnZXRWYWx1ZXM6ZnVuY3Rpb24oKXtyZXR1cm4gT2JqZWN0LnZhbHVlcyh0aGlzKTsKfSx0b1F1ZXJ5U3RyaW5nOmZ1bmN0aW9uKGEpe3JldHVybiBPYmplY3QudG9RdWVyeVN0cmluZyh0aGlzLGEpO319KTtIYXNoLmV4dGVuZD1PYmplY3QuYXBwZW5kO0hhc2guYWxpYXMoe2luZGV4T2Y6ImtleU9mIixjb250YWluczoiaGFzVmFsdWUifSk7KGZ1bmN0aW9uKCl7dmFyIGw9dGhpcy5kb2N1bWVudDsKdmFyIGo9bC53aW5kb3c9dGhpczt2YXIgYj0xO3RoaXMuJHVpZD0oai5BY3RpdmVYT2JqZWN0KT9mdW5jdGlvbihlKXtyZXR1cm4oZS51aWR8fChlLnVpZD1bYisrXSkpWzBdO306ZnVuY3Rpb24oZSl7cmV0dXJuIGUudWlkfHwoZS51aWQ9YisrKTt9OyR1aWQoaik7JHVpZChsKTsKdmFyIGE9bmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLGM9bmF2aWdhdG9yLnBsYXRmb3JtLnRvTG93ZXJDYXNlKCksaz1hLm1hdGNoKC8ob3BlcmF8aWV8ZmlyZWZveHxjaHJvbWV8dmVyc2lvbilbXHNcLzpdKFtcd1xkXC5dKyk/Lio/KHNhZmFyaXx2ZXJzaW9uW1xzXC86XShbXHdcZFwuXSspfCQpLyl8fFtudWxsLCJ1bmtub3duIiwwXSxnPWtbMV09PSJpZSImJmwuZG9jdW1lbnRNb2RlOwp2YXIgcD10aGlzLkJyb3dzZXI9e2V4dGVuZDpGdW5jdGlvbi5wcm90b3R5cGUuZXh0ZW5kLG5hbWU6KGtbMV09PSJ2ZXJzaW9uIik/a1szXTprWzFdLHZlcnNpb246Z3x8cGFyc2VGbG9hdCgoa1sxXT09Im9wZXJhIiYma1s0XSk/a1s0XTprWzJdKSxQbGF0Zm9ybTp7bmFtZTphLm1hdGNoKC9pcCg/OmFkfG9kfGhvbmUpLyk/ImlvcyI6KGEubWF0Y2goLyg/OndlYm9zfGFuZHJvaWQpLyl8fGMubWF0Y2goL21hY3x3aW58bGludXgvKXx8WyJvdGhlciJdKVswXX0sRmVhdHVyZXM6e3hwYXRoOiEhKGwuZXZhbHVhdGUpLGFpcjohIShqLnJ1bnRpbWUpLHF1ZXJ5OiEhKGwucXVlcnlTZWxlY3RvciksanNvbjohIShqLkpTT04pfSxQbHVnaW5zOnt9fTsKcFtwLm5hbWVdPXRydWU7cFtwLm5hbWUrcGFyc2VJbnQocC52ZXJzaW9uLDEwKV09dHJ1ZTtwLlBsYXRmb3JtW3AuUGxhdGZvcm0ubmFtZV09dHJ1ZTtwLlJlcXVlc3Q9KGZ1bmN0aW9uKCl7dmFyIHI9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7Cn07dmFyIHE9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IEFjdGl2ZVhPYmplY3QoIk1TWE1MMi5YTUxIVFRQIik7fTt2YXIgZT1mdW5jdGlvbigpe3JldHVybiBuZXcgQWN0aXZlWE9iamVjdCgiTWljcm9zb2Z0LlhNTEhUVFAiKTt9O3JldHVybiBGdW5jdGlvbi5hdHRlbXB0KGZ1bmN0aW9uKCl7cigpOwpyZXR1cm4gcjt9LGZ1bmN0aW9uKCl7cSgpO3JldHVybiBxO30sZnVuY3Rpb24oKXtlKCk7cmV0dXJuIGU7fSk7fSkoKTtwLkZlYXR1cmVzLnhocj0hIShwLlJlcXVlc3QpO3ZhciBpPShGdW5jdGlvbi5hdHRlbXB0KGZ1bmN0aW9uKCl7cmV0dXJuIG5hdmlnYXRvci5wbHVnaW5zWyJTaG9ja3dhdmUgRmxhc2giXS5kZXNjcmlwdGlvbjsKfSxmdW5jdGlvbigpe3JldHVybiBuZXcgQWN0aXZlWE9iamVjdCgiU2hvY2t3YXZlRmxhc2guU2hvY2t3YXZlRmxhc2giKS5HZXRWYXJpYWJsZSgiJHZlcnNpb24iKTt9KXx8IjAgcjAiKS5tYXRjaCgvXGQrL2cpO3AuUGx1Z2lucy5GbGFzaD17dmVyc2lvbjpOdW1iZXIoaVswXXx8IjAuIitpWzFdKXx8MCxidWlsZDpOdW1iZXIoaVsyXSl8fDB9OwpwLmV4ZWM9ZnVuY3Rpb24ocSl7aWYoIXEpe3JldHVybiBxO31pZihqLmV4ZWNTY3JpcHQpe2ouZXhlY1NjcmlwdChxKTt9ZWxzZXt2YXIgZT1sLmNyZWF0ZUVsZW1lbnQoInNjcmlwdCIpO2Uuc2V0QXR0cmlidXRlKCJ0eXBlIiwidGV4dC9qYXZhc2NyaXB0Iik7ZS50ZXh0PXE7CmwuaGVhZC5hcHBlbmRDaGlsZChlKTtsLmhlYWQucmVtb3ZlQ2hpbGQoZSk7fXJldHVybiBxO307U3RyaW5nLmltcGxlbWVudCgic3RyaXBTY3JpcHRzIixmdW5jdGlvbihxKXt2YXIgZT0iIjt2YXIgcj10aGlzLnJlcGxhY2UoLzxzY3JpcHRbXj5dKj4oW1xzXFNdKj8pPFwvc2NyaXB0Pi9naSxmdW5jdGlvbihzLHQpe2UrPXQrIlxuIjsKcmV0dXJuIiI7fSk7aWYocT09PXRydWUpe3AuZXhlYyhlKTt9ZWxzZXtpZih0eXBlT2YocSk9PSJmdW5jdGlvbiIpe3EoZSxyKTt9fXJldHVybiByO30pO3AuZXh0ZW5kKHtEb2N1bWVudDp0aGlzLkRvY3VtZW50LFdpbmRvdzp0aGlzLldpbmRvdyxFbGVtZW50OnRoaXMuRWxlbWVudCxFdmVudDp0aGlzLkV2ZW50fSk7CnRoaXMuV2luZG93PXRoaXMuJGNvbnN0cnVjdG9yPW5ldyBUeXBlKCJXaW5kb3ciLGZ1bmN0aW9uKCl7fSk7dGhpcy4kZmFtaWx5PUZ1bmN0aW9uLmZyb20oIndpbmRvdyIpLmhpZGUoKTtXaW5kb3cubWlycm9yKGZ1bmN0aW9uKGUscSl7altlXT1xO30pO3RoaXMuRG9jdW1lbnQ9bC4kY29uc3RydWN0b3I9bmV3IFR5cGUoIkRvY3VtZW50IixmdW5jdGlvbigpe30pOwpsLiRmYW1pbHk9RnVuY3Rpb24uZnJvbSgiZG9jdW1lbnQiKS5oaWRlKCk7RG9jdW1lbnQubWlycm9yKGZ1bmN0aW9uKGUscSl7bFtlXT1xO30pO2wuaHRtbD1sLmRvY3VtZW50RWxlbWVudDtsLmhlYWQ9bC5nZXRFbGVtZW50c0J5VGFnTmFtZSgiaGVhZCIpWzBdO2lmKGwuZXhlY0NvbW1hbmQpe3RyeXtsLmV4ZWNDb21tYW5kKCJCYWNrZ3JvdW5kSW1hZ2VDYWNoZSIsZmFsc2UsdHJ1ZSk7Cn1jYXRjaChoKXt9fWlmKHRoaXMuYXR0YWNoRXZlbnQmJiF0aGlzLmFkZEV2ZW50TGlzdGVuZXIpe3ZhciBkPWZ1bmN0aW9uKCl7dGhpcy5kZXRhY2hFdmVudCgib251bmxvYWQiLGQpO2wuaGVhZD1sLmh0bWw9bC53aW5kb3c9bnVsbDt9O3RoaXMuYXR0YWNoRXZlbnQoIm9udW5sb2FkIixkKTsKfXZhciBuPUFycmF5LmZyb207dHJ5e24obC5odG1sLmNoaWxkTm9kZXMpO31jYXRjaChoKXtBcnJheS5mcm9tPWZ1bmN0aW9uKHEpe2lmKHR5cGVvZiBxIT0ic3RyaW5nIiYmVHlwZS5pc0VudW1lcmFibGUocSkmJnR5cGVPZihxKSE9ImFycmF5Iil7dmFyIGU9cS5sZW5ndGgscj1uZXcgQXJyYXkoZSk7CndoaWxlKGUtLSl7cltlXT1xW2VdO31yZXR1cm4gcjt9cmV0dXJuIG4ocSk7fTt2YXIgbT1BcnJheS5wcm90b3R5cGUsbz1tLnNsaWNlO1sicG9wIiwicHVzaCIsInJldmVyc2UiLCJzaGlmdCIsInNvcnQiLCJzcGxpY2UiLCJ1bnNoaWZ0IiwiY29uY2F0Iiwiam9pbiIsInNsaWNlIl0uZWFjaChmdW5jdGlvbihlKXt2YXIgcT1tW2VdOwpBcnJheVtlXT1mdW5jdGlvbihyKXtyZXR1cm4gcS5hcHBseShBcnJheS5mcm9tKHIpLG8uY2FsbChhcmd1bWVudHMsMSkpO307fSk7fWlmKHAuUGxhdGZvcm0uaW9zKXtwLlBsYXRmb3JtLmlwb2Q9dHJ1ZTt9cC5FbmdpbmU9e307dmFyIGY9ZnVuY3Rpb24ocSxlKXtwLkVuZ2luZS5uYW1lPXE7CnAuRW5naW5lW3ErZV09dHJ1ZTtwLkVuZ2luZS52ZXJzaW9uPWU7fTtpZihwLmllKXtwLkVuZ2luZS50cmlkZW50PXRydWU7c3dpdGNoKHAudmVyc2lvbil7Y2FzZSA2OmYoInRyaWRlbnQiLDQpO2JyZWFrO2Nhc2UgNzpmKCJ0cmlkZW50Iiw1KTticmVhaztjYXNlIDg6ZigidHJpZGVudCIsNik7Cn19aWYocC5maXJlZm94KXtwLkVuZ2luZS5nZWNrbz10cnVlO2lmKHAudmVyc2lvbj49Myl7ZigiZ2Vja28iLDE5KTt9ZWxzZXtmKCJnZWNrbyIsMTgpO319aWYocC5zYWZhcml8fHAuY2hyb21lKXtwLkVuZ2luZS53ZWJraXQ9dHJ1ZTtzd2l0Y2gocC52ZXJzaW9uKXtjYXNlIDI6Zigid2Via2l0Iiw0MTkpOwpicmVhaztjYXNlIDM6Zigid2Via2l0Iiw0MjApO2JyZWFrO2Nhc2UgNDpmKCJ3ZWJraXQiLDUyNSk7fX1pZihwLm9wZXJhKXtwLkVuZ2luZS5wcmVzdG89dHJ1ZTtpZihwLnZlcnNpb24+PTkuNil7ZigicHJlc3RvIiw5NjApO31lbHNle2lmKHAudmVyc2lvbj49OS41KXtmKCJwcmVzdG8iLDk1MCk7Cn1lbHNle2YoInByZXN0byIsOTI1KTt9fX1pZihwLm5hbWU9PSJ1bmtub3duIil7c3dpdGNoKChhLm1hdGNoKC8oPzp3ZWJraXR8a2h0bWx8Z2Vja28pLyl8fFtdKVswXSl7Y2FzZSJ3ZWJraXQiOmNhc2Uia2h0bWwiOnAuRW5naW5lLndlYmtpdD10cnVlO2JyZWFrO2Nhc2UiZ2Vja28iOnAuRW5naW5lLmdlY2tvPXRydWU7Cn19dGhpcy4kZXhlYz1wLmV4ZWM7fSkuY2FsbCh0aGlzKTt2YXIgRXZlbnQ9bmV3IFR5cGUoIkV2ZW50IixmdW5jdGlvbihhLGkpe2lmKCFpKXtpPXdpbmRvdzt9dmFyIG89aS5kb2N1bWVudDthPWF8fGkuZXZlbnQ7aWYoYS4kZXh0ZW5kZWQpe3JldHVybiBhO310aGlzLiRleHRlbmRlZD10cnVlOwp2YXIgbj1hLnR5cGUsaz1hLnRhcmdldHx8YS5zcmNFbGVtZW50LG09e30sYz17fSxxPW51bGwsaCxsLGIscDt3aGlsZShrJiZrLm5vZGVUeXBlPT0zKXtrPWsucGFyZW50Tm9kZTt9aWYobi5pbmRleE9mKCJrZXkiKSE9LTEpe2I9YS53aGljaHx8YS5rZXlDb2RlO3A9T2JqZWN0LmtleU9mKEV2ZW50LktleXMsYik7CmlmKG49PSJrZXlkb3duIil7dmFyIGQ9Yi0xMTE7aWYoZD4wJiZkPDEzKXtwPSJmIitkO319aWYoIXApe3A9U3RyaW5nLmZyb21DaGFyQ29kZShiKS50b0xvd2VyQ2FzZSgpO319ZWxzZXtpZigoL2NsaWNrfG1vdXNlfG1lbnUvaSkudGVzdChuKSl7bz0oIW8uY29tcGF0TW9kZXx8by5jb21wYXRNb2RlPT0iQ1NTMUNvbXBhdCIpP28uaHRtbDpvLmJvZHk7Cm09e3g6KGEucGFnZVghPW51bGwpP2EucGFnZVg6YS5jbGllbnRYK28uc2Nyb2xsTGVmdCx5OihhLnBhZ2VZIT1udWxsKT9hLnBhZ2VZOmEuY2xpZW50WStvLnNjcm9sbFRvcH07Yz17eDooYS5wYWdlWCE9bnVsbCk/YS5wYWdlWC1pLnBhZ2VYT2Zmc2V0OmEuY2xpZW50WCx5OihhLnBhZ2VZIT1udWxsKT9hLnBhZ2VZLWkucGFnZVlPZmZzZXQ6YS5jbGllbnRZfTsKaWYoKC9ET01Nb3VzZVNjcm9sbHxtb3VzZXdoZWVsLykudGVzdChuKSl7bD0oYS53aGVlbERlbHRhKT9hLndoZWVsRGVsdGEvMTIwOi0oYS5kZXRhaWx8fDApLzM7fWg9KGEud2hpY2g9PTMpfHwoYS5idXR0b249PTIpO2lmKCgvb3ZlcnxvdXQvKS50ZXN0KG4pKXtxPWEucmVsYXRlZFRhcmdldHx8YVsobj09Im1vdXNlb3ZlciI/ImZyb20iOiJ0byIpKyJFbGVtZW50Il07CnZhciBqPWZ1bmN0aW9uKCl7d2hpbGUocSYmcS5ub2RlVHlwZT09Myl7cT1xLnBhcmVudE5vZGU7fXJldHVybiB0cnVlO307dmFyIGc9KEJyb3dzZXIuZmlyZWZveDIpP2ouYXR0ZW1wdCgpOmooKTtxPShnKT9xOm51bGw7fX1lbHNle2lmKCgvZ2VzdHVyZXx0b3VjaC9pKS50ZXN0KG4pKXt0aGlzLnJvdGF0aW9uPWEucm90YXRpb247CnRoaXMuc2NhbGU9YS5zY2FsZTt0aGlzLnRhcmdldFRvdWNoZXM9YS50YXJnZXRUb3VjaGVzO3RoaXMuY2hhbmdlZFRvdWNoZXM9YS5jaGFuZ2VkVG91Y2hlczt2YXIgZj10aGlzLnRvdWNoZXM9YS50b3VjaGVzO2lmKGYmJmZbMF0pe3ZhciBlPWZbMF07bT17eDplLnBhZ2VYLHk6ZS5wYWdlWX07CmM9e3g6ZS5jbGllbnRYLHk6ZS5jbGllbnRZfTt9fX19cmV0dXJuIE9iamVjdC5hcHBlbmQodGhpcyx7ZXZlbnQ6YSx0eXBlOm4scGFnZTptLGNsaWVudDpjLHJpZ2h0Q2xpY2s6aCx3aGVlbDpsLHJlbGF0ZWRUYXJnZXQ6ZG9jdW1lbnQuaWQocSksdGFyZ2V0OmRvY3VtZW50LmlkKGspLGNvZGU6YixrZXk6cCxzaGlmdDphLnNoaWZ0S2V5LGNvbnRyb2w6YS5jdHJsS2V5LGFsdDphLmFsdEtleSxtZXRhOmEubWV0YUtleX0pOwp9KTtFdmVudC5LZXlzPXtlbnRlcjoxMyx1cDozOCxkb3duOjQwLGxlZnQ6MzcscmlnaHQ6MzksZXNjOjI3LHNwYWNlOjMyLGJhY2tzcGFjZTo4LHRhYjo5LCJkZWxldGUiOjQ2fTtFdmVudC5LZXlzPW5ldyBIYXNoKEV2ZW50LktleXMpO0V2ZW50LmltcGxlbWVudCh7c3RvcDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnN0b3BQcm9wYWdhdGlvbigpLnByZXZlbnREZWZhdWx0KCk7Cn0sc3RvcFByb3BhZ2F0aW9uOmZ1bmN0aW9uKCl7aWYodGhpcy5ldmVudC5zdG9wUHJvcGFnYXRpb24pe3RoaXMuZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7fWVsc2V7dGhpcy5ldmVudC5jYW5jZWxCdWJibGU9dHJ1ZTt9cmV0dXJuIHRoaXM7fSxwcmV2ZW50RGVmYXVsdDpmdW5jdGlvbigpe2lmKHRoaXMuZXZlbnQucHJldmVudERlZmF1bHQpe3RoaXMuZXZlbnQucHJldmVudERlZmF1bHQoKTsKfWVsc2V7dGhpcy5ldmVudC5yZXR1cm5WYWx1ZT1mYWxzZTt9cmV0dXJuIHRoaXM7fX0pOyhmdW5jdGlvbigpe3ZhciBhPXRoaXMuQ2xhc3M9bmV3IFR5cGUoIkNsYXNzIixmdW5jdGlvbihoKXtpZihpbnN0YW5jZU9mKGgsRnVuY3Rpb24pKXtoPXtpbml0aWFsaXplOmh9Owp9dmFyIGc9ZnVuY3Rpb24oKXtlKHRoaXMpO2lmKGcuJHByb3RvdHlwaW5nKXtyZXR1cm4gdGhpczt9dGhpcy4kY2FsbGVyPW51bGw7dmFyIGk9KHRoaXMuaW5pdGlhbGl6ZSk/dGhpcy5pbml0aWFsaXplLmFwcGx5KHRoaXMsYXJndW1lbnRzKTp0aGlzO3RoaXMuJGNhbGxlcj10aGlzLmNhbGxlcj1udWxsOwpyZXR1cm4gaTt9LmV4dGVuZCh0aGlzKS5pbXBsZW1lbnQoaCk7Zy4kY29uc3RydWN0b3I9YTtnLnByb3RvdHlwZS4kY29uc3RydWN0b3I9ZztnLnByb3RvdHlwZS5wYXJlbnQ9YztyZXR1cm4gZzt9KTt2YXIgYz1mdW5jdGlvbigpe2lmKCF0aGlzLiRjYWxsZXIpe3Rocm93IG5ldyBFcnJvcignVGhlIG1ldGhvZCAicGFyZW50IiBjYW5ub3QgYmUgY2FsbGVkLicpOwp9dmFyIGc9dGhpcy4kY2FsbGVyLiRuYW1lLGg9dGhpcy4kY2FsbGVyLiRvd25lci5wYXJlbnQsaT0oaCk/aC5wcm90b3R5cGVbZ106bnVsbDtpZighaSl7dGhyb3cgbmV3IEVycm9yKCdUaGUgbWV0aG9kICInK2crJyIgaGFzIG5vIHBhcmVudC4nKTt9cmV0dXJuIGkuYXBwbHkodGhpcyxhcmd1bWVudHMpOwp9O3ZhciBlPWZ1bmN0aW9uKGcpe2Zvcih2YXIgaCBpbiBnKXt2YXIgaj1nW2hdO3N3aXRjaCh0eXBlT2Yoaikpe2Nhc2Uib2JqZWN0Ijp2YXIgaT1mdW5jdGlvbigpe307aS5wcm90b3R5cGU9ajtnW2hdPWUobmV3IGkpO2JyZWFrO2Nhc2UiYXJyYXkiOmdbaF09ai5jbG9uZSgpOwpicmVhazt9fXJldHVybiBnO307dmFyIGI9ZnVuY3Rpb24oZyxoLGope2lmKGouJG9yaWdpbil7aj1qLiRvcmlnaW47fXZhciBpPWZ1bmN0aW9uKCl7aWYoai4kcHJvdGVjdGVkJiZ0aGlzLiRjYWxsZXI9PW51bGwpe3Rocm93IG5ldyBFcnJvcignVGhlIG1ldGhvZCAiJytoKyciIGNhbm5vdCBiZSBjYWxsZWQuJyk7Cn12YXIgbD10aGlzLmNhbGxlcixtPXRoaXMuJGNhbGxlcjt0aGlzLmNhbGxlcj1tO3RoaXMuJGNhbGxlcj1pO3ZhciBrPWouYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMuJGNhbGxlcj1tO3RoaXMuY2FsbGVyPWw7cmV0dXJuIGs7fS5leHRlbmQoeyRvd25lcjpnLCRvcmlnaW46aiwkbmFtZTpofSk7CnJldHVybiBpO307dmFyIGY9ZnVuY3Rpb24oaCxpLGcpe2lmKGEuTXV0YXRvcnMuaGFzT3duUHJvcGVydHkoaCkpe2k9YS5NdXRhdG9yc1toXS5jYWxsKHRoaXMsaSk7aWYoaT09bnVsbCl7cmV0dXJuIHRoaXM7fX1pZih0eXBlT2YoaSk9PSJmdW5jdGlvbiIpe2lmKGkuJGhpZGRlbil7cmV0dXJuIHRoaXM7Cn10aGlzLnByb3RvdHlwZVtoXT0oZyk/aTpiKHRoaXMsaCxpKTt9ZWxzZXtPYmplY3QubWVyZ2UodGhpcy5wcm90b3R5cGUsaCxpKTt9cmV0dXJuIHRoaXM7fTt2YXIgZD1mdW5jdGlvbihnKXtnLiRwcm90b3R5cGluZz10cnVlO3ZhciBoPW5ldyBnO2RlbGV0ZSBnLiRwcm90b3R5cGluZzsKcmV0dXJuIGg7fTthLmltcGxlbWVudCgiaW1wbGVtZW50IixmLm92ZXJsb2FkU2V0dGVyKCkpO2EuTXV0YXRvcnM9e0V4dGVuZHM6ZnVuY3Rpb24oZyl7dGhpcy5wYXJlbnQ9Zzt0aGlzLnByb3RvdHlwZT1kKGcpO30sSW1wbGVtZW50czpmdW5jdGlvbihnKXtBcnJheS5mcm9tKGcpLmVhY2goZnVuY3Rpb24oail7dmFyIGg9bmV3IGo7CmZvcih2YXIgaSBpbiBoKXtmLmNhbGwodGhpcyxpLGhbaV0sdHJ1ZSk7fX0sdGhpcyk7fX07fSkuY2FsbCh0aGlzKTsoZnVuY3Rpb24oKXt0aGlzLkNoYWluPW5ldyBDbGFzcyh7JGNoYWluOltdLGNoYWluOmZ1bmN0aW9uKCl7dGhpcy4kY2hhaW4uYXBwZW5kKEFycmF5LmZsYXR0ZW4oYXJndW1lbnRzKSk7CnJldHVybiB0aGlzO30sY2FsbENoYWluOmZ1bmN0aW9uKCl7cmV0dXJuKHRoaXMuJGNoYWluLmxlbmd0aCk/dGhpcy4kY2hhaW4uc2hpZnQoKS5hcHBseSh0aGlzLGFyZ3VtZW50cyk6ZmFsc2U7fSxjbGVhckNoYWluOmZ1bmN0aW9uKCl7dGhpcy4kY2hhaW4uZW1wdHkoKTsKcmV0dXJuIHRoaXM7fX0pO3ZhciBhPWZ1bmN0aW9uKGIpe3JldHVybiBiLnJlcGxhY2UoL15vbihbQS1aXSkvLGZ1bmN0aW9uKGMsZCl7cmV0dXJuIGQudG9Mb3dlckNhc2UoKTt9KTt9O3RoaXMuRXZlbnRzPW5ldyBDbGFzcyh7JGV2ZW50czp7fSxhZGRFdmVudDpmdW5jdGlvbihkLGMsYil7ZD1hKGQpOwppZihjPT0kZW1wdHkpe3JldHVybiB0aGlzO310aGlzLiRldmVudHNbZF09KHRoaXMuJGV2ZW50c1tkXXx8W10pLmluY2x1ZGUoYyk7aWYoYil7Yy5pbnRlcm5hbD10cnVlO31yZXR1cm4gdGhpczt9LGFkZEV2ZW50czpmdW5jdGlvbihiKXtmb3IodmFyIGMgaW4gYil7dGhpcy5hZGRFdmVudChjLGJbY10pOwp9cmV0dXJuIHRoaXM7fSxmaXJlRXZlbnQ6ZnVuY3Rpb24oZSxjLGIpe2U9YShlKTt2YXIgZD10aGlzLiRldmVudHNbZV07aWYoIWQpe3JldHVybiB0aGlzO31jPUFycmF5LmZyb20oYyk7ZC5lYWNoKGZ1bmN0aW9uKGYpe2lmKGIpe2YuZGVsYXkoYix0aGlzLGMpO31lbHNle2YuYXBwbHkodGhpcyxjKTsKfX0sdGhpcyk7cmV0dXJuIHRoaXM7fSxyZW1vdmVFdmVudDpmdW5jdGlvbihlLGQpe2U9YShlKTt2YXIgYz10aGlzLiRldmVudHNbZV07aWYoYyYmIWQuaW50ZXJuYWwpe3ZhciBiPWMuaW5kZXhPZihkKTtpZihiIT0tMSl7ZGVsZXRlIGNbYl07fX1yZXR1cm4gdGhpczsKfSxyZW1vdmVFdmVudHM6ZnVuY3Rpb24oZCl7dmFyIGU7aWYodHlwZU9mKGQpPT0ib2JqZWN0Iil7Zm9yKGUgaW4gZCl7dGhpcy5yZW1vdmVFdmVudChlLGRbZV0pO31yZXR1cm4gdGhpczt9aWYoZCl7ZD1hKGQpO31mb3IoZSBpbiB0aGlzLiRldmVudHMpe2lmKGQmJmQhPWUpe2NvbnRpbnVlOwp9dmFyIGM9dGhpcy4kZXZlbnRzW2VdO2Zvcih2YXIgYj1jLmxlbmd0aDtiLS07KXtpZihiIGluIGMpe3RoaXMucmVtb3ZlRXZlbnQoZSxjW2JdKTt9fX1yZXR1cm4gdGhpczt9fSk7dGhpcy5PcHRpb25zPW5ldyBDbGFzcyh7c2V0T3B0aW9uczpmdW5jdGlvbigpe3ZhciBiPXRoaXMub3B0aW9ucz1PYmplY3QubWVyZ2UuYXBwbHkobnVsbCxbe30sdGhpcy5vcHRpb25zXS5hcHBlbmQoYXJndW1lbnRzKSk7CmlmKHRoaXMuYWRkRXZlbnQpe2Zvcih2YXIgYyBpbiBiKXtpZih0eXBlT2YoYltjXSkhPSJmdW5jdGlvbiJ8fCEoL15vbltBLVpdLykudGVzdChjKSl7Y29udGludWU7fXRoaXMuYWRkRXZlbnQoYyxiW2NdKTtkZWxldGUgYltjXTt9fXJldHVybiB0aGlzO319KTt9KS5jYWxsKHRoaXMpOwooZnVuY3Rpb24oKXt2YXIgayxuLGwsZyxhPXt9LGM9e30sbT0vXFwvZzt2YXIgZT1mdW5jdGlvbihxLHApe2lmKHE9PW51bGwpe3JldHVybiBudWxsO31pZihxLlNsaWNrPT09dHJ1ZSl7cmV0dXJuIHE7fXE9KCIiK3EpLnJlcGxhY2UoL15ccyt8XHMrJC9nLCIiKTtnPSEhcDsKdmFyIG89KGcpP2M6YTtpZihvW3FdKXtyZXR1cm4gb1txXTt9az17U2xpY2s6dHJ1ZSxleHByZXNzaW9uczpbXSxyYXc6cSxyZXZlcnNlOmZ1bmN0aW9uKCl7cmV0dXJuIGUodGhpcy5yYXcsdHJ1ZSk7fX07bj0tMTt3aGlsZShxIT0ocT1xLnJlcGxhY2UoaixiKSkpe31rLmxlbmd0aD1rLmV4cHJlc3Npb25zLmxlbmd0aDsKcmV0dXJuIG9bay5yYXddPShnKT9oKGspOms7fTt2YXIgaT1mdW5jdGlvbihvKXtpZihvPT09IiEiKXtyZXR1cm4iICI7fWVsc2V7aWYobz09PSIgIil7cmV0dXJuIiEiO31lbHNle2lmKCgvXiEvKS50ZXN0KG8pKXtyZXR1cm4gby5yZXBsYWNlKC9eIS8sIiIpO31lbHNle3JldHVybiIhIitvOwp9fX19O3ZhciBoPWZ1bmN0aW9uKHUpe3ZhciByPXUuZXhwcmVzc2lvbnM7Zm9yKHZhciBwPTA7cDxyLmxlbmd0aDtwKyspe3ZhciB0PXJbcF07dmFyIHE9e3BhcnRzOltdLHRhZzoiKiIsY29tYmluYXRvcjppKHRbMF0uY29tYmluYXRvcil9O2Zvcih2YXIgbz0wO288dC5sZW5ndGg7Cm8rKyl7dmFyIHM9dFtvXTtpZighcy5yZXZlcnNlQ29tYmluYXRvcil7cy5yZXZlcnNlQ29tYmluYXRvcj0iICI7fXMuY29tYmluYXRvcj1zLnJldmVyc2VDb21iaW5hdG9yO2RlbGV0ZSBzLnJldmVyc2VDb21iaW5hdG9yO310LnJldmVyc2UoKS5wdXNoKHEpO31yZXR1cm4gdTsKfTt2YXIgZj1mdW5jdGlvbihvKXtyZXR1cm4gby5yZXBsYWNlKC9bLVtcXXt9KCkqKz8uXFxeJHwsI1xzXS9nLGZ1bmN0aW9uKHApe3JldHVybiJcXCIrcDt9KTt9O3ZhciBqPW5ldyBSZWdFeHAoIl4oPzpcXHMqKCwpXFxzKnxcXHMqKDxjb21iaW5hdG9yPispXFxzKnwoXFxzKyl8KDx1bmljb2RlPit8XFwqKXxcXCMoPHVuaWNvZGU+Kyl8XFwuKDx1bmljb2RlPispfFxcW1xccyooPHVuaWNvZGUxPispKD86XFxzKihbKl4kIX58XT89KSg/OlxccyooPzooW1wiJ10/KSguKj8pXFw5KSkpP1xccypcXF0oPyFcXF0pfCg6KykoPHVuaWNvZGU+KykoPzpcXCgoPzooPzooW1wiJ10pKFteXFwxM10qKVxcMTMpfCgoPzpcXChbXildK1xcKXxbXigpXSopKykpXFwpKT8pIi5yZXBsYWNlKC88Y29tYmluYXRvcj4vLCJbIitmKCI+K35gIUAkJV4mPXt9XFw7PC8iKSsiXSIpLnJlcGxhY2UoLzx1bmljb2RlPi9nLCIoPzpbXFx3XFx1MDBhMS1cXHVGRkZGLV18XFxcXFteXFxzMC05YS1mXSkiKS5yZXBsYWNlKC88dW5pY29kZTE+L2csIig/Ols6XFx3XFx1MDBhMS1cXHVGRkZGLV18XFxcXFteXFxzMC05YS1mXSkiKSk7CmZ1bmN0aW9uIGIoeCxzLEQseixyLEMscSxCLEEseSx1LEYsRyx2LHAsdyl7aWYoc3x8bj09PS0xKXtrLmV4cHJlc3Npb25zWysrbl09W107bD0tMTtpZihzKXtyZXR1cm4iIjt9fWlmKER8fHp8fGw9PT0tMSl7RD1EfHwiICI7dmFyIHQ9ay5leHByZXNzaW9uc1tuXTsKaWYoZyYmdFtsXSl7dFtsXS5yZXZlcnNlQ29tYmluYXRvcj1pKEQpO310WysrbF09e2NvbWJpbmF0b3I6RCx0YWc6IioifTt9dmFyIG89ay5leHByZXNzaW9uc1tuXVtsXTtpZihyKXtvLnRhZz1yLnJlcGxhY2UobSwiIik7fWVsc2V7aWYoQyl7by5pZD1DLnJlcGxhY2UobSwiIik7Cn1lbHNle2lmKHEpe3E9cS5yZXBsYWNlKG0sIiIpO2lmKCFvLmNsYXNzTGlzdCl7by5jbGFzc0xpc3Q9W107fWlmKCFvLmNsYXNzZXMpe28uY2xhc3Nlcz1bXTt9by5jbGFzc0xpc3QucHVzaChxKTtvLmNsYXNzZXMucHVzaCh7dmFsdWU6cSxyZWdleHA6bmV3IFJlZ0V4cCgiKF58XFxzKSIrZihxKSsiKFxcc3wkKSIpfSk7Cn1lbHNle2lmKEcpe3c9d3x8cDt3PXc/dy5yZXBsYWNlKG0sIiIpOm51bGw7aWYoIW8ucHNldWRvcyl7by5wc2V1ZG9zPVtdO31vLnBzZXVkb3MucHVzaCh7a2V5OkcucmVwbGFjZShtLCIiKSx2YWx1ZTp3LHR5cGU6Ri5sZW5ndGg9PTE/ImNsYXNzIjoiZWxlbWVudCJ9KTsKfWVsc2V7aWYoQil7Qj1CLnJlcGxhY2UobSwiIik7dT0odXx8IiIpLnJlcGxhY2UobSwiIik7dmFyIEUsSDtzd2l0Y2goQSl7Y2FzZSJePSI6SD1uZXcgUmVnRXhwKCJeIitmKHUpKTticmVhaztjYXNlIiQ9IjpIPW5ldyBSZWdFeHAoZih1KSsiJCIpO2JyZWFrO2Nhc2Uifj0iOkg9bmV3IFJlZ0V4cCgiKF58XFxzKSIrZih1KSsiKFxcc3wkKSIpOwpicmVhaztjYXNlInw9IjpIPW5ldyBSZWdFeHAoIl4iK2YodSkrIigtfCQpIik7YnJlYWs7Y2FzZSI9IjpFPWZ1bmN0aW9uKEkpe3JldHVybiB1PT1JO307YnJlYWs7Y2FzZSIqPSI6RT1mdW5jdGlvbihJKXtyZXR1cm4gSSYmSS5pbmRleE9mKHUpPi0xO307YnJlYWs7CmNhc2UiIT0iOkU9ZnVuY3Rpb24oSSl7cmV0dXJuIHUhPUk7fTticmVhaztkZWZhdWx0OkU9ZnVuY3Rpb24oSSl7cmV0dXJuICEhSTt9O31pZih1PT0iIiYmKC9eWyokXl09JC8pLnRlc3QoQSkpe0U9ZnVuY3Rpb24oKXtyZXR1cm4gZmFsc2U7fTt9aWYoIUUpe0U9ZnVuY3Rpb24oSSl7cmV0dXJuIEkmJkgudGVzdChJKTsKfTt9aWYoIW8uYXR0cmlidXRlcyl7by5hdHRyaWJ1dGVzPVtdO31vLmF0dHJpYnV0ZXMucHVzaCh7a2V5OkIsb3BlcmF0b3I6QSx2YWx1ZTp1LHRlc3Q6RX0pO319fX19cmV0dXJuIiI7fXZhciBkPSh0aGlzLlNsaWNrfHx7fSk7ZC5wYXJzZT1mdW5jdGlvbihvKXtyZXR1cm4gZShvKTsKfTtkLmVzY2FwZVJlZ0V4cD1mO2lmKCF0aGlzLlNsaWNrKXt0aGlzLlNsaWNrPWQ7fX0pLmFwcGx5KCh0eXBlb2YgZXhwb3J0cyE9InVuZGVmaW5lZCIpP2V4cG9ydHM6dGhpcyk7KGZ1bmN0aW9uKCl7dmFyIGo9e30sbD17fSxiPU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7CmouaXNOYXRpdmVDb2RlPWZ1bmN0aW9uKGMpe3JldHVybigvXHtccypcW25hdGl2ZSBjb2RlXF1ccypcfS8pLnRlc3QoIiIrYyk7fTtqLmlzWE1MPWZ1bmN0aW9uKGMpe3JldHVybighIWMueG1sVmVyc2lvbil8fCghIWMueG1sKXx8KGIuY2FsbChjKT09IltvYmplY3QgWE1MRG9jdW1lbnRdIil8fChjLm5vZGVUeXBlPT05JiZjLmRvY3VtZW50RWxlbWVudC5ub2RlTmFtZSE9IkhUTUwiKTsKfTtqLnNldERvY3VtZW50PWZ1bmN0aW9uKHcpe3ZhciB0PXcubm9kZVR5cGU7aWYodD09OSl7fWVsc2V7aWYodCl7dz13Lm93bmVyRG9jdW1lbnQ7fWVsc2V7aWYody5uYXZpZ2F0b3Ipe3c9dy5kb2N1bWVudDt9ZWxzZXtyZXR1cm47fX19aWYodGhpcy5kb2N1bWVudD09PXcpe3JldHVybjsKfXRoaXMuZG9jdW1lbnQ9dzt2YXIgeT13LmRvY3VtZW50RWxlbWVudCx1PXRoaXMuZ2V0VUlEWE1MKHkpLG89bFt1XSxBO2lmKG8pe2ZvcihBIGluIG8pe3RoaXNbQV09b1tBXTt9cmV0dXJuO31vPWxbdV09e307by5yb290PXk7by5pc1hNTERvY3VtZW50PXRoaXMuaXNYTUwodyk7Cm8uYnJva2VuU3RhckdFQlROPW8uc3RhclNlbGVjdHNDbG9zZWRRU0E9by5pZEdldHNOYW1lPW8uYnJva2VuTWl4ZWRDYXNlUVNBPW8uYnJva2VuR0VCQ049by5icm9rZW5DaGVja2VkUVNBPW8uYnJva2VuRW1wdHlBdHRyaWJ1dGVRU0E9by5pc0hUTUxEb2N1bWVudD1vLm5hdGl2ZU1hdGNoZXNTZWxlY3Rvcj1mYWxzZTsKdmFyIG0sbix4LHEscjt2YXIgcyxjPSJzbGlja191bmlxdWVpZCI7dmFyIHo9dy5jcmVhdGVFbGVtZW50KCJkaXYiKTt2YXIgcD13LmJvZHl8fHcuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImJvZHkiKVswXXx8eTtwLmFwcGVuZENoaWxkKHopO3RyeXt6LmlubmVySFRNTD0nPGEgaWQ9IicrYysnIj48L2E+JzsKby5pc0hUTUxEb2N1bWVudD0hIXcuZ2V0RWxlbWVudEJ5SWQoYyk7fWNhdGNoKHYpe31pZihvLmlzSFRNTERvY3VtZW50KXt6LnN0eWxlLmRpc3BsYXk9Im5vbmUiO3ouYXBwZW5kQ2hpbGQody5jcmVhdGVDb21tZW50KCIiKSk7bj0oei5nZXRFbGVtZW50c0J5VGFnTmFtZSgiKiIpLmxlbmd0aD4xKTsKdHJ5e3ouaW5uZXJIVE1MPSJmb288L2Zvbz4iO3M9ei5nZXRFbGVtZW50c0J5VGFnTmFtZSgiKiIpO209KHMmJiEhcy5sZW5ndGgmJnNbMF0ubm9kZU5hbWUuY2hhckF0KDApPT0iLyIpO31jYXRjaCh2KXt9by5icm9rZW5TdGFyR0VCVE49bnx8bTt0cnl7ei5pbm5lckhUTUw9JzxhIG5hbWU9IicrYysnIj48L2E+PGIgaWQ9IicrYysnIj48L2I+JzsKby5pZEdldHNOYW1lPXcuZ2V0RWxlbWVudEJ5SWQoYyk9PT16LmZpcnN0Q2hpbGQ7fWNhdGNoKHYpe31pZih6LmdldEVsZW1lbnRzQnlDbGFzc05hbWUpe3RyeXt6LmlubmVySFRNTD0nPGEgY2xhc3M9ImYiPjwvYT48YSBjbGFzcz0iYiI+PC9hPic7ei5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJiIikubGVuZ3RoOwp6LmZpcnN0Q2hpbGQuY2xhc3NOYW1lPSJiIjtxPSh6LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoImIiKS5sZW5ndGghPTIpO31jYXRjaCh2KXt9dHJ5e3ouaW5uZXJIVE1MPSc8YSBjbGFzcz0iYSI+PC9hPjxhIGNsYXNzPSJmIGIgYSI+PC9hPic7eD0oei5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJhIikubGVuZ3RoIT0yKTsKfWNhdGNoKHYpe31vLmJyb2tlbkdFQkNOPXF8fHg7fWlmKHoucXVlcnlTZWxlY3RvckFsbCl7dHJ5e3ouaW5uZXJIVE1MPSJmb288L2Zvbz4iO3M9ei5xdWVyeVNlbGVjdG9yQWxsKCIqIik7by5zdGFyU2VsZWN0c0Nsb3NlZFFTQT0ocyYmISFzLmxlbmd0aCYmc1swXS5ub2RlTmFtZS5jaGFyQXQoMCk9PSIvIik7Cn1jYXRjaCh2KXt9dHJ5e3ouaW5uZXJIVE1MPSc8YSBjbGFzcz0iTWlYIj48L2E+JztvLmJyb2tlbk1peGVkQ2FzZVFTQT0hei5xdWVyeVNlbGVjdG9yQWxsKCIuTWlYIikubGVuZ3RoO31jYXRjaCh2KXt9dHJ5e3ouaW5uZXJIVE1MPSc8c2VsZWN0PjxvcHRpb24gc2VsZWN0ZWQ9InNlbGVjdGVkIj5hPC9vcHRpb24+PC9zZWxlY3Q+JzsKby5icm9rZW5DaGVja2VkUVNBPSh6LnF1ZXJ5U2VsZWN0b3JBbGwoIjpjaGVja2VkIikubGVuZ3RoPT0wKTt9Y2F0Y2godil7fXRyeXt6LmlubmVySFRNTD0nPGEgY2xhc3M9IiI+PC9hPic7by5icm9rZW5FbXB0eUF0dHJpYnV0ZVFTQT0oei5xdWVyeVNlbGVjdG9yQWxsKCdbY2xhc3MqPSIiXScpLmxlbmd0aCE9MCk7Cn1jYXRjaCh2KXt9fXRyeXt6LmlubmVySFRNTD0nPGZvcm0gYWN0aW9uPSJzIj48aW5wdXQgaWQ9ImFjdGlvbiIvPjwvZm9ybT4nO3I9KHouZmlyc3RDaGlsZC5nZXRBdHRyaWJ1dGUoImFjdGlvbiIpIT0icyIpO31jYXRjaCh2KXt9by5uYXRpdmVNYXRjaGVzU2VsZWN0b3I9eS5tYXRjaGVzU2VsZWN0b3J8fHkubW96TWF0Y2hlc1NlbGVjdG9yfHx5LndlYmtpdE1hdGNoZXNTZWxlY3RvcjsKaWYoby5uYXRpdmVNYXRjaGVzU2VsZWN0b3Ipe3RyeXtvLm5hdGl2ZU1hdGNoZXNTZWxlY3Rvci5jYWxsKHksIjpzbGljayIpO28ubmF0aXZlTWF0Y2hlc1NlbGVjdG9yPW51bGw7fWNhdGNoKHYpe319fXRyeXt5LnNsaWNrX2V4cGFuZG89MTtkZWxldGUgeS5zbGlja19leHBhbmRvOwpvLmdldFVJRD10aGlzLmdldFVJREhUTUw7fWNhdGNoKHYpe28uZ2V0VUlEPXRoaXMuZ2V0VUlEWE1MO31wLnJlbW92ZUNoaWxkKHopO3o9cz1wPW51bGw7by5nZXRBdHRyaWJ1dGU9KG8uaXNIVE1MRG9jdW1lbnQmJnIpP2Z1bmN0aW9uKEQsQil7dmFyIEU9dGhpcy5hdHRyaWJ1dGVHZXR0ZXJzW0JdOwppZihFKXtyZXR1cm4gRS5jYWxsKEQpO312YXIgQz1ELmdldEF0dHJpYnV0ZU5vZGUoQik7cmV0dXJuKEMpP0Mubm9kZVZhbHVlOm51bGw7fTpmdW5jdGlvbihDLEIpe3ZhciBEPXRoaXMuYXR0cmlidXRlR2V0dGVyc1tCXTtyZXR1cm4oRCk/RC5jYWxsKEMpOkMuZ2V0QXR0cmlidXRlKEIpOwp9O28uaGFzQXR0cmlidXRlPSh5JiZ0aGlzLmlzTmF0aXZlQ29kZSh5Lmhhc0F0dHJpYnV0ZSkpP2Z1bmN0aW9uKEMsQil7cmV0dXJuIEMuaGFzQXR0cmlidXRlKEIpO306ZnVuY3Rpb24oQyxCKXtDPUMuZ2V0QXR0cmlidXRlTm9kZShCKTtyZXR1cm4gISEoQyYmKEMuc3BlY2lmaWVkfHxDLm5vZGVWYWx1ZSkpOwp9O28uY29udGFpbnM9KHkmJnRoaXMuaXNOYXRpdmVDb2RlKHkuY29udGFpbnMpKT9mdW5jdGlvbihCLEMpe3JldHVybiBCLmNvbnRhaW5zKEMpO306KHkmJnkuY29tcGFyZURvY3VtZW50UG9zaXRpb24pP2Z1bmN0aW9uKEIsQyl7cmV0dXJuIEI9PT1DfHwhIShCLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKEMpJjE2KTsKfTpmdW5jdGlvbihCLEMpe2lmKEMpe2Rve2lmKEM9PT1CKXtyZXR1cm4gdHJ1ZTt9fXdoaWxlKChDPUMucGFyZW50Tm9kZSkpO31yZXR1cm4gZmFsc2U7fTtvLmRvY3VtZW50U29ydGVyPSh5LmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKT9mdW5jdGlvbihDLEIpe2lmKCFDLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9ufHwhQi5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbil7cmV0dXJuIDA7Cn1yZXR1cm4gQy5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihCKSY0Py0xOkM9PT1CPzA6MTt9Oigic291cmNlSW5kZXgiIGluIHkpP2Z1bmN0aW9uKEMsQil7aWYoIUMuc291cmNlSW5kZXh8fCFCLnNvdXJjZUluZGV4KXtyZXR1cm4gMDt9cmV0dXJuIEMuc291cmNlSW5kZXgtQi5zb3VyY2VJbmRleDsKfToody5jcmVhdGVSYW5nZSk/ZnVuY3Rpb24oRSxDKXtpZighRS5vd25lckRvY3VtZW50fHwhQy5vd25lckRvY3VtZW50KXtyZXR1cm4gMDt9dmFyIEQ9RS5vd25lckRvY3VtZW50LmNyZWF0ZVJhbmdlKCksQj1DLm93bmVyRG9jdW1lbnQuY3JlYXRlUmFuZ2UoKTtELnNldFN0YXJ0KEUsMCk7CkQuc2V0RW5kKEUsMCk7Qi5zZXRTdGFydChDLDApO0Iuc2V0RW5kKEMsMCk7cmV0dXJuIEQuY29tcGFyZUJvdW5kYXJ5UG9pbnRzKFJhbmdlLlNUQVJUX1RPX0VORCxCKTt9Om51bGw7eT1udWxsO2ZvcihBIGluIG8pe3RoaXNbQV09b1tBXTt9fTt2YXIgZT0vXihbIy5dPykoKD86W1x3LV0rfFwqKSkkLyxnPS9cWy4rWyokXl09KD86IiJ8JycpP1xdLyxmPXt9OwpqLnNlYXJjaD1mdW5jdGlvbihxLEQsTyx2KXt2YXIgQj10aGlzLmZvdW5kPSh2KT9udWxsOihPfHxbXSk7aWYoIXEpe3JldHVybiBCO31lbHNle2lmKHEubmF2aWdhdG9yKXtxPXEuZG9jdW1lbnQ7fWVsc2V7aWYoIXEubm9kZVR5cGUpe3JldHVybiBCO319fXZhciB6LE4scz10aGlzLnVuaXF1ZXM9e30seT0hIShPJiZPLmxlbmd0aCksYz0ocS5ub2RlVHlwZT09OSk7CmlmKHRoaXMuZG9jdW1lbnQhPT0oYz9xOnEub3duZXJEb2N1bWVudCkpe3RoaXMuc2V0RG9jdW1lbnQocSk7fWlmKHkpe2ZvcihOPUIubGVuZ3RoO04tLTspe3NbdGhpcy5nZXRVSUQoQltOXSldPXRydWU7fX1pZih0eXBlb2YgRD09InN0cmluZyIpe3ZhciBDPUQubWF0Y2goZSk7CnNpbXBsZVNlbGVjdG9yczppZihDKXt2YXIgSz1DWzFdLFY9Q1syXSxJLEc7aWYoIUspe2lmKFY9PSIqIiYmdGhpcy5icm9rZW5TdGFyR0VCVE4pe2JyZWFrIHNpbXBsZVNlbGVjdG9yczt9Rz1xLmdldEVsZW1lbnRzQnlUYWdOYW1lKFYpO2lmKHYpe3JldHVybiBHWzBdfHxudWxsOwp9Zm9yKE49MDtJPUdbTisrXTspe2lmKCEoeSYmc1t0aGlzLmdldFVJRChJKV0pKXtCLnB1c2goSSk7fX19ZWxzZXtpZihLPT0iIyIpe2lmKCF0aGlzLmlzSFRNTERvY3VtZW50fHwhYyl7YnJlYWsgc2ltcGxlU2VsZWN0b3JzO31JPXEuZ2V0RWxlbWVudEJ5SWQoVik7CmlmKCFJKXtyZXR1cm4gQjt9aWYodGhpcy5pZEdldHNOYW1lJiZJLmdldEF0dHJpYnV0ZU5vZGUoImlkIikubm9kZVZhbHVlIT1WKXticmVhayBzaW1wbGVTZWxlY3RvcnM7fWlmKHYpe3JldHVybiBJfHxudWxsO31pZighKHkmJnNbdGhpcy5nZXRVSUQoSSldKSl7Qi5wdXNoKEkpOwp9fWVsc2V7aWYoSz09Ii4iKXtpZighdGhpcy5pc0hUTUxEb2N1bWVudHx8KCghcS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lfHx0aGlzLmJyb2tlbkdFQkNOKSYmcS5xdWVyeVNlbGVjdG9yQWxsKSl7YnJlYWsgc2ltcGxlU2VsZWN0b3JzO31pZihxLmdldEVsZW1lbnRzQnlDbGFzc05hbWUmJiF0aGlzLmJyb2tlbkdFQkNOKXtHPXEuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShWKTsKaWYodil7cmV0dXJuIEdbMF18fG51bGw7fWZvcihOPTA7ST1HW04rK107KXtpZighKHkmJnNbdGhpcy5nZXRVSUQoSSldKSl7Qi5wdXNoKEkpO319fWVsc2V7dmFyIHU9bmV3IFJlZ0V4cCgiKF58XFxzKSIrZC5lc2NhcGVSZWdFeHAoVikrIihcXHN8JCkiKTtHPXEuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIioiKTsKZm9yKE49MDtJPUdbTisrXTspe2NsYXNzTmFtZT1JLmNsYXNzTmFtZTtpZighKGNsYXNzTmFtZSYmdS50ZXN0KGNsYXNzTmFtZSkpKXtjb250aW51ZTt9aWYodil7cmV0dXJuIEk7fWlmKCEoeSYmc1t0aGlzLmdldFVJRChJKV0pKXtCLnB1c2goSSk7fX19fX19aWYoeSl7dGhpcy5zb3J0KEIpOwp9cmV0dXJuKHYpP251bGw6Qjt9cXVlcnlTZWxlY3RvcjppZihxLnF1ZXJ5U2VsZWN0b3JBbGwpe2lmKCF0aGlzLmlzSFRNTERvY3VtZW50fHx0aGlzLmJyb2tlbk1peGVkQ2FzZVFTQXx8ZltEXXx8KHRoaXMuYnJva2VuQ2hlY2tlZFFTQSYmRC5pbmRleE9mKCI6Y2hlY2tlZCIpPi0xKXx8KHRoaXMuYnJva2VuRW1wdHlBdHRyaWJ1dGVRU0EmJmcudGVzdChEKSl8fGQuZGlzYWJsZVFTQSl7YnJlYWsgcXVlcnlTZWxlY3RvcjsKfXZhciBBPUQ7aWYoIWMpe3ZhciBNPXEuZ2V0QXR0cmlidXRlKCJpZCIpLHA9InNsaWNraWRfXyI7cS5zZXRBdHRyaWJ1dGUoImlkIixwKTtBPSIjIitwKyIgIitBO310cnl7aWYodil7cmV0dXJuIHEucXVlcnlTZWxlY3RvcihBKXx8bnVsbDt9ZWxzZXtHPXEucXVlcnlTZWxlY3RvckFsbChBKTsKfX1jYXRjaChQKXtmW0RdPTE7YnJlYWsgcXVlcnlTZWxlY3Rvcjt9ZmluYWxseXtpZighYyl7aWYoTSl7cS5zZXRBdHRyaWJ1dGUoImlkIixNKTt9ZWxzZXtxLnJlbW92ZUF0dHJpYnV0ZSgiaWQiKTt9fX1pZih0aGlzLnN0YXJTZWxlY3RzQ2xvc2VkUVNBKXtmb3IoTj0wOwpJPUdbTisrXTspe2lmKEkubm9kZU5hbWU+IkAiJiYhKHkmJnNbdGhpcy5nZXRVSUQoSSldKSl7Qi5wdXNoKEkpO319fWVsc2V7Zm9yKE49MDtJPUdbTisrXTspe2lmKCEoeSYmc1t0aGlzLmdldFVJRChJKV0pKXtCLnB1c2goSSk7fX19aWYoeSl7dGhpcy5zb3J0KEIpOwp9cmV0dXJuIEI7fXo9dGhpcy5TbGljay5wYXJzZShEKTtpZighei5sZW5ndGgpe3JldHVybiBCO319ZWxzZXtpZihEPT1udWxsKXtyZXR1cm4gQjt9ZWxzZXtpZihELlNsaWNrKXt6PUQ7fWVsc2V7aWYodGhpcy5jb250YWlucyhxLmRvY3VtZW50RWxlbWVudHx8cSxEKSl7KEIpP0IucHVzaChEKTpCPUQ7CnJldHVybiBCO31lbHNle3JldHVybiBCO319fX10aGlzLnBvc05USD17fTt0aGlzLnBvc05USExhc3Q9e307dGhpcy5wb3NOVEhUeXBlPXt9O3RoaXMucG9zTlRIVHlwZUxhc3Q9e307dGhpcy5wdXNoPSgheSYmKHZ8fCh6Lmxlbmd0aD09MSYmei5leHByZXNzaW9uc1swXS5sZW5ndGg9PTEpKSk/dGhpcy5wdXNoQXJyYXk6dGhpcy5wdXNoVUlEOwppZihCPT1udWxsKXtCPVtdO312YXIgTCxILEY7dmFyIEosVSxFLFQsUSx4LHQ7dmFyIHcscixvLFIsUz16LmV4cHJlc3Npb25zO3NlYXJjaDpmb3IoTj0wOyhyPVNbTl0pO04rKyl7Zm9yKEw9MDsobz1yW0xdKTtMKyspe0o9ImNvbWJpbmF0b3I6IitvLmNvbWJpbmF0b3I7CmlmKCF0aGlzW0pdKXtjb250aW51ZSBzZWFyY2g7fVU9KHRoaXMuaXNYTUxEb2N1bWVudCk/by50YWc6by50YWcudG9VcHBlckNhc2UoKTtFPW8uaWQ7VD1vLmNsYXNzTGlzdDtRPW8uY2xhc3Nlczt4PW8uYXR0cmlidXRlczt0PW8ucHNldWRvcztSPShMPT09KHIubGVuZ3RoLTEpKTsKdGhpcy5iaXRVbmlxdWVzPXt9O2lmKFIpe3RoaXMudW5pcXVlcz1zO3RoaXMuZm91bmQ9Qjt9ZWxzZXt0aGlzLnVuaXF1ZXM9e307dGhpcy5mb3VuZD1bXTt9aWYoTD09PTApe3RoaXNbSl0ocSxVLEUsUSx4LHQsVCk7aWYodiYmUiYmQi5sZW5ndGgpe2JyZWFrIHNlYXJjaDsKfX1lbHNle2lmKHYmJlIpe2ZvcihIPTAsRj13Lmxlbmd0aDtIPEY7SCsrKXt0aGlzW0pdKHdbSF0sVSxFLFEseCx0LFQpO2lmKEIubGVuZ3RoKXticmVhayBzZWFyY2g7fX19ZWxzZXtmb3IoSD0wLEY9dy5sZW5ndGg7SDxGO0grKyl7dGhpc1tKXSh3W0hdLFUsRSxRLHgsdCxUKTsKfX19dz10aGlzLmZvdW5kO319aWYoeXx8KHouZXhwcmVzc2lvbnMubGVuZ3RoPjEpKXt0aGlzLnNvcnQoQik7fXJldHVybih2KT8oQlswXXx8bnVsbCk6Qjt9O2oudWlkeD0xO2oudWlkaz0ic2xpY2stdW5pcXVlaWQiO2ouZ2V0VUlEWE1MPWZ1bmN0aW9uKG0pe3ZhciBjPW0uZ2V0QXR0cmlidXRlKHRoaXMudWlkayk7CmlmKCFjKXtjPXRoaXMudWlkeCsrO20uc2V0QXR0cmlidXRlKHRoaXMudWlkayxjKTt9cmV0dXJuIGM7fTtqLmdldFVJREhUTUw9ZnVuY3Rpb24oYyl7cmV0dXJuIGMudW5pcXVlTnVtYmVyfHwoYy51bmlxdWVOdW1iZXI9dGhpcy51aWR4KyspO307ai5zb3J0PWZ1bmN0aW9uKGMpe2lmKCF0aGlzLmRvY3VtZW50U29ydGVyKXtyZXR1cm4gYzsKfWMuc29ydCh0aGlzLmRvY3VtZW50U29ydGVyKTtyZXR1cm4gYzt9O2ouY2FjaGVOVEg9e307ai5tYXRjaE5USD0vXihbKy1dP1xkKik/KFthLXpdKyk/KFsrLV1cZCspPyQvO2oucGFyc2VOVEhBcmd1bWVudD1mdW5jdGlvbihwKXt2YXIgbj1wLm1hdGNoKHRoaXMubWF0Y2hOVEgpOwppZighbil7cmV0dXJuIGZhbHNlO312YXIgbz1uWzJdfHxmYWxzZTt2YXIgbT1uWzFdfHwxO2lmKG09PSItIil7bT0tMTt9dmFyIGM9K25bM118fDA7bj0obz09Im4iKT97YTptLGI6Y306KG89PSJvZGQiKT97YToyLGI6MX06KG89PSJldmVuIik/e2E6MixiOjB9OnthOjAsYjptfTsKcmV0dXJuKHRoaXMuY2FjaGVOVEhbcF09bik7fTtqLmNyZWF0ZU5USFBzZXVkbz1mdW5jdGlvbihvLG0sYyxuKXtyZXR1cm4gZnVuY3Rpb24ocixwKXt2YXIgdD10aGlzLmdldFVJRChyKTtpZighdGhpc1tjXVt0XSl7dmFyIHo9ci5wYXJlbnROb2RlO2lmKCF6KXtyZXR1cm4gZmFsc2U7Cn12YXIgcT16W29dLHM9MTtpZihuKXt2YXIgeT1yLm5vZGVOYW1lO2Rve2lmKHEubm9kZU5hbWUhPXkpe2NvbnRpbnVlO310aGlzW2NdW3RoaXMuZ2V0VUlEKHEpXT1zKys7fXdoaWxlKChxPXFbbV0pKTt9ZWxzZXtkb3tpZihxLm5vZGVUeXBlIT0xKXtjb250aW51ZTsKfXRoaXNbY11bdGhpcy5nZXRVSUQocSldPXMrKzt9d2hpbGUoKHE9cVttXSkpO319cD1wfHwibiI7dmFyIHU9dGhpcy5jYWNoZU5USFtwXXx8dGhpcy5wYXJzZU5USEFyZ3VtZW50KHApO2lmKCF1KXtyZXR1cm4gZmFsc2U7fXZhciB4PXUuYSx3PXUuYix2PXRoaXNbY11bdF07CmlmKHg9PTApe3JldHVybiB3PT12O31pZih4PjApe2lmKHY8dyl7cmV0dXJuIGZhbHNlO319ZWxzZXtpZih3PHYpe3JldHVybiBmYWxzZTt9fXJldHVybigodi13KSV4KT09MDt9O307ai5wdXNoQXJyYXk9ZnVuY3Rpb24obyxjLHEsbixtLHApe2lmKHRoaXMubWF0Y2hTZWxlY3RvcihvLGMscSxuLG0scCkpe3RoaXMuZm91bmQucHVzaChvKTsKfX07ai5wdXNoVUlEPWZ1bmN0aW9uKHAsYyxyLG8sbSxxKXt2YXIgbj10aGlzLmdldFVJRChwKTtpZighdGhpcy51bmlxdWVzW25dJiZ0aGlzLm1hdGNoU2VsZWN0b3IocCxjLHIsbyxtLHEpKXt0aGlzLnVuaXF1ZXNbbl09dHJ1ZTt0aGlzLmZvdW5kLnB1c2gocCk7fX07CmoubWF0Y2hOb2RlPWZ1bmN0aW9uKG0sbil7aWYodGhpcy5pc0hUTUxEb2N1bWVudCYmdGhpcy5uYXRpdmVNYXRjaGVzU2VsZWN0b3Ipe3RyeXtyZXR1cm4gdGhpcy5uYXRpdmVNYXRjaGVzU2VsZWN0b3IuY2FsbChtLG4ucmVwbGFjZSgvXFsoW149XSspPVxzKihbXiciXF1dKz8pXHMqXF0vZywnWyQxPSIkMiJdJykpOwp9Y2F0Y2godSl7fX12YXIgdD10aGlzLlNsaWNrLnBhcnNlKG4pO2lmKCF0KXtyZXR1cm4gdHJ1ZTt9dmFyIHI9dC5leHByZXNzaW9ucyxwLHM9MCxxO2ZvcihxPTA7KGN1cnJlbnRFeHByZXNzaW9uPXJbcV0pO3ErKyl7aWYoY3VycmVudEV4cHJlc3Npb24ubGVuZ3RoPT0xKXt2YXIgbz1jdXJyZW50RXhwcmVzc2lvblswXTsKaWYodGhpcy5tYXRjaFNlbGVjdG9yKG0sKHRoaXMuaXNYTUxEb2N1bWVudCk/by50YWc6by50YWcudG9VcHBlckNhc2UoKSxvLmlkLG8uY2xhc3NlcyxvLmF0dHJpYnV0ZXMsby5wc2V1ZG9zKSl7cmV0dXJuIHRydWU7fXMrKzt9fWlmKHM9PXQubGVuZ3RoKXtyZXR1cm4gZmFsc2U7Cn12YXIgYz10aGlzLnNlYXJjaCh0aGlzLmRvY3VtZW50LHQpLHY7Zm9yKHE9MDt2PWNbcSsrXTspe2lmKHY9PT1tKXtyZXR1cm4gdHJ1ZTt9fXJldHVybiBmYWxzZTt9O2oubWF0Y2hQc2V1ZG89ZnVuY3Rpb24ocCxjLG8pe3ZhciBtPSJwc2V1ZG86IitjO2lmKHRoaXNbbV0pe3JldHVybiB0aGlzW21dKHAsbyk7Cn12YXIgbj10aGlzLmdldEF0dHJpYnV0ZShwLGMpO3JldHVybihvKT9vPT1uOiEhbjt9O2oubWF0Y2hTZWxlY3Rvcj1mdW5jdGlvbihuLHUsYyxvLHAscil7aWYodSl7dmFyIHM9KHRoaXMuaXNYTUxEb2N1bWVudCk/bi5ub2RlTmFtZTpuLm5vZGVOYW1lLnRvVXBwZXJDYXNlKCk7CmlmKHU9PSIqIil7aWYoczwiQCIpe3JldHVybiBmYWxzZTt9fWVsc2V7aWYocyE9dSl7cmV0dXJuIGZhbHNlO319fWlmKGMmJm4uZ2V0QXR0cmlidXRlKCJpZCIpIT1jKXtyZXR1cm4gZmFsc2U7fXZhciBxLG0sdDtpZihvKXtmb3IocT1vLmxlbmd0aDtxLS07KXt0PW4uZ2V0QXR0cmlidXRlKCJjbGFzcyIpfHxuLmNsYXNzTmFtZTsKaWYoISh0JiZvW3FdLnJlZ2V4cC50ZXN0KHQpKSl7cmV0dXJuIGZhbHNlO319fWlmKHApe2ZvcihxPXAubGVuZ3RoO3EtLTspe209cFtxXTtpZihtLm9wZXJhdG9yPyFtLnRlc3QodGhpcy5nZXRBdHRyaWJ1dGUobixtLmtleSkpOiF0aGlzLmhhc0F0dHJpYnV0ZShuLG0ua2V5KSl7cmV0dXJuIGZhbHNlOwp9fX1pZihyKXtmb3IocT1yLmxlbmd0aDtxLS07KXttPXJbcV07aWYoIXRoaXMubWF0Y2hQc2V1ZG8obixtLmtleSxtLnZhbHVlKSl7cmV0dXJuIGZhbHNlO319fXJldHVybiB0cnVlO307dmFyIGk9eyIgIjpmdW5jdGlvbihwLHYsbSxxLHIsdCxvKXt2YXIgcyx1LG47CmlmKHRoaXMuaXNIVE1MRG9jdW1lbnQpe2dldEJ5SWQ6aWYobSl7dT10aGlzLmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKG0pO2lmKCghdSYmcC5hbGwpfHwodGhpcy5pZEdldHNOYW1lJiZ1JiZ1LmdldEF0dHJpYnV0ZU5vZGUoImlkIikubm9kZVZhbHVlIT1tKSl7bj1wLmFsbFttXTsKaWYoIW4pe3JldHVybjt9aWYoIW5bMF0pe249W25dO31mb3Iocz0wO3U9bltzKytdOyl7dmFyIGM9dS5nZXRBdHRyaWJ1dGVOb2RlKCJpZCIpO2lmKGMmJmMubm9kZVZhbHVlPT1tKXt0aGlzLnB1c2godSx2LG51bGwscSxyLHQpO2JyZWFrO319cmV0dXJuO31pZighdSl7aWYodGhpcy5jb250YWlucyh0aGlzLnJvb3QscCkpe3JldHVybjsKfWVsc2V7YnJlYWsgZ2V0QnlJZDt9fWVsc2V7aWYodGhpcy5kb2N1bWVudCE9PXAmJiF0aGlzLmNvbnRhaW5zKHAsdSkpe3JldHVybjt9fXRoaXMucHVzaCh1LHYsbnVsbCxxLHIsdCk7cmV0dXJuO31nZXRCeUNsYXNzOmlmKHEmJnAuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSYmIXRoaXMuYnJva2VuR0VCQ04pe249cC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKG8uam9pbigiICIpKTsKaWYoIShuJiZuLmxlbmd0aCkpe2JyZWFrIGdldEJ5Q2xhc3M7fWZvcihzPTA7dT1uW3MrK107KXt0aGlzLnB1c2godSx2LG0sbnVsbCxyLHQpO31yZXR1cm47fX1nZXRCeVRhZzp7bj1wLmdldEVsZW1lbnRzQnlUYWdOYW1lKHYpO2lmKCEobiYmbi5sZW5ndGgpKXticmVhayBnZXRCeVRhZzsKfWlmKCF0aGlzLmJyb2tlblN0YXJHRUJUTil7dj1udWxsO31mb3Iocz0wO3U9bltzKytdOyl7dGhpcy5wdXNoKHUsdixtLHEscix0KTt9fX0sIj4iOmZ1bmN0aW9uKG8sYyxxLG4sbSxwKXtpZigobz1vLmZpcnN0Q2hpbGQpKXtkb3tpZihvLm5vZGVUeXBlPT0xKXt0aGlzLnB1c2gobyxjLHEsbixtLHApOwp9fXdoaWxlKChvPW8ubmV4dFNpYmxpbmcpKTt9fSwiKyI6ZnVuY3Rpb24obyxjLHEsbixtLHApe3doaWxlKChvPW8ubmV4dFNpYmxpbmcpKXtpZihvLm5vZGVUeXBlPT0xKXt0aGlzLnB1c2gobyxjLHEsbixtLHApO2JyZWFrO319fSwiXiI6ZnVuY3Rpb24obyxjLHEsbixtLHApe289by5maXJzdENoaWxkOwppZihvKXtpZihvLm5vZGVUeXBlPT0xKXt0aGlzLnB1c2gobyxjLHEsbixtLHApO31lbHNle3RoaXNbImNvbWJpbmF0b3I6KyJdKG8sYyxxLG4sbSxwKTt9fX0sIn4iOmZ1bmN0aW9uKHAsYyxyLG8sbSxxKXt3aGlsZSgocD1wLm5leHRTaWJsaW5nKSl7aWYocC5ub2RlVHlwZSE9MSl7Y29udGludWU7Cn12YXIgbj10aGlzLmdldFVJRChwKTtpZih0aGlzLmJpdFVuaXF1ZXNbbl0pe2JyZWFrO310aGlzLmJpdFVuaXF1ZXNbbl09dHJ1ZTt0aGlzLnB1c2gocCxjLHIsbyxtLHEpO319LCIrKyI6ZnVuY3Rpb24obyxjLHEsbixtLHApe3RoaXNbImNvbWJpbmF0b3I6KyJdKG8sYyxxLG4sbSxwKTsKdGhpc1siY29tYmluYXRvcjohKyJdKG8sYyxxLG4sbSxwKTt9LCJ+fiI6ZnVuY3Rpb24obyxjLHEsbixtLHApe3RoaXNbImNvbWJpbmF0b3I6fiJdKG8sYyxxLG4sbSxwKTt0aGlzWyJjb21iaW5hdG9yOiF+Il0obyxjLHEsbixtLHApO30sIiEiOmZ1bmN0aW9uKG8sYyxxLG4sbSxwKXt3aGlsZSgobz1vLnBhcmVudE5vZGUpKXtpZihvIT09dGhpcy5kb2N1bWVudCl7dGhpcy5wdXNoKG8sYyxxLG4sbSxwKTsKfX19LCIhPiI6ZnVuY3Rpb24obyxjLHEsbixtLHApe289by5wYXJlbnROb2RlO2lmKG8hPT10aGlzLmRvY3VtZW50KXt0aGlzLnB1c2gobyxjLHEsbixtLHApO319LCIhKyI6ZnVuY3Rpb24obyxjLHEsbixtLHApe3doaWxlKChvPW8ucHJldmlvdXNTaWJsaW5nKSl7aWYoby5ub2RlVHlwZT09MSl7dGhpcy5wdXNoKG8sYyxxLG4sbSxwKTsKYnJlYWs7fX19LCIhXiI6ZnVuY3Rpb24obyxjLHEsbixtLHApe289by5sYXN0Q2hpbGQ7aWYobyl7aWYoby5ub2RlVHlwZT09MSl7dGhpcy5wdXNoKG8sYyxxLG4sbSxwKTt9ZWxzZXt0aGlzWyJjb21iaW5hdG9yOiErIl0obyxjLHEsbixtLHApO319fSwiIX4iOmZ1bmN0aW9uKHAsYyxyLG8sbSxxKXt3aGlsZSgocD1wLnByZXZpb3VzU2libGluZykpe2lmKHAubm9kZVR5cGUhPTEpe2NvbnRpbnVlOwp9dmFyIG49dGhpcy5nZXRVSUQocCk7aWYodGhpcy5iaXRVbmlxdWVzW25dKXticmVhazt9dGhpcy5iaXRVbmlxdWVzW25dPXRydWU7dGhpcy5wdXNoKHAsYyxyLG8sbSxxKTt9fX07Zm9yKHZhciBoIGluIGkpe2pbImNvbWJpbmF0b3I6IitoXT1pW2hdO312YXIgaz17ZW1wdHk6ZnVuY3Rpb24oYyl7dmFyIG09Yy5maXJzdENoaWxkOwpyZXR1cm4gIShtJiZtLm5vZGVUeXBlPT0xKSYmIShjLmlubmVyVGV4dHx8Yy50ZXh0Q29udGVudHx8IiIpLmxlbmd0aDt9LG5vdDpmdW5jdGlvbihjLG0pe3JldHVybiAhdGhpcy5tYXRjaE5vZGUoYyxtKTt9LGNvbnRhaW5zOmZ1bmN0aW9uKGMsbSl7cmV0dXJuKGMuaW5uZXJUZXh0fHxjLnRleHRDb250ZW50fHwiIikuaW5kZXhPZihtKT4tMTsKfSwiZmlyc3QtY2hpbGQiOmZ1bmN0aW9uKGMpe3doaWxlKChjPWMucHJldmlvdXNTaWJsaW5nKSl7aWYoYy5ub2RlVHlwZT09MSl7cmV0dXJuIGZhbHNlO319cmV0dXJuIHRydWU7fSwibGFzdC1jaGlsZCI6ZnVuY3Rpb24oYyl7d2hpbGUoKGM9Yy5uZXh0U2libGluZykpe2lmKGMubm9kZVR5cGU9PTEpe3JldHVybiBmYWxzZTsKfX1yZXR1cm4gdHJ1ZTt9LCJvbmx5LWNoaWxkIjpmdW5jdGlvbihuKXt2YXIgbT1uO3doaWxlKChtPW0ucHJldmlvdXNTaWJsaW5nKSl7aWYobS5ub2RlVHlwZT09MSl7cmV0dXJuIGZhbHNlO319dmFyIGM9bjt3aGlsZSgoYz1jLm5leHRTaWJsaW5nKSl7aWYoYy5ub2RlVHlwZT09MSl7cmV0dXJuIGZhbHNlOwp9fXJldHVybiB0cnVlO30sIm50aC1jaGlsZCI6ai5jcmVhdGVOVEhQc2V1ZG8oImZpcnN0Q2hpbGQiLCJuZXh0U2libGluZyIsInBvc05USCIpLCJudGgtbGFzdC1jaGlsZCI6ai5jcmVhdGVOVEhQc2V1ZG8oImxhc3RDaGlsZCIsInByZXZpb3VzU2libGluZyIsInBvc05USExhc3QiKSwibnRoLW9mLXR5cGUiOmouY3JlYXRlTlRIUHNldWRvKCJmaXJzdENoaWxkIiwibmV4dFNpYmxpbmciLCJwb3NOVEhUeXBlIix0cnVlKSwibnRoLWxhc3Qtb2YtdHlwZSI6ai5jcmVhdGVOVEhQc2V1ZG8oImxhc3RDaGlsZCIsInByZXZpb3VzU2libGluZyIsInBvc05USFR5cGVMYXN0Iix0cnVlKSxpbmRleDpmdW5jdGlvbihtLGMpe3JldHVybiB0aGlzWyJwc2V1ZG86bnRoLWNoaWxkIl0obSwiIitjKzEpOwp9LGV2ZW46ZnVuY3Rpb24oYyl7cmV0dXJuIHRoaXNbInBzZXVkbzpudGgtY2hpbGQiXShjLCIybiIpO30sb2RkOmZ1bmN0aW9uKGMpe3JldHVybiB0aGlzWyJwc2V1ZG86bnRoLWNoaWxkIl0oYywiMm4rMSIpO30sImZpcnN0LW9mLXR5cGUiOmZ1bmN0aW9uKGMpe3ZhciBtPWMubm9kZU5hbWU7CndoaWxlKChjPWMucHJldmlvdXNTaWJsaW5nKSl7aWYoYy5ub2RlTmFtZT09bSl7cmV0dXJuIGZhbHNlO319cmV0dXJuIHRydWU7fSwibGFzdC1vZi10eXBlIjpmdW5jdGlvbihjKXt2YXIgbT1jLm5vZGVOYW1lO3doaWxlKChjPWMubmV4dFNpYmxpbmcpKXtpZihjLm5vZGVOYW1lPT1tKXtyZXR1cm4gZmFsc2U7Cn19cmV0dXJuIHRydWU7fSwib25seS1vZi10eXBlIjpmdW5jdGlvbihuKXt2YXIgbT1uLG89bi5ub2RlTmFtZTt3aGlsZSgobT1tLnByZXZpb3VzU2libGluZykpe2lmKG0ubm9kZU5hbWU9PW8pe3JldHVybiBmYWxzZTt9fXZhciBjPW47d2hpbGUoKGM9Yy5uZXh0U2libGluZykpe2lmKGMubm9kZU5hbWU9PW8pe3JldHVybiBmYWxzZTsKfX1yZXR1cm4gdHJ1ZTt9LGVuYWJsZWQ6ZnVuY3Rpb24oYyl7cmV0dXJuICFjLmRpc2FibGVkO30sZGlzYWJsZWQ6ZnVuY3Rpb24oYyl7cmV0dXJuIGMuZGlzYWJsZWQ7fSxjaGVja2VkOmZ1bmN0aW9uKGMpe3JldHVybiBjLmNoZWNrZWR8fGMuc2VsZWN0ZWQ7fSxmb2N1czpmdW5jdGlvbihjKXtyZXR1cm4gdGhpcy5pc0hUTUxEb2N1bWVudCYmdGhpcy5kb2N1bWVudC5hY3RpdmVFbGVtZW50PT09YyYmKGMuaHJlZnx8Yy50eXBlfHx0aGlzLmhhc0F0dHJpYnV0ZShjLCJ0YWJpbmRleCIpKTsKfSxyb290OmZ1bmN0aW9uKGMpe3JldHVybihjPT09dGhpcy5yb290KTt9LHNlbGVjdGVkOmZ1bmN0aW9uKGMpe3JldHVybiBjLnNlbGVjdGVkO319O2Zvcih2YXIgYSBpbiBrKXtqWyJwc2V1ZG86IithXT1rW2FdO31qLmF0dHJpYnV0ZUdldHRlcnM9eyJjbGFzcyI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRBdHRyaWJ1dGUoImNsYXNzIil8fHRoaXMuY2xhc3NOYW1lOwp9LCJmb3IiOmZ1bmN0aW9uKCl7cmV0dXJuKCJodG1sRm9yIiBpbiB0aGlzKT90aGlzLmh0bWxGb3I6dGhpcy5nZXRBdHRyaWJ1dGUoImZvciIpO30saHJlZjpmdW5jdGlvbigpe3JldHVybigiaHJlZiIgaW4gdGhpcyk/dGhpcy5nZXRBdHRyaWJ1dGUoImhyZWYiLDIpOnRoaXMuZ2V0QXR0cmlidXRlKCJocmVmIik7Cn0sc3R5bGU6ZnVuY3Rpb24oKXtyZXR1cm4odGhpcy5zdHlsZSk/dGhpcy5zdHlsZS5jc3NUZXh0OnRoaXMuZ2V0QXR0cmlidXRlKCJzdHlsZSIpO30sdGFiaW5kZXg6ZnVuY3Rpb24oKXt2YXIgYz10aGlzLmdldEF0dHJpYnV0ZU5vZGUoInRhYmluZGV4Iik7cmV0dXJuKGMmJmMuc3BlY2lmaWVkKT9jLm5vZGVWYWx1ZTpudWxsOwp9LHR5cGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRBdHRyaWJ1dGUoInR5cGUiKTt9fTt2YXIgZD1qLlNsaWNrPSh0aGlzLlNsaWNrfHx7fSk7ZC52ZXJzaW9uPSIxLjEuNSI7ZC5zZWFyY2g9ZnVuY3Rpb24obSxuLGMpe3JldHVybiBqLnNlYXJjaChtLG4sYyk7Cn07ZC5maW5kPWZ1bmN0aW9uKGMsbSl7cmV0dXJuIGouc2VhcmNoKGMsbSxudWxsLHRydWUpO307ZC5jb250YWlucz1mdW5jdGlvbihjLG0pe2ouc2V0RG9jdW1lbnQoYyk7cmV0dXJuIGouY29udGFpbnMoYyxtKTt9O2QuZ2V0QXR0cmlidXRlPWZ1bmN0aW9uKG0sYyl7cmV0dXJuIGouZ2V0QXR0cmlidXRlKG0sYyk7Cn07ZC5tYXRjaD1mdW5jdGlvbihtLGMpe2lmKCEobSYmYykpe3JldHVybiBmYWxzZTt9aWYoIWN8fGM9PT1tKXtyZXR1cm4gdHJ1ZTt9ai5zZXREb2N1bWVudChtKTtyZXR1cm4gai5tYXRjaE5vZGUobSxjKTt9O2QuZGVmaW5lQXR0cmlidXRlR2V0dGVyPWZ1bmN0aW9uKGMsbSl7ai5hdHRyaWJ1dGVHZXR0ZXJzW2NdPW07CnJldHVybiB0aGlzO307ZC5sb29rdXBBdHRyaWJ1dGVHZXR0ZXI9ZnVuY3Rpb24oYyl7cmV0dXJuIGouYXR0cmlidXRlR2V0dGVyc1tjXTt9O2QuZGVmaW5lUHNldWRvPWZ1bmN0aW9uKGMsbSl7alsicHNldWRvOiIrY109ZnVuY3Rpb24obyxuKXtyZXR1cm4gbS5jYWxsKG8sbik7Cn07cmV0dXJuIHRoaXM7fTtkLmxvb2t1cFBzZXVkbz1mdW5jdGlvbihjKXt2YXIgbT1qWyJwc2V1ZG86IitjXTtpZihtKXtyZXR1cm4gZnVuY3Rpb24obil7cmV0dXJuIG0uY2FsbCh0aGlzLG4pO307fXJldHVybiBudWxsO307ZC5vdmVycmlkZT1mdW5jdGlvbihtLGMpe2oub3ZlcnJpZGUobSxjKTsKcmV0dXJuIHRoaXM7fTtkLmlzWE1MPWouaXNYTUw7ZC51aWRPZj1mdW5jdGlvbihjKXtyZXR1cm4gai5nZXRVSURIVE1MKGMpO307aWYoIXRoaXMuU2xpY2spe3RoaXMuU2xpY2s9ZDt9fSkuYXBwbHkoKHR5cGVvZiBleHBvcnRzIT0idW5kZWZpbmVkIik/ZXhwb3J0czp0aGlzKTsKdmFyIEVsZW1lbnQ9ZnVuY3Rpb24oYixnKXt2YXIgaD1FbGVtZW50LkNvbnN0cnVjdG9yc1tiXTtpZihoKXtyZXR1cm4gaChnKTt9aWYodHlwZW9mIGIhPSJzdHJpbmciKXtyZXR1cm4gZG9jdW1lbnQuaWQoYikuc2V0KGcpO31pZighZyl7Zz17fTt9aWYoISgvXltcdy1dKyQvKS50ZXN0KGIpKXt2YXIgZT1TbGljay5wYXJzZShiKS5leHByZXNzaW9uc1swXVswXTsKYj0oZS50YWc9PSIqIik/ImRpdiI6ZS50YWc7aWYoZS5pZCYmZy5pZD09bnVsbCl7Zy5pZD1lLmlkO312YXIgZD1lLmF0dHJpYnV0ZXM7aWYoZCl7Zm9yKHZhciBmPTAsYz1kLmxlbmd0aDtmPGM7ZisrKXt2YXIgYT1kW2ZdO2lmKGEudmFsdWUhPW51bGwmJmEub3BlcmF0b3I9PSI9IiYmZ1thLmtleV09PW51bGwpe2dbYS5rZXldPWEudmFsdWU7Cn19fWlmKGUuY2xhc3NMaXN0JiZnWyJjbGFzcyJdPT1udWxsKXtnWyJjbGFzcyJdPWUuY2xhc3NMaXN0LmpvaW4oIiAiKTt9fXJldHVybiBkb2N1bWVudC5uZXdFbGVtZW50KGIsZyk7fTtpZihCcm93c2VyLkVsZW1lbnQpe0VsZW1lbnQucHJvdG90eXBlPUJyb3dzZXIuRWxlbWVudC5wcm90b3R5cGU7Cn1uZXcgVHlwZSgiRWxlbWVudCIsRWxlbWVudCkubWlycm9yKGZ1bmN0aW9uKGEpe2lmKEFycmF5LnByb3RvdHlwZVthXSl7cmV0dXJuO312YXIgYj17fTtiW2FdPWZ1bmN0aW9uKCl7dmFyIGg9W10sZT1hcmd1bWVudHMsaj10cnVlO2Zvcih2YXIgZz0wLGQ9dGhpcy5sZW5ndGg7Cmc8ZDtnKyspe3ZhciBmPXRoaXNbZ10sYz1oW2ddPWZbYV0uYXBwbHkoZixlKTtqPShqJiZ0eXBlT2YoYyk9PSJlbGVtZW50Iik7fXJldHVybihqKT9uZXcgRWxlbWVudHMoaCk6aDt9O0VsZW1lbnRzLmltcGxlbWVudChiKTt9KTtpZighQnJvd3Nlci5FbGVtZW50KXtFbGVtZW50LnBhcmVudD1PYmplY3Q7CkVsZW1lbnQuUHJvdG90eXBlPXsiJGZhbWlseSI6RnVuY3Rpb24uZnJvbSgiZWxlbWVudCIpLmhpZGUoKX07RWxlbWVudC5taXJyb3IoZnVuY3Rpb24oYSxiKXtFbGVtZW50LlByb3RvdHlwZVthXT1iO30pO31FbGVtZW50LkNvbnN0cnVjdG9ycz17fTtFbGVtZW50LkNvbnN0cnVjdG9ycz1uZXcgSGFzaDsKdmFyIElGcmFtZT1uZXcgVHlwZSgiSUZyYW1lIixmdW5jdGlvbigpe3ZhciBlPUFycmF5LmxpbmsoYXJndW1lbnRzLHtwcm9wZXJ0aWVzOlR5cGUuaXNPYmplY3QsaWZyYW1lOmZ1bmN0aW9uKGYpe3JldHVybihmIT1udWxsKTt9fSk7dmFyIGM9ZS5wcm9wZXJ0aWVzfHx7fSxiOwppZihlLmlmcmFtZSl7Yj1kb2N1bWVudC5pZChlLmlmcmFtZSk7fXZhciBkPWMub25sb2FkfHxmdW5jdGlvbigpe307ZGVsZXRlIGMub25sb2FkO2MuaWQ9Yy5uYW1lPVtjLmlkLGMubmFtZSxiPyhiLmlkfHxiLm5hbWUpOiJJRnJhbWVfIitTdHJpbmcudW5pcXVlSUQoKV0ucGljaygpOwpiPW5ldyBFbGVtZW50KGJ8fCJpZnJhbWUiLGMpO3ZhciBhPWZ1bmN0aW9uKCl7ZC5jYWxsKGIuY29udGVudFdpbmRvdyk7fTtpZih3aW5kb3cuZnJhbWVzW2MuaWRdKXthKCk7fWVsc2V7Yi5hZGRMaXN0ZW5lcigibG9hZCIsYSk7fXJldHVybiBiO30pO3ZhciBFbGVtZW50cz10aGlzLkVsZW1lbnRzPWZ1bmN0aW9uKGEpe2lmKGEmJmEubGVuZ3RoKXt2YXIgZT17fSxkOwpmb3IodmFyIGM9MDtkPWFbYysrXTspe3ZhciBiPVNsaWNrLnVpZE9mKGQpO2lmKCFlW2JdKXtlW2JdPXRydWU7dGhpcy5wdXNoKGQpO319fX07RWxlbWVudHMucHJvdG90eXBlPXtsZW5ndGg6MH07RWxlbWVudHMucGFyZW50PUFycmF5O25ldyBUeXBlKCJFbGVtZW50cyIsRWxlbWVudHMpLmltcGxlbWVudCh7ZmlsdGVyOmZ1bmN0aW9uKGEsYil7aWYoIWEpe3JldHVybiB0aGlzOwp9cmV0dXJuIG5ldyBFbGVtZW50cyhBcnJheS5maWx0ZXIodGhpcywodHlwZU9mKGEpPT0ic3RyaW5nIik/ZnVuY3Rpb24oYyl7cmV0dXJuIGMubWF0Y2goYSk7fTphLGIpKTt9LnByb3RlY3QoKSxwdXNoOmZ1bmN0aW9uKCl7dmFyIGQ9dGhpcy5sZW5ndGg7Zm9yKHZhciBiPTAsYT1hcmd1bWVudHMubGVuZ3RoOwpiPGE7YisrKXt2YXIgYz1kb2N1bWVudC5pZChhcmd1bWVudHNbYl0pO2lmKGMpe3RoaXNbZCsrXT1jO319cmV0dXJuKHRoaXMubGVuZ3RoPWQpO30ucHJvdGVjdCgpLHVuc2hpZnQ6ZnVuY3Rpb24oKXt2YXIgYj1bXTtmb3IodmFyIGM9MCxhPWFyZ3VtZW50cy5sZW5ndGg7CmM8YTtjKyspe3ZhciBkPWRvY3VtZW50LmlkKGFyZ3VtZW50c1tjXSk7aWYoZCl7Yi5wdXNoKGQpO319cmV0dXJuIEFycmF5LnByb3RvdHlwZS51bnNoaWZ0LmFwcGx5KHRoaXMsYik7fS5wcm90ZWN0KCksY29uY2F0OmZ1bmN0aW9uKCl7dmFyIGI9bmV3IEVsZW1lbnRzKHRoaXMpOwpmb3IodmFyIGM9MCxhPWFyZ3VtZW50cy5sZW5ndGg7YzxhO2MrKyl7dmFyIGQ9YXJndW1lbnRzW2NdO2lmKFR5cGUuaXNFbnVtZXJhYmxlKGQpKXtiLmFwcGVuZChkKTt9ZWxzZXtiLnB1c2goZCk7fX1yZXR1cm4gYjt9LnByb3RlY3QoKSxhcHBlbmQ6ZnVuY3Rpb24oYyl7Zm9yKHZhciBiPTAsYT1jLmxlbmd0aDsKYjxhO2IrKyl7dGhpcy5wdXNoKGNbYl0pO31yZXR1cm4gdGhpczt9LnByb3RlY3QoKSxlbXB0eTpmdW5jdGlvbigpe3doaWxlKHRoaXMubGVuZ3RoKXtkZWxldGUgdGhpc1stLXRoaXMubGVuZ3RoXTt9cmV0dXJuIHRoaXM7fS5wcm90ZWN0KCl9KTtFbGVtZW50cy5hbGlhcygiZXh0ZW5kIiwiYXBwZW5kIik7CihmdW5jdGlvbigpe3ZhciBnPUFycmF5LnByb3RvdHlwZS5zcGxpY2UsYj17IjAiOjAsIjEiOjEsbGVuZ3RoOjJ9O2cuY2FsbChiLDEsMSk7aWYoYlsxXT09MSl7RWxlbWVudHMuaW1wbGVtZW50KCJzcGxpY2UiLGZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5sZW5ndGg7Zy5hcHBseSh0aGlzLGFyZ3VtZW50cyk7CndoaWxlKGU+PXRoaXMubGVuZ3RoKXtkZWxldGUgdGhpc1tlLS1dO31yZXR1cm4gdGhpczt9LnByb3RlY3QoKSk7fUVsZW1lbnRzLmltcGxlbWVudChBcnJheS5wcm90b3R5cGUpO0FycmF5Lm1pcnJvcihFbGVtZW50cyk7dmFyIGY7dHJ5e3ZhciBhPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIjxpbnB1dCBuYW1lPXg+Iik7CmY9KGEubmFtZT09IngiKTt9Y2F0Y2goYyl7fXZhciBkPWZ1bmN0aW9uKGUpe3JldHVybigiIitlKS5yZXBsYWNlKC8mL2csIiZhbXA7IikucmVwbGFjZSgvIi9nLCImcXVvdDsiKTt9O0RvY3VtZW50LmltcGxlbWVudCh7bmV3RWxlbWVudDpmdW5jdGlvbihlLGgpe2lmKGgmJmguY2hlY2tlZCE9bnVsbCl7aC5kZWZhdWx0Q2hlY2tlZD1oLmNoZWNrZWQ7Cn1pZihmJiZoKXtlPSI8IitlO2lmKGgubmFtZSl7ZSs9JyBuYW1lPSInK2QoaC5uYW1lKSsnIic7fWlmKGgudHlwZSl7ZSs9JyB0eXBlPSInK2QoaC50eXBlKSsnIic7fWUrPSI+IjtkZWxldGUgaC5uYW1lO2RlbGV0ZSBoLnR5cGU7fXJldHVybiB0aGlzLmlkKHRoaXMuY3JlYXRlRWxlbWVudChlKSkuc2V0KGgpOwp9fSk7fSkoKTtEb2N1bWVudC5pbXBsZW1lbnQoe25ld1RleHROb2RlOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNyZWF0ZVRleHROb2RlKGEpO30sZ2V0RG9jdW1lbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpczt9LGdldFdpbmRvdzpmdW5jdGlvbigpe3JldHVybiB0aGlzLndpbmRvdzsKfSxpZDooZnVuY3Rpb24oKXt2YXIgYT17c3RyaW5nOmZ1bmN0aW9uKGQsYyxiKXtkPVNsaWNrLmZpbmQoYiwiIyIrZC5yZXBsYWNlKC8oXFcpL2csIlxcJDEiKSk7cmV0dXJuKGQpP2EuZWxlbWVudChkLGMpOm51bGw7fSxlbGVtZW50OmZ1bmN0aW9uKGIsYyl7JHVpZChiKTsKaWYoIWMmJiFiLiRmYW1pbHkmJiEoL14oPzpvYmplY3R8ZW1iZWQpJC9pKS50ZXN0KGIudGFnTmFtZSkpe09iamVjdC5hcHBlbmQoYixFbGVtZW50LlByb3RvdHlwZSk7fXJldHVybiBiO30sb2JqZWN0OmZ1bmN0aW9uKGMsZCxiKXtpZihjLnRvRWxlbWVudCl7cmV0dXJuIGEuZWxlbWVudChjLnRvRWxlbWVudChiKSxkKTsKfXJldHVybiBudWxsO319O2EudGV4dG5vZGU9YS53aGl0ZXNwYWNlPWEud2luZG93PWEuZG9jdW1lbnQ9ZnVuY3Rpb24oYil7cmV0dXJuIGI7fTtyZXR1cm4gZnVuY3Rpb24oYyxlLGQpe2lmKGMmJmMuJGZhbWlseSYmYy51aWQpe3JldHVybiBjO312YXIgYj10eXBlT2YoYyk7CnJldHVybihhW2JdKT9hW2JdKGMsZSxkfHxkb2N1bWVudCk6bnVsbDt9O30pKCl9KTtpZih3aW5kb3cuJD09bnVsbCl7V2luZG93LmltcGxlbWVudCgiJCIsZnVuY3Rpb24oYSxiKXtyZXR1cm4gZG9jdW1lbnQuaWQoYSxiLHRoaXMuZG9jdW1lbnQpO30pO31XaW5kb3cuaW1wbGVtZW50KHtnZXREb2N1bWVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRvY3VtZW50Owp9LGdldFdpbmRvdzpmdW5jdGlvbigpe3JldHVybiB0aGlzO319KTtbRG9jdW1lbnQsRWxlbWVudF0uaW52b2tlKCJpbXBsZW1lbnQiLHtnZXRFbGVtZW50czpmdW5jdGlvbihhKXtyZXR1cm4gU2xpY2suc2VhcmNoKHRoaXMsYSxuZXcgRWxlbWVudHMpO30sZ2V0RWxlbWVudDpmdW5jdGlvbihhKXtyZXR1cm4gZG9jdW1lbnQuaWQoU2xpY2suZmluZCh0aGlzLGEpKTsKfX0pOyhmdW5jdGlvbihiLGQsYSl7dGhpcy5TZWxlY3RvcnM9e307dmFyIGU9dGhpcy5TZWxlY3RvcnMuUHNldWRvPW5ldyBIYXNoKCk7dmFyIGM9ZnVuY3Rpb24oKXtmb3IodmFyIGYgaW4gZSl7aWYoZS5oYXNPd25Qcm9wZXJ0eShmKSl7U2xpY2suZGVmaW5lUHNldWRvKGYsZVtmXSk7CmRlbGV0ZSBlW2ZdO319fTtTbGljay5zZWFyY2g9ZnVuY3Rpb24oZyxoLGYpe2MoKTtyZXR1cm4gYi5jYWxsKHRoaXMsZyxoLGYpO307U2xpY2suZmluZD1mdW5jdGlvbihmLGcpe2MoKTtyZXR1cm4gZC5jYWxsKHRoaXMsZixnKTt9O1NsaWNrLm1hdGNoPWZ1bmN0aW9uKGcsZil7YygpOwpyZXR1cm4gYS5jYWxsKHRoaXMsZyxmKTt9O30pKFNsaWNrLnNlYXJjaCxTbGljay5maW5kLFNsaWNrLm1hdGNoKTtpZih3aW5kb3cuJCQ9PW51bGwpe1dpbmRvdy5pbXBsZW1lbnQoIiQkIixmdW5jdGlvbihhKXt2YXIgZj1uZXcgRWxlbWVudHM7aWYoYXJndW1lbnRzLmxlbmd0aD09MSYmdHlwZW9mIGE9PSJzdHJpbmciKXtyZXR1cm4gU2xpY2suc2VhcmNoKHRoaXMuZG9jdW1lbnQsYSxmKTsKfXZhciBjPUFycmF5LmZsYXR0ZW4oYXJndW1lbnRzKTtmb3IodmFyIGQ9MCxiPWMubGVuZ3RoO2Q8YjtkKyspe3ZhciBlPWNbZF07c3dpdGNoKHR5cGVPZihlKSl7Y2FzZSJlbGVtZW50IjpmLnB1c2goZSk7YnJlYWs7Y2FzZSJzdHJpbmciOlNsaWNrLnNlYXJjaCh0aGlzLmRvY3VtZW50LGUsZik7Cn19cmV0dXJuIGY7fSk7fWlmKHdpbmRvdy4kJD09bnVsbCl7V2luZG93LmltcGxlbWVudCgiJCQiLGZ1bmN0aW9uKGEpe2lmKGFyZ3VtZW50cy5sZW5ndGg9PTEpe2lmKHR5cGVvZiBhPT0ic3RyaW5nIil7cmV0dXJuIFNsaWNrLnNlYXJjaCh0aGlzLmRvY3VtZW50LGEsbmV3IEVsZW1lbnRzKTsKfWVsc2V7aWYoVHlwZS5pc0VudW1lcmFibGUoYSkpe3JldHVybiBuZXcgRWxlbWVudHMoYSk7fX19cmV0dXJuIG5ldyBFbGVtZW50cyhhcmd1bWVudHMpO30pO30oZnVuY3Rpb24oKXt2YXIgaz17fSxpPXt9O3ZhciBuPXtpbnB1dDoiY2hlY2tlZCIsb3B0aW9uOiJzZWxlY3RlZCIsdGV4dGFyZWE6InZhbHVlIn07CnZhciBlPWZ1bmN0aW9uKHApe3JldHVybihpW3BdfHwoaVtwXT17fSkpO307dmFyIGo9ZnVuY3Rpb24ocSl7dmFyIHA9cS51aWQ7aWYocS5yZW1vdmVFdmVudHMpe3EucmVtb3ZlRXZlbnRzKCk7fWlmKHEuY2xlYXJBdHRyaWJ1dGVzKXtxLmNsZWFyQXR0cmlidXRlcygpOwp9aWYocCE9bnVsbCl7ZGVsZXRlIGtbcF07ZGVsZXRlIGlbcF07fXJldHVybiBxO307dmFyIG89WyJkZWZhdWx0VmFsdWUiLCJhY2Nlc3NLZXkiLCJjZWxsUGFkZGluZyIsImNlbGxTcGFjaW5nIiwiY29sU3BhbiIsImZyYW1lQm9yZGVyIiwibWF4TGVuZ3RoIiwicmVhZE9ubHkiLCJyb3dTcGFuIiwidGFiSW5kZXgiLCJ1c2VNYXAiXTsKdmFyIGQ9WyJjb21wYWN0Iiwibm93cmFwIiwiaXNtYXAiLCJkZWNsYXJlIiwibm9zaGFkZSIsImNoZWNrZWQiLCJkaXNhYmxlZCIsInJlYWRPbmx5IiwibXVsdGlwbGUiLCJzZWxlY3RlZCIsIm5vcmVzaXplIiwiZGVmZXIiLCJkZWZhdWx0Q2hlY2tlZCJdO3ZhciBnPXtodG1sOiJpbm5lckhUTUwiLCJjbGFzcyI6ImNsYXNzTmFtZSIsImZvciI6Imh0bWxGb3IiLHRleHQ6KGZ1bmN0aW9uKCl7dmFyIHA9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CnJldHVybihwLnRleHRDb250ZW50PT1udWxsKT8iaW5uZXJUZXh0IjoidGV4dENvbnRlbnQiO30pKCl9O3ZhciBtPVsidHlwZSJdO3ZhciBoPVsidmFsdWUiLCJkZWZhdWx0VmFsdWUiXTt2YXIgbD0vXig/OmhyZWZ8c3JjfHVzZW1hcCkkL2k7ZD1kLmFzc29jaWF0ZShkKTsKbz1vLmFzc29jaWF0ZShvLm1hcChTdHJpbmcudG9Mb3dlckNhc2UpKTttPW0uYXNzb2NpYXRlKG0pO09iamVjdC5hcHBlbmQoZyxoLmFzc29jaWF0ZShoKSk7dmFyIGM9e2JlZm9yZTpmdW5jdGlvbihxLHApe3ZhciByPXAucGFyZW50Tm9kZTtpZihyKXtyLmluc2VydEJlZm9yZShxLHApOwp9fSxhZnRlcjpmdW5jdGlvbihxLHApe3ZhciByPXAucGFyZW50Tm9kZTtpZihyKXtyLmluc2VydEJlZm9yZShxLHAubmV4dFNpYmxpbmcpO319LGJvdHRvbTpmdW5jdGlvbihxLHApe3AuYXBwZW5kQ2hpbGQocSk7fSx0b3A6ZnVuY3Rpb24ocSxwKXtwLmluc2VydEJlZm9yZShxLHAuZmlyc3RDaGlsZCk7Cn19O2MuaW5zaWRlPWMuYm90dG9tO09iamVjdC5lYWNoKGMsZnVuY3Rpb24ocSxyKXtyPXIuY2FwaXRhbGl6ZSgpO3ZhciBwPXt9O3BbImluamVjdCIrcl09ZnVuY3Rpb24ocyl7cSh0aGlzLGRvY3VtZW50LmlkKHMsdHJ1ZSkpO3JldHVybiB0aGlzO307cFsiZ3JhYiIrcl09ZnVuY3Rpb24ocyl7cShkb2N1bWVudC5pZChzLHRydWUpLHRoaXMpOwpyZXR1cm4gdGhpczt9O0VsZW1lbnQuaW1wbGVtZW50KHApO30pO3ZhciBiPWZ1bmN0aW9uKHMscil7aWYoIXMpe3JldHVybiByO31zPU9iamVjdC5jbG9uZShTbGljay5wYXJzZShzKSk7dmFyIHE9cy5leHByZXNzaW9ucztmb3IodmFyIHA9cS5sZW5ndGg7cC0tOyl7cVtwXVswXS5jb21iaW5hdG9yPXI7Cn1yZXR1cm4gczt9O0VsZW1lbnQuaW1wbGVtZW50KHtzZXQ6ZnVuY3Rpb24ocixxKXt2YXIgcD1FbGVtZW50LlByb3BlcnRpZXNbcl07KHAmJnAuc2V0KT9wLnNldC5jYWxsKHRoaXMscSk6dGhpcy5zZXRQcm9wZXJ0eShyLHEpO30ub3ZlcmxvYWRTZXR0ZXIoKSxnZXQ6ZnVuY3Rpb24ocSl7dmFyIHA9RWxlbWVudC5Qcm9wZXJ0aWVzW3FdOwpyZXR1cm4ocCYmcC5nZXQpP3AuZ2V0LmFwcGx5KHRoaXMpOnRoaXMuZ2V0UHJvcGVydHkocSk7fS5vdmVybG9hZEdldHRlcigpLGVyYXNlOmZ1bmN0aW9uKHEpe3ZhciBwPUVsZW1lbnQuUHJvcGVydGllc1txXTsocCYmcC5lcmFzZSk/cC5lcmFzZS5hcHBseSh0aGlzKTp0aGlzLnJlbW92ZVByb3BlcnR5KHEpOwpyZXR1cm4gdGhpczt9LHNldFByb3BlcnR5OmZ1bmN0aW9uKHEscil7cT1vW3FdfHxxO2lmKHI9PW51bGwpe3JldHVybiB0aGlzLnJlbW92ZVByb3BlcnR5KHEpO312YXIgcD1nW3FdOyhwKT90aGlzW3BdPXI6KGRbcV0pP3RoaXNbcV09ISFyOnRoaXMuc2V0QXR0cmlidXRlKHEsIiIrcik7CnJldHVybiB0aGlzO30sc2V0UHJvcGVydGllczpmdW5jdGlvbihwKXtmb3IodmFyIHEgaW4gcCl7dGhpcy5zZXRQcm9wZXJ0eShxLHBbcV0pO31yZXR1cm4gdGhpczt9LGdldFByb3BlcnR5OmZ1bmN0aW9uKHEpe3E9b1txXXx8cTt2YXIgcD1nW3FdfHxtW3FdO3JldHVybihwKT90aGlzW3BdOihkW3FdKT8hIXRoaXNbcV06KGwudGVzdChxKT90aGlzLmdldEF0dHJpYnV0ZShxLDIpOihwPXRoaXMuZ2V0QXR0cmlidXRlTm9kZShxKSk/cC5ub2RlVmFsdWU6bnVsbCl8fG51bGw7Cn0sZ2V0UHJvcGVydGllczpmdW5jdGlvbigpe3ZhciBwPUFycmF5LmZyb20oYXJndW1lbnRzKTtyZXR1cm4gcC5tYXAodGhpcy5nZXRQcm9wZXJ0eSx0aGlzKS5hc3NvY2lhdGUocCk7fSxyZW1vdmVQcm9wZXJ0eTpmdW5jdGlvbihxKXtxPW9bcV18fHE7dmFyIHA9Z1txXTsKKHApP3RoaXNbcF09IiI6KGRbcV0pP3RoaXNbcV09ZmFsc2U6dGhpcy5yZW1vdmVBdHRyaWJ1dGUocSk7cmV0dXJuIHRoaXM7fSxyZW1vdmVQcm9wZXJ0aWVzOmZ1bmN0aW9uKCl7QXJyYXkuZWFjaChhcmd1bWVudHMsdGhpcy5yZW1vdmVQcm9wZXJ0eSx0aGlzKTtyZXR1cm4gdGhpczsKfSxoYXNDbGFzczpmdW5jdGlvbihwKXtyZXR1cm4gdGhpcy5jbGFzc05hbWUuY2xlYW4oKS5jb250YWlucyhwLCIgIik7fSxhZGRDbGFzczpmdW5jdGlvbihwKXtpZighdGhpcy5oYXNDbGFzcyhwKSl7dGhpcy5jbGFzc05hbWU9KHRoaXMuY2xhc3NOYW1lKyIgIitwKS5jbGVhbigpOwp9cmV0dXJuIHRoaXM7fSxyZW1vdmVDbGFzczpmdW5jdGlvbihwKXt0aGlzLmNsYXNzTmFtZT10aGlzLmNsYXNzTmFtZS5yZXBsYWNlKG5ldyBSZWdFeHAoIihefFxccykiK3ArIig/Olxcc3wkKSIpLCIkMSIpO3JldHVybiB0aGlzO30sdG9nZ2xlQ2xhc3M6ZnVuY3Rpb24ocCxxKXtpZihxPT1udWxsKXtxPSF0aGlzLmhhc0NsYXNzKHApOwp9cmV0dXJuKHEpP3RoaXMuYWRkQ2xhc3MocCk6dGhpcy5yZW1vdmVDbGFzcyhwKTt9LGFkb3B0OmZ1bmN0aW9uKCl7dmFyIHM9dGhpcyxwLHU9QXJyYXkuZmxhdHRlbihhcmd1bWVudHMpLHQ9dS5sZW5ndGg7aWYodD4xKXtzPXA9ZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpOwp9Zm9yKHZhciByPTA7cjx0O3IrKyl7dmFyIHE9ZG9jdW1lbnQuaWQodVtyXSx0cnVlKTtpZihxKXtzLmFwcGVuZENoaWxkKHEpO319aWYocCl7dGhpcy5hcHBlbmRDaGlsZChwKTt9cmV0dXJuIHRoaXM7fSxhcHBlbmRUZXh0OmZ1bmN0aW9uKHEscCl7cmV0dXJuIHRoaXMuZ3JhYih0aGlzLmdldERvY3VtZW50KCkubmV3VGV4dE5vZGUocSkscCk7Cn0sZ3JhYjpmdW5jdGlvbihxLHApe2NbcHx8ImJvdHRvbSJdKGRvY3VtZW50LmlkKHEsdHJ1ZSksdGhpcyk7cmV0dXJuIHRoaXM7fSxpbmplY3Q6ZnVuY3Rpb24ocSxwKXtjW3B8fCJib3R0b20iXSh0aGlzLGRvY3VtZW50LmlkKHEsdHJ1ZSkpO3JldHVybiB0aGlzO30scmVwbGFjZXM6ZnVuY3Rpb24ocCl7cD1kb2N1bWVudC5pZChwLHRydWUpOwpwLnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKHRoaXMscCk7cmV0dXJuIHRoaXM7fSx3cmFwczpmdW5jdGlvbihxLHApe3E9ZG9jdW1lbnQuaWQocSx0cnVlKTtyZXR1cm4gdGhpcy5yZXBsYWNlcyhxKS5ncmFiKHEscCk7fSxnZXRQcmV2aW91czpmdW5jdGlvbihwKXtyZXR1cm4gZG9jdW1lbnQuaWQoU2xpY2suZmluZCh0aGlzLGIocCwiIX4iKSkpOwp9LGdldEFsbFByZXZpb3VzOmZ1bmN0aW9uKHApe3JldHVybiBTbGljay5zZWFyY2godGhpcyxiKHAsIiF+IiksbmV3IEVsZW1lbnRzKTt9LGdldE5leHQ6ZnVuY3Rpb24ocCl7cmV0dXJuIGRvY3VtZW50LmlkKFNsaWNrLmZpbmQodGhpcyxiKHAsIn4iKSkpO30sZ2V0QWxsTmV4dDpmdW5jdGlvbihwKXtyZXR1cm4gU2xpY2suc2VhcmNoKHRoaXMsYihwLCJ+IiksbmV3IEVsZW1lbnRzKTsKfSxnZXRGaXJzdDpmdW5jdGlvbihwKXtyZXR1cm4gZG9jdW1lbnQuaWQoU2xpY2suc2VhcmNoKHRoaXMsYihwLCI+IikpWzBdKTt9LGdldExhc3Q6ZnVuY3Rpb24ocCl7cmV0dXJuIGRvY3VtZW50LmlkKFNsaWNrLnNlYXJjaCh0aGlzLGIocCwiPiIpKS5nZXRMYXN0KCkpOwp9LGdldFBhcmVudDpmdW5jdGlvbihwKXtyZXR1cm4gZG9jdW1lbnQuaWQoU2xpY2suZmluZCh0aGlzLGIocCwiISIpKSk7fSxnZXRQYXJlbnRzOmZ1bmN0aW9uKHApe3JldHVybiBTbGljay5zZWFyY2godGhpcyxiKHAsIiEiKSxuZXcgRWxlbWVudHMpO30sZ2V0U2libGluZ3M6ZnVuY3Rpb24ocCl7cmV0dXJuIFNsaWNrLnNlYXJjaCh0aGlzLGIocCwifn4iKSxuZXcgRWxlbWVudHMpOwp9LGdldENoaWxkcmVuOmZ1bmN0aW9uKHApe3JldHVybiBTbGljay5zZWFyY2godGhpcyxiKHAsIj4iKSxuZXcgRWxlbWVudHMpO30sZ2V0V2luZG93OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub3duZXJEb2N1bWVudC53aW5kb3c7fSxnZXREb2N1bWVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLm93bmVyRG9jdW1lbnQ7Cn0sZ2V0RWxlbWVudEJ5SWQ6ZnVuY3Rpb24ocCl7cmV0dXJuIGRvY3VtZW50LmlkKFNsaWNrLmZpbmQodGhpcywiIyIrKCIiK3ApLnJlcGxhY2UoLyhcVykvZywiXFwkMSIpKSk7fSxnZXRTZWxlY3RlZDpmdW5jdGlvbigpe3RoaXMuc2VsZWN0ZWRJbmRleDtyZXR1cm4gbmV3IEVsZW1lbnRzKEFycmF5LmZyb20odGhpcy5vcHRpb25zKS5maWx0ZXIoZnVuY3Rpb24ocCl7cmV0dXJuIHAuc2VsZWN0ZWQ7Cn0pKTt9LHRvUXVlcnlTdHJpbmc6ZnVuY3Rpb24oKXt2YXIgcD1bXTt0aGlzLmdldEVsZW1lbnRzKCJpbnB1dCwgc2VsZWN0LCB0ZXh0YXJlYSIpLmVhY2goZnVuY3Rpb24ocil7dmFyIHE9ci50eXBlO2lmKCFyLm5hbWV8fHIuZGlzYWJsZWR8fHE9PSJzdWJtaXQifHxxPT0icmVzZXQifHxxPT0iZmlsZSJ8fHE9PSJpbWFnZSIpe3JldHVybjsKfXZhciBzPShyLmdldCgidGFnIik9PSJzZWxlY3QiKT9yLmdldFNlbGVjdGVkKCkubWFwKGZ1bmN0aW9uKHQpe3JldHVybiBkb2N1bWVudC5pZCh0KS5nZXQoInZhbHVlIik7fSk6KChxPT0icmFkaW8ifHxxPT0iY2hlY2tib3giKSYmIXIuY2hlY2tlZCk/bnVsbDpyLmdldCgidmFsdWUiKTsKQXJyYXkuZnJvbShzKS5lYWNoKGZ1bmN0aW9uKHQpe2lmKHR5cGVvZiB0IT0idW5kZWZpbmVkIil7cC5wdXNoKGVuY29kZVVSSUNvbXBvbmVudChyLm5hbWUpKyI9IitlbmNvZGVVUklDb21wb25lbnQodCkpO319KTt9KTtyZXR1cm4gcC5qb2luKCImIik7fSxkZXN0cm95OmZ1bmN0aW9uKCl7dmFyIHA9aih0aGlzKS5nZXRFbGVtZW50c0J5VGFnTmFtZSgiKiIpOwpBcnJheS5lYWNoKHAsaik7RWxlbWVudC5kaXNwb3NlKHRoaXMpO3JldHVybiBudWxsO30sZW1wdHk6ZnVuY3Rpb24oKXtBcnJheS5mcm9tKHRoaXMuY2hpbGROb2RlcykuZWFjaChFbGVtZW50LmRpc3Bvc2UpO3JldHVybiB0aGlzO30sZGlzcG9zZTpmdW5jdGlvbigpe3JldHVybih0aGlzLnBhcmVudE5vZGUpP3RoaXMucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzKTp0aGlzOwp9LG1hdGNoOmZ1bmN0aW9uKHApe3JldHVybiAhcHx8U2xpY2subWF0Y2godGhpcyxwKTt9fSk7dmFyIGE9ZnVuY3Rpb24odCxzLHEpe2lmKCFxKXt0LnNldEF0dHJpYnV0ZU5vZGUoZG9jdW1lbnQuY3JlYXRlQXR0cmlidXRlKCJpZCIpKTt9aWYodC5jbGVhckF0dHJpYnV0ZXMpe3QuY2xlYXJBdHRyaWJ1dGVzKCk7CnQubWVyZ2VBdHRyaWJ1dGVzKHMpO3QucmVtb3ZlQXR0cmlidXRlKCJ1aWQiKTtpZih0Lm9wdGlvbnMpe3ZhciB1PXQub3B0aW9ucyxwPXMub3B0aW9ucztmb3IodmFyIHI9dS5sZW5ndGg7ci0tOyl7dVtyXS5zZWxlY3RlZD1wW3JdLnNlbGVjdGVkO319fXZhciB2PW5bcy50YWdOYW1lLnRvTG93ZXJDYXNlKCldOwppZih2JiZzW3ZdKXt0W3ZdPXNbdl07fX07RWxlbWVudC5pbXBsZW1lbnQoImNsb25lIixmdW5jdGlvbihyLHApe3I9ciE9PWZhbHNlO3ZhciB3PXRoaXMuY2xvbmVOb2RlKHIpLHE7aWYocil7dmFyIHM9dy5nZXRFbGVtZW50c0J5VGFnTmFtZSgiKiIpLHU9dGhpcy5nZXRFbGVtZW50c0J5VGFnTmFtZSgiKiIpOwpmb3IocT1zLmxlbmd0aDtxLS07KXthKHNbcV0sdVtxXSxwKTt9fWEodyx0aGlzLHApO2lmKEJyb3dzZXIuaWUpe3ZhciB0PXcuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIm9iamVjdCIpLHY9dGhpcy5nZXRFbGVtZW50c0J5VGFnTmFtZSgib2JqZWN0Iik7Zm9yKHE9dC5sZW5ndGg7CnEtLTspe3RbcV0ub3V0ZXJIVE1MPXZbcV0ub3V0ZXJIVE1MO319cmV0dXJuIGRvY3VtZW50LmlkKHcpO30pO3ZhciBmPXtjb250YWluczpmdW5jdGlvbihwKXtyZXR1cm4gU2xpY2suY29udGFpbnModGhpcyxwKTt9fTtpZighZG9jdW1lbnQuY29udGFpbnMpe0RvY3VtZW50LmltcGxlbWVudChmKTsKfWlmKCFkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKS5jb250YWlucyl7RWxlbWVudC5pbXBsZW1lbnQoZik7fUVsZW1lbnQuaW1wbGVtZW50KCJoYXNDaGlsZCIsZnVuY3Rpb24ocCl7cmV0dXJuIHRoaXMhPT1wJiZ0aGlzLmNvbnRhaW5zKHApO30pO1tFbGVtZW50LFdpbmRvdyxEb2N1bWVudF0uaW52b2tlKCJpbXBsZW1lbnQiLHthZGRMaXN0ZW5lcjpmdW5jdGlvbihzLHIpe2lmKHM9PSJ1bmxvYWQiKXt2YXIgcD1yLHE9dGhpczsKcj1mdW5jdGlvbigpe3EucmVtb3ZlTGlzdGVuZXIoInVubG9hZCIscik7cCgpO307fWVsc2V7a1skdWlkKHRoaXMpXT10aGlzO31pZih0aGlzLmFkZEV2ZW50TGlzdGVuZXIpe3RoaXMuYWRkRXZlbnRMaXN0ZW5lcihzLHIsISFhcmd1bWVudHNbMl0pO31lbHNle3RoaXMuYXR0YWNoRXZlbnQoIm9uIitzLHIpOwp9cmV0dXJuIHRoaXM7fSxyZW1vdmVMaXN0ZW5lcjpmdW5jdGlvbihxLHApe2lmKHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcil7dGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKHEscCwhIWFyZ3VtZW50c1syXSk7fWVsc2V7dGhpcy5kZXRhY2hFdmVudCgib24iK3EscCk7Cn1yZXR1cm4gdGhpczt9LHJldHJpZXZlOmZ1bmN0aW9uKHEscCl7dmFyIHM9ZSgkdWlkKHRoaXMpKSxyPXNbcV07aWYocCE9bnVsbCYmcj09bnVsbCl7cj1zW3FdPXA7fXJldHVybiByIT1udWxsP3I6bnVsbDt9LHN0b3JlOmZ1bmN0aW9uKHEscCl7dmFyIHI9ZSgkdWlkKHRoaXMpKTsKcltxXT1wO3JldHVybiB0aGlzO30sZWxpbWluYXRlOmZ1bmN0aW9uKHApe3ZhciBxPWUoJHVpZCh0aGlzKSk7ZGVsZXRlIHFbcF07cmV0dXJuIHRoaXM7fX0pO2lmKHdpbmRvdy5hdHRhY2hFdmVudCYmIXdpbmRvdy5hZGRFdmVudExpc3RlbmVyKXt3aW5kb3cuYWRkTGlzdGVuZXIoInVubG9hZCIsZnVuY3Rpb24oKXtPYmplY3QuZWFjaChrLGopOwppZih3aW5kb3cuQ29sbGVjdEdhcmJhZ2Upe0NvbGxlY3RHYXJiYWdlKCk7fX0pO319KSgpO0VsZW1lbnQuUHJvcGVydGllcz17fTtFbGVtZW50LlByb3BlcnRpZXM9bmV3IEhhc2g7RWxlbWVudC5Qcm9wZXJ0aWVzLnN0eWxlPXtzZXQ6ZnVuY3Rpb24oYSl7dGhpcy5zdHlsZS5jc3NUZXh0PWE7Cn0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3R5bGUuY3NzVGV4dDt9LGVyYXNlOmZ1bmN0aW9uKCl7dGhpcy5zdHlsZS5jc3NUZXh0PSIiO319O0VsZW1lbnQuUHJvcGVydGllcy50YWc9e2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnRhZ05hbWUudG9Mb3dlckNhc2UoKTsKfX07KGZ1bmN0aW9uKGEpe2lmKGEhPW51bGwpe0VsZW1lbnQuUHJvcGVydGllcy5tYXhsZW5ndGg9RWxlbWVudC5Qcm9wZXJ0aWVzLm1heExlbmd0aD17Z2V0OmZ1bmN0aW9uKCl7dmFyIGI9dGhpcy5nZXRBdHRyaWJ1dGUoIm1heExlbmd0aCIpO3JldHVybiBiPT1hP251bGw6YjsKfX07fX0pKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImlucHV0IikuZ2V0QXR0cmlidXRlKCJtYXhMZW5ndGgiKSk7RWxlbWVudC5Qcm9wZXJ0aWVzLmh0bWw9KGZ1bmN0aW9uKCl7dmFyIGM9RnVuY3Rpb24uYXR0ZW1wdChmdW5jdGlvbigpe3ZhciBlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInRhYmxlIik7CmUuaW5uZXJIVE1MPSI8dHI+PHRkPjwvdGQ+PC90cj4iO30pO3ZhciBkPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO3ZhciBhPXt0YWJsZTpbMSwiPHRhYmxlPiIsIjwvdGFibGU+Il0sc2VsZWN0OlsxLCI8c2VsZWN0PiIsIjwvc2VsZWN0PiJdLHRib2R5OlsyLCI8dGFibGU+PHRib2R5PiIsIjwvdGJvZHk+PC90YWJsZT4iXSx0cjpbMywiPHRhYmxlPjx0Ym9keT48dHI+IiwiPC90cj48L3Rib2R5PjwvdGFibGU+Il19OwphLnRoZWFkPWEudGZvb3Q9YS50Ym9keTt2YXIgYj17c2V0OmZ1bmN0aW9uKCl7dmFyIGY9QXJyYXkuZmxhdHRlbihhcmd1bWVudHMpLmpvaW4oIiIpO3ZhciBnPSghYyYmYVt0aGlzLmdldCgidGFnIildKTtpZihnKXt2YXIgaD1kO2guaW5uZXJIVE1MPWdbMV0rZitnWzJdOwpmb3IodmFyIGU9Z1swXTtlLS07KXtoPWguZmlyc3RDaGlsZDt9dGhpcy5lbXB0eSgpLmFkb3B0KGguY2hpbGROb2Rlcyk7fWVsc2V7dGhpcy5pbm5lckhUTUw9Zjt9fX07Yi5lcmFzZT1iLnNldDtyZXR1cm4gYjt9KSgpOyhmdW5jdGlvbigpe3ZhciBjPWRvY3VtZW50Lmh0bWw7CkVsZW1lbnQuUHJvcGVydGllcy5zdHlsZXM9e3NldDpmdW5jdGlvbihmKXt0aGlzLnNldFN0eWxlcyhmKTt9fTt2YXIgZT0oYy5zdHlsZS5vcGFjaXR5IT1udWxsKTt2YXIgZD0vYWxwaGFcKG9wYWNpdHk9KFtcZC5dKylcKS9pO3ZhciBiPWZ1bmN0aW9uKGcsZil7aWYoIWcuY3VycmVudFN0eWxlfHwhZy5jdXJyZW50U3R5bGUuaGFzTGF5b3V0KXtnLnN0eWxlLnpvb209MTsKfWlmKGUpe2cuc3R5bGUub3BhY2l0eT1mO31lbHNle2Y9KGY9PTEpPyIiOiJhbHBoYShvcGFjaXR5PSIrZioxMDArIikiO3ZhciBoPWcuc3R5bGUuZmlsdGVyfHxnLmdldENvbXB1dGVkU3R5bGUoImZpbHRlciIpfHwiIjtnLnN0eWxlLmZpbHRlcj1kLnRlc3QoaCk/aC5yZXBsYWNlKGQsZik6aCtmOwp9fTtFbGVtZW50LlByb3BlcnRpZXMub3BhY2l0eT17c2V0OmZ1bmN0aW9uKGcpe3ZhciBmPXRoaXMuc3R5bGUudmlzaWJpbGl0eTtpZihnPT0wJiZmIT0iaGlkZGVuIil7dGhpcy5zdHlsZS52aXNpYmlsaXR5PSJoaWRkZW4iO31lbHNle2lmKGchPTAmJmYhPSJ2aXNpYmxlIil7dGhpcy5zdHlsZS52aXNpYmlsaXR5PSJ2aXNpYmxlIjsKfX1iKHRoaXMsZyk7fSxnZXQ6KGUpP2Z1bmN0aW9uKCl7dmFyIGY9dGhpcy5zdHlsZS5vcGFjaXR5fHx0aGlzLmdldENvbXB1dGVkU3R5bGUoIm9wYWNpdHkiKTtyZXR1cm4oZj09IiIpPzE6Zjt9OmZ1bmN0aW9uKCl7dmFyIGYsZz0odGhpcy5zdHlsZS5maWx0ZXJ8fHRoaXMuZ2V0Q29tcHV0ZWRTdHlsZSgiZmlsdGVyIikpOwppZihnKXtmPWcubWF0Y2goZCk7fXJldHVybihmPT1udWxsfHxnPT1udWxsKT8xOihmWzFdLzEwMCk7fX07dmFyIGE9KGMuc3R5bGUuY3NzRmxvYXQ9PW51bGwpPyJzdHlsZUZsb2F0IjoiY3NzRmxvYXQiO0VsZW1lbnQuaW1wbGVtZW50KHtnZXRDb21wdXRlZFN0eWxlOmZ1bmN0aW9uKGgpe2lmKHRoaXMuY3VycmVudFN0eWxlKXtyZXR1cm4gdGhpcy5jdXJyZW50U3R5bGVbaC5jYW1lbENhc2UoKV07Cn12YXIgZz1FbGVtZW50LmdldERvY3VtZW50KHRoaXMpLmRlZmF1bHRWaWV3LGY9Zz9nLmdldENvbXB1dGVkU3R5bGUodGhpcyxudWxsKTpudWxsO3JldHVybihmKT9mLmdldFByb3BlcnR5VmFsdWUoKGg9PWEpPyJmbG9hdCI6aC5oeXBoZW5hdGUoKSk6bnVsbDt9LHNldE9wYWNpdHk6ZnVuY3Rpb24oZil7Yih0aGlzLGYpOwpyZXR1cm4gdGhpczt9LGdldE9wYWNpdHk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXQoIm9wYWNpdHkiKTt9LHNldFN0eWxlOmZ1bmN0aW9uKGcsZil7c3dpdGNoKGcpe2Nhc2Uib3BhY2l0eSI6cmV0dXJuIHRoaXMuc2V0KCJvcGFjaXR5IixwYXJzZUZsb2F0KGYpKTsKY2FzZSJmbG9hdCI6Zz1hO31nPWcuY2FtZWxDYXNlKCk7aWYodHlwZU9mKGYpIT0ic3RyaW5nIil7dmFyIGg9KEVsZW1lbnQuU3R5bGVzW2ddfHwiQCIpLnNwbGl0KCIgIik7Zj1BcnJheS5mcm9tKGYpLm1hcChmdW5jdGlvbihrLGope2lmKCFoW2pdKXtyZXR1cm4iIjsKfXJldHVybih0eXBlT2Yoayk9PSJudW1iZXIiKT9oW2pdLnJlcGxhY2UoIkAiLE1hdGgucm91bmQoaykpOms7fSkuam9pbigiICIpO31lbHNle2lmKGY9PVN0cmluZyhOdW1iZXIoZikpKXtmPU1hdGgucm91bmQoZik7fX10aGlzLnN0eWxlW2ddPWY7cmV0dXJuIHRoaXM7Cn0sZ2V0U3R5bGU6ZnVuY3Rpb24obCl7c3dpdGNoKGwpe2Nhc2Uib3BhY2l0eSI6cmV0dXJuIHRoaXMuZ2V0KCJvcGFjaXR5Iik7Y2FzZSJmbG9hdCI6bD1hO31sPWwuY2FtZWxDYXNlKCk7dmFyIGY9dGhpcy5zdHlsZVtsXTtpZighZnx8bD09InpJbmRleCIpe2Y9W107CmZvcih2YXIgayBpbiBFbGVtZW50LlNob3J0U3R5bGVzKXtpZihsIT1rKXtjb250aW51ZTt9Zm9yKHZhciBqIGluIEVsZW1lbnQuU2hvcnRTdHlsZXNba10pe2YucHVzaCh0aGlzLmdldFN0eWxlKGopKTt9cmV0dXJuIGYuam9pbigiICIpO31mPXRoaXMuZ2V0Q29tcHV0ZWRTdHlsZShsKTsKfWlmKGYpe2Y9U3RyaW5nKGYpO3ZhciBoPWYubWF0Y2goL3JnYmE/XChbXGRccyxdK1wpLyk7aWYoaCl7Zj1mLnJlcGxhY2UoaFswXSxoWzBdLnJnYlRvSGV4KCkpO319aWYoQnJvd3Nlci5vcGVyYXx8KEJyb3dzZXIuaWUmJmlzTmFOKHBhcnNlRmxvYXQoZikpKSl7aWYoKC9eKGhlaWdodHx3aWR0aCkkLykudGVzdChsKSl7dmFyIGc9KGw9PSJ3aWR0aCIpP1sibGVmdCIsInJpZ2h0Il06WyJ0b3AiLCJib3R0b20iXSxpPTA7CmcuZWFjaChmdW5jdGlvbihtKXtpKz10aGlzLmdldFN0eWxlKCJib3JkZXItIittKyItd2lkdGgiKS50b0ludCgpK3RoaXMuZ2V0U3R5bGUoInBhZGRpbmctIittKS50b0ludCgpO30sdGhpcyk7cmV0dXJuIHRoaXNbIm9mZnNldCIrbC5jYXBpdGFsaXplKCldLWkrInB4IjsKfWlmKEJyb3dzZXIub3BlcmEmJlN0cmluZyhmKS5pbmRleE9mKCJweCIpIT0tMSl7cmV0dXJuIGY7fWlmKCgvXmJvcmRlciguKylXaWR0aHxtYXJnaW58cGFkZGluZy8pLnRlc3QobCkpe3JldHVybiIwcHgiO319cmV0dXJuIGY7fSxzZXRTdHlsZXM6ZnVuY3Rpb24oZyl7Zm9yKHZhciBmIGluIGcpe3RoaXMuc2V0U3R5bGUoZixnW2ZdKTsKfXJldHVybiB0aGlzO30sZ2V0U3R5bGVzOmZ1bmN0aW9uKCl7dmFyIGY9e307QXJyYXkuZmxhdHRlbihhcmd1bWVudHMpLmVhY2goZnVuY3Rpb24oZyl7ZltnXT10aGlzLmdldFN0eWxlKGcpO30sdGhpcyk7cmV0dXJuIGY7fX0pO0VsZW1lbnQuU3R5bGVzPXtsZWZ0OiJAcHgiLHRvcDoiQHB4Iixib3R0b206IkBweCIscmlnaHQ6IkBweCIsd2lkdGg6IkBweCIsaGVpZ2h0OiJAcHgiLG1heFdpZHRoOiJAcHgiLG1heEhlaWdodDoiQHB4IixtaW5XaWR0aDoiQHB4IixtaW5IZWlnaHQ6IkBweCIsYmFja2dyb3VuZENvbG9yOiJyZ2IoQCwgQCwgQCkiLGJhY2tncm91bmRQb3NpdGlvbjoiQHB4IEBweCIsY29sb3I6InJnYihALCBALCBAKSIsZm9udFNpemU6IkBweCIsbGV0dGVyU3BhY2luZzoiQHB4IixsaW5lSGVpZ2h0OiJAcHgiLGNsaXA6InJlY3QoQHB4IEBweCBAcHggQHB4KSIsbWFyZ2luOiJAcHggQHB4IEBweCBAcHgiLHBhZGRpbmc6IkBweCBAcHggQHB4IEBweCIsYm9yZGVyOiJAcHggQCByZ2IoQCwgQCwgQCkgQHB4IEAgcmdiKEAsIEAsIEApIEBweCBAIHJnYihALCBALCBAKSIsYm9yZGVyV2lkdGg6IkBweCBAcHggQHB4IEBweCIsYm9yZGVyU3R5bGU6IkAgQCBAIEAiLGJvcmRlckNvbG9yOiJyZ2IoQCwgQCwgQCkgcmdiKEAsIEAsIEApIHJnYihALCBALCBAKSByZ2IoQCwgQCwgQCkiLHpJbmRleDoiQCIsem9vbToiQCIsZm9udFdlaWdodDoiQCIsdGV4dEluZGVudDoiQHB4IixvcGFjaXR5OiJAIn07CkVsZW1lbnQuU3R5bGVzPW5ldyBIYXNoKEVsZW1lbnQuU3R5bGVzKTtFbGVtZW50LlNob3J0U3R5bGVzPXttYXJnaW46e30scGFkZGluZzp7fSxib3JkZXI6e30sYm9yZGVyV2lkdGg6e30sYm9yZGVyU3R5bGU6e30sYm9yZGVyQ29sb3I6e319O1siVG9wIiwiUmlnaHQiLCJCb3R0b20iLCJMZWZ0Il0uZWFjaChmdW5jdGlvbihsKXt2YXIgaz1FbGVtZW50LlNob3J0U3R5bGVzOwp2YXIgZz1FbGVtZW50LlN0eWxlcztbIm1hcmdpbiIsInBhZGRpbmciXS5lYWNoKGZ1bmN0aW9uKG0pe3ZhciBuPW0rbDtrW21dW25dPWdbbl09IkBweCI7fSk7dmFyIGo9ImJvcmRlciIrbDtrLmJvcmRlcltqXT1nW2pdPSJAcHggQCByZ2IoQCwgQCwgQCkiO3ZhciBpPWorIldpZHRoIixmPWorIlN0eWxlIixoPWorIkNvbG9yIjsKa1tqXT17fTtrLmJvcmRlcldpZHRoW2ldPWtbal1baV09Z1tpXT0iQHB4IjtrLmJvcmRlclN0eWxlW2ZdPWtbal1bZl09Z1tmXT0iQCI7ay5ib3JkZXJDb2xvcltoXT1rW2pdW2hdPWdbaF09InJnYihALCBALCBAKSI7fSk7fSkuY2FsbCh0aGlzKTsoZnVuY3Rpb24oKXtFbGVtZW50LlByb3BlcnRpZXMuZXZlbnRzPXtzZXQ6ZnVuY3Rpb24oYil7dGhpcy5hZGRFdmVudHMoYik7Cn19O1tFbGVtZW50LFdpbmRvdyxEb2N1bWVudF0uaW52b2tlKCJpbXBsZW1lbnQiLHthZGRFdmVudDpmdW5jdGlvbihmLGgpe3ZhciBpPXRoaXMucmV0cmlldmUoImV2ZW50cyIse30pO2lmKCFpW2ZdKXtpW2ZdPXtrZXlzOltdLHZhbHVlczpbXX07fWlmKGlbZl0ua2V5cy5jb250YWlucyhoKSl7cmV0dXJuIHRoaXM7Cn1pW2ZdLmtleXMucHVzaChoKTt2YXIgZz1mLGI9RWxlbWVudC5FdmVudHNbZl0sZD1oLGo9dGhpcztpZihiKXtpZihiLm9uQWRkKXtiLm9uQWRkLmNhbGwodGhpcyxoKTt9aWYoYi5jb25kaXRpb24pe2Q9ZnVuY3Rpb24oayl7aWYoYi5jb25kaXRpb24uY2FsbCh0aGlzLGspKXtyZXR1cm4gaC5jYWxsKHRoaXMsayk7Cn1yZXR1cm4gdHJ1ZTt9O31nPWIuYmFzZXx8Zzt9dmFyIGU9ZnVuY3Rpb24oKXtyZXR1cm4gaC5jYWxsKGopO307dmFyIGM9RWxlbWVudC5OYXRpdmVFdmVudHNbZ107aWYoYyl7aWYoYz09Mil7ZT1mdW5jdGlvbihrKXtrPW5ldyBFdmVudChrLGouZ2V0V2luZG93KCkpOwppZihkLmNhbGwoaixrKT09PWZhbHNlKXtrLnN0b3AoKTt9fTt9dGhpcy5hZGRMaXN0ZW5lcihnLGUsYXJndW1lbnRzWzJdKTt9aVtmXS52YWx1ZXMucHVzaChlKTtyZXR1cm4gdGhpczt9LHJlbW92ZUV2ZW50OmZ1bmN0aW9uKGUsZCl7dmFyIGM9dGhpcy5yZXRyaWV2ZSgiZXZlbnRzIik7CmlmKCFjfHwhY1tlXSl7cmV0dXJuIHRoaXM7fXZhciBoPWNbZV07dmFyIGI9aC5rZXlzLmluZGV4T2YoZCk7aWYoYj09LTEpe3JldHVybiB0aGlzO312YXIgZz1oLnZhbHVlc1tiXTtkZWxldGUgaC5rZXlzW2JdO2RlbGV0ZSBoLnZhbHVlc1tiXTt2YXIgZj1FbGVtZW50LkV2ZW50c1tlXTsKaWYoZil7aWYoZi5vblJlbW92ZSl7Zi5vblJlbW92ZS5jYWxsKHRoaXMsZCk7fWU9Zi5iYXNlfHxlO31yZXR1cm4oRWxlbWVudC5OYXRpdmVFdmVudHNbZV0pP3RoaXMucmVtb3ZlTGlzdGVuZXIoZSxnLGFyZ3VtZW50c1syXSk6dGhpczt9LGFkZEV2ZW50czpmdW5jdGlvbihiKXtmb3IodmFyIGMgaW4gYil7dGhpcy5hZGRFdmVudChjLGJbY10pOwp9cmV0dXJuIHRoaXM7fSxyZW1vdmVFdmVudHM6ZnVuY3Rpb24oYil7dmFyIGQ7aWYodHlwZU9mKGIpPT0ib2JqZWN0Iil7Zm9yKGQgaW4gYil7dGhpcy5yZW1vdmVFdmVudChkLGJbZF0pO31yZXR1cm4gdGhpczt9dmFyIGM9dGhpcy5yZXRyaWV2ZSgiZXZlbnRzIik7CmlmKCFjKXtyZXR1cm4gdGhpczt9aWYoIWIpe2ZvcihkIGluIGMpe3RoaXMucmVtb3ZlRXZlbnRzKGQpO310aGlzLmVsaW1pbmF0ZSgiZXZlbnRzIik7fWVsc2V7aWYoY1tiXSl7Y1tiXS5rZXlzLmVhY2goZnVuY3Rpb24oZSl7dGhpcy5yZW1vdmVFdmVudChiLGUpO30sdGhpcyk7CmRlbGV0ZSBjW2JdO319cmV0dXJuIHRoaXM7fSxmaXJlRXZlbnQ6ZnVuY3Rpb24oZSxjLGIpe3ZhciBkPXRoaXMucmV0cmlldmUoImV2ZW50cyIpO2lmKCFkfHwhZFtlXSl7cmV0dXJuIHRoaXM7fWM9QXJyYXkuZnJvbShjKTtkW2VdLmtleXMuZWFjaChmdW5jdGlvbihmKXtpZihiKXtmLmRlbGF5KGIsdGhpcyxjKTsKfWVsc2V7Zi5hcHBseSh0aGlzLGMpO319LHRoaXMpO3JldHVybiB0aGlzO30sY2xvbmVFdmVudHM6ZnVuY3Rpb24oZSxkKXtlPWRvY3VtZW50LmlkKGUpO3ZhciBjPWUucmV0cmlldmUoImV2ZW50cyIpO2lmKCFjKXtyZXR1cm4gdGhpczt9aWYoIWQpe2Zvcih2YXIgYiBpbiBjKXt0aGlzLmNsb25lRXZlbnRzKGUsYik7Cn19ZWxzZXtpZihjW2RdKXtjW2RdLmtleXMuZWFjaChmdW5jdGlvbihmKXt0aGlzLmFkZEV2ZW50KGQsZik7fSx0aGlzKTt9fXJldHVybiB0aGlzO319KTtFbGVtZW50Lk5hdGl2ZUV2ZW50cz17Y2xpY2s6MixkYmxjbGljazoyLG1vdXNldXA6Mixtb3VzZWRvd246Mixjb250ZXh0bWVudToyLG1vdXNld2hlZWw6MixET01Nb3VzZVNjcm9sbDoyLG1vdXNlb3ZlcjoyLG1vdXNlb3V0OjIsbW91c2Vtb3ZlOjIsc2VsZWN0c3RhcnQ6MixzZWxlY3RlbmQ6MixrZXlkb3duOjIsa2V5cHJlc3M6MixrZXl1cDoyLG9yaWVudGF0aW9uY2hhbmdlOjIsdG91Y2hzdGFydDoyLHRvdWNobW92ZToyLHRvdWNoZW5kOjIsdG91Y2hjYW5jZWw6MixnZXN0dXJlc3RhcnQ6MixnZXN0dXJlY2hhbmdlOjIsZ2VzdHVyZWVuZDoyLGZvY3VzOjIsYmx1cjoyLGNoYW5nZToyLHJlc2V0OjIsc2VsZWN0OjIsc3VibWl0OjIsbG9hZDoyLHVubG9hZDoxLGJlZm9yZXVubG9hZDoyLHJlc2l6ZToxLG1vdmU6MSxET01Db250ZW50TG9hZGVkOjEscmVhZHlzdGF0ZWNoYW5nZToxLGVycm9yOjEsYWJvcnQ6MSxzY3JvbGw6MX07CnZhciBhPWZ1bmN0aW9uKGIpe3ZhciBjPWIucmVsYXRlZFRhcmdldDtpZihjPT1udWxsKXtyZXR1cm4gdHJ1ZTt9aWYoIWMpe3JldHVybiBmYWxzZTt9cmV0dXJuKGMhPXRoaXMmJmMucHJlZml4IT0ieHVsIiYmdHlwZU9mKHRoaXMpIT0iZG9jdW1lbnQiJiYhdGhpcy5jb250YWlucyhjKSk7Cn07RWxlbWVudC5FdmVudHM9e21vdXNlZW50ZXI6e2Jhc2U6Im1vdXNlb3ZlciIsY29uZGl0aW9uOmF9LG1vdXNlbGVhdmU6e2Jhc2U6Im1vdXNlb3V0Iixjb25kaXRpb246YX0sbW91c2V3aGVlbDp7YmFzZTooQnJvd3Nlci5maXJlZm94KT8iRE9NTW91c2VTY3JvbGwiOiJtb3VzZXdoZWVsIn19OwpFbGVtZW50LkV2ZW50cz1uZXcgSGFzaChFbGVtZW50LkV2ZW50cyk7fSkuY2FsbCh0aGlzKTsoZnVuY3Rpb24oKXt2YXIgaD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKSxlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO2guc3R5bGUuaGVpZ2h0PSIwIjsKaC5hcHBlbmRDaGlsZChlKTt2YXIgZD0oZS5vZmZzZXRQYXJlbnQ9PT1oKTtoPWU9bnVsbDt2YXIgbD1mdW5jdGlvbihtKXtyZXR1cm4gayhtLCJwb3NpdGlvbiIpIT0ic3RhdGljInx8YShtKTt9O3ZhciBpPWZ1bmN0aW9uKG0pe3JldHVybiBsKG0pfHwoL14oPzp0YWJsZXx0ZHx0aCkkL2kpLnRlc3QobS50YWdOYW1lKTsKfTtFbGVtZW50LmltcGxlbWVudCh7c2Nyb2xsVG86ZnVuY3Rpb24obSxuKXtpZihhKHRoaXMpKXt0aGlzLmdldFdpbmRvdygpLnNjcm9sbFRvKG0sbik7fWVsc2V7dGhpcy5zY3JvbGxMZWZ0PW07dGhpcy5zY3JvbGxUb3A9bjt9cmV0dXJuIHRoaXM7fSxnZXRTaXplOmZ1bmN0aW9uKCl7aWYoYSh0aGlzKSl7cmV0dXJuIHRoaXMuZ2V0V2luZG93KCkuZ2V0U2l6ZSgpOwp9cmV0dXJue3g6dGhpcy5vZmZzZXRXaWR0aCx5OnRoaXMub2Zmc2V0SGVpZ2h0fTt9LGdldFNjcm9sbFNpemU6ZnVuY3Rpb24oKXtpZihhKHRoaXMpKXtyZXR1cm4gdGhpcy5nZXRXaW5kb3coKS5nZXRTY3JvbGxTaXplKCk7fXJldHVybnt4OnRoaXMuc2Nyb2xsV2lkdGgseTp0aGlzLnNjcm9sbEhlaWdodH07Cn0sZ2V0U2Nyb2xsOmZ1bmN0aW9uKCl7aWYoYSh0aGlzKSl7cmV0dXJuIHRoaXMuZ2V0V2luZG93KCkuZ2V0U2Nyb2xsKCk7fXJldHVybnt4OnRoaXMuc2Nyb2xsTGVmdCx5OnRoaXMuc2Nyb2xsVG9wfTt9LGdldFNjcm9sbHM6ZnVuY3Rpb24oKXt2YXIgbj10aGlzLnBhcmVudE5vZGUsbT17eDowLHk6MH07CndoaWxlKG4mJiFhKG4pKXttLngrPW4uc2Nyb2xsTGVmdDttLnkrPW4uc2Nyb2xsVG9wO249bi5wYXJlbnROb2RlO31yZXR1cm4gbTt9LGdldE9mZnNldFBhcmVudDpkP2Z1bmN0aW9uKCl7dmFyIG09dGhpcztpZihhKG0pfHxrKG0sInBvc2l0aW9uIik9PSJmaXhlZCIpe3JldHVybiBudWxsOwp9dmFyIG49KGsobSwicG9zaXRpb24iKT09InN0YXRpYyIpP2k6bDt3aGlsZSgobT1tLnBhcmVudE5vZGUpKXtpZihuKG0pKXtyZXR1cm4gbTt9fXJldHVybiBudWxsO306ZnVuY3Rpb24oKXt2YXIgbT10aGlzO2lmKGEobSl8fGsobSwicG9zaXRpb24iKT09ImZpeGVkIil7cmV0dXJuIG51bGw7Cn10cnl7cmV0dXJuIG0ub2Zmc2V0UGFyZW50O31jYXRjaChuKXt9cmV0dXJuIG51bGw7fSxnZXRPZmZzZXRzOmZ1bmN0aW9uKCl7aWYodGhpcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QmJiFCcm93c2VyLlBsYXRmb3JtLmlvcyl7dmFyIHI9dGhpcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxvPWRvY3VtZW50LmlkKHRoaXMuZ2V0RG9jdW1lbnQoKS5kb2N1bWVudEVsZW1lbnQpLHE9by5nZXRTY3JvbGwoKSx0PXRoaXMuZ2V0U2Nyb2xscygpLHM9KGsodGhpcywicG9zaXRpb24iKT09ImZpeGVkIik7CnJldHVybnt4OnIubGVmdC50b0ludCgpK3QueCsoKHMpPzA6cS54KS1vLmNsaWVudExlZnQseTpyLnRvcC50b0ludCgpK3QueSsoKHMpPzA6cS55KS1vLmNsaWVudFRvcH07fXZhciBuPXRoaXMsbT17eDowLHk6MH07aWYoYSh0aGlzKSl7cmV0dXJuIG07fXdoaWxlKG4mJiFhKG4pKXttLngrPW4ub2Zmc2V0TGVmdDsKbS55Kz1uLm9mZnNldFRvcDtpZihCcm93c2VyLmZpcmVmb3gpe2lmKCFjKG4pKXttLngrPWIobik7bS55Kz1nKG4pO312YXIgcD1uLnBhcmVudE5vZGU7aWYocCYmayhwLCJvdmVyZmxvdyIpIT0idmlzaWJsZSIpe20ueCs9YihwKTttLnkrPWcocCk7fX1lbHNle2lmKG4hPXRoaXMmJkJyb3dzZXIuc2FmYXJpKXttLngrPWIobik7Cm0ueSs9ZyhuKTt9fW49bi5vZmZzZXRQYXJlbnQ7fWlmKEJyb3dzZXIuZmlyZWZveCYmIWModGhpcykpe20ueC09Yih0aGlzKTttLnktPWcodGhpcyk7fXJldHVybiBtO30sZ2V0UG9zaXRpb246ZnVuY3Rpb24ocCl7aWYoYSh0aGlzKSl7cmV0dXJue3g6MCx5OjB9O312YXIgcT10aGlzLmdldE9mZnNldHMoKSxuPXRoaXMuZ2V0U2Nyb2xscygpOwp2YXIgbT17eDpxLngtbi54LHk6cS55LW4ueX07aWYocCYmKHA9ZG9jdW1lbnQuaWQocCkpKXt2YXIgbz1wLmdldFBvc2l0aW9uKCk7cmV0dXJue3g6bS54LW8ueC1iKHApLHk6bS55LW8ueS1nKHApfTt9cmV0dXJuIG07fSxnZXRDb29yZGluYXRlczpmdW5jdGlvbihvKXtpZihhKHRoaXMpKXtyZXR1cm4gdGhpcy5nZXRXaW5kb3coKS5nZXRDb29yZGluYXRlcygpOwp9dmFyIG09dGhpcy5nZXRQb3NpdGlvbihvKSxuPXRoaXMuZ2V0U2l6ZSgpO3ZhciBwPXtsZWZ0Om0ueCx0b3A6bS55LHdpZHRoOm4ueCxoZWlnaHQ6bi55fTtwLnJpZ2h0PXAubGVmdCtwLndpZHRoO3AuYm90dG9tPXAudG9wK3AuaGVpZ2h0O3JldHVybiBwO30sY29tcHV0ZVBvc2l0aW9uOmZ1bmN0aW9uKG0pe3JldHVybntsZWZ0Om0ueC1qKHRoaXMsIm1hcmdpbi1sZWZ0IiksdG9wOm0ueS1qKHRoaXMsIm1hcmdpbi10b3AiKX07Cn0sc2V0UG9zaXRpb246ZnVuY3Rpb24obSl7cmV0dXJuIHRoaXMuc2V0U3R5bGVzKHRoaXMuY29tcHV0ZVBvc2l0aW9uKG0pKTt9fSk7W0RvY3VtZW50LFdpbmRvd10uaW52b2tlKCJpbXBsZW1lbnQiLHtnZXRTaXplOmZ1bmN0aW9uKCl7dmFyIG09Zih0aGlzKTtyZXR1cm57eDptLmNsaWVudFdpZHRoLHk6bS5jbGllbnRIZWlnaHR9Owp9LGdldFNjcm9sbDpmdW5jdGlvbigpe3ZhciBuPXRoaXMuZ2V0V2luZG93KCksbT1mKHRoaXMpO3JldHVybnt4Om4ucGFnZVhPZmZzZXR8fG0uc2Nyb2xsTGVmdCx5Om4ucGFnZVlPZmZzZXR8fG0uc2Nyb2xsVG9wfTt9LGdldFNjcm9sbFNpemU6ZnVuY3Rpb24oKXt2YXIgbz1mKHRoaXMpLG49dGhpcy5nZXRTaXplKCksbT10aGlzLmdldERvY3VtZW50KCkuYm9keTsKcmV0dXJue3g6TWF0aC5tYXgoby5zY3JvbGxXaWR0aCxtLnNjcm9sbFdpZHRoLG4ueCkseTpNYXRoLm1heChvLnNjcm9sbEhlaWdodCxtLnNjcm9sbEhlaWdodCxuLnkpfTt9LGdldFBvc2l0aW9uOmZ1bmN0aW9uKCl7cmV0dXJue3g6MCx5OjB9O30sZ2V0Q29vcmRpbmF0ZXM6ZnVuY3Rpb24oKXt2YXIgbT10aGlzLmdldFNpemUoKTsKcmV0dXJue3RvcDowLGxlZnQ6MCxib3R0b206bS55LHJpZ2h0Om0ueCxoZWlnaHQ6bS55LHdpZHRoOm0ueH07fX0pO3ZhciBrPUVsZW1lbnQuZ2V0Q29tcHV0ZWRTdHlsZTtmdW5jdGlvbiBqKG0sbil7cmV0dXJuIGsobSxuKS50b0ludCgpfHwwO31mdW5jdGlvbiBjKG0pe3JldHVybiBrKG0sIi1tb3otYm94LXNpemluZyIpPT0iYm9yZGVyLWJveCI7Cn1mdW5jdGlvbiBnKG0pe3JldHVybiBqKG0sImJvcmRlci10b3Atd2lkdGgiKTt9ZnVuY3Rpb24gYihtKXtyZXR1cm4gaihtLCJib3JkZXItbGVmdC13aWR0aCIpO31mdW5jdGlvbiBhKG0pe3JldHVybigvXig/OmJvZHl8aHRtbCkkL2kpLnRlc3QobS50YWdOYW1lKTsKfWZ1bmN0aW9uIGYobSl7dmFyIG49bS5nZXREb2N1bWVudCgpO3JldHVybighbi5jb21wYXRNb2RlfHxuLmNvbXBhdE1vZGU9PSJDU1MxQ29tcGF0Iik/bi5odG1sOm4uYm9keTt9fSkuY2FsbCh0aGlzKTtFbGVtZW50LmFsaWFzKHtwb3NpdGlvbjoic2V0UG9zaXRpb24ifSk7CltXaW5kb3csRG9jdW1lbnQsRWxlbWVudF0uaW52b2tlKCJpbXBsZW1lbnQiLHtnZXRIZWlnaHQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRTaXplKCkueTt9LGdldFdpZHRoOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0U2l6ZSgpLng7fSxnZXRTY3JvbGxUb3A6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRTY3JvbGwoKS55Owp9LGdldFNjcm9sbExlZnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRTY3JvbGwoKS54O30sZ2V0U2Nyb2xsSGVpZ2h0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0U2Nyb2xsU2l6ZSgpLnk7fSxnZXRTY3JvbGxXaWR0aDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldFNjcm9sbFNpemUoKS54Owp9LGdldFRvcDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldFBvc2l0aW9uKCkueTt9LGdldExlZnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRQb3NpdGlvbigpLng7fX0pOyhmdW5jdGlvbigpe3ZhciBmPXRoaXMuRng9bmV3IENsYXNzKHtJbXBsZW1lbnRzOltDaGFpbixFdmVudHMsT3B0aW9uc10sb3B0aW9uczp7ZnBzOjYwLHVuaXQ6ZmFsc2UsZHVyYXRpb246NTAwLGZyYW1lczpudWxsLGZyYW1lU2tpcDp0cnVlLGxpbms6Imlnbm9yZSJ9LGluaXRpYWxpemU6ZnVuY3Rpb24oZyl7dGhpcy5zdWJqZWN0PXRoaXMuc3ViamVjdHx8dGhpczsKdGhpcy5zZXRPcHRpb25zKGcpO30sZ2V0VHJhbnNpdGlvbjpmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihnKXtyZXR1cm4gLShNYXRoLmNvcyhNYXRoLlBJKmcpLTEpLzI7fTt9LHN0ZXA6ZnVuY3Rpb24oZyl7aWYodGhpcy5vcHRpb25zLmZyYW1lU2tpcCl7dmFyIGg9KHRoaXMudGltZSE9bnVsbCk/KGctdGhpcy50aW1lKTowLGk9aC90aGlzLmZyYW1lSW50ZXJ2YWw7CnRoaXMudGltZT1nO3RoaXMuZnJhbWUrPWk7fWVsc2V7dGhpcy5mcmFtZSsrO31pZih0aGlzLmZyYW1lPHRoaXMuZnJhbWVzKXt2YXIgaj10aGlzLnRyYW5zaXRpb24odGhpcy5mcmFtZS90aGlzLmZyYW1lcyk7dGhpcy5zZXQodGhpcy5jb21wdXRlKHRoaXMuZnJvbSx0aGlzLnRvLGopKTsKfWVsc2V7dGhpcy5mcmFtZT10aGlzLmZyYW1lczt0aGlzLnNldCh0aGlzLmNvbXB1dGUodGhpcy5mcm9tLHRoaXMudG8sMSkpO3RoaXMuc3RvcCgpO319LHNldDpmdW5jdGlvbihnKXtyZXR1cm4gZzt9LGNvbXB1dGU6ZnVuY3Rpb24oaSxoLGcpe3JldHVybiBmLmNvbXB1dGUoaSxoLGcpOwp9LGNoZWNrOmZ1bmN0aW9uKCl7aWYoIXRoaXMuaXNSdW5uaW5nKCkpe3JldHVybiB0cnVlO31zd2l0Y2godGhpcy5vcHRpb25zLmxpbmspe2Nhc2UiY2FuY2VsIjp0aGlzLmNhbmNlbCgpO3JldHVybiB0cnVlO2Nhc2UiY2hhaW4iOnRoaXMuY2hhaW4odGhpcy5jYWxsZXIucGFzcyhhcmd1bWVudHMsdGhpcykpOwpyZXR1cm4gZmFsc2U7fXJldHVybiBmYWxzZTt9LHN0YXJ0OmZ1bmN0aW9uKGssail7aWYoIXRoaXMuY2hlY2soayxqKSl7cmV0dXJuIHRoaXM7fXRoaXMuZnJvbT1rO3RoaXMudG89ajt0aGlzLmZyYW1lPSh0aGlzLm9wdGlvbnMuZnJhbWVTa2lwKT8wOi0xO3RoaXMudGltZT1udWxsOwp0aGlzLnRyYW5zaXRpb249dGhpcy5nZXRUcmFuc2l0aW9uKCk7dmFyIGk9dGhpcy5vcHRpb25zLmZyYW1lcyxoPXRoaXMub3B0aW9ucy5mcHMsZz10aGlzLm9wdGlvbnMuZHVyYXRpb247dGhpcy5kdXJhdGlvbj1mLkR1cmF0aW9uc1tnXXx8Zy50b0ludCgpO3RoaXMuZnJhbWVJbnRlcnZhbD0xMDAwL2g7CnRoaXMuZnJhbWVzPWl8fE1hdGgucm91bmQodGhpcy5kdXJhdGlvbi90aGlzLmZyYW1lSW50ZXJ2YWwpO3RoaXMuZmlyZUV2ZW50KCJzdGFydCIsdGhpcy5zdWJqZWN0KTtiLmNhbGwodGhpcyxoKTtyZXR1cm4gdGhpczt9LHN0b3A6ZnVuY3Rpb24oKXtpZih0aGlzLmlzUnVubmluZygpKXt0aGlzLnRpbWU9bnVsbDsKZC5jYWxsKHRoaXMsdGhpcy5vcHRpb25zLmZwcyk7aWYodGhpcy5mcmFtZXM9PXRoaXMuZnJhbWUpe3RoaXMuZmlyZUV2ZW50KCJjb21wbGV0ZSIsdGhpcy5zdWJqZWN0KTtpZighdGhpcy5jYWxsQ2hhaW4oKSl7dGhpcy5maXJlRXZlbnQoImNoYWluQ29tcGxldGUiLHRoaXMuc3ViamVjdCk7Cn19ZWxzZXt0aGlzLmZpcmVFdmVudCgic3RvcCIsdGhpcy5zdWJqZWN0KTt9fXJldHVybiB0aGlzO30sY2FuY2VsOmZ1bmN0aW9uKCl7aWYodGhpcy5pc1J1bm5pbmcoKSl7dGhpcy50aW1lPW51bGw7ZC5jYWxsKHRoaXMsdGhpcy5vcHRpb25zLmZwcyk7dGhpcy5mcmFtZT10aGlzLmZyYW1lczsKdGhpcy5maXJlRXZlbnQoImNhbmNlbCIsdGhpcy5zdWJqZWN0KS5jbGVhckNoYWluKCk7fXJldHVybiB0aGlzO30scGF1c2U6ZnVuY3Rpb24oKXtpZih0aGlzLmlzUnVubmluZygpKXt0aGlzLnRpbWU9bnVsbDtkLmNhbGwodGhpcyx0aGlzLm9wdGlvbnMuZnBzKTt9cmV0dXJuIHRoaXM7Cn0scmVzdW1lOmZ1bmN0aW9uKCl7aWYoKHRoaXMuZnJhbWU8dGhpcy5mcmFtZXMpJiYhdGhpcy5pc1J1bm5pbmcoKSl7Yi5jYWxsKHRoaXMsdGhpcy5vcHRpb25zLmZwcyk7fXJldHVybiB0aGlzO30saXNSdW5uaW5nOmZ1bmN0aW9uKCl7dmFyIGc9ZVt0aGlzLm9wdGlvbnMuZnBzXTsKcmV0dXJuIGcmJmcuY29udGFpbnModGhpcyk7fX0pO2YuY29tcHV0ZT1mdW5jdGlvbihpLGgsZyl7cmV0dXJuKGgtaSkqZytpO307Zi5EdXJhdGlvbnM9eyJzaG9ydCI6MjUwLG5vcm1hbDo1MDAsImxvbmciOjEwMDB9O3ZhciBlPXt9LGM9e307dmFyIGE9ZnVuY3Rpb24oKXt2YXIgaD1EYXRlLm5vdygpOwpmb3IodmFyIGo9dGhpcy5sZW5ndGg7ai0tOyl7dmFyIGc9dGhpc1tqXTtpZihnKXtnLnN0ZXAoaCk7fX19O3ZhciBiPWZ1bmN0aW9uKGgpe3ZhciBnPWVbaF18fChlW2hdPVtdKTtnLnB1c2godGhpcyk7aWYoIWNbaF0pe2NbaF09YS5wZXJpb2RpY2FsKE1hdGgucm91bmQoMTAwMC9oKSxnKTsKfX07dmFyIGQ9ZnVuY3Rpb24oaCl7dmFyIGc9ZVtoXTtpZihnKXtnLmVyYXNlKHRoaXMpO2lmKCFnLmxlbmd0aCYmY1toXSl7ZGVsZXRlIGVbaF07Y1toXT1jbGVhckludGVydmFsKGNbaF0pO319fTt9KS5jYWxsKHRoaXMpO0Z4LkNTUz1uZXcgQ2xhc3Moe0V4dGVuZHM6RngscHJlcGFyZTpmdW5jdGlvbihjLGQsYil7Yj1BcnJheS5mcm9tKGIpOwppZihiWzFdPT1udWxsKXtiWzFdPWJbMF07YlswXT1jLmdldFN0eWxlKGQpO312YXIgYT1iLm1hcCh0aGlzLnBhcnNlKTtyZXR1cm57ZnJvbTphWzBdLHRvOmFbMV19O30scGFyc2U6ZnVuY3Rpb24oYSl7YT1GdW5jdGlvbi5mcm9tKGEpKCk7YT0odHlwZW9mIGE9PSJzdHJpbmciKT9hLnNwbGl0KCIgIik6QXJyYXkuZnJvbShhKTsKcmV0dXJuIGEubWFwKGZ1bmN0aW9uKGMpe2M9U3RyaW5nKGMpO3ZhciBiPWZhbHNlO09iamVjdC5lYWNoKEZ4LkNTUy5QYXJzZXJzLGZ1bmN0aW9uKGYsZSl7aWYoYil7cmV0dXJuO312YXIgZD1mLnBhcnNlKGMpO2lmKGR8fGQ9PT0wKXtiPXt2YWx1ZTpkLHBhcnNlcjpmfTsKfX0pO2I9Ynx8e3ZhbHVlOmMscGFyc2VyOkZ4LkNTUy5QYXJzZXJzLlN0cmluZ307cmV0dXJuIGI7fSk7fSxjb21wdXRlOmZ1bmN0aW9uKGQsYyxiKXt2YXIgYT1bXTsoTWF0aC5taW4oZC5sZW5ndGgsYy5sZW5ndGgpKS50aW1lcyhmdW5jdGlvbihlKXthLnB1c2goe3ZhbHVlOmRbZV0ucGFyc2VyLmNvbXB1dGUoZFtlXS52YWx1ZSxjW2VdLnZhbHVlLGIpLHBhcnNlcjpkW2VdLnBhcnNlcn0pOwp9KTthLiRmYW1pbHk9RnVuY3Rpb24uZnJvbSgiZng6Y3NzOnZhbHVlIik7cmV0dXJuIGE7fSxzZXJ2ZTpmdW5jdGlvbihjLGIpe2lmKHR5cGVPZihjKSE9ImZ4OmNzczp2YWx1ZSIpe2M9dGhpcy5wYXJzZShjKTt9dmFyIGE9W107Yy5lYWNoKGZ1bmN0aW9uKGQpe2E9YS5jb25jYXQoZC5wYXJzZXIuc2VydmUoZC52YWx1ZSxiKSk7Cn0pO3JldHVybiBhO30scmVuZGVyOmZ1bmN0aW9uKGEsZCxjLGIpe2Euc2V0U3R5bGUoZCx0aGlzLnNlcnZlKGMsYikpO30sc2VhcmNoOmZ1bmN0aW9uKGEpe2lmKEZ4LkNTUy5DYWNoZVthXSl7cmV0dXJuIEZ4LkNTUy5DYWNoZVthXTt9dmFyIGM9e30sYj1uZXcgUmVnRXhwKCJeIithLmVzY2FwZVJlZ0V4cCgpKyIkIik7CkFycmF5LmVhY2goZG9jdW1lbnQuc3R5bGVTaGVldHMsZnVuY3Rpb24oZixlKXt2YXIgZD1mLmhyZWY7aWYoZCYmZC5jb250YWlucygiOi8vIikmJiFkLmNvbnRhaW5zKGRvY3VtZW50LmRvbWFpbikpe3JldHVybjt9dmFyIGc9Zi5ydWxlc3x8Zi5jc3NSdWxlcztBcnJheS5lYWNoKGcsZnVuY3Rpb24oayxoKXtpZighay5zdHlsZSl7cmV0dXJuOwp9dmFyIGo9KGsuc2VsZWN0b3JUZXh0KT9rLnNlbGVjdG9yVGV4dC5yZXBsYWNlKC9eXHcrLyxmdW5jdGlvbihpKXtyZXR1cm4gaS50b0xvd2VyQ2FzZSgpO30pOm51bGw7aWYoIWp8fCFiLnRlc3Qoaikpe3JldHVybjt9T2JqZWN0LmVhY2goRWxlbWVudC5TdHlsZXMsZnVuY3Rpb24obCxpKXtpZighay5zdHlsZVtpXXx8RWxlbWVudC5TaG9ydFN0eWxlc1tpXSl7cmV0dXJuOwp9bD1TdHJpbmcoay5zdHlsZVtpXSk7Y1tpXT0oKC9ecmdiLykudGVzdChsKSk/bC5yZ2JUb0hleCgpOmw7fSk7fSk7fSk7cmV0dXJuIEZ4LkNTUy5DYWNoZVthXT1jO319KTtGeC5DU1MuQ2FjaGU9e307RnguQ1NTLlBhcnNlcnM9e0NvbG9yOntwYXJzZTpmdW5jdGlvbihhKXtpZihhLm1hdGNoKC9eI1swLTlhLWZdezMsNn0kL2kpKXtyZXR1cm4gYS5oZXhUb1JnYih0cnVlKTsKfXJldHVybigoYT1hLm1hdGNoKC8oXGQrKSxccyooXGQrKSxccyooXGQrKS8pKSk/W2FbMV0sYVsyXSxhWzNdXTpmYWxzZTt9LGNvbXB1dGU6ZnVuY3Rpb24oYyxiLGEpe3JldHVybiBjLm1hcChmdW5jdGlvbihlLGQpe3JldHVybiBNYXRoLnJvdW5kKEZ4LmNvbXB1dGUoY1tkXSxiW2RdLGEpKTsKfSk7fSxzZXJ2ZTpmdW5jdGlvbihhKXtyZXR1cm4gYS5tYXAoTnVtYmVyKTt9fSxOdW1iZXI6e3BhcnNlOnBhcnNlRmxvYXQsY29tcHV0ZTpGeC5jb21wdXRlLHNlcnZlOmZ1bmN0aW9uKGIsYSl7cmV0dXJuKGEpP2IrYTpiO319LFN0cmluZzp7cGFyc2U6RnVuY3Rpb24uZnJvbShmYWxzZSksY29tcHV0ZTpmdW5jdGlvbihiLGEpe3JldHVybiBhOwp9LHNlcnZlOmZ1bmN0aW9uKGEpe3JldHVybiBhO319fTtGeC5DU1MuUGFyc2Vycz1uZXcgSGFzaChGeC5DU1MuUGFyc2Vycyk7RnguVHdlZW49bmV3IENsYXNzKHtFeHRlbmRzOkZ4LkNTUyxpbml0aWFsaXplOmZ1bmN0aW9uKGIsYSl7dGhpcy5lbGVtZW50PXRoaXMuc3ViamVjdD1kb2N1bWVudC5pZChiKTsKdGhpcy5wYXJlbnQoYSk7fSxzZXQ6ZnVuY3Rpb24oYixhKXtpZihhcmd1bWVudHMubGVuZ3RoPT0xKXthPWI7Yj10aGlzLnByb3BlcnR5fHx0aGlzLm9wdGlvbnMucHJvcGVydHk7fXRoaXMucmVuZGVyKHRoaXMuZWxlbWVudCxiLGEsdGhpcy5vcHRpb25zLnVuaXQpOwpyZXR1cm4gdGhpczt9LHN0YXJ0OmZ1bmN0aW9uKGMsZSxkKXtpZighdGhpcy5jaGVjayhjLGUsZCkpe3JldHVybiB0aGlzO312YXIgYj1BcnJheS5mbGF0dGVuKGFyZ3VtZW50cyk7dGhpcy5wcm9wZXJ0eT10aGlzLm9wdGlvbnMucHJvcGVydHl8fGIuc2hpZnQoKTt2YXIgYT10aGlzLnByZXBhcmUodGhpcy5lbGVtZW50LHRoaXMucHJvcGVydHksYik7CnJldHVybiB0aGlzLnBhcmVudChhLmZyb20sYS50byk7fX0pO0VsZW1lbnQuUHJvcGVydGllcy50d2Vlbj17c2V0OmZ1bmN0aW9uKGEpe3RoaXMuZ2V0KCJ0d2VlbiIpLmNhbmNlbCgpLnNldE9wdGlvbnMoYSk7cmV0dXJuIHRoaXM7fSxnZXQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnJldHJpZXZlKCJ0d2VlbiIpOwppZighYSl7YT1uZXcgRnguVHdlZW4odGhpcyx7bGluazoiY2FuY2VsIn0pO3RoaXMuc3RvcmUoInR3ZWVuIixhKTt9cmV0dXJuIGE7fX07RWxlbWVudC5pbXBsZW1lbnQoe3R3ZWVuOmZ1bmN0aW9uKGEsYyxiKXt0aGlzLmdldCgidHdlZW4iKS5zdGFydChhcmd1bWVudHMpOwpyZXR1cm4gdGhpczt9LGZhZGU6ZnVuY3Rpb24oYyl7dmFyIGU9dGhpcy5nZXQoInR3ZWVuIiksZD0ib3BhY2l0eSIsYTtjPVtjLCJ0b2dnbGUiXS5waWNrKCk7c3dpdGNoKGMpe2Nhc2UiaW4iOmUuc3RhcnQoZCwxKTticmVhaztjYXNlIm91dCI6ZS5zdGFydChkLDApOwpicmVhaztjYXNlInNob3ciOmUuc2V0KGQsMSk7YnJlYWs7Y2FzZSJoaWRlIjplLnNldChkLDApO2JyZWFrO2Nhc2UidG9nZ2xlIjp2YXIgYj10aGlzLnJldHJpZXZlKCJmYWRlOmZsYWciLHRoaXMuZ2V0KCJvcGFjaXR5Iik9PTEpO2Uuc3RhcnQoZCwoYik/MDoxKTt0aGlzLnN0b3JlKCJmYWRlOmZsYWciLCFiKTsKYT10cnVlO2JyZWFrO2RlZmF1bHQ6ZS5zdGFydChkLGFyZ3VtZW50cyk7fWlmKCFhKXt0aGlzLmVsaW1pbmF0ZSgiZmFkZTpmbGFnIik7fXJldHVybiB0aGlzO30saGlnaGxpZ2h0OmZ1bmN0aW9uKGMsYSl7aWYoIWEpe2E9dGhpcy5yZXRyaWV2ZSgiaGlnaGxpZ2h0Om9yaWdpbmFsIix0aGlzLmdldFN0eWxlKCJiYWNrZ3JvdW5kLWNvbG9yIikpOwphPShhPT0idHJhbnNwYXJlbnQiKT8iI2ZmZiI6YTt9dmFyIGI9dGhpcy5nZXQoInR3ZWVuIik7Yi5zdGFydCgiYmFja2dyb3VuZC1jb2xvciIsY3x8IiNmZmZmODgiLGEpLmNoYWluKGZ1bmN0aW9uKCl7dGhpcy5zZXRTdHlsZSgiYmFja2dyb3VuZC1jb2xvciIsdGhpcy5yZXRyaWV2ZSgiaGlnaGxpZ2h0Om9yaWdpbmFsIikpOwpiLmNhbGxDaGFpbigpO30uYmluZCh0aGlzKSk7cmV0dXJuIHRoaXM7fX0pO0Z4Lk1vcnBoPW5ldyBDbGFzcyh7RXh0ZW5kczpGeC5DU1MsaW5pdGlhbGl6ZTpmdW5jdGlvbihiLGEpe3RoaXMuZWxlbWVudD10aGlzLnN1YmplY3Q9ZG9jdW1lbnQuaWQoYik7dGhpcy5wYXJlbnQoYSk7Cn0sc2V0OmZ1bmN0aW9uKGEpe2lmKHR5cGVvZiBhPT0ic3RyaW5nIil7YT10aGlzLnNlYXJjaChhKTt9Zm9yKHZhciBiIGluIGEpe3RoaXMucmVuZGVyKHRoaXMuZWxlbWVudCxiLGFbYl0sdGhpcy5vcHRpb25zLnVuaXQpO31yZXR1cm4gdGhpczt9LGNvbXB1dGU6ZnVuY3Rpb24oZSxkLGMpe3ZhciBhPXt9Owpmb3IodmFyIGIgaW4gZSl7YVtiXT10aGlzLnBhcmVudChlW2JdLGRbYl0sYyk7fXJldHVybiBhO30sc3RhcnQ6ZnVuY3Rpb24oYil7aWYoIXRoaXMuY2hlY2soYikpe3JldHVybiB0aGlzO31pZih0eXBlb2YgYj09InN0cmluZyIpe2I9dGhpcy5zZWFyY2goYik7fXZhciBlPXt9LGQ9e307CmZvcih2YXIgYyBpbiBiKXt2YXIgYT10aGlzLnByZXBhcmUodGhpcy5lbGVtZW50LGMsYltjXSk7ZVtjXT1hLmZyb207ZFtjXT1hLnRvO31yZXR1cm4gdGhpcy5wYXJlbnQoZSxkKTt9fSk7RWxlbWVudC5Qcm9wZXJ0aWVzLm1vcnBoPXtzZXQ6ZnVuY3Rpb24oYSl7dGhpcy5nZXQoIm1vcnBoIikuY2FuY2VsKCkuc2V0T3B0aW9ucyhhKTsKcmV0dXJuIHRoaXM7fSxnZXQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnJldHJpZXZlKCJtb3JwaCIpO2lmKCFhKXthPW5ldyBGeC5Nb3JwaCh0aGlzLHtsaW5rOiJjYW5jZWwifSk7dGhpcy5zdG9yZSgibW9ycGgiLGEpO31yZXR1cm4gYTt9fTtFbGVtZW50LmltcGxlbWVudCh7bW9ycGg6ZnVuY3Rpb24oYSl7dGhpcy5nZXQoIm1vcnBoIikuc3RhcnQoYSk7CnJldHVybiB0aGlzO319KTtGeC5pbXBsZW1lbnQoe2dldFRyYW5zaXRpb246ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm9wdGlvbnMudHJhbnNpdGlvbnx8RnguVHJhbnNpdGlvbnMuU2luZS5lYXNlSW5PdXQ7aWYodHlwZW9mIGE9PSJzdHJpbmciKXt2YXIgYj1hLnNwbGl0KCI6Iik7CmE9RnguVHJhbnNpdGlvbnM7YT1hW2JbMF1dfHxhW2JbMF0uY2FwaXRhbGl6ZSgpXTtpZihiWzFdKXthPWFbImVhc2UiK2JbMV0uY2FwaXRhbGl6ZSgpKyhiWzJdP2JbMl0uY2FwaXRhbGl6ZSgpOiIiKV07fX1yZXR1cm4gYTt9fSk7RnguVHJhbnNpdGlvbj1mdW5jdGlvbihjLGIpe2I9QXJyYXkuZnJvbShiKTsKdmFyIGE9ZnVuY3Rpb24oZCl7cmV0dXJuIGMoZCxiKTt9O3JldHVybiBPYmplY3QuYXBwZW5kKGEse2Vhc2VJbjphLGVhc2VPdXQ6ZnVuY3Rpb24oZCl7cmV0dXJuIDEtYygxLWQsYik7fSxlYXNlSW5PdXQ6ZnVuY3Rpb24oZCl7cmV0dXJuKGQ8PTAuNT9jKDIqZCxiKTooMi1jKDIqKDEtZCksYikpKS8yOwp9fSk7fTtGeC5UcmFuc2l0aW9ucz17bGluZWFyOmZ1bmN0aW9uKGEpe3JldHVybiBhO319O0Z4LlRyYW5zaXRpb25zPW5ldyBIYXNoKEZ4LlRyYW5zaXRpb25zKTtGeC5UcmFuc2l0aW9ucy5leHRlbmQ9ZnVuY3Rpb24oYSl7Zm9yKHZhciBiIGluIGEpe0Z4LlRyYW5zaXRpb25zW2JdPW5ldyBGeC5UcmFuc2l0aW9uKGFbYl0pOwp9fTtGeC5UcmFuc2l0aW9ucy5leHRlbmQoe1BvdzpmdW5jdGlvbihiLGEpe3JldHVybiBNYXRoLnBvdyhiLGEmJmFbMF18fDYpO30sRXhwbzpmdW5jdGlvbihhKXtyZXR1cm4gTWF0aC5wb3coMiw4KihhLTEpKTt9LENpcmM6ZnVuY3Rpb24oYSl7cmV0dXJuIDEtTWF0aC5zaW4oTWF0aC5hY29zKGEpKTsKfSxTaW5lOmZ1bmN0aW9uKGEpe3JldHVybiAxLU1hdGguY29zKGEqTWF0aC5QSS8yKTt9LEJhY2s6ZnVuY3Rpb24oYixhKXthPWEmJmFbMF18fDEuNjE4O3JldHVybiBNYXRoLnBvdyhiLDIpKigoYSsxKSpiLWEpO30sQm91bmNlOmZ1bmN0aW9uKGYpe3ZhciBlO2Zvcih2YXIgZD0wLGM9MTsKMTtkKz1jLGMvPTIpe2lmKGY+PSg3LTQqZCkvMTEpe2U9YypjLU1hdGgucG93KCgxMS02KmQtMTEqZikvNCwyKTticmVhazt9fXJldHVybiBlO30sRWxhc3RpYzpmdW5jdGlvbihiLGEpe3JldHVybiBNYXRoLnBvdygyLDEwKi0tYikqTWF0aC5jb3MoMjAqYipNYXRoLlBJKihhJiZhWzBdfHwxKS8zKTsKfX0pO1siUXVhZCIsIkN1YmljIiwiUXVhcnQiLCJRdWludCJdLmVhY2goZnVuY3Rpb24oYixhKXtGeC5UcmFuc2l0aW9uc1tiXT1uZXcgRnguVHJhbnNpdGlvbihmdW5jdGlvbihjKXtyZXR1cm4gTWF0aC5wb3coYyxhKzIpO30pO30pOyhmdW5jdGlvbigpe3ZhciBkPWZ1bmN0aW9uKCl7fSxhPSgib25wcm9ncmVzcyIgaW4gbmV3IEJyb3dzZXIuUmVxdWVzdCk7CnZhciBjPXRoaXMuUmVxdWVzdD1uZXcgQ2xhc3Moe0ltcGxlbWVudHM6W0NoYWluLEV2ZW50cyxPcHRpb25zXSxvcHRpb25zOnt1cmw6IiIsZGF0YToiIixoZWFkZXJzOnsiWC1SZXF1ZXN0ZWQtV2l0aCI6IlhNTEh0dHBSZXF1ZXN0IixBY2NlcHQ6InRleHQvamF2YXNjcmlwdCwgdGV4dC9odG1sLCBhcHBsaWNhdGlvbi94bWwsIHRleHQveG1sLCAqLyoifSxhc3luYzp0cnVlLGZvcm1hdDpmYWxzZSxtZXRob2Q6InBvc3QiLGxpbms6Imlnbm9yZSIsaXNTdWNjZXNzOm51bGwsZW11bGF0aW9uOnRydWUsdXJsRW5jb2RlZDp0cnVlLGVuY29kaW5nOiJ1dGYtOCIsZXZhbFNjcmlwdHM6ZmFsc2UsZXZhbFJlc3BvbnNlOmZhbHNlLHRpbWVvdXQ6MCxub0NhY2hlOmZhbHNlfSxpbml0aWFsaXplOmZ1bmN0aW9uKGUpe3RoaXMueGhyPW5ldyBCcm93c2VyLlJlcXVlc3QoKTsKdGhpcy5zZXRPcHRpb25zKGUpO3RoaXMuaGVhZGVycz10aGlzLm9wdGlvbnMuaGVhZGVyczt9LG9uU3RhdGVDaGFuZ2U6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnhocjtpZihlLnJlYWR5U3RhdGUhPTR8fCF0aGlzLnJ1bm5pbmcpe3JldHVybjt9dGhpcy5ydW5uaW5nPWZhbHNlOwp0aGlzLnN0YXR1cz0wO0Z1bmN0aW9uLmF0dGVtcHQoZnVuY3Rpb24oKXt2YXIgZj1lLnN0YXR1czt0aGlzLnN0YXR1cz0oZj09MTIyMyk/MjA0OmY7fS5iaW5kKHRoaXMpKTtlLm9ucmVhZHlzdGF0ZWNoYW5nZT1kO2lmKGEpe2Uub25wcm9ncmVzcz1lLm9ubG9hZHN0YXJ0PWQ7Cn1jbGVhclRpbWVvdXQodGhpcy50aW1lcik7dGhpcy5yZXNwb25zZT17dGV4dDp0aGlzLnhoci5yZXNwb25zZVRleHR8fCIiLHhtbDp0aGlzLnhoci5yZXNwb25zZVhNTH07aWYodGhpcy5vcHRpb25zLmlzU3VjY2Vzcy5jYWxsKHRoaXMsdGhpcy5zdGF0dXMpKXt0aGlzLnN1Y2Nlc3ModGhpcy5yZXNwb25zZS50ZXh0LHRoaXMucmVzcG9uc2UueG1sKTsKfWVsc2V7dGhpcy5mYWlsdXJlKCk7fX0saXNTdWNjZXNzOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5zdGF0dXM7cmV0dXJuKGU+PTIwMCYmZTwzMDApO30saXNSdW5uaW5nOmZ1bmN0aW9uKCl7cmV0dXJuICEhdGhpcy5ydW5uaW5nO30scHJvY2Vzc1NjcmlwdHM6ZnVuY3Rpb24oZSl7aWYodGhpcy5vcHRpb25zLmV2YWxSZXNwb25zZXx8KC8oZWNtYXxqYXZhKXNjcmlwdC8pLnRlc3QodGhpcy5nZXRIZWFkZXIoIkNvbnRlbnQtdHlwZSIpKSl7cmV0dXJuIEJyb3dzZXIuZXhlYyhlKTsKfXJldHVybiBlLnN0cmlwU2NyaXB0cyh0aGlzLm9wdGlvbnMuZXZhbFNjcmlwdHMpO30sc3VjY2VzczpmdW5jdGlvbihmLGUpe3RoaXMub25TdWNjZXNzKHRoaXMucHJvY2Vzc1NjcmlwdHMoZiksZSk7fSxvblN1Y2Nlc3M6ZnVuY3Rpb24oKXt0aGlzLmZpcmVFdmVudCgiY29tcGxldGUiLGFyZ3VtZW50cykuZmlyZUV2ZW50KCJzdWNjZXNzIixhcmd1bWVudHMpLmNhbGxDaGFpbigpOwp9LGZhaWx1cmU6ZnVuY3Rpb24oKXt0aGlzLm9uRmFpbHVyZSgpO30sb25GYWlsdXJlOmZ1bmN0aW9uKCl7dGhpcy5maXJlRXZlbnQoImNvbXBsZXRlIikuZmlyZUV2ZW50KCJmYWlsdXJlIix0aGlzLnhocik7fSxsb2Fkc3RhcnQ6ZnVuY3Rpb24oZSl7dGhpcy5maXJlRXZlbnQoImxvYWRzdGFydCIsW2UsdGhpcy54aHJdKTsKfSxwcm9ncmVzczpmdW5jdGlvbihlKXt0aGlzLmZpcmVFdmVudCgicHJvZ3Jlc3MiLFtlLHRoaXMueGhyXSk7fSx0aW1lb3V0OmZ1bmN0aW9uKCl7dGhpcy5maXJlRXZlbnQoInRpbWVvdXQiLHRoaXMueGhyKTt9LHNldEhlYWRlcjpmdW5jdGlvbihlLGYpe3RoaXMuaGVhZGVyc1tlXT1mOwpyZXR1cm4gdGhpczt9LGdldEhlYWRlcjpmdW5jdGlvbihlKXtyZXR1cm4gRnVuY3Rpb24uYXR0ZW1wdChmdW5jdGlvbigpe3JldHVybiB0aGlzLnhoci5nZXRSZXNwb25zZUhlYWRlcihlKTt9LmJpbmQodGhpcykpO30sY2hlY2s6ZnVuY3Rpb24oKXtpZighdGhpcy5ydW5uaW5nKXtyZXR1cm4gdHJ1ZTsKfXN3aXRjaCh0aGlzLm9wdGlvbnMubGluayl7Y2FzZSJjYW5jZWwiOnRoaXMuY2FuY2VsKCk7cmV0dXJuIHRydWU7Y2FzZSJjaGFpbiI6dGhpcy5jaGFpbih0aGlzLmNhbGxlci5wYXNzKGFyZ3VtZW50cyx0aGlzKSk7cmV0dXJuIGZhbHNlO31yZXR1cm4gZmFsc2U7fSxzZW5kOmZ1bmN0aW9uKG8pe2lmKCF0aGlzLmNoZWNrKG8pKXtyZXR1cm4gdGhpczsKfXRoaXMub3B0aW9ucy5pc1N1Y2Nlc3M9dGhpcy5vcHRpb25zLmlzU3VjY2Vzc3x8dGhpcy5pc1N1Y2Nlc3M7dGhpcy5ydW5uaW5nPXRydWU7dmFyIGw9dHlwZU9mKG8pO2lmKGw9PSJzdHJpbmcifHxsPT0iZWxlbWVudCIpe289e2RhdGE6b307fXZhciBoPXRoaXMub3B0aW9uczsKbz1PYmplY3QuYXBwZW5kKHtkYXRhOmguZGF0YSx1cmw6aC51cmwsbWV0aG9kOmgubWV0aG9kfSxvKTt2YXIgaj1vLmRhdGEsZj1TdHJpbmcoby51cmwpLGU9by5tZXRob2QudG9Mb3dlckNhc2UoKTtzd2l0Y2godHlwZU9mKGopKXtjYXNlImVsZW1lbnQiOmo9ZG9jdW1lbnQuaWQoaikudG9RdWVyeVN0cmluZygpOwpicmVhaztjYXNlIm9iamVjdCI6Y2FzZSJoYXNoIjpqPU9iamVjdC50b1F1ZXJ5U3RyaW5nKGopO31pZih0aGlzLm9wdGlvbnMuZm9ybWF0KXt2YXIgbT0iZm9ybWF0PSIrdGhpcy5vcHRpb25zLmZvcm1hdDtqPShqKT9tKyImIitqOm07fWlmKHRoaXMub3B0aW9ucy5lbXVsYXRpb24mJiFbImdldCIsInBvc3QiXS5jb250YWlucyhlKSl7dmFyIGs9Il9tZXRob2Q9IitlOwpqPShqKT9rKyImIitqOms7ZT0icG9zdCI7fWlmKHRoaXMub3B0aW9ucy51cmxFbmNvZGVkJiZbInBvc3QiLCJwdXQiXS5jb250YWlucyhlKSl7dmFyIGc9KHRoaXMub3B0aW9ucy5lbmNvZGluZyk/IjsgY2hhcnNldD0iK3RoaXMub3B0aW9ucy5lbmNvZGluZzoiIjt0aGlzLmhlYWRlcnNbIkNvbnRlbnQtdHlwZSJdPSJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiK2c7Cn1pZighZil7Zj1kb2N1bWVudC5sb2NhdGlvbi5wYXRobmFtZTt9dmFyIGk9Zi5sYXN0SW5kZXhPZigiLyIpO2lmKGk+LTEmJihpPWYuaW5kZXhPZigiIyIpKT4tMSl7Zj1mLnN1YnN0cigwLGkpO31pZih0aGlzLm9wdGlvbnMubm9DYWNoZSl7Zis9KGYuY29udGFpbnMoIj8iKT8iJiI6Ij8iKStTdHJpbmcudW5pcXVlSUQoKTsKfWlmKGomJmU9PSJnZXQiKXtmKz0oZi5jb250YWlucygiPyIpPyImIjoiPyIpK2o7aj1udWxsO312YXIgbj10aGlzLnhocjtpZihhKXtuLm9ubG9hZHN0YXJ0PXRoaXMubG9hZHN0YXJ0LmJpbmQodGhpcyk7bi5vbnByb2dyZXNzPXRoaXMucHJvZ3Jlc3MuYmluZCh0aGlzKTsKfW4ub3BlbihlLnRvVXBwZXJDYXNlKCksZix0aGlzLm9wdGlvbnMuYXN5bmMsdGhpcy5vcHRpb25zLnVzZXIsdGhpcy5vcHRpb25zLnBhc3N3b3JkKTtpZih0aGlzLm9wdGlvbnMudXNlciYmIndpdGhDcmVkZW50aWFscyIgaW4gbil7bi53aXRoQ3JlZGVudGlhbHM9dHJ1ZTsKfW4ub25yZWFkeXN0YXRlY2hhbmdlPXRoaXMub25TdGF0ZUNoYW5nZS5iaW5kKHRoaXMpO09iamVjdC5lYWNoKHRoaXMuaGVhZGVycyxmdW5jdGlvbihxLHApe3RyeXtuLnNldFJlcXVlc3RIZWFkZXIocCxxKTt9Y2F0Y2gocil7dGhpcy5maXJlRXZlbnQoImV4Y2VwdGlvbiIsW3AscV0pOwp9fSx0aGlzKTt0aGlzLmZpcmVFdmVudCgicmVxdWVzdCIpO24uc2VuZChqKTtpZighdGhpcy5vcHRpb25zLmFzeW5jKXt0aGlzLm9uU3RhdGVDaGFuZ2UoKTt9aWYodGhpcy5vcHRpb25zLnRpbWVvdXQpe3RoaXMudGltZXI9dGhpcy50aW1lb3V0LmRlbGF5KHRoaXMub3B0aW9ucy50aW1lb3V0LHRoaXMpOwp9cmV0dXJuIHRoaXM7fSxjYW5jZWw6ZnVuY3Rpb24oKXtpZighdGhpcy5ydW5uaW5nKXtyZXR1cm4gdGhpczt9dGhpcy5ydW5uaW5nPWZhbHNlO3ZhciBlPXRoaXMueGhyO2UuYWJvcnQoKTtjbGVhclRpbWVvdXQodGhpcy50aW1lcik7ZS5vbnJlYWR5c3RhdGVjaGFuZ2U9ZDsKaWYoYSl7ZS5vbnByb2dyZXNzPWUub25sb2Fkc3RhcnQ9ZDt9dGhpcy54aHI9bmV3IEJyb3dzZXIuUmVxdWVzdCgpO3RoaXMuZmlyZUV2ZW50KCJjYW5jZWwiKTtyZXR1cm4gdGhpczt9fSk7dmFyIGI9e307WyJnZXQiLCJwb3N0IiwicHV0IiwiZGVsZXRlIiwiR0VUIiwiUE9TVCIsIlBVVCIsIkRFTEVURSJdLmVhY2goZnVuY3Rpb24oZSl7YltlXT1mdW5jdGlvbihnKXt2YXIgZj17bWV0aG9kOmV9OwppZihnIT1udWxsKXtmLmRhdGE9Zzt9cmV0dXJuIHRoaXMuc2VuZChmKTt9O30pO2MuaW1wbGVtZW50KGIpO0VsZW1lbnQuUHJvcGVydGllcy5zZW5kPXtzZXQ6ZnVuY3Rpb24oZSl7dmFyIGY9dGhpcy5nZXQoInNlbmQiKS5jYW5jZWwoKTtmLnNldE9wdGlvbnMoZSk7CnJldHVybiB0aGlzO30sZ2V0OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5yZXRyaWV2ZSgic2VuZCIpO2lmKCFlKXtlPW5ldyBjKHtkYXRhOnRoaXMsbGluazoiY2FuY2VsIixtZXRob2Q6dGhpcy5nZXQoIm1ldGhvZCIpfHwicG9zdCIsdXJsOnRoaXMuZ2V0KCJhY3Rpb24iKX0pOwp0aGlzLnN0b3JlKCJzZW5kIixlKTt9cmV0dXJuIGU7fX07RWxlbWVudC5pbXBsZW1lbnQoe3NlbmQ6ZnVuY3Rpb24oZSl7dmFyIGY9dGhpcy5nZXQoInNlbmQiKTtmLnNlbmQoe2RhdGE6dGhpcyx1cmw6ZXx8Zi5vcHRpb25zLnVybH0pO3JldHVybiB0aGlzO319KTt9KSgpOwpSZXF1ZXN0LkhUTUw9bmV3IENsYXNzKHtFeHRlbmRzOlJlcXVlc3Qsb3B0aW9uczp7dXBkYXRlOmZhbHNlLGFwcGVuZDpmYWxzZSxldmFsU2NyaXB0czp0cnVlLGZpbHRlcjpmYWxzZSxoZWFkZXJzOntBY2NlcHQ6InRleHQvaHRtbCwgYXBwbGljYXRpb24veG1sLCB0ZXh0L3htbCwgKi8qIn19LHN1Y2Nlc3M6ZnVuY3Rpb24oZSl7dmFyIGQ9dGhpcy5vcHRpb25zLGI9dGhpcy5yZXNwb25zZTsKYi5odG1sPWUuc3RyaXBTY3JpcHRzKGZ1bmN0aW9uKGYpe2IuamF2YXNjcmlwdD1mO30pO3ZhciBjPWIuaHRtbC5tYXRjaCgvPGJvZHlbXj5dKj4oW1xzXFNdKj8pPFwvYm9keT4vaSk7aWYoYyl7Yi5odG1sPWNbMV07fXZhciBhPW5ldyBFbGVtZW50KCJkaXYiKS5zZXQoImh0bWwiLGIuaHRtbCk7CmIudHJlZT1hLmNoaWxkTm9kZXM7Yi5lbGVtZW50cz1hLmdldEVsZW1lbnRzKCIqIik7aWYoZC5maWx0ZXIpe2IudHJlZT1iLmVsZW1lbnRzLmZpbHRlcihkLmZpbHRlcik7fWlmKGQudXBkYXRlKXtkb2N1bWVudC5pZChkLnVwZGF0ZSkuZW1wdHkoKS5zZXQoImh0bWwiLGIuaHRtbCk7Cn1lbHNle2lmKGQuYXBwZW5kKXtkb2N1bWVudC5pZChkLmFwcGVuZCkuYWRvcHQoYS5nZXRDaGlsZHJlbigpKTt9fWlmKGQuZXZhbFNjcmlwdHMpe0Jyb3dzZXIuZXhlYyhiLmphdmFzY3JpcHQpO310aGlzLm9uU3VjY2VzcyhiLnRyZWUsYi5lbGVtZW50cyxiLmh0bWwsYi5qYXZhc2NyaXB0KTsKfX0pO0VsZW1lbnQuUHJvcGVydGllcy5sb2FkPXtzZXQ6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5nZXQoImxvYWQiKS5jYW5jZWwoKTtiLnNldE9wdGlvbnMoYSk7cmV0dXJuIHRoaXM7fSxnZXQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnJldHJpZXZlKCJsb2FkIik7aWYoIWEpe2E9bmV3IFJlcXVlc3QuSFRNTCh7ZGF0YTp0aGlzLGxpbms6ImNhbmNlbCIsdXBkYXRlOnRoaXMsbWV0aG9kOiJnZXQifSk7CnRoaXMuc3RvcmUoImxvYWQiLGEpO31yZXR1cm4gYTt9fTtFbGVtZW50LmltcGxlbWVudCh7bG9hZDpmdW5jdGlvbigpe3RoaXMuZ2V0KCJsb2FkIikuc2VuZChBcnJheS5saW5rKGFyZ3VtZW50cyx7ZGF0YTpUeXBlLmlzT2JqZWN0LHVybDpUeXBlLmlzU3RyaW5nfSkpOwpyZXR1cm4gdGhpczt9fSk7aWYodHlwZW9mIEpTT049PSJ1bmRlZmluZWQiKXt0aGlzLkpTT049e307fUpTT049bmV3IEhhc2goe3N0cmluZ2lmeTpKU09OLnN0cmluZ2lmeSxwYXJzZTpKU09OLnBhcnNlfSk7KGZ1bmN0aW9uKCl7dmFyIHNwZWNpYWw9eyJcYiI6IlxcYiIsIlx0IjoiXFx0IiwiXG4iOiJcXG4iLCJcZiI6IlxcZiIsIlxyIjoiXFxyIiwnIic6J1xcIicsIlxcIjoiXFxcXCJ9Owp2YXIgZXNjYXBlPWZ1bmN0aW9uKGNocil7cmV0dXJuIHNwZWNpYWxbY2hyXXx8IlxcdSIrKCIwMDAwIitjaHIuY2hhckNvZGVBdCgwKS50b1N0cmluZygxNikpLnNsaWNlKC00KTt9O0pTT04udmFsaWRhdGU9ZnVuY3Rpb24oc3RyaW5nKXtzdHJpbmc9c3RyaW5nLnJlcGxhY2UoL1xcKD86WyJcXFwvYmZucnRdfHVbMC05YS1mQS1GXXs0fSkvZywiQCIpLnJlcGxhY2UoLyJbXiJcXFxuXHJdKiJ8dHJ1ZXxmYWxzZXxudWxsfC0/XGQrKD86XC5cZCopPyg/OltlRV1bK1wtXT9cZCspPy9nLCJdIikucmVwbGFjZSgvKD86Xnw6fCwpKD86XHMqXFspKy9nLCIiKTsKcmV0dXJuKC9eW1xdLDp7fVxzXSokLykudGVzdChzdHJpbmcpO307SlNPTi5lbmNvZGU9SlNPTi5zdHJpbmdpZnk/ZnVuY3Rpb24ob2JqKXtyZXR1cm4gSlNPTi5zdHJpbmdpZnkob2JqKTt9OmZ1bmN0aW9uKG9iail7aWYob2JqJiZvYmoudG9KU09OKXtvYmo9b2JqLnRvSlNPTigpOwp9c3dpdGNoKHR5cGVPZihvYmopKXtjYXNlInN0cmluZyI6cmV0dXJuJyInK29iai5yZXBsYWNlKC9bXHgwMC1ceDFmXFwiXS9nLGVzY2FwZSkrJyInO2Nhc2UiYXJyYXkiOnJldHVybiJbIitvYmoubWFwKEpTT04uZW5jb2RlKS5jbGVhbigpKyJdIjtjYXNlIm9iamVjdCI6Y2FzZSJoYXNoIjp2YXIgc3RyaW5nPVtdOwpPYmplY3QuZWFjaChvYmosZnVuY3Rpb24odmFsdWUsa2V5KXt2YXIganNvbj1KU09OLmVuY29kZSh2YWx1ZSk7aWYoanNvbil7c3RyaW5nLnB1c2goSlNPTi5lbmNvZGUoa2V5KSsiOiIranNvbik7fX0pO3JldHVybiJ7IitzdHJpbmcrIn0iO2Nhc2UibnVtYmVyIjpjYXNlImJvb2xlYW4iOnJldHVybiIiK29iajsKY2FzZSJudWxsIjpyZXR1cm4ibnVsbCI7fXJldHVybiBudWxsO307SlNPTi5kZWNvZGU9ZnVuY3Rpb24oc3RyaW5nLHNlY3VyZSl7aWYoIXN0cmluZ3x8dHlwZU9mKHN0cmluZykhPSJzdHJpbmciKXtyZXR1cm4gbnVsbDt9aWYoc2VjdXJlfHxKU09OLnNlY3VyZSl7aWYoSlNPTi5wYXJzZSl7cmV0dXJuIEpTT04ucGFyc2Uoc3RyaW5nKTsKfWlmKCFKU09OLnZhbGlkYXRlKHN0cmluZykpe3Rocm93IG5ldyBFcnJvcigiSlNPTiBjb3VsZCBub3QgZGVjb2RlIHRoZSBpbnB1dDsgc2VjdXJpdHkgaXMgZW5hYmxlZCBhbmQgdGhlIHZhbHVlIGlzIG5vdCBzZWN1cmUuIik7fX1yZXR1cm4gZXZhbCgiKCIrc3RyaW5nKyIpIik7Cn07fSkuY2FsbCh0aGlzKTtSZXF1ZXN0LkpTT049bmV3IENsYXNzKHtFeHRlbmRzOlJlcXVlc3Qsb3B0aW9uczp7c2VjdXJlOnRydWV9LGluaXRpYWxpemU6ZnVuY3Rpb24oYSl7dGhpcy5wYXJlbnQoYSk7T2JqZWN0LmFwcGVuZCh0aGlzLmhlYWRlcnMse0FjY2VwdDoiYXBwbGljYXRpb24vanNvbiIsIlgtUmVxdWVzdCI6IkpTT04ifSk7Cn0sc3VjY2VzczpmdW5jdGlvbihjKXt2YXIgYjt0cnl7Yj10aGlzLnJlc3BvbnNlLmpzb249SlNPTi5kZWNvZGUoYyx0aGlzLm9wdGlvbnMuc2VjdXJlKTt9Y2F0Y2goYSl7dGhpcy5maXJlRXZlbnQoImVycm9yIixbYyxhXSk7cmV0dXJuO31pZihiPT1udWxsKXt0aGlzLm9uRmFpbHVyZSgpOwp9ZWxzZXt0aGlzLm9uU3VjY2VzcyhiLGMpO319fSk7dmFyIENvb2tpZT1uZXcgQ2xhc3Moe0ltcGxlbWVudHM6T3B0aW9ucyxvcHRpb25zOntwYXRoOiIvIixkb21haW46ZmFsc2UsZHVyYXRpb246ZmFsc2Usc2VjdXJlOmZhbHNlLGRvY3VtZW50OmRvY3VtZW50LGVuY29kZTp0cnVlfSxpbml0aWFsaXplOmZ1bmN0aW9uKGIsYSl7dGhpcy5rZXk9YjsKdGhpcy5zZXRPcHRpb25zKGEpO30sd3JpdGU6ZnVuY3Rpb24oYil7aWYodGhpcy5vcHRpb25zLmVuY29kZSl7Yj1lbmNvZGVVUklDb21wb25lbnQoYik7fWlmKHRoaXMub3B0aW9ucy5kb21haW4pe2IrPSI7IGRvbWFpbj0iK3RoaXMub3B0aW9ucy5kb21haW47fWlmKHRoaXMub3B0aW9ucy5wYXRoKXtiKz0iOyBwYXRoPSIrdGhpcy5vcHRpb25zLnBhdGg7Cn1pZih0aGlzLm9wdGlvbnMuZHVyYXRpb24pe3ZhciBhPW5ldyBEYXRlKCk7YS5zZXRUaW1lKGEuZ2V0VGltZSgpK3RoaXMub3B0aW9ucy5kdXJhdGlvbioyNCo2MCo2MCoxMDAwKTtiKz0iOyBleHBpcmVzPSIrYS50b0dNVFN0cmluZygpO31pZih0aGlzLm9wdGlvbnMuc2VjdXJlKXtiKz0iOyBzZWN1cmUiOwp9dGhpcy5vcHRpb25zLmRvY3VtZW50LmNvb2tpZT10aGlzLmtleSsiPSIrYjtyZXR1cm4gdGhpczt9LHJlYWQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm9wdGlvbnMuZG9jdW1lbnQuY29va2llLm1hdGNoKCIoPzpefDspXFxzKiIrdGhpcy5rZXkuZXNjYXBlUmVnRXhwKCkrIj0oW147XSopIik7CnJldHVybihhKT9kZWNvZGVVUklDb21wb25lbnQoYVsxXSk6bnVsbDt9LGRpc3Bvc2U6ZnVuY3Rpb24oKXtuZXcgQ29va2llKHRoaXMua2V5LE9iamVjdC5tZXJnZSh7fSx0aGlzLm9wdGlvbnMse2R1cmF0aW9uOi0xfSkpLndyaXRlKCIiKTtyZXR1cm4gdGhpczt9fSk7CkNvb2tpZS53cml0ZT1mdW5jdGlvbihiLGMsYSl7cmV0dXJuIG5ldyBDb29raWUoYixhKS53cml0ZShjKTt9O0Nvb2tpZS5yZWFkPWZ1bmN0aW9uKGEpe3JldHVybiBuZXcgQ29va2llKGEpLnJlYWQoKTt9O0Nvb2tpZS5kaXNwb3NlPWZ1bmN0aW9uKGIsYSl7cmV0dXJuIG5ldyBDb29raWUoYixhKS5kaXNwb3NlKCk7Cn07KGZ1bmN0aW9uKGosbCl7dmFyIG0sZyxmPVtdLGMsYixuPXRydWU7dHJ5e249ai5mcmFtZUVsZW1lbnQhPW51bGw7fWNhdGNoKGkpe312YXIgaD1mdW5jdGlvbigpe2NsZWFyVGltZW91dChiKTtpZihtKXtyZXR1cm47fUJyb3dzZXIubG9hZGVkPW09dHJ1ZTtsLnJlbW92ZUxpc3RlbmVyKCJET01Db250ZW50TG9hZGVkIixoKS5yZW1vdmVMaXN0ZW5lcigicmVhZHlzdGF0ZWNoYW5nZSIsYSk7CmwuZmlyZUV2ZW50KCJkb21yZWFkeSIpO2ouZmlyZUV2ZW50KCJkb21yZWFkeSIpO307dmFyIGE9ZnVuY3Rpb24oKXtmb3IodmFyIGU9Zi5sZW5ndGg7ZS0tOyl7aWYoZltlXSgpKXtoKCk7cmV0dXJuIHRydWU7fX1yZXR1cm4gZmFsc2U7fTt2YXIgaz1mdW5jdGlvbigpe2NsZWFyVGltZW91dChiKTsKaWYoIWEoKSl7Yj1zZXRUaW1lb3V0KGssMTApO319O2wuYWRkTGlzdGVuZXIoIkRPTUNvbnRlbnRMb2FkZWQiLGgpO3ZhciBkPWwuY3JlYXRlRWxlbWVudCgiZGl2Iik7aWYoZC5kb1Njcm9sbCYmIW4pe2YucHVzaChmdW5jdGlvbigpe3RyeXtkLmRvU2Nyb2xsKCk7cmV0dXJuIHRydWU7Cn1jYXRjaChvKXt9cmV0dXJuIGZhbHNlO30pO2M9dHJ1ZTt9aWYobC5yZWFkeVN0YXRlKXtmLnB1c2goZnVuY3Rpb24oKXt2YXIgZT1sLnJlYWR5U3RhdGU7cmV0dXJuKGU9PSJsb2FkZWQifHxlPT0iY29tcGxldGUiKTt9KTt9aWYoIm9ucmVhZHlzdGF0ZWNoYW5nZSIgaW4gbCl7bC5hZGRMaXN0ZW5lcigicmVhZHlzdGF0ZWNoYW5nZSIsYSk7Cn1lbHNle2M9dHJ1ZTt9aWYoYyl7aygpO31FbGVtZW50LkV2ZW50cy5kb21yZWFkeT17b25BZGQ6ZnVuY3Rpb24oZSl7aWYobSl7ZS5jYWxsKHRoaXMpO319fTtFbGVtZW50LkV2ZW50cy5sb2FkPXtiYXNlOiJsb2FkIixvbkFkZDpmdW5jdGlvbihlKXtpZihnJiZ0aGlzPT1qKXtlLmNhbGwodGhpcyk7Cn19LGNvbmRpdGlvbjpmdW5jdGlvbigpe2lmKHRoaXM9PWope2goKTtkZWxldGUgRWxlbWVudC5FdmVudHMubG9hZDt9cmV0dXJuIHRydWU7fX07ai5hZGRFdmVudCgibG9hZCIsZnVuY3Rpb24oKXtnPXRydWU7fSk7fSkod2luZG93LGRvY3VtZW50KTsoZnVuY3Rpb24oKXt2YXIgU3dpZmY9dGhpcy5Td2lmZj1uZXcgQ2xhc3Moe0ltcGxlbWVudHM6T3B0aW9ucyxvcHRpb25zOntpZDpudWxsLGhlaWdodDoxLHdpZHRoOjEsY29udGFpbmVyOm51bGwscHJvcGVydGllczp7fSxwYXJhbXM6e3F1YWxpdHk6ImhpZ2giLGFsbG93U2NyaXB0QWNjZXNzOiJhbHdheXMiLHdNb2RlOiJ3aW5kb3ciLHN3TGl2ZUNvbm5lY3Q6dHJ1ZX0sY2FsbEJhY2tzOnt9LHZhcnM6e319LHRvRWxlbWVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLm9iamVjdDsKfSxpbml0aWFsaXplOmZ1bmN0aW9uKHBhdGgsb3B0aW9ucyl7dGhpcy5pbnN0YW5jZT0iU3dpZmZfIitTdHJpbmcudW5pcXVlSUQoKTt0aGlzLnNldE9wdGlvbnMob3B0aW9ucyk7b3B0aW9ucz10aGlzLm9wdGlvbnM7dmFyIGlkPXRoaXMuaWQ9b3B0aW9ucy5pZHx8dGhpcy5pbnN0YW5jZTsKdmFyIGNvbnRhaW5lcj1kb2N1bWVudC5pZChvcHRpb25zLmNvbnRhaW5lcik7U3dpZmYuQ2FsbEJhY2tzW3RoaXMuaW5zdGFuY2VdPXt9O3ZhciBwYXJhbXM9b3B0aW9ucy5wYXJhbXMsdmFycz1vcHRpb25zLnZhcnMsY2FsbEJhY2tzPW9wdGlvbnMuY2FsbEJhY2tzOwp2YXIgcHJvcGVydGllcz1PYmplY3QuYXBwZW5kKHtoZWlnaHQ6b3B0aW9ucy5oZWlnaHQsd2lkdGg6b3B0aW9ucy53aWR0aH0sb3B0aW9ucy5wcm9wZXJ0aWVzKTt2YXIgc2VsZj10aGlzO2Zvcih2YXIgY2FsbEJhY2sgaW4gY2FsbEJhY2tzKXtTd2lmZi5DYWxsQmFja3NbdGhpcy5pbnN0YW5jZV1bY2FsbEJhY2tdPShmdW5jdGlvbihvcHRpb24pe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBvcHRpb24uYXBwbHkoc2VsZi5vYmplY3QsYXJndW1lbnRzKTsKfTt9KShjYWxsQmFja3NbY2FsbEJhY2tdKTt2YXJzW2NhbGxCYWNrXT0iU3dpZmYuQ2FsbEJhY2tzLiIrdGhpcy5pbnN0YW5jZSsiLiIrY2FsbEJhY2s7fXBhcmFtcy5mbGFzaFZhcnM9T2JqZWN0LnRvUXVlcnlTdHJpbmcodmFycyk7aWYoQnJvd3Nlci5pZSl7cHJvcGVydGllcy5jbGFzc2lkPSJjbHNpZDpEMjdDREI2RS1BRTZELTExY2YtOTZCOC00NDQ1NTM1NDAwMDAiOwpwYXJhbXMubW92aWU9cGF0aDt9ZWxzZXtwcm9wZXJ0aWVzLnR5cGU9ImFwcGxpY2F0aW9uL3gtc2hvY2t3YXZlLWZsYXNoIjt9cHJvcGVydGllcy5kYXRhPXBhdGg7dmFyIGJ1aWxkPSc8b2JqZWN0IGlkPSInK2lkKyciJztmb3IodmFyIHByb3BlcnR5IGluIHByb3BlcnRpZXMpe2J1aWxkKz0iICIrcHJvcGVydHkrJz0iJytwcm9wZXJ0aWVzW3Byb3BlcnR5XSsnIic7Cn1idWlsZCs9Ij4iO2Zvcih2YXIgcGFyYW0gaW4gcGFyYW1zKXtpZihwYXJhbXNbcGFyYW1dKXtidWlsZCs9JzxwYXJhbSBuYW1lPSInK3BhcmFtKyciIHZhbHVlPSInK3BhcmFtc1twYXJhbV0rJyIgLz4nO319YnVpbGQrPSI8L29iamVjdD4iO3RoaXMub2JqZWN0PSgoY29udGFpbmVyKT9jb250YWluZXIuZW1wdHkoKTpuZXcgRWxlbWVudCgiZGl2IikpLnNldCgiaHRtbCIsYnVpbGQpLmZpcnN0Q2hpbGQ7Cn0scmVwbGFjZXM6ZnVuY3Rpb24oZWxlbWVudCl7ZWxlbWVudD1kb2N1bWVudC5pZChlbGVtZW50LHRydWUpO2VsZW1lbnQucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQodGhpcy50b0VsZW1lbnQoKSxlbGVtZW50KTtyZXR1cm4gdGhpczt9LGluamVjdDpmdW5jdGlvbihlbGVtZW50KXtkb2N1bWVudC5pZChlbGVtZW50LHRydWUpLmFwcGVuZENoaWxkKHRoaXMudG9FbGVtZW50KCkpOwpyZXR1cm4gdGhpczt9LHJlbW90ZTpmdW5jdGlvbigpe3JldHVybiBTd2lmZi5yZW1vdGUuYXBwbHkoU3dpZmYsW3RoaXMudG9FbGVtZW50KCldLmFwcGVuZChhcmd1bWVudHMpKTt9fSk7U3dpZmYuQ2FsbEJhY2tzPXt9O1N3aWZmLnJlbW90ZT1mdW5jdGlvbihvYmosZm4pe3ZhciBycz1vYmouQ2FsbEZ1bmN0aW9uKCc8aW52b2tlIG5hbWU9IicrZm4rJyIgcmV0dXJudHlwZT0iamF2YXNjcmlwdCI+JytfX2ZsYXNoX19hcmd1bWVudHNUb1hNTChhcmd1bWVudHMsMikrIjwvaW52b2tlPiIpOwpyZXR1cm4gZXZhbChycyk7fTt9KS5jYWxsKHRoaXMpOw==",
                "body": "LyoKLS0tCk1vb1Rvb2xzOiB0aGUgamF2YXNjcmlwdCBmcmFtZXdvcmsKCndlYiBidWlsZDoKIC0gaHR0cDovL21vb3Rvb2xzLm5ldC9jb3JlLzdjNTZjZmVmOWRkZGNmMTcwYTVkNjhlM2ZiNjFjZmQ3CgpwYWNrYWdlciBidWlsZDoKIC0gcGFja2FnZXIgYnVpbGQgQ29yZS9Db3JlIENvcmUvQXJyYXkgQ29yZS9TdHJpbmcgQ29yZS9OdW1iZXIgQ29yZS9GdW5jdGlvbiBDb3JlL09iamVjdCBDb3JlL0V2ZW50IENvcmUvQnJvd3NlciBDb3JlL0NsYXNzIENvcmUvQ2xhc3MuRXh0cmFzIENvcmUvU2xpY2suUGFyc2VyIENvcmUvU2xpY2suRmluZGVyIENvcmUvRWxlbWVudCBDb3JlL0VsZW1lbnQuU3R5bGUgQ29yZS9FbGVtZW50LkV2ZW50IENvcmUvRWxlbWVudC5EaW1lbnNpb25zIENvcmUvRnggQ29yZS9GeC5DU1MgQ29yZS9GeC5Ud2VlbiBDb3JlL0Z4Lk1vcnBoIENvcmUvRnguVHJhbnNpdGlvbnMgQ29yZS9SZXF1ZXN0IENvcmUvUmVxdWVzdC5IVE1MIENvcmUvUmVxdWVzdC5KU09OIENvcmUvQ29va2llIENvcmUvSlNPTiBDb3JlL0RPTVJlYWR5IENvcmUvU3dpZmYKCmNvcHlyaWdodHM6CiAgLSBbTW9vVG9vbHNdKGh0dHA6Ly9tb290b29scy5uZXQpCgpsaWNlbnNlczoKICAtIFtNSVQgTGljZW5zZV0oaHR0cDovL21vb3Rvb2xzLm5ldC9saWNlbnNlLnR4dCkKLi4uCiovCihmdW5jdGlvbigpe3RoaXMuTW9vVG9vbHM9e3ZlcnNpb246IjEuMy4xIixidWlsZDoiYWY0OGM4ZDU4OWY0M2YzMjIxMmY5YmI4ZmY2OGExMjdlNmEzYmE2YyJ9O3ZhciBlPXRoaXMudHlwZU9mPWZ1bmN0aW9uKGkpe2lmKGk9PW51bGwpe3JldHVybiJudWxsIjt9aWYoaS4kZmFtaWx5KXtyZXR1cm4gaS4kZmFtaWx5KCk7Cn1pZihpLm5vZGVOYW1lKXtpZihpLm5vZGVUeXBlPT0xKXtyZXR1cm4iZWxlbWVudCI7fWlmKGkubm9kZVR5cGU9PTMpe3JldHVybigvXFMvKS50ZXN0KGkubm9kZVZhbHVlKT8idGV4dG5vZGUiOiJ3aGl0ZXNwYWNlIjt9fWVsc2V7aWYodHlwZW9mIGkubGVuZ3RoPT0ibnVtYmVyIil7aWYoaS5jYWxsZWUpe3JldHVybiJhcmd1bWVudHMiOwp9aWYoIml0ZW0iIGluIGkpe3JldHVybiJjb2xsZWN0aW9uIjt9fX1yZXR1cm4gdHlwZW9mIGk7fTt2YXIgdT10aGlzLmluc3RhbmNlT2Y9ZnVuY3Rpb24odyxpKXtpZih3PT1udWxsKXtyZXR1cm4gZmFsc2U7fXZhciB2PXcuJGNvbnN0cnVjdG9yfHx3LmNvbnN0cnVjdG9yOwp3aGlsZSh2KXtpZih2PT09aSl7cmV0dXJuIHRydWU7fXY9di5wYXJlbnQ7fXJldHVybiB3IGluc3RhbmNlb2YgaTt9O3ZhciBmPXRoaXMuRnVuY3Rpb247dmFyIHI9dHJ1ZTtmb3IodmFyIHEgaW4ge3RvU3RyaW5nOjF9KXtyPW51bGw7fWlmKHIpe3I9WyJoYXNPd25Qcm9wZXJ0eSIsInZhbHVlT2YiLCJpc1Byb3RvdHlwZU9mIiwicHJvcGVydHlJc0VudW1lcmFibGUiLCJ0b0xvY2FsZVN0cmluZyIsInRvU3RyaW5nIiwiY29uc3RydWN0b3IiXTsKfWYucHJvdG90eXBlLm92ZXJsb2FkU2V0dGVyPWZ1bmN0aW9uKHYpe3ZhciBpPXRoaXM7cmV0dXJuIGZ1bmN0aW9uKHgsdyl7aWYoeD09bnVsbCl7cmV0dXJuIHRoaXM7fWlmKHZ8fHR5cGVvZiB4IT0ic3RyaW5nIil7Zm9yKHZhciB5IGluIHgpe2kuY2FsbCh0aGlzLHkseFt5XSk7Cn1pZihyKXtmb3IodmFyIHo9ci5sZW5ndGg7ei0tOyl7eT1yW3pdO2lmKHguaGFzT3duUHJvcGVydHkoeSkpe2kuY2FsbCh0aGlzLHkseFt5XSk7fX19fWVsc2V7aS5jYWxsKHRoaXMseCx3KTt9cmV0dXJuIHRoaXM7fTt9O2YucHJvdG90eXBlLm92ZXJsb2FkR2V0dGVyPWZ1bmN0aW9uKHYpe3ZhciBpPXRoaXM7CnJldHVybiBmdW5jdGlvbih4KXt2YXIgeSx3O2lmKHZ8fHR5cGVvZiB4IT0ic3RyaW5nIil7eT14O31lbHNle2lmKGFyZ3VtZW50cy5sZW5ndGg+MSl7eT1hcmd1bWVudHM7fX1pZih5KXt3PXt9O2Zvcih2YXIgej0wO3o8eS5sZW5ndGg7eisrKXt3W3lbel1dPWkuY2FsbCh0aGlzLHlbel0pOwp9fWVsc2V7dz1pLmNhbGwodGhpcyx4KTt9cmV0dXJuIHc7fTt9O2YucHJvdG90eXBlLmV4dGVuZD1mdW5jdGlvbihpLHYpe3RoaXNbaV09djt9Lm92ZXJsb2FkU2V0dGVyKCk7Zi5wcm90b3R5cGUuaW1wbGVtZW50PWZ1bmN0aW9uKGksdil7dGhpcy5wcm90b3R5cGVbaV09djsKfS5vdmVybG9hZFNldHRlcigpO3ZhciBvPUFycmF5LnByb3RvdHlwZS5zbGljZTtmLmZyb209ZnVuY3Rpb24oaSl7cmV0dXJuKGUoaSk9PSJmdW5jdGlvbiIpP2k6ZnVuY3Rpb24oKXtyZXR1cm4gaTt9O307QXJyYXkuZnJvbT1mdW5jdGlvbihpKXtpZihpPT1udWxsKXtyZXR1cm5bXTsKfXJldHVybihrLmlzRW51bWVyYWJsZShpKSYmdHlwZW9mIGkhPSJzdHJpbmciKT8oZShpKT09ImFycmF5Iik/aTpvLmNhbGwoaSk6W2ldO307TnVtYmVyLmZyb209ZnVuY3Rpb24odil7dmFyIGk9cGFyc2VGbG9hdCh2KTtyZXR1cm4gaXNGaW5pdGUoaSk/aTpudWxsOwp9O1N0cmluZy5mcm9tPWZ1bmN0aW9uKGkpe3JldHVybiBpKyIiO307Zi5pbXBsZW1lbnQoe2hpZGU6ZnVuY3Rpb24oKXt0aGlzLiRoaWRkZW49dHJ1ZTtyZXR1cm4gdGhpczt9LHByb3RlY3Q6ZnVuY3Rpb24oKXt0aGlzLiRwcm90ZWN0ZWQ9dHJ1ZTtyZXR1cm4gdGhpczsKfX0pO3ZhciBrPXRoaXMuVHlwZT1mdW5jdGlvbih4LHcpe2lmKHgpe3ZhciB2PXgudG9Mb3dlckNhc2UoKTt2YXIgaT1mdW5jdGlvbih5KXtyZXR1cm4oZSh5KT09dik7fTtrWyJpcyIreF09aTtpZih3IT1udWxsKXt3LnByb3RvdHlwZS4kZmFtaWx5PShmdW5jdGlvbigpe3JldHVybiB2Owp9KS5oaWRlKCk7dy50eXBlPWk7fX1pZih3PT1udWxsKXtyZXR1cm4gbnVsbDt9dy5leHRlbmQodGhpcyk7dy4kY29uc3RydWN0b3I9azt3LnByb3RvdHlwZS4kY29uc3RydWN0b3I9dztyZXR1cm4gdzt9O3ZhciBwPU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7ay5pc0VudW1lcmFibGU9ZnVuY3Rpb24oaSl7cmV0dXJuKGkhPW51bGwmJnR5cGVvZiBpLmxlbmd0aD09Im51bWJlciImJnAuY2FsbChpKSE9IltvYmplY3QgRnVuY3Rpb25dIik7Cn07dmFyIGI9e307dmFyIGQ9ZnVuY3Rpb24oaSl7dmFyIHY9ZShpLnByb3RvdHlwZSk7cmV0dXJuIGJbdl18fChiW3ZdPVtdKTt9O3ZhciBoPWZ1bmN0aW9uKHcsQSl7aWYoQSYmQS4kaGlkZGVuKXtyZXR1cm47fXZhciB2PWQodGhpcyk7Zm9yKHZhciB4PTA7eDx2Lmxlbmd0aDsKeCsrKXt2YXIgej12W3hdO2lmKGUoeik9PSJ0eXBlIil7aC5jYWxsKHosdyxBKTt9ZWxzZXt6LmNhbGwodGhpcyx3LEEpO319dmFyIHk9dGhpcy5wcm90b3R5cGVbd107aWYoeT09bnVsbHx8IXkuJHByb3RlY3RlZCl7dGhpcy5wcm90b3R5cGVbd109QTt9aWYodGhpc1t3XT09bnVsbCYmZShBKT09ImZ1bmN0aW9uIil7dC5jYWxsKHRoaXMsdyxmdW5jdGlvbihpKXtyZXR1cm4gQS5hcHBseShpLG8uY2FsbChhcmd1bWVudHMsMSkpOwp9KTt9fTt2YXIgdD1mdW5jdGlvbihpLHcpe2lmKHcmJncuJGhpZGRlbil7cmV0dXJuO312YXIgdj10aGlzW2ldO2lmKHY9PW51bGx8fCF2LiRwcm90ZWN0ZWQpe3RoaXNbaV09dzt9fTtrLmltcGxlbWVudCh7aW1wbGVtZW50Omgub3ZlcmxvYWRTZXR0ZXIoKSxleHRlbmQ6dC5vdmVybG9hZFNldHRlcigpLGFsaWFzOmZ1bmN0aW9uKGksdil7aC5jYWxsKHRoaXMsaSx0aGlzLnByb3RvdHlwZVt2XSk7Cn0ub3ZlcmxvYWRTZXR0ZXIoKSxtaXJyb3I6ZnVuY3Rpb24oaSl7ZCh0aGlzKS5wdXNoKGkpO3JldHVybiB0aGlzO319KTtuZXcgaygiVHlwZSIsayk7dmFyIGM9ZnVuY3Rpb24odix6LHgpe3ZhciB3PSh6IT1PYmplY3QpLEQ9ei5wcm90b3R5cGU7aWYodyl7ej1uZXcgayh2LHopOwp9Zm9yKHZhciBBPTAseT14Lmxlbmd0aDtBPHk7QSsrKXt2YXIgRT14W0FdLEM9eltFXSxCPURbRV07aWYoQyl7Qy5wcm90ZWN0KCk7fWlmKHcmJkIpe2RlbGV0ZSBEW0VdO0RbRV09Qi5wcm90ZWN0KCk7fX1pZih3KXt6LmltcGxlbWVudChEKTt9cmV0dXJuIGM7fTtjKCJTdHJpbmciLFN0cmluZyxbImNoYXJBdCIsImNoYXJDb2RlQXQiLCJjb25jYXQiLCJpbmRleE9mIiwibGFzdEluZGV4T2YiLCJtYXRjaCIsInF1b3RlIiwicmVwbGFjZSIsInNlYXJjaCIsInNsaWNlIiwic3BsaXQiLCJzdWJzdHIiLCJzdWJzdHJpbmciLCJ0b0xvd2VyQ2FzZSIsInRvVXBwZXJDYXNlIl0pKCJBcnJheSIsQXJyYXksWyJwb3AiLCJwdXNoIiwicmV2ZXJzZSIsInNoaWZ0Iiwic29ydCIsInNwbGljZSIsInVuc2hpZnQiLCJjb25jYXQiLCJqb2luIiwic2xpY2UiLCJpbmRleE9mIiwibGFzdEluZGV4T2YiLCJmaWx0ZXIiLCJmb3JFYWNoIiwiZXZlcnkiLCJtYXAiLCJzb21lIiwicmVkdWNlIiwicmVkdWNlUmlnaHQiXSkoIk51bWJlciIsTnVtYmVyLFsidG9FeHBvbmVudGlhbCIsInRvRml4ZWQiLCJ0b0xvY2FsZVN0cmluZyIsInRvUHJlY2lzaW9uIl0pKCJGdW5jdGlvbiIsZixbImFwcGx5IiwiY2FsbCIsImJpbmQiXSkoIlJlZ0V4cCIsUmVnRXhwLFsiZXhlYyIsInRlc3QiXSkoIk9iamVjdCIsT2JqZWN0LFsiY3JlYXRlIiwiZGVmaW5lUHJvcGVydHkiLCJkZWZpbmVQcm9wZXJ0aWVzIiwia2V5cyIsImdldFByb3RvdHlwZU9mIiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwiZ2V0T3duUHJvcGVydHlOYW1lcyIsInByZXZlbnRFeHRlbnNpb25zIiwiaXNFeHRlbnNpYmxlIiwic2VhbCIsImlzU2VhbGVkIiwiZnJlZXplIiwiaXNGcm96ZW4iXSkoIkRhdGUiLERhdGUsWyJub3ciXSk7Ck9iamVjdC5leHRlbmQ9dC5vdmVybG9hZFNldHRlcigpO0RhdGUuZXh0ZW5kKCJub3ciLGZ1bmN0aW9uKCl7cmV0dXJuICsobmV3IERhdGUpO30pO25ldyBrKCJCb29sZWFuIixCb29sZWFuKTtOdW1iZXIucHJvdG90eXBlLiRmYW1pbHk9ZnVuY3Rpb24oKXtyZXR1cm4gaXNGaW5pdGUodGhpcyk/Im51bWJlciI6Im51bGwiOwp9LmhpZGUoKTtOdW1iZXIuZXh0ZW5kKCJyYW5kb20iLGZ1bmN0aW9uKHYsaSl7cmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSooaS12KzEpK3YpO30pO3ZhciBsPU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7T2JqZWN0LmV4dGVuZCgiZm9yRWFjaCIsZnVuY3Rpb24oaSx3LHgpe2Zvcih2YXIgdiBpbiBpKXtpZihsLmNhbGwoaSx2KSl7dy5jYWxsKHgsaVt2XSx2LGkpOwp9fX0pO09iamVjdC5lYWNoPU9iamVjdC5mb3JFYWNoO0FycmF5LmltcGxlbWVudCh7Zm9yRWFjaDpmdW5jdGlvbih4LHkpe2Zvcih2YXIgdz0wLHY9dGhpcy5sZW5ndGg7dzx2O3crKyl7aWYodyBpbiB0aGlzKXt4LmNhbGwoeSx0aGlzW3ddLHcsdGhpcyk7fX19LGVhY2g6ZnVuY3Rpb24oaSx2KXtBcnJheS5mb3JFYWNoKHRoaXMsaSx2KTsKcmV0dXJuIHRoaXM7fX0pO3ZhciBzPWZ1bmN0aW9uKGkpe3N3aXRjaChlKGkpKXtjYXNlImFycmF5IjpyZXR1cm4gaS5jbG9uZSgpO2Nhc2Uib2JqZWN0IjpyZXR1cm4gT2JqZWN0LmNsb25lKGkpO2RlZmF1bHQ6cmV0dXJuIGk7fX07QXJyYXkuaW1wbGVtZW50KCJjbG9uZSIsZnVuY3Rpb24oKXt2YXIgdj10aGlzLmxlbmd0aCx3PW5ldyBBcnJheSh2KTsKd2hpbGUodi0tKXt3W3ZdPXModGhpc1t2XSk7fXJldHVybiB3O30pO3ZhciBhPWZ1bmN0aW9uKHYsaSx3KXtzd2l0Y2goZSh3KSl7Y2FzZSJvYmplY3QiOmlmKGUodltpXSk9PSJvYmplY3QiKXtPYmplY3QubWVyZ2UodltpXSx3KTt9ZWxzZXt2W2ldPU9iamVjdC5jbG9uZSh3KTsKfWJyZWFrO2Nhc2UiYXJyYXkiOnZbaV09dy5jbG9uZSgpO2JyZWFrO2RlZmF1bHQ6dltpXT13O31yZXR1cm4gdjt9O09iamVjdC5leHRlbmQoe21lcmdlOmZ1bmN0aW9uKEMseSx4KXtpZihlKHkpPT0ic3RyaW5nIil7cmV0dXJuIGEoQyx5LHgpO31mb3IodmFyIEI9MSx3PWFyZ3VtZW50cy5sZW5ndGg7CkI8dztCKyspe3ZhciB6PWFyZ3VtZW50c1tCXTtmb3IodmFyIEEgaW4geil7YShDLEEseltBXSk7fX1yZXR1cm4gQzt9LGNsb25lOmZ1bmN0aW9uKGkpe3ZhciB3PXt9O2Zvcih2YXIgdiBpbiBpKXt3W3ZdPXMoaVt2XSk7fXJldHVybiB3O30sYXBwZW5kOmZ1bmN0aW9uKHope2Zvcih2YXIgeT0xLHc9YXJndW1lbnRzLmxlbmd0aDsKeTx3O3krKyl7dmFyIHY9YXJndW1lbnRzW3ldfHx7fTtmb3IodmFyIHggaW4gdil7elt4XT12W3hdO319cmV0dXJuIHo7fX0pO1siT2JqZWN0IiwiV2hpdGVTcGFjZSIsIlRleHROb2RlIiwiQ29sbGVjdGlvbiIsIkFyZ3VtZW50cyJdLmVhY2goZnVuY3Rpb24oaSl7bmV3IGsoaSk7Cn0pO3ZhciBqPURhdGUubm93KCk7U3RyaW5nLmV4dGVuZCgidW5pcXVlSUQiLGZ1bmN0aW9uKCl7cmV0dXJuKGorKykudG9TdHJpbmcoMzYpO30pO3ZhciBnPXRoaXMuSGFzaD1uZXcgaygiSGFzaCIsZnVuY3Rpb24oaSl7aWYoZShpKT09Imhhc2giKXtpPU9iamVjdC5jbG9uZShpLmdldENsZWFuKCkpOwp9Zm9yKHZhciB2IGluIGkpe3RoaXNbdl09aVt2XTt9cmV0dXJuIHRoaXM7fSk7Zy5pbXBsZW1lbnQoe2ZvckVhY2g6ZnVuY3Rpb24oaSx2KXtPYmplY3QuZm9yRWFjaCh0aGlzLGksdik7fSxnZXRDbGVhbjpmdW5jdGlvbigpe3ZhciB2PXt9O2Zvcih2YXIgaSBpbiB0aGlzKXtpZih0aGlzLmhhc093blByb3BlcnR5KGkpKXt2W2ldPXRoaXNbaV07Cn19cmV0dXJuIHY7fSxnZXRMZW5ndGg6ZnVuY3Rpb24oKXt2YXIgdj0wO2Zvcih2YXIgaSBpbiB0aGlzKXtpZih0aGlzLmhhc093blByb3BlcnR5KGkpKXt2Kys7fX1yZXR1cm4gdjt9fSk7Zy5hbGlhcygiZWFjaCIsImZvckVhY2giKTtPYmplY3QudHlwZT1rLmlzT2JqZWN0Owp2YXIgbj10aGlzLk5hdGl2ZT1mdW5jdGlvbihpKXtyZXR1cm4gbmV3IGsoaS5uYW1lLGkuaW5pdGlhbGl6ZSk7fTtuLnR5cGU9ay50eXBlO24uaW1wbGVtZW50PWZ1bmN0aW9uKHgsdil7Zm9yKHZhciB3PTA7dzx4Lmxlbmd0aDt3Kyspe3hbd10uaW1wbGVtZW50KHYpOwp9cmV0dXJuIG47fTt2YXIgbT1BcnJheS50eXBlO0FycmF5LnR5cGU9ZnVuY3Rpb24oaSl7cmV0dXJuIHUoaSxBcnJheSl8fG0oaSk7fTt0aGlzLiRBPWZ1bmN0aW9uKGkpe3JldHVybiBBcnJheS5mcm9tKGkpLnNsaWNlKCk7fTt0aGlzLiRhcmd1bWVudHM9ZnVuY3Rpb24odil7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGFyZ3VtZW50c1t2XTsKfTt9O3RoaXMuJGNoaz1mdW5jdGlvbihpKXtyZXR1cm4gISEoaXx8aT09PTApO307dGhpcy4kY2xlYXI9ZnVuY3Rpb24oaSl7Y2xlYXJUaW1lb3V0KGkpO2NsZWFySW50ZXJ2YWwoaSk7cmV0dXJuIG51bGw7fTt0aGlzLiRkZWZpbmVkPWZ1bmN0aW9uKGkpe3JldHVybihpIT1udWxsKTsKfTt0aGlzLiRlYWNoPWZ1bmN0aW9uKHcsdix4KXt2YXIgaT1lKHcpOygoaT09ImFyZ3VtZW50cyJ8fGk9PSJjb2xsZWN0aW9uInx8aT09ImFycmF5Inx8aT09ImVsZW1lbnRzIik/QXJyYXk6T2JqZWN0KS5lYWNoKHcsdix4KTt9O3RoaXMuJGVtcHR5PWZ1bmN0aW9uKCl7fTsKdGhpcy4kZXh0ZW5kPWZ1bmN0aW9uKHYsaSl7cmV0dXJuIE9iamVjdC5hcHBlbmQodixpKTt9O3RoaXMuJEg9ZnVuY3Rpb24oaSl7cmV0dXJuIG5ldyBnKGkpO307dGhpcy4kbWVyZ2U9ZnVuY3Rpb24oKXt2YXIgaT1BcnJheS5zbGljZShhcmd1bWVudHMpO2kudW5zaGlmdCh7fSk7CnJldHVybiBPYmplY3QubWVyZ2UuYXBwbHkobnVsbCxpKTt9O3RoaXMuJGxhbWJkYT1mLmZyb207dGhpcy4kbWl4aW49T2JqZWN0Lm1lcmdlO3RoaXMuJHJhbmRvbT1OdW1iZXIucmFuZG9tO3RoaXMuJHNwbGF0PUFycmF5LmZyb207dGhpcy4kdGltZT1EYXRlLm5vdzsKdGhpcy4kdHlwZT1mdW5jdGlvbihpKXt2YXIgdj1lKGkpO2lmKHY9PSJlbGVtZW50cyIpe3JldHVybiJhcnJheSI7fXJldHVybih2PT0ibnVsbCIpP2ZhbHNlOnY7fTt0aGlzLiR1bmxpbms9ZnVuY3Rpb24oaSl7c3dpdGNoKGUoaSkpe2Nhc2Uib2JqZWN0IjpyZXR1cm4gT2JqZWN0LmNsb25lKGkpOwpjYXNlImFycmF5IjpyZXR1cm4gQXJyYXkuY2xvbmUoaSk7Y2FzZSJoYXNoIjpyZXR1cm4gbmV3IGcoaSk7ZGVmYXVsdDpyZXR1cm4gaTt9fTt9KS5jYWxsKHRoaXMpO0FycmF5LmltcGxlbWVudCh7aW52b2tlOmZ1bmN0aW9uKGEpe3ZhciBiPUFycmF5LnNsaWNlKGFyZ3VtZW50cywxKTsKcmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uKGMpe3JldHVybiBjW2FdLmFwcGx5KGMsYik7fSk7fSxldmVyeTpmdW5jdGlvbihjLGQpe2Zvcih2YXIgYj0wLGE9dGhpcy5sZW5ndGg7YjxhO2IrKyl7aWYoKGIgaW4gdGhpcykmJiFjLmNhbGwoZCx0aGlzW2JdLGIsdGhpcykpe3JldHVybiBmYWxzZTsKfX1yZXR1cm4gdHJ1ZTt9LGZpbHRlcjpmdW5jdGlvbihkLGUpe3ZhciBjPVtdO2Zvcih2YXIgYj0wLGE9dGhpcy5sZW5ndGg7YjxhO2IrKyl7aWYoKGIgaW4gdGhpcykmJmQuY2FsbChlLHRoaXNbYl0sYix0aGlzKSl7Yy5wdXNoKHRoaXNbYl0pO319cmV0dXJuIGM7fSxjbGVhbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLmZpbHRlcihmdW5jdGlvbihhKXtyZXR1cm4gYSE9bnVsbDsKfSk7fSxpbmRleE9mOmZ1bmN0aW9uKGMsZCl7dmFyIGE9dGhpcy5sZW5ndGg7Zm9yKHZhciBiPShkPDApP01hdGgubWF4KDAsYStkKTpkfHwwO2I8YTtiKyspe2lmKHRoaXNbYl09PT1jKXtyZXR1cm4gYjt9fXJldHVybiAtMTt9LG1hcDpmdW5jdGlvbihkLGUpe3ZhciBjPVtdOwpmb3IodmFyIGI9MCxhPXRoaXMubGVuZ3RoO2I8YTtiKyspe2lmKGIgaW4gdGhpcyl7Y1tiXT1kLmNhbGwoZSx0aGlzW2JdLGIsdGhpcyk7fX1yZXR1cm4gYzt9LHNvbWU6ZnVuY3Rpb24oYyxkKXtmb3IodmFyIGI9MCxhPXRoaXMubGVuZ3RoO2I8YTtiKyspe2lmKChiIGluIHRoaXMpJiZjLmNhbGwoZCx0aGlzW2JdLGIsdGhpcykpe3JldHVybiB0cnVlOwp9fXJldHVybiBmYWxzZTt9LGFzc29jaWF0ZTpmdW5jdGlvbihjKXt2YXIgZD17fSxiPU1hdGgubWluKHRoaXMubGVuZ3RoLGMubGVuZ3RoKTtmb3IodmFyIGE9MDthPGI7YSsrKXtkW2NbYV1dPXRoaXNbYV07fXJldHVybiBkO30sbGluazpmdW5jdGlvbihjKXt2YXIgYT17fTsKZm9yKHZhciBlPTAsYj10aGlzLmxlbmd0aDtlPGI7ZSsrKXtmb3IodmFyIGQgaW4gYyl7aWYoY1tkXSh0aGlzW2VdKSl7YVtkXT10aGlzW2VdO2RlbGV0ZSBjW2RdO2JyZWFrO319fXJldHVybiBhO30sY29udGFpbnM6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5pbmRleE9mKGEsYikhPS0xOwp9LGFwcGVuZDpmdW5jdGlvbihhKXt0aGlzLnB1c2guYXBwbHkodGhpcyxhKTtyZXR1cm4gdGhpczt9LGdldExhc3Q6ZnVuY3Rpb24oKXtyZXR1cm4odGhpcy5sZW5ndGgpP3RoaXNbdGhpcy5sZW5ndGgtMV06bnVsbDt9LGdldFJhbmRvbTpmdW5jdGlvbigpe3JldHVybih0aGlzLmxlbmd0aCk/dGhpc1tOdW1iZXIucmFuZG9tKDAsdGhpcy5sZW5ndGgtMSldOm51bGw7Cn0saW5jbHVkZTpmdW5jdGlvbihhKXtpZighdGhpcy5jb250YWlucyhhKSl7dGhpcy5wdXNoKGEpO31yZXR1cm4gdGhpczt9LGNvbWJpbmU6ZnVuY3Rpb24oYyl7Zm9yKHZhciBiPTAsYT1jLmxlbmd0aDtiPGE7YisrKXt0aGlzLmluY2x1ZGUoY1tiXSk7fXJldHVybiB0aGlzOwp9LGVyYXNlOmZ1bmN0aW9uKGIpe2Zvcih2YXIgYT10aGlzLmxlbmd0aDthLS07KXtpZih0aGlzW2FdPT09Yil7dGhpcy5zcGxpY2UoYSwxKTt9fXJldHVybiB0aGlzO30sZW1wdHk6ZnVuY3Rpb24oKXt0aGlzLmxlbmd0aD0wO3JldHVybiB0aGlzO30sZmxhdHRlbjpmdW5jdGlvbigpe3ZhciBkPVtdOwpmb3IodmFyIGI9MCxhPXRoaXMubGVuZ3RoO2I8YTtiKyspe3ZhciBjPXR5cGVPZih0aGlzW2JdKTtpZihjPT0ibnVsbCIpe2NvbnRpbnVlO31kPWQuY29uY2F0KChjPT0iYXJyYXkifHxjPT0iY29sbGVjdGlvbiJ8fGM9PSJhcmd1bWVudHMifHxpbnN0YW5jZU9mKHRoaXNbYl0sQXJyYXkpKT9BcnJheS5mbGF0dGVuKHRoaXNbYl0pOnRoaXNbYl0pOwp9cmV0dXJuIGQ7fSxwaWNrOmZ1bmN0aW9uKCl7Zm9yKHZhciBiPTAsYT10aGlzLmxlbmd0aDtiPGE7YisrKXtpZih0aGlzW2JdIT1udWxsKXtyZXR1cm4gdGhpc1tiXTt9fXJldHVybiBudWxsO30saGV4VG9SZ2I6ZnVuY3Rpb24oYil7aWYodGhpcy5sZW5ndGghPTMpe3JldHVybiBudWxsOwp9dmFyIGE9dGhpcy5tYXAoZnVuY3Rpb24oYyl7aWYoYy5sZW5ndGg9PTEpe2MrPWM7fXJldHVybiBjLnRvSW50KDE2KTt9KTtyZXR1cm4oYik/YToicmdiKCIrYSsiKSI7fSxyZ2JUb0hleDpmdW5jdGlvbihkKXtpZih0aGlzLmxlbmd0aDwzKXtyZXR1cm4gbnVsbDt9aWYodGhpcy5sZW5ndGg9PTQmJnRoaXNbM109PTAmJiFkKXtyZXR1cm4idHJhbnNwYXJlbnQiOwp9dmFyIGI9W107Zm9yKHZhciBhPTA7YTwzO2ErKyl7dmFyIGM9KHRoaXNbYV0tMCkudG9TdHJpbmcoMTYpO2IucHVzaCgoYy5sZW5ndGg9PTEpPyIwIitjOmMpO31yZXR1cm4oZCk/YjoiIyIrYi5qb2luKCIiKTt9fSk7QXJyYXkuYWxpYXMoImV4dGVuZCIsImFwcGVuZCIpOwp2YXIgJHBpY2s9ZnVuY3Rpb24oKXtyZXR1cm4gQXJyYXkuZnJvbShhcmd1bWVudHMpLnBpY2soKTt9O1N0cmluZy5pbXBsZW1lbnQoe3Rlc3Q6ZnVuY3Rpb24oYSxiKXtyZXR1cm4oKHR5cGVPZihhKT09InJlZ2V4cCIpP2E6bmV3IFJlZ0V4cCgiIithLGIpKS50ZXN0KHRoaXMpOwp9LGNvbnRhaW5zOmZ1bmN0aW9uKGEsYil7cmV0dXJuKGIpPyhiK3RoaXMrYikuaW5kZXhPZihiK2ErYik+LTE6dGhpcy5pbmRleE9mKGEpPi0xO30sdHJpbTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnJlcGxhY2UoL15ccyt8XHMrJC9nLCIiKTt9LGNsZWFuOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmVwbGFjZSgvXHMrL2csIiAiKS50cmltKCk7Cn0sY2FtZWxDYXNlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmVwbGFjZSgvLVxEL2csZnVuY3Rpb24oYSl7cmV0dXJuIGEuY2hhckF0KDEpLnRvVXBwZXJDYXNlKCk7fSk7fSxoeXBoZW5hdGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yZXBsYWNlKC9bQS1aXS9nLGZ1bmN0aW9uKGEpe3JldHVybigiLSIrYS5jaGFyQXQoMCkudG9Mb3dlckNhc2UoKSk7Cn0pO30sY2FwaXRhbGl6ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnJlcGxhY2UoL1xiW2Etel0vZyxmdW5jdGlvbihhKXtyZXR1cm4gYS50b1VwcGVyQ2FzZSgpO30pO30sZXNjYXBlUmVnRXhwOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmVwbGFjZSgvKFstLiorP14ke30oKXxbXF1cL1xcXSkvZywiXFwkMSIpOwp9LHRvSW50OmZ1bmN0aW9uKGEpe3JldHVybiBwYXJzZUludCh0aGlzLGF8fDEwKTt9LHRvRmxvYXQ6ZnVuY3Rpb24oKXtyZXR1cm4gcGFyc2VGbG9hdCh0aGlzKTt9LGhleFRvUmdiOmZ1bmN0aW9uKGIpe3ZhciBhPXRoaXMubWF0Y2goL14jPyhcd3sxLDJ9KShcd3sxLDJ9KShcd3sxLDJ9KSQvKTsKcmV0dXJuKGEpP2Euc2xpY2UoMSkuaGV4VG9SZ2IoYik6bnVsbDt9LHJnYlRvSGV4OmZ1bmN0aW9uKGIpe3ZhciBhPXRoaXMubWF0Y2goL1xkezEsM30vZyk7cmV0dXJuKGEpP2EucmdiVG9IZXgoYik6bnVsbDt9LHN1YnN0aXR1dGU6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5yZXBsYWNlKGJ8fCgvXFw/XHsoW157fV0rKVx9L2cpLGZ1bmN0aW9uKGQsYyl7aWYoZC5jaGFyQXQoMCk9PSJcXCIpe3JldHVybiBkLnNsaWNlKDEpOwp9cmV0dXJuKGFbY10hPW51bGwpP2FbY106IiI7fSk7fX0pO051bWJlci5pbXBsZW1lbnQoe2xpbWl0OmZ1bmN0aW9uKGIsYSl7cmV0dXJuIE1hdGgubWluKGEsTWF0aC5tYXgoYix0aGlzKSk7fSxyb3VuZDpmdW5jdGlvbihhKXthPU1hdGgucG93KDEwLGF8fDApLnRvRml4ZWQoYTwwPy1hOjApOwpyZXR1cm4gTWF0aC5yb3VuZCh0aGlzKmEpL2E7fSx0aW1lczpmdW5jdGlvbihiLGMpe2Zvcih2YXIgYT0wO2E8dGhpczthKyspe2IuY2FsbChjLGEsdGhpcyk7fX0sdG9GbG9hdDpmdW5jdGlvbigpe3JldHVybiBwYXJzZUZsb2F0KHRoaXMpO30sdG9JbnQ6ZnVuY3Rpb24oYSl7cmV0dXJuIHBhcnNlSW50KHRoaXMsYXx8MTApOwp9fSk7TnVtYmVyLmFsaWFzKCJlYWNoIiwidGltZXMiKTsoZnVuY3Rpb24oYil7dmFyIGE9e307Yi5lYWNoKGZ1bmN0aW9uKGMpe2lmKCFOdW1iZXJbY10pe2FbY109ZnVuY3Rpb24oKXtyZXR1cm4gTWF0aFtjXS5hcHBseShudWxsLFt0aGlzXS5jb25jYXQoQXJyYXkuZnJvbShhcmd1bWVudHMpKSk7Cn07fX0pO051bWJlci5pbXBsZW1lbnQoYSk7fSkoWyJhYnMiLCJhY29zIiwiYXNpbiIsImF0YW4iLCJhdGFuMiIsImNlaWwiLCJjb3MiLCJleHAiLCJmbG9vciIsImxvZyIsIm1heCIsIm1pbiIsInBvdyIsInNpbiIsInNxcnQiLCJ0YW4iXSk7RnVuY3Rpb24uZXh0ZW5kKHthdHRlbXB0OmZ1bmN0aW9uKCl7Zm9yKHZhciBiPTAsYT1hcmd1bWVudHMubGVuZ3RoOwpiPGE7YisrKXt0cnl7cmV0dXJuIGFyZ3VtZW50c1tiXSgpO31jYXRjaChjKXt9fXJldHVybiBudWxsO319KTtGdW5jdGlvbi5pbXBsZW1lbnQoe2F0dGVtcHQ6ZnVuY3Rpb24oYSxjKXt0cnl7cmV0dXJuIHRoaXMuYXBwbHkoYyxBcnJheS5mcm9tKGEpKTt9Y2F0Y2goYil7fXJldHVybiBudWxsOwp9LGJpbmQ6ZnVuY3Rpb24oYyl7dmFyIGE9dGhpcyxiPShhcmd1bWVudHMubGVuZ3RoPjEpP0FycmF5LnNsaWNlKGFyZ3VtZW50cywxKTpudWxsO3JldHVybiBmdW5jdGlvbigpe2lmKCFiJiYhYXJndW1lbnRzLmxlbmd0aCl7cmV0dXJuIGEuY2FsbChjKTt9aWYoYiYmYXJndW1lbnRzLmxlbmd0aCl7cmV0dXJuIGEuYXBwbHkoYyxiLmNvbmNhdChBcnJheS5mcm9tKGFyZ3VtZW50cykpKTsKfXJldHVybiBhLmFwcGx5KGMsYnx8YXJndW1lbnRzKTt9O30scGFzczpmdW5jdGlvbihiLGMpe3ZhciBhPXRoaXM7aWYoYiE9bnVsbCl7Yj1BcnJheS5mcm9tKGIpO31yZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gYS5hcHBseShjLGJ8fGFyZ3VtZW50cyk7fTt9LGRlbGF5OmZ1bmN0aW9uKGIsYyxhKXtyZXR1cm4gc2V0VGltZW91dCh0aGlzLnBhc3MoKGE9PW51bGw/W106YSksYyksYik7Cn0scGVyaW9kaWNhbDpmdW5jdGlvbihjLGIsYSl7cmV0dXJuIHNldEludGVydmFsKHRoaXMucGFzcygoYT09bnVsbD9bXTphKSxiKSxjKTt9fSk7ZGVsZXRlIEZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kO0Z1bmN0aW9uLmltcGxlbWVudCh7Y3JlYXRlOmZ1bmN0aW9uKGIpe3ZhciBhPXRoaXM7CmI9Ynx8e307cmV0dXJuIGZ1bmN0aW9uKGQpe3ZhciBjPWIuYXJndW1lbnRzO2M9KGMhPW51bGwpP0FycmF5LmZyb20oYyk6QXJyYXkuc2xpY2UoYXJndW1lbnRzLChiLmV2ZW50KT8xOjApO2lmKGIuZXZlbnQpe2M9W2R8fHdpbmRvdy5ldmVudF0uZXh0ZW5kKGMpO312YXIgZT1mdW5jdGlvbigpe3JldHVybiBhLmFwcGx5KGIuYmluZHx8bnVsbCxjKTsKfTtpZihiLmRlbGF5KXtyZXR1cm4gc2V0VGltZW91dChlLGIuZGVsYXkpO31pZihiLnBlcmlvZGljYWwpe3JldHVybiBzZXRJbnRlcnZhbChlLGIucGVyaW9kaWNhbCk7fWlmKGIuYXR0ZW1wdCl7cmV0dXJuIEZ1bmN0aW9uLmF0dGVtcHQoZSk7fXJldHVybiBlKCk7fTsKfSxiaW5kOmZ1bmN0aW9uKGMsYil7dmFyIGE9dGhpcztpZihiIT1udWxsKXtiPUFycmF5LmZyb20oYik7fXJldHVybiBmdW5jdGlvbigpe3JldHVybiBhLmFwcGx5KGMsYnx8YXJndW1lbnRzKTt9O30sYmluZFdpdGhFdmVudDpmdW5jdGlvbihjLGIpe3ZhciBhPXRoaXM7CmlmKGIhPW51bGwpe2I9QXJyYXkuZnJvbShiKTt9cmV0dXJuIGZ1bmN0aW9uKGQpe3JldHVybiBhLmFwcGx5KGMsKGI9PW51bGwpP2FyZ3VtZW50czpbZF0uY29uY2F0KGIpKTt9O30scnVuOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuYXBwbHkoYixBcnJheS5mcm9tKGEpKTsKfX0pO3ZhciAkdHJ5PUZ1bmN0aW9uLmF0dGVtcHQ7KGZ1bmN0aW9uKCl7dmFyIGE9T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtPYmplY3QuZXh0ZW5kKHtzdWJzZXQ6ZnVuY3Rpb24oZCxnKXt2YXIgZj17fTtmb3IodmFyIGU9MCxiPWcubGVuZ3RoO2U8YjsKZSsrKXt2YXIgYz1nW2VdO2ZbY109ZFtjXTt9cmV0dXJuIGY7fSxtYXA6ZnVuY3Rpb24oYixlLGYpe3ZhciBkPXt9O2Zvcih2YXIgYyBpbiBiKXtpZihhLmNhbGwoYixjKSl7ZFtjXT1lLmNhbGwoZixiW2NdLGMsYik7fX1yZXR1cm4gZDt9LGZpbHRlcjpmdW5jdGlvbihiLGQsZSl7dmFyIGM9e307Ck9iamVjdC5lYWNoKGIsZnVuY3Rpb24oZyxmKXtpZihkLmNhbGwoZSxnLGYsYikpe2NbZl09Zzt9fSk7cmV0dXJuIGM7fSxldmVyeTpmdW5jdGlvbihiLGQsZSl7Zm9yKHZhciBjIGluIGIpe2lmKGEuY2FsbChiLGMpJiYhZC5jYWxsKGUsYltjXSxjKSl7cmV0dXJuIGZhbHNlOwp9fXJldHVybiB0cnVlO30sc29tZTpmdW5jdGlvbihiLGQsZSl7Zm9yKHZhciBjIGluIGIpe2lmKGEuY2FsbChiLGMpJiZkLmNhbGwoZSxiW2NdLGMpKXtyZXR1cm4gdHJ1ZTt9fXJldHVybiBmYWxzZTt9LGtleXM6ZnVuY3Rpb24oYil7dmFyIGQ9W107Zm9yKHZhciBjIGluIGIpe2lmKGEuY2FsbChiLGMpKXtkLnB1c2goYyk7Cn19cmV0dXJuIGQ7fSx2YWx1ZXM6ZnVuY3Rpb24oYyl7dmFyIGI9W107Zm9yKHZhciBkIGluIGMpe2lmKGEuY2FsbChjLGQpKXtiLnB1c2goY1tkXSk7fX1yZXR1cm4gYjt9LGdldExlbmd0aDpmdW5jdGlvbihiKXtyZXR1cm4gT2JqZWN0LmtleXMoYikubGVuZ3RoO30sa2V5T2Y6ZnVuY3Rpb24oYixkKXtmb3IodmFyIGMgaW4gYil7aWYoYS5jYWxsKGIsYykmJmJbY109PT1kKXtyZXR1cm4gYzsKfX1yZXR1cm4gbnVsbDt9LGNvbnRhaW5zOmZ1bmN0aW9uKGIsYyl7cmV0dXJuIE9iamVjdC5rZXlPZihiLGMpIT1udWxsO30sdG9RdWVyeVN0cmluZzpmdW5jdGlvbihiLGMpe3ZhciBkPVtdO09iamVjdC5lYWNoKGIsZnVuY3Rpb24oaCxnKXtpZihjKXtnPWMrIlsiK2crIl0iOwp9dmFyIGY7c3dpdGNoKHR5cGVPZihoKSl7Y2FzZSJvYmplY3QiOmY9T2JqZWN0LnRvUXVlcnlTdHJpbmcoaCxnKTticmVhaztjYXNlImFycmF5Ijp2YXIgZT17fTtoLmVhY2goZnVuY3Rpb24oayxqKXtlW2pdPWs7fSk7Zj1PYmplY3QudG9RdWVyeVN0cmluZyhlLGcpOwpicmVhaztkZWZhdWx0OmY9ZysiPSIrZW5jb2RlVVJJQ29tcG9uZW50KGgpO31pZihoIT1udWxsKXtkLnB1c2goZik7fX0pO3JldHVybiBkLmpvaW4oIiYiKTt9fSk7fSkoKTtIYXNoLmltcGxlbWVudCh7aGFzOk9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHksa2V5T2Y6ZnVuY3Rpb24oYSl7cmV0dXJuIE9iamVjdC5rZXlPZih0aGlzLGEpOwp9LGhhc1ZhbHVlOmZ1bmN0aW9uKGEpe3JldHVybiBPYmplY3QuY29udGFpbnModGhpcyxhKTt9LGV4dGVuZDpmdW5jdGlvbihhKXtIYXNoLmVhY2goYXx8e30sZnVuY3Rpb24oYyxiKXtIYXNoLnNldCh0aGlzLGIsYyk7fSx0aGlzKTtyZXR1cm4gdGhpczt9LGNvbWJpbmU6ZnVuY3Rpb24oYSl7SGFzaC5lYWNoKGF8fHt9LGZ1bmN0aW9uKGMsYil7SGFzaC5pbmNsdWRlKHRoaXMsYixjKTsKfSx0aGlzKTtyZXR1cm4gdGhpczt9LGVyYXNlOmZ1bmN0aW9uKGEpe2lmKHRoaXMuaGFzT3duUHJvcGVydHkoYSkpe2RlbGV0ZSB0aGlzW2FdO31yZXR1cm4gdGhpczt9LGdldDpmdW5jdGlvbihhKXtyZXR1cm4odGhpcy5oYXNPd25Qcm9wZXJ0eShhKSk/dGhpc1thXTpudWxsOwp9LHNldDpmdW5jdGlvbihhLGIpe2lmKCF0aGlzW2FdfHx0aGlzLmhhc093blByb3BlcnR5KGEpKXt0aGlzW2FdPWI7fXJldHVybiB0aGlzO30sZW1wdHk6ZnVuY3Rpb24oKXtIYXNoLmVhY2godGhpcyxmdW5jdGlvbihiLGEpe2RlbGV0ZSB0aGlzW2FdO30sdGhpcyk7CnJldHVybiB0aGlzO30saW5jbHVkZTpmdW5jdGlvbihhLGIpe2lmKHRoaXNbYV09PW51bGwpe3RoaXNbYV09Yjt9cmV0dXJuIHRoaXM7fSxtYXA6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbmV3IEhhc2goT2JqZWN0Lm1hcCh0aGlzLGEsYikpO30sZmlsdGVyOmZ1bmN0aW9uKGEsYil7cmV0dXJuIG5ldyBIYXNoKE9iamVjdC5maWx0ZXIodGhpcyxhLGIpKTsKfSxldmVyeTpmdW5jdGlvbihhLGIpe3JldHVybiBPYmplY3QuZXZlcnkodGhpcyxhLGIpO30sc29tZTpmdW5jdGlvbihhLGIpe3JldHVybiBPYmplY3Quc29tZSh0aGlzLGEsYik7fSxnZXRLZXlzOmZ1bmN0aW9uKCl7cmV0dXJuIE9iamVjdC5rZXlzKHRoaXMpO30sZ2V0VmFsdWVzOmZ1bmN0aW9uKCl7cmV0dXJuIE9iamVjdC52YWx1ZXModGhpcyk7Cn0sdG9RdWVyeVN0cmluZzpmdW5jdGlvbihhKXtyZXR1cm4gT2JqZWN0LnRvUXVlcnlTdHJpbmcodGhpcyxhKTt9fSk7SGFzaC5leHRlbmQ9T2JqZWN0LmFwcGVuZDtIYXNoLmFsaWFzKHtpbmRleE9mOiJrZXlPZiIsY29udGFpbnM6Imhhc1ZhbHVlIn0pOyhmdW5jdGlvbigpe3ZhciBsPXRoaXMuZG9jdW1lbnQ7CnZhciBqPWwud2luZG93PXRoaXM7dmFyIGI9MTt0aGlzLiR1aWQ9KGouQWN0aXZlWE9iamVjdCk/ZnVuY3Rpb24oZSl7cmV0dXJuKGUudWlkfHwoZS51aWQ9W2IrK10pKVswXTt9OmZ1bmN0aW9uKGUpe3JldHVybiBlLnVpZHx8KGUudWlkPWIrKyk7fTskdWlkKGopOyR1aWQobCk7CnZhciBhPW5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKSxjPW5hdmlnYXRvci5wbGF0Zm9ybS50b0xvd2VyQ2FzZSgpLGs9YS5tYXRjaCgvKG9wZXJhfGllfGZpcmVmb3h8Y2hyb21lfHZlcnNpb24pW1xzXC86XShbXHdcZFwuXSspPy4qPyhzYWZhcml8dmVyc2lvbltcc1wvOl0oW1x3XGRcLl0rKXwkKS8pfHxbbnVsbCwidW5rbm93biIsMF0sZz1rWzFdPT0iaWUiJiZsLmRvY3VtZW50TW9kZTsKdmFyIHA9dGhpcy5Ccm93c2VyPXtleHRlbmQ6RnVuY3Rpb24ucHJvdG90eXBlLmV4dGVuZCxuYW1lOihrWzFdPT0idmVyc2lvbiIpP2tbM106a1sxXSx2ZXJzaW9uOmd8fHBhcnNlRmxvYXQoKGtbMV09PSJvcGVyYSImJmtbNF0pP2tbNF06a1syXSksUGxhdGZvcm06e25hbWU6YS5tYXRjaCgvaXAoPzphZHxvZHxob25lKS8pPyJpb3MiOihhLm1hdGNoKC8oPzp3ZWJvc3xhbmRyb2lkKS8pfHxjLm1hdGNoKC9tYWN8d2lufGxpbnV4Lyl8fFsib3RoZXIiXSlbMF19LEZlYXR1cmVzOnt4cGF0aDohIShsLmV2YWx1YXRlKSxhaXI6ISEoai5ydW50aW1lKSxxdWVyeTohIShsLnF1ZXJ5U2VsZWN0b3IpLGpzb246ISEoai5KU09OKX0sUGx1Z2luczp7fX07CnBbcC5uYW1lXT10cnVlO3BbcC5uYW1lK3BhcnNlSW50KHAudmVyc2lvbiwxMCldPXRydWU7cC5QbGF0Zm9ybVtwLlBsYXRmb3JtLm5hbWVdPXRydWU7cC5SZXF1ZXN0PShmdW5jdGlvbigpe3ZhciByPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBYTUxIdHRwUmVxdWVzdCgpOwp9O3ZhciBxPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBBY3RpdmVYT2JqZWN0KCJNU1hNTDIuWE1MSFRUUCIpO307dmFyIGU9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IEFjdGl2ZVhPYmplY3QoIk1pY3Jvc29mdC5YTUxIVFRQIik7fTtyZXR1cm4gRnVuY3Rpb24uYXR0ZW1wdChmdW5jdGlvbigpe3IoKTsKcmV0dXJuIHI7fSxmdW5jdGlvbigpe3EoKTtyZXR1cm4gcTt9LGZ1bmN0aW9uKCl7ZSgpO3JldHVybiBlO30pO30pKCk7cC5GZWF0dXJlcy54aHI9ISEocC5SZXF1ZXN0KTt2YXIgaT0oRnVuY3Rpb24uYXR0ZW1wdChmdW5jdGlvbigpe3JldHVybiBuYXZpZ2F0b3IucGx1Z2luc1siU2hvY2t3YXZlIEZsYXNoIl0uZGVzY3JpcHRpb247Cn0sZnVuY3Rpb24oKXtyZXR1cm4gbmV3IEFjdGl2ZVhPYmplY3QoIlNob2Nrd2F2ZUZsYXNoLlNob2Nrd2F2ZUZsYXNoIikuR2V0VmFyaWFibGUoIiR2ZXJzaW9uIik7fSl8fCIwIHIwIikubWF0Y2goL1xkKy9nKTtwLlBsdWdpbnMuRmxhc2g9e3ZlcnNpb246TnVtYmVyKGlbMF18fCIwLiIraVsxXSl8fDAsYnVpbGQ6TnVtYmVyKGlbMl0pfHwwfTsKcC5leGVjPWZ1bmN0aW9uKHEpe2lmKCFxKXtyZXR1cm4gcTt9aWYoai5leGVjU2NyaXB0KXtqLmV4ZWNTY3JpcHQocSk7fWVsc2V7dmFyIGU9bC5jcmVhdGVFbGVtZW50KCJzY3JpcHQiKTtlLnNldEF0dHJpYnV0ZSgidHlwZSIsInRleHQvamF2YXNjcmlwdCIpO2UudGV4dD1xOwpsLmhlYWQuYXBwZW5kQ2hpbGQoZSk7bC5oZWFkLnJlbW92ZUNoaWxkKGUpO31yZXR1cm4gcTt9O1N0cmluZy5pbXBsZW1lbnQoInN0cmlwU2NyaXB0cyIsZnVuY3Rpb24ocSl7dmFyIGU9IiI7dmFyIHI9dGhpcy5yZXBsYWNlKC88c2NyaXB0W14+XSo+KFtcc1xTXSo/KTxcL3NjcmlwdD4vZ2ksZnVuY3Rpb24ocyx0KXtlKz10KyJcbiI7CnJldHVybiIiO30pO2lmKHE9PT10cnVlKXtwLmV4ZWMoZSk7fWVsc2V7aWYodHlwZU9mKHEpPT0iZnVuY3Rpb24iKXtxKGUscik7fX1yZXR1cm4gcjt9KTtwLmV4dGVuZCh7RG9jdW1lbnQ6dGhpcy5Eb2N1bWVudCxXaW5kb3c6dGhpcy5XaW5kb3csRWxlbWVudDp0aGlzLkVsZW1lbnQsRXZlbnQ6dGhpcy5FdmVudH0pOwp0aGlzLldpbmRvdz10aGlzLiRjb25zdHJ1Y3Rvcj1uZXcgVHlwZSgiV2luZG93IixmdW5jdGlvbigpe30pO3RoaXMuJGZhbWlseT1GdW5jdGlvbi5mcm9tKCJ3aW5kb3ciKS5oaWRlKCk7V2luZG93Lm1pcnJvcihmdW5jdGlvbihlLHEpe2pbZV09cTt9KTt0aGlzLkRvY3VtZW50PWwuJGNvbnN0cnVjdG9yPW5ldyBUeXBlKCJEb2N1bWVudCIsZnVuY3Rpb24oKXt9KTsKbC4kZmFtaWx5PUZ1bmN0aW9uLmZyb20oImRvY3VtZW50IikuaGlkZSgpO0RvY3VtZW50Lm1pcnJvcihmdW5jdGlvbihlLHEpe2xbZV09cTt9KTtsLmh0bWw9bC5kb2N1bWVudEVsZW1lbnQ7bC5oZWFkPWwuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImhlYWQiKVswXTtpZihsLmV4ZWNDb21tYW5kKXt0cnl7bC5leGVjQ29tbWFuZCgiQmFja2dyb3VuZEltYWdlQ2FjaGUiLGZhbHNlLHRydWUpOwp9Y2F0Y2goaCl7fX1pZih0aGlzLmF0dGFjaEV2ZW50JiYhdGhpcy5hZGRFdmVudExpc3RlbmVyKXt2YXIgZD1mdW5jdGlvbigpe3RoaXMuZGV0YWNoRXZlbnQoIm9udW5sb2FkIixkKTtsLmhlYWQ9bC5odG1sPWwud2luZG93PW51bGw7fTt0aGlzLmF0dGFjaEV2ZW50KCJvbnVubG9hZCIsZCk7Cn12YXIgbj1BcnJheS5mcm9tO3RyeXtuKGwuaHRtbC5jaGlsZE5vZGVzKTt9Y2F0Y2goaCl7QXJyYXkuZnJvbT1mdW5jdGlvbihxKXtpZih0eXBlb2YgcSE9InN0cmluZyImJlR5cGUuaXNFbnVtZXJhYmxlKHEpJiZ0eXBlT2YocSkhPSJhcnJheSIpe3ZhciBlPXEubGVuZ3RoLHI9bmV3IEFycmF5KGUpOwp3aGlsZShlLS0pe3JbZV09cVtlXTt9cmV0dXJuIHI7fXJldHVybiBuKHEpO307dmFyIG09QXJyYXkucHJvdG90eXBlLG89bS5zbGljZTtbInBvcCIsInB1c2giLCJyZXZlcnNlIiwic2hpZnQiLCJzb3J0Iiwic3BsaWNlIiwidW5zaGlmdCIsImNvbmNhdCIsImpvaW4iLCJzbGljZSJdLmVhY2goZnVuY3Rpb24oZSl7dmFyIHE9bVtlXTsKQXJyYXlbZV09ZnVuY3Rpb24ocil7cmV0dXJuIHEuYXBwbHkoQXJyYXkuZnJvbShyKSxvLmNhbGwoYXJndW1lbnRzLDEpKTt9O30pO31pZihwLlBsYXRmb3JtLmlvcyl7cC5QbGF0Zm9ybS5pcG9kPXRydWU7fXAuRW5naW5lPXt9O3ZhciBmPWZ1bmN0aW9uKHEsZSl7cC5FbmdpbmUubmFtZT1xOwpwLkVuZ2luZVtxK2VdPXRydWU7cC5FbmdpbmUudmVyc2lvbj1lO307aWYocC5pZSl7cC5FbmdpbmUudHJpZGVudD10cnVlO3N3aXRjaChwLnZlcnNpb24pe2Nhc2UgNjpmKCJ0cmlkZW50Iiw0KTticmVhaztjYXNlIDc6ZigidHJpZGVudCIsNSk7YnJlYWs7Y2FzZSA4OmYoInRyaWRlbnQiLDYpOwp9fWlmKHAuZmlyZWZveCl7cC5FbmdpbmUuZ2Vja289dHJ1ZTtpZihwLnZlcnNpb24+PTMpe2YoImdlY2tvIiwxOSk7fWVsc2V7ZigiZ2Vja28iLDE4KTt9fWlmKHAuc2FmYXJpfHxwLmNocm9tZSl7cC5FbmdpbmUud2Via2l0PXRydWU7c3dpdGNoKHAudmVyc2lvbil7Y2FzZSAyOmYoIndlYmtpdCIsNDE5KTsKYnJlYWs7Y2FzZSAzOmYoIndlYmtpdCIsNDIwKTticmVhaztjYXNlIDQ6Zigid2Via2l0Iiw1MjUpO319aWYocC5vcGVyYSl7cC5FbmdpbmUucHJlc3RvPXRydWU7aWYocC52ZXJzaW9uPj05LjYpe2YoInByZXN0byIsOTYwKTt9ZWxzZXtpZihwLnZlcnNpb24+PTkuNSl7ZigicHJlc3RvIiw5NTApOwp9ZWxzZXtmKCJwcmVzdG8iLDkyNSk7fX19aWYocC5uYW1lPT0idW5rbm93biIpe3N3aXRjaCgoYS5tYXRjaCgvKD86d2Via2l0fGtodG1sfGdlY2tvKS8pfHxbXSlbMF0pe2Nhc2Uid2Via2l0IjpjYXNlImtodG1sIjpwLkVuZ2luZS53ZWJraXQ9dHJ1ZTticmVhaztjYXNlImdlY2tvIjpwLkVuZ2luZS5nZWNrbz10cnVlOwp9fXRoaXMuJGV4ZWM9cC5leGVjO30pLmNhbGwodGhpcyk7dmFyIEV2ZW50PW5ldyBUeXBlKCJFdmVudCIsZnVuY3Rpb24oYSxpKXtpZighaSl7aT13aW5kb3c7fXZhciBvPWkuZG9jdW1lbnQ7YT1hfHxpLmV2ZW50O2lmKGEuJGV4dGVuZGVkKXtyZXR1cm4gYTt9dGhpcy4kZXh0ZW5kZWQ9dHJ1ZTsKdmFyIG49YS50eXBlLGs9YS50YXJnZXR8fGEuc3JjRWxlbWVudCxtPXt9LGM9e30scT1udWxsLGgsbCxiLHA7d2hpbGUoayYmay5ub2RlVHlwZT09Myl7az1rLnBhcmVudE5vZGU7fWlmKG4uaW5kZXhPZigia2V5IikhPS0xKXtiPWEud2hpY2h8fGEua2V5Q29kZTtwPU9iamVjdC5rZXlPZihFdmVudC5LZXlzLGIpOwppZihuPT0ia2V5ZG93biIpe3ZhciBkPWItMTExO2lmKGQ+MCYmZDwxMyl7cD0iZiIrZDt9fWlmKCFwKXtwPVN0cmluZy5mcm9tQ2hhckNvZGUoYikudG9Mb3dlckNhc2UoKTt9fWVsc2V7aWYoKC9jbGlja3xtb3VzZXxtZW51L2kpLnRlc3Qobikpe289KCFvLmNvbXBhdE1vZGV8fG8uY29tcGF0TW9kZT09IkNTUzFDb21wYXQiKT9vLmh0bWw6by5ib2R5OwptPXt4OihhLnBhZ2VYIT1udWxsKT9hLnBhZ2VYOmEuY2xpZW50WCtvLnNjcm9sbExlZnQseTooYS5wYWdlWSE9bnVsbCk/YS5wYWdlWTphLmNsaWVudFkrby5zY3JvbGxUb3B9O2M9e3g6KGEucGFnZVghPW51bGwpP2EucGFnZVgtaS5wYWdlWE9mZnNldDphLmNsaWVudFgseTooYS5wYWdlWSE9bnVsbCk/YS5wYWdlWS1pLnBhZ2VZT2Zmc2V0OmEuY2xpZW50WX07CmlmKCgvRE9NTW91c2VTY3JvbGx8bW91c2V3aGVlbC8pLnRlc3Qobikpe2w9KGEud2hlZWxEZWx0YSk/YS53aGVlbERlbHRhLzEyMDotKGEuZGV0YWlsfHwwKS8zO31oPShhLndoaWNoPT0zKXx8KGEuYnV0dG9uPT0yKTtpZigoL292ZXJ8b3V0LykudGVzdChuKSl7cT1hLnJlbGF0ZWRUYXJnZXR8fGFbKG49PSJtb3VzZW92ZXIiPyJmcm9tIjoidG8iKSsiRWxlbWVudCJdOwp2YXIgaj1mdW5jdGlvbigpe3doaWxlKHEmJnEubm9kZVR5cGU9PTMpe3E9cS5wYXJlbnROb2RlO31yZXR1cm4gdHJ1ZTt9O3ZhciBnPShCcm93c2VyLmZpcmVmb3gyKT9qLmF0dGVtcHQoKTpqKCk7cT0oZyk/cTpudWxsO319ZWxzZXtpZigoL2dlc3R1cmV8dG91Y2gvaSkudGVzdChuKSl7dGhpcy5yb3RhdGlvbj1hLnJvdGF0aW9uOwp0aGlzLnNjYWxlPWEuc2NhbGU7dGhpcy50YXJnZXRUb3VjaGVzPWEudGFyZ2V0VG91Y2hlczt0aGlzLmNoYW5nZWRUb3VjaGVzPWEuY2hhbmdlZFRvdWNoZXM7dmFyIGY9dGhpcy50b3VjaGVzPWEudG91Y2hlcztpZihmJiZmWzBdKXt2YXIgZT1mWzBdO209e3g6ZS5wYWdlWCx5OmUucGFnZVl9OwpjPXt4OmUuY2xpZW50WCx5OmUuY2xpZW50WX07fX19fXJldHVybiBPYmplY3QuYXBwZW5kKHRoaXMse2V2ZW50OmEsdHlwZTpuLHBhZ2U6bSxjbGllbnQ6YyxyaWdodENsaWNrOmgsd2hlZWw6bCxyZWxhdGVkVGFyZ2V0OmRvY3VtZW50LmlkKHEpLHRhcmdldDpkb2N1bWVudC5pZChrKSxjb2RlOmIsa2V5OnAsc2hpZnQ6YS5zaGlmdEtleSxjb250cm9sOmEuY3RybEtleSxhbHQ6YS5hbHRLZXksbWV0YTphLm1ldGFLZXl9KTsKfSk7RXZlbnQuS2V5cz17ZW50ZXI6MTMsdXA6MzgsZG93bjo0MCxsZWZ0OjM3LHJpZ2h0OjM5LGVzYzoyNyxzcGFjZTozMixiYWNrc3BhY2U6OCx0YWI6OSwiZGVsZXRlIjo0Nn07RXZlbnQuS2V5cz1uZXcgSGFzaChFdmVudC5LZXlzKTtFdmVudC5pbXBsZW1lbnQoe3N0b3A6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdG9wUHJvcGFnYXRpb24oKS5wcmV2ZW50RGVmYXVsdCgpOwp9LHN0b3BQcm9wYWdhdGlvbjpmdW5jdGlvbigpe2lmKHRoaXMuZXZlbnQuc3RvcFByb3BhZ2F0aW9uKXt0aGlzLmV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO31lbHNle3RoaXMuZXZlbnQuY2FuY2VsQnViYmxlPXRydWU7fXJldHVybiB0aGlzO30scHJldmVudERlZmF1bHQ6ZnVuY3Rpb24oKXtpZih0aGlzLmV2ZW50LnByZXZlbnREZWZhdWx0KXt0aGlzLmV2ZW50LnByZXZlbnREZWZhdWx0KCk7Cn1lbHNle3RoaXMuZXZlbnQucmV0dXJuVmFsdWU9ZmFsc2U7fXJldHVybiB0aGlzO319KTsoZnVuY3Rpb24oKXt2YXIgYT10aGlzLkNsYXNzPW5ldyBUeXBlKCJDbGFzcyIsZnVuY3Rpb24oaCl7aWYoaW5zdGFuY2VPZihoLEZ1bmN0aW9uKSl7aD17aW5pdGlhbGl6ZTpofTsKfXZhciBnPWZ1bmN0aW9uKCl7ZSh0aGlzKTtpZihnLiRwcm90b3R5cGluZyl7cmV0dXJuIHRoaXM7fXRoaXMuJGNhbGxlcj1udWxsO3ZhciBpPSh0aGlzLmluaXRpYWxpemUpP3RoaXMuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk6dGhpczt0aGlzLiRjYWxsZXI9dGhpcy5jYWxsZXI9bnVsbDsKcmV0dXJuIGk7fS5leHRlbmQodGhpcykuaW1wbGVtZW50KGgpO2cuJGNvbnN0cnVjdG9yPWE7Zy5wcm90b3R5cGUuJGNvbnN0cnVjdG9yPWc7Zy5wcm90b3R5cGUucGFyZW50PWM7cmV0dXJuIGc7fSk7dmFyIGM9ZnVuY3Rpb24oKXtpZighdGhpcy4kY2FsbGVyKXt0aHJvdyBuZXcgRXJyb3IoJ1RoZSBtZXRob2QgInBhcmVudCIgY2Fubm90IGJlIGNhbGxlZC4nKTsKfXZhciBnPXRoaXMuJGNhbGxlci4kbmFtZSxoPXRoaXMuJGNhbGxlci4kb3duZXIucGFyZW50LGk9KGgpP2gucHJvdG90eXBlW2ddOm51bGw7aWYoIWkpe3Rocm93IG5ldyBFcnJvcignVGhlIG1ldGhvZCAiJytnKyciIGhhcyBubyBwYXJlbnQuJyk7fXJldHVybiBpLmFwcGx5KHRoaXMsYXJndW1lbnRzKTsKfTt2YXIgZT1mdW5jdGlvbihnKXtmb3IodmFyIGggaW4gZyl7dmFyIGo9Z1toXTtzd2l0Y2godHlwZU9mKGopKXtjYXNlIm9iamVjdCI6dmFyIGk9ZnVuY3Rpb24oKXt9O2kucHJvdG90eXBlPWo7Z1toXT1lKG5ldyBpKTticmVhaztjYXNlImFycmF5IjpnW2hdPWouY2xvbmUoKTsKYnJlYWs7fX1yZXR1cm4gZzt9O3ZhciBiPWZ1bmN0aW9uKGcsaCxqKXtpZihqLiRvcmlnaW4pe2o9ai4kb3JpZ2luO312YXIgaT1mdW5jdGlvbigpe2lmKGouJHByb3RlY3RlZCYmdGhpcy4kY2FsbGVyPT1udWxsKXt0aHJvdyBuZXcgRXJyb3IoJ1RoZSBtZXRob2QgIicraCsnIiBjYW5ub3QgYmUgY2FsbGVkLicpOwp9dmFyIGw9dGhpcy5jYWxsZXIsbT10aGlzLiRjYWxsZXI7dGhpcy5jYWxsZXI9bTt0aGlzLiRjYWxsZXI9aTt2YXIgaz1qLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLiRjYWxsZXI9bTt0aGlzLmNhbGxlcj1sO3JldHVybiBrO30uZXh0ZW5kKHskb3duZXI6Zywkb3JpZ2luOmosJG5hbWU6aH0pOwpyZXR1cm4gaTt9O3ZhciBmPWZ1bmN0aW9uKGgsaSxnKXtpZihhLk11dGF0b3JzLmhhc093blByb3BlcnR5KGgpKXtpPWEuTXV0YXRvcnNbaF0uY2FsbCh0aGlzLGkpO2lmKGk9PW51bGwpe3JldHVybiB0aGlzO319aWYodHlwZU9mKGkpPT0iZnVuY3Rpb24iKXtpZihpLiRoaWRkZW4pe3JldHVybiB0aGlzOwp9dGhpcy5wcm90b3R5cGVbaF09KGcpP2k6Yih0aGlzLGgsaSk7fWVsc2V7T2JqZWN0Lm1lcmdlKHRoaXMucHJvdG90eXBlLGgsaSk7fXJldHVybiB0aGlzO307dmFyIGQ9ZnVuY3Rpb24oZyl7Zy4kcHJvdG90eXBpbmc9dHJ1ZTt2YXIgaD1uZXcgZztkZWxldGUgZy4kcHJvdG90eXBpbmc7CnJldHVybiBoO307YS5pbXBsZW1lbnQoImltcGxlbWVudCIsZi5vdmVybG9hZFNldHRlcigpKTthLk11dGF0b3JzPXtFeHRlbmRzOmZ1bmN0aW9uKGcpe3RoaXMucGFyZW50PWc7dGhpcy5wcm90b3R5cGU9ZChnKTt9LEltcGxlbWVudHM6ZnVuY3Rpb24oZyl7QXJyYXkuZnJvbShnKS5lYWNoKGZ1bmN0aW9uKGope3ZhciBoPW5ldyBqOwpmb3IodmFyIGkgaW4gaCl7Zi5jYWxsKHRoaXMsaSxoW2ldLHRydWUpO319LHRoaXMpO319O30pLmNhbGwodGhpcyk7KGZ1bmN0aW9uKCl7dGhpcy5DaGFpbj1uZXcgQ2xhc3MoeyRjaGFpbjpbXSxjaGFpbjpmdW5jdGlvbigpe3RoaXMuJGNoYWluLmFwcGVuZChBcnJheS5mbGF0dGVuKGFyZ3VtZW50cykpOwpyZXR1cm4gdGhpczt9LGNhbGxDaGFpbjpmdW5jdGlvbigpe3JldHVybih0aGlzLiRjaGFpbi5sZW5ndGgpP3RoaXMuJGNoYWluLnNoaWZ0KCkuYXBwbHkodGhpcyxhcmd1bWVudHMpOmZhbHNlO30sY2xlYXJDaGFpbjpmdW5jdGlvbigpe3RoaXMuJGNoYWluLmVtcHR5KCk7CnJldHVybiB0aGlzO319KTt2YXIgYT1mdW5jdGlvbihiKXtyZXR1cm4gYi5yZXBsYWNlKC9eb24oW0EtWl0pLyxmdW5jdGlvbihjLGQpe3JldHVybiBkLnRvTG93ZXJDYXNlKCk7fSk7fTt0aGlzLkV2ZW50cz1uZXcgQ2xhc3MoeyRldmVudHM6e30sYWRkRXZlbnQ6ZnVuY3Rpb24oZCxjLGIpe2Q9YShkKTsKaWYoYz09JGVtcHR5KXtyZXR1cm4gdGhpczt9dGhpcy4kZXZlbnRzW2RdPSh0aGlzLiRldmVudHNbZF18fFtdKS5pbmNsdWRlKGMpO2lmKGIpe2MuaW50ZXJuYWw9dHJ1ZTt9cmV0dXJuIHRoaXM7fSxhZGRFdmVudHM6ZnVuY3Rpb24oYil7Zm9yKHZhciBjIGluIGIpe3RoaXMuYWRkRXZlbnQoYyxiW2NdKTsKfXJldHVybiB0aGlzO30sZmlyZUV2ZW50OmZ1bmN0aW9uKGUsYyxiKXtlPWEoZSk7dmFyIGQ9dGhpcy4kZXZlbnRzW2VdO2lmKCFkKXtyZXR1cm4gdGhpczt9Yz1BcnJheS5mcm9tKGMpO2QuZWFjaChmdW5jdGlvbihmKXtpZihiKXtmLmRlbGF5KGIsdGhpcyxjKTt9ZWxzZXtmLmFwcGx5KHRoaXMsYyk7Cn19LHRoaXMpO3JldHVybiB0aGlzO30scmVtb3ZlRXZlbnQ6ZnVuY3Rpb24oZSxkKXtlPWEoZSk7dmFyIGM9dGhpcy4kZXZlbnRzW2VdO2lmKGMmJiFkLmludGVybmFsKXt2YXIgYj1jLmluZGV4T2YoZCk7aWYoYiE9LTEpe2RlbGV0ZSBjW2JdO319cmV0dXJuIHRoaXM7Cn0scmVtb3ZlRXZlbnRzOmZ1bmN0aW9uKGQpe3ZhciBlO2lmKHR5cGVPZihkKT09Im9iamVjdCIpe2ZvcihlIGluIGQpe3RoaXMucmVtb3ZlRXZlbnQoZSxkW2VdKTt9cmV0dXJuIHRoaXM7fWlmKGQpe2Q9YShkKTt9Zm9yKGUgaW4gdGhpcy4kZXZlbnRzKXtpZihkJiZkIT1lKXtjb250aW51ZTsKfXZhciBjPXRoaXMuJGV2ZW50c1tlXTtmb3IodmFyIGI9Yy5sZW5ndGg7Yi0tOyl7aWYoYiBpbiBjKXt0aGlzLnJlbW92ZUV2ZW50KGUsY1tiXSk7fX19cmV0dXJuIHRoaXM7fX0pO3RoaXMuT3B0aW9ucz1uZXcgQ2xhc3Moe3NldE9wdGlvbnM6ZnVuY3Rpb24oKXt2YXIgYj10aGlzLm9wdGlvbnM9T2JqZWN0Lm1lcmdlLmFwcGx5KG51bGwsW3t9LHRoaXMub3B0aW9uc10uYXBwZW5kKGFyZ3VtZW50cykpOwppZih0aGlzLmFkZEV2ZW50KXtmb3IodmFyIGMgaW4gYil7aWYodHlwZU9mKGJbY10pIT0iZnVuY3Rpb24ifHwhKC9eb25bQS1aXS8pLnRlc3QoYykpe2NvbnRpbnVlO310aGlzLmFkZEV2ZW50KGMsYltjXSk7ZGVsZXRlIGJbY107fX1yZXR1cm4gdGhpczt9fSk7fSkuY2FsbCh0aGlzKTsKKGZ1bmN0aW9uKCl7dmFyIGssbixsLGcsYT17fSxjPXt9LG09L1xcL2c7dmFyIGU9ZnVuY3Rpb24ocSxwKXtpZihxPT1udWxsKXtyZXR1cm4gbnVsbDt9aWYocS5TbGljaz09PXRydWUpe3JldHVybiBxO31xPSgiIitxKS5yZXBsYWNlKC9eXHMrfFxzKyQvZywiIik7Zz0hIXA7CnZhciBvPShnKT9jOmE7aWYob1txXSl7cmV0dXJuIG9bcV07fWs9e1NsaWNrOnRydWUsZXhwcmVzc2lvbnM6W10scmF3OnEscmV2ZXJzZTpmdW5jdGlvbigpe3JldHVybiBlKHRoaXMucmF3LHRydWUpO319O249LTE7d2hpbGUocSE9KHE9cS5yZXBsYWNlKGosYikpKXt9ay5sZW5ndGg9ay5leHByZXNzaW9ucy5sZW5ndGg7CnJldHVybiBvW2sucmF3XT0oZyk/aChrKTprO307dmFyIGk9ZnVuY3Rpb24obyl7aWYobz09PSIhIil7cmV0dXJuIiAiO31lbHNle2lmKG89PT0iICIpe3JldHVybiIhIjt9ZWxzZXtpZigoL14hLykudGVzdChvKSl7cmV0dXJuIG8ucmVwbGFjZSgvXiEvLCIiKTt9ZWxzZXtyZXR1cm4iISIrbzsKfX19fTt2YXIgaD1mdW5jdGlvbih1KXt2YXIgcj11LmV4cHJlc3Npb25zO2Zvcih2YXIgcD0wO3A8ci5sZW5ndGg7cCsrKXt2YXIgdD1yW3BdO3ZhciBxPXtwYXJ0czpbXSx0YWc6IioiLGNvbWJpbmF0b3I6aSh0WzBdLmNvbWJpbmF0b3IpfTtmb3IodmFyIG89MDtvPHQubGVuZ3RoOwpvKyspe3ZhciBzPXRbb107aWYoIXMucmV2ZXJzZUNvbWJpbmF0b3Ipe3MucmV2ZXJzZUNvbWJpbmF0b3I9IiAiO31zLmNvbWJpbmF0b3I9cy5yZXZlcnNlQ29tYmluYXRvcjtkZWxldGUgcy5yZXZlcnNlQ29tYmluYXRvcjt9dC5yZXZlcnNlKCkucHVzaChxKTt9cmV0dXJuIHU7Cn07dmFyIGY9ZnVuY3Rpb24obyl7cmV0dXJuIG8ucmVwbGFjZSgvWy1bXF17fSgpKis/LlxcXiR8LCNcc10vZyxmdW5jdGlvbihwKXtyZXR1cm4iXFwiK3A7fSk7fTt2YXIgaj1uZXcgUmVnRXhwKCJeKD86XFxzKigsKVxccyp8XFxzKig8Y29tYmluYXRvcj4rKVxccyp8KFxccyspfCg8dW5pY29kZT4rfFxcKil8XFwjKDx1bmljb2RlPispfFxcLig8dW5pY29kZT4rKXxcXFtcXHMqKDx1bmljb2RlMT4rKSg/OlxccyooWypeJCF+fF0/PSkoPzpcXHMqKD86KFtcIiddPykoLio/KVxcOSkpKT9cXHMqXFxdKD8hXFxdKXwoOispKDx1bmljb2RlPispKD86XFwoKD86KD86KFtcIiddKShbXlxcMTNdKilcXDEzKXwoKD86XFwoW14pXStcXCl8W14oKV0qKSspKVxcKSk/KSIucmVwbGFjZSgvPGNvbWJpbmF0b3I+LywiWyIrZigiPit+YCFAJCVeJj17fVxcOzwvIikrIl0iKS5yZXBsYWNlKC88dW5pY29kZT4vZywiKD86W1xcd1xcdTAwYTEtXFx1RkZGRi1dfFxcXFxbXlxcczAtOWEtZl0pIikucmVwbGFjZSgvPHVuaWNvZGUxPi9nLCIoPzpbOlxcd1xcdTAwYTEtXFx1RkZGRi1dfFxcXFxbXlxcczAtOWEtZl0pIikpOwpmdW5jdGlvbiBiKHgscyxELHoscixDLHEsQixBLHksdSxGLEcsdixwLHcpe2lmKHN8fG49PT0tMSl7ay5leHByZXNzaW9uc1srK25dPVtdO2w9LTE7aWYocyl7cmV0dXJuIiI7fX1pZihEfHx6fHxsPT09LTEpe0Q9RHx8IiAiO3ZhciB0PWsuZXhwcmVzc2lvbnNbbl07CmlmKGcmJnRbbF0pe3RbbF0ucmV2ZXJzZUNvbWJpbmF0b3I9aShEKTt9dFsrK2xdPXtjb21iaW5hdG9yOkQsdGFnOiIqIn07fXZhciBvPWsuZXhwcmVzc2lvbnNbbl1bbF07aWYocil7by50YWc9ci5yZXBsYWNlKG0sIiIpO31lbHNle2lmKEMpe28uaWQ9Qy5yZXBsYWNlKG0sIiIpOwp9ZWxzZXtpZihxKXtxPXEucmVwbGFjZShtLCIiKTtpZighby5jbGFzc0xpc3Qpe28uY2xhc3NMaXN0PVtdO31pZighby5jbGFzc2VzKXtvLmNsYXNzZXM9W107fW8uY2xhc3NMaXN0LnB1c2gocSk7by5jbGFzc2VzLnB1c2goe3ZhbHVlOnEscmVnZXhwOm5ldyBSZWdFeHAoIihefFxccykiK2YocSkrIihcXHN8JCkiKX0pOwp9ZWxzZXtpZihHKXt3PXd8fHA7dz13P3cucmVwbGFjZShtLCIiKTpudWxsO2lmKCFvLnBzZXVkb3Mpe28ucHNldWRvcz1bXTt9by5wc2V1ZG9zLnB1c2goe2tleTpHLnJlcGxhY2UobSwiIiksdmFsdWU6dyx0eXBlOkYubGVuZ3RoPT0xPyJjbGFzcyI6ImVsZW1lbnQifSk7Cn1lbHNle2lmKEIpe0I9Qi5yZXBsYWNlKG0sIiIpO3U9KHV8fCIiKS5yZXBsYWNlKG0sIiIpO3ZhciBFLEg7c3dpdGNoKEEpe2Nhc2UiXj0iOkg9bmV3IFJlZ0V4cCgiXiIrZih1KSk7YnJlYWs7Y2FzZSIkPSI6SD1uZXcgUmVnRXhwKGYodSkrIiQiKTticmVhaztjYXNlIn49IjpIPW5ldyBSZWdFeHAoIihefFxccykiK2YodSkrIihcXHN8JCkiKTsKYnJlYWs7Y2FzZSJ8PSI6SD1uZXcgUmVnRXhwKCJeIitmKHUpKyIoLXwkKSIpO2JyZWFrO2Nhc2UiPSI6RT1mdW5jdGlvbihJKXtyZXR1cm4gdT09STt9O2JyZWFrO2Nhc2UiKj0iOkU9ZnVuY3Rpb24oSSl7cmV0dXJuIEkmJkkuaW5kZXhPZih1KT4tMTt9O2JyZWFrOwpjYXNlIiE9IjpFPWZ1bmN0aW9uKEkpe3JldHVybiB1IT1JO307YnJlYWs7ZGVmYXVsdDpFPWZ1bmN0aW9uKEkpe3JldHVybiAhIUk7fTt9aWYodT09IiImJigvXlsqJF5dPSQvKS50ZXN0KEEpKXtFPWZ1bmN0aW9uKCl7cmV0dXJuIGZhbHNlO307fWlmKCFFKXtFPWZ1bmN0aW9uKEkpe3JldHVybiBJJiZILnRlc3QoSSk7Cn07fWlmKCFvLmF0dHJpYnV0ZXMpe28uYXR0cmlidXRlcz1bXTt9by5hdHRyaWJ1dGVzLnB1c2goe2tleTpCLG9wZXJhdG9yOkEsdmFsdWU6dSx0ZXN0OkV9KTt9fX19fXJldHVybiIiO312YXIgZD0odGhpcy5TbGlja3x8e30pO2QucGFyc2U9ZnVuY3Rpb24obyl7cmV0dXJuIGUobyk7Cn07ZC5lc2NhcGVSZWdFeHA9ZjtpZighdGhpcy5TbGljayl7dGhpcy5TbGljaz1kO319KS5hcHBseSgodHlwZW9mIGV4cG9ydHMhPSJ1bmRlZmluZWQiKT9leHBvcnRzOnRoaXMpOyhmdW5jdGlvbigpe3ZhciBqPXt9LGw9e30sYj1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nOwpqLmlzTmF0aXZlQ29kZT1mdW5jdGlvbihjKXtyZXR1cm4oL1x7XHMqXFtuYXRpdmUgY29kZVxdXHMqXH0vKS50ZXN0KCIiK2MpO307ai5pc1hNTD1mdW5jdGlvbihjKXtyZXR1cm4oISFjLnhtbFZlcnNpb24pfHwoISFjLnhtbCl8fChiLmNhbGwoYyk9PSJbb2JqZWN0IFhNTERvY3VtZW50XSIpfHwoYy5ub2RlVHlwZT09OSYmYy5kb2N1bWVudEVsZW1lbnQubm9kZU5hbWUhPSJIVE1MIik7Cn07ai5zZXREb2N1bWVudD1mdW5jdGlvbih3KXt2YXIgdD13Lm5vZGVUeXBlO2lmKHQ9PTkpe31lbHNle2lmKHQpe3c9dy5vd25lckRvY3VtZW50O31lbHNle2lmKHcubmF2aWdhdG9yKXt3PXcuZG9jdW1lbnQ7fWVsc2V7cmV0dXJuO319fWlmKHRoaXMuZG9jdW1lbnQ9PT13KXtyZXR1cm47Cn10aGlzLmRvY3VtZW50PXc7dmFyIHk9dy5kb2N1bWVudEVsZW1lbnQsdT10aGlzLmdldFVJRFhNTCh5KSxvPWxbdV0sQTtpZihvKXtmb3IoQSBpbiBvKXt0aGlzW0FdPW9bQV07fXJldHVybjt9bz1sW3VdPXt9O28ucm9vdD15O28uaXNYTUxEb2N1bWVudD10aGlzLmlzWE1MKHcpOwpvLmJyb2tlblN0YXJHRUJUTj1vLnN0YXJTZWxlY3RzQ2xvc2VkUVNBPW8uaWRHZXRzTmFtZT1vLmJyb2tlbk1peGVkQ2FzZVFTQT1vLmJyb2tlbkdFQkNOPW8uYnJva2VuQ2hlY2tlZFFTQT1vLmJyb2tlbkVtcHR5QXR0cmlidXRlUVNBPW8uaXNIVE1MRG9jdW1lbnQ9by5uYXRpdmVNYXRjaGVzU2VsZWN0b3I9ZmFsc2U7CnZhciBtLG4seCxxLHI7dmFyIHMsYz0ic2xpY2tfdW5pcXVlaWQiO3ZhciB6PXcuY3JlYXRlRWxlbWVudCgiZGl2Iik7dmFyIHA9dy5ib2R5fHx3LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJib2R5IilbMF18fHk7cC5hcHBlbmRDaGlsZCh6KTt0cnl7ei5pbm5lckhUTUw9JzxhIGlkPSInK2MrJyI+PC9hPic7Cm8uaXNIVE1MRG9jdW1lbnQ9ISF3LmdldEVsZW1lbnRCeUlkKGMpO31jYXRjaCh2KXt9aWYoby5pc0hUTUxEb2N1bWVudCl7ei5zdHlsZS5kaXNwbGF5PSJub25lIjt6LmFwcGVuZENoaWxkKHcuY3JlYXRlQ29tbWVudCgiIikpO249KHouZ2V0RWxlbWVudHNCeVRhZ05hbWUoIioiKS5sZW5ndGg+MSk7CnRyeXt6LmlubmVySFRNTD0iZm9vPC9mb28+IjtzPXouZ2V0RWxlbWVudHNCeVRhZ05hbWUoIioiKTttPShzJiYhIXMubGVuZ3RoJiZzWzBdLm5vZGVOYW1lLmNoYXJBdCgwKT09Ii8iKTt9Y2F0Y2godil7fW8uYnJva2VuU3RhckdFQlROPW58fG07dHJ5e3ouaW5uZXJIVE1MPSc8YSBuYW1lPSInK2MrJyI+PC9hPjxiIGlkPSInK2MrJyI+PC9iPic7Cm8uaWRHZXRzTmFtZT13LmdldEVsZW1lbnRCeUlkKGMpPT09ei5maXJzdENoaWxkO31jYXRjaCh2KXt9aWYoei5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKXt0cnl7ei5pbm5lckhUTUw9JzxhIGNsYXNzPSJmIj48L2E+PGEgY2xhc3M9ImIiPjwvYT4nO3ouZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgiYiIpLmxlbmd0aDsKei5maXJzdENoaWxkLmNsYXNzTmFtZT0iYiI7cT0oei5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJiIikubGVuZ3RoIT0yKTt9Y2F0Y2godil7fXRyeXt6LmlubmVySFRNTD0nPGEgY2xhc3M9ImEiPjwvYT48YSBjbGFzcz0iZiBiIGEiPjwvYT4nO3g9KHouZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgiYSIpLmxlbmd0aCE9Mik7Cn1jYXRjaCh2KXt9by5icm9rZW5HRUJDTj1xfHx4O31pZih6LnF1ZXJ5U2VsZWN0b3JBbGwpe3RyeXt6LmlubmVySFRNTD0iZm9vPC9mb28+IjtzPXoucXVlcnlTZWxlY3RvckFsbCgiKiIpO28uc3RhclNlbGVjdHNDbG9zZWRRU0E9KHMmJiEhcy5sZW5ndGgmJnNbMF0ubm9kZU5hbWUuY2hhckF0KDApPT0iLyIpOwp9Y2F0Y2godil7fXRyeXt6LmlubmVySFRNTD0nPGEgY2xhc3M9Ik1pWCI+PC9hPic7by5icm9rZW5NaXhlZENhc2VRU0E9IXoucXVlcnlTZWxlY3RvckFsbCgiLk1pWCIpLmxlbmd0aDt9Y2F0Y2godil7fXRyeXt6LmlubmVySFRNTD0nPHNlbGVjdD48b3B0aW9uIHNlbGVjdGVkPSJzZWxlY3RlZCI+YTwvb3B0aW9uPjwvc2VsZWN0Pic7Cm8uYnJva2VuQ2hlY2tlZFFTQT0oei5xdWVyeVNlbGVjdG9yQWxsKCI6Y2hlY2tlZCIpLmxlbmd0aD09MCk7fWNhdGNoKHYpe310cnl7ei5pbm5lckhUTUw9JzxhIGNsYXNzPSIiPjwvYT4nO28uYnJva2VuRW1wdHlBdHRyaWJ1dGVRU0E9KHoucXVlcnlTZWxlY3RvckFsbCgnW2NsYXNzKj0iIl0nKS5sZW5ndGghPTApOwp9Y2F0Y2godil7fX10cnl7ei5pbm5lckhUTUw9Jzxmb3JtIGFjdGlvbj0icyI+PGlucHV0IGlkPSJhY3Rpb24iLz48L2Zvcm0+JztyPSh6LmZpcnN0Q2hpbGQuZ2V0QXR0cmlidXRlKCJhY3Rpb24iKSE9InMiKTt9Y2F0Y2godil7fW8ubmF0aXZlTWF0Y2hlc1NlbGVjdG9yPXkubWF0Y2hlc1NlbGVjdG9yfHx5Lm1vek1hdGNoZXNTZWxlY3Rvcnx8eS53ZWJraXRNYXRjaGVzU2VsZWN0b3I7CmlmKG8ubmF0aXZlTWF0Y2hlc1NlbGVjdG9yKXt0cnl7by5uYXRpdmVNYXRjaGVzU2VsZWN0b3IuY2FsbCh5LCI6c2xpY2siKTtvLm5hdGl2ZU1hdGNoZXNTZWxlY3Rvcj1udWxsO31jYXRjaCh2KXt9fX10cnl7eS5zbGlja19leHBhbmRvPTE7ZGVsZXRlIHkuc2xpY2tfZXhwYW5kbzsKby5nZXRVSUQ9dGhpcy5nZXRVSURIVE1MO31jYXRjaCh2KXtvLmdldFVJRD10aGlzLmdldFVJRFhNTDt9cC5yZW1vdmVDaGlsZCh6KTt6PXM9cD1udWxsO28uZ2V0QXR0cmlidXRlPShvLmlzSFRNTERvY3VtZW50JiZyKT9mdW5jdGlvbihELEIpe3ZhciBFPXRoaXMuYXR0cmlidXRlR2V0dGVyc1tCXTsKaWYoRSl7cmV0dXJuIEUuY2FsbChEKTt9dmFyIEM9RC5nZXRBdHRyaWJ1dGVOb2RlKEIpO3JldHVybihDKT9DLm5vZGVWYWx1ZTpudWxsO306ZnVuY3Rpb24oQyxCKXt2YXIgRD10aGlzLmF0dHJpYnV0ZUdldHRlcnNbQl07cmV0dXJuKEQpP0QuY2FsbChDKTpDLmdldEF0dHJpYnV0ZShCKTsKfTtvLmhhc0F0dHJpYnV0ZT0oeSYmdGhpcy5pc05hdGl2ZUNvZGUoeS5oYXNBdHRyaWJ1dGUpKT9mdW5jdGlvbihDLEIpe3JldHVybiBDLmhhc0F0dHJpYnV0ZShCKTt9OmZ1bmN0aW9uKEMsQil7Qz1DLmdldEF0dHJpYnV0ZU5vZGUoQik7cmV0dXJuICEhKEMmJihDLnNwZWNpZmllZHx8Qy5ub2RlVmFsdWUpKTsKfTtvLmNvbnRhaW5zPSh5JiZ0aGlzLmlzTmF0aXZlQ29kZSh5LmNvbnRhaW5zKSk/ZnVuY3Rpb24oQixDKXtyZXR1cm4gQi5jb250YWlucyhDKTt9Oih5JiZ5LmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKT9mdW5jdGlvbihCLEMpe3JldHVybiBCPT09Q3x8ISEoQi5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihDKSYxNik7Cn06ZnVuY3Rpb24oQixDKXtpZihDKXtkb3tpZihDPT09Qil7cmV0dXJuIHRydWU7fX13aGlsZSgoQz1DLnBhcmVudE5vZGUpKTt9cmV0dXJuIGZhbHNlO307by5kb2N1bWVudFNvcnRlcj0oeS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbik/ZnVuY3Rpb24oQyxCKXtpZighQy5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbnx8IUIuY29tcGFyZURvY3VtZW50UG9zaXRpb24pe3JldHVybiAwOwp9cmV0dXJuIEMuY29tcGFyZURvY3VtZW50UG9zaXRpb24oQikmND8tMTpDPT09Qj8wOjE7fTooInNvdXJjZUluZGV4IiBpbiB5KT9mdW5jdGlvbihDLEIpe2lmKCFDLnNvdXJjZUluZGV4fHwhQi5zb3VyY2VJbmRleCl7cmV0dXJuIDA7fXJldHVybiBDLnNvdXJjZUluZGV4LUIuc291cmNlSW5kZXg7Cn06KHcuY3JlYXRlUmFuZ2UpP2Z1bmN0aW9uKEUsQyl7aWYoIUUub3duZXJEb2N1bWVudHx8IUMub3duZXJEb2N1bWVudCl7cmV0dXJuIDA7fXZhciBEPUUub3duZXJEb2N1bWVudC5jcmVhdGVSYW5nZSgpLEI9Qy5vd25lckRvY3VtZW50LmNyZWF0ZVJhbmdlKCk7RC5zZXRTdGFydChFLDApOwpELnNldEVuZChFLDApO0Iuc2V0U3RhcnQoQywwKTtCLnNldEVuZChDLDApO3JldHVybiBELmNvbXBhcmVCb3VuZGFyeVBvaW50cyhSYW5nZS5TVEFSVF9UT19FTkQsQik7fTpudWxsO3k9bnVsbDtmb3IoQSBpbiBvKXt0aGlzW0FdPW9bQV07fX07dmFyIGU9L14oWyMuXT8pKCg/Oltcdy1dK3xcKikpJC8sZz0vXFsuK1sqJF5dPSg/OiIifCcnKT9cXS8sZj17fTsKai5zZWFyY2g9ZnVuY3Rpb24ocSxELE8sdil7dmFyIEI9dGhpcy5mb3VuZD0odik/bnVsbDooT3x8W10pO2lmKCFxKXtyZXR1cm4gQjt9ZWxzZXtpZihxLm5hdmlnYXRvcil7cT1xLmRvY3VtZW50O31lbHNle2lmKCFxLm5vZGVUeXBlKXtyZXR1cm4gQjt9fX12YXIgeixOLHM9dGhpcy51bmlxdWVzPXt9LHk9ISEoTyYmTy5sZW5ndGgpLGM9KHEubm9kZVR5cGU9PTkpOwppZih0aGlzLmRvY3VtZW50IT09KGM/cTpxLm93bmVyRG9jdW1lbnQpKXt0aGlzLnNldERvY3VtZW50KHEpO31pZih5KXtmb3IoTj1CLmxlbmd0aDtOLS07KXtzW3RoaXMuZ2V0VUlEKEJbTl0pXT10cnVlO319aWYodHlwZW9mIEQ9PSJzdHJpbmciKXt2YXIgQz1ELm1hdGNoKGUpOwpzaW1wbGVTZWxlY3RvcnM6aWYoQyl7dmFyIEs9Q1sxXSxWPUNbMl0sSSxHO2lmKCFLKXtpZihWPT0iKiImJnRoaXMuYnJva2VuU3RhckdFQlROKXticmVhayBzaW1wbGVTZWxlY3RvcnM7fUc9cS5nZXRFbGVtZW50c0J5VGFnTmFtZShWKTtpZih2KXtyZXR1cm4gR1swXXx8bnVsbDsKfWZvcihOPTA7ST1HW04rK107KXtpZighKHkmJnNbdGhpcy5nZXRVSUQoSSldKSl7Qi5wdXNoKEkpO319fWVsc2V7aWYoSz09IiMiKXtpZighdGhpcy5pc0hUTUxEb2N1bWVudHx8IWMpe2JyZWFrIHNpbXBsZVNlbGVjdG9yczt9ST1xLmdldEVsZW1lbnRCeUlkKFYpOwppZighSSl7cmV0dXJuIEI7fWlmKHRoaXMuaWRHZXRzTmFtZSYmSS5nZXRBdHRyaWJ1dGVOb2RlKCJpZCIpLm5vZGVWYWx1ZSE9Vil7YnJlYWsgc2ltcGxlU2VsZWN0b3JzO31pZih2KXtyZXR1cm4gSXx8bnVsbDt9aWYoISh5JiZzW3RoaXMuZ2V0VUlEKEkpXSkpe0IucHVzaChJKTsKfX1lbHNle2lmKEs9PSIuIil7aWYoIXRoaXMuaXNIVE1MRG9jdW1lbnR8fCgoIXEuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZXx8dGhpcy5icm9rZW5HRUJDTikmJnEucXVlcnlTZWxlY3RvckFsbCkpe2JyZWFrIHNpbXBsZVNlbGVjdG9yczt9aWYocS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lJiYhdGhpcy5icm9rZW5HRUJDTil7Rz1xLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoVik7CmlmKHYpe3JldHVybiBHWzBdfHxudWxsO31mb3IoTj0wO0k9R1tOKytdOyl7aWYoISh5JiZzW3RoaXMuZ2V0VUlEKEkpXSkpe0IucHVzaChJKTt9fX1lbHNle3ZhciB1PW5ldyBSZWdFeHAoIihefFxccykiK2QuZXNjYXBlUmVnRXhwKFYpKyIoXFxzfCQpIik7Rz1xLmdldEVsZW1lbnRzQnlUYWdOYW1lKCIqIik7CmZvcihOPTA7ST1HW04rK107KXtjbGFzc05hbWU9SS5jbGFzc05hbWU7aWYoIShjbGFzc05hbWUmJnUudGVzdChjbGFzc05hbWUpKSl7Y29udGludWU7fWlmKHYpe3JldHVybiBJO31pZighKHkmJnNbdGhpcy5nZXRVSUQoSSldKSl7Qi5wdXNoKEkpO319fX19fWlmKHkpe3RoaXMuc29ydChCKTsKfXJldHVybih2KT9udWxsOkI7fXF1ZXJ5U2VsZWN0b3I6aWYocS5xdWVyeVNlbGVjdG9yQWxsKXtpZighdGhpcy5pc0hUTUxEb2N1bWVudHx8dGhpcy5icm9rZW5NaXhlZENhc2VRU0F8fGZbRF18fCh0aGlzLmJyb2tlbkNoZWNrZWRRU0EmJkQuaW5kZXhPZigiOmNoZWNrZWQiKT4tMSl8fCh0aGlzLmJyb2tlbkVtcHR5QXR0cmlidXRlUVNBJiZnLnRlc3QoRCkpfHxkLmRpc2FibGVRU0Epe2JyZWFrIHF1ZXJ5U2VsZWN0b3I7Cn12YXIgQT1EO2lmKCFjKXt2YXIgTT1xLmdldEF0dHJpYnV0ZSgiaWQiKSxwPSJzbGlja2lkX18iO3Euc2V0QXR0cmlidXRlKCJpZCIscCk7QT0iIyIrcCsiICIrQTt9dHJ5e2lmKHYpe3JldHVybiBxLnF1ZXJ5U2VsZWN0b3IoQSl8fG51bGw7fWVsc2V7Rz1xLnF1ZXJ5U2VsZWN0b3JBbGwoQSk7Cn19Y2F0Y2goUCl7ZltEXT0xO2JyZWFrIHF1ZXJ5U2VsZWN0b3I7fWZpbmFsbHl7aWYoIWMpe2lmKE0pe3Euc2V0QXR0cmlidXRlKCJpZCIsTSk7fWVsc2V7cS5yZW1vdmVBdHRyaWJ1dGUoImlkIik7fX19aWYodGhpcy5zdGFyU2VsZWN0c0Nsb3NlZFFTQSl7Zm9yKE49MDsKST1HW04rK107KXtpZihJLm5vZGVOYW1lPiJAIiYmISh5JiZzW3RoaXMuZ2V0VUlEKEkpXSkpe0IucHVzaChJKTt9fX1lbHNle2ZvcihOPTA7ST1HW04rK107KXtpZighKHkmJnNbdGhpcy5nZXRVSUQoSSldKSl7Qi5wdXNoKEkpO319fWlmKHkpe3RoaXMuc29ydChCKTsKfXJldHVybiBCO316PXRoaXMuU2xpY2sucGFyc2UoRCk7aWYoIXoubGVuZ3RoKXtyZXR1cm4gQjt9fWVsc2V7aWYoRD09bnVsbCl7cmV0dXJuIEI7fWVsc2V7aWYoRC5TbGljayl7ej1EO31lbHNle2lmKHRoaXMuY29udGFpbnMocS5kb2N1bWVudEVsZW1lbnR8fHEsRCkpeyhCKT9CLnB1c2goRCk6Qj1EOwpyZXR1cm4gQjt9ZWxzZXtyZXR1cm4gQjt9fX19dGhpcy5wb3NOVEg9e307dGhpcy5wb3NOVEhMYXN0PXt9O3RoaXMucG9zTlRIVHlwZT17fTt0aGlzLnBvc05USFR5cGVMYXN0PXt9O3RoaXMucHVzaD0oIXkmJih2fHwoei5sZW5ndGg9PTEmJnouZXhwcmVzc2lvbnNbMF0ubGVuZ3RoPT0xKSkpP3RoaXMucHVzaEFycmF5OnRoaXMucHVzaFVJRDsKaWYoQj09bnVsbCl7Qj1bXTt9dmFyIEwsSCxGO3ZhciBKLFUsRSxULFEseCx0O3ZhciB3LHIsbyxSLFM9ei5leHByZXNzaW9ucztzZWFyY2g6Zm9yKE49MDsocj1TW05dKTtOKyspe2ZvcihMPTA7KG89cltMXSk7TCsrKXtKPSJjb21iaW5hdG9yOiIrby5jb21iaW5hdG9yOwppZighdGhpc1tKXSl7Y29udGludWUgc2VhcmNoO31VPSh0aGlzLmlzWE1MRG9jdW1lbnQpP28udGFnOm8udGFnLnRvVXBwZXJDYXNlKCk7RT1vLmlkO1Q9by5jbGFzc0xpc3Q7UT1vLmNsYXNzZXM7eD1vLmF0dHJpYnV0ZXM7dD1vLnBzZXVkb3M7Uj0oTD09PShyLmxlbmd0aC0xKSk7CnRoaXMuYml0VW5pcXVlcz17fTtpZihSKXt0aGlzLnVuaXF1ZXM9czt0aGlzLmZvdW5kPUI7fWVsc2V7dGhpcy51bmlxdWVzPXt9O3RoaXMuZm91bmQ9W107fWlmKEw9PT0wKXt0aGlzW0pdKHEsVSxFLFEseCx0LFQpO2lmKHYmJlImJkIubGVuZ3RoKXticmVhayBzZWFyY2g7Cn19ZWxzZXtpZih2JiZSKXtmb3IoSD0wLEY9dy5sZW5ndGg7SDxGO0grKyl7dGhpc1tKXSh3W0hdLFUsRSxRLHgsdCxUKTtpZihCLmxlbmd0aCl7YnJlYWsgc2VhcmNoO319fWVsc2V7Zm9yKEg9MCxGPXcubGVuZ3RoO0g8RjtIKyspe3RoaXNbSl0od1tIXSxVLEUsUSx4LHQsVCk7Cn19fXc9dGhpcy5mb3VuZDt9fWlmKHl8fCh6LmV4cHJlc3Npb25zLmxlbmd0aD4xKSl7dGhpcy5zb3J0KEIpO31yZXR1cm4odik/KEJbMF18fG51bGwpOkI7fTtqLnVpZHg9MTtqLnVpZGs9InNsaWNrLXVuaXF1ZWlkIjtqLmdldFVJRFhNTD1mdW5jdGlvbihtKXt2YXIgYz1tLmdldEF0dHJpYnV0ZSh0aGlzLnVpZGspOwppZighYyl7Yz10aGlzLnVpZHgrKzttLnNldEF0dHJpYnV0ZSh0aGlzLnVpZGssYyk7fXJldHVybiBjO307ai5nZXRVSURIVE1MPWZ1bmN0aW9uKGMpe3JldHVybiBjLnVuaXF1ZU51bWJlcnx8KGMudW5pcXVlTnVtYmVyPXRoaXMudWlkeCsrKTt9O2ouc29ydD1mdW5jdGlvbihjKXtpZighdGhpcy5kb2N1bWVudFNvcnRlcil7cmV0dXJuIGM7Cn1jLnNvcnQodGhpcy5kb2N1bWVudFNvcnRlcik7cmV0dXJuIGM7fTtqLmNhY2hlTlRIPXt9O2oubWF0Y2hOVEg9L14oWystXT9cZCopPyhbYS16XSspPyhbKy1dXGQrKT8kLztqLnBhcnNlTlRIQXJndW1lbnQ9ZnVuY3Rpb24ocCl7dmFyIG49cC5tYXRjaCh0aGlzLm1hdGNoTlRIKTsKaWYoIW4pe3JldHVybiBmYWxzZTt9dmFyIG89blsyXXx8ZmFsc2U7dmFyIG09blsxXXx8MTtpZihtPT0iLSIpe209LTE7fXZhciBjPStuWzNdfHwwO249KG89PSJuIik/e2E6bSxiOmN9OihvPT0ib2RkIik/e2E6MixiOjF9OihvPT0iZXZlbiIpP3thOjIsYjowfTp7YTowLGI6bX07CnJldHVybih0aGlzLmNhY2hlTlRIW3BdPW4pO307ai5jcmVhdGVOVEhQc2V1ZG89ZnVuY3Rpb24obyxtLGMsbil7cmV0dXJuIGZ1bmN0aW9uKHIscCl7dmFyIHQ9dGhpcy5nZXRVSUQocik7aWYoIXRoaXNbY11bdF0pe3ZhciB6PXIucGFyZW50Tm9kZTtpZigheil7cmV0dXJuIGZhbHNlOwp9dmFyIHE9eltvXSxzPTE7aWYobil7dmFyIHk9ci5ub2RlTmFtZTtkb3tpZihxLm5vZGVOYW1lIT15KXtjb250aW51ZTt9dGhpc1tjXVt0aGlzLmdldFVJRChxKV09cysrO313aGlsZSgocT1xW21dKSk7fWVsc2V7ZG97aWYocS5ub2RlVHlwZSE9MSl7Y29udGludWU7Cn10aGlzW2NdW3RoaXMuZ2V0VUlEKHEpXT1zKys7fXdoaWxlKChxPXFbbV0pKTt9fXA9cHx8Im4iO3ZhciB1PXRoaXMuY2FjaGVOVEhbcF18fHRoaXMucGFyc2VOVEhBcmd1bWVudChwKTtpZighdSl7cmV0dXJuIGZhbHNlO312YXIgeD11LmEsdz11LmIsdj10aGlzW2NdW3RdOwppZih4PT0wKXtyZXR1cm4gdz09djt9aWYoeD4wKXtpZih2PHcpe3JldHVybiBmYWxzZTt9fWVsc2V7aWYodzx2KXtyZXR1cm4gZmFsc2U7fX1yZXR1cm4oKHYtdykleCk9PTA7fTt9O2oucHVzaEFycmF5PWZ1bmN0aW9uKG8sYyxxLG4sbSxwKXtpZih0aGlzLm1hdGNoU2VsZWN0b3IobyxjLHEsbixtLHApKXt0aGlzLmZvdW5kLnB1c2gobyk7Cn19O2oucHVzaFVJRD1mdW5jdGlvbihwLGMscixvLG0scSl7dmFyIG49dGhpcy5nZXRVSUQocCk7aWYoIXRoaXMudW5pcXVlc1tuXSYmdGhpcy5tYXRjaFNlbGVjdG9yKHAsYyxyLG8sbSxxKSl7dGhpcy51bmlxdWVzW25dPXRydWU7dGhpcy5mb3VuZC5wdXNoKHApO319OwpqLm1hdGNoTm9kZT1mdW5jdGlvbihtLG4pe2lmKHRoaXMuaXNIVE1MRG9jdW1lbnQmJnRoaXMubmF0aXZlTWF0Y2hlc1NlbGVjdG9yKXt0cnl7cmV0dXJuIHRoaXMubmF0aXZlTWF0Y2hlc1NlbGVjdG9yLmNhbGwobSxuLnJlcGxhY2UoL1xbKFtePV0rKT1ccyooW14nIlxdXSs/KVxzKlxdL2csJ1skMT0iJDIiXScpKTsKfWNhdGNoKHUpe319dmFyIHQ9dGhpcy5TbGljay5wYXJzZShuKTtpZighdCl7cmV0dXJuIHRydWU7fXZhciByPXQuZXhwcmVzc2lvbnMscCxzPTAscTtmb3IocT0wOyhjdXJyZW50RXhwcmVzc2lvbj1yW3FdKTtxKyspe2lmKGN1cnJlbnRFeHByZXNzaW9uLmxlbmd0aD09MSl7dmFyIG89Y3VycmVudEV4cHJlc3Npb25bMF07CmlmKHRoaXMubWF0Y2hTZWxlY3RvcihtLCh0aGlzLmlzWE1MRG9jdW1lbnQpP28udGFnOm8udGFnLnRvVXBwZXJDYXNlKCksby5pZCxvLmNsYXNzZXMsby5hdHRyaWJ1dGVzLG8ucHNldWRvcykpe3JldHVybiB0cnVlO31zKys7fX1pZihzPT10Lmxlbmd0aCl7cmV0dXJuIGZhbHNlOwp9dmFyIGM9dGhpcy5zZWFyY2godGhpcy5kb2N1bWVudCx0KSx2O2ZvcihxPTA7dj1jW3ErK107KXtpZih2PT09bSl7cmV0dXJuIHRydWU7fX1yZXR1cm4gZmFsc2U7fTtqLm1hdGNoUHNldWRvPWZ1bmN0aW9uKHAsYyxvKXt2YXIgbT0icHNldWRvOiIrYztpZih0aGlzW21dKXtyZXR1cm4gdGhpc1ttXShwLG8pOwp9dmFyIG49dGhpcy5nZXRBdHRyaWJ1dGUocCxjKTtyZXR1cm4obyk/bz09bjohIW47fTtqLm1hdGNoU2VsZWN0b3I9ZnVuY3Rpb24obix1LGMsbyxwLHIpe2lmKHUpe3ZhciBzPSh0aGlzLmlzWE1MRG9jdW1lbnQpP24ubm9kZU5hbWU6bi5ub2RlTmFtZS50b1VwcGVyQ2FzZSgpOwppZih1PT0iKiIpe2lmKHM8IkAiKXtyZXR1cm4gZmFsc2U7fX1lbHNle2lmKHMhPXUpe3JldHVybiBmYWxzZTt9fX1pZihjJiZuLmdldEF0dHJpYnV0ZSgiaWQiKSE9Yyl7cmV0dXJuIGZhbHNlO312YXIgcSxtLHQ7aWYobyl7Zm9yKHE9by5sZW5ndGg7cS0tOyl7dD1uLmdldEF0dHJpYnV0ZSgiY2xhc3MiKXx8bi5jbGFzc05hbWU7CmlmKCEodCYmb1txXS5yZWdleHAudGVzdCh0KSkpe3JldHVybiBmYWxzZTt9fX1pZihwKXtmb3IocT1wLmxlbmd0aDtxLS07KXttPXBbcV07aWYobS5vcGVyYXRvcj8hbS50ZXN0KHRoaXMuZ2V0QXR0cmlidXRlKG4sbS5rZXkpKTohdGhpcy5oYXNBdHRyaWJ1dGUobixtLmtleSkpe3JldHVybiBmYWxzZTsKfX19aWYocil7Zm9yKHE9ci5sZW5ndGg7cS0tOyl7bT1yW3FdO2lmKCF0aGlzLm1hdGNoUHNldWRvKG4sbS5rZXksbS52YWx1ZSkpe3JldHVybiBmYWxzZTt9fX1yZXR1cm4gdHJ1ZTt9O3ZhciBpPXsiICI6ZnVuY3Rpb24ocCx2LG0scSxyLHQsbyl7dmFyIHMsdSxuOwppZih0aGlzLmlzSFRNTERvY3VtZW50KXtnZXRCeUlkOmlmKG0pe3U9dGhpcy5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChtKTtpZigoIXUmJnAuYWxsKXx8KHRoaXMuaWRHZXRzTmFtZSYmdSYmdS5nZXRBdHRyaWJ1dGVOb2RlKCJpZCIpLm5vZGVWYWx1ZSE9bSkpe249cC5hbGxbbV07CmlmKCFuKXtyZXR1cm47fWlmKCFuWzBdKXtuPVtuXTt9Zm9yKHM9MDt1PW5bcysrXTspe3ZhciBjPXUuZ2V0QXR0cmlidXRlTm9kZSgiaWQiKTtpZihjJiZjLm5vZGVWYWx1ZT09bSl7dGhpcy5wdXNoKHUsdixudWxsLHEscix0KTticmVhazt9fXJldHVybjt9aWYoIXUpe2lmKHRoaXMuY29udGFpbnModGhpcy5yb290LHApKXtyZXR1cm47Cn1lbHNle2JyZWFrIGdldEJ5SWQ7fX1lbHNle2lmKHRoaXMuZG9jdW1lbnQhPT1wJiYhdGhpcy5jb250YWlucyhwLHUpKXtyZXR1cm47fX10aGlzLnB1c2godSx2LG51bGwscSxyLHQpO3JldHVybjt9Z2V0QnlDbGFzczppZihxJiZwLmdldEVsZW1lbnRzQnlDbGFzc05hbWUmJiF0aGlzLmJyb2tlbkdFQkNOKXtuPXAuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShvLmpvaW4oIiAiKSk7CmlmKCEobiYmbi5sZW5ndGgpKXticmVhayBnZXRCeUNsYXNzO31mb3Iocz0wO3U9bltzKytdOyl7dGhpcy5wdXNoKHUsdixtLG51bGwscix0KTt9cmV0dXJuO319Z2V0QnlUYWc6e249cC5nZXRFbGVtZW50c0J5VGFnTmFtZSh2KTtpZighKG4mJm4ubGVuZ3RoKSl7YnJlYWsgZ2V0QnlUYWc7Cn1pZighdGhpcy5icm9rZW5TdGFyR0VCVE4pe3Y9bnVsbDt9Zm9yKHM9MDt1PW5bcysrXTspe3RoaXMucHVzaCh1LHYsbSxxLHIsdCk7fX19LCI+IjpmdW5jdGlvbihvLGMscSxuLG0scCl7aWYoKG89by5maXJzdENoaWxkKSl7ZG97aWYoby5ub2RlVHlwZT09MSl7dGhpcy5wdXNoKG8sYyxxLG4sbSxwKTsKfX13aGlsZSgobz1vLm5leHRTaWJsaW5nKSk7fX0sIisiOmZ1bmN0aW9uKG8sYyxxLG4sbSxwKXt3aGlsZSgobz1vLm5leHRTaWJsaW5nKSl7aWYoby5ub2RlVHlwZT09MSl7dGhpcy5wdXNoKG8sYyxxLG4sbSxwKTticmVhazt9fX0sIl4iOmZ1bmN0aW9uKG8sYyxxLG4sbSxwKXtvPW8uZmlyc3RDaGlsZDsKaWYobyl7aWYoby5ub2RlVHlwZT09MSl7dGhpcy5wdXNoKG8sYyxxLG4sbSxwKTt9ZWxzZXt0aGlzWyJjb21iaW5hdG9yOisiXShvLGMscSxuLG0scCk7fX19LCJ+IjpmdW5jdGlvbihwLGMscixvLG0scSl7d2hpbGUoKHA9cC5uZXh0U2libGluZykpe2lmKHAubm9kZVR5cGUhPTEpe2NvbnRpbnVlOwp9dmFyIG49dGhpcy5nZXRVSUQocCk7aWYodGhpcy5iaXRVbmlxdWVzW25dKXticmVhazt9dGhpcy5iaXRVbmlxdWVzW25dPXRydWU7dGhpcy5wdXNoKHAsYyxyLG8sbSxxKTt9fSwiKysiOmZ1bmN0aW9uKG8sYyxxLG4sbSxwKXt0aGlzWyJjb21iaW5hdG9yOisiXShvLGMscSxuLG0scCk7CnRoaXNbImNvbWJpbmF0b3I6ISsiXShvLGMscSxuLG0scCk7fSwifn4iOmZ1bmN0aW9uKG8sYyxxLG4sbSxwKXt0aGlzWyJjb21iaW5hdG9yOn4iXShvLGMscSxuLG0scCk7dGhpc1siY29tYmluYXRvcjohfiJdKG8sYyxxLG4sbSxwKTt9LCIhIjpmdW5jdGlvbihvLGMscSxuLG0scCl7d2hpbGUoKG89by5wYXJlbnROb2RlKSl7aWYobyE9PXRoaXMuZG9jdW1lbnQpe3RoaXMucHVzaChvLGMscSxuLG0scCk7Cn19fSwiIT4iOmZ1bmN0aW9uKG8sYyxxLG4sbSxwKXtvPW8ucGFyZW50Tm9kZTtpZihvIT09dGhpcy5kb2N1bWVudCl7dGhpcy5wdXNoKG8sYyxxLG4sbSxwKTt9fSwiISsiOmZ1bmN0aW9uKG8sYyxxLG4sbSxwKXt3aGlsZSgobz1vLnByZXZpb3VzU2libGluZykpe2lmKG8ubm9kZVR5cGU9PTEpe3RoaXMucHVzaChvLGMscSxuLG0scCk7CmJyZWFrO319fSwiIV4iOmZ1bmN0aW9uKG8sYyxxLG4sbSxwKXtvPW8ubGFzdENoaWxkO2lmKG8pe2lmKG8ubm9kZVR5cGU9PTEpe3RoaXMucHVzaChvLGMscSxuLG0scCk7fWVsc2V7dGhpc1siY29tYmluYXRvcjohKyJdKG8sYyxxLG4sbSxwKTt9fX0sIiF+IjpmdW5jdGlvbihwLGMscixvLG0scSl7d2hpbGUoKHA9cC5wcmV2aW91c1NpYmxpbmcpKXtpZihwLm5vZGVUeXBlIT0xKXtjb250aW51ZTsKfXZhciBuPXRoaXMuZ2V0VUlEKHApO2lmKHRoaXMuYml0VW5pcXVlc1tuXSl7YnJlYWs7fXRoaXMuYml0VW5pcXVlc1tuXT10cnVlO3RoaXMucHVzaChwLGMscixvLG0scSk7fX19O2Zvcih2YXIgaCBpbiBpKXtqWyJjb21iaW5hdG9yOiIraF09aVtoXTt9dmFyIGs9e2VtcHR5OmZ1bmN0aW9uKGMpe3ZhciBtPWMuZmlyc3RDaGlsZDsKcmV0dXJuICEobSYmbS5ub2RlVHlwZT09MSkmJiEoYy5pbm5lclRleHR8fGMudGV4dENvbnRlbnR8fCIiKS5sZW5ndGg7fSxub3Q6ZnVuY3Rpb24oYyxtKXtyZXR1cm4gIXRoaXMubWF0Y2hOb2RlKGMsbSk7fSxjb250YWluczpmdW5jdGlvbihjLG0pe3JldHVybihjLmlubmVyVGV4dHx8Yy50ZXh0Q29udGVudHx8IiIpLmluZGV4T2YobSk+LTE7Cn0sImZpcnN0LWNoaWxkIjpmdW5jdGlvbihjKXt3aGlsZSgoYz1jLnByZXZpb3VzU2libGluZykpe2lmKGMubm9kZVR5cGU9PTEpe3JldHVybiBmYWxzZTt9fXJldHVybiB0cnVlO30sImxhc3QtY2hpbGQiOmZ1bmN0aW9uKGMpe3doaWxlKChjPWMubmV4dFNpYmxpbmcpKXtpZihjLm5vZGVUeXBlPT0xKXtyZXR1cm4gZmFsc2U7Cn19cmV0dXJuIHRydWU7fSwib25seS1jaGlsZCI6ZnVuY3Rpb24obil7dmFyIG09bjt3aGlsZSgobT1tLnByZXZpb3VzU2libGluZykpe2lmKG0ubm9kZVR5cGU9PTEpe3JldHVybiBmYWxzZTt9fXZhciBjPW47d2hpbGUoKGM9Yy5uZXh0U2libGluZykpe2lmKGMubm9kZVR5cGU9PTEpe3JldHVybiBmYWxzZTsKfX1yZXR1cm4gdHJ1ZTt9LCJudGgtY2hpbGQiOmouY3JlYXRlTlRIUHNldWRvKCJmaXJzdENoaWxkIiwibmV4dFNpYmxpbmciLCJwb3NOVEgiKSwibnRoLWxhc3QtY2hpbGQiOmouY3JlYXRlTlRIUHNldWRvKCJsYXN0Q2hpbGQiLCJwcmV2aW91c1NpYmxpbmciLCJwb3NOVEhMYXN0IiksIm50aC1vZi10eXBlIjpqLmNyZWF0ZU5USFBzZXVkbygiZmlyc3RDaGlsZCIsIm5leHRTaWJsaW5nIiwicG9zTlRIVHlwZSIsdHJ1ZSksIm50aC1sYXN0LW9mLXR5cGUiOmouY3JlYXRlTlRIUHNldWRvKCJsYXN0Q2hpbGQiLCJwcmV2aW91c1NpYmxpbmciLCJwb3NOVEhUeXBlTGFzdCIsdHJ1ZSksaW5kZXg6ZnVuY3Rpb24obSxjKXtyZXR1cm4gdGhpc1sicHNldWRvOm50aC1jaGlsZCJdKG0sIiIrYysxKTsKfSxldmVuOmZ1bmN0aW9uKGMpe3JldHVybiB0aGlzWyJwc2V1ZG86bnRoLWNoaWxkIl0oYywiMm4iKTt9LG9kZDpmdW5jdGlvbihjKXtyZXR1cm4gdGhpc1sicHNldWRvOm50aC1jaGlsZCJdKGMsIjJuKzEiKTt9LCJmaXJzdC1vZi10eXBlIjpmdW5jdGlvbihjKXt2YXIgbT1jLm5vZGVOYW1lOwp3aGlsZSgoYz1jLnByZXZpb3VzU2libGluZykpe2lmKGMubm9kZU5hbWU9PW0pe3JldHVybiBmYWxzZTt9fXJldHVybiB0cnVlO30sImxhc3Qtb2YtdHlwZSI6ZnVuY3Rpb24oYyl7dmFyIG09Yy5ub2RlTmFtZTt3aGlsZSgoYz1jLm5leHRTaWJsaW5nKSl7aWYoYy5ub2RlTmFtZT09bSl7cmV0dXJuIGZhbHNlOwp9fXJldHVybiB0cnVlO30sIm9ubHktb2YtdHlwZSI6ZnVuY3Rpb24obil7dmFyIG09bixvPW4ubm9kZU5hbWU7d2hpbGUoKG09bS5wcmV2aW91c1NpYmxpbmcpKXtpZihtLm5vZGVOYW1lPT1vKXtyZXR1cm4gZmFsc2U7fX12YXIgYz1uO3doaWxlKChjPWMubmV4dFNpYmxpbmcpKXtpZihjLm5vZGVOYW1lPT1vKXtyZXR1cm4gZmFsc2U7Cn19cmV0dXJuIHRydWU7fSxlbmFibGVkOmZ1bmN0aW9uKGMpe3JldHVybiAhYy5kaXNhYmxlZDt9LGRpc2FibGVkOmZ1bmN0aW9uKGMpe3JldHVybiBjLmRpc2FibGVkO30sY2hlY2tlZDpmdW5jdGlvbihjKXtyZXR1cm4gYy5jaGVja2VkfHxjLnNlbGVjdGVkO30sZm9jdXM6ZnVuY3Rpb24oYyl7cmV0dXJuIHRoaXMuaXNIVE1MRG9jdW1lbnQmJnRoaXMuZG9jdW1lbnQuYWN0aXZlRWxlbWVudD09PWMmJihjLmhyZWZ8fGMudHlwZXx8dGhpcy5oYXNBdHRyaWJ1dGUoYywidGFiaW5kZXgiKSk7Cn0scm9vdDpmdW5jdGlvbihjKXtyZXR1cm4oYz09PXRoaXMucm9vdCk7fSxzZWxlY3RlZDpmdW5jdGlvbihjKXtyZXR1cm4gYy5zZWxlY3RlZDt9fTtmb3IodmFyIGEgaW4gayl7alsicHNldWRvOiIrYV09a1thXTt9ai5hdHRyaWJ1dGVHZXR0ZXJzPXsiY2xhc3MiOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0QXR0cmlidXRlKCJjbGFzcyIpfHx0aGlzLmNsYXNzTmFtZTsKfSwiZm9yIjpmdW5jdGlvbigpe3JldHVybigiaHRtbEZvciIgaW4gdGhpcyk/dGhpcy5odG1sRm9yOnRoaXMuZ2V0QXR0cmlidXRlKCJmb3IiKTt9LGhyZWY6ZnVuY3Rpb24oKXtyZXR1cm4oImhyZWYiIGluIHRoaXMpP3RoaXMuZ2V0QXR0cmlidXRlKCJocmVmIiwyKTp0aGlzLmdldEF0dHJpYnV0ZSgiaHJlZiIpOwp9LHN0eWxlOmZ1bmN0aW9uKCl7cmV0dXJuKHRoaXMuc3R5bGUpP3RoaXMuc3R5bGUuY3NzVGV4dDp0aGlzLmdldEF0dHJpYnV0ZSgic3R5bGUiKTt9LHRhYmluZGV4OmZ1bmN0aW9uKCl7dmFyIGM9dGhpcy5nZXRBdHRyaWJ1dGVOb2RlKCJ0YWJpbmRleCIpO3JldHVybihjJiZjLnNwZWNpZmllZCk/Yy5ub2RlVmFsdWU6bnVsbDsKfSx0eXBlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0QXR0cmlidXRlKCJ0eXBlIik7fX07dmFyIGQ9ai5TbGljaz0odGhpcy5TbGlja3x8e30pO2QudmVyc2lvbj0iMS4xLjUiO2Quc2VhcmNoPWZ1bmN0aW9uKG0sbixjKXtyZXR1cm4gai5zZWFyY2gobSxuLGMpOwp9O2QuZmluZD1mdW5jdGlvbihjLG0pe3JldHVybiBqLnNlYXJjaChjLG0sbnVsbCx0cnVlKTt9O2QuY29udGFpbnM9ZnVuY3Rpb24oYyxtKXtqLnNldERvY3VtZW50KGMpO3JldHVybiBqLmNvbnRhaW5zKGMsbSk7fTtkLmdldEF0dHJpYnV0ZT1mdW5jdGlvbihtLGMpe3JldHVybiBqLmdldEF0dHJpYnV0ZShtLGMpOwp9O2QubWF0Y2g9ZnVuY3Rpb24obSxjKXtpZighKG0mJmMpKXtyZXR1cm4gZmFsc2U7fWlmKCFjfHxjPT09bSl7cmV0dXJuIHRydWU7fWouc2V0RG9jdW1lbnQobSk7cmV0dXJuIGoubWF0Y2hOb2RlKG0sYyk7fTtkLmRlZmluZUF0dHJpYnV0ZUdldHRlcj1mdW5jdGlvbihjLG0pe2ouYXR0cmlidXRlR2V0dGVyc1tjXT1tOwpyZXR1cm4gdGhpczt9O2QubG9va3VwQXR0cmlidXRlR2V0dGVyPWZ1bmN0aW9uKGMpe3JldHVybiBqLmF0dHJpYnV0ZUdldHRlcnNbY107fTtkLmRlZmluZVBzZXVkbz1mdW5jdGlvbihjLG0pe2pbInBzZXVkbzoiK2NdPWZ1bmN0aW9uKG8sbil7cmV0dXJuIG0uY2FsbChvLG4pOwp9O3JldHVybiB0aGlzO307ZC5sb29rdXBQc2V1ZG89ZnVuY3Rpb24oYyl7dmFyIG09alsicHNldWRvOiIrY107aWYobSl7cmV0dXJuIGZ1bmN0aW9uKG4pe3JldHVybiBtLmNhbGwodGhpcyxuKTt9O31yZXR1cm4gbnVsbDt9O2Qub3ZlcnJpZGU9ZnVuY3Rpb24obSxjKXtqLm92ZXJyaWRlKG0sYyk7CnJldHVybiB0aGlzO307ZC5pc1hNTD1qLmlzWE1MO2QudWlkT2Y9ZnVuY3Rpb24oYyl7cmV0dXJuIGouZ2V0VUlESFRNTChjKTt9O2lmKCF0aGlzLlNsaWNrKXt0aGlzLlNsaWNrPWQ7fX0pLmFwcGx5KCh0eXBlb2YgZXhwb3J0cyE9InVuZGVmaW5lZCIpP2V4cG9ydHM6dGhpcyk7CnZhciBFbGVtZW50PWZ1bmN0aW9uKGIsZyl7dmFyIGg9RWxlbWVudC5Db25zdHJ1Y3RvcnNbYl07aWYoaCl7cmV0dXJuIGgoZyk7fWlmKHR5cGVvZiBiIT0ic3RyaW5nIil7cmV0dXJuIGRvY3VtZW50LmlkKGIpLnNldChnKTt9aWYoIWcpe2c9e307fWlmKCEoL15bXHctXSskLykudGVzdChiKSl7dmFyIGU9U2xpY2sucGFyc2UoYikuZXhwcmVzc2lvbnNbMF1bMF07CmI9KGUudGFnPT0iKiIpPyJkaXYiOmUudGFnO2lmKGUuaWQmJmcuaWQ9PW51bGwpe2cuaWQ9ZS5pZDt9dmFyIGQ9ZS5hdHRyaWJ1dGVzO2lmKGQpe2Zvcih2YXIgZj0wLGM9ZC5sZW5ndGg7ZjxjO2YrKyl7dmFyIGE9ZFtmXTtpZihhLnZhbHVlIT1udWxsJiZhLm9wZXJhdG9yPT0iPSImJmdbYS5rZXldPT1udWxsKXtnW2Eua2V5XT1hLnZhbHVlOwp9fX1pZihlLmNsYXNzTGlzdCYmZ1siY2xhc3MiXT09bnVsbCl7Z1siY2xhc3MiXT1lLmNsYXNzTGlzdC5qb2luKCIgIik7fX1yZXR1cm4gZG9jdW1lbnQubmV3RWxlbWVudChiLGcpO307aWYoQnJvd3Nlci5FbGVtZW50KXtFbGVtZW50LnByb3RvdHlwZT1Ccm93c2VyLkVsZW1lbnQucHJvdG90eXBlOwp9bmV3IFR5cGUoIkVsZW1lbnQiLEVsZW1lbnQpLm1pcnJvcihmdW5jdGlvbihhKXtpZihBcnJheS5wcm90b3R5cGVbYV0pe3JldHVybjt9dmFyIGI9e307YlthXT1mdW5jdGlvbigpe3ZhciBoPVtdLGU9YXJndW1lbnRzLGo9dHJ1ZTtmb3IodmFyIGc9MCxkPXRoaXMubGVuZ3RoOwpnPGQ7ZysrKXt2YXIgZj10aGlzW2ddLGM9aFtnXT1mW2FdLmFwcGx5KGYsZSk7aj0oaiYmdHlwZU9mKGMpPT0iZWxlbWVudCIpO31yZXR1cm4oaik/bmV3IEVsZW1lbnRzKGgpOmg7fTtFbGVtZW50cy5pbXBsZW1lbnQoYik7fSk7aWYoIUJyb3dzZXIuRWxlbWVudCl7RWxlbWVudC5wYXJlbnQ9T2JqZWN0OwpFbGVtZW50LlByb3RvdHlwZT17IiRmYW1pbHkiOkZ1bmN0aW9uLmZyb20oImVsZW1lbnQiKS5oaWRlKCl9O0VsZW1lbnQubWlycm9yKGZ1bmN0aW9uKGEsYil7RWxlbWVudC5Qcm90b3R5cGVbYV09Yjt9KTt9RWxlbWVudC5Db25zdHJ1Y3RvcnM9e307RWxlbWVudC5Db25zdHJ1Y3RvcnM9bmV3IEhhc2g7CnZhciBJRnJhbWU9bmV3IFR5cGUoIklGcmFtZSIsZnVuY3Rpb24oKXt2YXIgZT1BcnJheS5saW5rKGFyZ3VtZW50cyx7cHJvcGVydGllczpUeXBlLmlzT2JqZWN0LGlmcmFtZTpmdW5jdGlvbihmKXtyZXR1cm4oZiE9bnVsbCk7fX0pO3ZhciBjPWUucHJvcGVydGllc3x8e30sYjsKaWYoZS5pZnJhbWUpe2I9ZG9jdW1lbnQuaWQoZS5pZnJhbWUpO312YXIgZD1jLm9ubG9hZHx8ZnVuY3Rpb24oKXt9O2RlbGV0ZSBjLm9ubG9hZDtjLmlkPWMubmFtZT1bYy5pZCxjLm5hbWUsYj8oYi5pZHx8Yi5uYW1lKToiSUZyYW1lXyIrU3RyaW5nLnVuaXF1ZUlEKCldLnBpY2soKTsKYj1uZXcgRWxlbWVudChifHwiaWZyYW1lIixjKTt2YXIgYT1mdW5jdGlvbigpe2QuY2FsbChiLmNvbnRlbnRXaW5kb3cpO307aWYod2luZG93LmZyYW1lc1tjLmlkXSl7YSgpO31lbHNle2IuYWRkTGlzdGVuZXIoImxvYWQiLGEpO31yZXR1cm4gYjt9KTt2YXIgRWxlbWVudHM9dGhpcy5FbGVtZW50cz1mdW5jdGlvbihhKXtpZihhJiZhLmxlbmd0aCl7dmFyIGU9e30sZDsKZm9yKHZhciBjPTA7ZD1hW2MrK107KXt2YXIgYj1TbGljay51aWRPZihkKTtpZighZVtiXSl7ZVtiXT10cnVlO3RoaXMucHVzaChkKTt9fX19O0VsZW1lbnRzLnByb3RvdHlwZT17bGVuZ3RoOjB9O0VsZW1lbnRzLnBhcmVudD1BcnJheTtuZXcgVHlwZSgiRWxlbWVudHMiLEVsZW1lbnRzKS5pbXBsZW1lbnQoe2ZpbHRlcjpmdW5jdGlvbihhLGIpe2lmKCFhKXtyZXR1cm4gdGhpczsKfXJldHVybiBuZXcgRWxlbWVudHMoQXJyYXkuZmlsdGVyKHRoaXMsKHR5cGVPZihhKT09InN0cmluZyIpP2Z1bmN0aW9uKGMpe3JldHVybiBjLm1hdGNoKGEpO306YSxiKSk7fS5wcm90ZWN0KCkscHVzaDpmdW5jdGlvbigpe3ZhciBkPXRoaXMubGVuZ3RoO2Zvcih2YXIgYj0wLGE9YXJndW1lbnRzLmxlbmd0aDsKYjxhO2IrKyl7dmFyIGM9ZG9jdW1lbnQuaWQoYXJndW1lbnRzW2JdKTtpZihjKXt0aGlzW2QrK109Yzt9fXJldHVybih0aGlzLmxlbmd0aD1kKTt9LnByb3RlY3QoKSx1bnNoaWZ0OmZ1bmN0aW9uKCl7dmFyIGI9W107Zm9yKHZhciBjPTAsYT1hcmd1bWVudHMubGVuZ3RoOwpjPGE7YysrKXt2YXIgZD1kb2N1bWVudC5pZChhcmd1bWVudHNbY10pO2lmKGQpe2IucHVzaChkKTt9fXJldHVybiBBcnJheS5wcm90b3R5cGUudW5zaGlmdC5hcHBseSh0aGlzLGIpO30ucHJvdGVjdCgpLGNvbmNhdDpmdW5jdGlvbigpe3ZhciBiPW5ldyBFbGVtZW50cyh0aGlzKTsKZm9yKHZhciBjPTAsYT1hcmd1bWVudHMubGVuZ3RoO2M8YTtjKyspe3ZhciBkPWFyZ3VtZW50c1tjXTtpZihUeXBlLmlzRW51bWVyYWJsZShkKSl7Yi5hcHBlbmQoZCk7fWVsc2V7Yi5wdXNoKGQpO319cmV0dXJuIGI7fS5wcm90ZWN0KCksYXBwZW5kOmZ1bmN0aW9uKGMpe2Zvcih2YXIgYj0wLGE9Yy5sZW5ndGg7CmI8YTtiKyspe3RoaXMucHVzaChjW2JdKTt9cmV0dXJuIHRoaXM7fS5wcm90ZWN0KCksZW1wdHk6ZnVuY3Rpb24oKXt3aGlsZSh0aGlzLmxlbmd0aCl7ZGVsZXRlIHRoaXNbLS10aGlzLmxlbmd0aF07fXJldHVybiB0aGlzO30ucHJvdGVjdCgpfSk7RWxlbWVudHMuYWxpYXMoImV4dGVuZCIsImFwcGVuZCIpOwooZnVuY3Rpb24oKXt2YXIgZz1BcnJheS5wcm90b3R5cGUuc3BsaWNlLGI9eyIwIjowLCIxIjoxLGxlbmd0aDoyfTtnLmNhbGwoYiwxLDEpO2lmKGJbMV09PTEpe0VsZW1lbnRzLmltcGxlbWVudCgic3BsaWNlIixmdW5jdGlvbigpe3ZhciBlPXRoaXMubGVuZ3RoO2cuYXBwbHkodGhpcyxhcmd1bWVudHMpOwp3aGlsZShlPj10aGlzLmxlbmd0aCl7ZGVsZXRlIHRoaXNbZS0tXTt9cmV0dXJuIHRoaXM7fS5wcm90ZWN0KCkpO31FbGVtZW50cy5pbXBsZW1lbnQoQXJyYXkucHJvdG90eXBlKTtBcnJheS5taXJyb3IoRWxlbWVudHMpO3ZhciBmO3RyeXt2YXIgYT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCI8aW5wdXQgbmFtZT14PiIpOwpmPShhLm5hbWU9PSJ4Iik7fWNhdGNoKGMpe312YXIgZD1mdW5jdGlvbihlKXtyZXR1cm4oIiIrZSkucmVwbGFjZSgvJi9nLCImYW1wOyIpLnJlcGxhY2UoLyIvZywiJnF1b3Q7Iik7fTtEb2N1bWVudC5pbXBsZW1lbnQoe25ld0VsZW1lbnQ6ZnVuY3Rpb24oZSxoKXtpZihoJiZoLmNoZWNrZWQhPW51bGwpe2guZGVmYXVsdENoZWNrZWQ9aC5jaGVja2VkOwp9aWYoZiYmaCl7ZT0iPCIrZTtpZihoLm5hbWUpe2UrPScgbmFtZT0iJytkKGgubmFtZSkrJyInO31pZihoLnR5cGUpe2UrPScgdHlwZT0iJytkKGgudHlwZSkrJyInO31lKz0iPiI7ZGVsZXRlIGgubmFtZTtkZWxldGUgaC50eXBlO31yZXR1cm4gdGhpcy5pZCh0aGlzLmNyZWF0ZUVsZW1lbnQoZSkpLnNldChoKTsKfX0pO30pKCk7RG9jdW1lbnQuaW1wbGVtZW50KHtuZXdUZXh0Tm9kZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5jcmVhdGVUZXh0Tm9kZShhKTt9LGdldERvY3VtZW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXM7fSxnZXRXaW5kb3c6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy53aW5kb3c7Cn0saWQ6KGZ1bmN0aW9uKCl7dmFyIGE9e3N0cmluZzpmdW5jdGlvbihkLGMsYil7ZD1TbGljay5maW5kKGIsIiMiK2QucmVwbGFjZSgvKFxXKS9nLCJcXCQxIikpO3JldHVybihkKT9hLmVsZW1lbnQoZCxjKTpudWxsO30sZWxlbWVudDpmdW5jdGlvbihiLGMpeyR1aWQoYik7CmlmKCFjJiYhYi4kZmFtaWx5JiYhKC9eKD86b2JqZWN0fGVtYmVkKSQvaSkudGVzdChiLnRhZ05hbWUpKXtPYmplY3QuYXBwZW5kKGIsRWxlbWVudC5Qcm90b3R5cGUpO31yZXR1cm4gYjt9LG9iamVjdDpmdW5jdGlvbihjLGQsYil7aWYoYy50b0VsZW1lbnQpe3JldHVybiBhLmVsZW1lbnQoYy50b0VsZW1lbnQoYiksZCk7Cn1yZXR1cm4gbnVsbDt9fTthLnRleHRub2RlPWEud2hpdGVzcGFjZT1hLndpbmRvdz1hLmRvY3VtZW50PWZ1bmN0aW9uKGIpe3JldHVybiBiO307cmV0dXJuIGZ1bmN0aW9uKGMsZSxkKXtpZihjJiZjLiRmYW1pbHkmJmMudWlkKXtyZXR1cm4gYzt9dmFyIGI9dHlwZU9mKGMpOwpyZXR1cm4oYVtiXSk/YVtiXShjLGUsZHx8ZG9jdW1lbnQpOm51bGw7fTt9KSgpfSk7aWYod2luZG93LiQ9PW51bGwpe1dpbmRvdy5pbXBsZW1lbnQoIiQiLGZ1bmN0aW9uKGEsYil7cmV0dXJuIGRvY3VtZW50LmlkKGEsYix0aGlzLmRvY3VtZW50KTt9KTt9V2luZG93LmltcGxlbWVudCh7Z2V0RG9jdW1lbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kb2N1bWVudDsKfSxnZXRXaW5kb3c6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpczt9fSk7W0RvY3VtZW50LEVsZW1lbnRdLmludm9rZSgiaW1wbGVtZW50Iix7Z2V0RWxlbWVudHM6ZnVuY3Rpb24oYSl7cmV0dXJuIFNsaWNrLnNlYXJjaCh0aGlzLGEsbmV3IEVsZW1lbnRzKTt9LGdldEVsZW1lbnQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGRvY3VtZW50LmlkKFNsaWNrLmZpbmQodGhpcyxhKSk7Cn19KTsoZnVuY3Rpb24oYixkLGEpe3RoaXMuU2VsZWN0b3JzPXt9O3ZhciBlPXRoaXMuU2VsZWN0b3JzLlBzZXVkbz1uZXcgSGFzaCgpO3ZhciBjPWZ1bmN0aW9uKCl7Zm9yKHZhciBmIGluIGUpe2lmKGUuaGFzT3duUHJvcGVydHkoZikpe1NsaWNrLmRlZmluZVBzZXVkbyhmLGVbZl0pOwpkZWxldGUgZVtmXTt9fX07U2xpY2suc2VhcmNoPWZ1bmN0aW9uKGcsaCxmKXtjKCk7cmV0dXJuIGIuY2FsbCh0aGlzLGcsaCxmKTt9O1NsaWNrLmZpbmQ9ZnVuY3Rpb24oZixnKXtjKCk7cmV0dXJuIGQuY2FsbCh0aGlzLGYsZyk7fTtTbGljay5tYXRjaD1mdW5jdGlvbihnLGYpe2MoKTsKcmV0dXJuIGEuY2FsbCh0aGlzLGcsZik7fTt9KShTbGljay5zZWFyY2gsU2xpY2suZmluZCxTbGljay5tYXRjaCk7aWYod2luZG93LiQkPT1udWxsKXtXaW5kb3cuaW1wbGVtZW50KCIkJCIsZnVuY3Rpb24oYSl7dmFyIGY9bmV3IEVsZW1lbnRzO2lmKGFyZ3VtZW50cy5sZW5ndGg9PTEmJnR5cGVvZiBhPT0ic3RyaW5nIil7cmV0dXJuIFNsaWNrLnNlYXJjaCh0aGlzLmRvY3VtZW50LGEsZik7Cn12YXIgYz1BcnJheS5mbGF0dGVuKGFyZ3VtZW50cyk7Zm9yKHZhciBkPTAsYj1jLmxlbmd0aDtkPGI7ZCsrKXt2YXIgZT1jW2RdO3N3aXRjaCh0eXBlT2YoZSkpe2Nhc2UiZWxlbWVudCI6Zi5wdXNoKGUpO2JyZWFrO2Nhc2Uic3RyaW5nIjpTbGljay5zZWFyY2godGhpcy5kb2N1bWVudCxlLGYpOwp9fXJldHVybiBmO30pO31pZih3aW5kb3cuJCQ9PW51bGwpe1dpbmRvdy5pbXBsZW1lbnQoIiQkIixmdW5jdGlvbihhKXtpZihhcmd1bWVudHMubGVuZ3RoPT0xKXtpZih0eXBlb2YgYT09InN0cmluZyIpe3JldHVybiBTbGljay5zZWFyY2godGhpcy5kb2N1bWVudCxhLG5ldyBFbGVtZW50cyk7Cn1lbHNle2lmKFR5cGUuaXNFbnVtZXJhYmxlKGEpKXtyZXR1cm4gbmV3IEVsZW1lbnRzKGEpO319fXJldHVybiBuZXcgRWxlbWVudHMoYXJndW1lbnRzKTt9KTt9KGZ1bmN0aW9uKCl7dmFyIGs9e30saT17fTt2YXIgbj17aW5wdXQ6ImNoZWNrZWQiLG9wdGlvbjoic2VsZWN0ZWQiLHRleHRhcmVhOiJ2YWx1ZSJ9Owp2YXIgZT1mdW5jdGlvbihwKXtyZXR1cm4oaVtwXXx8KGlbcF09e30pKTt9O3ZhciBqPWZ1bmN0aW9uKHEpe3ZhciBwPXEudWlkO2lmKHEucmVtb3ZlRXZlbnRzKXtxLnJlbW92ZUV2ZW50cygpO31pZihxLmNsZWFyQXR0cmlidXRlcyl7cS5jbGVhckF0dHJpYnV0ZXMoKTsKfWlmKHAhPW51bGwpe2RlbGV0ZSBrW3BdO2RlbGV0ZSBpW3BdO31yZXR1cm4gcTt9O3ZhciBvPVsiZGVmYXVsdFZhbHVlIiwiYWNjZXNzS2V5IiwiY2VsbFBhZGRpbmciLCJjZWxsU3BhY2luZyIsImNvbFNwYW4iLCJmcmFtZUJvcmRlciIsIm1heExlbmd0aCIsInJlYWRPbmx5Iiwicm93U3BhbiIsInRhYkluZGV4IiwidXNlTWFwIl07CnZhciBkPVsiY29tcGFjdCIsIm5vd3JhcCIsImlzbWFwIiwiZGVjbGFyZSIsIm5vc2hhZGUiLCJjaGVja2VkIiwiZGlzYWJsZWQiLCJyZWFkT25seSIsIm11bHRpcGxlIiwic2VsZWN0ZWQiLCJub3Jlc2l6ZSIsImRlZmVyIiwiZGVmYXVsdENoZWNrZWQiXTt2YXIgZz17aHRtbDoiaW5uZXJIVE1MIiwiY2xhc3MiOiJjbGFzc05hbWUiLCJmb3IiOiJodG1sRm9yIix0ZXh0OihmdW5jdGlvbigpe3ZhciBwPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwpyZXR1cm4ocC50ZXh0Q29udGVudD09bnVsbCk/ImlubmVyVGV4dCI6InRleHRDb250ZW50Ijt9KSgpfTt2YXIgbT1bInR5cGUiXTt2YXIgaD1bInZhbHVlIiwiZGVmYXVsdFZhbHVlIl07dmFyIGw9L14oPzpocmVmfHNyY3x1c2VtYXApJC9pO2Q9ZC5hc3NvY2lhdGUoZCk7Cm89by5hc3NvY2lhdGUoby5tYXAoU3RyaW5nLnRvTG93ZXJDYXNlKSk7bT1tLmFzc29jaWF0ZShtKTtPYmplY3QuYXBwZW5kKGcsaC5hc3NvY2lhdGUoaCkpO3ZhciBjPXtiZWZvcmU6ZnVuY3Rpb24ocSxwKXt2YXIgcj1wLnBhcmVudE5vZGU7aWYocil7ci5pbnNlcnRCZWZvcmUocSxwKTsKfX0sYWZ0ZXI6ZnVuY3Rpb24ocSxwKXt2YXIgcj1wLnBhcmVudE5vZGU7aWYocil7ci5pbnNlcnRCZWZvcmUocSxwLm5leHRTaWJsaW5nKTt9fSxib3R0b206ZnVuY3Rpb24ocSxwKXtwLmFwcGVuZENoaWxkKHEpO30sdG9wOmZ1bmN0aW9uKHEscCl7cC5pbnNlcnRCZWZvcmUocSxwLmZpcnN0Q2hpbGQpOwp9fTtjLmluc2lkZT1jLmJvdHRvbTtPYmplY3QuZWFjaChjLGZ1bmN0aW9uKHEscil7cj1yLmNhcGl0YWxpemUoKTt2YXIgcD17fTtwWyJpbmplY3QiK3JdPWZ1bmN0aW9uKHMpe3EodGhpcyxkb2N1bWVudC5pZChzLHRydWUpKTtyZXR1cm4gdGhpczt9O3BbImdyYWIiK3JdPWZ1bmN0aW9uKHMpe3EoZG9jdW1lbnQuaWQocyx0cnVlKSx0aGlzKTsKcmV0dXJuIHRoaXM7fTtFbGVtZW50LmltcGxlbWVudChwKTt9KTt2YXIgYj1mdW5jdGlvbihzLHIpe2lmKCFzKXtyZXR1cm4gcjt9cz1PYmplY3QuY2xvbmUoU2xpY2sucGFyc2UocykpO3ZhciBxPXMuZXhwcmVzc2lvbnM7Zm9yKHZhciBwPXEubGVuZ3RoO3AtLTspe3FbcF1bMF0uY29tYmluYXRvcj1yOwp9cmV0dXJuIHM7fTtFbGVtZW50LmltcGxlbWVudCh7c2V0OmZ1bmN0aW9uKHIscSl7dmFyIHA9RWxlbWVudC5Qcm9wZXJ0aWVzW3JdOyhwJiZwLnNldCk/cC5zZXQuY2FsbCh0aGlzLHEpOnRoaXMuc2V0UHJvcGVydHkocixxKTt9Lm92ZXJsb2FkU2V0dGVyKCksZ2V0OmZ1bmN0aW9uKHEpe3ZhciBwPUVsZW1lbnQuUHJvcGVydGllc1txXTsKcmV0dXJuKHAmJnAuZ2V0KT9wLmdldC5hcHBseSh0aGlzKTp0aGlzLmdldFByb3BlcnR5KHEpO30ub3ZlcmxvYWRHZXR0ZXIoKSxlcmFzZTpmdW5jdGlvbihxKXt2YXIgcD1FbGVtZW50LlByb3BlcnRpZXNbcV07KHAmJnAuZXJhc2UpP3AuZXJhc2UuYXBwbHkodGhpcyk6dGhpcy5yZW1vdmVQcm9wZXJ0eShxKTsKcmV0dXJuIHRoaXM7fSxzZXRQcm9wZXJ0eTpmdW5jdGlvbihxLHIpe3E9b1txXXx8cTtpZihyPT1udWxsKXtyZXR1cm4gdGhpcy5yZW1vdmVQcm9wZXJ0eShxKTt9dmFyIHA9Z1txXTsocCk/dGhpc1twXT1yOihkW3FdKT90aGlzW3FdPSEhcjp0aGlzLnNldEF0dHJpYnV0ZShxLCIiK3IpOwpyZXR1cm4gdGhpczt9LHNldFByb3BlcnRpZXM6ZnVuY3Rpb24ocCl7Zm9yKHZhciBxIGluIHApe3RoaXMuc2V0UHJvcGVydHkocSxwW3FdKTt9cmV0dXJuIHRoaXM7fSxnZXRQcm9wZXJ0eTpmdW5jdGlvbihxKXtxPW9bcV18fHE7dmFyIHA9Z1txXXx8bVtxXTtyZXR1cm4ocCk/dGhpc1twXTooZFtxXSk/ISF0aGlzW3FdOihsLnRlc3QocSk/dGhpcy5nZXRBdHRyaWJ1dGUocSwyKToocD10aGlzLmdldEF0dHJpYnV0ZU5vZGUocSkpP3Aubm9kZVZhbHVlOm51bGwpfHxudWxsOwp9LGdldFByb3BlcnRpZXM6ZnVuY3Rpb24oKXt2YXIgcD1BcnJheS5mcm9tKGFyZ3VtZW50cyk7cmV0dXJuIHAubWFwKHRoaXMuZ2V0UHJvcGVydHksdGhpcykuYXNzb2NpYXRlKHApO30scmVtb3ZlUHJvcGVydHk6ZnVuY3Rpb24ocSl7cT1vW3FdfHxxO3ZhciBwPWdbcV07CihwKT90aGlzW3BdPSIiOihkW3FdKT90aGlzW3FdPWZhbHNlOnRoaXMucmVtb3ZlQXR0cmlidXRlKHEpO3JldHVybiB0aGlzO30scmVtb3ZlUHJvcGVydGllczpmdW5jdGlvbigpe0FycmF5LmVhY2goYXJndW1lbnRzLHRoaXMucmVtb3ZlUHJvcGVydHksdGhpcyk7cmV0dXJuIHRoaXM7Cn0saGFzQ2xhc3M6ZnVuY3Rpb24ocCl7cmV0dXJuIHRoaXMuY2xhc3NOYW1lLmNsZWFuKCkuY29udGFpbnMocCwiICIpO30sYWRkQ2xhc3M6ZnVuY3Rpb24ocCl7aWYoIXRoaXMuaGFzQ2xhc3MocCkpe3RoaXMuY2xhc3NOYW1lPSh0aGlzLmNsYXNzTmFtZSsiICIrcCkuY2xlYW4oKTsKfXJldHVybiB0aGlzO30scmVtb3ZlQ2xhc3M6ZnVuY3Rpb24ocCl7dGhpcy5jbGFzc05hbWU9dGhpcy5jbGFzc05hbWUucmVwbGFjZShuZXcgUmVnRXhwKCIoXnxcXHMpIitwKyIoPzpcXHN8JCkiKSwiJDEiKTtyZXR1cm4gdGhpczt9LHRvZ2dsZUNsYXNzOmZ1bmN0aW9uKHAscSl7aWYocT09bnVsbCl7cT0hdGhpcy5oYXNDbGFzcyhwKTsKfXJldHVybihxKT90aGlzLmFkZENsYXNzKHApOnRoaXMucmVtb3ZlQ2xhc3MocCk7fSxhZG9wdDpmdW5jdGlvbigpe3ZhciBzPXRoaXMscCx1PUFycmF5LmZsYXR0ZW4oYXJndW1lbnRzKSx0PXUubGVuZ3RoO2lmKHQ+MSl7cz1wPWRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTsKfWZvcih2YXIgcj0wO3I8dDtyKyspe3ZhciBxPWRvY3VtZW50LmlkKHVbcl0sdHJ1ZSk7aWYocSl7cy5hcHBlbmRDaGlsZChxKTt9fWlmKHApe3RoaXMuYXBwZW5kQ2hpbGQocCk7fXJldHVybiB0aGlzO30sYXBwZW5kVGV4dDpmdW5jdGlvbihxLHApe3JldHVybiB0aGlzLmdyYWIodGhpcy5nZXREb2N1bWVudCgpLm5ld1RleHROb2RlKHEpLHApOwp9LGdyYWI6ZnVuY3Rpb24ocSxwKXtjW3B8fCJib3R0b20iXShkb2N1bWVudC5pZChxLHRydWUpLHRoaXMpO3JldHVybiB0aGlzO30saW5qZWN0OmZ1bmN0aW9uKHEscCl7Y1twfHwiYm90dG9tIl0odGhpcyxkb2N1bWVudC5pZChxLHRydWUpKTtyZXR1cm4gdGhpczt9LHJlcGxhY2VzOmZ1bmN0aW9uKHApe3A9ZG9jdW1lbnQuaWQocCx0cnVlKTsKcC5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZCh0aGlzLHApO3JldHVybiB0aGlzO30sd3JhcHM6ZnVuY3Rpb24ocSxwKXtxPWRvY3VtZW50LmlkKHEsdHJ1ZSk7cmV0dXJuIHRoaXMucmVwbGFjZXMocSkuZ3JhYihxLHApO30sZ2V0UHJldmlvdXM6ZnVuY3Rpb24ocCl7cmV0dXJuIGRvY3VtZW50LmlkKFNsaWNrLmZpbmQodGhpcyxiKHAsIiF+IikpKTsKfSxnZXRBbGxQcmV2aW91czpmdW5jdGlvbihwKXtyZXR1cm4gU2xpY2suc2VhcmNoKHRoaXMsYihwLCIhfiIpLG5ldyBFbGVtZW50cyk7fSxnZXROZXh0OmZ1bmN0aW9uKHApe3JldHVybiBkb2N1bWVudC5pZChTbGljay5maW5kKHRoaXMsYihwLCJ+IikpKTt9LGdldEFsbE5leHQ6ZnVuY3Rpb24ocCl7cmV0dXJuIFNsaWNrLnNlYXJjaCh0aGlzLGIocCwifiIpLG5ldyBFbGVtZW50cyk7Cn0sZ2V0Rmlyc3Q6ZnVuY3Rpb24ocCl7cmV0dXJuIGRvY3VtZW50LmlkKFNsaWNrLnNlYXJjaCh0aGlzLGIocCwiPiIpKVswXSk7fSxnZXRMYXN0OmZ1bmN0aW9uKHApe3JldHVybiBkb2N1bWVudC5pZChTbGljay5zZWFyY2godGhpcyxiKHAsIj4iKSkuZ2V0TGFzdCgpKTsKfSxnZXRQYXJlbnQ6ZnVuY3Rpb24ocCl7cmV0dXJuIGRvY3VtZW50LmlkKFNsaWNrLmZpbmQodGhpcyxiKHAsIiEiKSkpO30sZ2V0UGFyZW50czpmdW5jdGlvbihwKXtyZXR1cm4gU2xpY2suc2VhcmNoKHRoaXMsYihwLCIhIiksbmV3IEVsZW1lbnRzKTt9LGdldFNpYmxpbmdzOmZ1bmN0aW9uKHApe3JldHVybiBTbGljay5zZWFyY2godGhpcyxiKHAsIn5+IiksbmV3IEVsZW1lbnRzKTsKfSxnZXRDaGlsZHJlbjpmdW5jdGlvbihwKXtyZXR1cm4gU2xpY2suc2VhcmNoKHRoaXMsYihwLCI+IiksbmV3IEVsZW1lbnRzKTt9LGdldFdpbmRvdzpmdW5jdGlvbigpe3JldHVybiB0aGlzLm93bmVyRG9jdW1lbnQud2luZG93O30sZ2V0RG9jdW1lbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vd25lckRvY3VtZW50Owp9LGdldEVsZW1lbnRCeUlkOmZ1bmN0aW9uKHApe3JldHVybiBkb2N1bWVudC5pZChTbGljay5maW5kKHRoaXMsIiMiKygiIitwKS5yZXBsYWNlKC8oXFcpL2csIlxcJDEiKSkpO30sZ2V0U2VsZWN0ZWQ6ZnVuY3Rpb24oKXt0aGlzLnNlbGVjdGVkSW5kZXg7cmV0dXJuIG5ldyBFbGVtZW50cyhBcnJheS5mcm9tKHRoaXMub3B0aW9ucykuZmlsdGVyKGZ1bmN0aW9uKHApe3JldHVybiBwLnNlbGVjdGVkOwp9KSk7fSx0b1F1ZXJ5U3RyaW5nOmZ1bmN0aW9uKCl7dmFyIHA9W107dGhpcy5nZXRFbGVtZW50cygiaW5wdXQsIHNlbGVjdCwgdGV4dGFyZWEiKS5lYWNoKGZ1bmN0aW9uKHIpe3ZhciBxPXIudHlwZTtpZighci5uYW1lfHxyLmRpc2FibGVkfHxxPT0ic3VibWl0Inx8cT09InJlc2V0Inx8cT09ImZpbGUifHxxPT0iaW1hZ2UiKXtyZXR1cm47Cn12YXIgcz0oci5nZXQoInRhZyIpPT0ic2VsZWN0Iik/ci5nZXRTZWxlY3RlZCgpLm1hcChmdW5jdGlvbih0KXtyZXR1cm4gZG9jdW1lbnQuaWQodCkuZ2V0KCJ2YWx1ZSIpO30pOigocT09InJhZGlvInx8cT09ImNoZWNrYm94IikmJiFyLmNoZWNrZWQpP251bGw6ci5nZXQoInZhbHVlIik7CkFycmF5LmZyb20ocykuZWFjaChmdW5jdGlvbih0KXtpZih0eXBlb2YgdCE9InVuZGVmaW5lZCIpe3AucHVzaChlbmNvZGVVUklDb21wb25lbnQoci5uYW1lKSsiPSIrZW5jb2RlVVJJQ29tcG9uZW50KHQpKTt9fSk7fSk7cmV0dXJuIHAuam9pbigiJiIpO30sZGVzdHJveTpmdW5jdGlvbigpe3ZhciBwPWoodGhpcykuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIioiKTsKQXJyYXkuZWFjaChwLGopO0VsZW1lbnQuZGlzcG9zZSh0aGlzKTtyZXR1cm4gbnVsbDt9LGVtcHR5OmZ1bmN0aW9uKCl7QXJyYXkuZnJvbSh0aGlzLmNoaWxkTm9kZXMpLmVhY2goRWxlbWVudC5kaXNwb3NlKTtyZXR1cm4gdGhpczt9LGRpc3Bvc2U6ZnVuY3Rpb24oKXtyZXR1cm4odGhpcy5wYXJlbnROb2RlKT90aGlzLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcyk6dGhpczsKfSxtYXRjaDpmdW5jdGlvbihwKXtyZXR1cm4gIXB8fFNsaWNrLm1hdGNoKHRoaXMscCk7fX0pO3ZhciBhPWZ1bmN0aW9uKHQscyxxKXtpZighcSl7dC5zZXRBdHRyaWJ1dGVOb2RlKGRvY3VtZW50LmNyZWF0ZUF0dHJpYnV0ZSgiaWQiKSk7fWlmKHQuY2xlYXJBdHRyaWJ1dGVzKXt0LmNsZWFyQXR0cmlidXRlcygpOwp0Lm1lcmdlQXR0cmlidXRlcyhzKTt0LnJlbW92ZUF0dHJpYnV0ZSgidWlkIik7aWYodC5vcHRpb25zKXt2YXIgdT10Lm9wdGlvbnMscD1zLm9wdGlvbnM7Zm9yKHZhciByPXUubGVuZ3RoO3ItLTspe3Vbcl0uc2VsZWN0ZWQ9cFtyXS5zZWxlY3RlZDt9fX12YXIgdj1uW3MudGFnTmFtZS50b0xvd2VyQ2FzZSgpXTsKaWYodiYmc1t2XSl7dFt2XT1zW3ZdO319O0VsZW1lbnQuaW1wbGVtZW50KCJjbG9uZSIsZnVuY3Rpb24ocixwKXtyPXIhPT1mYWxzZTt2YXIgdz10aGlzLmNsb25lTm9kZShyKSxxO2lmKHIpe3ZhciBzPXcuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIioiKSx1PXRoaXMuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIioiKTsKZm9yKHE9cy5sZW5ndGg7cS0tOyl7YShzW3FdLHVbcV0scCk7fX1hKHcsdGhpcyxwKTtpZihCcm93c2VyLmllKXt2YXIgdD13LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJvYmplY3QiKSx2PXRoaXMuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIm9iamVjdCIpO2ZvcihxPXQubGVuZ3RoOwpxLS07KXt0W3FdLm91dGVySFRNTD12W3FdLm91dGVySFRNTDt9fXJldHVybiBkb2N1bWVudC5pZCh3KTt9KTt2YXIgZj17Y29udGFpbnM6ZnVuY3Rpb24ocCl7cmV0dXJuIFNsaWNrLmNvbnRhaW5zKHRoaXMscCk7fX07aWYoIWRvY3VtZW50LmNvbnRhaW5zKXtEb2N1bWVudC5pbXBsZW1lbnQoZik7Cn1pZighZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2IikuY29udGFpbnMpe0VsZW1lbnQuaW1wbGVtZW50KGYpO31FbGVtZW50LmltcGxlbWVudCgiaGFzQ2hpbGQiLGZ1bmN0aW9uKHApe3JldHVybiB0aGlzIT09cCYmdGhpcy5jb250YWlucyhwKTt9KTtbRWxlbWVudCxXaW5kb3csRG9jdW1lbnRdLmludm9rZSgiaW1wbGVtZW50Iix7YWRkTGlzdGVuZXI6ZnVuY3Rpb24ocyxyKXtpZihzPT0idW5sb2FkIil7dmFyIHA9cixxPXRoaXM7CnI9ZnVuY3Rpb24oKXtxLnJlbW92ZUxpc3RlbmVyKCJ1bmxvYWQiLHIpO3AoKTt9O31lbHNle2tbJHVpZCh0aGlzKV09dGhpczt9aWYodGhpcy5hZGRFdmVudExpc3RlbmVyKXt0aGlzLmFkZEV2ZW50TGlzdGVuZXIocyxyLCEhYXJndW1lbnRzWzJdKTt9ZWxzZXt0aGlzLmF0dGFjaEV2ZW50KCJvbiIrcyxyKTsKfXJldHVybiB0aGlzO30scmVtb3ZlTGlzdGVuZXI6ZnVuY3Rpb24ocSxwKXtpZih0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIpe3RoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihxLHAsISFhcmd1bWVudHNbMl0pO31lbHNle3RoaXMuZGV0YWNoRXZlbnQoIm9uIitxLHApOwp9cmV0dXJuIHRoaXM7fSxyZXRyaWV2ZTpmdW5jdGlvbihxLHApe3ZhciBzPWUoJHVpZCh0aGlzKSkscj1zW3FdO2lmKHAhPW51bGwmJnI9PW51bGwpe3I9c1txXT1wO31yZXR1cm4gciE9bnVsbD9yOm51bGw7fSxzdG9yZTpmdW5jdGlvbihxLHApe3ZhciByPWUoJHVpZCh0aGlzKSk7CnJbcV09cDtyZXR1cm4gdGhpczt9LGVsaW1pbmF0ZTpmdW5jdGlvbihwKXt2YXIgcT1lKCR1aWQodGhpcykpO2RlbGV0ZSBxW3BdO3JldHVybiB0aGlzO319KTtpZih3aW5kb3cuYXR0YWNoRXZlbnQmJiF3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcil7d2luZG93LmFkZExpc3RlbmVyKCJ1bmxvYWQiLGZ1bmN0aW9uKCl7T2JqZWN0LmVhY2goayxqKTsKaWYod2luZG93LkNvbGxlY3RHYXJiYWdlKXtDb2xsZWN0R2FyYmFnZSgpO319KTt9fSkoKTtFbGVtZW50LlByb3BlcnRpZXM9e307RWxlbWVudC5Qcm9wZXJ0aWVzPW5ldyBIYXNoO0VsZW1lbnQuUHJvcGVydGllcy5zdHlsZT17c2V0OmZ1bmN0aW9uKGEpe3RoaXMuc3R5bGUuY3NzVGV4dD1hOwp9LGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnN0eWxlLmNzc1RleHQ7fSxlcmFzZTpmdW5jdGlvbigpe3RoaXMuc3R5bGUuY3NzVGV4dD0iIjt9fTtFbGVtZW50LlByb3BlcnRpZXMudGFnPXtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50YWdOYW1lLnRvTG93ZXJDYXNlKCk7Cn19OyhmdW5jdGlvbihhKXtpZihhIT1udWxsKXtFbGVtZW50LlByb3BlcnRpZXMubWF4bGVuZ3RoPUVsZW1lbnQuUHJvcGVydGllcy5tYXhMZW5ndGg9e2dldDpmdW5jdGlvbigpe3ZhciBiPXRoaXMuZ2V0QXR0cmlidXRlKCJtYXhMZW5ndGgiKTtyZXR1cm4gYj09YT9udWxsOmI7Cn19O319KShkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbnB1dCIpLmdldEF0dHJpYnV0ZSgibWF4TGVuZ3RoIikpO0VsZW1lbnQuUHJvcGVydGllcy5odG1sPShmdW5jdGlvbigpe3ZhciBjPUZ1bmN0aW9uLmF0dGVtcHQoZnVuY3Rpb24oKXt2YXIgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0YWJsZSIpOwplLmlubmVySFRNTD0iPHRyPjx0ZD48L3RkPjwvdHI+Ijt9KTt2YXIgZD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTt2YXIgYT17dGFibGU6WzEsIjx0YWJsZT4iLCI8L3RhYmxlPiJdLHNlbGVjdDpbMSwiPHNlbGVjdD4iLCI8L3NlbGVjdD4iXSx0Ym9keTpbMiwiPHRhYmxlPjx0Ym9keT4iLCI8L3Rib2R5PjwvdGFibGU+Il0sdHI6WzMsIjx0YWJsZT48dGJvZHk+PHRyPiIsIjwvdHI+PC90Ym9keT48L3RhYmxlPiJdfTsKYS50aGVhZD1hLnRmb290PWEudGJvZHk7dmFyIGI9e3NldDpmdW5jdGlvbigpe3ZhciBmPUFycmF5LmZsYXR0ZW4oYXJndW1lbnRzKS5qb2luKCIiKTt2YXIgZz0oIWMmJmFbdGhpcy5nZXQoInRhZyIpXSk7aWYoZyl7dmFyIGg9ZDtoLmlubmVySFRNTD1nWzFdK2YrZ1syXTsKZm9yKHZhciBlPWdbMF07ZS0tOyl7aD1oLmZpcnN0Q2hpbGQ7fXRoaXMuZW1wdHkoKS5hZG9wdChoLmNoaWxkTm9kZXMpO31lbHNle3RoaXMuaW5uZXJIVE1MPWY7fX19O2IuZXJhc2U9Yi5zZXQ7cmV0dXJuIGI7fSkoKTsoZnVuY3Rpb24oKXt2YXIgYz1kb2N1bWVudC5odG1sOwpFbGVtZW50LlByb3BlcnRpZXMuc3R5bGVzPXtzZXQ6ZnVuY3Rpb24oZil7dGhpcy5zZXRTdHlsZXMoZik7fX07dmFyIGU9KGMuc3R5bGUub3BhY2l0eSE9bnVsbCk7dmFyIGQ9L2FscGhhXChvcGFjaXR5PShbXGQuXSspXCkvaTt2YXIgYj1mdW5jdGlvbihnLGYpe2lmKCFnLmN1cnJlbnRTdHlsZXx8IWcuY3VycmVudFN0eWxlLmhhc0xheW91dCl7Zy5zdHlsZS56b29tPTE7Cn1pZihlKXtnLnN0eWxlLm9wYWNpdHk9Zjt9ZWxzZXtmPShmPT0xKT8iIjoiYWxwaGEob3BhY2l0eT0iK2YqMTAwKyIpIjt2YXIgaD1nLnN0eWxlLmZpbHRlcnx8Zy5nZXRDb21wdXRlZFN0eWxlKCJmaWx0ZXIiKXx8IiI7Zy5zdHlsZS5maWx0ZXI9ZC50ZXN0KGgpP2gucmVwbGFjZShkLGYpOmgrZjsKfX07RWxlbWVudC5Qcm9wZXJ0aWVzLm9wYWNpdHk9e3NldDpmdW5jdGlvbihnKXt2YXIgZj10aGlzLnN0eWxlLnZpc2liaWxpdHk7aWYoZz09MCYmZiE9ImhpZGRlbiIpe3RoaXMuc3R5bGUudmlzaWJpbGl0eT0iaGlkZGVuIjt9ZWxzZXtpZihnIT0wJiZmIT0idmlzaWJsZSIpe3RoaXMuc3R5bGUudmlzaWJpbGl0eT0idmlzaWJsZSI7Cn19Yih0aGlzLGcpO30sZ2V0OihlKT9mdW5jdGlvbigpe3ZhciBmPXRoaXMuc3R5bGUub3BhY2l0eXx8dGhpcy5nZXRDb21wdXRlZFN0eWxlKCJvcGFjaXR5Iik7cmV0dXJuKGY9PSIiKT8xOmY7fTpmdW5jdGlvbigpe3ZhciBmLGc9KHRoaXMuc3R5bGUuZmlsdGVyfHx0aGlzLmdldENvbXB1dGVkU3R5bGUoImZpbHRlciIpKTsKaWYoZyl7Zj1nLm1hdGNoKGQpO31yZXR1cm4oZj09bnVsbHx8Zz09bnVsbCk/MTooZlsxXS8xMDApO319O3ZhciBhPShjLnN0eWxlLmNzc0Zsb2F0PT1udWxsKT8ic3R5bGVGbG9hdCI6ImNzc0Zsb2F0IjtFbGVtZW50LmltcGxlbWVudCh7Z2V0Q29tcHV0ZWRTdHlsZTpmdW5jdGlvbihoKXtpZih0aGlzLmN1cnJlbnRTdHlsZSl7cmV0dXJuIHRoaXMuY3VycmVudFN0eWxlW2guY2FtZWxDYXNlKCldOwp9dmFyIGc9RWxlbWVudC5nZXREb2N1bWVudCh0aGlzKS5kZWZhdWx0VmlldyxmPWc/Zy5nZXRDb21wdXRlZFN0eWxlKHRoaXMsbnVsbCk6bnVsbDtyZXR1cm4oZik/Zi5nZXRQcm9wZXJ0eVZhbHVlKChoPT1hKT8iZmxvYXQiOmguaHlwaGVuYXRlKCkpOm51bGw7fSxzZXRPcGFjaXR5OmZ1bmN0aW9uKGYpe2IodGhpcyxmKTsKcmV0dXJuIHRoaXM7fSxnZXRPcGFjaXR5OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0KCJvcGFjaXR5Iik7fSxzZXRTdHlsZTpmdW5jdGlvbihnLGYpe3N3aXRjaChnKXtjYXNlIm9wYWNpdHkiOnJldHVybiB0aGlzLnNldCgib3BhY2l0eSIscGFyc2VGbG9hdChmKSk7CmNhc2UiZmxvYXQiOmc9YTt9Zz1nLmNhbWVsQ2FzZSgpO2lmKHR5cGVPZihmKSE9InN0cmluZyIpe3ZhciBoPShFbGVtZW50LlN0eWxlc1tnXXx8IkAiKS5zcGxpdCgiICIpO2Y9QXJyYXkuZnJvbShmKS5tYXAoZnVuY3Rpb24oayxqKXtpZighaFtqXSl7cmV0dXJuIiI7Cn1yZXR1cm4odHlwZU9mKGspPT0ibnVtYmVyIik/aFtqXS5yZXBsYWNlKCJAIixNYXRoLnJvdW5kKGspKTprO30pLmpvaW4oIiAiKTt9ZWxzZXtpZihmPT1TdHJpbmcoTnVtYmVyKGYpKSl7Zj1NYXRoLnJvdW5kKGYpO319dGhpcy5zdHlsZVtnXT1mO3JldHVybiB0aGlzOwp9LGdldFN0eWxlOmZ1bmN0aW9uKGwpe3N3aXRjaChsKXtjYXNlIm9wYWNpdHkiOnJldHVybiB0aGlzLmdldCgib3BhY2l0eSIpO2Nhc2UiZmxvYXQiOmw9YTt9bD1sLmNhbWVsQ2FzZSgpO3ZhciBmPXRoaXMuc3R5bGVbbF07aWYoIWZ8fGw9PSJ6SW5kZXgiKXtmPVtdOwpmb3IodmFyIGsgaW4gRWxlbWVudC5TaG9ydFN0eWxlcyl7aWYobCE9ayl7Y29udGludWU7fWZvcih2YXIgaiBpbiBFbGVtZW50LlNob3J0U3R5bGVzW2tdKXtmLnB1c2godGhpcy5nZXRTdHlsZShqKSk7fXJldHVybiBmLmpvaW4oIiAiKTt9Zj10aGlzLmdldENvbXB1dGVkU3R5bGUobCk7Cn1pZihmKXtmPVN0cmluZyhmKTt2YXIgaD1mLm1hdGNoKC9yZ2JhP1woW1xkXHMsXStcKS8pO2lmKGgpe2Y9Zi5yZXBsYWNlKGhbMF0saFswXS5yZ2JUb0hleCgpKTt9fWlmKEJyb3dzZXIub3BlcmF8fChCcm93c2VyLmllJiZpc05hTihwYXJzZUZsb2F0KGYpKSkpe2lmKCgvXihoZWlnaHR8d2lkdGgpJC8pLnRlc3QobCkpe3ZhciBnPShsPT0id2lkdGgiKT9bImxlZnQiLCJyaWdodCJdOlsidG9wIiwiYm90dG9tIl0saT0wOwpnLmVhY2goZnVuY3Rpb24obSl7aSs9dGhpcy5nZXRTdHlsZSgiYm9yZGVyLSIrbSsiLXdpZHRoIikudG9JbnQoKSt0aGlzLmdldFN0eWxlKCJwYWRkaW5nLSIrbSkudG9JbnQoKTt9LHRoaXMpO3JldHVybiB0aGlzWyJvZmZzZXQiK2wuY2FwaXRhbGl6ZSgpXS1pKyJweCI7Cn1pZihCcm93c2VyLm9wZXJhJiZTdHJpbmcoZikuaW5kZXhPZigicHgiKSE9LTEpe3JldHVybiBmO31pZigoL15ib3JkZXIoLispV2lkdGh8bWFyZ2lufHBhZGRpbmcvKS50ZXN0KGwpKXtyZXR1cm4iMHB4Ijt9fXJldHVybiBmO30sc2V0U3R5bGVzOmZ1bmN0aW9uKGcpe2Zvcih2YXIgZiBpbiBnKXt0aGlzLnNldFN0eWxlKGYsZ1tmXSk7Cn1yZXR1cm4gdGhpczt9LGdldFN0eWxlczpmdW5jdGlvbigpe3ZhciBmPXt9O0FycmF5LmZsYXR0ZW4oYXJndW1lbnRzKS5lYWNoKGZ1bmN0aW9uKGcpe2ZbZ109dGhpcy5nZXRTdHlsZShnKTt9LHRoaXMpO3JldHVybiBmO319KTtFbGVtZW50LlN0eWxlcz17bGVmdDoiQHB4Iix0b3A6IkBweCIsYm90dG9tOiJAcHgiLHJpZ2h0OiJAcHgiLHdpZHRoOiJAcHgiLGhlaWdodDoiQHB4IixtYXhXaWR0aDoiQHB4IixtYXhIZWlnaHQ6IkBweCIsbWluV2lkdGg6IkBweCIsbWluSGVpZ2h0OiJAcHgiLGJhY2tncm91bmRDb2xvcjoicmdiKEAsIEAsIEApIixiYWNrZ3JvdW5kUG9zaXRpb246IkBweCBAcHgiLGNvbG9yOiJyZ2IoQCwgQCwgQCkiLGZvbnRTaXplOiJAcHgiLGxldHRlclNwYWNpbmc6IkBweCIsbGluZUhlaWdodDoiQHB4IixjbGlwOiJyZWN0KEBweCBAcHggQHB4IEBweCkiLG1hcmdpbjoiQHB4IEBweCBAcHggQHB4IixwYWRkaW5nOiJAcHggQHB4IEBweCBAcHgiLGJvcmRlcjoiQHB4IEAgcmdiKEAsIEAsIEApIEBweCBAIHJnYihALCBALCBAKSBAcHggQCByZ2IoQCwgQCwgQCkiLGJvcmRlcldpZHRoOiJAcHggQHB4IEBweCBAcHgiLGJvcmRlclN0eWxlOiJAIEAgQCBAIixib3JkZXJDb2xvcjoicmdiKEAsIEAsIEApIHJnYihALCBALCBAKSByZ2IoQCwgQCwgQCkgcmdiKEAsIEAsIEApIix6SW5kZXg6IkAiLHpvb206IkAiLGZvbnRXZWlnaHQ6IkAiLHRleHRJbmRlbnQ6IkBweCIsb3BhY2l0eToiQCJ9OwpFbGVtZW50LlN0eWxlcz1uZXcgSGFzaChFbGVtZW50LlN0eWxlcyk7RWxlbWVudC5TaG9ydFN0eWxlcz17bWFyZ2luOnt9LHBhZGRpbmc6e30sYm9yZGVyOnt9LGJvcmRlcldpZHRoOnt9LGJvcmRlclN0eWxlOnt9LGJvcmRlckNvbG9yOnt9fTtbIlRvcCIsIlJpZ2h0IiwiQm90dG9tIiwiTGVmdCJdLmVhY2goZnVuY3Rpb24obCl7dmFyIGs9RWxlbWVudC5TaG9ydFN0eWxlczsKdmFyIGc9RWxlbWVudC5TdHlsZXM7WyJtYXJnaW4iLCJwYWRkaW5nIl0uZWFjaChmdW5jdGlvbihtKXt2YXIgbj1tK2w7a1ttXVtuXT1nW25dPSJAcHgiO30pO3ZhciBqPSJib3JkZXIiK2w7ay5ib3JkZXJbal09Z1tqXT0iQHB4IEAgcmdiKEAsIEAsIEApIjt2YXIgaT1qKyJXaWR0aCIsZj1qKyJTdHlsZSIsaD1qKyJDb2xvciI7Cmtbal09e307ay5ib3JkZXJXaWR0aFtpXT1rW2pdW2ldPWdbaV09IkBweCI7ay5ib3JkZXJTdHlsZVtmXT1rW2pdW2ZdPWdbZl09IkAiO2suYm9yZGVyQ29sb3JbaF09a1tqXVtoXT1nW2hdPSJyZ2IoQCwgQCwgQCkiO30pO30pLmNhbGwodGhpcyk7KGZ1bmN0aW9uKCl7RWxlbWVudC5Qcm9wZXJ0aWVzLmV2ZW50cz17c2V0OmZ1bmN0aW9uKGIpe3RoaXMuYWRkRXZlbnRzKGIpOwp9fTtbRWxlbWVudCxXaW5kb3csRG9jdW1lbnRdLmludm9rZSgiaW1wbGVtZW50Iix7YWRkRXZlbnQ6ZnVuY3Rpb24oZixoKXt2YXIgaT10aGlzLnJldHJpZXZlKCJldmVudHMiLHt9KTtpZighaVtmXSl7aVtmXT17a2V5czpbXSx2YWx1ZXM6W119O31pZihpW2ZdLmtleXMuY29udGFpbnMoaCkpe3JldHVybiB0aGlzOwp9aVtmXS5rZXlzLnB1c2goaCk7dmFyIGc9ZixiPUVsZW1lbnQuRXZlbnRzW2ZdLGQ9aCxqPXRoaXM7aWYoYil7aWYoYi5vbkFkZCl7Yi5vbkFkZC5jYWxsKHRoaXMsaCk7fWlmKGIuY29uZGl0aW9uKXtkPWZ1bmN0aW9uKGspe2lmKGIuY29uZGl0aW9uLmNhbGwodGhpcyxrKSl7cmV0dXJuIGguY2FsbCh0aGlzLGspOwp9cmV0dXJuIHRydWU7fTt9Zz1iLmJhc2V8fGc7fXZhciBlPWZ1bmN0aW9uKCl7cmV0dXJuIGguY2FsbChqKTt9O3ZhciBjPUVsZW1lbnQuTmF0aXZlRXZlbnRzW2ddO2lmKGMpe2lmKGM9PTIpe2U9ZnVuY3Rpb24oayl7az1uZXcgRXZlbnQoayxqLmdldFdpbmRvdygpKTsKaWYoZC5jYWxsKGosayk9PT1mYWxzZSl7ay5zdG9wKCk7fX07fXRoaXMuYWRkTGlzdGVuZXIoZyxlLGFyZ3VtZW50c1syXSk7fWlbZl0udmFsdWVzLnB1c2goZSk7cmV0dXJuIHRoaXM7fSxyZW1vdmVFdmVudDpmdW5jdGlvbihlLGQpe3ZhciBjPXRoaXMucmV0cmlldmUoImV2ZW50cyIpOwppZighY3x8IWNbZV0pe3JldHVybiB0aGlzO312YXIgaD1jW2VdO3ZhciBiPWgua2V5cy5pbmRleE9mKGQpO2lmKGI9PS0xKXtyZXR1cm4gdGhpczt9dmFyIGc9aC52YWx1ZXNbYl07ZGVsZXRlIGgua2V5c1tiXTtkZWxldGUgaC52YWx1ZXNbYl07dmFyIGY9RWxlbWVudC5FdmVudHNbZV07CmlmKGYpe2lmKGYub25SZW1vdmUpe2Yub25SZW1vdmUuY2FsbCh0aGlzLGQpO31lPWYuYmFzZXx8ZTt9cmV0dXJuKEVsZW1lbnQuTmF0aXZlRXZlbnRzW2VdKT90aGlzLnJlbW92ZUxpc3RlbmVyKGUsZyxhcmd1bWVudHNbMl0pOnRoaXM7fSxhZGRFdmVudHM6ZnVuY3Rpb24oYil7Zm9yKHZhciBjIGluIGIpe3RoaXMuYWRkRXZlbnQoYyxiW2NdKTsKfXJldHVybiB0aGlzO30scmVtb3ZlRXZlbnRzOmZ1bmN0aW9uKGIpe3ZhciBkO2lmKHR5cGVPZihiKT09Im9iamVjdCIpe2ZvcihkIGluIGIpe3RoaXMucmVtb3ZlRXZlbnQoZCxiW2RdKTt9cmV0dXJuIHRoaXM7fXZhciBjPXRoaXMucmV0cmlldmUoImV2ZW50cyIpOwppZighYyl7cmV0dXJuIHRoaXM7fWlmKCFiKXtmb3IoZCBpbiBjKXt0aGlzLnJlbW92ZUV2ZW50cyhkKTt9dGhpcy5lbGltaW5hdGUoImV2ZW50cyIpO31lbHNle2lmKGNbYl0pe2NbYl0ua2V5cy5lYWNoKGZ1bmN0aW9uKGUpe3RoaXMucmVtb3ZlRXZlbnQoYixlKTt9LHRoaXMpOwpkZWxldGUgY1tiXTt9fXJldHVybiB0aGlzO30sZmlyZUV2ZW50OmZ1bmN0aW9uKGUsYyxiKXt2YXIgZD10aGlzLnJldHJpZXZlKCJldmVudHMiKTtpZighZHx8IWRbZV0pe3JldHVybiB0aGlzO31jPUFycmF5LmZyb20oYyk7ZFtlXS5rZXlzLmVhY2goZnVuY3Rpb24oZil7aWYoYil7Zi5kZWxheShiLHRoaXMsYyk7Cn1lbHNle2YuYXBwbHkodGhpcyxjKTt9fSx0aGlzKTtyZXR1cm4gdGhpczt9LGNsb25lRXZlbnRzOmZ1bmN0aW9uKGUsZCl7ZT1kb2N1bWVudC5pZChlKTt2YXIgYz1lLnJldHJpZXZlKCJldmVudHMiKTtpZighYyl7cmV0dXJuIHRoaXM7fWlmKCFkKXtmb3IodmFyIGIgaW4gYyl7dGhpcy5jbG9uZUV2ZW50cyhlLGIpOwp9fWVsc2V7aWYoY1tkXSl7Y1tkXS5rZXlzLmVhY2goZnVuY3Rpb24oZil7dGhpcy5hZGRFdmVudChkLGYpO30sdGhpcyk7fX1yZXR1cm4gdGhpczt9fSk7RWxlbWVudC5OYXRpdmVFdmVudHM9e2NsaWNrOjIsZGJsY2xpY2s6Mixtb3VzZXVwOjIsbW91c2Vkb3duOjIsY29udGV4dG1lbnU6Mixtb3VzZXdoZWVsOjIsRE9NTW91c2VTY3JvbGw6Mixtb3VzZW92ZXI6Mixtb3VzZW91dDoyLG1vdXNlbW92ZToyLHNlbGVjdHN0YXJ0OjIsc2VsZWN0ZW5kOjIsa2V5ZG93bjoyLGtleXByZXNzOjIsa2V5dXA6MixvcmllbnRhdGlvbmNoYW5nZToyLHRvdWNoc3RhcnQ6Mix0b3VjaG1vdmU6Mix0b3VjaGVuZDoyLHRvdWNoY2FuY2VsOjIsZ2VzdHVyZXN0YXJ0OjIsZ2VzdHVyZWNoYW5nZToyLGdlc3R1cmVlbmQ6Mixmb2N1czoyLGJsdXI6MixjaGFuZ2U6MixyZXNldDoyLHNlbGVjdDoyLHN1Ym1pdDoyLGxvYWQ6Mix1bmxvYWQ6MSxiZWZvcmV1bmxvYWQ6MixyZXNpemU6MSxtb3ZlOjEsRE9NQ29udGVudExvYWRlZDoxLHJlYWR5c3RhdGVjaGFuZ2U6MSxlcnJvcjoxLGFib3J0OjEsc2Nyb2xsOjF9Owp2YXIgYT1mdW5jdGlvbihiKXt2YXIgYz1iLnJlbGF0ZWRUYXJnZXQ7aWYoYz09bnVsbCl7cmV0dXJuIHRydWU7fWlmKCFjKXtyZXR1cm4gZmFsc2U7fXJldHVybihjIT10aGlzJiZjLnByZWZpeCE9Inh1bCImJnR5cGVPZih0aGlzKSE9ImRvY3VtZW50IiYmIXRoaXMuY29udGFpbnMoYykpOwp9O0VsZW1lbnQuRXZlbnRzPXttb3VzZWVudGVyOntiYXNlOiJtb3VzZW92ZXIiLGNvbmRpdGlvbjphfSxtb3VzZWxlYXZlOntiYXNlOiJtb3VzZW91dCIsY29uZGl0aW9uOmF9LG1vdXNld2hlZWw6e2Jhc2U6KEJyb3dzZXIuZmlyZWZveCk/IkRPTU1vdXNlU2Nyb2xsIjoibW91c2V3aGVlbCJ9fTsKRWxlbWVudC5FdmVudHM9bmV3IEhhc2goRWxlbWVudC5FdmVudHMpO30pLmNhbGwodGhpcyk7KGZ1bmN0aW9uKCl7dmFyIGg9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2IiksZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTtoLnN0eWxlLmhlaWdodD0iMCI7CmguYXBwZW5kQ2hpbGQoZSk7dmFyIGQ9KGUub2Zmc2V0UGFyZW50PT09aCk7aD1lPW51bGw7dmFyIGw9ZnVuY3Rpb24obSl7cmV0dXJuIGsobSwicG9zaXRpb24iKSE9InN0YXRpYyJ8fGEobSk7fTt2YXIgaT1mdW5jdGlvbihtKXtyZXR1cm4gbChtKXx8KC9eKD86dGFibGV8dGR8dGgpJC9pKS50ZXN0KG0udGFnTmFtZSk7Cn07RWxlbWVudC5pbXBsZW1lbnQoe3Njcm9sbFRvOmZ1bmN0aW9uKG0sbil7aWYoYSh0aGlzKSl7dGhpcy5nZXRXaW5kb3coKS5zY3JvbGxUbyhtLG4pO31lbHNle3RoaXMuc2Nyb2xsTGVmdD1tO3RoaXMuc2Nyb2xsVG9wPW47fXJldHVybiB0aGlzO30sZ2V0U2l6ZTpmdW5jdGlvbigpe2lmKGEodGhpcykpe3JldHVybiB0aGlzLmdldFdpbmRvdygpLmdldFNpemUoKTsKfXJldHVybnt4OnRoaXMub2Zmc2V0V2lkdGgseTp0aGlzLm9mZnNldEhlaWdodH07fSxnZXRTY3JvbGxTaXplOmZ1bmN0aW9uKCl7aWYoYSh0aGlzKSl7cmV0dXJuIHRoaXMuZ2V0V2luZG93KCkuZ2V0U2Nyb2xsU2l6ZSgpO31yZXR1cm57eDp0aGlzLnNjcm9sbFdpZHRoLHk6dGhpcy5zY3JvbGxIZWlnaHR9Owp9LGdldFNjcm9sbDpmdW5jdGlvbigpe2lmKGEodGhpcykpe3JldHVybiB0aGlzLmdldFdpbmRvdygpLmdldFNjcm9sbCgpO31yZXR1cm57eDp0aGlzLnNjcm9sbExlZnQseTp0aGlzLnNjcm9sbFRvcH07fSxnZXRTY3JvbGxzOmZ1bmN0aW9uKCl7dmFyIG49dGhpcy5wYXJlbnROb2RlLG09e3g6MCx5OjB9Owp3aGlsZShuJiYhYShuKSl7bS54Kz1uLnNjcm9sbExlZnQ7bS55Kz1uLnNjcm9sbFRvcDtuPW4ucGFyZW50Tm9kZTt9cmV0dXJuIG07fSxnZXRPZmZzZXRQYXJlbnQ6ZD9mdW5jdGlvbigpe3ZhciBtPXRoaXM7aWYoYShtKXx8ayhtLCJwb3NpdGlvbiIpPT0iZml4ZWQiKXtyZXR1cm4gbnVsbDsKfXZhciBuPShrKG0sInBvc2l0aW9uIik9PSJzdGF0aWMiKT9pOmw7d2hpbGUoKG09bS5wYXJlbnROb2RlKSl7aWYobihtKSl7cmV0dXJuIG07fX1yZXR1cm4gbnVsbDt9OmZ1bmN0aW9uKCl7dmFyIG09dGhpcztpZihhKG0pfHxrKG0sInBvc2l0aW9uIik9PSJmaXhlZCIpe3JldHVybiBudWxsOwp9dHJ5e3JldHVybiBtLm9mZnNldFBhcmVudDt9Y2F0Y2gobil7fXJldHVybiBudWxsO30sZ2V0T2Zmc2V0czpmdW5jdGlvbigpe2lmKHRoaXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0JiYhQnJvd3Nlci5QbGF0Zm9ybS5pb3Mpe3ZhciByPXRoaXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksbz1kb2N1bWVudC5pZCh0aGlzLmdldERvY3VtZW50KCkuZG9jdW1lbnRFbGVtZW50KSxxPW8uZ2V0U2Nyb2xsKCksdD10aGlzLmdldFNjcm9sbHMoKSxzPShrKHRoaXMsInBvc2l0aW9uIik9PSJmaXhlZCIpOwpyZXR1cm57eDpyLmxlZnQudG9JbnQoKSt0LngrKChzKT8wOnEueCktby5jbGllbnRMZWZ0LHk6ci50b3AudG9JbnQoKSt0LnkrKChzKT8wOnEueSktby5jbGllbnRUb3B9O312YXIgbj10aGlzLG09e3g6MCx5OjB9O2lmKGEodGhpcykpe3JldHVybiBtO313aGlsZShuJiYhYShuKSl7bS54Kz1uLm9mZnNldExlZnQ7Cm0ueSs9bi5vZmZzZXRUb3A7aWYoQnJvd3Nlci5maXJlZm94KXtpZighYyhuKSl7bS54Kz1iKG4pO20ueSs9ZyhuKTt9dmFyIHA9bi5wYXJlbnROb2RlO2lmKHAmJmsocCwib3ZlcmZsb3ciKSE9InZpc2libGUiKXttLngrPWIocCk7bS55Kz1nKHApO319ZWxzZXtpZihuIT10aGlzJiZCcm93c2VyLnNhZmFyaSl7bS54Kz1iKG4pOwptLnkrPWcobik7fX1uPW4ub2Zmc2V0UGFyZW50O31pZihCcm93c2VyLmZpcmVmb3gmJiFjKHRoaXMpKXttLngtPWIodGhpcyk7bS55LT1nKHRoaXMpO31yZXR1cm4gbTt9LGdldFBvc2l0aW9uOmZ1bmN0aW9uKHApe2lmKGEodGhpcykpe3JldHVybnt4OjAseTowfTt9dmFyIHE9dGhpcy5nZXRPZmZzZXRzKCksbj10aGlzLmdldFNjcm9sbHMoKTsKdmFyIG09e3g6cS54LW4ueCx5OnEueS1uLnl9O2lmKHAmJihwPWRvY3VtZW50LmlkKHApKSl7dmFyIG89cC5nZXRQb3NpdGlvbigpO3JldHVybnt4Om0ueC1vLngtYihwKSx5Om0ueS1vLnktZyhwKX07fXJldHVybiBtO30sZ2V0Q29vcmRpbmF0ZXM6ZnVuY3Rpb24obyl7aWYoYSh0aGlzKSl7cmV0dXJuIHRoaXMuZ2V0V2luZG93KCkuZ2V0Q29vcmRpbmF0ZXMoKTsKfXZhciBtPXRoaXMuZ2V0UG9zaXRpb24obyksbj10aGlzLmdldFNpemUoKTt2YXIgcD17bGVmdDptLngsdG9wOm0ueSx3aWR0aDpuLngsaGVpZ2h0Om4ueX07cC5yaWdodD1wLmxlZnQrcC53aWR0aDtwLmJvdHRvbT1wLnRvcCtwLmhlaWdodDtyZXR1cm4gcDt9LGNvbXB1dGVQb3NpdGlvbjpmdW5jdGlvbihtKXtyZXR1cm57bGVmdDptLngtaih0aGlzLCJtYXJnaW4tbGVmdCIpLHRvcDptLnktaih0aGlzLCJtYXJnaW4tdG9wIil9Owp9LHNldFBvc2l0aW9uOmZ1bmN0aW9uKG0pe3JldHVybiB0aGlzLnNldFN0eWxlcyh0aGlzLmNvbXB1dGVQb3NpdGlvbihtKSk7fX0pO1tEb2N1bWVudCxXaW5kb3ddLmludm9rZSgiaW1wbGVtZW50Iix7Z2V0U2l6ZTpmdW5jdGlvbigpe3ZhciBtPWYodGhpcyk7cmV0dXJue3g6bS5jbGllbnRXaWR0aCx5Om0uY2xpZW50SGVpZ2h0fTsKfSxnZXRTY3JvbGw6ZnVuY3Rpb24oKXt2YXIgbj10aGlzLmdldFdpbmRvdygpLG09Zih0aGlzKTtyZXR1cm57eDpuLnBhZ2VYT2Zmc2V0fHxtLnNjcm9sbExlZnQseTpuLnBhZ2VZT2Zmc2V0fHxtLnNjcm9sbFRvcH07fSxnZXRTY3JvbGxTaXplOmZ1bmN0aW9uKCl7dmFyIG89Zih0aGlzKSxuPXRoaXMuZ2V0U2l6ZSgpLG09dGhpcy5nZXREb2N1bWVudCgpLmJvZHk7CnJldHVybnt4Ok1hdGgubWF4KG8uc2Nyb2xsV2lkdGgsbS5zY3JvbGxXaWR0aCxuLngpLHk6TWF0aC5tYXgoby5zY3JvbGxIZWlnaHQsbS5zY3JvbGxIZWlnaHQsbi55KX07fSxnZXRQb3NpdGlvbjpmdW5jdGlvbigpe3JldHVybnt4OjAseTowfTt9LGdldENvb3JkaW5hdGVzOmZ1bmN0aW9uKCl7dmFyIG09dGhpcy5nZXRTaXplKCk7CnJldHVybnt0b3A6MCxsZWZ0OjAsYm90dG9tOm0ueSxyaWdodDptLngsaGVpZ2h0Om0ueSx3aWR0aDptLnh9O319KTt2YXIgaz1FbGVtZW50LmdldENvbXB1dGVkU3R5bGU7ZnVuY3Rpb24gaihtLG4pe3JldHVybiBrKG0sbikudG9JbnQoKXx8MDt9ZnVuY3Rpb24gYyhtKXtyZXR1cm4gayhtLCItbW96LWJveC1zaXppbmciKT09ImJvcmRlci1ib3giOwp9ZnVuY3Rpb24gZyhtKXtyZXR1cm4gaihtLCJib3JkZXItdG9wLXdpZHRoIik7fWZ1bmN0aW9uIGIobSl7cmV0dXJuIGoobSwiYm9yZGVyLWxlZnQtd2lkdGgiKTt9ZnVuY3Rpb24gYShtKXtyZXR1cm4oL14oPzpib2R5fGh0bWwpJC9pKS50ZXN0KG0udGFnTmFtZSk7Cn1mdW5jdGlvbiBmKG0pe3ZhciBuPW0uZ2V0RG9jdW1lbnQoKTtyZXR1cm4oIW4uY29tcGF0TW9kZXx8bi5jb21wYXRNb2RlPT0iQ1NTMUNvbXBhdCIpP24uaHRtbDpuLmJvZHk7fX0pLmNhbGwodGhpcyk7RWxlbWVudC5hbGlhcyh7cG9zaXRpb246InNldFBvc2l0aW9uIn0pOwpbV2luZG93LERvY3VtZW50LEVsZW1lbnRdLmludm9rZSgiaW1wbGVtZW50Iix7Z2V0SGVpZ2h0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0U2l6ZSgpLnk7fSxnZXRXaWR0aDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldFNpemUoKS54O30sZ2V0U2Nyb2xsVG9wOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0U2Nyb2xsKCkueTsKfSxnZXRTY3JvbGxMZWZ0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0U2Nyb2xsKCkueDt9LGdldFNjcm9sbEhlaWdodDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldFNjcm9sbFNpemUoKS55O30sZ2V0U2Nyb2xsV2lkdGg6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRTY3JvbGxTaXplKCkueDsKfSxnZXRUb3A6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRQb3NpdGlvbigpLnk7fSxnZXRMZWZ0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0UG9zaXRpb24oKS54O319KTsoZnVuY3Rpb24oKXt2YXIgZj10aGlzLkZ4PW5ldyBDbGFzcyh7SW1wbGVtZW50czpbQ2hhaW4sRXZlbnRzLE9wdGlvbnNdLG9wdGlvbnM6e2Zwczo2MCx1bml0OmZhbHNlLGR1cmF0aW9uOjUwMCxmcmFtZXM6bnVsbCxmcmFtZVNraXA6dHJ1ZSxsaW5rOiJpZ25vcmUifSxpbml0aWFsaXplOmZ1bmN0aW9uKGcpe3RoaXMuc3ViamVjdD10aGlzLnN1YmplY3R8fHRoaXM7CnRoaXMuc2V0T3B0aW9ucyhnKTt9LGdldFRyYW5zaXRpb246ZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oZyl7cmV0dXJuIC0oTWF0aC5jb3MoTWF0aC5QSSpnKS0xKS8yO307fSxzdGVwOmZ1bmN0aW9uKGcpe2lmKHRoaXMub3B0aW9ucy5mcmFtZVNraXApe3ZhciBoPSh0aGlzLnRpbWUhPW51bGwpPyhnLXRoaXMudGltZSk6MCxpPWgvdGhpcy5mcmFtZUludGVydmFsOwp0aGlzLnRpbWU9Zzt0aGlzLmZyYW1lKz1pO31lbHNle3RoaXMuZnJhbWUrKzt9aWYodGhpcy5mcmFtZTx0aGlzLmZyYW1lcyl7dmFyIGo9dGhpcy50cmFuc2l0aW9uKHRoaXMuZnJhbWUvdGhpcy5mcmFtZXMpO3RoaXMuc2V0KHRoaXMuY29tcHV0ZSh0aGlzLmZyb20sdGhpcy50byxqKSk7Cn1lbHNle3RoaXMuZnJhbWU9dGhpcy5mcmFtZXM7dGhpcy5zZXQodGhpcy5jb21wdXRlKHRoaXMuZnJvbSx0aGlzLnRvLDEpKTt0aGlzLnN0b3AoKTt9fSxzZXQ6ZnVuY3Rpb24oZyl7cmV0dXJuIGc7fSxjb21wdXRlOmZ1bmN0aW9uKGksaCxnKXtyZXR1cm4gZi5jb21wdXRlKGksaCxnKTsKfSxjaGVjazpmdW5jdGlvbigpe2lmKCF0aGlzLmlzUnVubmluZygpKXtyZXR1cm4gdHJ1ZTt9c3dpdGNoKHRoaXMub3B0aW9ucy5saW5rKXtjYXNlImNhbmNlbCI6dGhpcy5jYW5jZWwoKTtyZXR1cm4gdHJ1ZTtjYXNlImNoYWluIjp0aGlzLmNoYWluKHRoaXMuY2FsbGVyLnBhc3MoYXJndW1lbnRzLHRoaXMpKTsKcmV0dXJuIGZhbHNlO31yZXR1cm4gZmFsc2U7fSxzdGFydDpmdW5jdGlvbihrLGope2lmKCF0aGlzLmNoZWNrKGssaikpe3JldHVybiB0aGlzO310aGlzLmZyb209azt0aGlzLnRvPWo7dGhpcy5mcmFtZT0odGhpcy5vcHRpb25zLmZyYW1lU2tpcCk/MDotMTt0aGlzLnRpbWU9bnVsbDsKdGhpcy50cmFuc2l0aW9uPXRoaXMuZ2V0VHJhbnNpdGlvbigpO3ZhciBpPXRoaXMub3B0aW9ucy5mcmFtZXMsaD10aGlzLm9wdGlvbnMuZnBzLGc9dGhpcy5vcHRpb25zLmR1cmF0aW9uO3RoaXMuZHVyYXRpb249Zi5EdXJhdGlvbnNbZ118fGcudG9JbnQoKTt0aGlzLmZyYW1lSW50ZXJ2YWw9MTAwMC9oOwp0aGlzLmZyYW1lcz1pfHxNYXRoLnJvdW5kKHRoaXMuZHVyYXRpb24vdGhpcy5mcmFtZUludGVydmFsKTt0aGlzLmZpcmVFdmVudCgic3RhcnQiLHRoaXMuc3ViamVjdCk7Yi5jYWxsKHRoaXMsaCk7cmV0dXJuIHRoaXM7fSxzdG9wOmZ1bmN0aW9uKCl7aWYodGhpcy5pc1J1bm5pbmcoKSl7dGhpcy50aW1lPW51bGw7CmQuY2FsbCh0aGlzLHRoaXMub3B0aW9ucy5mcHMpO2lmKHRoaXMuZnJhbWVzPT10aGlzLmZyYW1lKXt0aGlzLmZpcmVFdmVudCgiY29tcGxldGUiLHRoaXMuc3ViamVjdCk7aWYoIXRoaXMuY2FsbENoYWluKCkpe3RoaXMuZmlyZUV2ZW50KCJjaGFpbkNvbXBsZXRlIix0aGlzLnN1YmplY3QpOwp9fWVsc2V7dGhpcy5maXJlRXZlbnQoInN0b3AiLHRoaXMuc3ViamVjdCk7fX1yZXR1cm4gdGhpczt9LGNhbmNlbDpmdW5jdGlvbigpe2lmKHRoaXMuaXNSdW5uaW5nKCkpe3RoaXMudGltZT1udWxsO2QuY2FsbCh0aGlzLHRoaXMub3B0aW9ucy5mcHMpO3RoaXMuZnJhbWU9dGhpcy5mcmFtZXM7CnRoaXMuZmlyZUV2ZW50KCJjYW5jZWwiLHRoaXMuc3ViamVjdCkuY2xlYXJDaGFpbigpO31yZXR1cm4gdGhpczt9LHBhdXNlOmZ1bmN0aW9uKCl7aWYodGhpcy5pc1J1bm5pbmcoKSl7dGhpcy50aW1lPW51bGw7ZC5jYWxsKHRoaXMsdGhpcy5vcHRpb25zLmZwcyk7fXJldHVybiB0aGlzOwp9LHJlc3VtZTpmdW5jdGlvbigpe2lmKCh0aGlzLmZyYW1lPHRoaXMuZnJhbWVzKSYmIXRoaXMuaXNSdW5uaW5nKCkpe2IuY2FsbCh0aGlzLHRoaXMub3B0aW9ucy5mcHMpO31yZXR1cm4gdGhpczt9LGlzUnVubmluZzpmdW5jdGlvbigpe3ZhciBnPWVbdGhpcy5vcHRpb25zLmZwc107CnJldHVybiBnJiZnLmNvbnRhaW5zKHRoaXMpO319KTtmLmNvbXB1dGU9ZnVuY3Rpb24oaSxoLGcpe3JldHVybihoLWkpKmcraTt9O2YuRHVyYXRpb25zPXsic2hvcnQiOjI1MCxub3JtYWw6NTAwLCJsb25nIjoxMDAwfTt2YXIgZT17fSxjPXt9O3ZhciBhPWZ1bmN0aW9uKCl7dmFyIGg9RGF0ZS5ub3coKTsKZm9yKHZhciBqPXRoaXMubGVuZ3RoO2otLTspe3ZhciBnPXRoaXNbal07aWYoZyl7Zy5zdGVwKGgpO319fTt2YXIgYj1mdW5jdGlvbihoKXt2YXIgZz1lW2hdfHwoZVtoXT1bXSk7Zy5wdXNoKHRoaXMpO2lmKCFjW2hdKXtjW2hdPWEucGVyaW9kaWNhbChNYXRoLnJvdW5kKDEwMDAvaCksZyk7Cn19O3ZhciBkPWZ1bmN0aW9uKGgpe3ZhciBnPWVbaF07aWYoZyl7Zy5lcmFzZSh0aGlzKTtpZighZy5sZW5ndGgmJmNbaF0pe2RlbGV0ZSBlW2hdO2NbaF09Y2xlYXJJbnRlcnZhbChjW2hdKTt9fX07fSkuY2FsbCh0aGlzKTtGeC5DU1M9bmV3IENsYXNzKHtFeHRlbmRzOkZ4LHByZXBhcmU6ZnVuY3Rpb24oYyxkLGIpe2I9QXJyYXkuZnJvbShiKTsKaWYoYlsxXT09bnVsbCl7YlsxXT1iWzBdO2JbMF09Yy5nZXRTdHlsZShkKTt9dmFyIGE9Yi5tYXAodGhpcy5wYXJzZSk7cmV0dXJue2Zyb206YVswXSx0bzphWzFdfTt9LHBhcnNlOmZ1bmN0aW9uKGEpe2E9RnVuY3Rpb24uZnJvbShhKSgpO2E9KHR5cGVvZiBhPT0ic3RyaW5nIik/YS5zcGxpdCgiICIpOkFycmF5LmZyb20oYSk7CnJldHVybiBhLm1hcChmdW5jdGlvbihjKXtjPVN0cmluZyhjKTt2YXIgYj1mYWxzZTtPYmplY3QuZWFjaChGeC5DU1MuUGFyc2VycyxmdW5jdGlvbihmLGUpe2lmKGIpe3JldHVybjt9dmFyIGQ9Zi5wYXJzZShjKTtpZihkfHxkPT09MCl7Yj17dmFsdWU6ZCxwYXJzZXI6Zn07Cn19KTtiPWJ8fHt2YWx1ZTpjLHBhcnNlcjpGeC5DU1MuUGFyc2Vycy5TdHJpbmd9O3JldHVybiBiO30pO30sY29tcHV0ZTpmdW5jdGlvbihkLGMsYil7dmFyIGE9W107KE1hdGgubWluKGQubGVuZ3RoLGMubGVuZ3RoKSkudGltZXMoZnVuY3Rpb24oZSl7YS5wdXNoKHt2YWx1ZTpkW2VdLnBhcnNlci5jb21wdXRlKGRbZV0udmFsdWUsY1tlXS52YWx1ZSxiKSxwYXJzZXI6ZFtlXS5wYXJzZXJ9KTsKfSk7YS4kZmFtaWx5PUZ1bmN0aW9uLmZyb20oImZ4OmNzczp2YWx1ZSIpO3JldHVybiBhO30sc2VydmU6ZnVuY3Rpb24oYyxiKXtpZih0eXBlT2YoYykhPSJmeDpjc3M6dmFsdWUiKXtjPXRoaXMucGFyc2UoYyk7fXZhciBhPVtdO2MuZWFjaChmdW5jdGlvbihkKXthPWEuY29uY2F0KGQucGFyc2VyLnNlcnZlKGQudmFsdWUsYikpOwp9KTtyZXR1cm4gYTt9LHJlbmRlcjpmdW5jdGlvbihhLGQsYyxiKXthLnNldFN0eWxlKGQsdGhpcy5zZXJ2ZShjLGIpKTt9LHNlYXJjaDpmdW5jdGlvbihhKXtpZihGeC5DU1MuQ2FjaGVbYV0pe3JldHVybiBGeC5DU1MuQ2FjaGVbYV07fXZhciBjPXt9LGI9bmV3IFJlZ0V4cCgiXiIrYS5lc2NhcGVSZWdFeHAoKSsiJCIpOwpBcnJheS5lYWNoKGRvY3VtZW50LnN0eWxlU2hlZXRzLGZ1bmN0aW9uKGYsZSl7dmFyIGQ9Zi5ocmVmO2lmKGQmJmQuY29udGFpbnMoIjovLyIpJiYhZC5jb250YWlucyhkb2N1bWVudC5kb21haW4pKXtyZXR1cm47fXZhciBnPWYucnVsZXN8fGYuY3NzUnVsZXM7QXJyYXkuZWFjaChnLGZ1bmN0aW9uKGssaCl7aWYoIWsuc3R5bGUpe3JldHVybjsKfXZhciBqPShrLnNlbGVjdG9yVGV4dCk/ay5zZWxlY3RvclRleHQucmVwbGFjZSgvXlx3Ky8sZnVuY3Rpb24oaSl7cmV0dXJuIGkudG9Mb3dlckNhc2UoKTt9KTpudWxsO2lmKCFqfHwhYi50ZXN0KGopKXtyZXR1cm47fU9iamVjdC5lYWNoKEVsZW1lbnQuU3R5bGVzLGZ1bmN0aW9uKGwsaSl7aWYoIWsuc3R5bGVbaV18fEVsZW1lbnQuU2hvcnRTdHlsZXNbaV0pe3JldHVybjsKfWw9U3RyaW5nKGsuc3R5bGVbaV0pO2NbaV09KCgvXnJnYi8pLnRlc3QobCkpP2wucmdiVG9IZXgoKTpsO30pO30pO30pO3JldHVybiBGeC5DU1MuQ2FjaGVbYV09Yzt9fSk7RnguQ1NTLkNhY2hlPXt9O0Z4LkNTUy5QYXJzZXJzPXtDb2xvcjp7cGFyc2U6ZnVuY3Rpb24oYSl7aWYoYS5tYXRjaCgvXiNbMC05YS1mXXszLDZ9JC9pKSl7cmV0dXJuIGEuaGV4VG9SZ2IodHJ1ZSk7Cn1yZXR1cm4oKGE9YS5tYXRjaCgvKFxkKyksXHMqKFxkKyksXHMqKFxkKykvKSkpP1thWzFdLGFbMl0sYVszXV06ZmFsc2U7fSxjb21wdXRlOmZ1bmN0aW9uKGMsYixhKXtyZXR1cm4gYy5tYXAoZnVuY3Rpb24oZSxkKXtyZXR1cm4gTWF0aC5yb3VuZChGeC5jb21wdXRlKGNbZF0sYltkXSxhKSk7Cn0pO30sc2VydmU6ZnVuY3Rpb24oYSl7cmV0dXJuIGEubWFwKE51bWJlcik7fX0sTnVtYmVyOntwYXJzZTpwYXJzZUZsb2F0LGNvbXB1dGU6RnguY29tcHV0ZSxzZXJ2ZTpmdW5jdGlvbihiLGEpe3JldHVybihhKT9iK2E6Yjt9fSxTdHJpbmc6e3BhcnNlOkZ1bmN0aW9uLmZyb20oZmFsc2UpLGNvbXB1dGU6ZnVuY3Rpb24oYixhKXtyZXR1cm4gYTsKfSxzZXJ2ZTpmdW5jdGlvbihhKXtyZXR1cm4gYTt9fX07RnguQ1NTLlBhcnNlcnM9bmV3IEhhc2goRnguQ1NTLlBhcnNlcnMpO0Z4LlR3ZWVuPW5ldyBDbGFzcyh7RXh0ZW5kczpGeC5DU1MsaW5pdGlhbGl6ZTpmdW5jdGlvbihiLGEpe3RoaXMuZWxlbWVudD10aGlzLnN1YmplY3Q9ZG9jdW1lbnQuaWQoYik7CnRoaXMucGFyZW50KGEpO30sc2V0OmZ1bmN0aW9uKGIsYSl7aWYoYXJndW1lbnRzLmxlbmd0aD09MSl7YT1iO2I9dGhpcy5wcm9wZXJ0eXx8dGhpcy5vcHRpb25zLnByb3BlcnR5O310aGlzLnJlbmRlcih0aGlzLmVsZW1lbnQsYixhLHRoaXMub3B0aW9ucy51bml0KTsKcmV0dXJuIHRoaXM7fSxzdGFydDpmdW5jdGlvbihjLGUsZCl7aWYoIXRoaXMuY2hlY2soYyxlLGQpKXtyZXR1cm4gdGhpczt9dmFyIGI9QXJyYXkuZmxhdHRlbihhcmd1bWVudHMpO3RoaXMucHJvcGVydHk9dGhpcy5vcHRpb25zLnByb3BlcnR5fHxiLnNoaWZ0KCk7dmFyIGE9dGhpcy5wcmVwYXJlKHRoaXMuZWxlbWVudCx0aGlzLnByb3BlcnR5LGIpOwpyZXR1cm4gdGhpcy5wYXJlbnQoYS5mcm9tLGEudG8pO319KTtFbGVtZW50LlByb3BlcnRpZXMudHdlZW49e3NldDpmdW5jdGlvbihhKXt0aGlzLmdldCgidHdlZW4iKS5jYW5jZWwoKS5zZXRPcHRpb25zKGEpO3JldHVybiB0aGlzO30sZ2V0OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5yZXRyaWV2ZSgidHdlZW4iKTsKaWYoIWEpe2E9bmV3IEZ4LlR3ZWVuKHRoaXMse2xpbms6ImNhbmNlbCJ9KTt0aGlzLnN0b3JlKCJ0d2VlbiIsYSk7fXJldHVybiBhO319O0VsZW1lbnQuaW1wbGVtZW50KHt0d2VlbjpmdW5jdGlvbihhLGMsYil7dGhpcy5nZXQoInR3ZWVuIikuc3RhcnQoYXJndW1lbnRzKTsKcmV0dXJuIHRoaXM7fSxmYWRlOmZ1bmN0aW9uKGMpe3ZhciBlPXRoaXMuZ2V0KCJ0d2VlbiIpLGQ9Im9wYWNpdHkiLGE7Yz1bYywidG9nZ2xlIl0ucGljaygpO3N3aXRjaChjKXtjYXNlImluIjplLnN0YXJ0KGQsMSk7YnJlYWs7Y2FzZSJvdXQiOmUuc3RhcnQoZCwwKTsKYnJlYWs7Y2FzZSJzaG93IjplLnNldChkLDEpO2JyZWFrO2Nhc2UiaGlkZSI6ZS5zZXQoZCwwKTticmVhaztjYXNlInRvZ2dsZSI6dmFyIGI9dGhpcy5yZXRyaWV2ZSgiZmFkZTpmbGFnIix0aGlzLmdldCgib3BhY2l0eSIpPT0xKTtlLnN0YXJ0KGQsKGIpPzA6MSk7dGhpcy5zdG9yZSgiZmFkZTpmbGFnIiwhYik7CmE9dHJ1ZTticmVhaztkZWZhdWx0OmUuc3RhcnQoZCxhcmd1bWVudHMpO31pZighYSl7dGhpcy5lbGltaW5hdGUoImZhZGU6ZmxhZyIpO31yZXR1cm4gdGhpczt9LGhpZ2hsaWdodDpmdW5jdGlvbihjLGEpe2lmKCFhKXthPXRoaXMucmV0cmlldmUoImhpZ2hsaWdodDpvcmlnaW5hbCIsdGhpcy5nZXRTdHlsZSgiYmFja2dyb3VuZC1jb2xvciIpKTsKYT0oYT09InRyYW5zcGFyZW50Iik/IiNmZmYiOmE7fXZhciBiPXRoaXMuZ2V0KCJ0d2VlbiIpO2Iuc3RhcnQoImJhY2tncm91bmQtY29sb3IiLGN8fCIjZmZmZjg4IixhKS5jaGFpbihmdW5jdGlvbigpe3RoaXMuc2V0U3R5bGUoImJhY2tncm91bmQtY29sb3IiLHRoaXMucmV0cmlldmUoImhpZ2hsaWdodDpvcmlnaW5hbCIpKTsKYi5jYWxsQ2hhaW4oKTt9LmJpbmQodGhpcykpO3JldHVybiB0aGlzO319KTtGeC5Nb3JwaD1uZXcgQ2xhc3Moe0V4dGVuZHM6RnguQ1NTLGluaXRpYWxpemU6ZnVuY3Rpb24oYixhKXt0aGlzLmVsZW1lbnQ9dGhpcy5zdWJqZWN0PWRvY3VtZW50LmlkKGIpO3RoaXMucGFyZW50KGEpOwp9LHNldDpmdW5jdGlvbihhKXtpZih0eXBlb2YgYT09InN0cmluZyIpe2E9dGhpcy5zZWFyY2goYSk7fWZvcih2YXIgYiBpbiBhKXt0aGlzLnJlbmRlcih0aGlzLmVsZW1lbnQsYixhW2JdLHRoaXMub3B0aW9ucy51bml0KTt9cmV0dXJuIHRoaXM7fSxjb21wdXRlOmZ1bmN0aW9uKGUsZCxjKXt2YXIgYT17fTsKZm9yKHZhciBiIGluIGUpe2FbYl09dGhpcy5wYXJlbnQoZVtiXSxkW2JdLGMpO31yZXR1cm4gYTt9LHN0YXJ0OmZ1bmN0aW9uKGIpe2lmKCF0aGlzLmNoZWNrKGIpKXtyZXR1cm4gdGhpczt9aWYodHlwZW9mIGI9PSJzdHJpbmciKXtiPXRoaXMuc2VhcmNoKGIpO312YXIgZT17fSxkPXt9Owpmb3IodmFyIGMgaW4gYil7dmFyIGE9dGhpcy5wcmVwYXJlKHRoaXMuZWxlbWVudCxjLGJbY10pO2VbY109YS5mcm9tO2RbY109YS50bzt9cmV0dXJuIHRoaXMucGFyZW50KGUsZCk7fX0pO0VsZW1lbnQuUHJvcGVydGllcy5tb3JwaD17c2V0OmZ1bmN0aW9uKGEpe3RoaXMuZ2V0KCJtb3JwaCIpLmNhbmNlbCgpLnNldE9wdGlvbnMoYSk7CnJldHVybiB0aGlzO30sZ2V0OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5yZXRyaWV2ZSgibW9ycGgiKTtpZighYSl7YT1uZXcgRnguTW9ycGgodGhpcyx7bGluazoiY2FuY2VsIn0pO3RoaXMuc3RvcmUoIm1vcnBoIixhKTt9cmV0dXJuIGE7fX07RWxlbWVudC5pbXBsZW1lbnQoe21vcnBoOmZ1bmN0aW9uKGEpe3RoaXMuZ2V0KCJtb3JwaCIpLnN0YXJ0KGEpOwpyZXR1cm4gdGhpczt9fSk7RnguaW1wbGVtZW50KHtnZXRUcmFuc2l0aW9uOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5vcHRpb25zLnRyYW5zaXRpb258fEZ4LlRyYW5zaXRpb25zLlNpbmUuZWFzZUluT3V0O2lmKHR5cGVvZiBhPT0ic3RyaW5nIil7dmFyIGI9YS5zcGxpdCgiOiIpOwphPUZ4LlRyYW5zaXRpb25zO2E9YVtiWzBdXXx8YVtiWzBdLmNhcGl0YWxpemUoKV07aWYoYlsxXSl7YT1hWyJlYXNlIitiWzFdLmNhcGl0YWxpemUoKSsoYlsyXT9iWzJdLmNhcGl0YWxpemUoKToiIildO319cmV0dXJuIGE7fX0pO0Z4LlRyYW5zaXRpb249ZnVuY3Rpb24oYyxiKXtiPUFycmF5LmZyb20oYik7CnZhciBhPWZ1bmN0aW9uKGQpe3JldHVybiBjKGQsYik7fTtyZXR1cm4gT2JqZWN0LmFwcGVuZChhLHtlYXNlSW46YSxlYXNlT3V0OmZ1bmN0aW9uKGQpe3JldHVybiAxLWMoMS1kLGIpO30sZWFzZUluT3V0OmZ1bmN0aW9uKGQpe3JldHVybihkPD0wLjU/YygyKmQsYik6KDItYygyKigxLWQpLGIpKSkvMjsKfX0pO307RnguVHJhbnNpdGlvbnM9e2xpbmVhcjpmdW5jdGlvbihhKXtyZXR1cm4gYTt9fTtGeC5UcmFuc2l0aW9ucz1uZXcgSGFzaChGeC5UcmFuc2l0aW9ucyk7RnguVHJhbnNpdGlvbnMuZXh0ZW5kPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYiBpbiBhKXtGeC5UcmFuc2l0aW9uc1tiXT1uZXcgRnguVHJhbnNpdGlvbihhW2JdKTsKfX07RnguVHJhbnNpdGlvbnMuZXh0ZW5kKHtQb3c6ZnVuY3Rpb24oYixhKXtyZXR1cm4gTWF0aC5wb3coYixhJiZhWzBdfHw2KTt9LEV4cG86ZnVuY3Rpb24oYSl7cmV0dXJuIE1hdGgucG93KDIsOCooYS0xKSk7fSxDaXJjOmZ1bmN0aW9uKGEpe3JldHVybiAxLU1hdGguc2luKE1hdGguYWNvcyhhKSk7Cn0sU2luZTpmdW5jdGlvbihhKXtyZXR1cm4gMS1NYXRoLmNvcyhhKk1hdGguUEkvMik7fSxCYWNrOmZ1bmN0aW9uKGIsYSl7YT1hJiZhWzBdfHwxLjYxODtyZXR1cm4gTWF0aC5wb3coYiwyKSooKGErMSkqYi1hKTt9LEJvdW5jZTpmdW5jdGlvbihmKXt2YXIgZTtmb3IodmFyIGQ9MCxjPTE7CjE7ZCs9YyxjLz0yKXtpZihmPj0oNy00KmQpLzExKXtlPWMqYy1NYXRoLnBvdygoMTEtNipkLTExKmYpLzQsMik7YnJlYWs7fX1yZXR1cm4gZTt9LEVsYXN0aWM6ZnVuY3Rpb24oYixhKXtyZXR1cm4gTWF0aC5wb3coMiwxMCotLWIpKk1hdGguY29zKDIwKmIqTWF0aC5QSSooYSYmYVswXXx8MSkvMyk7Cn19KTtbIlF1YWQiLCJDdWJpYyIsIlF1YXJ0IiwiUXVpbnQiXS5lYWNoKGZ1bmN0aW9uKGIsYSl7RnguVHJhbnNpdGlvbnNbYl09bmV3IEZ4LlRyYW5zaXRpb24oZnVuY3Rpb24oYyl7cmV0dXJuIE1hdGgucG93KGMsYSsyKTt9KTt9KTsoZnVuY3Rpb24oKXt2YXIgZD1mdW5jdGlvbigpe30sYT0oIm9ucHJvZ3Jlc3MiIGluIG5ldyBCcm93c2VyLlJlcXVlc3QpOwp2YXIgYz10aGlzLlJlcXVlc3Q9bmV3IENsYXNzKHtJbXBsZW1lbnRzOltDaGFpbixFdmVudHMsT3B0aW9uc10sb3B0aW9uczp7dXJsOiIiLGRhdGE6IiIsaGVhZGVyczp7IlgtUmVxdWVzdGVkLVdpdGgiOiJYTUxIdHRwUmVxdWVzdCIsQWNjZXB0OiJ0ZXh0L2phdmFzY3JpcHQsIHRleHQvaHRtbCwgYXBwbGljYXRpb24veG1sLCB0ZXh0L3htbCwgKi8qIn0sYXN5bmM6dHJ1ZSxmb3JtYXQ6ZmFsc2UsbWV0aG9kOiJwb3N0IixsaW5rOiJpZ25vcmUiLGlzU3VjY2VzczpudWxsLGVtdWxhdGlvbjp0cnVlLHVybEVuY29kZWQ6dHJ1ZSxlbmNvZGluZzoidXRmLTgiLGV2YWxTY3JpcHRzOmZhbHNlLGV2YWxSZXNwb25zZTpmYWxzZSx0aW1lb3V0OjAsbm9DYWNoZTpmYWxzZX0saW5pdGlhbGl6ZTpmdW5jdGlvbihlKXt0aGlzLnhocj1uZXcgQnJvd3Nlci5SZXF1ZXN0KCk7CnRoaXMuc2V0T3B0aW9ucyhlKTt0aGlzLmhlYWRlcnM9dGhpcy5vcHRpb25zLmhlYWRlcnM7fSxvblN0YXRlQ2hhbmdlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy54aHI7aWYoZS5yZWFkeVN0YXRlIT00fHwhdGhpcy5ydW5uaW5nKXtyZXR1cm47fXRoaXMucnVubmluZz1mYWxzZTsKdGhpcy5zdGF0dXM9MDtGdW5jdGlvbi5hdHRlbXB0KGZ1bmN0aW9uKCl7dmFyIGY9ZS5zdGF0dXM7dGhpcy5zdGF0dXM9KGY9PTEyMjMpPzIwNDpmO30uYmluZCh0aGlzKSk7ZS5vbnJlYWR5c3RhdGVjaGFuZ2U9ZDtpZihhKXtlLm9ucHJvZ3Jlc3M9ZS5vbmxvYWRzdGFydD1kOwp9Y2xlYXJUaW1lb3V0KHRoaXMudGltZXIpO3RoaXMucmVzcG9uc2U9e3RleHQ6dGhpcy54aHIucmVzcG9uc2VUZXh0fHwiIix4bWw6dGhpcy54aHIucmVzcG9uc2VYTUx9O2lmKHRoaXMub3B0aW9ucy5pc1N1Y2Nlc3MuY2FsbCh0aGlzLHRoaXMuc3RhdHVzKSl7dGhpcy5zdWNjZXNzKHRoaXMucmVzcG9uc2UudGV4dCx0aGlzLnJlc3BvbnNlLnhtbCk7Cn1lbHNle3RoaXMuZmFpbHVyZSgpO319LGlzU3VjY2VzczpmdW5jdGlvbigpe3ZhciBlPXRoaXMuc3RhdHVzO3JldHVybihlPj0yMDAmJmU8MzAwKTt9LGlzUnVubmluZzpmdW5jdGlvbigpe3JldHVybiAhIXRoaXMucnVubmluZzt9LHByb2Nlc3NTY3JpcHRzOmZ1bmN0aW9uKGUpe2lmKHRoaXMub3B0aW9ucy5ldmFsUmVzcG9uc2V8fCgvKGVjbWF8amF2YSlzY3JpcHQvKS50ZXN0KHRoaXMuZ2V0SGVhZGVyKCJDb250ZW50LXR5cGUiKSkpe3JldHVybiBCcm93c2VyLmV4ZWMoZSk7Cn1yZXR1cm4gZS5zdHJpcFNjcmlwdHModGhpcy5vcHRpb25zLmV2YWxTY3JpcHRzKTt9LHN1Y2Nlc3M6ZnVuY3Rpb24oZixlKXt0aGlzLm9uU3VjY2Vzcyh0aGlzLnByb2Nlc3NTY3JpcHRzKGYpLGUpO30sb25TdWNjZXNzOmZ1bmN0aW9uKCl7dGhpcy5maXJlRXZlbnQoImNvbXBsZXRlIixhcmd1bWVudHMpLmZpcmVFdmVudCgic3VjY2VzcyIsYXJndW1lbnRzKS5jYWxsQ2hhaW4oKTsKfSxmYWlsdXJlOmZ1bmN0aW9uKCl7dGhpcy5vbkZhaWx1cmUoKTt9LG9uRmFpbHVyZTpmdW5jdGlvbigpe3RoaXMuZmlyZUV2ZW50KCJjb21wbGV0ZSIpLmZpcmVFdmVudCgiZmFpbHVyZSIsdGhpcy54aHIpO30sbG9hZHN0YXJ0OmZ1bmN0aW9uKGUpe3RoaXMuZmlyZUV2ZW50KCJsb2Fkc3RhcnQiLFtlLHRoaXMueGhyXSk7Cn0scHJvZ3Jlc3M6ZnVuY3Rpb24oZSl7dGhpcy5maXJlRXZlbnQoInByb2dyZXNzIixbZSx0aGlzLnhocl0pO30sdGltZW91dDpmdW5jdGlvbigpe3RoaXMuZmlyZUV2ZW50KCJ0aW1lb3V0Iix0aGlzLnhocik7fSxzZXRIZWFkZXI6ZnVuY3Rpb24oZSxmKXt0aGlzLmhlYWRlcnNbZV09ZjsKcmV0dXJuIHRoaXM7fSxnZXRIZWFkZXI6ZnVuY3Rpb24oZSl7cmV0dXJuIEZ1bmN0aW9uLmF0dGVtcHQoZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy54aHIuZ2V0UmVzcG9uc2VIZWFkZXIoZSk7fS5iaW5kKHRoaXMpKTt9LGNoZWNrOmZ1bmN0aW9uKCl7aWYoIXRoaXMucnVubmluZyl7cmV0dXJuIHRydWU7Cn1zd2l0Y2godGhpcy5vcHRpb25zLmxpbmspe2Nhc2UiY2FuY2VsIjp0aGlzLmNhbmNlbCgpO3JldHVybiB0cnVlO2Nhc2UiY2hhaW4iOnRoaXMuY2hhaW4odGhpcy5jYWxsZXIucGFzcyhhcmd1bWVudHMsdGhpcykpO3JldHVybiBmYWxzZTt9cmV0dXJuIGZhbHNlO30sc2VuZDpmdW5jdGlvbihvKXtpZighdGhpcy5jaGVjayhvKSl7cmV0dXJuIHRoaXM7Cn10aGlzLm9wdGlvbnMuaXNTdWNjZXNzPXRoaXMub3B0aW9ucy5pc1N1Y2Nlc3N8fHRoaXMuaXNTdWNjZXNzO3RoaXMucnVubmluZz10cnVlO3ZhciBsPXR5cGVPZihvKTtpZihsPT0ic3RyaW5nInx8bD09ImVsZW1lbnQiKXtvPXtkYXRhOm99O312YXIgaD10aGlzLm9wdGlvbnM7Cm89T2JqZWN0LmFwcGVuZCh7ZGF0YTpoLmRhdGEsdXJsOmgudXJsLG1ldGhvZDpoLm1ldGhvZH0sbyk7dmFyIGo9by5kYXRhLGY9U3RyaW5nKG8udXJsKSxlPW8ubWV0aG9kLnRvTG93ZXJDYXNlKCk7c3dpdGNoKHR5cGVPZihqKSl7Y2FzZSJlbGVtZW50IjpqPWRvY3VtZW50LmlkKGopLnRvUXVlcnlTdHJpbmcoKTsKYnJlYWs7Y2FzZSJvYmplY3QiOmNhc2UiaGFzaCI6aj1PYmplY3QudG9RdWVyeVN0cmluZyhqKTt9aWYodGhpcy5vcHRpb25zLmZvcm1hdCl7dmFyIG09ImZvcm1hdD0iK3RoaXMub3B0aW9ucy5mb3JtYXQ7aj0oaik/bSsiJiIrajptO31pZih0aGlzLm9wdGlvbnMuZW11bGF0aW9uJiYhWyJnZXQiLCJwb3N0Il0uY29udGFpbnMoZSkpe3ZhciBrPSJfbWV0aG9kPSIrZTsKaj0oaik/aysiJiIrajprO2U9InBvc3QiO31pZih0aGlzLm9wdGlvbnMudXJsRW5jb2RlZCYmWyJwb3N0IiwicHV0Il0uY29udGFpbnMoZSkpe3ZhciBnPSh0aGlzLm9wdGlvbnMuZW5jb2RpbmcpPyI7IGNoYXJzZXQ9Iit0aGlzLm9wdGlvbnMuZW5jb2Rpbmc6IiI7dGhpcy5oZWFkZXJzWyJDb250ZW50LXR5cGUiXT0iYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIitnOwp9aWYoIWYpe2Y9ZG9jdW1lbnQubG9jYXRpb24ucGF0aG5hbWU7fXZhciBpPWYubGFzdEluZGV4T2YoIi8iKTtpZihpPi0xJiYoaT1mLmluZGV4T2YoIiMiKSk+LTEpe2Y9Zi5zdWJzdHIoMCxpKTt9aWYodGhpcy5vcHRpb25zLm5vQ2FjaGUpe2YrPShmLmNvbnRhaW5zKCI/Iik/IiYiOiI/IikrU3RyaW5nLnVuaXF1ZUlEKCk7Cn1pZihqJiZlPT0iZ2V0Iil7Zis9KGYuY29udGFpbnMoIj8iKT8iJiI6Ij8iKStqO2o9bnVsbDt9dmFyIG49dGhpcy54aHI7aWYoYSl7bi5vbmxvYWRzdGFydD10aGlzLmxvYWRzdGFydC5iaW5kKHRoaXMpO24ub25wcm9ncmVzcz10aGlzLnByb2dyZXNzLmJpbmQodGhpcyk7Cn1uLm9wZW4oZS50b1VwcGVyQ2FzZSgpLGYsdGhpcy5vcHRpb25zLmFzeW5jLHRoaXMub3B0aW9ucy51c2VyLHRoaXMub3B0aW9ucy5wYXNzd29yZCk7aWYodGhpcy5vcHRpb25zLnVzZXImJiJ3aXRoQ3JlZGVudGlhbHMiIGluIG4pe24ud2l0aENyZWRlbnRpYWxzPXRydWU7Cn1uLm9ucmVhZHlzdGF0ZWNoYW5nZT10aGlzLm9uU3RhdGVDaGFuZ2UuYmluZCh0aGlzKTtPYmplY3QuZWFjaCh0aGlzLmhlYWRlcnMsZnVuY3Rpb24ocSxwKXt0cnl7bi5zZXRSZXF1ZXN0SGVhZGVyKHAscSk7fWNhdGNoKHIpe3RoaXMuZmlyZUV2ZW50KCJleGNlcHRpb24iLFtwLHFdKTsKfX0sdGhpcyk7dGhpcy5maXJlRXZlbnQoInJlcXVlc3QiKTtuLnNlbmQoaik7aWYoIXRoaXMub3B0aW9ucy5hc3luYyl7dGhpcy5vblN0YXRlQ2hhbmdlKCk7fWlmKHRoaXMub3B0aW9ucy50aW1lb3V0KXt0aGlzLnRpbWVyPXRoaXMudGltZW91dC5kZWxheSh0aGlzLm9wdGlvbnMudGltZW91dCx0aGlzKTsKfXJldHVybiB0aGlzO30sY2FuY2VsOmZ1bmN0aW9uKCl7aWYoIXRoaXMucnVubmluZyl7cmV0dXJuIHRoaXM7fXRoaXMucnVubmluZz1mYWxzZTt2YXIgZT10aGlzLnhocjtlLmFib3J0KCk7Y2xlYXJUaW1lb3V0KHRoaXMudGltZXIpO2Uub25yZWFkeXN0YXRlY2hhbmdlPWQ7CmlmKGEpe2Uub25wcm9ncmVzcz1lLm9ubG9hZHN0YXJ0PWQ7fXRoaXMueGhyPW5ldyBCcm93c2VyLlJlcXVlc3QoKTt0aGlzLmZpcmVFdmVudCgiY2FuY2VsIik7cmV0dXJuIHRoaXM7fX0pO3ZhciBiPXt9O1siZ2V0IiwicG9zdCIsInB1dCIsImRlbGV0ZSIsIkdFVCIsIlBPU1QiLCJQVVQiLCJERUxFVEUiXS5lYWNoKGZ1bmN0aW9uKGUpe2JbZV09ZnVuY3Rpb24oZyl7dmFyIGY9e21ldGhvZDplfTsKaWYoZyE9bnVsbCl7Zi5kYXRhPWc7fXJldHVybiB0aGlzLnNlbmQoZik7fTt9KTtjLmltcGxlbWVudChiKTtFbGVtZW50LlByb3BlcnRpZXMuc2VuZD17c2V0OmZ1bmN0aW9uKGUpe3ZhciBmPXRoaXMuZ2V0KCJzZW5kIikuY2FuY2VsKCk7Zi5zZXRPcHRpb25zKGUpOwpyZXR1cm4gdGhpczt9LGdldDpmdW5jdGlvbigpe3ZhciBlPXRoaXMucmV0cmlldmUoInNlbmQiKTtpZighZSl7ZT1uZXcgYyh7ZGF0YTp0aGlzLGxpbms6ImNhbmNlbCIsbWV0aG9kOnRoaXMuZ2V0KCJtZXRob2QiKXx8InBvc3QiLHVybDp0aGlzLmdldCgiYWN0aW9uIil9KTsKdGhpcy5zdG9yZSgic2VuZCIsZSk7fXJldHVybiBlO319O0VsZW1lbnQuaW1wbGVtZW50KHtzZW5kOmZ1bmN0aW9uKGUpe3ZhciBmPXRoaXMuZ2V0KCJzZW5kIik7Zi5zZW5kKHtkYXRhOnRoaXMsdXJsOmV8fGYub3B0aW9ucy51cmx9KTtyZXR1cm4gdGhpczt9fSk7fSkoKTsKUmVxdWVzdC5IVE1MPW5ldyBDbGFzcyh7RXh0ZW5kczpSZXF1ZXN0LG9wdGlvbnM6e3VwZGF0ZTpmYWxzZSxhcHBlbmQ6ZmFsc2UsZXZhbFNjcmlwdHM6dHJ1ZSxmaWx0ZXI6ZmFsc2UsaGVhZGVyczp7QWNjZXB0OiJ0ZXh0L2h0bWwsIGFwcGxpY2F0aW9uL3htbCwgdGV4dC94bWwsICovKiJ9fSxzdWNjZXNzOmZ1bmN0aW9uKGUpe3ZhciBkPXRoaXMub3B0aW9ucyxiPXRoaXMucmVzcG9uc2U7CmIuaHRtbD1lLnN0cmlwU2NyaXB0cyhmdW5jdGlvbihmKXtiLmphdmFzY3JpcHQ9Zjt9KTt2YXIgYz1iLmh0bWwubWF0Y2goLzxib2R5W14+XSo+KFtcc1xTXSo/KTxcL2JvZHk+L2kpO2lmKGMpe2IuaHRtbD1jWzFdO312YXIgYT1uZXcgRWxlbWVudCgiZGl2Iikuc2V0KCJodG1sIixiLmh0bWwpOwpiLnRyZWU9YS5jaGlsZE5vZGVzO2IuZWxlbWVudHM9YS5nZXRFbGVtZW50cygiKiIpO2lmKGQuZmlsdGVyKXtiLnRyZWU9Yi5lbGVtZW50cy5maWx0ZXIoZC5maWx0ZXIpO31pZihkLnVwZGF0ZSl7ZG9jdW1lbnQuaWQoZC51cGRhdGUpLmVtcHR5KCkuc2V0KCJodG1sIixiLmh0bWwpOwp9ZWxzZXtpZihkLmFwcGVuZCl7ZG9jdW1lbnQuaWQoZC5hcHBlbmQpLmFkb3B0KGEuZ2V0Q2hpbGRyZW4oKSk7fX1pZihkLmV2YWxTY3JpcHRzKXtCcm93c2VyLmV4ZWMoYi5qYXZhc2NyaXB0KTt9dGhpcy5vblN1Y2Nlc3MoYi50cmVlLGIuZWxlbWVudHMsYi5odG1sLGIuamF2YXNjcmlwdCk7Cn19KTtFbGVtZW50LlByb3BlcnRpZXMubG9hZD17c2V0OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZ2V0KCJsb2FkIikuY2FuY2VsKCk7Yi5zZXRPcHRpb25zKGEpO3JldHVybiB0aGlzO30sZ2V0OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5yZXRyaWV2ZSgibG9hZCIpO2lmKCFhKXthPW5ldyBSZXF1ZXN0LkhUTUwoe2RhdGE6dGhpcyxsaW5rOiJjYW5jZWwiLHVwZGF0ZTp0aGlzLG1ldGhvZDoiZ2V0In0pOwp0aGlzLnN0b3JlKCJsb2FkIixhKTt9cmV0dXJuIGE7fX07RWxlbWVudC5pbXBsZW1lbnQoe2xvYWQ6ZnVuY3Rpb24oKXt0aGlzLmdldCgibG9hZCIpLnNlbmQoQXJyYXkubGluayhhcmd1bWVudHMse2RhdGE6VHlwZS5pc09iamVjdCx1cmw6VHlwZS5pc1N0cmluZ30pKTsKcmV0dXJuIHRoaXM7fX0pO2lmKHR5cGVvZiBKU09OPT0idW5kZWZpbmVkIil7dGhpcy5KU09OPXt9O31KU09OPW5ldyBIYXNoKHtzdHJpbmdpZnk6SlNPTi5zdHJpbmdpZnkscGFyc2U6SlNPTi5wYXJzZX0pOyhmdW5jdGlvbigpe3ZhciBzcGVjaWFsPXsiXGIiOiJcXGIiLCJcdCI6IlxcdCIsIlxuIjoiXFxuIiwiXGYiOiJcXGYiLCJcciI6IlxcciIsJyInOidcXCInLCJcXCI6IlxcXFwifTsKdmFyIGVzY2FwZT1mdW5jdGlvbihjaHIpe3JldHVybiBzcGVjaWFsW2Nocl18fCJcXHUiKygiMDAwMCIrY2hyLmNoYXJDb2RlQXQoMCkudG9TdHJpbmcoMTYpKS5zbGljZSgtNCk7fTtKU09OLnZhbGlkYXRlPWZ1bmN0aW9uKHN0cmluZyl7c3RyaW5nPXN0cmluZy5yZXBsYWNlKC9cXCg/OlsiXFxcL2JmbnJ0XXx1WzAtOWEtZkEtRl17NH0pL2csIkAiKS5yZXBsYWNlKC8iW14iXFxcblxyXSoifHRydWV8ZmFsc2V8bnVsbHwtP1xkKyg/OlwuXGQqKT8oPzpbZUVdWytcLV0/XGQrKT8vZywiXSIpLnJlcGxhY2UoLyg/Ol58OnwsKSg/OlxzKlxbKSsvZywiIik7CnJldHVybigvXltcXSw6e31cc10qJC8pLnRlc3Qoc3RyaW5nKTt9O0pTT04uZW5jb2RlPUpTT04uc3RyaW5naWZ5P2Z1bmN0aW9uKG9iail7cmV0dXJuIEpTT04uc3RyaW5naWZ5KG9iaik7fTpmdW5jdGlvbihvYmope2lmKG9iaiYmb2JqLnRvSlNPTil7b2JqPW9iai50b0pTT04oKTsKfXN3aXRjaCh0eXBlT2Yob2JqKSl7Y2FzZSJzdHJpbmciOnJldHVybiciJytvYmoucmVwbGFjZSgvW1x4MDAtXHgxZlxcIl0vZyxlc2NhcGUpKyciJztjYXNlImFycmF5IjpyZXR1cm4iWyIrb2JqLm1hcChKU09OLmVuY29kZSkuY2xlYW4oKSsiXSI7Y2FzZSJvYmplY3QiOmNhc2UiaGFzaCI6dmFyIHN0cmluZz1bXTsKT2JqZWN0LmVhY2gob2JqLGZ1bmN0aW9uKHZhbHVlLGtleSl7dmFyIGpzb249SlNPTi5lbmNvZGUodmFsdWUpO2lmKGpzb24pe3N0cmluZy5wdXNoKEpTT04uZW5jb2RlKGtleSkrIjoiK2pzb24pO319KTtyZXR1cm4ieyIrc3RyaW5nKyJ9IjtjYXNlIm51bWJlciI6Y2FzZSJib29sZWFuIjpyZXR1cm4iIitvYmo7CmNhc2UibnVsbCI6cmV0dXJuIm51bGwiO31yZXR1cm4gbnVsbDt9O0pTT04uZGVjb2RlPWZ1bmN0aW9uKHN0cmluZyxzZWN1cmUpe2lmKCFzdHJpbmd8fHR5cGVPZihzdHJpbmcpIT0ic3RyaW5nIil7cmV0dXJuIG51bGw7fWlmKHNlY3VyZXx8SlNPTi5zZWN1cmUpe2lmKEpTT04ucGFyc2Upe3JldHVybiBKU09OLnBhcnNlKHN0cmluZyk7Cn1pZighSlNPTi52YWxpZGF0ZShzdHJpbmcpKXt0aHJvdyBuZXcgRXJyb3IoIkpTT04gY291bGQgbm90IGRlY29kZSB0aGUgaW5wdXQ7IHNlY3VyaXR5IGlzIGVuYWJsZWQgYW5kIHRoZSB2YWx1ZSBpcyBub3Qgc2VjdXJlLiIpO319cmV0dXJuIGV2YWwoIigiK3N0cmluZysiKSIpOwp9O30pLmNhbGwodGhpcyk7UmVxdWVzdC5KU09OPW5ldyBDbGFzcyh7RXh0ZW5kczpSZXF1ZXN0LG9wdGlvbnM6e3NlY3VyZTp0cnVlfSxpbml0aWFsaXplOmZ1bmN0aW9uKGEpe3RoaXMucGFyZW50KGEpO09iamVjdC5hcHBlbmQodGhpcy5oZWFkZXJzLHtBY2NlcHQ6ImFwcGxpY2F0aW9uL2pzb24iLCJYLVJlcXVlc3QiOiJKU09OIn0pOwp9LHN1Y2Nlc3M6ZnVuY3Rpb24oYyl7dmFyIGI7dHJ5e2I9dGhpcy5yZXNwb25zZS5qc29uPUpTT04uZGVjb2RlKGMsdGhpcy5vcHRpb25zLnNlY3VyZSk7fWNhdGNoKGEpe3RoaXMuZmlyZUV2ZW50KCJlcnJvciIsW2MsYV0pO3JldHVybjt9aWYoYj09bnVsbCl7dGhpcy5vbkZhaWx1cmUoKTsKfWVsc2V7dGhpcy5vblN1Y2Nlc3MoYixjKTt9fX0pO3ZhciBDb29raWU9bmV3IENsYXNzKHtJbXBsZW1lbnRzOk9wdGlvbnMsb3B0aW9uczp7cGF0aDoiLyIsZG9tYWluOmZhbHNlLGR1cmF0aW9uOmZhbHNlLHNlY3VyZTpmYWxzZSxkb2N1bWVudDpkb2N1bWVudCxlbmNvZGU6dHJ1ZX0saW5pdGlhbGl6ZTpmdW5jdGlvbihiLGEpe3RoaXMua2V5PWI7CnRoaXMuc2V0T3B0aW9ucyhhKTt9LHdyaXRlOmZ1bmN0aW9uKGIpe2lmKHRoaXMub3B0aW9ucy5lbmNvZGUpe2I9ZW5jb2RlVVJJQ29tcG9uZW50KGIpO31pZih0aGlzLm9wdGlvbnMuZG9tYWluKXtiKz0iOyBkb21haW49Iit0aGlzLm9wdGlvbnMuZG9tYWluO31pZih0aGlzLm9wdGlvbnMucGF0aCl7Yis9IjsgcGF0aD0iK3RoaXMub3B0aW9ucy5wYXRoOwp9aWYodGhpcy5vcHRpb25zLmR1cmF0aW9uKXt2YXIgYT1uZXcgRGF0ZSgpO2Euc2V0VGltZShhLmdldFRpbWUoKSt0aGlzLm9wdGlvbnMuZHVyYXRpb24qMjQqNjAqNjAqMTAwMCk7Yis9IjsgZXhwaXJlcz0iK2EudG9HTVRTdHJpbmcoKTt9aWYodGhpcy5vcHRpb25zLnNlY3VyZSl7Yis9Ijsgc2VjdXJlIjsKfXRoaXMub3B0aW9ucy5kb2N1bWVudC5jb29raWU9dGhpcy5rZXkrIj0iK2I7cmV0dXJuIHRoaXM7fSxyZWFkOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5vcHRpb25zLmRvY3VtZW50LmNvb2tpZS5tYXRjaCgiKD86Xnw7KVxccyoiK3RoaXMua2V5LmVzY2FwZVJlZ0V4cCgpKyI9KFteO10qKSIpOwpyZXR1cm4oYSk/ZGVjb2RlVVJJQ29tcG9uZW50KGFbMV0pOm51bGw7fSxkaXNwb3NlOmZ1bmN0aW9uKCl7bmV3IENvb2tpZSh0aGlzLmtleSxPYmplY3QubWVyZ2Uoe30sdGhpcy5vcHRpb25zLHtkdXJhdGlvbjotMX0pKS53cml0ZSgiIik7cmV0dXJuIHRoaXM7fX0pOwpDb29raWUud3JpdGU9ZnVuY3Rpb24oYixjLGEpe3JldHVybiBuZXcgQ29va2llKGIsYSkud3JpdGUoYyk7fTtDb29raWUucmVhZD1mdW5jdGlvbihhKXtyZXR1cm4gbmV3IENvb2tpZShhKS5yZWFkKCk7fTtDb29raWUuZGlzcG9zZT1mdW5jdGlvbihiLGEpe3JldHVybiBuZXcgQ29va2llKGIsYSkuZGlzcG9zZSgpOwp9OyhmdW5jdGlvbihqLGwpe3ZhciBtLGcsZj1bXSxjLGIsbj10cnVlO3RyeXtuPWouZnJhbWVFbGVtZW50IT1udWxsO31jYXRjaChpKXt9dmFyIGg9ZnVuY3Rpb24oKXtjbGVhclRpbWVvdXQoYik7aWYobSl7cmV0dXJuO31Ccm93c2VyLmxvYWRlZD1tPXRydWU7bC5yZW1vdmVMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsaCkucmVtb3ZlTGlzdGVuZXIoInJlYWR5c3RhdGVjaGFuZ2UiLGEpOwpsLmZpcmVFdmVudCgiZG9tcmVhZHkiKTtqLmZpcmVFdmVudCgiZG9tcmVhZHkiKTt9O3ZhciBhPWZ1bmN0aW9uKCl7Zm9yKHZhciBlPWYubGVuZ3RoO2UtLTspe2lmKGZbZV0oKSl7aCgpO3JldHVybiB0cnVlO319cmV0dXJuIGZhbHNlO307dmFyIGs9ZnVuY3Rpb24oKXtjbGVhclRpbWVvdXQoYik7CmlmKCFhKCkpe2I9c2V0VGltZW91dChrLDEwKTt9fTtsLmFkZExpc3RlbmVyKCJET01Db250ZW50TG9hZGVkIixoKTt2YXIgZD1sLmNyZWF0ZUVsZW1lbnQoImRpdiIpO2lmKGQuZG9TY3JvbGwmJiFuKXtmLnB1c2goZnVuY3Rpb24oKXt0cnl7ZC5kb1Njcm9sbCgpO3JldHVybiB0cnVlOwp9Y2F0Y2gobyl7fXJldHVybiBmYWxzZTt9KTtjPXRydWU7fWlmKGwucmVhZHlTdGF0ZSl7Zi5wdXNoKGZ1bmN0aW9uKCl7dmFyIGU9bC5yZWFkeVN0YXRlO3JldHVybihlPT0ibG9hZGVkInx8ZT09ImNvbXBsZXRlIik7fSk7fWlmKCJvbnJlYWR5c3RhdGVjaGFuZ2UiIGluIGwpe2wuYWRkTGlzdGVuZXIoInJlYWR5c3RhdGVjaGFuZ2UiLGEpOwp9ZWxzZXtjPXRydWU7fWlmKGMpe2soKTt9RWxlbWVudC5FdmVudHMuZG9tcmVhZHk9e29uQWRkOmZ1bmN0aW9uKGUpe2lmKG0pe2UuY2FsbCh0aGlzKTt9fX07RWxlbWVudC5FdmVudHMubG9hZD17YmFzZToibG9hZCIsb25BZGQ6ZnVuY3Rpb24oZSl7aWYoZyYmdGhpcz09ail7ZS5jYWxsKHRoaXMpOwp9fSxjb25kaXRpb246ZnVuY3Rpb24oKXtpZih0aGlzPT1qKXtoKCk7ZGVsZXRlIEVsZW1lbnQuRXZlbnRzLmxvYWQ7fXJldHVybiB0cnVlO319O2ouYWRkRXZlbnQoImxvYWQiLGZ1bmN0aW9uKCl7Zz10cnVlO30pO30pKHdpbmRvdyxkb2N1bWVudCk7KGZ1bmN0aW9uKCl7dmFyIFN3aWZmPXRoaXMuU3dpZmY9bmV3IENsYXNzKHtJbXBsZW1lbnRzOk9wdGlvbnMsb3B0aW9uczp7aWQ6bnVsbCxoZWlnaHQ6MSx3aWR0aDoxLGNvbnRhaW5lcjpudWxsLHByb3BlcnRpZXM6e30scGFyYW1zOntxdWFsaXR5OiJoaWdoIixhbGxvd1NjcmlwdEFjY2VzczoiYWx3YXlzIix3TW9kZToid2luZG93Iixzd0xpdmVDb25uZWN0OnRydWV9LGNhbGxCYWNrczp7fSx2YXJzOnt9fSx0b0VsZW1lbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vYmplY3Q7Cn0saW5pdGlhbGl6ZTpmdW5jdGlvbihwYXRoLG9wdGlvbnMpe3RoaXMuaW5zdGFuY2U9IlN3aWZmXyIrU3RyaW5nLnVuaXF1ZUlEKCk7dGhpcy5zZXRPcHRpb25zKG9wdGlvbnMpO29wdGlvbnM9dGhpcy5vcHRpb25zO3ZhciBpZD10aGlzLmlkPW9wdGlvbnMuaWR8fHRoaXMuaW5zdGFuY2U7CnZhciBjb250YWluZXI9ZG9jdW1lbnQuaWQob3B0aW9ucy5jb250YWluZXIpO1N3aWZmLkNhbGxCYWNrc1t0aGlzLmluc3RhbmNlXT17fTt2YXIgcGFyYW1zPW9wdGlvbnMucGFyYW1zLHZhcnM9b3B0aW9ucy52YXJzLGNhbGxCYWNrcz1vcHRpb25zLmNhbGxCYWNrczsKdmFyIHByb3BlcnRpZXM9T2JqZWN0LmFwcGVuZCh7aGVpZ2h0Om9wdGlvbnMuaGVpZ2h0LHdpZHRoOm9wdGlvbnMud2lkdGh9LG9wdGlvbnMucHJvcGVydGllcyk7dmFyIHNlbGY9dGhpcztmb3IodmFyIGNhbGxCYWNrIGluIGNhbGxCYWNrcyl7U3dpZmYuQ2FsbEJhY2tzW3RoaXMuaW5zdGFuY2VdW2NhbGxCYWNrXT0oZnVuY3Rpb24ob3B0aW9uKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gb3B0aW9uLmFwcGx5KHNlbGYub2JqZWN0LGFyZ3VtZW50cyk7Cn07fSkoY2FsbEJhY2tzW2NhbGxCYWNrXSk7dmFyc1tjYWxsQmFja109IlN3aWZmLkNhbGxCYWNrcy4iK3RoaXMuaW5zdGFuY2UrIi4iK2NhbGxCYWNrO31wYXJhbXMuZmxhc2hWYXJzPU9iamVjdC50b1F1ZXJ5U3RyaW5nKHZhcnMpO2lmKEJyb3dzZXIuaWUpe3Byb3BlcnRpZXMuY2xhc3NpZD0iY2xzaWQ6RDI3Q0RCNkUtQUU2RC0xMWNmLTk2QjgtNDQ0NTUzNTQwMDAwIjsKcGFyYW1zLm1vdmllPXBhdGg7fWVsc2V7cHJvcGVydGllcy50eXBlPSJhcHBsaWNhdGlvbi94LXNob2Nrd2F2ZS1mbGFzaCI7fXByb3BlcnRpZXMuZGF0YT1wYXRoO3ZhciBidWlsZD0nPG9iamVjdCBpZD0iJytpZCsnIic7Zm9yKHZhciBwcm9wZXJ0eSBpbiBwcm9wZXJ0aWVzKXtidWlsZCs9IiAiK3Byb3BlcnR5Kyc9IicrcHJvcGVydGllc1twcm9wZXJ0eV0rJyInOwp9YnVpbGQrPSI+Ijtmb3IodmFyIHBhcmFtIGluIHBhcmFtcyl7aWYocGFyYW1zW3BhcmFtXSl7YnVpbGQrPSc8cGFyYW0gbmFtZT0iJytwYXJhbSsnIiB2YWx1ZT0iJytwYXJhbXNbcGFyYW1dKyciIC8+Jzt9fWJ1aWxkKz0iPC9vYmplY3Q+Ijt0aGlzLm9iamVjdD0oKGNvbnRhaW5lcik/Y29udGFpbmVyLmVtcHR5KCk6bmV3IEVsZW1lbnQoImRpdiIpKS5zZXQoImh0bWwiLGJ1aWxkKS5maXJzdENoaWxkOwp9LHJlcGxhY2VzOmZ1bmN0aW9uKGVsZW1lbnQpe2VsZW1lbnQ9ZG9jdW1lbnQuaWQoZWxlbWVudCx0cnVlKTtlbGVtZW50LnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKHRoaXMudG9FbGVtZW50KCksZWxlbWVudCk7cmV0dXJuIHRoaXM7fSxpbmplY3Q6ZnVuY3Rpb24oZWxlbWVudCl7ZG9jdW1lbnQuaWQoZWxlbWVudCx0cnVlKS5hcHBlbmRDaGlsZCh0aGlzLnRvRWxlbWVudCgpKTsKcmV0dXJuIHRoaXM7fSxyZW1vdGU6ZnVuY3Rpb24oKXtyZXR1cm4gU3dpZmYucmVtb3RlLmFwcGx5KFN3aWZmLFt0aGlzLnRvRWxlbWVudCgpXS5hcHBlbmQoYXJndW1lbnRzKSk7fX0pO1N3aWZmLkNhbGxCYWNrcz17fTtTd2lmZi5yZW1vdGU9ZnVuY3Rpb24ob2JqLGZuKXt2YXIgcnM9b2JqLkNhbGxGdW5jdGlvbignPGludm9rZSBuYW1lPSInK2ZuKyciIHJldHVybnR5cGU9ImphdmFzY3JpcHQiPicrX19mbGFzaF9fYXJndW1lbnRzVG9YTUwoYXJndW1lbnRzLDIpKyI8L2ludm9rZT4iKTsKcmV0dXJuIGV2YWwocnMpO307fSkuY2FsbCh0aGlzKTs=",
                "headers": {
                    "Accept-Ranges": "bytes",
                    "Last-Modified": "Sat, 08 Nov 2014 04:41:41 GMT",
                    "Content-Length": "88496",
                    "Date": "Sat, 08 Nov 2014 04:41:41 GMT",
                    "Content-Type": "application/javascript"
                },
                "cookies": [],
                "mimeType": "script",
                "host": "localhost",
                "protocol": "http",
                "port": 9999,
                "inScope": false,
                "toolFlag": 16962,
                "referenceID": 0,
                "messageType": "response"
            },
            "messageType": "requestResponse"
        }
    ],
    "inScope": true,
    "messageType": "scanIssue"
}