{
    "url": "http://localhost:9999/oieduardorabelo/sawpf/src/libs/mootools/1.3.2.js",
    "host": "localhost",
    "port": 9999,
    "protocol": "http",
    "name": "Open redirection (DOM-based)",
    "issueType": 5243152,
    "severity": "Low",
    "confidence": "Firm",
    "issueBackground": "DOM-based open redirection vulnerabilities arise when a client-side script within an application's response reads data from a controllable part of the DOM (for example, the URL), and writes this data into the target of a redirection in an unsafe way. An attacker may be able to use the vulnerability to construct a URL which, if visited by another application user, will cause a redirection to an arbitrary external domain. This behavior can be leveraged to facilitate phishing attacks against users of the application. The ability to use an authentic application URL, targeting the correct domain with a valid SSL certificate (if SSL is used) lends credibility to the phishing attack because many users, even if they verify these features, will not notice the subsequent redirection to a different domain.<br><br><b>Note:</b> If an attacker is able to control the start of the string that is passed to the redirection API, then it may be possible to escalate this vulnerability into a JavaScript injection attack, by using a URL with the javascript: pseudo-protocol to execute arbitrary script code when the URL is processed by the browser.",
    "remediationBackground": "Static analysis of code to identify vulnerabilities of this kind may lead to false positives that are not actually exploitable. You should review the highlighted code and related execution paths to determine whether the application is indeed vulnerable, or whether mitigations are in place that would prevent exploitation.<br><br>The most effective way to avoid DOM-based open redirection vulnerabilities is not to dynamically set redirection targets using data that originated from any untrusted source. If the desired functionality of the application means that this behavior is unavoidable, then defenses must be implemented within the client-side code to prevent malicious data from introducing an arbitrary URL as a redirection target. In general, this is best achieved by using a whitelist of URLs that are permitted redirection targets, and strictly validating the target against this list before performing the redirection.",
    "issueDetail": "The application may be vulnerable to DOM-based open redirection. Data is read from <b>document.location.pathname</b> and written to <b>the 'open()' function of an XMLHttpRequest object</b> via the following statements:<ul><li>f=document.location.pathname;</li><li>f=f.substr(0,i);</li><li>n.open(e.toUpperCase(),f,this.options.async,this.options.user,this.options.password);</li></ul>",
    "requestResponses": [
        {
            "request": {
                "host": "localhost",
                "port": 9999,
                "protocol": "http",
                "url": "http://localhost:9999/oieduardorabelo/sawpf/src/libs/mootools/1.3.2.js",
                "path": "/oieduardorabelo/sawpf/src/libs/mootools/1.3.2.js",
                "httpVersion": "HTTP/1.1",
                "method": "GET",
                "headers": {
                    "Host": "localhost:9999"
                },
                "body": "",
                "raw": "R0VUIC9vaWVkdWFyZG9yYWJlbG8vc2F3cGYvc3JjL2xpYnMvbW9vdG9vbHMvMS4zLjIuanMgSFRUUC8xLjENCkhvc3Q6IGxvY2FsaG9zdDo5OTk5DQoNCg==",
                "inScope": true,
                "toolFlag": 16962,
                "referenceID": 0,
                "messageType": "request"
            },
            "response": {
                "statusCode": 200,
                "raw": "SFRUUC8xLjEgMjAwIE9LDQpDb250ZW50LUxlbmd0aDogODI2MTkNCkFjY2VwdC1SYW5nZXM6IGJ5dGVzDQpDb250ZW50LVR5cGU6IGFwcGxpY2F0aW9uL2phdmFzY3JpcHQNCkRhdGU6IFNhdCwgMDggTm92IDIwMTQgMDM6NTU6NDEgR01UDQpMYXN0LU1vZGlmaWVkOiBTYXQsIDA4IE5vdiAyMDE0IDAzOjU1OjAwIEdNVA0KDQovKgotLS0KTW9vVG9vbHM6IHRoZSBqYXZhc2NyaXB0IGZyYW1ld29yawoKd2ViIGJ1aWxkOgogLSBodHRwOi8vbW9vdG9vbHMubmV0L2NvcmUvN2M1NmNmZWY5ZGRkY2YxNzBhNWQ2OGUzZmI2MWNmZDcKCnBhY2thZ2VyIGJ1aWxkOgogLSBwYWNrYWdlciBidWlsZCBDb3JlL0NvcmUgQ29yZS9BcnJheSBDb3JlL1N0cmluZyBDb3JlL051bWJlciBDb3JlL0Z1bmN0aW9uIENvcmUvT2JqZWN0IENvcmUvRXZlbnQgQ29yZS9Ccm93c2VyIENvcmUvQ2xhc3MgQ29yZS9DbGFzcy5FeHRyYXMgQ29yZS9TbGljay5QYXJzZXIgQ29yZS9TbGljay5GaW5kZXIgQ29yZS9FbGVtZW50IENvcmUvRWxlbWVudC5TdHlsZSBDb3JlL0VsZW1lbnQuRXZlbnQgQ29yZS9FbGVtZW50LkRpbWVuc2lvbnMgQ29yZS9GeCBDb3JlL0Z4LkNTUyBDb3JlL0Z4LlR3ZWVuIENvcmUvRnguTW9ycGggQ29yZS9GeC5UcmFuc2l0aW9ucyBDb3JlL1JlcXVlc3QgQ29yZS9SZXF1ZXN0LkhUTUwgQ29yZS9SZXF1ZXN0LkpTT04gQ29yZS9Db29raWUgQ29yZS9KU09OIENvcmUvRE9NUmVhZHkgQ29yZS9Td2lmZgoKY29weXJpZ2h0czoKICAtIFtNb29Ub29sc10oaHR0cDovL21vb3Rvb2xzLm5ldCkKCmxpY2Vuc2VzOgogIC0gW01JVCBMaWNlbnNlXShodHRwOi8vbW9vdG9vbHMubmV0L2xpY2Vuc2UudHh0KQouLi4KKi8KKGZ1bmN0aW9uKCl7dGhpcy5Nb29Ub29scz17dmVyc2lvbjoiMS4zLjIiLGJ1aWxkOiJjOWYxZmYxMGU5ZTdmYWNiNjVlOTQ4MTA0OWVkMWI0NTA5NTlkNTg3In07dmFyIG89dGhpcy50eXBlT2Y9ZnVuY3Rpb24oaSl7aWYoaT09bnVsbCl7cmV0dXJuIm51bGwiO31pZihpLiRmYW1pbHkpe3JldHVybiBpLiRmYW1pbHkoKTsKfWlmKGkubm9kZU5hbWUpe2lmKGkubm9kZVR5cGU9PTEpe3JldHVybiJlbGVtZW50Ijt9aWYoaS5ub2RlVHlwZT09Myl7cmV0dXJuKC9cUy8pLnRlc3QoaS5ub2RlVmFsdWUpPyJ0ZXh0bm9kZSI6IndoaXRlc3BhY2UiO319ZWxzZXtpZih0eXBlb2YgaS5sZW5ndGg9PSJudW1iZXIiKXtpZihpLmNhbGxlZSl7cmV0dXJuImFyZ3VtZW50cyI7Cn1pZigiaXRlbSIgaW4gaSl7cmV0dXJuImNvbGxlY3Rpb24iO319fXJldHVybiB0eXBlb2YgaTt9O3ZhciBqPXRoaXMuaW5zdGFuY2VPZj1mdW5jdGlvbih0LGkpe2lmKHQ9PW51bGwpe3JldHVybiBmYWxzZTt9dmFyIHM9dC4kY29uc3RydWN0b3J8fHQuY29uc3RydWN0b3I7CndoaWxlKHMpe2lmKHM9PT1pKXtyZXR1cm4gdHJ1ZTt9cz1zLnBhcmVudDt9cmV0dXJuIHQgaW5zdGFuY2VvZiBpO307dmFyIGY9dGhpcy5GdW5jdGlvbjt2YXIgcD10cnVlO2Zvcih2YXIgayBpbiB7dG9TdHJpbmc6MX0pe3A9bnVsbDt9aWYocCl7cD1bImhhc093blByb3BlcnR5IiwidmFsdWVPZiIsImlzUHJvdG90eXBlT2YiLCJwcm9wZXJ0eUlzRW51bWVyYWJsZSIsInRvTG9jYWxlU3RyaW5nIiwidG9TdHJpbmciLCJjb25zdHJ1Y3RvciJdOwp9Zi5wcm90b3R5cGUub3ZlcmxvYWRTZXR0ZXI9ZnVuY3Rpb24ocyl7dmFyIGk9dGhpcztyZXR1cm4gZnVuY3Rpb24odSx0KXtpZih1PT1udWxsKXtyZXR1cm4gdGhpczt9aWYoc3x8dHlwZW9mIHUhPSJzdHJpbmciKXtmb3IodmFyIHYgaW4gdSl7aS5jYWxsKHRoaXMsdix1W3ZdKTsKfWlmKHApe2Zvcih2YXIgdz1wLmxlbmd0aDt3LS07KXt2PXBbd107aWYodS5oYXNPd25Qcm9wZXJ0eSh2KSl7aS5jYWxsKHRoaXMsdix1W3ZdKTt9fX19ZWxzZXtpLmNhbGwodGhpcyx1LHQpO31yZXR1cm4gdGhpczt9O307Zi5wcm90b3R5cGUub3ZlcmxvYWRHZXR0ZXI9ZnVuY3Rpb24ocyl7dmFyIGk9dGhpczsKcmV0dXJuIGZ1bmN0aW9uKHUpe3ZhciB2LHQ7aWYoc3x8dHlwZW9mIHUhPSJzdHJpbmciKXt2PXU7fWVsc2V7aWYoYXJndW1lbnRzLmxlbmd0aD4xKXt2PWFyZ3VtZW50czt9fWlmKHYpe3Q9e307Zm9yKHZhciB3PTA7dzx2Lmxlbmd0aDt3Kyspe3Rbdlt3XV09aS5jYWxsKHRoaXMsdlt3XSk7Cn19ZWxzZXt0PWkuY2FsbCh0aGlzLHUpO31yZXR1cm4gdDt9O307Zi5wcm90b3R5cGUuZXh0ZW5kPWZ1bmN0aW9uKGkscyl7dGhpc1tpXT1zO30ub3ZlcmxvYWRTZXR0ZXIoKTtmLnByb3RvdHlwZS5pbXBsZW1lbnQ9ZnVuY3Rpb24oaSxzKXt0aGlzLnByb3RvdHlwZVtpXT1zOwp9Lm92ZXJsb2FkU2V0dGVyKCk7dmFyIG49QXJyYXkucHJvdG90eXBlLnNsaWNlO2YuZnJvbT1mdW5jdGlvbihpKXtyZXR1cm4obyhpKT09ImZ1bmN0aW9uIik/aTpmdW5jdGlvbigpe3JldHVybiBpO307fTtBcnJheS5mcm9tPWZ1bmN0aW9uKGkpe2lmKGk9PW51bGwpe3JldHVybltdOwp9cmV0dXJuKGEuaXNFbnVtZXJhYmxlKGkpJiZ0eXBlb2YgaSE9InN0cmluZyIpPyhvKGkpPT0iYXJyYXkiKT9pOm4uY2FsbChpKTpbaV07fTtOdW1iZXIuZnJvbT1mdW5jdGlvbihzKXt2YXIgaT1wYXJzZUZsb2F0KHMpO3JldHVybiBpc0Zpbml0ZShpKT9pOm51bGw7Cn07U3RyaW5nLmZyb209ZnVuY3Rpb24oaSl7cmV0dXJuIGkrIiI7fTtmLmltcGxlbWVudCh7aGlkZTpmdW5jdGlvbigpe3RoaXMuJGhpZGRlbj10cnVlO3JldHVybiB0aGlzO30scHJvdGVjdDpmdW5jdGlvbigpe3RoaXMuJHByb3RlY3RlZD10cnVlO3JldHVybiB0aGlzOwp9fSk7dmFyIGE9dGhpcy5UeXBlPWZ1bmN0aW9uKHUsdCl7aWYodSl7dmFyIHM9dS50b0xvd2VyQ2FzZSgpO3ZhciBpPWZ1bmN0aW9uKHYpe3JldHVybihvKHYpPT1zKTt9O2FbImlzIit1XT1pO2lmKHQhPW51bGwpe3QucHJvdG90eXBlLiRmYW1pbHk9KGZ1bmN0aW9uKCl7cmV0dXJuIHM7Cn0pLmhpZGUoKTt9fWlmKHQ9PW51bGwpe3JldHVybiBudWxsO310LmV4dGVuZCh0aGlzKTt0LiRjb25zdHJ1Y3Rvcj1hO3QucHJvdG90eXBlLiRjb25zdHJ1Y3Rvcj10O3JldHVybiB0O307dmFyIGU9T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZzthLmlzRW51bWVyYWJsZT1mdW5jdGlvbihpKXtyZXR1cm4oaSE9bnVsbCYmdHlwZW9mIGkubGVuZ3RoPT0ibnVtYmVyIiYmZS5jYWxsKGkpIT0iW29iamVjdCBGdW5jdGlvbl0iKTsKfTt2YXIgcT17fTt2YXIgcj1mdW5jdGlvbihpKXt2YXIgcz1vKGkucHJvdG90eXBlKTtyZXR1cm4gcVtzXXx8KHFbc109W10pO307dmFyIGI9ZnVuY3Rpb24odCx4KXtpZih4JiZ4LiRoaWRkZW4pe3JldHVybjt9dmFyIHM9cih0aGlzKTtmb3IodmFyIHU9MDt1PHMubGVuZ3RoOwp1Kyspe3ZhciB3PXNbdV07aWYobyh3KT09InR5cGUiKXtiLmNhbGwodyx0LHgpO31lbHNle3cuY2FsbCh0aGlzLHQseCk7fX12YXIgdj10aGlzLnByb3RvdHlwZVt0XTtpZih2PT1udWxsfHwhdi4kcHJvdGVjdGVkKXt0aGlzLnByb3RvdHlwZVt0XT14O31pZih0aGlzW3RdPT1udWxsJiZvKHgpPT0iZnVuY3Rpb24iKXttLmNhbGwodGhpcyx0LGZ1bmN0aW9uKGkpe3JldHVybiB4LmFwcGx5KGksbi5jYWxsKGFyZ3VtZW50cywxKSk7Cn0pO319O3ZhciBtPWZ1bmN0aW9uKGksdCl7aWYodCYmdC4kaGlkZGVuKXtyZXR1cm47fXZhciBzPXRoaXNbaV07aWYocz09bnVsbHx8IXMuJHByb3RlY3RlZCl7dGhpc1tpXT10O319O2EuaW1wbGVtZW50KHtpbXBsZW1lbnQ6Yi5vdmVybG9hZFNldHRlcigpLGV4dGVuZDptLm92ZXJsb2FkU2V0dGVyKCksYWxpYXM6ZnVuY3Rpb24oaSxzKXtiLmNhbGwodGhpcyxpLHRoaXMucHJvdG90eXBlW3NdKTsKfS5vdmVybG9hZFNldHRlcigpLG1pcnJvcjpmdW5jdGlvbihpKXtyKHRoaXMpLnB1c2goaSk7cmV0dXJuIHRoaXM7fX0pO25ldyBhKCJUeXBlIixhKTt2YXIgZD1mdW5jdGlvbihzLHcsdSl7dmFyIHQ9KHchPU9iamVjdCksQT13LnByb3RvdHlwZTtpZih0KXt3PW5ldyBhKHMsdyk7Cn1mb3IodmFyIHg9MCx2PXUubGVuZ3RoO3g8djt4Kyspe3ZhciBCPXVbeF0sej13W0JdLHk9QVtCXTtpZih6KXt6LnByb3RlY3QoKTt9aWYodCYmeSl7ZGVsZXRlIEFbQl07QVtCXT15LnByb3RlY3QoKTt9fWlmKHQpe3cuaW1wbGVtZW50KEEpO31yZXR1cm4gZDt9O2QoIlN0cmluZyIsU3RyaW5nLFsiY2hhckF0IiwiY2hhckNvZGVBdCIsImNvbmNhdCIsImluZGV4T2YiLCJsYXN0SW5kZXhPZiIsIm1hdGNoIiwicXVvdGUiLCJyZXBsYWNlIiwic2VhcmNoIiwic2xpY2UiLCJzcGxpdCIsInN1YnN0ciIsInN1YnN0cmluZyIsInRvTG93ZXJDYXNlIiwidG9VcHBlckNhc2UiXSkoIkFycmF5IixBcnJheSxbInBvcCIsInB1c2giLCJyZXZlcnNlIiwic2hpZnQiLCJzb3J0Iiwic3BsaWNlIiwidW5zaGlmdCIsImNvbmNhdCIsImpvaW4iLCJzbGljZSIsImluZGV4T2YiLCJsYXN0SW5kZXhPZiIsImZpbHRlciIsImZvckVhY2giLCJldmVyeSIsIm1hcCIsInNvbWUiLCJyZWR1Y2UiLCJyZWR1Y2VSaWdodCJdKSgiTnVtYmVyIixOdW1iZXIsWyJ0b0V4cG9uZW50aWFsIiwidG9GaXhlZCIsInRvTG9jYWxlU3RyaW5nIiwidG9QcmVjaXNpb24iXSkoIkZ1bmN0aW9uIixmLFsiYXBwbHkiLCJjYWxsIiwiYmluZCJdKSgiUmVnRXhwIixSZWdFeHAsWyJleGVjIiwidGVzdCJdKSgiT2JqZWN0IixPYmplY3QsWyJjcmVhdGUiLCJkZWZpbmVQcm9wZXJ0eSIsImRlZmluZVByb3BlcnRpZXMiLCJrZXlzIiwiZ2V0UHJvdG90eXBlT2YiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJnZXRPd25Qcm9wZXJ0eU5hbWVzIiwicHJldmVudEV4dGVuc2lvbnMiLCJpc0V4dGVuc2libGUiLCJzZWFsIiwiaXNTZWFsZWQiLCJmcmVlemUiLCJpc0Zyb3plbiJdKSgiRGF0ZSIsRGF0ZSxbIm5vdyJdKTsKT2JqZWN0LmV4dGVuZD1tLm92ZXJsb2FkU2V0dGVyKCk7RGF0ZS5leHRlbmQoIm5vdyIsZnVuY3Rpb24oKXtyZXR1cm4gKyhuZXcgRGF0ZSk7fSk7bmV3IGEoIkJvb2xlYW4iLEJvb2xlYW4pO051bWJlci5wcm90b3R5cGUuJGZhbWlseT1mdW5jdGlvbigpe3JldHVybiBpc0Zpbml0ZSh0aGlzKT8ibnVtYmVyIjoibnVsbCI7Cn0uaGlkZSgpO051bWJlci5leHRlbmQoInJhbmRvbSIsZnVuY3Rpb24ocyxpKXtyZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKihpLXMrMSkrcyk7fSk7dmFyIGc9T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtPYmplY3QuZXh0ZW5kKCJmb3JFYWNoIixmdW5jdGlvbihpLHQsdSl7Zm9yKHZhciBzIGluIGkpe2lmKGcuY2FsbChpLHMpKXt0LmNhbGwodSxpW3NdLHMsaSk7Cn19fSk7T2JqZWN0LmVhY2g9T2JqZWN0LmZvckVhY2g7QXJyYXkuaW1wbGVtZW50KHtmb3JFYWNoOmZ1bmN0aW9uKHUsdil7Zm9yKHZhciB0PTAscz10aGlzLmxlbmd0aDt0PHM7dCsrKXtpZih0IGluIHRoaXMpe3UuY2FsbCh2LHRoaXNbdF0sdCx0aGlzKTt9fX0sZWFjaDpmdW5jdGlvbihpLHMpe0FycmF5LmZvckVhY2godGhpcyxpLHMpOwpyZXR1cm4gdGhpczt9fSk7dmFyIGw9ZnVuY3Rpb24oaSl7c3dpdGNoKG8oaSkpe2Nhc2UiYXJyYXkiOnJldHVybiBpLmNsb25lKCk7Y2FzZSJvYmplY3QiOnJldHVybiBPYmplY3QuY2xvbmUoaSk7ZGVmYXVsdDpyZXR1cm4gaTt9fTtBcnJheS5pbXBsZW1lbnQoImNsb25lIixmdW5jdGlvbigpe3ZhciBzPXRoaXMubGVuZ3RoLHQ9bmV3IEFycmF5KHMpOwp3aGlsZShzLS0pe3Rbc109bCh0aGlzW3NdKTt9cmV0dXJuIHQ7fSk7dmFyIGg9ZnVuY3Rpb24ocyxpLHQpe3N3aXRjaChvKHQpKXtjYXNlIm9iamVjdCI6aWYobyhzW2ldKT09Im9iamVjdCIpe09iamVjdC5tZXJnZShzW2ldLHQpO31lbHNle3NbaV09T2JqZWN0LmNsb25lKHQpOwp9YnJlYWs7Y2FzZSJhcnJheSI6c1tpXT10LmNsb25lKCk7YnJlYWs7ZGVmYXVsdDpzW2ldPXQ7fXJldHVybiBzO307T2JqZWN0LmV4dGVuZCh7bWVyZ2U6ZnVuY3Rpb24oeix1LHQpe2lmKG8odSk9PSJzdHJpbmciKXtyZXR1cm4gaCh6LHUsdCk7fWZvcih2YXIgeT0xLHM9YXJndW1lbnRzLmxlbmd0aDsKeTxzO3krKyl7dmFyIHc9YXJndW1lbnRzW3ldO2Zvcih2YXIgeCBpbiB3KXtoKHoseCx3W3hdKTt9fXJldHVybiB6O30sY2xvbmU6ZnVuY3Rpb24oaSl7dmFyIHQ9e307Zm9yKHZhciBzIGluIGkpe3Rbc109bChpW3NdKTt9cmV0dXJuIHQ7fSxhcHBlbmQ6ZnVuY3Rpb24odyl7Zm9yKHZhciB2PTEsdD1hcmd1bWVudHMubGVuZ3RoOwp2PHQ7disrKXt2YXIgcz1hcmd1bWVudHNbdl18fHt9O2Zvcih2YXIgdSBpbiBzKXt3W3VdPXNbdV07fX1yZXR1cm4gdzt9fSk7WyJPYmplY3QiLCJXaGl0ZVNwYWNlIiwiVGV4dE5vZGUiLCJDb2xsZWN0aW9uIiwiQXJndW1lbnRzIl0uZWFjaChmdW5jdGlvbihpKXtuZXcgYShpKTsKfSk7dmFyIGM9RGF0ZS5ub3coKTtTdHJpbmcuZXh0ZW5kKCJ1bmlxdWVJRCIsZnVuY3Rpb24oKXtyZXR1cm4oYysrKS50b1N0cmluZygzNik7fSk7fSkoKTtBcnJheS5pbXBsZW1lbnQoe2V2ZXJ5OmZ1bmN0aW9uKGMsZCl7Zm9yKHZhciBiPTAsYT10aGlzLmxlbmd0aDsKYjxhO2IrKyl7aWYoKGIgaW4gdGhpcykmJiFjLmNhbGwoZCx0aGlzW2JdLGIsdGhpcykpe3JldHVybiBmYWxzZTt9fXJldHVybiB0cnVlO30sZmlsdGVyOmZ1bmN0aW9uKGQsZSl7dmFyIGM9W107Zm9yKHZhciBiPTAsYT10aGlzLmxlbmd0aDtiPGE7YisrKXtpZigoYiBpbiB0aGlzKSYmZC5jYWxsKGUsdGhpc1tiXSxiLHRoaXMpKXtjLnB1c2godGhpc1tiXSk7Cn19cmV0dXJuIGM7fSxpbmRleE9mOmZ1bmN0aW9uKGMsZCl7dmFyIGE9dGhpcy5sZW5ndGg7Zm9yKHZhciBiPShkPDApP01hdGgubWF4KDAsYStkKTpkfHwwO2I8YTtiKyspe2lmKHRoaXNbYl09PT1jKXtyZXR1cm4gYjt9fXJldHVybiAtMTt9LG1hcDpmdW5jdGlvbihkLGUpe3ZhciBjPVtdOwpmb3IodmFyIGI9MCxhPXRoaXMubGVuZ3RoO2I8YTtiKyspe2lmKGIgaW4gdGhpcyl7Y1tiXT1kLmNhbGwoZSx0aGlzW2JdLGIsdGhpcyk7fX1yZXR1cm4gYzt9LHNvbWU6ZnVuY3Rpb24oYyxkKXtmb3IodmFyIGI9MCxhPXRoaXMubGVuZ3RoO2I8YTtiKyspe2lmKChiIGluIHRoaXMpJiZjLmNhbGwoZCx0aGlzW2JdLGIsdGhpcykpe3JldHVybiB0cnVlOwp9fXJldHVybiBmYWxzZTt9LGNsZWFuOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZmlsdGVyKGZ1bmN0aW9uKGEpe3JldHVybiBhIT1udWxsO30pO30saW52b2tlOmZ1bmN0aW9uKGEpe3ZhciBiPUFycmF5LnNsaWNlKGFyZ3VtZW50cywxKTtyZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24oYyl7cmV0dXJuIGNbYV0uYXBwbHkoYyxiKTsKfSk7fSxhc3NvY2lhdGU6ZnVuY3Rpb24oYyl7dmFyIGQ9e30sYj1NYXRoLm1pbih0aGlzLmxlbmd0aCxjLmxlbmd0aCk7Zm9yKHZhciBhPTA7YTxiO2ErKyl7ZFtjW2FdXT10aGlzW2FdO31yZXR1cm4gZDt9LGxpbms6ZnVuY3Rpb24oYyl7dmFyIGE9e307Zm9yKHZhciBlPTAsYj10aGlzLmxlbmd0aDsKZTxiO2UrKyl7Zm9yKHZhciBkIGluIGMpe2lmKGNbZF0odGhpc1tlXSkpe2FbZF09dGhpc1tlXTtkZWxldGUgY1tkXTticmVhazt9fX1yZXR1cm4gYTt9LGNvbnRhaW5zOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuaW5kZXhPZihhLGIpIT0tMTt9LGFwcGVuZDpmdW5jdGlvbihhKXt0aGlzLnB1c2guYXBwbHkodGhpcyxhKTsKcmV0dXJuIHRoaXM7fSxnZXRMYXN0OmZ1bmN0aW9uKCl7cmV0dXJuKHRoaXMubGVuZ3RoKT90aGlzW3RoaXMubGVuZ3RoLTFdOm51bGw7fSxnZXRSYW5kb206ZnVuY3Rpb24oKXtyZXR1cm4odGhpcy5sZW5ndGgpP3RoaXNbTnVtYmVyLnJhbmRvbSgwLHRoaXMubGVuZ3RoLTEpXTpudWxsOwp9LGluY2x1ZGU6ZnVuY3Rpb24oYSl7aWYoIXRoaXMuY29udGFpbnMoYSkpe3RoaXMucHVzaChhKTt9cmV0dXJuIHRoaXM7fSxjb21iaW5lOmZ1bmN0aW9uKGMpe2Zvcih2YXIgYj0wLGE9Yy5sZW5ndGg7YjxhO2IrKyl7dGhpcy5pbmNsdWRlKGNbYl0pO31yZXR1cm4gdGhpczsKfSxlcmFzZTpmdW5jdGlvbihiKXtmb3IodmFyIGE9dGhpcy5sZW5ndGg7YS0tOyl7aWYodGhpc1thXT09PWIpe3RoaXMuc3BsaWNlKGEsMSk7fX1yZXR1cm4gdGhpczt9LGVtcHR5OmZ1bmN0aW9uKCl7dGhpcy5sZW5ndGg9MDtyZXR1cm4gdGhpczt9LGZsYXR0ZW46ZnVuY3Rpb24oKXt2YXIgZD1bXTsKZm9yKHZhciBiPTAsYT10aGlzLmxlbmd0aDtiPGE7YisrKXt2YXIgYz10eXBlT2YodGhpc1tiXSk7aWYoYz09Im51bGwiKXtjb250aW51ZTt9ZD1kLmNvbmNhdCgoYz09ImFycmF5Inx8Yz09ImNvbGxlY3Rpb24ifHxjPT0iYXJndW1lbnRzInx8aW5zdGFuY2VPZih0aGlzW2JdLEFycmF5KSk/QXJyYXkuZmxhdHRlbih0aGlzW2JdKTp0aGlzW2JdKTsKfXJldHVybiBkO30scGljazpmdW5jdGlvbigpe2Zvcih2YXIgYj0wLGE9dGhpcy5sZW5ndGg7YjxhO2IrKyl7aWYodGhpc1tiXSE9bnVsbCl7cmV0dXJuIHRoaXNbYl07fX1yZXR1cm4gbnVsbDt9LGhleFRvUmdiOmZ1bmN0aW9uKGIpe2lmKHRoaXMubGVuZ3RoIT0zKXtyZXR1cm4gbnVsbDsKfXZhciBhPXRoaXMubWFwKGZ1bmN0aW9uKGMpe2lmKGMubGVuZ3RoPT0xKXtjKz1jO31yZXR1cm4gYy50b0ludCgxNik7fSk7cmV0dXJuKGIpP2E6InJnYigiK2ErIikiO30scmdiVG9IZXg6ZnVuY3Rpb24oZCl7aWYodGhpcy5sZW5ndGg8Myl7cmV0dXJuIG51bGw7fWlmKHRoaXMubGVuZ3RoPT00JiZ0aGlzWzNdPT0wJiYhZCl7cmV0dXJuInRyYW5zcGFyZW50IjsKfXZhciBiPVtdO2Zvcih2YXIgYT0wO2E8MzthKyspe3ZhciBjPSh0aGlzW2FdLTApLnRvU3RyaW5nKDE2KTtiLnB1c2goKGMubGVuZ3RoPT0xKT8iMCIrYzpjKTt9cmV0dXJuKGQpP2I6IiMiK2Iuam9pbigiIik7fX0pO1N0cmluZy5pbXBsZW1lbnQoe3Rlc3Q6ZnVuY3Rpb24oYSxiKXtyZXR1cm4oKHR5cGVPZihhKT09InJlZ2V4cCIpP2E6bmV3IFJlZ0V4cCgiIithLGIpKS50ZXN0KHRoaXMpOwp9LGNvbnRhaW5zOmZ1bmN0aW9uKGEsYil7cmV0dXJuKGIpPyhiK3RoaXMrYikuaW5kZXhPZihiK2ErYik+LTE6dGhpcy5pbmRleE9mKGEpPi0xO30sdHJpbTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnJlcGxhY2UoL15ccyt8XHMrJC9nLCIiKTt9LGNsZWFuOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmVwbGFjZSgvXHMrL2csIiAiKS50cmltKCk7Cn0sY2FtZWxDYXNlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmVwbGFjZSgvLVxEL2csZnVuY3Rpb24oYSl7cmV0dXJuIGEuY2hhckF0KDEpLnRvVXBwZXJDYXNlKCk7fSk7fSxoeXBoZW5hdGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yZXBsYWNlKC9bQS1aXS9nLGZ1bmN0aW9uKGEpe3JldHVybigiLSIrYS5jaGFyQXQoMCkudG9Mb3dlckNhc2UoKSk7Cn0pO30sY2FwaXRhbGl6ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnJlcGxhY2UoL1xiW2Etel0vZyxmdW5jdGlvbihhKXtyZXR1cm4gYS50b1VwcGVyQ2FzZSgpO30pO30sZXNjYXBlUmVnRXhwOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmVwbGFjZSgvKFstLiorP14ke30oKXxbXF1cL1xcXSkvZywiXFwkMSIpOwp9LHRvSW50OmZ1bmN0aW9uKGEpe3JldHVybiBwYXJzZUludCh0aGlzLGF8fDEwKTt9LHRvRmxvYXQ6ZnVuY3Rpb24oKXtyZXR1cm4gcGFyc2VGbG9hdCh0aGlzKTt9LGhleFRvUmdiOmZ1bmN0aW9uKGIpe3ZhciBhPXRoaXMubWF0Y2goL14jPyhcd3sxLDJ9KShcd3sxLDJ9KShcd3sxLDJ9KSQvKTsKcmV0dXJuKGEpP2Euc2xpY2UoMSkuaGV4VG9SZ2IoYik6bnVsbDt9LHJnYlRvSGV4OmZ1bmN0aW9uKGIpe3ZhciBhPXRoaXMubWF0Y2goL1xkezEsM30vZyk7cmV0dXJuKGEpP2EucmdiVG9IZXgoYik6bnVsbDt9LHN1YnN0aXR1dGU6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5yZXBsYWNlKGJ8fCgvXFw/XHsoW157fV0rKVx9L2cpLGZ1bmN0aW9uKGQsYyl7aWYoZC5jaGFyQXQoMCk9PSJcXCIpe3JldHVybiBkLnNsaWNlKDEpOwp9cmV0dXJuKGFbY10hPW51bGwpP2FbY106IiI7fSk7fX0pO051bWJlci5pbXBsZW1lbnQoe2xpbWl0OmZ1bmN0aW9uKGIsYSl7cmV0dXJuIE1hdGgubWluKGEsTWF0aC5tYXgoYix0aGlzKSk7fSxyb3VuZDpmdW5jdGlvbihhKXthPU1hdGgucG93KDEwLGF8fDApLnRvRml4ZWQoYTwwPy1hOjApOwpyZXR1cm4gTWF0aC5yb3VuZCh0aGlzKmEpL2E7fSx0aW1lczpmdW5jdGlvbihiLGMpe2Zvcih2YXIgYT0wO2E8dGhpczthKyspe2IuY2FsbChjLGEsdGhpcyk7fX0sdG9GbG9hdDpmdW5jdGlvbigpe3JldHVybiBwYXJzZUZsb2F0KHRoaXMpO30sdG9JbnQ6ZnVuY3Rpb24oYSl7cmV0dXJuIHBhcnNlSW50KHRoaXMsYXx8MTApOwp9fSk7TnVtYmVyLmFsaWFzKCJlYWNoIiwidGltZXMiKTsoZnVuY3Rpb24oYil7dmFyIGE9e307Yi5lYWNoKGZ1bmN0aW9uKGMpe2lmKCFOdW1iZXJbY10pe2FbY109ZnVuY3Rpb24oKXtyZXR1cm4gTWF0aFtjXS5hcHBseShudWxsLFt0aGlzXS5jb25jYXQoQXJyYXkuZnJvbShhcmd1bWVudHMpKSk7Cn07fX0pO051bWJlci5pbXBsZW1lbnQoYSk7fSkoWyJhYnMiLCJhY29zIiwiYXNpbiIsImF0YW4iLCJhdGFuMiIsImNlaWwiLCJjb3MiLCJleHAiLCJmbG9vciIsImxvZyIsIm1heCIsIm1pbiIsInBvdyIsInNpbiIsInNxcnQiLCJ0YW4iXSk7RnVuY3Rpb24uZXh0ZW5kKHthdHRlbXB0OmZ1bmN0aW9uKCl7Zm9yKHZhciBiPTAsYT1hcmd1bWVudHMubGVuZ3RoOwpiPGE7YisrKXt0cnl7cmV0dXJuIGFyZ3VtZW50c1tiXSgpO31jYXRjaChjKXt9fXJldHVybiBudWxsO319KTtGdW5jdGlvbi5pbXBsZW1lbnQoe2F0dGVtcHQ6ZnVuY3Rpb24oYSxjKXt0cnl7cmV0dXJuIHRoaXMuYXBwbHkoYyxBcnJheS5mcm9tKGEpKTt9Y2F0Y2goYil7fXJldHVybiBudWxsOwp9LGJpbmQ6ZnVuY3Rpb24oYyl7dmFyIGE9dGhpcyxiPShhcmd1bWVudHMubGVuZ3RoPjEpP0FycmF5LnNsaWNlKGFyZ3VtZW50cywxKTpudWxsO3JldHVybiBmdW5jdGlvbigpe2lmKCFiJiYhYXJndW1lbnRzLmxlbmd0aCl7cmV0dXJuIGEuY2FsbChjKTt9aWYoYiYmYXJndW1lbnRzLmxlbmd0aCl7cmV0dXJuIGEuYXBwbHkoYyxiLmNvbmNhdChBcnJheS5mcm9tKGFyZ3VtZW50cykpKTsKfXJldHVybiBhLmFwcGx5KGMsYnx8YXJndW1lbnRzKTt9O30scGFzczpmdW5jdGlvbihiLGMpe3ZhciBhPXRoaXM7aWYoYiE9bnVsbCl7Yj1BcnJheS5mcm9tKGIpO31yZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gYS5hcHBseShjLGJ8fGFyZ3VtZW50cyk7fTt9LGRlbGF5OmZ1bmN0aW9uKGIsYyxhKXtyZXR1cm4gc2V0VGltZW91dCh0aGlzLnBhc3MoKGE9PW51bGw/W106YSksYyksYik7Cn0scGVyaW9kaWNhbDpmdW5jdGlvbihjLGIsYSl7cmV0dXJuIHNldEludGVydmFsKHRoaXMucGFzcygoYT09bnVsbD9bXTphKSxiKSxjKTt9fSk7KGZ1bmN0aW9uKCl7dmFyIGE9T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtPYmplY3QuZXh0ZW5kKHtzdWJzZXQ6ZnVuY3Rpb24oZCxnKXt2YXIgZj17fTsKZm9yKHZhciBlPTAsYj1nLmxlbmd0aDtlPGI7ZSsrKXt2YXIgYz1nW2VdO2lmKGMgaW4gZCl7ZltjXT1kW2NdO319cmV0dXJuIGY7fSxtYXA6ZnVuY3Rpb24oYixlLGYpe3ZhciBkPXt9O2Zvcih2YXIgYyBpbiBiKXtpZihhLmNhbGwoYixjKSl7ZFtjXT1lLmNhbGwoZixiW2NdLGMsYik7Cn19cmV0dXJuIGQ7fSxmaWx0ZXI6ZnVuY3Rpb24oYixlLGcpe3ZhciBkPXt9O2Zvcih2YXIgYyBpbiBiKXt2YXIgZj1iW2NdO2lmKGEuY2FsbChiLGMpJiZlLmNhbGwoZyxmLGMsYikpe2RbY109Zjt9fXJldHVybiBkO30sZXZlcnk6ZnVuY3Rpb24oYixkLGUpe2Zvcih2YXIgYyBpbiBiKXtpZihhLmNhbGwoYixjKSYmIWQuY2FsbChlLGJbY10sYykpe3JldHVybiBmYWxzZTsKfX1yZXR1cm4gdHJ1ZTt9LHNvbWU6ZnVuY3Rpb24oYixkLGUpe2Zvcih2YXIgYyBpbiBiKXtpZihhLmNhbGwoYixjKSYmZC5jYWxsKGUsYltjXSxjKSl7cmV0dXJuIHRydWU7fX1yZXR1cm4gZmFsc2U7fSxrZXlzOmZ1bmN0aW9uKGIpe3ZhciBkPVtdO2Zvcih2YXIgYyBpbiBiKXtpZihhLmNhbGwoYixjKSl7ZC5wdXNoKGMpOwp9fXJldHVybiBkO30sdmFsdWVzOmZ1bmN0aW9uKGMpe3ZhciBiPVtdO2Zvcih2YXIgZCBpbiBjKXtpZihhLmNhbGwoYyxkKSl7Yi5wdXNoKGNbZF0pO319cmV0dXJuIGI7fSxnZXRMZW5ndGg6ZnVuY3Rpb24oYil7cmV0dXJuIE9iamVjdC5rZXlzKGIpLmxlbmd0aDt9LGtleU9mOmZ1bmN0aW9uKGIsZCl7Zm9yKHZhciBjIGluIGIpe2lmKGEuY2FsbChiLGMpJiZiW2NdPT09ZCl7cmV0dXJuIGM7Cn19cmV0dXJuIG51bGw7fSxjb250YWluczpmdW5jdGlvbihiLGMpe3JldHVybiBPYmplY3Qua2V5T2YoYixjKSE9bnVsbDt9LHRvUXVlcnlTdHJpbmc6ZnVuY3Rpb24oYixjKXt2YXIgZD1bXTtPYmplY3QuZWFjaChiLGZ1bmN0aW9uKGgsZyl7aWYoYyl7Zz1jKyJbIitnKyJdIjsKfXZhciBmO3N3aXRjaCh0eXBlT2YoaCkpe2Nhc2Uib2JqZWN0IjpmPU9iamVjdC50b1F1ZXJ5U3RyaW5nKGgsZyk7YnJlYWs7Y2FzZSJhcnJheSI6dmFyIGU9e307aC5lYWNoKGZ1bmN0aW9uKGssail7ZVtqXT1rO30pO2Y9T2JqZWN0LnRvUXVlcnlTdHJpbmcoZSxnKTsKYnJlYWs7ZGVmYXVsdDpmPWcrIj0iK2VuY29kZVVSSUNvbXBvbmVudChoKTt9aWYoaCE9bnVsbCl7ZC5wdXNoKGYpO319KTtyZXR1cm4gZC5qb2luKCImIik7fX0pO30pKCk7KGZ1bmN0aW9uKCl7dmFyIGs9dGhpcy5kb2N1bWVudDt2YXIgaT1rLndpbmRvdz10aGlzOwp2YXIgYj0xO3RoaXMuJHVpZD0oaS5BY3RpdmVYT2JqZWN0KT9mdW5jdGlvbihlKXtyZXR1cm4oZS51aWR8fChlLnVpZD1bYisrXSkpWzBdO306ZnVuY3Rpb24oZSl7cmV0dXJuIGUudWlkfHwoZS51aWQ9YisrKTt9OyR1aWQoaSk7JHVpZChrKTt2YXIgYT1uYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCksYz1uYXZpZ2F0b3IucGxhdGZvcm0udG9Mb3dlckNhc2UoKSxqPWEubWF0Y2goLyhvcGVyYXxpZXxmaXJlZm94fGNocm9tZXx2ZXJzaW9uKVtcc1wvOl0oW1x3XGRcLl0rKT8uKj8oc2FmYXJpfHZlcnNpb25bXHNcLzpdKFtcd1xkXC5dKyl8JCkvKXx8W251bGwsInVua25vd24iLDBdLGY9alsxXT09ImllIiYmay5kb2N1bWVudE1vZGU7CnZhciBvPXRoaXMuQnJvd3Nlcj17ZXh0ZW5kOkZ1bmN0aW9uLnByb3RvdHlwZS5leHRlbmQsbmFtZTooalsxXT09InZlcnNpb24iKT9qWzNdOmpbMV0sdmVyc2lvbjpmfHxwYXJzZUZsb2F0KChqWzFdPT0ib3BlcmEiJiZqWzRdKT9qWzRdOmpbMl0pLFBsYXRmb3JtOntuYW1lOmEubWF0Y2goL2lwKD86YWR8b2R8aG9uZSkvKT8iaW9zIjooYS5tYXRjaCgvKD86d2Vib3N8YW5kcm9pZCkvKXx8Yy5tYXRjaCgvbWFjfHdpbnxsaW51eC8pfHxbIm90aGVyIl0pWzBdfSxGZWF0dXJlczp7eHBhdGg6ISEoay5ldmFsdWF0ZSksYWlyOiEhKGkucnVudGltZSkscXVlcnk6ISEoay5xdWVyeVNlbGVjdG9yKSxqc29uOiEhKGkuSlNPTil9LFBsdWdpbnM6e319OwpvW28ubmFtZV09dHJ1ZTtvW28ubmFtZStwYXJzZUludChvLnZlcnNpb24sMTApXT10cnVlO28uUGxhdGZvcm1bby5QbGF0Zm9ybS5uYW1lXT10cnVlO28uUmVxdWVzdD0oZnVuY3Rpb24oKXt2YXIgcT1mdW5jdGlvbigpe3JldHVybiBuZXcgWE1MSHR0cFJlcXVlc3QoKTsKfTt2YXIgcD1mdW5jdGlvbigpe3JldHVybiBuZXcgQWN0aXZlWE9iamVjdCgiTVNYTUwyLlhNTEhUVFAiKTt9O3ZhciBlPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBBY3RpdmVYT2JqZWN0KCJNaWNyb3NvZnQuWE1MSFRUUCIpO307cmV0dXJuIEZ1bmN0aW9uLmF0dGVtcHQoZnVuY3Rpb24oKXtxKCk7CnJldHVybiBxO30sZnVuY3Rpb24oKXtwKCk7cmV0dXJuIHA7fSxmdW5jdGlvbigpe2UoKTtyZXR1cm4gZTt9KTt9KSgpO28uRmVhdHVyZXMueGhyPSEhKG8uUmVxdWVzdCk7dmFyIGg9KEZ1bmN0aW9uLmF0dGVtcHQoZnVuY3Rpb24oKXtyZXR1cm4gbmF2aWdhdG9yLnBsdWdpbnNbIlNob2Nrd2F2ZSBGbGFzaCJdLmRlc2NyaXB0aW9uOwp9LGZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBBY3RpdmVYT2JqZWN0KCJTaG9ja3dhdmVGbGFzaC5TaG9ja3dhdmVGbGFzaCIpLkdldFZhcmlhYmxlKCIkdmVyc2lvbiIpO30pfHwiMCByMCIpLm1hdGNoKC9cZCsvZyk7by5QbHVnaW5zLkZsYXNoPXt2ZXJzaW9uOk51bWJlcihoWzBdfHwiMC4iK2hbMV0pfHwwLGJ1aWxkOk51bWJlcihoWzJdKXx8MH07Cm8uZXhlYz1mdW5jdGlvbihwKXtpZighcCl7cmV0dXJuIHA7fWlmKGkuZXhlY1NjcmlwdCl7aS5leGVjU2NyaXB0KHApO31lbHNle3ZhciBlPWsuY3JlYXRlRWxlbWVudCgic2NyaXB0Iik7ZS5zZXRBdHRyaWJ1dGUoInR5cGUiLCJ0ZXh0L2phdmFzY3JpcHQiKTtlLnRleHQ9cDsKay5oZWFkLmFwcGVuZENoaWxkKGUpO2suaGVhZC5yZW1vdmVDaGlsZChlKTt9cmV0dXJuIHA7fTtTdHJpbmcuaW1wbGVtZW50KCJzdHJpcFNjcmlwdHMiLGZ1bmN0aW9uKHApe3ZhciBlPSIiO3ZhciBxPXRoaXMucmVwbGFjZSgvPHNjcmlwdFtePl0qPihbXHNcU10qPyk8XC9zY3JpcHQ+L2dpLGZ1bmN0aW9uKHIscyl7ZSs9cysiXG4iOwpyZXR1cm4iIjt9KTtpZihwPT09dHJ1ZSl7by5leGVjKGUpO31lbHNle2lmKHR5cGVPZihwKT09ImZ1bmN0aW9uIil7cChlLHEpO319cmV0dXJuIHE7fSk7by5leHRlbmQoe0RvY3VtZW50OnRoaXMuRG9jdW1lbnQsV2luZG93OnRoaXMuV2luZG93LEVsZW1lbnQ6dGhpcy5FbGVtZW50LEV2ZW50OnRoaXMuRXZlbnR9KTsKdGhpcy5XaW5kb3c9dGhpcy4kY29uc3RydWN0b3I9bmV3IFR5cGUoIldpbmRvdyIsZnVuY3Rpb24oKXt9KTt0aGlzLiRmYW1pbHk9RnVuY3Rpb24uZnJvbSgid2luZG93IikuaGlkZSgpO1dpbmRvdy5taXJyb3IoZnVuY3Rpb24oZSxwKXtpW2VdPXA7fSk7dGhpcy5Eb2N1bWVudD1rLiRjb25zdHJ1Y3Rvcj1uZXcgVHlwZSgiRG9jdW1lbnQiLGZ1bmN0aW9uKCl7fSk7CmsuJGZhbWlseT1GdW5jdGlvbi5mcm9tKCJkb2N1bWVudCIpLmhpZGUoKTtEb2N1bWVudC5taXJyb3IoZnVuY3Rpb24oZSxwKXtrW2VdPXA7fSk7ay5odG1sPWsuZG9jdW1lbnRFbGVtZW50O2lmKCFrLmhlYWQpe2suaGVhZD1rLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJoZWFkIilbMF07Cn1pZihrLmV4ZWNDb21tYW5kKXt0cnl7ay5leGVjQ29tbWFuZCgiQmFja2dyb3VuZEltYWdlQ2FjaGUiLGZhbHNlLHRydWUpO31jYXRjaChnKXt9fWlmKHRoaXMuYXR0YWNoRXZlbnQmJiF0aGlzLmFkZEV2ZW50TGlzdGVuZXIpe3ZhciBkPWZ1bmN0aW9uKCl7dGhpcy5kZXRhY2hFdmVudCgib251bmxvYWQiLGQpOwprLmhlYWQ9ay5odG1sPWsud2luZG93PW51bGw7fTt0aGlzLmF0dGFjaEV2ZW50KCJvbnVubG9hZCIsZCk7fXZhciBtPUFycmF5LmZyb207dHJ5e20oay5odG1sLmNoaWxkTm9kZXMpO31jYXRjaChnKXtBcnJheS5mcm9tPWZ1bmN0aW9uKHApe2lmKHR5cGVvZiBwIT0ic3RyaW5nIiYmVHlwZS5pc0VudW1lcmFibGUocCkmJnR5cGVPZihwKSE9ImFycmF5Iil7dmFyIGU9cC5sZW5ndGgscT1uZXcgQXJyYXkoZSk7CndoaWxlKGUtLSl7cVtlXT1wW2VdO31yZXR1cm4gcTt9cmV0dXJuIG0ocCk7fTt2YXIgbD1BcnJheS5wcm90b3R5cGUsbj1sLnNsaWNlO1sicG9wIiwicHVzaCIsInJldmVyc2UiLCJzaGlmdCIsInNvcnQiLCJzcGxpY2UiLCJ1bnNoaWZ0IiwiY29uY2F0Iiwiam9pbiIsInNsaWNlIl0uZWFjaChmdW5jdGlvbihlKXt2YXIgcD1sW2VdOwpBcnJheVtlXT1mdW5jdGlvbihxKXtyZXR1cm4gcC5hcHBseShBcnJheS5mcm9tKHEpLG4uY2FsbChhcmd1bWVudHMsMSkpO307fSk7fX0pKCk7dmFyIEV2ZW50PW5ldyBUeXBlKCJFdmVudCIsZnVuY3Rpb24oYSxpKXtpZighaSl7aT13aW5kb3c7fXZhciBvPWkuZG9jdW1lbnQ7CmE9YXx8aS5ldmVudDtpZihhLiRleHRlbmRlZCl7cmV0dXJuIGE7fXRoaXMuJGV4dGVuZGVkPXRydWU7dmFyIG49YS50eXBlLGs9YS50YXJnZXR8fGEuc3JjRWxlbWVudCxtPXt9LGM9e30scT1udWxsLGgsbCxiLHA7d2hpbGUoayYmay5ub2RlVHlwZT09Myl7az1rLnBhcmVudE5vZGU7Cn1pZihuLmluZGV4T2YoImtleSIpIT0tMSl7Yj1hLndoaWNofHxhLmtleUNvZGU7cD1PYmplY3Qua2V5T2YoRXZlbnQuS2V5cyxiKTtpZihuPT0ia2V5ZG93biIpe3ZhciBkPWItMTExO2lmKGQ+MCYmZDwxMyl7cD0iZiIrZDt9fWlmKCFwKXtwPVN0cmluZy5mcm9tQ2hhckNvZGUoYikudG9Mb3dlckNhc2UoKTsKfX1lbHNle2lmKCgvY2xpY2t8bW91c2V8bWVudS9pKS50ZXN0KG4pKXtvPSghby5jb21wYXRNb2RlfHxvLmNvbXBhdE1vZGU9PSJDU1MxQ29tcGF0Iik/by5odG1sOm8uYm9keTttPXt4OihhLnBhZ2VYIT1udWxsKT9hLnBhZ2VYOmEuY2xpZW50WCtvLnNjcm9sbExlZnQseTooYS5wYWdlWSE9bnVsbCk/YS5wYWdlWTphLmNsaWVudFkrby5zY3JvbGxUb3B9OwpjPXt4OihhLnBhZ2VYIT1udWxsKT9hLnBhZ2VYLWkucGFnZVhPZmZzZXQ6YS5jbGllbnRYLHk6KGEucGFnZVkhPW51bGwpP2EucGFnZVktaS5wYWdlWU9mZnNldDphLmNsaWVudFl9O2lmKCgvRE9NTW91c2VTY3JvbGx8bW91c2V3aGVlbC8pLnRlc3Qobikpe2w9KGEud2hlZWxEZWx0YSk/YS53aGVlbERlbHRhLzEyMDotKGEuZGV0YWlsfHwwKS8zOwp9aD0oYS53aGljaD09Myl8fChhLmJ1dHRvbj09Mik7aWYoKC9vdmVyfG91dC8pLnRlc3Qobikpe3E9YS5yZWxhdGVkVGFyZ2V0fHxhWyhuPT0ibW91c2VvdmVyIj8iZnJvbSI6InRvIikrIkVsZW1lbnQiXTt2YXIgaj1mdW5jdGlvbigpe3doaWxlKHEmJnEubm9kZVR5cGU9PTMpe3E9cS5wYXJlbnROb2RlOwp9cmV0dXJuIHRydWU7fTt2YXIgZz0oQnJvd3Nlci5maXJlZm94Mik/ai5hdHRlbXB0KCk6aigpO3E9KGcpP3E6bnVsbDt9fWVsc2V7aWYoKC9nZXN0dXJlfHRvdWNoL2kpLnRlc3Qobikpe3RoaXMucm90YXRpb249YS5yb3RhdGlvbjt0aGlzLnNjYWxlPWEuc2NhbGU7CnRoaXMudGFyZ2V0VG91Y2hlcz1hLnRhcmdldFRvdWNoZXM7dGhpcy5jaGFuZ2VkVG91Y2hlcz1hLmNoYW5nZWRUb3VjaGVzO3ZhciBmPXRoaXMudG91Y2hlcz1hLnRvdWNoZXM7aWYoZiYmZlswXSl7dmFyIGU9ZlswXTttPXt4OmUucGFnZVgseTplLnBhZ2VZfTtjPXt4OmUuY2xpZW50WCx5OmUuY2xpZW50WX07Cn19fX1yZXR1cm4gT2JqZWN0LmFwcGVuZCh0aGlzLHtldmVudDphLHR5cGU6bixwYWdlOm0sY2xpZW50OmMscmlnaHRDbGljazpoLHdoZWVsOmwscmVsYXRlZFRhcmdldDpkb2N1bWVudC5pZChxKSx0YXJnZXQ6ZG9jdW1lbnQuaWQoayksY29kZTpiLGtleTpwLHNoaWZ0OmEuc2hpZnRLZXksY29udHJvbDphLmN0cmxLZXksYWx0OmEuYWx0S2V5LG1ldGE6YS5tZXRhS2V5fSk7Cn0pO0V2ZW50LktleXM9e2VudGVyOjEzLHVwOjM4LGRvd246NDAsbGVmdDozNyxyaWdodDozOSxlc2M6Mjcsc3BhY2U6MzIsYmFja3NwYWNlOjgsdGFiOjksImRlbGV0ZSI6NDZ9O0V2ZW50LmltcGxlbWVudCh7c3RvcDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnN0b3BQcm9wYWdhdGlvbigpLnByZXZlbnREZWZhdWx0KCk7Cn0sc3RvcFByb3BhZ2F0aW9uOmZ1bmN0aW9uKCl7aWYodGhpcy5ldmVudC5zdG9wUHJvcGFnYXRpb24pe3RoaXMuZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7fWVsc2V7dGhpcy5ldmVudC5jYW5jZWxCdWJibGU9dHJ1ZTt9cmV0dXJuIHRoaXM7fSxwcmV2ZW50RGVmYXVsdDpmdW5jdGlvbigpe2lmKHRoaXMuZXZlbnQucHJldmVudERlZmF1bHQpe3RoaXMuZXZlbnQucHJldmVudERlZmF1bHQoKTsKfWVsc2V7dGhpcy5ldmVudC5yZXR1cm5WYWx1ZT1mYWxzZTt9cmV0dXJuIHRoaXM7fX0pOyhmdW5jdGlvbigpe3ZhciBhPXRoaXMuQ2xhc3M9bmV3IFR5cGUoIkNsYXNzIixmdW5jdGlvbihoKXtpZihpbnN0YW5jZU9mKGgsRnVuY3Rpb24pKXtoPXtpbml0aWFsaXplOmh9Owp9dmFyIGc9ZnVuY3Rpb24oKXtlKHRoaXMpO2lmKGcuJHByb3RvdHlwaW5nKXtyZXR1cm4gdGhpczt9dGhpcy4kY2FsbGVyPW51bGw7dmFyIGk9KHRoaXMuaW5pdGlhbGl6ZSk/dGhpcy5pbml0aWFsaXplLmFwcGx5KHRoaXMsYXJndW1lbnRzKTp0aGlzO3RoaXMuJGNhbGxlcj10aGlzLmNhbGxlcj1udWxsOwpyZXR1cm4gaTt9LmV4dGVuZCh0aGlzKS5pbXBsZW1lbnQoaCk7Zy4kY29uc3RydWN0b3I9YTtnLnByb3RvdHlwZS4kY29uc3RydWN0b3I9ZztnLnByb3RvdHlwZS5wYXJlbnQ9YztyZXR1cm4gZzt9KTt2YXIgYz1mdW5jdGlvbigpe2lmKCF0aGlzLiRjYWxsZXIpe3Rocm93IG5ldyBFcnJvcignVGhlIG1ldGhvZCAicGFyZW50IiBjYW5ub3QgYmUgY2FsbGVkLicpOwp9dmFyIGc9dGhpcy4kY2FsbGVyLiRuYW1lLGg9dGhpcy4kY2FsbGVyLiRvd25lci5wYXJlbnQsaT0oaCk/aC5wcm90b3R5cGVbZ106bnVsbDtpZighaSl7dGhyb3cgbmV3IEVycm9yKCdUaGUgbWV0aG9kICInK2crJyIgaGFzIG5vIHBhcmVudC4nKTt9cmV0dXJuIGkuYXBwbHkodGhpcyxhcmd1bWVudHMpOwp9O3ZhciBlPWZ1bmN0aW9uKGcpe2Zvcih2YXIgaCBpbiBnKXt2YXIgaj1nW2hdO3N3aXRjaCh0eXBlT2Yoaikpe2Nhc2Uib2JqZWN0Ijp2YXIgaT1mdW5jdGlvbigpe307aS5wcm90b3R5cGU9ajtnW2hdPWUobmV3IGkpO2JyZWFrO2Nhc2UiYXJyYXkiOmdbaF09ai5jbG9uZSgpOwpicmVhazt9fXJldHVybiBnO307dmFyIGI9ZnVuY3Rpb24oZyxoLGope2lmKGouJG9yaWdpbil7aj1qLiRvcmlnaW47fXZhciBpPWZ1bmN0aW9uKCl7aWYoai4kcHJvdGVjdGVkJiZ0aGlzLiRjYWxsZXI9PW51bGwpe3Rocm93IG5ldyBFcnJvcignVGhlIG1ldGhvZCAiJytoKyciIGNhbm5vdCBiZSBjYWxsZWQuJyk7Cn12YXIgbD10aGlzLmNhbGxlcixtPXRoaXMuJGNhbGxlcjt0aGlzLmNhbGxlcj1tO3RoaXMuJGNhbGxlcj1pO3ZhciBrPWouYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMuJGNhbGxlcj1tO3RoaXMuY2FsbGVyPWw7cmV0dXJuIGs7fS5leHRlbmQoeyRvd25lcjpnLCRvcmlnaW46aiwkbmFtZTpofSk7CnJldHVybiBpO307dmFyIGY9ZnVuY3Rpb24oaCxpLGcpe2lmKGEuTXV0YXRvcnMuaGFzT3duUHJvcGVydHkoaCkpe2k9YS5NdXRhdG9yc1toXS5jYWxsKHRoaXMsaSk7aWYoaT09bnVsbCl7cmV0dXJuIHRoaXM7fX1pZih0eXBlT2YoaSk9PSJmdW5jdGlvbiIpe2lmKGkuJGhpZGRlbil7cmV0dXJuIHRoaXM7Cn10aGlzLnByb3RvdHlwZVtoXT0oZyk/aTpiKHRoaXMsaCxpKTt9ZWxzZXtPYmplY3QubWVyZ2UodGhpcy5wcm90b3R5cGUsaCxpKTt9cmV0dXJuIHRoaXM7fTt2YXIgZD1mdW5jdGlvbihnKXtnLiRwcm90b3R5cGluZz10cnVlO3ZhciBoPW5ldyBnO2RlbGV0ZSBnLiRwcm90b3R5cGluZzsKcmV0dXJuIGg7fTthLmltcGxlbWVudCgiaW1wbGVtZW50IixmLm92ZXJsb2FkU2V0dGVyKCkpO2EuTXV0YXRvcnM9e0V4dGVuZHM6ZnVuY3Rpb24oZyl7dGhpcy5wYXJlbnQ9Zzt0aGlzLnByb3RvdHlwZT1kKGcpO30sSW1wbGVtZW50czpmdW5jdGlvbihnKXtBcnJheS5mcm9tKGcpLmVhY2goZnVuY3Rpb24oail7dmFyIGg9bmV3IGo7CmZvcih2YXIgaSBpbiBoKXtmLmNhbGwodGhpcyxpLGhbaV0sdHJ1ZSk7fX0sdGhpcyk7fX07fSkoKTsoZnVuY3Rpb24oKXt0aGlzLkNoYWluPW5ldyBDbGFzcyh7JGNoYWluOltdLGNoYWluOmZ1bmN0aW9uKCl7dGhpcy4kY2hhaW4uYXBwZW5kKEFycmF5LmZsYXR0ZW4oYXJndW1lbnRzKSk7CnJldHVybiB0aGlzO30sY2FsbENoYWluOmZ1bmN0aW9uKCl7cmV0dXJuKHRoaXMuJGNoYWluLmxlbmd0aCk/dGhpcy4kY2hhaW4uc2hpZnQoKS5hcHBseSh0aGlzLGFyZ3VtZW50cyk6ZmFsc2U7fSxjbGVhckNoYWluOmZ1bmN0aW9uKCl7dGhpcy4kY2hhaW4uZW1wdHkoKTsKcmV0dXJuIHRoaXM7fX0pO3ZhciBhPWZ1bmN0aW9uKGIpe3JldHVybiBiLnJlcGxhY2UoL15vbihbQS1aXSkvLGZ1bmN0aW9uKGMsZCl7cmV0dXJuIGQudG9Mb3dlckNhc2UoKTt9KTt9O3RoaXMuRXZlbnRzPW5ldyBDbGFzcyh7JGV2ZW50czp7fSxhZGRFdmVudDpmdW5jdGlvbihkLGMsYil7ZD1hKGQpOwp0aGlzLiRldmVudHNbZF09KHRoaXMuJGV2ZW50c1tkXXx8W10pLmluY2x1ZGUoYyk7aWYoYil7Yy5pbnRlcm5hbD10cnVlO31yZXR1cm4gdGhpczt9LGFkZEV2ZW50czpmdW5jdGlvbihiKXtmb3IodmFyIGMgaW4gYil7dGhpcy5hZGRFdmVudChjLGJbY10pO31yZXR1cm4gdGhpczsKfSxmaXJlRXZlbnQ6ZnVuY3Rpb24oZSxjLGIpe2U9YShlKTt2YXIgZD10aGlzLiRldmVudHNbZV07aWYoIWQpe3JldHVybiB0aGlzO31jPUFycmF5LmZyb20oYyk7ZC5lYWNoKGZ1bmN0aW9uKGYpe2lmKGIpe2YuZGVsYXkoYix0aGlzLGMpO31lbHNle2YuYXBwbHkodGhpcyxjKTsKfX0sdGhpcyk7cmV0dXJuIHRoaXM7fSxyZW1vdmVFdmVudDpmdW5jdGlvbihlLGQpe2U9YShlKTt2YXIgYz10aGlzLiRldmVudHNbZV07aWYoYyYmIWQuaW50ZXJuYWwpe3ZhciBiPWMuaW5kZXhPZihkKTtpZihiIT0tMSl7ZGVsZXRlIGNbYl07fX1yZXR1cm4gdGhpczsKfSxyZW1vdmVFdmVudHM6ZnVuY3Rpb24oZCl7dmFyIGU7aWYodHlwZU9mKGQpPT0ib2JqZWN0Iil7Zm9yKGUgaW4gZCl7dGhpcy5yZW1vdmVFdmVudChlLGRbZV0pO31yZXR1cm4gdGhpczt9aWYoZCl7ZD1hKGQpO31mb3IoZSBpbiB0aGlzLiRldmVudHMpe2lmKGQmJmQhPWUpe2NvbnRpbnVlOwp9dmFyIGM9dGhpcy4kZXZlbnRzW2VdO2Zvcih2YXIgYj1jLmxlbmd0aDtiLS07KXtpZihiIGluIGMpe3RoaXMucmVtb3ZlRXZlbnQoZSxjW2JdKTt9fX1yZXR1cm4gdGhpczt9fSk7dGhpcy5PcHRpb25zPW5ldyBDbGFzcyh7c2V0T3B0aW9uczpmdW5jdGlvbigpe3ZhciBiPXRoaXMub3B0aW9ucz1PYmplY3QubWVyZ2UuYXBwbHkobnVsbCxbe30sdGhpcy5vcHRpb25zXS5hcHBlbmQoYXJndW1lbnRzKSk7CmlmKHRoaXMuYWRkRXZlbnQpe2Zvcih2YXIgYyBpbiBiKXtpZih0eXBlT2YoYltjXSkhPSJmdW5jdGlvbiJ8fCEoL15vbltBLVpdLykudGVzdChjKSl7Y29udGludWU7fXRoaXMuYWRkRXZlbnQoYyxiW2NdKTtkZWxldGUgYltjXTt9fXJldHVybiB0aGlzO319KTt9KSgpOwooZnVuY3Rpb24oKXt2YXIgayxuLGwsZyxhPXt9LGM9e30sbT0vXFwvZzt2YXIgZT1mdW5jdGlvbihxLHApe2lmKHE9PW51bGwpe3JldHVybiBudWxsO31pZihxLlNsaWNrPT09dHJ1ZSl7cmV0dXJuIHE7fXE9KCIiK3EpLnJlcGxhY2UoL15ccyt8XHMrJC9nLCIiKTtnPSEhcDsKdmFyIG89KGcpP2M6YTtpZihvW3FdKXtyZXR1cm4gb1txXTt9az17U2xpY2s6dHJ1ZSxleHByZXNzaW9uczpbXSxyYXc6cSxyZXZlcnNlOmZ1bmN0aW9uKCl7cmV0dXJuIGUodGhpcy5yYXcsdHJ1ZSk7fX07bj0tMTt3aGlsZShxIT0ocT1xLnJlcGxhY2UoaixiKSkpe31rLmxlbmd0aD1rLmV4cHJlc3Npb25zLmxlbmd0aDsKcmV0dXJuIG9bay5yYXddPShnKT9oKGspOms7fTt2YXIgaT1mdW5jdGlvbihvKXtpZihvPT09IiEiKXtyZXR1cm4iICI7fWVsc2V7aWYobz09PSIgIil7cmV0dXJuIiEiO31lbHNle2lmKCgvXiEvKS50ZXN0KG8pKXtyZXR1cm4gby5yZXBsYWNlKC9eIS8sIiIpO31lbHNle3JldHVybiIhIitvOwp9fX19O3ZhciBoPWZ1bmN0aW9uKHUpe3ZhciByPXUuZXhwcmVzc2lvbnM7Zm9yKHZhciBwPTA7cDxyLmxlbmd0aDtwKyspe3ZhciB0PXJbcF07dmFyIHE9e3BhcnRzOltdLHRhZzoiKiIsY29tYmluYXRvcjppKHRbMF0uY29tYmluYXRvcil9O2Zvcih2YXIgbz0wO288dC5sZW5ndGg7Cm8rKyl7dmFyIHM9dFtvXTtpZighcy5yZXZlcnNlQ29tYmluYXRvcil7cy5yZXZlcnNlQ29tYmluYXRvcj0iICI7fXMuY29tYmluYXRvcj1zLnJldmVyc2VDb21iaW5hdG9yO2RlbGV0ZSBzLnJldmVyc2VDb21iaW5hdG9yO310LnJldmVyc2UoKS5wdXNoKHEpO31yZXR1cm4gdTsKfTt2YXIgZj1mdW5jdGlvbihvKXtyZXR1cm4gby5yZXBsYWNlKC9bLVtcXXt9KCkqKz8uXFxeJHwsI1xzXS9nLGZ1bmN0aW9uKHApe3JldHVybiJcXCIrcDt9KTt9O3ZhciBqPW5ldyBSZWdFeHAoIl4oPzpcXHMqKCwpXFxzKnxcXHMqKDxjb21iaW5hdG9yPispXFxzKnwoXFxzKyl8KDx1bmljb2RlPit8XFwqKXxcXCMoPHVuaWNvZGU+Kyl8XFwuKDx1bmljb2RlPispfFxcW1xccyooPHVuaWNvZGUxPispKD86XFxzKihbKl4kIX58XT89KSg/OlxccyooPzooW1wiJ10/KSguKj8pXFw5KSkpP1xccypcXF0oPyFcXF0pfCg6KykoPHVuaWNvZGU+KykoPzpcXCgoPzooPzooW1wiJ10pKFteXFwxM10qKVxcMTMpfCgoPzpcXChbXildK1xcKXxbXigpXSopKykpXFwpKT8pIi5yZXBsYWNlKC88Y29tYmluYXRvcj4vLCJbIitmKCI+K35gIUAkJV4mPXt9XFw7PC8iKSsiXSIpLnJlcGxhY2UoLzx1bmljb2RlPi9nLCIoPzpbXFx3XFx1MDBhMS1cXHVGRkZGLV18XFxcXFteXFxzMC05YS1mXSkiKS5yZXBsYWNlKC88dW5pY29kZTE+L2csIig/Ols6XFx3XFx1MDBhMS1cXHVGRkZGLV18XFxcXFteXFxzMC05YS1mXSkiKSk7CmZ1bmN0aW9uIGIoeCxzLEQseixyLEMscSxCLEEseSx1LEYsRyx2LHAsdyl7aWYoc3x8bj09PS0xKXtrLmV4cHJlc3Npb25zWysrbl09W107bD0tMTtpZihzKXtyZXR1cm4iIjt9fWlmKER8fHp8fGw9PT0tMSl7RD1EfHwiICI7dmFyIHQ9ay5leHByZXNzaW9uc1tuXTsKaWYoZyYmdFtsXSl7dFtsXS5yZXZlcnNlQ29tYmluYXRvcj1pKEQpO310WysrbF09e2NvbWJpbmF0b3I6RCx0YWc6IioifTt9dmFyIG89ay5leHByZXNzaW9uc1tuXVtsXTtpZihyKXtvLnRhZz1yLnJlcGxhY2UobSwiIik7fWVsc2V7aWYoQyl7by5pZD1DLnJlcGxhY2UobSwiIik7Cn1lbHNle2lmKHEpe3E9cS5yZXBsYWNlKG0sIiIpO2lmKCFvLmNsYXNzTGlzdCl7by5jbGFzc0xpc3Q9W107fWlmKCFvLmNsYXNzZXMpe28uY2xhc3Nlcz1bXTt9by5jbGFzc0xpc3QucHVzaChxKTtvLmNsYXNzZXMucHVzaCh7dmFsdWU6cSxyZWdleHA6bmV3IFJlZ0V4cCgiKF58XFxzKSIrZihxKSsiKFxcc3wkKSIpfSk7Cn1lbHNle2lmKEcpe3c9d3x8cDt3PXc/dy5yZXBsYWNlKG0sIiIpOm51bGw7aWYoIW8ucHNldWRvcyl7by5wc2V1ZG9zPVtdO31vLnBzZXVkb3MucHVzaCh7a2V5OkcucmVwbGFjZShtLCIiKSx2YWx1ZTp3LHR5cGU6Ri5sZW5ndGg9PTE/ImNsYXNzIjoiZWxlbWVudCJ9KTsKfWVsc2V7aWYoQil7Qj1CLnJlcGxhY2UobSwiIik7dT0odXx8IiIpLnJlcGxhY2UobSwiIik7dmFyIEUsSDtzd2l0Y2goQSl7Y2FzZSJePSI6SD1uZXcgUmVnRXhwKCJeIitmKHUpKTticmVhaztjYXNlIiQ9IjpIPW5ldyBSZWdFeHAoZih1KSsiJCIpO2JyZWFrO2Nhc2Uifj0iOkg9bmV3IFJlZ0V4cCgiKF58XFxzKSIrZih1KSsiKFxcc3wkKSIpOwpicmVhaztjYXNlInw9IjpIPW5ldyBSZWdFeHAoIl4iK2YodSkrIigtfCQpIik7YnJlYWs7Y2FzZSI9IjpFPWZ1bmN0aW9uKEkpe3JldHVybiB1PT1JO307YnJlYWs7Y2FzZSIqPSI6RT1mdW5jdGlvbihJKXtyZXR1cm4gSSYmSS5pbmRleE9mKHUpPi0xO307YnJlYWs7CmNhc2UiIT0iOkU9ZnVuY3Rpb24oSSl7cmV0dXJuIHUhPUk7fTticmVhaztkZWZhdWx0OkU9ZnVuY3Rpb24oSSl7cmV0dXJuICEhSTt9O31pZih1PT0iIiYmKC9eWyokXl09JC8pLnRlc3QoQSkpe0U9ZnVuY3Rpb24oKXtyZXR1cm4gZmFsc2U7fTt9aWYoIUUpe0U9ZnVuY3Rpb24oSSl7cmV0dXJuIEkmJkgudGVzdChJKTsKfTt9aWYoIW8uYXR0cmlidXRlcyl7by5hdHRyaWJ1dGVzPVtdO31vLmF0dHJpYnV0ZXMucHVzaCh7a2V5OkIsb3BlcmF0b3I6QSx2YWx1ZTp1LHRlc3Q6RX0pO319fX19cmV0dXJuIiI7fXZhciBkPSh0aGlzLlNsaWNrfHx7fSk7ZC5wYXJzZT1mdW5jdGlvbihvKXtyZXR1cm4gZShvKTsKfTtkLmVzY2FwZVJlZ0V4cD1mO2lmKCF0aGlzLlNsaWNrKXt0aGlzLlNsaWNrPWQ7fX0pLmFwcGx5KCh0eXBlb2YgZXhwb3J0cyE9InVuZGVmaW5lZCIpP2V4cG9ydHM6dGhpcyk7KGZ1bmN0aW9uKCl7dmFyIGo9e30sbD17fSxiPU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7CmouaXNOYXRpdmVDb2RlPWZ1bmN0aW9uKGMpe3JldHVybigvXHtccypcW25hdGl2ZSBjb2RlXF1ccypcfS8pLnRlc3QoIiIrYyk7fTtqLmlzWE1MPWZ1bmN0aW9uKGMpe3JldHVybighIWMueG1sVmVyc2lvbil8fCghIWMueG1sKXx8KGIuY2FsbChjKT09IltvYmplY3QgWE1MRG9jdW1lbnRdIil8fChjLm5vZGVUeXBlPT05JiZjLmRvY3VtZW50RWxlbWVudC5ub2RlTmFtZSE9IkhUTUwiKTsKfTtqLnNldERvY3VtZW50PWZ1bmN0aW9uKHcpe3ZhciB0PXcubm9kZVR5cGU7aWYodD09OSl7fWVsc2V7aWYodCl7dz13Lm93bmVyRG9jdW1lbnQ7fWVsc2V7aWYody5uYXZpZ2F0b3Ipe3c9dy5kb2N1bWVudDt9ZWxzZXtyZXR1cm47fX19aWYodGhpcy5kb2N1bWVudD09PXcpe3JldHVybjsKfXRoaXMuZG9jdW1lbnQ9dzt2YXIgeT13LmRvY3VtZW50RWxlbWVudCx1PXRoaXMuZ2V0VUlEWE1MKHkpLG89bFt1XSxBO2lmKG8pe2ZvcihBIGluIG8pe3RoaXNbQV09b1tBXTt9cmV0dXJuO31vPWxbdV09e307by5yb290PXk7by5pc1hNTERvY3VtZW50PXRoaXMuaXNYTUwodyk7Cm8uYnJva2VuU3RhckdFQlROPW8uc3RhclNlbGVjdHNDbG9zZWRRU0E9by5pZEdldHNOYW1lPW8uYnJva2VuTWl4ZWRDYXNlUVNBPW8uYnJva2VuR0VCQ049by5icm9rZW5DaGVja2VkUVNBPW8uYnJva2VuRW1wdHlBdHRyaWJ1dGVRU0E9by5pc0hUTUxEb2N1bWVudD1vLm5hdGl2ZU1hdGNoZXNTZWxlY3Rvcj1mYWxzZTsKdmFyIG0sbix4LHEscjt2YXIgcyxjPSJzbGlja191bmlxdWVpZCI7dmFyIHo9dy5jcmVhdGVFbGVtZW50KCJkaXYiKTt2YXIgcD13LmJvZHl8fHcuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImJvZHkiKVswXXx8eTtwLmFwcGVuZENoaWxkKHopO3RyeXt6LmlubmVySFRNTD0nPGEgaWQ9IicrYysnIj48L2E+JzsKby5pc0hUTUxEb2N1bWVudD0hIXcuZ2V0RWxlbWVudEJ5SWQoYyk7fWNhdGNoKHYpe31pZihvLmlzSFRNTERvY3VtZW50KXt6LnN0eWxlLmRpc3BsYXk9Im5vbmUiO3ouYXBwZW5kQ2hpbGQody5jcmVhdGVDb21tZW50KCIiKSk7bj0oei5nZXRFbGVtZW50c0J5VGFnTmFtZSgiKiIpLmxlbmd0aD4xKTsKdHJ5e3ouaW5uZXJIVE1MPSJmb288L2Zvbz4iO3M9ei5nZXRFbGVtZW50c0J5VGFnTmFtZSgiKiIpO209KHMmJiEhcy5sZW5ndGgmJnNbMF0ubm9kZU5hbWUuY2hhckF0KDApPT0iLyIpO31jYXRjaCh2KXt9by5icm9rZW5TdGFyR0VCVE49bnx8bTt0cnl7ei5pbm5lckhUTUw9JzxhIG5hbWU9IicrYysnIj48L2E+PGIgaWQ9IicrYysnIj48L2I+JzsKby5pZEdldHNOYW1lPXcuZ2V0RWxlbWVudEJ5SWQoYyk9PT16LmZpcnN0Q2hpbGQ7fWNhdGNoKHYpe31pZih6LmdldEVsZW1lbnRzQnlDbGFzc05hbWUpe3RyeXt6LmlubmVySFRNTD0nPGEgY2xhc3M9ImYiPjwvYT48YSBjbGFzcz0iYiI+PC9hPic7ei5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJiIikubGVuZ3RoOwp6LmZpcnN0Q2hpbGQuY2xhc3NOYW1lPSJiIjtxPSh6LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoImIiKS5sZW5ndGghPTIpO31jYXRjaCh2KXt9dHJ5e3ouaW5uZXJIVE1MPSc8YSBjbGFzcz0iYSI+PC9hPjxhIGNsYXNzPSJmIGIgYSI+PC9hPic7eD0oei5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJhIikubGVuZ3RoIT0yKTsKfWNhdGNoKHYpe31vLmJyb2tlbkdFQkNOPXF8fHg7fWlmKHoucXVlcnlTZWxlY3RvckFsbCl7dHJ5e3ouaW5uZXJIVE1MPSJmb288L2Zvbz4iO3M9ei5xdWVyeVNlbGVjdG9yQWxsKCIqIik7by5zdGFyU2VsZWN0c0Nsb3NlZFFTQT0ocyYmISFzLmxlbmd0aCYmc1swXS5ub2RlTmFtZS5jaGFyQXQoMCk9PSIvIik7Cn1jYXRjaCh2KXt9dHJ5e3ouaW5uZXJIVE1MPSc8YSBjbGFzcz0iTWlYIj48L2E+JztvLmJyb2tlbk1peGVkQ2FzZVFTQT0hei5xdWVyeVNlbGVjdG9yQWxsKCIuTWlYIikubGVuZ3RoO31jYXRjaCh2KXt9dHJ5e3ouaW5uZXJIVE1MPSc8c2VsZWN0PjxvcHRpb24gc2VsZWN0ZWQ9InNlbGVjdGVkIj5hPC9vcHRpb24+PC9zZWxlY3Q+JzsKby5icm9rZW5DaGVja2VkUVNBPSh6LnF1ZXJ5U2VsZWN0b3JBbGwoIjpjaGVja2VkIikubGVuZ3RoPT0wKTt9Y2F0Y2godil7fXRyeXt6LmlubmVySFRNTD0nPGEgY2xhc3M9IiI+PC9hPic7by5icm9rZW5FbXB0eUF0dHJpYnV0ZVFTQT0oei5xdWVyeVNlbGVjdG9yQWxsKCdbY2xhc3MqPSIiXScpLmxlbmd0aCE9MCk7Cn1jYXRjaCh2KXt9fXRyeXt6LmlubmVySFRNTD0nPGZvcm0gYWN0aW9uPSJzIj48aW5wdXQgaWQ9ImFjdGlvbiIvPjwvZm9ybT4nO3I9KHouZmlyc3RDaGlsZC5nZXRBdHRyaWJ1dGUoImFjdGlvbiIpIT0icyIpO31jYXRjaCh2KXt9by5uYXRpdmVNYXRjaGVzU2VsZWN0b3I9eS5tYXRjaGVzU2VsZWN0b3J8fHkubW96TWF0Y2hlc1NlbGVjdG9yfHx5LndlYmtpdE1hdGNoZXNTZWxlY3RvcjsKaWYoby5uYXRpdmVNYXRjaGVzU2VsZWN0b3Ipe3RyeXtvLm5hdGl2ZU1hdGNoZXNTZWxlY3Rvci5jYWxsKHksIjpzbGljayIpO28ubmF0aXZlTWF0Y2hlc1NlbGVjdG9yPW51bGw7fWNhdGNoKHYpe319fXRyeXt5LnNsaWNrX2V4cGFuZG89MTtkZWxldGUgeS5zbGlja19leHBhbmRvOwpvLmdldFVJRD10aGlzLmdldFVJREhUTUw7fWNhdGNoKHYpe28uZ2V0VUlEPXRoaXMuZ2V0VUlEWE1MO31wLnJlbW92ZUNoaWxkKHopO3o9cz1wPW51bGw7by5nZXRBdHRyaWJ1dGU9KG8uaXNIVE1MRG9jdW1lbnQmJnIpP2Z1bmN0aW9uKEQsQil7dmFyIEU9dGhpcy5hdHRyaWJ1dGVHZXR0ZXJzW0JdOwppZihFKXtyZXR1cm4gRS5jYWxsKEQpO312YXIgQz1ELmdldEF0dHJpYnV0ZU5vZGUoQik7cmV0dXJuKEMpP0Mubm9kZVZhbHVlOm51bGw7fTpmdW5jdGlvbihDLEIpe3ZhciBEPXRoaXMuYXR0cmlidXRlR2V0dGVyc1tCXTtyZXR1cm4oRCk/RC5jYWxsKEMpOkMuZ2V0QXR0cmlidXRlKEIpOwp9O28uaGFzQXR0cmlidXRlPSh5JiZ0aGlzLmlzTmF0aXZlQ29kZSh5Lmhhc0F0dHJpYnV0ZSkpP2Z1bmN0aW9uKEMsQil7cmV0dXJuIEMuaGFzQXR0cmlidXRlKEIpO306ZnVuY3Rpb24oQyxCKXtDPUMuZ2V0QXR0cmlidXRlTm9kZShCKTtyZXR1cm4gISEoQyYmKEMuc3BlY2lmaWVkfHxDLm5vZGVWYWx1ZSkpOwp9O28uY29udGFpbnM9KHkmJnRoaXMuaXNOYXRpdmVDb2RlKHkuY29udGFpbnMpKT9mdW5jdGlvbihCLEMpe3JldHVybiBCLmNvbnRhaW5zKEMpO306KHkmJnkuY29tcGFyZURvY3VtZW50UG9zaXRpb24pP2Z1bmN0aW9uKEIsQyl7cmV0dXJuIEI9PT1DfHwhIShCLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKEMpJjE2KTsKfTpmdW5jdGlvbihCLEMpe2lmKEMpe2Rve2lmKEM9PT1CKXtyZXR1cm4gdHJ1ZTt9fXdoaWxlKChDPUMucGFyZW50Tm9kZSkpO31yZXR1cm4gZmFsc2U7fTtvLmRvY3VtZW50U29ydGVyPSh5LmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKT9mdW5jdGlvbihDLEIpe2lmKCFDLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9ufHwhQi5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbil7cmV0dXJuIDA7Cn1yZXR1cm4gQy5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihCKSY0Py0xOkM9PT1CPzA6MTt9Oigic291cmNlSW5kZXgiIGluIHkpP2Z1bmN0aW9uKEMsQil7aWYoIUMuc291cmNlSW5kZXh8fCFCLnNvdXJjZUluZGV4KXtyZXR1cm4gMDt9cmV0dXJuIEMuc291cmNlSW5kZXgtQi5zb3VyY2VJbmRleDsKfToody5jcmVhdGVSYW5nZSk/ZnVuY3Rpb24oRSxDKXtpZighRS5vd25lckRvY3VtZW50fHwhQy5vd25lckRvY3VtZW50KXtyZXR1cm4gMDt9dmFyIEQ9RS5vd25lckRvY3VtZW50LmNyZWF0ZVJhbmdlKCksQj1DLm93bmVyRG9jdW1lbnQuY3JlYXRlUmFuZ2UoKTtELnNldFN0YXJ0KEUsMCk7CkQuc2V0RW5kKEUsMCk7Qi5zZXRTdGFydChDLDApO0Iuc2V0RW5kKEMsMCk7cmV0dXJuIEQuY29tcGFyZUJvdW5kYXJ5UG9pbnRzKFJhbmdlLlNUQVJUX1RPX0VORCxCKTt9Om51bGw7eT1udWxsO2ZvcihBIGluIG8pe3RoaXNbQV09b1tBXTt9fTt2YXIgZT0vXihbIy5dPykoKD86W1x3LV0rfFwqKSkkLyxnPS9cWy4rWyokXl09KD86IiJ8JycpP1xdLyxmPXt9OwpqLnNlYXJjaD1mdW5jdGlvbihVLHosSCxzKXt2YXIgcD10aGlzLmZvdW5kPShzKT9udWxsOihIfHxbXSk7aWYoIVUpe3JldHVybiBwO31lbHNle2lmKFUubmF2aWdhdG9yKXtVPVUuZG9jdW1lbnQ7fWVsc2V7aWYoIVUubm9kZVR5cGUpe3JldHVybiBwO319fXZhciBGLE8sVj10aGlzLnVuaXF1ZXM9e30sST0hIShIJiZILmxlbmd0aCkseT0oVS5ub2RlVHlwZT09OSk7CmlmKHRoaXMuZG9jdW1lbnQhPT0oeT9VOlUub3duZXJEb2N1bWVudCkpe3RoaXMuc2V0RG9jdW1lbnQoVSk7fWlmKEkpe2ZvcihPPXAubGVuZ3RoO08tLTspe1ZbdGhpcy5nZXRVSUQocFtPXSldPXRydWU7fX1pZih0eXBlb2Ygej09InN0cmluZyIpe3ZhciByPXoubWF0Y2goZSk7CnNpbXBsZVNlbGVjdG9yczppZihyKXt2YXIgdT1yWzFdLHY9clsyXSxBLEU7aWYoIXUpe2lmKHY9PSIqIiYmdGhpcy5icm9rZW5TdGFyR0VCVE4pe2JyZWFrIHNpbXBsZVNlbGVjdG9yczt9RT1VLmdldEVsZW1lbnRzQnlUYWdOYW1lKHYpO2lmKHMpe3JldHVybiBFWzBdfHxudWxsOwp9Zm9yKE89MDtBPUVbTysrXTspe2lmKCEoSSYmVlt0aGlzLmdldFVJRChBKV0pKXtwLnB1c2goQSk7fX19ZWxzZXtpZih1PT0iIyIpe2lmKCF0aGlzLmlzSFRNTERvY3VtZW50fHwheSl7YnJlYWsgc2ltcGxlU2VsZWN0b3JzO31BPVUuZ2V0RWxlbWVudEJ5SWQodik7CmlmKCFBKXtyZXR1cm4gcDt9aWYodGhpcy5pZEdldHNOYW1lJiZBLmdldEF0dHJpYnV0ZU5vZGUoImlkIikubm9kZVZhbHVlIT12KXticmVhayBzaW1wbGVTZWxlY3RvcnM7fWlmKHMpe3JldHVybiBBfHxudWxsO31pZighKEkmJlZbdGhpcy5nZXRVSUQoQSldKSl7cC5wdXNoKEEpOwp9fWVsc2V7aWYodT09Ii4iKXtpZighdGhpcy5pc0hUTUxEb2N1bWVudHx8KCghVS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lfHx0aGlzLmJyb2tlbkdFQkNOKSYmVS5xdWVyeVNlbGVjdG9yQWxsKSl7YnJlYWsgc2ltcGxlU2VsZWN0b3JzO31pZihVLmdldEVsZW1lbnRzQnlDbGFzc05hbWUmJiF0aGlzLmJyb2tlbkdFQkNOKXtFPVUuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSh2KTsKaWYocyl7cmV0dXJuIEVbMF18fG51bGw7fWZvcihPPTA7QT1FW08rK107KXtpZighKEkmJlZbdGhpcy5nZXRVSUQoQSldKSl7cC5wdXNoKEEpO319fWVsc2V7dmFyIFQ9bmV3IFJlZ0V4cCgiKF58XFxzKSIrZC5lc2NhcGVSZWdFeHAodikrIihcXHN8JCkiKTtFPVUuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIioiKTsKZm9yKE89MDtBPUVbTysrXTspe2NsYXNzTmFtZT1BLmNsYXNzTmFtZTtpZighKGNsYXNzTmFtZSYmVC50ZXN0KGNsYXNzTmFtZSkpKXtjb250aW51ZTt9aWYocyl7cmV0dXJuIEE7fWlmKCEoSSYmVlt0aGlzLmdldFVJRChBKV0pKXtwLnB1c2goQSk7fX19fX19aWYoSSl7dGhpcy5zb3J0KHApOwp9cmV0dXJuKHMpP251bGw6cDt9cXVlcnlTZWxlY3RvcjppZihVLnF1ZXJ5U2VsZWN0b3JBbGwpe2lmKCF0aGlzLmlzSFRNTERvY3VtZW50fHxmW3pdfHx0aGlzLmJyb2tlbk1peGVkQ2FzZVFTQXx8KHRoaXMuYnJva2VuQ2hlY2tlZFFTQSYmei5pbmRleE9mKCI6Y2hlY2tlZCIpPi0xKXx8KHRoaXMuYnJva2VuRW1wdHlBdHRyaWJ1dGVRU0EmJmcudGVzdCh6KSl8fCgheSYmei5pbmRleE9mKCIsIik+LTEpfHxkLmRpc2FibGVRU0Epe2JyZWFrIHF1ZXJ5U2VsZWN0b3I7Cn12YXIgUz16LHg9VTtpZigheSl7dmFyIEM9eC5nZXRBdHRyaWJ1dGUoImlkIiksdD0ic2xpY2tpZF9fIjt4LnNldEF0dHJpYnV0ZSgiaWQiLHQpO1M9IiMiK3QrIiAiK1M7VT14LnBhcmVudE5vZGU7fXRyeXtpZihzKXtyZXR1cm4gVS5xdWVyeVNlbGVjdG9yKFMpfHxudWxsOwp9ZWxzZXtFPVUucXVlcnlTZWxlY3RvckFsbChTKTt9fWNhdGNoKFEpe2Zbel09MTticmVhayBxdWVyeVNlbGVjdG9yO31maW5hbGx5e2lmKCF5KXtpZihDKXt4LnNldEF0dHJpYnV0ZSgiaWQiLEMpO31lbHNle3gucmVtb3ZlQXR0cmlidXRlKCJpZCIpO31VPXg7fX1pZih0aGlzLnN0YXJTZWxlY3RzQ2xvc2VkUVNBKXtmb3IoTz0wOwpBPUVbTysrXTspe2lmKEEubm9kZU5hbWU+IkAiJiYhKEkmJlZbdGhpcy5nZXRVSUQoQSldKSl7cC5wdXNoKEEpO319fWVsc2V7Zm9yKE89MDtBPUVbTysrXTspe2lmKCEoSSYmVlt0aGlzLmdldFVJRChBKV0pKXtwLnB1c2goQSk7fX19aWYoSSl7dGhpcy5zb3J0KHApOwp9cmV0dXJuIHA7fUY9dGhpcy5TbGljay5wYXJzZSh6KTtpZighRi5sZW5ndGgpe3JldHVybiBwO319ZWxzZXtpZih6PT1udWxsKXtyZXR1cm4gcDt9ZWxzZXtpZih6LlNsaWNrKXtGPXo7fWVsc2V7aWYodGhpcy5jb250YWlucyhVLmRvY3VtZW50RWxlbWVudHx8VSx6KSl7KHApP3AucHVzaCh6KTpwPXo7CnJldHVybiBwO31lbHNle3JldHVybiBwO319fX10aGlzLnBvc05USD17fTt0aGlzLnBvc05USExhc3Q9e307dGhpcy5wb3NOVEhUeXBlPXt9O3RoaXMucG9zTlRIVHlwZUxhc3Q9e307dGhpcy5wdXNoPSghSSYmKHN8fChGLmxlbmd0aD09MSYmRi5leHByZXNzaW9uc1swXS5sZW5ndGg9PTEpKSk/dGhpcy5wdXNoQXJyYXk6dGhpcy5wdXNoVUlEOwppZihwPT1udWxsKXtwPVtdO312YXIgTSxMLEs7dmFyIEIsSixELGMscSxHLFc7dmFyIE4sUCxvLHcsUj1GLmV4cHJlc3Npb25zO3NlYXJjaDpmb3IoTz0wOyhQPVJbT10pO08rKyl7Zm9yKE09MDsobz1QW01dKTtNKyspe0I9ImNvbWJpbmF0b3I6IitvLmNvbWJpbmF0b3I7CmlmKCF0aGlzW0JdKXtjb250aW51ZSBzZWFyY2g7fUo9KHRoaXMuaXNYTUxEb2N1bWVudCk/by50YWc6by50YWcudG9VcHBlckNhc2UoKTtEPW8uaWQ7Yz1vLmNsYXNzTGlzdDtxPW8uY2xhc3NlcztHPW8uYXR0cmlidXRlcztXPW8ucHNldWRvczt3PShNPT09KFAubGVuZ3RoLTEpKTsKdGhpcy5iaXRVbmlxdWVzPXt9O2lmKHcpe3RoaXMudW5pcXVlcz1WO3RoaXMuZm91bmQ9cDt9ZWxzZXt0aGlzLnVuaXF1ZXM9e307dGhpcy5mb3VuZD1bXTt9aWYoTT09PTApe3RoaXNbQl0oVSxKLEQscSxHLFcsYyk7aWYocyYmdyYmcC5sZW5ndGgpe2JyZWFrIHNlYXJjaDsKfX1lbHNle2lmKHMmJncpe2ZvcihMPTAsSz1OLmxlbmd0aDtMPEs7TCsrKXt0aGlzW0JdKE5bTF0sSixELHEsRyxXLGMpO2lmKHAubGVuZ3RoKXticmVhayBzZWFyY2g7fX19ZWxzZXtmb3IoTD0wLEs9Ti5sZW5ndGg7TDxLO0wrKyl7dGhpc1tCXShOW0xdLEosRCxxLEcsVyxjKTsKfX19Tj10aGlzLmZvdW5kO319aWYoSXx8KEYuZXhwcmVzc2lvbnMubGVuZ3RoPjEpKXt0aGlzLnNvcnQocCk7fXJldHVybihzKT8ocFswXXx8bnVsbCk6cDt9O2oudWlkeD0xO2oudWlkaz0ic2xpY2stdW5pcXVlaWQiO2ouZ2V0VUlEWE1MPWZ1bmN0aW9uKG0pe3ZhciBjPW0uZ2V0QXR0cmlidXRlKHRoaXMudWlkayk7CmlmKCFjKXtjPXRoaXMudWlkeCsrO20uc2V0QXR0cmlidXRlKHRoaXMudWlkayxjKTt9cmV0dXJuIGM7fTtqLmdldFVJREhUTUw9ZnVuY3Rpb24oYyl7cmV0dXJuIGMudW5pcXVlTnVtYmVyfHwoYy51bmlxdWVOdW1iZXI9dGhpcy51aWR4KyspO307ai5zb3J0PWZ1bmN0aW9uKGMpe2lmKCF0aGlzLmRvY3VtZW50U29ydGVyKXtyZXR1cm4gYzsKfWMuc29ydCh0aGlzLmRvY3VtZW50U29ydGVyKTtyZXR1cm4gYzt9O2ouY2FjaGVOVEg9e307ai5tYXRjaE5USD0vXihbKy1dP1xkKik/KFthLXpdKyk/KFsrLV1cZCspPyQvO2oucGFyc2VOVEhBcmd1bWVudD1mdW5jdGlvbihwKXt2YXIgbj1wLm1hdGNoKHRoaXMubWF0Y2hOVEgpOwppZighbil7cmV0dXJuIGZhbHNlO312YXIgbz1uWzJdfHxmYWxzZTt2YXIgbT1uWzFdfHwxO2lmKG09PSItIil7bT0tMTt9dmFyIGM9K25bM118fDA7bj0obz09Im4iKT97YTptLGI6Y306KG89PSJvZGQiKT97YToyLGI6MX06KG89PSJldmVuIik/e2E6MixiOjB9OnthOjAsYjptfTsKcmV0dXJuKHRoaXMuY2FjaGVOVEhbcF09bik7fTtqLmNyZWF0ZU5USFBzZXVkbz1mdW5jdGlvbihvLG0sYyxuKXtyZXR1cm4gZnVuY3Rpb24ocixwKXt2YXIgdD10aGlzLmdldFVJRChyKTtpZighdGhpc1tjXVt0XSl7dmFyIHo9ci5wYXJlbnROb2RlO2lmKCF6KXtyZXR1cm4gZmFsc2U7Cn12YXIgcT16W29dLHM9MTtpZihuKXt2YXIgeT1yLm5vZGVOYW1lO2Rve2lmKHEubm9kZU5hbWUhPXkpe2NvbnRpbnVlO310aGlzW2NdW3RoaXMuZ2V0VUlEKHEpXT1zKys7fXdoaWxlKChxPXFbbV0pKTt9ZWxzZXtkb3tpZihxLm5vZGVUeXBlIT0xKXtjb250aW51ZTsKfXRoaXNbY11bdGhpcy5nZXRVSUQocSldPXMrKzt9d2hpbGUoKHE9cVttXSkpO319cD1wfHwibiI7dmFyIHU9dGhpcy5jYWNoZU5USFtwXXx8dGhpcy5wYXJzZU5USEFyZ3VtZW50KHApO2lmKCF1KXtyZXR1cm4gZmFsc2U7fXZhciB4PXUuYSx3PXUuYix2PXRoaXNbY11bdF07CmlmKHg9PTApe3JldHVybiB3PT12O31pZih4PjApe2lmKHY8dyl7cmV0dXJuIGZhbHNlO319ZWxzZXtpZih3PHYpe3JldHVybiBmYWxzZTt9fXJldHVybigodi13KSV4KT09MDt9O307ai5wdXNoQXJyYXk9ZnVuY3Rpb24obyxjLHEsbixtLHApe2lmKHRoaXMubWF0Y2hTZWxlY3RvcihvLGMscSxuLG0scCkpe3RoaXMuZm91bmQucHVzaChvKTsKfX07ai5wdXNoVUlEPWZ1bmN0aW9uKHAsYyxyLG8sbSxxKXt2YXIgbj10aGlzLmdldFVJRChwKTtpZighdGhpcy51bmlxdWVzW25dJiZ0aGlzLm1hdGNoU2VsZWN0b3IocCxjLHIsbyxtLHEpKXt0aGlzLnVuaXF1ZXNbbl09dHJ1ZTt0aGlzLmZvdW5kLnB1c2gocCk7fX07CmoubWF0Y2hOb2RlPWZ1bmN0aW9uKG0sbil7aWYodGhpcy5pc0hUTUxEb2N1bWVudCYmdGhpcy5uYXRpdmVNYXRjaGVzU2VsZWN0b3Ipe3RyeXtyZXR1cm4gdGhpcy5uYXRpdmVNYXRjaGVzU2VsZWN0b3IuY2FsbChtLG4ucmVwbGFjZSgvXFsoW149XSspPVxzKihbXiciXF1dKz8pXHMqXF0vZywnWyQxPSIkMiJdJykpOwp9Y2F0Y2godSl7fX12YXIgdD10aGlzLlNsaWNrLnBhcnNlKG4pO2lmKCF0KXtyZXR1cm4gdHJ1ZTt9dmFyIHI9dC5leHByZXNzaW9ucyxwLHM9MCxxO2ZvcihxPTA7KGN1cnJlbnRFeHByZXNzaW9uPXJbcV0pO3ErKyl7aWYoY3VycmVudEV4cHJlc3Npb24ubGVuZ3RoPT0xKXt2YXIgbz1jdXJyZW50RXhwcmVzc2lvblswXTsKaWYodGhpcy5tYXRjaFNlbGVjdG9yKG0sKHRoaXMuaXNYTUxEb2N1bWVudCk/by50YWc6by50YWcudG9VcHBlckNhc2UoKSxvLmlkLG8uY2xhc3NlcyxvLmF0dHJpYnV0ZXMsby5wc2V1ZG9zKSl7cmV0dXJuIHRydWU7fXMrKzt9fWlmKHM9PXQubGVuZ3RoKXtyZXR1cm4gZmFsc2U7Cn12YXIgYz10aGlzLnNlYXJjaCh0aGlzLmRvY3VtZW50LHQpLHY7Zm9yKHE9MDt2PWNbcSsrXTspe2lmKHY9PT1tKXtyZXR1cm4gdHJ1ZTt9fXJldHVybiBmYWxzZTt9O2oubWF0Y2hQc2V1ZG89ZnVuY3Rpb24ocCxjLG8pe3ZhciBtPSJwc2V1ZG86IitjO2lmKHRoaXNbbV0pe3JldHVybiB0aGlzW21dKHAsbyk7Cn12YXIgbj10aGlzLmdldEF0dHJpYnV0ZShwLGMpO3JldHVybihvKT9vPT1uOiEhbjt9O2oubWF0Y2hTZWxlY3Rvcj1mdW5jdGlvbihuLHUsYyxvLHAscil7aWYodSl7dmFyIHM9KHRoaXMuaXNYTUxEb2N1bWVudCk/bi5ub2RlTmFtZTpuLm5vZGVOYW1lLnRvVXBwZXJDYXNlKCk7CmlmKHU9PSIqIil7aWYoczwiQCIpe3JldHVybiBmYWxzZTt9fWVsc2V7aWYocyE9dSl7cmV0dXJuIGZhbHNlO319fWlmKGMmJm4uZ2V0QXR0cmlidXRlKCJpZCIpIT1jKXtyZXR1cm4gZmFsc2U7fXZhciBxLG0sdDtpZihvKXtmb3IocT1vLmxlbmd0aDtxLS07KXt0PW4uZ2V0QXR0cmlidXRlKCJjbGFzcyIpfHxuLmNsYXNzTmFtZTsKaWYoISh0JiZvW3FdLnJlZ2V4cC50ZXN0KHQpKSl7cmV0dXJuIGZhbHNlO319fWlmKHApe2ZvcihxPXAubGVuZ3RoO3EtLTspe209cFtxXTtpZihtLm9wZXJhdG9yPyFtLnRlc3QodGhpcy5nZXRBdHRyaWJ1dGUobixtLmtleSkpOiF0aGlzLmhhc0F0dHJpYnV0ZShuLG0ua2V5KSl7cmV0dXJuIGZhbHNlOwp9fX1pZihyKXtmb3IocT1yLmxlbmd0aDtxLS07KXttPXJbcV07aWYoIXRoaXMubWF0Y2hQc2V1ZG8obixtLmtleSxtLnZhbHVlKSl7cmV0dXJuIGZhbHNlO319fXJldHVybiB0cnVlO307dmFyIGk9eyIgIjpmdW5jdGlvbihwLHYsbSxxLHIsdCxvKXt2YXIgcyx1LG47CmlmKHRoaXMuaXNIVE1MRG9jdW1lbnQpe2dldEJ5SWQ6aWYobSl7dT10aGlzLmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKG0pO2lmKCghdSYmcC5hbGwpfHwodGhpcy5pZEdldHNOYW1lJiZ1JiZ1LmdldEF0dHJpYnV0ZU5vZGUoImlkIikubm9kZVZhbHVlIT1tKSl7bj1wLmFsbFttXTsKaWYoIW4pe3JldHVybjt9aWYoIW5bMF0pe249W25dO31mb3Iocz0wO3U9bltzKytdOyl7dmFyIGM9dS5nZXRBdHRyaWJ1dGVOb2RlKCJpZCIpO2lmKGMmJmMubm9kZVZhbHVlPT1tKXt0aGlzLnB1c2godSx2LG51bGwscSxyLHQpO2JyZWFrO319cmV0dXJuO31pZighdSl7aWYodGhpcy5jb250YWlucyh0aGlzLnJvb3QscCkpe3JldHVybjsKfWVsc2V7YnJlYWsgZ2V0QnlJZDt9fWVsc2V7aWYodGhpcy5kb2N1bWVudCE9PXAmJiF0aGlzLmNvbnRhaW5zKHAsdSkpe3JldHVybjt9fXRoaXMucHVzaCh1LHYsbnVsbCxxLHIsdCk7cmV0dXJuO31nZXRCeUNsYXNzOmlmKHEmJnAuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSYmIXRoaXMuYnJva2VuR0VCQ04pe249cC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKG8uam9pbigiICIpKTsKaWYoIShuJiZuLmxlbmd0aCkpe2JyZWFrIGdldEJ5Q2xhc3M7fWZvcihzPTA7dT1uW3MrK107KXt0aGlzLnB1c2godSx2LG0sbnVsbCxyLHQpO31yZXR1cm47fX1nZXRCeVRhZzp7bj1wLmdldEVsZW1lbnRzQnlUYWdOYW1lKHYpO2lmKCEobiYmbi5sZW5ndGgpKXticmVhayBnZXRCeVRhZzsKfWlmKCF0aGlzLmJyb2tlblN0YXJHRUJUTil7dj1udWxsO31mb3Iocz0wO3U9bltzKytdOyl7dGhpcy5wdXNoKHUsdixtLHEscix0KTt9fX0sIj4iOmZ1bmN0aW9uKG8sYyxxLG4sbSxwKXtpZigobz1vLmZpcnN0Q2hpbGQpKXtkb3tpZihvLm5vZGVUeXBlPT0xKXt0aGlzLnB1c2gobyxjLHEsbixtLHApOwp9fXdoaWxlKChvPW8ubmV4dFNpYmxpbmcpKTt9fSwiKyI6ZnVuY3Rpb24obyxjLHEsbixtLHApe3doaWxlKChvPW8ubmV4dFNpYmxpbmcpKXtpZihvLm5vZGVUeXBlPT0xKXt0aGlzLnB1c2gobyxjLHEsbixtLHApO2JyZWFrO319fSwiXiI6ZnVuY3Rpb24obyxjLHEsbixtLHApe289by5maXJzdENoaWxkOwppZihvKXtpZihvLm5vZGVUeXBlPT0xKXt0aGlzLnB1c2gobyxjLHEsbixtLHApO31lbHNle3RoaXNbImNvbWJpbmF0b3I6KyJdKG8sYyxxLG4sbSxwKTt9fX0sIn4iOmZ1bmN0aW9uKHAsYyxyLG8sbSxxKXt3aGlsZSgocD1wLm5leHRTaWJsaW5nKSl7aWYocC5ub2RlVHlwZSE9MSl7Y29udGludWU7Cn12YXIgbj10aGlzLmdldFVJRChwKTtpZih0aGlzLmJpdFVuaXF1ZXNbbl0pe2JyZWFrO310aGlzLmJpdFVuaXF1ZXNbbl09dHJ1ZTt0aGlzLnB1c2gocCxjLHIsbyxtLHEpO319LCIrKyI6ZnVuY3Rpb24obyxjLHEsbixtLHApe3RoaXNbImNvbWJpbmF0b3I6KyJdKG8sYyxxLG4sbSxwKTsKdGhpc1siY29tYmluYXRvcjohKyJdKG8sYyxxLG4sbSxwKTt9LCJ+fiI6ZnVuY3Rpb24obyxjLHEsbixtLHApe3RoaXNbImNvbWJpbmF0b3I6fiJdKG8sYyxxLG4sbSxwKTt0aGlzWyJjb21iaW5hdG9yOiF+Il0obyxjLHEsbixtLHApO30sIiEiOmZ1bmN0aW9uKG8sYyxxLG4sbSxwKXt3aGlsZSgobz1vLnBhcmVudE5vZGUpKXtpZihvIT09dGhpcy5kb2N1bWVudCl7dGhpcy5wdXNoKG8sYyxxLG4sbSxwKTsKfX19LCIhPiI6ZnVuY3Rpb24obyxjLHEsbixtLHApe289by5wYXJlbnROb2RlO2lmKG8hPT10aGlzLmRvY3VtZW50KXt0aGlzLnB1c2gobyxjLHEsbixtLHApO319LCIhKyI6ZnVuY3Rpb24obyxjLHEsbixtLHApe3doaWxlKChvPW8ucHJldmlvdXNTaWJsaW5nKSl7aWYoby5ub2RlVHlwZT09MSl7dGhpcy5wdXNoKG8sYyxxLG4sbSxwKTsKYnJlYWs7fX19LCIhXiI6ZnVuY3Rpb24obyxjLHEsbixtLHApe289by5sYXN0Q2hpbGQ7aWYobyl7aWYoby5ub2RlVHlwZT09MSl7dGhpcy5wdXNoKG8sYyxxLG4sbSxwKTt9ZWxzZXt0aGlzWyJjb21iaW5hdG9yOiErIl0obyxjLHEsbixtLHApO319fSwiIX4iOmZ1bmN0aW9uKHAsYyxyLG8sbSxxKXt3aGlsZSgocD1wLnByZXZpb3VzU2libGluZykpe2lmKHAubm9kZVR5cGUhPTEpe2NvbnRpbnVlOwp9dmFyIG49dGhpcy5nZXRVSUQocCk7aWYodGhpcy5iaXRVbmlxdWVzW25dKXticmVhazt9dGhpcy5iaXRVbmlxdWVzW25dPXRydWU7dGhpcy5wdXNoKHAsYyxyLG8sbSxxKTt9fX07Zm9yKHZhciBoIGluIGkpe2pbImNvbWJpbmF0b3I6IitoXT1pW2hdO312YXIgaz17ZW1wdHk6ZnVuY3Rpb24oYyl7dmFyIG09Yy5maXJzdENoaWxkOwpyZXR1cm4gIShtJiZtLm5vZGVUeXBlPT0xKSYmIShjLmlubmVyVGV4dHx8Yy50ZXh0Q29udGVudHx8IiIpLmxlbmd0aDt9LG5vdDpmdW5jdGlvbihjLG0pe3JldHVybiAhdGhpcy5tYXRjaE5vZGUoYyxtKTt9LGNvbnRhaW5zOmZ1bmN0aW9uKGMsbSl7cmV0dXJuKGMuaW5uZXJUZXh0fHxjLnRleHRDb250ZW50fHwiIikuaW5kZXhPZihtKT4tMTsKfSwiZmlyc3QtY2hpbGQiOmZ1bmN0aW9uKGMpe3doaWxlKChjPWMucHJldmlvdXNTaWJsaW5nKSl7aWYoYy5ub2RlVHlwZT09MSl7cmV0dXJuIGZhbHNlO319cmV0dXJuIHRydWU7fSwibGFzdC1jaGlsZCI6ZnVuY3Rpb24oYyl7d2hpbGUoKGM9Yy5uZXh0U2libGluZykpe2lmKGMubm9kZVR5cGU9PTEpe3JldHVybiBmYWxzZTsKfX1yZXR1cm4gdHJ1ZTt9LCJvbmx5LWNoaWxkIjpmdW5jdGlvbihuKXt2YXIgbT1uO3doaWxlKChtPW0ucHJldmlvdXNTaWJsaW5nKSl7aWYobS5ub2RlVHlwZT09MSl7cmV0dXJuIGZhbHNlO319dmFyIGM9bjt3aGlsZSgoYz1jLm5leHRTaWJsaW5nKSl7aWYoYy5ub2RlVHlwZT09MSl7cmV0dXJuIGZhbHNlOwp9fXJldHVybiB0cnVlO30sIm50aC1jaGlsZCI6ai5jcmVhdGVOVEhQc2V1ZG8oImZpcnN0Q2hpbGQiLCJuZXh0U2libGluZyIsInBvc05USCIpLCJudGgtbGFzdC1jaGlsZCI6ai5jcmVhdGVOVEhQc2V1ZG8oImxhc3RDaGlsZCIsInByZXZpb3VzU2libGluZyIsInBvc05USExhc3QiKSwibnRoLW9mLXR5cGUiOmouY3JlYXRlTlRIUHNldWRvKCJmaXJzdENoaWxkIiwibmV4dFNpYmxpbmciLCJwb3NOVEhUeXBlIix0cnVlKSwibnRoLWxhc3Qtb2YtdHlwZSI6ai5jcmVhdGVOVEhQc2V1ZG8oImxhc3RDaGlsZCIsInByZXZpb3VzU2libGluZyIsInBvc05USFR5cGVMYXN0Iix0cnVlKSxpbmRleDpmdW5jdGlvbihtLGMpe3JldHVybiB0aGlzWyJwc2V1ZG86bnRoLWNoaWxkIl0obSwiIitjKzEpOwp9LGV2ZW46ZnVuY3Rpb24oYyl7cmV0dXJuIHRoaXNbInBzZXVkbzpudGgtY2hpbGQiXShjLCIybiIpO30sb2RkOmZ1bmN0aW9uKGMpe3JldHVybiB0aGlzWyJwc2V1ZG86bnRoLWNoaWxkIl0oYywiMm4rMSIpO30sImZpcnN0LW9mLXR5cGUiOmZ1bmN0aW9uKGMpe3ZhciBtPWMubm9kZU5hbWU7CndoaWxlKChjPWMucHJldmlvdXNTaWJsaW5nKSl7aWYoYy5ub2RlTmFtZT09bSl7cmV0dXJuIGZhbHNlO319cmV0dXJuIHRydWU7fSwibGFzdC1vZi10eXBlIjpmdW5jdGlvbihjKXt2YXIgbT1jLm5vZGVOYW1lO3doaWxlKChjPWMubmV4dFNpYmxpbmcpKXtpZihjLm5vZGVOYW1lPT1tKXtyZXR1cm4gZmFsc2U7Cn19cmV0dXJuIHRydWU7fSwib25seS1vZi10eXBlIjpmdW5jdGlvbihuKXt2YXIgbT1uLG89bi5ub2RlTmFtZTt3aGlsZSgobT1tLnByZXZpb3VzU2libGluZykpe2lmKG0ubm9kZU5hbWU9PW8pe3JldHVybiBmYWxzZTt9fXZhciBjPW47d2hpbGUoKGM9Yy5uZXh0U2libGluZykpe2lmKGMubm9kZU5hbWU9PW8pe3JldHVybiBmYWxzZTsKfX1yZXR1cm4gdHJ1ZTt9LGVuYWJsZWQ6ZnVuY3Rpb24oYyl7cmV0dXJuICFjLmRpc2FibGVkO30sZGlzYWJsZWQ6ZnVuY3Rpb24oYyl7cmV0dXJuIGMuZGlzYWJsZWQ7fSxjaGVja2VkOmZ1bmN0aW9uKGMpe3JldHVybiBjLmNoZWNrZWR8fGMuc2VsZWN0ZWQ7fSxmb2N1czpmdW5jdGlvbihjKXtyZXR1cm4gdGhpcy5pc0hUTUxEb2N1bWVudCYmdGhpcy5kb2N1bWVudC5hY3RpdmVFbGVtZW50PT09YyYmKGMuaHJlZnx8Yy50eXBlfHx0aGlzLmhhc0F0dHJpYnV0ZShjLCJ0YWJpbmRleCIpKTsKfSxyb290OmZ1bmN0aW9uKGMpe3JldHVybihjPT09dGhpcy5yb290KTt9LHNlbGVjdGVkOmZ1bmN0aW9uKGMpe3JldHVybiBjLnNlbGVjdGVkO319O2Zvcih2YXIgYSBpbiBrKXtqWyJwc2V1ZG86IithXT1rW2FdO31qLmF0dHJpYnV0ZUdldHRlcnM9eyJjbGFzcyI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRBdHRyaWJ1dGUoImNsYXNzIil8fHRoaXMuY2xhc3NOYW1lOwp9LCJmb3IiOmZ1bmN0aW9uKCl7cmV0dXJuKCJodG1sRm9yIiBpbiB0aGlzKT90aGlzLmh0bWxGb3I6dGhpcy5nZXRBdHRyaWJ1dGUoImZvciIpO30saHJlZjpmdW5jdGlvbigpe3JldHVybigiaHJlZiIgaW4gdGhpcyk/dGhpcy5nZXRBdHRyaWJ1dGUoImhyZWYiLDIpOnRoaXMuZ2V0QXR0cmlidXRlKCJocmVmIik7Cn0sc3R5bGU6ZnVuY3Rpb24oKXtyZXR1cm4odGhpcy5zdHlsZSk/dGhpcy5zdHlsZS5jc3NUZXh0OnRoaXMuZ2V0QXR0cmlidXRlKCJzdHlsZSIpO30sdGFiaW5kZXg6ZnVuY3Rpb24oKXt2YXIgYz10aGlzLmdldEF0dHJpYnV0ZU5vZGUoInRhYmluZGV4Iik7cmV0dXJuKGMmJmMuc3BlY2lmaWVkKT9jLm5vZGVWYWx1ZTpudWxsOwp9LHR5cGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRBdHRyaWJ1dGUoInR5cGUiKTt9fTt2YXIgZD1qLlNsaWNrPSh0aGlzLlNsaWNrfHx7fSk7ZC52ZXJzaW9uPSIxLjEuNSI7ZC5zZWFyY2g9ZnVuY3Rpb24obSxuLGMpe3JldHVybiBqLnNlYXJjaChtLG4sYyk7Cn07ZC5maW5kPWZ1bmN0aW9uKGMsbSl7cmV0dXJuIGouc2VhcmNoKGMsbSxudWxsLHRydWUpO307ZC5jb250YWlucz1mdW5jdGlvbihjLG0pe2ouc2V0RG9jdW1lbnQoYyk7cmV0dXJuIGouY29udGFpbnMoYyxtKTt9O2QuZ2V0QXR0cmlidXRlPWZ1bmN0aW9uKG0sYyl7cmV0dXJuIGouZ2V0QXR0cmlidXRlKG0sYyk7Cn07ZC5tYXRjaD1mdW5jdGlvbihtLGMpe2lmKCEobSYmYykpe3JldHVybiBmYWxzZTt9aWYoIWN8fGM9PT1tKXtyZXR1cm4gdHJ1ZTt9ai5zZXREb2N1bWVudChtKTtyZXR1cm4gai5tYXRjaE5vZGUobSxjKTt9O2QuZGVmaW5lQXR0cmlidXRlR2V0dGVyPWZ1bmN0aW9uKGMsbSl7ai5hdHRyaWJ1dGVHZXR0ZXJzW2NdPW07CnJldHVybiB0aGlzO307ZC5sb29rdXBBdHRyaWJ1dGVHZXR0ZXI9ZnVuY3Rpb24oYyl7cmV0dXJuIGouYXR0cmlidXRlR2V0dGVyc1tjXTt9O2QuZGVmaW5lUHNldWRvPWZ1bmN0aW9uKGMsbSl7alsicHNldWRvOiIrY109ZnVuY3Rpb24obyxuKXtyZXR1cm4gbS5jYWxsKG8sbik7Cn07cmV0dXJuIHRoaXM7fTtkLmxvb2t1cFBzZXVkbz1mdW5jdGlvbihjKXt2YXIgbT1qWyJwc2V1ZG86IitjXTtpZihtKXtyZXR1cm4gZnVuY3Rpb24obil7cmV0dXJuIG0uY2FsbCh0aGlzLG4pO307fXJldHVybiBudWxsO307ZC5vdmVycmlkZT1mdW5jdGlvbihtLGMpe2oub3ZlcnJpZGUobSxjKTsKcmV0dXJuIHRoaXM7fTtkLmlzWE1MPWouaXNYTUw7ZC51aWRPZj1mdW5jdGlvbihjKXtyZXR1cm4gai5nZXRVSURIVE1MKGMpO307aWYoIXRoaXMuU2xpY2spe3RoaXMuU2xpY2s9ZDt9fSkuYXBwbHkoKHR5cGVvZiBleHBvcnRzIT0idW5kZWZpbmVkIik/ZXhwb3J0czp0aGlzKTsKdmFyIEVsZW1lbnQ9ZnVuY3Rpb24oYixnKXt2YXIgaD1FbGVtZW50LkNvbnN0cnVjdG9yc1tiXTtpZihoKXtyZXR1cm4gaChnKTt9aWYodHlwZW9mIGIhPSJzdHJpbmciKXtyZXR1cm4gZG9jdW1lbnQuaWQoYikuc2V0KGcpO31pZighZyl7Zz17fTt9aWYoISgvXltcdy1dKyQvKS50ZXN0KGIpKXt2YXIgZT1TbGljay5wYXJzZShiKS5leHByZXNzaW9uc1swXVswXTsKYj0oZS50YWc9PSIqIik/ImRpdiI6ZS50YWc7aWYoZS5pZCYmZy5pZD09bnVsbCl7Zy5pZD1lLmlkO312YXIgZD1lLmF0dHJpYnV0ZXM7aWYoZCl7Zm9yKHZhciBmPTAsYz1kLmxlbmd0aDtmPGM7ZisrKXt2YXIgYT1kW2ZdO2lmKGdbYS5rZXldIT1udWxsKXtjb250aW51ZTsKfWlmKGEudmFsdWUhPW51bGwmJmEub3BlcmF0b3I9PSI9Iil7Z1thLmtleV09YS52YWx1ZTt9ZWxzZXtpZighYS52YWx1ZSYmIWEub3BlcmF0b3Ipe2dbYS5rZXldPXRydWU7fX19fWlmKGUuY2xhc3NMaXN0JiZnWyJjbGFzcyJdPT1udWxsKXtnWyJjbGFzcyJdPWUuY2xhc3NMaXN0LmpvaW4oIiAiKTsKfX1yZXR1cm4gZG9jdW1lbnQubmV3RWxlbWVudChiLGcpO307aWYoQnJvd3Nlci5FbGVtZW50KXtFbGVtZW50LnByb3RvdHlwZT1Ccm93c2VyLkVsZW1lbnQucHJvdG90eXBlO31uZXcgVHlwZSgiRWxlbWVudCIsRWxlbWVudCkubWlycm9yKGZ1bmN0aW9uKGEpe2lmKEFycmF5LnByb3RvdHlwZVthXSl7cmV0dXJuOwp9dmFyIGI9e307YlthXT1mdW5jdGlvbigpe3ZhciBoPVtdLGU9YXJndW1lbnRzLGo9dHJ1ZTtmb3IodmFyIGc9MCxkPXRoaXMubGVuZ3RoO2c8ZDtnKyspe3ZhciBmPXRoaXNbZ10sYz1oW2ddPWZbYV0uYXBwbHkoZixlKTtqPShqJiZ0eXBlT2YoYyk9PSJlbGVtZW50Iik7Cn1yZXR1cm4oaik/bmV3IEVsZW1lbnRzKGgpOmg7fTtFbGVtZW50cy5pbXBsZW1lbnQoYik7fSk7aWYoIUJyb3dzZXIuRWxlbWVudCl7RWxlbWVudC5wYXJlbnQ9T2JqZWN0O0VsZW1lbnQuUHJvdG90eXBlPXsiJGZhbWlseSI6RnVuY3Rpb24uZnJvbSgiZWxlbWVudCIpLmhpZGUoKX07CkVsZW1lbnQubWlycm9yKGZ1bmN0aW9uKGEsYil7RWxlbWVudC5Qcm90b3R5cGVbYV09Yjt9KTt9RWxlbWVudC5Db25zdHJ1Y3RvcnM9e307dmFyIElGcmFtZT1uZXcgVHlwZSgiSUZyYW1lIixmdW5jdGlvbigpe3ZhciBlPUFycmF5LmxpbmsoYXJndW1lbnRzLHtwcm9wZXJ0aWVzOlR5cGUuaXNPYmplY3QsaWZyYW1lOmZ1bmN0aW9uKGYpe3JldHVybihmIT1udWxsKTsKfX0pO3ZhciBjPWUucHJvcGVydGllc3x8e30sYjtpZihlLmlmcmFtZSl7Yj1kb2N1bWVudC5pZChlLmlmcmFtZSk7fXZhciBkPWMub25sb2FkfHxmdW5jdGlvbigpe307ZGVsZXRlIGMub25sb2FkO2MuaWQ9Yy5uYW1lPVtjLmlkLGMubmFtZSxiPyhiLmlkfHxiLm5hbWUpOiJJRnJhbWVfIitTdHJpbmcudW5pcXVlSUQoKV0ucGljaygpOwpiPW5ldyBFbGVtZW50KGJ8fCJpZnJhbWUiLGMpO3ZhciBhPWZ1bmN0aW9uKCl7ZC5jYWxsKGIuY29udGVudFdpbmRvdyk7fTtpZih3aW5kb3cuZnJhbWVzW2MuaWRdKXthKCk7fWVsc2V7Yi5hZGRMaXN0ZW5lcigibG9hZCIsYSk7fXJldHVybiBiO30pO3ZhciBFbGVtZW50cz10aGlzLkVsZW1lbnRzPWZ1bmN0aW9uKGEpe2lmKGEmJmEubGVuZ3RoKXt2YXIgZT17fSxkOwpmb3IodmFyIGM9MDtkPWFbYysrXTspe3ZhciBiPVNsaWNrLnVpZE9mKGQpO2lmKCFlW2JdKXtlW2JdPXRydWU7dGhpcy5wdXNoKGQpO319fX07RWxlbWVudHMucHJvdG90eXBlPXtsZW5ndGg6MH07RWxlbWVudHMucGFyZW50PUFycmF5O25ldyBUeXBlKCJFbGVtZW50cyIsRWxlbWVudHMpLmltcGxlbWVudCh7ZmlsdGVyOmZ1bmN0aW9uKGEsYil7aWYoIWEpe3JldHVybiB0aGlzOwp9cmV0dXJuIG5ldyBFbGVtZW50cyhBcnJheS5maWx0ZXIodGhpcywodHlwZU9mKGEpPT0ic3RyaW5nIik/ZnVuY3Rpb24oYyl7cmV0dXJuIGMubWF0Y2goYSk7fTphLGIpKTt9LnByb3RlY3QoKSxwdXNoOmZ1bmN0aW9uKCl7dmFyIGQ9dGhpcy5sZW5ndGg7Zm9yKHZhciBiPTAsYT1hcmd1bWVudHMubGVuZ3RoOwpiPGE7YisrKXt2YXIgYz1kb2N1bWVudC5pZChhcmd1bWVudHNbYl0pO2lmKGMpe3RoaXNbZCsrXT1jO319cmV0dXJuKHRoaXMubGVuZ3RoPWQpO30ucHJvdGVjdCgpLHVuc2hpZnQ6ZnVuY3Rpb24oKXt2YXIgYj1bXTtmb3IodmFyIGM9MCxhPWFyZ3VtZW50cy5sZW5ndGg7CmM8YTtjKyspe3ZhciBkPWRvY3VtZW50LmlkKGFyZ3VtZW50c1tjXSk7aWYoZCl7Yi5wdXNoKGQpO319cmV0dXJuIEFycmF5LnByb3RvdHlwZS51bnNoaWZ0LmFwcGx5KHRoaXMsYik7fS5wcm90ZWN0KCksY29uY2F0OmZ1bmN0aW9uKCl7dmFyIGI9bmV3IEVsZW1lbnRzKHRoaXMpOwpmb3IodmFyIGM9MCxhPWFyZ3VtZW50cy5sZW5ndGg7YzxhO2MrKyl7dmFyIGQ9YXJndW1lbnRzW2NdO2lmKFR5cGUuaXNFbnVtZXJhYmxlKGQpKXtiLmFwcGVuZChkKTt9ZWxzZXtiLnB1c2goZCk7fX1yZXR1cm4gYjt9LnByb3RlY3QoKSxhcHBlbmQ6ZnVuY3Rpb24oYyl7Zm9yKHZhciBiPTAsYT1jLmxlbmd0aDsKYjxhO2IrKyl7dGhpcy5wdXNoKGNbYl0pO31yZXR1cm4gdGhpczt9LnByb3RlY3QoKSxlbXB0eTpmdW5jdGlvbigpe3doaWxlKHRoaXMubGVuZ3RoKXtkZWxldGUgdGhpc1stLXRoaXMubGVuZ3RoXTt9cmV0dXJuIHRoaXM7fS5wcm90ZWN0KCl9KTsoZnVuY3Rpb24oKXt2YXIgZz1BcnJheS5wcm90b3R5cGUuc3BsaWNlLGI9eyIwIjowLCIxIjoxLGxlbmd0aDoyfTsKZy5jYWxsKGIsMSwxKTtpZihiWzFdPT0xKXtFbGVtZW50cy5pbXBsZW1lbnQoInNwbGljZSIsZnVuY3Rpb24oKXt2YXIgZT10aGlzLmxlbmd0aDtnLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt3aGlsZShlPj10aGlzLmxlbmd0aCl7ZGVsZXRlIHRoaXNbZS0tXTt9cmV0dXJuIHRoaXM7Cn0ucHJvdGVjdCgpKTt9RWxlbWVudHMuaW1wbGVtZW50KEFycmF5LnByb3RvdHlwZSk7QXJyYXkubWlycm9yKEVsZW1lbnRzKTt2YXIgZjt0cnl7dmFyIGE9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiPGlucHV0IG5hbWU9eD4iKTtmPShhLm5hbWU9PSJ4Iik7fWNhdGNoKGMpe312YXIgZD1mdW5jdGlvbihlKXtyZXR1cm4oIiIrZSkucmVwbGFjZSgvJi9nLCImYW1wOyIpLnJlcGxhY2UoLyIvZywiJnF1b3Q7Iik7Cn07RG9jdW1lbnQuaW1wbGVtZW50KHtuZXdFbGVtZW50OmZ1bmN0aW9uKGUsaCl7aWYoaCYmaC5jaGVja2VkIT1udWxsKXtoLmRlZmF1bHRDaGVja2VkPWguY2hlY2tlZDt9aWYoZiYmaCl7ZT0iPCIrZTtpZihoLm5hbWUpe2UrPScgbmFtZT0iJytkKGgubmFtZSkrJyInOwp9aWYoaC50eXBlKXtlKz0nIHR5cGU9IicrZChoLnR5cGUpKyciJzt9ZSs9Ij4iO2RlbGV0ZSBoLm5hbWU7ZGVsZXRlIGgudHlwZTt9cmV0dXJuIHRoaXMuaWQodGhpcy5jcmVhdGVFbGVtZW50KGUpKS5zZXQoaCk7fX0pO30pKCk7RG9jdW1lbnQuaW1wbGVtZW50KHtuZXdUZXh0Tm9kZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5jcmVhdGVUZXh0Tm9kZShhKTsKfSxnZXREb2N1bWVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzO30sZ2V0V2luZG93OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMud2luZG93O30saWQ6KGZ1bmN0aW9uKCl7dmFyIGE9e3N0cmluZzpmdW5jdGlvbihkLGMsYil7ZD1TbGljay5maW5kKGIsIiMiK2QucmVwbGFjZSgvKFxXKS9nLCJcXCQxIikpOwpyZXR1cm4oZCk/YS5lbGVtZW50KGQsYyk6bnVsbDt9LGVsZW1lbnQ6ZnVuY3Rpb24oYixjKXskdWlkKGIpO2lmKCFjJiYhYi4kZmFtaWx5JiYhKC9eKD86b2JqZWN0fGVtYmVkKSQvaSkudGVzdChiLnRhZ05hbWUpKXtPYmplY3QuYXBwZW5kKGIsRWxlbWVudC5Qcm90b3R5cGUpOwp9cmV0dXJuIGI7fSxvYmplY3Q6ZnVuY3Rpb24oYyxkLGIpe2lmKGMudG9FbGVtZW50KXtyZXR1cm4gYS5lbGVtZW50KGMudG9FbGVtZW50KGIpLGQpO31yZXR1cm4gbnVsbDt9fTthLnRleHRub2RlPWEud2hpdGVzcGFjZT1hLndpbmRvdz1hLmRvY3VtZW50PWZ1bmN0aW9uKGIpe3JldHVybiBiOwp9O3JldHVybiBmdW5jdGlvbihjLGUsZCl7aWYoYyYmYy4kZmFtaWx5JiZjLnVpZCl7cmV0dXJuIGM7fXZhciBiPXR5cGVPZihjKTtyZXR1cm4oYVtiXSk/YVtiXShjLGUsZHx8ZG9jdW1lbnQpOm51bGw7fTt9KSgpfSk7aWYod2luZG93LiQ9PW51bGwpe1dpbmRvdy5pbXBsZW1lbnQoIiQiLGZ1bmN0aW9uKGEsYil7cmV0dXJuIGRvY3VtZW50LmlkKGEsYix0aGlzLmRvY3VtZW50KTsKfSk7fVdpbmRvdy5pbXBsZW1lbnQoe2dldERvY3VtZW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZG9jdW1lbnQ7fSxnZXRXaW5kb3c6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpczt9fSk7W0RvY3VtZW50LEVsZW1lbnRdLmludm9rZSgiaW1wbGVtZW50Iix7Z2V0RWxlbWVudHM6ZnVuY3Rpb24oYSl7cmV0dXJuIFNsaWNrLnNlYXJjaCh0aGlzLGEsbmV3IEVsZW1lbnRzKTsKfSxnZXRFbGVtZW50OmZ1bmN0aW9uKGEpe3JldHVybiBkb2N1bWVudC5pZChTbGljay5maW5kKHRoaXMsYSkpO319KTtpZih3aW5kb3cuJCQ9PW51bGwpe1dpbmRvdy5pbXBsZW1lbnQoIiQkIixmdW5jdGlvbihhKXtpZihhcmd1bWVudHMubGVuZ3RoPT0xKXtpZih0eXBlb2YgYT09InN0cmluZyIpe3JldHVybiBTbGljay5zZWFyY2godGhpcy5kb2N1bWVudCxhLG5ldyBFbGVtZW50cyk7Cn1lbHNle2lmKFR5cGUuaXNFbnVtZXJhYmxlKGEpKXtyZXR1cm4gbmV3IEVsZW1lbnRzKGEpO319fXJldHVybiBuZXcgRWxlbWVudHMoYXJndW1lbnRzKTt9KTt9KGZ1bmN0aW9uKCl7dmFyIGs9e30saT17fTt2YXIgbj17aW5wdXQ6ImNoZWNrZWQiLG9wdGlvbjoic2VsZWN0ZWQiLHRleHRhcmVhOiJ2YWx1ZSJ9Owp2YXIgZT1mdW5jdGlvbihwKXtyZXR1cm4oaVtwXXx8KGlbcF09e30pKTt9O3ZhciBqPWZ1bmN0aW9uKHEpe3ZhciBwPXEudWlkO2lmKHEucmVtb3ZlRXZlbnRzKXtxLnJlbW92ZUV2ZW50cygpO31pZihxLmNsZWFyQXR0cmlidXRlcyl7cS5jbGVhckF0dHJpYnV0ZXMoKTsKfWlmKHAhPW51bGwpe2RlbGV0ZSBrW3BdO2RlbGV0ZSBpW3BdO31yZXR1cm4gcTt9O3ZhciBvPVsiZGVmYXVsdFZhbHVlIiwiYWNjZXNzS2V5IiwiY2VsbFBhZGRpbmciLCJjZWxsU3BhY2luZyIsImNvbFNwYW4iLCJmcmFtZUJvcmRlciIsIm1heExlbmd0aCIsInJlYWRPbmx5Iiwicm93U3BhbiIsInRhYkluZGV4IiwidXNlTWFwIl07CnZhciBkPVsiY29tcGFjdCIsIm5vd3JhcCIsImlzbWFwIiwiZGVjbGFyZSIsIm5vc2hhZGUiLCJjaGVja2VkIiwiZGlzYWJsZWQiLCJyZWFkT25seSIsIm11bHRpcGxlIiwic2VsZWN0ZWQiLCJub3Jlc2l6ZSIsImRlZmVyIiwiZGVmYXVsdENoZWNrZWQiXTt2YXIgZz17aHRtbDoiaW5uZXJIVE1MIiwiY2xhc3MiOiJjbGFzc05hbWUiLCJmb3IiOiJodG1sRm9yIix0ZXh0OihmdW5jdGlvbigpe3ZhciBwPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwpyZXR1cm4ocC50ZXh0Q29udGVudD09bnVsbCk/ImlubmVyVGV4dCI6InRleHRDb250ZW50Ijt9KSgpfTt2YXIgbT1bInR5cGUiXTt2YXIgaD1bInZhbHVlIiwiZGVmYXVsdFZhbHVlIl07dmFyIGw9L14oPzpocmVmfHNyY3x1c2VtYXApJC9pO2Q9ZC5hc3NvY2lhdGUoZCk7Cm89by5hc3NvY2lhdGUoby5tYXAoU3RyaW5nLnRvTG93ZXJDYXNlKSk7bT1tLmFzc29jaWF0ZShtKTtPYmplY3QuYXBwZW5kKGcsaC5hc3NvY2lhdGUoaCkpO3ZhciBjPXtiZWZvcmU6ZnVuY3Rpb24ocSxwKXt2YXIgcj1wLnBhcmVudE5vZGU7aWYocil7ci5pbnNlcnRCZWZvcmUocSxwKTsKfX0sYWZ0ZXI6ZnVuY3Rpb24ocSxwKXt2YXIgcj1wLnBhcmVudE5vZGU7aWYocil7ci5pbnNlcnRCZWZvcmUocSxwLm5leHRTaWJsaW5nKTt9fSxib3R0b206ZnVuY3Rpb24ocSxwKXtwLmFwcGVuZENoaWxkKHEpO30sdG9wOmZ1bmN0aW9uKHEscCl7cC5pbnNlcnRCZWZvcmUocSxwLmZpcnN0Q2hpbGQpOwp9fTtjLmluc2lkZT1jLmJvdHRvbTt2YXIgYj1mdW5jdGlvbihzLHIpe2lmKCFzKXtyZXR1cm4gcjt9cz1PYmplY3QuY2xvbmUoU2xpY2sucGFyc2UocykpO3ZhciBxPXMuZXhwcmVzc2lvbnM7Zm9yKHZhciBwPXEubGVuZ3RoO3AtLTspe3FbcF1bMF0uY29tYmluYXRvcj1yOwp9cmV0dXJuIHM7fTtFbGVtZW50LmltcGxlbWVudCh7c2V0OmZ1bmN0aW9uKHIscSl7dmFyIHA9RWxlbWVudC5Qcm9wZXJ0aWVzW3JdOyhwJiZwLnNldCk/cC5zZXQuY2FsbCh0aGlzLHEpOnRoaXMuc2V0UHJvcGVydHkocixxKTt9Lm92ZXJsb2FkU2V0dGVyKCksZ2V0OmZ1bmN0aW9uKHEpe3ZhciBwPUVsZW1lbnQuUHJvcGVydGllc1txXTsKcmV0dXJuKHAmJnAuZ2V0KT9wLmdldC5hcHBseSh0aGlzKTp0aGlzLmdldFByb3BlcnR5KHEpO30ub3ZlcmxvYWRHZXR0ZXIoKSxlcmFzZTpmdW5jdGlvbihxKXt2YXIgcD1FbGVtZW50LlByb3BlcnRpZXNbcV07KHAmJnAuZXJhc2UpP3AuZXJhc2UuYXBwbHkodGhpcyk6dGhpcy5yZW1vdmVQcm9wZXJ0eShxKTsKcmV0dXJuIHRoaXM7fSxzZXRQcm9wZXJ0eTpmdW5jdGlvbihxLHIpe3E9b1txXXx8cTtpZihyPT1udWxsKXtyZXR1cm4gdGhpcy5yZW1vdmVQcm9wZXJ0eShxKTt9dmFyIHA9Z1txXTsocCk/dGhpc1twXT1yOihkW3FdKT90aGlzW3FdPSEhcjp0aGlzLnNldEF0dHJpYnV0ZShxLCIiK3IpOwpyZXR1cm4gdGhpczt9LHNldFByb3BlcnRpZXM6ZnVuY3Rpb24ocCl7Zm9yKHZhciBxIGluIHApe3RoaXMuc2V0UHJvcGVydHkocSxwW3FdKTt9cmV0dXJuIHRoaXM7fSxnZXRQcm9wZXJ0eTpmdW5jdGlvbihxKXtxPW9bcV18fHE7dmFyIHA9Z1txXXx8bVtxXTtyZXR1cm4ocCk/dGhpc1twXTooZFtxXSk/ISF0aGlzW3FdOihsLnRlc3QocSk/dGhpcy5nZXRBdHRyaWJ1dGUocSwyKToocD10aGlzLmdldEF0dHJpYnV0ZU5vZGUocSkpP3Aubm9kZVZhbHVlOm51bGwpfHxudWxsOwp9LGdldFByb3BlcnRpZXM6ZnVuY3Rpb24oKXt2YXIgcD1BcnJheS5mcm9tKGFyZ3VtZW50cyk7cmV0dXJuIHAubWFwKHRoaXMuZ2V0UHJvcGVydHksdGhpcykuYXNzb2NpYXRlKHApO30scmVtb3ZlUHJvcGVydHk6ZnVuY3Rpb24ocSl7cT1vW3FdfHxxO3ZhciBwPWdbcV07CihwKT90aGlzW3BdPSIiOihkW3FdKT90aGlzW3FdPWZhbHNlOnRoaXMucmVtb3ZlQXR0cmlidXRlKHEpO3JldHVybiB0aGlzO30scmVtb3ZlUHJvcGVydGllczpmdW5jdGlvbigpe0FycmF5LmVhY2goYXJndW1lbnRzLHRoaXMucmVtb3ZlUHJvcGVydHksdGhpcyk7cmV0dXJuIHRoaXM7Cn0saGFzQ2xhc3M6ZnVuY3Rpb24ocCl7cmV0dXJuIHRoaXMuY2xhc3NOYW1lLmNsZWFuKCkuY29udGFpbnMocCwiICIpO30sYWRkQ2xhc3M6ZnVuY3Rpb24ocCl7aWYoIXRoaXMuaGFzQ2xhc3MocCkpe3RoaXMuY2xhc3NOYW1lPSh0aGlzLmNsYXNzTmFtZSsiICIrcCkuY2xlYW4oKTsKfXJldHVybiB0aGlzO30scmVtb3ZlQ2xhc3M6ZnVuY3Rpb24ocCl7dGhpcy5jbGFzc05hbWU9dGhpcy5jbGFzc05hbWUucmVwbGFjZShuZXcgUmVnRXhwKCIoXnxcXHMpIitwKyIoPzpcXHN8JCkiKSwiJDEiKTtyZXR1cm4gdGhpczt9LHRvZ2dsZUNsYXNzOmZ1bmN0aW9uKHAscSl7aWYocT09bnVsbCl7cT0hdGhpcy5oYXNDbGFzcyhwKTsKfXJldHVybihxKT90aGlzLmFkZENsYXNzKHApOnRoaXMucmVtb3ZlQ2xhc3MocCk7fSxhZG9wdDpmdW5jdGlvbigpe3ZhciBzPXRoaXMscCx1PUFycmF5LmZsYXR0ZW4oYXJndW1lbnRzKSx0PXUubGVuZ3RoO2lmKHQ+MSl7cz1wPWRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTsKfWZvcih2YXIgcj0wO3I8dDtyKyspe3ZhciBxPWRvY3VtZW50LmlkKHVbcl0sdHJ1ZSk7aWYocSl7cy5hcHBlbmRDaGlsZChxKTt9fWlmKHApe3RoaXMuYXBwZW5kQ2hpbGQocCk7fXJldHVybiB0aGlzO30sYXBwZW5kVGV4dDpmdW5jdGlvbihxLHApe3JldHVybiB0aGlzLmdyYWIodGhpcy5nZXREb2N1bWVudCgpLm5ld1RleHROb2RlKHEpLHApOwp9LGdyYWI6ZnVuY3Rpb24ocSxwKXtjW3B8fCJib3R0b20iXShkb2N1bWVudC5pZChxLHRydWUpLHRoaXMpO3JldHVybiB0aGlzO30saW5qZWN0OmZ1bmN0aW9uKHEscCl7Y1twfHwiYm90dG9tIl0odGhpcyxkb2N1bWVudC5pZChxLHRydWUpKTtyZXR1cm4gdGhpczt9LHJlcGxhY2VzOmZ1bmN0aW9uKHApe3A9ZG9jdW1lbnQuaWQocCx0cnVlKTsKcC5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZCh0aGlzLHApO3JldHVybiB0aGlzO30sd3JhcHM6ZnVuY3Rpb24ocSxwKXtxPWRvY3VtZW50LmlkKHEsdHJ1ZSk7cmV0dXJuIHRoaXMucmVwbGFjZXMocSkuZ3JhYihxLHApO30sZ2V0UHJldmlvdXM6ZnVuY3Rpb24ocCl7cmV0dXJuIGRvY3VtZW50LmlkKFNsaWNrLmZpbmQodGhpcyxiKHAsIiF+IikpKTsKfSxnZXRBbGxQcmV2aW91czpmdW5jdGlvbihwKXtyZXR1cm4gU2xpY2suc2VhcmNoKHRoaXMsYihwLCIhfiIpLG5ldyBFbGVtZW50cyk7fSxnZXROZXh0OmZ1bmN0aW9uKHApe3JldHVybiBkb2N1bWVudC5pZChTbGljay5maW5kKHRoaXMsYihwLCJ+IikpKTt9LGdldEFsbE5leHQ6ZnVuY3Rpb24ocCl7cmV0dXJuIFNsaWNrLnNlYXJjaCh0aGlzLGIocCwifiIpLG5ldyBFbGVtZW50cyk7Cn0sZ2V0Rmlyc3Q6ZnVuY3Rpb24ocCl7cmV0dXJuIGRvY3VtZW50LmlkKFNsaWNrLnNlYXJjaCh0aGlzLGIocCwiPiIpKVswXSk7fSxnZXRMYXN0OmZ1bmN0aW9uKHApe3JldHVybiBkb2N1bWVudC5pZChTbGljay5zZWFyY2godGhpcyxiKHAsIj4iKSkuZ2V0TGFzdCgpKTsKfSxnZXRQYXJlbnQ6ZnVuY3Rpb24ocCl7cmV0dXJuIGRvY3VtZW50LmlkKFNsaWNrLmZpbmQodGhpcyxiKHAsIiEiKSkpO30sZ2V0UGFyZW50czpmdW5jdGlvbihwKXtyZXR1cm4gU2xpY2suc2VhcmNoKHRoaXMsYihwLCIhIiksbmV3IEVsZW1lbnRzKTt9LGdldFNpYmxpbmdzOmZ1bmN0aW9uKHApe3JldHVybiBTbGljay5zZWFyY2godGhpcyxiKHAsIn5+IiksbmV3IEVsZW1lbnRzKTsKfSxnZXRDaGlsZHJlbjpmdW5jdGlvbihwKXtyZXR1cm4gU2xpY2suc2VhcmNoKHRoaXMsYihwLCI+IiksbmV3IEVsZW1lbnRzKTt9LGdldFdpbmRvdzpmdW5jdGlvbigpe3JldHVybiB0aGlzLm93bmVyRG9jdW1lbnQud2luZG93O30sZ2V0RG9jdW1lbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vd25lckRvY3VtZW50Owp9LGdldEVsZW1lbnRCeUlkOmZ1bmN0aW9uKHApe3JldHVybiBkb2N1bWVudC5pZChTbGljay5maW5kKHRoaXMsIiMiKygiIitwKS5yZXBsYWNlKC8oXFcpL2csIlxcJDEiKSkpO30sZ2V0U2VsZWN0ZWQ6ZnVuY3Rpb24oKXt0aGlzLnNlbGVjdGVkSW5kZXg7cmV0dXJuIG5ldyBFbGVtZW50cyhBcnJheS5mcm9tKHRoaXMub3B0aW9ucykuZmlsdGVyKGZ1bmN0aW9uKHApe3JldHVybiBwLnNlbGVjdGVkOwp9KSk7fSx0b1F1ZXJ5U3RyaW5nOmZ1bmN0aW9uKCl7dmFyIHA9W107dGhpcy5nZXRFbGVtZW50cygiaW5wdXQsIHNlbGVjdCwgdGV4dGFyZWEiKS5lYWNoKGZ1bmN0aW9uKHIpe3ZhciBxPXIudHlwZTtpZighci5uYW1lfHxyLmRpc2FibGVkfHxxPT0ic3VibWl0Inx8cT09InJlc2V0Inx8cT09ImZpbGUifHxxPT0iaW1hZ2UiKXtyZXR1cm47Cn12YXIgcz0oci5nZXQoInRhZyIpPT0ic2VsZWN0Iik/ci5nZXRTZWxlY3RlZCgpLm1hcChmdW5jdGlvbih0KXtyZXR1cm4gZG9jdW1lbnQuaWQodCkuZ2V0KCJ2YWx1ZSIpO30pOigocT09InJhZGlvInx8cT09ImNoZWNrYm94IikmJiFyLmNoZWNrZWQpP251bGw6ci5nZXQoInZhbHVlIik7CkFycmF5LmZyb20ocykuZWFjaChmdW5jdGlvbih0KXtpZih0eXBlb2YgdCE9InVuZGVmaW5lZCIpe3AucHVzaChlbmNvZGVVUklDb21wb25lbnQoci5uYW1lKSsiPSIrZW5jb2RlVVJJQ29tcG9uZW50KHQpKTt9fSk7fSk7cmV0dXJuIHAuam9pbigiJiIpO30sZGVzdHJveTpmdW5jdGlvbigpe3ZhciBwPWoodGhpcykuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIioiKTsKQXJyYXkuZWFjaChwLGopO0VsZW1lbnQuZGlzcG9zZSh0aGlzKTtyZXR1cm4gbnVsbDt9LGVtcHR5OmZ1bmN0aW9uKCl7QXJyYXkuZnJvbSh0aGlzLmNoaWxkTm9kZXMpLmVhY2goRWxlbWVudC5kaXNwb3NlKTtyZXR1cm4gdGhpczt9LGRpc3Bvc2U6ZnVuY3Rpb24oKXtyZXR1cm4odGhpcy5wYXJlbnROb2RlKT90aGlzLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcyk6dGhpczsKfSxtYXRjaDpmdW5jdGlvbihwKXtyZXR1cm4gIXB8fFNsaWNrLm1hdGNoKHRoaXMscCk7fX0pO3ZhciBhPWZ1bmN0aW9uKHQscyxxKXtpZighcSl7dC5zZXRBdHRyaWJ1dGVOb2RlKGRvY3VtZW50LmNyZWF0ZUF0dHJpYnV0ZSgiaWQiKSk7fWlmKHQuY2xlYXJBdHRyaWJ1dGVzKXt0LmNsZWFyQXR0cmlidXRlcygpOwp0Lm1lcmdlQXR0cmlidXRlcyhzKTt0LnJlbW92ZUF0dHJpYnV0ZSgidWlkIik7aWYodC5vcHRpb25zKXt2YXIgdT10Lm9wdGlvbnMscD1zLm9wdGlvbnM7Zm9yKHZhciByPXUubGVuZ3RoO3ItLTspe3Vbcl0uc2VsZWN0ZWQ9cFtyXS5zZWxlY3RlZDt9fX12YXIgdj1uW3MudGFnTmFtZS50b0xvd2VyQ2FzZSgpXTsKaWYodiYmc1t2XSl7dFt2XT1zW3ZdO319O0VsZW1lbnQuaW1wbGVtZW50KCJjbG9uZSIsZnVuY3Rpb24ocixwKXtyPXIhPT1mYWxzZTt2YXIgdz10aGlzLmNsb25lTm9kZShyKSxxO2lmKHIpe3ZhciBzPXcuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIioiKSx1PXRoaXMuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIioiKTsKZm9yKHE9cy5sZW5ndGg7cS0tOyl7YShzW3FdLHVbcV0scCk7fX1hKHcsdGhpcyxwKTtpZihCcm93c2VyLmllKXt2YXIgdD13LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJvYmplY3QiKSx2PXRoaXMuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIm9iamVjdCIpO2ZvcihxPXQubGVuZ3RoOwpxLS07KXt0W3FdLm91dGVySFRNTD12W3FdLm91dGVySFRNTDt9fXJldHVybiBkb2N1bWVudC5pZCh3KTt9KTt2YXIgZj17Y29udGFpbnM6ZnVuY3Rpb24ocCl7cmV0dXJuIFNsaWNrLmNvbnRhaW5zKHRoaXMscCk7fX07aWYoIWRvY3VtZW50LmNvbnRhaW5zKXtEb2N1bWVudC5pbXBsZW1lbnQoZik7Cn1pZighZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2IikuY29udGFpbnMpe0VsZW1lbnQuaW1wbGVtZW50KGYpO31bRWxlbWVudCxXaW5kb3csRG9jdW1lbnRdLmludm9rZSgiaW1wbGVtZW50Iix7YWRkTGlzdGVuZXI6ZnVuY3Rpb24ocyxyKXtpZihzPT0idW5sb2FkIil7dmFyIHA9cixxPXRoaXM7CnI9ZnVuY3Rpb24oKXtxLnJlbW92ZUxpc3RlbmVyKCJ1bmxvYWQiLHIpO3AoKTt9O31lbHNle2tbJHVpZCh0aGlzKV09dGhpczt9aWYodGhpcy5hZGRFdmVudExpc3RlbmVyKXt0aGlzLmFkZEV2ZW50TGlzdGVuZXIocyxyLCEhYXJndW1lbnRzWzJdKTt9ZWxzZXt0aGlzLmF0dGFjaEV2ZW50KCJvbiIrcyxyKTsKfXJldHVybiB0aGlzO30scmVtb3ZlTGlzdGVuZXI6ZnVuY3Rpb24ocSxwKXtpZih0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIpe3RoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihxLHAsISFhcmd1bWVudHNbMl0pO31lbHNle3RoaXMuZGV0YWNoRXZlbnQoIm9uIitxLHApOwp9cmV0dXJuIHRoaXM7fSxyZXRyaWV2ZTpmdW5jdGlvbihxLHApe3ZhciBzPWUoJHVpZCh0aGlzKSkscj1zW3FdO2lmKHAhPW51bGwmJnI9PW51bGwpe3I9c1txXT1wO31yZXR1cm4gciE9bnVsbD9yOm51bGw7fSxzdG9yZTpmdW5jdGlvbihxLHApe3ZhciByPWUoJHVpZCh0aGlzKSk7CnJbcV09cDtyZXR1cm4gdGhpczt9LGVsaW1pbmF0ZTpmdW5jdGlvbihwKXt2YXIgcT1lKCR1aWQodGhpcykpO2RlbGV0ZSBxW3BdO3JldHVybiB0aGlzO319KTtpZih3aW5kb3cuYXR0YWNoRXZlbnQmJiF3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcil7d2luZG93LmFkZExpc3RlbmVyKCJ1bmxvYWQiLGZ1bmN0aW9uKCl7T2JqZWN0LmVhY2goayxqKTsKaWYod2luZG93LkNvbGxlY3RHYXJiYWdlKXtDb2xsZWN0R2FyYmFnZSgpO319KTt9fSkoKTtFbGVtZW50LlByb3BlcnRpZXM9e307RWxlbWVudC5Qcm9wZXJ0aWVzLnN0eWxlPXtzZXQ6ZnVuY3Rpb24oYSl7dGhpcy5zdHlsZS5jc3NUZXh0PWE7fSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdHlsZS5jc3NUZXh0Owp9LGVyYXNlOmZ1bmN0aW9uKCl7dGhpcy5zdHlsZS5jc3NUZXh0PSIiO319O0VsZW1lbnQuUHJvcGVydGllcy50YWc9e2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnRhZ05hbWUudG9Mb3dlckNhc2UoKTt9fTsoZnVuY3Rpb24oYSl7aWYoYSE9bnVsbCl7RWxlbWVudC5Qcm9wZXJ0aWVzLm1heGxlbmd0aD1FbGVtZW50LlByb3BlcnRpZXMubWF4TGVuZ3RoPXtnZXQ6ZnVuY3Rpb24oKXt2YXIgYj10aGlzLmdldEF0dHJpYnV0ZSgibWF4TGVuZ3RoIik7CnJldHVybiBiPT1hP251bGw6Yjt9fTt9fSkoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW5wdXQiKS5nZXRBdHRyaWJ1dGUoIm1heExlbmd0aCIpKTtFbGVtZW50LlByb3BlcnRpZXMuaHRtbD0oZnVuY3Rpb24oKXt2YXIgYz1GdW5jdGlvbi5hdHRlbXB0KGZ1bmN0aW9uKCl7dmFyIGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidGFibGUiKTsKZS5pbm5lckhUTUw9Ijx0cj48dGQ+PC90ZD48L3RyPiI7fSk7dmFyIGQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7dmFyIGE9e3RhYmxlOlsxLCI8dGFibGU+IiwiPC90YWJsZT4iXSxzZWxlY3Q6WzEsIjxzZWxlY3Q+IiwiPC9zZWxlY3Q+Il0sdGJvZHk6WzIsIjx0YWJsZT48dGJvZHk+IiwiPC90Ym9keT48L3RhYmxlPiJdLHRyOlszLCI8dGFibGU+PHRib2R5Pjx0cj4iLCI8L3RyPjwvdGJvZHk+PC90YWJsZT4iXX07CmEudGhlYWQ9YS50Zm9vdD1hLnRib2R5O3ZhciBiPXtzZXQ6ZnVuY3Rpb24oKXt2YXIgZj1BcnJheS5mbGF0dGVuKGFyZ3VtZW50cykuam9pbigiIik7dmFyIGc9KCFjJiZhW3RoaXMuZ2V0KCJ0YWciKV0pO2lmKGcpe3ZhciBoPWQ7aC5pbm5lckhUTUw9Z1sxXStmK2dbMl07CmZvcih2YXIgZT1nWzBdO2UtLTspe2g9aC5maXJzdENoaWxkO310aGlzLmVtcHR5KCkuYWRvcHQoaC5jaGlsZE5vZGVzKTt9ZWxzZXt0aGlzLmlubmVySFRNTD1mO319fTtiLmVyYXNlPWIuc2V0O3JldHVybiBiO30pKCk7KGZ1bmN0aW9uKCl7dmFyIGM9ZG9jdW1lbnQuaHRtbDsKRWxlbWVudC5Qcm9wZXJ0aWVzLnN0eWxlcz17c2V0OmZ1bmN0aW9uKGYpe3RoaXMuc2V0U3R5bGVzKGYpO319O3ZhciBlPShjLnN0eWxlLm9wYWNpdHkhPW51bGwpO3ZhciBkPS9hbHBoYVwob3BhY2l0eT0oW1xkLl0rKVwpL2k7dmFyIGI9ZnVuY3Rpb24oZyxmKXtpZighZy5jdXJyZW50U3R5bGV8fCFnLmN1cnJlbnRTdHlsZS5oYXNMYXlvdXQpe2cuc3R5bGUuem9vbT0xOwp9aWYoZSl7Zy5zdHlsZS5vcGFjaXR5PWY7fWVsc2V7Zj0oZioxMDApLmxpbWl0KDAsMTAwKS5yb3VuZCgpO2Y9KGY9PTEwMCk/IiI6ImFscGhhKG9wYWNpdHk9IitmKyIpIjt2YXIgaD1nLnN0eWxlLmZpbHRlcnx8Zy5nZXRDb21wdXRlZFN0eWxlKCJmaWx0ZXIiKXx8IiI7Cmcuc3R5bGUuZmlsdGVyPWQudGVzdChoKT9oLnJlcGxhY2UoZCxmKTpoK2Y7fX07RWxlbWVudC5Qcm9wZXJ0aWVzLm9wYWNpdHk9e3NldDpmdW5jdGlvbihnKXt2YXIgZj10aGlzLnN0eWxlLnZpc2liaWxpdHk7aWYoZz09MCYmZiE9ImhpZGRlbiIpe3RoaXMuc3R5bGUudmlzaWJpbGl0eT0iaGlkZGVuIjsKfWVsc2V7aWYoZyE9MCYmZiE9InZpc2libGUiKXt0aGlzLnN0eWxlLnZpc2liaWxpdHk9InZpc2libGUiO319Yih0aGlzLGcpO30sZ2V0OihlKT9mdW5jdGlvbigpe3ZhciBmPXRoaXMuc3R5bGUub3BhY2l0eXx8dGhpcy5nZXRDb21wdXRlZFN0eWxlKCJvcGFjaXR5Iik7CnJldHVybihmPT0iIik/MTpmO306ZnVuY3Rpb24oKXt2YXIgZixnPSh0aGlzLnN0eWxlLmZpbHRlcnx8dGhpcy5nZXRDb21wdXRlZFN0eWxlKCJmaWx0ZXIiKSk7aWYoZyl7Zj1nLm1hdGNoKGQpO31yZXR1cm4oZj09bnVsbHx8Zz09bnVsbCk/MTooZlsxXS8xMDApO319Owp2YXIgYT0oYy5zdHlsZS5jc3NGbG9hdD09bnVsbCk/InN0eWxlRmxvYXQiOiJjc3NGbG9hdCI7RWxlbWVudC5pbXBsZW1lbnQoe2dldENvbXB1dGVkU3R5bGU6ZnVuY3Rpb24oaCl7aWYodGhpcy5jdXJyZW50U3R5bGUpe3JldHVybiB0aGlzLmN1cnJlbnRTdHlsZVtoLmNhbWVsQ2FzZSgpXTsKfXZhciBnPUVsZW1lbnQuZ2V0RG9jdW1lbnQodGhpcykuZGVmYXVsdFZpZXcsZj1nP2cuZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLG51bGwpOm51bGw7cmV0dXJuKGYpP2YuZ2V0UHJvcGVydHlWYWx1ZSgoaD09YSk/ImZsb2F0IjpoLmh5cGhlbmF0ZSgpKTpudWxsO30sc2V0T3BhY2l0eTpmdW5jdGlvbihmKXtiKHRoaXMsZik7CnJldHVybiB0aGlzO30sZ2V0T3BhY2l0eTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldCgib3BhY2l0eSIpO30sc2V0U3R5bGU6ZnVuY3Rpb24oZyxmKXtzd2l0Y2goZyl7Y2FzZSJvcGFjaXR5IjpyZXR1cm4gdGhpcy5zZXQoIm9wYWNpdHkiLHBhcnNlRmxvYXQoZikpOwpjYXNlImZsb2F0IjpnPWE7fWc9Zy5jYW1lbENhc2UoKTtpZih0eXBlT2YoZikhPSJzdHJpbmciKXt2YXIgaD0oRWxlbWVudC5TdHlsZXNbZ118fCJAIikuc3BsaXQoIiAiKTtmPUFycmF5LmZyb20oZikubWFwKGZ1bmN0aW9uKGssail7aWYoIWhbal0pe3JldHVybiIiOwp9cmV0dXJuKHR5cGVPZihrKT09Im51bWJlciIpP2hbal0ucmVwbGFjZSgiQCIsTWF0aC5yb3VuZChrKSk6azt9KS5qb2luKCIgIik7fWVsc2V7aWYoZj09U3RyaW5nKE51bWJlcihmKSkpe2Y9TWF0aC5yb3VuZChmKTt9fXRoaXMuc3R5bGVbZ109ZjtyZXR1cm4gdGhpczsKfSxnZXRTdHlsZTpmdW5jdGlvbihsKXtzd2l0Y2gobCl7Y2FzZSJvcGFjaXR5IjpyZXR1cm4gdGhpcy5nZXQoIm9wYWNpdHkiKTtjYXNlImZsb2F0IjpsPWE7fWw9bC5jYW1lbENhc2UoKTt2YXIgZj10aGlzLnN0eWxlW2xdO2lmKCFmfHxsPT0iekluZGV4Iil7Zj1bXTsKZm9yKHZhciBrIGluIEVsZW1lbnQuU2hvcnRTdHlsZXMpe2lmKGwhPWspe2NvbnRpbnVlO31mb3IodmFyIGogaW4gRWxlbWVudC5TaG9ydFN0eWxlc1trXSl7Zi5wdXNoKHRoaXMuZ2V0U3R5bGUoaikpO31yZXR1cm4gZi5qb2luKCIgIik7fWY9dGhpcy5nZXRDb21wdXRlZFN0eWxlKGwpOwp9aWYoZil7Zj1TdHJpbmcoZik7dmFyIGg9Zi5tYXRjaCgvcmdiYT9cKFtcZFxzLF0rXCkvKTtpZihoKXtmPWYucmVwbGFjZShoWzBdLGhbMF0ucmdiVG9IZXgoKSk7fX1pZihCcm93c2VyLm9wZXJhfHwoQnJvd3Nlci5pZSYmaXNOYU4ocGFyc2VGbG9hdChmKSkpKXtpZigoL14oaGVpZ2h0fHdpZHRoKSQvKS50ZXN0KGwpKXt2YXIgZz0obD09IndpZHRoIik/WyJsZWZ0IiwicmlnaHQiXTpbInRvcCIsImJvdHRvbSJdLGk9MDsKZy5lYWNoKGZ1bmN0aW9uKG0pe2krPXRoaXMuZ2V0U3R5bGUoImJvcmRlci0iK20rIi13aWR0aCIpLnRvSW50KCkrdGhpcy5nZXRTdHlsZSgicGFkZGluZy0iK20pLnRvSW50KCk7fSx0aGlzKTtyZXR1cm4gdGhpc1sib2Zmc2V0IitsLmNhcGl0YWxpemUoKV0taSsicHgiOwp9aWYoQnJvd3Nlci5vcGVyYSYmU3RyaW5nKGYpLmluZGV4T2YoInB4IikhPS0xKXtyZXR1cm4gZjt9aWYoKC9eYm9yZGVyKC4rKVdpZHRofG1hcmdpbnxwYWRkaW5nLykudGVzdChsKSl7cmV0dXJuIjBweCI7fX1yZXR1cm4gZjt9LHNldFN0eWxlczpmdW5jdGlvbihnKXtmb3IodmFyIGYgaW4gZyl7dGhpcy5zZXRTdHlsZShmLGdbZl0pOwp9cmV0dXJuIHRoaXM7fSxnZXRTdHlsZXM6ZnVuY3Rpb24oKXt2YXIgZj17fTtBcnJheS5mbGF0dGVuKGFyZ3VtZW50cykuZWFjaChmdW5jdGlvbihnKXtmW2ddPXRoaXMuZ2V0U3R5bGUoZyk7fSx0aGlzKTtyZXR1cm4gZjt9fSk7RWxlbWVudC5TdHlsZXM9e2xlZnQ6IkBweCIsdG9wOiJAcHgiLGJvdHRvbToiQHB4IixyaWdodDoiQHB4Iix3aWR0aDoiQHB4IixoZWlnaHQ6IkBweCIsbWF4V2lkdGg6IkBweCIsbWF4SGVpZ2h0OiJAcHgiLG1pbldpZHRoOiJAcHgiLG1pbkhlaWdodDoiQHB4IixiYWNrZ3JvdW5kQ29sb3I6InJnYihALCBALCBAKSIsYmFja2dyb3VuZFBvc2l0aW9uOiJAcHggQHB4Iixjb2xvcjoicmdiKEAsIEAsIEApIixmb250U2l6ZToiQHB4IixsZXR0ZXJTcGFjaW5nOiJAcHgiLGxpbmVIZWlnaHQ6IkBweCIsY2xpcDoicmVjdChAcHggQHB4IEBweCBAcHgpIixtYXJnaW46IkBweCBAcHggQHB4IEBweCIscGFkZGluZzoiQHB4IEBweCBAcHggQHB4Iixib3JkZXI6IkBweCBAIHJnYihALCBALCBAKSBAcHggQCByZ2IoQCwgQCwgQCkgQHB4IEAgcmdiKEAsIEAsIEApIixib3JkZXJXaWR0aDoiQHB4IEBweCBAcHggQHB4Iixib3JkZXJTdHlsZToiQCBAIEAgQCIsYm9yZGVyQ29sb3I6InJnYihALCBALCBAKSByZ2IoQCwgQCwgQCkgcmdiKEAsIEAsIEApIHJnYihALCBALCBAKSIsekluZGV4OiJAIix6b29tOiJAIixmb250V2VpZ2h0OiJAIix0ZXh0SW5kZW50OiJAcHgiLG9wYWNpdHk6IkAifTsKRWxlbWVudC5TaG9ydFN0eWxlcz17bWFyZ2luOnt9LHBhZGRpbmc6e30sYm9yZGVyOnt9LGJvcmRlcldpZHRoOnt9LGJvcmRlclN0eWxlOnt9LGJvcmRlckNvbG9yOnt9fTtbIlRvcCIsIlJpZ2h0IiwiQm90dG9tIiwiTGVmdCJdLmVhY2goZnVuY3Rpb24obCl7dmFyIGs9RWxlbWVudC5TaG9ydFN0eWxlczsKdmFyIGc9RWxlbWVudC5TdHlsZXM7WyJtYXJnaW4iLCJwYWRkaW5nIl0uZWFjaChmdW5jdGlvbihtKXt2YXIgbj1tK2w7a1ttXVtuXT1nW25dPSJAcHgiO30pO3ZhciBqPSJib3JkZXIiK2w7ay5ib3JkZXJbal09Z1tqXT0iQHB4IEAgcmdiKEAsIEAsIEApIjt2YXIgaT1qKyJXaWR0aCIsZj1qKyJTdHlsZSIsaD1qKyJDb2xvciI7Cmtbal09e307ay5ib3JkZXJXaWR0aFtpXT1rW2pdW2ldPWdbaV09IkBweCI7ay5ib3JkZXJTdHlsZVtmXT1rW2pdW2ZdPWdbZl09IkAiO2suYm9yZGVyQ29sb3JbaF09a1tqXVtoXT1nW2hdPSJyZ2IoQCwgQCwgQCkiO30pO30pKCk7KGZ1bmN0aW9uKCl7RWxlbWVudC5Qcm9wZXJ0aWVzLmV2ZW50cz17c2V0OmZ1bmN0aW9uKGIpe3RoaXMuYWRkRXZlbnRzKGIpOwp9fTtbRWxlbWVudCxXaW5kb3csRG9jdW1lbnRdLmludm9rZSgiaW1wbGVtZW50Iix7YWRkRXZlbnQ6ZnVuY3Rpb24oZixoKXt2YXIgaT10aGlzLnJldHJpZXZlKCJldmVudHMiLHt9KTtpZighaVtmXSl7aVtmXT17a2V5czpbXSx2YWx1ZXM6W119O31pZihpW2ZdLmtleXMuY29udGFpbnMoaCkpe3JldHVybiB0aGlzOwp9aVtmXS5rZXlzLnB1c2goaCk7dmFyIGc9ZixiPUVsZW1lbnQuRXZlbnRzW2ZdLGQ9aCxqPXRoaXM7aWYoYil7aWYoYi5vbkFkZCl7Yi5vbkFkZC5jYWxsKHRoaXMsaCk7fWlmKGIuY29uZGl0aW9uKXtkPWZ1bmN0aW9uKGspe2lmKGIuY29uZGl0aW9uLmNhbGwodGhpcyxrKSl7cmV0dXJuIGguY2FsbCh0aGlzLGspOwp9cmV0dXJuIHRydWU7fTt9Zz1iLmJhc2V8fGc7fXZhciBlPWZ1bmN0aW9uKCl7cmV0dXJuIGguY2FsbChqKTt9O3ZhciBjPUVsZW1lbnQuTmF0aXZlRXZlbnRzW2ddO2lmKGMpe2lmKGM9PTIpe2U9ZnVuY3Rpb24oayl7az1uZXcgRXZlbnQoayxqLmdldFdpbmRvdygpKTsKaWYoZC5jYWxsKGosayk9PT1mYWxzZSl7ay5zdG9wKCk7fX07fXRoaXMuYWRkTGlzdGVuZXIoZyxlLGFyZ3VtZW50c1syXSk7fWlbZl0udmFsdWVzLnB1c2goZSk7cmV0dXJuIHRoaXM7fSxyZW1vdmVFdmVudDpmdW5jdGlvbihlLGQpe3ZhciBjPXRoaXMucmV0cmlldmUoImV2ZW50cyIpOwppZighY3x8IWNbZV0pe3JldHVybiB0aGlzO312YXIgaD1jW2VdO3ZhciBiPWgua2V5cy5pbmRleE9mKGQpO2lmKGI9PS0xKXtyZXR1cm4gdGhpczt9dmFyIGc9aC52YWx1ZXNbYl07ZGVsZXRlIGgua2V5c1tiXTtkZWxldGUgaC52YWx1ZXNbYl07dmFyIGY9RWxlbWVudC5FdmVudHNbZV07CmlmKGYpe2lmKGYub25SZW1vdmUpe2Yub25SZW1vdmUuY2FsbCh0aGlzLGQpO31lPWYuYmFzZXx8ZTt9cmV0dXJuKEVsZW1lbnQuTmF0aXZlRXZlbnRzW2VdKT90aGlzLnJlbW92ZUxpc3RlbmVyKGUsZyxhcmd1bWVudHNbMl0pOnRoaXM7fSxhZGRFdmVudHM6ZnVuY3Rpb24oYil7Zm9yKHZhciBjIGluIGIpe3RoaXMuYWRkRXZlbnQoYyxiW2NdKTsKfXJldHVybiB0aGlzO30scmVtb3ZlRXZlbnRzOmZ1bmN0aW9uKGIpe3ZhciBkO2lmKHR5cGVPZihiKT09Im9iamVjdCIpe2ZvcihkIGluIGIpe3RoaXMucmVtb3ZlRXZlbnQoZCxiW2RdKTt9cmV0dXJuIHRoaXM7fXZhciBjPXRoaXMucmV0cmlldmUoImV2ZW50cyIpOwppZighYyl7cmV0dXJuIHRoaXM7fWlmKCFiKXtmb3IoZCBpbiBjKXt0aGlzLnJlbW92ZUV2ZW50cyhkKTt9dGhpcy5lbGltaW5hdGUoImV2ZW50cyIpO31lbHNle2lmKGNbYl0pe2NbYl0ua2V5cy5lYWNoKGZ1bmN0aW9uKGUpe3RoaXMucmVtb3ZlRXZlbnQoYixlKTt9LHRoaXMpOwpkZWxldGUgY1tiXTt9fXJldHVybiB0aGlzO30sZmlyZUV2ZW50OmZ1bmN0aW9uKGUsYyxiKXt2YXIgZD10aGlzLnJldHJpZXZlKCJldmVudHMiKTtpZighZHx8IWRbZV0pe3JldHVybiB0aGlzO31jPUFycmF5LmZyb20oYyk7ZFtlXS5rZXlzLmVhY2goZnVuY3Rpb24oZil7aWYoYil7Zi5kZWxheShiLHRoaXMsYyk7Cn1lbHNle2YuYXBwbHkodGhpcyxjKTt9fSx0aGlzKTtyZXR1cm4gdGhpczt9LGNsb25lRXZlbnRzOmZ1bmN0aW9uKGUsZCl7ZT1kb2N1bWVudC5pZChlKTt2YXIgYz1lLnJldHJpZXZlKCJldmVudHMiKTtpZighYyl7cmV0dXJuIHRoaXM7fWlmKCFkKXtmb3IodmFyIGIgaW4gYyl7dGhpcy5jbG9uZUV2ZW50cyhlLGIpOwp9fWVsc2V7aWYoY1tkXSl7Y1tkXS5rZXlzLmVhY2goZnVuY3Rpb24oZil7dGhpcy5hZGRFdmVudChkLGYpO30sdGhpcyk7fX1yZXR1cm4gdGhpczt9fSk7RWxlbWVudC5OYXRpdmVFdmVudHM9e2NsaWNrOjIsZGJsY2xpY2s6Mixtb3VzZXVwOjIsbW91c2Vkb3duOjIsY29udGV4dG1lbnU6Mixtb3VzZXdoZWVsOjIsRE9NTW91c2VTY3JvbGw6Mixtb3VzZW92ZXI6Mixtb3VzZW91dDoyLG1vdXNlbW92ZToyLHNlbGVjdHN0YXJ0OjIsc2VsZWN0ZW5kOjIsa2V5ZG93bjoyLGtleXByZXNzOjIsa2V5dXA6MixvcmllbnRhdGlvbmNoYW5nZToyLHRvdWNoc3RhcnQ6Mix0b3VjaG1vdmU6Mix0b3VjaGVuZDoyLHRvdWNoY2FuY2VsOjIsZ2VzdHVyZXN0YXJ0OjIsZ2VzdHVyZWNoYW5nZToyLGdlc3R1cmVlbmQ6Mixmb2N1czoyLGJsdXI6MixjaGFuZ2U6MixyZXNldDoyLHNlbGVjdDoyLHN1Ym1pdDoyLGxvYWQ6Mix1bmxvYWQ6MSxiZWZvcmV1bmxvYWQ6MixyZXNpemU6MSxtb3ZlOjEsRE9NQ29udGVudExvYWRlZDoxLHJlYWR5c3RhdGVjaGFuZ2U6MSxlcnJvcjoxLGFib3J0OjEsc2Nyb2xsOjF9Owp2YXIgYT1mdW5jdGlvbihiKXt2YXIgYz1iLnJlbGF0ZWRUYXJnZXQ7aWYoYz09bnVsbCl7cmV0dXJuIHRydWU7fWlmKCFjKXtyZXR1cm4gZmFsc2U7fXJldHVybihjIT10aGlzJiZjLnByZWZpeCE9Inh1bCImJnR5cGVPZih0aGlzKSE9ImRvY3VtZW50IiYmIXRoaXMuY29udGFpbnMoYykpOwp9O0VsZW1lbnQuRXZlbnRzPXttb3VzZWVudGVyOntiYXNlOiJtb3VzZW92ZXIiLGNvbmRpdGlvbjphfSxtb3VzZWxlYXZlOntiYXNlOiJtb3VzZW91dCIsY29uZGl0aW9uOmF9LG1vdXNld2hlZWw6e2Jhc2U6KEJyb3dzZXIuZmlyZWZveCk/IkRPTU1vdXNlU2Nyb2xsIjoibW91c2V3aGVlbCJ9fTsKfSkoKTsoZnVuY3Rpb24oKXt2YXIgaD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKSxlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO2guc3R5bGUuaGVpZ2h0PSIwIjtoLmFwcGVuZENoaWxkKGUpO3ZhciBkPShlLm9mZnNldFBhcmVudD09PWgpO2g9ZT1udWxsOwp2YXIgbD1mdW5jdGlvbihtKXtyZXR1cm4gayhtLCJwb3NpdGlvbiIpIT0ic3RhdGljInx8YShtKTt9O3ZhciBpPWZ1bmN0aW9uKG0pe3JldHVybiBsKG0pfHwoL14oPzp0YWJsZXx0ZHx0aCkkL2kpLnRlc3QobS50YWdOYW1lKTt9O0VsZW1lbnQuaW1wbGVtZW50KHtzY3JvbGxUbzpmdW5jdGlvbihtLG4pe2lmKGEodGhpcykpe3RoaXMuZ2V0V2luZG93KCkuc2Nyb2xsVG8obSxuKTsKfWVsc2V7dGhpcy5zY3JvbGxMZWZ0PW07dGhpcy5zY3JvbGxUb3A9bjt9cmV0dXJuIHRoaXM7fSxnZXRTaXplOmZ1bmN0aW9uKCl7aWYoYSh0aGlzKSl7cmV0dXJuIHRoaXMuZ2V0V2luZG93KCkuZ2V0U2l6ZSgpO31yZXR1cm57eDp0aGlzLm9mZnNldFdpZHRoLHk6dGhpcy5vZmZzZXRIZWlnaHR9Owp9LGdldFNjcm9sbFNpemU6ZnVuY3Rpb24oKXtpZihhKHRoaXMpKXtyZXR1cm4gdGhpcy5nZXRXaW5kb3coKS5nZXRTY3JvbGxTaXplKCk7fXJldHVybnt4OnRoaXMuc2Nyb2xsV2lkdGgseTp0aGlzLnNjcm9sbEhlaWdodH07fSxnZXRTY3JvbGw6ZnVuY3Rpb24oKXtpZihhKHRoaXMpKXtyZXR1cm4gdGhpcy5nZXRXaW5kb3coKS5nZXRTY3JvbGwoKTsKfXJldHVybnt4OnRoaXMuc2Nyb2xsTGVmdCx5OnRoaXMuc2Nyb2xsVG9wfTt9LGdldFNjcm9sbHM6ZnVuY3Rpb24oKXt2YXIgbj10aGlzLnBhcmVudE5vZGUsbT17eDowLHk6MH07d2hpbGUobiYmIWEobikpe20ueCs9bi5zY3JvbGxMZWZ0O20ueSs9bi5zY3JvbGxUb3A7Cm49bi5wYXJlbnROb2RlO31yZXR1cm4gbTt9LGdldE9mZnNldFBhcmVudDpkP2Z1bmN0aW9uKCl7dmFyIG09dGhpcztpZihhKG0pfHxrKG0sInBvc2l0aW9uIik9PSJmaXhlZCIpe3JldHVybiBudWxsO312YXIgbj0oayhtLCJwb3NpdGlvbiIpPT0ic3RhdGljIik/aTpsOwp3aGlsZSgobT1tLnBhcmVudE5vZGUpKXtpZihuKG0pKXtyZXR1cm4gbTt9fXJldHVybiBudWxsO306ZnVuY3Rpb24oKXt2YXIgbT10aGlzO2lmKGEobSl8fGsobSwicG9zaXRpb24iKT09ImZpeGVkIil7cmV0dXJuIG51bGw7fXRyeXtyZXR1cm4gbS5vZmZzZXRQYXJlbnQ7Cn1jYXRjaChuKXt9cmV0dXJuIG51bGw7fSxnZXRPZmZzZXRzOmZ1bmN0aW9uKCl7aWYodGhpcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QmJiFCcm93c2VyLlBsYXRmb3JtLmlvcyl7dmFyIHI9dGhpcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxvPWRvY3VtZW50LmlkKHRoaXMuZ2V0RG9jdW1lbnQoKS5kb2N1bWVudEVsZW1lbnQpLHE9by5nZXRTY3JvbGwoKSx0PXRoaXMuZ2V0U2Nyb2xscygpLHM9KGsodGhpcywicG9zaXRpb24iKT09ImZpeGVkIik7CnJldHVybnt4OnIubGVmdC50b0ludCgpK3QueCsoKHMpPzA6cS54KS1vLmNsaWVudExlZnQseTpyLnRvcC50b0ludCgpK3QueSsoKHMpPzA6cS55KS1vLmNsaWVudFRvcH07fXZhciBuPXRoaXMsbT17eDowLHk6MH07aWYoYSh0aGlzKSl7cmV0dXJuIG07fXdoaWxlKG4mJiFhKG4pKXttLngrPW4ub2Zmc2V0TGVmdDsKbS55Kz1uLm9mZnNldFRvcDtpZihCcm93c2VyLmZpcmVmb3gpe2lmKCFjKG4pKXttLngrPWIobik7bS55Kz1nKG4pO312YXIgcD1uLnBhcmVudE5vZGU7aWYocCYmayhwLCJvdmVyZmxvdyIpIT0idmlzaWJsZSIpe20ueCs9YihwKTttLnkrPWcocCk7fX1lbHNle2lmKG4hPXRoaXMmJkJyb3dzZXIuc2FmYXJpKXttLngrPWIobik7Cm0ueSs9ZyhuKTt9fW49bi5vZmZzZXRQYXJlbnQ7fWlmKEJyb3dzZXIuZmlyZWZveCYmIWModGhpcykpe20ueC09Yih0aGlzKTttLnktPWcodGhpcyk7fXJldHVybiBtO30sZ2V0UG9zaXRpb246ZnVuY3Rpb24ocCl7aWYoYSh0aGlzKSl7cmV0dXJue3g6MCx5OjB9O312YXIgcT10aGlzLmdldE9mZnNldHMoKSxuPXRoaXMuZ2V0U2Nyb2xscygpOwp2YXIgbT17eDpxLngtbi54LHk6cS55LW4ueX07aWYocCYmKHA9ZG9jdW1lbnQuaWQocCkpKXt2YXIgbz1wLmdldFBvc2l0aW9uKCk7cmV0dXJue3g6bS54LW8ueC1iKHApLHk6bS55LW8ueS1nKHApfTt9cmV0dXJuIG07fSxnZXRDb29yZGluYXRlczpmdW5jdGlvbihvKXtpZihhKHRoaXMpKXtyZXR1cm4gdGhpcy5nZXRXaW5kb3coKS5nZXRDb29yZGluYXRlcygpOwp9dmFyIG09dGhpcy5nZXRQb3NpdGlvbihvKSxuPXRoaXMuZ2V0U2l6ZSgpO3ZhciBwPXtsZWZ0Om0ueCx0b3A6bS55LHdpZHRoOm4ueCxoZWlnaHQ6bi55fTtwLnJpZ2h0PXAubGVmdCtwLndpZHRoO3AuYm90dG9tPXAudG9wK3AuaGVpZ2h0O3JldHVybiBwO30sY29tcHV0ZVBvc2l0aW9uOmZ1bmN0aW9uKG0pe3JldHVybntsZWZ0Om0ueC1qKHRoaXMsIm1hcmdpbi1sZWZ0IiksdG9wOm0ueS1qKHRoaXMsIm1hcmdpbi10b3AiKX07Cn0sc2V0UG9zaXRpb246ZnVuY3Rpb24obSl7cmV0dXJuIHRoaXMuc2V0U3R5bGVzKHRoaXMuY29tcHV0ZVBvc2l0aW9uKG0pKTt9fSk7W0RvY3VtZW50LFdpbmRvd10uaW52b2tlKCJpbXBsZW1lbnQiLHtnZXRTaXplOmZ1bmN0aW9uKCl7dmFyIG09Zih0aGlzKTtyZXR1cm57eDptLmNsaWVudFdpZHRoLHk6bS5jbGllbnRIZWlnaHR9Owp9LGdldFNjcm9sbDpmdW5jdGlvbigpe3ZhciBuPXRoaXMuZ2V0V2luZG93KCksbT1mKHRoaXMpO3JldHVybnt4Om4ucGFnZVhPZmZzZXR8fG0uc2Nyb2xsTGVmdCx5Om4ucGFnZVlPZmZzZXR8fG0uc2Nyb2xsVG9wfTt9LGdldFNjcm9sbFNpemU6ZnVuY3Rpb24oKXt2YXIgbz1mKHRoaXMpLG49dGhpcy5nZXRTaXplKCksbT10aGlzLmdldERvY3VtZW50KCkuYm9keTsKcmV0dXJue3g6TWF0aC5tYXgoby5zY3JvbGxXaWR0aCxtLnNjcm9sbFdpZHRoLG4ueCkseTpNYXRoLm1heChvLnNjcm9sbEhlaWdodCxtLnNjcm9sbEhlaWdodCxuLnkpfTt9LGdldFBvc2l0aW9uOmZ1bmN0aW9uKCl7cmV0dXJue3g6MCx5OjB9O30sZ2V0Q29vcmRpbmF0ZXM6ZnVuY3Rpb24oKXt2YXIgbT10aGlzLmdldFNpemUoKTsKcmV0dXJue3RvcDowLGxlZnQ6MCxib3R0b206bS55LHJpZ2h0Om0ueCxoZWlnaHQ6bS55LHdpZHRoOm0ueH07fX0pO3ZhciBrPUVsZW1lbnQuZ2V0Q29tcHV0ZWRTdHlsZTtmdW5jdGlvbiBqKG0sbil7cmV0dXJuIGsobSxuKS50b0ludCgpfHwwO31mdW5jdGlvbiBjKG0pe3JldHVybiBrKG0sIi1tb3otYm94LXNpemluZyIpPT0iYm9yZGVyLWJveCI7Cn1mdW5jdGlvbiBnKG0pe3JldHVybiBqKG0sImJvcmRlci10b3Atd2lkdGgiKTt9ZnVuY3Rpb24gYihtKXtyZXR1cm4gaihtLCJib3JkZXItbGVmdC13aWR0aCIpO31mdW5jdGlvbiBhKG0pe3JldHVybigvXig/OmJvZHl8aHRtbCkkL2kpLnRlc3QobS50YWdOYW1lKTsKfWZ1bmN0aW9uIGYobSl7dmFyIG49bS5nZXREb2N1bWVudCgpO3JldHVybighbi5jb21wYXRNb2RlfHxuLmNvbXBhdE1vZGU9PSJDU1MxQ29tcGF0Iik/bi5odG1sOm4uYm9keTt9fSkoKTtFbGVtZW50LmFsaWFzKHtwb3NpdGlvbjoic2V0UG9zaXRpb24ifSk7W1dpbmRvdyxEb2N1bWVudCxFbGVtZW50XS5pbnZva2UoImltcGxlbWVudCIse2dldEhlaWdodDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldFNpemUoKS55Owp9LGdldFdpZHRoOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0U2l6ZSgpLng7fSxnZXRTY3JvbGxUb3A6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRTY3JvbGwoKS55O30sZ2V0U2Nyb2xsTGVmdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldFNjcm9sbCgpLng7Cn0sZ2V0U2Nyb2xsSGVpZ2h0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0U2Nyb2xsU2l6ZSgpLnk7fSxnZXRTY3JvbGxXaWR0aDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldFNjcm9sbFNpemUoKS54O30sZ2V0VG9wOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0UG9zaXRpb24oKS55Owp9LGdldExlZnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRQb3NpdGlvbigpLng7fX0pOyhmdW5jdGlvbigpe3ZhciBmPXRoaXMuRng9bmV3IENsYXNzKHtJbXBsZW1lbnRzOltDaGFpbixFdmVudHMsT3B0aW9uc10sb3B0aW9uczp7ZnBzOjYwLHVuaXQ6ZmFsc2UsZHVyYXRpb246NTAwLGZyYW1lczpudWxsLGZyYW1lU2tpcDp0cnVlLGxpbms6Imlnbm9yZSJ9LGluaXRpYWxpemU6ZnVuY3Rpb24oZyl7dGhpcy5zdWJqZWN0PXRoaXMuc3ViamVjdHx8dGhpczsKdGhpcy5zZXRPcHRpb25zKGcpO30sZ2V0VHJhbnNpdGlvbjpmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihnKXtyZXR1cm4gLShNYXRoLmNvcyhNYXRoLlBJKmcpLTEpLzI7fTt9LHN0ZXA6ZnVuY3Rpb24oZyl7aWYodGhpcy5vcHRpb25zLmZyYW1lU2tpcCl7dmFyIGg9KHRoaXMudGltZSE9bnVsbCk/KGctdGhpcy50aW1lKTowLGk9aC90aGlzLmZyYW1lSW50ZXJ2YWw7CnRoaXMudGltZT1nO3RoaXMuZnJhbWUrPWk7fWVsc2V7dGhpcy5mcmFtZSsrO31pZih0aGlzLmZyYW1lPHRoaXMuZnJhbWVzKXt2YXIgaj10aGlzLnRyYW5zaXRpb24odGhpcy5mcmFtZS90aGlzLmZyYW1lcyk7dGhpcy5zZXQodGhpcy5jb21wdXRlKHRoaXMuZnJvbSx0aGlzLnRvLGopKTsKfWVsc2V7dGhpcy5mcmFtZT10aGlzLmZyYW1lczt0aGlzLnNldCh0aGlzLmNvbXB1dGUodGhpcy5mcm9tLHRoaXMudG8sMSkpO3RoaXMuc3RvcCgpO319LHNldDpmdW5jdGlvbihnKXtyZXR1cm4gZzt9LGNvbXB1dGU6ZnVuY3Rpb24oaSxoLGcpe3JldHVybiBmLmNvbXB1dGUoaSxoLGcpOwp9LGNoZWNrOmZ1bmN0aW9uKCl7aWYoIXRoaXMuaXNSdW5uaW5nKCkpe3JldHVybiB0cnVlO31zd2l0Y2godGhpcy5vcHRpb25zLmxpbmspe2Nhc2UiY2FuY2VsIjp0aGlzLmNhbmNlbCgpO3JldHVybiB0cnVlO2Nhc2UiY2hhaW4iOnRoaXMuY2hhaW4odGhpcy5jYWxsZXIucGFzcyhhcmd1bWVudHMsdGhpcykpOwpyZXR1cm4gZmFsc2U7fXJldHVybiBmYWxzZTt9LHN0YXJ0OmZ1bmN0aW9uKGssail7aWYoIXRoaXMuY2hlY2soayxqKSl7cmV0dXJuIHRoaXM7fXRoaXMuZnJvbT1rO3RoaXMudG89ajt0aGlzLmZyYW1lPSh0aGlzLm9wdGlvbnMuZnJhbWVTa2lwKT8wOi0xO3RoaXMudGltZT1udWxsOwp0aGlzLnRyYW5zaXRpb249dGhpcy5nZXRUcmFuc2l0aW9uKCk7dmFyIGk9dGhpcy5vcHRpb25zLmZyYW1lcyxoPXRoaXMub3B0aW9ucy5mcHMsZz10aGlzLm9wdGlvbnMuZHVyYXRpb247dGhpcy5kdXJhdGlvbj1mLkR1cmF0aW9uc1tnXXx8Zy50b0ludCgpO3RoaXMuZnJhbWVJbnRlcnZhbD0xMDAwL2g7CnRoaXMuZnJhbWVzPWl8fE1hdGgucm91bmQodGhpcy5kdXJhdGlvbi90aGlzLmZyYW1lSW50ZXJ2YWwpO3RoaXMuZmlyZUV2ZW50KCJzdGFydCIsdGhpcy5zdWJqZWN0KTtiLmNhbGwodGhpcyxoKTtyZXR1cm4gdGhpczt9LHN0b3A6ZnVuY3Rpb24oKXtpZih0aGlzLmlzUnVubmluZygpKXt0aGlzLnRpbWU9bnVsbDsKZC5jYWxsKHRoaXMsdGhpcy5vcHRpb25zLmZwcyk7aWYodGhpcy5mcmFtZXM9PXRoaXMuZnJhbWUpe3RoaXMuZmlyZUV2ZW50KCJjb21wbGV0ZSIsdGhpcy5zdWJqZWN0KTtpZighdGhpcy5jYWxsQ2hhaW4oKSl7dGhpcy5maXJlRXZlbnQoImNoYWluQ29tcGxldGUiLHRoaXMuc3ViamVjdCk7Cn19ZWxzZXt0aGlzLmZpcmVFdmVudCgic3RvcCIsdGhpcy5zdWJqZWN0KTt9fXJldHVybiB0aGlzO30sY2FuY2VsOmZ1bmN0aW9uKCl7aWYodGhpcy5pc1J1bm5pbmcoKSl7dGhpcy50aW1lPW51bGw7ZC5jYWxsKHRoaXMsdGhpcy5vcHRpb25zLmZwcyk7dGhpcy5mcmFtZT10aGlzLmZyYW1lczsKdGhpcy5maXJlRXZlbnQoImNhbmNlbCIsdGhpcy5zdWJqZWN0KS5jbGVhckNoYWluKCk7fXJldHVybiB0aGlzO30scGF1c2U6ZnVuY3Rpb24oKXtpZih0aGlzLmlzUnVubmluZygpKXt0aGlzLnRpbWU9bnVsbDtkLmNhbGwodGhpcyx0aGlzLm9wdGlvbnMuZnBzKTt9cmV0dXJuIHRoaXM7Cn0scmVzdW1lOmZ1bmN0aW9uKCl7aWYoKHRoaXMuZnJhbWU8dGhpcy5mcmFtZXMpJiYhdGhpcy5pc1J1bm5pbmcoKSl7Yi5jYWxsKHRoaXMsdGhpcy5vcHRpb25zLmZwcyk7fXJldHVybiB0aGlzO30saXNSdW5uaW5nOmZ1bmN0aW9uKCl7dmFyIGc9ZVt0aGlzLm9wdGlvbnMuZnBzXTsKcmV0dXJuIGcmJmcuY29udGFpbnModGhpcyk7fX0pO2YuY29tcHV0ZT1mdW5jdGlvbihpLGgsZyl7cmV0dXJuKGgtaSkqZytpO307Zi5EdXJhdGlvbnM9eyJzaG9ydCI6MjUwLG5vcm1hbDo1MDAsImxvbmciOjEwMDB9O3ZhciBlPXt9LGM9e307dmFyIGE9ZnVuY3Rpb24oKXt2YXIgaD1EYXRlLm5vdygpOwpmb3IodmFyIGo9dGhpcy5sZW5ndGg7ai0tOyl7dmFyIGc9dGhpc1tqXTtpZihnKXtnLnN0ZXAoaCk7fX19O3ZhciBiPWZ1bmN0aW9uKGgpe3ZhciBnPWVbaF18fChlW2hdPVtdKTtnLnB1c2godGhpcyk7aWYoIWNbaF0pe2NbaF09YS5wZXJpb2RpY2FsKE1hdGgucm91bmQoMTAwMC9oKSxnKTsKfX07dmFyIGQ9ZnVuY3Rpb24oaCl7dmFyIGc9ZVtoXTtpZihnKXtnLmVyYXNlKHRoaXMpO2lmKCFnLmxlbmd0aCYmY1toXSl7ZGVsZXRlIGVbaF07Y1toXT1jbGVhckludGVydmFsKGNbaF0pO319fTt9KSgpO0Z4LkNTUz1uZXcgQ2xhc3Moe0V4dGVuZHM6RngscHJlcGFyZTpmdW5jdGlvbihjLGQsYil7Yj1BcnJheS5mcm9tKGIpOwppZihiWzFdPT1udWxsKXtiWzFdPWJbMF07YlswXT1jLmdldFN0eWxlKGQpO312YXIgYT1iLm1hcCh0aGlzLnBhcnNlKTtyZXR1cm57ZnJvbTphWzBdLHRvOmFbMV19O30scGFyc2U6ZnVuY3Rpb24oYSl7YT1GdW5jdGlvbi5mcm9tKGEpKCk7YT0odHlwZW9mIGE9PSJzdHJpbmciKT9hLnNwbGl0KCIgIik6QXJyYXkuZnJvbShhKTsKcmV0dXJuIGEubWFwKGZ1bmN0aW9uKGMpe2M9U3RyaW5nKGMpO3ZhciBiPWZhbHNlO09iamVjdC5lYWNoKEZ4LkNTUy5QYXJzZXJzLGZ1bmN0aW9uKGYsZSl7aWYoYil7cmV0dXJuO312YXIgZD1mLnBhcnNlKGMpO2lmKGR8fGQ9PT0wKXtiPXt2YWx1ZTpkLHBhcnNlcjpmfTsKfX0pO2I9Ynx8e3ZhbHVlOmMscGFyc2VyOkZ4LkNTUy5QYXJzZXJzLlN0cmluZ307cmV0dXJuIGI7fSk7fSxjb21wdXRlOmZ1bmN0aW9uKGQsYyxiKXt2YXIgYT1bXTsoTWF0aC5taW4oZC5sZW5ndGgsYy5sZW5ndGgpKS50aW1lcyhmdW5jdGlvbihlKXthLnB1c2goe3ZhbHVlOmRbZV0ucGFyc2VyLmNvbXB1dGUoZFtlXS52YWx1ZSxjW2VdLnZhbHVlLGIpLHBhcnNlcjpkW2VdLnBhcnNlcn0pOwp9KTthLiRmYW1pbHk9RnVuY3Rpb24uZnJvbSgiZng6Y3NzOnZhbHVlIik7cmV0dXJuIGE7fSxzZXJ2ZTpmdW5jdGlvbihjLGIpe2lmKHR5cGVPZihjKSE9ImZ4OmNzczp2YWx1ZSIpe2M9dGhpcy5wYXJzZShjKTt9dmFyIGE9W107Yy5lYWNoKGZ1bmN0aW9uKGQpe2E9YS5jb25jYXQoZC5wYXJzZXIuc2VydmUoZC52YWx1ZSxiKSk7Cn0pO3JldHVybiBhO30scmVuZGVyOmZ1bmN0aW9uKGEsZCxjLGIpe2Euc2V0U3R5bGUoZCx0aGlzLnNlcnZlKGMsYikpO30sc2VhcmNoOmZ1bmN0aW9uKGEpe2lmKEZ4LkNTUy5DYWNoZVthXSl7cmV0dXJuIEZ4LkNTUy5DYWNoZVthXTt9dmFyIGM9e30sYj1uZXcgUmVnRXhwKCJeIithLmVzY2FwZVJlZ0V4cCgpKyIkIik7CkFycmF5LmVhY2goZG9jdW1lbnQuc3R5bGVTaGVldHMsZnVuY3Rpb24oZixlKXt2YXIgZD1mLmhyZWY7aWYoZCYmZC5jb250YWlucygiOi8vIikmJiFkLmNvbnRhaW5zKGRvY3VtZW50LmRvbWFpbikpe3JldHVybjt9dmFyIGc9Zi5ydWxlc3x8Zi5jc3NSdWxlcztBcnJheS5lYWNoKGcsZnVuY3Rpb24oayxoKXtpZighay5zdHlsZSl7cmV0dXJuOwp9dmFyIGo9KGsuc2VsZWN0b3JUZXh0KT9rLnNlbGVjdG9yVGV4dC5yZXBsYWNlKC9eXHcrLyxmdW5jdGlvbihpKXtyZXR1cm4gaS50b0xvd2VyQ2FzZSgpO30pOm51bGw7aWYoIWp8fCFiLnRlc3Qoaikpe3JldHVybjt9T2JqZWN0LmVhY2goRWxlbWVudC5TdHlsZXMsZnVuY3Rpb24obCxpKXtpZighay5zdHlsZVtpXXx8RWxlbWVudC5TaG9ydFN0eWxlc1tpXSl7cmV0dXJuOwp9bD1TdHJpbmcoay5zdHlsZVtpXSk7Y1tpXT0oKC9ecmdiLykudGVzdChsKSk/bC5yZ2JUb0hleCgpOmw7fSk7fSk7fSk7cmV0dXJuIEZ4LkNTUy5DYWNoZVthXT1jO319KTtGeC5DU1MuQ2FjaGU9e307RnguQ1NTLlBhcnNlcnM9e0NvbG9yOntwYXJzZTpmdW5jdGlvbihhKXtpZihhLm1hdGNoKC9eI1swLTlhLWZdezMsNn0kL2kpKXtyZXR1cm4gYS5oZXhUb1JnYih0cnVlKTsKfXJldHVybigoYT1hLm1hdGNoKC8oXGQrKSxccyooXGQrKSxccyooXGQrKS8pKSk/W2FbMV0sYVsyXSxhWzNdXTpmYWxzZTt9LGNvbXB1dGU6ZnVuY3Rpb24oYyxiLGEpe3JldHVybiBjLm1hcChmdW5jdGlvbihlLGQpe3JldHVybiBNYXRoLnJvdW5kKEZ4LmNvbXB1dGUoY1tkXSxiW2RdLGEpKTsKfSk7fSxzZXJ2ZTpmdW5jdGlvbihhKXtyZXR1cm4gYS5tYXAoTnVtYmVyKTt9fSxOdW1iZXI6e3BhcnNlOnBhcnNlRmxvYXQsY29tcHV0ZTpGeC5jb21wdXRlLHNlcnZlOmZ1bmN0aW9uKGIsYSl7cmV0dXJuKGEpP2IrYTpiO319LFN0cmluZzp7cGFyc2U6RnVuY3Rpb24uZnJvbShmYWxzZSksY29tcHV0ZTpmdW5jdGlvbihiLGEpe3JldHVybiBhOwp9LHNlcnZlOmZ1bmN0aW9uKGEpe3JldHVybiBhO319fTtGeC5Ud2Vlbj1uZXcgQ2xhc3Moe0V4dGVuZHM6RnguQ1NTLGluaXRpYWxpemU6ZnVuY3Rpb24oYixhKXt0aGlzLmVsZW1lbnQ9dGhpcy5zdWJqZWN0PWRvY3VtZW50LmlkKGIpO3RoaXMucGFyZW50KGEpO30sc2V0OmZ1bmN0aW9uKGIsYSl7aWYoYXJndW1lbnRzLmxlbmd0aD09MSl7YT1iOwpiPXRoaXMucHJvcGVydHl8fHRoaXMub3B0aW9ucy5wcm9wZXJ0eTt9dGhpcy5yZW5kZXIodGhpcy5lbGVtZW50LGIsYSx0aGlzLm9wdGlvbnMudW5pdCk7cmV0dXJuIHRoaXM7fSxzdGFydDpmdW5jdGlvbihjLGUsZCl7aWYoIXRoaXMuY2hlY2soYyxlLGQpKXtyZXR1cm4gdGhpczsKfXZhciBiPUFycmF5LmZsYXR0ZW4oYXJndW1lbnRzKTt0aGlzLnByb3BlcnR5PXRoaXMub3B0aW9ucy5wcm9wZXJ0eXx8Yi5zaGlmdCgpO3ZhciBhPXRoaXMucHJlcGFyZSh0aGlzLmVsZW1lbnQsdGhpcy5wcm9wZXJ0eSxiKTtyZXR1cm4gdGhpcy5wYXJlbnQoYS5mcm9tLGEudG8pOwp9fSk7RWxlbWVudC5Qcm9wZXJ0aWVzLnR3ZWVuPXtzZXQ6ZnVuY3Rpb24oYSl7dGhpcy5nZXQoInR3ZWVuIikuY2FuY2VsKCkuc2V0T3B0aW9ucyhhKTtyZXR1cm4gdGhpczt9LGdldDpmdW5jdGlvbigpe3ZhciBhPXRoaXMucmV0cmlldmUoInR3ZWVuIik7aWYoIWEpe2E9bmV3IEZ4LlR3ZWVuKHRoaXMse2xpbms6ImNhbmNlbCJ9KTsKdGhpcy5zdG9yZSgidHdlZW4iLGEpO31yZXR1cm4gYTt9fTtFbGVtZW50LmltcGxlbWVudCh7dHdlZW46ZnVuY3Rpb24oYSxjLGIpe3RoaXMuZ2V0KCJ0d2VlbiIpLnN0YXJ0KGFyZ3VtZW50cyk7cmV0dXJuIHRoaXM7fSxmYWRlOmZ1bmN0aW9uKGMpe3ZhciBlPXRoaXMuZ2V0KCJ0d2VlbiIpLGQ9Im9wYWNpdHkiLGE7CmM9W2MsInRvZ2dsZSJdLnBpY2soKTtzd2l0Y2goYyl7Y2FzZSJpbiI6ZS5zdGFydChkLDEpO2JyZWFrO2Nhc2Uib3V0IjplLnN0YXJ0KGQsMCk7YnJlYWs7Y2FzZSJzaG93IjplLnNldChkLDEpO2JyZWFrO2Nhc2UiaGlkZSI6ZS5zZXQoZCwwKTticmVhaztjYXNlInRvZ2dsZSI6dmFyIGI9dGhpcy5yZXRyaWV2ZSgiZmFkZTpmbGFnIix0aGlzLmdldCgib3BhY2l0eSIpPT0xKTsKZS5zdGFydChkLChiKT8wOjEpO3RoaXMuc3RvcmUoImZhZGU6ZmxhZyIsIWIpO2E9dHJ1ZTticmVhaztkZWZhdWx0OmUuc3RhcnQoZCxhcmd1bWVudHMpO31pZighYSl7dGhpcy5lbGltaW5hdGUoImZhZGU6ZmxhZyIpO31yZXR1cm4gdGhpczt9LGhpZ2hsaWdodDpmdW5jdGlvbihjLGEpe2lmKCFhKXthPXRoaXMucmV0cmlldmUoImhpZ2hsaWdodDpvcmlnaW5hbCIsdGhpcy5nZXRTdHlsZSgiYmFja2dyb3VuZC1jb2xvciIpKTsKYT0oYT09InRyYW5zcGFyZW50Iik/IiNmZmYiOmE7fXZhciBiPXRoaXMuZ2V0KCJ0d2VlbiIpO2Iuc3RhcnQoImJhY2tncm91bmQtY29sb3IiLGN8fCIjZmZmZjg4IixhKS5jaGFpbihmdW5jdGlvbigpe3RoaXMuc2V0U3R5bGUoImJhY2tncm91bmQtY29sb3IiLHRoaXMucmV0cmlldmUoImhpZ2hsaWdodDpvcmlnaW5hbCIpKTsKYi5jYWxsQ2hhaW4oKTt9LmJpbmQodGhpcykpO3JldHVybiB0aGlzO319KTtGeC5Nb3JwaD1uZXcgQ2xhc3Moe0V4dGVuZHM6RnguQ1NTLGluaXRpYWxpemU6ZnVuY3Rpb24oYixhKXt0aGlzLmVsZW1lbnQ9dGhpcy5zdWJqZWN0PWRvY3VtZW50LmlkKGIpO3RoaXMucGFyZW50KGEpOwp9LHNldDpmdW5jdGlvbihhKXtpZih0eXBlb2YgYT09InN0cmluZyIpe2E9dGhpcy5zZWFyY2goYSk7fWZvcih2YXIgYiBpbiBhKXt0aGlzLnJlbmRlcih0aGlzLmVsZW1lbnQsYixhW2JdLHRoaXMub3B0aW9ucy51bml0KTt9cmV0dXJuIHRoaXM7fSxjb21wdXRlOmZ1bmN0aW9uKGUsZCxjKXt2YXIgYT17fTsKZm9yKHZhciBiIGluIGUpe2FbYl09dGhpcy5wYXJlbnQoZVtiXSxkW2JdLGMpO31yZXR1cm4gYTt9LHN0YXJ0OmZ1bmN0aW9uKGIpe2lmKCF0aGlzLmNoZWNrKGIpKXtyZXR1cm4gdGhpczt9aWYodHlwZW9mIGI9PSJzdHJpbmciKXtiPXRoaXMuc2VhcmNoKGIpO312YXIgZT17fSxkPXt9Owpmb3IodmFyIGMgaW4gYil7dmFyIGE9dGhpcy5wcmVwYXJlKHRoaXMuZWxlbWVudCxjLGJbY10pO2VbY109YS5mcm9tO2RbY109YS50bzt9cmV0dXJuIHRoaXMucGFyZW50KGUsZCk7fX0pO0VsZW1lbnQuUHJvcGVydGllcy5tb3JwaD17c2V0OmZ1bmN0aW9uKGEpe3RoaXMuZ2V0KCJtb3JwaCIpLmNhbmNlbCgpLnNldE9wdGlvbnMoYSk7CnJldHVybiB0aGlzO30sZ2V0OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5yZXRyaWV2ZSgibW9ycGgiKTtpZighYSl7YT1uZXcgRnguTW9ycGgodGhpcyx7bGluazoiY2FuY2VsIn0pO3RoaXMuc3RvcmUoIm1vcnBoIixhKTt9cmV0dXJuIGE7fX07RWxlbWVudC5pbXBsZW1lbnQoe21vcnBoOmZ1bmN0aW9uKGEpe3RoaXMuZ2V0KCJtb3JwaCIpLnN0YXJ0KGEpOwpyZXR1cm4gdGhpczt9fSk7RnguaW1wbGVtZW50KHtnZXRUcmFuc2l0aW9uOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5vcHRpb25zLnRyYW5zaXRpb258fEZ4LlRyYW5zaXRpb25zLlNpbmUuZWFzZUluT3V0O2lmKHR5cGVvZiBhPT0ic3RyaW5nIil7dmFyIGI9YS5zcGxpdCgiOiIpOwphPUZ4LlRyYW5zaXRpb25zO2E9YVtiWzBdXXx8YVtiWzBdLmNhcGl0YWxpemUoKV07aWYoYlsxXSl7YT1hWyJlYXNlIitiWzFdLmNhcGl0YWxpemUoKSsoYlsyXT9iWzJdLmNhcGl0YWxpemUoKToiIildO319cmV0dXJuIGE7fX0pO0Z4LlRyYW5zaXRpb249ZnVuY3Rpb24oYyxiKXtiPUFycmF5LmZyb20oYik7CnZhciBhPWZ1bmN0aW9uKGQpe3JldHVybiBjKGQsYik7fTtyZXR1cm4gT2JqZWN0LmFwcGVuZChhLHtlYXNlSW46YSxlYXNlT3V0OmZ1bmN0aW9uKGQpe3JldHVybiAxLWMoMS1kLGIpO30sZWFzZUluT3V0OmZ1bmN0aW9uKGQpe3JldHVybihkPD0wLjU/YygyKmQsYik6KDItYygyKigxLWQpLGIpKSkvMjsKfX0pO307RnguVHJhbnNpdGlvbnM9e2xpbmVhcjpmdW5jdGlvbihhKXtyZXR1cm4gYTt9fTtGeC5UcmFuc2l0aW9ucy5leHRlbmQ9ZnVuY3Rpb24oYSl7Zm9yKHZhciBiIGluIGEpe0Z4LlRyYW5zaXRpb25zW2JdPW5ldyBGeC5UcmFuc2l0aW9uKGFbYl0pO319O0Z4LlRyYW5zaXRpb25zLmV4dGVuZCh7UG93OmZ1bmN0aW9uKGIsYSl7cmV0dXJuIE1hdGgucG93KGIsYSYmYVswXXx8Nik7Cn0sRXhwbzpmdW5jdGlvbihhKXtyZXR1cm4gTWF0aC5wb3coMiw4KihhLTEpKTt9LENpcmM6ZnVuY3Rpb24oYSl7cmV0dXJuIDEtTWF0aC5zaW4oTWF0aC5hY29zKGEpKTt9LFNpbmU6ZnVuY3Rpb24oYSl7cmV0dXJuIDEtTWF0aC5jb3MoYSpNYXRoLlBJLzIpO30sQmFjazpmdW5jdGlvbihiLGEpe2E9YSYmYVswXXx8MS42MTg7CnJldHVybiBNYXRoLnBvdyhiLDIpKigoYSsxKSpiLWEpO30sQm91bmNlOmZ1bmN0aW9uKGYpe3ZhciBlO2Zvcih2YXIgZD0wLGM9MTsxO2QrPWMsYy89Mil7aWYoZj49KDctNCpkKS8xMSl7ZT1jKmMtTWF0aC5wb3coKDExLTYqZC0xMSpmKS80LDIpO2JyZWFrO319cmV0dXJuIGU7Cn0sRWxhc3RpYzpmdW5jdGlvbihiLGEpe3JldHVybiBNYXRoLnBvdygyLDEwKi0tYikqTWF0aC5jb3MoMjAqYipNYXRoLlBJKihhJiZhWzBdfHwxKS8zKTt9fSk7WyJRdWFkIiwiQ3ViaWMiLCJRdWFydCIsIlF1aW50Il0uZWFjaChmdW5jdGlvbihiLGEpe0Z4LlRyYW5zaXRpb25zW2JdPW5ldyBGeC5UcmFuc2l0aW9uKGZ1bmN0aW9uKGMpe3JldHVybiBNYXRoLnBvdyhjLGErMik7Cn0pO30pOyhmdW5jdGlvbigpe3ZhciBkPWZ1bmN0aW9uKCl7fSxhPSgib25wcm9ncmVzcyIgaW4gbmV3IEJyb3dzZXIuUmVxdWVzdCk7dmFyIGM9dGhpcy5SZXF1ZXN0PW5ldyBDbGFzcyh7SW1wbGVtZW50czpbQ2hhaW4sRXZlbnRzLE9wdGlvbnNdLG9wdGlvbnM6e3VybDoiIixkYXRhOiIiLGhlYWRlcnM6eyJYLVJlcXVlc3RlZC1XaXRoIjoiWE1MSHR0cFJlcXVlc3QiLEFjY2VwdDoidGV4dC9qYXZhc2NyaXB0LCB0ZXh0L2h0bWwsIGFwcGxpY2F0aW9uL3htbCwgdGV4dC94bWwsICovKiJ9LGFzeW5jOnRydWUsZm9ybWF0OmZhbHNlLG1ldGhvZDoicG9zdCIsbGluazoiaWdub3JlIixpc1N1Y2Nlc3M6bnVsbCxlbXVsYXRpb246dHJ1ZSx1cmxFbmNvZGVkOnRydWUsZW5jb2Rpbmc6InV0Zi04IixldmFsU2NyaXB0czpmYWxzZSxldmFsUmVzcG9uc2U6ZmFsc2UsdGltZW91dDowLG5vQ2FjaGU6ZmFsc2V9LGluaXRpYWxpemU6ZnVuY3Rpb24oZSl7dGhpcy54aHI9bmV3IEJyb3dzZXIuUmVxdWVzdCgpOwp0aGlzLnNldE9wdGlvbnMoZSk7dGhpcy5oZWFkZXJzPXRoaXMub3B0aW9ucy5oZWFkZXJzO30sb25TdGF0ZUNoYW5nZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMueGhyO2lmKGUucmVhZHlTdGF0ZSE9NHx8IXRoaXMucnVubmluZyl7cmV0dXJuO310aGlzLnJ1bm5pbmc9ZmFsc2U7CnRoaXMuc3RhdHVzPTA7RnVuY3Rpb24uYXR0ZW1wdChmdW5jdGlvbigpe3ZhciBmPWUuc3RhdHVzO3RoaXMuc3RhdHVzPShmPT0xMjIzKT8yMDQ6Zjt9LmJpbmQodGhpcykpO2Uub25yZWFkeXN0YXRlY2hhbmdlPWQ7aWYoYSl7ZS5vbnByb2dyZXNzPWUub25sb2Fkc3RhcnQ9ZDsKfWNsZWFyVGltZW91dCh0aGlzLnRpbWVyKTt0aGlzLnJlc3BvbnNlPXt0ZXh0OnRoaXMueGhyLnJlc3BvbnNlVGV4dHx8IiIseG1sOnRoaXMueGhyLnJlc3BvbnNlWE1MfTtpZih0aGlzLm9wdGlvbnMuaXNTdWNjZXNzLmNhbGwodGhpcyx0aGlzLnN0YXR1cykpe3RoaXMuc3VjY2Vzcyh0aGlzLnJlc3BvbnNlLnRleHQsdGhpcy5yZXNwb25zZS54bWwpOwp9ZWxzZXt0aGlzLmZhaWx1cmUoKTt9fSxpc1N1Y2Nlc3M6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnN0YXR1cztyZXR1cm4oZT49MjAwJiZlPDMwMCk7fSxpc1J1bm5pbmc6ZnVuY3Rpb24oKXtyZXR1cm4gISF0aGlzLnJ1bm5pbmc7fSxwcm9jZXNzU2NyaXB0czpmdW5jdGlvbihlKXtpZih0aGlzLm9wdGlvbnMuZXZhbFJlc3BvbnNlfHwoLyhlY21hfGphdmEpc2NyaXB0LykudGVzdCh0aGlzLmdldEhlYWRlcigiQ29udGVudC10eXBlIikpKXtyZXR1cm4gQnJvd3Nlci5leGVjKGUpOwp9cmV0dXJuIGUuc3RyaXBTY3JpcHRzKHRoaXMub3B0aW9ucy5ldmFsU2NyaXB0cyk7fSxzdWNjZXNzOmZ1bmN0aW9uKGYsZSl7dGhpcy5vblN1Y2Nlc3ModGhpcy5wcm9jZXNzU2NyaXB0cyhmKSxlKTt9LG9uU3VjY2VzczpmdW5jdGlvbigpe3RoaXMuZmlyZUV2ZW50KCJjb21wbGV0ZSIsYXJndW1lbnRzKS5maXJlRXZlbnQoInN1Y2Nlc3MiLGFyZ3VtZW50cykuY2FsbENoYWluKCk7Cn0sZmFpbHVyZTpmdW5jdGlvbigpe3RoaXMub25GYWlsdXJlKCk7fSxvbkZhaWx1cmU6ZnVuY3Rpb24oKXt0aGlzLmZpcmVFdmVudCgiY29tcGxldGUiKS5maXJlRXZlbnQoImZhaWx1cmUiLHRoaXMueGhyKTt9LGxvYWRzdGFydDpmdW5jdGlvbihlKXt0aGlzLmZpcmVFdmVudCgibG9hZHN0YXJ0IixbZSx0aGlzLnhocl0pOwp9LHByb2dyZXNzOmZ1bmN0aW9uKGUpe3RoaXMuZmlyZUV2ZW50KCJwcm9ncmVzcyIsW2UsdGhpcy54aHJdKTt9LHRpbWVvdXQ6ZnVuY3Rpb24oKXt0aGlzLmZpcmVFdmVudCgidGltZW91dCIsdGhpcy54aHIpO30sc2V0SGVhZGVyOmZ1bmN0aW9uKGUsZil7dGhpcy5oZWFkZXJzW2VdPWY7CnJldHVybiB0aGlzO30sZ2V0SGVhZGVyOmZ1bmN0aW9uKGUpe3JldHVybiBGdW5jdGlvbi5hdHRlbXB0KGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMueGhyLmdldFJlc3BvbnNlSGVhZGVyKGUpO30uYmluZCh0aGlzKSk7fSxjaGVjazpmdW5jdGlvbigpe2lmKCF0aGlzLnJ1bm5pbmcpe3JldHVybiB0cnVlOwp9c3dpdGNoKHRoaXMub3B0aW9ucy5saW5rKXtjYXNlImNhbmNlbCI6dGhpcy5jYW5jZWwoKTtyZXR1cm4gdHJ1ZTtjYXNlImNoYWluIjp0aGlzLmNoYWluKHRoaXMuY2FsbGVyLnBhc3MoYXJndW1lbnRzLHRoaXMpKTtyZXR1cm4gZmFsc2U7fXJldHVybiBmYWxzZTt9LHNlbmQ6ZnVuY3Rpb24obyl7aWYoIXRoaXMuY2hlY2sobykpe3JldHVybiB0aGlzOwp9dGhpcy5vcHRpb25zLmlzU3VjY2Vzcz10aGlzLm9wdGlvbnMuaXNTdWNjZXNzfHx0aGlzLmlzU3VjY2Vzczt0aGlzLnJ1bm5pbmc9dHJ1ZTt2YXIgbD10eXBlT2Yobyk7aWYobD09InN0cmluZyJ8fGw9PSJlbGVtZW50Iil7bz17ZGF0YTpvfTt9dmFyIGg9dGhpcy5vcHRpb25zOwpvPU9iamVjdC5hcHBlbmQoe2RhdGE6aC5kYXRhLHVybDpoLnVybCxtZXRob2Q6aC5tZXRob2R9LG8pO3ZhciBqPW8uZGF0YSxmPVN0cmluZyhvLnVybCksZT1vLm1ldGhvZC50b0xvd2VyQ2FzZSgpO3N3aXRjaCh0eXBlT2Yoaikpe2Nhc2UiZWxlbWVudCI6aj1kb2N1bWVudC5pZChqKS50b1F1ZXJ5U3RyaW5nKCk7CmJyZWFrO2Nhc2Uib2JqZWN0IjpjYXNlImhhc2giOmo9T2JqZWN0LnRvUXVlcnlTdHJpbmcoaik7fWlmKHRoaXMub3B0aW9ucy5mb3JtYXQpe3ZhciBtPSJmb3JtYXQ9Iit0aGlzLm9wdGlvbnMuZm9ybWF0O2o9KGopP20rIiYiK2o6bTt9aWYodGhpcy5vcHRpb25zLmVtdWxhdGlvbiYmIVsiZ2V0IiwicG9zdCJdLmNvbnRhaW5zKGUpKXt2YXIgaz0iX21ldGhvZD0iK2U7Cmo9KGopP2srIiYiK2o6aztlPSJwb3N0Ijt9aWYodGhpcy5vcHRpb25zLnVybEVuY29kZWQmJlsicG9zdCIsInB1dCJdLmNvbnRhaW5zKGUpKXt2YXIgZz0odGhpcy5vcHRpb25zLmVuY29kaW5nKT8iOyBjaGFyc2V0PSIrdGhpcy5vcHRpb25zLmVuY29kaW5nOiIiO3RoaXMuaGVhZGVyc1siQ29udGVudC10eXBlIl09ImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCIrZzsKfWlmKCFmKXtmPWRvY3VtZW50LmxvY2F0aW9uLnBhdGhuYW1lO312YXIgaT1mLmxhc3RJbmRleE9mKCIvIik7aWYoaT4tMSYmKGk9Zi5pbmRleE9mKCIjIikpPi0xKXtmPWYuc3Vic3RyKDAsaSk7fWlmKHRoaXMub3B0aW9ucy5ub0NhY2hlKXtmKz0oZi5jb250YWlucygiPyIpPyImIjoiPyIpK1N0cmluZy51bmlxdWVJRCgpOwp9aWYoaiYmZT09ImdldCIpe2YrPShmLmNvbnRhaW5zKCI/Iik/IiYiOiI/IikrajtqPW51bGw7fXZhciBuPXRoaXMueGhyO2lmKGEpe24ub25sb2Fkc3RhcnQ9dGhpcy5sb2Fkc3RhcnQuYmluZCh0aGlzKTtuLm9ucHJvZ3Jlc3M9dGhpcy5wcm9ncmVzcy5iaW5kKHRoaXMpOwp9bi5vcGVuKGUudG9VcHBlckNhc2UoKSxmLHRoaXMub3B0aW9ucy5hc3luYyx0aGlzLm9wdGlvbnMudXNlcix0aGlzLm9wdGlvbnMucGFzc3dvcmQpO2lmKHRoaXMub3B0aW9ucy51c2VyJiYid2l0aENyZWRlbnRpYWxzIiBpbiBuKXtuLndpdGhDcmVkZW50aWFscz10cnVlOwp9bi5vbnJlYWR5c3RhdGVjaGFuZ2U9dGhpcy5vblN0YXRlQ2hhbmdlLmJpbmQodGhpcyk7T2JqZWN0LmVhY2godGhpcy5oZWFkZXJzLGZ1bmN0aW9uKHEscCl7dHJ5e24uc2V0UmVxdWVzdEhlYWRlcihwLHEpO31jYXRjaChyKXt0aGlzLmZpcmVFdmVudCgiZXhjZXB0aW9uIixbcCxxXSk7Cn19LHRoaXMpO3RoaXMuZmlyZUV2ZW50KCJyZXF1ZXN0Iik7bi5zZW5kKGopO2lmKCF0aGlzLm9wdGlvbnMuYXN5bmMpe3RoaXMub25TdGF0ZUNoYW5nZSgpO31pZih0aGlzLm9wdGlvbnMudGltZW91dCl7dGhpcy50aW1lcj10aGlzLnRpbWVvdXQuZGVsYXkodGhpcy5vcHRpb25zLnRpbWVvdXQsdGhpcyk7Cn1yZXR1cm4gdGhpczt9LGNhbmNlbDpmdW5jdGlvbigpe2lmKCF0aGlzLnJ1bm5pbmcpe3JldHVybiB0aGlzO310aGlzLnJ1bm5pbmc9ZmFsc2U7dmFyIGU9dGhpcy54aHI7ZS5hYm9ydCgpO2NsZWFyVGltZW91dCh0aGlzLnRpbWVyKTtlLm9ucmVhZHlzdGF0ZWNoYW5nZT1kOwppZihhKXtlLm9ucHJvZ3Jlc3M9ZS5vbmxvYWRzdGFydD1kO310aGlzLnhocj1uZXcgQnJvd3Nlci5SZXF1ZXN0KCk7dGhpcy5maXJlRXZlbnQoImNhbmNlbCIpO3JldHVybiB0aGlzO319KTt2YXIgYj17fTtbImdldCIsInBvc3QiLCJwdXQiLCJkZWxldGUiLCJHRVQiLCJQT1NUIiwiUFVUIiwiREVMRVRFIl0uZWFjaChmdW5jdGlvbihlKXtiW2VdPWZ1bmN0aW9uKGcpe3ZhciBmPXttZXRob2Q6ZX07CmlmKGchPW51bGwpe2YuZGF0YT1nO31yZXR1cm4gdGhpcy5zZW5kKGYpO307fSk7Yy5pbXBsZW1lbnQoYik7RWxlbWVudC5Qcm9wZXJ0aWVzLnNlbmQ9e3NldDpmdW5jdGlvbihlKXt2YXIgZj10aGlzLmdldCgic2VuZCIpLmNhbmNlbCgpO2Yuc2V0T3B0aW9ucyhlKTsKcmV0dXJuIHRoaXM7fSxnZXQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnJldHJpZXZlKCJzZW5kIik7aWYoIWUpe2U9bmV3IGMoe2RhdGE6dGhpcyxsaW5rOiJjYW5jZWwiLG1ldGhvZDp0aGlzLmdldCgibWV0aG9kIil8fCJwb3N0Iix1cmw6dGhpcy5nZXQoImFjdGlvbiIpfSk7CnRoaXMuc3RvcmUoInNlbmQiLGUpO31yZXR1cm4gZTt9fTtFbGVtZW50LmltcGxlbWVudCh7c2VuZDpmdW5jdGlvbihlKXt2YXIgZj10aGlzLmdldCgic2VuZCIpO2Yuc2VuZCh7ZGF0YTp0aGlzLHVybDplfHxmLm9wdGlvbnMudXJsfSk7cmV0dXJuIHRoaXM7fX0pO30pKCk7ClJlcXVlc3QuSFRNTD1uZXcgQ2xhc3Moe0V4dGVuZHM6UmVxdWVzdCxvcHRpb25zOnt1cGRhdGU6ZmFsc2UsYXBwZW5kOmZhbHNlLGV2YWxTY3JpcHRzOnRydWUsZmlsdGVyOmZhbHNlLGhlYWRlcnM6e0FjY2VwdDoidGV4dC9odG1sLCBhcHBsaWNhdGlvbi94bWwsIHRleHQveG1sLCAqLyoifX0sc3VjY2VzczpmdW5jdGlvbihlKXt2YXIgZD10aGlzLm9wdGlvbnMsYj10aGlzLnJlc3BvbnNlOwpiLmh0bWw9ZS5zdHJpcFNjcmlwdHMoZnVuY3Rpb24oZil7Yi5qYXZhc2NyaXB0PWY7fSk7dmFyIGM9Yi5odG1sLm1hdGNoKC88Ym9keVtePl0qPihbXHNcU10qPyk8XC9ib2R5Pi9pKTtpZihjKXtiLmh0bWw9Y1sxXTt9dmFyIGE9bmV3IEVsZW1lbnQoImRpdiIpLnNldCgiaHRtbCIsYi5odG1sKTsKYi50cmVlPWEuY2hpbGROb2RlcztiLmVsZW1lbnRzPWEuZ2V0RWxlbWVudHMoIioiKTtpZihkLmZpbHRlcil7Yi50cmVlPWIuZWxlbWVudHMuZmlsdGVyKGQuZmlsdGVyKTt9aWYoZC51cGRhdGUpe2RvY3VtZW50LmlkKGQudXBkYXRlKS5lbXB0eSgpLnNldCgiaHRtbCIsYi5odG1sKTsKfWVsc2V7aWYoZC5hcHBlbmQpe2RvY3VtZW50LmlkKGQuYXBwZW5kKS5hZG9wdChhLmdldENoaWxkcmVuKCkpO319aWYoZC5ldmFsU2NyaXB0cyl7QnJvd3Nlci5leGVjKGIuamF2YXNjcmlwdCk7fXRoaXMub25TdWNjZXNzKGIudHJlZSxiLmVsZW1lbnRzLGIuaHRtbCxiLmphdmFzY3JpcHQpOwp9fSk7RWxlbWVudC5Qcm9wZXJ0aWVzLmxvYWQ9e3NldDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmdldCgibG9hZCIpLmNhbmNlbCgpO2Iuc2V0T3B0aW9ucyhhKTtyZXR1cm4gdGhpczt9LGdldDpmdW5jdGlvbigpe3ZhciBhPXRoaXMucmV0cmlldmUoImxvYWQiKTtpZighYSl7YT1uZXcgUmVxdWVzdC5IVE1MKHtkYXRhOnRoaXMsbGluazoiY2FuY2VsIix1cGRhdGU6dGhpcyxtZXRob2Q6ImdldCJ9KTsKdGhpcy5zdG9yZSgibG9hZCIsYSk7fXJldHVybiBhO319O0VsZW1lbnQuaW1wbGVtZW50KHtsb2FkOmZ1bmN0aW9uKCl7dGhpcy5nZXQoImxvYWQiKS5zZW5kKEFycmF5LmxpbmsoYXJndW1lbnRzLHtkYXRhOlR5cGUuaXNPYmplY3QsdXJsOlR5cGUuaXNTdHJpbmd9KSk7CnJldHVybiB0aGlzO319KTtpZih0eXBlb2YgSlNPTj09InVuZGVmaW5lZCIpe3RoaXMuSlNPTj17fTt9KGZ1bmN0aW9uKCl7dmFyIHNwZWNpYWw9eyJcYiI6IlxcYiIsIlx0IjoiXFx0IiwiXG4iOiJcXG4iLCJcZiI6IlxcZiIsIlxyIjoiXFxyIiwnIic6J1xcIicsIlxcIjoiXFxcXCJ9Owp2YXIgZXNjYXBlPWZ1bmN0aW9uKGNocil7cmV0dXJuIHNwZWNpYWxbY2hyXXx8IlxcdSIrKCIwMDAwIitjaHIuY2hhckNvZGVBdCgwKS50b1N0cmluZygxNikpLnNsaWNlKC00KTt9O0pTT04udmFsaWRhdGU9ZnVuY3Rpb24oc3RyaW5nKXtzdHJpbmc9c3RyaW5nLnJlcGxhY2UoL1xcKD86WyJcXFwvYmZucnRdfHVbMC05YS1mQS1GXXs0fSkvZywiQCIpLnJlcGxhY2UoLyJbXiJcXFxuXHJdKiJ8dHJ1ZXxmYWxzZXxudWxsfC0/XGQrKD86XC5cZCopPyg/OltlRV1bK1wtXT9cZCspPy9nLCJdIikucmVwbGFjZSgvKD86Xnw6fCwpKD86XHMqXFspKy9nLCIiKTsKcmV0dXJuKC9eW1xdLDp7fVxzXSokLykudGVzdChzdHJpbmcpO307SlNPTi5lbmNvZGU9SlNPTi5zdHJpbmdpZnk/ZnVuY3Rpb24ob2JqKXtyZXR1cm4gSlNPTi5zdHJpbmdpZnkob2JqKTt9OmZ1bmN0aW9uKG9iail7aWYob2JqJiZvYmoudG9KU09OKXtvYmo9b2JqLnRvSlNPTigpOwp9c3dpdGNoKHR5cGVPZihvYmopKXtjYXNlInN0cmluZyI6cmV0dXJuJyInK29iai5yZXBsYWNlKC9bXHgwMC1ceDFmXFwiXS9nLGVzY2FwZSkrJyInO2Nhc2UiYXJyYXkiOnJldHVybiJbIitvYmoubWFwKEpTT04uZW5jb2RlKS5jbGVhbigpKyJdIjtjYXNlIm9iamVjdCI6Y2FzZSJoYXNoIjp2YXIgc3RyaW5nPVtdOwpPYmplY3QuZWFjaChvYmosZnVuY3Rpb24odmFsdWUsa2V5KXt2YXIganNvbj1KU09OLmVuY29kZSh2YWx1ZSk7aWYoanNvbil7c3RyaW5nLnB1c2goSlNPTi5lbmNvZGUoa2V5KSsiOiIranNvbik7fX0pO3JldHVybiJ7IitzdHJpbmcrIn0iO2Nhc2UibnVtYmVyIjpjYXNlImJvb2xlYW4iOnJldHVybiIiK29iajsKY2FzZSJudWxsIjpyZXR1cm4ibnVsbCI7fXJldHVybiBudWxsO307SlNPTi5kZWNvZGU9ZnVuY3Rpb24oc3RyaW5nLHNlY3VyZSl7aWYoIXN0cmluZ3x8dHlwZU9mKHN0cmluZykhPSJzdHJpbmciKXtyZXR1cm4gbnVsbDt9aWYoc2VjdXJlfHxKU09OLnNlY3VyZSl7aWYoSlNPTi5wYXJzZSl7cmV0dXJuIEpTT04ucGFyc2Uoc3RyaW5nKTsKfWlmKCFKU09OLnZhbGlkYXRlKHN0cmluZykpe3Rocm93IG5ldyBFcnJvcigiSlNPTiBjb3VsZCBub3QgZGVjb2RlIHRoZSBpbnB1dDsgc2VjdXJpdHkgaXMgZW5hYmxlZCBhbmQgdGhlIHZhbHVlIGlzIG5vdCBzZWN1cmUuIik7fX1yZXR1cm4gZXZhbCgiKCIrc3RyaW5nKyIpIik7Cn07fSkoKTtSZXF1ZXN0LkpTT049bmV3IENsYXNzKHtFeHRlbmRzOlJlcXVlc3Qsb3B0aW9uczp7c2VjdXJlOnRydWV9LGluaXRpYWxpemU6ZnVuY3Rpb24oYSl7dGhpcy5wYXJlbnQoYSk7T2JqZWN0LmFwcGVuZCh0aGlzLmhlYWRlcnMse0FjY2VwdDoiYXBwbGljYXRpb24vanNvbiIsIlgtUmVxdWVzdCI6IkpTT04ifSk7Cn0sc3VjY2VzczpmdW5jdGlvbihjKXt2YXIgYjt0cnl7Yj10aGlzLnJlc3BvbnNlLmpzb249SlNPTi5kZWNvZGUoYyx0aGlzLm9wdGlvbnMuc2VjdXJlKTt9Y2F0Y2goYSl7dGhpcy5maXJlRXZlbnQoImVycm9yIixbYyxhXSk7cmV0dXJuO31pZihiPT1udWxsKXt0aGlzLm9uRmFpbHVyZSgpOwp9ZWxzZXt0aGlzLm9uU3VjY2VzcyhiLGMpO319fSk7dmFyIENvb2tpZT1uZXcgQ2xhc3Moe0ltcGxlbWVudHM6T3B0aW9ucyxvcHRpb25zOntwYXRoOiIvIixkb21haW46ZmFsc2UsZHVyYXRpb246ZmFsc2Usc2VjdXJlOmZhbHNlLGRvY3VtZW50OmRvY3VtZW50LGVuY29kZTp0cnVlfSxpbml0aWFsaXplOmZ1bmN0aW9uKGIsYSl7dGhpcy5rZXk9YjsKdGhpcy5zZXRPcHRpb25zKGEpO30sd3JpdGU6ZnVuY3Rpb24oYil7aWYodGhpcy5vcHRpb25zLmVuY29kZSl7Yj1lbmNvZGVVUklDb21wb25lbnQoYik7fWlmKHRoaXMub3B0aW9ucy5kb21haW4pe2IrPSI7IGRvbWFpbj0iK3RoaXMub3B0aW9ucy5kb21haW47fWlmKHRoaXMub3B0aW9ucy5wYXRoKXtiKz0iOyBwYXRoPSIrdGhpcy5vcHRpb25zLnBhdGg7Cn1pZih0aGlzLm9wdGlvbnMuZHVyYXRpb24pe3ZhciBhPW5ldyBEYXRlKCk7YS5zZXRUaW1lKGEuZ2V0VGltZSgpK3RoaXMub3B0aW9ucy5kdXJhdGlvbioyNCo2MCo2MCoxMDAwKTtiKz0iOyBleHBpcmVzPSIrYS50b0dNVFN0cmluZygpO31pZih0aGlzLm9wdGlvbnMuc2VjdXJlKXtiKz0iOyBzZWN1cmUiOwp9dGhpcy5vcHRpb25zLmRvY3VtZW50LmNvb2tpZT10aGlzLmtleSsiPSIrYjtyZXR1cm4gdGhpczt9LHJlYWQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm9wdGlvbnMuZG9jdW1lbnQuY29va2llLm1hdGNoKCIoPzpefDspXFxzKiIrdGhpcy5rZXkuZXNjYXBlUmVnRXhwKCkrIj0oW147XSopIik7CnJldHVybihhKT9kZWNvZGVVUklDb21wb25lbnQoYVsxXSk6bnVsbDt9LGRpc3Bvc2U6ZnVuY3Rpb24oKXtuZXcgQ29va2llKHRoaXMua2V5LE9iamVjdC5tZXJnZSh7fSx0aGlzLm9wdGlvbnMse2R1cmF0aW9uOi0xfSkpLndyaXRlKCIiKTtyZXR1cm4gdGhpczt9fSk7CkNvb2tpZS53cml0ZT1mdW5jdGlvbihiLGMsYSl7cmV0dXJuIG5ldyBDb29raWUoYixhKS53cml0ZShjKTt9O0Nvb2tpZS5yZWFkPWZ1bmN0aW9uKGEpe3JldHVybiBuZXcgQ29va2llKGEpLnJlYWQoKTt9O0Nvb2tpZS5kaXNwb3NlPWZ1bmN0aW9uKGIsYSl7cmV0dXJuIG5ldyBDb29raWUoYixhKS5kaXNwb3NlKCk7Cn07KGZ1bmN0aW9uKGksayl7dmFyIGwsZixlPVtdLGMsYixkPWsuY3JlYXRlRWxlbWVudCgiZGl2Iik7dmFyIGc9ZnVuY3Rpb24oKXtjbGVhclRpbWVvdXQoYik7aWYobCl7cmV0dXJuO31Ccm93c2VyLmxvYWRlZD1sPXRydWU7ay5yZW1vdmVMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsZykucmVtb3ZlTGlzdGVuZXIoInJlYWR5c3RhdGVjaGFuZ2UiLGEpOwprLmZpcmVFdmVudCgiZG9tcmVhZHkiKTtpLmZpcmVFdmVudCgiZG9tcmVhZHkiKTt9O3ZhciBhPWZ1bmN0aW9uKCl7Zm9yKHZhciBtPWUubGVuZ3RoO20tLTspe2lmKGVbbV0oKSl7ZygpO3JldHVybiB0cnVlO319cmV0dXJuIGZhbHNlO307dmFyIGo9ZnVuY3Rpb24oKXtjbGVhclRpbWVvdXQoYik7CmlmKCFhKCkpe2I9c2V0VGltZW91dChqLDEwKTt9fTtrLmFkZExpc3RlbmVyKCJET01Db250ZW50TG9hZGVkIixnKTt2YXIgaD1mdW5jdGlvbigpe3RyeXtkLmRvU2Nyb2xsKCk7cmV0dXJuIHRydWU7fWNhdGNoKG0pe31yZXR1cm4gZmFsc2U7fTtpZihkLmRvU2Nyb2xsJiYhaCgpKXtlLnB1c2goaCk7CmM9dHJ1ZTt9aWYoay5yZWFkeVN0YXRlKXtlLnB1c2goZnVuY3Rpb24oKXt2YXIgbT1rLnJlYWR5U3RhdGU7cmV0dXJuKG09PSJsb2FkZWQifHxtPT0iY29tcGxldGUiKTt9KTt9aWYoIm9ucmVhZHlzdGF0ZWNoYW5nZSIgaW4gayl7ay5hZGRMaXN0ZW5lcigicmVhZHlzdGF0ZWNoYW5nZSIsYSk7Cn1lbHNle2M9dHJ1ZTt9aWYoYyl7aigpO31FbGVtZW50LkV2ZW50cy5kb21yZWFkeT17b25BZGQ6ZnVuY3Rpb24obSl7aWYobCl7bS5jYWxsKHRoaXMpO319fTtFbGVtZW50LkV2ZW50cy5sb2FkPXtiYXNlOiJsb2FkIixvbkFkZDpmdW5jdGlvbihtKXtpZihmJiZ0aGlzPT1pKXttLmNhbGwodGhpcyk7Cn19LGNvbmRpdGlvbjpmdW5jdGlvbigpe2lmKHRoaXM9PWkpe2coKTtkZWxldGUgRWxlbWVudC5FdmVudHMubG9hZDt9cmV0dXJuIHRydWU7fX07aS5hZGRFdmVudCgibG9hZCIsZnVuY3Rpb24oKXtmPXRydWU7fSk7fSkod2luZG93LGRvY3VtZW50KTsoZnVuY3Rpb24oKXt2YXIgU3dpZmY9dGhpcy5Td2lmZj1uZXcgQ2xhc3Moe0ltcGxlbWVudHM6T3B0aW9ucyxvcHRpb25zOntpZDpudWxsLGhlaWdodDoxLHdpZHRoOjEsY29udGFpbmVyOm51bGwscHJvcGVydGllczp7fSxwYXJhbXM6e3F1YWxpdHk6ImhpZ2giLGFsbG93U2NyaXB0QWNjZXNzOiJhbHdheXMiLHdNb2RlOiJ3aW5kb3ciLHN3TGl2ZUNvbm5lY3Q6dHJ1ZX0sY2FsbEJhY2tzOnt9LHZhcnM6e319LHRvRWxlbWVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLm9iamVjdDsKfSxpbml0aWFsaXplOmZ1bmN0aW9uKHBhdGgsb3B0aW9ucyl7dGhpcy5pbnN0YW5jZT0iU3dpZmZfIitTdHJpbmcudW5pcXVlSUQoKTt0aGlzLnNldE9wdGlvbnMob3B0aW9ucyk7b3B0aW9ucz10aGlzLm9wdGlvbnM7dmFyIGlkPXRoaXMuaWQ9b3B0aW9ucy5pZHx8dGhpcy5pbnN0YW5jZTsKdmFyIGNvbnRhaW5lcj1kb2N1bWVudC5pZChvcHRpb25zLmNvbnRhaW5lcik7U3dpZmYuQ2FsbEJhY2tzW3RoaXMuaW5zdGFuY2VdPXt9O3ZhciBwYXJhbXM9b3B0aW9ucy5wYXJhbXMsdmFycz1vcHRpb25zLnZhcnMsY2FsbEJhY2tzPW9wdGlvbnMuY2FsbEJhY2tzOwp2YXIgcHJvcGVydGllcz1PYmplY3QuYXBwZW5kKHtoZWlnaHQ6b3B0aW9ucy5oZWlnaHQsd2lkdGg6b3B0aW9ucy53aWR0aH0sb3B0aW9ucy5wcm9wZXJ0aWVzKTt2YXIgc2VsZj10aGlzO2Zvcih2YXIgY2FsbEJhY2sgaW4gY2FsbEJhY2tzKXtTd2lmZi5DYWxsQmFja3NbdGhpcy5pbnN0YW5jZV1bY2FsbEJhY2tdPShmdW5jdGlvbihvcHRpb24pe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBvcHRpb24uYXBwbHkoc2VsZi5vYmplY3QsYXJndW1lbnRzKTsKfTt9KShjYWxsQmFja3NbY2FsbEJhY2tdKTt2YXJzW2NhbGxCYWNrXT0iU3dpZmYuQ2FsbEJhY2tzLiIrdGhpcy5pbnN0YW5jZSsiLiIrY2FsbEJhY2s7fXBhcmFtcy5mbGFzaFZhcnM9T2JqZWN0LnRvUXVlcnlTdHJpbmcodmFycyk7aWYoQnJvd3Nlci5pZSl7cHJvcGVydGllcy5jbGFzc2lkPSJjbHNpZDpEMjdDREI2RS1BRTZELTExY2YtOTZCOC00NDQ1NTM1NDAwMDAiOwpwYXJhbXMubW92aWU9cGF0aDt9ZWxzZXtwcm9wZXJ0aWVzLnR5cGU9ImFwcGxpY2F0aW9uL3gtc2hvY2t3YXZlLWZsYXNoIjt9cHJvcGVydGllcy5kYXRhPXBhdGg7dmFyIGJ1aWxkPSc8b2JqZWN0IGlkPSInK2lkKyciJztmb3IodmFyIHByb3BlcnR5IGluIHByb3BlcnRpZXMpe2J1aWxkKz0iICIrcHJvcGVydHkrJz0iJytwcm9wZXJ0aWVzW3Byb3BlcnR5XSsnIic7Cn1idWlsZCs9Ij4iO2Zvcih2YXIgcGFyYW0gaW4gcGFyYW1zKXtpZihwYXJhbXNbcGFyYW1dKXtidWlsZCs9JzxwYXJhbSBuYW1lPSInK3BhcmFtKyciIHZhbHVlPSInK3BhcmFtc1twYXJhbV0rJyIgLz4nO319YnVpbGQrPSI8L29iamVjdD4iO3RoaXMub2JqZWN0PSgoY29udGFpbmVyKT9jb250YWluZXIuZW1wdHkoKTpuZXcgRWxlbWVudCgiZGl2IikpLnNldCgiaHRtbCIsYnVpbGQpLmZpcnN0Q2hpbGQ7Cn0scmVwbGFjZXM6ZnVuY3Rpb24oZWxlbWVudCl7ZWxlbWVudD1kb2N1bWVudC5pZChlbGVtZW50LHRydWUpO2VsZW1lbnQucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQodGhpcy50b0VsZW1lbnQoKSxlbGVtZW50KTtyZXR1cm4gdGhpczt9LGluamVjdDpmdW5jdGlvbihlbGVtZW50KXtkb2N1bWVudC5pZChlbGVtZW50LHRydWUpLmFwcGVuZENoaWxkKHRoaXMudG9FbGVtZW50KCkpOwpyZXR1cm4gdGhpczt9LHJlbW90ZTpmdW5jdGlvbigpe3JldHVybiBTd2lmZi5yZW1vdGUuYXBwbHkoU3dpZmYsW3RoaXMudG9FbGVtZW50KCldLmFwcGVuZChhcmd1bWVudHMpKTt9fSk7U3dpZmYuQ2FsbEJhY2tzPXt9O1N3aWZmLnJlbW90ZT1mdW5jdGlvbihvYmosZm4pe3ZhciBycz1vYmouQ2FsbEZ1bmN0aW9uKCc8aW52b2tlIG5hbWU9IicrZm4rJyIgcmV0dXJudHlwZT0iamF2YXNjcmlwdCI+JytfX2ZsYXNoX19hcmd1bWVudHNUb1hNTChhcmd1bWVudHMsMikrIjwvaW52b2tlPiIpOwpyZXR1cm4gZXZhbChycyk7fTt9KSgpOw==",
                "body": "LyoKLS0tCk1vb1Rvb2xzOiB0aGUgamF2YXNjcmlwdCBmcmFtZXdvcmsKCndlYiBidWlsZDoKIC0gaHR0cDovL21vb3Rvb2xzLm5ldC9jb3JlLzdjNTZjZmVmOWRkZGNmMTcwYTVkNjhlM2ZiNjFjZmQ3CgpwYWNrYWdlciBidWlsZDoKIC0gcGFja2FnZXIgYnVpbGQgQ29yZS9Db3JlIENvcmUvQXJyYXkgQ29yZS9TdHJpbmcgQ29yZS9OdW1iZXIgQ29yZS9GdW5jdGlvbiBDb3JlL09iamVjdCBDb3JlL0V2ZW50IENvcmUvQnJvd3NlciBDb3JlL0NsYXNzIENvcmUvQ2xhc3MuRXh0cmFzIENvcmUvU2xpY2suUGFyc2VyIENvcmUvU2xpY2suRmluZGVyIENvcmUvRWxlbWVudCBDb3JlL0VsZW1lbnQuU3R5bGUgQ29yZS9FbGVtZW50LkV2ZW50IENvcmUvRWxlbWVudC5EaW1lbnNpb25zIENvcmUvRnggQ29yZS9GeC5DU1MgQ29yZS9GeC5Ud2VlbiBDb3JlL0Z4Lk1vcnBoIENvcmUvRnguVHJhbnNpdGlvbnMgQ29yZS9SZXF1ZXN0IENvcmUvUmVxdWVzdC5IVE1MIENvcmUvUmVxdWVzdC5KU09OIENvcmUvQ29va2llIENvcmUvSlNPTiBDb3JlL0RPTVJlYWR5IENvcmUvU3dpZmYKCmNvcHlyaWdodHM6CiAgLSBbTW9vVG9vbHNdKGh0dHA6Ly9tb290b29scy5uZXQpCgpsaWNlbnNlczoKICAtIFtNSVQgTGljZW5zZV0oaHR0cDovL21vb3Rvb2xzLm5ldC9saWNlbnNlLnR4dCkKLi4uCiovCihmdW5jdGlvbigpe3RoaXMuTW9vVG9vbHM9e3ZlcnNpb246IjEuMy4yIixidWlsZDoiYzlmMWZmMTBlOWU3ZmFjYjY1ZTk0ODEwNDllZDFiNDUwOTU5ZDU4NyJ9O3ZhciBvPXRoaXMudHlwZU9mPWZ1bmN0aW9uKGkpe2lmKGk9PW51bGwpe3JldHVybiJudWxsIjt9aWYoaS4kZmFtaWx5KXtyZXR1cm4gaS4kZmFtaWx5KCk7Cn1pZihpLm5vZGVOYW1lKXtpZihpLm5vZGVUeXBlPT0xKXtyZXR1cm4iZWxlbWVudCI7fWlmKGkubm9kZVR5cGU9PTMpe3JldHVybigvXFMvKS50ZXN0KGkubm9kZVZhbHVlKT8idGV4dG5vZGUiOiJ3aGl0ZXNwYWNlIjt9fWVsc2V7aWYodHlwZW9mIGkubGVuZ3RoPT0ibnVtYmVyIil7aWYoaS5jYWxsZWUpe3JldHVybiJhcmd1bWVudHMiOwp9aWYoIml0ZW0iIGluIGkpe3JldHVybiJjb2xsZWN0aW9uIjt9fX1yZXR1cm4gdHlwZW9mIGk7fTt2YXIgaj10aGlzLmluc3RhbmNlT2Y9ZnVuY3Rpb24odCxpKXtpZih0PT1udWxsKXtyZXR1cm4gZmFsc2U7fXZhciBzPXQuJGNvbnN0cnVjdG9yfHx0LmNvbnN0cnVjdG9yOwp3aGlsZShzKXtpZihzPT09aSl7cmV0dXJuIHRydWU7fXM9cy5wYXJlbnQ7fXJldHVybiB0IGluc3RhbmNlb2YgaTt9O3ZhciBmPXRoaXMuRnVuY3Rpb247dmFyIHA9dHJ1ZTtmb3IodmFyIGsgaW4ge3RvU3RyaW5nOjF9KXtwPW51bGw7fWlmKHApe3A9WyJoYXNPd25Qcm9wZXJ0eSIsInZhbHVlT2YiLCJpc1Byb3RvdHlwZU9mIiwicHJvcGVydHlJc0VudW1lcmFibGUiLCJ0b0xvY2FsZVN0cmluZyIsInRvU3RyaW5nIiwiY29uc3RydWN0b3IiXTsKfWYucHJvdG90eXBlLm92ZXJsb2FkU2V0dGVyPWZ1bmN0aW9uKHMpe3ZhciBpPXRoaXM7cmV0dXJuIGZ1bmN0aW9uKHUsdCl7aWYodT09bnVsbCl7cmV0dXJuIHRoaXM7fWlmKHN8fHR5cGVvZiB1IT0ic3RyaW5nIil7Zm9yKHZhciB2IGluIHUpe2kuY2FsbCh0aGlzLHYsdVt2XSk7Cn1pZihwKXtmb3IodmFyIHc9cC5sZW5ndGg7dy0tOyl7dj1wW3ddO2lmKHUuaGFzT3duUHJvcGVydHkodikpe2kuY2FsbCh0aGlzLHYsdVt2XSk7fX19fWVsc2V7aS5jYWxsKHRoaXMsdSx0KTt9cmV0dXJuIHRoaXM7fTt9O2YucHJvdG90eXBlLm92ZXJsb2FkR2V0dGVyPWZ1bmN0aW9uKHMpe3ZhciBpPXRoaXM7CnJldHVybiBmdW5jdGlvbih1KXt2YXIgdix0O2lmKHN8fHR5cGVvZiB1IT0ic3RyaW5nIil7dj11O31lbHNle2lmKGFyZ3VtZW50cy5sZW5ndGg+MSl7dj1hcmd1bWVudHM7fX1pZih2KXt0PXt9O2Zvcih2YXIgdz0wO3c8di5sZW5ndGg7dysrKXt0W3Zbd11dPWkuY2FsbCh0aGlzLHZbd10pOwp9fWVsc2V7dD1pLmNhbGwodGhpcyx1KTt9cmV0dXJuIHQ7fTt9O2YucHJvdG90eXBlLmV4dGVuZD1mdW5jdGlvbihpLHMpe3RoaXNbaV09czt9Lm92ZXJsb2FkU2V0dGVyKCk7Zi5wcm90b3R5cGUuaW1wbGVtZW50PWZ1bmN0aW9uKGkscyl7dGhpcy5wcm90b3R5cGVbaV09czsKfS5vdmVybG9hZFNldHRlcigpO3ZhciBuPUFycmF5LnByb3RvdHlwZS5zbGljZTtmLmZyb209ZnVuY3Rpb24oaSl7cmV0dXJuKG8oaSk9PSJmdW5jdGlvbiIpP2k6ZnVuY3Rpb24oKXtyZXR1cm4gaTt9O307QXJyYXkuZnJvbT1mdW5jdGlvbihpKXtpZihpPT1udWxsKXtyZXR1cm5bXTsKfXJldHVybihhLmlzRW51bWVyYWJsZShpKSYmdHlwZW9mIGkhPSJzdHJpbmciKT8obyhpKT09ImFycmF5Iik/aTpuLmNhbGwoaSk6W2ldO307TnVtYmVyLmZyb209ZnVuY3Rpb24ocyl7dmFyIGk9cGFyc2VGbG9hdChzKTtyZXR1cm4gaXNGaW5pdGUoaSk/aTpudWxsOwp9O1N0cmluZy5mcm9tPWZ1bmN0aW9uKGkpe3JldHVybiBpKyIiO307Zi5pbXBsZW1lbnQoe2hpZGU6ZnVuY3Rpb24oKXt0aGlzLiRoaWRkZW49dHJ1ZTtyZXR1cm4gdGhpczt9LHByb3RlY3Q6ZnVuY3Rpb24oKXt0aGlzLiRwcm90ZWN0ZWQ9dHJ1ZTtyZXR1cm4gdGhpczsKfX0pO3ZhciBhPXRoaXMuVHlwZT1mdW5jdGlvbih1LHQpe2lmKHUpe3ZhciBzPXUudG9Mb3dlckNhc2UoKTt2YXIgaT1mdW5jdGlvbih2KXtyZXR1cm4obyh2KT09cyk7fTthWyJpcyIrdV09aTtpZih0IT1udWxsKXt0LnByb3RvdHlwZS4kZmFtaWx5PShmdW5jdGlvbigpe3JldHVybiBzOwp9KS5oaWRlKCk7fX1pZih0PT1udWxsKXtyZXR1cm4gbnVsbDt9dC5leHRlbmQodGhpcyk7dC4kY29uc3RydWN0b3I9YTt0LnByb3RvdHlwZS4kY29uc3RydWN0b3I9dDtyZXR1cm4gdDt9O3ZhciBlPU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7YS5pc0VudW1lcmFibGU9ZnVuY3Rpb24oaSl7cmV0dXJuKGkhPW51bGwmJnR5cGVvZiBpLmxlbmd0aD09Im51bWJlciImJmUuY2FsbChpKSE9IltvYmplY3QgRnVuY3Rpb25dIik7Cn07dmFyIHE9e307dmFyIHI9ZnVuY3Rpb24oaSl7dmFyIHM9byhpLnByb3RvdHlwZSk7cmV0dXJuIHFbc118fChxW3NdPVtdKTt9O3ZhciBiPWZ1bmN0aW9uKHQseCl7aWYoeCYmeC4kaGlkZGVuKXtyZXR1cm47fXZhciBzPXIodGhpcyk7Zm9yKHZhciB1PTA7dTxzLmxlbmd0aDsKdSsrKXt2YXIgdz1zW3VdO2lmKG8odyk9PSJ0eXBlIil7Yi5jYWxsKHcsdCx4KTt9ZWxzZXt3LmNhbGwodGhpcyx0LHgpO319dmFyIHY9dGhpcy5wcm90b3R5cGVbdF07aWYodj09bnVsbHx8IXYuJHByb3RlY3RlZCl7dGhpcy5wcm90b3R5cGVbdF09eDt9aWYodGhpc1t0XT09bnVsbCYmbyh4KT09ImZ1bmN0aW9uIil7bS5jYWxsKHRoaXMsdCxmdW5jdGlvbihpKXtyZXR1cm4geC5hcHBseShpLG4uY2FsbChhcmd1bWVudHMsMSkpOwp9KTt9fTt2YXIgbT1mdW5jdGlvbihpLHQpe2lmKHQmJnQuJGhpZGRlbil7cmV0dXJuO312YXIgcz10aGlzW2ldO2lmKHM9PW51bGx8fCFzLiRwcm90ZWN0ZWQpe3RoaXNbaV09dDt9fTthLmltcGxlbWVudCh7aW1wbGVtZW50OmIub3ZlcmxvYWRTZXR0ZXIoKSxleHRlbmQ6bS5vdmVybG9hZFNldHRlcigpLGFsaWFzOmZ1bmN0aW9uKGkscyl7Yi5jYWxsKHRoaXMsaSx0aGlzLnByb3RvdHlwZVtzXSk7Cn0ub3ZlcmxvYWRTZXR0ZXIoKSxtaXJyb3I6ZnVuY3Rpb24oaSl7cih0aGlzKS5wdXNoKGkpO3JldHVybiB0aGlzO319KTtuZXcgYSgiVHlwZSIsYSk7dmFyIGQ9ZnVuY3Rpb24ocyx3LHUpe3ZhciB0PSh3IT1PYmplY3QpLEE9dy5wcm90b3R5cGU7aWYodCl7dz1uZXcgYShzLHcpOwp9Zm9yKHZhciB4PTAsdj11Lmxlbmd0aDt4PHY7eCsrKXt2YXIgQj11W3hdLHo9d1tCXSx5PUFbQl07aWYoeil7ei5wcm90ZWN0KCk7fWlmKHQmJnkpe2RlbGV0ZSBBW0JdO0FbQl09eS5wcm90ZWN0KCk7fX1pZih0KXt3LmltcGxlbWVudChBKTt9cmV0dXJuIGQ7fTtkKCJTdHJpbmciLFN0cmluZyxbImNoYXJBdCIsImNoYXJDb2RlQXQiLCJjb25jYXQiLCJpbmRleE9mIiwibGFzdEluZGV4T2YiLCJtYXRjaCIsInF1b3RlIiwicmVwbGFjZSIsInNlYXJjaCIsInNsaWNlIiwic3BsaXQiLCJzdWJzdHIiLCJzdWJzdHJpbmciLCJ0b0xvd2VyQ2FzZSIsInRvVXBwZXJDYXNlIl0pKCJBcnJheSIsQXJyYXksWyJwb3AiLCJwdXNoIiwicmV2ZXJzZSIsInNoaWZ0Iiwic29ydCIsInNwbGljZSIsInVuc2hpZnQiLCJjb25jYXQiLCJqb2luIiwic2xpY2UiLCJpbmRleE9mIiwibGFzdEluZGV4T2YiLCJmaWx0ZXIiLCJmb3JFYWNoIiwiZXZlcnkiLCJtYXAiLCJzb21lIiwicmVkdWNlIiwicmVkdWNlUmlnaHQiXSkoIk51bWJlciIsTnVtYmVyLFsidG9FeHBvbmVudGlhbCIsInRvRml4ZWQiLCJ0b0xvY2FsZVN0cmluZyIsInRvUHJlY2lzaW9uIl0pKCJGdW5jdGlvbiIsZixbImFwcGx5IiwiY2FsbCIsImJpbmQiXSkoIlJlZ0V4cCIsUmVnRXhwLFsiZXhlYyIsInRlc3QiXSkoIk9iamVjdCIsT2JqZWN0LFsiY3JlYXRlIiwiZGVmaW5lUHJvcGVydHkiLCJkZWZpbmVQcm9wZXJ0aWVzIiwia2V5cyIsImdldFByb3RvdHlwZU9mIiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwiZ2V0T3duUHJvcGVydHlOYW1lcyIsInByZXZlbnRFeHRlbnNpb25zIiwiaXNFeHRlbnNpYmxlIiwic2VhbCIsImlzU2VhbGVkIiwiZnJlZXplIiwiaXNGcm96ZW4iXSkoIkRhdGUiLERhdGUsWyJub3ciXSk7Ck9iamVjdC5leHRlbmQ9bS5vdmVybG9hZFNldHRlcigpO0RhdGUuZXh0ZW5kKCJub3ciLGZ1bmN0aW9uKCl7cmV0dXJuICsobmV3IERhdGUpO30pO25ldyBhKCJCb29sZWFuIixCb29sZWFuKTtOdW1iZXIucHJvdG90eXBlLiRmYW1pbHk9ZnVuY3Rpb24oKXtyZXR1cm4gaXNGaW5pdGUodGhpcyk/Im51bWJlciI6Im51bGwiOwp9LmhpZGUoKTtOdW1iZXIuZXh0ZW5kKCJyYW5kb20iLGZ1bmN0aW9uKHMsaSl7cmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSooaS1zKzEpK3MpO30pO3ZhciBnPU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7T2JqZWN0LmV4dGVuZCgiZm9yRWFjaCIsZnVuY3Rpb24oaSx0LHUpe2Zvcih2YXIgcyBpbiBpKXtpZihnLmNhbGwoaSxzKSl7dC5jYWxsKHUsaVtzXSxzLGkpOwp9fX0pO09iamVjdC5lYWNoPU9iamVjdC5mb3JFYWNoO0FycmF5LmltcGxlbWVudCh7Zm9yRWFjaDpmdW5jdGlvbih1LHYpe2Zvcih2YXIgdD0wLHM9dGhpcy5sZW5ndGg7dDxzO3QrKyl7aWYodCBpbiB0aGlzKXt1LmNhbGwodix0aGlzW3RdLHQsdGhpcyk7fX19LGVhY2g6ZnVuY3Rpb24oaSxzKXtBcnJheS5mb3JFYWNoKHRoaXMsaSxzKTsKcmV0dXJuIHRoaXM7fX0pO3ZhciBsPWZ1bmN0aW9uKGkpe3N3aXRjaChvKGkpKXtjYXNlImFycmF5IjpyZXR1cm4gaS5jbG9uZSgpO2Nhc2Uib2JqZWN0IjpyZXR1cm4gT2JqZWN0LmNsb25lKGkpO2RlZmF1bHQ6cmV0dXJuIGk7fX07QXJyYXkuaW1wbGVtZW50KCJjbG9uZSIsZnVuY3Rpb24oKXt2YXIgcz10aGlzLmxlbmd0aCx0PW5ldyBBcnJheShzKTsKd2hpbGUocy0tKXt0W3NdPWwodGhpc1tzXSk7fXJldHVybiB0O30pO3ZhciBoPWZ1bmN0aW9uKHMsaSx0KXtzd2l0Y2gobyh0KSl7Y2FzZSJvYmplY3QiOmlmKG8oc1tpXSk9PSJvYmplY3QiKXtPYmplY3QubWVyZ2Uoc1tpXSx0KTt9ZWxzZXtzW2ldPU9iamVjdC5jbG9uZSh0KTsKfWJyZWFrO2Nhc2UiYXJyYXkiOnNbaV09dC5jbG9uZSgpO2JyZWFrO2RlZmF1bHQ6c1tpXT10O31yZXR1cm4gczt9O09iamVjdC5leHRlbmQoe21lcmdlOmZ1bmN0aW9uKHosdSx0KXtpZihvKHUpPT0ic3RyaW5nIil7cmV0dXJuIGgoeix1LHQpO31mb3IodmFyIHk9MSxzPWFyZ3VtZW50cy5sZW5ndGg7Cnk8czt5Kyspe3ZhciB3PWFyZ3VtZW50c1t5XTtmb3IodmFyIHggaW4gdyl7aCh6LHgsd1t4XSk7fX1yZXR1cm4gejt9LGNsb25lOmZ1bmN0aW9uKGkpe3ZhciB0PXt9O2Zvcih2YXIgcyBpbiBpKXt0W3NdPWwoaVtzXSk7fXJldHVybiB0O30sYXBwZW5kOmZ1bmN0aW9uKHcpe2Zvcih2YXIgdj0xLHQ9YXJndW1lbnRzLmxlbmd0aDsKdjx0O3YrKyl7dmFyIHM9YXJndW1lbnRzW3ZdfHx7fTtmb3IodmFyIHUgaW4gcyl7d1t1XT1zW3VdO319cmV0dXJuIHc7fX0pO1siT2JqZWN0IiwiV2hpdGVTcGFjZSIsIlRleHROb2RlIiwiQ29sbGVjdGlvbiIsIkFyZ3VtZW50cyJdLmVhY2goZnVuY3Rpb24oaSl7bmV3IGEoaSk7Cn0pO3ZhciBjPURhdGUubm93KCk7U3RyaW5nLmV4dGVuZCgidW5pcXVlSUQiLGZ1bmN0aW9uKCl7cmV0dXJuKGMrKykudG9TdHJpbmcoMzYpO30pO30pKCk7QXJyYXkuaW1wbGVtZW50KHtldmVyeTpmdW5jdGlvbihjLGQpe2Zvcih2YXIgYj0wLGE9dGhpcy5sZW5ndGg7CmI8YTtiKyspe2lmKChiIGluIHRoaXMpJiYhYy5jYWxsKGQsdGhpc1tiXSxiLHRoaXMpKXtyZXR1cm4gZmFsc2U7fX1yZXR1cm4gdHJ1ZTt9LGZpbHRlcjpmdW5jdGlvbihkLGUpe3ZhciBjPVtdO2Zvcih2YXIgYj0wLGE9dGhpcy5sZW5ndGg7YjxhO2IrKyl7aWYoKGIgaW4gdGhpcykmJmQuY2FsbChlLHRoaXNbYl0sYix0aGlzKSl7Yy5wdXNoKHRoaXNbYl0pOwp9fXJldHVybiBjO30saW5kZXhPZjpmdW5jdGlvbihjLGQpe3ZhciBhPXRoaXMubGVuZ3RoO2Zvcih2YXIgYj0oZDwwKT9NYXRoLm1heCgwLGErZCk6ZHx8MDtiPGE7YisrKXtpZih0aGlzW2JdPT09Yyl7cmV0dXJuIGI7fX1yZXR1cm4gLTE7fSxtYXA6ZnVuY3Rpb24oZCxlKXt2YXIgYz1bXTsKZm9yKHZhciBiPTAsYT10aGlzLmxlbmd0aDtiPGE7YisrKXtpZihiIGluIHRoaXMpe2NbYl09ZC5jYWxsKGUsdGhpc1tiXSxiLHRoaXMpO319cmV0dXJuIGM7fSxzb21lOmZ1bmN0aW9uKGMsZCl7Zm9yKHZhciBiPTAsYT10aGlzLmxlbmd0aDtiPGE7YisrKXtpZigoYiBpbiB0aGlzKSYmYy5jYWxsKGQsdGhpc1tiXSxiLHRoaXMpKXtyZXR1cm4gdHJ1ZTsKfX1yZXR1cm4gZmFsc2U7fSxjbGVhbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLmZpbHRlcihmdW5jdGlvbihhKXtyZXR1cm4gYSE9bnVsbDt9KTt9LGludm9rZTpmdW5jdGlvbihhKXt2YXIgYj1BcnJheS5zbGljZShhcmd1bWVudHMsMSk7cmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uKGMpe3JldHVybiBjW2FdLmFwcGx5KGMsYik7Cn0pO30sYXNzb2NpYXRlOmZ1bmN0aW9uKGMpe3ZhciBkPXt9LGI9TWF0aC5taW4odGhpcy5sZW5ndGgsYy5sZW5ndGgpO2Zvcih2YXIgYT0wO2E8YjthKyspe2RbY1thXV09dGhpc1thXTt9cmV0dXJuIGQ7fSxsaW5rOmZ1bmN0aW9uKGMpe3ZhciBhPXt9O2Zvcih2YXIgZT0wLGI9dGhpcy5sZW5ndGg7CmU8YjtlKyspe2Zvcih2YXIgZCBpbiBjKXtpZihjW2RdKHRoaXNbZV0pKXthW2RdPXRoaXNbZV07ZGVsZXRlIGNbZF07YnJlYWs7fX19cmV0dXJuIGE7fSxjb250YWluczpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLmluZGV4T2YoYSxiKSE9LTE7fSxhcHBlbmQ6ZnVuY3Rpb24oYSl7dGhpcy5wdXNoLmFwcGx5KHRoaXMsYSk7CnJldHVybiB0aGlzO30sZ2V0TGFzdDpmdW5jdGlvbigpe3JldHVybih0aGlzLmxlbmd0aCk/dGhpc1t0aGlzLmxlbmd0aC0xXTpudWxsO30sZ2V0UmFuZG9tOmZ1bmN0aW9uKCl7cmV0dXJuKHRoaXMubGVuZ3RoKT90aGlzW051bWJlci5yYW5kb20oMCx0aGlzLmxlbmd0aC0xKV06bnVsbDsKfSxpbmNsdWRlOmZ1bmN0aW9uKGEpe2lmKCF0aGlzLmNvbnRhaW5zKGEpKXt0aGlzLnB1c2goYSk7fXJldHVybiB0aGlzO30sY29tYmluZTpmdW5jdGlvbihjKXtmb3IodmFyIGI9MCxhPWMubGVuZ3RoO2I8YTtiKyspe3RoaXMuaW5jbHVkZShjW2JdKTt9cmV0dXJuIHRoaXM7Cn0sZXJhc2U6ZnVuY3Rpb24oYil7Zm9yKHZhciBhPXRoaXMubGVuZ3RoO2EtLTspe2lmKHRoaXNbYV09PT1iKXt0aGlzLnNwbGljZShhLDEpO319cmV0dXJuIHRoaXM7fSxlbXB0eTpmdW5jdGlvbigpe3RoaXMubGVuZ3RoPTA7cmV0dXJuIHRoaXM7fSxmbGF0dGVuOmZ1bmN0aW9uKCl7dmFyIGQ9W107CmZvcih2YXIgYj0wLGE9dGhpcy5sZW5ndGg7YjxhO2IrKyl7dmFyIGM9dHlwZU9mKHRoaXNbYl0pO2lmKGM9PSJudWxsIil7Y29udGludWU7fWQ9ZC5jb25jYXQoKGM9PSJhcnJheSJ8fGM9PSJjb2xsZWN0aW9uInx8Yz09ImFyZ3VtZW50cyJ8fGluc3RhbmNlT2YodGhpc1tiXSxBcnJheSkpP0FycmF5LmZsYXR0ZW4odGhpc1tiXSk6dGhpc1tiXSk7Cn1yZXR1cm4gZDt9LHBpY2s6ZnVuY3Rpb24oKXtmb3IodmFyIGI9MCxhPXRoaXMubGVuZ3RoO2I8YTtiKyspe2lmKHRoaXNbYl0hPW51bGwpe3JldHVybiB0aGlzW2JdO319cmV0dXJuIG51bGw7fSxoZXhUb1JnYjpmdW5jdGlvbihiKXtpZih0aGlzLmxlbmd0aCE9Myl7cmV0dXJuIG51bGw7Cn12YXIgYT10aGlzLm1hcChmdW5jdGlvbihjKXtpZihjLmxlbmd0aD09MSl7Yys9Yzt9cmV0dXJuIGMudG9JbnQoMTYpO30pO3JldHVybihiKT9hOiJyZ2IoIithKyIpIjt9LHJnYlRvSGV4OmZ1bmN0aW9uKGQpe2lmKHRoaXMubGVuZ3RoPDMpe3JldHVybiBudWxsO31pZih0aGlzLmxlbmd0aD09NCYmdGhpc1szXT09MCYmIWQpe3JldHVybiJ0cmFuc3BhcmVudCI7Cn12YXIgYj1bXTtmb3IodmFyIGE9MDthPDM7YSsrKXt2YXIgYz0odGhpc1thXS0wKS50b1N0cmluZygxNik7Yi5wdXNoKChjLmxlbmd0aD09MSk/IjAiK2M6Yyk7fXJldHVybihkKT9iOiIjIitiLmpvaW4oIiIpO319KTtTdHJpbmcuaW1wbGVtZW50KHt0ZXN0OmZ1bmN0aW9uKGEsYil7cmV0dXJuKCh0eXBlT2YoYSk9PSJyZWdleHAiKT9hOm5ldyBSZWdFeHAoIiIrYSxiKSkudGVzdCh0aGlzKTsKfSxjb250YWluczpmdW5jdGlvbihhLGIpe3JldHVybihiKT8oYit0aGlzK2IpLmluZGV4T2YoYithK2IpPi0xOnRoaXMuaW5kZXhPZihhKT4tMTt9LHRyaW06ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yZXBsYWNlKC9eXHMrfFxzKyQvZywiIik7fSxjbGVhbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLnJlcGxhY2UoL1xzKy9nLCIgIikudHJpbSgpOwp9LGNhbWVsQ2FzZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnJlcGxhY2UoLy1cRC9nLGZ1bmN0aW9uKGEpe3JldHVybiBhLmNoYXJBdCgxKS50b1VwcGVyQ2FzZSgpO30pO30saHlwaGVuYXRlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmVwbGFjZSgvW0EtWl0vZyxmdW5jdGlvbihhKXtyZXR1cm4oIi0iK2EuY2hhckF0KDApLnRvTG93ZXJDYXNlKCkpOwp9KTt9LGNhcGl0YWxpemU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yZXBsYWNlKC9cYlthLXpdL2csZnVuY3Rpb24oYSl7cmV0dXJuIGEudG9VcHBlckNhc2UoKTt9KTt9LGVzY2FwZVJlZ0V4cDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnJlcGxhY2UoLyhbLS4qKz9eJHt9KCl8W1xdXC9cXF0pL2csIlxcJDEiKTsKfSx0b0ludDpmdW5jdGlvbihhKXtyZXR1cm4gcGFyc2VJbnQodGhpcyxhfHwxMCk7fSx0b0Zsb2F0OmZ1bmN0aW9uKCl7cmV0dXJuIHBhcnNlRmxvYXQodGhpcyk7fSxoZXhUb1JnYjpmdW5jdGlvbihiKXt2YXIgYT10aGlzLm1hdGNoKC9eIz8oXHd7MSwyfSkoXHd7MSwyfSkoXHd7MSwyfSkkLyk7CnJldHVybihhKT9hLnNsaWNlKDEpLmhleFRvUmdiKGIpOm51bGw7fSxyZ2JUb0hleDpmdW5jdGlvbihiKXt2YXIgYT10aGlzLm1hdGNoKC9cZHsxLDN9L2cpO3JldHVybihhKT9hLnJnYlRvSGV4KGIpOm51bGw7fSxzdWJzdGl0dXRlOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMucmVwbGFjZShifHwoL1xcP1x7KFtee31dKylcfS9nKSxmdW5jdGlvbihkLGMpe2lmKGQuY2hhckF0KDApPT0iXFwiKXtyZXR1cm4gZC5zbGljZSgxKTsKfXJldHVybihhW2NdIT1udWxsKT9hW2NdOiIiO30pO319KTtOdW1iZXIuaW1wbGVtZW50KHtsaW1pdDpmdW5jdGlvbihiLGEpe3JldHVybiBNYXRoLm1pbihhLE1hdGgubWF4KGIsdGhpcykpO30scm91bmQ6ZnVuY3Rpb24oYSl7YT1NYXRoLnBvdygxMCxhfHwwKS50b0ZpeGVkKGE8MD8tYTowKTsKcmV0dXJuIE1hdGgucm91bmQodGhpcyphKS9hO30sdGltZXM6ZnVuY3Rpb24oYixjKXtmb3IodmFyIGE9MDthPHRoaXM7YSsrKXtiLmNhbGwoYyxhLHRoaXMpO319LHRvRmxvYXQ6ZnVuY3Rpb24oKXtyZXR1cm4gcGFyc2VGbG9hdCh0aGlzKTt9LHRvSW50OmZ1bmN0aW9uKGEpe3JldHVybiBwYXJzZUludCh0aGlzLGF8fDEwKTsKfX0pO051bWJlci5hbGlhcygiZWFjaCIsInRpbWVzIik7KGZ1bmN0aW9uKGIpe3ZhciBhPXt9O2IuZWFjaChmdW5jdGlvbihjKXtpZighTnVtYmVyW2NdKXthW2NdPWZ1bmN0aW9uKCl7cmV0dXJuIE1hdGhbY10uYXBwbHkobnVsbCxbdGhpc10uY29uY2F0KEFycmF5LmZyb20oYXJndW1lbnRzKSkpOwp9O319KTtOdW1iZXIuaW1wbGVtZW50KGEpO30pKFsiYWJzIiwiYWNvcyIsImFzaW4iLCJhdGFuIiwiYXRhbjIiLCJjZWlsIiwiY29zIiwiZXhwIiwiZmxvb3IiLCJsb2ciLCJtYXgiLCJtaW4iLCJwb3ciLCJzaW4iLCJzcXJ0IiwidGFuIl0pO0Z1bmN0aW9uLmV4dGVuZCh7YXR0ZW1wdDpmdW5jdGlvbigpe2Zvcih2YXIgYj0wLGE9YXJndW1lbnRzLmxlbmd0aDsKYjxhO2IrKyl7dHJ5e3JldHVybiBhcmd1bWVudHNbYl0oKTt9Y2F0Y2goYyl7fX1yZXR1cm4gbnVsbDt9fSk7RnVuY3Rpb24uaW1wbGVtZW50KHthdHRlbXB0OmZ1bmN0aW9uKGEsYyl7dHJ5e3JldHVybiB0aGlzLmFwcGx5KGMsQXJyYXkuZnJvbShhKSk7fWNhdGNoKGIpe31yZXR1cm4gbnVsbDsKfSxiaW5kOmZ1bmN0aW9uKGMpe3ZhciBhPXRoaXMsYj0oYXJndW1lbnRzLmxlbmd0aD4xKT9BcnJheS5zbGljZShhcmd1bWVudHMsMSk6bnVsbDtyZXR1cm4gZnVuY3Rpb24oKXtpZighYiYmIWFyZ3VtZW50cy5sZW5ndGgpe3JldHVybiBhLmNhbGwoYyk7fWlmKGImJmFyZ3VtZW50cy5sZW5ndGgpe3JldHVybiBhLmFwcGx5KGMsYi5jb25jYXQoQXJyYXkuZnJvbShhcmd1bWVudHMpKSk7Cn1yZXR1cm4gYS5hcHBseShjLGJ8fGFyZ3VtZW50cyk7fTt9LHBhc3M6ZnVuY3Rpb24oYixjKXt2YXIgYT10aGlzO2lmKGIhPW51bGwpe2I9QXJyYXkuZnJvbShiKTt9cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGEuYXBwbHkoYyxifHxhcmd1bWVudHMpO307fSxkZWxheTpmdW5jdGlvbihiLGMsYSl7cmV0dXJuIHNldFRpbWVvdXQodGhpcy5wYXNzKChhPT1udWxsP1tdOmEpLGMpLGIpOwp9LHBlcmlvZGljYWw6ZnVuY3Rpb24oYyxiLGEpe3JldHVybiBzZXRJbnRlcnZhbCh0aGlzLnBhc3MoKGE9PW51bGw/W106YSksYiksYyk7fX0pOyhmdW5jdGlvbigpe3ZhciBhPU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7T2JqZWN0LmV4dGVuZCh7c3Vic2V0OmZ1bmN0aW9uKGQsZyl7dmFyIGY9e307CmZvcih2YXIgZT0wLGI9Zy5sZW5ndGg7ZTxiO2UrKyl7dmFyIGM9Z1tlXTtpZihjIGluIGQpe2ZbY109ZFtjXTt9fXJldHVybiBmO30sbWFwOmZ1bmN0aW9uKGIsZSxmKXt2YXIgZD17fTtmb3IodmFyIGMgaW4gYil7aWYoYS5jYWxsKGIsYykpe2RbY109ZS5jYWxsKGYsYltjXSxjLGIpOwp9fXJldHVybiBkO30sZmlsdGVyOmZ1bmN0aW9uKGIsZSxnKXt2YXIgZD17fTtmb3IodmFyIGMgaW4gYil7dmFyIGY9YltjXTtpZihhLmNhbGwoYixjKSYmZS5jYWxsKGcsZixjLGIpKXtkW2NdPWY7fX1yZXR1cm4gZDt9LGV2ZXJ5OmZ1bmN0aW9uKGIsZCxlKXtmb3IodmFyIGMgaW4gYil7aWYoYS5jYWxsKGIsYykmJiFkLmNhbGwoZSxiW2NdLGMpKXtyZXR1cm4gZmFsc2U7Cn19cmV0dXJuIHRydWU7fSxzb21lOmZ1bmN0aW9uKGIsZCxlKXtmb3IodmFyIGMgaW4gYil7aWYoYS5jYWxsKGIsYykmJmQuY2FsbChlLGJbY10sYykpe3JldHVybiB0cnVlO319cmV0dXJuIGZhbHNlO30sa2V5czpmdW5jdGlvbihiKXt2YXIgZD1bXTtmb3IodmFyIGMgaW4gYil7aWYoYS5jYWxsKGIsYykpe2QucHVzaChjKTsKfX1yZXR1cm4gZDt9LHZhbHVlczpmdW5jdGlvbihjKXt2YXIgYj1bXTtmb3IodmFyIGQgaW4gYyl7aWYoYS5jYWxsKGMsZCkpe2IucHVzaChjW2RdKTt9fXJldHVybiBiO30sZ2V0TGVuZ3RoOmZ1bmN0aW9uKGIpe3JldHVybiBPYmplY3Qua2V5cyhiKS5sZW5ndGg7fSxrZXlPZjpmdW5jdGlvbihiLGQpe2Zvcih2YXIgYyBpbiBiKXtpZihhLmNhbGwoYixjKSYmYltjXT09PWQpe3JldHVybiBjOwp9fXJldHVybiBudWxsO30sY29udGFpbnM6ZnVuY3Rpb24oYixjKXtyZXR1cm4gT2JqZWN0LmtleU9mKGIsYykhPW51bGw7fSx0b1F1ZXJ5U3RyaW5nOmZ1bmN0aW9uKGIsYyl7dmFyIGQ9W107T2JqZWN0LmVhY2goYixmdW5jdGlvbihoLGcpe2lmKGMpe2c9YysiWyIrZysiXSI7Cn12YXIgZjtzd2l0Y2godHlwZU9mKGgpKXtjYXNlIm9iamVjdCI6Zj1PYmplY3QudG9RdWVyeVN0cmluZyhoLGcpO2JyZWFrO2Nhc2UiYXJyYXkiOnZhciBlPXt9O2guZWFjaChmdW5jdGlvbihrLGope2Vbal09azt9KTtmPU9iamVjdC50b1F1ZXJ5U3RyaW5nKGUsZyk7CmJyZWFrO2RlZmF1bHQ6Zj1nKyI9IitlbmNvZGVVUklDb21wb25lbnQoaCk7fWlmKGghPW51bGwpe2QucHVzaChmKTt9fSk7cmV0dXJuIGQuam9pbigiJiIpO319KTt9KSgpOyhmdW5jdGlvbigpe3ZhciBrPXRoaXMuZG9jdW1lbnQ7dmFyIGk9ay53aW5kb3c9dGhpczsKdmFyIGI9MTt0aGlzLiR1aWQ9KGkuQWN0aXZlWE9iamVjdCk/ZnVuY3Rpb24oZSl7cmV0dXJuKGUudWlkfHwoZS51aWQ9W2IrK10pKVswXTt9OmZ1bmN0aW9uKGUpe3JldHVybiBlLnVpZHx8KGUudWlkPWIrKyk7fTskdWlkKGkpOyR1aWQoayk7dmFyIGE9bmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLGM9bmF2aWdhdG9yLnBsYXRmb3JtLnRvTG93ZXJDYXNlKCksaj1hLm1hdGNoKC8ob3BlcmF8aWV8ZmlyZWZveHxjaHJvbWV8dmVyc2lvbilbXHNcLzpdKFtcd1xkXC5dKyk/Lio/KHNhZmFyaXx2ZXJzaW9uW1xzXC86XShbXHdcZFwuXSspfCQpLyl8fFtudWxsLCJ1bmtub3duIiwwXSxmPWpbMV09PSJpZSImJmsuZG9jdW1lbnRNb2RlOwp2YXIgbz10aGlzLkJyb3dzZXI9e2V4dGVuZDpGdW5jdGlvbi5wcm90b3R5cGUuZXh0ZW5kLG5hbWU6KGpbMV09PSJ2ZXJzaW9uIik/alszXTpqWzFdLHZlcnNpb246Znx8cGFyc2VGbG9hdCgoalsxXT09Im9wZXJhIiYmals0XSk/als0XTpqWzJdKSxQbGF0Zm9ybTp7bmFtZTphLm1hdGNoKC9pcCg/OmFkfG9kfGhvbmUpLyk/ImlvcyI6KGEubWF0Y2goLyg/OndlYm9zfGFuZHJvaWQpLyl8fGMubWF0Y2goL21hY3x3aW58bGludXgvKXx8WyJvdGhlciJdKVswXX0sRmVhdHVyZXM6e3hwYXRoOiEhKGsuZXZhbHVhdGUpLGFpcjohIShpLnJ1bnRpbWUpLHF1ZXJ5OiEhKGsucXVlcnlTZWxlY3RvciksanNvbjohIShpLkpTT04pfSxQbHVnaW5zOnt9fTsKb1tvLm5hbWVdPXRydWU7b1tvLm5hbWUrcGFyc2VJbnQoby52ZXJzaW9uLDEwKV09dHJ1ZTtvLlBsYXRmb3JtW28uUGxhdGZvcm0ubmFtZV09dHJ1ZTtvLlJlcXVlc3Q9KGZ1bmN0aW9uKCl7dmFyIHE9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7Cn07dmFyIHA9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IEFjdGl2ZVhPYmplY3QoIk1TWE1MMi5YTUxIVFRQIik7fTt2YXIgZT1mdW5jdGlvbigpe3JldHVybiBuZXcgQWN0aXZlWE9iamVjdCgiTWljcm9zb2Z0LlhNTEhUVFAiKTt9O3JldHVybiBGdW5jdGlvbi5hdHRlbXB0KGZ1bmN0aW9uKCl7cSgpOwpyZXR1cm4gcTt9LGZ1bmN0aW9uKCl7cCgpO3JldHVybiBwO30sZnVuY3Rpb24oKXtlKCk7cmV0dXJuIGU7fSk7fSkoKTtvLkZlYXR1cmVzLnhocj0hIShvLlJlcXVlc3QpO3ZhciBoPShGdW5jdGlvbi5hdHRlbXB0KGZ1bmN0aW9uKCl7cmV0dXJuIG5hdmlnYXRvci5wbHVnaW5zWyJTaG9ja3dhdmUgRmxhc2giXS5kZXNjcmlwdGlvbjsKfSxmdW5jdGlvbigpe3JldHVybiBuZXcgQWN0aXZlWE9iamVjdCgiU2hvY2t3YXZlRmxhc2guU2hvY2t3YXZlRmxhc2giKS5HZXRWYXJpYWJsZSgiJHZlcnNpb24iKTt9KXx8IjAgcjAiKS5tYXRjaCgvXGQrL2cpO28uUGx1Z2lucy5GbGFzaD17dmVyc2lvbjpOdW1iZXIoaFswXXx8IjAuIitoWzFdKXx8MCxidWlsZDpOdW1iZXIoaFsyXSl8fDB9OwpvLmV4ZWM9ZnVuY3Rpb24ocCl7aWYoIXApe3JldHVybiBwO31pZihpLmV4ZWNTY3JpcHQpe2kuZXhlY1NjcmlwdChwKTt9ZWxzZXt2YXIgZT1rLmNyZWF0ZUVsZW1lbnQoInNjcmlwdCIpO2Uuc2V0QXR0cmlidXRlKCJ0eXBlIiwidGV4dC9qYXZhc2NyaXB0Iik7ZS50ZXh0PXA7CmsuaGVhZC5hcHBlbmRDaGlsZChlKTtrLmhlYWQucmVtb3ZlQ2hpbGQoZSk7fXJldHVybiBwO307U3RyaW5nLmltcGxlbWVudCgic3RyaXBTY3JpcHRzIixmdW5jdGlvbihwKXt2YXIgZT0iIjt2YXIgcT10aGlzLnJlcGxhY2UoLzxzY3JpcHRbXj5dKj4oW1xzXFNdKj8pPFwvc2NyaXB0Pi9naSxmdW5jdGlvbihyLHMpe2UrPXMrIlxuIjsKcmV0dXJuIiI7fSk7aWYocD09PXRydWUpe28uZXhlYyhlKTt9ZWxzZXtpZih0eXBlT2YocCk9PSJmdW5jdGlvbiIpe3AoZSxxKTt9fXJldHVybiBxO30pO28uZXh0ZW5kKHtEb2N1bWVudDp0aGlzLkRvY3VtZW50LFdpbmRvdzp0aGlzLldpbmRvdyxFbGVtZW50OnRoaXMuRWxlbWVudCxFdmVudDp0aGlzLkV2ZW50fSk7CnRoaXMuV2luZG93PXRoaXMuJGNvbnN0cnVjdG9yPW5ldyBUeXBlKCJXaW5kb3ciLGZ1bmN0aW9uKCl7fSk7dGhpcy4kZmFtaWx5PUZ1bmN0aW9uLmZyb20oIndpbmRvdyIpLmhpZGUoKTtXaW5kb3cubWlycm9yKGZ1bmN0aW9uKGUscCl7aVtlXT1wO30pO3RoaXMuRG9jdW1lbnQ9ay4kY29uc3RydWN0b3I9bmV3IFR5cGUoIkRvY3VtZW50IixmdW5jdGlvbigpe30pOwprLiRmYW1pbHk9RnVuY3Rpb24uZnJvbSgiZG9jdW1lbnQiKS5oaWRlKCk7RG9jdW1lbnQubWlycm9yKGZ1bmN0aW9uKGUscCl7a1tlXT1wO30pO2suaHRtbD1rLmRvY3VtZW50RWxlbWVudDtpZighay5oZWFkKXtrLmhlYWQ9ay5nZXRFbGVtZW50c0J5VGFnTmFtZSgiaGVhZCIpWzBdOwp9aWYoay5leGVjQ29tbWFuZCl7dHJ5e2suZXhlY0NvbW1hbmQoIkJhY2tncm91bmRJbWFnZUNhY2hlIixmYWxzZSx0cnVlKTt9Y2F0Y2goZyl7fX1pZih0aGlzLmF0dGFjaEV2ZW50JiYhdGhpcy5hZGRFdmVudExpc3RlbmVyKXt2YXIgZD1mdW5jdGlvbigpe3RoaXMuZGV0YWNoRXZlbnQoIm9udW5sb2FkIixkKTsKay5oZWFkPWsuaHRtbD1rLndpbmRvdz1udWxsO307dGhpcy5hdHRhY2hFdmVudCgib251bmxvYWQiLGQpO312YXIgbT1BcnJheS5mcm9tO3RyeXttKGsuaHRtbC5jaGlsZE5vZGVzKTt9Y2F0Y2goZyl7QXJyYXkuZnJvbT1mdW5jdGlvbihwKXtpZih0eXBlb2YgcCE9InN0cmluZyImJlR5cGUuaXNFbnVtZXJhYmxlKHApJiZ0eXBlT2YocCkhPSJhcnJheSIpe3ZhciBlPXAubGVuZ3RoLHE9bmV3IEFycmF5KGUpOwp3aGlsZShlLS0pe3FbZV09cFtlXTt9cmV0dXJuIHE7fXJldHVybiBtKHApO307dmFyIGw9QXJyYXkucHJvdG90eXBlLG49bC5zbGljZTtbInBvcCIsInB1c2giLCJyZXZlcnNlIiwic2hpZnQiLCJzb3J0Iiwic3BsaWNlIiwidW5zaGlmdCIsImNvbmNhdCIsImpvaW4iLCJzbGljZSJdLmVhY2goZnVuY3Rpb24oZSl7dmFyIHA9bFtlXTsKQXJyYXlbZV09ZnVuY3Rpb24ocSl7cmV0dXJuIHAuYXBwbHkoQXJyYXkuZnJvbShxKSxuLmNhbGwoYXJndW1lbnRzLDEpKTt9O30pO319KSgpO3ZhciBFdmVudD1uZXcgVHlwZSgiRXZlbnQiLGZ1bmN0aW9uKGEsaSl7aWYoIWkpe2k9d2luZG93O312YXIgbz1pLmRvY3VtZW50OwphPWF8fGkuZXZlbnQ7aWYoYS4kZXh0ZW5kZWQpe3JldHVybiBhO310aGlzLiRleHRlbmRlZD10cnVlO3ZhciBuPWEudHlwZSxrPWEudGFyZ2V0fHxhLnNyY0VsZW1lbnQsbT17fSxjPXt9LHE9bnVsbCxoLGwsYixwO3doaWxlKGsmJmsubm9kZVR5cGU9PTMpe2s9ay5wYXJlbnROb2RlOwp9aWYobi5pbmRleE9mKCJrZXkiKSE9LTEpe2I9YS53aGljaHx8YS5rZXlDb2RlO3A9T2JqZWN0LmtleU9mKEV2ZW50LktleXMsYik7aWYobj09ImtleWRvd24iKXt2YXIgZD1iLTExMTtpZihkPjAmJmQ8MTMpe3A9ImYiK2Q7fX1pZighcCl7cD1TdHJpbmcuZnJvbUNoYXJDb2RlKGIpLnRvTG93ZXJDYXNlKCk7Cn19ZWxzZXtpZigoL2NsaWNrfG1vdXNlfG1lbnUvaSkudGVzdChuKSl7bz0oIW8uY29tcGF0TW9kZXx8by5jb21wYXRNb2RlPT0iQ1NTMUNvbXBhdCIpP28uaHRtbDpvLmJvZHk7bT17eDooYS5wYWdlWCE9bnVsbCk/YS5wYWdlWDphLmNsaWVudFgrby5zY3JvbGxMZWZ0LHk6KGEucGFnZVkhPW51bGwpP2EucGFnZVk6YS5jbGllbnRZK28uc2Nyb2xsVG9wfTsKYz17eDooYS5wYWdlWCE9bnVsbCk/YS5wYWdlWC1pLnBhZ2VYT2Zmc2V0OmEuY2xpZW50WCx5OihhLnBhZ2VZIT1udWxsKT9hLnBhZ2VZLWkucGFnZVlPZmZzZXQ6YS5jbGllbnRZfTtpZigoL0RPTU1vdXNlU2Nyb2xsfG1vdXNld2hlZWwvKS50ZXN0KG4pKXtsPShhLndoZWVsRGVsdGEpP2Eud2hlZWxEZWx0YS8xMjA6LShhLmRldGFpbHx8MCkvMzsKfWg9KGEud2hpY2g9PTMpfHwoYS5idXR0b249PTIpO2lmKCgvb3ZlcnxvdXQvKS50ZXN0KG4pKXtxPWEucmVsYXRlZFRhcmdldHx8YVsobj09Im1vdXNlb3ZlciI/ImZyb20iOiJ0byIpKyJFbGVtZW50Il07dmFyIGo9ZnVuY3Rpb24oKXt3aGlsZShxJiZxLm5vZGVUeXBlPT0zKXtxPXEucGFyZW50Tm9kZTsKfXJldHVybiB0cnVlO307dmFyIGc9KEJyb3dzZXIuZmlyZWZveDIpP2ouYXR0ZW1wdCgpOmooKTtxPShnKT9xOm51bGw7fX1lbHNle2lmKCgvZ2VzdHVyZXx0b3VjaC9pKS50ZXN0KG4pKXt0aGlzLnJvdGF0aW9uPWEucm90YXRpb247dGhpcy5zY2FsZT1hLnNjYWxlOwp0aGlzLnRhcmdldFRvdWNoZXM9YS50YXJnZXRUb3VjaGVzO3RoaXMuY2hhbmdlZFRvdWNoZXM9YS5jaGFuZ2VkVG91Y2hlczt2YXIgZj10aGlzLnRvdWNoZXM9YS50b3VjaGVzO2lmKGYmJmZbMF0pe3ZhciBlPWZbMF07bT17eDplLnBhZ2VYLHk6ZS5wYWdlWX07Yz17eDplLmNsaWVudFgseTplLmNsaWVudFl9Owp9fX19cmV0dXJuIE9iamVjdC5hcHBlbmQodGhpcyx7ZXZlbnQ6YSx0eXBlOm4scGFnZTptLGNsaWVudDpjLHJpZ2h0Q2xpY2s6aCx3aGVlbDpsLHJlbGF0ZWRUYXJnZXQ6ZG9jdW1lbnQuaWQocSksdGFyZ2V0OmRvY3VtZW50LmlkKGspLGNvZGU6YixrZXk6cCxzaGlmdDphLnNoaWZ0S2V5LGNvbnRyb2w6YS5jdHJsS2V5LGFsdDphLmFsdEtleSxtZXRhOmEubWV0YUtleX0pOwp9KTtFdmVudC5LZXlzPXtlbnRlcjoxMyx1cDozOCxkb3duOjQwLGxlZnQ6MzcscmlnaHQ6MzksZXNjOjI3LHNwYWNlOjMyLGJhY2tzcGFjZTo4LHRhYjo5LCJkZWxldGUiOjQ2fTtFdmVudC5pbXBsZW1lbnQoe3N0b3A6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdG9wUHJvcGFnYXRpb24oKS5wcmV2ZW50RGVmYXVsdCgpOwp9LHN0b3BQcm9wYWdhdGlvbjpmdW5jdGlvbigpe2lmKHRoaXMuZXZlbnQuc3RvcFByb3BhZ2F0aW9uKXt0aGlzLmV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO31lbHNle3RoaXMuZXZlbnQuY2FuY2VsQnViYmxlPXRydWU7fXJldHVybiB0aGlzO30scHJldmVudERlZmF1bHQ6ZnVuY3Rpb24oKXtpZih0aGlzLmV2ZW50LnByZXZlbnREZWZhdWx0KXt0aGlzLmV2ZW50LnByZXZlbnREZWZhdWx0KCk7Cn1lbHNle3RoaXMuZXZlbnQucmV0dXJuVmFsdWU9ZmFsc2U7fXJldHVybiB0aGlzO319KTsoZnVuY3Rpb24oKXt2YXIgYT10aGlzLkNsYXNzPW5ldyBUeXBlKCJDbGFzcyIsZnVuY3Rpb24oaCl7aWYoaW5zdGFuY2VPZihoLEZ1bmN0aW9uKSl7aD17aW5pdGlhbGl6ZTpofTsKfXZhciBnPWZ1bmN0aW9uKCl7ZSh0aGlzKTtpZihnLiRwcm90b3R5cGluZyl7cmV0dXJuIHRoaXM7fXRoaXMuJGNhbGxlcj1udWxsO3ZhciBpPSh0aGlzLmluaXRpYWxpemUpP3RoaXMuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk6dGhpczt0aGlzLiRjYWxsZXI9dGhpcy5jYWxsZXI9bnVsbDsKcmV0dXJuIGk7fS5leHRlbmQodGhpcykuaW1wbGVtZW50KGgpO2cuJGNvbnN0cnVjdG9yPWE7Zy5wcm90b3R5cGUuJGNvbnN0cnVjdG9yPWc7Zy5wcm90b3R5cGUucGFyZW50PWM7cmV0dXJuIGc7fSk7dmFyIGM9ZnVuY3Rpb24oKXtpZighdGhpcy4kY2FsbGVyKXt0aHJvdyBuZXcgRXJyb3IoJ1RoZSBtZXRob2QgInBhcmVudCIgY2Fubm90IGJlIGNhbGxlZC4nKTsKfXZhciBnPXRoaXMuJGNhbGxlci4kbmFtZSxoPXRoaXMuJGNhbGxlci4kb3duZXIucGFyZW50LGk9KGgpP2gucHJvdG90eXBlW2ddOm51bGw7aWYoIWkpe3Rocm93IG5ldyBFcnJvcignVGhlIG1ldGhvZCAiJytnKyciIGhhcyBubyBwYXJlbnQuJyk7fXJldHVybiBpLmFwcGx5KHRoaXMsYXJndW1lbnRzKTsKfTt2YXIgZT1mdW5jdGlvbihnKXtmb3IodmFyIGggaW4gZyl7dmFyIGo9Z1toXTtzd2l0Y2godHlwZU9mKGopKXtjYXNlIm9iamVjdCI6dmFyIGk9ZnVuY3Rpb24oKXt9O2kucHJvdG90eXBlPWo7Z1toXT1lKG5ldyBpKTticmVhaztjYXNlImFycmF5IjpnW2hdPWouY2xvbmUoKTsKYnJlYWs7fX1yZXR1cm4gZzt9O3ZhciBiPWZ1bmN0aW9uKGcsaCxqKXtpZihqLiRvcmlnaW4pe2o9ai4kb3JpZ2luO312YXIgaT1mdW5jdGlvbigpe2lmKGouJHByb3RlY3RlZCYmdGhpcy4kY2FsbGVyPT1udWxsKXt0aHJvdyBuZXcgRXJyb3IoJ1RoZSBtZXRob2QgIicraCsnIiBjYW5ub3QgYmUgY2FsbGVkLicpOwp9dmFyIGw9dGhpcy5jYWxsZXIsbT10aGlzLiRjYWxsZXI7dGhpcy5jYWxsZXI9bTt0aGlzLiRjYWxsZXI9aTt2YXIgaz1qLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLiRjYWxsZXI9bTt0aGlzLmNhbGxlcj1sO3JldHVybiBrO30uZXh0ZW5kKHskb3duZXI6Zywkb3JpZ2luOmosJG5hbWU6aH0pOwpyZXR1cm4gaTt9O3ZhciBmPWZ1bmN0aW9uKGgsaSxnKXtpZihhLk11dGF0b3JzLmhhc093blByb3BlcnR5KGgpKXtpPWEuTXV0YXRvcnNbaF0uY2FsbCh0aGlzLGkpO2lmKGk9PW51bGwpe3JldHVybiB0aGlzO319aWYodHlwZU9mKGkpPT0iZnVuY3Rpb24iKXtpZihpLiRoaWRkZW4pe3JldHVybiB0aGlzOwp9dGhpcy5wcm90b3R5cGVbaF09KGcpP2k6Yih0aGlzLGgsaSk7fWVsc2V7T2JqZWN0Lm1lcmdlKHRoaXMucHJvdG90eXBlLGgsaSk7fXJldHVybiB0aGlzO307dmFyIGQ9ZnVuY3Rpb24oZyl7Zy4kcHJvdG90eXBpbmc9dHJ1ZTt2YXIgaD1uZXcgZztkZWxldGUgZy4kcHJvdG90eXBpbmc7CnJldHVybiBoO307YS5pbXBsZW1lbnQoImltcGxlbWVudCIsZi5vdmVybG9hZFNldHRlcigpKTthLk11dGF0b3JzPXtFeHRlbmRzOmZ1bmN0aW9uKGcpe3RoaXMucGFyZW50PWc7dGhpcy5wcm90b3R5cGU9ZChnKTt9LEltcGxlbWVudHM6ZnVuY3Rpb24oZyl7QXJyYXkuZnJvbShnKS5lYWNoKGZ1bmN0aW9uKGope3ZhciBoPW5ldyBqOwpmb3IodmFyIGkgaW4gaCl7Zi5jYWxsKHRoaXMsaSxoW2ldLHRydWUpO319LHRoaXMpO319O30pKCk7KGZ1bmN0aW9uKCl7dGhpcy5DaGFpbj1uZXcgQ2xhc3MoeyRjaGFpbjpbXSxjaGFpbjpmdW5jdGlvbigpe3RoaXMuJGNoYWluLmFwcGVuZChBcnJheS5mbGF0dGVuKGFyZ3VtZW50cykpOwpyZXR1cm4gdGhpczt9LGNhbGxDaGFpbjpmdW5jdGlvbigpe3JldHVybih0aGlzLiRjaGFpbi5sZW5ndGgpP3RoaXMuJGNoYWluLnNoaWZ0KCkuYXBwbHkodGhpcyxhcmd1bWVudHMpOmZhbHNlO30sY2xlYXJDaGFpbjpmdW5jdGlvbigpe3RoaXMuJGNoYWluLmVtcHR5KCk7CnJldHVybiB0aGlzO319KTt2YXIgYT1mdW5jdGlvbihiKXtyZXR1cm4gYi5yZXBsYWNlKC9eb24oW0EtWl0pLyxmdW5jdGlvbihjLGQpe3JldHVybiBkLnRvTG93ZXJDYXNlKCk7fSk7fTt0aGlzLkV2ZW50cz1uZXcgQ2xhc3MoeyRldmVudHM6e30sYWRkRXZlbnQ6ZnVuY3Rpb24oZCxjLGIpe2Q9YShkKTsKdGhpcy4kZXZlbnRzW2RdPSh0aGlzLiRldmVudHNbZF18fFtdKS5pbmNsdWRlKGMpO2lmKGIpe2MuaW50ZXJuYWw9dHJ1ZTt9cmV0dXJuIHRoaXM7fSxhZGRFdmVudHM6ZnVuY3Rpb24oYil7Zm9yKHZhciBjIGluIGIpe3RoaXMuYWRkRXZlbnQoYyxiW2NdKTt9cmV0dXJuIHRoaXM7Cn0sZmlyZUV2ZW50OmZ1bmN0aW9uKGUsYyxiKXtlPWEoZSk7dmFyIGQ9dGhpcy4kZXZlbnRzW2VdO2lmKCFkKXtyZXR1cm4gdGhpczt9Yz1BcnJheS5mcm9tKGMpO2QuZWFjaChmdW5jdGlvbihmKXtpZihiKXtmLmRlbGF5KGIsdGhpcyxjKTt9ZWxzZXtmLmFwcGx5KHRoaXMsYyk7Cn19LHRoaXMpO3JldHVybiB0aGlzO30scmVtb3ZlRXZlbnQ6ZnVuY3Rpb24oZSxkKXtlPWEoZSk7dmFyIGM9dGhpcy4kZXZlbnRzW2VdO2lmKGMmJiFkLmludGVybmFsKXt2YXIgYj1jLmluZGV4T2YoZCk7aWYoYiE9LTEpe2RlbGV0ZSBjW2JdO319cmV0dXJuIHRoaXM7Cn0scmVtb3ZlRXZlbnRzOmZ1bmN0aW9uKGQpe3ZhciBlO2lmKHR5cGVPZihkKT09Im9iamVjdCIpe2ZvcihlIGluIGQpe3RoaXMucmVtb3ZlRXZlbnQoZSxkW2VdKTt9cmV0dXJuIHRoaXM7fWlmKGQpe2Q9YShkKTt9Zm9yKGUgaW4gdGhpcy4kZXZlbnRzKXtpZihkJiZkIT1lKXtjb250aW51ZTsKfXZhciBjPXRoaXMuJGV2ZW50c1tlXTtmb3IodmFyIGI9Yy5sZW5ndGg7Yi0tOyl7aWYoYiBpbiBjKXt0aGlzLnJlbW92ZUV2ZW50KGUsY1tiXSk7fX19cmV0dXJuIHRoaXM7fX0pO3RoaXMuT3B0aW9ucz1uZXcgQ2xhc3Moe3NldE9wdGlvbnM6ZnVuY3Rpb24oKXt2YXIgYj10aGlzLm9wdGlvbnM9T2JqZWN0Lm1lcmdlLmFwcGx5KG51bGwsW3t9LHRoaXMub3B0aW9uc10uYXBwZW5kKGFyZ3VtZW50cykpOwppZih0aGlzLmFkZEV2ZW50KXtmb3IodmFyIGMgaW4gYil7aWYodHlwZU9mKGJbY10pIT0iZnVuY3Rpb24ifHwhKC9eb25bQS1aXS8pLnRlc3QoYykpe2NvbnRpbnVlO310aGlzLmFkZEV2ZW50KGMsYltjXSk7ZGVsZXRlIGJbY107fX1yZXR1cm4gdGhpczt9fSk7fSkoKTsKKGZ1bmN0aW9uKCl7dmFyIGssbixsLGcsYT17fSxjPXt9LG09L1xcL2c7dmFyIGU9ZnVuY3Rpb24ocSxwKXtpZihxPT1udWxsKXtyZXR1cm4gbnVsbDt9aWYocS5TbGljaz09PXRydWUpe3JldHVybiBxO31xPSgiIitxKS5yZXBsYWNlKC9eXHMrfFxzKyQvZywiIik7Zz0hIXA7CnZhciBvPShnKT9jOmE7aWYob1txXSl7cmV0dXJuIG9bcV07fWs9e1NsaWNrOnRydWUsZXhwcmVzc2lvbnM6W10scmF3OnEscmV2ZXJzZTpmdW5jdGlvbigpe3JldHVybiBlKHRoaXMucmF3LHRydWUpO319O249LTE7d2hpbGUocSE9KHE9cS5yZXBsYWNlKGosYikpKXt9ay5sZW5ndGg9ay5leHByZXNzaW9ucy5sZW5ndGg7CnJldHVybiBvW2sucmF3XT0oZyk/aChrKTprO307dmFyIGk9ZnVuY3Rpb24obyl7aWYobz09PSIhIil7cmV0dXJuIiAiO31lbHNle2lmKG89PT0iICIpe3JldHVybiIhIjt9ZWxzZXtpZigoL14hLykudGVzdChvKSl7cmV0dXJuIG8ucmVwbGFjZSgvXiEvLCIiKTt9ZWxzZXtyZXR1cm4iISIrbzsKfX19fTt2YXIgaD1mdW5jdGlvbih1KXt2YXIgcj11LmV4cHJlc3Npb25zO2Zvcih2YXIgcD0wO3A8ci5sZW5ndGg7cCsrKXt2YXIgdD1yW3BdO3ZhciBxPXtwYXJ0czpbXSx0YWc6IioiLGNvbWJpbmF0b3I6aSh0WzBdLmNvbWJpbmF0b3IpfTtmb3IodmFyIG89MDtvPHQubGVuZ3RoOwpvKyspe3ZhciBzPXRbb107aWYoIXMucmV2ZXJzZUNvbWJpbmF0b3Ipe3MucmV2ZXJzZUNvbWJpbmF0b3I9IiAiO31zLmNvbWJpbmF0b3I9cy5yZXZlcnNlQ29tYmluYXRvcjtkZWxldGUgcy5yZXZlcnNlQ29tYmluYXRvcjt9dC5yZXZlcnNlKCkucHVzaChxKTt9cmV0dXJuIHU7Cn07dmFyIGY9ZnVuY3Rpb24obyl7cmV0dXJuIG8ucmVwbGFjZSgvWy1bXF17fSgpKis/LlxcXiR8LCNcc10vZyxmdW5jdGlvbihwKXtyZXR1cm4iXFwiK3A7fSk7fTt2YXIgaj1uZXcgUmVnRXhwKCJeKD86XFxzKigsKVxccyp8XFxzKig8Y29tYmluYXRvcj4rKVxccyp8KFxccyspfCg8dW5pY29kZT4rfFxcKil8XFwjKDx1bmljb2RlPispfFxcLig8dW5pY29kZT4rKXxcXFtcXHMqKDx1bmljb2RlMT4rKSg/OlxccyooWypeJCF+fF0/PSkoPzpcXHMqKD86KFtcIiddPykoLio/KVxcOSkpKT9cXHMqXFxdKD8hXFxdKXwoOispKDx1bmljb2RlPispKD86XFwoKD86KD86KFtcIiddKShbXlxcMTNdKilcXDEzKXwoKD86XFwoW14pXStcXCl8W14oKV0qKSspKVxcKSk/KSIucmVwbGFjZSgvPGNvbWJpbmF0b3I+LywiWyIrZigiPit+YCFAJCVeJj17fVxcOzwvIikrIl0iKS5yZXBsYWNlKC88dW5pY29kZT4vZywiKD86W1xcd1xcdTAwYTEtXFx1RkZGRi1dfFxcXFxbXlxcczAtOWEtZl0pIikucmVwbGFjZSgvPHVuaWNvZGUxPi9nLCIoPzpbOlxcd1xcdTAwYTEtXFx1RkZGRi1dfFxcXFxbXlxcczAtOWEtZl0pIikpOwpmdW5jdGlvbiBiKHgscyxELHoscixDLHEsQixBLHksdSxGLEcsdixwLHcpe2lmKHN8fG49PT0tMSl7ay5leHByZXNzaW9uc1srK25dPVtdO2w9LTE7aWYocyl7cmV0dXJuIiI7fX1pZihEfHx6fHxsPT09LTEpe0Q9RHx8IiAiO3ZhciB0PWsuZXhwcmVzc2lvbnNbbl07CmlmKGcmJnRbbF0pe3RbbF0ucmV2ZXJzZUNvbWJpbmF0b3I9aShEKTt9dFsrK2xdPXtjb21iaW5hdG9yOkQsdGFnOiIqIn07fXZhciBvPWsuZXhwcmVzc2lvbnNbbl1bbF07aWYocil7by50YWc9ci5yZXBsYWNlKG0sIiIpO31lbHNle2lmKEMpe28uaWQ9Qy5yZXBsYWNlKG0sIiIpOwp9ZWxzZXtpZihxKXtxPXEucmVwbGFjZShtLCIiKTtpZighby5jbGFzc0xpc3Qpe28uY2xhc3NMaXN0PVtdO31pZighby5jbGFzc2VzKXtvLmNsYXNzZXM9W107fW8uY2xhc3NMaXN0LnB1c2gocSk7by5jbGFzc2VzLnB1c2goe3ZhbHVlOnEscmVnZXhwOm5ldyBSZWdFeHAoIihefFxccykiK2YocSkrIihcXHN8JCkiKX0pOwp9ZWxzZXtpZihHKXt3PXd8fHA7dz13P3cucmVwbGFjZShtLCIiKTpudWxsO2lmKCFvLnBzZXVkb3Mpe28ucHNldWRvcz1bXTt9by5wc2V1ZG9zLnB1c2goe2tleTpHLnJlcGxhY2UobSwiIiksdmFsdWU6dyx0eXBlOkYubGVuZ3RoPT0xPyJjbGFzcyI6ImVsZW1lbnQifSk7Cn1lbHNle2lmKEIpe0I9Qi5yZXBsYWNlKG0sIiIpO3U9KHV8fCIiKS5yZXBsYWNlKG0sIiIpO3ZhciBFLEg7c3dpdGNoKEEpe2Nhc2UiXj0iOkg9bmV3IFJlZ0V4cCgiXiIrZih1KSk7YnJlYWs7Y2FzZSIkPSI6SD1uZXcgUmVnRXhwKGYodSkrIiQiKTticmVhaztjYXNlIn49IjpIPW5ldyBSZWdFeHAoIihefFxccykiK2YodSkrIihcXHN8JCkiKTsKYnJlYWs7Y2FzZSJ8PSI6SD1uZXcgUmVnRXhwKCJeIitmKHUpKyIoLXwkKSIpO2JyZWFrO2Nhc2UiPSI6RT1mdW5jdGlvbihJKXtyZXR1cm4gdT09STt9O2JyZWFrO2Nhc2UiKj0iOkU9ZnVuY3Rpb24oSSl7cmV0dXJuIEkmJkkuaW5kZXhPZih1KT4tMTt9O2JyZWFrOwpjYXNlIiE9IjpFPWZ1bmN0aW9uKEkpe3JldHVybiB1IT1JO307YnJlYWs7ZGVmYXVsdDpFPWZ1bmN0aW9uKEkpe3JldHVybiAhIUk7fTt9aWYodT09IiImJigvXlsqJF5dPSQvKS50ZXN0KEEpKXtFPWZ1bmN0aW9uKCl7cmV0dXJuIGZhbHNlO307fWlmKCFFKXtFPWZ1bmN0aW9uKEkpe3JldHVybiBJJiZILnRlc3QoSSk7Cn07fWlmKCFvLmF0dHJpYnV0ZXMpe28uYXR0cmlidXRlcz1bXTt9by5hdHRyaWJ1dGVzLnB1c2goe2tleTpCLG9wZXJhdG9yOkEsdmFsdWU6dSx0ZXN0OkV9KTt9fX19fXJldHVybiIiO312YXIgZD0odGhpcy5TbGlja3x8e30pO2QucGFyc2U9ZnVuY3Rpb24obyl7cmV0dXJuIGUobyk7Cn07ZC5lc2NhcGVSZWdFeHA9ZjtpZighdGhpcy5TbGljayl7dGhpcy5TbGljaz1kO319KS5hcHBseSgodHlwZW9mIGV4cG9ydHMhPSJ1bmRlZmluZWQiKT9leHBvcnRzOnRoaXMpOyhmdW5jdGlvbigpe3ZhciBqPXt9LGw9e30sYj1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nOwpqLmlzTmF0aXZlQ29kZT1mdW5jdGlvbihjKXtyZXR1cm4oL1x7XHMqXFtuYXRpdmUgY29kZVxdXHMqXH0vKS50ZXN0KCIiK2MpO307ai5pc1hNTD1mdW5jdGlvbihjKXtyZXR1cm4oISFjLnhtbFZlcnNpb24pfHwoISFjLnhtbCl8fChiLmNhbGwoYyk9PSJbb2JqZWN0IFhNTERvY3VtZW50XSIpfHwoYy5ub2RlVHlwZT09OSYmYy5kb2N1bWVudEVsZW1lbnQubm9kZU5hbWUhPSJIVE1MIik7Cn07ai5zZXREb2N1bWVudD1mdW5jdGlvbih3KXt2YXIgdD13Lm5vZGVUeXBlO2lmKHQ9PTkpe31lbHNle2lmKHQpe3c9dy5vd25lckRvY3VtZW50O31lbHNle2lmKHcubmF2aWdhdG9yKXt3PXcuZG9jdW1lbnQ7fWVsc2V7cmV0dXJuO319fWlmKHRoaXMuZG9jdW1lbnQ9PT13KXtyZXR1cm47Cn10aGlzLmRvY3VtZW50PXc7dmFyIHk9dy5kb2N1bWVudEVsZW1lbnQsdT10aGlzLmdldFVJRFhNTCh5KSxvPWxbdV0sQTtpZihvKXtmb3IoQSBpbiBvKXt0aGlzW0FdPW9bQV07fXJldHVybjt9bz1sW3VdPXt9O28ucm9vdD15O28uaXNYTUxEb2N1bWVudD10aGlzLmlzWE1MKHcpOwpvLmJyb2tlblN0YXJHRUJUTj1vLnN0YXJTZWxlY3RzQ2xvc2VkUVNBPW8uaWRHZXRzTmFtZT1vLmJyb2tlbk1peGVkQ2FzZVFTQT1vLmJyb2tlbkdFQkNOPW8uYnJva2VuQ2hlY2tlZFFTQT1vLmJyb2tlbkVtcHR5QXR0cmlidXRlUVNBPW8uaXNIVE1MRG9jdW1lbnQ9by5uYXRpdmVNYXRjaGVzU2VsZWN0b3I9ZmFsc2U7CnZhciBtLG4seCxxLHI7dmFyIHMsYz0ic2xpY2tfdW5pcXVlaWQiO3ZhciB6PXcuY3JlYXRlRWxlbWVudCgiZGl2Iik7dmFyIHA9dy5ib2R5fHx3LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJib2R5IilbMF18fHk7cC5hcHBlbmRDaGlsZCh6KTt0cnl7ei5pbm5lckhUTUw9JzxhIGlkPSInK2MrJyI+PC9hPic7Cm8uaXNIVE1MRG9jdW1lbnQ9ISF3LmdldEVsZW1lbnRCeUlkKGMpO31jYXRjaCh2KXt9aWYoby5pc0hUTUxEb2N1bWVudCl7ei5zdHlsZS5kaXNwbGF5PSJub25lIjt6LmFwcGVuZENoaWxkKHcuY3JlYXRlQ29tbWVudCgiIikpO249KHouZ2V0RWxlbWVudHNCeVRhZ05hbWUoIioiKS5sZW5ndGg+MSk7CnRyeXt6LmlubmVySFRNTD0iZm9vPC9mb28+IjtzPXouZ2V0RWxlbWVudHNCeVRhZ05hbWUoIioiKTttPShzJiYhIXMubGVuZ3RoJiZzWzBdLm5vZGVOYW1lLmNoYXJBdCgwKT09Ii8iKTt9Y2F0Y2godil7fW8uYnJva2VuU3RhckdFQlROPW58fG07dHJ5e3ouaW5uZXJIVE1MPSc8YSBuYW1lPSInK2MrJyI+PC9hPjxiIGlkPSInK2MrJyI+PC9iPic7Cm8uaWRHZXRzTmFtZT13LmdldEVsZW1lbnRCeUlkKGMpPT09ei5maXJzdENoaWxkO31jYXRjaCh2KXt9aWYoei5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKXt0cnl7ei5pbm5lckhUTUw9JzxhIGNsYXNzPSJmIj48L2E+PGEgY2xhc3M9ImIiPjwvYT4nO3ouZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgiYiIpLmxlbmd0aDsKei5maXJzdENoaWxkLmNsYXNzTmFtZT0iYiI7cT0oei5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJiIikubGVuZ3RoIT0yKTt9Y2F0Y2godil7fXRyeXt6LmlubmVySFRNTD0nPGEgY2xhc3M9ImEiPjwvYT48YSBjbGFzcz0iZiBiIGEiPjwvYT4nO3g9KHouZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgiYSIpLmxlbmd0aCE9Mik7Cn1jYXRjaCh2KXt9by5icm9rZW5HRUJDTj1xfHx4O31pZih6LnF1ZXJ5U2VsZWN0b3JBbGwpe3RyeXt6LmlubmVySFRNTD0iZm9vPC9mb28+IjtzPXoucXVlcnlTZWxlY3RvckFsbCgiKiIpO28uc3RhclNlbGVjdHNDbG9zZWRRU0E9KHMmJiEhcy5sZW5ndGgmJnNbMF0ubm9kZU5hbWUuY2hhckF0KDApPT0iLyIpOwp9Y2F0Y2godil7fXRyeXt6LmlubmVySFRNTD0nPGEgY2xhc3M9Ik1pWCI+PC9hPic7by5icm9rZW5NaXhlZENhc2VRU0E9IXoucXVlcnlTZWxlY3RvckFsbCgiLk1pWCIpLmxlbmd0aDt9Y2F0Y2godil7fXRyeXt6LmlubmVySFRNTD0nPHNlbGVjdD48b3B0aW9uIHNlbGVjdGVkPSJzZWxlY3RlZCI+YTwvb3B0aW9uPjwvc2VsZWN0Pic7Cm8uYnJva2VuQ2hlY2tlZFFTQT0oei5xdWVyeVNlbGVjdG9yQWxsKCI6Y2hlY2tlZCIpLmxlbmd0aD09MCk7fWNhdGNoKHYpe310cnl7ei5pbm5lckhUTUw9JzxhIGNsYXNzPSIiPjwvYT4nO28uYnJva2VuRW1wdHlBdHRyaWJ1dGVRU0E9KHoucXVlcnlTZWxlY3RvckFsbCgnW2NsYXNzKj0iIl0nKS5sZW5ndGghPTApOwp9Y2F0Y2godil7fX10cnl7ei5pbm5lckhUTUw9Jzxmb3JtIGFjdGlvbj0icyI+PGlucHV0IGlkPSJhY3Rpb24iLz48L2Zvcm0+JztyPSh6LmZpcnN0Q2hpbGQuZ2V0QXR0cmlidXRlKCJhY3Rpb24iKSE9InMiKTt9Y2F0Y2godil7fW8ubmF0aXZlTWF0Y2hlc1NlbGVjdG9yPXkubWF0Y2hlc1NlbGVjdG9yfHx5Lm1vek1hdGNoZXNTZWxlY3Rvcnx8eS53ZWJraXRNYXRjaGVzU2VsZWN0b3I7CmlmKG8ubmF0aXZlTWF0Y2hlc1NlbGVjdG9yKXt0cnl7by5uYXRpdmVNYXRjaGVzU2VsZWN0b3IuY2FsbCh5LCI6c2xpY2siKTtvLm5hdGl2ZU1hdGNoZXNTZWxlY3Rvcj1udWxsO31jYXRjaCh2KXt9fX10cnl7eS5zbGlja19leHBhbmRvPTE7ZGVsZXRlIHkuc2xpY2tfZXhwYW5kbzsKby5nZXRVSUQ9dGhpcy5nZXRVSURIVE1MO31jYXRjaCh2KXtvLmdldFVJRD10aGlzLmdldFVJRFhNTDt9cC5yZW1vdmVDaGlsZCh6KTt6PXM9cD1udWxsO28uZ2V0QXR0cmlidXRlPShvLmlzSFRNTERvY3VtZW50JiZyKT9mdW5jdGlvbihELEIpe3ZhciBFPXRoaXMuYXR0cmlidXRlR2V0dGVyc1tCXTsKaWYoRSl7cmV0dXJuIEUuY2FsbChEKTt9dmFyIEM9RC5nZXRBdHRyaWJ1dGVOb2RlKEIpO3JldHVybihDKT9DLm5vZGVWYWx1ZTpudWxsO306ZnVuY3Rpb24oQyxCKXt2YXIgRD10aGlzLmF0dHJpYnV0ZUdldHRlcnNbQl07cmV0dXJuKEQpP0QuY2FsbChDKTpDLmdldEF0dHJpYnV0ZShCKTsKfTtvLmhhc0F0dHJpYnV0ZT0oeSYmdGhpcy5pc05hdGl2ZUNvZGUoeS5oYXNBdHRyaWJ1dGUpKT9mdW5jdGlvbihDLEIpe3JldHVybiBDLmhhc0F0dHJpYnV0ZShCKTt9OmZ1bmN0aW9uKEMsQil7Qz1DLmdldEF0dHJpYnV0ZU5vZGUoQik7cmV0dXJuICEhKEMmJihDLnNwZWNpZmllZHx8Qy5ub2RlVmFsdWUpKTsKfTtvLmNvbnRhaW5zPSh5JiZ0aGlzLmlzTmF0aXZlQ29kZSh5LmNvbnRhaW5zKSk/ZnVuY3Rpb24oQixDKXtyZXR1cm4gQi5jb250YWlucyhDKTt9Oih5JiZ5LmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKT9mdW5jdGlvbihCLEMpe3JldHVybiBCPT09Q3x8ISEoQi5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihDKSYxNik7Cn06ZnVuY3Rpb24oQixDKXtpZihDKXtkb3tpZihDPT09Qil7cmV0dXJuIHRydWU7fX13aGlsZSgoQz1DLnBhcmVudE5vZGUpKTt9cmV0dXJuIGZhbHNlO307by5kb2N1bWVudFNvcnRlcj0oeS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbik/ZnVuY3Rpb24oQyxCKXtpZighQy5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbnx8IUIuY29tcGFyZURvY3VtZW50UG9zaXRpb24pe3JldHVybiAwOwp9cmV0dXJuIEMuY29tcGFyZURvY3VtZW50UG9zaXRpb24oQikmND8tMTpDPT09Qj8wOjE7fTooInNvdXJjZUluZGV4IiBpbiB5KT9mdW5jdGlvbihDLEIpe2lmKCFDLnNvdXJjZUluZGV4fHwhQi5zb3VyY2VJbmRleCl7cmV0dXJuIDA7fXJldHVybiBDLnNvdXJjZUluZGV4LUIuc291cmNlSW5kZXg7Cn06KHcuY3JlYXRlUmFuZ2UpP2Z1bmN0aW9uKEUsQyl7aWYoIUUub3duZXJEb2N1bWVudHx8IUMub3duZXJEb2N1bWVudCl7cmV0dXJuIDA7fXZhciBEPUUub3duZXJEb2N1bWVudC5jcmVhdGVSYW5nZSgpLEI9Qy5vd25lckRvY3VtZW50LmNyZWF0ZVJhbmdlKCk7RC5zZXRTdGFydChFLDApOwpELnNldEVuZChFLDApO0Iuc2V0U3RhcnQoQywwKTtCLnNldEVuZChDLDApO3JldHVybiBELmNvbXBhcmVCb3VuZGFyeVBvaW50cyhSYW5nZS5TVEFSVF9UT19FTkQsQik7fTpudWxsO3k9bnVsbDtmb3IoQSBpbiBvKXt0aGlzW0FdPW9bQV07fX07dmFyIGU9L14oWyMuXT8pKCg/Oltcdy1dK3xcKikpJC8sZz0vXFsuK1sqJF5dPSg/OiIifCcnKT9cXS8sZj17fTsKai5zZWFyY2g9ZnVuY3Rpb24oVSx6LEgscyl7dmFyIHA9dGhpcy5mb3VuZD0ocyk/bnVsbDooSHx8W10pO2lmKCFVKXtyZXR1cm4gcDt9ZWxzZXtpZihVLm5hdmlnYXRvcil7VT1VLmRvY3VtZW50O31lbHNle2lmKCFVLm5vZGVUeXBlKXtyZXR1cm4gcDt9fX12YXIgRixPLFY9dGhpcy51bmlxdWVzPXt9LEk9ISEoSCYmSC5sZW5ndGgpLHk9KFUubm9kZVR5cGU9PTkpOwppZih0aGlzLmRvY3VtZW50IT09KHk/VTpVLm93bmVyRG9jdW1lbnQpKXt0aGlzLnNldERvY3VtZW50KFUpO31pZihJKXtmb3IoTz1wLmxlbmd0aDtPLS07KXtWW3RoaXMuZ2V0VUlEKHBbT10pXT10cnVlO319aWYodHlwZW9mIHo9PSJzdHJpbmciKXt2YXIgcj16Lm1hdGNoKGUpOwpzaW1wbGVTZWxlY3RvcnM6aWYocil7dmFyIHU9clsxXSx2PXJbMl0sQSxFO2lmKCF1KXtpZih2PT0iKiImJnRoaXMuYnJva2VuU3RhckdFQlROKXticmVhayBzaW1wbGVTZWxlY3RvcnM7fUU9VS5nZXRFbGVtZW50c0J5VGFnTmFtZSh2KTtpZihzKXtyZXR1cm4gRVswXXx8bnVsbDsKfWZvcihPPTA7QT1FW08rK107KXtpZighKEkmJlZbdGhpcy5nZXRVSUQoQSldKSl7cC5wdXNoKEEpO319fWVsc2V7aWYodT09IiMiKXtpZighdGhpcy5pc0hUTUxEb2N1bWVudHx8IXkpe2JyZWFrIHNpbXBsZVNlbGVjdG9yczt9QT1VLmdldEVsZW1lbnRCeUlkKHYpOwppZighQSl7cmV0dXJuIHA7fWlmKHRoaXMuaWRHZXRzTmFtZSYmQS5nZXRBdHRyaWJ1dGVOb2RlKCJpZCIpLm5vZGVWYWx1ZSE9dil7YnJlYWsgc2ltcGxlU2VsZWN0b3JzO31pZihzKXtyZXR1cm4gQXx8bnVsbDt9aWYoIShJJiZWW3RoaXMuZ2V0VUlEKEEpXSkpe3AucHVzaChBKTsKfX1lbHNle2lmKHU9PSIuIil7aWYoIXRoaXMuaXNIVE1MRG9jdW1lbnR8fCgoIVUuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZXx8dGhpcy5icm9rZW5HRUJDTikmJlUucXVlcnlTZWxlY3RvckFsbCkpe2JyZWFrIHNpbXBsZVNlbGVjdG9yczt9aWYoVS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lJiYhdGhpcy5icm9rZW5HRUJDTil7RT1VLmdldEVsZW1lbnRzQnlDbGFzc05hbWUodik7CmlmKHMpe3JldHVybiBFWzBdfHxudWxsO31mb3IoTz0wO0E9RVtPKytdOyl7aWYoIShJJiZWW3RoaXMuZ2V0VUlEKEEpXSkpe3AucHVzaChBKTt9fX1lbHNle3ZhciBUPW5ldyBSZWdFeHAoIihefFxccykiK2QuZXNjYXBlUmVnRXhwKHYpKyIoXFxzfCQpIik7RT1VLmdldEVsZW1lbnRzQnlUYWdOYW1lKCIqIik7CmZvcihPPTA7QT1FW08rK107KXtjbGFzc05hbWU9QS5jbGFzc05hbWU7aWYoIShjbGFzc05hbWUmJlQudGVzdChjbGFzc05hbWUpKSl7Y29udGludWU7fWlmKHMpe3JldHVybiBBO31pZighKEkmJlZbdGhpcy5nZXRVSUQoQSldKSl7cC5wdXNoKEEpO319fX19fWlmKEkpe3RoaXMuc29ydChwKTsKfXJldHVybihzKT9udWxsOnA7fXF1ZXJ5U2VsZWN0b3I6aWYoVS5xdWVyeVNlbGVjdG9yQWxsKXtpZighdGhpcy5pc0hUTUxEb2N1bWVudHx8Zlt6XXx8dGhpcy5icm9rZW5NaXhlZENhc2VRU0F8fCh0aGlzLmJyb2tlbkNoZWNrZWRRU0EmJnouaW5kZXhPZigiOmNoZWNrZWQiKT4tMSl8fCh0aGlzLmJyb2tlbkVtcHR5QXR0cmlidXRlUVNBJiZnLnRlc3QoeikpfHwoIXkmJnouaW5kZXhPZigiLCIpPi0xKXx8ZC5kaXNhYmxlUVNBKXticmVhayBxdWVyeVNlbGVjdG9yOwp9dmFyIFM9eix4PVU7aWYoIXkpe3ZhciBDPXguZ2V0QXR0cmlidXRlKCJpZCIpLHQ9InNsaWNraWRfXyI7eC5zZXRBdHRyaWJ1dGUoImlkIix0KTtTPSIjIit0KyIgIitTO1U9eC5wYXJlbnROb2RlO310cnl7aWYocyl7cmV0dXJuIFUucXVlcnlTZWxlY3RvcihTKXx8bnVsbDsKfWVsc2V7RT1VLnF1ZXJ5U2VsZWN0b3JBbGwoUyk7fX1jYXRjaChRKXtmW3pdPTE7YnJlYWsgcXVlcnlTZWxlY3Rvcjt9ZmluYWxseXtpZigheSl7aWYoQyl7eC5zZXRBdHRyaWJ1dGUoImlkIixDKTt9ZWxzZXt4LnJlbW92ZUF0dHJpYnV0ZSgiaWQiKTt9VT14O319aWYodGhpcy5zdGFyU2VsZWN0c0Nsb3NlZFFTQSl7Zm9yKE89MDsKQT1FW08rK107KXtpZihBLm5vZGVOYW1lPiJAIiYmIShJJiZWW3RoaXMuZ2V0VUlEKEEpXSkpe3AucHVzaChBKTt9fX1lbHNle2ZvcihPPTA7QT1FW08rK107KXtpZighKEkmJlZbdGhpcy5nZXRVSUQoQSldKSl7cC5wdXNoKEEpO319fWlmKEkpe3RoaXMuc29ydChwKTsKfXJldHVybiBwO31GPXRoaXMuU2xpY2sucGFyc2Uoeik7aWYoIUYubGVuZ3RoKXtyZXR1cm4gcDt9fWVsc2V7aWYoej09bnVsbCl7cmV0dXJuIHA7fWVsc2V7aWYoei5TbGljayl7Rj16O31lbHNle2lmKHRoaXMuY29udGFpbnMoVS5kb2N1bWVudEVsZW1lbnR8fFUseikpeyhwKT9wLnB1c2goeik6cD16OwpyZXR1cm4gcDt9ZWxzZXtyZXR1cm4gcDt9fX19dGhpcy5wb3NOVEg9e307dGhpcy5wb3NOVEhMYXN0PXt9O3RoaXMucG9zTlRIVHlwZT17fTt0aGlzLnBvc05USFR5cGVMYXN0PXt9O3RoaXMucHVzaD0oIUkmJihzfHwoRi5sZW5ndGg9PTEmJkYuZXhwcmVzc2lvbnNbMF0ubGVuZ3RoPT0xKSkpP3RoaXMucHVzaEFycmF5OnRoaXMucHVzaFVJRDsKaWYocD09bnVsbCl7cD1bXTt9dmFyIE0sTCxLO3ZhciBCLEosRCxjLHEsRyxXO3ZhciBOLFAsbyx3LFI9Ri5leHByZXNzaW9ucztzZWFyY2g6Zm9yKE89MDsoUD1SW09dKTtPKyspe2ZvcihNPTA7KG89UFtNXSk7TSsrKXtCPSJjb21iaW5hdG9yOiIrby5jb21iaW5hdG9yOwppZighdGhpc1tCXSl7Y29udGludWUgc2VhcmNoO31KPSh0aGlzLmlzWE1MRG9jdW1lbnQpP28udGFnOm8udGFnLnRvVXBwZXJDYXNlKCk7RD1vLmlkO2M9by5jbGFzc0xpc3Q7cT1vLmNsYXNzZXM7Rz1vLmF0dHJpYnV0ZXM7Vz1vLnBzZXVkb3M7dz0oTT09PShQLmxlbmd0aC0xKSk7CnRoaXMuYml0VW5pcXVlcz17fTtpZih3KXt0aGlzLnVuaXF1ZXM9Vjt0aGlzLmZvdW5kPXA7fWVsc2V7dGhpcy51bmlxdWVzPXt9O3RoaXMuZm91bmQ9W107fWlmKE09PT0wKXt0aGlzW0JdKFUsSixELHEsRyxXLGMpO2lmKHMmJncmJnAubGVuZ3RoKXticmVhayBzZWFyY2g7Cn19ZWxzZXtpZihzJiZ3KXtmb3IoTD0wLEs9Ti5sZW5ndGg7TDxLO0wrKyl7dGhpc1tCXShOW0xdLEosRCxxLEcsVyxjKTtpZihwLmxlbmd0aCl7YnJlYWsgc2VhcmNoO319fWVsc2V7Zm9yKEw9MCxLPU4ubGVuZ3RoO0w8SztMKyspe3RoaXNbQl0oTltMXSxKLEQscSxHLFcsYyk7Cn19fU49dGhpcy5mb3VuZDt9fWlmKEl8fChGLmV4cHJlc3Npb25zLmxlbmd0aD4xKSl7dGhpcy5zb3J0KHApO31yZXR1cm4ocyk/KHBbMF18fG51bGwpOnA7fTtqLnVpZHg9MTtqLnVpZGs9InNsaWNrLXVuaXF1ZWlkIjtqLmdldFVJRFhNTD1mdW5jdGlvbihtKXt2YXIgYz1tLmdldEF0dHJpYnV0ZSh0aGlzLnVpZGspOwppZighYyl7Yz10aGlzLnVpZHgrKzttLnNldEF0dHJpYnV0ZSh0aGlzLnVpZGssYyk7fXJldHVybiBjO307ai5nZXRVSURIVE1MPWZ1bmN0aW9uKGMpe3JldHVybiBjLnVuaXF1ZU51bWJlcnx8KGMudW5pcXVlTnVtYmVyPXRoaXMudWlkeCsrKTt9O2ouc29ydD1mdW5jdGlvbihjKXtpZighdGhpcy5kb2N1bWVudFNvcnRlcil7cmV0dXJuIGM7Cn1jLnNvcnQodGhpcy5kb2N1bWVudFNvcnRlcik7cmV0dXJuIGM7fTtqLmNhY2hlTlRIPXt9O2oubWF0Y2hOVEg9L14oWystXT9cZCopPyhbYS16XSspPyhbKy1dXGQrKT8kLztqLnBhcnNlTlRIQXJndW1lbnQ9ZnVuY3Rpb24ocCl7dmFyIG49cC5tYXRjaCh0aGlzLm1hdGNoTlRIKTsKaWYoIW4pe3JldHVybiBmYWxzZTt9dmFyIG89blsyXXx8ZmFsc2U7dmFyIG09blsxXXx8MTtpZihtPT0iLSIpe209LTE7fXZhciBjPStuWzNdfHwwO249KG89PSJuIik/e2E6bSxiOmN9OihvPT0ib2RkIik/e2E6MixiOjF9OihvPT0iZXZlbiIpP3thOjIsYjowfTp7YTowLGI6bX07CnJldHVybih0aGlzLmNhY2hlTlRIW3BdPW4pO307ai5jcmVhdGVOVEhQc2V1ZG89ZnVuY3Rpb24obyxtLGMsbil7cmV0dXJuIGZ1bmN0aW9uKHIscCl7dmFyIHQ9dGhpcy5nZXRVSUQocik7aWYoIXRoaXNbY11bdF0pe3ZhciB6PXIucGFyZW50Tm9kZTtpZigheil7cmV0dXJuIGZhbHNlOwp9dmFyIHE9eltvXSxzPTE7aWYobil7dmFyIHk9ci5ub2RlTmFtZTtkb3tpZihxLm5vZGVOYW1lIT15KXtjb250aW51ZTt9dGhpc1tjXVt0aGlzLmdldFVJRChxKV09cysrO313aGlsZSgocT1xW21dKSk7fWVsc2V7ZG97aWYocS5ub2RlVHlwZSE9MSl7Y29udGludWU7Cn10aGlzW2NdW3RoaXMuZ2V0VUlEKHEpXT1zKys7fXdoaWxlKChxPXFbbV0pKTt9fXA9cHx8Im4iO3ZhciB1PXRoaXMuY2FjaGVOVEhbcF18fHRoaXMucGFyc2VOVEhBcmd1bWVudChwKTtpZighdSl7cmV0dXJuIGZhbHNlO312YXIgeD11LmEsdz11LmIsdj10aGlzW2NdW3RdOwppZih4PT0wKXtyZXR1cm4gdz09djt9aWYoeD4wKXtpZih2PHcpe3JldHVybiBmYWxzZTt9fWVsc2V7aWYodzx2KXtyZXR1cm4gZmFsc2U7fX1yZXR1cm4oKHYtdykleCk9PTA7fTt9O2oucHVzaEFycmF5PWZ1bmN0aW9uKG8sYyxxLG4sbSxwKXtpZih0aGlzLm1hdGNoU2VsZWN0b3IobyxjLHEsbixtLHApKXt0aGlzLmZvdW5kLnB1c2gobyk7Cn19O2oucHVzaFVJRD1mdW5jdGlvbihwLGMscixvLG0scSl7dmFyIG49dGhpcy5nZXRVSUQocCk7aWYoIXRoaXMudW5pcXVlc1tuXSYmdGhpcy5tYXRjaFNlbGVjdG9yKHAsYyxyLG8sbSxxKSl7dGhpcy51bmlxdWVzW25dPXRydWU7dGhpcy5mb3VuZC5wdXNoKHApO319OwpqLm1hdGNoTm9kZT1mdW5jdGlvbihtLG4pe2lmKHRoaXMuaXNIVE1MRG9jdW1lbnQmJnRoaXMubmF0aXZlTWF0Y2hlc1NlbGVjdG9yKXt0cnl7cmV0dXJuIHRoaXMubmF0aXZlTWF0Y2hlc1NlbGVjdG9yLmNhbGwobSxuLnJlcGxhY2UoL1xbKFtePV0rKT1ccyooW14nIlxdXSs/KVxzKlxdL2csJ1skMT0iJDIiXScpKTsKfWNhdGNoKHUpe319dmFyIHQ9dGhpcy5TbGljay5wYXJzZShuKTtpZighdCl7cmV0dXJuIHRydWU7fXZhciByPXQuZXhwcmVzc2lvbnMscCxzPTAscTtmb3IocT0wOyhjdXJyZW50RXhwcmVzc2lvbj1yW3FdKTtxKyspe2lmKGN1cnJlbnRFeHByZXNzaW9uLmxlbmd0aD09MSl7dmFyIG89Y3VycmVudEV4cHJlc3Npb25bMF07CmlmKHRoaXMubWF0Y2hTZWxlY3RvcihtLCh0aGlzLmlzWE1MRG9jdW1lbnQpP28udGFnOm8udGFnLnRvVXBwZXJDYXNlKCksby5pZCxvLmNsYXNzZXMsby5hdHRyaWJ1dGVzLG8ucHNldWRvcykpe3JldHVybiB0cnVlO31zKys7fX1pZihzPT10Lmxlbmd0aCl7cmV0dXJuIGZhbHNlOwp9dmFyIGM9dGhpcy5zZWFyY2godGhpcy5kb2N1bWVudCx0KSx2O2ZvcihxPTA7dj1jW3ErK107KXtpZih2PT09bSl7cmV0dXJuIHRydWU7fX1yZXR1cm4gZmFsc2U7fTtqLm1hdGNoUHNldWRvPWZ1bmN0aW9uKHAsYyxvKXt2YXIgbT0icHNldWRvOiIrYztpZih0aGlzW21dKXtyZXR1cm4gdGhpc1ttXShwLG8pOwp9dmFyIG49dGhpcy5nZXRBdHRyaWJ1dGUocCxjKTtyZXR1cm4obyk/bz09bjohIW47fTtqLm1hdGNoU2VsZWN0b3I9ZnVuY3Rpb24obix1LGMsbyxwLHIpe2lmKHUpe3ZhciBzPSh0aGlzLmlzWE1MRG9jdW1lbnQpP24ubm9kZU5hbWU6bi5ub2RlTmFtZS50b1VwcGVyQ2FzZSgpOwppZih1PT0iKiIpe2lmKHM8IkAiKXtyZXR1cm4gZmFsc2U7fX1lbHNle2lmKHMhPXUpe3JldHVybiBmYWxzZTt9fX1pZihjJiZuLmdldEF0dHJpYnV0ZSgiaWQiKSE9Yyl7cmV0dXJuIGZhbHNlO312YXIgcSxtLHQ7aWYobyl7Zm9yKHE9by5sZW5ndGg7cS0tOyl7dD1uLmdldEF0dHJpYnV0ZSgiY2xhc3MiKXx8bi5jbGFzc05hbWU7CmlmKCEodCYmb1txXS5yZWdleHAudGVzdCh0KSkpe3JldHVybiBmYWxzZTt9fX1pZihwKXtmb3IocT1wLmxlbmd0aDtxLS07KXttPXBbcV07aWYobS5vcGVyYXRvcj8hbS50ZXN0KHRoaXMuZ2V0QXR0cmlidXRlKG4sbS5rZXkpKTohdGhpcy5oYXNBdHRyaWJ1dGUobixtLmtleSkpe3JldHVybiBmYWxzZTsKfX19aWYocil7Zm9yKHE9ci5sZW5ndGg7cS0tOyl7bT1yW3FdO2lmKCF0aGlzLm1hdGNoUHNldWRvKG4sbS5rZXksbS52YWx1ZSkpe3JldHVybiBmYWxzZTt9fX1yZXR1cm4gdHJ1ZTt9O3ZhciBpPXsiICI6ZnVuY3Rpb24ocCx2LG0scSxyLHQsbyl7dmFyIHMsdSxuOwppZih0aGlzLmlzSFRNTERvY3VtZW50KXtnZXRCeUlkOmlmKG0pe3U9dGhpcy5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChtKTtpZigoIXUmJnAuYWxsKXx8KHRoaXMuaWRHZXRzTmFtZSYmdSYmdS5nZXRBdHRyaWJ1dGVOb2RlKCJpZCIpLm5vZGVWYWx1ZSE9bSkpe249cC5hbGxbbV07CmlmKCFuKXtyZXR1cm47fWlmKCFuWzBdKXtuPVtuXTt9Zm9yKHM9MDt1PW5bcysrXTspe3ZhciBjPXUuZ2V0QXR0cmlidXRlTm9kZSgiaWQiKTtpZihjJiZjLm5vZGVWYWx1ZT09bSl7dGhpcy5wdXNoKHUsdixudWxsLHEscix0KTticmVhazt9fXJldHVybjt9aWYoIXUpe2lmKHRoaXMuY29udGFpbnModGhpcy5yb290LHApKXtyZXR1cm47Cn1lbHNle2JyZWFrIGdldEJ5SWQ7fX1lbHNle2lmKHRoaXMuZG9jdW1lbnQhPT1wJiYhdGhpcy5jb250YWlucyhwLHUpKXtyZXR1cm47fX10aGlzLnB1c2godSx2LG51bGwscSxyLHQpO3JldHVybjt9Z2V0QnlDbGFzczppZihxJiZwLmdldEVsZW1lbnRzQnlDbGFzc05hbWUmJiF0aGlzLmJyb2tlbkdFQkNOKXtuPXAuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShvLmpvaW4oIiAiKSk7CmlmKCEobiYmbi5sZW5ndGgpKXticmVhayBnZXRCeUNsYXNzO31mb3Iocz0wO3U9bltzKytdOyl7dGhpcy5wdXNoKHUsdixtLG51bGwscix0KTt9cmV0dXJuO319Z2V0QnlUYWc6e249cC5nZXRFbGVtZW50c0J5VGFnTmFtZSh2KTtpZighKG4mJm4ubGVuZ3RoKSl7YnJlYWsgZ2V0QnlUYWc7Cn1pZighdGhpcy5icm9rZW5TdGFyR0VCVE4pe3Y9bnVsbDt9Zm9yKHM9MDt1PW5bcysrXTspe3RoaXMucHVzaCh1LHYsbSxxLHIsdCk7fX19LCI+IjpmdW5jdGlvbihvLGMscSxuLG0scCl7aWYoKG89by5maXJzdENoaWxkKSl7ZG97aWYoby5ub2RlVHlwZT09MSl7dGhpcy5wdXNoKG8sYyxxLG4sbSxwKTsKfX13aGlsZSgobz1vLm5leHRTaWJsaW5nKSk7fX0sIisiOmZ1bmN0aW9uKG8sYyxxLG4sbSxwKXt3aGlsZSgobz1vLm5leHRTaWJsaW5nKSl7aWYoby5ub2RlVHlwZT09MSl7dGhpcy5wdXNoKG8sYyxxLG4sbSxwKTticmVhazt9fX0sIl4iOmZ1bmN0aW9uKG8sYyxxLG4sbSxwKXtvPW8uZmlyc3RDaGlsZDsKaWYobyl7aWYoby5ub2RlVHlwZT09MSl7dGhpcy5wdXNoKG8sYyxxLG4sbSxwKTt9ZWxzZXt0aGlzWyJjb21iaW5hdG9yOisiXShvLGMscSxuLG0scCk7fX19LCJ+IjpmdW5jdGlvbihwLGMscixvLG0scSl7d2hpbGUoKHA9cC5uZXh0U2libGluZykpe2lmKHAubm9kZVR5cGUhPTEpe2NvbnRpbnVlOwp9dmFyIG49dGhpcy5nZXRVSUQocCk7aWYodGhpcy5iaXRVbmlxdWVzW25dKXticmVhazt9dGhpcy5iaXRVbmlxdWVzW25dPXRydWU7dGhpcy5wdXNoKHAsYyxyLG8sbSxxKTt9fSwiKysiOmZ1bmN0aW9uKG8sYyxxLG4sbSxwKXt0aGlzWyJjb21iaW5hdG9yOisiXShvLGMscSxuLG0scCk7CnRoaXNbImNvbWJpbmF0b3I6ISsiXShvLGMscSxuLG0scCk7fSwifn4iOmZ1bmN0aW9uKG8sYyxxLG4sbSxwKXt0aGlzWyJjb21iaW5hdG9yOn4iXShvLGMscSxuLG0scCk7dGhpc1siY29tYmluYXRvcjohfiJdKG8sYyxxLG4sbSxwKTt9LCIhIjpmdW5jdGlvbihvLGMscSxuLG0scCl7d2hpbGUoKG89by5wYXJlbnROb2RlKSl7aWYobyE9PXRoaXMuZG9jdW1lbnQpe3RoaXMucHVzaChvLGMscSxuLG0scCk7Cn19fSwiIT4iOmZ1bmN0aW9uKG8sYyxxLG4sbSxwKXtvPW8ucGFyZW50Tm9kZTtpZihvIT09dGhpcy5kb2N1bWVudCl7dGhpcy5wdXNoKG8sYyxxLG4sbSxwKTt9fSwiISsiOmZ1bmN0aW9uKG8sYyxxLG4sbSxwKXt3aGlsZSgobz1vLnByZXZpb3VzU2libGluZykpe2lmKG8ubm9kZVR5cGU9PTEpe3RoaXMucHVzaChvLGMscSxuLG0scCk7CmJyZWFrO319fSwiIV4iOmZ1bmN0aW9uKG8sYyxxLG4sbSxwKXtvPW8ubGFzdENoaWxkO2lmKG8pe2lmKG8ubm9kZVR5cGU9PTEpe3RoaXMucHVzaChvLGMscSxuLG0scCk7fWVsc2V7dGhpc1siY29tYmluYXRvcjohKyJdKG8sYyxxLG4sbSxwKTt9fX0sIiF+IjpmdW5jdGlvbihwLGMscixvLG0scSl7d2hpbGUoKHA9cC5wcmV2aW91c1NpYmxpbmcpKXtpZihwLm5vZGVUeXBlIT0xKXtjb250aW51ZTsKfXZhciBuPXRoaXMuZ2V0VUlEKHApO2lmKHRoaXMuYml0VW5pcXVlc1tuXSl7YnJlYWs7fXRoaXMuYml0VW5pcXVlc1tuXT10cnVlO3RoaXMucHVzaChwLGMscixvLG0scSk7fX19O2Zvcih2YXIgaCBpbiBpKXtqWyJjb21iaW5hdG9yOiIraF09aVtoXTt9dmFyIGs9e2VtcHR5OmZ1bmN0aW9uKGMpe3ZhciBtPWMuZmlyc3RDaGlsZDsKcmV0dXJuICEobSYmbS5ub2RlVHlwZT09MSkmJiEoYy5pbm5lclRleHR8fGMudGV4dENvbnRlbnR8fCIiKS5sZW5ndGg7fSxub3Q6ZnVuY3Rpb24oYyxtKXtyZXR1cm4gIXRoaXMubWF0Y2hOb2RlKGMsbSk7fSxjb250YWluczpmdW5jdGlvbihjLG0pe3JldHVybihjLmlubmVyVGV4dHx8Yy50ZXh0Q29udGVudHx8IiIpLmluZGV4T2YobSk+LTE7Cn0sImZpcnN0LWNoaWxkIjpmdW5jdGlvbihjKXt3aGlsZSgoYz1jLnByZXZpb3VzU2libGluZykpe2lmKGMubm9kZVR5cGU9PTEpe3JldHVybiBmYWxzZTt9fXJldHVybiB0cnVlO30sImxhc3QtY2hpbGQiOmZ1bmN0aW9uKGMpe3doaWxlKChjPWMubmV4dFNpYmxpbmcpKXtpZihjLm5vZGVUeXBlPT0xKXtyZXR1cm4gZmFsc2U7Cn19cmV0dXJuIHRydWU7fSwib25seS1jaGlsZCI6ZnVuY3Rpb24obil7dmFyIG09bjt3aGlsZSgobT1tLnByZXZpb3VzU2libGluZykpe2lmKG0ubm9kZVR5cGU9PTEpe3JldHVybiBmYWxzZTt9fXZhciBjPW47d2hpbGUoKGM9Yy5uZXh0U2libGluZykpe2lmKGMubm9kZVR5cGU9PTEpe3JldHVybiBmYWxzZTsKfX1yZXR1cm4gdHJ1ZTt9LCJudGgtY2hpbGQiOmouY3JlYXRlTlRIUHNldWRvKCJmaXJzdENoaWxkIiwibmV4dFNpYmxpbmciLCJwb3NOVEgiKSwibnRoLWxhc3QtY2hpbGQiOmouY3JlYXRlTlRIUHNldWRvKCJsYXN0Q2hpbGQiLCJwcmV2aW91c1NpYmxpbmciLCJwb3NOVEhMYXN0IiksIm50aC1vZi10eXBlIjpqLmNyZWF0ZU5USFBzZXVkbygiZmlyc3RDaGlsZCIsIm5leHRTaWJsaW5nIiwicG9zTlRIVHlwZSIsdHJ1ZSksIm50aC1sYXN0LW9mLXR5cGUiOmouY3JlYXRlTlRIUHNldWRvKCJsYXN0Q2hpbGQiLCJwcmV2aW91c1NpYmxpbmciLCJwb3NOVEhUeXBlTGFzdCIsdHJ1ZSksaW5kZXg6ZnVuY3Rpb24obSxjKXtyZXR1cm4gdGhpc1sicHNldWRvOm50aC1jaGlsZCJdKG0sIiIrYysxKTsKfSxldmVuOmZ1bmN0aW9uKGMpe3JldHVybiB0aGlzWyJwc2V1ZG86bnRoLWNoaWxkIl0oYywiMm4iKTt9LG9kZDpmdW5jdGlvbihjKXtyZXR1cm4gdGhpc1sicHNldWRvOm50aC1jaGlsZCJdKGMsIjJuKzEiKTt9LCJmaXJzdC1vZi10eXBlIjpmdW5jdGlvbihjKXt2YXIgbT1jLm5vZGVOYW1lOwp3aGlsZSgoYz1jLnByZXZpb3VzU2libGluZykpe2lmKGMubm9kZU5hbWU9PW0pe3JldHVybiBmYWxzZTt9fXJldHVybiB0cnVlO30sImxhc3Qtb2YtdHlwZSI6ZnVuY3Rpb24oYyl7dmFyIG09Yy5ub2RlTmFtZTt3aGlsZSgoYz1jLm5leHRTaWJsaW5nKSl7aWYoYy5ub2RlTmFtZT09bSl7cmV0dXJuIGZhbHNlOwp9fXJldHVybiB0cnVlO30sIm9ubHktb2YtdHlwZSI6ZnVuY3Rpb24obil7dmFyIG09bixvPW4ubm9kZU5hbWU7d2hpbGUoKG09bS5wcmV2aW91c1NpYmxpbmcpKXtpZihtLm5vZGVOYW1lPT1vKXtyZXR1cm4gZmFsc2U7fX12YXIgYz1uO3doaWxlKChjPWMubmV4dFNpYmxpbmcpKXtpZihjLm5vZGVOYW1lPT1vKXtyZXR1cm4gZmFsc2U7Cn19cmV0dXJuIHRydWU7fSxlbmFibGVkOmZ1bmN0aW9uKGMpe3JldHVybiAhYy5kaXNhYmxlZDt9LGRpc2FibGVkOmZ1bmN0aW9uKGMpe3JldHVybiBjLmRpc2FibGVkO30sY2hlY2tlZDpmdW5jdGlvbihjKXtyZXR1cm4gYy5jaGVja2VkfHxjLnNlbGVjdGVkO30sZm9jdXM6ZnVuY3Rpb24oYyl7cmV0dXJuIHRoaXMuaXNIVE1MRG9jdW1lbnQmJnRoaXMuZG9jdW1lbnQuYWN0aXZlRWxlbWVudD09PWMmJihjLmhyZWZ8fGMudHlwZXx8dGhpcy5oYXNBdHRyaWJ1dGUoYywidGFiaW5kZXgiKSk7Cn0scm9vdDpmdW5jdGlvbihjKXtyZXR1cm4oYz09PXRoaXMucm9vdCk7fSxzZWxlY3RlZDpmdW5jdGlvbihjKXtyZXR1cm4gYy5zZWxlY3RlZDt9fTtmb3IodmFyIGEgaW4gayl7alsicHNldWRvOiIrYV09a1thXTt9ai5hdHRyaWJ1dGVHZXR0ZXJzPXsiY2xhc3MiOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0QXR0cmlidXRlKCJjbGFzcyIpfHx0aGlzLmNsYXNzTmFtZTsKfSwiZm9yIjpmdW5jdGlvbigpe3JldHVybigiaHRtbEZvciIgaW4gdGhpcyk/dGhpcy5odG1sRm9yOnRoaXMuZ2V0QXR0cmlidXRlKCJmb3IiKTt9LGhyZWY6ZnVuY3Rpb24oKXtyZXR1cm4oImhyZWYiIGluIHRoaXMpP3RoaXMuZ2V0QXR0cmlidXRlKCJocmVmIiwyKTp0aGlzLmdldEF0dHJpYnV0ZSgiaHJlZiIpOwp9LHN0eWxlOmZ1bmN0aW9uKCl7cmV0dXJuKHRoaXMuc3R5bGUpP3RoaXMuc3R5bGUuY3NzVGV4dDp0aGlzLmdldEF0dHJpYnV0ZSgic3R5bGUiKTt9LHRhYmluZGV4OmZ1bmN0aW9uKCl7dmFyIGM9dGhpcy5nZXRBdHRyaWJ1dGVOb2RlKCJ0YWJpbmRleCIpO3JldHVybihjJiZjLnNwZWNpZmllZCk/Yy5ub2RlVmFsdWU6bnVsbDsKfSx0eXBlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0QXR0cmlidXRlKCJ0eXBlIik7fX07dmFyIGQ9ai5TbGljaz0odGhpcy5TbGlja3x8e30pO2QudmVyc2lvbj0iMS4xLjUiO2Quc2VhcmNoPWZ1bmN0aW9uKG0sbixjKXtyZXR1cm4gai5zZWFyY2gobSxuLGMpOwp9O2QuZmluZD1mdW5jdGlvbihjLG0pe3JldHVybiBqLnNlYXJjaChjLG0sbnVsbCx0cnVlKTt9O2QuY29udGFpbnM9ZnVuY3Rpb24oYyxtKXtqLnNldERvY3VtZW50KGMpO3JldHVybiBqLmNvbnRhaW5zKGMsbSk7fTtkLmdldEF0dHJpYnV0ZT1mdW5jdGlvbihtLGMpe3JldHVybiBqLmdldEF0dHJpYnV0ZShtLGMpOwp9O2QubWF0Y2g9ZnVuY3Rpb24obSxjKXtpZighKG0mJmMpKXtyZXR1cm4gZmFsc2U7fWlmKCFjfHxjPT09bSl7cmV0dXJuIHRydWU7fWouc2V0RG9jdW1lbnQobSk7cmV0dXJuIGoubWF0Y2hOb2RlKG0sYyk7fTtkLmRlZmluZUF0dHJpYnV0ZUdldHRlcj1mdW5jdGlvbihjLG0pe2ouYXR0cmlidXRlR2V0dGVyc1tjXT1tOwpyZXR1cm4gdGhpczt9O2QubG9va3VwQXR0cmlidXRlR2V0dGVyPWZ1bmN0aW9uKGMpe3JldHVybiBqLmF0dHJpYnV0ZUdldHRlcnNbY107fTtkLmRlZmluZVBzZXVkbz1mdW5jdGlvbihjLG0pe2pbInBzZXVkbzoiK2NdPWZ1bmN0aW9uKG8sbil7cmV0dXJuIG0uY2FsbChvLG4pOwp9O3JldHVybiB0aGlzO307ZC5sb29rdXBQc2V1ZG89ZnVuY3Rpb24oYyl7dmFyIG09alsicHNldWRvOiIrY107aWYobSl7cmV0dXJuIGZ1bmN0aW9uKG4pe3JldHVybiBtLmNhbGwodGhpcyxuKTt9O31yZXR1cm4gbnVsbDt9O2Qub3ZlcnJpZGU9ZnVuY3Rpb24obSxjKXtqLm92ZXJyaWRlKG0sYyk7CnJldHVybiB0aGlzO307ZC5pc1hNTD1qLmlzWE1MO2QudWlkT2Y9ZnVuY3Rpb24oYyl7cmV0dXJuIGouZ2V0VUlESFRNTChjKTt9O2lmKCF0aGlzLlNsaWNrKXt0aGlzLlNsaWNrPWQ7fX0pLmFwcGx5KCh0eXBlb2YgZXhwb3J0cyE9InVuZGVmaW5lZCIpP2V4cG9ydHM6dGhpcyk7CnZhciBFbGVtZW50PWZ1bmN0aW9uKGIsZyl7dmFyIGg9RWxlbWVudC5Db25zdHJ1Y3RvcnNbYl07aWYoaCl7cmV0dXJuIGgoZyk7fWlmKHR5cGVvZiBiIT0ic3RyaW5nIil7cmV0dXJuIGRvY3VtZW50LmlkKGIpLnNldChnKTt9aWYoIWcpe2c9e307fWlmKCEoL15bXHctXSskLykudGVzdChiKSl7dmFyIGU9U2xpY2sucGFyc2UoYikuZXhwcmVzc2lvbnNbMF1bMF07CmI9KGUudGFnPT0iKiIpPyJkaXYiOmUudGFnO2lmKGUuaWQmJmcuaWQ9PW51bGwpe2cuaWQ9ZS5pZDt9dmFyIGQ9ZS5hdHRyaWJ1dGVzO2lmKGQpe2Zvcih2YXIgZj0wLGM9ZC5sZW5ndGg7ZjxjO2YrKyl7dmFyIGE9ZFtmXTtpZihnW2Eua2V5XSE9bnVsbCl7Y29udGludWU7Cn1pZihhLnZhbHVlIT1udWxsJiZhLm9wZXJhdG9yPT0iPSIpe2dbYS5rZXldPWEudmFsdWU7fWVsc2V7aWYoIWEudmFsdWUmJiFhLm9wZXJhdG9yKXtnW2Eua2V5XT10cnVlO319fX1pZihlLmNsYXNzTGlzdCYmZ1siY2xhc3MiXT09bnVsbCl7Z1siY2xhc3MiXT1lLmNsYXNzTGlzdC5qb2luKCIgIik7Cn19cmV0dXJuIGRvY3VtZW50Lm5ld0VsZW1lbnQoYixnKTt9O2lmKEJyb3dzZXIuRWxlbWVudCl7RWxlbWVudC5wcm90b3R5cGU9QnJvd3Nlci5FbGVtZW50LnByb3RvdHlwZTt9bmV3IFR5cGUoIkVsZW1lbnQiLEVsZW1lbnQpLm1pcnJvcihmdW5jdGlvbihhKXtpZihBcnJheS5wcm90b3R5cGVbYV0pe3JldHVybjsKfXZhciBiPXt9O2JbYV09ZnVuY3Rpb24oKXt2YXIgaD1bXSxlPWFyZ3VtZW50cyxqPXRydWU7Zm9yKHZhciBnPTAsZD10aGlzLmxlbmd0aDtnPGQ7ZysrKXt2YXIgZj10aGlzW2ddLGM9aFtnXT1mW2FdLmFwcGx5KGYsZSk7aj0oaiYmdHlwZU9mKGMpPT0iZWxlbWVudCIpOwp9cmV0dXJuKGopP25ldyBFbGVtZW50cyhoKTpoO307RWxlbWVudHMuaW1wbGVtZW50KGIpO30pO2lmKCFCcm93c2VyLkVsZW1lbnQpe0VsZW1lbnQucGFyZW50PU9iamVjdDtFbGVtZW50LlByb3RvdHlwZT17IiRmYW1pbHkiOkZ1bmN0aW9uLmZyb20oImVsZW1lbnQiKS5oaWRlKCl9OwpFbGVtZW50Lm1pcnJvcihmdW5jdGlvbihhLGIpe0VsZW1lbnQuUHJvdG90eXBlW2FdPWI7fSk7fUVsZW1lbnQuQ29uc3RydWN0b3JzPXt9O3ZhciBJRnJhbWU9bmV3IFR5cGUoIklGcmFtZSIsZnVuY3Rpb24oKXt2YXIgZT1BcnJheS5saW5rKGFyZ3VtZW50cyx7cHJvcGVydGllczpUeXBlLmlzT2JqZWN0LGlmcmFtZTpmdW5jdGlvbihmKXtyZXR1cm4oZiE9bnVsbCk7Cn19KTt2YXIgYz1lLnByb3BlcnRpZXN8fHt9LGI7aWYoZS5pZnJhbWUpe2I9ZG9jdW1lbnQuaWQoZS5pZnJhbWUpO312YXIgZD1jLm9ubG9hZHx8ZnVuY3Rpb24oKXt9O2RlbGV0ZSBjLm9ubG9hZDtjLmlkPWMubmFtZT1bYy5pZCxjLm5hbWUsYj8oYi5pZHx8Yi5uYW1lKToiSUZyYW1lXyIrU3RyaW5nLnVuaXF1ZUlEKCldLnBpY2soKTsKYj1uZXcgRWxlbWVudChifHwiaWZyYW1lIixjKTt2YXIgYT1mdW5jdGlvbigpe2QuY2FsbChiLmNvbnRlbnRXaW5kb3cpO307aWYod2luZG93LmZyYW1lc1tjLmlkXSl7YSgpO31lbHNle2IuYWRkTGlzdGVuZXIoImxvYWQiLGEpO31yZXR1cm4gYjt9KTt2YXIgRWxlbWVudHM9dGhpcy5FbGVtZW50cz1mdW5jdGlvbihhKXtpZihhJiZhLmxlbmd0aCl7dmFyIGU9e30sZDsKZm9yKHZhciBjPTA7ZD1hW2MrK107KXt2YXIgYj1TbGljay51aWRPZihkKTtpZighZVtiXSl7ZVtiXT10cnVlO3RoaXMucHVzaChkKTt9fX19O0VsZW1lbnRzLnByb3RvdHlwZT17bGVuZ3RoOjB9O0VsZW1lbnRzLnBhcmVudD1BcnJheTtuZXcgVHlwZSgiRWxlbWVudHMiLEVsZW1lbnRzKS5pbXBsZW1lbnQoe2ZpbHRlcjpmdW5jdGlvbihhLGIpe2lmKCFhKXtyZXR1cm4gdGhpczsKfXJldHVybiBuZXcgRWxlbWVudHMoQXJyYXkuZmlsdGVyKHRoaXMsKHR5cGVPZihhKT09InN0cmluZyIpP2Z1bmN0aW9uKGMpe3JldHVybiBjLm1hdGNoKGEpO306YSxiKSk7fS5wcm90ZWN0KCkscHVzaDpmdW5jdGlvbigpe3ZhciBkPXRoaXMubGVuZ3RoO2Zvcih2YXIgYj0wLGE9YXJndW1lbnRzLmxlbmd0aDsKYjxhO2IrKyl7dmFyIGM9ZG9jdW1lbnQuaWQoYXJndW1lbnRzW2JdKTtpZihjKXt0aGlzW2QrK109Yzt9fXJldHVybih0aGlzLmxlbmd0aD1kKTt9LnByb3RlY3QoKSx1bnNoaWZ0OmZ1bmN0aW9uKCl7dmFyIGI9W107Zm9yKHZhciBjPTAsYT1hcmd1bWVudHMubGVuZ3RoOwpjPGE7YysrKXt2YXIgZD1kb2N1bWVudC5pZChhcmd1bWVudHNbY10pO2lmKGQpe2IucHVzaChkKTt9fXJldHVybiBBcnJheS5wcm90b3R5cGUudW5zaGlmdC5hcHBseSh0aGlzLGIpO30ucHJvdGVjdCgpLGNvbmNhdDpmdW5jdGlvbigpe3ZhciBiPW5ldyBFbGVtZW50cyh0aGlzKTsKZm9yKHZhciBjPTAsYT1hcmd1bWVudHMubGVuZ3RoO2M8YTtjKyspe3ZhciBkPWFyZ3VtZW50c1tjXTtpZihUeXBlLmlzRW51bWVyYWJsZShkKSl7Yi5hcHBlbmQoZCk7fWVsc2V7Yi5wdXNoKGQpO319cmV0dXJuIGI7fS5wcm90ZWN0KCksYXBwZW5kOmZ1bmN0aW9uKGMpe2Zvcih2YXIgYj0wLGE9Yy5sZW5ndGg7CmI8YTtiKyspe3RoaXMucHVzaChjW2JdKTt9cmV0dXJuIHRoaXM7fS5wcm90ZWN0KCksZW1wdHk6ZnVuY3Rpb24oKXt3aGlsZSh0aGlzLmxlbmd0aCl7ZGVsZXRlIHRoaXNbLS10aGlzLmxlbmd0aF07fXJldHVybiB0aGlzO30ucHJvdGVjdCgpfSk7KGZ1bmN0aW9uKCl7dmFyIGc9QXJyYXkucHJvdG90eXBlLnNwbGljZSxiPXsiMCI6MCwiMSI6MSxsZW5ndGg6Mn07CmcuY2FsbChiLDEsMSk7aWYoYlsxXT09MSl7RWxlbWVudHMuaW1wbGVtZW50KCJzcGxpY2UiLGZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5sZW5ndGg7Zy5hcHBseSh0aGlzLGFyZ3VtZW50cyk7d2hpbGUoZT49dGhpcy5sZW5ndGgpe2RlbGV0ZSB0aGlzW2UtLV07fXJldHVybiB0aGlzOwp9LnByb3RlY3QoKSk7fUVsZW1lbnRzLmltcGxlbWVudChBcnJheS5wcm90b3R5cGUpO0FycmF5Lm1pcnJvcihFbGVtZW50cyk7dmFyIGY7dHJ5e3ZhciBhPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIjxpbnB1dCBuYW1lPXg+Iik7Zj0oYS5uYW1lPT0ieCIpO31jYXRjaChjKXt9dmFyIGQ9ZnVuY3Rpb24oZSl7cmV0dXJuKCIiK2UpLnJlcGxhY2UoLyYvZywiJmFtcDsiKS5yZXBsYWNlKC8iL2csIiZxdW90OyIpOwp9O0RvY3VtZW50LmltcGxlbWVudCh7bmV3RWxlbWVudDpmdW5jdGlvbihlLGgpe2lmKGgmJmguY2hlY2tlZCE9bnVsbCl7aC5kZWZhdWx0Q2hlY2tlZD1oLmNoZWNrZWQ7fWlmKGYmJmgpe2U9IjwiK2U7aWYoaC5uYW1lKXtlKz0nIG5hbWU9IicrZChoLm5hbWUpKyciJzsKfWlmKGgudHlwZSl7ZSs9JyB0eXBlPSInK2QoaC50eXBlKSsnIic7fWUrPSI+IjtkZWxldGUgaC5uYW1lO2RlbGV0ZSBoLnR5cGU7fXJldHVybiB0aGlzLmlkKHRoaXMuY3JlYXRlRWxlbWVudChlKSkuc2V0KGgpO319KTt9KSgpO0RvY3VtZW50LmltcGxlbWVudCh7bmV3VGV4dE5vZGU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuY3JlYXRlVGV4dE5vZGUoYSk7Cn0sZ2V0RG9jdW1lbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpczt9LGdldFdpbmRvdzpmdW5jdGlvbigpe3JldHVybiB0aGlzLndpbmRvdzt9LGlkOihmdW5jdGlvbigpe3ZhciBhPXtzdHJpbmc6ZnVuY3Rpb24oZCxjLGIpe2Q9U2xpY2suZmluZChiLCIjIitkLnJlcGxhY2UoLyhcVykvZywiXFwkMSIpKTsKcmV0dXJuKGQpP2EuZWxlbWVudChkLGMpOm51bGw7fSxlbGVtZW50OmZ1bmN0aW9uKGIsYyl7JHVpZChiKTtpZighYyYmIWIuJGZhbWlseSYmISgvXig/Om9iamVjdHxlbWJlZCkkL2kpLnRlc3QoYi50YWdOYW1lKSl7T2JqZWN0LmFwcGVuZChiLEVsZW1lbnQuUHJvdG90eXBlKTsKfXJldHVybiBiO30sb2JqZWN0OmZ1bmN0aW9uKGMsZCxiKXtpZihjLnRvRWxlbWVudCl7cmV0dXJuIGEuZWxlbWVudChjLnRvRWxlbWVudChiKSxkKTt9cmV0dXJuIG51bGw7fX07YS50ZXh0bm9kZT1hLndoaXRlc3BhY2U9YS53aW5kb3c9YS5kb2N1bWVudD1mdW5jdGlvbihiKXtyZXR1cm4gYjsKfTtyZXR1cm4gZnVuY3Rpb24oYyxlLGQpe2lmKGMmJmMuJGZhbWlseSYmYy51aWQpe3JldHVybiBjO312YXIgYj10eXBlT2YoYyk7cmV0dXJuKGFbYl0pP2FbYl0oYyxlLGR8fGRvY3VtZW50KTpudWxsO307fSkoKX0pO2lmKHdpbmRvdy4kPT1udWxsKXtXaW5kb3cuaW1wbGVtZW50KCIkIixmdW5jdGlvbihhLGIpe3JldHVybiBkb2N1bWVudC5pZChhLGIsdGhpcy5kb2N1bWVudCk7Cn0pO31XaW5kb3cuaW1wbGVtZW50KHtnZXREb2N1bWVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRvY3VtZW50O30sZ2V0V2luZG93OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXM7fX0pO1tEb2N1bWVudCxFbGVtZW50XS5pbnZva2UoImltcGxlbWVudCIse2dldEVsZW1lbnRzOmZ1bmN0aW9uKGEpe3JldHVybiBTbGljay5zZWFyY2godGhpcyxhLG5ldyBFbGVtZW50cyk7Cn0sZ2V0RWxlbWVudDpmdW5jdGlvbihhKXtyZXR1cm4gZG9jdW1lbnQuaWQoU2xpY2suZmluZCh0aGlzLGEpKTt9fSk7aWYod2luZG93LiQkPT1udWxsKXtXaW5kb3cuaW1wbGVtZW50KCIkJCIsZnVuY3Rpb24oYSl7aWYoYXJndW1lbnRzLmxlbmd0aD09MSl7aWYodHlwZW9mIGE9PSJzdHJpbmciKXtyZXR1cm4gU2xpY2suc2VhcmNoKHRoaXMuZG9jdW1lbnQsYSxuZXcgRWxlbWVudHMpOwp9ZWxzZXtpZihUeXBlLmlzRW51bWVyYWJsZShhKSl7cmV0dXJuIG5ldyBFbGVtZW50cyhhKTt9fX1yZXR1cm4gbmV3IEVsZW1lbnRzKGFyZ3VtZW50cyk7fSk7fShmdW5jdGlvbigpe3ZhciBrPXt9LGk9e307dmFyIG49e2lucHV0OiJjaGVja2VkIixvcHRpb246InNlbGVjdGVkIix0ZXh0YXJlYToidmFsdWUifTsKdmFyIGU9ZnVuY3Rpb24ocCl7cmV0dXJuKGlbcF18fChpW3BdPXt9KSk7fTt2YXIgaj1mdW5jdGlvbihxKXt2YXIgcD1xLnVpZDtpZihxLnJlbW92ZUV2ZW50cyl7cS5yZW1vdmVFdmVudHMoKTt9aWYocS5jbGVhckF0dHJpYnV0ZXMpe3EuY2xlYXJBdHRyaWJ1dGVzKCk7Cn1pZihwIT1udWxsKXtkZWxldGUga1twXTtkZWxldGUgaVtwXTt9cmV0dXJuIHE7fTt2YXIgbz1bImRlZmF1bHRWYWx1ZSIsImFjY2Vzc0tleSIsImNlbGxQYWRkaW5nIiwiY2VsbFNwYWNpbmciLCJjb2xTcGFuIiwiZnJhbWVCb3JkZXIiLCJtYXhMZW5ndGgiLCJyZWFkT25seSIsInJvd1NwYW4iLCJ0YWJJbmRleCIsInVzZU1hcCJdOwp2YXIgZD1bImNvbXBhY3QiLCJub3dyYXAiLCJpc21hcCIsImRlY2xhcmUiLCJub3NoYWRlIiwiY2hlY2tlZCIsImRpc2FibGVkIiwicmVhZE9ubHkiLCJtdWx0aXBsZSIsInNlbGVjdGVkIiwibm9yZXNpemUiLCJkZWZlciIsImRlZmF1bHRDaGVja2VkIl07dmFyIGc9e2h0bWw6ImlubmVySFRNTCIsImNsYXNzIjoiY2xhc3NOYW1lIiwiZm9yIjoiaHRtbEZvciIsdGV4dDooZnVuY3Rpb24oKXt2YXIgcD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKcmV0dXJuKHAudGV4dENvbnRlbnQ9PW51bGwpPyJpbm5lclRleHQiOiJ0ZXh0Q29udGVudCI7fSkoKX07dmFyIG09WyJ0eXBlIl07dmFyIGg9WyJ2YWx1ZSIsImRlZmF1bHRWYWx1ZSJdO3ZhciBsPS9eKD86aHJlZnxzcmN8dXNlbWFwKSQvaTtkPWQuYXNzb2NpYXRlKGQpOwpvPW8uYXNzb2NpYXRlKG8ubWFwKFN0cmluZy50b0xvd2VyQ2FzZSkpO209bS5hc3NvY2lhdGUobSk7T2JqZWN0LmFwcGVuZChnLGguYXNzb2NpYXRlKGgpKTt2YXIgYz17YmVmb3JlOmZ1bmN0aW9uKHEscCl7dmFyIHI9cC5wYXJlbnROb2RlO2lmKHIpe3IuaW5zZXJ0QmVmb3JlKHEscCk7Cn19LGFmdGVyOmZ1bmN0aW9uKHEscCl7dmFyIHI9cC5wYXJlbnROb2RlO2lmKHIpe3IuaW5zZXJ0QmVmb3JlKHEscC5uZXh0U2libGluZyk7fX0sYm90dG9tOmZ1bmN0aW9uKHEscCl7cC5hcHBlbmRDaGlsZChxKTt9LHRvcDpmdW5jdGlvbihxLHApe3AuaW5zZXJ0QmVmb3JlKHEscC5maXJzdENoaWxkKTsKfX07Yy5pbnNpZGU9Yy5ib3R0b207dmFyIGI9ZnVuY3Rpb24ocyxyKXtpZighcyl7cmV0dXJuIHI7fXM9T2JqZWN0LmNsb25lKFNsaWNrLnBhcnNlKHMpKTt2YXIgcT1zLmV4cHJlc3Npb25zO2Zvcih2YXIgcD1xLmxlbmd0aDtwLS07KXtxW3BdWzBdLmNvbWJpbmF0b3I9cjsKfXJldHVybiBzO307RWxlbWVudC5pbXBsZW1lbnQoe3NldDpmdW5jdGlvbihyLHEpe3ZhciBwPUVsZW1lbnQuUHJvcGVydGllc1tyXTsocCYmcC5zZXQpP3Auc2V0LmNhbGwodGhpcyxxKTp0aGlzLnNldFByb3BlcnR5KHIscSk7fS5vdmVybG9hZFNldHRlcigpLGdldDpmdW5jdGlvbihxKXt2YXIgcD1FbGVtZW50LlByb3BlcnRpZXNbcV07CnJldHVybihwJiZwLmdldCk/cC5nZXQuYXBwbHkodGhpcyk6dGhpcy5nZXRQcm9wZXJ0eShxKTt9Lm92ZXJsb2FkR2V0dGVyKCksZXJhc2U6ZnVuY3Rpb24ocSl7dmFyIHA9RWxlbWVudC5Qcm9wZXJ0aWVzW3FdOyhwJiZwLmVyYXNlKT9wLmVyYXNlLmFwcGx5KHRoaXMpOnRoaXMucmVtb3ZlUHJvcGVydHkocSk7CnJldHVybiB0aGlzO30sc2V0UHJvcGVydHk6ZnVuY3Rpb24ocSxyKXtxPW9bcV18fHE7aWYocj09bnVsbCl7cmV0dXJuIHRoaXMucmVtb3ZlUHJvcGVydHkocSk7fXZhciBwPWdbcV07KHApP3RoaXNbcF09cjooZFtxXSk/dGhpc1txXT0hIXI6dGhpcy5zZXRBdHRyaWJ1dGUocSwiIityKTsKcmV0dXJuIHRoaXM7fSxzZXRQcm9wZXJ0aWVzOmZ1bmN0aW9uKHApe2Zvcih2YXIgcSBpbiBwKXt0aGlzLnNldFByb3BlcnR5KHEscFtxXSk7fXJldHVybiB0aGlzO30sZ2V0UHJvcGVydHk6ZnVuY3Rpb24ocSl7cT1vW3FdfHxxO3ZhciBwPWdbcV18fG1bcV07cmV0dXJuKHApP3RoaXNbcF06KGRbcV0pPyEhdGhpc1txXToobC50ZXN0KHEpP3RoaXMuZ2V0QXR0cmlidXRlKHEsMik6KHA9dGhpcy5nZXRBdHRyaWJ1dGVOb2RlKHEpKT9wLm5vZGVWYWx1ZTpudWxsKXx8bnVsbDsKfSxnZXRQcm9wZXJ0aWVzOmZ1bmN0aW9uKCl7dmFyIHA9QXJyYXkuZnJvbShhcmd1bWVudHMpO3JldHVybiBwLm1hcCh0aGlzLmdldFByb3BlcnR5LHRoaXMpLmFzc29jaWF0ZShwKTt9LHJlbW92ZVByb3BlcnR5OmZ1bmN0aW9uKHEpe3E9b1txXXx8cTt2YXIgcD1nW3FdOwoocCk/dGhpc1twXT0iIjooZFtxXSk/dGhpc1txXT1mYWxzZTp0aGlzLnJlbW92ZUF0dHJpYnV0ZShxKTtyZXR1cm4gdGhpczt9LHJlbW92ZVByb3BlcnRpZXM6ZnVuY3Rpb24oKXtBcnJheS5lYWNoKGFyZ3VtZW50cyx0aGlzLnJlbW92ZVByb3BlcnR5LHRoaXMpO3JldHVybiB0aGlzOwp9LGhhc0NsYXNzOmZ1bmN0aW9uKHApe3JldHVybiB0aGlzLmNsYXNzTmFtZS5jbGVhbigpLmNvbnRhaW5zKHAsIiAiKTt9LGFkZENsYXNzOmZ1bmN0aW9uKHApe2lmKCF0aGlzLmhhc0NsYXNzKHApKXt0aGlzLmNsYXNzTmFtZT0odGhpcy5jbGFzc05hbWUrIiAiK3ApLmNsZWFuKCk7Cn1yZXR1cm4gdGhpczt9LHJlbW92ZUNsYXNzOmZ1bmN0aW9uKHApe3RoaXMuY2xhc3NOYW1lPXRoaXMuY2xhc3NOYW1lLnJlcGxhY2UobmV3IFJlZ0V4cCgiKF58XFxzKSIrcCsiKD86XFxzfCQpIiksIiQxIik7cmV0dXJuIHRoaXM7fSx0b2dnbGVDbGFzczpmdW5jdGlvbihwLHEpe2lmKHE9PW51bGwpe3E9IXRoaXMuaGFzQ2xhc3MocCk7Cn1yZXR1cm4ocSk/dGhpcy5hZGRDbGFzcyhwKTp0aGlzLnJlbW92ZUNsYXNzKHApO30sYWRvcHQ6ZnVuY3Rpb24oKXt2YXIgcz10aGlzLHAsdT1BcnJheS5mbGF0dGVuKGFyZ3VtZW50cyksdD11Lmxlbmd0aDtpZih0PjEpe3M9cD1kb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7Cn1mb3IodmFyIHI9MDtyPHQ7cisrKXt2YXIgcT1kb2N1bWVudC5pZCh1W3JdLHRydWUpO2lmKHEpe3MuYXBwZW5kQ2hpbGQocSk7fX1pZihwKXt0aGlzLmFwcGVuZENoaWxkKHApO31yZXR1cm4gdGhpczt9LGFwcGVuZFRleHQ6ZnVuY3Rpb24ocSxwKXtyZXR1cm4gdGhpcy5ncmFiKHRoaXMuZ2V0RG9jdW1lbnQoKS5uZXdUZXh0Tm9kZShxKSxwKTsKfSxncmFiOmZ1bmN0aW9uKHEscCl7Y1twfHwiYm90dG9tIl0oZG9jdW1lbnQuaWQocSx0cnVlKSx0aGlzKTtyZXR1cm4gdGhpczt9LGluamVjdDpmdW5jdGlvbihxLHApe2NbcHx8ImJvdHRvbSJdKHRoaXMsZG9jdW1lbnQuaWQocSx0cnVlKSk7cmV0dXJuIHRoaXM7fSxyZXBsYWNlczpmdW5jdGlvbihwKXtwPWRvY3VtZW50LmlkKHAsdHJ1ZSk7CnAucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQodGhpcyxwKTtyZXR1cm4gdGhpczt9LHdyYXBzOmZ1bmN0aW9uKHEscCl7cT1kb2N1bWVudC5pZChxLHRydWUpO3JldHVybiB0aGlzLnJlcGxhY2VzKHEpLmdyYWIocSxwKTt9LGdldFByZXZpb3VzOmZ1bmN0aW9uKHApe3JldHVybiBkb2N1bWVudC5pZChTbGljay5maW5kKHRoaXMsYihwLCIhfiIpKSk7Cn0sZ2V0QWxsUHJldmlvdXM6ZnVuY3Rpb24ocCl7cmV0dXJuIFNsaWNrLnNlYXJjaCh0aGlzLGIocCwiIX4iKSxuZXcgRWxlbWVudHMpO30sZ2V0TmV4dDpmdW5jdGlvbihwKXtyZXR1cm4gZG9jdW1lbnQuaWQoU2xpY2suZmluZCh0aGlzLGIocCwifiIpKSk7fSxnZXRBbGxOZXh0OmZ1bmN0aW9uKHApe3JldHVybiBTbGljay5zZWFyY2godGhpcyxiKHAsIn4iKSxuZXcgRWxlbWVudHMpOwp9LGdldEZpcnN0OmZ1bmN0aW9uKHApe3JldHVybiBkb2N1bWVudC5pZChTbGljay5zZWFyY2godGhpcyxiKHAsIj4iKSlbMF0pO30sZ2V0TGFzdDpmdW5jdGlvbihwKXtyZXR1cm4gZG9jdW1lbnQuaWQoU2xpY2suc2VhcmNoKHRoaXMsYihwLCI+IikpLmdldExhc3QoKSk7Cn0sZ2V0UGFyZW50OmZ1bmN0aW9uKHApe3JldHVybiBkb2N1bWVudC5pZChTbGljay5maW5kKHRoaXMsYihwLCIhIikpKTt9LGdldFBhcmVudHM6ZnVuY3Rpb24ocCl7cmV0dXJuIFNsaWNrLnNlYXJjaCh0aGlzLGIocCwiISIpLG5ldyBFbGVtZW50cyk7fSxnZXRTaWJsaW5nczpmdW5jdGlvbihwKXtyZXR1cm4gU2xpY2suc2VhcmNoKHRoaXMsYihwLCJ+fiIpLG5ldyBFbGVtZW50cyk7Cn0sZ2V0Q2hpbGRyZW46ZnVuY3Rpb24ocCl7cmV0dXJuIFNsaWNrLnNlYXJjaCh0aGlzLGIocCwiPiIpLG5ldyBFbGVtZW50cyk7fSxnZXRXaW5kb3c6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vd25lckRvY3VtZW50LndpbmRvdzt9LGdldERvY3VtZW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub3duZXJEb2N1bWVudDsKfSxnZXRFbGVtZW50QnlJZDpmdW5jdGlvbihwKXtyZXR1cm4gZG9jdW1lbnQuaWQoU2xpY2suZmluZCh0aGlzLCIjIisoIiIrcCkucmVwbGFjZSgvKFxXKS9nLCJcXCQxIikpKTt9LGdldFNlbGVjdGVkOmZ1bmN0aW9uKCl7dGhpcy5zZWxlY3RlZEluZGV4O3JldHVybiBuZXcgRWxlbWVudHMoQXJyYXkuZnJvbSh0aGlzLm9wdGlvbnMpLmZpbHRlcihmdW5jdGlvbihwKXtyZXR1cm4gcC5zZWxlY3RlZDsKfSkpO30sdG9RdWVyeVN0cmluZzpmdW5jdGlvbigpe3ZhciBwPVtdO3RoaXMuZ2V0RWxlbWVudHMoImlucHV0LCBzZWxlY3QsIHRleHRhcmVhIikuZWFjaChmdW5jdGlvbihyKXt2YXIgcT1yLnR5cGU7aWYoIXIubmFtZXx8ci5kaXNhYmxlZHx8cT09InN1Ym1pdCJ8fHE9PSJyZXNldCJ8fHE9PSJmaWxlInx8cT09ImltYWdlIil7cmV0dXJuOwp9dmFyIHM9KHIuZ2V0KCJ0YWciKT09InNlbGVjdCIpP3IuZ2V0U2VsZWN0ZWQoKS5tYXAoZnVuY3Rpb24odCl7cmV0dXJuIGRvY3VtZW50LmlkKHQpLmdldCgidmFsdWUiKTt9KTooKHE9PSJyYWRpbyJ8fHE9PSJjaGVja2JveCIpJiYhci5jaGVja2VkKT9udWxsOnIuZ2V0KCJ2YWx1ZSIpOwpBcnJheS5mcm9tKHMpLmVhY2goZnVuY3Rpb24odCl7aWYodHlwZW9mIHQhPSJ1bmRlZmluZWQiKXtwLnB1c2goZW5jb2RlVVJJQ29tcG9uZW50KHIubmFtZSkrIj0iK2VuY29kZVVSSUNvbXBvbmVudCh0KSk7fX0pO30pO3JldHVybiBwLmpvaW4oIiYiKTt9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt2YXIgcD1qKHRoaXMpLmdldEVsZW1lbnRzQnlUYWdOYW1lKCIqIik7CkFycmF5LmVhY2gocCxqKTtFbGVtZW50LmRpc3Bvc2UodGhpcyk7cmV0dXJuIG51bGw7fSxlbXB0eTpmdW5jdGlvbigpe0FycmF5LmZyb20odGhpcy5jaGlsZE5vZGVzKS5lYWNoKEVsZW1lbnQuZGlzcG9zZSk7cmV0dXJuIHRoaXM7fSxkaXNwb3NlOmZ1bmN0aW9uKCl7cmV0dXJuKHRoaXMucGFyZW50Tm9kZSk/dGhpcy5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMpOnRoaXM7Cn0sbWF0Y2g6ZnVuY3Rpb24ocCl7cmV0dXJuICFwfHxTbGljay5tYXRjaCh0aGlzLHApO319KTt2YXIgYT1mdW5jdGlvbih0LHMscSl7aWYoIXEpe3Quc2V0QXR0cmlidXRlTm9kZShkb2N1bWVudC5jcmVhdGVBdHRyaWJ1dGUoImlkIikpO31pZih0LmNsZWFyQXR0cmlidXRlcyl7dC5jbGVhckF0dHJpYnV0ZXMoKTsKdC5tZXJnZUF0dHJpYnV0ZXMocyk7dC5yZW1vdmVBdHRyaWJ1dGUoInVpZCIpO2lmKHQub3B0aW9ucyl7dmFyIHU9dC5vcHRpb25zLHA9cy5vcHRpb25zO2Zvcih2YXIgcj11Lmxlbmd0aDtyLS07KXt1W3JdLnNlbGVjdGVkPXBbcl0uc2VsZWN0ZWQ7fX19dmFyIHY9bltzLnRhZ05hbWUudG9Mb3dlckNhc2UoKV07CmlmKHYmJnNbdl0pe3Rbdl09c1t2XTt9fTtFbGVtZW50LmltcGxlbWVudCgiY2xvbmUiLGZ1bmN0aW9uKHIscCl7cj1yIT09ZmFsc2U7dmFyIHc9dGhpcy5jbG9uZU5vZGUocikscTtpZihyKXt2YXIgcz13LmdldEVsZW1lbnRzQnlUYWdOYW1lKCIqIiksdT10aGlzLmdldEVsZW1lbnRzQnlUYWdOYW1lKCIqIik7CmZvcihxPXMubGVuZ3RoO3EtLTspe2Eoc1txXSx1W3FdLHApO319YSh3LHRoaXMscCk7aWYoQnJvd3Nlci5pZSl7dmFyIHQ9dy5nZXRFbGVtZW50c0J5VGFnTmFtZSgib2JqZWN0Iiksdj10aGlzLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJvYmplY3QiKTtmb3IocT10Lmxlbmd0aDsKcS0tOyl7dFtxXS5vdXRlckhUTUw9dltxXS5vdXRlckhUTUw7fX1yZXR1cm4gZG9jdW1lbnQuaWQodyk7fSk7dmFyIGY9e2NvbnRhaW5zOmZ1bmN0aW9uKHApe3JldHVybiBTbGljay5jb250YWlucyh0aGlzLHApO319O2lmKCFkb2N1bWVudC5jb250YWlucyl7RG9jdW1lbnQuaW1wbGVtZW50KGYpOwp9aWYoIWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpLmNvbnRhaW5zKXtFbGVtZW50LmltcGxlbWVudChmKTt9W0VsZW1lbnQsV2luZG93LERvY3VtZW50XS5pbnZva2UoImltcGxlbWVudCIse2FkZExpc3RlbmVyOmZ1bmN0aW9uKHMscil7aWYocz09InVubG9hZCIpe3ZhciBwPXIscT10aGlzOwpyPWZ1bmN0aW9uKCl7cS5yZW1vdmVMaXN0ZW5lcigidW5sb2FkIixyKTtwKCk7fTt9ZWxzZXtrWyR1aWQodGhpcyldPXRoaXM7fWlmKHRoaXMuYWRkRXZlbnRMaXN0ZW5lcil7dGhpcy5hZGRFdmVudExpc3RlbmVyKHMsciwhIWFyZ3VtZW50c1syXSk7fWVsc2V7dGhpcy5hdHRhY2hFdmVudCgib24iK3Mscik7Cn1yZXR1cm4gdGhpczt9LHJlbW92ZUxpc3RlbmVyOmZ1bmN0aW9uKHEscCl7aWYodGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKXt0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIocSxwLCEhYXJndW1lbnRzWzJdKTt9ZWxzZXt0aGlzLmRldGFjaEV2ZW50KCJvbiIrcSxwKTsKfXJldHVybiB0aGlzO30scmV0cmlldmU6ZnVuY3Rpb24ocSxwKXt2YXIgcz1lKCR1aWQodGhpcykpLHI9c1txXTtpZihwIT1udWxsJiZyPT1udWxsKXtyPXNbcV09cDt9cmV0dXJuIHIhPW51bGw/cjpudWxsO30sc3RvcmU6ZnVuY3Rpb24ocSxwKXt2YXIgcj1lKCR1aWQodGhpcykpOwpyW3FdPXA7cmV0dXJuIHRoaXM7fSxlbGltaW5hdGU6ZnVuY3Rpb24ocCl7dmFyIHE9ZSgkdWlkKHRoaXMpKTtkZWxldGUgcVtwXTtyZXR1cm4gdGhpczt9fSk7aWYod2luZG93LmF0dGFjaEV2ZW50JiYhd2luZG93LmFkZEV2ZW50TGlzdGVuZXIpe3dpbmRvdy5hZGRMaXN0ZW5lcigidW5sb2FkIixmdW5jdGlvbigpe09iamVjdC5lYWNoKGssaik7CmlmKHdpbmRvdy5Db2xsZWN0R2FyYmFnZSl7Q29sbGVjdEdhcmJhZ2UoKTt9fSk7fX0pKCk7RWxlbWVudC5Qcm9wZXJ0aWVzPXt9O0VsZW1lbnQuUHJvcGVydGllcy5zdHlsZT17c2V0OmZ1bmN0aW9uKGEpe3RoaXMuc3R5bGUuY3NzVGV4dD1hO30sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3R5bGUuY3NzVGV4dDsKfSxlcmFzZTpmdW5jdGlvbigpe3RoaXMuc3R5bGUuY3NzVGV4dD0iIjt9fTtFbGVtZW50LlByb3BlcnRpZXMudGFnPXtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50YWdOYW1lLnRvTG93ZXJDYXNlKCk7fX07KGZ1bmN0aW9uKGEpe2lmKGEhPW51bGwpe0VsZW1lbnQuUHJvcGVydGllcy5tYXhsZW5ndGg9RWxlbWVudC5Qcm9wZXJ0aWVzLm1heExlbmd0aD17Z2V0OmZ1bmN0aW9uKCl7dmFyIGI9dGhpcy5nZXRBdHRyaWJ1dGUoIm1heExlbmd0aCIpOwpyZXR1cm4gYj09YT9udWxsOmI7fX07fX0pKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImlucHV0IikuZ2V0QXR0cmlidXRlKCJtYXhMZW5ndGgiKSk7RWxlbWVudC5Qcm9wZXJ0aWVzLmh0bWw9KGZ1bmN0aW9uKCl7dmFyIGM9RnVuY3Rpb24uYXR0ZW1wdChmdW5jdGlvbigpe3ZhciBlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInRhYmxlIik7CmUuaW5uZXJIVE1MPSI8dHI+PHRkPjwvdGQ+PC90cj4iO30pO3ZhciBkPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO3ZhciBhPXt0YWJsZTpbMSwiPHRhYmxlPiIsIjwvdGFibGU+Il0sc2VsZWN0OlsxLCI8c2VsZWN0PiIsIjwvc2VsZWN0PiJdLHRib2R5OlsyLCI8dGFibGU+PHRib2R5PiIsIjwvdGJvZHk+PC90YWJsZT4iXSx0cjpbMywiPHRhYmxlPjx0Ym9keT48dHI+IiwiPC90cj48L3Rib2R5PjwvdGFibGU+Il19OwphLnRoZWFkPWEudGZvb3Q9YS50Ym9keTt2YXIgYj17c2V0OmZ1bmN0aW9uKCl7dmFyIGY9QXJyYXkuZmxhdHRlbihhcmd1bWVudHMpLmpvaW4oIiIpO3ZhciBnPSghYyYmYVt0aGlzLmdldCgidGFnIildKTtpZihnKXt2YXIgaD1kO2guaW5uZXJIVE1MPWdbMV0rZitnWzJdOwpmb3IodmFyIGU9Z1swXTtlLS07KXtoPWguZmlyc3RDaGlsZDt9dGhpcy5lbXB0eSgpLmFkb3B0KGguY2hpbGROb2Rlcyk7fWVsc2V7dGhpcy5pbm5lckhUTUw9Zjt9fX07Yi5lcmFzZT1iLnNldDtyZXR1cm4gYjt9KSgpOyhmdW5jdGlvbigpe3ZhciBjPWRvY3VtZW50Lmh0bWw7CkVsZW1lbnQuUHJvcGVydGllcy5zdHlsZXM9e3NldDpmdW5jdGlvbihmKXt0aGlzLnNldFN0eWxlcyhmKTt9fTt2YXIgZT0oYy5zdHlsZS5vcGFjaXR5IT1udWxsKTt2YXIgZD0vYWxwaGFcKG9wYWNpdHk9KFtcZC5dKylcKS9pO3ZhciBiPWZ1bmN0aW9uKGcsZil7aWYoIWcuY3VycmVudFN0eWxlfHwhZy5jdXJyZW50U3R5bGUuaGFzTGF5b3V0KXtnLnN0eWxlLnpvb209MTsKfWlmKGUpe2cuc3R5bGUub3BhY2l0eT1mO31lbHNle2Y9KGYqMTAwKS5saW1pdCgwLDEwMCkucm91bmQoKTtmPShmPT0xMDApPyIiOiJhbHBoYShvcGFjaXR5PSIrZisiKSI7dmFyIGg9Zy5zdHlsZS5maWx0ZXJ8fGcuZ2V0Q29tcHV0ZWRTdHlsZSgiZmlsdGVyIil8fCIiOwpnLnN0eWxlLmZpbHRlcj1kLnRlc3QoaCk/aC5yZXBsYWNlKGQsZik6aCtmO319O0VsZW1lbnQuUHJvcGVydGllcy5vcGFjaXR5PXtzZXQ6ZnVuY3Rpb24oZyl7dmFyIGY9dGhpcy5zdHlsZS52aXNpYmlsaXR5O2lmKGc9PTAmJmYhPSJoaWRkZW4iKXt0aGlzLnN0eWxlLnZpc2liaWxpdHk9ImhpZGRlbiI7Cn1lbHNle2lmKGchPTAmJmYhPSJ2aXNpYmxlIil7dGhpcy5zdHlsZS52aXNpYmlsaXR5PSJ2aXNpYmxlIjt9fWIodGhpcyxnKTt9LGdldDooZSk/ZnVuY3Rpb24oKXt2YXIgZj10aGlzLnN0eWxlLm9wYWNpdHl8fHRoaXMuZ2V0Q29tcHV0ZWRTdHlsZSgib3BhY2l0eSIpOwpyZXR1cm4oZj09IiIpPzE6Zjt9OmZ1bmN0aW9uKCl7dmFyIGYsZz0odGhpcy5zdHlsZS5maWx0ZXJ8fHRoaXMuZ2V0Q29tcHV0ZWRTdHlsZSgiZmlsdGVyIikpO2lmKGcpe2Y9Zy5tYXRjaChkKTt9cmV0dXJuKGY9PW51bGx8fGc9PW51bGwpPzE6KGZbMV0vMTAwKTt9fTsKdmFyIGE9KGMuc3R5bGUuY3NzRmxvYXQ9PW51bGwpPyJzdHlsZUZsb2F0IjoiY3NzRmxvYXQiO0VsZW1lbnQuaW1wbGVtZW50KHtnZXRDb21wdXRlZFN0eWxlOmZ1bmN0aW9uKGgpe2lmKHRoaXMuY3VycmVudFN0eWxlKXtyZXR1cm4gdGhpcy5jdXJyZW50U3R5bGVbaC5jYW1lbENhc2UoKV07Cn12YXIgZz1FbGVtZW50LmdldERvY3VtZW50KHRoaXMpLmRlZmF1bHRWaWV3LGY9Zz9nLmdldENvbXB1dGVkU3R5bGUodGhpcyxudWxsKTpudWxsO3JldHVybihmKT9mLmdldFByb3BlcnR5VmFsdWUoKGg9PWEpPyJmbG9hdCI6aC5oeXBoZW5hdGUoKSk6bnVsbDt9LHNldE9wYWNpdHk6ZnVuY3Rpb24oZil7Yih0aGlzLGYpOwpyZXR1cm4gdGhpczt9LGdldE9wYWNpdHk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXQoIm9wYWNpdHkiKTt9LHNldFN0eWxlOmZ1bmN0aW9uKGcsZil7c3dpdGNoKGcpe2Nhc2Uib3BhY2l0eSI6cmV0dXJuIHRoaXMuc2V0KCJvcGFjaXR5IixwYXJzZUZsb2F0KGYpKTsKY2FzZSJmbG9hdCI6Zz1hO31nPWcuY2FtZWxDYXNlKCk7aWYodHlwZU9mKGYpIT0ic3RyaW5nIil7dmFyIGg9KEVsZW1lbnQuU3R5bGVzW2ddfHwiQCIpLnNwbGl0KCIgIik7Zj1BcnJheS5mcm9tKGYpLm1hcChmdW5jdGlvbihrLGope2lmKCFoW2pdKXtyZXR1cm4iIjsKfXJldHVybih0eXBlT2Yoayk9PSJudW1iZXIiKT9oW2pdLnJlcGxhY2UoIkAiLE1hdGgucm91bmQoaykpOms7fSkuam9pbigiICIpO31lbHNle2lmKGY9PVN0cmluZyhOdW1iZXIoZikpKXtmPU1hdGgucm91bmQoZik7fX10aGlzLnN0eWxlW2ddPWY7cmV0dXJuIHRoaXM7Cn0sZ2V0U3R5bGU6ZnVuY3Rpb24obCl7c3dpdGNoKGwpe2Nhc2Uib3BhY2l0eSI6cmV0dXJuIHRoaXMuZ2V0KCJvcGFjaXR5Iik7Y2FzZSJmbG9hdCI6bD1hO31sPWwuY2FtZWxDYXNlKCk7dmFyIGY9dGhpcy5zdHlsZVtsXTtpZighZnx8bD09InpJbmRleCIpe2Y9W107CmZvcih2YXIgayBpbiBFbGVtZW50LlNob3J0U3R5bGVzKXtpZihsIT1rKXtjb250aW51ZTt9Zm9yKHZhciBqIGluIEVsZW1lbnQuU2hvcnRTdHlsZXNba10pe2YucHVzaCh0aGlzLmdldFN0eWxlKGopKTt9cmV0dXJuIGYuam9pbigiICIpO31mPXRoaXMuZ2V0Q29tcHV0ZWRTdHlsZShsKTsKfWlmKGYpe2Y9U3RyaW5nKGYpO3ZhciBoPWYubWF0Y2goL3JnYmE/XChbXGRccyxdK1wpLyk7aWYoaCl7Zj1mLnJlcGxhY2UoaFswXSxoWzBdLnJnYlRvSGV4KCkpO319aWYoQnJvd3Nlci5vcGVyYXx8KEJyb3dzZXIuaWUmJmlzTmFOKHBhcnNlRmxvYXQoZikpKSl7aWYoKC9eKGhlaWdodHx3aWR0aCkkLykudGVzdChsKSl7dmFyIGc9KGw9PSJ3aWR0aCIpP1sibGVmdCIsInJpZ2h0Il06WyJ0b3AiLCJib3R0b20iXSxpPTA7CmcuZWFjaChmdW5jdGlvbihtKXtpKz10aGlzLmdldFN0eWxlKCJib3JkZXItIittKyItd2lkdGgiKS50b0ludCgpK3RoaXMuZ2V0U3R5bGUoInBhZGRpbmctIittKS50b0ludCgpO30sdGhpcyk7cmV0dXJuIHRoaXNbIm9mZnNldCIrbC5jYXBpdGFsaXplKCldLWkrInB4IjsKfWlmKEJyb3dzZXIub3BlcmEmJlN0cmluZyhmKS5pbmRleE9mKCJweCIpIT0tMSl7cmV0dXJuIGY7fWlmKCgvXmJvcmRlciguKylXaWR0aHxtYXJnaW58cGFkZGluZy8pLnRlc3QobCkpe3JldHVybiIwcHgiO319cmV0dXJuIGY7fSxzZXRTdHlsZXM6ZnVuY3Rpb24oZyl7Zm9yKHZhciBmIGluIGcpe3RoaXMuc2V0U3R5bGUoZixnW2ZdKTsKfXJldHVybiB0aGlzO30sZ2V0U3R5bGVzOmZ1bmN0aW9uKCl7dmFyIGY9e307QXJyYXkuZmxhdHRlbihhcmd1bWVudHMpLmVhY2goZnVuY3Rpb24oZyl7ZltnXT10aGlzLmdldFN0eWxlKGcpO30sdGhpcyk7cmV0dXJuIGY7fX0pO0VsZW1lbnQuU3R5bGVzPXtsZWZ0OiJAcHgiLHRvcDoiQHB4Iixib3R0b206IkBweCIscmlnaHQ6IkBweCIsd2lkdGg6IkBweCIsaGVpZ2h0OiJAcHgiLG1heFdpZHRoOiJAcHgiLG1heEhlaWdodDoiQHB4IixtaW5XaWR0aDoiQHB4IixtaW5IZWlnaHQ6IkBweCIsYmFja2dyb3VuZENvbG9yOiJyZ2IoQCwgQCwgQCkiLGJhY2tncm91bmRQb3NpdGlvbjoiQHB4IEBweCIsY29sb3I6InJnYihALCBALCBAKSIsZm9udFNpemU6IkBweCIsbGV0dGVyU3BhY2luZzoiQHB4IixsaW5lSGVpZ2h0OiJAcHgiLGNsaXA6InJlY3QoQHB4IEBweCBAcHggQHB4KSIsbWFyZ2luOiJAcHggQHB4IEBweCBAcHgiLHBhZGRpbmc6IkBweCBAcHggQHB4IEBweCIsYm9yZGVyOiJAcHggQCByZ2IoQCwgQCwgQCkgQHB4IEAgcmdiKEAsIEAsIEApIEBweCBAIHJnYihALCBALCBAKSIsYm9yZGVyV2lkdGg6IkBweCBAcHggQHB4IEBweCIsYm9yZGVyU3R5bGU6IkAgQCBAIEAiLGJvcmRlckNvbG9yOiJyZ2IoQCwgQCwgQCkgcmdiKEAsIEAsIEApIHJnYihALCBALCBAKSByZ2IoQCwgQCwgQCkiLHpJbmRleDoiQCIsem9vbToiQCIsZm9udFdlaWdodDoiQCIsdGV4dEluZGVudDoiQHB4IixvcGFjaXR5OiJAIn07CkVsZW1lbnQuU2hvcnRTdHlsZXM9e21hcmdpbjp7fSxwYWRkaW5nOnt9LGJvcmRlcjp7fSxib3JkZXJXaWR0aDp7fSxib3JkZXJTdHlsZTp7fSxib3JkZXJDb2xvcjp7fX07WyJUb3AiLCJSaWdodCIsIkJvdHRvbSIsIkxlZnQiXS5lYWNoKGZ1bmN0aW9uKGwpe3ZhciBrPUVsZW1lbnQuU2hvcnRTdHlsZXM7CnZhciBnPUVsZW1lbnQuU3R5bGVzO1sibWFyZ2luIiwicGFkZGluZyJdLmVhY2goZnVuY3Rpb24obSl7dmFyIG49bStsO2tbbV1bbl09Z1tuXT0iQHB4Ijt9KTt2YXIgaj0iYm9yZGVyIitsO2suYm9yZGVyW2pdPWdbal09IkBweCBAIHJnYihALCBALCBAKSI7dmFyIGk9aisiV2lkdGgiLGY9aisiU3R5bGUiLGg9aisiQ29sb3IiOwprW2pdPXt9O2suYm9yZGVyV2lkdGhbaV09a1tqXVtpXT1nW2ldPSJAcHgiO2suYm9yZGVyU3R5bGVbZl09a1tqXVtmXT1nW2ZdPSJAIjtrLmJvcmRlckNvbG9yW2hdPWtbal1baF09Z1toXT0icmdiKEAsIEAsIEApIjt9KTt9KSgpOyhmdW5jdGlvbigpe0VsZW1lbnQuUHJvcGVydGllcy5ldmVudHM9e3NldDpmdW5jdGlvbihiKXt0aGlzLmFkZEV2ZW50cyhiKTsKfX07W0VsZW1lbnQsV2luZG93LERvY3VtZW50XS5pbnZva2UoImltcGxlbWVudCIse2FkZEV2ZW50OmZ1bmN0aW9uKGYsaCl7dmFyIGk9dGhpcy5yZXRyaWV2ZSgiZXZlbnRzIix7fSk7aWYoIWlbZl0pe2lbZl09e2tleXM6W10sdmFsdWVzOltdfTt9aWYoaVtmXS5rZXlzLmNvbnRhaW5zKGgpKXtyZXR1cm4gdGhpczsKfWlbZl0ua2V5cy5wdXNoKGgpO3ZhciBnPWYsYj1FbGVtZW50LkV2ZW50c1tmXSxkPWgsaj10aGlzO2lmKGIpe2lmKGIub25BZGQpe2Iub25BZGQuY2FsbCh0aGlzLGgpO31pZihiLmNvbmRpdGlvbil7ZD1mdW5jdGlvbihrKXtpZihiLmNvbmRpdGlvbi5jYWxsKHRoaXMsaykpe3JldHVybiBoLmNhbGwodGhpcyxrKTsKfXJldHVybiB0cnVlO307fWc9Yi5iYXNlfHxnO312YXIgZT1mdW5jdGlvbigpe3JldHVybiBoLmNhbGwoaik7fTt2YXIgYz1FbGVtZW50Lk5hdGl2ZUV2ZW50c1tnXTtpZihjKXtpZihjPT0yKXtlPWZ1bmN0aW9uKGspe2s9bmV3IEV2ZW50KGssai5nZXRXaW5kb3coKSk7CmlmKGQuY2FsbChqLGspPT09ZmFsc2Upe2suc3RvcCgpO319O310aGlzLmFkZExpc3RlbmVyKGcsZSxhcmd1bWVudHNbMl0pO31pW2ZdLnZhbHVlcy5wdXNoKGUpO3JldHVybiB0aGlzO30scmVtb3ZlRXZlbnQ6ZnVuY3Rpb24oZSxkKXt2YXIgYz10aGlzLnJldHJpZXZlKCJldmVudHMiKTsKaWYoIWN8fCFjW2VdKXtyZXR1cm4gdGhpczt9dmFyIGg9Y1tlXTt2YXIgYj1oLmtleXMuaW5kZXhPZihkKTtpZihiPT0tMSl7cmV0dXJuIHRoaXM7fXZhciBnPWgudmFsdWVzW2JdO2RlbGV0ZSBoLmtleXNbYl07ZGVsZXRlIGgudmFsdWVzW2JdO3ZhciBmPUVsZW1lbnQuRXZlbnRzW2VdOwppZihmKXtpZihmLm9uUmVtb3ZlKXtmLm9uUmVtb3ZlLmNhbGwodGhpcyxkKTt9ZT1mLmJhc2V8fGU7fXJldHVybihFbGVtZW50Lk5hdGl2ZUV2ZW50c1tlXSk/dGhpcy5yZW1vdmVMaXN0ZW5lcihlLGcsYXJndW1lbnRzWzJdKTp0aGlzO30sYWRkRXZlbnRzOmZ1bmN0aW9uKGIpe2Zvcih2YXIgYyBpbiBiKXt0aGlzLmFkZEV2ZW50KGMsYltjXSk7Cn1yZXR1cm4gdGhpczt9LHJlbW92ZUV2ZW50czpmdW5jdGlvbihiKXt2YXIgZDtpZih0eXBlT2YoYik9PSJvYmplY3QiKXtmb3IoZCBpbiBiKXt0aGlzLnJlbW92ZUV2ZW50KGQsYltkXSk7fXJldHVybiB0aGlzO312YXIgYz10aGlzLnJldHJpZXZlKCJldmVudHMiKTsKaWYoIWMpe3JldHVybiB0aGlzO31pZighYil7Zm9yKGQgaW4gYyl7dGhpcy5yZW1vdmVFdmVudHMoZCk7fXRoaXMuZWxpbWluYXRlKCJldmVudHMiKTt9ZWxzZXtpZihjW2JdKXtjW2JdLmtleXMuZWFjaChmdW5jdGlvbihlKXt0aGlzLnJlbW92ZUV2ZW50KGIsZSk7fSx0aGlzKTsKZGVsZXRlIGNbYl07fX1yZXR1cm4gdGhpczt9LGZpcmVFdmVudDpmdW5jdGlvbihlLGMsYil7dmFyIGQ9dGhpcy5yZXRyaWV2ZSgiZXZlbnRzIik7aWYoIWR8fCFkW2VdKXtyZXR1cm4gdGhpczt9Yz1BcnJheS5mcm9tKGMpO2RbZV0ua2V5cy5lYWNoKGZ1bmN0aW9uKGYpe2lmKGIpe2YuZGVsYXkoYix0aGlzLGMpOwp9ZWxzZXtmLmFwcGx5KHRoaXMsYyk7fX0sdGhpcyk7cmV0dXJuIHRoaXM7fSxjbG9uZUV2ZW50czpmdW5jdGlvbihlLGQpe2U9ZG9jdW1lbnQuaWQoZSk7dmFyIGM9ZS5yZXRyaWV2ZSgiZXZlbnRzIik7aWYoIWMpe3JldHVybiB0aGlzO31pZighZCl7Zm9yKHZhciBiIGluIGMpe3RoaXMuY2xvbmVFdmVudHMoZSxiKTsKfX1lbHNle2lmKGNbZF0pe2NbZF0ua2V5cy5lYWNoKGZ1bmN0aW9uKGYpe3RoaXMuYWRkRXZlbnQoZCxmKTt9LHRoaXMpO319cmV0dXJuIHRoaXM7fX0pO0VsZW1lbnQuTmF0aXZlRXZlbnRzPXtjbGljazoyLGRibGNsaWNrOjIsbW91c2V1cDoyLG1vdXNlZG93bjoyLGNvbnRleHRtZW51OjIsbW91c2V3aGVlbDoyLERPTU1vdXNlU2Nyb2xsOjIsbW91c2VvdmVyOjIsbW91c2VvdXQ6Mixtb3VzZW1vdmU6MixzZWxlY3RzdGFydDoyLHNlbGVjdGVuZDoyLGtleWRvd246MixrZXlwcmVzczoyLGtleXVwOjIsb3JpZW50YXRpb25jaGFuZ2U6Mix0b3VjaHN0YXJ0OjIsdG91Y2htb3ZlOjIsdG91Y2hlbmQ6Mix0b3VjaGNhbmNlbDoyLGdlc3R1cmVzdGFydDoyLGdlc3R1cmVjaGFuZ2U6MixnZXN0dXJlZW5kOjIsZm9jdXM6MixibHVyOjIsY2hhbmdlOjIscmVzZXQ6MixzZWxlY3Q6MixzdWJtaXQ6Mixsb2FkOjIsdW5sb2FkOjEsYmVmb3JldW5sb2FkOjIscmVzaXplOjEsbW92ZToxLERPTUNvbnRlbnRMb2FkZWQ6MSxyZWFkeXN0YXRlY2hhbmdlOjEsZXJyb3I6MSxhYm9ydDoxLHNjcm9sbDoxfTsKdmFyIGE9ZnVuY3Rpb24oYil7dmFyIGM9Yi5yZWxhdGVkVGFyZ2V0O2lmKGM9PW51bGwpe3JldHVybiB0cnVlO31pZighYyl7cmV0dXJuIGZhbHNlO31yZXR1cm4oYyE9dGhpcyYmYy5wcmVmaXghPSJ4dWwiJiZ0eXBlT2YodGhpcykhPSJkb2N1bWVudCImJiF0aGlzLmNvbnRhaW5zKGMpKTsKfTtFbGVtZW50LkV2ZW50cz17bW91c2VlbnRlcjp7YmFzZToibW91c2VvdmVyIixjb25kaXRpb246YX0sbW91c2VsZWF2ZTp7YmFzZToibW91c2VvdXQiLGNvbmRpdGlvbjphfSxtb3VzZXdoZWVsOntiYXNlOihCcm93c2VyLmZpcmVmb3gpPyJET01Nb3VzZVNjcm9sbCI6Im1vdXNld2hlZWwifX07Cn0pKCk7KGZ1bmN0aW9uKCl7dmFyIGg9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2IiksZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTtoLnN0eWxlLmhlaWdodD0iMCI7aC5hcHBlbmRDaGlsZChlKTt2YXIgZD0oZS5vZmZzZXRQYXJlbnQ9PT1oKTtoPWU9bnVsbDsKdmFyIGw9ZnVuY3Rpb24obSl7cmV0dXJuIGsobSwicG9zaXRpb24iKSE9InN0YXRpYyJ8fGEobSk7fTt2YXIgaT1mdW5jdGlvbihtKXtyZXR1cm4gbChtKXx8KC9eKD86dGFibGV8dGR8dGgpJC9pKS50ZXN0KG0udGFnTmFtZSk7fTtFbGVtZW50LmltcGxlbWVudCh7c2Nyb2xsVG86ZnVuY3Rpb24obSxuKXtpZihhKHRoaXMpKXt0aGlzLmdldFdpbmRvdygpLnNjcm9sbFRvKG0sbik7Cn1lbHNle3RoaXMuc2Nyb2xsTGVmdD1tO3RoaXMuc2Nyb2xsVG9wPW47fXJldHVybiB0aGlzO30sZ2V0U2l6ZTpmdW5jdGlvbigpe2lmKGEodGhpcykpe3JldHVybiB0aGlzLmdldFdpbmRvdygpLmdldFNpemUoKTt9cmV0dXJue3g6dGhpcy5vZmZzZXRXaWR0aCx5OnRoaXMub2Zmc2V0SGVpZ2h0fTsKfSxnZXRTY3JvbGxTaXplOmZ1bmN0aW9uKCl7aWYoYSh0aGlzKSl7cmV0dXJuIHRoaXMuZ2V0V2luZG93KCkuZ2V0U2Nyb2xsU2l6ZSgpO31yZXR1cm57eDp0aGlzLnNjcm9sbFdpZHRoLHk6dGhpcy5zY3JvbGxIZWlnaHR9O30sZ2V0U2Nyb2xsOmZ1bmN0aW9uKCl7aWYoYSh0aGlzKSl7cmV0dXJuIHRoaXMuZ2V0V2luZG93KCkuZ2V0U2Nyb2xsKCk7Cn1yZXR1cm57eDp0aGlzLnNjcm9sbExlZnQseTp0aGlzLnNjcm9sbFRvcH07fSxnZXRTY3JvbGxzOmZ1bmN0aW9uKCl7dmFyIG49dGhpcy5wYXJlbnROb2RlLG09e3g6MCx5OjB9O3doaWxlKG4mJiFhKG4pKXttLngrPW4uc2Nyb2xsTGVmdDttLnkrPW4uc2Nyb2xsVG9wOwpuPW4ucGFyZW50Tm9kZTt9cmV0dXJuIG07fSxnZXRPZmZzZXRQYXJlbnQ6ZD9mdW5jdGlvbigpe3ZhciBtPXRoaXM7aWYoYShtKXx8ayhtLCJwb3NpdGlvbiIpPT0iZml4ZWQiKXtyZXR1cm4gbnVsbDt9dmFyIG49KGsobSwicG9zaXRpb24iKT09InN0YXRpYyIpP2k6bDsKd2hpbGUoKG09bS5wYXJlbnROb2RlKSl7aWYobihtKSl7cmV0dXJuIG07fX1yZXR1cm4gbnVsbDt9OmZ1bmN0aW9uKCl7dmFyIG09dGhpcztpZihhKG0pfHxrKG0sInBvc2l0aW9uIik9PSJmaXhlZCIpe3JldHVybiBudWxsO310cnl7cmV0dXJuIG0ub2Zmc2V0UGFyZW50Owp9Y2F0Y2gobil7fXJldHVybiBudWxsO30sZ2V0T2Zmc2V0czpmdW5jdGlvbigpe2lmKHRoaXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0JiYhQnJvd3Nlci5QbGF0Zm9ybS5pb3Mpe3ZhciByPXRoaXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksbz1kb2N1bWVudC5pZCh0aGlzLmdldERvY3VtZW50KCkuZG9jdW1lbnRFbGVtZW50KSxxPW8uZ2V0U2Nyb2xsKCksdD10aGlzLmdldFNjcm9sbHMoKSxzPShrKHRoaXMsInBvc2l0aW9uIik9PSJmaXhlZCIpOwpyZXR1cm57eDpyLmxlZnQudG9JbnQoKSt0LngrKChzKT8wOnEueCktby5jbGllbnRMZWZ0LHk6ci50b3AudG9JbnQoKSt0LnkrKChzKT8wOnEueSktby5jbGllbnRUb3B9O312YXIgbj10aGlzLG09e3g6MCx5OjB9O2lmKGEodGhpcykpe3JldHVybiBtO313aGlsZShuJiYhYShuKSl7bS54Kz1uLm9mZnNldExlZnQ7Cm0ueSs9bi5vZmZzZXRUb3A7aWYoQnJvd3Nlci5maXJlZm94KXtpZighYyhuKSl7bS54Kz1iKG4pO20ueSs9ZyhuKTt9dmFyIHA9bi5wYXJlbnROb2RlO2lmKHAmJmsocCwib3ZlcmZsb3ciKSE9InZpc2libGUiKXttLngrPWIocCk7bS55Kz1nKHApO319ZWxzZXtpZihuIT10aGlzJiZCcm93c2VyLnNhZmFyaSl7bS54Kz1iKG4pOwptLnkrPWcobik7fX1uPW4ub2Zmc2V0UGFyZW50O31pZihCcm93c2VyLmZpcmVmb3gmJiFjKHRoaXMpKXttLngtPWIodGhpcyk7bS55LT1nKHRoaXMpO31yZXR1cm4gbTt9LGdldFBvc2l0aW9uOmZ1bmN0aW9uKHApe2lmKGEodGhpcykpe3JldHVybnt4OjAseTowfTt9dmFyIHE9dGhpcy5nZXRPZmZzZXRzKCksbj10aGlzLmdldFNjcm9sbHMoKTsKdmFyIG09e3g6cS54LW4ueCx5OnEueS1uLnl9O2lmKHAmJihwPWRvY3VtZW50LmlkKHApKSl7dmFyIG89cC5nZXRQb3NpdGlvbigpO3JldHVybnt4Om0ueC1vLngtYihwKSx5Om0ueS1vLnktZyhwKX07fXJldHVybiBtO30sZ2V0Q29vcmRpbmF0ZXM6ZnVuY3Rpb24obyl7aWYoYSh0aGlzKSl7cmV0dXJuIHRoaXMuZ2V0V2luZG93KCkuZ2V0Q29vcmRpbmF0ZXMoKTsKfXZhciBtPXRoaXMuZ2V0UG9zaXRpb24obyksbj10aGlzLmdldFNpemUoKTt2YXIgcD17bGVmdDptLngsdG9wOm0ueSx3aWR0aDpuLngsaGVpZ2h0Om4ueX07cC5yaWdodD1wLmxlZnQrcC53aWR0aDtwLmJvdHRvbT1wLnRvcCtwLmhlaWdodDtyZXR1cm4gcDt9LGNvbXB1dGVQb3NpdGlvbjpmdW5jdGlvbihtKXtyZXR1cm57bGVmdDptLngtaih0aGlzLCJtYXJnaW4tbGVmdCIpLHRvcDptLnktaih0aGlzLCJtYXJnaW4tdG9wIil9Owp9LHNldFBvc2l0aW9uOmZ1bmN0aW9uKG0pe3JldHVybiB0aGlzLnNldFN0eWxlcyh0aGlzLmNvbXB1dGVQb3NpdGlvbihtKSk7fX0pO1tEb2N1bWVudCxXaW5kb3ddLmludm9rZSgiaW1wbGVtZW50Iix7Z2V0U2l6ZTpmdW5jdGlvbigpe3ZhciBtPWYodGhpcyk7cmV0dXJue3g6bS5jbGllbnRXaWR0aCx5Om0uY2xpZW50SGVpZ2h0fTsKfSxnZXRTY3JvbGw6ZnVuY3Rpb24oKXt2YXIgbj10aGlzLmdldFdpbmRvdygpLG09Zih0aGlzKTtyZXR1cm57eDpuLnBhZ2VYT2Zmc2V0fHxtLnNjcm9sbExlZnQseTpuLnBhZ2VZT2Zmc2V0fHxtLnNjcm9sbFRvcH07fSxnZXRTY3JvbGxTaXplOmZ1bmN0aW9uKCl7dmFyIG89Zih0aGlzKSxuPXRoaXMuZ2V0U2l6ZSgpLG09dGhpcy5nZXREb2N1bWVudCgpLmJvZHk7CnJldHVybnt4Ok1hdGgubWF4KG8uc2Nyb2xsV2lkdGgsbS5zY3JvbGxXaWR0aCxuLngpLHk6TWF0aC5tYXgoby5zY3JvbGxIZWlnaHQsbS5zY3JvbGxIZWlnaHQsbi55KX07fSxnZXRQb3NpdGlvbjpmdW5jdGlvbigpe3JldHVybnt4OjAseTowfTt9LGdldENvb3JkaW5hdGVzOmZ1bmN0aW9uKCl7dmFyIG09dGhpcy5nZXRTaXplKCk7CnJldHVybnt0b3A6MCxsZWZ0OjAsYm90dG9tOm0ueSxyaWdodDptLngsaGVpZ2h0Om0ueSx3aWR0aDptLnh9O319KTt2YXIgaz1FbGVtZW50LmdldENvbXB1dGVkU3R5bGU7ZnVuY3Rpb24gaihtLG4pe3JldHVybiBrKG0sbikudG9JbnQoKXx8MDt9ZnVuY3Rpb24gYyhtKXtyZXR1cm4gayhtLCItbW96LWJveC1zaXppbmciKT09ImJvcmRlci1ib3giOwp9ZnVuY3Rpb24gZyhtKXtyZXR1cm4gaihtLCJib3JkZXItdG9wLXdpZHRoIik7fWZ1bmN0aW9uIGIobSl7cmV0dXJuIGoobSwiYm9yZGVyLWxlZnQtd2lkdGgiKTt9ZnVuY3Rpb24gYShtKXtyZXR1cm4oL14oPzpib2R5fGh0bWwpJC9pKS50ZXN0KG0udGFnTmFtZSk7Cn1mdW5jdGlvbiBmKG0pe3ZhciBuPW0uZ2V0RG9jdW1lbnQoKTtyZXR1cm4oIW4uY29tcGF0TW9kZXx8bi5jb21wYXRNb2RlPT0iQ1NTMUNvbXBhdCIpP24uaHRtbDpuLmJvZHk7fX0pKCk7RWxlbWVudC5hbGlhcyh7cG9zaXRpb246InNldFBvc2l0aW9uIn0pO1tXaW5kb3csRG9jdW1lbnQsRWxlbWVudF0uaW52b2tlKCJpbXBsZW1lbnQiLHtnZXRIZWlnaHQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRTaXplKCkueTsKfSxnZXRXaWR0aDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldFNpemUoKS54O30sZ2V0U2Nyb2xsVG9wOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0U2Nyb2xsKCkueTt9LGdldFNjcm9sbExlZnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRTY3JvbGwoKS54Owp9LGdldFNjcm9sbEhlaWdodDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldFNjcm9sbFNpemUoKS55O30sZ2V0U2Nyb2xsV2lkdGg6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRTY3JvbGxTaXplKCkueDt9LGdldFRvcDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldFBvc2l0aW9uKCkueTsKfSxnZXRMZWZ0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0UG9zaXRpb24oKS54O319KTsoZnVuY3Rpb24oKXt2YXIgZj10aGlzLkZ4PW5ldyBDbGFzcyh7SW1wbGVtZW50czpbQ2hhaW4sRXZlbnRzLE9wdGlvbnNdLG9wdGlvbnM6e2Zwczo2MCx1bml0OmZhbHNlLGR1cmF0aW9uOjUwMCxmcmFtZXM6bnVsbCxmcmFtZVNraXA6dHJ1ZSxsaW5rOiJpZ25vcmUifSxpbml0aWFsaXplOmZ1bmN0aW9uKGcpe3RoaXMuc3ViamVjdD10aGlzLnN1YmplY3R8fHRoaXM7CnRoaXMuc2V0T3B0aW9ucyhnKTt9LGdldFRyYW5zaXRpb246ZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oZyl7cmV0dXJuIC0oTWF0aC5jb3MoTWF0aC5QSSpnKS0xKS8yO307fSxzdGVwOmZ1bmN0aW9uKGcpe2lmKHRoaXMub3B0aW9ucy5mcmFtZVNraXApe3ZhciBoPSh0aGlzLnRpbWUhPW51bGwpPyhnLXRoaXMudGltZSk6MCxpPWgvdGhpcy5mcmFtZUludGVydmFsOwp0aGlzLnRpbWU9Zzt0aGlzLmZyYW1lKz1pO31lbHNle3RoaXMuZnJhbWUrKzt9aWYodGhpcy5mcmFtZTx0aGlzLmZyYW1lcyl7dmFyIGo9dGhpcy50cmFuc2l0aW9uKHRoaXMuZnJhbWUvdGhpcy5mcmFtZXMpO3RoaXMuc2V0KHRoaXMuY29tcHV0ZSh0aGlzLmZyb20sdGhpcy50byxqKSk7Cn1lbHNle3RoaXMuZnJhbWU9dGhpcy5mcmFtZXM7dGhpcy5zZXQodGhpcy5jb21wdXRlKHRoaXMuZnJvbSx0aGlzLnRvLDEpKTt0aGlzLnN0b3AoKTt9fSxzZXQ6ZnVuY3Rpb24oZyl7cmV0dXJuIGc7fSxjb21wdXRlOmZ1bmN0aW9uKGksaCxnKXtyZXR1cm4gZi5jb21wdXRlKGksaCxnKTsKfSxjaGVjazpmdW5jdGlvbigpe2lmKCF0aGlzLmlzUnVubmluZygpKXtyZXR1cm4gdHJ1ZTt9c3dpdGNoKHRoaXMub3B0aW9ucy5saW5rKXtjYXNlImNhbmNlbCI6dGhpcy5jYW5jZWwoKTtyZXR1cm4gdHJ1ZTtjYXNlImNoYWluIjp0aGlzLmNoYWluKHRoaXMuY2FsbGVyLnBhc3MoYXJndW1lbnRzLHRoaXMpKTsKcmV0dXJuIGZhbHNlO31yZXR1cm4gZmFsc2U7fSxzdGFydDpmdW5jdGlvbihrLGope2lmKCF0aGlzLmNoZWNrKGssaikpe3JldHVybiB0aGlzO310aGlzLmZyb209azt0aGlzLnRvPWo7dGhpcy5mcmFtZT0odGhpcy5vcHRpb25zLmZyYW1lU2tpcCk/MDotMTt0aGlzLnRpbWU9bnVsbDsKdGhpcy50cmFuc2l0aW9uPXRoaXMuZ2V0VHJhbnNpdGlvbigpO3ZhciBpPXRoaXMub3B0aW9ucy5mcmFtZXMsaD10aGlzLm9wdGlvbnMuZnBzLGc9dGhpcy5vcHRpb25zLmR1cmF0aW9uO3RoaXMuZHVyYXRpb249Zi5EdXJhdGlvbnNbZ118fGcudG9JbnQoKTt0aGlzLmZyYW1lSW50ZXJ2YWw9MTAwMC9oOwp0aGlzLmZyYW1lcz1pfHxNYXRoLnJvdW5kKHRoaXMuZHVyYXRpb24vdGhpcy5mcmFtZUludGVydmFsKTt0aGlzLmZpcmVFdmVudCgic3RhcnQiLHRoaXMuc3ViamVjdCk7Yi5jYWxsKHRoaXMsaCk7cmV0dXJuIHRoaXM7fSxzdG9wOmZ1bmN0aW9uKCl7aWYodGhpcy5pc1J1bm5pbmcoKSl7dGhpcy50aW1lPW51bGw7CmQuY2FsbCh0aGlzLHRoaXMub3B0aW9ucy5mcHMpO2lmKHRoaXMuZnJhbWVzPT10aGlzLmZyYW1lKXt0aGlzLmZpcmVFdmVudCgiY29tcGxldGUiLHRoaXMuc3ViamVjdCk7aWYoIXRoaXMuY2FsbENoYWluKCkpe3RoaXMuZmlyZUV2ZW50KCJjaGFpbkNvbXBsZXRlIix0aGlzLnN1YmplY3QpOwp9fWVsc2V7dGhpcy5maXJlRXZlbnQoInN0b3AiLHRoaXMuc3ViamVjdCk7fX1yZXR1cm4gdGhpczt9LGNhbmNlbDpmdW5jdGlvbigpe2lmKHRoaXMuaXNSdW5uaW5nKCkpe3RoaXMudGltZT1udWxsO2QuY2FsbCh0aGlzLHRoaXMub3B0aW9ucy5mcHMpO3RoaXMuZnJhbWU9dGhpcy5mcmFtZXM7CnRoaXMuZmlyZUV2ZW50KCJjYW5jZWwiLHRoaXMuc3ViamVjdCkuY2xlYXJDaGFpbigpO31yZXR1cm4gdGhpczt9LHBhdXNlOmZ1bmN0aW9uKCl7aWYodGhpcy5pc1J1bm5pbmcoKSl7dGhpcy50aW1lPW51bGw7ZC5jYWxsKHRoaXMsdGhpcy5vcHRpb25zLmZwcyk7fXJldHVybiB0aGlzOwp9LHJlc3VtZTpmdW5jdGlvbigpe2lmKCh0aGlzLmZyYW1lPHRoaXMuZnJhbWVzKSYmIXRoaXMuaXNSdW5uaW5nKCkpe2IuY2FsbCh0aGlzLHRoaXMub3B0aW9ucy5mcHMpO31yZXR1cm4gdGhpczt9LGlzUnVubmluZzpmdW5jdGlvbigpe3ZhciBnPWVbdGhpcy5vcHRpb25zLmZwc107CnJldHVybiBnJiZnLmNvbnRhaW5zKHRoaXMpO319KTtmLmNvbXB1dGU9ZnVuY3Rpb24oaSxoLGcpe3JldHVybihoLWkpKmcraTt9O2YuRHVyYXRpb25zPXsic2hvcnQiOjI1MCxub3JtYWw6NTAwLCJsb25nIjoxMDAwfTt2YXIgZT17fSxjPXt9O3ZhciBhPWZ1bmN0aW9uKCl7dmFyIGg9RGF0ZS5ub3coKTsKZm9yKHZhciBqPXRoaXMubGVuZ3RoO2otLTspe3ZhciBnPXRoaXNbal07aWYoZyl7Zy5zdGVwKGgpO319fTt2YXIgYj1mdW5jdGlvbihoKXt2YXIgZz1lW2hdfHwoZVtoXT1bXSk7Zy5wdXNoKHRoaXMpO2lmKCFjW2hdKXtjW2hdPWEucGVyaW9kaWNhbChNYXRoLnJvdW5kKDEwMDAvaCksZyk7Cn19O3ZhciBkPWZ1bmN0aW9uKGgpe3ZhciBnPWVbaF07aWYoZyl7Zy5lcmFzZSh0aGlzKTtpZighZy5sZW5ndGgmJmNbaF0pe2RlbGV0ZSBlW2hdO2NbaF09Y2xlYXJJbnRlcnZhbChjW2hdKTt9fX07fSkoKTtGeC5DU1M9bmV3IENsYXNzKHtFeHRlbmRzOkZ4LHByZXBhcmU6ZnVuY3Rpb24oYyxkLGIpe2I9QXJyYXkuZnJvbShiKTsKaWYoYlsxXT09bnVsbCl7YlsxXT1iWzBdO2JbMF09Yy5nZXRTdHlsZShkKTt9dmFyIGE9Yi5tYXAodGhpcy5wYXJzZSk7cmV0dXJue2Zyb206YVswXSx0bzphWzFdfTt9LHBhcnNlOmZ1bmN0aW9uKGEpe2E9RnVuY3Rpb24uZnJvbShhKSgpO2E9KHR5cGVvZiBhPT0ic3RyaW5nIik/YS5zcGxpdCgiICIpOkFycmF5LmZyb20oYSk7CnJldHVybiBhLm1hcChmdW5jdGlvbihjKXtjPVN0cmluZyhjKTt2YXIgYj1mYWxzZTtPYmplY3QuZWFjaChGeC5DU1MuUGFyc2VycyxmdW5jdGlvbihmLGUpe2lmKGIpe3JldHVybjt9dmFyIGQ9Zi5wYXJzZShjKTtpZihkfHxkPT09MCl7Yj17dmFsdWU6ZCxwYXJzZXI6Zn07Cn19KTtiPWJ8fHt2YWx1ZTpjLHBhcnNlcjpGeC5DU1MuUGFyc2Vycy5TdHJpbmd9O3JldHVybiBiO30pO30sY29tcHV0ZTpmdW5jdGlvbihkLGMsYil7dmFyIGE9W107KE1hdGgubWluKGQubGVuZ3RoLGMubGVuZ3RoKSkudGltZXMoZnVuY3Rpb24oZSl7YS5wdXNoKHt2YWx1ZTpkW2VdLnBhcnNlci5jb21wdXRlKGRbZV0udmFsdWUsY1tlXS52YWx1ZSxiKSxwYXJzZXI6ZFtlXS5wYXJzZXJ9KTsKfSk7YS4kZmFtaWx5PUZ1bmN0aW9uLmZyb20oImZ4OmNzczp2YWx1ZSIpO3JldHVybiBhO30sc2VydmU6ZnVuY3Rpb24oYyxiKXtpZih0eXBlT2YoYykhPSJmeDpjc3M6dmFsdWUiKXtjPXRoaXMucGFyc2UoYyk7fXZhciBhPVtdO2MuZWFjaChmdW5jdGlvbihkKXthPWEuY29uY2F0KGQucGFyc2VyLnNlcnZlKGQudmFsdWUsYikpOwp9KTtyZXR1cm4gYTt9LHJlbmRlcjpmdW5jdGlvbihhLGQsYyxiKXthLnNldFN0eWxlKGQsdGhpcy5zZXJ2ZShjLGIpKTt9LHNlYXJjaDpmdW5jdGlvbihhKXtpZihGeC5DU1MuQ2FjaGVbYV0pe3JldHVybiBGeC5DU1MuQ2FjaGVbYV07fXZhciBjPXt9LGI9bmV3IFJlZ0V4cCgiXiIrYS5lc2NhcGVSZWdFeHAoKSsiJCIpOwpBcnJheS5lYWNoKGRvY3VtZW50LnN0eWxlU2hlZXRzLGZ1bmN0aW9uKGYsZSl7dmFyIGQ9Zi5ocmVmO2lmKGQmJmQuY29udGFpbnMoIjovLyIpJiYhZC5jb250YWlucyhkb2N1bWVudC5kb21haW4pKXtyZXR1cm47fXZhciBnPWYucnVsZXN8fGYuY3NzUnVsZXM7QXJyYXkuZWFjaChnLGZ1bmN0aW9uKGssaCl7aWYoIWsuc3R5bGUpe3JldHVybjsKfXZhciBqPShrLnNlbGVjdG9yVGV4dCk/ay5zZWxlY3RvclRleHQucmVwbGFjZSgvXlx3Ky8sZnVuY3Rpb24oaSl7cmV0dXJuIGkudG9Mb3dlckNhc2UoKTt9KTpudWxsO2lmKCFqfHwhYi50ZXN0KGopKXtyZXR1cm47fU9iamVjdC5lYWNoKEVsZW1lbnQuU3R5bGVzLGZ1bmN0aW9uKGwsaSl7aWYoIWsuc3R5bGVbaV18fEVsZW1lbnQuU2hvcnRTdHlsZXNbaV0pe3JldHVybjsKfWw9U3RyaW5nKGsuc3R5bGVbaV0pO2NbaV09KCgvXnJnYi8pLnRlc3QobCkpP2wucmdiVG9IZXgoKTpsO30pO30pO30pO3JldHVybiBGeC5DU1MuQ2FjaGVbYV09Yzt9fSk7RnguQ1NTLkNhY2hlPXt9O0Z4LkNTUy5QYXJzZXJzPXtDb2xvcjp7cGFyc2U6ZnVuY3Rpb24oYSl7aWYoYS5tYXRjaCgvXiNbMC05YS1mXXszLDZ9JC9pKSl7cmV0dXJuIGEuaGV4VG9SZ2IodHJ1ZSk7Cn1yZXR1cm4oKGE9YS5tYXRjaCgvKFxkKyksXHMqKFxkKyksXHMqKFxkKykvKSkpP1thWzFdLGFbMl0sYVszXV06ZmFsc2U7fSxjb21wdXRlOmZ1bmN0aW9uKGMsYixhKXtyZXR1cm4gYy5tYXAoZnVuY3Rpb24oZSxkKXtyZXR1cm4gTWF0aC5yb3VuZChGeC5jb21wdXRlKGNbZF0sYltkXSxhKSk7Cn0pO30sc2VydmU6ZnVuY3Rpb24oYSl7cmV0dXJuIGEubWFwKE51bWJlcik7fX0sTnVtYmVyOntwYXJzZTpwYXJzZUZsb2F0LGNvbXB1dGU6RnguY29tcHV0ZSxzZXJ2ZTpmdW5jdGlvbihiLGEpe3JldHVybihhKT9iK2E6Yjt9fSxTdHJpbmc6e3BhcnNlOkZ1bmN0aW9uLmZyb20oZmFsc2UpLGNvbXB1dGU6ZnVuY3Rpb24oYixhKXtyZXR1cm4gYTsKfSxzZXJ2ZTpmdW5jdGlvbihhKXtyZXR1cm4gYTt9fX07RnguVHdlZW49bmV3IENsYXNzKHtFeHRlbmRzOkZ4LkNTUyxpbml0aWFsaXplOmZ1bmN0aW9uKGIsYSl7dGhpcy5lbGVtZW50PXRoaXMuc3ViamVjdD1kb2N1bWVudC5pZChiKTt0aGlzLnBhcmVudChhKTt9LHNldDpmdW5jdGlvbihiLGEpe2lmKGFyZ3VtZW50cy5sZW5ndGg9PTEpe2E9YjsKYj10aGlzLnByb3BlcnR5fHx0aGlzLm9wdGlvbnMucHJvcGVydHk7fXRoaXMucmVuZGVyKHRoaXMuZWxlbWVudCxiLGEsdGhpcy5vcHRpb25zLnVuaXQpO3JldHVybiB0aGlzO30sc3RhcnQ6ZnVuY3Rpb24oYyxlLGQpe2lmKCF0aGlzLmNoZWNrKGMsZSxkKSl7cmV0dXJuIHRoaXM7Cn12YXIgYj1BcnJheS5mbGF0dGVuKGFyZ3VtZW50cyk7dGhpcy5wcm9wZXJ0eT10aGlzLm9wdGlvbnMucHJvcGVydHl8fGIuc2hpZnQoKTt2YXIgYT10aGlzLnByZXBhcmUodGhpcy5lbGVtZW50LHRoaXMucHJvcGVydHksYik7cmV0dXJuIHRoaXMucGFyZW50KGEuZnJvbSxhLnRvKTsKfX0pO0VsZW1lbnQuUHJvcGVydGllcy50d2Vlbj17c2V0OmZ1bmN0aW9uKGEpe3RoaXMuZ2V0KCJ0d2VlbiIpLmNhbmNlbCgpLnNldE9wdGlvbnMoYSk7cmV0dXJuIHRoaXM7fSxnZXQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnJldHJpZXZlKCJ0d2VlbiIpO2lmKCFhKXthPW5ldyBGeC5Ud2Vlbih0aGlzLHtsaW5rOiJjYW5jZWwifSk7CnRoaXMuc3RvcmUoInR3ZWVuIixhKTt9cmV0dXJuIGE7fX07RWxlbWVudC5pbXBsZW1lbnQoe3R3ZWVuOmZ1bmN0aW9uKGEsYyxiKXt0aGlzLmdldCgidHdlZW4iKS5zdGFydChhcmd1bWVudHMpO3JldHVybiB0aGlzO30sZmFkZTpmdW5jdGlvbihjKXt2YXIgZT10aGlzLmdldCgidHdlZW4iKSxkPSJvcGFjaXR5IixhOwpjPVtjLCJ0b2dnbGUiXS5waWNrKCk7c3dpdGNoKGMpe2Nhc2UiaW4iOmUuc3RhcnQoZCwxKTticmVhaztjYXNlIm91dCI6ZS5zdGFydChkLDApO2JyZWFrO2Nhc2Uic2hvdyI6ZS5zZXQoZCwxKTticmVhaztjYXNlImhpZGUiOmUuc2V0KGQsMCk7YnJlYWs7Y2FzZSJ0b2dnbGUiOnZhciBiPXRoaXMucmV0cmlldmUoImZhZGU6ZmxhZyIsdGhpcy5nZXQoIm9wYWNpdHkiKT09MSk7CmUuc3RhcnQoZCwoYik/MDoxKTt0aGlzLnN0b3JlKCJmYWRlOmZsYWciLCFiKTthPXRydWU7YnJlYWs7ZGVmYXVsdDplLnN0YXJ0KGQsYXJndW1lbnRzKTt9aWYoIWEpe3RoaXMuZWxpbWluYXRlKCJmYWRlOmZsYWciKTt9cmV0dXJuIHRoaXM7fSxoaWdobGlnaHQ6ZnVuY3Rpb24oYyxhKXtpZighYSl7YT10aGlzLnJldHJpZXZlKCJoaWdobGlnaHQ6b3JpZ2luYWwiLHRoaXMuZ2V0U3R5bGUoImJhY2tncm91bmQtY29sb3IiKSk7CmE9KGE9PSJ0cmFuc3BhcmVudCIpPyIjZmZmIjphO312YXIgYj10aGlzLmdldCgidHdlZW4iKTtiLnN0YXJ0KCJiYWNrZ3JvdW5kLWNvbG9yIixjfHwiI2ZmZmY4OCIsYSkuY2hhaW4oZnVuY3Rpb24oKXt0aGlzLnNldFN0eWxlKCJiYWNrZ3JvdW5kLWNvbG9yIix0aGlzLnJldHJpZXZlKCJoaWdobGlnaHQ6b3JpZ2luYWwiKSk7CmIuY2FsbENoYWluKCk7fS5iaW5kKHRoaXMpKTtyZXR1cm4gdGhpczt9fSk7RnguTW9ycGg9bmV3IENsYXNzKHtFeHRlbmRzOkZ4LkNTUyxpbml0aWFsaXplOmZ1bmN0aW9uKGIsYSl7dGhpcy5lbGVtZW50PXRoaXMuc3ViamVjdD1kb2N1bWVudC5pZChiKTt0aGlzLnBhcmVudChhKTsKfSxzZXQ6ZnVuY3Rpb24oYSl7aWYodHlwZW9mIGE9PSJzdHJpbmciKXthPXRoaXMuc2VhcmNoKGEpO31mb3IodmFyIGIgaW4gYSl7dGhpcy5yZW5kZXIodGhpcy5lbGVtZW50LGIsYVtiXSx0aGlzLm9wdGlvbnMudW5pdCk7fXJldHVybiB0aGlzO30sY29tcHV0ZTpmdW5jdGlvbihlLGQsYyl7dmFyIGE9e307CmZvcih2YXIgYiBpbiBlKXthW2JdPXRoaXMucGFyZW50KGVbYl0sZFtiXSxjKTt9cmV0dXJuIGE7fSxzdGFydDpmdW5jdGlvbihiKXtpZighdGhpcy5jaGVjayhiKSl7cmV0dXJuIHRoaXM7fWlmKHR5cGVvZiBiPT0ic3RyaW5nIil7Yj10aGlzLnNlYXJjaChiKTt9dmFyIGU9e30sZD17fTsKZm9yKHZhciBjIGluIGIpe3ZhciBhPXRoaXMucHJlcGFyZSh0aGlzLmVsZW1lbnQsYyxiW2NdKTtlW2NdPWEuZnJvbTtkW2NdPWEudG87fXJldHVybiB0aGlzLnBhcmVudChlLGQpO319KTtFbGVtZW50LlByb3BlcnRpZXMubW9ycGg9e3NldDpmdW5jdGlvbihhKXt0aGlzLmdldCgibW9ycGgiKS5jYW5jZWwoKS5zZXRPcHRpb25zKGEpOwpyZXR1cm4gdGhpczt9LGdldDpmdW5jdGlvbigpe3ZhciBhPXRoaXMucmV0cmlldmUoIm1vcnBoIik7aWYoIWEpe2E9bmV3IEZ4Lk1vcnBoKHRoaXMse2xpbms6ImNhbmNlbCJ9KTt0aGlzLnN0b3JlKCJtb3JwaCIsYSk7fXJldHVybiBhO319O0VsZW1lbnQuaW1wbGVtZW50KHttb3JwaDpmdW5jdGlvbihhKXt0aGlzLmdldCgibW9ycGgiKS5zdGFydChhKTsKcmV0dXJuIHRoaXM7fX0pO0Z4LmltcGxlbWVudCh7Z2V0VHJhbnNpdGlvbjpmdW5jdGlvbigpe3ZhciBhPXRoaXMub3B0aW9ucy50cmFuc2l0aW9ufHxGeC5UcmFuc2l0aW9ucy5TaW5lLmVhc2VJbk91dDtpZih0eXBlb2YgYT09InN0cmluZyIpe3ZhciBiPWEuc3BsaXQoIjoiKTsKYT1GeC5UcmFuc2l0aW9uczthPWFbYlswXV18fGFbYlswXS5jYXBpdGFsaXplKCldO2lmKGJbMV0pe2E9YVsiZWFzZSIrYlsxXS5jYXBpdGFsaXplKCkrKGJbMl0/YlsyXS5jYXBpdGFsaXplKCk6IiIpXTt9fXJldHVybiBhO319KTtGeC5UcmFuc2l0aW9uPWZ1bmN0aW9uKGMsYil7Yj1BcnJheS5mcm9tKGIpOwp2YXIgYT1mdW5jdGlvbihkKXtyZXR1cm4gYyhkLGIpO307cmV0dXJuIE9iamVjdC5hcHBlbmQoYSx7ZWFzZUluOmEsZWFzZU91dDpmdW5jdGlvbihkKXtyZXR1cm4gMS1jKDEtZCxiKTt9LGVhc2VJbk91dDpmdW5jdGlvbihkKXtyZXR1cm4oZDw9MC41P2MoMipkLGIpOigyLWMoMiooMS1kKSxiKSkpLzI7Cn19KTt9O0Z4LlRyYW5zaXRpb25zPXtsaW5lYXI6ZnVuY3Rpb24oYSl7cmV0dXJuIGE7fX07RnguVHJhbnNpdGlvbnMuZXh0ZW5kPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYiBpbiBhKXtGeC5UcmFuc2l0aW9uc1tiXT1uZXcgRnguVHJhbnNpdGlvbihhW2JdKTt9fTtGeC5UcmFuc2l0aW9ucy5leHRlbmQoe1BvdzpmdW5jdGlvbihiLGEpe3JldHVybiBNYXRoLnBvdyhiLGEmJmFbMF18fDYpOwp9LEV4cG86ZnVuY3Rpb24oYSl7cmV0dXJuIE1hdGgucG93KDIsOCooYS0xKSk7fSxDaXJjOmZ1bmN0aW9uKGEpe3JldHVybiAxLU1hdGguc2luKE1hdGguYWNvcyhhKSk7fSxTaW5lOmZ1bmN0aW9uKGEpe3JldHVybiAxLU1hdGguY29zKGEqTWF0aC5QSS8yKTt9LEJhY2s6ZnVuY3Rpb24oYixhKXthPWEmJmFbMF18fDEuNjE4OwpyZXR1cm4gTWF0aC5wb3coYiwyKSooKGErMSkqYi1hKTt9LEJvdW5jZTpmdW5jdGlvbihmKXt2YXIgZTtmb3IodmFyIGQ9MCxjPTE7MTtkKz1jLGMvPTIpe2lmKGY+PSg3LTQqZCkvMTEpe2U9YypjLU1hdGgucG93KCgxMS02KmQtMTEqZikvNCwyKTticmVhazt9fXJldHVybiBlOwp9LEVsYXN0aWM6ZnVuY3Rpb24oYixhKXtyZXR1cm4gTWF0aC5wb3coMiwxMCotLWIpKk1hdGguY29zKDIwKmIqTWF0aC5QSSooYSYmYVswXXx8MSkvMyk7fX0pO1siUXVhZCIsIkN1YmljIiwiUXVhcnQiLCJRdWludCJdLmVhY2goZnVuY3Rpb24oYixhKXtGeC5UcmFuc2l0aW9uc1tiXT1uZXcgRnguVHJhbnNpdGlvbihmdW5jdGlvbihjKXtyZXR1cm4gTWF0aC5wb3coYyxhKzIpOwp9KTt9KTsoZnVuY3Rpb24oKXt2YXIgZD1mdW5jdGlvbigpe30sYT0oIm9ucHJvZ3Jlc3MiIGluIG5ldyBCcm93c2VyLlJlcXVlc3QpO3ZhciBjPXRoaXMuUmVxdWVzdD1uZXcgQ2xhc3Moe0ltcGxlbWVudHM6W0NoYWluLEV2ZW50cyxPcHRpb25zXSxvcHRpb25zOnt1cmw6IiIsZGF0YToiIixoZWFkZXJzOnsiWC1SZXF1ZXN0ZWQtV2l0aCI6IlhNTEh0dHBSZXF1ZXN0IixBY2NlcHQ6InRleHQvamF2YXNjcmlwdCwgdGV4dC9odG1sLCBhcHBsaWNhdGlvbi94bWwsIHRleHQveG1sLCAqLyoifSxhc3luYzp0cnVlLGZvcm1hdDpmYWxzZSxtZXRob2Q6InBvc3QiLGxpbms6Imlnbm9yZSIsaXNTdWNjZXNzOm51bGwsZW11bGF0aW9uOnRydWUsdXJsRW5jb2RlZDp0cnVlLGVuY29kaW5nOiJ1dGYtOCIsZXZhbFNjcmlwdHM6ZmFsc2UsZXZhbFJlc3BvbnNlOmZhbHNlLHRpbWVvdXQ6MCxub0NhY2hlOmZhbHNlfSxpbml0aWFsaXplOmZ1bmN0aW9uKGUpe3RoaXMueGhyPW5ldyBCcm93c2VyLlJlcXVlc3QoKTsKdGhpcy5zZXRPcHRpb25zKGUpO3RoaXMuaGVhZGVycz10aGlzLm9wdGlvbnMuaGVhZGVyczt9LG9uU3RhdGVDaGFuZ2U6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnhocjtpZihlLnJlYWR5U3RhdGUhPTR8fCF0aGlzLnJ1bm5pbmcpe3JldHVybjt9dGhpcy5ydW5uaW5nPWZhbHNlOwp0aGlzLnN0YXR1cz0wO0Z1bmN0aW9uLmF0dGVtcHQoZnVuY3Rpb24oKXt2YXIgZj1lLnN0YXR1czt0aGlzLnN0YXR1cz0oZj09MTIyMyk/MjA0OmY7fS5iaW5kKHRoaXMpKTtlLm9ucmVhZHlzdGF0ZWNoYW5nZT1kO2lmKGEpe2Uub25wcm9ncmVzcz1lLm9ubG9hZHN0YXJ0PWQ7Cn1jbGVhclRpbWVvdXQodGhpcy50aW1lcik7dGhpcy5yZXNwb25zZT17dGV4dDp0aGlzLnhoci5yZXNwb25zZVRleHR8fCIiLHhtbDp0aGlzLnhoci5yZXNwb25zZVhNTH07aWYodGhpcy5vcHRpb25zLmlzU3VjY2Vzcy5jYWxsKHRoaXMsdGhpcy5zdGF0dXMpKXt0aGlzLnN1Y2Nlc3ModGhpcy5yZXNwb25zZS50ZXh0LHRoaXMucmVzcG9uc2UueG1sKTsKfWVsc2V7dGhpcy5mYWlsdXJlKCk7fX0saXNTdWNjZXNzOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5zdGF0dXM7cmV0dXJuKGU+PTIwMCYmZTwzMDApO30saXNSdW5uaW5nOmZ1bmN0aW9uKCl7cmV0dXJuICEhdGhpcy5ydW5uaW5nO30scHJvY2Vzc1NjcmlwdHM6ZnVuY3Rpb24oZSl7aWYodGhpcy5vcHRpb25zLmV2YWxSZXNwb25zZXx8KC8oZWNtYXxqYXZhKXNjcmlwdC8pLnRlc3QodGhpcy5nZXRIZWFkZXIoIkNvbnRlbnQtdHlwZSIpKSl7cmV0dXJuIEJyb3dzZXIuZXhlYyhlKTsKfXJldHVybiBlLnN0cmlwU2NyaXB0cyh0aGlzLm9wdGlvbnMuZXZhbFNjcmlwdHMpO30sc3VjY2VzczpmdW5jdGlvbihmLGUpe3RoaXMub25TdWNjZXNzKHRoaXMucHJvY2Vzc1NjcmlwdHMoZiksZSk7fSxvblN1Y2Nlc3M6ZnVuY3Rpb24oKXt0aGlzLmZpcmVFdmVudCgiY29tcGxldGUiLGFyZ3VtZW50cykuZmlyZUV2ZW50KCJzdWNjZXNzIixhcmd1bWVudHMpLmNhbGxDaGFpbigpOwp9LGZhaWx1cmU6ZnVuY3Rpb24oKXt0aGlzLm9uRmFpbHVyZSgpO30sb25GYWlsdXJlOmZ1bmN0aW9uKCl7dGhpcy5maXJlRXZlbnQoImNvbXBsZXRlIikuZmlyZUV2ZW50KCJmYWlsdXJlIix0aGlzLnhocik7fSxsb2Fkc3RhcnQ6ZnVuY3Rpb24oZSl7dGhpcy5maXJlRXZlbnQoImxvYWRzdGFydCIsW2UsdGhpcy54aHJdKTsKfSxwcm9ncmVzczpmdW5jdGlvbihlKXt0aGlzLmZpcmVFdmVudCgicHJvZ3Jlc3MiLFtlLHRoaXMueGhyXSk7fSx0aW1lb3V0OmZ1bmN0aW9uKCl7dGhpcy5maXJlRXZlbnQoInRpbWVvdXQiLHRoaXMueGhyKTt9LHNldEhlYWRlcjpmdW5jdGlvbihlLGYpe3RoaXMuaGVhZGVyc1tlXT1mOwpyZXR1cm4gdGhpczt9LGdldEhlYWRlcjpmdW5jdGlvbihlKXtyZXR1cm4gRnVuY3Rpb24uYXR0ZW1wdChmdW5jdGlvbigpe3JldHVybiB0aGlzLnhoci5nZXRSZXNwb25zZUhlYWRlcihlKTt9LmJpbmQodGhpcykpO30sY2hlY2s6ZnVuY3Rpb24oKXtpZighdGhpcy5ydW5uaW5nKXtyZXR1cm4gdHJ1ZTsKfXN3aXRjaCh0aGlzLm9wdGlvbnMubGluayl7Y2FzZSJjYW5jZWwiOnRoaXMuY2FuY2VsKCk7cmV0dXJuIHRydWU7Y2FzZSJjaGFpbiI6dGhpcy5jaGFpbih0aGlzLmNhbGxlci5wYXNzKGFyZ3VtZW50cyx0aGlzKSk7cmV0dXJuIGZhbHNlO31yZXR1cm4gZmFsc2U7fSxzZW5kOmZ1bmN0aW9uKG8pe2lmKCF0aGlzLmNoZWNrKG8pKXtyZXR1cm4gdGhpczsKfXRoaXMub3B0aW9ucy5pc1N1Y2Nlc3M9dGhpcy5vcHRpb25zLmlzU3VjY2Vzc3x8dGhpcy5pc1N1Y2Nlc3M7dGhpcy5ydW5uaW5nPXRydWU7dmFyIGw9dHlwZU9mKG8pO2lmKGw9PSJzdHJpbmcifHxsPT0iZWxlbWVudCIpe289e2RhdGE6b307fXZhciBoPXRoaXMub3B0aW9uczsKbz1PYmplY3QuYXBwZW5kKHtkYXRhOmguZGF0YSx1cmw6aC51cmwsbWV0aG9kOmgubWV0aG9kfSxvKTt2YXIgaj1vLmRhdGEsZj1TdHJpbmcoby51cmwpLGU9by5tZXRob2QudG9Mb3dlckNhc2UoKTtzd2l0Y2godHlwZU9mKGopKXtjYXNlImVsZW1lbnQiOmo9ZG9jdW1lbnQuaWQoaikudG9RdWVyeVN0cmluZygpOwpicmVhaztjYXNlIm9iamVjdCI6Y2FzZSJoYXNoIjpqPU9iamVjdC50b1F1ZXJ5U3RyaW5nKGopO31pZih0aGlzLm9wdGlvbnMuZm9ybWF0KXt2YXIgbT0iZm9ybWF0PSIrdGhpcy5vcHRpb25zLmZvcm1hdDtqPShqKT9tKyImIitqOm07fWlmKHRoaXMub3B0aW9ucy5lbXVsYXRpb24mJiFbImdldCIsInBvc3QiXS5jb250YWlucyhlKSl7dmFyIGs9Il9tZXRob2Q9IitlOwpqPShqKT9rKyImIitqOms7ZT0icG9zdCI7fWlmKHRoaXMub3B0aW9ucy51cmxFbmNvZGVkJiZbInBvc3QiLCJwdXQiXS5jb250YWlucyhlKSl7dmFyIGc9KHRoaXMub3B0aW9ucy5lbmNvZGluZyk/IjsgY2hhcnNldD0iK3RoaXMub3B0aW9ucy5lbmNvZGluZzoiIjt0aGlzLmhlYWRlcnNbIkNvbnRlbnQtdHlwZSJdPSJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiK2c7Cn1pZighZil7Zj1kb2N1bWVudC5sb2NhdGlvbi5wYXRobmFtZTt9dmFyIGk9Zi5sYXN0SW5kZXhPZigiLyIpO2lmKGk+LTEmJihpPWYuaW5kZXhPZigiIyIpKT4tMSl7Zj1mLnN1YnN0cigwLGkpO31pZih0aGlzLm9wdGlvbnMubm9DYWNoZSl7Zis9KGYuY29udGFpbnMoIj8iKT8iJiI6Ij8iKStTdHJpbmcudW5pcXVlSUQoKTsKfWlmKGomJmU9PSJnZXQiKXtmKz0oZi5jb250YWlucygiPyIpPyImIjoiPyIpK2o7aj1udWxsO312YXIgbj10aGlzLnhocjtpZihhKXtuLm9ubG9hZHN0YXJ0PXRoaXMubG9hZHN0YXJ0LmJpbmQodGhpcyk7bi5vbnByb2dyZXNzPXRoaXMucHJvZ3Jlc3MuYmluZCh0aGlzKTsKfW4ub3BlbihlLnRvVXBwZXJDYXNlKCksZix0aGlzLm9wdGlvbnMuYXN5bmMsdGhpcy5vcHRpb25zLnVzZXIsdGhpcy5vcHRpb25zLnBhc3N3b3JkKTtpZih0aGlzLm9wdGlvbnMudXNlciYmIndpdGhDcmVkZW50aWFscyIgaW4gbil7bi53aXRoQ3JlZGVudGlhbHM9dHJ1ZTsKfW4ub25yZWFkeXN0YXRlY2hhbmdlPXRoaXMub25TdGF0ZUNoYW5nZS5iaW5kKHRoaXMpO09iamVjdC5lYWNoKHRoaXMuaGVhZGVycyxmdW5jdGlvbihxLHApe3RyeXtuLnNldFJlcXVlc3RIZWFkZXIocCxxKTt9Y2F0Y2gocil7dGhpcy5maXJlRXZlbnQoImV4Y2VwdGlvbiIsW3AscV0pOwp9fSx0aGlzKTt0aGlzLmZpcmVFdmVudCgicmVxdWVzdCIpO24uc2VuZChqKTtpZighdGhpcy5vcHRpb25zLmFzeW5jKXt0aGlzLm9uU3RhdGVDaGFuZ2UoKTt9aWYodGhpcy5vcHRpb25zLnRpbWVvdXQpe3RoaXMudGltZXI9dGhpcy50aW1lb3V0LmRlbGF5KHRoaXMub3B0aW9ucy50aW1lb3V0LHRoaXMpOwp9cmV0dXJuIHRoaXM7fSxjYW5jZWw6ZnVuY3Rpb24oKXtpZighdGhpcy5ydW5uaW5nKXtyZXR1cm4gdGhpczt9dGhpcy5ydW5uaW5nPWZhbHNlO3ZhciBlPXRoaXMueGhyO2UuYWJvcnQoKTtjbGVhclRpbWVvdXQodGhpcy50aW1lcik7ZS5vbnJlYWR5c3RhdGVjaGFuZ2U9ZDsKaWYoYSl7ZS5vbnByb2dyZXNzPWUub25sb2Fkc3RhcnQ9ZDt9dGhpcy54aHI9bmV3IEJyb3dzZXIuUmVxdWVzdCgpO3RoaXMuZmlyZUV2ZW50KCJjYW5jZWwiKTtyZXR1cm4gdGhpczt9fSk7dmFyIGI9e307WyJnZXQiLCJwb3N0IiwicHV0IiwiZGVsZXRlIiwiR0VUIiwiUE9TVCIsIlBVVCIsIkRFTEVURSJdLmVhY2goZnVuY3Rpb24oZSl7YltlXT1mdW5jdGlvbihnKXt2YXIgZj17bWV0aG9kOmV9OwppZihnIT1udWxsKXtmLmRhdGE9Zzt9cmV0dXJuIHRoaXMuc2VuZChmKTt9O30pO2MuaW1wbGVtZW50KGIpO0VsZW1lbnQuUHJvcGVydGllcy5zZW5kPXtzZXQ6ZnVuY3Rpb24oZSl7dmFyIGY9dGhpcy5nZXQoInNlbmQiKS5jYW5jZWwoKTtmLnNldE9wdGlvbnMoZSk7CnJldHVybiB0aGlzO30sZ2V0OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5yZXRyaWV2ZSgic2VuZCIpO2lmKCFlKXtlPW5ldyBjKHtkYXRhOnRoaXMsbGluazoiY2FuY2VsIixtZXRob2Q6dGhpcy5nZXQoIm1ldGhvZCIpfHwicG9zdCIsdXJsOnRoaXMuZ2V0KCJhY3Rpb24iKX0pOwp0aGlzLnN0b3JlKCJzZW5kIixlKTt9cmV0dXJuIGU7fX07RWxlbWVudC5pbXBsZW1lbnQoe3NlbmQ6ZnVuY3Rpb24oZSl7dmFyIGY9dGhpcy5nZXQoInNlbmQiKTtmLnNlbmQoe2RhdGE6dGhpcyx1cmw6ZXx8Zi5vcHRpb25zLnVybH0pO3JldHVybiB0aGlzO319KTt9KSgpOwpSZXF1ZXN0LkhUTUw9bmV3IENsYXNzKHtFeHRlbmRzOlJlcXVlc3Qsb3B0aW9uczp7dXBkYXRlOmZhbHNlLGFwcGVuZDpmYWxzZSxldmFsU2NyaXB0czp0cnVlLGZpbHRlcjpmYWxzZSxoZWFkZXJzOntBY2NlcHQ6InRleHQvaHRtbCwgYXBwbGljYXRpb24veG1sLCB0ZXh0L3htbCwgKi8qIn19LHN1Y2Nlc3M6ZnVuY3Rpb24oZSl7dmFyIGQ9dGhpcy5vcHRpb25zLGI9dGhpcy5yZXNwb25zZTsKYi5odG1sPWUuc3RyaXBTY3JpcHRzKGZ1bmN0aW9uKGYpe2IuamF2YXNjcmlwdD1mO30pO3ZhciBjPWIuaHRtbC5tYXRjaCgvPGJvZHlbXj5dKj4oW1xzXFNdKj8pPFwvYm9keT4vaSk7aWYoYyl7Yi5odG1sPWNbMV07fXZhciBhPW5ldyBFbGVtZW50KCJkaXYiKS5zZXQoImh0bWwiLGIuaHRtbCk7CmIudHJlZT1hLmNoaWxkTm9kZXM7Yi5lbGVtZW50cz1hLmdldEVsZW1lbnRzKCIqIik7aWYoZC5maWx0ZXIpe2IudHJlZT1iLmVsZW1lbnRzLmZpbHRlcihkLmZpbHRlcik7fWlmKGQudXBkYXRlKXtkb2N1bWVudC5pZChkLnVwZGF0ZSkuZW1wdHkoKS5zZXQoImh0bWwiLGIuaHRtbCk7Cn1lbHNle2lmKGQuYXBwZW5kKXtkb2N1bWVudC5pZChkLmFwcGVuZCkuYWRvcHQoYS5nZXRDaGlsZHJlbigpKTt9fWlmKGQuZXZhbFNjcmlwdHMpe0Jyb3dzZXIuZXhlYyhiLmphdmFzY3JpcHQpO310aGlzLm9uU3VjY2VzcyhiLnRyZWUsYi5lbGVtZW50cyxiLmh0bWwsYi5qYXZhc2NyaXB0KTsKfX0pO0VsZW1lbnQuUHJvcGVydGllcy5sb2FkPXtzZXQ6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5nZXQoImxvYWQiKS5jYW5jZWwoKTtiLnNldE9wdGlvbnMoYSk7cmV0dXJuIHRoaXM7fSxnZXQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnJldHJpZXZlKCJsb2FkIik7aWYoIWEpe2E9bmV3IFJlcXVlc3QuSFRNTCh7ZGF0YTp0aGlzLGxpbms6ImNhbmNlbCIsdXBkYXRlOnRoaXMsbWV0aG9kOiJnZXQifSk7CnRoaXMuc3RvcmUoImxvYWQiLGEpO31yZXR1cm4gYTt9fTtFbGVtZW50LmltcGxlbWVudCh7bG9hZDpmdW5jdGlvbigpe3RoaXMuZ2V0KCJsb2FkIikuc2VuZChBcnJheS5saW5rKGFyZ3VtZW50cyx7ZGF0YTpUeXBlLmlzT2JqZWN0LHVybDpUeXBlLmlzU3RyaW5nfSkpOwpyZXR1cm4gdGhpczt9fSk7aWYodHlwZW9mIEpTT049PSJ1bmRlZmluZWQiKXt0aGlzLkpTT049e307fShmdW5jdGlvbigpe3ZhciBzcGVjaWFsPXsiXGIiOiJcXGIiLCJcdCI6IlxcdCIsIlxuIjoiXFxuIiwiXGYiOiJcXGYiLCJcciI6IlxcciIsJyInOidcXCInLCJcXCI6IlxcXFwifTsKdmFyIGVzY2FwZT1mdW5jdGlvbihjaHIpe3JldHVybiBzcGVjaWFsW2Nocl18fCJcXHUiKygiMDAwMCIrY2hyLmNoYXJDb2RlQXQoMCkudG9TdHJpbmcoMTYpKS5zbGljZSgtNCk7fTtKU09OLnZhbGlkYXRlPWZ1bmN0aW9uKHN0cmluZyl7c3RyaW5nPXN0cmluZy5yZXBsYWNlKC9cXCg/OlsiXFxcL2JmbnJ0XXx1WzAtOWEtZkEtRl17NH0pL2csIkAiKS5yZXBsYWNlKC8iW14iXFxcblxyXSoifHRydWV8ZmFsc2V8bnVsbHwtP1xkKyg/OlwuXGQqKT8oPzpbZUVdWytcLV0/XGQrKT8vZywiXSIpLnJlcGxhY2UoLyg/Ol58OnwsKSg/OlxzKlxbKSsvZywiIik7CnJldHVybigvXltcXSw6e31cc10qJC8pLnRlc3Qoc3RyaW5nKTt9O0pTT04uZW5jb2RlPUpTT04uc3RyaW5naWZ5P2Z1bmN0aW9uKG9iail7cmV0dXJuIEpTT04uc3RyaW5naWZ5KG9iaik7fTpmdW5jdGlvbihvYmope2lmKG9iaiYmb2JqLnRvSlNPTil7b2JqPW9iai50b0pTT04oKTsKfXN3aXRjaCh0eXBlT2Yob2JqKSl7Y2FzZSJzdHJpbmciOnJldHVybiciJytvYmoucmVwbGFjZSgvW1x4MDAtXHgxZlxcIl0vZyxlc2NhcGUpKyciJztjYXNlImFycmF5IjpyZXR1cm4iWyIrb2JqLm1hcChKU09OLmVuY29kZSkuY2xlYW4oKSsiXSI7Y2FzZSJvYmplY3QiOmNhc2UiaGFzaCI6dmFyIHN0cmluZz1bXTsKT2JqZWN0LmVhY2gob2JqLGZ1bmN0aW9uKHZhbHVlLGtleSl7dmFyIGpzb249SlNPTi5lbmNvZGUodmFsdWUpO2lmKGpzb24pe3N0cmluZy5wdXNoKEpTT04uZW5jb2RlKGtleSkrIjoiK2pzb24pO319KTtyZXR1cm4ieyIrc3RyaW5nKyJ9IjtjYXNlIm51bWJlciI6Y2FzZSJib29sZWFuIjpyZXR1cm4iIitvYmo7CmNhc2UibnVsbCI6cmV0dXJuIm51bGwiO31yZXR1cm4gbnVsbDt9O0pTT04uZGVjb2RlPWZ1bmN0aW9uKHN0cmluZyxzZWN1cmUpe2lmKCFzdHJpbmd8fHR5cGVPZihzdHJpbmcpIT0ic3RyaW5nIil7cmV0dXJuIG51bGw7fWlmKHNlY3VyZXx8SlNPTi5zZWN1cmUpe2lmKEpTT04ucGFyc2Upe3JldHVybiBKU09OLnBhcnNlKHN0cmluZyk7Cn1pZighSlNPTi52YWxpZGF0ZShzdHJpbmcpKXt0aHJvdyBuZXcgRXJyb3IoIkpTT04gY291bGQgbm90IGRlY29kZSB0aGUgaW5wdXQ7IHNlY3VyaXR5IGlzIGVuYWJsZWQgYW5kIHRoZSB2YWx1ZSBpcyBub3Qgc2VjdXJlLiIpO319cmV0dXJuIGV2YWwoIigiK3N0cmluZysiKSIpOwp9O30pKCk7UmVxdWVzdC5KU09OPW5ldyBDbGFzcyh7RXh0ZW5kczpSZXF1ZXN0LG9wdGlvbnM6e3NlY3VyZTp0cnVlfSxpbml0aWFsaXplOmZ1bmN0aW9uKGEpe3RoaXMucGFyZW50KGEpO09iamVjdC5hcHBlbmQodGhpcy5oZWFkZXJzLHtBY2NlcHQ6ImFwcGxpY2F0aW9uL2pzb24iLCJYLVJlcXVlc3QiOiJKU09OIn0pOwp9LHN1Y2Nlc3M6ZnVuY3Rpb24oYyl7dmFyIGI7dHJ5e2I9dGhpcy5yZXNwb25zZS5qc29uPUpTT04uZGVjb2RlKGMsdGhpcy5vcHRpb25zLnNlY3VyZSk7fWNhdGNoKGEpe3RoaXMuZmlyZUV2ZW50KCJlcnJvciIsW2MsYV0pO3JldHVybjt9aWYoYj09bnVsbCl7dGhpcy5vbkZhaWx1cmUoKTsKfWVsc2V7dGhpcy5vblN1Y2Nlc3MoYixjKTt9fX0pO3ZhciBDb29raWU9bmV3IENsYXNzKHtJbXBsZW1lbnRzOk9wdGlvbnMsb3B0aW9uczp7cGF0aDoiLyIsZG9tYWluOmZhbHNlLGR1cmF0aW9uOmZhbHNlLHNlY3VyZTpmYWxzZSxkb2N1bWVudDpkb2N1bWVudCxlbmNvZGU6dHJ1ZX0saW5pdGlhbGl6ZTpmdW5jdGlvbihiLGEpe3RoaXMua2V5PWI7CnRoaXMuc2V0T3B0aW9ucyhhKTt9LHdyaXRlOmZ1bmN0aW9uKGIpe2lmKHRoaXMub3B0aW9ucy5lbmNvZGUpe2I9ZW5jb2RlVVJJQ29tcG9uZW50KGIpO31pZih0aGlzLm9wdGlvbnMuZG9tYWluKXtiKz0iOyBkb21haW49Iit0aGlzLm9wdGlvbnMuZG9tYWluO31pZih0aGlzLm9wdGlvbnMucGF0aCl7Yis9IjsgcGF0aD0iK3RoaXMub3B0aW9ucy5wYXRoOwp9aWYodGhpcy5vcHRpb25zLmR1cmF0aW9uKXt2YXIgYT1uZXcgRGF0ZSgpO2Euc2V0VGltZShhLmdldFRpbWUoKSt0aGlzLm9wdGlvbnMuZHVyYXRpb24qMjQqNjAqNjAqMTAwMCk7Yis9IjsgZXhwaXJlcz0iK2EudG9HTVRTdHJpbmcoKTt9aWYodGhpcy5vcHRpb25zLnNlY3VyZSl7Yis9Ijsgc2VjdXJlIjsKfXRoaXMub3B0aW9ucy5kb2N1bWVudC5jb29raWU9dGhpcy5rZXkrIj0iK2I7cmV0dXJuIHRoaXM7fSxyZWFkOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5vcHRpb25zLmRvY3VtZW50LmNvb2tpZS5tYXRjaCgiKD86Xnw7KVxccyoiK3RoaXMua2V5LmVzY2FwZVJlZ0V4cCgpKyI9KFteO10qKSIpOwpyZXR1cm4oYSk/ZGVjb2RlVVJJQ29tcG9uZW50KGFbMV0pOm51bGw7fSxkaXNwb3NlOmZ1bmN0aW9uKCl7bmV3IENvb2tpZSh0aGlzLmtleSxPYmplY3QubWVyZ2Uoe30sdGhpcy5vcHRpb25zLHtkdXJhdGlvbjotMX0pKS53cml0ZSgiIik7cmV0dXJuIHRoaXM7fX0pOwpDb29raWUud3JpdGU9ZnVuY3Rpb24oYixjLGEpe3JldHVybiBuZXcgQ29va2llKGIsYSkud3JpdGUoYyk7fTtDb29raWUucmVhZD1mdW5jdGlvbihhKXtyZXR1cm4gbmV3IENvb2tpZShhKS5yZWFkKCk7fTtDb29raWUuZGlzcG9zZT1mdW5jdGlvbihiLGEpe3JldHVybiBuZXcgQ29va2llKGIsYSkuZGlzcG9zZSgpOwp9OyhmdW5jdGlvbihpLGspe3ZhciBsLGYsZT1bXSxjLGIsZD1rLmNyZWF0ZUVsZW1lbnQoImRpdiIpO3ZhciBnPWZ1bmN0aW9uKCl7Y2xlYXJUaW1lb3V0KGIpO2lmKGwpe3JldHVybjt9QnJvd3Nlci5sb2FkZWQ9bD10cnVlO2sucmVtb3ZlTGlzdGVuZXIoIkRPTUNvbnRlbnRMb2FkZWQiLGcpLnJlbW92ZUxpc3RlbmVyKCJyZWFkeXN0YXRlY2hhbmdlIixhKTsKay5maXJlRXZlbnQoImRvbXJlYWR5Iik7aS5maXJlRXZlbnQoImRvbXJlYWR5Iik7fTt2YXIgYT1mdW5jdGlvbigpe2Zvcih2YXIgbT1lLmxlbmd0aDttLS07KXtpZihlW21dKCkpe2coKTtyZXR1cm4gdHJ1ZTt9fXJldHVybiBmYWxzZTt9O3ZhciBqPWZ1bmN0aW9uKCl7Y2xlYXJUaW1lb3V0KGIpOwppZighYSgpKXtiPXNldFRpbWVvdXQoaiwxMCk7fX07ay5hZGRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsZyk7dmFyIGg9ZnVuY3Rpb24oKXt0cnl7ZC5kb1Njcm9sbCgpO3JldHVybiB0cnVlO31jYXRjaChtKXt9cmV0dXJuIGZhbHNlO307aWYoZC5kb1Njcm9sbCYmIWgoKSl7ZS5wdXNoKGgpOwpjPXRydWU7fWlmKGsucmVhZHlTdGF0ZSl7ZS5wdXNoKGZ1bmN0aW9uKCl7dmFyIG09ay5yZWFkeVN0YXRlO3JldHVybihtPT0ibG9hZGVkInx8bT09ImNvbXBsZXRlIik7fSk7fWlmKCJvbnJlYWR5c3RhdGVjaGFuZ2UiIGluIGspe2suYWRkTGlzdGVuZXIoInJlYWR5c3RhdGVjaGFuZ2UiLGEpOwp9ZWxzZXtjPXRydWU7fWlmKGMpe2ooKTt9RWxlbWVudC5FdmVudHMuZG9tcmVhZHk9e29uQWRkOmZ1bmN0aW9uKG0pe2lmKGwpe20uY2FsbCh0aGlzKTt9fX07RWxlbWVudC5FdmVudHMubG9hZD17YmFzZToibG9hZCIsb25BZGQ6ZnVuY3Rpb24obSl7aWYoZiYmdGhpcz09aSl7bS5jYWxsKHRoaXMpOwp9fSxjb25kaXRpb246ZnVuY3Rpb24oKXtpZih0aGlzPT1pKXtnKCk7ZGVsZXRlIEVsZW1lbnQuRXZlbnRzLmxvYWQ7fXJldHVybiB0cnVlO319O2kuYWRkRXZlbnQoImxvYWQiLGZ1bmN0aW9uKCl7Zj10cnVlO30pO30pKHdpbmRvdyxkb2N1bWVudCk7KGZ1bmN0aW9uKCl7dmFyIFN3aWZmPXRoaXMuU3dpZmY9bmV3IENsYXNzKHtJbXBsZW1lbnRzOk9wdGlvbnMsb3B0aW9uczp7aWQ6bnVsbCxoZWlnaHQ6MSx3aWR0aDoxLGNvbnRhaW5lcjpudWxsLHByb3BlcnRpZXM6e30scGFyYW1zOntxdWFsaXR5OiJoaWdoIixhbGxvd1NjcmlwdEFjY2VzczoiYWx3YXlzIix3TW9kZToid2luZG93Iixzd0xpdmVDb25uZWN0OnRydWV9LGNhbGxCYWNrczp7fSx2YXJzOnt9fSx0b0VsZW1lbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vYmplY3Q7Cn0saW5pdGlhbGl6ZTpmdW5jdGlvbihwYXRoLG9wdGlvbnMpe3RoaXMuaW5zdGFuY2U9IlN3aWZmXyIrU3RyaW5nLnVuaXF1ZUlEKCk7dGhpcy5zZXRPcHRpb25zKG9wdGlvbnMpO29wdGlvbnM9dGhpcy5vcHRpb25zO3ZhciBpZD10aGlzLmlkPW9wdGlvbnMuaWR8fHRoaXMuaW5zdGFuY2U7CnZhciBjb250YWluZXI9ZG9jdW1lbnQuaWQob3B0aW9ucy5jb250YWluZXIpO1N3aWZmLkNhbGxCYWNrc1t0aGlzLmluc3RhbmNlXT17fTt2YXIgcGFyYW1zPW9wdGlvbnMucGFyYW1zLHZhcnM9b3B0aW9ucy52YXJzLGNhbGxCYWNrcz1vcHRpb25zLmNhbGxCYWNrczsKdmFyIHByb3BlcnRpZXM9T2JqZWN0LmFwcGVuZCh7aGVpZ2h0Om9wdGlvbnMuaGVpZ2h0LHdpZHRoOm9wdGlvbnMud2lkdGh9LG9wdGlvbnMucHJvcGVydGllcyk7dmFyIHNlbGY9dGhpcztmb3IodmFyIGNhbGxCYWNrIGluIGNhbGxCYWNrcyl7U3dpZmYuQ2FsbEJhY2tzW3RoaXMuaW5zdGFuY2VdW2NhbGxCYWNrXT0oZnVuY3Rpb24ob3B0aW9uKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gb3B0aW9uLmFwcGx5KHNlbGYub2JqZWN0LGFyZ3VtZW50cyk7Cn07fSkoY2FsbEJhY2tzW2NhbGxCYWNrXSk7dmFyc1tjYWxsQmFja109IlN3aWZmLkNhbGxCYWNrcy4iK3RoaXMuaW5zdGFuY2UrIi4iK2NhbGxCYWNrO31wYXJhbXMuZmxhc2hWYXJzPU9iamVjdC50b1F1ZXJ5U3RyaW5nKHZhcnMpO2lmKEJyb3dzZXIuaWUpe3Byb3BlcnRpZXMuY2xhc3NpZD0iY2xzaWQ6RDI3Q0RCNkUtQUU2RC0xMWNmLTk2QjgtNDQ0NTUzNTQwMDAwIjsKcGFyYW1zLm1vdmllPXBhdGg7fWVsc2V7cHJvcGVydGllcy50eXBlPSJhcHBsaWNhdGlvbi94LXNob2Nrd2F2ZS1mbGFzaCI7fXByb3BlcnRpZXMuZGF0YT1wYXRoO3ZhciBidWlsZD0nPG9iamVjdCBpZD0iJytpZCsnIic7Zm9yKHZhciBwcm9wZXJ0eSBpbiBwcm9wZXJ0aWVzKXtidWlsZCs9IiAiK3Byb3BlcnR5Kyc9IicrcHJvcGVydGllc1twcm9wZXJ0eV0rJyInOwp9YnVpbGQrPSI+Ijtmb3IodmFyIHBhcmFtIGluIHBhcmFtcyl7aWYocGFyYW1zW3BhcmFtXSl7YnVpbGQrPSc8cGFyYW0gbmFtZT0iJytwYXJhbSsnIiB2YWx1ZT0iJytwYXJhbXNbcGFyYW1dKyciIC8+Jzt9fWJ1aWxkKz0iPC9vYmplY3Q+Ijt0aGlzLm9iamVjdD0oKGNvbnRhaW5lcik/Y29udGFpbmVyLmVtcHR5KCk6bmV3IEVsZW1lbnQoImRpdiIpKS5zZXQoImh0bWwiLGJ1aWxkKS5maXJzdENoaWxkOwp9LHJlcGxhY2VzOmZ1bmN0aW9uKGVsZW1lbnQpe2VsZW1lbnQ9ZG9jdW1lbnQuaWQoZWxlbWVudCx0cnVlKTtlbGVtZW50LnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKHRoaXMudG9FbGVtZW50KCksZWxlbWVudCk7cmV0dXJuIHRoaXM7fSxpbmplY3Q6ZnVuY3Rpb24oZWxlbWVudCl7ZG9jdW1lbnQuaWQoZWxlbWVudCx0cnVlKS5hcHBlbmRDaGlsZCh0aGlzLnRvRWxlbWVudCgpKTsKcmV0dXJuIHRoaXM7fSxyZW1vdGU6ZnVuY3Rpb24oKXtyZXR1cm4gU3dpZmYucmVtb3RlLmFwcGx5KFN3aWZmLFt0aGlzLnRvRWxlbWVudCgpXS5hcHBlbmQoYXJndW1lbnRzKSk7fX0pO1N3aWZmLkNhbGxCYWNrcz17fTtTd2lmZi5yZW1vdGU9ZnVuY3Rpb24ob2JqLGZuKXt2YXIgcnM9b2JqLkNhbGxGdW5jdGlvbignPGludm9rZSBuYW1lPSInK2ZuKyciIHJldHVybnR5cGU9ImphdmFzY3JpcHQiPicrX19mbGFzaF9fYXJndW1lbnRzVG9YTUwoYXJndW1lbnRzLDIpKyI8L2ludm9rZT4iKTsKcmV0dXJuIGV2YWwocnMpO307fSkoKTs=",
                "headers": {
                    "Accept-Ranges": "bytes",
                    "Last-Modified": "Sat, 08 Nov 2014 03:55:00 GMT",
                    "Content-Length": "82619",
                    "Date": "Sat, 08 Nov 2014 03:55:41 GMT",
                    "Content-Type": "application/javascript"
                },
                "cookies": [],
                "mimeType": "script",
                "host": "localhost",
                "protocol": "http",
                "port": 9999,
                "inScope": false,
                "toolFlag": 16962,
                "referenceID": 0,
                "messageType": "response"
            },
            "messageType": "requestResponse"
        }
    ],
    "inScope": true,
    "messageType": "scanIssue"
}