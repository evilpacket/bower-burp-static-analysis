{
    "url": "http://localhost:9999/RaYell/openui5-sdk/resources/sap-ui-core-all.js",
    "host": "localhost",
    "port": 9999,
    "protocol": "http",
    "name": "Link manipulation (DOM-based)",
    "issueType": 5246976,
    "severity": "Low",
    "confidence": "Firm",
    "issueBackground": "DOM-based link manipulation vulnerabilities arise when a client-side script within an application's response reads data from a controllable part of the DOM (for example, the URL), and writes this to a navigation target within the current page, such as a clickable link or the submission URL of a form. An attacker may be able to use the vulnerability to construct a URL which, if visited by another application user, will modify the target of links within the response. An attacker may be able to leverage this to perform various attacks, including:<ul><li>Causing the user to redirect to an arbitrary external URL, to facilitate a phishing attack.</li><li>Causing the user to submit sensitive form data to a server controlled by the attacker.</li><li>Causing the user to perform an unintended action within the application, by changing the file or query string associated with a link.</li><li>Bypassing browser anti-XSS defenses by injecting on-site links containing XSS exploits, since browser anti-XSS defenses typically do not operate on on-site links.</li></ul>",
    "remediationBackground": "Static analysis of code to identify vulnerabilities of this kind may lead to false positives that are not actually exploitable. You should review the highlighted code and related execution paths to determine whether the application is indeed vulnerable, or whether mitigations are in place that would prevent exploitation.<br><br>The most effective way to avoid DOM-based link manipulation vulnerabilities is not to dynamically set the target URLs of links or forms using data that originated from any untrusted source. If the desired functionality of the application means that this behavior is unavoidable, then defenses must be implemented within the client-side code to prevent malicious data from introducing an arbitrary URL as a link target. In general, this is best achieved by using a whitelist of URLs that are permitted link targets, and strictly validating the target against this list before setting the link target.",
    "issueDetail": "The application may be vulnerable to DOM-based link manipulation. Data is read from <b>location.pathname</b> and written to <b>the 'href' property of a DOM element</b> via the following statement:<ul><li>i[0].href=v||location.pathname;</li></ul>",
    "requestResponses": [
        {
            "request": {
                "host": "localhost",
                "port": 9999,
                "protocol": "http",
                "url": "http://localhost:9999/RaYell/openui5-sdk/resources/sap-ui-core-all.js",
                "path": "/RaYell/openui5-sdk/resources/sap-ui-core-all.js",
                "httpVersion": "HTTP/1.1",
                "method": "GET",
                "headers": {
                    "Host": "localhost:9999"
                },
                "body": "",
                "raw": "R0VUIC9SYVllbGwvb3BlbnVpNS1zZGsvcmVzb3VyY2VzL3NhcC11aS1jb3JlLWFsbC5qcyBIVFRQLzEuMQ0KSG9zdDogbG9jYWxob3N0Ojk5OTkNCg0K",
                "inScope": true,
                "toolFlag": 16962,
                "referenceID": 0,
                "messageType": "request"
            },
            "response": {
                "statusCode": 200,
                "raw": "SFRUUC8xLjEgMjAwIE9LDQpDb250ZW50LUxlbmd0aDogMTA4ODM0OQ0KQWNjZXB0LVJhbmdlczogYnl0ZXMNCkNvbnRlbnQtVHlwZTogYXBwbGljYXRpb24vamF2YXNjcmlwdA0KRGF0ZTogRnJpLCAwNyBOb3YgMjAxNCAyMToyNzowNCBHTVQNCkxhc3QtTW9kaWZpZWQ6IEZyaSwgMDcgTm92IDIwMTQgMjE6MjY6NDYgR01UDQoNCndpbmRvd1sic2FwLXVpLW9wdGltaXplZCJdID0gdHJ1ZTsKdHJ5IHsKLyohDQogKiBTQVAgVUkgZGV2ZWxvcG1lbnQgdG9vbGtpdCBmb3IgSFRNTDUgKFNBUFVJNS9PcGVuVUk1KQ0KICogKGMpIENvcHlyaWdodCAyMDA5LTIwMTQgU0FQIFNFIG9yIGFuIFNBUCBhZmZpbGlhdGUgY29tcGFueS4gDQogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wIC0gc2VlIExJQ0VOU0UudHh0Lg0KICovDQppZih3aW5kb3cualF1ZXJ5JiZ3aW5kb3cualF1ZXJ5LnNhcCYmd2luZG93LmpRdWVyeS5zYXAuZGVjbGFyZSl7d2luZG93LmpRdWVyeS5zYXAuZGVjbGFyZSgic2FwLnVpLkRldmljZSIsZmFsc2UpfWlmKHR5cGVvZiB3aW5kb3cuc2FwIT09Im9iamVjdCImJnR5cGVvZiB3aW5kb3cuc2FwIT09ImZ1bmN0aW9uIil7d2luZG93LnNhcD17fX1pZih0eXBlb2Ygd2luZG93LnNhcC51aSE9PSJvYmplY3QiKXt3aW5kb3cuc2FwLnVpPXt9fShmdW5jdGlvbigpe2lmKHR5cGVvZiB3aW5kb3cuc2FwLnVpLkRldmljZT09PSJvYmplY3QifHx0eXBlb2Ygd2luZG93LnNhcC51aS5EZXZpY2U9PT0iZnVuY3Rpb24iKXt2YXIgYz0iMS4yNC4yIjt3aW5kb3cuc2FwLnVpLkRldmljZS5fY2hlY2tBUElWZXJzaW9uKGMpO3JldHVybn12YXIgZD17fTtmdW5jdGlvbiBwKGksdyl7cmV0dXJuKCIwMDAiK1N0cmluZyhpKSkuc2xpY2UoLXcpfXZhciBGPTAsRT0xLFc9MixJPTMsRD00LFQ9NTt2YXIgZz1mdW5jdGlvbigpe3RoaXMuZGVmYXVsdENvbXBvbmVudD0nREVWSUNFJzt0aGlzLnNXaW5kb3dOYW1lPSh3aW5kb3cudG9wPT13aW5kb3cpPyIiOiJbIit3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUuc3BsaXQoJy8nKS5zbGljZSgtMSlbMF0rIl0gIjt0aGlzLmxvZz1mdW5jdGlvbihpLHMsYSl7YT1hfHx0aGlzLmRlZmF1bHRDb21wb25lbnR8fCcnO3ZhciBiPW5ldyBEYXRlKCksZT17dGltZTpwKGIuZ2V0SG91cnMoKSwyKSsiOiIrcChiLmdldE1pbnV0ZXMoKSwyKSsiOiIrcChiLmdldFNlY29uZHMoKSwyKSxkYXRlOnAoYi5nZXRGdWxsWWVhcigpLDQpKyItIitwKGIuZ2V0TW9udGgoKSsxLDIpKyItIitwKGIuZ2V0RGF0ZSgpLDIpLHRpbWVzdGFtcDpiLmdldFRpbWUoKSxsZXZlbDppLG1lc3NhZ2U6c3x8IiIsY29tcG9uZW50OmF8fCIifTtpZih3aW5kb3cuY29uc29sZSl7dmFyIGY9ZS5kYXRlKyIgIitlLnRpbWUrIiAiK3RoaXMuc1dpbmRvd05hbWUrZS5tZXNzYWdlKyIgLSAiK2UuY29tcG9uZW50O3N3aXRjaChpKXtjYXNlIEY6Y2FzZSBFOmNvbnNvbGUuZXJyb3IoZik7YnJlYWs7Y2FzZSBXOmNvbnNvbGUud2FybihmKTticmVhaztjYXNlIEk6Y29uc29sZS5pbmZvP2NvbnNvbGUuaW5mbyhmKTpjb25zb2xlLmxvZyhmKTticmVhaztjYXNlIEQ6Y29uc29sZS5kZWJ1Zz9jb25zb2xlLmRlYnVnKGYpOmNvbnNvbGUubG9nKGYpO2JyZWFrO2Nhc2UgVDpjb25zb2xlLnRyYWNlP2NvbnNvbGUudHJhY2UoZik6Y29uc29sZS5sb2coZik7YnJlYWt9fXJldHVybiBlfX07dmFyIGw9bmV3IGcoKTtsLmxvZyhJLCJEZXZpY2UgQVBJIGxvZ2dpbmcgaW5pdGlhbGl6ZWQiKTtkLl9jaGVja0FQSVZlcnNpb249ZnVuY3Rpb24ocyl7dmFyIHY9IjEuMjQuMiI7aWYodiE9cyl7bC5sb2coVywiRGV2aWNlIEFQSSB2ZXJzaW9uIGRpZmZlcnM6ICIrdisiIDwtPiAiK3MpfX07dmFyIGg9e307ZnVuY3Rpb24gaihlLGYsYSl7aWYoIWhbZV0pe2hbZV09W119aFtlXS5wdXNoKHtvTGlzdGVuZXI6YSxmRnVuY3Rpb246Zn0pfTtmdW5jdGlvbiBrKGUsZixhKXt2YXIgYj1oW2VdO2lmKCFiKXtyZXR1cm4gdGhpc31mb3IodmFyIGk9MCxxPWIubGVuZ3RoO2k8cTtpKyspe2lmKGJbaV0uZkZ1bmN0aW9uPT09ZiYmYltpXS5vTGlzdGVuZXI9PT1hKXtiLnNwbGljZShpLDEpO2JyZWFrfX1pZihiLmxlbmd0aD09MCl7ZGVsZXRlIGhbZV19fTtmdW5jdGlvbiBuKGUsYSl7dmFyIGI9aFtlXSxmO2lmKGIpe2I9Yi5zbGljZSgpO2Zvcih2YXIgaT0wLHE9Yi5sZW5ndGg7aTxxO2krKyl7Zj1iW2ldO2YuZkZ1bmN0aW9uLmNhbGwoZi5vTGlzdGVuZXJ8fHdpbmRvdyxhKX19fTt2YXIgTz17IldJTkRPV1MiOiJ3aW4iLCJNQUNJTlRPU0giOiJtYWMiLCJMSU5VWCI6ImxpbnV4IiwiSU9TIjoiaU9TIiwiQU5EUk9JRCI6IkFuZHJvaWQiLCJCTEFDS0JFUlJZIjoiYmIiLCJXSU5ET1dTX1BIT05FIjoid2lucGhvbmUifTtmdW5jdGlvbiBvKGEpe2Z1bmN0aW9uIGIoKXt2YXIgcz1uYXZpZ2F0b3IucGxhdGZvcm07aWYocy5pbmRleE9mKCJXaW4iKSE9LTEpe3ZhciB0PS93aW5kb3dzIE5UIDYuKFxkKS9pO3ZhciBmPWEubWF0Y2godCk7dmFyIHY9IiI7aWYoZil7aWYoZlsxXT09MSl7dj0iNyJ9ZWxzZSBpZihmWzFdPjEpe3Y9IjgifX1yZXR1cm57Im5hbWUiOk8uV0lORE9XUywidmVyc2lvblN0ciI6dn19ZWxzZSBpZihzLmluZGV4T2YoIk1hYyIpIT0tMSl7cmV0dXJueyJuYW1lIjpPLk1BQ0lOVE9TSCwidmVyc2lvblN0ciI6IiJ9fWVsc2UgaWYocy5pbmRleE9mKCJMaW51eCIpIT0tMSl7cmV0dXJueyJuYW1lIjpPLkxJTlVYLCJ2ZXJzaW9uU3RyIjoiIn19bC5sb2coSSwiT1MgZGV0ZWN0aW9uIHJldHVybmVkIG5vIHJlc3VsdCIpO3JldHVybiBudWxsfWE9YXx8bmF2aWdhdG9yLnVzZXJBZ2VudDt2YXIgZT0vXCgoW2EtekEtWiBdKyk7XHMoPzpbVV0/WztdPykoW1xEXSspKCg/OltcZC5fXSopKSg/Oi4qW1wpXVteXGRdKikoW1xkLl0qKVxzLzt2YXIgZj1hLm1hdGNoKGUpO2lmKGYpe3ZhciBpPS9pUGhvbmV8aVBhZHxpUG9kLzt2YXIgcT0vUGxheUJvb2t8QmxhY2tCZXJyeS87aWYoZlswXS5tYXRjaChpKSl7ZlszXT1mWzNdLnJlcGxhY2UoL18vZywiLiIpO3JldHVybih7Im5hbWUiOk8uSU9TLCJ2ZXJzaW9uU3RyIjpmWzNdfSl9ZWxzZSBpZihmWzJdLm1hdGNoKC9BbmRyb2lkLykpe2ZbMl09ZlsyXS5yZXBsYWNlKC9ccy9nLCIiKTtyZXR1cm4oeyJuYW1lIjpPLkFORFJPSUQsInZlcnNpb25TdHIiOmZbM119KX1lbHNlIGlmKGZbMF0ubWF0Y2gocSkpe3JldHVybih7Im5hbWUiOk8uQkxBQ0tCRVJSWSwidmVyc2lvblN0ciI6Zls0XX0pfWVsc2V7cmV0dXJuIGIoKX19ZWxzZSBpZihhLmluZGV4T2YoIihCQjEwOyIpPjApe2U9L1xzVmVyc2lvblwvKFtcZC5dKylccy87Zj1hLm1hdGNoKGUpO2lmKGYpe3JldHVybnsibmFtZSI6Ty5CTEFDS0JFUlJZLCJ2ZXJzaW9uU3RyIjpmWzFdfX1lbHNle3JldHVybnsibmFtZSI6Ty5CTEFDS0JFUlJZLCJ2ZXJzaW9uU3RyIjonMTAnfX19ZWxzZXtlPS9XaW5kb3dzIFBob25lICg/Ok9TICk/KFtcZC5dKikvO2Y9YS5tYXRjaChlKTtpZihmKXtyZXR1cm4oeyJuYW1lIjpPLldJTkRPV1NfUEhPTkUsInZlcnNpb25TdHIiOmZbMV19KX1lbHNle3JldHVybiBiKCl9fX07ZnVuY3Rpb24gcigpe2Qub3M9bygpfHx7fTtkLm9zLk9TPU87ZC5vcy52ZXJzaW9uPWQub3MudmVyc2lvblN0cj9wYXJzZUZsb2F0KGQub3MudmVyc2lvblN0cik6LTE7aWYoZC5vcy5uYW1lKXtmb3IodmFyIGIgaW4gTyl7aWYoT1tiXT09PWQub3MubmFtZSl7ZC5vc1tiLnRvTG93ZXJDYXNlKCldPXRydWV9fX19cigpO3ZhciBCPXsiSU5URVJORVRfRVhQTE9SRVIiOiJpZSIsIkZJUkVGT1giOiJmZiIsIkNIUk9NRSI6ImNyIiwiU0FGQVJJIjoic2YiLCJBTkRST0lEIjoiYW4ifTt2YXIgdT1uYXZpZ2F0b3IudXNlckFnZW50Ow0KLyohDQoJICogVGFrZW4gZnJvbSBqUXVlcnkgSmF2YVNjcmlwdCBMaWJyYXJ5IHYxLjcuMQ0KCSAqIGh0dHA6Ly9qcXVlcnkuY29tLw0KCSAqDQoJICogQ29weXJpZ2h0IDIwMTEsIEpvaG4gUmVzaWcNCgkgKiBEdWFsIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgb3IgR1BMIFZlcnNpb24gMiBsaWNlbnNlcy4NCgkgKiBodHRwOi8vanF1ZXJ5Lm9yZy9saWNlbnNlDQoJICoNCgkgKiBJbmNsdWRlcyBTaXp6bGUuanMNCgkgKiBodHRwOi8vc2l6emxlanMuY29tLw0KCSAqIENvcHlyaWdodCAyMDExLCBUaGUgRG9qbyBGb3VuZGF0aW9uDQoJICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCwgQlNELCBhbmQgR1BMIExpY2Vuc2VzLg0KCSAqDQoJICogRGF0ZTogTW9uIE5vdiAyMSAyMToxMTowMyAyMDExIC0wNTAwDQoJICovDQpmdW5jdGlvbiB5KGEpe3ZhciBiPShhfHx1KS50b0xvd2VyQ2FzZSgpO3ZhciBlPS8od2Via2l0KVsgXC9dKFtcdy5dKykvO3ZhciBmPS8ob3BlcmEpKD86Lip2ZXJzaW9uKT9bIFwvXShbXHcuXSspLzt2YXIgaT0vKG1zaWUpIChbXHcuXSspLzt2YXIgcT0vKHRyaWRlbnQpXC9bXHcuXSs7LipydjooW1x3Ll0rKS87dmFyIHM9Lyhtb3ppbGxhKSg/Oi4qPyBydjooW1x3Ll0rKSk/Lzt2YXIgVj1lLmV4ZWMoYil8fGYuZXhlYyhiKXx8aS5leGVjKGIpfHxxLmV4ZWMoYil8fGIuaW5kZXhPZigiY29tcGF0aWJsZSIpPDAmJnMuZXhlYyhiKXx8W107dmFyIHQ9e2Jyb3dzZXI6VlsxXXx8IiIsdmVyc2lvbjpWWzJdfHwiMCJ9O3RbdC5icm93c2VyXT10cnVlO3JldHVybiB0fTtmdW5jdGlvbiB6KGEpe3ZhciBiPXkoYSk7dmFyIGU9YXx8dTtpZihiLm1vemlsbGEpe2lmKGUubWF0Y2goL0ZpcmVmb3hcLyhcZCtcLlxkKykvKSl7dmFyIHY9cGFyc2VGbG9hdChSZWdFeHAuJDEpO3JldHVybntuYW1lOkIuRklSRUZPWCx2ZXJzaW9uU3RyOiIiK3YsdmVyc2lvbjp2LG1vemlsbGE6dHJ1ZSxtb2JpbGU6ZmFsc2V9fWVsc2V7cmV0dXJue21vYmlsZTppLnRlc3QoZSksbW96aWxsYTp0cnVlfX19ZWxzZSBpZihiLndlYmtpdCl7dmFyIGY9ZS50b0xvd2VyQ2FzZSgpLm1hdGNoKC93ZWJraXRbXC9dKFtcZC5dKykvKTtpZihmKXt2YXIgdz1mWzFdfXZhciBpPS9Nb2JpbGUvO2lmKGUubWF0Y2goL0Nocm9tZVwvKFxkK1wuXGQrKS5cZCsvKSl7dmFyIHY9cGFyc2VGbG9hdChSZWdFeHAuJDEpO3JldHVybntuYW1lOkIuQ0hST01FLHZlcnNpb25TdHI6IiIrdix2ZXJzaW9uOnYsbW9iaWxlOmkudGVzdChlKSx3ZWJraXQ6dHJ1ZSx3ZWJraXRWZXJzaW9uOnd9fWVsc2UgaWYoZS5tYXRjaCgvQW5kcm9pZCAuKyBWZXJzaW9uXC8oXGQrXC5cZCspLykpe3ZhciB2PXBhcnNlRmxvYXQoUmVnRXhwLiQxKTtyZXR1cm57bmFtZTpCLkFORFJPSUQsdmVyc2lvblN0cjoiIit2LHZlcnNpb246dixtb2JpbGU6aS50ZXN0KGUpLHdlYmtpdDp0cnVlLHdlYmtpdFZlcnNpb246d319ZWxzZXt2YXIgcT0vVmVyc2lvblwvKFxkK1wuXGQrKS4qU2FmYXJpLztpZihxLnRlc3QoZSkpe3ZhciB2PXBhcnNlRmxvYXQocS5leGVjKGUpWzFdKTtyZXR1cm57bmFtZTpCLlNBRkFSSSx2ZXJzaW9uU3RyOiIiK3YsdmVyc2lvbjp2LG1vYmlsZTppLnRlc3QoZSksd2Via2l0OnRydWV9fWVsc2V7cmV0dXJue21vYmlsZTppLnRlc3QoZSksd2Via2l0OnRydWUsd2Via2l0VmVyc2lvbjp3fX19fWVsc2UgaWYoYi5tc2llfHxiLnRyaWRlbnQpe3ZhciB2O2lmKGRvY3VtZW50LmRvY3VtZW50TW9kZSYmIWEpe2lmKGRvY3VtZW50LmRvY3VtZW50TW9kZT09PTcpe3Y9OC4wfWVsc2V7dj1wYXJzZUZsb2F0KGRvY3VtZW50LmRvY3VtZW50TW9kZSl9fWVsc2V7dj1wYXJzZUZsb2F0KGIudmVyc2lvbil9cmV0dXJue25hbWU6Qi5JTlRFUk5FVF9FWFBMT1JFUix2ZXJzaW9uU3RyOiIiK3YsdmVyc2lvbjp2LG1zaWU6dHJ1ZSxtb2JpbGU6ZmFsc2V9fXJldHVybntuYW1lOiIiLHZlcnNpb25TdHI6IiIsdmVyc2lvbjotMSxtb2JpbGU6ZmFsc2V9fTtkLl90ZXN0VXNlckFnZW50PXo7ZnVuY3Rpb24gQSgpe2QuYnJvd3Nlcj16KCk7ZC5icm93c2VyLkJST1dTRVI9QjtpZihkLmJyb3dzZXIubmFtZSl7Zm9yKHZhciBiIGluIEIpe2lmKEJbYl09PT1kLmJyb3dzZXIubmFtZSl7ZC5icm93c2VyW2IudG9Mb3dlckNhc2UoKV09dHJ1ZX19fX1BKCk7ZC5zdXBwb3J0PXt9O2Quc3VwcG9ydC50b3VjaD0hISgoJ29udG91Y2hzdGFydCdpbiB3aW5kb3cpfHx3aW5kb3cuRG9jdW1lbnRUb3VjaCYmZG9jdW1lbnQgaW5zdGFuY2VvZiB3aW5kb3cuRG9jdW1lbnRUb3VjaCk7ZC5zdXBwb3J0Lm1hdGNobWVkaWE9ISF3aW5kb3cubWF0Y2hNZWRpYTt2YXIgbT1kLnN1cHBvcnQubWF0Y2htZWRpYT93aW5kb3cubWF0Y2hNZWRpYSgic2NyZWVuIGFuZCAobWF4LXdpZHRoOjBweCkiKTpudWxsO2Quc3VwcG9ydC5tYXRjaG1lZGlhbGlzdGVuZXI9ISEobSYmbS5hZGRMaXN0ZW5lcik7aWYoZC5icm93c2VyLnNhZmFyaSYmZC5icm93c2VyLnZlcnNpb248Nil7ZC5zdXBwb3J0Lm1hdGNobWVkaWFsaXN0ZW5lcj1mYWxzZX1kLnN1cHBvcnQub3JpZW50YXRpb249ISEoIm9yaWVudGF0aW9uImluIHdpbmRvdyYmIm9ub3JpZW50YXRpb25jaGFuZ2UiaW4gd2luZG93KTtkLnN1cHBvcnQucmV0aW5hPSh3aW5kb3cucmV0aW5hfHx3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbz49Mik7ZC5zdXBwb3J0LndlYnNvY2tldD0oJ1dlYlNvY2tldCdpbiB3aW5kb3cpO2Quc3VwcG9ydC5pbnB1dD17fTtkLnN1cHBvcnQuaW5wdXQucGxhY2Vob2xkZXI9KCdwbGFjZWhvbGRlcidpbiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbnB1dCIpKTtkLm1lZGlhPXt9O3ZhciBSPXsiU0FQXzNTVEVQUyI6IjNTdGVwIiwiU0FQXzRTVEVQUyI6IjRTdGVwIiwiU0FQXzZTVEVQUyI6IjZTdGVwIiwiU0FQX1NUQU5EQVJEIjoiU3RkIn07ZC5tZWRpYS5SQU5HRVNFVFM9UjtkLm1lZGlhLl9wcmVkZWZpbmVkUmFuZ2VTZXRzPXt9O2QubWVkaWEuX3ByZWRlZmluZWRSYW5nZVNldHNbUi5TQVBfM1NURVBTXT17cG9pbnRzOls1MjAsOTYwXSx1bml0OiJweCIsbmFtZTpSLlNBUF8zU1RFUFMsbmFtZXM6WyJTIiwiTSIsIkwiXX07ZC5tZWRpYS5fcHJlZGVmaW5lZFJhbmdlU2V0c1tSLlNBUF80U1RFUFNdPXtwb2ludHM6WzUyMCw3NjAsOTYwXSx1bml0OiJweCIsbmFtZTpSLlNBUF80U1RFUFMsbmFtZXM6WyJTIiwiTSIsIkwiLCJYTCJdfTtkLm1lZGlhLl9wcmVkZWZpbmVkUmFuZ2VTZXRzW1IuU0FQXzZTVEVQU109e3BvaW50czpbMjQxLDQwMCw1NDEsNzY4LDk2MF0sdW5pdDoicHgiLG5hbWU6Ui5TQVBfNlNURVBTLG5hbWVzOlsiWFMiLCJTIiwiTSIsIkwiLCJYTCIsIlhYTCJdfTtkLm1lZGlhLl9wcmVkZWZpbmVkUmFuZ2VTZXRzW1IuU0FQX1NUQU5EQVJEXT17cG9pbnRzOls2MDAsMTAyNF0sdW5pdDoicHgiLG5hbWU6Ui5TQVBfU1RBTkRBUkQsbmFtZXM6WyJQaG9uZSIsIlRhYmxldCIsIkRlc2t0b3AiXX07dmFyIF89Ui5TQVBfU1RBTkRBUkQ7dmFyIEM9ZC5zdXBwb3J0Lm1hdGNobWVkaWFsaXN0ZW5lcj8wOjEwMDt2YXIgRz17fTt2YXIgSD1udWxsO2Z1bmN0aW9uIEooZix0LGEpe2E9YXx8InB4Ijt2YXIgcT0ic2NyZWVuIjtpZihmPjApe3E9cSsiIGFuZCAobWluLXdpZHRoOiIrZithKyIpIn1pZih0PjApe3E9cSsiIGFuZCAobWF4LXdpZHRoOiIrdCthKyIpIn1yZXR1cm4gcX07ZnVuY3Rpb24gSyhhKXtpZighZC5zdXBwb3J0Lm1hdGNobWVkaWFsaXN0ZW5lciYmSD09USgpWzBdKXtyZXR1cm59aWYoR1thXS50aW1lcil7Y2xlYXJUaW1lb3V0KEdbYV0udGltZXIpO0dbYV0udGltZXI9bnVsbH1HW2FdLnRpbWVyPXNldFRpbWVvdXQoZnVuY3Rpb24oKXt2YXIgYj1NKGEsZmFsc2UpO2lmKGIpe24oIm1lZGlhXyIrYSxiKX19LEMpfTtmdW5jdGlvbiBMKHMsaSl7dmFyIHE9R1tzXS5xdWVyaWVzW2ldO3ZhciBhPXtmcm9tOnEuZnJvbSx1bml0Okdbc10udW5pdH07aWYocS50bz49MCl7YS50bz1xLnRvfWlmKEdbc10ubmFtZXMpe2EubmFtZT1HW3NdLm5hbWVzW2ldfXJldHVybiBhfTtmdW5jdGlvbiBNKGEsYil7aWYoR1thXSl7dmFyIGU9R1thXS5xdWVyaWVzO3ZhciBmPW51bGw7Zm9yKHZhciBpPTAscz1lLmxlbmd0aDtpPHM7aSsrKXt2YXIgcT1lW2ldO2lmKChxIT1HW2FdLmN1cnJlbnRxdWVyeXx8YikmJmQubWVkaWEubWF0Y2hlcyhxLmZyb20scS50byxHW2FdLnVuaXQpKXtpZighYil7R1thXS5jdXJyZW50cXVlcnk9cX1pZighR1thXS5ub0NsYXNzZXMmJkdbYV0ubmFtZXMmJiFiKXtOKGEsR1thXS5uYW1lc1tpXSl9Zj1MKGEsaSl9fXJldHVybiBmfWwubG9nKFcsIk5vIHF1ZXJ5c2V0IHdpdGggbmFtZSAiK2ErIiBmb3VuZCIsJ0RFVklDRS5NRURJQScpO3JldHVybiBudWxsfTtmdW5jdGlvbiBOKHMsYSxiKXt2YXIgZT0ic2FwVWlNZWRpYS0iK3MrIi0iO1AoZSthLGIsZSl9O2Z1bmN0aW9uIFAocyxiLGEpe3ZhciBlPWRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtpZihlLmNsYXNzTmFtZS5sZW5ndGg9PTApe2lmKCFiKXtlLmNsYXNzTmFtZT1zfX1lbHNle3ZhciBmPWUuY2xhc3NOYW1lLnNwbGl0KCIgIik7dmFyIHE9IiI7Zm9yKHZhciBpPTA7aTxmLmxlbmd0aDtpKyspe2lmKChhJiZmW2ldLmluZGV4T2YoYSkhPTApfHwoIWEmJmZbaV0hPXMpKXtxPXErZltpXSsiICJ9fWlmKCFiKXtxPXErc31lLmNsYXNzTmFtZT1xfX07ZnVuY3Rpb24gUSgpe3JldHVybltkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGgsZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodF19O2Z1bmN0aW9uIFModixhKXtpZihhPT09ImVtInx8YT09PSJyZW0iKXt2YXIgcz13aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZXx8ZnVuY3Rpb24oZSl7cmV0dXJuIGUuY3VycmVudFN0eWxlfTt2YXIgeD1zKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCkuZm9udFNpemU7dmFyIGY9KHgmJnguaW5kZXhPZigicHgiKT49MCk/cGFyc2VGbG9hdCh4LDEwKToxNjtyZXR1cm4gdipmfXJldHVybiB2fTtmdW5jdGlvbiBVKGYsdCxlKXtmPVMoZixlKTt0PVModCxlKTt2YXIgdz1RKClbMF07dmFyIGE9ZjwwfHxmPD13O3ZhciBiPXQ8MHx8dzw9dDtyZXR1cm4gYSYmYn07ZnVuY3Rpb24gVihmLHQsYSl7dmFyIHE9SihmLHQsYSk7dmFyIG09d2luZG93Lm1hdGNoTWVkaWEocSk7cmV0dXJuIG0mJm0ubWF0Y2hlc307ZC5tZWRpYS5tYXRjaGVzPWQuc3VwcG9ydC5tYXRjaG1lZGlhP1Y6VTtkLm1lZGlhLmF0dGFjaEhhbmRsZXI9ZnVuY3Rpb24oZixhLHMpe3ZhciBiPXN8fF87aigibWVkaWFfIitiLGYsYSl9O2QubWVkaWEuZGV0YWNoSGFuZGxlcj1mdW5jdGlvbihmLGEscyl7dmFyIGI9c3x8XztrKCJtZWRpYV8iK2IsZixhKX07ZC5tZWRpYS5pbml0UmFuZ2VTZXQ9ZnVuY3Rpb24ocyxhLGIsZSxmKXt2YXIgdDtpZighcyl7dD1kLm1lZGlhLl9wcmVkZWZpbmVkUmFuZ2VTZXRzW19dfWVsc2UgaWYocyYmZC5tZWRpYS5fcHJlZGVmaW5lZFJhbmdlU2V0c1tzXSl7dD1kLm1lZGlhLl9wcmVkZWZpbmVkUmFuZ2VTZXRzW3NdfWVsc2V7dD17bmFtZTpzLHVuaXQ6KGJ8fCJweCIpLnRvTG93ZXJDYXNlKCkscG9pbnRzOmF8fFtdLG5hbWVzOmUsbm9DbGFzc2VzOiEhZn19aWYoZC5tZWRpYS5oYXNSYW5nZVNldCh0Lm5hbWUpKXtyZXR1cm47bC5sb2coSSwiUmFuZ2Ugc2V0ICIrdC5uYW1lKyIgaGFzZSBhbHJlYWR5IGJlZW4gaW5pdGlhbGl6ZWQiLCdERVZJQ0UuTUVESUEnKX1zPXQubmFtZTt0LnF1ZXJpZXM9W107dC50aW1lcj1udWxsO3QuY3VycmVudHF1ZXJ5PW51bGw7dC5saXN0ZW5lcj1mdW5jdGlvbigpe3JldHVybiBLKHMpfTt2YXIgdix3LHg7dmFyIHgxPXQucG9pbnRzO2Zvcih2YXIgaT0wLHkxPXgxLmxlbmd0aDtpPD15MTtpKyspe3Y9KGk9PTApPzA6eDFbaS0xXTt3PShpPT14MS5sZW5ndGgpPy0xOngxW2ldO3g9Sih2LHcsdC51bml0KTt0LnF1ZXJpZXMucHVzaCh7cXVlcnk6eCxmcm9tOnYsdG86d30pfTtpZih0Lm5hbWVzJiZ0Lm5hbWVzLmxlbmd0aCE9dC5xdWVyaWVzLmxlbmd0aCl7dC5uYW1lcz1udWxsfUdbdC5uYW1lXT10O2lmKGQuc3VwcG9ydC5tYXRjaG1lZGlhbGlzdGVuZXIpe3ZhciB6MT10LnF1ZXJpZXM7Zm9yKHZhciBpPTA7aTx6MS5sZW5ndGg7aSsrKXt2YXIgcT16MVtpXTtxLm1lZGlhPXdpbmRvdy5tYXRjaE1lZGlhKHEucXVlcnkpO3EubWVkaWEuYWRkTGlzdGVuZXIodC5saXN0ZW5lcil9fWVsc2V7aWYod2luZG93LmFkZEV2ZW50TGlzdGVuZXIpe3dpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJyZXNpemUiLHQubGlzdGVuZXIsZmFsc2UpO3dpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJvcmllbnRhdGlvbmNoYW5nZSIsdC5saXN0ZW5lcixmYWxzZSl9ZWxzZXt3aW5kb3cuYXR0YWNoRXZlbnQoIm9ucmVzaXplIix0Lmxpc3RlbmVyKX19dC5saXN0ZW5lcigpfTtkLm1lZGlhLmdldEN1cnJlbnRSYW5nZT1mdW5jdGlvbihzKXtpZighZC5tZWRpYS5oYXNSYW5nZVNldChzKSl7cmV0dXJuIG51bGx9cmV0dXJuIE0ocyx0cnVlKX07ZC5tZWRpYS5oYXNSYW5nZVNldD1mdW5jdGlvbihzKXtyZXR1cm4gcyYmISFHW3NdfTtkLm1lZGlhLnJlbW92ZVJhbmdlU2V0PWZ1bmN0aW9uKHMpe2lmKCFkLm1lZGlhLmhhc1JhbmdlU2V0KHMpKXtsLmxvZyhJLCJSYW5nZVNldCAiK3MrIiBub3QgZm91bmQsIHRodXMgY291bGQgbm90IGJlIHJlbW92ZWQuIiwnREVWSUNFLk1FRElBJyk7cmV0dXJufWZvcih2YXIgeCBpbiBSKXtpZihzPT09Ult4XSl7bC5sb2coVywiQ2Fubm90IHJlbW92ZSBkZWZhdWx0IHJhbmdlc2V0IC0gbm8gYWN0aW9uIHRha2VuLiIsJ0RFVklDRS5NRURJQScpO3JldHVybn19dmFyIGE9R1tzXTtpZihkLnN1cHBvcnQubWF0Y2htZWRpYWxpc3RlbmVyKXt2YXIgcT1hLnF1ZXJpZXM7Zm9yKHZhciBpPTA7aTxxLmxlbmd0aDtpKyspe3FbaV0ubWVkaWEucmVtb3ZlTGlzdGVuZXIoYS5saXN0ZW5lcil9fWVsc2V7aWYod2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIpe3dpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCJyZXNpemUiLGEubGlzdGVuZXIsZmFsc2UpO3dpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCJvcmllbnRhdGlvbmNoYW5nZSIsYS5saXN0ZW5lcixmYWxzZSl9ZWxzZXt3aW5kb3cuZGV0YWNoRXZlbnQoIm9ucmVzaXplIixhLmxpc3RlbmVyKX19TihzLCIiLHRydWUpO2RlbGV0ZSBoWyJtZWRpYV8iK3NdO2RlbGV0ZSBHW3NdfTt2YXIgWD17IlRBQkxFVCI6InRhYmxldCIsIlBIT05FIjoicGhvbmUiLCJERVNLVE9QIjoiZGVza3RvcCIsIkNPTUJJIjoiY29tYmkifTt2YXIgWT1kLm9zLndpbmRvd3MmJmQub3MudmVyc2lvbj09PTg7dmFyIFo9ZC5vcy53aW5kb3dzJiZkLm9zLnZlcnNpb249PT03O2Quc3lzdGVtPXt9O2Z1bmN0aW9uICQoYSl7dmFyIHQ9YTEoKTt2YXIgcz17fTtzLnRhYmxldD0oKGQuc3VwcG9ydC50b3VjaCYmIVopfHwhIWEpJiZ0O3MucGhvbmU9KChkLnN1cHBvcnQudG91Y2gmJiFaKXx8ISFhKSYmIXQ7cy5kZXNrdG9wPSghcy50YWJsZXQmJiFzLnBob25lKXx8WXx8WjtzLmNvbWJpPShzLmRlc2t0b3AmJnMudGFibGV0KTtzLlNZU1RFTVRZUEU9WDtmb3IodmFyIGIgaW4gWCl7UCgic2FwLSIrWFtiXSwhc1tYW2JdXSl9cmV0dXJuIHN9O2Z1bmN0aW9uIGExKCl7dmFyIGE9KC8oPz1hbmRyb2lkKSg/PS4qbW9iaWxlKS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkpO3ZhciBiPWQub3MuYW5kcm9pZCYmKGQub3MudmVyc2lvbj49NC40KSYmL1ZlcnNpb25cL1xkLlxkLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpO2lmKGQub3MubmFtZT09PWQub3MuT1MuSU9TKXtyZXR1cm4vaXBhZC9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCl9ZWxzZXtpZihkLnN1cHBvcnQudG91Y2gpe3ZhciBlPXdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvP3dpbmRvdy5kZXZpY2VQaXhlbFJhdGlvOjE7aWYoIWImJihkLm9zLm5hbWU9PT1kLm9zLk9TLkFORFJPSUQpJiZkLmJyb3dzZXIud2Via2l0JiYoZC5icm93c2VyLndlYmtpdFZlcnNpb24+NTM3LjEwKSl7ZT0xfXZhciB0PShNYXRoLm1pbih3aW5kb3cuc2NyZWVuLndpZHRoL2Usd2luZG93LnNjcmVlbi5oZWlnaHQvZSk+PTYwMCk7aWYodDEoKSYmKHdpbmRvdy5zY3JlZW4uaGVpZ2h0PT09NTUyfHx3aW5kb3cuc2NyZWVuLmhlaWdodD09PTU1MykmJigvTmV4dXMgNy9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkpKXt0PXRydWV9cmV0dXJuIHR9ZWxzZXt2YXIgZj0oZC5vcy5uYW1lPT09ZC5vcy5PUy5BTkRST0lEKSYmIWE7cmV0dXJuIGZ9fX07ZnVuY3Rpb24gYjEoYSl7ZC5zeXN0ZW09JChhKTtpZihkLnN5c3RlbS50YWJsZXR8fGQuc3lzdGVtLnBob25lKXtkLmJyb3dzZXIubW9iaWxlPXRydWV9fWIxKCk7ZC5vcmllbnRhdGlvbj17fTtkLnJlc2l6ZT17fTtkLm9yaWVudGF0aW9uLmF0dGFjaEhhbmRsZXI9ZnVuY3Rpb24oZixhKXtqKCJvcmllbnRhdGlvbiIsZixhKX07ZC5yZXNpemUuYXR0YWNoSGFuZGxlcj1mdW5jdGlvbihmLGEpe2ooInJlc2l6ZSIsZixhKX07ZC5vcmllbnRhdGlvbi5kZXRhY2hIYW5kbGVyPWZ1bmN0aW9uKGYsYSl7aygib3JpZW50YXRpb24iLGYsYSl9O2QucmVzaXplLmRldGFjaEhhbmRsZXI9ZnVuY3Rpb24oZixhKXtrKCJyZXNpemUiLGYsYSl9O2Z1bmN0aW9uIGMxKGkpe2kubGFuZHNjYXBlPXQxKHRydWUpO2kucG9ydHJhaXQ9IWkubGFuZHNjYXBlfTtmdW5jdGlvbiBkMSgpe2MxKGQub3JpZW50YXRpb24pO24oIm9yaWVudGF0aW9uIix7bGFuZHNjYXBlOmQub3JpZW50YXRpb24ubGFuZHNjYXBlfSl9O2Z1bmN0aW9uIGUxKCl7ZjEoZC5yZXNpemUpO24oInJlc2l6ZSIse2hlaWdodDpkLnJlc2l6ZS5oZWlnaHQsd2lkdGg6ZC5yZXNpemUud2lkdGh9KX07ZnVuY3Rpb24gZjEoaSl7aS53aWR0aD1RKClbMF07aS5oZWlnaHQ9USgpWzFdfTtmdW5jdGlvbiBnMSgpe3ZhciB3PWQub3JpZW50YXRpb24ubGFuZHNjYXBlO3ZhciBpPXQxKCk7aWYodyE9aSl7ZDEoKX1pZighbDEpe2wxPXdpbmRvdy5zZXRUaW1lb3V0KGgxLDE1MCl9fTtmdW5jdGlvbiBoMSgpe2UxKCk7bDE9bnVsbH07dmFyIGkxPWZhbHNlO3ZhciBqMT1mYWxzZTt2YXIgazE7dmFyIGwxO3ZhciBtMTt2YXIgbjE9USgpWzFdO3ZhciBvMT1RKClbMF07dmFyIHAxPWZhbHNlO3ZhciBxMTt2YXIgcjE9L0lOUFVUfFRFWFRBUkVBfFNFTEVDVC87dmFyIHMxPWQub3MuaW9zJiZkLmJyb3dzZXIubmFtZT09PSJzZiImJigoZC5zeXN0ZW0ucGhvbmUmJmQub3MudmVyc2lvbj49NyYmZC5vcy52ZXJzaW9uPDcuMSl8fChkLnN5c3RlbS50YWJsZXQmJmQub3MudmVyc2lvbj49NykpO2Z1bmN0aW9uIHQxKGYpe2lmKGQuc3VwcG9ydC50b3VjaCYmZC5zdXBwb3J0Lm9yaWVudGF0aW9uKXtpZihwMSYmZil7cmV0dXJuIWQub3JpZW50YXRpb24ubGFuZHNjYXBlfWlmKHAxKXtyZXR1cm4gZC5vcmllbnRhdGlvbi5sYW5kc2NhcGV9fWVsc2V7aWYoZC5zdXBwb3J0Lm1hdGNobWVkaWEmJmQuc3VwcG9ydC5vcmllbnRhdGlvbil7cmV0dXJuISF3aW5kb3cubWF0Y2hNZWRpYSgiKG9yaWVudGF0aW9uOiBsYW5kc2NhcGUpIikubWF0Y2hlc319dmFyIHM9USgpO3JldHVybiBzWzBdPnNbMV19O2Z1bmN0aW9uIHUxKGUpe2lmKGUudHlwZT09InJlc2l6ZSIpe2lmKHMxJiZyMS50ZXN0KGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQudGFnTmFtZSkmJiFpMSl7cmV0dXJufXZhciB3PVEoKVsxXTt2YXIgaT1RKClbMF07dmFyIHQ9bmV3IERhdGUoKS5nZXRUaW1lKCk7aWYodz09PW4xJiZpPT09bzEpe3JldHVybn1qMT10cnVlO2lmKChuMSE9dykmJihvMT09aSkpe2lmKCFxMXx8KHQtcTE+MzAwKSl7cDE9KHc8bjEpfWUxKCl9ZWxzZXtvMT1pfXExPXQ7bjE9dztpZihtMSl7d2luZG93LmNsZWFyVGltZW91dChtMSk7bTE9bnVsbH1tMT13aW5kb3cuc2V0VGltZW91dCh3MSwxMjAwKX1lbHNlIGlmKGUudHlwZT09Im9yaWVudGF0aW9uY2hhbmdlIil7aTE9dHJ1ZX1pZihrMSl7Y2xlYXJUaW1lb3V0KGsxKTtrMT1udWxsfWsxPXdpbmRvdy5zZXRUaW1lb3V0KHYxLDUwKX07ZnVuY3Rpb24gdjEoKXtpZihpMSYmajEpe2QxKCk7ZTEoKTtpMT1mYWxzZTtqMT1mYWxzZTtpZihtMSl7d2luZG93LmNsZWFyVGltZW91dChtMSk7bTE9bnVsbH19azE9bnVsbH07ZnVuY3Rpb24gdzEoKXtpMT1mYWxzZTtqMT1mYWxzZTttMT1udWxsfTtkLl91cGRhdGU9ZnVuY3Rpb24oYSl7dT1uYXZpZ2F0b3IudXNlckFnZW50O2wubG9nKFcsIkRldmljZSBBUEkgdmFsdWVzIG1hbmlwdWxhdGVkOiBOT1QgUFJPRFVDVElWRSBGRUFUVVJFISEhIFRoaXMgc2hvdWxkIGJlIG9ubHkgdXNlZCBmb3IgdGVzdCBwdXJwb3Nlcy4gT25seSB1c2UgaWYgeW91IGtub3cgd2hhdCB5b3UgYXJlIGRvaW5nLiIpO0EoKTtyKCk7YjEoYSl9O2YxKGQucmVzaXplKTtjMShkLm9yaWVudGF0aW9uKTt3aW5kb3cuc2FwLnVpLkRldmljZT1kO2lmKGQuc3VwcG9ydC50b3VjaCYmZC5zdXBwb3J0Lm9yaWVudGF0aW9uKXt3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigicmVzaXplIix1MSxmYWxzZSk7d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoIm9yaWVudGF0aW9uY2hhbmdlIix1MSxmYWxzZSl9ZWxzZXtpZih3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcil7d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoInJlc2l6ZSIsZzEsZmFsc2UpfWVsc2V7d2luZG93LmF0dGFjaEV2ZW50KCJvbnJlc2l6ZSIsZzEpfX1kLm1lZGlhLmluaXRSYW5nZVNldCgpO2lmKHNhcC51aS5kZWZpbmUpe3NhcC51aS5kZWZpbmUoInNhcC91aS9EZXZpY2UiLFtdLGZ1bmN0aW9uKCl7cmV0dXJuIGR9KX19KCkpOw0KLyohDQogKiBVUkkuanMgLSBNdXRhdGluZyBVUkxzDQogKiBTZWNvbmQgTGV2ZWwgRG9tYWluIChTTEQpIFN1cHBvcnQNCiAqDQogKiBWZXJzaW9uOiAxLjExLjINCiAqDQogKiBBdXRob3I6IFJvZG5leSBSZWhtDQogKiBXZWI6IGh0dHA6Ly9tZWRpYWxpemUuZ2l0aHViLmNvbS9VUkkuanMvDQogKg0KICogTGljZW5zZWQgdW5kZXINCiAqICAgTUlUIExpY2Vuc2UgaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZQ0KICogICBHUEwgdjMgaHR0cDovL29wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL0dQTC0zLjANCiAqDQogKi8NCihmdW5jdGlvbihyLGYpe2lmKHR5cGVvZiBleHBvcnRzPT09J29iamVjdCcpe21vZHVsZS5leHBvcnRzPWYoKX1lbHNlIGlmKHR5cGVvZiBkZWZpbmU9PT0nZnVuY3Rpb24nJiZkZWZpbmUuYW1kKXtkZWZpbmUoZil9ZWxzZXtyLlNlY29uZExldmVsRG9tYWlucz1mKHIpfX0odGhpcyxmdW5jdGlvbihyKXsidXNlIHN0cmljdCI7dmFyIF89ciYmci5TZWNvbmRMZXZlbERvbWFpbnM7dmFyIGg9T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTt2YXIgUz17bGlzdDp7ImFjIjoiY29tfGdvdnxtaWx8bmV0fG9yZyIsImFlIjoiYWN8Y298Z292fG1pbHxuYW1lfG5ldHxvcmd8cHJvfHNjaCIsImFmIjoiY29tfGVkdXxnb3Z8bmV0fG9yZyIsImFsIjoiY29tfGVkdXxnb3Z8bWlsfG5ldHxvcmciLCJhbyI6ImNvfGVkfGd2fGl0fG9nfHBiIiwiYXIiOiJjb218ZWR1fGdvYnxnb3Z8aW50fG1pbHxuZXR8b3JnfHR1ciIsImF0IjoiYWN8Y298Z3Z8b3IiLCJhdSI6ImFzbnxjb218Y3Npcm98ZWR1fGdvdnxpZHxuZXR8b3JnIiwiYmEiOiJjb3xjb218ZWR1fGdvdnxtaWx8bmV0fG9yZ3xyc3x1bmJpfHVubW98dW5zYXx1bnR6fHVuemUiLCJiYiI6ImJpenxjb3xjb218ZWR1fGdvdnxpbmZvfG5ldHxvcmd8c3RvcmV8dHYiLCJiaCI6ImJpenxjY3xjb218ZWR1fGdvdnxpbmZvfG5ldHxvcmciLCJibiI6ImNvbXxlZHV8Z292fG5ldHxvcmciLCJibyI6ImNvbXxlZHV8Z29ifGdvdnxpbnR8bWlsfG5ldHxvcmd8dHYiLCJiciI6ImFkbXxhZHZ8YWdyfGFtfGFycXxhcnR8YXRvfGJ8YmlvfGJsb2d8Ym1kfGNpbXxjbmd8Y250fGNvbXxjb29wfGVjbnxlZHV8ZW5nfGVzcHxldGN8ZXRpfGZhcnxmbG9nfGZtfGZuZHxmb3R8ZnN0fGcxMnxnZ2Z8Z292fGltYnxpbmR8aW5mfGpvcnxqdXN8bGVsfG1hdHxtZWR8bWlsfG11c3xuZXR8bm9tfG5vdHxudHJ8b2RvfG9yZ3xwcGd8cHJvfHBzY3xwc2l8cXNsfHJlY3xzbGd8c3J2fHRtcHx0cmR8dHVyfHR2fHZldHx2bG9nfHdpa2l8emxnIiwiYnMiOiJjb218ZWR1fGdvdnxuZXR8b3JnIiwiYnoiOiJkdXxldHxvbXxvdnxyZyIsImNhIjoiYWJ8YmN8bWJ8bmJ8bmZ8bmx8bnN8bnR8bnV8b258cGV8cWN8c2t8eWsiLCJjayI6ImJpenxjb3xlZHV8Z2VufGdvdnxpbmZvfG5ldHxvcmciLCJjbiI6ImFjfGFofGJqfGNvbXxjcXxlZHV8Zmp8Z2R8Z292fGdzfGd4fGd6fGhhfGhifGhlfGhpfGhsfGhufGpsfGpzfGp4fGxufG1pbHxuZXR8bm18bnh8b3JnfHFofHNjfHNkfHNofHNufHN4fHRqfHR3fHhqfHh6fHlufHpqIiwiY28iOiJjb218ZWR1fGdvdnxtaWx8bmV0fG5vbXxvcmciLCJjciI6ImFjfGN8Y298ZWR8Zml8Z298b3J8c2EiLCJjeSI6ImFjfGJpenxjb218ZWtsb2dlc3xnb3Z8bHRkfG5hbWV8bmV0fG9yZ3xwYXJsaWFtZW50fHByZXNzfHByb3x0bSIsImRvIjoiYXJ0fGNvbXxlZHV8Z29ifGdvdnxtaWx8bmV0fG9yZ3xzbGR8d2ViIiwiZHoiOiJhcnR8YXNzb3xjb218ZWR1fGdvdnxuZXR8b3JnfHBvbCIsImVjIjoiY29tfGVkdXxmaW58Z292fGluZm98bWVkfG1pbHxuZXR8b3JnfHBybyIsImVnIjoiY29tfGVkdXxldW58Z292fG1pbHxuYW1lfG5ldHxvcmd8c2NpIiwiZXIiOiJjb218ZWR1fGdvdnxpbmR8bWlsfG5ldHxvcmd8cm9jaGVzdHx3IiwiZXMiOiJjb218ZWR1fGdvYnxub218b3JnIiwiZXQiOiJiaXp8Y29tfGVkdXxnb3Z8aW5mb3xuYW1lfG5ldHxvcmciLCJmaiI6ImFjfGJpenxjb218aW5mb3xtaWx8bmFtZXxuZXR8b3JnfHBybyIsImZrIjoiYWN8Y298Z292fG5ldHxub218b3JnIiwiZnIiOiJhc3NvfGNvbXxmfGdvdXZ8bm9tfHByZHxwcmVzc2V8dG0iLCJnZyI6ImNvfG5ldHxvcmciLCJnaCI6ImNvbXxlZHV8Z292fG1pbHxvcmciLCJnbiI6ImFjfGNvbXxnb3Z8bmV0fG9yZyIsImdyIjoiY29tfGVkdXxnb3Z8bWlsfG5ldHxvcmciLCJndCI6ImNvbXxlZHV8Z29ifGluZHxtaWx8bmV0fG9yZyIsImd1IjoiY29tfGVkdXxnb3Z8bmV0fG9yZyIsImhrIjoiY29tfGVkdXxnb3Z8aWR2fG5ldHxvcmciLCJpZCI6ImFjfGNvfGdvfG1pbHxuZXR8b3J8c2NofHdlYiIsImlsIjoiYWN8Y298Z292fGlkZnxrMTJ8bXVuaXxuZXR8b3JnIiwiaW4iOiJhY3xjb3xlZHV8ZXJuZXR8ZmlybXxnZW58Z292fGl8aW5kfG1pbHxuZXR8bmljfG9yZ3xyZXMiLCJpcSI6ImNvbXxlZHV8Z292fGl8bWlsfG5ldHxvcmciLCJpciI6ImFjfGNvfGRuc3NlY3xnb3Z8aXxpZHxuZXR8b3JnfHNjaCIsIml0IjoiZWR1fGdvdiIsImplIjoiY298bmV0fG9yZyIsImpvIjoiY29tfGVkdXxnb3Z8bWlsfG5hbWV8bmV0fG9yZ3xzY2giLCJqcCI6ImFjfGFkfGNvfGVkfGdvfGdyfGxnfG5lfG9yIiwia2UiOiJhY3xjb3xnb3xpbmZvfG1lfG1vYml8bmV8b3J8c2MiLCJraCI6ImNvbXxlZHV8Z292fG1pbHxuZXR8b3JnfHBlciIsImtpIjoiYml6fGNvbXxkZXxlZHV8Z292fGluZm98bW9ifG5ldHxvcmd8dGVsIiwia20iOiJhc3NvfGNvbXxjb29wfGVkdXxnb3V2fGt8bWVkZWNpbnxtaWx8bm9tfG5vdGFpcmVzfHBoYXJtYWNpZW5zfHByZXNzZXx0bXx2ZXRlcmluYWlyZSIsImtuIjoiZWR1fGdvdnxuZXR8b3JnIiwia3IiOiJhY3xidXNhbnxjaHVuZ2J1a3xjaHVuZ25hbXxjb3xkYWVndXxkYWVqZW9ufGVzfGdhbmd3b258Z298Z3dhbmdqdXxneWVvbmdidWt8Z3llb25nZ2l8Z3llb25nbmFtfGhzfGluY2hlb258amVqdXxqZW9uYnVrfGplb25uYW18a3xrZ3xtaWx8bXN8bmV8b3J8cGV8cmV8c2N8c2VvdWx8dWxzYW4iLCJrdyI6ImNvbXxlZHV8Z292fG5ldHxvcmciLCJreSI6ImNvbXxlZHV8Z292fG5ldHxvcmciLCJreiI6ImNvbXxlZHV8Z292fG1pbHxuZXR8b3JnIiwibGIiOiJjb218ZWR1fGdvdnxuZXR8b3JnIiwibGsiOiJhc3NufGNvbXxlZHV8Z292fGdycHxob3RlbHxpbnR8bHRkfG5ldHxuZ298b3JnfHNjaHxzb2N8d2ViIiwibHIiOiJjb218ZWR1fGdvdnxuZXR8b3JnIiwibHYiOiJhc258Y29tfGNvbmZ8ZWR1fGdvdnxpZHxtaWx8bmV0fG9yZyIsImx5IjoiY29tfGVkdXxnb3Z8aWR8bWVkfG5ldHxvcmd8cGxjfHNjaCIsIm1hIjoiYWN8Y298Z292fG18bmV0fG9yZ3xwcmVzcyIsIm1jIjoiYXNzb3x0bSIsIm1lIjoiYWN8Y298ZWR1fGdvdnxpdHN8bmV0fG9yZ3xwcml2IiwibWciOiJjb218ZWR1fGdvdnxtaWx8bm9tfG9yZ3xwcmR8dG0iLCJtayI6ImNvbXxlZHV8Z292fGluZnxuYW1lfG5ldHxvcmd8cHJvIiwibWwiOiJjb218ZWR1fGdvdnxuZXR8b3JnfHByZXNzZSIsIm1uIjoiZWR1fGdvdnxvcmciLCJtbyI6ImNvbXxlZHV8Z292fG5ldHxvcmciLCJtdCI6ImNvbXxlZHV8Z292fG5ldHxvcmciLCJtdiI6ImFlcm98Yml6fGNvbXxjb29wfGVkdXxnb3Z8aW5mb3xpbnR8bWlsfG11c2V1bXxuYW1lfG5ldHxvcmd8cHJvIiwibXciOiJhY3xjb3xjb218Y29vcHxlZHV8Z292fGludHxtdXNldW18bmV0fG9yZyIsIm14IjoiY29tfGVkdXxnb2J8bmV0fG9yZyIsIm15IjoiY29tfGVkdXxnb3Z8bWlsfG5hbWV8bmV0fG9yZ3xzY2giLCJuZiI6ImFydHN8Y29tfGZpcm18aW5mb3xuZXR8b3RoZXJ8cGVyfHJlY3xzdG9yZXx3ZWIiLCJuZyI6ImJpenxjb218ZWR1fGdvdnxtaWx8bW9iaXxuYW1lfG5ldHxvcmd8c2NoIiwibmkiOiJhY3xjb3xjb218ZWR1fGdvYnxtaWx8bmV0fG5vbXxvcmciLCJucCI6ImNvbXxlZHV8Z292fG1pbHxuZXR8b3JnIiwibnIiOiJiaXp8Y29tfGVkdXxnb3Z8aW5mb3xuZXR8b3JnIiwib20iOiJhY3xiaXp8Y298Y29tfGVkdXxnb3Z8bWVkfG1pbHxtdXNldW18bmV0fG9yZ3xwcm98c2NoIiwicGUiOiJjb218ZWR1fGdvYnxtaWx8bmV0fG5vbXxvcmd8c2xkIiwicGgiOiJjb218ZWR1fGdvdnxpfG1pbHxuZXR8bmdvfG9yZyIsInBrIjoiYml6fGNvbXxlZHV8ZmFtfGdvYnxnb2t8Z29ufGdvcHxnb3N8Z292fG5ldHxvcmd8d2ViIiwicGwiOiJhcnR8YmlhbHlzdG9rfGJpenxjb218ZWR1fGdkYXxnZGFuc2t8Z29yem93fGdvdnxpbmZvfGthdG93aWNlfGtyYWtvd3xsb2R6fGx1YmxpbnxtaWx8bmV0fG5nb3xvbHN6dHlufG9yZ3xwb3puYW58cHdyfHJhZG9tfHNsdXBza3xzemN6ZWNpbnx0b3J1bnx3YXJzemF3YXx3YXd8d3JvY3x3cm9jbGF3fHpnb3JhIiwicHIiOiJhY3xiaXp8Y29tfGVkdXxlc3R8Z292fGluZm98aXNsYXxuYW1lfG5ldHxvcmd8cHJvfHByb2YiLCJwcyI6ImNvbXxlZHV8Z292fG5ldHxvcmd8cGxvfHNlYyIsInB3IjoiYmVsYXV8Y298ZWR8Z298bmV8b3IiLCJybyI6ImFydHN8Y29tfGZpcm18aW5mb3xub218bnR8b3JnfHJlY3xzdG9yZXx0bXx3d3ciLCJycyI6ImFjfGNvfGVkdXxnb3Z8aW58b3JnIiwic2IiOiJjb218ZWR1fGdvdnxuZXR8b3JnIiwic2MiOiJjb218ZWR1fGdvdnxuZXR8b3JnIiwic2giOiJjb3xjb218ZWR1fGdvdnxuZXR8bm9tfG9yZyIsInNsIjoiY29tfGVkdXxnb3Z8bmV0fG9yZyIsInN0IjoiY298Y29tfGNvbnN1bGFkb3xlZHV8ZW1iYWl4YWRhfGdvdnxtaWx8bmV0fG9yZ3xwcmluY2lwZXxzYW90b21lfHN0b3JlIiwic3YiOiJjb218ZWR1fGdvYnxvcmd8cmVkIiwic3oiOiJhY3xjb3xvcmciLCJ0ciI6ImF2fGJic3xiZWx8Yml6fGNvbXxkcnxlZHV8Z2VufGdvdnxpbmZvfGsxMnxuYW1lfG5ldHxvcmd8cG9sfHRlbHx0c2t8dHZ8d2ViIiwidHQiOiJhZXJvfGJpenxjYXR8Y298Y29tfGNvb3B8ZWR1fGdvdnxpbmZvfGludHxqb2JzfG1pbHxtb2JpfG11c2V1bXxuYW1lfG5ldHxvcmd8cHJvfHRlbHx0cmF2ZWwiLCJ0dyI6ImNsdWJ8Y29tfGViaXp8ZWR1fGdhbWV8Z292fGlkdnxtaWx8bmV0fG9yZyIsIm11IjoiYWN8Y298Y29tfGdvdnxuZXR8b3J8b3JnIiwibXoiOiJhY3xjb3xlZHV8Z292fG9yZyIsIm5hIjoiY298Y29tIiwibnoiOiJhY3xjb3xjcml8Z2Vla3xnZW58Z292dHxoZWFsdGh8aXdpfG1hb3JpfG1pbHxuZXR8b3JnfHBhcmxpYW1lbnR8c2Nob29sIiwicGEiOiJhYm98YWN8Y29tfGVkdXxnb2J8aW5nfG1lZHxuZXR8bm9tfG9yZ3xzbGQiLCJwdCI6ImNvbXxlZHV8Z292fGludHxuZXR8bm9tZXxvcmd8cHVibCIsInB5IjoiY29tfGVkdXxnb3Z8bWlsfG5ldHxvcmciLCJxYSI6ImNvbXxlZHV8Z292fG1pbHxuZXR8b3JnIiwicmUiOiJhc3NvfGNvbXxub20iLCJydSI6ImFjfGFkeWdleWF8YWx0YWl8YW11cnxhcmtoYW5nZWxza3xhc3RyYWtoYW58YmFzaGtpcmlhfGJlbGdvcm9kfGJpcnxicnlhbnNrfGJ1cnlhdGlhfGNiZ3xjaGVsfGNoZWx5YWJpbnNrfGNoaXRhfGNodWtvdGthfGNodXZhc2hpYXxjb218ZGFnZXN0YW58ZS1idXJnfGVkdXxnb3Z8Z3Jvem55fGludHxpcmt1dHNrfGl2YW5vdm98aXpoZXZza3xqYXJ8am9zaGthci1vbGF8a2FsbXlraWF8a2FsdWdhfGthbWNoYXRrYXxrYXJlbGlhfGthemFufGtjaHJ8a2VtZXJvdm98a2hhYmFyb3Zza3xraGFrYXNzaWF8a2h2fGtpcm92fGtvZW5pZ3xrb21pfGtvc3Ryb21hfGtyYW5veWFyc2t8a3ViYW58a3VyZ2FufGt1cnNrfGxpcGV0c2t8bWFnYWRhbnxtYXJpfG1hcmktZWx8bWFyaW5lfG1pbHxtb3Jkb3ZpYXxtb3NyZWd8bXNrfG11cm1hbnNrfG5hbGNoaWt8bmV0fG5ub3Z8bm92fG5vdm9zaWJpcnNrfG5za3xvbXNrfG9yZW5idXJnfG9yZ3xvcnlvbHxwZW56YXxwZXJtfHBwfHBza292fHB0enxybmR8cnlhemFufHNha2hhbGlufHNhbWFyYXxzYXJhdG92fHNpbWJpcnNrfHNtb2xlbnNrfHNwYnxzdGF2cm9wb2x8c3R2fHN1cmd1dHx0YW1ib3Z8dGF0YXJzdGFufHRvbXx0b21za3x0c2FyaXRzeW58dHNrfHR1bGF8dHV2YXx0dmVyfHR5dW1lbnx1ZG18dWRtdXJ0aWF8dWxhbi11ZGV8dmxhZGlrYXZrYXp8dmxhZGltaXJ8dmxhZGl2b3N0b2t8dm9sZ29ncmFkfHZvbG9nZGF8dm9yb25lemh8dnJufHZ5YXRrYXx5YWt1dGlhfHlhbWFsfHlla2F0ZXJpbmJ1cmd8eXV6aG5vLXNha2hhbGluc2siLCJydyI6ImFjfGNvfGNvbXxlZHV8Z291dnxnb3Z8aW50fG1pbHxuZXQiLCJzYSI6ImNvbXxlZHV8Z292fG1lZHxuZXR8b3JnfHB1YnxzY2giLCJzZCI6ImNvbXxlZHV8Z292fGluZm98bWVkfG5ldHxvcmd8dHYiLCJzZSI6ImF8YWN8YnxiZHxjfGR8ZXxmfGd8aHxpfGt8bHxtfG58b3xvcmd8cHxwYXJ0aXxwcHxwcmVzc3xyfHN8dHx0bXx1fHd8eHx5fHoiLCJzZyI6ImNvbXxlZHV8Z292fGlkbnxuZXR8b3JnfHBlciIsInNuIjoiYXJ0fGNvbXxlZHV8Z291dnxvcmd8cGVyc298dW5pdiIsInN5IjoiY29tfGVkdXxnb3Z8bWlsfG5ldHxuZXdzfG9yZyIsInRoIjoiYWN8Y298Z298aW58bWl8bmV0fG9yIiwidGoiOiJhY3xiaXp8Y298Y29tfGVkdXxnb3xnb3Z8aW5mb3xpbnR8bWlsfG5hbWV8bmV0fG5pY3xvcmd8dGVzdHx3ZWIiLCJ0biI6ImFncmluZXR8Y29tfGRlZmVuc2V8ZWR1bmV0fGVuc3xmaW58Z292fGluZHxpbmZvfGludGx8bWluY29tfG5hdHxuZXR8b3JnfHBlcnNvfHJucnR8cm5zfHJudXx0b3VyaXNtIiwidHoiOiJhY3xjb3xnb3xuZXxvciIsInVhIjoiYml6fGNoZXJrYXNzeXxjaGVybmlnb3Z8Y2hlcm5vdnRzeXxja3xjbnxjb3xjb218Y3JpbWVhfGN2fGRufGRuZXByb3BldHJvdnNrfGRvbmV0c2t8ZHB8ZWR1fGdvdnxpZnxpbnxpdmFuby1mcmFua2l2c2t8a2h8a2hhcmtvdnxraGVyc29ufGtobWVsbml0c2tpeXxraWV2fGtpcm92b2dyYWR8a218a3J8a3N8a3Z8bGd8bHVnYW5za3xsdXRza3xsdml2fG1lfG1rfG5ldHxuaWtvbGFldnxvZHxvZGVzc2F8b3JnfHBsfHBvbHRhdmF8cHB8cm92bm98cnZ8c2ViYXN0b3BvbHxzdW15fHRlfHRlcm5vcGlsfHV6aGdvcm9kfHZpbm5pY2F8dm58emFwb3Jpemh6aGV8emhpdG9taXJ8enB8enQiLCJ1ZyI6ImFjfGNvfGdvfG5lfG9yfG9yZ3xzYyIsInVrIjoiYWN8Ymx8YnJpdGlzaC1saWJyYXJ5fGNvfGN5bXxnb3Z8Z292dHxpY25ldHxqZXR8bGVhfGx0ZHxtZXxtaWx8bW9kfG5hdGlvbmFsLWxpYnJhcnktc2NvdGxhbmR8bmVsfG5ldHxuaHN8bmljfG5sc3xvcmd8b3JnbnxwYXJsaWFtZW50fHBsY3xwb2xpY2V8c2NofHNjb3R8c29jIiwidXMiOiJkbml8ZmVkfGlzYXxraWRzfG5zbiIsInV5IjoiY29tfGVkdXxndWJ8bWlsfG5ldHxvcmciLCJ2ZSI6ImNvfGNvbXxlZHV8Z29ifGluZm98bWlsfG5ldHxvcmd8d2ViIiwidmkiOiJjb3xjb218azEyfG5ldHxvcmciLCJ2biI6ImFjfGJpenxjb218ZWR1fGdvdnxoZWFsdGh8aW5mb3xpbnR8bmFtZXxuZXR8b3JnfHBybyIsInllIjoiY298Y29tfGdvdnxsdGR8bWV8bmV0fG9yZ3xwbGMiLCJ5dSI6ImFjfGNvfGVkdXxnb3Z8b3JnIiwiemEiOiJhY3xhZ3JpY3xhbHR8Ym91cnNlfGNpdHl8Y298Y3liZXJuZXR8ZGJ8ZWR1fGdvdnxncm9uZGFyfGlhY2Nlc3N8aW10fGluY2F8bGFuZGVzaWdufGxhd3xtaWx8bmV0fG5nb3xuaXN8bm9tfG9saXZldHRpfG9yZ3xwaXh8c2Nob29sfHRtfHdlYiIsInptIjoiYWN8Y298Y29tfGVkdXxnb3Z8bmV0fG9yZ3xzY2gifSxoYXNfZXhwcmVzc2lvbjpudWxsLGlzX2V4cHJlc3Npb246bnVsbCxoYXM6ZnVuY3Rpb24oZCl7cmV0dXJuISFkLm1hdGNoKFMuaGFzX2V4cHJlc3Npb24pfSxpczpmdW5jdGlvbihkKXtyZXR1cm4hIWQubWF0Y2goUy5pc19leHByZXNzaW9uKX0sZ2V0OmZ1bmN0aW9uKGQpe3ZhciB0PWQubWF0Y2goUy5oYXNfZXhwcmVzc2lvbik7cmV0dXJuIHQmJnRbMV18fG51bGx9LG5vQ29uZmxpY3Q6ZnVuY3Rpb24oKXtpZihyLlNlY29uZExldmVsRG9tYWlucz09PXRoaXMpe3IuU2Vjb25kTGV2ZWxEb21haW5zPV99cmV0dXJuIHRoaXN9LGluaXQ6ZnVuY3Rpb24oKXt2YXIgdD0nJztmb3IodmFyIGEgaW4gUy5saXN0KXtpZighaC5jYWxsKFMubGlzdCxhKSl7Y29udGludWV9dmFyIGU9JygnK1MubGlzdFthXSsnKVwuJythO3QrPSd8KCcrZSsnKSd9Uy5oYXNfZXhwcmVzc2lvbj1uZXcgUmVnRXhwKCdcXC4oJyt0LnN1YnN0cigxKSsnKSQnLCdpJyk7Uy5pc19leHByZXNzaW9uPW5ldyBSZWdFeHAoJ14oJyt0LnN1YnN0cigxKSsnKSQnLCdpJyl9fTtTLmluaXQoKTtyZXR1cm4gU30pKTsNCi8qIQ0KICogVVJJLmpzIC0gTXV0YXRpbmcgVVJMcw0KICoNCiAqIFZlcnNpb246IDEuMTEuMg0KICoNCiAqIEF1dGhvcjogUm9kbmV5IFJlaG0NCiAqIFdlYjogaHR0cDovL21lZGlhbGl6ZS5naXRodWIuY29tL1VSSS5qcy8NCiAqDQogKiBMaWNlbnNlZCB1bmRlcg0KICogICBNSVQgTGljZW5zZSBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlDQogKiAgIEdQTCB2MyBodHRwOi8vb3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvR1BMLTMuMA0KICoNCiAqLw0KKGZ1bmN0aW9uKHIsZil7aWYodHlwZW9mIGV4cG9ydHM9PT0nb2JqZWN0Jyl7bW9kdWxlLmV4cG9ydHM9ZihyZXF1aXJlKCcuL3B1bnljb2RlJykscmVxdWlyZSgnLi9JUHY2JykscmVxdWlyZSgnLi9TZWNvbmRMZXZlbERvbWFpbnMnKSl9ZWxzZSBpZih0eXBlb2YgZGVmaW5lPT09J2Z1bmN0aW9uJyYmZGVmaW5lLmFtZCl7ci5VUkk9ZihyLnB1bnljb2RlLHIuSVB2NixyLlNlY29uZExldmVsRG9tYWlucyxyKTtkZWZpbmUoW10sZnVuY3Rpb24oKXtyZXR1cm4gci5VUkl9KX1lbHNle3IuVVJJPWYoci5wdW55Y29kZSxyLklQdjYsci5TZWNvbmRMZXZlbERvbWFpbnMscil9fSh0aGlzLGZ1bmN0aW9uKGEsSSxTLHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgXz1yJiZyLlVSSTtmdW5jdGlvbiBVKGMsZCl7aWYoISh0aGlzIGluc3RhbmNlb2YgVSkpe3JldHVybiBuZXcgVShjLGQpfWlmKGM9PT11bmRlZmluZWQpe2lmKHR5cGVvZiBsb2NhdGlvbiE9PSd1bmRlZmluZWQnKXtjPWxvY2F0aW9uLmhyZWYrIiJ9ZWxzZXtjPSIifX10aGlzLmhyZWYoYyk7aWYoZCE9PXVuZGVmaW5lZCl7cmV0dXJuIHRoaXMuYWJzb2x1dGVUbyhkKX1yZXR1cm4gdGhpc307dmFyIHA9VS5wcm90b3R5cGU7dmFyIGg9T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtmdW5jdGlvbiBiKHMpe3JldHVybiBzLnJlcGxhY2UoLyhbLiorP149IToke30oKXxbXF1cL1xcXSkvZywnXFwkMScpfWZ1bmN0aW9uIGcodil7aWYodj09PXVuZGVmaW5lZCl7cmV0dXJuJ1VuZGVmaW5lZCd9cmV0dXJuIFN0cmluZyhPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodikpLnNsaWNlKDgsLTEpfWZ1bmN0aW9uIGYoYyl7cmV0dXJuIGcoYyk9PT0iQXJyYXkifWZ1bmN0aW9uIGooZCx2KXt2YXIgbD17fTt2YXIgaSxjO2lmKGYodikpe2ZvcihpPTAsYz12Lmxlbmd0aDtpPGM7aSsrKXtsW3ZbaV1dPXRydWV9fWVsc2V7bFt2XT10cnVlfWZvcihpPTAsYz1kLmxlbmd0aDtpPGM7aSsrKXtpZihsW2RbaV1dIT09dW5kZWZpbmVkKXtkLnNwbGljZShpLDEpO2MtLTtpLS19fXJldHVybiBkfWZ1bmN0aW9uIGsobCx2KXt2YXIgaSxjO2lmKGYodikpe2ZvcihpPTAsYz12Lmxlbmd0aDtpPGM7aSsrKXtpZighayhsLHZbaV0pKXtyZXR1cm4gZmFsc2V9fXJldHVybiB0cnVlfXZhciBkPWcodik7Zm9yKGk9MCxjPWwubGVuZ3RoO2k8YztpKyspe2lmKGQ9PT0nUmVnRXhwJyl7aWYodHlwZW9mIGxbaV09PT0nc3RyaW5nJyYmbFtpXS5tYXRjaCh2KSl7cmV0dXJuIHRydWV9fWVsc2UgaWYobFtpXT09PXYpe3JldHVybiB0cnVlfX1yZXR1cm4gZmFsc2V9ZnVuY3Rpb24gbShjLHQpe2lmKCFmKGMpfHwhZih0KSl7cmV0dXJuIGZhbHNlfWlmKGMubGVuZ3RoIT09dC5sZW5ndGgpe3JldHVybiBmYWxzZX1jLnNvcnQoKTt0LnNvcnQoKTtmb3IodmFyIGk9MCxsPWMubGVuZ3RoO2k8bDtpKyspe2lmKGNbaV0hPT10W2ldKXtyZXR1cm4gZmFsc2V9fXJldHVybiB0cnVlfVUuX3BhcnRzPWZ1bmN0aW9uKCl7cmV0dXJue3Byb3RvY29sOm51bGwsdXNlcm5hbWU6bnVsbCxwYXNzd29yZDpudWxsLGhvc3RuYW1lOm51bGwsdXJuOm51bGwscG9ydDpudWxsLHBhdGg6bnVsbCxxdWVyeTpudWxsLGZyYWdtZW50Om51bGwsZHVwbGljYXRlUXVlcnlQYXJhbWV0ZXJzOlUuZHVwbGljYXRlUXVlcnlQYXJhbWV0ZXJzLGVzY2FwZVF1ZXJ5U3BhY2U6VS5lc2NhcGVRdWVyeVNwYWNlfX07VS5kdXBsaWNhdGVRdWVyeVBhcmFtZXRlcnM9ZmFsc2U7VS5lc2NhcGVRdWVyeVNwYWNlPXRydWU7VS5wcm90b2NvbF9leHByZXNzaW9uPS9eW2Etel1bYS16MC05LSstXSokL2k7VS5pZG5fZXhwcmVzc2lvbj0vW15hLXowLTlcLi1dL2k7VS5wdW55Y29kZV9leHByZXNzaW9uPS8oeG4tLSkvaTtVLmlwNF9leHByZXNzaW9uPS9eXGR7MSwzfVwuXGR7MSwzfVwuXGR7MSwzfVwuXGR7MSwzfSQvO1UuaXA2X2V4cHJlc3Npb249L15ccyooKChbMC05QS1GYS1mXXsxLDR9Oil7N30oWzAtOUEtRmEtZl17MSw0fXw6KSl8KChbMC05QS1GYS1mXXsxLDR9Oil7Nn0oOlswLTlBLUZhLWZdezEsNH18KCgyNVswLTVdfDJbMC00XVxkfDFcZFxkfFsxLTldP1xkKShcLigyNVswLTVdfDJbMC00XVxkfDFcZFxkfFsxLTldP1xkKSl7M30pfDopKXwoKFswLTlBLUZhLWZdezEsNH06KXs1fSgoKDpbMC05QS1GYS1mXXsxLDR9KXsxLDJ9KXw6KCgyNVswLTVdfDJbMC00XVxkfDFcZFxkfFsxLTldP1xkKShcLigyNVswLTVdfDJbMC00XVxkfDFcZFxkfFsxLTldP1xkKSl7M30pfDopKXwoKFswLTlBLUZhLWZdezEsNH06KXs0fSgoKDpbMC05QS1GYS1mXXsxLDR9KXsxLDN9KXwoKDpbMC05QS1GYS1mXXsxLDR9KT86KCgyNVswLTVdfDJbMC00XVxkfDFcZFxkfFsxLTldP1xkKShcLigyNVswLTVdfDJbMC00XVxkfDFcZFxkfFsxLTldP1xkKSl7M30pKXw6KSl8KChbMC05QS1GYS1mXXsxLDR9Oil7M30oKCg6WzAtOUEtRmEtZl17MSw0fSl7MSw0fSl8KCg6WzAtOUEtRmEtZl17MSw0fSl7MCwyfTooKDI1WzAtNV18MlswLTRdXGR8MVxkXGR8WzEtOV0/XGQpKFwuKDI1WzAtNV18MlswLTRdXGR8MVxkXGR8WzEtOV0/XGQpKXszfSkpfDopKXwoKFswLTlBLUZhLWZdezEsNH06KXsyfSgoKDpbMC05QS1GYS1mXXsxLDR9KXsxLDV9KXwoKDpbMC05QS1GYS1mXXsxLDR9KXswLDN9OigoMjVbMC01XXwyWzAtNF1cZHwxXGRcZHxbMS05XT9cZCkoXC4oMjVbMC01XXwyWzAtNF1cZHwxXGRcZHxbMS05XT9cZCkpezN9KSl8OikpfCgoWzAtOUEtRmEtZl17MSw0fTopezF9KCgoOlswLTlBLUZhLWZdezEsNH0pezEsNn0pfCgoOlswLTlBLUZhLWZdezEsNH0pezAsNH06KCgyNVswLTVdfDJbMC00XVxkfDFcZFxkfFsxLTldP1xkKShcLigyNVswLTVdfDJbMC00XVxkfDFcZFxkfFsxLTldP1xkKSl7M30pKXw6KSl8KDooKCg6WzAtOUEtRmEtZl17MSw0fSl7MSw3fSl8KCg6WzAtOUEtRmEtZl17MSw0fSl7MCw1fTooKDI1WzAtNV18MlswLTRdXGR8MVxkXGR8WzEtOV0/XGQpKFwuKDI1WzAtNV18MlswLTRdXGR8MVxkXGR8WzEtOV0/XGQpKXszfSkpfDopKSkoJS4rKT9ccyokLztVLmZpbmRfdXJpX2V4cHJlc3Npb249L1xiKCg/OlthLXpdW1x3LV0rOig/OlwvezEsM318W2EtejAtOSVdKXx3d3dcZHswLDN9Wy5dfFthLXowLTkuXC1dK1suXVthLXpdezIsNH1cLykoPzpbXlxzKCk8Pl0rfFwoKFteXHMoKTw+XSt8KFwoW15ccygpPD5dK1wpKSkqXCkpKyg/OlwoKFteXHMoKTw+XSt8KFwoW15ccygpPD5dK1wpKSkqXCl8W15cc2AhKClcW1xde307OiciLiw8Pj/Cq8K74oCc4oCd4oCY4oCZXSkpL2lnO1UuZGVmYXVsdFBvcnRzPXtodHRwOiI4MCIsaHR0cHM6IjQ0MyIsZnRwOiIyMSIsZ29waGVyOiI3MCIsd3M6IjgwIix3c3M6IjQ0MyJ9O1UuaW52YWxpZF9ob3N0bmFtZV9jaGFyYWN0ZXJzPS9bXmEtekEtWjAtOVwuLV0vO1UuZG9tQXR0cmlidXRlcz17J2EnOidocmVmJywnYmxvY2txdW90ZSc6J2NpdGUnLCdsaW5rJzonaHJlZicsJ2Jhc2UnOidocmVmJywnc2NyaXB0Jzonc3JjJywnZm9ybSc6J2FjdGlvbicsJ2ltZyc6J3NyYycsJ2FyZWEnOidocmVmJywnaWZyYW1lJzonc3JjJywnZW1iZWQnOidzcmMnLCdzb3VyY2UnOidzcmMnLCd0cmFjayc6J3NyYycsJ2lucHV0Jzonc3JjJ307VS5nZXREb21BdHRyaWJ1dGU9ZnVuY3Rpb24oYyl7aWYoIWN8fCFjLm5vZGVOYW1lKXtyZXR1cm4gdW5kZWZpbmVkfXZhciBkPWMubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtpZihkPT09J2lucHV0JyYmYy50eXBlIT09J2ltYWdlJyl7cmV0dXJuIHVuZGVmaW5lZH1yZXR1cm4gVS5kb21BdHRyaWJ1dGVzW2RdfTtmdW5jdGlvbiBuKHYpe3JldHVybiBlc2NhcGUodil9ZnVuY3Rpb24gbyhzKXtyZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KHMpLnJlcGxhY2UoL1shJygpKl0vZyxuKS5yZXBsYWNlKC9cKi9nLCIlMkEiKX1VLmVuY29kZT1vO1UuZGVjb2RlPWRlY29kZVVSSUNvbXBvbmVudDtVLmlzbzg4NTk9ZnVuY3Rpb24oKXtVLmVuY29kZT1lc2NhcGU7VS5kZWNvZGU9dW5lc2NhcGV9O1UudW5pY29kZT1mdW5jdGlvbigpe1UuZW5jb2RlPW87VS5kZWNvZGU9ZGVjb2RlVVJJQ29tcG9uZW50fTtVLmNoYXJhY3RlcnM9e3BhdGhuYW1lOntlbmNvZGU6e2V4cHJlc3Npb246LyUoMjR8MjZ8MkJ8MkN8M0J8M0R8M0F8NDApL2lnLG1hcDp7IiUyNCI6IiQiLCIlMjYiOiImIiwiJTJCIjoiKyIsIiUyQyI6IiwiLCIlM0IiOiI7IiwiJTNEIjoiPSIsIiUzQSI6IjoiLCIlNDAiOiJAIn19LGRlY29kZTp7ZXhwcmVzc2lvbjovW1wvXD8jXS9nLG1hcDp7Ii8iOiIlMkYiLCI/IjoiJTNGIiwiIyI6IiUyMyJ9fX0scmVzZXJ2ZWQ6e2VuY29kZTp7ZXhwcmVzc2lvbjovJSgyMXwyM3wyNHwyNnwyN3wyOHwyOXwyQXwyQnwyQ3wyRnwzQXwzQnwzRHwzRnw0MHw1Qnw1RCkvaWcsbWFwOnsiJTNBIjoiOiIsIiUyRiI6Ii8iLCIlM0YiOiI/IiwiJTIzIjoiIyIsIiU1QiI6IlsiLCIlNUQiOiJdIiwiJTQwIjoiQCIsIiUyMSI6IiEiLCIlMjQiOiIkIiwiJTI2IjoiJiIsIiUyNyI6IiciLCIlMjgiOiIoIiwiJTI5IjoiKSIsIiUyQSI6IioiLCIlMkIiOiIrIiwiJTJDIjoiLCIsIiUzQiI6IjsiLCIlM0QiOiI9In19fX07VS5lbmNvZGVRdWVyeT1mdW5jdGlvbihzLGUpe3ZhciBjPVUuZW5jb2RlKHMrIiIpO3JldHVybiBlP2MucmVwbGFjZSgvJTIwL2csJysnKTpjfTtVLmRlY29kZVF1ZXJ5PWZ1bmN0aW9uKHMsYyl7cys9IiI7dHJ5e3JldHVybiBVLmRlY29kZShjP3MucmVwbGFjZSgvXCsvZywnJTIwJyk6cyl9Y2F0Y2goZSl7cmV0dXJuIHN9fTtVLnJlY29kZVBhdGg9ZnVuY3Rpb24ocyl7dmFyIGM9KHMrIiIpLnNwbGl0KCcvJyk7Zm9yKHZhciBpPTAsbD1jLmxlbmd0aDtpPGw7aSsrKXtjW2ldPVUuZW5jb2RlUGF0aFNlZ21lbnQoVS5kZWNvZGUoY1tpXSkpfXJldHVybiBjLmpvaW4oJy8nKX07VS5kZWNvZGVQYXRoPWZ1bmN0aW9uKHMpe3ZhciBjPShzKyIiKS5zcGxpdCgnLycpO2Zvcih2YXIgaT0wLGw9Yy5sZW5ndGg7aTxsO2krKyl7Y1tpXT1VLmRlY29kZVBhdGhTZWdtZW50KGNbaV0pfXJldHVybiBjLmpvaW4oJy8nKX07dmFyIHU9eydlbmNvZGUnOidlbmNvZGUnLCdkZWNvZGUnOidkZWNvZGUnfTt2YXIgdzt2YXIgeT1mdW5jdGlvbihkLHcpe3JldHVybiBmdW5jdGlvbihzKXtyZXR1cm4gVVt3XShzKyIiKS5yZXBsYWNlKFUuY2hhcmFjdGVyc1tkXVt3XS5leHByZXNzaW9uLGZ1bmN0aW9uKGMpe3JldHVybiBVLmNoYXJhY3RlcnNbZF1bd10ubWFwW2NdfSl9fTtmb3IodyBpbiB1KXtVW3crIlBhdGhTZWdtZW50Il09eSgicGF0aG5hbWUiLHVbd10pfVUuZW5jb2RlUmVzZXJ2ZWQ9eSgicmVzZXJ2ZWQiLCJlbmNvZGUiKTtVLnBhcnNlPWZ1bmN0aW9uKHMsYyl7dmFyIGQ7aWYoIWMpe2M9e319ZD1zLmluZGV4T2YoJyMnKTtpZihkPi0xKXtjLmZyYWdtZW50PXMuc3Vic3RyaW5nKGQrMSl8fG51bGw7cz1zLnN1YnN0cmluZygwLGQpfWQ9cy5pbmRleE9mKCc/Jyk7aWYoZD4tMSl7Yy5xdWVyeT1zLnN1YnN0cmluZyhkKzEpfHxudWxsO3M9cy5zdWJzdHJpbmcoMCxkKX1pZihzLnN1YnN0cmluZygwLDIpPT09Jy8vJyl7Yy5wcm90b2NvbD1udWxsO3M9cy5zdWJzdHJpbmcoMik7cz1VLnBhcnNlQXV0aG9yaXR5KHMsYyl9ZWxzZXtkPXMuaW5kZXhPZignOicpO2lmKGQ+LTEpe2MucHJvdG9jb2w9cy5zdWJzdHJpbmcoMCxkKXx8bnVsbDtpZihjLnByb3RvY29sJiYhYy5wcm90b2NvbC5tYXRjaChVLnByb3RvY29sX2V4cHJlc3Npb24pKXtjLnByb3RvY29sPXVuZGVmaW5lZH1lbHNlIGlmKGMucHJvdG9jb2w9PT0nZmlsZScpe3M9cy5zdWJzdHJpbmcoZCszKX1lbHNlIGlmKHMuc3Vic3RyaW5nKGQrMSxkKzMpPT09Jy8vJyl7cz1zLnN1YnN0cmluZyhkKzMpO3M9VS5wYXJzZUF1dGhvcml0eShzLGMpfWVsc2V7cz1zLnN1YnN0cmluZyhkKzEpO2MudXJuPXRydWV9fX1jLnBhdGg9cztyZXR1cm4gY307VS5wYXJzZUhvc3Q9ZnVuY3Rpb24ocyxjKXt2YXIgZD1zLmluZGV4T2YoJy8nKTt2YXIgZTt2YXIgdDtpZihkPT09LTEpe2Q9cy5sZW5ndGh9aWYocy5jaGFyQXQoMCk9PT0iWyIpe2U9cy5pbmRleE9mKCddJyk7Yy5ob3N0bmFtZT1zLnN1YnN0cmluZygxLGUpfHxudWxsO2MucG9ydD1zLnN1YnN0cmluZyhlKzIsZCl8fG51bGx9ZWxzZSBpZihzLmluZGV4T2YoJzonKSE9PXMubGFzdEluZGV4T2YoJzonKSl7Yy5ob3N0bmFtZT1zLnN1YnN0cmluZygwLGQpfHxudWxsO2MucG9ydD1udWxsfWVsc2V7dD1zLnN1YnN0cmluZygwLGQpLnNwbGl0KCc6Jyk7Yy5ob3N0bmFtZT10WzBdfHxudWxsO2MucG9ydD10WzFdfHxudWxsfWlmKGMuaG9zdG5hbWUmJnMuc3Vic3RyaW5nKGQpLmNoYXJBdCgwKSE9PScvJyl7ZCsrO3M9Ii8iK3N9cmV0dXJuIHMuc3Vic3RyaW5nKGQpfHwnLyd9O1UucGFyc2VBdXRob3JpdHk9ZnVuY3Rpb24ocyxjKXtzPVUucGFyc2VVc2VyaW5mbyhzLGMpO3JldHVybiBVLnBhcnNlSG9zdChzLGMpfTtVLnBhcnNlVXNlcmluZm89ZnVuY3Rpb24ocyxjKXt2YXIgZD1zLmluZGV4T2YoJy8nKTt2YXIgZT1kPi0xP3MubGFzdEluZGV4T2YoJ0AnLGQpOnMuaW5kZXhPZignQCcpO3ZhciB0O2lmKGU+LTEmJihkPT09LTF8fGU8ZCkpe3Q9cy5zdWJzdHJpbmcoMCxlKS5zcGxpdCgnOicpO2MudXNlcm5hbWU9dFswXT9VLmRlY29kZSh0WzBdKTpudWxsO3Quc2hpZnQoKTtjLnBhc3N3b3JkPXRbMF0/VS5kZWNvZGUodC5qb2luKCc6JykpOm51bGw7cz1zLnN1YnN0cmluZyhlKzEpfWVsc2V7Yy51c2VybmFtZT1udWxsO2MucGFzc3dvcmQ9bnVsbH1yZXR1cm4gc307VS5wYXJzZVF1ZXJ5PWZ1bmN0aW9uKHMsZSl7aWYoIXMpe3JldHVybnt9fXM9cy5yZXBsYWNlKC8mKy9nLCcmJykucmVwbGFjZSgvXlw/KiYqfCYrJC9nLCcnKTtpZighcyl7cmV0dXJue319dmFyIGM9e307dmFyIGQ9cy5zcGxpdCgnJicpO3ZhciBsPWQubGVuZ3RoO3ZhciB2LHQseDtmb3IodmFyIGk9MDtpPGw7aSsrKXt2PWRbaV0uc3BsaXQoJz0nKTt0PVUuZGVjb2RlUXVlcnkodi5zaGlmdCgpLGUpO3g9di5sZW5ndGg/VS5kZWNvZGVRdWVyeSh2LmpvaW4oJz0nKSxlKTpudWxsO2lmKGNbdF0pe2lmKHR5cGVvZiBjW3RdPT09InN0cmluZyIpe2NbdF09W2NbdF1dfWNbdF0ucHVzaCh4KX1lbHNle2NbdF09eH19cmV0dXJuIGN9O1UuYnVpbGQ9ZnVuY3Rpb24oYyl7dmFyIHQ9IiI7aWYoYy5wcm90b2NvbCl7dCs9Yy5wcm90b2NvbCsiOiJ9aWYoIWMudXJuJiYodHx8Yy5ob3N0bmFtZSkpe3QrPScvLyd9dCs9KFUuYnVpbGRBdXRob3JpdHkoYyl8fCcnKTtpZih0eXBlb2YgYy5wYXRoPT09InN0cmluZyIpe2lmKGMucGF0aC5jaGFyQXQoMCkhPT0nLycmJnR5cGVvZiBjLmhvc3RuYW1lPT09InN0cmluZyIpe3QrPScvJ310Kz1jLnBhdGh9aWYodHlwZW9mIGMucXVlcnk9PT0ic3RyaW5nIiYmYy5xdWVyeSl7dCs9Jz8nK2MucXVlcnl9aWYodHlwZW9mIGMuZnJhZ21lbnQ9PT0ic3RyaW5nIiYmYy5mcmFnbWVudCl7dCs9JyMnK2MuZnJhZ21lbnR9cmV0dXJuIHR9O1UuYnVpbGRIb3N0PWZ1bmN0aW9uKGMpe3ZhciB0PSIiO2lmKCFjLmhvc3RuYW1lKXtyZXR1cm4iIn1lbHNlIGlmKFUuaXA2X2V4cHJlc3Npb24udGVzdChjLmhvc3RuYW1lKSl7aWYoYy5wb3J0KXt0Kz0iWyIrYy5ob3N0bmFtZSsiXToiK2MucG9ydH1lbHNle3QrPWMuaG9zdG5hbWV9fWVsc2V7dCs9Yy5ob3N0bmFtZTtpZihjLnBvcnQpe3QrPSc6JytjLnBvcnR9fXJldHVybiB0fTtVLmJ1aWxkQXV0aG9yaXR5PWZ1bmN0aW9uKGMpe3JldHVybiBVLmJ1aWxkVXNlcmluZm8oYykrVS5idWlsZEhvc3QoYyl9O1UuYnVpbGRVc2VyaW5mbz1mdW5jdGlvbihjKXt2YXIgdD0iIjtpZihjLnVzZXJuYW1lKXt0Kz1VLmVuY29kZShjLnVzZXJuYW1lKTtpZihjLnBhc3N3b3JkKXt0Kz0nOicrVS5lbmNvZGUoYy5wYXNzd29yZCl9dCs9IkAifXJldHVybiB0fTtVLmJ1aWxkUXVlcnk9ZnVuY3Rpb24oZCxjLGUpe3ZhciB0PSIiO3ZhciBsLHMsaSx2O2ZvcihzIGluIGQpe2lmKGguY2FsbChkLHMpJiZzKXtpZihmKGRbc10pKXtsPXt9O2ZvcihpPTAsdj1kW3NdLmxlbmd0aDtpPHY7aSsrKXtpZihkW3NdW2ldIT09dW5kZWZpbmVkJiZsW2Rbc11baV0rIiJdPT09dW5kZWZpbmVkKXt0Kz0iJiIrVS5idWlsZFF1ZXJ5UGFyYW1ldGVyKHMsZFtzXVtpXSxlKTtpZihjIT09dHJ1ZSl7bFtkW3NdW2ldKyIiXT10cnVlfX19fWVsc2UgaWYoZFtzXSE9PXVuZGVmaW5lZCl7dCs9JyYnK1UuYnVpbGRRdWVyeVBhcmFtZXRlcihzLGRbc10sZSl9fX1yZXR1cm4gdC5zdWJzdHJpbmcoMSl9O1UuYnVpbGRRdWVyeVBhcmFtZXRlcj1mdW5jdGlvbihjLHYsZSl7cmV0dXJuIFUuZW5jb2RlUXVlcnkoYyxlKSsodiE9PW51bGw/Ij0iK1UuZW5jb2RlUXVlcnkodixlKToiIil9O1UuYWRkUXVlcnk9ZnVuY3Rpb24oZCxjLHYpe2lmKHR5cGVvZiBjPT09Im9iamVjdCIpe2Zvcih2YXIgZSBpbiBjKXtpZihoLmNhbGwoYyxlKSl7VS5hZGRRdWVyeShkLGUsY1tlXSl9fX1lbHNlIGlmKHR5cGVvZiBjPT09InN0cmluZyIpe2lmKGRbY109PT11bmRlZmluZWQpe2RbY109djtyZXR1cm59ZWxzZSBpZih0eXBlb2YgZFtjXT09PSJzdHJpbmciKXtkW2NdPVtkW2NdXX1pZighZih2KSl7dj1bdl19ZFtjXT1kW2NdLmNvbmNhdCh2KX1lbHNle3Rocm93IG5ldyBUeXBlRXJyb3IoIlVSSS5hZGRRdWVyeSgpIGFjY2VwdHMgYW4gb2JqZWN0LCBzdHJpbmcgYXMgdGhlIG5hbWUgcGFyYW1ldGVyIil9fTtVLnJlbW92ZVF1ZXJ5PWZ1bmN0aW9uKGQsYyx2KXt2YXIgaSxsLGU7aWYoZihjKSl7Zm9yKGk9MCxsPWMubGVuZ3RoO2k8bDtpKyspe2RbY1tpXV09dW5kZWZpbmVkfX1lbHNlIGlmKHR5cGVvZiBjPT09Im9iamVjdCIpe2ZvcihlIGluIGMpe2lmKGguY2FsbChjLGUpKXtVLnJlbW92ZVF1ZXJ5KGQsZSxjW2VdKX19fWVsc2UgaWYodHlwZW9mIGM9PT0ic3RyaW5nIil7aWYodiE9PXVuZGVmaW5lZCl7aWYoZFtjXT09PXYpe2RbY109dW5kZWZpbmVkfWVsc2UgaWYoZihkW2NdKSl7ZFtjXT1qKGRbY10sdil9fWVsc2V7ZFtjXT11bmRlZmluZWR9fWVsc2V7dGhyb3cgbmV3IFR5cGVFcnJvcigiVVJJLmFkZFF1ZXJ5KCkgYWNjZXB0cyBhbiBvYmplY3QsIHN0cmluZyBhcyB0aGUgZmlyc3QgcGFyYW1ldGVyIil9fTtVLmhhc1F1ZXJ5PWZ1bmN0aW9uKGQsYyx2LGUpe2lmKHR5cGVvZiBjPT09Im9iamVjdCIpe2Zvcih2YXIgaSBpbiBjKXtpZihoLmNhbGwoYyxpKSl7aWYoIVUuaGFzUXVlcnkoZCxpLGNbaV0pKXtyZXR1cm4gZmFsc2V9fX1yZXR1cm4gdHJ1ZX1lbHNlIGlmKHR5cGVvZiBjIT09InN0cmluZyIpe3Rocm93IG5ldyBUeXBlRXJyb3IoIlVSSS5oYXNRdWVyeSgpIGFjY2VwdHMgYW4gb2JqZWN0LCBzdHJpbmcgYXMgdGhlIG5hbWUgcGFyYW1ldGVyIil9c3dpdGNoKGcodikpe2Nhc2UnVW5kZWZpbmVkJzpyZXR1cm4gYyBpbiBkO2Nhc2UnQm9vbGVhbic6dmFyIGw9Qm9vbGVhbihmKGRbY10pP2RbY10ubGVuZ3RoOmRbY10pO3JldHVybiB2PT09bDtjYXNlJ0Z1bmN0aW9uJzpyZXR1cm4hIXYoZFtjXSxjLGQpO2Nhc2UnQXJyYXknOmlmKCFmKGRbY10pKXtyZXR1cm4gZmFsc2V9dmFyIHM9ZT9rOm07cmV0dXJuIHMoZFtjXSx2KTtjYXNlJ1JlZ0V4cCc6aWYoIWYoZFtjXSkpe3JldHVybiBCb29sZWFuKGRbY10mJmRbY10ubWF0Y2godikpfWlmKCFlKXtyZXR1cm4gZmFsc2V9cmV0dXJuIGsoZFtjXSx2KTtjYXNlJ051bWJlcic6dj1TdHJpbmcodik7Y2FzZSdTdHJpbmcnOmlmKCFmKGRbY10pKXtyZXR1cm4gZFtjXT09PXZ9aWYoIWUpe3JldHVybiBmYWxzZX1yZXR1cm4gayhkW2NdLHYpO2RlZmF1bHQ6dGhyb3cgbmV3IFR5cGVFcnJvcigiVVJJLmhhc1F1ZXJ5KCkgYWNjZXB0cyB1bmRlZmluZWQsIGJvb2xlYW4sIHN0cmluZywgbnVtYmVyLCBSZWdFeHAsIEZ1bmN0aW9uIGFzIHRoZSB2YWx1ZSBwYXJhbWV0ZXIiKX19O1UuY29tbW9uUGF0aD1mdW5jdGlvbihjLHQpe3ZhciBsPU1hdGgubWluKGMubGVuZ3RoLHQubGVuZ3RoKTt2YXIgZDtmb3IoZD0wO2Q8bDtkKyspe2lmKGMuY2hhckF0KGQpIT09dC5jaGFyQXQoZCkpe2QtLTticmVha319aWYoZDwxKXtyZXR1cm4gYy5jaGFyQXQoMCk9PT10LmNoYXJBdCgwKSYmYy5jaGFyQXQoMCk9PT0nLyc/Jy8nOicnfWlmKGMuY2hhckF0KGQpIT09Jy8nfHx0LmNoYXJBdChkKSE9PScvJyl7ZD1jLnN1YnN0cmluZygwLGQpLmxhc3RJbmRleE9mKCcvJyl9cmV0dXJuIGMuc3Vic3RyaW5nKDAsZCsxKX07VS53aXRoaW5TdHJpbmc9ZnVuY3Rpb24ocyxjKXtyZXR1cm4gcy5yZXBsYWNlKFUuZmluZF91cmlfZXhwcmVzc2lvbixjKX07VS5lbnN1cmVWYWxpZEhvc3RuYW1lPWZ1bmN0aW9uKHYpe2lmKHYubWF0Y2goVS5pbnZhbGlkX2hvc3RuYW1lX2NoYXJhY3RlcnMpKXtpZighYSl7dGhyb3cgbmV3IFR5cGVFcnJvcigiSG9zdG5hbWUgJyIrdisiJyBjb250YWlucyBjaGFyYWN0ZXJzIG90aGVyIHRoYW4gW0EtWjAtOS4tXSBhbmQgUHVueWNvZGUuanMgaXMgbm90IGF2YWlsYWJsZSIpfWlmKGEudG9BU0NJSSh2KS5tYXRjaChVLmludmFsaWRfaG9zdG5hbWVfY2hhcmFjdGVycykpe3Rocm93IG5ldyBUeXBlRXJyb3IoIkhvc3RuYW1lICciK3YrIicgY29udGFpbnMgY2hhcmFjdGVycyBvdGhlciB0aGFuIFtBLVowLTkuLV0iKX19fTtVLm5vQ29uZmxpY3Q9ZnVuY3Rpb24oYyl7aWYoYyl7dmFyIGQ9e1VSSTp0aGlzLm5vQ29uZmxpY3QoKX07aWYoVVJJVGVtcGxhdGUmJnR5cGVvZiBVUklUZW1wbGF0ZS5ub0NvbmZsaWN0PT0iZnVuY3Rpb24iKXtkLlVSSVRlbXBsYXRlPVVSSVRlbXBsYXRlLm5vQ29uZmxpY3QoKX1pZihJJiZ0eXBlb2YgSS5ub0NvbmZsaWN0PT0iZnVuY3Rpb24iKXtkLklQdjY9SS5ub0NvbmZsaWN0KCl9aWYoU2Vjb25kTGV2ZWxEb21haW5zJiZ0eXBlb2YgU2Vjb25kTGV2ZWxEb21haW5zLm5vQ29uZmxpY3Q9PSJmdW5jdGlvbiIpe2QuU2Vjb25kTGV2ZWxEb21haW5zPVNlY29uZExldmVsRG9tYWlucy5ub0NvbmZsaWN0KCl9cmV0dXJuIGR9ZWxzZSBpZihyLlVSST09PXRoaXMpe3IuVVJJPV99cmV0dXJuIHRoaXN9O3AuYnVpbGQ9ZnVuY3Rpb24oZCl7aWYoZD09PXRydWUpe3RoaXMuX2RlZmVycmVkX2J1aWxkPXRydWV9ZWxzZSBpZihkPT09dW5kZWZpbmVkfHx0aGlzLl9kZWZlcnJlZF9idWlsZCl7dGhpcy5fc3RyaW5nPVUuYnVpbGQodGhpcy5fcGFydHMpO3RoaXMuX2RlZmVycmVkX2J1aWxkPWZhbHNlfXJldHVybiB0aGlzfTtwLmNsb25lPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBVKHRoaXMpfTtwLnZhbHVlT2Y9cC50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmJ1aWxkKGZhbHNlKS5fc3RyaW5nfTt1PXtwcm90b2NvbDoncHJvdG9jb2wnLHVzZXJuYW1lOid1c2VybmFtZScscGFzc3dvcmQ6J3Bhc3N3b3JkJyxob3N0bmFtZTonaG9zdG5hbWUnLHBvcnQ6J3BvcnQnfTt5PWZ1bmN0aW9uKHcpe3JldHVybiBmdW5jdGlvbih2LGMpe2lmKHY9PT11bmRlZmluZWQpe3JldHVybiB0aGlzLl9wYXJ0c1t3XXx8IiJ9ZWxzZXt0aGlzLl9wYXJ0c1t3XT12fHxudWxsO3RoaXMuYnVpbGQoIWMpO3JldHVybiB0aGlzfX19O2Zvcih3IGluIHUpe3Bbd109eSh1W3ddKX11PXtxdWVyeTonPycsZnJhZ21lbnQ6JyMnfTt5PWZ1bmN0aW9uKHcsYyl7cmV0dXJuIGZ1bmN0aW9uKHYsZCl7aWYodj09PXVuZGVmaW5lZCl7cmV0dXJuIHRoaXMuX3BhcnRzW3ddfHwiIn1lbHNle2lmKHYhPT1udWxsKXt2PXYrIiI7aWYodi5jaGFyQXQoMCk9PT1jKXt2PXYuc3Vic3RyaW5nKDEpfX10aGlzLl9wYXJ0c1t3XT12O3RoaXMuYnVpbGQoIWQpO3JldHVybiB0aGlzfX19O2Zvcih3IGluIHUpe3Bbd109eSh3LHVbd10pfXU9e3NlYXJjaDpbJz8nLCdxdWVyeSddLGhhc2g6WycjJywnZnJhZ21lbnQnXX07eT1mdW5jdGlvbih3LGMpe3JldHVybiBmdW5jdGlvbih2LGQpe3ZhciB0PXRoaXNbd10odixkKTtyZXR1cm4gdHlwZW9mIHQ9PT0ic3RyaW5nIiYmdC5sZW5ndGg/KGMrdCk6dH19O2Zvcih3IGluIHUpe3Bbd109eSh1W3ddWzFdLHVbd11bMF0pfXAucGF0aG5hbWU9ZnVuY3Rpb24odixjKXtpZih2PT09dW5kZWZpbmVkfHx2PT09dHJ1ZSl7dmFyIGQ9dGhpcy5fcGFydHMucGF0aHx8KHRoaXMuX3BhcnRzLmhvc3RuYW1lPycvJzonJyk7cmV0dXJuIHY/VS5kZWNvZGVQYXRoKGQpOmR9ZWxzZXt0aGlzLl9wYXJ0cy5wYXRoPXY/VS5yZWNvZGVQYXRoKHYpOiIvIjt0aGlzLmJ1aWxkKCFjKTtyZXR1cm4gdGhpc319O3AucGF0aD1wLnBhdGhuYW1lO3AuaHJlZj1mdW5jdGlvbihjLGQpe3ZhciBlO2lmKGM9PT11bmRlZmluZWQpe3JldHVybiB0aGlzLnRvU3RyaW5nKCl9dGhpcy5fc3RyaW5nPSIiO3RoaXMuX3BhcnRzPVUuX3BhcnRzKCk7dmFyIF89YyBpbnN0YW5jZW9mIFU7dmFyIGk9dHlwZW9mIGM9PT0ib2JqZWN0IiYmKGMuaG9zdG5hbWV8fGMucGF0aHx8Yy5wYXRobmFtZSk7aWYoYy5ub2RlTmFtZSl7dmFyIGw9VS5nZXREb21BdHRyaWJ1dGUoYyk7Yz1jW2xdfHwiIjtpPWZhbHNlfWlmKCFfJiZpJiZjLnBhdGhuYW1lIT09dW5kZWZpbmVkKXtjPWMudG9TdHJpbmcoKX1pZih0eXBlb2YgYz09PSJzdHJpbmciKXt0aGlzLl9wYXJ0cz1VLnBhcnNlKGMsdGhpcy5fcGFydHMpfWVsc2UgaWYoX3x8aSl7dmFyIHM9Xz9jLl9wYXJ0czpjO2ZvcihlIGluIHMpe2lmKGguY2FsbCh0aGlzLl9wYXJ0cyxlKSl7dGhpcy5fcGFydHNbZV09c1tlXX19fWVsc2V7dGhyb3cgbmV3IFR5cGVFcnJvcigiaW52YWxpZCBpbnB1dCIpfXRoaXMuYnVpbGQoIWQpO3JldHVybiB0aGlzfTtwLmlzPWZ1bmN0aW9uKGMpe3ZhciBpPWZhbHNlO3ZhciBkPWZhbHNlO3ZhciBlPWZhbHNlO3ZhciBsPWZhbHNlO3ZhciBzPWZhbHNlO3ZhciB0PWZhbHNlO3ZhciBhPWZhbHNlO3ZhciB2PSF0aGlzLl9wYXJ0cy51cm47aWYodGhpcy5fcGFydHMuaG9zdG5hbWUpe3Y9ZmFsc2U7ZD1VLmlwNF9leHByZXNzaW9uLnRlc3QodGhpcy5fcGFydHMuaG9zdG5hbWUpO2U9VS5pcDZfZXhwcmVzc2lvbi50ZXN0KHRoaXMuX3BhcnRzLmhvc3RuYW1lKTtpPWR8fGU7bD0haTtzPWwmJlMmJlMuaGFzKHRoaXMuX3BhcnRzLmhvc3RuYW1lKTt0PWwmJlUuaWRuX2V4cHJlc3Npb24udGVzdCh0aGlzLl9wYXJ0cy5ob3N0bmFtZSk7YT1sJiZVLnB1bnljb2RlX2V4cHJlc3Npb24udGVzdCh0aGlzLl9wYXJ0cy5ob3N0bmFtZSl9c3dpdGNoKGMudG9Mb3dlckNhc2UoKSl7Y2FzZSdyZWxhdGl2ZSc6cmV0dXJuIHY7Y2FzZSdhYnNvbHV0ZSc6cmV0dXJuIXY7Y2FzZSdkb21haW4nOmNhc2UnbmFtZSc6cmV0dXJuIGw7Y2FzZSdzbGQnOnJldHVybiBzO2Nhc2UnaXAnOnJldHVybiBpO2Nhc2UnaXA0JzpjYXNlJ2lwdjQnOmNhc2UnaW5ldDQnOnJldHVybiBkO2Nhc2UnaXA2JzpjYXNlJ2lwdjYnOmNhc2UnaW5ldDYnOnJldHVybiBlO2Nhc2UnaWRuJzpyZXR1cm4gdDtjYXNlJ3VybCc6cmV0dXJuIXRoaXMuX3BhcnRzLnVybjtjYXNlJ3Vybic6cmV0dXJuISF0aGlzLl9wYXJ0cy51cm47Y2FzZSdwdW55Y29kZSc6cmV0dXJuIGF9cmV0dXJuIG51bGx9O3ZhciB6PXAucHJvdG9jb2w7dmFyIEE9cC5wb3J0O3ZhciBCPXAuaG9zdG5hbWU7cC5wcm90b2NvbD1mdW5jdGlvbih2LGMpe2lmKHYhPT11bmRlZmluZWQpe2lmKHYpe3Y9di5yZXBsYWNlKC86KFwvXC8pPyQvLCcnKTtpZih2Lm1hdGNoKC9bXmEtekEtejAtOVwuKy1dLykpe3Rocm93IG5ldyBUeXBlRXJyb3IoIlByb3RvY29sICciK3YrIicgY29udGFpbnMgY2hhcmFjdGVycyBvdGhlciB0aGFuIFtBLVowLTkuKy1dIil9fX1yZXR1cm4gei5jYWxsKHRoaXMsdixjKX07cC5zY2hlbWU9cC5wcm90b2NvbDtwLnBvcnQ9ZnVuY3Rpb24odixjKXtpZih0aGlzLl9wYXJ0cy51cm4pe3JldHVybiB2PT09dW5kZWZpbmVkPycnOnRoaXN9aWYodiE9PXVuZGVmaW5lZCl7aWYodj09PTApe3Y9bnVsbH1pZih2KXt2Kz0iIjtpZih2LmNoYXJBdCgwKT09PSI6Iil7dj12LnN1YnN0cmluZygxKX1pZih2Lm1hdGNoKC9bXjAtOV0vKSl7dGhyb3cgbmV3IFR5cGVFcnJvcigiUG9ydCAnIit2KyInIGNvbnRhaW5zIGNoYXJhY3RlcnMgb3RoZXIgdGhhbiBbMC05XSIpfX19cmV0dXJuIEEuY2FsbCh0aGlzLHYsYyl9O3AuaG9zdG5hbWU9ZnVuY3Rpb24odixjKXtpZih0aGlzLl9wYXJ0cy51cm4pe3JldHVybiB2PT09dW5kZWZpbmVkPycnOnRoaXN9aWYodiE9PXVuZGVmaW5lZCl7dmFyIHg9e307VS5wYXJzZUhvc3Qodix4KTt2PXguaG9zdG5hbWV9cmV0dXJuIEIuY2FsbCh0aGlzLHYsYyl9O3AuaG9zdD1mdW5jdGlvbih2LGMpe2lmKHRoaXMuX3BhcnRzLnVybil7cmV0dXJuIHY9PT11bmRlZmluZWQ/Jyc6dGhpc31pZih2PT09dW5kZWZpbmVkKXtyZXR1cm4gdGhpcy5fcGFydHMuaG9zdG5hbWU/VS5idWlsZEhvc3QodGhpcy5fcGFydHMpOiIifWVsc2V7VS5wYXJzZUhvc3Qodix0aGlzLl9wYXJ0cyk7dGhpcy5idWlsZCghYyk7cmV0dXJuIHRoaXN9fTtwLmF1dGhvcml0eT1mdW5jdGlvbih2LGMpe2lmKHRoaXMuX3BhcnRzLnVybil7cmV0dXJuIHY9PT11bmRlZmluZWQ/Jyc6dGhpc31pZih2PT09dW5kZWZpbmVkKXtyZXR1cm4gdGhpcy5fcGFydHMuaG9zdG5hbWU/VS5idWlsZEF1dGhvcml0eSh0aGlzLl9wYXJ0cyk6IiJ9ZWxzZXtVLnBhcnNlQXV0aG9yaXR5KHYsdGhpcy5fcGFydHMpO3RoaXMuYnVpbGQoIWMpO3JldHVybiB0aGlzfX07cC51c2VyaW5mbz1mdW5jdGlvbih2LGMpe2lmKHRoaXMuX3BhcnRzLnVybil7cmV0dXJuIHY9PT11bmRlZmluZWQ/Jyc6dGhpc31pZih2PT09dW5kZWZpbmVkKXtpZighdGhpcy5fcGFydHMudXNlcm5hbWUpe3JldHVybiIifXZhciB0PVUuYnVpbGRVc2VyaW5mbyh0aGlzLl9wYXJ0cyk7cmV0dXJuIHQuc3Vic3RyaW5nKDAsdC5sZW5ndGgtMSl9ZWxzZXtpZih2W3YubGVuZ3RoLTFdIT09J0AnKXt2Kz0nQCd9VS5wYXJzZVVzZXJpbmZvKHYsdGhpcy5fcGFydHMpO3RoaXMuYnVpbGQoIWMpO3JldHVybiB0aGlzfX07cC5yZXNvdXJjZT1mdW5jdGlvbih2LGMpe3ZhciBkO2lmKHY9PT11bmRlZmluZWQpe3JldHVybiB0aGlzLnBhdGgoKSt0aGlzLnNlYXJjaCgpK3RoaXMuaGFzaCgpfWQ9VS5wYXJzZSh2KTt0aGlzLl9wYXJ0cy5wYXRoPWQucGF0aDt0aGlzLl9wYXJ0cy5xdWVyeT1kLnF1ZXJ5O3RoaXMuX3BhcnRzLmZyYWdtZW50PWQuZnJhZ21lbnQ7dGhpcy5idWlsZCghYyk7cmV0dXJuIHRoaXN9O3Auc3ViZG9tYWluPWZ1bmN0aW9uKHYsYyl7aWYodGhpcy5fcGFydHMudXJuKXtyZXR1cm4gdj09PXVuZGVmaW5lZD8nJzp0aGlzfWlmKHY9PT11bmRlZmluZWQpe2lmKCF0aGlzLl9wYXJ0cy5ob3N0bmFtZXx8dGhpcy5pcygnSVAnKSl7cmV0dXJuIiJ9dmFyIGQ9dGhpcy5fcGFydHMuaG9zdG5hbWUubGVuZ3RoLXRoaXMuZG9tYWluKCkubGVuZ3RoLTE7cmV0dXJuIHRoaXMuX3BhcnRzLmhvc3RuYW1lLnN1YnN0cmluZygwLGQpfHwiIn1lbHNle3ZhciBlPXRoaXMuX3BhcnRzLmhvc3RuYW1lLmxlbmd0aC10aGlzLmRvbWFpbigpLmxlbmd0aDt2YXIgcz10aGlzLl9wYXJ0cy5ob3N0bmFtZS5zdWJzdHJpbmcoMCxlKTt2YXIgaT1uZXcgUmVnRXhwKCdeJytiKHMpKTtpZih2JiZ2LmNoYXJBdCh2Lmxlbmd0aC0xKSE9PScuJyl7dis9Ii4ifWlmKHYpe1UuZW5zdXJlVmFsaWRIb3N0bmFtZSh2KX10aGlzLl9wYXJ0cy5ob3N0bmFtZT10aGlzLl9wYXJ0cy5ob3N0bmFtZS5yZXBsYWNlKGksdik7dGhpcy5idWlsZCghYyk7cmV0dXJuIHRoaXN9fTtwLmRvbWFpbj1mdW5jdGlvbih2LGMpe2lmKHRoaXMuX3BhcnRzLnVybil7cmV0dXJuIHY9PT11bmRlZmluZWQ/Jyc6dGhpc31pZih0eXBlb2Ygdj09PSdib29sZWFuJyl7Yz12O3Y9dW5kZWZpbmVkfWlmKHY9PT11bmRlZmluZWQpe2lmKCF0aGlzLl9wYXJ0cy5ob3N0bmFtZXx8dGhpcy5pcygnSVAnKSl7cmV0dXJuIiJ9dmFyIHQ9dGhpcy5fcGFydHMuaG9zdG5hbWUubWF0Y2goL1wuL2cpO2lmKHQmJnQubGVuZ3RoPDIpe3JldHVybiB0aGlzLl9wYXJ0cy5ob3N0bmFtZX12YXIgZT10aGlzLl9wYXJ0cy5ob3N0bmFtZS5sZW5ndGgtdGhpcy50bGQoYykubGVuZ3RoLTE7ZT10aGlzLl9wYXJ0cy5ob3N0bmFtZS5sYXN0SW5kZXhPZignLicsZS0xKSsxO3JldHVybiB0aGlzLl9wYXJ0cy5ob3N0bmFtZS5zdWJzdHJpbmcoZSl8fCIifWVsc2V7aWYoIXYpe3Rocm93IG5ldyBUeXBlRXJyb3IoImNhbm5vdCBzZXQgZG9tYWluIGVtcHR5Iil9VS5lbnN1cmVWYWxpZEhvc3RuYW1lKHYpO2lmKCF0aGlzLl9wYXJ0cy5ob3N0bmFtZXx8dGhpcy5pcygnSVAnKSl7dGhpcy5fcGFydHMuaG9zdG5hbWU9dn1lbHNle3ZhciBkPW5ldyBSZWdFeHAoYih0aGlzLmRvbWFpbigpKSsiJCIpO3RoaXMuX3BhcnRzLmhvc3RuYW1lPXRoaXMuX3BhcnRzLmhvc3RuYW1lLnJlcGxhY2UoZCx2KX10aGlzLmJ1aWxkKCFjKTtyZXR1cm4gdGhpc319O3AudGxkPWZ1bmN0aW9uKHYsYyl7aWYodGhpcy5fcGFydHMudXJuKXtyZXR1cm4gdj09PXVuZGVmaW5lZD8nJzp0aGlzfWlmKHR5cGVvZiB2PT09J2Jvb2xlYW4nKXtjPXY7dj11bmRlZmluZWR9aWYodj09PXVuZGVmaW5lZCl7aWYoIXRoaXMuX3BhcnRzLmhvc3RuYW1lfHx0aGlzLmlzKCdJUCcpKXtyZXR1cm4iIn12YXIgZD10aGlzLl9wYXJ0cy5ob3N0bmFtZS5sYXN0SW5kZXhPZignLicpO3ZhciB0PXRoaXMuX3BhcnRzLmhvc3RuYW1lLnN1YnN0cmluZyhkKzEpO2lmKGMhPT10cnVlJiZTJiZTLmxpc3RbdC50b0xvd2VyQ2FzZSgpXSl7cmV0dXJuIFMuZ2V0KHRoaXMuX3BhcnRzLmhvc3RuYW1lKXx8dH1yZXR1cm4gdH1lbHNle3ZhciBlO2lmKCF2KXt0aHJvdyBuZXcgVHlwZUVycm9yKCJjYW5ub3Qgc2V0IFRMRCBlbXB0eSIpfWVsc2UgaWYodi5tYXRjaCgvW15hLXpBLVowLTktXS8pKXtpZihTJiZTLmlzKHYpKXtlPW5ldyBSZWdFeHAoYih0aGlzLnRsZCgpKSsiJCIpO3RoaXMuX3BhcnRzLmhvc3RuYW1lPXRoaXMuX3BhcnRzLmhvc3RuYW1lLnJlcGxhY2UoZSx2KX1lbHNle3Rocm93IG5ldyBUeXBlRXJyb3IoIlRMRCAnIit2KyInIGNvbnRhaW5zIGNoYXJhY3RlcnMgb3RoZXIgdGhhbiBbQS1aMC05XSIpfX1lbHNlIGlmKCF0aGlzLl9wYXJ0cy5ob3N0bmFtZXx8dGhpcy5pcygnSVAnKSl7dGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKCJjYW5ub3Qgc2V0IFRMRCBvbiBub24tZG9tYWluIGhvc3QiKX1lbHNle2U9bmV3IFJlZ0V4cChiKHRoaXMudGxkKCkpKyIkIik7dGhpcy5fcGFydHMuaG9zdG5hbWU9dGhpcy5fcGFydHMuaG9zdG5hbWUucmVwbGFjZShlLHYpfXRoaXMuYnVpbGQoIWMpO3JldHVybiB0aGlzfX07cC5kaXJlY3Rvcnk9ZnVuY3Rpb24odixjKXtpZih0aGlzLl9wYXJ0cy51cm4pe3JldHVybiB2PT09dW5kZWZpbmVkPycnOnRoaXN9aWYodj09PXVuZGVmaW5lZHx8dj09PXRydWUpe2lmKCF0aGlzLl9wYXJ0cy5wYXRoJiYhdGhpcy5fcGFydHMuaG9zdG5hbWUpe3JldHVybicnfWlmKHRoaXMuX3BhcnRzLnBhdGg9PT0nLycpe3JldHVybicvJ312YXIgZD10aGlzLl9wYXJ0cy5wYXRoLmxlbmd0aC10aGlzLmZpbGVuYW1lKCkubGVuZ3RoLTE7dmFyIGk9dGhpcy5fcGFydHMucGF0aC5zdWJzdHJpbmcoMCxkKXx8KHRoaXMuX3BhcnRzLmhvc3RuYW1lPyIvIjoiIik7cmV0dXJuIHY/VS5kZWNvZGVQYXRoKGkpOml9ZWxzZXt2YXIgZT10aGlzLl9wYXJ0cy5wYXRoLmxlbmd0aC10aGlzLmZpbGVuYW1lKCkubGVuZ3RoO3ZhciBsPXRoaXMuX3BhcnRzLnBhdGguc3Vic3RyaW5nKDAsZSk7dmFyIHM9bmV3IFJlZ0V4cCgnXicrYihsKSk7aWYoIXRoaXMuaXMoJ3JlbGF0aXZlJykpe2lmKCF2KXt2PScvJ31pZih2LmNoYXJBdCgwKSE9PScvJyl7dj0iLyIrdn19aWYodiYmdi5jaGFyQXQodi5sZW5ndGgtMSkhPT0nLycpe3YrPScvJ312PVUucmVjb2RlUGF0aCh2KTt0aGlzLl9wYXJ0cy5wYXRoPXRoaXMuX3BhcnRzLnBhdGgucmVwbGFjZShzLHYpO3RoaXMuYnVpbGQoIWMpO3JldHVybiB0aGlzfX07cC5maWxlbmFtZT1mdW5jdGlvbih2LGMpe2lmKHRoaXMuX3BhcnRzLnVybil7cmV0dXJuIHY9PT11bmRlZmluZWQ/Jyc6dGhpc31pZih2PT09dW5kZWZpbmVkfHx2PT09dHJ1ZSl7aWYoIXRoaXMuX3BhcnRzLnBhdGh8fHRoaXMuX3BhcnRzLnBhdGg9PT0nLycpe3JldHVybiIifXZhciBkPXRoaXMuX3BhcnRzLnBhdGgubGFzdEluZGV4T2YoJy8nKTt2YXIgZT10aGlzLl9wYXJ0cy5wYXRoLnN1YnN0cmluZyhkKzEpO3JldHVybiB2P1UuZGVjb2RlUGF0aFNlZ21lbnQoZSk6ZX1lbHNle3ZhciBpPWZhbHNlO2lmKHYuY2hhckF0KDApPT09Jy8nKXt2PXYuc3Vic3RyaW5nKDEpfWlmKHYubWF0Y2goL1wuP1wvLykpe2k9dHJ1ZX12YXIgbD1uZXcgUmVnRXhwKGIodGhpcy5maWxlbmFtZSgpKSsiJCIpO3Y9VS5yZWNvZGVQYXRoKHYpO3RoaXMuX3BhcnRzLnBhdGg9dGhpcy5fcGFydHMucGF0aC5yZXBsYWNlKGwsdik7aWYoaSl7dGhpcy5ub3JtYWxpemVQYXRoKGMpfWVsc2V7dGhpcy5idWlsZCghYyl9cmV0dXJuIHRoaXN9fTtwLnN1ZmZpeD1mdW5jdGlvbih2LGMpe2lmKHRoaXMuX3BhcnRzLnVybil7cmV0dXJuIHY9PT11bmRlZmluZWQ/Jyc6dGhpc31pZih2PT09dW5kZWZpbmVkfHx2PT09dHJ1ZSl7aWYoIXRoaXMuX3BhcnRzLnBhdGh8fHRoaXMuX3BhcnRzLnBhdGg9PT0nLycpe3JldHVybiIifXZhciBkPXRoaXMuZmlsZW5hbWUoKTt2YXIgZT1kLmxhc3RJbmRleE9mKCcuJyk7dmFyIHMsaTtpZihlPT09LTEpe3JldHVybiIifXM9ZC5zdWJzdHJpbmcoZSsxKTtpPSgvXlthLXowLTklXSskL2kpLnRlc3Qocyk/czoiIjtyZXR1cm4gdj9VLmRlY29kZVBhdGhTZWdtZW50KGkpOml9ZWxzZXtpZih2LmNoYXJBdCgwKT09PScuJyl7dj12LnN1YnN0cmluZygxKX12YXIgbD10aGlzLnN1ZmZpeCgpO3ZhciB0O2lmKCFsKXtpZighdil7cmV0dXJuIHRoaXN9dGhpcy5fcGFydHMucGF0aCs9Jy4nK1UucmVjb2RlUGF0aCh2KX1lbHNlIGlmKCF2KXt0PW5ldyBSZWdFeHAoYigiLiIrbCkrIiQiKX1lbHNle3Q9bmV3IFJlZ0V4cChiKGwpKyIkIil9aWYodCl7dj1VLnJlY29kZVBhdGgodik7dGhpcy5fcGFydHMucGF0aD10aGlzLl9wYXJ0cy5wYXRoLnJlcGxhY2UodCx2KX10aGlzLmJ1aWxkKCFjKTtyZXR1cm4gdGhpc319O3Auc2VnbWVudD1mdW5jdGlvbihzLHYsYyl7dmFyIGQ9dGhpcy5fcGFydHMudXJuPyc6JzonLyc7dmFyIGU9dGhpcy5wYXRoKCk7dmFyIHQ9ZS5zdWJzdHJpbmcoMCwxKT09PScvJzt2YXIgeD1lLnNwbGl0KGQpO2lmKHMhPT11bmRlZmluZWQmJnR5cGVvZiBzIT09J251bWJlcicpe2M9djt2PXM7cz11bmRlZmluZWR9aWYocyE9PXVuZGVmaW5lZCYmdHlwZW9mIHMhPT0nbnVtYmVyJyl7dGhyb3cgbmV3IEVycm9yKCJCYWQgc2VnbWVudCAnIitzKyInLCBtdXN0IGJlIDAtYmFzZWQgaW50ZWdlciIpfWlmKHQpe3guc2hpZnQoKX1pZihzPDApe3M9TWF0aC5tYXgoeC5sZW5ndGgrcywwKX1pZih2PT09dW5kZWZpbmVkKXtyZXR1cm4gcz09PXVuZGVmaW5lZD94Onhbc119ZWxzZSBpZihzPT09bnVsbHx8eFtzXT09PXVuZGVmaW5lZCl7aWYoZih2KSl7eD1bXTtmb3IodmFyIGk9MCxsPXYubGVuZ3RoO2k8bDtpKyspe2lmKCF2W2ldLmxlbmd0aCYmKCF4Lmxlbmd0aHx8IXhbeC5sZW5ndGgtMV0ubGVuZ3RoKSl7Y29udGludWV9aWYoeC5sZW5ndGgmJiF4W3gubGVuZ3RoLTFdLmxlbmd0aCl7eC5wb3AoKX14LnB1c2godltpXSl9fWVsc2UgaWYodnx8KHR5cGVvZiB2PT09InN0cmluZyIpKXtpZih4W3gubGVuZ3RoLTFdPT09IiIpe3hbeC5sZW5ndGgtMV09dn1lbHNle3gucHVzaCh2KX19fWVsc2V7aWYodnx8KHR5cGVvZiB2PT09InN0cmluZyImJnYubGVuZ3RoKSl7eFtzXT12fWVsc2V7eC5zcGxpY2UocywxKX19aWYodCl7eC51bnNoaWZ0KCIiKX1yZXR1cm4gdGhpcy5wYXRoKHguam9pbihkKSxjKX07cC5zZWdtZW50Q29kZWQ9ZnVuY3Rpb24ocyx2LGMpe3ZhciBkLGksbDtpZih0eXBlb2YgcyE9PSdudW1iZXInKXtjPXY7dj1zO3M9dW5kZWZpbmVkfWlmKHY9PT11bmRlZmluZWQpe2Q9dGhpcy5zZWdtZW50KHMsdixjKTtpZighZihkKSl7ZD1kIT09dW5kZWZpbmVkP1UuZGVjb2RlKGQpOnVuZGVmaW5lZH1lbHNle2ZvcihpPTAsbD1kLmxlbmd0aDtpPGw7aSsrKXtkW2ldPVUuZGVjb2RlKGRbaV0pfX1yZXR1cm4gZH1pZighZih2KSl7dj10eXBlb2Ygdj09PSdzdHJpbmcnP1UuZW5jb2RlKHYpOnZ9ZWxzZXtmb3IoaT0wLGw9di5sZW5ndGg7aTxsO2krKyl7dltpXT1VLmRlY29kZSh2W2ldKX19cmV0dXJuIHRoaXMuc2VnbWVudChzLHYsYyl9O3ZhciBxPXAucXVlcnk7cC5xdWVyeT1mdW5jdGlvbih2LGMpe2lmKHY9PT10cnVlKXtyZXR1cm4gVS5wYXJzZVF1ZXJ5KHRoaXMuX3BhcnRzLnF1ZXJ5LHRoaXMuX3BhcnRzLmVzY2FwZVF1ZXJ5U3BhY2UpfWVsc2UgaWYodHlwZW9mIHY9PT0iZnVuY3Rpb24iKXt2YXIgZD1VLnBhcnNlUXVlcnkodGhpcy5fcGFydHMucXVlcnksdGhpcy5fcGFydHMuZXNjYXBlUXVlcnlTcGFjZSk7dmFyIGU9di5jYWxsKHRoaXMsZCk7dGhpcy5fcGFydHMucXVlcnk9VS5idWlsZFF1ZXJ5KGV8fGQsdGhpcy5fcGFydHMuZHVwbGljYXRlUXVlcnlQYXJhbWV0ZXJzLHRoaXMuX3BhcnRzLmVzY2FwZVF1ZXJ5U3BhY2UpO3RoaXMuYnVpbGQoIWMpO3JldHVybiB0aGlzfWVsc2UgaWYodiE9PXVuZGVmaW5lZCYmdHlwZW9mIHYhPT0ic3RyaW5nIil7dGhpcy5fcGFydHMucXVlcnk9VS5idWlsZFF1ZXJ5KHYsdGhpcy5fcGFydHMuZHVwbGljYXRlUXVlcnlQYXJhbWV0ZXJzLHRoaXMuX3BhcnRzLmVzY2FwZVF1ZXJ5U3BhY2UpO3RoaXMuYnVpbGQoIWMpO3JldHVybiB0aGlzfWVsc2V7cmV0dXJuIHEuY2FsbCh0aGlzLHYsYyl9fTtwLnNldFF1ZXJ5PWZ1bmN0aW9uKGMsdixkKXt2YXIgZT1VLnBhcnNlUXVlcnkodGhpcy5fcGFydHMucXVlcnksdGhpcy5fcGFydHMuZXNjYXBlUXVlcnlTcGFjZSk7aWYodHlwZW9mIGM9PT0ib2JqZWN0Iil7Zm9yKHZhciBpIGluIGMpe2lmKGguY2FsbChjLGkpKXtlW2ldPWNbaV19fX1lbHNlIGlmKHR5cGVvZiBjPT09InN0cmluZyIpe2VbY109diE9PXVuZGVmaW5lZD92Om51bGx9ZWxzZXt0aHJvdyBuZXcgVHlwZUVycm9yKCJVUkkuYWRkUXVlcnkoKSBhY2NlcHRzIGFuIG9iamVjdCwgc3RyaW5nIGFzIHRoZSBuYW1lIHBhcmFtZXRlciIpfXRoaXMuX3BhcnRzLnF1ZXJ5PVUuYnVpbGRRdWVyeShlLHRoaXMuX3BhcnRzLmR1cGxpY2F0ZVF1ZXJ5UGFyYW1ldGVycyx0aGlzLl9wYXJ0cy5lc2NhcGVRdWVyeVNwYWNlKTtpZih0eXBlb2YgYyE9PSJzdHJpbmciKXtkPXZ9dGhpcy5idWlsZCghZCk7cmV0dXJuIHRoaXN9O3AuYWRkUXVlcnk9ZnVuY3Rpb24oYyx2LGQpe3ZhciBlPVUucGFyc2VRdWVyeSh0aGlzLl9wYXJ0cy5xdWVyeSx0aGlzLl9wYXJ0cy5lc2NhcGVRdWVyeVNwYWNlKTtVLmFkZFF1ZXJ5KGUsYyx2PT09dW5kZWZpbmVkP251bGw6dik7dGhpcy5fcGFydHMucXVlcnk9VS5idWlsZFF1ZXJ5KGUsdGhpcy5fcGFydHMuZHVwbGljYXRlUXVlcnlQYXJhbWV0ZXJzLHRoaXMuX3BhcnRzLmVzY2FwZVF1ZXJ5U3BhY2UpO2lmKHR5cGVvZiBjIT09InN0cmluZyIpe2Q9dn10aGlzLmJ1aWxkKCFkKTtyZXR1cm4gdGhpc307cC5yZW1vdmVRdWVyeT1mdW5jdGlvbihjLHYsZCl7dmFyIGU9VS5wYXJzZVF1ZXJ5KHRoaXMuX3BhcnRzLnF1ZXJ5LHRoaXMuX3BhcnRzLmVzY2FwZVF1ZXJ5U3BhY2UpO1UucmVtb3ZlUXVlcnkoZSxjLHYpO3RoaXMuX3BhcnRzLnF1ZXJ5PVUuYnVpbGRRdWVyeShlLHRoaXMuX3BhcnRzLmR1cGxpY2F0ZVF1ZXJ5UGFyYW1ldGVycyx0aGlzLl9wYXJ0cy5lc2NhcGVRdWVyeVNwYWNlKTtpZih0eXBlb2YgYyE9PSJzdHJpbmciKXtkPXZ9dGhpcy5idWlsZCghZCk7cmV0dXJuIHRoaXN9O3AuaGFzUXVlcnk9ZnVuY3Rpb24oYyx2LGQpe3ZhciBlPVUucGFyc2VRdWVyeSh0aGlzLl9wYXJ0cy5xdWVyeSx0aGlzLl9wYXJ0cy5lc2NhcGVRdWVyeVNwYWNlKTtyZXR1cm4gVS5oYXNRdWVyeShlLGMsdixkKX07cC5zZXRTZWFyY2g9cC5zZXRRdWVyeTtwLmFkZFNlYXJjaD1wLmFkZFF1ZXJ5O3AucmVtb3ZlU2VhcmNoPXAucmVtb3ZlUXVlcnk7cC5oYXNTZWFyY2g9cC5oYXNRdWVyeTtwLm5vcm1hbGl6ZT1mdW5jdGlvbigpe2lmKHRoaXMuX3BhcnRzLnVybil7cmV0dXJuIHRoaXMubm9ybWFsaXplUHJvdG9jb2woZmFsc2UpLm5vcm1hbGl6ZVF1ZXJ5KGZhbHNlKS5ub3JtYWxpemVGcmFnbWVudChmYWxzZSkuYnVpbGQoKX1yZXR1cm4gdGhpcy5ub3JtYWxpemVQcm90b2NvbChmYWxzZSkubm9ybWFsaXplSG9zdG5hbWUoZmFsc2UpLm5vcm1hbGl6ZVBvcnQoZmFsc2UpLm5vcm1hbGl6ZVBhdGgoZmFsc2UpLm5vcm1hbGl6ZVF1ZXJ5KGZhbHNlKS5ub3JtYWxpemVGcmFnbWVudChmYWxzZSkuYnVpbGQoKX07cC5ub3JtYWxpemVQcm90b2NvbD1mdW5jdGlvbihjKXtpZih0eXBlb2YgdGhpcy5fcGFydHMucHJvdG9jb2w9PT0ic3RyaW5nIil7dGhpcy5fcGFydHMucHJvdG9jb2w9dGhpcy5fcGFydHMucHJvdG9jb2wudG9Mb3dlckNhc2UoKTt0aGlzLmJ1aWxkKCFjKX1yZXR1cm4gdGhpc307cC5ub3JtYWxpemVIb3N0bmFtZT1mdW5jdGlvbihjKXtpZih0aGlzLl9wYXJ0cy5ob3N0bmFtZSl7aWYodGhpcy5pcygnSUROJykmJmEpe3RoaXMuX3BhcnRzLmhvc3RuYW1lPWEudG9BU0NJSSh0aGlzLl9wYXJ0cy5ob3N0bmFtZSl9ZWxzZSBpZih0aGlzLmlzKCdJUHY2JykmJkkpe3RoaXMuX3BhcnRzLmhvc3RuYW1lPUkuYmVzdCh0aGlzLl9wYXJ0cy5ob3N0bmFtZSl9dGhpcy5fcGFydHMuaG9zdG5hbWU9dGhpcy5fcGFydHMuaG9zdG5hbWUudG9Mb3dlckNhc2UoKTt0aGlzLmJ1aWxkKCFjKX1yZXR1cm4gdGhpc307cC5ub3JtYWxpemVQb3J0PWZ1bmN0aW9uKGMpe2lmKHR5cGVvZiB0aGlzLl9wYXJ0cy5wcm90b2NvbD09PSJzdHJpbmciJiZ0aGlzLl9wYXJ0cy5wb3J0PT09VS5kZWZhdWx0UG9ydHNbdGhpcy5fcGFydHMucHJvdG9jb2xdKXt0aGlzLl9wYXJ0cy5wb3J0PW51bGw7dGhpcy5idWlsZCghYyl9cmV0dXJuIHRoaXN9O3Aubm9ybWFsaXplUGF0aD1mdW5jdGlvbihjKXtpZih0aGlzLl9wYXJ0cy51cm4pe3JldHVybiB0aGlzfWlmKCF0aGlzLl9wYXJ0cy5wYXRofHx0aGlzLl9wYXJ0cy5wYXRoPT09Jy8nKXtyZXR1cm4gdGhpc312YXIgZDt2YXIgZT10aGlzLl9wYXJ0cy5wYXRoO3ZhciBpLGw7aWYoZS5jaGFyQXQoMCkhPT0nLycpe2Q9dHJ1ZTtlPScvJytlfWU9ZS5yZXBsYWNlKC8oXC8oXC5cLykrKXwoXC9cLiQpL2csJy8nKS5yZXBsYWNlKC9cL3syLH0vZywnLycpO3doaWxlKHRydWUpe2k9ZS5pbmRleE9mKCcvLi4vJyk7aWYoaT09PS0xKXticmVha31lbHNlIGlmKGk9PT0wKXtlPWUuc3Vic3RyaW5nKDMpO2JyZWFrfWw9ZS5zdWJzdHJpbmcoMCxpKS5sYXN0SW5kZXhPZignLycpO2lmKGw9PT0tMSl7bD1pfWU9ZS5zdWJzdHJpbmcoMCxsKStlLnN1YnN0cmluZyhpKzMpfWlmKGQmJnRoaXMuaXMoJ3JlbGF0aXZlJykpe2U9ZS5zdWJzdHJpbmcoMSl9ZT1VLnJlY29kZVBhdGgoZSk7dGhpcy5fcGFydHMucGF0aD1lO3RoaXMuYnVpbGQoIWMpO3JldHVybiB0aGlzfTtwLm5vcm1hbGl6ZVBhdGhuYW1lPXAubm9ybWFsaXplUGF0aDtwLm5vcm1hbGl6ZVF1ZXJ5PWZ1bmN0aW9uKGMpe2lmKHR5cGVvZiB0aGlzLl9wYXJ0cy5xdWVyeT09PSJzdHJpbmciKXtpZighdGhpcy5fcGFydHMucXVlcnkubGVuZ3RoKXt0aGlzLl9wYXJ0cy5xdWVyeT1udWxsfWVsc2V7dGhpcy5xdWVyeShVLnBhcnNlUXVlcnkodGhpcy5fcGFydHMucXVlcnksdGhpcy5fcGFydHMuZXNjYXBlUXVlcnlTcGFjZSkpfXRoaXMuYnVpbGQoIWMpfXJldHVybiB0aGlzfTtwLm5vcm1hbGl6ZUZyYWdtZW50PWZ1bmN0aW9uKGMpe2lmKCF0aGlzLl9wYXJ0cy5mcmFnbWVudCl7dGhpcy5fcGFydHMuZnJhZ21lbnQ9bnVsbDt0aGlzLmJ1aWxkKCFjKX1yZXR1cm4gdGhpc307cC5ub3JtYWxpemVTZWFyY2g9cC5ub3JtYWxpemVRdWVyeTtwLm5vcm1hbGl6ZUhhc2g9cC5ub3JtYWxpemVGcmFnbWVudDtwLmlzbzg4NTk9ZnVuY3Rpb24oKXt2YXIgZT1VLmVuY29kZTt2YXIgZD1VLmRlY29kZTtVLmVuY29kZT1lc2NhcGU7VS5kZWNvZGU9ZGVjb2RlVVJJQ29tcG9uZW50O3RoaXMubm9ybWFsaXplKCk7VS5lbmNvZGU9ZTtVLmRlY29kZT1kO3JldHVybiB0aGlzfTtwLnVuaWNvZGU9ZnVuY3Rpb24oKXt2YXIgZT1VLmVuY29kZTt2YXIgZD1VLmRlY29kZTtVLmVuY29kZT1vO1UuZGVjb2RlPXVuZXNjYXBlO3RoaXMubm9ybWFsaXplKCk7VS5lbmNvZGU9ZTtVLmRlY29kZT1kO3JldHVybiB0aGlzfTtwLnJlYWRhYmxlPWZ1bmN0aW9uKCl7dmFyIGM9dGhpcy5jbG9uZSgpO2MudXNlcm5hbWUoIiIpLnBhc3N3b3JkKCIiKS5ub3JtYWxpemUoKTt2YXIgdD0nJztpZihjLl9wYXJ0cy5wcm90b2NvbCl7dCs9Yy5fcGFydHMucHJvdG9jb2wrJzovLyd9aWYoYy5fcGFydHMuaG9zdG5hbWUpe2lmKGMuaXMoJ3B1bnljb2RlJykmJmEpe3QrPWEudG9Vbmljb2RlKGMuX3BhcnRzLmhvc3RuYW1lKTtpZihjLl9wYXJ0cy5wb3J0KXt0Kz0iOiIrYy5fcGFydHMucG9ydH19ZWxzZXt0Kz1jLmhvc3QoKX19aWYoYy5fcGFydHMuaG9zdG5hbWUmJmMuX3BhcnRzLnBhdGgmJmMuX3BhcnRzLnBhdGguY2hhckF0KDApIT09Jy8nKXt0Kz0nLyd9dCs9Yy5wYXRoKHRydWUpO2lmKGMuX3BhcnRzLnF1ZXJ5KXt2YXIgcT0nJztmb3IodmFyIGk9MCxkPWMuX3BhcnRzLnF1ZXJ5LnNwbGl0KCcmJyksbD1kLmxlbmd0aDtpPGw7aSsrKXt2YXIgZT0oZFtpXXx8IiIpLnNwbGl0KCc9Jyk7cSs9JyYnK1UuZGVjb2RlUXVlcnkoZVswXSx0aGlzLl9wYXJ0cy5lc2NhcGVRdWVyeVNwYWNlKS5yZXBsYWNlKC8mL2csJyUyNicpO2lmKGVbMV0hPT11bmRlZmluZWQpe3ErPSI9IitVLmRlY29kZVF1ZXJ5KGVbMV0sdGhpcy5fcGFydHMuZXNjYXBlUXVlcnlTcGFjZSkucmVwbGFjZSgvJi9nLCclMjYnKX19dCs9Jz8nK3Euc3Vic3RyaW5nKDEpfXQrPVUuZGVjb2RlUXVlcnkoYy5oYXNoKCksdHJ1ZSk7cmV0dXJuIHR9O3AuYWJzb2x1dGVUbz1mdW5jdGlvbihjKXt2YXIgZD10aGlzLmNsb25lKCk7dmFyIGU9Wydwcm90b2NvbCcsJ3VzZXJuYW1lJywncGFzc3dvcmQnLCdob3N0bmFtZScsJ3BvcnQnXTt2YXIgbCxpLHA7aWYodGhpcy5fcGFydHMudXJuKXt0aHJvdyBuZXcgRXJyb3IoJ1VSTnMgZG8gbm90IGhhdmUgYW55IGdlbmVyYWxseSBkZWZpbmVkIGhpZXJhcmNoaWNhbCBjb21wb25lbnRzJyl9aWYoIShjIGluc3RhbmNlb2YgVSkpe2M9bmV3IFUoYyl9aWYoIWQuX3BhcnRzLnByb3RvY29sKXtkLl9wYXJ0cy5wcm90b2NvbD1jLl9wYXJ0cy5wcm90b2NvbH1pZih0aGlzLl9wYXJ0cy5ob3N0bmFtZSl7cmV0dXJuIGR9Zm9yKGk9MDtwPWVbaV07aSsrKXtkLl9wYXJ0c1twXT1jLl9wYXJ0c1twXX1lPVsncXVlcnknLCdwYXRoJ107Zm9yKGk9MDtwPWVbaV07aSsrKXtpZighZC5fcGFydHNbcF0mJmMuX3BhcnRzW3BdKXtkLl9wYXJ0c1twXT1jLl9wYXJ0c1twXX19aWYoZC5wYXRoKCkuY2hhckF0KDApIT09Jy8nKXtsPWMuZGlyZWN0b3J5KCk7ZC5fcGFydHMucGF0aD0obD8obCsnLycpOicnKStkLl9wYXJ0cy5wYXRoO2Qubm9ybWFsaXplUGF0aCgpfWQuYnVpbGQoKTtyZXR1cm4gZH07cC5yZWxhdGl2ZVRvPWZ1bmN0aW9uKGMpe3ZhciBkPXRoaXMuY2xvbmUoKS5ub3JtYWxpemUoKTt2YXIgZSxpLGwscyx0O2lmKGQuX3BhcnRzLnVybil7dGhyb3cgbmV3IEVycm9yKCdVUk5zIGRvIG5vdCBoYXZlIGFueSBnZW5lcmFsbHkgZGVmaW5lZCBoaWVyYXJjaGljYWwgY29tcG9uZW50cycpfWM9bmV3IFUoYykubm9ybWFsaXplKCk7ZT1kLl9wYXJ0cztpPWMuX3BhcnRzO3M9ZC5wYXRoKCk7dD1jLnBhdGgoKTtpZihzLmNoYXJBdCgwKSE9PScvJyl7dGhyb3cgbmV3IEVycm9yKCdVUkkgaXMgYWxyZWFkeSByZWxhdGl2ZScpfWlmKHQuY2hhckF0KDApIT09Jy8nKXt0aHJvdyBuZXcgRXJyb3IoJ0Nhbm5vdCBjYWxjdWxhdGUgYSBVUkkgcmVsYXRpdmUgdG8gYW5vdGhlciByZWxhdGl2ZSBVUkknKX1pZihlLnByb3RvY29sPT09aS5wcm90b2NvbCl7ZS5wcm90b2NvbD1udWxsfWlmKGUudXNlcm5hbWUhPT1pLnVzZXJuYW1lfHxlLnBhc3N3b3JkIT09aS5wYXNzd29yZCl7cmV0dXJuIGQuYnVpbGQoKX1pZihlLnByb3RvY29sIT09bnVsbHx8ZS51c2VybmFtZSE9PW51bGx8fGUucGFzc3dvcmQhPT1udWxsKXtyZXR1cm4gZC5idWlsZCgpfWlmKGUuaG9zdG5hbWU9PT1pLmhvc3RuYW1lJiZlLnBvcnQ9PT1pLnBvcnQpe2UuaG9zdG5hbWU9bnVsbDtlLnBvcnQ9bnVsbH1lbHNle3JldHVybiBkLmJ1aWxkKCl9aWYocz09PXQpe2UucGF0aD0nJztyZXR1cm4gZC5idWlsZCgpfWw9VS5jb21tb25QYXRoKGQucGF0aCgpLGMucGF0aCgpKTtpZighbCl7cmV0dXJuIGQuYnVpbGQoKX12YXIgdj1pLnBhdGguc3Vic3RyaW5nKGwubGVuZ3RoKS5yZXBsYWNlKC9bXlwvXSokLywnJykucmVwbGFjZSgvLio/XC8vZywnLi4vJyk7ZS5wYXRoPXYrZS5wYXRoLnN1YnN0cmluZyhsLmxlbmd0aCk7cmV0dXJuIGQuYnVpbGQoKX07cC5lcXVhbHM9ZnVuY3Rpb24oYyl7dmFyIGQ9dGhpcy5jbG9uZSgpO3ZhciB0PW5ldyBVKGMpO3ZhciBlPXt9O3ZhciBpPXt9O3ZhciBsPXt9O3ZhciBzLHYseDtkLm5vcm1hbGl6ZSgpO3Qubm9ybWFsaXplKCk7aWYoZC50b1N0cmluZygpPT09dC50b1N0cmluZygpKXtyZXR1cm4gdHJ1ZX1zPWQucXVlcnkoKTt2PXQucXVlcnkoKTtkLnF1ZXJ5KCIiKTt0LnF1ZXJ5KCIiKTtpZihkLnRvU3RyaW5nKCkhPT10LnRvU3RyaW5nKCkpe3JldHVybiBmYWxzZX1pZihzLmxlbmd0aCE9PXYubGVuZ3RoKXtyZXR1cm4gZmFsc2V9ZT1VLnBhcnNlUXVlcnkocyx0aGlzLl9wYXJ0cy5lc2NhcGVRdWVyeVNwYWNlKTtpPVUucGFyc2VRdWVyeSh2LHRoaXMuX3BhcnRzLmVzY2FwZVF1ZXJ5U3BhY2UpO2Zvcih4IGluIGUpe2lmKGguY2FsbChlLHgpKXtpZighZihlW3hdKSl7aWYoZVt4XSE9PWlbeF0pe3JldHVybiBmYWxzZX19ZWxzZSBpZighbShlW3hdLGlbeF0pKXtyZXR1cm4gZmFsc2V9bFt4XT10cnVlfX1mb3IoeCBpbiBpKXtpZihoLmNhbGwoaSx4KSl7aWYoIWxbeF0pe3JldHVybiBmYWxzZX19fXJldHVybiB0cnVlfTtwLmR1cGxpY2F0ZVF1ZXJ5UGFyYW1ldGVycz1mdW5jdGlvbih2KXt0aGlzLl9wYXJ0cy5kdXBsaWNhdGVRdWVyeVBhcmFtZXRlcnM9ISF2O3JldHVybiB0aGlzfTtwLmVzY2FwZVF1ZXJ5U3BhY2U9ZnVuY3Rpb24odil7dGhpcy5fcGFydHMuZXNjYXBlUXVlcnlTcGFjZT0hIXY7cmV0dXJuIHRoaXN9O3JldHVybiBVfSkpOw0KLyogQ29weXJpZ2h0IEdvb2dsZSBJbmMuDQogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2VuY2UgVmVyc2lvbiAyLjANCiAqIEF1dG9nZW5lcmF0ZWQgYXQgVHVlIE1heSAyMiAxMDoxODoyMSBQRFQgMjAxMg0KICogXEBvdmVycmlkZXMgd2luZG93DQogKiBcQHByb3ZpZGVzIGNzc1NjaGVtYSwgQ1NTX1BST1BfQklUX1FVQU5USVRZLCBDU1NfUFJPUF9CSVRfSEFTSF9WQUxVRSwgQ1NTX1BST1BfQklUX05FR0FUSVZFX1FVQU5USVRZLCBDU1NfUFJPUF9CSVRfUVNUUklOR19DT05URU5ULCBDU1NfUFJPUF9CSVRfUVNUUklOR19VUkwsIENTU19QUk9QX0JJVF9ISVNUT1JZX0lOU0VOU0lUSVZFLCBDU1NfUFJPUF9CSVRfWl9JTkRFWCwgQ1NTX1BST1BfQklUX0FMTE9XRURfSU5fTElOSyAqLw0KdmFyIENTU19QUk9QX0JJVF9RVUFOVElUWT0xO3ZhciBDU1NfUFJPUF9CSVRfSEFTSF9WQUxVRT0yO3ZhciBDU1NfUFJPUF9CSVRfTkVHQVRJVkVfUVVBTlRJVFk9NDt2YXIgQ1NTX1BST1BfQklUX1FTVFJJTkdfQ09OVEVOVD04O3ZhciBDU1NfUFJPUF9CSVRfUVNUUklOR19VUkw9MTY7dmFyIENTU19QUk9QX0JJVF9ISVNUT1JZX0lOU0VOU0lUSVZFPTMyO3ZhciBDU1NfUFJPUF9CSVRfWl9JTkRFWD02NDt2YXIgQ1NTX1BST1BfQklUX0FMTE9XRURfSU5fTElOSz0xMjg7dmFyIGNzc1NjaGVtYT0oZnVuY3Rpb24oKXt2YXIgcz1bJ3JnYig/OlxcKFxccyooPzpcXGQrfDB8XFxkKyg/OlxcLlxcZCspPyUpXFxzKixcXHMqKD86XFxkK3wwfFxcZCsoPzpcXC5cXGQrKT8lKVxccyosXFxzKig/OlxcZCt8MHxcXGQrKD86XFwuXFxkKyk/JSl8YVxcKFxccyooPzpcXGQrfDB8XFxkKyg/OlxcLlxcZCspPyUpXFxzKixcXHMqKD86XFxkK3wwfFxcZCsoPzpcXC5cXGQrKT8lKVxccyosXFxzKig/OlxcZCt8MHxcXGQrKD86XFwuXFxkKyk/JSlcXHMqLFxccyooPzpcXGQrfDAoPzpcXC5cXGQrKT98XFwuXFxkK3wxKD86XFwuMCspP3wwfFxcZCsoPzpcXC5cXGQrKT8lKSkgKlxcKSddLGM9Wy9eICokL2ksUmVnRXhwKCdeICooPzpcXHMqJytzWzBdKyd8KD86XFxzKicrc1swXSsnKT8pKyAqJCcsJ2knKSxSZWdFeHAoJ14gKlxccyonK3NbMF0rJyAqJCcsJ2knKSxSZWdFeHAoJ14gKlxccyonK3NbMF0rJ1xccyonK3NbMF0rJyAqJCcsJ2knKV0sTD1bWydhbGljZWJsdWUnLCdhbnRpcXVld2hpdGUnLCdhcXVhJywnYXF1YW1hcmluZScsJ2F6dXJlJywnYmVpZ2UnLCdiaXNxdWUnLCdibGFjaycsJ2JsYW5jaGVkYWxtb25kJywnYmx1ZScsJ2JsdWV2aW9sZXQnLCdicm93bicsJ2J1cmx5d29vZCcsJ2NhZGV0Ymx1ZScsJ2NoYXJ0cmV1c2UnLCdjaG9jb2xhdGUnLCdjb3JhbCcsJ2Nvcm5mbG93ZXJibHVlJywnY29ybnNpbGsnLCdjcmltc29uJywnY3lhbicsJ2RhcmtibHVlJywnZGFya2N5YW4nLCdkYXJrZ29sZGVucm9kJywnZGFya2dyYXknLCdkYXJrZ3JlZW4nLCdkYXJra2hha2knLCdkYXJrbWFnZW50YScsJ2RhcmtvbGl2ZWdyZWVuJywnZGFya29yYW5nZScsJ2RhcmtvcmNoaWQnLCdkYXJrcmVkJywnZGFya3NhbG1vbicsJ2RhcmtzZWFncmVlbicsJ2RhcmtzbGF0ZWJsdWUnLCdkYXJrc2xhdGVncmF5JywnZGFya3R1cnF1b2lzZScsJ2Rhcmt2aW9sZXQnLCdkZWVwcGluaycsJ2RlZXBza3libHVlJywnZGltZ3JheScsJ2RvZGdlcmJsdWUnLCdmaXJlYnJpY2snLCdmbG9yYWx3aGl0ZScsJ2ZvcmVzdGdyZWVuJywnZnVjaHNpYScsJ2dhaW5zYm9ybycsJ2dob3N0d2hpdGUnLCdnb2xkJywnZ29sZGVucm9kJywnZ3JheScsJ2dyZWVuJywnZ3JlZW55ZWxsb3cnLCdob25leWRldycsJ2hvdHBpbmsnLCdpbmRpYW5yZWQnLCdpbmRpZ28nLCdpdm9yeScsJ2toYWtpJywnbGF2ZW5kZXInLCdsYXZlbmRlcmJsdXNoJywnbGF3bmdyZWVuJywnbGVtb25jaGlmZm9uJywnbGlnaHRibHVlJywnbGlnaHRjb3JhbCcsJ2xpZ2h0Y3lhbicsJ2xpZ2h0Z29sZGVucm9keWVsbG93JywnbGlnaHRncmVlbicsJ2xpZ2h0Z3JleScsJ2xpZ2h0cGluaycsJ2xpZ2h0c2FsbW9uJywnbGlnaHRzZWFncmVlbicsJ2xpZ2h0c2t5Ymx1ZScsJ2xpZ2h0c2xhdGVncmF5JywnbGlnaHRzdGVlbGJsdWUnLCdsaWdodHllbGxvdycsJ2xpbWUnLCdsaW1lZ3JlZW4nLCdsaW5lbicsJ21hZ2VudGEnLCdtYXJvb24nLCdtZWRpdW1hcXVhbWFyaW5lJywnbWVkaXVtYmx1ZScsJ21lZGl1bW9yY2hpZCcsJ21lZGl1bXB1cnBsZScsJ21lZGl1bXNlYWdyZWVuJywnbWVkaXVtc2xhdGVibHVlJywnbWVkaXVtc3ByaW5nZ3JlZW4nLCdtZWRpdW10dXJxdW9pc2UnLCdtZWRpdW12aW9sZXRyZWQnLCdtaWRuaWdodGJsdWUnLCdtaW50Y3JlYW0nLCdtaXN0eXJvc2UnLCdtb2NjYXNpbicsJ25hdmFqb3doaXRlJywnbmF2eScsJ29sZGxhY2UnLCdvbGl2ZScsJ29saXZlZHJhYicsJ29yYW5nZScsJ29yYW5nZXJlZCcsJ29yY2hpZCcsJ3BhbGVnb2xkZW5yb2QnLCdwYWxlZ3JlZW4nLCdwYWxldHVycXVvaXNlJywncGFsZXZpb2xldHJlZCcsJ3BhcGF5YXdoaXAnLCdwZWFjaHB1ZmYnLCdwZXJ1JywncGluaycsJ3BsdW0nLCdwb3dkZXJibHVlJywncHVycGxlJywncmVkJywncm9zeWJyb3duJywncm95YWxibHVlJywnc2FkZGxlYnJvd24nLCdzYWxtb24nLCdzYW5keWJyb3duJywnc2VhZ3JlZW4nLCdzZWFzaGVsbCcsJ3NpZW5uYScsJ3NpbHZlcicsJ3NreWJsdWUnLCdzbGF0ZWJsdWUnLCdzbGF0ZWdyYXknLCdzbm93Jywnc3ByaW5nZ3JlZW4nLCdzdGVlbGJsdWUnLCd0YW4nLCd0ZWFsJywndGhpc3RsZScsJ3RvbWF0bycsJ3R1cnF1b2lzZScsJ3Zpb2xldCcsJ3doZWF0Jywnd2hpdGUnLCd3aGl0ZXNtb2tlJywneWVsbG93JywneWVsbG93Z3JlZW4nXSxbJ2FsbC1zY3JvbGwnLCdjb2wtcmVzaXplJywnY3Jvc3NoYWlyJywnZGVmYXVsdCcsJ2UtcmVzaXplJywnaGFuZCcsJ2hlbHAnLCdtb3ZlJywnbi1yZXNpemUnLCduZS1yZXNpemUnLCduby1kcm9wJywnbm90LWFsbG93ZWQnLCdudy1yZXNpemUnLCdwb2ludGVyJywncHJvZ3Jlc3MnLCdyb3ctcmVzaXplJywncy1yZXNpemUnLCdzZS1yZXNpemUnLCdzdy1yZXNpemUnLCd0ZXh0JywndmVydGljYWwtdGV4dCcsJ3ctcmVzaXplJywnd2FpdCddLFsnLW1vei1pbmxpbmUtYm94JywnLW1vei1pbmxpbmUtc3RhY2snLCdibG9jaycsJ2lubGluZScsJ2lubGluZS1ibG9jaycsJ2lubGluZS10YWJsZScsJ2xpc3QtaXRlbScsJ3J1bi1pbicsJ3RhYmxlJywndGFibGUtY2FwdGlvbicsJ3RhYmxlLWNlbGwnLCd0YWJsZS1jb2x1bW4nLCd0YWJsZS1jb2x1bW4tZ3JvdXAnLCd0YWJsZS1mb290ZXItZ3JvdXAnLCd0YWJsZS1oZWFkZXItZ3JvdXAnLCd0YWJsZS1yb3cnLCd0YWJsZS1yb3ctZ3JvdXAnXSxbJ2FybWVuaWFuJywnY2lyY2xlJywnZGVjaW1hbCcsJ2RlY2ltYWwtbGVhZGluZy16ZXJvJywnZGlzYycsJ2dlb3JnaWFuJywnbG93ZXItYWxwaGEnLCdsb3dlci1ncmVlaycsJ2xvd2VyLWxhdGluJywnbG93ZXItcm9tYW4nLCdzcXVhcmUnLCd1cHBlci1hbHBoYScsJ3VwcGVyLWxhdGluJywndXBwZXItcm9tYW4nXSxbJzEwMCcsJzIwMCcsJzMwMCcsJzQwMCcsJzUwMCcsJzYwMCcsJzcwMCcsJzgwMCcsJzkwMCcsJ2JvbGQnLCdib2xkZXInLCdsaWdodGVyJ10sWydjb25kZW5zZWQnLCdleHBhbmRlZCcsJ2V4dHJhLWNvbmRlbnNlZCcsJ2V4dHJhLWV4cGFuZGVkJywnbmFycm93ZXInLCdzZW1pLWNvbmRlbnNlZCcsJ3NlbWktZXhwYW5kZWQnLCd1bHRyYS1jb25kZW5zZWQnLCd1bHRyYS1leHBhbmRlZCcsJ3dpZGVyJ10sWydiZWhpbmQnLCdjZW50ZXItbGVmdCcsJ2NlbnRlci1yaWdodCcsJ2Zhci1sZWZ0JywnZmFyLXJpZ2h0JywnbGVmdC1zaWRlJywnbGVmdHdhcmRzJywncmlnaHQtc2lkZScsJ3JpZ2h0d2FyZHMnXSxbJ2xhcmdlJywnbGFyZ2VyJywnc21hbGwnLCdzbWFsbGVyJywneC1sYXJnZScsJ3gtc21hbGwnLCd4eC1sYXJnZScsJ3h4LXNtYWxsJ10sWyctbW96LXByZS13cmFwJywnLW8tcHJlLXdyYXAnLCctcHJlLXdyYXAnLCdub3dyYXAnLCdwcmUnLCdwcmUtbGluZScsJ3ByZS13cmFwJ10sWydkYXNoZWQnLCdkb3R0ZWQnLCdkb3VibGUnLCdncm9vdmUnLCdvdXRzZXQnLCdyaWRnZScsJ3NvbGlkJ10sWydiYXNlbGluZScsJ21pZGRsZScsJ3N1YicsJ3N1cGVyJywndGV4dC1ib3R0b20nLCd0ZXh0LXRvcCddLFsnY2FwdGlvbicsJ2ljb24nLCdtZW51JywnbWVzc2FnZS1ib3gnLCdzbWFsbC1jYXB0aW9uJywnc3RhdHVzLWJhciddLFsnZmFzdCcsJ2Zhc3RlcicsJ3Nsb3cnLCdzbG93ZXInLCd4LWZhc3QnLCd4LXNsb3cnXSxbJ2Fib3ZlJywnYmVsb3cnLCdoaWdoZXInLCdsZXZlbCcsJ2xvd2VyJ10sWydib3JkZXItYm94JywnY29udGFpbicsJ2NvbnRlbnQtYm94JywnY292ZXInLCdwYWRkaW5nLWJveCddLFsnY3Vyc2l2ZScsJ2ZhbnRhc3knLCdtb25vc3BhY2UnLCdzYW5zLXNlcmlmJywnc2VyaWYnXSxbJ2xvdWQnLCdzaWxlbnQnLCdzb2Z0JywneC1sb3VkJywneC1zb2Z0J10sWyduby1yZXBlYXQnLCdyZXBlYXQteCcsJ3JlcGVhdC15Jywncm91bmQnLCdzcGFjZSddLFsnYmxpbmsnLCdsaW5lLXRocm91Z2gnLCdvdmVybGluZScsJ3VuZGVybGluZSddLFsnaGlnaCcsJ2xvdycsJ3gtaGlnaCcsJ3gtbG93J10sWydhYnNvbHV0ZScsJ3JlbGF0aXZlJywnc3RhdGljJ10sWydjYXBpdGFsaXplJywnbG93ZXJjYXNlJywndXBwZXJjYXNlJ10sWydjaGlsZCcsJ2ZlbWFsZScsJ21hbGUnXSxbJ2JpZGktb3ZlcnJpZGUnLCdlbWJlZCddLFsnYm90dG9tJywndG9wJ10sWydjbGlwJywnZWxsaXBzaXMnXSxbJ2NvbnRpbnVvdXMnLCdkaWdpdHMnXSxbJ2hpZGUnLCdzaG93J10sWydpbnNpZGUnLCdvdXRzaWRlJ10sWydpdGFsaWMnLCdvYmxpcXVlJ10sWydsZWZ0JywncmlnaHQnXSxbJ2x0cicsJ3J0bCddLFsnbm8tY29udGVudCcsJ25vLWRpc3BsYXknXSxbJ3N1cHByZXNzJywndW5yZXN0cmljdGVkJ10sWyd0aGljaycsJ3RoaW4nXSxbJywnXSxbJy8nXSxbJ2Fsd2F5cyddLFsnYXV0byddLFsnYXZvaWQnXSxbJ2JvdGgnXSxbJ2JyZWFrLXdvcmQnXSxbJ2NlbnRlciddLFsnY29kZSddLFsnY29sbGFwc2UnXSxbJ2ZpeGVkJ10sWydoaWRkZW4nXSxbJ2luaGVyaXQnXSxbJ2luc2V0J10sWydpbnZlcnQnXSxbJ2p1c3RpZnknXSxbJ2xvY2FsJ10sWydtZWRpdW0nXSxbJ21peCddLFsnbm9uZSddLFsnbm9ybWFsJ10sWydvbmNlJ10sWydyZXBlYXQnXSxbJ3Njcm9sbCddLFsnc2VwYXJhdGUnXSxbJ3NtYWxsLWNhcHMnXSxbJ3NwZWxsLW91dCddLFsndHJhbnNwYXJlbnQnXSxbJ3Zpc2libGUnXV07cmV0dXJueyctbW96LWJvcmRlci1yYWRpdXMnOnsnY3NzRXh0cmEnOmNbMF0sJ2Nzc1Byb3BCaXRzJzo1LCdjc3NMaXRHcm91cCc6W0xbMzZdXX0sJy1tb3otYm9yZGVyLXJhZGl1cy1ib3R0b21sZWZ0Jzp7J2Nzc0V4dHJhJzpjWzBdLCdjc3NQcm9wQml0cyc6NX0sJy1tb3otYm9yZGVyLXJhZGl1cy1ib3R0b21yaWdodCc6eydjc3NFeHRyYSc6Y1swXSwnY3NzUHJvcEJpdHMnOjV9LCctbW96LWJvcmRlci1yYWRpdXMtdG9wbGVmdCc6eydjc3NFeHRyYSc6Y1swXSwnY3NzUHJvcEJpdHMnOjV9LCctbW96LWJvcmRlci1yYWRpdXMtdG9wcmlnaHQnOnsnY3NzRXh0cmEnOmNbMF0sJ2Nzc1Byb3BCaXRzJzo1fSwnLW1vei1ib3gtc2hhZG93Jzp7J2Nzc0V4dHJhJzpjWzFdLCdjc3NBbHRlcm5hdGVzJzpbJ2JveFNoYWRvdyddLCdjc3NQcm9wQml0cyc6NywnY3NzTGl0R3JvdXAnOltMWzBdLExbMzVdLExbNDhdLExbNTRdXX0sJy1tb3otb3BhY2l0eSc6eydjc3NQcm9wQml0cyc6MSwnY3NzTGl0R3JvdXAnOltMWzQ3XV19LCctbW96LW91dGxpbmUnOnsnY3NzRXh0cmEnOmNbM10sJ2Nzc1Byb3BCaXRzJzo3LCdjc3NMaXRHcm91cCc6W0xbMF0sTFs5XSxMWzM0XSxMWzQ2XSxMWzQ3XSxMWzQ4XSxMWzQ5XSxMWzUyXSxMWzU0XV19LCctbW96LW91dGxpbmUtY29sb3InOnsnY3NzRXh0cmEnOmNbMl0sJ2Nzc1Byb3BCaXRzJzoyLCdjc3NMaXRHcm91cCc6W0xbMF0sTFs0N10sTFs0OV1dfSwnLW1vei1vdXRsaW5lLXN0eWxlJzp7J2Nzc1Byb3BCaXRzJzowLCdjc3NMaXRHcm91cCc6W0xbOV0sTFs0Nl0sTFs0N10sTFs0OF0sTFs1NF1dfSwnLW1vei1vdXRsaW5lLXdpZHRoJzp7J2Nzc1Byb3BCaXRzJzo1LCdjc3NMaXRHcm91cCc6W0xbMzRdLExbNDddLExbNTJdXX0sJy1vLXRleHQtb3ZlcmZsb3cnOnsnY3NzUHJvcEJpdHMnOjAsJ2Nzc0xpdEdyb3VwJzpbTFsyNV1dfSwnLXdlYmtpdC1ib3JkZXItYm90dG9tLWxlZnQtcmFkaXVzJzp7J2Nzc0V4dHJhJzpjWzBdLCdjc3NQcm9wQml0cyc6NX0sJy13ZWJraXQtYm9yZGVyLWJvdHRvbS1yaWdodC1yYWRpdXMnOnsnY3NzRXh0cmEnOmNbMF0sJ2Nzc1Byb3BCaXRzJzo1fSwnLXdlYmtpdC1ib3JkZXItcmFkaXVzJzp7J2Nzc0V4dHJhJzpjWzBdLCdjc3NQcm9wQml0cyc6NSwnY3NzTGl0R3JvdXAnOltMWzM2XV19LCctd2Via2l0LWJvcmRlci1yYWRpdXMtYm90dG9tLWxlZnQnOnsnY3NzRXh0cmEnOmNbMF0sJ2Nzc1Byb3BCaXRzJzo1fSwnLXdlYmtpdC1ib3JkZXItcmFkaXVzLWJvdHRvbS1yaWdodCc6eydjc3NFeHRyYSc6Y1swXSwnY3NzUHJvcEJpdHMnOjV9LCctd2Via2l0LWJvcmRlci1yYWRpdXMtdG9wLWxlZnQnOnsnY3NzRXh0cmEnOmNbMF0sJ2Nzc1Byb3BCaXRzJzo1fSwnLXdlYmtpdC1ib3JkZXItcmFkaXVzLXRvcC1yaWdodCc6eydjc3NFeHRyYSc6Y1swXSwnY3NzUHJvcEJpdHMnOjV9LCctd2Via2l0LWJvcmRlci10b3AtbGVmdC1yYWRpdXMnOnsnY3NzRXh0cmEnOmNbMF0sJ2Nzc1Byb3BCaXRzJzo1fSwnLXdlYmtpdC1ib3JkZXItdG9wLXJpZ2h0LXJhZGl1cyc6eydjc3NFeHRyYSc6Y1swXSwnY3NzUHJvcEJpdHMnOjV9LCctd2Via2l0LWJveC1zaGFkb3cnOnsnY3NzRXh0cmEnOmNbMV0sJ2Nzc0FsdGVybmF0ZXMnOlsnYm94U2hhZG93J10sJ2Nzc1Byb3BCaXRzJzo3LCdjc3NMaXRHcm91cCc6W0xbMF0sTFszNV0sTFs0OF0sTFs1NF1dfSwnYXppbXV0aCc6eydjc3NQcm9wQml0cyc6NSwnY3NzTGl0R3JvdXAnOltMWzZdLExbMzBdLExbNDJdLExbNDddXX0sJ2JhY2tncm91bmQnOnsnY3NzRXh0cmEnOlJlZ0V4cCgnXiAqKD86XFxzKicrc1swXSsnKXswLDJ9ICokJywnaScpLCdjc3NQcm9wQml0cyc6MjMsJ2Nzc0xpdEdyb3VwJzpbTFswXSxMWzE0XSxMWzE3XSxMWzI0XSxMWzMwXSxMWzM1XSxMWzM2XSxMWzM4XSxMWzQyXSxMWzQ1XSxMWzQ3XSxMWzUxXSxMWzU0XSxMWzU3XSxMWzU4XSxMWzYyXV19LCdiYWNrZ3JvdW5kLWF0dGFjaG1lbnQnOnsnY3NzRXh0cmEnOmNbMF0sJ2Nzc1Byb3BCaXRzJzowLCdjc3NMaXRHcm91cCc6W0xbMzVdLExbNDVdLExbNTFdLExbNThdXX0sJ2JhY2tncm91bmQtY29sb3InOnsnY3NzRXh0cmEnOmNbMl0sJ2Nzc1Byb3BCaXRzJzoxMzAsJ2Nzc0xpdEdyb3VwJzpbTFswXSxMWzQ3XSxMWzYyXV19LCdiYWNrZ3JvdW5kLWltYWdlJzp7J2Nzc0V4dHJhJzpjWzBdLCdjc3NQcm9wQml0cyc6MTYsJ2Nzc0xpdEdyb3VwJzpbTFszNV0sTFs1NF1dfSwnYmFja2dyb3VuZC1wb3NpdGlvbic6eydjc3NFeHRyYSc6Y1swXSwnY3NzUHJvcEJpdHMnOjUsJ2Nzc0xpdEdyb3VwJzpbTFsyNF0sTFszMF0sTFszNV0sTFs0Ml1dfSwnYmFja2dyb3VuZC1yZXBlYXQnOnsnY3NzRXh0cmEnOmNbMF0sJ2Nzc1Byb3BCaXRzJzowLCdjc3NMaXRHcm91cCc6W0xbMTddLExbMzVdLExbNTddXX0sJ2JvcmRlcic6eydjc3NFeHRyYSc6Y1szXSwnY3NzUHJvcEJpdHMnOjcsJ2Nzc0xpdEdyb3VwJzpbTFswXSxMWzldLExbMzRdLExbNDZdLExbNDddLExbNDhdLExbNTJdLExbNTRdLExbNjJdXX0sJ2JvcmRlci1ib3R0b20nOnsnY3NzRXh0cmEnOmNbM10sJ2Nzc1Byb3BCaXRzJzo3LCdjc3NMaXRHcm91cCc6W0xbMF0sTFs5XSxMWzM0XSxMWzQ2XSxMWzQ3XSxMWzQ4XSxMWzUyXSxMWzU0XSxMWzYyXV19LCdib3JkZXItYm90dG9tLWNvbG9yJzp7J2Nzc0V4dHJhJzpjWzJdLCdjc3NQcm9wQml0cyc6MiwnY3NzTGl0R3JvdXAnOltMWzBdLExbNDddLExbNjJdXX0sJ2JvcmRlci1ib3R0b20tbGVmdC1yYWRpdXMnOnsnY3NzRXh0cmEnOmNbMF0sJ2Nzc1Byb3BCaXRzJzo1fSwnYm9yZGVyLWJvdHRvbS1yaWdodC1yYWRpdXMnOnsnY3NzRXh0cmEnOmNbMF0sJ2Nzc1Byb3BCaXRzJzo1fSwnYm9yZGVyLWJvdHRvbS1zdHlsZSc6eydjc3NQcm9wQml0cyc6MCwnY3NzTGl0R3JvdXAnOltMWzldLExbNDZdLExbNDddLExbNDhdLExbNTRdXX0sJ2JvcmRlci1ib3R0b20td2lkdGgnOnsnY3NzUHJvcEJpdHMnOjUsJ2Nzc0xpdEdyb3VwJzpbTFszNF0sTFs0N10sTFs1Ml1dfSwnYm9yZGVyLWNvbGxhcHNlJzp7J2Nzc1Byb3BCaXRzJzowLCdjc3NMaXRHcm91cCc6W0xbNDRdLExbNDddLExbNTldXX0sJ2JvcmRlci1jb2xvcic6eydjc3NFeHRyYSc6UmVnRXhwKCdeICooPzpcXHMqJytzWzBdKycpezEsNH0gKiQnLCdpJyksJ2Nzc1Byb3BCaXRzJzoyLCdjc3NMaXRHcm91cCc6W0xbMF0sTFs0N10sTFs2Ml1dfSwnYm9yZGVyLWxlZnQnOnsnY3NzRXh0cmEnOmNbM10sJ2Nzc1Byb3BCaXRzJzo3LCdjc3NMaXRHcm91cCc6W0xbMF0sTFs5XSxMWzM0XSxMWzQ2XSxMWzQ3XSxMWzQ4XSxMWzUyXSxMWzU0XSxMWzYyXV19LCdib3JkZXItbGVmdC1jb2xvcic6eydjc3NFeHRyYSc6Y1syXSwnY3NzUHJvcEJpdHMnOjIsJ2Nzc0xpdEdyb3VwJzpbTFswXSxMWzQ3XSxMWzYyXV19LCdib3JkZXItbGVmdC1zdHlsZSc6eydjc3NQcm9wQml0cyc6MCwnY3NzTGl0R3JvdXAnOltMWzldLExbNDZdLExbNDddLExbNDhdLExbNTRdXX0sJ2JvcmRlci1sZWZ0LXdpZHRoJzp7J2Nzc1Byb3BCaXRzJzo1LCdjc3NMaXRHcm91cCc6W0xbMzRdLExbNDddLExbNTJdXX0sJ2JvcmRlci1yYWRpdXMnOnsnY3NzRXh0cmEnOmNbMF0sJ2Nzc1Byb3BCaXRzJzo1LCdjc3NMaXRHcm91cCc6W0xbMzZdXX0sJ2JvcmRlci1yaWdodCc6eydjc3NFeHRyYSc6Y1szXSwnY3NzUHJvcEJpdHMnOjcsJ2Nzc0xpdEdyb3VwJzpbTFswXSxMWzldLExbMzRdLExbNDZdLExbNDddLExbNDhdLExbNTJdLExbNTRdLExbNjJdXX0sJ2JvcmRlci1yaWdodC1jb2xvcic6eydjc3NFeHRyYSc6Y1syXSwnY3NzUHJvcEJpdHMnOjIsJ2Nzc0xpdEdyb3VwJzpbTFswXSxMWzQ3XSxMWzYyXV19LCdib3JkZXItcmlnaHQtc3R5bGUnOnsnY3NzUHJvcEJpdHMnOjAsJ2Nzc0xpdEdyb3VwJzpbTFs5XSxMWzQ2XSxMWzQ3XSxMWzQ4XSxMWzU0XV19LCdib3JkZXItcmlnaHQtd2lkdGgnOnsnY3NzUHJvcEJpdHMnOjUsJ2Nzc0xpdEdyb3VwJzpbTFszNF0sTFs0N10sTFs1Ml1dfSwnYm9yZGVyLXNwYWNpbmcnOnsnY3NzRXh0cmEnOmNbMF0sJ2Nzc1Byb3BCaXRzJzo1LCdjc3NMaXRHcm91cCc6W0xbNDddXX0sJ2JvcmRlci1zdHlsZSc6eydjc3NQcm9wQml0cyc6MCwnY3NzTGl0R3JvdXAnOltMWzldLExbNDZdLExbNDddLExbNDhdLExbNTRdXX0sJ2JvcmRlci10b3AnOnsnY3NzRXh0cmEnOmNbM10sJ2Nzc1Byb3BCaXRzJzo3LCdjc3NMaXRHcm91cCc6W0xbMF0sTFs5XSxMWzM0XSxMWzQ2XSxMWzQ3XSxMWzQ4XSxMWzUyXSxMWzU0XSxMWzYyXV19LCdib3JkZXItdG9wLWNvbG9yJzp7J2Nzc0V4dHJhJzpjWzJdLCdjc3NQcm9wQml0cyc6MiwnY3NzTGl0R3JvdXAnOltMWzBdLExbNDddLExbNjJdXX0sJ2JvcmRlci10b3AtbGVmdC1yYWRpdXMnOnsnY3NzRXh0cmEnOmNbMF0sJ2Nzc1Byb3BCaXRzJzo1fSwnYm9yZGVyLXRvcC1yaWdodC1yYWRpdXMnOnsnY3NzRXh0cmEnOmNbMF0sJ2Nzc1Byb3BCaXRzJzo1fSwnYm9yZGVyLXRvcC1zdHlsZSc6eydjc3NQcm9wQml0cyc6MCwnY3NzTGl0R3JvdXAnOltMWzldLExbNDZdLExbNDddLExbNDhdLExbNTRdXX0sJ2JvcmRlci10b3Atd2lkdGgnOnsnY3NzUHJvcEJpdHMnOjUsJ2Nzc0xpdEdyb3VwJzpbTFszNF0sTFs0N10sTFs1Ml1dfSwnYm9yZGVyLXdpZHRoJzp7J2Nzc1Byb3BCaXRzJzo1LCdjc3NMaXRHcm91cCc6W0xbMzRdLExbNDddLExbNTJdXX0sJ2JvdHRvbSc6eydjc3NQcm9wQml0cyc6NSwnY3NzTGl0R3JvdXAnOltMWzM4XSxMWzQ3XV19LCdib3gtc2hhZG93Jzp7J2Nzc0V4dHJhJzpjWzFdLCdjc3NQcm9wQml0cyc6NywnY3NzTGl0R3JvdXAnOltMWzBdLExbMzVdLExbNDhdLExbNTRdXX0sJ2NhcHRpb24tc2lkZSc6eydjc3NQcm9wQml0cyc6MCwnY3NzTGl0R3JvdXAnOltMWzI0XSxMWzQ3XV19LCdjbGVhcic6eydjc3NQcm9wQml0cyc6MCwnY3NzTGl0R3JvdXAnOltMWzMwXSxMWzQwXSxMWzQ3XSxMWzU0XV19LCdjbGlwJzp7J2Nzc0V4dHJhJzovXiAqXHMqcmVjdFwoXHMqKD86MHxbK1wtXT9cZCsoPzpcLlxkKyk/KD86W2NlbV1tfGV4fGlufHBbY3R4XSl8YXV0bylccyosXHMqKD86MHxbK1wtXT9cZCsoPzpcLlxkKyk/KD86W2NlbV1tfGV4fGlufHBbY3R4XSl8YXV0bylccyosXHMqKD86MHxbK1wtXT9cZCsoPzpcLlxkKyk/KD86W2NlbV1tfGV4fGlufHBbY3R4XSl8YXV0bylccyosXHMqKD86MHxbK1wtXT9cZCsoPzpcLlxkKyk/KD86W2NlbV1tfGV4fGlufHBbY3R4XSl8YXV0bykgKlwpICokL2ksJ2Nzc1Byb3BCaXRzJzowLCdjc3NMaXRHcm91cCc6W0xbMzhdLExbNDddXX0sJ2NvbG9yJzp7J2Nzc0V4dHJhJzpjWzJdLCdjc3NQcm9wQml0cyc6MTMwLCdjc3NMaXRHcm91cCc6W0xbMF0sTFs0N11dfSwnY29udGVudCc6eydjc3NQcm9wQml0cyc6MH0sJ2NvdW50ZXItaW5jcmVtZW50Jzp7J2Nzc0V4dHJhJzpjWzBdLCdjc3NQcm9wQml0cyc6NSwnY3NzTGl0R3JvdXAnOltMWzQ3XSxMWzU0XV19LCdjb3VudGVyLXJlc2V0Jzp7J2Nzc0V4dHJhJzpjWzBdLCdjc3NQcm9wQml0cyc6NSwnY3NzTGl0R3JvdXAnOltMWzQ3XSxMWzU0XV19LCdjdWUnOnsnY3NzUHJvcEJpdHMnOjE2LCdjc3NMaXRHcm91cCc6W0xbNDddLExbNTRdXX0sJ2N1ZS1hZnRlcic6eydjc3NQcm9wQml0cyc6MTYsJ2Nzc0xpdEdyb3VwJzpbTFs0N10sTFs1NF1dfSwnY3VlLWJlZm9yZSc6eydjc3NQcm9wQml0cyc6MTYsJ2Nzc0xpdEdyb3VwJzpbTFs0N10sTFs1NF1dfSwnY3Vyc29yJzp7J2Nzc0V4dHJhJzpjWzBdLCdjc3NQcm9wQml0cyc6MTQ0LCdjc3NMaXRHcm91cCc6W0xbMV0sTFszNV0sTFszOF0sTFs0N11dfSwnZGlyZWN0aW9uJzp7J2Nzc1Byb3BCaXRzJzowLCdjc3NMaXRHcm91cCc6W0xbMzFdLExbNDddXX0sJ2Rpc3BsYXknOnsnY3NzUHJvcEJpdHMnOjMyLCdjc3NMaXRHcm91cCc6W0xbMl0sTFs0N10sTFs1NF1dfSwnZWxldmF0aW9uJzp7J2Nzc1Byb3BCaXRzJzo1LCdjc3NMaXRHcm91cCc6W0xbMTNdLExbNDddXX0sJ2VtcHR5LWNlbGxzJzp7J2Nzc1Byb3BCaXRzJzowLCdjc3NMaXRHcm91cCc6W0xbMjddLExbNDddXX0sJ2ZpbHRlcic6eydjc3NFeHRyYSc6L14gKig/OlxzKmFscGhhXChccypvcGFjaXR5XHMqPVxzKig/OjB8XGQrKD86XC5cZCspPyV8WytcLV0/XGQrKD86XC5cZCspPykgKlwpKSsgKiQvaSwnY3NzUHJvcEJpdHMnOjMyfSwnZmxvYXQnOnsnY3NzQWx0ZXJuYXRlcyc6Wydjc3NGbG9hdCcsJ3N0eWxlRmxvYXQnXSwnY3NzUHJvcEJpdHMnOjMyLCdjc3NMaXRHcm91cCc6W0xbMzBdLExbNDddLExbNTRdXX0sJ2ZvbnQnOnsnY3NzRXh0cmEnOmNbMF0sJ2Nzc1Byb3BCaXRzJzo5LCdjc3NMaXRHcm91cCc6W0xbNF0sTFs3XSxMWzExXSxMWzE1XSxMWzI5XSxMWzM1XSxMWzM2XSxMWzQ3XSxMWzUyXSxMWzU1XSxMWzYwXV19LCdmb250LWZhbWlseSc6eydjc3NFeHRyYSc6Y1swXSwnY3NzUHJvcEJpdHMnOjgsJ2Nzc0xpdEdyb3VwJzpbTFsxNV0sTFszNV0sTFs0N11dfSwnZm9udC1zaXplJzp7J2Nzc1Byb3BCaXRzJzoxLCdjc3NMaXRHcm91cCc6W0xbN10sTFs0N10sTFs1Ml1dfSwnZm9udC1zdHJldGNoJzp7J2Nzc1Byb3BCaXRzJzowLCdjc3NMaXRHcm91cCc6W0xbNV0sTFs1NV1dfSwnZm9udC1zdHlsZSc6eydjc3NQcm9wQml0cyc6MCwnY3NzTGl0R3JvdXAnOltMWzI5XSxMWzQ3XSxMWzU1XV19LCdmb250LXZhcmlhbnQnOnsnY3NzUHJvcEJpdHMnOjAsJ2Nzc0xpdEdyb3VwJzpbTFs0N10sTFs1NV0sTFs2MF1dfSwnZm9udC13ZWlnaHQnOnsnY3NzUHJvcEJpdHMnOjAsJ2Nzc0xpdEdyb3VwJzpbTFs0XSxMWzQ3XSxMWzU1XV19LCdoZWlnaHQnOnsnY3NzUHJvcEJpdHMnOjM3LCdjc3NMaXRHcm91cCc6W0xbMzhdLExbNDddXX0sJ2xlZnQnOnsnY3NzUHJvcEJpdHMnOjM3LCdjc3NMaXRHcm91cCc6W0xbMzhdLExbNDddXX0sJ2xldHRlci1zcGFjaW5nJzp7J2Nzc1Byb3BCaXRzJzo1LCdjc3NMaXRHcm91cCc6W0xbNDddLExbNTVdXX0sJ2xpbmUtaGVpZ2h0Jzp7J2Nzc1Byb3BCaXRzJzoxLCdjc3NMaXRHcm91cCc6W0xbNDddLExbNTVdXX0sJ2xpc3Qtc3R5bGUnOnsnY3NzUHJvcEJpdHMnOjE2LCdjc3NMaXRHcm91cCc6W0xbM10sTFsyOF0sTFs0N10sTFs1NF1dfSwnbGlzdC1zdHlsZS1pbWFnZSc6eydjc3NQcm9wQml0cyc6MTYsJ2Nzc0xpdEdyb3VwJzpbTFs0N10sTFs1NF1dfSwnbGlzdC1zdHlsZS1wb3NpdGlvbic6eydjc3NQcm9wQml0cyc6MCwnY3NzTGl0R3JvdXAnOltMWzI4XSxMWzQ3XV19LCdsaXN0LXN0eWxlLXR5cGUnOnsnY3NzUHJvcEJpdHMnOjAsJ2Nzc0xpdEdyb3VwJzpbTFszXSxMWzQ3XSxMWzU0XV19LCdtYXJnaW4nOnsnY3NzUHJvcEJpdHMnOjUsJ2Nzc0xpdEdyb3VwJzpbTFszOF0sTFs0N11dfSwnbWFyZ2luLWJvdHRvbSc6eydjc3NQcm9wQml0cyc6NSwnY3NzTGl0R3JvdXAnOltMWzM4XSxMWzQ3XV19LCdtYXJnaW4tbGVmdCc6eydjc3NQcm9wQml0cyc6NSwnY3NzTGl0R3JvdXAnOltMWzM4XSxMWzQ3XV19LCdtYXJnaW4tcmlnaHQnOnsnY3NzUHJvcEJpdHMnOjUsJ2Nzc0xpdEdyb3VwJzpbTFszOF0sTFs0N11dfSwnbWFyZ2luLXRvcCc6eydjc3NQcm9wQml0cyc6NSwnY3NzTGl0R3JvdXAnOltMWzM4XSxMWzQ3XV19LCdtYXgtaGVpZ2h0Jzp7J2Nzc1Byb3BCaXRzJzoxLCdjc3NMaXRHcm91cCc6W0xbMzhdLExbNDddLExbNTRdXX0sJ21heC13aWR0aCc6eydjc3NQcm9wQml0cyc6MSwnY3NzTGl0R3JvdXAnOltMWzM4XSxMWzQ3XSxMWzU0XV19LCdtaW4taGVpZ2h0Jzp7J2Nzc1Byb3BCaXRzJzoxLCdjc3NMaXRHcm91cCc6W0xbMzhdLExbNDddXX0sJ21pbi13aWR0aCc6eydjc3NQcm9wQml0cyc6MSwnY3NzTGl0R3JvdXAnOltMWzM4XSxMWzQ3XV19LCdvcGFjaXR5Jzp7J2Nzc1Byb3BCaXRzJzozMywnY3NzTGl0R3JvdXAnOltMWzQ3XV19LCdvdXRsaW5lJzp7J2Nzc0V4dHJhJzpjWzNdLCdjc3NQcm9wQml0cyc6NywnY3NzTGl0R3JvdXAnOltMWzBdLExbOV0sTFszNF0sTFs0Nl0sTFs0N10sTFs0OF0sTFs0OV0sTFs1Ml0sTFs1NF1dfSwnb3V0bGluZS1jb2xvcic6eydjc3NFeHRyYSc6Y1syXSwnY3NzUHJvcEJpdHMnOjIsJ2Nzc0xpdEdyb3VwJzpbTFswXSxMWzQ3XSxMWzQ5XV19LCdvdXRsaW5lLXN0eWxlJzp7J2Nzc1Byb3BCaXRzJzowLCdjc3NMaXRHcm91cCc6W0xbOV0sTFs0Nl0sTFs0N10sTFs0OF0sTFs1NF1dfSwnb3V0bGluZS13aWR0aCc6eydjc3NQcm9wQml0cyc6NSwnY3NzTGl0R3JvdXAnOltMWzM0XSxMWzQ3XSxMWzUyXV19LCdvdmVyZmxvdyc6eydjc3NQcm9wQml0cyc6MzIsJ2Nzc0xpdEdyb3VwJzpbTFszOF0sTFs0Nl0sTFs0N10sTFs1OF0sTFs2M11dfSwnb3ZlcmZsb3cteCc6eydjc3NQcm9wQml0cyc6MCwnY3NzTGl0R3JvdXAnOltMWzMyXSxMWzM4XSxMWzQ2XSxMWzU4XSxMWzYzXV19LCdvdmVyZmxvdy15Jzp7J2Nzc1Byb3BCaXRzJzowLCdjc3NMaXRHcm91cCc6W0xbMzJdLExbMzhdLExbNDZdLExbNThdLExbNjNdXX0sJ3BhZGRpbmcnOnsnY3NzUHJvcEJpdHMnOjEsJ2Nzc0xpdEdyb3VwJzpbTFs0N11dfSwncGFkZGluZy1ib3R0b20nOnsnY3NzUHJvcEJpdHMnOjMzLCdjc3NMaXRHcm91cCc6W0xbNDddXX0sJ3BhZGRpbmctbGVmdCc6eydjc3NQcm9wQml0cyc6MzMsJ2Nzc0xpdEdyb3VwJzpbTFs0N11dfSwncGFkZGluZy1yaWdodCc6eydjc3NQcm9wQml0cyc6MzMsJ2Nzc0xpdEdyb3VwJzpbTFs0N11dfSwncGFkZGluZy10b3AnOnsnY3NzUHJvcEJpdHMnOjMzLCdjc3NMaXRHcm91cCc6W0xbNDddXX0sJ3BhZ2UtYnJlYWstYWZ0ZXInOnsnY3NzUHJvcEJpdHMnOjAsJ2Nzc0xpdEdyb3VwJzpbTFszMF0sTFszN10sTFszOF0sTFszOV0sTFs0N11dfSwncGFnZS1icmVhay1iZWZvcmUnOnsnY3NzUHJvcEJpdHMnOjAsJ2Nzc0xpdEdyb3VwJzpbTFszMF0sTFszN10sTFszOF0sTFszOV0sTFs0N11dfSwncGFnZS1icmVhay1pbnNpZGUnOnsnY3NzUHJvcEJpdHMnOjAsJ2Nzc0xpdEdyb3VwJzpbTFszOF0sTFszOV0sTFs0N11dfSwncGF1c2UnOnsnY3NzUHJvcEJpdHMnOjUsJ2Nzc0xpdEdyb3VwJzpbTFs0N11dfSwncGF1c2UtYWZ0ZXInOnsnY3NzUHJvcEJpdHMnOjUsJ2Nzc0xpdEdyb3VwJzpbTFs0N11dfSwncGF1c2UtYmVmb3JlJzp7J2Nzc1Byb3BCaXRzJzo1LCdjc3NMaXRHcm91cCc6W0xbNDddXX0sJ3BpdGNoJzp7J2Nzc1Byb3BCaXRzJzo1LCdjc3NMaXRHcm91cCc6W0xbMTldLExbNDddLExbNTJdXX0sJ3BpdGNoLXJhbmdlJzp7J2Nzc1Byb3BCaXRzJzo1LCdjc3NMaXRHcm91cCc6W0xbNDddXX0sJ3BsYXktZHVyaW5nJzp7J2Nzc0V4dHJhJzpjWzBdLCdjc3NQcm9wQml0cyc6MTYsJ2Nzc0xpdEdyb3VwJzpbTFszOF0sTFs0N10sTFs1M10sTFs1NF0sTFs1N11dfSwncG9zaXRpb24nOnsnY3NzUHJvcEJpdHMnOjMyLCdjc3NMaXRHcm91cCc6W0xbMjBdLExbNDddXX0sJ3F1b3Rlcyc6eydjc3NFeHRyYSc6Y1swXSwnY3NzUHJvcEJpdHMnOjAsJ2Nzc0xpdEdyb3VwJzpbTFs0N10sTFs1NF1dfSwncmljaG5lc3MnOnsnY3NzUHJvcEJpdHMnOjUsJ2Nzc0xpdEdyb3VwJzpbTFs0N11dfSwncmlnaHQnOnsnY3NzUHJvcEJpdHMnOjM3LCdjc3NMaXRHcm91cCc6W0xbMzhdLExbNDddXX0sJ3NwZWFrJzp7J2Nzc1Byb3BCaXRzJzowLCdjc3NMaXRHcm91cCc6W0xbNDddLExbNTRdLExbNTVdLExbNjFdXX0sJ3NwZWFrLWhlYWRlcic6eydjc3NQcm9wQml0cyc6MCwnY3NzTGl0R3JvdXAnOltMWzM3XSxMWzQ3XSxMWzU2XV19LCdzcGVhay1udW1lcmFsJzp7J2Nzc1Byb3BCaXRzJzowLCdjc3NMaXRHcm91cCc6W0xbMjZdLExbNDddXX0sJ3NwZWFrLXB1bmN0dWF0aW9uJzp7J2Nzc1Byb3BCaXRzJzowLCdjc3NMaXRHcm91cCc6W0xbNDNdLExbNDddLExbNTRdXX0sJ3NwZWVjaC1yYXRlJzp7J2Nzc1Byb3BCaXRzJzo1LCdjc3NMaXRHcm91cCc6W0xbMTJdLExbNDddLExbNTJdXX0sJ3N0cmVzcyc6eydjc3NQcm9wQml0cyc6NSwnY3NzTGl0R3JvdXAnOltMWzQ3XV19LCd0YWJsZS1sYXlvdXQnOnsnY3NzUHJvcEJpdHMnOjAsJ2Nzc0xpdEdyb3VwJzpbTFszOF0sTFs0NV0sTFs0N11dfSwndGV4dC1hbGlnbic6eydjc3NQcm9wQml0cyc6MCwnY3NzTGl0R3JvdXAnOltMWzMwXSxMWzQyXSxMWzQ3XSxMWzUwXV19LCd0ZXh0LWRlY29yYXRpb24nOnsnY3NzUHJvcEJpdHMnOjAsJ2Nzc0xpdEdyb3VwJzpbTFsxOF0sTFs0N10sTFs1NF1dfSwndGV4dC1pbmRlbnQnOnsnY3NzUHJvcEJpdHMnOjUsJ2Nzc0xpdEdyb3VwJzpbTFs0N11dfSwndGV4dC1vdmVyZmxvdyc6eydjc3NQcm9wQml0cyc6MCwnY3NzTGl0R3JvdXAnOltMWzI1XV19LCd0ZXh0LXNoYWRvdyc6eydjc3NFeHRyYSc6Y1sxXSwnY3NzUHJvcEJpdHMnOjcsJ2Nzc0xpdEdyb3VwJzpbTFswXSxMWzM1XSxMWzQ4XSxMWzU0XV19LCd0ZXh0LXRyYW5zZm9ybSc6eydjc3NQcm9wQml0cyc6MCwnY3NzTGl0R3JvdXAnOltMWzIxXSxMWzQ3XSxMWzU0XV19LCd0ZXh0LXdyYXAnOnsnY3NzUHJvcEJpdHMnOjAsJ2Nzc0xpdEdyb3VwJzpbTFszM10sTFs1NF0sTFs1NV1dfSwndG9wJzp7J2Nzc1Byb3BCaXRzJzozNywnY3NzTGl0R3JvdXAnOltMWzM4XSxMWzQ3XV19LCd1bmljb2RlLWJpZGknOnsnY3NzUHJvcEJpdHMnOjAsJ2Nzc0xpdEdyb3VwJzpbTFsyM10sTFs0N10sTFs1NV1dfSwndmVydGljYWwtYWxpZ24nOnsnY3NzUHJvcEJpdHMnOjUsJ2Nzc0xpdEdyb3VwJzpbTFsxMF0sTFsyNF0sTFs0N11dfSwndmlzaWJpbGl0eSc6eydjc3NQcm9wQml0cyc6MzIsJ2Nzc0xpdEdyb3VwJzpbTFs0NF0sTFs0Nl0sTFs0N10sTFs2M11dfSwndm9pY2UtZmFtaWx5Jzp7J2Nzc0V4dHJhJzpjWzBdLCdjc3NQcm9wQml0cyc6OCwnY3NzTGl0R3JvdXAnOltMWzIyXSxMWzM1XSxMWzQ3XV19LCd2b2x1bWUnOnsnY3NzUHJvcEJpdHMnOjEsJ2Nzc0xpdEdyb3VwJzpbTFsxNl0sTFs0N10sTFs1Ml1dfSwnd2hpdGUtc3BhY2UnOnsnY3NzUHJvcEJpdHMnOjAsJ2Nzc0xpdEdyb3VwJzpbTFs4XSxMWzQ3XSxMWzU1XV19LCd3aWR0aCc6eydjc3NQcm9wQml0cyc6MzMsJ2Nzc0xpdEdyb3VwJzpbTFszOF0sTFs0N11dfSwnd29yZC1zcGFjaW5nJzp7J2Nzc1Byb3BCaXRzJzo1LCdjc3NMaXRHcm91cCc6W0xbNDddLExbNTVdXX0sJ3dvcmQtd3JhcCc6eydjc3NQcm9wQml0cyc6MCwnY3NzTGl0R3JvdXAnOltMWzQxXSxMWzU1XV19LCd6LWluZGV4Jzp7J2Nzc1Byb3BCaXRzJzo2OSwnY3NzTGl0R3JvdXAnOltMWzM4XSxMWzQ3XV19LCd6b29tJzp7J2Nzc1Byb3BCaXRzJzoxLCdjc3NMaXRHcm91cCc6W0xbNTVdXX19fSkoKTtpZih0eXBlb2Ygd2luZG93IT09J3VuZGVmaW5lZCcpe3dpbmRvd1snY3NzU2NoZW1hJ109Y3NzU2NoZW1hfQ0KLy8gQ29weXJpZ2h0IChDKSAyMDExIEdvb2dsZSBJbmMuDQovLyBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsNCi8vIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4NCi8vIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdA0KLy8gICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjANCi8vIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsDQovLyBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kDQovLyBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4NCnZhciBsZXhDc3M7dmFyIGRlY29kZUNzczsoZnVuY3Rpb24oKXtmdW5jdGlvbiBkKHMpe3ZhciBpPXBhcnNlSW50KHMuc3Vic3RyaW5nKDEpLDE2KTtpZihpPjB4ZmZmZil7cmV0dXJuIGktPTB4MTAwMDAsU3RyaW5nLmZyb21DaGFyQ29kZSgweGQ4MDArKGk+PjEwKSwweGRjMDArKGkmMHgzRkYpKX1lbHNlIGlmKGk9PWkpe3JldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlKGkpfWVsc2UgaWYoc1sxXTwnICcpe3JldHVybicnfWVsc2V7cmV0dXJuIHNbMV19fWZ1bmN0aW9uIGUocyxpKXtyZXR1cm4nIicrcy5yZXBsYWNlKC9bXHUwMDAwLVx1MDAxZlxcXCI8Pl0vZyxpKSsnIid9ZnVuY3Rpb24gYShpKXtyZXR1cm4gY1tpXXx8KGNbaV09J1xcJytpLmNoYXJDb2RlQXQoMCkudG9TdHJpbmcoMTYpKycgJyl9ZnVuY3Rpb24gYihpKXtyZXR1cm4gZltpXXx8KGZbaV09KGk8J1x4MTAnPyclMCc6JyUnKStpLmNoYXJDb2RlQXQoMCkudG9TdHJpbmcoMTYpKX12YXIgYz17J1xcJzonXFxcXCd9O3ZhciBmPXsnXFwnOiclNWMnfTt2YXIgZz0nW1xcdFxcblxcZiBdJzt2YXIgVz1nKycqJzt2YXIgTj0nW1xcblxcZl0nO3ZhciBoPSdbXFx1ZDgwMC1cXHVkYmZmXVtcXHVkYzAwLVxcdWRmZmZdJzt2YXIgaz0nW1xcdTAwODAtXFx1ZDdmZlxcdWUwMDAtXFx1ZmZmZF18JytoO3ZhciBVPSdbMC05YS1mQS1GXXsxLDZ9JytnKyc/Jzt2YXIgbD0nXFxcXCcrVTt2YXIgRT0nKD86JytVKyd8W1xcdTAwMjAtXFx1MDA3ZVxcdTAwODAtXFx1ZDdmZlxcdWUwMDBcXHVmZmZkXXwnK2grJyknO3ZhciBtPSdcXFxcJytFO3ZhciBvPScoPzpbXFx0XFx4MjFcXHgyMy1cXHgyNlxceDI4LVxceDViXFx4NWQtXFx4N2VdfCcraysnfCcrbSsnKSc7dmFyIHA9J1teXCciXFxuXFxmXFxcXF18XFxcXFtcXHNcXFNdJzt2YXIgcT0nIig/OlwnfCcrcCsnKSoiJysnfFwnKD86XCJ8JytwKycpKlwnJzt2YXIgcj0nWy0rXT8oPzpbMC05XSsoPzpbLl1bMC05XSspP3xbLl1bMC05XSspJzt2YXIgdD0nKD86W2EtekEtWl9dfCcraysnfCcrbSsnKSc7dmFyIHU9Jyg/OlthLXpBLVowLTlfLV18JytrKyd8JyttKycpJzt2YXIgdj11KycrJzt2YXIgST0nLT8nK3QrdSsnKic7dmFyIEE9J0AnK0k7dmFyIEg9JyMnK3Y7dmFyIHc9cjt2YXIgeD0nKD86QD8tPycrdCsnfCMpJyt1KycqJzt2YXIgUD1yKyclJzt2YXIgRD1yK0k7dmFyIHk9cisnKD86JXwnK0krJyk/Jzt2YXIgej0ndXJsWyhdJytXKycoPzonK3ErJ3wnK28rJyopJytXKydbKV0nO3ZhciBCPSdVWytdWzAtOUEtRj9dezEsNn0oPzotWzAtOUEtRl17MSw2fSk/Jzt2YXIgQz0nPFwhLS0nO3ZhciBGPSctLT4nO3ZhciBTPWcrJysnO3ZhciBHPScvKD86WypdW14qXSpbKl0rKD86W14vXVteKl0qWypdKykqL3wvW15cXG5cXGZdKiknO3ZhciBKPScoPyF1cmxbKF0pJytJKydbKF0nO3ZhciBLPSd+PSc7dmFyIEw9J1t8XT0nO3ZhciBNPSdbXl09Jzt2YXIgTz0nWyRdPSc7dmFyIFE9J1sqXT0nO3ZhciBSPSdbfnxeJCpdPSc7dmFyIFQ9J1teIlwnXFxcXC9dfC8oPyFbLypdKSc7dmFyIFY9J1xcdUZFRkYnO3ZhciBYPW5ldyBSZWdFeHAoW1YsQix6LEoseCxxLHksQyxGLFMsRyxSLFRdLmpvaW4oInwiKSwnZ2knKTtkZWNvZGVDc3M9ZnVuY3Rpb24oaSl7cmV0dXJuIGkucmVwbGFjZShuZXcgUmVnRXhwKCdcXFxcKD86JytFKyd8JytOKycpJywnZycpLGQpfTtsZXhDc3M9ZnVuY3Rpb24ocyl7cz0nJytzO3ZhciBZPXMucmVwbGFjZSgvXHJcbj8vZywnXG4nKS5tYXRjaChYKXx8W107dmFyIGo9MDt2YXIgWj0nICc7Zm9yKHZhciBpPTAsbj1ZLmxlbmd0aDtpPG47KytpKXt2YXIgJD1kZWNvZGVDc3MoWVtpXSk7dmFyIF89JC5sZW5ndGg7dmFyIGNjPSQuY2hhckNvZGVBdCgwKTskPShjYz09JyInLmNoYXJDb2RlQXQoMCl8fGNjPT0nXCcnLmNoYXJDb2RlQXQoMCkpP2UoJC5zdWJzdHJpbmcoMSxfLTEpLGEpOihjYz09Jy8nLmNoYXJDb2RlQXQoMCkmJl8+MXx8JD09J1xcJ3x8JD09Rnx8JD09Q3x8JD09J1x1ZmVmZid8fGNjPD0nICcuY2hhckNvZGVBdCgwKSk/JyAnOi91cmxcKC9pLnRlc3QoJCk/J3VybCgnK2UoJC5yZXBsYWNlKG5ldyBSZWdFeHAoJ151cmxcXCgnK1crJ1siXCddP3xbIlwnXT8nK1crJ1xcKSQnLCdnaScpLCcnKSxiKSsnKSc6JDtpZihaIT0kfHwkIT0nICcpe1lbaisrXT1aPSR9fVkubGVuZ3RoPWo7cmV0dXJuIFl9fSkoKTtpZih0eXBlb2Ygd2luZG93IT09J3VuZGVmaW5lZCcpe3dpbmRvd1snbGV4Q3NzJ109bGV4Q3NzO3dpbmRvd1snZGVjb2RlQ3NzJ109ZGVjb2RlQ3NzfQ0KLy8gQ29weXJpZ2h0IChDKSAyMDExIEdvb2dsZSBJbmMuDQovLyBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsNCi8vIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4NCi8vIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdA0KLy8gICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjANCi8vIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsDQovLyBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kDQovLyBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4NCnZhciBzYW5pdGl6ZUNzc1Byb3BlcnR5PShmdW5jdGlvbigpe3ZhciBOPSd1cmwoImFib3V0OmJsYW5rIiknO3ZhciBhPS9bXG5cZlxyXCJcJygpKjw+XS9nO3ZhciBiPXsnXG4nOiclMGEnLCdcZic6JyUwYycsJ1xyJzonJTBkJywnIic6JyUyMicsJ1wnJzonJTI3JywnKCc6JyUyOCcsJyknOiclMjknLCcqJzonJTJhJywnPCc6JyUzYycsJz4nOiclM2UnfTtmdW5jdGlvbiBjKHMpe2lmKCdzdHJpbmcnPT09dHlwZW9mIHMpe3JldHVybid1cmwoIicrcy5yZXBsYWNlKGEsZCkrJyIpJ31lbHNle3JldHVybiBOfX1mdW5jdGlvbiBkKGgpe3JldHVybiBiW2hdfXZhciBVPW5ldyBSZWdFeHAoJ14nKycoPzonKycoW146XC8/IyBdKyknKyc6KT8nKTt2YXIgQT0vXig/Omh0dHBzP3xtYWlsdG8pJC9pO2Z1bmN0aW9uIGUoaCxwLG4pe2lmKCFuKXtyZXR1cm4gbnVsbH12YXIgaT0oJycraCkubWF0Y2goVSk7aWYoaSYmKCFpWzFdfHxBLnRlc3QoaVsxXSkpKXtyZXR1cm4gbihoLHApfWVsc2V7cmV0dXJuIG51bGx9fWZ1bmN0aW9uIHUoaCl7dmFyIG09e307Zm9yKHZhciBpPWgubGVuZ3RoOy0taT49MDspe3ZhciBrPWhbaV07Zm9yKHZhciBqPWsubGVuZ3RoOy0taj49MDspe21ba1tqXV09Z319cmV0dXJuIG19ZnVuY3Rpb24gZih0LHMpe3ZhciBwPTEsaD1zKzEsbj10Lmxlbmd0aDt3aGlsZShoPG4mJnApe3ZhciBpPXRbaCsrXTtwKz0oaT09PScoJz8xOmk9PT0nKSc/LTE6MCl9cmV0dXJuIGh9dmFyIGc9e307cmV0dXJuIGZ1bmN0aW9uKHAsaCx0LG8pe3ZhciBqPWguY3NzUHJvcEJpdHM7dmFyIHE9aiYoQ1NTX1BST1BfQklUX1FTVFJJTkdfQ09OVEVOVHxDU1NfUFJPUF9CSVRfUVNUUklOR19VUkwpO3ZhciBsPU5hTjt2YXIgaT0wLGs9MDtmb3IoO2k8dC5sZW5ndGg7KytpKXt2YXIgbT10W2ldLnRvTG93ZXJDYXNlKCk7dmFyIG49bS5jaGFyQ29kZUF0KDApLHIscyx2LHcseDt2YXIgeSx6O209KChuPT09JyAnLmNoYXJDb2RlQXQoMCkpPycnOihuPT09JyInLmNoYXJDb2RlQXQoMCkpPygocT09PUNTU19QUk9QX0JJVF9RU1RSSU5HX1VSTCYmbyk/KGMoZShkZWNvZGVDc3ModFtpXS5zdWJzdHJpbmcoMSxtLmxlbmd0aC0xKSkscCxvKSkpOihxPT09Q1NTX1BST1BfQklUX1FTVFJJTkdfQ09OVEVOVCk/bTonJyk6KG49PT0nIycuY2hhckNvZGVBdCgwKSYmL14jKD86WzAtOWEtZl17M30pezEsMn0kLy50ZXN0KG0pKT8oaiZDU1NfUFJPUF9CSVRfSEFTSF9WQUxVRT9tOicnKTooJzAnLmNoYXJDb2RlQXQoMCk8PW4mJm48PSc5Jy5jaGFyQ29kZUF0KDApKT8oKGomQ1NTX1BST1BfQklUX1FVQU5USVRZKT8oKGomQ1NTX1BST1BfQklUX1pfSU5ERVgpPyhtLm1hdGNoKC9eXGR7MSw3fSQvKT9tOicnKTptKTonJyk6KHI9bS5jaGFyQ29kZUF0KDEpLHM9bS5jaGFyQ29kZUF0KDIpLHY9JzAnLmNoYXJDb2RlQXQoMCk8PXImJnI8PSc5Jy5jaGFyQ29kZUF0KDApLHc9JzAnLmNoYXJDb2RlQXQoMCk8PXMmJnM8PSc5Jy5jaGFyQ29kZUF0KDApLChuPT09JysnLmNoYXJDb2RlQXQoMCkmJih2fHwocj09PScuJy5jaGFyQ29kZUF0KDApJiZ3KSkpKT8oKGomQ1NTX1BST1BfQklUX1FVQU5USVRZKT8oKGomQ1NTX1BST1BfQklUX1pfSU5ERVgpPyhtLm1hdGNoKC9eXCtcZHsxLDd9JC8pP206JycpOigodj8nJzonMCcpK20uc3Vic3RyaW5nKDEpKSk6JycpOihuPT09Jy0nLmNoYXJDb2RlQXQoMCkmJih2fHwocj09PScuJy5jaGFyQ29kZUF0KDApJiZ3KSkpPygoaiZDU1NfUFJPUF9CSVRfTkVHQVRJVkVfUVVBTlRJVFkpPygoaiZDU1NfUFJPUF9CSVRfWl9JTkRFWCk/KG0ubWF0Y2goL15cLVxkezEsN30kLyk/bTonJyk6KCh2PyctJzonLTAnKSttLnN1YnN0cmluZygxKSkpOigoaiZDU1NfUFJPUF9CSVRfUVVBTlRJVFkpPycwJzonJykpOihuPT09Jy4nLmNoYXJDb2RlQXQoMCkmJnYpPygoaiZDU1NfUFJPUF9CSVRfUVVBTlRJVFkpPycwJyttOicnKTooJ3VybCgnPT09bS5zdWJzdHJpbmcoMCw0KSk/KChvJiYocSZDU1NfUFJPUF9CSVRfUVNUUklOR19VUkwpKT9jKGUodFtpXS5zdWJzdHJpbmcoNSxtLmxlbmd0aC0yKSxwLG8pKTonJyk6KChtLmNoYXJBdChtLmxlbmd0aC0xKT09PScoJykmJih4PWYodCxpKSx0LnNwbGljZShpLHgtaSxtPXQuc2xpY2UoaSx4KS5qb2luKCcgJykpKSx5PWguY3NzTGl0R3JvdXAsej0oeT8oaC5jc3NMaXRNYXB8fChoLmNzc0xpdE1hcD11KHkpKSk6ZyksKHpbbV09PT1nfHxoLmNzc0V4dHJhJiZoLmNzc0V4dHJhLnRlc3QobSkpKT9tOigvXlx3KyQvLnRlc3QobSkmJihxPT09Q1NTX1BST1BfQklUX1FTVFJJTkdfQ09OVEVOVCkpPyhsKzE9PT1rPyh0W2xdPXRbbF0uc3Vic3RyaW5nKDAsdFtsXS5sZW5ndGgtMSkrJyAnK20rJyInLG09JycpOihsPWssJyInK20rJyInKSk6JycpO2lmKG0pe3RbaysrXT1tfX1pZihrPT09MSYmdFswXT09PU4pe2s9MH10Lmxlbmd0aD1rfX0pKCk7DQpmdW5jdGlvbiBzYW5pdGl6ZUNzc1NlbGVjdG9ycyhzLGEpe3ZhciBoPVtdO3ZhciBiPVtdO3ZhciBrPTAsaTtmb3IoaT0wO2k8cy5sZW5ndGg7KytpKXtpZighKHNbaV09PScgJyYmKHNbaS0xXT09Jz4nfHxzW2krMV09PSc+JykpKXtzW2srK109c1tpXX19cy5sZW5ndGg9azt2YXIgbj1zLmxlbmd0aCxjPTA7Zm9yKGk9MDtpPG47KytpKXtpZihzW2ldPT0nLCcpe3AoYyxpKTtjPWkrMX19cChjLG4pO2Z1bmN0aW9uIHAoYyxlKXt2YXIgZD1mYWxzZTtpZihzW2NdPT09JyAnKXsrK2N9aWYoZS0xIT09YyYmc1tlXT09PScgJyl7LS1lfXZhciBvPVtdO3ZhciBsPWM7dmFyIGY9Jyc7Zm9yKHZhciBpPWM7aTxlOysraSl7dmFyIHQ9c1tpXTt2YXIgZz0odD09PSc+Jyk7aWYoZ3x8dD09PScgJyl7Zj1qKGwsaSxmYWxzZSk7aWYoIWZ8fChnJiYvXmh0bWwvaS50ZXN0KGYpKSl7cmV0dXJufWw9aSsxO28ucHVzaChmLGc/JyA+ICc6JyAnKX19Zj1qKGwsZSx0cnVlKTtpZighZil7cmV0dXJufW8ucHVzaChmKTtmdW5jdGlvbiBqKGMsZSxxKXt2YXIgcj1jLHU9ZTt2YXIgdix3LHgsdCx5O3Y9Jyc7aWYoYzxlKXt0PXNbY10udG9Mb3dlckNhc2UoKTtpZih0PT09JyonfHwodD09PSdib2R5JyYmYysxIT09ZSYmIXEpfHwoJ251bWJlcic9PT10eXBlb2YoeT1odG1sNC5FTEVNRU5UU1t0XSkmJiEoeSZodG1sNC5lZmxhZ3MuVU5TQUZFKSkpeysrYzt2PXR9fXc9Jyc7d2hpbGUoYzxlKXt0PXNbY107aWYodC5jaGFyQXQoMCk9PT0nIycpe2lmKC9eI198X18kfFteIzAtOUEtWmEtejpfXC1dLy50ZXN0KHQpKXtyZXR1cm4gbnVsbH13Kz10KyctJythfWVsc2UgaWYodD09PScuJyl7aWYoKytjPGUmJi9eWzAtOUEtWmEtejpfXC1dKyQvLnRlc3QodD1zW2NdKSYmIS9eX3xfXyQvLnRlc3QodCkpe3crPScuJyt0fWVsc2V7cmV0dXJuIG51bGx9fWVsc2V7YnJlYWt9KytjfXg9Jyc7aWYoYzxlJiZzW2NdPT09JzonKXt0PXNbKytjXTtpZih0PT09J3Zpc2l0ZWQnfHx0PT09J2xpbmsnKXtpZighL15bYSpdPyQvLnRlc3Qodikpe3JldHVybiBudWxsfWQ9dHJ1ZTt4PSc6Jyt0O3Y9J2EnOysrY319aWYoYz09PWUpe3JldHVybiB2K3creH1yZXR1cm4gbnVsbH12YXIgbT1vLmpvaW4oJycpO2lmKC9eYm9keVxiLy50ZXN0KG0pKXttPScudmRvYy1ib2R5X19fLicrYSttLnN1YnN0cmluZyg0KX1lbHNle209Jy4nK2ErJyAnK219KGQ/aDpiKS5wdXNoKG0pfXJldHVybltiLGhdfQ0KdmFyIHNhbml0aXplU3R5bGVzaGVldD0oZnVuY3Rpb24oKXt2YXIgYT17fTt2YXIgYz17J2JyYWlsbGUnOmEsJ2VtYm9zc2VkJzphLCdoYW5kaGVsZCc6YSwncHJpbnQnOmEsJ3Byb2plY3Rpb24nOmEsJ3NjcmVlbic6YSwnc3BlZWNoJzphLCd0dHknOmEsJ3R2JzphfTtmdW5jdGlvbiBzKGIpe3ZhciBlPWZhbHNlO2Zvcih2YXIgaT0wLG49Yi5sZW5ndGg7aTxuLTE7KytpKXt2YXIgdD1iW2ldO2lmKCc6Jz09PWJbaSsxXSl7ZT0hKGNzc1NjaGVtYVt0XS5jc3NQcm9wQml0cyZDU1NfUFJPUF9CSVRfQUxMT1dFRF9JTl9MSU5LKX1pZihlKXtiW2ldPScnfWlmKCc7Jz09PXQpe2U9ZmFsc2V9fXJldHVybiBiLmpvaW4oJycpfXJldHVybiBmdW5jdGlvbihiLGQsbyl7dmFyIGU9dm9pZCAwO3ZhciBmPVtdO3ZhciBnPWZhbHNlO3BhcnNlQ3NzU3R5bGVzaGVldChiLHtzdGFydFN0eWxlc2hlZXQ6ZnVuY3Rpb24oKXtlPVtdfSxlbmRTdHlsZXNoZWV0OmZ1bmN0aW9uKCl7fSxzdGFydEF0cnVsZTpmdW5jdGlvbihpLGope2lmKGcpe2k9bnVsbH1lbHNlIGlmKGk9PT0nQG1lZGlhJyl7aj1qLmZpbHRlcihmdW5jdGlvbihtKXtyZXR1cm4gY1ttXT09YX0pO2lmKGoubGVuZ3RoKXtlLnB1c2goaSxqLmpvaW4oJywnKSwneycpfWVsc2V7aT1udWxsfX1lbHNle2lmKGk9PT0nQGltcG9ydCcpe2lmKHdpbmRvdy5jb25zb2xlKXt3aW5kb3cuY29uc29sZS5sb2coJ0BpbXBvcnQgJytqLmpvaW4oJyAnKSsnIGVsaWRlZCcpfX1pPW51bGx9Zz0haTtmLnB1c2goaSl9LGVuZEF0cnVsZTpmdW5jdGlvbigpe3ZhciBpPWYucG9wKCk7aWYoIWcpe2UucHVzaCgnOycpfWgoKX0sc3RhcnRCbG9jazpmdW5jdGlvbigpe2lmKCFnKXtlLnB1c2goJ3snKX19LGVuZEJsb2NrOmZ1bmN0aW9uKCl7aWYoIWcpe2UucHVzaCgnfScpO2c9dHJ1ZX19LHN0YXJ0UnVsZXNldDpmdW5jdGlvbihpKXt2YXIgaj12b2lkIDA7dmFyIHI9ZmFsc2U7aWYoIWcpe3ZhciBrPXNhbml0aXplQ3NzU2VsZWN0b3JzKGksZCk7dmFyIGw9a1swXTtqPWtbMV07aWYoIWwubGVuZ3RoJiYhai5sZW5ndGgpe2c9dHJ1ZX1lbHNle3ZhciBtPWwuam9pbignLCAnKTtpZighbSl7bT0naGVhZCA+IGh0bWwnO3I9dHJ1ZX1lLnB1c2gobSwneycpfX1mLnB1c2goZz9udWxsOntoaXN0b3J5U2Vuc2l0aXZlU2VsZWN0b3JzOmosZW5kT2ZTZWxlY3RvcnM6ZS5sZW5ndGgtMSxyZW1vdmVIaXN0b3J5SW5zZW5zaXRpdmVTZWxlY3RvcnM6cn0pfSxlbmRSdWxlc2V0OmZ1bmN0aW9uKCl7dmFyIHI9Zi5wb3AoKTt2YXIgcD1lLmxlbmd0aDtpZighZyl7ZS5wdXNoKCd9Jyk7aWYocil7dmFyIGk9ci5oaXN0b3J5U2Vuc2l0aXZlU2VsZWN0b3JzO2lmKGkubGVuZ3RoKXt2YXIgaj1lLnNsaWNlKHIuZW5kT2ZTZWxlY3RvcnMpO2UucHVzaChpLmpvaW4oJywgJykscyhqKSl9fX1pZihyJiZyLnJlbW92ZUhpc3RvcnlJbnNlbnNpdGl2ZVNlbGVjdG9ycyl7ZS5zcGxpY2Uoci5lbmRPZlNlbGVjdG9ycy0xLHArMSl9aCgpfSxkZWNsYXJhdGlvbjpmdW5jdGlvbihwLHYpe2lmKCFnKXt2YXIgaT1jc3NTY2hlbWFbcF07aWYoaSl7c2FuaXRpemVDc3NQcm9wZXJ0eShwLGksdixvKTtpZih2Lmxlbmd0aCl7ZS5wdXNoKHAsJzonLHYuam9pbignICcpLCc7Jyl9fX19fSk7ZnVuY3Rpb24gaCgpe2c9Zi5sZW5ndGghPT0wJiZmW2YubGVuZ3RoLTFdIT09bnVsbH1yZXR1cm4gZS5qb2luKCcnKX19KSgpO2lmKHR5cGVvZiB3aW5kb3chPT0ndW5kZWZpbmVkJyl7d2luZG93WydzYW5pdGl6ZUNzc1Byb3BlcnR5J109c2FuaXRpemVDc3NQcm9wZXJ0eTt3aW5kb3dbJ3Nhbml0aXplQ3NzU2VsZWN0b3JzJ109c2FuaXRpemVDc3NTZWxlY3RvcnM7d2luZG93WydzYW5pdGl6ZVN0eWxlc2hlZXQnXT1zYW5pdGl6ZVN0eWxlc2hlZXR9DQovLyBDb3B5cmlnaHQgKEMpIDIwMTAgR29vZ2xlIEluYy4NCi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOw0KLy8geW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLg0KLy8gWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0DQovLyAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMA0KLy8gZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywNCi8vIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQNCi8vIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLg0KdmFyIHBhcnNlQ3NzU3R5bGVzaGVldDt2YXIgcGFyc2VDc3NEZWNsYXJhdGlvbnM7KGZ1bmN0aW9uKCl7cGFyc2VDc3NTdHlsZXNoZWV0PWZ1bmN0aW9uKGUsaCl7dmFyIHQ9bGV4Q3NzKGUpO2lmKGguc3RhcnRTdHlsZXNoZWV0KXtoLnN0YXJ0U3R5bGVzaGVldCgpfWZvcih2YXIgaT0wLG49dC5sZW5ndGg7aTxuOyl7aT10W2ldPT09JyAnP2krMTphKHQsaSxuLGgpfWlmKGguZW5kU3R5bGVzaGVldCl7aC5lbmRTdHlsZXNoZWV0KCl9fTtmdW5jdGlvbiBhKHQsaSxuLGgpe2lmKGk8bil7dmFyIGU9dFtpXTtpZihlLmNoYXJBdCgwKT09PSdAJyl7cmV0dXJuIGIodCxpLG4saCx0cnVlKX1lbHNle3JldHVybiByKHQsaSxuLGgpfX1lbHNle3JldHVybiBpfX1mdW5jdGlvbiBiKHQsaSxuLGgsail7dmFyIGs9aSsrO3doaWxlKGk8biYmdFtpXSE9PSd7JyYmdFtpXSE9PSc7Jyl7KytpfWlmKGk8biYmKGp8fHRbaV09PT0nOycpKXt2YXIgcz1rKzEsZT1pO2lmKHM8biYmdFtzXT09PScgJyl7KytzfWlmKGU+cyYmdFtlLTFdPT09JyAnKXstLWV9aWYoaC5zdGFydEF0cnVsZSl7aC5zdGFydEF0cnVsZSh0W2tdLnRvTG93ZXJDYXNlKCksdC5zbGljZShzLGUpKX1pPSh0W2ldPT09J3snKT9jKHQsaSxuLGgpOmkrMTtpZihoLmVuZEF0cnVsZSl7aC5lbmRBdHJ1bGUoKX19cmV0dXJuIGl9ZnVuY3Rpb24gYyh0LGksbixoKXsrK2k7aWYoaC5zdGFydEJsb2NrKXtoLnN0YXJ0QmxvY2soKX13aGlsZShpPG4pe3ZhciBlPXRbaV0uY2hhckF0KDApO2lmKGU9PSd9Jyl7KytpO2JyZWFrfWlmKGU9PT0nICd8fGU9PT0nOycpe2k9aSsxfWVsc2UgaWYoZT09PSdAJyl7aT1iKHQsaSxuLGgsZmFsc2UpfWVsc2UgaWYoZT09PSd7Jyl7aT1jKHQsaSxuLGgpfWVsc2V7aT1yKHQsaSxuLGgpfX1pZihoLmVuZEJsb2NrKXtoLmVuZEJsb2NrKCl9cmV0dXJuIGl9ZnVuY3Rpb24gcih0LGksbixoKXt2YXIgcz1pLGU9ZCh0LGksbix0cnVlKTtpZihlPDApe2U9fmU7cmV0dXJuIGk9PT1lP2UrMTplfWk9ZTtpZihlPnMmJnRbZS0xXT09PScgJyl7LS1lfXZhciBqPXRbaV07KytpO2lmKGohPT0neycpe3JldHVybiBpfWlmKGguc3RhcnRSdWxlc2V0KXtoLnN0YXJ0UnVsZXNldCh0LnNsaWNlKHMsZSkpfXdoaWxlKGk8bil7aj10W2ldO2lmKGo9PT0nfScpeysraTticmVha31pZihqPT09JyAnKXtpPWkrMX1lbHNle2k9Zyh0LGksbixoKX19aWYoaC5lbmRSdWxlc2V0KXtoLmVuZFJ1bGVzZXQoKX1yZXR1cm4gaTxuP2krMTppfWZ1bmN0aW9uIGQodCxpLG4sZSl7dmFyIHM9aTt2YXIgaDt2YXIgaj1bXSxrPS0xO2Zvcig7aTxuOysraSl7aD10W2ldLmNoYXJBdCgwKTtpZihoPT09J1snfHxoPT09JygnKXtqWysra109aH1lbHNlIGlmKChoPT09J10nJiZqW2tdPT09J1snKXx8KGg9PT0nKScmJmpba109PT0nKCcpKXstLWt9ZWxzZSBpZihoPT09J3snfHxoPT09J30nfHxoPT09JzsnfHxoPT09J0AnfHwoaD09PSc6JyYmIWUpKXticmVha319aWYoaz49MCl7aT1+KGkrMSl9cmV0dXJuIGl9dmFyIGY9L14tP1thLXpdL2k7ZnVuY3Rpb24gZyh0LGksbixoKXt2YXIgcD10W2krK107aWYoIWYudGVzdChwKSl7cmV0dXJuIGkrMX12YXIgaztpZihpPG4mJnRbaV09PT0nICcpeysraX1pZihpPT1ufHx0W2ldIT09JzonKXt3aGlsZShpPG4mJihrPXRbaV0pIT09JzsnJiZrIT09J30nKXsrK2l9cmV0dXJuIGl9KytpO2lmKGk8biYmdFtpXT09PScgJyl7KytpfXZhciBzPWksZT1kKHQsaSxuLGZhbHNlKTtpZihlPDApe2U9fmV9ZWxzZXt2YXIgdj1bXSxsPTA7Zm9yKHZhciBqPXM7ajxlOysrail7az10W2pdO2lmKGshPT0nICcpe3ZbbCsrXT1rfX1pZihlPG4pe2Rve2s9dFtlXTtpZihrPT09JzsnfHxrPT09J30nKXticmVha31sPTB9d2hpbGUoKytlPG4pO2lmKGs9PT0nOycpeysrZX19aWYobCYmaC5kZWNsYXJhdGlvbil7aC5kZWNsYXJhdGlvbihwLnRvTG93ZXJDYXNlKCksdil9fXJldHVybiBlfXBhcnNlQ3NzRGVjbGFyYXRpb25zPWZ1bmN0aW9uKGUsaCl7dmFyIHQ9bGV4Q3NzKGUpO2Zvcih2YXIgaT0wLG49dC5sZW5ndGg7aTxuOyl7aT10W2ldIT09JyAnP2codCxpLG4saCk6aSsxfX19KSgpO2lmKHR5cGVvZiB3aW5kb3chPT0ndW5kZWZpbmVkJyl7d2luZG93WydwYXJzZUNzc1N0eWxlc2hlZXQnXT1wYXJzZUNzc1N0eWxlc2hlZXQ7d2luZG93WydwYXJzZUNzc0RlY2xhcmF0aW9ucyddPXBhcnNlQ3NzRGVjbGFyYXRpb25zfQ0KLyohDQogKiBTQVAgVUkgZGV2ZWxvcG1lbnQgdG9vbGtpdCBmb3IgSFRNTDUgKFNBUFVJNS9PcGVuVUk1KQ0KICogKGMpIENvcHlyaWdodCAyMDA5LTIwMTQgU0FQIFNFIG9yIGFuIFNBUCBhZmZpbGlhdGUgY29tcGFueS4gDQogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wIC0gc2VlIExJQ0VOU0UudHh0Lg0KICovDQp2YXIgaHRtbDQ9e307aHRtbDQuYXR5cGU9e05PTkU6MCxVUkk6MSxVUklfRlJBR01FTlQ6MTEsU0NSSVBUOjIsU1RZTEU6MyxJRDo0LElEUkVGOjUsSURSRUZTOjYsR0xPQkFMX05BTUU6NyxMT0NBTF9OQU1FOjgsQ0xBU1NFUzo5LEZSQU1FX1RBUkdFVDoxMH07aHRtbDQuQVRUUklCUz17Jyo6OmFjY2Vzc2tleSc6MCwnKjo6Y2xhc3MnOjksJyo6OmNvbnRlbnRlZGl0YWJsZSc6MCwnKjo6Y29udGV4dG1lbnUnOjAsJyo6OmRpcic6MCwnKjo6ZHJhZ2dhYmxlJzowLCcqOjpkcm9wem9uZSc6MCwnKjo6aGlkZGVuJzowLCcqOjppZCc6NCwnKjo6bGFuZyc6MCwnKjo6b25hYm9ydCc6MiwnKjo6b25ibHVyJzoyLCcqOjpvbmNhbnBsYXknOjIsJyo6Om9uY2FucGxheXRocm91Z2gnOjIsJyo6Om9uY2hhbmdlJzoyLCcqOjpvbmNsaWNrJzoyLCcqOjpvbmNvbnRleHRtZW51JzoyLCcqOjpvbmN1ZWNoYW5nZSc6MiwnKjo6b25kYmxjbGljayc6MiwnKjo6b25kcmFnJzoyLCcqOjpvbmRyYWdlbmQnOjIsJyo6Om9uZHJhZ2VudGVyJzoyLCcqOjpvbmRyYWdsZWF2ZSc6MiwnKjo6b25kcmFnb3Zlcic6MiwnKjo6b25kcmFnc3RhcnQnOjIsJyo6Om9uZHJvcCc6MiwnKjo6b25kdXJhdGlvbmNoYW5nZSc6MiwnKjo6b25lbXB0aWVkJzoyLCcqOjpvbmVuZGVkJzoyLCcqOjpvbmVycm9yJzoyLCcqOjpvbmZvY3VzJzoyLCcqOjpvbmlucHV0JzoyLCcqOjpvbmludmFsaWQnOjIsJyo6Om9ua2V5ZG93bic6MiwnKjo6b25rZXlwcmVzcyc6MiwnKjo6b25rZXl1cCc6MiwnKjo6b25sb2FkJzoyLCcqOjpvbmxvYWRlZGRhdGEnOjIsJyo6Om9ubG9hZGVkbWV0YWRhdGEnOjIsJyo6Om9ubG9hZHN0YXJ0JzoyLCcqOjpvbm1vdXNlZG93bic6MiwnKjo6b25tb3VzZW1vdmUnOjIsJyo6Om9ubW91c2VvdXQnOjIsJyo6Om9ubW91c2VvdmVyJzoyLCcqOjpvbm1vdXNldXAnOjIsJyo6Om9ubW91c2V3aGVlbCc6MiwnKjo6b25wYXVzZSc6MiwnKjo6b25wbGF5JzoyLCcqOjpvbnBsYXlpbmcnOjIsJyo6Om9ucHJvZ3Jlc3MnOjIsJyo6Om9ucmF0ZWNoYW5nZSc6MiwnKjo6b25yZWFkeXN0YXRlY2hhbmdlJzoyLCcqOjpvbnJlc2V0JzoyLCcqOjpvbnNjcm9sbCc6MiwnKjo6b25zZWVrZWQnOjIsJyo6Om9uc2Vla2luZyc6MiwnKjo6b25zZWxlY3QnOjIsJyo6Om9uc2hvdyc6MiwnKjo6b25zdGFsbGVkJzoyLCcqOjpvbnN1Ym1pdCc6MiwnKjo6b25zdXNwZW5kJzoyLCcqOjpvbnRpbWV1cGRhdGUnOjIsJyo6Om9udm9sdW1lY2hhbmdlJzoyLCcqOjpvbndhaXRpbmcnOjIsJyo6OnNwZWxsY2hlY2snOjAsJyo6OnN0eWxlJzozLCcqOjp0YWJpbmRleCc6MCwnKjo6dGl0bGUnOjAsJ2E6OmhyZWYnOjEsJ2E6OmhyZWZsYW5nJzowLCdhOjptZWRpYSc6MCwnYTo6cmVsJzowLCdhOjp0YXJnZXQnOjAsJ2E6OnR5cGUnOjAsJ2FyZWE6OmFsdCc6MCwnYXJlYTo6Y29vcmRzJzowLCdhcmVhOjpocmVmJzoxLCdhcmVhOjpocmVmbGFuZyc6MCwnYXJlYTo6bWVkaWEnOjAsJ2FyZWE6OnJlbCc6MCwnYXJlYTo6c2hhcGUnOjAsJ2FyZWE6OnRhcmdldCc6MTAsJ2FyZWE6OnR5cGUnOjAsJ2F1ZGlvOjphdXRvcGxheSc6MCwnYXVkaW86OmNvbnRyb2xzJzowLCdhdWRpbzo6bG9vcCc6MCwnYXVkaW86Om1lZGlhZ3JvdXAnOjAsJ2F1ZGlvOjpwcmVsb2FkJzowLCdhdWRpbzo6c3JjJzoxLCdiYXNlOjpocmVmJzoxLCdiYXNlOjp0YXJnZXQnOjEwLCdibG9ja3F1b3RlOjpjaXRlJzoxLCdib2R5OjpvbmFmdGVycHJpbnQnOjIsJ2JvZHk6Om9uYmVmb3JlcHJpbnQnOjIsJ2JvZHk6Om9uYmVmb3JldW5sb2FkJzoyLCdib2R5OjpvbmJsdXInOjIsJ2JvZHk6Om9uZXJyb3InOjIsJ2JvZHk6Om9uZm9jdXMnOjIsJ2JvZHk6Om9uaGFzaGNoYW5nZSc6MiwnYm9keTo6b25sb2FkJzoyLCdib2R5Ojpvbm1lc3NhZ2UnOjIsJ2JvZHk6Om9ub2ZmbGluZSc6MiwnYm9keTo6b25vbmxpbmUnOjIsJ2JvZHk6Om9ucGFnZWhpZGUnOjIsJ2JvZHk6Om9ucGFnZXNob3cnOjIsJ2JvZHk6Om9ucG9wc3RhdGUnOjIsJ2JvZHk6Om9ucmVkbyc6MiwnYm9keTo6b25yZXNpemUnOjIsJ2JvZHk6Om9uc2Nyb2xsJzoyLCdib2R5OjpvbnN0b3JhZ2UnOjIsJ2JvZHk6Om9udW5kbyc6MiwnYm9keTo6b251bmxvYWQnOjIsJ2J1dHRvbjo6YXV0b2ZvY3VzJzowLCdidXR0b246OmRpc2FibGVkJzowLCdidXR0b246OmZvcm0nOjAsJ2J1dHRvbjo6Zm9ybWFjdGlvbic6MSwnYnV0dG9uOjpmb3JtZW5jdHlwZSc6MCwnYnV0dG9uOjpmb3JtbWV0aG9kJzowLCdidXR0b246OmZvcm1ub3ZhbGlkYXRlJzowLCdidXR0b246OmZvcm10YXJnZXQnOjEwLCdidXR0b246Om5hbWUnOjgsJ2J1dHRvbjo6dHlwZSc6MCwnYnV0dG9uOjp2YWx1ZSc6MCwnY2FudmFzOjpoZWlnaHQnOjAsJ2NhbnZhczo6d2lkdGgnOjAsJ2NvbDo6c3Bhbic6MCwnY29sZ3JvdXA6OnNwYW4nOjAsJ2NvbW1hbmQ6OmNoZWNrZWQnOjAsJ2NvbW1hbmQ6OmRpc2FibGVkJzowLCdjb21tYW5kOjppY29uJzoxLCdjb21tYW5kOjpsYWJlbCc6MCwnY29tbWFuZDo6cmFkaW9ncm91cCc6MCwnY29tbWFuZDo6dHlwZSc6MCwnZGVsOjpjaXRlJzoxLCdkZWw6OmRhdGV0aW1lJzowLCdkZXRhaWxzOjpvcGVuJzowLCdlbWJlZDo6aGVpZ2h0JzowLCdlbWJlZDo6c3JjJzoxLCdlbWJlZDo6dHlwZSc6MCwnZW1iZWQ6OndpZHRoJzowLCdmaWVsZHNldDo6ZGlzYWJsZWQnOjAsJ2ZpZWxkc2V0Ojpmb3JtJzowLCdmaWVsZHNldDo6bmFtZSc6OCwnZm9ybTo6YWNjZXB0LWNoYXJzZXQnOjAsJ2Zvcm06OmFjdGlvbic6MSwnZm9ybTo6YXV0b2NvbXBsZXRlJzowLCdmb3JtOjplbmN0eXBlJzowLCdmb3JtOjptZXRob2QnOjAsJ2Zvcm06Om5hbWUnOjcsJ2Zvcm06Om5vdmFsaWRhdGUnOjAsJ2Zvcm06OnRhcmdldCc6MTAsJ2h0bWw6OiBtYW5pZmVzdCc6MSwnaWZyYW1lOjpoZWlnaHQnOjAsJ2lmcmFtZTo6bmFtZSc6NywnaWZyYW1lOjpzYW5kYm94JzowLCdpZnJhbWU6OnNlYW1sZXNzJzowLCdpZnJhbWU6OnNyYyc6MSwnaWZyYW1lOjpzcmNkb2MnOjEwLCdpZnJhbWU6OndpZHRoJzowLCdpbWc6OmFsdCc6MCwnaW1nOjpoZWlnaHQnOjAsJ2ltZzo6aXNtYXAnOjAsJ2ltZzo6bmFtZSc6NywnaW1nOjpzcmMnOjEsJ2ltZzo6dXNlbWFwJzoxMSwnaW1nOjp3aWR0aCc6MCwnaW5wdXQ6OmFjY2VwdCc6MCwnaW5wdXQ6OmFsdCc6MCwnaW5wdXQ6OmF1dG9jb21wbGV0ZSc6MCwnaW5wdXQ6OmF1dG9mb2N1cyc6MCwnaW5wdXQ6OmNoZWNrZWQnOjAsJ2lucHV0OjpkaXJuYW1lJzowLCdpbnB1dDo6ZGlzYWJsZWQnOjAsJ2lucHV0Ojpmb3JtJzowLCdpbnB1dDo6Zm9ybWFjdGlvbic6MSwnaW5wdXQ6OmZvcm1lbmN0eXBlJzowLCdpbnB1dDo6Zm9ybW1ldGhvZCc6MCwnaW5wdXQ6OmZvcm1ub3ZhbGlkYXRlJzowLCdpbnB1dDo6Zm9ybXRhcmdldCc6MTAsJ2lucHV0OjpoZWlnaHQnOjAsJ2lucHV0OjpsaXN0JzowLCdpbnB1dDo6bWF4JzowLCdpbnB1dDo6bWF4bGVuZ3RoJzowLCdpbnB1dDo6bWluJzowLCdpbnB1dDo6bXVsdGlwbGUnOjAsJ2lucHV0OjpuYW1lJzo4LCdpbnB1dDo6cGF0dGVybic6MCwnaW5wdXQ6OnBsYWNlaG9sZGVyJzowLCdpbnB1dDo6cmVhZG9ubHknOjAsJ2lucHV0OjpyZXF1aXJlZCc6MCwnaW5wdXQ6OnN0ZXAnOjAsJ2lucHV0OjpzaXplJzowLCdpbnB1dDo6c3JjJzoxLCdpbnB1dDo6dHlwZSc6MCwnaW5wdXQ6OnZhbHVlJzowLCdpbnB1dDo6d2lkdGgnOjAsJ2luczo6Y2l0ZSc6MSwnaW5zOjpkYXRldGltZSc6MCwna2V5Z2VuOjphdXRvZm9jdXMnOjAsJ2tleWdlbjo6Y2hhbGxlbmdlJzowLCdrZXlnZW46OmRpc2FibGVkJzowLCdrZXlnZW46OmZvcm0nOjAsJ2tleWdlbjo6a2V5dHlwZSc6MCwna2V5Z2VuOjpuYW1lJzo4LCdsYWJlbDo6Zm9yJzo1LCdsYWJlbDo6Zm9ybSc6MCwnbGluazo6aHJlZic6MSwnbGluazo6aHJlZmxhbmcnOjAsJ2xpbms6Om1lZGlhJzowLCdsaW5rOjpyZWwnOjAsJ2xpbms6OnNpemVzJzowLCdsaW5rOjp0eXBlJzowLCdsaTo6dmFsdWUnOjAsJ21hcDo6bmFtZSc6NywnbWVudTo6bGFiZWwnOjAsJ21lbnU6OnR5cGUnOjAsJ21ldGE6OmNoYXJzZXQnOjAsJ21ldGE6OmNvbnRlbnQnOjAsJ21ldGE6Omh0dHAtZXF1aXYnOjAsJ21ldGE6Om5hbWUnOjcsJ21ldGVyOjpmb3JtJzowLCdtZXRlcjo6aGlnaCc6MCwnbWV0ZXI6Omxvdyc6MCwnbWV0ZXI6Om1heCc6MCwnbWV0ZXI6Om1pbic6MCwnbWV0ZXI6Om9wdGltdW0nOjAsJ21ldGVyOjp2YWx1ZSc6MCwnb2JqZWN0OjpkYXRhJzoxLCdvYmplY3Q6OmZvcm0nOjAsJ29iamVjdDo6aGVpZ2h0JzowLCdvYmplY3Q6Om5hbWUnOjgsJ29iamVjdDo6dHlwZSc6MCwnb2JqZWN0Ojp1c2VtYXAnOjExLCdvYmplY3Q6OndpZHRoJzowLCdvbDo6cmV2ZXJzZWQnOjAsJ29sOjpzdGFydCc6MCwnb3B0Z3JvdXA6OmRpc2FibGVkJzowLCdvcHRncm91cDo6bGFiZWwnOjAsJ29wdGlvbjo6ZGlzYWJsZWQnOjAsJ29wdGlvbjo6bGFiZWwnOjAsJ29wdGlvbjo6c2VsZWN0ZWQnOjAsJ29wdGlvbjo6dmFsdWUnOjAsJ291dHB1dDo6Zm9yJzo1LCdvdXRwdXQ6OmZvcm0nOjAsJ291dHB1dDo6bmFtZSc6OCwncGFyYW06Om5hbWUnOjgsJ3BhcmFtOjp2YWx1ZSc6MCwncHJvZ3Jlc3M6OmZvcm0nOjAsJ3Byb2dyZXNzOjptYXgnOjAsJ3Byb2dyZXNzOjp2YWx1ZSc6MCwncTo6Y2l0ZSc6MSwnc2NyaXB0Ojphc3luYyc6MCwnc2NyaXB0OjpjaGFyc2V0JzowLCdzY3JpcHQ6OmRlZmVyJzowLCdzY3JpcHQ6OnNyYyc6MSwnc2NyaXB0Ojp0eXBlJzowLCdzZWxlY3Q6OmF1dG9mb2N1cyc6MCwnc2VsZWN0OjpkaXNhYmxlZCc6MCwnc2VsZWN0Ojpmb3JtJzowLCdzZWxlY3Q6Om11bHRpcGxlJzowLCdzZWxlY3Q6Om5hbWUnOjgsJ3NlbGVjdDo6cmVxdWlyZWQnOjAsJ3NlbGVjdDo6c2l6ZSc6MCwnc291cmNlOjptZWRpYSc6MCwnc291cmNlOjpzcmMnOjEsJ3NvdXJjZTo6dHlwZSc6MCwnc3R5bGU6Om1lZGlhJzowLCdzdHlsZTo6c2NvcGVkJzowLCdzdHlsZTo6dHlwZSc6MCwndGFibGU6OmJvcmRlcic6MCwndGQ6OmNvbHNwYW4nOjAsJ3RkOjpoZWFkZXJzJzo2LCd0ZDo6cm93c3Bhbic6MCwndGV4dGFyZWE6OmF1dG9mb2N1cyc6MCwndGV4dGFyZWE6OmNvbHMnOjAsJ3RleHRhcmVhOjpkaXNhYmxlZCc6MCwndGV4dGFyZWE6OmZvcm0nOjAsJ3RleHRhcmVhOjptYXhsZW5ndGgnOjAsJ3RleHRhcmVhOjpuYW1lJzo4LCd0ZXh0YXJlYTo6cGxhY2Vob2xkZXInOjAsJ3RleHRhcmVhOjpyZWFkb25seSc6MCwndGV4dGFyZWE6OnJlcXVpcmVkJzowLCd0ZXh0YXJlYTo6cm93cyc6MCwndGV4dGFyZWE6OndyYXAnOjAsJ3RoOjpjb2xzcGFuJzowLCd0aDo6aGVhZGVycyc6NiwndGg6OnJvd3NwYW4nOjAsJ3RoOjpzY29wZSc6MCwndGltZTo6ZGF0ZXRpbWUnOjAsJ3RpbWU6OnB1YmRhdGUnOjAsJ3RyYWNrOjpkZWZhdWx0JzowLCd0cmFjazo6a2luZCc6MCwndHJhY2s6OmxhYmVsJzowLCd0cmFjazo6c3JjJzoxLCd0cmFjazo6c3JjbGFuZyc6MCwndmlkZW86OmF1dG9wbGF5JzowLCd2aWRlbzo6Y29udHJvbHMnOjAsJ3ZpZGVvOjpoZWlnaHQnOjAsJ3ZpZGVvOjpsb29wJzowLCd2aWRlbzo6bWVkaWFncm91cCc6MCwndmlkZW86OnBvc3Rlcic6MSwndmlkZW86OnByZWxvYWQnOjAsJ3ZpZGVvOjpzcmMnOjEsJ3ZpZGVvOjp3aWR0aCc6MH07aHRtbDQuZWZsYWdzPXtPUFRJT05BTF9FTkRUQUc6MSxFTVBUWToyLENEQVRBOjQsUkNEQVRBOjgsVU5TQUZFOjE2LEZPTERBQkxFOjMyLFNDUklQVDo2NCxTVFlMRToxMjh9O2h0bWw0LkVMRU1FTlRTPXsnYSc6MCwnYWJicic6MCwnYWRkcmVzcyc6MCwnYXJlYSc6MiwnYXJ0aWNsZSc6MCwnYXNpZGUnOjAsJ2F1ZGlvJzowLCdiJzowLCdiYXNlJzoxOCwnYmRpJzowLCdiZG8nOjAsJ2Jsb2NrcXVvdGUnOjAsJ2JvZHknOjQ5LCdicic6MiwnYnV0dG9uJzowLCdjYW52YXMnOjAsJ2NhcHRpb24nOjAsJ2NpdGUnOjAsJ2NvZGUnOjAsJ2NvbCc6MiwnY29sZ3JvdXAnOjEsJ2NvbW1hbmQnOjIsJ2RhdGFsaXN0JzowLCdkZCc6MSwnZGVsJzowLCdkZXRhaWxzJzowLCdkZm4nOjAsJ2Rpdic6MCwnZGwnOjAsJ2R0JzoxLCdlbSc6MCwnZW1iZWQnOjE4LCdmaWVsZHNldCc6MCwnZmlnY2FwdGlvbic6MCwnZmlndXJlJzowLCdmb290ZXInOjAsJ2Zvcm0nOjAsJ2gxJzowLCdoMic6MCwnaDMnOjAsJ2g0JzowLCdoNSc6MCwnaDYnOjAsJ2hlYWQnOjQ5LCdoZWFkZXInOjAsJ2hncm91cCc6MCwnaHInOjIsJ2h0bWwnOjQ5LCdpJzowLCdpZnJhbWUnOjQsJ2ltZyc6MiwnaW5wdXQnOjIsJ2lucyc6MCwna2JkJzowLCdrZXlnZW4nOjIsJ2xhYmVsJzowLCdsZWdlbmQnOjAsJ2xpJzoxLCdsaW5rJzoxOCwnbWFwJzowLCdtYXJrJzowLCdtZW51JzowLCdtZXRhJzoxOCwnbWV0ZXInOjAsJ25hdic6MCwnbm9zY3JpcHQnOjIwLCdvYmplY3QnOjE2LCdvbCc6MCwnb3B0Z3JvdXAnOjEsJ29wdGlvbic6MSwnb3V0cHV0JzowLCdwJzoxLCdwYXJhbSc6MTgsJ3ByZSc6MCwncHJvZ3Jlc3MnOjAsJ3EnOjAsJ3JwJzoxLCdydCc6MSwncnVieSc6MCwncyc6MCwnc2FtcCc6MCwnc2NyaXB0Jzo4NCwnc2VjdGlvbic6MCwnc2VsZWN0JzowLCdzbWFsbCc6MCwnc291cmNlJzoyLCdzcGFuJzowLCdzdHJvbmcnOjAsJ3N0eWxlJzoxNDgsJ3N1Yic6MCwnc3VtbWFyeSc6MCwnc3VwJzowLCd0YWJsZSc6MCwndGJvZHknOjEsJ3RkJzoxLCd0ZXh0YXJlYSc6OCwndGZvb3QnOjEsJ3RoJzoxLCd0aGVhZCc6MSwndGltZSc6MCwndGl0bGUnOjI0LCd0cic6MSwndHJhY2snOjIsJ3UnOjAsJ3VsJzowLCd2YXInOjAsJ3ZpZGVvJzowLCd3YnInOjJ9O2h0bWw0LnVlZmZlY3RzPXtOT1RfTE9BREVEOjAsU0FNRV9ET0NVTUVOVDoxLE5FV19ET0NVTUVOVDoyfTtodG1sNC5VUklFRkZFQ1RTPXsnYTo6aHJlZic6MiwnYXJlYTo6aHJlZic6MiwnYXVkaW86OnNyYyc6MSwnYmFzZTo6aHJlZic6MiwnYmxvY2txdW90ZTo6Y2l0ZSc6MCwnYnV0dG9uOjpmb3JtYWN0aW9uJzoyLCdjb21tYW5kOjppY29uJzoxLCdkZWw6OmNpdGUnOjAsJ2VtYmVkOjpzcmMnOjEsJ2Zvcm06OmFjdGlvbic6MiwnaHRtbDo6IG1hbmlmZXN0JzoxLCdpZnJhbWU6OnNyYyc6MSwnaW1nOjpzcmMnOjEsJ2lucHV0Ojpmb3JtYWN0aW9uJzoyLCdpbnB1dDo6c3JjJzoxLCdpbnM6OmNpdGUnOjAsJ2xpbms6OmhyZWYnOjIsJ29iamVjdDo6ZGF0YSc6MSwncTo6Y2l0ZSc6MCwnc2NyaXB0OjpzcmMnOjEsJ3NvdXJjZTo6c3JjJzoxLCd0cmFjazo6c3JjJzoxLCd2aWRlbzo6cG9zdGVyJzoxLCd2aWRlbzo6c3JjJzoxfTtodG1sNC5sdHlwZXM9e1VOU0FOREJPWEVEOjIsU0FOREJPWEVEOjEsREFUQTowfTtodG1sNC5MT0FERVJUWVBFUz17J2E6OmhyZWYnOjIsJ2FyZWE6OmhyZWYnOjIsJ2F1ZGlvOjpzcmMnOjEsJ2Jhc2U6OmhyZWYnOjIsJ2Jsb2NrcXVvdGU6OmNpdGUnOjIsJ2J1dHRvbjo6Zm9ybWFjdGlvbic6MiwnY29tbWFuZDo6aWNvbic6MSwnZGVsOjpjaXRlJzoyLCdlbWJlZDo6c3JjJzoxLCdmb3JtOjphY3Rpb24nOjIsJ2h0bWw6OiBtYW5pZmVzdCc6MSwnaWZyYW1lOjpzcmMnOjEsJ2ltZzo6c3JjJzoxLCdpbnB1dDo6Zm9ybWFjdGlvbic6MiwnaW5wdXQ6OnNyYyc6MSwnaW5zOjpjaXRlJzoyLCdsaW5rOjpocmVmJzoyLCdvYmplY3Q6OmRhdGEnOjAsJ3E6OmNpdGUnOjIsJ3NjcmlwdDo6c3JjJzoxLCdzb3VyY2U6OnNyYyc6MSwndHJhY2s6OnNyYyc6MSwndmlkZW86OnBvc3Rlcic6MSwndmlkZW86OnNyYyc6MX07aWYodHlwZW9mIHdpbmRvdyE9PSd1bmRlZmluZWQnKXt3aW5kb3dbJ2h0bWw0J109aHRtbDR9DQovLyBDb3B5cmlnaHQgKEMpIDIwMDYgR29vZ2xlIEluYy4NCi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOw0KLy8geW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLg0KLy8gWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0DQovLyAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMA0KLy8gZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywNCi8vIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQNCi8vIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLg0KdmFyIGh0bWw9KGZ1bmN0aW9uKGEpe3ZhciBiLGMsZDtpZigndW5kZWZpbmVkJyE9PXR5cGVvZiB3aW5kb3cpe2I9d2luZG93WydwYXJzZUNzc0RlY2xhcmF0aW9ucyddO2M9d2luZG93WydzYW5pdGl6ZUNzc1Byb3BlcnR5J107ZD13aW5kb3dbJ2Nzc1NjaGVtYSddfXZhciBsO2lmKCdzY3JpcHQnPT09J1NDUklQVCcudG9Mb3dlckNhc2UoKSl7bD1mdW5jdGlvbihzKXtyZXR1cm4gcy50b0xvd2VyQ2FzZSgpfX1lbHNle2w9ZnVuY3Rpb24ocyl7cmV0dXJuIHMucmVwbGFjZSgvW0EtWl0vZyxmdW5jdGlvbihlKXtyZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZShlLmNoYXJDb2RlQXQoMCl8MzIpfSl9fXZhciBFPXsnbHQnOic8JywnZ3QnOic+JywnYW1wJzonJicsJ25ic3AnOidcMjQwJywncXVvdCc6JyInLCdhcG9zJzonXCcnfTt2YXIgZj0vXiMoXGQrKSQvO3ZhciBnPS9eI3goWzAtOUEtRmEtZl0rKSQvO2Z1bmN0aW9uIGoobil7bj1sKG4pO2lmKEUuaGFzT3duUHJvcGVydHkobikpe3JldHVybiBFW25dfXZhciBtPW4ubWF0Y2goZik7aWYobSl7cmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUocGFyc2VJbnQobVsxXSwxMCkpfWVsc2UgaWYoISEobT1uLm1hdGNoKGcpKSl7cmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUocGFyc2VJbnQobVsxXSwxNikpfXJldHVybicnfWZ1bmN0aW9uIGsoXyxuKXtyZXR1cm4gaihuKX12YXIgbz0vXDAvZztmdW5jdGlvbiByKHMpe3JldHVybiBzLnJlcGxhY2UobywnJyl9dmFyIHQ9LyYoI1xkK3wjeFswLTlBLUZhLWZdK3xcdyspOy9nO2Z1bmN0aW9uIHUocyl7cmV0dXJuIHMucmVwbGFjZSh0LGspfXZhciB3PS8mL2c7dmFyIHg9LyYoW15hLXojXXwjKD86W14wLTl4XXx4KD86W14wLTlhLWZdfCQpfCQpfCQpL2dpO3ZhciB5PS9bPF0vZzt2YXIgej0vPi9nO3ZhciBBPS9cIi9nO2Z1bmN0aW9uIEIocyl7cmV0dXJuKCcnK3MpLnJlcGxhY2UodywnJmFtcDsnKS5yZXBsYWNlKHksJyZsdDsnKS5yZXBsYWNlKHosJyZndDsnKS5yZXBsYWNlKEEsJyYjMzQ7Jyl9ZnVuY3Rpb24gQyhlKXtyZXR1cm4gZS5yZXBsYWNlKHgsJyZhbXA7JDEnKS5yZXBsYWNlKHksJyZsdDsnKS5yZXBsYWNlKHosJyZndDsnKX12YXIgRD1uZXcgUmVnRXhwKCdeXFxzKicrJyhbYS16XVthLXotXSopJysnKD86JysoJ1xccyooPSlcXHMqJysnKCcrKCcoXCIpW15cIl0qKFwifCQpJysnfCcrJyhcJylbXlwnXSooXCd8JCknKyd8JysnKD89W2Etel1bYS16LV0qXFxzKj0pJysnfCcrJ1teXCJcJ1xcc10qJykrJyknKSsnKT8nLCdpJyk7dmFyIEY9L14oI1swLTldK3wjeFswLTlhLWZdK3xcdyspOy9pO3ZhciBHPSgnYSxiJy5zcGxpdCgvKCwpLykubGVuZ3RoPT09Myk7dmFyIEg9YS5lZmxhZ3MuQ0RBVEF8YS5lZmxhZ3MuUkNEQVRBO2Z1bmN0aW9uIEkoaCl7cmV0dXJuIGZ1bmN0aW9uKGUscCl7cmV0dXJuIEsoZSxoLHApfX12YXIgSj17fTtmdW5jdGlvbiBLKGUsaSxuKXt2YXIgaD1pO3ZhciBtLHAscTt2YXIgcz1OKGUpO3ZhciB2PXtub01vcmVHVDpmYWxzZSxub01vcmVFbmRDb21tZW50czpmYWxzZX07TShpLHMsMCx2LG4pfWZ1bmN0aW9uIEwoaCxwLGkscyxlKXtyZXR1cm4gZnVuY3Rpb24oKXtNKGgscCxpLHMsZSl9fWZ1bmN0aW9uIE0oaCxpLG4scyxxKXt0cnl7aWYoaC5zdGFydERvYyYmbj09MCl7aC5zdGFydERvYyhxKX12YXIgbSxwLHY7Zm9yKHZhciBfPW4sYjE9aS5sZW5ndGg7XzxiMTspe3ZhciBjMT1pW18rK107dmFyIGQxPWlbX107c3dpdGNoKGMxKXtjYXNlJyYnOmlmKEYudGVzdChkMSkpe2lmKGgucGNkYXRhKXtoLnBjZGF0YSgnJicrZDEscSxKLEwoaCxpLF8scyxxKSl9XysrfWVsc2V7aWYoaC5wY2RhdGEpe2gucGNkYXRhKCImYW1wOyIscSxKLEwoaCxpLF8scyxxKSl9fWJyZWFrO2Nhc2UnPFwvJzppZihtPS9eKFx3KylbXlwnXCJdKi8uZXhlYyhkMSkpe2lmKG1bMF0ubGVuZ3RoPT09ZDEubGVuZ3RoJiZpW18rMV09PT0nPicpe18rPTI7dj1sKG1bMV0pO2lmKGEuRUxFTUVOVFMuaGFzT3duUHJvcGVydHkodikpe2lmKGguZW5kVGFnKXtoLmVuZFRhZyh2LHEsSixMKGgsaSxfLHMscSkpfX19ZWxzZXtfPU8oaSxfLGgscSxKLHMpfX1lbHNle2lmKGgucGNkYXRhKXtoLnBjZGF0YSgnJmx0Oy8nLHEsSixMKGgsaSxfLHMscSkpfX1icmVhaztjYXNlJzwnOmlmKG09L14oXHcrKVxzKlwvPy8uZXhlYyhkMSkpe2lmKG1bMF0ubGVuZ3RoPT09ZDEubGVuZ3RoJiZpW18rMV09PT0nPicpe18rPTI7dj1sKG1bMV0pO2lmKGEuRUxFTUVOVFMuaGFzT3duUHJvcGVydHkodikpe2lmKGguc3RhcnRUYWcpe2guc3RhcnRUYWcodixbXSxxLEosTChoLGksXyxzLHEpKX12YXIgZTE9YS5FTEVNRU5UU1t2XTtpZihlMSZIKXt2YXIgZjE9e25hbWU6dixuZXh0Ol8sZWZsYWdzOmUxfTtfPVIoaSxmMSxoLHEsSixzKX19fWVsc2V7Xz1QKGksXyxoLHEsSixzKX19ZWxzZXtpZihoLnBjZGF0YSl7aC5wY2RhdGEoJyZsdDsnLHEsSixMKGgsaSxfLHMscSkpfX1icmVhaztjYXNlJzxcIS0tJzppZighcy5ub01vcmVFbmRDb21tZW50cyl7Zm9yKHA9XysxO3A8YjE7cCsrKXtpZihpW3BdPT09Jz4nJiYvLS0kLy50ZXN0KGlbcC0xXSkpe2JyZWFrfX1pZihwPGIxKXtfPXArMX1lbHNle3Mubm9Nb3JlRW5kQ29tbWVudHM9dHJ1ZX19aWYocy5ub01vcmVFbmRDb21tZW50cyl7aWYoaC5wY2RhdGEpe2gucGNkYXRhKCcmbHQ7IS0tJyxxLEosTChoLGksXyxzLHEpKX19YnJlYWs7Y2FzZSc8XCEnOmlmKCEvXlx3Ly50ZXN0KGQxKSl7aWYoaC5wY2RhdGEpe2gucGNkYXRhKCcmbHQ7IScscSxKLEwoaCxpLF8scyxxKSl9fWVsc2V7aWYoIXMubm9Nb3JlR1Qpe2ZvcihwPV8rMTtwPGIxO3ArKyl7aWYoaVtwXT09PSc+Jyl7YnJlYWt9fWlmKHA8YjEpe189cCsxfWVsc2V7cy5ub01vcmVHVD10cnVlfX1pZihzLm5vTW9yZUdUKXtpZihoLnBjZGF0YSl7aC5wY2RhdGEoJyZsdDshJyxxLEosTChoLGksXyxzLHEpKX19fWJyZWFrO2Nhc2UnPD8nOmlmKCFzLm5vTW9yZUdUKXtmb3IocD1fKzE7cDxiMTtwKyspe2lmKGlbcF09PT0nPicpe2JyZWFrfX1pZihwPGIxKXtfPXArMX1lbHNle3Mubm9Nb3JlR1Q9dHJ1ZX19aWYocy5ub01vcmVHVCl7aWYoaC5wY2RhdGEpe2gucGNkYXRhKCcmbHQ7PycscSxKLEwoaCxpLF8scyxxKSl9fWJyZWFrO2Nhc2UnPic6aWYoaC5wY2RhdGEpe2gucGNkYXRhKCImZ3Q7IixxLEosTChoLGksXyxzLHEpKX1icmVhaztjYXNlJyc6YnJlYWs7ZGVmYXVsdDppZihoLnBjZGF0YSl7aC5wY2RhdGEoYzEscSxKLEwoaCxpLF8scyxxKSl9YnJlYWt9fWlmKGguZW5kRG9jKXtoLmVuZERvYyhxKX19Y2F0Y2goZSl7aWYoZSE9PUope3Rocm93IGV9fX1mdW5jdGlvbiBOKHMpe3ZhciBlPS8oPFwvfDxcIS0tfDxbIT9dfFsmPD5dKS9nO3MrPScnO2lmKEcpe3JldHVybiBzLnNwbGl0KGUpfWVsc2V7dmFyIHA9W107dmFyIGg9MDt2YXIgbTt3aGlsZSgobT1lLmV4ZWMocykpIT09bnVsbCl7cC5wdXNoKHMuc3Vic3RyaW5nKGgsbS5pbmRleCkpO3AucHVzaChtWzBdKTtoPW0uaW5kZXgrbVswXS5sZW5ndGh9cC5wdXNoKHMuc3Vic3RyaW5nKGgpKTtyZXR1cm4gcH19ZnVuY3Rpb24gTyhwLGUsaCxpLEoscyl7dmFyIG09UyhwLGUpO2lmKCFtKXtyZXR1cm4gcC5sZW5ndGh9aWYobS5lZmxhZ3MhPT12b2lkIDApe2lmKGguZW5kVGFnKXtoLmVuZFRhZyhtLm5hbWUsaSxKLEwoaCxwLGUscyxpKSl9fXJldHVybiBtLm5leHR9ZnVuY3Rpb24gUChwLGUsaCxpLEoscyl7dmFyIG09UyhwLGUpO2lmKCFtKXtyZXR1cm4gcC5sZW5ndGh9aWYobS5lZmxhZ3MhPT12b2lkIDApe2lmKGguc3RhcnRUYWcpe2guc3RhcnRUYWcobS5uYW1lLG0uYXR0cnMsaSxKLEwoaCxwLG0ubmV4dCxzLGkpKX1pZihtLmVmbGFncyZIKXtyZXR1cm4gUihwLG0saCxpLEoscyl9fXJldHVybiBtLm5leHR9dmFyIFE9e307ZnVuY3Rpb24gUihlLGksaCxtLEoscyl7dmFyIG49ZS5sZW5ndGg7aWYoIVEuaGFzT3duUHJvcGVydHkoaS5uYW1lKSl7UVtpLm5hbWVdPW5ldyBSZWdFeHAoJ14nK2kubmFtZSsnKD86W1xcc1xcL118JCknLCdpJyl9dmFyIHE9UVtpLm5hbWVdO3ZhciB2PWkubmV4dDt2YXIgcD1pLm5leHQrMTtmb3IoO3A8bjtwKyspe2lmKGVbcC0xXT09PSc8XC8nJiZxLnRlc3QoZVtwXSkpe2JyZWFrfX1pZihwPG4pe3AtPTF9dmFyIF89ZS5zbGljZSh2LHApLmpvaW4oJycpO2lmKGkuZWZsYWdzJmEuZWZsYWdzLkNEQVRBKXtpZihoLmNkYXRhKXtoLmNkYXRhKF8sbSxKLEwoaCxlLHAscyxtKSl9fWVsc2UgaWYoaS5lZmxhZ3MmYS5lZmxhZ3MuUkNEQVRBKXtpZihoLnJjZGF0YSl7aC5yY2RhdGEoQyhfKSxtLEosTChoLGUscCxzLG0pKX19ZWxzZXt0aHJvdyBuZXcgRXJyb3IoJ2J1ZycpfXJldHVybiBwfWZ1bmN0aW9uIFMoZSxoKXt2YXIgbT0vXihcdyspLy5leGVjKGVbaF0pO3ZhciBpPXtuYW1lOmwobVsxXSl9O2lmKGEuRUxFTUVOVFMuaGFzT3duUHJvcGVydHkoaS5uYW1lKSl7aS5lZmxhZ3M9YS5FTEVNRU5UU1tpLm5hbWVdfWVsc2V7aS5lZmxhZ3M9dm9pZCAwfXZhciBuPWVbaF0uc3Vic3RyKG1bMF0ubGVuZ3RoKTt2YXIgcD1oKzE7dmFyIHE9ZS5sZW5ndGg7Zm9yKDtwPHE7cCsrKXtpZihlW3BdPT09Jz4nKXticmVha31uKz1lW3BdfWlmKHE8PXApe3JldHVybiB2b2lkIDB9dmFyIHM9W107d2hpbGUobiE9PScnKXttPUQuZXhlYyhuKTtpZighbSl7bj1uLnJlcGxhY2UoL15bXHNcU11bXmEtelxzXSovLCcnKX1lbHNlIGlmKChtWzRdJiYhbVs1XSl8fChtWzZdJiYhbVs3XSkpe3ZhciB2PW1bNF18fG1bNl07dmFyIF89ZmFsc2U7dmFyIGIxPVtuLGVbcCsrXV07Zm9yKDtwPHE7cCsrKXtpZihfKXtpZihlW3BdPT09Jz4nKXticmVha319ZWxzZSBpZigwPD1lW3BdLmluZGV4T2Yodikpe189dHJ1ZX1iMS5wdXNoKGVbcF0pfWlmKHE8PXApe2JyZWFrfW49YjEuam9pbignJyk7Y29udGludWV9ZWxzZXt2YXIgYzE9bChtWzFdKTt2YXIgZDE9bVsyXT9UKG1bM10pOmMxO3MucHVzaChjMSxkMSk7bj1uLnN1YnN0cihtWzBdLmxlbmd0aCl9fWkuYXR0cnM9cztpLm5leHQ9cCsxO3JldHVybiBpfWZ1bmN0aW9uIFQodil7dmFyIHE9di5jaGFyQ29kZUF0KDApO2lmKHE9PT0weDIyfHxxPT09MHgyNyl7dj12LnN1YnN0cigxLHYubGVuZ3RoLTIpfXJldHVybiB1KHIodikpfWZ1bmN0aW9uIFUoZSl7dmFyIHM7dmFyIGg7dmFyIG09ZnVuY3Rpb24oaSxuKXtpZighaCl7bi5wdXNoKGkpfX07cmV0dXJuIEkoe3N0YXJ0RG9jOmZ1bmN0aW9uKF8pe3M9W107aD1mYWxzZX0sc3RhcnRUYWc6ZnVuY3Rpb24ocCxxLHYpe2lmKGgpe3JldHVybn1pZighYS5FTEVNRU5UUy5oYXNPd25Qcm9wZXJ0eShwKSl7cmV0dXJufXZhciBfPWEuRUxFTUVOVFNbcF07aWYoXyZhLmVmbGFncy5GT0xEQUJMRSl7cmV0dXJufXE9ZShwLHEpO2lmKCFxKXtoPSEoXyZhLmVmbGFncy5FTVBUWSk7cmV0dXJufWlmKCEoXyZhLmVmbGFncy5FTVBUWSkpe3MucHVzaChwKX12LnB1c2goJzwnLHApO2Zvcih2YXIgaT0wLG49cS5sZW5ndGg7aTxuO2krPTIpe3ZhciBiMT1xW2ldLGMxPXFbaSsxXTtpZihjMSE9PW51bGwmJmMxIT09dm9pZCAwKXt2LnB1c2goJyAnLGIxLCc9IicsQihjMSksJyInKX19di5wdXNoKCc+Jyl9LGVuZFRhZzpmdW5jdGlvbihuLHApe2lmKGgpe2g9ZmFsc2U7cmV0dXJufWlmKCFhLkVMRU1FTlRTLmhhc093blByb3BlcnR5KG4pKXtyZXR1cm59dmFyIHE9YS5FTEVNRU5UU1tuXTtpZighKHEmKGEuZWZsYWdzLkVNUFRZfGEuZWZsYWdzLkZPTERBQkxFKSkpe3ZhciB2O2lmKHEmYS5lZmxhZ3MuT1BUSU9OQUxfRU5EVEFHKXtmb3Iodj1zLmxlbmd0aDstLXY+PTA7KXt2YXIgXz1zW3ZdO2lmKF89PT1uKXticmVha31pZighKGEuRUxFTUVOVFNbX10mYS5lZmxhZ3MuT1BUSU9OQUxfRU5EVEFHKSl7cmV0dXJufX19ZWxzZXtmb3Iodj1zLmxlbmd0aDstLXY+PTA7KXtpZihzW3ZdPT09bil7YnJlYWt9fX1pZih2PDApe3JldHVybn1mb3IodmFyIGk9cy5sZW5ndGg7LS1pPnY7KXt2YXIgXz1zW2ldO2lmKCEoYS5FTEVNRU5UU1tfXSZhLmVmbGFncy5PUFRJT05BTF9FTkRUQUcpKXtwLnB1c2goJzxcLycsXywnPicpfX1zLmxlbmd0aD12O3AucHVzaCgnPFwvJyxuLCc+Jyl9fSxwY2RhdGE6bSxyY2RhdGE6bSxjZGF0YTptLGVuZERvYzpmdW5jdGlvbihpKXtmb3IoO3MubGVuZ3RoO3MubGVuZ3RoLS0pe2kucHVzaCgnPFwvJyxzW3MubGVuZ3RoLTFdLCc+Jyl9fX0pfXZhciBWPW5ldyBSZWdFeHAoJ14nKycoPzonKycoW146XC8/IyBdKyknKyc6KT8nKTt2YXIgVz0vXig/Omh0dHBzP3xtYWlsdG8pJC9pO2Z1bmN0aW9uIFgoZSxuKXtpZighbil7cmV0dXJuIG51bGx9dmFyIHA9KCcnK2UpLm1hdGNoKFYpO2lmKHAmJighcFsxXXx8Vy50ZXN0KHBbMV0pKSl7cmV0dXJuIG4oZSl9ZWxzZXtyZXR1cm4gbnVsbH19ZnVuY3Rpb24gWShlLGgsbSxuKXtmb3IodmFyIGk9MDtpPGgubGVuZ3RoO2krPTIpe3ZhciBwPWhbaV07dmFyIHY9aFtpKzFdO3ZhciBxPW51bGwscztpZigocz1lKyc6OicrcCxhLkFUVFJJQlMuaGFzT3duUHJvcGVydHkocykpfHwocz0nKjo6JytwLGEuQVRUUklCUy5oYXNPd25Qcm9wZXJ0eShzKSkpe3E9YS5BVFRSSUJTW3NdfWlmKHEhPT1udWxsKXtzd2l0Y2gocSl7Y2FzZSBhLmF0eXBlLk5PTkU6YnJlYWs7Y2FzZSBhLmF0eXBlLlNDUklQVDp2PW51bGw7YnJlYWs7Y2FzZSBhLmF0eXBlLlNUWUxFOmlmKCd1bmRlZmluZWQnPT09dHlwZW9mIGIpe3Y9bnVsbDticmVha312YXIgXz1bXTtiKHYse2RlY2xhcmF0aW9uOmZ1bmN0aW9uKGIxLGMxKXt2YXIgZDE9YjEudG9Mb3dlckNhc2UoKTt2YXIgZTE9ZFtkMV07aWYoIWUxKXtyZXR1cm59YyhkMSxlMSxjMSxtKTtfLnB1c2goYjErJzogJytjMS5qb2luKCcgJykpfX0pO3Y9Xy5sZW5ndGg+MD9fLmpvaW4oJyA7ICcpOm51bGw7YnJlYWs7Y2FzZSBhLmF0eXBlLklEOmNhc2UgYS5hdHlwZS5JRFJFRjpjYXNlIGEuYXR5cGUuSURSRUZTOmNhc2UgYS5hdHlwZS5HTE9CQUxfTkFNRTpjYXNlIGEuYXR5cGUuTE9DQUxfTkFNRTpjYXNlIGEuYXR5cGUuQ0xBU1NFUzp2PW4/bih2KTp2O2JyZWFrO2Nhc2UgYS5hdHlwZS5VUkk6dj1YKHYsbSk7YnJlYWs7Y2FzZSBhLmF0eXBlLlVSSV9GUkFHTUVOVDppZih2JiYnIyc9PT12LmNoYXJBdCgwKSl7dj12LnN1YnN0cmluZygxKTt2PW4/bih2KTp2O2lmKHYhPT1udWxsJiZ2IT09dm9pZCAwKXt2PScjJyt2fX1lbHNle3Y9bnVsbH1icmVhaztkZWZhdWx0OnY9bnVsbDticmVha319ZWxzZXt2PW51bGx9aFtpKzFdPXZ9cmV0dXJuIGh9ZnVuY3Rpb24gWihlLGgpe3JldHVybiBmdW5jdGlvbihpLG0pe2lmKCEoYS5FTEVNRU5UU1tpXSZhLmVmbGFncy5VTlNBRkUpKXtyZXR1cm4gWShpLG0sZSxoKX19fWZ1bmN0aW9uICQoaSxlKXt2YXIgaD1bXTtVKGUpKGksaCk7cmV0dXJuIGguam9pbignJyl9ZnVuY3Rpb24gYTEoaSxlLGgpe3ZhciBtPVooZSxoKTtyZXR1cm4gJChpLG0pfXJldHVybntlc2NhcGVBdHRyaWI6QixtYWtlSHRtbFNhbml0aXplcjpVLG1ha2VTYXhQYXJzZXI6SSxtYWtlVGFnUG9saWN5Olosbm9ybWFsaXplUkNEYXRhOkMsc2FuaXRpemU6YTEsc2FuaXRpemVBdHRyaWJzOlksc2FuaXRpemVXaXRoUG9saWN5OiQsdW5lc2NhcGVFbnRpdGllczp1fX0pKGh0bWw0KTt2YXIgaHRtbF9zYW5pdGl6ZT1odG1sLnNhbml0aXplO2lmKHR5cGVvZiB3aW5kb3chPT0ndW5kZWZpbmVkJyl7d2luZG93WydodG1sJ109aHRtbDt3aW5kb3dbJ2h0bWxfc2FuaXRpemUnXT1odG1sX3Nhbml0aXplfQ0KLyohDQogKiBqUXVlcnkgSmF2YVNjcmlwdCBMaWJyYXJ5IHYxLjExLjENCiAqIGh0dHA6Ly9qcXVlcnkuY29tLw0KICoNCiAqIEluY2x1ZGVzIFNpenpsZS5qcw0KICogaHR0cDovL3NpenpsZWpzLmNvbS8NCiAqDQogKiBDb3B5cmlnaHQgMjAwNSwgMjAxNCBqUXVlcnkgRm91bmRhdGlvbiwgSW5jLiBhbmQgb3RoZXIgY29udHJpYnV0b3JzDQogKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UNCiAqIGh0dHA6Ly9qcXVlcnkub3JnL2xpY2Vuc2UNCiAqDQogKiBEYXRlOiAyMDE0LTA1LTAxVDE3OjQyWg0KICovDQooZnVuY3Rpb24oZyxmKXtpZih0eXBlb2YgbW9kdWxlPT09Im9iamVjdCImJnR5cGVvZiBtb2R1bGUuZXhwb3J0cz09PSJvYmplY3QiKXttb2R1bGUuZXhwb3J0cz1nLmRvY3VtZW50P2YoZyx0cnVlKTpmdW5jdGlvbih3KXtpZighdy5kb2N1bWVudCl7dGhyb3cgbmV3IEVycm9yKCJqUXVlcnkgcmVxdWlyZXMgYSB3aW5kb3cgd2l0aCBhIGRvY3VtZW50Iil9cmV0dXJuIGYodyl9fWVsc2V7ZihnKX19KHR5cGVvZiB3aW5kb3chPT0idW5kZWZpbmVkIj93aW5kb3c6dGhpcyxmdW5jdGlvbih3LGMpe3ZhciBkPVtdO3ZhciBmPWQuc2xpY2U7dmFyIGc9ZC5jb25jYXQ7dmFyIGg9ZC5wdXNoO3ZhciBrPWQuaW5kZXhPZjt2YXIgbz17fTt2YXIgcT1vLnRvU3RyaW5nO3ZhciB1PW8uaGFzT3duUHJvcGVydHk7dmFyIHg9e307dmFyIHk9IjEuMTEuMSIsUT1mdW5jdGlvbihzLGEpe3JldHVybiBuZXcgUS5mbi5pbml0KHMsYSl9LHo9L15bXHNcdUZFRkZceEEwXSt8W1xzXHVGRUZGXHhBMF0rJC9nLEE9L14tbXMtLyxCPS8tKFtcZGEtel0pL2dpLEM9ZnVuY3Rpb24oYSxsKXtyZXR1cm4gbC50b1VwcGVyQ2FzZSgpfTtRLmZuPVEucHJvdG90eXBlPXtqcXVlcnk6eSxjb25zdHJ1Y3RvcjpRLHNlbGVjdG9yOiIiLGxlbmd0aDowLHRvQXJyYXk6ZnVuY3Rpb24oKXtyZXR1cm4gZi5jYWxsKHRoaXMpfSxnZXQ6ZnVuY3Rpb24obil7cmV0dXJuIG4hPW51bGw/KG48MD90aGlzW24rdGhpcy5sZW5ndGhdOnRoaXNbbl0pOmYuY2FsbCh0aGlzKX0scHVzaFN0YWNrOmZ1bmN0aW9uKGEpe3ZhciByPVEubWVyZ2UodGhpcy5jb25zdHJ1Y3RvcigpLGEpO3IucHJldk9iamVjdD10aGlzO3IuY29udGV4dD10aGlzLmNvbnRleHQ7cmV0dXJuIHJ9LGVhY2g6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gUS5lYWNoKHRoaXMsYSxiKX0sbWFwOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnB1c2hTdGFjayhRLm1hcCh0aGlzLGZ1bmN0aW9uKGIsaSl7cmV0dXJuIGEuY2FsbChiLGksYil9KSl9LHNsaWNlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHVzaFN0YWNrKGYuYXBwbHkodGhpcyxhcmd1bWVudHMpKX0sZmlyc3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lcSgwKX0sbGFzdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVxKC0xKX0sZXE6ZnVuY3Rpb24oaSl7dmFyIGw9dGhpcy5sZW5ndGgsaj0raSsoaTwwP2w6MCk7cmV0dXJuIHRoaXMucHVzaFN0YWNrKGo+PTAmJmo8bD9bdGhpc1tqXV06W10pfSxlbmQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wcmV2T2JqZWN0fHx0aGlzLmNvbnN0cnVjdG9yKG51bGwpfSxwdXNoOmgsc29ydDpkLnNvcnQsc3BsaWNlOmQuc3BsaWNlfTtRLmV4dGVuZD1RLmZuLmV4dGVuZD1mdW5jdGlvbigpe3ZhciBzLGEsYixuLGosbCx0PWFyZ3VtZW50c1swXXx8e30saT0xLG09YXJndW1lbnRzLmxlbmd0aCxwPWZhbHNlO2lmKHR5cGVvZiB0PT09ImJvb2xlYW4iKXtwPXQ7dD1hcmd1bWVudHNbaV18fHt9O2krK31pZih0eXBlb2YgdCE9PSJvYmplY3QiJiYhUS5pc0Z1bmN0aW9uKHQpKXt0PXt9fWlmKGk9PT1tKXt0PXRoaXM7aS0tfWZvcig7aTxtO2krKyl7aWYoKGo9YXJndW1lbnRzW2ldKSE9bnVsbCl7Zm9yKG4gaW4gail7cz10W25dO2I9altuXTtpZih0PT09Yil7Y29udGludWV9aWYocCYmYiYmKFEuaXNQbGFpbk9iamVjdChiKXx8KGE9US5pc0FycmF5KGIpKSkpe2lmKGEpe2E9ZmFsc2U7bD1zJiZRLmlzQXJyYXkocyk/czpbXX1lbHNle2w9cyYmUS5pc1BsYWluT2JqZWN0KHMpP3M6e319dFtuXT1RLmV4dGVuZChwLGwsYil9ZWxzZSBpZihiIT09dW5kZWZpbmVkKXt0W25dPWJ9fX19cmV0dXJuIHR9O1EuZXh0ZW5kKHtleHBhbmRvOiJqUXVlcnkiKyh5K01hdGgucmFuZG9tKCkpLnJlcGxhY2UoL1xEL2csIiIpLGlzUmVhZHk6dHJ1ZSxlcnJvcjpmdW5jdGlvbihtKXt0aHJvdyBuZXcgRXJyb3IobSl9LG5vb3A6ZnVuY3Rpb24oKXt9LGlzRnVuY3Rpb246ZnVuY3Rpb24oYSl7cmV0dXJuIFEudHlwZShhKT09PSJmdW5jdGlvbiJ9LGlzQXJyYXk6QXJyYXkuaXNBcnJheXx8ZnVuY3Rpb24oYSl7cmV0dXJuIFEudHlwZShhKT09PSJhcnJheSJ9LGlzV2luZG93OmZ1bmN0aW9uKGEpe3JldHVybiBhIT1udWxsJiZhPT1hLndpbmRvd30saXNOdW1lcmljOmZ1bmN0aW9uKGEpe3JldHVybiFRLmlzQXJyYXkoYSkmJmEtcGFyc2VGbG9hdChhKT49MH0saXNFbXB0eU9iamVjdDpmdW5jdGlvbihhKXt2YXIgbjtmb3IobiBpbiBhKXtyZXR1cm4gZmFsc2V9cmV0dXJuIHRydWV9LGlzUGxhaW5PYmplY3Q6ZnVuY3Rpb24oYSl7dmFyIGI7aWYoIWF8fFEudHlwZShhKSE9PSJvYmplY3QifHxhLm5vZGVUeXBlfHxRLmlzV2luZG93KGEpKXtyZXR1cm4gZmFsc2V9dHJ5e2lmKGEuY29uc3RydWN0b3ImJiF1LmNhbGwoYSwiY29uc3RydWN0b3IiKSYmIXUuY2FsbChhLmNvbnN0cnVjdG9yLnByb3RvdHlwZSwiaXNQcm90b3R5cGVPZiIpKXtyZXR1cm4gZmFsc2V9fWNhdGNoKGUpe3JldHVybiBmYWxzZX1pZih4Lm93bkxhc3Qpe2ZvcihiIGluIGEpe3JldHVybiB1LmNhbGwoYSxiKX19Zm9yKGIgaW4gYSl7fXJldHVybiBiPT09dW5kZWZpbmVkfHx1LmNhbGwoYSxiKX0sdHlwZTpmdW5jdGlvbihhKXtpZihhPT1udWxsKXtyZXR1cm4gYSsiIn1yZXR1cm4gdHlwZW9mIGE9PT0ib2JqZWN0Inx8dHlwZW9mIGE9PT0iZnVuY3Rpb24iP29bcS5jYWxsKGEpXXx8Im9iamVjdCI6dHlwZW9mIGF9LGdsb2JhbEV2YWw6ZnVuY3Rpb24oYSl7aWYoYSYmUS50cmltKGEpKXsody5leGVjU2NyaXB0fHxmdW5jdGlvbihhKXt3WyJldmFsIl0uY2FsbCh3LGEpfSkoYSl9fSxjYW1lbENhc2U6ZnVuY3Rpb24ocyl7cmV0dXJuIHMucmVwbGFjZShBLCJtcy0iKS5yZXBsYWNlKEIsQyl9LG5vZGVOYW1lOmZ1bmN0aW9uKGEsbil7cmV0dXJuIGEubm9kZU5hbWUmJmEubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PW4udG9Mb3dlckNhc2UoKX0sZWFjaDpmdW5jdGlvbihhLGIsail7dmFyIHYsaT0wLGw9YS5sZW5ndGgsbT1EKGEpO2lmKGope2lmKG0pe2Zvcig7aTxsO2krKyl7dj1iLmFwcGx5KGFbaV0saik7aWYodj09PWZhbHNlKXticmVha319fWVsc2V7Zm9yKGkgaW4gYSl7dj1iLmFwcGx5KGFbaV0saik7aWYodj09PWZhbHNlKXticmVha319fX1lbHNle2lmKG0pe2Zvcig7aTxsO2krKyl7dj1iLmNhbGwoYVtpXSxpLGFbaV0pO2lmKHY9PT1mYWxzZSl7YnJlYWt9fX1lbHNle2ZvcihpIGluIGEpe3Y9Yi5jYWxsKGFbaV0saSxhW2ldKTtpZih2PT09ZmFsc2Upe2JyZWFrfX19fXJldHVybiBhfSx0cmltOmZ1bmN0aW9uKHQpe3JldHVybiB0PT1udWxsPyIiOih0KyIiKS5yZXBsYWNlKHosIiIpfSxtYWtlQXJyYXk6ZnVuY3Rpb24oYSxyKXt2YXIgYj1yfHxbXTtpZihhIT1udWxsKXtpZihEKE9iamVjdChhKSkpe1EubWVyZ2UoYix0eXBlb2YgYT09PSJzdHJpbmciP1thXTphKX1lbHNle2guY2FsbChiLGEpfX1yZXR1cm4gYn0saW5BcnJheTpmdW5jdGlvbihhLGIsaSl7dmFyIGw7aWYoYil7aWYoayl7cmV0dXJuIGsuY2FsbChiLGEsaSl9bD1iLmxlbmd0aDtpPWk/aTwwP01hdGgubWF4KDAsbCtpKTppOjA7Zm9yKDtpPGw7aSsrKXtpZihpIGluIGImJmJbaV09PT1hKXtyZXR1cm4gaX19fXJldHVybi0xfSxtZXJnZTpmdW5jdGlvbihhLHMpe3ZhciBsPStzLmxlbmd0aCxqPTAsaT1hLmxlbmd0aDt3aGlsZShqPGwpe2FbaSsrXT1zW2orK119aWYobCE9PWwpe3doaWxlKHNbal0hPT11bmRlZmluZWQpe2FbaSsrXT1zW2orK119fWEubGVuZ3RoPWk7cmV0dXJuIGF9LGdyZXA6ZnVuY3Rpb24oYSxiLGope3ZhciBsLG09W10saT0wLG49YS5sZW5ndGgscD0hajtmb3IoO2k8bjtpKyspe2w9IWIoYVtpXSxpKTtpZihsIT09cCl7bS5wdXNoKGFbaV0pfX1yZXR1cm4gbX0sbWFwOmZ1bmN0aW9uKGEsYixqKXt2YXIgdixpPTAsbD1hLmxlbmd0aCxtPUQoYSkscj1bXTtpZihtKXtmb3IoO2k8bDtpKyspe3Y9YihhW2ldLGksaik7aWYodiE9bnVsbCl7ci5wdXNoKHYpfX19ZWxzZXtmb3IoaSBpbiBhKXt2PWIoYVtpXSxpLGopO2lmKHYhPW51bGwpe3IucHVzaCh2KX19fXJldHVybiBnLmFwcGx5KFtdLHIpfSxndWlkOjEscHJveHk6ZnVuY3Rpb24oYSxiKXt2YXIgaixwLHQ7aWYodHlwZW9mIGI9PT0ic3RyaW5nIil7dD1hW2JdO2I9YTthPXR9aWYoIVEuaXNGdW5jdGlvbihhKSl7cmV0dXJuIHVuZGVmaW5lZH1qPWYuY2FsbChhcmd1bWVudHMsMik7cD1mdW5jdGlvbigpe3JldHVybiBhLmFwcGx5KGJ8fHRoaXMsai5jb25jYXQoZi5jYWxsKGFyZ3VtZW50cykpKX07cC5ndWlkPWEuZ3VpZD1hLmd1aWR8fFEuZ3VpZCsrO3JldHVybiBwfSxub3c6ZnVuY3Rpb24oKXtyZXR1cm4rKG5ldyBEYXRlKCkpfSxzdXBwb3J0Onh9KTtRLmVhY2goIkJvb2xlYW4gTnVtYmVyIFN0cmluZyBGdW5jdGlvbiBBcnJheSBEYXRlIFJlZ0V4cCBPYmplY3QgRXJyb3IiLnNwbGl0KCIgIiksZnVuY3Rpb24oaSxuKXtvWyJbb2JqZWN0ICIrbisiXSJdPW4udG9Mb3dlckNhc2UoKX0pO2Z1bmN0aW9uIEQoYSl7dmFyIGw9YS5sZW5ndGgsdD1RLnR5cGUoYSk7aWYodD09PSJmdW5jdGlvbiJ8fFEuaXNXaW5kb3coYSkpe3JldHVybiBmYWxzZX1pZihhLm5vZGVUeXBlPT09MSYmbCl7cmV0dXJuIHRydWV9cmV0dXJuIHQ9PT0iYXJyYXkifHxsPT09MHx8dHlwZW9mIGw9PT0ibnVtYmVyIiYmbD4wJiYobC0xKWluIGF9dmFyIFM9DQovKiENCiAqIFNpenpsZSBDU1MgU2VsZWN0b3IgRW5naW5lIHYxLjEwLjE5DQogKiBodHRwOi8vc2l6emxlanMuY29tLw0KICoNCiAqIENvcHlyaWdodCAyMDEzIGpRdWVyeSBGb3VuZGF0aW9uLCBJbmMuIGFuZCBvdGhlciBjb250cmlidXRvcnMNCiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZQ0KICogaHR0cDovL2pxdWVyeS5vcmcvbGljZW5zZQ0KICoNCiAqIERhdGU6IDIwMTQtMDQtMTgNCiAqLw0KKGZ1bmN0aW9uKHcpe3ZhciBpLHgsbCxuLHAsdCxyLHMsdixyMyxzMyx0MyxKLG8zLHUzLHYzLHczLHgzLHkzLHozPSJzaXp6bGUiKy0obmV3IERhdGUoKSksQTM9dy5kb2N1bWVudCxCMz0wLEMzPTAsRDM9YzQoKSxFMz1jNCgpLEYzPWM0KCksRzM9ZnVuY3Rpb24oYSxiKXtpZihhPT09Yil7czM9dHJ1ZX1yZXR1cm4gMH0sWD10eXBlb2YgdW5kZWZpbmVkLEgzPTE8PDMxLHU9KHt9KS5oYXNPd25Qcm9wZXJ0eSxJMz1bXSxKMz1JMy5wb3AsSzM9STMucHVzaCxoPUkzLnB1c2gsZj1JMy5zbGljZSxrPUkzLmluZGV4T2Z8fGZ1bmN0aW9uKGEpe3ZhciBpPTAsYj10aGlzLmxlbmd0aDtmb3IoO2k8YjtpKyspe2lmKHRoaXNbaV09PT1hKXtyZXR1cm4gaX19cmV0dXJuLTF9LEwzPSJjaGVja2VkfHNlbGVjdGVkfGFzeW5jfGF1dG9mb2N1c3xhdXRvcGxheXxjb250cm9sc3xkZWZlcnxkaXNhYmxlZHxoaWRkZW58aXNtYXB8bG9vcHxtdWx0aXBsZXxvcGVufHJlYWRvbmx5fHJlcXVpcmVkfHNjb3BlZCIsTTM9IltcXHgyMFxcdFxcclxcblxcZl0iLE4zPSIoPzpcXFxcLnxbXFx3LV18W15cXHgwMC1cXHhhMF0pKyIsTzM9TjMucmVwbGFjZSgidyIsIncjIiksUDM9IlxcWyIrTTMrIiooIitOMysiKSg/OiIrTTMrIiooWypeJHwhfl0/PSkiK00zKyIqKD86JygoPzpcXFxcLnxbXlxcXFwnXSkqKSd8XCIoKD86XFxcXC58W15cXFxcXCJdKSopXCJ8KCIrTzMrIikpfCkiK00zKyIqXFxdIixRMz0iOigiK04zKyIpKD86XFwoKCIrIignKCg/OlxcXFwufFteXFxcXCddKSopJ3xcIigoPzpcXFxcLnxbXlxcXFxcIl0pKilcIil8IisiKCg/OlxcXFwufFteXFxcXCgpW1xcXV18IitQMysiKSopfCIrIi4qIisiKVxcKXwpIix6PW5ldyBSZWdFeHAoIl4iK00zKyIrfCgoPzpefFteXFxcXF0pKD86XFxcXC4pKikiK00zKyIrJCIsImciKSxSMz1uZXcgUmVnRXhwKCJeIitNMysiKiwiK00zKyIqIiksUzM9bmV3IFJlZ0V4cCgiXiIrTTMrIiooWz4rfl18IitNMysiKSIrTTMrIioiKSxUMz1uZXcgUmVnRXhwKCI9IitNMysiKihbXlxcXSdcIl0qPykiK00zKyIqXFxdIiwiZyIpLFUzPW5ldyBSZWdFeHAoUTMpLFYzPW5ldyBSZWdFeHAoIl4iK08zKyIkIiksVzM9eyJJRCI6bmV3IFJlZ0V4cCgiXiMoIitOMysiKSIpLCJDTEFTUyI6bmV3IFJlZ0V4cCgiXlxcLigiK04zKyIpIiksIlRBRyI6bmV3IFJlZ0V4cCgiXigiK04zLnJlcGxhY2UoInciLCJ3KiIpKyIpIiksIkFUVFIiOm5ldyBSZWdFeHAoIl4iK1AzKSwiUFNFVURPIjpuZXcgUmVnRXhwKCJeIitRMyksIkNISUxEIjpuZXcgUmVnRXhwKCJeOihvbmx5fGZpcnN0fGxhc3R8bnRofG50aC1sYXN0KS0oY2hpbGR8b2YtdHlwZSkoPzpcXCgiK00zKyIqKGV2ZW58b2RkfCgoWystXXwpKFxcZCopbnwpIitNMysiKig/OihbKy1dfCkiK00zKyIqKFxcZCspfCkpIitNMysiKlxcKXwpIiwiaSIpLCJib29sIjpuZXcgUmVnRXhwKCJeKD86IitMMysiKSQiLCJpIiksIm5lZWRzQ29udGV4dCI6bmV3IFJlZ0V4cCgiXiIrTTMrIipbPit+XXw6KGV2ZW58b2RkfGVxfGd0fGx0fG50aHxmaXJzdHxsYXN0KSg/OlxcKCIrTTMrIiooKD86LVxcZCk/XFxkKikiK00zKyIqXFwpfCkoPz1bXi1dfCQpIiwiaSIpfSxYMz0vXig/OmlucHV0fHNlbGVjdHx0ZXh0YXJlYXxidXR0b24pJC9pLFkzPS9eaFxkJC9pLFozPS9eW157XStce1xzKlxbbmF0aXZlIFx3LyxLPS9eKD86IyhbXHctXSspfChcdyspfFwuKFtcdy1dKykpJC8sJDM9L1srfl0vLF8zPS8nfFxcL2csYTQ9bmV3IFJlZ0V4cCgiXFxcXChbXFxkYS1mXXsxLDZ9IitNMysiP3woIitNMysiKXwuKSIsImlnIiksYjQ9ZnVuY3Rpb24oXyxhLGIpe3ZhciBqPSIweCIrYS0weDEwMDAwO3JldHVybiBqIT09anx8Yj9hOmo8MD9TdHJpbmcuZnJvbUNoYXJDb2RlKGorMHgxMDAwMCk6U3RyaW5nLmZyb21DaGFyQ29kZShqPj4xMHwweEQ4MDAsaiYweDNGRnwweERDMDApfTt0cnl7aC5hcHBseSgoSTM9Zi5jYWxsKEEzLmNoaWxkTm9kZXMpKSxBMy5jaGlsZE5vZGVzKTtJM1tBMy5jaGlsZE5vZGVzLmxlbmd0aF0ubm9kZVR5cGV9Y2F0Y2goZSl7aD17YXBwbHk6STMubGVuZ3RoP2Z1bmN0aW9uKGEsYil7SzMuYXBwbHkoYSxmLmNhbGwoYikpfTpmdW5jdGlvbihhLGIpe3ZhciBqPWEubGVuZ3RoLGk9MDt3aGlsZSgoYVtqKytdPWJbaSsrXSkpe31hLmxlbmd0aD1qLTF9fX1mdW5jdGlvbiBTKGEsYixqLF8pe3ZhciB1NCx2NCxtLHc0LGkseDQseTQsejQsQTQsQjQ7aWYoKGI/Yi5vd25lckRvY3VtZW50fHxiOkEzKSE9PUope3QzKGIpfWI9Ynx8SjtqPWp8fFtdO2lmKCFhfHx0eXBlb2YgYSE9PSJzdHJpbmciKXtyZXR1cm4gan1pZigodzQ9Yi5ub2RlVHlwZSkhPT0xJiZ3NCE9PTkpe3JldHVybltdfWlmKHUzJiYhXyl7aWYoKHU0PUsuZXhlYyhhKSkpe2lmKChtPXU0WzFdKSl7aWYodzQ9PT05KXt2ND1iLmdldEVsZW1lbnRCeUlkKG0pO2lmKHY0JiZ2NC5wYXJlbnROb2RlKXtpZih2NC5pZD09PW0pe2oucHVzaCh2NCk7cmV0dXJuIGp9fWVsc2V7cmV0dXJuIGp9fWVsc2V7aWYoYi5vd25lckRvY3VtZW50JiYodjQ9Yi5vd25lckRvY3VtZW50LmdldEVsZW1lbnRCeUlkKG0pKSYmeTMoYix2NCkmJnY0LmlkPT09bSl7ai5wdXNoKHY0KTtyZXR1cm4gan19fWVsc2UgaWYodTRbMl0pe2guYXBwbHkoaixiLmdldEVsZW1lbnRzQnlUYWdOYW1lKGEpKTtyZXR1cm4gan1lbHNlIGlmKChtPXU0WzNdKSYmeC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lJiZiLmdldEVsZW1lbnRzQnlDbGFzc05hbWUpe2guYXBwbHkoaixiLmdldEVsZW1lbnRzQnlDbGFzc05hbWUobSkpO3JldHVybiBqfX1pZih4LnFzYSYmKCF2M3x8IXYzLnRlc3QoYSkpKXt6ND15ND16MztBND1iO0I0PXc0PT09OSYmYTtpZih3ND09PTEmJmIubm9kZU5hbWUudG9Mb3dlckNhc2UoKSE9PSJvYmplY3QiKXt4ND10KGEpO2lmKCh5ND1iLmdldEF0dHJpYnV0ZSgiaWQiKSkpe3o0PXk0LnJlcGxhY2UoXzMsIlxcJCYiKX1lbHNle2Iuc2V0QXR0cmlidXRlKCJpZCIsejQpfXo0PSJbaWQ9JyIrejQrIiddICI7aT14NC5sZW5ndGg7d2hpbGUoaS0tKXt4NFtpXT16NCttNCh4NFtpXSl9QTQ9JDMudGVzdChhKSYmazQoYi5wYXJlbnROb2RlKXx8YjtCND14NC5qb2luKCIsIil9aWYoQjQpe3RyeXtoLmFwcGx5KGosQTQucXVlcnlTZWxlY3RvckFsbChCNCkpO3JldHVybiBqfWNhdGNoKEM0KXt9ZmluYWxseXtpZigheTQpe2IucmVtb3ZlQXR0cmlidXRlKCJpZCIpfX19fX1yZXR1cm4gcyhhLnJlcGxhY2UoeiwiJDEiKSxiLGosXyl9ZnVuY3Rpb24gYzQoKXt2YXIgYT1bXTtmdW5jdGlvbiBiKGosbSl7aWYoYS5wdXNoKGorIiAiKT5sLmNhY2hlTGVuZ3RoKXtkZWxldGUgYlthLnNoaWZ0KCldfXJldHVybihiW2orIiAiXT1tKX1yZXR1cm4gYn1mdW5jdGlvbiBkNChhKXthW3ozXT10cnVlO3JldHVybiBhfWZ1bmN0aW9uIGU0KGEpe3ZhciBiPUouY3JlYXRlRWxlbWVudCgiZGl2Iik7dHJ5e3JldHVybiEhYShiKX1jYXRjaChlKXtyZXR1cm4gZmFsc2V9ZmluYWxseXtpZihiLnBhcmVudE5vZGUpe2IucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChiKX1iPW51bGx9fWZ1bmN0aW9uIGY0KGEsYil7dmFyIEkzPWEuc3BsaXQoInwiKSxpPWEubGVuZ3RoO3doaWxlKGktLSl7bC5hdHRySGFuZGxlW0kzW2ldXT1ifX1mdW5jdGlvbiBnNChhLGIpe3ZhciBqPWImJmEsbT1qJiZhLm5vZGVUeXBlPT09MSYmYi5ub2RlVHlwZT09PTEmJih+Yi5zb3VyY2VJbmRleHx8SDMpLSh+YS5zb3VyY2VJbmRleHx8SDMpO2lmKG0pe3JldHVybiBtfWlmKGope3doaWxlKChqPWoubmV4dFNpYmxpbmcpKXtpZihqPT09Yil7cmV0dXJuLTF9fX1yZXR1cm4gYT8xOi0xfWZ1bmN0aW9uIGg0KGEpe3JldHVybiBmdW5jdGlvbihiKXt2YXIgaj1iLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7cmV0dXJuIGo9PT0iaW5wdXQiJiZiLnR5cGU9PT1hfX1mdW5jdGlvbiBpNChhKXtyZXR1cm4gZnVuY3Rpb24oYil7dmFyIGo9Yi5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO3JldHVybihqPT09ImlucHV0Inx8aj09PSJidXR0b24iKSYmYi50eXBlPT09YX19ZnVuY3Rpb24gajQoYSl7cmV0dXJuIGQ0KGZ1bmN0aW9uKGIpe2I9K2I7cmV0dXJuIGQ0KGZ1bmN0aW9uKG0seDMpe3ZhciBqLF89YShbXSxtLmxlbmd0aCxiKSxpPV8ubGVuZ3RoO3doaWxlKGktLSl7aWYobVsoaj1fW2ldKV0pe21bal09ISh4M1tqXT1tW2pdKX19fSl9KX1mdW5jdGlvbiBrNChhKXtyZXR1cm4gYSYmdHlwZW9mIGEuZ2V0RWxlbWVudHNCeVRhZ05hbWUhPT1YJiZhfXg9Uy5zdXBwb3J0PXt9O3A9Uy5pc1hNTD1mdW5jdGlvbihhKXt2YXIgYj1hJiYoYS5vd25lckRvY3VtZW50fHxhKS5kb2N1bWVudEVsZW1lbnQ7cmV0dXJuIGI/Yi5ub2RlTmFtZSE9PSJIVE1MIjpmYWxzZX07dDM9Uy5zZXREb2N1bWVudD1mdW5jdGlvbihqKXt2YXIgXyx1ND1qP2oub3duZXJEb2N1bWVudHx8ajpBMyx2ND11NC5kZWZhdWx0VmlldztpZih1ND09PUp8fHU0Lm5vZGVUeXBlIT09OXx8IXU0LmRvY3VtZW50RWxlbWVudCl7cmV0dXJuIEp9Sj11NDtvMz11NC5kb2N1bWVudEVsZW1lbnQ7dTM9IXAodTQpO2lmKHY0JiZ2NCE9PXY0LnRvcCl7aWYodjQuYWRkRXZlbnRMaXN0ZW5lcil7djQuYWRkRXZlbnRMaXN0ZW5lcigidW5sb2FkIixmdW5jdGlvbigpe3QzKCl9LGZhbHNlKX1lbHNlIGlmKHY0LmF0dGFjaEV2ZW50KXt2NC5hdHRhY2hFdmVudCgib251bmxvYWQiLGZ1bmN0aW9uKCl7dDMoKX0pfX14LmF0dHJpYnV0ZXM9ZTQoZnVuY3Rpb24oYSl7YS5jbGFzc05hbWU9ImkiO3JldHVybiFhLmdldEF0dHJpYnV0ZSgiY2xhc3NOYW1lIil9KTt4LmdldEVsZW1lbnRzQnlUYWdOYW1lPWU0KGZ1bmN0aW9uKGEpe2EuYXBwZW5kQ2hpbGQodTQuY3JlYXRlQ29tbWVudCgiIikpO3JldHVybiFhLmdldEVsZW1lbnRzQnlUYWdOYW1lKCIqIikubGVuZ3RofSk7eC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lPVozLnRlc3QodTQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSkmJmU0KGZ1bmN0aW9uKGEpe2EuaW5uZXJIVE1MPSI8ZGl2IGNsYXNzPSdhJz48L2Rpdj48ZGl2IGNsYXNzPSdhIGknPjwvZGl2PiI7YS5maXJzdENoaWxkLmNsYXNzTmFtZT0iaSI7cmV0dXJuIGEuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgiaSIpLmxlbmd0aD09PTJ9KTt4LmdldEJ5SWQ9ZTQoZnVuY3Rpb24oYSl7bzMuYXBwZW5kQ2hpbGQoYSkuaWQ9ejM7cmV0dXJuIXU0LmdldEVsZW1lbnRzQnlOYW1lfHwhdTQuZ2V0RWxlbWVudHNCeU5hbWUoejMpLmxlbmd0aH0pO2lmKHguZ2V0QnlJZCl7bC5maW5kWyJJRCJdPWZ1bmN0aW9uKGEsYil7aWYodHlwZW9mIGIuZ2V0RWxlbWVudEJ5SWQhPT1YJiZ1Myl7dmFyIG09Yi5nZXRFbGVtZW50QnlJZChhKTtyZXR1cm4gbSYmbS5wYXJlbnROb2RlP1ttXTpbXX19O2wuZmlsdGVyWyJJRCJdPWZ1bmN0aW9uKGEpe3ZhciBiPWEucmVwbGFjZShhNCxiNCk7cmV0dXJuIGZ1bmN0aW9uKG0pe3JldHVybiBtLmdldEF0dHJpYnV0ZSgiaWQiKT09PWJ9fX1lbHNle2RlbGV0ZSBsLmZpbmRbIklEIl07bC5maWx0ZXJbIklEIl09ZnVuY3Rpb24oYSl7dmFyIGI9YS5yZXBsYWNlKGE0LGI0KTtyZXR1cm4gZnVuY3Rpb24obSl7dmFyIGo9dHlwZW9mIG0uZ2V0QXR0cmlidXRlTm9kZSE9PVgmJm0uZ2V0QXR0cmlidXRlTm9kZSgiaWQiKTtyZXR1cm4gaiYmai52YWx1ZT09PWJ9fX1sLmZpbmRbIlRBRyJdPXguZ2V0RWxlbWVudHNCeVRhZ05hbWU/ZnVuY3Rpb24oYSxiKXtpZih0eXBlb2YgYi5nZXRFbGVtZW50c0J5VGFnTmFtZSE9PVgpe3JldHVybiBiLmdldEVsZW1lbnRzQnlUYWdOYW1lKGEpfX06ZnVuY3Rpb24oYSxiKXt2YXIgbSx3ND1bXSxpPTAseDQ9Yi5nZXRFbGVtZW50c0J5VGFnTmFtZShhKTtpZihhPT09IioiKXt3aGlsZSgobT14NFtpKytdKSl7aWYobS5ub2RlVHlwZT09PTEpe3c0LnB1c2gobSl9fXJldHVybiB3NH1yZXR1cm4geDR9O2wuZmluZFsiQ0xBU1MiXT14LmdldEVsZW1lbnRzQnlDbGFzc05hbWUmJmZ1bmN0aW9uKGEsYil7aWYodHlwZW9mIGIuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSE9PVgmJnUzKXtyZXR1cm4gYi5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGEpfX07dzM9W107djM9W107aWYoKHgucXNhPVozLnRlc3QodTQucXVlcnlTZWxlY3RvckFsbCkpKXtlNChmdW5jdGlvbihhKXthLmlubmVySFRNTD0iPHNlbGVjdCBtc2FsbG93Y2xpcD0nJz48b3B0aW9uIHNlbGVjdGVkPScnPjwvb3B0aW9uPjwvc2VsZWN0PiI7aWYoYS5xdWVyeVNlbGVjdG9yQWxsKCJbbXNhbGxvd2NsaXBePScnXSIpLmxlbmd0aCl7djMucHVzaCgiWypeJF09IitNMysiKig/OicnfFwiXCIpIil9aWYoIWEucXVlcnlTZWxlY3RvckFsbCgiW3NlbGVjdGVkXSIpLmxlbmd0aCl7djMucHVzaCgiXFxbIitNMysiKig/OnZhbHVlfCIrTDMrIikiKX1pZighYS5xdWVyeVNlbGVjdG9yQWxsKCI6Y2hlY2tlZCIpLmxlbmd0aCl7djMucHVzaCgiOmNoZWNrZWQiKX19KTtlNChmdW5jdGlvbihhKXt2YXIgYj11NC5jcmVhdGVFbGVtZW50KCJpbnB1dCIpO2Iuc2V0QXR0cmlidXRlKCJ0eXBlIiwiaGlkZGVuIik7YS5hcHBlbmRDaGlsZChiKS5zZXRBdHRyaWJ1dGUoIm5hbWUiLCJEIik7aWYoYS5xdWVyeVNlbGVjdG9yQWxsKCJbbmFtZT1kXSIpLmxlbmd0aCl7djMucHVzaCgibmFtZSIrTTMrIipbKl4kfCF+XT89Iil9aWYoIWEucXVlcnlTZWxlY3RvckFsbCgiOmVuYWJsZWQiKS5sZW5ndGgpe3YzLnB1c2goIjplbmFibGVkIiwiOmRpc2FibGVkIil9YS5xdWVyeVNlbGVjdG9yQWxsKCIqLDp4Iik7djMucHVzaCgiLC4qOiIpfSl9aWYoKHgubWF0Y2hlc1NlbGVjdG9yPVozLnRlc3QoKHgzPW8zLm1hdGNoZXN8fG8zLndlYmtpdE1hdGNoZXNTZWxlY3Rvcnx8bzMubW96TWF0Y2hlc1NlbGVjdG9yfHxvMy5vTWF0Y2hlc1NlbGVjdG9yfHxvMy5tc01hdGNoZXNTZWxlY3RvcikpKSl7ZTQoZnVuY3Rpb24oYSl7eC5kaXNjb25uZWN0ZWRNYXRjaD14My5jYWxsKGEsImRpdiIpO3gzLmNhbGwoYSwiW3MhPScnXTp4Iik7dzMucHVzaCgiIT0iLFEzKX0pfXYzPXYzLmxlbmd0aCYmbmV3IFJlZ0V4cCh2My5qb2luKCJ8IikpO3czPXczLmxlbmd0aCYmbmV3IFJlZ0V4cCh3My5qb2luKCJ8IikpO189WjMudGVzdChvMy5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbik7eTM9X3x8WjMudGVzdChvMy5jb250YWlucyk/ZnVuY3Rpb24oYSxiKXt2YXIgbT1hLm5vZGVUeXBlPT09OT9hLmRvY3VtZW50RWxlbWVudDphLHc0PWImJmIucGFyZW50Tm9kZTtyZXR1cm4gYT09PXc0fHwhISh3NCYmdzQubm9kZVR5cGU9PT0xJiYobS5jb250YWlucz9tLmNvbnRhaW5zKHc0KTphLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uJiZhLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKHc0KSYxNikpfTpmdW5jdGlvbihhLGIpe2lmKGIpe3doaWxlKChiPWIucGFyZW50Tm9kZSkpe2lmKGI9PT1hKXtyZXR1cm4gdHJ1ZX19fXJldHVybiBmYWxzZX07RzM9Xz9mdW5jdGlvbihhLGIpe2lmKGE9PT1iKXtzMz10cnVlO3JldHVybiAwfXZhciBtPSFhLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uLSFiLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uO2lmKG0pe3JldHVybiBtfW09KGEub3duZXJEb2N1bWVudHx8YSk9PT0oYi5vd25lckRvY3VtZW50fHxiKT9hLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKGIpOjE7aWYobSYxfHwoIXguc29ydERldGFjaGVkJiZiLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKGEpPT09bSkpe2lmKGE9PT11NHx8YS5vd25lckRvY3VtZW50PT09QTMmJnkzKEEzLGEpKXtyZXR1cm4tMX1pZihiPT09dTR8fGIub3duZXJEb2N1bWVudD09PUEzJiZ5MyhBMyxiKSl7cmV0dXJuIDF9cmV0dXJuIHIzPyhrLmNhbGwocjMsYSktay5jYWxsKHIzLGIpKTowfXJldHVybiBtJjQ/LTE6MX06ZnVuY3Rpb24oYSxiKXtpZihhPT09Yil7czM9dHJ1ZTtyZXR1cm4gMH12YXIgbSxpPTAsdzQ9YS5wYXJlbnROb2RlLHg0PWIucGFyZW50Tm9kZSxhcD1bYV0sYnA9W2JdO2lmKCF3NHx8IXg0KXtyZXR1cm4gYT09PXU0Py0xOmI9PT11ND8xOnc0Py0xOng0PzE6cjM/KGsuY2FsbChyMyxhKS1rLmNhbGwocjMsYikpOjB9ZWxzZSBpZih3ND09PXg0KXtyZXR1cm4gZzQoYSxiKX1tPWE7d2hpbGUoKG09bS5wYXJlbnROb2RlKSl7YXAudW5zaGlmdChtKX1tPWI7d2hpbGUoKG09bS5wYXJlbnROb2RlKSl7YnAudW5zaGlmdChtKX13aGlsZShhcFtpXT09PWJwW2ldKXtpKyt9cmV0dXJuIGk/ZzQoYXBbaV0sYnBbaV0pOmFwW2ldPT09QTM/LTE6YnBbaV09PT1BMz8xOjB9O3JldHVybiB1NH07Uy5tYXRjaGVzPWZ1bmN0aW9uKGEsYil7cmV0dXJuIFMoYSxudWxsLG51bGwsYil9O1MubWF0Y2hlc1NlbGVjdG9yPWZ1bmN0aW9uKGEsYil7aWYoKGEub3duZXJEb2N1bWVudHx8YSkhPT1KKXt0MyhhKX1iPWIucmVwbGFjZShUMywiPSckMSddIik7aWYoeC5tYXRjaGVzU2VsZWN0b3ImJnUzJiYoIXczfHwhdzMudGVzdChiKSkmJighdjN8fCF2My50ZXN0KGIpKSl7dHJ5e3ZhciBqPXgzLmNhbGwoYSxiKTtpZihqfHx4LmRpc2Nvbm5lY3RlZE1hdGNofHxhLmRvY3VtZW50JiZhLmRvY3VtZW50Lm5vZGVUeXBlIT09MTEpe3JldHVybiBqfX1jYXRjaChlKXt9fXJldHVybiBTKGIsSixudWxsLFthXSkubGVuZ3RoPjB9O1MuY29udGFpbnM9ZnVuY3Rpb24oYSxiKXtpZigoYS5vd25lckRvY3VtZW50fHxhKSE9PUope3QzKGEpfXJldHVybiB5MyhhLGIpfTtTLmF0dHI9ZnVuY3Rpb24oYSxiKXtpZigoYS5vd25lckRvY3VtZW50fHxhKSE9PUope3QzKGEpfXZhciBqPWwuYXR0ckhhbmRsZVtiLnRvTG93ZXJDYXNlKCldLG09aiYmdS5jYWxsKGwuYXR0ckhhbmRsZSxiLnRvTG93ZXJDYXNlKCkpP2ooYSxiLCF1Myk6dW5kZWZpbmVkO3JldHVybiBtIT09dW5kZWZpbmVkP206eC5hdHRyaWJ1dGVzfHwhdTM/YS5nZXRBdHRyaWJ1dGUoYik6KG09YS5nZXRBdHRyaWJ1dGVOb2RlKGIpKSYmbS5zcGVjaWZpZWQ/bS52YWx1ZTpudWxsfTtTLmVycm9yPWZ1bmN0aW9uKG0pe3Rocm93IG5ldyBFcnJvcigiU3ludGF4IGVycm9yLCB1bnJlY29nbml6ZWQgZXhwcmVzc2lvbjogIittKX07Uy51bmlxdWVTb3J0PWZ1bmN0aW9uKGEpe3ZhciBiLG09W10saj0wLGk9MDtzMz0heC5kZXRlY3REdXBsaWNhdGVzO3IzPSF4LnNvcnRTdGFibGUmJmEuc2xpY2UoMCk7YS5zb3J0KEczKTtpZihzMyl7d2hpbGUoKGI9YVtpKytdKSl7aWYoYj09PWFbaV0pe2o9bS5wdXNoKGkpfX13aGlsZShqLS0pe2Euc3BsaWNlKG1bal0sMSl9fXIzPW51bGw7cmV0dXJuIGF9O249Uy5nZXRUZXh0PWZ1bmN0aW9uKGEpe3ZhciBiLGo9IiIsaT0wLG09YS5ub2RlVHlwZTtpZighbSl7d2hpbGUoKGI9YVtpKytdKSl7ais9bihiKX19ZWxzZSBpZihtPT09MXx8bT09PTl8fG09PT0xMSl7aWYodHlwZW9mIGEudGV4dENvbnRlbnQ9PT0ic3RyaW5nIil7cmV0dXJuIGEudGV4dENvbnRlbnR9ZWxzZXtmb3IoYT1hLmZpcnN0Q2hpbGQ7YTthPWEubmV4dFNpYmxpbmcpe2orPW4oYSl9fX1lbHNlIGlmKG09PT0zfHxtPT09NCl7cmV0dXJuIGEubm9kZVZhbHVlfXJldHVybiBqfTtsPVMuc2VsZWN0b3JzPXtjYWNoZUxlbmd0aDo1MCxjcmVhdGVQc2V1ZG86ZDQsbWF0Y2g6VzMsYXR0ckhhbmRsZTp7fSxmaW5kOnt9LHJlbGF0aXZlOnsiPiI6e2RpcjoicGFyZW50Tm9kZSIsZmlyc3Q6dHJ1ZX0sIiAiOntkaXI6InBhcmVudE5vZGUifSwiKyI6e2RpcjoicHJldmlvdXNTaWJsaW5nIixmaXJzdDp0cnVlfSwifiI6e2RpcjoicHJldmlvdXNTaWJsaW5nIn19LHByZUZpbHRlcjp7IkFUVFIiOmZ1bmN0aW9uKG0pe21bMV09bVsxXS5yZXBsYWNlKGE0LGI0KTttWzNdPShtWzNdfHxtWzRdfHxtWzVdfHwiIikucmVwbGFjZShhNCxiNCk7aWYobVsyXT09PSJ+PSIpe21bM109IiAiK21bM10rIiAifXJldHVybiBtLnNsaWNlKDAsNCl9LCJDSElMRCI6ZnVuY3Rpb24obSl7bVsxXT1tWzFdLnRvTG93ZXJDYXNlKCk7aWYobVsxXS5zbGljZSgwLDMpPT09Im50aCIpe2lmKCFtWzNdKXtTLmVycm9yKG1bMF0pfW1bNF09KyhtWzRdP21bNV0rKG1bNl18fDEpOjIqKG1bM109PT0iZXZlbiJ8fG1bM109PT0ib2RkIikpO21bNV09KygobVs3XSttWzhdKXx8bVszXT09PSJvZGQiKX1lbHNlIGlmKG1bM10pe1MuZXJyb3IobVswXSl9cmV0dXJuIG19LCJQU0VVRE8iOmZ1bmN0aW9uKG0pe3ZhciBhLGI9IW1bNl0mJm1bMl07aWYoVzNbIkNISUxEIl0udGVzdChtWzBdKSl7cmV0dXJuIG51bGx9aWYobVszXSl7bVsyXT1tWzRdfHxtWzVdfHwiIn1lbHNlIGlmKGImJlUzLnRlc3QoYikmJihhPXQoYix0cnVlKSkmJihhPWIuaW5kZXhPZigiKSIsYi5sZW5ndGgtYSktYi5sZW5ndGgpKXttWzBdPW1bMF0uc2xpY2UoMCxhKTttWzJdPWIuc2xpY2UoMCxhKX1yZXR1cm4gbS5zbGljZSgwLDMpfX0sZmlsdGVyOnsiVEFHIjpmdW5jdGlvbihhKXt2YXIgYj1hLnJlcGxhY2UoYTQsYjQpLnRvTG93ZXJDYXNlKCk7cmV0dXJuIGE9PT0iKiI/ZnVuY3Rpb24oKXtyZXR1cm4gdHJ1ZX06ZnVuY3Rpb24oail7cmV0dXJuIGoubm9kZU5hbWUmJmoubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PWJ9fSwiQ0xBU1MiOmZ1bmN0aW9uKGEpe3ZhciBiPUQzW2ErIiAiXTtyZXR1cm4gYnx8KGI9bmV3IFJlZ0V4cCgiKF58IitNMysiKSIrYSsiKCIrTTMrInwkKSIpKSYmRDMoYSxmdW5jdGlvbihqKXtyZXR1cm4gYi50ZXN0KHR5cGVvZiBqLmNsYXNzTmFtZT09PSJzdHJpbmciJiZqLmNsYXNzTmFtZXx8dHlwZW9mIGouZ2V0QXR0cmlidXRlIT09WCYmai5nZXRBdHRyaWJ1dGUoImNsYXNzIil8fCIiKX0pfSwiQVRUUiI6ZnVuY3Rpb24oYSxiLGope3JldHVybiBmdW5jdGlvbihtKXt2YXIgXz1TLmF0dHIobSxhKTtpZihfPT1udWxsKXtyZXR1cm4gYj09PSIhPSJ9aWYoIWIpe3JldHVybiB0cnVlfV8rPSIiO3JldHVybiBiPT09Ij0iP189PT1qOmI9PT0iIT0iP18hPT1qOmI9PT0iXj0iP2omJl8uaW5kZXhPZihqKT09PTA6Yj09PSIqPSI/aiYmXy5pbmRleE9mKGopPi0xOmI9PT0iJD0iP2omJl8uc2xpY2UoLWoubGVuZ3RoKT09PWo6Yj09PSJ+PSI/KCIgIitfKyIgIikuaW5kZXhPZihqKT4tMTpiPT09Inw9Ij9fPT09anx8Xy5zbGljZSgwLGoubGVuZ3RoKzEpPT09aisiLSI6ZmFsc2V9fSwiQ0hJTEQiOmZ1bmN0aW9uKGEsYixqLG0sXyl7dmFyIHU0PWEuc2xpY2UoMCwzKSE9PSJudGgiLHY0PWEuc2xpY2UoLTQpIT09Imxhc3QiLHc0PWI9PT0ib2YtdHlwZSI7cmV0dXJuIG09PT0xJiZfPT09MD9mdW5jdGlvbih4NCl7cmV0dXJuISF4NC5wYXJlbnROb2RlfTpmdW5jdGlvbih4NCx5NCx6NCl7dmFyIEE0LEI0LEM0LEQ0LEU0LEY0LEc0PXU0IT09djQ/Im5leHRTaWJsaW5nIjoicHJldmlvdXNTaWJsaW5nIixIND14NC5wYXJlbnROb2RlLEk0PXc0JiZ4NC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpLEo0PSF6NCYmIXc0O2lmKEg0KXtpZih1NCl7d2hpbGUoRzQpe0M0PXg0O3doaWxlKChDND1DNFtHNF0pKXtpZih3ND9DNC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09STQ6QzQubm9kZVR5cGU9PT0xKXtyZXR1cm4gZmFsc2V9fUY0PUc0PWE9PT0ib25seSImJiFGNCYmIm5leHRTaWJsaW5nIn1yZXR1cm4gdHJ1ZX1GND1bdjQ/SDQuZmlyc3RDaGlsZDpINC5sYXN0Q2hpbGRdO2lmKHY0JiZKNCl7QjQ9SDRbejNdfHwoSDRbejNdPXt9KTtBND1CNFthXXx8W107RTQ9QTRbMF09PT1CMyYmQTRbMV07RDQ9QTRbMF09PT1CMyYmQTRbMl07QzQ9RTQmJkg0LmNoaWxkTm9kZXNbRTRdO3doaWxlKChDND0rK0U0JiZDNCYmQzRbRzRdfHwoRDQ9RTQ9MCl8fEY0LnBvcCgpKSl7aWYoQzQubm9kZVR5cGU9PT0xJiYrK0Q0JiZDND09PXg0KXtCNFthXT1bQjMsRTQsRDRdO2JyZWFrfX19ZWxzZSBpZihKNCYmKEE0PSh4NFt6M118fCh4NFt6M109e30pKVthXSkmJkE0WzBdPT09QjMpe0Q0PUE0WzFdfWVsc2V7d2hpbGUoKEM0PSsrRTQmJkM0JiZDNFtHNF18fChEND1FND0wKXx8RjQucG9wKCkpKXtpZigodzQ/QzQubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PUk0OkM0Lm5vZGVUeXBlPT09MSkmJisrRDQpe2lmKEo0KXsoQzRbejNdfHwoQzRbejNdPXt9KSlbYV09W0IzLEQ0XX1pZihDND09PXg0KXticmVha319fX1ENC09XztyZXR1cm4gRDQ9PT1tfHwoRDQlbT09PTAmJkQ0L20+PTApfX19LCJQU0VVRE8iOmZ1bmN0aW9uKGEsYil7dmFyIGosbT1sLnBzZXVkb3NbYV18fGwuc2V0RmlsdGVyc1thLnRvTG93ZXJDYXNlKCldfHxTLmVycm9yKCJ1bnN1cHBvcnRlZCBwc2V1ZG86ICIrYSk7aWYobVt6M10pe3JldHVybiBtKGIpfWlmKG0ubGVuZ3RoPjEpe2o9W2EsYSwiIixiXTtyZXR1cm4gbC5zZXRGaWx0ZXJzLmhhc093blByb3BlcnR5KGEudG9Mb3dlckNhc2UoKSk/ZDQoZnVuY3Rpb24oXyx4Myl7dmFyIHU0LHY0PW0oXyxiKSxpPXY0Lmxlbmd0aDt3aGlsZShpLS0pe3U0PWsuY2FsbChfLHY0W2ldKTtfW3U0XT0hKHgzW3U0XT12NFtpXSl9fSk6ZnVuY3Rpb24oXyl7cmV0dXJuIG0oXywwLGopfX1yZXR1cm4gbX19LHBzZXVkb3M6eyJub3QiOmQ0KGZ1bmN0aW9uKGEpe3ZhciBiPVtdLGo9W10sbT1yKGEucmVwbGFjZSh6LCIkMSIpKTtyZXR1cm4gbVt6M10/ZDQoZnVuY3Rpb24oXyx4Myx1NCx2NCl7dmFyIHc0LHg0PW0oXyxudWxsLHY0LFtdKSxpPV8ubGVuZ3RoO3doaWxlKGktLSl7aWYoKHc0PXg0W2ldKSl7X1tpXT0hKHgzW2ldPXc0KX19fSk6ZnVuY3Rpb24oXyx1NCx2NCl7YlswXT1fO20oYixudWxsLHY0LGopO3JldHVybiFqLnBvcCgpfX0pLCJoYXMiOmQ0KGZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihiKXtyZXR1cm4gUyhhLGIpLmxlbmd0aD4wfX0pLCJjb250YWlucyI6ZDQoZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKGIpe3JldHVybihiLnRleHRDb250ZW50fHxiLmlubmVyVGV4dHx8bihiKSkuaW5kZXhPZihhKT4tMX19KSwibGFuZyI6ZDQoZnVuY3Rpb24oYSl7aWYoIVYzLnRlc3QoYXx8IiIpKXtTLmVycm9yKCJ1bnN1cHBvcnRlZCBsYW5nOiAiK2EpfWE9YS5yZXBsYWNlKGE0LGI0KS50b0xvd2VyQ2FzZSgpO3JldHVybiBmdW5jdGlvbihiKXt2YXIgajtkb3tpZigoaj11Mz9iLmxhbmc6Yi5nZXRBdHRyaWJ1dGUoInhtbDpsYW5nIil8fGIuZ2V0QXR0cmlidXRlKCJsYW5nIikpKXtqPWoudG9Mb3dlckNhc2UoKTtyZXR1cm4gaj09PWF8fGouaW5kZXhPZihhKyItIik9PT0wfX13aGlsZSgoYj1iLnBhcmVudE5vZGUpJiZiLm5vZGVUeXBlPT09MSk7cmV0dXJuIGZhbHNlfX0pLCJ0YXJnZXQiOmZ1bmN0aW9uKGEpe3ZhciBiPXcubG9jYXRpb24mJncubG9jYXRpb24uaGFzaDtyZXR1cm4gYiYmYi5zbGljZSgxKT09PWEuaWR9LCJyb290IjpmdW5jdGlvbihhKXtyZXR1cm4gYT09PW8zfSwiZm9jdXMiOmZ1bmN0aW9uKGEpe3JldHVybiBhPT09Si5hY3RpdmVFbGVtZW50JiYoIUouaGFzRm9jdXN8fEouaGFzRm9jdXMoKSkmJiEhKGEudHlwZXx8YS5ocmVmfHx+YS50YWJJbmRleCl9LCJlbmFibGVkIjpmdW5jdGlvbihhKXtyZXR1cm4gYS5kaXNhYmxlZD09PWZhbHNlfSwiZGlzYWJsZWQiOmZ1bmN0aW9uKGEpe3JldHVybiBhLmRpc2FibGVkPT09dHJ1ZX0sImNoZWNrZWQiOmZ1bmN0aW9uKGEpe3ZhciBiPWEubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm4oYj09PSJpbnB1dCImJiEhYS5jaGVja2VkKXx8KGI9PT0ib3B0aW9uIiYmISFhLnNlbGVjdGVkKX0sInNlbGVjdGVkIjpmdW5jdGlvbihhKXtpZihhLnBhcmVudE5vZGUpe2EucGFyZW50Tm9kZS5zZWxlY3RlZEluZGV4fXJldHVybiBhLnNlbGVjdGVkPT09dHJ1ZX0sImVtcHR5IjpmdW5jdGlvbihhKXtmb3IoYT1hLmZpcnN0Q2hpbGQ7YTthPWEubmV4dFNpYmxpbmcpe2lmKGEubm9kZVR5cGU8Nil7cmV0dXJuIGZhbHNlfX1yZXR1cm4gdHJ1ZX0sInBhcmVudCI6ZnVuY3Rpb24oYSl7cmV0dXJuIWwucHNldWRvc1siZW1wdHkiXShhKX0sImhlYWRlciI6ZnVuY3Rpb24oYSl7cmV0dXJuIFkzLnRlc3QoYS5ub2RlTmFtZSl9LCJpbnB1dCI6ZnVuY3Rpb24oYSl7cmV0dXJuIFgzLnRlc3QoYS5ub2RlTmFtZSl9LCJidXR0b24iOmZ1bmN0aW9uKGEpe3ZhciBiPWEubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm4gYj09PSJpbnB1dCImJmEudHlwZT09PSJidXR0b24ifHxiPT09ImJ1dHRvbiJ9LCJ0ZXh0IjpmdW5jdGlvbihhKXt2YXIgYjtyZXR1cm4gYS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09ImlucHV0IiYmYS50eXBlPT09InRleHQiJiYoKGI9YS5nZXRBdHRyaWJ1dGUoInR5cGUiKSk9PW51bGx8fGIudG9Mb3dlckNhc2UoKT09PSJ0ZXh0Iil9LCJmaXJzdCI6ajQoZnVuY3Rpb24oKXtyZXR1cm5bMF19KSwibGFzdCI6ajQoZnVuY3Rpb24obSxhKXtyZXR1cm5bYS0xXX0pLCJlcSI6ajQoZnVuY3Rpb24obSxhLGIpe3JldHVybltiPDA/YithOmJdfSksImV2ZW4iOmo0KGZ1bmN0aW9uKG0sYSl7dmFyIGk9MDtmb3IoO2k8YTtpKz0yKXttLnB1c2goaSl9cmV0dXJuIG19KSwib2RkIjpqNChmdW5jdGlvbihtLGEpe3ZhciBpPTE7Zm9yKDtpPGE7aSs9Mil7bS5wdXNoKGkpfXJldHVybiBtfSksImx0IjpqNChmdW5jdGlvbihtLGEsYil7dmFyIGk9YjwwP2IrYTpiO2Zvcig7LS1pPj0wOyl7bS5wdXNoKGkpfXJldHVybiBtfSksImd0IjpqNChmdW5jdGlvbihtLGEsYil7dmFyIGk9YjwwP2IrYTpiO2Zvcig7KytpPGE7KXttLnB1c2goaSl9cmV0dXJuIG19KX19O2wucHNldWRvc1sibnRoIl09bC5wc2V1ZG9zWyJlcSJdO2ZvcihpIGlue3JhZGlvOnRydWUsY2hlY2tib3g6dHJ1ZSxmaWxlOnRydWUscGFzc3dvcmQ6dHJ1ZSxpbWFnZTp0cnVlfSl7bC5wc2V1ZG9zW2ldPWg0KGkpfWZvcihpIGlue3N1Ym1pdDp0cnVlLHJlc2V0OnRydWV9KXtsLnBzZXVkb3NbaV09aTQoaSl9ZnVuY3Rpb24gbDQoKXt9bDQucHJvdG90eXBlPWwuZmlsdGVycz1sLnBzZXVkb3M7bC5zZXRGaWx0ZXJzPW5ldyBsNCgpO3Q9Uy50b2tlbml6ZT1mdW5jdGlvbihhLGIpe3ZhciBtLGosXyx1NCx2NCx3NCx4NCx5ND1FM1thKyIgIl07aWYoeTQpe3JldHVybiBiPzA6eTQuc2xpY2UoMCl9djQ9YTt3ND1bXTt4ND1sLnByZUZpbHRlcjt3aGlsZSh2NCl7aWYoIW18fChqPVIzLmV4ZWModjQpKSl7aWYoail7djQ9djQuc2xpY2UoalswXS5sZW5ndGgpfHx2NH13NC5wdXNoKChfPVtdKSl9bT1mYWxzZTtpZigoaj1TMy5leGVjKHY0KSkpe209ai5zaGlmdCgpO18ucHVzaCh7dmFsdWU6bSx0eXBlOmpbMF0ucmVwbGFjZSh6LCIgIil9KTt2ND12NC5zbGljZShtLmxlbmd0aCl9Zm9yKHU0IGluIGwuZmlsdGVyKXtpZigoaj1XM1t1NF0uZXhlYyh2NCkpJiYoIXg0W3U0XXx8KGo9eDRbdTRdKGopKSkpe209ai5zaGlmdCgpO18ucHVzaCh7dmFsdWU6bSx0eXBlOnU0LG1hdGNoZXM6an0pO3Y0PXY0LnNsaWNlKG0ubGVuZ3RoKX19aWYoIW0pe2JyZWFrfX1yZXR1cm4gYj92NC5sZW5ndGg6djQ/Uy5lcnJvcihhKTpFMyhhLHc0KS5zbGljZSgwKX07ZnVuY3Rpb24gbTQoYSl7dmFyIGk9MCxiPWEubGVuZ3RoLGo9IiI7Zm9yKDtpPGI7aSsrKXtqKz1hW2ldLnZhbHVlfXJldHVybiBqfWZ1bmN0aW9uIG40KG0sYSxiKXt2YXIgaj1hLmRpcixfPWImJmo9PT0icGFyZW50Tm9kZSIsdTQ9QzMrKztyZXR1cm4gYS5maXJzdD9mdW5jdGlvbih2NCx3NCx4NCl7d2hpbGUoKHY0PXY0W2pdKSl7aWYodjQubm9kZVR5cGU9PT0xfHxfKXtyZXR1cm4gbSh2NCx3NCx4NCl9fX06ZnVuY3Rpb24odjQsdzQseDQpe3ZhciB5NCx6NCxBND1bQjMsdTRdO2lmKHg0KXt3aGlsZSgodjQ9djRbal0pKXtpZih2NC5ub2RlVHlwZT09PTF8fF8pe2lmKG0odjQsdzQseDQpKXtyZXR1cm4gdHJ1ZX19fX1lbHNle3doaWxlKCh2ND12NFtqXSkpe2lmKHY0Lm5vZGVUeXBlPT09MXx8Xyl7ejQ9djRbejNdfHwodjRbejNdPXt9KTtpZigoeTQ9ejRbal0pJiZ5NFswXT09PUIzJiZ5NFsxXT09PXU0KXtyZXR1cm4oQTRbMl09eTRbMl0pfWVsc2V7ejRbal09QTQ7aWYoKEE0WzJdPW0odjQsdzQseDQpKSl7cmV0dXJuIHRydWV9fX19fX19ZnVuY3Rpb24gbzQobSl7cmV0dXJuIG0ubGVuZ3RoPjE/ZnVuY3Rpb24oYSxiLGope3ZhciBpPW0ubGVuZ3RoO3doaWxlKGktLSl7aWYoIW1baV0oYSxiLGopKXtyZXR1cm4gZmFsc2V9fXJldHVybiB0cnVlfTptWzBdfWZ1bmN0aW9uIHA0KGEsYixqKXt2YXIgaT0wLG09Yi5sZW5ndGg7Zm9yKDtpPG07aSsrKXtTKGEsYltpXSxqKX1yZXR1cm4gan1mdW5jdGlvbiBxNChhLG0sYixqLF8pe3ZhciB1NCx2ND1bXSxpPTAsdzQ9YS5sZW5ndGgseDQ9bSE9bnVsbDtmb3IoO2k8dzQ7aSsrKXtpZigodTQ9YVtpXSkpe2lmKCFifHxiKHU0LGosXykpe3Y0LnB1c2godTQpO2lmKHg0KXttLnB1c2goaSl9fX19cmV0dXJuIHY0fWZ1bmN0aW9uIHI0KGEsYixtLGosXyx1NCl7aWYoaiYmIWpbejNdKXtqPXI0KGopfWlmKF8mJiFfW3ozXSl7Xz1yNChfLHU0KX1yZXR1cm4gZDQoZnVuY3Rpb24odjQsdzQseDQseTQpe3ZhciB6NCxpLEE0LEI0PVtdLEM0PVtdLEQ0PXc0Lmxlbmd0aCxFND12NHx8cDQoYnx8IioiLHg0Lm5vZGVUeXBlP1t4NF06eDQsW10pLEY0PWEmJih2NHx8IWIpP3E0KEU0LEI0LGEseDQseTQpOkU0LEc0PW0/X3x8KHY0P2E6RDR8fGopP1tdOnc0OkY0O2lmKG0pe20oRjQsRzQseDQseTQpfWlmKGope3o0PXE0KEc0LEM0KTtqKHo0LFtdLHg0LHk0KTtpPXo0Lmxlbmd0aDt3aGlsZShpLS0pe2lmKChBND16NFtpXSkpe0c0W0M0W2ldXT0hKEY0W0M0W2ldXT1BNCl9fX1pZih2NCl7aWYoX3x8YSl7aWYoXyl7ejQ9W107aT1HNC5sZW5ndGg7d2hpbGUoaS0tKXtpZigoQTQ9RzRbaV0pKXt6NC5wdXNoKChGNFtpXT1BNCkpfX1fKG51bGwsKEc0PVtdKSx6NCx5NCl9aT1HNC5sZW5ndGg7d2hpbGUoaS0tKXtpZigoQTQ9RzRbaV0pJiYoejQ9Xz9rLmNhbGwodjQsQTQpOkI0W2ldKT4tMSl7djRbejRdPSEodzRbejRdPUE0KX19fX1lbHNle0c0PXE0KEc0PT09dzQ/RzQuc3BsaWNlKEQ0LEc0Lmxlbmd0aCk6RzQpO2lmKF8pe18obnVsbCx3NCxHNCx5NCl9ZWxzZXtoLmFwcGx5KHc0LEc0KX19fSl9ZnVuY3Rpb24gczQoYSl7dmFyIGIsbSxqLF89YS5sZW5ndGgsdTQ9bC5yZWxhdGl2ZVthWzBdLnR5cGVdLHY0PXU0fHxsLnJlbGF0aXZlWyIgIl0saT11ND8xOjAsdzQ9bjQoZnVuY3Rpb24oejQpe3JldHVybiB6ND09PWJ9LHY0LHRydWUpLHg0PW40KGZ1bmN0aW9uKHo0KXtyZXR1cm4gay5jYWxsKGIsejQpPi0xfSx2NCx0cnVlKSx5ND1bZnVuY3Rpb24oejQsQTQsQjQpe3JldHVybighdTQmJihCNHx8QTQhPT12KSl8fCgoYj1BNCkubm9kZVR5cGU/dzQoejQsQTQsQjQpOng0KHo0LEE0LEI0KSl9XTtmb3IoO2k8XztpKyspe2lmKChtPWwucmVsYXRpdmVbYVtpXS50eXBlXSkpe3k0PVtuNChvNCh5NCksbSldfWVsc2V7bT1sLmZpbHRlclthW2ldLnR5cGVdLmFwcGx5KG51bGwsYVtpXS5tYXRjaGVzKTtpZihtW3ozXSl7aj0rK2k7Zm9yKDtqPF87aisrKXtpZihsLnJlbGF0aXZlW2Fbal0udHlwZV0pe2JyZWFrfX1yZXR1cm4gcjQoaT4xJiZvNCh5NCksaT4xJiZtNChhLnNsaWNlKDAsaS0xKS5jb25jYXQoe3ZhbHVlOmFbaS0yXS50eXBlPT09IiAiPyIqIjoiIn0pKS5yZXBsYWNlKHosIiQxIiksbSxpPGomJnM0KGEuc2xpY2UoaSxqKSksajxfJiZzNCgoYT1hLnNsaWNlKGopKSksajxfJiZtNChhKSl9eTQucHVzaChtKX19cmV0dXJuIG80KHk0KX1mdW5jdGlvbiB0NChhLGIpe3ZhciBtPWIubGVuZ3RoPjAsXz1hLmxlbmd0aD4wLHU0PWZ1bmN0aW9uKHY0LHc0LHg0LHk0LHo0KXt2YXIgQTQsaixCNCxDND0wLGk9IjAiLEQ0PXY0JiZbXSxFND1bXSxGND12LEc0PXY0fHxfJiZsLmZpbmRbIlRBRyJdKCIqIix6NCksSDQ9KEIzKz1GND09bnVsbD8xOk1hdGgucmFuZG9tKCl8fDAuMSksSTQ9RzQubGVuZ3RoO2lmKHo0KXt2PXc0IT09SiYmdzR9Zm9yKDtpIT09STQmJihBND1HNFtpXSkhPW51bGw7aSsrKXtpZihfJiZBNCl7aj0wO3doaWxlKChCND1hW2orK10pKXtpZihCNChBNCx3NCx4NCkpe3k0LnB1c2goQTQpO2JyZWFrfX1pZih6NCl7QjM9SDR9fWlmKG0pe2lmKChBND0hQjQmJkE0KSl7QzQtLX1pZih2NCl7RDQucHVzaChBNCl9fX1DNCs9aTtpZihtJiZpIT09QzQpe2o9MDt3aGlsZSgoQjQ9YltqKytdKSl7QjQoRDQsRTQsdzQseDQpfWlmKHY0KXtpZihDND4wKXt3aGlsZShpLS0pe2lmKCEoRDRbaV18fEU0W2ldKSl7RTRbaV09SjMuY2FsbCh5NCl9fX1FND1xNChFNCl9aC5hcHBseSh5NCxFNCk7aWYoejQmJiF2NCYmRTQubGVuZ3RoPjAmJihDNCtiLmxlbmd0aCk+MSl7Uy51bmlxdWVTb3J0KHk0KX19aWYoejQpe0IzPUg0O3Y9RjR9cmV0dXJuIEQ0fTtyZXR1cm4gbT9kNCh1NCk6dTR9cj1TLmNvbXBpbGU9ZnVuY3Rpb24oYSxtKXt2YXIgaSxiPVtdLGo9W10sXz1GM1thKyIgIl07aWYoIV8pe2lmKCFtKXttPXQoYSl9aT1tLmxlbmd0aDt3aGlsZShpLS0pe189czQobVtpXSk7aWYoX1t6M10pe2IucHVzaChfKX1lbHNle2oucHVzaChfKX19Xz1GMyhhLHQ0KGosYikpO18uc2VsZWN0b3I9YX1yZXR1cm4gX307cz1TLnNlbGVjdD1mdW5jdGlvbihhLGIsaixtKXt2YXIgaSxfLHU0LHY0LHc0LHg0PXR5cGVvZiBhPT09ImZ1bmN0aW9uIiYmYSx5ND0hbSYmdCgoYT14NC5zZWxlY3Rvcnx8YSkpO2o9anx8W107aWYoeTQubGVuZ3RoPT09MSl7Xz15NFswXT15NFswXS5zbGljZSgwKTtpZihfLmxlbmd0aD4yJiYodTQ9X1swXSkudHlwZT09PSJJRCImJnguZ2V0QnlJZCYmYi5ub2RlVHlwZT09PTkmJnUzJiZsLnJlbGF0aXZlW19bMV0udHlwZV0pe2I9KGwuZmluZFsiSUQiXSh1NC5tYXRjaGVzWzBdLnJlcGxhY2UoYTQsYjQpLGIpfHxbXSlbMF07aWYoIWIpe3JldHVybiBqfWVsc2UgaWYoeDQpe2I9Yi5wYXJlbnROb2RlfWE9YS5zbGljZShfLnNoaWZ0KCkudmFsdWUubGVuZ3RoKX1pPVczWyJuZWVkc0NvbnRleHQiXS50ZXN0KGEpPzA6Xy5sZW5ndGg7d2hpbGUoaS0tKXt1ND1fW2ldO2lmKGwucmVsYXRpdmVbKHY0PXU0LnR5cGUpXSl7YnJlYWt9aWYoKHc0PWwuZmluZFt2NF0pKXtpZigobT13NCh1NC5tYXRjaGVzWzBdLnJlcGxhY2UoYTQsYjQpLCQzLnRlc3QoX1swXS50eXBlKSYmazQoYi5wYXJlbnROb2RlKXx8YikpKXtfLnNwbGljZShpLDEpO2E9bS5sZW5ndGgmJm00KF8pO2lmKCFhKXtoLmFwcGx5KGosbSk7cmV0dXJuIGp9YnJlYWt9fX19KHg0fHxyKGEseTQpKShtLGIsIXUzLGosJDMudGVzdChhKSYmazQoYi5wYXJlbnROb2RlKXx8Yik7cmV0dXJuIGp9O3guc29ydFN0YWJsZT16My5zcGxpdCgiIikuc29ydChHMykuam9pbigiIik9PT16Mzt4LmRldGVjdER1cGxpY2F0ZXM9ISFzMzt0MygpO3guc29ydERldGFjaGVkPWU0KGZ1bmN0aW9uKGEpe3JldHVybiBhLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKEouY3JlYXRlRWxlbWVudCgiZGl2IikpJjF9KTtpZighZTQoZnVuY3Rpb24oYSl7YS5pbm5lckhUTUw9IjxhIGhyZWY9JyMnPjwvYT4iO3JldHVybiBhLmZpcnN0Q2hpbGQuZ2V0QXR0cmlidXRlKCJocmVmIik9PT0iIyJ9KSl7ZjQoInR5cGV8aHJlZnxoZWlnaHR8d2lkdGgiLGZ1bmN0aW9uKGEsYixwKXtpZighcCl7cmV0dXJuIGEuZ2V0QXR0cmlidXRlKGIsYi50b0xvd2VyQ2FzZSgpPT09InR5cGUiPzE6Mil9fSl9aWYoIXguYXR0cmlidXRlc3x8IWU0KGZ1bmN0aW9uKGEpe2EuaW5uZXJIVE1MPSI8aW5wdXQvPiI7YS5maXJzdENoaWxkLnNldEF0dHJpYnV0ZSgidmFsdWUiLCIiKTtyZXR1cm4gYS5maXJzdENoaWxkLmdldEF0dHJpYnV0ZSgidmFsdWUiKT09PSIifSkpe2Y0KCJ2YWx1ZSIsZnVuY3Rpb24oYSxiLHApe2lmKCFwJiZhLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT0iaW5wdXQiKXtyZXR1cm4gYS5kZWZhdWx0VmFsdWV9fSl9aWYoIWU0KGZ1bmN0aW9uKGEpe3JldHVybiBhLmdldEF0dHJpYnV0ZSgiZGlzYWJsZWQiKT09bnVsbH0pKXtmNChMMyxmdW5jdGlvbihhLGIscCl7dmFyIGo7aWYoIXApe3JldHVybiBhW2JdPT09dHJ1ZT9iLnRvTG93ZXJDYXNlKCk6KGo9YS5nZXRBdHRyaWJ1dGVOb2RlKGIpKSYmai5zcGVjaWZpZWQ/ai52YWx1ZTpudWxsfX0pfXJldHVybiBTfSkodyk7US5maW5kPVM7US5leHByPVMuc2VsZWN0b3JzO1EuZXhwclsiOiJdPVEuZXhwci5wc2V1ZG9zO1EudW5pcXVlPVMudW5pcXVlU29ydDtRLnRleHQ9Uy5nZXRUZXh0O1EuaXNYTUxEb2M9Uy5pc1hNTDtRLmNvbnRhaW5zPVMuY29udGFpbnM7dmFyIEU9US5leHByLm1hdGNoLm5lZWRzQ29udGV4dDt2YXIgRj0oL148KFx3KylccypcLz8+KD86PFwvXDE+fCkkLyk7dmFyIEc9L14uW146I1xbXC4sXSokLztmdW5jdGlvbiBIKGEsYixuKXtpZihRLmlzRnVuY3Rpb24oYikpe3JldHVybiBRLmdyZXAoYSxmdW5jdGlvbihqLGkpe3JldHVybiEhYi5jYWxsKGosaSxqKSE9PW59KX1pZihiLm5vZGVUeXBlKXtyZXR1cm4gUS5ncmVwKGEsZnVuY3Rpb24oail7cmV0dXJuKGo9PT1iKSE9PW59KX1pZih0eXBlb2YgYj09PSJzdHJpbmciKXtpZihHLnRlc3QoYikpe3JldHVybiBRLmZpbHRlcihiLGEsbil9Yj1RLmZpbHRlcihiLGEpfXJldHVybiBRLmdyZXAoYSxmdW5jdGlvbihqKXtyZXR1cm4oUS5pbkFycmF5KGosYik+PTApIT09bn0pfVEuZmlsdGVyPWZ1bmN0aW9uKGEsYixuKXt2YXIgaj1iWzBdO2lmKG4pe2E9Ijpub3QoIithKyIpIn1yZXR1cm4gYi5sZW5ndGg9PT0xJiZqLm5vZGVUeXBlPT09MT9RLmZpbmQubWF0Y2hlc1NlbGVjdG9yKGosYSk/W2pdOltdOlEuZmluZC5tYXRjaGVzKGEsUS5ncmVwKGIsZnVuY3Rpb24oail7cmV0dXJuIGoubm9kZVR5cGU9PT0xfSkpfTtRLmZuLmV4dGVuZCh7ZmluZDpmdW5jdGlvbihzKXt2YXIgaSxyPVtdLGE9dGhpcyxsPWEubGVuZ3RoO2lmKHR5cGVvZiBzIT09InN0cmluZyIpe3JldHVybiB0aGlzLnB1c2hTdGFjayhRKHMpLmZpbHRlcihmdW5jdGlvbigpe2ZvcihpPTA7aTxsO2krKyl7aWYoUS5jb250YWlucyhhW2ldLHRoaXMpKXtyZXR1cm4gdHJ1ZX19fSkpfWZvcihpPTA7aTxsO2krKyl7US5maW5kKHMsYVtpXSxyKX1yPXRoaXMucHVzaFN0YWNrKGw+MT9RLnVuaXF1ZShyKTpyKTtyLnNlbGVjdG9yPXRoaXMuc2VsZWN0b3I/dGhpcy5zZWxlY3RvcisiICIrczpzO3JldHVybiByfSxmaWx0ZXI6ZnVuY3Rpb24ocyl7cmV0dXJuIHRoaXMucHVzaFN0YWNrKEgodGhpcyxzfHxbXSxmYWxzZSkpfSxub3Q6ZnVuY3Rpb24ocyl7cmV0dXJuIHRoaXMucHVzaFN0YWNrKEgodGhpcyxzfHxbXSx0cnVlKSl9LGlzOmZ1bmN0aW9uKHMpe3JldHVybiEhSCh0aGlzLHR5cGVvZiBzPT09InN0cmluZyImJkUudGVzdChzKT9RKHMpOnN8fFtdLGZhbHNlKS5sZW5ndGh9fSk7dmFyIEksSj13LmRvY3VtZW50LEs9L14oPzpccyooPFtcd1xXXSs+KVtePl0qfCMoW1x3LV0qKSkkLyxMPVEuZm4uaW5pdD1mdW5jdGlvbihzLGEpe3ZhciBtLGI7aWYoIXMpe3JldHVybiB0aGlzfWlmKHR5cGVvZiBzPT09InN0cmluZyIpe2lmKHMuY2hhckF0KDApPT09IjwiJiZzLmNoYXJBdChzLmxlbmd0aC0xKT09PSI+IiYmcy5sZW5ndGg+PTMpe209W251bGwscyxudWxsXX1lbHNle209Sy5leGVjKHMpfWlmKG0mJihtWzFdfHwhYSkpe2lmKG1bMV0pe2E9YSBpbnN0YW5jZW9mIFE/YVswXTphO1EubWVyZ2UodGhpcyxRLnBhcnNlSFRNTChtWzFdLGEmJmEubm9kZVR5cGU/YS5vd25lckRvY3VtZW50fHxhOkosdHJ1ZSkpO2lmKEYudGVzdChtWzFdKSYmUS5pc1BsYWluT2JqZWN0KGEpKXtmb3IobSBpbiBhKXtpZihRLmlzRnVuY3Rpb24odGhpc1ttXSkpe3RoaXNbbV0oYVttXSl9ZWxzZXt0aGlzLmF0dHIobSxhW21dKX19fXJldHVybiB0aGlzfWVsc2V7Yj1KLmdldEVsZW1lbnRCeUlkKG1bMl0pO2lmKGImJmIucGFyZW50Tm9kZSl7aWYoYi5pZCE9PW1bMl0pe3JldHVybiBJLmZpbmQocyl9dGhpcy5sZW5ndGg9MTt0aGlzWzBdPWJ9dGhpcy5jb250ZXh0PUo7dGhpcy5zZWxlY3Rvcj1zO3JldHVybiB0aGlzfX1lbHNlIGlmKCFhfHxhLmpxdWVyeSl7cmV0dXJuKGF8fEkpLmZpbmQocyl9ZWxzZXtyZXR1cm4gdGhpcy5jb25zdHJ1Y3RvcihhKS5maW5kKHMpfX1lbHNlIGlmKHMubm9kZVR5cGUpe3RoaXMuY29udGV4dD10aGlzWzBdPXM7dGhpcy5sZW5ndGg9MTtyZXR1cm4gdGhpc31lbHNlIGlmKFEuaXNGdW5jdGlvbihzKSl7cmV0dXJuIHR5cGVvZiBJLnJlYWR5IT09InVuZGVmaW5lZCI/SS5yZWFkeShzKTpzKFEpfWlmKHMuc2VsZWN0b3IhPT11bmRlZmluZWQpe3RoaXMuc2VsZWN0b3I9cy5zZWxlY3Rvcjt0aGlzLmNvbnRleHQ9cy5jb250ZXh0fXJldHVybiBRLm1ha2VBcnJheShzLHRoaXMpfTtMLnByb3RvdHlwZT1RLmZuO0k9UShKKTt2YXIgTT0vXig/OnBhcmVudHN8cHJldig/OlVudGlsfEFsbCkpLyxOPXtjaGlsZHJlbjp0cnVlLGNvbnRlbnRzOnRydWUsbmV4dDp0cnVlLHByZXY6dHJ1ZX07US5leHRlbmQoe2RpcjpmdW5jdGlvbihhLGIsail7dmFyIG09W10sbD1hW2JdO3doaWxlKGwmJmwubm9kZVR5cGUhPT05JiYoaj09PXVuZGVmaW5lZHx8bC5ub2RlVHlwZSE9PTF8fCFRKGwpLmlzKGopKSl7aWYobC5ub2RlVHlwZT09PTEpe20ucHVzaChsKX1sPWxbYl19cmV0dXJuIG19LHNpYmxpbmc6ZnVuY3Rpb24obixhKXt2YXIgcj1bXTtmb3IoO247bj1uLm5leHRTaWJsaW5nKXtpZihuLm5vZGVUeXBlPT09MSYmbiE9PWEpe3IucHVzaChuKX19cmV0dXJuIHJ9fSk7US5mbi5leHRlbmQoe2hhczpmdW5jdGlvbih0KXt2YXIgaSxhPVEodCx0aGlzKSxsPWEubGVuZ3RoO3JldHVybiB0aGlzLmZpbHRlcihmdW5jdGlvbigpe2ZvcihpPTA7aTxsO2krKyl7aWYoUS5jb250YWlucyh0aGlzLGFbaV0pKXtyZXR1cm4gdHJ1ZX19fSl9LGNsb3Nlc3Q6ZnVuY3Rpb24ocyxhKXt2YXIgYixpPTAsbD10aGlzLmxlbmd0aCxtPVtdLHA9RS50ZXN0KHMpfHx0eXBlb2YgcyE9PSJzdHJpbmciP1EocyxhfHx0aGlzLmNvbnRleHQpOjA7Zm9yKDtpPGw7aSsrKXtmb3IoYj10aGlzW2ldO2ImJmIhPT1hO2I9Yi5wYXJlbnROb2RlKXtpZihiLm5vZGVUeXBlPDExJiYocD9wLmluZGV4KGIpPi0xOmIubm9kZVR5cGU9PT0xJiZRLmZpbmQubWF0Y2hlc1NlbGVjdG9yKGIscykpKXttLnB1c2goYik7YnJlYWt9fX1yZXR1cm4gdGhpcy5wdXNoU3RhY2sobS5sZW5ndGg+MT9RLnVuaXF1ZShtKTptKX0saW5kZXg6ZnVuY3Rpb24oYSl7aWYoIWEpe3JldHVybih0aGlzWzBdJiZ0aGlzWzBdLnBhcmVudE5vZGUpP3RoaXMuZmlyc3QoKS5wcmV2QWxsKCkubGVuZ3RoOi0xfWlmKHR5cGVvZiBhPT09InN0cmluZyIpe3JldHVybiBRLmluQXJyYXkodGhpc1swXSxRKGEpKX1yZXR1cm4gUS5pbkFycmF5KGEuanF1ZXJ5P2FbMF06YSx0aGlzKX0sYWRkOmZ1bmN0aW9uKHMsYSl7cmV0dXJuIHRoaXMucHVzaFN0YWNrKFEudW5pcXVlKFEubWVyZ2UodGhpcy5nZXQoKSxRKHMsYSkpKSl9LGFkZEJhY2s6ZnVuY3Rpb24ocyl7cmV0dXJuIHRoaXMuYWRkKHM9PW51bGw/dGhpcy5wcmV2T2JqZWN0OnRoaXMucHJldk9iamVjdC5maWx0ZXIocykpfX0pO2Z1bmN0aW9uIE8oYSxiKXtkb3thPWFbYl19d2hpbGUoYSYmYS5ub2RlVHlwZSE9PTEpO3JldHVybiBhfVEuZWFjaCh7cGFyZW50OmZ1bmN0aW9uKGEpe3ZhciBwPWEucGFyZW50Tm9kZTtyZXR1cm4gcCYmcC5ub2RlVHlwZSE9PTExP3A6bnVsbH0scGFyZW50czpmdW5jdGlvbihhKXtyZXR1cm4gUS5kaXIoYSwicGFyZW50Tm9kZSIpfSxwYXJlbnRzVW50aWw6ZnVuY3Rpb24oYSxpLGIpe3JldHVybiBRLmRpcihhLCJwYXJlbnROb2RlIixiKX0sbmV4dDpmdW5jdGlvbihhKXtyZXR1cm4gTyhhLCJuZXh0U2libGluZyIpfSxwcmV2OmZ1bmN0aW9uKGEpe3JldHVybiBPKGEsInByZXZpb3VzU2libGluZyIpfSxuZXh0QWxsOmZ1bmN0aW9uKGEpe3JldHVybiBRLmRpcihhLCJuZXh0U2libGluZyIpfSxwcmV2QWxsOmZ1bmN0aW9uKGEpe3JldHVybiBRLmRpcihhLCJwcmV2aW91c1NpYmxpbmciKX0sbmV4dFVudGlsOmZ1bmN0aW9uKGEsaSxiKXtyZXR1cm4gUS5kaXIoYSwibmV4dFNpYmxpbmciLGIpfSxwcmV2VW50aWw6ZnVuY3Rpb24oYSxpLGIpe3JldHVybiBRLmRpcihhLCJwcmV2aW91c1NpYmxpbmciLGIpfSxzaWJsaW5nczpmdW5jdGlvbihhKXtyZXR1cm4gUS5zaWJsaW5nKChhLnBhcmVudE5vZGV8fHt9KS5maXJzdENoaWxkLGEpfSxjaGlsZHJlbjpmdW5jdGlvbihhKXtyZXR1cm4gUS5zaWJsaW5nKGEuZmlyc3RDaGlsZCl9LGNvbnRlbnRzOmZ1bmN0aW9uKGEpe3JldHVybiBRLm5vZGVOYW1lKGEsImlmcmFtZSIpP2EuY29udGVudERvY3VtZW50fHxhLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQ6US5tZXJnZShbXSxhLmNoaWxkTm9kZXMpfX0sZnVuY3Rpb24obixhKXtRLmZuW25dPWZ1bmN0aW9uKGIscyl7dmFyIHI9US5tYXAodGhpcyxhLGIpO2lmKG4uc2xpY2UoLTUpIT09IlVudGlsIil7cz1ifWlmKHMmJnR5cGVvZiBzPT09InN0cmluZyIpe3I9US5maWx0ZXIocyxyKX1pZih0aGlzLmxlbmd0aD4xKXtpZighTltuXSl7cj1RLnVuaXF1ZShyKX1pZihNLnRlc3Qobikpe3I9ci5yZXZlcnNlKCl9fXJldHVybiB0aGlzLnB1c2hTdGFjayhyKX19KTt2YXIgUD0oL1xTKy9nKTt2YXIgUj17fTtmdW5jdGlvbiBUKGEpe3ZhciBiPVJbYV09e307US5lYWNoKGEubWF0Y2goUCl8fFtdLGZ1bmN0aW9uKF8sail7YltqXT10cnVlfSk7cmV0dXJuIGJ9US5DYWxsYmFja3M9ZnVuY3Rpb24oYSl7YT10eXBlb2YgYT09PSJzdHJpbmciPyhSW2FdfHxUKGEpKTpRLmV4dGVuZCh7fSxhKTt2YXIgYixtLGosbCxuLHAscj1bXSxzPSFhLm9uY2UmJltdLHQ9ZnVuY3Rpb24oXyl7bT1hLm1lbW9yeSYmXztqPXRydWU7bj1wfHwwO3A9MDtsPXIubGVuZ3RoO2I9dHJ1ZTtmb3IoO3ImJm48bDtuKyspe2lmKHJbbl0uYXBwbHkoX1swXSxfWzFdKT09PWZhbHNlJiZhLnN0b3BPbkZhbHNlKXttPWZhbHNlO2JyZWFrfX1iPWZhbHNlO2lmKHIpe2lmKHMpe2lmKHMubGVuZ3RoKXt0KHMuc2hpZnQoKSl9fWVsc2UgaWYobSl7cj1bXX1lbHNle3YuZGlzYWJsZSgpfX19LHY9e2FkZDpmdW5jdGlvbigpe2lmKHIpe3ZhciByMz1yLmxlbmd0aDsoZnVuY3Rpb24gYWRkKHMzKXtRLmVhY2goczMsZnVuY3Rpb24oXyx0Myl7dmFyIHUzPVEudHlwZSh0Myk7aWYodTM9PT0iZnVuY3Rpb24iKXtpZighYS51bmlxdWV8fCF2Lmhhcyh0Mykpe3IucHVzaCh0Myl9fWVsc2UgaWYodDMmJnQzLmxlbmd0aCYmdTMhPT0ic3RyaW5nIil7YWRkKHQzKX19KX0pKGFyZ3VtZW50cyk7aWYoYil7bD1yLmxlbmd0aH1lbHNlIGlmKG0pe3A9cjM7dChtKX19cmV0dXJuIHRoaXN9LHJlbW92ZTpmdW5jdGlvbigpe2lmKHIpe1EuZWFjaChhcmd1bWVudHMsZnVuY3Rpb24oXyxyMyl7dmFyIHMzO3doaWxlKChzMz1RLmluQXJyYXkocjMscixzMykpPi0xKXtyLnNwbGljZShzMywxKTtpZihiKXtpZihzMzw9bCl7bC0tfWlmKHMzPD1uKXtuLS19fX19KX1yZXR1cm4gdGhpc30saGFzOmZ1bmN0aW9uKF8pe3JldHVybiBfP1EuaW5BcnJheShfLHIpPi0xOiEhKHImJnIubGVuZ3RoKX0sZW1wdHk6ZnVuY3Rpb24oKXtyPVtdO2w9MDtyZXR1cm4gdGhpc30sZGlzYWJsZTpmdW5jdGlvbigpe3I9cz1tPXVuZGVmaW5lZDtyZXR1cm4gdGhpc30sZGlzYWJsZWQ6ZnVuY3Rpb24oKXtyZXR1cm4hcn0sbG9jazpmdW5jdGlvbigpe3M9dW5kZWZpbmVkO2lmKCFtKXt2LmRpc2FibGUoKX1yZXR1cm4gdGhpc30sbG9ja2VkOmZ1bmN0aW9uKCl7cmV0dXJuIXN9LGZpcmVXaXRoOmZ1bmN0aW9uKF8scjMpe2lmKHImJighanx8cykpe3IzPXIzfHxbXTtyMz1bXyxyMy5zbGljZT9yMy5zbGljZSgpOnIzXTtpZihiKXtzLnB1c2gocjMpfWVsc2V7dChyMyl9fXJldHVybiB0aGlzfSxmaXJlOmZ1bmN0aW9uKCl7di5maXJlV2l0aCh0aGlzLGFyZ3VtZW50cyk7cmV0dXJuIHRoaXN9LGZpcmVkOmZ1bmN0aW9uKCl7cmV0dXJuISFqfX07cmV0dXJuIHZ9O1EuZXh0ZW5kKHtEZWZlcnJlZDpmdW5jdGlvbihhKXt2YXIgdD1bWyJyZXNvbHZlIiwiZG9uZSIsUS5DYWxsYmFja3MoIm9uY2UgbWVtb3J5IiksInJlc29sdmVkIl0sWyJyZWplY3QiLCJmYWlsIixRLkNhbGxiYWNrcygib25jZSBtZW1vcnkiKSwicmVqZWN0ZWQiXSxbIm5vdGlmeSIsInByb2dyZXNzIixRLkNhbGxiYWNrcygibWVtb3J5IildXSxzPSJwZW5kaW5nIixwPXtzdGF0ZTpmdW5jdGlvbigpe3JldHVybiBzfSxhbHdheXM6ZnVuY3Rpb24oKXtiLmRvbmUoYXJndW1lbnRzKS5mYWlsKGFyZ3VtZW50cyk7cmV0dXJuIHRoaXN9LHRoZW46ZnVuY3Rpb24oKXt2YXIgaj1hcmd1bWVudHM7cmV0dXJuIFEuRGVmZXJyZWQoZnVuY3Rpb24obil7US5lYWNoKHQsZnVuY3Rpb24oaSxsKXt2YXIgbT1RLmlzRnVuY3Rpb24oaltpXSkmJmpbaV07YltsWzFdXShmdW5jdGlvbigpe3ZhciByPW0mJm0uYXBwbHkodGhpcyxhcmd1bWVudHMpO2lmKHImJlEuaXNGdW5jdGlvbihyLnByb21pc2UpKXtyLnByb21pc2UoKS5kb25lKG4ucmVzb2x2ZSkuZmFpbChuLnJlamVjdCkucHJvZ3Jlc3Mobi5ub3RpZnkpfWVsc2V7bltsWzBdKyJXaXRoIl0odGhpcz09PXA/bi5wcm9taXNlKCk6dGhpcyxtP1tyXTphcmd1bWVudHMpfX0pfSk7aj1udWxsfSkucHJvbWlzZSgpfSxwcm9taXNlOmZ1bmN0aW9uKGope3JldHVybiBqIT1udWxsP1EuZXh0ZW5kKGoscCk6cH19LGI9e307cC5waXBlPXAudGhlbjtRLmVhY2godCxmdW5jdGlvbihpLGope3ZhciBsPWpbMl0sbT1qWzNdO3BbalsxXV09bC5hZGQ7aWYobSl7bC5hZGQoZnVuY3Rpb24oKXtzPW19LHRbaV4xXVsyXS5kaXNhYmxlLHRbMl1bMl0ubG9jayl9YltqWzBdXT1mdW5jdGlvbigpe2JbalswXSsiV2l0aCJdKHRoaXM9PT1iP3A6dGhpcyxhcmd1bWVudHMpO3JldHVybiB0aGlzfTtiW2pbMF0rIldpdGgiXT1sLmZpcmVXaXRofSk7cC5wcm9taXNlKGIpO2lmKGEpe2EuY2FsbChiLGIpfXJldHVybiBifSx3aGVuOmZ1bmN0aW9uKHMpe3ZhciBpPTAscj1mLmNhbGwoYXJndW1lbnRzKSxsPXIubGVuZ3RoLGE9bCE9PTF8fChzJiZRLmlzRnVuY3Rpb24ocy5wcm9taXNlKSk/bDowLGI9YT09PTE/czpRLkRlZmVycmVkKCksaj1mdW5jdGlvbihpLHQsdil7cmV0dXJuIGZ1bmN0aW9uKF8pe3RbaV09dGhpczt2W2ldPWFyZ3VtZW50cy5sZW5ndGg+MT9mLmNhbGwoYXJndW1lbnRzKTpfO2lmKHY9PT1wKXtiLm5vdGlmeVdpdGgodCx2KX1lbHNlIGlmKCEoLS1hKSl7Yi5yZXNvbHZlV2l0aCh0LHYpfX19LHAsbSxuO2lmKGw+MSl7cD1uZXcgQXJyYXkobCk7bT1uZXcgQXJyYXkobCk7bj1uZXcgQXJyYXkobCk7Zm9yKDtpPGw7aSsrKXtpZihyW2ldJiZRLmlzRnVuY3Rpb24ocltpXS5wcm9taXNlKSl7cltpXS5wcm9taXNlKCkuZG9uZShqKGksbixyKSkuZmFpbChiLnJlamVjdCkucHJvZ3Jlc3MoaihpLG0scCkpfWVsc2V7LS1hfX19aWYoIWEpe2IucmVzb2x2ZVdpdGgobixyKX1yZXR1cm4gYi5wcm9taXNlKCl9fSk7dmFyIFU7US5mbi5yZWFkeT1mdW5jdGlvbihhKXtRLnJlYWR5LnByb21pc2UoKS5kb25lKGEpO3JldHVybiB0aGlzfTtRLmV4dGVuZCh7aXNSZWFkeTpmYWxzZSxyZWFkeVdhaXQ6MSxob2xkUmVhZHk6ZnVuY3Rpb24oYSl7aWYoYSl7US5yZWFkeVdhaXQrK31lbHNle1EucmVhZHkodHJ1ZSl9fSxyZWFkeTpmdW5jdGlvbihhKXtpZihhPT09dHJ1ZT8tLVEucmVhZHlXYWl0OlEuaXNSZWFkeSl7cmV0dXJufWlmKCFKLmJvZHkpe3JldHVybiBzZXRUaW1lb3V0KFEucmVhZHkpfVEuaXNSZWFkeT10cnVlO2lmKGEhPT10cnVlJiYtLVEucmVhZHlXYWl0PjApe3JldHVybn1VLnJlc29sdmVXaXRoKEosW1FdKTtpZihRLmZuLnRyaWdnZXJIYW5kbGVyKXtRKEopLnRyaWdnZXJIYW5kbGVyKCJyZWFkeSIpO1EoSikub2ZmKCJyZWFkeSIpfX19KTtmdW5jdGlvbiBWKCl7aWYoSi5hZGRFdmVudExpc3RlbmVyKXtKLnJlbW92ZUV2ZW50TGlzdGVuZXIoIkRPTUNvbnRlbnRMb2FkZWQiLFcsZmFsc2UpO3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigibG9hZCIsVyxmYWxzZSl9ZWxzZXtKLmRldGFjaEV2ZW50KCJvbnJlYWR5c3RhdGVjaGFuZ2UiLFcpO3cuZGV0YWNoRXZlbnQoIm9ubG9hZCIsVyl9fWZ1bmN0aW9uIFcoKXtpZihKLmFkZEV2ZW50TGlzdGVuZXJ8fGV2ZW50LnR5cGU9PT0ibG9hZCJ8fEoucmVhZHlTdGF0ZT09PSJjb21wbGV0ZSIpe1YoKTtRLnJlYWR5KCl9fVEucmVhZHkucHJvbWlzZT1mdW5jdGlvbihhKXtpZighVSl7VT1RLkRlZmVycmVkKCk7aWYoSi5yZWFkeVN0YXRlPT09ImNvbXBsZXRlIil7c2V0VGltZW91dChRLnJlYWR5KX1lbHNlIGlmKEouYWRkRXZlbnRMaXN0ZW5lcil7Si5hZGRFdmVudExpc3RlbmVyKCJET01Db250ZW50TG9hZGVkIixXLGZhbHNlKTt3LmFkZEV2ZW50TGlzdGVuZXIoImxvYWQiLFcsZmFsc2UpfWVsc2V7Si5hdHRhY2hFdmVudCgib25yZWFkeXN0YXRlY2hhbmdlIixXKTt3LmF0dGFjaEV2ZW50KCJvbmxvYWQiLFcpO3ZhciB0PWZhbHNlO3RyeXt0PXcuZnJhbWVFbGVtZW50PT1udWxsJiZKLmRvY3VtZW50RWxlbWVudH1jYXRjaChlKXt9aWYodCYmdC5kb1Njcm9sbCl7KGZ1bmN0aW9uIGRvU2Nyb2xsQ2hlY2soKXtpZighUS5pc1JlYWR5KXt0cnl7dC5kb1Njcm9sbCgibGVmdCIpfWNhdGNoKGUpe3JldHVybiBzZXRUaW1lb3V0KGRvU2Nyb2xsQ2hlY2ssNTApfVYoKTtRLnJlYWR5KCl9fSkoKX19fXJldHVybiBVLnByb21pc2UoYSl9O3ZhciBYPXR5cGVvZiB1bmRlZmluZWQ7dmFyIGk7Zm9yKGkgaW4gUSh4KSl7YnJlYWt9eC5vd25MYXN0PWkhPT0iMCI7eC5pbmxpbmVCbG9ja05lZWRzTGF5b3V0PWZhbHNlO1EoZnVuY3Rpb24oKXt2YXIgdixhLGIsajtiPUouZ2V0RWxlbWVudHNCeVRhZ05hbWUoImJvZHkiKVswXTtpZighYnx8IWIuc3R5bGUpe3JldHVybn1hPUouY3JlYXRlRWxlbWVudCgiZGl2Iik7aj1KLmNyZWF0ZUVsZW1lbnQoImRpdiIpO2ouc3R5bGUuY3NzVGV4dD0icG9zaXRpb246YWJzb2x1dGU7Ym9yZGVyOjA7d2lkdGg6MDtoZWlnaHQ6MDt0b3A6MDtsZWZ0Oi05OTk5cHgiO2IuYXBwZW5kQ2hpbGQoaikuYXBwZW5kQ2hpbGQoYSk7aWYodHlwZW9mIGEuc3R5bGUuem9vbSE9PVgpe2Euc3R5bGUuY3NzVGV4dD0iZGlzcGxheTppbmxpbmU7bWFyZ2luOjA7Ym9yZGVyOjA7cGFkZGluZzoxcHg7d2lkdGg6MXB4O3pvb206MSI7eC5pbmxpbmVCbG9ja05lZWRzTGF5b3V0PXY9YS5vZmZzZXRXaWR0aD09PTM7aWYodil7Yi5zdHlsZS56b29tPTF9fWIucmVtb3ZlQ2hpbGQoail9KTsoZnVuY3Rpb24oKXt2YXIgYT1KLmNyZWF0ZUVsZW1lbnQoImRpdiIpO2lmKHguZGVsZXRlRXhwYW5kbz09bnVsbCl7eC5kZWxldGVFeHBhbmRvPXRydWU7dHJ5e2RlbGV0ZSBhLnRlc3R9Y2F0Y2goZSl7eC5kZWxldGVFeHBhbmRvPWZhbHNlfX1hPW51bGx9KSgpO1EuYWNjZXB0RGF0YT1mdW5jdGlvbihhKXt2YXIgbj1RLm5vRGF0YVsoYS5ub2RlTmFtZSsiICIpLnRvTG93ZXJDYXNlKCldLGI9K2Eubm9kZVR5cGV8fDE7cmV0dXJuIGIhPT0xJiZiIT09OT9mYWxzZTohbnx8biE9PXRydWUmJmEuZ2V0QXR0cmlidXRlKCJjbGFzc2lkIik9PT1ufTt2YXIgWT0vXig/Olx7W1x3XFddKlx9fFxbW1x3XFddKlxdKSQvLFo9LyhbQS1aXSkvZztmdW5jdGlvbiAkKGEsYixqKXtpZihqPT09dW5kZWZpbmVkJiZhLm5vZGVUeXBlPT09MSl7dmFyIG49ImRhdGEtIitiLnJlcGxhY2UoWiwiLSQxIikudG9Mb3dlckNhc2UoKTtqPWEuZ2V0QXR0cmlidXRlKG4pO2lmKHR5cGVvZiBqPT09InN0cmluZyIpe3RyeXtqPWo9PT0idHJ1ZSI/dHJ1ZTpqPT09ImZhbHNlIj9mYWxzZTpqPT09Im51bGwiP251bGw6K2orIiI9PT1qPytqOlkudGVzdChqKT9RLnBhcnNlSlNPTihqKTpqfWNhdGNoKGUpe31RLmRhdGEoYSxiLGopfWVsc2V7aj11bmRlZmluZWR9fXJldHVybiBqfWZ1bmN0aW9uIGExKGEpe3ZhciBuO2ZvcihuIGluIGEpe2lmKG49PT0iZGF0YSImJlEuaXNFbXB0eU9iamVjdChhW25dKSl7Y29udGludWV9aWYobiE9PSJ0b0pTT04iKXtyZXR1cm4gZmFsc2V9fXJldHVybiB0cnVlfWZ1bmN0aW9uIGIxKGEsbixiLHApe2lmKCFRLmFjY2VwdERhdGEoYSkpe3JldHVybn12YXIgcix0LGo9US5leHBhbmRvLGw9YS5ub2RlVHlwZSxtPWw/US5jYWNoZTphLHM9bD9hW2pdOmFbal0mJmo7aWYoKCFzfHwhbVtzXXx8KCFwJiYhbVtzXS5kYXRhKSkmJmI9PT11bmRlZmluZWQmJnR5cGVvZiBuPT09InN0cmluZyIpe3JldHVybn1pZighcyl7aWYobCl7cz1hW2pdPWQucG9wKCl8fFEuZ3VpZCsrfWVsc2V7cz1qfX1pZighbVtzXSl7bVtzXT1sP3t9Ont0b0pTT046US5ub29wfX1pZih0eXBlb2Ygbj09PSJvYmplY3QifHx0eXBlb2Ygbj09PSJmdW5jdGlvbiIpe2lmKHApe21bc109US5leHRlbmQobVtzXSxuKX1lbHNle21bc10uZGF0YT1RLmV4dGVuZChtW3NdLmRhdGEsbil9fXQ9bVtzXTtpZighcCl7aWYoIXQuZGF0YSl7dC5kYXRhPXt9fXQ9dC5kYXRhfWlmKGIhPT11bmRlZmluZWQpe3RbUS5jYW1lbENhc2UobildPWJ9aWYodHlwZW9mIG49PT0ic3RyaW5nIil7cj10W25dO2lmKHI9PW51bGwpe3I9dFtRLmNhbWVsQ2FzZShuKV19fWVsc2V7cj10fXJldHVybiByfWZ1bmN0aW9uIGMxKGEsbixwKXtpZighUS5hY2NlcHREYXRhKGEpKXtyZXR1cm59dmFyIHQsaSxiPWEubm9kZVR5cGUsaj1iP1EuY2FjaGU6YSxsPWI/YVtRLmV4cGFuZG9dOlEuZXhwYW5kbztpZighaltsXSl7cmV0dXJufWlmKG4pe3Q9cD9qW2xdOmpbbF0uZGF0YTtpZih0KXtpZighUS5pc0FycmF5KG4pKXtpZihuIGluIHQpe249W25dfWVsc2V7bj1RLmNhbWVsQ2FzZShuKTtpZihuIGluIHQpe249W25dfWVsc2V7bj1uLnNwbGl0KCIgIil9fX1lbHNle249bi5jb25jYXQoUS5tYXAobixRLmNhbWVsQ2FzZSkpfWk9bi5sZW5ndGg7d2hpbGUoaS0tKXtkZWxldGUgdFtuW2ldXX1pZihwPyFhMSh0KTohUS5pc0VtcHR5T2JqZWN0KHQpKXtyZXR1cm59fX1pZighcCl7ZGVsZXRlIGpbbF0uZGF0YTtpZighYTEoaltsXSkpe3JldHVybn19aWYoYil7US5jbGVhbkRhdGEoW2FdLHRydWUpfWVsc2UgaWYoeC5kZWxldGVFeHBhbmRvfHxqIT1qLndpbmRvdyl7ZGVsZXRlIGpbbF19ZWxzZXtqW2xdPW51bGx9fVEuZXh0ZW5kKHtjYWNoZTp7fSxub0RhdGE6eyJhcHBsZXQgIjp0cnVlLCJlbWJlZCAiOnRydWUsIm9iamVjdCAiOiJjbHNpZDpEMjdDREI2RS1BRTZELTExY2YtOTZCOC00NDQ1NTM1NDAwMDAifSxoYXNEYXRhOmZ1bmN0aW9uKGEpe2E9YS5ub2RlVHlwZT9RLmNhY2hlW2FbUS5leHBhbmRvXV06YVtRLmV4cGFuZG9dO3JldHVybiEhYSYmIWExKGEpfSxkYXRhOmZ1bmN0aW9uKGEsbixiKXtyZXR1cm4gYjEoYSxuLGIpfSxyZW1vdmVEYXRhOmZ1bmN0aW9uKGEsbil7cmV0dXJuIGMxKGEsbil9LF9kYXRhOmZ1bmN0aW9uKGEsbixiKXtyZXR1cm4gYjEoYSxuLGIsdHJ1ZSl9LF9yZW1vdmVEYXRhOmZ1bmN0aW9uKGEsbil7cmV0dXJuIGMxKGEsbix0cnVlKX19KTtRLmZuLmV4dGVuZCh7ZGF0YTpmdW5jdGlvbihhLHYpe3ZhciBpLG4sYixqPXRoaXNbMF0sbD1qJiZqLmF0dHJpYnV0ZXM7aWYoYT09PXVuZGVmaW5lZCl7aWYodGhpcy5sZW5ndGgpe2I9US5kYXRhKGopO2lmKGoubm9kZVR5cGU9PT0xJiYhUS5fZGF0YShqLCJwYXJzZWRBdHRycyIpKXtpPWwubGVuZ3RoO3doaWxlKGktLSl7aWYobFtpXSl7bj1sW2ldLm5hbWU7aWYobi5pbmRleE9mKCJkYXRhLSIpPT09MCl7bj1RLmNhbWVsQ2FzZShuLnNsaWNlKDUpKTskKGosbixiW25dKX19fVEuX2RhdGEoaiwicGFyc2VkQXR0cnMiLHRydWUpfX1yZXR1cm4gYn1pZih0eXBlb2YgYT09PSJvYmplY3QiKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7US5kYXRhKHRoaXMsYSl9KX1yZXR1cm4gYXJndW1lbnRzLmxlbmd0aD4xP3RoaXMuZWFjaChmdW5jdGlvbigpe1EuZGF0YSh0aGlzLGEsdil9KTpqPyQoaixhLFEuZGF0YShqLGEpKTp1bmRlZmluZWR9LHJlbW92ZURhdGE6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe1EucmVtb3ZlRGF0YSh0aGlzLGEpfSl9fSk7US5leHRlbmQoe3F1ZXVlOmZ1bmN0aW9uKGEsdCxiKXt2YXIgajtpZihhKXt0PSh0fHwiZngiKSsicXVldWUiO2o9US5fZGF0YShhLHQpO2lmKGIpe2lmKCFqfHxRLmlzQXJyYXkoYikpe2o9US5fZGF0YShhLHQsUS5tYWtlQXJyYXkoYikpfWVsc2V7ai5wdXNoKGIpfX1yZXR1cm4ganx8W119fSxkZXF1ZXVlOmZ1bmN0aW9uKGEsdCl7dD10fHwiZngiO3ZhciBiPVEucXVldWUoYSx0KSxzPWIubGVuZ3RoLGo9Yi5zaGlmdCgpLGw9US5fcXVldWVIb29rcyhhLHQpLG49ZnVuY3Rpb24oKXtRLmRlcXVldWUoYSx0KX07aWYoaj09PSJpbnByb2dyZXNzIil7aj1iLnNoaWZ0KCk7cy0tfWlmKGope2lmKHQ9PT0iZngiKXtiLnVuc2hpZnQoImlucHJvZ3Jlc3MiKX1kZWxldGUgbC5zdG9wO2ouY2FsbChhLG4sbCl9aWYoIXMmJmwpe2wuZW1wdHkuZmlyZSgpfX0sX3F1ZXVlSG9va3M6ZnVuY3Rpb24oYSx0KXt2YXIgYj10KyJxdWV1ZUhvb2tzIjtyZXR1cm4gUS5fZGF0YShhLGIpfHxRLl9kYXRhKGEsYix7ZW1wdHk6US5DYWxsYmFja3MoIm9uY2UgbWVtb3J5IikuYWRkKGZ1bmN0aW9uKCl7US5fcmVtb3ZlRGF0YShhLHQrInF1ZXVlIik7US5fcmVtb3ZlRGF0YShhLGIpfSl9KX19KTtRLmZuLmV4dGVuZCh7cXVldWU6ZnVuY3Rpb24odCxhKXt2YXIgcz0yO2lmKHR5cGVvZiB0IT09InN0cmluZyIpe2E9dDt0PSJmeCI7cy0tfWlmKGFyZ3VtZW50cy5sZW5ndGg8cyl7cmV0dXJuIFEucXVldWUodGhpc1swXSx0KX1yZXR1cm4gYT09PXVuZGVmaW5lZD90aGlzOnRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBiPVEucXVldWUodGhpcyx0LGEpO1EuX3F1ZXVlSG9va3ModGhpcyx0KTtpZih0PT09ImZ4IiYmYlswXSE9PSJpbnByb2dyZXNzIil7US5kZXF1ZXVlKHRoaXMsdCl9fSl9LGRlcXVldWU6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe1EuZGVxdWV1ZSh0aGlzLHQpfSl9LGNsZWFyUXVldWU6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMucXVldWUodHx8ImZ4IixbXSl9LHByb21pc2U6ZnVuY3Rpb24odCxhKXt2YXIgYixqPTEsbD1RLkRlZmVycmVkKCksbT10aGlzLGk9dGhpcy5sZW5ndGgscj1mdW5jdGlvbigpe2lmKCEoLS1qKSl7bC5yZXNvbHZlV2l0aChtLFttXSl9fTtpZih0eXBlb2YgdCE9PSJzdHJpbmciKXthPXQ7dD11bmRlZmluZWR9dD10fHwiZngiO3doaWxlKGktLSl7Yj1RLl9kYXRhKG1baV0sdCsicXVldWVIb29rcyIpO2lmKGImJmIuZW1wdHkpe2orKztiLmVtcHR5LmFkZChyKX19cigpO3JldHVybiBsLnByb21pc2UoYSl9fSk7dmFyIGQxPSgvWystXT8oPzpcZCpcLnwpXGQrKD86W2VFXVsrLV0/XGQrfCkvKS5zb3VyY2U7dmFyIGUxPVsiVG9wIiwiUmlnaHQiLCJCb3R0b20iLCJMZWZ0Il07dmFyIGYxPWZ1bmN0aW9uKGEsYil7YT1ifHxhO3JldHVybiBRLmNzcyhhLCJkaXNwbGF5Iik9PT0ibm9uZSJ8fCFRLmNvbnRhaW5zKGEub3duZXJEb2N1bWVudCxhKX07dmFyIGcxPVEuYWNjZXNzPWZ1bmN0aW9uKGEsYixqLHYsbCxtLHIpe3ZhciBpPTAsbj1hLmxlbmd0aCxwPWo9PW51bGw7aWYoUS50eXBlKGopPT09Im9iamVjdCIpe2w9dHJ1ZTtmb3IoaSBpbiBqKXtRLmFjY2VzcyhhLGIsaSxqW2ldLHRydWUsbSxyKX19ZWxzZSBpZih2IT09dW5kZWZpbmVkKXtsPXRydWU7aWYoIVEuaXNGdW5jdGlvbih2KSl7cj10cnVlfWlmKHApe2lmKHIpe2IuY2FsbChhLHYpO2I9bnVsbH1lbHNle3A9YjtiPWZ1bmN0aW9uKHMsaix2KXtyZXR1cm4gcC5jYWxsKFEocyksdil9fX1pZihiKXtmb3IoO2k8bjtpKyspe2IoYVtpXSxqLHI/djp2LmNhbGwoYVtpXSxpLGIoYVtpXSxqKSkpfX19cmV0dXJuIGw/YTpwP2IuY2FsbChhKTpuP2IoYVswXSxqKTptfTt2YXIgaDE9KC9eKD86Y2hlY2tib3h8cmFkaW8pJC9pKTsoZnVuY3Rpb24oKXt2YXIgYT1KLmNyZWF0ZUVsZW1lbnQoImlucHV0IiksYj1KLmNyZWF0ZUVsZW1lbnQoImRpdiIpLGo9Si5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7Yi5pbm5lckhUTUw9IiAgPGxpbmsvPjx0YWJsZT48L3RhYmxlPjxhIGhyZWY9Jy9hJz5hPC9hPjxpbnB1dCB0eXBlPSdjaGVja2JveCcvPiI7eC5sZWFkaW5nV2hpdGVzcGFjZT1iLmZpcnN0Q2hpbGQubm9kZVR5cGU9PT0zO3gudGJvZHk9IWIuZ2V0RWxlbWVudHNCeVRhZ05hbWUoInRib2R5IikubGVuZ3RoO3guaHRtbFNlcmlhbGl6ZT0hIWIuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImxpbmsiKS5sZW5ndGg7eC5odG1sNUNsb25lPUouY3JlYXRlRWxlbWVudCgibmF2IikuY2xvbmVOb2RlKHRydWUpLm91dGVySFRNTCE9PSI8Om5hdj48LzpuYXY+IjthLnR5cGU9ImNoZWNrYm94IjthLmNoZWNrZWQ9dHJ1ZTtqLmFwcGVuZENoaWxkKGEpO3guYXBwZW5kQ2hlY2tlZD1hLmNoZWNrZWQ7Yi5pbm5lckhUTUw9Ijx0ZXh0YXJlYT54PC90ZXh0YXJlYT4iO3gubm9DbG9uZUNoZWNrZWQ9ISFiLmNsb25lTm9kZSh0cnVlKS5sYXN0Q2hpbGQuZGVmYXVsdFZhbHVlO2ouYXBwZW5kQ2hpbGQoYik7Yi5pbm5lckhUTUw9IjxpbnB1dCB0eXBlPSdyYWRpbycgY2hlY2tlZD0nY2hlY2tlZCcgbmFtZT0ndCcvPiI7eC5jaGVja0Nsb25lPWIuY2xvbmVOb2RlKHRydWUpLmNsb25lTm9kZSh0cnVlKS5sYXN0Q2hpbGQuY2hlY2tlZDt4Lm5vQ2xvbmVFdmVudD10cnVlO2lmKGIuYXR0YWNoRXZlbnQpe2IuYXR0YWNoRXZlbnQoIm9uY2xpY2siLGZ1bmN0aW9uKCl7eC5ub0Nsb25lRXZlbnQ9ZmFsc2V9KTtiLmNsb25lTm9kZSh0cnVlKS5jbGljaygpfWlmKHguZGVsZXRlRXhwYW5kbz09bnVsbCl7eC5kZWxldGVFeHBhbmRvPXRydWU7dHJ5e2RlbGV0ZSBiLnRlc3R9Y2F0Y2goZSl7eC5kZWxldGVFeHBhbmRvPWZhbHNlfX19KSgpOyhmdW5jdGlvbigpe3ZhciBpLGEsYj1KLmNyZWF0ZUVsZW1lbnQoImRpdiIpO2ZvcihpIGlue3N1Ym1pdDp0cnVlLGNoYW5nZTp0cnVlLGZvY3VzaW46dHJ1ZX0pe2E9Im9uIitpO2lmKCEoeFtpKyJCdWJibGVzIl09YSBpbiB3KSl7Yi5zZXRBdHRyaWJ1dGUoYSwidCIpO3hbaSsiQnViYmxlcyJdPWIuYXR0cmlidXRlc1thXS5leHBhbmRvPT09ZmFsc2V9fWI9bnVsbH0pKCk7dmFyIGkxPS9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhKSQvaSxqMT0vXmtleS8sazE9L14oPzptb3VzZXxwb2ludGVyfGNvbnRleHRtZW51KXxjbGljay8sbDE9L14oPzpmb2N1c2luZm9jdXN8Zm9jdXNvdXRibHVyKSQvLG0xPS9eKFteLl0qKSg/OlwuKC4rKXwpJC87ZnVuY3Rpb24gbjEoKXtyZXR1cm4gdHJ1ZX1mdW5jdGlvbiBvMSgpe3JldHVybiBmYWxzZX1mdW5jdGlvbiBwMSgpe3RyeXtyZXR1cm4gSi5hY3RpdmVFbGVtZW50fWNhdGNoKGEpe319US5ldmVudD17Z2xvYmFsOnt9LGFkZDpmdW5jdGlvbihhLGIsaixsLHMpe3ZhciBtLG4sdCxwLHIsdixfLHIzLHMzLHQzLHUzLHYzPVEuX2RhdGEoYSk7aWYoIXYzKXtyZXR1cm59aWYoai5oYW5kbGVyKXtwPWo7aj1wLmhhbmRsZXI7cz1wLnNlbGVjdG9yfWlmKCFqLmd1aWQpe2ouZ3VpZD1RLmd1aWQrK31pZighKG49djMuZXZlbnRzKSl7bj12My5ldmVudHM9e319aWYoISh2PXYzLmhhbmRsZSkpe3Y9djMuaGFuZGxlPWZ1bmN0aW9uKGUpe3JldHVybiB0eXBlb2YgUSE9PVgmJighZXx8US5ldmVudC50cmlnZ2VyZWQhPT1lLnR5cGUpP1EuZXZlbnQuZGlzcGF0Y2guYXBwbHkodi5lbGVtLGFyZ3VtZW50cyk6dW5kZWZpbmVkfTt2LmVsZW09YX1iPShifHwiIikubWF0Y2goUCl8fFsiIl07dD1iLmxlbmd0aDt3aGlsZSh0LS0pe209bTEuZXhlYyhiW3RdKXx8W107czM9dTM9bVsxXTt0Mz0obVsyXXx8IiIpLnNwbGl0KCIuIikuc29ydCgpO2lmKCFzMyl7Y29udGludWV9cj1RLmV2ZW50LnNwZWNpYWxbczNdfHx7fTtzMz0ocz9yLmRlbGVnYXRlVHlwZTpyLmJpbmRUeXBlKXx8czM7cj1RLmV2ZW50LnNwZWNpYWxbczNdfHx7fTtfPVEuZXh0ZW5kKHt0eXBlOnMzLG9yaWdUeXBlOnUzLGRhdGE6bCxoYW5kbGVyOmosZ3VpZDpqLmd1aWQsc2VsZWN0b3I6cyxuZWVkc0NvbnRleHQ6cyYmUS5leHByLm1hdGNoLm5lZWRzQ29udGV4dC50ZXN0KHMpLG5hbWVzcGFjZTp0My5qb2luKCIuIil9LHApO2lmKCEocjM9bltzM10pKXtyMz1uW3MzXT1bXTtyMy5kZWxlZ2F0ZUNvdW50PTA7aWYoIXIuc2V0dXB8fHIuc2V0dXAuY2FsbChhLGwsdDMsdik9PT1mYWxzZSl7aWYoYS5hZGRFdmVudExpc3RlbmVyKXthLmFkZEV2ZW50TGlzdGVuZXIoczMsdixmYWxzZSl9ZWxzZSBpZihhLmF0dGFjaEV2ZW50KXthLmF0dGFjaEV2ZW50KCJvbiIrczMsdil9fX1pZihyLmFkZCl7ci5hZGQuY2FsbChhLF8pO2lmKCFfLmhhbmRsZXIuZ3VpZCl7Xy5oYW5kbGVyLmd1aWQ9ai5ndWlkfX1pZihzKXtyMy5zcGxpY2UocjMuZGVsZWdhdGVDb3VudCsrLDAsXyl9ZWxzZXtyMy5wdXNoKF8pfVEuZXZlbnQuZ2xvYmFsW3MzXT10cnVlfWE9bnVsbH0scmVtb3ZlOmZ1bmN0aW9uKGEsYixsLHMsbSl7dmFyIGosbixwLHIsdCx2LF8scjMsczMsdDMsdTMsdjM9US5oYXNEYXRhKGEpJiZRLl9kYXRhKGEpO2lmKCF2M3x8ISh2PXYzLmV2ZW50cykpe3JldHVybn1iPShifHwiIikubWF0Y2goUCl8fFsiIl07dD1iLmxlbmd0aDt3aGlsZSh0LS0pe3A9bTEuZXhlYyhiW3RdKXx8W107czM9dTM9cFsxXTt0Mz0ocFsyXXx8IiIpLnNwbGl0KCIuIikuc29ydCgpO2lmKCFzMyl7Zm9yKHMzIGluIHYpe1EuZXZlbnQucmVtb3ZlKGEsczMrYlt0XSxsLHMsdHJ1ZSl9Y29udGludWV9Xz1RLmV2ZW50LnNwZWNpYWxbczNdfHx7fTtzMz0ocz9fLmRlbGVnYXRlVHlwZTpfLmJpbmRUeXBlKXx8czM7cjM9dltzM118fFtdO3A9cFsyXSYmbmV3IFJlZ0V4cCgiKF58XFwuKSIrdDMuam9pbigiXFwuKD86LipcXC58KSIpKyIoXFwufCQpIik7cj1qPXIzLmxlbmd0aDt3aGlsZShqLS0pe249cjNbal07aWYoKG18fHUzPT09bi5vcmlnVHlwZSkmJighbHx8bC5ndWlkPT09bi5ndWlkKSYmKCFwfHxwLnRlc3Qobi5uYW1lc3BhY2UpKSYmKCFzfHxzPT09bi5zZWxlY3Rvcnx8cz09PSIqKiImJm4uc2VsZWN0b3IpKXtyMy5zcGxpY2UoaiwxKTtpZihuLnNlbGVjdG9yKXtyMy5kZWxlZ2F0ZUNvdW50LS19aWYoXy5yZW1vdmUpe18ucmVtb3ZlLmNhbGwoYSxuKX19fWlmKHImJiFyMy5sZW5ndGgpe2lmKCFfLnRlYXJkb3dufHxfLnRlYXJkb3duLmNhbGwoYSx0Myx2My5oYW5kbGUpPT09ZmFsc2Upe1EucmVtb3ZlRXZlbnQoYSxzMyx2My5oYW5kbGUpfWRlbGV0ZSB2W3MzXX19aWYoUS5pc0VtcHR5T2JqZWN0KHYpKXtkZWxldGUgdjMuaGFuZGxlO1EuX3JlbW92ZURhdGEoYSwiZXZlbnRzIil9fSx0cmlnZ2VyOmZ1bmN0aW9uKGEsYixqLGwpe3ZhciBtLG4scCxyLHMsdCxpLHY9W2p8fEpdLF89dS5jYWxsKGEsInR5cGUiKT9hLnR5cGU6YSxyMz11LmNhbGwoYSwibmFtZXNwYWNlIik/YS5uYW1lc3BhY2Uuc3BsaXQoIi4iKTpbXTtwPXQ9aj1qfHxKO2lmKGoubm9kZVR5cGU9PT0zfHxqLm5vZGVUeXBlPT09OCl7cmV0dXJufWlmKGwxLnRlc3QoXytRLmV2ZW50LnRyaWdnZXJlZCkpe3JldHVybn1pZihfLmluZGV4T2YoIi4iKT49MCl7cjM9Xy5zcGxpdCgiLiIpO189cjMuc2hpZnQoKTtyMy5zb3J0KCl9bj1fLmluZGV4T2YoIjoiKTwwJiYib24iK187YT1hW1EuZXhwYW5kb10/YTpuZXcgUS5FdmVudChfLHR5cGVvZiBhPT09Im9iamVjdCImJmEpO2EuaXNUcmlnZ2VyPWw/MjozO2EubmFtZXNwYWNlPXIzLmpvaW4oIi4iKTthLm5hbWVzcGFjZV9yZT1hLm5hbWVzcGFjZT9uZXcgUmVnRXhwKCIoXnxcXC4pIityMy5qb2luKCJcXC4oPzouKlxcLnwpIikrIihcXC58JCkiKTpudWxsO2EucmVzdWx0PXVuZGVmaW5lZDtpZighYS50YXJnZXQpe2EudGFyZ2V0PWp9Yj1iPT1udWxsP1thXTpRLm1ha2VBcnJheShiLFthXSk7cz1RLmV2ZW50LnNwZWNpYWxbX118fHt9O2lmKCFsJiZzLnRyaWdnZXImJnMudHJpZ2dlci5hcHBseShqLGIpPT09ZmFsc2Upe3JldHVybn1pZighbCYmIXMubm9CdWJibGUmJiFRLmlzV2luZG93KGopKXtyPXMuZGVsZWdhdGVUeXBlfHxfO2lmKCFsMS50ZXN0KHIrXykpe3A9cC5wYXJlbnROb2RlfWZvcig7cDtwPXAucGFyZW50Tm9kZSl7di5wdXNoKHApO3Q9cH1pZih0PT09KGoub3duZXJEb2N1bWVudHx8Sikpe3YucHVzaCh0LmRlZmF1bHRWaWV3fHx0LnBhcmVudFdpbmRvd3x8dyl9fWk9MDt3aGlsZSgocD12W2krK10pJiYhYS5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpKXthLnR5cGU9aT4xP3I6cy5iaW5kVHlwZXx8XzttPShRLl9kYXRhKHAsImV2ZW50cyIpfHx7fSlbYS50eXBlXSYmUS5fZGF0YShwLCJoYW5kbGUiKTtpZihtKXttLmFwcGx5KHAsYil9bT1uJiZwW25dO2lmKG0mJm0uYXBwbHkmJlEuYWNjZXB0RGF0YShwKSl7YS5yZXN1bHQ9bS5hcHBseShwLGIpO2lmKGEucmVzdWx0PT09ZmFsc2Upe2EucHJldmVudERlZmF1bHQoKX19fWEudHlwZT1fO2lmKCFsJiYhYS5pc0RlZmF1bHRQcmV2ZW50ZWQoKSl7aWYoKCFzLl9kZWZhdWx0fHxzLl9kZWZhdWx0LmFwcGx5KHYucG9wKCksYik9PT1mYWxzZSkmJlEuYWNjZXB0RGF0YShqKSl7aWYobiYmaltfXSYmIVEuaXNXaW5kb3coaikpe3Q9altuXTtpZih0KXtqW25dPW51bGx9US5ldmVudC50cmlnZ2VyZWQ9Xzt0cnl7altfXSgpfWNhdGNoKGUpe31RLmV2ZW50LnRyaWdnZXJlZD11bmRlZmluZWQ7aWYodCl7altuXT10fX19fXJldHVybiBhLnJlc3VsdH0sZGlzcGF0Y2g6ZnVuY3Rpb24oYSl7YT1RLmV2ZW50LmZpeChhKTt2YXIgaSxyLGIsbSxqLGw9W10sbj1mLmNhbGwoYXJndW1lbnRzKSxwPShRLl9kYXRhKHRoaXMsImV2ZW50cyIpfHx7fSlbYS50eXBlXXx8W10scz1RLmV2ZW50LnNwZWNpYWxbYS50eXBlXXx8e307blswXT1hO2EuZGVsZWdhdGVUYXJnZXQ9dGhpcztpZihzLnByZURpc3BhdGNoJiZzLnByZURpc3BhdGNoLmNhbGwodGhpcyxhKT09PWZhbHNlKXtyZXR1cm59bD1RLmV2ZW50LmhhbmRsZXJzLmNhbGwodGhpcyxhLHApO2k9MDt3aGlsZSgobT1sW2krK10pJiYhYS5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpKXthLmN1cnJlbnRUYXJnZXQ9bS5lbGVtO2o9MDt3aGlsZSgoYj1tLmhhbmRsZXJzW2orK10pJiYhYS5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCgpKXtpZighYS5uYW1lc3BhY2VfcmV8fGEubmFtZXNwYWNlX3JlLnRlc3QoYi5uYW1lc3BhY2UpKXthLmhhbmRsZU9iaj1iO2EuZGF0YT1iLmRhdGE7cj0oKFEuZXZlbnQuc3BlY2lhbFtiLm9yaWdUeXBlXXx8e30pLmhhbmRsZXx8Yi5oYW5kbGVyKS5hcHBseShtLmVsZW0sbik7aWYociE9PXVuZGVmaW5lZCl7aWYoKGEucmVzdWx0PXIpPT09ZmFsc2Upe2EucHJldmVudERlZmF1bHQoKTthLnN0b3BQcm9wYWdhdGlvbigpfX19fX1pZihzLnBvc3REaXNwYXRjaCl7cy5wb3N0RGlzcGF0Y2guY2FsbCh0aGlzLGEpfXJldHVybiBhLnJlc3VsdH0saGFuZGxlcnM6ZnVuY3Rpb24oYSxiKXt2YXIgcyxqLG0saSxsPVtdLG49Yi5kZWxlZ2F0ZUNvdW50LHA9YS50YXJnZXQ7aWYobiYmcC5ub2RlVHlwZSYmKCFhLmJ1dHRvbnx8YS50eXBlIT09ImNsaWNrIikpe2Zvcig7cCE9dGhpcztwPXAucGFyZW50Tm9kZXx8dGhpcyl7aWYocC5ub2RlVHlwZT09PTEmJihwLmRpc2FibGVkIT09dHJ1ZXx8YS50eXBlIT09ImNsaWNrIikpe209W107Zm9yKGk9MDtpPG47aSsrKXtqPWJbaV07cz1qLnNlbGVjdG9yKyIgIjtpZihtW3NdPT09dW5kZWZpbmVkKXttW3NdPWoubmVlZHNDb250ZXh0P1Eocyx0aGlzKS5pbmRleChwKT49MDpRLmZpbmQocyx0aGlzLG51bGwsW3BdKS5sZW5ndGh9aWYobVtzXSl7bS5wdXNoKGopfX1pZihtLmxlbmd0aCl7bC5wdXNoKHtlbGVtOnAsaGFuZGxlcnM6bX0pfX19fWlmKG48Yi5sZW5ndGgpe2wucHVzaCh7ZWxlbTp0aGlzLGhhbmRsZXJzOmIuc2xpY2Uobil9KX1yZXR1cm4gbH0sZml4OmZ1bmN0aW9uKGEpe2lmKGFbUS5leHBhbmRvXSl7cmV0dXJuIGF9dmFyIGkscCxiLHQ9YS50eXBlLGo9YSxsPXRoaXMuZml4SG9va3NbdF07aWYoIWwpe3RoaXMuZml4SG9va3NbdF09bD1rMS50ZXN0KHQpP3RoaXMubW91c2VIb29rczpqMS50ZXN0KHQpP3RoaXMua2V5SG9va3M6e319Yj1sLnByb3BzP3RoaXMucHJvcHMuY29uY2F0KGwucHJvcHMpOnRoaXMucHJvcHM7YT1uZXcgUS5FdmVudChqKTtpPWIubGVuZ3RoO3doaWxlKGktLSl7cD1iW2ldO2FbcF09altwXX1pZighYS50YXJnZXQpe2EudGFyZ2V0PWouc3JjRWxlbWVudHx8Sn1pZihhLnRhcmdldC5ub2RlVHlwZT09PTMpe2EudGFyZ2V0PWEudGFyZ2V0LnBhcmVudE5vZGV9YS5tZXRhS2V5PSEhYS5tZXRhS2V5O3JldHVybiBsLmZpbHRlcj9sLmZpbHRlcihhLGopOmF9LHByb3BzOiJhbHRLZXkgYnViYmxlcyBjYW5jZWxhYmxlIGN0cmxLZXkgY3VycmVudFRhcmdldCBldmVudFBoYXNlIG1ldGFLZXkgcmVsYXRlZFRhcmdldCBzaGlmdEtleSB0YXJnZXQgdGltZVN0YW1wIHZpZXcgd2hpY2giLnNwbGl0KCIgIiksZml4SG9va3M6e30sa2V5SG9va3M6e3Byb3BzOiJjaGFyIGNoYXJDb2RlIGtleSBrZXlDb2RlIi5zcGxpdCgiICIpLGZpbHRlcjpmdW5jdGlvbihhLGIpe2lmKGEud2hpY2g9PW51bGwpe2Eud2hpY2g9Yi5jaGFyQ29kZSE9bnVsbD9iLmNoYXJDb2RlOmIua2V5Q29kZX1yZXR1cm4gYX19LG1vdXNlSG9va3M6e3Byb3BzOiJidXR0b24gYnV0dG9ucyBjbGllbnRYIGNsaWVudFkgZnJvbUVsZW1lbnQgb2Zmc2V0WCBvZmZzZXRZIHBhZ2VYIHBhZ2VZIHNjcmVlblggc2NyZWVuWSB0b0VsZW1lbnQiLnNwbGl0KCIgIiksZmlsdGVyOmZ1bmN0aW9uKGEsYil7dmFyIGosbCxtLG49Yi5idXR0b24scD1iLmZyb21FbGVtZW50O2lmKGEucGFnZVg9PW51bGwmJmIuY2xpZW50WCE9bnVsbCl7bD1hLnRhcmdldC5vd25lckRvY3VtZW50fHxKO209bC5kb2N1bWVudEVsZW1lbnQ7aj1sLmJvZHk7YS5wYWdlWD1iLmNsaWVudFgrKG0mJm0uc2Nyb2xsTGVmdHx8aiYmai5zY3JvbGxMZWZ0fHwwKS0obSYmbS5jbGllbnRMZWZ0fHxqJiZqLmNsaWVudExlZnR8fDApO2EucGFnZVk9Yi5jbGllbnRZKyhtJiZtLnNjcm9sbFRvcHx8aiYmai5zY3JvbGxUb3B8fDApLShtJiZtLmNsaWVudFRvcHx8aiYmai5jbGllbnRUb3B8fDApfWlmKCFhLnJlbGF0ZWRUYXJnZXQmJnApe2EucmVsYXRlZFRhcmdldD1wPT09YS50YXJnZXQ/Yi50b0VsZW1lbnQ6cH1pZighYS53aGljaCYmbiE9PXVuZGVmaW5lZCl7YS53aGljaD0obiYxPzE6KG4mMj8zOihuJjQ/MjowKSkpfXJldHVybiBhfX0sc3BlY2lhbDp7bG9hZDp7bm9CdWJibGU6dHJ1ZX0sZm9jdXM6e3RyaWdnZXI6ZnVuY3Rpb24oKXtpZih0aGlzIT09cDEoKSYmdGhpcy5mb2N1cyl7dHJ5e3RoaXMuZm9jdXMoKTtyZXR1cm4gZmFsc2V9Y2F0Y2goZSl7fX19LGRlbGVnYXRlVHlwZToiZm9jdXNpbiJ9LGJsdXI6e3RyaWdnZXI6ZnVuY3Rpb24oKXtpZih0aGlzPT09cDEoKSYmdGhpcy5ibHVyKXt0aGlzLmJsdXIoKTtyZXR1cm4gZmFsc2V9fSxkZWxlZ2F0ZVR5cGU6ImZvY3Vzb3V0In0sY2xpY2s6e3RyaWdnZXI6ZnVuY3Rpb24oKXtpZihRLm5vZGVOYW1lKHRoaXMsImlucHV0IikmJnRoaXMudHlwZT09PSJjaGVja2JveCImJnRoaXMuY2xpY2spe3RoaXMuY2xpY2soKTtyZXR1cm4gZmFsc2V9fSxfZGVmYXVsdDpmdW5jdGlvbihhKXtyZXR1cm4gUS5ub2RlTmFtZShhLnRhcmdldCwiYSIpfX0sYmVmb3JldW5sb2FkOntwb3N0RGlzcGF0Y2g6ZnVuY3Rpb24oYSl7aWYoYS5yZXN1bHQhPT11bmRlZmluZWQmJmEub3JpZ2luYWxFdmVudCl7YS5vcmlnaW5hbEV2ZW50LnJldHVyblZhbHVlPWEucmVzdWx0fX19fSxzaW11bGF0ZTpmdW5jdGlvbih0LGEsYixqKXt2YXIgZT1RLmV4dGVuZChuZXcgUS5FdmVudCgpLGIse3R5cGU6dCxpc1NpbXVsYXRlZDp0cnVlLG9yaWdpbmFsRXZlbnQ6e319KTtpZihqKXtRLmV2ZW50LnRyaWdnZXIoZSxudWxsLGEpfWVsc2V7US5ldmVudC5kaXNwYXRjaC5jYWxsKGEsZSl9aWYoZS5pc0RlZmF1bHRQcmV2ZW50ZWQoKSl7Yi5wcmV2ZW50RGVmYXVsdCgpfX19O1EucmVtb3ZlRXZlbnQ9Si5yZW1vdmVFdmVudExpc3RlbmVyP2Z1bmN0aW9uKGEsdCxiKXtpZihhLnJlbW92ZUV2ZW50TGlzdGVuZXIpe2EucmVtb3ZlRXZlbnRMaXN0ZW5lcih0LGIsZmFsc2UpfX06ZnVuY3Rpb24oYSx0LGIpe3ZhciBuPSJvbiIrdDtpZihhLmRldGFjaEV2ZW50KXtpZih0eXBlb2YgYVtuXT09PVgpe2Fbbl09bnVsbH1hLmRldGFjaEV2ZW50KG4sYil9fTtRLkV2ZW50PWZ1bmN0aW9uKHMscCl7aWYoISh0aGlzIGluc3RhbmNlb2YgUS5FdmVudCkpe3JldHVybiBuZXcgUS5FdmVudChzLHApfWlmKHMmJnMudHlwZSl7dGhpcy5vcmlnaW5hbEV2ZW50PXM7dGhpcy50eXBlPXMudHlwZTt0aGlzLmlzRGVmYXVsdFByZXZlbnRlZD1zLmRlZmF1bHRQcmV2ZW50ZWR8fHMuZGVmYXVsdFByZXZlbnRlZD09PXVuZGVmaW5lZCYmcy5yZXR1cm5WYWx1ZT09PWZhbHNlP24xOm8xfWVsc2V7dGhpcy50eXBlPXN9aWYocCl7US5leHRlbmQodGhpcyxwKX10aGlzLnRpbWVTdGFtcD1zJiZzLnRpbWVTdGFtcHx8US5ub3coKTt0aGlzW1EuZXhwYW5kb109dHJ1ZX07US5FdmVudC5wcm90b3R5cGU9e2lzRGVmYXVsdFByZXZlbnRlZDpvMSxpc1Byb3BhZ2F0aW9uU3RvcHBlZDpvMSxpc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZDpvMSxwcmV2ZW50RGVmYXVsdDpmdW5jdGlvbigpe3ZhciBlPXRoaXMub3JpZ2luYWxFdmVudDt0aGlzLmlzRGVmYXVsdFByZXZlbnRlZD1uMTtpZighZSl7cmV0dXJufWlmKGUucHJldmVudERlZmF1bHQpe2UucHJldmVudERlZmF1bHQoKX1lbHNle2UucmV0dXJuVmFsdWU9ZmFsc2V9fSxzdG9wUHJvcGFnYXRpb246ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9yaWdpbmFsRXZlbnQ7dGhpcy5pc1Byb3BhZ2F0aW9uU3RvcHBlZD1uMTtpZighZSl7cmV0dXJufWlmKGUuc3RvcFByb3BhZ2F0aW9uKXtlLnN0b3BQcm9wYWdhdGlvbigpfWUuY2FuY2VsQnViYmxlPXRydWV9LHN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbjpmdW5jdGlvbigpe3ZhciBlPXRoaXMub3JpZ2luYWxFdmVudDt0aGlzLmlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkPW4xO2lmKGUmJmUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKXtlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpfXRoaXMuc3RvcFByb3BhZ2F0aW9uKCl9fTtRLmVhY2goe21vdXNlZW50ZXI6Im1vdXNlb3ZlciIsbW91c2VsZWF2ZToibW91c2VvdXQiLHBvaW50ZXJlbnRlcjoicG9pbnRlcm92ZXIiLHBvaW50ZXJsZWF2ZToicG9pbnRlcm91dCJ9LGZ1bmN0aW9uKGEsYil7US5ldmVudC5zcGVjaWFsW2FdPXtkZWxlZ2F0ZVR5cGU6YixiaW5kVHlwZTpiLGhhbmRsZTpmdW5jdGlvbihqKXt2YXIgcix0PXRoaXMsbD1qLnJlbGF0ZWRUYXJnZXQsbT1qLmhhbmRsZU9iajtpZighbHx8KGwhPT10JiYhUS5jb250YWlucyh0LGwpKSl7ai50eXBlPW0ub3JpZ1R5cGU7cj1tLmhhbmRsZXIuYXBwbHkodGhpcyxhcmd1bWVudHMpO2oudHlwZT1ifXJldHVybiByfX19KTtpZigheC5zdWJtaXRCdWJibGVzKXtRLmV2ZW50LnNwZWNpYWwuc3VibWl0PXtzZXR1cDpmdW5jdGlvbigpe2lmKFEubm9kZU5hbWUodGhpcywiZm9ybSIpKXtyZXR1cm4gZmFsc2V9US5ldmVudC5hZGQodGhpcywiY2xpY2suX3N1Ym1pdCBrZXlwcmVzcy5fc3VibWl0IixmdW5jdGlvbihlKXt2YXIgYT1lLnRhcmdldCxiPVEubm9kZU5hbWUoYSwiaW5wdXQiKXx8US5ub2RlTmFtZShhLCJidXR0b24iKT9hLmZvcm06dW5kZWZpbmVkO2lmKGImJiFRLl9kYXRhKGIsInN1Ym1pdEJ1YmJsZXMiKSl7US5ldmVudC5hZGQoYiwic3VibWl0Ll9zdWJtaXQiLGZ1bmN0aW9uKGope2ouX3N1Ym1pdF9idWJibGU9dHJ1ZX0pO1EuX2RhdGEoYiwic3VibWl0QnViYmxlcyIsdHJ1ZSl9fSl9LHBvc3REaXNwYXRjaDpmdW5jdGlvbihhKXtpZihhLl9zdWJtaXRfYnViYmxlKXtkZWxldGUgYS5fc3VibWl0X2J1YmJsZTtpZih0aGlzLnBhcmVudE5vZGUmJiFhLmlzVHJpZ2dlcil7US5ldmVudC5zaW11bGF0ZSgic3VibWl0Iix0aGlzLnBhcmVudE5vZGUsYSx0cnVlKX19fSx0ZWFyZG93bjpmdW5jdGlvbigpe2lmKFEubm9kZU5hbWUodGhpcywiZm9ybSIpKXtyZXR1cm4gZmFsc2V9US5ldmVudC5yZW1vdmUodGhpcywiLl9zdWJtaXQiKX19fWlmKCF4LmNoYW5nZUJ1YmJsZXMpe1EuZXZlbnQuc3BlY2lhbC5jaGFuZ2U9e3NldHVwOmZ1bmN0aW9uKCl7aWYoaTEudGVzdCh0aGlzLm5vZGVOYW1lKSl7aWYodGhpcy50eXBlPT09ImNoZWNrYm94Inx8dGhpcy50eXBlPT09InJhZGlvIil7US5ldmVudC5hZGQodGhpcywicHJvcGVydHljaGFuZ2UuX2NoYW5nZSIsZnVuY3Rpb24oYSl7aWYoYS5vcmlnaW5hbEV2ZW50LnByb3BlcnR5TmFtZT09PSJjaGVja2VkIil7dGhpcy5fanVzdF9jaGFuZ2VkPXRydWV9fSk7US5ldmVudC5hZGQodGhpcywiY2xpY2suX2NoYW5nZSIsZnVuY3Rpb24oYSl7aWYodGhpcy5fanVzdF9jaGFuZ2VkJiYhYS5pc1RyaWdnZXIpe3RoaXMuX2p1c3RfY2hhbmdlZD1mYWxzZX1RLmV2ZW50LnNpbXVsYXRlKCJjaGFuZ2UiLHRoaXMsYSx0cnVlKX0pfXJldHVybiBmYWxzZX1RLmV2ZW50LmFkZCh0aGlzLCJiZWZvcmVhY3RpdmF0ZS5fY2hhbmdlIixmdW5jdGlvbihlKXt2YXIgYT1lLnRhcmdldDtpZihpMS50ZXN0KGEubm9kZU5hbWUpJiYhUS5fZGF0YShhLCJjaGFuZ2VCdWJibGVzIikpe1EuZXZlbnQuYWRkKGEsImNoYW5nZS5fY2hhbmdlIixmdW5jdGlvbihiKXtpZih0aGlzLnBhcmVudE5vZGUmJiFiLmlzU2ltdWxhdGVkJiYhYi5pc1RyaWdnZXIpe1EuZXZlbnQuc2ltdWxhdGUoImNoYW5nZSIsdGhpcy5wYXJlbnROb2RlLGIsdHJ1ZSl9fSk7US5fZGF0YShhLCJjaGFuZ2VCdWJibGVzIix0cnVlKX19KX0saGFuZGxlOmZ1bmN0aW9uKGEpe3ZhciBiPWEudGFyZ2V0O2lmKHRoaXMhPT1ifHxhLmlzU2ltdWxhdGVkfHxhLmlzVHJpZ2dlcnx8KGIudHlwZSE9PSJyYWRpbyImJmIudHlwZSE9PSJjaGVja2JveCIpKXtyZXR1cm4gYS5oYW5kbGVPYmouaGFuZGxlci5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fSx0ZWFyZG93bjpmdW5jdGlvbigpe1EuZXZlbnQucmVtb3ZlKHRoaXMsIi5fY2hhbmdlIik7cmV0dXJuIWkxLnRlc3QodGhpcy5ub2RlTmFtZSl9fX1pZigheC5mb2N1c2luQnViYmxlcyl7US5lYWNoKHtmb2N1czoiZm9jdXNpbiIsYmx1cjoiZm9jdXNvdXQifSxmdW5jdGlvbihhLGIpe3ZhciBqPWZ1bmN0aW9uKGwpe1EuZXZlbnQuc2ltdWxhdGUoYixsLnRhcmdldCxRLmV2ZW50LmZpeChsKSx0cnVlKX07US5ldmVudC5zcGVjaWFsW2JdPXtzZXR1cDpmdW5jdGlvbigpe3ZhciBsPXRoaXMub3duZXJEb2N1bWVudHx8dGhpcyxtPVEuX2RhdGEobCxiKTtpZighbSl7bC5hZGRFdmVudExpc3RlbmVyKGEsaix0cnVlKX1RLl9kYXRhKGwsYiwobXx8MCkrMSl9LHRlYXJkb3duOmZ1bmN0aW9uKCl7dmFyIGw9dGhpcy5vd25lckRvY3VtZW50fHx0aGlzLG09US5fZGF0YShsLGIpLTE7aWYoIW0pe2wucmVtb3ZlRXZlbnRMaXN0ZW5lcihhLGosdHJ1ZSk7US5fcmVtb3ZlRGF0YShsLGIpfWVsc2V7US5fZGF0YShsLGIsbSl9fX19KX1RLmZuLmV4dGVuZCh7b246ZnVuY3Rpb24odCxzLGEsYixqKXt2YXIgbCxtO2lmKHR5cGVvZiB0PT09Im9iamVjdCIpe2lmKHR5cGVvZiBzIT09InN0cmluZyIpe2E9YXx8cztzPXVuZGVmaW5lZH1mb3IobCBpbiB0KXt0aGlzLm9uKGwscyxhLHRbbF0sail9cmV0dXJuIHRoaXN9aWYoYT09bnVsbCYmYj09bnVsbCl7Yj1zO2E9cz11bmRlZmluZWR9ZWxzZSBpZihiPT1udWxsKXtpZih0eXBlb2Ygcz09PSJzdHJpbmciKXtiPWE7YT11bmRlZmluZWR9ZWxzZXtiPWE7YT1zO3M9dW5kZWZpbmVkfX1pZihiPT09ZmFsc2Upe2I9bzF9ZWxzZSBpZighYil7cmV0dXJuIHRoaXN9aWYoaj09PTEpe209YjtiPWZ1bmN0aW9uKG4pe1EoKS5vZmYobik7cmV0dXJuIG0uYXBwbHkodGhpcyxhcmd1bWVudHMpfTtiLmd1aWQ9bS5ndWlkfHwobS5ndWlkPVEuZ3VpZCsrKX1yZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7US5ldmVudC5hZGQodGhpcyx0LGIsYSxzKX0pfSxvbmU6ZnVuY3Rpb24odCxzLGEsYil7cmV0dXJuIHRoaXMub24odCxzLGEsYiwxKX0sb2ZmOmZ1bmN0aW9uKHQscyxhKXt2YXIgYixqO2lmKHQmJnQucHJldmVudERlZmF1bHQmJnQuaGFuZGxlT2JqKXtiPXQuaGFuZGxlT2JqO1EodC5kZWxlZ2F0ZVRhcmdldCkub2ZmKGIubmFtZXNwYWNlP2Iub3JpZ1R5cGUrIi4iK2IubmFtZXNwYWNlOmIub3JpZ1R5cGUsYi5zZWxlY3RvcixiLmhhbmRsZXIpO3JldHVybiB0aGlzfWlmKHR5cGVvZiB0PT09Im9iamVjdCIpe2ZvcihqIGluIHQpe3RoaXMub2ZmKGoscyx0W2pdKX1yZXR1cm4gdGhpc31pZihzPT09ZmFsc2V8fHR5cGVvZiBzPT09ImZ1bmN0aW9uIil7YT1zO3M9dW5kZWZpbmVkfWlmKGE9PT1mYWxzZSl7YT1vMX1yZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7US5ldmVudC5yZW1vdmUodGhpcyx0LGEscyl9KX0sdHJpZ2dlcjpmdW5jdGlvbih0LGEpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtRLmV2ZW50LnRyaWdnZXIodCxhLHRoaXMpfSl9LHRyaWdnZXJIYW5kbGVyOmZ1bmN0aW9uKHQsYSl7dmFyIGI9dGhpc1swXTtpZihiKXtyZXR1cm4gUS5ldmVudC50cmlnZ2VyKHQsYSxiLHRydWUpfX19KTtmdW5jdGlvbiBxMShKKXt2YXIgbD1yMS5zcGxpdCgifCIpLHM9Si5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7aWYocy5jcmVhdGVFbGVtZW50KXt3aGlsZShsLmxlbmd0aCl7cy5jcmVhdGVFbGVtZW50KGwucG9wKCkpfX1yZXR1cm4gc312YXIgcjE9ImFiYnJ8YXJ0aWNsZXxhc2lkZXxhdWRpb3xiZGl8Y2FudmFzfGRhdGF8ZGF0YWxpc3R8ZGV0YWlsc3xmaWdjYXB0aW9ufGZpZ3VyZXxmb290ZXJ8IisiaGVhZGVyfGhncm91cHxtYXJrfG1ldGVyfG5hdnxvdXRwdXR8cHJvZ3Jlc3N8c2VjdGlvbnxzdW1tYXJ5fHRpbWV8dmlkZW8iLHMxPS8galF1ZXJ5XGQrPSIoPzpudWxsfFxkKykiL2csdDE9bmV3IFJlZ0V4cCgiPCg/OiIrcjErIilbXFxzLz5dIiwiaSIpLHUxPS9eXHMrLyx2MT0vPCg/IWFyZWF8YnJ8Y29sfGVtYmVkfGhyfGltZ3xpbnB1dHxsaW5rfG1ldGF8cGFyYW0pKChbXHc6XSspW14+XSopXC8+L2dpLHcxPS88KFtcdzpdKykvLHgxPS88dGJvZHkvaSx5MT0vPHwmIz9cdys7Lyx6MT0vPCg/OnNjcmlwdHxzdHlsZXxsaW5rKS9pLEExPS9jaGVja2VkXHMqKD86W149XXw9XHMqLmNoZWNrZWQuKS9pLEIxPS9eJHxcLyg/OmphdmF8ZWNtYSlzY3JpcHQvaSxDMT0vXnRydWVcLyguKikvLEQxPS9eXHMqPCEoPzpcW0NEQVRBXFt8LS0pfCg/OlxdXF18LS0pPlxzKiQvZyxFMT17b3B0aW9uOlsxLCI8c2VsZWN0IG11bHRpcGxlPSdtdWx0aXBsZSc+IiwiPC9zZWxlY3Q+Il0sbGVnZW5kOlsxLCI8ZmllbGRzZXQ+IiwiPC9maWVsZHNldD4iXSxhcmVhOlsxLCI8bWFwPiIsIjwvbWFwPiJdLHBhcmFtOlsxLCI8b2JqZWN0PiIsIjwvb2JqZWN0PiJdLHRoZWFkOlsxLCI8dGFibGU+IiwiPC90YWJsZT4iXSx0cjpbMiwiPHRhYmxlPjx0Ym9keT4iLCI8L3Rib2R5PjwvdGFibGU+Il0sY29sOlsyLCI8dGFibGU+PHRib2R5PjwvdGJvZHk+PGNvbGdyb3VwPiIsIjwvY29sZ3JvdXA+PC90YWJsZT4iXSx0ZDpbMywiPHRhYmxlPjx0Ym9keT48dHI+IiwiPC90cj48L3Rib2R5PjwvdGFibGU+Il0sX2RlZmF1bHQ6eC5odG1sU2VyaWFsaXplP1swLCIiLCIiXTpbMSwiWDxkaXY+IiwiPC9kaXY+Il19LEYxPXExKEopLEcxPUYxLmFwcGVuZENoaWxkKEouY3JlYXRlRWxlbWVudCgiZGl2IikpO0UxLm9wdGdyb3VwPUUxLm9wdGlvbjtFMS50Ym9keT1FMS50Zm9vdD1FMS5jb2xncm91cD1FMS5jYXB0aW9uPUUxLnRoZWFkO0UxLnRoPUUxLnRkO2Z1bmN0aW9uIEgxKGEsdCl7dmFyIGIsaixpPTAsbD10eXBlb2YgYS5nZXRFbGVtZW50c0J5VGFnTmFtZSE9PVg/YS5nZXRFbGVtZW50c0J5VGFnTmFtZSh0fHwiKiIpOnR5cGVvZiBhLnF1ZXJ5U2VsZWN0b3JBbGwhPT1YP2EucXVlcnlTZWxlY3RvckFsbCh0fHwiKiIpOnVuZGVmaW5lZDtpZighbCl7Zm9yKGw9W10sYj1hLmNoaWxkTm9kZXN8fGE7KGo9YltpXSkhPW51bGw7aSsrKXtpZighdHx8US5ub2RlTmFtZShqLHQpKXtsLnB1c2goail9ZWxzZXtRLm1lcmdlKGwsSDEoaix0KSl9fX1yZXR1cm4gdD09PXVuZGVmaW5lZHx8dCYmUS5ub2RlTmFtZShhLHQpP1EubWVyZ2UoW2FdLGwpOmx9ZnVuY3Rpb24gSTEoYSl7aWYoaDEudGVzdChhLnR5cGUpKXthLmRlZmF1bHRDaGVja2VkPWEuY2hlY2tlZH19ZnVuY3Rpb24gSjEoYSxiKXtyZXR1cm4gUS5ub2RlTmFtZShhLCJ0YWJsZSIpJiZRLm5vZGVOYW1lKGIubm9kZVR5cGUhPT0xMT9iOmIuZmlyc3RDaGlsZCwidHIiKT9hLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJ0Ym9keSIpWzBdfHxhLmFwcGVuZENoaWxkKGEub3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0Ym9keSIpKTphfWZ1bmN0aW9uIEsxKGEpe2EudHlwZT0oUS5maW5kLmF0dHIoYSwidHlwZSIpIT09bnVsbCkrIi8iK2EudHlwZTtyZXR1cm4gYX1mdW5jdGlvbiBMMShhKXt2YXIgbT1DMS5leGVjKGEudHlwZSk7aWYobSl7YS50eXBlPW1bMV19ZWxzZXthLnJlbW92ZUF0dHJpYnV0ZSgidHlwZSIpfXJldHVybiBhfWZ1bmN0aW9uIE0xKGEscil7dmFyIGIsaT0wO2Zvcig7KGI9YVtpXSkhPW51bGw7aSsrKXtRLl9kYXRhKGIsImdsb2JhbEV2YWwiLCFyfHxRLl9kYXRhKHJbaV0sImdsb2JhbEV2YWwiKSl9fWZ1bmN0aW9uIE4xKHMsYSl7aWYoYS5ub2RlVHlwZSE9PTF8fCFRLmhhc0RhdGEocykpe3JldHVybn12YXIgdCxpLGwsYj1RLl9kYXRhKHMpLGo9US5fZGF0YShhLGIpLG09Yi5ldmVudHM7aWYobSl7ZGVsZXRlIGouaGFuZGxlO2ouZXZlbnRzPXt9O2Zvcih0IGluIG0pe2ZvcihpPTAsbD1tW3RdLmxlbmd0aDtpPGw7aSsrKXtRLmV2ZW50LmFkZChhLHQsbVt0XVtpXSl9fX1pZihqLmRhdGEpe2ouZGF0YT1RLmV4dGVuZCh7fSxqLmRhdGEpfX1mdW5jdGlvbiBPMShzLGEpe3ZhciBuLGUsYjtpZihhLm5vZGVUeXBlIT09MSl7cmV0dXJufW49YS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO2lmKCF4Lm5vQ2xvbmVFdmVudCYmYVtRLmV4cGFuZG9dKXtiPVEuX2RhdGEoYSk7Zm9yKGUgaW4gYi5ldmVudHMpe1EucmVtb3ZlRXZlbnQoYSxlLGIuaGFuZGxlKX1hLnJlbW92ZUF0dHJpYnV0ZShRLmV4cGFuZG8pfWlmKG49PT0ic2NyaXB0IiYmYS50ZXh0IT09cy50ZXh0KXtLMShhKS50ZXh0PXMudGV4dDtMMShhKX1lbHNlIGlmKG49PT0ib2JqZWN0Iil7aWYoYS5wYXJlbnROb2RlKXthLm91dGVySFRNTD1zLm91dGVySFRNTH1pZih4Lmh0bWw1Q2xvbmUmJihzLmlubmVySFRNTCYmIVEudHJpbShhLmlubmVySFRNTCkpKXthLmlubmVySFRNTD1zLmlubmVySFRNTH19ZWxzZSBpZihuPT09ImlucHV0IiYmaDEudGVzdChzLnR5cGUpKXthLmRlZmF1bHRDaGVja2VkPWEuY2hlY2tlZD1zLmNoZWNrZWQ7aWYoYS52YWx1ZSE9PXMudmFsdWUpe2EudmFsdWU9cy52YWx1ZX19ZWxzZSBpZihuPT09Im9wdGlvbiIpe2EuZGVmYXVsdFNlbGVjdGVkPWEuc2VsZWN0ZWQ9cy5kZWZhdWx0U2VsZWN0ZWR9ZWxzZSBpZihuPT09ImlucHV0Inx8bj09PSJ0ZXh0YXJlYSIpe2EuZGVmYXVsdFZhbHVlPXMuZGVmYXVsdFZhbHVlfX1RLmV4dGVuZCh7Y2xvbmU6ZnVuY3Rpb24oYSxiLGope3ZhciBsLG4sbSxpLHMscD1RLmNvbnRhaW5zKGEub3duZXJEb2N1bWVudCxhKTtpZih4Lmh0bWw1Q2xvbmV8fFEuaXNYTUxEb2MoYSl8fCF0MS50ZXN0KCI8IithLm5vZGVOYW1lKyI+Iikpe209YS5jbG9uZU5vZGUodHJ1ZSl9ZWxzZXtHMS5pbm5lckhUTUw9YS5vdXRlckhUTUw7RzEucmVtb3ZlQ2hpbGQobT1HMS5maXJzdENoaWxkKX1pZigoIXgubm9DbG9uZUV2ZW50fHwheC5ub0Nsb25lQ2hlY2tlZCkmJihhLm5vZGVUeXBlPT09MXx8YS5ub2RlVHlwZT09PTExKSYmIVEuaXNYTUxEb2MoYSkpe2w9SDEobSk7cz1IMShhKTtmb3IoaT0wOyhuPXNbaV0pIT1udWxsOysraSl7aWYobFtpXSl7TzEobixsW2ldKX19fWlmKGIpe2lmKGope3M9c3x8SDEoYSk7bD1sfHxIMShtKTtmb3IoaT0wOyhuPXNbaV0pIT1udWxsO2krKyl7TjEobixsW2ldKX19ZWxzZXtOMShhLG0pfX1sPUgxKG0sInNjcmlwdCIpO2lmKGwubGVuZ3RoPjApe00xKGwsIXAmJkgxKGEsInNjcmlwdCIpKX1sPXM9bj1udWxsO3JldHVybiBtfSxidWlsZEZyYWdtZW50OmZ1bmN0aW9uKGEsYixzLG0pe3ZhciBqLG4scCx0LHIsdixfLGw9YS5sZW5ndGgscjM9cTEoYiksczM9W10saT0wO2Zvcig7aTxsO2krKyl7bj1hW2ldO2lmKG58fG49PT0wKXtpZihRLnR5cGUobik9PT0ib2JqZWN0Iil7US5tZXJnZShzMyxuLm5vZGVUeXBlP1tuXTpuKX1lbHNlIGlmKCF5MS50ZXN0KG4pKXtzMy5wdXNoKGIuY3JlYXRlVGV4dE5vZGUobikpfWVsc2V7dD10fHxyMy5hcHBlbmRDaGlsZChiLmNyZWF0ZUVsZW1lbnQoImRpdiIpKTtyPSh3MS5leGVjKG4pfHxbIiIsIiJdKVsxXS50b0xvd2VyQ2FzZSgpO189RTFbcl18fEUxLl9kZWZhdWx0O3QuaW5uZXJIVE1MPV9bMV0rbi5yZXBsYWNlKHYxLCI8JDE+PC8kMj4iKStfWzJdO2o9X1swXTt3aGlsZShqLS0pe3Q9dC5sYXN0Q2hpbGR9aWYoIXgubGVhZGluZ1doaXRlc3BhY2UmJnUxLnRlc3Qobikpe3MzLnB1c2goYi5jcmVhdGVUZXh0Tm9kZSh1MS5leGVjKG4pWzBdKSl9aWYoIXgudGJvZHkpe249cj09PSJ0YWJsZSImJiF4MS50ZXN0KG4pP3QuZmlyc3RDaGlsZDpfWzFdPT09Ijx0YWJsZT4iJiYheDEudGVzdChuKT90OjA7aj1uJiZuLmNoaWxkTm9kZXMubGVuZ3RoO3doaWxlKGotLSl7aWYoUS5ub2RlTmFtZSgodj1uLmNoaWxkTm9kZXNbal0pLCJ0Ym9keSIpJiYhdi5jaGlsZE5vZGVzLmxlbmd0aCl7bi5yZW1vdmVDaGlsZCh2KX19fVEubWVyZ2UoczMsdC5jaGlsZE5vZGVzKTt0LnRleHRDb250ZW50PSIiO3doaWxlKHQuZmlyc3RDaGlsZCl7dC5yZW1vdmVDaGlsZCh0LmZpcnN0Q2hpbGQpfXQ9cjMubGFzdENoaWxkfX19aWYodCl7cjMucmVtb3ZlQ2hpbGQodCl9aWYoIXguYXBwZW5kQ2hlY2tlZCl7US5ncmVwKEgxKHMzLCJpbnB1dCIpLEkxKX1pPTA7d2hpbGUoKG49czNbaSsrXSkpe2lmKG0mJlEuaW5BcnJheShuLG0pIT09LTEpe2NvbnRpbnVlfXA9US5jb250YWlucyhuLm93bmVyRG9jdW1lbnQsbik7dD1IMShyMy5hcHBlbmRDaGlsZChuKSwic2NyaXB0Iik7aWYocCl7TTEodCl9aWYocyl7aj0wO3doaWxlKChuPXRbaisrXSkpe2lmKEIxLnRlc3Qobi50eXBlfHwiIikpe3MucHVzaChuKX19fX10PW51bGw7cmV0dXJuIHIzfSxjbGVhbkRhdGE6ZnVuY3Rpb24oYSxiKXt2YXIgaix0LGwsbSxpPTAsbj1RLmV4cGFuZG8scD1RLmNhY2hlLHI9eC5kZWxldGVFeHBhbmRvLHM9US5ldmVudC5zcGVjaWFsO2Zvcig7KGo9YVtpXSkhPW51bGw7aSsrKXtpZihifHxRLmFjY2VwdERhdGEoaikpe2w9altuXTttPWwmJnBbbF07aWYobSl7aWYobS5ldmVudHMpe2Zvcih0IGluIG0uZXZlbnRzKXtpZihzW3RdKXtRLmV2ZW50LnJlbW92ZShqLHQpfWVsc2V7US5yZW1vdmVFdmVudChqLHQsbS5oYW5kbGUpfX19aWYocFtsXSl7ZGVsZXRlIHBbbF07aWYocil7ZGVsZXRlIGpbbl19ZWxzZSBpZih0eXBlb2Ygai5yZW1vdmVBdHRyaWJ1dGUhPT1YKXtqLnJlbW92ZUF0dHJpYnV0ZShuKX1lbHNle2pbbl09bnVsbH1kLnB1c2gobCl9fX19fX0pO1EuZm4uZXh0ZW5kKHt0ZXh0OmZ1bmN0aW9uKHYpe3JldHVybiBnMSh0aGlzLGZ1bmN0aW9uKHYpe3JldHVybiB2PT09dW5kZWZpbmVkP1EudGV4dCh0aGlzKTp0aGlzLmVtcHR5KCkuYXBwZW5kKCh0aGlzWzBdJiZ0aGlzWzBdLm93bmVyRG9jdW1lbnR8fEopLmNyZWF0ZVRleHROb2RlKHYpKX0sbnVsbCx2LGFyZ3VtZW50cy5sZW5ndGgpfSxhcHBlbmQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kb21NYW5pcChhcmd1bWVudHMsZnVuY3Rpb24oYSl7aWYodGhpcy5ub2RlVHlwZT09PTF8fHRoaXMubm9kZVR5cGU9PT0xMXx8dGhpcy5ub2RlVHlwZT09PTkpe3ZhciB0PUoxKHRoaXMsYSk7dC5hcHBlbmRDaGlsZChhKX19KX0scHJlcGVuZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRvbU1hbmlwKGFyZ3VtZW50cyxmdW5jdGlvbihhKXtpZih0aGlzLm5vZGVUeXBlPT09MXx8dGhpcy5ub2RlVHlwZT09PTExfHx0aGlzLm5vZGVUeXBlPT09OSl7dmFyIHQ9SjEodGhpcyxhKTt0Lmluc2VydEJlZm9yZShhLHQuZmlyc3RDaGlsZCl9fSl9LGJlZm9yZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRvbU1hbmlwKGFyZ3VtZW50cyxmdW5jdGlvbihhKXtpZih0aGlzLnBhcmVudE5vZGUpe3RoaXMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoYSx0aGlzKX19KX0sYWZ0ZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kb21NYW5pcChhcmd1bWVudHMsZnVuY3Rpb24oYSl7aWYodGhpcy5wYXJlbnROb2RlKXt0aGlzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGEsdGhpcy5uZXh0U2libGluZyl9fSl9LHJlbW92ZTpmdW5jdGlvbihzLGEpe3ZhciBiLGo9cz9RLmZpbHRlcihzLHRoaXMpOnRoaXMsaT0wO2Zvcig7KGI9altpXSkhPW51bGw7aSsrKXtpZighYSYmYi5ub2RlVHlwZT09PTEpe1EuY2xlYW5EYXRhKEgxKGIpKX1pZihiLnBhcmVudE5vZGUpe2lmKGEmJlEuY29udGFpbnMoYi5vd25lckRvY3VtZW50LGIpKXtNMShIMShiLCJzY3JpcHQiKSl9Yi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGIpfX1yZXR1cm4gdGhpc30sZW1wdHk6ZnVuY3Rpb24oKXt2YXIgYSxpPTA7Zm9yKDsoYT10aGlzW2ldKSE9bnVsbDtpKyspe2lmKGEubm9kZVR5cGU9PT0xKXtRLmNsZWFuRGF0YShIMShhLGZhbHNlKSl9d2hpbGUoYS5maXJzdENoaWxkKXthLnJlbW92ZUNoaWxkKGEuZmlyc3RDaGlsZCl9aWYoYS5vcHRpb25zJiZRLm5vZGVOYW1lKGEsInNlbGVjdCIpKXthLm9wdGlvbnMubGVuZ3RoPTB9fXJldHVybiB0aGlzfSxjbG9uZTpmdW5jdGlvbihhLGIpe2E9YT09bnVsbD9mYWxzZTphO2I9Yj09bnVsbD9hOmI7cmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uKCl7cmV0dXJuIFEuY2xvbmUodGhpcyxhLGIpfSl9LGh0bWw6ZnVuY3Rpb24odil7cmV0dXJuIGcxKHRoaXMsZnVuY3Rpb24odil7dmFyIGE9dGhpc1swXXx8e30saT0wLGw9dGhpcy5sZW5ndGg7aWYodj09PXVuZGVmaW5lZCl7cmV0dXJuIGEubm9kZVR5cGU9PT0xP2EuaW5uZXJIVE1MLnJlcGxhY2UoczEsIiIpOnVuZGVmaW5lZH1pZih0eXBlb2Ygdj09PSJzdHJpbmciJiYhejEudGVzdCh2KSYmKHguaHRtbFNlcmlhbGl6ZXx8IXQxLnRlc3QodikpJiYoeC5sZWFkaW5nV2hpdGVzcGFjZXx8IXUxLnRlc3QodikpJiYhRTFbKHcxLmV4ZWModil8fFsiIiwiIl0pWzFdLnRvTG93ZXJDYXNlKCldKXt2PXYucmVwbGFjZSh2MSwiPCQxPjwvJDI+Iik7dHJ5e2Zvcig7aTxsO2krKyl7YT10aGlzW2ldfHx7fTtpZihhLm5vZGVUeXBlPT09MSl7US5jbGVhbkRhdGEoSDEoYSxmYWxzZSkpO2EuaW5uZXJIVE1MPXZ9fWE9MH1jYXRjaChlKXt9fWlmKGEpe3RoaXMuZW1wdHkoKS5hcHBlbmQodil9fSxudWxsLHYsYXJndW1lbnRzLmxlbmd0aCl9LHJlcGxhY2VXaXRoOmZ1bmN0aW9uKCl7dmFyIGE9YXJndW1lbnRzWzBdO3RoaXMuZG9tTWFuaXAoYXJndW1lbnRzLGZ1bmN0aW9uKGIpe2E9dGhpcy5wYXJlbnROb2RlO1EuY2xlYW5EYXRhKEgxKHRoaXMpKTtpZihhKXthLnJlcGxhY2VDaGlsZChiLHRoaXMpfX0pO3JldHVybiBhJiYoYS5sZW5ndGh8fGEubm9kZVR5cGUpP3RoaXM6dGhpcy5yZW1vdmUoKX0sZGV0YWNoOmZ1bmN0aW9uKHMpe3JldHVybiB0aGlzLnJlbW92ZShzLHRydWUpfSxkb21NYW5pcDpmdW5jdGlvbihhLGIpe2E9Zy5hcHBseShbXSxhKTt2YXIgaixuLG0scyxwLHIsaT0wLGw9dGhpcy5sZW5ndGgsdD10aGlzLHY9bC0xLF89YVswXSxyMz1RLmlzRnVuY3Rpb24oXyk7aWYocjN8fChsPjEmJnR5cGVvZiBfPT09InN0cmluZyImJiF4LmNoZWNrQ2xvbmUmJkExLnRlc3QoXykpKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKHMzKXt2YXIgdDM9dC5lcShzMyk7aWYocjMpe2FbMF09Xy5jYWxsKHRoaXMsczMsdDMuaHRtbCgpKX10My5kb21NYW5pcChhLGIpfSl9aWYobCl7cj1RLmJ1aWxkRnJhZ21lbnQoYSx0aGlzWzBdLm93bmVyRG9jdW1lbnQsZmFsc2UsdGhpcyk7aj1yLmZpcnN0Q2hpbGQ7aWYoci5jaGlsZE5vZGVzLmxlbmd0aD09PTEpe3I9an1pZihqKXtzPVEubWFwKEgxKHIsInNjcmlwdCIpLEsxKTttPXMubGVuZ3RoO2Zvcig7aTxsO2krKyl7bj1yO2lmKGkhPT12KXtuPVEuY2xvbmUobix0cnVlLHRydWUpO2lmKG0pe1EubWVyZ2UocyxIMShuLCJzY3JpcHQiKSl9fWIuY2FsbCh0aGlzW2ldLG4saSl9aWYobSl7cD1zW3MubGVuZ3RoLTFdLm93bmVyRG9jdW1lbnQ7US5tYXAocyxMMSk7Zm9yKGk9MDtpPG07aSsrKXtuPXNbaV07aWYoQjEudGVzdChuLnR5cGV8fCIiKSYmIVEuX2RhdGEobiwiZ2xvYmFsRXZhbCIpJiZRLmNvbnRhaW5zKHAsbikpe2lmKG4uc3JjKXtpZihRLl9ldmFsVXJsKXtRLl9ldmFsVXJsKG4uc3JjKX19ZWxzZXtRLmdsb2JhbEV2YWwoKG4udGV4dHx8bi50ZXh0Q29udGVudHx8bi5pbm5lckhUTUx8fCIiKS5yZXBsYWNlKEQxLCIiKSl9fX19cj1qPW51bGx9fXJldHVybiB0aGlzfX0pO1EuZWFjaCh7YXBwZW5kVG86ImFwcGVuZCIscHJlcGVuZFRvOiJwcmVwZW5kIixpbnNlcnRCZWZvcmU6ImJlZm9yZSIsaW5zZXJ0QWZ0ZXI6ImFmdGVyIixyZXBsYWNlQWxsOiJyZXBsYWNlV2l0aCJ9LGZ1bmN0aW9uKG4sYSl7US5mbltuXT1mdW5jdGlvbihzKXt2YXIgYixpPTAscj1bXSxqPVEocyksbD1qLmxlbmd0aC0xO2Zvcig7aTw9bDtpKyspe2I9aT09PWw/dGhpczp0aGlzLmNsb25lKHRydWUpO1EoaltpXSlbYV0oYik7aC5hcHBseShyLGIuZ2V0KCkpfXJldHVybiB0aGlzLnB1c2hTdGFjayhyKX19KTt2YXIgUDEsUTE9e307ZnVuY3Rpb24gUjEobixhKXt2YXIgcyxiPVEoYS5jcmVhdGVFbGVtZW50KG4pKS5hcHBlbmRUbyhhLmJvZHkpLGo9dy5nZXREZWZhdWx0Q29tcHV0ZWRTdHlsZSYmKHM9dy5nZXREZWZhdWx0Q29tcHV0ZWRTdHlsZShiWzBdKSk/cy5kaXNwbGF5OlEuY3NzKGJbMF0sImRpc3BsYXkiKTtiLmRldGFjaCgpO3JldHVybiBqfWZ1bmN0aW9uIFMxKG4pe3ZhciBhPUosYj1RMVtuXTtpZighYil7Yj1SMShuLGEpO2lmKGI9PT0ibm9uZSJ8fCFiKXtQMT0oUDF8fFEoIjxpZnJhbWUgZnJhbWVib3JkZXI9JzAnIHdpZHRoPScwJyBoZWlnaHQ9JzAnLz4iKSkuYXBwZW5kVG8oYS5kb2N1bWVudEVsZW1lbnQpO2E9KFAxWzBdLmNvbnRlbnRXaW5kb3d8fFAxWzBdLmNvbnRlbnREb2N1bWVudCkuZG9jdW1lbnQ7YS53cml0ZSgpO2EuY2xvc2UoKTtiPVIxKG4sYSk7UDEuZGV0YWNoKCl9UTFbbl09Yn1yZXR1cm4gYn0oZnVuY3Rpb24oKXt2YXIgczt4LnNocmlua1dyYXBCbG9ja3M9ZnVuY3Rpb24oKXtpZihzIT1udWxsKXtyZXR1cm4gc31zPWZhbHNlO3ZhciBhLGIsajtiPUouZ2V0RWxlbWVudHNCeVRhZ05hbWUoImJvZHkiKVswXTtpZighYnx8IWIuc3R5bGUpe3JldHVybn1hPUouY3JlYXRlRWxlbWVudCgiZGl2Iik7aj1KLmNyZWF0ZUVsZW1lbnQoImRpdiIpO2ouc3R5bGUuY3NzVGV4dD0icG9zaXRpb246YWJzb2x1dGU7Ym9yZGVyOjA7d2lkdGg6MDtoZWlnaHQ6MDt0b3A6MDtsZWZ0Oi05OTk5cHgiO2IuYXBwZW5kQ2hpbGQoaikuYXBwZW5kQ2hpbGQoYSk7aWYodHlwZW9mIGEuc3R5bGUuem9vbSE9PVgpe2Euc3R5bGUuY3NzVGV4dD0iLXdlYmtpdC1ib3gtc2l6aW5nOmNvbnRlbnQtYm94Oy1tb3otYm94LXNpemluZzpjb250ZW50LWJveDsiKyJib3gtc2l6aW5nOmNvbnRlbnQtYm94O2Rpc3BsYXk6YmxvY2s7bWFyZ2luOjA7Ym9yZGVyOjA7IisicGFkZGluZzoxcHg7d2lkdGg6MXB4O3pvb206MSI7YS5hcHBlbmRDaGlsZChKLmNyZWF0ZUVsZW1lbnQoImRpdiIpKS5zdHlsZS53aWR0aD0iNXB4IjtzPWEub2Zmc2V0V2lkdGghPT0zfWIucmVtb3ZlQ2hpbGQoaik7cmV0dXJuIHN9fSkoKTt2YXIgVDE9KC9ebWFyZ2luLyk7dmFyIFUxPW5ldyBSZWdFeHAoIl4oIitkMSsiKSg/IXB4KVthLXolXSskIiwiaSIpO3ZhciBWMSxXMSxYMT0vXih0b3B8cmlnaHR8Ym90dG9tfGxlZnQpJC87aWYody5nZXRDb21wdXRlZFN0eWxlKXtWMT1mdW5jdGlvbihhKXtyZXR1cm4gYS5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3LmdldENvbXB1dGVkU3R5bGUoYSxudWxsKX07VzE9ZnVuY3Rpb24oYSxuLGIpe3ZhciBqLG0sbCxyLHM9YS5zdHlsZTtiPWJ8fFYxKGEpO3I9Yj9iLmdldFByb3BlcnR5VmFsdWUobil8fGJbbl06dW5kZWZpbmVkO2lmKGIpe2lmKHI9PT0iIiYmIVEuY29udGFpbnMoYS5vd25lckRvY3VtZW50LGEpKXtyPVEuc3R5bGUoYSxuKX1pZihVMS50ZXN0KHIpJiZUMS50ZXN0KG4pKXtqPXMud2lkdGg7bT1zLm1pbldpZHRoO2w9cy5tYXhXaWR0aDtzLm1pbldpZHRoPXMubWF4V2lkdGg9cy53aWR0aD1yO3I9Yi53aWR0aDtzLndpZHRoPWo7cy5taW5XaWR0aD1tO3MubWF4V2lkdGg9bH19cmV0dXJuIHI9PT11bmRlZmluZWQ/cjpyKyIifX1lbHNlIGlmKEouZG9jdW1lbnRFbGVtZW50LmN1cnJlbnRTdHlsZSl7VjE9ZnVuY3Rpb24oYSl7cmV0dXJuIGEuY3VycmVudFN0eWxlfTtXMT1mdW5jdGlvbihhLG4sYil7dmFyIGwscixqLG0scz1hLnN0eWxlO2I9Ynx8VjEoYSk7bT1iP2Jbbl06dW5kZWZpbmVkO2lmKG09PW51bGwmJnMmJnNbbl0pe209c1tuXX1pZihVMS50ZXN0KG0pJiYhWDEudGVzdChuKSl7bD1zLmxlZnQ7cj1hLnJ1bnRpbWVTdHlsZTtqPXImJnIubGVmdDtpZihqKXtyLmxlZnQ9YS5jdXJyZW50U3R5bGUubGVmdH1zLmxlZnQ9bj09PSJmb250U2l6ZSI/IjFlbSI6bTttPXMucGl4ZWxMZWZ0KyJweCI7cy5sZWZ0PWw7aWYoail7ci5sZWZ0PWp9fXJldHVybiBtPT09dW5kZWZpbmVkP206bSsiInx8ImF1dG8ifX1mdW5jdGlvbiBZMShhLGIpe3JldHVybntnZXQ6ZnVuY3Rpb24oKXt2YXIgaj1hKCk7aWYoaj09bnVsbCl7cmV0dXJufWlmKGope2RlbGV0ZSB0aGlzLmdldDtyZXR1cm59cmV0dXJuKHRoaXMuZ2V0PWIpLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19fShmdW5jdGlvbigpe3ZhciBiLHMsYSxwLGoscixsO2I9Si5jcmVhdGVFbGVtZW50KCJkaXYiKTtiLmlubmVySFRNTD0iICA8bGluay8+PHRhYmxlPjwvdGFibGU+PGEgaHJlZj0nL2EnPmE8L2E+PGlucHV0IHR5cGU9J2NoZWNrYm94Jy8+IjthPWIuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImEiKVswXTtzPWEmJmEuc3R5bGU7aWYoIXMpe3JldHVybn1zLmNzc1RleHQ9ImZsb2F0OmxlZnQ7b3BhY2l0eTouNSI7eC5vcGFjaXR5PXMub3BhY2l0eT09PSIwLjUiO3guY3NzRmxvYXQ9ISFzLmNzc0Zsb2F0O2Iuc3R5bGUuYmFja2dyb3VuZENsaXA9ImNvbnRlbnQtYm94IjtiLmNsb25lTm9kZSh0cnVlKS5zdHlsZS5iYWNrZ3JvdW5kQ2xpcD0iIjt4LmNsZWFyQ2xvbmVTdHlsZT1iLnN0eWxlLmJhY2tncm91bmRDbGlwPT09ImNvbnRlbnQtYm94Ijt4LmJveFNpemluZz1zLmJveFNpemluZz09PSIifHxzLk1vekJveFNpemluZz09PSIifHxzLldlYmtpdEJveFNpemluZz09PSIiO1EuZXh0ZW5kKHgse3JlbGlhYmxlSGlkZGVuT2Zmc2V0czpmdW5jdGlvbigpe2lmKHI9PW51bGwpe20oKX1yZXR1cm4gcn0sYm94U2l6aW5nUmVsaWFibGU6ZnVuY3Rpb24oKXtpZihqPT1udWxsKXttKCl9cmV0dXJuIGp9LHBpeGVsUG9zaXRpb246ZnVuY3Rpb24oKXtpZihwPT1udWxsKXttKCl9cmV0dXJuIHB9LHJlbGlhYmxlTWFyZ2luUmlnaHQ6ZnVuY3Rpb24oKXtpZihsPT1udWxsKXttKCl9cmV0dXJuIGx9fSk7ZnVuY3Rpb24gbSgpe3ZhciBiLG4sdCx2O249Si5nZXRFbGVtZW50c0J5VGFnTmFtZSgiYm9keSIpWzBdO2lmKCFufHwhbi5zdHlsZSl7cmV0dXJufWI9Si5jcmVhdGVFbGVtZW50KCJkaXYiKTt0PUouY3JlYXRlRWxlbWVudCgiZGl2Iik7dC5zdHlsZS5jc3NUZXh0PSJwb3NpdGlvbjphYnNvbHV0ZTtib3JkZXI6MDt3aWR0aDowO2hlaWdodDowO3RvcDowO2xlZnQ6LTk5OTlweCI7bi5hcHBlbmRDaGlsZCh0KS5hcHBlbmRDaGlsZChiKTtiLnN0eWxlLmNzc1RleHQ9Ii13ZWJraXQtYm94LXNpemluZzpib3JkZXItYm94Oy1tb3otYm94LXNpemluZzpib3JkZXItYm94OyIrImJveC1zaXppbmc6Ym9yZGVyLWJveDtkaXNwbGF5OmJsb2NrO21hcmdpbi10b3A6MSU7dG9wOjElOyIrImJvcmRlcjoxcHg7cGFkZGluZzoxcHg7d2lkdGg6NHB4O3Bvc2l0aW9uOmFic29sdXRlIjtwPWo9ZmFsc2U7bD10cnVlO2lmKHcuZ2V0Q29tcHV0ZWRTdHlsZSl7cD0ody5nZXRDb21wdXRlZFN0eWxlKGIsbnVsbCl8fHt9KS50b3AhPT0iMSUiO2o9KHcuZ2V0Q29tcHV0ZWRTdHlsZShiLG51bGwpfHx7d2lkdGg6IjRweCJ9KS53aWR0aD09PSI0cHgiO3Y9Yi5hcHBlbmRDaGlsZChKLmNyZWF0ZUVsZW1lbnQoImRpdiIpKTt2LnN0eWxlLmNzc1RleHQ9Yi5zdHlsZS5jc3NUZXh0PSItd2Via2l0LWJveC1zaXppbmc6Y29udGVudC1ib3g7LW1vei1ib3gtc2l6aW5nOmNvbnRlbnQtYm94OyIrImJveC1zaXppbmc6Y29udGVudC1ib3g7ZGlzcGxheTpibG9jazttYXJnaW46MDtib3JkZXI6MDtwYWRkaW5nOjAiO3Yuc3R5bGUubWFyZ2luUmlnaHQ9di5zdHlsZS53aWR0aD0iMCI7Yi5zdHlsZS53aWR0aD0iMXB4IjtsPSFwYXJzZUZsb2F0KCh3LmdldENvbXB1dGVkU3R5bGUodixudWxsKXx8e30pLm1hcmdpblJpZ2h0KX1iLmlubmVySFRNTD0iPHRhYmxlPjx0cj48dGQ+PC90ZD48dGQ+dDwvdGQ+PC90cj48L3RhYmxlPiI7dj1iLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJ0ZCIpO3ZbMF0uc3R5bGUuY3NzVGV4dD0ibWFyZ2luOjA7Ym9yZGVyOjA7cGFkZGluZzowO2Rpc3BsYXk6bm9uZSI7cj12WzBdLm9mZnNldEhlaWdodD09PTA7aWYocil7dlswXS5zdHlsZS5kaXNwbGF5PSIiO3ZbMV0uc3R5bGUuZGlzcGxheT0ibm9uZSI7cj12WzBdLm9mZnNldEhlaWdodD09PTB9bi5yZW1vdmVDaGlsZCh0KX19KSgpO1Euc3dhcD1mdW5jdGlvbihhLGIsaixsKXt2YXIgcixuLG09e307Zm9yKG4gaW4gYil7bVtuXT1hLnN0eWxlW25dO2Euc3R5bGVbbl09YltuXX1yPWouYXBwbHkoYSxsfHxbXSk7Zm9yKG4gaW4gYil7YS5zdHlsZVtuXT1tW25dfXJldHVybiByfTt2YXIgWjE9L2FscGhhXChbXildKlwpL2ksJDE9L29wYWNpdHlccyo9XHMqKFteKV0qKS8sXzE9L14obm9uZXx0YWJsZSg/IS1jW2VhXSkuKykvLGEyPW5ldyBSZWdFeHAoIl4oIitkMSsiKSguKikkIiwiaSIpLGIyPW5ldyBSZWdFeHAoIl4oWystXSk9KCIrZDErIikiLCJpIiksYzI9e3Bvc2l0aW9uOiJhYnNvbHV0ZSIsdmlzaWJpbGl0eToiaGlkZGVuIixkaXNwbGF5OiJibG9jayJ9LGQyPXtsZXR0ZXJTcGFjaW5nOiIwIixmb250V2VpZ2h0OiI0MDAifSxlMj1bIldlYmtpdCIsIk8iLCJNb3oiLCJtcyJdO2Z1bmN0aW9uIGYyKHMsbil7aWYobiBpbiBzKXtyZXR1cm4gbn12YXIgYT1uLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpK24uc2xpY2UoMSksYj1uLGk9ZTIubGVuZ3RoO3doaWxlKGktLSl7bj1lMltpXSthO2lmKG4gaW4gcyl7cmV0dXJuIG59fXJldHVybiBifWZ1bmN0aW9uIGcyKGEscyl7dmFyIGIsaixsLHY9W10sbT0wLG49YS5sZW5ndGg7Zm9yKDttPG47bSsrKXtqPWFbbV07aWYoIWouc3R5bGUpe2NvbnRpbnVlfXZbbV09US5fZGF0YShqLCJvbGRkaXNwbGF5Iik7Yj1qLnN0eWxlLmRpc3BsYXk7aWYocyl7aWYoIXZbbV0mJmI9PT0ibm9uZSIpe2ouc3R5bGUuZGlzcGxheT0iIn1pZihqLnN0eWxlLmRpc3BsYXk9PT0iIiYmZjEoaikpe3ZbbV09US5fZGF0YShqLCJvbGRkaXNwbGF5IixTMShqLm5vZGVOYW1lKSl9fWVsc2V7bD1mMShqKTtpZihiJiZiIT09Im5vbmUifHwhbCl7US5fZGF0YShqLCJvbGRkaXNwbGF5IixsP2I6US5jc3MoaiwiZGlzcGxheSIpKX19fWZvcihtPTA7bTxuO20rKyl7aj1hW21dO2lmKCFqLnN0eWxlKXtjb250aW51ZX1pZighc3x8ai5zdHlsZS5kaXNwbGF5PT09Im5vbmUifHxqLnN0eWxlLmRpc3BsYXk9PT0iIil7ai5zdHlsZS5kaXNwbGF5PXM/dlttXXx8IiI6Im5vbmUifX1yZXR1cm4gYX1mdW5jdGlvbiBoMihhLHYscyl7dmFyIG09YTIuZXhlYyh2KTtyZXR1cm4gbT9NYXRoLm1heCgwLG1bMV0tKHN8fDApKSsobVsyXXx8InB4Iik6dn1mdW5jdGlvbiBpMihhLG4sYixqLHMpe3ZhciBpPWI9PT0oaj8iYm9yZGVyIjoiY29udGVudCIpPzQ6bj09PSJ3aWR0aCI/MTowLHY9MDtmb3IoO2k8NDtpKz0yKXtpZihiPT09Im1hcmdpbiIpe3YrPVEuY3NzKGEsYitlMVtpXSx0cnVlLHMpfWlmKGope2lmKGI9PT0iY29udGVudCIpe3YtPVEuY3NzKGEsInBhZGRpbmciK2UxW2ldLHRydWUscyl9aWYoYiE9PSJtYXJnaW4iKXt2LT1RLmNzcyhhLCJib3JkZXIiK2UxW2ldKyJXaWR0aCIsdHJ1ZSxzKX19ZWxzZXt2Kz1RLmNzcyhhLCJwYWRkaW5nIitlMVtpXSx0cnVlLHMpO2lmKGIhPT0icGFkZGluZyIpe3YrPVEuY3NzKGEsImJvcmRlciIrZTFbaV0rIldpZHRoIix0cnVlLHMpfX19cmV0dXJuIHZ9ZnVuY3Rpb24gajIoYSxuLGIpe3ZhciB2PXRydWUsaj1uPT09IndpZHRoIj9hLm9mZnNldFdpZHRoOmEub2Zmc2V0SGVpZ2h0LHM9VjEoYSksbD14LmJveFNpemluZyYmUS5jc3MoYSwiYm94U2l6aW5nIixmYWxzZSxzKT09PSJib3JkZXItYm94IjtpZihqPD0wfHxqPT1udWxsKXtqPVcxKGEsbixzKTtpZihqPDB8fGo9PW51bGwpe2o9YS5zdHlsZVtuXX1pZihVMS50ZXN0KGopKXtyZXR1cm4gan12PWwmJih4LmJveFNpemluZ1JlbGlhYmxlKCl8fGo9PT1hLnN0eWxlW25dKTtqPXBhcnNlRmxvYXQoail8fDB9cmV0dXJuKGoraTIoYSxuLGJ8fChsPyJib3JkZXIiOiJjb250ZW50IiksdixzKSkrInB4In1RLmV4dGVuZCh7Y3NzSG9va3M6e29wYWNpdHk6e2dldDpmdW5jdGlvbihhLGIpe2lmKGIpe3ZhciByPVcxKGEsIm9wYWNpdHkiKTtyZXR1cm4gcj09PSIiPyIxIjpyfX19fSxjc3NOdW1iZXI6eyJjb2x1bW5Db3VudCI6dHJ1ZSwiZmlsbE9wYWNpdHkiOnRydWUsImZsZXhHcm93Ijp0cnVlLCJmbGV4U2hyaW5rIjp0cnVlLCJmb250V2VpZ2h0Ijp0cnVlLCJsaW5lSGVpZ2h0Ijp0cnVlLCJvcGFjaXR5Ijp0cnVlLCJvcmRlciI6dHJ1ZSwib3JwaGFucyI6dHJ1ZSwid2lkb3dzIjp0cnVlLCJ6SW5kZXgiOnRydWUsInpvb20iOnRydWV9LGNzc1Byb3BzOnsiZmxvYXQiOnguY3NzRmxvYXQ/ImNzc0Zsb2F0Ijoic3R5bGVGbG9hdCJ9LHN0eWxlOmZ1bmN0aW9uKGEsbix2LGIpe2lmKCFhfHxhLm5vZGVUeXBlPT09M3x8YS5ub2RlVHlwZT09PTh8fCFhLnN0eWxlKXtyZXR1cm59dmFyIHIsdCxqLGw9US5jYW1lbENhc2Uobikscz1hLnN0eWxlO249US5jc3NQcm9wc1tsXXx8KFEuY3NzUHJvcHNbbF09ZjIocyxsKSk7aj1RLmNzc0hvb2tzW25dfHxRLmNzc0hvb2tzW2xdO2lmKHYhPT11bmRlZmluZWQpe3Q9dHlwZW9mIHY7aWYodD09PSJzdHJpbmciJiYocj1iMi5leGVjKHYpKSl7dj0oclsxXSsxKSpyWzJdK3BhcnNlRmxvYXQoUS5jc3MoYSxuKSk7dD0ibnVtYmVyIn1pZih2PT1udWxsfHx2IT09dil7cmV0dXJufWlmKHQ9PT0ibnVtYmVyIiYmIVEuY3NzTnVtYmVyW2xdKXt2Kz0icHgifWlmKCF4LmNsZWFyQ2xvbmVTdHlsZSYmdj09PSIiJiZuLmluZGV4T2YoImJhY2tncm91bmQiKT09PTApe3Nbbl09ImluaGVyaXQifWlmKCFqfHwhKCJzZXQiaW4gail8fCh2PWouc2V0KGEsdixiKSkhPT11bmRlZmluZWQpe3RyeXtzW25dPXZ9Y2F0Y2goZSl7fX19ZWxzZXtpZihqJiYiZ2V0ImluIGomJihyPWouZ2V0KGEsZmFsc2UsYikpIT09dW5kZWZpbmVkKXtyZXR1cm4gcn1yZXR1cm4gc1tuXX19LGNzczpmdW5jdGlvbihhLG4sYixzKXt2YXIgaix2LGwsbT1RLmNhbWVsQ2FzZShuKTtuPVEuY3NzUHJvcHNbbV18fChRLmNzc1Byb3BzW21dPWYyKGEuc3R5bGUsbSkpO2w9US5jc3NIb29rc1tuXXx8US5jc3NIb29rc1ttXTtpZihsJiYiZ2V0ImluIGwpe3Y9bC5nZXQoYSx0cnVlLGIpfWlmKHY9PT11bmRlZmluZWQpe3Y9VzEoYSxuLHMpfWlmKHY9PT0ibm9ybWFsIiYmbiBpbiBkMil7dj1kMltuXX1pZihiPT09IiJ8fGIpe2o9cGFyc2VGbG9hdCh2KTtyZXR1cm4gYj09PXRydWV8fFEuaXNOdW1lcmljKGopP2p8fDA6dn1yZXR1cm4gdn19KTtRLmVhY2goWyJoZWlnaHQiLCJ3aWR0aCJdLGZ1bmN0aW9uKGksbil7US5jc3NIb29rc1tuXT17Z2V0OmZ1bmN0aW9uKGEsYixqKXtpZihiKXtyZXR1cm4gXzEudGVzdChRLmNzcyhhLCJkaXNwbGF5IikpJiZhLm9mZnNldFdpZHRoPT09MD9RLnN3YXAoYSxjMixmdW5jdGlvbigpe3JldHVybiBqMihhLG4sail9KTpqMihhLG4sail9fSxzZXQ6ZnVuY3Rpb24oYSx2LGIpe3ZhciBzPWImJlYxKGEpO3JldHVybiBoMihhLHYsYj9pMihhLG4sYix4LmJveFNpemluZyYmUS5jc3MoYSwiYm94U2l6aW5nIixmYWxzZSxzKT09PSJib3JkZXItYm94IixzKTowKX19fSk7aWYoIXgub3BhY2l0eSl7US5jc3NIb29rcy5vcGFjaXR5PXtnZXQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gJDEudGVzdCgoYiYmYS5jdXJyZW50U3R5bGU/YS5jdXJyZW50U3R5bGUuZmlsdGVyOmEuc3R5bGUuZmlsdGVyKXx8IiIpPygwLjAxKnBhcnNlRmxvYXQoUmVnRXhwLiQxKSkrIiI6Yj8iMSI6IiJ9LHNldDpmdW5jdGlvbihhLHYpe3ZhciBzPWEuc3R5bGUsYj1hLmN1cnJlbnRTdHlsZSxqPVEuaXNOdW1lcmljKHYpPyJhbHBoYShvcGFjaXR5PSIrdioxMDArIikiOiIiLGw9YiYmYi5maWx0ZXJ8fHMuZmlsdGVyfHwiIjtzLnpvb209MTtpZigodj49MXx8dj09PSIiKSYmUS50cmltKGwucmVwbGFjZShaMSwiIikpPT09IiImJnMucmVtb3ZlQXR0cmlidXRlKXtzLnJlbW92ZUF0dHJpYnV0ZSgiZmlsdGVyIik7aWYodj09PSIifHxiJiYhYi5maWx0ZXIpe3JldHVybn19cy5maWx0ZXI9WjEudGVzdChsKT9sLnJlcGxhY2UoWjEsaik6bCsiICIran19fVEuY3NzSG9va3MubWFyZ2luUmlnaHQ9WTEoeC5yZWxpYWJsZU1hcmdpblJpZ2h0LGZ1bmN0aW9uKGEsYil7aWYoYil7cmV0dXJuIFEuc3dhcChhLHsiZGlzcGxheSI6ImlubGluZS1ibG9jayJ9LFcxLFthLCJtYXJnaW5SaWdodCJdKX19KTtRLmVhY2goe21hcmdpbjoiIixwYWRkaW5nOiIiLGJvcmRlcjoiV2lkdGgifSxmdW5jdGlvbihwLHMpe1EuY3NzSG9va3NbcCtzXT17ZXhwYW5kOmZ1bmN0aW9uKHYpe3ZhciBpPTAsYT17fSxiPXR5cGVvZiB2PT09InN0cmluZyI/di5zcGxpdCgiICIpOlt2XTtmb3IoO2k8NDtpKyspe2FbcCtlMVtpXStzXT1iW2ldfHxiW2ktMl18fGJbMF19cmV0dXJuIGF9fTtpZighVDEudGVzdChwKSl7US5jc3NIb29rc1twK3NdLnNldD1oMn19KTtRLmZuLmV4dGVuZCh7Y3NzOmZ1bmN0aW9uKG4sdil7cmV0dXJuIGcxKHRoaXMsZnVuY3Rpb24oYSxuLHYpe3ZhciBzLGwsbT17fSxpPTA7aWYoUS5pc0FycmF5KG4pKXtzPVYxKGEpO2w9bi5sZW5ndGg7Zm9yKDtpPGw7aSsrKXttW25baV1dPVEuY3NzKGEsbltpXSxmYWxzZSxzKX1yZXR1cm4gbX1yZXR1cm4gdiE9PXVuZGVmaW5lZD9RLnN0eWxlKGEsbix2KTpRLmNzcyhhLG4pfSxuLHYsYXJndW1lbnRzLmxlbmd0aD4xKX0sc2hvdzpmdW5jdGlvbigpe3JldHVybiBnMih0aGlzLHRydWUpfSxoaWRlOmZ1bmN0aW9uKCl7cmV0dXJuIGcyKHRoaXMpfSx0b2dnbGU6ZnVuY3Rpb24ocyl7aWYodHlwZW9mIHM9PT0iYm9vbGVhbiIpe3JldHVybiBzP3RoaXMuc2hvdygpOnRoaXMuaGlkZSgpfXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtpZihmMSh0aGlzKSl7USh0aGlzKS5zaG93KCl9ZWxzZXtRKHRoaXMpLmhpZGUoKX19KX19KTtmdW5jdGlvbiBrMihhLGIscCxqLGwpe3JldHVybiBuZXcgazIucHJvdG90eXBlLmluaXQoYSxiLHAsaixsKX1RLlR3ZWVuPWsyO2syLnByb3RvdHlwZT17Y29uc3RydWN0b3I6azIsaW5pdDpmdW5jdGlvbihhLGIscCxqLGwsbSl7dGhpcy5lbGVtPWE7dGhpcy5wcm9wPXA7dGhpcy5lYXNpbmc9bHx8InN3aW5nIjt0aGlzLm9wdGlvbnM9Yjt0aGlzLnN0YXJ0PXRoaXMubm93PXRoaXMuY3VyKCk7dGhpcy5lbmQ9ajt0aGlzLnVuaXQ9bXx8KFEuY3NzTnVtYmVyW3BdPyIiOiJweCIpfSxjdXI6ZnVuY3Rpb24oKXt2YXIgYT1rMi5wcm9wSG9va3NbdGhpcy5wcm9wXTtyZXR1cm4gYSYmYS5nZXQ/YS5nZXQodGhpcyk6azIucHJvcEhvb2tzLl9kZWZhdWx0LmdldCh0aGlzKX0scnVuOmZ1bmN0aW9uKHApe3ZhciBhLGI9azIucHJvcEhvb2tzW3RoaXMucHJvcF07aWYodGhpcy5vcHRpb25zLmR1cmF0aW9uKXt0aGlzLnBvcz1hPVEuZWFzaW5nW3RoaXMuZWFzaW5nXShwLHRoaXMub3B0aW9ucy5kdXJhdGlvbipwLDAsMSx0aGlzLm9wdGlvbnMuZHVyYXRpb24pfWVsc2V7dGhpcy5wb3M9YT1wfXRoaXMubm93PSh0aGlzLmVuZC10aGlzLnN0YXJ0KSphK3RoaXMuc3RhcnQ7aWYodGhpcy5vcHRpb25zLnN0ZXApe3RoaXMub3B0aW9ucy5zdGVwLmNhbGwodGhpcy5lbGVtLHRoaXMubm93LHRoaXMpfWlmKGImJmIuc2V0KXtiLnNldCh0aGlzKX1lbHNle2syLnByb3BIb29rcy5fZGVmYXVsdC5zZXQodGhpcyl9cmV0dXJuIHRoaXN9fTtrMi5wcm90b3R5cGUuaW5pdC5wcm90b3R5cGU9azIucHJvdG90eXBlO2syLnByb3BIb29rcz17X2RlZmF1bHQ6e2dldDpmdW5jdGlvbih0KXt2YXIgcjtpZih0LmVsZW1bdC5wcm9wXSE9bnVsbCYmKCF0LmVsZW0uc3R5bGV8fHQuZWxlbS5zdHlsZVt0LnByb3BdPT1udWxsKSl7cmV0dXJuIHQuZWxlbVt0LnByb3BdfXI9US5jc3ModC5lbGVtLHQucHJvcCwiIik7cmV0dXJuIXJ8fHI9PT0iYXV0byI/MDpyfSxzZXQ6ZnVuY3Rpb24odCl7aWYoUS5meC5zdGVwW3QucHJvcF0pe1EuZnguc3RlcFt0LnByb3BdKHQpfWVsc2UgaWYodC5lbGVtLnN0eWxlJiYodC5lbGVtLnN0eWxlW1EuY3NzUHJvcHNbdC5wcm9wXV0hPW51bGx8fFEuY3NzSG9va3NbdC5wcm9wXSkpe1Euc3R5bGUodC5lbGVtLHQucHJvcCx0Lm5vdyt0LnVuaXQpfWVsc2V7dC5lbGVtW3QucHJvcF09dC5ub3d9fX19O2syLnByb3BIb29rcy5zY3JvbGxUb3A9azIucHJvcEhvb2tzLnNjcm9sbExlZnQ9e3NldDpmdW5jdGlvbih0KXtpZih0LmVsZW0ubm9kZVR5cGUmJnQuZWxlbS5wYXJlbnROb2RlKXt0LmVsZW1bdC5wcm9wXT10Lm5vd319fTtRLmVhc2luZz17bGluZWFyOmZ1bmN0aW9uKHApe3JldHVybiBwfSxzd2luZzpmdW5jdGlvbihwKXtyZXR1cm4gMC41LU1hdGguY29zKHAqTWF0aC5QSSkvMn19O1EuZng9azIucHJvdG90eXBlLmluaXQ7US5meC5zdGVwPXt9O3ZhciBsMixtMixuMj0vXig/OnRvZ2dsZXxzaG93fGhpZGUpJC8sbzI9bmV3IFJlZ0V4cCgiXig/OihbKy1dKT18KSgiK2QxKyIpKFthLXolXSopJCIsImkiKSxwMj0vcXVldWVIb29rcyQvLHEyPVt2Ml0scjI9eyIqIjpbZnVuY3Rpb24ocCx2KXt2YXIgdD10aGlzLmNyZWF0ZVR3ZWVuKHAsdiksYT10LmN1cigpLGI9bzIuZXhlYyh2KSxqPWImJmJbM118fChRLmNzc051bWJlcltwXT8iIjoicHgiKSxzPShRLmNzc051bWJlcltwXXx8aiE9PSJweCImJithKSYmbzIuZXhlYyhRLmNzcyh0LmVsZW0scCkpLGw9MSxtPTIwO2lmKHMmJnNbM10hPT1qKXtqPWp8fHNbM107Yj1ifHxbXTtzPSthfHwxO2Rve2w9bHx8Ii41IjtzPXMvbDtRLnN0eWxlKHQuZWxlbSxwLHMrail9d2hpbGUobCE9PShsPXQuY3VyKCkvYSkmJmwhPT0xJiYtLW0pfWlmKGIpe3M9dC5zdGFydD0rc3x8K2F8fDA7dC51bml0PWo7dC5lbmQ9YlsxXT9zKyhiWzFdKzEpKmJbMl06K2JbMl19cmV0dXJuIHR9XX07ZnVuY3Rpb24gczIoKXtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7bDI9dW5kZWZpbmVkfSk7cmV0dXJuKGwyPVEubm93KCkpfWZ1bmN0aW9uIHQyKHQsYSl7dmFyIGIsaj17aGVpZ2h0OnR9LGk9MDthPWE/MTowO2Zvcig7aTw0O2krPTItYSl7Yj1lMVtpXTtqWyJtYXJnaW4iK2JdPWpbInBhZGRpbmciK2JdPXR9aWYoYSl7ai5vcGFjaXR5PWoud2lkdGg9dH1yZXR1cm4gan1mdW5jdGlvbiB1Mih2LHAsYSl7dmFyIHQsYj0ocjJbcF18fFtdKS5jb25jYXQocjJbIioiXSksaj0wLGw9Yi5sZW5ndGg7Zm9yKDtqPGw7aisrKXtpZigodD1iW2pdLmNhbGwoYSxwLHYpKSl7cmV0dXJuIHR9fX1mdW5jdGlvbiB2MihhLHAsYil7dmFyIGosdix0LGwsbSxuLHIscyxfPXRoaXMscjM9e30sczM9YS5zdHlsZSx0Mz1hLm5vZGVUeXBlJiZmMShhKSx1Mz1RLl9kYXRhKGEsImZ4c2hvdyIpO2lmKCFiLnF1ZXVlKXttPVEuX3F1ZXVlSG9va3MoYSwiZngiKTtpZihtLnVucXVldWVkPT1udWxsKXttLnVucXVldWVkPTA7bj1tLmVtcHR5LmZpcmU7bS5lbXB0eS5maXJlPWZ1bmN0aW9uKCl7aWYoIW0udW5xdWV1ZWQpe24oKX19fW0udW5xdWV1ZWQrKztfLmFsd2F5cyhmdW5jdGlvbigpe18uYWx3YXlzKGZ1bmN0aW9uKCl7bS51bnF1ZXVlZC0tO2lmKCFRLnF1ZXVlKGEsImZ4IikubGVuZ3RoKXttLmVtcHR5LmZpcmUoKX19KX0pfWlmKGEubm9kZVR5cGU9PT0xJiYoImhlaWdodCJpbiBwfHwid2lkdGgiaW4gcCkpe2Iub3ZlcmZsb3c9W3MzLm92ZXJmbG93LHMzLm92ZXJmbG93WCxzMy5vdmVyZmxvd1ldO3I9US5jc3MoYSwiZGlzcGxheSIpO3M9cj09PSJub25lIj9RLl9kYXRhKGEsIm9sZGRpc3BsYXkiKXx8UzEoYS5ub2RlTmFtZSk6cjtpZihzPT09ImlubGluZSImJlEuY3NzKGEsImZsb2F0Iik9PT0ibm9uZSIpe2lmKCF4LmlubGluZUJsb2NrTmVlZHNMYXlvdXR8fFMxKGEubm9kZU5hbWUpPT09ImlubGluZSIpe3MzLmRpc3BsYXk9ImlubGluZS1ibG9jayJ9ZWxzZXtzMy56b29tPTF9fX1pZihiLm92ZXJmbG93KXtzMy5vdmVyZmxvdz0iaGlkZGVuIjtpZigheC5zaHJpbmtXcmFwQmxvY2tzKCkpe18uYWx3YXlzKGZ1bmN0aW9uKCl7czMub3ZlcmZsb3c9Yi5vdmVyZmxvd1swXTtzMy5vdmVyZmxvd1g9Yi5vdmVyZmxvd1sxXTtzMy5vdmVyZmxvd1k9Yi5vdmVyZmxvd1syXX0pfX1mb3IoaiBpbiBwKXt2PXBbal07aWYobjIuZXhlYyh2KSl7ZGVsZXRlIHBbal07dD10fHx2PT09InRvZ2dsZSI7aWYodj09PSh0Mz8iaGlkZSI6InNob3ciKSl7aWYodj09PSJzaG93IiYmdTMmJnUzW2pdIT09dW5kZWZpbmVkKXt0Mz10cnVlfWVsc2V7Y29udGludWV9fXIzW2pdPXUzJiZ1M1tqXXx8US5zdHlsZShhLGopfWVsc2V7cj11bmRlZmluZWR9fWlmKCFRLmlzRW1wdHlPYmplY3QocjMpKXtpZih1Myl7aWYoImhpZGRlbiJpbiB1Myl7dDM9dTMuaGlkZGVufX1lbHNle3UzPVEuX2RhdGEoYSwiZnhzaG93Iix7fSl9aWYodCl7dTMuaGlkZGVuPSF0M31pZih0Myl7UShhKS5zaG93KCl9ZWxzZXtfLmRvbmUoZnVuY3Rpb24oKXtRKGEpLmhpZGUoKX0pfV8uZG9uZShmdW5jdGlvbigpe3ZhciBqO1EuX3JlbW92ZURhdGEoYSwiZnhzaG93Iik7Zm9yKGogaW4gcjMpe1Euc3R5bGUoYSxqLHIzW2pdKX19KTtmb3IoaiBpbiByMyl7bD11Mih0Mz91M1tqXTowLGosXyk7aWYoIShqIGluIHUzKSl7dTNbal09bC5zdGFydDtpZih0Myl7bC5lbmQ9bC5zdGFydDtsLnN0YXJ0PWo9PT0id2lkdGgifHxqPT09ImhlaWdodCI/MTowfX19fWVsc2UgaWYoKHI9PT0ibm9uZSI/UzEoYS5ub2RlTmFtZSk6cik9PT0iaW5saW5lIil7czMuZGlzcGxheT1yfX1mdW5jdGlvbiB3MihwLHMpe3ZhciBhLG4sYix2LGo7Zm9yKGEgaW4gcCl7bj1RLmNhbWVsQ2FzZShhKTtiPXNbbl07dj1wW2FdO2lmKFEuaXNBcnJheSh2KSl7Yj12WzFdO3Y9cFthXT12WzBdfWlmKGEhPT1uKXtwW25dPXY7ZGVsZXRlIHBbYV19aj1RLmNzc0hvb2tzW25dO2lmKGomJiJleHBhbmQiaW4gail7dj1qLmV4cGFuZCh2KTtkZWxldGUgcFtuXTtmb3IoYSBpbiB2KXtpZighKGEgaW4gcCkpe3BbYV09dlthXTtzW2FdPWJ9fX1lbHNle3Nbbl09Yn19fWZ1bmN0aW9uIHgyKGEscCxiKXt2YXIgcixzLGo9MCxsPXEyLmxlbmd0aCxtPVEuRGVmZXJyZWQoKS5hbHdheXMoZnVuY3Rpb24oKXtkZWxldGUgdC5lbGVtfSksdD1mdW5jdGlvbigpe2lmKHMpe3JldHVybiBmYWxzZX12YXIgXz1sMnx8czIoKSxyMz1NYXRoLm1heCgwLG4uc3RhcnRUaW1lK24uZHVyYXRpb24tXyksczM9cjMvbi5kdXJhdGlvbnx8MCx0Mz0xLXMzLGo9MCxsPW4udHdlZW5zLmxlbmd0aDtmb3IoO2o8bDtqKyspe24udHdlZW5zW2pdLnJ1bih0Myl9bS5ub3RpZnlXaXRoKGEsW24sdDMscjNdKTtpZih0MzwxJiZsKXtyZXR1cm4gcjN9ZWxzZXttLnJlc29sdmVXaXRoKGEsW25dKTtyZXR1cm4gZmFsc2V9fSxuPW0ucHJvbWlzZSh7ZWxlbTphLHByb3BzOlEuZXh0ZW5kKHt9LHApLG9wdHM6US5leHRlbmQodHJ1ZSx7c3BlY2lhbEVhc2luZzp7fX0sYiksb3JpZ2luYWxQcm9wZXJ0aWVzOnAsb3JpZ2luYWxPcHRpb25zOmIsc3RhcnRUaW1lOmwyfHxzMigpLGR1cmF0aW9uOmIuZHVyYXRpb24sdHdlZW5zOltdLGNyZWF0ZVR3ZWVuOmZ1bmN0aW9uKF8scjMpe3ZhciBzMz1RLlR3ZWVuKGEsbi5vcHRzLF8scjMsbi5vcHRzLnNwZWNpYWxFYXNpbmdbX118fG4ub3B0cy5lYXNpbmcpO24udHdlZW5zLnB1c2goczMpO3JldHVybiBzM30sc3RvcDpmdW5jdGlvbihfKXt2YXIgaj0wLGw9Xz9uLnR3ZWVucy5sZW5ndGg6MDtpZihzKXtyZXR1cm4gdGhpc31zPXRydWU7Zm9yKDtqPGw7aisrKXtuLnR3ZWVuc1tqXS5ydW4oMSl9aWYoXyl7bS5yZXNvbHZlV2l0aChhLFtuLF9dKX1lbHNle20ucmVqZWN0V2l0aChhLFtuLF9dKX1yZXR1cm4gdGhpc319KSx2PW4ucHJvcHM7dzIodixuLm9wdHMuc3BlY2lhbEVhc2luZyk7Zm9yKDtqPGw7aisrKXtyPXEyW2pdLmNhbGwobixhLHYsbi5vcHRzKTtpZihyKXtyZXR1cm4gcn19US5tYXAodix1MixuKTtpZihRLmlzRnVuY3Rpb24obi5vcHRzLnN0YXJ0KSl7bi5vcHRzLnN0YXJ0LmNhbGwoYSxuKX1RLmZ4LnRpbWVyKFEuZXh0ZW5kKHQse2VsZW06YSxhbmltOm4scXVldWU6bi5vcHRzLnF1ZXVlfSkpO3JldHVybiBuLnByb2dyZXNzKG4ub3B0cy5wcm9ncmVzcykuZG9uZShuLm9wdHMuZG9uZSxuLm9wdHMuY29tcGxldGUpLmZhaWwobi5vcHRzLmZhaWwpLmFsd2F5cyhuLm9wdHMuYWx3YXlzKX1RLkFuaW1hdGlvbj1RLmV4dGVuZCh4Mix7dHdlZW5lcjpmdW5jdGlvbihwLGEpe2lmKFEuaXNGdW5jdGlvbihwKSl7YT1wO3A9WyIqIl19ZWxzZXtwPXAuc3BsaXQoIiAiKX12YXIgYixqPTAsbD1wLmxlbmd0aDtmb3IoO2o8bDtqKyspe2I9cFtqXTtyMltiXT1yMltiXXx8W107cjJbYl0udW5zaGlmdChhKX19LHByZWZpbHRlcjpmdW5jdGlvbihhLHApe2lmKHApe3EyLnVuc2hpZnQoYSl9ZWxzZXtxMi5wdXNoKGEpfX19KTtRLnNwZWVkPWZ1bmN0aW9uKHMsYSxiKXt2YXIgaj1zJiZ0eXBlb2Ygcz09PSJvYmplY3QiP1EuZXh0ZW5kKHt9LHMpOntjb21wbGV0ZTpifHwhYiYmYXx8US5pc0Z1bmN0aW9uKHMpJiZzLGR1cmF0aW9uOnMsZWFzaW5nOmImJmF8fGEmJiFRLmlzRnVuY3Rpb24oYSkmJmF9O2ouZHVyYXRpb249US5meC5vZmY/MDp0eXBlb2Ygai5kdXJhdGlvbj09PSJudW1iZXIiP2ouZHVyYXRpb246ai5kdXJhdGlvbiBpbiBRLmZ4LnNwZWVkcz9RLmZ4LnNwZWVkc1tqLmR1cmF0aW9uXTpRLmZ4LnNwZWVkcy5fZGVmYXVsdDtpZihqLnF1ZXVlPT1udWxsfHxqLnF1ZXVlPT09dHJ1ZSl7ai5xdWV1ZT0iZngifWoub2xkPWouY29tcGxldGU7ai5jb21wbGV0ZT1mdW5jdGlvbigpe2lmKFEuaXNGdW5jdGlvbihqLm9sZCkpe2oub2xkLmNhbGwodGhpcyl9aWYoai5xdWV1ZSl7US5kZXF1ZXVlKHRoaXMsai5xdWV1ZSl9fTtyZXR1cm4gan07US5mbi5leHRlbmQoe2ZhZGVUbzpmdW5jdGlvbihzLHQsYSxiKXtyZXR1cm4gdGhpcy5maWx0ZXIoZjEpLmNzcygib3BhY2l0eSIsMCkuc2hvdygpLmVuZCgpLmFuaW1hdGUoe29wYWNpdHk6dH0scyxhLGIpfSxhbmltYXRlOmZ1bmN0aW9uKHAscyxhLGIpe3ZhciBqPVEuaXNFbXB0eU9iamVjdChwKSxsPVEuc3BlZWQocyxhLGIpLG09ZnVuY3Rpb24oKXt2YXIgbj14Mih0aGlzLFEuZXh0ZW5kKHt9LHApLGwpO2lmKGp8fFEuX2RhdGEodGhpcywiZmluaXNoIikpe24uc3RvcCh0cnVlKX19O20uZmluaXNoPW07cmV0dXJuIGp8fGwucXVldWU9PT1mYWxzZT90aGlzLmVhY2gobSk6dGhpcy5xdWV1ZShsLnF1ZXVlLG0pfSxzdG9wOmZ1bmN0aW9uKHQsYSxiKXt2YXIgcz1mdW5jdGlvbihqKXt2YXIgbD1qLnN0b3A7ZGVsZXRlIGouc3RvcDtsKGIpfTtpZih0eXBlb2YgdCE9PSJzdHJpbmciKXtiPWE7YT10O3Q9dW5kZWZpbmVkfWlmKGEmJnQhPT1mYWxzZSl7dGhpcy5xdWV1ZSh0fHwiZngiLFtdKX1yZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGo9dHJ1ZSxsPXQhPW51bGwmJnQrInF1ZXVlSG9va3MiLG09US50aW1lcnMsbj1RLl9kYXRhKHRoaXMpO2lmKGwpe2lmKG5bbF0mJm5bbF0uc3RvcCl7cyhuW2xdKX19ZWxzZXtmb3IobCBpbiBuKXtpZihuW2xdJiZuW2xdLnN0b3AmJnAyLnRlc3QobCkpe3MobltsXSl9fX1mb3IobD1tLmxlbmd0aDtsLS07KXtpZihtW2xdLmVsZW09PT10aGlzJiYodD09bnVsbHx8bVtsXS5xdWV1ZT09PXQpKXttW2xdLmFuaW0uc3RvcChiKTtqPWZhbHNlO20uc3BsaWNlKGwsMSl9fWlmKGp8fCFiKXtRLmRlcXVldWUodGhpcyx0KX19KX0sZmluaXNoOmZ1bmN0aW9uKHQpe2lmKHQhPT1mYWxzZSl7dD10fHwiZngifXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgYSxiPVEuX2RhdGEodGhpcyksaj1iW3QrInF1ZXVlIl0sbD1iW3QrInF1ZXVlSG9va3MiXSxtPVEudGltZXJzLG49aj9qLmxlbmd0aDowO2IuZmluaXNoPXRydWU7US5xdWV1ZSh0aGlzLHQsW10pO2lmKGwmJmwuc3RvcCl7bC5zdG9wLmNhbGwodGhpcyx0cnVlKX1mb3IoYT1tLmxlbmd0aDthLS07KXtpZihtW2FdLmVsZW09PT10aGlzJiZtW2FdLnF1ZXVlPT09dCl7bVthXS5hbmltLnN0b3AodHJ1ZSk7bS5zcGxpY2UoYSwxKX19Zm9yKGE9MDthPG47YSsrKXtpZihqW2FdJiZqW2FdLmZpbmlzaCl7althXS5maW5pc2guY2FsbCh0aGlzKX19ZGVsZXRlIGIuZmluaXNofSl9fSk7US5lYWNoKFsidG9nZ2xlIiwic2hvdyIsImhpZGUiXSxmdW5jdGlvbihpLG4pe3ZhciBhPVEuZm5bbl07US5mbltuXT1mdW5jdGlvbihzLGIsail7cmV0dXJuIHM9PW51bGx8fHR5cGVvZiBzPT09ImJvb2xlYW4iP2EuYXBwbHkodGhpcyxhcmd1bWVudHMpOnRoaXMuYW5pbWF0ZSh0MihuLHRydWUpLHMsYixqKX19KTtRLmVhY2goe3NsaWRlRG93bjp0Migic2hvdyIpLHNsaWRlVXA6dDIoImhpZGUiKSxzbGlkZVRvZ2dsZTp0MigidG9nZ2xlIiksZmFkZUluOntvcGFjaXR5OiJzaG93In0sZmFkZU91dDp7b3BhY2l0eToiaGlkZSJ9LGZhZGVUb2dnbGU6e29wYWNpdHk6InRvZ2dsZSJ9fSxmdW5jdGlvbihuLHApe1EuZm5bbl09ZnVuY3Rpb24ocyxhLGIpe3JldHVybiB0aGlzLmFuaW1hdGUocCxzLGEsYil9fSk7US50aW1lcnM9W107US5meC50aWNrPWZ1bmN0aW9uKCl7dmFyIHQsYT1RLnRpbWVycyxpPTA7bDI9US5ub3coKTtmb3IoO2k8YS5sZW5ndGg7aSsrKXt0PWFbaV07aWYoIXQoKSYmYVtpXT09PXQpe2Euc3BsaWNlKGktLSwxKX19aWYoIWEubGVuZ3RoKXtRLmZ4LnN0b3AoKX1sMj11bmRlZmluZWR9O1EuZngudGltZXI9ZnVuY3Rpb24odCl7US50aW1lcnMucHVzaCh0KTtpZih0KCkpe1EuZnguc3RhcnQoKX1lbHNle1EudGltZXJzLnBvcCgpfX07US5meC5pbnRlcnZhbD0xMztRLmZ4LnN0YXJ0PWZ1bmN0aW9uKCl7aWYoIW0yKXttMj1zZXRJbnRlcnZhbChRLmZ4LnRpY2ssUS5meC5pbnRlcnZhbCl9fTtRLmZ4LnN0b3A9ZnVuY3Rpb24oKXtjbGVhckludGVydmFsKG0yKTttMj1udWxsfTtRLmZ4LnNwZWVkcz17c2xvdzo2MDAsZmFzdDoyMDAsX2RlZmF1bHQ6NDAwfTtRLmZuLmRlbGF5PWZ1bmN0aW9uKHQsYSl7dD1RLmZ4P1EuZnguc3BlZWRzW3RdfHx0OnQ7YT1hfHwiZngiO3JldHVybiB0aGlzLnF1ZXVlKGEsZnVuY3Rpb24obixiKXt2YXIgaj1zZXRUaW1lb3V0KG4sdCk7Yi5zdG9wPWZ1bmN0aW9uKCl7Y2xlYXJUaW1lb3V0KGopfX0pfTsoZnVuY3Rpb24oKXt2YXIgYixqLHMsYSxsO2o9Si5jcmVhdGVFbGVtZW50KCJkaXYiKTtqLnNldEF0dHJpYnV0ZSgiY2xhc3NOYW1lIiwidCIpO2ouaW5uZXJIVE1MPSIgIDxsaW5rLz48dGFibGU+PC90YWJsZT48YSBocmVmPScvYSc+YTwvYT48aW5wdXQgdHlwZT0nY2hlY2tib3gnLz4iO2E9ai5nZXRFbGVtZW50c0J5VGFnTmFtZSgiYSIpWzBdO3M9Si5jcmVhdGVFbGVtZW50KCJzZWxlY3QiKTtsPXMuYXBwZW5kQ2hpbGQoSi5jcmVhdGVFbGVtZW50KCJvcHRpb24iKSk7Yj1qLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJpbnB1dCIpWzBdO2Euc3R5bGUuY3NzVGV4dD0idG9wOjFweCI7eC5nZXRTZXRBdHRyaWJ1dGU9ai5jbGFzc05hbWUhPT0idCI7eC5zdHlsZT0vdG9wLy50ZXN0KGEuZ2V0QXR0cmlidXRlKCJzdHlsZSIpKTt4LmhyZWZOb3JtYWxpemVkPWEuZ2V0QXR0cmlidXRlKCJocmVmIik9PT0iL2EiO3guY2hlY2tPbj0hIWIudmFsdWU7eC5vcHRTZWxlY3RlZD1sLnNlbGVjdGVkO3guZW5jdHlwZT0hIUouY3JlYXRlRWxlbWVudCgiZm9ybSIpLmVuY3R5cGU7cy5kaXNhYmxlZD10cnVlO3gub3B0RGlzYWJsZWQ9IWwuZGlzYWJsZWQ7Yj1KLmNyZWF0ZUVsZW1lbnQoImlucHV0Iik7Yi5zZXRBdHRyaWJ1dGUoInZhbHVlIiwiIik7eC5pbnB1dD1iLmdldEF0dHJpYnV0ZSgidmFsdWUiKT09PSIiO2IudmFsdWU9InQiO2Iuc2V0QXR0cmlidXRlKCJ0eXBlIiwicmFkaW8iKTt4LnJhZGlvVmFsdWU9Yi52YWx1ZT09PSJ0In0pKCk7dmFyIHkyPS9cci9nO1EuZm4uZXh0ZW5kKHt2YWw6ZnVuY3Rpb24odil7dmFyIGEscixiLGo9dGhpc1swXTtpZighYXJndW1lbnRzLmxlbmd0aCl7aWYoail7YT1RLnZhbEhvb2tzW2oudHlwZV18fFEudmFsSG9va3Nbai5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpXTtpZihhJiYiZ2V0ImluIGEmJihyPWEuZ2V0KGosInZhbHVlIikpIT09dW5kZWZpbmVkKXtyZXR1cm4gcn1yPWoudmFsdWU7cmV0dXJuIHR5cGVvZiByPT09InN0cmluZyI/ci5yZXBsYWNlKHkyLCIiKTpyPT1udWxsPyIiOnJ9cmV0dXJufWI9US5pc0Z1bmN0aW9uKHYpO3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oaSl7dmFyIGw7aWYodGhpcy5ub2RlVHlwZSE9PTEpe3JldHVybn1pZihiKXtsPXYuY2FsbCh0aGlzLGksUSh0aGlzKS52YWwoKSl9ZWxzZXtsPXZ9aWYobD09bnVsbCl7bD0iIn1lbHNlIGlmKHR5cGVvZiBsPT09Im51bWJlciIpe2wrPSIifWVsc2UgaWYoUS5pc0FycmF5KGwpKXtsPVEubWFwKGwsZnVuY3Rpb24odil7cmV0dXJuIHY9PW51bGw/IiI6disiIn0pfWE9US52YWxIb29rc1t0aGlzLnR5cGVdfHxRLnZhbEhvb2tzW3RoaXMubm9kZU5hbWUudG9Mb3dlckNhc2UoKV07aWYoIWF8fCEoInNldCJpbiBhKXx8YS5zZXQodGhpcyxsLCJ2YWx1ZSIpPT09dW5kZWZpbmVkKXt0aGlzLnZhbHVlPWx9fSl9fSk7US5leHRlbmQoe3ZhbEhvb2tzOntvcHRpb246e2dldDpmdW5jdGlvbihhKXt2YXIgdj1RLmZpbmQuYXR0cihhLCJ2YWx1ZSIpO3JldHVybiB2IT1udWxsP3Y6US50cmltKFEudGV4dChhKSl9fSxzZWxlY3Q6e2dldDpmdW5jdGlvbihhKXt2YXIgdixiLGo9YS5vcHRpb25zLGw9YS5zZWxlY3RlZEluZGV4LG09YS50eXBlPT09InNlbGVjdC1vbmUifHxsPDAsbj1tP251bGw6W10scD1tP2wrMTpqLmxlbmd0aCxpPWw8MD9wOm0/bDowO2Zvcig7aTxwO2krKyl7Yj1qW2ldO2lmKChiLnNlbGVjdGVkfHxpPT09bCkmJih4Lm9wdERpc2FibGVkPyFiLmRpc2FibGVkOmIuZ2V0QXR0cmlidXRlKCJkaXNhYmxlZCIpPT09bnVsbCkmJighYi5wYXJlbnROb2RlLmRpc2FibGVkfHwhUS5ub2RlTmFtZShiLnBhcmVudE5vZGUsIm9wdGdyb3VwIikpKXt2PVEoYikudmFsKCk7aWYobSl7cmV0dXJuIHZ9bi5wdXNoKHYpfX1yZXR1cm4gbn0sc2V0OmZ1bmN0aW9uKGEsdil7dmFyIGIsaixsPWEub3B0aW9ucyxtPVEubWFrZUFycmF5KHYpLGk9bC5sZW5ndGg7d2hpbGUoaS0tKXtqPWxbaV07aWYoUS5pbkFycmF5KFEudmFsSG9va3Mub3B0aW9uLmdldChqKSxtKT49MCl7dHJ5e2ouc2VsZWN0ZWQ9Yj10cnVlfWNhdGNoKF8pe2ouc2Nyb2xsSGVpZ2h0fX1lbHNle2ouc2VsZWN0ZWQ9ZmFsc2V9fWlmKCFiKXthLnNlbGVjdGVkSW5kZXg9LTF9cmV0dXJuIGx9fX19KTtRLmVhY2goWyJyYWRpbyIsImNoZWNrYm94Il0sZnVuY3Rpb24oKXtRLnZhbEhvb2tzW3RoaXNdPXtzZXQ6ZnVuY3Rpb24oYSx2KXtpZihRLmlzQXJyYXkodikpe3JldHVybihhLmNoZWNrZWQ9US5pbkFycmF5KFEoYSkudmFsKCksdik+PTApfX19O2lmKCF4LmNoZWNrT24pe1EudmFsSG9va3NbdGhpc10uZ2V0PWZ1bmN0aW9uKGEpe3JldHVybiBhLmdldEF0dHJpYnV0ZSgidmFsdWUiKT09PW51bGw/Im9uIjphLnZhbHVlfX19KTt2YXIgejIsQTIsQjI9US5leHByLmF0dHJIYW5kbGUsQzI9L14oPzpjaGVja2VkfHNlbGVjdGVkKSQvaSxEMj14LmdldFNldEF0dHJpYnV0ZSxFMj14LmlucHV0O1EuZm4uZXh0ZW5kKHthdHRyOmZ1bmN0aW9uKG4sdil7cmV0dXJuIGcxKHRoaXMsUS5hdHRyLG4sdixhcmd1bWVudHMubGVuZ3RoPjEpfSxyZW1vdmVBdHRyOmZ1bmN0aW9uKG4pe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtRLnJlbW92ZUF0dHIodGhpcyxuKX0pfX0pO1EuZXh0ZW5kKHthdHRyOmZ1bmN0aW9uKGEsbix2KXt2YXIgYixyLGo9YS5ub2RlVHlwZTtpZighYXx8aj09PTN8fGo9PT04fHxqPT09Mil7cmV0dXJufWlmKHR5cGVvZiBhLmdldEF0dHJpYnV0ZT09PVgpe3JldHVybiBRLnByb3AoYSxuLHYpfWlmKGohPT0xfHwhUS5pc1hNTERvYyhhKSl7bj1uLnRvTG93ZXJDYXNlKCk7Yj1RLmF0dHJIb29rc1tuXXx8KFEuZXhwci5tYXRjaC5ib29sLnRlc3Qobik/QTI6ejIpfWlmKHYhPT11bmRlZmluZWQpe2lmKHY9PT1udWxsKXtRLnJlbW92ZUF0dHIoYSxuKX1lbHNlIGlmKGImJiJzZXQiaW4gYiYmKHI9Yi5zZXQoYSx2LG4pKSE9PXVuZGVmaW5lZCl7cmV0dXJuIHJ9ZWxzZXthLnNldEF0dHJpYnV0ZShuLHYrIiIpO3JldHVybiB2fX1lbHNlIGlmKGImJiJnZXQiaW4gYiYmKHI9Yi5nZXQoYSxuKSkhPT1udWxsKXtyZXR1cm4gcn1lbHNle3I9US5maW5kLmF0dHIoYSxuKTtyZXR1cm4gcj09bnVsbD91bmRlZmluZWQ6cn19LHJlbW92ZUF0dHI6ZnVuY3Rpb24oYSx2KXt2YXIgbixwLGk9MCxiPXYmJnYubWF0Y2goUCk7aWYoYiYmYS5ub2RlVHlwZT09PTEpe3doaWxlKChuPWJbaSsrXSkpe3A9US5wcm9wRml4W25dfHxuO2lmKFEuZXhwci5tYXRjaC5ib29sLnRlc3Qobikpe2lmKEUyJiZEMnx8IUMyLnRlc3Qobikpe2FbcF09ZmFsc2V9ZWxzZXthW1EuY2FtZWxDYXNlKCJkZWZhdWx0LSIrbildPWFbcF09ZmFsc2V9fWVsc2V7US5hdHRyKGEsbiwiIil9YS5yZW1vdmVBdHRyaWJ1dGUoRDI/bjpwKX19fSxhdHRySG9va3M6e3R5cGU6e3NldDpmdW5jdGlvbihhLHYpe2lmKCF4LnJhZGlvVmFsdWUmJnY9PT0icmFkaW8iJiZRLm5vZGVOYW1lKGEsImlucHV0Iikpe3ZhciBiPWEudmFsdWU7YS5zZXRBdHRyaWJ1dGUoInR5cGUiLHYpO2lmKGIpe2EudmFsdWU9Yn1yZXR1cm4gdn19fX19KTtBMj17c2V0OmZ1bmN0aW9uKGEsdixuKXtpZih2PT09ZmFsc2Upe1EucmVtb3ZlQXR0cihhLG4pfWVsc2UgaWYoRTImJkQyfHwhQzIudGVzdChuKSl7YS5zZXRBdHRyaWJ1dGUoIUQyJiZRLnByb3BGaXhbbl18fG4sbil9ZWxzZXthW1EuY2FtZWxDYXNlKCJkZWZhdWx0LSIrbildPWFbbl09dHJ1ZX1yZXR1cm4gbn19O1EuZWFjaChRLmV4cHIubWF0Y2guYm9vbC5zb3VyY2UubWF0Y2goL1x3Ky9nKSxmdW5jdGlvbihpLG4pe3ZhciBhPUIyW25dfHxRLmZpbmQuYXR0cjtCMltuXT1FMiYmRDJ8fCFDMi50ZXN0KG4pP2Z1bmN0aW9uKGIsbixqKXt2YXIgcixsO2lmKCFqKXtsPUIyW25dO0IyW25dPXI7cj1hKGIsbixqKSE9bnVsbD9uLnRvTG93ZXJDYXNlKCk6bnVsbDtCMltuXT1sfXJldHVybiByfTpmdW5jdGlvbihiLG4sail7aWYoIWope3JldHVybiBiW1EuY2FtZWxDYXNlKCJkZWZhdWx0LSIrbildP24udG9Mb3dlckNhc2UoKTpudWxsfX19KTtpZighRTJ8fCFEMil7US5hdHRySG9va3MudmFsdWU9e3NldDpmdW5jdGlvbihhLHYsbil7aWYoUS5ub2RlTmFtZShhLCJpbnB1dCIpKXthLmRlZmF1bHRWYWx1ZT12fWVsc2V7cmV0dXJuIHoyJiZ6Mi5zZXQoYSx2LG4pfX19fWlmKCFEMil7ejI9e3NldDpmdW5jdGlvbihhLHYsbil7dmFyIHI9YS5nZXRBdHRyaWJ1dGVOb2RlKG4pO2lmKCFyKXthLnNldEF0dHJpYnV0ZU5vZGUoKHI9YS5vd25lckRvY3VtZW50LmNyZWF0ZUF0dHJpYnV0ZShuKSkpfXIudmFsdWU9dis9IiI7aWYobj09PSJ2YWx1ZSJ8fHY9PT1hLmdldEF0dHJpYnV0ZShuKSl7cmV0dXJuIHZ9fX07QjIuaWQ9QjIubmFtZT1CMi5jb29yZHM9ZnVuY3Rpb24oYSxuLGIpe3ZhciByO2lmKCFiKXtyZXR1cm4ocj1hLmdldEF0dHJpYnV0ZU5vZGUobikpJiZyLnZhbHVlIT09IiI/ci52YWx1ZTpudWxsfX07US52YWxIb29rcy5idXR0b249e2dldDpmdW5jdGlvbihhLG4pe3ZhciByPWEuZ2V0QXR0cmlidXRlTm9kZShuKTtpZihyJiZyLnNwZWNpZmllZCl7cmV0dXJuIHIudmFsdWV9fSxzZXQ6ejIuc2V0fTtRLmF0dHJIb29rcy5jb250ZW50ZWRpdGFibGU9e3NldDpmdW5jdGlvbihhLHYsbil7ejIuc2V0KGEsdj09PSIiP2ZhbHNlOnYsbil9fTtRLmVhY2goWyJ3aWR0aCIsImhlaWdodCJdLGZ1bmN0aW9uKGksbil7US5hdHRySG9va3Nbbl09e3NldDpmdW5jdGlvbihhLHYpe2lmKHY9PT0iIil7YS5zZXRBdHRyaWJ1dGUobiwiYXV0byIpO3JldHVybiB2fX19fSl9aWYoIXguc3R5bGUpe1EuYXR0ckhvb2tzLnN0eWxlPXtnZXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuc3R5bGUuY3NzVGV4dHx8dW5kZWZpbmVkfSxzZXQ6ZnVuY3Rpb24oYSx2KXtyZXR1cm4oYS5zdHlsZS5jc3NUZXh0PXYrIiIpfX19dmFyIEYyPS9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGJ1dHRvbnxvYmplY3QpJC9pLEcyPS9eKD86YXxhcmVhKSQvaTtRLmZuLmV4dGVuZCh7cHJvcDpmdW5jdGlvbihuLHYpe3JldHVybiBnMSh0aGlzLFEucHJvcCxuLHYsYXJndW1lbnRzLmxlbmd0aD4xKX0scmVtb3ZlUHJvcDpmdW5jdGlvbihuKXtuPVEucHJvcEZpeFtuXXx8bjtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dHJ5e3RoaXNbbl09dW5kZWZpbmVkO2RlbGV0ZSB0aGlzW25dfWNhdGNoKGUpe319KX19KTtRLmV4dGVuZCh7cHJvcEZpeDp7ImZvciI6Imh0bWxGb3IiLCJjbGFzcyI6ImNsYXNzTmFtZSJ9LHByb3A6ZnVuY3Rpb24oYSxuLHYpe3ZhciByLGIsaixsPWEubm9kZVR5cGU7aWYoIWF8fGw9PT0zfHxsPT09OHx8bD09PTIpe3JldHVybn1qPWwhPT0xfHwhUS5pc1hNTERvYyhhKTtpZihqKXtuPVEucHJvcEZpeFtuXXx8bjtiPVEucHJvcEhvb2tzW25dfWlmKHYhPT11bmRlZmluZWQpe3JldHVybiBiJiYic2V0ImluIGImJihyPWIuc2V0KGEsdixuKSkhPT11bmRlZmluZWQ/cjooYVtuXT12KX1lbHNle3JldHVybiBiJiYiZ2V0ImluIGImJihyPWIuZ2V0KGEsbikpIT09bnVsbD9yOmFbbl19fSxwcm9wSG9va3M6e3RhYkluZGV4OntnZXQ6ZnVuY3Rpb24oYSl7dmFyIHQ9US5maW5kLmF0dHIoYSwidGFiaW5kZXgiKTtyZXR1cm4gdD9wYXJzZUludCh0LDEwKTpGMi50ZXN0KGEubm9kZU5hbWUpfHxHMi50ZXN0KGEubm9kZU5hbWUpJiZhLmhyZWY/MDotMX19fX0pO2lmKCF4LmhyZWZOb3JtYWxpemVkKXtRLmVhY2goWyJocmVmIiwic3JjIl0sZnVuY3Rpb24oaSxuKXtRLnByb3BIb29rc1tuXT17Z2V0OmZ1bmN0aW9uKGEpe3JldHVybiBhLmdldEF0dHJpYnV0ZShuLDQpfX19KX1pZigheC5vcHRTZWxlY3RlZCl7US5wcm9wSG9va3Muc2VsZWN0ZWQ9e2dldDpmdW5jdGlvbihhKXt2YXIgcD1hLnBhcmVudE5vZGU7aWYocCl7cC5zZWxlY3RlZEluZGV4O2lmKHAucGFyZW50Tm9kZSl7cC5wYXJlbnROb2RlLnNlbGVjdGVkSW5kZXh9fXJldHVybiBudWxsfX19US5lYWNoKFsidGFiSW5kZXgiLCJyZWFkT25seSIsIm1heExlbmd0aCIsImNlbGxTcGFjaW5nIiwiY2VsbFBhZGRpbmciLCJyb3dTcGFuIiwiY29sU3BhbiIsInVzZU1hcCIsImZyYW1lQm9yZGVyIiwiY29udGVudEVkaXRhYmxlIl0sZnVuY3Rpb24oKXtRLnByb3BGaXhbdGhpcy50b0xvd2VyQ2FzZSgpXT10aGlzfSk7aWYoIXguZW5jdHlwZSl7US5wcm9wRml4LmVuY3R5cGU9ImVuY29kaW5nIn12YXIgSDI9L1tcdFxyXG5cZl0vZztRLmZuLmV4dGVuZCh7YWRkQ2xhc3M6ZnVuY3Rpb24odil7dmFyIGEsYixsLG0saixuLGk9MCxwPXRoaXMubGVuZ3RoLHI9dHlwZW9mIHY9PT0ic3RyaW5nIiYmdjtpZihRLmlzRnVuY3Rpb24odikpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oail7USh0aGlzKS5hZGRDbGFzcyh2LmNhbGwodGhpcyxqLHRoaXMuY2xhc3NOYW1lKSl9KX1pZihyKXthPSh2fHwiIikubWF0Y2goUCl8fFtdO2Zvcig7aTxwO2krKyl7Yj10aGlzW2ldO2w9Yi5ub2RlVHlwZT09PTEmJihiLmNsYXNzTmFtZT8oIiAiK2IuY2xhc3NOYW1lKyIgIikucmVwbGFjZShIMiwiICIpOiIgIik7aWYobCl7aj0wO3doaWxlKChtPWFbaisrXSkpe2lmKGwuaW5kZXhPZigiICIrbSsiICIpPDApe2wrPW0rIiAifX1uPVEudHJpbShsKTtpZihiLmNsYXNzTmFtZSE9PW4pe2IuY2xhc3NOYW1lPW59fX19cmV0dXJuIHRoaXN9LHJlbW92ZUNsYXNzOmZ1bmN0aW9uKHYpe3ZhciBhLGIsbCxtLGosbixpPTAscD10aGlzLmxlbmd0aCxyPWFyZ3VtZW50cy5sZW5ndGg9PT0wfHx0eXBlb2Ygdj09PSJzdHJpbmciJiZ2O2lmKFEuaXNGdW5jdGlvbih2KSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihqKXtRKHRoaXMpLnJlbW92ZUNsYXNzKHYuY2FsbCh0aGlzLGosdGhpcy5jbGFzc05hbWUpKX0pfWlmKHIpe2E9KHZ8fCIiKS5tYXRjaChQKXx8W107Zm9yKDtpPHA7aSsrKXtiPXRoaXNbaV07bD1iLm5vZGVUeXBlPT09MSYmKGIuY2xhc3NOYW1lPygiICIrYi5jbGFzc05hbWUrIiAiKS5yZXBsYWNlKEgyLCIgIik6IiIpO2lmKGwpe2o9MDt3aGlsZSgobT1hW2orK10pKXt3aGlsZShsLmluZGV4T2YoIiAiK20rIiAiKT49MCl7bD1sLnJlcGxhY2UoIiAiK20rIiAiLCIgIil9fW49dj9RLnRyaW0obCk6IiI7aWYoYi5jbGFzc05hbWUhPT1uKXtiLmNsYXNzTmFtZT1ufX19fXJldHVybiB0aGlzfSx0b2dnbGVDbGFzczpmdW5jdGlvbih2LHMpe3ZhciB0PXR5cGVvZiB2O2lmKHR5cGVvZiBzPT09ImJvb2xlYW4iJiZ0PT09InN0cmluZyIpe3JldHVybiBzP3RoaXMuYWRkQ2xhc3Modik6dGhpcy5yZW1vdmVDbGFzcyh2KX1pZihRLmlzRnVuY3Rpb24odikpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oaSl7USh0aGlzKS50b2dnbGVDbGFzcyh2LmNhbGwodGhpcyxpLHRoaXMuY2xhc3NOYW1lLHMpLHMpfSl9cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe2lmKHQ9PT0ic3RyaW5nIil7dmFyIGEsaT0wLGI9USh0aGlzKSxqPXYubWF0Y2goUCl8fFtdO3doaWxlKChhPWpbaSsrXSkpe2lmKGIuaGFzQ2xhc3MoYSkpe2IucmVtb3ZlQ2xhc3MoYSl9ZWxzZXtiLmFkZENsYXNzKGEpfX19ZWxzZSBpZih0PT09WHx8dD09PSJib29sZWFuIil7aWYodGhpcy5jbGFzc05hbWUpe1EuX2RhdGEodGhpcywiX19jbGFzc05hbWVfXyIsdGhpcy5jbGFzc05hbWUpfXRoaXMuY2xhc3NOYW1lPXRoaXMuY2xhc3NOYW1lfHx2PT09ZmFsc2U/IiI6US5fZGF0YSh0aGlzLCJfX2NsYXNzTmFtZV9fIil8fCIifX0pfSxoYXNDbGFzczpmdW5jdGlvbihzKXt2YXIgYT0iICIrcysiICIsaT0wLGw9dGhpcy5sZW5ndGg7Zm9yKDtpPGw7aSsrKXtpZih0aGlzW2ldLm5vZGVUeXBlPT09MSYmKCIgIit0aGlzW2ldLmNsYXNzTmFtZSsiICIpLnJlcGxhY2UoSDIsIiAiKS5pbmRleE9mKGEpPj0wKXtyZXR1cm4gdHJ1ZX19cmV0dXJuIGZhbHNlfX0pO1EuZWFjaCgoImJsdXIgZm9jdXMgZm9jdXNpbiBmb2N1c291dCBsb2FkIHJlc2l6ZSBzY3JvbGwgdW5sb2FkIGNsaWNrIGRibGNsaWNrICIrIm1vdXNlZG93biBtb3VzZXVwIG1vdXNlbW92ZSBtb3VzZW92ZXIgbW91c2VvdXQgbW91c2VlbnRlciBtb3VzZWxlYXZlICIrImNoYW5nZSBzZWxlY3Qgc3VibWl0IGtleWRvd24ga2V5cHJlc3Mga2V5dXAgZXJyb3IgY29udGV4dG1lbnUiKS5zcGxpdCgiICIpLGZ1bmN0aW9uKGksbil7US5mbltuXT1mdW5jdGlvbihhLGIpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPjA/dGhpcy5vbihuLG51bGwsYSxiKTp0aGlzLnRyaWdnZXIobil9fSk7US5mbi5leHRlbmQoe2hvdmVyOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMubW91c2VlbnRlcihhKS5tb3VzZWxlYXZlKGJ8fGEpfSxiaW5kOmZ1bmN0aW9uKHQsYSxiKXtyZXR1cm4gdGhpcy5vbih0LG51bGwsYSxiKX0sdW5iaW5kOmZ1bmN0aW9uKHQsYSl7cmV0dXJuIHRoaXMub2ZmKHQsbnVsbCxhKX0sZGVsZWdhdGU6ZnVuY3Rpb24ocyx0LGEsYil7cmV0dXJuIHRoaXMub24odCxzLGEsYil9LHVuZGVsZWdhdGU6ZnVuY3Rpb24ocyx0LGEpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPT09MT90aGlzLm9mZihzLCIqKiIpOnRoaXMub2ZmKHQsc3x8IioqIixhKX19KTt2YXIgSTI9US5ub3coKTt2YXIgSjI9KC9cPy8pO3ZhciBLMj0vKCwpfChcW3x7KXwofXxdKXwiKD86W14iXFxcclxuXXxcXFsiXFxcL2JmbnJ0XXxcXHVbXGRhLWZBLUZdezR9KSoiXHMqOj98dHJ1ZXxmYWxzZXxudWxsfC0/KD8hMFxkKVxkKyg/OlwuXGQrfCkoPzpbZUVdWystXT9cZCt8KS9nO1EucGFyc2VKU09OPWZ1bmN0aW9uKGEpe2lmKHcuSlNPTiYmdy5KU09OLnBhcnNlKXtyZXR1cm4gdy5KU09OLnBhcnNlKGErIiIpfXZhciByLGI9bnVsbCxzPVEudHJpbShhKyIiKTtyZXR1cm4gcyYmIVEudHJpbShzLnJlcGxhY2UoSzIsZnVuY3Rpb24odCxqLGwsbSl7aWYociYmail7Yj0wfWlmKGI9PT0wKXtyZXR1cm4gdH1yPWx8fGo7Yis9IW0tIWw7cmV0dXJuIiJ9KSk/KEZ1bmN0aW9uKCJyZXR1cm4gIitzKSkoKTpRLmVycm9yKCJJbnZhbGlkIEpTT046ICIrYSl9O1EucGFyc2VYTUw9ZnVuY3Rpb24oYSl7dmFyIGIsdDtpZighYXx8dHlwZW9mIGEhPT0ic3RyaW5nIil7cmV0dXJuIG51bGx9dHJ5e2lmKHcuRE9NUGFyc2VyKXt0PW5ldyBET01QYXJzZXIoKTtiPXQucGFyc2VGcm9tU3RyaW5nKGEsInRleHQveG1sIil9ZWxzZXtiPW5ldyBBY3RpdmVYT2JqZWN0KCJNaWNyb3NvZnQuWE1MRE9NIik7Yi5hc3luYz0iZmFsc2UiO2IubG9hZFhNTChhKX19Y2F0Y2goZSl7Yj11bmRlZmluZWR9aWYoIWJ8fCFiLmRvY3VtZW50RWxlbWVudHx8Yi5nZXRFbGVtZW50c0J5VGFnTmFtZSgicGFyc2VyZXJyb3IiKS5sZW5ndGgpe1EuZXJyb3IoIkludmFsaWQgWE1MOiAiK2EpfXJldHVybiBifTt2YXIgTDIsTTIsTjI9LyMuKiQvLE8yPS8oWz8mXSlfPVteJl0qLyxQMj0vXiguKj8pOlsgXHRdKihbXlxyXG5dKilccj8kL21nLFEyPS9eKD86YWJvdXR8YXBwfGFwcC1zdG9yYWdlfC4rLWV4dGVuc2lvbnxmaWxlfHJlc3x3aWRnZXQpOiQvLFIyPS9eKD86R0VUfEhFQUQpJC8sUzI9L15cL1wvLyxUMj0vXihbXHcuKy1dKzopKD86XC9cLyg/OlteXC8/I10qQHwpKFteXC8/IzpdKikoPzo6KFxkKyl8KXwpLyxVMj17fSxWMj17fSxXMj0iKi8iLmNvbmNhdCgiKiIpO3RyeXtNMj1sb2NhdGlvbi5ocmVmfWNhdGNoKGUpe00yPUouY3JlYXRlRWxlbWVudCgiYSIpO00yLmhyZWY9IiI7TTI9TTIuaHJlZn1MMj1UMi5leGVjKE0yLnRvTG93ZXJDYXNlKCkpfHxbXTtmdW5jdGlvbiBYMihzKXtyZXR1cm4gZnVuY3Rpb24oYSxiKXtpZih0eXBlb2YgYSE9PSJzdHJpbmciKXtiPWE7YT0iKiJ9dmFyIGosaT0wLGw9YS50b0xvd2VyQ2FzZSgpLm1hdGNoKFApfHxbXTtpZihRLmlzRnVuY3Rpb24oYikpe3doaWxlKChqPWxbaSsrXSkpe2lmKGouY2hhckF0KDApPT09IisiKXtqPWouc2xpY2UoMSl8fCIqIjsoc1tqXT1zW2pdfHxbXSkudW5zaGlmdChiKX1lbHNleyhzW2pdPXNbal18fFtdKS5wdXNoKGIpfX19fX1mdW5jdGlvbiBZMihzLGEsYixqKXt2YXIgbD17fSxtPShzPT09VjIpO2Z1bmN0aW9uIG4ocCl7dmFyIHI7bFtwXT10cnVlO1EuZWFjaChzW3BdfHxbXSxmdW5jdGlvbihfLHQpe3ZhciB2PXQoYSxiLGopO2lmKHR5cGVvZiB2PT09InN0cmluZyImJiFtJiYhbFt2XSl7YS5kYXRhVHlwZXMudW5zaGlmdCh2KTtuKHYpO3JldHVybiBmYWxzZX1lbHNlIGlmKG0pe3JldHVybiEocj12KX19KTtyZXR1cm4gcn1yZXR1cm4gbihhLmRhdGFUeXBlc1swXSl8fCFsWyIqIl0mJm4oIioiKX1mdW5jdGlvbiBaMih0LHMpe3ZhciBhLGIsaj1RLmFqYXhTZXR0aW5ncy5mbGF0T3B0aW9uc3x8e307Zm9yKGIgaW4gcyl7aWYoc1tiXSE9PXVuZGVmaW5lZCl7KGpbYl0/dDooYXx8KGE9e30pKSlbYl09c1tiXX19aWYoYSl7US5leHRlbmQodHJ1ZSx0LGEpfXJldHVybiB0fWZ1bmN0aW9uICQyKHMsaixyKXt2YXIgYSxiLGwsdCxtPXMuY29udGVudHMsbj1zLmRhdGFUeXBlczt3aGlsZShuWzBdPT09IioiKXtuLnNoaWZ0KCk7aWYoYj09PXVuZGVmaW5lZCl7Yj1zLm1pbWVUeXBlfHxqLmdldFJlc3BvbnNlSGVhZGVyKCJDb250ZW50LVR5cGUiKX19aWYoYil7Zm9yKHQgaW4gbSl7aWYobVt0XSYmbVt0XS50ZXN0KGIpKXtuLnVuc2hpZnQodCk7YnJlYWt9fX1pZihuWzBdaW4gcil7bD1uWzBdfWVsc2V7Zm9yKHQgaW4gcil7aWYoIW5bMF18fHMuY29udmVydGVyc1t0KyIgIituWzBdXSl7bD10O2JyZWFrfWlmKCFhKXthPXR9fWw9bHx8YX1pZihsKXtpZihsIT09blswXSl7bi51bnNoaWZ0KGwpfXJldHVybiByW2xdfX1mdW5jdGlvbiBfMihzLHIsaixhKXt2YXIgYixsLG0sdCxwLG49e30sdj1zLmRhdGFUeXBlcy5zbGljZSgpO2lmKHZbMV0pe2ZvcihtIGluIHMuY29udmVydGVycyl7blttLnRvTG93ZXJDYXNlKCldPXMuY29udmVydGVyc1ttXX19bD12LnNoaWZ0KCk7d2hpbGUobCl7aWYocy5yZXNwb25zZUZpZWxkc1tsXSl7altzLnJlc3BvbnNlRmllbGRzW2xdXT1yfWlmKCFwJiZhJiZzLmRhdGFGaWx0ZXIpe3I9cy5kYXRhRmlsdGVyKHIscy5kYXRhVHlwZSl9cD1sO2w9di5zaGlmdCgpO2lmKGwpe2lmKGw9PT0iKiIpe2w9cH1lbHNlIGlmKHAhPT0iKiImJnAhPT1sKXttPW5bcCsiICIrbF18fG5bIiogIitsXTtpZighbSl7Zm9yKGIgaW4gbil7dD1iLnNwbGl0KCIgIik7aWYodFsxXT09PWwpe209bltwKyIgIit0WzBdXXx8blsiKiAiK3RbMF1dO2lmKG0pe2lmKG09PT10cnVlKXttPW5bYl19ZWxzZSBpZihuW2JdIT09dHJ1ZSl7bD10WzBdO3YudW5zaGlmdCh0WzFdKX1icmVha319fX1pZihtIT09dHJ1ZSl7aWYobSYmc1sidGhyb3dzIl0pe3I9bShyKX1lbHNle3RyeXtyPW0ocil9Y2F0Y2goZSl7cmV0dXJue3N0YXRlOiJwYXJzZXJlcnJvciIsZXJyb3I6bT9lOiJObyBjb252ZXJzaW9uIGZyb20gIitwKyIgdG8gIitsfX19fX19fXJldHVybntzdGF0ZToic3VjY2VzcyIsZGF0YTpyfX1RLmV4dGVuZCh7YWN0aXZlOjAsbGFzdE1vZGlmaWVkOnt9LGV0YWc6e30sYWpheFNldHRpbmdzOnt1cmw6TTIsdHlwZToiR0VUIixpc0xvY2FsOlEyLnRlc3QoTDJbMV0pLGdsb2JhbDp0cnVlLHByb2Nlc3NEYXRhOnRydWUsYXN5bmM6dHJ1ZSxjb250ZW50VHlwZToiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkOyBjaGFyc2V0PVVURi04IixhY2NlcHRzOnsiKiI6VzIsdGV4dDoidGV4dC9wbGFpbiIsaHRtbDoidGV4dC9odG1sIix4bWw6ImFwcGxpY2F0aW9uL3htbCwgdGV4dC94bWwiLGpzb246ImFwcGxpY2F0aW9uL2pzb24sIHRleHQvamF2YXNjcmlwdCJ9LGNvbnRlbnRzOnt4bWw6L3htbC8saHRtbDovaHRtbC8sanNvbjovanNvbi99LHJlc3BvbnNlRmllbGRzOnt4bWw6InJlc3BvbnNlWE1MIix0ZXh0OiJyZXNwb25zZVRleHQiLGpzb246InJlc3BvbnNlSlNPTiJ9LGNvbnZlcnRlcnM6eyIqIHRleHQiOlN0cmluZywidGV4dCBodG1sIjp0cnVlLCJ0ZXh0IGpzb24iOlEucGFyc2VKU09OLCJ0ZXh0IHhtbCI6US5wYXJzZVhNTH0sZmxhdE9wdGlvbnM6e3VybDp0cnVlLGNvbnRleHQ6dHJ1ZX19LGFqYXhTZXR1cDpmdW5jdGlvbih0LHMpe3JldHVybiBzP1oyKFoyKHQsUS5hamF4U2V0dGluZ3MpLHMpOloyKFEuYWpheFNldHRpbmdzLHQpfSxhamF4UHJlZmlsdGVyOlgyKFUyKSxhamF4VHJhbnNwb3J0OlgyKFYyKSxhamF4OmZ1bmN0aW9uKGEsYil7aWYodHlwZW9mIGE9PT0ib2JqZWN0Iil7Yj1hO2E9dW5kZWZpbmVkfWI9Ynx8e307dmFyIHAsaSxqLHIsdCxsLG0sbixzPVEuYWpheFNldHVwKHt9LGIpLHY9cy5jb250ZXh0fHxzLF89cy5jb250ZXh0JiYodi5ub2RlVHlwZXx8di5qcXVlcnkpP1Eodik6US5ldmVudCxyMz1RLkRlZmVycmVkKCksczM9US5DYWxsYmFja3MoIm9uY2UgbWVtb3J5IiksdDM9cy5zdGF0dXNDb2RlfHx7fSx1Mz17fSx2Mz17fSx3Mz0wLHgzPSJjYW5jZWxlZCIseTM9e3JlYWR5U3RhdGU6MCxnZXRSZXNwb25zZUhlYWRlcjpmdW5jdGlvbihBMyl7dmFyIEIzO2lmKHczPT09Mil7aWYoIW4pe249e307d2hpbGUoKEIzPVAyLmV4ZWMocikpKXtuW0IzWzFdLnRvTG93ZXJDYXNlKCldPUIzWzJdfX1CMz1uW0EzLnRvTG93ZXJDYXNlKCldfXJldHVybiBCMz09bnVsbD9udWxsOkIzfSxnZXRBbGxSZXNwb25zZUhlYWRlcnM6ZnVuY3Rpb24oKXtyZXR1cm4gdzM9PT0yP3I6bnVsbH0sc2V0UmVxdWVzdEhlYWRlcjpmdW5jdGlvbihBMyxCMyl7dmFyIEMzPUEzLnRvTG93ZXJDYXNlKCk7aWYoIXczKXtBMz12M1tDM109djNbQzNdfHxBMzt1M1tBM109QjN9cmV0dXJuIHRoaXN9LG92ZXJyaWRlTWltZVR5cGU6ZnVuY3Rpb24oQTMpe2lmKCF3Myl7cy5taW1lVHlwZT1BM31yZXR1cm4gdGhpc30sc3RhdHVzQ29kZTpmdW5jdGlvbihBMyl7dmFyIEIzO2lmKEEzKXtpZih3MzwyKXtmb3IoQjMgaW4gQTMpe3QzW0IzXT1bdDNbQjNdLEEzW0IzXV19fWVsc2V7eTMuYWx3YXlzKEEzW3kzLnN0YXR1c10pfX1yZXR1cm4gdGhpc30sYWJvcnQ6ZnVuY3Rpb24oQTMpe3ZhciBCMz1BM3x8eDM7aWYobSl7bS5hYm9ydChCMyl9ejMoMCxCMyk7cmV0dXJuIHRoaXN9fTtyMy5wcm9taXNlKHkzKS5jb21wbGV0ZT1zMy5hZGQ7eTMuc3VjY2Vzcz15My5kb25lO3kzLmVycm9yPXkzLmZhaWw7cy51cmw9KChhfHxzLnVybHx8TTIpKyIiKS5yZXBsYWNlKE4yLCIiKS5yZXBsYWNlKFMyLEwyWzFdKyIvLyIpO3MudHlwZT1iLm1ldGhvZHx8Yi50eXBlfHxzLm1ldGhvZHx8cy50eXBlO3MuZGF0YVR5cGVzPVEudHJpbShzLmRhdGFUeXBlfHwiKiIpLnRvTG93ZXJDYXNlKCkubWF0Y2goUCl8fFsiIl07aWYocy5jcm9zc0RvbWFpbj09bnVsbCl7cD1UMi5leGVjKHMudXJsLnRvTG93ZXJDYXNlKCkpO3MuY3Jvc3NEb21haW49ISEocCYmKHBbMV0hPT1MMlsxXXx8cFsyXSE9PUwyWzJdfHwocFszXXx8KHBbMV09PT0iaHR0cDoiPyI4MCI6IjQ0MyIpKSE9PShMMlszXXx8KEwyWzFdPT09Imh0dHA6Ij8iODAiOiI0NDMiKSkpKX1pZihzLmRhdGEmJnMucHJvY2Vzc0RhdGEmJnR5cGVvZiBzLmRhdGEhPT0ic3RyaW5nIil7cy5kYXRhPVEucGFyYW0ocy5kYXRhLHMudHJhZGl0aW9uYWwpfVkyKFUyLHMsYix5Myk7aWYodzM9PT0yKXtyZXR1cm4geTN9bD1zLmdsb2JhbDtpZihsJiZRLmFjdGl2ZSsrPT09MCl7US5ldmVudC50cmlnZ2VyKCJhamF4U3RhcnQiKX1zLnR5cGU9cy50eXBlLnRvVXBwZXJDYXNlKCk7cy5oYXNDb250ZW50PSFSMi50ZXN0KHMudHlwZSk7aj1zLnVybDtpZighcy5oYXNDb250ZW50KXtpZihzLmRhdGEpe2o9KHMudXJsKz0oSjIudGVzdChqKT8iJiI6Ij8iKStzLmRhdGEpO2RlbGV0ZSBzLmRhdGF9aWYocy5jYWNoZT09PWZhbHNlKXtzLnVybD1PMi50ZXN0KGopP2oucmVwbGFjZShPMiwiJDFfPSIrSTIrKyk6aisoSjIudGVzdChqKT8iJiI6Ij8iKSsiXz0iK0kyKyt9fWlmKHMuaWZNb2RpZmllZCl7aWYoUS5sYXN0TW9kaWZpZWRbal0pe3kzLnNldFJlcXVlc3RIZWFkZXIoIklmLU1vZGlmaWVkLVNpbmNlIixRLmxhc3RNb2RpZmllZFtqXSl9aWYoUS5ldGFnW2pdKXt5My5zZXRSZXF1ZXN0SGVhZGVyKCJJZi1Ob25lLU1hdGNoIixRLmV0YWdbal0pfX1pZihzLmRhdGEmJnMuaGFzQ29udGVudCYmcy5jb250ZW50VHlwZSE9PWZhbHNlfHxiLmNvbnRlbnRUeXBlKXt5My5zZXRSZXF1ZXN0SGVhZGVyKCJDb250ZW50LVR5cGUiLHMuY29udGVudFR5cGUpfXkzLnNldFJlcXVlc3RIZWFkZXIoIkFjY2VwdCIscy5kYXRhVHlwZXNbMF0mJnMuYWNjZXB0c1tzLmRhdGFUeXBlc1swXV0/cy5hY2NlcHRzW3MuZGF0YVR5cGVzWzBdXSsocy5kYXRhVHlwZXNbMF0hPT0iKiI/IiwgIitXMisiOyBxPTAuMDEiOiIiKTpzLmFjY2VwdHNbIioiXSk7Zm9yKGkgaW4gcy5oZWFkZXJzKXt5My5zZXRSZXF1ZXN0SGVhZGVyKGkscy5oZWFkZXJzW2ldKX1pZihzLmJlZm9yZVNlbmQmJihzLmJlZm9yZVNlbmQuY2FsbCh2LHkzLHMpPT09ZmFsc2V8fHczPT09Mikpe3JldHVybiB5My5hYm9ydCgpfXgzPSJhYm9ydCI7Zm9yKGkgaW57c3VjY2VzczoxLGVycm9yOjEsY29tcGxldGU6MX0pe3kzW2ldKHNbaV0pfW09WTIoVjIscyxiLHkzKTtpZighbSl7ejMoLTEsIk5vIFRyYW5zcG9ydCIpfWVsc2V7eTMucmVhZHlTdGF0ZT0xO2lmKGwpe18udHJpZ2dlcigiYWpheFNlbmQiLFt5MyxzXSl9aWYocy5hc3luYyYmcy50aW1lb3V0PjApe3Q9c2V0VGltZW91dChmdW5jdGlvbigpe3kzLmFib3J0KCJ0aW1lb3V0Iil9LHMudGltZW91dCl9dHJ5e3czPTE7bS5zZW5kKHUzLHozKX1jYXRjaChlKXtpZih3MzwyKXt6MygtMSxlKX1lbHNle3Rocm93IGV9fX1mdW5jdGlvbiB6MyhBMyxCMyxDMyxEMyl7dmFyIEUzLEYzLEczLEgzLEkzLEozPUIzO2lmKHczPT09Mil7cmV0dXJufXczPTI7aWYodCl7Y2xlYXJUaW1lb3V0KHQpfW09dW5kZWZpbmVkO3I9RDN8fCIiO3kzLnJlYWR5U3RhdGU9QTM+MD80OjA7RTM9QTM+PTIwMCYmQTM8MzAwfHxBMz09PTMwNDtpZihDMyl7SDM9JDIocyx5MyxDMyl9SDM9XzIocyxIMyx5MyxFMyk7aWYoRTMpe2lmKHMuaWZNb2RpZmllZCl7STM9eTMuZ2V0UmVzcG9uc2VIZWFkZXIoIkxhc3QtTW9kaWZpZWQiKTtpZihJMyl7US5sYXN0TW9kaWZpZWRbal09STN9STM9eTMuZ2V0UmVzcG9uc2VIZWFkZXIoImV0YWciKTtpZihJMyl7US5ldGFnW2pdPUkzfX1pZihBMz09PTIwNHx8cy50eXBlPT09IkhFQUQiKXtKMz0ibm9jb250ZW50In1lbHNlIGlmKEEzPT09MzA0KXtKMz0ibm90bW9kaWZpZWQifWVsc2V7SjM9SDMuc3RhdGU7RjM9SDMuZGF0YTtHMz1IMy5lcnJvcjtFMz0hRzN9fWVsc2V7RzM9SjM7aWYoQTN8fCFKMyl7SjM9ImVycm9yIjtpZihBMzwwKXtBMz0wfX19eTMuc3RhdHVzPUEzO3kzLnN0YXR1c1RleHQ9KEIzfHxKMykrIiI7aWYoRTMpe3IzLnJlc29sdmVXaXRoKHYsW0YzLEozLHkzXSl9ZWxzZXtyMy5yZWplY3RXaXRoKHYsW3kzLEozLEczXSl9eTMuc3RhdHVzQ29kZSh0Myk7dDM9dW5kZWZpbmVkO2lmKGwpe18udHJpZ2dlcihFMz8iYWpheFN1Y2Nlc3MiOiJhamF4RXJyb3IiLFt5MyxzLEUzP0YzOkczXSl9czMuZmlyZVdpdGgodixbeTMsSjNdKTtpZihsKXtfLnRyaWdnZXIoImFqYXhDb21wbGV0ZSIsW3kzLHNdKTtpZighKC0tUS5hY3RpdmUpKXtRLmV2ZW50LnRyaWdnZXIoImFqYXhTdG9wIil9fX1yZXR1cm4geTN9LGdldEpTT046ZnVuY3Rpb24oYSxiLGope3JldHVybiBRLmdldChhLGIsaiwianNvbiIpfSxnZXRTY3JpcHQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gUS5nZXQoYSx1bmRlZmluZWQsYiwic2NyaXB0Iil9fSk7US5lYWNoKFsiZ2V0IiwicG9zdCJdLGZ1bmN0aW9uKGksbSl7UVttXT1mdW5jdGlvbihhLGIsaix0KXtpZihRLmlzRnVuY3Rpb24oYikpe3Q9dHx8ajtqPWI7Yj11bmRlZmluZWR9cmV0dXJuIFEuYWpheCh7dXJsOmEsdHlwZTptLGRhdGFUeXBlOnQsZGF0YTpiLHN1Y2Nlc3M6an0pfX0pO1EuZWFjaChbImFqYXhTdGFydCIsImFqYXhTdG9wIiwiYWpheENvbXBsZXRlIiwiYWpheEVycm9yIiwiYWpheFN1Y2Nlc3MiLCJhamF4U2VuZCJdLGZ1bmN0aW9uKGksdCl7US5mblt0XT1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5vbih0LGEpfX0pO1EuX2V2YWxVcmw9ZnVuY3Rpb24oYSl7cmV0dXJuIFEuYWpheCh7dXJsOmEsdHlwZToiR0VUIixkYXRhVHlwZToic2NyaXB0Iixhc3luYzpmYWxzZSxnbG9iYWw6ZmFsc2UsInRocm93cyI6dHJ1ZX0pfTtRLmZuLmV4dGVuZCh7d3JhcEFsbDpmdW5jdGlvbihhKXtpZihRLmlzRnVuY3Rpb24oYSkpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oaSl7USh0aGlzKS53cmFwQWxsKGEuY2FsbCh0aGlzLGkpKX0pfWlmKHRoaXNbMF0pe3ZhciBiPVEoYSx0aGlzWzBdLm93bmVyRG9jdW1lbnQpLmVxKDApLmNsb25lKHRydWUpO2lmKHRoaXNbMF0ucGFyZW50Tm9kZSl7Yi5pbnNlcnRCZWZvcmUodGhpc1swXSl9Yi5tYXAoZnVuY3Rpb24oKXt2YXIgaj10aGlzO3doaWxlKGouZmlyc3RDaGlsZCYmai5maXJzdENoaWxkLm5vZGVUeXBlPT09MSl7aj1qLmZpcnN0Q2hpbGR9cmV0dXJuIGp9KS5hcHBlbmQodGhpcyl9cmV0dXJuIHRoaXN9LHdyYXBJbm5lcjpmdW5jdGlvbihhKXtpZihRLmlzRnVuY3Rpb24oYSkpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oaSl7USh0aGlzKS53cmFwSW5uZXIoYS5jYWxsKHRoaXMsaSkpfSl9cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBzPVEodGhpcyksYj1zLmNvbnRlbnRzKCk7aWYoYi5sZW5ndGgpe2Iud3JhcEFsbChhKX1lbHNle3MuYXBwZW5kKGEpfX0pfSx3cmFwOmZ1bmN0aW9uKGEpe3ZhciBiPVEuaXNGdW5jdGlvbihhKTtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGkpe1EodGhpcykud3JhcEFsbChiP2EuY2FsbCh0aGlzLGkpOmEpfSl9LHVud3JhcDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnBhcmVudCgpLmVhY2goZnVuY3Rpb24oKXtpZighUS5ub2RlTmFtZSh0aGlzLCJib2R5Iikpe1EodGhpcykucmVwbGFjZVdpdGgodGhpcy5jaGlsZE5vZGVzKX19KS5lbmQoKX19KTtRLmV4cHIuZmlsdGVycy5oaWRkZW49ZnVuY3Rpb24oYSl7cmV0dXJuIGEub2Zmc2V0V2lkdGg8PTAmJmEub2Zmc2V0SGVpZ2h0PD0wfHwoIXgucmVsaWFibGVIaWRkZW5PZmZzZXRzKCkmJigoYS5zdHlsZSYmYS5zdHlsZS5kaXNwbGF5KXx8US5jc3MoYSwiZGlzcGxheSIpKT09PSJub25lIil9O1EuZXhwci5maWx0ZXJzLnZpc2libGU9ZnVuY3Rpb24oYSl7cmV0dXJuIVEuZXhwci5maWx0ZXJzLmhpZGRlbihhKX07dmFyIGEzPS8lMjAvZyxiMz0vXFtcXSQvLGMzPS9ccj9cbi9nLGQzPS9eKD86c3VibWl0fGJ1dHRvbnxpbWFnZXxyZXNldHxmaWxlKSQvaSxlMz0vXig/OmlucHV0fHNlbGVjdHx0ZXh0YXJlYXxrZXlnZW4pL2k7ZnVuY3Rpb24gZjMocCxhLHQsYil7dmFyIG47aWYoUS5pc0FycmF5KGEpKXtRLmVhY2goYSxmdW5jdGlvbihpLHYpe2lmKHR8fGIzLnRlc3QocCkpe2IocCx2KX1lbHNle2YzKHArIlsiKyh0eXBlb2Ygdj09PSJvYmplY3QiP2k6IiIpKyJdIix2LHQsYil9fSl9ZWxzZSBpZighdCYmUS50eXBlKGEpPT09Im9iamVjdCIpe2ZvcihuIGluIGEpe2YzKHArIlsiK24rIl0iLGFbbl0sdCxiKX19ZWxzZXtiKHAsYSl9fVEucGFyYW09ZnVuY3Rpb24oYSx0KXt2YXIgcCxzPVtdLGI9ZnVuY3Rpb24oaix2KXt2PVEuaXNGdW5jdGlvbih2KT92KCk6KHY9PW51bGw/IiI6dik7c1tzLmxlbmd0aF09ZW5jb2RlVVJJQ29tcG9uZW50KGopKyI9IitlbmNvZGVVUklDb21wb25lbnQodil9O2lmKHQ9PT11bmRlZmluZWQpe3Q9US5hamF4U2V0dGluZ3MmJlEuYWpheFNldHRpbmdzLnRyYWRpdGlvbmFsfWlmKFEuaXNBcnJheShhKXx8KGEuanF1ZXJ5JiYhUS5pc1BsYWluT2JqZWN0KGEpKSl7US5lYWNoKGEsZnVuY3Rpb24oKXtiKHRoaXMubmFtZSx0aGlzLnZhbHVlKX0pfWVsc2V7Zm9yKHAgaW4gYSl7ZjMocCxhW3BdLHQsYil9fXJldHVybiBzLmpvaW4oIiYiKS5yZXBsYWNlKGEzLCIrIil9O1EuZm4uZXh0ZW5kKHtzZXJpYWxpemU6ZnVuY3Rpb24oKXtyZXR1cm4gUS5wYXJhbSh0aGlzLnNlcmlhbGl6ZUFycmF5KCkpfSxzZXJpYWxpemVBcnJheTpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1hcChmdW5jdGlvbigpe3ZhciBhPVEucHJvcCh0aGlzLCJlbGVtZW50cyIpO3JldHVybiBhP1EubWFrZUFycmF5KGEpOnRoaXN9KS5maWx0ZXIoZnVuY3Rpb24oKXt2YXIgdD10aGlzLnR5cGU7cmV0dXJuIHRoaXMubmFtZSYmIVEodGhpcykuaXMoIjpkaXNhYmxlZCIpJiZlMy50ZXN0KHRoaXMubm9kZU5hbWUpJiYhZDMudGVzdCh0KSYmKHRoaXMuY2hlY2tlZHx8IWgxLnRlc3QodCkpfSkubWFwKGZ1bmN0aW9uKGksYSl7dmFyIHY9USh0aGlzKS52YWwoKTtyZXR1cm4gdj09bnVsbD9udWxsOlEuaXNBcnJheSh2KT9RLm1hcCh2LGZ1bmN0aW9uKHYpe3JldHVybntuYW1lOmEubmFtZSx2YWx1ZTp2LnJlcGxhY2UoYzMsIlxyXG4iKX19KTp7bmFtZTphLm5hbWUsdmFsdWU6di5yZXBsYWNlKGMzLCJcclxuIil9fSkuZ2V0KCl9fSk7US5hamF4U2V0dGluZ3MueGhyPXcuQWN0aXZlWE9iamVjdCE9PXVuZGVmaW5lZD9mdW5jdGlvbigpe3JldHVybiF0aGlzLmlzTG9jYWwmJi9eKGdldHxwb3N0fGhlYWR8cHV0fGRlbGV0ZXxvcHRpb25zKSQvaS50ZXN0KHRoaXMudHlwZSkmJmozKCl8fGszKCl9OmozO3ZhciBnMz0wLGgzPXt9LGkzPVEuYWpheFNldHRpbmdzLnhocigpO2lmKHcuQWN0aXZlWE9iamVjdCl7USh3KS5vbigidW5sb2FkIixmdW5jdGlvbigpe2Zvcih2YXIgYSBpbiBoMyl7aDNbYV0odW5kZWZpbmVkLHRydWUpfX0pfXguY29ycz0hIWkzJiYoIndpdGhDcmVkZW50aWFscyJpbiBpMyk7aTM9eC5hamF4PSEhaTM7aWYoaTMpe1EuYWpheFRyYW5zcG9ydChmdW5jdGlvbihhKXtpZighYS5jcm9zc0RvbWFpbnx8eC5jb3JzKXt2YXIgYjtyZXR1cm57c2VuZDpmdW5jdGlvbihqLGwpe3ZhciBpLG09YS54aHIoKSxuPSsrZzM7bS5vcGVuKGEudHlwZSxhLnVybCxhLmFzeW5jLGEudXNlcm5hbWUsYS5wYXNzd29yZCk7aWYoYS54aHJGaWVsZHMpe2ZvcihpIGluIGEueGhyRmllbGRzKXttW2ldPWEueGhyRmllbGRzW2ldfX1pZihhLm1pbWVUeXBlJiZtLm92ZXJyaWRlTWltZVR5cGUpe20ub3ZlcnJpZGVNaW1lVHlwZShhLm1pbWVUeXBlKX1pZighYS5jcm9zc0RvbWFpbiYmIWpbIlgtUmVxdWVzdGVkLVdpdGgiXSl7alsiWC1SZXF1ZXN0ZWQtV2l0aCJdPSJYTUxIdHRwUmVxdWVzdCJ9Zm9yKGkgaW4gail7aWYoaltpXSE9PXVuZGVmaW5lZCl7bS5zZXRSZXF1ZXN0SGVhZGVyKGksaltpXSsiIil9fW0uc2VuZCgoYS5oYXNDb250ZW50JiZhLmRhdGEpfHxudWxsKTtiPWZ1bmN0aW9uKF8scCl7dmFyIHMscix0O2lmKGImJihwfHxtLnJlYWR5U3RhdGU9PT00KSl7ZGVsZXRlIGgzW25dO2I9dW5kZWZpbmVkO20ub25yZWFkeXN0YXRlY2hhbmdlPVEubm9vcDtpZihwKXtpZihtLnJlYWR5U3RhdGUhPT00KXttLmFib3J0KCl9fWVsc2V7dD17fTtzPW0uc3RhdHVzO2lmKHR5cGVvZiBtLnJlc3BvbnNlVGV4dD09PSJzdHJpbmciKXt0LnRleHQ9bS5yZXNwb25zZVRleHR9dHJ5e3I9bS5zdGF0dXNUZXh0fWNhdGNoKGUpe3I9IiJ9aWYoIXMmJmEuaXNMb2NhbCYmIWEuY3Jvc3NEb21haW4pe3M9dC50ZXh0PzIwMDo0MDR9ZWxzZSBpZihzPT09MTIyMyl7cz0yMDR9fX1pZih0KXtsKHMscix0LG0uZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKCkpfX07aWYoIWEuYXN5bmMpe2IoKX1lbHNlIGlmKG0ucmVhZHlTdGF0ZT09PTQpe3NldFRpbWVvdXQoYil9ZWxzZXttLm9ucmVhZHlzdGF0ZWNoYW5nZT1oM1tuXT1ifX0sYWJvcnQ6ZnVuY3Rpb24oKXtpZihiKXtiKHVuZGVmaW5lZCx0cnVlKX19fX19KX1mdW5jdGlvbiBqMygpe3RyeXtyZXR1cm4gbmV3IHcuWE1MSHR0cFJlcXVlc3QoKX1jYXRjaChlKXt9fWZ1bmN0aW9uIGszKCl7dHJ5e3JldHVybiBuZXcgdy5BY3RpdmVYT2JqZWN0KCJNaWNyb3NvZnQuWE1MSFRUUCIpfWNhdGNoKGUpe319US5hamF4U2V0dXAoe2FjY2VwdHM6e3NjcmlwdDoidGV4dC9qYXZhc2NyaXB0LCBhcHBsaWNhdGlvbi9qYXZhc2NyaXB0LCBhcHBsaWNhdGlvbi9lY21hc2NyaXB0LCBhcHBsaWNhdGlvbi94LWVjbWFzY3JpcHQifSxjb250ZW50czp7c2NyaXB0Oi8oPzpqYXZhfGVjbWEpc2NyaXB0L30sY29udmVydGVyczp7InRleHQgc2NyaXB0IjpmdW5jdGlvbih0KXtRLmdsb2JhbEV2YWwodCk7cmV0dXJuIHR9fX0pO1EuYWpheFByZWZpbHRlcigic2NyaXB0IixmdW5jdGlvbihzKXtpZihzLmNhY2hlPT09dW5kZWZpbmVkKXtzLmNhY2hlPWZhbHNlfWlmKHMuY3Jvc3NEb21haW4pe3MudHlwZT0iR0VUIjtzLmdsb2JhbD1mYWxzZX19KTtRLmFqYXhUcmFuc3BvcnQoInNjcmlwdCIsZnVuY3Rpb24ocyl7aWYocy5jcm9zc0RvbWFpbil7dmFyIGEsYj1KLmhlYWR8fFEoImhlYWQiKVswXXx8Si5kb2N1bWVudEVsZW1lbnQ7cmV0dXJue3NlbmQ6ZnVuY3Rpb24oXyxqKXthPUouY3JlYXRlRWxlbWVudCgic2NyaXB0Iik7YS5hc3luYz10cnVlO2lmKHMuc2NyaXB0Q2hhcnNldCl7YS5jaGFyc2V0PXMuc2NyaXB0Q2hhcnNldH1hLnNyYz1zLnVybDthLm9ubG9hZD1hLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbihfLGwpe2lmKGx8fCFhLnJlYWR5U3RhdGV8fC9sb2FkZWR8Y29tcGxldGUvLnRlc3QoYS5yZWFkeVN0YXRlKSl7YS5vbmxvYWQ9YS5vbnJlYWR5c3RhdGVjaGFuZ2U9bnVsbDtpZihhLnBhcmVudE5vZGUpe2EucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChhKX1hPW51bGw7aWYoIWwpe2ooMjAwLCJzdWNjZXNzIil9fX07Yi5pbnNlcnRCZWZvcmUoYSxiLmZpcnN0Q2hpbGQpfSxhYm9ydDpmdW5jdGlvbigpe2lmKGEpe2Eub25sb2FkKHVuZGVmaW5lZCx0cnVlKX19fX19KTt2YXIgbDM9W10sbTM9Lyg9KVw/KD89JnwkKXxcP1w/LztRLmFqYXhTZXR1cCh7anNvbnA6ImNhbGxiYWNrIixqc29ucENhbGxiYWNrOmZ1bmN0aW9uKCl7dmFyIGE9bDMucG9wKCl8fChRLmV4cGFuZG8rIl8iKyhJMisrKSk7dGhpc1thXT10cnVlO3JldHVybiBhfX0pO1EuYWpheFByZWZpbHRlcigianNvbiBqc29ucCIsZnVuY3Rpb24ocyxhLGope3ZhciBiLGwscixtPXMuanNvbnAhPT1mYWxzZSYmKG0zLnRlc3Qocy51cmwpPyJ1cmwiOnR5cGVvZiBzLmRhdGE9PT0ic3RyaW5nIiYmIShzLmNvbnRlbnRUeXBlfHwiIikuaW5kZXhPZigiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIikmJm0zLnRlc3Qocy5kYXRhKSYmImRhdGEiKTtpZihtfHxzLmRhdGFUeXBlc1swXT09PSJqc29ucCIpe2I9cy5qc29ucENhbGxiYWNrPVEuaXNGdW5jdGlvbihzLmpzb25wQ2FsbGJhY2spP3MuanNvbnBDYWxsYmFjaygpOnMuanNvbnBDYWxsYmFjaztpZihtKXtzW21dPXNbbV0ucmVwbGFjZShtMywiJDEiK2IpfWVsc2UgaWYocy5qc29ucCE9PWZhbHNlKXtzLnVybCs9KEoyLnRlc3Qocy51cmwpPyImIjoiPyIpK3MuanNvbnArIj0iK2J9cy5jb252ZXJ0ZXJzWyJzY3JpcHQganNvbiJdPWZ1bmN0aW9uKCl7aWYoIXIpe1EuZXJyb3IoYisiIHdhcyBub3QgY2FsbGVkIil9cmV0dXJuIHJbMF19O3MuZGF0YVR5cGVzWzBdPSJqc29uIjtsPXdbYl07d1tiXT1mdW5jdGlvbigpe3I9YXJndW1lbnRzfTtqLmFsd2F5cyhmdW5jdGlvbigpe3dbYl09bDtpZihzW2JdKXtzLmpzb25wQ2FsbGJhY2s9YS5qc29ucENhbGxiYWNrO2wzLnB1c2goYil9aWYociYmUS5pc0Z1bmN0aW9uKGwpKXtsKHJbMF0pfXI9bD11bmRlZmluZWR9KTtyZXR1cm4ic2NyaXB0In19KTtRLnBhcnNlSFRNTD1mdW5jdGlvbihhLGIsail7aWYoIWF8fHR5cGVvZiBhIT09InN0cmluZyIpe3JldHVybiBudWxsfWlmKHR5cGVvZiBiPT09ImJvb2xlYW4iKXtqPWI7Yj1mYWxzZX1iPWJ8fEo7dmFyIHA9Ri5leGVjKGEpLHM9IWomJltdO2lmKHApe3JldHVybltiLmNyZWF0ZUVsZW1lbnQocFsxXSldfXA9US5idWlsZEZyYWdtZW50KFthXSxiLHMpO2lmKHMmJnMubGVuZ3RoKXtRKHMpLnJlbW92ZSgpfXJldHVybiBRLm1lcmdlKFtdLHAuY2hpbGROb2Rlcyl9O3ZhciBuMz1RLmZuLmxvYWQ7US5mbi5sb2FkPWZ1bmN0aW9uKGEscCxiKXtpZih0eXBlb2YgYSE9PSJzdHJpbmciJiZuMyl7cmV0dXJuIG4zLmFwcGx5KHRoaXMsYXJndW1lbnRzKX12YXIgcyxyLHQsaj10aGlzLGw9YS5pbmRleE9mKCIgIik7aWYobD49MCl7cz1RLnRyaW0oYS5zbGljZShsLGEubGVuZ3RoKSk7YT1hLnNsaWNlKDAsbCl9aWYoUS5pc0Z1bmN0aW9uKHApKXtiPXA7cD11bmRlZmluZWR9ZWxzZSBpZihwJiZ0eXBlb2YgcD09PSJvYmplY3QiKXt0PSJQT1NUIn1pZihqLmxlbmd0aD4wKXtRLmFqYXgoe3VybDphLHR5cGU6dCxkYXRhVHlwZToiaHRtbCIsZGF0YTpwfSkuZG9uZShmdW5jdGlvbihtKXtyPWFyZ3VtZW50cztqLmh0bWwocz9RKCI8ZGl2PiIpLmFwcGVuZChRLnBhcnNlSFRNTChtKSkuZmluZChzKTptKX0pLmNvbXBsZXRlKGImJmZ1bmN0aW9uKG0sbil7ai5lYWNoKGIscnx8W20ucmVzcG9uc2VUZXh0LG4sbV0pfSl9cmV0dXJuIHRoaXN9O1EuZXhwci5maWx0ZXJzLmFuaW1hdGVkPWZ1bmN0aW9uKGEpe3JldHVybiBRLmdyZXAoUS50aW1lcnMsZnVuY3Rpb24oYil7cmV0dXJuIGE9PT1iLmVsZW19KS5sZW5ndGh9O3ZhciBvMz13LmRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtmdW5jdGlvbiBwMyhhKXtyZXR1cm4gUS5pc1dpbmRvdyhhKT9hOmEubm9kZVR5cGU9PT05P2EuZGVmYXVsdFZpZXd8fGEucGFyZW50V2luZG93OmZhbHNlfVEub2Zmc2V0PXtzZXRPZmZzZXQ6ZnVuY3Rpb24oYSxiLGkpe3ZhciBqLGwsbSxuLHAscixzLHQ9US5jc3MoYSwicG9zaXRpb24iKSx2PVEoYSksXz17fTtpZih0PT09InN0YXRpYyIpe2Euc3R5bGUucG9zaXRpb249InJlbGF0aXZlIn1wPXYub2Zmc2V0KCk7bT1RLmNzcyhhLCJ0b3AiKTtyPVEuY3NzKGEsImxlZnQiKTtzPSh0PT09ImFic29sdXRlInx8dD09PSJmaXhlZCIpJiZRLmluQXJyYXkoImF1dG8iLFttLHJdKT4tMTtpZihzKXtqPXYucG9zaXRpb24oKTtuPWoudG9wO2w9ai5sZWZ0fWVsc2V7bj1wYXJzZUZsb2F0KG0pfHwwO2w9cGFyc2VGbG9hdChyKXx8MH1pZihRLmlzRnVuY3Rpb24oYikpe2I9Yi5jYWxsKGEsaSxwKX1pZihiLnRvcCE9bnVsbCl7Xy50b3A9KGIudG9wLXAudG9wKStufWlmKGIubGVmdCE9bnVsbCl7Xy5sZWZ0PShiLmxlZnQtcC5sZWZ0KStsfWlmKCJ1c2luZyJpbiBiKXtiLnVzaW5nLmNhbGwoYSxfKX1lbHNle3YuY3NzKF8pfX19O1EuZm4uZXh0ZW5kKHtvZmZzZXQ6ZnVuY3Rpb24oYSl7aWYoYXJndW1lbnRzLmxlbmd0aCl7cmV0dXJuIGE9PT11bmRlZmluZWQ/dGhpczp0aGlzLmVhY2goZnVuY3Rpb24oaSl7US5vZmZzZXQuc2V0T2Zmc2V0KHRoaXMsYSxpKX0pfXZhciBvMyxiLGo9e3RvcDowLGxlZnQ6MH0sbD10aGlzWzBdLG09bCYmbC5vd25lckRvY3VtZW50O2lmKCFtKXtyZXR1cm59bzM9bS5kb2N1bWVudEVsZW1lbnQ7aWYoIVEuY29udGFpbnMobzMsbCkpe3JldHVybiBqfWlmKHR5cGVvZiBsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCE9PVgpe2o9bC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKX1iPXAzKG0pO3JldHVybnt0b3A6ai50b3ArKGIucGFnZVlPZmZzZXR8fG8zLnNjcm9sbFRvcCktKG8zLmNsaWVudFRvcHx8MCksbGVmdDpqLmxlZnQrKGIucGFnZVhPZmZzZXR8fG8zLnNjcm9sbExlZnQpLShvMy5jbGllbnRMZWZ0fHwwKX19LHBvc2l0aW9uOmZ1bmN0aW9uKCl7aWYoIXRoaXNbMF0pe3JldHVybn12YXIgYSxiLHA9e3RvcDowLGxlZnQ6MH0saj10aGlzWzBdO2lmKFEuY3NzKGosInBvc2l0aW9uIik9PT0iZml4ZWQiKXtiPWouZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCl9ZWxzZXthPXRoaXMub2Zmc2V0UGFyZW50KCk7Yj10aGlzLm9mZnNldCgpO2lmKCFRLm5vZGVOYW1lKGFbMF0sImh0bWwiKSl7cD1hLm9mZnNldCgpfXAudG9wKz1RLmNzcyhhWzBdLCJib3JkZXJUb3BXaWR0aCIsdHJ1ZSk7cC5sZWZ0Kz1RLmNzcyhhWzBdLCJib3JkZXJMZWZ0V2lkdGgiLHRydWUpfXJldHVybnt0b3A6Yi50b3AtcC50b3AtUS5jc3MoaiwibWFyZ2luVG9wIix0cnVlKSxsZWZ0OmIubGVmdC1wLmxlZnQtUS5jc3MoaiwibWFyZ2luTGVmdCIsdHJ1ZSl9fSxvZmZzZXRQYXJlbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24oKXt2YXIgYT10aGlzLm9mZnNldFBhcmVudHx8bzM7d2hpbGUoYSYmKCFRLm5vZGVOYW1lKGEsImh0bWwiKSYmUS5jc3MoYSwicG9zaXRpb24iKT09PSJzdGF0aWMiKSl7YT1hLm9mZnNldFBhcmVudH1yZXR1cm4gYXx8bzN9KX19KTtRLmVhY2goe3Njcm9sbExlZnQ6InBhZ2VYT2Zmc2V0IixzY3JvbGxUb3A6InBhZ2VZT2Zmc2V0In0sZnVuY3Rpb24obSxwKXt2YXIgdD0vWS8udGVzdChwKTtRLmZuW21dPWZ1bmN0aW9uKHYpe3JldHVybiBnMSh0aGlzLGZ1bmN0aW9uKGEsbSx2KXt2YXIgYj1wMyhhKTtpZih2PT09dW5kZWZpbmVkKXtyZXR1cm4gYj8ocCBpbiBiKT9iW3BdOmIuZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50W21dOmFbbV19aWYoYil7Yi5zY3JvbGxUbyghdD92OlEoYikuc2Nyb2xsTGVmdCgpLHQ/djpRKGIpLnNjcm9sbFRvcCgpKX1lbHNle2FbbV09dn19LG0sdixhcmd1bWVudHMubGVuZ3RoLG51bGwpfX0pO1EuZWFjaChbInRvcCIsImxlZnQiXSxmdW5jdGlvbihpLHApe1EuY3NzSG9va3NbcF09WTEoeC5waXhlbFBvc2l0aW9uLGZ1bmN0aW9uKGEsYil7aWYoYil7Yj1XMShhLHApO3JldHVybiBVMS50ZXN0KGIpP1EoYSkucG9zaXRpb24oKVtwXSsicHgiOmJ9fSl9KTtRLmVhY2goe0hlaWdodDoiaGVpZ2h0IixXaWR0aDoid2lkdGgifSxmdW5jdGlvbihuLHQpe1EuZWFjaCh7cGFkZGluZzoiaW5uZXIiK24sY29udGVudDp0LCIiOiJvdXRlciIrbn0sZnVuY3Rpb24oYSxiKXtRLmZuW2JdPWZ1bmN0aW9uKG0sdil7dmFyIGo9YXJndW1lbnRzLmxlbmd0aCYmKGF8fHR5cGVvZiBtIT09ImJvb2xlYW4iKSxsPWF8fChtPT09dHJ1ZXx8dj09PXRydWU/Im1hcmdpbiI6ImJvcmRlciIpO3JldHVybiBnMSh0aGlzLGZ1bmN0aW9uKHAsdCx2KXt2YXIgcjtpZihRLmlzV2luZG93KHApKXtyZXR1cm4gcC5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnRbImNsaWVudCIrbl19aWYocC5ub2RlVHlwZT09PTkpe3I9cC5kb2N1bWVudEVsZW1lbnQ7cmV0dXJuIE1hdGgubWF4KHAuYm9keVsic2Nyb2xsIituXSxyWyJzY3JvbGwiK25dLHAuYm9keVsib2Zmc2V0IituXSxyWyJvZmZzZXQiK25dLHJbImNsaWVudCIrbl0pfXJldHVybiB2PT09dW5kZWZpbmVkP1EuY3NzKHAsdCxsKTpRLnN0eWxlKHAsdCx2LGwpfSx0LGo/bTp1bmRlZmluZWQsaixudWxsKX19KX0pO1EuZm4uc2l6ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmxlbmd0aH07US5mbi5hbmRTZWxmPVEuZm4uYWRkQmFjaztpZih0eXBlb2YgZGVmaW5lPT09ImZ1bmN0aW9uIiYmZGVmaW5lLmFtZCl7ZGVmaW5lKCJqcXVlcnkiLFtdLGZ1bmN0aW9uKCl7cmV0dXJuIFF9KX12YXIgcTM9dy5qUXVlcnksXyQ9dy4kO1Eubm9Db25mbGljdD1mdW5jdGlvbihhKXtpZih3LiQ9PT1RKXt3LiQ9XyR9aWYoYSYmdy5qUXVlcnk9PT1RKXt3LmpRdWVyeT1xM31yZXR1cm4gUX07aWYodHlwZW9mIGM9PT1YKXt3LmpRdWVyeT13LiQ9UX1yZXR1cm4gUX0pKTsNCi8qIQ0KICogalF1ZXJ5IFVJIENvcmUgMS4xMC40DQogKiBodHRwOi8vanF1ZXJ5dWkuY29tDQogKg0KICogQ29weXJpZ2h0IDIwMTQgalF1ZXJ5IEZvdW5kYXRpb24gYW5kIG90aGVyIGNvbnRyaWJ1dG9ycw0KICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLg0KICogaHR0cDovL2pxdWVyeS5vcmcvbGljZW5zZQ0KICoNCiAqIGh0dHA6Ly9hcGkuanF1ZXJ5dWkuY29tL2NhdGVnb3J5L3VpLWNvcmUvDQogKi8NCihmdW5jdGlvbigkLHUpe3ZhciBiPTAscj0vXnVpLWlkLVxkKyQvOyQudWk9JC51aXx8e307JC5leHRlbmQoJC51aSx7dmVyc2lvbjoiMS4xMC40IixrZXlDb2RlOntCQUNLU1BBQ0U6OCxDT01NQToxODgsREVMRVRFOjQ2LERPV046NDAsRU5EOjM1LEVOVEVSOjEzLEVTQ0FQRToyNyxIT01FOjM2LExFRlQ6MzcsTlVNUEFEX0FERDoxMDcsTlVNUEFEX0RFQ0lNQUw6MTEwLE5VTVBBRF9ESVZJREU6MTExLE5VTVBBRF9FTlRFUjoxMDgsTlVNUEFEX01VTFRJUExZOjEwNixOVU1QQURfU1VCVFJBQ1Q6MTA5LFBBR0VfRE9XTjozNCxQQUdFX1VQOjMzLFBFUklPRDoxOTAsUklHSFQ6MzksU1BBQ0U6MzIsVEFCOjksVVA6Mzh9fSk7JC5mbi5leHRlbmQoe2ZvY3VzOihmdW5jdGlvbihvKXtyZXR1cm4gZnVuY3Rpb24oZCxhKXtyZXR1cm4gdHlwZW9mIGQ9PT0ibnVtYmVyIj90aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgZT10aGlzO3NldFRpbWVvdXQoZnVuY3Rpb24oKXskKGUpLmZvY3VzKCk7aWYoYSl7YS5jYWxsKGUpfX0sZCl9KTpvLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19KSgkLmZuLmZvY3VzKSxzY3JvbGxQYXJlbnQ6ZnVuY3Rpb24oKXt2YXIgcztpZigoJC51aS5pZSYmKC8oc3RhdGljfHJlbGF0aXZlKS8pLnRlc3QodGhpcy5jc3MoInBvc2l0aW9uIikpKXx8KC9hYnNvbHV0ZS8pLnRlc3QodGhpcy5jc3MoInBvc2l0aW9uIikpKXtzPXRoaXMucGFyZW50cygpLmZpbHRlcihmdW5jdGlvbigpe3JldHVybigvKHJlbGF0aXZlfGFic29sdXRlfGZpeGVkKS8pLnRlc3QoJC5jc3ModGhpcywicG9zaXRpb24iKSkmJigvKGF1dG98c2Nyb2xsKS8pLnRlc3QoJC5jc3ModGhpcywib3ZlcmZsb3ciKSskLmNzcyh0aGlzLCJvdmVyZmxvdy15IikrJC5jc3ModGhpcywib3ZlcmZsb3cteCIpKX0pLmVxKDApfWVsc2V7cz10aGlzLnBhcmVudHMoKS5maWx0ZXIoZnVuY3Rpb24oKXtyZXR1cm4oLyhhdXRvfHNjcm9sbCkvKS50ZXN0KCQuY3NzKHRoaXMsIm92ZXJmbG93IikrJC5jc3ModGhpcywib3ZlcmZsb3cteSIpKyQuY3NzKHRoaXMsIm92ZXJmbG93LXgiKSl9KS5lcSgwKX1yZXR1cm4oL2ZpeGVkLykudGVzdCh0aGlzLmNzcygicG9zaXRpb24iKSl8fCFzLmxlbmd0aD8kKGRvY3VtZW50KTpzfSx6SW5kZXg6ZnVuY3Rpb24oeil7aWYoeiE9PXUpe3JldHVybiB0aGlzLmNzcygiekluZGV4Iix6KX1pZih0aGlzLmxlbmd0aCl7dmFyIGU9JCh0aGlzWzBdKSxwLGE7d2hpbGUoZS5sZW5ndGgmJmVbMF0hPT1kb2N1bWVudCl7cD1lLmNzcygicG9zaXRpb24iKTtpZihwPT09ImFic29sdXRlInx8cD09PSJyZWxhdGl2ZSJ8fHA9PT0iZml4ZWQiKXthPXBhcnNlSW50KGUuY3NzKCJ6SW5kZXgiKSwxMCk7aWYoIWlzTmFOKGEpJiZhIT09MCl7cmV0dXJuIGF9fWU9ZS5wYXJlbnQoKX19cmV0dXJuIDB9LHVuaXF1ZUlkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe2lmKCF0aGlzLmlkKXt0aGlzLmlkPSJ1aS1pZC0iKygrK2IpfX0pfSxyZW1vdmVVbmlxdWVJZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtpZihyLnRlc3QodGhpcy5pZCkpeyQodGhpcykucmVtb3ZlQXR0cigiaWQiKX19KX19KTtmdW5jdGlvbiBmKGUsaSl7dmFyIG0sYSxjLG49ZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO2lmKCJhcmVhIj09PW4pe209ZS5wYXJlbnROb2RlO2E9bS5uYW1lO2lmKCFlLmhyZWZ8fCFhfHxtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkhPT0ibWFwIil7cmV0dXJuIGZhbHNlfWM9JCgiaW1nW3VzZW1hcD0jIithKyJdIilbMF07cmV0dXJuISFjJiZ2KGMpfXJldHVybigvaW5wdXR8c2VsZWN0fHRleHRhcmVhfGJ1dHRvbnxvYmplY3QvLnRlc3Qobik/IWUuZGlzYWJsZWQ6ImEiPT09bj9lLmhyZWZ8fGk6aSkmJnYoZSl9ZnVuY3Rpb24gdihlKXtyZXR1cm4gJC5leHByLmZpbHRlcnMudmlzaWJsZShlKSYmISQoZSkucGFyZW50cygpLmFkZEJhY2soKS5maWx0ZXIoZnVuY3Rpb24oKXtyZXR1cm4gJC5jc3ModGhpcywidmlzaWJpbGl0eSIpPT09ImhpZGRlbiJ9KS5sZW5ndGh9JC5leHRlbmQoJC5leHByWyI6Il0se2RhdGE6JC5leHByLmNyZWF0ZVBzZXVkbz8kLmV4cHIuY3JlYXRlUHNldWRvKGZ1bmN0aW9uKGQpe3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4hISQuZGF0YShlLGQpfX0pOmZ1bmN0aW9uKGUsaSxtKXtyZXR1cm4hISQuZGF0YShlLG1bM10pfSxmb2N1c2FibGU6ZnVuY3Rpb24oZSl7cmV0dXJuIGYoZSwhaXNOYU4oJC5hdHRyKGUsInRhYmluZGV4IikpKX0sdGFiYmFibGU6ZnVuY3Rpb24oZSl7dmFyIHQ9JC5hdHRyKGUsInRhYmluZGV4IiksaT1pc05hTih0KTtyZXR1cm4oaXx8dD49MCkmJmYoZSwhaSl9fSk7aWYoISQoIjxhPiIpLm91dGVyV2lkdGgoMSkuanF1ZXJ5KXskLmVhY2goWyJXaWR0aCIsIkhlaWdodCJdLGZ1bmN0aW9uKGksbil7dmFyIHM9bj09PSJXaWR0aCI/WyJMZWZ0IiwiUmlnaHQiXTpbIlRvcCIsIkJvdHRvbSJdLHQ9bi50b0xvd2VyQ2FzZSgpLG89e2lubmVyV2lkdGg6JC5mbi5pbm5lcldpZHRoLGlubmVySGVpZ2h0OiQuZm4uaW5uZXJIZWlnaHQsb3V0ZXJXaWR0aDokLmZuLm91dGVyV2lkdGgsb3V0ZXJIZWlnaHQ6JC5mbi5vdXRlckhlaWdodH07ZnVuY3Rpb24gYShlLGMsZCxtKXskLmVhY2gocyxmdW5jdGlvbigpe2MtPXBhcnNlRmxvYXQoJC5jc3MoZSwicGFkZGluZyIrdGhpcykpfHwwO2lmKGQpe2MtPXBhcnNlRmxvYXQoJC5jc3MoZSwiYm9yZGVyIit0aGlzKyJXaWR0aCIpKXx8MH1pZihtKXtjLT1wYXJzZUZsb2F0KCQuY3NzKGUsIm1hcmdpbiIrdGhpcykpfHwwfX0pO3JldHVybiBjfSQuZm5bImlubmVyIituXT1mdW5jdGlvbihjKXtpZihjPT09dSl7cmV0dXJuIG9bImlubmVyIituXS5jYWxsKHRoaXMpfXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXskKHRoaXMpLmNzcyh0LGEodGhpcyxjKSsicHgiKX0pfTskLmZuWyJvdXRlciIrbl09ZnVuY3Rpb24oYyxtKXtpZih0eXBlb2YgYyE9PSJudW1iZXIiKXtyZXR1cm4gb1sib3V0ZXIiK25dLmNhbGwodGhpcyxjKX1yZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7JCh0aGlzKS5jc3ModCxhKHRoaXMsYyx0cnVlLG0pKyJweCIpfSl9fSl9aWYoISQuZm4uYWRkQmFjayl7JC5mbi5hZGRCYWNrPWZ1bmN0aW9uKHMpe3JldHVybiB0aGlzLmFkZChzPT1udWxsP3RoaXMucHJldk9iamVjdDp0aGlzLnByZXZPYmplY3QuZmlsdGVyKHMpKX19aWYoJCgiPGE+IikuZGF0YSgiYS1iIiwiYSIpLnJlbW92ZURhdGEoImEtYiIpLmRhdGEoImEtYiIpKXskLmZuLnJlbW92ZURhdGE9KGZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihrKXtpZihhcmd1bWVudHMubGVuZ3RoKXtyZXR1cm4gYS5jYWxsKHRoaXMsJC5jYW1lbENhc2UoaykpfWVsc2V7cmV0dXJuIGEuY2FsbCh0aGlzKX19fSkoJC5mbi5yZW1vdmVEYXRhKX0kLnVpLmllPSEhL21zaWUgW1x3Ll0rLy5leGVjKG5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKSk7JC5zdXBwb3J0LnNlbGVjdHN0YXJ0PSJvbnNlbGVjdHN0YXJ0ImluIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOyQuZm4uZXh0ZW5kKHtkaXNhYmxlU2VsZWN0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYmluZCgoJC5zdXBwb3J0LnNlbGVjdHN0YXJ0PyJzZWxlY3RzdGFydCI6Im1vdXNlZG93biIpKyIudWktZGlzYWJsZVNlbGVjdGlvbiIsZnVuY3Rpb24oZSl7ZS5wcmV2ZW50RGVmYXVsdCgpfSl9LGVuYWJsZVNlbGVjdGlvbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLnVuYmluZCgiLnVpLWRpc2FibGVTZWxlY3Rpb24iKX19KTskLmV4dGVuZCgkLnVpLHtwbHVnaW46e2FkZDpmdW5jdGlvbihtLG8scyl7dmFyIGkscD0kLnVpW21dLnByb3RvdHlwZTtmb3IoaSBpbiBzKXtwLnBsdWdpbnNbaV09cC5wbHVnaW5zW2ldfHxbXTtwLnBsdWdpbnNbaV0ucHVzaChbbyxzW2ldXSl9fSxjYWxsOmZ1bmN0aW9uKGEsbixjKXt2YXIgaSxzPWEucGx1Z2luc1tuXTtpZighc3x8IWEuZWxlbWVudFswXS5wYXJlbnROb2RlfHxhLmVsZW1lbnRbMF0ucGFyZW50Tm9kZS5ub2RlVHlwZT09PTExKXtyZXR1cm59Zm9yKGk9MDtpPHMubGVuZ3RoO2krKyl7aWYoYS5vcHRpb25zW3NbaV1bMF1dKXtzW2ldWzFdLmFwcGx5KGEuZWxlbWVudCxjKX19fX0saGFzU2Nyb2xsOmZ1bmN0aW9uKGUsYSl7aWYoJChlKS5jc3MoIm92ZXJmbG93Iik9PT0iaGlkZGVuIil7cmV0dXJuIGZhbHNlfXZhciBzPShhJiZhPT09ImxlZnQiKT8ic2Nyb2xsTGVmdCI6InNjcm9sbFRvcCIsaD1mYWxzZTtpZihlW3NdPjApe3JldHVybiB0cnVlfWVbc109MTtoPShlW3NdPjApO2Vbc109MDtyZXR1cm4gaH19KX0pKGpRdWVyeSk7DQovKiENCiAqIGpRdWVyeSBVSSBEYXRlcGlja2VyIDEuMTAuNA0KICogaHR0cDovL2pxdWVyeXVpLmNvbQ0KICoNCiAqIENvcHlyaWdodCAyMDE0IGpRdWVyeSBGb3VuZGF0aW9uIGFuZCBvdGhlciBjb250cmlidXRvcnMNCiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS4NCiAqIGh0dHA6Ly9qcXVlcnkub3JnL2xpY2Vuc2UNCiAqDQogKiBodHRwOi8vYXBpLmpxdWVyeXVpLmNvbS9kYXRlcGlja2VyLw0KICoNCiAqIERlcGVuZHM6DQogKglqcXVlcnkudWkuY29yZS5qcw0KICovDQooZnVuY3Rpb24oJCx1KXskLmV4dGVuZCgkLnVpLHtkYXRlcGlja2VyOnt2ZXJzaW9uOiIxLjEwLjQifX0pO3ZhciBQPSJkYXRlcGlja2VyIixjO2Z1bmN0aW9uIEQoKXt0aGlzLl9jdXJJbnN0PW51bGw7dGhpcy5fa2V5RXZlbnQ9ZmFsc2U7dGhpcy5fZGlzYWJsZWRJbnB1dHM9W107dGhpcy5fZGF0ZXBpY2tlclNob3dpbmc9ZmFsc2U7dGhpcy5faW5EaWFsb2c9ZmFsc2U7dGhpcy5fbWFpbkRpdklkPSJ1aS1kYXRlcGlja2VyLWRpdiI7dGhpcy5faW5saW5lQ2xhc3M9InVpLWRhdGVwaWNrZXItaW5saW5lIjt0aGlzLl9hcHBlbmRDbGFzcz0idWktZGF0ZXBpY2tlci1hcHBlbmQiO3RoaXMuX3RyaWdnZXJDbGFzcz0idWktZGF0ZXBpY2tlci10cmlnZ2VyIjt0aGlzLl9kaWFsb2dDbGFzcz0idWktZGF0ZXBpY2tlci1kaWFsb2ciO3RoaXMuX2Rpc2FibGVDbGFzcz0idWktZGF0ZXBpY2tlci1kaXNhYmxlZCI7dGhpcy5fdW5zZWxlY3RhYmxlQ2xhc3M9InVpLWRhdGVwaWNrZXItdW5zZWxlY3RhYmxlIjt0aGlzLl9jdXJyZW50Q2xhc3M9InVpLWRhdGVwaWNrZXItY3VycmVudC1kYXkiO3RoaXMuX2RheU92ZXJDbGFzcz0idWktZGF0ZXBpY2tlci1kYXlzLWNlbGwtb3ZlciI7dGhpcy5yZWdpb25hbD1bXTt0aGlzLnJlZ2lvbmFsWyIiXT17Y2xvc2VUZXh0OiJEb25lIixwcmV2VGV4dDoiUHJldiIsbmV4dFRleHQ6Ik5leHQiLGN1cnJlbnRUZXh0OiJUb2RheSIsbW9udGhOYW1lczpbIkphbnVhcnkiLCJGZWJydWFyeSIsIk1hcmNoIiwiQXByaWwiLCJNYXkiLCJKdW5lIiwiSnVseSIsIkF1Z3VzdCIsIlNlcHRlbWJlciIsIk9jdG9iZXIiLCJOb3ZlbWJlciIsIkRlY2VtYmVyIl0sbW9udGhOYW1lc1Nob3J0OlsiSmFuIiwiRmViIiwiTWFyIiwiQXByIiwiTWF5IiwiSnVuIiwiSnVsIiwiQXVnIiwiU2VwIiwiT2N0IiwiTm92IiwiRGVjIl0sZGF5TmFtZXM6WyJTdW5kYXkiLCJNb25kYXkiLCJUdWVzZGF5IiwiV2VkbmVzZGF5IiwiVGh1cnNkYXkiLCJGcmlkYXkiLCJTYXR1cmRheSJdLGRheU5hbWVzU2hvcnQ6WyJTdW4iLCJNb24iLCJUdWUiLCJXZWQiLCJUaHUiLCJGcmkiLCJTYXQiXSxkYXlOYW1lc01pbjpbIlN1IiwiTW8iLCJUdSIsIldlIiwiVGgiLCJGciIsIlNhIl0sd2Vla0hlYWRlcjoiV2siLGRhdGVGb3JtYXQ6Im1tL2RkL3l5IixmaXJzdERheTowLGlzUlRMOmZhbHNlLHNob3dNb250aEFmdGVyWWVhcjpmYWxzZSx5ZWFyU3VmZml4OiIifTt0aGlzLl9kZWZhdWx0cz17c2hvd09uOiJmb2N1cyIsc2hvd0FuaW06ImZhZGVJbiIsc2hvd09wdGlvbnM6e30sZGVmYXVsdERhdGU6bnVsbCxhcHBlbmRUZXh0OiIiLGJ1dHRvblRleHQ6Ii4uLiIsYnV0dG9uSW1hZ2U6IiIsYnV0dG9uSW1hZ2VPbmx5OmZhbHNlLGhpZGVJZk5vUHJldk5leHQ6ZmFsc2UsbmF2aWdhdGlvbkFzRGF0ZUZvcm1hdDpmYWxzZSxnb3RvQ3VycmVudDpmYWxzZSxjaGFuZ2VNb250aDpmYWxzZSxjaGFuZ2VZZWFyOmZhbHNlLHllYXJSYW5nZToiYy0xMDpjKzEwIixzaG93T3RoZXJNb250aHM6ZmFsc2Usc2VsZWN0T3RoZXJNb250aHM6ZmFsc2Usc2hvd1dlZWs6ZmFsc2UsY2FsY3VsYXRlV2Vlazp0aGlzLmlzbzg2MDFXZWVrLHNob3J0WWVhckN1dG9mZjoiKzEwIixtaW5EYXRlOm51bGwsbWF4RGF0ZTpudWxsLGR1cmF0aW9uOiJmYXN0IixiZWZvcmVTaG93RGF5Om51bGwsYmVmb3JlU2hvdzpudWxsLG9uU2VsZWN0Om51bGwsb25DaGFuZ2VNb250aFllYXI6bnVsbCxvbkNsb3NlOm51bGwsbnVtYmVyT2ZNb250aHM6MSxzaG93Q3VycmVudEF0UG9zOjAsc3RlcE1vbnRoczoxLHN0ZXBCaWdNb250aHM6MTIsYWx0RmllbGQ6IiIsYWx0Rm9ybWF0OiIiLGNvbnN0cmFpbklucHV0OnRydWUsc2hvd0J1dHRvblBhbmVsOmZhbHNlLGF1dG9TaXplOmZhbHNlLGRpc2FibGVkOmZhbHNlfTskLmV4dGVuZCh0aGlzLl9kZWZhdWx0cyx0aGlzLnJlZ2lvbmFsWyIiXSk7dGhpcy5kcERpdj1kKCQoIjxkaXYgaWQ9JyIrdGhpcy5fbWFpbkRpdklkKyInIGNsYXNzPSd1aS1kYXRlcGlja2VyIHVpLXdpZGdldCB1aS13aWRnZXQtY29udGVudCB1aS1oZWxwZXItY2xlYXJmaXggdWktY29ybmVyLWFsbCc+PC9kaXY+IikpfSQuZXh0ZW5kKEQucHJvdG90eXBlLHttYXJrZXJDbGFzc05hbWU6Imhhc0RhdGVwaWNrZXIiLG1heFJvd3M6NCxfd2lkZ2V0RGF0ZXBpY2tlcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRwRGl2fSxzZXREZWZhdWx0czpmdW5jdGlvbihzKXtmKHRoaXMuX2RlZmF1bHRzLHN8fHt9KTtyZXR1cm4gdGhpc30sX2F0dGFjaERhdGVwaWNrZXI6ZnVuY3Rpb24odCxzKXt2YXIgbixpLGE7bj10Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7aT0obj09PSJkaXYifHxuPT09InNwYW4iKTtpZighdC5pZCl7dGhpcy51dWlkKz0xO3QuaWQ9ImRwIit0aGlzLnV1aWR9YT10aGlzLl9uZXdJbnN0KCQodCksaSk7YS5zZXR0aW5ncz0kLmV4dGVuZCh7fSxzfHx7fSk7aWYobj09PSJpbnB1dCIpe3RoaXMuX2Nvbm5lY3REYXRlcGlja2VyKHQsYSl9ZWxzZSBpZihpKXt0aGlzLl9pbmxpbmVEYXRlcGlja2VyKHQsYSl9fSxfbmV3SW5zdDpmdW5jdGlvbih0LGkpe3ZhciBhPXRbMF0uaWQucmVwbGFjZSgvKFteQS1aYS16MC05X1wtXSkvZywiXFxcXCQxIik7cmV0dXJue2lkOmEsaW5wdXQ6dCxzZWxlY3RlZERheTowLHNlbGVjdGVkTW9udGg6MCxzZWxlY3RlZFllYXI6MCxkcmF3TW9udGg6MCxkcmF3WWVhcjowLGlubGluZTppLGRwRGl2OighaT90aGlzLmRwRGl2OmQoJCgiPGRpdiBjbGFzcz0nIit0aGlzLl9pbmxpbmVDbGFzcysiIHVpLWRhdGVwaWNrZXIgdWktd2lkZ2V0IHVpLXdpZGdldC1jb250ZW50IHVpLWhlbHBlci1jbGVhcmZpeCB1aS1jb3JuZXItYWxsJz48L2Rpdj4iKSkpfX0sX2Nvbm5lY3REYXRlcGlja2VyOmZ1bmN0aW9uKHQsaSl7dmFyIGE9JCh0KTtpLmFwcGVuZD0kKFtdKTtpLnRyaWdnZXI9JChbXSk7aWYoYS5oYXNDbGFzcyh0aGlzLm1hcmtlckNsYXNzTmFtZSkpe3JldHVybn10aGlzLl9hdHRhY2htZW50cyhhLGkpO2EuYWRkQ2xhc3ModGhpcy5tYXJrZXJDbGFzc05hbWUpLmtleWRvd24odGhpcy5fZG9LZXlEb3duKS5rZXlwcmVzcyh0aGlzLl9kb0tleVByZXNzKS5rZXl1cCh0aGlzLl9kb0tleVVwKTt0aGlzLl9hdXRvU2l6ZShpKTskLmRhdGEodCxQLGkpO2lmKGkuc2V0dGluZ3MuZGlzYWJsZWQpe3RoaXMuX2Rpc2FibGVEYXRlcGlja2VyKHQpfX0sX2F0dGFjaG1lbnRzOmZ1bmN0aW9uKGksYSl7dmFyIHMsYixlLGc9dGhpcy5fZ2V0KGEsImFwcGVuZFRleHQiKSxoPXRoaXMuX2dldChhLCJpc1JUTCIpO2lmKGEuYXBwZW5kKXthLmFwcGVuZC5yZW1vdmUoKX1pZihnKXthLmFwcGVuZD0kKCI8c3BhbiBjbGFzcz0nIit0aGlzLl9hcHBlbmRDbGFzcysiJz4iK2crIjwvc3Bhbj4iKTtpW2g/ImJlZm9yZSI6ImFmdGVyIl0oYS5hcHBlbmQpfWkudW5iaW5kKCJmb2N1cyIsdGhpcy5fc2hvd0RhdGVwaWNrZXIpO2lmKGEudHJpZ2dlcil7YS50cmlnZ2VyLnJlbW92ZSgpfXM9dGhpcy5fZ2V0KGEsInNob3dPbiIpO2lmKHM9PT0iZm9jdXMifHxzPT09ImJvdGgiKXtpLmZvY3VzKHRoaXMuX3Nob3dEYXRlcGlja2VyKX1pZihzPT09ImJ1dHRvbiJ8fHM9PT0iYm90aCIpe2I9dGhpcy5fZ2V0KGEsImJ1dHRvblRleHQiKTtlPXRoaXMuX2dldChhLCJidXR0b25JbWFnZSIpO2EudHJpZ2dlcj0kKHRoaXMuX2dldChhLCJidXR0b25JbWFnZU9ubHkiKT8kKCI8aW1nLz4iKS5hZGRDbGFzcyh0aGlzLl90cmlnZ2VyQ2xhc3MpLmF0dHIoe3NyYzplLGFsdDpiLHRpdGxlOmJ9KTokKCI8YnV0dG9uIHR5cGU9J2J1dHRvbic+PC9idXR0b24+IikuYWRkQ2xhc3ModGhpcy5fdHJpZ2dlckNsYXNzKS5odG1sKCFlP2I6JCgiPGltZy8+IikuYXR0cih7c3JjOmUsYWx0OmIsdGl0bGU6Yn0pKSk7aVtoPyJiZWZvcmUiOiJhZnRlciJdKGEudHJpZ2dlcik7YS50cmlnZ2VyLmNsaWNrKGZ1bmN0aW9uKCl7aWYoJC5kYXRlcGlja2VyLl9kYXRlcGlja2VyU2hvd2luZyYmJC5kYXRlcGlja2VyLl9sYXN0SW5wdXQ9PT1pWzBdKXskLmRhdGVwaWNrZXIuX2hpZGVEYXRlcGlja2VyKCl9ZWxzZSBpZigkLmRhdGVwaWNrZXIuX2RhdGVwaWNrZXJTaG93aW5nJiYkLmRhdGVwaWNrZXIuX2xhc3RJbnB1dCE9PWlbMF0peyQuZGF0ZXBpY2tlci5faGlkZURhdGVwaWNrZXIoKTskLmRhdGVwaWNrZXIuX3Nob3dEYXRlcGlja2VyKGlbMF0pfWVsc2V7JC5kYXRlcGlja2VyLl9zaG93RGF0ZXBpY2tlcihpWzBdKX1yZXR1cm4gZmFsc2V9KX19LF9hdXRvU2l6ZTpmdW5jdGlvbihhKXtpZih0aGlzLl9nZXQoYSwiYXV0b1NpemUiKSYmIWEuaW5saW5lKXt2YXIgYixtLGUsaSxnPW5ldyBEYXRlKDIwMDksMTItMSwyMCksaD10aGlzLl9nZXQoYSwiZGF0ZUZvcm1hdCIpO2lmKGgubWF0Y2goL1tETV0vKSl7Yj1mdW5jdGlvbihuKXttPTA7ZT0wO2ZvcihpPTA7aTxuLmxlbmd0aDtpKyspe2lmKG5baV0ubGVuZ3RoPm0pe209bltpXS5sZW5ndGg7ZT1pfX1yZXR1cm4gZX07Zy5zZXRNb250aChiKHRoaXMuX2dldChhLChoLm1hdGNoKC9NTS8pPyJtb250aE5hbWVzIjoibW9udGhOYW1lc1Nob3J0IikpKSk7Zy5zZXREYXRlKGIodGhpcy5fZ2V0KGEsKGgubWF0Y2goL0RELyk/ImRheU5hbWVzIjoiZGF5TmFtZXNTaG9ydCIpKSkrMjAtZy5nZXREYXkoKSl9YS5pbnB1dC5hdHRyKCJzaXplIix0aGlzLl9mb3JtYXREYXRlKGEsZykubGVuZ3RoKX19LF9pbmxpbmVEYXRlcGlja2VyOmZ1bmN0aW9uKHQsaSl7dmFyIGE9JCh0KTtpZihhLmhhc0NsYXNzKHRoaXMubWFya2VyQ2xhc3NOYW1lKSl7cmV0dXJufWEuYWRkQ2xhc3ModGhpcy5tYXJrZXJDbGFzc05hbWUpLmFwcGVuZChpLmRwRGl2KTskLmRhdGEodCxQLGkpO3RoaXMuX3NldERhdGUoaSx0aGlzLl9nZXREZWZhdWx0RGF0ZShpKSx0cnVlKTt0aGlzLl91cGRhdGVEYXRlcGlja2VyKGkpO3RoaXMuX3VwZGF0ZUFsdGVybmF0ZShpKTtpZihpLnNldHRpbmdzLmRpc2FibGVkKXt0aGlzLl9kaXNhYmxlRGF0ZXBpY2tlcih0KX1pLmRwRGl2LmNzcygiZGlzcGxheSIsImJsb2NrIil9LF9kaWFsb2dEYXRlcGlja2VyOmZ1bmN0aW9uKGksYSxvLHMscCl7dmFyIGIsZSxnLGgsaixrPXRoaXMuX2RpYWxvZ0luc3Q7aWYoIWspe3RoaXMudXVpZCs9MTtiPSJkcCIrdGhpcy51dWlkO3RoaXMuX2RpYWxvZ0lucHV0PSQoIjxpbnB1dCB0eXBlPSd0ZXh0JyBpZD0nIitiKyInIHN0eWxlPSdwb3NpdGlvbjogYWJzb2x1dGU7IHRvcDogLTEwMHB4OyB3aWR0aDogMHB4OycvPiIpO3RoaXMuX2RpYWxvZ0lucHV0LmtleWRvd24odGhpcy5fZG9LZXlEb3duKTskKCJib2R5IikuYXBwZW5kKHRoaXMuX2RpYWxvZ0lucHV0KTtrPXRoaXMuX2RpYWxvZ0luc3Q9dGhpcy5fbmV3SW5zdCh0aGlzLl9kaWFsb2dJbnB1dCxmYWxzZSk7ay5zZXR0aW5ncz17fTskLmRhdGEodGhpcy5fZGlhbG9nSW5wdXRbMF0sUCxrKX1mKGsuc2V0dGluZ3Msc3x8e30pO2E9KGEmJmEuY29uc3RydWN0b3I9PT1EYXRlP3RoaXMuX2Zvcm1hdERhdGUoayxhKTphKTt0aGlzLl9kaWFsb2dJbnB1dC52YWwoYSk7dGhpcy5fcG9zPShwPyhwLmxlbmd0aD9wOltwLnBhZ2VYLHAucGFnZVldKTpudWxsKTtpZighdGhpcy5fcG9zKXtlPWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aDtnPWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQ7aD1kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsTGVmdHx8ZG9jdW1lbnQuYm9keS5zY3JvbGxMZWZ0O2o9ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcHx8ZG9jdW1lbnQuYm9keS5zY3JvbGxUb3A7dGhpcy5fcG9zPVsoZS8yKS0xMDAraCwoZy8yKS0xNTAral19dGhpcy5fZGlhbG9nSW5wdXQuY3NzKCJsZWZ0IiwodGhpcy5fcG9zWzBdKzIwKSsicHgiKS5jc3MoInRvcCIsdGhpcy5fcG9zWzFdKyJweCIpO2suc2V0dGluZ3Mub25TZWxlY3Q9bzt0aGlzLl9pbkRpYWxvZz10cnVlO3RoaXMuZHBEaXYuYWRkQ2xhc3ModGhpcy5fZGlhbG9nQ2xhc3MpO3RoaXMuX3Nob3dEYXRlcGlja2VyKHRoaXMuX2RpYWxvZ0lucHV0WzBdKTtpZigkLmJsb2NrVUkpeyQuYmxvY2tVSSh0aGlzLmRwRGl2KX0kLmRhdGEodGhpcy5fZGlhbG9nSW5wdXRbMF0sUCxrKTtyZXR1cm4gdGhpc30sX2Rlc3Ryb3lEYXRlcGlja2VyOmZ1bmN0aW9uKHQpe3ZhciBuLGE9JCh0KSxpPSQuZGF0YSh0LFApO2lmKCFhLmhhc0NsYXNzKHRoaXMubWFya2VyQ2xhc3NOYW1lKSl7cmV0dXJufW49dC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpOyQucmVtb3ZlRGF0YSh0LFApO2lmKG49PT0iaW5wdXQiKXtpLmFwcGVuZC5yZW1vdmUoKTtpLnRyaWdnZXIucmVtb3ZlKCk7YS5yZW1vdmVDbGFzcyh0aGlzLm1hcmtlckNsYXNzTmFtZSkudW5iaW5kKCJmb2N1cyIsdGhpcy5fc2hvd0RhdGVwaWNrZXIpLnVuYmluZCgia2V5ZG93biIsdGhpcy5fZG9LZXlEb3duKS51bmJpbmQoImtleXByZXNzIix0aGlzLl9kb0tleVByZXNzKS51bmJpbmQoImtleXVwIix0aGlzLl9kb0tleVVwKX1lbHNlIGlmKG49PT0iZGl2Inx8bj09PSJzcGFuIil7YS5yZW1vdmVDbGFzcyh0aGlzLm1hcmtlckNsYXNzTmFtZSkuZW1wdHkoKX19LF9lbmFibGVEYXRlcGlja2VyOmZ1bmN0aW9uKHQpe3ZhciBuLGksYT0kKHQpLGI9JC5kYXRhKHQsUCk7aWYoIWEuaGFzQ2xhc3ModGhpcy5tYXJrZXJDbGFzc05hbWUpKXtyZXR1cm59bj10Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7aWYobj09PSJpbnB1dCIpe3QuZGlzYWJsZWQ9ZmFsc2U7Yi50cmlnZ2VyLmZpbHRlcigiYnV0dG9uIikuZWFjaChmdW5jdGlvbigpe3RoaXMuZGlzYWJsZWQ9ZmFsc2V9KS5lbmQoKS5maWx0ZXIoImltZyIpLmNzcyh7b3BhY2l0eToiMS4wIixjdXJzb3I6IiJ9KX1lbHNlIGlmKG49PT0iZGl2Inx8bj09PSJzcGFuIil7aT1hLmNoaWxkcmVuKCIuIit0aGlzLl9pbmxpbmVDbGFzcyk7aS5jaGlsZHJlbigpLnJlbW92ZUNsYXNzKCJ1aS1zdGF0ZS1kaXNhYmxlZCIpO2kuZmluZCgic2VsZWN0LnVpLWRhdGVwaWNrZXItbW9udGgsIHNlbGVjdC51aS1kYXRlcGlja2VyLXllYXIiKS5wcm9wKCJkaXNhYmxlZCIsZmFsc2UpfXRoaXMuX2Rpc2FibGVkSW5wdXRzPSQubWFwKHRoaXMuX2Rpc2FibGVkSW5wdXRzLGZ1bmN0aW9uKHYpe3JldHVybih2PT09dD9udWxsOnYpfSl9LF9kaXNhYmxlRGF0ZXBpY2tlcjpmdW5jdGlvbih0KXt2YXIgbixpLGE9JCh0KSxiPSQuZGF0YSh0LFApO2lmKCFhLmhhc0NsYXNzKHRoaXMubWFya2VyQ2xhc3NOYW1lKSl7cmV0dXJufW49dC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO2lmKG49PT0iaW5wdXQiKXt0LmRpc2FibGVkPXRydWU7Yi50cmlnZ2VyLmZpbHRlcigiYnV0dG9uIikuZWFjaChmdW5jdGlvbigpe3RoaXMuZGlzYWJsZWQ9dHJ1ZX0pLmVuZCgpLmZpbHRlcigiaW1nIikuY3NzKHtvcGFjaXR5OiIwLjUiLGN1cnNvcjoiZGVmYXVsdCJ9KX1lbHNlIGlmKG49PT0iZGl2Inx8bj09PSJzcGFuIil7aT1hLmNoaWxkcmVuKCIuIit0aGlzLl9pbmxpbmVDbGFzcyk7aS5jaGlsZHJlbigpLmFkZENsYXNzKCJ1aS1zdGF0ZS1kaXNhYmxlZCIpO2kuZmluZCgic2VsZWN0LnVpLWRhdGVwaWNrZXItbW9udGgsIHNlbGVjdC51aS1kYXRlcGlja2VyLXllYXIiKS5wcm9wKCJkaXNhYmxlZCIsdHJ1ZSl9dGhpcy5fZGlzYWJsZWRJbnB1dHM9JC5tYXAodGhpcy5fZGlzYWJsZWRJbnB1dHMsZnVuY3Rpb24odil7cmV0dXJuKHY9PT10P251bGw6dil9KTt0aGlzLl9kaXNhYmxlZElucHV0c1t0aGlzLl9kaXNhYmxlZElucHV0cy5sZW5ndGhdPXR9LF9pc0Rpc2FibGVkRGF0ZXBpY2tlcjpmdW5jdGlvbih0KXtpZighdCl7cmV0dXJuIGZhbHNlfWZvcih2YXIgaT0wO2k8dGhpcy5fZGlzYWJsZWRJbnB1dHMubGVuZ3RoO2krKyl7aWYodGhpcy5fZGlzYWJsZWRJbnB1dHNbaV09PT10KXtyZXR1cm4gdHJ1ZX19cmV0dXJuIGZhbHNlfSxfZ2V0SW5zdDpmdW5jdGlvbih0KXt0cnl7cmV0dXJuICQuZGF0YSh0LFApfWNhdGNoKGUpe3Rocm93Ik1pc3NpbmcgaW5zdGFuY2UgZGF0YSBmb3IgdGhpcyBkYXRlcGlja2VyIn19LF9vcHRpb25EYXRlcGlja2VyOmZ1bmN0aW9uKHQsbix2KXt2YXIgcyxhLG0sYixpPXRoaXMuX2dldEluc3QodCk7aWYoYXJndW1lbnRzLmxlbmd0aD09PTImJnR5cGVvZiBuPT09InN0cmluZyIpe3JldHVybihuPT09ImRlZmF1bHRzIj8kLmV4dGVuZCh7fSwkLmRhdGVwaWNrZXIuX2RlZmF1bHRzKTooaT8obj09PSJhbGwiPyQuZXh0ZW5kKHt9LGkuc2V0dGluZ3MpOnRoaXMuX2dldChpLG4pKTpudWxsKSl9cz1ufHx7fTtpZih0eXBlb2Ygbj09PSJzdHJpbmciKXtzPXt9O3Nbbl09dn1pZihpKXtpZih0aGlzLl9jdXJJbnN0PT09aSl7dGhpcy5faGlkZURhdGVwaWNrZXIoKX1hPXRoaXMuX2dldERhdGVEYXRlcGlja2VyKHQsdHJ1ZSk7bT10aGlzLl9nZXRNaW5NYXhEYXRlKGksIm1pbiIpO2I9dGhpcy5fZ2V0TWluTWF4RGF0ZShpLCJtYXgiKTtmKGkuc2V0dGluZ3Mscyk7aWYobSE9PW51bGwmJnMuZGF0ZUZvcm1hdCE9PXUmJnMubWluRGF0ZT09PXUpe2kuc2V0dGluZ3MubWluRGF0ZT10aGlzLl9mb3JtYXREYXRlKGksbSl9aWYoYiE9PW51bGwmJnMuZGF0ZUZvcm1hdCE9PXUmJnMubWF4RGF0ZT09PXUpe2kuc2V0dGluZ3MubWF4RGF0ZT10aGlzLl9mb3JtYXREYXRlKGksYil9aWYoImRpc2FibGVkImluIHMpe2lmKHMuZGlzYWJsZWQpe3RoaXMuX2Rpc2FibGVEYXRlcGlja2VyKHQpfWVsc2V7dGhpcy5fZW5hYmxlRGF0ZXBpY2tlcih0KX19dGhpcy5fYXR0YWNobWVudHMoJCh0KSxpKTt0aGlzLl9hdXRvU2l6ZShpKTt0aGlzLl9zZXREYXRlKGksYSk7dGhpcy5fdXBkYXRlQWx0ZXJuYXRlKGkpO3RoaXMuX3VwZGF0ZURhdGVwaWNrZXIoaSl9fSxfY2hhbmdlRGF0ZXBpY2tlcjpmdW5jdGlvbih0LG4sdil7dGhpcy5fb3B0aW9uRGF0ZXBpY2tlcih0LG4sdil9LF9yZWZyZXNoRGF0ZXBpY2tlcjpmdW5jdGlvbih0KXt2YXIgaT10aGlzLl9nZXRJbnN0KHQpO2lmKGkpe3RoaXMuX3VwZGF0ZURhdGVwaWNrZXIoaSl9fSxfc2V0RGF0ZURhdGVwaWNrZXI6ZnVuY3Rpb24odCxhKXt2YXIgaT10aGlzLl9nZXRJbnN0KHQpO2lmKGkpe3RoaXMuX3NldERhdGUoaSxhKTt0aGlzLl91cGRhdGVEYXRlcGlja2VyKGkpO3RoaXMuX3VwZGF0ZUFsdGVybmF0ZShpKX19LF9nZXREYXRlRGF0ZXBpY2tlcjpmdW5jdGlvbih0LG4pe3ZhciBpPXRoaXMuX2dldEluc3QodCk7aWYoaSYmIWkuaW5saW5lKXt0aGlzLl9zZXREYXRlRnJvbUZpZWxkKGksbil9cmV0dXJuKGk/dGhpcy5fZ2V0RGF0ZShpKTpudWxsKX0sX2RvS2V5RG93bjpmdW5jdGlvbihlKXt2YXIgbyxhLHMsaT0kLmRhdGVwaWNrZXIuX2dldEluc3QoZS50YXJnZXQpLGg9dHJ1ZSxiPWkuZHBEaXYuaXMoIi51aS1kYXRlcGlja2VyLXJ0bCIpO2kuX2tleUV2ZW50PXRydWU7aWYoJC5kYXRlcGlja2VyLl9kYXRlcGlja2VyU2hvd2luZyl7c3dpdGNoKGUua2V5Q29kZSl7Y2FzZSA5OiQuZGF0ZXBpY2tlci5faGlkZURhdGVwaWNrZXIoKTtoPWZhbHNlO2JyZWFrO2Nhc2UgMTM6cz0kKCJ0ZC4iKyQuZGF0ZXBpY2tlci5fZGF5T3ZlckNsYXNzKyI6bm90KC4iKyQuZGF0ZXBpY2tlci5fY3VycmVudENsYXNzKyIpIixpLmRwRGl2KTtpZihzWzBdKXskLmRhdGVwaWNrZXIuX3NlbGVjdERheShlLnRhcmdldCxpLnNlbGVjdGVkTW9udGgsaS5zZWxlY3RlZFllYXIsc1swXSl9bz0kLmRhdGVwaWNrZXIuX2dldChpLCJvblNlbGVjdCIpO2lmKG8pe2E9JC5kYXRlcGlja2VyLl9mb3JtYXREYXRlKGkpO28uYXBwbHkoKGkuaW5wdXQ/aS5pbnB1dFswXTpudWxsKSxbYSxpXSl9ZWxzZXskLmRhdGVwaWNrZXIuX2hpZGVEYXRlcGlja2VyKCl9cmV0dXJuIGZhbHNlO2Nhc2UgMjc6JC5kYXRlcGlja2VyLl9oaWRlRGF0ZXBpY2tlcigpO2JyZWFrO2Nhc2UgMzM6JC5kYXRlcGlja2VyLl9hZGp1c3REYXRlKGUudGFyZ2V0LChlLmN0cmxLZXk/LSQuZGF0ZXBpY2tlci5fZ2V0KGksInN0ZXBCaWdNb250aHMiKTotJC5kYXRlcGlja2VyLl9nZXQoaSwic3RlcE1vbnRocyIpKSwiTSIpO2JyZWFrO2Nhc2UgMzQ6JC5kYXRlcGlja2VyLl9hZGp1c3REYXRlKGUudGFyZ2V0LChlLmN0cmxLZXk/KyQuZGF0ZXBpY2tlci5fZ2V0KGksInN0ZXBCaWdNb250aHMiKTorJC5kYXRlcGlja2VyLl9nZXQoaSwic3RlcE1vbnRocyIpKSwiTSIpO2JyZWFrO2Nhc2UgMzU6aWYoZS5jdHJsS2V5fHxlLm1ldGFLZXkpeyQuZGF0ZXBpY2tlci5fY2xlYXJEYXRlKGUudGFyZ2V0KX1oPWUuY3RybEtleXx8ZS5tZXRhS2V5O2JyZWFrO2Nhc2UgMzY6aWYoZS5jdHJsS2V5fHxlLm1ldGFLZXkpeyQuZGF0ZXBpY2tlci5fZ290b1RvZGF5KGUudGFyZ2V0KX1oPWUuY3RybEtleXx8ZS5tZXRhS2V5O2JyZWFrO2Nhc2UgMzc6aWYoZS5jdHJsS2V5fHxlLm1ldGFLZXkpeyQuZGF0ZXBpY2tlci5fYWRqdXN0RGF0ZShlLnRhcmdldCwoYj8rMTotMSksIkQiKX1oPWUuY3RybEtleXx8ZS5tZXRhS2V5O2lmKGUub3JpZ2luYWxFdmVudC5hbHRLZXkpeyQuZGF0ZXBpY2tlci5fYWRqdXN0RGF0ZShlLnRhcmdldCwoZS5jdHJsS2V5Py0kLmRhdGVwaWNrZXIuX2dldChpLCJzdGVwQmlnTW9udGhzIik6LSQuZGF0ZXBpY2tlci5fZ2V0KGksInN0ZXBNb250aHMiKSksIk0iKX1icmVhaztjYXNlIDM4OmlmKGUuY3RybEtleXx8ZS5tZXRhS2V5KXskLmRhdGVwaWNrZXIuX2FkanVzdERhdGUoZS50YXJnZXQsLTcsIkQiKX1oPWUuY3RybEtleXx8ZS5tZXRhS2V5O2JyZWFrO2Nhc2UgMzk6aWYoZS5jdHJsS2V5fHxlLm1ldGFLZXkpeyQuZGF0ZXBpY2tlci5fYWRqdXN0RGF0ZShlLnRhcmdldCwoYj8tMTorMSksIkQiKX1oPWUuY3RybEtleXx8ZS5tZXRhS2V5O2lmKGUub3JpZ2luYWxFdmVudC5hbHRLZXkpeyQuZGF0ZXBpY2tlci5fYWRqdXN0RGF0ZShlLnRhcmdldCwoZS5jdHJsS2V5PyskLmRhdGVwaWNrZXIuX2dldChpLCJzdGVwQmlnTW9udGhzIik6KyQuZGF0ZXBpY2tlci5fZ2V0KGksInN0ZXBNb250aHMiKSksIk0iKX1icmVhaztjYXNlIDQwOmlmKGUuY3RybEtleXx8ZS5tZXRhS2V5KXskLmRhdGVwaWNrZXIuX2FkanVzdERhdGUoZS50YXJnZXQsKzcsIkQiKX1oPWUuY3RybEtleXx8ZS5tZXRhS2V5O2JyZWFrO2RlZmF1bHQ6aD1mYWxzZX19ZWxzZSBpZihlLmtleUNvZGU9PT0zNiYmZS5jdHJsS2V5KXskLmRhdGVwaWNrZXIuX3Nob3dEYXRlcGlja2VyKHRoaXMpfWVsc2V7aD1mYWxzZX1pZihoKXtlLnByZXZlbnREZWZhdWx0KCk7ZS5zdG9wUHJvcGFnYXRpb24oKX19LF9kb0tleVByZXNzOmZ1bmN0aW9uKGUpe3ZhciBhLGIsaT0kLmRhdGVwaWNrZXIuX2dldEluc3QoZS50YXJnZXQpO2lmKCQuZGF0ZXBpY2tlci5fZ2V0KGksImNvbnN0cmFpbklucHV0Iikpe2E9JC5kYXRlcGlja2VyLl9wb3NzaWJsZUNoYXJzKCQuZGF0ZXBpY2tlci5fZ2V0KGksImRhdGVGb3JtYXQiKSk7Yj1TdHJpbmcuZnJvbUNoYXJDb2RlKGUuY2hhckNvZGU9PW51bGw/ZS5rZXlDb2RlOmUuY2hhckNvZGUpO3JldHVybiBlLmN0cmxLZXl8fGUubWV0YUtleXx8KGI8IiAifHwhYXx8YS5pbmRleE9mKGIpPi0xKX19LF9kb0tleVVwOmZ1bmN0aW9uKGUpe3ZhciBhLGk9JC5kYXRlcGlja2VyLl9nZXRJbnN0KGUudGFyZ2V0KTtpZihpLmlucHV0LnZhbCgpIT09aS5sYXN0VmFsKXt0cnl7YT0kLmRhdGVwaWNrZXIucGFyc2VEYXRlKCQuZGF0ZXBpY2tlci5fZ2V0KGksImRhdGVGb3JtYXQiKSwoaS5pbnB1dD9pLmlucHV0LnZhbCgpOm51bGwpLCQuZGF0ZXBpY2tlci5fZ2V0Rm9ybWF0Q29uZmlnKGkpKTtpZihhKXskLmRhdGVwaWNrZXIuX3NldERhdGVGcm9tRmllbGQoaSk7JC5kYXRlcGlja2VyLl91cGRhdGVBbHRlcm5hdGUoaSk7JC5kYXRlcGlja2VyLl91cGRhdGVEYXRlcGlja2VyKGkpfX1jYXRjaChiKXt9fXJldHVybiB0cnVlfSxfc2hvd0RhdGVwaWNrZXI6ZnVuY3Rpb24oaSl7aT1pLnRhcmdldHx8aTtpZihpLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkhPT0iaW5wdXQiKXtpPSQoImlucHV0IixpLnBhcmVudE5vZGUpWzBdfWlmKCQuZGF0ZXBpY2tlci5faXNEaXNhYmxlZERhdGVwaWNrZXIoaSl8fCQuZGF0ZXBpY2tlci5fbGFzdElucHV0PT09aSl7cmV0dXJufXZhciBhLGIsZSxnLG8scyxoO2E9JC5kYXRlcGlja2VyLl9nZXRJbnN0KGkpO2lmKCQuZGF0ZXBpY2tlci5fY3VySW5zdCYmJC5kYXRlcGlja2VyLl9jdXJJbnN0IT09YSl7JC5kYXRlcGlja2VyLl9jdXJJbnN0LmRwRGl2LnN0b3AodHJ1ZSx0cnVlKTtpZihhJiYkLmRhdGVwaWNrZXIuX2RhdGVwaWNrZXJTaG93aW5nKXskLmRhdGVwaWNrZXIuX2hpZGVEYXRlcGlja2VyKCQuZGF0ZXBpY2tlci5fY3VySW5zdC5pbnB1dFswXSl9fWI9JC5kYXRlcGlja2VyLl9nZXQoYSwiYmVmb3JlU2hvdyIpO2U9Yj9iLmFwcGx5KGksW2ksYV0pOnt9O2lmKGU9PT1mYWxzZSl7cmV0dXJufWYoYS5zZXR0aW5ncyxlKTthLmxhc3RWYWw9bnVsbDskLmRhdGVwaWNrZXIuX2xhc3RJbnB1dD1pOyQuZGF0ZXBpY2tlci5fc2V0RGF0ZUZyb21GaWVsZChhKTtpZigkLmRhdGVwaWNrZXIuX2luRGlhbG9nKXtpLnZhbHVlPSIifWlmKCEkLmRhdGVwaWNrZXIuX3Bvcyl7JC5kYXRlcGlja2VyLl9wb3M9JC5kYXRlcGlja2VyLl9maW5kUG9zKGkpOyQuZGF0ZXBpY2tlci5fcG9zWzFdKz1pLm9mZnNldEhlaWdodH1nPWZhbHNlOyQoaSkucGFyZW50cygpLmVhY2goZnVuY3Rpb24oKXtnfD0kKHRoaXMpLmNzcygicG9zaXRpb24iKT09PSJmaXhlZCI7cmV0dXJuIWd9KTtvPXtsZWZ0OiQuZGF0ZXBpY2tlci5fcG9zWzBdLHRvcDokLmRhdGVwaWNrZXIuX3Bvc1sxXX07JC5kYXRlcGlja2VyLl9wb3M9bnVsbDthLmRwRGl2LmVtcHR5KCk7YS5kcERpdi5jc3Moe3Bvc2l0aW9uOiJhYnNvbHV0ZSIsZGlzcGxheToiYmxvY2siLHRvcDoiLTEwMDBweCJ9KTskLmRhdGVwaWNrZXIuX3VwZGF0ZURhdGVwaWNrZXIoYSk7bz0kLmRhdGVwaWNrZXIuX2NoZWNrT2Zmc2V0KGEsbyxnKTthLmRwRGl2LmNzcyh7cG9zaXRpb246KCQuZGF0ZXBpY2tlci5faW5EaWFsb2cmJiQuYmxvY2tVST8ic3RhdGljIjooZz8iZml4ZWQiOiJhYnNvbHV0ZSIpKSxkaXNwbGF5OiJub25lIixsZWZ0Om8ubGVmdCsicHgiLHRvcDpvLnRvcCsicHgifSk7aWYoIWEuaW5saW5lKXtzPSQuZGF0ZXBpY2tlci5fZ2V0KGEsInNob3dBbmltIik7aD0kLmRhdGVwaWNrZXIuX2dldChhLCJkdXJhdGlvbiIpO2EuZHBEaXYuekluZGV4KCQoaSkuekluZGV4KCkrMSk7JC5kYXRlcGlja2VyLl9kYXRlcGlja2VyU2hvd2luZz10cnVlO2lmKCQuZWZmZWN0cyYmJC5lZmZlY3RzLmVmZmVjdFtzXSl7YS5kcERpdi5zaG93KHMsJC5kYXRlcGlja2VyLl9nZXQoYSwic2hvd09wdGlvbnMiKSxoKX1lbHNle2EuZHBEaXZbc3x8InNob3ciXShzP2g6bnVsbCl9aWYoJC5kYXRlcGlja2VyLl9zaG91bGRGb2N1c0lucHV0KGEpKXthLmlucHV0LmZvY3VzKCl9JC5kYXRlcGlja2VyLl9jdXJJbnN0PWF9fSxfdXBkYXRlRGF0ZXBpY2tlcjpmdW5jdGlvbihpKXt0aGlzLm1heFJvd3M9NDtjPWk7aS5kcERpdi5lbXB0eSgpLmFwcGVuZCh0aGlzLl9nZW5lcmF0ZUhUTUwoaSkpO3RoaXMuX2F0dGFjaEhhbmRsZXJzKGkpO2kuZHBEaXYuZmluZCgiLiIrdGhpcy5fZGF5T3ZlckNsYXNzKyIgYSIpLm1vdXNlb3ZlcigpO3ZhciBvLG49dGhpcy5fZ2V0TnVtYmVyT2ZNb250aHMoaSksYT1uWzFdLHc9MTc7aS5kcERpdi5yZW1vdmVDbGFzcygidWktZGF0ZXBpY2tlci1tdWx0aS0yIHVpLWRhdGVwaWNrZXItbXVsdGktMyB1aS1kYXRlcGlja2VyLW11bHRpLTQiKS53aWR0aCgiIik7aWYoYT4xKXtpLmRwRGl2LmFkZENsYXNzKCJ1aS1kYXRlcGlja2VyLW11bHRpLSIrYSkuY3NzKCJ3aWR0aCIsKHcqYSkrImVtIil9aS5kcERpdlsoblswXSE9PTF8fG5bMV0hPT0xPyJhZGQiOiJyZW1vdmUiKSsiQ2xhc3MiXSgidWktZGF0ZXBpY2tlci1tdWx0aSIpO2kuZHBEaXZbKHRoaXMuX2dldChpLCJpc1JUTCIpPyJhZGQiOiJyZW1vdmUiKSsiQ2xhc3MiXSgidWktZGF0ZXBpY2tlci1ydGwiKTtpZihpPT09JC5kYXRlcGlja2VyLl9jdXJJbnN0JiYkLmRhdGVwaWNrZXIuX2RhdGVwaWNrZXJTaG93aW5nJiYkLmRhdGVwaWNrZXIuX3Nob3VsZEZvY3VzSW5wdXQoaSkpe2kuaW5wdXQuZm9jdXMoKX1pZihpLnllYXJzaHRtbCl7bz1pLnllYXJzaHRtbDtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7aWYobz09PWkueWVhcnNodG1sJiZpLnllYXJzaHRtbCl7aS5kcERpdi5maW5kKCJzZWxlY3QudWktZGF0ZXBpY2tlci15ZWFyOmZpcnN0IikucmVwbGFjZVdpdGgoaS55ZWFyc2h0bWwpfW89aS55ZWFyc2h0bWw9bnVsbH0sMCl9fSxfc2hvdWxkRm9jdXNJbnB1dDpmdW5jdGlvbihpKXtyZXR1cm4gaS5pbnB1dCYmaS5pbnB1dC5pcygiOnZpc2libGUiKSYmIWkuaW5wdXQuaXMoIjpkaXNhYmxlZCIpJiYhaS5pbnB1dC5pcygiOmZvY3VzIil9LF9jaGVja09mZnNldDpmdW5jdGlvbihpLG8sYSl7dmFyIGI9aS5kcERpdi5vdXRlcldpZHRoKCksZT1pLmRwRGl2Lm91dGVySGVpZ2h0KCksZz1pLmlucHV0P2kuaW5wdXQub3V0ZXJXaWR0aCgpOjAsaD1pLmlucHV0P2kuaW5wdXQub3V0ZXJIZWlnaHQoKTowLHY9ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoKyhhPzA6JChkb2N1bWVudCkuc2Nyb2xsTGVmdCgpKSxqPWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQrKGE/MDokKGRvY3VtZW50KS5zY3JvbGxUb3AoKSk7by5sZWZ0LT0odGhpcy5fZ2V0KGksImlzUlRMIik/KGItZyk6MCk7by5sZWZ0LT0oYSYmby5sZWZ0PT09aS5pbnB1dC5vZmZzZXQoKS5sZWZ0KT8kKGRvY3VtZW50KS5zY3JvbGxMZWZ0KCk6MDtvLnRvcC09KGEmJm8udG9wPT09KGkuaW5wdXQub2Zmc2V0KCkudG9wK2gpKT8kKGRvY3VtZW50KS5zY3JvbGxUb3AoKTowO28ubGVmdC09TWF0aC5taW4oby5sZWZ0LChvLmxlZnQrYj52JiZ2PmIpP01hdGguYWJzKG8ubGVmdCtiLXYpOjApO28udG9wLT1NYXRoLm1pbihvLnRvcCwoby50b3ArZT5qJiZqPmUpP01hdGguYWJzKGUraCk6MCk7cmV0dXJuIG99LF9maW5kUG9zOmZ1bmN0aW9uKG8pe3ZhciBwLGk9dGhpcy5fZ2V0SW5zdChvKSxhPXRoaXMuX2dldChpLCJpc1JUTCIpO3doaWxlKG8mJihvLnR5cGU9PT0iaGlkZGVuInx8by5ub2RlVHlwZSE9PTF8fCQuZXhwci5maWx0ZXJzLmhpZGRlbihvKSkpe289b1thPyJwcmV2aW91c1NpYmxpbmciOiJuZXh0U2libGluZyJdfXA9JChvKS5vZmZzZXQoKTtyZXR1cm5bcC5sZWZ0LHAudG9wXX0sX2hpZGVEYXRlcGlja2VyOmZ1bmN0aW9uKGkpe3ZhciBzLGEscCxvLGI9dGhpcy5fY3VySW5zdDtpZighYnx8KGkmJmIhPT0kLmRhdGEoaSxQKSkpe3JldHVybn1pZih0aGlzLl9kYXRlcGlja2VyU2hvd2luZyl7cz10aGlzLl9nZXQoYiwic2hvd0FuaW0iKTthPXRoaXMuX2dldChiLCJkdXJhdGlvbiIpO3A9ZnVuY3Rpb24oKXskLmRhdGVwaWNrZXIuX3RpZHlEaWFsb2coYil9O2lmKCQuZWZmZWN0cyYmKCQuZWZmZWN0cy5lZmZlY3Rbc118fCQuZWZmZWN0c1tzXSkpe2IuZHBEaXYuaGlkZShzLCQuZGF0ZXBpY2tlci5fZ2V0KGIsInNob3dPcHRpb25zIiksYSxwKX1lbHNle2IuZHBEaXZbKHM9PT0ic2xpZGVEb3duIj8ic2xpZGVVcCI6KHM9PT0iZmFkZUluIj8iZmFkZU91dCI6ImhpZGUiKSldKChzP2E6bnVsbCkscCl9aWYoIXMpe3AoKX10aGlzLl9kYXRlcGlja2VyU2hvd2luZz1mYWxzZTtvPXRoaXMuX2dldChiLCJvbkNsb3NlIik7aWYobyl7by5hcHBseSgoYi5pbnB1dD9iLmlucHV0WzBdOm51bGwpLFsoYi5pbnB1dD9iLmlucHV0LnZhbCgpOiIiKSxiXSl9dGhpcy5fbGFzdElucHV0PW51bGw7aWYodGhpcy5faW5EaWFsb2cpe3RoaXMuX2RpYWxvZ0lucHV0LmNzcyh7cG9zaXRpb246ImFic29sdXRlIixsZWZ0OiIwIix0b3A6Ii0xMDBweCJ9KTtpZigkLmJsb2NrVUkpeyQudW5ibG9ja1VJKCk7JCgiYm9keSIpLmFwcGVuZCh0aGlzLmRwRGl2KX19dGhpcy5faW5EaWFsb2c9ZmFsc2V9fSxfdGlkeURpYWxvZzpmdW5jdGlvbihpKXtpLmRwRGl2LnJlbW92ZUNsYXNzKHRoaXMuX2RpYWxvZ0NsYXNzKS51bmJpbmQoIi51aS1kYXRlcGlja2VyLWNhbGVuZGFyIil9LF9jaGVja0V4dGVybmFsQ2xpY2s6ZnVuY3Rpb24oZSl7aWYoISQuZGF0ZXBpY2tlci5fY3VySW5zdCl7cmV0dXJufXZhciBhPSQoZS50YXJnZXQpLGk9JC5kYXRlcGlja2VyLl9nZXRJbnN0KGFbMF0pO2lmKCgoYVswXS5pZCE9PSQuZGF0ZXBpY2tlci5fbWFpbkRpdklkJiZhLnBhcmVudHMoIiMiKyQuZGF0ZXBpY2tlci5fbWFpbkRpdklkKS5sZW5ndGg9PT0wJiYhYS5oYXNDbGFzcygkLmRhdGVwaWNrZXIubWFya2VyQ2xhc3NOYW1lKSYmIWEuY2xvc2VzdCgiLiIrJC5kYXRlcGlja2VyLl90cmlnZ2VyQ2xhc3MpLmxlbmd0aCYmJC5kYXRlcGlja2VyLl9kYXRlcGlja2VyU2hvd2luZyYmISgkLmRhdGVwaWNrZXIuX2luRGlhbG9nJiYkLmJsb2NrVUkpKSl8fChhLmhhc0NsYXNzKCQuZGF0ZXBpY2tlci5tYXJrZXJDbGFzc05hbWUpJiYkLmRhdGVwaWNrZXIuX2N1ckluc3QhPT1pKSl7JC5kYXRlcGlja2VyLl9oaWRlRGF0ZXBpY2tlcigpfX0sX2FkanVzdERhdGU6ZnVuY3Rpb24oaSxvLHApe3ZhciB0PSQoaSksYT10aGlzLl9nZXRJbnN0KHRbMF0pO2lmKHRoaXMuX2lzRGlzYWJsZWREYXRlcGlja2VyKHRbMF0pKXtyZXR1cm59dGhpcy5fYWRqdXN0SW5zdERhdGUoYSxvKyhwPT09Ik0iP3RoaXMuX2dldChhLCJzaG93Q3VycmVudEF0UG9zIik6MCkscCk7dGhpcy5fdXBkYXRlRGF0ZXBpY2tlcihhKX0sX2dvdG9Ub2RheTpmdW5jdGlvbihpKXt2YXIgYSx0PSQoaSksYj10aGlzLl9nZXRJbnN0KHRbMF0pO2lmKHRoaXMuX2dldChiLCJnb3RvQ3VycmVudCIpJiZiLmN1cnJlbnREYXkpe2Iuc2VsZWN0ZWREYXk9Yi5jdXJyZW50RGF5O2IuZHJhd01vbnRoPWIuc2VsZWN0ZWRNb250aD1iLmN1cnJlbnRNb250aDtiLmRyYXdZZWFyPWIuc2VsZWN0ZWRZZWFyPWIuY3VycmVudFllYXJ9ZWxzZXthPW5ldyBEYXRlKCk7Yi5zZWxlY3RlZERheT1hLmdldERhdGUoKTtiLmRyYXdNb250aD1iLnNlbGVjdGVkTW9udGg9YS5nZXRNb250aCgpO2IuZHJhd1llYXI9Yi5zZWxlY3RlZFllYXI9YS5nZXRGdWxsWWVhcigpfXRoaXMuX25vdGlmeUNoYW5nZShiKTt0aGlzLl9hZGp1c3REYXRlKHQpfSxfc2VsZWN0TW9udGhZZWFyOmZ1bmN0aW9uKGkscyxwKXt2YXIgdD0kKGkpLGE9dGhpcy5fZ2V0SW5zdCh0WzBdKTthWyJzZWxlY3RlZCIrKHA9PT0iTSI/Ik1vbnRoIjoiWWVhciIpXT1hWyJkcmF3IisocD09PSJNIj8iTW9udGgiOiJZZWFyIildPXBhcnNlSW50KHMub3B0aW9uc1tzLnNlbGVjdGVkSW5kZXhdLnZhbHVlLDEwKTt0aGlzLl9ub3RpZnlDaGFuZ2UoYSk7dGhpcy5fYWRqdXN0RGF0ZSh0KX0sX3NlbGVjdERheTpmdW5jdGlvbihpLG0seSx0KXt2YXIgYSxiPSQoaSk7aWYoJCh0KS5oYXNDbGFzcyh0aGlzLl91bnNlbGVjdGFibGVDbGFzcyl8fHRoaXMuX2lzRGlzYWJsZWREYXRlcGlja2VyKGJbMF0pKXtyZXR1cm59YT10aGlzLl9nZXRJbnN0KGJbMF0pO2Euc2VsZWN0ZWREYXk9YS5jdXJyZW50RGF5PSQoImEiLHQpLmh0bWwoKTthLnNlbGVjdGVkTW9udGg9YS5jdXJyZW50TW9udGg9bTthLnNlbGVjdGVkWWVhcj1hLmN1cnJlbnRZZWFyPXk7dGhpcy5fc2VsZWN0RGF0ZShpLHRoaXMuX2Zvcm1hdERhdGUoYSxhLmN1cnJlbnREYXksYS5jdXJyZW50TW9udGgsYS5jdXJyZW50WWVhcikpfSxfY2xlYXJEYXRlOmZ1bmN0aW9uKGkpe3ZhciB0PSQoaSk7dGhpcy5fc2VsZWN0RGF0ZSh0LCIiKX0sX3NlbGVjdERhdGU6ZnVuY3Rpb24oaSxhKXt2YXIgbyx0PSQoaSksYj10aGlzLl9nZXRJbnN0KHRbMF0pO2E9KGEhPW51bGw/YTp0aGlzLl9mb3JtYXREYXRlKGIpKTtpZihiLmlucHV0KXtiLmlucHV0LnZhbChhKX10aGlzLl91cGRhdGVBbHRlcm5hdGUoYik7bz10aGlzLl9nZXQoYiwib25TZWxlY3QiKTtpZihvKXtvLmFwcGx5KChiLmlucHV0P2IuaW5wdXRbMF06bnVsbCksW2EsYl0pfWVsc2UgaWYoYi5pbnB1dCl7Yi5pbnB1dC50cmlnZ2VyKCJjaGFuZ2UiKX1pZihiLmlubGluZSl7dGhpcy5fdXBkYXRlRGF0ZXBpY2tlcihiKX1lbHNle3RoaXMuX2hpZGVEYXRlcGlja2VyKCk7dGhpcy5fbGFzdElucHV0PWIuaW5wdXRbMF07aWYodHlwZW9mKGIuaW5wdXRbMF0pIT09Im9iamVjdCIpe2IuaW5wdXQuZm9jdXMoKX10aGlzLl9sYXN0SW5wdXQ9bnVsbH19LF91cGRhdGVBbHRlcm5hdGU6ZnVuY3Rpb24oaSl7dmFyIGEsYixlLGc9dGhpcy5fZ2V0KGksImFsdEZpZWxkIik7aWYoZyl7YT10aGlzLl9nZXQoaSwiYWx0Rm9ybWF0Iil8fHRoaXMuX2dldChpLCJkYXRlRm9ybWF0Iik7Yj10aGlzLl9nZXREYXRlKGkpO2U9dGhpcy5mb3JtYXREYXRlKGEsYix0aGlzLl9nZXRGb3JtYXRDb25maWcoaSkpOyQoZykuZWFjaChmdW5jdGlvbigpeyQodGhpcykudmFsKGUpfSl9fSxub1dlZWtlbmRzOmZ1bmN0aW9uKGEpe3ZhciBiPWEuZ2V0RGF5KCk7cmV0dXJuWyhiPjAmJmI8NiksIiJdfSxpc284NjAxV2VlazpmdW5jdGlvbihhKXt2YXIgdCxiPW5ldyBEYXRlKGEuZ2V0VGltZSgpKTtiLnNldERhdGUoYi5nZXREYXRlKCkrNC0oYi5nZXREYXkoKXx8NykpO3Q9Yi5nZXRUaW1lKCk7Yi5zZXRNb250aCgwKTtiLnNldERhdGUoMSk7cmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yb3VuZCgodC1iKS84NjQwMDAwMCkvNykrMX0scGFyc2VEYXRlOmZ1bmN0aW9uKGUsZyxzKXtpZihlPT1udWxsfHxnPT1udWxsKXt0aHJvdyJJbnZhbGlkIGFyZ3VtZW50cyJ9Zz0odHlwZW9mIGc9PT0ib2JqZWN0Ij9nLnRvU3RyaW5nKCk6ZysiIik7aWYoZz09PSIiKXtyZXR1cm4gbnVsbH12YXIgRixoLGosVj0wLGw9KHM/cy5zaG9ydFllYXJDdXRvZmY6bnVsbCl8fHRoaXMuX2RlZmF1bHRzLnNob3J0WWVhckN1dG9mZixtPSh0eXBlb2YgbCE9PSJzdHJpbmciP2w6bmV3IERhdGUoKS5nZXRGdWxsWWVhcigpJTEwMCtwYXJzZUludChsLDEwKSksbj0ocz9zLmRheU5hbWVzU2hvcnQ6bnVsbCl8fHRoaXMuX2RlZmF1bHRzLmRheU5hbWVzU2hvcnQsbz0ocz9zLmRheU5hbWVzOm51bGwpfHx0aGlzLl9kZWZhdWx0cy5kYXlOYW1lcyxwPShzP3MubW9udGhOYW1lc1Nob3J0Om51bGwpfHx0aGlzLl9kZWZhdWx0cy5tb250aE5hbWVzU2hvcnQscT0ocz9zLm1vbnRoTmFtZXM6bnVsbCl8fHRoaXMuX2RlZmF1bHRzLm1vbnRoTmFtZXMseT0tMSxyPS0xLHQ9LTEsdz0tMSx4PWZhbHNlLHosQT1mdW5jdGlvbihhKXt2YXIgYj0oRisxPGUubGVuZ3RoJiZlLmNoYXJBdChGKzEpPT09YSk7aWYoYil7RisrfXJldHVybiBifSxCPWZ1bmN0aW9uKGEpe3ZhciBpPUEoYSksYj0oYT09PSJAIj8xNDooYT09PSIhIj8yMDooYT09PSJ5IiYmaT80OihhPT09Im8iPzM6MikpKSksaz1uZXcgUmVnRXhwKCJeXFxkezEsIitiKyJ9Iiksdj1nLnN1YnN0cmluZyhWKS5tYXRjaChrKTtpZighdil7dGhyb3ciTWlzc2luZyBudW1iZXIgYXQgcG9zaXRpb24gIitWfVYrPXZbMF0ubGVuZ3RoO3JldHVybiBwYXJzZUludCh2WzBdLDEwKX0sQz1mdW5jdGlvbihHLEgsSSl7dmFyIEo9LTEsSz0kLm1hcChBKEcpP0k6SCxmdW5jdGlvbih2LGspe3JldHVybltbayx2XV19KS5zb3J0KGZ1bmN0aW9uKGEsYil7cmV0dXJuLShhWzFdLmxlbmd0aC1iWzFdLmxlbmd0aCl9KTskLmVhY2goSyxmdW5jdGlvbihpLGEpe3ZhciBiPWFbMV07aWYoZy5zdWJzdHIoVixiLmxlbmd0aCkudG9Mb3dlckNhc2UoKT09PWIudG9Mb3dlckNhc2UoKSl7Sj1hWzBdO1YrPWIubGVuZ3RoO3JldHVybiBmYWxzZX19KTtpZihKIT09LTEpe3JldHVybiBKKzF9ZWxzZXt0aHJvdyJVbmtub3duIG5hbWUgYXQgcG9zaXRpb24gIitWfX0sRT1mdW5jdGlvbigpe2lmKGcuY2hhckF0KFYpIT09ZS5jaGFyQXQoRikpe3Rocm93IlVuZXhwZWN0ZWQgbGl0ZXJhbCBhdCBwb3NpdGlvbiAiK1Z9VisrfTtmb3IoRj0wO0Y8ZS5sZW5ndGg7RisrKXtpZih4KXtpZihlLmNoYXJBdChGKT09PSInIiYmIUEoIiciKSl7eD1mYWxzZX1lbHNle0UoKX19ZWxzZXtzd2l0Y2goZS5jaGFyQXQoRikpe2Nhc2UiZCI6dD1CKCJkIik7YnJlYWs7Y2FzZSJEIjpDKCJEIixuLG8pO2JyZWFrO2Nhc2UibyI6dz1CKCJvIik7YnJlYWs7Y2FzZSJtIjpyPUIoIm0iKTticmVhaztjYXNlIk0iOnI9QygiTSIscCxxKTticmVhaztjYXNlInkiOnk9QigieSIpO2JyZWFrO2Nhc2UiQCI6ej1uZXcgRGF0ZShCKCJAIikpO3k9ei5nZXRGdWxsWWVhcigpO3I9ei5nZXRNb250aCgpKzE7dD16LmdldERhdGUoKTticmVhaztjYXNlIiEiOno9bmV3IERhdGUoKEIoIiEiKS10aGlzLl90aWNrc1RvMTk3MCkvMTAwMDApO3k9ei5nZXRGdWxsWWVhcigpO3I9ei5nZXRNb250aCgpKzE7dD16LmdldERhdGUoKTticmVhaztjYXNlIiciOmlmKEEoIiciKSl7RSgpfWVsc2V7eD10cnVlfWJyZWFrO2RlZmF1bHQ6RSgpfX19aWYoVjxnLmxlbmd0aCl7aj1nLnN1YnN0cihWKTtpZighL15ccysvLnRlc3Qoaikpe3Rocm93IkV4dHJhL3VucGFyc2VkIGNoYXJhY3RlcnMgZm91bmQgaW4gZGF0ZTogIitqfX1pZih5PT09LTEpe3k9bmV3IERhdGUoKS5nZXRGdWxsWWVhcigpfWVsc2UgaWYoeTwxMDApe3krPW5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKS1uZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCklMTAwKyh5PD1tPzA6LTEwMCl9aWYodz4tMSl7cj0xO3Q9dztkb3toPXRoaXMuX2dldERheXNJbk1vbnRoKHksci0xKTtpZih0PD1oKXticmVha31yKys7dC09aH13aGlsZSh0cnVlKX16PXRoaXMuX2RheWxpZ2h0U2F2aW5nQWRqdXN0KG5ldyBEYXRlKHksci0xLHQpKTtpZih6LmdldEZ1bGxZZWFyKCkhPT15fHx6LmdldE1vbnRoKCkrMSE9PXJ8fHouZ2V0RGF0ZSgpIT09dCl7dGhyb3ciSW52YWxpZCBkYXRlIn1yZXR1cm4gen0sQVRPTToieXktbW0tZGQiLENPT0tJRToiRCwgZGQgTSB5eSIsSVNPXzg2MDE6Inl5LW1tLWRkIixSRkNfODIyOiJELCBkIE0geSIsUkZDXzg1MDoiREQsIGRkLU0teSIsUkZDXzEwMzY6IkQsIGQgTSB5IixSRkNfMTEyMzoiRCwgZCBNIHl5IixSRkNfMjgyMjoiRCwgZCBNIHl5IixSU1M6IkQsIGQgTSB5IixUSUNLUzoiISIsVElNRVNUQU1QOiJAIixXM0M6Inl5LW1tLWRkIixfdGlja3NUbzE5NzA6KCgoMTk3MC0xKSozNjUrTWF0aC5mbG9vcigxOTcwLzQpLU1hdGguZmxvb3IoMTk3MC8xMDApK01hdGguZmxvb3IoMTk3MC80MDApKSoyNCo2MCo2MCoxMDAwMDAwMCksZm9ybWF0RGF0ZTpmdW5jdGlvbihhLGIscyl7aWYoIWIpe3JldHVybiIifXZhciBGLGU9KHM/cy5kYXlOYW1lc1Nob3J0Om51bGwpfHx0aGlzLl9kZWZhdWx0cy5kYXlOYW1lc1Nob3J0LGc9KHM/cy5kYXlOYW1lczpudWxsKXx8dGhpcy5fZGVmYXVsdHMuZGF5TmFtZXMsbT0ocz9zLm1vbnRoTmFtZXNTaG9ydDpudWxsKXx8dGhpcy5fZGVmYXVsdHMubW9udGhOYW1lc1Nob3J0LGg9KHM/cy5tb250aE5hbWVzOm51bGwpfHx0aGlzLl9kZWZhdWx0cy5tb250aE5hbWVzLGw9ZnVuY3Rpb24obil7dmFyIHA9KEYrMTxhLmxlbmd0aCYmYS5jaGFyQXQoRisxKT09PW4pO2lmKHApe0YrK31yZXR1cm4gcH0saT1mdW5jdGlvbihuLHYscCl7dmFyIHE9IiIrdjtpZihsKG4pKXt3aGlsZShxLmxlbmd0aDxwKXtxPSIwIitxfX1yZXR1cm4gcX0saj1mdW5jdGlvbihuLHYscCxxKXtyZXR1cm4obChuKT9xW3ZdOnBbdl0pfSxvPSIiLGs9ZmFsc2U7aWYoYil7Zm9yKEY9MDtGPGEubGVuZ3RoO0YrKyl7aWYoayl7aWYoYS5jaGFyQXQoRik9PT0iJyImJiFsKCInIikpe2s9ZmFsc2V9ZWxzZXtvKz1hLmNoYXJBdChGKX19ZWxzZXtzd2l0Y2goYS5jaGFyQXQoRikpe2Nhc2UiZCI6bys9aSgiZCIsYi5nZXREYXRlKCksMik7YnJlYWs7Y2FzZSJEIjpvKz1qKCJEIixiLmdldERheSgpLGUsZyk7YnJlYWs7Y2FzZSJvIjpvKz1pKCJvIixNYXRoLnJvdW5kKChuZXcgRGF0ZShiLmdldEZ1bGxZZWFyKCksYi5nZXRNb250aCgpLGIuZ2V0RGF0ZSgpKS5nZXRUaW1lKCktbmV3IERhdGUoYi5nZXRGdWxsWWVhcigpLDAsMCkuZ2V0VGltZSgpKS84NjQwMDAwMCksMyk7YnJlYWs7Y2FzZSJtIjpvKz1pKCJtIixiLmdldE1vbnRoKCkrMSwyKTticmVhaztjYXNlIk0iOm8rPWooIk0iLGIuZ2V0TW9udGgoKSxtLGgpO2JyZWFrO2Nhc2UieSI6bys9KGwoInkiKT9iLmdldEZ1bGxZZWFyKCk6KGIuZ2V0WWVhcigpJTEwMDwxMD8iMCI6IiIpK2IuZ2V0WWVhcigpJTEwMCk7YnJlYWs7Y2FzZSJAIjpvKz1iLmdldFRpbWUoKTticmVhaztjYXNlIiEiOm8rPWIuZ2V0VGltZSgpKjEwMDAwK3RoaXMuX3RpY2tzVG8xOTcwO2JyZWFrO2Nhc2UiJyI6aWYobCgiJyIpKXtvKz0iJyJ9ZWxzZXtrPXRydWV9YnJlYWs7ZGVmYXVsdDpvKz1hLmNoYXJBdChGKX19fX1yZXR1cm4gb30sX3Bvc3NpYmxlQ2hhcnM6ZnVuY3Rpb24oYSl7dmFyIEYsYj0iIixsPWZhbHNlLGU9ZnVuY3Rpb24obSl7dmFyIGc9KEYrMTxhLmxlbmd0aCYmYS5jaGFyQXQoRisxKT09PW0pO2lmKGcpe0YrK31yZXR1cm4gZ307Zm9yKEY9MDtGPGEubGVuZ3RoO0YrKyl7aWYobCl7aWYoYS5jaGFyQXQoRik9PT0iJyImJiFlKCInIikpe2w9ZmFsc2V9ZWxzZXtiKz1hLmNoYXJBdChGKX19ZWxzZXtzd2l0Y2goYS5jaGFyQXQoRikpe2Nhc2UiZCI6Y2FzZSJtIjpjYXNlInkiOmNhc2UiQCI6Yis9IjAxMjM0NTY3ODkiO2JyZWFrO2Nhc2UiRCI6Y2FzZSJNIjpyZXR1cm4gbnVsbDtjYXNlIiciOmlmKGUoIiciKSl7Yis9IicifWVsc2V7bD10cnVlfWJyZWFrO2RlZmF1bHQ6Yis9YS5jaGFyQXQoRil9fX1yZXR1cm4gYn0sX2dldDpmdW5jdGlvbihpLG4pe3JldHVybiBpLnNldHRpbmdzW25dIT09dT9pLnNldHRpbmdzW25dOnRoaXMuX2RlZmF1bHRzW25dfSxfc2V0RGF0ZUZyb21GaWVsZDpmdW5jdGlvbihpLG4pe2lmKGkuaW5wdXQudmFsKCk9PT1pLmxhc3RWYWwpe3JldHVybn12YXIgYT10aGlzLl9nZXQoaSwiZGF0ZUZvcm1hdCIpLGI9aS5sYXN0VmFsPWkuaW5wdXQ/aS5pbnB1dC52YWwoKTpudWxsLGU9dGhpcy5fZ2V0RGVmYXVsdERhdGUoaSksZz1lLHM9dGhpcy5fZ2V0Rm9ybWF0Q29uZmlnKGkpO3RyeXtnPXRoaXMucGFyc2VEYXRlKGEsYixzKXx8ZX1jYXRjaChoKXtiPShuPyIiOmIpfWkuc2VsZWN0ZWREYXk9Zy5nZXREYXRlKCk7aS5kcmF3TW9udGg9aS5zZWxlY3RlZE1vbnRoPWcuZ2V0TW9udGgoKTtpLmRyYXdZZWFyPWkuc2VsZWN0ZWRZZWFyPWcuZ2V0RnVsbFllYXIoKTtpLmN1cnJlbnREYXk9KGI/Zy5nZXREYXRlKCk6MCk7aS5jdXJyZW50TW9udGg9KGI/Zy5nZXRNb250aCgpOjApO2kuY3VycmVudFllYXI9KGI/Zy5nZXRGdWxsWWVhcigpOjApO3RoaXMuX2FkanVzdEluc3REYXRlKGkpfSxfZ2V0RGVmYXVsdERhdGU6ZnVuY3Rpb24oaSl7cmV0dXJuIHRoaXMuX3Jlc3RyaWN0TWluTWF4KGksdGhpcy5fZGV0ZXJtaW5lRGF0ZShpLHRoaXMuX2dldChpLCJkZWZhdWx0RGF0ZSIpLG5ldyBEYXRlKCkpKX0sX2RldGVybWluZURhdGU6ZnVuY3Rpb24oaSxhLGIpe3ZhciBvPWZ1bmN0aW9uKGUpe3ZhciBhPW5ldyBEYXRlKCk7YS5zZXREYXRlKGEuZ2V0RGF0ZSgpK2UpO3JldHVybiBhfSxnPWZ1bmN0aW9uKGgpe3RyeXtyZXR1cm4gJC5kYXRlcGlja2VyLnBhcnNlRGF0ZSgkLmRhdGVwaWNrZXIuX2dldChpLCJkYXRlRm9ybWF0IiksaCwkLmRhdGVwaWNrZXIuX2dldEZvcm1hdENvbmZpZyhpKSl9Y2F0Y2goZSl7fXZhciBhPShoLnRvTG93ZXJDYXNlKCkubWF0Y2goL15jLyk/JC5kYXRlcGlja2VyLl9nZXREYXRlKGkpOm51bGwpfHxuZXcgRGF0ZSgpLHk9YS5nZXRGdWxsWWVhcigpLG09YS5nZXRNb250aCgpLGo9YS5nZXREYXRlKCkscD0vKFsrXC1dP1swLTldKylccyooZHxEfHd8V3xtfE18eXxZKT8vZyxrPXAuZXhlYyhoKTt3aGlsZShrKXtzd2l0Y2goa1syXXx8ImQiKXtjYXNlImQiOmNhc2UiRCI6ais9cGFyc2VJbnQoa1sxXSwxMCk7YnJlYWs7Y2FzZSJ3IjpjYXNlIlciOmorPXBhcnNlSW50KGtbMV0sMTApKjc7YnJlYWs7Y2FzZSJtIjpjYXNlIk0iOm0rPXBhcnNlSW50KGtbMV0sMTApO2o9TWF0aC5taW4oaiwkLmRhdGVwaWNrZXIuX2dldERheXNJbk1vbnRoKHksbSkpO2JyZWFrO2Nhc2UieSI6Y2FzZSJZIjp5Kz1wYXJzZUludChrWzFdLDEwKTtqPU1hdGgubWluKGosJC5kYXRlcGlja2VyLl9nZXREYXlzSW5Nb250aCh5LG0pKTticmVha31rPXAuZXhlYyhoKX1yZXR1cm4gbmV3IERhdGUoeSxtLGopfSxuPShhPT1udWxsfHxhPT09IiI/YjoodHlwZW9mIGE9PT0ic3RyaW5nIj9nKGEpOih0eXBlb2YgYT09PSJudW1iZXIiPyhpc05hTihhKT9iOm8oYSkpOm5ldyBEYXRlKGEuZ2V0VGltZSgpKSkpKTtuPShuJiZuLnRvU3RyaW5nKCk9PT0iSW52YWxpZCBEYXRlIj9iOm4pO2lmKG4pe24uc2V0SG91cnMoMCk7bi5zZXRNaW51dGVzKDApO24uc2V0U2Vjb25kcygwKTtuLnNldE1pbGxpc2Vjb25kcygwKX1yZXR1cm4gdGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3Qobil9LF9kYXlsaWdodFNhdmluZ0FkanVzdDpmdW5jdGlvbihhKXtpZighYSl7cmV0dXJuIG51bGx9YS5zZXRIb3VycyhhLmdldEhvdXJzKCk+MTI/YS5nZXRIb3VycygpKzI6MCk7cmV0dXJuIGF9LF9zZXREYXRlOmZ1bmN0aW9uKGksYSxuKXt2YXIgYj0hYSxvPWkuc2VsZWN0ZWRNb250aCxlPWkuc2VsZWN0ZWRZZWFyLGc9dGhpcy5fcmVzdHJpY3RNaW5NYXgoaSx0aGlzLl9kZXRlcm1pbmVEYXRlKGksYSxuZXcgRGF0ZSgpKSk7aS5zZWxlY3RlZERheT1pLmN1cnJlbnREYXk9Zy5nZXREYXRlKCk7aS5kcmF3TW9udGg9aS5zZWxlY3RlZE1vbnRoPWkuY3VycmVudE1vbnRoPWcuZ2V0TW9udGgoKTtpLmRyYXdZZWFyPWkuc2VsZWN0ZWRZZWFyPWkuY3VycmVudFllYXI9Zy5nZXRGdWxsWWVhcigpO2lmKChvIT09aS5zZWxlY3RlZE1vbnRofHxlIT09aS5zZWxlY3RlZFllYXIpJiYhbil7dGhpcy5fbm90aWZ5Q2hhbmdlKGkpfXRoaXMuX2FkanVzdEluc3REYXRlKGkpO2lmKGkuaW5wdXQpe2kuaW5wdXQudmFsKGI/IiI6dGhpcy5fZm9ybWF0RGF0ZShpKSl9fSxfZ2V0RGF0ZTpmdW5jdGlvbihpKXt2YXIgcz0oIWkuY3VycmVudFllYXJ8fChpLmlucHV0JiZpLmlucHV0LnZhbCgpPT09IiIpP251bGw6dGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3QobmV3IERhdGUoaS5jdXJyZW50WWVhcixpLmN1cnJlbnRNb250aCxpLmN1cnJlbnREYXkpKSk7cmV0dXJuIHN9LF9hdHRhY2hIYW5kbGVyczpmdW5jdGlvbihpKXt2YXIgcz10aGlzLl9nZXQoaSwic3RlcE1vbnRocyIpLGE9IiMiK2kuaWQucmVwbGFjZSgvXFxcXC9nLCJcXCIpO2kuZHBEaXYuZmluZCgiW2RhdGEtaGFuZGxlcl0iKS5tYXAoZnVuY3Rpb24oKXt2YXIgaD17cHJldjpmdW5jdGlvbigpeyQuZGF0ZXBpY2tlci5fYWRqdXN0RGF0ZShhLC1zLCJNIil9LG5leHQ6ZnVuY3Rpb24oKXskLmRhdGVwaWNrZXIuX2FkanVzdERhdGUoYSwrcywiTSIpfSxoaWRlOmZ1bmN0aW9uKCl7JC5kYXRlcGlja2VyLl9oaWRlRGF0ZXBpY2tlcigpfSx0b2RheTpmdW5jdGlvbigpeyQuZGF0ZXBpY2tlci5fZ290b1RvZGF5KGEpfSxzZWxlY3REYXk6ZnVuY3Rpb24oKXskLmRhdGVwaWNrZXIuX3NlbGVjdERheShhLCt0aGlzLmdldEF0dHJpYnV0ZSgiZGF0YS1tb250aCIpLCt0aGlzLmdldEF0dHJpYnV0ZSgiZGF0YS15ZWFyIiksdGhpcyk7cmV0dXJuIGZhbHNlfSxzZWxlY3RNb250aDpmdW5jdGlvbigpeyQuZGF0ZXBpY2tlci5fc2VsZWN0TW9udGhZZWFyKGEsdGhpcywiTSIpO3JldHVybiBmYWxzZX0sc2VsZWN0WWVhcjpmdW5jdGlvbigpeyQuZGF0ZXBpY2tlci5fc2VsZWN0TW9udGhZZWFyKGEsdGhpcywiWSIpO3JldHVybiBmYWxzZX19OyQodGhpcykuYmluZCh0aGlzLmdldEF0dHJpYnV0ZSgiZGF0YS1ldmVudCIpLGhbdGhpcy5nZXRBdHRyaWJ1dGUoImRhdGEtaGFuZGxlciIpXSl9KX0sX2dlbmVyYXRlSFRNTDpmdW5jdGlvbihpKXt2YXIgbSxwLGEsbixiLGUsZyxoLGosayxzLGwsbyxxLHIsdCx2LHcseCx5LHosQSxCLEMsRSxGLEcsSCxJLEosSyxMLE0sTixSLE8sUSxTLFQsVT1uZXcgRGF0ZSgpLFY9dGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3QobmV3IERhdGUoVS5nZXRGdWxsWWVhcigpLFUuZ2V0TW9udGgoKSxVLmdldERhdGUoKSkpLFc9dGhpcy5fZ2V0KGksImlzUlRMIiksWD10aGlzLl9nZXQoaSwic2hvd0J1dHRvblBhbmVsIiksWT10aGlzLl9nZXQoaSwiaGlkZUlmTm9QcmV2TmV4dCIpLFo9dGhpcy5fZ2V0KGksIm5hdmlnYXRpb25Bc0RhdGVGb3JtYXQiKSxfPXRoaXMuX2dldE51bWJlck9mTW9udGhzKGkpLGExPXRoaXMuX2dldChpLCJzaG93Q3VycmVudEF0UG9zIiksYjE9dGhpcy5fZ2V0KGksInN0ZXBNb250aHMiKSxjMT0oX1swXSE9PTF8fF9bMV0hPT0xKSxkMT10aGlzLl9kYXlsaWdodFNhdmluZ0FkanVzdCgoIWkuY3VycmVudERheT9uZXcgRGF0ZSg5OTk5LDksOSk6bmV3IERhdGUoaS5jdXJyZW50WWVhcixpLmN1cnJlbnRNb250aCxpLmN1cnJlbnREYXkpKSksZTE9dGhpcy5fZ2V0TWluTWF4RGF0ZShpLCJtaW4iKSxmMT10aGlzLl9nZXRNaW5NYXhEYXRlKGksIm1heCIpLGcxPWkuZHJhd01vbnRoLWExLGgxPWkuZHJhd1llYXI7aWYoZzE8MCl7ZzErPTEyO2gxLS19aWYoZjEpe209dGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3QobmV3IERhdGUoZjEuZ2V0RnVsbFllYXIoKSxmMS5nZXRNb250aCgpLShfWzBdKl9bMV0pKzEsZjEuZ2V0RGF0ZSgpKSk7bT0oZTEmJm08ZTE/ZTE6bSk7d2hpbGUodGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3QobmV3IERhdGUoaDEsZzEsMSkpPm0pe2cxLS07aWYoZzE8MCl7ZzE9MTE7aDEtLX19fWkuZHJhd01vbnRoPWcxO2kuZHJhd1llYXI9aDE7cD10aGlzLl9nZXQoaSwicHJldlRleHQiKTtwPSghWj9wOnRoaXMuZm9ybWF0RGF0ZShwLHRoaXMuX2RheWxpZ2h0U2F2aW5nQWRqdXN0KG5ldyBEYXRlKGgxLGcxLWIxLDEpKSx0aGlzLl9nZXRGb3JtYXRDb25maWcoaSkpKTthPSh0aGlzLl9jYW5BZGp1c3RNb250aChpLC0xLGgxLGcxKT8iPGEgY2xhc3M9J3VpLWRhdGVwaWNrZXItcHJldiB1aS1jb3JuZXItYWxsJyBkYXRhLWhhbmRsZXI9J3ByZXYnIGRhdGEtZXZlbnQ9J2NsaWNrJyIrIiB0aXRsZT0nIitwKyInPjxzcGFuIGNsYXNzPSd1aS1pY29uIHVpLWljb24tY2lyY2xlLXRyaWFuZ2xlLSIrKFc/ImUiOiJ3IikrIic+IitwKyI8L3NwYW4+PC9hPiI6KFk/IiI6IjxhIGNsYXNzPSd1aS1kYXRlcGlja2VyLXByZXYgdWktY29ybmVyLWFsbCB1aS1zdGF0ZS1kaXNhYmxlZCcgdGl0bGU9JyIrcCsiJz48c3BhbiBjbGFzcz0ndWktaWNvbiB1aS1pY29uLWNpcmNsZS10cmlhbmdsZS0iKyhXPyJlIjoidyIpKyInPiIrcCsiPC9zcGFuPjwvYT4iKSk7bj10aGlzLl9nZXQoaSwibmV4dFRleHQiKTtuPSghWj9uOnRoaXMuZm9ybWF0RGF0ZShuLHRoaXMuX2RheWxpZ2h0U2F2aW5nQWRqdXN0KG5ldyBEYXRlKGgxLGcxK2IxLDEpKSx0aGlzLl9nZXRGb3JtYXRDb25maWcoaSkpKTtiPSh0aGlzLl9jYW5BZGp1c3RNb250aChpLCsxLGgxLGcxKT8iPGEgY2xhc3M9J3VpLWRhdGVwaWNrZXItbmV4dCB1aS1jb3JuZXItYWxsJyBkYXRhLWhhbmRsZXI9J25leHQnIGRhdGEtZXZlbnQ9J2NsaWNrJyIrIiB0aXRsZT0nIituKyInPjxzcGFuIGNsYXNzPSd1aS1pY29uIHVpLWljb24tY2lyY2xlLXRyaWFuZ2xlLSIrKFc/InciOiJlIikrIic+IituKyI8L3NwYW4+PC9hPiI6KFk/IiI6IjxhIGNsYXNzPSd1aS1kYXRlcGlja2VyLW5leHQgdWktY29ybmVyLWFsbCB1aS1zdGF0ZS1kaXNhYmxlZCcgdGl0bGU9JyIrbisiJz48c3BhbiBjbGFzcz0ndWktaWNvbiB1aS1pY29uLWNpcmNsZS10cmlhbmdsZS0iKyhXPyJ3IjoiZSIpKyInPiIrbisiPC9zcGFuPjwvYT4iKSk7ZT10aGlzLl9nZXQoaSwiY3VycmVudFRleHQiKTtnPSh0aGlzLl9nZXQoaSwiZ290b0N1cnJlbnQiKSYmaS5jdXJyZW50RGF5P2QxOlYpO2U9KCFaP2U6dGhpcy5mb3JtYXREYXRlKGUsZyx0aGlzLl9nZXRGb3JtYXRDb25maWcoaSkpKTtoPSghaS5pbmxpbmU/IjxidXR0b24gdHlwZT0nYnV0dG9uJyBjbGFzcz0ndWktZGF0ZXBpY2tlci1jbG9zZSB1aS1zdGF0ZS1kZWZhdWx0IHVpLXByaW9yaXR5LXByaW1hcnkgdWktY29ybmVyLWFsbCcgZGF0YS1oYW5kbGVyPSdoaWRlJyBkYXRhLWV2ZW50PSdjbGljayc+Iit0aGlzLl9nZXQoaSwiY2xvc2VUZXh0IikrIjwvYnV0dG9uPiI6IiIpO2o9KFgpPyI8ZGl2IGNsYXNzPSd1aS1kYXRlcGlja2VyLWJ1dHRvbnBhbmUgdWktd2lkZ2V0LWNvbnRlbnQnPiIrKFc/aDoiIikrKHRoaXMuX2lzSW5SYW5nZShpLGcpPyI8YnV0dG9uIHR5cGU9J2J1dHRvbicgY2xhc3M9J3VpLWRhdGVwaWNrZXItY3VycmVudCB1aS1zdGF0ZS1kZWZhdWx0IHVpLXByaW9yaXR5LXNlY29uZGFyeSB1aS1jb3JuZXItYWxsJyBkYXRhLWhhbmRsZXI9J3RvZGF5JyBkYXRhLWV2ZW50PSdjbGljayciKyI+IitlKyI8L2J1dHRvbj4iOiIiKSsoVz8iIjpoKSsiPC9kaXY+IjoiIjtrPXBhcnNlSW50KHRoaXMuX2dldChpLCJmaXJzdERheSIpLDEwKTtrPShpc05hTihrKT8wOmspO3M9dGhpcy5fZ2V0KGksInNob3dXZWVrIik7bD10aGlzLl9nZXQoaSwiZGF5TmFtZXMiKTtvPXRoaXMuX2dldChpLCJkYXlOYW1lc01pbiIpO3E9dGhpcy5fZ2V0KGksIm1vbnRoTmFtZXMiKTtyPXRoaXMuX2dldChpLCJtb250aE5hbWVzU2hvcnQiKTt0PXRoaXMuX2dldChpLCJiZWZvcmVTaG93RGF5Iik7dj10aGlzLl9nZXQoaSwic2hvd090aGVyTW9udGhzIik7dz10aGlzLl9nZXQoaSwic2VsZWN0T3RoZXJNb250aHMiKTt4PXRoaXMuX2dldERlZmF1bHREYXRlKGkpO3k9IiI7ejtmb3IoQT0wO0E8X1swXTtBKyspe0I9IiI7dGhpcy5tYXhSb3dzPTQ7Zm9yKEM9MDtDPF9bMV07QysrKXtFPXRoaXMuX2RheWxpZ2h0U2F2aW5nQWRqdXN0KG5ldyBEYXRlKGgxLGcxLGkuc2VsZWN0ZWREYXkpKTtGPSIgdWktY29ybmVyLWFsbCI7Rz0iIjtpZihjMSl7Rys9IjxkaXYgY2xhc3M9J3VpLWRhdGVwaWNrZXItZ3JvdXAiO2lmKF9bMV0+MSl7c3dpdGNoKEMpe2Nhc2UgMDpHKz0iIHVpLWRhdGVwaWNrZXItZ3JvdXAtZmlyc3QiO0Y9IiB1aS1jb3JuZXItIisoVz8icmlnaHQiOiJsZWZ0Iik7YnJlYWs7Y2FzZSBfWzFdLTE6Rys9IiB1aS1kYXRlcGlja2VyLWdyb3VwLWxhc3QiO0Y9IiB1aS1jb3JuZXItIisoVz8ibGVmdCI6InJpZ2h0Iik7YnJlYWs7ZGVmYXVsdDpHKz0iIHVpLWRhdGVwaWNrZXItZ3JvdXAtbWlkZGxlIjtGPSIiO2JyZWFrfX1HKz0iJz4ifUcrPSI8ZGl2IGNsYXNzPSd1aS1kYXRlcGlja2VyLWhlYWRlciB1aS13aWRnZXQtaGVhZGVyIHVpLWhlbHBlci1jbGVhcmZpeCIrRisiJz4iKygvYWxsfGxlZnQvLnRlc3QoRikmJkE9PT0wPyhXP2I6YSk6IiIpKygvYWxsfHJpZ2h0Ly50ZXN0KEYpJiZBPT09MD8oVz9hOmIpOiIiKSt0aGlzLl9nZW5lcmF0ZU1vbnRoWWVhckhlYWRlcihpLGcxLGgxLGUxLGYxLEE+MHx8Qz4wLHEscikrIjwvZGl2Pjx0YWJsZSBjbGFzcz0ndWktZGF0ZXBpY2tlci1jYWxlbmRhcic+PHRoZWFkPiIrIjx0cj4iO0g9KHM/Ijx0aCBjbGFzcz0ndWktZGF0ZXBpY2tlci13ZWVrLWNvbCc+Iit0aGlzLl9nZXQoaSwid2Vla0hlYWRlciIpKyI8L3RoPiI6IiIpO2Zvcih6PTA7ejw3O3orKyl7ST0oeitrKSU3O0grPSI8dGgiKygoeitrKzYpJTc+PTU/IiBjbGFzcz0ndWktZGF0ZXBpY2tlci13ZWVrLWVuZCciOiIiKSsiPiIrIjxzcGFuIHRpdGxlPSciK2xbSV0rIic+IitvW0ldKyI8L3NwYW4+PC90aD4ifUcrPUgrIjwvdHI+PC90aGVhZD48dGJvZHk+IjtKPXRoaXMuX2dldERheXNJbk1vbnRoKGgxLGcxKTtpZihoMT09PWkuc2VsZWN0ZWRZZWFyJiZnMT09PWkuc2VsZWN0ZWRNb250aCl7aS5zZWxlY3RlZERheT1NYXRoLm1pbihpLnNlbGVjdGVkRGF5LEopfUs9KHRoaXMuX2dldEZpcnN0RGF5T2ZNb250aChoMSxnMSktays3KSU3O0w9TWF0aC5jZWlsKChLK0opLzcpO009KGMxP3RoaXMubWF4Um93cz5MP3RoaXMubWF4Um93czpMOkwpO3RoaXMubWF4Um93cz1NO049dGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3QobmV3IERhdGUoaDEsZzEsMS1LKSk7Zm9yKFI9MDtSPE07UisrKXtHKz0iPHRyPiI7Tz0oIXM/IiI6Ijx0ZCBjbGFzcz0ndWktZGF0ZXBpY2tlci13ZWVrLWNvbCc+Iit0aGlzLl9nZXQoaSwiY2FsY3VsYXRlV2VlayIpKE4pKyI8L3RkPiIpO2Zvcih6PTA7ejw3O3orKyl7UT0odD90LmFwcGx5KChpLmlucHV0P2kuaW5wdXRbMF06bnVsbCksW05dKTpbdHJ1ZSwiIl0pO1M9KE4uZ2V0TW9udGgoKSE9PWcxKTtUPShTJiYhdyl8fCFRWzBdfHwoZTEmJk48ZTEpfHwoZjEmJk4+ZjEpO08rPSI8dGQgY2xhc3M9JyIrKCh6K2srNiklNz49NT8iIHVpLWRhdGVwaWNrZXItd2Vlay1lbmQiOiIiKSsoUz8iIHVpLWRhdGVwaWNrZXItb3RoZXItbW9udGgiOiIiKSsoKE4uZ2V0VGltZSgpPT09RS5nZXRUaW1lKCkmJmcxPT09aS5zZWxlY3RlZE1vbnRoJiZpLl9rZXlFdmVudCl8fCh4LmdldFRpbWUoKT09PU4uZ2V0VGltZSgpJiZ4LmdldFRpbWUoKT09PUUuZ2V0VGltZSgpKT8iICIrdGhpcy5fZGF5T3ZlckNsYXNzOiIiKSsoVD8iICIrdGhpcy5fdW5zZWxlY3RhYmxlQ2xhc3MrIiB1aS1zdGF0ZS1kaXNhYmxlZCI6IiIpKyhTJiYhdj8iIjoiICIrUVsxXSsoTi5nZXRUaW1lKCk9PT1kMS5nZXRUaW1lKCk/IiAiK3RoaXMuX2N1cnJlbnRDbGFzczoiIikrKE4uZ2V0VGltZSgpPT09Vi5nZXRUaW1lKCk/IiB1aS1kYXRlcGlja2VyLXRvZGF5IjoiIikpKyInIisoKCFTfHx2KSYmUVsyXT8iIHRpdGxlPSciK1FbMl0ucmVwbGFjZSgvJy9nLCImIzM5OyIpKyInIjoiIikrKFQ/IiI6IiBkYXRhLWhhbmRsZXI9J3NlbGVjdERheScgZGF0YS1ldmVudD0nY2xpY2snIGRhdGEtbW9udGg9JyIrTi5nZXRNb250aCgpKyInIGRhdGEteWVhcj0nIitOLmdldEZ1bGxZZWFyKCkrIiciKSsiPiIrKFMmJiF2PyImI3hhMDsiOihUPyI8c3BhbiBjbGFzcz0ndWktc3RhdGUtZGVmYXVsdCc+IitOLmdldERhdGUoKSsiPC9zcGFuPiI6IjxhIGNsYXNzPSd1aS1zdGF0ZS1kZWZhdWx0IisoTi5nZXRUaW1lKCk9PT1WLmdldFRpbWUoKT8iIHVpLXN0YXRlLWhpZ2hsaWdodCI6IiIpKyhOLmdldFRpbWUoKT09PWQxLmdldFRpbWUoKT8iIHVpLXN0YXRlLWFjdGl2ZSI6IiIpKyhTPyIgdWktcHJpb3JpdHktc2Vjb25kYXJ5IjoiIikrIicgaHJlZj0nIyc+IitOLmdldERhdGUoKSsiPC9hPiIpKSsiPC90ZD4iO04uc2V0RGF0ZShOLmdldERhdGUoKSsxKTtOPXRoaXMuX2RheWxpZ2h0U2F2aW5nQWRqdXN0KE4pfUcrPU8rIjwvdHI+In1nMSsrO2lmKGcxPjExKXtnMT0wO2gxKyt9Rys9IjwvdGJvZHk+PC90YWJsZT4iKyhjMT8iPC9kaXY+IisoKF9bMF0+MCYmQz09PV9bMV0tMSk/IjxkaXYgY2xhc3M9J3VpLWRhdGVwaWNrZXItcm93LWJyZWFrJz48L2Rpdj4iOiIiKToiIik7Qis9R315Kz1CfXkrPWo7aS5fa2V5RXZlbnQ9ZmFsc2U7cmV0dXJuIHl9LF9nZW5lcmF0ZU1vbnRoWWVhckhlYWRlcjpmdW5jdGlvbihpLGEsYixtLGUscyxnLGgpe3ZhciBqLGssbCx5LHQsbixvLHAscT10aGlzLl9nZXQoaSwiY2hhbmdlTW9udGgiKSxyPXRoaXMuX2dldChpLCJjaGFuZ2VZZWFyIiksdj10aGlzLl9nZXQoaSwic2hvd01vbnRoQWZ0ZXJZZWFyIiksdz0iPGRpdiBjbGFzcz0ndWktZGF0ZXBpY2tlci10aXRsZSc+Iix4PSIiO2lmKHN8fCFxKXt4Kz0iPHNwYW4gY2xhc3M9J3VpLWRhdGVwaWNrZXItbW9udGgnPiIrZ1thXSsiPC9zcGFuPiJ9ZWxzZXtqPShtJiZtLmdldEZ1bGxZZWFyKCk9PT1iKTtrPShlJiZlLmdldEZ1bGxZZWFyKCk9PT1iKTt4Kz0iPHNlbGVjdCBjbGFzcz0ndWktZGF0ZXBpY2tlci1tb250aCcgZGF0YS1oYW5kbGVyPSdzZWxlY3RNb250aCcgZGF0YS1ldmVudD0nY2hhbmdlJz4iO2ZvcihsPTA7bDwxMjtsKyspe2lmKCghanx8bD49bS5nZXRNb250aCgpKSYmKCFrfHxsPD1lLmdldE1vbnRoKCkpKXt4Kz0iPG9wdGlvbiB2YWx1ZT0nIitsKyInIisobD09PWE/IiBzZWxlY3RlZD0nc2VsZWN0ZWQnIjoiIikrIj4iK2hbbF0rIjwvb3B0aW9uPiJ9fXgrPSI8L3NlbGVjdD4ifWlmKCF2KXt3Kz14KyhzfHwhKHEmJnIpPyImI3hhMDsiOiIiKX1pZighaS55ZWFyc2h0bWwpe2kueWVhcnNodG1sPSIiO2lmKHN8fCFyKXt3Kz0iPHNwYW4gY2xhc3M9J3VpLWRhdGVwaWNrZXIteWVhcic+IitiKyI8L3NwYW4+In1lbHNle3k9dGhpcy5fZ2V0KGksInllYXJSYW5nZSIpLnNwbGl0KCI6Iik7dD1uZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCk7bj1mdW5jdGlvbih6KXt2YXIgbz0oei5tYXRjaCgvY1srXC1dLiovKT9iK3BhcnNlSW50KHouc3Vic3RyaW5nKDEpLDEwKTooei5tYXRjaCgvWytcLV0uKi8pP3QrcGFyc2VJbnQoeiwxMCk6cGFyc2VJbnQoeiwxMCkpKTtyZXR1cm4oaXNOYU4obyk/dDpvKX07bz1uKHlbMF0pO3A9TWF0aC5tYXgobyxuKHlbMV18fCIiKSk7bz0obT9NYXRoLm1heChvLG0uZ2V0RnVsbFllYXIoKSk6byk7cD0oZT9NYXRoLm1pbihwLGUuZ2V0RnVsbFllYXIoKSk6cCk7aS55ZWFyc2h0bWwrPSI8c2VsZWN0IGNsYXNzPSd1aS1kYXRlcGlja2VyLXllYXInIGRhdGEtaGFuZGxlcj0nc2VsZWN0WWVhcicgZGF0YS1ldmVudD0nY2hhbmdlJz4iO2Zvcig7bzw9cDtvKyspe2kueWVhcnNodG1sKz0iPG9wdGlvbiB2YWx1ZT0nIitvKyInIisobz09PWI/IiBzZWxlY3RlZD0nc2VsZWN0ZWQnIjoiIikrIj4iK28rIjwvb3B0aW9uPiJ9aS55ZWFyc2h0bWwrPSI8L3NlbGVjdD4iO3crPWkueWVhcnNodG1sO2kueWVhcnNodG1sPW51bGx9fXcrPXRoaXMuX2dldChpLCJ5ZWFyU3VmZml4Iik7aWYodil7dys9KHN8fCEocSYmcik/IiYjeGEwOyI6IiIpK3h9dys9IjwvZGl2PiI7cmV0dXJuIHd9LF9hZGp1c3RJbnN0RGF0ZTpmdW5jdGlvbihpLG8scCl7dmFyIHk9aS5kcmF3WWVhcisocD09PSJZIj9vOjApLG09aS5kcmF3TW9udGgrKHA9PT0iTSI/bzowKSxhPU1hdGgubWluKGkuc2VsZWN0ZWREYXksdGhpcy5fZ2V0RGF5c0luTW9udGgoeSxtKSkrKHA9PT0iRCI/bzowKSxiPXRoaXMuX3Jlc3RyaWN0TWluTWF4KGksdGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3QobmV3IERhdGUoeSxtLGEpKSk7aS5zZWxlY3RlZERheT1iLmdldERhdGUoKTtpLmRyYXdNb250aD1pLnNlbGVjdGVkTW9udGg9Yi5nZXRNb250aCgpO2kuZHJhd1llYXI9aS5zZWxlY3RlZFllYXI9Yi5nZXRGdWxsWWVhcigpO2lmKHA9PT0iTSJ8fHA9PT0iWSIpe3RoaXMuX25vdGlmeUNoYW5nZShpKX19LF9yZXN0cmljdE1pbk1heDpmdW5jdGlvbihpLGEpe3ZhciBtPXRoaXMuX2dldE1pbk1heERhdGUoaSwibWluIiksYj10aGlzLl9nZXRNaW5NYXhEYXRlKGksIm1heCIpLG49KG0mJmE8bT9tOmEpO3JldHVybihiJiZuPmI/YjpuKX0sX25vdGlmeUNoYW5nZTpmdW5jdGlvbihpKXt2YXIgbz10aGlzLl9nZXQoaSwib25DaGFuZ2VNb250aFllYXIiKTtpZihvKXtvLmFwcGx5KChpLmlucHV0P2kuaW5wdXRbMF06bnVsbCksW2kuc2VsZWN0ZWRZZWFyLGkuc2VsZWN0ZWRNb250aCsxLGldKX19LF9nZXROdW1iZXJPZk1vbnRoczpmdW5jdGlvbihpKXt2YXIgbj10aGlzLl9nZXQoaSwibnVtYmVyT2ZNb250aHMiKTtyZXR1cm4obj09bnVsbD9bMSwxXToodHlwZW9mIG49PT0ibnVtYmVyIj9bMSxuXTpuKSl9LF9nZXRNaW5NYXhEYXRlOmZ1bmN0aW9uKGksbSl7cmV0dXJuIHRoaXMuX2RldGVybWluZURhdGUoaSx0aGlzLl9nZXQoaSxtKyJEYXRlIiksbnVsbCl9LF9nZXREYXlzSW5Nb250aDpmdW5jdGlvbih5LG0pe3JldHVybiAzMi10aGlzLl9kYXlsaWdodFNhdmluZ0FkanVzdChuZXcgRGF0ZSh5LG0sMzIpKS5nZXREYXRlKCl9LF9nZXRGaXJzdERheU9mTW9udGg6ZnVuY3Rpb24oeSxtKXtyZXR1cm4gbmV3IERhdGUoeSxtLDEpLmdldERheSgpfSxfY2FuQWRqdXN0TW9udGg6ZnVuY3Rpb24oaSxvLGEsYil7dmFyIG49dGhpcy5fZ2V0TnVtYmVyT2ZNb250aHMoaSksZT10aGlzLl9kYXlsaWdodFNhdmluZ0FkanVzdChuZXcgRGF0ZShhLGIrKG88MD9vOm5bMF0qblsxXSksMSkpO2lmKG88MCl7ZS5zZXREYXRlKHRoaXMuX2dldERheXNJbk1vbnRoKGUuZ2V0RnVsbFllYXIoKSxlLmdldE1vbnRoKCkpKX1yZXR1cm4gdGhpcy5faXNJblJhbmdlKGksZSl9LF9pc0luUmFuZ2U6ZnVuY3Rpb24oaSxhKXt2YXIgeSxiLG09dGhpcy5fZ2V0TWluTWF4RGF0ZShpLCJtaW4iKSxlPXRoaXMuX2dldE1pbk1heERhdGUoaSwibWF4IiksZz1udWxsLGg9bnVsbCxqPXRoaXMuX2dldChpLCJ5ZWFyUmFuZ2UiKTtpZihqKXt5PWouc3BsaXQoIjoiKTtiPW5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKTtnPXBhcnNlSW50KHlbMF0sMTApO2g9cGFyc2VJbnQoeVsxXSwxMCk7aWYoeVswXS5tYXRjaCgvWytcLV0uKi8pKXtnKz1ifWlmKHlbMV0ubWF0Y2goL1srXC1dLiovKSl7aCs9Yn19cmV0dXJuKCghbXx8YS5nZXRUaW1lKCk+PW0uZ2V0VGltZSgpKSYmKCFlfHxhLmdldFRpbWUoKTw9ZS5nZXRUaW1lKCkpJiYoIWd8fGEuZ2V0RnVsbFllYXIoKT49ZykmJighaHx8YS5nZXRGdWxsWWVhcigpPD1oKSl9LF9nZXRGb3JtYXRDb25maWc6ZnVuY3Rpb24oaSl7dmFyIHM9dGhpcy5fZ2V0KGksInNob3J0WWVhckN1dG9mZiIpO3M9KHR5cGVvZiBzIT09InN0cmluZyI/czpuZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCklMTAwK3BhcnNlSW50KHMsMTApKTtyZXR1cm57c2hvcnRZZWFyQ3V0b2ZmOnMsZGF5TmFtZXNTaG9ydDp0aGlzLl9nZXQoaSwiZGF5TmFtZXNTaG9ydCIpLGRheU5hbWVzOnRoaXMuX2dldChpLCJkYXlOYW1lcyIpLG1vbnRoTmFtZXNTaG9ydDp0aGlzLl9nZXQoaSwibW9udGhOYW1lc1Nob3J0IiksbW9udGhOYW1lczp0aGlzLl9nZXQoaSwibW9udGhOYW1lcyIpfX0sX2Zvcm1hdERhdGU6ZnVuY3Rpb24oaSxhLG0seSl7aWYoIWEpe2kuY3VycmVudERheT1pLnNlbGVjdGVkRGF5O2kuY3VycmVudE1vbnRoPWkuc2VsZWN0ZWRNb250aDtpLmN1cnJlbnRZZWFyPWkuc2VsZWN0ZWRZZWFyfXZhciBiPShhPyh0eXBlb2YgYT09PSJvYmplY3QiP2E6dGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3QobmV3IERhdGUoeSxtLGEpKSk6dGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3QobmV3IERhdGUoaS5jdXJyZW50WWVhcixpLmN1cnJlbnRNb250aCxpLmN1cnJlbnREYXkpKSk7cmV0dXJuIHRoaXMuZm9ybWF0RGF0ZSh0aGlzLl9nZXQoaSwiZGF0ZUZvcm1hdCIpLGIsdGhpcy5fZ2V0Rm9ybWF0Q29uZmlnKGkpKX19KTtmdW5jdGlvbiBkKGEpe3ZhciBzPSJidXR0b24sIC51aS1kYXRlcGlja2VyLXByZXYsIC51aS1kYXRlcGlja2VyLW5leHQsIC51aS1kYXRlcGlja2VyLWNhbGVuZGFyIHRkIGEiO3JldHVybiBhLmRlbGVnYXRlKHMsIm1vdXNlb3V0IixmdW5jdGlvbigpeyQodGhpcykucmVtb3ZlQ2xhc3MoInVpLXN0YXRlLWhvdmVyIik7aWYodGhpcy5jbGFzc05hbWUuaW5kZXhPZigidWktZGF0ZXBpY2tlci1wcmV2IikhPT0tMSl7JCh0aGlzKS5yZW1vdmVDbGFzcygidWktZGF0ZXBpY2tlci1wcmV2LWhvdmVyIil9aWYodGhpcy5jbGFzc05hbWUuaW5kZXhPZigidWktZGF0ZXBpY2tlci1uZXh0IikhPT0tMSl7JCh0aGlzKS5yZW1vdmVDbGFzcygidWktZGF0ZXBpY2tlci1uZXh0LWhvdmVyIil9fSkuZGVsZWdhdGUocywibW91c2VvdmVyIixmdW5jdGlvbigpe2lmKCEkLmRhdGVwaWNrZXIuX2lzRGlzYWJsZWREYXRlcGlja2VyKGMuaW5saW5lP2EucGFyZW50KClbMF06Yy5pbnB1dFswXSkpeyQodGhpcykucGFyZW50cygiLnVpLWRhdGVwaWNrZXItY2FsZW5kYXIiKS5maW5kKCJhIikucmVtb3ZlQ2xhc3MoInVpLXN0YXRlLWhvdmVyIik7JCh0aGlzKS5hZGRDbGFzcygidWktc3RhdGUtaG92ZXIiKTtpZih0aGlzLmNsYXNzTmFtZS5pbmRleE9mKCJ1aS1kYXRlcGlja2VyLXByZXYiKSE9PS0xKXskKHRoaXMpLmFkZENsYXNzKCJ1aS1kYXRlcGlja2VyLXByZXYtaG92ZXIiKX1pZih0aGlzLmNsYXNzTmFtZS5pbmRleE9mKCJ1aS1kYXRlcGlja2VyLW5leHQiKSE9PS0xKXskKHRoaXMpLmFkZENsYXNzKCJ1aS1kYXRlcGlja2VyLW5leHQtaG92ZXIiKX19fSl9ZnVuY3Rpb24gZih0LHApeyQuZXh0ZW5kKHQscCk7Zm9yKHZhciBuIGluIHApe2lmKHBbbl09PW51bGwpe3Rbbl09cFtuXX19cmV0dXJuIHR9JC5mbi5kYXRlcGlja2VyPWZ1bmN0aW9uKG8pe2lmKCF0aGlzLmxlbmd0aCl7cmV0dXJuIHRoaXN9aWYoISQuZGF0ZXBpY2tlci5pbml0aWFsaXplZCl7JChkb2N1bWVudCkubW91c2Vkb3duKCQuZGF0ZXBpY2tlci5fY2hlY2tFeHRlcm5hbENsaWNrKTskLmRhdGVwaWNrZXIuaW5pdGlhbGl6ZWQ9dHJ1ZX1pZigkKCIjIiskLmRhdGVwaWNrZXIuX21haW5EaXZJZCkubGVuZ3RoPT09MCl7JCgiYm9keSIpLmFwcGVuZCgkLmRhdGVwaWNrZXIuZHBEaXYpfXZhciBhPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKTtpZih0eXBlb2Ygbz09PSJzdHJpbmciJiYobz09PSJpc0Rpc2FibGVkInx8bz09PSJnZXREYXRlInx8bz09PSJ3aWRnZXQiKSl7cmV0dXJuICQuZGF0ZXBpY2tlclsiXyIrbysiRGF0ZXBpY2tlciJdLmFwcGx5KCQuZGF0ZXBpY2tlcixbdGhpc1swXV0uY29uY2F0KGEpKX1pZihvPT09Im9wdGlvbiImJmFyZ3VtZW50cy5sZW5ndGg9PT0yJiZ0eXBlb2YgYXJndW1lbnRzWzFdPT09InN0cmluZyIpe3JldHVybiAkLmRhdGVwaWNrZXJbIl8iK28rIkRhdGVwaWNrZXIiXS5hcHBseSgkLmRhdGVwaWNrZXIsW3RoaXNbMF1dLmNvbmNhdChhKSl9cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3R5cGVvZiBvPT09InN0cmluZyI/JC5kYXRlcGlja2VyWyJfIitvKyJEYXRlcGlja2VyIl0uYXBwbHkoJC5kYXRlcGlja2VyLFt0aGlzXS5jb25jYXQoYSkpOiQuZGF0ZXBpY2tlci5fYXR0YWNoRGF0ZXBpY2tlcih0aGlzLG8pfSl9OyQuZGF0ZXBpY2tlcj1uZXcgRCgpOyQuZGF0ZXBpY2tlci5pbml0aWFsaXplZD1mYWxzZTskLmRhdGVwaWNrZXIudXVpZD1uZXcgRGF0ZSgpLmdldFRpbWUoKTskLmRhdGVwaWNrZXIudmVyc2lvbj0iMS4xMC40In0pKGpRdWVyeSk7DQovKiENCiAqIGpRdWVyeSBVSSBQb3NpdGlvbiAxLjEwLjQNCiAqIGh0dHA6Ly9qcXVlcnl1aS5jb20NCiAqDQogKiBDb3B5cmlnaHQgMjAxNCBqUXVlcnkgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzDQogKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuDQogKiBodHRwOi8vanF1ZXJ5Lm9yZy9saWNlbnNlDQogKg0KICogaHR0cDovL2FwaS5qcXVlcnl1aS5jb20vcG9zaXRpb24vDQogKi8NCihmdW5jdGlvbigkLHUpeyQudWk9JC51aXx8e307dmFyIGMsbT1NYXRoLm1heCxhPU1hdGguYWJzLHI9TWF0aC5yb3VuZCxiPS9sZWZ0fGNlbnRlcnxyaWdodC8sZD0vdG9wfGNlbnRlcnxib3R0b20vLGU9L1tcK1wtXVxkKyhcLltcZF0rKT8lPy8sZj0vXlx3Ky8sZz0vJSQvLF89JC5mbi5wb3NpdGlvbjtmdW5jdGlvbiBoKG8sdyxpKXtyZXR1cm5bcGFyc2VGbG9hdChvWzBdKSooZy50ZXN0KG9bMF0pP3cvMTAwOjEpLHBhcnNlRmxvYXQob1sxXSkqKGcudGVzdChvWzFdKT9pLzEwMDoxKV19ZnVuY3Rpb24gcChpLGspe3JldHVybiBwYXJzZUludCgkLmNzcyhpLGspLDEwKXx8MH1mdW5jdGlvbiBqKGkpe3ZhciBrPWlbMF07aWYoay5ub2RlVHlwZT09PTkpe3JldHVybnt3aWR0aDppLndpZHRoKCksaGVpZ2h0OmkuaGVpZ2h0KCksb2Zmc2V0Ont0b3A6MCxsZWZ0OjB9fX1pZigkLmlzV2luZG93KGspKXtyZXR1cm57d2lkdGg6aS53aWR0aCgpLGhlaWdodDppLmhlaWdodCgpLG9mZnNldDp7dG9wOmkuc2Nyb2xsVG9wKCksbGVmdDppLnNjcm9sbExlZnQoKX19fWlmKGsucHJldmVudERlZmF1bHQpe3JldHVybnt3aWR0aDowLGhlaWdodDowLG9mZnNldDp7dG9wOmsucGFnZVksbGVmdDprLnBhZ2VYfX19cmV0dXJue3dpZHRoOmkub3V0ZXJXaWR0aCgpLGhlaWdodDppLm91dGVySGVpZ2h0KCksb2Zmc2V0Omkub2Zmc2V0KCl9fSQucG9zaXRpb249e3Njcm9sbGJhcldpZHRoOmZ1bmN0aW9uKCl7aWYoYyE9PXUpe3JldHVybiBjfXZhciB3LGksaz0kKCI8ZGl2IHN0eWxlPSdkaXNwbGF5OmJsb2NrO3Bvc2l0aW9uOmFic29sdXRlO3dpZHRoOjUwcHg7aGVpZ2h0OjUwcHg7b3ZlcmZsb3c6aGlkZGVuOyc+PGRpdiBzdHlsZT0naGVpZ2h0OjEwMHB4O3dpZHRoOmF1dG87Jz48L2Rpdj48L2Rpdj4iKSxsPWsuY2hpbGRyZW4oKVswXTskKCJib2R5IikuYXBwZW5kKGspO3c9bC5vZmZzZXRXaWR0aDtrLmNzcygib3ZlcmZsb3ciLCJzY3JvbGwiKTtpPWwub2Zmc2V0V2lkdGg7aWYodz09PWkpe2k9a1swXS5jbGllbnRXaWR0aH1rLnJlbW92ZSgpO3JldHVybihjPXctaSl9LGdldFNjcm9sbEluZm86ZnVuY3Rpb24odyl7dmFyIG89dy5pc1dpbmRvd3x8dy5pc0RvY3VtZW50PyIiOncuZWxlbWVudC5jc3MoIm92ZXJmbG93LXgiKSxpPXcuaXNXaW5kb3d8fHcuaXNEb2N1bWVudD8iIjp3LmVsZW1lbnQuY3NzKCJvdmVyZmxvdy15Iiksaz1vPT09InNjcm9sbCJ8fChvPT09ImF1dG8iJiZ3LndpZHRoPHcuZWxlbWVudFswXS5zY3JvbGxXaWR0aCksbD1pPT09InNjcm9sbCJ8fChpPT09ImF1dG8iJiZ3LmhlaWdodDx3LmVsZW1lbnRbMF0uc2Nyb2xsSGVpZ2h0KTtyZXR1cm57d2lkdGg6bD8kLnBvc2l0aW9uLnNjcm9sbGJhcldpZHRoKCk6MCxoZWlnaHQ6az8kLnBvc2l0aW9uLnNjcm9sbGJhcldpZHRoKCk6MH19LGdldFdpdGhpbkluZm86ZnVuY3Rpb24oaSl7dmFyIHc9JChpfHx3aW5kb3cpLGs9JC5pc1dpbmRvdyh3WzBdKSxsPSEhd1swXSYmd1swXS5ub2RlVHlwZT09PTk7cmV0dXJue2VsZW1lbnQ6dyxpc1dpbmRvdzprLGlzRG9jdW1lbnQ6bCxvZmZzZXQ6dy5vZmZzZXQoKXx8e2xlZnQ6MCx0b3A6MH0sc2Nyb2xsTGVmdDp3LnNjcm9sbExlZnQoKSxzY3JvbGxUb3A6dy5zY3JvbGxUb3AoKSx3aWR0aDprP3cud2lkdGgoKTp3Lm91dGVyV2lkdGgoKSxoZWlnaHQ6az93LmhlaWdodCgpOncub3V0ZXJIZWlnaHQoKX19fTskLmZuLnBvc2l0aW9uPWZ1bmN0aW9uKG8pe2lmKCFvfHwhby5vZil7cmV0dXJuIF8uYXBwbHkodGhpcyxhcmd1bWVudHMpfW89JC5leHRlbmQoe30sbyk7dmFyIGssdCxsLG4scSxzLHY9JChvLm9mKSx3PSQucG9zaXRpb24uZ2V0V2l0aGluSW5mbyhvLndpdGhpbikseD0kLnBvc2l0aW9uLmdldFNjcm9sbEluZm8odykseT0oby5jb2xsaXNpb258fCJmbGlwIikuc3BsaXQoIiAiKSx6PXt9O3M9aih2KTtpZih2WzBdLnByZXZlbnREZWZhdWx0KXtvLmF0PSJsZWZ0IHRvcCJ9dD1zLndpZHRoO2w9cy5oZWlnaHQ7bj1zLm9mZnNldDtxPSQuZXh0ZW5kKHt9LG4pOyQuZWFjaChbIm15IiwiYXQiXSxmdW5jdGlvbigpe3ZhciBpPShvW3RoaXNdfHwiIikuc3BsaXQoIiAiKSxBLEI7aWYoaS5sZW5ndGg9PT0xKXtpPWIudGVzdChpWzBdKT9pLmNvbmNhdChbImNlbnRlciJdKTpkLnRlc3QoaVswXSk/WyJjZW50ZXIiXS5jb25jYXQoaSk6WyJjZW50ZXIiLCJjZW50ZXIiXX1pWzBdPWIudGVzdChpWzBdKT9pWzBdOiJjZW50ZXIiO2lbMV09ZC50ZXN0KGlbMV0pP2lbMV06ImNlbnRlciI7QT1lLmV4ZWMoaVswXSk7Qj1lLmV4ZWMoaVsxXSk7elt0aGlzXT1bQT9BWzBdOjAsQj9CWzBdOjBdO29bdGhpc109W2YuZXhlYyhpWzBdKVswXSxmLmV4ZWMoaVsxXSlbMF1dfSk7aWYoeS5sZW5ndGg9PT0xKXt5WzFdPXlbMF19aWYoby5hdFswXT09PSJyaWdodCIpe3EubGVmdCs9dH1lbHNlIGlmKG8uYXRbMF09PT0iY2VudGVyIil7cS5sZWZ0Kz10LzJ9aWYoby5hdFsxXT09PSJib3R0b20iKXtxLnRvcCs9bH1lbHNlIGlmKG8uYXRbMV09PT0iY2VudGVyIil7cS50b3ArPWwvMn1rPWgoei5hdCx0LGwpO3EubGVmdCs9a1swXTtxLnRvcCs9a1sxXTtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIEEsQixDPSQodGhpcyksRD1DLm91dGVyV2lkdGgoKSxFPUMub3V0ZXJIZWlnaHQoKSxGPXAodGhpcywibWFyZ2luTGVmdCIpLEc9cCh0aGlzLCJtYXJnaW5Ub3AiKSxIPUQrRitwKHRoaXMsIm1hcmdpblJpZ2h0IikreC53aWR0aCxJPUUrRytwKHRoaXMsIm1hcmdpbkJvdHRvbSIpK3guaGVpZ2h0LEo9JC5leHRlbmQoe30scSksSz1oKHoubXksQy5vdXRlcldpZHRoKCksQy5vdXRlckhlaWdodCgpKTtpZihvLm15WzBdPT09InJpZ2h0Iil7Si5sZWZ0LT1EfWVsc2UgaWYoby5teVswXT09PSJjZW50ZXIiKXtKLmxlZnQtPUQvMn1pZihvLm15WzFdPT09ImJvdHRvbSIpe0oudG9wLT1FfWVsc2UgaWYoby5teVsxXT09PSJjZW50ZXIiKXtKLnRvcC09RS8yfUoubGVmdCs9S1swXTtKLnRvcCs9S1sxXTtpZighJC5zdXBwb3J0Lm9mZnNldEZyYWN0aW9ucyl7Si5sZWZ0PXIoSi5sZWZ0KTtKLnRvcD1yKEoudG9wKX1BPXttYXJnaW5MZWZ0OkYsbWFyZ2luVG9wOkd9OyQuZWFjaChbImxlZnQiLCJ0b3AiXSxmdW5jdGlvbihpLEwpe2lmKCQudWkucG9zaXRpb25beVtpXV0peyQudWkucG9zaXRpb25beVtpXV1bTF0oSix7dGFyZ2V0V2lkdGg6dCx0YXJnZXRIZWlnaHQ6bCxlbGVtV2lkdGg6RCxlbGVtSGVpZ2h0OkUsY29sbGlzaW9uUG9zaXRpb246QSxjb2xsaXNpb25XaWR0aDpILGNvbGxpc2lvbkhlaWdodDpJLG9mZnNldDpba1swXStLWzBdLGtbMV0rS1sxXV0sbXk6by5teSxhdDpvLmF0LHdpdGhpbjp3LGVsZW06Q30pfX0pO2lmKG8udXNpbmcpe0I9ZnVuY3Rpb24oaSl7dmFyIEw9bi5sZWZ0LUoubGVmdCxNPUwrdC1ELE49bi50b3AtSi50b3AsTz1OK2wtRSxQPXt0YXJnZXQ6e2VsZW1lbnQ6dixsZWZ0Om4ubGVmdCx0b3A6bi50b3Asd2lkdGg6dCxoZWlnaHQ6bH0sZWxlbWVudDp7ZWxlbWVudDpDLGxlZnQ6Si5sZWZ0LHRvcDpKLnRvcCx3aWR0aDpELGhlaWdodDpFfSxob3Jpem9udGFsOk08MD8ibGVmdCI6TD4wPyJyaWdodCI6ImNlbnRlciIsdmVydGljYWw6TzwwPyJ0b3AiOk4+MD8iYm90dG9tIjoibWlkZGxlIn07aWYodDxEJiZhKEwrTSk8dCl7UC5ob3Jpem9udGFsPSJjZW50ZXIifWlmKGw8RSYmYShOK08pPGwpe1AudmVydGljYWw9Im1pZGRsZSJ9aWYobShhKEwpLGEoTSkpPm0oYShOKSxhKE8pKSl7UC5pbXBvcnRhbnQ9Imhvcml6b250YWwifWVsc2V7UC5pbXBvcnRhbnQ9InZlcnRpY2FsIn1vLnVzaW5nLmNhbGwodGhpcyxpLFApfX1DLm9mZnNldCgkLmV4dGVuZChKLHt1c2luZzpCfSkpfSl9OyQudWkucG9zaXRpb249e2ZpdDp7bGVmdDpmdW5jdGlvbihpLGspe3ZhciB3PWsud2l0aGluLGw9dy5pc1dpbmRvdz93LnNjcm9sbExlZnQ6dy5vZmZzZXQubGVmdCxvPXcud2lkdGgsbj1pLmxlZnQtay5jb2xsaXNpb25Qb3NpdGlvbi5tYXJnaW5MZWZ0LHE9bC1uLHM9bitrLmNvbGxpc2lvbldpZHRoLW8tbCx0O2lmKGsuY29sbGlzaW9uV2lkdGg+byl7aWYocT4wJiZzPD0wKXt0PWkubGVmdCtxK2suY29sbGlzaW9uV2lkdGgtby1sO2kubGVmdCs9cS10fWVsc2UgaWYocz4wJiZxPD0wKXtpLmxlZnQ9bH1lbHNle2lmKHE+cyl7aS5sZWZ0PWwrby1rLmNvbGxpc2lvbldpZHRofWVsc2V7aS5sZWZ0PWx9fX1lbHNlIGlmKHE+MCl7aS5sZWZ0Kz1xfWVsc2UgaWYocz4wKXtpLmxlZnQtPXN9ZWxzZXtpLmxlZnQ9bShpLmxlZnQtbixpLmxlZnQpfX0sdG9wOmZ1bmN0aW9uKGksayl7dmFyIHc9ay53aXRoaW4sbD13LmlzV2luZG93P3cuc2Nyb2xsVG9wOncub2Zmc2V0LnRvcCxvPWsud2l0aGluLmhlaWdodCxuPWkudG9wLWsuY29sbGlzaW9uUG9zaXRpb24ubWFyZ2luVG9wLHE9bC1uLHM9bitrLmNvbGxpc2lvbkhlaWdodC1vLWwsdDtpZihrLmNvbGxpc2lvbkhlaWdodD5vKXtpZihxPjAmJnM8PTApe3Q9aS50b3ArcStrLmNvbGxpc2lvbkhlaWdodC1vLWw7aS50b3ArPXEtdH1lbHNlIGlmKHM+MCYmcTw9MCl7aS50b3A9bH1lbHNle2lmKHE+cyl7aS50b3A9bCtvLWsuY29sbGlzaW9uSGVpZ2h0fWVsc2V7aS50b3A9bH19fWVsc2UgaWYocT4wKXtpLnRvcCs9cX1lbHNlIGlmKHM+MCl7aS50b3AtPXN9ZWxzZXtpLnRvcD1tKGkudG9wLW4saS50b3ApfX19LGZsaXA6e2xlZnQ6ZnVuY3Rpb24oaSxrKXt2YXIgdz1rLndpdGhpbixsPXcub2Zmc2V0LmxlZnQrdy5zY3JvbGxMZWZ0LG89dy53aWR0aCxuPXcuaXNXaW5kb3c/dy5zY3JvbGxMZWZ0Oncub2Zmc2V0LmxlZnQscT1pLmxlZnQtay5jb2xsaXNpb25Qb3NpdGlvbi5tYXJnaW5MZWZ0LHM9cS1uLHQ9cStrLmNvbGxpc2lvbldpZHRoLW8tbix2PWsubXlbMF09PT0ibGVmdCI/LWsuZWxlbVdpZHRoOmsubXlbMF09PT0icmlnaHQiP2suZWxlbVdpZHRoOjAseD1rLmF0WzBdPT09ImxlZnQiP2sudGFyZ2V0V2lkdGg6ay5hdFswXT09PSJyaWdodCI/LWsudGFyZ2V0V2lkdGg6MCx5PS0yKmsub2Zmc2V0WzBdLHosQTtpZihzPDApe3o9aS5sZWZ0K3YreCt5K2suY29sbGlzaW9uV2lkdGgtby1sO2lmKHo8MHx8ejxhKHMpKXtpLmxlZnQrPXYreCt5fX1lbHNlIGlmKHQ+MCl7QT1pLmxlZnQtay5jb2xsaXNpb25Qb3NpdGlvbi5tYXJnaW5MZWZ0K3YreCt5LW47aWYoQT4wfHxhKEEpPHQpe2kubGVmdCs9dit4K3l9fX0sdG9wOmZ1bmN0aW9uKGksayl7dmFyIHc9ay53aXRoaW4sbD13Lm9mZnNldC50b3Ardy5zY3JvbGxUb3Asbz13LmhlaWdodCxuPXcuaXNXaW5kb3c/dy5zY3JvbGxUb3A6dy5vZmZzZXQudG9wLHE9aS50b3Atay5jb2xsaXNpb25Qb3NpdGlvbi5tYXJnaW5Ub3Ascz1xLW4sdD1xK2suY29sbGlzaW9uSGVpZ2h0LW8tbix2PWsubXlbMV09PT0idG9wIix4PXY/LWsuZWxlbUhlaWdodDprLm15WzFdPT09ImJvdHRvbSI/ay5lbGVtSGVpZ2h0OjAseT1rLmF0WzFdPT09InRvcCI/ay50YXJnZXRIZWlnaHQ6ay5hdFsxXT09PSJib3R0b20iPy1rLnRhcmdldEhlaWdodDowLHo9LTIqay5vZmZzZXRbMV0sQSxCO2lmKHM8MCl7Qj1pLnRvcCt4K3kreitrLmNvbGxpc2lvbkhlaWdodC1vLWw7aWYoKGkudG9wK3greSt6KT5zJiYoQjwwfHxCPGEocykpKXtpLnRvcCs9eCt5K3p9fWVsc2UgaWYodD4wKXtBPWkudG9wLWsuY29sbGlzaW9uUG9zaXRpb24ubWFyZ2luVG9wK3greSt6LW47aWYoKGkudG9wK3greSt6KT50JiYoQT4wfHxhKEEpPHQpKXtpLnRvcCs9eCt5K3p9fX19LGZsaXBmaXQ6e2xlZnQ6ZnVuY3Rpb24oKXskLnVpLnBvc2l0aW9uLmZsaXAubGVmdC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7JC51aS5wb3NpdGlvbi5maXQubGVmdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LHRvcDpmdW5jdGlvbigpeyQudWkucG9zaXRpb24uZmxpcC50b3AuYXBwbHkodGhpcyxhcmd1bWVudHMpOyQudWkucG9zaXRpb24uZml0LnRvcC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fX07KGZ1bmN0aW9uKCl7dmFyIHQsayxsLG8saSxuPWRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJib2R5IilbMF0scT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTt0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQobj8iZGl2IjoiYm9keSIpO2w9e3Zpc2liaWxpdHk6ImhpZGRlbiIsd2lkdGg6MCxoZWlnaHQ6MCxib3JkZXI6MCxtYXJnaW46MCxiYWNrZ3JvdW5kOiJub25lIn07aWYobil7JC5leHRlbmQobCx7cG9zaXRpb246ImFic29sdXRlIixsZWZ0OiItMTAwMHB4Iix0b3A6Ii0xMDAwcHgifSl9Zm9yKGkgaW4gbCl7dC5zdHlsZVtpXT1sW2ldfXQuYXBwZW5kQ2hpbGQocSk7az1ufHxkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7ay5pbnNlcnRCZWZvcmUodCxrLmZpcnN0Q2hpbGQpO3Euc3R5bGUuY3NzVGV4dD0icG9zaXRpb246IGFic29sdXRlOyBsZWZ0OiAxMC43NDMyMjIycHg7IjtvPSQocSkub2Zmc2V0KCkubGVmdDskLnN1cHBvcnQub2Zmc2V0RnJhY3Rpb25zPW8+MTAmJm88MTE7dC5pbm5lckhUTUw9IiI7ay5yZW1vdmVDaGlsZCh0KX0pKCl9KGpRdWVyeSkpOw0KLyohDQogKiBTQVAgVUkgZGV2ZWxvcG1lbnQgdG9vbGtpdCBmb3IgSFRNTDUgKFNBUFVJNS9PcGVuVUk1KQ0KICogKGMpIENvcHlyaWdodCAyMDA5LTIwMTQgU0FQIFNFIG9yIGFuIFNBUCBhZmZpbGlhdGUgY29tcGFueS4gDQogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wIC0gc2VlIExJQ0VOU0UudHh0Lg0KICovDQooZnVuY3Rpb24ocSl7InVzZSBzdHJpY3QiO3ZhciBQPWZ1bmN0aW9uKEEpe2lmKHR5cGVvZihBKSE9ImZ1bmN0aW9uIil7dGhyb3cgbmV3IFR5cGVFcnJvcigiQXJndW1lbnQgaXMgbm90IGEgZnVuY3Rpb24iKX10aGlzLl9kZWZlcnJlZD1uZXcgcS5EZWZlcnJlZCgpO3RyeXt2YXIgdD10aGlzO0EoZnVuY3Rpb24odil7Yih0LHYsdHJ1ZSl9LGZ1bmN0aW9uKHYpe2IodCx2LGZhbHNlKX0pfWNhdGNoKGUpe2IodGhpcyxlLGZhbHNlKX19O1AucHJvdG90eXBlLnRoZW49ZnVuY3Rpb24obyxPKXt2YXIgZj1uZXcgUChfKTt0aGlzLl9kZWZlcnJlZC50aGVuKGQobyxmLHRydWUpLGQoTyxmLGZhbHNlKSk7cmV0dXJuIGZ9O1AucHJvdG90eXBlWyJjYXRjaCJdPWZ1bmN0aW9uKG8pe3JldHVybiB0aGlzLnRoZW4odW5kZWZpbmVkLG8pfTtQLmFsbD1mdW5jdGlvbihwKXtyZXR1cm4gbmV3IFAoZnVuY3Rpb24ocixSKXtpZighcS5pc0FycmF5KHApKXtSKHt9KTtyZXR1cm59aWYocC5sZW5ndGg9PTApe3IoW10pO3JldHVybn12YXIgZj1mYWxzZSx2PW5ldyBBcnJheShwLmxlbmd0aCksQz0wO2Z1bmN0aW9uIGUoSSl7UC5yZXNvbHZlKHBbSV0pLnRoZW4oZnVuY3Rpb24obyl7aWYoIWYpe0MrKzt2W0ldPW87aWYoQz09cC5sZW5ndGgpe3Iodil9fX0sZnVuY3Rpb24obyl7aWYoIWYpe2Y9dHJ1ZTtSKG8pfX0pfTtmb3IodmFyIGk9MDtpPHAubGVuZ3RoO2krKyl7ZShpKX19KX07UC5yYWNlPWZ1bmN0aW9uKHApe3JldHVybiBuZXcgUChmdW5jdGlvbihyLFIpe2lmKCFxLmlzQXJyYXkocCkpe1Ioe30pfXZhciBmPWZhbHNlO2Zvcih2YXIgaT0wO2k8cC5sZW5ndGg7aSsrKXtQLnJlc29sdmUocFtpXSkudGhlbihmdW5jdGlvbihvKXtpZighZil7Zj10cnVlO3Iobyl9fSxmdW5jdGlvbihvKXtpZighZil7Zj10cnVlO1Iobyl9fSl9fSl9O1AucmVzb2x2ZT1mdW5jdGlvbihvKXtyZXR1cm4gbyBpbnN0YW5jZW9mIFA/bzpjKG5ldyBQKF8pLG8pfTtQLnJlamVjdD1mdW5jdGlvbihvKXtyZXR1cm4gYihuZXcgUChfKSxvLGZhbHNlKX07ZnVuY3Rpb24gXygpe307ZnVuY3Rpb24gYShvKXtyZXR1cm4gbyYmby50aGVuJiZ0eXBlb2Yoby50aGVuKT09ImZ1bmN0aW9uIn07ZnVuY3Rpb24gYihwLG8scil7c2V0VGltZW91dChmdW5jdGlvbigpe2lmKGEobykmJnIpe2MocCxvKX1lbHNle3AuX2RlZmVycmVkW3I/InJlc29sdmUiOiJyZWplY3QiXShvKX19LDApO3JldHVybiBwfTtmdW5jdGlvbiBjKHAsbyl7aWYoYShvKSl7dmFyIGY9ZmFsc2U7dHJ5e28udGhlbihmdW5jdGlvbih2KXtiKHAsdix0cnVlKTtmPXRydWV9LGZ1bmN0aW9uKHYpe2IocCx2LGZhbHNlKTtmPXRydWV9KX1jYXRjaChlKXtpZighZil7YihwLGUsZmFsc2UpfWVsc2V7cS5zYXAubG9nLmRlYnVnKCJQcm9taXNlOiBFcnJvciBpbiB0aGVuOiAiK2UpfX19ZWxzZXtiKHAsbyx0cnVlKX1yZXR1cm4gcH07ZnVuY3Rpb24gZChBLHAscil7cmV0dXJuIGZ1bmN0aW9uKG8pe2lmKCFBKXtiKHAsbyxyKX1lbHNle3RyeXtjKHAsQShvKSl9Y2F0Y2goZSl7YihwLGUsZmFsc2UpfX19fTtpZighd2luZG93LlByb21pc2Upe3dpbmRvdy5Qcm9taXNlPVB9aWYod2luZG93LnNhcCYmd2luZG93LnNhcC5fX3VpNVB1Ymxpc2hQcm9taXNlUG9seWZpbGwpe3dpbmRvdy5fVUk1UHJvbWlzZT1QfX0pKGpRdWVyeSk7DQovKg0KKiBqUXVlcnkgTW9iaWxlIHYxLjMuMQ0KKiBodHRwOi8vanF1ZXJ5bW9iaWxlLmNvbQ0KKg0KKiBDb3B5cmlnaHQgMjAxMCwgMjAxMyBqUXVlcnkgRm91bmRhdGlvbiwgSW5jLiBhbmQgb3RoZXIgY29udHJpYnV0b3JzDQoqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS4NCiogaHR0cDovL2pxdWVyeS5vcmcvbGljZW5zZQ0KKg0KKi8NCihmdW5jdGlvbihyLGQsZil7aWYodHlwZW9mIGRlZmluZT09PSJmdW5jdGlvbiImJmRlZmluZS5hbWQpe2RlZmluZShbImpxdWVyeSJdLGZ1bmN0aW9uKCQpe2YoJCxyLGQpO3JldHVybiAkLm1vYmlsZX0pfWVsc2V7ZihyLmpRdWVyeSxyLGQpfX0odGhpcyxkb2N1bWVudCxmdW5jdGlvbihRLGQsZix1KXsNCi8vIEFib3V0OiBMaWNlbnNlDQovLyBDb3B5cmlnaHQgKGMpIDIwMTAgIkNvd2JveSIgQmVuIEFsbWFuLA0KLy8gRHVhbCBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGFuZCBHUEwgbGljZW5zZXMuDQovLyBodHRwOi8vYmVuYWxtYW4uY29tL2Fib3V0L2xpY2Vuc2UvDQooZnVuY3Rpb24oJCxkLHUpe3ZhciBzPSdoYXNoY2hhbmdlJyxhPWYsYixjPSQuZXZlbnQuc3BlY2lhbCxnPWEuZG9jdW1lbnRNb2RlLGg9J29uJytzIGluIGQmJihnPT09dXx8Zz43KTtmdW5jdGlvbiBpKGUpe2U9ZXx8bG9jYXRpb24uaHJlZjtyZXR1cm4nIycrZS5yZXBsYWNlKC9eW14jXSojPyguKikkLywnJDEnKX07JC5mbltzXT1mdW5jdGlvbihlKXtyZXR1cm4gZT90aGlzLmJpbmQocyxlKTp0aGlzLnRyaWdnZXIocyl9OyQuZm5bc10uZGVsYXk9NTA7Y1tzXT0kLmV4dGVuZChjW3NdLHtzZXR1cDpmdW5jdGlvbigpe2lmKGgpe3JldHVybiBmYWxzZX0kKGIuc3RhcnQpfSx0ZWFyZG93bjpmdW5jdGlvbigpe2lmKGgpe3JldHVybiBmYWxzZX0kKGIuc3RvcCl9fSk7Yj0oZnVuY3Rpb24oKXt2YXIgaj17fSx0LGw9aSgpLGs9ZnVuY3Rpb24odil7cmV0dXJuIHZ9LG09ayxuPWs7ai5zdGFydD1mdW5jdGlvbigpe3R8fHAoKX07ai5zdG9wPWZ1bmN0aW9uKCl7dCYmY2xlYXJUaW1lb3V0KHQpO3Q9dX07ZnVuY3Rpb24gcCgpe3ZhciBlPWkoKSxvPW4obCk7aWYoZSE9PWwpe20obD1lLG8pOyQoZCkudHJpZ2dlcihzKX1lbHNlIGlmKG8hPT1sKXtsb2NhdGlvbi5ocmVmPWxvY2F0aW9uLmhyZWYucmVwbGFjZSgvIy4qLywnJykrb310PXNldFRpbWVvdXQocCwkLmZuW3NdLmRlbGF5KX07ZC5hdHRhY2hFdmVudCYmIWQuYWRkRXZlbnRMaXN0ZW5lciYmIWgmJihmdW5jdGlvbigpe3ZhciBvLHE7ai5zdGFydD1mdW5jdGlvbigpe2lmKCFvKXtxPSQuZm5bc10uc3JjO3E9cSYmcStpKCk7bz0kKCc8aWZyYW1lIHRhYmluZGV4PSItMSIgdGl0bGU9ImVtcHR5Ii8+JykuaGlkZSgpLm9uZSgnbG9hZCcsZnVuY3Rpb24oKXtxfHxtKGkoKSk7cCgpfSkuYXR0cignc3JjJyxxfHwnamF2YXNjcmlwdDowJykuaW5zZXJ0QWZ0ZXIoJ2JvZHknKVswXS5jb250ZW50V2luZG93O2Eub25wcm9wZXJ0eWNoYW5nZT1mdW5jdGlvbigpe3RyeXtpZihldmVudC5wcm9wZXJ0eU5hbWU9PT0ndGl0bGUnKXtvLmRvY3VtZW50LnRpdGxlPWEudGl0bGV9fWNhdGNoKGUpe319fX07ai5zdG9wPWs7bj1mdW5jdGlvbigpe3JldHVybiBpKG8ubG9jYXRpb24uaHJlZil9O209ZnVuY3Rpb24oZSxyKXt2YXIgdj1vLmRvY3VtZW50LHc9JC5mbltzXS5kb21haW47aWYoZSE9PXIpe3YudGl0bGU9YS50aXRsZTt2Lm9wZW4oKTt3JiZ2LndyaXRlKCc8c2NyaXB0PmRvY3VtZW50LmRvbWFpbj0iJyt3KyciPC9zY3JpcHQ+Jyk7di5jbG9zZSgpO28ubG9jYXRpb24uaGFzaD1lfX19KSgpO3JldHVybiBqfSkoKX0pKFEsdGhpcyk7KGZ1bmN0aW9uKCQpeyQubW9iaWxlPXt9O1EubW9iaWxlLm9yaWVudGF0aW9uQ2hhbmdlRW5hYmxlZD10cnVlfShRKSk7KGZ1bmN0aW9uKCQsZCx1KXt2YXIgbj17fTskLm1vYmlsZT0kLmV4dGVuZCgkLm1vYmlsZSx7dmVyc2lvbjoiMS4zLjEiLG5zOiIiLHN1YlBhZ2VVcmxLZXk6InVpLXBhZ2UiLGFjdGl2ZVBhZ2VDbGFzczoidWktcGFnZS1hY3RpdmUiLGFjdGl2ZUJ0bkNsYXNzOiJ1aS1idG4tYWN0aXZlIixmb2N1c0NsYXNzOiJ1aS1mb2N1cyIsYWpheEVuYWJsZWQ6dHJ1ZSxoYXNoTGlzdGVuaW5nRW5hYmxlZDp0cnVlLGxpbmtCaW5kaW5nRW5hYmxlZDp0cnVlLGRlZmF1bHRQYWdlVHJhbnNpdGlvbjoiZmFkZSIsbWF4VHJhbnNpdGlvbldpZHRoOmZhbHNlLG1pblNjcm9sbEJhY2s6MjUwLHRvdWNoT3ZlcmZsb3dFbmFibGVkOmZhbHNlLGRlZmF1bHREaWFsb2dUcmFuc2l0aW9uOiJwb3AiLHBhZ2VMb2FkRXJyb3JNZXNzYWdlOiJFcnJvciBMb2FkaW5nIFBhZ2UiLHBhZ2VMb2FkRXJyb3JNZXNzYWdlVGhlbWU6ImUiLHBob25lZ2FwTmF2aWdhdGlvbkVuYWJsZWQ6ZmFsc2UsYXV0b0luaXRpYWxpemVQYWdlOnRydWUscHVzaFN0YXRlRW5hYmxlZDp0cnVlLGlnbm9yZUNvbnRlbnRFbmFibGVkOmZhbHNlLG9yaWVudGF0aW9uQ2hhbmdlRW5hYmxlZDp0cnVlLGJ1dHRvbk1hcmt1cDp7aG92ZXJEZWxheToyMDB9LHdpbmRvdzokKGQpLGRvY3VtZW50OiQoZiksa2V5Q29kZTp7QUxUOjE4LEJBQ0tTUEFDRTo4LENBUFNfTE9DSzoyMCxDT01NQToxODgsQ09NTUFORDo5MSxDT01NQU5EX0xFRlQ6OTEsQ09NTUFORF9SSUdIVDo5MyxDT05UUk9MOjE3LERFTEVURTo0NixET1dOOjQwLEVORDozNSxFTlRFUjoxMyxFU0NBUEU6MjcsSE9NRTozNixJTlNFUlQ6NDUsTEVGVDozNyxNRU5VOjkzLE5VTVBBRF9BREQ6MTA3LE5VTVBBRF9ERUNJTUFMOjExMCxOVU1QQURfRElWSURFOjExMSxOVU1QQURfRU5URVI6MTA4LE5VTVBBRF9NVUxUSVBMWToxMDYsTlVNUEFEX1NVQlRSQUNUOjEwOSxQQUdFX0RPV046MzQsUEFHRV9VUDozMyxQRVJJT0Q6MTkwLFJJR0hUOjM5LFNISUZUOjE2LFNQQUNFOjMyLFRBQjo5LFVQOjM4LFdJTkRPV1M6OTF9LGJlaGF2aW9yczp7fSxzaWxlbnRTY3JvbGw6ZnVuY3Rpb24oeSl7aWYoJC50eXBlKHkpIT09Im51bWJlciIpe3k9JC5tb2JpbGUuZGVmYXVsdEhvbWVTY3JvbGx9JC5ldmVudC5zcGVjaWFsLnNjcm9sbHN0YXJ0LmVuYWJsZWQ9ZmFsc2U7c2V0VGltZW91dChmdW5jdGlvbigpe2Quc2Nyb2xsVG8oMCx5KTskLm1vYmlsZS5kb2N1bWVudC50cmlnZ2VyKCJzaWxlbnRzY3JvbGwiLHt4OjAseTp5fSl9LDIwKTtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7JC5ldmVudC5zcGVjaWFsLnNjcm9sbHN0YXJ0LmVuYWJsZWQ9dHJ1ZX0sMTUwKX0sbnNOb3JtYWxpemVEaWN0Om4sbnNOb3JtYWxpemU6ZnVuY3Rpb24ocCl7aWYoIXApe3JldHVybn1yZXR1cm4gbltwXXx8KG5bcF09JC5jYW1lbENhc2UoJC5tb2JpbGUubnMrcCkpfSxnZXRJbmhlcml0ZWRUaGVtZTpmdW5jdGlvbihhLGIpe3ZhciBlPWFbMF0sbD0iIixyPS91aS0oYmFyfGJvZHl8b3ZlcmxheSktKFthLXpdKVxiLyxjLG07d2hpbGUoZSl7Yz1lLmNsYXNzTmFtZXx8IiI7aWYoYyYmKG09ci5leGVjKGMpKSYmKGw9bVsyXSkpe2JyZWFrfWU9ZS5wYXJlbnROb2RlfXJldHVybiBsfHxifHwiYSJ9LGNsb3Nlc3RQYWdlRGF0YTpmdW5jdGlvbihhKXtyZXR1cm4gYS5jbG9zZXN0KCc6anFtRGF0YShyb2xlPSJwYWdlIiksIDpqcW1EYXRhKHJvbGU9ImRpYWxvZyIpJykuZGF0YSgibW9iaWxlLXBhZ2UiKX0sZW5oYW5jZWFibGU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuaGF2ZVBhcmVudHMoYSwiZW5oYW5jZSIpfSxoaWphY2thYmxlOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmhhdmVQYXJlbnRzKGEsImFqYXgiKX0saGF2ZVBhcmVudHM6ZnVuY3Rpb24oYSxiKXtpZighJC5tb2JpbGUuaWdub3JlQ29udGVudEVuYWJsZWQpe3JldHVybiBhfXZhciBnPWEubGVuZ3RoLGg9JCgpLGUsayxsO2Zvcih2YXIgaT0wO2k8ZztpKyspe2s9YS5lcShpKTtsPWZhbHNlO2U9YVtpXTt3aGlsZShlKXt2YXIgYz1lLmdldEF0dHJpYnV0ZT9lLmdldEF0dHJpYnV0ZSgiZGF0YS0iKyQubW9iaWxlLm5zK2IpOiIiO2lmKGM9PT0iZmFsc2UiKXtsPXRydWU7YnJlYWt9ZT1lLnBhcmVudE5vZGV9aWYoIWwpe2g9aC5hZGQoayl9fXJldHVybiBofSxnZXRTY3JlZW5IZWlnaHQ6ZnVuY3Rpb24oKXtyZXR1cm4gZC5pbm5lckhlaWdodHx8JC5tb2JpbGUud2luZG93LmhlaWdodCgpfX0sJC5tb2JpbGUpOyQuZm4uanFtRGF0YT1mdW5jdGlvbihwLHYpe3ZhciByO2lmKHR5cGVvZiBwIT09InVuZGVmaW5lZCIpe2lmKHApe3A9JC5tb2JpbGUubnNOb3JtYWxpemUocCl9aWYoYXJndW1lbnRzLmxlbmd0aDwyfHx2PT09dSl7cj10aGlzLmRhdGEocCl9ZWxzZXtyPXRoaXMuZGF0YShwLHYpfX1yZXR1cm4gcn07JC5qcW1EYXRhPWZ1bmN0aW9uKGUscCx2KXt2YXIgcjtpZih0eXBlb2YgcCE9PSJ1bmRlZmluZWQiKXtyPSQuZGF0YShlLHA/JC5tb2JpbGUubnNOb3JtYWxpemUocCk6cCx2KX1yZXR1cm4gcn07JC5mbi5qcW1SZW1vdmVEYXRhPWZ1bmN0aW9uKHApe3JldHVybiB0aGlzLnJlbW92ZURhdGEoJC5tb2JpbGUubnNOb3JtYWxpemUocCkpfTskLmpxbVJlbW92ZURhdGE9ZnVuY3Rpb24oZSxwKXtyZXR1cm4gJC5yZW1vdmVEYXRhKGUsJC5tb2JpbGUubnNOb3JtYWxpemUocCkpfTskLmZuLnJlbW92ZVdpdGhEZXBlbmRlbnRzPWZ1bmN0aW9uKCl7JC5yZW1vdmVXaXRoRGVwZW5kZW50cyh0aGlzKX07JC5yZW1vdmVXaXRoRGVwZW5kZW50cz1mdW5jdGlvbihlKXt2YXIgYT0kKGUpOyhhLmpxbURhdGEoJ2RlcGVuZGVudHMnKXx8JCgpKS5yZW1vdmUoKTthLnJlbW92ZSgpfTskLmZuLmFkZERlcGVuZGVudHM9ZnVuY3Rpb24oYSl7JC5hZGREZXBlbmRlbnRzKCQodGhpcyksYSl9OyQuYWRkRGVwZW5kZW50cz1mdW5jdGlvbihlLGEpe3ZhciBiPSQoZSkuanFtRGF0YSgnZGVwZW5kZW50cycpfHwkKCk7JChlKS5qcW1EYXRhKCdkZXBlbmRlbnRzJywkLm1lcmdlKGIsYSkpfTskLmZuLmdldEVuY29kZWRUZXh0PWZ1bmN0aW9uKCl7cmV0dXJuICQoIjxkaXYvPiIpLnRleHQoJCh0aGlzKS50ZXh0KCkpLmh0bWwoKX07JC5mbi5qcW1FbmhhbmNlYWJsZT1mdW5jdGlvbigpe3JldHVybiAkLm1vYmlsZS5lbmhhbmNlYWJsZSh0aGlzKX07JC5mbi5qcW1IaWphY2thYmxlPWZ1bmN0aW9uKCl7cmV0dXJuICQubW9iaWxlLmhpamFja2FibGUodGhpcyl9O3ZhciBvPSQuZmluZCxqPS86anFtRGF0YVwoKFteKV0qKVwpL2c7JC5maW5kPWZ1bmN0aW9uKHMsYyxyLGUpe3M9cy5yZXBsYWNlKGosIltkYXRhLSIrKCQubW9iaWxlLm5zfHwiIikrIiQxXSIpO3JldHVybiBvLmNhbGwodGhpcyxzLGMscixlKX07JC5leHRlbmQoJC5maW5kLG8pOyQuZmluZC5tYXRjaGVzPWZ1bmN0aW9uKGUscyl7cmV0dXJuICQuZmluZChlLG51bGwsbnVsbCxzKX07JC5maW5kLm1hdGNoZXNTZWxlY3Rvcj1mdW5jdGlvbihhLGUpe3JldHVybiAkLmZpbmQoZSxudWxsLG51bGwsW2FdKS5sZW5ndGg+MH19KShRLHRoaXMpOyhmdW5jdGlvbigkLHUpew0KLyohIG1hdGNoTWVkaWEoKSBwb2x5ZmlsbCAtIFRlc3QgYSBDU1MgbWVkaWEgdHlwZS9xdWVyeSBpbiBKUy4gQXV0aG9ycyAmIGNvcHlyaWdodCAoYykgMjAxMjogU2NvdHQgSmVobCwgUGF1bCBJcmlzaCwgTmljaG9sYXMgWmFrYXMuIER1YWwgTUlUL0JTRCBsaWNlbnNlICovDQpkLm1hdGNoTWVkaWE9ZC5tYXRjaE1lZGlhfHwoZnVuY3Rpb24oYSx1KXt2YXIgYixjPWEuZG9jdW1lbnRFbGVtZW50LHI9Yy5maXJzdEVsZW1lbnRDaGlsZHx8Yy5maXJzdENoaWxkLGU9YS5jcmVhdGVFbGVtZW50KCJib2R5IiksZz1hLmNyZWF0ZUVsZW1lbnQoImRpdiIpO2cuaWQ9Im1xLXRlc3QtMSI7Zy5zdHlsZS5jc3NUZXh0PSJwb3NpdGlvbjphYnNvbHV0ZTt0b3A6LTEwMGVtIjtlLnN0eWxlLmJhY2tncm91bmQ9Im5vbmUiO2UuYXBwZW5kQ2hpbGQoZyk7cmV0dXJuIGZ1bmN0aW9uKHEpe2cuaW5uZXJIVE1MPSImc2h5OzxzdHlsZSBtZWRpYT1cIiIrcSsiXCI+ICNtcS10ZXN0LTEgeyB3aWR0aDogNDJweDsgfTwvc3R5bGU+IjtjLmluc2VydEJlZm9yZShlLHIpO2I9Zy5vZmZzZXRXaWR0aD09PTQyO2MucmVtb3ZlQ2hpbGQoZSk7cmV0dXJue21hdGNoZXM6YixtZWRpYTpxfX19KGYpKTskLm1vYmlsZS5tZWRpYT1mdW5jdGlvbihxKXtyZXR1cm4gZC5tYXRjaE1lZGlhKHEpLm1hdGNoZXN9fSkoUSk7KGZ1bmN0aW9uKCQsdSl7dmFyIHM9e3RvdWNoOiJvbnRvdWNoZW5kImluIGZ9OyQubW9iaWxlLnN1cHBvcnQ9JC5tb2JpbGUuc3VwcG9ydHx8e307JC5leHRlbmQoJC5zdXBwb3J0LHMpOyQuZXh0ZW5kKCQubW9iaWxlLnN1cHBvcnQscyl9KFEpKTsoZnVuY3Rpb24oJCx1KXskLmV4dGVuZCgkLnN1cHBvcnQse29yaWVudGF0aW9uOiJvcmllbnRhdGlvbiJpbiBkJiYib25vcmllbnRhdGlvbmNoYW5nZSJpbiBkfSl9KFEpKTsoZnVuY3Rpb24oJCx1KXtmdW5jdGlvbiBwKGEpe3ZhciBpPWEuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrYS5zdWJzdHIoMSksdD0oYSsiICIrZS5qb2luKGkrIiAiKStpKS5zcGxpdCgiICIpO2Zvcih2YXIgdiBpbiB0KXtpZihjW3Rbdl1dIT09dSl7cmV0dXJuIHRydWV9fX12YXIgYj0kKCI8Ym9keT4iKS5wcmVwZW5kVG8oImh0bWwiKSxjPWJbMF0uc3R5bGUsZT1bIldlYmtpdCIsIk1veiIsIk8iXSxnPSJwYWxtR2V0UmVzb3VyY2UiaW4gZCxvPWQub3BlcmEsaD1kLm9wZXJhbWluaSYmKHt9KS50b1N0cmluZy5jYWxsKGQub3BlcmFtaW5pKT09PSJbb2JqZWN0IE9wZXJhTWluaV0iLGo9ZC5ibGFja2JlcnJ5JiYhcCgiLXdlYmtpdC10cmFuc2Zvcm0iKTtmdW5jdGlvbiBrKGEsdix0KXt2YXIgdz1mLmNyZWF0ZUVsZW1lbnQoJ2RpdicpLHg9ZnVuY3Rpb24oQyl7cmV0dXJuIEMuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrQy5zdWJzdHIoMSl9LHk9ZnVuY3Rpb24oQyl7aWYoQz09PSIiKXtyZXR1cm4iIn1lbHNle3JldHVybiItIitDLmNoYXJBdCgwKS50b0xvd2VyQ2FzZSgpK0Muc3Vic3RyKDEpKyItIn19LHo9ZnVuY3Rpb24oQyl7dmFyIEQ9eShDKSthKyI6ICIrdisiOyIsRT14KEMpLEY9RSsoRT09PSIiP2E6eChhKSk7dy5zZXRBdHRyaWJ1dGUoInN0eWxlIixEKTtpZighIXcuc3R5bGVbRl0pe0I9dHJ1ZX19LEE9dD90OmUsQjtmb3IodmFyIGk9MDtpPEEubGVuZ3RoO2krKyl7eihBW2ldKX1yZXR1cm4hIUJ9ZnVuY3Rpb24gbCgpe3ZhciBhPSJ0cmFuc2Zvcm0tM2QiLGk9JC5tb2JpbGUubWVkaWEoIigtIitlLmpvaW4oIi0iK2ErIiksKC0iKSsiLSIrYSsiKSwoIithKyIpIik7aWYoaSl7cmV0dXJuISFpfXZhciB2PWYuY3JlYXRlRWxlbWVudCgiZGl2Iiksdz17J01velRyYW5zZm9ybSc6Jy1tb3otdHJhbnNmb3JtJywndHJhbnNmb3JtJzondHJhbnNmb3JtJ307Yi5hcHBlbmQodik7Zm9yKHZhciB0IGluIHcpe2lmKHYuc3R5bGVbdF0hPT11KXt2LnN0eWxlW3RdPSd0cmFuc2xhdGUzZCggMTAwcHgsIDFweCwgMXB4ICknO2k9ZC5nZXRDb21wdXRlZFN0eWxlKHYpLmdldFByb3BlcnR5VmFsdWUod1t0XSl9fXJldHVybighIWkmJmkhPT0ibm9uZSIpfWZ1bmN0aW9uIG0oKXt2YXIgYT1sb2NhdGlvbi5wcm90b2NvbCsiLy8iK2xvY2F0aW9uLmhvc3QrbG9jYXRpb24ucGF0aG5hbWUrInVpLWRpci8iLGk9JCgiaGVhZCBiYXNlIiksdD1udWxsLHY9IiIsdyx4O2lmKCFpLmxlbmd0aCl7aT10PSQoIjxiYXNlPiIseyJocmVmIjphfSkuYXBwZW5kVG8oImhlYWQiKX1lbHNle3Y9aS5hdHRyKCJocmVmIil9dz0kKCI8YSBocmVmPSd0ZXN0dXJsJyAvPiIpLnByZXBlbmRUbyhiKTt4PXdbMF0uaHJlZjtpWzBdLmhyZWY9dnx8bG9jYXRpb24ucGF0aG5hbWU7aWYodCl7dC5yZW1vdmUoKX1yZXR1cm4geC5pbmRleE9mKGEpPT09MH1mdW5jdGlvbiBuKCl7dmFyIGE9Zi5jcmVhdGVFbGVtZW50KCd4JyksaT1mLmRvY3VtZW50RWxlbWVudCx0PWQuZ2V0Q29tcHV0ZWRTdHlsZSx2O2lmKCEoJ3BvaW50ZXJFdmVudHMnaW4gYS5zdHlsZSkpe3JldHVybiBmYWxzZX1hLnN0eWxlLnBvaW50ZXJFdmVudHM9J2F1dG8nO2Euc3R5bGUucG9pbnRlckV2ZW50cz0neCc7aS5hcHBlbmRDaGlsZChhKTt2PXQmJnQoYSwnJykucG9pbnRlckV2ZW50cz09PSdhdXRvJztpLnJlbW92ZUNoaWxkKGEpO3JldHVybiEhdn1mdW5jdGlvbiBxKCl7dmFyIGE9Zi5jcmVhdGVFbGVtZW50KCJkaXYiKTtyZXR1cm4gdHlwZW9mIGEuZ2V0Qm91bmRpbmdDbGllbnRSZWN0IT09InVuZGVmaW5lZCJ9JC5leHRlbmQoJC5tb2JpbGUse2Jyb3dzZXI6e319KTskLm1vYmlsZS5icm93c2VyLm9sZElFPShmdW5jdGlvbigpe3ZhciB2PTMsaT1mLmNyZWF0ZUVsZW1lbnQoImRpdiIpLGE9aS5hbGx8fFtdO2Rve2kuaW5uZXJIVE1MPSI8IS0tW2lmIGd0IElFICIrKCsrdikrIl0+PGJyPjwhW2VuZGlmXS0tPiJ9d2hpbGUoYVswXSk7cmV0dXJuIHY+ND92OiF2fSkoKTtmdW5jdGlvbiByKCl7dmFyIHc9ZCxhPW5hdmlnYXRvci51c2VyQWdlbnQsaT1uYXZpZ2F0b3IucGxhdGZvcm0sdD1hLm1hdGNoKC9BcHBsZVdlYktpdFwvKFswLTldKykvKSx2PSEhdCYmdFsxXSx4PWEubWF0Y2goL0Zlbm5lY1wvKFswLTldKykvKSx5PSEheCYmeFsxXSx6PWEubWF0Y2goL09wZXJhIE1vYmlcLyhbMC05XSspLyksQT0hIXomJnpbMV07aWYoKChpLmluZGV4T2YoImlQaG9uZSIpPi0xfHxpLmluZGV4T2YoImlQYWQiKT4tMXx8aS5pbmRleE9mKCJpUG9kIik+LTEpJiZ2JiZ2PDUzNCl8fCh3Lm9wZXJhbWluaSYmKHt9KS50b1N0cmluZy5jYWxsKHcub3BlcmFtaW5pKT09PSJbb2JqZWN0IE9wZXJhTWluaV0iKXx8KHomJkE8NzQ1OCl8fChhLmluZGV4T2YoIkFuZHJvaWQiKT4tMSYmdiYmdjw1MzMpfHwoeSYmeTw2KXx8KCJwYWxtR2V0UmVzb3VyY2UiaW4gZCYmdiYmdjw1MzQpfHwoYS5pbmRleE9mKCJNZWVHbyIpPi0xJiZhLmluZGV4T2YoIk5va2lhQnJvd3Nlci84LjUuMCIpPi0xKSl7cmV0dXJuIGZhbHNlfXJldHVybiB0cnVlfSQuZXh0ZW5kKCQuc3VwcG9ydCx7Y3NzVHJhbnNpdGlvbnM6IldlYktpdFRyYW5zaXRpb25FdmVudCJpbiBkfHxrKCd0cmFuc2l0aW9uJywnaGVpZ2h0IDEwMG1zIGxpbmVhcicsWyJXZWJraXQiLCJNb3oiLCIiXSkmJiEkLm1vYmlsZS5icm93c2VyLm9sZElFJiYhbyxwdXNoU3RhdGU6InB1c2hTdGF0ZSJpbiBoaXN0b3J5JiYicmVwbGFjZVN0YXRlImluIGhpc3RvcnkmJiEoZC5uYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoIkZpcmVmb3giKT49MCYmZC50b3AhPT1kKSYmKGQubmF2aWdhdG9yLnVzZXJBZ2VudC5zZWFyY2goL0NyaU9TLyk9PT0tMSksbWVkaWFxdWVyeTokLm1vYmlsZS5tZWRpYSgib25seSBhbGwiKSxjc3NQc2V1ZG9FbGVtZW50OiEhcCgiY29udGVudCIpLHRvdWNoT3ZlcmZsb3c6ISFwKCJvdmVyZmxvd1Njcm9sbGluZyIpLGNzc1RyYW5zZm9ybTNkOmwoKSxib3hTaGFkb3c6ISFwKCJib3hTaGFkb3ciKSYmIWosZml4ZWRQb3NpdGlvbjpyKCksc2Nyb2xsVG9wOigicGFnZVhPZmZzZXQiaW4gZHx8InNjcm9sbFRvcCJpbiBmLmRvY3VtZW50RWxlbWVudHx8InNjcm9sbFRvcCJpbiBiWzBdKSYmIWcmJiFoLGR5bmFtaWNCYXNlVGFnOm0oKSxjc3NQb2ludGVyRXZlbnRzOm4oKSxib3VuZGluZ1JlY3Q6cSgpfSk7Yi5yZW1vdmUoKTt2YXIgcz0oZnVuY3Rpb24oKXt2YXIgYT1kLm5hdmlnYXRvci51c2VyQWdlbnQ7cmV0dXJuIGEuaW5kZXhPZigiTm9raWEiKT4tMSYmKGEuaW5kZXhPZigiU3ltYmlhbi8zIik+LTF8fGEuaW5kZXhPZigiU2VyaWVzNjAvNSIpPi0xKSYmYS5pbmRleE9mKCJBcHBsZVdlYktpdCIpPi0xJiZhLm1hdGNoKC8oQnJvd3Nlck5HfE5va2lhQnJvd3NlcilcLzdcLlswLTNdLyl9KSgpOyQubW9iaWxlLmdyYWRlQT1mdW5jdGlvbigpe3JldHVybigkLnN1cHBvcnQubWVkaWFxdWVyeXx8JC5tb2JpbGUuYnJvd3Nlci5vbGRJRSYmJC5tb2JpbGUuYnJvd3Nlci5vbGRJRT49NykmJigkLnN1cHBvcnQuYm91bmRpbmdSZWN0fHwkLmZuLmpxdWVyeS5tYXRjaCgvMVwuWzAtNytdXC5bMC05K10/LykhPT1udWxsKX07JC5tb2JpbGUuYWpheEJsYWNrbGlzdD1kLmJsYWNrYmVycnkmJiFkLldlYktpdFBvaW50fHxofHxzO2lmKHMpeyQoZnVuY3Rpb24oKXskKCJoZWFkIGxpbmtbcmVsPSdzdHlsZXNoZWV0J10iKS5hdHRyKCJyZWwiLCJhbHRlcm5hdGUgc3R5bGVzaGVldCIpLmF0dHIoInJlbCIsInN0eWxlc2hlZXQiKX0pfWlmKCEkLnN1cHBvcnQuYm94U2hhZG93KXskKCJodG1sIikuYWRkQ2xhc3MoInVpLW1vYmlsZS1ub3N1cHBvcnQtYm94c2hhZG93Iil9fSkoUSk7KGZ1bmN0aW9uKCQsdSl7dmFyIGE9JC5tb2JpbGUud2luZG93LHMsaDskLmV2ZW50LnNwZWNpYWwubmF2aWdhdGU9cz17Ym91bmQ6ZmFsc2UscHVzaFN0YXRlRW5hYmxlZDp0cnVlLG9yaWdpbmFsRXZlbnROYW1lOnUsaXNQdXNoU3RhdGVFbmFibGVkOmZ1bmN0aW9uKCl7cmV0dXJuICQuc3VwcG9ydC5wdXNoU3RhdGUmJiQubW9iaWxlLnB1c2hTdGF0ZUVuYWJsZWQ9PT10cnVlJiZ0aGlzLmlzSGFzaENoYW5nZUVuYWJsZWQoKX0saXNIYXNoQ2hhbmdlRW5hYmxlZDpmdW5jdGlvbigpe3JldHVybiAkLm1vYmlsZS5oYXNoTGlzdGVuaW5nRW5hYmxlZD09PXRydWV9LHBvcHN0YXRlOmZ1bmN0aW9uKGUpe3ZhciBuPW5ldyAkLkV2ZW50KCJuYXZpZ2F0ZSIpLGI9bmV3ICQuRXZlbnQoImJlZm9yZW5hdmlnYXRlIiksYz1lLm9yaWdpbmFsRXZlbnQuc3RhdGV8fHt9LGc9bG9jYXRpb24uaHJlZjthLnRyaWdnZXIoYik7aWYoYi5pc0RlZmF1bHRQcmV2ZW50ZWQoKSl7cmV0dXJufWlmKGUuaGlzdG9yeVN0YXRlKXskLmV4dGVuZChjLGUuaGlzdG9yeVN0YXRlKX1uLm9yaWdpbmFsRXZlbnQ9ZTtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7YS50cmlnZ2VyKG4se3N0YXRlOmN9KX0sMCl9LGhhc2hjaGFuZ2U6ZnVuY3Rpb24oZSxiKXt2YXIgbj1uZXcgJC5FdmVudCgibmF2aWdhdGUiKSxjPW5ldyAkLkV2ZW50KCJiZWZvcmVuYXZpZ2F0ZSIpO2EudHJpZ2dlcihjKTtpZihjLmlzRGVmYXVsdFByZXZlbnRlZCgpKXtyZXR1cm59bi5vcmlnaW5hbEV2ZW50PWU7YS50cmlnZ2VyKG4se3N0YXRlOmUuaGFzaGNoYW5nZVN0YXRlfHx7fX0pfSxzZXR1cDpmdW5jdGlvbihiLG4pe2lmKHMuYm91bmQpe3JldHVybn1zLmJvdW5kPXRydWU7aWYocy5pc1B1c2hTdGF0ZUVuYWJsZWQoKSl7cy5vcmlnaW5hbEV2ZW50TmFtZT0icG9wc3RhdGUiO2EuYmluZCgicG9wc3RhdGUubmF2aWdhdGUiLHMucG9wc3RhdGUpfWVsc2UgaWYocy5pc0hhc2hDaGFuZ2VFbmFibGVkKCkpe3Mub3JpZ2luYWxFdmVudE5hbWU9Imhhc2hjaGFuZ2UiO2EuYmluZCgiaGFzaGNoYW5nZS5uYXZpZ2F0ZSIscy5oYXNoY2hhbmdlKX19fX0pKFEpOyhmdW5jdGlvbigkKXskLmV2ZW50LnNwZWNpYWwudGhyb3R0bGVkcmVzaXplPXtzZXR1cDpmdW5jdGlvbigpeyQodGhpcykuYmluZCgicmVzaXplIixoKX0sdGVhcmRvd246ZnVuY3Rpb24oKXskKHRoaXMpLnVuYmluZCgicmVzaXplIixoKX19O3ZhciB0PTI1MCxoPWZ1bmN0aW9uKCl7Yz0obmV3IERhdGUoKSkuZ2V0VGltZSgpO2I9Yy1sO2lmKGI+PXQpe2w9YzskKHRoaXMpLnRyaWdnZXIoInRocm90dGxlZHJlc2l6ZSIpfWVsc2V7aWYoYSl7Y2xlYXJUaW1lb3V0KGEpfWE9c2V0VGltZW91dChoLHQtYil9fSxsPTAsYSxjLGJ9KShRKTsoZnVuY3Rpb24oJCxkKXt2YXIgdz0kKGQpLGU9Im9yaWVudGF0aW9uY2hhbmdlIixzLGcsbCxpLGEscD17IjAiOnRydWUsIjE4MCI6dHJ1ZX07aWYoJC5zdXBwb3J0Lm9yaWVudGF0aW9uKXt2YXIgYj1kLmlubmVyV2lkdGh8fHcud2lkdGgoKSxjPWQuaW5uZXJIZWlnaHR8fHcuaGVpZ2h0KCksaD01MDtpPWI+YyYmKGItYyk+aDthPXBbZC5vcmllbnRhdGlvbl07aWYoKGkmJmEpfHwoIWkmJiFhKSl7cD17Ii05MCI6dHJ1ZSwiOTAiOnRydWV9fX0kLmV2ZW50LnNwZWNpYWwub3JpZW50YXRpb25jaGFuZ2U9JC5leHRlbmQoe30sJC5ldmVudC5zcGVjaWFsLm9yaWVudGF0aW9uY2hhbmdlLHtzZXR1cDpmdW5jdGlvbigpe2lmKCQuc3VwcG9ydC5vcmllbnRhdGlvbiYmISQuZXZlbnQuc3BlY2lhbC5vcmllbnRhdGlvbmNoYW5nZS5kaXNhYmxlZCl7cmV0dXJuIGZhbHNlfWw9ZygpO3cuYmluZCgidGhyb3R0bGVkcmVzaXplIixqKX0sdGVhcmRvd246ZnVuY3Rpb24oKXtpZigkLnN1cHBvcnQub3JpZW50YXRpb24mJiEkLmV2ZW50LnNwZWNpYWwub3JpZW50YXRpb25jaGFuZ2UuZGlzYWJsZWQpe3JldHVybiBmYWxzZX13LnVuYmluZCgidGhyb3R0bGVkcmVzaXplIixqKX0sYWRkOmZ1bmN0aW9uKGspe3ZhciBvPWsuaGFuZGxlcjtrLmhhbmRsZXI9ZnVuY3Rpb24obSl7bS5vcmllbnRhdGlvbj1nKCk7cmV0dXJuIG8uYXBwbHkodGhpcyxhcmd1bWVudHMpfX19KTtmdW5jdGlvbiBqKCl7dmFyIG89ZygpO2lmKG8hPT1sKXtsPW87dy50cmlnZ2VyKGUpfX0kLmV2ZW50LnNwZWNpYWwub3JpZW50YXRpb25jaGFuZ2Uub3JpZW50YXRpb249Zz1mdW5jdGlvbigpe3ZhciBrPXRydWUsbT1mLmRvY3VtZW50RWxlbWVudDtpZigkLnN1cHBvcnQub3JpZW50YXRpb24pe2s9cFtkLm9yaWVudGF0aW9uXX1lbHNle2s9bSYmbS5jbGllbnRXaWR0aC9tLmNsaWVudEhlaWdodDwxLjF9cmV0dXJuIGs/InBvcnRyYWl0IjoibGFuZHNjYXBlIn07JC5mbltlXT1mdW5jdGlvbihrKXtyZXR1cm4gaz90aGlzLmJpbmQoZSxrKTp0aGlzLnRyaWdnZXIoZSl9O2lmKCQuYXR0ckZuKXskLmF0dHJGbltlXT10cnVlfX0oUSx0aGlzKSk7KGZ1bmN0aW9uKCQsZCxmLHUpe3ZhciBhPSJ2aXJ0dWFsTW91c2VCaW5kaW5ncyIsYz0idmlydHVhbFRvdWNoSUQiLHY9InZtb3VzZW92ZXIgdm1vdXNlZG93biB2bW91c2Vtb3ZlIHZtb3VzZXVwIHZjbGljayB2bW91c2VvdXQgdm1vdXNlY2FuY2VsIi5zcGxpdCgiICIpLGc9ImNsaWVudFggY2xpZW50WSBwYWdlWCBwYWdlWSBzY3JlZW5YIHNjcmVlblkiLnNwbGl0KCIgIiksbT0kLmV2ZW50Lm1vdXNlSG9va3M/JC5ldmVudC5tb3VzZUhvb2tzLnByb3BzOltdLGg9JC5ldmVudC5wcm9wcy5jb25jYXQobSksbD17fSxyPTAscz0wLG49MCxwPWZhbHNlLHE9W10sdz1mYWxzZSx6PWZhbHNlLEE9ImFkZEV2ZW50TGlzdGVuZXIiaW4gZixCPSQoZiksQz0xLEQ9MCxFOyQudm1vdXNlPXttb3ZlRGlzdGFuY2VUaHJlc2hvbGQ6MTAsY2xpY2tEaXN0YW5jZVRocmVzaG9sZDoxMCxyZXNldFRpbWVyRHVyYXRpb246MTUwMH07ZnVuY3Rpb24gRihlKXt3aGlsZShlJiZ0eXBlb2YgZS5vcmlnaW5hbEV2ZW50IT09InVuZGVmaW5lZCIpe2U9ZS5vcmlnaW5hbEV2ZW50fXJldHVybiBlfWZ1bmN0aW9uIEcoZSxiKXt2YXIgdD1lLnR5cGUsbyxrLHgseSxfLGExLGksaixiMTtlPSQuRXZlbnQoZSk7ZS50eXBlPWI7bz1lLm9yaWdpbmFsRXZlbnQ7az0kLmV2ZW50LnByb3BzO2lmKHQuc2VhcmNoKC9eKG1vdXNlfGNsaWNrKS8pPi0xKXtrPWh9aWYobyl7Zm9yKGk9ay5sZW5ndGgseTtpOyl7eT1rWy0taV07ZVt5XT1vW3ldfX1pZih0LnNlYXJjaCgvbW91c2UoZG93bnx1cCl8Y2xpY2svKT4tMSYmIWUud2hpY2gpe2Uud2hpY2g9MX1pZih0LnNlYXJjaCgvXnRvdWNoLykhPT0tMSl7eD1GKG8pO3Q9eC50b3VjaGVzO189eC5jaGFuZ2VkVG91Y2hlczthMT0odCYmdC5sZW5ndGgpP3RbMF06KChfJiZfLmxlbmd0aCk/X1swXTp1KTtpZihhMSl7Zm9yKGo9MCxiMT1nLmxlbmd0aDtqPGIxO2orKyl7eT1nW2pdO2VbeV09YTFbeV19fX1yZXR1cm4gZX1mdW5jdGlvbiBIKGUpe3ZhciBqPXt9LGIsazt3aGlsZShlKXtiPSQuZGF0YShlLGEpO2ZvcihrIGluIGIpe2lmKGJba10pe2pba109ai5oYXNWaXJ0dWFsQmluZGluZz10cnVlfX1lPWUucGFyZW50Tm9kZX1yZXR1cm4gan1mdW5jdGlvbiBJKGUsail7dmFyIGI7d2hpbGUoZSl7Yj0kLmRhdGEoZSxhKTtpZihiJiYoIWp8fGJbal0pKXtyZXR1cm4gZX1lPWUucGFyZW50Tm9kZX1yZXR1cm4gbnVsbH1mdW5jdGlvbiBKKCl7ej1mYWxzZX1mdW5jdGlvbiBLKCl7ej10cnVlfWZ1bmN0aW9uIEwoKXtEPTA7cS5sZW5ndGg9MDt3PWZhbHNlO0soKX1mdW5jdGlvbiBNKCl7SigpfWZ1bmN0aW9uIE4oKXtPKCk7cj1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7cj0wO0woKX0sJC52bW91c2UucmVzZXRUaW1lckR1cmF0aW9uKX1mdW5jdGlvbiBPKCl7aWYocil7Y2xlYXJUaW1lb3V0KHIpO3I9MH19ZnVuY3Rpb24gUChlLGIsail7dmFyIGs7aWYoKGomJmpbZV0pfHwoIWomJkkoYi50YXJnZXQsZSkpKXtrPUcoYixlKTskKGIudGFyZ2V0KS50cmlnZ2VyKGspfXJldHVybiBrfWZ1bmN0aW9uIFIoZSl7dmFyIHQ9JC5kYXRhKGUudGFyZ2V0LGMpO2lmKCF3JiYoIUR8fEQhPT10KSl7dmFyIGI9UCgidiIrZS50eXBlLGUpO2lmKGIpe2lmKGIuaXNEZWZhdWx0UHJldmVudGVkKCkpe2UucHJldmVudERlZmF1bHQoKX1pZihiLmlzUHJvcGFnYXRpb25TdG9wcGVkKCkpe2Uuc3RvcFByb3BhZ2F0aW9uKCl9aWYoYi5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCgpKXtlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpfX19fWZ1bmN0aW9uIFMoZSl7dmFyIGI9RihlKS50b3VjaGVzLGosaztpZihiJiZiLmxlbmd0aD09PTEpe2o9ZS50YXJnZXQ7az1IKGopO2lmKGsuaGFzVmlydHVhbEJpbmRpbmcpe0Q9QysrOyQuZGF0YShqLGMsRCk7TygpO00oKTtwPWZhbHNlO3ZhciB0PUYoZSkudG91Y2hlc1swXTtzPXQucGFnZVg7bj10LnBhZ2VZO1AoInZtb3VzZW92ZXIiLGUsayk7UCgidm1vdXNlZG93biIsZSxrKX19fWZ1bmN0aW9uIFQoZSl7aWYoeil7cmV0dXJufWlmKCFwKXtQKCJ2bW91c2VjYW5jZWwiLGUsSChlLnRhcmdldCkpfXA9dHJ1ZTtOKCl9ZnVuY3Rpb24gVShlKXtpZih6KXtyZXR1cm59dmFyIHQ9RihlKS50b3VjaGVzWzBdLGI9cCxqPSQudm1vdXNlLm1vdmVEaXN0YW5jZVRocmVzaG9sZCxrPUgoZS50YXJnZXQpO3A9cHx8KE1hdGguYWJzKHQucGFnZVgtcyk+anx8TWF0aC5hYnModC5wYWdlWS1uKT5qKTtpZihwJiYhYil7UCgidm1vdXNlY2FuY2VsIixlLGspfVAoInZtb3VzZW1vdmUiLGUsayk7TigpfWZ1bmN0aW9uIFYoZSl7aWYoeil7cmV0dXJufUsoKTt2YXIgYj1IKGUudGFyZ2V0KSx0O1AoInZtb3VzZXVwIixlLGIpO2lmKCFwKXt2YXIgaj1QKCJ2Y2xpY2siLGUsYik7aWYoaiYmJC5zdXBwb3J0LnRvdWNoKXt0PUYoZSkuY2hhbmdlZFRvdWNoZXNbMF07cS5wdXNoKHt0b3VjaElEOkQseDp0LmNsaWVudFgseTp0LmNsaWVudFksdGFyZ2V0OmUudGFyZ2V0fSk7dz10cnVlfX1QKCJ2bW91c2VvdXQiLGUsYik7cD1mYWxzZTtOKCl9ZnVuY3Rpb24gVyhlKXt2YXIgYj0kLmRhdGEoZSxhKSxrO2lmKGIpe2ZvcihrIGluIGIpe2lmKGJba10pe3JldHVybiB0cnVlfX19cmV0dXJuIGZhbHNlfWZ1bmN0aW9uIFgoKXt9ZnVuY3Rpb24gWShlKXt2YXIgYj1lLnN1YnN0cigxKTtyZXR1cm57c2V0dXA6ZnVuY3Rpb24oaixrKXtpZighVyh0aGlzKSl7JC5kYXRhKHRoaXMsYSx7fSl9dmFyIG89JC5kYXRhKHRoaXMsYSk7b1tlXT10cnVlO2xbZV09KGxbZV18fDApKzE7aWYobFtlXT09PTEpe0IuYmluZChiLFIpfSQodGhpcykuYmluZChiLFgpO2lmKEEpe2xbInRvdWNoc3RhcnQiXT0obFsidG91Y2hzdGFydCJdfHwwKSsxO2lmKGxbInRvdWNoc3RhcnQiXT09PTEpe0IuYmluZCgidG91Y2hzdGFydCIsUykuYmluZCgidG91Y2hlbmQiLFYpLmJpbmQoInRvdWNobW92ZSIsVSl9fX0sdGVhcmRvd246ZnVuY3Rpb24oaixrKXstLWxbZV07aWYoIWxbZV0pe0IudW5iaW5kKGIsUil9aWYoQSl7LS1sWyJ0b3VjaHN0YXJ0Il07aWYoIWxbInRvdWNoc3RhcnQiXSl7Qi51bmJpbmQoInRvdWNoc3RhcnQiLFMpLnVuYmluZCgidG91Y2htb3ZlIixVKS51bmJpbmQoInRvdWNoZW5kIixWKS51bmJpbmQoInNjcm9sbCIsVCl9fXZhciBvPSQodGhpcyksdD0kLmRhdGEodGhpcyxhKTtpZih0KXt0W2VdPWZhbHNlfW8udW5iaW5kKGIsWCk7aWYoIVcodGhpcykpe28ucmVtb3ZlRGF0YShhKX19fX1mb3IodmFyIGk9MDtpPHYubGVuZ3RoO2krKyl7JC5ldmVudC5zcGVjaWFsW3ZbaV1dPVkodltpXSl9aWYoQSl7ZnVuY3Rpb24gWihlKXt2YXIgYj1xLmxlbmd0aCx0PWUudGFyZ2V0LHgseSxqLGksbyxrO2lmKGIpe3g9ZS5jbGllbnRYO3k9ZS5jbGllbnRZO0U9JC52bW91c2UuY2xpY2tEaXN0YW5jZVRocmVzaG9sZDtqPXQ7d2hpbGUoail7Zm9yKGk9MDtpPGI7aSsrKXtvPXFbaV07az0wO2lmKChqPT09dCYmTWF0aC5hYnMoby54LXgpPEUmJk1hdGguYWJzKG8ueS15KTxFKXx8JC5kYXRhKGosYyk9PT1vLnRvdWNoSUQpe2lmKCFlLmlzU3ludGhldGljKXtlLl9zYXB1aV9kZWxheWVkTW91c2VFdmVudD10cnVlfWlmKHQ9PT1vLnRhcmdldCl7cmV0dXJufWUucHJldmVudERlZmF1bHQoKTtlLnN0b3BQcm9wYWdhdGlvbigpO3JldHVybn19aj1qLnBhcmVudE5vZGV9fX07Zi5hZGRFdmVudExpc3RlbmVyKCJtb3VzZWRvd24iLFosdHJ1ZSk7Zi5hZGRFdmVudExpc3RlbmVyKCJtb3VzZXVwIixaLHRydWUpO2YuYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLFosdHJ1ZSl9fSkoUSxkLGYpOyhmdW5jdGlvbigkLGQsdSl7dmFyIGE9JChmKTskLmVhY2goKCJ0b3VjaHN0YXJ0IHRvdWNobW92ZSB0b3VjaGVuZCAiKyJ0YXAgdGFwaG9sZCAiKyJzd2lwZSBzd2lwZWxlZnQgc3dpcGVyaWdodCAiKyJzY3JvbGxzdGFydCBzY3JvbGxzdG9wIikuc3BsaXQoIiAiKSxmdW5jdGlvbihpLG4peyQuZm5bbl09ZnVuY3Rpb24oaCl7cmV0dXJuIGg/dGhpcy5iaW5kKG4saCk6dGhpcy50cmlnZ2VyKG4pfTtpZigkLmF0dHJGbil7JC5hdHRyRm5bbl09dHJ1ZX19KTt2YXIgcz0kLm1vYmlsZS5zdXBwb3J0LnRvdWNoLGI9InRvdWNobW92ZSBzY3JvbGwiLHQ9cz8idG91Y2hzdGFydCI6Im1vdXNlZG93biIsYz1zPyJ0b3VjaGVuZCB0b3VjaGNhbmNlbCI6Im1vdXNldXAiLGU9cz8idG91Y2htb3ZlIjoibW91c2Vtb3ZlIjtmdW5jdGlvbiBnKG8saCxpKXt2YXIgaj1pLnR5cGU7aS50eXBlPWg7JC5ldmVudC5kaXNwYXRjaC5jYWxsKG8saSk7aS50eXBlPWp9JC5ldmVudC5zcGVjaWFsLnNjcm9sbHN0YXJ0PXtlbmFibGVkOnRydWUsc2V0dXA6ZnVuY3Rpb24oKXt2YXIgaD10aGlzLGk9JChoKSxqLGs7ZnVuY3Rpb24gbChtLG4pe2o9bjtnKGgsaj8ic2Nyb2xsc3RhcnQiOiJzY3JvbGxzdG9wIixtKX1pLmJpbmQoYixmdW5jdGlvbihtKXtpZighJC5ldmVudC5zcGVjaWFsLnNjcm9sbHN0YXJ0LmVuYWJsZWQpe3JldHVybn1pZighail7bChtLHRydWUpfWNsZWFyVGltZW91dChrKTtrPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtsKG0sZmFsc2UpfSw1MCl9KX19OyQuZXZlbnQuc3BlY2lhbC50YXA9e3RhcGhvbGRUaHJlc2hvbGQ6NzUwLHNldHVwOmZ1bmN0aW9uKCl7dmFyIGg9dGhpcyxpPSQoaCk7aS5iaW5kKCJ2bW91c2Vkb3duIixmdW5jdGlvbihqKXtpZihqLndoaWNoJiZqLndoaWNoIT09MSl7cmV0dXJuIGZhbHNlfXZhciBvPWoudGFyZ2V0LGs9ai5vcmlnaW5hbEV2ZW50LGw7ZnVuY3Rpb24gbSgpe2NsZWFyVGltZW91dChsKX1mdW5jdGlvbiBuKCl7bSgpO2kudW5iaW5kKCJ2Y2xpY2siLHApLnVuYmluZCgidm1vdXNldXAiLG0pO2EudW5iaW5kKCJ2bW91c2VjYW5jZWwiLG4pfWZ1bmN0aW9uIHAoail7bigpO2lmKG89PT1qLnRhcmdldCl7ZyhoLCJ0YXAiLGopfX1pLmJpbmQoInZtb3VzZXVwIixtKS5iaW5kKCJ2Y2xpY2siLHApO2EuYmluZCgidm1vdXNlY2FuY2VsIixuKTtsPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtnKGgsInRhcGhvbGQiLCQuRXZlbnQoInRhcGhvbGQiLHt0YXJnZXQ6b30pKX0sJC5ldmVudC5zcGVjaWFsLnRhcC50YXBob2xkVGhyZXNob2xkKX0pfX07JC5ldmVudC5zcGVjaWFsLnN3aXBlPXtzY3JvbGxTdXByZXNzaW9uVGhyZXNob2xkOjMwLGR1cmF0aW9uVGhyZXNob2xkOjEwMDAsaG9yaXpvbnRhbERpc3RhbmNlVGhyZXNob2xkOjMwLHZlcnRpY2FsRGlzdGFuY2VUaHJlc2hvbGQ6NzUsc3RhcnQ6ZnVuY3Rpb24oaCl7dmFyIGk9aC5vcmlnaW5hbEV2ZW50LnRvdWNoZXM/aC5vcmlnaW5hbEV2ZW50LnRvdWNoZXNbMF06aDtyZXR1cm57dGltZToobmV3IERhdGUoKSkuZ2V0VGltZSgpLGNvb3JkczpbaS5wYWdlWCxpLnBhZ2VZXSxvcmlnaW46JChoLnRhcmdldCl9fSxzdG9wOmZ1bmN0aW9uKGgpe3ZhciBpPWgub3JpZ2luYWxFdmVudC50b3VjaGVzP2gub3JpZ2luYWxFdmVudC50b3VjaGVzWzBdOmg7cmV0dXJue3RpbWU6KG5ldyBEYXRlKCkpLmdldFRpbWUoKSxjb29yZHM6W2kucGFnZVgsaS5wYWdlWV19fSxoYW5kbGVTd2lwZTpmdW5jdGlvbihoLGkpe2lmKGkudGltZS1oLnRpbWU8JC5ldmVudC5zcGVjaWFsLnN3aXBlLmR1cmF0aW9uVGhyZXNob2xkJiZNYXRoLmFicyhoLmNvb3Jkc1swXS1pLmNvb3Jkc1swXSk+JC5ldmVudC5zcGVjaWFsLnN3aXBlLmhvcml6b250YWxEaXN0YW5jZVRocmVzaG9sZCYmTWF0aC5hYnMoaC5jb29yZHNbMV0taS5jb29yZHNbMV0pPCQuZXZlbnQuc3BlY2lhbC5zd2lwZS52ZXJ0aWNhbERpc3RhbmNlVGhyZXNob2xkKXtoLm9yaWdpbi50cmlnZ2VyKCJzd2lwZSIpLnRyaWdnZXIoaC5jb29yZHNbMF0+aS5jb29yZHNbMF0/InN3aXBlbGVmdCI6InN3aXBlcmlnaHQiKX19LHNldHVwOmZ1bmN0aW9uKCl7dmFyIGg9dGhpcyxpPSQoaCk7aS5iaW5kKHQsZnVuY3Rpb24oail7aWYoai5pc01hcmtlZCgic3dpcGVzdGFydEhhbmRsZWQiKSl7cmV0dXJufWouc2V0TWFya2VkKCJzd2lwZXN0YXJ0SGFuZGxlZCIpO3ZhciBrPSQuZXZlbnQuc3BlY2lhbC5zd2lwZS5zdGFydChqKSxsO2Z1bmN0aW9uIG0oail7aWYoIWspe3JldHVybn1sPSQuZXZlbnQuc3BlY2lhbC5zd2lwZS5zdG9wKGopO2lmKCFzYXAudWkuRGV2aWNlLnN5c3RlbS5kZXNrdG9wfHxzYXAudWkuRGV2aWNlLmJyb3dzZXIubmFtZSE9PSJjciIpe2lmKE1hdGguYWJzKGsuY29vcmRzWzBdLWwuY29vcmRzWzBdKT4kLmV2ZW50LnNwZWNpYWwuc3dpcGUuc2Nyb2xsU3VwcmVzc2lvblRocmVzaG9sZCl7ai5wcmV2ZW50RGVmYXVsdCgpfX19ZnVuY3Rpb24gbihqKXtpLnVuYmluZChlLG0pLnVuYmluZChjLG4pO2lmKGsmJmwpeyQuZXZlbnQuc3BlY2lhbC5zd2lwZS5oYW5kbGVTd2lwZShrLGwpfWs9bD11fWkuYmluZChlLG0pLmJpbmQoYyxuKX0pfX07JC5lYWNoKHtzY3JvbGxzdG9wOiJzY3JvbGxzdGFydCIsdGFwaG9sZDoidGFwIixzd2lwZWxlZnQ6InN3aXBlIixzd2lwZXJpZ2h0OiJzd2lwZSJ9LGZ1bmN0aW9uKGgsaSl7JC5ldmVudC5zcGVjaWFsW2hdPXtzZXR1cDpmdW5jdGlvbigpeyQodGhpcykuYmluZChpLCQubm9vcCl9fX0pfSkoUSx0aGlzKX0pKTsNCi8qIQ0KICogU0FQIFVJIGRldmVsb3BtZW50IHRvb2xraXQgZm9yIEhUTUw1IChTQVBVSTUvT3BlblVJNSkNCiAqIChjKSBDb3B5cmlnaHQgMjAwOS0yMDE0IFNBUCBTRSBvciBhbiBTQVAgYWZmaWxpYXRlIGNvbXBhbnkuIA0KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAtIHNlZSBMSUNFTlNFLnR4dC4NCiAqLw0KKGZ1bmN0aW9uKCl7aWYoIXdpbmRvdy5qUXVlcnkpe3Rocm93IG5ldyBFcnJvcigiU0FQVUk1IHJlcXVpcmVzIGpRdWVyeSBhcyBhIHByZXJlcXVpc2l0ZSAoPj0gdmVyc2lvbiAxLjcpIil9aWYoalF1ZXJ5LnNhcCl7cmV0dXJufXZhciBfPXdpbmRvdzt2YXIgYT1bXTtmdW5jdGlvbiBiKGwsbSl7YS5wdXNoKHtsZXZlbDpsLG1lc3NhZ2U6bX0pfXZhciBjPXVuZGVmaW5lZDt2YXIgcj0vXlswLTldKyg/OlwuKFswLTldKykoPzpcLihbMC05XSspKT8pPyguKikkLztmdW5jdGlvbiBWKE0saSxkLHMpe2lmKE0gaW5zdGFuY2VvZiBWKXtyZXR1cm4gTX1pZighKHRoaXMgaW5zdGFuY2VvZiBWKSl7cmV0dXJuIG5ldyBWKE0saSxkLHMpfXZhciBtPSh0eXBlb2YgTT09PSJzdHJpbmciP3IuZXhlYyhNKTooalF1ZXJ5LmlzQXJyYXkoTSk/TTphcmd1bWVudHMpKXx8W107ZnVuY3Rpb24gbih2KXt2PXBhcnNlSW50KHYsMTApO3JldHVybiBpc05hTih2KT8wOnZ9TT1uKG1bMF0pO2k9bihtWzFdKTtkPW4obVsyXSk7cz1TdHJpbmcobVszXXx8IiIpO3RoaXMudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gTSsiLiIraSsiLiIrZCtzfTt0aGlzLmdldE1ham9yPWZ1bmN0aW9uKCl7cmV0dXJuIE19O3RoaXMuZ2V0TWlub3I9ZnVuY3Rpb24oKXtyZXR1cm4gaX07dGhpcy5nZXRQYXRjaD1mdW5jdGlvbigpe3JldHVybiBkfTt0aGlzLmdldFN1ZmZpeD1mdW5jdGlvbigpe3JldHVybiBzfTt0aGlzLmNvbXBhcmVUbz1mdW5jdGlvbigpe3ZhciBvPVYuYXBwbHkod2luZG93LGFyZ3VtZW50cyk7cmV0dXJuIE0tby5nZXRNYWpvcigpfHxpLW8uZ2V0TWlub3IoKXx8ZC1vLmdldFBhdGNoKCl8fCgoczxvLmdldFN1ZmZpeCgpKT8tMToocz09PW8uZ2V0U3VmZml4KCkpPzA6MSl9fVYucHJvdG90eXBlLmluUmFuZ2U9ZnVuY3Rpb24obSxNKXtyZXR1cm4gdGhpcy5jb21wYXJlVG8obSk+PTAmJnRoaXMuY29tcGFyZVRvKE0pPDB9O3ZhciBqPVYoalF1ZXJ5LmZuLmpxdWVyeSk7aWYoIWouaW5SYW5nZSgiMS43LjAiLCIyLjAuMCIpKXtiKCJlcnJvciIsIlNBUFVJNSByZXF1aXJlcyBhIGpRdWVyeSB2ZXJzaW9uIG9mIDEuNyBvciBoaWdoZXIsIGJ1dCBsb3dlciB0aGFuIDIuMDsgY3VycmVudCB2ZXJzaW9uIGlzICIralF1ZXJ5LmZuLmpxdWVyeSl9aWYoIWpRdWVyeS5icm93c2VyKXtqUXVlcnkuYnJvd3Nlcj0oZnVuY3Rpb24odSl7dmFyIGQ9Lyh3ZWJraXQpWyBcL10oW1x3Ll0rKS8saT0vKG9wZXJhKSg/Oi4qdmVyc2lvbik/WyBcL10oW1x3Ll0rKS8sbD0vKG1zaWUpIChbXHcuXSspLyxtPS8obW96aWxsYSkoPzouKj8gcnY6KFtcdy5dKykpPy8sdT11LnRvTG93ZXJDYXNlKCksbj1kLmV4ZWModSl8fGkuZXhlYyh1KXx8bC5leGVjKHUpfHx1LmluZGV4T2YoImNvbXBhdGlibGUiKTwwJiZtLmV4ZWModSl8fFtdLG89e307aWYoblsxXSl7b1tuWzFdXT10cnVlO28udmVyc2lvbj1uWzJdfHwiMCI7aWYoby53ZWJraXQpe28uc2FmYXJpPXRydWV9fXJldHVybiBvfSh3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudCkpfWlmKCEhc2FwLnVpLkRldmljZS5icm93c2VyLmludGVybmV0X2V4cGxvcmVyKXtqUXVlcnkuc3VwcG9ydC5jb3JzPXRydWV9dmFyIGY9KGZ1bmN0aW9uKCl7dmFyIHQsdSxSLGQ9L14oLipcLyk/ZG93bmxvYWRcL2NvbmZpZ3VyYXRvcltcL1w/XS8saT0vXiguKlwvKT8oc2FwLXVpLShjb3JlfGN1c3RvbXxib290fG1lcmdlZCkoLS4qKT8pXC5qcyhbPyNdfCQpLyxsPS9eKC4qXC8pP3Jlc291cmNlc1wvLztqUXVlcnkoInNjcmlwdFtzcmNdIikuZWFjaChmdW5jdGlvbigpe3ZhciBzPXRoaXMuZ2V0QXR0cmlidXRlKCJzcmMiKSxtO2lmKG09cy5tYXRjaChkKSl7dD10aGlzO3U9cztSPShtWzFdfHwiIikrInJlc291cmNlcy8iO3JldHVybiBmYWxzZX1lbHNlIGlmKG09cy5tYXRjaChpKSl7dD10aGlzO3U9cztSPW1bMV18fCIiO3JldHVybiBmYWxzZX1lbHNlIGlmKHRoaXMuaWQ9PSdzYXAtdWktYm9vdHN0cmFwJyYmKG09cy5tYXRjaChsKSkpe3Q9dGhpczt1PXM7Uj1tWzBdO3JldHVybiBmYWxzZX19KTtyZXR1cm57dGFnOnQsdXJsOnUscmVzb3VyY2VSb290OlJ9fSkoKTsoZnVuY3Rpb24oKXtpZigvc2FwLWJvb3RzdHJhcC1kZWJ1Zz0odHJ1ZXx4fFgpLy50ZXN0KGxvY2F0aW9uLnNlYXJjaCkpe3dpbmRvd1sic2FwLXVpLWJSZXN0YXJ0Il09ZmFsc2U7d2luZG93WyJzYXAtdWktc1Jlc3RhcnRVcmwiXT0iaHR0cDovL2xvY2FsaG9zdDo4MDgwL3NhcHVpNS9yZXNvdXJjZXMvc2FwLXVpLWNvcmUuanMiO3ZhciBkPWZ1bmN0aW9uKCl7dmFyIHM9Zi50YWcsbD0iPHNjcmlwdCBzcmM9XCIiK3dpbmRvd1sic2FwLXVpLXNSZXN0YXJ0VXJsIl0rIlwiIjtqUXVlcnkuZWFjaChzLmF0dHJpYnV0ZXMsZnVuY3Rpb24oaSxBKXtpZihBLm5vZGVOYW1lLmluZGV4T2YoImRhdGEtc2FwLXVpLSIpPT0wKXtsKz0iICIrQS5ub2RlTmFtZSsiPVwiIitBLm5vZGVWYWx1ZSsiXCIifX0pO2wrPSI+PC9zY3JpcHQ+IjtzLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQocyk7alF1ZXJ5KCIjc2FwLXVpLWJvb3RzdHJhcC1jYWNoZWJ1c3RlZCIpLnJlbW92ZSgpO3dpbmRvd1sic2FwLXVpLWNvbmZpZyJdJiZ3aW5kb3dbInNhcC11aS1jb25maWciXS5yZXNvdXJjZVJvb3RzJiYod2luZG93WyJzYXAtdWktY29uZmlnIl0ucmVzb3VyY2VSb290c1siIl09dW5kZWZpbmVkKTtkb2N1bWVudC53cml0ZShsKTt2YXIgUj1uZXcgRXJyb3IoIkFib3J0aW5nIFVJNSBib290c3RyYXAgYW5kIHJlc3RhcnRpbmcgZnJvbTogIit3aW5kb3dbInNhcC11aS1zUmVzdGFydFVybCJdKTtSLm5hbWU9IlJlc3RhcnQiO2RlbGV0ZSB3aW5kb3dbInNhcC11aS1iUmVzdGFydCJdO2RlbGV0ZSB3aW5kb3dbInNhcC11aS1zUmVzdGFydFVybCJdO3Rocm93IFJ9O2RlYnVnZ2VyO2lmKHdpbmRvd1sic2FwLXVpLWJSZXN0YXJ0Il0pe2QoKX19fSkoKTsoZnVuY3Rpb24oKXt2YXIgZD0vc2FwLXVpLWRlYnVnPSh0cnVlfHh8WCkvLnRlc3QobG9jYXRpb24uc2VhcmNoKSxpPXdpbmRvd1sic2FwLXVpLW9wdGltaXplZCJdO3RyeXtkPWR8fCh3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oInNhcC11aS1kZWJ1ZyIpPT0iWCIpfWNhdGNoKGUpe313aW5kb3dbInNhcC11aS1kZWJ1ZyJdPWQ7aWYoLy1kYmdcLmpzKFs/I118JCkvLnRlc3QoZi51cmwpKXt3aW5kb3dbInNhcC11aS1sb2FkZGJnIl09dHJ1ZTt3aW5kb3dbInNhcC11aS1kZWJ1ZyJdPXRydWV9aWYoaSYmZCl7dmFyIEQ9Zi51cmwucmVwbGFjZSgvXC8oPzpzYXAtdWktY2FjaGVidXN0ZXJcLyk/KFteXC9dKylcLmpzLywiLyQxLWRiZy5qcyIpO3dpbmRvd1sic2FwLXVpLW9wdGltaXplZCJdPWZhbHNlO3dpbmRvd1sic2FwLXVpLWxvYWRkYmciXT10cnVlO2RvY3VtZW50LndyaXRlKCI8c2NyaXB0IHR5cGU9XCJ0ZXh0L2phdmFzY3JpcHRcIiBzcmM9XCIiK0QrIlwiPjwvc2NyaXB0PiIpO3ZhciBSPW5ldyBFcnJvcigiQWJvcnRpbmcgVUk1IGJvb3RzdHJhcCBhbmQgcmVzdGFydGluZyBmcm9tOiAiK0QpO1IubmFtZT0iUmVzdGFydCI7dGhyb3cgUn19KSgpO3ZhciBDPV9bInNhcC11aS1jb25maWciXT0oZnVuY3Rpb24oKXtmdW5jdGlvbiBuKG8pe2pRdWVyeS5lYWNoKG8sZnVuY3Rpb24oaSx2KXt2YXIgbT1pLnRvTG93ZXJDYXNlKCk7aWYoIW8uaGFzT3duUHJvcGVydHkobSkpe29bbV09djtkZWxldGUgb1tpXX19KTtyZXR1cm4gb312YXIgcz1mLnRhZyxkPV9bInNhcC11aS1jb25maWciXSxsPSJzYXAtdWktY29uZmlnLmpzb24iO2lmKHR5cGVvZiBkPT09InN0cmluZyIpe2IoIndhcm5pbmciLCJMb2FkaW5nIGV4dGVybmFsIGJvb3RzdHJhcCBjb25maWd1cmF0aW9uIGZyb20gXCIiK2QrIlwiLiBUaGlzIGlzIGEgZGVzaWduIHRpbWUgZmVhdHVyZSBhbmQgbm90IGZvciBwcm9kdWN0aXZlIHVzYWdlISIpO2lmKGQhPT1sKXtiKCJ3YXJuaW5nIiwiVGhlIGV4dGVybmFsIGJvb3RzdHJhcCBjb25maWd1cmF0aW9uIGZpbGUgc2hvdWxkIGJlIG5hbWVkIFwiIitsKyJcIiEiKX1qUXVlcnkuYWpheCh7dXJsOmQsZGF0YVR5cGU6J2pzb24nLGFzeW5jOmZhbHNlLHN1Y2Nlc3M6ZnVuY3Rpb24oRCxULGkpe2Q9RH0sZXJyb3I6ZnVuY3Rpb24oaSxULG8pe2IoImVycm9yIiwiTG9hZGluZyBleHRlcm5hbGl6ZWQgYm9vdHN0cmFwIGNvbmZpZ3VyYXRpb24gZnJvbSBcIiIrZCsiXCIgZmFpbGVkISBSZWFzb246ICIrbysiISIpO2Q9dW5kZWZpbmVkfX0pfWQ9bihkfHx7fSk7ZC5yZXNvdXJjZXJvb3RzPWQucmVzb3VyY2Vyb290c3x8e307ZC50aGVtZXJvb3RzPWQudGhlbWVyb290c3x8e307ZC5yZXNvdXJjZXJvb3RzWycnXT1kLnJlc291cmNlcm9vdHNbJyddfHxmLnJlc291cmNlUm9vdDtkWyd4eC1sb2FkYWxsbW9kZSddPS8oXnxcLykoc2FwLT91aTV8W15cL10rLWFsbCkuanMoWz8jXXwkKS8udGVzdChmLnVybCk7aWYocyl7dmFyIHQ9cy5nZXRBdHRyaWJ1dGUoImRhdGEtc2FwLXVpLWNvbmZpZyIpO2lmKHQpe3RyeXtqUXVlcnkuZXh0ZW5kKGQsbigobmV3IEZ1bmN0aW9uKCJyZXR1cm4geyIrdCsifTsiKSkoKSkpfWNhdGNoKGUpe2IoImVycm9yIiwiZmFpbGVkIHRvIHBhcnNlIGRhdGEtc2FwLXVpLWNvbmZpZyBhdHRyaWJ1dGU6ICIrKGUubWVzc2FnZXx8ZSkpfX1qUXVlcnkuZWFjaChzLmF0dHJpYnV0ZXMsZnVuY3Rpb24oaSxvKXt2YXIgbT1vLm5hbWUubWF0Y2goL15kYXRhLXNhcC11aS0oLiopJC8pO2lmKG0pe209bVsxXS50b0xvd2VyQ2FzZSgpO2lmKG09PT0ncmVzb3VyY2Vyb290cycpe2pRdWVyeS5leHRlbmQoZFttXSxqUXVlcnkucGFyc2VKU09OKG8udmFsdWUpKX1lbHNlIGlmKG09PT0ndGhlbWUtcm9vdHMnKXtqUXVlcnkuZXh0ZW5kKGQudGhlbWVyb290cyxqUXVlcnkucGFyc2VKU09OKG8udmFsdWUpKX1lbHNlIGlmKG0hPT0nY29uZmlnJyl7ZFttXT1vLnZhbHVlfX19KX1yZXR1cm4gZH0oKSk7aWYoQy5ub2NvbmZsaWN0PT09dHJ1ZXx8Qy5ub2NvbmZsaWN0PT09InRydWUifHxDLm5vY29uZmxpY3Q9PT0ieCIpe2pRdWVyeS5ub0NvbmZsaWN0KCl9alF1ZXJ5LnNhcD17fTtqUXVlcnkuc2FwLlZlcnNpb249VjtqUXVlcnkuc2FwLmRlYnVnPWZ1bmN0aW9uKGQpe2lmKCF3aW5kb3cubG9jYWxTdG9yYWdlKXtyZXR1cm4gbnVsbH1mdW5jdGlvbiBpKHUpe2FsZXJ0KCJVc2FnZSBvZiBkZWJ1ZyBzb3VyY2VzIGlzICIrKHU/Im9uIjoib2ZmIikrIiBub3cuXG5Gb3IgdGhlIGNoYW5nZSB0byB0YWtlIGVmZmVjdCwgeW91IG5lZWQgdG8gcmVsb2FkIHRoZSBwYWdlLiIpfTtpZihkPT09dHJ1ZSl7d2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKCJzYXAtdWktZGVidWciLCJYIik7aSh0cnVlKX1lbHNlIGlmKGQ9PT1mYWxzZSl7d2luZG93LmxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCJzYXAtdWktZGVidWciKTtpKGZhbHNlKX1yZXR1cm4gd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCJzYXAtdWktZGVidWciKT09IlgifTtqUXVlcnkuc2FwLnN0YXRpc3RpY3M9ZnVuY3Rpb24oZCl7aWYoIXdpbmRvdy5sb2NhbFN0b3JhZ2Upe3JldHVybiBudWxsfWZ1bmN0aW9uIGkodSl7YWxlcnQoIlVzYWdlIG9mIEdhdGV3YXkgc3RhdGlzdGljcyAiKyh1PyJvbiI6Im9mZiIpKyIgbm93LlxuRm9yIHRoZSBjaGFuZ2UgdG8gdGFrZSBlZmZlY3QsIHlvdSBuZWVkIHRvIHJlbG9hZCB0aGUgcGFnZS4iKX07aWYoZD09PXRydWUpe3dpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbSgic2FwLXVpLXN0YXRpc3RpY3MiLCJYIik7aSh0cnVlKX1lbHNlIGlmKGQ9PT1mYWxzZSl7d2luZG93LmxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCJzYXAtdWktc3RhdGlzdGljcyIpO2koZmFsc2UpfXJldHVybiB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oInNhcC11aS1zdGF0aXN0aWNzIik9PSJYIn07KGZ1bmN0aW9uKCl7dmFyIEY9MCxkPTEsVz0yLEk9MyxEPTQsVD01LHM9KHdpbmRvdy50b3A9PXdpbmRvdyk/IiI6IlsiK3dpbmRvdy5sb2NhdGlvbi5wYXRobmFtZS5zcGxpdCgnLycpLnNsaWNlKC0xKVswXSsiXSAiLGw9W10sTT17Jyc6ZH0sTD1udWxsO2Z1bmN0aW9uIG4oaSx3KXtyZXR1cm4oIjAwMCIrU3RyaW5nKGkpKS5zbGljZSgtdyl9ZnVuY3Rpb24gbyhpKXtyZXR1cm4oIWl8fGlzTmFOKE1baV0pKT9NWycnXTpNW2ldfWZ1bmN0aW9uIHQoKXtpZighTCl7TD17bGlzdGVuZXJzOltdLG9uTG9nRW50cnk6ZnVuY3Rpb24obSl7Zm9yKHZhciBpPTA7aTxMLmxpc3RlbmVycy5sZW5ndGg7aSsrKXtpZihMLmxpc3RlbmVyc1tpXS5vbkxvZ0VudHJ5KXtMLmxpc3RlbmVyc1tpXS5vbkxvZ0VudHJ5KG0pfX19LGF0dGFjaDpmdW5jdGlvbihpLG0pe2lmKG0pe0wubGlzdGVuZXJzLnB1c2gobSk7aWYobS5vbkF0dGFjaFRvTG9nKXttLm9uQXR0YWNoVG9Mb2coaSl9fX0sZGV0YWNoOmZ1bmN0aW9uKG0sdil7Zm9yKHZhciBpPTA7aTxMLmxpc3RlbmVycy5sZW5ndGg7aSsrKXtpZihMLmxpc3RlbmVyc1tpXT09PXYpe2lmKHYub25EZXRhY2hGcm9tTG9nKXt2Lm9uRGV0YWNoRnJvbUxvZyhtKX1MLmxpc3RlbmVycy5zcGxpY2UoaSwxKTtyZXR1cm59fX19fXJldHVybiBMfWZ1bmN0aW9uIHUoaSxtLHYsdyl7aWYoaTw9byh3KSl7dmFyIE49bmV3IERhdGUoKSx5PXt0aW1lOm4oTi5nZXRIb3VycygpLDIpKyI6IituKE4uZ2V0TWludXRlcygpLDIpKyI6IituKE4uZ2V0U2Vjb25kcygpLDIpLGRhdGU6bihOLmdldEZ1bGxZZWFyKCksNCkrIi0iK24oTi5nZXRNb250aCgpKzEsMikrIi0iK24oTi5nZXREYXRlKCksMiksdGltZXN0YW1wOk4uZ2V0VGltZSgpLGxldmVsOmksbWVzc2FnZTpTdHJpbmcobXx8IiIpLGRldGFpbHM6U3RyaW5nKHZ8fCIiKSxjb21wb25lbnQ6U3RyaW5nKHd8fCIiKX07bC5wdXNoKHkpO2lmKEwpe0wub25Mb2dFbnRyeSh5KX1pZih3aW5kb3cuY29uc29sZSl7dmFyIHo9eS5kYXRlKyIgIit5LnRpbWUrIiAiK3MreS5tZXNzYWdlKyIgLSAiK3kuZGV0YWlscysiICIreS5jb21wb25lbnQ7c3dpdGNoKGkpe2Nhc2UgRjpjYXNlIGQ6Y29uc29sZS5lcnJvcih6KTticmVhaztjYXNlIFc6Y29uc29sZS53YXJuKHopO2JyZWFrO2Nhc2UgSTpjb25zb2xlLmluZm8/Y29uc29sZS5pbmZvKHopOmNvbnNvbGUubG9nKHopO2JyZWFrO2Nhc2UgRDpjb25zb2xlLmRlYnVnP2NvbnNvbGUuZGVidWcoeik6Y29uc29sZS5sb2coeik7YnJlYWs7Y2FzZSBUOmNvbnNvbGUudHJhY2U/Y29uc29sZS50cmFjZSh6KTpjb25zb2xlLmxvZyh6KTticmVha319cmV0dXJuIHl9fWZ1bmN0aW9uIHgoaSl7dGhpcy5mYXRhbD1mdW5jdGlvbihtLHYsdyl7dShGLG0sdix3fHxpKTtyZXR1cm4gdGhpc307dGhpcy5lcnJvcj1mdW5jdGlvbiBlcnJvcihtLHYsdyl7dShkLG0sdix3fHxpKTtyZXR1cm4gdGhpc307dGhpcy53YXJuaW5nPWZ1bmN0aW9uIHdhcm5pbmcobSx2LHcpe3UoVyxtLHYsd3x8aSk7cmV0dXJuIHRoaXN9O3RoaXMuaW5mbz1mdW5jdGlvbiBpbmZvKG0sdix3KXt1KEksbSx2LHd8fGkpO3JldHVybiB0aGlzfTt0aGlzLmRlYnVnPWZ1bmN0aW9uIGRlYnVnKG0sdix3KXt1KEQsbSx2LHd8fGkpO3JldHVybiB0aGlzfTt0aGlzLnRyYWNlPWZ1bmN0aW9uIHRyYWNlKG0sdix3KXt1KFQsbSx2LHd8fGkpO3JldHVybiB0aGlzfTt0aGlzLnNldExldmVsPWZ1bmN0aW9uIHNldExldmVsKG0sdyl7dz13fHxpfHwnJztNW3ddPW07dmFyIEI9W107alF1ZXJ5LmVhY2goalF1ZXJ5LnNhcC5sb2cuTG9nTGV2ZWwsZnVuY3Rpb24oeSx2KXtCW3ZdPXl9KTt1KEksIkNoYW5naW5nIGxvZyBsZXZlbCAiKyh3PyJmb3IgJyIrdysiJyAiOiIiKSsidG8gIitCW21dLCIiLCJqUXVlcnkuc2FwLmxvZyIpO3JldHVybiB0aGlzfTt0aGlzLmdldExldmVsPWZ1bmN0aW9uIGdldExldmVsKG0pe3JldHVybiBvKG18fGkpfTt0aGlzLmlzTG9nZ2FibGU9ZnVuY3Rpb24obSx2KXtyZXR1cm4obT09bnVsbD9EOm0pPD1vKHZ8fGkpfX1qUXVlcnkuc2FwLmxvZz1qUXVlcnkuZXh0ZW5kKG5ldyB4KCkse0xldmVsOntOT05FOkYtMSxGQVRBTDpGLEVSUk9SOmQsV0FSTklORzpXLElORk86SSxERUJVRzpELFRSQUNFOlQsQUxMOihUKzEpfSxnZXRMb2dnZXI6ZnVuY3Rpb24oaSxtKXtpZighaXNOYU4obSkmJk1baV09PW51bGwpe01baV09bX1yZXR1cm4gbmV3IHgoaSl9LGdldExvZ0VudHJpZXM6ZnVuY3Rpb24oKXtyZXR1cm4gbC5zbGljZSgpfSxhZGRMb2dMaXN0ZW5lcjpmdW5jdGlvbihMKXt0KCkuYXR0YWNoKHRoaXMsTCk7cmV0dXJuIHRoaXN9LHJlbW92ZUxvZ0xpc3RlbmVyOmZ1bmN0aW9uKEwpe3QoKS5kZXRhY2godGhpcyxMKTtyZXR1cm4gdGhpc319KTtqUXVlcnkuc2FwLmxvZy5Mb2dMZXZlbD1qUXVlcnkuc2FwLmxvZy5MZXZlbDtqUXVlcnkuc2FwLmxvZy5nZXRMb2c9alF1ZXJ5LnNhcC5sb2cuZ2V0TG9nRW50cmllcztqUXVlcnkuc2FwLmFzc2VydD1mdW5jdGlvbihSLG0pe2lmKCFSKXtpZih3aW5kb3cuY29uc29sZSYmY29uc29sZS5hc3NlcnQpe2NvbnNvbGUuYXNzZXJ0KFIscyttKX1lbHNle2pRdWVyeS5zYXAubG9nLmRlYnVnKCJbQXNzZXJ0aW9uc10gIittKX19fTtDLmxvZ2xldmVsPShmdW5jdGlvbigpe3ZhciBtPS8oPzpcP3wmKXNhcC11aS1sb2coPzpMfC1sKWV2ZWw9KFteJl0qKS8uZXhlYyh3aW5kb3cubG9jYXRpb24uc2VhcmNoKTtyZXR1cm4gbSYmbVsxXX0oKSl8fEMubG9nbGV2ZWw7aWYoQy5sb2dsZXZlbCl7alF1ZXJ5LnNhcC5sb2cuc2V0TGV2ZWwoalF1ZXJ5LnNhcC5sb2cuTGV2ZWxbQy5sb2dsZXZlbC50b1VwcGVyQ2FzZSgpXXx8cGFyc2VJbnQoQy5sb2dsZXZlbCwxMCkpfWpRdWVyeS5zYXAubG9nLmluZm8oIlNBUCBMb2dnZXIgc3RhcnRlZC4iKTtqUXVlcnkuZWFjaChhLGZ1bmN0aW9uKGksZSl7alF1ZXJ5LnNhcC5sb2dbZS5sZXZlbF0oZS5tZXNzYWdlKX0pO2E9bnVsbH0oKSk7alF1ZXJ5LnNhcC5mYWN0b3J5PWZ1bmN0aW9uIGZhY3Rvcnkobyl7ZnVuY3Rpb24gRigpe31GLnByb3RvdHlwZT1vO3JldHVybiBGfTtqUXVlcnkuc2FwLm5ld09iamVjdD1mdW5jdGlvbiBuZXdPYmplY3Qobyl7cmV0dXJuIG5ldyhqUXVlcnkuc2FwLmZhY3RvcnkobykpKCl9O2pRdWVyeS5zYXAuZ2V0dGVyPWZ1bmN0aW9uIGdldHRlcih2KXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gdn19O2pRdWVyeS5zYXAuZ2V0T2JqZWN0PWZ1bmN0aW9uIGdldE9iamVjdChuLE4sbyl7dmFyIE89b3x8XyxkPShufHwiIikuc3BsaXQoIi4iKSxsPWQubGVuZ3RoLG09aXNOYU4oTik/MDpsLU4saTtmb3IoaT0wO08mJmk8bDtpKyspe2lmKCFPW2RbaV1dJiZpPG0pe09bZFtpXV09e319Tz1PW2RbaV1dfXJldHVybiBPfTtqUXVlcnkuc2FwLnNldE9iamVjdD1mdW5jdGlvbihuLHYsbyl7dmFyIE89b3x8XyxOPShufHwiIikuc3BsaXQoIi4iKSxsPU4ubGVuZ3RoLGk7aWYobD4wKXtmb3IoaT0wO08mJmk8bC0xO2krKyl7aWYoIU9bTltpXV0pe09bTltpXV09e319Tz1PW05baV1dfU9bTltsLTFdXT12fX07ZnVuY3Rpb24gUyhuLGQsdCl7dmFyIFQ9W10sbz0wLEY9MCxzO3RoaXMuc3RhcnRUYXNrPWZ1bmN0aW9uKGwpe3ZhciBJPVQubGVuZ3RoO1RbSV09e25hbWU6bCxmaW5pc2hlZDpmYWxzZX07bysrO3JldHVybiBJfTt0aGlzLmZpbmlzaFRhc2s9ZnVuY3Rpb24oSSxsKXtpZighVFtJXXx8VFtJXS5maW5pc2hlZCl7dGhyb3cgbmV3IEVycm9yKCJ0cnlpbmcgdG8gZmluaXNoIG5vbiBleGlzdGluZyBvciBhbHJlYWR5IGZpbmlzaGVkIHRhc2siKX1UW0ldLmZpbmlzaGVkPXRydWU7by0tO2lmKGw9PT1mYWxzZSl7RisrfWlmKG89PT0wKXtqUXVlcnkuc2FwLmxvZy5pbmZvKCJTeW5jIHBvaW50ICciK24rIicgZmluaXNoZWQgKHRhc2tzOiIrVC5sZW5ndGgrIiwgb3BlbjoiK28rIiwgZmFpbHVyZXM6IitGKyIpIik7aWYocyl7Y2xlYXJUaW1lb3V0KHMpO3M9bnVsbH07aSgpfX07ZnVuY3Rpb24gaSgpe2QmJmQobyxGKTtkPW51bGx9aWYoIWlzTmFOKHQpKXtzPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtqUXVlcnkuc2FwLmxvZy5pbmZvKCJTeW5jIHBvaW50ICciK24rIicgdGltZWQgb3V0ICh0YXNrczoiK1QubGVuZ3RoKyIsIG9wZW46IitvKyIsIGZhaWx1cmVzOiIrRisiKSIpO2koKX0sdCl9O2pRdWVyeS5zYXAubG9nLmluZm8oIlN5bmMgcG9pbnQgJyIrbisiJyBjcmVhdGVkIisodD8iKHRpbWVvdXQgYWZ0ZXIgIit0KyIgbXMpIjoiIikpfWpRdWVyeS5zYXAuc3luY1BvaW50PWZ1bmN0aW9uKG4sZCx0KXtyZXR1cm4gbmV3IFMobixkLHQpfTt2YXIgZz0oZnVuY3Rpb24oKXt2YXIgbz1qUXVlcnkuc2FwLmxvZy5nZXRMb2dnZXIoInNhcC51aS5Nb2R1bGVTeXN0ZW0iLCgvc2FwLXVpLXh4LWRlYnVnKE18LW0pb2R1bGUoTHwtbClvYWRpbmc9KHRydWV8eHxYKS8udGVzdChsb2NhdGlvbi5zZWFyY2gpfHxDWyJ4eC1kZWJ1Z01vZHVsZUxvYWRpbmciXSk/alF1ZXJ5LnNhcC5sb2cuTGV2ZWwuREVCVUc6alF1ZXJ5LnNhcC5sb2cuTGV2ZWwuSU5GTyksdT17Jyc6J3Jlc291cmNlcy8nfSxJPTAsdD0tMSxMPTEsdj0yLHc9MyxSPTQsRj01LE09eyJzYXAvdWkvdGhpcmRwYXJ0eS9VUkkuanMiOntzdGF0ZTpSLHVybDpjLGNvbnRlbnQ6VVJJfSwic2FwL3VpL0RldmljZS5qcyI6e3N0YXRlOlIsdXJsOmMsY29udGVudDpzYXAudWkuRGV2aWNlfSwianF1ZXJ5LnNhcC5nbG9iYWwuanMiOntzdGF0ZTpSLHVybDpjLGNvbnRlbnQ6alF1ZXJ5fX0seD17fSxBPXsnc2FwL3VpL3RoaXJkcGFydHkvY3Jvc3Nyb2Fkcy5qcyc6dHJ1ZSwnc2FwL3VpL3RoaXJkcGFydHkvZGF0YWpzLmpzJzp0cnVlLCdzYXAvdWkvdGhpcmRwYXJ0eS9oYXNoZXIuanMnOnRydWUsJ3NhcC91aS90aGlyZHBhcnR5L0lQdjYuanMnOnRydWUsJ3NhcC91aS90aGlyZHBhcnR5L2pxdWVyeS9qcXVlcnktMS4xMS4xLmpzJzp0cnVlLCdzYXAvdWkvdGhpcmRwYXJ0eS9qcXVlcnkvanF1ZXJ5LTEuMTAuMi5qcyc6dHJ1ZSwnc2FwL3VpL3RoaXJkcGFydHkvanF1ZXJ5L2pxdWVyeS0xLjEwLjEuanMnOnRydWUsJ3NhcC91aS90aGlyZHBhcnR5L2pxdWVyeS9qcXVlcnkuMS43LjEuanMnOnRydWUsJ3NhcC91aS90aGlyZHBhcnR5L2pxdWVyeS9qcXVlcnkuMS44LjEuanMnOnRydWUsJ3NhcC91aS90aGlyZHBhcnR5L2pxdWVyeS1tb2JpbGUtY3VzdG9tLmpzJzp0cnVlLCdzYXAvdWkvdGhpcmRwYXJ0eS9sZXNzLmpzJzp0cnVlLCdzYXAvdWkvdGhpcmRwYXJ0eS9wdW55Y29kZS5qcyc6dHJ1ZSwnc2FwL3VpL3RoaXJkcGFydHkvcmVxdWlyZS5qcyc6dHJ1ZSwnc2FwL3VpL3RoaXJkcGFydHkvU2Vjb25kTGV2ZWxEb21haW5zLmpzJzp0cnVlLCdzYXAvdWkvdGhpcmRwYXJ0eS9zaWduYWxzLmpzJzp0cnVlLCdzYXAvdWkvdGhpcmRwYXJ0eS9VUkkuanMnOnRydWV9LHk9W10sej0iIixCPTUxMioxMDI0LEQ9ZG9jdW1lbnQubG9jYXRpb24uaHJlZi5yZXBsYWNlKC9cPy4qfCMuKi9nLCIiKSxHPSJmcmFnbWVudCIsSD0idmlldyIsSz17anM6W0gsRywiY29udHJvbGxlciJdLHhtbDpbSCxHXSxqc29uOltILEddLGh0bWw6W0gsR119LEo9bmV3IFJlZ0V4cCgiKFxcLig/OiIrSy5qcy5qb2luKCJ8IikrIikpP1xcLmpzJCIpLE4sTzsoZnVuY3Rpb24oKXt2YXIgcz0iIixkPSIiO2pRdWVyeS5lYWNoKEssZnVuY3Rpb24oaSxsKXtzPShzP3MrInwiOiIiKStpO2Q9KGQ/ZCsifCI6IiIpKyIoPzooPzoiK2wuam9pbigiXFwufCIpKyJcXC4pPyIraSsiKSJ9KTtzPSJcXC4oIitzKyIpJCI7ZD0iXFwuKD86IitkKyJ8W14uL10rKSQiO28uZGVidWcoImNvbnN0cnVjdGVkIHJlZ2V4cCBmb3IgZmlsZSB0eXBlcyA6IitzKTtvLmRlYnVnKCJjb25zdHJ1Y3RlZCByZWdleHAgZm9yIGZpbGUgc3ViLXR5cGVzIDoiK2QpO049bmV3IFJlZ0V4cChzKTtPPW5ldyBSZWdFeHAoZCl9KCkpO2Z1bmN0aW9uIFEocyl7aWYoL15zYXBcLnVpXC50aGlyZHBhcnR5XC5qcXVlcnlcLmpxdWVyeS0vLnRlc3Qocykpe3JldHVybiJzYXAvdWkvdGhpcmRwYXJ0eS9qcXVlcnkvanF1ZXJ5LSIrcy5zbGljZSgic2FwLnVpLnRoaXJkcGFydHkuanF1ZXJ5LmpxdWVyeS0iLmxlbmd0aCl9ZWxzZSBpZigvXmpxdWVyeVwuc2FwXC4vLnRlc3Qocykpe3JldHVybiBzfXJldHVybiBzLnJlcGxhY2UoL1wuL2csIi8iKX1mdW5jdGlvbiBUKHMpe3ZhciBkO2lmKCEvXC5qcyQvLnRlc3Qocykpe3JldHVybn1zPXMuc2xpY2UoMCwtMyk7aWYoL15zYXBcL3VpXC90aGlyZHBhcnR5XC9qcXVlcnlcL2pxdWVyeS0vLnRlc3Qocykpe3JldHVybiJzYXAudWkudGhpcmRwYXJ0eS5qcXVlcnkuanF1ZXJ5LSIrcy5zbGljZSgic2FwL3VpL3RoaXJkcGFydHkvanF1ZXJ5L2pxdWVyeS0iLmxlbmd0aCl9ZWxzZSBpZigvXmpxdWVyeVwuc2FwXC4vLnRlc3Qocykpe3JldHVybiBzfXJldHVybiBzLnJlcGxhY2UoL1wvL2csIi4iKX1mdW5jdGlvbiBVKHMsZCl7dmFyIGk9cy5zcGxpdCgvXC8vKSxsLGExLGIxLG07aWYoYXJndW1lbnRzLmxlbmd0aD09PTEmJmkubGVuZ3RoPjApe209Ty5leGVjKGlbaS5sZW5ndGgtMV0pO2lmKG0pe2Q9bVswXTtpW2kubGVuZ3RoLTFdPWlbaS5sZW5ndGgtMV0uc2xpY2UoMCxtLmluZGV4KX1lbHNle2Q9IiJ9fWZvcihsPWkubGVuZ3RoO2w+PTA7bC0tKXthMT1pLnNsaWNlKDAsbCkuam9pbignLycpO2lmKHVbYTFdKXtiMT11W2ExXTtpZihsPGkubGVuZ3RoKXtiMSs9aS5zbGljZShsKS5qb2luKCcvJyl9aWYoYjEuc2xpY2UoLTEpPT09Jy8nKXtiMT1iMS5zbGljZSgwLC0xKX1yZXR1cm4gYjErKGR8fCcnKX19fWZ1bmN0aW9uIFcocyl7dmFyIGQsaSxsO2ZvcihkIGluIHUpe2lmKHUuaGFzT3duUHJvcGVydHkoZCkpe2k9dVtkXS5zbGljZSgwLC0xKTtpZihzLmluZGV4T2YoaSk9PT0wKXtsPWQrcy5zbGljZShpLmxlbmd0aCk7aWYobC5jaGFyQXQoMCk9PT0nLycpe2w9bC5zbGljZSgxKX1pZihNW2xdJiZNW2xdLmRhdGEpe3JldHVybiBsfX19fX1mdW5jdGlvbiBYKG0pe3ZhciBkO2Q9TVttXXx8KE1bbV09e3N0YXRlOkl9KTtpZihkLnN0YXRlPkkpe3JldHVybiBkfWlmKG8uaXNMb2dnYWJsZSgpKXtvLmRlYnVnKHorImRlY2xhcmUgbW9kdWxlICciK20rIiciKX1kLnN0YXRlPVI7aWYoeS5sZW5ndGg9PT0wKXt5LnB1c2gobSk7ZC51cmw9ZC51cmx8fGN9cmV0dXJuIGR9ZnVuY3Rpb24gWShzKXt2YXIgbT1KLmV4ZWMocyksZCxsLGExLGIxLGk7aWYoIW0pe28uZXJyb3IoImNhbiBvbmx5IHJlcXVpcmUgSmF2YXNjcmlwdCBtb2R1bGUsIG5vdCAiK3MpO2ExLnN0YXRlPUY7cmV0dXJufWQ9cy5zbGljZSgwLG0uaW5kZXgpO2w9bVswXTthMT1NW3NdfHwoTVtzXT17c3RhdGU6SX0pO2lmKG8uaXNMb2dnYWJsZSgpKXtvLmRlYnVnKHorInJlcXVpcmUgJyIrcysiJyBvZiB0eXBlICciK2wrIiciKX1pZihhMS5zdGF0ZSE9PUkpe2lmKGExLnN0YXRlPT09dCl7YTEuc3RhdGU9djtpZihBW3NdJiZ0eXBlb2Ygd2luZG93LmRlZmluZT09PSJmdW5jdGlvbiImJndpbmRvdy5kZWZpbmUuYW1kKXt2YXIgYzE9d2luZG93LmRlZmluZS5hbWQ7dHJ5e2RlbGV0ZSB3aW5kb3cuZGVmaW5lLmFtZDtaKHMpfWZpbmFsbHl7d2luZG93LmRlZmluZS5hbWQ9YzF9fWVsc2V7WihzKX19aWYoYTEuc3RhdGU9PT1SKXtpZihvLmlzTG9nZ2FibGUoKSl7by5kZWJ1Zyh6KyJtb2R1bGUgJyIrcysiJyBoYXMgYWxyZWFkeSBiZWVuIGxvYWRlZCAoc2tpcHBlZCkuIil9cmV0dXJuIHRoaXN9ZWxzZSBpZihhMS5zdGF0ZT09PUYpe3Rocm93IG5ldyBFcnJvcigiZm91bmQgaW4gbmVnYXRpdmUgY2FjaGU6ICciK3MrIicgZnJvbSAiK2ExLnVybCsiOiAiK2ExLmVycm9yKX1lbHNle3JldHVybiB0aGlzfX1hMS5zdGF0ZT1MO2IxPXdpbmRvd1sic2FwLXVpLWxvYWRkYmciXT9bIi1kYmciLCIiXTpbIiJdO2ZvcihpPTA7aTxiMS5sZW5ndGgmJmExLnN0YXRlIT09djtpKyspe2ExLnVybD1VKGQsYjFbaV0rbCk7aWYoby5pc0xvZ2dhYmxlKCkpe28uZGVidWcoeisibG9hZGluZyAiKyhiMVtpXT9iMVtpXSsiIHZlcnNpb24gb2YgIjoiIikrIiciK3MrIicgZnJvbSAnIithMS51cmwrIiciKX1qUXVlcnkuYWpheCh7dXJsOmExLnVybCxkYXRhVHlwZTondGV4dCcsYXN5bmM6ZmFsc2Usc3VjY2VzczpmdW5jdGlvbihkMSxlMSxmMSl7YTEuc3RhdGU9djthMS5kYXRhPWQxfSxlcnJvcjpmdW5jdGlvbihkMSxlMSxmMSl7YTEuc3RhdGU9RjthMS5lcnJvcj1kMT9kMS5zdGF0dXMrIiAtICIrZDEuc3RhdHVzVGV4dDplMX19KX1pZihhMS5zdGF0ZT09PXYpe2lmKEFbc10mJnR5cGVvZiB3aW5kb3cuZGVmaW5lPT09ImZ1bmN0aW9uIiYmd2luZG93LmRlZmluZS5hbWQpe3ZhciBjMT13aW5kb3cuZGVmaW5lLmFtZDt0cnl7ZGVsZXRlIHdpbmRvdy5kZWZpbmUuYW1kO1oocyl9ZmluYWxseXt3aW5kb3cuZGVmaW5lLmFtZD1jMX19ZWxzZXtaKHMpfX1pZihhMS5zdGF0ZSE9PVIpe3Rocm93IG5ldyBFcnJvcigiZmFpbGVkIHRvIGxvYWQgJyIrcysiJyBmcm9tICIrYTEudXJsKyI6ICIrYTEuZXJyb3IpfX1mdW5jdGlvbiBaKG0pe3ZhciBkPU1bbV0scyxpO2lmKGQmJmQuc3RhdGU9PT12JiZ0eXBlb2YgZC5kYXRhIT09InVuZGVmaW5lZCIpe3RyeXtpZihvLmlzTG9nZ2FibGUoKSl7by5kZWJ1Zyh6KyJleGVjdXRpbmcgJyIrbSsiJyIpO3M9ejt6PXorIjogIn1kLnN0YXRlPXc7eS5wdXNoKG0pO2lmKHR5cGVvZiBkLmRhdGE9PT0iZnVuY3Rpb24iKXtkLmRhdGEuYXBwbHkod2luZG93KX1lbHNle2k9ZC5kYXRhO2lmKGkmJiFpLm1hdGNoKC9cL1wvWyNAXSBzb3VyY2UoTWFwcGluZyk/VVJMPS4qJC8pKXtpKz0iXG4vLyMgc291cmNlVVJMPSIrVVJJKGQudXJsKS5hYnNvbHV0ZVRvKEQpfWlmKF8uZXhlY1NjcmlwdCYmKCFkLmRhdGF8fGQuZGF0YS5sZW5ndGg8Qikpe3RyeXtkLmRhdGEmJl8uZXhlY1NjcmlwdChpKX1jYXRjaChlKXt5LnBvcCgpO2pRdWVyeS5zYXAuZ2xvYmFsRXZhbChkLmRhdGEpO3Rocm93IGV9fWVsc2V7Xy5ldmFsKGkpfX15LnBvcCgpO2Quc3RhdGU9UjtkLmRhdGE9dW5kZWZpbmVkO2QuY29udGVudD1kLmNvbnRlbnR8fGpRdWVyeS5zYXAuZ2V0T2JqZWN0KFQobSkpO2lmKG8uaXNMb2dnYWJsZSgpKXt6PXM7by5kZWJ1Zyh6KyJmaW5pc2hlZCBleGVjdXRpbmcgJyIrbSsiJyIpfX1jYXRjaChsKXtkLnN0YXRlPUY7ZC5lcnJvcj0oKGwudG9TdHJpbmcmJmwudG9TdHJpbmcoKSl8fGwubWVzc2FnZSkrKGwubGluZT8iKGxpbmUgIitsLmxpbmUrIikiOiIiKTtkLmRhdGE9dW5kZWZpbmVkO2lmKHdpbmRvd1sic2FwLXVpLWRlYnVnIl0mJigvc2FwLXVpLXh4LXNob3coTHwtbClvYWQoRXwtZSlycm9ycz0odHJ1ZXx4fFgpLy50ZXN0KGxvY2F0aW9uLnNlYXJjaCl8fENbInh4LXNob3dsb2FkZXJyb3JzIl0pKXtvLmVycm9yKCJlcnJvciB3aGlsZSBldmFsdWF0aW5nICIrbSsiLCBlbWJlZGRpbmcgYWdhaW4gdmlhIHNjcmlwdCB0YWcgdG8gZW5mb3JjZSBhIHN0YWNrIHRyYWNlIChzZWUgYmVsb3cpIik7alF1ZXJ5LnNhcC5pbmNsdWRlU2NyaXB0KGQudXJsKTtyZXR1cm59fX19ZnVuY3Rpb24gJChkLGwpe3ZhciBzPVtdLGksYTEsYjEsbTtmb3IoaT0wO2k8ZC5sZW5ndGg7aSsrKXthMT1kW2ldO28uZGVidWcoeisicmVxdWlyZSAnIithMSsiJyIpO1koYTErIi5qcyIpO3NbaV09TVthMSsiLmpzIl0uY29udGVudHx8alF1ZXJ5LnNhcC5nZXRPYmplY3QoVChhMSsiLmpzIikpO28uZGVidWcoeisicmVxdWlyZSAnIithMSsiJzogZG9uZS4iKX1sLmFwcGx5KHRoaXMscyl9alF1ZXJ5LnNhcC5nZXRNb2R1bGVQYXRoPWZ1bmN0aW9uKG0scyl7cmV0dXJuIFUoUShtKSxzKX07alF1ZXJ5LnNhcC5nZXRSZXNvdXJjZVBhdGg9VTtqUXVlcnkuc2FwLnJlZ2lzdGVyTW9kdWxlUGF0aD1mdW5jdGlvbiByZWdpc3Rlck1vZHVsZVBhdGgobSxzKXttPW0ucmVwbGFjZSgvXC4vZywiLyIpO3M9c3x8Jy4nO2pRdWVyeS5zYXAucmVnaXN0ZXJSZXNvdXJjZVBhdGgobSxzKX07alF1ZXJ5LnNhcC5yZWdpc3RlclJlc291cmNlUGF0aD1mdW5jdGlvbihzLGQpe3M9U3RyaW5nKHN8fCIiKTtpZihkPT1udWxsKXtkZWxldGUgdVtzXX1lbHNle2Q9U3RyaW5nKGQpO2lmKGQuc2xpY2UoLTEpIT0nLycpe2QrPScvJ311W3NdPWR9by5pbmZvKCJyZWdpc3RlclJlc291cmNlUGF0aCAoJyIrcysiJywgJyIrZCsiJykiKX07alF1ZXJ5LnNhcC5pc0RlY2xhcmVkPWZ1bmN0aW9uIGlzRGVjbGFyZWQobSxpKXttPVEobSkrIi5qcyI7cmV0dXJuIE1bbV0mJihpfHxNW21dLnN0YXRlIT09dCl9O2pRdWVyeS5zYXAuZ2V0QWxsRGVjbGFyZWRNb2R1bGVzPWZ1bmN0aW9uKCl7dmFyIG09W107alF1ZXJ5LmVhY2goTSxmdW5jdGlvbihzLGQpe2lmKGQmJmQuc3RhdGUhPT10KXt2YXIgaT1UKHMpO2lmKGkpe20ucHVzaChpKX19fSk7cmV0dXJuIG19O2lmKEMucmVzb3VyY2Vyb290cyl7alF1ZXJ5LmVhY2goQy5yZXNvdXJjZXJvb3RzLGpRdWVyeS5zYXAucmVnaXN0ZXJNb2R1bGVQYXRoKX1vLmluZm8oIlVSTCBwcmVmaXhlcyBzZXQgdG86Iik7Zm9yKHZhciBuIGluIHUpe28uaW5mbygiICAiKyhuPyInIituKyInIjoiKGRlZmF1bHQpIikrIiA6ICIrdVtuXSl9alF1ZXJ5LnNhcC5kZWNsYXJlPWZ1bmN0aW9uKG0sZCl7dmFyIHM9bTtpZih0eXBlb2YobSk9PT0ib2JqZWN0Iil7cz1tLm1vZE5hbWU7bT1RKG0ubW9kTmFtZSkrKG0udHlwZT8iLiIrbS50eXBlOiIiKSsiLmpzIn1lbHNle209UShtKSsiLmpzIn1YKG0pO2lmKGQhPT1mYWxzZSl7alF1ZXJ5LnNhcC5nZXRPYmplY3QocywxKX1yZXR1cm4gdGhpc307alF1ZXJ5LnNhcC5yZXF1aXJlPWZ1bmN0aW9uKG0sZCl7aWYoalF1ZXJ5LmlzQXJyYXkobSkmJnR5cGVvZiBkPT09ImZ1bmN0aW9uIil7JChtLGQpfWVsc2UgaWYoYXJndW1lbnRzLmxlbmd0aD4xKXtmb3IodmFyIGk9MDtpPGFyZ3VtZW50cy5sZW5ndGg7aSsrKXtqUXVlcnkuc2FwLnJlcXVpcmUoYXJndW1lbnRzW2ldKX1yZXR1cm4gdGhpc31pZih0eXBlb2YobSk9PT0ib2JqZWN0Iil7bT1RKG0ubW9kTmFtZSkrKG0udHlwZT8iLiIrbS50eXBlOiIiKSsiLmpzIn1lbHNle209UShtKSsiLmpzIn1ZKG0pO3JldHVybiB0aGlzfTtqUXVlcnkuc2FwLl9yZXF1aXJlUGF0aD1mdW5jdGlvbihtKXtZKG0rIi5qcyIpfTt3aW5kb3cuc2FwPXdpbmRvdy5zYXB8fHt9O3NhcC51aT1zYXAudWl8fHt9O3NhcC51aS5kZWZpbmU9ZnVuY3Rpb24ocyxkLGwsbSl7dmFyIGExPVtdLGIxLGMxLGk7aWYodHlwZW9mIHM9PT0ic3RyaW5nIil7YjE9cysiLmpzIn1lbHNle209bDtsPWQ7ZD1zO2IxPXlbeS5sZW5ndGgtMV19cz1UKGIxKTtpZighalF1ZXJ5LmlzQXJyYXkoZCkpe209bDtsPWQ7ZD1bXX1lbHNle3ZhciBkMT1iMS5zbGljZSgwLDErYjEubGFzdEluZGV4T2YoJy8nKSk7Zm9yKGk9MDtpPGQubGVuZ3RoO2krKyl7aWYoL15cLlwvLy50ZXN0KGRbaV0pKXtkW2ldPWQxK2RbaV0uc2xpY2UoMil9fX1pZihvLmlzTG9nZ2FibGUoKSl7by5kZWJ1ZygiZGVmaW5lKCIrYjErIiwgIisiWyciK2Quam9pbigiJywnIikrIiddIisiKSIpfXZhciBlMT1YKGIxKTskKGQsZnVuY3Rpb24oKXtpZihvLmlzTG9nZ2FibGUoKSl7by5kZWJ1ZygiZGVmaW5lKCIrYjErIik6IGNhbGxpbmcgZmFjdG9yeSAiK3R5cGVvZiBsKX1pZihtKXtqUXVlcnkuc2FwLmdldE9iamVjdChzLDEpfWlmKHR5cGVvZiBsPT09ImZ1bmN0aW9uIil7ZTEuY29udGVudD1sLmFwcGx5KHdpbmRvdyxhcmd1bWVudHMpfWVsc2V7ZTEuY29udGVudD1sfWlmKG0pe2lmKGUxLmNvbnRlbnQ9PW51bGwpe28uZXJyb3IoIm1vZHVsZSAnIitiMSsiJyByZXR1cm5lZCBubyBjb250ZW50LCBidXQgc2hvdWxkIGJlIGV4cG9ydGVkIil9ZWxzZXtpZihvLmlzTG9nZ2FibGUoKSl7by5kZWJ1ZygiZXhwb3J0aW5nIGNvbnRlbnQgb2YgJyIrYjErIic6IGFzIGdsb2JhbCBvYmplY3QiKX1qUXVlcnkuc2FwLnNldE9iamVjdChzLGUxLmNvbnRlbnQpfX19KX07alF1ZXJ5LnNhcC5wcmVsb2FkTW9kdWxlcz1mdW5jdGlvbihzLGQsaSl7dmFyIGwsbTtpZih4W3NdKXJldHVybjt4W3NdPXRydWU7bD1qUXVlcnkuc2FwLmdldE1vZHVsZVBhdGgocywiLmpzb24iKTtvLmRlYnVnKCJwcmVsb2FkIGZpbGUgIitzKTttPWkmJmkuc3RhcnRUYXNrKCJsb2FkICIrcyk7alF1ZXJ5LmFqYXgoe2RhdGFUeXBlOiJqc29uIixhc3luYzpkLHVybDpsLHN1Y2Nlc3M6ZnVuY3Rpb24oYTEpe2lmKGExKXthMS51cmw9bH1qUXVlcnkuc2FwLnJlZ2lzdGVyUHJlbG9hZGVkTW9kdWxlcyhhMSxkLGkpO2kmJmkuZmluaXNoVGFzayhtKX0sZXJyb3I6ZnVuY3Rpb24oYTEsYjEsYzEpe28uZXJyb3IoImZhaWxlZCB0byBwcmVsb2FkICciK3MrIic6ICIrKGMxfHxiMSkpO2kmJmkuZmluaXNoVGFzayhtLGZhbHNlKX19KX07alF1ZXJ5LnNhcC5yZWdpc3RlclByZWxvYWRlZE1vZHVsZXM9ZnVuY3Rpb24oZCxpLHMpe3ZhciBsPVYoZC52ZXJzaW9ufHwiMS4wIikuY29tcGFyZVRvKCIyLjAiKTwwO2lmKG8uaXNMb2dnYWJsZSgpKXtvLmRlYnVnKHorImFkZGluZyBwcmVsb2FkZWQgbW9kdWxlcyBmcm9tICciK2QudXJsKyInIil9aWYoZC5uYW1lKXt4W2QubmFtZV09dHJ1ZX1qUXVlcnkuZWFjaChkLm1vZHVsZXMsZnVuY3Rpb24obSxhMSl7bT1sP1EobSkrIi5qcyI6bTtpZighTVttXSl7TVttXT17c3RhdGU6dCx1cmw6ZC51cmwrIi8iK20sZGF0YTphMSxncm91cDpkLm5hbWV9fWlmKG0ubWF0Y2goL1wvbGlicmFyeVwuanMkLykpe3hbVChtKSsiLXByZWxvYWQiXT10cnVlfX0pO2lmKGQuZGVwZW5kZW5jaWVzKXtqUXVlcnkuZWFjaChkLmRlcGVuZGVuY2llcyxmdW5jdGlvbihtLGExKXtqUXVlcnkuc2FwLnByZWxvYWRNb2R1bGVzKGExLGkscyl9KX19O2pRdWVyeS5zYXAudW5sb2FkUmVzb3VyY2VzPWZ1bmN0aW9uKHMsZCxsLG0pe3ZhciBhMT1bXTtpZihkPT1udWxsKXtkPXRydWV9aWYoZCl7alF1ZXJ5LmVhY2goTSxmdW5jdGlvbihpLGIxKXtpZihiMSYmYjEuZ3JvdXA9PT1zKXthMS5wdXNoKGkpfX0pO2RlbGV0ZSB4W3NdfWVsc2V7aWYoTVtzXSl7YTEucHVzaChzKX19alF1ZXJ5LmVhY2goYTEsZnVuY3Rpb24oaSxiMSl7dmFyIGMxPU1bYjFdO2lmKGMxJiZtJiZiMS5tYXRjaCgvXC5qcyQvKSl7alF1ZXJ5LnNhcC5zZXRPYmplY3QoVChiMSksdW5kZWZpbmVkKX1pZihjMSYmKGx8fGMxLnN0YXRlPT09dCkpe2RlbGV0ZSBNW2IxXX19KX07alF1ZXJ5LnNhcC5nZXRSZXNvdXJjZU5hbWU9ZnVuY3Rpb24obSxzKXtyZXR1cm4gUShtKSsoc3x8Ii5qcyIpfTtqUXVlcnkuc2FwLmxvYWRSZXNvdXJjZT1mdW5jdGlvbihzLG0pe3ZhciBpLGwsYTEsYjEsYzE7aWYodHlwZW9mIHM9PT0ic3RyaW5nIil7bT1tfHx7fX1lbHNle209c3x8e307cz1tLm5hbWU7aWYoIXMmJm0udXJsKXtzPVcobS51cmwpfX1tPWpRdWVyeS5leHRlbmQoe2ZhaWxPbkVycm9yOnRydWUsYXN5bmM6ZmFsc2V9LG0pO2k9bS5kYXRhVHlwZTtpZihpPT1udWxsJiZzKXtpPShpPU4uZXhlYyhzKSkmJmlbMV19YzE9bS5hc3luYz9uZXcgalF1ZXJ5LkRlZmVycmVkKCk6bnVsbDtmdW5jdGlvbiBkMShkLGUpe2lmKGQ9PW51bGwmJm0uZmFpbE9uRXJyb3Ipe2U9ZXx8bmV3IEVycm9yKCJubyBkYXRhIHJldHVybmVkIGZvciAiK3MpO2lmKG0uYXN5bmMpe2MxLnJlamVjdChlKTtqUXVlcnkuc2FwLmxvZy5lcnJvcihlKTtyZXR1cm4gZH10aHJvdyBlfWlmKG0uYXN5bmMpe2MxLnJlc29sdmUoZCl9cmV0dXJuIGR9ZnVuY3Rpb24gZTEoZCl7dmFyIGYxPWpRdWVyeS5hamF4U2V0dGluZ3MuY29udmVydGVyc1sidGV4dCAiK2ldO2lmKHR5cGVvZiBmMT09PSJmdW5jdGlvbiIpe2Q9ZjEoZCl9cmV0dXJuIGQxKGQpfWw9cyYmTVtzXSYmTVtzXS5kYXRhO2lmKGwhPW51bGwpe2lmKG0uYXN5bmMpe3NldFRpbWVvdXQoZnVuY3Rpb24oKXtlMShsKX0sMCl9ZWxzZXtsPWUxKGwpfX1lbHNle2pRdWVyeS5hamF4KHt1cmw6YTE9bS51cmx8fFUocyksYXN5bmM6bS5hc3luYyxkYXRhVHlwZTppLGhlYWRlcnM6bS5oZWFkZXJzLHN1Y2Nlc3M6ZnVuY3Rpb24oZCxmMSxnMSl7bD1kMShkKX0sZXJyb3I6ZnVuY3Rpb24oZCxmMSxnMSl7YjE9bmV3IEVycm9yKCJyZXNvdXJjZSAiK3MrIiBjb3VsZCBub3QgYmUgbG9hZGVkIGZyb20gIithMSsiLiBDaGVjayBmb3IgJ2ZpbGUgbm90IGZvdW5kJyBvciBwYXJzZSBlcnJvcnMuIik7YjEuc3RhdHVzPWYxO2IxLmVycm9yPWcxO2IxLnN0YXR1c0NvZGU9ZC5zdGF0dXM7bD1kMShudWxsLGIxKX19KX1yZXR1cm4gbS5hc3luYz93aW5kb3cuUHJvbWlzZS5yZXNvbHZlKGMxKTpsfTtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm57bW9kdWxlczpNLHByZWZpeGVzOnV9fX0oKSk7ZnVuY3Rpb24gaChvKXt2YXIgZD13aW5kb3cuZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImhlYWQiKVswXTtpZihkKXtkLmFwcGVuZENoaWxkKG8pfX1qUXVlcnkuc2FwLmluY2x1ZGVTY3JpcHQ9ZnVuY3Rpb24gaW5jbHVkZVNjcmlwdCh1LGksbCxkKXt2YXIgcz13aW5kb3cuZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic2NyaXB0Iik7cy5zcmM9dTtzLnR5cGU9InRleHQvamF2YXNjcmlwdCI7aWYoaSl7cy5pZD1pfWlmKCEhc2FwLnVpLkRldmljZS5icm93c2VyLmludGVybmV0X2V4cGxvcmVyJiZzYXAudWkuRGV2aWNlLmJyb3dzZXIudmVyc2lvbjw5KXtpZihsKXtzLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpe2lmKHMucmVhZHlTdGF0ZT09PSJsb2FkZWQifHxzLnJlYWR5U3RhdGU9PT0iY29tcGxldGUiKXtsKCk7cy5vbnJlYWR5c3RhdGVjaGFuZ2U9bnVsbH19fX1lbHNle2lmKGwpe2pRdWVyeShzKS5sb2FkKGwpfWlmKGQpe2pRdWVyeShzKS5lcnJvcihkKX19dmFyIG87aWYoKGkmJihvPWpRdWVyeS5zYXAuZG9tQnlJZChpKSkmJm8udGFnTmFtZT09PSJTQ1JJUFQiKSl7alF1ZXJ5KG8pLnJlbW92ZSgpfWgocyl9O2pRdWVyeS5zYXAuaW5jbHVkZVN0eWxlU2hlZXQ9ZnVuY3Rpb24gaW5jbHVkZVN0eWxlU2hlZXQodSxJLGwsZCl7dmFyIG09ZnVuY3Rpb24odSxJLGwsZCl7dmFyIEw9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgibGluayIpO0wudHlwZT0idGV4dC9jc3MiO0wucmVsPSJzdHlsZXNoZWV0IjtMLmhyZWY9dTtpZihJKXtMLmlkPUl9alF1ZXJ5KEwpLmxvYWQoZnVuY3Rpb24oKXtqUXVlcnkoTCkuYXR0cigic2FwLXVpLXJlYWR5IiwidHJ1ZSIpO2lmKGwpe2woKX19KTtqUXVlcnkoTCkuZXJyb3IoZnVuY3Rpb24oKXtqUXVlcnkoTCkuYXR0cigic2FwLXVpLXJlYWR5IiwiZmFsc2UiKTtpZihkKXtkKCl9fSk7cmV0dXJuIEx9O3ZhciBuPWZ1bmN0aW9uKHUsSSxsLGQpe2lmKHNhcC51aS5EZXZpY2UuYnJvd3Nlci5pbnRlcm5ldF9leHBsb3JlciYmc2FwLnVpLkRldmljZS5icm93c2VyLnZlcnNpb248PTkmJmRvY3VtZW50LnN0eWxlU2hlZXRzLmxlbmd0aD49Mjgpe3ZhciBzPVVSSS5wYXJzZShkb2N1bWVudC5VUkwpLnBhdGg7alF1ZXJ5LnNhcC5sb2cud2FybmluZygiU3RseWVTaGVldCAiK0krIiBub3QgYWRkZWQgYXMgTElOSyBiZWNhdXNlIG9mIElFIGxpbWl0cyIsdSwialF1ZXJ5LnNhcC5pbmNsdWRlU3R5bGVTaGVldCIpO2lmKCF0aGlzLl9vSUVTdHlsZVNoZWV0KXt0aGlzLl9vSUVTdHlsZVNoZWV0PWRvY3VtZW50LmNyZWF0ZVN0eWxlU2hlZXQoKTt0aGlzLl9vSUVTdHlsZVNoZWV0LmFkZEltcG9ydChVUkkodSkuYWJzb2x1dGVUbyhzKSl9ZWxzZXt2YXIgQT1mYWxzZTtmb3IodmFyIGk9MDtpPHRoaXMuX29JRVN0eWxlU2hlZXQuaW1wb3J0cy5sZW5ndGg7aSsrKXt2YXIgdD10aGlzLl9vSUVTdHlsZVNoZWV0LmltcG9ydHNbaV07aWYodC5pbXBvcnRzLmxlbmd0aDwzMCl7dC5hZGRJbXBvcnQoVVJJKHUpLmFic29sdXRlVG8ocykpO0E9dHJ1ZTticmVha319aWYoIUEpe3RoaXMuX29JRVN0eWxlU2hlZXQuYWRkSW1wb3J0KFVSSSh1KS5hYnNvbHV0ZVRvKHMpKX19dmFyIHY9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NhcC11aS1jb3JlLWN1c3RvbWNzcycpO2lmKCFqUXVlcnkuaXNFbXB0eU9iamVjdCh2KSl7aCh2KX19ZWxzZXt2YXIgTD1tKHUsSSxsLGQpO2lmKGpRdWVyeSgnI3NhcC11aS1jb3JlLWN1c3RvbWNzcycpLmxlbmd0aD4wKXtqUXVlcnkoJyNzYXAtdWktY29yZS1jdXN0b21jc3MnKS5maXJzdCgpLmJlZm9yZShqUXVlcnkoTCkpfWVsc2V7aChMKX19fTt2YXIgbyxSO2lmKChJJiYobz1qUXVlcnkuc2FwLmRvbUJ5SWQoSSkpJiYoUj1vLnRhZ05hbWU9PT0iTElOSyImJm8ucmVsPT09InN0eWxlc2hlZXQiKSl8fHdpbmRvdy5kb2N1bWVudC5ib2R5KXtpZihSKXtpZihvLmdldEF0dHJpYnV0ZSgiaHJlZiIpIT09dXx8bHx8ZCl7alF1ZXJ5KG8pLnJlcGxhY2VXaXRoKG0odSxJLGwsZCkpfX1lbHNle24odSxJLGwsZCl9fWVsc2V7bih1LEksbCxkKX19O2lmKCEoQy5wcm9kdWN0aXZlPT09dHJ1ZXx8Qy5wcm9kdWN0aXZlPT09InRydWUifHxDLnByb2R1Y3RpdmU9PT0ieCIpKXtqUXVlcnkoZnVuY3Rpb24oKXtqUXVlcnkoZG9jdW1lbnQuYm9keSkua2V5ZG93bihmdW5jdGlvbihlKXtpZihlLmtleUNvZGU9PTgwJiZlLnNoaWZ0S2V5JiZlLmFsdEtleSYmZS5jdHJsS2V5KXt0cnl7alF1ZXJ5LnNhcC5yZXF1aXJlKCJzYXAudWkuZGVidWcuVGVjaG5pY2FsSW5mbyIpfWNhdGNoKGUpe3JldHVybn1zYXAudWkuZGVidWcuVGVjaG5pY2FsSW5mby5vcGVuKGZ1bmN0aW9uKCl7dmFyIGk9ZygpO3JldHVybnttb2R1bGVzOmkubW9kdWxlcyxwcmVmaXhlczppLnVybFByZWZpeGVzLGNvbmZpZzpDfX0pfX0pfSk7alF1ZXJ5KGZ1bmN0aW9uKCl7alF1ZXJ5KGRvY3VtZW50LmJvZHkpLmtleWRvd24oZnVuY3Rpb24oZSl7aWYoZS5rZXlDb2RlPT04MyYmZS5zaGlmdEtleSYmZS5hbHRLZXkmJmUuY3RybEtleSl7dHJ5e2pRdWVyeS5zYXAucmVxdWlyZSgic2FwLnVpLmNvcmUuc3VwcG9ydC5TdXBwb3J0Iik7dmFyIHM9c2FwLnVpLmNvcmUuc3VwcG9ydC5TdXBwb3J0LmdldFN0dWIoKTtpZihzLmdldFR5cGUoKSE9c2FwLnVpLmNvcmUuc3VwcG9ydC5TdXBwb3J0LlN0dWJUeXBlLkFQUExJQ0FUSU9OKXtyZXR1cm59cy5vcGVuU3VwcG9ydFRvb2woKX1jYXRjaChlKXt9fX0pfSl9aWYoL3NhcC11aS14eC1lMmUtdHJhY2U9KHRydWV8eHxYKS8udGVzdChsb2NhdGlvbi5zZWFyY2gpKXtqUXVlcnkuc2FwLnJlcXVpcmUoInNhcC51aS5jb3JlLnN1cHBvcnQudHJhY2UuRTJlVHJhY2VMaWIiKyIiKX1pZighalF1ZXJ5LnN1cHBvcnQpe2pRdWVyeS5zdXBwb3J0PXt9fWpRdWVyeS5leHRlbmQoalF1ZXJ5LnN1cHBvcnQse3RvdWNoOiJvbnRvdWNoZW5kImluIGRvY3VtZW50fSk7dmFyIHA9WyJXZWJraXQiLCJtcyIsIk1veiJdO3ZhciBrPWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZTt2YXIgcT1mdW5jdGlvbihkLGwpe2lmKGpRdWVyeS5zdXBwb3J0W2RdPT09dW5kZWZpbmVkKXtpZihrW2xdIT09dW5kZWZpbmVkKXtqUXVlcnkuc3VwcG9ydFtkXT10cnVlO2lmKGw9PT0iYm94RmxleCJ8fGw9PT0iZmxleE9yZGVyInx8bD09PSJmbGV4R3JvdyIpe2lmKCFzYXAudWkuRGV2aWNlLmJyb3dzZXIuY2hyb21lfHxzYXAudWkuRGV2aWNlLmJyb3dzZXIudmVyc2lvbj4yOCl7alF1ZXJ5LnN1cHBvcnQuZmxleEJveFByZWZpeGVkPWZhbHNlfX1yZXR1cm59ZWxzZXtsPWwuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrbC5zbGljZSgxKTtmb3IodmFyIGkgaW4gcCl7aWYoa1twW2ldK2xdIT09dW5kZWZpbmVkKXtqUXVlcnkuc3VwcG9ydFtkXT10cnVlO3JldHVybn19fWpRdWVyeS5zdXBwb3J0W2RdPWZhbHNlfX07cSgiY3NzVHJhbnNmb3JtcyIsInRyYW5zZm9ybSIpO3EoImNzc1RyYW5zZm9ybXMzZCIsInBlcnNwZWN0aXZlIik7cSgiY3NzVHJhbnNpdGlvbnMiLCJ0cmFuc2l0aW9uIik7cSgiY3NzQW5pbWF0aW9ucyIsImFuaW1hdGlvbk5hbWUiKTtpZihqUXVlcnkuc3VwcG9ydC5jc3NHcmFkaWVudHM9PT11bmRlZmluZWQpe3ZhciBFPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpLGs9RS5zdHlsZTt0cnl7ay5iYWNrZ3JvdW5kSW1hZ2U9ImxpbmVhci1ncmFkaWVudChsZWZ0IHRvcCwgcmVkLCB3aGl0ZSkiO2suYmFja2dyb3VuZEltYWdlPSItbW96LWxpbmVhci1ncmFkaWVudChsZWZ0IHRvcCwgcmVkLCB3aGl0ZSkiO2suYmFja2dyb3VuZEltYWdlPSItd2Via2l0LWxpbmVhci1ncmFkaWVudChsZWZ0IHRvcCwgcmVkLCB3aGl0ZSkiO2suYmFja2dyb3VuZEltYWdlPSItbXMtbGluZWFyLWdyYWRpZW50KGxlZnQgdG9wLCByZWQsIHdoaXRlKSI7ay5iYWNrZ3JvdW5kSW1hZ2U9Ii13ZWJraXQtZ3JhZGllbnQobGluZWFyLCBsZWZ0IHRvcCwgcmlnaHQgYm90dG9tLCBmcm9tKHJlZCksIHRvKHdoaXRlKSkifWNhdGNoKGUpe31qUXVlcnkuc3VwcG9ydC5jc3NHcmFkaWVudHM9KGsuYmFja2dyb3VuZEltYWdlJiZrLmJhY2tncm91bmRJbWFnZS5pbmRleE9mKCJncmFkaWVudCIpPi0xKTtFPW51bGx9alF1ZXJ5LnN1cHBvcnQuZmxleEJveFByZWZpeGVkPXRydWU7cSgiZmxleEJveExheW91dCIsImJveEZsZXgiKTtpZihrLm1zRmxleE9yZGVyIT09dW5kZWZpbmVkKXtqUXVlcnkuc3VwcG9ydC5pZTEwRmxleEJveExheW91dD10cnVlfXEoIm5ld0ZsZXhCb3hMYXlvdXQiLCJmbGV4R3JvdyIpO2lmKGpRdWVyeS5zdXBwb3J0LmZsZXhCb3hMYXlvdXR8fGpRdWVyeS5zdXBwb3J0Lm5ld0ZsZXhCb3hMYXlvdXR8fGpRdWVyeS5zdXBwb3J0LmllMTBGbGV4Qm94TGF5b3V0KXtqUXVlcnkuc3VwcG9ydC5oYXNGbGV4Qm94U3VwcG9ydD10cnVlfWVsc2V7alF1ZXJ5LnN1cHBvcnQuaGFzRmxleEJveFN1cHBvcnQ9ZmFsc2V9aWYoIWpRdWVyeS5zdXBwb3J0Lm9wYWNpdHkpeyhmdW5jdGlvbigpe3ZhciBvPWpRdWVyeS5jc3NIb29rcy5vcGFjaXR5LnNldDtqUXVlcnkuY3NzSG9va3Mub3BhY2l0eS5zZXQ9ZnVuY3Rpb24oZCx2KXtvLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtpZighalF1ZXJ5LnRyaW0oZC5zdHlsZS5maWx0ZXIpKXtkLnN0eWxlLnJlbW92ZUF0dHJpYnV0ZSgiZmlsdGVyIil9fX0oKSl9ZnVuY3Rpb24gUCgpe2Z1bmN0aW9uIE0oaSxJLHMsbCl7dGhpcy5pZD1pO3RoaXMuaW5mbz1JO3RoaXMuc3RhcnQ9czt0aGlzLmVuZD1sO3RoaXMucGF1c2U9MDt0aGlzLnJlc3VtZT0wO3RoaXMuZHVyYXRpb249MDt0aGlzLnRpbWU9MH12YXIgQT1mYWxzZTt2YXIgZD1qUXVlcnkuYWpheDt0aGlzLmdldEFjdGl2ZT1mdW5jdGlvbigpe3JldHVybiBBfTt0aGlzLnNldEFjdGl2ZT1mdW5jdGlvbihvKXtpZihBPT1vKXtyZXR1cm4gQX1BPW87aWYoQSl7alF1ZXJ5LmFqYXg9ZnVuY3Rpb24odSxpKXtqUXVlcnkuc2FwLm1lYXN1cmUuc3RhcnQodS51cmwsIlJlcXVlc3QgZm9yICIrdS51cmwpO2QuYXBwbHkodGhpcyxhcmd1bWVudHMpO2pRdWVyeS5zYXAubWVhc3VyZS5lbmQodS51cmwpfX1lbHNlIGlmKGQpe2pRdWVyeS5hamF4PWR9cmV0dXJuIEF9O3RoaXMuc2V0QWN0aXZlKC9zYXAtdWktbWVhc3VyZT0odHJ1ZXx4fFgpLy50ZXN0KGxvY2F0aW9uLnNlYXJjaCkpO3RoaXMubU1lYXN1cmVtZW50cz17fTt0aGlzLnN0YXJ0PWZ1bmN0aW9uKGksSSl7aWYoIUEpe3JldHVybn12YXIgdD1uZXcgRGF0ZSgpLmdldFRpbWUoKTt2YXIgbT1uZXcgTShpLEksdCwwKTtpZihtKXt0aGlzLm1NZWFzdXJlbWVudHNbaV09bTtyZXR1cm4oe2lkOm0uaWQsaW5mbzptLmluZm8sc3RhcnQ6bS5zdGFydH0pfWVsc2V7cmV0dXJuIGZhbHNlfX07dGhpcy5wYXVzZT1mdW5jdGlvbihpKXtpZighQSl7cmV0dXJufXZhciB0PW5ldyBEYXRlKCkuZ2V0VGltZSgpO3ZhciBtPXRoaXMubU1lYXN1cmVtZW50c1tpXTtpZihtJiZtLmVuZD4wKXtyZXR1cm4gZmFsc2V9aWYobSYmbS5wYXVzZT09MCl7bS5wYXVzZT10O2lmKG0ucGF1c2U+PW0ucmVzdW1lJiZtLnJlc3VtZT4wKXttLmR1cmF0aW9uPW0uZHVyYXRpb24rbS5wYXVzZS1tLnJlc3VtZTttLnJlc3VtZT0wfWVsc2UgaWYobS5wYXVzZT49bS5zdGFydCl7bS5kdXJhdGlvbj1tLnBhdXNlLW0uc3RhcnR9fWlmKG0pe3JldHVybih7aWQ6bS5pZCxpbmZvOm0uaW5mbyxzdGFydDptLnN0YXJ0LHBhdXNlOm0ucGF1c2V9KX1lbHNle3JldHVybiBmYWxzZX19O3RoaXMucmVzdW1lPWZ1bmN0aW9uKGkpe2lmKCFBKXtyZXR1cm59dmFyIHQ9bmV3IERhdGUoKS5nZXRUaW1lKCk7dmFyIG09dGhpcy5tTWVhc3VyZW1lbnRzW2ldO2lmKG0mJm0ucGF1c2U+MCl7bS5wYXVzZT0wO20ucmVzdW1lPXR9aWYobSl7cmV0dXJuKHtpZDptLmlkLGluZm86bS5pbmZvLHN0YXJ0Om0uc3RhcnQscmVzdW1lOm0ucmVzdW1lfSl9ZWxzZXtyZXR1cm4gZmFsc2V9fTt0aGlzLmVuZD1mdW5jdGlvbihpKXtpZighQSl7cmV0dXJufXZhciB0PW5ldyBEYXRlKCkuZ2V0VGltZSgpO3ZhciBtPXRoaXMubU1lYXN1cmVtZW50c1tpXTtpZihtJiYhbS5lbmQpe20uZW5kPXQ7aWYobS5lbmQ+PW0ucmVzdW1lJiZtLnJlc3VtZT4wKXttLmR1cmF0aW9uPW0uZHVyYXRpb24rbS5lbmQtbS5yZXN1bWU7bS5yZXN1bWU9MH1lbHNlIGlmKG0ucGF1c2U+MCl7bS5wYXVzZT0wfWVsc2UgaWYobS5lbmQ+PW0uc3RhcnQpe20uZHVyYXRpb249bS5lbmQtbS5zdGFydH1pZihtLmVuZD49bS5zdGFydCl7bS50aW1lPW0uZW5kLW0uc3RhcnR9fWlmKG0pe3JldHVybih7aWQ6bS5pZCxpbmZvOm0uaW5mbyxzdGFydDptLnN0YXJ0LGVuZDptLmVuZCx0aW1lOm0udGltZSxkdXJhdGlvbjptLmR1cmF0aW9ufSl9ZWxzZXtyZXR1cm4gZmFsc2V9fTt0aGlzLmdldE1lYXN1cmVtZW50PWZ1bmN0aW9uKGkpe2lmKCFBKXtyZXR1cm59dmFyIG09dGhpcy5tTWVhc3VyZW1lbnRzW2ldO2lmKG0pe3JldHVybih7aWQ6bS5pZCxpbmZvOm0uaW5mbyxzdGFydDptLnN0YXJ0LGVuZDptLmVuZCx0aW1lOm0udGltZSxkdXJhdGlvbjptLmR1cmF0aW9ufSl9ZWxzZXtyZXR1cm4gZmFsc2V9fTt0aGlzLmNsZWFyPWZ1bmN0aW9uKCl7aWYoIUEpe3JldHVybn10aGlzLm1NZWFzdXJlbWVudHM9e319O3RoaXMucmVtb3ZlPWZ1bmN0aW9uKGkpe2lmKCFBKXtyZXR1cm59ZGVsZXRlIHRoaXMubU1lYXN1cmVtZW50c1tpXX07dGhpcy5nZXRBbGxNZWFzdXJlbWVudHM9ZnVuY3Rpb24oKXtpZighQSl7cmV0dXJufXZhciBtPW5ldyBBcnJheSgpO2pRdWVyeS5lYWNoKHRoaXMubU1lYXN1cmVtZW50cyxmdW5jdGlvbihpLG8pe20ucHVzaCh7aWQ6by5pZCxpbmZvOm8uaW5mbyxzdGFydDpvLnN0YXJ0LGVuZDpvLmVuZCxkdXJhdGlvbjpvLmR1cmF0aW9uLHRpbWU6by50aW1lfSl9KTtyZXR1cm4gbX07dGhpcy5hZGQ9ZnVuY3Rpb24oaSxJLHMsbCx0LEQpe2lmKCFBKXtyZXR1cm59dmFyIG09bmV3IE0oaSxJLHMsbCk7bS50aW1lPXQ7bS5kdXJhdGlvbj1EO2lmKG0pe3RoaXMubU1lYXN1cmVtZW50c1tpXT1tO3JldHVybih7aWQ6bS5pZCxpbmZvOm0uaW5mbyxzdGFydDptLnN0YXJ0LGVuZDptLmVuZCx0aW1lOm0udGltZSxkdXJhdGlvbjptLmR1cmF0aW9ufSl9ZWxzZXtyZXR1cm4gZmFsc2V9fX1qUXVlcnkuc2FwLm1lYXN1cmU9bmV3IFAoKX0oKSk7DQpqUXVlcnkuc2FwLmdsb2JhbEV2YWw9ZnVuY3Rpb24oKXtldmFsKGFyZ3VtZW50c1swXSl9Ow0KalF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAtdWktY29yZS1hbGwnKTtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5EZXZpY2UnKTtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS50aGlyZHBhcnR5LlNlY29uZExldmVsRG9tYWlucycpO2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLnRoaXJkcGFydHkuVVJJJyk7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkudGhpcmRwYXJ0eS5jYWphLWh0bWwtc2FuaXRpemVyJyk7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkudGhpcmRwYXJ0eS5qcXVlcnkuanF1ZXJ5LTEuMTEuMScpO2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLnRoaXJkcGFydHkuanF1ZXJ5dWkuanF1ZXJ5LXVpLWNvcmUnKTtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS50aGlyZHBhcnR5LmpxdWVyeXVpLmpxdWVyeS11aS1kYXRlcGlja2VyJyk7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkudGhpcmRwYXJ0eS5qcXVlcnl1aS5qcXVlcnktdWktcG9zaXRpb24nKTtqUXVlcnkuc2FwLmRlY2xhcmUoJ2pxdWVyeS5zYXAucHJvbWlzZScpO2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLnRoaXJkcGFydHkuanF1ZXJ5LW1vYmlsZS1jdXN0b20nKTtqUXVlcnkuc2FwLmRlY2xhcmUoJ2pxdWVyeS5zYXAuZ2xvYmFsJyk7aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnanF1ZXJ5LnNhcC5rZXljb2RlcycpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ2pxdWVyeS5zYXAua2V5Y29kZXMnKTtzYXAudWkuZGVmaW5lKCJqcXVlcnkuc2FwLmtleWNvZGVzIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJ10sZnVuY3Rpb24ocSl7InVzZSBzdHJpY3QiO3Euc2FwLktleUNvZGVzPXtCQUNLU1BBQ0U6OCxUQUI6OSxFTlRFUjoxMyxTSElGVDoxNixDT05UUk9MOjE3LEFMVDoxOCxCUkVBSzoxOSxDQVBTX0xPQ0s6MjAsRVNDQVBFOjI3LFNQQUNFOjMyLFBBR0VfVVA6MzMsUEFHRV9ET1dOOjM0LEVORDozNSxIT01FOjM2LEFSUk9XX0xFRlQ6MzcsQVJST1dfVVA6MzgsQVJST1dfUklHSFQ6MzksQVJST1dfRE9XTjo0MCxQUklOVDo0NCxJTlNFUlQ6NDUsREVMRVRFOjQ2LERJR0lUXzA6NDgsRElHSVRfMTo0OSxESUdJVF8yOjUwLERJR0lUXzM6NTEsRElHSVRfNDo1MixESUdJVF81OjUzLERJR0lUXzY6NTQsRElHSVRfNzo1NSxESUdJVF84OjU2LERJR0lUXzk6NTcsQTo2NSxCOjY2LEM6NjcsRDo2OCxFOjY5LEY6NzAsRzo3MSxIOjcyLEk6NzMsSjo3NCxLOjc1LEw6NzYsTTo3NyxOOjc4LE86NzksUDo4MCxROjgxLFI6ODIsUzo4MyxUOjg0LFU6ODUsVjo4NixXOjg3LFg6ODgsWTo4OSxaOjkwLFdJTkRPV1M6OTEsQ09OVEVYVF9NRU5VOjkzLFRVUk5fT0ZGOjk0LFNMRUVQOjk1LE5VTVBBRF8wOjk2LE5VTVBBRF8xOjk3LE5VTVBBRF8yOjk4LE5VTVBBRF8zOjk5LE5VTVBBRF80OjEwMCxOVU1QQURfNToxMDEsTlVNUEFEXzY6MTAyLE5VTVBBRF83OjEwMyxOVU1QQURfODoxMDQsTlVNUEFEXzk6MTA1LE5VTVBBRF9BU1RFUklTSzoxMDYsTlVNUEFEX1BMVVM6MTA3LE5VTVBBRF9NSU5VUzoxMDksTlVNUEFEX0NPTU1BOjExMCxOVU1QQURfU0xBU0g6MTExLEYxOjExMixGMjoxMTMsRjM6MTE0LEY0OjExNSxGNToxMTYsRjY6MTE3LEY3OjExOCxGODoxMTksRjk6MTIwLEYxMDoxMjEsRjExOjEyMixGMTI6MTIzLE5VTV9MT0NLOjE0NCxTQ1JPTExfTE9DSzoxNDUsT1BFTl9CUkFDS0VUOjE4NixQTFVTOjE4NyxDT01NQToxODgsU0xBU0g6MTg5LERPVDoxOTAsUElQRToxOTEsU0VNSUNPTE9OOjE5MixNSU5VUzoyMTksR1JFQVRfQUNDRU5UOjIyMCxFUVVBTFM6MjIxLFNJTkdMRV9RVU9URToyMjIsQkFDS1NMQVNIOjIyNn07cmV0dXJuIHF9LGZhbHNlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnanF1ZXJ5LnNhcC5sb2dnZXInKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCJqcXVlcnkuc2FwLmxvZ2dlciIsZmFsc2UpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdqcXVlcnkuc2FwLnNjcmlwdCcpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ2pxdWVyeS5zYXAuc2NyaXB0Jyk7c2FwLnVpLmRlZmluZSgianF1ZXJ5LnNhcC5zY3JpcHQiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnXSxmdW5jdGlvbihxKXsidXNlIHN0cmljdCI7dmFyIEk9MDtxLnNhcC51aWQ9ZnVuY3Rpb24gdWlkKCl7cmV0dXJuImlkLSIrbmV3IERhdGUoKS52YWx1ZU9mKCkrIi0iK0krK307cS5zYXAuZGVsYXllZENhbGw9ZnVuY3Rpb24gZGVsYXllZENhbGwoZCxvLG0scCl7cmV0dXJuIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtpZihxLnR5cGUobSk9PSJzdHJpbmciKXttPW9bbV19bS5hcHBseShvLHB8fFtdKX0sZCl9O3Euc2FwLmNsZWFyRGVsYXllZENhbGw9ZnVuY3Rpb24gY2xlYXJEZWxheWVkQ2FsbChkKXtjbGVhclRpbWVvdXQoZCk7cmV0dXJuIHRoaXN9O3Euc2FwLmludGVydmFsQ2FsbD1mdW5jdGlvbiBpbnRlcnZhbENhbGwoaSxvLG0scCl7cmV0dXJuIHNldEludGVydmFsKGZ1bmN0aW9uKCl7aWYocS50eXBlKG0pPT0ic3RyaW5nIil7bT1vW21dfW0uYXBwbHkobyxwfHxbXSl9LGkpfTtxLnNhcC5jbGVhckludGVydmFsQ2FsbD1mdW5jdGlvbiBjbGVhckludGVydmFsQ2FsbChpKXtjbGVhckludGVydmFsKGkpO3JldHVybiB0aGlzfTt2YXIgVT1mdW5jdGlvbih1KXt0aGlzLm1QYXJhbXM9e307dmFyIFE9dXx8d2luZG93LmxvY2F0aW9uLmhyZWY7aWYoUS5pbmRleE9mKCcjJyk+PTApe1E9US5zbGljZSgwLFEuaW5kZXhPZignIycpKX1pZihRLmluZGV4T2YoIj8iKT49MCl7UT1RLnNsaWNlKFEuaW5kZXhPZigiPyIpKzEpO3ZhciBwPVEuc3BsaXQoIiYiKSxQPXt9LGEsbix2O2Zvcih2YXIgaT0wO2k8cC5sZW5ndGg7aSsrKXthPXBbaV0uc3BsaXQoIj0iKTtuPWRlY29kZVVSSUNvbXBvbmVudChhWzBdKTt2PWEubGVuZ3RoPjE/ZGVjb2RlVVJJQ29tcG9uZW50KGFbMV0ucmVwbGFjZSgvXCsvZywnICcpKToiIjtpZihuKXtpZighT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKFAsbikpe1Bbbl09W119UFtuXS5wdXNoKHYpfX10aGlzLm1QYXJhbXM9UH19O1UucHJvdG90eXBlPXt9O1UucHJvdG90eXBlLmdldD1mdW5jdGlvbihuLGEpe3ZhciB2PU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0aGlzLm1QYXJhbXMsbik/dGhpcy5tUGFyYW1zW25dOltdO3JldHVybiBhPT09dHJ1ZT92Oih2WzBdfHxudWxsKX07cS5zYXAuZ2V0VXJpUGFyYW1ldGVycz1mdW5jdGlvbiBnZXRVcmlQYXJhbWV0ZXJzKHUpe3JldHVybiBuZXcgVSh1KX07cS5zYXAudW5pcXVlPWZ1bmN0aW9uKGEpe3ZhciBsPWEubGVuZ3RoO2lmKGw+MSl7YS5zb3J0KCk7Zm9yKHZhciBpPTEsaj0wO2k8bDtpKyspe2lmKGFbaV0hPT1hW2pdKXthWysral09YVtpXX19aWYoKytqPGwpe2Euc3BsaWNlKGosbC1qKX19cmV0dXJuIGF9O3Euc2FwLmVxdWFsPWZ1bmN0aW9uKGEsYixtLGMsZCl7aWYodHlwZW9mIG09PSJib29sZWFuIil7Yz1tO209dW5kZWZpbmVkfWlmKCFkKWQ9MDtpZighbSltPTEwO2lmKGQ+bSlyZXR1cm4gZmFsc2U7aWYoYT09PWIpcmV0dXJuIHRydWU7aWYocS5pc0FycmF5KGEpJiZxLmlzQXJyYXkoYikpe2lmKCFjKXtpZihhLmxlbmd0aCE9Yi5sZW5ndGgpe3JldHVybiBmYWxzZX19ZWxzZXtpZihhLmxlbmd0aD5iLmxlbmd0aCl7cmV0dXJuIGZhbHNlfX1mb3IodmFyIGk9MDtpPGEubGVuZ3RoO2krKyl7aWYoIXEuc2FwLmVxdWFsKGFbaV0sYltpXSxtLGMsZCsxKSl7cmV0dXJuIGZhbHNlfX1yZXR1cm4gdHJ1ZX1pZih0eXBlb2YgYT09Im9iamVjdCImJnR5cGVvZiBiPT0ib2JqZWN0Iil7aWYoIWF8fCFiKXtyZXR1cm4gZmFsc2V9aWYoYS5jb25zdHJ1Y3RvciE9Yi5jb25zdHJ1Y3Rvcil7cmV0dXJuIGZhbHNlfWlmKGEubm9kZU5hbWUmJmIubm9kZU5hbWUmJmEubmFtZXNwYWNlVVJJJiZiLm5hbWVzcGFjZVVSSSl7cmV0dXJuIHEuc2FwLmlzRXF1YWxOb2RlKGEsYil9aWYoYSBpbnN0YW5jZW9mIERhdGUpe3JldHVybiBhLnZhbHVlT2YoKT09Yi52YWx1ZU9mKCl9Zm9yKHZhciBpIGluIGEpe2lmKCFxLnNhcC5lcXVhbChhW2ldLGJbaV0sbSxjLGQrMSkpe3JldHVybiBmYWxzZX19aWYoIWMpe2Zvcih2YXIgaSBpbiBiKXtpZihhW2ldPT09dW5kZWZpbmVkKXtyZXR1cm4gZmFsc2V9fX1yZXR1cm4gdHJ1ZX1yZXR1cm4gZmFsc2V9O3Euc2FwLmVhY2g9ZnVuY3Rpb24obyxjKXt2YXIgYT1xLmlzQXJyYXkobyksbCxpO2lmKGEpe2ZvcihpPTAsbD1vLmxlbmd0aDtpPGw7aSsrKXtpZihjLmNhbGwob1tpXSxpLG9baV0pPT09ZmFsc2Upe2JyZWFrfX19ZWxzZXtmb3IoaSBpbiBvKXtpZihjLmNhbGwob1tpXSxpLG9baV0pPT09ZmFsc2Upe2JyZWFrfX19cmV0dXJuIG99O3Euc2FwLmZvckluPXt0b1N0cmluZzpudWxsfS5wcm9wZXJ0eUlzRW51bWVyYWJsZSgidG9TdHJpbmciKT9mdW5jdGlvbihvLGMpe2Zvcih2YXIgbiBpbiBvKXtpZihjKG4sb1tuXSk9PT1mYWxzZSl7cmV0dXJufX19OihmdW5jdGlvbigpe3ZhciBEPVsidG9TdHJpbmciLCJ2YWx1ZU9mIiwidG9Mb2NhbGVTdHJpbmciLCJoYXNPd25Qcm9wZXJ0eSIsImlzUHJvdG90eXBlT2YiLCJwcm9wZXJ0eUlzRW51bWVyYWJsZSIsImNvbnN0cnVjdG9yIl0sYT1ELmxlbmd0aCxvPU9iamVjdC5wcm90b3R5cGUsaD1vLmhhc093blByb3BlcnR5O3JldHVybiBmdW5jdGlvbihPLGMpe3ZhciBuLGk7Zm9yKG4gaW4gTyl7aWYoYyhuLE9bbl0pPT09ZmFsc2Upe3JldHVybn19Zm9yKHZhciBpPTA7aTxhO2krKyl7bj1EW2ldO2lmKGguY2FsbChPLG4pfHxPW25dIT09b1tuXSl7aWYoYyhuLE9bbl0pPT09ZmFsc2Upe3JldHVybn19fX19KCkpO3Euc2FwLmFycmF5RGlmZj1mdW5jdGlvbihvLG4sYyl7Yz1jfHxmdW5jdGlvbih2LFYpe3JldHVybiBxLnNhcC5lcXVhbCh2LFYpfTt2YXIgTz1bXTt2YXIgTj1bXTt2YXIgbT1bXTtmb3IodmFyIGk9MDtpPG4ubGVuZ3RoO2krKyl7dmFyIGE9bltpXTt2YXIgZj0wO3ZhciB0O2Zvcih2YXIgaj0wO2o8by5sZW5ndGg7aisrKXtpZihjKG9bal0sYSkpe2YrKzt0PWo7aWYoZj4xKXticmVha319fWlmKGY9PTEpe3ZhciBNPXtvbGRJbmRleDp0LG5ld0luZGV4Oml9O2lmKG1bdF0pe2RlbGV0ZSBPW3RdO2RlbGV0ZSBOW21bdF0ubmV3SW5kZXhdfWVsc2V7TltpXT17ZGF0YTpuW2ldLHJvdzp0fTtPW3RdPXtkYXRhOm9bdF0scm93Oml9O21bdF09TX19fWZvcih2YXIgaT0wO2k8bi5sZW5ndGgtMTtpKyspe2lmKE5baV0mJiFOW2krMV0mJk5baV0ucm93KzE8by5sZW5ndGgmJiFPW05baV0ucm93KzFdJiZjKG9bTltpXS5yb3crMV0sbltpKzFdKSl7TltpKzFdPXtkYXRhOm5baSsxXSxyb3c6TltpXS5yb3crMX07T1tOW2ldLnJvdysxXT17ZGF0YTpPW05baV0ucm93KzFdLHJvdzppKzF9fX1mb3IodmFyIGk9bi5sZW5ndGgtMTtpPjA7aS0tKXtpZihOW2ldJiYhTltpLTFdJiZOW2ldLnJvdz4wJiYhT1tOW2ldLnJvdy0xXSYmYyhvW05baV0ucm93LTFdLG5baS0xXSkpe05baS0xXT17ZGF0YTpuW2ktMV0scm93Ok5baV0ucm93LTF9O09bTltpXS5yb3ctMV09e2RhdGE6T1tOW2ldLnJvdy0xXSxyb3c6aS0xfX19dmFyIGQ9W107aWYobi5sZW5ndGg9PTApe2Zvcih2YXIgaT0wO2k8by5sZW5ndGg7aSsrKXtkLnB1c2goe2luZGV4OjAsdHlwZTonZGVsZXRlJ30pfX1lbHNle3ZhciBiPTA7aWYoIU9bMF0pe2Zvcih2YXIgaT0wO2k8by5sZW5ndGgmJiFPW2ldO2krKyl7ZC5wdXNoKHtpbmRleDowLHR5cGU6J2RlbGV0ZSd9KTtiPWkrMX19Zm9yKHZhciBpPTA7aTxuLmxlbmd0aDtpKyspe2lmKCFOW2ldfHxOW2ldLnJvdz5iKXtkLnB1c2goe2luZGV4OmksdHlwZTonaW5zZXJ0J30pfWVsc2V7Yj1OW2ldLnJvdysxO2Zvcih2YXIgaj1OW2ldLnJvdysxO2o8by5sZW5ndGgmJighT1tqXXx8T1tqXS5yb3c8aSk7aisrKXtkLnB1c2goe2luZGV4OmkrMSx0eXBlOidkZWxldGUnfSk7Yj1qKzF9fX19cmV0dXJuIGR9O3Euc2FwLnBhcnNlSlM9KGZ1bmN0aW9uKCl7dmFyIGEsYixlPXsnIic6JyInLCdcJyc6J1wnJywnXFwnOidcXCcsJy8nOicvJyxiOidcYicsZjonXGYnLG46J1xuJyxyOidccicsdDonXHQnfSx0LGQ9ZnVuY3Rpb24obSl7dGhyb3d7bmFtZTonU3ludGF4RXJyb3InLG1lc3NhZ2U6bSxhdDphLHRleHQ6dH19LG49ZnVuY3Rpb24oYyl7aWYoYyYmYyE9PWIpe2QoIkV4cGVjdGVkICciK2MrIicgaW5zdGVhZCBvZiAnIitiKyInIil9Yj10LmNoYXJBdChhKTthKz0xO3JldHVybiBifSxmPWZ1bmN0aW9uKCl7dmFyIGYscz0nJztpZihiPT09Jy0nKXtzPSctJztuKCctJyl9d2hpbGUoYj49JzAnJiZiPD0nOScpe3MrPWI7bigpfWlmKGI9PT0nLicpe3MrPScuJzt3aGlsZShuKCkmJmI+PScwJyYmYjw9JzknKXtzKz1ifX1pZihiPT09J2UnfHxiPT09J0UnKXtzKz1iO24oKTtpZihiPT09Jy0nfHxiPT09JysnKXtzKz1iO24oKX13aGlsZShiPj0nMCcmJmI8PSc5Jyl7cys9YjtuKCl9fWY9K3M7aWYoIWlzRmluaXRlKGYpKXtkKCJCYWQgbnVtYmVyIil9ZWxzZXtyZXR1cm4gZn19LHM9ZnVuY3Rpb24oKXt2YXIgYyxpLHM9Jycsayx1O2lmKGI9PT0nIid8fGI9PT0nXCcnKXtrPWI7d2hpbGUobigpKXtpZihiPT09ayl7bigpO3JldHVybiBzfWlmKGI9PT0nXFwnKXtuKCk7aWYoYj09PSd1Jyl7dT0wO2ZvcihpPTA7aTw0O2krPTEpe2M9cGFyc2VJbnQobigpLDE2KTtpZighaXNGaW5pdGUoYykpe2JyZWFrfXU9dSoxNitjfXMrPVN0cmluZy5mcm9tQ2hhckNvZGUodSl9ZWxzZSBpZih0eXBlb2YgZVtiXT09PSdzdHJpbmcnKXtzKz1lW2JdfWVsc2V7YnJlYWt9fWVsc2V7cys9Yn19fWQoIkJhZCBzdHJpbmciKX0sZz1mdW5jdGlvbigpe3ZhciBnPScnLGMsaT1mdW5jdGlvbihiKXtyZXR1cm4gYj09PSJfInx8KGI+PSIwIiYmYjw9IjkiKXx8KGI+PSJhIiYmYjw9InoiKXx8KGI+PSJBIiYmYjw9IloiKX07aWYoaShiKSl7Zys9Yn1lbHNle2QoIkJhZCBuYW1lIil9d2hpbGUobigpKXtpZihiPT09JyAnKXtuKCk7cmV0dXJuIGd9aWYoYj09PSc6Jyl7cmV0dXJuIGd9aWYoaShiKSl7Zys9Yn1lbHNle2QoIkJhZCBuYW1lIil9fWQoIkJhZCBuYW1lIil9LHc9ZnVuY3Rpb24oKXt3aGlsZShiJiZiPD0nICcpe24oKX19LGg9ZnVuY3Rpb24oKXtzd2l0Y2goYil7Y2FzZSd0JzpuKCd0Jyk7bigncicpO24oJ3UnKTtuKCdlJyk7cmV0dXJuIHRydWU7Y2FzZSdmJzpuKCdmJyk7bignYScpO24oJ2wnKTtuKCdzJyk7bignZScpO3JldHVybiBmYWxzZTtjYXNlJ24nOm4oJ24nKTtuKCd1Jyk7bignbCcpO24oJ2wnKTtyZXR1cm4gbnVsbH1kKCJVbmV4cGVjdGVkICciK2IrIiciKX0sdixqPWZ1bmN0aW9uKCl7dmFyIGo9W107aWYoYj09PSdbJyl7bignWycpO3coKTtpZihiPT09J10nKXtuKCddJyk7cmV0dXJuIGp9d2hpbGUoYil7ai5wdXNoKHYoKSk7dygpO2lmKGI9PT0nXScpe24oJ10nKTtyZXR1cm4gan1uKCcsJyk7dygpfX1kKCJCYWQgYXJyYXkiKX0sbz1mdW5jdGlvbigpe3ZhciBrLG89e307aWYoYj09PSd7Jyl7bigneycpO3coKTtpZihiPT09J30nKXtuKCd9Jyk7cmV0dXJuIG99d2hpbGUoYil7aWYoYj49IjAiJiZiPD0iOSIpe2s9ZigpfWVsc2UgaWYoYj09PSciJ3x8Yj09PSdcJycpe2s9cygpfWVsc2V7az1nKCl9dygpO24oJzonKTtpZihPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChvLGspKXtkKCdEdXBsaWNhdGUga2V5ICInK2srJyInKX1vW2tdPXYoKTt3KCk7aWYoYj09PSd9Jyl7bignfScpO3JldHVybiBvfW4oJywnKTt3KCl9fWQoIkJhZCBvYmplY3QiKX07dj1mdW5jdGlvbigpe3coKTtzd2l0Y2goYil7Y2FzZSd7JzpyZXR1cm4gbygpO2Nhc2UnWyc6cmV0dXJuIGooKTtjYXNlJyInOmNhc2UnXCcnOnJldHVybiBzKCk7Y2FzZSctJzpyZXR1cm4gZigpO2RlZmF1bHQ6cmV0dXJuIGI+PScwJyYmYjw9JzknP2YoKTpoKCl9fTtyZXR1cm4gZnVuY3Rpb24oYyxpKXt2YXIgcjt0PWM7YT1pfHwwO2I9JyAnO3I9digpO2lmKGlzTmFOKGkpKXt3KCk7aWYoYil7ZCgiU3ludGF4IGVycm9yIil9cmV0dXJuIHJ9ZWxzZXtyZXR1cm57cmVzdWx0OnIsYXQ6YS0xfX19fSgpKTtyZXR1cm4gcX0sZmFsc2UpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdqcXVlcnkuc2FwLnNqYXgnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdqcXVlcnkuc2FwLnNqYXgnKTtzYXAudWkuZGVmaW5lKCJqcXVlcnkuc2FwLnNqYXgiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnXSxmdW5jdGlvbihxKXsidXNlIHN0cmljdCI7cS5zYXAuc2pheFNldHRpbmdzPXtjb21wbGV4UmVzdWx0OnRydWUsZmFsbGJhY2s6dW5kZWZpbmVkfTtxLnNhcC5zamF4PWZ1bmN0aW9uIHNqYXgobyl7dmFyIHM9cS5leHRlbmQodHJ1ZSx7fSxxLnNhcC5zamF4U2V0dGluZ3Msbyx7YXN5bmM6ZmFsc2Usc3VjY2VzczpmdW5jdGlvbihkLHQseCl7cj17c3VjY2Vzczp0cnVlLGRhdGE6ZCxzdGF0dXM6dCxzdGF0dXNDb2RlOngmJnguc3RhdHVzfX0sZXJyb3I6ZnVuY3Rpb24oeCx0LGUpe3I9e3N1Y2Nlc3M6ZmFsc2UsZGF0YTp1bmRlZmluZWQsc3RhdHVzOnQsZXJyb3I6ZSxzdGF0dXNDb2RlOnguc3RhdHVzfX19KTt2YXIgcj11bmRlZmluZWQ7cS5hamF4KHMpO2lmKCFzLmNvbXBsZXhSZXN1bHQpe3JldHVybiByLnN1Y2Nlc3M/ci5kYXRhOnMuZmFsbGJhY2t9cmV0dXJuIHJ9O3Euc2FwLnN5bmNIZWFkPWZ1bmN0aW9uKHUpe3JldHVybiBxLnNhcC5zamF4KHt0eXBlOidIRUFEJyx1cmw6dX0pLnN1Y2Nlc3N9O3Euc2FwLnN5bmNHZXQ9ZnVuY3Rpb24gc3luY0dldCh1LGQsRCl7cmV0dXJuIHEuc2FwLnNqYXgoe3VybDp1LGRhdGE6ZCx0eXBlOidHRVQnLGRhdGFUeXBlOkR8fCd0ZXh0J30pfTtxLnNhcC5zeW5jUG9zdD1mdW5jdGlvbiBzeW5jUG9zdCh1LGQsRCl7cmV0dXJuIHEuc2FwLnNqYXgoe3VybDp1LGRhdGE6ZCx0eXBlOidQT1NUJyxkYXRhVHlwZTpEfHwndGV4dCd9KX07cS5zYXAuc3luY0dldFRleHQ9ZnVuY3Rpb24gc3luY0dldFRleHQodSxkLGYpe3JldHVybiBxLnNhcC5zamF4KHt1cmw6dSxkYXRhOmQsdHlwZTonR0VUJyxkYXRhVHlwZTondGV4dCcsZmFsbGJhY2s6Zixjb21wbGV4UmVzdWx0Oihhcmd1bWVudHMubGVuZ3RoPDMpfSl9O3Euc2FwLnN5bmNHZXRKU09OPWZ1bmN0aW9uIHN5bmNHZXRKU09OKHUsZCxmKXtyZXR1cm4gcS5zYXAuc2pheCh7dXJsOnUsZGF0YTpkfHxudWxsLHR5cGU6J0dFVCcsZGF0YVR5cGU6J2pzb24nLGZhbGxiYWNrOmYsY29tcGxleFJlc3VsdDooYXJndW1lbnRzLmxlbmd0aDwzKX0pfTtyZXR1cm4gcX0sZmFsc2UpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdqcXVlcnkuc2FwLnN0b3JhZ2UnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdqcXVlcnkuc2FwLnN0b3JhZ2UnKTtzYXAudWkuZGVmaW5lKCJqcXVlcnkuc2FwLnN0b3JhZ2UiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnXSxmdW5jdGlvbihxKXsidXNlIHN0cmljdCI7dmFyIHM9ISEod2luZG93LkpTT04mJkpTT04ucGFyc2UmJkpTT04uc3RyaW5naWZ5KTt2YXIgUz0ic3RhdGUua2V5XyI7dmFyIGY9ZnVuY3Rpb24oYSxiKXt2YXIgdD0idW5rbm93biIsUD1ifHxTO1ArPSItIjt2YXIgVD1QKyJfX19zYXB1aTVURVNUX19fIixjPXRydWUsbztpZighYXx8dHlwZW9mKGEpPT09InN0cmluZyIpe3Q9YXx8InNlc3Npb24iO3RyeXtvPXdpbmRvd1t0KyJTdG9yYWdlIl19Y2F0Y2goZSl7bz1udWxsfXRyeXtpZihvKXtvLnNldEl0ZW0oVCwiMSIpO28ucmVtb3ZlSXRlbShUKX19Y2F0Y2goZSl7Yz1mYWxzZTtvPW51bGx9fWVsc2UgaWYodHlwZW9mKGEpPT09Im9iamVjdCIpe3Q9YS5nZXRUeXBlP2EuZ2V0VHlwZSgpOiJ1bmtub3duIjtvPWF9dmFyIGQ9ISFvO3RoaXMuaXNTdXBwb3J0ZWQ9ZnVuY3Rpb24oKXtpZighZCl7cmV0dXJuIGZhbHNlfWlmKHR5cGVvZihvLmlzU3VwcG9ydGVkKT09ImZ1bmN0aW9uIil7cmV0dXJuIG8uaXNTdXBwb3J0ZWQoKX1yZXR1cm4gdHJ1ZX07dGhpcy5wdXQ9ZnVuY3Rpb24oaSxnKXtpZih0aGlzLmlzU3VwcG9ydGVkKCkmJmkpe3RyeXtvLnNldEl0ZW0oUCtpLHM/SlNPTi5zdHJpbmdpZnkoZyk6Zyk7cmV0dXJuIHRydWV9Y2F0Y2goZSl7cmV0dXJuIGZhbHNlfX1lbHNle3JldHVybiBmYWxzZX19O3RoaXMuZ2V0PWZ1bmN0aW9uKGkpe2lmKHRoaXMuaXNTdXBwb3J0ZWQoKSYmaSl7dHJ5e3ZhciBJPW8uZ2V0SXRlbShQK2kpO3JldHVybiBzP0pTT04ucGFyc2UoSSk6SX1jYXRjaChlKXtyZXR1cm4gbnVsbH19ZWxzZXtyZXR1cm4gbnVsbH19O3RoaXMucmVtb3ZlPWZ1bmN0aW9uKGkpe2lmKHRoaXMuaXNTdXBwb3J0ZWQoKSYmaSl7dHJ5e28ucmVtb3ZlSXRlbShQK2kpO3JldHVybiB0cnVlfWNhdGNoKGUpe3JldHVybiBmYWxzZX19ZWxzZXtyZXR1cm4gZmFsc2V9fTt0aGlzLnJlbW92ZUFsbD1mdW5jdGlvbihJKXtpZih0aGlzLmlzU3VwcG9ydGVkKCkmJm8ubGVuZ3RoJiYoZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcj8vZnVuY3Rpb24vOi9mdW5jdGlvbnxvYmplY3QvKS50ZXN0KHR5cGVvZihvLmtleSkpKXt0cnl7dmFyIGw9by5sZW5ndGg7dmFyIGs9W107dmFyIGcsaTt2YXIgcD1QKyhJfHwiIik7Zm9yKGk9MDtpPGw7aSsrKXtnPW8ua2V5KGkpO2lmKGcmJmcuaW5kZXhPZihwKT09MCl7ay5wdXNoKGcpfX1mb3IoaT0wO2k8ay5sZW5ndGg7aSsrKXtvLnJlbW92ZUl0ZW0oa1tpXSl9cmV0dXJuIHRydWV9Y2F0Y2goZSl7cmV0dXJuIGZhbHNlfX1lbHNle3JldHVybiBmYWxzZX19O3RoaXMuY2xlYXI9ZnVuY3Rpb24oKXtpZih0aGlzLmlzU3VwcG9ydGVkKCkpe3RyeXtvLmNsZWFyKCk7cmV0dXJuIHRydWV9Y2F0Y2goZSl7cmV0dXJuIGZhbHNlfX1lbHNle3JldHVybiBmYWxzZX19O3RoaXMuZ2V0VHlwZT1mdW5jdGlvbigpe3JldHVybiB0fX07dmFyIG09e307cS5zYXAuc3RvcmFnZT1mdW5jdGlvbihvLGkpe2lmKCFvKXtvPXEuc2FwLnN0b3JhZ2UuVHlwZS5zZXNzaW9ufWlmKHR5cGVvZihvKT09PSJzdHJpbmciJiZxLnNhcC5zdG9yYWdlLlR5cGVbb10pe3ZhciBrPW87aWYoaSYmaSE9Uyl7az1vKyJfIitpfXJldHVybiBtW2tdfHwobVtrXT1uZXcgZihvLGkpKX1yZXR1cm4gbmV3IGYobyxpKX07cS5zYXAuc3RvcmFnZS5UeXBlPXtsb2NhbDoibG9jYWwiLHNlc3Npb246InNlc3Npb24iLGdsb2JhbDoiZ2xvYmFsIn07Zi5hcHBseShxLnNhcC5zdG9yYWdlKTttW3Euc2FwLnN0b3JhZ2UuVHlwZS5zZXNzaW9uXT1xLnNhcC5zdG9yYWdlO3JldHVybiBxfSxmYWxzZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ2pxdWVyeS5zYXAuc3RyaW5ncycpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ2pxdWVyeS5zYXAuc3RyaW5ncycpO3NhcC51aS5kZWZpbmUoImpxdWVyeS5zYXAuc3RyaW5ncyIsWydqcXVlcnkuc2FwLmdsb2JhbCddLGZ1bmN0aW9uKHEpeyJ1c2Ugc3RyaWN0IjtxLnNhcC5lbmRzV2l0aD1mdW5jdGlvbiBlbmRzV2l0aChzLGUpe2lmKHR5cGVvZihlKSE9InN0cmluZyJ8fGU9PSIiKXtyZXR1cm4gZmFsc2V9dmFyIHA9cy5sYXN0SW5kZXhPZihlKTtyZXR1cm4gcD49MCYmcD09cy5sZW5ndGgtZS5sZW5ndGh9O3Euc2FwLmVuZHNXaXRoSWdub3JlQ2FzZT1mdW5jdGlvbiBlbmRzV2l0aElnbm9yZUNhc2UocyxlKXtpZih0eXBlb2YoZSkhPSJzdHJpbmcifHxlPT0iIil7cmV0dXJuIGZhbHNlfXM9cy50b1VwcGVyQ2FzZSgpO2U9ZS50b1VwcGVyQ2FzZSgpO3JldHVybiBxLnNhcC5lbmRzV2l0aChzLGUpfTtxLnNhcC5zdGFydHNXaXRoPWZ1bmN0aW9uIHN0YXJ0c1dpdGgocyxTKXtpZih0eXBlb2YoUykhPSJzdHJpbmcifHxTPT0iIil7cmV0dXJuIGZhbHNlfWlmKHM9PVMpe3JldHVybiB0cnVlfXJldHVybiBzLmluZGV4T2YoUyk9PTB9O3Euc2FwLnN0YXJ0c1dpdGhJZ25vcmVDYXNlPWZ1bmN0aW9uIHN0YXJ0c1dpdGhJZ25vcmVDYXNlKHMsUyl7aWYodHlwZW9mKFMpIT0ic3RyaW5nInx8Uz09IiIpe3JldHVybiBmYWxzZX1zPXMudG9VcHBlckNhc2UoKTtTPVMudG9VcHBlckNhc2UoKTtyZXR1cm4gcS5zYXAuc3RhcnRzV2l0aChzLFMpfTtxLnNhcC5jaGFyVG9VcHBlckNhc2U9ZnVuY3Rpb24gY2hhclRvVXBwZXJDYXNlKHMscCl7aWYoIXMpe3JldHVybiBzfWlmKCFwfHxpc05hTihwKXx8cDw9MHx8cD49cy5sZW5ndGgpe3A9MH12YXIgQz1zLmNoYXJBdChwKS50b1VwcGVyQ2FzZSgpO2lmKHA+MCl7cmV0dXJuIHMuc3Vic3RyaW5nKDAscCkrQytzLnN1YnN0cmluZyhwKzEpfXJldHVybiBDK3Muc3Vic3RyaW5nKHArMSl9O3Euc2FwLnBhZExlZnQ9ZnVuY3Rpb24gcGFkTGVmdChzLHAsbCl7aWYoIXMpe3M9IiJ9d2hpbGUocy5sZW5ndGg8bCl7cz1wK3N9cmV0dXJuIHN9O3Euc2FwLnBhZFJpZ2h0PWZ1bmN0aW9uIHBhZFJpZ2h0KHMscCxsKXtpZighcyl7cz0iIn13aGlsZShzLmxlbmd0aDxsKXtzPXMrcH1yZXR1cm4gc307dmFyIHI9Ly0oLikvaWc7cS5zYXAuY2FtZWxDYXNlPWZ1bmN0aW9uIGNhbWVsQ2FzZShzKXtyZXR1cm4gcy5yZXBsYWNlKHIsZnVuY3Rpb24obSxDKXtyZXR1cm4gQy50b1VwcGVyQ2FzZSgpfSl9O3ZhciBhPS8oW0EtWl0pL2c7cS5zYXAuaHlwaGVuPWZ1bmN0aW9uIGh5cGhlbihzKXtyZXR1cm4gcy5yZXBsYWNlKGEsZnVuY3Rpb24obSxDKXtyZXR1cm4iLSIrQy50b0xvd2VyQ2FzZSgpfSl9O3ZhciBiPS9bLVtcXXt9KCkqKz8uLFxcXiR8I1xzXS9nO3Euc2FwLmVzY2FwZVJlZ0V4cD1mdW5jdGlvbiBlc2NhcGVSZWdFeHAocyl7cmV0dXJuIHMucmVwbGFjZShiLCJcXCQmIil9O3Euc2FwLmZvcm1hdE1lc3NhZ2U9ZnVuY3Rpb24gZm9ybWF0TWVzc2FnZShwLHYpe2lmKGFyZ3VtZW50cy5sZW5ndGg+Mnx8KHYhPW51bGwmJiFxLmlzQXJyYXkodikpKXt2PUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKX12PXZ8fFtdO3JldHVybiBwLnJlcGxhY2UoYyxmdW5jdGlvbigkLGQsZSxmLG8pe2lmKGQpe3JldHVybiInIn1lbHNlIGlmKGUpe3JldHVybiBlLnJlcGxhY2UoLycnL2csIiciKX1lbHNlIGlmKGYpe3JldHVybiBTdHJpbmcodltwYXJzZUludChmLDEwKV0pfXRocm93IG5ldyBFcnJvcigiZm9ybWF0TWVzc2FnZTogcGF0dGVybiBzeW50YXggZXJyb3IgYXQgcG9zLiAiK28pfSl9O3ZhciBjPS8oJycpfCcoW14nXSsoPzonJ1teJ10qKSopKD86J3wkKXxceyhbMC05XSsoPzpccyosW157fV0qKT8pXH18W3t9XS9nO3JldHVybiBxfSxmYWxzZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ2pxdWVyeS5zYXAueG1sJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnanF1ZXJ5LnNhcC54bWwnKTtzYXAudWkuZGVmaW5lKCJqcXVlcnkuc2FwLnhtbCIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ3NhcC91aS9EZXZpY2UnXSxmdW5jdGlvbihxLEQpeyJ1c2Ugc3RyaWN0IjtxLnNhcC5wYXJzZVhNTD1mdW5jdGlvbiBwYXJzZVhNTCh4KXt2YXIgWDtpZih3aW5kb3cuRE9NUGFyc2VyKXt2YXIgcD1uZXcgRE9NUGFyc2VyKCk7dHJ5e1g9cC5wYXJzZUZyb21TdHJpbmcoeCwidGV4dC94bWwiKX1jYXRjaChlKXt2YXIgUD1xLnNhcC5nZXRQYXJzZUVycm9yKFgpO1g9e307UC5yZWFzb249ZS5tZXNzYWdlO1gucGFyc2VFcnJvcj1QO3JldHVybiBYfX1lbHNle1g9bmV3IEFjdGl2ZVhPYmplY3QoIk1pY3Jvc29mdC5YTUxET00iKTtYLmFzeW5jPWZhbHNlO1gubG9hZFhNTCh4KX12YXIgUD1xLnNhcC5nZXRQYXJzZUVycm9yKFgpO2lmKFApe2lmKCFYLnBhcnNlRXJyb3Ipe1gucGFyc2VFcnJvcj1QfX1yZXR1cm4gWH07cS5zYXAuc2VyaWFsaXplWE1MPWZ1bmN0aW9uIHNlcmlhbGl6ZVhNTCh4KXt2YXIgWD0iIjtpZih3aW5kb3cuQWN0aXZlWE9iamVjdCl7WD14LnhtbDtpZihYKXtyZXR1cm4gWH19aWYod2luZG93LlhNTFNlcmlhbGl6ZXIpe3ZhciBzPW5ldyBYTUxTZXJpYWxpemVyKCk7WD1zLnNlcmlhbGl6ZVRvU3RyaW5nKHgpfXJldHVybiBYfTtxLnNhcC5pc0VxdWFsTm9kZT1mdW5jdGlvbihuLE4pe2lmKG49PT1OKXJldHVybiB0cnVlO2lmKCFufHwhTilyZXR1cm4gZmFsc2U7aWYobi5pc0VxdWFsTm9kZSl7cmV0dXJuIG4uaXNFcXVhbE5vZGUoTil9aWYobi5ub2RlVHlwZSE9Ti5ub2RlVHlwZSlyZXR1cm4gZmFsc2U7aWYobi5ub2RlVmFsdWUhPU4ubm9kZVZhbHVlKXJldHVybiBmYWxzZTtpZihuLmJhc2VOYW1lIT1OLmJhc2VOYW1lKXJldHVybiBmYWxzZTtpZihuLm5vZGVOYW1lIT1OLm5vZGVOYW1lKXJldHVybiBmYWxzZTtpZihuLm5hbWVTcGFjZVVSSSE9Ti5uYW1lU3BhY2VVUkkpcmV0dXJuIGZhbHNlO2lmKG4ucHJlZml4IT1OLnByZWZpeClyZXR1cm4gZmFsc2U7aWYobi5ub2RlVHlwZSE9MSlyZXR1cm4gdHJ1ZTtpZihuLmF0dHJpYnV0ZXMubGVuZ3RoIT1OLmF0dHJpYnV0ZXMubGVuZ3RoKXJldHVybiBmYWxzZTtmb3IodmFyIGk9MDtpPG4uYXR0cmlidXRlcy5sZW5ndGg7aSsrKXtpZighcS5zYXAuaXNFcXVhbE5vZGUobi5hdHRyaWJ1dGVzW2ldLE4uYXR0cmlidXRlc1tpXSkpe3JldHVybiBmYWxzZX19aWYobi5jaGlsZE5vZGVzLmxlbmd0aCE9Ti5jaGlsZE5vZGVzLmxlbmd0aClyZXR1cm4gZmFsc2U7Zm9yKHZhciBpPTA7aTxuLmNoaWxkTm9kZXMubGVuZ3RoO2krKyl7aWYoIXEuc2FwLmlzRXF1YWxOb2RlKG4uY2hpbGROb2Rlc1tpXSxOLmNoaWxkTm9kZXNbaV0pKXtyZXR1cm4gZmFsc2V9fXJldHVybiB0cnVlfTtxLnNhcC5nZXRQYXJzZUVycm9yPWZ1bmN0aW9uIGdldFBhcnNlRXJyb3IoZCl7dmFyIHA9e2Vycm9yQ29kZTotMSx1cmw6IiIscmVhc29uOiJ1bmtub3duIGVycm9yIixzcmNUZXh0OiIiLGxpbmU6LTEsbGluZXBvczotMSxmaWxlcG9zOi0xfTtpZighIUQuYnJvd3Nlci5pbnRlcm5ldF9leHBsb3JlciYmZCYmZC5wYXJzZUVycm9yJiZkLnBhcnNlRXJyb3IuZXJyb3JDb2RlIT0wKXtyZXR1cm4gZC5wYXJzZUVycm9yfWlmKCEhRC5icm93c2VyLmZpcmVmb3gmJmQmJmQuZG9jdW1lbnRFbGVtZW50JiZkLmRvY3VtZW50RWxlbWVudC50YWdOYW1lPT0icGFyc2VyZXJyb3IiKXt2YXIgZT1kLmRvY3VtZW50RWxlbWVudC5maXJzdENoaWxkLm5vZGVWYWx1ZSxyPS9YTUwgUGFyc2luZyBFcnJvcjogKC4qKVxuTG9jYXRpb246ICguKilcbkxpbmUgTnVtYmVyIChcZCspLCBDb2x1bW4gKFxkKyk6KC4qKS87aWYoci50ZXN0KGUpKXtwLnJlYXNvbj1SZWdFeHAuJDE7cC51cmw9UmVnRXhwLiQyO3AubGluZT1wYXJzZUludChSZWdFeHAuJDMsMTApO3AubGluZXBvcz1wYXJzZUludChSZWdFeHAuJDQsMTApO3Auc3JjVGV4dD1SZWdFeHAuJDV9cmV0dXJuIHB9aWYoISFELmJyb3dzZXIud2Via2l0JiZkJiZkLmRvY3VtZW50RWxlbWVudCYmZC5kb2N1bWVudEVsZW1lbnQudGFnTmFtZT09Imh0bWwiJiZkLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJwYXJzZXJlcnJvciIpLmxlbmd0aD4wKXt2YXIgZT1xLnNhcC5zZXJpYWxpemVYTUwoZCkscj0vZXJyb3Igb24gbGluZSAoXGQrKSBhdCBjb2x1bW4gKFxkKyk6IChbXjxdKikvO2lmKHIudGVzdChlKSl7cC5yZWFzb249UmVnRXhwLiQzO3AudXJsPSIiO3AubGluZT1wYXJzZUludChSZWdFeHAuJDEsMTApO3AubGluZXBvcz1wYXJzZUludChSZWdFeHAuJDIsMTApO3Auc3JjVGV4dD0iIn1yZXR1cm4gcH1pZighZHx8IWQuZG9jdW1lbnRFbGVtZW50KXtyZXR1cm4gcH1yZXR1cm57ZXJyb3JDb2RlOjB9fTtyZXR1cm4gcX0sZmFsc2UpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuYmFzZS5CaW5kaW5nUGFyc2VyJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmJhc2UuQmluZGluZ1BhcnNlcicpO3NhcC51aS5kZWZpbmUoInNhcC91aS9iYXNlL0JpbmRpbmdQYXJzZXIiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdqcXVlcnkuc2FwLnNjcmlwdCddLGZ1bmN0aW9uKHEpeyJ1c2Ugc3RyaWN0Ijt2YXIgcj0vXlx7XHMqW2EtekEtWl9dW2EtekEtWjAtOV9dKlxzKjovO3ZhciBhPS8oXFxbXFxce1x9XSl8KFx7KS9nO3ZhciBiPS8oW1xcXHtcfV0pL2c7ZnVuY3Rpb24gYyhmKXt2YXIgRj1mdW5jdGlvbih2KXt2YXIgUj1bXSxsPWYubGVuZ3RoLGk7Zm9yKGk9MDtpPGw7aSsrKXtpZih0eXBlb2YgZltpXT09PSJudW1iZXIiKXtSLnB1c2goYXJndW1lbnRzW2ZbaV1dKX1lbHNle1IucHVzaChmW2ldKX19cmV0dXJuIFIuam9pbignJyl9O0YudGV4dEZyYWdtZW50cz1mO3JldHVybiBGfWZ1bmN0aW9uIGQocCl7dmFyIFA9cC5pbmRleE9mKCI+Iiksbz17cGF0aDpwfTtpZihQPjApe28ubW9kZWw9cC5zbGljZSgwLFApO28ucGF0aD1wLnNsaWNlKFArMSl9cmV0dXJuIG99dmFyIEI9e307Qi5fa2VlcEJpbmRpbmdTdHJpbmdzPWZhbHNlO0Iuc2ltcGxlUGFyc2VyPWZ1bmN0aW9uKHMsQyl7aWYocS5zYXAuc3RhcnRzV2l0aChzLCJ7IikmJnEuc2FwLmVuZHNXaXRoKHMsIn0iKSl7cmV0dXJuIGQocy5zbGljZSgxLC0xKSl9fTtCLnNpbXBsZVBhcnNlci5lc2NhcGU9ZnVuY3Rpb24odil7cmV0dXJuIHZ9O0IuY29tcGxleFBhcnNlcj1mdW5jdGlvbihzLEMsdSl7dmFyIGU9cS5zYXAucGFyc2VKUyxmPXtwYXJ0czpbXX0sRj1bXSxVLFAscD0wLG0sZztmdW5jdGlvbiBoKG8sayl7aWYodHlwZW9mIG9ba109PT0ic3RyaW5nIil7dmFyIG49b1trXTtpZihxLnNhcC5zdGFydHNXaXRoKG9ba10sIi4iKSl7b1trXT1xLnByb3h5KHEuc2FwLmdldE9iamVjdChvW2tdLnNsaWNlKDEpLHVuZGVmaW5lZCxDKSxDKX1lbHNle29ba109cS5zYXAuZ2V0T2JqZWN0KG9ba10pfWlmKHR5cGVvZihvW2tdKSE9PSJmdW5jdGlvbiIpe3Euc2FwLmxvZy5lcnJvcihrKyIgZnVuY3Rpb24gIituKyIgbm90IGZvdW5kISIpfX19ZnVuY3Rpb24gaShvLGspe3ZhciBsO2lmKHR5cGVvZiBvW2tdPT09InN0cmluZyIpe2lmKHEuc2FwLnN0YXJ0c1dpdGgob1trXSwiLiIpKXtsPXEuc2FwLmdldE9iamVjdChvW2tdLnNsaWNlKDEpLHVuZGVmaW5lZCxDKX1lbHNle2w9cS5zYXAuZ2V0T2JqZWN0KG9ba10pfWlmKHR5cGVvZiBsPT09ImZ1bmN0aW9uIil7b1trXT1uZXcgbChvLmZvcm1hdE9wdGlvbnMsby5jb25zdHJhaW50cyl9ZWxzZXtvW2tdPWx9ZGVsZXRlIG8uZm9ybWF0T3B0aW9ucztkZWxldGUgby5jb25zdHJhaW50c319ZnVuY3Rpb24gaihvLGssbCl7dmFyIG47aWYoISh0eXBlb2Ygb1trXT09PSJvYmplY3QifHxxLmlzQXJyYXkob1trXSkpKXtyZXR1cm59aWYocS5pc0FycmF5KG9ba10pKXtxLmVhY2gob1trXSxmdW5jdGlvbihJLE8pe2oob1trXSxJLGspfSl9ZWxzZXtpZihrPT09ImZpbHRlcnMifHxsPT09ImZpbHRlcnMiKXtuPXEuc2FwLmdldE9iamVjdCgic2FwLnVpLm1vZGVsLkZpbHRlciIpfWVsc2UgaWYoaz09PSJzb3J0ZXIifHxsPT09InNvcnRlciIpe249cS5zYXAuZ2V0T2JqZWN0KCJzYXAudWkubW9kZWwuU29ydGVyIik7aChvW2tdLCJncm91cCIpfWlmKG4pe29ba109bmV3IG4ob1trXSl9fX13aGlsZShtPWEuZXhlYyhzKSl7aWYocDxtLmluZGV4KXtGLnB1c2gocy5zbGljZShwLG0uaW5kZXgpKX1pZihtWzFdKXtGLnB1c2gobVsxXS5zbGljZSgxKSk7VT10cnVlfWVsc2V7aWYoci50ZXN0KHMuc2xpY2UobS5pbmRleCkpKXtQPWUocyxtLmluZGV4KTtpKFAucmVzdWx0LCd0eXBlJyk7aihQLnJlc3VsdCwnZmlsdGVycycpO2ooUC5yZXN1bHQsJ3NvcnRlcicpO2goUC5yZXN1bHQsJ2Zvcm1hdHRlcicpO2goUC5yZXN1bHQsJ2ZhY3RvcnknKTtoKFAucmVzdWx0LCdncm91cEhlYWRlckZhY3RvcnknKTtGLnB1c2goZi5wYXJ0cy5sZW5ndGgpO2YucGFydHMucHVzaChQLnJlc3VsdCk7YS5sYXN0SW5kZXg9UC5hdH1lbHNle2c9cy5pbmRleE9mKCd9JyxtLmluZGV4KTtpZihnPG0uaW5kZXgpe3Rocm93IG5ldyBTeW50YXhFcnJvcigibm8gY2xvc2luZyBicmFjZXMgZm91bmQgaW4gJyIrcysiJyBhZnRlciBwb3M6IittLmluZGV4KX1GLnB1c2goZi5wYXJ0cy5sZW5ndGgpO2YucGFydHMucHVzaChkKHMuc2xpY2UobS5pbmRleCsxLGcpKSk7YS5sYXN0SW5kZXg9ZysxfX1wPWEubGFzdEluZGV4fWlmKHA8cy5sZW5ndGgpe0YucHVzaChzLnNsaWNlKHApKX1pZihmLnBhcnRzLmxlbmd0aD4wKXtpZihGLmxlbmd0aD09PTEpe2Y9Zi5wYXJ0c1swXX1lbHNle2YuZm9ybWF0dGVyPWMoRil9aWYoQi5fa2VlcEJpbmRpbmdTdHJpbmdzKXtmLmJpbmRpbmdTdHJpbmc9c31yZXR1cm4gZn1lbHNlIGlmKHUmJlUpe3JldHVybiBGLmpvaW4oJycpfX07Qi5jb21wbGV4UGFyc2VyLmVzY2FwZT1mdW5jdGlvbih2KXtyZXR1cm4gdi5yZXBsYWNlKGIsIlxcJDEiKX07cmV0dXJuIEJ9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuYmFzZS5EYXRhVHlwZScpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5iYXNlLkRhdGFUeXBlJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2Jhc2UvRGF0YVR5cGUiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnXSxmdW5jdGlvbihxKXsidXNlIHN0cmljdCI7dmFyIEQ9ZnVuY3Rpb24oKXt0aHJvdyBuZXcgRXJyb3IoKX07RC5wcm90b3R5cGUuZ2V0TmFtZT1mdW5jdGlvbigpe3JldHVybiB1bmRlZmluZWR9O0QucHJvdG90eXBlLmdldEJhc2VUeXBlPWZ1bmN0aW9uKCl7cmV0dXJuIHVuZGVmaW5lZH07RC5wcm90b3R5cGUuZ2V0Q29tcG9uZW50VHlwZT1mdW5jdGlvbigpe3JldHVybiB1bmRlZmluZWR9O0QucHJvdG90eXBlLmdldERlZmF1bHRWYWx1ZT1mdW5jdGlvbigpe3JldHVybiB1bmRlZmluZWR9O0QucHJvdG90eXBlLmlzQXJyYXlUeXBlPWZ1bmN0aW9uKCl7cmV0dXJuIHVuZGVmaW5lZH07RC5wcm90b3R5cGUucGFyc2VWYWx1ZT1mdW5jdGlvbih2KXt2YXIgdD10aGlzLmdldE5hbWUoKTtpZih0PT0ic3RyaW5nIil7cmV0dXJuIHZ9ZWxzZSBpZih0PT0iYm9vbGVhbiIpe3JldHVybiB2PT0idHJ1ZSJ9ZWxzZSBpZih0PT0iaW50Iil7cmV0dXJuIHBhcnNlSW50KHYsMTApfWVsc2UgaWYodD09ImZsb2F0Iil7cmV0dXJuIHBhcnNlRmxvYXQodil9ZWxzZSBpZih0PT0ib2JqZWN0Iil7cmV0dXJuIHY/cS5wYXJzZUpTT04odik6bnVsbH1lbHNle3JldHVybiB2fX07RC5wcm90b3R5cGUuaXNWYWxpZD11bmRlZmluZWQ7RC5wcm90b3R5cGUuc2V0Tm9ybWFsaXplcj1mdW5jdGlvbihuKXt0aGlzLl9mbk5vcm1hbGl6ZXI9bn07RC5wcm90b3R5cGUubm9ybWFsaXplPWZ1bmN0aW9uKHYpe2lmKHR5cGVvZiB0aGlzLl9mbk5vcm1hbGl6ZXI9PT0iZnVuY3Rpb24iKXtyZXR1cm4gdGhpcy5fZm5Ob3JtYWxpemVyKHYpfWVsc2V7cmV0dXJuIHZ9fTsoZnVuY3Rpb24oKXtmdW5jdGlvbiBjKG4scyxiKXtzPXN8fHt9O2I9Ynx8RC5wcm90b3R5cGU7dmFyIHQ9cS5zYXAubmV3T2JqZWN0KGIpO3QuZ2V0TmFtZT1mdW5jdGlvbigpe3JldHVybiBufTtpZihzLmhhc093blByb3BlcnR5KCJkZWZhdWx0VmFsdWUiKSl7dmFyIGQ9cy5kZWZhdWx0VmFsdWU7dC5nZXREZWZhdWx0VmFsdWU9ZnVuY3Rpb24oKXtyZXR1cm4gZH19aWYocy5oYXNPd25Qcm9wZXJ0eSgiaXNWYWxpZCIpKXt2YXIgaT1zLmlzVmFsaWQ7dC5pc1ZhbGlkPWIuaXNWYWxpZD9mdW5jdGlvbih2KXtpZighYi5pc1ZhbGlkKHYpKXtyZXR1cm4gZmFsc2V9cmV0dXJuIGkodil9Oml9O3QuaXNBcnJheVR5cGU9ZnVuY3Rpb24oKXtyZXR1cm4gZmFsc2V9O3JldHVybiB0fWZ1bmN0aW9uIGEoYil7dmFyIHQ9cS5zYXAubmV3T2JqZWN0KEQucHJvdG90eXBlKTt0LmdldE5hbWU9ZnVuY3Rpb24oKXtyZXR1cm4gYi5nZXROYW1lKCkrIltdIn07dC5nZXRDb21wb25lbnRUeXBlPWZ1bmN0aW9uKCl7cmV0dXJuIGJ9O3QuaXNWYWxpZD1mdW5jdGlvbih2KXtpZih2PT09bnVsbCl7cmV0dXJuIHRydWV9aWYocS5pc0FycmF5KHYpKXtmb3IodmFyIGk9MDtpPHYubGVuZ3RoO2krKyl7aWYoIWIuaXNWYWxpZCh2W2ldKSl7cmV0dXJuIGZhbHNlfX1yZXR1cm4gdHJ1ZX1yZXR1cm4gZmFsc2V9O3QucGFyc2VWYWx1ZT1mdW5jdGlvbih2KXt2YXIgVj12LnNwbGl0KCIsIik7Zm9yKHZhciBpPTA7aTxWLmxlbmd0aDtpKyspe1ZbaV09Yi5wYXJzZVZhbHVlKFZbaV0pfXJldHVybiBWfTt0LmlzQXJyYXlUeXBlPWZ1bmN0aW9uKCl7cmV0dXJuIHRydWV9O3JldHVybiB0fXZhciBQPXsiYW55IjpjKCJhbnkiLHtkZWZhdWx0VmFsdWU6bnVsbCxpc1ZhbGlkOmZ1bmN0aW9uKHYpe3JldHVybiB0cnVlfX0pLCJib29sZWFuIjpjKCJib29sZWFuIix7ZGVmYXVsdFZhbHVlOmZhbHNlLGlzVmFsaWQ6ZnVuY3Rpb24odil7cmV0dXJuIHR5cGVvZiB2PT09ImJvb2xlYW4ifX0pLCJpbnQiOmMoImludCIse2RlZmF1bHRWYWx1ZTowLGlzVmFsaWQ6ZnVuY3Rpb24odil7cmV0dXJuIHR5cGVvZiB2PT09Im51bWJlciImJk1hdGguZmxvb3Iodik9PXZ9fSksImZsb2F0IjpjKCJmbG9hdCIse2RlZmF1bHRWYWx1ZTowLjAsaXNWYWxpZDpmdW5jdGlvbih2KXtyZXR1cm4gdHlwZW9mIHY9PT0ibnVtYmVyIn19KSwic3RyaW5nIjpjKCJzdHJpbmciLHtkZWZhdWx0VmFsdWU6IiIsaXNWYWxpZDpmdW5jdGlvbih2KXtyZXR1cm4gdHlwZW9mIHY9PT0ic3RyaW5nInx8diBpbnN0YW5jZW9mIFN0cmluZ319KSwib2JqZWN0IjpjKCJvYmplY3QiLHtkZWZhdWx0VmFsdWU6bnVsbCxpc1ZhbGlkOmZ1bmN0aW9uKHYpe3JldHVybiB0eXBlb2Ygdj09PSJvYmplY3QifHx0eXBlb2Ygdj09PSJmdW5jdGlvbiJ9fSl9O0QuZ2V0VHlwZT1mdW5jdGlvbih0KXtpZih0LmluZGV4T2YoIltdIik+MCl7dmFyIEM9dC5zdWJzdHIoMCx0Lmxlbmd0aC0yKSxvPXRoaXMuZ2V0VHlwZShDKTtyZXR1cm4gbyYmYShvKX1lbHNle3JldHVybiBQW3RdfHxxLnNhcC5nZXRPYmplY3QodCl9fTtELmNyZWF0ZVR5cGU9Yzt2YXIgST17fTtELnJlZ2lzdGVySW50ZXJmYWNlVHlwZXM9ZnVuY3Rpb24odCl7Zm9yKHZhciBpPTA7aTx0Lmxlbmd0aDtpKyspe3Euc2FwLnNldE9iamVjdCh0W2ldLElbdFtpXV09bmV3IFN0cmluZyh0W2ldKSl9fTtELmlzSW50ZXJmYWNlVHlwZT1mdW5jdGlvbih0KXtyZXR1cm4gSS5oYXNPd25Qcm9wZXJ0eSh0KSYmcS5zYXAuZ2V0T2JqZWN0KHQpPT09SVt0XX19KCkpO3JldHVybiBEfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmJhc2UuRXhjZXB0aW9uJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmJhc2UuRXhjZXB0aW9uJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2Jhc2UvRXhjZXB0aW9uIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJ10sZnVuY3Rpb24ocSl7InVzZSBzdHJpY3QiO3ZhciBFPWZ1bmN0aW9uKG0pe3RoaXMubmFtZT0iRXhjZXB0aW9uIjt0aGlzLm1lc3NhZ2U9bX07cmV0dXJuIEV9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuYmFzZS5JbnRlcmZhY2UnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuYmFzZS5JbnRlcmZhY2UnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvYmFzZS9JbnRlcmZhY2UiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnXSxmdW5jdGlvbihxKXsidXNlIHN0cmljdCI7dmFyIEk9ZnVuY3Rpb24obyxtKXtpZighbyl7cmV0dXJuIG99ZnVuY3Rpb24gYyhvLE0pe3JldHVybiBmdW5jdGlvbigpe3ZhciB0PW9bTV0uYXBwbHkobyxhcmd1bWVudHMpO3JldHVybih0IGluc3RhbmNlb2Ygc2FwLnVpLmJhc2UuT2JqZWN0KT90LmdldEludGVyZmFjZSgpOnR9fWlmKCFtKXtyZXR1cm57fX12YXIgTTtmb3IodmFyIGk9MCxhPW0ubGVuZ3RoO2k8YTtpKyspe009bVtpXTt0aGlzW01dPWMobyxNKX19O3JldHVybiBJfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmJhc2UuTWV0YWRhdGEnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuYmFzZS5NZXRhZGF0YScpO3NhcC51aS5kZWZpbmUoInNhcC91aS9iYXNlL01ldGFkYXRhIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnanF1ZXJ5LnNhcC5zY3JpcHQnXSxmdW5jdGlvbihxKXsidXNlIHN0cmljdCI7dmFyIE09ZnVuY3Rpb24oYyxDKXtpZighQ3x8dHlwZW9mIEMubWV0YWRhdGEhPT0ib2JqZWN0Iil7Qz17bWV0YWRhdGE6Q3x8e30sY29uc3RydWN0b3I6cS5zYXAuZ2V0T2JqZWN0KGMpfTtDLm1ldGFkYXRhLl9fdmVyc2lvbj0xLjB9Qy5tZXRhZGF0YS5fX3ZlcnNpb249Qy5tZXRhZGF0YS5fX3ZlcnNpb258fDIuMDtpZih0eXBlb2YgQy5jb25zdHJ1Y3RvciE9PSJmdW5jdGlvbiIpe3Rocm93IEVycm9yKCJjb25zdHJ1Y3RvciBmb3IgY2xhc3MgIitjKyIgbXVzdCBoYXZlIGJlZW4gZGVjbGFyZWQgYmVmb3JlIGNyZWF0aW5nIG1ldGFkYXRhIGZvciBpdCIpfXRoaXMuX3NDbGFzc05hbWU9Yzt0aGlzLl9vQ2xhc3M9Qy5jb25zdHJ1Y3Rvcjt0aGlzLmV4dGVuZChDKX07TS5wcm90b3R5cGUuZXh0ZW5kPWZ1bmN0aW9uKGMpe3RoaXMuYXBwbHlTZXR0aW5ncyhjKTt0aGlzLmFmdGVyQXBwbHlTZXR0aW5ncygpfTtNLnByb3RvdHlwZS5hcHBseVNldHRpbmdzPWZ1bmN0aW9uKGMpe3ZhciB0PXRoaXMscz1jLm1ldGFkYXRhLHAsbjtpZihzLmJhc2VUeXBlKXt2YXIgUD1xLnNhcC5nZXRPYmplY3Qocy5iYXNlVHlwZSk7aWYodHlwZW9mIFAhPT0iZnVuY3Rpb24iKXtxLnNhcC5sb2cuZmF0YWwoImJhc2UgY2xhc3MgJyIrcy5iYXNlVHlwZSsiJyBkb2VzIG5vdCBleGlzdCIpfWlmKFAuZ2V0TWV0YWRhdGEpe3RoaXMuX29QYXJlbnQ9UC5nZXRNZXRhZGF0YSgpO31lbHNle3RoaXMuX29QYXJlbnQ9bmV3IE0ocy5iYXNlVHlwZSx7fSl9fWVsc2V7dGhpcy5fb1BhcmVudD11bmRlZmluZWR9dGhpcy5fYkFic3RyYWN0PSEhc1siYWJzdHJhY3QiXTt0aGlzLl9iRmluYWw9ISFzWyJmaW5hbCJdO3RoaXMuX3NTdGVyZW90eXBlPXMuc3RlcmVvdHlwZXx8KHRoaXMuX29QYXJlbnQ/dGhpcy5fb1BhcmVudC5fc1N0ZXJlb3R5cGU6Im9iamVjdCIpO3RoaXMuX2FJbnRlcmZhY2VzPXEuc2FwLnVuaXF1ZShzLmludGVyZmFjZXN8fFtdKTt0aGlzLl9hUHVibGljTWV0aG9kcz1xLnNhcC51bmlxdWUocy5wdWJsaWNNZXRob2RzfHxbXSk7cD10aGlzLl9vQ2xhc3MucHJvdG90eXBlO3Euc2FwLmZvckluKGMsZnVuY3Rpb24obix2KXtpZihuIT09Im1ldGFkYXRhIiYmbiE9PSJjb25zdHJ1Y3RvciIpe3Bbbl09djtpZighbi5tYXRjaCgvXl98Xm9ufF5pbml0JHxeZXhpdCQvKSl7dC5fYVB1YmxpY01ldGhvZHMucHVzaChuKX19fSl9O00ucHJvdG90eXBlLmFmdGVyQXBwbHlTZXR0aW5ncz1mdW5jdGlvbigpe2lmKHRoaXMuX29QYXJlbnQpe3RoaXMuX2FBbGxQdWJsaWNNZXRob2RzPXEuc2FwLnVuaXF1ZSh0aGlzLl9vUGFyZW50Ll9hQWxsUHVibGljTWV0aG9kcy5jb25jYXQodGhpcy5fYVB1YmxpY01ldGhvZHMpKX1lbHNle3RoaXMuX2FBbGxQdWJsaWNNZXRob2RzPXRoaXMuX2FQdWJsaWNNZXRob2RzfX07TS5wcm90b3R5cGUuZ2V0U3RlcmVvdHlwZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9zU3RlcmVvdHlwZX07TS5wcm90b3R5cGUuZ2V0TmFtZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9zQ2xhc3NOYW1lfTtNLnByb3RvdHlwZS5nZXRDbGFzcz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9vQ2xhc3N9O00ucHJvdG90eXBlLmdldFBhcmVudD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9vUGFyZW50fTtNLnByb3RvdHlwZS5nZXRQdWJsaWNNZXRob2RzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2FQdWJsaWNNZXRob2RzfTtNLnByb3RvdHlwZS5nZXRBbGxQdWJsaWNNZXRob2RzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2FBbGxQdWJsaWNNZXRob2RzfTtNLnByb3RvdHlwZS5nZXRJbnRlcmZhY2VzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2FJbnRlcmZhY2VzfTtNLnByb3RvdHlwZS5pc0luc3RhbmNlT2Y9ZnVuY3Rpb24oSSl7aWYodGhpcy5fb1BhcmVudCl7aWYodGhpcy5fb1BhcmVudC5pc0luc3RhbmNlT2YoSSkpe3JldHVybiB0cnVlfX07dmFyIGE9dGhpcy5fYUludGVyZmFjZXM7Zm9yKHZhciBpPTAsbD1hLmxlbmd0aDtpPGw7aSsrKXtpZihhW2ldPT09SSl7cmV0dXJuIHRydWV9fXJldHVybiBmYWxzZX07TS5wcm90b3R5cGUuaXNBYnN0cmFjdD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9iQWJzdHJhY3R9O00ucHJvdG90eXBlLmlzRmluYWw9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYkZpbmFsfTtNLnByb3RvdHlwZS5hZGRQdWJsaWNNZXRob2RzPWZ1bmN0aW9uKG0pe3ZhciBuPShtIGluc3RhbmNlb2YgQXJyYXkpP206YXJndW1lbnRzO2Z1bmN0aW9uIHUoYSx2KXtBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShhLHYpO3Euc2FwLnVuaXF1ZShhKX11KHRoaXMuX2FQdWJsaWNNZXRob2RzLG4pO3UodGhpcy5fYUFsbFB1YmxpY01ldGhvZHMsbil9O00uY3JlYXRlQ2xhc3M9ZnVuY3Rpb24oYixjLEMsRil7aWYodHlwZW9mIGI9PT0ic3RyaW5nIil7Rj1DO0M9YztjPWI7Yj1udWxsfUY9Rnx8TTtpZih0eXBlb2YgRi5wcmVwcm9jZXNzQ2xhc3NJbmZvPT09ImZ1bmN0aW9uIil7Qz1GLnByZXByb2Nlc3NDbGFzc0luZm8oQyl9Qz1DfHx7fTtDLm1ldGFkYXRhPUMubWV0YWRhdGF8fHt9O2lmKCFDLmhhc093blByb3BlcnR5KCdjb25zdHJ1Y3RvcicpKXtDLmNvbnN0cnVjdG9yPXVuZGVmaW5lZH12YXIgZj1DLmNvbnN0cnVjdG9yO2lmKGIpe2lmKCFmKXtpZihDLm1ldGFkYXRhLmRlcHJlY2F0ZWQpe2Y9ZnVuY3Rpb24oKXtxLnNhcC5sb2cud2FybmluZygiVXNhZ2Ugb2YgZGVwcmVjYXRlZCBjbGFzczogIitjKTtiLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19ZWxzZXtmPWZ1bmN0aW9uKCl7Yi5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fX1mLnByb3RvdHlwZT1xLnNhcC5uZXdPYmplY3QoYi5wcm90b3R5cGUpO2YucHJvdG90eXBlLmNvbnN0cnVjdG9yPWY7Qy5tZXRhZGF0YS5iYXNlVHlwZT1iLmdldE1ldGFkYXRhKCkuZ2V0TmFtZSgpfWVsc2V7Zj1mfHxmdW5jdGlvbigpe307ZGVsZXRlIEMubWV0YWRhdGEuYmFzZVR5cGV9Qy5jb25zdHJ1Y3Rvcj1mO3Euc2FwLnNldE9iamVjdChjLGYpO3ZhciBtPW5ldyBGKGMsQyk7Zi5nZXRNZXRhZGF0YT1mLnByb3RvdHlwZS5nZXRNZXRhZGF0YT1xLnNhcC5nZXR0ZXIobSk7aWYoIWYuZ2V0TWV0YWRhdGEoKS5pc0ZpbmFsKCkpe2YuZXh0ZW5kPWZ1bmN0aW9uKHMsUyxhKXtyZXR1cm4gTS5jcmVhdGVDbGFzcyhmLHMsUyxhfHxGKX19cmV0dXJuIGZ9O3JldHVybiBNfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmJhc2UuT2JqZWN0Jykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmJhc2UuT2JqZWN0Jyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2Jhc2UvT2JqZWN0IixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnLi9JbnRlcmZhY2UnLCcuL01ldGFkYXRhJ10sZnVuY3Rpb24ocSxJLE0peyJ1c2Ugc3RyaWN0Ijt2YXIgQj1NLmNyZWF0ZUNsYXNzKCJzYXAudWkuYmFzZS5PYmplY3QiLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbigpe2lmKCEodGhpcyBpbnN0YW5jZW9mIEIpKXt0aHJvdyBFcnJvcigiQ2Fubm90IGluc3RhbnRpYXRlIG9iamVjdDogXCJuZXdcIiBpcyBtaXNzaW5nISIpfX19KTtCLnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKCl7fTtCLnByb3RvdHlwZS5nZXRJbnRlcmZhY2U9ZnVuY3Rpb24oKXt2YXIgaT1uZXcgSSh0aGlzLHRoaXMuZ2V0TWV0YWRhdGEoKS5nZXRBbGxQdWJsaWNNZXRob2RzKCkpO3RoaXMuZ2V0SW50ZXJmYWNlPXEuc2FwLmdldHRlcihpKTtyZXR1cm4gaX07Qi5kZWZpbmVDbGFzcz1mdW5jdGlvbihjLHMsRil7dmFyIG09bmV3KEZ8fE0pKGMscyk7dmFyIEM9bS5nZXRDbGFzcygpO0MuZ2V0TWV0YWRhdGE9Qy5wcm90b3R5cGUuZ2V0TWV0YWRhdGE9cS5zYXAuZ2V0dGVyKG0pO2lmKCFtLmlzRmluYWwoKSl7Qy5leHRlbmQ9ZnVuY3Rpb24oUyxvLGYpe3JldHVybiBNLmNyZWF0ZUNsYXNzKEMsUyxvLGZ8fEYpfX1xLnNhcC5sb2cuZGVidWcoImRlZmluZWQgY2xhc3MgJyIrYysiJyIrKG0uZ2V0UGFyZW50KCk/IiBhcyBzdWJjbGFzcyBvZiAiK20uZ2V0UGFyZW50KCkuZ2V0TmFtZSgpOiIiKSk7cmV0dXJuIG19O3JldHVybiBCfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmJhc2UuT2JqZWN0UG9vbCcpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5iYXNlLk9iamVjdFBvb2wnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvYmFzZS9PYmplY3RQb29sIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnLi9PYmplY3QnXSxmdW5jdGlvbihxLEIpeyJ1c2Ugc3RyaWN0Ijt2YXIgTz1CLmV4dGVuZCgic2FwLnVpLmJhc2UuT2JqZWN0UG9vbCIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKG8pe0IuYXBwbHkodGhpcyk7dGhpcy5vT2JqZWN0Q2xhc3M9bzt0aGlzLmFGcmVlT2JqZWN0cz1bXX19KTtPLnByb3RvdHlwZS5ib3Jyb3dPYmplY3Q9ZnVuY3Rpb24oKXt2YXIgbz10aGlzLmFGcmVlT2JqZWN0cy5sZW5ndGg9PTA/bmV3IHRoaXMub09iamVjdENsYXNzKCk6dGhpcy5hRnJlZU9iamVjdHMucG9wKCk7by5pbml0LmFwcGx5KG8sYXJndW1lbnRzKTtyZXR1cm4gb307Ty5wcm90b3R5cGUucmV0dXJuT2JqZWN0PWZ1bmN0aW9uKG8pe28ucmVzZXQoKTt0aGlzLmFGcmVlT2JqZWN0cy5wdXNoKG8pfTtyZXR1cm4gT30sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLkNvbXBvbmVudENvbnRhaW5lclJlbmRlcmVyJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUuQ29tcG9uZW50Q29udGFpbmVyUmVuZGVyZXInKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9Db21wb25lbnRDb250YWluZXJSZW5kZXJlciIsWydqcXVlcnkuc2FwLmdsb2JhbCddLGZ1bmN0aW9uKHEpeyJ1c2Ugc3RyaWN0Ijt2YXIgQz17fTtDLnJlbmRlcj1mdW5jdGlvbihyLGMpe3ZhciBSPXI7dmFyIGI9c2FwLnVpLmdldENvcmUoKS5nZXRDb25maWd1cmF0aW9uKCkuZ2V0UlRMKCk7dmFyIG89Yy5nZXRDb21wb25lbnRJbnN0YW5jZSgpO3ZhciB3PWMuZ2V0V2lkdGgoKTt2YXIgaD1jLmdldEhlaWdodCgpO1Iud3JpdGUoIjxkaXYiKTtSLndyaXRlQ29udHJvbERhdGEoYyk7aWYodyl7Ui5hZGRTdHlsZSgid2lkdGgiLHcpfWlmKGgpe1IuYWRkU3R5bGUoImhlaWdodCIsaCl9Ui53cml0ZVN0eWxlcygpO1IuYWRkQ2xhc3MoInNhcFVpQ29tcG9uZW50Q29udGFpbmVyIik7Ui53cml0ZUNsYXNzZXMoKTtSLndyaXRlKCI+Iik7Ui53cml0ZSgiPGRpdiBpZD1cIiIrYy5nZXRJZCgpKyItdWlhcmVhXCIiKTtpZih3JiZ3IT09ImF1dG8iKXtSLmFkZFN0eWxlKCJ3aWR0aCIsIjEwMCUiKX1pZihoJiZoIT09ImF1dG8iKXtSLmFkZFN0eWxlKCJoZWlnaHQiLCIxMDAlIil9Ui53cml0ZVN0eWxlcygpO1Iud3JpdGUoIj4iKTtpZihvKXtvLnJlbmRlcihSKX1SLndyaXRlKCI8L2Rpdj48L2Rpdj4iKX07cmV0dXJuIEN9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS5EZWNsYXJhdGl2ZVN1cHBvcnQnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS5EZWNsYXJhdGl2ZVN1cHBvcnQnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9EZWNsYXJhdGl2ZVN1cHBvcnQiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnXSxmdW5jdGlvbihxKXsidXNlIHN0cmljdCI7dmFyIEQ9e307RC5hdHRyaWJ1dGVzPXsiZGF0YS1zYXAtdWktdHlwZSI6dHJ1ZSwiZGF0YS1zYXAtdWktYWdncmVnYXRpb24iOnRydWUsImRhdGEtc2FwLXVpLWRlZmF1bHQtYWdncmVnYXRpb24iOnRydWUsImRhdGEtc2FwLXVpLWJpbmRpbmciOmZ1bmN0aW9uKHYscyl7dmFyIGI9c2FwLnVpLmJhc2UuTWFuYWdlZE9iamVjdC5iaW5kaW5nUGFyc2VyKHYpO3Mub2JqZWN0QmluZGluZ3M9cy5vYmplY3RCaW5kaW5nc3x8e307cy5vYmplY3RCaW5kaW5nc1tiLm1vZGVsfHx1bmRlZmluZWRdPWJ9LCJkYXRhLXRvb2x0aXAiOmZ1bmN0aW9uKHYscyl7c1sidG9vbHRpcCJdPXZ9LCJ0b29sdGlwIjpmdW5jdGlvbih2LHMsYyl7c1sidG9vbHRpcCJdPXY7cS5zYXAubG9nLndhcm5pbmcoJ1tEZXByZWNhdGVkXSBDb250cm9sICInK3MuaWQrJyI6IFRoZSBhdHRyaWJ1dGUgInRvb2x0aXAiIGlzIG5vdCBwcmVmaXhlZCB3aXRoICJkYXRhLSoiLiBGdXR1cmUgdmVyc2lvbiBvZiBkZWNsYXJhdGl2ZSBzdXBwb3J0IHdpbGwgb25seSBzdXBwcG9ydCBhdHRyaWJ1dGVzIHdpdGggImRhdGEtKiIgcHJlZml4LicpfSwiY2xhc3MiOnRydWUsInN0eWxlIjp0cnVlLCJpZCI6dHJ1ZX07RC5jb21waWxlPWZ1bmN0aW9uKGUsdixpKXt2YXIgcz10aGlzO3EoZSkuZmluZCgiW2RhdGEtc2FwLXVpLXR5cGVdIikuZmlsdGVyKGZ1bmN0aW9uKCl7cmV0dXJuIHEodGhpcykucGFyZW50cygiW2RhdGEtc2FwLXVpLXR5cGVdIikubGVuZ3RoPT09MH0pLmVhY2goZnVuY3Rpb24oKXtzLl9jb21waWxlKHRoaXMsdixpKX0pfTtELl9jb21waWxlPWZ1bmN0aW9uKGUsdixpKXt2YXIgJD1xKGUpO3ZhciB0PSQuYXR0cigiZGF0YS1zYXAtdWktdHlwZSIpO3ZhciBjPVtdO3ZhciBJPXQ9PT0ic2FwLnVpLmNvcmUuVUlBcmVhIjtpZihJKXt2YXIgcz10aGlzOyQuY2hpbGRyZW4oKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIEM9cy5fY3JlYXRlQ29udHJvbCh0aGlzLHYpO2lmKEMpe2MucHVzaChDKX19KX1lbHNle3ZhciBDPXRoaXMuX2NyZWF0ZUNvbnRyb2woZSx2KTtpZihDKXtjLnB1c2goQyl9fSQuZW1wdHkoKTt2YXIgYT1bXTtxLmVhY2goZS5hdHRyaWJ1dGVzLGZ1bmN0aW9uKGIsQSl7dmFyIG49QS5uYW1lO2lmKCFJfHxJJiYvXmRhdGEtL2cudGVzdChuLnRvTG93ZXJDYXNlKCkpKXthLnB1c2gobil9fSk7aWYoYS5sZW5ndGg+MCl7JC5yZW1vdmVBdHRyKGEuam9pbigiICIpKX1xLmVhY2goYyxmdW5jdGlvbihrLEMpe2lmKEMgaW5zdGFuY2VvZiBzYXAudWkuY29yZS5Db250cm9sKXtpZih2JiYhaSl7di5hZGRDb250ZW50KEMpfWVsc2V7Qy5wbGFjZUF0KGUpO2lmKHYpe3YuY29ubmVjdENvbnRyb2woQyl9fX19KX07RC5fY3JlYXRlQ29udHJvbD1mdW5jdGlvbihlLHYpe3ZhciAkPXEoZSk7dmFyIGM9bnVsbDt2YXIgdD0kLmF0dHIoImRhdGEtc2FwLXVpLXR5cGUiKTtpZih0KXtxLnNhcC5yZXF1aXJlKHQpO3ZhciBDPXEuc2FwLmdldE9iamVjdCh0KTt2YXIgcz17fTt2YXIgaT1zLmlkPXRoaXMuX2dldElkKCQsdik7dGhpcy5fYWRkU2V0dGluZ3NGb3JBdHRyaWJ1dGVzKHMsQyxlLHYpO3RoaXMuX2FkZFNldHRpbmdzRm9yQWdncmVnYXRpb25zKHMsQyxlLHYpO3ZhciBjO2lmKHNhcC51aS5jb3JlLm12Yy5WaWV3LnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKEMucHJvdG90eXBlKSYmdHlwZW9mIEMuX3NUeXBlPT09InN0cmluZyIpe2M9c2FwLnVpLnZpZXcocyx1bmRlZmluZWQsQy5fc1R5cGUpfWVsc2V7Yz1uZXcgQyhzKX1pZihlLmNsYXNzTmFtZSl7Yy5hZGRTdHlsZUNsYXNzKGUuY2xhc3NOYW1lKX0kLnJlbW92ZUF0dHIoImRhdGEtc2FwLXVpLXR5cGUiKX1lbHNle2M9dGhpcy5fY3JlYXRlSHRtbENvbnRyb2woZSx2KX1yZXR1cm4gY307RC5fY3JlYXRlSHRtbENvbnRyb2w9ZnVuY3Rpb24oZSx2KXt2YXIgaD1uZXcgc2FwLnVpLmNvcmUuSFRNTCgpO2guc2V0RE9NQ29udGVudChlKTt0aGlzLmNvbXBpbGUoZSx2LHRydWUpO3JldHVybiBofTtELl9hZGRTZXR0aW5nc0ZvckF0dHJpYnV0ZXM9ZnVuY3Rpb24ocyxjLGUsdil7dmFyIGE9dGhpczt2YXIgUz1ELmF0dHJpYnV0ZXM7dmFyIGI9c2FwLnVpLmJhc2UuTWFuYWdlZE9iamVjdC5iaW5kaW5nUGFyc2VyO3ZhciBDPVtdO3ZhciByPS9eZGF0YS1jdXN0b20tZGF0YTooLispL2k7cS5lYWNoKGUuYXR0cmlidXRlcyxmdW5jdGlvbihpLEEpe3ZhciBuPUEubmFtZTt2YXIgVj1BLnZhbHVlO2lmKCFyLnRlc3Qobikpe2lmKHR5cGVvZiBTW25dPT09InVuZGVmaW5lZCIpe249YS5jb252ZXJ0QXR0cmlidXRlVG9TZXR0aW5nTmFtZShuLHMuaWQpO3ZhciBwPWEuX2dldFByb3BlcnR5KGMsbik7aWYocCl7dmFyIEI9YihWLHYmJnYuZ2V0Q29udHJvbGxlcigpLHRydWUpO2lmKEImJnR5cGVvZiBCPT09Im9iamVjdCIpe3Nbbl09Qn1lbHNle3Nbbl09YS5jb252ZXJ0VmFsdWVUb1R5cGUoYS5nZXRQcm9wZXJ0eURhdGFUeXBlKHApLEJ8fFYpfX1lbHNlIGlmKGEuX2dldEFzc29jaWF0aW9uKGMsbikpe3ZhciBvPWEuX2dldEFzc29jaWF0aW9uKGMsbik7aWYoby5tdWx0aXBsZSl7Vj1WLnJlcGxhY2UoL1xzKixccyp8XHMrL2csIiwiKTt2YXIgST1WLnNwbGl0KCIsIik7cS5lYWNoKEksZnVuY3Rpb24oaSxnKXtJW2ldPXY/di5jcmVhdGVJZChnKTpnfSk7c1tuXT1JfWVsc2V7c1tuXT12P3YuY3JlYXRlSWQoVik6Vn19ZWxzZSBpZihhLl9nZXRBZ2dyZWdhdGlvbihjLG4pKXt2YXIgZD1hLl9nZXRBZ2dyZWdhdGlvbihjLG4pO2lmKGQubXVsdGlwbGUpe3ZhciBCPWIoVix2JiZ2LmdldENvbnRyb2xsZXIoKSk7aWYoQil7c1tuXT1CfWVsc2V7dGhyb3cgbmV3IEVycm9yKCJBZ2dyZWdhdGlvbiAiK24rIiB3aXRoIGNhcmRpbmFsaXR5IDAuLm4gb25seSBhbGxvd3MgYmluZGluZyBwYXRocyBhcyBhdHRyaWJ1dGUgdmFsdWUiKX19ZWxzZSBpZihkLmFsdFR5cGVzKXt2YXIgQj1iKFYsdiYmdi5nZXRDb250cm9sbGVyKCksdHJ1ZSk7aWYoQiYmdHlwZW9mIEI9PT0ib2JqZWN0Iil7c1tuXT1CfWVsc2V7c1tuXT1hLmNvbnZlcnRWYWx1ZVRvVHlwZShkLmFsdFR5cGVzWzBdLEJ8fFYpfX1lbHNle3Rocm93IG5ldyBFcnJvcigiQWdncmVnYXRpb24gIituKyIgbm90IHN1cHBvcnRlZCIpfX1lbHNlIGlmKGEuX2dldEV2ZW50KGMsbikpe3ZhciBoPXEuc2FwLmdldE9iamVjdChWKTtpZih2JiZ0eXBlb2YgaD09PSJ1bmRlZmluZWQiKXt2YXIgZj0odi5fb0NvbnRhaW5pbmdWaWV3fHx2KS5nZXRDb250cm9sbGVyKCk7aD1mW1ZdO2lmKHR5cGVvZiBoPT09ImZ1bmN0aW9uIil7aD1xLnByb3h5KGgsZik7aC5fc2FwdWlfaGFuZGxlck5hbWU9Vn19aWYodHlwZW9mIGg9PT0iZnVuY3Rpb24iKXtzW25dPWh9ZWxzZXt0aHJvdyBuZXcgRXJyb3IoJ0NvbnRyb2wgIicrcy5pZCsnIjogVGhlIGZ1bmN0aW9uICInK1YrJyIgZm9yIHRoZSBldmVudCAiJytuKyciIGlzIG5vdCBkZWZpbmVkJyl9fX1lbHNlIGlmKHR5cGVvZiBTW25dPT09ImZ1bmN0aW9uIil7U1tuXShWLHMsYyl9fWVsc2V7bj1xLnNhcC5jYW1lbENhc2Uoci5leGVjKG4pWzFdKTt2YXIgQj1iKFYsdiYmdi5nZXRDb250cm9sbGVyKCkpO0MucHVzaChuZXcgc2FwLnVpLmNvcmUuQ3VzdG9tRGF0YSh7a2V5Om4sdmFsdWU6Qnx8Vn0pKX19KTtpZihDLmxlbmd0aD4wKXtzLmN1c3RvbURhdGE9Q31yZXR1cm4gc307RC5fYWRkU2V0dGluZ3NGb3JBZ2dyZWdhdGlvbnM9ZnVuY3Rpb24ocyxjLGUsdil7dmFyICQ9cShlKTt2YXIgZD10aGlzLl9nZXREZWZhdWx0QWdncmVnYXRpb24oYyxlKTt2YXIgYT10aGlzO3ZhciBBPWMuZ2V0TWV0YWRhdGEoKS5nZXRBbGxBZ2dyZWdhdGlvbnMoKTskLmNoaWxkcmVuKCkuZWFjaChmdW5jdGlvbigpe3ZhciBiPXEodGhpcyk7dmFyIGY9Yi5hdHRyKCJkYXRhLXNhcC11aS1hZ2dyZWdhdGlvbiIpO3ZhciB0PWIuYXR0cigiZGF0YS1zYXAtdWktdHlwZSIpO3ZhciB1PWZhbHNlO2lmKCFmKXt1PXRydWU7Zj1kfWlmKGYmJkFbZl0pe3ZhciBtPUFbZl0ubXVsdGlwbGU7dmFyIGc9ZnVuY3Rpb24oQyl7dmFyIG89YS5fY3JlYXRlQ29udHJvbChDLHYpO2lmKG8pe2lmKG0pe2lmKCFzW2ZdKXtzW2ZdPVtdfWlmKHR5cGVvZiBzW2ZdLnBhdGg9PT0ic3RyaW5nIil7c1tmXS50ZW1wbGF0ZT1vfWVsc2V7c1tmXS5wdXNoKG8pfX1lbHNle3NbZl09b319fTtpZih1fHwodCYmIXUpKXtnKHRoaXMpfWVsc2V7Yi5jaGlsZHJlbigpLmVhY2goZnVuY3Rpb24oKXtnKHRoaXMpfSl9fWIucmVtb3ZlQXR0cigiZGF0YS1zYXAtdWktYWdncmVnYXRpb24iKTtiLnJlbW92ZUF0dHIoImRhdGEtc2FwLXVpLXR5cGUiKX0pO3JldHVybiBzfTtELl9nZXRJZD1mdW5jdGlvbihlLHYpe3ZhciAkPXEoZSk7dmFyIGk9JC5hdHRyKCJpZCIpO2lmKGkpe2lmKHYpe2k9di5jcmVhdGVJZChpKTskLmF0dHIoImRhdGEtc2FwLXVpLWlkIixpKX0kLmF0dHIoImlkIiwiIil9cmV0dXJuIGl9O0QuX2dldFByb3BlcnR5PWZ1bmN0aW9uKGMsbil7cmV0dXJuIGMuZ2V0TWV0YWRhdGEoKS5nZXRBbGxQcm9wZXJ0aWVzKClbbl19O0QuY29udmVydFZhbHVlVG9UeXBlPWZ1bmN0aW9uKHQsdil7aWYodCBpbnN0YW5jZW9mIHNhcC51aS5iYXNlLkRhdGFUeXBlKXt2PXQucGFyc2VWYWx1ZSh2KX1yZXR1cm4gdHlwZW9mIHY9PT0ic3RyaW5nIj9zYXAudWkuYmFzZS5NYW5hZ2VkT2JqZWN0LmJpbmRpbmdQYXJzZXIuZXNjYXBlKHYpOnZ9O0QuZ2V0UHJvcGVydHlEYXRhVHlwZT1mdW5jdGlvbihwKXt2YXIgdD1zYXAudWkuYmFzZS5EYXRhVHlwZS5nZXRUeXBlKHAudHlwZSk7aWYoIXQpe3Rocm93IG5ldyBFcnJvcigiUHJvcGVydHkgIitwLm5hbWUrIiBoYXMgbm8ga25vd24gdHlwZSIpfXJldHVybiB0fTtELmNvbnZlcnRBdHRyaWJ1dGVUb1NldHRpbmdOYW1lPWZ1bmN0aW9uKGEsaSxkKXtpZihhLmluZGV4T2YoImRhdGEtIik9PT0wKXthPWEuc3Vic3RyKDUpfWVsc2UgaWYoZCl7cS5zYXAubG9nLndhcm5pbmcoJ1tEZXByZWNhdGVkXSBDb250cm9sICInK2krJyI6IFRoZSBhdHRyaWJ1dGUgIicrYSsnIiBpcyBub3QgcHJlZml4ZWQgd2l0aCAiZGF0YS0qIi4gRnV0dXJlIHZlcnNpb24gb2YgZGVjbGFyYXRpdmUgc3VwcG9ydCB3aWxsIG9ubHkgc3VwcHBvcnQgYXR0cmlidXRlcyB3aXRoICJkYXRhLSoiIHByZWZpeC4nKX1lbHNle3Rocm93IG5ldyBFcnJvcignQ29udHJvbCAiJytpKyciOiBUaGUgYXR0cmlidXRlICInK2ErJyIgaXMgbm90IHByZWZpeGVkIHdpdGggImRhdGEtKiIuJyl9cmV0dXJuIHEuc2FwLmNhbWVsQ2FzZShhKX07RC5fZ2V0QXNzb2NpYXRpb249ZnVuY3Rpb24oYyxuKXtyZXR1cm4gYy5nZXRNZXRhZGF0YSgpLmdldEFsbEFzc29jaWF0aW9ucygpW25dfTtELl9nZXRBZ2dyZWdhdGlvbj1mdW5jdGlvbihjLG4pe3JldHVybiBjLmdldE1ldGFkYXRhKCkuZ2V0QWxsQWdncmVnYXRpb25zKClbbl19O0QuX2dldEV2ZW50PWZ1bmN0aW9uKGMsbil7cmV0dXJuIGMuZ2V0TWV0YWRhdGEoKS5nZXRBbGxFdmVudHMoKVtuXX07RC5fZ2V0RGVmYXVsdEFnZ3JlZ2F0aW9uPWZ1bmN0aW9uKGMsZSl7dmFyICQ9cShlKTt2YXIgZD0kLmF0dHIoImRhdGEtc2FwLXVpLWRlZmF1bHQtYWdncmVnYXRpb24iKXx8Yy5nZXRNZXRhZGF0YSgpLmdldERlZmF1bHRBZ2dyZWdhdGlvbk5hbWUoKTskLnJlbW92ZUF0dHIoImRhdGEtc2FwLXVpLWRlZmF1bHQtYWdncmVnYXRpb24iKTtyZXR1cm4gZH07cmV0dXJuIER9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS5IVE1MUmVuZGVyZXInKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS5IVE1MUmVuZGVyZXInKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9IVE1MUmVuZGVyZXIiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnXSxmdW5jdGlvbihxKXsidXNlIHN0cmljdCI7dmFyIEg9e3JlbmRlcjpmdW5jdGlvbihyLGMpe3ZhciB1PWMuZ2V0VUlBcmVhKCk7ci53cml0ZSgiPGRpdiBpZD1cInNhcC11aS1kdW1teS0iK2MuZ2V0SWQoKSsiXCIgc3R5bGU9XCJkaXNwbGF5Om5vbmVcIj4iKTtyLndyaXRlKCI8L2Rpdj4iKX19O3JldHVybiBIfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUuSGlzdG9yeScpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLkhpc3RvcnknKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9IaXN0b3J5IixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL2Jhc2UvT2JqZWN0J10sZnVuY3Rpb24ocSxCKXsidXNlIHN0cmljdCI7dmFyIEg9Qi5leHRlbmQoInNhcC51aS5jb3JlLkhpc3RvcnkiLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbihpLHMpe0IuYXBwbHkodGhpcyk7aWYoIXMpe3M9e319dmFyIGg9cy5wcmVmaXg/cy5wcmVmaXg6ZG9jdW1lbnQubG9jYXRpb24ucGF0aG5hbWU7dGhpcy5faU1heEhpc3Rvcnk9cy5tYXg/cy5tYXg6MTAwO3RoaXMuX3NIaXN0b3J5SWQ9aCtpO3Euc2FwLnJlcXVpcmUoImpxdWVyeS5zYXAuc3RvcmFnZSIpO3RoaXMuX29TdG9yYWdlPXEuc2FwLnN0b3JhZ2UocS5zYXAuc3RvcmFnZS5UeXBlLmxvY2FsKTt0aGlzLl9mRmlsdGVyPXMuZmlsdGVyP3MuZmlsdGVyOmZ1bmN0aW9uKGEsdil7cmV0dXJuIGEmJighdnx8KHYmJnEuc2FwLnN0YXJ0c1dpdGhJZ25vcmVDYXNlKGEsdikpKX07dGhpcy5fZkNoZWNrSGlzdG9yeT1zLmNoZWNrSGlzdG9yeT9zLmNoZWNrSGlzdG9yeTpmdW5jdGlvbihhKXtyZXR1cm4gYX19LF9pbml0SGlzdG9yeTpmdW5jdGlvbigpe2lmKCF0aGlzLl9hSGlzdG9yeSl7dmFyIGg9dGhpcy5fb1N0b3JhZ2UuZ2V0KHRoaXMuX3NIaXN0b3J5SWQpO2lmKHR5cGVvZihoKT09PSJzdHJpbmciKXtoPWguc3BsaXQoIiwiKX1lbHNlIGlmKCFoKXtoPVtdfXRoaXMuX2FIaXN0b3J5PXRoaXMuX2ZDaGVja0hpc3RvcnkoaCl9cmV0dXJuIHRoaXMuX2FIaXN0b3J5fSxnZXQ6ZnVuY3Rpb24odil7dmFyIGg9dGhpcy5faW5pdEhpc3RvcnkoKTt2YXIgcj1bXTtmb3IodmFyIGk9MDtpPGgubGVuZ3RoO2krKyl7aWYodGhpcy5fZkZpbHRlcihoW2ldLHYpKXtyLnB1c2goaFtpXSl9fXJldHVybiByfSxyZW1vdmU6ZnVuY3Rpb24odil7dmFyIGg9dGhpcy5faW5pdEhpc3RvcnkoKTtmb3IodmFyIGk9MDtpPGgubGVuZ3RoO2krKyl7aWYoaFtpXT09dil7aC5zcGxpY2UoaSwxKTticmVha319fSxhZGQ6ZnVuY3Rpb24odil7dmFyIGg9dGhpcy5faW5pdEhpc3RvcnkoKTtmb3IodmFyIGk9MDtpPGgubGVuZ3RoO2krKyl7aWYoaFtpXT09PXYpe2guc3BsaWNlKGksMSk7YnJlYWt9fWgudW5zaGlmdCh2KTtpZihoLmxlbmd0aD50aGlzLl9pTWF4SGlzdG9yeSl7aC5zcGxpY2UodGhpcy5faU1heEhpc3RvcnkpfXRoaXMuX29TdG9yYWdlLnB1dCh0aGlzLl9zSGlzdG9yeUlkLGgpfSxjbGVhcjpmdW5jdGlvbigpe3RoaXMuX29TdG9yYWdlLnJlbW92ZSh0aGlzLl9zSGlzdG9yeUlkKTt0aGlzLl9hSGlzdG9yeT1udWxsfX0pO3JldHVybiBIfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUuSWNvblBvb2wnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS5JY29uUG9vbCcpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL0ljb25Qb29sIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL3RoaXJkcGFydHkvVVJJJ10sZnVuY3Rpb24ocSxVKXsidXNlIHN0cmljdCI7aWYoYil7cmV0dXJufXZhciBJPVsiYWNjaWRlbnRhbC1sZWF2ZSIsImFjY291bnQiLCJ3cmVuY2giLCJ3aW5kb3dzLWRvb3JzIiwid2FzaGluZy1tYWNoaW5lIiwidmlzaXRzIiwidmlkZW8iLCJ0cmF2ZWwtZXhwZW5zZSIsInRlbXBlcmF0dXJlIiwidGFzayIsInN5bmNocm9uaXplIiwic3VydmV5Iiwic2V0dGluZ3MiLCJzZWFyY2giLCJzYWxlcy1kb2N1bWVudCIsInJldGFpbC1zdG9yZSIsInJlZnJlc2giLCJwcm9kdWN0IiwicHJlc2VudCIsInBwdC1hdHRhY2htZW50IiwicG9vbCIsInBpZS1jaGFydCIsInBpY3R1cmUiLCJwaG90by12b2x0YWljIiwicGhvbmUiLCJwZW5kaW5nIiwicGRmLWF0dGFjaG1lbnQiLCJwYXN0Iiwib3V0Z29pbmctY2FsbCIsIm9wcG9ydHVuaXR5Iiwib3Bwb3J0dW5pdGllcyIsIm5vdGVzIiwibW9uZXktYmlsbHMiLCJtYXAiLCJsb2ciLCJsaW5lLWNoYXJ0cyIsImxpZ2h0YnVsYiIsImxlYWRzIiwibGVhZCIsImxhcHRvcCIsImtwaS1tYW5hZ2luZy1teS1hcmVhIiwia3BpLWNvcnBvcmF0ZS1wZXJmb3JtYW5jZSIsImluY29taW5nLWNhbGwiLCJpbmJveCIsImhvcml6b250YWwtYmFyLWNoYXJ0IiwiaGlzdG9yeSIsImhlYXRpbmctY29vbGluZyIsImdhbnR0LWJhcnMiLCJmdXR1cmUiLCJmcmlkZ2UiLCJmYWxsYmFjayIsImV4cGVuc2UtcmVwb3J0IiwiZXhjZWwtYXR0YWNobWVudCIsImVuZXJneS1zYXZpbmctbGlnaHRidWxiIiwiZW1wbG95ZWUiLCJlbWFpbCIsImVkaXQiLCJkdXBsaWNhdGUiLCJkb3dubG9hZCIsImRvYy1hdHRhY2htZW50IiwiZGlzaHdhc2hlciIsImRlbGV0ZSIsImRlY2xpbmUiLCJjb21wbGV0ZSIsImNvbXBldGl0b3IiLCJjb2xsZWN0aW9ucy1tYW5hZ2VtZW50IiwiY2hhbGtib2FyZCIsImNhcnQiLCJjYXJkIiwiY2FtZXJhIiwiY2FsZW5kYXIiLCJiZWdpbiIsImJhc2tldCIsImJhci1jaGFydCIsImF0dGFjaG1lbnQiLCJhcnJvdy10b3AiLCJhcnJvdy1yaWdodCIsImFycm93LWxlZnQiLCJhcnJvdy1ib3R0b20iLCJhcHByb3ZhbHMiLCJhcHBvaW50bWVudCIsImFscGhhYmV0aWNhbC1vcmRlciIsImFsb25nLXN0YWNrZWQtY2hhcnQiLCJhbGVydCIsImFkZHJlc3NlcyIsImFkZHJlc3MtYm9vayIsImFkZC1maWx0ZXIiLCJhZGQtZmF2b3JpdGUiLCJhZGQiLCJhY3Rpdml0aWVzIiwiYWN0aW9uIiwiYWNjZXB0IiwiaGludCIsImdyb3VwIiwiY2hlY2stYXZhaWxhYmlsaXR5Iiwid2VhdGhlci1wcm9vZmluZyIsInBheW1lbnQtYXBwcm92YWwiLCJiYXRjaC1wYXltZW50cyIsImJlZCIsImFyb2Jhc2UiLCJmYW1pbHktY2FyZSIsImZhdm9yaXRlIiwibmF2aWdhdGlvbi1yaWdodC1hcnJvdyIsIm5hdmlnYXRpb24tbGVmdC1hcnJvdyIsImUtY2FyZSIsImxlc3MiLCJsYXRlbmVzcyIsImxhYiIsImludGVybmV0LWJyb3dzZXIiLCJpbnN0YW5jZSIsImluc3BlY3Rpb24iLCJpbWFnZS12aWV3ZXIiLCJob21lIiwiZ3JpZCIsImdvYWxzZWVrIiwiZ2VuZXJhbC1sZWF2ZS1yZXF1ZXN0IiwiY3JlYXRlLWxlYXZlLXJlcXVlc3QiLCJmbGlnaHQiLCJmaWx0ZXIiLCJmYXZvcml0ZS1saXN0IiwiZmFjdG9yeSIsImVuZG9zY29weSIsImVtcGxveWVlLXBhbmUiLCJlbXBsb3llZS1hcHByb3ZhbHMiLCJlbWFpbC1yZWFkIiwiZWxlY3Ryb2NhcmRpb2dyYW0iLCJkb2N1bWVudHMiLCJkZWNpc2lvbiIsImRhdGFiYXNlIiwiY3VzdG9tZXItaGlzdG9yeSIsImN1c3RvbWVyIiwiY3JlZGl0LWNhcmQiLCJjcmVhdGUtZW50cnktdGltZSIsImNvbnRhY3RzIiwiY29tcGFyZSIsImNsaW5pY2FsLW9yZGVyIiwiY2hhaW4tbGluayIsInB1bGwtZG93biIsImNhcmdvLXRyYWluIiwiY2FyLXJlbnRhbCIsImJ1c2luZXNzLWNhcmQiLCJiYXItY29kZSIsImZvbGRlci1ibGFuayIsInBhc3Nlbmdlci10cmFpbiIsInF1ZXN0aW9uLW1hcmsiLCJ3b3JsZCIsImlwaG9uZSIsImlwYWQiLCJ3YXJuaW5nIiwic29ydCIsImNvdXJzZS1ib29rIiwiY291cnNlLXByb2dyYW0iLCJhZGQtY291cnNlYm9vayIsInByaW50Iiwic2F2ZSIsInBsYXkiLCJwYXVzZSIsInJlY29yZCIsInJlc3BvbnNlIiwicHVzaHBpbi1vbiIsInB1c2hwaW4tb2ZmIiwidW5mYXZvcml0ZSIsImxlYXJuaW5nLWFzc2lzdGFudCIsInRpbWVzaGVldCIsInRpbWUtZW50cnktcmVxdWVzdCIsImxpc3QiLCJhY3Rpb24tc2V0dGluZ3MiLCJzaGFyZSIsImZlZWQiLCJyb2xlIiwiZmxhZyIsInBvc3QiLCJpbnNwZWN0IiwiaW5zcGVjdC1kb3duIiwiYXBwb2ludG1lbnQtMiIsInRhcmdldC1ncm91cCIsIm1hcmtldGluZy1jYW1wYWlnbiIsIm5vdGlmaWNhdGlvbiIsImNvbW1lbnQiLCJzaGlwcGluZy1zdGF0dXMiLCJjb2xsYWJvcmF0ZSIsInNob3J0Y3V0IiwibGVhZC1vdXRkYXRlZCIsInRvb2xzLW9wcG9ydHVuaXR5IiwicGVybWlzc2lvbiIsInN1cHBsaWVyIiwidGFibGUtdmlldyIsInRhYmxlLWNoYXJ0Iiwic3dpdGNoLXZpZXdzIiwiZS1sZWFybmluZyIsIm1hbmFnZXIiLCJzd2l0Y2gtY2xhc3NlcyIsInNpbXBsZS1wYXltZW50Iiwic2lnbmF0dXJlIiwic2FsZXMtb3JkZXItaXRlbSIsInNhbGVzLW9yZGVyIiwicmVxdWVzdCIsInJlY2VpcHQiLCJwdXp6bGUiLCJwcm9jZXNzIiwicHJpdmF0ZSIsInBvcHVwLXdpbmRvdyIsInBlcnNvbi1wbGFjZWhvbGRlciIsInBlci1kaWVtIiwicGFwZXItcGxhbmUiLCJwYWlkLWxlYXZlIiwicGRmLXJlYWRlciIsIm92ZXJ2aWV3LWNoYXJ0Iiwib3ZlcmxheSIsIm9yZy1jaGFydCIsIm51bWJlci1zaWduIiwibm90aWZpY2F0aW9uLTIiLCJteS1zYWxlcy1vcmRlciIsIm1lYWwiLCJsb2FuIiwib3JkZXItc3RhdHVzIiwiY3VzdG9tZXItb3JkZXItZW50cnkiLCJwZXJmb3JtYW5jZSIsIm1lbnUiLCJlbXBsb3llZS1sb29rdXAiLCJlZHVjYXRpb24iLCJjdXN0b21lci1icmllZmluZyIsImN1c3RvbWVyLWFuZC1jb250YWN0cyIsIm15LXZpZXciLCJhY2NlbGVyYXRlZCIsInRvLWJlLXJldmlld2VkIiwid2FybmluZzIiLCJmZWVkZXItYXJyb3ciLCJxdWFsaXR5LWlzc3VlIiwid29ya2Zsb3ctdGFza3MiLCJjcmVhdGUiLCJob21lLXNoYXJlIiwiZ2xvYmUiLCJ0YWdzIiwid29yay1oaXN0b3J5IiwieC1yYXkiLCJ3b3VuZHMtZG9jIiwid2ViLWNhbSIsIndhaXZlciIsInZlcnRpY2FsLWJhci1jaGFydCIsInVwc3RhY2tlZC1jaGFydCIsInRyaXAtcmVwb3J0IiwibWljcm9waG9uZSIsInVucGFpZC1sZWF2ZSIsInRyZWUiLCJ0b2FzdGVyLXVwIiwidG9hc3Rlci10b3AiLCJ0b2FzdGVyLWRvd24iLCJ0aW1lLWFjY291bnQiLCJ0aGVhdGVyIiwidGF4aSIsInN1YndheS10cmFpbiIsInN0dWR5LWxlYXZlIiwic3RldGhvc2NvcGUiLCJzdGVwIiwic29ub2dyYXBoeSIsInNvY2NvciIsInBoeXNpY2FsLWFjdGl2aXR5IiwicGhhcm1hY3kiLCJvZmZpY2lhbC1zZXJ2aWNlIiwib2Zmc2l0ZS13b3JrIiwibnV0cml0aW9uLWFjdGl2aXR5IiwibmV3c3BhcGVyIiwibW9uaXRvci1wYXltZW50cyIsIm1hcC0yIiwibWFjaGluZSIsIm1yaS1zY2FuIiwiZW5kLXVzZXItZXhwZXJpZW5jZS1tb25pdG9yaW5nIiwidW53aXJlZCIsImN1c3RvbWVyLWZpbmFuY2lhbC1mYWN0LXNoZWV0IiwicmV0YWlsLXN0b3JlLW1hbmFnZXIiLCJOZXR3ZWF2ZXItYnVzaW5lc3MtY2xpZW50IiwiZWxlY3Ryb25pYy1tZWRpY2FsLXJlY29yZCIsImVhbS13b3JrLW9yZGVyIiwiY3VzdG9tZXItdmlldyIsImNybS1zZXJ2aWNlLW1hbmFnZXIiLCJjcm0tc2FsZXMiLCJ3aWRnZXRzIiwiY29tbWlzc2lvbi1jaGVjayIsImNvbGxlY3Rpb25zLWluc2lnaHQiLCJjbGluaWNhbC10YXN0LXRyYWNrZXIiLCJjaXRpemVuLWNvbm5lY3QiLCJjYXJ0LWFwcHJvdmFsIiwiY2FwaXRhbC1wcm9qZWN0cyIsImJvLXN0cmF0ZWd5LW1hbmFnZW1lbnQiLCJidXNpbmVzcy1vYmplY3RzLW1vYmlsZSIsImJ1c2luZXNzLW9iamVjdHMtZXhwbG9yZXIiLCJidXNpbmVzcy1vYmplY3RzLWV4cGVyaWVuY2UiLCJiYnlkLWRhc2hib2FyZCIsImJieWQtYWN0aXZlLXNhbGVzIiwiYnVzaW5lc3MtYnktZGVzaWduIiwiYnVzaW5lc3Mtb25lIiwic2FwLWJveCIsIm1hbmFnZXItaW5zaWdodCIsImFjY291bnRpbmctZG9jdW1lbnQtdmVyaWZpY2F0aW9uIiwiaHItYXBwcm92YWwiLCJpZGVhLXdhbGwiLCJDaGFydC1UcmVlLU1hcCIsImNhcnQtNSIsImNhcnQtNCIsIndhbGxldCIsInZlaGljbGUtcmVwYWlyIiwidXBsb2FkIiwidW5sb2NrZWQiLCJ1bWJyZWxsYSIsInRyYXZlbC1yZXF1ZXN0IiwidHJhdmVsLWV4cGVuc2UtcmVwb3J0IiwidHJhdmVsLWl0aW5lcmFyeSIsInRpbWUtb3ZlcnRpbWUiLCJ0aGluZy10eXBlIiwidGVjaG5pY2FsLW9iamVjdCIsInRhZyIsInN5cmluZ2UiLCJzeW50YXgiLCJzdWl0Y2FzZSIsInNpbXVsYXRlIiwic2hpZWxkIiwic2hhcmUtMiIsInNhbGVzLXF1b3RlIiwicmVwb3N0IiwicHJvdmlzaW9uIiwicHJvamVjdG9yIiwiYWRkLXByb2R1Y3QiLCJwaXBlbGluZS1hbmFseXNpcyIsImFkZC1waG90byIsInBhbGV0dGUiLCJudXJzZSIsInNhbGVzLW5vdGlmaWNhdGlvbiIsIm1pbGVhZ2UiLCJtZWV0aW5nLXJvb20iLCJtZWRpYS1mb3J3YXJkIiwibWVkaWEtcGxheSIsIm1lZGlhLXBhdXNlIiwibWVkaWEtcmV2ZXJzZSIsIm1lZGlhLXJld2luZCIsIm1lYXN1cmVtZW50LWRvY3VtZW50IiwibWVhc3VyaW5nLXBvaW50IiwibWVhc3VyZSIsIm1hcC0zIiwibG9ja2VkIiwibGV0dGVyIiwiam91cm5leS1hcnJpdmUiLCJqb3VybmV5LWNoYW5nZSIsImpvdXJuZXktZGVwYXJ0IiwiaXQtc3lzdGVtIiwiaXQtaW5zdGFuY2UiLCJpdC1ob3N0IiwiaXBob25lLTIiLCJpcGFkLTIiLCJpbnZlbnRvcnkiLCJpbnN1cmFuY2UtaG91c2UiLCJpbnN1cmFuY2UtbGlmZSIsImluc3VyYW5jZS1jYXIiLCJpbml0aWF0aXZlIiwiaW5jaWRlbnQiLCJncm91cC0yIiwiZ29hbCIsImZ1bmN0aW9uYWwtbG9jYXRpb24iLCJmdWxsLXNjcmVlbiIsImZvcm0iLCJmb2Itd2F0Y2giLCJibGFuay10YWciLCJmYW1pbHktcHJvdGVjdGlvbiIsImZvbGRlciIsImZheC1tYWNoaW5lIiwiZXhhbXBsZSIsImVyYXNlciIsImVtcGxveWVlLXJlamVjdGlvbnMiLCJkcm9wLWRvd24tbGlzdCIsImRyYXctcmVjdGFuZ2xlIiwiZG9jdW1lbnQiLCJkb2N0b3IiLCJkaXNjdXNzaW9uLTIiLCJkaXNjdXNzaW9uIiwiZGltZW5zaW9uIiwiY3VzdG9tZXItYW5kLXN1cHBsaWVyIiwiY3JvcCIsImFkZC1jb250YWN0IiwiY29tcGFyZS0yIiwiY29sb3ItZmlsbCIsImNvbGxpc2lvbiIsImN1cnJpY3VsdW0iLCJjaGFydC1heGlzIiwiZnVsbC1zdGFja2VkLWNoYXJ0IiwiZnVsbC1zdGFja2VkLWNvbHVtbi1jaGFydCIsInZlcnRpY2FsLWJhci1jaGFydC0yIiwiaG9yaXpvbnRhbC1iYXItY2hhcnQtMiIsImhvcml6b250YWwtc3RhY2tlZC1jaGFydCIsInZlcnRpY2FsLXN0YWNrZWQtY2hhcnQiLCJjaG9yb3BsZXRoLWNoYXJ0IiwiZ2VvZ3JhcGhpYy1idWJibGUtY2hhcnQiLCJtdWx0aXBsZS1yYWRhci1jaGFydCIsInJhZGFyLWNoYXJ0IiwiY3Jvc3NlZC1saW5lLWNoYXJ0IiwibXVsdGlwbGUtbGluZS1jaGFydCIsIm11bHRpcGxlLWJhci1jaGFydCIsImxpbmUtY2hhcnQiLCJsaW5lLWNoYXJ0LWR1YWwtYXhpcyIsImJ1YmJsZS1jaGFydCIsInNjYXR0ZXItY2hhcnQiLCJtdWx0aXBsZS1waWUtY2hhcnQiLCJjb2x1bW4tY2hhcnQtZHVhbC1heGlzIiwidGFnLWNsb3VkLWNoYXJ0IiwiYXJlYS1jaGFydCIsImNhdXNlIiwiY2FydC0zIiwiY2FydC0yIiwiYnVzLXB1YmxpYy10cmFuc3BvcnQiLCJidXJnbGFyeSIsImJ1aWxkaW5nIiwiYm9yZGVyIiwiYm9va21hcmsiLCJiYWRnZSIsImF0dGFjaG1lbnQtYXVkaW8iLCJhdHRhY2htZW50LXZpZGVvIiwiYXR0YWNobWVudC1odG1sIiwiYXR0YWNobWVudC1waG90byIsImF0dGFjaG1lbnQtZS1wdWIiLCJhdHRhY2htZW50LXppcC1maWxlIiwiYXR0YWNobWVudC10ZXh0LWZpbGUiLCJhZGQtZXF1aXBtZW50IiwiYWRkLWFjdGl2aXR5IiwiYWN0aXZpdHktaW5kaXZpZHVhbCIsImFjdGl2aXR5LTIiLCJhZGQtYWN0aXZpdHktMiIsImFjdGl2aXR5LWl0ZW1zIiwiYWN0aXZpdHktYXNzaWduZWQtdG8tZ29hbCIsInN0YXR1cy1jb21wbGV0ZWQiLCJzdGF0dXMtZXJyb3IiLCJzdGF0dXMtaW5hY3RpdmUiLCJzdGF0dXMtaW4tcHJvY2VzcyIsImJsYW5rLXRhZy0yIiwiY2FydC1mdWxsIiwibG9jYXRlLW1lIiwicGFnaW5nIiwiY29tcGFueS12aWV3IiwiZG9jdW1lbnQtdGV4dCIsImV4cGxvcmVyIiwicGVyc29ubmVsLXZpZXciLCJzb3J0aW5nLXJhbmtpbmciLCJkcmlsbC1kb3duIiwiZHJpbGwtdXAiLCJ2ZHMtZmlsZSIsInNhcC1sb2dvLXNoYXBlIiwiZm9sZGVyLWZ1bGwiLCJzeXN0ZW0tZXhpdCIsInN5c3RlbS1leGl0LTIiLCJjbG9zZS1jb21tYW5kLWZpZWxkIiwib3Blbi1jb21tYW5kLWZpZWxkIiwic3lzLWVudGVyLTIiLCJzeXMtZW50ZXIiLCJzeXMtaGVscC0yIiwic3lzLWhlbHAiLCJzeXMtYmFjayIsInN5cy1iYWNrLTIiLCJzeXMtY2FuY2VsIiwic3lzLWNhbmNlbC0yIiwib3Blbi1mb2xkZXIiLCJzeXMtZmluZC1uZXh0Iiwic3lzLWZpbmQiLCJzeXMtbW9uaXRvciIsInN5cy1wcmV2LXBhZ2UiLCJzeXMtZmlyc3QtcGFnZSIsInN5cy1uZXh0LXBhZ2UiLCJzeXMtbGFzdC1wYWdlIiwiZ2VuZXJhdGUtc2hvcnRjdXQiLCJjcmVhdGUtc2Vzc2lvbiIsImRpc3BsYXktbW9yZSIsImVudGVyLW1vcmUiLCJ6b29tLWluIiwiem9vbS1vdXQiLCJoZWFkZXIiLCJkZXRhaWwtdmlldyIsImNvbGxhcHNlIiwiZXhwYW5kIiwicG9zaXRpdmUiLCJuZWdhdGl2ZSIsImRpc3BsYXkiLCJtZW51MiIsInJlZG8iLCJ1bmRvIiwibmF2aWdhdGlvbi11cC1hcnJvdyIsIm5hdmlnYXRpb24tZG93bi1hcnJvdyIsImRvd24iLCJ1cCIsInNoZWxmIiwiYmFja2dyb3VuZCIsInJlc2l6ZSIsIm1vdmUiLCJzaG93IiwiaGlkZSIsIm5hdi1iYWNrIiwiZXJyb3IiLCJzbGltLWFycm93LXJpZ2h0Iiwic2xpbS1hcnJvdy1sZWZ0Iiwic2xpbS1hcnJvdy1kb3duIiwic2xpbS1hcnJvdy11cCIsImZvcndhcmQiLCJvdmVyZmxvdyIsInZhbHVlLWhlbHAiLCJtdWx0aS1zZWxlY3QiLCJleGl0LWZ1bGwtc2NyZWVuIiwic3lzLWFkZCIsInN5cy1taW51cyIsImRyb3Bkb3duIiwiZXhwYW5kLWdyb3VwIiwiY29sbGFwc2UtZ3JvdXAiLCJ2ZXJ0aWNhbC1ncmlwIiwiaG9yaXpvbnRhbC1ncmlwIiwic29ydC1kZXNjZW5kaW5nIiwic29ydC1hc2NlbmRpbmciLCJhcnJvdy1kb3duIl07dmFyIGE9WyJlMDAwIiwiZTAwMSIsImUwMDIiLCJlMDAzIiwiZTAwNCIsImUwMDUiLCJlMDA2IiwiZTAwNyIsImUwMDgiLCJlMDA5IiwiZTAwYSIsImUwMGIiLCJlMDBjIiwiZTAwZCIsImUwMGUiLCJlMDBmIiwiZTAxMCIsImUwMTEiLCJlMDEyIiwiZTAxMyIsImUwMTQiLCJlMDE1IiwiZTAxNiIsImUwMTciLCJlMDE4IiwiZTAxOSIsImUwMWEiLCJlMDFiIiwiZTAxYyIsImUwMWQiLCJlMDFlIiwiZTAxZiIsImUwMjAiLCJlMDIxIiwiZTAyMiIsImUwMjMiLCJlMDI0IiwiZTAyNSIsImUwMjYiLCJlMDI3IiwiZTAyOCIsImUwMjkiLCJlMDJhIiwiZTAyYiIsImUwMmMiLCJlMDJkIiwiZTAyZSIsImUwMmYiLCJlMDMwIiwiZTAzMSIsImUwMzIiLCJlMDMzIiwiZTAzNCIsImUwMzUiLCJlMDM2IiwiZTAzNyIsImUwMzgiLCJlMDM5IiwiZTAzYSIsImUwM2IiLCJlMDNjIiwiZTAzZCIsImUwM2UiLCJlMDNmIiwiZTA0MCIsImUwNDEiLCJlMDQyIiwiZTA0MyIsImUwNDQiLCJlMDQ1IiwiZTA0NiIsImUwNDciLCJlMDQ4IiwiZTA0OSIsImUwNGEiLCJlMDRiIiwiZTA0YyIsImUwNGQiLCJlMDRlIiwiZTA0ZiIsImUwNTAiLCJlMDUxIiwiZTA1MiIsImUwNTMiLCJlMDU0IiwiZTA1NSIsImUwNTYiLCJlMDU3IiwiZTA1OCIsImUwNTkiLCJlMDVhIiwiZTA1YiIsImUwNWMiLCJlMDVkIiwiZTA1ZSIsImUwNWYiLCJlMDYwIiwiZTA2MSIsImUwNjIiLCJlMDYzIiwiZTA2NCIsImUwNjUiLCJlMDY2IiwiZTA2NyIsImUwNjgiLCJlMDY5IiwiZTA2YSIsImUwNmIiLCJlMDZjIiwiZTA2ZCIsImUwNmUiLCJlMDZmIiwiZTA3MCIsImUwNzEiLCJlMDcyIiwiZTA3MyIsImUwNzQiLCJlMDc1IiwiZTA3NiIsImUwNzciLCJlMDc4IiwiZTA3OSIsImUwN2EiLCJlMDdiIiwiZTA3YyIsImUwN2QiLCJlMDdlIiwiZTA3ZiIsImUwODAiLCJlMDgxIiwiZTA4MiIsImUwODMiLCJlMDg0IiwiZTA4NSIsImUwODYiLCJlMDg3IiwiZTA4OCIsImUwODkiLCJlMDhhIiwiZTA4YiIsImUwOGMiLCJlMDhkIiwiZTA4ZSIsImUwOGYiLCJlMDkwIiwiZTA5MSIsImUwOTIiLCJlMDkzIiwiZTA5NCIsImUwOTUiLCJlMDk2IiwiZTA5NyIsImUwOTgiLCJlMDk5IiwiZTA5YSIsImUwOWIiLCJlMDljIiwiZTA5ZCIsImUwOWUiLCJlMDlmIiwiZTBhMCIsImUwYTEiLCJlMGEyIiwiZTBhMyIsImUwYTQiLCJlMGE1IiwiZTBhNiIsImUwYTciLCJlMGE4IiwiZTBhOSIsImUwYWEiLCJlMGFiIiwiZTBhYyIsImUwYWQiLCJlMGFlIiwiZTBhZiIsImUwYjAiLCJlMGIxIiwiZTBiMiIsImUwYjMiLCJlMGI0IiwiZTBiNSIsImUwYjYiLCJlMGI3IiwiZTBiOCIsImUwYjkiLCJlMGJhIiwiZTBiYiIsImUwYmMiLCJlMGJkIiwiZTBiZSIsImUwYmYiLCJlMGMwIiwiZTBjMSIsImUwYzIiLCJlMGMzIiwiZTBjNCIsImUwYzUiLCJlMGM2IiwiZTBjNyIsImUwYzgiLCJlMGM5IiwiZTBjYSIsImUwY2IiLCJlMGNjIiwiZTBjZCIsImUwY2UiLCJlMGNmIiwiZTBkMCIsImUwZDEiLCJlMGQyIiwiZTBkMyIsImUwZDQiLCJlMGQ1IiwiZTBkNiIsImUwZDciLCJlMGQ4IiwiZTBkOSIsImUwZGEiLCJlMGRiIiwiZTBkYyIsImUwZGQiLCJlMGRlIiwiZTBkZiIsImUwZTAiLCJlMGUxIiwiZTBlMiIsImUwZTMiLCJlMGU0IiwiZTBlNSIsImUwZTYiLCJlMGU3IiwiZTBlOCIsImUwZTkiLCJlMGVhIiwiZTBlYiIsImUwZWMiLCJlMGVkIiwiZTBlZSIsImUwZWYiLCJlMGYwIiwiZTBmMSIsImUwZjIiLCJlMGYzIiwiZTBmNCIsImUwZjUiLCJlMGY2IiwiZTBmNyIsImUwZjgiLCJlMGY5IiwiZTBmYSIsImUwZmIiLCJlMGZjIiwiZTBmZCIsImUwZmUiLCJlMGZmIiwiZTEwMCIsImUxMDEiLCJlMTAyIiwiZTEwMyIsImUxMDQiLCJlMTA1IiwiZTEwNiIsImUxMDciLCJlMTA4IiwiZTEwOSIsImUxMGEiLCJlMTBiIiwiZTEwYyIsImUxMGQiLCJlMTBlIiwiZTEwZiIsImUxMTAiLCJlMTExIiwiZTExMiIsImUxMTMiLCJlMTE0IiwiZTExNSIsImUxMTYiLCJlMTE3IiwiZTExOCIsImUxMTkiLCJlMTFhIiwiZTExYiIsImUxMWMiLCJlMTFkIiwiZTExZSIsImUxMWYiLCJlMTIwIiwiZTEyMSIsImUxMjIiLCJlMTIzIiwiZTEyNCIsImUxMjUiLCJlMTI2IiwiZTEyNyIsImUxMjgiLCJlMTI5IiwiZTEyYSIsImUxMmIiLCJlMTJjIiwiZTEyZCIsImUxMmUiLCJlMTJmIiwiZTEzMCIsImUxMzEiLCJlMTMyIiwiZTEzMyIsImUxMzQiLCJlMTM1IiwiZTEzNiIsImUxMzciLCJlMTM4IiwiZTEzOSIsImUxM2EiLCJlMTNiIiwiZTEzYyIsImUxM2QiLCJlMTNlIiwiZTEzZiIsImUxNDAiLCJlMTQxIiwiZTE0MiIsImUxNDMiLCJlMTQ0IiwiZTE0NSIsImUxNDYiLCJlMTQ3IiwiZTE0OCIsImUxNDkiLCJlMTRhIiwiZTE0YiIsImUxNGMiLCJlMTRkIiwiZTE0ZSIsImUxNGYiLCJlMTUwIiwiZTE1MSIsImUxNTIiLCJlMTUzIiwiZTE1NCIsImUxNTUiLCJlMTU2IiwiZTE1NyIsImUxNTgiLCJlMTU5IiwiZTE1YSIsImUxNWIiLCJlMTVjIiwiZTE1ZCIsImUxNWUiLCJlMTVmIiwiZTE2MCIsImUxNjEiLCJlMTYyIiwiZTE2MyIsImUxNjQiLCJlMTY1IiwiZTE2NiIsImUxNjciLCJlMTY4IiwiZTE2OSIsImUxNmEiLCJlMTZiIiwiZTE2YyIsImUxNmQiLCJlMTZlIiwiZTE2ZiIsImUxNzAiLCJlMTcxIiwiZTE3MiIsImUxNzMiLCJlMTc0IiwiZTE3NSIsImUxNzYiLCJlMTc3IiwiZTE3OCIsImUxNzkiLCJlMTdhIiwiZTE3YiIsImUxN2MiLCJlMTdkIiwiZTE3ZSIsImUxN2YiLCJlMTgwIiwiZTE4MSIsImUxODIiLCJlMTgzIiwiZTE4NCIsImUxODUiLCJlMTg2IiwiZTE4NyIsImUxODgiLCJlMTg5IiwiZTE4YSIsImUxOGIiLCJlMThjIiwiZTE4ZCIsImUxOGUiLCJlMThmIiwiZTE5MCIsImUxOTEiLCJlMTkyIiwiZTE5MyIsImUxOTQiLCJlMTk1IiwiZTE5NiIsImUxOTciLCJlMTk4IiwiZTE5OSIsImUxOWEiLCJlMTliIiwiZTE5YyIsImUxOWQiLCJlMTllIiwiZTE5ZiIsImUxYTAiLCJlMWExIiwiZTFhMiIsImUxYTMiLCJlMWE0IiwiZTFhNSIsImUxYTYiLCJlMWE3IiwiZTFhOCIsImUxYTkiLCJlMWFhIiwiZTFhYiIsImUxYWMiLCJlMWFkIiwiZTFhZSIsImUxYWYiLCJlMWIwIiwiZTFiMSIsImUxYjIiLCJlMWIzIiwiZTFiNCIsImUxYjUiLCJlMWI2IiwiZTFiNyIsImUxYjgiLCJlMWI5IiwiZTFiYSIsImUxYmIiLCJlMWJjIiwiZTFiZCIsImUxYmUiLCJlMWJmIiwiZTFjMCIsImUxYzEiLCJlMWMyIiwiZTFjMyIsImUxYzQiLCJlMWM1IiwiZTFjNiIsImUxYzciLCJlMWM4IiwiZTFjOSIsImUxY2EiLCJlMWNiIiwiZTFjYyIsImUxY2QiLCJlMWNlIiwiZTFjZiIsImUxZDAiLCJlMWQxIiwiZTFkMiIsImUxZDMiLCJlMWQ0IiwiZTFkNSIsImUxZDYiLCJlMWQ3IiwiZTFkOCIsImUxZDkiLCJlMWRhIiwiZTFkYiIsImUxZGMiLCJlMWRkIiwiZTFkZSIsImUxZGYiLCJlMWUwIiwiZTFlMSIsImUxZTIiLCJlMWUzIiwiZTFlNCIsImUxZTUiLCJlMWU2IiwiZTFlNyIsImUxZTgiLCJlMWU5IiwiZTFlYSIsImUxZWIiLCJlMWVjIiwiZTFlZCIsImUxZWUiLCJlMWVmIiwiZTFmMCIsImUxZjEiLCJlMWYyIiwiZTFmMyIsImUxZjQiLCJlMWY1IiwiZTFmNiIsImUxZjciLCJlMWY4IiwiZTFmOSIsImUyMDAiLCJlMWZhIiwiZTFmYiIsImUxZmMiLCJlMWZkIiwiZTFmZSJdO3ZhciBtPXsiY2hhbGtib2FyZCI6dHJ1ZSwiY2FsZW5kYXIiOnRydWUsImFscGhhYmV0aWNhbC1vcmRlciI6dHJ1ZSwiYWRkcmVzcy1ib29rIjp0cnVlLCJoaW50Ijp0cnVlLCJwYXltZW50LWFwcHJvdmFsIjp0cnVlLCJiYXRjaC1wYXltZW50cyI6dHJ1ZSwiYXJvYmFzZSI6dHJ1ZSwicXVlc3Rpb24tbWFyayI6dHJ1ZSwibGVhZCI6dHJ1ZSwibGVhZC1vdXRkYXRlZCI6dHJ1ZSwic2ltcGxlLXBheW1lbnQiOnRydWUsInNhbGVzLW9yZGVyLWl0ZW0iOnRydWUsInNhbGVzLW9yZGVyIjp0cnVlLCJwZXItZGllbSI6dHJ1ZSwicGFpZC1sZWF2ZSI6dHJ1ZSwicGRmLXJlYWRlciI6dHJ1ZSwibXktc2FsZXMtb3JkZXIiOnRydWUsImxvYW4iOnRydWUsImdsb2JlIjp0cnVlLCJ3YWl2ZXIiOnRydWUsInVucGFpZC1sZWF2ZSI6dHJ1ZSwiY3VzdG9tZXItZmluYW5jaWFsLWZhY3Qtc2hlZXQiOnRydWUsImNybS1zYWxlcyI6dHJ1ZSwiY29tbWlzc2lvbi1jaGVjayI6dHJ1ZSwiY29sbGVjdGlvbnMtaW5zaWdodCI6dHJ1ZSwiY2FwaXRhbC1wcm9qZWN0cyI6dHJ1ZSwiYnVzaW5lc3Mtb25lIjp0cnVlLCJ0cmF2ZWwtZXhwZW5zZSI6dHJ1ZSwidHJhdmVsLWV4cGVuc2UtcmVwb3J0Ijp0cnVlLCJ0cmF2ZWwtcmVxdWVzdCI6dHJ1ZSwidGltZS1vdmVydGltZSI6dHJ1ZSwic2FsZXMtcXVvdGUiOnRydWUsInNhbGVzLW5vdGlmaWNhdGlvbiI6dHJ1ZSwiaW5jaWRlbnQiOnRydWUsIm1vbmV5LWJpbGxzIjp0cnVlLCJzYWxlcy1kb2N1bWVudCI6dHJ1ZSwib3Bwb3J0dW5pdGllcyI6dHJ1ZSwiZXhwZW5zZS1yZXBvcnQiOnRydWUsIm1vbml0b3ItcGF5bWVudHMiOnRydWUsIndpZGdldHMiOnRydWUsInN5cy1oZWxwLTIiOnRydWUsInN5cy1oZWxwIjp0cnVlLCJhY2NlcHQiOnRydWUsImFjY291bnRpbmctZG9jdW1lbnQtdmVyaWZpY2F0aW9uIjp0cnVlLCJhY3Rpdml0aWVzIjp0cnVlLCJhY3Rpdml0eS0yIjp0cnVlLCJhZGQtYWN0aXZpdHkiOnRydWUsImFkZC1hY3Rpdml0eS0yIjp0cnVlLCJhcHByb3ZhbHMiOnRydWUsImJieWQtYWN0aXZlLXNhbGVzIjp0cnVlLCJidXNpbmVzcy1ieS1kZXNpZ24iOnRydWUsImNhcnQtYXBwcm92YWwiOnRydWUsImNvbXBsZXRlIjp0cnVlLCJjdXN0b21lci1vcmRlci1lbnRyeSI6dHJ1ZSwiZW1wbG95ZWUtYXBwcm92YWxzIjp0cnVlLCJoci1hcHByb3ZhbCI6dHJ1ZSwia3BpLWNvcnBvcmF0ZS1wZXJmb3JtYW5jZSI6dHJ1ZSwia3BpLW1hbmFnaW5nLW15LWFyZWEiOnRydWUsInN1cnZleSI6dHJ1ZSwic3lzLWVudGVyIjp0cnVlLCJzeXMtZW50ZXItMiI6dHJ1ZSwidGFzayI6dHJ1ZX07dmFyIHM9IlNBUC1pY29ucyI7dmFyIHA9InNhcC1pY29uIjt2YXIgcj17fTt2YXIgZj1mYWxzZTt2YXIgYj1mdW5jdGlvbigpe3Rocm93IG5ldyBFcnJvcigpfTtiLmNyZWF0ZUNvbnRyb2xCeVVSST1mdW5jdGlvbihjLGQpe2lmKHR5cGVvZiBjPT09InN0cmluZyIpe2M9e3NyYzpjfX1pZihjJiZjLnNyYyl7dmFyIFM9Yy5zcmMsQz1kO2lmKGIuaXNJY29uVVJJKFMpKXtpZighc2FwLnVpLmNvcmUuSWNvbil7cS5zYXAucmVxdWlyZSgic2FwLnVpLmNvcmUuSWNvbiIpfUM9c2FwLnVpLmNvcmUuSWNvbjtpZihjLnRhcCl7Yy5wcmVzcz1jLnRhcDtkZWxldGUgYy50YXB9fWlmKHR5cGVvZiBDPT09ImZ1bmN0aW9uIil7cmV0dXJuIG5ldyBDKGMpfX19O2IuYWRkSWNvbj1mdW5jdGlvbihpLGMsZCl7aWYodHlwZW9mIGQ9PT0ic3RyaW5nIil7ZD17Zm9udEZhbWlseTphcmd1bWVudHNbMl0sY29udGVudDphcmd1bWVudHNbM10sb3ZlcldyaXRlOiEhYXJndW1lbnRzWzRdLHN1cHByZXNzTWlycm9yaW5nOiEhYXJndW1lbnRzWzVdfX1pZighcltjXSl7cltjXT17fX12YXIgZT1yW2NdLGcsbz1lW2ldLGg7aWYobyYmKGM9PT11bmRlZmluZWR8fCFkLm92ZXJXcml0ZSkpe3Euc2FwLmxvZy53YXJuaW5nKCJpY29uIHdpdGggdGhlIHNhbWUgaWNvbk5hbWUgaW4gdGhlIGNvbGxlY3Rpb24gYWxyZWFkeSBleGlzdHMsIHNwZWNpZnkgdGhlIGxhc3QgcGFyYW1ldGVyIHRvIHRydWUgaW4gb3JkZXIgdG8gb3ZlcndyaXRlIik7cmV0dXJufWg9e3Byb3RvY29sOnAsaG9zdG5hbWU6Y3x8aSxwYXRoOmM/aTp1bmRlZmluZWR9O2c9e25hbWU6aSxjb2xsZWN0aW9uOmMsdXJpOndpbmRvdy5VUkkuYnVpbGQoaCksZm9udEZhbWlseTpkLmZvbnRGYW1pbHksY29udGVudDpTdHJpbmcuZnJvbUNoYXJDb2RlKHBhcnNlSW50KGQuY29udGVudCwxNikpLHN1cHByZXNzTWlycm9yaW5nOmQuc3VwcHJlc3NNaXJyb3Jpbmcsc2tpcE1pcnJvcmluZzpkLnN1cHByZXNzTWlycm9yaW5nfTtlW2ldPWc7cmV0dXJuIGd9O2IuZ2V0SWNvblVSST1mdW5jdGlvbihpLGMpe3ZhciBkPXJbY107aWYoZCYmZFtpXSl7cmV0dXJuIGRbaV0udXJpfX07Yi5nZXRJY29uSW5mbz1mdW5jdGlvbihpLGMpe2IuaW5zZXJ0Rm9udEZhY2VTdHlsZSgpO3ZhciBQPWksZD1jLGUsZztpZih0aGlzLmlzSWNvblVSSShpKSl7ZT13aW5kb3cuVVJJLnBhcnNlKGkpO2lmKGUucGF0aC5sZW5ndGg9PT0xKXtQPWUuaG9zdG5hbWU7ZD11bmRlZmluZWR9ZWxzZXtkPWUuaG9zdG5hbWU7UD1lLnBhdGguc3Vic3RyKDEsZS5wYXRoLmxlbmd0aCl9fWc9cltkXTtyZXR1cm4gZyYmZ1tQXX07Yi5pc0ljb25VUkk9ZnVuY3Rpb24odSl7aWYoIXUpe3JldHVybiBmYWxzZX12YXIgYz13aW5kb3cuVVJJLnBhcnNlKHUpO3JldHVybihjLnByb3RvY29sPT09cCkmJiEhYy5ob3N0bmFtZX07Yi5nZXRJY29uQ29sbGVjdGlvbk5hbWVzPWZ1bmN0aW9uKCl7dmFyIG49W107cS5tYXAocixmdW5jdGlvbih2LGspe24ucHVzaChrKX0pO3JldHVybiBufTtiLmdldEljb25OYW1lcz1mdW5jdGlvbihjKXt2YXIgZD1yW2NdLG49W107cS5tYXAoZCxmdW5jdGlvbih2LGspe24ucHVzaChrKX0pO3JldHVybiBufTtiLmluc2VydEZvbnRGYWNlU3R5bGU9ZnVuY3Rpb24oKXtpZihmKXtyZXR1cm59dmFyIEY9cS5zYXAuZ2V0TW9kdWxlUGF0aCgic2FwLnVpLmNvcmUiLCcvJykrInRoZW1lcy9iYXNlL2ZvbnRzLyIsdyxjLGQsaTtpZighIXNhcC51aS5EZXZpY2UuYnJvd3Nlci5pbnRlcm5ldF9leHBsb3JlciYmc2FwLnVpLkRldmljZS5icm93c2VyLnZlcnNpb248MTAmJndpbmRvdy5zZWxmIT09d2luZG93LnRvcCl7Rj1iLl9jYWxjQWJzUGF0aChGLHdpbmRvdy5sb2NhdGlvbi5ocmVmKX1kPSJAZm9udC1mYWNlIHsiKyJmb250LWZhbWlseTogJ1NBUC1pY29ucyc7Iisic3JjOiB1cmwoJyIrRisiU0FQLWljb25zLmVvdCcpOyIrInNyYzogdXJsKCciK0YrIlNBUC1pY29ucy5lb3Q/I2llZml4JykgZm9ybWF0KCdlbWJlZGRlZC1vcGVudHlwZScpLCIrInVybCgnIitGKyJTQVAtaWNvbnMudHRmJykgZm9ybWF0KCd0cnVldHlwZScpOyIrImZvbnQtd2VpZ2h0OiBub3JtYWw7IisiZm9udC1zdHlsZTogbm9ybWFsOyIrIn0iO3EoJ2hlYWQnKS5hcHBlbmQoJzxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+JytkKyc8L3N0eWxlPicpO2Y9dHJ1ZX07Yi5fY2FsY0Fic1BhdGg9ZnVuY3Rpb24oUixCKXtCPUImJkIucmVwbGFjZSgvXD8uKnwjLiovZywiIik7dmFyIHU9bmV3IHdpbmRvdy5VUkkoUiksQT11LmFic29sdXRlVG8oQik7cmV0dXJuIEEuaHJlZigpfTtiLl9pc01pcnJvcmluZ1NraXBwZWQ9ZnVuY3Rpb24oaSl7cmV0dXJuISFtW2ldfTtxLmVhY2goSSxmdW5jdGlvbihpLG4pe2IuYWRkSWNvbihuLHVuZGVmaW5lZCx7Zm9udEZhbWlseTpzLGNvbnRlbnQ6YVtpXSxzdXBwcmVzc01pcnJvcmluZzpiLl9pc01pcnJvcmluZ1NraXBwZWQobil9KX0pO3JldHVybiBifSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUuSWNvblJlbmRlcmVyJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUuSWNvblJlbmRlcmVyJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvSWNvblJlbmRlcmVyIixbImpxdWVyeS5zYXAuZ2xvYmFsIl0sZnVuY3Rpb24ocSl7InVzZSBzdHJpY3QiO3ZhciBJPXt9O0kucmVuZGVyPWZ1bmN0aW9uKHIsYyl7aWYoIWMuZ2V0VmlzaWJsZSgpKXtyZXR1cm59dmFyIGk9c2FwLnVpLmNvcmUuSWNvblBvb2wuZ2V0SWNvbkluZm8oYy5nZXRTcmMoKSksdz1jLmdldFdpZHRoKCksaD1jLmdldEhlaWdodCgpLEM9Yy5nZXRDb2xvcigpLGI9Yy5nZXRCYWNrZ3JvdW5kQ29sb3IoKSxzPWMuZ2V0U2l6ZSgpLHQ9Yy5nZXRUb29sdGlwX0FzU3RyaW5nKCksVD0oc2FwLnVpLkRldmljZS5icm93c2VyLmludGVybmV0X2V4cGxvcmVyJiZzYXAudWkuRGV2aWNlLmJyb3dzZXIudmVyc2lvbjw5KTtyLndyaXRlKCI8c3BhbiIpO3Iud3JpdGVDb250cm9sRGF0YShjKTtpZighYy5nZXREZWNvcmF0aXZlKCkpe3Iud3JpdGVBdHRyaWJ1dGUoInRhYmluZGV4IiwwKX1pZih0KXtyLndyaXRlQXR0cmlidXRlRXNjYXBlZCgidGl0bGUiLHQpfWlmKGkpe2lmKCFUKXtyLndyaXRlQXR0cmlidXRlKCJkYXRhLXNhcC11aS1pY29uLWNvbnRlbnQiLGkuY29udGVudCl9ci5hZGRTdHlsZSgiZm9udC1mYW1pbHkiLCInIitpLmZvbnRGYW1pbHkrIiciKX1pZih3KXtyLmFkZFN0eWxlKCJ3aWR0aCIsdyl9aWYoaCl7ci5hZGRTdHlsZSgiaGVpZ2h0IixoKTtyLmFkZFN0eWxlKCJsaW5lLWhlaWdodCIsaCl9aWYoQyl7ci5hZGRTdHlsZSgiY29sb3IiLEMpfWlmKGIpe3IuYWRkU3R5bGUoImJhY2tncm91bmQtY29sb3IiLGIpfWlmKHMpe3IuYWRkU3R5bGUoImZvbnQtc2l6ZSIscyl9ci5hZGRDbGFzcygic2FwVWlJY29uIik7aWYoaSYmIWkuc3VwcHJlc3NNaXJyb3Jpbmcpe3IuYWRkQ2xhc3MoInNhcFVpSWNvbk1pcnJvckluUlRMIil9ci53cml0ZUNsYXNzZXMoKTtyLndyaXRlU3R5bGVzKCk7ci53cml0ZSgiPiIpO2lmKGkmJlQpe3Iud3JpdGUoaS5jb250ZW50KX1yLndyaXRlKCI8L3NwYW4+Iil9O3JldHVybiBJfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUuTG9jYWxCdXN5SW5kaWNhdG9yUmVuZGVyZXInKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS5Mb2NhbEJ1c3lJbmRpY2F0b3JSZW5kZXJlcicpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL0xvY2FsQnVzeUluZGljYXRvclJlbmRlcmVyIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJ10sZnVuY3Rpb24ocSl7InVzZSBzdHJpY3QiO3ZhciBMPXt9OyhmdW5jdGlvbigpe0wucmVuZGVyPWZ1bmN0aW9uKFIsYyl7Ui53cml0ZSgiPGRpdiIpO1Iud3JpdGVDb250cm9sRGF0YShjKTtSLmFkZENsYXNzKCJzYXBVaUxvY2FsQnVzeUluZGljYXRvciIpO1Iud3JpdGVDbGFzc2VzKCk7Ui53cml0ZSgiPiIpO3IoUixjKTtSLndyaXRlKCI8L2Rpdj4iKX07dmFyIHI9ZnVuY3Rpb24oUixjKXt2YXIgST1jLmdldElkKCk7dmFyIHM9SSsiLWFuaW1hdGlvbiI7dmFyIGI9WyItbGVmdEJveCIsIi1taWRkbGVCb3giLCItcmlnaHRCb3giXTtSLndyaXRlKCc8ZGl2Jyk7Ui53cml0ZUF0dHJpYnV0ZSgnaWQnLHMpO1IuYWRkQ2xhc3MoInNhcFVpTG9jYWxCdXN5SW5kaWNhdG9yQW5pbWF0aW9uIik7Ui53cml0ZUNsYXNzZXMoKTtSLndyaXRlKCI+Iik7Zm9yKHZhciBpPTA7aTxiLmxlbmd0aDtpKyspe1Iud3JpdGUoJzxkaXYnKTtSLmFkZENsYXNzKCJzYXBVaUxvY2FsQnVzeUluZGljYXRvckJveCIpO1Iud3JpdGVDbGFzc2VzKCk7Ui53cml0ZUF0dHJpYnV0ZSgiaWQiLEkrYltpXSk7Ui53cml0ZSgiPiIpO1Iud3JpdGUoIjwvZGl2PiIpfVIud3JpdGUoIjwvZGl2PiIpfX0oKSk7cmV0dXJuIEx9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS5Mb2NhbGUnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS5Mb2NhbGUnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9Mb2NhbGUiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvYmFzZS9PYmplY3QnXSxmdW5jdGlvbihxLEIpeyJ1c2Ugc3RyaWN0Ijt2YXIgYT0vXigoPzpbQS1aXXsyLDN9KD86LVtBLVpdezN9KXswLDN9KXxbQS1aXXs0fXxbQS1aXXs1LDh9KSg/Oi0oW0EtWl17NH0pKT8oPzotKFtBLVpdezJ9fFswLTldezN9KSk/KC1bMC05QS1aXXs1LDh9fCg/OlswLTldWzAtOUEtWl17M30pKSooPzotKFswLTlBLVdZWl0oPzotWzAtOUEtWl17Miw4fSkrKSkqKD86LShYKD86LVswLTlBLVpdezEsOH0pKykpPyQvaTt2YXIgTD1CLmV4dGVuZCgic2FwLnVpLmNvcmUuTG9jYWxlIix7Y29uc3RydWN0b3I6ZnVuY3Rpb24obCl7Qi5hcHBseSh0aGlzKTt2YXIgcj1hLmV4ZWMobC5yZXBsYWNlKC9fL2csIi0iKSk7aWYocj09PW51bGwpe3Rocm93IlRoZSBnaXZlbiBsYW5ndWFnZSBkb2VzIG5vdCBhZGhlcmUgdG8gQkNQLTQ3LiJ9dGhpcy5zTG9jYWxlSWQ9bDt0aGlzLnNMYW5ndWFnZT1yWzFdfHxudWxsO3RoaXMuc1NjcmlwdD1yWzJdfHxudWxsO3RoaXMuc1JlZ2lvbj1yWzNdfHxudWxsO3RoaXMuc1ZhcmlhbnQ9KHJbNF0mJnJbNF0uc2xpY2UoMSkpfHxudWxsO3RoaXMuc0V4dGVuc2lvbj1yWzVdfHxudWxsO3RoaXMuc1ByaXZhdGVVc2U9cls2XXx8bnVsbDtpZih0aGlzLnNMYW5ndWFnZSl7dGhpcy5zTGFuZ3VhZ2U9dGhpcy5zTGFuZ3VhZ2UudG9Mb3dlckNhc2UoKX1pZih0aGlzLnNTY3JpcHQpe3RoaXMuc1NjcmlwdD10aGlzLnNTY3JpcHQudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9eW2Etel0vLGZ1bmN0aW9uKCQpe3JldHVybiAkLnRvVXBwZXJDYXNlKCl9KX1pZih0aGlzLnNSZWdpb24pe3RoaXMuc1JlZ2lvbj10aGlzLnNSZWdpb24udG9VcHBlckNhc2UoKX19LGdldExhbmd1YWdlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc0xhbmd1YWdlfSxnZXRTY3JpcHQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zU2NyaXB0fSxnZXRSZWdpb246ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zUmVnaW9ufSxnZXRWYXJpYW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc1ZhcmlhbnR9LGdldFZhcmlhbnRTdWJ0YWdzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc1ZhcmlhbnQ/dGhpcy5zVmFyaWFudC5zcGxpdCgnLScpOltdfSxnZXRFeHRlbnNpb246ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zRXh0ZW5zaW9ufSxnZXRFeHRlbnNpb25TdWJ0YWdzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc0V4dGVuc2lvbj90aGlzLnNFeHRlbnNpb24uc2xpY2UoMikuc3BsaXQoJy0nKTpbXX0sZ2V0UHJpdmF0ZVVzZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNQcml2YXRlVXNlfSxnZXRQcml2YXRlVXNlU3VidGFnczpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNQcml2YXRlVXNlP3RoaXMuc1ByaXZhdGVVc2Uuc2xpY2UoMikuc3BsaXQoJy0nKTpbXX0saGFzUHJpdmF0ZVVzZVN1YnRhZzpmdW5jdGlvbihzKXtyZXR1cm4gcS5pbkFycmF5KHMsdGhpcy5nZXRQcml2YXRlVXNlU3VidGFncygpKT49MH0sdG9TdHJpbmc6ZnVuY3Rpb24oKXt2YXIgcj1bdGhpcy5zTGFuZ3VhZ2VdO2lmKHRoaXMuc1NjcmlwdCl7ci5wdXNoKHRoaXMuc1NjcmlwdCl9aWYodGhpcy5zUmVnaW9uKXtyLnB1c2godGhpcy5zUmVnaW9uKX1pZih0aGlzLnNWYXJpYW50KXtyLnB1c2godGhpcy5zVmFyaWFudCl9aWYodGhpcy5zRXh0ZW5zaW9uKXtyLnB1c2godGhpcy5zRXh0ZW5zaW9uKX1pZih0aGlzLnNQcml2YXRlVXNlKXtyLnB1c2godGhpcy5zUHJpdmF0ZVVzZSl9cmV0dXJuIHIuam9pbigiLSIpfSxnZXRTQVBMb2dvbkxhbmd1YWdlOmZ1bmN0aW9uKCl7dmFyIGw9dGhpcy5zTGFuZ3VhZ2V8fCIiLG07aWYobC5pbmRleE9mKCItIik+PTApe2w9bC5zbGljZSgwLGwuaW5kZXhPZigiLSIpKX1sPU1bbF18fGw7aWYobD09PSJ6aCIpe2lmKHRoaXMuc1NjcmlwdD09PSJIYW50Inx8KCF0aGlzLnNTY3JpcHQmJnRoaXMuc1JlZ2lvbj09PSJUVyIpKXtsPSJ6ZiJ9fWlmKHRoaXMuc1ByaXZhdGVVc2UmJihtPS8tKHNhcHRyY3xzYXBwc2QpKD86LXwkKS9pLmV4ZWModGhpcy5zUHJpdmF0ZVVzZSkpKXtsPShtWzFdLnRvTG93ZXJDYXNlKCk9PT0ic2FwdHJjIik/IjFRIjoiMlEifXJldHVybiBsLnRvVXBwZXJDYXNlKCl9fSk7dmFyIE09eyJpdyI6ImhlIiwiamkiOiJ5aSIsImluIjoiaWQiLCJzaCI6InNyIn07ZnVuY3Rpb24gZyh2KXt2YXIgbT0vXCQoWy1hLXowLTlBLVouX10rKSg/OjooW14kXSopKT9cJC8uZXhlYyh2KTtyZXR1cm4obSYmbVsyXSk/bVsyXS5zcGxpdCgvLC8pOm51bGx9dmFyIEE9ZygiJGNsZHItcnRsLWxvY2FsZXM6YXIsZmEsaGUkIil8fFtdO0wuX2NsZHJMb2NhbGVzPWcoIiRjbGRyLWxvY2FsZXM6YXIsYXJfRUcsYXJfU0EsYmcsYnIsY2EsY3MsZGEsZGUsZGVfQVQsZGVfQ0gsZWwsZWxfQ1ksZW4sZW5fQVUsZW5fR0IsZW5fSEssZW5fSUUsZW5fSU4sZW5fTlosZW5fUEcsZW5fU0csZW5fWkEsZXMsZXNfQVIsZXNfQk8sZXNfQ0wsZXNfQ08sZXNfTVgsZXNfUEUsZXNfVVksZXNfVkUsZXQsZmEsZmksZnIsZnJfQkUsZnJfQ0EsZnJfQ0gsZnJfTFUsaGUsaGksaHIsaHUsaWQsaXQsaXRfQ0gsamEsa28sbHQsbHYsbmIsbmwsbmxfQkUsbm4scGwscHQscHRfUFQscm8scnUscnVfVUEsc2ssc2wsc3Isc3YsdGgsdHIsdWssdmksemhfQ04semhfSEssemhfU0csemhfVFckIik7TC5fY29yZUkxOG5Mb2NhbGVzPWcoIiRjb3JlLWkxOG4tbG9jYWxlczosYXIsYmcsY2EsY3MsZGEsZGUsZWwsZW4sZXMsZXQsZmksZnIsaGksaHIsaHUsaXQsaXcsamEsa28sbHQsbHYsbmwsbm8scGwscHQscm8scnUsc2gsc2ssc2wsc3YsdGgsdHIsdWssdmksemhfQ04semhfVFckIik7TC5faW1wbGllc1JUTD1mdW5jdGlvbihsKXt2YXIgbz1uZXcgTChsKTtsPW8uZ2V0TGFuZ3VhZ2UoKXx8IiI7bD0obCYmTVtsXSl8fGw7dmFyIHI9by5nZXRSZWdpb24oKXx8IiI7aWYociYmcS5pbkFycmF5KGwrIl8iK3IsQSk+PTApe3JldHVybiB0cnVlfXJldHVybiBxLmluQXJyYXkobCxBKT49MH07cmV0dXJuIEx9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS5SZW5kZXJlcicpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLlJlbmRlcmVyJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvUmVuZGVyZXIiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnXSxmdW5jdGlvbihxKXsidXNlIHN0cmljdCI7dmFyIFI9e307Ui5leHRlbmQ9ZnVuY3Rpb24ocCl7dmFyIGM9e19zdXBlcjpwfTtmb3IodmFyIGYgaW4gcCl7aWYodHlwZW9mKHBbZl0pPT0iZnVuY3Rpb24iKXtjW2ZdPShmdW5jdGlvbigpe3ZhciBtPWYsdD1jO3JldHVybiBmdW5jdGlvbigpe3JldHVybiB0Ll9zdXBlclttXS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fSgpKX19cmV0dXJuIGN9O1IuZ2V0VGV4dEFsaWduPWZ1bmN0aW9uKHQsVCl7dmFyIHM9IiI7dmFyIGM9c2FwLnVpLmdldENvcmUoKS5nZXRDb25maWd1cmF0aW9uKCk7c3dpdGNoKHQpe2Nhc2Ugc2FwLnVpLmNvcmUuVGV4dEFsaWduLkVuZDpzd2l0Y2goVCl7Y2FzZSJMVFIiOnM9InJpZ2h0IjticmVhaztjYXNlIlJUTCI6cz0ibGVmdCI7YnJlYWs7ZGVmYXVsdDppZihjLmdldFJUTCgpKXtzPSJsZWZ0In1lbHNle3M9InJpZ2h0In1icmVha31icmVhaztjYXNlIHNhcC51aS5jb3JlLlRleHRBbGlnbi5CZWdpbjpzd2l0Y2goVCl7Y2FzZSJMVFIiOnM9ImxlZnQiO2JyZWFrO2Nhc2UiUlRMIjpzPSJyaWdodCI7YnJlYWs7ZGVmYXVsdDppZihjLmdldFJUTCgpKXtzPSJyaWdodCJ9ZWxzZXtzPSJsZWZ0In1icmVha31icmVhaztjYXNlIHNhcC51aS5jb3JlLlRleHRBbGlnbi5SaWdodDppZihjLmdldFJUTCgpKXtpZihUPT0iTFRSIil7cz0icmlnaHQifX1lbHNle3M9InJpZ2h0In1icmVhaztjYXNlIHNhcC51aS5jb3JlLlRleHRBbGlnbi5DZW50ZXI6cz0iY2VudGVyIjticmVhaztjYXNlIHNhcC51aS5jb3JlLlRleHRBbGlnbi5MZWZ0OmlmKGMuZ2V0UlRMKCkpe3M9ImxlZnQifWVsc2V7aWYoVD09IlJUTCIpe3M9ImxlZnQifX1icmVha31yZXR1cm4gc307cmV0dXJuIFJ9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS5TY3JvbGxCYXJSZW5kZXJlcicpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLlNjcm9sbEJhclJlbmRlcmVyJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvU2Nyb2xsQmFyUmVuZGVyZXIiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnXSxmdW5jdGlvbihxKXsidXNlIHN0cmljdCI7dmFyIFM9e307Uy5yZW5kZXI9ZnVuY3Rpb24ocixzKXt2YXIgYT1yO3ZhciBSPXNhcC51aS5nZXRDb3JlKCkuZ2V0Q29uZmlndXJhdGlvbigpLmdldFJUTCgpO2EuYWRkQ2xhc3MoInNhcFVpU2Nyb2xsQmFyIik7dmFyIGI7aWYoc2FwLnVpLkRldmljZS5zdXBwb3J0LnRvdWNoKXtiPSJzYXBVaVNjcm9sbEJhclRvdWNoIjthLmFkZENsYXNzKGIpfXZhciB2PXMuZ2V0VmVydGljYWwoKTt2YXIgYz1zLmdldFNpemUoKTt2YXIgQz1zLmdldENvbnRlbnRTaXplKCk7dmFyIEI9cS5zYXAuc2Nyb2xsYmFyU2l6ZShiKTt2YXIgdz1CLndpZHRoO3ZhciBoPUIuaGVpZ2h0O2lmKHYpe2Eud3JpdGUoIjxkaXYiKTthLndyaXRlQ29udHJvbERhdGEocyk7YS53cml0ZSgiIHN0eWxlPVwib3ZlcmZsb3c6aGlkZGVuO3dpZHRoOiIrdysicHgiKTtpZihjKXthLndyaXRlKCI7aGVpZ2h0OiIrYyl9YS53cml0ZSgiXCIiKTthLndyaXRlQ2xhc3NlcygpO2Eud3JpdGUoIj4iKTthLndyaXRlKCI8ZGl2ICIpO2Eud3JpdGVBdHRyaWJ1dGUoImlkIixzLmdldElkKCkrIi1zYiIpO2Eud3JpdGUoIiBzdHlsZT1cIndpZHRoOiIrdyoyKyJweDtoZWlnaHQ6MTAwJTtvdmVyZmxvdy15OnNjcm9sbDtvdmVyZmxvdy14OmhpZGRlbiIpO2lmKFIpe2lmKCghKCEhc2FwLnVpLkRldmljZS5icm93c2VyLmZpcmVmb3gmJnNhcC51aS5EZXZpY2UuYnJvd3Nlci52ZXJzaW9uPT0zLjYpKSYmKCEhIXNhcC51aS5EZXZpY2UuYnJvd3Nlci5zYWZhcmkpKXthLndyaXRlKCI7bWFyZ2luLXJpZ2h0Oi0iK3crInB4Iil9fWVsc2V7YS53cml0ZSgiO21hcmdpbi1sZWZ0Oi0iK3crInB4OyIpfWEud3JpdGUoIlwiPiIpO2Eud3JpdGUoIjxkaXYiKTthLndyaXRlQXR0cmlidXRlKCJpZCIscy5nZXRJZCgpKyItc2JjbnQiKTthLndyaXRlKCIgc3R5bGU9XCJ3aWR0aDoiK3crInB4Iik7aWYoQyl7YS53cml0ZSgiO2hlaWdodDoiK0MpfWEud3JpdGUoIlwiIik7YS53cml0ZSgiPiIpO2Eud3JpdGUoIjwvZGl2PiIpO2Eud3JpdGUoIjwvZGl2PiIpO2Eud3JpdGUoIjxkaXY+IDxzcGFuIGlkPSIrcy5nZXRJZCgpKyItZmZzaXplIisiIHN0eWxlPSdwb3NpdGlvbjogYWJzb2x1dGU7IHRvcDogLTkwMDBweDsgbGVmdDogLTkwMDBweDsgdmlzaWJpbGl0eTogaGlkZGVuOyBsaW5lLWhlaWdodDogbm9ybWFsOyc+IEZGIFNpemU8L3NwYW4+PC9kaXY+Iik7YS53cml0ZSgiPC9kaXY+Iil9ZWxzZXthLndyaXRlKCI8ZGl2Iik7YS53cml0ZUNvbnRyb2xEYXRhKHMpO2Eud3JpdGUoIiBzdHlsZT1cIm92ZXJmbG93OmhpZGRlbjtoZWlnaHQ6IitoKyJweCIpO2lmKGMpe2Eud3JpdGUoIjt3aWR0aDoiK2MpfWEud3JpdGUoIlwiIik7YS53cml0ZUNsYXNzZXMoKTthLndyaXRlKCI+Iik7YS53cml0ZSgiPGRpdiAiKTthLndyaXRlQXR0cmlidXRlKCJpZCIscy5nZXRJZCgpKyItc2IiKTthLndyaXRlKCIgc3R5bGU9XCJoZWlnaHQ6IitoKjIrInB4O21hcmdpbi10b3A6LSIraCsicHg7b3ZlcmZsb3cteDpzY3JvbGw7b3ZlcmZsb3cteTpoaWRkZW5cIj4iKTthLndyaXRlKCI8ZGl2Iik7YS53cml0ZUF0dHJpYnV0ZSgiaWQiLHMuZ2V0SWQoKSsiLXNiY250Iik7YS53cml0ZSgiIHN0eWxlPVwiaGVpZ2h0OiIraCsicHgiKTtpZihDKXthLndyaXRlKCI7d2lkdGg6IitDKX1hLndyaXRlKCJcIiIpO2Eud3JpdGUoIj4iKTthLndyaXRlKCI8L2Rpdj4iKTthLndyaXRlKCI8L2Rpdj4iKTthLndyaXRlKCI8L2Rpdj4iKX19O3JldHVybiBTfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUuVGhlbWVDaGVjaycpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLlRoZW1lQ2hlY2snKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9UaGVtZUNoZWNrIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL0RldmljZScsJ3NhcC91aS9iYXNlL09iamVjdCcsJ2pxdWVyeS5zYXAuc2NyaXB0J10sZnVuY3Rpb24ocSxELEIpeyJ1c2Ugc3RyaWN0IjtzYXAudWkuX21heFRoZW1lQ2hlY2tDeWNsZXM9MTAwO3ZhciBUPUIuZXh0ZW5kKCJzYXAudWkuY29yZS5UaGVtZUNoZWNrIix7Y29uc3RydWN0b3I6ZnVuY3Rpb24oQyl7dGhpcy5fb0NvcmU9Qzt0aGlzLl9pQ291bnQ9MDt0aGlzLl9DVVNUT01DU1NDSEVDSz0vXC5zYXBVaVRoZW1lRGVzaWduZXJDdXN0b21Dc3MvaTt0aGlzLl9DVVNUT01JRD0ic2FwLXVpLWNvcmUtY3VzdG9tY3NzIjt0aGlzLl9jdXN0b21DU1NBZGRlZD1mYWxzZTt0aGlzLl90aGVtZUNoZWNrZWRGb3JDdXN0b209bnVsbDt0aGlzLl9tQWRkaXRpb25hbExpYkNzcz17fX0sZ2V0SW50ZXJmYWNlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9LGZpcmVUaGVtZUNoYW5nZWRFdmVudDpmdW5jdGlvbihvLGYpe2ModGhpcyk7dmFyIHU9c2FwLnVpLl9tYXhUaGVtZUNoZWNrQ3ljbGVzPjA7aWYodXx8Zil7ZC5hcHBseSh0aGlzLFt0cnVlXSl9ZWxzZXtULnRoZW1lTG9hZGVkPXRydWV9aWYoIW8mJiF0aGlzLl9zVGhlbWVDaGVja0lkKXt0aGlzLl9vQ29yZS5maXJlVGhlbWVDaGFuZ2VkKHt0aGVtZTp0aGlzLl9vQ29yZS5nZXRDb25maWd1cmF0aW9uKCkuZ2V0VGhlbWUoKX0pfX19KTtULnRoZW1lTG9hZGVkPWZhbHNlO1QuY2hlY2tTdHlsZT1mdW5jdGlvbihzLGwpe2lmKHR5cGVvZihzKT09PSJzdHJpbmciKXtzPXEuc2FwLmRvbUJ5SWQocyl9dmFyIFM9cShzKTt0cnl7dmFyIHI9IXN8fCEhKChzLnNoZWV0JiZzLnNoZWV0LmNzc1J1bGVzLmxlbmd0aD4wKXx8ISEocy5zdHlsZVNoZWV0JiZzLnN0eWxlU2hlZXQuY3NzVGV4dC5sZW5ndGg+MCl8fCEhKHMuaW5uZXJIVE1MJiZzLmlubmVySFRNTC5sZW5ndGg+MCkpO3ZhciBmPVMuYXR0cigic2FwLXVpLXJlYWR5Iik7Zj0hIShmPT09InRydWUifHxmPT09ImZhbHNlIik7aWYobCl7cS5zYXAubG9nLmRlYnVnKCJUaGVtZUNoZWNrOiBDaGVjayBzdHlsZXMgJyIrUy5hdHRyKCJpZCIpKyInOiAiK3IrIi8iK2YrIi8iKyEhcyl9cmV0dXJuIHJ8fGZ9Y2F0Y2goZSl7fWlmKGwpe3Euc2FwLmxvZy5kZWJ1ZygiVGhlbWVDaGVjazogRXJyb3IgZHVyaW5nIGNoZWNrIHN0eWxlcyAnIitTLmF0dHIoImlkIikrIic6IGZhbHNlL2ZhbHNlLyIrISFzKX1yZXR1cm4gZmFsc2V9O2Z1bmN0aW9uIGModCl7VC50aGVtZUxvYWRlZD1mYWxzZTtpZih0Ll9zVGhlbWVDaGVja0lkKXtxLnNhcC5jbGVhckRlbGF5ZWRDYWxsKHQuX3NUaGVtZUNoZWNrSWQpO3QuX3NUaGVtZUNoZWNrSWQ9bnVsbDt0Ll9pQ291bnQ9MDt0Ll9tQWRkaXRpb25hbExpYkNzcz17fX19ZnVuY3Rpb24gYSh0KXt2YXIgbD10Ll9vQ29yZS5nZXRMb2FkZWRMaWJyYXJpZXMoKTt2YXIgcz10Ll9vQ29yZS5nZXRDb25maWd1cmF0aW9uKCkuZ2V0VGhlbWUoKTt2YXIgcD10Ll9vQ29yZS5fZ2V0VGhlbWVQYXRoKCJzYXAudWkuY29yZSIscykrImN1c3RvbS5jc3MiO3ZhciByPXRydWU7aWYoISF0Ll9jdXN0b21DU1NBZGRlZCYmdC5fdGhlbWVDaGVja2VkRm9yQ3VzdG9tPT09cyl7bFt0Ll9DVVNUT01JRF09e319ZnVuY3Rpb24gZShmKXtyPXImJlQuY2hlY2tTdHlsZSgic2FwLXVpLXRoZW1lLSIrZix0cnVlKTtpZighIXIpe2lmKEQuYnJvd3Nlci5tc2llJiZELmJyb3dzZXIudmVyc2lvbjw9OSl7dmFyIFM9cS5zYXAuZG9tQnlJZCgic2FwLXVpLXRoZW1lLSIrZik7dmFyIFI9UyYmUy5zaGVldCYmUy5zaGVldC5ydWxlcyYmUy5zaGVldC5ydWxlcy5sZW5ndGg/Uy5zaGVldC5ydWxlcy5sZW5ndGg6MDtpZihSPT09NDA5NSl7dmFyIG49cGFyc2VJbnQocShTKS5hdHRyKCJzYXAtdWktY3NzLWNvdW50IiksMTApO2lmKGlzTmFOKG4pKXtuPTF9ZWxzZXtuKz0xfXZhciBBPSJpZTlfIituO3ZhciBnPXRoaXMubmFtZSsiLSIrQTt2YXIgTD0ic2FwLXVpLXRoZW1lLSIrZztpZighdC5fbUFkZGl0aW9uYWxMaWJDc3NbZ10mJiFxLnNhcC5kb21CeUlkKEwpKXt0Ll9tQWRkaXRpb25hbExpYkNzc1tnXT17bmFtZTp0aGlzLm5hbWV9O3ZhciBvO2lmKGYhPT10aGlzLm5hbWUpe289cS5zYXAuZG9tQnlJZCgic2FwLXVpLXRoZW1lLSIrdGhpcy5uYW1lKX1lbHNle289U312YXIgaD1uZXcgVVJJKG8uZ2V0QXR0cmlidXRlKCJocmVmIikpO3ZhciBpPWguc3VmZml4KCk7dmFyIEY9aC5maWxlbmFtZSgpO2lmKGkubGVuZ3RoPjApe2k9Ii4iK2k7Rj1GLnNsaWNlKDAsLWkubGVuZ3RoKX1oLmZpbGVuYW1lKEYrIl8iK0EraSk7dmFyIEg9aC50b1N0cmluZygpO3ZhciBqPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImxpbmsiKTtqLnR5cGU9InRleHQvY3NzIjtqLnJlbD0ic3R5bGVzaGVldCI7ai5ocmVmPUg7ai5pZD1MO3EoaikuYXR0cigic2FwLXVpLWNzcy1jb3VudCIsbikubG9hZChmdW5jdGlvbigpe3EoaikuYXR0cigic2FwLXVpLXJlYWR5IiwidHJ1ZSIpfSkuZXJyb3IoZnVuY3Rpb24oKXtxKGopLmF0dHIoInNhcC11aS1yZWFkeSIsImZhbHNlIil9KTtTLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGosUy5uZXh0U2libGluZyl9fX1pZih0Ll90aGVtZUNoZWNrZWRGb3JDdXN0b20hPXMpe2lmKGIodCxmKSl7cS5zYXAuaW5jbHVkZVN0eWxlU2hlZXQocCx0Ll9DVVNUT01JRCk7dC5fY3VzdG9tQ1NTQWRkZWQ9dHJ1ZTtxLnNhcC5sb2cud2FybmluZygiVGhlbWVDaGVjayBkZWxpdmVyZWQgY3VzdG9tIENTUyBuZWVkcyB0byBiZSBsb2FkZWQsIFRoZW1lIG5vdCB5ZXQgYXBwbGllZCIpO3QuX3RoZW1lQ2hlY2tlZEZvckN1c3RvbT1zO3I9ZmFsc2U7cmV0dXJuIGZhbHNlfWVsc2V7dmFyIGs9cSgiTElOS1tpZD0nIit0Ll9DVVNUT01JRCsiJ10iKTtpZihrLmxlbmd0aD4wKXtrLnJlbW92ZSgpO3Euc2FwLmxvZy5kZWJ1ZygiQ3VzdG9tIENTUyByZW1vdmVkIil9dC5fY3VzdG9tQ1NTQWRkZWQ9ZmFsc2V9fX19cS5lYWNoKGwsZSk7cS5lYWNoKHQuX21BZGRpdGlvbmFsTGliQ3NzLGUpO2lmKCFyKXtxLnNhcC5sb2cud2FybmluZygiVGhlbWVDaGVjazogVGhlbWUgbm90IHlldCBhcHBsaWVkLiIpfWVsc2V7dC5fdGhlbWVDaGVja2VkRm9yQ3VzdG9tPXN9cmV0dXJuIHJ9ZnVuY3Rpb24gYih0LGwpe3ZhciByPTIscz1mYWxzZSxSPUFycmF5KCk7aWYocS5zYXAuZG9tQnlJZCgic2FwLXVpLXRoZW1lLSIrbCkpe3ZhciBlPXEuc2FwLmRvbUJ5SWQoInNhcC11aS10aGVtZS0iK2wpO2lmKGUuc2hlZXQpe1I9ZS5zaGVldC5jc3NSdWxlc31lbHNlIGlmKGUuc3R5bGVTaGVldCl7Uj1lLnN0eWxlU2hlZXQucnVsZXN9fWlmKFIubGVuZ3RoPT0wKXtxLnNhcC5sb2cud2FybmluZygiQ3VzdG9tIGNoZWNrOiBGYWlsZWQgcmV0cmlldmluZyBhIENTUyBydWxlIGZyb20gc3R5bGVzaGVldCAiK2wpO3JldHVybiBmYWxzZX1mb3IodmFyIGk9MDsoaTxyJiZpPFIubGVuZ3RoKTtpKyspe2lmKHQuX0NVU1RPTUNTU0NIRUNLLnRlc3QoUltpXS5zZWxlY3RvclRleHQpKXtzPXRydWV9fXJldHVybiBzfWZ1bmN0aW9uIGQoZil7dGhpcy5faUNvdW50Kys7dmFyIGU9dGhpcy5faUNvdW50PnNhcC51aS5fbWF4VGhlbWVDaGVja0N5Y2xlcztpZighYSh0aGlzKSYmIWUpe3RoaXMuX3NUaGVtZUNoZWNrSWQ9cS5zYXAuZGVsYXllZENhbGwoMix0aGlzLGQpfWVsc2UgaWYoIWYpe2ModGhpcyk7VC50aGVtZUxvYWRlZD10cnVlO3RoaXMuX29Db3JlLmZpcmVUaGVtZUNoYW5nZWQoe3RoZW1lOnRoaXMuX29Db3JlLmdldENvbmZpZ3VyYXRpb24oKS5nZXRUaGVtZSgpfSk7aWYoZSl7cS5zYXAubG9nLndhcm5pbmcoIlRoZW1lQ2hlY2s6IG1heC4gY2hlY2sgY3ljbGVzIHJlYWNoZWQuIil9fWVsc2V7VC50aGVtZUxvYWRlZD10cnVlfX1yZXR1cm4gVH0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLlZhbHVlU3RhdGVTdXBwb3J0Jykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUuVmFsdWVTdGF0ZVN1cHBvcnQnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9WYWx1ZVN0YXRlU3VwcG9ydCIsWydqcXVlcnkuc2FwLmdsb2JhbCddLGZ1bmN0aW9uKHEpeyJ1c2Ugc3RyaWN0Ijt2YXIgVj17fTt2YXIgdD1udWxsO3ZhciBlPWZ1bmN0aW9uKCl7aWYoIXQpe3Q9e307dmFyIHI9c2FwLnVpLmdldENvcmUoKS5nZXRMaWJyYXJ5UmVzb3VyY2VCdW5kbGUoInNhcC51aS5jb3JlIik7dFtzYXAudWkuY29yZS5WYWx1ZVN0YXRlLkVycm9yXT1yLmdldFRleHQoIlZBTFVFX1NUQVRFX0VSUk9SIik7dFtzYXAudWkuY29yZS5WYWx1ZVN0YXRlLldhcm5pbmddPXIuZ2V0VGV4dCgiVkFMVUVfU1RBVEVfV0FSTklORyIpO3Rbc2FwLnVpLmNvcmUuVmFsdWVTdGF0ZS5TdWNjZXNzXT1yLmdldFRleHQoIlZBTFVFX1NUQVRFX1NVQ0NFU1MiKX19O1YuZW5yaWNoVG9vbHRpcD1mdW5jdGlvbihFLFQpe2lmKCFUJiZFLmdldFRvb2x0aXAoKSl7cmV0dXJuIHVuZGVmaW5lZH1pZihFLmdldFZhbHVlU3RhdGUpe3ZhciBzPUUuZ2V0VmFsdWVTdGF0ZSgpO2lmKHMmJihzIT1zYXAudWkuY29yZS5WYWx1ZVN0YXRlLk5vbmUpKXtlKCk7cmV0dXJuKFQ/VCsiIC0gIjoiIikrdFtzXX19cmV0dXJuIFR9O1YuZ2V0QWRkaXRpb25hbFRleHQ9ZnVuY3Rpb24oRSl7dmFyIHI9bnVsbDtpZihFLmdldFZhbHVlU3RhdGUpe3ZhciBzPUUuZ2V0VmFsdWVTdGF0ZSgpO2lmKHMmJihzIT1zYXAudWkuY29yZS5WYWx1ZVN0YXRlLk5vbmUpKXtlKCk7cj10W3NdfX1yZXR1cm4gcn07cmV0dXJuIFZ9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS5YTUxUZW1wbGF0ZVByb2Nlc3NvcicpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLlhNTFRlbXBsYXRlUHJvY2Vzc29yJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvWE1MVGVtcGxhdGVQcm9jZXNzb3IiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnXSxmdW5jdGlvbihxKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gcCh0LHYsbixjKXt2YXIgYj1zYXAudWkuYmFzZS5NYW5hZ2VkT2JqZWN0LmJpbmRpbmdQYXJzZXIodixjLHRydWUpO2lmKGImJnR5cGVvZiBiPT09Im9iamVjdCIpe3JldHVybiBifXZhciBWPXY9Ynx8djt2YXIgVD1zYXAudWkuYmFzZS5EYXRhVHlwZS5nZXRUeXBlKHQpO2lmKFQpe2lmKFQgaW5zdGFuY2VvZiBzYXAudWkuYmFzZS5EYXRhVHlwZSl7Vj1ULnBhcnNlVmFsdWUodil9fWVsc2V7dGhyb3cgbmV3IEVycm9yKCJQcm9wZXJ0eSAiK24rIiBoYXMgdW5rbm93biB0eXBlICIrdCl9cmV0dXJuIHR5cGVvZiBWPT09InN0cmluZyI/c2FwLnVpLmJhc2UuTWFuYWdlZE9iamVjdC5iaW5kaW5nUGFyc2VyLmVzY2FwZShWKTpWfWZ1bmN0aW9uIGwoeCl7cmV0dXJuIHgubG9jYWxOYW1lfHx4LmJhc2VOYW1lfHx4Lm5vZGVOYW1lfXZhciBYPXt9O1gubG9hZFRlbXBsYXRlPWZ1bmN0aW9uKHQsZSl7dmFyIHI9cS5zYXAuZ2V0UmVzb3VyY2VOYW1lKHQsIi4iKyhlfHwidmlldyIpKyIueG1sIik7cmV0dXJuIHEuc2FwLmxvYWRSZXNvdXJjZShyKS5kb2N1bWVudEVsZW1lbnR9O1gucGFyc2VWaWV3QXR0cmlidXRlcz1mdW5jdGlvbih4LHYscyl7dmFyIGE9di5nZXRNZXRhZGF0YSgpLmdldEFsbFByb3BlcnRpZXMoKTtmb3IodmFyIGk9MDtpPHguYXR0cmlidXRlcy5sZW5ndGg7aSsrKXt2YXIgYj14LmF0dHJpYnV0ZXNbaV07aWYoYi5uYW1lPT09J2NvbnRyb2xsZXJOYW1lJyl7di5fY29udHJvbGxlck5hbWU9Yi52YWx1ZX1lbHNlIGlmKGIubmFtZT09PSdyZXNvdXJjZUJ1bmRsZU5hbWUnKXt2Ll9yZXNvdXJjZUJ1bmRsZU5hbWU9Yi52YWx1ZX1lbHNlIGlmKGIubmFtZT09PSdyZXNvdXJjZUJ1bmRsZVVybCcpe3YuX3Jlc291cmNlQnVuZGxlVXJsPWIudmFsdWV9ZWxzZSBpZihiLm5hbWU9PT0ncmVzb3VyY2VCdW5kbGVMb2NhbGUnKXt2Ll9yZXNvdXJjZUJ1bmRsZUxvY2FsZT1iLnZhbHVlfWVsc2UgaWYoYi5uYW1lPT09J3Jlc291cmNlQnVuZGxlQWxpYXMnKXt2Ll9yZXNvdXJjZUJ1bmRsZUFsaWFzPWIudmFsdWV9ZWxzZSBpZihiLm5hbWU9PT0nY2xhc3MnKXt2LmFkZFN0eWxlQ2xhc3MoYi52YWx1ZSl9ZWxzZSBpZighc1tiLm5hbWVdJiZhW2IubmFtZV0pe3NbYi5uYW1lXT1wKGFbYi5uYW1lXS50eXBlLGIudmFsdWUsYi5uYW1lLHYuX29Db250YWluaW5nVmlldy5vQ29udHJvbGxlcil9fX07WC5wYXJzZVRlbXBsYXRlPWZ1bmN0aW9uKHgsdil7dmFyIHI9W107dmFyIGM9dW5kZWZpbmVkO3ZhciBDPXYuc1ZpZXdOYW1lfHx2Ll9zRnJhZ21lbnROYW1lO2lmKCFDKXt2YXIgdD12O3ZhciBMPTA7d2hpbGUoKytMPDEwMDAmJnQmJnQhPT10Ll9vQ29udGFpbmluZ1ZpZXcpe3Q9dC5fb0NvbnRhaW5pbmdWaWV3fUM9dC5zVmlld05hbWV9aWYodi5pc1N1YlZpZXcoKSl7YSh4LHRydWUpfWVsc2V7Yih4KX1yZXR1cm4gcjtmdW5jdGlvbiBhKHgsUixJKXtpZih4Lm5vZGVUeXBlPT09MSl7dmFyIHM9bCh4KTtpZih4Lm5hbWVzcGFjZVVSST09PSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sInx8eC5uYW1lc3BhY2VVUkk9PT0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciKXtyLnB1c2goIjwiK3MrIiAiKTt2YXIgajtmb3IodmFyIGk9MDtpPHguYXR0cmlidXRlcy5sZW5ndGg7aSsrKXt2YXIgaz14LmF0dHJpYnV0ZXNbaV07dmFyIG09ay52YWx1ZTtpZihrLm5hbWU9PT0iaWQiKXttPXYuX29Db250YWluaW5nVmlldy5jcmVhdGVJZChtKX1yLnB1c2goay5uYW1lKyI9XCIiK3Euc2FwLmVuY29kZUhUTUwobSkrIlwiICIpfWlmKFI9PT10cnVlKXtyLnB1c2goImRhdGEtc2FwLXVpLXByZXNlcnZlIisiPVwiIit2LmdldElkKCkrIlwiICIpfXIucHVzaCgiPiIpO2IoeCk7ci5wdXNoKCI8LyIrcysiPiIpfWVsc2UgaWYocz09PSJGcmFnbWVudERlZmluaXRpb24iJiZ4Lm5hbWVzcGFjZVVSST09PSJzYXAudWkuY29yZSIpe2IoeCxmYWxzZSx0cnVlKX1lbHNle3ZhciBuPWUoeCk7Zm9yKHZhciBpPTA7aTxuLmxlbmd0aDtpKyspe3ZhciBvPW5baV07aWYodi5nZXRNZXRhZGF0YSgpLmhhc0FnZ3JlZ2F0aW9uKCJjb250ZW50Iikpe3YuYWRkQWdncmVnYXRpb24oImNvbnRlbnQiLG8pfWVsc2UgaWYodi5nZXRNZXRhZGF0YSgpLmhhc0Fzc29jaWF0aW9uKCgiY29udGVudCIpKSl7di5hZGRBc3NvY2lhdGlvbigiY29udGVudCIsbyl9ci5wdXNoKG8pfX19ZWxzZSBpZih4Lm5vZGVUeXBlPT09MyYmIUkpe3ZhciB1PXgudGV4dENvbnRlbnR8fHgudGV4dCx3PWwoeC5wYXJlbnROb2RlKTtpZih1KXtpZih3IT0ic3R5bGUiKXt1PXEuc2FwLmVuY29kZUhUTUwodSl9ci5wdXNoKHUpfX19ZnVuY3Rpb24gYih4LFIsSSl7dmFyIGo9eC5jaGlsZE5vZGVzO2Zvcih2YXIgaT0wO2k8ai5sZW5ndGg7aSsrKXthKGpbaV0sUixJKX19ZnVuY3Rpb24gZihuLHMpe3ZhciBpO3ZhciBtPXNhcC51aS5nZXRDb3JlKCkuZ2V0TG9hZGVkTGlicmFyaWVzKCk7cS5lYWNoKG0sZnVuY3Rpb24oaixrKXtpZihuPT09ay5uYW1lc3BhY2V8fG49PT1rLm5hbWUpe2k9ay5uYW1lKyIuIisoKGsudGFnTmFtZXMmJmsudGFnTmFtZXNbc10pfHxzKX19KTtpPWl8fG4rIi4iK3M7cS5zYXAucmVxdWlyZShpKTt2YXIgbz1xLnNhcC5nZXRPYmplY3QoaSk7aWYobyl7cmV0dXJuIG99ZWxzZXtxLnNhcC5sb2cuZXJyb3IoIkNhbid0IGZpbmQgb2JqZWN0IGNsYXNzICciK2krIicgZm9yIFhNTC12aWV3IiwiIiwiWE1MVGVtcGxhdGVQcm9jZXNzb3IuanMiKX19ZnVuY3Rpb24gZChuKXtpZihuLm5hbWVzcGFjZVVSST09PSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sInx8bi5uYW1lc3BhY2VVUkk9PT0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciKXt2YXIgaT1uLmF0dHJpYnV0ZXNbJ2lkJ10/bi5hdHRyaWJ1dGVzWydpZCddLnRleHRDb250ZW50fHxuLmF0dHJpYnV0ZXNbJ2lkJ10udGV4dDpudWxsO3JldHVybltuZXcgc2FwLnVpLmNvcmUubXZjLlhNTFZpZXcoe2lkOmk/di5fb0NvbnRhaW5pbmdWaWV3LmNyZWF0ZUlkKGkpOnVuZGVmaW5lZCx4bWxOb2RlOm4sY29udGFpbmluZ1ZpZXc6di5fb0NvbnRhaW5pbmdWaWV3fSldfWVsc2V7cmV0dXJuIGUobil9fWZ1bmN0aW9uIGUobil7aWYobChuKT09PSJFeHRlbnNpb25Qb2ludCImJm4ubmFtZXNwYWNlVVJJPT09InNhcC51aS5jb3JlIil7cmV0dXJuIGcobix2KX1lbHNle3JldHVybiBoKG4pfX1mdW5jdGlvbiBnKG4sdil7dmFyIFI9dW5kZWZpbmVkO2lmKHNhcC51aS5jb3JlLkN1c3RvbWl6aW5nQ29uZmlndXJhdGlvbil7dmFyIGo9c2FwLnVpLmNvcmUuQ3VzdG9taXppbmdDb25maWd1cmF0aW9uLmdldFZpZXdFeHRlbnNpb24oQyxuLmdldEF0dHJpYnV0ZSgibmFtZSIpKTtpZihqKXtpZihqLmNsYXNzTmFtZSl7cS5zYXAucmVxdWlyZShqLmNsYXNzTmFtZSk7dmFyIG89cS5zYXAuZ2V0T2JqZWN0KGouY2xhc3NOYW1lKTtxLnNhcC5sb2cuaW5mbygiQ3VzdG9taXppbmc6IFZpZXcgZXh0ZW5zaW9uIGZvdW5kIGZvciBleHRlbnNpb24gcG9pbnQgJyIrbi5nZXRBdHRyaWJ1dGUoIm5hbWUiKSsiJyBpbiBWaWV3ICciK0MrIic6ICIrai5jbGFzc05hbWUrIjogIisoai52aWV3TmFtZXx8ai5mcmFnbWVudE5hbWUpKTtpZihqLmNsYXNzTmFtZT09PSJzYXAudWkuY29yZS5GcmFnbWVudCIpe3ZhciBGPW5ldyBvKHt0eXBlOmoudHlwZSxmcmFnbWVudE5hbWU6ai5mcmFnbWVudE5hbWUsY29udGFpbmluZ1ZpZXc6dn0pO1I9KHEuaXNBcnJheShGKT9GOltGXSl9ZWxzZSBpZihqLmNsYXNzTmFtZT09PSJzYXAudWkuY29yZS5tdmMuVmlldyIpe3ZhciB2PXNhcC51aS52aWV3KHt0eXBlOmoudHlwZSx2aWV3TmFtZTpqLnZpZXdOYW1lfSk7Uj1bdl19ZWxzZXtxLnNhcC5sb2cud2FybmluZygiQ3VzdG9taXppbmc6IFVua25vd24gZXh0ZW5zaW9uIGNsYXNzTmFtZSBjb25maWd1cmVkIChhbmQgaWdub3JlZCkgaW4gQ29tcG9uZW50LmpzIGZvciBleHRlbnNpb24gcG9pbnQgJyIrbi5nZXRBdHRyaWJ1dGUoIm5hbWUiKSsiJyBpbiBWaWV3ICciK0MrIic6ICIrai5jbGFzc05hbWUpfX1lbHNle3Euc2FwLmxvZy53YXJuaW5nKCJDdXN0b21pemluZzogbm8gZXh0ZW5zaW9uIGNsYXNzTmFtZSBjb25maWd1cmVkIGluIENvbXBvbmVudC5qcyBmb3IgZXh0ZW5zaW9uIHBvaW50ICciK24uZ2V0QXR0cmlidXRlKCJuYW1lIikrIicgaW4gVmlldyAnIitDKyInOiAiK2ouY2xhc3NOYW1lKX19ZWxzZXtxLnNhcC5sb2cuZGVidWcoIkN1c3RvbWl6aW5nOiBubyBWaWV3IGV4dGVuc2lvbiBmb3VuZCBmb3IgRXh0ZW5zaW9uUG9pbnQgJyIrbi5nZXRBdHRyaWJ1dGUoIm5hbWUiKSsiJyBpbiBWaWV3ICciK0MrIicuIil9fWlmKCFSKXtSPVtdO3ZhciBrPW4uY2hpbGROb2Rlcztmb3IodmFyIGk9MDtpPGsubGVuZ3RoO2krKyl7dmFyIG09a1tpXTtpZihtLm5vZGVUeXBlPT09MSl7Uj1xLm1lcmdlKFIsZChtKSl9fX1yZXR1cm4gUnx8W119ZnVuY3Rpb24gaChuKXt2YXIgaj1uLm5hbWVzcGFjZVVSSSxvPWYoaixsKG4pKSxzPXt9LFM9IiIsaz1bXSxPO2lmKCFvKXtyZXR1cm5bXX12YXIgbT1vLmdldE1ldGFkYXRhKCk7dmFyIEo9bS5nZXRKU09OS2V5cygpO2Zvcih2YXIgaT0wO2k8bi5hdHRyaWJ1dGVzLmxlbmd0aDtpKyspe3ZhciB1PW4uYXR0cmlidXRlc1tpXTt2YXIgTj11Lm5hbWU7dmFyIFY9dS52YWx1ZTt2YXIgST1KW05dO2lmKE49PT0iaWQiKXtzW05dPXYuX29Db250YWluaW5nVmlldy5jcmVhdGVJZChWKTtPPVZ9ZWxzZSBpZihOPT09ImNsYXNzIil7Uys9Vn1lbHNlIGlmKE49PT0idmlld05hbWUiKXtzW05dPVZ9ZWxzZSBpZihOPT09ImZyYWdtZW50TmFtZSIpe3NbTl09VjtzWydjb250YWluaW5nVmlldyddPXYuX29Db250YWluaW5nVmlld31lbHNlIGlmKE49PT0iYmluZGluZyIpe3ZhciBCPXNhcC51aS5iYXNlLk1hbmFnZWRPYmplY3QuYmluZGluZ1BhcnNlcihWLHYuX29Db250YWluaW5nVmlldy5vQ29udHJvbGxlcik7cy5vYmplY3RCaW5kaW5ncz1zLm9iamVjdEJpbmRpbmdzfHx7fTtzLm9iamVjdEJpbmRpbmdzW0IubW9kZWx8fHVuZGVmaW5lZF09Qn1lbHNlIGlmKE4uaW5kZXhPZigiOiIpPi0xKXtpZih1Lm5hbWVzcGFjZVVSST09PSJodHRwOi8vc2NoZW1hcy5zYXAuY29tL3NhcHVpNS9leHRlbnNpb24vc2FwLnVpLmNvcmUuQ3VzdG9tRGF0YS8xIil7dmFyIHc9bCh1KTtrLnB1c2gobmV3IHNhcC51aS5jb3JlLkN1c3RvbURhdGEoe2tleTp3LHZhbHVlOnAoImFueSIsVix3LHYuX29Db250YWluaW5nVmlldy5vQ29udHJvbGxlcil9KSl9ZWxzZSBpZihOLmluZGV4T2YoInhtbG5zOiIpIT09MCl7cS5zYXAubG9nLndhcm5pbmcodisiOiBYTUxWaWV3IHBhcnNlciBlbmNvdW50ZXJlZCBhbmQgaWdub3JlZCBhdHRyaWJ1dGUgJyIrTisiJyAodmFsdWU6ICciK1YrIicpIHdpdGggdW5rbm93biBuYW1lc3BhY2UiKX19ZWxzZSBpZihJJiZJLl9pS2luZD09PTApe3NbTl09cChJLnR5cGUsVixOLHYuX29Db250YWluaW5nVmlldy5vQ29udHJvbGxlcil9ZWxzZSBpZihJJiZJLl9pS2luZD09PTEmJkkuYWx0VHlwZXMpe3NbTl09cChJLmFsdFR5cGVzWzBdLFYsTix2Ll9vQ29udGFpbmluZ1ZpZXcub0NvbnRyb2xsZXIpfWVsc2UgaWYoSSYmSS5faUtpbmQ9PT0yKXt2YXIgQj1zYXAudWkuYmFzZS5NYW5hZ2VkT2JqZWN0LmJpbmRpbmdQYXJzZXIoVix2Ll9vQ29udGFpbmluZ1ZpZXcub0NvbnRyb2xsZXIpO2lmKEIpe3NbTl09Qn1lbHNle3Euc2FwLmxvZy5lcnJvcih2KyI6IGFnZ3JlZ2F0aW9ucyB3aXRoIGNhcmRpbmFsaXR5IDAuLm4gb25seSBhbGxvdyBiaW5kaW5nIHBhdGhzIGFzIGF0dHJpYnV0ZSB2YWx1ZSAod3JvbmcgdmFsdWU6ICIrTisiPSciK1YrIicpIil9fWVsc2UgaWYoSSYmSS5faUtpbmQ9PT0zKXtzW05dPXYuX29Db250YWluaW5nVmlldy5jcmVhdGVJZChWKX1lbHNlIGlmKEkmJkkuX2lLaW5kPT09NCl7c1tOXT1xLm1hcChWLnNwbGl0KC9bXHMsXSsvZyksZnVuY3Rpb24oRyl7cmV0dXJuIEc/di5fb0NvbnRhaW5pbmdWaWV3LmNyZWF0ZUlkKEcpOm51bGx9KX1lbHNlIGlmKEkmJkkuX2lLaW5kPT09NSl7dmFyIEU9di5fb0NvbnRhaW5pbmdWaWV3Lm9Db250cm9sbGVyW1ZdO2lmKHR5cGVvZihFKSE9PSJmdW5jdGlvbiIpe3Euc2FwLmxvZy53YXJuaW5nKHYrIjogZXZlbnQgaGFuZGxlciBmdW5jdGlvbiBcIiIrVisiXCIgaXMgbm90IGEgZnVuY3Rpb24gb3IgZG9lcyBub3QgZXhpc3QgaW4gdGhlIGNvbnRyb2xsZXIuIil9aWYoRSl7RVsiX3NhcHVpX2hhbmRsZXJOYW1lIl09VjtzW05dPVtFLHYuX29Db250YWluaW5nVmlldy5vQ29udHJvbGxlcl19fWVsc2UgaWYoTiE9PSJ4bWxucyIpe3Euc2FwLmxvZy53YXJuaW5nKHYrIjogWE1MVGVtcGxhdGVQcm9jZXNzb3IgZW5jb3VudGVyZWQgYW5kIGlnbm9yZWQgdW5rbm93biBhdHRyaWJ1dGUgJyIrTisiJyAodmFsdWU6ICciK1YrIicpIil9fWlmKGsubGVuZ3RoPjApe3MuY3VzdG9tRGF0YT1rfWZ1bmN0aW9uIHkobixBLHope3ZhciBHLEg7Zm9yKEc9bi5maXJzdENoaWxkO0c7Rz1HLm5leHRTaWJsaW5nKXtpZihHLm5vZGVUeXBlPT09MSl7SD1HLm5hbWVzcGFjZVVSST09PWomJnomJnpbbChHKV07aWYoSCl7eShHLEgpfWVsc2UgaWYoQSl7dmFyIEs9ZChHKTtmb3IodmFyIGk9MDtpPEsubGVuZ3RoO2krKyl7dmFyIE09S1tpXTt2YXIgUD1BLl9zTmFtZTtpZihBLm11bHRpcGxlKXtpZighc1tQXSl7c1tQXT1bXX1pZih0eXBlb2Ygc1tQXS5wYXRoPT09InN0cmluZyIpe3NbUF0udGVtcGxhdGU9TX1lbHNle3NbUF0ucHVzaChNKX19ZWxzZXtzW1BdPU19fX1lbHNlIGlmKGwobikhPT0iRnJhZ21lbnREZWZpbml0aW9uInx8bi5uYW1lc3BhY2VVUkkhPT0ic2FwLnVpLmNvcmUiKXt0aHJvdyBuZXcgRXJyb3IoIkNhbm5vdCBhZGQgZGlyZWN0IGNoaWxkIHdpdGhvdXQgZGVmYXVsdCBhZ2dyZWdhdGlvbiBkZWZpbmVkIGZvciBjb250cm9sICIrbS5nZXRFbGVtZW50TmFtZSgpKX19ZWxzZSBpZihHLm5vZGVUeXBlPT09Myl7aWYocS50cmltKEcudGV4dENvbnRlbnR8fEcudGV4dCkpe3Rocm93IG5ldyBFcnJvcigiQ2Fubm90IGFkZCB0ZXh0IG5vZGVzIGFzIGRpcmVjdCBjaGlsZCBvZiBhbiBhZ2dyZWdhdGlvbi4gRm9yIGFkZGluZyB0ZXh0IHRvIGFuIGFnZ3JlZ2F0aW9uLCBhIHN1cnJvdW5kaW5nIGh0bWwgdGFnIGlzIG5lZWRlZCIpfX19fXZhciBBPW0uZ2V0RGVmYXVsdEFnZ3JlZ2F0aW9uKCk7dmFyIHo9bS5nZXRBbGxBZ2dyZWdhdGlvbnMoKTt5KG4sQSx6KTtpZihzYXAudWkuY29yZS5DdXN0b21pemluZ0NvbmZpZ3VyYXRpb24mJk8pe3ZhciBEPXNhcC51aS5jb3JlLkN1c3RvbWl6aW5nQ29uZmlndXJhdGlvbi5nZXRDdXN0b21Qcm9wZXJ0aWVzKEMsTyk7aWYoRCl7cz1xLmV4dGVuZChzLEQpO3Euc2FwLmxvZy5pbmZvKCJDdXN0b21pemluZzogQ29udHJvbCBtb2RpZmljYXRpb24gZm91bmQgZm9yIENvbnRyb2wgJyIrTysiJyBpbiBWaWV3ICciK0MrIic6ICIrSlNPTi5zdHJpbmdpZnkoRCkpfWVsc2V7aWYoZG9jdW1lbnQubG9jYXRpb24uc2VhcmNoLmluZGV4T2YoInNhcC11aS14eC1kZWJ1Z0N1c3RvbWl6aW5nIik+LTEpe3Euc2FwLmxvZy5kZWJ1ZygiQ3VzdG9taXppbmc6IG5vIENvbnRyb2wgbW9kaWZpY2F0aW9uIGZvdW5kIGZvciBDb250cm9sICciK08rIicgaW4gVmlldyAnIitDKyInLiIpfX19dmFyIEY7aWYoc2FwLnVpLmNvcmUubXZjLlZpZXcucHJvdG90eXBlLmlzUHJvdG90eXBlT2Yoby5wcm90b3R5cGUpJiZ0eXBlb2Ygby5fc1R5cGU9PT0ic3RyaW5nIil7Rj1zYXAudWkudmlldyhzLHVuZGVmaW5lZCxvLl9zVHlwZSl9ZWxzZXtGPW5ldyBvKHMpfWlmKFMmJkYuYWRkU3R5bGVDbGFzcyl7Ri5hZGRTdHlsZUNsYXNzKFMpfWlmKCFGKXtGPVtdfWVsc2UgaWYoIXEuaXNBcnJheShGKSl7Rj1bRl19cmV0dXJuIEZ9fTtyZXR1cm4gWH0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLmRlbGVnYXRlLlNjcm9sbEVuYWJsZW1lbnQnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS5kZWxlZ2F0ZS5TY3JvbGxFbmFibGVtZW50Jyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvZGVsZWdhdGUvU2Nyb2xsRW5hYmxlbWVudCIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ3NhcC91aS9iYXNlL09iamVjdCddLGZ1bmN0aW9uKHEsQil7InVzZSBzdHJpY3QiO3ZhciAkPXE7dmFyIFM9Qi5leHRlbmQoInNhcC51aS5jb3JlLmRlbGVnYXRlLlNjcm9sbEVuYWJsZW1lbnQiLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbihjLHMsQyl7Qi5hcHBseSh0aGlzKTt0aGlzLl9vQ29udHJvbD1jO3RoaXMuX29Db250cm9sLmFkZERlbGVnYXRlKHRoaXMpO3RoaXMuX3NDb250ZW50SWQ9czt0aGlzLl9iSG9yaXpvbnRhbD0hIUMuaG9yaXpvbnRhbDt0aGlzLl9iVmVydGljYWw9ISFDLnZlcnRpY2FsO3RoaXMuX3Njcm9sbFg9MDt0aGlzLl9zY3JvbGxZPTA7dGhpcy5fc2Nyb2xsZXI9bnVsbDt0aGlzLl9zY3JvbGxiYXJDbGFzcz1DLnNjcm9sbGJhckNsYXNzfHxmYWxzZTt0aGlzLl9ib3VuY2U9Qy5ib3VuY2U7YSh0aGlzLEMpO2lmKHRoaXMuX2luaXQpe3RoaXMuX2luaXQuYXBwbHkodGhpcyxhcmd1bWVudHMpfX0sc2V0SG9yaXpvbnRhbDpmdW5jdGlvbihoKXt0aGlzLl9iSG9yaXpvbnRhbD0hIWg7aWYodGhpcy5fc2Nyb2xsZXIpe2lmKHRoaXMuX3p5bmdhKXt0aGlzLl9zY3JvbGxlci5vcHRpb25zLnNjcm9sbGluZ1g9dGhpcy5fYkhvcml6b250YWx9ZWxzZXt0aGlzLl9zY3JvbGxlci5oU2Nyb2xsPXRoaXMuX3Njcm9sbGVyLmhTY3JvbGxiYXI9dGhpcy5fYkhvcml6b250YWw7dGhpcy5fc2Nyb2xsZXIuX3Njcm9sbGJhcignaCcpfX1lbHNlIGlmKHRoaXMuX3NldE92ZXJmbG93KXt0aGlzLl9zZXRPdmVyZmxvdygpfX0sc2V0VmVydGljYWw6ZnVuY3Rpb24odil7dGhpcy5fYlZlcnRpY2FsPSEhdjtpZih0aGlzLl9zY3JvbGxlcil7aWYodGhpcy5fenluZ2Epe3RoaXMuX3Njcm9sbGVyLm9wdGlvbnMuc2Nyb2xsaW5nWT10aGlzLl9iVmVydGljYWx9ZWxzZXt0aGlzLl9zY3JvbGxlci52U2Nyb2xsPXRoaXMuX3Njcm9sbGVyLnZTY3JvbGxiYXI9dGhpcy5fYlZlcnRpY2FsO3RoaXMuX3Njcm9sbGVyLl9zY3JvbGxiYXIoJ3YnKX19ZWxzZSBpZih0aGlzLl9zZXRPdmVyZmxvdyl7dGhpcy5fc2V0T3ZlcmZsb3coKX19LGdldEhvcml6b250YWw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYkhvcml6b250YWx9LGdldFZlcnRpY2FsOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2JWZXJ0aWNhbH0sc2V0Qm91bmNlOmZ1bmN0aW9uKGIpe3RoaXMuX2JvdW5jZT0hIWJ9LHNldFB1bGxEb3duOmZ1bmN0aW9uKGMpe3RoaXMuX29QdWxsRG93bj1jO3JldHVybiB0aGlzfSxzZXRHcm93aW5nTGlzdDpmdW5jdGlvbihnLHMpe3RoaXMuX29Hcm93aW5nTGlzdD1nO3RoaXMuX2ZuU2Nyb2xsTG9hZENhbGxiYWNrPXEucHJveHkocyxnKTtyZXR1cm4gdGhpc30sc2V0SWNvblRhYkJhcjpmdW5jdGlvbihJLHMsZil7dGhpcy5fb0ljb25UYWJCYXI9STt0aGlzLl9mblNjcm9sbEVuZENhbGxiYWNrPXEucHJveHkocyxJKTt0aGlzLl9mblNjcm9sbFN0YXJ0Q2FsbGJhY2s9cS5wcm94eShmLEkpO3JldHVybiB0aGlzfSxzY3JvbGxUbzpmdW5jdGlvbih4LHksdCl7dGhpcy5fc2Nyb2xsWD14O3RoaXMuX3Njcm9sbFk9eTt0aGlzLl9zY3JvbGxUbyh4LHksdCk7cmV0dXJuIHRoaXN9LGRlc3Ryb3k6ZnVuY3Rpb24oKXtpZih0aGlzLl9leGl0KXt0aGlzLl9leGl0KCl9aWYodGhpcy5fb0NvbnRyb2wpe3RoaXMuX29Db250cm9sLnJlbW92ZURlbGVnYXRlKHRoaXMpO3RoaXMuX29Db250cm9sPXVuZGVmaW5lZH19LHJlZnJlc2g6ZnVuY3Rpb24oKXtpZih0aGlzLl9yZWZyZXNoKXt0aGlzLl9yZWZyZXNoKCl9fX0pO3ZhciBpPXtnZXRTY3JvbGxUb3A6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc2Nyb2xsWX0sZ2V0U2Nyb2xsTGVmdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zY3JvbGxYfSxnZXRNYXhTY3JvbGxUb3A6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc2Nyb2xsZXI/LXRoaXMuX3Njcm9sbGVyLm1heFNjcm9sbFk6MH0sX3Njcm9sbFRvOmZ1bmN0aW9uKHgseSx0KXt0aGlzLl9zY3JvbGxlciYmdGhpcy5fc2Nyb2xsZXIuc2Nyb2xsVG8oLXgsLXksdCxmYWxzZSl9LF9yZWZyZXNoOmZ1bmN0aW9uKCl7aWYodGhpcy5fc2Nyb2xsZXImJnRoaXMuX3NTY3JvbGxlcklkKXt2YXIgcz0kLnNhcC5kb21CeUlkKHRoaXMuX3NTY3JvbGxlcklkKTtpZihzJiYocy5vZmZzZXRIZWlnaHQ+MCkpe3RoaXMuX2JJZ25vcmVTY3JvbGxFbmQ9dHJ1ZTt0aGlzLl9zY3JvbGxlci5yZWZyZXNoKCk7dGhpcy5fYklnbm9yZVNjcm9sbEVuZD1mYWxzZTtpZigtdGhpcy5fc2Nyb2xsWCE9dGhpcy5fc2Nyb2xsZXIueHx8LXRoaXMuX3Njcm9sbFkhPXRoaXMuX3Njcm9sbGVyLnkpe3RoaXMuX3Njcm9sbGVyLnNjcm9sbFRvKC10aGlzLl9zY3JvbGxYLC10aGlzLl9zY3JvbGxZLDApfWlmKHRoaXMuX3Njcm9sbGVyLndyYXBwZXImJnRoaXMuX3Njcm9sbGVyLndyYXBwZXIuc2Nyb2xsVG9wKXt0aGlzLl9zY3JvbGxlci53cmFwcGVyLnNjcm9sbFRvcD0wfX19fSxfY2xlYW51cDpmdW5jdGlvbigpe3RoaXMuX3RvZ2dsZVJlc2l6ZUxpc3RlbmVycyhmYWxzZSk7aWYodGhpcy5fc2Nyb2xsZXIpe3RoaXMuX3Njcm9sbGVyLnN0b3AoKTt0aGlzLl9zY3JvbGxYPS10aGlzLl9zY3JvbGxlci54O3ZhciBzPSQuc2FwLmRvbUJ5SWQodGhpcy5fc1Njcm9sbGVySWQpO2lmKHMmJihzLm9mZnNldEhlaWdodD4wKSl7dGhpcy5fc2Nyb2xsWT0tdGhpcy5fc2Nyb2xsZXIueX10aGlzLl9zY3JvbGxlci5kZXN0cm95KCk7dGhpcy5fc2Nyb2xsZXI9bnVsbH19LF90b2dnbGVSZXNpemVMaXN0ZW5lcnM6ZnVuY3Rpb24odCl7aWYodGhpcy5fc1Njcm9sbGVyUmVzaXplTGlzdGVuZXJJZCl7c2FwLnVpLmNvcmUuUmVzaXplSGFuZGxlci5kZXJlZ2lzdGVyKHRoaXMuX3NTY3JvbGxlclJlc2l6ZUxpc3RlbmVySWQpO3RoaXMuX3NTY3JvbGxlclJlc2l6ZUxpc3RlbmVySWQ9bnVsbH1pZih0aGlzLl9zQ29udGVudFJlc2l6ZUxpc3RlbmVySWQpe3NhcC51aS5jb3JlLlJlc2l6ZUhhbmRsZXIuZGVyZWdpc3Rlcih0aGlzLl9zQ29udGVudFJlc2l6ZUxpc3RlbmVySWQpO3RoaXMuX3NDb250ZW50UmVzaXplTGlzdGVuZXJJZD1udWxsfWlmKHQmJnRoaXMuX3NDb250ZW50SWQmJiQuc2FwLmRvbUJ5SWQodGhpcy5fc0NvbnRlbnRJZCkpe3ZhciBiPSQucHJveHkodGhpcy5fcmVmcmVzaCx0aGlzKTt0aGlzLl9zU2Nyb2xsZXJSZXNpemVMaXN0ZW5lcklkPXNhcC51aS5jb3JlLlJlc2l6ZUhhbmRsZXIucmVnaXN0ZXIoJC5zYXAuZG9tQnlJZCh0aGlzLl9zU2Nyb2xsZXJJZCksYik7dGhpcy5fc0NvbnRlbnRSZXNpemVMaXN0ZW5lcklkPXNhcC51aS5jb3JlLlJlc2l6ZUhhbmRsZXIucmVnaXN0ZXIoJC5zYXAuZG9tQnlJZCh0aGlzLl9zQ29udGVudElkKSxiKX19LG9uQmVmb3JlUmVuZGVyaW5nOmZ1bmN0aW9uKCl7dGhpcy5fY2xlYW51cCgpfSxvbmZvY3VzaW46ZnVuY3Rpb24oZSl7aWYoUy5fYlNjcm9sbFRvSW5wdXQmJnNhcC51aS5EZXZpY2Uub3MuYW5kcm9pZCl7dmFyIGI9ZS5zcmNFbGVtZW50O3RoaXMuX3NUaW1lcklkJiZxLnNhcC5jbGVhckRlbGF5ZWRDYWxsKHRoaXMuX3NUaW1lcklkKTtpZihiJiZiLm5vZGVOYW1lJiYoYi5ub2RlTmFtZS50b1VwcGVyQ2FzZSgpPT09IklOUFVUInx8Yi5ub2RlTmFtZS50b1VwcGVyQ2FzZSgpPT09IlRFWFRBUkVBIikpe3RoaXMuX3NUaW1lcklkPXEuc2FwLmRlbGF5ZWRDYWxsKDQwMCx0aGlzLGZ1bmN0aW9uKCl7dmFyIG89dGhpcy5fc2Nyb2xsZXIuX29mZnNldChiKTtvLnRvcCs9NDg7dGhpcy5fc2Nyb2xsZXIuc2Nyb2xsVG8oby5sZWZ0LG8udG9wKX0pfX19LG9uQWZ0ZXJSZW5kZXJpbmc6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLGI9KHRoaXMuX2JvdW5jZSE9PXVuZGVmaW5lZCk/dGhpcy5fYm91bmNlOnNhcC51aS5EZXZpY2Uub3MuaW9zO3ZhciBjPSQuc2FwLmJ5SWQodGhpcy5fc0NvbnRlbnRJZCk7dGhpcy5fc1Njcm9sbGVySWQ9Yy5wYXJlbnQoKS5hdHRyKCJpZCIpO3ZhciBkPSghIXNhcC51aS5EZXZpY2Uub3MuYW5kcm9pZCYmIXNhcC51aS5EZXZpY2UuYnJvd3Nlci5jaHJvbWUmJihzYXAudWkuRGV2aWNlLm9zLnZlcnNpb249PTR8fCFzYXAudWkuRGV2aWNlLm9zLnZlcnNpb25TdHIuaW5kZXhPZigiMi4zLjQiKSkmJmMuZmluZCgiaW5wdXQsdGV4dGFyZWEiKS5sZW5ndGgpO3RoaXMuX2lUb3BPZmZzZXQ9dGhpcy5fb1B1bGxEb3duJiZ0aGlzLl9vUHVsbERvd24uZ2V0RG9tUmVmJiZ0aGlzLl9vUHVsbERvd24uZ2V0RG9tUmVmKCkub2Zmc2V0SGVpZ2h0fHwwO3ZhciB4PXRoaXMuX3Njcm9sbFh8fDAseT10aGlzLl9zY3JvbGxZfHwwO2lmKHNhcC51aS5nZXRDb3JlKCkuZ2V0Q29uZmlndXJhdGlvbigpLmdldFJUTCgpKXtjLmF0dHIoImRpciIsInJ0bCIpO3ZhciBwPWMucGFyZW50KCk7cC5hdHRyKCJkaXIiLCJsdHIiKTtpZighdGhpcy5fYlNjcm9sbFBvc0luaXRpYWxpemVkKXt4PXRoaXMuX3Njcm9sbFg9Yy53aWR0aCgpLXAud2lkdGgoKTt0aGlzLl9iU2Nyb2xsUG9zSW5pdGlhbGl6ZWQ9dHJ1ZX19dGhpcy5fc2Nyb2xsZXI9bmV3IHdpbmRvdy5pU2Nyb2xsKHRoaXMuX3NTY3JvbGxlcklkLHt1c2VUcmFuc2l0aW9uOnRydWUsdXNlVHJhbnNmb3JtOiFkLGhpZGVTY3JvbGxiYXI6dHJ1ZSxmYWRlU2Nyb2xsYmFyOnRydWUsYm91bmNlOiEhYixtb21lbnR1bTp0cnVlLGhhbmRsZUNsaWNrOmZhbHNlLGhTY3JvbGw6dGhpcy5fYkhvcml6b250YWwsdlNjcm9sbDp0aGlzLl9iVmVydGljYWwseDoteCx5Oi15LHRvcE9mZnNldDp0aGlzLl9pVG9wT2Zmc2V0LHNjcm9sbGJhckNsYXNzOnRoaXMuX3Njcm9sbGJhckNsYXNzLG9uQmVmb3JlU2Nyb2xsU3RhcnQ6ZnVuY3Rpb24oZSl7aWYodC5faXNTY3JvbGxpbmcpe2Uuc3RvcFByb3BhZ2F0aW9uKCk7ZS5wcmV2ZW50RGVmYXVsdCgpfX0sb25TY3JvbGxFbmQ6ZnVuY3Rpb24oKXtpZighdC5fYklnbm9yZVNjcm9sbEVuZCYmdC5fc2Nyb2xsZXIpe3QuX3Njcm9sbFg9LXQuX3Njcm9sbGVyLng7dC5fc2Nyb2xsWT0tdC5fc2Nyb2xsZXIueX1pZih0Ll9vUHVsbERvd24pe3QuX29QdWxsRG93bi5kb1Njcm9sbEVuZCgpfWlmKHQuX29Hcm93aW5nTGlzdCYmdC5fZm5TY3JvbGxMb2FkQ2FsbGJhY2spe3ZhciBlPU1hdGguZmxvb3IodGhpcy53cmFwcGVySC80KTt2YXIgST0tdGhpcy5tYXhTY3JvbGxZK3RoaXMueTxlO2lmKHRoaXMuZGlyWT4wJiZJKXt0Ll9mblNjcm9sbExvYWRDYWxsYmFjaygpfX1pZih0Ll9vSWNvblRhYkJhciYmdC5fZm5TY3JvbGxFbmRDYWxsYmFjayl7dC5fZm5TY3JvbGxFbmRDYWxsYmFjaygpfXQuX2lzU2Nyb2xsaW5nPWZhbHNlfSxvblJlZnJlc2g6ZnVuY3Rpb24oKXtpZih0Ll9vUHVsbERvd24pe3QuX29QdWxsRG93bi5kb1JlZnJlc2goKX10Ll90b2dnbGVSZXNpemVMaXN0ZW5lcnModHJ1ZSl9LG9uU2Nyb2xsTW92ZTpmdW5jdGlvbihlKXtpZighdC5faXNTY3JvbGxpbmcpe3ZhciByPS8oSU5QVVR8VEVYVEFSRUEpL2ksQT1kb2N1bWVudC5hY3RpdmVFbGVtZW50O2lmKHIudGVzdChBLnRhZ05hbWUpJiZlLnRhcmdldCE9PUEpe0EuYmx1cigpfX10Ll9pc1Njcm9sbGluZz10cnVlO2lmKHQuX29QdWxsRG93bil7dC5fb1B1bGxEb3duLmRvU2Nyb2xsTW92ZSgpfWlmKHQuX29JY29uVGFiQmFyJiZ0Ll9mblNjcm9sbFN0YXJ0Q2FsbGJhY2spe3QuX2ZuU2Nyb2xsU3RhcnRDYWxsYmFjaygpfX19KTtmb3IodmFyIFA9dGhpcy5fb0NvbnRyb2w7UD1QLm9QYXJlbnQ7KXt2YXIgcz1QLmdldFNjcm9sbERlbGVnYXRlP1AuZ2V0U2Nyb2xsRGVsZWdhdGUoKTpudWxsO2lmKHMmJihzLmdldFZlcnRpY2FsKCkmJnRoaXMuZ2V0VmVydGljYWwoKXx8cy5nZXRIb3Jpem9udGFsKCkmJnRoaXMuZ2V0SG9yaXpvbnRhbCgpKSl7dGhpcy5fc2Nyb2xsZXIuX3NhcHVpX2lzTmVzdGVkPXRydWU7YnJlYWt9fXRoaXMuX3Njcm9sbGVyLl9tb3ZlPWZ1bmN0aW9uKGUpe2lmKGUuX3NhcHVpX2hhbmRsZWRCeUNvbnRyb2wmJiFlLl9zYXB1aV9zY3JvbGwpe3JldHVybn1pZih0aGlzLl9zYXB1aV9pc05lc3RlZCl7ZS5fc2FwdWlfaGFuZGxlZEJ5Q29udHJvbD0hKHRoaXMuZGlyWTwwJiZ0aGlzLnk+PTApJiYhKHRoaXMuZGlyWT4wJiZ0aGlzLnk8PXRoaXMubWF4U2Nyb2xsWSkmJiEodGhpcy5kaXJYPDAmJnRoaXMueD49MCkmJiEodGhpcy5kaXJYPjAmJnRoaXMueDw9dGhpcy5tYXhTY3JvbGxYKX13aW5kb3cuaVNjcm9sbC5wcm90b3R5cGUuX21vdmUuY2FsbCh0aGlzLGUpfTt2YXIgbz1jLnBhcmVudCgpWzBdO2lmKG8mJihvLm9mZnNldEhlaWdodD4wKSl7aWYodGhpcy5fc2Nyb2xsWCE9LXRoaXMuX3Njcm9sbGVyLnh8fHRoaXMuX3Njcm9sbFkhPS10aGlzLl9zY3JvbGxlci55KXt0aGlzLl9zY3JvbGxlci5zY3JvbGxUbygtdGhpcy5fc2Nyb2xsWCwtdGhpcy5fc2Nyb2xsWSwwKX19dGhpcy5fdG9nZ2xlUmVzaXplTGlzdGVuZXJzKHRydWUpfSxvbnRvdWNobW92ZTpmdW5jdGlvbihlKXtpZih0aGlzLl9wcmV2ZW50VG91Y2hNb3ZlRGVmYXVsdCl7ZS5wcmV2ZW50RGVmYXVsdCgpfX19O3ZhciB6PXtfcmVmcmVzaDpmdW5jdGlvbigpe2lmKHRoaXMuX3Njcm9sbGVyJiZ0aGlzLl9zQ29udGVudElkJiYkLnNhcC5kb21CeUlkKHRoaXMuX3NDb250ZW50SWQpKXt2YXIgYz0kLnNhcC5ieUlkKHRoaXMuX3NDb250ZW50SWQpO3ZhciBDPWMucGFyZW50KCk7dGhpcy5fc2Nyb2xsZXIuc2V0RGltZW5zaW9ucyhDLndpZHRoKCksQy5oZWlnaHQoKSxjLndpZHRoKCksYy5oZWlnaHQoKSl9fSxfY2xlYW51cDpmdW5jdGlvbigpe2lmKHRoaXMuX3NTY3JvbGxlclJlc2l6ZUxpc3RlbmVySWQpe3NhcC51aS5jb3JlLlJlc2l6ZUhhbmRsZXIuZGVyZWdpc3Rlcih0aGlzLl9zU2Nyb2xsZXJSZXNpemVMaXN0ZW5lcklkKTt0aGlzLl9zU2Nyb2xsZXJSZXNpemVMaXN0ZW5lcklkPW51bGx9aWYodGhpcy5fc0NvbnRlbnRSZXNpemVMaXN0ZW5lcklkKXtzYXAudWkuY29yZS5SZXNpemVIYW5kbGVyLmRlcmVnaXN0ZXIodGhpcy5fc0NvbnRlbnRSZXNpemVMaXN0ZW5lcklkKTt0aGlzLl9zQ29udGVudFJlc2l6ZUxpc3RlbmVySWQ9bnVsbH1pZih0aGlzLl9zY3JvbGxlcil7dmFyIHY9dGhpcy5fc2Nyb2xsZXIuZ2V0VmFsdWVzKCk7dGhpcy5fc2Nyb2xsWD12LmxlZnQ7dGhpcy5fc2Nyb2xsWT12LnRvcH19LF9zY3JvbGxUbzpmdW5jdGlvbih4LHksdCl7aWYodGhpcy5fc2Nyb2xsZXIpe2lmKCFpc05hTih0KSl7dGhpcy5fc2Nyb2xsZXIub3B0aW9ucy5hbmltYXRpb25EdXJhdGlvbj10fXRoaXMuX3Njcm9sbGVyLnNjcm9sbFRvKHgseSwhIXQpfX0sb25CZWZvcmVSZW5kZXJpbmc6ZnVuY3Rpb24oKXt0aGlzLl9jbGVhbnVwKCl9LG9uQWZ0ZXJSZW5kZXJpbmc6ZnVuY3Rpb24oKXt0aGlzLl9yZWZyZXNoKCk7dGhpcy5fc2Nyb2xsZXIuc2Nyb2xsVG8odGhpcy5fc2Nyb2xsWCx0aGlzLl9zY3JvbGxZLGZhbHNlKTt0aGlzLl9zQ29udGVudFJlc2l6ZUxpc3RlbmVySWQ9c2FwLnVpLmNvcmUuUmVzaXplSGFuZGxlci5yZWdpc3RlcigkLnNhcC5kb21CeUlkKHRoaXMuX3NDb250ZW50SWQpLCQucHJveHkoZnVuY3Rpb24oKXtpZigoIXRoaXMuX3NDb250ZW50SWR8fCEkLnNhcC5kb21CeUlkKHRoaXMuX3NDb250ZW50SWQpKSYmdGhpcy5fc0NvbnRlbnRSZXNpemVMaXN0ZW5lcklkKXtzYXAudWkuY29yZS5SZXNpemVIYW5kbGVyLmRlcmVnaXN0ZXIodGhpcy5fc0NvbnRlbnRSZXNpemVMaXN0ZW5lcklkKTt0aGlzLl9zQ29udGVudFJlc2l6ZUxpc3RlbmVySWQ9bnVsbH1lbHNle3RoaXMuX3JlZnJlc2goKX19LHRoaXMpKX0sb250b3VjaHN0YXJ0OmZ1bmN0aW9uKGUpe2lmKGUudGFyZ2V0LnRhZ05hbWUubWF0Y2goL2lucHV0fHRleHRhcmVhfHNlbGVjdC9pKSl7cmV0dXJufXRoaXMuX3Njcm9sbGVyLmRvVG91Y2hTdGFydChlLnRvdWNoZXMsZS50aW1lU3RhbXApfSxvbnRvdWNoZW5kOmZ1bmN0aW9uKGUpe3RoaXMuX3Njcm9sbGVyLmRvVG91Y2hFbmQoZS50aW1lU3RhbXApfSxvbnRvdWNobW92ZTpmdW5jdGlvbihlKXt0aGlzLl9zY3JvbGxlci5kb1RvdWNoTW92ZShlLnRvdWNoZXMsZS50aW1lU3RhbXApO2lmKHRoaXMuX3ByZXZlbnRUb3VjaE1vdmVEZWZhdWx0KXtlLnByZXZlbnREZWZhdWx0KCl9ZWxzZXtlLnN0b3BQcm9wYWdhdGlvbigpfX19O3ZhciBuPXtnZXRTY3JvbGxUb3A6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc2Nyb2xsWXx8MH0sZ2V0U2Nyb2xsTGVmdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zY3JvbGxYfHwwfSxnZXRNYXhTY3JvbGxUb3A6ZnVuY3Rpb24oKXtyZXR1cm4odGhpcy5fJENvbnRhaW5lciYmdGhpcy5fJENvbnRhaW5lci5sZW5ndGgpP3RoaXMuXyRDb250YWluZXJbMF0uc2Nyb2xsSGVpZ2h0LXRoaXMuXyRDb250YWluZXIuaGVpZ2h0KCk6LTF9LF9zZXRPdmVyZmxvdzpmdW5jdGlvbigpe3ZhciBjPXRoaXMuXyRDb250YWluZXI7aWYoIWN8fCFjWzBdKXJldHVybjtjLmNzcygiei1pbmRleCIsIjAiKTtpZihzYXAudWkuRGV2aWNlLm9zLmlvcyl7Yy5jc3MoIm92ZXJmbG93LXgiLHRoaXMuX2JIb3Jpem9udGFsPyJzY3JvbGwiOiJoaWRkZW4iKS5jc3MoIm92ZXJmbG93LXkiLHRoaXMuX2JWZXJ0aWNhbD8ic2Nyb2xsIjoiaGlkZGVuIikuY3NzKCItd2Via2l0LW92ZXJmbG93LXNjcm9sbGluZyIsInRvdWNoIil9ZWxzZXtjLmNzcygib3ZlcmZsb3cteCIsdGhpcy5fYkhvcml6b250YWwmJiF0aGlzLl9iRHJhZ1Njcm9sbD8iYXV0byI6ImhpZGRlbiIpLmNzcygib3ZlcmZsb3cteSIsdGhpcy5fYlZlcnRpY2FsJiYhdGhpcy5fYkRyYWdTY3JvbGw/ImF1dG8iOiJoaWRkZW4iKX19LF9yZWZyZXNoOmZ1bmN0aW9uKCl7dmFyIGM9dGhpcy5fJENvbnRhaW5lcjtpZighY3x8IWMuaGVpZ2h0KCkpcmV0dXJuO3ZhciBDPSQuc2FwLmJ5SWQodGhpcy5fc0NvbnRlbnRJZCk7aWYodGhpcy5fb1B1bGxEb3duJiZ0aGlzLl9vUHVsbERvd24uX2JUb3VjaE1vZGUpe3ZhciBkPXRoaXMuX29QdWxsRG93bi5nZXREb21SZWYoKTtpZihkKXtkLnN0eWxlLm1hcmdpblRvcD10aGlzLl9vUHVsbERvd24uX2lTdGF0ZT09Mj8iIjoiLSIrZC5vZmZzZXRIZWlnaHQrInB4In19aWYoYy5zY3JvbGxUb3AoKSE9dGhpcy5fc2Nyb2xsWSl7Yy5zY3JvbGxUb3AodGhpcy5fc2Nyb2xsWSl9aWYoISh0aGlzLl9vUHVsbERvd24mJnRoaXMuX29QdWxsRG93bi5fYlRvdWNoTW9kZSkmJiF0aGlzLl9mblNjcm9sbExvYWRDYWxsYmFjayYmISEhc2FwLnVpLkRldmljZS5icm93c2VyLmludGVybmV0X2V4cGxvcmVyKXtzYXAudWkuY29yZS5SZXNpemVIYW5kbGVyLmRlcmVnaXN0ZXIodGhpcy5fc1Jlc2l6ZUxpc3RlbmVySWQpO3RoaXMuX3NSZXNpemVMaXN0ZW5lcklkPW51bGx9fSxfb25TY3JvbGw6ZnVuY3Rpb24oZSl7dmFyIGM9dGhpcy5fJENvbnRhaW5lcjtpZih0aGlzLl9vSU9TU2Nyb2xsJiZ0aGlzLl9vSU9TU2Nyb2xsLmJNb21lbnR1bSl7dmFyIHk9TWF0aC5hYnModGhpcy5fc2Nyb2xsWS1jLnNjcm9sbFRvcCgpKTtpZih5PjAmJnk8MTB8fGUudGltZVN0YW1wLXRoaXMuX29JT1NTY3JvbGwuaVRpbWVTdGFtcD4xMjApe3Euc2FwLmxvZy5kZWJ1ZygiSU9TIE1vbWVudHVtIFNjcm9sbGluZyBpcyBPRkYiKTt0aGlzLl9vSU9TU2Nyb2xsLmJNb21lbnR1bT1mYWxzZX19dGhpcy5fc2Nyb2xsWD1jLnNjcm9sbExlZnQoKTt0aGlzLl9zY3JvbGxZPWMuc2Nyb2xsVG9wKCk7aWYodGhpcy5fZm5TY3JvbGxMb2FkQ2FsbGJhY2smJmNbMF0uc2Nyb2xsSGVpZ2h0LWMuc2Nyb2xsVG9wKCktYy5oZWlnaHQoKTwxMDApe3RoaXMuX2ZuU2Nyb2xsTG9hZENhbGxiYWNrKCl9aWYodGhpcy5fb0ljb25UYWJCYXImJnRoaXMuX2ZuU2Nyb2xsRW5kQ2FsbGJhY2spe3RoaXMuX2ZuU2Nyb2xsRW5kQ2FsbGJhY2soKX19LF9vblN0YXJ0OmZ1bmN0aW9uKGUpe3ZhciBjPXRoaXMuXyRDb250YWluZXJbMF07aWYoIWMpcmV0dXJuO3RoaXMuX2JEb0RyYWc9dGhpcy5fYkRyYWdTY3JvbGw7aWYoIXRoaXMuX3Njcm9sbGFibGUpe3RoaXMuX3Njcm9sbGFibGU9e319dGhpcy5fc2Nyb2xsYWJsZS52ZXJ0aWNhbD10aGlzLl9iVmVydGljYWwmJmMuc2Nyb2xsSGVpZ2h0PmMuY2xpZW50SGVpZ2h0O3RoaXMuX3Njcm9sbGFibGUuaG9yaXpvbnRhbD10aGlzLl9iSG9yaXpvbnRhbCYmYy5zY3JvbGxXaWR0aD5jLmNsaWVudFdpZHRoO2lmKHRoaXMuX29JT1NTY3JvbGwmJnRoaXMuX29JT1NTY3JvbGwuYk1vbWVudHVtKXtxLnNhcC5sb2cuZGVidWcoIklPUyBNb21lbnR1bSBTY3JvbGxpbmc6IHByZXZlbnQgdGFwIGV2ZW50Iik7ZS5zdG9wUHJvcGFnYXRpb24oKTt0aGlzLl9vSU9TU2Nyb2xsLmJNb21lbnR1bT1mYWxzZX12YXIgcD1lLnRvdWNoZXM/ZS50b3VjaGVzWzBdOmU7dGhpcy5faVg9cC5wYWdlWDt0aGlzLl9pWT1wLnBhZ2VZO2lmKHRoaXMuX29JT1NTY3JvbGwpe2lmKCF0aGlzLl9zY3JvbGxhYmxlLnZlcnRpY2FsKXt0aGlzLl9vSU9TU2Nyb2xsLmlUb3BEb3duPTB9ZWxzZSBpZihjLnNjcm9sbFRvcD09PTApe3RoaXMuX29JT1NTY3JvbGwuaVRvcERvd249MX1lbHNlIGlmKGMuc2Nyb2xsVG9wPT09Yy5zY3JvbGxIZWlnaHQtYy5jbGllbnRIZWlnaHQpe3RoaXMuX29JT1NTY3JvbGwuaVRvcERvd249LTF9ZWxzZXt0aGlzLl9vSU9TU2Nyb2xsLmlUb3BEb3duPTB9fXRoaXMuX2JQdWxsRG93bj1mYWxzZTt0aGlzLl9pRGlyZWN0aW9uPSIifSxfb25Ub3VjaE1vdmU6ZnVuY3Rpb24oZSl7dmFyIGM9dGhpcy5fJENvbnRhaW5lclswXTt2YXIgcD1lLnRvdWNoZXNbMF07dmFyIGQ9cC5wYWdlWC10aGlzLl9pWDt2YXIgYj1wLnBhZ2VZLXRoaXMuX2lZO2lmKHRoaXMuX2lEaXJlY3Rpb249PSIiKXtpZihkIT0wfHxiIT0wKXt0aGlzLl9pRGlyZWN0aW9uPU1hdGguYWJzKGIpPk1hdGguYWJzKGQpPyJ2IjoiaCJ9aWYodGhpcy5fb1B1bGxEb3duJiZ0aGlzLl9vUHVsbERvd24uX2JUb3VjaE1vZGUmJnRoaXMuX2lEaXJlY3Rpb249PSJ2IiYmYy5zY3JvbGxUb3A8PTEpe2lmKGI+TWF0aC5hYnMoZCkpe3RoaXMuX2JQdWxsRG93bj10cnVlfX19aWYodGhpcy5fb0lPU1Njcm9sbCYmdGhpcy5fb0lPU1Njcm9sbC5pVG9wRG93biYmYiE9MCl7aWYoYip0aGlzLl9vSU9TU2Nyb2xsLmlUb3BEb3duPjApe3RoaXMuX2JEb0RyYWc9dHJ1ZX19aWYodGhpcy5fYlB1bGxEb3duPT09dHJ1ZSl7dmFyIGY9dGhpcy5fb1B1bGxEb3duLmdldERvbVJlZigpO3ZhciB0PWUudG91Y2hlc1swXS5wYWdlWS10aGlzLl9pWS1mLm9mZnNldEhlaWdodDtpZih0PjIwKXQ9MjA7Zi5zdHlsZS5tYXJnaW5Ub3A9dCsicHgiO3RoaXMuX29QdWxsRG93bi5kb1B1bGwodCk7ZS5wcmV2ZW50RGVmYXVsdCgpO3RoaXMuX2JEb0RyYWc9ZmFsc2V9aWYodGhpcy5fYkRvRHJhZyl7Yy5zY3JvbGxMZWZ0PWMuc2Nyb2xsTGVmdCt0aGlzLl9pWC1wLnBhZ2VYO2Muc2Nyb2xsVG9wPWMuc2Nyb2xsVG9wK3RoaXMuX2lZLXAucGFnZVk7dGhpcy5faVg9cC5wYWdlWDt0aGlzLl9pWT1wLnBhZ2VZO2Uuc2V0TWFya2VkKCk7ZS5wcmV2ZW50RGVmYXVsdCgpO3JldHVybn1pZih0aGlzLl9vSU9TU2Nyb2xsJiYhdGhpcy5fYkRvRHJhZyYmdGhpcy5faURpcmVjdGlvbj09InYiJiZNYXRoLmFicyhlLnRvdWNoZXNbMF0ucGFnZVktdGhpcy5faVkpPj0xMCl7dGhpcy5fb0lPU1Njcm9sbC5iTW9tZW50dW09dHJ1ZTt0aGlzLl9vSU9TU2Nyb2xsLmlUaW1lU3RhbXA9ZS50aW1lU3RhbXB9aWYoIXRoaXMuX29JT1NTY3JvbGx8fHRoaXMuX3Njcm9sbGFibGUudmVydGljYWx8fHRoaXMuX3Njcm9sbGFibGUuaG9yaXpvbnRhbCYmdGhpcy5faURpcmVjdGlvbj09ImgiKXtlLnNldE1hcmtlZCgpfWlmKHdpbmRvdy5pU2Nyb2xsKXtlLnNldE1hcmtlZCgic2Nyb2xsIil9fSxfb25FbmQ6ZnVuY3Rpb24oZSl7aWYodGhpcy5fb0lPU1Njcm9sbCYmdGhpcy5fb0lPU1Njcm9sbC5iTW9tZW50dW0pe3RoaXMuX29JT1NTY3JvbGwuaVRpbWVTdGFtcD1lLnRpbWVTdGFtcH1pZih0aGlzLl9vUHVsbERvd24mJnRoaXMuX29QdWxsRG93bi5fYlRvdWNoTW9kZSl7dGhpcy5fb1B1bGxEb3duLmRvU2Nyb2xsRW5kKCk7dGhpcy5fcmVmcmVzaCgpfWlmKHRoaXMuX2JEcmFnU2Nyb2xsJiZ0aGlzLl9pRGlyZWN0aW9uKXtlLnNldE1hcmtlZCgpfX0sX29uTW91c2VEb3duOmZ1bmN0aW9uKGUpe2lmKGUuYnV0dG9uPT0wKXt0aGlzLl9iU2Nyb2xsaW5nPXRydWU7dGhpcy5fb25TdGFydChlKX19LF9vbk1vdXNlTW92ZTpmdW5jdGlvbihFKXtpZih0aGlzLl9iU2Nyb2xsaW5nKXt2YXIgZT1FLm9yaWdpbmFsRXZlbnQ7dmFyIGI9ZS5idXR0b25zfHxlLndoaWNoO2lmKGI9PTEpe3ZhciBjPXRoaXMuXyRDb250YWluZXJbMF07Yy5zY3JvbGxMZWZ0PWMuc2Nyb2xsTGVmdCt0aGlzLl9pWC1FLnBhZ2VYO2Muc2Nyb2xsVG9wPWMuc2Nyb2xsVG9wK3RoaXMuX2lZLUUucGFnZVk7dGhpcy5faVg9RS5wYWdlWDt0aGlzLl9pWT1FLnBhZ2VZfX19LF9vbk1vdXNlVXA6ZnVuY3Rpb24oZSl7dGhpcy5fYlNjcm9sbGluZz1mYWxzZTt0aGlzLl9vbkVuZCgpfSxvbkJlZm9yZVJlbmRlcmluZzpmdW5jdGlvbigpe2lmKHRoaXMuX3NSZXNpemVMaXN0ZW5lcklkKXtzYXAudWkuY29yZS5SZXNpemVIYW5kbGVyLmRlcmVnaXN0ZXIodGhpcy5fc1Jlc2l6ZUxpc3RlbmVySWQpO3RoaXMuX3NSZXNpemVMaXN0ZW5lcklkPW51bGx9dmFyIGM9dGhpcy5fJENvbnRhaW5lcjtpZihjKXtpZihjLmhlaWdodCgpPjApe3RoaXMuX3Njcm9sbFg9Yy5zY3JvbGxMZWZ0KCk7dGhpcy5fc2Nyb2xsWT1jLnNjcm9sbFRvcCgpfWMub2ZmKCl9fSxvbkFmdGVyUmVuZGVyaW5nOmZ1bmN0aW9uKCl7dmFyIGM9dGhpcy5fJENvbnRhaW5lcj0kLnNhcC5ieUlkKHRoaXMuX3NDb250ZW50SWQpLnBhcmVudCgpO3ZhciBfPXEucHJveHkodGhpcy5fcmVmcmVzaCx0aGlzKTt0aGlzLl9zZXRPdmVyZmxvdygpO3RoaXMuX3Njcm9sbFRvKHRoaXMuX3Njcm9sbFgsdGhpcy5fc2Nyb2xsWSk7dGhpcy5fcmVmcmVzaCgpO2lmKCFjLmlzKCI6dmlzaWJsZSIpfHwhIXNhcC51aS5EZXZpY2UuYnJvd3Nlci5pbnRlcm5ldF9leHBsb3Jlcnx8dGhpcy5fb1B1bGxEb3dufHx0aGlzLl9mblNjcm9sbExvYWRDYWxsYmFjayl7dGhpcy5fc1Jlc2l6ZUxpc3RlbmVySWQ9c2FwLnVpLmNvcmUuUmVzaXplSGFuZGxlci5yZWdpc3RlcihjWzBdLF8pfWMuc2Nyb2xsKHEucHJveHkodGhpcy5fb25TY3JvbGwsdGhpcykpO2lmKHNhcC51aS5EZXZpY2Uuc3VwcG9ydC50b3VjaCl7Yy5vbigidG91Y2hjYW5jZWwgdG91Y2hlbmQiLHEucHJveHkodGhpcy5fb25FbmQsdGhpcykpLm9uKCJ0b3VjaHN0YXJ0IixxLnByb3h5KHRoaXMuX29uU3RhcnQsdGhpcykpLm9uKCJ0b3VjaG1vdmUiLHEucHJveHkodGhpcy5fb25Ub3VjaE1vdmUsdGhpcykpfWVsc2UgaWYodGhpcy5fYkRyYWdTY3JvbGwpe2Mub24oIm1vdXNldXAgbW91c2VsZWF2ZSIscS5wcm94eSh0aGlzLl9vbk1vdXNlVXAsdGhpcykpLm1vdXNlZG93bihxLnByb3h5KHRoaXMuX29uTW91c2VEb3duLHRoaXMpKS5tb3VzZW1vdmUocS5wcm94eSh0aGlzLl9vbk1vdXNlTW92ZSx0aGlzKSl9fSxfcmVhZEFjdHVhbFNjcm9sbFBvc2l0aW9uOmZ1bmN0aW9uKCl7aWYodGhpcy5fJENvbnRhaW5lci53aWR0aCgpPjApe3RoaXMuX3Njcm9sbFg9dGhpcy5fJENvbnRhaW5lci5zY3JvbGxMZWZ0KCl9aWYodGhpcy5fJENvbnRhaW5lci5oZWlnaHQoKT4wKXt0aGlzLl9zY3JvbGxZPXRoaXMuXyRDb250YWluZXIuc2Nyb2xsVG9wKCl9fSxfc2Nyb2xsVG86ZnVuY3Rpb24oeCx5LHQpe2lmKHRoaXMuXyRDb250YWluZXIubGVuZ3RoPjApe2lmKHQ+MCl7dGhpcy5fJENvbnRhaW5lci5hbmltYXRlKHtzY3JvbGxUb3A6eSxzY3JvbGxMZWZ0Onh9LHQscS5wcm94eSh0aGlzLl9yZWFkQWN0dWFsU2Nyb2xsUG9zaXRpb24sdGhpcykpfWVsc2V7dGhpcy5fJENvbnRhaW5lci5zY3JvbGxUb3AoeSk7dGhpcy5fJENvbnRhaW5lci5zY3JvbGxMZWZ0KHgpO3RoaXMuX3JlYWRBY3R1YWxTY3JvbGxQb3NpdGlvbigpfX19fTtmdW5jdGlvbiBhKHMsYyl7dmFyIGQ7aWYoIXNhcC51aS5EZXZpY2Uuc3VwcG9ydC50b3VjaCYmISQuc2FwLnNpbXVsYXRlTW9iaWxlT25EZXNrdG9wJiYhYy5ub25Ub3VjaFNjcm9sbGluZyl7cmV0dXJufWlmKHNhcC51aS5EZXZpY2Uuc3VwcG9ydC50b3VjaHx8JC5zYXAuc2ltdWxhdGVNb2JpbGVPbkRlc2t0b3ApeyQuc2FwLnJlcXVpcmUoImpxdWVyeS5zYXAubW9iaWxlIil9ZD17X2luaXQ6ZnVuY3Rpb24oQyxiLGMpe2Z1bmN0aW9uIGUoZixoLHYpe3ZhciBvPW5ldyB3aW5kb3cuU2Nyb2xsZXIoZnVuY3Rpb24oaix0LGspe3ZhciBtPSQuc2FwLmJ5SWQoZikucGFyZW50KCk7bS5zY3JvbGxMZWZ0KGopO20uc2Nyb2xsVG9wKHQpfSx7c2Nyb2xsaW5nWDpoLHNjcm9sbGluZ1k6dixib3VuY2luZzpmYWxzZX0pO3JldHVybiBvfWZ1bmN0aW9uIGcoKXtpZihjLnp5bmdhKXtyZXR1cm4ieiJ9aWYoc2FwLnVpLkRldmljZS5vcy5hbmRyb2lkJiZzYXAudWkuRGV2aWNlLm9zLnZlcnNpb248NC4xfHxzYXAudWkuRGV2aWNlLm9zLmJsYWNrYmVycnl8fHNhcC51aS5EZXZpY2Uub3MuaW9zJiZzYXAudWkuRGV2aWNlLm9zLnZlcnNpb248Nil7cmV0dXJuImkifWlmKCFzYXAudWkuRGV2aWNlLnN1cHBvcnQudG91Y2gmJiQuc2FwLnNpbXVsYXRlTW9iaWxlT25EZXNrdG9wKXtyZXR1cm4iaSJ9aWYoYy5pc2Nyb2xsPT0iZm9yY2UifHwoc2FwLnVpLkRldmljZS5zdXBwb3J0LnRvdWNoJiYoYy5pc2Nyb2xsfHxzYXAudWkuZ2V0Q29yZSgpLmdldENvbmZpZ3VyYXRpb24oKS5nZXROb05hdGl2ZVNjcm9sbCgpKSkpe3JldHVybiJpIn1yZXR1cm4ibiJ9dmFyIGw9ZygpO3RoaXMuX3ByZXZlbnRUb3VjaE1vdmVEZWZhdWx0PSEhYy5wcmV2ZW50RGVmYXVsdDt0aGlzLl9zY3JvbGxlcj1udWxsO3N3aXRjaChsKXtjYXNlInoiOiQuc2FwLnJlcXVpcmUoInNhcC51aS50aGlyZHBhcnR5Lnp5bmdhc2Nyb2xsIik7JC5leHRlbmQodGhpcyx6KTt0aGlzLl96eW5nYT10cnVlO3RoaXMuX3Njcm9sbGVyPWUodGhpcy5fc0NvbnRlbnRJZCx0aGlzLl9iSG9yaXpvbnRhbCx0aGlzLl9iVmVydGljYWwpO2JyZWFrO2Nhc2UiaSI6JC5zYXAucmVxdWlyZSgic2FwLnVpLnRoaXJkcGFydHkuaXNjcm9sbCIpOyQuZXh0ZW5kKHRoaXMsaSk7dGhpcy5fYklTY3JvbGw9dHJ1ZTticmVhaztkZWZhdWx0OmlmKCQubW9iaWxlJiYkLmV2ZW50LnNwZWNpYWwuc3dpcGUmJiQuZXZlbnQuc3BlY2lhbC5zd2lwZS5zY3JvbGxTdXByZXNzaW9uVGhyZXNob2xkPDEyMCl7JC5ldmVudC5zcGVjaWFsLnN3aXBlLnNjcm9sbFN1cHJlc3Npb25UaHJlc2hvbGQ9MTIwfSQuZXh0ZW5kKHRoaXMsbik7aWYoYy5ub25Ub3VjaFNjcm9sbGluZz09PXRydWUpe3RoaXMuX2JEcmFnU2Nyb2xsPXRydWV9aWYoc2FwLnVpLmdldENvcmUoKS5nZXRDb25maWd1cmF0aW9uKCkuZ2V0UlRMKCkpe3RoaXMuX3Njcm9sbFg9OTk5OX1pZihzYXAudWkuRGV2aWNlLm9zLmlvcyl7dGhpcy5fb0lPU1Njcm9sbD17aVRpbWVTdGFtcDowLGJNb21lbnR1bTpmYWxzZX19YnJlYWt9fSxfZXhpdDpmdW5jdGlvbigpe2lmKHRoaXMuX2NsZWFudXApe3RoaXMuX2NsZWFudXAoKX10aGlzLl9zY3JvbGxlcj1udWxsfX07JC5leHRlbmQocyxkKX1yZXR1cm4gU30sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLm12Yy5WaWV3UmVuZGVyZXInKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS5tdmMuVmlld1JlbmRlcmVyJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvbXZjL1ZpZXdSZW5kZXJlciIsWydqcXVlcnkuc2FwLmdsb2JhbCddLGZ1bmN0aW9uKHEpeyJ1c2Ugc3RyaWN0Ijt2YXIgVj17fTtWLmFkZERpc3BsYXlDbGFzcz1mdW5jdGlvbihyLGMpe2lmKGMuZ2V0RGlzcGxheUJsb2NrKCl8fChjLmdldFdpZHRoKCk9PT0iMTAwJSImJmMuZ2V0SGVpZ2h0KCk9PT0iMTAwJSIpKXtyLmFkZENsYXNzKCJzYXBVaVZpZXdEaXNwbGF5QmxvY2siKX19O3JldHVybiBWfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUubXZjLlhNTFZpZXdSZW5kZXJlcicpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLm12Yy5YTUxWaWV3UmVuZGVyZXInKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9tdmMvWE1MVmlld1JlbmRlcmVyIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnLi9WaWV3UmVuZGVyZXInXSxmdW5jdGlvbihxLFYpeyJ1c2Ugc3RyaWN0Ijt2YXIgWD17fTtYLnJlbmRlcj1mdW5jdGlvbihyLGMpe3ZhciAkPWMuXyRvbGRDb250ZW50PXNhcC51aS5jb3JlLlJlbmRlck1hbmFnZXIuZmluZFByZXNlcnZlZENvbnRlbnQoYy5nZXRJZCgpKTtpZigkLmxlbmd0aD09PTApe3ZhciBzPWMuaXNTdWJWaWV3KCk7aWYoIXMpe3Iud3JpdGUoIjxkaXYiKTtyLndyaXRlQ29udHJvbERhdGEoYyk7ci5hZGRDbGFzcygic2FwVWlWaWV3Iik7ci5hZGRDbGFzcygic2FwVWlYTUxWaWV3Iik7Vi5hZGREaXNwbGF5Q2xhc3MocixjKTtyLndyaXRlQXR0cmlidXRlKCJkYXRhLXNhcC11aS1wcmVzZXJ2ZSIsYy5nZXRJZCgpKTtpZihjLmdldFdpZHRoKCkpe3IuYWRkU3R5bGUoIndpZHRoIixjLmdldFdpZHRoKCkpfWlmKGMuZ2V0SGVpZ2h0KCkpe3IuYWRkU3R5bGUoImhlaWdodCIsYy5nZXRIZWlnaHQoKSl9ci53cml0ZVN0eWxlcygpO3Iud3JpdGVDbGFzc2VzKCk7ci53cml0ZSgiPiIpfWZvcih2YXIgaT0wO2k8Yy5fYVBhcnNlZENvbnRlbnQubGVuZ3RoO2krKyl7dmFyIGY9Yy5fYVBhcnNlZENvbnRlbnRbaV07aWYoZiYmdHlwZW9mKGYpPT09InN0cmluZyIpe3Iud3JpdGUoZil9ZWxzZXtyLnJlbmRlckNvbnRyb2woZik7aWYoIWYuYk91dHB1dCl7ci53cml0ZSgnPGRpdiBpZD0ic2FwLXVpLWR1bW15LScrZi5nZXRJZCgpKyciIGNsYXNzPSJzYXBVaUhpZGRlbiIvPicpfX19aWYoIXMpe3Iud3JpdGUoIjwvZGl2PiIpfX1lbHNle3IucmVuZGVyQ29udHJvbChjLm9BZnRlclJlbmRlcmluZ05vdGlmaWVyKTtyLndyaXRlKCc8ZGl2IGlkPSJzYXAtdWktZHVtbXktJytjLmdldElkKCkrJyIgY2xhc3M9InNhcFVpSGlkZGVuIj4nKTtmb3IodmFyIGk9MDtpPGMuX2FQYXJzZWRDb250ZW50Lmxlbmd0aDtpKyspe3ZhciBmPWMuX2FQYXJzZWRDb250ZW50W2ldO2lmKHR5cGVvZihmKSE9PSJzdHJpbmciKXtxLnNhcC5ieUlkKGYuZ2V0SWQoKSwkKS5yZXBsYWNlV2l0aCgnPGRpdiBpZD0ic2FwLXVpLWR1bW15LScrZi5nZXRJZCgpKyciIGNsYXNzPSJzYXBVaUhpZGRlbiIvPicpO3IucmVuZGVyQ29udHJvbChmKX19ci53cml0ZSgnPC9kaXY+Jyl9fTtyZXR1cm4gWH0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLnRtcGwuRE9NRWxlbWVudFJlbmRlcmVyJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUudG1wbC5ET01FbGVtZW50UmVuZGVyZXInKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS90bXBsL0RPTUVsZW1lbnRSZW5kZXJlciIsWydqcXVlcnkuc2FwLmdsb2JhbCddLGZ1bmN0aW9uKHEpeyJ1c2Ugc3RyaWN0Ijt2YXIgRD17fTtELnJlbmRlcj1mdW5jdGlvbihyLGUpe3Iud3JpdGUoIjwiKTtyLndyaXRlKGUuZ2V0VGFnKCkpO3Iud3JpdGVDb250cm9sRGF0YShlKTtxLmVhY2goZS5nZXRBdHRyaWJ1dGVzKCksZnVuY3Rpb24oaSxhKXt2YXIgbj1hLmdldE5hbWUoKS50b0xvd2VyQ2FzZSgpO2lmKG49PT0iY2xhc3MiKXt2YXIgYz1hLmdldFZhbHVlKCkuc3BsaXQoIiAiKTtxLmVhY2goYyxmdW5jdGlvbihpLEMpe3ZhciBDPUMudHJpbSgpO2lmKEMpe3IuYWRkQ2xhc3MoQyl9fSl9ZWxzZSBpZihuPT09InN0eWxlIil7dmFyIHM9YS5nZXRWYWx1ZSgpLnNwbGl0KCI7Iik7cS5lYWNoKHMsZnVuY3Rpb24oaSxTKXt2YXIgaT1TLmluZGV4T2YoIjoiKTtpZihpIT0tMSl7dmFyIGs9Uy5zdWJzdHJpbmcoMCxpKS50cmltKCk7dmFyIHY9Uy5zdWJzdHJpbmcoaSsxKS50cmltKCk7ci5hZGRTdHlsZShrLHYpfX0pfWVsc2V7ci53cml0ZUF0dHJpYnV0ZUVzY2FwZWQoYS5nZXROYW1lKCksYS5nZXRWYWx1ZSgpKX19KTtyLndyaXRlQ2xhc3NlcygpO3Iud3JpdGVTdHlsZXMoKTt2YXIgRT1lLmdldEVsZW1lbnRzKCksaD0hIWUuZ2V0VGV4dCgpfHxFLmxlbmd0aD4wO2lmKCFoKXtyLndyaXRlKCIvPiIpfWVsc2V7ci53cml0ZSgiPiIpO2lmKGUuZ2V0VGV4dCgpKXtyLndyaXRlRXNjYXBlZChlLmdldFRleHQoKSl9cS5lYWNoKEUsZnVuY3Rpb24oaSxjKXtyLnJlbmRlckNvbnRyb2woYyl9KTtyLndyaXRlKCI8LyIpO3Iud3JpdGUoZS5nZXRUYWcoKSk7ci53cml0ZSgiPiIpfX07cmV0dXJuIER9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS50bXBsLlRlbXBsYXRlQ29udHJvbFJlbmRlcmVyJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUudG1wbC5UZW1wbGF0ZUNvbnRyb2xSZW5kZXJlcicpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL3RtcGwvVGVtcGxhdGVDb250cm9sUmVuZGVyZXIiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnXSxmdW5jdGlvbihxKXsidXNlIHN0cmljdCI7dmFyIFQ9e307VC5yZW5kZXI9ZnVuY3Rpb24ocixjKXt2YXIgcz1jLmlzSW5saW5lKCl8fHRoaXMuaGFzQ29udHJvbERhdGE7aWYoIXMpe3Iud3JpdGUoIjxkaXYiKTtyLndyaXRlQ29udHJvbERhdGEoYyk7ci53cml0ZVN0eWxlcygpO3Iud3JpdGVDbGFzc2VzKCk7ci53cml0ZSgiPiIpfXZhciBSPXRoaXMucmVuZGVyVGVtcGxhdGV8fGMuZ2V0VGVtcGxhdGVSZW5kZXJlcigpO2lmKFIpe1IuYXBwbHkodGhpcyxhcmd1bWVudHMpfWlmKCFzKXtyLndyaXRlKCI8L2Rpdj4iKX19O3JldHVybiBUfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUudXRpbC5GaWxlJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUudXRpbC5GaWxlJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvdXRpbC9GaWxlIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL0RldmljZSddLGZ1bmN0aW9uKHEsRCl7J3VzZSBzdHJpY3QnO3ZhciBGPXtzYXZlOmZ1bmN0aW9uKGQsZixzLG0sYyl7dmFyIGE9ZisnLicrcztpZihjPT09J3V0Zi04JyYmcz09PSdjc3YnKXtkPSdcdWZlZmYnK2R9aWYod2luZG93LkJsb2Ipe3ZhciB0PSdkYXRhOicrbTtpZihjKXt0Kz0nO2NoYXJzZXQ9JytjfXZhciBiPW5ldyB3aW5kb3cuQmxvYihbZF0se3R5cGU6dH0pO2lmKHdpbmRvdy5uYXZpZ2F0b3IubXNTYXZlT3JPcGVuQmxvYil7d2luZG93Lm5hdmlnYXRvci5tc1NhdmVPck9wZW5CbG9iKGIsYSl9ZWxzZXt2YXIgdT13aW5kb3cuVVJMfHx3aW5kb3cud2Via2l0VVJMO3ZhciBCPXUuY3JlYXRlT2JqZWN0VVJMKGIpO3ZhciBsPXdpbmRvdy5kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7aWYoJ2Rvd25sb2FkJ2luIGwpe3ZhciAkPXEoZG9jdW1lbnQuYm9keSk7dmFyIGU9cShsKS5hdHRyKHtkb3dubG9hZDphLGhyZWY6QixzdHlsZTonZGlzcGxheTpub25lJ30pOyQuYXBwZW5kKGUpO2UuZ2V0KDApLmNsaWNrKCk7ZS5yZW1vdmUoKX1lbHNle2lmKGQmJmM9PT0ndXRmLTgnJiZzPT09J2Nzdicpe2Q9ZC5zdWJzdHIoMSl9d2luZG93Lm9wZW4odCsiO2Jhc2U2NCwiK3dpbmRvdy5idG9hKGQpKX19fWVsc2UgaWYoRC5icm93c2VyLmludGVybmV0X2V4cGxvcmVyJiZELmJyb3dzZXIudmVyc2lvbjw9OSl7dmFyICQ9cShkb2N1bWVudC5ib2R5KTt2YXIgZz1xKCc8aWZyYW1lLz4nLHtzdHlsZTonZGlzcGxheTpub25lJ30pOyQuYXBwZW5kKGcpO3ZhciBvPWcuZ2V0KDApLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQ7by5vcGVuKG0sJ3JlcGxhY2UnKTtpZihjKXtvLmNoYXJzZXQ9Y31vLndyaXRlKGQpO28uY2xvc2UoKTt2YXIgVD1uZXcgRGF0ZSgpO3ZhciBTPW8uZXhlY0NvbW1hbmQoJ1NhdmVBcycsZmFsc2UsYSk7aWYoIVMmJm5ldyBEYXRlKCktVDwxMCl7by5leGVjQ29tbWFuZCgnU2F2ZUFzJyxmYWxzZSxhKycudHh0Jyl9Zy5yZW1vdmUoKX19fTtyZXR1cm4gRn0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLnV0aWwuTGlicmFyeUluZm8nKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS51dGlsLkxpYnJhcnlJbmZvJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvdXRpbC9MaWJyYXJ5SW5mbyIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ3NhcC91aS9iYXNlL09iamVjdCcsJ2pxdWVyeS5zYXAuc2NyaXB0J10sZnVuY3Rpb24ocSxCKXsidXNlIHN0cmljdCI7dmFyIEw9Qi5leHRlbmQoInNhcC51aS5jb3JlLnV0aWwuTGlicmFyeUluZm8iLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbigpe0IuYXBwbHkodGhpcyk7dGhpcy5fb0xpYkluZm9zPXt9fSxkZXN0cm95OmZ1bmN0aW9uKCl7Qi5wcm90b3R5cGUuZGVzdHJveS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5fb0xpYkluZm9zPXt9fSxnZXRJbnRlcmZhY2U6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc319KTtMLnByb3RvdHlwZS5fbG9hZExpYnJhcnlNZXRhZGF0YT1mdW5jdGlvbihsLGMpe2w9bC5yZXBsYWNlKC9cLy9nLCIuIik7aWYodGhpcy5fb0xpYkluZm9zW2xdKXtxLnNhcC5kZWxheWVkQ2FsbCgwLHdpbmRvdyxjLFt0aGlzLl9vTGliSW5mb3NbbF1dKTtyZXR1cm59dmFyIHU9cS5zYXAuZ2V0TW9kdWxlUGF0aChsLCcvJyksdD10aGlzO3EuYWpheCh7dXJsOnUrIi5saWJyYXJ5IixkYXRhVHlwZToieG1sIixlcnJvcjpmdW5jdGlvbih4LHMsZSl7cS5zYXAubG9nLmVycm9yKCJmYWlsZWQgdG8gbG9hZCBsaWJyYXJ5IGRldGFpbHMgZnJvbSAnIit1KyIubGlicmFyeSc6ICIrcysiLCAiK2UpO3QuX29MaWJJbmZvc1tsXT17bmFtZTpsLGRhdGE6bnVsbCx1cmw6dX07Yyh0Ll9vTGliSW5mb3NbbF0pfSxzdWNjZXNzOmZ1bmN0aW9uKGQscyx4KXt0Ll9vTGliSW5mb3NbbF09e25hbWU6bCxkYXRhOmQsdXJsOnV9O2ModC5fb0xpYkluZm9zW2xdKX19KX07TC5wcm90b3R5cGUuX2dldExpYnJhcnlJbmZvPWZ1bmN0aW9uKGwsYyl7dGhpcy5fbG9hZExpYnJhcnlNZXRhZGF0YShsLGZ1bmN0aW9uKGQpe3ZhciByPXtsaWJzOltdLGxpYnJhcnk6ZC5uYW1lLGxpYnJhcnlVcmw6ZC51cmx9O2lmKGQuZGF0YSl7dmFyICQ9cShkLmRhdGEpO3IudmVuZG9yPSQuZmluZCgidmVuZG9yIikudGV4dCgpO3IuY29weXJpZ2h0PSQuZmluZCgiY29weXJpZ2h0IikudGV4dCgpO3IudmVyc2lvbj0kLmZpbmQoInZlcnNpb24iKS50ZXh0KCk7ci5kb2N1bWVudGF0aW9uPSQuZmluZCgiZG9jdW1lbnRhdGlvbiIpLnRleHQoKX1jKHIpfSl9O0wucHJvdG90eXBlLl9nZXRUaGlyZFBhcnR5SW5mbz1mdW5jdGlvbihsLGMpe3RoaXMuX2xvYWRMaWJyYXJ5TWV0YWRhdGEobCxmdW5jdGlvbihkKXt2YXIgcj17bGliczpbXSxsaWJyYXJ5OmQubmFtZSxsaWJyYXJ5VXJsOmQudXJsfTtpZihkLmRhdGEpe3ZhciAkPXEoZC5kYXRhKS5maW5kKCJhcHBEYXRhIikuZmluZCgidGhpcmRwYXJ0eSIpLmNoaWxkcmVuKCk7JC5lYWNoKGZ1bmN0aW9uKGksbyl7aWYoby5ub2RlTmFtZT09PSJsaWIiKXt2YXIgYT1xKG8pO3ZhciBiPWEuY2hpbGRyZW4oImxpY2Vuc2UiKTtyLmxpYnMucHVzaCh7ZGlzcGxheU5hbWU6YS5hdHRyKCJkaXNwbGF5TmFtZSIpLGhvbWVwYWdlOmEuYXR0cigiaG9tZXBhZ2UiKSx2ZXJzaW9uOmEuYXR0cigidmVyc2lvbiIpLGxpY2Vuc2U6e3VybDpiLmF0dHIoInVybCIpLHR5cGU6Yi5hdHRyKCJ0eXBlIiksZmlsZTpkLnVybCtiLmF0dHIoImZpbGUiKX19KX19KX1jKHIpfSl9O0wucHJvdG90eXBlLl9nZXREb2N1SW5kZXg9ZnVuY3Rpb24obCxjKXt0aGlzLl9sb2FkTGlicmFyeU1ldGFkYXRhKGwsZnVuY3Rpb24oZCl7dmFyIGE9ZC5uYW1lLGI9ZC51cmwscj17ImRvY3UiOnt9LGxpYnJhcnk6YSxsaWJyYXJ5VXJsOmJ9O2lmKCFkLmRhdGEpe2Mocik7cmV0dXJufXZhciBEPXEoZC5kYXRhKS5maW5kKCJhcHBEYXRhIikuZmluZCgiZG9jdW1lbnRhdGlvbiIpO3ZhciB1PUQuYXR0cigiaW5kZXhVcmwiKTtpZighdSl7YyhyKTtyZXR1cm59aWYoRC5hdHRyKCJyZXNvbHZlIik9PSJsaWIiKXt1PWQudXJsK3V9cS5hamF4KHt1cmw6dSxkYXRhVHlwZToianNvbiIsZXJyb3I6ZnVuY3Rpb24oeCxzLGUpe3Euc2FwLmxvZy5lcnJvcigiZmFpbGVkIHRvIGxvYWQgbGlicmFyeSBkb2N1IGZyb20gJyIrdSsiJzogIitzKyIsICIrZSk7YyhyKX0sc3VjY2VzczpmdW5jdGlvbihkLHMseCl7ZC5saWJyYXJ5PWE7ZC5saWJyYXJ5VXJsPWI7YyhkKX19KX0pfTtyZXR1cm4gTH0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLndzLlJlYWR5U3RhdGUnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS53cy5SZWFkeVN0YXRlJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvd3MvUmVhZHlTdGF0ZSIsWydqcXVlcnkuc2FwLmdsb2JhbCddLGZ1bmN0aW9uKHEpeyJ1c2Ugc3RyaWN0Ijt2YXIgUj17Q09OTkVDVElORzowLE9QRU46MSxDTE9TSU5HOjIsQ0xPU0VEOjN9O3JldHVybiBSfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLm1vZGVsLkJpbmRpbmdNb2RlJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLm1vZGVsLkJpbmRpbmdNb2RlJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL21vZGVsL0JpbmRpbmdNb2RlIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJ10sZnVuY3Rpb24ocSl7InVzZSBzdHJpY3QiO3ZhciBCPXtEZWZhdWx0OiJEZWZhdWx0IixPbmVUaW1lOiJPbmVUaW1lIixPbmVXYXk6Ik9uZVdheSIsVHdvV2F5OiJUd29XYXkifTtyZXR1cm4gQn0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5tb2RlbC5DaGFuZ2VSZWFzb24nKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkubW9kZWwuQ2hhbmdlUmVhc29uJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL21vZGVsL0NoYW5nZVJlYXNvbiIsWydqcXVlcnkuc2FwLmdsb2JhbCddLGZ1bmN0aW9uKHEpeyJ1c2Ugc3RyaWN0Ijt2YXIgQz17U29ydDoic29ydCIsRmlsdGVyOiJmaWx0ZXIiLENoYW5nZToiY2hhbmdlIixDb250ZXh0OiJjb250ZXh0IixSZWZyZXNoOiJyZWZyZXNoIn07cmV0dXJuIEN9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkubW9kZWwuRmlsdGVyT3BlcmF0b3InKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkubW9kZWwuRmlsdGVyT3BlcmF0b3InKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvbW9kZWwvRmlsdGVyT3BlcmF0b3IiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnXSxmdW5jdGlvbihxKXsidXNlIHN0cmljdCI7dmFyIEY9e0VROiJFUSIsTkU6Ik5FIixMVDoiTFQiLExFOiJMRSIsR1Q6IkdUIixHRToiR0UiLEJUOiJCVCIsQ29udGFpbnM6IkNvbnRhaW5zIixTdGFydHNXaXRoOiJTdGFydHNXaXRoIixFbmRzV2l0aDoiRW5kc1dpdGgifTtyZXR1cm4gRn0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5tb2RlbC5GaWx0ZXJUeXBlJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLm1vZGVsLkZpbHRlclR5cGUnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvbW9kZWwvRmlsdGVyVHlwZSIsWydqcXVlcnkuc2FwLmdsb2JhbCddLGZ1bmN0aW9uKHEpeyJ1c2Ugc3RyaWN0Ijt2YXIgRj17QXBwbGljYXRpb246IkFwcGxpY2F0aW9uIixDb250cm9sOiJDb250cm9sIn07cmV0dXJuIEZ9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkubW9kZWwuRm9ybWF0RXhjZXB0aW9uJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLm1vZGVsLkZvcm1hdEV4Y2VwdGlvbicpO3NhcC51aS5kZWZpbmUoInNhcC91aS9tb2RlbC9Gb3JtYXRFeGNlcHRpb24iLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvYmFzZS9FeGNlcHRpb24nXSxmdW5jdGlvbihxLEUpeyJ1c2Ugc3RyaWN0Ijt2YXIgRj1mdW5jdGlvbihtKXt0aGlzLm5hbWU9IkZvcm1hdEV4Y2VwdGlvbiI7dGhpcy5tZXNzYWdlPW19O0YucHJvdG90eXBlPXEuc2FwLm5ld09iamVjdChFLnByb3RvdHlwZSk7cmV0dXJuIEZ9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkubW9kZWwuUGFyc2VFeGNlcHRpb24nKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkubW9kZWwuUGFyc2VFeGNlcHRpb24nKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvbW9kZWwvUGFyc2VFeGNlcHRpb24iLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvYmFzZS9FeGNlcHRpb24nXSxmdW5jdGlvbihxLEUpeyJ1c2Ugc3RyaWN0Ijt2YXIgUD1mdW5jdGlvbihtKXt0aGlzLm5hbWU9IlBhcnNlRXhjZXB0aW9uIjt0aGlzLm1lc3NhZ2U9bX07UC5wcm90b3R5cGU9cS5zYXAubmV3T2JqZWN0KEUucHJvdG90eXBlKTtyZXR1cm4gUH0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5tb2RlbC5Tb3J0ZXInKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkubW9kZWwuU29ydGVyJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL21vZGVsL1NvcnRlciIsWydqcXVlcnkuc2FwLmdsb2JhbCddLGZ1bmN0aW9uKHEpeyJ1c2Ugc3RyaWN0Ijt2YXIgUz1zYXAudWkuYmFzZS5PYmplY3QuZXh0ZW5kKCJzYXAudWkubW9kZWwuU29ydGVyIix7Y29uc3RydWN0b3I6ZnVuY3Rpb24ocCxkLGcpe2lmKHR5cGVvZiBwPT09Im9iamVjdCIpe3ZhciBzPXA7cD1zLnBhdGg7ZD1zLmRlc2NlbmRpbmc7Zz1zLmdyb3VwfXRoaXMuc1BhdGg9cDt2YXIgaT10aGlzLnNQYXRoLmluZGV4T2YoIj4iKTtpZihpPjApe3RoaXMuc1BhdGg9dGhpcy5zUGF0aC5zdWJzdHIoaSsxKX10aGlzLmJEZXNjZW5kaW5nPWQ7dGhpcy52R3JvdXA9ZztpZih0eXBlb2YgZz09ImJvb2xlYW4iJiZnKXt0aGlzLmZuR3JvdXA9ZnVuY3Rpb24oYyl7cmV0dXJuIGMuZ2V0UHJvcGVydHkodGhpcy5zUGF0aCl9fWlmKHR5cGVvZiBnPT0iZnVuY3Rpb24iKXt0aGlzLmZuR3JvdXA9Z319fSk7cmV0dXJuIFN9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkubW9kZWwuVHlwZScpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5tb2RlbC5UeXBlJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL21vZGVsL1R5cGUiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvYmFzZS9PYmplY3QnXSxmdW5jdGlvbihxLEIpeyJ1c2Ugc3RyaWN0Ijt2YXIgVD1CLmV4dGVuZCgic2FwLnVpLm1vZGVsLlR5cGUiLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbigpe0IuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMuc05hbWU9IlR5cGUifSxtZXRhZGF0YTp7ImFic3RyYWN0Ijp0cnVlLHB1YmxpY01ldGhvZHM6WyJnZXROYW1lIl19fSk7VC5wcm90b3R5cGUuZ2V0TmFtZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnNOYW1lfTtyZXR1cm4gVH0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5tb2RlbC5WYWxpZGF0ZUV4Y2VwdGlvbicpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5tb2RlbC5WYWxpZGF0ZUV4Y2VwdGlvbicpO3NhcC51aS5kZWZpbmUoInNhcC91aS9tb2RlbC9WYWxpZGF0ZUV4Y2VwdGlvbiIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ3NhcC91aS9iYXNlL0V4Y2VwdGlvbiddLGZ1bmN0aW9uKHEsRSl7InVzZSBzdHJpY3QiO3ZhciBWPWZ1bmN0aW9uKG0sdil7dGhpcy5uYW1lPSJWYWxpZGF0ZUV4Y2VwdGlvbiI7dGhpcy5tZXNzYWdlPW07dGhpcy52aW9sYXRlZENvbnN0cmFpbnRzPXZ9O1YucHJvdG90eXBlPXEuc2FwLm5ld09iamVjdChFLnByb3RvdHlwZSk7cmV0dXJuIFZ9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkubW9kZWwuYW5hbHl0aWNzLm9kYXRhNGFuYWx5dGljcycpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5tb2RlbC5hbmFseXRpY3Mub2RhdGE0YW5hbHl0aWNzJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL21vZGVsL2FuYWx5dGljcy9vZGF0YTRhbmFseXRpY3MiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnXSxmdW5jdGlvbihxKXsidXNlIHN0cmljdCI7dmFyIG89b3x8e307by5jb25zdGFudHM9e307by5jb25zdGFudHNbIlNBUF9OQU1FU1BBQ0UiXT0iaHR0cDovL3d3dy5zYXAuY29tL1Byb3RvY29scy9TQVBEYXRhIjtvLmNvbnN0YW50c1siVkVSU0lPTiJdPSIwLjciO28uaGVscGVyPXt0b2tlbml6ZU5hbWV0b0xhYmVsVGV4dDpmdW5jdGlvbihuKXt2YXIgbD0iIjtsPW4ucmVwbGFjZSgvXlBfKC4qKS8sIiQxIik7bD1sLnJlcGxhY2UoLyhbXkEtWjAtOV9dKykoW0EtWjAtOV9dKS9nLCIkMSAkMiIpO2w9bC5yZXBsYWNlKC8oW0EtWjAtOV9dezIsfSkoW0EtWjAtOV9dKShbXkEtWjAtOV9dKykvZywiJDEgJDIkMyIpO2w9bC5yZXBsYWNlKC8oLiopIF9FJC8sIiQxIik7bD1sLnJlcGxhY2UoLyguKikgXyguKikvZywiJDEgJDIiKTtyZXR1cm4gbH19O28uTW9kZWw9ZnVuY3Rpb24obSxwKXt0aGlzLl9pbml0KG0scCl9O28uTW9kZWwuUmVmZXJlbmNlQnlVUkk9ZnVuY3Rpb24odSl7cmV0dXJue3NTZXJ2aWNlVVJJOnV9fTtvLk1vZGVsLlJlZmVyZW5jZUJ5TW9kZWw9ZnVuY3Rpb24obSl7cmV0dXJue29Nb2RlbDptfX07by5Nb2RlbC5SZWZlcmVuY2VXaXRoV29ya2Fyb3VuZD1mdW5jdGlvbihtLHcpe3JldHVybntvTW9kZWxSZWZlcmVuY2U6bSxhV29ya2Fyb3VuZElEOnd9fTtvLk1vZGVsLnByb3RvdHlwZT17X2luaXQ6ZnVuY3Rpb24obSxwKXtpZih0eXBlb2YgcD09InN0cmluZyIpe3Rocm93IkRlcHJlY2F0ZWQgc2Vjb25kIGFyZ3VtZW50OiBBZGp1c3QgeW91ciBpbnZvY2F0aW9uIGJ5IHBhc3NpbmcgYW4gb2JqZWN0IHdpdGggYSBwcm9wZXJ0eSBzQW5ub3RhdGlvbkpTT05Eb2MgYXMgYSBzZWNvbmQgYXJndW1lbnQgaW5zdGVhZCJ9dGhpcy5fbVBhcmFtZXRlcj1wO3RoaXMuX29BY3RpdmF0ZWRXb3JrYXJvdW5kcz1uZXcgT2JqZWN0KCk7aWYobSYmbS5hV29ya2Fyb3VuZElEKXtmb3IodmFyIGk9LTEsSTtJPW0uYVdvcmthcm91bmRJRFsrK2ldOyl7dGhpcy5fb0FjdGl2YXRlZFdvcmthcm91bmRzW0ldPXRydWV9bT1tLm9Nb2RlbFJlZmVyZW5jZX1pZighbXx8KCFtLnNTZXJ2aWNlVVJJJiYhbS5vTW9kZWwpKXt0aHJvdyJVc2FnZSB3aXRoIG9Nb2RlbFJlZmVyZW5jZSBiZWluZyBhbiBpbnN0YW5jZSBvZiBNb2RlbC5SZWZlcmVuY2VCeVVSSSBvciBNb2RlbC5SZWZlcmVuY2VCeU1vZGVsIn1pZihtLm9Nb2RlbCl0aGlzLl9vTW9kZWw9bS5vTW9kZWw7ZWxzZSB0aGlzLl9vTW9kZWw9bmV3IHNhcC51aS5tb2RlbC5vZGF0YS5PRGF0YU1vZGVsKG0uc1NlcnZpY2VVUkkpO2lmKHRoaXMuX29Nb2RlbC5nZXRTZXJ2aWNlTWV0YWRhdGEoKS5kYXRhU2VydmljZXM9PXVuZGVmaW5lZCl7dGhyb3ciTW9kZWwgY291bGQgbm90IGJlIGxvYWRlZCJ9aWYocCYmcC5zQW5ub3RhdGlvbkpTT05Eb2MpdGhpcy5tZXJnZVYyQW5ub3RhdGlvbnMocC5zQW5ub3RhdGlvbkpTT05Eb2MpO3RoaXMuX29RdWVyeVJlc3VsdFNldD1uZXcgT2JqZWN0KCk7dGhpcy5fb1BhcmFtZXRlcml6YXRpb25TZXQ9bmV3IE9iamVjdCgpO3RoaXMuX29FbnRpdHlUeXBlU2V0PW5ldyBPYmplY3QoKTt0aGlzLl9vRW50aXR5U2V0U2V0PW5ldyBPYmplY3QoKTt0aGlzLl9vRW50aXR5VHlwZU5hbWVUb0VudGl0eVNldE1hcD1uZXcgT2JqZWN0KCk7dmFyIHM9dGhpcy5fb01vZGVsLmdldFNlcnZpY2VNZXRhZGF0YSgpLmRhdGFTZXJ2aWNlcy5zY2hlbWFbMF07Zm9yKHZhciBpPS0xLGM7Yz1zLmVudGl0eUNvbnRhaW5lclsrK2ldOyl7aWYoYy5pc0RlZmF1bHRFbnRpdHlDb250YWluZXI9PSJ0cnVlIil7dGhpcy5fb0RlZmF1bHRFbnRpdHlDb250YWluZXI9YzticmVha319dmFyIGU9cy5lbnRpdHlUeXBlO3ZhciBRPVtdLFA9W10sdT1bXTtmb3IodmFyIGk9LTEsdDt0PWVbKytpXTspe3ZhciBiPWZhbHNlO2lmKHQuZXh0ZW5zaW9ucyE9dW5kZWZpbmVkKXtmb3IodmFyIGo9LTEsRTtFPXQuZXh0ZW5zaW9uc1srK2pdOyl7aWYoRS5uYW1lc3BhY2U9PW8uY29uc3RhbnRzLlNBUF9OQU1FU1BBQ0UmJkUubmFtZT09InNlbWFudGljcyIpe2I9dHJ1ZTtzd2l0Y2goRS52YWx1ZSl7Y2FzZSJhZ2dyZWdhdGUiOlEucHVzaCh0KTticmVhaztjYXNlInBhcmFtZXRlcnMiOlAucHVzaCh0KTticmVhaztkZWZhdWx0OnUucHVzaCh0KX19aWYoYiljb250aW51ZX1pZighYil1LnB1c2godCl9ZWxzZSB1LnB1c2godCl9Zm9yKHZhciBpPS0xLHQ7dD11WysraV07KXt2YXIgYT1uZXcgby5FbnRpdHlUeXBlKHRoaXMuX29Nb2RlbC5nZXRTZXJ2aWNlTWV0YWRhdGEoKSxzLHQpO3RoaXMuX29FbnRpdHlUeXBlU2V0W2EuZ2V0UU5hbWUoKV09YTt2YXIgZD10aGlzLl9nZXRFbnRpdHlTZXRzT2ZUeXBlKHMsYS5nZXRRTmFtZSgpKTtpZihkLmxlbmd0aD09MCl0aHJvdyJJbnZhbGlkIGNvbnN1bXB0aW9uIG1vZGVsOiBObyBlbnRpdHkgc2V0IGZvciBlbnRpdHkgdHlwZSAiK2EuZ2V0UU5hbWUoKSsiIGZvdW5kIjtpZihkLmxlbmd0aD4xKXRocm93IlVuc3VwcG9ydGVkIGNvbnN1bXB0aW9uIG1vZGVsOiBNb3JlIHRoYW4gb25lIGVudGl0eSBzZXQgZm9yIGVudGl0eSB0eXBlICIrYS5nZXRRTmFtZSgpKyIgZm91bmQiO3ZhciBmPW5ldyBvLkVudGl0eVNldCh0aGlzLl9vTW9kZWwuZ2V0U2VydmljZU1ldGFkYXRhKCkscyxkWzBdWzBdLGRbMF1bMV0sYSk7dGhpcy5fb0VudGl0eVNldFNldFtmLmdldFFOYW1lKCldPWY7dGhpcy5fb0VudGl0eVR5cGVOYW1lVG9FbnRpdHlTZXRNYXBbYS5nZXRRTmFtZSgpXT1mfXZhciBnPXt9O2Zvcih2YXIgaT0tMSx0O3Q9UFsrK2ldOyl7dmFyIGE9bmV3IG8uRW50aXR5VHlwZSh0aGlzLl9vTW9kZWwuZ2V0U2VydmljZU1ldGFkYXRhKCkscyx0KTt0aGlzLl9vRW50aXR5VHlwZVNldFthLmdldFFOYW1lKCldPWE7dmFyIGQ9dGhpcy5fZ2V0RW50aXR5U2V0c09mVHlwZShzLGEuZ2V0UU5hbWUoKSk7aWYoZC5sZW5ndGg9PTApdGhyb3ciSW52YWxpZCBjb25zdW1wdGlvbiBtb2RlbDogTm8gZW50aXR5IHNldCBmb3IgcGFyYW1ldGVyIGVudGl0eSB0eXBlICIrYS5nZXRRTmFtZSgpKyIgZm91bmQiO2lmKGQubGVuZ3RoPjEpdGhyb3ciVW5zdXBwb3J0ZWQgY29uc3VtcHRpb24gbW9kZWw6IE1vcmUgdGhhbiBvbmUgZW50aXR5IHNldCBmb3IgcGFyYW1ldGVyIGVudGl0eSB0eXBlICIrYS5nZXRRTmFtZSgpKyIgZm91bmQiO3ZhciBmPW5ldyBvLkVudGl0eVNldCh0aGlzLl9vTW9kZWwuZ2V0U2VydmljZU1ldGFkYXRhKCkscyxkWzBdWzBdLGRbMF1bMV0sYSk7dGhpcy5fb0VudGl0eVNldFNldFtmLmdldFFOYW1lKCldPWY7dGhpcy5fb0VudGl0eVR5cGVOYW1lVG9FbnRpdHlTZXRNYXBbYS5nZXRRTmFtZSgpXT1mO3ZhciBoPW5ldyBvLlBhcmFtZXRlcml6YXRpb24oYSxmKTt0aGlzLl9vUGFyYW1ldGVyaXphdGlvblNldFtoLmdldE5hbWUoKV09aDtnW2EuZ2V0UU5hbWUoKV09aDt2YXIgaz1hLmdldFFOYW1lKCk7aWYocy5hc3NvY2lhdGlvbiE9dW5kZWZpbmVkKXtmb3IodmFyIGo9LTEsQTtBPXMuYXNzb2NpYXRpb25bKytqXTspe2lmKEEucmVmZXJlbnRpYWxDb25zdHJhaW50PT11bmRlZmluZWQpY29udGludWU7dmFyIGw9bnVsbDtpZihBLmVuZFswXS50eXBlPT1rJiZBLmVuZFswXS5tdWx0aXBsaWNpdHk9PSIqIiYmQS5lbmRbMV0ubXVsdGlwbGljaXR5PT0iMSIpe2w9QS5lbmRbMV0udHlwZX1lbHNlIGlmKEEuZW5kWzFdLnR5cGU9PWsmJkEuZW5kWzFdLm11bHRpcGxpY2l0eT09IioiJiZBLmVuZFswXS5tdWx0aXBsaWNpdHk9PSIxIil7bD1BLmVuZFswXS50eXBlfWlmKCFsKWNvbnRpbnVlO2lmKEEucmVmZXJlbnRpYWxDb25zdHJhaW50LmRlcGVuZGVudC5wcm9wZXJ0eVJlZi5sZW5ndGghPTEpY29udGludWU7dmFyIG49aC5maW5kUGFyYW1ldGVyQnlOYW1lKEEucmVmZXJlbnRpYWxDb25zdHJhaW50LmRlcGVuZGVudC5wcm9wZXJ0eVJlZlswXS5uYW1lKTtpZihuPT1udWxsKWNvbnRpbnVlO3ZhciB2PXRoaXMuX29FbnRpdHlUeXBlU2V0W2xdO3ZhciBWPXRoaXMuX29FbnRpdHlUeXBlTmFtZVRvRW50aXR5U2V0TWFwW2xdO24uc2V0VmFsdWVTZXRFbnRpdHkodixWKX19fWZvcih2YXIgaT0tMSx0O3Q9UVsrK2ldOyl7dmFyIGE9bmV3IG8uRW50aXR5VHlwZSh0aGlzLl9vTW9kZWwuZ2V0U2VydmljZU1ldGFkYXRhKCkscyx0KTt0aGlzLl9vRW50aXR5VHlwZVNldFthLmdldFFOYW1lKCldPWE7dmFyIHI9YS5nZXRRTmFtZSgpO3ZhciBoPW51bGw7dmFyIHc9bnVsbDtpZihzLmFzc29jaWF0aW9uIT11bmRlZmluZWQpe2Zvcih2YXIgaj0tMSxBO0E9cy5hc3NvY2lhdGlvblsrK2pdOyl7dmFyIHg9bnVsbDtpZihBLmVuZFswXS50eXBlPT1yKXg9QS5lbmRbMV0udHlwZTtlbHNlIGlmKEEuZW5kWzFdLnR5cGU9PXIpeD1BLmVuZFswXS50eXBlO2Vsc2UgY29udGludWU7dmFyIE09bnVsbDtNPWdbeF07aWYoTSE9bnVsbClpZihoIT1udWxsKXt0aHJvdyJMSU1JVEFUSU9OOiBVbmFibGUgdG8gaGFuZGxlIG11bHRpcGxlIHBhcmFtZXRlciBlbnRpdHkgdHlwZXMgb2YgcXVlcnkgZW50aXR5ICIrYS5uYW1lfWVsc2V7aD1NO3c9QX19fXZhciBkPXRoaXMuX2dldEVudGl0eVNldHNPZlR5cGUocyxhLmdldFFOYW1lKCkpO2lmKGQubGVuZ3RoIT0xKXRocm93IkludmFsaWQgY29uc3VtcHRpb24gbW9kZWw6IFRoZXJlIG11c3QgYmUgZXhhY3RseSBvbmUgZW50aXR5IHNldCBmb3IgYW4gZW50aXR5IHR5cGUgYW5ub3RhdGVkIHdpdGggYWdncmVnYXRpbmcgc2VtYW50aWNzIjt2YXIgZj1uZXcgby5FbnRpdHlTZXQodGhpcy5fb01vZGVsLmdldFNlcnZpY2VNZXRhZGF0YSgpLHMsZFswXVswXSxkWzBdWzFdLGEpO3RoaXMuX29FbnRpdHlTZXRTZXRbZi5nZXRRTmFtZSgpXT1mO3RoaXMuX29FbnRpdHlUeXBlTmFtZVRvRW50aXR5U2V0TWFwW2EuZ2V0UU5hbWUoKV09Zjt2YXIgeT1uZXcgby5RdWVyeVJlc3VsdCh0aGlzLGEsZixoKTt0aGlzLl9vUXVlcnlSZXN1bHRTZXRbeS5nZXROYW1lKCldPXk7aWYoaCloLnNldFRhcmdldFF1ZXJ5UmVzdWx0KHksdyk7aWYocy5hc3NvY2lhdGlvbiE9dW5kZWZpbmVkKXtmb3IodmFyIGo9LTEsQTtBPXMuYXNzb2NpYXRpb25bKytqXTspe2lmKEEucmVmZXJlbnRpYWxDb25zdHJhaW50PT11bmRlZmluZWQpY29udGludWU7dmFyIEQ9bnVsbDtpZihBLmVuZFswXS50eXBlPT1yJiZBLmVuZFswXS5tdWx0aXBsaWNpdHk9PSIqIiYmQS5lbmRbMV0ubXVsdGlwbGljaXR5PT0iMSIpe0Q9QS5lbmRbMV0udHlwZX1lbHNlIGlmKEEuZW5kWzFdLnR5cGU9PXImJkEuZW5kWzFdLm11bHRpcGxpY2l0eT09IioiJiZBLmVuZFswXS5tdWx0aXBsaWNpdHk9PSIxIil7RD1BLmVuZFswXS50eXBlfWlmKCFEKWNvbnRpbnVlO2lmKEEucmVmZXJlbnRpYWxDb25zdHJhaW50LmRlcGVuZGVudC5wcm9wZXJ0eVJlZi5sZW5ndGghPTEpY29udGludWU7dmFyIHo9eS5maW5kRGltZW5zaW9uQnlOYW1lKEEucmVmZXJlbnRpYWxDb25zdHJhaW50LmRlcGVuZGVudC5wcm9wZXJ0eVJlZlswXS5uYW1lKTtpZih6PT1udWxsKWNvbnRpbnVlO3ZhciBCPXRoaXMuX29FbnRpdHlUeXBlTmFtZVRvRW50aXR5U2V0TWFwW0RdO3ouc2V0TWVtYmVyc0VudGl0eVNldChCKX19fX0sb1VJNU9EYXRhTW9kZWxBbm5vdGF0YWJsZU9iamVjdDp7b2JqZWN0TmFtZToic2NoZW1hIixrZXlQcm9wTmFtZToibmFtZXNwYWNlIixleHRlbnNpb25zOnRydWUsYVN1Yk9iamVjdDpbe29iamVjdE5hbWU6ImVudGl0eVR5cGUiLGtleVByb3BOYW1lOiJuYW1lIixleHRlbnNpb25zOnRydWUsYVN1Yk9iamVjdDpbe29iamVjdE5hbWU6InByb3BlcnR5IixrZXlQcm9wTmFtZToibmFtZSIsYVN1Yk9iamVjdDpbXSxleHRlbnNpb25zOnRydWV9XX0se29iamVjdE5hbWU6ImVudGl0eUNvbnRhaW5lciIsa2V5UHJvcE5hbWU6Im5hbWUiLGV4dGVuc2lvbnM6ZmFsc2UsYVN1Yk9iamVjdDpbe29iamVjdE5hbWU6ImVudGl0eVNldCIsa2V5UHJvcE5hbWU6Im5hbWUiLGV4dGVuc2lvbnM6dHJ1ZSxhU3ViT2JqZWN0OltdfV19XX0sbWVyZ2VWMkFubm90YXRpb25zOmZ1bmN0aW9uKGEpe3ZhciBBPW51bGw7dHJ5e0E9SlNPTi5wYXJzZShhKX1jYXRjaChlKXtyZXR1cm59dmFyIG07dHJ5e209dGhpcy5fb01vZGVsLmdldFNlcnZpY2VNZXRhZGF0YSgpLmRhdGFTZXJ2aWNlc31jYXRjaChlKXtyZXR1cm59Zm9yKHZhciBwIGluIEEpe2lmKCEodGhpcy5vVUk1T0RhdGFNb2RlbEFubm90YXRhYmxlT2JqZWN0Lm9iamVjdE5hbWU9PXApKWNvbnRpbnVlO2lmKCEoQVtwXWluc3RhbmNlb2YgQXJyYXkpKXtjb250aW51ZX10aGlzLm1lcmdlVjJBbm5vdGF0aW9uTGV2ZWwobVt0aGlzLm9VSTVPRGF0YU1vZGVsQW5ub3RhdGFibGVPYmplY3Qub2JqZWN0TmFtZV0sQVt0aGlzLm9VSTVPRGF0YU1vZGVsQW5ub3RhdGFibGVPYmplY3Qub2JqZWN0TmFtZV0sdGhpcy5vVUk1T0RhdGFNb2RlbEFubm90YXRhYmxlT2JqZWN0KTticmVha31yZXR1cm59LG1lcmdlVjJBbm5vdGF0aW9uTGV2ZWw6ZnVuY3Rpb24oTSxhLHUpe2Zvcih2YXIgaT0tMSxBO0E9YVsrK2ldOyl7Zm9yKHZhciBqPS0xLGI7Yj1NWysral07KXtpZighKEFbdS5rZXlQcm9wTmFtZV09PWJbdS5rZXlQcm9wTmFtZV0pKWNvbnRpbnVlO2lmKEFbImV4dGVuc2lvbnMiXSE9dW5kZWZpbmVkKXtpZihiWyJleHRlbnNpb25zIl09PXVuZGVmaW5lZCliWyJleHRlbnNpb25zIl09bmV3IEFycmF5KCk7Zm9yKHZhciBsPS0xLGM7Yz1BWyJleHRlbnNpb25zIl1bKytsXTspe3ZhciBmPWZhbHNlO2Zvcih2YXIgbT0tMSxkO2Q9YlsiZXh0ZW5zaW9ucyJdWysrbV07KXtpZihjLm5hbWU9PWQubmFtZSYmYy5uYW1lc3BhY2U9PWQubmFtZXNwYWNlKXtkLnZhbHVlPWMudmFsdWU7Zj10cnVlO2JyZWFrfX1pZighZiliWyJleHRlbnNpb25zIl0ucHVzaChjKX19Zm9yKHZhciBrPS0xLFU7VT11LmFTdWJPYmplY3RbKytrXTspe2Zvcih2YXIgcCBpbiBBKXtpZighKFUub2JqZWN0TmFtZT09cCkpY29udGludWU7aWYoIShBW1Uub2JqZWN0TmFtZV1pbnN0YW5jZW9mIEFycmF5KSljb250aW51ZTtpZigoYltVLm9iamVjdE5hbWVdPT11bmRlZmluZWQpfHwoIShiW1Uub2JqZWN0TmFtZV1pbnN0YW5jZW9mIEFycmF5KSkpY29udGludWU7dGhpcy5tZXJnZVYyQW5ub3RhdGlvbkxldmVsKGJbVS5vYmplY3ROYW1lXSxBW1Uub2JqZWN0TmFtZV0sVSk7YnJlYWt9fX19cmV0dXJufSxmaW5kUXVlcnlSZXN1bHRCeU5hbWU6ZnVuY3Rpb24obil7dmFyIFE9dGhpcy5fb1F1ZXJ5UmVzdWx0U2V0W25dO2lmKCFRJiZ0aGlzLl9vRGVmYXVsdEVudGl0eUNvbnRhaW5lcil7dmFyIHM9dGhpcy5fb0RlZmF1bHRFbnRpdHlDb250YWluZXIubmFtZSsiLiIrbjtRPXRoaXMuX29RdWVyeVJlc3VsdFNldFtzXX1yZXR1cm4gUX0sZ2V0QWxsUXVlcnlSZXN1bHROYW1lczpmdW5jdGlvbigpe2lmKHRoaXMuX2FRdWVyeVJlc3VsdE5hbWVzKXJldHVybiB0aGlzLl9hUXVlcnlSZXN1bHROYW1lczt0aGlzLl9hUXVlcnlSZXN1bHROYW1lcz1uZXcgQXJyYXkoMCk7Zm9yKHZhciBuIGluIHRoaXMuX29RdWVyeVJlc3VsdFNldCl0aGlzLl9hUXVlcnlSZXN1bHROYW1lcy5wdXNoKHRoaXMuX29RdWVyeVJlc3VsdFNldFtuXS5nZXROYW1lKCkpO3JldHVybiB0aGlzLl9hUXVlcnlSZXN1bHROYW1lc30sZ2V0QWxsUXVlcnlSZXN1bHRzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29RdWVyeVJlc3VsdFNldH0sZ2V0T0RhdGFNb2RlbDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vTW9kZWx9LF9nZXRFbnRpdHlTZXRzT2ZUeXBlOmZ1bmN0aW9uKHMsUSl7dmFyIGU9W107Zm9yKHZhciBpPS0xLEU7RT1zLmVudGl0eUNvbnRhaW5lclsrK2ldOyl7Zm9yKHZhciBqPS0xLGE7YT1FLmVudGl0eVNldFsrK2pdOyl7aWYoYS5lbnRpdHlUeXBlPT1RKWUucHVzaChbRSxhXSl9fXJldHVybiBlfSxfbVBhcmFtZXRlcjpudWxsLF9vTW9kZWw6bnVsbCxfb0RlZmF1bHRFbnRpdHlDb250YWluZXI6bnVsbCxfYVF1ZXJ5UmVzdWx0TmFtZXM6bnVsbCxfb1F1ZXJ5UmVzdWx0U2V0Om51bGwsX29QYXJhbWV0ZXJpemF0aW9uU2V0Om51bGwsX29FbnRpdHlUeXBlU2V0Om51bGwsX29FbnRpdHlTZXRTZXQ6bnVsbCxfb0VudGl0eVR5cGVOYW1lVG9FbnRpdHlTZXRNYXA6bnVsbCxfb0FjdGl2YXRlZFdvcmthcm91bmRzOm51bGx9O28uUXVlcnlSZXN1bHQ9ZnVuY3Rpb24obSxlLEUscCl7dGhpcy5faW5pdChtLGUsRSxwKX07by5RdWVyeVJlc3VsdC5wcm90b3R5cGU9e19pbml0OmZ1bmN0aW9uKG0sZSxFLHAsYSl7dGhpcy5fb01vZGVsPW07dGhpcy5fb0VudGl0eVR5cGU9ZTt0aGlzLl9vRW50aXR5U2V0PUU7dGhpcy5fb1BhcmFtZXRlcml6YXRpb249cDt0aGlzLl9vRGltZW5zaW9uU2V0PW5ldyBPYmplY3QoKTt0aGlzLl9vTWVhc3VyZVNldD1uZXcgT2JqZWN0KCk7dmFyIFA9ZS5nZXRUeXBlRGVzY3JpcHRpb24oKS5wcm9wZXJ0eTt2YXIgQT17fTtmb3IodmFyIGk9LTEsYjtiPVBbKytpXTspe2lmKGIuZXh0ZW5zaW9ucz09dW5kZWZpbmVkKWNvbnRpbnVlO2Zvcih2YXIgaj0tMSxjO2M9Yi5leHRlbnNpb25zWysral07KXtpZighYy5uYW1lc3BhY2U9PW8uY29uc3RhbnRzLlNBUF9OQU1FU1BBQ0UpY29udGludWU7c3dpdGNoKGMubmFtZSl7Y2FzZSJhZ2dyZWdhdGlvbi1yb2xlIjpzd2l0Y2goYy52YWx1ZSl7Y2FzZSJkaW1lbnNpb24iOnZhciBkPW5ldyBvLkRpbWVuc2lvbih0aGlzLGIpO3RoaXMuX29EaW1lbnNpb25TZXRbZC5nZXROYW1lKCldPWQ7YnJlYWs7Y2FzZSJtZWFzdXJlIjp2YXIgTT1uZXcgby5NZWFzdXJlKHRoaXMsYik7dGhpcy5fb01lYXN1cmVTZXRbTS5nZXROYW1lKCldPU07YnJlYWs7Y2FzZSJ0b3RhbGVkLXByb3BlcnRpZXMtbGlzdCI6dGhpcy5fb1RvdGFsZWRQcm9wZXJ0eUxpc3RQcm9wZXJ0eT1iO2JyZWFrfWJyZWFrO2Nhc2UiYXR0cmlidXRlLWZvciI6dmFyIEQ9bmV3IG8uRGltZW5zaW9uQXR0cmlidXRlKHRoaXMsYik7QVtELmdldEtleVByb3BlcnR5KCldPUQ7YnJlYWt9fX1mb3IodmFyIHMgaW4gQSl7dmFyIEQ9QVtzXTtELmdldERpbWVuc2lvbigpLmFkZEF0dHJpYnV0ZShEKX1pZihtLl9vQWN0aXZhdGVkV29ya2Fyb3VuZHMuSWRlbnRpZnlUZXh0UHJvcGVydGllc0J5TmFtZSl7dmFyIGY9bmV3IEFycmF5KCk7Zm9yKHZhciBnIGluIHRoaXMuX29EaW1lbnNpb25TZXQpe3ZhciBkPXRoaXMuX29EaW1lbnNpb25TZXRbZ107aWYoIWQuZ2V0VGV4dFByb3BlcnR5KCkpe3ZhciB0PW51bGw7dD1lLmZpbmRQcm9wZXJ0eUJ5TmFtZShnKyJOYW1lIik7aWYoIXQpdD1lLmZpbmRQcm9wZXJ0eUJ5TmFtZShnKyJUZXh0Iik7aWYoIXQpdD1lLmZpbmRQcm9wZXJ0eUJ5TmFtZShnKyJEZXNjIik7aWYoIXQpdD1lLmZpbmRQcm9wZXJ0eUJ5TmFtZShnKyJEZXNjcmlwdGlvbiIpO2lmKHQpe2Quc2V0VGV4dFByb3BlcnR5KHQpO2YucHVzaCh0Lm5hbWUpfX19Zm9yKHZhciBpPS0xLGg7aD1mWysraV07KXtkZWxldGUgdGhpcy5fb0RpbWVuc2lvblNldFtoXX19fSxnZXROYW1lOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0RW50aXR5U2V0KCkuZ2V0UU5hbWUoKX0sZ2V0UGFyYW1ldGVyaXphdGlvbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vUGFyYW1ldGVyaXphdGlvbn0sZ2V0QWxsRGltZW5zaW9uTmFtZXM6ZnVuY3Rpb24oKXtpZih0aGlzLl9hRGltZW5zaW9uTmFtZXMpcmV0dXJuIHRoaXMuX2FEaW1lbnNpb25OYW1lczt0aGlzLl9hRGltZW5zaW9uTmFtZXM9W107Zm9yKHZhciBuIGluIHRoaXMuX29EaW1lbnNpb25TZXQpdGhpcy5fYURpbWVuc2lvbk5hbWVzLnB1c2godGhpcy5fb0RpbWVuc2lvblNldFtuXS5nZXROYW1lKCkpO3JldHVybiB0aGlzLl9hRGltZW5zaW9uTmFtZXN9LGdldEFsbERpbWVuc2lvbnM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb0RpbWVuc2lvblNldH0sZ2V0QWxsTWVhc3VyZU5hbWVzOmZ1bmN0aW9uKCl7aWYodGhpcy5fYU1lYXN1cmVOYW1lcylyZXR1cm4gdGhpcy5fYU1lYXN1cmVOYW1lczt0aGlzLl9hTWVhc3VyZU5hbWVzPVtdO2Zvcih2YXIgbiBpbiB0aGlzLl9vTWVhc3VyZVNldCl0aGlzLl9hTWVhc3VyZU5hbWVzLnB1c2godGhpcy5fb01lYXN1cmVTZXRbbl0uZ2V0TmFtZSgpKTtyZXR1cm4gdGhpcy5fYU1lYXN1cmVOYW1lc30sZ2V0QWxsTWVhc3VyZXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb01lYXN1cmVTZXR9LGZpbmREaW1lbnNpb25CeU5hbWU6ZnVuY3Rpb24obil7cmV0dXJuIHRoaXMuX29EaW1lbnNpb25TZXRbbl19LGZpbmREaW1lbnNpb25CeVByb3BlcnR5TmFtZTpmdW5jdGlvbihuKXtpZih0aGlzLl9vRGltZW5zaW9uU2V0W25dKXJldHVybiB0aGlzLl9vRGltZW5zaW9uU2V0W25dO2Zvcih2YXIgZCBpbiB0aGlzLl9vRGltZW5zaW9uU2V0KXt2YXIgRD10aGlzLl9vRGltZW5zaW9uU2V0W2RdO3ZhciB0PUQuZ2V0VGV4dFByb3BlcnR5KCk7aWYodCYmdC5uYW1lPT1uKXJldHVybiBEO2lmKEQuZmluZEF0dHJpYnV0ZUJ5TmFtZShuKSlyZXR1cm4gRH1yZXR1cm4gbnVsbH0sZ2V0VG90YWxlZFByb3BlcnRpZXNMaXN0UHJvcGVydHk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb1RvdGFsZWRQcm9wZXJ0eUxpc3RQcm9wZXJ0eX0sZmluZE1lYXN1cmVCeU5hbWU6ZnVuY3Rpb24obil7cmV0dXJuIHRoaXMuX29NZWFzdXJlU2V0W25dfSxmaW5kTWVhc3VyZUJ5UHJvcGVydHlOYW1lOmZ1bmN0aW9uKG4pe2lmKHRoaXMuX29NZWFzdXJlU2V0W25dKXJldHVybiB0aGlzLl9vTWVhc3VyZVNldFtuXTtmb3IodmFyIG0gaW4gdGhpcy5fb01lYXN1cmVTZXQpe3ZhciBNPXRoaXMuX29NZWFzdXJlU2V0W21dO3ZhciBmPU0uZ2V0Rm9ybWF0dGVkVmFsdWVQcm9wZXJ0eSgpO2lmKGYmJmYubmFtZT09bilyZXR1cm4gTX1yZXR1cm4gbnVsbH0sZ2V0TW9kZWw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb01vZGVsfSxnZXRFbnRpdHlUeXBlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29FbnRpdHlUeXBlfSxnZXRFbnRpdHlTZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb0VudGl0eVNldH0sX29Nb2RlbDpudWxsLF9vRW50aXR5VHlwZTpudWxsLF9vRW50aXR5U2V0Om51bGwsX29QYXJhbWV0ZXJpemF0aW9uOm51bGwsX2FEaW1lbnNpb25OYW1lczpudWxsLF9vRGltZW5zaW9uU2V0Om51bGwsX2FNZWFzdXJlTmFtZXM6bnVsbCxfb01lYXN1cmVTZXQ6bnVsbCxfb1RvdGFsZWRQcm9wZXJ0eUxpc3RQcm9wZXJ0eTpudWxsfTtvLlBhcmFtZXRlcml6YXRpb249ZnVuY3Rpb24oZSxFKXt0aGlzLl9pbml0KGUsRSl9O28uUGFyYW1ldGVyaXphdGlvbi5wcm90b3R5cGU9e19pbml0OmZ1bmN0aW9uKGUsRSl7dGhpcy5fb0VudGl0eVR5cGU9ZTt0aGlzLl9vRW50aXR5U2V0PUU7dGhpcy5fb1BhcmFtZXRlclNldD1uZXcgT2JqZWN0KCk7dmFyIHA9ZS5nZXRUeXBlRGVzY3JpcHRpb24oKS5wcm9wZXJ0eTtmb3IodmFyIGk9LTEsUDtQPXBbKytpXTspe2lmKFAuZXh0ZW5zaW9ucz09dW5kZWZpbmVkKWNvbnRpbnVlO2Zvcih2YXIgaj0tMSxhO2E9UC5leHRlbnNpb25zWysral07KXtpZighYS5uYW1lc3BhY2U9PW8uY29uc3RhbnRzLlNBUF9OQU1FU1BBQ0UpY29udGludWU7c3dpdGNoKGEubmFtZSl7Y2FzZSJwYXJhbWV0ZXIiOnZhciBiPW5ldyBvLlBhcmFtZXRlcih0aGlzLFApO3RoaXMuX29QYXJhbWV0ZXJTZXRbYi5nZXROYW1lKCldPWI7YnJlYWt9fX19LHNldFRhcmdldFF1ZXJ5UmVzdWx0OmZ1bmN0aW9uKFEsYSl7dGhpcy5fb1F1ZXJ5UmVzdWx0PVE7dmFyIHM9dGhpcy5fb0VudGl0eVR5cGUuZ2V0U2NoZW1hKCkubmFtZXNwYWNlKyIuIithLm5hbWU7dmFyIG49dGhpcy5fb0VudGl0eVR5cGUuZ2V0VHlwZURlc2NyaXB0aW9uKCkubmF2aWdhdGlvblByb3BlcnR5O2lmKCFuKXRocm93IkludmFsaWQgY29uc3VtcHRpb24gbW9kZWw6IFBhcmFtZXRlcnMgZW50aXR5IHR5cGUgbGFja3MgbmF2aWdhdGlvbiBwcm9wZXJ0eSBmb3IgYXNzb2NpYXRpb24gdG8gcXVlcnkgcmVzdWx0IGVudGl0eSB0eXBlIjtmb3IodmFyIGk9LTEsTjtOPW5bKytpXTspe2lmKE4ucmVsYXRpb25zaGlwPT1zKXRoaXMuX29OYXZQcm9wVG9RdWVyeVJlc3VsdD1OLm5hbWV9aWYoIXRoaXMuX29OYXZQcm9wVG9RdWVyeVJlc3VsdCl0aHJvdyJJbnZhbGlkIGNvbnN1bXB0aW9uIG1vZGVsOiBQYXJhbWV0ZXJzIGVudGl0eSB0eXBlIGxhY2tzIG5hdmlnYXRpb24gcHJvcGVydHkgZm9yIGFzc29jaWF0aW9uIHRvIHF1ZXJ5IHJlc3VsdCBlbnRpdHkgdHlwZSJ9LGdldFRhcmdldFF1ZXJ5UmVzdWx0OmZ1bmN0aW9uKCl7aWYoIXRoaXMuX29RdWVyeVJlc3VsdCl0aHJvdyJObyB0YXJnZXQgcXVlcnkgcmVzdWx0IHNldCI7cmV0dXJuIHRoaXMuX29RdWVyeVJlc3VsdH0sZ2V0TmFtZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldEVudGl0eVNldCgpLmdldFFOYW1lKCl9LGdldEFsbFBhcmFtZXRlck5hbWVzOmZ1bmN0aW9uKCl7aWYodGhpcy5fYVBhcmFtZXRlck5hbWVzKXJldHVybiB0aGlzLl9hUGFyYW1ldGVyTmFtZXM7dGhpcy5fYVBhcmFtZXRlck5hbWVzPVtdO2Zvcih2YXIgbiBpbiB0aGlzLl9vUGFyYW1ldGVyU2V0KXRoaXMuX2FQYXJhbWV0ZXJOYW1lcy5wdXNoKHRoaXMuX29QYXJhbWV0ZXJTZXRbbl0uZ2V0TmFtZSgpKTtyZXR1cm4gdGhpcy5fYVBhcmFtZXRlck5hbWVzfSxnZXRBbGxQYXJhbWV0ZXJzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29QYXJhbWV0ZXJTZXR9LGZpbmRQYXJhbWV0ZXJCeU5hbWU6ZnVuY3Rpb24obil7cmV0dXJuIHRoaXMuX29QYXJhbWV0ZXJTZXRbbl19LGdldE5hdmlnYXRpb25Qcm9wZXJ0eVRvUXVlcnlSZXN1bHQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb05hdlByb3BUb1F1ZXJ5UmVzdWx0fSxnZXRFbnRpdHlUeXBlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29FbnRpdHlUeXBlfSxnZXRFbnRpdHlTZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb0VudGl0eVNldH0sX29FbnRpdHlUeXBlOm51bGwsX29FbnRpdHlTZXQ6bnVsbCxfb1F1ZXJ5UmVzdWx0Om51bGwsX29OYXZQcm9wVG9RdWVyeVJlc3VsdDpudWxsLF9hUGFyYW1ldGVyTmFtZXM6bnVsbCxfb1BhcmFtZXRlclNldDpudWxsfTtvLlBhcmFtZXRlcj1mdW5jdGlvbihwLFApe3RoaXMuX2luaXQocCxQKX07by5QYXJhbWV0ZXIucHJvdG90eXBlPXtfaW5pdDpmdW5jdGlvbihwLFApe3RoaXMuX29QYXJhbWV0ZXJpemF0aW9uPXA7dGhpcy5fb1Byb3BlcnR5PVA7dmFyIGU9cC5nZXRFbnRpdHlUeXBlKCk7aWYoUC5leHRlbnNpb25zIT11bmRlZmluZWQpe2Zvcih2YXIgaT0tMSxFO0U9UC5leHRlbnNpb25zWysraV07KXtpZighRS5uYW1lc3BhY2U9PW8uY29uc3RhbnRzLlNBUF9OQU1FU1BBQ0UpY29udGludWU7c3dpdGNoKEUubmFtZSl7Y2FzZSJwYXJhbWV0ZXIiOnN3aXRjaChFLnZhbHVlKXtjYXNlIm1hbmRhdG9yeSI6dGhpcy5fYlJlcXVpcmVkPXRydWU7YnJlYWs7Y2FzZSJvcHRpb25hbCI6dGhpcy5fYlJlcXVpcmVkPWZhbHNlO2JyZWFrO2RlZmF1bHQ6dGhyb3ciSW52YWxpZCBhbm5vdGF0aW9uIHZhbHVlIGZvciBwYXJhbWV0ZXIgcHJvcGVydHkifWJyZWFrO2Nhc2UibGFiZWwiOnRoaXMuX3NMYWJlbFRleHQ9RS52YWx1ZTticmVhaztjYXNlInRleHQiOnRoaXMuX29UZXh0UHJvcGVydHk9ZS5maW5kUHJvcGVydHlCeU5hbWUoRS52YWx1ZSk7YnJlYWs7Y2FzZSJ1cHBlci1ib3VuZGFyeSI6dGhpcy5fYkludGVydmFsQm91bmRhcnlQYXJhbWV0ZXI9dHJ1ZTt0aGlzLl9vVXBwZXJJbnRlcnZhbEJvdW5kYXJ5UGFyYW1ldGVyUHJvcGVydHk9ZS5maW5kUHJvcGVydHlCeU5hbWUoRS52YWx1ZSk7YnJlYWs7Y2FzZSJsb3dlci1ib3VuZGFyeSI6dGhpcy5fYkludGVydmFsQm91bmRhcnlQYXJhbWV0ZXI9dHJ1ZTt0aGlzLl9vTG93ZXJJbnRlcnZhbEJvdW5kYXJ5UGFyYW1ldGVyUHJvcGVydHk9ZS5maW5kUHJvcGVydHlCeU5hbWUoRS52YWx1ZSk7YnJlYWt9fX1pZighdGhpcy5fc0xhYmVsVGV4dCl0aGlzLl9zTGFiZWxUZXh0PSIifSxzZXRWYWx1ZVNldEVudGl0eTpmdW5jdGlvbihlLEUpe3RoaXMuX29WYWx1ZVNldEVudGl0eVR5cGU9ZTt0aGlzLl9vVmFsdWVTZXRFbnRpdHlTZXQ9RX0sZ2V0VGV4dFByb3BlcnR5OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29UZXh0UHJvcGVydHl9LGdldExhYmVsVGV4dDpmdW5jdGlvbigpe2lmKCF0aGlzLl9zTGFiZWxUZXh0JiZ0aGlzLl9vUGFyYW1ldGVyaXphdGlvbi5fb1F1ZXJ5UmVzdWx0Ll9vTW9kZWwuX29BY3RpdmF0ZWRXb3JrYXJvdW5kcy5DcmVhdGVMYWJlbHNGcm9tVGVjaG5pY2FsTmFtZXMpdGhpcy5fc0xhYmVsVGV4dD1vLmhlbHBlci50b2tlbml6ZU5hbWV0b0xhYmVsVGV4dCh0aGlzLmdldE5hbWUoKSk7cmV0dXJuIHRoaXMuX3NMYWJlbFRleHR9LGlzT3B0aW9uYWw6ZnVuY3Rpb24oKXtyZXR1cm4oIXRoaXMuX2JSZXF1aXJlZCl9LGlzSW50ZXJ2YWxCb3VuZGFyeTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9iSW50ZXJ2YWxCb3VuZGFyeVBhcmFtZXRlcn0saXNMb3dlckludGVydmFsQm91bmRhcnk6ZnVuY3Rpb24oKXtyZXR1cm4odGhpcy5fb1VwcGVySW50ZXJ2YWxCb3VuZGFyeVBhcmFtZXRlclByb3BlcnR5P3RydWU6ZmFsc2UpfSxnZXRQZWVySW50ZXJ2YWxCb3VuZGFyeVBhcmFtZXRlcjpmdW5jdGlvbigpe3ZhciBwPW51bGw7aWYodGhpcy5fb0xvd2VySW50ZXJ2YWxCb3VuZGFyeVBhcmFtZXRlclByb3BlcnR5KXA9dGhpcy5fb0xvd2VySW50ZXJ2YWxCb3VuZGFyeVBhcmFtZXRlclByb3BlcnR5Lm5hbWU7ZWxzZSBwPXRoaXMuX29VcHBlckludGVydmFsQm91bmRhcnlQYXJhbWV0ZXJQcm9wZXJ0eS5uYW1lO2lmKCFwKXRocm93IlBhcmFtZXRlciBpcyBub3QgYW4gaW50ZXJ2YWwgYm91bmRhcnkiO3JldHVybiB0aGlzLl9vUGFyYW1ldGVyaXphdGlvbi5maW5kUGFyYW1ldGVyQnlOYW1lKHApfSxpc1ZhbHVlU2V0QXZhaWxhYmxlOmZ1bmN0aW9uKCl7cmV0dXJuKHRoaXMuX29WYWx1ZVNldEVudGl0eVR5cGU/dHJ1ZTpmYWxzZSl9LGdldE5hbWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb1Byb3BlcnR5Lm5hbWV9LGdldFByb3BlcnR5OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29Qcm9wZXJ0eX0sZ2V0Q29udGFpbmluZ1BhcmFtZXRlcml6YXRpb246ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb1BhcmFtZXRlcml6YXRpb259LGdldFVSSVRvVmFsdWVFbnRpdHlTZXQ6ZnVuY3Rpb24ocyl7dmFyIHU9bnVsbDt1PShzP3M6IiIpKyIvIit0aGlzLl9vVmFsdWVTZXRFbnRpdHlTZXQuZ2V0UU5hbWUoKTtyZXR1cm4gdX0sX29QYXJhbWV0ZXJpemF0aW9uOm51bGwsX29Qcm9wZXJ0eTpudWxsLF9zTGFiZWxUZXh0Om51bGwsX29UZXh0UHJvcGVydHk6bnVsbCxfYlJlcXVpcmVkOmZhbHNlLF9iSW50ZXJ2YWxCb3VuZGFyeVBhcmFtZXRlcjpmYWxzZSxfb0xvd2VySW50ZXJ2YWxCb3VuZGFyeVBhcmFtZXRlclByb3BlcnR5Om51bGwsX29VcHBlckludGVydmFsQm91bmRhcnlQYXJhbWV0ZXJQcm9wZXJ0eTpudWxsLF9vVmFsdWVTZXRFbnRpdHlUeXBlOm51bGwsX29WYWx1ZVNldEVudGl0eVNldDpudWxsfTtvLkRpbWVuc2lvbj1mdW5jdGlvbihRLHApe3RoaXMuX2luaXQoUSxwKX07by5EaW1lbnNpb24ucHJvdG90eXBlPXtfaW5pdDpmdW5jdGlvbihRLHApe3RoaXMuX29RdWVyeVJlc3VsdD1RO3RoaXMuX29Qcm9wZXJ0eT1wO3RoaXMuX29BdHRyaWJ1dGVTZXQ9bmV3IE9iamVjdCgpfSxzZXRNZW1iZXJzRW50aXR5U2V0OmZ1bmN0aW9uKGUpe3RoaXMuX29NZW1iZXJzRW50aXR5U2V0PWV9LGdldE5hbWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb1Byb3BlcnR5Lm5hbWV9LGdldEtleVByb3BlcnR5OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29Qcm9wZXJ0eX0sZ2V0VGV4dFByb3BlcnR5OmZ1bmN0aW9uKCl7aWYoIXRoaXMuX29UZXh0UHJvcGVydHkpdGhpcy5fb1RleHRQcm9wZXJ0eT10aGlzLl9vUXVlcnlSZXN1bHQuZ2V0RW50aXR5VHlwZSgpLmdldFRleHRQcm9wZXJ0eU9mUHJvcGVydHkodGhpcy5nZXROYW1lKCkpO3JldHVybiB0aGlzLl9vVGV4dFByb3BlcnR5fSxzZXRUZXh0UHJvcGVydHk6ZnVuY3Rpb24odCl7dGhpcy5fb1RleHRQcm9wZXJ0eT10fSxnZXRMYWJlbFRleHQ6ZnVuY3Rpb24oKXtpZighdGhpcy5fc0xhYmVsVGV4dCl0aGlzLl9zTGFiZWxUZXh0PXRoaXMuX29RdWVyeVJlc3VsdC5nZXRFbnRpdHlUeXBlKCkuZ2V0TGFiZWxPZlByb3BlcnR5KHRoaXMuZ2V0TmFtZSgpKTtpZighdGhpcy5fc0xhYmVsVGV4dCYmdGhpcy5fb1F1ZXJ5UmVzdWx0Ll9vTW9kZWwuX29BY3RpdmF0ZWRXb3JrYXJvdW5kcy5DcmVhdGVMYWJlbHNGcm9tVGVjaG5pY2FsTmFtZXMpdGhpcy5fc0xhYmVsVGV4dD1vLmhlbHBlci50b2tlbml6ZU5hbWV0b0xhYmVsVGV4dCh0aGlzLmdldE5hbWUoKSk7cmV0dXJuKHRoaXMuX3NMYWJlbFRleHQ9PW51bGw/IiI6dGhpcy5fc0xhYmVsVGV4dCl9LGdldFN1cGVyT3JkaW5hdGVEaW1lbnNpb246ZnVuY3Rpb24oKXtpZighdGhpcy5fc1N1cGVyT3JkaW5hdGVEaW1lbnNpb24pe3ZhciBzPXRoaXMuX29RdWVyeVJlc3VsdC5nZXRFbnRpdHlUeXBlKCkuZ2V0U3VwZXJPcmRpbmF0ZVByb3BlcnR5T2ZQcm9wZXJ0eSh0aGlzLmdldE5hbWUoKSkubmFtZTt0aGlzLl9zU3VwZXJPcmRpbmF0ZURpbWVuc2lvbj10aGlzLl9vUXVlcnlSZXN1bHQuZmluZERpbWVuc2lvbkJ5TmFtZShzKX1yZXR1cm4gdGhpcy5fc1N1cGVyT3JkaW5hdGVEaW1lbnNpb259LGdldEhpZXJhcmNoeTpmdW5jdGlvbigpe2lmKCF0aGlzLl9vSGllcmFyY2h5KXRoaXMuX29IaWVyYXJjaHk9dGhpcy5fb1F1ZXJ5UmVzdWx0LmdldEVudGl0eVR5cGUoKS5nZXRIaWVyYXJjaHkodGhpcy5fb1Byb3BlcnR5Lm5hbWUpO3JldHVybiB0aGlzLl9vSGllcmFyY2h5fSxnZXRBbGxBdHRyaWJ1dGVOYW1lczpmdW5jdGlvbigpe2lmKHRoaXMuX2FBdHRyaWJ1dGVOYW1lcylyZXR1cm4gdGhpcy5fYUF0dHJpYnV0ZU5hbWVzO3RoaXMuX2FBdHRyaWJ1dGVOYW1lcz1bXTtmb3IodmFyIG4gaW4gdGhpcy5fb0F0dHJpYnV0ZVNldCl0aGlzLl9hQXR0cmlidXRlTmFtZXMucHVzaCh0aGlzLl9vQXR0cmlidXRlU2V0W25dLmdldE5hbWUoKSk7cmV0dXJuIHRoaXMuX2FBdHRyaWJ1dGVOYW1lc30sZ2V0QWxsQXR0cmlidXRlczpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vQXR0cmlidXRlU2V0fSxmaW5kQXR0cmlidXRlQnlOYW1lOmZ1bmN0aW9uKG4pe3JldHVybiB0aGlzLl9vQXR0cmlidXRlU2V0W25dfSxhZGRBdHRyaWJ1dGU6ZnVuY3Rpb24oZCl7dGhpcy5fb0F0dHJpYnV0ZVNldFtkLmdldE5hbWUoKV09ZH0sZ2V0Q29udGFpbmluZ1F1ZXJ5UmVzdWx0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29RdWVyeVJlc3VsdH0saGFzTWFzdGVyRGF0YTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vTWVtYmVyc0VudGl0eVNldCE9bnVsbD90cnVlOmZhbHNlfSxnZXRNYXN0ZXJEYXRhRW50aXR5U2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29NZW1iZXJzRW50aXR5U2V0fSxfb1F1ZXJ5UmVzdWx0Om51bGwsX29Qcm9wZXJ0eTpudWxsLF9vVGV4dFByb3BlcnR5Om51bGwsX3NMYWJlbFRleHQ6bnVsbCxfc1N1cGVyT3JkaW5hdGVEaW1lbnNpb246bnVsbCxfYUF0dHJpYnV0ZU5hbWVzOm51bGwsX29BdHRyaWJ1dGVTZXQ6bnVsbCxfb01lbWJlcnNFbnRpdHlTZXQ6bnVsbCxfb0hpZXJhcmNoeTpudWxsfTtvLkRpbWVuc2lvbkF0dHJpYnV0ZT1mdW5jdGlvbihRLHApe3RoaXMuX2luaXQoUSxwKX07by5EaW1lbnNpb25BdHRyaWJ1dGUucHJvdG90eXBlPXtfaW5pdDpmdW5jdGlvbihRLHApe3RoaXMuX29RdWVyeVJlc3VsdD1RO3RoaXMuX29Qcm9wZXJ0eT1wO2lmKHAuZXh0ZW5zaW9ucyE9dW5kZWZpbmVkKXtmb3IodmFyIGk9LTEsZTtlPXAuZXh0ZW5zaW9uc1srK2ldOyl7aWYoIWUubmFtZXNwYWNlPT1vLmNvbnN0YW50cy5TQVBfTkFNRVNQQUNFKWNvbnRpbnVlO3N3aXRjaChlLm5hbWUpe2Nhc2UiYXR0cmlidXRlLWZvciI6dGhpcy5fc0RpbWVuc2lvbk5hbWU9ZS52YWx1ZTticmVhaztjYXNlImxhYmVsIjp0aGlzLl9zTGFiZWxUZXh0PWUudmFsdWU7YnJlYWs7Y2FzZSJ0ZXh0Ijp0aGlzLl9vVGV4dFByb3BlcnR5PVEuZ2V0RW50aXR5VHlwZSgpLmZpbmRQcm9wZXJ0eUJ5TmFtZShlLnZhbHVlKTticmVha319fX0sZ2V0TmFtZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vUHJvcGVydHkubmFtZX0sZ2V0S2V5UHJvcGVydHk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb1Byb3BlcnR5fSxnZXRUZXh0UHJvcGVydHk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb1RleHRQcm9wZXJ0eX0sZ2V0TGFiZWxUZXh0OmZ1bmN0aW9uKCl7aWYoIXRoaXMuX3NMYWJlbFRleHQmJnRoaXMuX29RdWVyeVJlc3VsdC5fb01vZGVsLl9vQWN0aXZhdGVkV29ya2Fyb3VuZHMuQ3JlYXRlTGFiZWxzRnJvbVRlY2huaWNhbE5hbWVzKXRoaXMuX3NMYWJlbFRleHQ9by5oZWxwZXIudG9rZW5pemVOYW1ldG9MYWJlbFRleHQodGhpcy5nZXROYW1lKCkpO3JldHVybiB0aGlzLl9zTGFiZWxUZXh0fSxnZXREaW1lbnNpb246ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb1F1ZXJ5UmVzdWx0LmZpbmREaW1lbnNpb25CeU5hbWUodGhpcy5fc0RpbWVuc2lvbk5hbWUpfSxfb1F1ZXJ5UmVzdWx0Om51bGwsX29Qcm9wZXJ0eTpudWxsLF9vVGV4dFByb3BlcnR5Om51bGwsX3NMYWJlbFRleHQ6bnVsbCxfc0RpbWVuc2lvbk5hbWU6bnVsbH07by5NZWFzdXJlPWZ1bmN0aW9uKFEscCl7dGhpcy5faW5pdChRLHApfTtvLk1lYXN1cmUucHJvdG90eXBlPXtfaW5pdDpmdW5jdGlvbihRLHApe3RoaXMuX29RdWVyeVJlc3VsdD1RO3RoaXMuX29Qcm9wZXJ0eT1wO2lmKHAuZXh0ZW5zaW9ucyE9dW5kZWZpbmVkKXtmb3IodmFyIGk9LTEsZTtlPXAuZXh0ZW5zaW9uc1srK2ldOyl7aWYoIWUubmFtZXNwYWNlPT1vLmNvbnN0YW50cy5TQVBfTkFNRVNQQUNFKWNvbnRpbnVlO3N3aXRjaChlLm5hbWUpe2Nhc2UibGFiZWwiOnRoaXMuX3NMYWJlbFRleHQ9ZS52YWx1ZTticmVhaztjYXNlInRleHQiOnRoaXMuX29UZXh0UHJvcGVydHk9US5nZXRFbnRpdHlUeXBlKCkuZmluZFByb3BlcnR5QnlOYW1lKGUudmFsdWUpO2JyZWFrO2Nhc2UidW5pdCI6dGhpcy5fb1VuaXRQcm9wZXJ0eT1RLmdldEVudGl0eVR5cGUoKS5maW5kUHJvcGVydHlCeU5hbWUoZS52YWx1ZSk7YnJlYWt9fX1pZighdGhpcy5fc0xhYmVsVGV4dCl0aGlzLl9zTGFiZWxUZXh0PSIifSxnZXROYW1lOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29Qcm9wZXJ0eS5uYW1lfSxnZXRSYXdWYWx1ZVByb3BlcnR5OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29Qcm9wZXJ0eX0sZ2V0Rm9ybWF0dGVkVmFsdWVQcm9wZXJ0eTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vVGV4dFByb3BlcnR5fSxnZXRVbml0UHJvcGVydHk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb1VuaXRQcm9wZXJ0eX0sZ2V0TGFiZWxUZXh0OmZ1bmN0aW9uKCl7aWYoIXRoaXMuX3NMYWJlbFRleHQmJnRoaXMuX29RdWVyeVJlc3VsdC5fb01vZGVsLl9vQWN0aXZhdGVkV29ya2Fyb3VuZHMuQ3JlYXRlTGFiZWxzRnJvbVRlY2huaWNhbE5hbWVzKXRoaXMuX3NMYWJlbFRleHQ9by5oZWxwZXIudG9rZW5pemVOYW1ldG9MYWJlbFRleHQodGhpcy5nZXROYW1lKCkpO3JldHVybiB0aGlzLl9zTGFiZWxUZXh0fSxpc1VwZGF0YWJsZTpmdW5jdGlvbigpe2lmKHRoaXMuX2JJc1VwZGF0YWJsZSE9bnVsbClyZXR1cm4gdGhpcy5fYklzVXBkYXRhYmxlO3ZhciB1PXRoaXMuX29RdWVyeVJlc3VsdC5nZXRFbnRpdHlTZXQoKS5nZXRVcGRhdGFibGVQcm9wZXJ0eU5hbWVTZXQoKTtyZXR1cm4odVt0aGlzLmdldE5hbWUoKV0hPXVuZGVmaW5lZCl9LF9vUXVlcnlSZXN1bHQ6bnVsbCxfb1Byb3BlcnR5Om51bGwsX29UZXh0UHJvcGVydHk6bnVsbCxfc0xhYmVsVGV4dDpudWxsLF9vVW5pdFByb3BlcnR5Om51bGwsX2JJc1VwZGF0YWJsZTpudWxsfTtvLkVudGl0eVNldD1mdW5jdGlvbihtLHMsYyxlLEUpe3RoaXMuX2luaXQobSxzLGMsZSxFKX07by5FbnRpdHlTZXQucHJvdG90eXBlPXtfaW5pdDpmdW5jdGlvbihtLHMsYyxlLEUpe3RoaXMuX29FbnRpdHlUeXBlPUU7dGhpcy5fb0VudGl0eVNldD1lO3RoaXMuX29Db250YWluZXI9Yzt0aGlzLl9vU2NoZW1hPXM7dGhpcy5fb01vZGVsPW07aWYocy5lbnRpdHlDb250YWluZXIubGVuZ3RoPjEpdGhpcy5fc1FOYW1lPWMubmFtZSsiLiIrZS5uYW1lO2Vsc2UgdGhpcy5fc1FOYW1lPWUubmFtZX0sZ2V0UU5hbWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc1FOYW1lfSxnZXRTZXREZXNjcmlwdGlvbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vRW50aXR5U2V0fSxnZXRFbnRpdHlUeXBlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29FbnRpdHlUeXBlfSxnZXRTY2hlbWE6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb1NjaGVtYX0sZ2V0TW9kZWw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb01vZGVsfSxnZXRVcGRhdGFibGVQcm9wZXJ0eU5hbWVTZXQ6ZnVuY3Rpb24oKXtpZih0aGlzLl9vVXBkYXRhYmxlUHJvcGVydHlOYW1lcylyZXR1cm4gdGhpcy5fb1VwZGF0YWJsZVByb3BlcnR5TmFtZXM7dGhpcy5fb1VwZGF0YWJsZVByb3BlcnR5TmFtZXM9bmV3IE9iamVjdCgpO3ZhciBzPXRydWU7aWYodGhpcy5fb0VudGl0eVNldC5leHRlbnNpb25zIT11bmRlZmluZWQpe2Zvcih2YXIgaj0tMSxlO2U9dGhpcy5fb0VudGl0eVNldC5leHRlbnNpb25zWysral07KXtpZihlLm5hbWVzcGFjZT09by5jb25zdGFudHMuU0FQX05BTUVTUEFDRSYmZS5uYW1lPT0idXBkYXRhYmxlIil7aWYoZS52YWx1ZT09ImZhbHNlIil7cz1mYWxzZTticmVha319fX1pZighcyl7cmV0dXJuIHRoaXMuX29VcGRhdGFibGVQcm9wZXJ0eU5hbWVzfXZhciBwPXRoaXMuX29FbnRpdHlUeXBlLmdldFR5cGVEZXNjcmlwdGlvbigpLnByb3BlcnR5O2Zvcih2YXIgaT0tMSxQO1A9cFsrK2ldOyl7dmFyIGI9dHJ1ZTtpZihQLmV4dGVuc2lvbnM9PXVuZGVmaW5lZCljb250aW51ZTtmb3IodmFyIGo9LTEsZTtlPVAuZXh0ZW5zaW9uc1srK2pdOyl7aWYoZS5uYW1lc3BhY2UhPW8uY29uc3RhbnRzLlNBUF9OQU1FU1BBQ0UpY29udGludWU7aWYoZS5uYW1lPT0idXBkYXRhYmxlIil7aWYoZS52YWx1ZT09ImZhbHNlIil7Yj1mYWxzZTticmVha319fWlmKGIpdGhpcy5fb1VwZGF0YWJsZVByb3BlcnR5TmFtZXNbUC5uYW1lXT10cnVlfXJldHVybiB0aGlzLl9vVXBkYXRhYmxlUHJvcGVydHlOYW1lc30sX29FbnRpdHlUeXBlOm51bGwsX29FbnRpdHlTZXQ6bnVsbCxfb0NvbnRhaW5lcjpudWxsLF9vU2NoZW1hOm51bGwsX29Nb2RlbDpudWxsLF9zUU5hbWU6bnVsbCxfb1VwZGF0YWJsZVByb3BlcnR5TmFtZXM6bnVsbH07by5FbnRpdHlUeXBlPWZ1bmN0aW9uKG0scyxlKXt0aGlzLl9pbml0KG0scyxlKX07by5FbnRpdHlUeXBlLnByb3BlcnR5RmlsdGVyUmVzdHJpY3Rpb249e1NJTkdMRV9WQUxVRToic2luZ2xlLXZhbHVlIixNVUxUSV9WQUxVRToibXVsdGktdmFsdWUiLElOVEVSVkFMOiJpbnRlcnZhbCJ9O28uRW50aXR5VHlwZS5wcm90b3R5cGU9e19pbml0OmZ1bmN0aW9uKG0scyxlKXt0aGlzLl9vRW50aXR5VHlwZT1lO3RoaXMuX29TY2hlbWE9czt0aGlzLl9vTW9kZWw9bTt0aGlzLl9hS2V5UHJvcGVydGllcz1bXTt0aGlzLl9vUHJvcGVydHlTZXQ9bmV3IE9iamVjdCgpO3RoaXMuX2FGaWx0ZXJhYmxlUHJvcGVydHlOYW1lcz1bXTt0aGlzLl9hU29ydGFibGVQcm9wZXJ0eU5hbWVzPVtdO3RoaXMuX2FSZXF1aXJlZEZpbHRlclByb3BlcnR5TmFtZXM9W107dGhpcy5fb1Byb3BlcnR5RmlsdGVyUmVzdHJpY3Rpb25TZXQ9bmV3IE9iamVjdCgpO3RoaXMuX29Qcm9wZXJ0eUhlYWRpbmdzU2V0PXt9O3RoaXMuX29Qcm9wZXJ0eVF1aWNrSW5mb3NTZXQ9e307dGhpcy5fc1FOYW1lPXMubmFtZXNwYWNlKyIuIitlLm5hbWU7dmFyIHI9e307dmFyIFI9bnVsbDtmb3IodmFyIGk9LTEscDtwPWUua2V5LnByb3BlcnR5UmVmWysraV07KXt0aGlzLl9hS2V5UHJvcGVydGllcy5wdXNoKHAubmFtZSl9Zm9yKHZhciBpPS0xLFA7UD1lLnByb3BlcnR5WysraV07KXt0aGlzLl9vUHJvcGVydHlTZXRbUC5uYW1lXT1QO3RoaXMuX2FGaWx0ZXJhYmxlUHJvcGVydHlOYW1lcy5wdXNoKFAubmFtZSk7dGhpcy5fYVNvcnRhYmxlUHJvcGVydHlOYW1lcy5wdXNoKFAubmFtZSk7aWYoUC5leHRlbnNpb25zPT11bmRlZmluZWQpY29udGludWU7Zm9yKHZhciBqPS0xLEU7RT1QLmV4dGVuc2lvbnNbKytqXTspe2lmKCFFLm5hbWVzcGFjZT09by5jb25zdGFudHMuU0FQX05BTUVTUEFDRSljb250aW51ZTtzd2l0Y2goRS5uYW1lKXtjYXNlImZpbHRlcmFibGUiOmlmKEUudmFsdWU9PSJmYWxzZSIpdGhpcy5fYUZpbHRlcmFibGVQcm9wZXJ0eU5hbWVzLnBvcChQLm5hbWUpO2JyZWFrO2Nhc2Uic29ydGFibGUiOmlmKEUudmFsdWU9PSJmYWxzZSIpdGhpcy5fYVNvcnRhYmxlUHJvcGVydHlOYW1lcy5wb3AoUC5uYW1lKTticmVhaztjYXNlInJlcXVpcmVkLWluLWZpbHRlciI6aWYoRS52YWx1ZT09InRydWUiKXRoaXMuX2FSZXF1aXJlZEZpbHRlclByb3BlcnR5TmFtZXMucHVzaChQLm5hbWUpO2JyZWFrO2Nhc2UiZmlsdGVyLXJlc3RyaWN0aW9uIjppZihFLnZhbHVlPT1vLkVudGl0eVR5cGUucHJvcGVydHlGaWx0ZXJSZXN0cmljdGlvbi5TSU5HTEVfVkFMVUV8fEUudmFsdWU9PW8uRW50aXR5VHlwZS5wcm9wZXJ0eUZpbHRlclJlc3RyaWN0aW9uLk1VTFRJX1ZBTFVFfHxFLnZhbHVlPT1vLkVudGl0eVR5cGUucHJvcGVydHlGaWx0ZXJSZXN0cmljdGlvbi5JTlRFUlZBTCl0aGlzLl9vUHJvcGVydHlGaWx0ZXJSZXN0cmljdGlvblNldFtQLm5hbWVdPUUudmFsdWU7YnJlYWs7Y2FzZSJoaWVyYXJjaHktbm9kZS1mb3IiOmlmKCEoUj1yW1AubmFtZV0pKVI9cltQLm5hbWVdPW5ldyBPYmplY3QoKTtSLmRpbWVuc2lvbk5hbWU9RS52YWx1ZTticmVhaztjYXNlImhpZXJhcmNoeS1wYXJlbnQtbm9kZS1mb3IiOmNhc2UiaGllcmFyY2h5LXBhcmVudC1ub2QiOmlmKCEoUj1yW0UudmFsdWVdKSlSPXJbRS52YWx1ZV09bmV3IE9iamVjdCgpO1IucGFyZW50Tm9kZUlEUHJvcGVydHk9UDticmVhaztjYXNlImhpZXJhcmNoeS1sZXZlbC1mb3IiOmlmKCEoUj1yW0UudmFsdWVdKSlSPXJbRS52YWx1ZV09bmV3IE9iamVjdCgpO1IubGV2ZWxQcm9wZXJ0eT1QO2JyZWFrO2Nhc2UiaGllcmFyY2h5LWRyaWxsLXN0YXRlLWZvciI6Y2FzZSJoaWVyYXJjaHktZHJpbGwtc3RhdCI6aWYoIShSPXJbRS52YWx1ZV0pKVI9cltFLnZhbHVlXT1uZXcgT2JqZWN0KCk7Ui5kcmlsbFN0YXRlUHJvcGVydHk9UDticmVha319fXRoaXMuX29SZWN1cnNpdmVIaWVyYXJjaHlTZXQ9bmV3IE9iamVjdCgpO2Zvcih2YXIgaCBpbiByKXt2YXIgSD1yW2hdO3ZhciBhPXRoaXMuX29Qcm9wZXJ0eVNldFtoXTt2YXIgZD10aGlzLl9vUHJvcGVydHlTZXRbSC5kaW1lbnNpb25OYW1lXTtpZihkPT1udWxsKXtkPWF9dGhpcy5fb1JlY3Vyc2l2ZUhpZXJhcmNoeVNldFtkLm5hbWVdPW5ldyBvLlJlY3Vyc2l2ZUhpZXJhcmNoeShlLGEsSC5wYXJlbnROb2RlSURQcm9wZXJ0eSxILmxldmVsUHJvcGVydHksZCl9fSxnZXRQcm9wZXJ0aWVzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29Qcm9wZXJ0eVNldH0sZmluZFByb3BlcnR5QnlOYW1lOmZ1bmN0aW9uKHApe3JldHVybiB0aGlzLl9vUHJvcGVydHlTZXRbcF19LGdldEtleVByb3BlcnRpZXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYUtleVByb3BlcnRpZXN9LGdldExhYmVsT2ZQcm9wZXJ0eTpmdW5jdGlvbihwKXt2YXIgUD10aGlzLl9vUHJvcGVydHlTZXRbcF07aWYoUD09bnVsbCl0aHJvdyJubyBzdWNoIHByb3BlcnR5IHdpdGggbmFtZSAiK3A7aWYoUC5leHRlbnNpb25zIT11bmRlZmluZWQpe2Zvcih2YXIgaT0tMSxlO2U9UC5leHRlbnNpb25zWysraV07KXtpZighZS5uYW1lc3BhY2U9PW8uY29uc3RhbnRzLlNBUF9OQU1FU1BBQ0UpY29udGludWU7aWYoZS5uYW1lPT0ibGFiZWwiKXJldHVybiBlLnZhbHVlfX1yZXR1cm4gbnVsbH0sZ2V0SGVhZGluZ09mUHJvcGVydHk6ZnVuY3Rpb24ocCl7dmFyIFA9dGhpcy5fb1Byb3BlcnR5U2V0W3BdO2lmKFA9PW51bGwpdGhyb3cibm8gc3VjaCBwcm9wZXJ0eSB3aXRoIG5hbWUgIitwO2lmKFAuZXh0ZW5zaW9ucyE9dW5kZWZpbmVkKXt2YXIgcz1udWxsO2Zvcih2YXIgaT0tMSxlO2U9UC5leHRlbnNpb25zWysraV07KXtpZighZS5uYW1lc3BhY2U9PW8uY29uc3RhbnRzLlNBUF9OQU1FU1BBQ0UpY29udGludWU7aWYoZS5uYW1lPT0iaGVhZGluZyIpcmV0dXJuIGUudmFsdWU7aWYoZS5uYW1lPT0ibGFiZWwiKXM9ZS52YWx1ZX19cmV0dXJuIHN9LGdldFF1aWNrSW5mb09mUHJvcGVydHk6ZnVuY3Rpb24ocCl7dmFyIFA9dGhpcy5fb1Byb3BlcnR5U2V0W3BdO2lmKFA9PW51bGwpdGhyb3cibm8gc3VjaCBwcm9wZXJ0eSB3aXRoIG5hbWUgIitwO2lmKFAuZXh0ZW5zaW9ucyE9dW5kZWZpbmVkKXt2YXIgcz1udWxsO2Zvcih2YXIgaT0tMSxlO2U9UC5leHRlbnNpb25zWysraV07KXtpZighZS5uYW1lc3BhY2U9PW8uY29uc3RhbnRzLlNBUF9OQU1FU1BBQ0UpY29udGludWU7aWYoZS5uYW1lPT0icXVpY2tpbmZvIilyZXR1cm4gZS52YWx1ZTtpZihlLm5hbWU9PSJsYWJlbCIpcz1lLnZhbHVlfX1yZXR1cm4gc30sZ2V0VGV4dFByb3BlcnR5T2ZQcm9wZXJ0eTpmdW5jdGlvbihwKXt2YXIgUD10aGlzLl9vUHJvcGVydHlTZXRbcF07aWYoUD09bnVsbCl0aHJvdyJubyBzdWNoIHByb3BlcnR5IHdpdGggbmFtZSAiK3A7aWYoUC5leHRlbnNpb25zIT11bmRlZmluZWQpe2Zvcih2YXIgaT0tMSxlO2U9UC5leHRlbnNpb25zWysraV07KXtpZihlLm5hbWU9PSJ0ZXh0IilyZXR1cm4gdGhpcy5maW5kUHJvcGVydHlCeU5hbWUoZS52YWx1ZSl9fXJldHVybiBudWxsfSxnZXRTdXBlck9yZGluYXRlUHJvcGVydHlPZlByb3BlcnR5OmZ1bmN0aW9uKHApe3ZhciBQPXRoaXMuX29Qcm9wZXJ0eVNldFtwXTtpZihQPT1udWxsKXRocm93Im5vIHN1Y2ggcHJvcGVydHkgd2l0aCBuYW1lICIrcDtpZihQLmV4dGVuc2lvbnMhPXVuZGVmaW5lZCl7Zm9yKHZhciBpPS0xLGU7ZT1QLmV4dGVuc2lvbnNbKytpXTspe2lmKGUubmFtZT09InN1cGVyLW9yZGluYXRlIilyZXR1cm4gdGhpcy5maW5kUHJvcGVydHlCeU5hbWUoZS52YWx1ZSl9fXJldHVybiBudWxsfSxnZXRGaWx0ZXJhYmxlUHJvcGVydHlOYW1lczpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9hRmlsdGVyYWJsZVByb3BlcnR5TmFtZXN9LGdldFNvcnRhYmxlUHJvcGVydHlOYW1lczpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9hU29ydGFibGVQcm9wZXJ0eU5hbWVzfSxnZXRSZXF1aXJlZEZpbHRlclByb3BlcnR5TmFtZXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYVJlcXVpcmVkRmlsdGVyUHJvcGVydHlOYW1lc30sZ2V0UHJvcGVydGllc1dpdGhGaWx0ZXJSZXN0cmljdGlvbnM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb1Byb3BlcnR5RmlsdGVyUmVzdHJpY3Rpb25TZXR9LGdldEFsbEhpZXJhcmNoeVByb3BlcnR5TmFtZXM6ZnVuY3Rpb24oKXtpZih0aGlzLl9hSGllcmFyY2h5UHJvcGVydHlOYW1lcylyZXR1cm4gdGhpcy5fYUhpZXJhcmNoeVByb3BlcnR5TmFtZXM7dGhpcy5fYUhpZXJhcmNoeVByb3BlcnR5TmFtZXM9W107Zm9yKHZhciBuIGluIHRoaXMuX29SZWN1cnNpdmVIaWVyYXJjaHlTZXQpdGhpcy5fYUhpZXJhcmNoeVByb3BlcnR5TmFtZXMucHVzaCh0aGlzLl9vUmVjdXJzaXZlSGllcmFyY2h5U2V0W25dLmdldE5vZGVWYWx1ZVByb3BlcnR5KCkubmFtZSk7cmV0dXJuIHRoaXMuX2FIaWVyYXJjaHlQcm9wZXJ0eU5hbWVzfSxnZXRIaWVyYXJjaHk6ZnVuY3Rpb24obil7aWYodGhpcy5fb1JlY3Vyc2l2ZUhpZXJhcmNoeVNldFtuXT09dW5kZWZpbmVkKXJldHVybiBudWxsO3JldHVybiB0aGlzLl9vUmVjdXJzaXZlSGllcmFyY2h5U2V0W25dfSxnZXRRTmFtZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zUU5hbWV9LGdldFR5cGVEZXNjcmlwdGlvbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vRW50aXR5VHlwZX0sZ2V0U2NoZW1hOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29TY2hlbWF9LGdldE1vZGVsOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29Nb2RlbH0sX29FbnRpdHlUeXBlOm51bGwsX29TY2hlbWE6bnVsbCxfb01vZGVsOm51bGwsX3NRTmFtZTpudWxsLF9hS2V5UHJvcGVydGllczpudWxsLF9vUHJvcGVydHlTZXQ6bnVsbCxfYUZpbHRlcmFibGVQcm9wZXJ0eU5hbWVzOm51bGwsX2FSZXF1aXJlZEZpbHRlclByb3BlcnR5TmFtZXM6bnVsbCxfb1Byb3BlcnR5RmlsdGVyUmVzdHJpY3Rpb25TZXQ6bnVsbCxfYUhpZXJhcmNoeVByb3BlcnR5TmFtZXM6bnVsbCxfb1JlY3Vyc2l2ZUhpZXJhcmNoeVNldDpudWxsfTtvLlJlY3Vyc2l2ZUhpZXJhcmNoeT1mdW5jdGlvbihlLG4scCxOLGEpe3RoaXMuX2luaXQoZSxuLHAsTixhKX07by5SZWN1cnNpdmVIaWVyYXJjaHkucHJvdG90eXBlPXtfaW5pdDpmdW5jdGlvbihlLG4scCxOLGEpe3RoaXMuX29FbnRpdHlUeXBlPWU7dGhpcy5fb05vZGVJRFByb3BlcnR5PW47dGhpcy5fb1BhcmVudE5vZGVJRFByb3BlcnR5PXA7dGhpcy5fb05vZGVMZXZlbFByb3BlcnR5PU47dGhpcy5fb05vZGVWYWx1ZVByb3BlcnR5PWF9LGlzUmVjdXJzaXZlSGllcmFyY2h5OmZ1bmN0aW9uKCl7cmV0dXJuIHRydWV9LGlzTGV2ZWxlZEhpZXJhcmNoeTpmdW5jdGlvbigpe3JldHVybiBmYWxzZX0sZ2V0Tm9kZUlEUHJvcGVydHk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb05vZGVJRFByb3BlcnR5fSxnZXRQYXJlbnROb2RlSURQcm9wZXJ0eTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vUGFyZW50Tm9kZUlEUHJvcGVydHl9LGdldE5vZGVMZXZlbFByb3BlcnR5OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29Ob2RlTGV2ZWxQcm9wZXJ0eX0sZ2V0Tm9kZVZhbHVlUHJvcGVydHk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb05vZGVWYWx1ZVByb3BlcnR5fSxfb05vZGVJRFByb3BlcnR5Om51bGwsX29QYXJlbnROb2RlSURQcm9wZXJ0eTpudWxsLF9vTm9kZUxldmVsUHJvcGVydHk6bnVsbCxfb05vZGVWYWx1ZVByb3BlcnR5Om51bGx9O28uRmlsdGVyRXhwcmVzc2lvbj1mdW5jdGlvbihtLHMsZSl7dGhpcy5faW5pdChtLHMsZSl9O28uRmlsdGVyRXhwcmVzc2lvbi5wcm90b3R5cGU9e19pbml0OmZ1bmN0aW9uKG0scyxlKXt0aGlzLl9vRW50aXR5VHlwZT1lO3RoaXMuX29TY2hlbWE9czt0aGlzLl9vTW9kZWw9bTt0aGlzLl9hQ29uZGl0aW9uVUk1RmlsdGVyPW5ldyBBcnJheSgpO3RoaXMuX2FVSTVGaWx0ZXJBcnJheT1uZXcgQXJyYXkoKX0sX3JlbmRlclByb3BlcnR5RmlsdGVyVmFsdWU6ZnVuY3Rpb24oZixwKXtyZXR1cm4gcS5zYXAuZW5jb2RlVVJMKHRoaXMuX29Nb2RlbC5nZXRPRGF0YU1vZGVsKCkuZm9ybWF0VmFsdWUoZixwKSl9LGNsZWFyOmZ1bmN0aW9uKCl7dGhpcy5fYUNvbmRpdGlvblVJNUZpbHRlcj1uZXcgQXJyYXkoKTt0aGlzLl9hVUk1RmlsdGVyQXJyYXk9bmV3IEFycmF5KCl9LF9hZGRDb25kaXRpb246ZnVuY3Rpb24ocCxPLHYsVil7Zm9yKHZhciBpPS0xLHU7dT10aGlzLl9hQ29uZGl0aW9uVUk1RmlsdGVyWysraV07KXtpZih1LnNQYXRoPT1wJiZ1LnNPcGVyYXRvcj09TyYmdS5vVmFsdWUxPT12JiZ1Lm9WYWx1ZTI9PVYpcmV0dXJufXRoaXMuX2FDb25kaXRpb25VSTVGaWx0ZXIucHVzaChuZXcgc2FwLnVpLm1vZGVsLkZpbHRlcihwLE8sdixWKSl9LF9hZGRVSTVGaWx0ZXJBcnJheTpmdW5jdGlvbih1KXt0aGlzLl9hVUk1RmlsdGVyQXJyYXkucHVzaCh1KX0sYWRkQ29uZGl0aW9uOmZ1bmN0aW9uKHAsTyx2LFYpe3ZhciBQPXRoaXMuX29FbnRpdHlUeXBlLmZpbmRQcm9wZXJ0eUJ5TmFtZShwKTtpZihQPT1udWxsKXt0aHJvdyJDYW5ub3QgYWRkIGZpbHRlciBjb25kaXRpb24gZm9yIHVua25vd24gcHJvcGVydHkgbmFtZSAiK3B9dmFyIGY9dGhpcy5fb0VudGl0eVR5cGUuZ2V0RmlsdGVyYWJsZVByb3BlcnR5TmFtZXMoKTtpZihmLmluZGV4T2YocCk9PT0tMSl7dGhyb3ciQ2Fubm90IGFkZCBmaWx0ZXIgY29uZGl0aW9uIGZvciBub3QgZmlsdGVyYWJsZSBwcm9wZXJ0eSBuYW1lICIrcH10aGlzLl9hZGRDb25kaXRpb24ocCxPLHYsVik7cmV0dXJuIHRoaXN9LGFkZFNldENvbmRpdGlvbjpmdW5jdGlvbihwLHYpe3ZhciBQPXRoaXMuX29FbnRpdHlUeXBlLmZpbmRQcm9wZXJ0eUJ5TmFtZShwKTtpZihQPT1udWxsKXt0aHJvdyJDYW5ub3QgYWRkIGZpbHRlciBjb25kaXRpb24gZm9yIHVua25vd24gcHJvcGVydHkgbmFtZSAiK3B9dmFyIGY9dGhpcy5fb0VudGl0eVR5cGUuZ2V0RmlsdGVyYWJsZVByb3BlcnR5TmFtZXMoKTtpZihmLmluZGV4T2YocCk9PT0tMSl7dGhyb3ciQ2Fubm90IGFkZCBmaWx0ZXIgY29uZGl0aW9uIGZvciBub3QgZmlsdGVyYWJsZSBwcm9wZXJ0eSBuYW1lICIrcH1mb3IodmFyIGk9LTEsVjtWPXZbKytpXTspdGhpcy5fYWRkQ29uZGl0aW9uKHAsc2FwLnVpLm1vZGVsLkZpbHRlck9wZXJhdG9yLkVRLFYpO3JldHVybiB0aGlzfSxhZGRVSTVGaWx0ZXJDb25kaXRpb25zOmZ1bmN0aW9uKHUpe2lmKCFBcnJheS5pc0FycmF5KHUpKXRocm93IkFyZ3VtZW50IGlzIG5vdCBhbiBhcnJheSI7aWYodS5sZW5ndGg9PTApcmV0dXJuIHRoaXM7dmFyIGg9ZmFsc2U7Zm9yKHZhciBpPTA7aTx1Lmxlbmd0aDtpKyspe2lmKHVbaV0uYUZpbHRlcnMhPXVuZGVmaW5lZCl7aD10cnVlO2JyZWFrfX1pZihoKXRoaXMuX2FkZFVJNUZpbHRlckFycmF5KHUpO2Vsc2V7Zm9yKHZhciBpPTA7aTx1Lmxlbmd0aDtpKyspe3RoaXMuYWRkQ29uZGl0aW9uKHVbaV0uc1BhdGgsdVtpXS5zT3BlcmF0b3IsdVtpXS5vVmFsdWUxLHVbaV0ub1ZhbHVlMil9fXJldHVybiB0aGlzfSxnZXRFeHByZXNzaW9uQXNVSTVGaWx0ZXJBcnJheTpmdW5jdGlvbigpe3ZhciBmPXRoaXMuX2FDb25kaXRpb25VSTVGaWx0ZXIuY29uY2F0KFtdKTtmb3IodmFyIGk9LTEsRjtGPXRoaXMuX2FVSTVGaWx0ZXJBcnJheVsrK2ldOyl7Zm9yKHZhciBqPS0xLGE7YT1GWysral07KXtmLnB1c2goYSl9fXJldHVybiBmfSxnZXRQcm9wZXJ0aWVzUmVmZXJlbmNlZEJ5VUk1RmlsdGVyQXJyYXk6ZnVuY3Rpb24odSxyKXtmb3IodmFyIGk9LTEsVTtVPXVbKytpXTspe2lmKFUuYUZpbHRlcnMhPXVuZGVmaW5lZCl0aGlzLmdldFByb3BlcnRpZXNSZWZlcmVuY2VkQnlVSTVGaWx0ZXJBcnJheShVLmFGaWx0ZXJzLHIpO2Vsc2V7aWYocltVLnNQYXRoXT09dW5kZWZpbmVkKXJbVS5zUGF0aF09W107cltVLnNQYXRoXS5wdXNoKFUpfX19LGdldFJlZmVyZW5jZWRQcm9wZXJ0aWVzOmZ1bmN0aW9uKCl7dmFyIHI9bmV3IE9iamVjdCgpO2Zvcih2YXIgaT0tMSx1O3U9dGhpcy5fYUNvbmRpdGlvblVJNUZpbHRlclsrK2ldOyl7aWYoclt1LnNQYXRoXT09dW5kZWZpbmVkKXJbdS5zUGF0aF09W107clt1LnNQYXRoXS5wdXNoKHUpfWZvcih2YXIgaT0tMSxVO1U9dGhpcy5fYVVJNUZpbHRlckFycmF5WysraV07KXt0aGlzLmdldFByb3BlcnRpZXNSZWZlcmVuY2VkQnlVSTVGaWx0ZXJBcnJheShVLHIpfXJldHVybiByfSxyZW5kZXJVSTVGaWx0ZXI6ZnVuY3Rpb24odSl7dmFyIHA9dGhpcy5fb0VudGl0eVR5cGUuZmluZFByb3BlcnR5QnlOYW1lKHUuc1BhdGgpO2lmKHA9PW51bGwpe3Rocm93IkNhbm5vdCBhZGQgZmlsdGVyIGNvbmRpdGlvbiBmb3IgdW5rbm93biBwcm9wZXJ0eSBuYW1lICIrdS5zUGF0aH12YXIgZj1udWxsO3N3aXRjaCh1LnNPcGVyYXRvcil7Y2FzZSBzYXAudWkubW9kZWwuRmlsdGVyT3BlcmF0b3IuQlQ6Zj0iKCIrdS5zUGF0aCsiICIrc2FwLnVpLm1vZGVsLkZpbHRlck9wZXJhdG9yLkdFLnRvTG93ZXJDYXNlKCkrIiAiK3RoaXMuX3JlbmRlclByb3BlcnR5RmlsdGVyVmFsdWUodS5vVmFsdWUxLHAudHlwZSkrIiBhbmQgIit1LnNQYXRoKyIgIitzYXAudWkubW9kZWwuRmlsdGVyT3BlcmF0b3IuTEUudG9Mb3dlckNhc2UoKSsiICIrdGhpcy5fcmVuZGVyUHJvcGVydHlGaWx0ZXJWYWx1ZSh1Lm9WYWx1ZTIscC50eXBlKSsiKSI7YnJlYWs7Y2FzZSBzYXAudWkubW9kZWwuRmlsdGVyT3BlcmF0b3IuQ29udGFpbnM6Zj0ic3Vic3RyaW5nb2YoIit0aGlzLl9yZW5kZXJQcm9wZXJ0eUZpbHRlclZhbHVlKHUub1ZhbHVlMSwiRWRtLlN0cmluZyIpKyIsIit1LnNQYXRoKyIpIjticmVhaztjYXNlIHNhcC51aS5tb2RlbC5GaWx0ZXJPcGVyYXRvci5TdGFydHNXaXRoOmNhc2Ugc2FwLnVpLm1vZGVsLkZpbHRlck9wZXJhdG9yLkVuZHNXaXRoOmY9dS5zT3BlcmF0b3IudG9Mb3dlckNhc2UoKSsiKCIrdS5zUGF0aCsiLCIrdGhpcy5fcmVuZGVyUHJvcGVydHlGaWx0ZXJWYWx1ZSh1Lm9WYWx1ZTEsIkVkbS5TdHJpbmciKSsiKSI7YnJlYWs7ZGVmYXVsdDpmPXUuc1BhdGgrIiAiK3Uuc09wZXJhdG9yLnRvTG93ZXJDYXNlKCkrIiAiK3RoaXMuX3JlbmRlclByb3BlcnR5RmlsdGVyVmFsdWUodS5vVmFsdWUxLHAudHlwZSl9cmV0dXJuIGZ9LHJlbmRlclVJNU11bHRpRmlsdGVyOmZ1bmN0aW9uKHUpe3ZhciBVPW5ldyBBcnJheSgpO3ZhciBPPSIiO3ZhciBsPXUuYkFuZD09dHJ1ZT8iIGFuZCAiOiIgb3IgIjtmb3IodmFyIGk9LTEsYTthPXUuYUZpbHRlcnNbKytpXTspe2lmKGEuYUZpbHRlcnMhPXVuZGVmaW5lZCl7VS5wdXNoKGEpO2NvbnRpbnVlfU8rPShPPT0iIj8iIjpsKSsiKCIrdGhpcy5yZW5kZXJVSTVGaWx0ZXIoYSkrIikifWlmKFUubGVuZ3RoPjApe2Zvcih2YXIgaT0tMSxtO209VVsrK2ldOyl7Tys9KE89PSIiPyIiOmwpKyIoIit0aGlzLnJlbmRlclVJNU11bHRpRmlsdGVyKG0pKyIpIn19cmV0dXJuIE99LHJlbmRlclVJNUZpbHRlckFycmF5OmZ1bmN0aW9uKHUpe2lmKHUubGVuZ3RoPT0wKXJldHVybiIiO3ZhciBPPSIiO3Uuc29ydChmdW5jdGlvbihhLGIpe2lmKGEuc1BhdGg9PWIuc1BhdGgpcmV0dXJuIDA7aWYoYS5zUGF0aD5iLnNQYXRoKXJldHVybiAxO2Vsc2UgcmV0dXJuLTF9KTt2YXIgcD11WzBdLnNQYXRoO3ZhciBzPSIiO3ZhciBuPW5ldyBBcnJheSgpLFU9bmV3IEFycmF5KCk7Zm9yKHZhciBpPS0xLGM7Yz11WysraV07KXtpZihjLmFGaWx0ZXJzIT11bmRlZmluZWQpe1UucHVzaChjKTtjb250aW51ZX1pZihwIT1jLnNQYXRoKXtpZihzIT0iIilPKz0oTz09IiI/IiI6IiBhbmQgIikrIigiK3MrIikiO3M9IiI7aWYobi5sZW5ndGg+MCl7Zm9yKHZhciBqPS0xLE47Tj1uWysral07KXtzKz0ocz09IiI/IiI6IiBhbmQgIikrdGhpcy5yZW5kZXJVSTVGaWx0ZXIoTil9Tys9KE89PSIiPyIiOiIgYW5kICIpKyIoIitzKyIpIjtzPSIifXA9Yy5zUGF0aDtuPW5ldyBBcnJheSgpfWlmKGMuc09wZXJhdG9yPT1zYXAudWkubW9kZWwuRmlsdGVyT3BlcmF0b3IuTkUpe24ucHVzaChjKTtjb250aW51ZX1zKz0ocz09IiI/IiI6IiBvciAiKSt0aGlzLnJlbmRlclVJNUZpbHRlcihjKX1pZihzIT0iIilPKz0oTz09IiI/IiI6IiBhbmQgIikrIigiK3MrIikiO2lmKG4ubGVuZ3RoPjApe3M9IiI7Zm9yKHZhciBqPS0xLE47Tj1uWysral07KXtzKz0ocz09IiI/IiI6IiBhbmQgIikrdGhpcy5yZW5kZXJVSTVGaWx0ZXIoTil9Tys9KE89PSIiPyIiOiIgYW5kICIpKyIoIitzKyIpIn1pZihVLmxlbmd0aD4wKXtmb3IodmFyIGo9LTEsbTttPVVbKytqXTspe08rPShPPT0iIj8iIjoiIGFuZCAiKSsiKCIrdGhpcy5yZW5kZXJVSTVNdWx0aUZpbHRlcihtKSsiKSJ9fXJldHVybiBPfSxnZXRVUklGaWx0ZXJPcHRpb25WYWx1ZTpmdW5jdGlvbigpe3ZhciBPPXRoaXMucmVuZGVyVUk1RmlsdGVyQXJyYXkodGhpcy5fYUNvbmRpdGlvblVJNUZpbHRlcik7Zm9yKHZhciBpPS0xLHU7dT10aGlzLl9hVUk1RmlsdGVyQXJyYXlbKytpXTspe08rPShPPT0iIj8iIjoiIGFuZCAiKSsiKCIrdGhpcy5yZW5kZXJVSTVGaWx0ZXJBcnJheSh1KSsiKSJ9cmV0dXJuIE99LGlzVmFsaWQ6ZnVuY3Rpb24oKXt2YXIgcj10aGlzLl9vRW50aXR5VHlwZS5nZXRSZXF1aXJlZEZpbHRlclByb3BlcnR5TmFtZXMoKTt2YXIgcD10aGlzLmdldFJlZmVyZW5jZWRQcm9wZXJ0aWVzKCk7Zm9yKHZhciBpPS0xLFA7UD1yWysraV07KXtpZihwW1BdPT11bmRlZmluZWQpdGhyb3ciZmlsdGVyIGV4cHJlc3Npb24gZG9lcyBub3QgY29udGFpbiByZXF1aXJlZCBwcm9wZXJ0eSAiK1B9dmFyIGE9dGhpcy5fb0VudGl0eVR5cGUuZ2V0UHJvcGVydGllc1dpdGhGaWx0ZXJSZXN0cmljdGlvbnMoKTtmb3IodmFyIFAgaW4gYSl7dmFyIGY9YVtQXTt2YXIgYz0wO2lmKGY9PW8uRW50aXR5VHlwZS5wcm9wZXJ0eUZpbHRlclJlc3RyaWN0aW9uLlNJTkdMRV9WQUxVRSl7aWYocFtQXSE9dW5kZWZpbmVkKXtpZihwW1BdLmxlbmd0aD4xfHxwW1BdWzBdLnNPcGVyYXRvciE9c2FwLnVpLm1vZGVsLkZpbHRlck9wZXJhdG9yLkVRKXRocm93ImZpbHRlciBleHByZXNzaW9uIG1heSB1c2UgIitQKyIgb25seSB3aXRoIGEgc2luZ2xlIEVRIGNvbmRpdGlvbiJ9fX1yZXR1cm4gdHJ1ZX0sZ2V0RW50aXR5VHlwZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vRW50aXR5VHlwZX0sZ2V0U2NoZW1hOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29TY2hlbWF9LGdldE1vZGVsOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29Nb2RlbH0sX29FbnRpdHlUeXBlOm51bGwsX29TY2hlbWE6bnVsbCxfb01vZGVsOm51bGwsX2FGaWx0ZXJDb25kaXRpb246bnVsbH07by5Tb3J0T3JkZXI9e0FzY2VuZGluZzoiYXNjIixEZXNjZW5kaW5nOiJkZXNjIn07by5Tb3J0RXhwcmVzc2lvbj1mdW5jdGlvbihtLHMsZSl7dGhpcy5faW5pdChtLHMsZSl9O28uU29ydEV4cHJlc3Npb24ucHJvdG90eXBlPXtfaW5pdDpmdW5jdGlvbihtLHMsZSl7dGhpcy5fb0VudGl0eVR5cGU9ZTt0aGlzLl9vU2NoZW1hPXM7dGhpcy5fb01vZGVsPW07dGhpcy5fYVNvcnRDb25kaXRpb249W119LF9jb250YWluc1NvcnRlcjpmdW5jdGlvbihwKXt2YXIgcj1udWxsO2Zvcih2YXIgaT0tMSxjO2M9dGhpcy5fYVNvcnRDb25kaXRpb25bKytpXTspe2lmKGMucHJvcGVydHkubmFtZT09PXApe3I9e3NvcnRlcjpjLGluZGV4Oml9O2JyZWFrfX1yZXR1cm4gcn0sX3JlbW92ZUZyb21BcnJheTpmdW5jdGlvbihhLGYsdCl7dmFyIHI9YS5zbGljZSgodHx8ZikrMXx8YS5sZW5ndGgpO2EubGVuZ3RoPWY8MD9hLmxlbmd0aCtmOmY7cmV0dXJuIGEucHVzaC5hcHBseShhLHIpfSxjbGVhcjpmdW5jdGlvbigpe3RoaXMuX2FTb3J0Q29uZGl0aW9uPVtdfSxhZGRTb3J0ZXI6ZnVuY3Rpb24ocCxzKXt2YXIgUD10aGlzLl9vRW50aXR5VHlwZS5maW5kUHJvcGVydHlCeU5hbWUocCk7aWYoUD09bnVsbCl7dGhyb3ciQ2Fubm90IGFkZCBzb3J0IGNvbmRpdGlvbiBmb3IgdW5rbm93biBwcm9wZXJ0eSBuYW1lICIrcH12YXIgZT10aGlzLl9jb250YWluc1NvcnRlcihwKTtpZihlIT1udWxsKXtlLnNvcnRlci5vcmRlcj1zO3JldHVybiB0aGlzfXZhciBTPXRoaXMuX29FbnRpdHlUeXBlLmdldFNvcnRhYmxlUHJvcGVydHlOYW1lcygpO2lmKFMuaW5kZXhPZihwKT09PS0xKXt0aHJvdyJDYW5ub3QgYWRkIHNvcnQgY29uZGl0aW9uIGZvciBub3Qgc29ydGFibGUgcHJvcGVydHkgbmFtZSAiK3B9dGhpcy5fYVNvcnRDb25kaXRpb24ucHVzaCh7cHJvcGVydHk6UCxvcmRlcjpzfSk7cmV0dXJuIHRoaXN9LHJlbW92ZVNvcnRlcjpmdW5jdGlvbihwKXtpZighcClyZXR1cm47dmFyIHM9dGhpcy5fY29udGFpbnNTb3J0ZXIocCk7aWYocyl7dGhpcy5fcmVtb3ZlRnJvbUFycmF5KHRoaXMuX2FTb3J0Q29uZGl0aW9uLHMuaW5kZXgpfX0sZ2V0RXhwcmVzc2lvbnNBc1VJNVNvcnRlckFycmF5OmZ1bmN0aW9uKCl7dmFyIHM9W107Zm9yKHZhciBpPS0xLGM7Yz10aGlzLl9hU29ydENvbmRpdGlvblsrK2ldOyl7cy5wdXNoKG5ldyBzYXAudWkubW9kZWwuU29ydGVyKGMucHJvcGVydHkubmFtZSxjLm9yZGVyPT1vLlNvcnRPcmRlci5EZXNjZW5kaW5nKSl9cmV0dXJuIHN9LGdldEV4cHJlc3Npb25Bc1VJNVNvcnRlcjpmdW5jdGlvbigpe3ZhciBzPXRoaXMuZ2V0RXhwcmVzc2lvbnNBc1VJNVNvcnRlckFycmF5KCk7aWYocy5sZW5ndGg9PTApe3JldHVybiBudWxsfWVsc2V7cmV0dXJuIHNbMF19fSxnZXRVUklPcmRlckJ5T3B0aW9uVmFsdWU6ZnVuY3Rpb24ocyl7aWYodGhpcy5fYVNvcnRDb25kaXRpb24ubGVuZ3RoPT0wKXJldHVybiIiO3ZhciBPPSIiO2Zvcih2YXIgaT0tMSxjO2M9dGhpcy5fYVNvcnRDb25kaXRpb25bKytpXTspe2lmKCFzW2MucHJvcGVydHkubmFtZV0pY29udGludWU7Tys9KE89PSIiPyIiOiIsIikrYy5wcm9wZXJ0eS5uYW1lKyIgIitjLm9yZGVyfXJldHVybiBPfSxnZXRFbnRpdHlUeXBlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29FbnRpdHlUeXBlfSxnZXRTY2hlbWE6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb1NjaGVtYX0sZ2V0TW9kZWw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb01vZGVsfSxfb0VudGl0eVR5cGU6bnVsbCxfb1NjaGVtYTpudWxsLF9vTW9kZWw6bnVsbCxfYVNvcnRDb25kaXRpb246bnVsbH07by5QYXJhbWV0ZXJpemF0aW9uUmVxdWVzdD1mdW5jdGlvbihwKXt0aGlzLl9pbml0KHApfTtvLlBhcmFtZXRlcml6YXRpb25SZXF1ZXN0LnByb3RvdHlwZT17X2luaXQ6ZnVuY3Rpb24ocCl7aWYoIXApdGhyb3ciTm8gcGFyYW1ldGVyaXphdGlvbiBnaXZlbiI7dGhpcy5fb1BhcmFtZXRlcml6YXRpb249cDt0aGlzLl9vUGFyYW1ldGVyVmFsdWVBc3NpZ25tZW50PW5ldyBBcnJheSgpfSxfcmVuZGVyUGFyYW1ldGVyS2V5VmFsdWU6ZnVuY3Rpb24oayxwKXtyZXR1cm4gcS5zYXAuZW5jb2RlVVJMKHRoaXMuX29QYXJhbWV0ZXJpemF0aW9uLmdldFRhcmdldFF1ZXJ5UmVzdWx0KCkuZ2V0TW9kZWwoKS5nZXRPRGF0YU1vZGVsKCkuZm9ybWF0VmFsdWUoayxwKSl9LGdldFBhcmFtZXRlcml6YXRpb246ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb1BhcmFtZXRlcml6YXRpb259LHNldFBhcmFtZXRlclZhbHVlOmZ1bmN0aW9uKHAsdix0KXt2YXIgUD10aGlzLl9vUGFyYW1ldGVyaXphdGlvbi5maW5kUGFyYW1ldGVyQnlOYW1lKHApO2lmKCFQKXRocm93IkludmFsaWQgcGFyYW1ldGVyIG5hbWUgIitwO2lmKHQhPW51bGwpe2lmKCFQLmlzSW50ZXJ2YWxCb3VuZGFyeSgpKXRocm93IlJhbmdlIHZhbHVlIGNhbm5vdCBiZSBhcHBsaWVkIHRvIHBhcmFtZXRlciAiK3ArIiBhY2NlcHRpbmcgb25seSBzaW5nbGUgdmFsdWVzIjtpZighUC5pc0xvd2VySW50ZXJ2YWxCb3VuZGFyeSgpKXRocm93IlJhbmdlIHZhbHVlIGdpdmVuLCBidXQgcGFyYW1ldGVyICIrcCsiIGRvZXMgbm90IGhvbGQgdGhlIGxvd2VyIGJvdW5kYXJ5In1pZighUC5pc0ludGVydmFsQm91bmRhcnkoKSl7aWYodj09bnVsbClkZWxldGUgdGhpcy5fb1BhcmFtZXRlclZhbHVlQXNzaWdubWVudFtwXTtlbHNlIHRoaXMuX29QYXJhbWV0ZXJWYWx1ZUFzc2lnbm1lbnRbcF09dn1lbHNle2lmKHY9PW51bGwmJnQhPW51bGwpdGhyb3ciUGFyYW1ldGVyICIrcCsiOiBBbiB1cHBlciBib3VuZGFyeSBjYW5ub3QgYmUgZ2l2ZW4gd2l0aG91dCB0aGUgbG93ZXIgYm91bmRhcnkiO2lmKHY9PW51bGwpe2RlbGV0ZSB0aGlzLl9vUGFyYW1ldGVyVmFsdWVBc3NpZ25tZW50W3BdO3Q9bnVsbH1lbHNlIHRoaXMuX29QYXJhbWV0ZXJWYWx1ZUFzc2lnbm1lbnRbcF09djt2YXIgdT1QLmdldFBlZXJJbnRlcnZhbEJvdW5kYXJ5UGFyYW1ldGVyKCk7aWYodD09bnVsbCl0PXY7aWYodj09bnVsbClkZWxldGUgdGhpcy5fb1BhcmFtZXRlclZhbHVlQXNzaWdubWVudFt1LmdldE5hbWUoKV07ZWxzZSB0aGlzLl9vUGFyYW1ldGVyVmFsdWVBc3NpZ25tZW50W3UuZ2V0TmFtZSgpXT10fXJldHVybn0sZ2V0VVJJVG9QYXJhbWV0ZXJpemF0aW9uRW50aXR5U2V0OmZ1bmN0aW9uKHMpe3JldHVybihzP3M6IiIpKyIvIit0aGlzLl9vUGFyYW1ldGVyaXphdGlvbi5nZXRFbnRpdHlTZXQoKS5nZXRRTmFtZSgpfSxnZXRVUklUb1BhcmFtZXRlcml6YXRpb25FbnRyeTpmdW5jdGlvbihzKXt2YXIgZD10aGlzLl9vUGFyYW1ldGVyaXphdGlvbi5nZXRBbGxQYXJhbWV0ZXJzKCk7Zm9yKHZhciBEIGluIGQpe2lmKHRoaXMuX29QYXJhbWV0ZXJWYWx1ZUFzc2lnbm1lbnRbRF09PXVuZGVmaW5lZCl0aHJvdyJQYXJhbWV0ZXIgIitEKyIgaGFzIG5vIHZhbHVlIGFzc2lnbmVkIn12YXIgaz0iIixmPXRydWU7Zm9yKHZhciBwIGluIHRoaXMuX29QYXJhbWV0ZXJWYWx1ZUFzc2lnbm1lbnQpe2srPShmPyIiOiIsIikrcCsiPSIrdGhpcy5fcmVuZGVyUGFyYW1ldGVyS2V5VmFsdWUodGhpcy5fb1BhcmFtZXRlclZhbHVlQXNzaWdubWVudFtwXSxkW3BdLmdldFByb3BlcnR5KCkudHlwZSk7Zj1mYWxzZX1yZXR1cm4ocz9zOiIiKSsiLyIrdGhpcy5fb1BhcmFtZXRlcml6YXRpb24uZ2V0RW50aXR5U2V0KCkuZ2V0UU5hbWUoKSsiKCIraysiKSJ9LF9vUGFyYW1ldGVyaXphdGlvbjpudWxsLF9vUGFyYW1ldGVyVmFsdWVBc3NpZ25tZW50Om51bGx9O28uUXVlcnlSZXN1bHRSZXF1ZXN0PWZ1bmN0aW9uKFEscCl7dGhpcy5faW5pdChRKX07by5RdWVyeVJlc3VsdFJlcXVlc3QucHJvdG90eXBlPXtfaW5pdDpmdW5jdGlvbihRLHApe3RoaXMuX29RdWVyeVJlc3VsdD1RO3RoaXMuX29QYXJhbWV0ZXJpemF0aW9uUmVxdWVzdD1wO3RoaXMuX29BZ2dyZWdhdGlvbkxldmVsPW5ldyBPYmplY3QoKTt0aGlzLl9vTWVhc3VyZXM9bmV3IE9iamVjdCgpO3RoaXMuX2JJbmNsdWRlRW50aXR5S2V5PWZhbHNlO3RoaXMuX29GaWx0ZXJFeHByZXNzaW9uPW51bGw7dGhpcy5fb1NvcnRFeHByZXNzaW9uPW51bGw7dGhpcy5fb1NlbGVjdGVkUHJvcGVydHlOYW1lcz1udWxsfSxzZXRQYXJhbWV0ZXJpemF0aW9uUmVxdWVzdDpmdW5jdGlvbihwKXt0aGlzLl9vUGFyYW1ldGVyaXphdGlvblJlcXVlc3Q9cH0sc2V0UmVzb3VyY2VQYXRoOmZ1bmN0aW9uKHIpe3RoaXMuX3NSZXNvdXJjZVBhdGg9cjtpZih0aGlzLl9zUmVzb3VyY2VQYXRoLmluZGV4T2YoIi8iKSE9MCl0aHJvdyJNaXNzaW5nIGxlYWRpbmcgLyAoc2xhc2gpIGZvciByZXNvdXJjZSBwYXRoIjtpZih0aGlzLl9vUXVlcnlSZXN1bHQuZ2V0UGFyYW1ldGVyaXphdGlvbigpKXt2YXIgbD1yLmxhc3RJbmRleE9mKCIvIik7aWYobD09LTEpdGhyb3ciTWlzc2luZyBuYXZpZ2F0aW9uIGZyb20gcGFyYW1ldGVyIGVudGl0eSBzZXQgdG8gcXVlcnkgcmVzdWx0IGluIHJlc291cmNlIHBhdGgiO3ZhciBuPXIuc3Vic3RyaW5nKGwrMSk7aWYobiE9dGhpcy5fb1F1ZXJ5UmVzdWx0LmdldFBhcmFtZXRlcml6YXRpb24oKS5nZXROYXZpZ2F0aW9uUHJvcGVydHlUb1F1ZXJ5UmVzdWx0KCkpdGhyb3ciSW52YWxpZCBuYXZpZ2F0aW9uIHByb3BlcnR5IGZyb20gcGFyYW1ldGVyIGVudGl0eSBzZXQgdG8gcXVlcnkgcmVzdWx0IGluIHJlc291cmNlIHBhdGgifX0sZ2V0UGFyYW1ldGVyaXphdGlvblJlcXVlc3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb1BhcmFtZXRlcml6YXRpb25SZXF1ZXN0fSxnZXRRdWVyeVJlc3VsdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vUXVlcnlSZXN1bHR9LHNldEFnZ3JlZ2F0aW9uTGV2ZWw6ZnVuY3Rpb24oZCl7dGhpcy5fb0FnZ3JlZ2F0aW9uTGV2ZWw9bmV3IE9iamVjdCgpO2lmKCFkKXtkPXRoaXMuX29RdWVyeVJlc3VsdC5nZXRBbGxEaW1lbnNpb25OYW1lcygpfXRoaXMuYWRkVG9BZ2dyZWdhdGlvbkxldmVsKGQpO3RoaXMuX29TZWxlY3RlZFByb3BlcnR5TmFtZXM9bnVsbH0sYWRkVG9BZ2dyZWdhdGlvbkxldmVsOmZ1bmN0aW9uKGQpe2lmKCFkKXJldHVybjt0aGlzLl9vU2VsZWN0ZWRQcm9wZXJ0eU5hbWVzPW51bGw7Zm9yKHZhciBpPS0xLEQ7RD1kWysraV07KXtpZighdGhpcy5fb1F1ZXJ5UmVzdWx0LmZpbmREaW1lbnNpb25CeU5hbWUoRCkpdGhyb3cgRCsiIGlzIG5vdCBhIHZhbGlkIGRpbWVuc2lvbiBuYW1lIjt0aGlzLl9vQWdncmVnYXRpb25MZXZlbFtEXT17a2V5OnRydWUsdGV4dDpmYWxzZSxhdHRyaWJ1dGVzOm51bGx9fX0scmVtb3ZlRnJvbUFnZ3JlZ2F0aW9uTGV2ZWw6ZnVuY3Rpb24oZCl7aWYoIWQpe3JldHVybn10aGlzLl9vU2VsZWN0ZWRQcm9wZXJ0eU5hbWVzPW51bGw7Zm9yKHZhciBpPS0xLEQ7RD1kWysraV07KXtpZighdGhpcy5fb1F1ZXJ5UmVzdWx0LmZpbmREaW1lbnNpb25CeU5hbWUoRCkpe3Rocm93IEQrIiBpcyBub3QgYSB2YWxpZCBkaW1lbnNpb24gbmFtZSJ9aWYodGhpcy5fb0FnZ3JlZ2F0aW9uTGV2ZWxbRF0hPXVuZGVmaW5lZCl7ZGVsZXRlIHRoaXMuX29BZ2dyZWdhdGlvbkxldmVsW0RdO3RoaXMuZ2V0U29ydEV4cHJlc3Npb24oKS5yZW1vdmVTb3J0ZXIoRCl9fX0sZ2V0QWdncmVnYXRpb25MZXZlbDpmdW5jdGlvbigpe3ZhciBkPW5ldyBBcnJheSgpO2Zvcih2YXIgRCBpbiB0aGlzLl9vQWdncmVnYXRpb25MZXZlbCl7ZC5wdXNoKEQpfXJldHVybiBkfSxnZXRBZ2dyZWdhdGlvbkxldmVsRGV0YWlsczpmdW5jdGlvbihkKXtpZih0aGlzLl9vQWdncmVnYXRpb25MZXZlbFtkXT09dW5kZWZpbmVkKXRocm93IkFnZ3JlZ2F0aW9uIGxldmVsIGRvZXMgbm90IGluY2x1ZGUgZGltZW5zaW9uICIrZDtyZXR1cm4gdGhpcy5fb0FnZ3JlZ2F0aW9uTGV2ZWxbZF19LHNldE1lYXN1cmVzOmZ1bmN0aW9uKG0pe2lmKCFtKXttPXRoaXMuX29RdWVyeVJlc3VsdC5nZXRBbGxNZWFzdXJlTmFtZXMoKX10aGlzLl9vU2VsZWN0ZWRQcm9wZXJ0eU5hbWVzPW51bGw7dGhpcy5fb01lYXN1cmVzPW5ldyBPYmplY3QoKTtmb3IodmFyIGk9LTEsTTtNPW1bKytpXTspe2lmKCF0aGlzLl9vUXVlcnlSZXN1bHQuZmluZE1lYXN1cmVCeU5hbWUoTSkpdGhyb3cgTSsiIGlzIG5vdCBhIHZhbGlkIG1lYXN1cmUgbmFtZSI7dGhpcy5fb01lYXN1cmVzW01dPXt2YWx1ZTp0cnVlLHRleHQ6ZmFsc2UsdW5pdDpmYWxzZX19fSxnZXRNZWFzdXJlTmFtZXM6ZnVuY3Rpb24oKXt2YXIgbT1uZXcgQXJyYXkoKTtmb3IodmFyIE0gaW4gdGhpcy5fb01lYXN1cmVzKXttLnB1c2goTSl9cmV0dXJuIG19LGluY2x1ZGVEaW1lbnNpb25LZXlUZXh0QXR0cmlidXRlczpmdW5jdGlvbihkLEksYixhKXt0aGlzLl9vU2VsZWN0ZWRQcm9wZXJ0eU5hbWVzPW51bGw7dmFyIEQ9bmV3IEFycmF5KCk7aWYoZCl7aWYodGhpcy5fb0FnZ3JlZ2F0aW9uTGV2ZWxbZF09PXVuZGVmaW5lZCl0aHJvdyBkKyIgaXMgbm90IGluY2x1ZGVkIGluIHRoZSBhZ2dyZWdhdGlvbiBsZXZlbCI7RC5wdXNoKGQpfWVsc2V7Zm9yKHZhciBuIGluIHRoaXMuX29BZ2dyZWdhdGlvbkxldmVsKXtELnB1c2gobil9YT1udWxsfWZvcih2YXIgaT0tMSxzO3M9RFsrK2ldOyl7aWYoSSE9bnVsbCl0aGlzLl9vQWdncmVnYXRpb25MZXZlbFtzXS5rZXk9STtpZihiIT1udWxsKXRoaXMuX29BZ2dyZWdhdGlvbkxldmVsW3NdLnRleHQ9YjtpZihhIT1udWxsKXRoaXMuX29BZ2dyZWdhdGlvbkxldmVsW3NdLmF0dHJpYnV0ZXM9YX19LGluY2x1ZGVNZWFzdXJlUmF3Rm9ybWF0dGVkVmFsdWVVbml0OmZ1bmN0aW9uKG0sSSxiLGEpe3RoaXMuX29TZWxlY3RlZFByb3BlcnR5TmFtZXM9bnVsbDt2YXIgTT1uZXcgQXJyYXkoKTtpZihtKXtpZih0aGlzLl9vTWVhc3VyZXNbbV09PXVuZGVmaW5lZCl0aHJvdyBtKyIgaXMgbm90IHBhcnQgb2YgdGhlIHF1ZXJ5IHJlc3VsdCI7TS5wdXNoKG0pfWVsc2V7Zm9yKHZhciBuIGluIHRoaXMuX29NZWFzdXJlcyl7TS5wdXNoKG4pfX1mb3IodmFyIGk9LTEscztzPU1bKytpXTspe2lmKEkhPW51bGwpdGhpcy5fb01lYXN1cmVzW3NdLnZhbHVlPUk7aWYoYiE9bnVsbCl0aGlzLl9vTWVhc3VyZXNbc10udGV4dD1iO2lmKGEhPW51bGwpdGhpcy5fb01lYXN1cmVzW3NdLnVuaXQ9YX19LGdldEZpbHRlckV4cHJlc3Npb246ZnVuY3Rpb24oKXtpZih0aGlzLl9vRmlsdGVyRXhwcmVzc2lvbj09bnVsbCl7dmFyIGU9dGhpcy5fb1F1ZXJ5UmVzdWx0LmdldEVudGl0eVR5cGUoKTt0aGlzLl9vRmlsdGVyRXhwcmVzc2lvbj1uZXcgby5GaWx0ZXJFeHByZXNzaW9uKHRoaXMuX29RdWVyeVJlc3VsdC5nZXRNb2RlbCgpLGUuZ2V0U2NoZW1hKCksZSl9cmV0dXJuIHRoaXMuX29GaWx0ZXJFeHByZXNzaW9ufSxzZXRGaWx0ZXJFeHByZXNzaW9uOmZ1bmN0aW9uKGYpe3RoaXMuX29GaWx0ZXJFeHByZXNzaW9uPWZ9LGdldFNvcnRFeHByZXNzaW9uOmZ1bmN0aW9uKCl7aWYodGhpcy5fb1NvcnRFeHByZXNzaW9uPT1udWxsKXt2YXIgZT10aGlzLl9vUXVlcnlSZXN1bHQuZ2V0RW50aXR5VHlwZSgpO3RoaXMuX29Tb3J0RXhwcmVzc2lvbj1uZXcgby5Tb3J0RXhwcmVzc2lvbihlLmdldE1vZGVsKCksZS5nZXRTY2hlbWEoKSxlKX1yZXR1cm4gdGhpcy5fb1NvcnRFeHByZXNzaW9ufSxzZXRTb3J0RXhwcmVzc2lvbjpmdW5jdGlvbihzKXt0aGlzLl9vU29ydEV4cHJlc3Npb249c30sc2V0UmVxdWVzdE9wdGlvbnM6ZnVuY3Rpb24oaSxJKXtpZihpIT1udWxsKXRoaXMuX2JJbmNsdWRlRW50aXR5S2V5PWk7aWYoSSE9bnVsbCl0aGlzLl9iSW5jbHVkZUNvdW50PUl9LHNldFJlc3VsdFBhZ2VCb3VuZGFyaWVzOmZ1bmN0aW9uKHMsZSl7aWYocyE9bnVsbCYmdHlwZW9mIHMhPT0ibnVtYmVyIil7dGhyb3ciU3RhcnQgdmFsdWUgbXVzdCBiZSBudWxsIG9yIG51bWVyaWMifWlmKGUhPT1udWxsJiZ0eXBlb2YgZSE9PSJudW1iZXIiKXt0aHJvdyJFbmQgdmFsdWUgbXVzdCBiZSBudWxsIG9yIG51bWVyaWMifWlmKHM9PW51bGwpcz0xO2lmKHM8MXx8cz4oZT09bnVsbD9zOmUpKXt0aHJvdyJJbnZhbGlkIHZhbHVlcyBmb3IgcmVxdWVzdGVkIHBhZ2UgYm91bmRhcmllcyJ9dGhpcy5faVNraXBSZXF1ZXN0T3B0aW9uPShzPjEpP3MtMTpudWxsO3RoaXMuX2lUb3BSZXF1ZXN0T3B0aW9uPShlIT1udWxsKT8oZS1zKzEpOm51bGx9LGdldFJlc3VsdFBhZ2VCb3VuZGFyaWVzOmZ1bmN0aW9uKCl7cmV0dXJue3N0YXJ0Oih0aGlzLl9pU2tpcFJlcXVlc3RPcHRpb249PW51bGwpPzE6dGhpcy5faVNraXBSZXF1ZXN0T3B0aW9uLGVuZDoodGhpcy5faVRvcFJlcXVlc3RPcHRpb24hPW51bGwpPyh0aGlzLl9pU2tpcFJlcXVlc3RPcHRpb249PW51bGwpPzE6dGhpcy5faVNraXBSZXF1ZXN0T3B0aW9uK3RoaXMuX2lUb3BSZXF1ZXN0T3B0aW9uOm51bGx9fSxnZXRVUklUb1F1ZXJ5UmVzdWx0RW50aXR5U2V0OmZ1bmN0aW9uKHMpe3ZhciB1PW51bGw7aWYodGhpcy5fc1Jlc291cmNlUGF0aCE9bnVsbCl7dT0ocz9zOiIiKSt0aGlzLl9zUmVzb3VyY2VQYXRofWVsc2V7aWYodGhpcy5fb1F1ZXJ5UmVzdWx0LmdldFBhcmFtZXRlcml6YXRpb24oKSl7aWYoIXRoaXMuX29QYXJhbWV0ZXJpemF0aW9uUmVxdWVzdCl0aHJvdyJNaXNzaW5nIHBhcmFtZXRlcml6YXRpb24gcmVxdWVzdCI7ZWxzZSB1PXRoaXMuX29QYXJhbWV0ZXJpemF0aW9uUmVxdWVzdC5nZXRVUklUb1BhcmFtZXRlcml6YXRpb25FbnRyeShzKSsiLyIrdGhpcy5fb1F1ZXJ5UmVzdWx0LmdldFBhcmFtZXRlcml6YXRpb24oKS5nZXROYXZpZ2F0aW9uUHJvcGVydHlUb1F1ZXJ5UmVzdWx0KCl9ZWxzZSB1PShzP3M6IiIpKyIvIit0aGlzLl9vUXVlcnlSZXN1bHQuZ2V0RW50aXR5U2V0KCkuZ2V0UU5hbWUoKX1yZXR1cm4gdX0sZ2V0VVJJUXVlcnlPcHRpb25WYWx1ZTpmdW5jdGlvbihRKXt2YXIgcz1udWxsO3N3aXRjaChRKXtjYXNlIiRzZWxlY3QiOnt2YXIgUz0iIjt0aGlzLl9vU2VsZWN0ZWRQcm9wZXJ0eU5hbWVzPW5ldyBPYmplY3QoKTt2YXIgZD1udWxsO2Zvcih2YXIgRCBpbiB0aGlzLl9vQWdncmVnYXRpb25MZXZlbCl7dmFyIGE9dGhpcy5fb1F1ZXJ5UmVzdWx0LmZpbmREaW1lbnNpb25CeU5hbWUoRCk7dmFyIGI9dGhpcy5fb0FnZ3JlZ2F0aW9uTGV2ZWxbRF07aWYoYi5rZXk9PXRydWUpe2Q9YS5nZXRLZXlQcm9wZXJ0eSgpLm5hbWU7aWYodGhpcy5fb1NlbGVjdGVkUHJvcGVydHlOYW1lc1tkXT09dW5kZWZpbmVkKXtTKz0oUz09IiI/IiI6IiwiKStkO3RoaXMuX29TZWxlY3RlZFByb3BlcnR5TmFtZXNbZF09dHJ1ZX19aWYoYi50ZXh0PT10cnVlJiZhLmdldFRleHRQcm9wZXJ0eSgpKXtkPWEuZ2V0VGV4dFByb3BlcnR5KCkubmFtZTtpZih0aGlzLl9vU2VsZWN0ZWRQcm9wZXJ0eU5hbWVzW2RdPT11bmRlZmluZWQpe1MrPShTPT0iIj8iIjoiLCIpK2Q7dGhpcy5fb1NlbGVjdGVkUHJvcGVydHlOYW1lc1tkXT10cnVlfX1pZihiLmF0dHJpYnV0ZXMpe2Zvcih2YXIgaT0tMSxBO0E9Yi5hdHRyaWJ1dGVzWysraV07KXtkPWEuZmluZEF0dHJpYnV0ZUJ5TmFtZShBKS5nZXROYW1lKCk7aWYodGhpcy5fb1NlbGVjdGVkUHJvcGVydHlOYW1lc1tkXT09dW5kZWZpbmVkKXtTKz0oUz09IiI/IiI6IiwiKStkO3RoaXMuX29TZWxlY3RlZFByb3BlcnR5TmFtZXNbZF09dHJ1ZX19fX12YXIgbTtmb3IodmFyIE0gaW4gdGhpcy5fb01lYXN1cmVzKXt2YXIgYz10aGlzLl9vUXVlcnlSZXN1bHQuZmluZE1lYXN1cmVCeU5hbWUoTSk7dmFyIGU9dGhpcy5fb01lYXN1cmVzW01dO2lmKGUudmFsdWU9PXRydWUpe209Yy5nZXRSYXdWYWx1ZVByb3BlcnR5KCkubmFtZTtpZih0aGlzLl9vU2VsZWN0ZWRQcm9wZXJ0eU5hbWVzW21dPT11bmRlZmluZWQpe1MrPShTPT0iIj8iIjoiLCIpK207dGhpcy5fb1NlbGVjdGVkUHJvcGVydHlOYW1lc1ttXT10cnVlfX1pZihlLnRleHQ9PXRydWUmJmMuZ2V0Rm9ybWF0dGVkVmFsdWVQcm9wZXJ0eSgpKXttPWMuZ2V0Rm9ybWF0dGVkVmFsdWVQcm9wZXJ0eSgpLm5hbWU7aWYodGhpcy5fb1NlbGVjdGVkUHJvcGVydHlOYW1lc1ttXT09dW5kZWZpbmVkKXtTKz0oUz09IiI/IiI6IiwiKSttO3RoaXMuX29TZWxlY3RlZFByb3BlcnR5TmFtZXNbbV09dHJ1ZX19aWYoZS51bml0PT10cnVlJiZjLmdldFVuaXRQcm9wZXJ0eSgpKXttPWMuZ2V0VW5pdFByb3BlcnR5KCkubmFtZTtpZih0aGlzLl9vU2VsZWN0ZWRQcm9wZXJ0eU5hbWVzW21dPT11bmRlZmluZWQpe1MrPShTPT0iIj8iIjoiLCIpK207dGhpcy5fb1NlbGVjdGVkUHJvcGVydHlOYW1lc1ttXT10cnVlfX19aWYodGhpcy5fYkluY2x1ZGVFbnRpdHlLZXkpe3ZhciBrPXRoaXMuX29RdWVyeVJlc3VsdC5nZXRFbnRpdHlUeXBlKCkuZ2V0VHlwZURlc2NyaXB0aW9uKCkua2V5LnByb3BlcnR5UmVmO2Zvcih2YXIgaT0tMSxLO0s9a1srK2ldOyl7Uys9KFM9PSIiPyIiOiIsIikrSy5uYW1lfX1zPShTP1M6bnVsbCk7YnJlYWt9Y2FzZSIkZmlsdGVyIjp7dmFyIGY9bnVsbDtpZih0aGlzLl9vRmlsdGVyRXhwcmVzc2lvbilmPXRoaXMuX29GaWx0ZXJFeHByZXNzaW9uLmdldFVSSUZpbHRlck9wdGlvblZhbHVlKCk7cz0oZj9mOm51bGwpO2JyZWFrfWNhc2UiJG9yZGVyYnkiOnt2YXIgZz1udWxsO2lmKHRoaXMuX29Tb3J0RXhwcmVzc2lvbilnPXRoaXMuX29Tb3J0RXhwcmVzc2lvbi5nZXRVUklPcmRlckJ5T3B0aW9uVmFsdWUodGhpcy5fb1NlbGVjdGVkUHJvcGVydHlOYW1lcyk7cz0oZz9nOm51bGwpO2JyZWFrfWNhc2UiJHRvcCI6e2lmKHRoaXMuX2lUb3BSZXF1ZXN0T3B0aW9uIT09bnVsbCl7cz10aGlzLl9pVG9wUmVxdWVzdE9wdGlvbn1icmVha31jYXNlIiRza2lwIjp7cz10aGlzLl9pU2tpcFJlcXVlc3RPcHRpb247YnJlYWt9Y2FzZSIkaW5saW5lY291bnQiOntzPSh0aGlzLl9iSW5jbHVkZUNvdW50PT10cnVlPyJhbGxwYWdlcyI6bnVsbCk7YnJlYWt9ZGVmYXVsdDpicmVha31yZXR1cm4gc30sZ2V0VVJJVG9RdWVyeVJlc3VsdEVudHJpZXM6ZnVuY3Rpb24ocyxyKXt2YXIgcj10aGlzLmdldFVSSVRvUXVlcnlSZXN1bHRFbnRpdHlTZXQocyk7dGhpcy5nZXRGaWx0ZXJFeHByZXNzaW9uKCkuaXNWYWxpZCgpO3ZhciBTPXRoaXMuZ2V0VVJJUXVlcnlPcHRpb25WYWx1ZSgiJHNlbGVjdCIpO3ZhciBmPXRoaXMuZ2V0VVJJUXVlcnlPcHRpb25WYWx1ZSgiJGZpbHRlciIpO3ZhciBhPXRoaXMuZ2V0VVJJUXVlcnlPcHRpb25WYWx1ZSgiJG9yZGVyYnkiKTt2YXIgdD10aGlzLmdldFVSSVF1ZXJ5T3B0aW9uVmFsdWUoIiR0b3AiKTt2YXIgYj10aGlzLmdldFVSSVF1ZXJ5T3B0aW9uVmFsdWUoIiRza2lwIik7dmFyIGk9dGhpcy5nZXRVUklRdWVyeU9wdGlvblZhbHVlKCIkaW5saW5lY291bnQiKTt2YXIgdT1yO3ZhciBRPWZhbHNlO2lmKFMpe3UrPSI/JHNlbGVjdD0iK1M7UT10cnVlfWlmKHRoaXMuX29GaWx0ZXJFeHByZXNzaW9uJiZmKXtpZighUSl7dSs9Ij8iO1E9dHJ1ZX1lbHNle3UrPSImIn11Kz0iJGZpbHRlcj0iK2Z9aWYodGhpcy5fb1NvcnRFeHByZXNzaW9uJiZhKXtpZighUSl7dSs9Ij8iO1E9dHJ1ZX1lbHNle3UrPSImIn11Kz0iJG9yZGVyYnk9IithfWlmKHRoaXMuX2lUb3BSZXF1ZXN0T3B0aW9uJiZ0KXtpZighUSl7dSs9Ij8iO1E9dHJ1ZX1lbHNle3UrPSImIn11Kz0iJHRvcD0iK3R9aWYodGhpcy5faVNraXBSZXF1ZXN0T3B0aW9uJiZiKXtpZighUSl7dSs9Ij8iO1E9dHJ1ZX1lbHNle3UrPSImIn11Kz0iJHNraXA9IitifWlmKHRoaXMuX2JJbmNsdWRlQ291bnQmJmkpe2lmKCFRKXt1Kz0iPyI7UT10cnVlfWVsc2V7dSs9IiYifXUrPSIkaW5saW5lY291bnQ9IitpfXJldHVybiB1fSxfb1F1ZXJ5UmVzdWx0Om51bGwsX29QYXJhbWV0ZXJpemF0aW9uUmVxdWVzdDpudWxsLF9zUmVzb3VyY2VQYXRoOm51bGwsX29BZ2dyZWdhdGlvbkxldmVsOm51bGwsX29NZWFzdXJlczpudWxsLF9iSW5jbHVkZUVudGl0eUtleTpudWxsLF9iSW5jbHVkZUNvdW50Om51bGwsX29GaWx0ZXJFeHByZXNzaW9uOm51bGwsX29Tb3J0RXhwcmVzc2lvbjpudWxsLF9pU2tpcFJlcXVlc3RPcHRpb246MCxfaVRvcFJlcXVlc3RPcHRpb246bnVsbH07by5QYXJhbWV0ZXJWYWx1ZVNldFJlcXVlc3Q9ZnVuY3Rpb24ocCl7dGhpcy5faW5pdChwKX07by5QYXJhbWV0ZXJWYWx1ZVNldFJlcXVlc3QucHJvdG90eXBlPXtfaW5pdDpmdW5jdGlvbihwKXt0aGlzLl9vUGFyYW1ldGVyPXA7dGhpcy5fb1ZhbHVlU2V0UmVzdWx0PW5ldyBPYmplY3QoKTt0aGlzLl9vRmlsdGVyRXhwcmVzc2lvbj1udWxsO3RoaXMuX29Tb3J0RXhwcmVzc2lvbj1udWxsfSxpbmNsdWRlUGFyYW1ldGVyVGV4dDpmdW5jdGlvbihpKXtpZihpIT1udWxsKXRoaXMuX29WYWx1ZVNldFJlc3VsdC50ZXh0PWl9LGdldEZpbHRlckV4cHJlc3Npb246ZnVuY3Rpb24oKXtpZih0aGlzLl9vRmlsdGVyRXhwcmVzc2lvbj09bnVsbCl7dmFyIGU9dGhpcy5fb1BhcmFtZXRlci5nZXRDb250YWluaW5nUGFyYW1ldGVyaXphdGlvbigpLmdldEVudGl0eVR5cGUoKTt2YXIgbT10aGlzLl9vUGFyYW1ldGVyLmdldENvbnRhaW5pbmdQYXJhbWV0ZXJpemF0aW9uKCkuZ2V0VGFyZ2V0UXVlcnlSZXN1bHQoKS5nZXRNb2RlbCgpO3RoaXMuX29GaWx0ZXJFeHByZXNzaW9uPW5ldyBvLkZpbHRlckV4cHJlc3Npb24obSxlLmdldFNjaGVtYSgpLGUpfXJldHVybiB0aGlzLl9vRmlsdGVyRXhwcmVzc2lvbn0sc2V0RmlsdGVyRXhwcmVzc2lvbjpmdW5jdGlvbihmKXt0aGlzLl9vRmlsdGVyRXhwcmVzc2lvbj1mfSxnZXRTb3J0RXhwcmVzc2lvbjpmdW5jdGlvbigpe2lmKHRoaXMuX29Tb3J0RXhwcmVzc2lvbj09bnVsbCl7dmFyIGU9dGhpcy5fb1BhcmFtZXRlci5nZXRDb250YWluaW5nUGFyYW1ldGVyaXphdGlvbigpLmdldEVudGl0eVR5cGUoKTt0aGlzLl9vU29ydEV4cHJlc3Npb249bmV3IG8uU29ydEV4cHJlc3Npb24oZS5nZXRNb2RlbCgpLGUuZ2V0U2NoZW1hKCksZSl9cmV0dXJuIHRoaXMuX29Tb3J0RXhwcmVzc2lvbn0sc2V0U29ydEV4cHJlc3Npb246ZnVuY3Rpb24ocyl7dGhpcy5fb1NvcnRFeHByZXNzaW9uPXN9LGdldFVSSVF1ZXJ5T3B0aW9uVmFsdWU6ZnVuY3Rpb24oUSl7dmFyIHM9bnVsbDtzd2l0Y2goUSl7Y2FzZSIkc2VsZWN0Ijp7dmFyIFM9IiI7Uys9KFM9PSIiPyIiOiIsIikrdGhpcy5fb1BhcmFtZXRlci5nZXRQcm9wZXJ0eSgpLm5hbWU7aWYodGhpcy5fb1ZhbHVlU2V0UmVzdWx0LnRleHQ9PXRydWUmJnRoaXMuX29QYXJhbWV0ZXIuZ2V0VGV4dFByb3BlcnR5KCkpUys9KFM9PSIiPyIiOiIsIikrdGhpcy5fb1BhcmFtZXRlci5nZXRUZXh0UHJvcGVydHkoKS5uYW1lO3M9KFM/UzpudWxsKTticmVha31jYXNlIiRmaWx0ZXIiOnt2YXIgZj1udWxsO2lmKHRoaXMuX29GaWx0ZXJFeHByZXNzaW9uKWY9dGhpcy5fb0ZpbHRlckV4cHJlc3Npb24uZ2V0VVJJRmlsdGVyT3B0aW9uVmFsdWUoKTtzPShmP2Y6bnVsbCk7YnJlYWt9Y2FzZSIkb3JkZXJieSI6e3ZhciBhPW51bGw7aWYodGhpcy5fb1NvcnRFeHByZXNzaW9uKWE9dGhpcy5fb1NvcnRFeHByZXNzaW9uLmdldFVSSU9yZGVyQnlPcHRpb25WYWx1ZSgpO3M9KGE/YTpudWxsKTticmVha31kZWZhdWx0OmJyZWFrfXJldHVybiBzfSxnZXRVUklUb1BhcmFtZXRlclZhbHVlU2V0RW50cmllczpmdW5jdGlvbihzKXt2YXIgcj1udWxsO3I9KHM/czoiIikrIi8iK3RoaXMuX29QYXJhbWV0ZXIuZ2V0Q29udGFpbmluZ1BhcmFtZXRlcml6YXRpb24oKS5nZXRFbnRpdHlTZXQoKS5nZXRRTmFtZSgpO3RoaXMuZ2V0RmlsdGVyRXhwcmVzc2lvbigpLmlzVmFsaWQoKTt2YXIgUz10aGlzLmdldFVSSVF1ZXJ5T3B0aW9uVmFsdWUoIiRzZWxlY3QiKTt2YXIgZj10aGlzLmdldFVSSVF1ZXJ5T3B0aW9uVmFsdWUoIiRmaWx0ZXIiKTt2YXIgYT10aGlzLmdldFVSSVF1ZXJ5T3B0aW9uVmFsdWUoIiRvcmRlcmJ5Iik7dmFyIHU9cjt2YXIgUT1mYWxzZTtpZihTKXt1Kz0iPyRzZWxlY3Q9IitTO1E9dHJ1ZX1pZih0aGlzLl9vRmlsdGVyRXhwcmVzc2lvbiYmZil7aWYoIVEpe3UrPSI/IjtRPXRydWV9ZWxzZSB1Kz0iJiI7dSs9IiRmaWx0ZXI9IitmfWlmKHRoaXMuX29Tb3J0RXhwcmVzc2lvbiYmYSl7aWYoIVEpe3UrPSI/IjtRPXRydWV9ZWxzZSB1Kz0iJiI7dSs9IiRvcmRlcmJ5PSIrYX1yZXR1cm4gdX0sX29QYXJhbWV0ZXI6bnVsbCxfb0ZpbHRlckV4cHJlc3Npb246bnVsbCxfb1NvcnRFeHByZXNzaW9uOm51bGwsX29WYWx1ZVNldFJlc3VsdDpudWxsfTtvLkRpbWVuc2lvbk1lbWJlclNldFJlcXVlc3Q9ZnVuY3Rpb24oZCxwLHUpe3RoaXMuX2luaXQoZCxwLHUpfTtvLkRpbWVuc2lvbk1lbWJlclNldFJlcXVlc3QucHJvdG90eXBlPXtfaW5pdDpmdW5jdGlvbihkLHAsdSl7dGhpcy5fb0RpbWVuc2lvbj1kO3RoaXMuX29QYXJhbWV0ZXJpemF0aW9uUmVxdWVzdD1wO3RoaXMuX2JVc2VNYXN0ZXJEYXRhPXU7dGhpcy5fb1ZhbHVlU2V0UmVzdWx0PW5ldyBPYmplY3QoKTt0aGlzLl9vRmlsdGVyRXhwcmVzc2lvbj1udWxsO3RoaXMuX29Tb3J0RXhwcmVzc2lvbj1udWxsO2lmKHRoaXMuX29QYXJhbWV0ZXJpemF0aW9uUmVxdWVzdCE9bnVsbCYmdGhpcy5fYlVzZU1hc3RlckRhdGE9PXRydWUpdGhyb3ciTElNSVRBVElPTjogcGFyYW1ldGVyaXplZCBtYXN0ZXIgZGF0YSBlbnRpdHkgc2V0cyBhcmUgbm90IHlldCBpbXBsZW1lbnRlZCI7aWYodGhpcy5fYlVzZU1hc3RlckRhdGEpe3RoaXMuX29FbnRpdHlTZXQ9dGhpcy5fb0RpbWVuc2lvbi5nZXRNYXN0ZXJEYXRhRW50aXR5U2V0KCl9ZWxzZXt0aGlzLl9vRW50aXR5U2V0PXRoaXMuX29EaW1lbnNpb24uZ2V0Q29udGFpbmluZ1F1ZXJ5UmVzdWx0KCkuZ2V0RW50aXR5U2V0KCk7aWYodGhpcy5fb0RpbWVuc2lvbi5nZXRDb250YWluaW5nUXVlcnlSZXN1bHQoKS5nZXRQYXJhbWV0ZXJpemF0aW9uKCkmJiF0aGlzLl9vUGFyYW1ldGVyaXphdGlvblJlcXVlc3QpdGhyb3ciTWlzc2luZyBwYXJhbWV0ZXJpemF0aW9uIHJlcXVlc3QifX0sc2V0UGFyYW1ldGVyaXphdGlvblJlcXVlc3Q6ZnVuY3Rpb24ocCl7dGhpcy5fb1BhcmFtZXRlcml6YXRpb25SZXF1ZXN0PXB9LGluY2x1ZGVEaW1lbnNpb25UZXh0QXR0cmlidXRlczpmdW5jdGlvbihpLEkpe3RoaXMuX29WYWx1ZVNldFJlc3VsdC50ZXh0PXt0ZXh0OmZhbHNlLGF0dHJpYnV0ZXM6ZmFsc2V9O2lmKGk9PXRydWUpdGhpcy5fb1ZhbHVlU2V0UmVzdWx0LnRleHQ9dHJ1ZTtpZihJPT10cnVlKXRoaXMuX29WYWx1ZVNldFJlc3VsdC5hdHRyaWJ1dGVzPXRydWV9LGdldEZpbHRlckV4cHJlc3Npb246ZnVuY3Rpb24oKXtpZih0aGlzLl9vRmlsdGVyRXhwcmVzc2lvbj09bnVsbCl7dmFyIGU9dGhpcy5fb0VudGl0eVNldC5nZXRFbnRpdHlUeXBlKCk7dmFyIG09dGhpcy5fb0RpbWVuc2lvbi5nZXRDb250YWluaW5nUXVlcnlSZXN1bHQoKS5nZXRNb2RlbCgpO3RoaXMuX29GaWx0ZXJFeHByZXNzaW9uPW5ldyBvLkZpbHRlckV4cHJlc3Npb24obSxlLmdldFNjaGVtYSgpLGUpfXJldHVybiB0aGlzLl9vRmlsdGVyRXhwcmVzc2lvbn0sc2V0RmlsdGVyRXhwcmVzc2lvbjpmdW5jdGlvbihmKXt0aGlzLl9vRmlsdGVyRXhwcmVzc2lvbj1mfSxnZXRTb3J0RXhwcmVzc2lvbjpmdW5jdGlvbigpe2lmKHRoaXMuX29Tb3J0RXhwcmVzc2lvbj09bnVsbCl7dGhpcy5fb1NvcnRFeHByZXNzaW9uPW5ldyBvLlNvcnRFeHByZXNzaW9uKHRoaXMuX29FbnRpdHlUeXBlLmdldE1vZGVsKCksdGhpcy5fb0VudGl0eVR5cGUuZ2V0U2NoZW1hKCksdGhpcy5fb0VudGl0eVR5cGUpfXJldHVybiB0aGlzLl9vU29ydEV4cHJlc3Npb259LHNldFNvcnRFeHByZXNzaW9uOmZ1bmN0aW9uKHMpe3RoaXMuX29Tb3J0RXhwcmVzc2lvbj1zfSxzZXRSZXF1ZXN0T3B0aW9uczpmdW5jdGlvbihpKXtpZihpIT1udWxsKXRoaXMuX2JJbmNsdWRlQ291bnQ9aX0sc2V0UmVzdWx0UGFnZUJvdW5kYXJpZXM6ZnVuY3Rpb24ocyxlKXtpZihzIT1udWxsJiZ0eXBlb2YgcyE9PSJudW1iZXIiKXt0aHJvdyJTdGFydCB2YWx1ZSBtdXN0IGJlIG51bGwgb3IgbnVtZXJpYyJ9aWYoZSE9PW51bGwmJnR5cGVvZiBlIT09Im51bWJlciIpe3Rocm93IkVuZCB2YWx1ZSBtdXN0IGJlIG51bGwgb3IgbnVtZXJpYyJ9aWYocz09bnVsbClzPTE7aWYoczwxfHxzPihlPT1udWxsP3M6ZSkpe3Rocm93IkludmFsaWQgdmFsdWVzIGZvciByZXF1ZXN0ZWQgcGFnZSBib3VuZGFyaWVzIn10aGlzLl9pU2tpcFJlcXVlc3RPcHRpb249KHM+MSk/cy0xOm51bGw7dGhpcy5faVRvcFJlcXVlc3RPcHRpb249KGUhPW51bGwpPyhlLXMrMSk6bnVsbH0sZ2V0UmVzdWx0UGFnZUJvdW5kYXJpZXM6ZnVuY3Rpb24oKXtyZXR1cm57c3RhcnQ6KHRoaXMuX2lTa2lwUmVxdWVzdE9wdGlvbj09bnVsbCk/MTp0aGlzLl9pU2tpcFJlcXVlc3RPcHRpb24sZW5kOih0aGlzLl9pVG9wUmVxdWVzdE9wdGlvbiE9bnVsbCk/KHRoaXMuX2lTa2lwUmVxdWVzdE9wdGlvbj09bnVsbCk/MTp0aGlzLl9pU2tpcFJlcXVlc3RPcHRpb24rdGhpcy5faVRvcFJlcXVlc3RPcHRpb246bnVsbH19LGdldFVSSVF1ZXJ5T3B0aW9uVmFsdWU6ZnVuY3Rpb24oUSl7dmFyIHM9bnVsbDtzd2l0Y2goUSl7Y2FzZSIkc2VsZWN0Ijp7dmFyIFM9IiI7dmFyIGU9dGhpcy5fb0VudGl0eVNldC5nZXRFbnRpdHlUeXBlKCk7dmFyIGs9ZS5nZXRLZXlQcm9wZXJ0aWVzKCk7dmFyIEs9W107aWYodGhpcy5fYlVzZU1hc3RlckRhdGEpe2Zvcih2YXIgaT0tMSxhO2E9a1srK2ldOyl7Uys9KFM9PSIiPyIiOiIsIikrYTt2YXIgYj1lLmdldFRleHRQcm9wZXJ0eU9mUHJvcGVydHkoYSk7aWYoYil7aWYodGhpcy5fb1ZhbHVlU2V0UmVzdWx0LnRleHQ9PXRydWUpUys9IiwiK2IubmFtZTtLLnB1c2goYi5uYW1lKX19fWVsc2V7Uys9KFM9PSIiPyIiOiIsIikrdGhpcy5fb0RpbWVuc2lvbi5nZXRLZXlQcm9wZXJ0eSgpLm5hbWU7aWYodGhpcy5fb1ZhbHVlU2V0UmVzdWx0LnRleHQ9PXRydWUmJnRoaXMuX29EaW1lbnNpb24uZ2V0VGV4dFByb3BlcnR5KCkpUys9KFM9PSIiPyIiOiIsIikrdGhpcy5fb0RpbWVuc2lvbi5nZXRUZXh0UHJvcGVydHkoKS5uYW1lfWlmKHRoaXMuX29WYWx1ZVNldFJlc3VsdC5hdHRyaWJ1dGVzKXtpZih0aGlzLl9iVXNlTWFzdGVyRGF0YSl7dmFyIEE9ZS5nZXRQcm9wZXJ0aWVzKCk7Zm9yKHZhciBwIGluIEEpe3ZhciBJPWZhbHNlO2Zvcih2YXIgaT0tMSxhO2E9a1srK2ldOyl7aWYocD09YSl7ST10cnVlO2JyZWFrfX1pZihJKWNvbnRpbnVlO2Zvcih2YXIgaT0tMSxjO2M9S1srK2ldOyl7aWYocD09Yyl7ST10cnVlO2JyZWFrfX1pZighSSlTKz0iLCIrcH19ZWxzZXt2YXIgZD10aGlzLl9vRGltZW5zaW9uLmdldEFsbEF0dHJpYnV0ZU5hbWVzKCk7Zm9yKHZhciBpPS0xLGY7Zj1kWysraV07KXtTKz0oUz09IiI/IiI6IiwiKSt0aGlzLl9vRGltZW5zaW9uLmZpbmRBdHRyaWJ1dGVCeU5hbWUoZikuZ2V0TmFtZSgpfX19cz0oUz9TOm51bGwpO2JyZWFrfWNhc2UiJGZpbHRlciI6e3ZhciBGPW51bGw7aWYodGhpcy5fb0ZpbHRlckV4cHJlc3Npb24pRj10aGlzLl9vRmlsdGVyRXhwcmVzc2lvbi5nZXRVUklGaWx0ZXJPcHRpb25WYWx1ZSgpO3M9KEY/RjpudWxsKTticmVha31jYXNlIiRvcmRlcmJ5Ijp7dmFyIGc9bnVsbDtpZih0aGlzLl9vU29ydEV4cHJlc3Npb24pZz10aGlzLl9vU29ydEV4cHJlc3Npb24uZ2V0VVJJT3JkZXJCeU9wdGlvblZhbHVlKCk7cz0oZz9nOm51bGwpO2JyZWFrfWNhc2UiJHRvcCI6e2lmKHRoaXMuX2lUb3BSZXF1ZXN0T3B0aW9uIT09bnVsbCl7cz10aGlzLl9pVG9wUmVxdWVzdE9wdGlvbn1icmVha31jYXNlIiRza2lwIjp7cz10aGlzLl9pU2tpcFJlcXVlc3RPcHRpb247YnJlYWt9Y2FzZSIkaW5saW5lY291bnQiOntzPSh0aGlzLl9iSW5jbHVkZUNvdW50PT10cnVlPyJhbGxwYWdlcyI6bnVsbCk7YnJlYWt9ZGVmYXVsdDpicmVha31yZXR1cm4gc30sZ2V0VVJJVG9EaW1lbnNpb25NZW1iZXJFbnRpdHlTZXQ6ZnVuY3Rpb24ocyl7dmFyIHI9bnVsbDtpZighdGhpcy5fYlVzZU1hc3RlckRhdGEmJnRoaXMuX29QYXJhbWV0ZXJpemF0aW9uUmVxdWVzdCl7cj10aGlzLl9vUGFyYW1ldGVyaXphdGlvblJlcXVlc3QuZ2V0VVJJVG9QYXJhbWV0ZXJpemF0aW9uRW50cnkocykrIi8iK3RoaXMuX29EaW1lbnNpb24uZ2V0Q29udGFpbmluZ1F1ZXJ5UmVzdWx0KCkuZ2V0UGFyYW1ldGVyaXphdGlvbigpLmdldE5hdmlnYXRpb25Qcm9wZXJ0eVRvUXVlcnlSZXN1bHQoKX1lbHNle3I9KHM/czoiIikrIi8iK3RoaXMuX29FbnRpdHlTZXQuZ2V0UU5hbWUoKX1yZXR1cm4gcn0sZ2V0VVJJVG9EaW1lbnNpb25NZW1iZXJFbnRyaWVzOmZ1bmN0aW9uKHMpe3ZhciByPXRoaXMuZ2V0VVJJVG9EaW1lbnNpb25NZW1iZXJFbnRpdHlTZXQocyk7dGhpcy5nZXRGaWx0ZXJFeHByZXNzaW9uKCkuaXNWYWxpZCgpO3ZhciBTPXRoaXMuZ2V0VVJJUXVlcnlPcHRpb25WYWx1ZSgiJHNlbGVjdCIpO3ZhciBmPXRoaXMuZ2V0VVJJUXVlcnlPcHRpb25WYWx1ZSgiJGZpbHRlciIpO3ZhciBhPXRoaXMuZ2V0VVJJUXVlcnlPcHRpb25WYWx1ZSgiJG9yZGVyYnkiKTt2YXIgdD10aGlzLmdldFVSSVF1ZXJ5T3B0aW9uVmFsdWUoIiR0b3AiKTt2YXIgYj10aGlzLmdldFVSSVF1ZXJ5T3B0aW9uVmFsdWUoIiRza2lwIik7dmFyIGk9dGhpcy5nZXRVUklRdWVyeU9wdGlvblZhbHVlKCIkaW5saW5lY291bnQiKTt2YXIgdT1yO3ZhciBRPWZhbHNlO2lmKFMpe3UrPSI/JHNlbGVjdD0iK1M7UT10cnVlfWlmKHRoaXMuX29GaWx0ZXJFeHByZXNzaW9uJiZmKXtpZighUSl7dSs9Ij8iO1E9dHJ1ZX1lbHNlIHUrPSImIjt1Kz0iJGZpbHRlcj0iK2Z9aWYodGhpcy5fb1NvcnRFeHByZXNzaW9uJiZhKXtpZighUSl7dSs9Ij8iO1E9dHJ1ZX1lbHNlIHUrPSImIjt1Kz0iJG9yZGVyYnk9IithfWlmKHRoaXMuX2lUb3BSZXF1ZXN0T3B0aW9uJiZ0KXtpZighUSl7dSs9Ij8iO1E9dHJ1ZX1lbHNle3UrPSImIn11Kz0iJHRvcD0iK3R9aWYodGhpcy5faVNraXBSZXF1ZXN0T3B0aW9uJiZiKXtpZighUSl7dSs9Ij8iO1E9dHJ1ZX1lbHNle3UrPSImIn11Kz0iJHNraXA9IitifWlmKHRoaXMuX2JJbmNsdWRlQ291bnQmJmkpe2lmKCFRKXt1Kz0iPyI7UT10cnVlfWVsc2V7dSs9IiYifXUrPSIkaW5saW5lY291bnQ9IitpfXJldHVybiB1fSxfb0RpbWVuc2lvbjpudWxsLF9vUGFyYW1ldGVyaXphdGlvblJlcXVlc3Q6bnVsbCxfb0VudGl0eVNldDpudWxsLF9iVXNlTWFzdGVyRGF0YTpmYWxzZSxfb0ZpbHRlckV4cHJlc3Npb246bnVsbCxfb1NvcnRFeHByZXNzaW9uOm51bGwsX29WYWx1ZVNldFJlc3VsdDpudWxsLF9iSW5jbHVkZUNvdW50Om51bGwsX2lTa2lwUmVxdWVzdE9wdGlvbjowLF9pVG9wUmVxdWVzdE9wdGlvbjpudWxsfTtyZXR1cm4gb30sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5tb2RlbC5vZGF0YS5Db3VudE1vZGUnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkubW9kZWwub2RhdGEuQ291bnRNb2RlJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL21vZGVsL29kYXRhL0NvdW50TW9kZSIsWydqcXVlcnkuc2FwLmdsb2JhbCddLGZ1bmN0aW9uKHEpeyJ1c2Ugc3RyaWN0Ijt2YXIgQz17UmVxdWVzdDoiUmVxdWVzdCIsSW5saW5lOiJJbmxpbmUiLEJvdGg6IkJvdGgiLE5vbmU6Ik5vbmUifTtyZXR1cm4gQ30sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ2pxdWVyeS5zYXAuYWN0Jykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnanF1ZXJ5LnNhcC5hY3QnKTtzYXAudWkuZGVmaW5lKCJqcXVlcnkuc2FwLmFjdCIsWydqcXVlcnkuc2FwLmdsb2JhbCddLGZ1bmN0aW9uKHEpeyJ1c2Ugc3RyaWN0IjtpZih0eXBlb2Ygd2luZG93LmpRdWVyeS5zYXAuYWN0PT09Im9iamVjdCJ8fHR5cGVvZiB3aW5kb3cualF1ZXJ5LnNhcC5hY3Q9PT0iZnVuY3Rpb24iKXtyZXR1cm59dmFyIF89e30sYT10cnVlLGI9bnVsbCxjPTEwMDAwLGQ9ISF3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcixlPVtdLGY9W10sZz1mYWxzZSxoPW51bGw7ZnVuY3Rpb24gaigpe2I9bnVsbDtpZihnKXtrKCk7cmV0dXJufWE9ZmFsc2U7aC5vYnNlcnZlKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCx7Y2hpbGRMaXN0OnRydWUsYXR0cmlidXRlczp0cnVlLHN1YnRyZWU6dHJ1ZSxjaGFyYWN0ZXJEYXRhOnRydWV9KX07ZnVuY3Rpb24gaygpe2lmKCFhKXthPXRydWU7bChlKTtoLmRpc2Nvbm5lY3QoKX1pZihiKXtnPXRydWV9ZWxzZXtiPXNldFRpbWVvdXQoaixjKTtnPWZhbHNlfX07ZnVuY3Rpb24gbChMKXtpZihMLmxlbmd0aD09MCl7cmV0dXJufXZhciBtPUwuc2xpY2UoKTtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dmFyIEk7Zm9yKHZhciBpPTAsbj1tLmxlbmd0aDtpPG47aSsrKXtJPW1baV07SS5mRnVuY3Rpb24uY2FsbChJLm9MaXN0ZW5lcnx8d2luZG93KX19LDApfTtfLmF0dGFjaEFjdGl2YXRlPWZ1bmN0aW9uKEYsTCl7ZS5wdXNoKHtvTGlzdGVuZXI6TCxmRnVuY3Rpb246Rn0pfTtfLmRldGFjaEFjdGl2YXRlPWZ1bmN0aW9uKEYsTCl7Zm9yKHZhciBpPTAsbT1lLmxlbmd0aDtpPG07aSsrKXtpZihlW2ldLmZGdW5jdGlvbj09PUYmJmVbaV0ub0xpc3RlbmVyPT09TCl7ZS5zcGxpY2UoaSwxKTticmVha319fTtfLmlzQWN0aXZlPSFkP2Z1bmN0aW9uKCl7cmV0dXJuIHRydWV9OmZ1bmN0aW9uKCl7cmV0dXJuIGF9O18ucmVmcmVzaD0hZD9mdW5jdGlvbigpe306aztpZihkKXt2YXIgRT1bInJlc2l6ZSIsIm9yaWVudGF0aW9uY2hhbmdlIiwibW91c2Vtb3ZlIiwibW91c2Vkb3duIiwibW91c2V1cCIsInRvdWNoc3RhcnQiLCJ0b3VjaG1vdmUiLCJ0b3VjaGVuZCIsInRvdWNoY2FuY2VsIiwicGFzdGUiLCJjdXQiLCJrZXlkb3duIiwia2V5dXAiLCJET01Nb3VzZVNjcm9sbCIsIm1vdXNld2hlZWwiXTtmb3IodmFyIGk9MDtpPEUubGVuZ3RoO2krKyl7d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoRVtpXSxfLnJlZnJlc2gsdHJ1ZSl9aWYod2luZG93Lk11dGF0aW9uT2JzZXJ2ZXIpe2g9bmV3IHdpbmRvdy5NdXRhdGlvbk9ic2VydmVyKF8ucmVmcmVzaCl9ZWxzZSBpZih3aW5kb3cuV2ViS2l0TXV0YXRpb25PYnNlcnZlcil7aD1uZXcgd2luZG93LldlYktpdE11dGF0aW9uT2JzZXJ2ZXIoXy5yZWZyZXNoKX1lbHNle2g9e29ic2VydmU6ZnVuY3Rpb24oKXtkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigiRE9NU3VidHJlZU1vZGlmaWVkIixfLnJlZnJlc2gpfSxkaXNjb25uZWN0OmZ1bmN0aW9uKCl7ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoIkRPTVN1YnRyZWVNb2RpZmllZCIsXy5yZWZyZXNoKX19fWsoKX1xLnNhcC5hY3Q9XztyZXR1cm4gcX0sZmFsc2UpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdqcXVlcnkuc2FwLmRvbScpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ2pxdWVyeS5zYXAuZG9tJyk7c2FwLnVpLmRlZmluZSgianF1ZXJ5LnNhcC5kb20iLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvRGV2aWNlJ10sZnVuY3Rpb24ocSxEKXsidXNlIHN0cmljdCI7dmFyIGQ9ZnVuY3Rpb24oSSx3KXtpZighdyl7dz13aW5kb3d9aWYoIUl8fEk9PSIiKXtyZXR1cm4gbnVsbH12YXIgbz13LmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKEkpO2lmKG8mJm8uaWQ9PUkpe3JldHVybiBvfXZhciByPXcuZG9jdW1lbnQuZ2V0RWxlbWVudHNCeU5hbWUoSSk7Zm9yKHZhciBpPTA7aTxyLmxlbmd0aDtpKyspe289cltpXTtpZihvJiZvLmlkPT1JKXtyZXR1cm4gb319cmV0dXJuIG51bGx9O3Euc2FwLmRvbUJ5SWQ9ISFELmJyb3dzZXIuaW50ZXJuZXRfZXhwbG9yZXImJkQuYnJvd3Nlci52ZXJzaW9uPDg/ZDpmdW5jdGlvbiBkb21CeUlkKGksdyl7cmV0dXJuIGk/KHd8fHdpbmRvdykuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaSk6bnVsbH07cS5zYXAuYnlJZD1mdW5jdGlvbiBieUlkKGksYyl7dmFyIGU9IiI7aWYoaSl7ZT0iIyIraS5yZXBsYWNlKC8oOnxcLikvZywnXFwkMScpfXJldHVybiBxKGUsYyl9O3Euc2FwLmZvY3VzPWZ1bmN0aW9uIGZvY3VzKG8pe2lmKCFvKXtyZXR1cm59dHJ5e28uZm9jdXMoKX1jYXRjaChlKXt2YXIgaT0obyYmby5pZCk/IiAoSUQ6ICciK28uaWQrIicpIjoiIjtxLnNhcC5sb2cud2FybmluZygiRXJyb3Igd2hlbiB0cnlpbmcgdG8gZm9jdXMgYSBET00gZWxlbWVudCIraSsiOiAiK2UubWVzc2FnZSk7cmV0dXJuIGZhbHNlfXJldHVybiB0cnVlfTtxLmZuLmN1cnNvclBvcz1mdW5jdGlvbiBjdXJzb3JQb3MocCl7dmFyIGw9YXJndW1lbnRzLmxlbmd0aCx0LEwsVCxzO1Q9dGhpcy5wcm9wKCJ0YWdOYW1lIik7cz10aGlzLnByb3AoInR5cGUiKTtpZih0aGlzLmxlbmd0aD09PTEmJigoVD09IklOUFVUIiYmKHM9PSJ0ZXh0Inx8cz09InBhc3N3b3JkInx8cz09InNlYXJjaCIpKXx8VD09IlRFWFRBUkVBIikpe3ZhciBvPXRoaXMuZ2V0KDApO2lmKGw+MCl7aWYodHlwZW9mKG8uc2VsZWN0aW9uU3RhcnQpPT0ibnVtYmVyIil7by5mb2N1cygpO28uc2VsZWN0aW9uU3RhcnQ9cDtvLnNlbGVjdGlvbkVuZD1wfWVsc2UgaWYoby5jcmVhdGVUZXh0UmFuZ2Upe3Q9by5jcmVhdGVUZXh0UmFuZ2UoKTt2YXIgbT1vLnZhbHVlLmxlbmd0aDtpZihwPDB8fHA+bSl7cD1tfWlmKHQpe3QuY29sbGFwc2UoKTt0Lm1vdmVFbmQoImNoYXJhY3RlciIscCk7dC5tb3ZlU3RhcnQoImNoYXJhY3RlciIscCk7dC5zZWxlY3QoKX19cmV0dXJuIHRoaXN9ZWxzZXtpZih0eXBlb2Yoby5zZWxlY3Rpb25TdGFydCk9PSJudW1iZXIiKXtyZXR1cm4gby5zZWxlY3Rpb25TdGFydH1lbHNlIGlmKG8uY3JlYXRlVGV4dFJhbmdlKXt0PXdpbmRvdy5kb2N1bWVudC5zZWxlY3Rpb24uY3JlYXRlUmFuZ2UoKTt2YXIgYz10LmR1cGxpY2F0ZSgpO2lmKG8udGFnTmFtZT09IlRFWFRBUkVBIil7Yy5tb3ZlVG9FbGVtZW50VGV4dChvKTt2YXIgQz1jLmR1cGxpY2F0ZSgpO0w9Yy50ZXh0Lmxlbmd0aDtDLm1vdmVTdGFydCgiY2hhcmFjdGVyIixMKTtpZihDLmluUmFuZ2UodCkpe1M9TH1lbHNle3ZhciBpPUw7dmFyIFM9MDt3aGlsZShMPjEpe2k9TWF0aC5yb3VuZChMLzIpO1M9UytpO0M9Yy5kdXBsaWNhdGUoKTtDLm1vdmVTdGFydCgiY2hhcmFjdGVyIixTKTtpZihDLmluUmFuZ2UodCkpe0w9TC1pfWVsc2V7Uz1TLWk7TD1pfX19cmV0dXJuIFN9ZWxzZSBpZihjLnBhcmVudEVsZW1lbnQoKT09PW8pe2MuY29sbGFwc2UoKTt2YXIgTD1vLnZhbHVlLmxlbmd0aDtjLm1vdmVTdGFydCgnY2hhcmFjdGVyJywtTCk7cmV0dXJuIGMudGV4dC5sZW5ndGh9fXJldHVybi0xfX1lbHNle3JldHVybiB0aGlzfX07cS5mbi5zZWxlY3RUZXh0PWZ1bmN0aW9uIHNlbGVjdFRleHQocyxFKXt2YXIgbz10aGlzLmdldCgwKTtpZighbyl7cmV0dXJuIHRoaXN9dHJ5e2lmKHR5cGVvZihvLnNlbGVjdGlvblN0YXJ0KT09PSJudW1iZXIiKXtpZihzPDApe3M9MH1pZihFPm8udmFsdWUubGVuZ3RoKXtFPW8udmFsdWUubGVuZ3RofWlmKCFFfHxzPkUpe3M9MDtFPTB9by5zZWxlY3Rpb25TdGFydD1zO28uc2VsZWN0aW9uRW5kPUV9ZWxzZSBpZihvLmNyZWF0ZVRleHRSYW5nZSl7dmFyIHQ9by5jcmVhdGVUZXh0UmFuZ2UoKTt0LmNvbGxhcHNlKCk7dC5tb3ZlU3RhcnQoJ2NoYXJhY3Rlcicscyk7dC5tb3ZlRW5kKCdjaGFyYWN0ZXInLEUtcyk7dC5zZWxlY3QoKX19Y2F0Y2goZSl7fXJldHVybiB0aGlzfTtxLmZuLm91dGVySFRNTD1mdW5jdGlvbiBvdXRlckhUTUwoKXt2YXIgbz10aGlzLmdldCgwKTtpZihvJiZvLm91dGVySFRNTCl7cmV0dXJuIHEudHJpbShvLm91dGVySFRNTCl9ZWxzZXt2YXIgYT10aGlzWzBdP3RoaXNbMF0ub3duZXJEb2N1bWVudDpkb2N1bWVudDt2YXIgYj1hLmNyZWF0ZUVsZW1lbnQoImRpdiIpO2IuYXBwZW5kQ2hpbGQoby5jbG9uZU5vZGUodHJ1ZSkpO3JldHVybiBiLmlubmVySFRNTH19O3Euc2FwLmNvbnRhaW5zT3JFcXVhbHM9ZnVuY3Rpb24gY29udGFpbnNPckVxdWFscyhvLGEpe2lmKGEmJm8mJmEhPWRvY3VtZW50JiZhIT13aW5kb3cpe3JldHVybihvPT09YSl8fHEuY29udGFpbnMobyxhKX1yZXR1cm4gZmFsc2V9O3EuZm4ucmVjdD1mdW5jdGlvbiByZWN0KCl7dmFyIG89dGhpcy5nZXQoMCk7aWYobyl7aWYoby5nZXRCb3VuZGluZ0NsaWVudFJlY3Qpe3ZhciBjPW8uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7dmFyIHI9e3RvcDpjLnRvcCxsZWZ0OmMubGVmdCx3aWR0aDpjLnJpZ2h0LWMubGVmdCxoZWlnaHQ6Yy5ib3R0b20tYy50b3B9O3ZhciB3PXEuc2FwLm93bmVyV2luZG93KG8pO3IubGVmdCs9cSh3KS5zY3JvbGxMZWZ0KCk7ci50b3ArPXEodykuc2Nyb2xsVG9wKCk7cmV0dXJuIHJ9ZWxzZXtyZXR1cm57dG9wOjEwLGxlZnQ6MTAsd2lkdGg6by5vZmZzZXRXaWR0aCxoZWlnaHQ6by5vZmZzZXRXaWR0aH19fXJldHVybiBudWxsfTtxLmZuLnJlY3RDb250YWlucz1mdW5jdGlvbiByZWN0Q29udGFpbnMocCxQKXt2YXIgcj10aGlzLnJlY3QoKTtpZihyKXtyZXR1cm4gcD49ci5sZWZ0JiZwPD1yLmxlZnQrci53aWR0aCYmUD49ci50b3AmJlA8PXIudG9wK3IuaGVpZ2h0fXJldHVybiBmYWxzZX07cS5mbi5oYXNUYWJJbmRleD1mdW5jdGlvbiBoYXNUYWJJbmRleCgpe3ZhciB0PXRoaXMucHJvcCgidGFiSW5kZXgiKTtpZih0aGlzLmF0dHIoImRpc2FibGVkIikmJiF0aGlzLmF0dHIoInRhYmluZGV4Iikpe3Q9LTF9cmV0dXJuIWlzTmFOKHQpJiZ0Pj0wfTtxLmZuLmZpcnN0Rm9jdXNhYmxlRG9tUmVmPWZ1bmN0aW9uIGZpcnN0Rm9jdXNhYmxlRG9tUmVmKCl7dmFyIGM9dGhpcy5nZXQoMCk7dmFyIGE9ZnVuY3Rpb24oaSl7cmV0dXJuIHEodGhpcykuY3NzKCJ2aXNpYmlsaXR5Iik9PSJoaWRkZW4ifTtpZighY3x8cShjKS5pcygnOmhpZGRlbicpfHxxKGMpLmZpbHRlcihhKS5sZW5ndGg9PTEpe3JldHVybiBudWxsfXZhciBDPWMuZmlyc3RDaGlsZCxvPW51bGw7d2hpbGUoQyl7aWYoQy5ub2RlVHlwZT09MSYmcShDKS5pcygnOnZpc2libGUnKSl7aWYocShDKS5oYXNUYWJJbmRleCgpKXtyZXR1cm4gQ31pZihDLmNoaWxkTm9kZXMpe289cShDKS5maXJzdEZvY3VzYWJsZURvbVJlZigpO2lmKG8pe3JldHVybiBvfX19Qz1DLm5leHRTaWJsaW5nfXJldHVybiBudWxsfTtxLmZuLmxhc3RGb2N1c2FibGVEb21SZWY9ZnVuY3Rpb24gbGFzdEZvY3VzYWJsZURvbVJlZigpe3ZhciBjPXRoaXMuZ2V0KDApO3ZhciBhPWZ1bmN0aW9uKGkpe3JldHVybiBxKHRoaXMpLmNzcygidmlzaWJpbGl0eSIpPT0iaGlkZGVuIn07aWYoIWN8fHEoYykuaXMoJzpoaWRkZW4nKXx8cShjKS5maWx0ZXIoYSkubGVuZ3RoPT0xKXtyZXR1cm4gbnVsbH12YXIgQz1jLmxhc3RDaGlsZCxvPW51bGw7d2hpbGUoQyl7aWYoQy5ub2RlVHlwZT09MSYmcShDKS5pcygnOnZpc2libGUnKSl7aWYoQy5jaGlsZE5vZGVzKXtvPXEoQykubGFzdEZvY3VzYWJsZURvbVJlZigpO2lmKG8pe3JldHVybiBvfX1pZihxKEMpLmhhc1RhYkluZGV4KCkpe3JldHVybiBDfX1DPUMucHJldmlvdXNTaWJsaW5nfXJldHVybiBudWxsfTtxLmZuLnNjcm9sbExlZnRSVEw9ZnVuY3Rpb24gc2Nyb2xsTGVmdFJUTChwKXt2YXIgbz10aGlzLmdldCgwKTtpZihvKXtpZihwPT09dW5kZWZpbmVkKXtpZighIUQuYnJvd3Nlci5pbnRlcm5ldF9leHBsb3Jlcil7cmV0dXJuIG8uc2Nyb2xsV2lkdGgtby5zY3JvbGxMZWZ0LW8uY2xpZW50V2lkdGh9ZWxzZSBpZighIUQuYnJvd3Nlci53ZWJraXQpe3JldHVybiBvLnNjcm9sbExlZnR9ZWxzZSBpZighIUQuYnJvd3Nlci5maXJlZm94KXtyZXR1cm4gby5zY3JvbGxXaWR0aCtvLnNjcm9sbExlZnQtby5jbGllbnRXaWR0aH1lbHNle3JldHVybiBvLnNjcm9sbExlZnR9fWVsc2V7by5zY3JvbGxMZWZ0PXEuc2FwLmRlbm9ybWFsaXplU2Nyb2xsTGVmdFJUTChwLG8pO3JldHVybiB0aGlzfX19Ow0KLyoNCgkgKiBUaGUgZm9sbG93aW5nIG1ldGhvZHMgYXJlIHRha2VuIGZyb20galF1ZXJ5IFVJIGNvcmUgYnV0IG1vZGlmaWVkLg0KCSAqDQoJICogalF1ZXJ5IFVJIENvcmUNCgkgKiBodHRwOi8vanF1ZXJ5dWkuY29tDQoJICoNCgkgKiBDb3B5cmlnaHQgMjAxNCBqUXVlcnkgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzDQoJICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLg0KCSAqIGh0dHA6Ly9qcXVlcnkub3JnL2xpY2Vuc2UNCgkgKg0KCSAqIGh0dHA6Ly9hcGkuanF1ZXJ5dWkuY29tL2NhdGVnb3J5L3VpLWNvcmUvDQoJICovDQpxLnN1cHBvcnQuc2VsZWN0c3RhcnQ9Im9uc2VsZWN0c3RhcnQiaW4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7cS5mbi5leHRlbmQoe2Rpc2FibGVTZWxlY3Rpb246ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vbigocS5zdXBwb3J0LnNlbGVjdHN0YXJ0PyJzZWxlY3RzdGFydCI6Im1vdXNlZG93biIpKyIuc2FwdWk1LWRpc2FibGVTZWxlY3Rpb24iLGZ1bmN0aW9uKGUpe2UucHJldmVudERlZmF1bHQoKX0pfSxlbmFibGVTZWxlY3Rpb246ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vZmYoIi5zYXB1aTUtZGlzYWJsZVNlbGVjdGlvbiIpfX0pO3EuZm4uc2Nyb2xsUmlnaHRSVEw9ZnVuY3Rpb24gc2Nyb2xsUmlnaHRSVEwoKXt2YXIgbz10aGlzLmdldCgwKTtpZihvKXtpZighIUQuYnJvd3Nlci5pbnRlcm5ldF9leHBsb3Jlcil7cmV0dXJuIG8uc2Nyb2xsTGVmdH1lbHNlIGlmKCEhRC5icm93c2VyLndlYmtpdCl7cmV0dXJuIG8uc2Nyb2xsV2lkdGgtby5zY3JvbGxMZWZ0LW8uY2xpZW50V2lkdGh9ZWxzZSBpZighIUQuYnJvd3Nlci5maXJlZm94KXtyZXR1cm4oLW8uc2Nyb2xsTGVmdCl9ZWxzZXtyZXR1cm4gby5zY3JvbGxMZWZ0fX19O3Euc2FwLmRlbm9ybWFsaXplU2Nyb2xsTGVmdFJUTD1mdW5jdGlvbihuLG8pe2lmKG8pe2lmKCEhRC5icm93c2VyLmludGVybmV0X2V4cGxvcmVyKXtyZXR1cm4gby5zY3JvbGxXaWR0aC1vLmNsaWVudFdpZHRoLW59ZWxzZSBpZighIUQuYnJvd3Nlci53ZWJraXQpe3JldHVybiBufWVsc2UgaWYoISFELmJyb3dzZXIuZmlyZWZveCl7cmV0dXJuIG8uY2xpZW50V2lkdGgrbi1vLnNjcm9sbFdpZHRofWVsc2V7cmV0dXJuIG59fX07DQovKiENCgkgKiBUaGUgZm9sbG93aW5nIGZ1bmN0aW9ucyBhcmUgdGFrZW4gZnJvbSBqUXVlcnkgVUkgMS44LjE3IGJ1dCBtb2RpZmllZA0KCSAqDQoJICogQ29weXJpZ2h0IDIwMTEsIEFVVEhPUlMudHh0IChodHRwOi8vanF1ZXJ5dWkuY29tL2Fib3V0KQ0KCSAqIER1YWwgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBvciBHUEwgVmVyc2lvbiAyIGxpY2Vuc2VzLg0KCSAqIGh0dHA6Ly9qcXVlcnkub3JnL2xpY2Vuc2UNCgkgKg0KCSAqIGh0dHA6Ly9kb2NzLmpxdWVyeS5jb20vVUkNCgkgKi8NCmZ1bmN0aW9uIHYoZSl7dmFyIG89cShlKS5vZmZzZXRQYXJlbnQoKTt2YXIgTz1mYWxzZTt2YXIgJD1xKGUpLnBhcmVudHMoKS5maWx0ZXIoZnVuY3Rpb24oKXtpZih0aGlzPT09byl7Tz10cnVlfXJldHVybiBPfSk7cmV0dXJuIXEoZSkuYWRkKCQpLmZpbHRlcihmdW5jdGlvbigpe3JldHVybiBxLmNzcyh0aGlzLCJ2aXNpYmlsaXR5Iik9PT0iaGlkZGVuInx8cS5leHByLmZpbHRlcnMuaGlkZGVuKHRoaXMpfSkubGVuZ3RofWZ1bmN0aW9uIGYoZSxpKXt2YXIgbj1lLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7aWYoImFyZWEiPT09bil7dmFyIG09ZS5wYXJlbnROb2RlLGE9bS5uYW1lLGI7aWYoIWUuaHJlZnx8IWF8fG0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKSE9PSJtYXAiKXtyZXR1cm4gZmFsc2V9Yj1xKCJpbWdbdXNlbWFwPSMiK2ErIl0iKVswXTtyZXR1cm4hIWImJnYoYil9cmV0dXJuKC9pbnB1dHxzZWxlY3R8dGV4dGFyZWF8YnV0dG9ufG9iamVjdC8udGVzdChuKT8hZS5kaXNhYmxlZDoiYSI9PW4/ZS5ocmVmfHxpOmkpJiZ2KGUpfWlmKCFxLmV4cHJbIjoiXS5mb2N1c2FibGUpew0KLyohDQoJCSAqIFRoZSBmb2xsb3dpbmcgZnVuY3Rpb24gaXMgdGFrZW4gZnJvbSBqUXVlcnkgVUkgMS44LjE3DQoJCSAqDQoJCSAqIENvcHlyaWdodCAyMDExLCBBVVRIT1JTLnR4dCAoaHR0cDovL2pxdWVyeXVpLmNvbS9hYm91dCkNCgkJICogRHVhbCBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIG9yIEdQTCBWZXJzaW9uIDIgbGljZW5zZXMuDQoJCSAqIGh0dHA6Ly9qcXVlcnkub3JnL2xpY2Vuc2UNCgkJICoNCgkJICogaHR0cDovL2RvY3MuanF1ZXJ5LmNvbS9VSQ0KCQkgKg0KCQkgKiBCdXQgc2luY2UgdmlzaWJsZSBpcyBtb2RpZmllZCwgZm9jdXNhYmxlIGlzIGRpZmZlcmVudCB0b28gdGhlIGpRdWVyeSBVSSB2ZXJzaW9uIHRvby4NCgkJICovDQpxLmV4dGVuZChxLmV4cHJbIjoiXSx7Zm9jdXNhYmxlOmZ1bmN0aW9uKGUpe3JldHVybiBmKGUsIWlzTmFOKHEuYXR0cihlLCJ0YWJpbmRleCIpKSl9fSl9aWYoIXEuZXhwclsiOiJdLnNhcFRhYmJhYmxlKXsNCi8qIQ0KCQkgKiBUaGUgZm9sbG93aW5nIGZ1bmN0aW9uIGlzIHRha2VuIGZyb20NCgkJICogalF1ZXJ5IFVJIENvcmUgMS4xMC40DQoJCSAqIGh0dHA6Ly9qcXVlcnl1aS5jb20NCgkJICoNCgkJICogQ29weXJpZ2h0IDIwMTQgalF1ZXJ5IEZvdW5kYXRpb24gYW5kIG90aGVyIGNvbnRyaWJ1dG9ycw0KCQkgKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuDQoJCSAqIGh0dHA6Ly9qcXVlcnkub3JnL2xpY2Vuc2UNCgkJICoNCgkJICogaHR0cDovL2FwaS5qcXVlcnl1aS5jb20vY2F0ZWdvcnkvdWktY29yZS8NCgkJICovDQpxLmV4dGVuZChxLmV4cHJbIjoiXSx7c2FwVGFiYmFibGU6ZnVuY3Rpb24oZSl7dmFyIHQ9cS5hdHRyKGUsInRhYmluZGV4IiksaT1pc05hTih0KTtyZXR1cm4oaXx8dD49MCkmJmYoZSwhaSl9fSl9aWYoIXEuZXhwclsiOiJdLnNhcEZvY3VzYWJsZSl7cS5leHRlbmQocS5leHByWyI6Il0se3NhcEZvY3VzYWJsZTpmdW5jdGlvbihlKXtyZXR1cm4gZihlLCFpc05hTihxLmF0dHIoZSwidGFiaW5kZXgiKSkpfX0pfWlmKCFxLmZuLnpJbmRleCl7cS5mbi56SW5kZXg9ZnVuY3Rpb24oeil7aWYoeiE9PXVuZGVmaW5lZCl7cmV0dXJuIHRoaXMuY3NzKCJ6SW5kZXgiLHopfWlmKHRoaXMubGVuZ3RoKXt2YXIgZT1xKHRoaXNbMF0pLHAsYTt3aGlsZShlLmxlbmd0aCYmZVswXSE9PWRvY3VtZW50KXtwPWUuY3NzKCJwb3NpdGlvbiIpO2lmKHA9PT0iYWJzb2x1dGUifHxwPT09InJlbGF0aXZlInx8cD09PSJmaXhlZCIpe2E9cGFyc2VJbnQoZS5jc3MoInpJbmRleCIpLDEwKTtpZighaXNOYU4oYSkmJmEhPT0wKXtyZXR1cm4gYX19ZT1lLnBhcmVudCgpfX1yZXR1cm4gMH19cS5mbi5wYXJlbnRCeUF0dHJpYnV0ZT1mdW5jdGlvbiBwYXJlbnRCeUF0dHJpYnV0ZShhLFYpe2lmKHRoaXMubGVuZ3RoPjApe2lmKFYpe3JldHVybiB0aGlzLmZpcnN0KCkucGFyZW50cygiWyIrYSsiPSciK1YrIiddIikuZ2V0KDApfWVsc2V7cmV0dXJuIHRoaXMuZmlyc3QoKS5wYXJlbnRzKCJbIithKyJdIikuZ2V0KDApfX19O3Euc2FwLm93bmVyV2luZG93PWZ1bmN0aW9uIG93bmVyV2luZG93KG8pe2lmKG8ub3duZXJEb2N1bWVudC5wYXJlbnRXaW5kb3cpe3JldHVybiBvLm93bmVyRG9jdW1lbnQucGFyZW50V2luZG93fXJldHVybiBvLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXd9O3ZhciBfPXt9O3Euc2FwLnNjcm9sbGJhclNpemU9ZnVuY3Rpb24oYyxGKXtpZih0eXBlb2YgYz09PSJib29sZWFuIil7Rj1jO2M9bnVsbH12YXIgaz1jfHwiI0RFRkFVTFQiO2lmKEYpe2lmKGMpe2RlbGV0ZSBfW2NdfWVsc2V7Xz17fX19aWYoX1trXSl7cmV0dXJuIF9ba119aWYoIWRvY3VtZW50LmJvZHkpe3JldHVybnt3aWR0aDowLGhlaWdodDowfX12YXIgYT1xKCI8RElWLz4iKS5jc3MoInZpc2liaWxpdHkiLCJoaWRkZW4iKS5jc3MoImhlaWdodCIsIjAiKS5jc3MoIndpZHRoIiwiMCIpLmNzcygib3ZlcmZsb3ciLCJoaWRkZW4iKTtpZihjKXthLmFkZENsYXNzKGMpfWEucHJlcGVuZFRvKGRvY3VtZW50LmJvZHkpO3ZhciAkPXEoIjxkaXYgc3R5bGU9XCJ2aXNpYmlsaXR5OnZpc2libGU7cG9zaXRpb246YWJzb2x1dGU7aGVpZ2h0OjEwMHB4O3dpZHRoOjEwMHB4O292ZXJmbG93OnNjcm9sbDtvcGFjaXR5OjA7XCI+PC9kaXY+Iik7YS5hcHBlbmQoJCk7dmFyIG89JC5nZXQoMCk7dmFyIHc9by5vZmZzZXRXaWR0aC1vLnNjcm9sbFdpZHRoO3ZhciBoPW8ub2Zmc2V0SGVpZ2h0LW8uc2Nyb2xsSGVpZ2h0O2EucmVtb3ZlKCk7aWYodz09PTB8fGg9PT0wKXtyZXR1cm57d2lkdGg6dyxoZWlnaHQ6aH19X1trXT17d2lkdGg6dyxoZWlnaHQ6aH07cmV0dXJuIF9ba119O3Euc2FwLnN5bmNTdHlsZUNsYXNzPWZ1bmN0aW9uKHMsUyxhKXtpZighcylyZXR1cm4gYTtpZihTIGluc3RhbmNlb2Ygc2FwLnVpLmNvcmUuQ29udHJvbCl7Uz1TLiQoKX1lbHNlIGlmKHR5cGVvZiBTPT09InN0cmluZyIpe1M9cS5zYXAuYnlJZChTKX1lbHNlIGlmKCEoUyBpbnN0YW5jZW9mIHEpKXtyZXR1cm4gYX12YXIgYz0hIVMuY2xvc2VzdCgiLiIrcykubGVuZ3RoO2lmKGEgaW5zdGFuY2VvZiBxKXthLnRvZ2dsZUNsYXNzKHMsYyl9ZWxzZSBpZihhIGluc3RhbmNlb2Ygc2FwLnVpLmNvcmUuQ29udHJvbCl7YS50b2dnbGVTdHlsZUNsYXNzKHMsYyl9ZWxzZXt9cmV0dXJuIGF9O3JldHVybiBxfSxmYWxzZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ2pxdWVyeS5zYXAuZW5jb2RlcicpKXsNCi8qIQ0KICogU0FQIFVJIGRldmVsb3BtZW50IHRvb2xraXQgZm9yIEhUTUw1IChTQVBVSTUvT3BlblVJNSkNCiAqIChjKSBDb3B5cmlnaHQgMjAwOS0yMDE0IFNBUCBTRSBvciBhbiBTQVAgYWZmaWxpYXRlIGNvbXBhbnkuIA0KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAtIHNlZSBMSUNFTlNFLnR4dC4NCiAqLw0KalF1ZXJ5LnNhcC5kZWNsYXJlKCdqcXVlcnkuc2FwLmVuY29kZXInKTtzYXAudWkuZGVmaW5lKCJqcXVlcnkuc2FwLmVuY29kZXIiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnXSxmdW5jdGlvbihxKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gaChpLGwpe3ZhciBnPWkudG9TdHJpbmcoMTYpO2lmKGwpe3doaWxlKGw+Zy5sZW5ndGgpe2c9IjAiK2d9fXJldHVybiBnfXZhciByPS9bXHgwMC1ceDJiXHgyZlx4M2EtXHg0MFx4NWItXHg1ZVx4NjBceDdiLVx4ZmZcdTIwMjhcdTIwMjldL2csYT0vW1x4MDAtXHgwOFx4MGJceDBjXHgwZS1ceDFmXHg3Zi1ceDlmXS8sSD17IjwiOiImbHQ7IiwiPiI6IiZndDsiLCImIjoiJmFtcDsiLCJcIiI6IiZxdW90OyJ9O3ZhciBmPWZ1bmN0aW9uKGcpe3ZhciBFPUhbZ107aWYoIUUpe2lmKGEudGVzdChnKSl7RT0iJiN4ZmZmZDsifWVsc2V7RT0iJiN4IitoKGcuY2hhckNvZGVBdCgwKSkrIjsifUhbZ109RX1yZXR1cm4gRX07cS5zYXAuZW5jb2RlSFRNTD1mdW5jdGlvbihTKXtyZXR1cm4gUy5yZXBsYWNlKHIsZil9O3Euc2FwLmVuY29kZVhNTD1mdW5jdGlvbihTKXtyZXR1cm4gUy5yZXBsYWNlKHIsZil9O3Euc2FwLmVzY2FwZUhUTUw9ZnVuY3Rpb24oUyl7cmV0dXJuIFMucmVwbGFjZShyLGYpfTt2YXIgYj0vW1x4MDAtXHgyYlx4MmRceDJmXHgzYS1ceDQwXHg1Yi1ceDVlXHg2MFx4N2ItXHhmZlx1MjAyOFx1MjAyOV0vZyxqPXt9O3ZhciBKPWZ1bmN0aW9uKGcpe3ZhciBFPWpbZ107aWYoIUUpe3ZhciBpPWcuY2hhckNvZGVBdCgwKTtpZihpPDI1Nil7RT0iXFx4IitoKGksMil9ZWxzZXtFPSJcXHUiK2goaSw0KX1qW2ddPUV9cmV0dXJuIEV9O3Euc2FwLmVuY29kZUpTPWZ1bmN0aW9uKFMpe3JldHVybiBTLnJlcGxhY2UoYixKKX07cS5zYXAuZXNjYXBlSlM9ZnVuY3Rpb24oUyl7cmV0dXJuIFMucmVwbGFjZShiLEopfTt2YXIgYz0vW1x4MDAtXHgyY1x4MmZceDNhLVx4NDBceDViLVx4NWVceDYwXHg3Yi1cdWZmZmZdL2csdT17fTt2YXIgVT1mdW5jdGlvbihnKXt2YXIgRT11W2ddO2lmKCFFKXt2YXIgaT1nLmNoYXJDb2RlQXQoMCk7aWYoaTwxMjgpe0U9IiUiK2goaSwyKX1lbHNlIGlmKGk8MjA0OCl7RT0iJSIraCgoaT4+Nil8MTkyLDIpKyIlIitoKChpJjYzKXwxMjgsMil9ZWxzZXtFPSIlIitoKChpPj4xMil8MjI0LDIpKyIlIitoKCgoaT4+NikmNjMpfDEyOCwyKSsiJSIraCgoaSY2Myl8MTI4LDIpfXVbZ109RX1yZXR1cm4gRX07cS5zYXAuZW5jb2RlVVJMPWZ1bmN0aW9uKFMpe3JldHVybiBTLnJlcGxhY2UoYyxVKX07cS5zYXAuZW5jb2RlVVJMUGFyYW1ldGVycz1mdW5jdGlvbihwKXtpZighcCl7cmV0dXJuIiJ9dmFyIGc9W107cS5lYWNoKHAsZnVuY3Rpb24obix2KXtpZihxLnR5cGUodik9PT0ic3RyaW5nIil7dj1xLnNhcC5lbmNvZGVVUkwodil9Zy5wdXNoKHEuc2FwLmVuY29kZVVSTChuKSsiPSIrdil9KTtyZXR1cm4gZy5qb2luKCImIil9O3ZhciBkPS9bXHgwMC1ceDJmXHgzYS1ceDQwXHg1Yi1ceDYwXHg3Yi1ceGZmXHUyMDI4XHUyMDI5XVswLTlBLUZhLWZdPy9nO3ZhciBDPWZ1bmN0aW9uKGcpe3ZhciBpPWcuY2hhckNvZGVBdCgwKTtpZihnLmxlbmd0aD09MSl7cmV0dXJuIlxcIitoKGkpfWVsc2V7cmV0dXJuIlxcIitoKGkpKyIgIitnLnN1YnN0cigxKX19O3Euc2FwLmVuY29kZUNTUz1mdW5jdGlvbihTKXtyZXR1cm4gUy5yZXBsYWNlKGQsQyl9O2Z1bmN0aW9uIFcocCxnLGksayl7aWYocCl7dGhpcy5wcm90b2NvbD1wLnRvVXBwZXJDYXNlKCl9aWYoZyl7dGhpcy5ob3N0PWcudG9VcHBlckNhc2UoKX10aGlzLnBvcnQ9aTt0aGlzLnBhdGg9a312YXIgdz1uZXcgQXJyYXkoKTtxLnNhcC5jbGVhclVybFdoaXRlbGlzdD1mdW5jdGlvbigpe3cuc3BsaWNlKDAsdy5sZW5ndGgpfTtxLnNhcC5hZGRVcmxXaGl0ZWxpc3Q9ZnVuY3Rpb24ocCxnLGksayl7dmFyIEU9bmV3IFcocCxnLGksayk7dmFyIEk9dy5sZW5ndGg7d1tJXT1FfTtxLnNhcC5yZW1vdmVVcmxXaGl0ZWxpc3Q9ZnVuY3Rpb24oaSl7dy5zcGxpY2UoaSwxKX07cS5zYXAuZ2V0VXJsV2hpdGVsaXN0PWZ1bmN0aW9uKCl7cmV0dXJuIHcuc2xpY2UoKX07cS5zYXAudmFsaWRhdGVVcmw9ZnVuY3Rpb24oZyl7dmFyIGs9Lyg/OihbXjpcLz8jXSspOik/KD86XC9cLyhbXlwvPyM6XSopKD86OihbMC05XSspKT8pPyhbXj8jXSopKD86XD8oW14jXSopKT8oPzojKC4qKSk/Ly5leGVjKGcpO2lmKCFrKXtyZXR1cm4ga312YXIgcD1rWzFdLGw9a1syXSxQPWtbM10sbT1rWzRdLFE9a1s1XSxuPWtbNl07dmFyIG89L1tceDAwLVx4MjRceDI2LVx4MjlceDJiXHgyY1x4MmZceDNhLVx4NDBceDViLVx4NWVceDYwXHg3Yi1ceDdkXHg3Zi1cdWZmZmZdLzt2YXIgdD0vW2EtejAtOSEjJCUmJyorXC89P15fYHt8fX4tXSsoPzpcLlthLXowLTkhIyQlJicqK1wvPT9eX2B7fH1+LV0rKSpAKD86W2EtejAtOV0oPzpbYS16MC05LV0qW2EtejAtOV0pP1wuKStbYS16MC05XSg/OlthLXowLTktXSpbYS16MC05XSk/LztpZihwKXtwPXAudG9VcHBlckNhc2UoKTtpZih3Lmxlbmd0aDw9MCl7aWYoIS9eKGh0dHBzP3xmdHApL2kudGVzdChwKSl7cmV0dXJuIGZhbHNlfX19aWYobCl7bD1sLnRvVXBwZXJDYXNlKCl9aWYobSl7aWYocD09PSJNQUlMVE8iKXt2YXIgdj10LnRlc3QobSk7aWYoIXYpe3JldHVybiBmYWxzZX19ZWxzZXt2YXIgeD1tLnNwbGl0KCIvIik7Zm9yKHZhciBpPTA7aTx4Lmxlbmd0aDtpKyspe3ZhciB2PW8udGVzdCh4W2ldKTtpZih2KXtyZXR1cm4gZmFsc2V9fX19aWYoUSl7dmFyIHg9US5zcGxpdCgiJiIpO2Zvcih2YXIgaT0wO2k8eC5sZW5ndGg7aSsrKXt2YXIgeT14W2ldLnNlYXJjaCgiPSIpO2lmKHkhPS0xKXt2YXIgej14W2ldLnN1YnN0cmluZygwLHkpO3ZhciBBPXhbaV0uc3Vic3RyaW5nKHkrMSk7dmFyIEI9by50ZXN0KHopO3ZhciBEPW8udGVzdChBKTtpZihCfHxEKXtyZXR1cm4gZmFsc2V9fX19aWYobil7aWYoby50ZXN0KG4pKXtyZXR1cm4gZmFsc2V9fWlmKHcubGVuZ3RoPjApe3ZhciBGPWZhbHNlO2Zvcih2YXIgaT0wO2k8dy5sZW5ndGg7aSsrKXtpZighcHx8IXdbaV0ucHJvdG9jb2x8fHA9PXdbaV0ucHJvdG9jb2wpe3ZhciBPPWZhbHNlO2lmKGwmJndbaV0uaG9zdCYmL15cKi8udGVzdCh3W2ldLmhvc3QpKXt2YXIgRT13W2ldLmhvc3Quc2xpY2UoMSkucmVwbGFjZSgvWy1bXF17fSgpKis/LixcXF4kfCNcc10vZywiXFwkJiIpO3ZhciBHPVJlZ0V4cChFKyIkIik7aWYoRy50ZXN0KGwpKXtPPXRydWV9fWVsc2UgaWYoIWx8fCF3W2ldLmhvc3R8fGw9PXdbaV0uaG9zdCl7Tz10cnVlfWlmKE8pe2lmKCghbCYmIVApfHwhd1tpXS5wb3J0fHxQPT13W2ldLnBvcnQpe2lmKHdbaV0ucGF0aCYmL1wqJC8udGVzdCh3W2ldLnBhdGgpKXt2YXIgST13W2ldLnBhdGguc2xpY2UoMCwtMSkucmVwbGFjZSgvWy1bXF17fSgpKis/LixcXF4kfCNcc10vZywiXFwkJiIpO3ZhciBHPVJlZ0V4cCgiXiIrSSk7aWYoRy50ZXN0KG0pKXtGPXRydWV9fWVsc2UgaWYoIXdbaV0ucGF0aHx8bT09d1tpXS5wYXRoKXtGPXRydWV9fX19aWYoRil7YnJlYWt9fWlmKCFGKXtyZXR1cm4gZmFsc2V9fXJldHVybiB0cnVlfTtxLnNhcC5fc2FuaXRpemVIVE1MPWZ1bmN0aW9uKGcsbyl7cmV0dXJuIHMoZyxvfHx7dXJpUmV3cml0ZXI6ZnVuY3Rpb24oaSl7aWYocS5zYXAudmFsaWRhdGVVcmwoaSkpe3JldHVybiBpfX19KX07cS5zYXAuX3NldEhUTUxTYW5pdGl6ZXI9ZnVuY3Rpb24ocyl7cz1zfHxlfTtmdW5jdGlvbiBlKGcsbyl7aWYoIXdpbmRvdy5odG1sfHwhd2luZG93Lmh0bWwuc2FuaXRpemUpe3Euc2FwLnJlcXVpcmUoInNhcC51aS50aGlyZHBhcnR5LmNhamEtaHRtbC1zYW5pdGl6ZXIiKTt9dmFyIHQ9by50YWdQb2xpY3l8fHdpbmRvdy5odG1sLm1ha2VUYWdQb2xpY3koby51cmlSZXdyaXRlcixvLnRva2VuUG9saWN5KTtyZXR1cm4gd2luZG93Lmh0bWwuc2FuaXRpemVXaXRoUG9saWN5KGcsdCl9dmFyIHM9ZTtyZXR1cm4gcX0sZmFsc2UpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdqcXVlcnkuc2FwLmV2ZW50cycpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ2pxdWVyeS5zYXAuZXZlbnRzJyk7c2FwLnVpLmRlZmluZSgianF1ZXJ5LnNhcC5ldmVudHMiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdqcXVlcnkuc2FwLmtleWNvZGVzJ10sZnVuY3Rpb24ocSl7InVzZSBzdHJpY3QiO3Euc2FwLl90b3VjaFRvTW91c2VFdmVudD10cnVlO3ZhciBvLGEsYixjLGQsbSxJPWZhbHNlO2lmKHNhcC51aS5EZXZpY2UuYnJvd3Nlci53ZWJraXQmJi9Nb2JpbGUvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkmJnNhcC51aS5EZXZpY2Uuc3VwcG9ydC50b3VjaCl7ST10cnVlO3ZhciBzPShmdW5jdGlvbigpe3ZhciBlPXdpbmRvdy5kb2N1bWVudCxIPWZhbHNlLHQ9bnVsbCxqPWZhbHNlLHIsdSxpPTA7bT1bIm1vdXNlZG93biIsIm1vdXNlb3ZlciIsIm1vdXNldXAiLCJtb3VzZW91dCIsImNsaWNrIl07dmFyIHY9ZnVuY3Rpb24oVCxFKXtpZighSCl7cmV0dXJufXZhciBNPUUudHlwZT09InRvdWNoZW5kIj9FLmNoYW5nZWRUb3VjaGVzWzBdOkUudG91Y2hlc1swXTt2YXIgeD1lLmNyZWF0ZUV2ZW50KCdNb3VzZUV2ZW50Jyk7eC5pbml0TW91c2VFdmVudChULHRydWUsdHJ1ZSx3aW5kb3csRS5kZXRhaWwsTS5zY3JlZW5YLE0uc2NyZWVuWSxNLmNsaWVudFgsTS5jbGllbnRZLEUuY3RybEtleSxFLnNoaWZ0S2V5LEUuYWx0S2V5LEUubWV0YUtleSxFLmJ1dHRvbixFLnJlbGF0ZWRUYXJnZXQpO3guaXNTeW50aGV0aWM9dHJ1ZTt3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpe3QuZGlzcGF0Y2hFdmVudCh4KX0sMCl9O3ZhciB3PWZ1bmN0aW9uKEUpe3JldHVybiBFLnRhcmdldC50YWdOYW1lLm1hdGNoKC9pbnB1dHx0ZXh0YXJlYXxzZWxlY3QvaSl9O2Q9ZnVuY3Rpb24oRSl7aWYoIUUuaXNTeW50aGV0aWMmJiF3KEUpKXtFLnN0b3BQcm9wYWdhdGlvbigpO0UucHJldmVudERlZmF1bHQoKX19O289ZnVuY3Rpb24oRSl7dmFyIFQ9RS50b3VjaGVzLHg7SD0oVC5sZW5ndGg9PTEmJiF3KEUpKTtqPWZhbHNlO2lmKEgpe3g9VFswXTt0PXgudGFyZ2V0O2lmKHQubm9kZVR5cGU9PT0zKXt0PXQucGFyZW50Tm9kZX1yPXguY2xpZW50WDt1PXguY2xpZW50WTt2KCJtb3VzZWRvd24iLEUpfX07YT1mdW5jdGlvbihFKXt2YXIgVDtpZihIKXtUPUUudG91Y2hlc1swXTtpZihNYXRoLmFicyhULmNsaWVudFgtcik+MTB8fE1hdGguYWJzKFQuY2xpZW50WS11KT4xMCl7aj10cnVlfWlmKGope3YoIm1vdXNlbW92ZSIsRSl9fX07Yj1mdW5jdGlvbihFKXt2KCJtb3VzZXVwIixFKTtpZighail7digiY2xpY2siLEUpfX07Yz1mdW5jdGlvbihFKXt2KCJtb3VzZXVwIixFKX07Zm9yKDtpPG0ubGVuZ3RoO2krKyl7ZS5hZGRFdmVudExpc3RlbmVyKG1baV0sZCx0cnVlKX1lLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLG8sdHJ1ZSk7ZS5hZGRFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLGEsdHJ1ZSk7ZS5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsYix0cnVlKTtlLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoY2FuY2VsJyxjLHRydWUpfSgpKX1xLnNhcC5kaXNhYmxlVG91Y2hUb01vdXNlSGFuZGxpbmc9ZnVuY3Rpb24oKXt2YXIgaT0wO2lmKCFJKXtyZXR1cm59ZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsbyx0cnVlKTtkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLGEsdHJ1ZSk7ZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLGIsdHJ1ZSk7ZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hjYW5jZWwnLGMsdHJ1ZSk7Zm9yKDtpPG0ubGVuZ3RoO2krKyl7ZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihtW2ldLGQsdHJ1ZSl9fTtxLnNhcC5Db250cm9sRXZlbnRzPVsiY2xpY2siLCJkYmxjbGljayIsImNvbnRleHRtZW51IiwiZm9jdXNpbiIsImZvY3Vzb3V0Iiwia2V5ZG93biIsImtleXByZXNzIiwia2V5dXAiLCJtb3VzZWRvd24iLCJtb3VzZW91dCIsIm1vdXNlb3ZlciIsIm1vdXNldXAiLCJzZWxlY3QiLCJzZWxlY3RzdGFydCIsImRyYWdzdGFydCIsImRyYWdlbnRlciIsImRyYWdvdmVyIiwiZHJhZ2xlYXZlIiwiZHJhZ2VuZCIsImRyb3AiLCJwYXN0ZSIsImN1dCIsImlucHV0Il07aWYoc2FwLnVpLkRldmljZS5zdXBwb3J0LnRvdWNoKXtxLnNhcC5Db250cm9sRXZlbnRzLnB1c2goInRvdWNoc3RhcnQiLCJ0b3VjaGVuZCIsInRvdWNobW92ZSIsInRvdWNoY2FuY2VsIil9cS5zYXAuUHNldWRvRXZlbnRzPXtzYXBkb3duOntzTmFtZToic2FwZG93biIsYVR5cGVzOlsia2V5ZG93biJdLGZuQ2hlY2s6ZnVuY3Rpb24oZSl7cmV0dXJuIGUua2V5Q29kZT09cS5zYXAuS2V5Q29kZXMuQVJST1dfRE9XTiYmIWsoZSl9fSxzYXBkb3dubW9kaWZpZXJzOntzTmFtZToic2FwZG93bm1vZGlmaWVycyIsYVR5cGVzOlsia2V5ZG93biJdLGZuQ2hlY2s6ZnVuY3Rpb24oZSl7cmV0dXJuIGUua2V5Q29kZT09cS5zYXAuS2V5Q29kZXMuQVJST1dfRE9XTiYmayhlKX19LHNhcHNob3c6e3NOYW1lOiJzYXBzaG93IixhVHlwZXM6WyJrZXlkb3duIl0sZm5DaGVjazpmdW5jdGlvbihlKXtyZXR1cm4oZS5rZXlDb2RlPT1xLnNhcC5LZXlDb2Rlcy5GNCYmIWsoZSkpfHwoZS5rZXlDb2RlPT1xLnNhcC5LZXlDb2Rlcy5BUlJPV19ET1dOJiZoKGUsZmFsc2UsdHJ1ZSxmYWxzZSkpfX0sc2FwdXA6e3NOYW1lOiJzYXB1cCIsYVR5cGVzOlsia2V5ZG93biJdLGZuQ2hlY2s6ZnVuY3Rpb24oZSl7cmV0dXJuIGUua2V5Q29kZT09cS5zYXAuS2V5Q29kZXMuQVJST1dfVVAmJiFrKGUpfX0sc2FwdXBtb2RpZmllcnM6e3NOYW1lOiJzYXB1cG1vZGlmaWVycyIsYVR5cGVzOlsia2V5ZG93biJdLGZuQ2hlY2s6ZnVuY3Rpb24oZSl7cmV0dXJuIGUua2V5Q29kZT09cS5zYXAuS2V5Q29kZXMuQVJST1dfVVAmJmsoZSl9fSxzYXBoaWRlOntzTmFtZToic2FwaGlkZSIsYVR5cGVzOlsia2V5ZG93biJdLGZuQ2hlY2s6ZnVuY3Rpb24oZSl7cmV0dXJuIGUua2V5Q29kZT09cS5zYXAuS2V5Q29kZXMuQVJST1dfVVAmJmgoZSxmYWxzZSx0cnVlLGZhbHNlKX19LHNhcGxlZnQ6e3NOYW1lOiJzYXBsZWZ0IixhVHlwZXM6WyJrZXlkb3duIl0sZm5DaGVjazpmdW5jdGlvbihlKXtyZXR1cm4gZS5rZXlDb2RlPT1xLnNhcC5LZXlDb2Rlcy5BUlJPV19MRUZUJiYhayhlKX19LHNhcGxlZnRtb2RpZmllcnM6e3NOYW1lOiJzYXBsZWZ0bW9kaWZpZXJzIixhVHlwZXM6WyJrZXlkb3duIl0sZm5DaGVjazpmdW5jdGlvbihlKXtyZXR1cm4gZS5rZXlDb2RlPT1xLnNhcC5LZXlDb2Rlcy5BUlJPV19MRUZUJiZrKGUpfX0sc2FwcmlnaHQ6e3NOYW1lOiJzYXByaWdodCIsYVR5cGVzOlsia2V5ZG93biJdLGZuQ2hlY2s6ZnVuY3Rpb24oZSl7cmV0dXJuIGUua2V5Q29kZT09cS5zYXAuS2V5Q29kZXMuQVJST1dfUklHSFQmJiFrKGUpfX0sc2FwcmlnaHRtb2RpZmllcnM6e3NOYW1lOiJzYXByaWdodG1vZGlmaWVycyIsYVR5cGVzOlsia2V5ZG93biJdLGZuQ2hlY2s6ZnVuY3Rpb24oZSl7cmV0dXJuIGUua2V5Q29kZT09cS5zYXAuS2V5Q29kZXMuQVJST1dfUklHSFQmJmsoZSl9fSxzYXBob21lOntzTmFtZToic2FwaG9tZSIsYVR5cGVzOlsia2V5ZG93biJdLGZuQ2hlY2s6ZnVuY3Rpb24oZSl7cmV0dXJuIGUua2V5Q29kZT09cS5zYXAuS2V5Q29kZXMuSE9NRSYmIWsoZSl9fSxzYXBob21lbW9kaWZpZXJzOntzTmFtZToic2FwaG9tZW1vZGlmaWVycyIsYVR5cGVzOlsia2V5ZG93biJdLGZuQ2hlY2s6ZnVuY3Rpb24oZSl7cmV0dXJuIGUua2V5Q29kZT09cS5zYXAuS2V5Q29kZXMuSE9NRSYmayhlKX19LHNhcHRvcDp7c05hbWU6InNhcHRvcCIsYVR5cGVzOlsia2V5ZG93biJdLGZuQ2hlY2s6ZnVuY3Rpb24oZSl7cmV0dXJuIGUua2V5Q29kZT09cS5zYXAuS2V5Q29kZXMuSE9NRSYmaChlLHRydWUsZmFsc2UsZmFsc2UpfX0sc2FwZW5kOntzTmFtZToic2FwZW5kIixhVHlwZXM6WyJrZXlkb3duIl0sZm5DaGVjazpmdW5jdGlvbihlKXtyZXR1cm4gZS5rZXlDb2RlPT1xLnNhcC5LZXlDb2Rlcy5FTkQmJiFrKGUpfX0sc2FwZW5kbW9kaWZpZXJzOntzTmFtZToic2FwZW5kbW9kaWZpZXJzIixhVHlwZXM6WyJrZXlkb3duIl0sZm5DaGVjazpmdW5jdGlvbihlKXtyZXR1cm4gZS5rZXlDb2RlPT1xLnNhcC5LZXlDb2Rlcy5FTkQmJmsoZSl9fSxzYXBib3R0b206e3NOYW1lOiJzYXBib3R0b20iLGFUeXBlczpbImtleWRvd24iXSxmbkNoZWNrOmZ1bmN0aW9uKGUpe3JldHVybiBlLmtleUNvZGU9PXEuc2FwLktleUNvZGVzLkVORCYmaChlLHRydWUsZmFsc2UsZmFsc2UpfX0sc2FwcGFnZXVwOntzTmFtZToic2FwcGFnZXVwIixhVHlwZXM6WyJrZXlkb3duIl0sZm5DaGVjazpmdW5jdGlvbihlKXtyZXR1cm4gZS5rZXlDb2RlPT1xLnNhcC5LZXlDb2Rlcy5QQUdFX1VQJiYhayhlKX19LHNhcHBhZ2V1cG1vZGlmaWVyczp7c05hbWU6InNhcHBhZ2V1cG1vZGlmaWVycyIsYVR5cGVzOlsia2V5ZG93biJdLGZuQ2hlY2s6ZnVuY3Rpb24oZSl7cmV0dXJuIGUua2V5Q29kZT09cS5zYXAuS2V5Q29kZXMuUEFHRV9VUCYmayhlKX19LHNhcHBhZ2Vkb3duOntzTmFtZToic2FwcGFnZWRvd24iLGFUeXBlczpbImtleWRvd24iXSxmbkNoZWNrOmZ1bmN0aW9uKGUpe3JldHVybiBlLmtleUNvZGU9PXEuc2FwLktleUNvZGVzLlBBR0VfRE9XTiYmIWsoZSl9fSxzYXBwYWdlZG93bm1vZGlmaWVyczp7c05hbWU6InNhcHBhZ2Vkb3dubW9kaWZpZXJzIixhVHlwZXM6WyJrZXlkb3duIl0sZm5DaGVjazpmdW5jdGlvbihlKXtyZXR1cm4gZS5rZXlDb2RlPT1xLnNhcC5LZXlDb2Rlcy5QQUdFX0RPV04mJmsoZSl9fSxzYXBzZWxlY3Q6e3NOYW1lOiJzYXBzZWxlY3QiLGFUeXBlczpbImtleWRvd24iXSxmbkNoZWNrOmZ1bmN0aW9uKGUpe3JldHVybihlLmtleUNvZGU9PXEuc2FwLktleUNvZGVzLkVOVEVSfHxlLmtleUNvZGU9PXEuc2FwLktleUNvZGVzLlNQQUNFKSYmIWsoZSl9fSxzYXBzZWxlY3Rtb2RpZmllcnM6e3NOYW1lOiJzYXBzZWxlY3Rtb2RpZmllcnMiLGFUeXBlczpbImtleWRvd24iXSxmbkNoZWNrOmZ1bmN0aW9uKGUpe3JldHVybihlLmtleUNvZGU9PXEuc2FwLktleUNvZGVzLkVOVEVSfHxlLmtleUNvZGU9PXEuc2FwLktleUNvZGVzLlNQQUNFKSYmayhlKX19LHNhcHNwYWNlOntzTmFtZToic2Fwc3BhY2UiLGFUeXBlczpbImtleWRvd24iXSxmbkNoZWNrOmZ1bmN0aW9uKGUpe3JldHVybiBlLmtleUNvZGU9PXEuc2FwLktleUNvZGVzLlNQQUNFJiYhayhlKX19LHNhcHNwYWNlbW9kaWZpZXJzOntzTmFtZToic2Fwc3BhY2Vtb2RpZmllcnMiLGFUeXBlczpbImtleWRvd24iXSxmbkNoZWNrOmZ1bmN0aW9uKGUpe3JldHVybiBlLmtleUNvZGU9PXEuc2FwLktleUNvZGVzLlNQQUNFJiZrKGUpfX0sc2FwZW50ZXI6e3NOYW1lOiJzYXBlbnRlciIsYVR5cGVzOlsia2V5ZG93biJdLGZuQ2hlY2s6ZnVuY3Rpb24oZSl7cmV0dXJuIGUua2V5Q29kZT09cS5zYXAuS2V5Q29kZXMuRU5URVImJiFrKGUpfX0sc2FwZW50ZXJtb2RpZmllcnM6e3NOYW1lOiJzYXBlbnRlcm1vZGlmaWVycyIsYVR5cGVzOlsia2V5ZG93biJdLGZuQ2hlY2s6ZnVuY3Rpb24oZSl7cmV0dXJuIGUua2V5Q29kZT09cS5zYXAuS2V5Q29kZXMuRU5URVImJmsoZSl9fSxzYXBiYWNrc3BhY2U6e3NOYW1lOiJzYXBiYWNrc3BhY2UiLGFUeXBlczpbImtleWRvd24iXSxmbkNoZWNrOmZ1bmN0aW9uKGUpe3JldHVybiBlLmtleUNvZGU9PXEuc2FwLktleUNvZGVzLkJBQ0tTUEFDRSYmIWsoZSl9fSxzYXBiYWNrc3BhY2Vtb2RpZmllcnM6e3NOYW1lOiJzYXBiYWNrc3BhY2Vtb2RpZmllcnMiLGFUeXBlczpbImtleWRvd24iXSxmbkNoZWNrOmZ1bmN0aW9uKGUpe3JldHVybiBlLmtleUNvZGU9PXEuc2FwLktleUNvZGVzLkJBQ0tTUEFDRSYmayhlKX19LHNhcGRlbGV0ZTp7c05hbWU6InNhcGRlbGV0ZSIsYVR5cGVzOlsia2V5ZG93biJdLGZuQ2hlY2s6ZnVuY3Rpb24oZSl7cmV0dXJuIGUua2V5Q29kZT09cS5zYXAuS2V5Q29kZXMuREVMRVRFJiYhayhlKX19LHNhcGRlbGV0ZW1vZGlmaWVyczp7c05hbWU6InNhcGRlbGV0ZW1vZGlmaWVycyIsYVR5cGVzOlsia2V5ZG93biJdLGZuQ2hlY2s6ZnVuY3Rpb24oZSl7cmV0dXJuIGUua2V5Q29kZT09cS5zYXAuS2V5Q29kZXMuREVMRVRFJiZrKGUpfX0sc2FwZXhwYW5kOntzTmFtZToic2FwZXhwYW5kIixhVHlwZXM6WyJrZXlkb3duIl0sZm5DaGVjazpmdW5jdGlvbihlKXtyZXR1cm4gZS5rZXlDb2RlPT1xLnNhcC5LZXlDb2Rlcy5OVU1QQURfUExVUyYmIWsoZSl9fSxzYXBleHBhbmRtb2RpZmllcnM6e3NOYW1lOiJzYXBleHBhbmRtb2RpZmllcnMiLGFUeXBlczpbImtleWRvd24iXSxmbkNoZWNrOmZ1bmN0aW9uKGUpe3JldHVybiBlLmtleUNvZGU9PXEuc2FwLktleUNvZGVzLk5VTVBBRF9QTFVTJiZrKGUpfX0sc2FwY29sbGFwc2U6e3NOYW1lOiJzYXBjb2xsYXBzZSIsYVR5cGVzOlsia2V5ZG93biJdLGZuQ2hlY2s6ZnVuY3Rpb24oZSl7cmV0dXJuIGUua2V5Q29kZT09cS5zYXAuS2V5Q29kZXMuTlVNUEFEX01JTlVTJiYhayhlKX19LHNhcGNvbGxhcHNlbW9kaWZpZXJzOntzTmFtZToic2FwY29sbGFwc2Vtb2RpZmllcnMiLGFUeXBlczpbImtleWRvd24iXSxmbkNoZWNrOmZ1bmN0aW9uKGUpe3JldHVybiBlLmtleUNvZGU9PXEuc2FwLktleUNvZGVzLk5VTVBBRF9NSU5VUyYmayhlKX19LHNhcGNvbGxhcHNlYWxsOntzTmFtZToic2FwY29sbGFwc2VhbGwiLGFUeXBlczpbImtleWRvd24iXSxmbkNoZWNrOmZ1bmN0aW9uKGUpe3JldHVybiBlLmtleUNvZGU9PXEuc2FwLktleUNvZGVzLk5VTVBBRF9BU1RFUklTSyYmIWsoZSl9fSxzYXBlc2NhcGU6e3NOYW1lOiJzYXBlc2NhcGUiLGFUeXBlczpbImtleWRvd24iXSxmbkNoZWNrOmZ1bmN0aW9uKGUpe3JldHVybiBlLmtleUNvZGU9PXEuc2FwLktleUNvZGVzLkVTQ0FQRSYmIWsoZSl9fSxzYXB0YWJuZXh0OntzTmFtZToic2FwdGFibmV4dCIsYVR5cGVzOlsia2V5ZG93biJdLGZuQ2hlY2s6ZnVuY3Rpb24oZSl7cmV0dXJuIGUua2V5Q29kZT09cS5zYXAuS2V5Q29kZXMuVEFCJiYhayhlKX19LHNhcHRhYnByZXZpb3VzOntzTmFtZToic2FwdGFicHJldmlvdXMiLGFUeXBlczpbImtleWRvd24iXSxmbkNoZWNrOmZ1bmN0aW9uKGUpe3JldHVybiBlLmtleUNvZGU9PXEuc2FwLktleUNvZGVzLlRBQiYmaChlLGZhbHNlLGZhbHNlLHRydWUpfX0sc2Fwc2tpcGZvcndhcmQ6e3NOYW1lOiJzYXBza2lwZm9yd2FyZCIsYVR5cGVzOlsia2V5ZG93biJdLGZuQ2hlY2s6ZnVuY3Rpb24oZSl7cmV0dXJuIGUua2V5Q29kZT09cS5zYXAuS2V5Q29kZXMuRjYmJiFrKGUpfX0sc2Fwc2tpcGJhY2s6e3NOYW1lOiJzYXBza2lwYmFjayIsYVR5cGVzOlsia2V5ZG93biJdLGZuQ2hlY2s6ZnVuY3Rpb24oZSl7cmV0dXJuIGUua2V5Q29kZT09cS5zYXAuS2V5Q29kZXMuRjYmJmgoZSxmYWxzZSxmYWxzZSx0cnVlKX19LHNhcGRlY3JlYXNlOntzTmFtZToic2FwZGVjcmVhc2UiLGFUeXBlczpbImtleWRvd24iXSxmbkNoZWNrOmZ1bmN0aW9uKGUpe3ZhciByPXNhcC51aS5nZXRDb3JlKCkuZ2V0Q29uZmlndXJhdGlvbigpLmdldFJUTCgpO3ZhciBpPXI/cS5zYXAuS2V5Q29kZXMuQVJST1dfUklHSFQ6cS5zYXAuS2V5Q29kZXMuQVJST1dfTEVGVDtyZXR1cm4oZS5rZXlDb2RlPT1pfHxlLmtleUNvZGU9PXEuc2FwLktleUNvZGVzLkFSUk9XX0RPV04pJiYhayhlKX19LHNhcGRlY3JlYXNlbW9kaWZpZXJzOntzTmFtZToic2FwZGVjcmVhc2Vtb2RpZmllcnMiLGFUeXBlczpbImtleWRvd24iXSxmbkNoZWNrOmZ1bmN0aW9uKGUpe3ZhciByPXNhcC51aS5nZXRDb3JlKCkuZ2V0Q29uZmlndXJhdGlvbigpLmdldFJUTCgpO3ZhciBpPXI/cS5zYXAuS2V5Q29kZXMuQVJST1dfUklHSFQ6cS5zYXAuS2V5Q29kZXMuQVJST1dfTEVGVDtyZXR1cm4oZS5rZXlDb2RlPT1pfHxlLmtleUNvZGU9PXEuc2FwLktleUNvZGVzLkFSUk9XX0RPV04pJiZrKGUpfX0sc2FwaW5jcmVhc2U6e3NOYW1lOiJzYXBpbmNyZWFzZSIsYVR5cGVzOlsia2V5ZG93biJdLGZuQ2hlY2s6ZnVuY3Rpb24oZSl7dmFyIHI9c2FwLnVpLmdldENvcmUoKS5nZXRDb25maWd1cmF0aW9uKCkuZ2V0UlRMKCk7dmFyIE49cj9xLnNhcC5LZXlDb2Rlcy5BUlJPV19MRUZUOnEuc2FwLktleUNvZGVzLkFSUk9XX1JJR0hUO3JldHVybihlLmtleUNvZGU9PU58fGUua2V5Q29kZT09cS5zYXAuS2V5Q29kZXMuQVJST1dfVVApJiYhayhlKX19LHNhcGluY3JlYXNlbW9kaWZpZXJzOntzTmFtZToic2FwaW5jcmVhc2Vtb2RpZmllcnMiLGFUeXBlczpbImtleWRvd24iXSxmbkNoZWNrOmZ1bmN0aW9uKGUpe3ZhciByPXNhcC51aS5nZXRDb3JlKCkuZ2V0Q29uZmlndXJhdGlvbigpLmdldFJUTCgpO3ZhciBOPXI/cS5zYXAuS2V5Q29kZXMuQVJST1dfTEVGVDpxLnNhcC5LZXlDb2Rlcy5BUlJPV19SSUdIVDtyZXR1cm4oZS5rZXlDb2RlPT1OfHxlLmtleUNvZGU9PXEuc2FwLktleUNvZGVzLkFSUk9XX1VQKSYmayhlKX19LHNhcHByZXZpb3VzOntzTmFtZToic2FwcHJldmlvdXMiLGFUeXBlczpbImtleWRvd24iXSxmbkNoZWNrOmZ1bmN0aW9uKGUpe3ZhciByPXNhcC51aS5nZXRDb3JlKCkuZ2V0Q29uZmlndXJhdGlvbigpLmdldFJUTCgpO3ZhciBpPXI/cS5zYXAuS2V5Q29kZXMuQVJST1dfUklHSFQ6cS5zYXAuS2V5Q29kZXMuQVJST1dfTEVGVDtyZXR1cm4oZS5rZXlDb2RlPT1pfHxlLmtleUNvZGU9PXEuc2FwLktleUNvZGVzLkFSUk9XX1VQKSYmIWsoZSl9fSxzYXBwcmV2aW91c21vZGlmaWVyczp7c05hbWU6InNhcHByZXZpb3VzbW9kaWZpZXJzIixhVHlwZXM6WyJrZXlkb3duIl0sZm5DaGVjazpmdW5jdGlvbihlKXt2YXIgcj1zYXAudWkuZ2V0Q29yZSgpLmdldENvbmZpZ3VyYXRpb24oKS5nZXRSVEwoKTt2YXIgaT1yP3Euc2FwLktleUNvZGVzLkFSUk9XX1JJR0hUOnEuc2FwLktleUNvZGVzLkFSUk9XX0xFRlQ7cmV0dXJuKGUua2V5Q29kZT09aXx8ZS5rZXlDb2RlPT1xLnNhcC5LZXlDb2Rlcy5BUlJPV19VUCkmJmsoZSl9fSxzYXBuZXh0OntzTmFtZToic2FwbmV4dCIsYVR5cGVzOlsia2V5ZG93biJdLGZuQ2hlY2s6ZnVuY3Rpb24oZSl7dmFyIHI9c2FwLnVpLmdldENvcmUoKS5nZXRDb25maWd1cmF0aW9uKCkuZ2V0UlRMKCk7dmFyIE49cj9xLnNhcC5LZXlDb2Rlcy5BUlJPV19MRUZUOnEuc2FwLktleUNvZGVzLkFSUk9XX1JJR0hUO3JldHVybihlLmtleUNvZGU9PU58fGUua2V5Q29kZT09cS5zYXAuS2V5Q29kZXMuQVJST1dfRE9XTikmJiFrKGUpfX0sc2FwbmV4dG1vZGlmaWVyczp7c05hbWU6InNhcG5leHRtb2RpZmllcnMiLGFUeXBlczpbImtleWRvd24iXSxmbkNoZWNrOmZ1bmN0aW9uKGUpe3ZhciByPXNhcC51aS5nZXRDb3JlKCkuZ2V0Q29uZmlndXJhdGlvbigpLmdldFJUTCgpO3ZhciBOPXI/cS5zYXAuS2V5Q29kZXMuQVJST1dfTEVGVDpxLnNhcC5LZXlDb2Rlcy5BUlJPV19SSUdIVDtyZXR1cm4oZS5rZXlDb2RlPT1OfHxlLmtleUNvZGU9PXEuc2FwLktleUNvZGVzLkFSUk9XX0RPV04pJiZrKGUpfX0sc2FwZGVsYXllZGRvdWJsZWNsaWNrOntzTmFtZToic2FwZGVsYXllZGRvdWJsZWNsaWNrIixhVHlwZXM6WyJjbGljayJdLGZuQ2hlY2s6ZnVuY3Rpb24oZSl7dmFyIGk9cShlLnRhcmdldCk7dmFyIGo9ZS50aW1lU3RhbXA7dmFyIHI9aS5kYXRhKCJzYXBkZWxheWVkZG91YmxlY2xpY2tfbGFzdENsaWNrVGltZXN0YW1wIik7dmFyIHQ9cnx8MDtpLmRhdGEoInNhcGRlbGF5ZWRkb3VibGVjbGlja19sYXN0Q2xpY2tUaW1lc3RhbXAiLGopO3ZhciB1PWotdDtyZXR1cm4odT49MzAwJiZ1PD0xMzAwKX19fTt2YXIgUD1bInNhcGRvd24iLCJzYXBkb3dubW9kaWZpZXJzIiwic2Fwc2hvdyIsInNhcHVwIiwic2FwdXBtb2RpZmllcnMiLCJzYXBoaWRlIiwic2FwbGVmdCIsInNhcGxlZnRtb2RpZmllcnMiLCJzYXByaWdodCIsInNhcHJpZ2h0bW9kaWZpZXJzIiwic2FwaG9tZSIsInNhcGhvbWVtb2RpZmllcnMiLCJzYXB0b3AiLCJzYXBlbmQiLCJzYXBlbmRtb2RpZmllcnMiLCJzYXBib3R0b20iLCJzYXBwYWdldXAiLCJzYXBwYWdldXBtb2RpZmllcnMiLCJzYXBwYWdlZG93biIsInNhcHBhZ2Vkb3dubW9kaWZpZXJzIiwic2Fwc2VsZWN0Iiwic2Fwc2VsZWN0bW9kaWZpZXJzIiwic2Fwc3BhY2UiLCJzYXBzcGFjZW1vZGlmaWVycyIsInNhcGVudGVyIiwic2FwZW50ZXJtb2RpZmllcnMiLCJzYXBleHBhbmQiLCJzYXBiYWNrc3BhY2UiLCJzYXBiYWNrc3BhY2Vtb2RpZmllcnMiLCJzYXBkZWxldGUiLCJzYXBkZWxldGVtb2RpZmllcnMiLCJzYXBleHBhbmRtb2RpZmllcnMiLCJzYXBjb2xsYXBzZSIsInNhcGNvbGxhcHNlbW9kaWZpZXJzIiwic2FwY29sbGFwc2VhbGwiLCJzYXBlc2NhcGUiLCJzYXB0YWJuZXh0Iiwic2FwdGFicHJldmlvdXMiLCJzYXBza2lwZm9yd2FyZCIsInNhcHNraXBiYWNrIiwic2FwcHJldmlvdXMiLCJzYXBwcmV2aW91c21vZGlmaWVycyIsInNhcG5leHQiLCJzYXBuZXh0bW9kaWZpZXJzIiwic2FwZGVjcmVhc2UiLCJzYXBkZWNyZWFzZW1vZGlmaWVycyIsInNhcGluY3JlYXNlIiwic2FwaW5jcmVhc2Vtb2RpZmllcnMiLCJzYXBkZWxheWVkZG91YmxlY2xpY2siXTsoZnVuY3Rpb24gaW5pdFRvdWNoRXZlbnRTdXBwb3J0KCl7cS5zYXAudG91Y2hFdmVudE1vZGU9IlNJTSI7dmFyIEE9W107dmFyIGU9W107aWYoc2FwLnVpLkRldmljZS5zdXBwb3J0LnRvdWNoKXtxLnNhcC50b3VjaEV2ZW50TW9kZT0iT04iO3EuZXZlbnQucHJvcHMucHVzaCgidG91Y2hlcyIsInRhcmdldFRvdWNoZXMiLCJjaGFuZ2VkVG91Y2hlcyIpfXZhciBqPWZ1bmN0aW9uKHgseSxIKXt2YXIgej0iX18iK3grIkhhbmRsZXIiO3ZhciBCPSJzYXAiK3g7QS5wdXNoKEIpO2UucHVzaCh7c05hbWU6eCxhVHlwZXM6W0JdLGZuQ2hlY2s6ZnVuY3Rpb24oRSl7cmV0dXJuIHRydWV9fSk7cS5ldmVudC5zcGVjaWFsW0JdPXthZGQ6ZnVuY3Rpb24oQyl7dmFyIEQ9dGhpcywkPXEodGhpcyksRT17ZG9tUmVmOkQsZXZlbnROYW1lOngsc2FwRXZlbnROYW1lOkIsZXZlbnRIYW5kbGU6Q307dmFyIEc9ZnVuY3Rpb24oSil7SChKLEUpfTtDLl9fc2FwU2ltdWxhdGVkRXZlbnRIYW5kbGVyPUc7Zm9yKHZhciBpPTA7aTx5Lmxlbmd0aDtpKyspeyQub24oeVtpXSxHKX19LHJlbW92ZTpmdW5jdGlvbihDKXt2YXIgJD1xKHRoaXMpO3ZhciBIPUMuX19zYXBTaW11bGF0ZWRFdmVudEhhbmRsZXI7JC5yZW1vdmVEYXRhKHorQy5ndWlkKTtmb3IodmFyIGk9MDtpPHkubGVuZ3RoO2krKyl7cS5ldmVudC5yZW1vdmUodGhpcyx5W2ldLEgpfX19fTt2YXIgTT1mdW5jdGlvbihFLEMpe3ZhciBEPXEoQy5kb21SZWYpO2lmKEUuaXNNYXJrZWQoImRlbGF5ZWRNb3VzZUV2ZW50Iikpe3JldHVybn1pZighKEUudHlwZSE9Im1vdXNlb3V0Inx8KEUudHlwZT09PSJtb3VzZW91dCImJnEuc2FwLmNoZWNrTW91c2VFbnRlck9yTGVhdmUoRSxDLmRvbVJlZikpKSl7dmFyIHg9dHJ1ZTt2YXIgeT1ELmRhdGEoIl9fdG91Y2hzdGFydF9jb250cm9sIik7aWYoeSl7dmFyIHo9cS5zYXAuZG9tQnlJZCh5KTtpZih6JiZxLnNhcC5jaGVja01vdXNlRW50ZXJPckxlYXZlKEUseikpe3g9ZmFsc2V9fWlmKHgpe3JldHVybn19dmFyIE49cS5ldmVudC5maXgoRS5vcmlnaW5hbEV2ZW50fHxFKTtOLnR5cGU9Qy5zYXBFdmVudE5hbWU7aWYoTi5pc01hcmtlZCgiZmlyc3RVSUFyZWEiKSl7Ti5zZXRNYXJrKCJoYW5kbGVkQnlVSUFyZWEiLGZhbHNlKX12YXIgQj1be2lkZW50aWZpZXI6MSxwYWdlWDpOLnBhZ2VYLHBhZ2VZOk4ucGFnZVksY2xpZW50WDpOLmNsaWVudFgsY2xpZW50WTpOLmNsaWVudFksc2NyZWVuWDpOLnNjcmVlblgsc2NyZWVuWTpOLnNjcmVlblksdGFyZ2V0Ok4udGFyZ2V0LHJhZGl1c1g6MSxyYWRpdXNZOjEscm90YXRpb25BbmdsZTowfV07c3dpdGNoKEMuZXZlbnROYW1lKXtjYXNlInRvdWNoc3RhcnQiOmNhc2UidG91Y2htb3ZlIjpOLnRvdWNoZXM9Ti5jaGFuZ2VkVG91Y2hlcz1OLnRhcmdldFRvdWNoZXM9QjticmVhaztjYXNlInRvdWNoZW5kIjpOLmNoYW5nZWRUb3VjaGVzPUI7Ti50b3VjaGVzPU4udGFyZ2V0VG91Y2hlcz1bXTticmVha31pZihDLmV2ZW50TmFtZT09PSJ0b3VjaHN0YXJ0Inx8RC5kYXRhKCJfX3RvdWNoX2luX3Byb2dyZXNzIikpe0QuZGF0YSgiX190b3VjaF9pbl9wcm9ncmVzcyIsIlgiKTt2YXIgRz1xLmZuLmNvbnRyb2w/cShFLnRhcmdldCkuY29udHJvbCgwKTpudWxsO2lmKEcpe0QuZGF0YSgiX190b3VjaHN0YXJ0X2NvbnRyb2wiLEcuZ2V0SWQoKSl9aWYoRS50eXBlPT09Im1vdXNlb3V0Iil7Ti5zZXRNYXJrZWQoImZyb21Nb3VzZW91dCIpfUMuZXZlbnRIYW5kbGUuaGFuZGxlci5jYWxsKEMuZG9tUmVmLE4pO2lmKEMuZXZlbnROYW1lPT09InRvdWNoZW5kIiYmIU4uaXNNYXJrZWQoImZyb21Nb3VzZW91dCIpKXtELnJlbW92ZURhdGEoIl9fdG91Y2hfaW5fcHJvZ3Jlc3MiKTtELnJlbW92ZURhdGEoIl9fdG91Y2hzdGFydF9jb250cm9sIil9fX07aigidG91Y2hzdGFydCIsWyJtb3VzZWRvd24iXSxNKTtqKCJ0b3VjaGVuZCIsWyJtb3VzZXVwIiwibW91c2VvdXQiXSxNKTtqKCJ0b3VjaG1vdmUiLFsibW91c2Vtb3ZlIl0sTSk7ZnVuY3Rpb24gcigpe3ZhciBDPXdpbmRvd1sic2FwLXVpLWNvbmZpZyJdfHx7fSxMPUMubGlic3x8IiI7ZnVuY3Rpb24geChLKXtyZXR1cm4gZG9jdW1lbnQubG9jYXRpb24uc2VhcmNoLmluZGV4T2YoInNhcC11aS0iK0spPi0xfHwhIUNbSy50b0xvd2VyQ2FzZSgpXX1yZXR1cm4gc2FwLnVpLkRldmljZS5zdXBwb3J0LnRvdWNofHx4KCJ4eC10ZXN0LW1vYmlsZSIpfHx4KCJ4eC1mYWtlT1MiKXx8TC5tYXRjaCgvc2FwLm1cYi8pfWlmKHIoKSl7cS5zYXAucmVxdWlyZSgic2FwLnVpLnRoaXJkcGFydHkuanF1ZXJ5LW1vYmlsZS1jdXN0b20iKTtpZihzYXAudWkuRGV2aWNlLnN1cHBvcnQudG91Y2gpe3ZhciBGPWZhbHNlLHQ9cS52bW91c2UubW92ZURpc3RhbmNlVGhyZXNob2xkLHUsdixPLHc7dmFyIFQ9ZnVuY3Rpb24oRSxDKXt2YXIgeD1FLm9yaWdpbmFsRXZlbnQudG91Y2hlc1swXSx5O2lmKEUudHlwZT09PSJ0b3VjaHN0YXJ0Iil7Rj1mYWxzZTt1PXgucGFnZVg7dj14LnBhZ2VZO089TWF0aC5yb3VuZCh4LnBhZ2VYLXEoRS50YXJnZXQpLm9mZnNldCgpLmxlZnQpO3c9TWF0aC5yb3VuZCh4LnBhZ2VZLXEoRS50YXJnZXQpLm9mZnNldCgpLnRvcCl9ZWxzZSBpZihFLnR5cGU9PT0idG91Y2htb3ZlIil7Rj1GfHwoTWF0aC5hYnMoeC5wYWdlWC11KT50fHxNYXRoLmFicyh4LnBhZ2VZLXYpPnQpfXZhciBOPXEuZXZlbnQuZml4KEUub3JpZ2luYWxFdmVudHx8RSk7Ti50eXBlPUMuc2FwRXZlbnROYW1lO2lmKE4uaXNNYXJrZWQoImZpcnN0VUlBcmVhIikpe04uc2V0TWFyaygiaGFuZGxlZEJ5VUlBcmVhIixmYWxzZSl9ZGVsZXRlIE4udG91Y2hlcztkZWxldGUgTi5jaGFuZ2VkVG91Y2hlcztkZWxldGUgTi50YXJnZXRUb3VjaGVzO3ZhciB6PShDLmV2ZW50TmFtZT09PSJtb3VzZXVwIj9FLmNoYW5nZWRUb3VjaGVzWzBdOkUudG91Y2hlc1swXSk7Ti5zY3JlZW5YPXouc2NyZWVuWDtOLnNjcmVlblk9ei5zY3JlZW5ZO04uY2xpZW50WD16LmNsaWVudFg7Ti5jbGllbnRZPXouY2xpZW50WTtOLmN0cmxLZXk9ei5jdHJsS2V5O04uYWx0S2V5PXouYWx0S2V5O04uc2hpZnRLZXk9ei5zaGlmdEtleTtOLmJ1dHRvbj0oc2FwLnVpLkRldmljZS5icm93c2VyLm1zaWUmJnNhcC51aS5EZXZpY2UuYnJvd3Nlci52ZXJzaW9uPD04PzE6MCk7eT1OLmlzTWFya2VkKCJoYW5kbGVkQnlVSUFyZWEiKTtDLmV2ZW50SGFuZGxlLmhhbmRsZXIuY2FsbChDLmRvbVJlZixOKTtpZihFLnR5cGU9PT0idG91Y2hlbmQiJiYheSYmIUYpe04udHlwZT0iY2xpY2siO04uc2V0TWFyaygiaGFuZGxlZEJ5VUlBcmVhIixmYWxzZSk7Ti5vZmZzZXRYPU87Ti5vZmZzZXRZPXc7Qy5ldmVudEhhbmRsZS5oYW5kbGVyLmNhbGwoQy5kb21SZWYsTil9fTtxLnNhcC5kaXNhYmxlVG91Y2hUb01vdXNlSGFuZGxpbmcoKTtxLnNhcC5fdG91Y2hUb01vdXNlRXZlbnQ9ZmFsc2U7aigibW91c2Vkb3duIixbInRvdWNoc3RhcnQiXSxUKTtqKCJtb3VzZW1vdmUiLFsidG91Y2htb3ZlIl0sVCk7aigibW91c2V1cCIsWyJ0b3VjaGVuZCIsInRvdWNoY2FuY2VsIl0sVCl9QS5wdXNoKCJzd2lwZSIsInRhcCIsInN3aXBlbGVmdCIsInN3aXBlcmlnaHQiLCJzY3JvbGxzdGFydCIsInNjcm9sbHN0b3AiKTtlLnB1c2goe3NOYW1lOiJzd2lwZWJlZ2luIixhVHlwZXM6WyJzd2lwZWxlZnQiLCJzd2lwZXJpZ2h0Il0sZm5DaGVjazpmdW5jdGlvbihFKXt2YXIgUj1zYXAudWkuZ2V0Q29yZSgpLmdldENvbmZpZ3VyYXRpb24oKS5nZXRSVEwoKTtyZXR1cm4oUiYmRS50eXBlPT09InN3aXBlcmlnaHQiKXx8KCFSJiZFLnR5cGU9PT0ic3dpcGVsZWZ0Iil9fSk7ZS5wdXNoKHtzTmFtZToic3dpcGVlbmQiLGFUeXBlczpbInN3aXBlbGVmdCIsInN3aXBlcmlnaHQiXSxmbkNoZWNrOmZ1bmN0aW9uKEUpe3ZhciBSPXNhcC51aS5nZXRDb3JlKCkuZ2V0Q29uZmlndXJhdGlvbigpLmdldFJUTCgpO3JldHVybighUiYmRS50eXBlPT09InN3aXBlcmlnaHQiKXx8KFImJkUudHlwZT09PSJzd2lwZWxlZnQiKX19KX1pZihxLnNhcC5WZXJzaW9uKHEuZm4uanF1ZXJ5KS5jb21wYXJlVG8oIjEuOS4xIik8MCl7cS5zYXAuQ29udHJvbEV2ZW50cz1xLnNhcC5Db250cm9sRXZlbnRzLmNvbmNhdChBKX1lbHNle3Euc2FwLkNvbnRyb2xFdmVudHM9QS5jb25jYXQocS5zYXAuQ29udHJvbEV2ZW50cyl9Zm9yKHZhciBpPTA7aTxlLmxlbmd0aDtpKyspe3Euc2FwLlBzZXVkb0V2ZW50c1tlW2ldLnNOYW1lXT1lW2ldO1AucHVzaChlW2ldLnNOYW1lKX19KCkpO2Z1bmN0aW9uIGYoKXt2YXIgZT1xLnNhcC5Qc2V1ZG9FdmVudHMscj1bXTtmb3IodmFyIE4gaW4gZSl7aWYoZVtOXS5hVHlwZXMpe2Zvcih2YXIgaj0wLGk9ZVtOXS5hVHlwZXMubGVuZ3RoO2o8aTtqKyspe3ZhciB0PWVbTl0uYVR5cGVzW2pdO2lmKHEuaW5BcnJheSh0LHIpPT0tMSl7ci5wdXNoKHQpfX19fXJldHVybiByfXZhciBnPWYoKTtmdW5jdGlvbiBoKGUsQyxBLGkpe3JldHVybiBlLnNoaWZ0S2V5PT1pJiZlLmFsdEtleT09QSYmbChlKT09Q31mdW5jdGlvbiBrKGUpe3JldHVybiBlLnNoaWZ0S2V5fHxlLmFsdEtleXx8bChlKX1mdW5jdGlvbiBsKGUpe3JldHVybiEhKGUubWV0YUtleXx8ZS5jdHJsS2V5KX1xLkV2ZW50LnByb3RvdHlwZS5nZXRQc2V1ZG9UeXBlcz1mdW5jdGlvbigpe3ZhciBlPVtdO2lmKHEuaW5BcnJheSh0aGlzLnR5cGUsZykhPS0xKXt2YXIgaj1QO3ZhciByPWoubGVuZ3RoO3ZhciB0PW51bGw7Zm9yKHZhciBpPTA7aTxyO2krKyl7dD1xLnNhcC5Qc2V1ZG9FdmVudHNbaltpXV07aWYodC5hVHlwZXMmJnEuaW5BcnJheSh0aGlzLnR5cGUsdC5hVHlwZXMpPi0xJiZ0LmZuQ2hlY2smJnQuZm5DaGVjayh0aGlzKSl7ZS5wdXNoKHQuc05hbWUpfX19dGhpcy5nZXRQc2V1ZG9UeXBlcz1mdW5jdGlvbigpe3JldHVybiBlLnNsaWNlKCl9O3JldHVybiBlLnNsaWNlKCl9O3EuRXZlbnQucHJvdG90eXBlLmlzUHNldWRvVHlwZT1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmdldFBzZXVkb1R5cGVzKCk7aWYodCl7cmV0dXJuIHEuaW5BcnJheSh0LGUpPi0xfWVsc2V7cmV0dXJuIGUubGVuZ3RoPjB9fTt2YXIgXz1xLkV2ZW50LnByb3RvdHlwZS5wcmV2ZW50RGVmYXVsdDtxLkV2ZW50LnByb3RvdHlwZS5wcmV2ZW50RGVmYXVsdD1mdW5jdGlvbigpe18uYXBwbHkodGhpcyxhcmd1bWVudHMpO3ZhciBlPXRoaXMub3JpZ2luYWxFdmVudDtpZighZSl7cmV0dXJufWlmKGUua2V5Q29kZSE9MCl7dHJ5e2lmKCFzYXAudWkuRGV2aWNlLmJyb3dzZXIuZmlyZWZveCl7ZS5rZXlDb2RlPTB9fWNhdGNoKGkpe319fTtxLnNhcC5iaW5kQW55RXZlbnQ9ZnVuY3Rpb24gYmluZEFueUV2ZW50KEMpe2lmKEMpe3EoZG9jdW1lbnQpLmJpbmQocS5zYXAuQ29udHJvbEV2ZW50cy5qb2luKCIgIiksQyl9fTtxLnNhcC51bmJpbmRBbnlFdmVudD1mdW5jdGlvbiB1bmJpbmRBbnlFdmVudChDKXtpZihDKXtxKGRvY3VtZW50KS51bmJpbmQocS5zYXAuQ29udHJvbEV2ZW50cy5qb2luKCIgIiksQyl9fTtxLnNhcC5jaGVja01vdXNlRW50ZXJPckxlYXZlPWZ1bmN0aW9uIGNoZWNrTW91c2VFbnRlck9yTGVhdmUoRSxEKXtpZihFLnR5cGUhPSJtb3VzZW92ZXIiJiZFLnR5cGUhPSJtb3VzZW91dCIpe3JldHVybiBmYWxzZX12YXIgaT1mYWxzZTt2YXIgaj1EO3ZhciByPUUucmVsYXRlZFRhcmdldDt0cnl7d2hpbGUociYmciE9PWope3I9ci5wYXJlbnROb2RlfWlmKHIhPT1qKXtpPXRydWV9fWNhdGNoKGUpe31yZXR1cm4gaX07cS5zYXAuaXNTcGVjaWFsS2V5PWZ1bmN0aW9uKGUpe3ZhciBLPXEuc2FwLktleUNvZGVzLGk9ZS53aGljaCxqPW4oZSl8fHAoZSl8fChpPj0zMyYmaTw9MzYpfHwoaT49NDQmJmk8PTQ2KXx8KGk+PTExMiYmaTw9MTIzKXx8KGk9PT1LLkJSRUFLKXx8KGk9PT1LLkJBQ0tTUEFDRSl8fChpPT09Sy5UQUIpfHwoaT09PUsuRU5URVIpfHwoaT09PUsuRVNDQVBFKXx8KGk9PT1LLlNDUk9MTF9MT0NLKTtzd2l0Y2goZS50eXBlKXtjYXNlImtleWRvd24iOmNhc2Uia2V5dXAiOnJldHVybiBqO2Nhc2Uia2V5cHJlc3MiOnJldHVybihpPT09MHx8aT09PUsuQkFDS1NQQUNFfHxpPT09Sy5FU0NBUEV8fGk9PT1LLkVOVEVSKXx8ZmFsc2U7ZGVmYXVsdDpyZXR1cm4gZmFsc2V9fTtmdW5jdGlvbiBuKGUpe3ZhciBLPXEuc2FwLktleUNvZGVzLGk9ZS53aGljaDtyZXR1cm4oaT09PUsuU0hJRlQpfHwoaT09PUsuQ09OVFJPTCl8fChpPT09Sy5BTFQpfHwoaT09PUsuQ0FQU19MT0NLKXx8KGk9PT1LLk5VTV9MT0NLKX1mdW5jdGlvbiBwKGUpe3ZhciBLPWUud2hpY2gsQT0oSz49MzcmJks8PTQwKTtzd2l0Y2goZS50eXBlKXtjYXNlImtleWRvd24iOmNhc2Uia2V5dXAiOnJldHVybiBBO2Nhc2Uia2V5cHJlc3MiOnJldHVybiBLPT09MDtkZWZhdWx0OnJldHVybiBmYWxzZX19cS5FdmVudC5wcm90b3R5cGUuZ2V0T2Zmc2V0WD1mdW5jdGlvbigpe2lmKHRoaXMudHlwZT09J2NsaWNrJyl7aWYodGhpcy5vZmZzZXRYKXtyZXR1cm4gdGhpcy5vZmZzZXRYfWlmKHRoaXMubGF5ZXJYKXtyZXR1cm4gdGhpcy5sYXllclh9aWYodGhpcy5vcmlnaW5hbEV2ZW50LmxheWVyWCl7cmV0dXJuIHRoaXMub3JpZ2luYWxFdmVudC5sYXllclh9fXJldHVybiAwfTtxLkV2ZW50LnByb3RvdHlwZS5nZXRPZmZzZXRZPWZ1bmN0aW9uKCl7aWYodGhpcy50eXBlPT0nY2xpY2snKXtpZih0aGlzLm9mZnNldFkpe3JldHVybiB0aGlzLm9mZnNldFl9aWYodGhpcy5sYXllclkpe3JldHVybiB0aGlzLmxheWVyWX1pZih0aGlzLm9yaWdpbmFsRXZlbnQubGF5ZXJZKXtyZXR1cm4gdGhpcy5vcmlnaW5hbEV2ZW50LmxheWVyWX19cmV0dXJuIDB9O3ZhciBTPXEuRXZlbnQucHJvdG90eXBlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbjtxLkV2ZW50LnByb3RvdHlwZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb249ZnVuY3Rpb24oZSl7Uy5hcHBseSh0aGlzLGFyZ3VtZW50cyk7aWYoZSl7dGhpcy5fYklzU3RvcEhhbmRsZXJzPXRydWV9fTtxLkV2ZW50LnByb3RvdHlwZS5pc0ltbWVkaWF0ZUhhbmRsZXJQcm9wYWdhdGlvblN0b3BwZWQ9ZnVuY3Rpb24oKXtyZXR1cm4hIXRoaXMuX2JJc1N0b3BIYW5kbGVyc307cS5FdmVudC5wcm90b3R5cGUuc2V0TWFyaz1mdW5jdGlvbihLLHYpe0s9S3x8ImhhbmRsZWRCeUNvbnRyb2wiO3Y9YXJndW1lbnRzLmxlbmd0aDwyP3RydWU6djsodGhpcy5vcmlnaW5hbEV2ZW50fHx0aGlzKVsiX3NhcHVpXyIrS109dn07cS5FdmVudC5wcm90b3R5cGUuc2V0TWFya2VkPXEuRXZlbnQucHJvdG90eXBlLnNldE1hcms7cS5FdmVudC5wcm90b3R5cGUuaXNNYXJrZWQ9ZnVuY3Rpb24oSyl7Sz1LfHwiaGFuZGxlZEJ5Q29udHJvbCI7cmV0dXJuISEodGhpcy5vcmlnaW5hbEV2ZW50fHx0aGlzKVsiX3NhcHVpXyIrS119O3JldHVybiBxfSxmYWxzZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ2pxdWVyeS5zYXAuaGlzdG9yeScpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ2pxdWVyeS5zYXAuaGlzdG9yeScpO3NhcC51aS5kZWZpbmUoImpxdWVyeS5zYXAuaGlzdG9yeSIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ2pxdWVyeS5zYXAuc3RyaW5ncyddLGZ1bmN0aW9uKHEpeyJ1c2Ugc3RyaWN0IjsoZnVuY3Rpb24oJCx3KXt2YXIgcz0iX3NraXAiLHI9L1x8aWQtWzAtOV0rLVswLTldKy8sYT1uZXcgUmVnRXhwKHMrIlswLTldKiQiKSxiPVtdLGg9W10sUz17fSxjPTAsZD11bmRlZmluZWQsST0ifCIsSD1bXSxlPWZhbHNlLGYsZz1mYWxzZTskLnNhcC5oaXN0b3J5PWZ1bmN0aW9uKEEpe2lmKCFxLmlzUGxhaW5PYmplY3QoQSkpe3JldHVybn1pZighZyl7dmFyIFc9JCh3KSxCPSh3LmxvY2F0aW9uLmhyZWYuc3BsaXQoIiMiKVsxXXx8IiIpO1cuYmluZCgnaGFzaGNoYW5nZScsayk7aWYoJC5pc0FycmF5KEEucm91dGVzKSl7dmFyIGksQztmb3IoaT0wO2k8QS5yb3V0ZXMubGVuZ3RoO2krKyl7Qz1BLnJvdXRlc1tpXTtpZihDLnBhdGgmJkMuaGFuZGxlcil7JC5zYXAuaGlzdG9yeS5hZGRSb3V0ZShDLnBhdGgsQy5oYW5kbGVyKX19fWlmKHEuaXNGdW5jdGlvbihBLmRlZmF1bHRIYW5kbGVyKSl7Zj1BLmRlZmF1bHRIYW5kbGVyfWgucHVzaChCKTtpZihCLmxlbmd0aD4xKXtXLnRyaWdnZXIoImhhc2hjaGFuZ2UiLFt0cnVlXSl9ZWxzZXtkPUJ9Zz10cnVlfX07JC5zYXAuaGlzdG9yeS5hZGRIaXN0b3J5PWZ1bmN0aW9uKGksQSxCLFYpe3ZhciBDLEQ7aWYoQj09PXVuZGVmaW5lZCl7Qj10cnVlfWlmKCFWKXtEPW4oaSxBKTtDPW8oRCk7aWYoQyl7RCs9KEkrQyl9RCs9KEkrKEI/IjEiOiIwIikpfWVsc2V7RD1tKGQpfUgucHVzaChEKTtTW0RdPXRydWU7dy5sb2NhdGlvbi5oYXNoPUQ7cmV0dXJuIER9OyQuc2FwLmhpc3RvcnkuYWRkVmlydHVhbEhpc3Rvcnk9ZnVuY3Rpb24oKXskLnNhcC5oaXN0b3J5LmFkZEhpc3RvcnkoIiIsdW5kZWZpbmVkLGZhbHNlLHRydWUpfTskLnNhcC5oaXN0b3J5LmFkZFJvdXRlPWZ1bmN0aW9uKGksQSxUKXtpZihUKXtBPXEucHJveHkoQSxUKX12YXIgUj17fTtSLnNJZGVudGlmaWVyPWk7UlsnYWN0aW9uJ109QTtiLnB1c2goUik7cmV0dXJuIHRoaXN9OyQuc2FwLmhpc3Rvcnkuc2V0RGVmYXVsdEhhbmRsZXI9ZnVuY3Rpb24oaSl7Zj1pfTskLnNhcC5oaXN0b3J5LmdldERlZmF1bHRIYW5kbGVyPWZ1bmN0aW9uKCl7cmV0dXJuIGZ9OyQuc2FwLmhpc3RvcnkuYmFja1RvSGFzaD1mdW5jdGlvbihpKXtpPWl8fCIiO3ZhciBBO2lmKGgubGVuZ3RoPT09MSl7aWYoJC5pc0Z1bmN0aW9uKGYpKXtmKCl9fWVsc2V7QT1qKGQsaSk7aWYoQTwwKXt3Lmhpc3RvcnkuZ28oQSl9ZWxzZXtxLnNhcC5sb2cuZXJyb3IoImpRdWVyeS5zYXAuaGlzdG9yeS5iYWNrVG9IYXNoOiAiK2krImlzIG5vdCBpbiB0aGUgaGlzdG9yeSBzdGFjayBvciBpdCdzIGFmdGVyIHRoZSBjdXJyZW50IGhhc2giKX19fTskLnNhcC5oaXN0b3J5LmJhY2tUaHJvdWdoUGF0aD1mdW5jdGlvbihQKXtQPVB8fCIiO1A9dy5lbmNvZGVVUklDb21wb25lbnQoUCk7dmFyIGk7aWYoaC5sZW5ndGg9PT0xKXtpZigkLmlzRnVuY3Rpb24oZikpe2YoKX19ZWxzZXtpPWooZCxQLHRydWUpO2lmKGk8MCl7dy5oaXN0b3J5LmdvKGkpfWVsc2V7cS5zYXAubG9nLmVycm9yKCJqUXVlcnkuc2FwLmhpc3RvcnkuYmFja1Rocm91Z2hQYXRoOiB0aGVyZSdzIG5vIGhpc3Rvcnkgc3RhdGUgd2hpY2ggaGFzIHRoZSAiK1ArIiBpZGVudGlmaWVyIGluIHRoZSBoaXN0b3J5IHN0YWNrIGJlZm9yZSB0aGUgY3VycmVudCBoYXNoIil9fX07JC5zYXAuaGlzdG9yeS5iYWNrPWZ1bmN0aW9uKGkpe2lmKGgubGVuZ3RoPT09MSl7aWYoJC5pc0Z1bmN0aW9uKGYpKXtmKCQuc2FwLmhpc3RvcnkuTmF2VHlwZS5CYWNrKX19ZWxzZXtpZighaSl7aT0xfXcuaGlzdG9yeS5nbygtMSppKX19OyQuc2FwLmhpc3RvcnkuTmF2VHlwZT17fTskLnNhcC5oaXN0b3J5Lk5hdlR5cGUuQmFjaz0iX2JhY2siOyQuc2FwLmhpc3RvcnkuTmF2VHlwZS5Gb3J3YXJkPSJfZm9yd2FyZCI7JC5zYXAuaGlzdG9yeS5OYXZUeXBlLkJvb2ttYXJrPSJfYm9va21hcmsiOyQuc2FwLmhpc3RvcnkuTmF2VHlwZS5Vbmtub3duPSJfdW5rbm93biI7ZnVuY3Rpb24gaihDLFQsUCl7dmFyIEE9JC5pbkFycmF5KEMsaCksQixpLEQ7aWYoQT4wKXtpZihQKXtmb3IoaT1BLTE7aT49MDtpLS0pe0Q9aFtpXTtpZihELmluZGV4T2YoVCk9PT0wJiYhdShEKSl7cmV0dXJuIGktQX19fWVsc2V7Qj0kLmluQXJyYXkoVCxoKTtpZigoQj09PS0xKSYmVC5sZW5ndGg9PT0wKXtyZXR1cm4tMSpBfWlmKChCPi0xKSYmKEI8QSkpe3JldHVybiBCLUF9fX1yZXR1cm4gMH1mdW5jdGlvbiBrKEUsTSl7dmFyIGk9KHcubG9jYXRpb24uaHJlZi5zcGxpdCgiIyIpWzFdfHwiIik7aT1sKGkpO2lmKE18fCFTW2ldKXtILnB1c2goaSl9aWYoIWUpe2U9dHJ1ZTtpZihILmxlbmd0aD4wKXt2YXIgQT1ILnNoaWZ0KCk7aWYoU1tBXSl7dChBKTtkZWxldGUgU1tBXX1lbHNle3goQSl9ZD1BfWU9ZmFsc2V9fWZ1bmN0aW9uIHAoVSl7dmFyIGk9VS5pbmRleE9mKCIjIik7aWYoaT09PS0xKXtyZXR1cm4iIn1lbHNlIGlmKGk+MCYmaSE9PVUubGVuZ3RoLTEpe3JldHVybiBVLnNsaWNlKGkrMSl9fWZ1bmN0aW9uIGwoaSxSKXt2YXIgQT1pLEI9aT9pLmluZGV4T2YoIiMiKTotMSxDLEQ7aWYoQj09PTApe0E9QS5zbGljZShCKzEpfWlmKFIpe0E9QS5yZXBsYWNlKHIsIiIpfXJldHVybiBBfWZ1bmN0aW9uIG0oaSl7dmFyIFA9aT9pOiIiO2lmKHUoUCkpe3ZhciBBPVAubGFzdEluZGV4T2Yocyk7UD1QLnNsaWNlKDAsQSl9cmV0dXJuIFArcytjKyt9ZnVuY3Rpb24gbihpLEEpe3ZhciBFPXcuZW5jb2RlVVJJQ29tcG9uZW50KGkpO3ZhciBCPXcuZW5jb2RlVVJJQ29tcG9uZW50KHcuSlNPTi5zdHJpbmdpZnkoQSkpO3JldHVybiBFK0krQn1mdW5jdGlvbiBvKEEpe3ZhciBCPSQuaW5BcnJheShkLGgpLFQsaSxDO2lmKEI+LTEpe2ZvcihpPTA7aTxCKzE7aSsrKXtDPWhbaV07aWYoQy5zbGljZSgwLEMubGVuZ3RoLTIpPT09QSl7cmV0dXJuIHEuc2FwLnVpZCgpfX19cmV0dXJuIiJ9ZnVuY3Rpb24gdChpKXt2YXIgQT0kLmluQXJyYXkoZCxoKTtpZighKEE9PT0tMXx8QT09PWgubGVuZ3RoLTEpKXtoLnNwbGljZShBKzEsaC5sZW5ndGgtMS1BKX1oLnB1c2goaSl9ZnVuY3Rpb24gdShpKXtyZXR1cm4gYS50ZXN0KGkpfWZ1bmN0aW9uIHYoQyxGKXt2YXIgQT0kLmluQXJyYXkoQyxoKSxpO2lmKEEhPT0tMSl7aWYoRil7Zm9yKGk9QTtpPGgubGVuZ3RoO2krKyl7aWYoIXUoaFtpXSkpe3JldHVybiBpLUF9fX1lbHNle2ZvcihpPUE7aT49MDtpLS0pe2lmKCF1KGhbaV0pKXtyZXR1cm4gaS1BfX1yZXR1cm4tMSooQSsxKX19fWZ1bmN0aW9uIHgoQSl7dmFyIFIsQixpLFA9QSxDLEQsTixFO2lmKGQ9PT11bmRlZmluZWQpe0Q9eihBKTtpZighRHx8IUQuYkJvb2ttYXJrYWJsZSl7aWYocS5pc0Z1bmN0aW9uKGYpKXtmKCQuc2FwLmhpc3RvcnkuTmF2VHlwZS5Cb29rbWFyayl9cmV0dXJufX1pZihBLmxlbmd0aD09PTApe2lmKHEuaXNGdW5jdGlvbihmKSl7ZigkLnNhcC5oaXN0b3J5Lk5hdlR5cGUuQmFjayl9fWVsc2V7Tj1xLmluQXJyYXkoQSxoKTtpZihOPT09MCl7RD16KEEpO2lmKCFEfHwhRC5iQm9va21hcmthYmxlKXtpZihxLmlzRnVuY3Rpb24oZikpe2YoJC5zYXAuaGlzdG9yeS5OYXZUeXBlLkJhY2spfXJldHVybn19aWYodShBKSl7aWYodShkKSl7Qj12KEEsZmFsc2UpO3cuaGlzdG9yeS5nbyhCKX1lbHNle3ZhciBGPW5ldyBSZWdFeHAocS5zYXAuZXNjYXBlUmVnRXhwKGQrcykrIlswLTldKiQiKTtpZihGLnRlc3QoQSkpe0I9dihBLHRydWUpO2lmKEIpe3cuaGlzdG9yeS5nbyhCKX1lbHNle3cuaGlzdG9yeS5iYWNrKCl9fWVsc2V7Qj12KEEsZmFsc2UpO3cuaGlzdG9yeS5nbyhCKX19fWVsc2V7aWYoTj09PS0xKXtFPSQuc2FwLmhpc3RvcnkuTmF2VHlwZS5Vbmtub3duO2gucHVzaChBKX1lbHNle2lmKHEuaW5BcnJheShkLGgsTisxKT09PS0xKXtFPSQuc2FwLmhpc3RvcnkuTmF2VHlwZS5Gb3J3YXJkfWVsc2V7RT0kLnNhcC5oaXN0b3J5Lk5hdlR5cGUuQmFja319RD16KEEpO2lmKEQpe1I9eShELnNJZGVudGlmaWVyKTtpZihSKXtSLmFjdGlvbi5hcHBseShudWxsLFtELm9TdGF0ZURhdGEsRV0pfX1lbHNle3Euc2FwLmxvZy5lcnJvcigiaGFzaCBmb3JtYXQgZXJyb3IhIFRoZSBjdXJyZW50IEhhc2g6ICIrQSl9fX19ZnVuY3Rpb24geShBKXt2YXIgaTtmb3IoaT0wO2k8Yi5sZW5ndGg7aSsrKXtpZihiW2ldLnNJZGVudGlmaWVyPT09QSl7cmV0dXJuIGJbaV19fX1mdW5jdGlvbiB6KEEpe2lmKHUoQSkpe3ZhciBpPUEubGFzdEluZGV4T2Yocyk7QT1BLnNsaWNlKDAsaSl9dmFyIFA9QS5zcGxpdChJKSxSPXt9O2lmKFAubGVuZ3RoPT09NHx8UC5sZW5ndGg9PT0zKXtSLnNJZGVudGlmaWVyPXcuZGVjb2RlVVJJQ29tcG9uZW50KFBbMF0pO1Iub1N0YXRlRGF0YT13LkpTT04ucGFyc2Uody5kZWNvZGVVUklDb21wb25lbnQoUFsxXSkpO2lmKFAubGVuZ3RoPT09NCl7Ui51aWQ9UFsyXX1SLmJCb29rbWFya2FibGU9UFtQLmxlbmd0aC0xXT09PSIwIj9mYWxzZTp0cnVlO3JldHVybiBSfWVsc2V7cmV0dXJuIG51bGx9fX0pKHEsdGhpcyk7cmV0dXJuIHF9LGZhbHNlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnanF1ZXJ5LnNhcC5tb2JpbGUnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdqcXVlcnkuc2FwLm1vYmlsZScpO3NhcC51aS5kZWZpbmUoImpxdWVyeS5zYXAubW9iaWxlIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL0RldmljZScsJ2pxdWVyeS5zYXAuZG9tJywnanF1ZXJ5LnNhcC5ldmVudHMnXSxmdW5jdGlvbihxLEQpeyJ1c2Ugc3RyaWN0IjsoZnVuY3Rpb24oJCl7dmFyIEY9Lyg/Olw/fCYpc2FwLXVpLXh4LWZha2VPUz0oW14mXSspLzskLnNhcC5zaW11bGF0ZU1vYmlsZU9uRGVza3RvcD1mYWxzZTtpZigoRC5icm93c2VyLndlYmtpdHx8KEQuYnJvd3Nlci5tc2llJiZELmJyb3dzZXIudmVyc2lvbj49MTApKSYmIXEuc3VwcG9ydC50b3VjaCl7dmFyIHI9ZG9jdW1lbnQubG9jYXRpb24uc2VhcmNoLm1hdGNoKEYpO3ZhciBhPXImJnJbMV18fHEuc2FwLmJ5SWQoInNhcC11aS1ib290c3RyYXAiKS5hdHRyKCJkYXRhLXNhcC11aS14eC1mYWtlT1MiKTtpZihhKXskLnNhcC5zaW11bGF0ZU1vYmlsZU9uRGVza3RvcD10cnVlO3ZhciB1PXtpb3M6Ik1vemlsbGEvNS4wIChpUGhvbmU7IENQVSBpUGhvbmUgT1MgNV8wXzEgbGlrZSBNYWMgT1MgWCkgQXBwbGVXZWJLaXQvNTM0LjQ4IChLSFRNTCwgbGlrZSBHZWNrbykgVmVyc2lvbi81LjEgTW9iaWxlLzlBNDA2IFNhZmFyaS83NTM0LjQ4LjMiLGlwaG9uZToiTW96aWxsYS81LjAgKGlQaG9uZTsgQ1BVIGlQaG9uZSBPUyA1XzBfMSBsaWtlIE1hYyBPUyBYKSBBcHBsZVdlYktpdC81MzQuNDggKEtIVE1MLCBsaWtlIEdlY2tvKSBWZXJzaW9uLzUuMSBNb2JpbGUvOUE0MDYgU2FmYXJpLzc1MzQuNDguMyIsaXBhZDoiTW96aWxsYS81LjAgKGlQYWQ7IENQVSBPUyA1XzFfMSBsaWtlIE1hYyBPUyBYKSBBcHBsZVdlYktpdC81MzQuNDYgKEtIVE1MLCBsaWtlIEdlY2tvKSBNb2JpbGUvOUIyMDYiLGFuZHJvaWQ6Ik1vemlsbGEvNS4wIChMaW51eDsgVTsgQW5kcm9pZCA0LjAuMzsgZW4tdXM7IEdULUk5MTAwIEJ1aWxkL0lNTDc0SykgQXBwbGVXZWJLaXQvNTM0LjQ2IChLSFRNTCwgbGlrZSBHZWNrbykgVmVyc2lvbi80LjAgTW9iaWxlIFNhZmFyaS81MzQuNDYiLGFuZHJvaWRfcGhvbmU6Ik1vemlsbGEvNS4wIChMaW51eDsgVTsgQW5kcm9pZCA0LjAuMzsgZW4tdXM7IEdULUk5MTAwIEJ1aWxkL0lNTDc0SykgQXBwbGVXZWJLaXQvNTM0LjQ2IChLSFRNTCwgbGlrZSBHZWNrbykgVmVyc2lvbi80LjAgTW9iaWxlIFNhZmFyaS81MzQuNDYiLGFuZHJvaWRfdGFibGV0OiJNb3ppbGxhLzUuMCAoTGludXg7IEFuZHJvaWQgNC4xLjI7IE5leHVzIDcgQnVpbGQvSlowNTRLKSBBcHBsZVdlYktpdC81MzUuMTkgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvMTguMC4xMDI1LjE2NiBTYWZhcmkvNTM1LjE5IixibGFja2JlcnJ5OiJNb3ppbGxhLzUuMCAoQkIxMDsgVG91Y2gpIEFwcGxlV2ViS2l0LzUzNy4xMCsgKEtIVE1MLCBsaWtlIEdlY2tvKSBWZXJzaW9uLzEwLjAuOS4yMzcyIE1vYmlsZSBTYWZhcmkvNTM3LjEwKyIsd2lucGhvbmU6Ik1vemlsbGEvNS4wIChjb21wYXRpYmxlOyBNU0lFIDEwLjA7IFdpbmRvd3MgUGhvbmUgOC4wOyBUcmlkZW50LzYuMDsgSUVNb2JpbGUvMTAuMDsgQVJNOyBUb3VjaDsgTk9LSUE7IEx1bWlhIDkyMCkifVthXTtpZih1JiYoRC5icm93c2VyLndlYmtpdCYmYSE9PSJ3aW5waG9uZSJ8fEQuYnJvd3Nlci5tc2llJiZhPT09IndpbnBob25lIikpe2lmKEQuYnJvd3Nlci5zYWZhcmkpe3ZhciBfPXdpbmRvdy5uYXZpZ2F0b3I7d2luZG93Lm5hdmlnYXRvcj1uZXcgT2JqZWN0KCk7d2luZG93Lm5hdmlnYXRvci5fX3Byb3RvX189Xzt3aW5kb3cubmF2aWdhdG9yLl9fZGVmaW5lR2V0dGVyX18oJ3VzZXJBZ2VudCcsZnVuY3Rpb24oKXtyZXR1cm4gdX0pfWVsc2V7T2JqZWN0LmRlZmluZVByb3BlcnR5KG5hdmlnYXRvciwidXNlckFnZW50Iix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHV9fSl9aWYoRC5icm93c2VyLndlYmtpdCl7cS5icm93c2VyLm1zaWU9cS5icm93c2VyLm9wZXJhPXEuYnJvd3Nlci5tb3ppbGxhPWZhbHNlO3EuYnJvd3Nlci53ZWJraXQ9dHJ1ZTtxLmJyb3dzZXIudmVyc2lvbj0iNTM0LjQ2In1lbHNle31ELl91cGRhdGUoJC5zYXAuc2ltdWxhdGVNb2JpbGVPbkRlc2t0b3ApfX19JC5vcz0kLmV4dGVuZCh7b3M6RC5vcy5uYW1lLHZlcnNpb246RC5vcy52ZXJzaW9uU3RyLGZWZXJzaW9uOkQub3MudmVyc2lvbn0sJC5vcyk7JC5vc1tELm9zLm5hbWVdPXRydWU7JC5leHRlbmQoJC5zdXBwb3J0LHtyZXRpbmE6d2luZG93LmRldmljZVBpeGVsUmF0aW8+PTJ9KTskLmRldmljZT0kLmV4dGVuZCh7fSwkLmRldmljZSk7JC5kZXZpY2UuaXM9JC5leHRlbmQoe3N0YW5kYWxvbmU6d2luZG93Lm5hdmlnYXRvci5zdGFuZGFsb25lLGxhbmRzY2FwZTpELm9yaWVudGF0aW9uLmxhbmRzY2FwZSxwb3J0cmFpdDpELm9yaWVudGF0aW9uLnBvcnRyYWl0LGlwaG9uZTpELm9zLmlvcyYmRC5zeXN0ZW0ucGhvbmUsaXBhZDpELm9zLmlvcyYmRC5zeXN0ZW0udGFibGV0LGFuZHJvaWRfcGhvbmU6RC5zeXN0ZW0ucGhvbmUmJkQub3MuYW5kcm9pZCxhbmRyb2lkX3RhYmxldDpELnN5c3RlbS50YWJsZXQmJkQub3MuYW5kcm9pZCx0YWJsZXQ6RC5zeXN0ZW0udGFibGV0LHBob25lOkQuc3lzdGVtLnBob25lLGRlc2t0b3A6RC5zeXN0ZW0uZGVza3RvcH0sJC5kZXZpY2UuaXMpO3ZhciBiPWZhbHNlOyQuc2FwLmluaXRNb2JpbGU9ZnVuY3Rpb24obyl7dmFyIGM9JCgiaGVhZCIpO2lmKCFiKXtiPXRydWU7bz0kLmV4dGVuZCh7fSx7dmlld3BvcnQ6dHJ1ZSxzdGF0dXNCYXI6ImRlZmF1bHQiLGhpZGVCcm93c2VyOnRydWUscHJldmVudFNjcm9sbDp0cnVlLHByZXZlbnRQaG9uZU51bWJlckRldGVjdGlvbjp0cnVlLHVzZUZ1bGxTY3JlZW5IZWlnaHQ6dHJ1ZSxob21lSWNvblByZWNvbXBvc2VkOmZhbHNlfSxvKTtpZihELm9zLmlvcyYmby5wcmV2ZW50UGhvbmVOdW1iZXJEZXRlY3Rpb24pe2MuYXBwZW5kKCQoJzxtZXRhIG5hbWU9ImZvcm1hdC1kZXRlY3Rpb24iIGNvbnRlbnQ9InRlbGVwaG9uZT1ubyI+JykpfWVsc2UgaWYoRC5icm93c2VyLm1zaWUpe2MuYXBwZW5kKCQoJzxtZXRhIGh0dHAtZXF1aXY9ImNsZWFydHlwZSIgY29udGVudD0ib24iPicpKTtjLmFwcGVuZCgkKCc8bWV0YSBuYW1lPSJtc2FwcGxpY2F0aW9uLXRhcC1oaWdobGlnaHQiIGNvbnRlbnQ9Im5vIi8+JykpfXZhciBpPUQub3MuaW9zJiZELm9zLnZlcnNpb24+PTcmJkQub3MudmVyc2lvbjw4JiZELmJyb3dzZXIubmFtZT09PSJzZiI7aWYoby52aWV3cG9ydCl7dmFyIG07aWYoaSYmRC5zeXN0ZW0ucGhvbmUpe209J21pbmltYWwtdWksIGluaXRpYWwtc2NhbGU9MS4wLCBtYXhpbXVtLXNjYWxlPTEuMCwgdXNlci1zY2FsYWJsZT0wJ31lbHNlIGlmKGkmJkQuc3lzdGVtLnRhYmxldCl7bT0naW5pdGlhbC1zY2FsZT0xLjAsIG1heGltdW0tc2NhbGU9MS4wLCB1c2VyLXNjYWxhYmxlPW5vJ31lbHNlIGlmKCQuZGV2aWNlLmlzLmlwaG9uZSYmKE1hdGgubWF4KHdpbmRvdy5zY3JlZW4uaGVpZ2h0LHdpbmRvdy5zY3JlZW4ud2lkdGgpPT09NTY4KSl7bT0idXNlci1zY2FsYWJsZT0wLCBpbml0aWFsLXNjYWxlPTEuMCJ9ZWxzZSBpZihELm9zLmFuZHJvaWQmJkQub3MudmVyc2lvbjwzKXttPSJ3aWR0aD1kZXZpY2Utd2lkdGgsIGhlaWdodD1kZXZpY2UtaGVpZ2h0LCBpbml0aWFsLXNjYWxlPTEuMCwgbWF4aW11bS1zY2FsZT0xLjAsIHVzZXItc2NhbGFibGU9bm8ifWVsc2UgaWYoRC5vcy53aW5waG9uZSl7bT0id2lkdGg9MzIwLCB1c2VyLXNjYWxhYmxlPW5vIn1lbHNle209IndpZHRoPWRldmljZS13aWR0aCwgaW5pdGlhbC1zY2FsZT0xLjAsIG1heGltdW0tc2NhbGU9MS4wLCB1c2VyLXNjYWxhYmxlPW5vIn1jLmFwcGVuZCgkKCc8bWV0YSBuYW1lPSJ2aWV3cG9ydCIgY29udGVudD0iJyttKyciPicpKX1pZihELm9zLmlvcyl7Yy5hcHBlbmQoJCgnPG1ldGEgbmFtZT0iYXBwbGUtbW9iaWxlLXdlYi1hcHAtY2FwYWJsZSIgY29udGVudD0ieWVzIj4nKSk7Yy5hcHBlbmQoJCgnPG1ldGEgbmFtZT0iYXBwbGUtbW9iaWxlLXdlYi1hcHAtc3RhdHVzLWJhci1zdHlsZSIgY29udGVudD0iJytvLnN0YXR1c0JhcisnIj4nKSl9aWYoby5wcmV2ZW50U2Nyb2xsKXskKHdpbmRvdykuYmluZCgidG91Y2htb3ZlIixmdW5jdGlvbiBzYXBJbml0TW9iaWxlVG91Y2hNb3ZlSGFuZGxlKGUpe2lmKCFlLmlzTWFya2VkKCkpe2UucHJldmVudERlZmF1bHQoKX19KX1pZihvLnVzZUZ1bGxTY3JlZW5IZWlnaHQpeyQoZnVuY3Rpb24oKXtkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUuaGVpZ2h0PSIxMDAlIn0pfX1pZihvLmhvbWVJY29uKXt2YXIgSTtpZih0eXBlb2Ygby5ob21lSWNvbj09PSJzdHJpbmciKXtJPXtwaG9uZTpvLmhvbWVJY29ufX1lbHNle0k9JC5leHRlbmQoe30sby5ob21lSWNvbil9SS5wcmVjb21wb3NlZD1vLmhvbWVJY29uUHJlY29tcG9zZWR8fEkucHJlY29tcG9zZWQ7SS5mYXZpY29uPW8uaG9tZUljb24uaWNvbnx8SS5mYXZpY29uO0kuaWNvbj11bmRlZmluZWQ7JC5zYXAuc2V0SWNvbnMoSSl9fTskLnNhcC5zZXRJY29ucz1mdW5jdGlvbihpKXtpZighaXx8KHR5cGVvZiBpIT09Im9iamVjdCIpKXskLnNhcC5sb2cud2FybmluZygiQ2FsbCB0byBqUXVlcnkuc2FwLnNldEljb25zKCkgaGFzIGJlZW4gaWdub3JlZCBiZWNhdXNlIHRoZXJlIHdlcmUgbm8gaWNvbnMgZ2l2ZW4gb3IgdGhlIGFyZ3VtZW50IHdhcyBub3QgYW4gb2JqZWN0LiIpO3JldHVybn12YXIgYz0kKCJoZWFkIikscD1pLnByZWNvbXBvc2VkPyItcHJlY29tcG9zZWQiOiIiLGc9ZnVuY3Rpb24oaCl7cmV0dXJuIGlbaF18fGlbJ3RhYmxldEAyJ118fGlbJ3Bob25lQDInXXx8aVsncGhvbmUnXXx8aVsndGFibGV0J119LHM9eyJwaG9uZSI6IiIsInRhYmxldCI6IjcyeDcyIiwicGhvbmVAMiI6IjExNHgxMTQiLCJ0YWJsZXRAMiI6IjE0NHgxNDQifTtpZihpWyJmYXZpY29uIl0pe3ZhciBkPWMuZmluZCgiW3JlbF49c2hvcnRjdXRdIik7ZC5lYWNoKGZ1bmN0aW9uKCl7aWYodGhpcy5yZWw9PT0ic2hvcnRjdXQgaWNvbiIpeyQodGhpcykucmVtb3ZlKCl9fSk7Yy5hcHBlbmQoJCgnPGxpbmsgcmVsPSJzaG9ydGN1dCBpY29uIiBocmVmPSInK2lbImZhdmljb24iXSsnIiAvPicpKX1pZihnKCJwaG9uZSIpKXtjLmZpbmQoIltyZWw9YXBwbGUtdG91Y2gtaWNvbl0iKS5yZW1vdmUoKTtjLmZpbmQoIltyZWw9YXBwbGUtdG91Y2gtaWNvbi1wcmVjb21wb3NlZF0iKS5yZW1vdmUoKX1mb3IodmFyIGUgaW4gcyl7aVtlXT1pW2VdfHxnKGUpO2lmKGlbZV0pe3ZhciBmPXNbZV07Yy5hcHBlbmQoJCgnPGxpbmsgcmVsPSJhcHBsZS10b3VjaC1pY29uJytwKyciICcrKGY/J3NpemVzPSInK2YrJyInOiIiKSsnIGhyZWY9IicraVtlXSsnIiAvPicpKX19fX0pKHEpO3JldHVybiBxfSxmYWxzZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ2pxdWVyeS5zYXAucHJvcGVydGllcycpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ2pxdWVyeS5zYXAucHJvcGVydGllcycpO3NhcC51aS5kZWZpbmUoImpxdWVyeS5zYXAucHJvcGVydGllcyIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ2pxdWVyeS5zYXAuc2pheCddLGZ1bmN0aW9uKHEpeyJ1c2Ugc3RyaWN0Ijt2YXIgUD1mdW5jdGlvbigpe3RoaXMubVByb3BlcnRpZXM9e307dGhpcy5hS2V5cz1bXX07UC5wcm90b3R5cGUuZ2V0UHJvcGVydHk9ZnVuY3Rpb24oayxkKXt2YXIgdj10aGlzLm1Qcm9wZXJ0aWVzW2tdO2lmKHR5cGVvZih2KT09InN0cmluZyIpe3JldHVybiB2fWVsc2UgaWYoZCl7cmV0dXJuIGR9cmV0dXJuIG51bGx9O1AucHJvdG90eXBlLmdldEtleXM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hS2V5c307UC5wcm90b3R5cGUuc2V0UHJvcGVydHk9ZnVuY3Rpb24oayx2KXtpZih0eXBlb2YodikhPSJzdHJpbmciKXtyZXR1cm59aWYodHlwZW9mKHRoaXMubVByb3BlcnRpZXNba10pIT0ic3RyaW5nIil7dGhpcy5hS2V5cy5wdXNoKGspfXRoaXMubVByb3BlcnRpZXNba109dn07UC5wcm90b3R5cGUuY2xvbmU9ZnVuY3Rpb24oKXt2YXIgYz1uZXcgUCgpO2MubVByb3BlcnRpZXM9cS5leHRlbmQoe30sdGhpcy5tUHJvcGVydGllcyk7Yy5hS2V5cz1xLm1lcmdlKFtdLHRoaXMuYUtleXMpO3JldHVybiBjfTt2YXIgcj0vKD86XnxcclxufFxyfFxuKVsgXHRcZl0qLzt2YXIgYT0vKFxcdVswLTlhLWZBLUZdezAsNH0pfChcXC4pfChcXCQpfChbIFx0XGZdKlsgXHRcZjo9XVsgXHRcZl0qKS9nO3ZhciBFPXsnXFxmJzonXGYnLCdcXG4nOidcbicsJ1xccic6J1xyJywnXFx0JzonXHQnfTtmdW5jdGlvbiBwKHQsbyl7dmFyIGw9dC5zcGxpdChyKSxMLGssdixLLGksbSxiO28ubVByb3BlcnRpZXM9e307by5hS2V5cz1bXTtmb3IoaT0wO2k8bC5sZW5ndGg7aSsrKXtMPWxbaV07aWYoTD09PSIifHxMLmNoYXJBdCgwKT09PSIjInx8TC5jaGFyQXQoMCk9PT0iISIpe2NvbnRpbnVlfWEubGFzdEluZGV4PWI9MDt2PSIiO0s9dHJ1ZTt3aGlsZShtPWEuZXhlYyhMKSl7aWYoYjxtLmluZGV4KXt2Kz1MLnNsaWNlKGIsbS5pbmRleCl9Yj1hLmxhc3RJbmRleDtpZihtWzFdKXtpZihtWzFdLmxlbmd0aCE9PTYpe3Rocm93IG5ldyBFcnJvcigiSW5jb21wbGV0ZSBVbmljb2RlIEVzY2FwZSAnIittWzFdKyInIil9dis9U3RyaW5nLmZyb21DaGFyQ29kZShwYXJzZUludChtWzFdLnNsaWNlKDIpLDE2KSl9ZWxzZSBpZihtWzJdKXt2Kz1FW21bMl1dfHxtWzJdLnNsaWNlKDEpfWVsc2UgaWYobVszXSl7TD1sWysraV07YS5sYXN0SW5kZXg9Yj0wfWVsc2UgaWYobVs0XSl7aWYoSyl7Sz1mYWxzZTtrPXY7dj0iIn1lbHNle3YrPW1bNF19fX1pZihiPEwubGVuZ3RoKXt2Kz1MLnNsaWNlKGIpfWlmKEspe2s9djt2PSIifW8uYUtleXMucHVzaChrKTtvLm1Qcm9wZXJ0aWVzW2tdPXZ9cS5zYXAudW5pcXVlKG8uYUtleXMpfXEuc2FwLnByb3BlcnRpZXM9ZnVuY3Rpb24gcHJvcGVydGllcyhtKXttPXEuZXh0ZW5kKHt1cmw6dW5kZWZpbmVkLGhlYWRlcnM6e319LG0pO3ZhciBBPSEhbS5hc3luYyxvPW5ldyBQKCk7ZnVuY3Rpb24gXyh0KXtpZih0eXBlb2YodCk9PSJzdHJpbmciKXtwKHQsbyl9fTtmdW5jdGlvbiBiKCl7dmFyIFI7aWYodHlwZW9mKG0udXJsKT09InN0cmluZyIpe1I9cS5zYXAubG9hZFJlc291cmNlKHt1cmw6bS51cmwsZGF0YVR5cGU6J3RleHQnLGhlYWRlcnM6bS5oZWFkZXJzLGZhaWxPbkVycm9yOmZhbHNlLGFzeW5jOkF9KX1yZXR1cm4gUn07aWYoQSl7cmV0dXJuIG5ldyB3aW5kb3cuUHJvbWlzZShmdW5jdGlvbihjLGQpe3ZhciBSPWIoKTtpZighUil7YyhvKTtyZXR1cm59Ui50aGVuKGZ1bmN0aW9uKHYpe3RyeXtfKHYpO2Mobyl9Y2F0Y2goZSl7ZChlKX19LGZ1bmN0aW9uKHYpe2QodiBpbnN0YW5jZW9mIEVycm9yP3Y6bmV3IEVycm9yKCJQcm9ibGVtIGR1cmluZyBsb2FkaW5nIG9mIHByb3BlcnR5IGZpbGUgJyIrbS51cmwrIic6ICIrdikpfSl9KX1lbHNle18oYigpKTtyZXR1cm4gb319O3JldHVybiBxfSxmYWxzZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ2pxdWVyeS5zYXAucmVzb3VyY2VzJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnanF1ZXJ5LnNhcC5yZXNvdXJjZXMnKTtzYXAudWkuZGVmaW5lKCJqcXVlcnkuc2FwLnJlc291cmNlcyIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ2pxdWVyeS5zYXAucHJvcGVydGllcycsJ2pxdWVyeS5zYXAuc3RyaW5ncyddLGZ1bmN0aW9uKHEpeyJ1c2Ugc3RyaWN0Ijt2YXIgcj0vXigoPzpbQS1aXXsyLDN9KD86LVtBLVpdezN9KXswLDN9KXxbQS1aXXs0fXxbQS1aXXs1LDh9KSg/Oi0oW0EtWl17NH0pKT8oPzotKFtBLVpdezJ9fFswLTldezN9KSk/KC1bMC05QS1aXXs1LDh9fCg/OlswLTldWzAtOUEtWl17M30pKSooPzotKFswLTlBLVdZWl0oPzotWzAtOUEtWl17Miw4fSkrKSkqKD86LShYKD86LVswLTlBLVpdezEsOH0pKykpPyQvaTt2YXIgTT17ImhlIjoiaXciLCJ5aSI6ImppIiwiaWQiOiJpbiIsInNyIjoic2gifTt2YXIgYT17Iml3IjoiaGUiLCJqaSI6InlpIiwiaW4iOiJpZCIsInNuIjoic3IifTt2YXIgYj0vLShzYXB0cmN8c2FwcHNkKSg/Oi18JCkvaTtmdW5jdGlvbiBuKEwpe3ZhciBtO2lmKHR5cGVvZiBMPT09J3N0cmluZycmJihtPXIuZXhlYyhMLnJlcGxhY2UoL18vZywnLScpKSkpe3ZhciBnPW1bMV0udG9Mb3dlckNhc2UoKTtnPU1bZ118fGc7dmFyIFM9bVsyXT9tWzJdLnRvTG93ZXJDYXNlKCk6dW5kZWZpbmVkO3ZhciBSPW1bM10/bVszXS50b1VwcGVyQ2FzZSgpOnVuZGVmaW5lZDt2YXIgVj1tWzRdO3ZhciBwPW1bNl07aWYoKHAmJihtPWIuZXhlYyhwKSkpfHwoViYmKG09Yi5leGVjKFYpKSkpe3JldHVybiJlbl9VU18iK21bMV0udG9Mb3dlckNhc2UoKX1pZihnPT09InpoIiYmIVIpe2lmKFM9PT0iaGFucyIpe1I9IkNOIn1lbHNlIGlmKFM9PT0iaGFudCIpe1I9IlRXIn19cmV0dXJuIGcrKFI/Il8iK1IrKFY/Il8iK1Yuc2xpY2UoMSkucmVwbGFjZSgiLSIsIl8iKToiIik6IiIpfX1mdW5jdGlvbiBkKCl7dmFyIEw7aWYod2luZG93LnNhcCYmc2FwLnVpJiZzYXAudWkuZ2V0Q29yZSl7TD1zYXAudWkuZ2V0Q29yZSgpLmdldENvbmZpZ3VyYXRpb24oKS5nZXRMYW5ndWFnZSgpO0w9bihMKX1yZXR1cm4gTHx8ImVuIn1mdW5jdGlvbiBjKEwpe3ZhciBtO2lmKHR5cGVvZiBMPT09J3N0cmluZycmJihtPXIuZXhlYyhMLnJlcGxhY2UoL18vZywnLScpKSkpe3ZhciBnPW1bMV0udG9Mb3dlckNhc2UoKTtnPWFbZ118fGc7cmV0dXJuIGcrKG1bM10/Ii0iK21bM10udG9VcHBlckNhc2UoKSsobVs0XT8iLSIrbVs0XS5zbGljZSgxKS5yZXBsYWNlKCJfIiwiLSIpOiIiKToiIil9fXZhciBlPS9eKCg/OltePyNdKlwvKT9bXlwvPyNdKikoXC5bXi5cLz8jXSspKCg/Olw/KFteI10qKSk/KD86IyguKikpPykkLzt2YXIgdj1bIi5wcm9wZXJ0aWVzIiwiLmhkYnRleHRidW5kbGUiXTtmdW5jdGlvbiBzKHUpe3ZhciBtPWUuZXhlYyh1KTtyZXR1cm4gbSYme3VybDp1LHByZWZpeDptWzFdLGV4dDptWzJdLHF1ZXJ5Om1bNF0saGFzaDoobVs1XXx8IiIpLHN1ZmZpeDptWzJdKyhtWzNdfHwiIil9fXZhciBCPWZ1bmN0aW9uKHUsTCxpLEEpe3RoaXMuc0xvY2FsZT1uKEwpfHxkKCk7dGhpcy5vVXJsSW5mbz1zKHUpO2lmKCF0aGlzLm9VcmxJbmZvfHxxLmluQXJyYXkodGhpcy5vVXJsSW5mby5leHQsdik8MCl7dGhyb3cgbmV3IEVycm9yKCJyZXNvdXJjZSBVUkwgJyIrdSsiJyBoYXMgdW5rbm93biB0eXBlIChzaG91bGQgYmUgb25lIG9mICIrdi5qb2luKCIsIikrIikiKX10aGlzLmJJbmNsdWRlSW5mbz1pO3RoaXMuYUN1c3RvbUJ1bmRsZXM9W107dGhpcy5hUHJvcGVydHlGaWxlcz1bXTt0aGlzLmFMb2NhbGVzPVtdO3ZhciBwPWwodGhpcyx0aGlzLnNMb2NhbGUsQSk7aWYoQSl7dGhpcy5fcHJvbWlzZT1wfX07Qi5wcm90b3R5cGU9e307Qi5wcm90b3R5cGUuX2VuaGFuY2U9ZnVuY3Rpb24oQyl7aWYoQyYmQyBpbnN0YW5jZW9mIEIpe3RoaXMuYUN1c3RvbUJ1bmRsZXMucHVzaChDKX1lbHNle3Euc2FwLmxvZy5lcnJvcigiQ3VzdG9tIFJlc291cmNlQnVuZGxlIGlzIGVpdGhlciB1bmRlZmluZWQgb3Igbm90IGFuIGluc3RhbmNlb2YgalF1ZXJ5LnNhcC51dGlsLlJlc291cmNlQnVuZGxlLiBUaGVyZWZvcmUgdGhpcyBjdXN0b20gUmVzb3VyY2VCdW5kbGUgd2lsbCBiZSBpZ25vcmVkISIpfX07Qi5wcm90b3R5cGUuZ2V0VGV4dD1mdW5jdGlvbihrLEEsQyl7dmFyIFY9bnVsbDtmb3IodmFyIGk9dGhpcy5hQ3VzdG9tQnVuZGxlcy5sZW5ndGgtMTtpPj0wO2ktLSl7Vj10aGlzLmFDdXN0b21CdW5kbGVzW2ldLmdldFRleHQoayxBLHRydWUpO2lmKFYhPW51bGwpe3JldHVybiBWfX1mb3IodmFyIGk9MDtpPHRoaXMuYVByb3BlcnR5RmlsZXMubGVuZ3RoO2krKyl7Vj10aGlzLmFQcm9wZXJ0eUZpbGVzW2ldLmdldFByb3BlcnR5KGspO2lmKHR5cGVvZihWKT09PSJzdHJpbmciKXticmVha319aWYodHlwZW9mKFYpIT09InN0cmluZyIpe3ZhciB0PXRoaXMuYUxvY2FsZXNbMF07d2hpbGUodC5sZW5ndGg+MCl7aWYodD09InpoX0hLIil7dD0iemhfVFcifWVsc2V7dmFyIHA9dC5sYXN0SW5kZXhPZignXycpO2lmKHA+PTApe3Q9dC5zdWJzdHJpbmcoMCxwKX1lbHNlIGlmKHQhPSJlbiIpe3Q9ImVuIn1lbHNle3Q9IiJ9fXZhciBQPWwodGhpcyx0KTtpZihQPT1udWxsKXtjb250aW51ZX1WPVAuZ2V0UHJvcGVydHkoayk7aWYodHlwZW9mKFYpPT09InN0cmluZyIpe2JyZWFrfX19aWYoIUMmJnR5cGVvZihWKSE9PSJzdHJpbmciKXtWPWt9aWYodHlwZW9mKFYpPT09InN0cmluZyIpe2lmKEEpe1Y9cS5zYXAuZm9ybWF0TWVzc2FnZShWLEEpfWlmKHRoaXMuYkluY2x1ZGVJbmZvKXtWPW5ldyBTdHJpbmcoVik7Vi5vcmlnaW5JbmZvPXtzb3VyY2U6IlJlc291cmNlIEJ1bmRsZSIsdXJsOnRoaXMub1VybEluZm8udXJsLGxvY2FsZTp0aGlzLnNMb2NhbGUsa2V5Omt9fX1yZXR1cm4gVn07ZnVuY3Rpb24gbChvLEwsQSl7dmFyIHU9by5vVXJsSW5mbyxSLHAsUDtpZihxLmluQXJyYXkoTCxvLmFMb2NhbGVzKT09LTEpe2lmKGYoTCkpe3N3aXRjaCh1LmV4dCl7Y2FzZScuaGRidGV4dGJ1bmRsZSc6Uj17dXJsOnUudXJsLGhlYWRlcnM6eyJBY2NlcHQtTGFuZ3VhZ2UiOmMoTCl8fCIifX07YnJlYWs7ZGVmYXVsdDpSPXt1cmw6dS5wcmVmaXgrKEw/Il8iK0w6IiIpK3Uuc3VmZml4fTticmVha31pZihBKXtSLmFzeW5jPXRydWU7UD13aW5kb3cuUHJvbWlzZS5yZXNvbHZlKHEuc2FwLnByb3BlcnRpZXMoUikpfWVsc2V7cD1xLnNhcC5wcm9wZXJ0aWVzKFIpfX1lbHNle3A9e2dldFByb3BlcnR5OmZ1bmN0aW9uKCl7cmV0dXJuIHVuZGVmaW5lZH19O2lmKEEpe1A9d2luZG93LlByb21pc2UucmVzb2x2ZShwKX19aWYoQSl7UC50aGVuKGZ1bmN0aW9uKGcpe28uYVByb3BlcnR5RmlsZXMucHVzaChnKTtvLmFMb2NhbGVzLnB1c2goTCl9KTtyZXR1cm4gUH1lbHNle28uYVByb3BlcnR5RmlsZXMucHVzaChwKTtvLmFMb2NhbGVzLnB1c2goTCk7cmV0dXJuIHB9fXJldHVybiBBP3dpbmRvdy5Qcm9taXNlLnJlc29sdmUobnVsbCk6bnVsbH1mdW5jdGlvbiBmKEwpe3ZhciBnPXdpbmRvdy5zYXAmJnNhcC51aSYmc2FwLnVpLmdldENvcmUmJnNhcC51aS5nZXRDb3JlKCkuZ2V0Q29uZmlndXJhdGlvbigpLmdldFN1cHBvcnRlZExhbmd1YWdlcygpO2lmKGcmJmcubGVuZ3RoPjApe3JldHVybiBxLmluQXJyYXkoTCxnKT49MH1yZXR1cm4gdHJ1ZX1xLnNhcC5yZXNvdXJjZXM9ZnVuY3Rpb24gcmVzb3VyY2VzKHApe3A9cS5leHRlbmQoe3VybDoiIixsb2NhbGU6dW5kZWZpbmVkLGluY2x1ZGVJbmZvOmZhbHNlfSxwKTt2YXIgQT0hIXAuYXN5bmM7dmFyIG89bmV3IEIocC51cmwscC5sb2NhbGUscC5pbmNsdWRlSW5mbyxBKTtpZihBKXtyZXR1cm4gbmV3IHdpbmRvdy5Qcm9taXNlKGZ1bmN0aW9uKGcsaCl7ZnVuY3Rpb24gXygpe2cobyk7ZGVsZXRlIG8uX3Byb21pc2V9by5fcHJvbWlzZS50aGVuKF8sXyl9KX1lbHNle3JldHVybiBvfX07cS5zYXAucmVzb3VyY2VzLl9nZXRGYWxsYmFja0xvY2FsZXM9ZnVuY3Rpb24oTCxTKXt2YXIgdD1uKEwpLGc9W107ZnVuY3Rpb24gaChMKXtyZXR1cm4hU3x8Uy5sZW5ndGg9PT0wfHxxLmluQXJyYXkoTCxTKT49MH13aGlsZSh0KXtpZihoKHQpKXtnLnB1c2godCl9aWYodD09PSJ6aF9ISyIpe3Q9InpoX1RXIn1lbHNle3ZhciBwPXQubGFzdEluZGV4T2YoJ18nKTtpZihwPjApe3Q9dC5zbGljZSgwLHApfWVsc2UgaWYodCE9PSJlbiIpe3Q9ImVuIn1lbHNle3Q9IiJ9fX1pZihoKCIiKSl7Zy5wdXNoKCIiKX1yZXR1cm4gZ307cmV0dXJuIHF9LGZhbHNlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLkdsb2JhbCcpKXtpZih3aW5kb3cuT3BlbkFqYXgmJndpbmRvdy5PcGVuQWpheC5odWIpe09wZW5BamF4Lmh1Yi5yZWdpc3RlckxpYnJhcnkoInNhcCIsImh0dHA6Ly93d3cuc2FwLmNvbS8iLCIwLjEiLHt9KX1qUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5HbG9iYWwnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvR2xvYmFsIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnanF1ZXJ5LnNhcC5kb20nXSxmdW5jdGlvbihxKXsidXNlIHN0cmljdCI7aWYodHlwZW9mIHdpbmRvdy5zYXAhPT0ib2JqZWN0IiYmdHlwZW9mIHdpbmRvdy5zYXAhPT0iZnVuY3Rpb24iKXt3aW5kb3cuc2FwPXt9fWlmKHR5cGVvZiB3aW5kb3cuc2FwLnVpIT09Im9iamVjdCIpe3dpbmRvdy5zYXAudWk9e319c2FwLnVpPXEuZXh0ZW5kKHNhcC51aSx7dmVyc2lvbjoiMS4yNC4yIixidWlsZGluZm86e2xhc3RjaGFuZ2U6IiR7bGRpLnNjbS5yZXZpc2lvbn0iLGJ1aWxkdGltZToiMjAxNDEwMTQxNDI2In19KTtzYXAudWkuZ2V0VmVyc2lvbkluZm89ZnVuY3Rpb24oTCl7aWYoIXNhcC51aS52ZXJzaW9uaW5mbyl7c2FwLnVpLnZlcnNpb25pbmZvPXEuc2FwLmxvYWRSZXNvdXJjZSgic2FwLXVpLXZlcnNpb24uanNvbiIpfWlmKEwhPT11bmRlZmluZWQpe3ZhciBhPXNhcC51aS52ZXJzaW9uaW5mby5saWJyYXJpZXM7Zm9yKHZhciBpPTAsbD1hLmxlbmd0aDtpPGw7aSsrKXtpZihhW2ldLm5hbWU9PT1MKXtyZXR1cm4gYVtpXX19fWVsc2V7cmV0dXJuIHNhcC51aS52ZXJzaW9uaW5mb319O3NhcC51aS5uYW1lc3BhY2U9ZnVuY3Rpb24obil7cmV0dXJuIHEuc2FwLmdldE9iamVjdChuLDApfTtzYXAudWkubGF6eVJlcXVpcmU9ZnVuY3Rpb24oYyxtLE0pe3ZhciBmPWMucmVwbGFjZSgvXC8vZ2ksIlwuIiksbD1mLmxhc3RJbmRleE9mKCIuIikscD1mLnN1YnN0cigwLGwpLEM9Zi5zdWJzdHIobCsxKSxQPXEuc2FwLmdldE9iamVjdChwLDApLG89UFtDXSxhPShtfHwibmV3Iikuc3BsaXQoIiAiKSxiPXEuaW5BcnJheSgibmV3IixhKTtNPU18fGY7aWYoIW8pe2lmKGI+PTApe289ZnVuY3Rpb24oKXtxLnNhcC5sb2cuZGVidWcoImxhenkgc3R1YiBmb3IgJyIrZisiJyAoY29uc3RydWN0b3IpIGNhbGxlZC4iKTtxLnNhcC5yZXF1aXJlKE0pO3ZhciByPVBbQ107aWYoci5fc2FwVWlMYXp5TG9hZGVyKXt0aHJvdyBuZXcgRXJyb3IoImxhenlSZXF1aXJlOiBzdHViICciK2YrIidoYXMgbm90IGJlZW4gcmVwbGFjZWQgYnkgbW9kdWxlICciK00rIiciKX12YXIgaT1xLnNhcC5uZXdPYmplY3Qoci5wcm90b3R5cGUpO3ZhciBSPXIuYXBwbHkoaSxhcmd1bWVudHMpO2lmKFImJih0eXBlb2YgUj09PSJmdW5jdGlvbiJ8fHR5cGVvZiBSPT09Im9iamVjdCIpKXtpPVJ9cmV0dXJuIGl9O28uX3NhcFVpTGF6eUxvYWRlcj10cnVlO2Euc3BsaWNlKGIsMSl9ZWxzZXtvPXt9fVBbQ109b31xLmVhY2goYSxmdW5jdGlvbihpLHMpe2lmKCFvW3NdKXtvW3NdPWZ1bmN0aW9uKCl7cS5zYXAubG9nLmRlYnVnKCJsYXp5IHN0dWIgZm9yICciK2YrIi4iK3MrIicgY2FsbGVkLiIpO3Euc2FwLnJlcXVpcmUoTSk7dmFyIHI9UFtDXTtpZihyW3NdLl9zYXBVaUxhenlMb2FkZXIpe3Rocm93IG5ldyBFcnJvcigibGF6eVJlcXVpcmU6IHN0dWIgJyIrZisiLiIrcysiJyBoYXMgbm90IGJlZW4gcmVwbGFjZWQgYnkgbG9hZGVkIG1vZHVsZSAnIitNKyInIil9cmV0dXJuIHJbc10uYXBwbHkocixhcmd1bWVudHMpfTtvW3NdLl9zYXBVaUxhenlMb2FkZXI9dHJ1ZX19KX07c2FwLnVpLnJlc291cmNlPWZ1bmN0aW9uKGwscil7dmFyIG09ci5tYXRjaCgvXnRoZW1lc1wvKFteXC9dKylcLy8pO2lmKG0pe2wrPSIudGhlbWVzLiIrbVsxXTtyPXIuc3Vic3RyKG1bMF0ubGVuZ3RoKX1yZXR1cm4gcS5zYXAuZ2V0TW9kdWxlUGF0aChsLCcvJykrcn07c2FwLnVpLmxvY2FsUmVzb3VyY2VzPWZ1bmN0aW9uKG4pe3Euc2FwLnJlZ2lzdGVyTW9kdWxlUGF0aChuLCIuLyIrbi5yZXBsYWNlKC9cLi9nLCIvIikpfTtyZXR1cm4gc2FwLnVpfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmJhc2UuRXZlbnQnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuYmFzZS5FdmVudCcpO3NhcC51aS5kZWZpbmUoInNhcC91aS9iYXNlL0V2ZW50IixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnLi9PYmplY3QnXSxmdW5jdGlvbihxLEIpeyJ1c2Ugc3RyaWN0Ijt2YXIgRT1CLmV4dGVuZCgic2FwLnVpLmJhc2UuRXZlbnQiLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbihpLHMscCl7Qi5hcHBseSh0aGlzKTtpZihhcmd1bWVudHMubGVuZ3RoPjApe3RoaXMuaW5pdChpLHMscCl9fX0pO0UucHJvdG90eXBlLmluaXQ9ZnVuY3Rpb24oaSxzLHApe3RoaXMuc0lkPWk7dGhpcy5vU291cmNlPXM7dGhpcy5tUGFyYW1ldGVycz1wfHx7fTt0aGlzLmJDYW5jZWxCdWJibGU9ZmFsc2U7dGhpcy5iUHJldmVudERlZmF1bHQ9ZmFsc2V9O0UucHJvdG90eXBlLnJlc2V0PWZ1bmN0aW9uKCl7dGhpcy5zSWQ9IiI7dGhpcy5vU291cmNlPW51bGw7dGhpcy5tUGFyYW1ldGVycz1udWxsO3RoaXMuYkNhbmNlbEJ1YmJsZT1mYWxzZTt0aGlzLmJQcmV2ZW50RGVmYXVsdD1mYWxzZX07RS5wcm90b3R5cGUuZ2V0SWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zSWR9O0UucHJvdG90eXBlLmdldFNvdXJjZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLm9Tb3VyY2V9O0UucHJvdG90eXBlLmdldFBhcmFtZXRlcnM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tUGFyYW1ldGVyc307RS5wcm90b3R5cGUuZ2V0UGFyYW1ldGVyPWZ1bmN0aW9uKG4pe3JldHVybiB0aGlzLm1QYXJhbWV0ZXJzW25dfTtFLnByb3RvdHlwZS5jYW5jZWxCdWJibGU9ZnVuY3Rpb24oKXt0aGlzLmJDYW5jZWxCdWJibGU9dHJ1ZX07RS5wcm90b3R5cGUucHJldmVudERlZmF1bHQ9ZnVuY3Rpb24oKXt0aGlzLmJQcmV2ZW50RGVmYXVsdD10cnVlfTtyZXR1cm4gRX0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5iYXNlLkV2ZW50UHJvdmlkZXInKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuYmFzZS5FdmVudFByb3ZpZGVyJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2Jhc2UvRXZlbnRQcm92aWRlciIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJy4vRXZlbnQnLCcuL09iamVjdCcsJy4vT2JqZWN0UG9vbCddLGZ1bmN0aW9uKHEsRSxCLE8peyJ1c2Ugc3RyaWN0Ijt2YXIgYT1CLmV4dGVuZCgic2FwLnVpLmJhc2UuRXZlbnRQcm92aWRlciIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKCl7Qi5hcHBseSh0aGlzKTt0aGlzLm1FdmVudFJlZ2lzdHJ5PXt9fX0pO2EuTV9FVkVOVFM9e0V2ZW50SGFuZGxlckNoYW5nZToiRXZlbnRIYW5kbGVyQ2hhbmdlIn07YS5wcm90b3R5cGUub0V2ZW50UG9vbD1uZXcgTyhFKTthLnByb3RvdHlwZS5hdHRhY2hFdmVudD1mdW5jdGlvbihlLGQsZixsKXtpZih0eXBlb2YoZCk9PT0iZnVuY3Rpb24iKXtsPWY7Zj1kO2Q9dW5kZWZpbmVkfWlmKCF0aGlzLm1FdmVudFJlZ2lzdHJ5W2VdKXt0aGlzLm1FdmVudFJlZ2lzdHJ5W2VdPVtdfXRoaXMubUV2ZW50UmVnaXN0cnlbZV0ucHVzaCh7b0xpc3RlbmVyOmwsZkZ1bmN0aW9uOmYsb0RhdGE6ZH0pO3RoaXMuZmlyZUV2ZW50KGEuTV9FVkVOVFMuRXZlbnRIYW5kbGVyQ2hhbmdlLHtFdmVudElkOmUsdHlwZTonbGlzdGVuZXJBdHRhY2hlZCd9KTtyZXR1cm4gdGhpc307YS5wcm90b3R5cGUuYXR0YWNoRXZlbnRPbmNlPWZ1bmN0aW9uKGUsZCxmLGwpe2lmKHR5cGVvZihkKT09PSJmdW5jdGlvbiIpe2w9ZjtmPWQ7ZD11bmRlZmluZWR9ZnVuY3Rpb24gbygpe3RoaXMuZGV0YWNoRXZlbnQoZSxvKTtmLmFwcGx5KGx8fHRoaXMsYXJndW1lbnRzKX10aGlzLmF0dGFjaEV2ZW50KGUsZCxvLHVuZGVmaW5lZCk7cmV0dXJuIHRoaXN9O2EucHJvdG90eXBlLmRldGFjaEV2ZW50PWZ1bmN0aW9uKGUsZixsKXt2YXIgYj10aGlzLm1FdmVudFJlZ2lzdHJ5W2VdO2lmKCFiKXtyZXR1cm4gdGhpc312YXIgTD1mYWxzZTtmb3IodmFyIGk9MCxjPWIubGVuZ3RoO2k8YztpKyspe2lmKGJbaV0uZkZ1bmN0aW9uPT09ZiYmYltpXS5vTGlzdGVuZXI9PT1sKXtiLnNwbGljZShpLDEpO0w9dHJ1ZTticmVha319aWYoYi5sZW5ndGg9PTApe2RlbGV0ZSB0aGlzLm1FdmVudFJlZ2lzdHJ5W2VdfWlmKEwpe3RoaXMuZmlyZUV2ZW50KGEuTV9FVkVOVFMuRXZlbnRIYW5kbGVyQ2hhbmdlLHtFdmVudElkOmUsdHlwZTonbGlzdGVuZXJEZXRhY2hlZCd9KX1yZXR1cm4gdGhpc307YS5wcm90b3R5cGUuZmlyZUV2ZW50PWZ1bmN0aW9uKGUscCxBLGIpe2lmKHR5cGVvZiBwPT0iYm9vbGVhbiIpe2I9QTtBPXB9dmFyIGM9dGhpcy5tRXZlbnRSZWdpc3RyeVtlXSxQPWZhbHNlLG8sZCxJO2lmKGJ8fChjJiZxLmlzQXJyYXkoYykpKXtjPWM/Yy5zbGljZSgpOltdO289dGhpcy5vRXZlbnRQb29sLmJvcnJvd09iamVjdChlLHRoaXMscCk7Zm9yKHZhciBpPTAsbD1jLmxlbmd0aDtpPGw7aSsrKXtJPWNbaV07SS5mRnVuY3Rpb24uY2FsbChJLm9MaXN0ZW5lcnx8dGhpcyxvLEkub0RhdGEpfWlmKGIpe2Q9dGhpcy5nZXRFdmVudGluZ1BhcmVudCgpO3doaWxlKGQmJiFvLmJDYW5jZWxCdWJibGUpe2M9ZC5tRXZlbnRSZWdpc3RyeVtlXTtpZihjJiZjIGluc3RhbmNlb2YgQXJyYXkpe2M9Yy5zbGljZSgpO2Zvcih2YXIgaT0wLGw9Yy5sZW5ndGg7aTxsO2krKyl7ST1jW2ldO0kuZkZ1bmN0aW9uLmNhbGwoSS5vTGlzdGVuZXJ8fGQsbyxJLm9EYXRhKX19ZD1kLmdldEV2ZW50aW5nUGFyZW50KCl9fVA9by5iUHJldmVudERlZmF1bHQ7dGhpcy5vRXZlbnRQb29sLnJldHVybk9iamVjdChvKX1pZihBKXtyZXR1cm4hUH1lbHNle3JldHVybiB0aGlzfX07YS5wcm90b3R5cGUuaGFzTGlzdGVuZXJzPWZ1bmN0aW9uKGUpe3JldHVybiEhdGhpcy5tRXZlbnRSZWdpc3RyeVtlXX07YS5nZXRFdmVudExpc3Q9ZnVuY3Rpb24oZSl7cmV0dXJuIGUubUV2ZW50UmVnaXN0cnl9O2EucHJvdG90eXBlLmdldEV2ZW50aW5nUGFyZW50PWZ1bmN0aW9uKCl7cmV0dXJuIG51bGx9O2EucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7aWYodGhpcy5nZXRNZXRhZGF0YSl7cmV0dXJuIkV2ZW50UHJvdmlkZXIgIit0aGlzLmdldE1ldGFkYXRhKCkuZ2V0TmFtZSgpfWVsc2V7cmV0dXJuIkV2ZW50UHJvdmlkZXIifX07YS5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbigpe3RoaXMubUV2ZW50UmVnaXN0cnk9e307Qi5wcm90b3R5cGUuZGVzdHJveS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9O3JldHVybiBhfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmJhc2UuTWFuYWdlZE9iamVjdE1ldGFkYXRhJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmJhc2UuTWFuYWdlZE9iamVjdE1ldGFkYXRhJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2Jhc2UvTWFuYWdlZE9iamVjdE1ldGFkYXRhIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnLi9EYXRhVHlwZScsJy4vTWV0YWRhdGEnXSxmdW5jdGlvbihxLEQsTSl7InVzZSBzdHJpY3QiO3ZhciBiPWZ1bmN0aW9uKGMsQyl7TS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9O2IucHJvdG90eXBlPXEuc2FwLm5ld09iamVjdChNLnByb3RvdHlwZSk7Yi5wcm90b3R5cGUuYXBwbHlTZXR0aW5ncz1mdW5jdGlvbihjKXt2YXIgcz1jLm1ldGFkYXRhO00ucHJvdG90eXBlLmFwcGx5U2V0dGluZ3MuY2FsbCh0aGlzLGMpO3ZhciByPS8oY2hpbGRyZW58aWVzfHZlc3xvZXN8c2VzfGNoZXN8c2hlc3x4ZXN8cykkL2k7dmFyIFM9eydjaGlsZHJlbic6LTMsJ2llcyc6J3knLCd2ZXMnOidmJywnb2VzJzotMiwnc2VzJzotMiwnY2hlcyc6LTIsJ3NoZXMnOi0yLCd4ZXMnOi0yLCdzJzotMX07ZnVuY3Rpb24gbihpLGUsbyl7dmFyIE4sSTtpPWl8fHt9O2ZvcihOIGluIGkpe0k9aVtOXTtpZihlJiZ0eXBlb2YgSSE9PSJvYmplY3QiKXtJPXt9O0lbZV09aVtOXX1JPXEuZXh0ZW5kKHt9LG8sSSk7SS5uYW1lPU47aWYoSS5tdWx0aXBsZT09PXRydWUmJiFJLnNpbmd1bGFyTmFtZSl7SS5zaW5ndWxhck5hbWU9Ti5yZXBsYWNlKHIsZnVuY3Rpb24oJCxwKXt2YXIgUj1TW3AudG9Mb3dlckNhc2UoKV07cmV0dXJuIHR5cGVvZiBSPT09InN0cmluZyI/UjpwLnNsaWNlKDAsUil9KX1pW05dPUl9cmV0dXJuIGl9ZnVuY3Rpb24gZihpLHApe3ZhciBSPXt9LE47Zm9yKE4gaW4gaSl7aWYocD09PShpW05dLnZpc2liaWxpdHk9PT0ncHVibGljJykpe1JbTl09aVtOXX19cmV0dXJuIFJ9dmFyIGE9LyhbYS16XVteLl0qKD86XC5bYS16XVteLl0qKSopXC4vO2Z1bmN0aW9uIGQoTil7dmFyIG09YS5leGVjKE4pO3JldHVybihtJiZtWzFdKXx8IiJ9dGhpcy5fc0xpYnJhcnlOYW1lPXMubGlicmFyeXx8ZCh0aGlzLmdldE5hbWUoKSk7dGhpcy5fbVByb3BlcnRpZXM9bihzLnByb3BlcnRpZXMsInR5cGUiLHt0eXBlOiJzdHJpbmciLGdyb3VwOiJNaXNjIn0pO3ZhciBBPW4ocy5hZ2dyZWdhdGlvbnMsInR5cGUiLHt0eXBlOiJzYXAudWkuY29yZS5Db250cm9sIixtdWx0aXBsZTp0cnVlLHZpc2liaWxpdHk6J3B1YmxpYyd9KTt0aGlzLl9tQWdncmVnYXRpb25zPWYoQSx0cnVlKTt0aGlzLl9tUHJpdmF0ZUFnZ3JlZ2F0aW9ucz1mKEEsZmFsc2UpO3RoaXMuX3NEZWZhdWx0QWdncmVnYXRpb249cy5kZWZhdWx0QWdncmVnYXRpb258fG51bGw7dGhpcy5fbUFzc29jaWF0aW9ucz1uKHMuYXNzb2NpYXRpb25zLCJ0eXBlIix7dHlwZToic2FwLnVpLmNvcmUuQ29udHJvbCIsbXVsdGlwbGU6ZmFsc2V9KTt0aGlzLl9tRXZlbnRzPW4ocy5ldmVudHMsbnVsbCx7YWxsb3dQcmV2ZW50RGVmYXVsdDpmYWxzZX0pO3RoaXMuX2JFbnJpY2hlZD1mYWxzZTtpZihjLm1ldGFkYXRhLl9fdmVyc2lvbj4xLjApe3RoaXMuZ2VuZXJhdGVBY2Nlc3NvcnMoKX19O2IucHJvdG90eXBlLmFmdGVyQXBwbHlTZXR0aW5ncz1mdW5jdGlvbigpe00ucHJvdG90eXBlLmFmdGVyQXBwbHlTZXR0aW5ncy5jYWxsKHRoaXMpO3ZhciBwPXRoaXMuZ2V0UGFyZW50KCk7aWYocCYmcCBpbnN0YW5jZW9mIGIpe3RoaXMuX21BbGxFdmVudHM9cS5leHRlbmQoe30scC5fbUFsbEV2ZW50cyx0aGlzLl9tRXZlbnRzKTt0aGlzLl9tQWxsUHJvcGVydGllcz1xLmV4dGVuZCh7fSxwLl9tQWxsUHJvcGVydGllcyx0aGlzLl9tUHJvcGVydGllcyk7dGhpcy5fbUFsbFByaXZhdGVBZ2dyZWdhdGlvbnM9cS5leHRlbmQoe30scC5fbUFsbFByaXZhdGVBZ2dyZWdhdGlvbnMsdGhpcy5fbVByaXZhdGVBZ2dyZWdhdGlvbnMpO3RoaXMuX21BbGxBZ2dyZWdhdGlvbnM9cS5leHRlbmQoe30scC5fbUFsbEFnZ3JlZ2F0aW9ucyx0aGlzLl9tQWdncmVnYXRpb25zKTt0aGlzLl9tQWxsQXNzb2NpYXRpb25zPXEuZXh0ZW5kKHt9LHAuX21BbGxBc3NvY2lhdGlvbnMsdGhpcy5fbUFzc29jaWF0aW9ucyk7dGhpcy5fc0RlZmF1bHRBZ2dyZWdhdGlvbj10aGlzLl9zRGVmYXVsdEFnZ3JlZ2F0aW9ufHxwLl9zRGVmYXVsdEFnZ3JlZ2F0aW9uO2lmKHAuX21IaWRkZW5BZ2dyZWdhdGlvbnMpe3RoaXMuX21IaWRkZW5BZ2dyZWdhdGlvbnM9cS5leHRlbmQoe30scC5fbUhpZGRlbkFnZ3JlZ2F0aW9ucyl9fWVsc2V7dGhpcy5fbUFsbEV2ZW50cz10aGlzLl9tRXZlbnRzO3RoaXMuX21BbGxQcm9wZXJ0aWVzPXRoaXMuX21Qcm9wZXJ0aWVzO3RoaXMuX21BbGxQcml2YXRlQWdncmVnYXRpb25zPXRoaXMuX21Qcml2YXRlQWdncmVnYXRpb25zO3RoaXMuX21BbGxBZ2dyZWdhdGlvbnM9dGhpcy5fbUFnZ3JlZ2F0aW9uczt0aGlzLl9tQWxsQXNzb2NpYXRpb25zPXRoaXMuX21Bc3NvY2lhdGlvbnN9fTtiLktpbmQ9e1BST1BFUlRZOjAsU0lOR0xFX0FHR1JFR0FUSU9OOjEsTVVMVElQTEVfQUdHUkVHQVRJT046MixTSU5HTEVfQVNTT0NJQVRJT046MyxNVUxUSVBMRV9BU1NPQ0lBVElPTjo0LEVWRU5UOjV9O2IucHJvdG90eXBlLmdldExpYnJhcnlOYW1lPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NMaWJyYXJ5TmFtZX07Yi5wcm90b3R5cGUuaXNBYnN0cmFjdD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9iQWJzdHJhY3R9O2IucHJvdG90eXBlLmFkZFByb3BlcnR5PWZ1bmN0aW9uKG4saSl7aS5uYW1lPW47dGhpcy5fbVByb3BlcnRpZXNbbl09aTtpZighdGhpcy5fbUFsbFByb3BlcnRpZXNbbl0pe3RoaXMuX21BbGxQcm9wZXJ0aWVzW25dPWl9aWYodGhpcy5fYkVucmljaGVkKXt0aGlzLl9lbnJpY2hDaGlsZEluZm9zKCl9fTtiLnByb3RvdHlwZS5oYXNQcm9wZXJ0eT1mdW5jdGlvbihuKXtyZXR1cm4hIXRoaXMuX21BbGxQcm9wZXJ0aWVzW25dfTtiLnByb3RvdHlwZS5nZXRQcm9wZXJ0aWVzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21Qcm9wZXJ0aWVzfTtiLnByb3RvdHlwZS5nZXRBbGxQcm9wZXJ0aWVzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21BbGxQcm9wZXJ0aWVzfTtiLnByb3RvdHlwZS5nZXRBZ2dyZWdhdGlvbnM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbUFnZ3JlZ2F0aW9uc307Yi5wcm90b3R5cGUuaGFzQWdncmVnYXRpb249ZnVuY3Rpb24obil7cmV0dXJuISF0aGlzLl9tQWxsQWdncmVnYXRpb25zW25dfTtiLnByb3RvdHlwZS5nZXRBbGxBZ2dyZWdhdGlvbnM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbUFsbEFnZ3JlZ2F0aW9uc307Yi5wcm90b3R5cGUuZ2V0QWxsUHJpdmF0ZUFnZ3JlZ2F0aW9ucz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9tQWxsUHJpdmF0ZUFnZ3JlZ2F0aW9uc307Yi5wcm90b3R5cGUuZ2V0TWFuYWdlZEFnZ3JlZ2F0aW9uPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLl9tQWxsQWdncmVnYXRpb25zW2FdfHx0aGlzLl9tQWxsUHJpdmF0ZUFnZ3JlZ2F0aW9uc1thXX07Yi5wcm90b3R5cGUuZ2V0RGVmYXVsdEFnZ3JlZ2F0aW9uTmFtZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9zRGVmYXVsdEFnZ3JlZ2F0aW9ufTtiLnByb3RvdHlwZS5nZXREZWZhdWx0QWdncmVnYXRpb249ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc0RlZmF1bHRBZ2dyZWdhdGlvbiYmdGhpcy5nZXRBbGxBZ2dyZWdhdGlvbnMoKVt0aGlzLl9zRGVmYXVsdEFnZ3JlZ2F0aW9uXX07Yi5wcm90b3R5cGUuZ2V0QXNzb2NpYXRpb25zPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21Bc3NvY2lhdGlvbnN9O2IucHJvdG90eXBlLmhhc0Fzc29jaWF0aW9uPWZ1bmN0aW9uKG4pe3JldHVybiEhdGhpcy5fbUFsbEFzc29jaWF0aW9uc1tuXX07Yi5wcm90b3R5cGUuZ2V0QWxsQXNzb2NpYXRpb25zPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21BbGxBc3NvY2lhdGlvbnN9O2IucHJvdG90eXBlLmdldEV2ZW50cz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9tRXZlbnRzfTtiLnByb3RvdHlwZS5oYXNFdmVudD1mdW5jdGlvbihuKXtyZXR1cm4hIXRoaXMuX21BbGxFdmVudHNbbl19O2IucHJvdG90eXBlLmdldEFsbEV2ZW50cz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9tQWxsRXZlbnRzfTtiLnByb3RvdHlwZS5nZXRQcm9wZXJ0eURlZmF1bHRzPWZ1bmN0aW9uKCl7dmFyIGQ9dGhpcy5fbURlZmF1bHRzLHQ7aWYoZCl7cmV0dXJuIGR9aWYodGhpcy5nZXRQYXJlbnQoKWluc3RhbmNlb2YgYil7ZD1xLnNhcC5uZXdPYmplY3QodGhpcy5nZXRQYXJlbnQoKS5nZXRQcm9wZXJ0eURlZmF1bHRzKCkpfWVsc2V7ZD17fX1mb3IodmFyIHMgaW4gdGhpcy5fbVByb3BlcnRpZXMpe2lmKHRoaXMuX21Qcm9wZXJ0aWVzW3NdLmRlZmF1bHRWYWx1ZSE9PW51bGwpe2Rbc109dGhpcy5fbVByb3BlcnRpZXNbc10uZGVmYXVsdFZhbHVlfWVsc2V7dD1ELmdldFR5cGUodGhpcy5fbVByb3BlcnRpZXNbc10udHlwZSk7aWYodCBpbnN0YW5jZW9mIEQpe2Rbc109dC5nZXREZWZhdWx0VmFsdWUoKX1lbHNle2Zvcih2YXIgaSBpbiB0KXtkW3NdPXRbaV07YnJlYWt9fX19cmV0dXJuKHRoaXMuX21EZWZhdWx0cz1kKX07Yi5wcm90b3R5cGUuY3JlYXRlUHJvcGVydHlCYWc9ZnVuY3Rpb24oKXtpZighdGhpcy5fZm5Qcm9wZXJ0eUJhZ0ZhY3Rvcnkpe3RoaXMuX2ZuUHJvcGVydHlCYWdGYWN0b3J5PXEuc2FwLmZhY3RvcnkodGhpcy5nZXRQcm9wZXJ0eURlZmF1bHRzKCkpfXJldHVybiBuZXcodGhpcy5fZm5Qcm9wZXJ0eUJhZ0ZhY3RvcnkpKCl9O2IucHJvdG90eXBlLl9lbnJpY2hDaGlsZEluZm9zPWZ1bmN0aW9uKCl7aWYodGhpcy5fYkVucmljaGVkKXtyZXR1cm59aWYodGhpcy5nZXRQYXJlbnQoKWluc3RhbmNlb2YgYil7dGhpcy5nZXRQYXJlbnQoKS5fZW5yaWNoQ2hpbGRJbmZvcygpfXZhciBtLG4saTtmdW5jdGlvbiBhKHAsbil7cmV0dXJuIHArbi5zdWJzdHJpbmcoMCwxKS50b1VwcGVyQ2FzZSgpK24uc3Vic3RyaW5nKDEpfW09dGhpcy5fbVByb3BlcnRpZXM7Zm9yKG4gaW4gbSl7aT1tW25dO2kuX3NOYW1lPW47aS5fc1VJRD1uO2kuX29QYXJlbnQ9dGhpcztpLl9pS2luZD1iLktpbmQuUFJPUEVSVFk7aS5fc011dGF0b3I9YSgic2V0IixuKTtpLl9zR2V0dGVyPWEoImdldCIsbil9bT10aGlzLl9tQWdncmVnYXRpb25zO2ZvcihuIGluIG0pe2k9bVtuXTtpLl9zTmFtZT1uO2kuX3NVSUQ9ImFnZ3JlZ2F0aW9uOiIrbjtpLl9vUGFyZW50PXRoaXM7aS5fc0Rlc3RydWN0b3I9YSgiZGVzdHJveSIsbik7aS5fc0dldHRlcj1hKCJnZXQiLG4pO2lmKGkubXVsdGlwbGUpe2kuX2lLaW5kPWIuS2luZC5NVUxUSVBMRV9BR0dSRUdBVElPTjtpLl9zTXV0YXRvcj1hKCJhZGQiLGkuc2luZ3VsYXJOYW1lKTtpLl9zUmVtb3ZlTXV0YXRvcj1hKCJyZW1vdmUiLGkuc2luZ3VsYXJOYW1lKTtpLl9zUmVtb3ZlQWxsTXV0YXRvcj1hKCJyZW1vdmVBbGwiLG4pfWVsc2V7aS5faUtpbmQ9Yi5LaW5kLlNJTkdMRV9BR0dSRUdBVElPTjtpLl9zTXV0YXRvcj1hKCJzZXQiLG4pfX1tPXRoaXMuX21Bc3NvY2lhdGlvbnM7Zm9yKG4gaW4gbSl7aT1tW25dO2kuX3NOYW1lPW47aS5fc1VJRD0iYXNzb2NpYXRpb246IituO2kuX29QYXJlbnQ9dGhpcztpLl9zR2V0dGVyPWEoImdldCIsbik7aWYoaS5tdWx0aXBsZSl7aS5faUtpbmQ9Yi5LaW5kLk1VTFRJUExFX0FTU09DSUFUSU9OO2kuX3NNdXRhdG9yPWEoImFkZCIsaS5zaW5ndWxhck5hbWUpfWVsc2V7aS5faUtpbmQ9Yi5LaW5kLlNJTkdMRV9BU1NPQ0lBVElPTjtpLl9zTXV0YXRvcj1hKCJzZXQiLG4pfX1tPXRoaXMuX21FdmVudHM7Zm9yKG4gaW4gbSl7aT1tW25dO2kuX3NOYW1lPW47aS5fc1VJRD0iZXZlbnQ6IituO2kuX29QYXJlbnQ9dGhpcztpLl9pS2luZD1iLktpbmQuRVZFTlQ7aS5fc011dGF0b3I9YSgiYXR0YWNoIixuKX10aGlzLl9iRW5yaWNoZWQ9dHJ1ZX07Yi5wcm90b3R5cGUuZ2V0SlNPTktleXM9ZnVuY3Rpb24oKXtpZih0aGlzLl9tSlNPTktleXMpe3JldHVybiB0aGlzLl9tSlNPTktleXN9dGhpcy5fZW5yaWNoQ2hpbGRJbmZvcygpO3ZhciBqPXt9O2Z1bmN0aW9uIGEobSl7dmFyIG4saTtmb3IobiBpbiBtKXtpPW1bbl07aWYoIWpbbl18fGkuX2lLaW5kPGpbbl0uX2lLaW5kKXtqW25dPWl9O2pbaS5fc1VJRF09aX19YSh0aGlzLmdldEFsbFByb3BlcnRpZXMoKSk7YSh0aGlzLmdldEFsbEFnZ3JlZ2F0aW9ucygpKTthKHRoaXMuZ2V0QWxsQXNzb2NpYXRpb25zKCkpO2EodGhpcy5nZXRBbGxFdmVudHMoKSk7cmV0dXJuKHRoaXMuX21KU09OS2V5cz1qKX07Yi5wcm90b3R5cGUuZ2VuZXJhdGVBY2Nlc3NvcnM9ZnVuY3Rpb24oKXt2YXIgYz10aGlzO3ZhciBlPXRoaXMuZ2V0Q2xhc3MoKS5wcm90b3R5cGU7ZnVuY3Rpb24gZyhwLG4sZixkKXt2YXIgbj1wK24uc3Vic3RyaW5nKDAsMSkudG9VcHBlckNhc2UoKStuLnN1YnN0cmluZygxKTtpZighZVtuXSl7ZVtuXT1kP2Z1bmN0aW9uKCl7cS5zYXAubG9nLndhcm5pbmcoIlVzYWdlIG9mIGRlcHJlY2F0ZWQgZmVhdHVyZTogIitjLmdldE5hbWUoKSsiLiIrbik7cmV0dXJuIGYuYXBwbHkodGhpcyxhcmd1bWVudHMpfTpmO2MuX2FQdWJsaWNNZXRob2RzLnB1c2gobil9fXEuZWFjaCh0aGlzLl9tUHJvcGVydGllcyxmdW5jdGlvbihuLGkpe2coImdldCIsbixmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldFByb3BlcnR5KG4pfSk7Zygic2V0IixuLGZ1bmN0aW9uKHYpe3RoaXMuc2V0UHJvcGVydHkobix2KTtyZXR1cm4gdGhpc30saS5kZXByZWNhdGVkKTtpZihpLmJpbmRhYmxlKXtnKCJiaW5kIixuLGZ1bmN0aW9uKHAsZixtKXt0aGlzLmJpbmRQcm9wZXJ0eShuLHAsZixtKTtyZXR1cm4gdGhpc30saS5kZXByZWNhdGVkKTtnKCJ1bmJpbmQiLG4sZnVuY3Rpb24ocCl7dGhpcy51bmJpbmRQcm9wZXJ0eShuLHApO3JldHVybiB0aGlzfSl9fSk7cS5lYWNoKHRoaXMuX21BZ2dyZWdhdGlvbnMsZnVuY3Rpb24obixkKXtpZighZC5tdWx0aXBsZSl7ZygiZ2V0IixuLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0QWdncmVnYXRpb24obil9KTtnKCJzZXQiLG4sZnVuY3Rpb24odil7dGhpcy5zZXRBZ2dyZWdhdGlvbihuLHYpO3JldHVybiB0aGlzfSxkLmRlcHJlY2F0ZWQpfWVsc2V7dmFyIGg9ZC5zaW5ndWxhck5hbWU7ZygiZ2V0IixuLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0QWdncmVnYXRpb24obixbXSl9KTtnKCJhZGQiLGgsZnVuY3Rpb24oYSl7dGhpcy5hZGRBZ2dyZWdhdGlvbihuLGEpO3JldHVybiB0aGlzfSxkLmRlcHJlY2F0ZWQpO2coImluc2VydCIsaCxmdW5jdGlvbihpLGEpe3RoaXMuaW5zZXJ0QWdncmVnYXRpb24obixpLGEpO3JldHVybiB0aGlzfSxkLmRlcHJlY2F0ZWQpO2coInJlbW92ZSIsaCxmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5yZW1vdmVBZ2dyZWdhdGlvbihuLGEpfSk7ZygicmVtb3ZlQWxsIixuLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmVtb3ZlQWxsQWdncmVnYXRpb24obil9KTtnKCJpbmRleE9mIixoLGZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmluZGV4T2ZBZ2dyZWdhdGlvbihuLGEpfSl9ZygiZGVzdHJveSIsbixmdW5jdGlvbigpe3RoaXMuZGVzdHJveUFnZ3JlZ2F0aW9uKG4pO3JldHVybiB0aGlzfSk7aWYoZC5iaW5kYWJsZSl7ZygiYmluZCIsbixmdW5jdGlvbihwLHQscyxmKXt0aGlzLmJpbmRBZ2dyZWdhdGlvbihuLHAsdCxzLGYpO3JldHVybiB0aGlzfSxkLmRlcHJlY2F0ZWQpO2coInVuYmluZCIsbixmdW5jdGlvbihwKXt0aGlzLnVuYmluZEFnZ3JlZ2F0aW9uKG4scCk7cmV0dXJuIHRoaXN9KX19KTtxLmVhY2godGhpcy5fbUFzc29jaWF0aW9ucyxmdW5jdGlvbihuLGkpe2lmKCFpLm11bHRpcGxlKXtnKCJnZXQiLG4sZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRBc3NvY2lhdGlvbihuKX0pO2coInNldCIsbixmdW5jdGlvbih2KXt0aGlzLnNldEFzc29jaWF0aW9uKG4sdik7cmV0dXJuIHRoaXN9LGkuZGVwcmVjYXRlZCl9ZWxzZXt2YXIgZD1pLnNpbmd1bGFyTmFtZTtnKCJnZXQiLG4sZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRBc3NvY2lhdGlvbihuLFtdKX0pO2coImFkZCIsZCxmdW5jdGlvbihhKXt0aGlzLmFkZEFzc29jaWF0aW9uKG4sYSk7cmV0dXJuIHRoaXN9LGkuZGVwcmVjYXRlZCk7ZygicmVtb3ZlIixkLGZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnJlbW92ZUFzc29jaWF0aW9uKG4sYSl9KTtnKCJyZW1vdmVBbGwiLG4sZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yZW1vdmVBbGxBc3NvY2lhdGlvbihuKX0pfX0pO3EuZWFjaCh0aGlzLl9tRXZlbnRzLGZ1bmN0aW9uKG4saSl7ZygiYXR0YWNoIixuLGZ1bmN0aW9uKGQsZixvKXt0aGlzLmF0dGFjaEV2ZW50KG4sZCxmLG8pO3JldHVybiB0aGlzfSxpLmRlcHJlY2F0ZWQpO2coImRldGFjaCIsbixmdW5jdGlvbihmLG8pe3RoaXMuZGV0YWNoRXZlbnQobixmLG8pO3JldHVybiB0aGlzfSk7dmFyIGE9ISFpLmFsbG93UHJldmVudERlZmF1bHQ7dmFyIGg9ISFpLmVuYWJsZUV2ZW50QnViYmxpbmc7ZygiZmlyZSIsbixmdW5jdGlvbihwKXtyZXR1cm4gdGhpcy5maXJlRXZlbnQobixwLGEsaCl9KX0pfTsoZnVuY3Rpb24oKXt2YXIgdT17fTtmdW5jdGlvbiBhKGkpe2k9c2FwLnVpLmdldENvcmUoKS5nZXRDb25maWd1cmF0aW9uKCkuZ2V0VUlEUHJlZml4KCkraTt1W2ldPXVbaV18fDA7cmV0dXJuKGkrdVtpXSsrKX1iLnVpZD1hO2IucHJvdG90eXBlLnVpZD1mdW5jdGlvbigpe3ZhciBpPXRoaXMuX3NVSURUb2tlbjtpZih0eXBlb2YgaSE9PSJzdHJpbmciKXtpPXRoaXMuZ2V0TmFtZSgpO2k9aS5zbGljZShpLmxhc3RJbmRleE9mKCcuJykrMSk7aT1pLnJlcGxhY2UoLyhbYS16XSkoW0EtWl0pL2csIiQxICQyIikuc3BsaXQoIiAiKS5zbGljZSgtMSlbMF07aT10aGlzLl9zVUlEVG9rZW49aS5yZXBsYWNlKC8oW15BLVphLXowLTktXy46XSl8KFswLTldKyQpL2csIiIpLnRvTG93ZXJDYXNlKCl9cmV0dXJuIGEoaSl9fSgpKTtyZXR1cm4gYn0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLkNvbXBvbmVudE1ldGFkYXRhJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUuQ29tcG9uZW50TWV0YWRhdGEnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9Db21wb25lbnRNZXRhZGF0YSIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ3NhcC91aS9iYXNlL01hbmFnZWRPYmplY3RNZXRhZGF0YSddLGZ1bmN0aW9uKHEsTSl7InVzZSBzdHJpY3QiO3ZhciBDPWZ1bmN0aW9uKGMsbyl7TS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9O0MucHJvdG90eXBlPXEuc2FwLm5ld09iamVjdChNLnByb3RvdHlwZSk7Qy5wcmVwcm9jZXNzQ2xhc3NJbmZvPWZ1bmN0aW9uKGMpe2lmKGMmJnR5cGVvZiBjLm1ldGFkYXRhPT09InN0cmluZyIpe2MubWV0YWRhdGE9e19zcmM6Yy5tZXRhZGF0YX19cmV0dXJuIGN9O0MucHJvdG90eXBlLmFwcGx5U2V0dGluZ3M9ZnVuY3Rpb24oYyl7dmFyIHM9Yy5tZXRhZGF0YTt2YXIgbj10aGlzLmdldE5hbWUoKSxwPW4ucmVwbGFjZSgvXC5cdys/JC8sIiIpO2lmKHMuX3NyYyl7aWYocy5fc3JjPT0iY29tcG9uZW50Lmpzb24iKXtxLnNhcC5sb2cud2FybmluZygiVXNhZ2Ugb2YgZGVjbGFjYXRpb24gXCJtZXRhZGF0YTogJ2NvbXBvbmVudC5qc29uJ1wiIGlzIGRlcHJlY2F0ZWQgKGNvbXBvbmVudCAiK24rIikuIFVzZSBcIm1ldGFkYXRhOiAnanNvbidcIiBpbnN0ZWFkLiIpfWVsc2UgaWYocy5fc3JjIT0ianNvbiIpe3Rocm93IG5ldyBFcnJvcigiSW52YWxpZCBtZXRhZGF0YSBkZWNsYXJhdGlvbiBmb3IgY29tcG9uZW50ICIrbisiOiBcIiIrcy5fc3JjKyJcIiEgVXNlIFwibWV0YWRhdGE6ICdqc29uJ1wiIHRvIGxvYWQgbWV0YWRhdGEgZnJvbSBjb21wb25lbnQuanNvbi4iKX12YXIgcj1wLnJlcGxhY2UoL1wuL2csIi8iKSsiL2NvbXBvbmVudC5qc29uIjtxLnNhcC5sb2cuaW5mbygiVGhlIG1ldGFkYXRhIG9mIHRoZSBjb21wb25lbnQgIituKyIgaXMgbG9hZGVkIGZyb20gZmlsZSAiK3IrIi4iKTt0cnl7dmFyIFI9cS5zYXAubG9hZFJlc291cmNlKHIse2RhdGFUeXBlOiJqc29uIixmYWlsT25FcnJvcjpmYWxzZX0pO3EuZXh0ZW5kKHMsUil9Y2F0Y2goZSl7cS5zYXAubG9nLmVycm9yKCJGYWlsZWQgdG8gbG9hZCBjb21wb25lbnQgbWV0YWRhdGEgZnJvbSBcIiIrcisiXCIgKGNvbXBvbmVudCAiK24rIikhIFJlYXNvbjogIitlKX19TS5wcm90b3R5cGUuYXBwbHlTZXR0aW5ncy5jYWxsKHRoaXMsYyk7dGhpcy5fc0NvbXBvbmVudE5hbWU9cDt0aGlzLl9iSW5pdGlhbGl6ZWQ9ZmFsc2U7dGhpcy5faUluc3RhbmNlQ291bnQ9MDt0aGlzLl9zVmVyc2lvbj1zLnZlcnNpb247dGhpcy5fbURlcGVuZGVuY2llcz1zLmRlcGVuZGVuY2llczt0aGlzLl9hSW5jbHVkZXM9cy5pbmNsdWRlczt0aGlzLl9tQ29uZmlnPXMuY29uZmlnO3RoaXMuX21DdXN0b21pemluZz1zLmN1c3RvbWl6aW5nO3RoaXMuX21Nb2RlbHM9cy5tb2RlbHN8fHt9O3RoaXMuX21TZXJ2aWNlcz1zLnNlcnZpY2VzfHx7fTt2YXIgUD10aGlzLmdldFBhcmVudCgpO2lmKFAgaW5zdGFuY2VvZiBDKXt0aGlzLl9tQ29uZmlnPXEuZXh0ZW5kKHRydWUse30sUC5fbUNvbmZpZyx0aGlzLl9tQ29uZmlnKTt0aGlzLl9tQ3VzdG9taXppbmc9cS5leHRlbmQodHJ1ZSx7fSxQLl9tQ3VzdG9taXppbmcsdGhpcy5fbUN1c3RvbWl6aW5nKTt0aGlzLl9tTW9kZWxzPXEuZXh0ZW5kKHRydWUse30sUC5fbU1vZGVscyx0aGlzLl9tTW9kZWxzKTt0aGlzLl9tU2VydmljZXM9cS5leHRlbmQodHJ1ZSx7fSxQLl9tU2VydmljZXMsdGhpcy5fbVNlcnZpY2VzKX10aGlzLl9vU3RhdGljSW5mbz1zfTtDLnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKCl7aWYoIXRoaXMuX2JJbml0aWFsaXplZCl7dmFyIHA9dGhpcy5nZXRQYXJlbnQoKTtpZihwIGluc3RhbmNlb2YgQyl7cC5pbml0KCl9dGhpcy5fbG9hZERlcGVuZGVuY2llcygpO3RoaXMuX2xvYWRJbmNsdWRlcygpO3RoaXMuX2JJbml0aWFsaXplZD10cnVlfX07Qy5wcm90b3R5cGUuZXhpdD1mdW5jdGlvbigpe2lmKHRoaXMuX2JJbml0aWFsaXplZCl7dmFyIHA9dGhpcy5nZXRQYXJlbnQoKTtpZihwIGluc3RhbmNlb2YgQyl7cC5leGl0KCl9dGhpcy5fYkluaXRpYWxpemVkPWZhbHNlfX07Qy5wcm90b3R5cGUub25Jbml0Q29tcG9uZW50PWZ1bmN0aW9uKCl7aWYodGhpcy5faUluc3RhbmNlQ291bnQ9PT0wJiYhcS5pc0VtcHR5T2JqZWN0KHRoaXMuX21DdXN0b21pemluZykpe3Euc2FwLnJlcXVpcmUoInNhcC51aS5jb3JlLkN1c3RvbWl6aW5nQ29uZmlndXJhdGlvbiIpO3NhcC51aS5jb3JlLkN1c3RvbWl6aW5nQ29uZmlndXJhdGlvbi5hY3RpdmF0ZUZvckNvbXBvbmVudCh0aGlzLl9zQ29tcG9uZW50TmFtZSl9dGhpcy5faUluc3RhbmNlQ291bnQrK307Qy5wcm90b3R5cGUub25FeGl0Q29tcG9uZW50PWZ1bmN0aW9uKCl7dGhpcy5faUluc3RhbmNlQ291bnQtLTtpZih0aGlzLl9pSW5zdGFuY2VDb3VudD09PTAmJiFxLmlzRW1wdHlPYmplY3QodGhpcy5fbUN1c3RvbWl6aW5nKSl7aWYoc2FwLnVpLmNvcmUuQ3VzdG9taXppbmdDb25maWd1cmF0aW9uKXtzYXAudWkuY29yZS5DdXN0b21pemluZ0NvbmZpZ3VyYXRpb24uZGVhY3RpdmF0ZUZvckNvbXBvbmVudCh0aGlzLl9zQ29tcG9uZW50TmFtZSl9fX07Qy5wcm90b3R5cGUuZ2V0Q3VzdG9tRW50cnk9ZnVuY3Rpb24oayxtKXtpZigha3x8ay5pbmRleE9mKCIuIik8PTApe3Euc2FwLmxvZy53YXJuaW5nKCJDb21wb25lbnQgTWV0YWRhdGEgZW50cmllcyB3aXRoIGtleXMgd2l0aG91dCBuYW1lc3BhY2UgcHJlZml4IGNhbiBub3QgYmUgcmVhZCB2aWEgZ2V0Q3VzdG9tRW50cnkuIEtleTogIitrKyIsIENvbXBvbmVudDogIit0aGlzLmdldE5hbWUoKSk7cmV0dXJuIG51bGx9dmFyIGQ9dGhpcy5fb1N0YXRpY0luZm9ba118fHt9O2lmKCFxLmlzUGxhaW5PYmplY3QoZCkpe3Euc2FwLmxvZy53YXJuaW5nKCJDdXN0b20gQ29tcG9uZW50IE1ldGFkYXRhIGVudHJ5IHdpdGgga2V5ICciK2srIicgbXVzdCBiZSBhbiBvYmplY3QuIENvbXBvbmVudDogIit0aGlzLmdldE5hbWUoKSk7cmV0dXJuIG51bGx9dmFyIHA9dGhpcy5nZXRQYXJlbnQoKTtpZihtJiZwIGluc3RhbmNlb2YgQyl7cmV0dXJuIHEuZXh0ZW5kKHRydWUse30scC5nZXRDdXN0b21FbnRyeShrLG0pLGQpfXJldHVybiBxLmV4dGVuZCh0cnVlLHt9LGQpfTtDLnByb3RvdHlwZS5nZXREZXBlbmRlbmNpZXM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbURlcGVuZGVuY2llc307Qy5wcm90b3R5cGUuZ2V0SW5jbHVkZXM9ZnVuY3Rpb24oKXtyZXR1cm4odGhpcy5fYUluY2x1ZGVzJiZ0aGlzLl9hSW5jbHVkZXMubGVuZ3RoPjApP3RoaXMuX2FJbmNsdWRlczpudWxsfTtDLnByb3RvdHlwZS5nZXRVSTVWZXJzaW9uPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21EZXBlbmRlbmNpZXM/dGhpcy5fbURlcGVuZGVuY2llcy51aTV2ZXJzaW9uOm51bGx9O0MucHJvdG90eXBlLmdldENvbXBvbmVudHM9ZnVuY3Rpb24oKXt2YXIgYz1udWxsO2lmKHRoaXMuX21EZXBlbmRlbmNpZXMpe2lmKHRoaXMuX21EZXBlbmRlbmNpZXMuY29tcG9uZW50cyYmKHRoaXMuX21EZXBlbmRlbmNpZXMuY29tcG9uZW50cy5sZW5ndGg+MCkpe2M9dGhpcy5fbURlcGVuZGVuY2llcy5jb21wb25lbnRzfX1yZXR1cm4gY307Qy5wcm90b3R5cGUuZ2V0TGlicz1mdW5jdGlvbigpe3ZhciBsPW51bGw7aWYodGhpcy5fbURlcGVuZGVuY2llcyl7aWYodGhpcy5fbURlcGVuZGVuY2llcy5saWJzJiYodGhpcy5fbURlcGVuZGVuY2llcy5saWJzLmxlbmd0aD4wKSl7bD10aGlzLl9tRGVwZW5kZW5jaWVzLmxpYnN9fXJldHVybiBsfTtDLnByb3RvdHlwZS5nZXRWZXJzaW9uPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NWZXJzaW9ufTtDLnByb3RvdHlwZS5nZXRDb25maWc9ZnVuY3Rpb24oayl7cmV0dXJuIHRoaXMuX21Db25maWc/cS5leHRlbmQoe30saz90aGlzLl9tQ29uZmlnW2tdOnRoaXMuX21Db25maWcpOnVuZGVmaW5lZH07Qy5wcm90b3R5cGUuZ2V0Q3VzdG9taXppbmc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbUN1c3RvbWl6aW5nP3EuZXh0ZW5kKHt9LHRoaXMuX21DdXN0b21pemluZyk6dW5kZWZpbmVkfTtDLnByb3RvdHlwZS5nZXRNb2RlbHM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbU1vZGVsc307Qy5wcm90b3R5cGUuZ2V0U2VydmljZXM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbVNlcnZpY2VzfTtDLnByb3RvdHlwZS5fbG9hZEluY2x1ZGVzPWZ1bmN0aW9uKCl7dmFyIEk9dGhpcy5nZXRJbmNsdWRlcygpO2lmKEkmJkkubGVuZ3RoPjApe3ZhciB0PXRoaXM7dmFyIGw9dGhpcy5nZXRMaWJyYXJ5TmFtZSgpO3EuZWFjaChJLGZ1bmN0aW9uKGksZil7aWYoZi5tYXRjaCgvXC5jc3MkL2kpKXt2YXIgYz1zYXAudWkucmVzb3VyY2UobCxmKTtxLnNhcC5sb2cuaW5mbygiQ29tcG9uZW50IFwiIit0LmdldE5hbWUoKSsiXCIgaXMgbG9hZGluZyBDU1M6IFwiIitjKyJcIiIpO3Euc2FwLmluY2x1ZGVTdHlsZVNoZWV0KGMpfWVsc2V7dmFyIG09Zi5tYXRjaCgvXC5qcyQvaSk7aWYobSl7dmFyIHA9bC5yZXBsYWNlKC9cLi9nLCcvJykrKGYuc2xpY2UoMCwxKT09PScvJz8nJzonLycpK2Yuc2xpY2UoMCxtLmluZGV4KTtxLnNhcC5sb2cuaW5mbygiQ29tcG9uZW50IFwiIit0LmdldE5hbWUoKSsiXCIgaXMgbG9hZGluZyBKUzogXCIiK3ArIlwiIik7cS5zYXAuX3JlcXVpcmVQYXRoKHApfX19KX19O0MucHJvdG90eXBlLl9sb2FkRGVwZW5kZW5jaWVzPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxkPXRoaXMuZ2V0RGVwZW5kZW5jaWVzKCk7aWYoZCl7dmFyIGw9ZC5saWJzO2lmKGwpe3EuZWFjaChsLGZ1bmN0aW9uKGksTCl7cS5zYXAubG9nLmluZm8oIkNvbXBvbmVudCBcIiIrdC5nZXROYW1lKCkrIlwiIGlzIGxvYWRpbmcgbGlicmFyeTogXCIiK0wrIlwiIik7c2FwLnVpLmdldENvcmUoKS5sb2FkTGlicmFyeShMKX0pfXZhciBjPWQuY29tcG9uZW50cztpZihjKXtxLmVhY2goYyxmdW5jdGlvbihpLG4pe3Euc2FwLmxvZy5pbmZvKCJDb21wb25lbnQgXCIiK3QuZ2V0TmFtZSgpKyJcIiBpcyBsb2FkaW5nIGNvbXBvbmVudDogXCIiK24rIi5Db21wb25lbnRcIiIpO3NhcC51aS5jb21wb25lbnQubG9hZCh7bmFtZTpufSl9KX19fTtyZXR1cm4gQ30sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLkNvbmZpZ3VyYXRpb24nKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS5Db25maWd1cmF0aW9uJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvQ29uZmlndXJhdGlvbiIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ3NhcC91aS9iYXNlL09iamVjdCcsJy4vTG9jYWxlJywnc2FwL3VpL3RoaXJkcGFydHkvVVJJJ10sZnVuY3Rpb24ocSxCLEwsVSl7InVzZSBzdHJpY3QiO3ZhciBDPUIuZXh0ZW5kKCJzYXAudWkuY29yZS5Db25maWd1cmF0aW9uIix7Y29uc3RydWN0b3I6ZnVuY3Rpb24obyl7dGhpcy5fb0NvcmU9bztmdW5jdGlvbiBmKCl7dmFyIGU7aWYoISFzYXAudWkuRGV2aWNlLm9zLmFuZHJvaWQpe2U9bmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvXHMoW2Etel17Mn0tW2Etel17Mn0pWzspXS9pKTtpZihlKXtyZXR1cm4gZVsxXX19cmV0dXJuIG5hdmlnYXRvci5sYW5ndWFnZXx8bmF2aWdhdG9yLnVzZXJMYW5ndWFnZXx8bmF2aWdhdG9yLmJyb3dzZXJMYW5ndWFnZX12YXIgZz17InRoZW1lIjp7dHlwZToic3RyaW5nIixkZWZhdWx0VmFsdWU6ImJhc2UifSwibGFuZ3VhZ2UiOnt0eXBlOiJzdHJpbmciLGRlZmF1bHRWYWx1ZTpmKCl9LCJmb3JtYXRMb2NhbGUiOnt0eXBlOiJzdHJpbmciLGRlZmF1bHRWYWx1ZTpudWxsfSwiYWNjZXNzaWJpbGl0eSI6e3R5cGU6ImJvb2xlYW4iLGRlZmF1bHRWYWx1ZTp0cnVlfSwiYW5pbWF0aW9uIjp7dHlwZToiYm9vbGVhbiIsZGVmYXVsdFZhbHVlOnRydWV9LCJydGwiOnt0eXBlOiJib29sZWFuIixkZWZhdWx0VmFsdWU6bnVsbH0sImRlYnVnIjp7dHlwZToiYm9vbGVhbiIsZGVmYXVsdFZhbHVlOmZhbHNlfSwiaW5zcGVjdCI6e3R5cGU6ImJvb2xlYW4iLGRlZmF1bHRWYWx1ZTpmYWxzZX0sIm9yaWdpbkluZm8iOnt0eXBlOiJib29sZWFuIixkZWZhdWx0VmFsdWU6ZmFsc2V9LCJub0NvbmZsaWN0Ijp7dHlwZToiYm9vbGVhbiIsZGVmYXVsdFZhbHVlOmZhbHNlLG5vVXJsOnRydWV9LCJub0R1cGxpY2F0ZUlkcyI6e3R5cGU6ImJvb2xlYW4iLGRlZmF1bHRWYWx1ZTp0cnVlfSwidHJhY2UiOnt0eXBlOiJib29sZWFuIixkZWZhdWx0VmFsdWU6ZmFsc2Usbm9Vcmw6dHJ1ZX0sIm1vZHVsZXMiOnt0eXBlOiJzdHJpbmdbXSIsZGVmYXVsdFZhbHVlOltdLG5vVXJsOnRydWV9LCJhcmVhcyI6e3R5cGU6InN0cmluZ1tdIixkZWZhdWx0VmFsdWU6bnVsbCxub1VybDp0cnVlfSwib25Jbml0Ijp7dHlwZToiY29kZSIsZGVmYXVsdFZhbHVlOnVuZGVmaW5lZCxub1VybDp0cnVlfSwidWlkUHJlZml4Ijp7dHlwZToic3RyaW5nIixkZWZhdWx0VmFsdWU6Il9fIixub1VybDp0cnVlfSwiaWdub3JlVXJsUGFyYW1zIjp7dHlwZToiYm9vbGVhbiIsZGVmYXVsdFZhbHVlOmZhbHNlLG5vVXJsOnRydWV9LCJ3ZWlucmVTZXJ2ZXIiOnt0eXBlOiJzdHJpbmciLGRlZmF1bHRWYWx1ZToiIixub1VybDp0cnVlfSwid2VpbnJlSWQiOnt0eXBlOiJzdHJpbmciLGRlZmF1bHRWYWx1ZToiIn0sInByZWxvYWQiOnt0eXBlOiJzdHJpbmciLGRlZmF1bHRWYWx1ZToiYXV0byJ9LCJyb290Q29tcG9uZW50Ijp7dHlwZToic3RyaW5nIixkZWZhdWx0VmFsdWU6IiIsbm9Vcmw6dHJ1ZX0sInh4LXJvb3RDb21wb25lbnROb2RlIjp7dHlwZToic3RyaW5nIixkZWZhdWx0VmFsdWU6IiIsbm9Vcmw6dHJ1ZX0sImFwcGxpY2F0aW9uIjp7dHlwZToic3RyaW5nIixkZWZhdWx0VmFsdWU6IiJ9LCJhcHBDYWNoZUJ1c3RlciI6e3R5cGU6InN0cmluZ1tdIixkZWZhdWx0VmFsdWU6W119LCJ4eC1hcHBDYWNoZUJ1c3Rlck1vZGUiOnt0eXBlOiJzdHJpbmciLGRlZmF1bHRWYWx1ZToic3luYyJ9LCJ4eC1kaXNhYmxlQ3VzdG9taXppbmciOnt0eXBlOiJib29sZWFuIixkZWZhdWx0VmFsdWU6ZmFsc2Usbm9Vcmw6dHJ1ZX0sInh4LWxvYWRBbGxNb2RlIjp7dHlwZToiYm9vbGVhbiIsZGVmYXVsdFZhbHVlOmZhbHNlLG5vVXJsOnRydWV9LCJ4eC10ZXN0LW1vYmlsZSI6e3R5cGU6ImJvb2xlYW4iLGRlZmF1bHRWYWx1ZTpmYWxzZX0sInh4LXByZWxvYWRMaWJDc3MiOnt0eXBlOiJzdHJpbmdbXSIsZGVmYXVsdFZhbHVlOltdfSwieHgtY29tcG9uZW50UHJlbG9hZCI6e3R5cGU6InN0cmluZyIsZGVmYXVsdFZhbHVlOiIifSwieHgtYmluZGluZ1N5bnRheCI6e3R5cGU6InN0cmluZyIsZGVmYXVsdFZhbHVlOiJzaW1wbGUiLG5vVXJsOnRydWV9LCJ4eC1kZXNpZ25Nb2RlIjp7dHlwZToiYm9vbGVhbiIsZGVmYXVsdFZhbHVlOmZhbHNlfSwieHgtYWNjZXNzaWJpbGl0eU1vZGUiOnt0eXBlOiJib29sZWFuIixkZWZhdWx0VmFsdWU6ZmFsc2V9LCJ4eC1zdXBwb3J0ZWRMYW5ndWFnZXMiOnt0eXBlOiJzdHJpbmdbXSIsZGVmYXVsdFZhbHVlOltdfSwieHgtYm9vdFRhc2siOnt0eXBlOiJmdW5jdGlvbiIsZGVmYXVsdFZhbHVlOnVuZGVmaW5lZCxub1VybDp0cnVlfSwieHgtc3VwcHJlc3NEZWFjdGl2YXRpb25PZkNvbnRyb2xsZXJDb2RlIjp7dHlwZToiYm9vbGVhbiIsZGVmYXVsdFZhbHVlOmZhbHNlfSwieHgtbm9OYXRpdmVTY3JvbGwiOnt0eXBlOiJib29sZWFuIixkZWZhdWx0VmFsdWU6ZmFsc2V9LCJzdGF0aXN0aWNzIjp7dHlwZToiYm9vbGVhbiIsZGVmYXVsdFZhbHVlOmZhbHNlfX07dmFyIGg9eyJ4eC10ZXN0IjoiMS4xNSIsImZsZXhCb3hQb2x5ZmlsbCI6IjEuMTQiLCJzYXBNZVRhYkNvbnRhaW5lciI6IjEuMTQiLCJzYXBNZVByb2dlc3NJbmRpY2F0b3IiOiIxLjE0Iiwic2FwTUdyb3dpbmdMaXN0IjoiMS4xNCIsInNhcE1MaXN0QXNUYWJsZSI6IjEuMTQiLCJzYXBNRGlhbG9nV2l0aFBhZGRpbmciOiIxLjE0In07dGhpcy5vRm9ybWF0U2V0dGluZ3M9bmV3IEMuRm9ybWF0U2V0dGluZ3ModGhpcyk7dmFyIGk9dGhpcztmdW5jdGlvbiBzKE4sVil7aWYodHlwZW9mIFY9PT0idW5kZWZpbmVkInx8Vj09PW51bGwpe3JldHVybn1zd2l0Y2goZ1tOXS50eXBlKXtjYXNlImJvb2xlYW4iOmlmKHR5cGVvZiBWPT09InN0cmluZyIpe2lmKGdbTl0uZGVmYXVsdFZhbHVlKXtpW05dPVYudG9Mb3dlckNhc2UoKSE9ImZhbHNlIn1lbHNle2lbTl09Vi50b0xvd2VyQ2FzZSgpPT09InRydWUifHxWLnRvTG93ZXJDYXNlKCk9PT0ieCJ9fWVsc2V7aVtOXT0hIVZ9YnJlYWs7Y2FzZSJzdHJpbmciOmlbTl09IiIrVjticmVhaztjYXNlImNvZGUiOmlbTl09dHlwZW9mIFY9PT0iZnVuY3Rpb24iP1Y6U3RyaW5nKFYpO2JyZWFrO2Nhc2UiZnVuY3Rpb24iOmlmKHR5cGVvZiBWIT09ImZ1bmN0aW9uIil7dGhyb3cgbmV3IEVycm9yKCJ1bnN1cHBvcnRlZCB2YWx1ZSIpfWlbTl09VjticmVhaztjYXNlInN0cmluZ1tdIjppZihxLmlzQXJyYXkoVikpe2lbTl09Vn1lbHNlIGlmKHR5cGVvZiBWPT09InN0cmluZyIpe2lbTl09cS5tYXAoVi5zcGxpdCgvWyAsO10vKSxmdW5jdGlvbigkKXtyZXR1cm4gcS50cmltKCQpfSl9ZWxzZXt0aHJvdyBuZXcgRXJyb3IoInVuc3VwcG9ydGVkIHZhbHVlIil9YnJlYWs7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoImlsbGVnYWwgc3RhdGUiKX19ZnVuY3Rpb24gaihUKXt2YXIgdix3O3RyeXt2PW5ldyBVUkkoVCx3aW5kb3cubG9jYXRpb24uaHJlZikubm9ybWFsaXplKCk7dz12LnBhdGgoKTtyZXR1cm4gdysody5zbGljZSgtMSk9PT0nLyc/Jyc6Jy8nKSsiVUk1LyJ9Y2F0Y2goZSl7fX1mb3IodmFyIG4gaW4gZyl7aVtuXT1nW25dLmRlZmF1bHRWYWx1ZX12YXIgaz13aW5kb3dbInNhcC11aS1jb25maWciXXx8e307ay5vbmluaXQ9ay5vbmluaXR8fGtbImV2dC1vbmluaXQiXTtmb3IodmFyIG4gaW4gZyl7cyhuLGtbbi50b0xvd2VyQ2FzZSgpXSl9aWYoay5saWJzKXtpLm1vZHVsZXM9cS5tYXAoay5saWJzLnNwbGl0KCIsIiksZnVuY3Rpb24oJCl7cmV0dXJuIHEudHJpbSgkKSsiLmxpYnJhcnkifSkuY29uY2F0KGkubW9kdWxlcyl9dmFyIFA9ImNvbXBhdHZlcnNpb24iO3ZhciBEPWtbUF07dmFyIGw9cS5zYXAuVmVyc2lvbigiMS4xNCIpO3RoaXMuX2NvbXBhdHZlcnNpb249e307ZnVuY3Rpb24gXyhlKXt2YXIgdj0hZT9EfHxsLnRvU3RyaW5nKCk6a1tQKyItIitlLnRvTG93ZXJDYXNlKCldfHxEfHxoW2VdfHxsLnRvU3RyaW5nKCk7dj1xLnNhcC5WZXJzaW9uKHYudG9Mb3dlckNhc2UoKT09PSJlZGdlIj9zYXAudWkudmVyc2lvbjp2KTtyZXR1cm4gcS5zYXAuVmVyc2lvbih2LmdldE1ham9yKCksdi5nZXRNaW5vcigpKX10aGlzLl9jb21wYXR2ZXJzaW9uLl9kZWZhdWx0PV8oKTtmb3IodmFyIG4gaW4gaCl7dGhpcy5fY29tcGF0dmVyc2lvbltuXT1fKG4pfWlmKCFpLmlnbm9yZVVybFBhcmFtcyl7dmFyIHU9InNhcC11aS0iO3ZhciBtPXEuc2FwLmdldFVyaVBhcmFtZXRlcnMoKTtpZihtLm1QYXJhbXNbJ3NhcC1sb2NhbGUnXXx8bS5tUGFyYW1zWydzYXAtbGFuZ3VhZ2UnXSl7dmFyIFY9bS5nZXQoJ3NhcC1sb2NhbGUnKXx8TVttLmdldCgnc2FwLWxhbmd1YWdlJykudG9VcHBlckNhc2UoKV18fG0uZ2V0KCdzYXAtbGFuZ3VhZ2UnKTtpZihWPT09IiIpe2lbJ2xhbmd1YWdlJ109Z1snbGFuZ3VhZ2UnXS5kZWZhdWx0VmFsdWV9ZWxzZXtzKCdsYW5ndWFnZScsVil9fWlmKG0ubVBhcmFtc1snc2FwLWFjY2Vzc2liaWxpdHknXSl7dmFyIFY9bS5nZXQoJ3NhcC1hY2Nlc3NpYmlsaXR5Jyk7aWYoVj09PSJYInx8Vj09PSJ4Iil7cygneHgtYWNjZXNzaWJpbGl0eU1vZGUnLHRydWUpfWVsc2V7cygneHgtYWNjZXNzaWJpbGl0eU1vZGUnLGZhbHNlKX19aWYobS5tUGFyYW1zWydzYXAtcnRsJ10pe3ZhciBWPW0uZ2V0KCdzYXAtcnRsJyk7aWYoVj09PSJYInx8Vj09PSJ4Iil7cygncnRsJyx0cnVlKX1lbHNle3MoJ3J0bCcsZmFsc2UpfX1pZihtLm1QYXJhbXNbJ3NhcC10aGVtZSddKXt2YXIgVj1tLmdldCgnc2FwLXRoZW1lJyk7aWYoVj09PSIiKXtpWyd0aGVtZSddPWdbJ3RoZW1lJ10uZGVmYXVsdFZhbHVlfWVsc2V7cygndGhlbWUnLFYpfX1pZihtLm1QYXJhbXNbJ3NhcC1zdGF0aXN0aWNzJ10pe3ZhciBWPW0uZ2V0KCdzYXAtc3RhdGlzdGljcycpO3MoJ3N0YXRpc3RpY3MnLFYpfWZvcih2YXIgbiBpbiBnKXtpZihnW25dLm5vVXJsKXtjb250aW51ZX12YXIgVj1tLmdldCh1K24pO2lmKFY9PT0iIil7aVtuXT1nW25dLmRlZmF1bHRWYWx1ZX1lbHNle3MobixWKX19fXRoaXMuZGVyaXZlZFJUTD1MLl9pbXBsaWVzUlRMKGkubGFuZ3VhZ2UpO3ZhciB0PWkudGhlbWU7dmFyIFQ7dmFyIEk9dC5pbmRleE9mKCJAIik7aWYoST49MCl7VD1qKHQuc2xpY2UoSSsxKSk7aWYoVCl7aS50aGVtZT10LnNsaWNlKDAsSSk7aS50aGVtZVJvb3Q9VH1lbHNle2kudGhlbWU9KGsudGhlbWUmJmsudGhlbWUhPT10KT9rLnRoZW1lOiJiYXNlIjtJPS0xfX1pLnRoZW1lPXRoaXMuX25vcm1hbGl6ZVRoZW1lKGkudGhlbWUsVCk7dmFyIHA9aVsnbGFuZ3VhZ2VzRGVsaXZlcmVkV2l0aENvcmUnXT1MLl9jb3JlSTE4bkxvY2FsZXM7dmFyIHI9aVsneHgtc3VwcG9ydGVkTGFuZ3VhZ2VzJ107aWYoci5sZW5ndGg9PT0wfHwoci5sZW5ndGg9PT0xJiZyWzBdPT09JyonKSl7cj1bXX1lbHNlIGlmKHIubGVuZ3RoPT09MSYmclswXT09PSdkZWZhdWx0Jyl7cj1wfHxbXX1pWyd4eC1zdXBwb3J0ZWRMYW5ndWFnZXMnXT1yO2Zvcih2YXIgbiBpbiBnKXtpZihpW25dIT09Z1tuXS5kZWZhdWx0VmFsdWUpe3Euc2FwLmxvZy5pbmZvKCIgICIrbisiID0gIitpW25dKX19fSxnZXRWZXJzaW9uOmZ1bmN0aW9uKCl7aWYodGhpcy5fdmVyc2lvbil7cmV0dXJuIHRoaXMuX3ZlcnNpb259dGhpcy5fdmVyc2lvbj1uZXcgcS5zYXAuVmVyc2lvbihzYXAudWkudmVyc2lvbik7cmV0dXJuIHRoaXMuX3ZlcnNpb259LGdldENvbXBhdGliaWxpdHlWZXJzaW9uOmZ1bmN0aW9uKGYpe2lmKHR5cGVvZihmKT09PSJzdHJpbmciJiZ0aGlzLl9jb21wYXR2ZXJzaW9uW2ZdKXtyZXR1cm4gdGhpcy5fY29tcGF0dmVyc2lvbltmXX1yZXR1cm4gdGhpcy5fY29tcGF0dmVyc2lvbi5fZGVmYXVsdH0sZ2V0VGhlbWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50aGVtZX0sX3NldFRoZW1lOmZ1bmN0aW9uKHQpe3RoaXMudGhlbWU9dDtyZXR1cm4gdGhpc30sX25vcm1hbGl6ZVRoZW1lOmZ1bmN0aW9uKHQsVCl7aWYodCYmVD09bnVsbCYmdC5tYXRjaCgvXnNhcF9jb3JidSQvaSkpcmV0dXJuInNhcF9nb2xkcmVmbGVjdGlvbiI7cmV0dXJuIHR9LGdldExhbmd1YWdlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubGFuZ3VhZ2V9LHNldExhbmd1YWdlOmZ1bmN0aW9uKGwpe2QodHlwZW9mIGw9PT0ic3RyaW5nIiYmbCwic0xhbmd1YWdlIG11c3QgYmUgYSBCQ1A0NyBsYW5ndWFnZSB0YWcgb3IgSmF2YSBMb2NhbGUgaWQgb3IgbnVsbCIpO3ZhciBvPXRoaXMuZ2V0UlRMKCksbTtpZihsIT10aGlzLmxhbmd1YWdlKXttPXRoaXMuX2NvbGxlY3QoKTt0aGlzLmxhbmd1YWdlPW0ubGFuZ3VhZ2U9bDt0aGlzLmRlcml2ZWRSVEw9TC5faW1wbGllc1JUTChsKTtpZihvIT10aGlzLmdldFJUTCgpKXttLnJ0bD10aGlzLmdldFJUTCgpfXRoaXMuX2VuZENvbGxlY3QoKX1yZXR1cm4gdGhpc30sZ2V0TG9jYWxlOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBMKHRoaXMubGFuZ3VhZ2UpfSxnZXRGb3JtYXRMb2NhbGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5mb3JtYXRMb2NhbGV8fHRoaXMubGFuZ3VhZ2V9LHNldEZvcm1hdExvY2FsZTpmdW5jdGlvbihmKXtkKGY9PT1udWxsfHx0eXBlb2YgZj09PSJzdHJpbmciJiZmLCJzRm9ybWF0TG9jYWxlIG11c3QgYmUgYSBCQ1A0NyBsYW5ndWFnZSB0YWcgb3IgSmF2YSBMb2NhbGUgaWQgb3IgbnVsbCIpO3ZhciBtO2lmKGYhPXRoaXMuZm9ybWF0TG9jYWxlKXttPXRoaXMuX2NvbGxlY3QoKTt0aGlzLmZvcm1hdExvY2FsZT1tLmZvcm1hdExvY2FsZT1mO3RoaXMuX2VuZENvbGxlY3QoKX1yZXR1cm4gdGhpc30sZ2V0TGFuZ3VhZ2VzRGVsaXZlcmVkV2l0aENvcmU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc1sibGFuZ3VhZ2VzRGVsaXZlcmVkV2l0aENvcmUiXX0sZ2V0U3VwcG9ydGVkTGFuZ3VhZ2VzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXNbInh4LXN1cHBvcnRlZExhbmd1YWdlcyJdfSxnZXRBY2Nlc3NpYmlsaXR5OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYWNjZXNzaWJpbGl0eX0sZ2V0QW5pbWF0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYW5pbWF0aW9ufSxnZXRSVEw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ydGw9PT1udWxsP3RoaXMuZGVyaXZlZFJUTDp0aGlzLnJ0bH0sc2V0UlRMOmZ1bmN0aW9uKHIpe2Qocj09PW51bGx8fHR5cGVvZiByPT09ImJvb2xlYW4iLCJiUlRMIG11c3QgYmUgbnVsbCBvciBhIGJvb2xlYW4iKTt2YXIgbTtpZihyIT10aGlzLnJ0bCl7bT10aGlzLl9jb2xsZWN0KCk7dGhpcy5ydGw9bS5ydGw9dGhpcy5nZXRSVEwoKTt0aGlzLl9lbmRDb2xsZWN0KCl9cmV0dXJuIHRoaXN9LGdldERlYnVnOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGVidWd9LGdldEluc3BlY3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbnNwZWN0fSxnZXRPcmlnaW5JbmZvOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub3JpZ2luSW5mb30sZ2V0Tm9EdXBsaWNhdGVJZHM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ub0R1cGxpY2F0ZUlkc30sZ2V0VHJhY2U6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50cmFjZX0sZ2V0VUlEUHJlZml4OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudWlkUHJlZml4fSxnZXREZXNpZ25Nb2RlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXNbInh4LWRlc2lnbk1vZGUiXX0sZ2V0U3VwcHJlc3NEZWFjdGl2YXRpb25PZkNvbnRyb2xsZXJDb2RlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXNbInh4LXN1cHByZXNzRGVhY3RpdmF0aW9uT2ZDb250cm9sbGVyQ29kZSJdfSxnZXRXZWlucmVTZXJ2ZXI6ZnVuY3Rpb24oKXt2YXIgdz10aGlzLndlaW5yZVNlcnZlcjtpZighdyl7dz13aW5kb3cubG9jYXRpb24ucHJvdG9jb2wrIi8vIit3aW5kb3cubG9jYXRpb24uaG9zdG5hbWUrIjoiO3crPShwYXJzZUludCh3aW5kb3cubG9jYXRpb24ucG9ydCwxMCl8fDgwODApKzF9cmV0dXJuIHd9LGdldFdlaW5yZUlkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMud2VpbnJlSWR9LGdldEFwcGxpY2F0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYXBwbGljYXRpb259LGdldFJvb3RDb21wb25lbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yb290Q29tcG9uZW50fSxnZXRBcHBDYWNoZUJ1c3RlcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLmFwcENhY2hlQnVzdGVyfSxnZXRBcHBDYWNoZUJ1c3Rlck1vZGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc1sieHgtYXBwQ2FjaGVCdXN0ZXJNb2RlIl19LGdldERpc2FibGVDdXN0b21pemluZzpmdW5jdGlvbigpe3JldHVybiB0aGlzWyJ4eC1kaXNhYmxlQ3VzdG9taXppbmciXX0sZ2V0UHJlbG9hZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnByZWxvYWR9LGdldENvbXBvbmVudFByZWxvYWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc1sneHgtY29tcG9uZW50UHJlbG9hZCddfHx0aGlzLnByZWxvYWR9LGdldEZvcm1hdFNldHRpbmdzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub0Zvcm1hdFNldHRpbmdzfSxfY29sbGVjdDpmdW5jdGlvbigpe3ZhciBtPXRoaXMubUNoYW5nZXN8fCh0aGlzLm1DaGFuZ2VzPXtfX2NvdW50OjB9KTttLl9fY291bnQrKztyZXR1cm4gbX0sX2VuZENvbGxlY3Q6ZnVuY3Rpb24oKXt2YXIgbT10aGlzLm1DaGFuZ2VzO2lmKG0mJigtLW0uX19jb3VudCk9PT0wKXtkZWxldGUgbS5fX2NvdW50O3RoaXMuX29Db3JlJiZ0aGlzLl9vQ29yZS5maXJlTG9jYWxpemF0aW9uQ2hhbmdlZChtKTtkZWxldGUgdGhpcy5tQ2hhbmdlc319LGdldFN0YXRpc3RpY3M6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdGF0aXN0aWNzfHx3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oInNhcC11aS1zdGF0aXN0aWNzIik9PSJYIn0sZ2V0Tm9OYXRpdmVTY3JvbGw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc1sieHgtbm9OYXRpdmVTY3JvbGwiXX19KTt2YXIgTT17IlpIIjoiemgtSGFucyIsIlpGIjoiemgtSGFudCIsIjFRIjoiZW4tVVMteC1zYXB0cmMiLCIyUSI6ImVuLVVTLXgtc2FwcHNkIn07dmFyIGE9eyIiOntwYXR0ZXJuOm51bGx9LCIxIjp7cGF0dGVybjoiZGQuTU0ueXl5eSJ9LCIyIjp7cGF0dGVybjoiTU0vZGQveXl5eSJ9LCIzIjp7cGF0dGVybjoiTU0tZGQteXl5eSJ9LCI0Ijp7cGF0dGVybjoieXl5eS5NTS5kZCJ9LCI1Ijp7cGF0dGVybjoieXl5eS9NTS9kZCJ9LCI2Ijp7cGF0dGVybjoieXl5eS1NTS1kZCJ9LCI3Ijp7cGF0dGVybjoiR3l5Lk1NLmRkIixpZ25vcmU6dHJ1ZX0sIjgiOntwYXR0ZXJuOiJHeXkvTU0vZGQiLGlnbm9yZTp0cnVlfSwiOSI6e3BhdHRlcm46Ikd5eS1NTS1kZCIsaWdub3JlOnRydWV9LCJBIjp7cGF0dGVybjoieXl5eS9NTS9kZCIsaWdub3JlOnRydWV9LCJCIjp7cGF0dGVybjoieXl5eS9NTS9kZCIsaWdub3JlOnRydWV9LCJDIjp7cGF0dGVybjoieXl5eS9NTS9kZCIsaWdub3JlOnRydWV9fTt2YXIgYj17IiI6eyJzaG9ydCI6bnVsbCxtZWRpdW06bnVsbCxkYXlQZXJpb2RzOm51bGx9LCIwIjp7InNob3J0IjoiSEg6bW0iLG1lZGl1bToiSEg6bW06c3MiLGRheVBlcmlvZHM6bnVsbH0sIjEiOnsic2hvcnQiOiJoaDptbSBhIixtZWRpdW06ImhoOm1tOnNzIGEiLGRheVBlcmlvZHM6WyJBTSIsIlBNIl19LCIyIjp7InNob3J0IjoiaGg6bW0gYSIsbWVkaXVtOiJoaDptbTpzcyBhIixkYXlQZXJpb2RzOlsiYW0iLCJwbSJdfSwiMyI6eyJzaG9ydCI6IktLOm1tIGEiLG1lZGl1bToiS0s6bW06c3MgYSIsZGF5UGVyaW9kczpbIkFNIiwiUE0iXX0sIjQiOnsic2hvcnQiOiJLSzptbSBhIixtZWRpdW06IktLOm1tOnNzIGEiLGRheVBlcmlvZHM6WyJhbSIsInBtIl19fTt2YXIgYz17IiI6e2dyb3VwaW5nU2VwYXJhdG9yOm51bGwsZGVjaW1hbFNlcGFyYXRvcjpudWxsfSwiICI6e2dyb3VwaW5nU2VwYXJhdG9yOiIuIixkZWNpbWFsU2VwYXJhdG9yOiIsIn0sIlgiOntncm91cGluZ1NlcGFyYXRvcjoiLCIsZGVjaW1hbFNlcGFyYXRvcjoiLiJ9LCJZIjp7Z3JvdXBpbmdTZXBhcmF0b3I6IiAiLGRlY2ltYWxTZXBhcmF0b3I6IiwifX07ZnVuY3Rpb24gZChlLG0pe2lmKCFlKXt0aHJvdyBuZXcgRXJyb3IobSl9fUIuZXh0ZW5kKCJzYXAudWkuY29yZS5Db25maWd1cmF0aW9uLkZvcm1hdFNldHRpbmdzIix7Y29uc3RydWN0b3I6ZnVuY3Rpb24obyl7dGhpcy5vQ29uZmlndXJhdGlvbj1vO3RoaXMubVNldHRpbmdzPXt9O3RoaXMuc0xlZ2FjeURhdGVGb3JtYXQ9dW5kZWZpbmVkO3RoaXMuc0xlZ2FjeVRpbWVGb3JtYXQ9dW5kZWZpbmVkO3RoaXMuc0xlZ2FjeU51bWJlckZvcm1hdFN5bWJvbFNldD11bmRlZmluZWR9LGdldEZvcm1hdExvY2FsZTpmdW5jdGlvbigpe2Z1bmN0aW9uIGYodCl7dmFyIGw9dC5vQ29uZmlndXJhdGlvbi5sYW5ndWFnZTtpZighcS5pc0VtcHR5T2JqZWN0KHQubVNldHRpbmdzKSl7aWYobC5pbmRleE9mKCIteC0iKTwwKXtsPWwrIi14LXNhcHVmbXQifWVsc2UgaWYobC5pbmRleE9mKCItc2FwdWZtdCIpPD1sLmluZGV4T2YoIi14LSIpKXtsPWwrIi1zYXB1Zm10In19cmV0dXJuIGx9cmV0dXJuIG5ldyBMKHRoaXMub0NvbmZpZ3VyYXRpb24uZm9ybWF0TG9jYWxlfHxmKHRoaXMpKX0sX3NldDpmdW5jdGlvbihrLHYpe3ZhciBvPXRoaXMubVNldHRpbmdzW2tdO2lmKHYhPW51bGwpe3RoaXMubVNldHRpbmdzW2tdPXZ9ZWxzZXtkZWxldGUgdGhpcy5tU2V0dGluZ3Nba119aWYoKG89PW51bGwhPXY9PW51bGwpfHwhcS5zYXAuZXF1YWwobyx2KSl7dmFyIG09dGhpcy5vQ29uZmlndXJhdGlvbi5fY29sbGVjdCgpO21ba109djt0aGlzLm9Db25maWd1cmF0aW9uLl9lbmRDb2xsZWN0KCl9fSxnZXREYXRlUGF0dGVybjpmdW5jdGlvbihzKXtyZXR1cm4gdGhpcy5tU2V0dGluZ3NbImRhdGVGb3JtYXQtIitzXX0sc2V0RGF0ZVBhdHRlcm46ZnVuY3Rpb24ocyxwKXtkKHM9PSJzaG9ydCJ8fHM9PSJtZWRpdW0ifHxzPT0ibG9uZyJ8fHM9PSJmdWxsIiwic1N0eWxlIG11c3QgYmUgc2hvcnQsIG1lZGl1bSwgbG9uZyBvciBmdWxsIik7dGhpcy5fc2V0KCJkYXRlRm9ybWF0LSIrcyxwKTtyZXR1cm4gdGhpc30sZ2V0VGltZVBhdHRlcm46ZnVuY3Rpb24ocyl7cmV0dXJuIHRoaXMubVNldHRpbmdzWyJ0aW1lRm9ybWF0LSIrc119LHNldFRpbWVQYXR0ZXJuOmZ1bmN0aW9uKHMscCl7ZChzPT0ic2hvcnQifHxzPT0ibWVkaXVtInx8cz09ImxvbmcifHxzPT0iZnVsbCIsInNTdHlsZSBtdXN0IGJlIHNob3J0LCBtZWRpdW0sIGxvbmcgb3IgZnVsbCIpO3RoaXMuX3NldCgidGltZUZvcm1hdC0iK3MscCk7cmV0dXJuIHRoaXN9LGdldE51bWJlclN5bWJvbDpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5tU2V0dGluZ3NbInN5bWJvbHMtbGF0bi0iK3RdfSxzZXROdW1iZXJTeW1ib2w6ZnVuY3Rpb24odCxzKXtkKHQ9PSJkZWNpbWFsInx8dD09Imdyb3VwInx8dD09InBsdXNTaWduInx8dD09Im1pbnVzU2lnbiIsInNUeXBlIG11c3QgYmUgZGVjaW1hbCwgZ3JvdXAsIHBsdXNTaWduIG9yIG1pbnVzU2lnbiIpO3RoaXMuX3NldCgic3ltYm9scy1sYXRuLSIrdCxzKTtyZXR1cm4gdGhpc30sX3NldERheVBlcmlvZHM6ZnVuY3Rpb24odyx0KXt0aGlzLl9zZXQoImRheVBlcmlvZHMtZm9ybWF0LSIrdyx0KTtyZXR1cm4gdGhpc30sZ2V0TGVnYWN5RGF0ZUZvcm1hdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNMZWdhY3lEYXRlRm9ybWF0fHx1bmRlZmluZWR9LHNldExlZ2FjeURhdGVGb3JtYXQ6ZnVuY3Rpb24oZil7Zj1mP1N0cmluZyhmKS50b1VwcGVyQ2FzZSgpOiIiO2QoIWZ8fGEuaGFzT3duUHJvcGVydHkoZiksInNGb3JtYXRJZCBtdXN0IGJlIG9uZSBvZiBbJzEnLCcyJywnMycsJzQnLCc1JywnNicsJzcnLCc4JywnOScsJ0EnLCdCJywnQyddIG9yIGVtcHR5Iik7aWYoYVtmXS5pZ25vcmUpe3Euc2FwLmxvZy53YXJuaW5nKCJUaGUgQUJBUCBkYXRlIGZvcm1hdCAnIitmKyInICgiK2FbZl0ucGF0dGVybisiKSBpcyBub3Qgc3VwcG9ydGVkIHlldC4gRmFsbGluZyBiYWNrIHRvIGxvY2FsZSBzcGVjaWZpYyBkYXRlIGZvcm1hdHMuIik7Zj0iIn12YXIgbT10aGlzLm9Db25maWd1cmF0aW9uLl9jb2xsZWN0KCk7dGhpcy5zTGVnYWN5RGF0ZUZvcm1hdD1tLmxlZ2FjeURhdGVGb3JtYXQ9Zjt0aGlzLnNldERhdGVQYXR0ZXJuKCJzaG9ydCIsYVtmXS5wYXR0ZXJuKTt0aGlzLnNldERhdGVQYXR0ZXJuKCJtZWRpdW0iLGFbZl0ucGF0dGVybik7dGhpcy5vQ29uZmlndXJhdGlvbi5fZW5kQ29sbGVjdCgpO3JldHVybiB0aGlzfSxnZXRMZWdhY3lUaW1lRm9ybWF0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc0xlZ2FjeVRpbWVGb3JtYXR8fHVuZGVmaW5lZH0sc2V0TGVnYWN5VGltZUZvcm1hdDpmdW5jdGlvbihmKXtkKCFmfHxiLmhhc093blByb3BlcnR5KGYpLCJzRm9ybWF0SWQgbXVzdCBiZSBvbmUgb2YgWycwJywnMScsJzInLCczJywnNCddIG9yIGVtcHR5Iik7dmFyIG09dGhpcy5vQ29uZmlndXJhdGlvbi5fY29sbGVjdCgpO3RoaXMuc0xlZ2FjeVRpbWVGb3JtYXQ9bS5sZWdhY3lUaW1lRm9ybWF0PWY9Znx8IiI7dGhpcy5zZXRUaW1lUGF0dGVybigic2hvcnQiLGJbZl1bInNob3J0Il0pO3RoaXMuc2V0VGltZVBhdHRlcm4oIm1lZGl1bSIsYltmXVsibWVkaXVtIl0pO3RoaXMuX3NldERheVBlcmlvZHMoImFiYnJldmlhdGVkIixiW2ZdLmRheVBlcmlvZHMpO3RoaXMub0NvbmZpZ3VyYXRpb24uX2VuZENvbGxlY3QoKTtyZXR1cm4gdGhpc30sZ2V0TGVnYWN5TnVtYmVyRm9ybWF0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc0xlZ2FjeU51bWJlckZvcm1hdHx8dW5kZWZpbmVkfSxzZXRMZWdhY3lOdW1iZXJGb3JtYXQ6ZnVuY3Rpb24oZil7Zj1mP2YudG9VcHBlckNhc2UoKToiIjtkKCFmfHxjLmhhc093blByb3BlcnR5KGYpLCJzRm9ybWF0SWQgbXVzdCBiZSBvbmUgb2YgWycgJywnWCcsJ1knXSBvciBlbXB0eSIpO3ZhciBtPXRoaXMub0NvbmZpZ3VyYXRpb24uX2NvbGxlY3QoKTt0aGlzLnNMZWdhY3lOdW1iZXJGb3JtYXQ9bS5sZWdhY3lOdW1iZXJGb3JtYXQ9Zjt0aGlzLnNldE51bWJlclN5bWJvbCgiZ3JvdXAiLGNbZl0uZ3JvdXBpbmdTZXBhcmF0b3IpO3RoaXMuc2V0TnVtYmVyU3ltYm9sKCJkZWNpbWFsIixjW2ZdLmRlY2ltYWxTZXBhcmF0b3IpO3RoaXMub0NvbmZpZ3VyYXRpb24uX2VuZENvbGxlY3QoKX0sZ2V0Q3VzdG9tTG9jYWxlRGF0YTpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1TZXR0aW5nc319KTtyZXR1cm4gQ30sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLkVsZW1lbnRNZXRhZGF0YScpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLkVsZW1lbnRNZXRhZGF0YScpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL0VsZW1lbnRNZXRhZGF0YSIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ3NhcC91aS9iYXNlL01hbmFnZWRPYmplY3RNZXRhZGF0YSddLGZ1bmN0aW9uKHEsTSl7InVzZSBzdHJpY3QiO3ZhciBFPWZ1bmN0aW9uKGMsQyl7TS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9O0UucHJvdG90eXBlPXEuc2FwLm5ld09iamVjdChNLnByb3RvdHlwZSk7RS51aWQ9TS51aWQ7RS5wcm90b3R5cGUuZ2V0RWxlbWVudE5hbWU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc0NsYXNzTmFtZX07RS5wcm90b3R5cGUuZ2V0UmVuZGVyZXJOYW1lPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NSZW5kZXJlck5hbWV9O0UucHJvdG90eXBlLmdldFJlbmRlcmVyPWZ1bmN0aW9uKCl7dmFyIHI9dGhpcy5nZXRSZW5kZXJlck5hbWUoKTtpZighcil7cmV0dXJufXZhciBSPXEuc2FwLmdldE9iamVjdChyKTtpZihSKXtyZXR1cm4gUn1xLnNhcC5yZXF1aXJlKHIpO3JldHVybiBxLnNhcC5nZXRPYmplY3Qocil9O0UucHJvdG90eXBlLmFwcGx5U2V0dGluZ3M9ZnVuY3Rpb24oYyl7dmFyIHM9Yy5tZXRhZGF0YTt0aGlzLl9zVmlzaWJpbGl0eT1zWyJ2aXNpYmlsaXR5Il18fCJwdWJsaWMiO3ZhciByPWMuaGFzT3duUHJvcGVydHkoInJlbmRlcmVyIik/KGMucmVuZGVyZXJ8fCIiKTp1bmRlZmluZWQ7ZGVsZXRlIGMucmVuZGVyZXI7TS5wcm90b3R5cGUuYXBwbHlTZXR0aW5ncy5jYWxsKHRoaXMsYyk7dGhpcy5fc1JlbmRlcmVyTmFtZT10aGlzLmdldE5hbWUoKSsiUmVuZGVyZXIiO2lmKHR5cGVvZiByIT09InVuZGVmaW5lZCIpe2lmKHR5cGVvZiByPT09InN0cmluZyIpe3RoaXMuX3NSZW5kZXJlck5hbWU9cnx8dW5kZWZpbmVkO3JldHVybn1pZih0eXBlb2Ygcj09PSJmdW5jdGlvbiIpe3I9e3JlbmRlcjpyfX12YXIgcD10aGlzLmdldFBhcmVudCgpO3ZhciBiO2lmKHAmJnAgaW5zdGFuY2VvZiBFKXtiPXAuZ2V0UmVuZGVyZXIoKX1pZighYil7cS5zYXAucmVxdWlyZSgic2FwLnVpLmNvcmUuUmVuZGVyZXIiKTtiPXNhcC51aS5jb3JlLlJlbmRlcmVyfXZhciBSPXEuc2FwLm5ld09iamVjdChiKTtxLmV4dGVuZChSLHIpO3Euc2FwLnNldE9iamVjdCh0aGlzLmdldFJlbmRlcmVyTmFtZSgpLFIpfX07RS5wcm90b3R5cGUuYWZ0ZXJBcHBseVNldHRpbmdzPWZ1bmN0aW9uKCl7TS5wcm90b3R5cGUuYWZ0ZXJBcHBseVNldHRpbmdzLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLnJlZ2lzdGVyJiZ0aGlzLnJlZ2lzdGVyKHRoaXMpfTtFLnByb3RvdHlwZS5pc0hpZGRlbj1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9zVmlzaWJpbGl0eT09PSJoaWRkZW4ifTtyZXR1cm4gRX0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLkV2ZW50QnVzJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUuRXZlbnRCdXMnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9FdmVudEJ1cyIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ3NhcC91aS9iYXNlL0V2ZW50UHJvdmlkZXInXSxmdW5jdGlvbihxLEUpeyJ1c2Ugc3RyaWN0Ijt2YXIgYT1zYXAudWkuYmFzZS5PYmplY3QuZXh0ZW5kKCJzYXAudWkuY29yZS5FdmVudEJ1cyIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKCl7c2FwLnVpLmJhc2UuT2JqZWN0LmFwcGx5KHRoaXMpO3RoaXMuX21DaGFubmVscz17fTt0aGlzLl9kZWZhdWx0Q2hhbm5lbD1uZXcgRSgpfX0pO2EucHJvdG90eXBlLnN1YnNjcmliZT1mdW5jdGlvbihjLGUsZixsKXtpZih0eXBlb2YoZSk9PT0iZnVuY3Rpb24iKXtsPWY7Zj1lO2U9YztjPW51bGx9dmFyIEM9Yih0aGlzLGMpO0MuYXR0YWNoRXZlbnQoZSxmLGwpO3JldHVybiB0aGlzfTthLnByb3RvdHlwZS51bnN1YnNjcmliZT1mdW5jdGlvbihjLGUsZixsKXtpZih0eXBlb2YoZSk9PT0iZnVuY3Rpb24iKXtsPWY7Zj1lO2U9YztjPW51bGx9dmFyIEM9Zyh0aGlzLGMpO2lmKCFDKXtyZXR1cm4gdGhpc31DLmRldGFjaEV2ZW50KGUsZixsKTtpZihDIT10aGlzLl9kZWZhdWx0Q2hhbm5lbCl7dmFyIG09RS5nZXRFdmVudExpc3QoQyk7dmFyIGk9dHJ1ZTtmb3IodmFyIEkgaW4gbSl7aWYoQy5oYXNMaXN0ZW5lcnMoSSkpe2k9ZmFsc2U7YnJlYWt9fWlmKGkpe2RlbGV0ZSB0aGlzLl9tQ2hhbm5lbHNbY119fXJldHVybiB0aGlzfTthLnByb3RvdHlwZS5wdWJsaXNoPWZ1bmN0aW9uKGMsZSxkKXtpZihhcmd1bWVudHMubGVuZ3RoPT0xKXtkPW51bGw7ZT1jO2M9bnVsbH1lbHNlIGlmKGFyZ3VtZW50cy5sZW5ndGg9PTIpe2lmKHR5cGVvZihlKSE9InN0cmluZyIpe2Q9ZTtlPWM7Yz1udWxsfX1kPWQ/ZDp7fTt2YXIgQz1nKHRoaXMsYyk7aWYoIUMpe3JldHVybn12YXIgZj1FLmdldEV2ZW50TGlzdChDKVtlXTtpZihmJiZxLmlzQXJyYXkoZikpe2Y9Zi5zbGljZSgpO3ZhciBJO2Zvcih2YXIgaT0wLGw9Zi5sZW5ndGg7aTxsO2krKyl7ST1mW2ldO0kuZkZ1bmN0aW9uLmNhbGwoSS5vTGlzdGVuZXJ8fHRoaXMsYyxlLGQpfX19O2EucHJvdG90eXBlLmdldEludGVyZmFjZT1mdW5jdGlvbigpe3JldHVybiB0aGlzfTthLnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKCl7dGhpcy5fZGVmYXVsdENoYW5uZWwuZGVzdHJveSgpO2Zvcih2YXIgYyBpbiB0aGlzLl9tQ2hhbm5lbHMpe3RoaXMuX21DaGFubmVsc1tjXS5kZXN0cm95KCl9dGhpcy5fbUNoYW5uZWxzPXt9O3NhcC51aS5iYXNlLk9iamVjdC5wcm90b3R5cGUuZGVzdHJveS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9O2Z1bmN0aW9uIGcoZSxjKXtpZighYyl7cmV0dXJuIGUuX2RlZmF1bHRDaGFubmVsfXJldHVybiBlLl9tQ2hhbm5lbHNbY119O2Z1bmN0aW9uIGIoZSxjKXt2YXIgQz1nKGUsYyk7aWYoIUMmJmMpe2UuX21DaGFubmVsc1tjXT1uZXcgRSgpO0M9ZS5fbUNoYW5uZWxzW2NdfXJldHVybiBDfTtyZXR1cm4gYX0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLkZvY3VzSGFuZGxlcicpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLkZvY3VzSGFuZGxlcicpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL0ZvY3VzSGFuZGxlciIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ3NhcC91aS9EZXZpY2UnLCdzYXAvdWkvR2xvYmFsJywnc2FwL3VpL2Jhc2UvT2JqZWN0JywnanF1ZXJ5LnNhcC5zY3JpcHQnXSxmdW5jdGlvbihxLEQsRyxCKXsidXNlIHN0cmljdCI7dmFyIEY9Qi5leHRlbmQoInNhcC51aS5jb3JlLkZvY3VzSGFuZGxlciIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKHIsYyl7Qi5hcHBseSh0aGlzKTt0aGlzLm9Db3JlPWM7dGhpcy5vQ3VycmVudD1udWxsO3RoaXMub0xhc3Q9bnVsbDt0aGlzLmFFdmVudFF1ZXVlPVtdO3RoaXMuZkV2ZW50SGFuZGxlcj1xLnByb3h5KHRoaXMub25FdmVudCx0aGlzKTt0aGlzLmZEZXN0cm95SGFuZGxlcj1xLnByb3h5KHRoaXMuZGVzdHJveSx0aGlzKTtpZihyLmFkZEV2ZW50TGlzdGVuZXImJiEhIUQuYnJvd3Nlci5pbnRlcm5ldF9leHBsb3Jlcil7ci5hZGRFdmVudExpc3RlbmVyKCJmb2N1cyIsdGhpcy5mRXZlbnRIYW5kbGVyLHRydWUpO3IuYWRkRXZlbnRMaXN0ZW5lcigiYmx1ciIsdGhpcy5mRXZlbnRIYW5kbGVyLHRydWUpfWVsc2V7cShyKS5iaW5kKCJhY3RpdmF0ZSIsdGhpcy5mRXZlbnRIYW5kbGVyKTtxKHIpLmJpbmQoImRlYWN0aXZhdGUiLHRoaXMuZkV2ZW50SGFuZGxlcil9cS5zYXAubG9nLmRlYnVnKCJGb2N1c0hhbmRsZXIgc2V0dXAgb24gUm9vdCAiK3IudHlwZSsoci5pZD8iOiAiK3IuaWQ6IiIpLG51bGwsInNhcC51aS5jb3JlLkZvY3VzSGFuZGxlciIpO3Eod2luZG93KS5iaW5kKCJ1bmxvYWQiLHsib1Jvb3RSZWYiOnJ9LHRoaXMuZkRlc3Ryb3lIYW5kbGVyKX19KTtGLnByb3RvdHlwZS5nZXRDdXJyZW50Rm9jdXNlZENvbnRyb2xJZD1mdW5jdGlvbigpe3ZhciBjPW51bGw7dHJ5e3ZhciBhPXEoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCk7aWYoYS5pcygiOmZvY3VzIil8fChELmJyb3dzZXIuaW50ZXJuZXRfZXhwbG9yZXImJkQuYnJvd3Nlci52ZXJzaW9uPT04JiZkb2N1bWVudC5oYXNGb2N1cygpKSl7Yz1hLmNvbnRyb2woKX19Y2F0Y2goZSl7fXJldHVybiBjJiZjLmxlbmd0aD4wP2NbMF0uZ2V0SWQoKTpudWxsfTtGLnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKGUpe3ZhciByPWUuZGF0YS5vUm9vdFJlZjtpZihyKXtpZihyLnJlbW92ZUV2ZW50TGlzdGVuZXImJiEhIUQuYnJvd3Nlci5pbnRlcm5ldF9leHBsb3Jlcil7ci5yZW1vdmVFdmVudExpc3RlbmVyKCJmb2N1cyIsdGhpcy5mRXZlbnRIYW5kbGVyLHRydWUpO3IucmVtb3ZlRXZlbnRMaXN0ZW5lcigiYmx1ciIsdGhpcy5mRXZlbnRIYW5kbGVyLHRydWUpfWVsc2V7cShyKS51bmJpbmQoImFjdGl2YXRlIix0aGlzLmZFdmVudEhhbmRsZXIpO3EocikudW5iaW5kKCJkZWFjdGl2YXRlIix0aGlzLmZFdmVudEhhbmRsZXIpfX1xKHdpbmRvdykudW5iaW5kKCJ1bmxvYWQiLHRoaXMuZkRlc3Ryb3lIYW5kbGVyKTt0aGlzLm9Db3JlPW51bGx9O0YucHJvdG90eXBlLm9uRXZlbnQ9ZnVuY3Rpb24oYil7dmFyIGU9cS5ldmVudC5maXgoYik7cS5zYXAubG9nLmRlYnVnKCJFdmVudCAiK2UudHlwZSsiIHJlYWNoZWQgRm9jdXMgSGFuZGxlciAodGFyZ2V0OiAiK2UudGFyZ2V0KyhlLnRhcmdldD9lLnRhcmdldC5pZDoiIikrIikiLG51bGwsInNhcC51aS5jb3JlLkZvY3VzSGFuZGxlciIpO3ZhciBhPShlLnR5cGU9PSJmb2N1cyJ8fGUudHlwZT09ImZvY3VzaW4ifHxlLnR5cGU9PSJhY3RpdmF0ZSIpPyJmb2N1cyI6ImJsdXIiO3RoaXMuYUV2ZW50UXVldWUucHVzaCh7dHlwZTphLGNvbnRyb2xJZDpnKGUudGFyZ2V0KX0pO2lmKHRoaXMuYUV2ZW50UXVldWUubGVuZ3RoPT0xKXt0aGlzLnByb2Nlc3NFdmVudCgpfX07Ri5wcm90b3R5cGUucHJvY2Vzc0V2ZW50PWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5hRXZlbnRRdWV1ZVswXTtpZighZSl7cmV0dXJufXRyeXtpZihlLnR5cGU9PSJmb2N1cyIpe3RoaXMub25mb2N1c0V2ZW50KGUuY29udHJvbElkKX1lbHNlIGlmKGUudHlwZT09ImJsdXIiKXt0aGlzLm9uYmx1ckV2ZW50KGUuY29udHJvbElkKX19ZmluYWxseXt0aGlzLmFFdmVudFF1ZXVlLnNoaWZ0KCk7aWYodGhpcy5hRXZlbnRRdWV1ZS5sZW5ndGg+MCl7dGhpcy5wcm9jZXNzRXZlbnQoKX19fTtGLnByb3RvdHlwZS5vbmZvY3VzRXZlbnQ9ZnVuY3Rpb24oYyl7dGhpcy5vQ3VycmVudD1jO2lmKCF0aGlzLm9MYXN0KXtyZXR1cm59dCh0aGlzLm9MYXN0LGMsdGhpcy5vQ29yZSk7dGhpcy5vTGFzdD1udWxsfTtGLnByb3RvdHlwZS5vbmJsdXJFdmVudD1mdW5jdGlvbihjKXtpZighdGhpcy5vQ3VycmVudCl7cmV0dXJufXRoaXMub0xhc3Q9Yzt0aGlzLm9DdXJyZW50PW51bGw7cS5zYXAuZGVsYXllZENhbGwoMCx0aGlzLCJjaGVja0Zvckxvc3RGb2N1cyIpfTtGLnByb3RvdHlwZS5jaGVja0Zvckxvc3RGb2N1cz1mdW5jdGlvbigpe2lmKHRoaXMub0N1cnJlbnQ9PW51bGwmJnRoaXMub0xhc3QhPW51bGwpe3QodGhpcy5vTGFzdCxudWxsLHRoaXMub0NvcmUpfXRoaXMub0xhc3Q9bnVsbH07dmFyIGc9ZnVuY3Rpb24oZCl7dmFyIGk9cShkKS5jbG9zZXN0KCJbZGF0YS1zYXAtdWldIikuYXR0cigiaWQiKTtpZihpKXtyZXR1cm4gaX1yZXR1cm4gbnVsbH07dmFyIHQ9ZnVuY3Rpb24oYyxyLEMpe3ZhciBvPWM/c2FwLnVpLmdldENvcmUoKS5ieUlkKGMpOm51bGw7aWYobyl7dmFyIFI9cj9zYXAudWkuZ2V0Q29yZSgpLmJ5SWQocik6bnVsbDt2YXIgZT1xLkV2ZW50KCJzYXBmb2N1c2xlYXZlIik7ZS50YXJnZXQ9by5nZXREb21SZWYoKTtlLnJlbGF0ZWRDb250cm9sSWQ9Uj9SLmdldElkKCk6bnVsbDtlLnJlbGF0ZWRDb250cm9sRm9jdXNJbmZvPVI/Ui5nZXRGb2N1c0luZm8oKTpudWxsO3ZhciBhPW8uZ2V0VUlBcmVhKCk7dmFyIHU9bnVsbDtpZihhKXt1PUMuZ2V0VUlBcmVhKGEuZ2V0SWQoKSl9ZWxzZXt2YXIgcD1zYXAudWkuZ2V0Q29yZSgpLmdldFN0YXRpY0FyZWFSZWYoKTtpZihxLnNhcC5jb250YWluc09yRXF1YWxzKHAsZS50YXJnZXQpKXt1PUMuZ2V0VUlBcmVhKHAuaWQpfX1pZih1KXt1Ll9oYW5kbGVFdmVudChlKX19fTtyZXR1cm4gRn0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLkludGVydmFsVHJpZ2dlcicpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLkludGVydmFsVHJpZ2dlcicpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL0ludGVydmFsVHJpZ2dlciIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJy4vRXZlbnRCdXMnXSxmdW5jdGlvbihxLEUpeyJ1c2Ugc3RyaWN0Ijt2YXIgXz0ic2FwVWlJbnRlcnZhbFRyaWdnZXItZXZlbnQiO3ZhciBJPXNhcC51aS5iYXNlLk9iamVjdC5leHRlbmQoInNhcC51aS5jb3JlLkludGVydmFsVHJpZ2dlciIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKGkpe3NhcC51aS5iYXNlLk9iamVjdC5hcHBseSh0aGlzKTt0aGlzLl9vRXZlbnRCdXM9bmV3IEUoKTt0aGlzLl9kZWxheWVkQ2FsbElkPW51bGw7dGhpcy5fdHJpZ2dlclByb3h5PXEucHJveHkodCx0aGlzKTt0aGlzLl9pSW50ZXJ2YWw9MDtpZihpKXt0aGlzLnNldEludGVydmFsKGkpfX19KTt2YXIgdD1mdW5jdGlvbigpe3Euc2FwLmNsZWFyRGVsYXllZENhbGwodGhpcy5fZGVsYXllZENhbGxJZCk7dmFyIGg9dGhpcy5fb0V2ZW50QnVzLl9kZWZhdWx0Q2hhbm5lbC5oYXNMaXN0ZW5lcnMoXyk7aWYodGhpcy5faUludGVydmFsPjAmJmgpe3RoaXMuX29FdmVudEJ1cy5wdWJsaXNoKF8pO3RoaXMuX2RlbGF5ZWRDYWxsSWQ9cS5zYXAuZGVsYXllZENhbGwodGhpcy5faUludGVydmFsLHRoaXMsdGhpcy5fdHJpZ2dlclByb3h5KX19O0kucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXtzYXAudWkuYmFzZS5PYmplY3QucHJvdG90eXBlLmRlc3Ryb3kuYXBwbHkodGhpcyxhcmd1bWVudHMpO2RlbGV0ZSB0aGlzLl90cmlnZ2VyUHJveHk7dGhpcy5fb0V2ZW50QnVzLmRlc3Ryb3koKTtkZWxldGUgdGhpcy5fb0V2ZW50QnVzfTtJLnByb3RvdHlwZS5zZXRJbnRlcnZhbD1mdW5jdGlvbihpKXtpZih0aGlzLl9pSW50ZXJ2YWwhPT1pKXt0aGlzLl9pSW50ZXJ2YWw9aTt0aGlzLl90cmlnZ2VyUHJveHkoKX19O0kucHJvdG90eXBlLmFkZExpc3RlbmVyPWZ1bmN0aW9uKGYsbCl7dGhpcy5fb0V2ZW50QnVzLnN1YnNjcmliZShfLGYsbCk7dGhpcy5fdHJpZ2dlclByb3h5KCl9O0kucHJvdG90eXBlLnJlbW92ZUxpc3RlbmVyPWZ1bmN0aW9uKGYsbCl7dGhpcy5fb0V2ZW50QnVzLnVuc3Vic2NyaWJlKF8sZixsKX07SS5wcm90b3R5cGUuZ2V0SW50ZXJmYWNlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9O3JldHVybiBJfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUuTG9jYWxlRGF0YScpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLkxvY2FsZURhdGEnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9Mb2NhbGVEYXRhIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL2Jhc2UvT2JqZWN0JywnLi9Db25maWd1cmF0aW9uJywnLi9Mb2NhbGUnXSxmdW5jdGlvbihxLEIsQyxMKXsidXNlIHN0cmljdCI7dmFyIGE9Qi5leHRlbmQoInNhcC51aS5jb3JlLkxvY2FsZURhdGEiLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbihvKXtCLmFwcGx5KHRoaXMpO3RoaXMubURhdGE9ZyhvKX0sX2dldDpmdW5jdGlvbihrKXtyZXR1cm4gdGhpcy5tRGF0YVtrXX0sZ2V0T3JpZW50YXRpb246ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZ2V0KCJvcmllbnRhdGlvbiIpfSxnZXRMYW5ndWFnZXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZ2V0KCJsYW5ndWFnZXMiKX0sZ2V0U2NyaXB0czpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9nZXQoInNjcmlwdHMiKX0sZ2V0VGVycml0b3JpZXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZ2V0KCJ0ZXJyaXRvcmllcyIpfSxnZXRNb250aHM6ZnVuY3Rpb24odyl7cmV0dXJuIHRoaXMuX2dldCgibW9udGhzLWZvcm1hdC0iK3cpfSxnZXRNb250aHNTdGFuZEFsb25lOmZ1bmN0aW9uKHcpe3JldHVybiB0aGlzLl9nZXQoIm1vbnRocy1zdGFuZEFsb25lLSIrdyl9LGdldERheXM6ZnVuY3Rpb24odyl7cmV0dXJuIHRoaXMuX2dldCgiZGF5cy1mb3JtYXQtIit3KX0sZ2V0RGF5c1N0YW5kQWxvbmU6ZnVuY3Rpb24odyl7cmV0dXJuIHRoaXMuX2dldCgiZGF5cy1zdGFuZEFsb25lLSIrdyl9LGdldFF1YXJ0ZXJzOmZ1bmN0aW9uKHcpe3JldHVybiB0aGlzLl9nZXQoInF1YXJ0ZXJzLWZvcm1hdC0iK3cpfSxnZXREYXlQZXJpb2RzOmZ1bmN0aW9uKHcpe3JldHVybiB0aGlzLl9nZXQoImRheVBlcmlvZHMtZm9ybWF0LSIrdyl9LGdldERhdGVQYXR0ZXJuOmZ1bmN0aW9uKHMpe3JldHVybiB0aGlzLl9nZXQoImRhdGVGb3JtYXQtIitzKX0sZ2V0VGltZVBhdHRlcm46ZnVuY3Rpb24ocyl7cmV0dXJuIHRoaXMuX2dldCgidGltZUZvcm1hdC0iK3MpfSxnZXREYXRlVGltZVBhdHRlcm46ZnVuY3Rpb24ocyl7cmV0dXJuIHRoaXMuX2dldCgiZGF0ZVRpbWVGb3JtYXQtIitzKX0sZ2V0TnVtYmVyU3ltYm9sOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9nZXQoInN5bWJvbHMtbGF0bi0iK3QpfSxnZXREZWNpbWFsUGF0dGVybjpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9nZXQoImRlY2ltYWxGb3JtYXQiKS5zdGFuZGFyZH0sZ2V0Q3VycmVuY3lQYXR0ZXJuOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2dldCgiY3VycmVuY3lGb3JtYXQiKS5zdGFuZGFyZH0sZ2V0UGVyY2VudFBhdHRlcm46ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZ2V0KCJwZXJjZW50Rm9ybWF0Iikuc3RhbmRhcmR9LGdldEZpcnN0RGF5T2ZXZWVrOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2dldCgid2Vla0RhdGEtZmlyc3REYXkiKX0sZ2V0V2Vla2VuZFN0YXJ0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2dldCgid2Vla0RhdGEtd2Vla2VuZFN0YXJ0Iil9LGdldFdlZWtlbmRFbmQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZ2V0KCJ3ZWVrRGF0YS13ZWVrZW5kRW5kIil9LGdldEludGVydmFsUGF0dGVybjpmdW5jdGlvbihpKXtyZXR1cm4oaSYmdGhpcy5fZ2V0KCJpbnRlcnZhbEZvcm1hdC0iK2kpKXx8dGhpcy5fZ2V0KCJpbnRlcnZhbEZvcm1hdEZhbGxiYWNrIil9LGdldEN1cnJlbmN5RGlnaXRzOmZ1bmN0aW9uKHMpe3ZhciBvPXRoaXMuX2dldCgiY3VycmVuY3lEaWdpdHMiKTt2YXIgZD0yO2lmKG8pe2lmKG9bc10hPXVuZGVmaW5lZCl7ZD1vW3NdfWVsc2V7ZD1vWyJERUZBVUxUIl19fXJldHVybiBkfSxnZXRDdXJyZW5jeVN5bWJvbDpmdW5jdGlvbihzKXt2YXIgbz10aGlzLl9nZXQoImN1cnJlbmN5U3ltYm9scyIpO3JldHVybihvJiZvW3NdKXx8c319KTt2YXIgTT17Im9yaWVudGF0aW9uIjoibGVmdC10by1yaWdodCIsImxhbmd1YWdlcyI6e30sInNjcmlwdHMiOnt9LCJ0ZXJyaXRvcmllcyI6e30sImRhdGVGb3JtYXQtZnVsbCI6IkVFRUUsIE1NTU0gZCwgeSIsImRhdGVGb3JtYXQtbG9uZyI6Ik1NTU0gZCwgeSIsImRhdGVGb3JtYXQtbWVkaXVtIjoiTU1NIGQsIHkiLCJkYXRlRm9ybWF0LXNob3J0IjoiTS9kL3l5IiwidGltZUZvcm1hdC1mdWxsIjoiaDptbTpzcyBhIHp6enoiLCJ0aW1lRm9ybWF0LWxvbmciOiJoOm1tOnNzIGEgeiIsInRpbWVGb3JtYXQtbWVkaXVtIjoiaDptbTpzcyBhIiwidGltZUZvcm1hdC1zaG9ydCI6Img6bW0gYSIsImRhdGVUaW1lRm9ybWF0LWZ1bGwiOiJ7MX0gJ2F0JyB7MH0iLCJkYXRlVGltZUZvcm1hdC1sb25nIjoiezF9ICdhdCcgezB9IiwiZGF0ZVRpbWVGb3JtYXQtbWVkaXVtIjoiezF9LCB7MH0iLCJkYXRlVGltZUZvcm1hdC1zaG9ydCI6InsxfSwgezB9IiwiZGVjaW1hbEZvcm1hdCI6eyJzdGFuZGFyZCI6IiMsIyMwLiMjIyJ9LCJjdXJyZW5jeUZvcm1hdCI6eyJzdGFuZGFyZCI6IsKkIywjIzAuMDAifSwicGVyY2VudEZvcm1hdCI6eyJzdGFuZGFyZCI6IiMsIyMwJSJ9LCJtb250aHMtZm9ybWF0LWFiYnJldmlhdGVkIjpbIkphbiIsIkZlYiIsIk1hciIsIkFwciIsIk1heSIsIkp1biIsIkp1bCIsIkF1ZyIsIlNlcCIsIk9jdCIsIk5vdiIsIkRlYyJdLCJtb250aHMtZm9ybWF0LXdpZGUiOlsiSmFudWFyeSIsIkZlYnJ1YXJ5IiwiTWFyY2giLCJBcHJpbCIsIk1heSIsIkp1bmUiLCJKdWx5IiwiQXVndXN0IiwiU2VwdGVtYmVyIiwiT2N0b2JlciIsIk5vdmVtYmVyIiwiRGVjZW1iZXIiXSwibW9udGhzLWZvcm1hdC1uYXJyb3ciOlsiMSIsIjIiLCIzIiwiNCIsIjUiLCI2IiwiNyIsIjgiLCI5IiwiMTAiLCIxMSIsIjEyIl0sIm1vbnRocy1zdGFuZEFsb25lLWFiYnJldmlhdGVkIjpbIkphbiIsIkZlYiIsIk1hciIsIkFwciIsIk1heSIsIkp1biIsIkp1bCIsIkF1ZyIsIlNlcCIsIk9jdCIsIk5vdiIsIkRlYyJdLCJtb250aHMtc3RhbmRBbG9uZS13aWRlIjpbIkphbnVhcnkiLCJGZWJydWFyeSIsIk1hcmNoIiwiQXByaWwiLCJNYXkiLCJKdW5lIiwiSnVseSIsIkF1Z3VzdCIsIlNlcHRlbWJlciIsIk9jdG9iZXIiLCJOb3ZlbWJlciIsIkRlY2VtYmVyIl0sIm1vbnRocy1zdGFuZEFsb25lLW5hcnJvdyI6WyIxIiwiMiIsIjMiLCI0IiwiNSIsIjYiLCI3IiwiOCIsIjkiLCIxMCIsIjExIiwiMTIiXSwiZGF5cy1mb3JtYXQtYWJicmV2aWF0ZWQiOlsiU3VuIiwiTW9uIiwiVHVlIiwiV2VkIiwiVGh1IiwiRnJpIiwiU2F0Il0sImRheXMtZm9ybWF0LXdpZGUiOlsiU3VuZGF5IiwiTW9uZGF5IiwiVHVlc2RheSIsIldlZG5lc2RheSIsIlRodXJzZGF5IiwiRnJpZGF5IiwiU2F0dXJkYXkiXSwiZGF5cy1mb3JtYXQtbmFycm93IjpbIlMiLCJNIiwiVCIsIlciLCJUIiwiRiIsIlMiXSwiZGF5cy1zdGFuZEFsb25lLWFiYnJldmlhdGVkIjpbIlN1biIsIk1vbiIsIlR1ZSIsIldlZCIsIlRodSIsIkZyaSIsIlNhdCJdLCJkYXlzLXN0YW5kQWxvbmUtd2lkZSI6WyJTdW5kYXkiLCJNb25kYXkiLCJUdWVzZGF5IiwiV2VkbmVzZGF5IiwiVGh1cnNkYXkiLCJGcmlkYXkiLCJTYXR1cmRheSJdLCJkYXlzLXN0YW5kQWxvbmUtbmFycm93IjpbIlMiLCJNIiwiVCIsIlciLCJUIiwiRiIsIlMiXSwicXVhcnRlcnMtZm9ybWF0LW5hcnJvdyI6WyIxIiwiMiIsIjMiLCI0Il0sInF1YXJ0ZXJzLWZvcm1hdC1hYmJyZXZpYXRlZCI6WyJRMSIsIlEyIiwiUTMiLCJRNCJdLCJxdWFydGVycy1mb3JtYXQtd2lkZSI6WyIxc3QgcXVhcnRlciIsIjJuZCBxdWFydGVyIiwiM3JkIHF1YXJ0ZXIiLCI0dGggcXVhcnRlciJdLCJxdWFydGVycy1zdGFuZEFsb25lLW5hcnJvdyI6WyIxIiwiMiIsIjMiLCI0Il0sInN5bWJvbHMtbGF0bi1kZWNpbWFsIjoiLiIsInN5bWJvbHMtbGF0bi1ncm91cCI6IiwiLCJzeW1ib2xzLWxhdG4tcGx1c1NpZ24iOiIrIiwic3ltYm9scy1sYXRuLW1pbnVzU2lnbiI6Ii0iLCJkYXlQZXJpb2RzLWZvcm1hdC1uYXJyb3ciOlsiQU0iLCJQTSJdLCJkYXlQZXJpb2RzLWZvcm1hdC13aWRlIjpbIkFNIiwiUE0iXSwiZGF5UGVyaW9kcy1mb3JtYXQtYWJicmV2aWF0ZWQiOlsiQU0iLCJQTSJdLCJ3ZWVrRGF0YS1taW5EYXlzIjo0LCJ3ZWVrRGF0YS1maXJzdERheSI6MSwid2Vla0RhdGEtd2Vla2VuZFN0YXJ0Ijo2LCJ3ZWVrRGF0YS13ZWVrZW5kRW5kIjowLCJpbnRlcnZhbEZvcm1hdEZhbGxiYWNrIjoiezB9IOKAkyB7MX0ifTt2YXIgYj17Iml3IjoiaGUiLCJqaSI6InlpIiwiaW4iOiJpZCIsInNoIjoic3IifTt2YXIgYz0oZnVuY3Rpb24oKXt2YXIgZD1MLl9jbGRyTG9jYWxlcyxyPXt9LGk7aWYoZCl7Zm9yKGk9MDtpPGQubGVuZ3RoO2krKyl7cltkW2ldXT10cnVlfX1yZXR1cm4gcn0oKSk7dmFyIGw9e307ZnVuY3Rpb24gZyhvKXt2YXIgcz1vLmdldExhbmd1YWdlKCl8fCIiLFM9by5nZXRTY3JpcHQoKXx8IiIscj1vLmdldFJlZ2lvbigpfHwiIixkO2Z1bmN0aW9uIGUoaSl7dmFyIEQ7aWYoIWxbaV0mJighY3x8Y1tpXT09PXRydWUpKXtsW2ldPXEuc2FwLmxvYWRSZXNvdXJjZSgic2FwL3VpL2NvcmUvY2xkci8iK2krIi5qc29uIix7ZGF0YVR5cGU6Impzb24iLGZhaWxPbkVycm9yOmZhbHNlfSl9cmV0dXJuIGxbaV19cz0ocyYmYltzXSl8fHM7aWYocz09PSJubyIpe3M9Im5iIn1pZihzPT09InpoIiYmIXIpe2lmKFM9PT0iSGFucyIpe3I9IkNOIn1lbHNlIGlmKFM9PT0iSGFudCIpe3I9IlRXIn19dmFyIGk9cysiXyIrcjtpZihzJiZyKXtkPWUoaSl9aWYoIWQmJnMpe2Q9ZShzKX1sW2ldPWR8fE07cmV0dXJuIGxbaV19O2EuZXh0ZW5kKCJzYXAudWkuY29yZS5DdXN0b21Mb2NhbGVEYXRhIix7Y29uc3RydWN0b3I6ZnVuY3Rpb24obyl7YS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5tQ3VzdG9tRGF0YT1zYXAudWkuZ2V0Q29yZSgpLmdldENvbmZpZ3VyYXRpb24oKS5nZXRGb3JtYXRTZXR0aW5ncygpLmdldEN1c3RvbUxvY2FsZURhdGEoKX0sX2dldDpmdW5jdGlvbihpKXtyZXR1cm4gdGhpcy5tQ3VzdG9tRGF0YVtpXXx8dGhpcy5tRGF0YVtpXX19KTthLmdldEluc3RhbmNlPWZ1bmN0aW9uKG8pe3JldHVybiBvLmhhc1ByaXZhdGVVc2VTdWJ0YWcoInNhcHVmbXQiKT9uZXcgc2FwLnVpLmNvcmUuQ3VzdG9tTG9jYWxlRGF0YShvKTpuZXcgYShvKX07cmV0dXJuIGF9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS5SZW5kZXJNYW5hZ2VyJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUuUmVuZGVyTWFuYWdlcicpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL1JlbmRlck1hbmFnZXIiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvYmFzZS9JbnRlcmZhY2UnLCdzYXAvdWkvYmFzZS9PYmplY3QnLCdqcXVlcnkuc2FwLmFjdCcsJ2pxdWVyeS5zYXAuZW5jb2RlciddLGZ1bmN0aW9uKHEsSSxCKXsidXNlIHN0cmljdCI7dmFyIGM9WyJyZW5kZXJDb250cm9sIiwid3JpdGUiLCJ3cml0ZUVzY2FwZWQiLCJ0cmFuc2xhdGUiLCJ3cml0ZUFjY2VsZXJhdG9yS2V5Iiwid3JpdGVDb250cm9sRGF0YSIsIndyaXRlRWxlbWVudERhdGEiLCJ3cml0ZUF0dHJpYnV0ZSIsIndyaXRlQXR0cmlidXRlRXNjYXBlZCIsImFkZENsYXNzIiwid3JpdGVDbGFzc2VzIiwiYWRkU3R5bGUiLCJ3cml0ZVN0eWxlcyIsIndyaXRlQWNjZXNzaWJpbGl0eVN0YXRlIiwid3JpdGVJY29uIiwiZ2V0Q29uZmlndXJhdGlvbiIsImdldEhUTUwiLCJjbGVhbnVwQ29udHJvbFdpdGhvdXRSZW5kZXJpbmciXTt2YXIgTj1bInJlbmRlciIsImZsdXNoIiwiZGVzdHJveSJdO3ZhciBSPUIuZXh0ZW5kKCJzYXAudWkuY29yZS5SZW5kZXJNYW5hZ2VyIix7Y29uc3RydWN0b3I6ZnVuY3Rpb24oKXtCLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLmFCdWZmZXI9W107dGhpcy5hUmVuZGVyZWRDb250cm9scz1bXTt0aGlzLmFTdHlsZVN0YWNrPVt7fV19LG1ldGFkYXRhOntwdWJsaWNNZXRob2RzOmMuY29uY2F0KE4pfX0pO1IucHJvdG90eXBlLmdldFJlbmRlcmVySW50ZXJmYWNlPWZ1bmN0aW9uKCl7dmFyIGk9bmV3IEkodGhpcyxjKTt0aGlzLmdldFJlbmRlcmVySW50ZXJmYWNlPXEuc2FwLmdldHRlcihpKTtyZXR1cm4gaX07Ui5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbigpe3RoaXMuYUJ1ZmZlcj1bXTt0aGlzLmFSZW5kZXJlZENvbnRyb2xzPVtdO3RoaXMuYVN0eWxlU3RhY2s9W3t9XX07Ui5wcm90b3R5cGUuZ2V0Q29uZmlndXJhdGlvbj1mdW5jdGlvbigpe3JldHVybiBzYXAudWkuZ2V0Q29yZSgpLmdldENvbmZpZ3VyYXRpb24oKX07Ui5wcm90b3R5cGUuZ2V0UmVuZGVyZXI9ZnVuY3Rpb24oQyl7cmV0dXJuIFIuZ2V0UmVuZGVyZXIoQyl9O3ZhciB0PWZ1bmN0aW9uKHIsQyl7ci5fYkxvY2tlZD10cnVlO3RyeXt2YXIgZT1xLkV2ZW50KCJCZWZvcmVSZW5kZXJpbmciKTtlLnNyY0NvbnRyb2w9QztDLl9oYW5kbGVFdmVudChlKX1maW5hbGx5e3IuX2JMb2NrZWQ9ZmFsc2V9fTtSLnByb3RvdHlwZS5jbGVhbnVwQ29udHJvbFdpdGhvdXRSZW5kZXJpbmc9ZnVuY3Rpb24oQyl7aWYoIUN8fCFDLmdldERvbVJlZigpKXtyZXR1cm59dCh0aGlzLEMpO0MuYk91dHB1dD1mYWxzZX07Ui5wcm90b3R5cGUucmVuZGVyQ29udHJvbD1mdW5jdGlvbihDKXtpZighQyl7cmV0dXJufWlmKCF0aGlzLmFSZW5kZXJTdGFjayl7dGhpcy5hUmVuZGVyU3RhY2s9bmV3IEFycmF5KCl9aWYodGhpcy5hUmVuZGVyU3RhY2smJnRoaXMuYVJlbmRlclN0YWNrLmxlbmd0aD4wKXtxLnNhcC5tZWFzdXJlLnBhdXNlKHRoaXMuYVJlbmRlclN0YWNrWzBdKyItLS1yZW5kZXJDb250cm9sIil9ZWxzZSBpZihDLmdldFBhcmVudCgpJiZDLmdldFBhcmVudCgpLmdldE1ldGFkYXRhKCkuZ2V0TmFtZSgpPT0ic2FwLnVpLmNvcmUuVUlBcmVhIil7cS5zYXAubWVhc3VyZS5wYXVzZShDLmdldFBhcmVudCgpLmdldElkKCkrIi0tLXJlcmVuZGVyIil9dGhpcy5hUmVuZGVyU3RhY2sudW5zaGlmdChDLmdldElkKCkpO3Euc2FwLm1lYXN1cmUuc3RhcnQoQy5nZXRJZCgpKyItLS1yZW5kZXJDb250cm9sIiwiUmVuZGVyaW5nIG9mICIrQy5nZXRNZXRhZGF0YSgpLmdldE5hbWUoKSk7dmFyIGI9dGhpcy5hQnVmZmVyLmxlbmd0aDt2YXIgbz17fTtpZihDLmFDdXN0b21TdHlsZUNsYXNzZXMmJkMuYUN1c3RvbVN0eWxlQ2xhc3Nlcy5sZW5ndGg+MCl7by5hQ3VzdG9tU3R5bGVDbGFzc2VzPUMuYUN1c3RvbVN0eWxlQ2xhc3Nlc310aGlzLmFTdHlsZVN0YWNrLnB1c2gobyk7cS5zYXAubWVhc3VyZS5wYXVzZShDLmdldElkKCkrIi0tLXJlbmRlckNvbnRyb2wiKTt2YXIgcj10aGlzLmdldFJlbmRlcmVyKEMpO3Euc2FwLm1lYXN1cmUucmVzdW1lKEMuZ2V0SWQoKSsiLS0tcmVuZGVyQ29udHJvbCIpO3QodGhpcyxDKTt2YXIgYT1DLmFCaW5kUGFyYW1ldGVycztpZihhJiZhLmxlbmd0aD4wKXt2YXIgZD1xKEMuZ2V0RG9tUmVmKCkpO2lmKGQmJmRbMF0pe2Zvcih2YXIgaT0wO2k8YS5sZW5ndGg7aSsrKXt2YXIgcD1hW2ldO2QudW5iaW5kKHAuc0V2ZW50VHlwZSxwLmZuUHJveHkpfX19ci5yZW5kZXIodGhpcy5nZXRSZW5kZXJlckludGVyZmFjZSgpLEMpO3RoaXMuYVN0eWxlU3RhY2sucG9wKCk7dGhpcy5hUmVuZGVyZWRDb250cm9scy5wdXNoKEMpO2lmKEMuZ2V0VUlBcmVhJiZDLmdldFVJQXJlYSgpKXtDLmdldFVJQXJlYSgpLl9vbkNvbnRyb2xSZW5kZXJlZChDKX1DLmJPdXRwdXQ9dGhpcy5hQnVmZmVyLmxlbmd0aCE9YjtxLnNhcC5tZWFzdXJlLmVuZChDLmdldElkKCkrIi0tLXJlbmRlckNvbnRyb2wiKTt0aGlzLmFSZW5kZXJTdGFjay5zaGlmdCgpO2lmKHRoaXMuYVJlbmRlclN0YWNrJiZ0aGlzLmFSZW5kZXJTdGFjay5sZW5ndGg+MCl7cS5zYXAubWVhc3VyZS5yZXN1bWUodGhpcy5hUmVuZGVyU3RhY2tbMF0rIi0tLXJlbmRlckNvbnRyb2wiKX1lbHNlIGlmKEMuZ2V0UGFyZW50KCkmJkMuZ2V0UGFyZW50KCkuZ2V0TWV0YWRhdGEoKS5nZXROYW1lKCk9PSJzYXAudWkuY29yZS5VSUFyZWEiKXtxLnNhcC5tZWFzdXJlLnJlc3VtZShDLmdldFBhcmVudCgpLmdldElkKCkrIi0tLXJlcmVuZGVyIil9fTtSLnByb3RvdHlwZS5nZXRIVE1MPWZ1bmN0aW9uKEMpe3ZhciBhPXRoaXMuYUJ1ZmZlcjt2YXIgcj10aGlzLmFCdWZmZXI9W107dGhpcy5yZW5kZXJDb250cm9sKEMpO3RoaXMuYUJ1ZmZlcj1hO3JldHVybiByLmpvaW4oIiIpfTsoZnVuY3Rpb24oKXt2YXIgcz1mdW5jdGlvbigpe3ZhciBDPXNhcC51aS5nZXRDb3JlKCk7dmFyIEY9Qy5nZXRDdXJyZW50Rm9jdXNlZENvbnRyb2xJZCgpLG89bnVsbCxhPW51bGw7aWYoRil7dmFyIGI9Qy5nZXRFbGVtZW50QnlJZChGKTtpZihiKXtvPWIuZ2V0Rm9jdXNJbmZvKCk7YT1iLmdldEZvY3VzRG9tUmVmKCl9fXJldHVybntmb2N1c2VkQ29udHJvbElkOkYsZm9jdXNJbmZvOm8sZm9jdXNEb21SZWY6YX19O3ZhciBmPWZ1bmN0aW9uKHIsYSxTKXtmb3IodmFyIGk9MCxiPWEubGVuZ3RoO2k8YjtpKyspe3ZhciBDPWFbaV07aWYoQy5iT3V0cHV0KXtyLl9iTG9ja2VkPXRydWU7dHJ5e3ZhciBFPXEuRXZlbnQoIkFmdGVyUmVuZGVyaW5nIik7RS5zcmNDb250cm9sPUM7cS5zYXAubWVhc3VyZS5zdGFydChDLmdldElkKCkrIi0tLUFmdGVyUmVuZGVyaW5nIiwiQWZ0ZXJSZW5kZXJpbmcgb2YgIitDLmdldE1ldGFkYXRhKCkuZ2V0TmFtZSgpKTtDLl9oYW5kbGVFdmVudChFKTtxLnNhcC5tZWFzdXJlLmVuZChDLmdldElkKCkrIi0tLUFmdGVyUmVuZGVyaW5nIil9ZmluYWxseXtyLl9iTG9ja2VkPWZhbHNlfX19dHJ5e2lmKFMmJlMuZm9jdXNlZENvbnRyb2xJZCl7dmFyIEY9c2FwLnVpLmdldENvcmUoKS5nZXRFbGVtZW50QnlJZChTLmZvY3VzZWRDb250cm9sSWQpO2lmKEYmJkYuZ2V0Rm9jdXNEb21SZWYoKSE9Uy5mb2N1c0RvbVJlZil7Ri5hcHBseUZvY3VzSW5mbyhTLmZvY3VzSW5mbyl9fX1jYXRjaChlKXtxLnNhcC5sb2cud2FybmluZygiUHJvYmxlbXMgd2hpbGUgcmVzdG9yZSBmb2N1cyBhZnRlciByZW5kZXJpbmc6ICIrZSxudWxsLHIpfWZvcih2YXIgaT0wLGI9YS5sZW5ndGg7aTxiO2krKyl7dmFyIEM9YVtpXSxkPUMuYUJpbmRQYXJhbWV0ZXJzO2lmKGQmJmQubGVuZ3RoPjApe3ZhciBEPXEoQy5nZXREb21SZWYoKSk7aWYoRCYmRFswXSl7Zm9yKHZhciBqPTA7ajxkLmxlbmd0aDtqKyspe3ZhciBwPWRbal07RC5iaW5kKHAuc0V2ZW50VHlwZSxwLmZuUHJveHkpfX19fX07Ui5wcm90b3R5cGUuZmx1c2g9ZnVuY3Rpb24oVCxkLHYpe2lmKHRoaXMuYlJlbmRlcmVyTW9kZSl7cS5zYXAubG9nLmluZm8oIkZsdXNoIG11c3Qgbm90IGJlIGNhbGxlZCBmcm9tIGNvbnRyb2wgcmVuZGVyZXJzLiBDYWxsIGlnbm9yZWQuIixudWxsLHRoaXMpO3JldHVybn1pZighZCYmKHR5cGVvZiB2IT09Im51bWJlciIpJiYhdil7Ui5wcmVzZXJ2ZUNvbnRlbnQoVCl9dmFyIFM9cygpO3ZhciBoPVIucHJlcGFyZUhUTUw1KHRoaXMuYUJ1ZmZlci5qb2luKCIiKSk7aWYodGhpcy5fZlB1dEludG9Eb20pe3RoaXMuX2ZQdXRJbnRvRG9tKFQsaCl9ZWxzZXtmb3IodmFyIGk9MDtpPHRoaXMuYVJlbmRlcmVkQ29udHJvbHMubGVuZ3RoO2krKyl7dmFyIG89dGhpcy5hUmVuZGVyZWRDb250cm9sc1tpXS5nZXREb21SZWYoKTtpZihvJiYhUi5pc1ByZXNlcnZlZENvbnRlbnQobykpe2lmKFIuaXNJbmxpbmVUZW1wbGF0ZShvKSl7cShvKS5lbXB0eSgpfWVsc2V7cShvKS5yZW1vdmUoKX19fWlmKHR5cGVvZiB2PT09Im51bWJlciIpe2lmKHY8PTApe3EoVCkucHJlcGVuZChoKX1lbHNle3ZhciAkPXEoVCkuY2hpbGRyZW4oKS5lcSh2LTEpO2lmKCQubGVuZ3RoPT09MSl7JC5hZnRlcihoKX1lbHNle3EoVCkuYXBwZW5kKGgpfX19ZWxzZSBpZighdil7cShUKS5odG1sKGgpfWVsc2V7cShUKS5hcHBlbmQoaCl9fWYodGhpcyx0aGlzLmFSZW5kZXJlZENvbnRyb2xzLFMpO3RoaXMuYVJlbmRlcmVkQ29udHJvbHM9W107dGhpcy5hQnVmZmVyPVtdO3RoaXMuYVN0eWxlU3RhY2s9W3t9XTtxLnNhcC5hY3QucmVmcmVzaCgpfTtSLnByb3RvdHlwZS5yZW5kZXI9ZnVuY3Rpb24oQyxUKXtpZih0aGlzLmJSZW5kZXJlck1vZGUpe3Euc2FwLmxvZy5pbmZvKCJSZW5kZXIgbXVzdCBub3QgYmUgY2FsbGVkIGZyb20gY29udHJvbCByZW5kZXJlcnMuIENhbGwgaWdub3JlZC4iLG51bGwsdGhpcyk7cmV0dXJufWlmKHRoaXMuX2JMb2NrZWQpe3Euc2FwLmxvZy5lcnJvcigiUmVuZGVyIG11c3Qgbm90IGJlIGNhbGxlZCB3aXRoaW4gQmVmb3JlIG9yIEFmdGVyIFJlbmRlcmluZyBQaGFzZS4gQ2FsbCBpZ25vcmVkLiIsbnVsbCx0aGlzKTtyZXR1cm59dGhpcy5hQnVmZmVyPVtdO3RoaXMucmVuZGVyQ29udHJvbChDKTt0aGlzLl9mUHV0SW50b0RvbT1mdW5jdGlvbihvLGgpe2lmKEMmJlQpe3ZhciBhPUMuZ2V0RG9tUmVmKCk7aWYoUi5pc1ByZXNlcnZlZENvbnRlbnQoYSkpe2E9cS5zYXAuYnlJZCgic2FwLXVpLWR1bW15LSIrQy5nZXRJZCgpKVswXXx8YX12YXIgbj1hJiZhLnBhcmVudE5vZGUhPVQ7dmFyIEE9ZnVuY3Rpb24oKXt2YXIgaj1xKFQpO2lmKFQuaW5uZXJIVE1MPT0iIil7ai5odG1sKGgpfWVsc2V7ai5hcHBlbmQoaCl9fTtpZihuKXtpZighUi5pc1ByZXNlcnZlZENvbnRlbnQoYSkpe2lmKFIuaXNJbmxpbmVUZW1wbGF0ZShhKSl7cShhKS5lbXB0eSgpfWVsc2V7cShhKS5yZW1vdmUoKX19aWYoaCl7QSgpfX1lbHNle2lmKGgpe2lmKGEpe2lmKFIuaXNJbmxpbmVUZW1wbGF0ZShhKSl7cShhKS5odG1sKGgpfWVsc2V7cShhKS5yZXBsYWNlV2l0aChoKX19ZWxzZXtBKCl9fWVsc2V7aWYoUi5pc0lubGluZVRlbXBsYXRlKGEpKXtxKGEpLmVtcHR5KCl9ZWxzZXtpZighQy5nZXRQYXJlbnQoKXx8IUMuZ2V0UGFyZW50KCkuX29uQ2hpbGRSZXJlbmRlcmVkRW1wdHl8fCFDLmdldFBhcmVudCgpLl9vbkNoaWxkUmVyZW5kZXJlZEVtcHR5KEMsYSkpe3EoYSkucmVtb3ZlKCl9fX19fX07dGhpcy5mbHVzaChULHRydWUpO3RoaXMuX2ZQdXRJbnRvRG9tPW51bGx9fSgpKTtSLmdldFJlbmRlcmVyPWZ1bmN0aW9uKEMpe3JldHVybiBDLmdldE1ldGFkYXRhKCkuZ2V0UmVuZGVyZXIoKX07Ui5pbml0SFRNTDVTdXBwb3J0PWZ1bmN0aW9uKCl7aWYoISFzYXAudWkuRGV2aWNlLmJyb3dzZXIuaW50ZXJuZXRfZXhwbG9yZXImJihzYXAudWkuRGV2aWNlLmJyb3dzZXIudmVyc2lvbj09PTh8fHNhcC51aS5EZXZpY2UuYnJvd3Nlci52ZXJzaW9uPT09Nykpe3ZhciBUPVsiYXJ0aWNsZSIsImFzaWRlIiwiYXVkaW8iLCJjYW52YXMiLCJjb21tYW5kIiwiZGF0YWxpc3QiLCJkZXRhaWxzIiwiZmlnY2FwdGlvbiIsImZpZ3VyZSIsImZvb3RlciIsImhlYWRlciIsImhncm91cCIsImtleWdlbiIsIm1hcmsiLCJtZXRlciIsIm5hdiIsIm91dHB1dCIsInByb2dyZXNzIiwicnAiLCJydCIsInJ1YnkiLCJzZWN0aW9uIiwic291cmNlIiwic3VtbWFyeSIsInRlbXBsYXRlIiwidGltZSIsInZpZGVvIiwid2JyIl07Zm9yKHZhciBpPTA7aTxULmxlbmd0aDtpKyspe2RvY3VtZW50LmNyZWF0ZUVsZW1lbnQoVFtpXSl9dmFyIHI9bmV3IFJlZ0V4cCgiPCgiK1Quam9pbigifCIpKyIpKFxcc3w+KSIsImkiKTt2YXIgZD1udWxsO1IucHJlcGFyZUhUTUw1PWZ1bmN0aW9uKGgpe2lmKGgmJmgubWF0Y2gocikpe2lmKCFkKXtkPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO2Quc3R5bGUuZGlzcGxheT0nbm9uZSd9dmFyIGU9ZC5jbG9uZU5vZGUodHJ1ZSk7dmFyIGY9ZG9jdW1lbnQuYm9keXx8ZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO2YuYXBwZW5kQ2hpbGQoZSk7ZS5pbm5lckhUTUw9aC5yZXBsYWNlKC9eXHNccyovLCcnKS5yZXBsYWNlKC9cc1xzKiQvLCcnKTtmLnJlbW92ZUNoaWxkKGUpO3JldHVybiBlLmNoaWxkTm9kZXN9cmV0dXJuIGh9O3Euc2FwLmxvZy5pbmZvKCJJRTggSFRNTDUgc3VwcG9ydCBhY3RpdmF0ZWQiKX1lbHNle3Euc2FwLmxvZy5pbmZvKCJubyBJRTggSFRNTDUgc3VwcG9ydCByZXF1aXJlZCIpO1IucHJlcGFyZUhUTUw1PWZ1bmN0aW9uKGgpe3JldHVybiBofX19O1IuZm9yY2VSZXBhaW50PWZ1bmN0aW9uKGQpe3ZhciBEPXR5cGVvZiBkPT0ic3RyaW5nIj9xLnNhcC5kb21CeUlkKGQpOmQ7aWYoRCl7cS5zYXAubG9nLmRlYnVnKCJmb3JjaW5nIGEgcmVwYWludCBmb3IgIisoRC5pZHx8U3RyaW5nKEQpKSk7dmFyIG89RC5zdHlsZS5kaXNwbGF5O3ZhciBhPWRvY3VtZW50LmFjdGl2ZUVsZW1lbnQ7RC5zdHlsZS5kaXNwbGF5PSJub25lIjtELm9mZnNldEhlaWdodDtELnN0eWxlLmRpc3BsYXk9bztpZihkb2N1bWVudC5hY3RpdmVFbGVtZW50IT09YSl7cS5zYXAuZm9jdXMoYSl9fX07KGZ1bmN0aW9uKCl7dmFyIGE9InNhcC11aS1wcmVzZXJ2ZSIsYj0ic2FwLXVpLXN0YXRpYyIsQT0iZGF0YS1zYXAtdWktcHJlc2VydmUiLGQ9ImRhdGEtc2FwLXVpLWFyZWEiO2Z1bmN0aW9uIGcoKXt2YXIgJD1xKCIjIithKTtpZigkLmxlbmd0aD09PTApeyQ9cSgiPERJVi8+Iix7cm9sZToiYXBwbGljYXRpb24iLGlkOmF9KS5hZGRDbGFzcygic2FwVWlIaWRkZW4iKS5jc3MoIndpZHRoIiwiMCIpLmNzcygiaGVpZ2h0IiwiMCIpLmNzcygib3ZlcmZsb3ciLCJoaWRkZW4iKS5hcHBlbmRUbyhkb2N1bWVudC5ib2R5KX1yZXR1cm4gJH1mdW5jdGlvbiBtKG4pe3EoIjxESVYvPiIse2lkOiJzYXAtdWktZHVtbXktIituLmlkfSkuYWRkQ2xhc3MoInNhcFVpSGlkZGVuIikuaW5zZXJ0QmVmb3JlKG4pfVIucHJlc2VydmVDb250ZW50PWZ1bmN0aW9uKHIscCxQKXtzYXAudWkuZ2V0Q29yZSgpLmdldEV2ZW50QnVzKCkucHVibGlzaCgic2FwLnVpIiwiX19wcmVzZXJ2ZUNvbnRlbnQiLHtkb21Ob2RlOnJ9KTt2YXIgJD1nKCk7ZnVuY3Rpb24gZihoKXtpZihoLmlkPT09YXx8aC5pZD09PWIpe3JldHVybn1pZihoLmhhc0F0dHJpYnV0ZShBKSl7aWYoaD09PXIpe20oaCl9JC5hcHBlbmQoaCl9ZWxzZSBpZihQJiZoLmlkKXtSLm1hcmtQcmVzZXJ2YWJsZUNvbnRlbnQocShoKSxoLmlkKTskLmFwcGVuZChoKTtyZXR1cm59aWYoIWguaGFzQXR0cmlidXRlKGQpKXt2YXIgbj1oLmZpcnN0Q2hpbGQ7d2hpbGUobil7aD1uO249bi5uZXh0U2libGluZztpZihoLm5vZGVUeXBlPT09MSl7ZihoKX19fX1xLnNhcC5tZWFzdXJlLnN0YXJ0KHIuaWQrIi0tLXByZXNlcnZlQ29udGVudCIsInByZXNlcnZlQ29udGVudCBmb3IgIityLmlkKTtpZihwKXtmKHIpfWVsc2V7cShyKS5jaGlsZHJlbigpLmVhY2goZnVuY3Rpb24oaSxuKXtmKG4pfSl9cS5zYXAubWVhc3VyZS5lbmQoci5pZCsiLS0tcHJlc2VydmVDb250ZW50Iil9O1IuZmluZFByZXNlcnZlZENvbnRlbnQ9ZnVuY3Rpb24oaSl7dmFyICQ9ZygpLGY9JC5jaGlsZHJlbigiWyIrQSsiPSciK2kucmVwbGFjZSgvKDp8XC4pL2csJ1xcJDEnKSsiJ10iKTtyZXR1cm4gZn07Ui5tYXJrUHJlc2VydmFibGVDb250ZW50PWZ1bmN0aW9uKCQsaSl7JC5hdHRyKEEsaSl9O1IuaXNQcmVzZXJ2ZWRDb250ZW50PWZ1bmN0aW9uKEQpe3JldHVybihEJiZELmdldEF0dHJpYnV0ZShBKSYmRC5wYXJlbnROb2RlJiZELnBhcmVudE5vZGUuaWQ9PWEpfTtSLmdldFByZXNlcnZlQXJlYVJlZj1mdW5jdGlvbigpe3JldHVybiBnKClbMF19O3ZhciBlPSJkYXRhLXNhcC11aS10ZW1wbGF0ZSI7Ui5tYXJrSW5saW5lVGVtcGxhdGU9ZnVuY3Rpb24oJCl7JC5hdHRyKGUsIiIpfTtSLmlzSW5saW5lVGVtcGxhdGU9ZnVuY3Rpb24oRCl7cmV0dXJuKEQmJkQuaGFzQXR0cmlidXRlKGUpKX19KCkpO1IucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKFQpe3RoaXMuYUJ1ZmZlci5wdXNoLmFwcGx5KHRoaXMuYUJ1ZmZlcixhcmd1bWVudHMpO3JldHVybiB0aGlzfTtSLnByb3RvdHlwZS53cml0ZUVzY2FwZWQ9ZnVuY3Rpb24oVCxsKXtpZihsKXt2YXIgTD1ULnNwbGl0KCJcbiIpO2Zvcih2YXIgaT0wO2k8TC5sZW5ndGg7aSsrKXtMW2ldPXEuc2FwLmVuY29kZUhUTUwoTFtpXSl9VD1MLmpvaW4oIjxicj4iKX1lbHNle1Q9cS5zYXAuZW5jb2RlSFRNTChUKX10aGlzLmFCdWZmZXIucHVzaChUKTtyZXR1cm4gdGhpc307Ui5wcm90b3R5cGUudHJhbnNsYXRlPWZ1bmN0aW9uKGspe307Ui5wcm90b3R5cGUud3JpdGVBY2NlbGVyYXRvcktleT1mdW5jdGlvbigpe3JldHVybiB0aGlzfTtSLnByb3RvdHlwZS5hZGRTdHlsZT1mdW5jdGlvbihuLHYpe2lmKHYhPT11bmRlZmluZWQmJnYhPT1udWxsKXt2YXIgcz10aGlzLmFTdHlsZVN0YWNrW3RoaXMuYVN0eWxlU3RhY2subGVuZ3RoLTFdO2lmKCFzLmFTdHlsZSl7cy5hU3R5bGU9W119cy5hU3R5bGUucHVzaChuKyI6Iit2KX1yZXR1cm4gdGhpc307Ui5wcm90b3R5cGUud3JpdGVTdHlsZXM9ZnVuY3Rpb24oKXt2YXIgcz10aGlzLmFTdHlsZVN0YWNrW3RoaXMuYVN0eWxlU3RhY2subGVuZ3RoLTFdO2lmKHMuYVN0eWxlKXt0aGlzLndyaXRlKCIgc3R5bGU9XCIiK3MuYVN0eWxlLmpvaW4oIjsiKSsiXCIgIil9cy5hU3R5bGU9bnVsbDtyZXR1cm4gdGhpc307Ui5wcm90b3R5cGUuYWRkQ2xhc3M9ZnVuY3Rpb24obil7aWYobil7dmFyIHM9dGhpcy5hU3R5bGVTdGFja1t0aGlzLmFTdHlsZVN0YWNrLmxlbmd0aC0xXTtpZighcy5hQ2xhc3Nlcyl7cy5hQ2xhc3Nlcz1bXX1zLmFDbGFzc2VzLnB1c2gobil9cmV0dXJuIHRoaXN9O1IucHJvdG90eXBlLndyaXRlQ2xhc3Nlcz1mdW5jdGlvbihlKXt2YXIgcz10aGlzLmFTdHlsZVN0YWNrW3RoaXMuYVN0eWxlU3RhY2subGVuZ3RoLTFdO3ZhciBDPWU/ZS5hQ3VzdG9tU3R5bGVDbGFzc2VzOigoZT09PWZhbHNlKT9bXTpzLmFDdXN0b21TdHlsZUNsYXNzZXMpO2lmKHMuYUNsYXNzZXN8fEMpe3ZhciBhPVtdLmNvbmNhdChzLmFDbGFzc2VzfHxbXSxDfHxbXSk7YS5zb3J0KCk7YT1xLm1hcChhLGZ1bmN0aW9uKG4saSl7cmV0dXJuKGk9PTB8fG4hPWFbaS0xXSk/bjpudWxsfSk7dGhpcy53cml0ZSgiIGNsYXNzPVwiIixhLmpvaW4oIiAiKSwiXCIgIil9aWYoIWUpe3MuYUN1c3RvbVN0eWxlQ2xhc3Nlcz1udWxsfXMuYUNsYXNzZXM9bnVsbDtyZXR1cm4gdGhpc307Ui5wcm90b3R5cGUud3JpdGVDb250cm9sRGF0YT1mdW5jdGlvbihDKXt0aGlzLndyaXRlRWxlbWVudERhdGEoQyk7cmV0dXJuIHRoaXN9O1IucHJvdG90eXBlLndyaXRlRWxlbWVudERhdGE9ZnVuY3Rpb24oZSl7dmFyIHM9ZS5nZXRJZCgpO2lmKHMpe3RoaXMud3JpdGVBdHRyaWJ1dGUoImlkIixzKS53cml0ZUF0dHJpYnV0ZSgiZGF0YS1zYXAtdWkiLHMpfXZhciBkPWUuZ2V0Q3VzdG9tRGF0YSgpO3ZhciBsPWQubGVuZ3RoO2Zvcih2YXIgaT0wO2k8bDtpKyspe3ZhciBEPWRbaV07aWYoRC5nZXRXcml0ZVRvRG9tKCkpe3ZhciBrPUQuZ2V0S2V5KCk7aWYodHlwZW9mIEQuZ2V0VmFsdWUoKT09PSJzdHJpbmciKXtpZigoc2FwLnVpLmNvcmUuSUQuaXNWYWxpZChrKSkmJihrLmluZGV4T2YoIjoiKT09LTEpJiYoay5pbmRleE9mKCJzYXAtdWkiKSE9PTApKXt0aGlzLndyaXRlQXR0cmlidXRlRXNjYXBlZCgiZGF0YS0iK2ssRC5nZXRWYWx1ZSgpKX1lbHNle3Euc2FwLmxvZy5lcnJvcigiQ3VzdG9tRGF0YSB3aXRoIGtleSAiK2srIiBzaG91bGQgYmUgd3JpdHRlbiB0byBIVE1MIG9mICIrdGhpcysiIGJ1dCB0aGUga2V5IGlzIG5vdCB2YWxpZCAobXVzdCBiZSBhIHZhbGlkIHNhcC51aS5jb3JlLklEIHdpdGhvdXQgYW55IGNvbG9uIGFuZCBtYXkgbm90IHN0YXJ0IHdpdGggJ3NhcC11aScpLiIpfX1lbHNle3Euc2FwLmxvZy5lcnJvcigiQ3VzdG9tRGF0YSB3aXRoIGtleSAiK2srIiBzaG91bGQgYmUgd3JpdHRlbiB0byBIVE1MIG9mICIrdGhpcysiIGJ1dCB0aGUgdmFsdWUgaXMgbm90IGEgc3RyaW5nLiIpfX19cmV0dXJuIHRoaXN9O1IucHJvdG90eXBlLndyaXRlQXR0cmlidXRlPWZ1bmN0aW9uKG4sdil7dGhpcy53cml0ZSgiICIsbiwiPVwiIix2LCJcIiIpO3JldHVybiB0aGlzfTtSLnByb3RvdHlwZS53cml0ZUF0dHJpYnV0ZUVzY2FwZWQ9ZnVuY3Rpb24obix2KXt0aGlzLndyaXRlQXR0cmlidXRlKG4scS5zYXAuZXNjYXBlSFRNTChTdHJpbmcodikpKTtyZXR1cm4gdGhpc307Ui5wcm90b3R5cGUud3JpdGVBY2Nlc3NpYmlsaXR5U3RhdGU9ZnVuY3Rpb24oZSxQKXtpZighc2FwLnVpLmdldENvcmUoKS5nZXRDb25maWd1cmF0aW9uKCkuZ2V0QWNjZXNzaWJpbGl0eSgpKXtyZXR1cm4gdGhpc31pZihhcmd1bWVudHMubGVuZ3RoPT0xJiYhKGUgaW5zdGFuY2VvZiBzYXAudWkuY29yZS5FbGVtZW50KSl7UD1lO2U9bnVsbH12YXIgYT17fTtpZihlIT1udWxsKXt2YXIgbT1lLmdldE1ldGFkYXRhKCk7bS5fZW5yaWNoQ2hpbGRJbmZvcygpO3ZhciBiPWZ1bmN0aW9uKEUsQSx2KXt2YXIgbz1tLmdldEFsbFByb3BlcnRpZXMoKVtFXTtpZihvJiZlW28uX3NHZXR0ZXJdKCk9PT12KXthW0FdPSJ0cnVlIn19O3ZhciBkPWZ1bmN0aW9uKEUsQSl7dmFyIG89bS5nZXRBbGxBc3NvY2lhdGlvbnMoKVtFXTtpZihvJiZvLm11bHRpcGxlKXt2YXIgaz1lW28uX3NHZXR0ZXJdKCk7aWYoay5sZW5ndGg+MCl7YVtBXT1rLmpvaW4oIiAiKX19fTtiKCJlZGl0YWJsZSIsInJlYWRvbmx5IixmYWxzZSk7YigiZW5hYmxlZCIsImRpc2FibGVkIixmYWxzZSk7YigidmlzaWJsZSIsImhpZGRlbiIsZmFsc2UpO2IoInJlcXVpcmVkIiwicmVxdWlyZWQiLHRydWUpO2IoInNlbGVjdGVkIiwic2VsZWN0ZWQiLHRydWUpO2IoImNoZWNrZWQiLCJjaGVja2VkIix0cnVlKTtkKCJhcmlhRGVzY3JpYmVkQnkiLCJkZXNjcmliZWRieSIpO2QoImFyaWFMYWJlbGxlZEJ5IiwibGFiZWxsZWRieSIpfWlmKFApe3ZhciBmPWZ1bmN0aW9uKHYpe3ZhciBpPXR5cGVvZih2KTtyZXR1cm4gdj09PW51bGx8fHY9PT0iInx8aT09PSJudW1iZXIifHxpPT09InN0cmluZyJ8fGk9PT0iYm9vbGVhbiJ9O3ZhciBnPXt9O3ZhciB4LGgsaSxqO2Zvcih4IGluIFApe2g9UFt4XTtpZihmKGgpKXtnW3hdPWh9ZWxzZSBpZih0eXBlb2YoaCk9PT0ib2JqZWN0IiYmZihoLnZhbHVlKSl7aj0iIjtpZihoLmFwcGVuZCYmKHg9PT0iZGVzY3JpYmVkYnkifHx4PT09ImxhYmVsbGVkYnkiKSl7aj1hW3hdP2FbeF0rIiAiOiIifWdbeF09aitoLnZhbHVlfX1xLmV4dGVuZChhLGcpfWlmKGUgaW5zdGFuY2VvZiBzYXAudWkuY29yZS5FbGVtZW50JiZlLmdldFBhcmVudCgpJiZlLmdldFBhcmVudCgpLmVuaGFuY2VBY2Nlc3NpYmlsaXR5U3RhdGUpe2UuZ2V0UGFyZW50KCkuZW5oYW5jZUFjY2Vzc2liaWxpdHlTdGF0ZShlLGEpfWZvcih2YXIgcCBpbiBhKXtpZihhW3BdIT1udWxsJiZhW3BdIT09IiIpe3RoaXMud3JpdGVBdHRyaWJ1dGVFc2NhcGVkKHA9PT0icm9sZSI/cDoiYXJpYS0iK3AsYVtwXSl9fXJldHVybiB0aGlzfTtSLnByb3RvdHlwZS53cml0ZUljb249ZnVuY3Rpb24odSxDLGEpe3Euc2FwLnJlcXVpcmUoInNhcC51aS5jb3JlLkljb25Qb29sIik7dmFyIGk9c2FwLnVpLmNvcmUuSWNvblBvb2wuaXNJY29uVVJJKHUpLHM9aT8iPHNwYW4gIjoiPGltZyAiLFQ9KHNhcC51aS5EZXZpY2UuYnJvd3Nlci5pbnRlcm5ldF9leHBsb3JlciYmc2FwLnVpLkRldmljZS5icm93c2VyLnZlcnNpb248OSksYixwLG87aWYodHlwZW9mIEM9PT0ic3RyaW5nIil7Qz1bQ119aWYoaSl7bz1zYXAudWkuY29yZS5JY29uUG9vbC5nZXRJY29uSW5mbyh1KTtpZighbyl7cS5zYXAubG9nLmVycm9yKCJBbiB1bnJlZ2lzdGVyZWQgaWNvbjogIit1KyIgaXMgdXNlZCBpbiBzYXAudWkuY29yZS5SZW5kZXJNYW5hZ2VyJ3Mgd3JpdGVJY29uIG1ldGhvZC4iKTtyZXR1cm59aWYoIUMpe0M9W119Qy5wdXNoKCJzYXBVaUljb24iKTtpZighby5zdXBwcmVzc01pcnJvcmluZyl7Qy5wdXNoKCJzYXBVaUljb25NaXJyb3JJblJUTCIpfX10aGlzLndyaXRlKHMpO2lmKHEuaXNBcnJheShDKSYmQy5sZW5ndGgpe2I9Qy5qb2luKCIgIik7dGhpcy53cml0ZSgiY2xhc3M9XCIiK2IrIlwiICIpfWlmKGkpe2lmKCFhKXthPXt9fWlmKCFUKXthWyJkYXRhLXNhcC11aS1pY29uLWNvbnRlbnQiXT1vLmNvbnRlbnR9dGhpcy53cml0ZSgic3R5bGU9XCJmb250LWZhbWlseTogIitvLmZvbnRGYW1pbHkrIjtcIiAiKX1lbHNle2E9cS5leHRlbmQoe3JvbGU6InByZXNlbnRhdGlvbiIsYWx0OiIiLHNyYzp1fSxhKX1pZih0eXBlb2YgYT09PSJvYmplY3QiKXtmb3IocCBpbiBhKXtpZihhLmhhc093blByb3BlcnR5KHApKXt0aGlzLndyaXRlQXR0cmlidXRlRXNjYXBlZChwLGFbcF0pfX19dGhpcy53cml0ZShpPyI+IjoiLz4iKTtpZihpKXtUJiZ0aGlzLndyaXRlKG8uY29udGVudCk7dGhpcy53cml0ZSgiPC9zcGFuPiIpfX07cmV0dXJuIFJ9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS5SZXNpemVIYW5kbGVyJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUuUmVzaXplSGFuZGxlcicpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL1Jlc2l6ZUhhbmRsZXIiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvR2xvYmFsJywnc2FwL3VpL2Jhc2UvT2JqZWN0JywnanF1ZXJ5LnNhcC5hY3QnLCdqcXVlcnkuc2FwLnNjcmlwdCddLGZ1bmN0aW9uKHEsRyxCKXsidXNlIHN0cmljdCI7dmFyIGw9cS5zYXAubG9nLmdldExvZ2dlcigic2FwLnVpLmNvcmUuUmVzaXplSGFuZGxlciIscS5zYXAubG9nLkxldmVsLkVSUk9SKTt2YXIgYz1udWxsO3ZhciBSPUIuZXh0ZW5kKCJzYXAudWkuY29yZS5SZXNpemVIYW5kbGVyIix7Y29uc3RydWN0b3I6ZnVuY3Rpb24oQyl7Qi5hcHBseSh0aGlzKTtjPUM7dGhpcy5hUmVzaXplTGlzdGVuZXJzPVtdO3RoaXMuYlJlZ2lzdGVyZWQ9ZmFsc2U7dGhpcy5pSWRDb3VudGVyPTA7dGhpcy5mRGVzdHJveUhhbmRsZXI9cS5wcm94eSh0aGlzLmRlc3Ryb3ksdGhpcyk7cSh3aW5kb3cpLmJpbmQoInVubG9hZCIsdGhpcy5mRGVzdHJveUhhbmRsZXIpO3Euc2FwLmFjdC5hdHRhY2hBY3RpdmF0ZShpLHRoaXMpfX0pO2Z1bmN0aW9uIGEoKXtpZih0aGlzLmJSZWdpc3RlcmVkKXt0aGlzLmJSZWdpc3RlcmVkPWZhbHNlO3NhcC51aS5nZXRDb3JlKCkuZGV0YWNoSW50ZXJ2YWxUaW1lcih0aGlzLmNoZWNrU2l6ZXMsdGhpcyl9fTtmdW5jdGlvbiBpKCl7aWYoIXRoaXMuYlJlZ2lzdGVyZWQmJnRoaXMuYVJlc2l6ZUxpc3RlbmVycy5sZW5ndGg+MCl7dGhpcy5iUmVnaXN0ZXJlZD10cnVlO3NhcC51aS5nZXRDb3JlKCkuYXR0YWNoSW50ZXJ2YWxUaW1lcih0aGlzLmNoZWNrU2l6ZXMsdGhpcyl9fTtSLnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKGUpe3Euc2FwLmFjdC5kZXRhY2hBY3RpdmF0ZShpLHRoaXMpO3Eod2luZG93KS51bmJpbmQoInVubG9hZCIsdGhpcy5mRGVzdHJveUhhbmRsZXIpO2M9bnVsbDt0aGlzLmFSZXNpemVMaXN0ZW5lcnM9W107YS5hcHBseSh0aGlzKX07Ui5wcm90b3R5cGUuYXR0YWNoTGlzdGVuZXI9ZnVuY3Rpb24ocixoKXt2YXIgST1yIGluc3RhbmNlb2Ygc2FwLnVpLmNvcmUuQ29udHJvbCxkPUk/ci5nZXREb21SZWYoKTpyLHc9ZD9kLm9mZnNldFdpZHRoOjAsSD1kP2Qub2Zmc2V0SGVpZ2h0OjAscz0icnMtIituZXcgRGF0ZSgpLnZhbHVlT2YoKSsiLSIrdGhpcy5pSWRDb3VudGVyKyssYj0oST8oIkNvbnRyb2wgIityLmdldElkKCkpOihyLmlkP3IuaWQ6U3RyaW5nKHIpKSk7dGhpcy5hUmVzaXplTGlzdGVuZXJzLnB1c2goe3NJZDpzLG9Eb21SZWY6ST9udWxsOnIsb0NvbnRyb2w6ST9yOm51bGwsZkhhbmRsZXI6aCxpV2lkdGg6dyxpSGVpZ2h0OkgsZGJnOmJ9KTtsLmRlYnVnKCJyZWdpc3RlcmVkICIrYik7aS5hcHBseSh0aGlzKTtyZXR1cm4gc307Ui5wcm90b3R5cGUuZGV0YWNoTGlzdGVuZXI9ZnVuY3Rpb24oSSl7dmFyIHQ9dGhpcztxLmVhY2godGhpcy5hUmVzaXplTGlzdGVuZXJzLGZ1bmN0aW9uKGIscil7aWYoci5zSWQ9PUkpe3QuYVJlc2l6ZUxpc3RlbmVycy5zcGxpY2UoYiwxKTtsLmRlYnVnKCJkZXJlZ2lzdGVyZWQgIitJKTtyZXR1cm4gZmFsc2V9fSk7aWYodGhpcy5hUmVzaXplTGlzdGVuZXJzLmxlbmd0aD09MCl7YS5hcHBseSh0aGlzKX19O1IucHJvdG90eXBlLmNoZWNrU2l6ZXM9ZnVuY3Rpb24oKXt2YXIgZD1sLmlzTG9nZ2FibGUoKTtpZihkKXtsLmRlYnVnKCJjaGVja1NpemVzOiIpfXEuZWFjaCh0aGlzLmFSZXNpemVMaXN0ZW5lcnMsZnVuY3Rpb24oYixyKXtpZihyKXt2YXIgQz0hIXIub0NvbnRyb2wsRD1DP3Iub0NvbnRyb2wuZ2V0RG9tUmVmKCk6ci5vRG9tUmVmO2lmKEQmJnEuY29udGFpbnMoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LEQpKXt2YXIgbz1yLmlXaWR0aCxPPXIuaUhlaWdodCxuPUQub2Zmc2V0V2lkdGgsTj1ELm9mZnNldEhlaWdodDtpZihvIT1ufHxPIT1OKXtyLmlXaWR0aD1uO3IuaUhlaWdodD1OO3ZhciBlPXEuRXZlbnQoInJlc2l6ZSIpO2UudGFyZ2V0PUQ7ZS5jdXJyZW50VGFyZ2V0PUQ7ZS5zaXplPXt3aWR0aDpuLGhlaWdodDpOfTtlLm9sZFNpemU9e3dpZHRoOm8saGVpZ2h0Ok99O2UuY29udHJvbD1DP3Iub0NvbnRyb2w6bnVsbDtpZihkKXtsLmRlYnVnKCJyZXNpemUgZGV0ZWN0ZWQgZm9yICciK3IuZGJnKyInOiAiK2Uub2xkU2l6ZS53aWR0aCsieCIrZS5vbGRTaXplLmhlaWdodCsiIC0+ICIrZS5zaXplLndpZHRoKyJ4IitlLnNpemUuaGVpZ2h0KX1yLmZIYW5kbGVyKGUpfX19fSk7aWYoUi5fa2VlcEFjdGl2ZSE9dHJ1ZSYmUi5fa2VlcEFjdGl2ZSE9ZmFsc2Upe1IuX2tlZXBBY3RpdmU9ZmFsc2V9aWYoIXEuc2FwLmFjdC5pc0FjdGl2ZSgpJiYhUi5fa2VlcEFjdGl2ZSl7YS5hcHBseSh0aGlzKX19O1IucmVnaXN0ZXI9ZnVuY3Rpb24ocixoKXtpZighY3x8IWMub1Jlc2l6ZUhhbmRsZXIpe3JldHVybiBudWxsfXJldHVybiBjLm9SZXNpemVIYW5kbGVyLmF0dGFjaExpc3RlbmVyKHIsaCl9O1IuZGVyZWdpc3Rlcj1mdW5jdGlvbihJKXtpZighY3x8IWMub1Jlc2l6ZUhhbmRsZXIpe3JldHVybn1jLm9SZXNpemVIYW5kbGVyLmRldGFjaExpc3RlbmVyKEkpfTtSLmRlcmVnaXN0ZXJBbGxGb3JDb250cm9sPWZ1bmN0aW9uKEMpe2lmKCFjfHwhYy5vUmVzaXplSGFuZGxlcil7cmV0dXJufXZhciBJPVtdO3EuZWFjaChjLm9SZXNpemVIYW5kbGVyLmFSZXNpemVMaXN0ZW5lcnMsZnVuY3Rpb24oYixyKXtpZihyJiZyLm9Db250cm9sJiZyLm9Db250cm9sLmdldElkKCk9PT1DKXtJLnB1c2goci5zSWQpfX0pO3EuZWFjaChJLGZ1bmN0aW9uKGIscyl7Ui5kZXJlZ2lzdGVyKHMpfSl9O3JldHVybiBSfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUuVUlDb21wb25lbnRNZXRhZGF0YScpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLlVJQ29tcG9uZW50TWV0YWRhdGEnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9VSUNvbXBvbmVudE1ldGFkYXRhIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnLi9Db21wb25lbnRNZXRhZGF0YSddLGZ1bmN0aW9uKHEsQyl7InVzZSBzdHJpY3QiO3ZhciBVPWZ1bmN0aW9uKGMsbyl7Qy5hcHBseSh0aGlzLGFyZ3VtZW50cyl9O1UucHJvdG90eXBlPXEuc2FwLm5ld09iamVjdChDLnByb3RvdHlwZSk7VS5wcmVwcm9jZXNzQ2xhc3NJbmZvPWZ1bmN0aW9uKGMpe2lmKGMmJnR5cGVvZiBjLm1ldGFkYXRhPT09InN0cmluZyIpe2MubWV0YWRhdGE9e19zcmM6Yy5tZXRhZGF0YX19cmV0dXJuIGN9O1UucHJvdG90eXBlLmFwcGx5U2V0dGluZ3M9ZnVuY3Rpb24oYyl7Qy5wcm90b3R5cGUuYXBwbHlTZXR0aW5ncy5jYWxsKHRoaXMsYyk7dmFyIHM9Yy5tZXRhZGF0YTt0aGlzLl9tUm9vdFZpZXc9cy5yb290VmlldztpZih0eXBlb2YgdGhpcy5fbVJvb3RWaWV3PT09InN0cmluZyIpe3RoaXMuX21Sb290Vmlldz17dmlld05hbWU6dGhpcy5fbVJvb3RWaWV3LHR5cGU6c2FwLnVpLmNvcmUubXZjLlZpZXdUeXBlLlhNTH19dGhpcy5fbVJvdXRpbmc9cy5yb3V0aW5nO3ZhciBwPXRoaXMuZ2V0UGFyZW50KCk7aWYocCBpbnN0YW5jZW9mIFUpe2lmKHAuX21Sb290Vmlldyl7dGhpcy5fbVJvb3RWaWV3PXEuZXh0ZW5kKHRydWUse30scC5fbVJvb3RWaWV3LHRoaXMuX21Sb290Vmlldyl9dGhpcy5fbVJvdXRpbmc9cS5leHRlbmQodHJ1ZSx7fSxwLl9tUm91dGluZyx0aGlzLl9tUm91dGluZyl9fTtVLnByb3RvdHlwZS5nZXRSb290Vmlldz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9tUm9vdFZpZXd9O1UucHJvdG90eXBlLmdldFJvdXRpbmdDb25maWc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbVJvdXRpbmcmJnRoaXMuX21Sb3V0aW5nLmNvbmZpZ307VS5wcm90b3R5cGUuZ2V0Um91dGVzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21Sb3V0aW5nJiZ0aGlzLl9tUm91dGluZy5yb3V0ZXN9O3JldHVybiBVfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUuZGVsZWdhdGUuSXRlbU5hdmlnYXRpb24nKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS5kZWxlZ2F0ZS5JdGVtTmF2aWdhdGlvbicpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL2RlbGVnYXRlL0l0ZW1OYXZpZ2F0aW9uIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL2Jhc2UvRXZlbnRQcm92aWRlciddLGZ1bmN0aW9uKHEsRSl7InVzZSBzdHJpY3QiO3ZhciBJPUUuZXh0ZW5kKCJzYXAudWkuY29yZS5kZWxlZ2F0ZS5JdGVtTmF2aWdhdGlvbiIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKGQsaSxuKXtFLmFwcGx5KHRoaXMpO3RoaXMub0RvbVJlZj1udWxsO2lmKGQpe3RoaXMuc2V0Um9vdERvbVJlZihkKX10aGlzLmFJdGVtRG9tUmVmcz1bXTtpZihpKXt0aGlzLnNldEl0ZW1Eb21SZWZzKGkpfXRoaXMuaVRhYkluZGV4PS0xO3RoaXMuaUFjdGl2ZVRhYkluZGV4PSEhbj8tMTowO3RoaXMuaUZvY3VzZWRJbmRleD0tMTt0aGlzLmlTZWxlY3RlZEluZGV4PS0xO3RoaXMuYkN5Y2xpbmc9dHJ1ZTt0aGlzLmJUYWJsZU1vZGU9ZmFsc2U7dGhpcy5pUGFnZVNpemU9LTE7dGhpcy5fYk1vdXNlRG93bkhhcHBlbmVkPWZhbHNlO3RoaXMub0Rpc2FibGVkTW9kaWZpZXJzPXtzYXBlbmQ6WyJhbHQiLCJzaGlmdCJdLHNhcGhvbWU6WyJhbHQiLCJzaGlmdCJdfX19KTtJLkV2ZW50cz17QmVmb3JlRm9jdXM6IkJlZm9yZUZvY3VzIixBZnRlckZvY3VzOiJBZnRlckZvY3VzIixCb3JkZXJSZWFjaGVkOiJCb3JkZXJSZWFjaGVkIixGb2N1c0FnYWluOiJGb2N1c0FnYWluIn07SS5wcm90b3R5cGUuc2V0RGlzYWJsZWRNb2RpZmllcnM9ZnVuY3Rpb24oZCl7dGhpcy5vRGlzYWJsZWRNb2RpZmllcnM9ZDtyZXR1cm4gdGhpc307SS5wcm90b3R5cGUuZ2V0RGlzYWJsZWRNb2RpZmllcnM9ZnVuY3Rpb24oZCl7cmV0dXJuIHRoaXMub0Rpc2FibGVkTW9kaWZpZXJzfTtJLnByb3RvdHlwZS5oYXNEaXNhYmxlZE1vZGlmaWVyPWZ1bmN0aW9uKGUpe3ZhciBkPXRoaXMub0Rpc2FibGVkTW9kaWZpZXJzW2UudHlwZS5yZXBsYWNlKCJtb2RpZmllcnMiLCIiKV07aWYocS5pc0FycmF5KGQpKXtmb3IodmFyIGk9MDtpPGQubGVuZ3RoO2krKyl7aWYoZVtkW2ldKyJLZXkiXSl7cmV0dXJuIHRydWV9fX1yZXR1cm4gZmFsc2V9O0kucHJvdG90eXBlLnNldFJvb3REb21SZWY9ZnVuY3Rpb24oZCl7dGhpcy5vRG9tUmVmPWQ7aWYoIXEodGhpcy5vRG9tUmVmKS5kYXRhKCJzYXAuSU5JdGVtIikpe2lmKHRoaXMuaUZvY3VzZWRJbmRleD49MCl7cSh0aGlzLm9Eb21SZWYpLmF0dHIoInRhYkluZGV4Iix0aGlzLmlUYWJJbmRleCl9ZWxzZXtxKHRoaXMub0RvbVJlZikuYXR0cigidGFiSW5kZXgiLHRoaXMuaUFjdGl2ZVRhYkluZGV4KX19cSh0aGlzLm9Eb21SZWYpLmRhdGEoInNhcC5JTlJvb3QiLHRoaXMpO3JldHVybiB0aGlzfTtJLnByb3RvdHlwZS5nZXRSb290RG9tUmVmPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub0RvbVJlZn07SS5wcm90b3R5cGUuZ2V0SXRlbURvbVJlZnM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hSXRlbURvbVJlZnN9O0kucHJvdG90eXBlLnNldEl0ZW1Eb21SZWZzPWZ1bmN0aW9uKGEpe3RoaXMuYUl0ZW1Eb21SZWZzPWE7Zm9yKHZhciBpPTA7aTx0aGlzLmFJdGVtRG9tUmVmcy5sZW5ndGg7aSsrKXtpZih0aGlzLmFJdGVtRG9tUmVmc1tpXSl7dmFyICQ9cSh0aGlzLmFJdGVtRG9tUmVmc1tpXSk7aWYoaT09dGhpcy5pRm9jdXNlZEluZGV4JiYhJC5kYXRhKCJzYXAuSU5Sb290IikpeyQuYXR0cigidGFiSW5kZXgiLHRoaXMuaUFjdGl2ZVRhYkluZGV4KX1lbHNlIGlmKCQuYXR0cigidGFiaW5kZXgiKT09IjAiKXskLmF0dHIoInRhYkluZGV4IiwtMSl9JC5kYXRhKCJzYXAuSU5JdGVtIix0cnVlKTskLmRhdGEoInNhcC5Jbk5hdkFyZWEiLHRydWUpO2lmKCQuZGF0YSgic2FwLklOUm9vdCIpJiZpIT10aGlzLmlGb2N1c2VkSW5kZXgpeyQuZGF0YSgic2FwLklOUm9vdCIpLnNldE5lc3RlZEl0ZW1zVGFiaW5kZXgoKX19fXJldHVybiB0aGlzfTtJLnByb3RvdHlwZS5zZXRJdGVtc1RhYmluZGV4PWZ1bmN0aW9uKCl7Zm9yKHZhciBpPTA7aTx0aGlzLmFJdGVtRG9tUmVmcy5sZW5ndGg7aSsrKXtpZih0aGlzLmFJdGVtRG9tUmVmc1tpXSl7dmFyICQ9cSh0aGlzLmFJdGVtRG9tUmVmc1tpXSk7aWYoJC5pcygiOnNhcEZvY3VzYWJsZSIpKXtpZihpPT10aGlzLmlGb2N1c2VkSW5kZXgmJiEkLmRhdGEoInNhcC5JTlJvb3QiKSl7JC5hdHRyKCJ0YWJJbmRleCIsdGhpcy5pQWN0aXZlVGFiSW5kZXgpfWVsc2V7JC5hdHRyKCJ0YWJJbmRleCIsLTEpfX19fXJldHVybiB0aGlzfTtJLnByb3RvdHlwZS5zZXROZXN0ZWRJdGVtc1RhYmluZGV4PWZ1bmN0aW9uKCl7aWYocSh0aGlzLm9Eb21SZWYpLmRhdGEoInNhcC5JTkl0ZW0iKSl7Zm9yKHZhciBpPTA7aTx0aGlzLmFJdGVtRG9tUmVmcy5sZW5ndGg7aSsrKXtpZih0aGlzLmFJdGVtRG9tUmVmc1tpXSYmcSh0aGlzLmFJdGVtRG9tUmVmc1tpXSkuYXR0cigidGFiaW5kZXgiKT09IjAiKXtxKHRoaXMuYUl0ZW1Eb21SZWZzW2ldKS5hdHRyKCJ0YWJJbmRleCIsLTEpfX19cmV0dXJuIHRoaXN9O0kucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXtpZih0aGlzLm9Eb21SZWYpe3EodGhpcy5vRG9tUmVmKS5yZW1vdmVEYXRhKCJzYXAuSU5Sb290Iik7dGhpcy5vRG9tUmVmPW51bGx9aWYodGhpcy5hSXRlbURvbVJlZnMpe2Zvcih2YXIgaT0wO2k8dGhpcy5hSXRlbURvbVJlZnMubGVuZ3RoO2krKyl7aWYodGhpcy5hSXRlbURvbVJlZnNbaV0pe3EodGhpcy5hSXRlbURvbVJlZnNbaV0pLnJlbW92ZURhdGEoInNhcC5JTkl0ZW0iKTtxKHRoaXMuYUl0ZW1Eb21SZWZzW2ldKS5yZW1vdmVEYXRhKCJzYXAuSW5OYXZBcmVhIil9fXRoaXMuYUl0ZW1Eb21SZWZzPW51bGx9dGhpcy5fYkl0ZW1UYWJJbmRleD11bmRlZmluZWR9O0kucHJvdG90eXBlLnNldEN5Y2xpbmc9ZnVuY3Rpb24oYyl7dGhpcy5iQ3ljbGluZz1jO3JldHVybiB0aGlzfTtJLnByb3RvdHlwZS5zZXRUYWJsZU1vZGU9ZnVuY3Rpb24odCxUKXt0aGlzLmJUYWJsZU1vZGU9dDt0aGlzLmJUYWJsZUxpc3Q9dD9UOmZhbHNlO3JldHVybiB0aGlzfTtJLnByb3RvdHlwZS5zZXRQYWdlU2l6ZT1mdW5jdGlvbihwKXt0aGlzLmlQYWdlU2l6ZT1wO3JldHVybiB0aGlzfTtJLnByb3RvdHlwZS5zZXRTZWxlY3RlZEluZGV4PWZ1bmN0aW9uKGkpe3RoaXMuaVNlbGVjdGVkSW5kZXg9aTtyZXR1cm4gdGhpc307SS5wcm90b3R5cGUuc2V0Q29sdW1ucz1mdW5jdGlvbihjLG4pe3RoaXMuaUNvbHVtbnM9Yzt0aGlzLmJOb0NvbHVtbkNoYW5nZT1uO3JldHVybiB0aGlzfTtJLnByb3RvdHlwZS5zZXRIb21lRW5kQ29sdW1uTW9kZT1mdW5jdGlvbihzLGMpe3RoaXMuX2JTdGF5SW5Sb3c9czt0aGlzLl9iQ3RybEVuYWJsZWQ9Y307SS5wcm90b3R5cGUuZm9jdXNJdGVtPWZ1bmN0aW9uKGksZSl7cS5zYXAubG9nLmluZm8oIkZvY3VzSXRlbTogIitpKyIgaUZvY3VzZWRJbmRleDogIit0aGlzLmlGb2N1c2VkSW5kZXgsImZvY3VzSXRlbSIsIkl0ZW1OYXZpZ2F0aW9uIik7aWYoaT09dGhpcy5pRm9jdXNlZEluZGV4JiZ0aGlzLmFJdGVtRG9tUmVmc1t0aGlzLmlGb2N1c2VkSW5kZXhdPT1kb2N1bWVudC5hY3RpdmVFbGVtZW50KXt0aGlzLmZpcmVFdmVudChJLkV2ZW50cy5Gb2N1c0FnYWluLHtpbmRleDppLGV2ZW50OmV9KTtyZXR1cm59aWYoIXRoaXMuYUl0ZW1Eb21SZWZzW2ldfHwhcSh0aGlzLmFJdGVtRG9tUmVmc1tpXSkuaXMoIjpzYXBGb2N1c2FibGUiKSl7aWYodGhpcy5iVGFibGVNb2RlKXt2YXIgYz1pJXRoaXMuaUNvbHVtbnM7aWYoZS5rZXlDb2RlPT1xLnNhcC5LZXlDb2Rlcy5BUlJPV19SSUdIVCl7aWYoYzx0aGlzLmlDb2x1bW5zLTEpe2krPTF9fWVsc2V7aWYoYz4xKXtpLT0xfX10aGlzLmZvY3VzSXRlbShpLGUpfXJldHVybn10aGlzLmZpcmVFdmVudChJLkV2ZW50cy5CZWZvcmVGb2N1cyx7aW5kZXg6aSxldmVudDplfSk7dGhpcy5zZXRGb2N1c2VkSW5kZXgoaSk7dGhpcy5iSVNldEZvY3VzPXRydWU7aWYocSh0aGlzLmFJdGVtRG9tUmVmc1t0aGlzLmlGb2N1c2VkSW5kZXhdKS5kYXRhKCJzYXAuSU5Sb290IikmJmUpe3ZhciBvPXEodGhpcy5hSXRlbURvbVJlZnNbdGhpcy5pRm9jdXNlZEluZGV4XSkuZGF0YSgic2FwLklOUm9vdCIpO28uX3NGb2N1c0V2ZW50PWUudHlwZX1xLnNhcC5sb2cuaW5mbygiU2V0IEZvY3VzIG9uIElEOiAiK3RoaXMuYUl0ZW1Eb21SZWZzW3RoaXMuaUZvY3VzZWRJbmRleF0uaWQsImZvY3VzSXRlbSIsIkl0ZW1OYXZpZ2F0aW9uIik7cS5zYXAuZm9jdXModGhpcy5hSXRlbURvbVJlZnNbdGhpcy5pRm9jdXNlZEluZGV4XSk7dGhpcy5maXJlRXZlbnQoSS5FdmVudHMuQWZ0ZXJGb2N1cyx7aW5kZXg6aSxldmVudDplfSl9O0kucHJvdG90eXBlLnNldEZvY3VzZWRJbmRleD1mdW5jdGlvbihpKXt2YXIgJDtpZihpPDApe2k9MH1pZihpPnRoaXMuYUl0ZW1Eb21SZWZzLmxlbmd0aC0xKXtpPXRoaXMuYUl0ZW1Eb21SZWZzLmxlbmd0aC0xfXEodGhpcy5vRG9tUmVmKS5hdHRyKCJ0YWJJbmRleCIsdGhpcy5pVGFiSW5kZXgpO2lmKHRoaXMuaUZvY3VzZWRJbmRleCE9PS0xJiZ0aGlzLmFJdGVtRG9tUmVmcy5sZW5ndGg+dGhpcy5pRm9jdXNlZEluZGV4KXtxKHRoaXMuYUl0ZW1Eb21SZWZzW3RoaXMuaUZvY3VzZWRJbmRleF0pLmF0dHIoInRhYkluZGV4IiwtMSk7JD1xKHRoaXMuYUl0ZW1Eb21SZWZzW3RoaXMuaUZvY3VzZWRJbmRleF0pO2lmKCQuZGF0YSgic2FwLklOUm9vdCIpJiZpIT10aGlzLmlGb2N1c2VkSW5kZXgpe3EoJC5kYXRhKCJzYXAuSU5Sb290IikuYUl0ZW1Eb21SZWZzWyQuZGF0YSgic2FwLklOUm9vdCIpLmlGb2N1c2VkSW5kZXhdKS5hdHRyKCJ0YWJJbmRleCIsLTEpfX10aGlzLmlGb2N1c2VkSW5kZXg9aTt2YXIgZj10aGlzLmFJdGVtRG9tUmVmc1t0aGlzLmlGb2N1c2VkSW5kZXhdOyQ9cSh0aGlzLmFJdGVtRG9tUmVmc1t0aGlzLmlGb2N1c2VkSW5kZXhdKTtpZighJC5kYXRhKCJzYXAuSU5Sb290Iikpe3EoZikuYXR0cigidGFiSW5kZXgiLHRoaXMuaUFjdGl2ZVRhYkluZGV4KX1yZXR1cm4gdGhpc307SS5wcm90b3R5cGUuZ2V0Rm9jdXNlZERvbVJlZj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmFJdGVtRG9tUmVmc1t0aGlzLmlGb2N1c2VkSW5kZXhdfTtJLnByb3RvdHlwZS5nZXRGb2N1c2VkSW5kZXg9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pRm9jdXNlZEluZGV4fTtJLnByb3RvdHlwZS5vbmZvY3VzaW49ZnVuY3Rpb24oZSl7dmFyIHM9ZS50YXJnZXQ7aWYocz09dGhpcy5vRG9tUmVmKXtpZighdGhpcy5fYkl0ZW1UYWJJbmRleCl7dGhpcy5zZXRJdGVtc1RhYmluZGV4KCk7dGhpcy5fYkl0ZW1UYWJJbmRleD10cnVlfWlmKHRoaXMuX2JNb3VzZURvd25IYXBwZW5lZCl7cmV0dXJufXZhciBhO2lmKHEodGhpcy5vRG9tUmVmKS5kYXRhKCJzYXAuSU5JdGVtIikmJnRoaXMuX3NGb2N1c0V2ZW50JiYhcSh0aGlzLm9Eb21SZWYpLmRhdGEoInNhcC5Jbk5hdkFyZWEiKSl7c3dpdGNoKHRoaXMuX3NGb2N1c0V2ZW50KXtjYXNlInNhcG5leHQiOmE9MDticmVhaztjYXNlInNhcHByZXZpb3VzIjphPXRoaXMuYUl0ZW1Eb21SZWZzLmxlbmd0aC0xO2JyZWFrO2RlZmF1bHQ6YT10aGlzLmlTZWxlY3RlZEluZGV4IT0tMT90aGlzLmlTZWxlY3RlZEluZGV4Oih0aGlzLmlGb2N1c2VkSW5kZXghPS0xP3RoaXMuaUZvY3VzZWRJbmRleDowKTticmVha310aGlzLl9zRm9jdXNFdmVudD11bmRlZmluZWR9ZWxzZXthPXRoaXMuaVNlbGVjdGVkSW5kZXghPS0xP3RoaXMuaVNlbGVjdGVkSW5kZXg6KHRoaXMuaUZvY3VzZWRJbmRleCE9LTE/dGhpcy5pRm9jdXNlZEluZGV4OjApfXRoaXMuZm9jdXNJdGVtKGEsZSk7aWYodGhpcy5pRm9jdXNlZEluZGV4PT0tMSl7Zm9yKHZhciBpPWErMTtpPHRoaXMuYUl0ZW1Eb21SZWZzLmxlbmd0aDtpKyspe3RoaXMuZm9jdXNJdGVtKGksZSk7aWYodGhpcy5pRm9jdXNlZEluZGV4PT1pKXticmVha319aWYodGhpcy5pRm9jdXNlZEluZGV4PT0tMSYmYT4wKXtmb3IodmFyIGk9YS0xO2k+PTA7aS0tKXt0aGlzLmZvY3VzSXRlbShpLGUpO2lmKHRoaXMuaUZvY3VzZWRJbmRleD09aSl7YnJlYWt9fX19ZS5wcmV2ZW50RGVmYXVsdCgpO2Uuc3RvcFByb3BhZ2F0aW9uKCl9ZWxzZSBpZighdGhpcy5iSVNldEZvY3VzKXtpZih0aGlzLmFJdGVtRG9tUmVmcyYmZS50YXJnZXQhPXRoaXMuYUl0ZW1Eb21SZWZzW3RoaXMuaUZvY3VzZWRJbmRleF0pe2Zvcih2YXIgaT0wO2k8dGhpcy5hSXRlbURvbVJlZnMubGVuZ3RoO2krKyl7aWYoZS50YXJnZXQ9PXRoaXMuYUl0ZW1Eb21SZWZzW2ldKXt0aGlzLmZvY3VzSXRlbShpLGUpO2JyZWFrfX19ZWxzZXt0aGlzLmZpcmVFdmVudChJLkV2ZW50cy5BZnRlckZvY3VzLHtpbmRleDp0aGlzLmlGb2N1c2VkSW5kZXgsZXZlbnQ6ZX0pfX10aGlzLmJJU2V0Rm9jdXM9ZmFsc2V9O0kucHJvdG90eXBlLm9uc2FwZm9jdXNsZWF2ZT1mdW5jdGlvbihlKXtpZighZS5yZWxhdGVkQ29udHJvbElkfHwhcS5zYXAuY29udGFpbnNPckVxdWFscyh0aGlzLm9Eb21SZWYsc2FwLnVpLmdldENvcmUoKS5ieUlkKGUucmVsYXRlZENvbnRyb2xJZCkuZ2V0Rm9jdXNEb21SZWYoKSkpe3RoaXMuc2V0Rm9jdXNlZEluZGV4KHRoaXMuaVNlbGVjdGVkSW5kZXghPS0xP3RoaXMuaVNlbGVjdGVkSW5kZXg6KHRoaXMuaUZvY3VzZWRJbmRleCE9LTE/dGhpcy5pRm9jdXNlZEluZGV4OjApKTtpZihxKHRoaXMub0RvbVJlZikuZGF0YSgic2FwLklOSXRlbSIpKXt2YXIgcCxkPXEodGhpcy5vRG9tUmVmKTt3aGlsZSghcCl7ZD1kLnBhcmVudCgpO2lmKGQuZGF0YSgic2FwLklOUm9vdCIpKXtwPWQuZ2V0KDApfX1pZighZS5yZWxhdGVkQ29udHJvbElkfHxxLnNhcC5jb250YWluc09yRXF1YWxzKHAsc2FwLnVpLmdldENvcmUoKS5ieUlkKGUucmVsYXRlZENvbnRyb2xJZCkuZ2V0Rm9jdXNEb21SZWYoKSkpe3EodGhpcy5hSXRlbURvbVJlZnNbdGhpcy5pRm9jdXNlZEluZGV4XSkuYXR0cigidGFiSW5kZXgiLC0xKX19dmFyIGQ9cSh0aGlzLm9Eb21SZWYpO2lmKGQuZGF0YSgic2FwLkluTmF2QXJlYSIpPT09ZmFsc2Upe2QuZGF0YSgic2FwLkluTmF2QXJlYSIsdHJ1ZSl9fX07SS5wcm90b3R5cGUub25tb3VzZWRvd249ZnVuY3Rpb24oZSl7dmFyIHM9ZS50YXJnZXQ7aWYocS5zYXAuY29udGFpbnNPckVxdWFscyh0aGlzLm9Eb21SZWYscykpe2Zvcih2YXIgaT0wO2k8dGhpcy5hSXRlbURvbVJlZnMubGVuZ3RoO2krKyl7dmFyIG89dGhpcy5hSXRlbURvbVJlZnNbaV07aWYocS5zYXAuY29udGFpbnNPckVxdWFscyhvLHMpKXtpZighdGhpcy5iVGFibGVNb2RlKXt0aGlzLmZvY3VzSXRlbShpLGUpfWVsc2V7aWYobz09PXN8fCFxKHMpLmlzKCI6c2FwRm9jdXNhYmxlIikpe3RoaXMuZm9jdXNJdGVtKGksZSl9fXJldHVybn19aWYocz09dGhpcy5vRG9tUmVmKXt0aGlzLl9iTW91c2VEb3duSGFwcGVuZWQ9dHJ1ZTt2YXIgdD10aGlzO3dpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dC5fYk1vdXNlRG93bkhhcHBlbmVkPWZhbHNlfSwyMCl9fX07SS5wcm90b3R5cGUub25zYXBuZXh0PWZ1bmN0aW9uKGUpe2lmKCFxLnNhcC5jb250YWluc09yRXF1YWxzKHRoaXMub0RvbVJlZixlLnRhcmdldCkpe3JldHVybn1pZihxKHRoaXMub0RvbVJlZikuZGF0YSgic2FwLkluTmF2QXJlYSIpKXtyZXR1cm59aWYodGhpcy5iVGFibGVNb2RlJiZxLmluQXJyYXkoZS50YXJnZXQsdGhpcy5hSXRlbURvbVJlZnMpPT09LTEpe3JldHVybn12YXIgaT10aGlzLmlGb2N1c2VkSW5kZXgsZj10cnVlLGI9ZmFsc2U7aWYoaT4tMSl7aWYodGhpcy5iVGFibGVNb2RlKXt2YXIgcj10aGlzLmFJdGVtRG9tUmVmcy5sZW5ndGgvdGhpcy5pQ29sdW1ucyxSPU1hdGguZmxvb3IoaS90aGlzLmlDb2x1bW5zKSxjPWkldGhpcy5pQ29sdW1ucztpZihlLmtleUNvZGU9PXEuc2FwLktleUNvZGVzLkFSUk9XX0RPV04pe2lmKFI8ci0xKXtpKz10aGlzLmlDb2x1bW5zfX1lbHNle2lmKGM8dGhpcy5pQ29sdW1ucy0xKXtpKz0xfX19ZWxzZXtkb3tpZih0aGlzLmlDb2x1bW5zPjEmJmUua2V5Q29kZT09cS5zYXAuS2V5Q29kZXMuQVJST1dfRE9XTil7aWYoKGkrdGhpcy5pQ29sdW1ucyk+PXRoaXMuYUl0ZW1Eb21SZWZzLmxlbmd0aCl7aWYoIXRoaXMuYk5vQ29sdW1uQ2hhbmdlKXtpZigoaSV0aGlzLmlDb2x1bW5zKTwodGhpcy5pQ29sdW1ucy0xKSl7aT0oaSV0aGlzLmlDb2x1bW5zKSsxfWVsc2UgaWYodGhpcy5iQ3ljbGluZyl7aT0wfX1lbHNle2k9dGhpcy5pRm9jdXNlZEluZGV4O2I9dHJ1ZX19ZWxzZXtpPWkrdGhpcy5pQ29sdW1uc319ZWxzZXtpZihpPT10aGlzLmFJdGVtRG9tUmVmcy5sZW5ndGgtMSl7aWYocSh0aGlzLm9Eb21SZWYpLmRhdGEoInNhcC5JTkl0ZW0iKSl7cmV0dXJufWVsc2UgaWYodGhpcy5iQ3ljbGluZyl7aT0wfWVsc2V7aT10aGlzLmlGb2N1c2VkSW5kZXg7Yj10cnVlfX1lbHNle2krK319aWYoaT09PXRoaXMuaUZvY3VzZWRJbmRleCl7aWYoZil7Zj1mYWxzZX1lbHNle3Rocm93IG5ldyBFcnJvcigiSXRlbU5hdmlnYXRpb24gaGFzIG5vIHZpc2libGUvZXhpc3RpbmcgaXRlbXMgYW5kIGlzIGhlbmNlIHVuYWJsZSB0byBzZWxlY3QgdGhlIG5leHQgb25lIil9fX13aGlsZSghdGhpcy5hSXRlbURvbVJlZnNbaV18fCFxKHRoaXMuYUl0ZW1Eb21SZWZzW2ldKS5pcygiOnZpc2libGUiKXx8cSh0aGlzLmFJdGVtRG9tUmVmc1tpXSkuY3NzKCJ2aXNpYmlsaXR5Iik9PT0iaGlkZGVuInx8IXEodGhpcy5hSXRlbURvbVJlZnNbaV0pLmlzKCI6c2FwRm9jdXNhYmxlIikpfXRoaXMuZm9jdXNJdGVtKGksZSk7aWYoYil7dGhpcy5maXJlRXZlbnQoSS5FdmVudHMuQm9yZGVyUmVhY2hlZCx7aW5kZXg6aSxldmVudDplfSl9ZS5wcmV2ZW50RGVmYXVsdCgpO2Uuc3RvcFByb3BhZ2F0aW9uKCl9fTtJLnByb3RvdHlwZS5vbnNhcG5leHRtb2RpZmllcnM9ZnVuY3Rpb24oZSl7aWYodGhpcy5oYXNEaXNhYmxlZE1vZGlmaWVyKGUpKXtyZXR1cm59dGhpcy5vbnNhcG5leHQoZSl9O0kucHJvdG90eXBlLm9uc2FwcHJldmlvdXM9ZnVuY3Rpb24oZSl7aWYoIXEuc2FwLmNvbnRhaW5zT3JFcXVhbHModGhpcy5vRG9tUmVmLGUudGFyZ2V0KSl7cmV0dXJufWlmKHEodGhpcy5vRG9tUmVmKS5kYXRhKCJzYXAuSW5OYXZBcmVhIikpe3JldHVybn1pZih0aGlzLmJUYWJsZU1vZGUmJnEuaW5BcnJheShlLnRhcmdldCx0aGlzLmFJdGVtRG9tUmVmcyk9PT0tMSl7cmV0dXJufXZhciBpPXRoaXMuaUZvY3VzZWRJbmRleCxmPXRydWUsYj1mYWxzZTtpZihpPi0xKXtpZih0aGlzLmJUYWJsZU1vZGUpe3ZhciByPXRoaXMuYUl0ZW1Eb21SZWZzLmxlbmd0aC90aGlzLmlDb2x1bW5zLFI9TWF0aC5mbG9vcihpL3RoaXMuaUNvbHVtbnMpLGM9aSV0aGlzLmlDb2x1bW5zO2lmKGUua2V5Q29kZT09cS5zYXAuS2V5Q29kZXMuQVJST1dfVVApe2lmKFI+MCl7aS09dGhpcy5pQ29sdW1uc319ZWxzZXtpZihjPjApe2ktPTF9fX1lbHNle2Rve2lmKHRoaXMuaUNvbHVtbnM+MSYmZS5rZXlDb2RlPT1xLnNhcC5LZXlDb2Rlcy5BUlJPV19VUCl7aWYoKGktdGhpcy5pQ29sdW1ucyk8MCl7aWYoIXRoaXMuYk5vQ29sdW1uQ2hhbmdlKXt2YXIgYz0wO2lmKChpJXRoaXMuaUNvbHVtbnMpPjApe2M9KGkldGhpcy5pQ29sdW1ucyktMX1lbHNlIGlmKHRoaXMuYkN5Y2xpbmcpe2M9dGhpcy5pQ29sdW1ucy0xfWlmKGk9PT0wJiZjPT09MCl7aT0wfWVsc2V7dmFyIGE9TWF0aC5jZWlsKHRoaXMuYUl0ZW1Eb21SZWZzLmxlbmd0aC90aGlzLmlDb2x1bW5zKTtpPWMrKChhLTEpKnRoaXMuaUNvbHVtbnMpO2lmKGk+PXRoaXMuYUl0ZW1Eb21SZWZzLmxlbmd0aCl7aT1pLXRoaXMuaUNvbHVtbnN9fX1lbHNle2k9dGhpcy5pRm9jdXNlZEluZGV4O2I9dHJ1ZX19ZWxzZXtpPWktdGhpcy5pQ29sdW1uc319ZWxzZXtpZihpPT0wKXtpZihxKHRoaXMub0RvbVJlZikuZGF0YSgic2FwLklOSXRlbSIpKXtyZXR1cm59ZWxzZSBpZih0aGlzLmJDeWNsaW5nKXtpPXRoaXMuYUl0ZW1Eb21SZWZzLmxlbmd0aC0xfWVsc2V7aT10aGlzLmlGb2N1c2VkSW5kZXg7Yj10cnVlfX1lbHNle2ktLX19aWYoaT09dGhpcy5pRm9jdXNlZEluZGV4KXtpZihmKXtmPWZhbHNlfWVsc2V7dGhyb3cgbmV3IEVycm9yKCJJdGVtTmF2aWdhdGlvbiBoYXMgbm8gdmlzaWJsZS9leGlzdGluZyBpdGVtcyBhbmQgaXMgaGVuY2UgdW5hYmxlIHRvIHNlbGVjdCB0aGUgcHJldmlvdXMgb25lIil9fX13aGlsZSghdGhpcy5hSXRlbURvbVJlZnNbaV18fCFxKHRoaXMuYUl0ZW1Eb21SZWZzW2ldKS5pcygiOnZpc2libGUiKXx8cSh0aGlzLmFJdGVtRG9tUmVmc1tpXSkuY3NzKCJ2aXNpYmlsaXR5Iik9PT0iaGlkZGVuInx8IXEodGhpcy5hSXRlbURvbVJlZnNbaV0pLmlzKCI6c2FwRm9jdXNhYmxlIikpfXRoaXMuZm9jdXNJdGVtKGksZSk7aWYoYil7dGhpcy5maXJlRXZlbnQoSS5FdmVudHMuQm9yZGVyUmVhY2hlZCx7aW5kZXg6aSxldmVudDplfSl9ZS5wcmV2ZW50RGVmYXVsdCgpO2Uuc3RvcFByb3BhZ2F0aW9uKCl9fTtJLnByb3RvdHlwZS5vbnNhcHByZXZpb3VzbW9kaWZpZXJzPWZ1bmN0aW9uKGUpe2lmKHRoaXMuaGFzRGlzYWJsZWRNb2RpZmllcihlKSl7cmV0dXJufXRoaXMub25zYXBwcmV2aW91cyhlKX07SS5wcm90b3R5cGUub25zYXBwYWdldXA9ZnVuY3Rpb24oZSl7aWYoIXEuc2FwLmNvbnRhaW5zT3JFcXVhbHModGhpcy5vRG9tUmVmLGUudGFyZ2V0KSl7cmV0dXJufWlmKHRoaXMuYlRhYmxlTW9kZSYmcS5pbkFycmF5KGUudGFyZ2V0LHRoaXMuYUl0ZW1Eb21SZWZzKT09PS0xKXtyZXR1cm59dmFyIGk9MDt2YXIgYj1mYWxzZTtpZih0aGlzLmlQYWdlU2l6ZT4wKXtpPXRoaXMuaUZvY3VzZWRJbmRleDtpZihpPi0xKXtpPWktdGhpcy5pUGFnZVNpemU7d2hpbGUoaT4wJiYhcSh0aGlzLmFJdGVtRG9tUmVmc1tpXSkuaXMoIjpzYXBGb2N1c2FibGUiKSl7aS0tfWlmKGk8MCl7aWYoIXRoaXMuYk5vQ29sdW1uQ2hhbmdlKXtpPTB9ZWxzZXtpPXRoaXMuaUZvY3VzZWRJbmRleDtiPXRydWV9fXRoaXMuZm9jdXNJdGVtKGksZSl9fWVsc2UgaWYodGhpcy5iVGFibGVNb2RlKXtpPXRoaXMuaUZvY3VzZWRJbmRleCV0aGlzLmlDb2x1bW5zO3RoaXMuZm9jdXNJdGVtKGksZSl9aWYoYil7dGhpcy5maXJlRXZlbnQoSS5FdmVudHMuQm9yZGVyUmVhY2hlZCx7aW5kZXg6aSxldmVudDplfSl9ZS5wcmV2ZW50RGVmYXVsdCgpO2Uuc3RvcFByb3BhZ2F0aW9uKCl9O0kucHJvdG90eXBlLm9uc2FwcGFnZWRvd249ZnVuY3Rpb24oZSl7aWYoIXEuc2FwLmNvbnRhaW5zT3JFcXVhbHModGhpcy5vRG9tUmVmLGUudGFyZ2V0KSl7cmV0dXJufWlmKHRoaXMuYlRhYmxlTW9kZSYmcS5pbkFycmF5KGUudGFyZ2V0LHRoaXMuYUl0ZW1Eb21SZWZzKT09PS0xKXtyZXR1cm59dmFyIGk9MDt2YXIgYj1mYWxzZTtpZih0aGlzLmlQYWdlU2l6ZT4wKXtpPXRoaXMuaUZvY3VzZWRJbmRleDtpZihpPi0xKXtpPWkrdGhpcy5pUGFnZVNpemU7d2hpbGUoaTx0aGlzLmFJdGVtRG9tUmVmcy5sZW5ndGgtMSYmIXEodGhpcy5hSXRlbURvbVJlZnNbaV0pLmlzKCI6c2FwRm9jdXNhYmxlIikpe2krK31pZihpPnRoaXMuYUl0ZW1Eb21SZWZzLmxlbmd0aC0xKXtpZighdGhpcy5iTm9Db2x1bW5DaGFuZ2Upe2k9dGhpcy5hSXRlbURvbVJlZnMubGVuZ3RoLTF9ZWxzZXtpPXRoaXMuaUZvY3VzZWRJbmRleDtiPXRydWV9fXRoaXMuZm9jdXNJdGVtKGksZSl9fWVsc2UgaWYodGhpcy5iVGFibGVNb2RlKXt2YXIgcj10aGlzLmFJdGVtRG9tUmVmcy5sZW5ndGgvdGhpcy5pQ29sdW1ucyxjPXRoaXMuaUZvY3VzZWRJbmRleCV0aGlzLmlDb2x1bW5zO2k9KHItMSkqdGhpcy5pQ29sdW1ucytjO3RoaXMuZm9jdXNJdGVtKGksZSl9aWYoYil7dGhpcy5maXJlRXZlbnQoSS5FdmVudHMuQm9yZGVyUmVhY2hlZCx7aW5kZXg6aSxldmVudDplfSl9ZS5wcmV2ZW50RGVmYXVsdCgpO2Uuc3RvcFByb3BhZ2F0aW9uKCl9O0kucHJvdG90eXBlLm9uc2FwaG9tZT1mdW5jdGlvbihlKXtpZighcS5zYXAuY29udGFpbnNPckVxdWFscyh0aGlzLm9Eb21SZWYsZS50YXJnZXQpKXtyZXR1cm59aWYodGhpcy5iVGFibGVNb2RlJiZxLmluQXJyYXkoZS50YXJnZXQsdGhpcy5hSXRlbURvbVJlZnMpPT09LTEpe3JldHVybn12YXIgaT0wO2lmKHRoaXMuYlRhYmxlTW9kZSl7aWYoIXRoaXMuYlRhYmxlTGlzdCYmIShlLm1ldGFLZXl8fGUuY3RybEtleSkpe3ZhciByPU1hdGguZmxvb3IodGhpcy5pRm9jdXNlZEluZGV4L3RoaXMuaUNvbHVtbnMpO2k9cip0aGlzLmlDb2x1bW5zfX1lbHNle2lmKCEhKGUubWV0YUtleXx8ZS5jdHJsS2V5KSYmIXRoaXMuX2JDdHJsRW5hYmxlZCl7cmV0dXJufWlmKHRoaXMuX2JTdGF5SW5Sb3cmJiEodGhpcy5fYkN0cmxFbmFibGVkJiYoZS5tZXRhS2V5fHxlLmN0cmxLZXkpKSYmdGhpcy5pQ29sdW1ucz4wKXt2YXIgcj1NYXRoLmZsb29yKHRoaXMuaUZvY3VzZWRJbmRleC90aGlzLmlDb2x1bW5zKTtpPXIqdGhpcy5pQ29sdW1uc31lbHNle3doaWxlKCF0aGlzLmFJdGVtRG9tUmVmc1tpXXx8IXEodGhpcy5hSXRlbURvbVJlZnNbaV0pLmlzKCI6dmlzaWJsZSIpfHxxKHRoaXMuYUl0ZW1Eb21SZWZzW2ldKS5jc3MoInZpc2liaWxpdHkiKT09PSJoaWRkZW4ifHwhcSh0aGlzLmFJdGVtRG9tUmVmc1tpXSkuaXMoIjpzYXBGb2N1c2FibGUiKSl7aSsrO2lmKGk9PXRoaXMuYUl0ZW1Eb21SZWZzLmxlbmd0aCl7cmV0dXJufX19fXRoaXMuZm9jdXNJdGVtKGksZSk7ZS5wcmV2ZW50RGVmYXVsdCgpO2Uuc3RvcFByb3BhZ2F0aW9uKCl9O0kucHJvdG90eXBlLm9uc2FwaG9tZW1vZGlmaWVycz1mdW5jdGlvbihlKXtpZih0aGlzLmhhc0Rpc2FibGVkTW9kaWZpZXIoZSkpe3JldHVybn10aGlzLm9uc2FwaG9tZShlKX07SS5wcm90b3R5cGUub25zYXBlbmQ9ZnVuY3Rpb24oZSl7aWYoIXEuc2FwLmNvbnRhaW5zT3JFcXVhbHModGhpcy5vRG9tUmVmLGUudGFyZ2V0KSl7cmV0dXJufWlmKHRoaXMuYlRhYmxlTW9kZSYmcS5pbkFycmF5KGUudGFyZ2V0LHRoaXMuYUl0ZW1Eb21SZWZzKT09PS0xKXtyZXR1cm59dmFyIGk9dGhpcy5hSXRlbURvbVJlZnMubGVuZ3RoLTE7aWYodGhpcy5iVGFibGVNb2RlKXtpZighdGhpcy5iVGFibGVMaXN0JiYhKGUubWV0YUtleXx8ZS5jdHJsS2V5KSl7dmFyIHI9TWF0aC5mbG9vcih0aGlzLmlGb2N1c2VkSW5kZXgvdGhpcy5pQ29sdW1ucyk7aT1yKnRoaXMuaUNvbHVtbnMrdGhpcy5pQ29sdW1ucy0xfX1lbHNle2lmKCEhKGUubWV0YUtleXx8ZS5jdHJsS2V5KSYmIXRoaXMuX2JDdHJsRW5hYmxlZCl7cmV0dXJufWlmKHRoaXMuX2JTdGF5SW5Sb3cmJiEodGhpcy5fYkN0cmxFbmFibGVkJiYoZS5tZXRhS2V5fHxlLmN0cmxLZXkpKSYmdGhpcy5pQ29sdW1ucz4wKXt2YXIgcj1NYXRoLmZsb29yKHRoaXMuaUZvY3VzZWRJbmRleC90aGlzLmlDb2x1bW5zKTtpPShyKzEpKnRoaXMuaUNvbHVtbnMtMTtpZihpPj10aGlzLmFJdGVtRG9tUmVmcy5sZW5ndGgpe2k9dGhpcy5hSXRlbURvbVJlZnMubGVuZ3RoLTF9fWVsc2V7d2hpbGUoIXRoaXMuYUl0ZW1Eb21SZWZzW2ldfHwhcSh0aGlzLmFJdGVtRG9tUmVmc1tpXSkuaXMoIjp2aXNpYmxlIil8fHEodGhpcy5hSXRlbURvbVJlZnNbaV0pLmNzcygidmlzaWJpbGl0eSIpPT0iaGlkZGVuInx8IXEodGhpcy5hSXRlbURvbVJlZnNbaV0pLmlzKCI6c2FwRm9jdXNhYmxlIikpe2ktLTtpZihpPDApe3JldHVybn19fX10aGlzLmZvY3VzSXRlbShpLGUpO2UucHJldmVudERlZmF1bHQoKTtlLnN0b3BQcm9wYWdhdGlvbigpfTtJLnByb3RvdHlwZS5vbnNhcGVuZG1vZGlmaWVycz1mdW5jdGlvbihlKXtpZih0aGlzLmhhc0Rpc2FibGVkTW9kaWZpZXIoZSkpe3JldHVybn10aGlzLm9uc2FwZW5kKGUpfTtJLnByb3RvdHlwZS5zZXRUYWJJbmRleDA9ZnVuY3Rpb24oKXt0aGlzLmlUYWJJbmRleD0wO3RoaXMuaUFjdGl2ZVRhYkluZGV4PTB9O0kucHJvdG90eXBlLm9ua2V5dXA9ZnVuY3Rpb24oZSl7aWYoZS5rZXlDb2RlPT1xLnNhcC5LZXlDb2Rlcy5GMil7dmFyIGQ9cSh0aGlzLm9Eb21SZWYpO2lmKGQuZGF0YSgic2FwLkluTmF2QXJlYSIpKXtkLmRhdGEoInNhcC5Jbk5hdkFyZWEiLGZhbHNlKX1lbHNlIGlmKGQuZGF0YSgic2FwLkluTmF2QXJlYSIpPT09ZmFsc2Upe2QuZGF0YSgic2FwLkluTmF2QXJlYSIsdHJ1ZSl9ZS5wcmV2ZW50RGVmYXVsdCgpO2Uuc3RvcFByb3BhZ2F0aW9uKCl9fTtyZXR1cm4gSX0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLmZvcm1hdC5EYXRlRm9ybWF0Jykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUuZm9ybWF0LkRhdGVGb3JtYXQnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9mb3JtYXQvRGF0ZUZvcm1hdCIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ3NhcC91aS9jb3JlL0xvY2FsZURhdGEnXSxmdW5jdGlvbihxLEwpeyJ1c2Ugc3RyaWN0Ijt2YXIgRD1mdW5jdGlvbigpe3Rocm93IG5ldyBFcnJvcigpfTtELm9EYXRlSW5mbz17b0RlZmF1bHRGb3JtYXRPcHRpb25zOntzdHlsZToibWVkaXVtIn0sYUZhbGxiYWNrRm9ybWF0T3B0aW9uczpbe3N0eWxlOiJzaG9ydCJ9LHtzdHlsZToibWVkaXVtIn0se3BhdHRlcm46Inl5eXktTU0tZGQifSx7cGF0dGVybjoieXl5eU1NZGQifV0sZ2V0UGF0dGVybjpmdW5jdGlvbihsLHMpe3JldHVybiBsLmdldERhdGVQYXR0ZXJuKHMpfSxvUmVxdWlyZWRQYXJ0czp7InRleHQiOnRydWUsInllYXIiOnRydWUsIndlZWtZZWFyIjp0cnVlLCJtb250aCI6dHJ1ZSwiZGF5Ijp0cnVlfX07RC5vRGF0ZVRpbWVJbmZvPXtvRGVmYXVsdEZvcm1hdE9wdGlvbnM6e3N0eWxlOiJtZWRpdW0ifSxhRmFsbGJhY2tGb3JtYXRPcHRpb25zOlt7c3R5bGU6InNob3J0In0se3N0eWxlOiJtZWRpdW0ifSx7cGF0dGVybjoieXl5eS1NTS1kZCdUJ2hoOm1tOnNzIn0se3BhdHRlcm46Inl5eXlNTWRkIGhobW1zcyJ9XSxnZXRQYXR0ZXJuOmZ1bmN0aW9uKGwscyl7dmFyIGQ9bC5nZXREYXRlVGltZVBhdHRlcm4ocyksYT1sLmdldERhdGVQYXR0ZXJuKHMpLHQ9bC5nZXRUaW1lUGF0dGVybihzKTtyZXR1cm4gZC5yZXBsYWNlKCJ7MX0iLGEpLnJlcGxhY2UoInswfSIsdCl9LG9SZXF1aXJlZFBhcnRzOnsidGV4dCI6dHJ1ZSwieWVhciI6dHJ1ZSwid2Vla1llYXIiOnRydWUsIm1vbnRoIjp0cnVlLCJkYXkiOnRydWUsImhvdXIwXzIzIjp0cnVlLCJob3VyMV8yNCI6dHJ1ZSwiaG91cjBfMTEiOnRydWUsImhvdXIxXzEyIjp0cnVlfX07RC5vVGltZUluZm89e29EZWZhdWx0Rm9ybWF0T3B0aW9uczp7c3R5bGU6Im1lZGl1bSJ9LGFGYWxsYmFja0Zvcm1hdE9wdGlvbnM6W3tzdHlsZToic2hvcnQifSx7c3R5bGU6Im1lZGl1bSJ9LHtwYXR0ZXJuOiJoaDptbTpzcyJ9LHtwYXR0ZXJuOiJoaG1tc3MifV0sZ2V0UGF0dGVybjpmdW5jdGlvbihsLHMpe3JldHVybiBsLmdldFRpbWVQYXR0ZXJuKHMpfSxvUmVxdWlyZWRQYXJ0czp7InRleHQiOnRydWUsImhvdXIwXzIzIjp0cnVlLCJob3VyMV8yNCI6dHJ1ZSwiaG91cjBfMTEiOnRydWUsImhvdXIxXzEyIjp0cnVlfX07RC5nZXRJbnN0YW5jZT1mdW5jdGlvbihmLGwpe3JldHVybiB0aGlzLmdldERhdGVJbnN0YW5jZShmLGwpfTtELmdldERhdGVJbnN0YW5jZT1mdW5jdGlvbihmLGwpe3JldHVybiB0aGlzLmNyZWF0ZUluc3RhbmNlKGYsbCx0aGlzLm9EYXRlSW5mbyl9O0QuZ2V0RGF0ZVRpbWVJbnN0YW5jZT1mdW5jdGlvbihmLGwpe3JldHVybiB0aGlzLmNyZWF0ZUluc3RhbmNlKGYsbCx0aGlzLm9EYXRlVGltZUluZm8pfTtELmdldFRpbWVJbnN0YW5jZT1mdW5jdGlvbihmLGwpe3JldHVybiB0aGlzLmNyZWF0ZUluc3RhbmNlKGYsbCx0aGlzLm9UaW1lSW5mbyl9O0QuY3JlYXRlSW5zdGFuY2U9ZnVuY3Rpb24oZixsLEkpe3ZhciBGPXEuc2FwLm5ld09iamVjdCh0aGlzLnByb3RvdHlwZSk7aWYoZiBpbnN0YW5jZW9mIHNhcC51aS5jb3JlLkxvY2FsZSl7bD1mO2Y9dW5kZWZpbmVkfWlmKCFsKXtsPXNhcC51aS5nZXRDb3JlKCkuZ2V0Q29uZmlndXJhdGlvbigpLmdldEZvcm1hdFNldHRpbmdzKCkuZ2V0Rm9ybWF0TG9jYWxlKCl9Ri5vTG9jYWxlPWw7Ri5vTG9jYWxlRGF0YT1MLmdldEluc3RhbmNlKGwpO0Yub0Zvcm1hdE9wdGlvbnM9cS5leHRlbmQoZmFsc2Use30sSS5vRGVmYXVsdEZvcm1hdE9wdGlvbnMsZik7aWYoIUYub0Zvcm1hdE9wdGlvbnMucGF0dGVybil7Ri5vRm9ybWF0T3B0aW9ucy5wYXR0ZXJuPUkuZ2V0UGF0dGVybihGLm9Mb2NhbGVEYXRhLEYub0Zvcm1hdE9wdGlvbnMuc3R5bGUpfWlmKCFJLmFGYWxsYmFja0Zvcm1hdHMpe0kuYUZhbGxiYWNrRm9ybWF0cz1bXTtxLmVhY2goSS5hRmFsbGJhY2tGb3JtYXRPcHRpb25zLGZ1bmN0aW9uKGksZil7dmFyIG89RC5jcmVhdGVJbnN0YW5jZShmLGwsSSk7by5iSXNGYWxsYmFjaz10cnVlO0kuYUZhbGxiYWNrRm9ybWF0cy5wdXNoKG8pfSl9Ri5hRmFsbGJhY2tGb3JtYXRzPUkuYUZhbGxiYWNrRm9ybWF0cztGLm9SZXF1aXJlZFBhcnRzPUkub1JlcXVpcmVkUGFydHM7Ri5pbml0KCk7cmV0dXJuIEZ9O0QucHJvdG90eXBlLmluaXQ9ZnVuY3Rpb24oKXt0aGlzLmFNb250aHNBYmJyZXY9dGhpcy5vTG9jYWxlRGF0YS5nZXRNb250aHMoImFiYnJldmlhdGVkIik7dGhpcy5hTW9udGhzV2lkZT10aGlzLm9Mb2NhbGVEYXRhLmdldE1vbnRocygid2lkZSIpO3RoaXMuYU1vbnRoc0FiYnJldlN0PXRoaXMub0xvY2FsZURhdGEuZ2V0TW9udGhzU3RhbmRBbG9uZSgiYWJicmV2aWF0ZWQiKTt0aGlzLmFNb250aHNXaWRlU3Q9dGhpcy5vTG9jYWxlRGF0YS5nZXRNb250aHNTdGFuZEFsb25lKCJ3aWRlIik7dGhpcy5hRGF5c0FiYnJldj10aGlzLm9Mb2NhbGVEYXRhLmdldERheXMoImFiYnJldmlhdGVkIik7dGhpcy5hRGF5c1dpZGU9dGhpcy5vTG9jYWxlRGF0YS5nZXREYXlzKCJ3aWRlIik7dGhpcy5hRGF5c0FiYnJldlN0PXRoaXMub0xvY2FsZURhdGEuZ2V0RGF5c1N0YW5kQWxvbmUoImFiYnJldmlhdGVkIik7dGhpcy5hRGF5c1dpZGVTdD10aGlzLm9Mb2NhbGVEYXRhLmdldERheXNTdGFuZEFsb25lKCJ3aWRlIik7dGhpcy5hRGF5UGVyaW9kcz10aGlzLm9Mb2NhbGVEYXRhLmdldERheVBlcmlvZHMoImFiYnJldmlhdGVkIik7dGhpcy5hRm9ybWF0QXJyYXk9dGhpcy5wYXJzZUphdmFEYXRlRm9ybWF0KHRoaXMub0Zvcm1hdE9wdGlvbnMucGF0dGVybil9O0QucHJvdG90eXBlLm9TdGF0ZXM9eyJHIjoiZXJhIiwieSI6InllYXIiLCJZIjoid2Vla1llYXIiLCJNIjoibW9udGgiLCJMIjoibW9udGhTdGFuZGFsb25lIiwidyI6IndlZWtJblllYXIiLCJXIjoid2Vla0luTW9udGgiLCJEIjoiZGF5SW5ZZWFyIiwiZCI6ImRheSIsIkYiOiJkYXlPZldlZWtJbk1vbnRoIiwiRSI6ImRheU5hbWVJbldlZWsiLCJjIjoiZGF5TmFtZUluV2Vla1N0YW5kYWxvbmUiLCJ1IjoiZGF5TnVtYmVyT2ZXZWVrIiwiYSI6ImFtUG1NYXJrZXIiLCJIIjoiaG91cjBfMjMiLCJrIjoiaG91cjFfMjQiLCJLIjoiaG91cjBfMTEiLCJoIjoiaG91cjFfMTIiLCJtIjoibWludXRlIiwicyI6InNlY29uZCIsIlMiOiJtaWxsaXNlY29uZCIsInoiOiJ0aW1lem9uZUdlbmVyYWwiLCJaIjoidGltZXpvbmVSRkM4MjIiLCJYIjoidGltZXpvbmVJU084NjAxIn07RC5wcm90b3R5cGUuZm9ybWF0PWZ1bmN0aW9uKGQsdSl7aWYodT09PXVuZGVmaW5lZCl7dT10aGlzLm9Gb3JtYXRPcHRpb25zLlVUQ312YXIgYj1bXSxwLGE9dT9kLmdldFVUQ0RheSgpOmQuZ2V0RGF5KCksYz11P2QuZ2V0VVRDRGF0ZSgpOmQuZ2V0RGF0ZSgpLG09dT9kLmdldFVUQ01vbnRoKCk6ZC5nZXRNb250aCgpLHk9dT9kLmdldFVUQ0Z1bGxZZWFyKCk6ZC5nZXRGdWxsWWVhcigpLE09dT9kLmdldFVUQ01pbGxpc2Vjb25kcygpOmQuZ2V0TWlsbGlzZWNvbmRzKCkscz11P2QuZ2V0VVRDU2Vjb25kcygpOmQuZ2V0U2Vjb25kcygpLGU9dT9kLmdldFVUQ01pbnV0ZXMoKTpkLmdldE1pbnV0ZXMoKSxoPXU/ZC5nZXRVVENIb3VycygpOmQuZ2V0SG91cnMoKSx0PU1hdGguYWJzKGQuZ2V0VGltZXpvbmVPZmZzZXQoKSksUD1kLmdldFRpbWV6b25lT2Zmc2V0KCk+MCxIPU1hdGguZmxvb3IodC82MCksZj10JTYwLFksdyxnLHI7Zm9yKHZhciBpPTA7aTx0aGlzLmFGb3JtYXRBcnJheS5sZW5ndGg7aSsrKXtwPXRoaXMuYUZvcm1hdEFycmF5W2ldO3N3aXRjaChwLnNUeXBlKXtjYXNlInRleHQiOmIucHVzaChwLnNWYWx1ZSk7YnJlYWs7Y2FzZSJkYXkiOmIucHVzaChxLnNhcC5wYWRMZWZ0KFN0cmluZyhjKSwiMCIscC5pRGlnaXRzKSk7YnJlYWs7Y2FzZSJkYXlOYW1lSW5XZWVrIjppZihwLmlEaWdpdHM8NCl7Yi5wdXNoKHRoaXMuYURheXNBYmJyZXZbYV0pfWVsc2UgaWYocC5pRGlnaXRzPj00KXtiLnB1c2godGhpcy5hRGF5c1dpZGVbYV0pfWJyZWFrO2Nhc2UiZGF5TmFtZUluV2Vla1N0YW5kYWxvbmUiOmlmKHAuaURpZ2l0czw0KXtiLnB1c2godGhpcy5hRGF5c0FiYnJldlN0W2FdKX1lbHNlIGlmKHAuaURpZ2l0cz49NCl7Yi5wdXNoKHRoaXMuYURheXNXaWRlU3RbYV0pfWJyZWFrO2Nhc2UiZGF5TnVtYmVyT2ZXZWVrIjpiLnB1c2goYXx8Nyk7YnJlYWs7Y2FzZSJtb250aCI6aWYocC5pRGlnaXRzPT0zKXtiLnB1c2godGhpcy5hTW9udGhzQWJicmV2W21dKX1lbHNlIGlmKHAuaURpZ2l0cz49NCl7Yi5wdXNoKHRoaXMuYU1vbnRoc1dpZGVbbV0pfWVsc2V7Yi5wdXNoKHEuc2FwLnBhZExlZnQoU3RyaW5nKG0rMSksIjAiLHAuaURpZ2l0cykpfWJyZWFrO2Nhc2UibW9udGhTdGFuZGFsb25lIjppZihwLmlEaWdpdHM9PTMpe2IucHVzaCh0aGlzLmFNb250aHNBYmJyZXZTdFttXSl9ZWxzZSBpZihwLmlEaWdpdHM+PTQpe2IucHVzaCh0aGlzLmFNb250aHNXaWRlU3RbbV0pfWVsc2V7Yi5wdXNoKHEuc2FwLnBhZExlZnQoU3RyaW5nKG0rMSksIjAiLHAuaURpZ2l0cykpfWJyZWFrO2Nhc2UiZXJhIjpiLnB1c2goIkFEIik7YnJlYWs7Y2FzZSJ5ZWFyIjpjYXNlIndlZWtZZWFyIjpZPSIiK3k7aWYocC5pRGlnaXRzPT0yJiZZLmxlbmd0aD4yKXtZPVkuc3Vic3RyKFkubGVuZ3RoLTIpfWIucHVzaChxLnNhcC5wYWRMZWZ0KFksIjAiLHAuaURpZ2l0cykpO2JyZWFrO2Nhc2Uid2Vla0luWWVhciI6dz0iIjtpZihkLmdldFdlZWspe3crPWQuZ2V0V2VlaygpfWIucHVzaChxLnNhcC5wYWRMZWZ0KHcsIjAiLHAuaURpZ2l0cykpO2JyZWFrO2Nhc2UiaG91cjBfMjMiOmIucHVzaChxLnNhcC5wYWRMZWZ0KFN0cmluZyhoKSwiMCIscC5pRGlnaXRzKSk7YnJlYWs7Y2FzZSJob3VyMV8yNCI6aWYoaD09MCl7Zz0iMjQifWVsc2V7Zz1TdHJpbmcoaCl9Yi5wdXNoKHEuc2FwLnBhZExlZnQoZywiMCIscC5pRGlnaXRzKSk7YnJlYWs7Y2FzZSJob3VyMF8xMSI6aWYoaD4xMSl7Zz1TdHJpbmcoaC0xMil9ZWxzZXtnPVN0cmluZyhoKX1iLnB1c2gocS5zYXAucGFkTGVmdChnLCIwIixwLmlEaWdpdHMpKTticmVhaztjYXNlImhvdXIxXzEyIjppZihoPjEyKXtnPVN0cmluZyhoLTEyKX1lbHNlIGlmKGg9PTApe2c9IjEyIn1lbHNle2c9U3RyaW5nKGgpfWIucHVzaChxLnNhcC5wYWRMZWZ0KGcsIjAiLHAuaURpZ2l0cykpO2JyZWFrO2Nhc2UibWludXRlIjpiLnB1c2gocS5zYXAucGFkTGVmdChTdHJpbmcoZSksIjAiLHAuaURpZ2l0cykpO2JyZWFrO2Nhc2Uic2Vjb25kIjpiLnB1c2gocS5zYXAucGFkTGVmdChTdHJpbmcocyksIjAiLHAuaURpZ2l0cykpO2JyZWFrO2Nhc2UibWlsbGlzZWNvbmQiOmIucHVzaChxLnNhcC5wYWRSaWdodChxLnNhcC5wYWRMZWZ0KFN0cmluZyhNKSwiMCIsTWF0aC5taW4oMyxwLmlEaWdpdHMpKSwiMCIscC5pRGlnaXRzKSk7YnJlYWs7Y2FzZSJhbVBtTWFya2VyIjp2YXIgaj1oPDEyPzA6MTtiLnB1c2godGhpcy5hRGF5UGVyaW9kc1tqXSk7YnJlYWs7Y2FzZSJ0aW1lem9uZUdlbmVyYWwiOmlmKHAuaURpZ2l0cz4zJiZkLmdldFRpbWV6b25lTG9uZyl7Yi5wdXNoKGQuZ2V0VGltZXpvbmVMb25nKCkpO2JyZWFrfWVsc2UgaWYoZC5nZXRUaW1lem9uZVNob3J0KXtiLnB1c2goZC5nZXRUaW1lem9uZVNob3J0KCkpO2JyZWFrfWIucHVzaCgiR01UIik7Y2FzZSJ0aW1lem9uZUlTTzg2MDEiOmlmKCF1JiZ0IT0wKXtiLnB1c2goUD8iLSI6IisiKTtiLnB1c2gocS5zYXAucGFkTGVmdChTdHJpbmcoSCksIjAiLDIpKTtiLnB1c2goIjoiKTtiLnB1c2gocS5zYXAucGFkTGVmdChTdHJpbmcoZiksIjAiLDIpKX1lbHNle2IucHVzaCgiWiIpfWJyZWFrO2Nhc2UidGltZXpvbmVSRkM4MjIiOmlmKCF1JiZ0IT0wKXtiLnB1c2goUD8iLSI6IisiKTtiLnB1c2gocS5zYXAucGFkTGVmdChTdHJpbmcoSCksIjAiLDIpKTtiLnB1c2gocS5zYXAucGFkTGVmdChTdHJpbmcoZiksIjAiLDIpKX1icmVha319cj1iLmpvaW4oIiIpO2lmKHNhcC51aS5nZXRDb3JlKCkuZ2V0Q29uZmlndXJhdGlvbigpLmdldE9yaWdpbkluZm8oKSl7cj1uZXcgU3RyaW5nKHIpO3Iub3JpZ2luSW5mbz17c291cmNlOiJDb21tb24gTG9jYWxlIERhdGEgUmVwb3NpdG9yeSIsbG9jYWxlOnRoaXMub0xvY2FsZS50b1N0cmluZygpLHN0eWxlOnRoaXMub0Zvcm1hdE9wdGlvbnMuc3R5bGUscGF0dGVybjp0aGlzLm9Gb3JtYXRPcHRpb25zLnBhdHRlcm59fXJldHVybiByfTtELnByb3RvdHlwZS5wYXJzZT1mdW5jdGlvbih2LHUpe2lmKHU9PT11bmRlZmluZWQpe3U9dGhpcy5vRm9ybWF0T3B0aW9ucy5VVEN9dmFyIGQsST0wLGU9ZmFsc2UsYT1udWxsLG09bnVsbCx5PW51bGwsaD1udWxsLE09bnVsbCxzPW51bGwsYj1udWxsLHA9ZmFsc2UsUCxjLHQ9bnVsbCxWPXRydWUscj10aGlzLm9SZXF1aXJlZFBhcnRzO2Z1bmN0aW9uIGYoeCl7cmV0dXJuIHg+PTQ4JiZ4PD01N31mdW5jdGlvbiBnKHgpe3ZhciB6PTA7d2hpbGUoejx4JiZmKHYuY2hhckNvZGVBdChJK3opKSl7eisrfXJldHVybiB2LnN1YnN0cihJLHopfWZ1bmN0aW9uIGooeCl7dmFyIGk7Zm9yKGk9MDtpPHgubGVuZ3RoO2krKyl7aWYodi5pbmRleE9mKHhbaV0sSSk9PUkpe3JldHVybiB4W2ldfX1yZXR1cm4gbnVsbH1mdW5jdGlvbiBrKHgpe3ZhciBpO2ZvcihpPTA7aTx4Lmxlbmd0aDtpKyspe2lmKHYuaW5kZXhPZih4W2ldLEkpPT1JKXtyZXR1cm4gaX19cmV0dXJuIG51bGx9ZnVuY3Rpb24gbCh4KXt2YXIgej12LmNoYXJBdChJKT09IisiPy0xOjE7SSsrO2M9ZygyKTt2YXIgQj1wYXJzZUludChjLDEwKTtJPUkrMjtpZih4KXtJKyt9Yz1nKDIpO0k9SSsyO3Q9cGFyc2VJbnQoYywxMCk7dD0odCs2MCpCKSp6fWZ1bmN0aW9uIG4oeCx6KXtpZih4IGluIHImJnope1Y9ZmFsc2V9fXY9cS50cmltKHYpO2Zvcih2YXIgaT0wO2k8dGhpcy5hRm9ybWF0QXJyYXkubGVuZ3RoO2krKyl7UD10aGlzLmFGb3JtYXRBcnJheVtpXTtzd2l0Y2goUC5zVHlwZSl7Y2FzZSJ0ZXh0IjppZih2LmluZGV4T2YoUC5zVmFsdWUsSSk9PUkpe0krPVAuc1ZhbHVlLmxlbmd0aH1lbHNle24oUC5zVHlwZSx0aGlzLmFGb3JtYXRBcnJheVtpKzFdLnNUeXBlIGluIHIpfWJyZWFrO2Nhc2UiZGF5IjpjPWcoTWF0aC5tYXgoUC5pRGlnaXRzLDIpKTtuKFAuc1R5cGUsYz09PSIiKTtJKz1jLmxlbmd0aDthPXBhcnNlSW50KGMsMTApO2JyZWFrO2Nhc2UiZGF5TmFtZUluV2VlayI6Y2FzZSJkYXlOYW1lSW5XZWVrU3RhbmRhbG9uZSI6Yz1qKHRoaXMuYURheXNXaWRlKTtpZihjKXtJKz1jLmxlbmd0aDticmVha31jPWoodGhpcy5hRGF5c1dpZGVTdCk7aWYoYyl7SSs9Yy5sZW5ndGg7YnJlYWt9Yz1qKHRoaXMuYURheXNBYmJyZXYpO2lmKGMpe0krPWMubGVuZ3RoO2JyZWFrfWM9aih0aGlzLmFEYXlzQWJicmV2U3QpO2lmKGMpe0krPWMubGVuZ3RoO2JyZWFrfWJyZWFrO2Nhc2UiZGF5TnVtYmVyT2ZXZWVrIjpjPWcoUC5pRGlnaXRzKTtJKz1jLmxlbmd0aDticmVhaztjYXNlIm1vbnRoIjpjYXNlIm1vbnRoU3RhbmRhbG9uZSI6aWYoUC5pRGlnaXRzPDMpe2M9ZyhNYXRoLm1heChQLmlEaWdpdHMsMikpO24oUC5zVHlwZSxjPT09IiIpO209cGFyc2VJbnQoYywxMCktMTtJKz1jLmxlbmd0aH1lbHNle209ayh0aGlzLmFNb250aHNXaWRlKTtpZihtIT1udWxsKXtJKz10aGlzLmFNb250aHNXaWRlW21dLmxlbmd0aDticmVha31tPWsodGhpcy5hTW9udGhzV2lkZVN0KTtpZihtIT1udWxsKXtJKz10aGlzLmFNb250aHNXaWRlU3RbbV0ubGVuZ3RoO2JyZWFrfW09ayh0aGlzLmFNb250aHNBYmJyZXYpO2lmKG0hPW51bGwpe0krPXRoaXMuYU1vbnRoc0FiYnJldlttXS5sZW5ndGg7YnJlYWt9bT1rKHRoaXMuYU1vbnRoc0FiYnJldlN0KTtpZihtIT1udWxsKXtJKz10aGlzLmFNb250aHNBYmJyZXZTdFttXS5sZW5ndGg7YnJlYWt9bihQLnNUeXBlLHRydWUpfWJyZWFrO2Nhc2UiZXJhIjpicmVhaztjYXNlInllYXIiOmNhc2Uid2Vla1llYXIiOmlmKFAuaURpZ2l0cz09MSl7Yz1nKDQpfWVsc2UgaWYoUC5pRGlnaXRzPT0yKXtjPWcoMil9ZWxzZXtjPWcoUC5pRGlnaXRzKX1JKz1jLmxlbmd0aDtuKFAuc1R5cGUsYz09PSIiKTt5PXBhcnNlSW50KGMsMTApO2lmKGMubGVuZ3RoPD0yKXt2YXIgQz1uZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCksbz1NYXRoLmZsb29yKEMvMTAwKSxZPW8qMTAwK3ktQztpZihZPC03MCl7eSs9KG8rMSkqMTAwfWVsc2UgaWYoWTwzMCl7eSs9byoxMDB9ZWxzZXt5Kz0oby0xKSoxMDB9fWJyZWFrO2Nhc2Uid2Vla0luWWVhciI6YnJlYWs7Y2FzZSJob3VyMF8yMyI6Yz1nKE1hdGgubWF4KFAuaURpZ2l0cywyKSk7bihQLnNUeXBlLGM9PT0iIik7SSs9Yy5sZW5ndGg7aD1wYXJzZUludChjLDEwKTticmVhaztjYXNlImhvdXIxXzI0IjpjPWcoTWF0aC5tYXgoUC5pRGlnaXRzLDIpKTtuKFAuc1R5cGUsYz09PSIiKTtJKz1jLmxlbmd0aDtoPXBhcnNlSW50KGMsMTApO2lmKGg9PTI0KXtoPTB9YnJlYWs7Y2FzZSJob3VyMF8xMSI6Yz1nKE1hdGgubWF4KFAuaURpZ2l0cywyKSk7bihQLnNUeXBlLGM9PT0iIik7SSs9Yy5sZW5ndGg7aD1wYXJzZUludChjLDEwKTticmVhaztjYXNlImhvdXIxXzEyIjpjPWcoTWF0aC5tYXgoUC5pRGlnaXRzLDIpKTtuKFAuc1R5cGUsYz09PSIiKTtJKz1jLmxlbmd0aDtoPXBhcnNlSW50KGMsMTApO2lmKGg9PTEyKXtoPTA7cD10cnVlfWJyZWFrO2Nhc2UibWludXRlIjpjPWcoTWF0aC5tYXgoUC5pRGlnaXRzLDIpKTtuKFAuc1R5cGUsYz09PSIiKTtJKz1jLmxlbmd0aDtNPXBhcnNlSW50KGMsMTApO2JyZWFrO2Nhc2Uic2Vjb25kIjpjPWcoTWF0aC5tYXgoUC5pRGlnaXRzLDIpKTtuKFAuc1R5cGUsYz09PSIiKTtJKz1jLmxlbmd0aDtzPXBhcnNlSW50KGMsMTApO2JyZWFrO2Nhc2UibWlsbGlzZWNvbmQiOmM9ZyhNYXRoLm1heChQLmlEaWdpdHMsMykpO0krPWMubGVuZ3RoO2M9cS5zYXAucGFkUmlnaHQoYywiMCIsMyk7Yj1wYXJzZUludChjLDEwKTticmVhaztjYXNlImFtUG1NYXJrZXIiOnZhciBBPXRoaXMuYURheVBlcmlvZHNbMF0sdz10aGlzLmFEYXlQZXJpb2RzWzFdO2lmKHYuaW5kZXhPZihBLEkpPT1JKXtwPWZhbHNlO0krPTJ9ZWxzZSBpZih2LmluZGV4T2YodyxJKT09SSl7cD10cnVlO0krPTJ9YnJlYWs7Y2FzZSJ0aW1lem9uZUdlbmVyYWwiOnZhciBUPXYuc3Vic3RyaW5nKEksSSszKTtpZihUPT09IkdNVCJ8fFQ9PT0iVVRDIil7ST1JKzN9ZWxzZSBpZih2LnN1YnN0cmluZyhJLEkrMik9PT0iVVQiKXtJPUkrMn1lbHNlIGlmKHYuY2hhckF0KEkpPT0iWiIpe0k9SSsxO3Q9MDticmVha31lbHNle3Euc2FwLmxvZy5lcnJvcih2KyIgY2Fubm90IGJlIHBhcnNlZCBjb3JyZWNseSBieSBzYXAudWkuY29yZS5mb3JtYXQuRGF0ZUZvcm1hdDogVGhlIGdpdmVuIHRpbWV6b25lIGlzIG5vdCBzdXBwb3J0ZWQhIik7YnJlYWt9Y2FzZSJ0aW1lem9uZUlTTzg2MDEiOmlmKHYuY2hhckF0KEkpPT0iWiIpe0k9SSsxO3Q9MDticmVha31sKHRydWUpO2JyZWFrO2Nhc2UidGltZXpvbmVSRkM4MjIiOmwoZmFsc2UpO2JyZWFrfWlmKCFWKXticmVha319aWYoSTx2Lmxlbmd0aCl7Vj1mYWxzZX1pZihwKXtoKz0xMn1pZihWKXtpZih0IT1udWxsKXtkPW5ldyBEYXRlKDApO2Quc2V0VVRDRnVsbFllYXIoeXx8MTk3MCk7ZC5zZXRVVENNb250aChtfHwwKTtkLnNldFVUQ0RhdGUoYXx8MSk7ZC5zZXRVVENIb3VycyhofHwwKTtkLnNldFVUQ01pbnV0ZXMoKE18fDApK3QpO2Quc2V0VVRDU2Vjb25kcyhzfHwwKTtkLnNldFVUQ01pbGxpc2Vjb25kcyhifHwwKX1lbHNlIGlmKHUpe2Q9bmV3IERhdGUoMCk7ZC5zZXRVVENGdWxsWWVhcih5fHwxOTcwKTtkLnNldFVUQ01vbnRoKG18fDApO2Quc2V0VVRDRGF0ZShhfHwxKTtkLnNldFVUQ0hvdXJzKGh8fDApO2Quc2V0VVRDTWludXRlcyhNfHwwKTtkLnNldFVUQ1NlY29uZHMoc3x8MCk7ZC5zZXRVVENNaWxsaXNlY29uZHMoYnx8MCl9ZWxzZXtkPW5ldyBEYXRlKDE5NzAsMCwxLDAsMCwwKTtkLnNldEZ1bGxZZWFyKHl8fDE5NzApO2Quc2V0TW9udGgobXx8MCk7ZC5zZXREYXRlKGF8fDEpO2Quc2V0SG91cnMoaHx8MCk7ZC5zZXRNaW51dGVzKE18fDApO2Quc2V0U2Vjb25kcyhzfHwwKTtkLnNldE1pbGxpc2Vjb25kcyhifHwwKX1yZXR1cm4gZH1pZighdGhpcy5iSXNGYWxsYmFjayl7cS5lYWNoKHRoaXMuYUZhbGxiYWNrRm9ybWF0cyxmdW5jdGlvbihpLEYpe2Q9Ri5wYXJzZSh2LHUpO2lmKGQpe3JldHVybiBmYWxzZX19KTtyZXR1cm4gZH1yZXR1cm4gbnVsbH07RC5wcm90b3R5cGUucGFyc2VKYXZhRGF0ZUZvcm1hdD1mdW5jdGlvbihmKXt2YXIgRj1bXSxpLFE9ZmFsc2UsYz1udWxsLHM9IiIsbj0iIjtmb3IoaT0wO2k8Zi5sZW5ndGg7aSsrKXt2YXIgQz1mLmNoYXJBdChpKSxOLHAsUDtpZihRKXtpZihDPT0iJyIpe3A9Zi5jaGFyQXQoaS0xKTtQPWYuY2hhckF0KGktMik7Tj1mLmNoYXJBdChpKzEpO2lmKHA9PSInIiYmUCE9IiciKXtRPWZhbHNlfWVsc2UgaWYoTj09IiciKXtpKz0xfWVsc2V7UT1mYWxzZTtjb250aW51ZX19aWYocz09InRleHQiKXtjLnNWYWx1ZSs9Q31lbHNle2M9e3NUeXBlOiJ0ZXh0IixzVmFsdWU6Q307Ri5wdXNoKGMpO3M9InRleHQifX1lbHNle2lmKEM9PSInIil7UT10cnVlfWVsc2UgaWYodGhpcy5vU3RhdGVzW0NdKXtuPXRoaXMub1N0YXRlc1tDXTtpZihzPT1uKXtjLmlEaWdpdHMrK31lbHNle2M9e3NUeXBlOm4saURpZ2l0czoxfTtGLnB1c2goYyk7cz1ufX1lbHNle2lmKHM9PSJ0ZXh0Iil7Yy5zVmFsdWUrPUN9ZWxzZXtjPXtzVHlwZToidGV4dCIsc1ZhbHVlOkN9O0YucHVzaChjKTtzPSJ0ZXh0In19fX1yZXR1cm4gRn07cmV0dXJuIER9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS5mb3JtYXQuTnVtYmVyRm9ybWF0Jykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUuZm9ybWF0Lk51bWJlckZvcm1hdCcpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL2Zvcm1hdC9OdW1iZXJGb3JtYXQiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvY29yZS9Mb2NhbGVEYXRhJ10sZnVuY3Rpb24ocSxMKXsidXNlIHN0cmljdCI7dmFyIE49c2FwLnVpLmJhc2UuT2JqZWN0LmV4dGVuZCgic2FwLnVpLmNvcmUuZm9ybWF0Lk51bWJlckZvcm1hdCIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKGYpe3Rocm93IG5ldyBFcnJvcigpfX0pO04uSU5URUdFUj0wO04uRkxPQVQ9MTtOLkNVUlJFTkNZPTI7Ti5QRVJDRU5UPTM7Ti5vRGVmYXVsdEludGVnZXJGb3JtYXQ9e21pbkludGVnZXJEaWdpdHM6MSxtYXhJbnRlZ2VyRGlnaXRzOjk5LG1pbkZyYWN0aW9uRGlnaXRzOjAsbWF4RnJhY3Rpb25EaWdpdHM6MCxncm91cGluZ0VuYWJsZWQ6ZmFsc2UsZ3JvdXBpbmdTZXBhcmF0b3I6IiwiLGRlY2ltYWxTZXBhcmF0b3I6Ii4iLHBsdXNTaWduOiIrIixtaW51c1NpZ246Ii0iLGlzSW50ZWdlcjp0cnVlLHR5cGU6Ti5JTlRFR0VSLHNob3dNZWFzdXJlOmZhbHNlfTtOLm9EZWZhdWx0RmxvYXRGb3JtYXQ9e21pbkludGVnZXJEaWdpdHM6MSxtYXhJbnRlZ2VyRGlnaXRzOjk5LG1pbkZyYWN0aW9uRGlnaXRzOjAsbWF4RnJhY3Rpb25EaWdpdHM6OTksZ3JvdXBpbmdFbmFibGVkOnRydWUsZ3JvdXBpbmdTZXBhcmF0b3I6IiwiLGRlY2ltYWxTZXBhcmF0b3I6Ii4iLHBsdXNTaWduOiIrIixtaW51c1NpZ246Ii0iLGlzSW50ZWdlcjpmYWxzZSx0eXBlOk4uRkxPQVQsc2hvd01lYXN1cmU6ZmFsc2V9O04ub0RlZmF1bHRDdXJyZW5jeUZvcm1hdD17bWluSW50ZWdlckRpZ2l0czoxLG1heEludGVnZXJEaWdpdHM6OTksbWluRnJhY3Rpb25EaWdpdHM6MixtYXhGcmFjdGlvbkRpZ2l0czoyLGdyb3VwaW5nRW5hYmxlZDp0cnVlLGdyb3VwaW5nU2VwYXJhdG9yOiIsIixkZWNpbWFsU2VwYXJhdG9yOiIuIixwbHVzU2lnbjoiKyIsbWludXNTaWduOiItIixpc0ludGVnZXI6ZmFsc2UsdHlwZTpOLkNVUlJFTkNZLHNob3dNZWFzdXJlOnRydWV9O04uZ2V0SW5zdGFuY2U9ZnVuY3Rpb24oZixsKXtyZXR1cm4gdGhpcy5nZXRGbG9hdEluc3RhbmNlKGYsbCl9O04uZ2V0RmxvYXRJbnN0YW5jZT1mdW5jdGlvbihmLGwpe3ZhciBGPXRoaXMuY3JlYXRlSW5zdGFuY2UoZixsKSxvPXRoaXMuZ2V0TG9jYWxlRm9ybWF0T3B0aW9ucyhGLm9Mb2NhbGVEYXRhLE4uRkxPQVQpO0Yub0Zvcm1hdE9wdGlvbnM9cS5leHRlbmQoZmFsc2Use30sdGhpcy5vRGVmYXVsdEZsb2F0Rm9ybWF0LG8sZik7aWYoZiYmZi5wYXR0ZXJuKXtGLm9Gb3JtYXRPcHRpb25zPXEuZXh0ZW5kKGZhbHNlLEYub0Zvcm1hdE9wdGlvbnMsdGhpcy5wYXJzZU51bWJlclBhdHRlcm4oZi5wYXR0ZXJuKSl9cmV0dXJuIEZ9O04uZ2V0SW50ZWdlckluc3RhbmNlPWZ1bmN0aW9uKGYsbCl7dmFyIEY9dGhpcy5jcmVhdGVJbnN0YW5jZShmLGwpLG89dGhpcy5nZXRMb2NhbGVGb3JtYXRPcHRpb25zKEYub0xvY2FsZURhdGEsTi5JTlRFR0VSKTtGLm9Gb3JtYXRPcHRpb25zPXEuZXh0ZW5kKGZhbHNlLHt9LHRoaXMub0RlZmF1bHRJbnRlZ2VyRm9ybWF0LG8sZik7aWYoZiYmZi5wYXR0ZXJuKXtGLm9Gb3JtYXRPcHRpb25zPXEuZXh0ZW5kKGZhbHNlLEYub0Zvcm1hdE9wdGlvbnMsdGhpcy5wYXJzZU51bWJlclBhdHRlcm4oZi5wYXR0ZXJuKSl9cmV0dXJuIEZ9O04uZ2V0Q3VycmVuY3lJbnN0YW5jZT1mdW5jdGlvbihmLGwpe3ZhciBGPXRoaXMuY3JlYXRlSW5zdGFuY2UoZixsKSxvPXRoaXMuZ2V0TG9jYWxlRm9ybWF0T3B0aW9ucyhGLm9Mb2NhbGVEYXRhLE4uQ1VSUkVOQ1kpO0Yub0Zvcm1hdE9wdGlvbnM9cS5leHRlbmQoZmFsc2Use30sdGhpcy5vRGVmYXVsdEN1cnJlbmN5Rm9ybWF0LG8sZik7aWYoZiYmZi5wYXR0ZXJuKXtGLm9Gb3JtYXRPcHRpb25zPXEuZXh0ZW5kKGZhbHNlLEYub0Zvcm1hdE9wdGlvbnMsdGhpcy5wYXJzZU51bWJlclBhdHRlcm4oZi5wYXR0ZXJuKSl9cmV0dXJuIEZ9O04uY3JlYXRlSW5zdGFuY2U9ZnVuY3Rpb24oZixsKXt2YXIgRj1xLnNhcC5uZXdPYmplY3QodGhpcy5wcm90b3R5cGUpO2lmKGYgaW5zdGFuY2VvZiBzYXAudWkuY29yZS5Mb2NhbGUpe2w9ZjtmPXVuZGVmaW5lZH1pZighbCl7bD1zYXAudWkuZ2V0Q29yZSgpLmdldENvbmZpZ3VyYXRpb24oKS5nZXRGb3JtYXRTZXR0aW5ncygpLmdldEZvcm1hdExvY2FsZSgpfUYub0xvY2FsZT1sO0Yub0xvY2FsZURhdGE9TC5nZXRJbnN0YW5jZShsKTtyZXR1cm4gRn07Ti5nZXRMb2NhbGVGb3JtYXRPcHRpb25zPWZ1bmN0aW9uKGwsdCl7dmFyIG89e30sbjtpZih0PT1OLkNVUlJFTkNZKXtuPWwuZ2V0Q3VycmVuY3lQYXR0ZXJuKCk7bz10aGlzLnBhcnNlTnVtYmVyUGF0dGVybihuKX1vLnBsdXNTaWduPWwuZ2V0TnVtYmVyU3ltYm9sKCJwbHVzU2lnbiIpO28ubWludXNTaWduPWwuZ2V0TnVtYmVyU3ltYm9sKCJtaW51c1NpZ24iKTtvLmRlY2ltYWxTZXBhcmF0b3I9bC5nZXROdW1iZXJTeW1ib2woImRlY2ltYWwiKTtvLmdyb3VwaW5nU2VwYXJhdG9yPWwuZ2V0TnVtYmVyU3ltYm9sKCJncm91cCIpO28ucGF0dGVybj1uO3JldHVybiBvfTtOLnBhcnNlTnVtYmVyUGF0dGVybj1mdW5jdGlvbihmKXt2YXIgbT0wO3ZhciBNPTA7dmFyIGE9MDt2YXIgZz1mYWxzZTt2YXIgcz0wO2Zvcih2YXIgaT0wO2k8Zi5sZW5ndGg7aSsrKXt2YXIgYz1mW2ldO2lmKGM9PT0iLCIpe2c9dHJ1ZTtjb250aW51ZX1lbHNlIGlmKGM9PT0iLiIpe3M9MTtjb250aW51ZX1lbHNlIGlmKHM9PTAmJmM9PT0iMCIpe20rK31lbHNlIGlmKHM9PTEpe2lmKGM9PT0iMCIpe00rKzthKyt9ZWxzZSBpZihjPT09IiMiKXthKyt9fX1yZXR1cm57bWluSW50ZWdlckRpZ2l0czptLG1pbkZyYWN0aW9uRGlnaXRzOk0sbWF4RnJhY3Rpb25EaWdpdHM6YSxncm91cGluZ0VuYWJsZWQ6Z319O04ucHJvdG90eXBlLmZvcm1hdD1mdW5jdGlvbih2LG0pe3ZhciBuPXRoaXMuY29udmVydFRvRGVjaW1hbCh2KSxpPSIiLGY9IiIsZz0iIixyPSIiLHA9MCxsPTAsYj12PDAsZD0tMSxvPXRoaXMub0Zvcm1hdE9wdGlvbnM7aWYobj09Ik5hTiIpe3JldHVybiBufWlmKG8udHlwZT09Ti5DVVJSRU5DWSl7dmFyIEQ9dGhpcy5vTG9jYWxlRGF0YS5nZXRDdXJyZW5jeURpZ2l0cyhtKTtvLm1heEZyYWN0aW9uRGlnaXRzPUQ7by5taW5GcmFjdGlvbkRpZ2l0cz1EfWlmKGIpe249bi5zdWJzdHIoMSl9ZD1uLmluZGV4T2YoIi4iKTtpZihkPi0xKXtpPW4uc3Vic3RyKDAsZCk7Zj1uLnN1YnN0cihkKzEpfWVsc2V7aT1ufWlmKGkubGVuZ3RoPG8ubWluSW50ZWdlckRpZ2l0cyl7aT1xLnNhcC5wYWRMZWZ0KGksIjAiLG8ubWluSW50ZWdlckRpZ2l0cyl9ZWxzZSBpZihpLmxlbmd0aD5vLm1heEludGVnZXJEaWdpdHMpe2k9cS5zYXAucGFkTGVmdCgiIiwiPyIsby5tYXhJbnRlZ2VyRGlnaXRzKX1pZihmLmxlbmd0aDxvLm1pbkZyYWN0aW9uRGlnaXRzKXtmPXEuc2FwLnBhZFJpZ2h0KGYsIjAiLG8ubWluRnJhY3Rpb25EaWdpdHMpfWVsc2UgaWYoZi5sZW5ndGg+by5tYXhGcmFjdGlvbkRpZ2l0cyl7Zj1mLnN1YnN0cigwLG8ubWF4RnJhY3Rpb25EaWdpdHMpfWw9aS5sZW5ndGg7aWYoby5ncm91cGluZ0VuYWJsZWQmJmw+Myl7cD1sJTN8fDM7Zz1pLnN1YnN0cigwLHApO3doaWxlKHA8aS5sZW5ndGgpe2crPW8uZ3JvdXBpbmdTZXBhcmF0b3I7Zys9aS5zdWJzdHIocCwzKTtwKz0zfWk9Z31pZihiKXtyPW8ubWludXNTaWdufXIrPWk7aWYoZil7cis9by5kZWNpbWFsU2VwYXJhdG9yK2Z9aWYobSYmby5zaG93TWVhc3VyZSl7aWYoby50eXBlPT1OLkNVUlJFTkNZKXt2YXIgYz0nXHUwMGE0Jzt2YXIgUD1vLnBhdHRlcm47UD1QLnJlcGxhY2UoL1x1MDBhNC8sdGhpcy5vTG9jYWxlRGF0YS5nZXRDdXJyZW5jeVN5bWJvbChtKSk7UD1QLnJlcGxhY2UoL1swIy4sXSsvLHIpO3I9UH19aWYoc2FwLnVpLmdldENvcmUoKS5nZXRDb25maWd1cmF0aW9uKCkuZ2V0T3JpZ2luSW5mbygpKXtyPW5ldyBTdHJpbmcocik7ci5vcmlnaW5JbmZvPXtzb3VyY2U6IkNvbW1vbiBMb2NhbGUgRGF0YSBSZXBvc2l0b3J5Iixsb2NhbGU6dGhpcy5vTG9jYWxlLnRvU3RyaW5nKCl9fXJldHVybiByfTtOLnByb3RvdHlwZS5wYXJzZT1mdW5jdGlvbih2KXt2YXIgbz10aGlzLm9Gb3JtYXRPcHRpb25zLHI9Il5cXHMqKFsrLV0/KD86WzAtOVxcIitvLmdyb3VwaW5nU2VwYXJhdG9yKyJdK3xbMC05XFwiK28uZ3JvdXBpbmdTZXBhcmF0b3IrIl0qXFwiK28uZGVjaW1hbFNlcGFyYXRvcisiWzAtOV0rKShbZUVdWystXVswLTldKyk/KVxccyokIixSPSJeXFxzKihbKy1dP1swLTlcXCIrby5ncm91cGluZ1NlcGFyYXRvcisiXSspXFxzKiQiLGc9bmV3IFJlZ0V4cCgiXFwiK28uZ3JvdXBpbmdTZXBhcmF0b3IsImciKSxkPW5ldyBSZWdFeHAoIlxcIitvLmRlY2ltYWxTZXBhcmF0b3IsImciKSxhLGI9MDt2PXYucmVwbGFjZSgvXHMvZywiIik7aWYoby5pc0ludGVnZXIpe2E9bmV3IFJlZ0V4cChSKX1lbHNle2E9bmV3IFJlZ0V4cChyKX1pZighYS50ZXN0KHYpKXtyZXR1cm4gTmFOfXY9di5yZXBsYWNlKGcsIiIpO2lmKG8uaXNJbnRlZ2VyKXtiPXBhcnNlSW50KHYsMTApfWVsc2V7dj12LnJlcGxhY2UoZCwiLiIpO2I9cGFyc2VGbG9hdCh2KX1yZXR1cm4gYn07Ti5wcm90b3R5cGUuY29udmVydFRvRGVjaW1hbD1mdW5jdGlvbih2KXt2YXIgVj0iIit2LG4sYixkLGYsZSxwO2lmKFYuaW5kZXhPZigiZSIpPT0tMSYmVi5pbmRleE9mKCJFIik9PS0xKXtyZXR1cm4gVn12YXIgcj1WLm1hdGNoKC9eKFsrLV0/KSgoXGQrKSg/OlwuKFxkKykpPylbZUVdKFsrLV0/XGQrKSQvKTtuPXJbMV09PSItIjtiPXJbMl0ucmVwbGFjZSgvXC4vZywiIik7ZD1yWzNdP3JbM10ubGVuZ3RoOjA7Zj1yWzRdP3JbNF0ubGVuZ3RoOjA7ZT1wYXJzZUludChyWzVdLDEwKTtpZihlPjApe2lmKGU8Zil7cD1kK2U7Vj1iLnN1YnN0cigwLHApKyIuIitiLnN1YnN0cihwKX1lbHNle1Y9YjtlLT1mO2Zvcih2YXIgaT0wO2k8ZTtpKyspe1YrPSIwIn19fWVsc2V7aWYoLWU8ZCl7cD1kK2U7Vj1iLnN1YnN0cigwLHApKyIuIitiLnN1YnN0cihwKX1lbHNle1Y9YjtlKz1kO2Zvcih2YXIgaT0wO2k+ZTtpLS0pe1Y9IjAiK1Z9Vj0iMC4iK1Z9fWlmKG4pe1Y9Ii0iK1Z9cmV0dXJuIFZ9O3JldHVybiBOfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUubXZjLkNvbnRyb2xsZXInKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS5tdmMuQ29udHJvbGxlcicpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL212Yy9Db250cm9sbGVyIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL2Jhc2UvRXZlbnRQcm92aWRlciddLGZ1bmN0aW9uKHEsRSl7InVzZSBzdHJpY3QiO3ZhciByPXt9O3ZhciBDPUUuZXh0ZW5kKCJzYXAudWkuY29yZS5tdmMuQ29udHJvbGxlciIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKG4pe3ZhciB0PW51bGw7aWYodHlwZW9mKG4pPT0ic3RyaW5nIil7aWYoIXJbbl0pe3Euc2FwLnJlcXVpcmUoe21vZE5hbWU6bix0eXBlOiJjb250cm9sbGVyIn0pO2lmKCFyW25dKXt0aHJvdyBuZXcgRXJyb3IoIkNvbnRyb2xsZXIgdHlwZSAiK24rIiBpcyBzdGlsbCB1bmRlZmluZWQgYWZ0ZXIgdHJ5aW5nIHRvIGxvYWQgaXQuIil9fXQ9cltuXX1FLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtpZih0KXtxLmV4dGVuZCh0aGlzLHJbbl0pfX19KTt2YXIgYz17Im9uSW5pdCI6dHJ1ZSwib25FeGl0IjpmYWxzZSwib25CZWZvcmVSZW5kZXJpbmciOmZhbHNlLCJvbkFmdGVyUmVuZGVyaW5nIjp0cnVlfTtmdW5jdGlvbiBlKG8sbil7dmFyIGE7aWYoc2FwLnVpLmNvcmUuQ3VzdG9taXppbmdDb25maWd1cmF0aW9uKXt2YXIgYj1zYXAudWkuY29yZS5DdXN0b21pemluZ0NvbmZpZ3VyYXRpb24uZ2V0Q29udHJvbGxlckV4dGVuc2lvbihuKTtpZihiKXt2YXIgcz1iLmNvbnRyb2xsZXJOYW1lO3Euc2FwLmxvZy5pbmZvKCJDdXN0b21pemluZzogQ29udHJvbGxlciAnIituKyInIGlzIG5vdyBleHRlbmRlZCBieSAnIitzKyInIik7aWYoIXJbc10mJiFxLnNhcC5nZXRPYmplY3Qocykpe3Euc2FwLnJlcXVpcmUoe21vZE5hbWU6cyx0eXBlOiJjb250cm9sbGVyIn0pfWlmKCFyW3NdJiYhcS5zYXAuZ2V0T2JqZWN0KHMpKXtxLnNhcC5sb2cuZXJyb3IoIkF0dGVtcHQgdG8gbG9hZCBFeHRlbnNpb24gQ29udHJvbGxlciAiK3MrIiB3YXMgbm90IHN1Y2Nlc3NmdWwgLSBpcyB0aGUgQ29udHJvbGxlciBjb3JyZWN0bHkgZGVmaW5lZCBpbiBpdHMgZmlsZT8iKX1pZihhPXJbc10pe2Zvcih2YXIgbSBpbiBhKXtpZihjW21dIT09dW5kZWZpbmVkKXt2YXIgTz1vW21dO2lmKE8mJnR5cGVvZiBPPT09ImZ1bmN0aW9uIil7KGZ1bmN0aW9uKG0sTyl7b1ttXT1mdW5jdGlvbigpe2lmKGNbbV0pe08uYXBwbHkobyxhcmd1bWVudHMpO2FbbV0uYXBwbHkobyxhcmd1bWVudHMpfWVsc2V7YVttXS5hcHBseShvLGFyZ3VtZW50cyk7Ty5hcHBseShvLGFyZ3VtZW50cyl9fX0pKG0sTyl9ZWxzZXtvW21dPWFbbV19fWVsc2V7b1ttXT1hW21dfX1yZXR1cm4gb31lbHNle319ZWxzZXtxLnNhcC5sb2cuZGVidWcoIkN1c3RvbWl6aW5nOiBubyBDb250cm9sbGVyIGV4dGVuc2lvbiBmb3VuZCBmb3IgQ29udHJvbGxlciAnIituKyInLiIpfX1yZXR1cm4gb31zYXAudWkuY29udHJvbGxlcj1mdW5jdGlvbihuLG8pe2lmKCFuKXt0aHJvdyBuZXcgRXJyb3IoIkNvbnRyb2xsZXIgbmFtZSAoJ3NOYW1lJyBwYXJhbWV0ZXIpIGlzIHJlcXVpcmVkIil9aWYoIW8pe2lmKCFyW25dJiYhcS5zYXAuZ2V0T2JqZWN0KG4pKXtxLnNhcC5yZXF1aXJlKHttb2ROYW1lOm4sdHlwZToiY29udHJvbGxlciJ9KX1pZihyW25dKXt2YXIgYT1uZXcgQyhuKTthPWUoYSxuKTtyZXR1cm4gYX1lbHNle3ZhciBiPXEuc2FwLmdldE9iamVjdChuKTtpZih0eXBlb2YgYj09PSJmdW5jdGlvbiImJmIucHJvdG90eXBlIGluc3RhbmNlb2YgQyl7dmFyIGE9bmV3IGIoKTthPWUoYSxuKTtyZXR1cm4gYX19dGhyb3cgbmV3IEVycm9yKCJDb250cm9sbGVyICIrbisiIGNvdWxkbid0IGJlIGluc3RhbnRpYXRlZCIpfWVsc2V7cltuXT1vfX07Qy5wcm90b3R5cGUuZ2V0Vmlldz1mdW5jdGlvbigpe3JldHVybiB0aGlzLm9WaWV3fTtDLnByb3RvdHlwZS5ieUlkPWZ1bmN0aW9uKGkpe3JldHVybiB0aGlzLm9WaWV3P3RoaXMub1ZpZXcuYnlJZChpKTp1bmRlZmluZWR9O0MucHJvdG90eXBlLmNyZWF0ZUlkPWZ1bmN0aW9uKGkpe3JldHVybiB0aGlzLm9WaWV3P3RoaXMub1ZpZXcuY3JlYXRlSWQoaSk6dW5kZWZpbmVkfTtDLnByb3RvdHlwZS5nZXRPd25lckNvbXBvbmVudD1mdW5jdGlvbigpe3Euc2FwLnJlcXVpcmUoInNhcC51aS5jb3JlLkNvbXBvbmVudCIpO3ZhciB2PXNhcC51aS5jb3JlLkNvbXBvbmVudC5nZXRPd25lcklkRm9yKHRoaXMuZ2V0VmlldygpKTtpZih2PT09dW5kZWZpbmVkKXtyZXR1cm4gdW5kZWZpbmVkfXJldHVybiBzYXAudWkuY29tcG9uZW50KHYpfTtDLnByb3RvdHlwZS5jb25uZWN0VG9WaWV3PWZ1bmN0aW9uKHYpe3RoaXMub1ZpZXc9djtpZih0aGlzLm9uSW5pdCl7di5hdHRhY2hBZnRlckluaXQodGhpcy5vbkluaXQsdGhpcyl9aWYodGhpcy5vbkV4aXQpe3YuYXR0YWNoQmVmb3JlRXhpdCh0aGlzLm9uRXhpdCx0aGlzKX1pZih0aGlzLm9uQWZ0ZXJSZW5kZXJpbmcpe3YuYXR0YWNoQWZ0ZXJSZW5kZXJpbmcodGhpcy5vbkFmdGVyUmVuZGVyaW5nLHRoaXMpfWlmKHRoaXMub25CZWZvcmVSZW5kZXJpbmcpe3YuYXR0YWNoQmVmb3JlUmVuZGVyaW5nKHRoaXMub25CZWZvcmVSZW5kZXJpbmcsdGhpcyl9fTtyZXR1cm4gQ30sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLm12Yy5IVE1MVmlld1JlbmRlcmVyJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUubXZjLkhUTUxWaWV3UmVuZGVyZXInKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9tdmMvSFRNTFZpZXdSZW5kZXJlciIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJy4vVmlld1JlbmRlcmVyJ10sZnVuY3Rpb24ocSxWKXsidXNlIHN0cmljdCI7dmFyIEg9e307SC5yZW5kZXI9ZnVuY3Rpb24ocixjKXt2YXIgYT1yO2Eud3JpdGUoIjxkaXYiKTthLndyaXRlQ29udHJvbERhdGEoYyk7YS5hZGRDbGFzcygic2FwVWlWaWV3Iik7YS5hZGRDbGFzcygic2FwVWlIVE1MVmlldyIpO1YuYWRkRGlzcGxheUNsYXNzKGEsYyk7aWYoYy5nZXRXaWR0aCgpKXthLmFkZFN0eWxlKCJ3aWR0aCIsYy5nZXRXaWR0aCgpKX1pZihjLmdldEhlaWdodCgpKXthLmFkZFN0eWxlKCJoZWlnaHQiLGMuZ2V0SGVpZ2h0KCkpfWEud3JpdGVTdHlsZXMoKTthLndyaXRlQ2xhc3NlcygpO2Eud3JpdGUoIj4iKTt2YXIgaD1jLl9vVGVtcGxhdGUuaW5uZXJIVE1MO3ZhciBiPWMuZ2V0Q29udGVudCgpO3ZhciBkPVtdO3ZhciBlPWZ1bmN0aW9uKGMpe3ZhciB0PUguX2dldEhUTUwoYSxjLGgpO2lmKHQpe2g9dH1lbHNle2QucHVzaChjKX19O2lmKGIpe2lmKHEuaXNBcnJheShiKSl7Zm9yKHZhciBpPTA7aTxiLmxlbmd0aDtpKyspe2UoYltpXSl9fWVsc2UgaWYoYil7ZShiKX19YS53cml0ZShoKTtmb3IodmFyIGk9MDtpPGQubGVuZ3RoO2krKyl7YS5yZW5kZXJDb250cm9sKGRbaV0pfWEud3JpdGUoIjwvZGl2PiIpfTtILl9nZXRIVE1MPWZ1bmN0aW9uKHIsYyxoKXt2YXIgaT1jLmdldElkKCk7aD1oLnJlcGxhY2UoLyg8ZGl2KS9naSwiXG4kMSIpO3ZhciBhPW5ldyBSZWdFeHAoJzxkaXYuKj9kYXRhLXNhcC11aS1pZD0iJytpKyciLio/PjwvZGl2PicsImdpIik7dmFyIG09YS5leGVjKGgpO2lmKG0pe2g9aC5yZXBsYWNlKG1bMF0sci5nZXRIVE1MKGMpKTtyZXR1cm4gaH1lbHNle3JldHVybiIifX07cmV0dXJuIEh9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS5tdmMuSlNPTlZpZXdSZW5kZXJlcicpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLm12Yy5KU09OVmlld1JlbmRlcmVyJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvbXZjL0pTT05WaWV3UmVuZGVyZXIiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCcuL1ZpZXdSZW5kZXJlciddLGZ1bmN0aW9uKHEsVil7InVzZSBzdHJpY3QiO3ZhciBKPXt9O0oucmVuZGVyPWZ1bmN0aW9uKHIsYyl7dmFyIGE9cjthLndyaXRlKCI8ZGl2Iik7YS53cml0ZUNvbnRyb2xEYXRhKGMpO2EuYWRkQ2xhc3MoInNhcFVpVmlldyIpO2EuYWRkQ2xhc3MoInNhcFVpSlNPTlZpZXciKTtWLmFkZERpc3BsYXlDbGFzcyhhLGMpO2lmKGMuZ2V0V2lkdGgoKSl7YS5hZGRTdHlsZSgid2lkdGgiLGMuZ2V0V2lkdGgoKSl9aWYoYy5nZXRIZWlnaHQoKSl7YS5hZGRTdHlsZSgiaGVpZ2h0IixjLmdldEhlaWdodCgpKX1hLndyaXRlU3R5bGVzKCk7YS53cml0ZUNsYXNzZXMoKTthLndyaXRlKCI+Iik7dmFyIGI9Yy5nZXRDb250ZW50KCk7aWYoYil7aWYoYi5sZW5ndGgmJiEoYiBpbnN0YW5jZW9mIHNhcC51aS5jb3JlLkNvbnRyb2wpKXtmb3IodmFyIGk9MDtpPGIubGVuZ3RoO2krKyl7YS5yZW5kZXJDb250cm9sKGJbaV0pfX1lbHNle2EucmVuZGVyQ29udHJvbChjLmdldENvbnRlbnQoKSl9fWEud3JpdGUoIjwvZGl2PiIpfTtyZXR1cm4gSn0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLm12Yy5KU1ZpZXdSZW5kZXJlcicpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLm12Yy5KU1ZpZXdSZW5kZXJlcicpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL212Yy9KU1ZpZXdSZW5kZXJlciIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJy4vVmlld1JlbmRlcmVyJ10sZnVuY3Rpb24ocSxWKXsidXNlIHN0cmljdCI7dmFyIEo9e307Si5yZW5kZXI9ZnVuY3Rpb24ocixjKXt2YXIgYT1yO2Eud3JpdGUoIjxkaXYiKTthLndyaXRlQ29udHJvbERhdGEoYyk7YS5hZGRDbGFzcygic2FwVWlWaWV3Iik7YS5hZGRDbGFzcygic2FwVWlKU1ZpZXciKTtWLmFkZERpc3BsYXlDbGFzcyhhLGMpO2lmKGMuZ2V0V2lkdGgoKSl7YS5hZGRTdHlsZSgid2lkdGgiLGMuZ2V0V2lkdGgoKSl9aWYoYy5nZXRIZWlnaHQoKSl7YS5hZGRTdHlsZSgiaGVpZ2h0IixjLmdldEhlaWdodCgpKX1hLndyaXRlU3R5bGVzKCk7YS53cml0ZUNsYXNzZXMoKTthLndyaXRlKCI+Iik7dmFyIGI9Yy5nZXRDb250ZW50KCk7aWYoYil7aWYocS5pc0FycmF5KGIpKXtmb3IodmFyIGk9MDtpPGIubGVuZ3RoO2krKyl7YS5yZW5kZXJDb250cm9sKGJbaV0pfX1lbHNlIGlmKGIpe2EucmVuZGVyQ29udHJvbChiKX19YS53cml0ZSgiPC9kaXY+Iil9O3JldHVybiBKfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUubXZjLlRlbXBsYXRlVmlld1JlbmRlcmVyJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUubXZjLlRlbXBsYXRlVmlld1JlbmRlcmVyJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvbXZjL1RlbXBsYXRlVmlld1JlbmRlcmVyIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnLi9WaWV3UmVuZGVyZXInXSxmdW5jdGlvbihxLFYpeyJ1c2Ugc3RyaWN0Ijt2YXIgVD17fTtULnJlbmRlcj1mdW5jdGlvbihyLGMpe3ZhciBhPXI7YS53cml0ZSgiPGRpdiIpO2Eud3JpdGVDb250cm9sRGF0YShjKTthLmFkZENsYXNzKCJzYXBVaVZpZXciKTthLmFkZENsYXNzKCJzYXBVaVRtcGxWaWV3Iik7Vi5hZGREaXNwbGF5Q2xhc3MoYSxjKTthLmFkZFN0eWxlKCJ3aWR0aCIsYy5nZXRXaWR0aCgpKTthLmFkZFN0eWxlKCJoZWlnaHQiLGMuZ2V0SGVpZ2h0KCkpO2Eud3JpdGVTdHlsZXMoKTthLndyaXRlQ2xhc3NlcygpO2Eud3JpdGUoIj4iKTthLnJlbmRlckNvbnRyb2woYy5fb1RlbXBsYXRlKTthLndyaXRlKCI8L2Rpdj4iKX07cmV0dXJuIFR9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS5yb3V0aW5nLkhhc2hDaGFuZ2VyJykpew0KLy8gQ29weXJpZ2h0IChjKSAyMDEzIFNBUCBTRSwgQWxsIFJpZ2h0cyBSZXNlcnZlZA0KalF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS5yb3V0aW5nLkhhc2hDaGFuZ2VyJyk7alF1ZXJ5LnNhcC5yZXF1aXJlKCdzYXAudWkudGhpcmRwYXJ0eS5zaWduYWxzJyk7alF1ZXJ5LnNhcC5yZXF1aXJlKCdzYXAudWkudGhpcmRwYXJ0eS5oYXNoZXInKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9yb3V0aW5nL0hhc2hDaGFuZ2VyIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL2Jhc2UvRXZlbnRQcm92aWRlcicsJ3NhcC91aS90aGlyZHBhcnR5L3NpZ25hbHMnLCdzYXAvdWkvdGhpcmRwYXJ0eS9oYXNoZXInXSxmdW5jdGlvbihxLEUscyxoKXsidXNlIHN0cmljdCI7dmFyIEg9RS5leHRlbmQoInNhcC51aS5jb3JlLnJvdXRpbmcuSGFzaENoYW5nZXIiLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbigpe0UuYXBwbHkodGhpcyl9fSk7SC5wcm90b3R5cGUuaW5pdD1mdW5jdGlvbigpe2lmKHRoaXMuX2luaXRpYWxpemVkKXtxLnNhcC5sb2cuaW5mbygidGhpcyBIYXNoQ2hhbmdlciBpbnN0YW5jZSBoYXMgYWxyZWFkeSBiZWVuIGluaXRpYWxpemVkLiIpO3JldHVybiBmYWxzZX1oYXNoZXIuY2hhbmdlZC5hZGQodGhpcy5maXJlSGFzaENoYW5nZWQsdGhpcyk7aWYoIWhhc2hlci5pc0FjdGl2ZSgpKXtoYXNoZXIuaW5pdGlhbGl6ZWQuYWRkT25jZSh0aGlzLmZpcmVIYXNoQ2hhbmdlZCx0aGlzKTtoYXNoZXIuaW5pdCgpfWVsc2V7dGhpcy5maXJlSGFzaENoYW5nZWQoaGFzaGVyLmdldEhhc2goKSl9dGhpcy5faW5pdGlhbGl6ZWQ9dHJ1ZTtyZXR1cm4gdGhpcy5faW5pdGlhbGl6ZWR9O0gucHJvdG90eXBlLmZpcmVIYXNoQ2hhbmdlZD1mdW5jdGlvbihuLG8pe3RoaXMuZmlyZUV2ZW50KCJoYXNoQ2hhbmdlZCIse25ld0hhc2g6bixvbGRIYXNoOm99KX07SC5wcm90b3R5cGUuc2V0SGFzaD1mdW5jdGlvbihhKXt0aGlzLmZpcmVFdmVudCgiaGFzaFNldCIse3NIYXNoOmF9KTtoYXNoZXIuc2V0SGFzaChhKX07SC5wcm90b3R5cGUucmVwbGFjZUhhc2g9ZnVuY3Rpb24oYSl7dGhpcy5maXJlRXZlbnQoImhhc2hSZXBsYWNlZCIse3NIYXNoOmF9KTtoYXNoZXIucmVwbGFjZUhhc2goYSl9O0gucHJvdG90eXBlLmdldEhhc2g9ZnVuY3Rpb24oKXtyZXR1cm4gaGFzaGVyLmdldEhhc2goKX07SC5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbigpe2hhc2hlci5jaGFuZ2VkLnJlbW92ZSh0aGlzLmZpcmVIYXNoQ2hhbmdlZCx0aGlzKTtFLnByb3RvdHlwZS5kZXN0cm95LmFwcGx5KHRoaXMsYXJndW1lbnRzKX07KGZ1bmN0aW9uKCl7dmFyIF89bnVsbDtILmdldEluc3RhbmNlPWZ1bmN0aW9uKCl7aWYoIV8pe189bmV3IEgoKX1yZXR1cm4gX307SC5yZXBsYWNlSGFzaENoYW5nZXI9ZnVuY3Rpb24obyl7aWYoXyl7cS5leHRlbmQoby5tRXZlbnRSZWdpc3RyeSxfLm1FdmVudFJlZ2lzdHJ5KTtfLmRlc3Ryb3koKX1fPW99fSgpKTtyZXR1cm4gSH0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLnJvdXRpbmcuSGlzdG9yeScpKXsNCi8qIQ0KICogU0FQIFVJIGRldmVsb3BtZW50IHRvb2xraXQgZm9yIEhUTUw1IChTQVBVSTUvT3BlblVJNSkNCiAqIChjKSBDb3B5cmlnaHQgMjAwOS0yMDE0IFNBUCBTRSBvciBhbiBTQVAgYWZmaWxpYXRlIGNvbXBhbnkuIA0KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAtIHNlZSBMSUNFTlNFLnR4dC4NCiAqLw0KalF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS5yb3V0aW5nLkhpc3RvcnknKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9yb3V0aW5nL0hpc3RvcnkiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCcuL0hhc2hDaGFuZ2VyJ10sZnVuY3Rpb24ocSxIKXsidXNlIHN0cmljdCI7dmFyIGE9ZnVuY3Rpb24oaCl7dGhpcy5faUhpc3RvcnlMZW5ndGg9d2luZG93Lmhpc3RvcnkubGVuZ3RoO3RoaXMuYUhpc3Rvcnk9W107dGhpcy5fYklzSW5pdGlhbD10cnVlO2lmKCFoKXtxLnNhcC5sb2cuZXJyb3IoInNhcC51aS5jb3JlLnJvdXRpbmcuSGlzdG9yeSBjb25zdHJ1Y3RvciB3YXMgY2FsbGVkIGFuZCBpdCBkaWQgbm90IGdldCBhIGhhc2hDaGFuZ2VyIGFzIHBhcmFtZXRlciIpfXRoaXMuX29IYXNoQ2hhbmdlcj1oO3RoaXMuX29IYXNoQ2hhbmdlci5hdHRhY2hFdmVudCgiaGFzaENoYW5nZWQiLHRoaXMuX29uSGFzaENoYW5nZSx0aGlzKTt0aGlzLl9vSGFzaENoYW5nZXIuYXR0YWNoRXZlbnQoImhhc2hSZXBsYWNlZCIsdGhpcy5faGFzaFJlcGxhY2VkLHRoaXMpO3RoaXMuX29IYXNoQ2hhbmdlci5hdHRhY2hFdmVudCgiaGFzaFNldCIsdGhpcy5faGFzaFNldCx0aGlzKTt0aGlzLl9yZXNldCgpfTthLnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKG4pe3RoaXMuX29IYXNoQ2hhbmdlci5kZXRhY2hFdmVudCgiaGFzaENoYW5nZWQiLHRoaXMuX29uSGFzaENoYW5nZSx0aGlzKTt0aGlzLl9vSGFzaENoYW5nZXIuZGV0YWNoRXZlbnQoImhhc2hSZXBsYWNlZCIsdGhpcy5faGFzaFJlcGxhY2VkLHRoaXMpO3RoaXMuX29IYXNoQ2hhbmdlci5kZXRhY2hFdmVudCgiaGFzaFNldCIsdGhpcy5faGFzaFNldCx0aGlzKTt0aGlzLl9vSGFzaENoYW5nZXI9bnVsbH07YS5wcm90b3R5cGUuZ2V0RGlyZWN0aW9uPWZ1bmN0aW9uKG4pe2lmKG4hPT11bmRlZmluZWQmJnRoaXMuX2JJc0luaXRpYWwpe3JldHVybiB1bmRlZmluZWR9aWYobj09PXVuZGVmaW5lZCl7cmV0dXJuIHRoaXMuX3NDdXJyZW50RGlyZWN0aW9ufXJldHVybiB0aGlzLl9nZXREaXJlY3Rpb24obil9O2EucHJvdG90eXBlLmdldFByZXZpb3VzSGFzaD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmFIaXN0b3J5W3RoaXMuaUhpc3RvcnlQb3NpdGlvbi0xXX07YS5wcm90b3R5cGUuX3Jlc2V0PWZ1bmN0aW9uKCl7dGhpcy5hSGlzdG9yeS5sZW5ndGg9MDt0aGlzLmlIaXN0b3J5UG9zaXRpb249MDt0aGlzLl9iVW5rbm93bj10cnVlO3RoaXMuYUhpc3RvcnlbMF09dGhpcy5fb0hhc2hDaGFuZ2VyLmdldEhhc2goKX07YS5wcm90b3R5cGUuX2dldERpcmVjdGlvbj1mdW5jdGlvbihuLGgpe3ZhciBkPXNhcC51aS5jb3JlLnJvdXRpbmcuSGlzdG9yeURpcmVjdGlvbjtpZih0aGlzLl9vTmV4dEhhc2gmJnRoaXMuX29OZXh0SGFzaC5zSGFzaD09PW4pe3JldHVybiBkLk5ld0VudHJ5fWlmKHRoaXMuX2JVbmtub3duKXtyZXR1cm4gZC5Vbmtub3dufWlmKGgpe3JldHVybiBkLk5ld0VudHJ5fWlmKHRoaXMuYUhpc3RvcnlbdGhpcy5pSGlzdG9yeVBvc2l0aW9uKzFdPT09biYmdGhpcy5hSGlzdG9yeVt0aGlzLmlIaXN0b3J5UG9zaXRpb24tMV09PT1uKXtyZXR1cm4gZC5Vbmtub3dufWlmKHRoaXMuYUhpc3RvcnlbdGhpcy5pSGlzdG9yeVBvc2l0aW9uLTFdPT09bil7cmV0dXJuIGQuQmFja3dhcmRzfWlmKHRoaXMuYUhpc3RvcnlbdGhpcy5pSGlzdG9yeVBvc2l0aW9uKzFdPT09bil7cmV0dXJuIGQuRm9yd2FyZHN9cmV0dXJuIGQuVW5rbm93bn07YS5wcm90b3R5cGUuX29uSGFzaENoYW5nZT1mdW5jdGlvbihlKXt0aGlzLl9oYXNoQ2hhbmdlKGUuZ2V0UGFyYW1ldGVyKCJuZXdIYXNoIikpfTthLnByb3RvdHlwZS5faGFzaENoYW5nZT1mdW5jdGlvbihuKXt2YXIgZD1zYXAudWkuY29yZS5yb3V0aW5nLkhpc3RvcnlEaXJlY3Rpb24sYj13aW5kb3cuaGlzdG9yeS5sZW5ndGgsRDtpZih0aGlzLl9vTmV4dEhhc2gmJnRoaXMuX29OZXh0SGFzaC5iV2FzUmVwbGFjZWQmJnRoaXMuX29OZXh0SGFzaC5zSGFzaD09PW4pe3RoaXMuYUhpc3RvcnlbdGhpcy5pSGlzdG9yeVBvc2l0aW9uXT1uO3RoaXMuX29OZXh0SGFzaD1udWxsO3JldHVybn10aGlzLl9iSXNJbml0aWFsPWZhbHNlO0Q9dGhpcy5fc0N1cnJlbnREaXJlY3Rpb249dGhpcy5fZ2V0RGlyZWN0aW9uKG4sdGhpcy5faUhpc3RvcnlMZW5ndGg8d2luZG93Lmhpc3RvcnkubGVuZ3RoKTtpZih0aGlzLl9vTmV4dEhhc2gmJiF0aGlzLl9vTmV4dEhhc2guYldhc1JlcGxhY2VkKXt0aGlzLl9pSGlzdG9yeUxlbmd0aD1iKzF9ZWxzZXt0aGlzLl9pSGlzdG9yeUxlbmd0aD1ifWlmKHRoaXMuX29OZXh0SGFzaCl7dGhpcy5fb05leHRIYXNoPW51bGx9aWYoRD09PWQuVW5rbm93bil7dGhpcy5fcmVzZXQoKTtyZXR1cm59dGhpcy5fYlVua25vd249ZmFsc2U7aWYoRD09PWQuTmV3RW50cnkpe2lmKHRoaXMuaUhpc3RvcnlQb3NpdGlvbisxPHRoaXMuYUhpc3RvcnkubGVuZ3RoKXt0aGlzLmFIaXN0b3J5PXRoaXMuYUhpc3Rvcnkuc2xpY2UoMCx0aGlzLmlIaXN0b3J5UG9zaXRpb24rMSl9dGhpcy5hSGlzdG9yeS5wdXNoKG4pO3RoaXMuaUhpc3RvcnlQb3NpdGlvbis9MTtyZXR1cm59aWYoRD09PWQuRm9yd2FyZHMpe3RoaXMuaUhpc3RvcnlQb3NpdGlvbisrO3JldHVybn1pZihEPT09ZC5CYWNrd2FyZHMpe3RoaXMuaUhpc3RvcnlQb3NpdGlvbi0tfX07YS5wcm90b3R5cGUuX2hhc2hTZXQ9ZnVuY3Rpb24oZSl7dGhpcy5faGFzaENoYW5nZWRCeUFwcChlLmdldFBhcmFtZXRlcigic0hhc2giKSxmYWxzZSl9O2EucHJvdG90eXBlLl9oYXNoUmVwbGFjZWQ9ZnVuY3Rpb24oZSl7dGhpcy5faGFzaENoYW5nZWRCeUFwcChlLmdldFBhcmFtZXRlcigic0hhc2giKSx0cnVlKX07YS5wcm90b3R5cGUuX2hhc2hDaGFuZ2VkQnlBcHA9ZnVuY3Rpb24obix3KXt0aGlzLl9vTmV4dEhhc2g9e3NIYXNoOm4sYldhc1JlcGxhY2VkOnd9fTsoZnVuY3Rpb24oKXt2YXIgaT1uZXcgYShILmdldEluc3RhbmNlKCkpO2EuZ2V0SW5zdGFuY2U9ZnVuY3Rpb24oKXtyZXR1cm4gaX19KCkpO3JldHVybiBhfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUucm91dGluZy5Sb3V0ZScpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLnJvdXRpbmcuUm91dGUnKTtqUXVlcnkuc2FwLnJlcXVpcmUoJ3NhcC51aS50aGlyZHBhcnR5LmNyb3Nzcm9hZHMnKTtqUXVlcnkuc2FwLnJlcXVpcmUoJ3NhcC51aS50aGlyZHBhcnR5LnNpZ25hbHMnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9yb3V0aW5nL1JvdXRlIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL2Jhc2UvRXZlbnRQcm92aWRlcicsJ3NhcC91aS90aGlyZHBhcnR5L2Nyb3Nzcm9hZHMnLCdzYXAvdWkvdGhpcmRwYXJ0eS9zaWduYWxzJ10sZnVuY3Rpb24ocSxFLGMscyl7InVzZSBzdHJpY3QiO3ZhciBSPUUuZXh0ZW5kKCJzYXAudWkuY29yZS5yb3V0aW5nLlJvdXRlIix7Y29uc3RydWN0b3I6ZnVuY3Rpb24ocixDLHApe2lmKCFDLm5hbWUpe3Euc2FwLmxvZy5lcnJvcigiQSBuYW1lIGhhcyB0byBiZSBzcGVjaWZpZWQgZm9yIGV2ZXJ5IHJvdXRlIil9dmFyIHQ9dGhpcyx2PUMucGF0dGVybjtpZighcS5pc0FycmF5KHYpKXt2PVt2XX1pZihxLmlzQXJyYXkoQy5zdWJyb3V0ZXMpKXt2YXIgUz1DLnN1YnJvdXRlcztDLnN1YnJvdXRlcz17fTtxLmVhY2goUyxmdW5jdGlvbihpLG8pe0Muc3Vicm91dGVzW28ubmFtZV09b30pfXRoaXMuX2FQYXR0ZXJuPVtdO3RoaXMuX2FSb3V0ZXM9W107dGhpcy5fb1BhcmVudD1wO3RoaXMuX29Db25maWc9QztpZihDLnN1YnJvdXRlcyl7cS5lYWNoKEMuc3Vicm91dGVzLGZ1bmN0aW9uKGEsbyl7aWYoby5uYW1lPT11bmRlZmluZWQpe28ubmFtZT1hfXIuYWRkUm91dGUobyx0KX0pfWlmKEMucGF0dGVybj09PXVuZGVmaW5lZCl7cmV0dXJufXEuZWFjaCh2LGZ1bmN0aW9uKGksYSl7dC5fYVBhdHRlcm5baV09YTt0Ll9hUm91dGVzW2ldPXIuX29Sb3V0ZXIuYWRkUm91dGUoYSk7dC5fYVJvdXRlc1tpXS5tYXRjaGVkLmFkZChmdW5jdGlvbigpe3ZhciBBPXt9O3EuZWFjaChhcmd1bWVudHMsZnVuY3Rpb24oYixkKXtBW3QuX2FSb3V0ZXNbaV0uX3BhcmFtc0lkc1tiXV09ZH0pO3QuX3JvdXRlTWF0Y2hlZChyLEEsdHJ1ZSl9KX0pfSxtZXRhZGF0YTp7cHVibGljTWV0aG9kczpbImdldFVSTCIsImdldFBhdHRlcm4iXX19KTtSLnByb3RvdHlwZS5nZXRVUkw9ZnVuY3Rpb24ocCl7cmV0dXJuIHRoaXMuX2FSb3V0ZXNbMF0uaW50ZXJwb2xhdGUocCl9O1IucHJvdG90eXBlLmdldFBhdHRlcm49ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYVBhdHRlcm5bMF19O1IucHJvdG90eXBlLl9yb3V0ZU1hdGNoZWQ9ZnVuY3Rpb24ocixhLGkpe3ZhciB2LHAsdCxUO2lmKHRoaXMuX29QYXJlbnQpe3A9dGhpcy5fb1BhcmVudC5fcm91dGVNYXRjaGVkKHIsYSk7dD1wLm9UYXJnZXRQYXJlbnQ7VD1wLm9UYXJnZXRDb250cm9sfXZhciBDPXEuZXh0ZW5kKHt9LHIuX29Db25maWcsdGhpcy5fb0NvbmZpZyk7aWYoKFR8fEMudGFyZ2V0Q29udHJvbCkmJkMudGFyZ2V0QWdncmVnYXRpb24pe2lmKCF0KXtpZihDLnRhcmdldFBhcmVudCl7VD1zYXAudWkuZ2V0Q29yZSgpLmJ5SWQoQy50YXJnZXRQYXJlbnQpLmJ5SWQoQy50YXJnZXRDb250cm9sKX19ZWxzZXtpZihDLnRhcmdldENvbnRyb2wpe1Q9dC5ieUlkKEMudGFyZ2V0Q29udHJvbCl9fWlmKCFUKXtUPXNhcC51aS5nZXRDb3JlKCkuYnlJZChDLnRhcmdldENvbnRyb2wpfWlmKFQpe3ZhciBBPVQuZ2V0TWV0YWRhdGEoKS5nZXRKU09OS2V5cygpW0MudGFyZ2V0QWdncmVnYXRpb25dO2lmKEEpe3ZhciBWPUMudmlldztpZihDLnZpZXdQYXRoKXtWPUMudmlld1BhdGgrIi4iK1Z9dj1yLmdldFZpZXcoVixDLnZpZXdUeXBlLEMudmlld0lkKTtpZihDLmNsZWFyVGFyZ2V0PT09dHJ1ZSl7VFtBLl9zUmVtb3ZlQWxsTXV0YXRvcl0oKX1UW0EuX3NNdXRhdG9yXSh2KX1lbHNle3Euc2FwLmxvZy5lcnJvcigiQ29udHJvbCAiK0MudGFyZ2V0Q29udHJvbCsiIGRvZXMgbm90IGhhcyBhbiBhZ2dyZWdhdGlvbiBjYWxsZWQgIitDLnRhcmdldEFnZ3JlZ2F0aW9uKX19ZWxzZXtxLnNhcC5sb2cuZXJyb3IoIkNvbnRyb2wgd2l0aCBJRCAiK0MudGFyZ2V0Q29udHJvbCsiIGNvdWxkIG5vdCBiZSBmb3VuZCIpfX1pZihDLmNhbGxiYWNrKXtDLmNhbGxiYWNrKHRoaXMsYSxDLFQsdil9ci5maXJlUm91dGVNYXRjaGVkKHtuYW1lOkMubmFtZSxhcmd1bWVudHM6YSx0YXJnZXRDb250cm9sOlQsdmlldzp2LGNvbmZpZzpDfSk7aWYoaSl7ci5maXJlUm91dGVQYXR0ZXJuTWF0Y2hlZCh7bmFtZTpDLm5hbWUsYXJndW1lbnRzOmEsdGFyZ2V0Q29udHJvbDpULHZpZXc6dixjb25maWc6Q30pfXJldHVybntvVGFyZ2V0UGFyZW50OnYsb1RhcmdldENvbnRyb2w6VH19O3JldHVybiBSfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUudXRpbC5zZXJpYWxpemVyLlNlcmlhbGl6ZXInKSl7DQovKg0KICogU0FQIFVJIGRldmVsb3BtZW50IHRvb2xraXQgZm9yIEhUTUw1IChTQVBVSTUvT3BlblVJNSkNCiAqIChjKSBDb3B5cmlnaHQgMjAwOS0yMDE0IFNBUCBTRSBvciBhbiBTQVAgYWZmaWxpYXRlIGNvbXBhbnkuIA0KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAtIHNlZSBMSUNFTlNFLnR4dC4NCiAqLw0KalF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS51dGlsLnNlcmlhbGl6ZXIuU2VyaWFsaXplcicpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL3V0aWwvc2VyaWFsaXplci9TZXJpYWxpemVyIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL2Jhc2UvRXZlbnRQcm92aWRlciddLGZ1bmN0aW9uKHEsRSl7InVzZSBzdHJpY3QiO3ZhciBTPUUuZXh0ZW5kKCJzYXAudWkuY29yZS51dGlsLnNlcmlhbGl6ZXIuU2VyaWFsaXplciIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKHIscyxiLHcsZil7RS5hcHBseSh0aGlzKTt0aGlzLl9vUm9vdENvbnRyb2w9cjt0aGlzLl9kZWxlZ2F0ZT1zO3RoaXMuX2JTa2lwUm9vdD0hIWI7dGhpcy5fb1dpbmRvdz13fHx3aW5kb3c7dGhpcy5fZm5Ta2lwQWdncmVnYXRpb25zPWZ9fSk7Uy5wcm90b3R5cGUuc2VyaWFsaXplPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NlcmlhbGl6ZVJlY3Vyc2l2ZSh0aGlzLl9vUm9vdENvbnRyb2wsMCl9O1MucHJvdG90eXBlLl9zZXJpYWxpemVSZWN1cnNpdmU9ZnVuY3Rpb24oYyxsLGEsYil7dmFyIEM9W107dmFyIHc9KCF0aGlzLl9iU2tpcFJvb3R8fGwhPT0wKTtpZih3KXtjLmdldE1ldGFkYXRhKCkuZ2V0SlNPTktleXMoKTt2YXIgcz10aGlzLl9kZWxlZ2F0ZS5zdGFydChjLGEsYik7dmFyIG09dGhpcy5fZGVsZWdhdGUubWlkZGxlKGMsYSxiKTtDLnB1c2gocyttKX1pZihsPT09MHx8ISh0aGlzLl9mblNraXBBZ2dyZWdhdGlvbnMmJnRoaXMuX2ZuU2tpcEFnZ3JlZ2F0aW9ucyhjKSkpe3ZhciBBPWMuZ2V0TWV0YWRhdGEoKS5nZXRBbGxBZ2dyZWdhdGlvbnMoKTtpZihBKXtmb3IodmFyIG4gaW4gQSl7dmFyIGU9W107dmFyIG89QVtuXTt2YXIgdj1jW28uX3NHZXR0ZXJdKCk7aWYoYy5nZXRCaW5kaW5nUGF0aChuKSYmYy5nZXRCaW5kaW5nSW5mbyhuKS50ZW1wbGF0ZSl7ZS5wdXNoKGMuZ2V0QmluZGluZ0luZm8obikudGVtcGxhdGUpfWVsc2UgaWYodiYmdi5sZW5ndGgpe2Zvcih2YXIgaT0wO2k8di5sZW5ndGg7aSsrKXt2YXIgTz12W2ldO2lmKE8gaW5zdGFuY2VvZiB0aGlzLl9vV2luZG93LnNhcC51aS5jb3JlLkVsZW1lbnQpe2UucHVzaChPKX19fWVsc2UgaWYodiBpbnN0YW5jZW9mIHRoaXMuX29XaW5kb3cuc2FwLnVpLmNvcmUuRWxlbWVudCl7ZS5wdXNoKHYpfWlmKGUubGVuZ3RoPjApe2lmKHcpe0MucHVzaCh0aGlzLl9kZWxlZ2F0ZS5zdGFydEFnZ3JlZ2F0aW9uKGMsbikpfXZhciBkPXRoaXMuX2lzRGVmYXVsdEFnZ3JlZ2F0aW9uKGMsbik7Zm9yKHZhciBpPTA7aTxlLmxlbmd0aDtpKyspe0MucHVzaCh0aGlzLl9zZXJpYWxpemVSZWN1cnNpdmUoZVtpXSxsKzEsbixkKSl9aWYodyl7Qy5wdXNoKHRoaXMuX2RlbGVnYXRlLmVuZEFnZ3JlZ2F0aW9uKGMsbikpfX19fX1pZih3KXt2YXIgZj10aGlzLl9kZWxlZ2F0ZS5lbmQoYyxhLGIpO0MucHVzaChmKX1yZXR1cm4gQy5qb2luKCIiKX07Uy5wcm90b3R5cGUuX2lzRGVmYXVsdEFnZ3JlZ2F0aW9uPWZ1bmN0aW9uKGMsYSl7cmV0dXJuIGMuZ2V0TWV0YWRhdGEoKS5nZXREZWZhdWx0QWdncmVnYXRpb25OYW1lKCk9PT1hfTtyZXR1cm4gU30sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLnV0aWwuc2VyaWFsaXplci5kZWxlZ2F0ZS5EZWxlZ2F0ZScpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLnV0aWwuc2VyaWFsaXplci5kZWxlZ2F0ZS5EZWxlZ2F0ZScpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL3V0aWwvc2VyaWFsaXplci9kZWxlZ2F0ZS9EZWxlZ2F0ZSIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ3NhcC91aS9iYXNlL0V2ZW50UHJvdmlkZXInXSxmdW5jdGlvbihxLEUpeyJ1c2Ugc3RyaWN0Ijt2YXIgRD1FLmV4dGVuZCgic2FwLnVpLmNvcmUudXRpbC5zZXJpYWxpemVyLmRlbGVnYXRlLkRlbGVnYXRlIix7Y29uc3RydWN0b3I6ZnVuY3Rpb24oKXtFLmFwcGx5KHRoaXMpfX0pO0QucHJvdG90eXBlLnN0YXJ0PWZ1bmN0aW9uKGMsYSxpKXtyZXR1cm4iIn07RC5wcm90b3R5cGUubWlkZGxlPWZ1bmN0aW9uKGMsYSxpKXtyZXR1cm4iIn07RC5wcm90b3R5cGUuZW5kPWZ1bmN0aW9uKGMsYSxpKXtyZXR1cm4iIn07RC5wcm90b3R5cGUuc3RhcnRBZ2dyZWdhdGlvbj1mdW5jdGlvbihjLGEpe3JldHVybiIifTtELnByb3RvdHlwZS5lbmRBZ2dyZWdhdGlvbj1mdW5jdGlvbihjLGEpe3JldHVybiIifTtyZXR1cm4gRH0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLnV0aWwuc2VyaWFsaXplci5kZWxlZ2F0ZS5IVE1MJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUudXRpbC5zZXJpYWxpemVyLmRlbGVnYXRlLkhUTUwnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS91dGlsL3NlcmlhbGl6ZXIvZGVsZWdhdGUvSFRNTCIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJy4vRGVsZWdhdGUnXSxmdW5jdGlvbihxLEQpeyJ1c2Ugc3RyaWN0Ijt2YXIgSD1ELmV4dGVuZCgic2FwLnVpLmNvcmUudXRpbC5zZXJpYWxpemVyLmRlbGVnYXRlLkhUTUwiLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbihnLEcpe0QuYXBwbHkodGhpcyk7dGhpcy5fZm5HZXRDb250cm9sSWQ9Zzt0aGlzLl9mbkdldEV2ZW50SGFuZGxlck5hbWU9R319KTtILnByb3RvdHlwZS5zdGFydEFnZ3JlZ2F0aW9uPWZ1bmN0aW9uKGMsYSl7cmV0dXJuJzxkaXYgZGF0YS1zYXAtdWktYWdncmVnYXRpb249IicrYSsnIj4nfTtILnByb3RvdHlwZS5lbmRBZ2dyZWdhdGlvbj1mdW5jdGlvbihjLGEpe3JldHVybic8L2Rpdj4nfTtILnByb3RvdHlwZS5zdGFydD1mdW5jdGlvbihjLGEsaSl7cmV0dXJuIjxkaXYifTtILnByb3RvdHlwZS5taWRkbGU9ZnVuY3Rpb24oYyxhLGIpe3ZhciBoPVtdO3ZhciBJPSh0aGlzLl9mbkdldENvbnRyb2xJZCk/dGhpcy5fZm5HZXRDb250cm9sSWQoYyk6Yy5nZXRJZCgpO2lmKEkuaW5kZXhPZigiX18iKSE9PTApe2gucHVzaCh0aGlzLl9jcmVhdGVBdHRyaWJ1dGUoImlkIixJKSl9aC5wdXNoKHRoaXMuX2NyZWF0ZUF0dHJpYnV0ZSgiZGF0YS1zYXAtdWktdHlwZSIsYy5nZXRNZXRhZGF0YSgpLl9zQ2xhc3NOYW1lKSk7aWYoYy5hQ3VzdG9tU3R5bGVDbGFzc2VzKXt2YXIgQz1jLmFDdXN0b21TdHlsZUNsYXNzZXM7dmFyIGQ9W107Zm9yKHZhciBpPTA7aTxDLmxlbmd0aDtpKyspe3ZhciBzPUNbaV07aWYoIXEuc2FwLnN0YXJ0c1dpdGgocywic2FwTSIpJiYhcS5zYXAuc3RhcnRzV2l0aChzLCJzYXBVaSIpKXtkLnB1c2gocyl9fWlmKGQubGVuZ3RoPjApe2gucHVzaCh0aGlzLl9jcmVhdGVBdHRyaWJ1dGUoImNsYXNzIixkLmpvaW4oIiAiKSkpfX1pZih0aGlzLl9mbkdldEV2ZW50SGFuZGxlck5hbWUpe3ZhciBlPWMuZ2V0TWV0YWRhdGEoKS5nZXRBbGxFdmVudHMoKTtmb3IodmFyIEUgaW4gZSl7aWYoYy5oYXNMaXN0ZW5lcnMoRSkpe3ZhciBmPWMubUV2ZW50UmVnaXN0cnlbRV07Zm9yKHZhciBpPTA7aTxmLmxlbmd0aDtpKyspe3ZhciBnPXRoaXMuX2ZuR2V0RXZlbnRIYW5kbGVyTmFtZShmW2ldKTtpZihnKXtoLnB1c2godGhpcy5fY3JlYXRlQXR0cmlidXRlKCJkYXRhLSIrdGhpcy5fY3JlYXRlSHRtbEF0dHJpYnV0ZU5hbWUoRSksZykpO2JyZWFrfX19fX12YXIgQT1jLmdldE1ldGFkYXRhKCkuZ2V0QWxsQXNzb2NpYXRpb25zKCk7dGhpcy5fY3JlYXRlQXR0cmlidXRlcyhoLGMsQSxmdW5jdGlvbihuLHYpe2lmKEFbbl0ubXVsdGlwbGUpe3JldHVybiB2LmpvaW4oIiAiKX1yZXR1cm4gdn0sZnVuY3Rpb24obix2KXtyZXR1cm4odiE9PW51bGwmJnR5cGVvZiB2IT09dW5kZWZpbmVkJiZ2IT09IiIpfSk7dmFyIHA9Yy5nZXRNZXRhZGF0YSgpLmdldEFsbFByb3BlcnRpZXMoKTt0aGlzLl9jcmVhdGVBdHRyaWJ1dGVzKGgsYyxwLG51bGwsZnVuY3Rpb24obix2KXtyZXR1cm4oISFjLmdldEJpbmRpbmdJbmZvKG4pfHwodiE9PW51bGwmJnR5cGVvZiB2IT09dW5kZWZpbmVkJiZ2IT09IiIpKX0pO3ZhciBvPWMuZ2V0TWV0YWRhdGEoKS5nZXRBbGxBZ2dyZWdhdGlvbnMoKTt0aGlzLl9jcmVhdGVBdHRyaWJ1dGVzKGgsYyxvLG51bGwsZnVuY3Rpb24obix2KXtpZighYy5nZXRCaW5kaW5nSW5mbyhuKSYmKCF2fHwodHlwZW9mIHYhPT0ic3RyaW5nIikpKXtyZXR1cm4gZmFsc2V9cmV0dXJuIHRydWV9KTtoLnB1c2goJz4nKTtyZXR1cm4gaC5qb2luKCcnKX07SC5wcm90b3R5cGUuZW5kPWZ1bmN0aW9uKGMsYSxpKXtyZXR1cm4iPC9kaXY+In07SC5wcm90b3R5cGUuX2NyZWF0ZUF0dHJpYnV0ZXM9ZnVuY3Rpb24oaCxjLG8sZyx2KXtmb3IodmFyIG4gaW4gbyl7dmFyIHA9b1tuXTt2YXIgRz1wLl9zR2V0dGVyO2lmKGNbR10pe3ZhciBWPWNbR10oKTtWPWc/ZyhuLFYpOlY7aWYoIWMuZ2V0QmluZGluZ0luZm8obikpe2lmKFYhPT1wLmRlZmF1bHRWYWx1ZSl7aWYoIXZ8fHYobixWKSl7aC5wdXNoKHRoaXMuX2NyZWF0ZUF0dHJpYnV0ZSgiZGF0YS0iK3RoaXMuX2NyZWF0ZUh0bWxBdHRyaWJ1dGVOYW1lKG4pLFYpKX19fWVsc2V7aC5wdXNoKHRoaXMuX2NyZWF0ZURhdGFCaW5kaW5nQXR0cmlidXRlKGMsbixWKSl9fX19O0gucHJvdG90eXBlLl9jcmVhdGVEYXRhQmluZGluZ0F0dHJpYnV0ZT1mdW5jdGlvbihjLG4sdil7dmFyIGI9Yy5nZXRCaW5kaW5nSW5mbyhuKTt2YXIgQj1udWxsO3ZhciBwPXY7aWYoIWIuYmluZGluZ1N0cmluZyl7aWYoYi5iaW5kaW5nKXt2YXIgQz1iLmJpbmRpbmcuZ2V0TWV0YWRhdGEoKS5nZXROYW1lKCk7aWYoQz09PSJzYXAudWkubW9kZWwuUHJvcGVydHlCaW5kaW5nInx8Qz09PSJzYXAudWkubW9kZWwucmVzb3VyY2UuUmVzb3VyY2VQcm9wZXJ0eUJpbmRpbmciKXtCPWIuYmluZGluZy5nZXRWYWx1ZSgpfX1pZihiLnBhcnRzKXtiPWIucGFydHNbMF19dmFyIG09Yi5tb2RlbDtpZihCPT09dnx8Qj09PW51bGwpe3A9InsiKyhtPyhtKyI+IitiLnBhdGgpOmIucGF0aCkrIn0ifX1lbHNle3A9Yi5iaW5kaW5nU3RyaW5nfXJldHVybiB0aGlzLl9jcmVhdGVBdHRyaWJ1dGUoImRhdGEtIit0aGlzLl9jcmVhdGVIdG1sQXR0cmlidXRlTmFtZShuKSxwKX07SC5wcm90b3R5cGUuX2NyZWF0ZUF0dHJpYnV0ZT1mdW5jdGlvbihhLHYpe3JldHVybicgJythKyc9IicrdisnIid9O0gucHJvdG90eXBlLl9jcmVhdGVIdG1sQXR0cmlidXRlTmFtZT1mdW5jdGlvbihuKXtyZXR1cm4gcS5zYXAuaHlwaGVuKG4pfTtyZXR1cm4gSH0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLnV0aWwuc2VyaWFsaXplci5kZWxlZ2F0ZS5YTUwnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS51dGlsLnNlcmlhbGl6ZXIuZGVsZWdhdGUuWE1MJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvdXRpbC9zZXJpYWxpemVyL2RlbGVnYXRlL1hNTCIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJy4vRGVsZWdhdGUnXSxmdW5jdGlvbihxLEQpeyJ1c2Ugc3RyaWN0Ijt2YXIgWD1ELmV4dGVuZCgic2FwLnVpLmNvcmUudXRpbC5zZXJpYWxpemVyLmRlbGVnYXRlLlhNTCIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKGQsZyxHLG0pe0QuYXBwbHkodGhpcyk7dGhpcy5fc0RlZmF1bHROYW1lc3BhY2U9ZDt0aGlzLl9mbkdldENvbnRyb2xJZD1nO3RoaXMuX2ZuTWVtb3JpemVQYWNrYWdlPW07dGhpcy5fZm5HZXRFdmVudEhhbmRsZXJOYW1lPUd9fSk7WC5wcm90b3R5cGUuc3RhcnRBZ2dyZWdhdGlvbj1mdW5jdGlvbihjLGEpe3JldHVybic8Jyt0aGlzLl9jcmVhdGVBZ2dyZWdhdGlvbk5hbWUoYyxhKSsnPid9O1gucHJvdG90eXBlLmVuZEFnZ3JlZ2F0aW9uPWZ1bmN0aW9uKGMsYSl7cmV0dXJuJzwvJyt0aGlzLl9jcmVhdGVBZ2dyZWdhdGlvbk5hbWUoYyxhKSsnPid9O1gucHJvdG90eXBlLnN0YXJ0PWZ1bmN0aW9uKGMsYSxpKXtyZXR1cm4iPCIrdGhpcy5fY3JlYXRlVGFnTmFtZShjKX07WC5wcm90b3R5cGUuZW5kPWZ1bmN0aW9uKGMsYSxpKXtyZXR1cm4iPC8iK3RoaXMuX2NyZWF0ZVRhZ05hbWUoYykrIj4ifTtYLnByb3RvdHlwZS5taWRkbGU9ZnVuY3Rpb24oYyxhLGIpe3ZhciB4PVtdO3ZhciBJPSh0aGlzLl9mbkdldENvbnRyb2xJZCk/dGhpcy5fZm5HZXRDb250cm9sSWQoYyk6Yy5nZXRJZCgpO2lmKEkuaW5kZXhPZigiX18iKSE9PTApe3gucHVzaCh0aGlzLl9jcmVhdGVBdHRyaWJ1dGUoImlkIixJKSl9aWYoYy5hQ3VzdG9tU3R5bGVDbGFzc2VzKXt2YXIgQz1jLmFDdXN0b21TdHlsZUNsYXNzZXM7dmFyIGQ9W107Zm9yKHZhciBpPTA7aTxDLmxlbmd0aDtpKyspe3ZhciBzPUNbaV07aWYoIXEuc2FwLnN0YXJ0c1dpdGgocywic2FwTSIpJiYhcS5zYXAuc3RhcnRzV2l0aChzLCJzYXBVaSIpKXtkLnB1c2gocyl9fWlmKGQubGVuZ3RoPjApe3gucHVzaCh0aGlzLl9jcmVhdGVBdHRyaWJ1dGUoImNsYXNzIixkLmpvaW4oIiAiKSkpfX1pZih0aGlzLl9mbkdldEV2ZW50SGFuZGxlck5hbWUpe3ZhciBlPWMuZ2V0TWV0YWRhdGEoKS5nZXRBbGxFdmVudHMoKTtmb3IodmFyIEUgaW4gZSl7aWYoYy5oYXNMaXN0ZW5lcnMoRSkpe3ZhciBmPWMubUV2ZW50UmVnaXN0cnlbRV07Zm9yKHZhciBpPTA7aTxmLmxlbmd0aDtpKyspe3ZhciBoPXRoaXMuX2ZuR2V0RXZlbnRIYW5kbGVyTmFtZShmW2ldKTtpZihoKXt4LnB1c2godGhpcy5fY3JlYXRlQXR0cmlidXRlKEUsaCkpO2JyZWFrfX19fX12YXIgQT1jLmdldE1ldGFkYXRhKCkuZ2V0QWxsQXNzb2NpYXRpb25zKCk7dGhpcy5fY3JlYXRlQXR0cmlidXRlcyh4LGMsQSxmdW5jdGlvbihuLHYpe2lmKEFbbl0ubXVsdGlwbGUpe3JldHVybiB2LmpvaW4oIiAiKX1yZXR1cm4gdn0sZnVuY3Rpb24obix2KXtyZXR1cm4odiE9PW51bGwmJnR5cGVvZiB2IT09dW5kZWZpbmVkJiZ2IT09IiIpfSk7dmFyIHA9Yy5nZXRNZXRhZGF0YSgpLmdldEFsbFByb3BlcnRpZXMoKTt0aGlzLl9jcmVhdGVBdHRyaWJ1dGVzKHgsYyxwLG51bGwsZnVuY3Rpb24obix2KXtyZXR1cm4oISFjLmdldEJpbmRpbmdJbmZvKG4pfHwodiE9PW51bGwmJnR5cGVvZiB2IT09dW5kZWZpbmVkJiZ2IT09IiIpKX0pO3ZhciBvPWMuZ2V0TWV0YWRhdGEoKS5nZXRBbGxBZ2dyZWdhdGlvbnMoKTt0aGlzLl9jcmVhdGVBdHRyaWJ1dGVzKHgsYyxvLG51bGwsZnVuY3Rpb24obix2KXtpZighYy5nZXRCaW5kaW5nSW5mbyhuKSYmKCF2fHwodHlwZW9mIHYhPT0ic3RyaW5nIikpKXtyZXR1cm4gZmFsc2V9cmV0dXJuIHRydWV9KTt4LnB1c2goJz4nKTtyZXR1cm4geC5qb2luKCcnKX07WC5wcm90b3R5cGUuX2NyZWF0ZUF0dHJpYnV0ZXM9ZnVuY3Rpb24oeCxjLG8sZyx2KXtmb3IodmFyIG4gaW4gbyl7dmFyIHA9b1tuXTt2YXIgRz1wLl9zR2V0dGVyO2lmKGNbR10pe3ZhciBWPWNbR10oKTtWPWc/ZyhuLFYpOlY7aWYoIWMuZ2V0QmluZGluZ0luZm8obikpe2lmKFYhPT1wLmRlZmF1bHRWYWx1ZSl7aWYoIXZ8fHYobixWKSl7eC5wdXNoKHRoaXMuX2NyZWF0ZUF0dHJpYnV0ZShuLFYpKX19fWVsc2V7eC5wdXNoKHRoaXMuX2NyZWF0ZURhdGFCaW5kaW5nQXR0cmlidXRlKGMsbixWKSl9fX19O1gucHJvdG90eXBlLl9jcmVhdGVEYXRhQmluZGluZ0F0dHJpYnV0ZT1mdW5jdGlvbihjLG4sdil7dmFyIGI9Yy5nZXRCaW5kaW5nSW5mbyhuKTt2YXIgQj1udWxsO3ZhciBwPXY7aWYoIWIuYmluZGluZ1N0cmluZyl7aWYoYi5iaW5kaW5nKXt2YXIgQz1iLmJpbmRpbmcuZ2V0TWV0YWRhdGEoKS5nZXROYW1lKCk7aWYoQz09PSJzYXAudWkubW9kZWwuUHJvcGVydHlCaW5kaW5nInx8Qz09PSJzYXAudWkubW9kZWwucmVzb3VyY2UuUmVzb3VyY2VQcm9wZXJ0eUJpbmRpbmciKXtCPWIuYmluZGluZy5nZXRWYWx1ZSgpfX1pZihiLnBhcnRzKXtiPWIucGFydHNbMF19dmFyIG09Yi5tb2RlbDtpZihCPT09dnx8Qj09PW51bGwpe3A9InsiKyhtPyhtKyI+IitiLnBhdGgpOmIucGF0aCkrIn0ifX1lbHNle3A9Yi5iaW5kaW5nU3RyaW5nfXJldHVybiB0aGlzLl9jcmVhdGVBdHRyaWJ1dGUobixwKX07WC5wcm90b3R5cGUuX2NyZWF0ZUF0dHJpYnV0ZT1mdW5jdGlvbihhLHYpe3JldHVybicgJythKyc9IicrdisnIid9O1gucHJvdG90eXBlLl9jcmVhdGVUYWdOYW1lPWZ1bmN0aW9uKGMpe3ZhciBDPWMuZ2V0TWV0YWRhdGEoKS5fc0NsYXNzTmFtZTt2YXIgbD1DLmxhc3RJbmRleE9mKCIuIik7dmFyIHM9KGw9PT0tMSk/QzpDLnN1YnN0cmluZyhsKzEpO3ZhciBwPShsPT09LTEpP0M6Qy5zdWJzdHJpbmcoMCxsKTtpZih0aGlzLl9mbk1lbW9yaXplUGFja2FnZSl7dGhpcy5fZm5NZW1vcml6ZVBhY2thZ2UoYyxwKX1yZXR1cm4gdGhpcy5fY3JlYXRlTmFtZXNwYWNlKHAscyl9O1gucHJvdG90eXBlLl9jcmVhdGVBZ2dyZWdhdGlvbk5hbWU9ZnVuY3Rpb24oYyxhKXt2YXIgQz1jLmdldE1ldGFkYXRhKCkuX3NDbGFzc05hbWU7dmFyIGw9Qy5sYXN0SW5kZXhPZigiLiIpO3ZhciBwPShsPT09LTEpP0M6Qy5zdWJzdHJpbmcoMCxsKTtyZXR1cm4gdGhpcy5fY3JlYXRlTmFtZXNwYWNlKHAsYSl9O1gucHJvdG90eXBlLl9jcmVhdGVOYW1lc3BhY2U9ZnVuY3Rpb24obixOKXtpZih0aGlzLl9zRGVmYXVsdE5hbWVzcGFjZSYmdGhpcy5fc0RlZmF1bHROYW1lc3BhY2U9PT1uKXtyZXR1cm4gTn1lbHNle3JldHVybiBuKyI6IitOfX07cmV0dXJuIFh9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS53cy5XZWJTb2NrZXQnKSl7DQovKiENCiAqIFNBUCBVSSBkZXZlbG9wbWVudCB0b29sa2l0IGZvciBIVE1MNSAoU0FQVUk1L09wZW5VSTUpDQogKiAoYykgQ29weXJpZ2h0IDIwMDktMjAxNCBTQVAgU0Ugb3IgYW4gU0FQIGFmZmlsaWF0ZSBjb21wYW55LiANCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgLSBzZWUgTElDRU5TRS50eHQuDQogKi8NCmpRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUud3MuV2ViU29ja2V0Jyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvd3MvV2ViU29ja2V0IixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL0RldmljZScsJ3NhcC91aS9iYXNlL0V2ZW50UHJvdmlkZXInLCcuL1JlYWR5U3RhdGUnXSxmdW5jdGlvbihxLEQsRSxSKXsidXNlIHN0cmljdCI7dmFyIFc9RS5leHRlbmQoInNhcC51aS5jb3JlLndzLldlYlNvY2tldCIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKHUscCl7RS5hcHBseSh0aGlzKTtpZighRC5zdXBwb3J0LndlYnNvY2tldCl7dGhyb3cgbmV3IEVycm9yKCJCcm93c2VyIGRvZXMgbm90IHN1cHBvcnQgV2ViU29ja2V0cy4iKX1pZih0eXBlb2YodSkhPT0ic3RyaW5nIil7dGhyb3cgbmV3IEVycm9yKCJzVXJsIG11c3QgYmUgYSBzdHJpbmcuIil9aWYodHlwZW9mKHApIT09J3VuZGVmaW5lZCcmJiFxLmlzQXJyYXkocCkmJnR5cGVvZihwKSE9PSdzdHJpbmcnKXt0aHJvdyBuZXcgRXJyb3IoImFQcm90b2NvbHMgbXVzdCBiZSBhIHN0cmluZywgYXJyYXkgb2Ygc3RyaW5ncyBvciB1bmRlZmluZWQuIil9dGhpcy5fb3BlbkNvbm5lY3Rpb24odSxwKX0sbWV0YWRhdGE6e3B1YmxpY01ldGhvZHM6WyJzZW5kIiwiY2xvc2UiLCJnZXRSZWFkeVN0YXRlIiwiZ2V0UHJvdG9jb2wiXX19KTtXLnByb3RvdHlwZS5nZXRJbnRlcmZhY2U9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc307Vy5NX0VWRU5UUz17T3Blbjoib3BlbiIsQ2xvc2U6ImNsb3NlIixFcnJvcjoiZXJyb3IiLE1lc3NhZ2U6Im1lc3NhZ2UifTtXLnByb3RvdHlwZS5hdHRhY2hPcGVuPWZ1bmN0aW9uKGQsZixsKXt0aGlzLmF0dGFjaEV2ZW50KCJvcGVuIixkLGYsbCk7cmV0dXJuIHRoaXN9O1cucHJvdG90eXBlLmRldGFjaE9wZW49ZnVuY3Rpb24oZixsKXt0aGlzLmRldGFjaEV2ZW50KCJvcGVuIixmLGwpO3JldHVybiB0aGlzfTtXLnByb3RvdHlwZS5maXJlT3Blbj1mdW5jdGlvbihhKXt0aGlzLmZpcmVFdmVudCgib3BlbiIsYSk7cmV0dXJuIHRoaXN9O1cucHJvdG90eXBlLmF0dGFjaENsb3NlPWZ1bmN0aW9uKGQsZixsKXt0aGlzLmF0dGFjaEV2ZW50KCJjbG9zZSIsZCxmLGwpO3JldHVybiB0aGlzfTtXLnByb3RvdHlwZS5kZXRhY2hDbG9zZT1mdW5jdGlvbihmLGwpe3RoaXMuZGV0YWNoRXZlbnQoImNsb3NlIixmLGwpO3JldHVybiB0aGlzfTtXLnByb3RvdHlwZS5maXJlQ2xvc2U9ZnVuY3Rpb24oYSl7dGhpcy5maXJlRXZlbnQoImNsb3NlIixhKTtyZXR1cm4gdGhpc307Vy5wcm90b3R5cGUuYXR0YWNoRXJyb3I9ZnVuY3Rpb24oZCxmLGwpe3RoaXMuYXR0YWNoRXZlbnQoImVycm9yIixkLGYsbCk7cmV0dXJuIHRoaXN9O1cucHJvdG90eXBlLmRldGFjaEVycm9yPWZ1bmN0aW9uKGYsbCl7dGhpcy5kZXRhY2hFdmVudCgiZXJyb3IiLGYsbCk7cmV0dXJuIHRoaXN9O1cucHJvdG90eXBlLmZpcmVFcnJvcj1mdW5jdGlvbihhKXt0aGlzLmZpcmVFdmVudCgiZXJyb3IiLGEpO3JldHVybiB0aGlzfTtXLnByb3RvdHlwZS5hdHRhY2hNZXNzYWdlPWZ1bmN0aW9uKGQsZixsKXt0aGlzLmF0dGFjaEV2ZW50KCJtZXNzYWdlIixkLGYsbCk7cmV0dXJuIHRoaXN9O1cucHJvdG90eXBlLmRldGFjaE1lc3NhZ2U9ZnVuY3Rpb24oZixsKXt0aGlzLmRldGFjaEV2ZW50KCJtZXNzYWdlIixmLGwpO3JldHVybiB0aGlzfTtXLnByb3RvdHlwZS5maXJlTWVzc2FnZT1mdW5jdGlvbihhKXt0aGlzLmZpcmVFdmVudCgibWVzc2FnZSIsYSk7cmV0dXJuIHRoaXN9O1cucHJvdG90eXBlLl9yZXNvbHZlRnVsbFVybD1mdW5jdGlvbih1KXt2YXIgZj0nJztpZighL153c3M/OlwvXC8vLnRlc3QodSkpe3ZhciBsPWRvY3VtZW50LmxvY2F0aW9uO2Y9KChsLnByb3RvY29sPT09J2h0dHBzOicpPyd3c3M6Ly8nOid3czovLycpK2wuaG9zdDtpZih1LnN1YnN0cigwLDEpPT09Jy8nKXtmKz11fWVsc2V7Zis9bC5wYXRobmFtZS5zdWJzdHJpbmcoMCxsLnBhdGhuYW1lLmxhc3RJbmRleE9mKCcvJykpKycvJyt1fX1lbHNle2Y9dX1yZXR1cm4gZn07Vy5wcm90b3R5cGUuX29wZW5Db25uZWN0aW9uPWZ1bmN0aW9uKHUscCl7dmFyIHU9dGhpcy5fcmVzb2x2ZUZ1bGxVcmwodSk7dGhpcy5fb1dzPSh0eXBlb2YocCk9PT0ndW5kZWZpbmVkJyk/bmV3IHdpbmRvdy5XZWJTb2NrZXQodSk6bmV3IHdpbmRvdy5XZWJTb2NrZXQodSxwKTt0aGlzLl9vV3Mub25vcGVuPXEucHJveHkodGhpcy5fb25vcGVuLHRoaXMpO3RoaXMuX29Xcy5vbmNsb3NlPXEucHJveHkodGhpcy5fb25jbG9zZSx0aGlzKTt0aGlzLl9vV3Mub25tZXNzYWdlPXEucHJveHkodGhpcy5fb25tZXNzYWdlLHRoaXMpO3RoaXMuX29Xcy5vbmVycm9yPXEucHJveHkodGhpcy5fb25lcnJvcix0aGlzKX07Vy5wcm90b3R5cGUuX29ub3Blbj1mdW5jdGlvbigpe3RoaXMuZmlyZU9wZW4oKX07Vy5wcm90b3R5cGUuX29uY2xvc2U9ZnVuY3Rpb24oYyl7dGhpcy5maXJlQ2xvc2Uoe2NvZGU6Yy5jb2RlLHJlYXNvbjpjLnJlYXNvbix3YXNDbGVhbjpjLndhc0NsZWFufSl9O1cucHJvdG90eXBlLl9vbmVycm9yPWZ1bmN0aW9uKGUpe3RoaXMuZmlyZUVycm9yKCl9O1cucHJvdG90eXBlLl9vbm1lc3NhZ2U9ZnVuY3Rpb24obSl7dGhpcy5maXJlTWVzc2FnZSh7ZGF0YTptLmRhdGF9KX07Vy5wcm90b3R5cGUuc2VuZD1mdW5jdGlvbihtKXtpZih0aGlzLmdldFJlYWR5U3RhdGUoKT09PVIuT1BFTil7dGhpcy5fb1dzLnNlbmQobSl9ZWxzZSBpZih0aGlzLmdldFJlYWR5U3RhdGUoKT09PVIuQ09OTkVDVElORyl7dGhpcy5hdHRhY2hFdmVudE9uY2UoIm9wZW4iLGZ1bmN0aW9uKGUpe3RoaXMuX29Xcy5zZW5kKG0pfSl9ZWxzZXtxLnNhcC5sb2cud2FybmluZygiVW5hYmxlIHRvIHNlbmQgV2ViU29ja2V0IG1lc3NhZ2UuICIrIkNvbm5lY3Rpb24gaXMgYWxyZWFkeSBjbG9zZWQgb3IgY2xvc2luZy4gbWVzc2FnZTogIittKX1yZXR1cm4gdGhpc307Vy5wcm90b3R5cGUuY2xvc2U9ZnVuY3Rpb24oYyxyKXtpZih0eXBlb2YoYyk9PT0nc3RyaW5nJyl7cj1jO2M9dW5kZWZpbmVkfWM9KHR5cGVvZihjKT09PSd1bmRlZmluZWQnKT8xMDAwOmM7cj0odHlwZW9mKHIpPT09J3VuZGVmaW5lZCcpPyIiOnI7aWYodGhpcy5nZXRSZWFkeVN0YXRlKCk9PT1SLk9QRU4pe3RoaXMuX29Xcy5jbG9zZShjLHIpfWVsc2UgaWYodGhpcy5nZXRSZWFkeVN0YXRlKCk9PT1SLkNPTk5FQ1RJTkcpe3RoaXMuYXR0YWNoRXZlbnRPbmNlKCJvcGVuIixmdW5jdGlvbihlKXt0aGlzLl9vV3MuY2xvc2UoYyxyKX0pfWVsc2V7dmFyIHQ9Jyc7c3dpdGNoKHRoaXMuZ2V0UmVhZHlTdGF0ZSgpKXtjYXNlIFIuQ0xPU0VEOnQ9IkNvbm5lY3Rpb24gaXMgYWxyZWFkeSBjbG9zZWQuIjticmVhaztjYXNlIFIuQ0xPU0lORzp0PSJDb25uZWN0aW9uIGlzIGFscmVhZHkgY2xvc2luZy4iO2JyZWFrfXEuc2FwLmxvZy53YXJuaW5nKCJVbmFibGUgdG8gY2xvc2UgV2ViU29ja2V0IGNvbm5lY3Rpb24uICIrdCl9cmV0dXJuIHRoaXN9O1cucHJvdG90eXBlLmdldFJlYWR5U3RhdGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb1dzLnJlYWR5U3RhdGV9O1cucHJvdG90eXBlLmdldFByb3RvY29sPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29Xcy5wcm90b2NvbH07cmV0dXJuIFd9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkubW9kZWwuQmluZGluZycpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5tb2RlbC5CaW5kaW5nJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL21vZGVsL0JpbmRpbmciLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvYmFzZS9FdmVudFByb3ZpZGVyJywnLi9DaGFuZ2VSZWFzb24nXSxmdW5jdGlvbihxLEUsQyl7InVzZSBzdHJpY3QiO3ZhciBCPUUuZXh0ZW5kKCJzYXAudWkubW9kZWwuQmluZGluZyIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKG0scCxjLFApe0UuYXBwbHkodGhpcyk7dGhpcy5vTW9kZWw9bTt0aGlzLmJSZWxhdGl2ZT0hcS5zYXAuc3RhcnRzV2l0aChwLCcvJyk7dGhpcy5zUGF0aD1wO3RoaXMub0NvbnRleHQ9Yzt0aGlzLm1QYXJhbWV0ZXJzPVA7dGhpcy5iSW5pdGlhbD1mYWxzZTt0aGlzLmJTdXNwZW5kZWQ9ZmFsc2V9LG1ldGFkYXRhOnsiYWJzdHJhY3QiOnRydWUscHVibGljTWV0aG9kczpbImdldFBhdGgiLCJnZXRDb250ZXh0IiwiZ2V0TW9kZWwiLCJhdHRhY2hDaGFuZ2UiLCJkZXRhY2hDaGFuZ2UiLCJyZWZyZXNoIiwiaXNJbml0aWFsIiwiYXR0YWNoRGF0YVJlcXVlc3RlZCIsImRldGFjaERhdGFSZXF1ZXN0ZWQiLCJhdHRhY2hEYXRhUmVjZWl2ZWQiLCJkZXRhY2hEYXRhUmVjZWl2ZWQiLCJzdXNwZW5kIiwicmVzdW1lIl19fSk7Qi5wcm90b3R5cGUuZ2V0UGF0aD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnNQYXRofTtCLnByb3RvdHlwZS5nZXRDb250ZXh0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub0NvbnRleHR9O0IucHJvdG90eXBlLnNldENvbnRleHQ9ZnVuY3Rpb24oYyl7aWYodGhpcy5vQ29udGV4dCE9Yyl7dGhpcy5vQ29udGV4dD1jO3RoaXMuX2ZpcmVDaGFuZ2UoKX19O0IucHJvdG90eXBlLmdldE1vZGVsPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub01vZGVsfTtCLnByb3RvdHlwZS5hdHRhY2hDaGFuZ2U9ZnVuY3Rpb24oZixsKXtpZighdGhpcy5oYXNMaXN0ZW5lcnMoImNoYW5nZSIpKXt0aGlzLm9Nb2RlbC5hZGRCaW5kaW5nKHRoaXMpfXRoaXMuYXR0YWNoRXZlbnQoImNoYW5nZSIsZixsKX07Qi5wcm90b3R5cGUuZGV0YWNoQ2hhbmdlPWZ1bmN0aW9uKGYsbCl7dGhpcy5kZXRhY2hFdmVudCgiY2hhbmdlIixmLGwpO2lmKCF0aGlzLmhhc0xpc3RlbmVycygiY2hhbmdlIikpe3RoaXMub01vZGVsLnJlbW92ZUJpbmRpbmcodGhpcyl9fTtCLnByb3RvdHlwZS5fZmlyZUNoYW5nZT1mdW5jdGlvbihhKXt0aGlzLmZpcmVFdmVudCgiY2hhbmdlIixhKX07Qi5wcm90b3R5cGUuYXR0YWNoRGF0YVJlcXVlc3RlZD1mdW5jdGlvbihmLGwpe3RoaXMuYXR0YWNoRXZlbnQoImRhdGFSZXF1ZXN0ZWQiLGYsbCl9O0IucHJvdG90eXBlLmRldGFjaERhdGFSZXF1ZXN0ZWQ9ZnVuY3Rpb24oZixsKXt0aGlzLmRldGFjaEV2ZW50KCJkYXRhUmVxdWVzdGVkIixmLGwpfTtCLnByb3RvdHlwZS5maXJlRGF0YVJlcXVlc3RlZD1mdW5jdGlvbihhKXt0aGlzLmZpcmVFdmVudCgiZGF0YVJlcXVlc3RlZCIsYSl9O0IucHJvdG90eXBlLmF0dGFjaERhdGFSZWNlaXZlZD1mdW5jdGlvbihmLGwpe3RoaXMuYXR0YWNoRXZlbnQoImRhdGFSZWNlaXZlZCIsZixsKX07Qi5wcm90b3R5cGUuZGV0YWNoRGF0YVJlY2VpdmVkPWZ1bmN0aW9uKGYsbCl7dGhpcy5kZXRhY2hFdmVudCgiZGF0YVJlY2VpdmVkIixmLGwpfTtCLnByb3RvdHlwZS5maXJlRGF0YVJlY2VpdmVkPWZ1bmN0aW9uKGEpe3RoaXMuZmlyZUV2ZW50KCJkYXRhUmVjZWl2ZWQiLGEpfTtCLnByb3RvdHlwZS51cGRhdGVSZXF1aXJlZD1mdW5jdGlvbihtKXtyZXR1cm4gbSYmdGhpcy5nZXRNb2RlbCgpPT09bX07Qi5wcm90b3R5cGUuY2hlY2tVcGRhdGU9ZnVuY3Rpb24oZil7aWYoIXRoaXMuYlN1c3BlbmRlZCl7dGhpcy5fZmlyZUNoYW5nZSh7cmVhc29uOkMuQ2hhbmdlfSl9fTtCLnByb3RvdHlwZS5yZWZyZXNoPWZ1bmN0aW9uKGYpe3RoaXMuY2hlY2tVcGRhdGUoZil9O0IucHJvdG90eXBlLmluaXRpYWxpemU9ZnVuY3Rpb24oKXt0aGlzLmNoZWNrVXBkYXRlKHRydWUpO3JldHVybiB0aGlzfTtCLnByb3RvdHlwZS5fcmVmcmVzaD1mdW5jdGlvbigpe3RoaXMucmVmcmVzaCgpfTtCLnByb3RvdHlwZS5pc0luaXRpYWw9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5iSW5pdGlhbH07Qi5wcm90b3R5cGUuaXNSZWxhdGl2ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmJSZWxhdGl2ZX07Qi5wcm90b3R5cGUuYXR0YWNoRXZlbnRzPWZ1bmN0aW9uKGUpe2lmKCFlKXtyZXR1cm4gdGhpc312YXIgdD10aGlzO3EuZWFjaChlLGZ1bmN0aW9uKHMsaCl7dmFyIG09ImF0dGFjaCIrcy5zdWJzdHJpbmcoMCwxKS50b1VwcGVyQ2FzZSgpK3Muc3Vic3RyaW5nKDEpO2lmKHRbbV0pe3RbbV0oaCl9ZWxzZXtxLnNhcC5sb2cud2FybmluZyh0LnRvU3RyaW5nKCkrIiBoYXMgbm8gaGFuZGxlciBmb3IgZXZlbnQgJyIrcysiJyIpfX0pO3JldHVybiB0aGlzfTtCLnByb3RvdHlwZS5kZXRhY2hFdmVudHM9ZnVuY3Rpb24oZSl7aWYoIWUpe3JldHVybiB0aGlzfXZhciB0PXRoaXM7cS5lYWNoKGUsZnVuY3Rpb24ocyxoKXt2YXIgbT0iZGV0YWNoIitzLnN1YnN0cmluZygwLDEpLnRvVXBwZXJDYXNlKCkrcy5zdWJzdHJpbmcoMSk7aWYodFttXSl7dFttXShoKX1lbHNle3Euc2FwLmxvZy53YXJuaW5nKHQudG9TdHJpbmcoKSsiIGhhcyBubyBoYW5kbGVyIGZvciBldmVudCAnIitzKyInIil9fSk7cmV0dXJuIHRoaXN9O0IucHJvdG90eXBlLmF0dGFjaFJlZnJlc2g9ZnVuY3Rpb24oZixsKXt0aGlzLmF0dGFjaEV2ZW50KCJyZWZyZXNoIixmLGwpfTtCLnByb3RvdHlwZS5kZXRhY2hSZWZyZXNoPWZ1bmN0aW9uKGYsbCl7dGhpcy5kZXRhY2hFdmVudCgicmVmcmVzaCIsZixsKX07Qi5wcm90b3R5cGUuX2ZpcmVSZWZyZXNoPWZ1bmN0aW9uKGEpe3RoaXMuZmlyZUV2ZW50KCJyZWZyZXNoIixhKX07Qi5wcm90b3R5cGUuc3VzcGVuZD1mdW5jdGlvbigpe3RoaXMuYlN1c3BlbmRlZD10cnVlfTtCLnByb3RvdHlwZS5yZXN1bWU9ZnVuY3Rpb24oKXt0aGlzLmJTdXNwZW5kZWQ9ZmFsc2U7dGhpcy5jaGVja1VwZGF0ZSgpfTtyZXR1cm4gQn0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5tb2RlbC5Db250ZXh0Jykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLm1vZGVsLkNvbnRleHQnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvbW9kZWwvQ29udGV4dCIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ3NhcC91aS9iYXNlL0V2ZW50UHJvdmlkZXInXSxmdW5jdGlvbihxLEUpeyJ1c2Ugc3RyaWN0Ijt2YXIgQz1zYXAudWkuYmFzZS5PYmplY3QuZXh0ZW5kKCJzYXAudWkubW9kZWwuQ29udGV4dCIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKG0scCl7c2FwLnVpLmJhc2UuT2JqZWN0LmFwcGx5KHRoaXMpO3RoaXMub01vZGVsPW07dGhpcy5zUGF0aD1wfSxtZXRhZGF0YTp7ImFic3RyYWN0Ijp0cnVlLHB1YmxpY01ldGhvZHM6WyJnZXRNb2RlbCIsImdldFBhdGgiLCJnZXRQcm9wZXJ0eSIsImdldE9iamVjdCJdfX0pO0MucHJvdG90eXBlLmdldE1vZGVsPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub01vZGVsfTtDLnByb3RvdHlwZS5nZXRQYXRoPWZ1bmN0aW9uKHApe3JldHVybiB0aGlzLnNQYXRoKyhwPyIvIitwOiIiKX07Qy5wcm90b3R5cGUuZ2V0UHJvcGVydHk9ZnVuY3Rpb24ocCl7cmV0dXJuIHRoaXMub01vZGVsLmdldFByb3BlcnR5KHAsdGhpcyl9O0MucHJvdG90eXBlLmdldE9iamVjdD1mdW5jdGlvbihwKXtyZXR1cm4gdGhpcy5vTW9kZWwuZ2V0T2JqZWN0KHAsdGhpcyl9O0MucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc1BhdGh9O3JldHVybiBDfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLm1vZGVsLkNvbnRleHRCaW5kaW5nJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLm1vZGVsLkNvbnRleHRCaW5kaW5nJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL21vZGVsL0NvbnRleHRCaW5kaW5nIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnLi9CaW5kaW5nJ10sZnVuY3Rpb24ocSxCKXsidXNlIHN0cmljdCI7dmFyIEM9Qi5leHRlbmQoInNhcC51aS5tb2RlbC5Db250ZXh0QmluZGluZyIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKG0scCxjLFAsZSl7Qi5jYWxsKHRoaXMsbSxwLGMsUCxlKTt0aGlzLm9FbGVtZW50Q29udGV4dD1udWxsO3RoaXMuYkluaXRpYWw9dHJ1ZX0sbWV0YWRhdGE6e3B1YmxpY01ldGhvZHM6WyJnZXRFbGVtZW50Q29udGV4dCJdfX0pO0MucHJvdG90eXBlLmNoZWNrVXBkYXRlPWZ1bmN0aW9uKGYpe307Qy5wcm90b3R5cGUuZ2V0Qm91bmRDb250ZXh0PWZ1bmN0aW9uKGMpe3JldHVybiB0aGlzLm9FbGVtZW50Q29udGV4dH07cmV0dXJuIEN9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkubW9kZWwuRmlsdGVyJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLm1vZGVsLkZpbHRlcicpO3NhcC51aS5kZWZpbmUoInNhcC91aS9tb2RlbC9GaWx0ZXIiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCcuL0ZpbHRlck9wZXJhdG9yJ10sZnVuY3Rpb24ocSxGKXsidXNlIHN0cmljdCI7dmFyIGE9c2FwLnVpLmJhc2UuT2JqZWN0LmV4dGVuZCgic2FwLnVpLm1vZGVsLkZpbHRlciIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKHAsbyx2LFYpe2lmKHR5cGVvZiBwPT09Im9iamVjdCImJiFxLmlzQXJyYXkocCkpe3ZhciBmPXA7dGhpcy5zUGF0aD1mLnBhdGg7dGhpcy5zT3BlcmF0b3I9Zi5vcGVyYXRvcjt0aGlzLm9WYWx1ZTE9Zi52YWx1ZTE7dGhpcy5vVmFsdWUyPWYudmFsdWUyO3RoaXMuYUZpbHRlcnM9Zi5maWx0ZXJzfHxmLmFGaWx0ZXJzO3RoaXMuYkFuZD1mLmFuZHx8Zi5iQW5kfWVsc2V7aWYocS5pc0FycmF5KHApKXt0aGlzLmFGaWx0ZXJzPXB9ZWxzZXt0aGlzLnNQYXRoPXB9aWYocS50eXBlKG8pPT09ImJvb2xlYW4iKXt0aGlzLmJBbmQ9b31lbHNle3RoaXMuc09wZXJhdG9yPW99dGhpcy5vVmFsdWUxPXY7dGhpcy5vVmFsdWUyPVZ9aWYocS5pc0FycmF5KHRoaXMuYUZpbHRlcnMpJiYhdGhpcy5zUGF0aCYmIXRoaXMuc09wZXJhdG9yJiYhdGhpcy5vVmFsdWUxJiYhdGhpcy5vVmFsdWUyKXt0aGlzLl9iTXVsdGlGaWx0ZXI9dHJ1ZTtxLmVhY2godGhpcy5hRmlsdGVycyxmdW5jdGlvbihpLGIpe2lmKCEoYiBpbnN0YW5jZW9mIGEpKXtxLnNhcC5sb2cuZXJyb3IoIkZpbHRlciBpbiBBZ2dyZWdhdGlvbiBvZiBNdWx0aSBmaWx0ZXIgaGFzIHRvIGJlIGluc3RhbmNlIG9mIHNhcC51aS5tb2RlbC5GaWx0ZXIiKX19KX1lbHNlIGlmKCF0aGlzLmFGaWx0ZXJzJiZ0aGlzLnNQYXRoIT09dW5kZWZpbmVkJiZ0aGlzLnNPcGVyYXRvciYmdGhpcy5vVmFsdWUxIT09dW5kZWZpbmVkKXt0aGlzLl9iTXVsdGlGaWx0ZXI9ZmFsc2V9ZWxzZXtxLnNhcC5sb2cuZXJyb3IoIldyb25nIHBhcmFtZXRlcnMgZGVmaW5lZCBmb3IgZmlsdGVyLiIpfX19KTtyZXR1cm4gYX0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5tb2RlbC5MaXN0QmluZGluZycpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5tb2RlbC5MaXN0QmluZGluZycpO3NhcC51aS5kZWZpbmUoInNhcC91aS9tb2RlbC9MaXN0QmluZGluZyIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJy4vQmluZGluZycsJy4vRmlsdGVyJywnLi9Tb3J0ZXInXSxmdW5jdGlvbihxLEIsRixTKXsidXNlIHN0cmljdCI7dmFyIEw9Qi5leHRlbmQoInNhcC51aS5tb2RlbC5MaXN0QmluZGluZyIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKG0scCxjLHMsZixQKXtCLmNhbGwodGhpcyxtLHAsYyxQKTt0aGlzLmFTb3J0ZXJzPXM7aWYoIXEuaXNBcnJheSh0aGlzLmFTb3J0ZXJzKSYmdGhpcy5hU29ydGVycyBpbnN0YW5jZW9mIFMpe3RoaXMuYVNvcnRlcnM9W3RoaXMuYVNvcnRlcnNdfWVsc2UgaWYoIXEuaXNBcnJheSh0aGlzLmFTb3J0ZXJzKSl7dGhpcy5hU29ydGVycz1bXX10aGlzLmFGaWx0ZXJzPVtdO2lmKCFxLmlzQXJyYXkoZikmJmYgaW5zdGFuY2VvZiBGKXtmPVtmXX1lbHNlIGlmKCFxLmlzQXJyYXkoZikpe2Y9W119dGhpcy5hQXBwbGljYXRpb25GaWx0ZXJzPWY7dGhpcy5iVXNlRXh0ZW5kZWRDaGFuZ2VEZXRlY3Rpb249ZmFsc2V9LG1ldGFkYXRhOnsiYWJzdHJhY3QiOnRydWUscHVibGljTWV0aG9kczpbImdldENvbnRleHRzIiwic29ydCIsImF0dGFjaFNvcnQiLCJkZXRhY2hTb3J0IiwiZmlsdGVyIiwiYXR0YWNoRmlsdGVyIiwiZGV0YWNoRmlsdGVyIiwiZ2V0RGlzdGluY3RWYWx1ZXMiLCJpc0dyb3VwZWQiLCJnZXRMZW5ndGgiLCJpc0xlbmd0aEZpbmFsIl19fSk7TC5wcm90b3R5cGUuZ2V0TGVuZ3RoPWZ1bmN0aW9uKCl7cmV0dXJuIDB9O0wucHJvdG90eXBlLmlzTGVuZ3RoRmluYWw9ZnVuY3Rpb24oKXtyZXR1cm4gdHJ1ZX07TC5wcm90b3R5cGUuZ2V0RGlzdGluY3RWYWx1ZXM9ZnVuY3Rpb24ocCl7cmV0dXJuIG51bGx9O0wucHJvdG90eXBlLmF0dGFjaFNvcnQ9ZnVuY3Rpb24oZixsKXt0aGlzLmF0dGFjaEV2ZW50KCJzb3J0IixmLGwpfTtMLnByb3RvdHlwZS5kZXRhY2hTb3J0PWZ1bmN0aW9uKGYsbCl7dGhpcy5kZXRhY2hFdmVudCgic29ydCIsZixsKX07TC5wcm90b3R5cGUuX2ZpcmVTb3J0PWZ1bmN0aW9uKGEpe3RoaXMuZmlyZUV2ZW50KCJzb3J0IixhKX07TC5wcm90b3R5cGUuYXR0YWNoRmlsdGVyPWZ1bmN0aW9uKGYsbCl7dGhpcy5hdHRhY2hFdmVudCgiZmlsdGVyIixmLGwpfTtMLnByb3RvdHlwZS5kZXRhY2hGaWx0ZXI9ZnVuY3Rpb24oZixsKXt0aGlzLmRldGFjaEV2ZW50KCJmaWx0ZXIiLGYsbCl9O0wucHJvdG90eXBlLl9maXJlRmlsdGVyPWZ1bmN0aW9uKGEpe3RoaXMuZmlyZUV2ZW50KCJmaWx0ZXIiLGEpfTtMLnByb3RvdHlwZS5pc0dyb3VwZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hU29ydGVycy5sZW5ndGg+MCYmISF0aGlzLmFTb3J0ZXJzWzBdLmZuR3JvdXB9O0wucHJvdG90eXBlLmVuYWJsZUV4dGVuZGVkQ2hhbmdlRGV0ZWN0aW9uPWZ1bmN0aW9uKCl7dGhpcy5iVXNlRXh0ZW5kZWRDaGFuZ2VEZXRlY3Rpb249dHJ1ZTtpZih0aGlzLnVwZGF0ZSl7dGhpcy51cGRhdGUoKX19O3JldHVybiBMfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLm1vZGVsLk1vZGVsJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLm1vZGVsLk1vZGVsJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL21vZGVsL01vZGVsIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL2Jhc2UvRXZlbnRQcm92aWRlcicsJy4vQmluZGluZ01vZGUnLCcuL0NvbnRleHQnXSxmdW5jdGlvbihxLEUsQixDKXsidXNlIHN0cmljdCI7dmFyIE09RS5leHRlbmQoInNhcC51aS5tb2RlbC5Nb2RlbCIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKCl7RS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5vRGF0YT17fTt0aGlzLmJEZXN0cm95ZWQ9ZmFsc2U7dGhpcy5hQmluZGluZ3M9W107dGhpcy5tQ29udGV4dHM9e307dGhpcy5pU2l6ZUxpbWl0PTEwMDt0aGlzLnNEZWZhdWx0QmluZGluZ01vZGU9Qi5Ud29XYXk7dGhpcy5tU3VwcG9ydGVkQmluZGluZ01vZGVzPXsiT25lV2F5Ijp0cnVlLCJUd29XYXkiOnRydWUsIk9uZVRpbWUiOnRydWV9O3RoaXMuYkxlZ2FjeVN5bnRheD1mYWxzZX0sbWV0YWRhdGE6eyJhYnN0cmFjdCI6dHJ1ZSxwdWJsaWNNZXRob2RzOlsiYmluZFByb3BlcnR5IiwiYmluZExpc3QiLCJiaW5kVHJlZSIsImJpbmRDb250ZXh0IiwiY3JlYXRlQmluZGluZ0NvbnRleHQiLCJkZXN0cm95QmluZGluZ0NvbnRleHQiLCJnZXRQcm9wZXJ0eSIsImdldERlZmF1bHRCaW5kaW5nTW9kZSIsInNldERlZmF1bHRCaW5kaW5nTW9kZSIsImlzQmluZGluZ01vZGVTdXBwb3J0ZWQiLCJhdHRhY2hQYXJzZUVycm9yIiwiZGV0YWNoUGFyc2VFcnJvciIsImF0dGFjaFJlcXVlc3RDb21wbGV0ZWQiLCJkZXRhY2hSZXF1ZXN0Q29tcGxldGVkIiwiYXR0YWNoUmVxdWVzdEZhaWxlZCIsImRldGFjaFJlcXVlc3RGYWlsZWQiLCJhdHRhY2hSZXF1ZXN0U2VudCIsImRldGFjaFJlcXVlc3RTZW50Iiwic2V0U2l6ZUxpbWl0IiwicmVmcmVzaCIsImlzTGlzdCIsImdldE9iamVjdCJdfX0pO00uTV9FVkVOVFM9e1BhcnNlRXJyb3I6InBhcnNlRXJyb3IiLFJlcXVlc3RGYWlsZWQ6InJlcXVlc3RGYWlsZWQiLFJlcXVlc3RTZW50OiJyZXF1ZXN0U2VudCIsUmVxdWVzdENvbXBsZXRlZDoicmVxdWVzdENvbXBsZXRlZCJ9O00ucHJvdG90eXBlLmF0dGFjaFJlcXVlc3RGYWlsZWQ9ZnVuY3Rpb24oZCxmLGwpe3RoaXMuYXR0YWNoRXZlbnQoInJlcXVlc3RGYWlsZWQiLGQsZixsKTtyZXR1cm4gdGhpc307TS5wcm90b3R5cGUuZGV0YWNoUmVxdWVzdEZhaWxlZD1mdW5jdGlvbihmLGwpe3RoaXMuZGV0YWNoRXZlbnQoInJlcXVlc3RGYWlsZWQiLGYsbCk7cmV0dXJuIHRoaXN9O00ucHJvdG90eXBlLmZpcmVSZXF1ZXN0RmFpbGVkPWZ1bmN0aW9uKGEpe3RoaXMuZmlyZUV2ZW50KCJyZXF1ZXN0RmFpbGVkIixhKTtyZXR1cm4gdGhpc307TS5wcm90b3R5cGUuYXR0YWNoUGFyc2VFcnJvcj1mdW5jdGlvbihkLGYsbCl7dGhpcy5hdHRhY2hFdmVudCgicGFyc2VFcnJvciIsZCxmLGwpO3JldHVybiB0aGlzfTtNLnByb3RvdHlwZS5kZXRhY2hQYXJzZUVycm9yPWZ1bmN0aW9uKGYsbCl7dGhpcy5kZXRhY2hFdmVudCgicGFyc2VFcnJvciIsZixsKTtyZXR1cm4gdGhpc307TS5wcm90b3R5cGUuZmlyZVBhcnNlRXJyb3I9ZnVuY3Rpb24oYSl7dGhpcy5maXJlRXZlbnQoInBhcnNlRXJyb3IiLGEpO3JldHVybiB0aGlzfTtNLnByb3RvdHlwZS5hdHRhY2hSZXF1ZXN0U2VudD1mdW5jdGlvbihkLGYsbCl7dGhpcy5hdHRhY2hFdmVudCgicmVxdWVzdFNlbnQiLGQsZixsKTtyZXR1cm4gdGhpc307TS5wcm90b3R5cGUuZGV0YWNoUmVxdWVzdFNlbnQ9ZnVuY3Rpb24oZixsKXt0aGlzLmRldGFjaEV2ZW50KCJyZXF1ZXN0U2VudCIsZixsKTtyZXR1cm4gdGhpc307TS5wcm90b3R5cGUuZmlyZVJlcXVlc3RTZW50PWZ1bmN0aW9uKGEpe3RoaXMuZmlyZUV2ZW50KCJyZXF1ZXN0U2VudCIsYSk7cmV0dXJuIHRoaXN9O00ucHJvdG90eXBlLmF0dGFjaFJlcXVlc3RDb21wbGV0ZWQ9ZnVuY3Rpb24oZCxmLGwpe3RoaXMuYXR0YWNoRXZlbnQoInJlcXVlc3RDb21wbGV0ZWQiLGQsZixsKTtyZXR1cm4gdGhpc307TS5wcm90b3R5cGUuZGV0YWNoUmVxdWVzdENvbXBsZXRlZD1mdW5jdGlvbihmLGwpe3RoaXMuZGV0YWNoRXZlbnQoInJlcXVlc3RDb21wbGV0ZWQiLGYsbCk7cmV0dXJuIHRoaXN9O00ucHJvdG90eXBlLmZpcmVSZXF1ZXN0Q29tcGxldGVkPWZ1bmN0aW9uKGEpe3RoaXMuZmlyZUV2ZW50KCJyZXF1ZXN0Q29tcGxldGVkIixhKTtyZXR1cm4gdGhpc307TS5wcm90b3R5cGUuZ2V0T2JqZWN0PWZ1bmN0aW9uKHAsYyl7cmV0dXJuIHRoaXMuZ2V0UHJvcGVydHkocCxjKX07TS5wcm90b3R5cGUuZ2V0Q29udGV4dD1mdW5jdGlvbihwKXtpZighcS5zYXAuc3RhcnRzV2l0aChwLCIvIikpe3Rocm93IG5ldyBFcnJvcigiUGF0aCAiK3ArIiBtdXN0IHN0YXJ0IHdpdGggYSAvICIpfXZhciBjPXRoaXMubUNvbnRleHRzW3BdO2lmKCFjKXtjPW5ldyBDKHRoaXMscCk7dGhpcy5tQ29udGV4dHNbcF09Y31yZXR1cm4gY307TS5wcm90b3R5cGUucmVzb2x2ZT1mdW5jdGlvbihwLGMpe3ZhciBpPSFxLnNhcC5zdGFydHNXaXRoKHAsIi8iKSxyPXAscztpZihpKXtpZihjKXtzPWMuZ2V0UGF0aCgpO3I9cysocS5zYXAuZW5kc1dpdGgocywiLyIpPyIiOiIvIikrcH1lbHNle3I9dGhpcy5pc0xlZ2FjeVN5bnRheCgpPyIvIitwOnVuZGVmaW5lZH19aWYociYmciE9PSIvIiYmcS5zYXAuZW5kc1dpdGgociwiLyIpKXtyPXIuc3Vic3RyKDAsci5sZW5ndGgtMSl9cmV0dXJuIHJ9O00ucHJvdG90eXBlLmFkZEJpbmRpbmc9ZnVuY3Rpb24oYil7dGhpcy5hQmluZGluZ3MucHVzaChiKX07TS5wcm90b3R5cGUucmVtb3ZlQmluZGluZz1mdW5jdGlvbihiKXtmb3IodmFyIGk9MDtpPHRoaXMuYUJpbmRpbmdzLmxlbmd0aDtpKyspe2lmKHRoaXMuYUJpbmRpbmdzW2ldPT1iKXt0aGlzLmFCaW5kaW5ncy5zcGxpY2UoaSwxKTticmVha319fTtNLnByb3RvdHlwZS5nZXREZWZhdWx0QmluZGluZ01vZGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zRGVmYXVsdEJpbmRpbmdNb2RlfTtNLnByb3RvdHlwZS5zZXREZWZhdWx0QmluZGluZ01vZGU9ZnVuY3Rpb24obSl7aWYodGhpcy5pc0JpbmRpbmdNb2RlU3VwcG9ydGVkKG0pKXt0aGlzLnNEZWZhdWx0QmluZGluZ01vZGU9bX1lbHNle3Rocm93IG5ldyBFcnJvcigiQmluZGluZyBtb2RlICIrbSsiIGlzIG5vdCBzdXBwb3J0ZWQgYnkgdGhpcyBtb2RlbC4iKX19O00ucHJvdG90eXBlLmlzQmluZGluZ01vZGVTdXBwb3J0ZWQ9ZnVuY3Rpb24obSl7cmV0dXJuKG0gaW4gdGhpcy5tU3VwcG9ydGVkQmluZGluZ01vZGVzKX07TS5wcm90b3R5cGUuc2V0TGVnYWN5U3ludGF4PWZ1bmN0aW9uKGwpe3RoaXMuYkxlZ2FjeVN5bnRheD1sfTtNLnByb3RvdHlwZS5pc0xlZ2FjeVN5bnRheD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmJMZWdhY3lTeW50YXh9O00ucHJvdG90eXBlLnNldFNpemVMaW1pdD1mdW5jdGlvbihzKXt0aGlzLmlTaXplTGltaXQ9c307TS5wcm90b3R5cGUuZ2V0SW50ZXJmYWNlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9O00ucHJvdG90eXBlLnJlZnJlc2g9ZnVuY3Rpb24oZil7dGhpcy5jaGVja1VwZGF0ZShmKX07TS5wcm90b3R5cGUuY2hlY2tVcGRhdGU9ZnVuY3Rpb24oZil7dmFyIGI9dGhpcy5hQmluZGluZ3Muc2xpY2UoMCk7cS5lYWNoKGIsZnVuY3Rpb24oaSxvKXtvLmNoZWNrVXBkYXRlKGYpfSl9O00ucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXt0aGlzLm9EYXRhPXt9O3RoaXMuYUJpbmRpbmdzPVtdO3RoaXMubUNvbnRleHRzPXt9O3RoaXMuYkRlc3Ryb3llZD10cnVlO0UucHJvdG90eXBlLmRlc3Ryb3kuYXBwbHkodGhpcyxhcmd1bWVudHMpfTtyZXR1cm4gTX0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5tb2RlbC5TZWxlY3Rpb25Nb2RlbCcpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5tb2RlbC5TZWxlY3Rpb25Nb2RlbCcpO3NhcC51aS5kZWZpbmUoInNhcC91aS9tb2RlbC9TZWxlY3Rpb25Nb2RlbCIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ3NhcC91aS9iYXNlL0V2ZW50UHJvdmlkZXInXSxmdW5jdGlvbihxLEUpeyJ1c2Ugc3RyaWN0Ijt2YXIgUz1FLmV4dGVuZCgic2FwLnVpLm1vZGVsLlNlbGVjdGlvbk1vZGVsIix7Y29uc3RydWN0b3I6ZnVuY3Rpb24ocyl7RS5hcHBseSh0aGlzKTt0aGlzLmlTZWxlY3Rpb25Nb2RlPXN8fFMuU0lOR0xFX1NFTEVDVElPTjt0aGlzLmFTZWxlY3RlZEluZGljZXM9W107dGhpcy5pTGVhZEluZGV4PS0xO3RoaXMuZm5Tb3J0PWZ1bmN0aW9uKGEsYil7cmV0dXJuIGEtYn07dGhpcy5mblNvcnRSZXZlcnNlPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGItYX19fSk7Uy5TSU5HTEVfU0VMRUNUSU9OPTA7Uy5NVUxUSV9TRUxFQ1RJT049MTtTLnByb3RvdHlwZS5nZXRTZWxlY3Rpb25Nb2RlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaVNlbGVjdGlvbk1vZGV9O1MucHJvdG90eXBlLnNldFNlbGVjdGlvbk1vZGU9ZnVuY3Rpb24ocyl7dGhpcy5pU2VsZWN0aW9uTW9kZT1zfHxTLlNJTkdMRV9TRUxFQ1RJT059O1MucHJvdG90eXBlLmlzU2VsZWN0ZWRJbmRleD1mdW5jdGlvbihpKXtyZXR1cm4gcS5pbkFycmF5KGksdGhpcy5hU2VsZWN0ZWRJbmRpY2VzKSE9PS0xfTtTLnByb3RvdHlwZS5nZXRMZWFkU2VsZWN0ZWRJbmRleD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmlMZWFkSW5kZXh9O1MucHJvdG90eXBlLnNldExlYWRTZWxlY3RlZEluZGV4PWZ1bmN0aW9uKGwpe3RoaXMuc2V0U2VsZWN0aW9uSW50ZXJ2YWwobCxsKTtyZXR1cm4gdGhpc307Uy5wcm90b3R5cGUuZ2V0TWluU2VsZWN0aW9uSW5kZXg9ZnVuY3Rpb24oKXtpZih0aGlzLmFTZWxlY3RlZEluZGljZXMubGVuZ3RoPjApe3ZhciBpPXRoaXMuYVNlbGVjdGVkSW5kaWNlcy5zb3J0KHRoaXMuZm5Tb3J0KTtyZXR1cm4gaVswXX1lbHNle3JldHVybi0xfX07Uy5wcm90b3R5cGUuZ2V0TWF4U2VsZWN0aW9uSW5kZXg9ZnVuY3Rpb24oKXtpZih0aGlzLmFTZWxlY3RlZEluZGljZXMubGVuZ3RoPjApe3ZhciBpPXRoaXMuYVNlbGVjdGVkSW5kaWNlcy5zb3J0KHRoaXMuZm5Tb3J0UmV2ZXJzZSk7cmV0dXJuIGlbMF19ZWxzZXtyZXR1cm4tMX19O1MucHJvdG90eXBlLmdldFNlbGVjdGVkSW5kaWNlcz1mdW5jdGlvbigpe3ZhciBpPXRoaXMuYVNlbGVjdGVkSW5kaWNlcy5zb3J0KHRoaXMuZm5Tb3J0KTtyZXR1cm4gaX07Uy5wcm90b3R5cGUuc2V0U2VsZWN0aW9uSW50ZXJ2YWw9ZnVuY3Rpb24oZix0KXtpZih0aGlzLmlTZWxlY3Rpb25Nb2RlPT09Uy5TSU5HTEVfU0VMRUNUSU9OKXtmPXR9dmFyIEY9TWF0aC5taW4oZix0KTt2YXIgVD1NYXRoLm1heChmLHQpO3ZhciBjPXRoaXMuYVNlbGVjdGVkSW5kaWNlcy5zbGljZSgpO3ZhciBzPVtdO2Zvcih2YXIgaT1GO2k8PVQ7aSsrKXtzLnB1c2goaSk7dmFyIHA9cS5pbkFycmF5KGksYyk7aWYocD09PS0xKXtjLnB1c2goaSl9ZWxzZXtjLnNwbGljZShwLDEpfX10aGlzLl91cGRhdGUocyx0LGMpO3JldHVybiB0aGlzfTtTLnByb3RvdHlwZS5hZGRTZWxlY3Rpb25JbnRlcnZhbD1mdW5jdGlvbihmLHQpe2lmKHRoaXMuaVNlbGVjdGlvbk1vZGU9PT1TLlNJTkdMRV9TRUxFQ1RJT04pe3JldHVybiB0aGlzLnNldFNlbGVjdGlvbkludGVydmFsKGYsdCl9dmFyIEY9TWF0aC5taW4oZix0KTt2YXIgVD1NYXRoLm1heChmLHQpO3ZhciBjPVtdO3ZhciBzPXRoaXMuYVNlbGVjdGVkSW5kaWNlcztmb3IodmFyIGk9RjtpPD1UO2krKyl7aWYocS5pbkFycmF5KGkscyk9PT0tMSl7cy5wdXNoKGkpO2MucHVzaChpKX19dGhpcy5fdXBkYXRlKHMsVCxjKTtyZXR1cm4gdGhpc307Uy5wcm90b3R5cGUubW92ZVNlbGVjdGlvbkludGVydmFsPWZ1bmN0aW9uKHMsbSl7dmFyIGM9W107dmFyIGE9dGhpcy5hU2VsZWN0ZWRJbmRpY2VzO3ZhciBsPXRoaXMuaUxlYWRJbmRleDtmb3IodmFyIGk9MDtpPGEubGVuZ3RoO2krKyl7dmFyIEk9YVtpXTtpZihJPj1zKXtjLnB1c2goYVtpXSk7YVtpXSs9bTtjLnB1c2goYVtpXSk7aWYoST09PXRoaXMuaUxlYWRJbmRleCl7bCs9bX19fXRoaXMuX3VwZGF0ZShhLGwsYyk7cmV0dXJuIHRoaXN9O1MucHJvdG90eXBlLnJlbW92ZVNlbGVjdGlvbkludGVydmFsPWZ1bmN0aW9uKGYsdCl7aWYodGhpcy5pU2VsZWN0aW9uTW9kZT09PVMuU0lOR0xFX1NFTEVDVElPTil7Zj10fXZhciBGPU1hdGgubWluKGYsdCk7dmFyIFQ9TWF0aC5tYXgoZix0KTt2YXIgYz1bXTt2YXIgcz10aGlzLmFTZWxlY3RlZEluZGljZXM7dmFyIGw9dGhpcy5pTGVhZEluZGV4O2Zvcih2YXIgaT1GO2k8PVQ7aSsrKXt2YXIgST1xLmluQXJyYXkoaSxzKTtpZihJPi0xKXtzLnNwbGljZShJLDEpO2MucHVzaChpKX1pZihpPT09dGhpcy5pTGVhZEluZGV4KXtsPS0xfX10aGlzLl91cGRhdGUocyxsLGMpO3JldHVybiB0aGlzfTtTLnByb3RvdHlwZS5zbGljZVNlbGVjdGlvbkludGVydmFsPWZ1bmN0aW9uKGYsdCl7dmFyIEY9TWF0aC5taW4oZix0KTt2YXIgVD1NYXRoLm1heChmLHQpO3ZhciBjPVtdO3ZhciByPVtdO3ZhciBvPXRoaXMuYVNlbGVjdGVkSW5kaWNlcy5zbGljZSgwKTt2YXIgcz10aGlzLmFTZWxlY3RlZEluZGljZXM7dmFyIGw9dGhpcy5pTGVhZEluZGV4O3ZhciBSPVQtRisxO2Zvcih2YXIgST1UO0k+PUY7SS0tKXt2YXIgYT1xLmluQXJyYXkoSSxzKTtpZihhPi0xKXtzLnNwbGljZShhLDEpO3IucHVzaChJKX1pZihJPT09dGhpcy5pTGVhZEluZGV4KXtsPS0xfX1mb3IodmFyIEk9MDtJPHMubGVuZ3RoO0krKyl7dmFyIE89c1tJXTtpZihPPj1GKXt2YXIgbj1zW0ldLVI7aWYoTz09PWwpe2w9bn1zW0ldPW47aWYocS5pbkFycmF5KG4sbyk9PT0tMSl7Yy5wdXNoKG4pfX19Zm9yKHZhciBpPTA7aTxyLmxlbmd0aDtpKyspe3ZhciBJPW9bby5sZW5ndGgtMS1pXTtpZihxLmluQXJyYXkoSSxjKT09PS0xKXtjLnB1c2goSSl9fWZvcih2YXIgaT0wO2k8ci5sZW5ndGg7aSsrKXtpZihxLmluQXJyYXkocltpXSxzKT09PS0xJiZxLmluQXJyYXkocltpXSxjKT09PS0xKXtjLnB1c2gocltpXSl9fXRoaXMuX3VwZGF0ZShzLGwsYyk7cmV0dXJuIHRoaXN9O1MucHJvdG90eXBlLmNsZWFyU2VsZWN0aW9uPWZ1bmN0aW9uKCl7aWYodGhpcy5hU2VsZWN0ZWRJbmRpY2VzLmxlbmd0aD4wfHx0aGlzLmlMZWFkSW5kZXghPT0tMSl7dGhpcy5fdXBkYXRlKFtdLC0xLHRoaXMuYVNlbGVjdGVkSW5kaWNlcy5zbGljZSgpKX1yZXR1cm4gdGhpc307Uy5wcm90b3R5cGUuYXR0YWNoU2VsZWN0aW9uQ2hhbmdlZD1mdW5jdGlvbihkLGYsbCl7dGhpcy5hdHRhY2hFdmVudCgic2VsZWN0aW9uQ2hhbmdlZCIsZCxmLGwpO3JldHVybiB0aGlzfTtTLnByb3RvdHlwZS5kZXRhY2hTZWxlY3Rpb25DaGFuZ2VkPWZ1bmN0aW9uKGYsbCl7dGhpcy5kZXRhY2hFdmVudCgic2VsZWN0aW9uQ2hhbmdlZCIsZixsKTtyZXR1cm4gdGhpc307Uy5wcm90b3R5cGUuZmlyZVNlbGVjdGlvbkNoYW5nZWQ9ZnVuY3Rpb24oYSl7dGhpcy5maXJlRXZlbnQoInNlbGVjdGlvbkNoYW5nZWQiLGEpO3JldHVybiB0aGlzfTtTLnByb3RvdHlwZS5fdXBkYXRlPWZ1bmN0aW9uKHMsbCxjKXt2YXIgcD17cm93SW5kaWNlczpjJiZjLnNvcnQodGhpcy5mblNvcnQpfTt0aGlzLmFTZWxlY3RlZEluZGljZXM9cztwLm9sZEluZGV4PXRoaXMuaUxlYWRJbmRleDtpZih0aGlzLmlMZWFkSW5kZXghPT1sKXt0aGlzLmlMZWFkSW5kZXg9bDtwLmxlYWRJbmRleD10aGlzLmlMZWFkSW5kZXh9aWYoYy5sZW5ndGg+MHx8dHlwZW9mIHAubGVhZEluZGV4IT09InVuZGVmaW5lZCIpe3RoaXMuZmlyZVNlbGVjdGlvbkNoYW5nZWQocCl9fTtyZXR1cm4gU30sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5tb2RlbC5TaW1wbGVUeXBlJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLm1vZGVsLlNpbXBsZVR5cGUnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvbW9kZWwvU2ltcGxlVHlwZSIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJy4vRm9ybWF0RXhjZXB0aW9uJywnLi9QYXJzZUV4Y2VwdGlvbicsJy4vVHlwZScsJy4vVmFsaWRhdGVFeGNlcHRpb24nXSxmdW5jdGlvbihxLEYsUCxULFYpeyJ1c2Ugc3RyaWN0Ijt2YXIgUz1ULmV4dGVuZCgic2FwLnVpLm1vZGVsLlNpbXBsZVR5cGUiLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbihmLGMpe1QuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMuc2V0Rm9ybWF0T3B0aW9ucyhmfHx7fSk7dGhpcy5zZXRDb25zdHJhaW50cyhjfHx7fSk7dGhpcy5zTmFtZT0iU2ltcGxlVHlwZSJ9LG1ldGFkYXRhOnsiYWJzdHJhY3QiOnRydWUscHVibGljTWV0aG9kczpbInNldENvbnN0cmFpbnRzIiwic2V0Rm9ybWF0T3B0aW9ucyIsImZvcm1hdFZhbHVlIiwicGFyc2VWYWx1ZSIsInZhbGlkYXRlVmFsdWUiXX19KTtTLnByb3RvdHlwZS5zZXRDb25zdHJhaW50cz1mdW5jdGlvbihjKXt0aGlzLm9Db25zdHJhaW50cz1jfTtTLnByb3RvdHlwZS5zZXRGb3JtYXRPcHRpb25zPWZ1bmN0aW9uKGYpe3RoaXMub0Zvcm1hdE9wdGlvbnM9Zn07cmV0dXJuIFN9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkubW9kZWwuVHJlZUJpbmRpbmcnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkubW9kZWwuVHJlZUJpbmRpbmcnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvbW9kZWwvVHJlZUJpbmRpbmciLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCcuL0JpbmRpbmcnXSxmdW5jdGlvbihxLEIpeyJ1c2Ugc3RyaWN0Ijt2YXIgVD1CLmV4dGVuZCgic2FwLnVpLm1vZGVsLlRyZWVCaW5kaW5nIix7Y29uc3RydWN0b3I6ZnVuY3Rpb24obSxwLGMsZixQKXtCLmNhbGwodGhpcyxtLHAsYyxQKTt0aGlzLmFGaWx0ZXJzPWY7dGhpcy5iRGlzcGxheVJvb3ROb2RlPVAmJlAuZGlzcGxheVJvb3ROb2RlPT09dHJ1ZX0sbWV0YWRhdGE6eyJhYnN0cmFjdCI6dHJ1ZSxwdWJsaWNNZXRob2RzOlsiZ2V0Um9vdENvbnRleHRzIiwiZ2V0Tm9kZUNvbnRleHRzIiwiaGFzQ2hpbGRyZW4iLCJmaWx0ZXIiXX19KTtULnByb3RvdHlwZS5hdHRhY2hGaWx0ZXI9ZnVuY3Rpb24oZixsKXt0aGlzLmF0dGFjaEV2ZW50KCJfZmlsdGVyIixmLGwpfTtULnByb3RvdHlwZS5kZXRhY2hGaWx0ZXI9ZnVuY3Rpb24oZixsKXt0aGlzLmRldGFjaEV2ZW50KCJfZmlsdGVyIixmLGwpfTtULnByb3RvdHlwZS5fZmlyZUZpbHRlcj1mdW5jdGlvbihhKXt0aGlzLmZpcmVFdmVudCgiX2ZpbHRlciIsYSl9O3JldHVybiBUfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLm1vZGVsLmFuYWx5dGljcy5BbmFseXRpY2FsQmluZGluZycpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5tb2RlbC5hbmFseXRpY3MuQW5hbHl0aWNhbEJpbmRpbmcnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvbW9kZWwvYW5hbHl0aWNzL0FuYWx5dGljYWxCaW5kaW5nIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL21vZGVsL1RyZWVCaW5kaW5nJywnc2FwL3VpL21vZGVsL0NoYW5nZVJlYXNvbicsJ3NhcC91aS9tb2RlbC9Tb3J0ZXInLCdzYXAvdWkvbW9kZWwvRmlsdGVyT3BlcmF0b3InLCcuL29kYXRhNGFuYWx5dGljcyddLGZ1bmN0aW9uKHEsVCxDLFMsRixvKXsidXNlIHN0cmljdCI7dmFyIEE9VC5leHRlbmQoInNhcC51aS5tb2RlbC5hbmFseXRpY3MuQW5hbHl0aWNhbEJpbmRpbmciLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbihtLHAsYyxzLGYsUCl7VC5jYWxsKHRoaXMsbSxwLGMsZixQKTt0aGlzLnNFbnRpdHlTZXROYW1lPShQJiZQLmVudGl0eVNldCk/UC5lbnRpdHlTZXQ6dW5kZWZpbmVkO3RoaXMuYkFydGlmaWNhbFJvb3RDb250ZXh0PWZhbHNlO3RoaXMuYUFwcGxpY2F0aW9uRmlsdGVyPXRoaXMuX2NvbnZlcnREZXByZWNhdGVkRmlsdGVyT2JqZWN0cyhmKTt0aGlzLmFDb250cm9sRmlsdGVyPXVuZGVmaW5lZDt0aGlzLmFTb3J0ZXI9cz9zOltdO3RoaXMuYU1heEFnZ3JlZ2F0aW9uTGV2ZWw9W107dGhpcy5hQWdncmVnYXRpb25MZXZlbD1bXTt0aGlzLm9QZW5kaW5nUmVxdWVzdHM9e307dGhpcy5vUGVuZGluZ1JlcXVlc3RIYW5kbGU9W107dGhpcy5vR3JvdXBlZFJlcXVlc3RzPXt9O3RoaXMuYlVzZUJhdGNoUmVxdWVzdHM9KFAmJlAudXNlQmF0Y2hSZXF1ZXN0cz09PXRydWUpP3RydWU6ZmFsc2U7dGhpcy5iUHJvdmlkZVRvdGFsU2l6ZT0oUCYmUC5wcm92aWRlVG90YWxSZXN1bHRTaXplPT09ZmFsc2UpP2ZhbHNlOnRydWU7dGhpcy5iUHJvdmlkZUdyYW5kVG90YWxzPShQJiZQLnByb3ZpZGVHcmFuZFRvdGFscz09PWZhbHNlKT9mYWxzZTp0cnVlO3RoaXMuYlVzZUFjY2VsZXJhdGVkQXV0b0V4cGFuZD10cnVlO3RoaXMuYVJlcXVlc3RRdWV1ZT1bXTt0aGlzLmlUb3RhbFNpemU9LTE7dGhpcy5tS2V5PXt9O3RoaXMubUZpbmFsTGVuZ3RoPXt9O3RoaXMubUxlbmd0aD17fTt0aGlzLmJOZWVkc1VwZGF0ZT1mYWxzZTt0aGlzLm1Pd25LZXk9e307dGhpcy5vQW5hbHl0aWNhbFF1ZXJ5UmVzdWx0PXRoaXMub01vZGVsLmdldEFuYWx5dGljYWxFeHRlbnNpb25zKCkuZmluZFF1ZXJ5UmVzdWx0QnlOYW1lKHRoaXMuX2dldEVudGl0eVNldCgpKTt0aGlzLmFBbmFseXRpY2FsSW5mbz1bXTt0aGlzLm1BbmFseXRpY2FsSW5mb0J5UHJvcGVydHk9e307dGhpcy51cGRhdGVBbmFseXRpY2FsSW5mbyhQPT11bmRlZmluZWQ/W106UC5hbmFseXRpY2FsSW5mbyl9fSk7QS5wcm90b3R5cGUuZ2V0Um9vdENvbnRleHRzPWZ1bmN0aW9uKHApe3ZhciBhPShwJiZwLm51bWJlck9mRXhwYW5kZWRMZXZlbHM/cC5udW1iZXJPZkV4cGFuZGVkTGV2ZWxzKzE6MSk7dmFyIHI9bnVsbDt2YXIgUj10aGlzLl9nZXRSZXF1ZXN0SWQoQS5fcmVxdWVzdFR5cGUuZ3JvdXBNZW1iZXJzUXVlcnkse2dyb3VwSWQ6bnVsbH0pO2lmKHRoaXMuYkFydGlmaWNhbFJvb3RDb250ZXh0JiYhdGhpcy5fY2xlYW51cEdyb3VwaW5nRm9yQ29tcGxldGVkUmVxdWVzdChSKSl7cmV0dXJuIG51bGx9aWYoYTw9MSl7cj10aGlzLl9nZXRDb250ZXh0c0ZvclBhcmVudENvbnRleHQobnVsbCk7aWYoYT09MSl7dGhpcy5fY29uc2lkZXJSZXF1ZXN0R3JvdXBpbmcoW1IsdGhpcy5fZ2V0UmVxdWVzdElkKEEuX3JlcXVlc3RUeXBlLmdyb3VwTWVtYmVyc1F1ZXJ5LHtncm91cElkOiIvIn0pXSk7dGhpcy5nZXROb2RlQ29udGV4dHModGhpcy5nZXRNb2RlbCgpLmdldENvbnRleHQoIi8iKSx7c3RhcnRJbmRleDpwLnN0YXJ0SW5kZXgsbGVuZ3RoOnAubGVuZ3RoLHRocmVzaG9sZDpwLnRocmVzaG9sZCxsZXZlbDowLG51bWJlck9mRXhwYW5kZWRMZXZlbHM6MH0pfX1lbHNle3I9dGhpcy5fZ2V0Q29udGV4dHNGb3JQYXJlbnRDb250ZXh0KG51bGwpO3ZhciBiPXRoaXMuX3ByZXBhcmVHcm91cE1lbWJlcnNBdXRvRXhwYW5zaW9uUmVxdWVzdElkcygiLyIscC5udW1iZXJPZkV4cGFuZGVkTGV2ZWxzKTtiLnB1c2goUik7dGhpcy5fY29uc2lkZXJSZXF1ZXN0R3JvdXBpbmcoYik7dGhpcy5nZXROb2RlQ29udGV4dHModGhpcy5nZXRNb2RlbCgpLmdldENvbnRleHQoIi8iKSx7c3RhcnRJbmRleDpwLnN0YXJ0SW5kZXgsbGVuZ3RoOnAubGVuZ3RoLHRocmVzaG9sZDpwLnRocmVzaG9sZCxsZXZlbDowLG51bWJlck9mRXhwYW5kZWRMZXZlbHM6cC5udW1iZXJPZkV4cGFuZGVkTGV2ZWxzfSl9aWYoci5sZW5ndGg+MSlxLnNhcC5sb2cuZmF0YWwoImFzc2VydGlvbiBmYWlsZWQ6IGdyYW5kIHRvdGFsIHJlcHJlc2VudGVkIGJ5IGEgc2luZ2xlIGVudHJ5Iik7cmV0dXJuIHJ9O0EucHJvdG90eXBlLmdldE5vZGVDb250ZXh0cz1mdW5jdGlvbihjLHApe3ZhciBzLGwsdCxMLG47aWYodHlwZW9mIHA9PSJvYmplY3QiKXtzPXAuc3RhcnRJbmRleDtsPXAubGVuZ3RoO3Q9cC50aHJlc2hvbGQ7TD1wLmxldmVsO249cC5udW1iZXJPZkV4cGFuZGVkTGV2ZWxzfWVsc2V7cz1hcmd1bWVudHNbMV07bD1hcmd1bWVudHNbMl07dD1hcmd1bWVudHNbM107TD1hcmd1bWVudHNbNF07bj1hcmd1bWVudHNbNV19dmFyIGE9dGhpcy5fZ2V0Q29udGV4dHNGb3JQYXJlbnRDb250ZXh0KGMscyxsLHQsTCxuKTtyZXR1cm4gYX07QS5wcm90b3R5cGUuQ29udGV4dHNBdmFpbGFiaWxpdHlTdGF0dXM9e0FMTDoyLFNPTUU6MSxOT05FOjB9O0EucHJvdG90eXBlLmhhc0F2YWlsYWJsZU5vZGVDb250ZXh0cz1mdW5jdGlvbihjLGwpe3ZhciBnPXRoaXMuX2dldEdyb3VwSWRGcm9tQ29udGV4dChjLGwpO2lmKHRoaXMubUtleVtnXSE9dW5kZWZpbmVkKWlmKHRoaXMubUZpbmFsTGVuZ3RoW2ddPT10cnVlKXJldHVybiBBLnByb3RvdHlwZS5Db250ZXh0c0F2YWlsYWJpbGl0eVN0YXR1cy5BTEw7ZWxzZSByZXR1cm4gQS5wcm90b3R5cGUuQ29udGV4dHNBdmFpbGFiaWxpdHlTdGF0dXMuU09NRTtlbHNlIHJldHVybiBBLnByb3RvdHlwZS5Db250ZXh0c0F2YWlsYWJpbGl0eVN0YXR1cy5OT05FfTtBLnByb3RvdHlwZS5nZXRHcm91cFNpemU9ZnVuY3Rpb24oYyxsKXtpZihjPT09dW5kZWZpbmVkKXJldHVybiAwO3ZhciBnPXRoaXMuX2dldEdyb3VwSWRGcm9tQ29udGV4dChjLGwpO3JldHVybiB0aGlzLm1GaW5hbExlbmd0aFtnXT90aGlzLm1MZW5ndGhbZ106LTF9O0EucHJvdG90eXBlLmdldFRvdGFsU2l6ZT1mdW5jdGlvbigpe2lmKCF0aGlzLmJQcm92aWRlVG90YWxTaXplKXEuc2FwLmxvZy5mYXRhbCgidG90YWwgc2l6ZSBvZiByZXN1bHQgZXhwbGljaXRseSB0dXJuZWQgb2ZmLCBidXQgZ2V0dGVyIGludm9rZWQiKTtyZXR1cm4gdGhpcy5pVG90YWxTaXplfTtBLnByb3RvdHlwZS5oYXNDaGlsZHJlbj1mdW5jdGlvbihjLHApe2lmKGM9PT11bmRlZmluZWQpcmV0dXJuIGZhbHNlO2lmKGM9PW51bGwpcmV0dXJuIHRydWU7dmFyIGk9cC5sZXZlbDtpZihpPT0wKXJldHVybiB0cnVlO2lmKHRoaXMuYUFnZ3JlZ2F0aW9uTGV2ZWwubGVuZ3RoPGkpcmV0dXJuIGZhbHNlO3JldHVybiB0aGlzLmFNYXhBZ2dyZWdhdGlvbkxldmVsLmluZGV4T2YodGhpcy5hQWdncmVnYXRpb25MZXZlbFtpLTFdKTx0aGlzLmFNYXhBZ2dyZWdhdGlvbkxldmVsLmxlbmd0aC0xfTtBLnByb3RvdHlwZS5oYXNNZWFzdXJlcz1mdW5jdGlvbigpe3ZhciBoPWZhbHNlO2Zvcih2YXIgcCBpbiB0aGlzLm9NZWFzdXJlRGV0YWlsc1NldCl7aD10cnVlO2JyZWFrfXJldHVybiBofTtBLnByb3RvdHlwZS5nZXREaW1lbnNpb25EZXRhaWxzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub0RpbWVuc2lvbkRldGFpbHNTZXR9O0EucHJvdG90eXBlLmdldE1lYXN1cmVEZXRhaWxzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub01lYXN1cmVEZXRhaWxzU2V0fTtBLnByb3RvdHlwZS5oYXNHcmFuZFRvdGFsRGlzcGxheWVkPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYlByb3ZpZGVHcmFuZFRvdGFsc307QS5wcm90b3R5cGUuZ2V0UHJvcGVydHk9ZnVuY3Rpb24ocCl7cmV0dXJuIHRoaXMub0FuYWx5dGljYWxRdWVyeVJlc3VsdC5nZXRFbnRpdHlUeXBlKCkuZmluZFByb3BlcnR5QnlOYW1lKHApfTtBLnByb3RvdHlwZS5nZXRGaWx0ZXJhYmxlUHJvcGVydHlOYW1lcz1mdW5jdGlvbigpe3JldHVybiB0aGlzLm9BbmFseXRpY2FsUXVlcnlSZXN1bHQuZ2V0RW50aXR5VHlwZSgpLmdldEZpbHRlcmFibGVQcm9wZXJ0eU5hbWVzKCl9O0EucHJvdG90eXBlLmdldFNvcnRhYmxlUHJvcGVydHlOYW1lcz1mdW5jdGlvbigpe3JldHVybiB0aGlzLm9BbmFseXRpY2FsUXVlcnlSZXN1bHQuZ2V0RW50aXR5VHlwZSgpLmdldFNvcnRhYmxlUHJvcGVydHlOYW1lcygpfTtBLnByb3RvdHlwZS5nZXRQcm9wZXJ0eUxhYmVsPWZ1bmN0aW9uKHApe3JldHVybiB0aGlzLm9BbmFseXRpY2FsUXVlcnlSZXN1bHQuZ2V0RW50aXR5VHlwZSgpLmdldExhYmVsT2ZQcm9wZXJ0eShwKX07QS5wcm90b3R5cGUuZ2V0UHJvcGVydHlIZWFkaW5nPWZ1bmN0aW9uKHApe3JldHVybiB0aGlzLm9BbmFseXRpY2FsUXVlcnlSZXN1bHQuZ2V0RW50aXR5VHlwZSgpLmdldEhlYWRpbmdPZlByb3BlcnR5KHApfTtBLnByb3RvdHlwZS5nZXRQcm9wZXJ0eVF1aWNrSW5mbz1mdW5jdGlvbihwKXtyZXR1cm4gdGhpcy5vQW5hbHl0aWNhbFF1ZXJ5UmVzdWx0LmdldEVudGl0eVR5cGUoKS5nZXRRdWlja0luZm9PZlByb3BlcnR5KHApfTtBLnByb3RvdHlwZS5pc01lYXN1cmU9ZnVuY3Rpb24ocCl7cmV0dXJuIHEuaW5BcnJheShwLHRoaXMuYU1lYXN1cmVOYW1lKSE9PS0xfTtBLnByb3RvdHlwZS5maWx0ZXI9ZnVuY3Rpb24oZixzKXtmPXRoaXMuX2NvbnZlcnREZXByZWNhdGVkRmlsdGVyT2JqZWN0cyhmKTtpZihzPT1zYXAudWkubW9kZWwuRmlsdGVyVHlwZS5BcHBsaWNhdGlvbil0aGlzLmFBcHBsaWNhdGlvbkZpbHRlcj1mO2Vsc2UgdGhpcy5hQ29udHJvbEZpbHRlcj1mO3RoaXMuaVRvdGFsU2l6ZT0tMTt0aGlzLl9hYm9ydEFsbFBlbmRpbmdSZXF1ZXN0cygpO3RoaXMucmVzZXREYXRhKCk7dGhpcy5fZmlyZVJlZnJlc2goe3JlYXNvbjpDLkZpbHRlcn0pO3JldHVybiB0aGlzfTtBLnByb3RvdHlwZS5zb3J0PWZ1bmN0aW9uKHMpe2lmKHMgaW5zdGFuY2VvZiBTKXtzPVtzXX10aGlzLmFTb3J0ZXI9cz9zOltdO3RoaXMuX2Fib3J0QWxsUGVuZGluZ1JlcXVlc3RzKCk7dGhpcy5fZmlyZVJlZnJlc2goe3JlYXNvbjpDLlNvcnR9KTtyZXR1cm4gdGhpc307QS5wcm90b3R5cGUuZ2V0R3JvdXBOYW1lPWZ1bmN0aW9uKGMsbCl7aWYoYz09PXVuZGVmaW5lZClyZXR1cm4iIjt2YXIgZz10aGlzLmFBZ2dyZWdhdGlvbkxldmVsW2wtMV0sZD10aGlzLm9BbmFseXRpY2FsUXVlcnlSZXN1bHQuZmluZERpbWVuc2lvbkJ5UHJvcGVydHlOYW1lKGcpLHY9dGhpcy5tQW5hbHl0aWNhbEluZm9CeVByb3BlcnR5W2ddLmZvcm1hdHRlcixwPWMuZ2V0UHJvcGVydHkoZyksdCxmLEc7aWYoZCYmdGhpcy5vRGltZW5zaW9uRGV0YWlsc1NldFtnXS50ZXh0UHJvcGVydHlOYW1lKXt0PWQuZ2V0VGV4dFByb3BlcnR5KCl9dmFyIHMsYSxiLGE7aWYodCl7cz1kLmdldFRleHRQcm9wZXJ0eSgpLm5hbWU7Yj10aGlzLm1BbmFseXRpY2FsSW5mb0J5UHJvcGVydHlbc10uZm9ybWF0dGVyO2E9Yy5nZXRQcm9wZXJ0eShzKX1pZighdCl7Zj12P3YocCk6cDtHPSgoZC5nZXRMYWJlbFRleHQoKSk/ZC5nZXRMYWJlbFRleHQoKSsnOiAnOicnKStmfWVsc2V7Zj12P3YocCxhKTpwO0c9KChkLmdldExhYmVsVGV4dCgpKT9kLmdldExhYmVsVGV4dCgpKyc6ICc6JycpK2Y7dmFyIGU9Yj9iKGEscCk6YTtpZihlKXtHKz0nIC0gJytlfX1yZXR1cm4gR307QS5wcm90b3R5cGUudXBkYXRlQW5hbHl0aWNhbEluZm89ZnVuY3Rpb24oYyl7dmFyIHA9dGhpcy5vRGltZW5zaW9uRGV0YWlsc1NldDt0aGlzLm1BbmFseXRpY2FsSW5mb0J5UHJvcGVydHk9bmV3IE9iamVjdCgpO3RoaXMuYU1heEFnZ3JlZ2F0aW9uTGV2ZWw9bmV3IEFycmF5KCk7dGhpcy5hQWdncmVnYXRpb25MZXZlbD1uZXcgQXJyYXkoKTt0aGlzLmFNZWFzdXJlTmFtZT1uZXcgQXJyYXkoKTt0aGlzLmlBbmFseXRpY2FsSW5mb1ZlcnNpb25OdW1iZXI9KHRoaXMuaUFuYWx5dGljYWxJbmZvVmVyc2lvbk51bWJlcj09PXVuZGVmaW5lZD8xOih0aGlzLmlBbmFseXRpY2FsSW5mb1ZlcnNpb25OdW1iZXI+OTk5PzE6dGhpcy5pQW5hbHl0aWNhbEluZm9WZXJzaW9uTnVtYmVyKzEpKTt0aGlzLm9NZWFzdXJlRGV0YWlsc1NldD1uZXcgT2JqZWN0KCk7dGhpcy5vRGltZW5zaW9uRGV0YWlsc1NldD1uZXcgT2JqZWN0KCk7Zm9yKHZhciBpPTA7aTxjLmxlbmd0aDtpKyspe3ZhciBkPXRoaXMub0FuYWx5dGljYWxRdWVyeVJlc3VsdC5maW5kRGltZW5zaW9uQnlQcm9wZXJ0eU5hbWUoY1tpXS5uYW1lKTtpZihkJiYoY1tpXS5pblJlc3VsdD09dHJ1ZXx8Y1tpXS52aXNpYmxlPT10cnVlKSl7Y1tpXS5kaW1lbnNpb25Qcm9wZXJ0eU5hbWU9ZC5nZXROYW1lKCk7dmFyIEQ9dGhpcy5vRGltZW5zaW9uRGV0YWlsc1NldFtkLmdldE5hbWUoKV07aWYoIUQpe0Q9bmV3IE9iamVjdCgpO0QubmFtZT1kLmdldE5hbWUoKTtELmFBdHRyaWJ1dGVOYW1lPW5ldyBBcnJheSgpO0QuZ3JvdXBlZD1mYWxzZTt0aGlzLm9EaW1lbnNpb25EZXRhaWxzU2V0W2QuZ2V0TmFtZSgpXT1EO3RoaXMuYU1heEFnZ3JlZ2F0aW9uTGV2ZWwucHVzaChELm5hbWUpO2lmKGNbaV0uZ3JvdXBlZD09dHJ1ZSl0aGlzLmFBZ2dyZWdhdGlvbkxldmVsLnB1c2goRC5uYW1lKX1pZihjW2ldLmdyb3VwZWQ9PXRydWUpe2lmKHRoaXMuZ2V0U29ydGFibGVQcm9wZXJ0eU5hbWVzKCkuaW5kZXhPZihkLmdldE5hbWUoKSk9PS0xKXtxLnNhcC5sb2cuZmF0YWwoInByb3BlcnR5ICIrZC5nZXROYW1lKCkrIiBtdXN0IGJlIHNvcnRhYmxlIGluIG9yZGVyIHRvIGJlIHVzZWQgYXMgZ3JvdXBlZCBkaW1lbnNpb24iKX1ELmdyb3VwZWQ9dHJ1ZX1pZihkLmdldE5hbWUoKT09Y1tpXS5uYW1lKXtELmtleVByb3BlcnR5TmFtZT1jW2ldLm5hbWV9dmFyIHQ9ZC5nZXRUZXh0UHJvcGVydHkoKTtpZih0JiZ0Lm5hbWU9PWNbaV0ubmFtZSl7RC50ZXh0UHJvcGVydHlOYW1lPWNbaV0ubmFtZX1pZihkLmZpbmRBdHRyaWJ1dGVCeU5hbWUoY1tpXS5uYW1lKSl7RC5hQXR0cmlidXRlTmFtZS5wdXNoKGNbaV0ubmFtZSl9RC5hbmFseXRpY2FsSW5mbz1jW2ldfXZhciBtPXRoaXMub0FuYWx5dGljYWxRdWVyeVJlc3VsdC5maW5kTWVhc3VyZUJ5UHJvcGVydHlOYW1lKGNbaV0ubmFtZSk7aWYobSYmKGNbaV0uaW5SZXN1bHQ9PXRydWV8fGNbaV0udmlzaWJsZT09dHJ1ZSkpe2NbaV0ubWVhc3VyZVByb3BlcnR5TmFtZT1tLmdldE5hbWUoKTt2YXIgTT10aGlzLm9NZWFzdXJlRGV0YWlsc1NldFttLmdldE5hbWUoKV07aWYoIU0pe009bmV3IE9iamVjdCgpO00ubmFtZT1tLmdldE5hbWUoKTt0aGlzLm9NZWFzdXJlRGV0YWlsc1NldFttLmdldE5hbWUoKV09TTt0aGlzLmFNZWFzdXJlTmFtZS5wdXNoKE0ubmFtZSl9aWYobS5nZXRSYXdWYWx1ZVByb3BlcnR5KCkubmFtZT09Y1tpXS5uYW1lKXtNLnJhd1ZhbHVlUHJvcGVydHlOYW1lPWNbaV0ubmFtZX12YXIgZj1tLmdldEZvcm1hdHRlZFZhbHVlUHJvcGVydHkoKTtpZihmJiZmLm5hbWU9PWNbaV0ubmFtZSl7TS5mb3JtYXR0ZWRWYWx1ZVByb3BlcnR5TmFtZT1jW2ldLm5hbWV9TS5hbmFseXRpY2FsSW5mbz1jW2ldfXRoaXMubUFuYWx5dGljYWxJbmZvQnlQcm9wZXJ0eVtjW2ldLm5hbWVdPWNbaV19dmFyIE07Zm9yKHZhciBhIGluIHRoaXMub01lYXN1cmVEZXRhaWxzU2V0KXt2YXIgdT10aGlzLm9BbmFseXRpY2FsUXVlcnlSZXN1bHQuZmluZE1lYXN1cmVCeU5hbWUoYSkuZ2V0VW5pdFByb3BlcnR5KCk7aWYodSl0aGlzLm9NZWFzdXJlRGV0YWlsc1NldFthXS51bml0UHJvcGVydHlOYW1lPXUubmFtZX12YXIgYj1mdW5jdGlvbihlKXt2YXIgbj1bXTtmb3IodmFyIGcgaW4gZSluLnB1c2goZy5uYW1lKTtyZXR1cm4gbi5zb3J0KCkuam9pbigiOyIpfTtpZihiKHApIT1iKHRoaXMub0RpbWVuc2lvbkRldGFpbHNTZXQpKXRoaXMuaVRvdGFsU2l6ZT0tMTt0aGlzLmFBbmFseXRpY2FsSW5mbz1jO3RoaXMubUZpbmFsTGVuZ3RoPXt9O3RoaXMubUxlbmd0aD17fTt0aGlzLm1LZXk9e307dGhpcy5tT3duS2V5PXt9O3RoaXMubUNvbnRleHRzPXt9O3RoaXMuYk5lZWRzVXBkYXRlPWZhbHNlfTtBLnByb3RvdHlwZS5nZXRBbmFseXRpY2FsSW5mb0ZvckNvbHVtbj1mdW5jdGlvbihjKXtyZXR1cm4gdGhpcy5tQW5hbHl0aWNhbEluZm9CeVByb3BlcnR5W2NdfTtBLnByb3RvdHlwZS5sb2FkR3JvdXBzPWZ1bmN0aW9uKGcpe3ZhciBHPW5ldyBBcnJheSgpO2Zvcih2YXIgcyBpbiBnKXtHLnB1c2gocyk7ZGVsZXRlIHRoaXMubUtleVtzXTtkZWxldGUgdGhpcy5tTGVuZ3RoW3NdO2RlbGV0ZSB0aGlzLm1GaW5hbExlbmd0aFtzXTt2YXIgYT1nW3NdO2Zvcih2YXIgaT0wO2k8YS5sZW5ndGg7aSsrKXt2YXIgYj1hW2ldO3RoaXMuX2dldENvbnRleHRzRm9yUGFyZW50R3JvdXBJZChzLGIuc3RhcnRJbmRleCxiLmxlbmd0aCxiLnRocmVzaG9sZCl9dmFyIHI9bmV3IEFycmF5KCk7Zm9yKHZhciBpPS0xLHM7cz1HWysraV07KXtyLnB1c2godGhpcy5fZ2V0UmVxdWVzdElkKEEuX3JlcXVlc3RUeXBlLmdyb3VwTWVtYmVyc1F1ZXJ5LHtncm91cElkOnN9KSl9dGhpcy5fY29uc2lkZXJSZXF1ZXN0R3JvdXBpbmcocil9fTtBLnByb3RvdHlwZS5nZXRBbmFseXRpY2FsUXVlcnlSZXN1bHQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vQW5hbHl0aWNhbFF1ZXJ5UmVzdWx0fTtBLl9yZXF1ZXN0VHlwZT17Z3JvdXBNZW1iZXJzUXVlcnk6MSx0b3RhbFNpemVRdWVyeToyLGdyb3VwTWVtYmVyc0F1dG9FeHBhbnNpb25RdWVyeTozLGxldmVsTWVtYmVyc1F1ZXJ5OjR9O0EucHJvdG90eXBlLl9nZXRDb250ZXh0c0ZvclBhcmVudENvbnRleHQ9ZnVuY3Rpb24ocCxzLGwsdCxMLG4pe2lmKHA9PT11bmRlZmluZWQpcmV0dXJuW107aWYocCYmcC5nZXRQYXRoKCk9PSIvYXJ0aWZpY2lhbFJvb3RDb250ZW50Iil7cD10aGlzLmdldE1vZGVsKCkuZ2V0Q29udGV4dCgiLyIpfXZhciBQPXRoaXMuX2dldEdyb3VwSWRGcm9tQ29udGV4dChwLEwpO3JldHVybiB0aGlzLl9nZXRDb250ZXh0c0ZvclBhcmVudEdyb3VwSWQoUCxzLGwsdCxuKX07QS5wcm90b3R5cGUuX2dldENvbnRleHRzRm9yUGFyZW50R3JvdXBJZD1mdW5jdGlvbihwLHMsbCx0LG4pe2lmKHA9PT11bmRlZmluZWQpcmV0dXJuW107aWYoIXMpcz0wO2lmKCFsKWw9dGhpcy5vTW9kZWwuaVNpemVMaW1pdDtpZih0aGlzLm1GaW5hbExlbmd0aFtwXSYmdGhpcy5tTGVuZ3RoW3BdPGwpbD10aGlzLm1MZW5ndGhbcF07aWYoIXQpdD0wO2lmKCFuKW49MDtpZihwPT1udWxsKXtpZihuPjApe3Euc2FwLmxvZy5mYXRhbCgiaW52YWxpZCByZXF1ZXN0IHRvIGRldGVybWluZSBub2RlcyBvZiByb290IGNvbnRleHQiKTtyZXR1cm4gbnVsbH19ZWxzZXtpZih0aGlzLl9nZXRHcm91cElkTGV2ZWwocCk+PXRoaXMuYUFnZ3JlZ2F0aW9uTGV2ZWwubGVuZ3RoJiZuPjApe3Euc2FwLmxvZy5mYXRhbCgiaW52YWxpZCByZXF1ZXN0IHRvIGRldGVybWluZSBub2RlcyBvZiBjb250ZXh0IHdpdGggZ3JvdXAgSUQgIitwKTtyZXR1cm4gbnVsbH1pZih0aGlzLl9nZXRHcm91cElkTGV2ZWwocCkrbj50aGlzLmFBZ2dyZWdhdGlvbkxldmVsLmxlbmd0aCl7bj10aGlzLmFBZ2dyZWdhdGlvbkxldmVsLmxlbmd0aC10aGlzLl9nZXRHcm91cElkTGV2ZWwocCktMX19dmFyIGMsTCxnLGEsRyxtO3ZhciBiPW4+MCYmcCE9bnVsbDtpZihiKXt2YXIgTT10aGlzLl9nZXRHcm91cElkTGV2ZWwocCk7dmFyIGQ9TStuO0c9dGhpcy5fY2FsY3VsYXRlUmVxdWlyZWRHcm91cEV4cGFuc2lvbihwLGQscyxsK3QpO3ZhciBEPUcuZ3JvdXBJZF9NaXNzaW5nPT1udWxsO0Q9RHx8Ry5ncm91cElkX01pc3NpbmcubGVuZ3RoPHAubGVuZ3RofHxHLmdyb3VwSWRfTWlzc2luZy5zdWJzdHJpbmcoMCxwLmxlbmd0aCkhPXA7aWYoRCl7cS5zYXAubG9nLmRlYnVnKCJhdXRvIGV4cGFuZDogZGF0YSBhdmFpbGFibGUgZm9yIGdyb3VwIElEICIrcCk7Yz10aGlzLl9nZXRMb2FkZWRDb250ZXh0c0Zvckdyb3VwKHAscyxsKX1lbHNle209bCt0fUw9IUR9ZWxzZXtjPXRoaXMuX2dldExvYWRlZENvbnRleHRzRm9yR3JvdXAocCxzLGwpO2c9dGhpcy5fY2FsY3VsYXRlUmVxdWlyZWRHcm91cFNlY3Rpb24ocCxzLGwsdCxjKTt2YXIgUD1nLmxlbmd0aD4wJiZsPGcubGVuZ3RoO0w9KGMubGVuZ3RoIT1sJiYhKHRoaXMubUZpbmFsTGVuZ3RoW3BdJiZjLmxlbmd0aD49dGhpcy5tTGVuZ3RoW3BdLXMpKXx8UH1pZighTCl0aGlzLl9jbGVhbnVwR3JvdXBpbmdGb3JDb21wbGV0ZWRSZXF1ZXN0KHRoaXMuX2dldFJlcXVlc3RJZChBLl9yZXF1ZXN0VHlwZS5ncm91cE1lbWJlcnNRdWVyeSx7Z3JvdXBJZDpwfSkpO2lmKHRoaXMub01vZGVsLmdldFNlcnZpY2VNZXRhZGF0YSgpKXtpZihMKXt2YXIgTj10aGlzLmJQcm92aWRlVG90YWxTaXplJiZ0aGlzLmlUb3RhbFNpemU9PS0xJiYhdGhpcy5faXNSZXF1ZXN0UGVuZGluZyh0aGlzLl9nZXRSZXF1ZXN0SWQoQS5fcmVxdWVzdFR5cGUudG90YWxTaXplUXVlcnkpKTt2YXIgZT10cnVlO3ZhciBmO2lmKHRoaXMuYlVzZUJhdGNoUmVxdWVzdHMpe2lmKGIpe2Y9dGhpcy5fcHJlcGFyZUdyb3VwTWVtYmVyc0F1dG9FeHBhbnNpb25SZXF1ZXN0SWRzKHAsbik7Zm9yKHZhciBpPS0xLHI7cj1mWysraV07KXtpZih0aGlzLl9pc1JlcXVlc3RQZW5kaW5nKHIpKXtlPWZhbHNlO2JyZWFrfX1pZihlKXt0aGlzLmFSZXF1ZXN0UXVldWUucHVzaChbQS5fcmVxdWVzdFR5cGUuZ3JvdXBNZW1iZXJzQXV0b0V4cGFuc2lvblF1ZXJ5LHAsRyxtLG5dKX19ZWxzZXtlPSF0aGlzLl9pc1JlcXVlc3RQZW5kaW5nKHRoaXMuX2dldFJlcXVlc3RJZChBLl9yZXF1ZXN0VHlwZS5ncm91cE1lbWJlcnNRdWVyeSx7Z3JvdXBJZDpwfSkpO2lmKGUpe3RoaXMuYVJlcXVlc3RRdWV1ZS5wdXNoKFtBLl9yZXF1ZXN0VHlwZS5ncm91cE1lbWJlcnNRdWVyeSxwLGcuc3RhcnRJbmRleCxnLmxlbmd0aF0pO2Y9W3RoaXMuX2dldFJlcXVlc3RJZChBLl9yZXF1ZXN0VHlwZS5ncm91cE1lbWJlcnNRdWVyeSx7Z3JvdXBJZDpwfSldfX1pZihlJiZOKXtmLnB1c2godGhpcy5fZ2V0UmVxdWVzdElkKEEuX3JlcXVlc3RUeXBlLnRvdGFsU2l6ZVF1ZXJ5KSk7dGhpcy5fY29uc2lkZXJSZXF1ZXN0R3JvdXBpbmcoZik7dGhpcy5hUmVxdWVzdFF1ZXVlLnB1c2goW0EuX3JlcXVlc3RUeXBlLnRvdGFsU2l6ZVF1ZXJ5XSl9aWYoZSl7aWYocD09bnVsbCl7dGhpcy5fYWJvcnRBbGxQZW5kaW5nUmVxdWVzdHMoKX1xLnNhcC5kZWxheWVkQ2FsbCgwLHRoaXMsQS5wcm90b3R5cGUuX3Byb2Nlc3NSZXF1ZXN0UXVldWUpfX1lbHNle3ZhciBoO2lmKGIpe2Y9dGhpcy5fcHJlcGFyZUdyb3VwTWVtYmVyc0F1dG9FeHBhbnNpb25SZXF1ZXN0SWRzKHAsbik7Zm9yKHZhciBpPS0xLHI7cj1mWysraV07KXtpZih0aGlzLl9pc1JlcXVlc3RQZW5kaW5nKHIpKXtlPWZhbHNlO2JyZWFrfX1pZihlKXtoPXRoaXMuX3ByZXBhcmVHcm91cE1lbWJlcnNBdXRvRXhwYW5zaW9uUXVlcnlSZXF1ZXN0KEEuX3JlcXVlc3RUeXBlLmdyb3VwTWVtYmVyc0F1dG9FeHBhbnNpb25RdWVyeSxwLEcsbSxuKX19ZWxzZXtlPSF0aGlzLl9pc1JlcXVlc3RQZW5kaW5nKHRoaXMuX2dldFJlcXVlc3RJZChBLl9yZXF1ZXN0VHlwZS5ncm91cE1lbWJlcnNRdWVyeSx7Z3JvdXBJZDpwfSkpO2lmKGUpe2g9dGhpcy5fcHJlcGFyZUdyb3VwTWVtYmVyc1F1ZXJ5UmVxdWVzdChBLl9yZXF1ZXN0VHlwZS5ncm91cE1lbWJlcnNRdWVyeSxwLGcuc3RhcnRJbmRleCxnLmxlbmd0aCk7Zj1baC5zUmVxdWVzdElkXX19aWYoZSl7aWYocD09bnVsbCl7dGhpcy5fYWJvcnRBbGxQZW5kaW5nUmVxdWVzdHMoKX10aGlzLl9leGVjdXRlUXVlcnlSZXF1ZXN0KGgpO2lmKE4mJiFoLmJJc0ZsYXRMaXN0UmVxdWVzdCl7Zi5wdXNoKHRoaXMuX2dldFJlcXVlc3RJZChBLl9yZXF1ZXN0VHlwZS50b3RhbFNpemVRdWVyeSkpO3RoaXMuX2NvbnNpZGVyUmVxdWVzdEdyb3VwaW5nKGYpO3RoaXMuX2V4ZWN1dGVRdWVyeVJlcXVlc3QodGhpcy5fcHJlcGFyZVRvdGFsU2l6ZVF1ZXJ5UmVxdWVzdChBLl9yZXF1ZXN0VHlwZS50b3RhbFNpemVRdWVyeSkpfX19fX1yZXR1cm4gY307QS5wcm90b3R5cGUuX3Byb2Nlc3NSZXF1ZXN0UXVldWU9ZnVuY3Rpb24oKXtpZih0aGlzLmFSZXF1ZXN0UXVldWUubGVuZ3RoPT0wKXJldHVybjt2YXIgcj1bXTt2YXIgZj1mYWxzZTtmb3IodmFyIGk9LTEsUjtSPXRoaXMuYVJlcXVlc3RRdWV1ZVsrK2ldOyl7aWYoUlswXT09QS5fcmVxdWVzdFR5cGUuZ3JvdXBNZW1iZXJzUXVlcnkpe3ZhciBhPUEucHJvdG90eXBlLl9wcmVwYXJlR3JvdXBNZW1iZXJzUXVlcnlSZXF1ZXN0LmFwcGx5KHRoaXMsUik7Zj1mfHxhLmJJc0ZsYXRMaXN0UmVxdWVzdDtyLnB1c2goYSl9fWZvcih2YXIgaT0tMSxSO1I9dGhpcy5hUmVxdWVzdFF1ZXVlWysraV07KXt2YXIgYT1udWxsO3N3aXRjaChSWzBdKXtjYXNlIEEuX3JlcXVlc3RUeXBlLmdyb3VwTWVtYmVyc1F1ZXJ5OmNvbnRpbnVlO2Nhc2UgQS5fcmVxdWVzdFR5cGUudG90YWxTaXplUXVlcnk6aWYoIWYpe2E9QS5wcm90b3R5cGUuX3ByZXBhcmVUb3RhbFNpemVRdWVyeVJlcXVlc3QuYXBwbHkodGhpcyxSKTtyLnB1c2goYSl9YnJlYWs7Y2FzZSBBLl9yZXF1ZXN0VHlwZS5ncm91cE1lbWJlcnNBdXRvRXhwYW5zaW9uUXVlcnk6YT1BLnByb3RvdHlwZS5fcHJlcGFyZUdyb3VwTWVtYmVyc0F1dG9FeHBhbnNpb25RdWVyeVJlcXVlc3QuYXBwbHkodGhpcyxSKTtmb3IodmFyIGo9LTEsbDtsPWEuYUdyb3VwTWVtYmVyc0F1dG9FeHBhbnNpb25SZXF1ZXN0RGV0YWlsc1srK2pdOyl7ci5wdXNoKGwpfWJyZWFrO2RlZmF1bHQ6cS5zYXAubG9nLmZhdGFsKCJ1bmhhbmRsZWQgcmVxdWVzdCB0eXBlICIrdGhpcy5hUmVxdWVzdFF1ZXVlW2ldWzBdKTtjb250aW51ZX19aWYoci5sZW5ndGg+MSl0aGlzLl9leGVjdXRlQmF0Y2hSZXF1ZXN0KHIpO2Vsc2UgdGhpcy5fZXhlY3V0ZVF1ZXJ5UmVxdWVzdChyWzBdKTt0aGlzLmFSZXF1ZXN0UXVldWU9W119O0EucHJvdG90eXBlLl9wcmVwYXJlR3JvdXBNZW1iZXJzUXVlcnlSZXF1ZXN0PWZ1bmN0aW9uKHIsZyxzLEwpe3ZhciBHPVtdO3ZhciBjPXRoaXMuaUFuYWx5dGljYWxJbmZvVmVyc2lvbk51bWJlcjt2YXIgYT1uZXcgby5RdWVyeVJlc3VsdFJlcXVlc3QodGhpcy5vQW5hbHl0aWNhbFF1ZXJ5UmVzdWx0KTthLnNldFJlc291cmNlUGF0aCh0aGlzLl9nZXRSZXNvdXJjZVBhdGgoKSk7YS5nZXRTb3J0RXhwcmVzc2lvbigpLmNsZWFyKCk7dmFyIGI9MCxkPS0xO2lmKGcpe0c9dGhpcy5fZ2V0R3JvdXBJZENvbXBvbmVudHMoZyk7Yj1kPUcubGVuZ3RoO3ZhciB1PTA7Zm9yKHZhciBpPTAsZT0wO2k8YjtlKyspe2lmKHRoaXMub0RpbWVuc2lvbkRldGFpbHNTZXRbdGhpcy5hTWF4QWdncmVnYXRpb25MZXZlbFtlXV0uZ3JvdXBlZD09ZmFsc2UpKyt1O2Vsc2UrK2l9Yj1kPWIrdTtpZih0aGlzLmFNYXhBZ2dyZWdhdGlvbkxldmVsLmxlbmd0aD4wKXt3aGlsZSh0aGlzLm9EaW1lbnNpb25EZXRhaWxzU2V0W3RoaXMuYU1heEFnZ3JlZ2F0aW9uTGV2ZWxbZF1dLmdyb3VwZWQ9PWZhbHNlKWlmKCsrZD09dGhpcy5hTWF4QWdncmVnYXRpb25MZXZlbC5sZW5ndGgpYnJlYWt9fXZhciBJPWQ+PXRoaXMuYU1heEFnZ3JlZ2F0aW9uTGV2ZWwubGVuZ3RoLTE7dmFyIGY9dGhpcy5hTWF4QWdncmVnYXRpb25MZXZlbC5zbGljZSgwLGQrMSk7YS5zZXRBZ2dyZWdhdGlvbkxldmVsKGYpO2Zvcih2YXIgaT0wO2k8Zi5sZW5ndGg7aSsrKXt2YXIgRD10aGlzLm9EaW1lbnNpb25EZXRhaWxzU2V0W2ZbaV1dO3ZhciBoPShELmtleVByb3BlcnR5TmFtZSE9dW5kZWZpbmVkKTt2YXIgaj0oRC50ZXh0UHJvcGVydHlOYW1lIT11bmRlZmluZWQpO2EuaW5jbHVkZURpbWVuc2lvbktleVRleHRBdHRyaWJ1dGVzKEQubmFtZSx0cnVlLGosRC5hQXR0cmlidXRlTmFtZSk7aWYoRC5ncm91cGVkKXthLmdldFNvcnRFeHByZXNzaW9uKCkuYWRkU29ydGVyKGZbaV0sby5Tb3J0T3JkZXIuQXNjZW5kaW5nKX19dmFyIGs9YS5nZXRGaWx0ZXJFeHByZXNzaW9uKCk7ay5jbGVhcigpO2lmKHRoaXMuYUFwcGxpY2F0aW9uRmlsdGVyKWsuYWRkVUk1RmlsdGVyQ29uZGl0aW9ucyh0aGlzLmFBcHBsaWNhdGlvbkZpbHRlcik7aWYodGhpcy5hQ29udHJvbEZpbHRlcilrLmFkZFVJNUZpbHRlckNvbmRpdGlvbnModGhpcy5hQ29udHJvbEZpbHRlcik7aWYoYj49MSl7Zm9yKHZhciBpPTAsbD1HLmxlbmd0aDtpPGw7aSsrKXtrLmFkZENvbmRpdGlvbih0aGlzLmFBZ2dyZWdhdGlvbkxldmVsW2ldLEYuRVEsR1tpXSl9fXZhciBtO3ZhciBuO3ZhciBwO3ZhciBNO3ZhciB0PW5ldyBBcnJheSgpO2lmKGchPW51bGx8fHRoaXMuYlByb3ZpZGVHcmFuZFRvdGFscyl7YS5zZXRNZWFzdXJlcyh0aGlzLmFNZWFzdXJlTmFtZSk7Zm9yKHZhciB2IGluIHRoaXMub01lYXN1cmVEZXRhaWxzU2V0KXtNPXRoaXMub01lYXN1cmVEZXRhaWxzU2V0W3ZdO2lmKCFJJiZ0aGlzLm1BbmFseXRpY2FsSW5mb0J5UHJvcGVydHlbdl0udG90YWw9PWZhbHNlKXttPWZhbHNlO249ZmFsc2U7cD1mYWxzZX1lbHNle209KE0ucmF3VmFsdWVQcm9wZXJ0eU5hbWUhPXVuZGVmaW5lZCk7bj0oTS5mb3JtYXR0ZWRWYWx1ZVByb3BlcnR5TmFtZSE9dW5kZWZpbmVkKTtwPShNLnVuaXRQcm9wZXJ0eU5hbWUhPXVuZGVmaW5lZCk7aWYocCl7aWYodC5pbmRleE9mKE0udW5pdFByb3BlcnR5TmFtZSk9PS0xKXt0LnB1c2goTS51bml0UHJvcGVydHlOYW1lKX19fWEuaW5jbHVkZU1lYXN1cmVSYXdGb3JtYXR0ZWRWYWx1ZVVuaXQoTS5uYW1lLG0sbixwKX1mb3IodmFyIGkgaW4gZil7dmFyIHc7aWYoKHc9dC5pbmRleE9mKGZbaV0pKSE9LTEpdC5zcGxpY2UodywxKX19dmFyIHg9YS5nZXRTb3J0RXhwcmVzc2lvbigpO2Zvcih2YXIgaT0wO2k8dGhpcy5hU29ydGVyLmxlbmd0aDtpKyspe2lmKHRoaXMuYVNvcnRlcltpXSl4LmFkZFNvcnRlcih0aGlzLmFTb3J0ZXJbaV0uc1BhdGgsdGhpcy5hU29ydGVyW2ldLmJEZXNjZW5kaW5nP28uU29ydE9yZGVyLkRlc2NlbmRpbmc6by5Tb3J0T3JkZXIuQXNjZW5kaW5nKX1pZihMPT0wKXEuc2FwLmxvZy5mYXRhbCgidW5oYW5kbGVkIGNhc2U6IGxvYWQgMCBlbnRpdGllcyBvZiBzdWIgZ3JvdXAiKTthLnNldFJlc3VsdFBhZ2VCb3VuZGFyaWVzKHMrMSxzK0wpO2Euc2V0UmVxdWVzdE9wdGlvbnMobnVsbCwhdGhpcy5tRmluYWxMZW5ndGhbZ10pO3JldHVybntpUmVxdWVzdFR5cGU6cixzUmVxdWVzdElkOnRoaXMuX2dldFJlcXVlc3RJZChBLl9yZXF1ZXN0VHlwZS5ncm91cE1lbWJlcnNRdWVyeSx7Z3JvdXBJZDpnfSksb0FuYWx5dGljYWxRdWVyeVJlcXVlc3Q6YSxzR3JvdXBJZDpnLGFTZWxlY3RlZFVuaXRQcm9wZXJ0eU5hbWU6dCxhQWdncmVnYXRpb25MZXZlbDpmLGJJc0ZsYXRMaXN0UmVxdWVzdDpJJiZiPT0wLGJJc0xlYWZHcm91cHNSZXF1ZXN0OkksaVN0YXJ0SW5kZXg6cyxpTGVuZ3RoOkx9fTtBLnByb3RvdHlwZS5fcHJlcGFyZVRvdGFsU2l6ZVF1ZXJ5UmVxdWVzdD1mdW5jdGlvbihyKXt2YXIgYz10aGlzLmlBbmFseXRpY2FsSW5mb1ZlcnNpb25OdW1iZXI7dmFyIGE9bmV3IG8uUXVlcnlSZXN1bHRSZXF1ZXN0KHRoaXMub0FuYWx5dGljYWxRdWVyeVJlc3VsdCk7YS5zZXRSZXNvdXJjZVBhdGgodGhpcy5fZ2V0UmVzb3VyY2VQYXRoKCkpO2Euc2V0QWdncmVnYXRpb25MZXZlbCh0aGlzLmFNYXhBZ2dyZWdhdGlvbkxldmVsKTthLnNldE1lYXN1cmVzKFtdKTt2YXIgZj1hLmdldEZpbHRlckV4cHJlc3Npb24oKTtmLmNsZWFyKCk7aWYodGhpcy5hQXBwbGljYXRpb25GaWx0ZXIpZi5hZGRVSTVGaWx0ZXJDb25kaXRpb25zKHRoaXMuYUFwcGxpY2F0aW9uRmlsdGVyKTtpZih0aGlzLmFDb250cm9sRmlsdGVyKWYuYWRkVUk1RmlsdGVyQ29uZGl0aW9ucyh0aGlzLmFDb250cm9sRmlsdGVyKTthLnNldFJlc3VsdFBhZ2VCb3VuZGFyaWVzKDEsMSk7YS5zZXRSZXF1ZXN0T3B0aW9ucyhudWxsLHRydWUpO3JldHVybntpUmVxdWVzdFR5cGU6cixzUmVxdWVzdElkOnRoaXMuX2dldFJlcXVlc3RJZChBLl9yZXF1ZXN0VHlwZS50b3RhbFNpemVRdWVyeSksb0FuYWx5dGljYWxRdWVyeVJlcXVlc3Q6YX19O0EucHJvdG90eXBlLl9wcmVwYXJlR3JvdXBNZW1iZXJzQXV0b0V4cGFuc2lvblF1ZXJ5UmVxdWVzdD1mdW5jdGlvbihyLGcsRyxsLG4pe3ZhciBwPWZ1bmN0aW9uKEcsYyl7aWYoRy5ncm91cElkX01pc3Npbmc9PW51bGwpe3Euc2FwLmxvZy5mYXRhbCgibWlzc2luZyBncm91cCBJZCBub3QgcHJlc2VudCIpO3JldHVybiBmfXZhciBkPXQuX2dldEdyb3VwSWRDb21wb25lbnRzKEcuZ3JvdXBJZF9NaXNzaW5nKTt2YXIgZT1kLmxlbmd0aDtpZihlPmMpe3Euc2FwLmxvZy5mYXRhbCgidGhlIGdpdmVuIGdyb3VwIElEIGlzIHRvbyBkZWVwIGZvciByZXF1ZXN0ZWQgbGV2ZWwgZm9yIGF1dG8gZXhwYW5zaW9uIik7cmV0dXJuIGZ9dmFyIHo9W107Zm9yKHZhciBpPTA7aTxlO2krKyl7dmFyIEI9dC5hQWdncmVnYXRpb25MZXZlbFtpXTt2YXIgVj1kW2ldO3ZhciB5PXQuX2dldEZpbHRlck9wZXJhdG9yTWF0Y2hpbmdQcm9wZXJ0eVNvcnRPcmRlcihCKTt6W2ldPW5ldyBzYXAudWkubW9kZWwuRmlsdGVyKEIseSxWKX12YXIgRD1udWxsO2lmKEcuc3RhcnRJbmRleF9NaXNzaW5nPjApe3ZhciBFPXQubUtleVtHLmdyb3VwSWRfTWlzc2luZ11bRy5zdGFydEluZGV4X01pc3NpbmctMV07dmFyIEg9dC5vTW9kZWwuZ2V0T2JqZWN0KCIvIitFKTt2YXIgST10LmFBZ2dyZWdhdGlvbkxldmVsW2VdO3ZhciBKPUhbSV07RD1uZXcgc2FwLnVpLm1vZGVsLkZpbHRlcihJLHQuX2dldEZpbHRlck9wZXJhdG9yTWF0Y2hpbmdQcm9wZXJ0eVNvcnRPcmRlcihJLGZhbHNlKSxKKX12YXIgZj1bXTtmb3IodmFyIEw9MDtMPGM7TCsrKXt2YXIgSz1bXTt2YXIgTj1NYXRoLm1pbihlLEwrMSk7Zm9yKHZhciBPPTA7TzxOO08rKyl7dmFyIFE9W107dmFyIFU9TWF0aC5taW4oZSxPKzEpO3ZhciBXPUcuc3RhcnRJbmRleF9NaXNzaW5nPjA7Zm9yKHZhciBYPTA7WDxVO1grKyl7dmFyIFk9bmV3IHNhcC51aS5tb2RlbC5GaWx0ZXIoIngiLHNhcC51aS5tb2RlbC5GaWx0ZXJPcGVyYXRvci5FUSwieCIpO1k9cS5leHRlbmQodHJ1ZSxZLHpbWF0pO2lmKFU+MSYmWDxVLTEpWS5zT3BlcmF0b3I9c2FwLnVpLm1vZGVsLkZpbHRlck9wZXJhdG9yLkVRO2lmKFg9PWUtMSYmTD5lLTEmJiFXKXtpZihZLnNPcGVyYXRvcj09c2FwLnVpLm1vZGVsLkZpbHRlck9wZXJhdG9yLkdUKVkuc09wZXJhdG9yPXNhcC51aS5tb2RlbC5GaWx0ZXJPcGVyYXRvci5HRTtlbHNlIFkuc09wZXJhdG9yPXNhcC51aS5tb2RlbC5GaWx0ZXJPcGVyYXRvci5MRX1RLnB1c2goWSl9aWYoUS5sZW5ndGg+MCl7Sy5wdXNoKG5ldyBzYXAudWkubW9kZWwuRmlsdGVyKFEsdHJ1ZSkpO2lmKEw+ZS0xJiZPPT1lLTEmJlcpe3ZhciBaPVtdO2Zvcih2YXIgaT0wO2k8US5sZW5ndGg7aSsrKXt2YXIgJD1uZXcgc2FwLnVpLm1vZGVsLkZpbHRlcigieCIsc2FwLnVpLm1vZGVsLkZpbHRlck9wZXJhdG9yLkVRLCJ4Iik7JD1xLmV4dGVuZCh0cnVlLCQsUVtpXSk7Wi5wdXNoKCQpfVpbZS0xXS5zT3BlcmF0b3I9c2FwLnVpLm1vZGVsLkZpbHRlck9wZXJhdG9yLkVRO1oucHVzaChEKTtLLnB1c2gobmV3IHNhcC51aS5tb2RlbC5GaWx0ZXIoWix0cnVlKSk7YnJlYWt9fX1pZihLLmxlbmd0aD4wKWZbTF09bmV3IHNhcC51aS5tb2RlbC5GaWx0ZXIoSyxmYWxzZSk7ZWxzZSBmW0xdPW51bGx9cmV0dXJuIGZ9O3ZhciBhPWZ1bmN0aW9uKHIsZyxMLHoscyxsLEIsVSl7dmFyIEQ9W107dmFyIEU9dC5pQW5hbHl0aWNhbEluZm9WZXJzaW9uTnVtYmVyO3ZhciBIPW5ldyBvLlF1ZXJ5UmVzdWx0UmVxdWVzdCh0Lm9BbmFseXRpY2FsUXVlcnlSZXN1bHQpO0guc2V0UmVzb3VyY2VQYXRoKHQuX2dldFJlc291cmNlUGF0aCgpKTtILmdldFNvcnRFeHByZXNzaW9uKCkuY2xlYXIoKTt2YXIgST0wLEo9LTE7ST1KPUwtMTt2YXIgSz0wO2Zvcih2YXIgaT0wLE49MDtpPEk7TisrKXtpZih0Lm9EaW1lbnNpb25EZXRhaWxzU2V0W3QuYU1heEFnZ3JlZ2F0aW9uTGV2ZWxbTl1dLmdyb3VwZWQ9PWZhbHNlKXsrK0t9ZWxzZXsrK2l9fUk9Sj1JK0s7aWYodC5hTWF4QWdncmVnYXRpb25MZXZlbC5sZW5ndGg+MCl7d2hpbGUodC5vRGltZW5zaW9uRGV0YWlsc1NldFt0LmFNYXhBZ2dyZWdhdGlvbkxldmVsW0pdXS5ncm91cGVkPT1mYWxzZSl7aWYoKytKPT10LmFNYXhBZ2dyZWdhdGlvbkxldmVsLmxlbmd0aCl7YnJlYWt9fX12YXIgTz1KPj10LmFNYXhBZ2dyZWdhdGlvbkxldmVsLmxlbmd0aC0xO3ZhciBRPXQuYU1heEFnZ3JlZ2F0aW9uTGV2ZWwuc2xpY2UoMCxKKzEpO0guc2V0QWdncmVnYXRpb25MZXZlbChRKTtmb3IodmFyIGk9MDtpPFEubGVuZ3RoO2krKyl7dmFyIFY9dC5vRGltZW5zaW9uRGV0YWlsc1NldFtRW2ldXTt2YXIgVz0oVi5rZXlQcm9wZXJ0eU5hbWUhPXVuZGVmaW5lZCk7dmFyIFg9KFYudGV4dFByb3BlcnR5TmFtZSE9dW5kZWZpbmVkKTtILmluY2x1ZGVEaW1lbnNpb25LZXlUZXh0QXR0cmlidXRlcyhWLm5hbWUsdHJ1ZSxYLFYuYUF0dHJpYnV0ZU5hbWUpO2lmKFYuZ3JvdXBlZCl7SC5nZXRTb3J0RXhwcmVzc2lvbigpLmFkZFNvcnRlcihRW2ldLG8uU29ydE9yZGVyLkFzY2VuZGluZyl9fXZhciBZPUguZ2V0RmlsdGVyRXhwcmVzc2lvbigpO1kuY2xlYXIoKTtpZih0LmFBcHBsaWNhdGlvbkZpbHRlcilZLmFkZFVJNUZpbHRlckNvbmRpdGlvbnModC5hQXBwbGljYXRpb25GaWx0ZXIpO2lmKHQuYUNvbnRyb2xGaWx0ZXIpWS5hZGRVSTVGaWx0ZXJDb25kaXRpb25zKHQuYUNvbnRyb2xGaWx0ZXIpO1kuYWRkVUk1RmlsdGVyQ29uZGl0aW9ucyh6KTt2YXIgWjt2YXIgJDt2YXIgXzt2YXIgYTE7dmFyIGIxPW5ldyBBcnJheSgpO0guc2V0TWVhc3VyZXModC5hTWVhc3VyZU5hbWUpO2Zvcih2YXIgYzEgaW4gdC5vTWVhc3VyZURldGFpbHNTZXQpe2ExPXQub01lYXN1cmVEZXRhaWxzU2V0W2MxXTtpZighTyYmdC5tQW5hbHl0aWNhbEluZm9CeVByb3BlcnR5W2MxXS50b3RhbD09ZmFsc2Upe1o9ZmFsc2U7JD1mYWxzZTtfPWZhbHNlfWVsc2V7Wj0oYTEucmF3VmFsdWVQcm9wZXJ0eU5hbWUhPXVuZGVmaW5lZCk7JD0oYTEuZm9ybWF0dGVkVmFsdWVQcm9wZXJ0eU5hbWUhPXVuZGVmaW5lZCk7Xz0oYTEudW5pdFByb3BlcnR5TmFtZSE9dW5kZWZpbmVkKTtpZihfKXtpZihiMS5pbmRleE9mKGExLnVuaXRQcm9wZXJ0eU5hbWUpPT0tMSl7YjEucHVzaChhMS51bml0UHJvcGVydHlOYW1lKX19fUguaW5jbHVkZU1lYXN1cmVSYXdGb3JtYXR0ZWRWYWx1ZVVuaXQoYTEubmFtZSxaLCQsXyl9Zm9yKHZhciBpIGluIFEpe3ZhciBkMTtpZigoZDE9YjEuaW5kZXhPZihRW2ldKSkhPS0xKWIxLnNwbGljZShkMSwxKX12YXIgZTE9SC5nZXRTb3J0RXhwcmVzc2lvbigpO2Zvcih2YXIgaT0wO2k8dC5hU29ydGVyLmxlbmd0aDtpKyspe2lmKHQuYVNvcnRlcltpXSllMS5hZGRTb3J0ZXIodC5hU29ydGVyW2ldLnNQYXRoLHQuYVNvcnRlcltpXS5iRGVzY2VuZGluZz9vLlNvcnRPcmRlci5EZXNjZW5kaW5nOm8uU29ydE9yZGVyLkFzY2VuZGluZyl9aWYobD09MClxLnNhcC5sb2cuZmF0YWwoInVuaGFuZGxlZCBjYXNlOiBsb2FkIDAgZW50aXRpZXMgb2Ygc3ViIGdyb3VwIik7dmFyIGYxPXM7aWYoIVUpZjE9MDtILnNldFJlc3VsdFBhZ2VCb3VuZGFyaWVzKGYxKzEsZjErbCk7cmV0dXJue2lSZXF1ZXN0VHlwZTpyLHNSZXF1ZXN0SWQ6dC5fZ2V0UmVxdWVzdElkKEEuX3JlcXVlc3RUeXBlLmxldmVsTWVtYmVyc1F1ZXJ5LHtncm91cElkOmcsbGV2ZWw6TH0pLG9BbmFseXRpY2FsUXVlcnlSZXF1ZXN0OkgsaUxldmVsOkwsYVNlbGVjdGVkVW5pdFByb3BlcnR5TmFtZTpiMSxhQWdncmVnYXRpb25MZXZlbDpRLGJJc0ZsYXRMaXN0UmVxdWVzdDpPLGJJc0xlYWZHcm91cHNSZXF1ZXN0Ok8saVN0YXJ0SW5kZXg6cyxpTGVuZ3RoOmwsYkF2b2lkTGVuZ3RoVXBkYXRlOkJ9fTt2YXIgdD10aGlzO3ZhciBiPVtdO3ZhciBSPVtdO2lmKEcmJnRoaXMuYlVzZUFjY2VsZXJhdGVkQXV0b0V4cGFuZCl7dmFyIGM9dGhpcy5fZ2V0R3JvdXBJZExldmVsKGcpK24rMTt2YXIgZD10Ll9nZXRHcm91cElkQ29tcG9uZW50cyhHLmdyb3VwSWRfTWlzc2luZyk7dmFyIGU9ZC5sZW5ndGg7dmFyIGY9cChHLGMpO2Zvcih2YXIgTD0xO0w8PWM7TCsrKXt2YXIgcztpZihMPj1lKzIpcz0wO2Vsc2UgaWYoTD09ZSsxKXM9Ry5zdGFydEluZGV4X01pc3Npbmc7ZWxzZSBpZihlPjApe3ZhciBoO2lmKEw9PWUpaD1HLmdyb3VwSWRfTWlzc2luZztlbHNlIGg9dGhpcy5fZ2V0R3JvdXBJZEFuY2VzdG9ycyhHLmdyb3VwSWRfTWlzc2luZywtKGUtTCkpWzBdO3ZhciBqPXRoaXMuX2dldEdyb3VwSWRBbmNlc3RvcnMoRy5ncm91cElkX01pc3NpbmcsLShlLUwrMSkpWzBdO2lmKCFqKXEuc2FwLmxvZy5mYXRhbCgiZmFpbGVkIHRvIGRldGVybWluZSBncm91cCBpZCBhdCBwYXJlbnQgbGV2ZWw7IGdyb3VwIElEID0gIitnKyIsIGxldmVsID0gIitMKTt2YXIgcz10aGlzLm1LZXlbal0uaW5kZXhPZih0aGlzLm1Pd25LZXlbaF0pO2lmKHM9PS0xKXEuc2FwLmxvZy5mYXRhbCgiZmFpbGVkIHRvIGRldGVybWluZSBwb3NpdGlvbiBvZiB2YWx1ZSAiK2grIiBpbiBncm91cCAiK2opO3MrK312YXIgaz1sPkw/TWF0aC5jZWlsKChsLUwpLyhjLUwrMSkpOmw7dmFyIG09ZltMLTFdP1tmW0wtMV1dOltdO3ZhciB1PWEoQS5fcmVxdWVzdFR5cGUubGV2ZWxNZW1iZXJzUXVlcnksZyxMLG0scyxrLGZhbHNlLGZhbHNlKTtiLnB1c2godSk7Ui5wdXNoKHRoaXMuX2dldFJlcXVlc3RJZChBLl9yZXF1ZXN0VHlwZS5sZXZlbE1lbWJlcnNRdWVyeSx7Z3JvdXBJZDpnLGxldmVsOkx9KSl9fWVsc2V7dmFyIE09dGhpcy5fZ2V0R3JvdXBJZExldmVsKGcpKzE7dmFyIGM9TStuO3ZhciBtPVtdO3ZhciB2PXRoaXMuX2dldEdyb3VwSWRDb21wb25lbnRzKGcpO2Zvcih2YXIgaT0wO2k8di5sZW5ndGg7aSsrKW0ucHVzaChuZXcgc2FwLnVpLm1vZGVsLkZpbHRlcih0aGlzLmFBZ2dyZWdhdGlvbkxldmVsW2ldLHNhcC51aS5tb2RlbC5GaWx0ZXJPcGVyYXRvci5FUSx2W2ldKSk7dmFyIHc9ZmFsc2U7aWYoRyl7dmFyIFA9dGhpcy5hQWdncmVnYXRpb25MZXZlbFt2Lmxlbmd0aF07dmFyIHg9dGhpcy5fZ2V0R3JvdXBJZENvbXBvbmVudHMoRy5ncm91cElkX01pc3NpbmcpW3YubGVuZ3RoXTtpZih4KXt2YXIgeT10aGlzLl9nZXRGaWx0ZXJPcGVyYXRvck1hdGNoaW5nUHJvcGVydHlTb3J0T3JkZXIoUCx0cnVlKTttLnB1c2gobmV3IHNhcC51aS5tb2RlbC5GaWx0ZXIoUCx5LHgpKTt3PXRydWV9fWZvcih2YXIgTD1NO0w8PWM7TCsrKXt2YXIgaz1sPkw/TWF0aC5jZWlsKChsLUwpLyhjLUwrMSkpOmw7dmFyIHU9YShBLl9yZXF1ZXN0VHlwZS5sZXZlbE1lbWJlcnNRdWVyeSxnLEwsbSwwLGssTD09TT93OmZhbHNlLHRydWUpO2IucHVzaCh1KTtSLnB1c2godGhpcy5fZ2V0UmVxdWVzdElkKEEuX3JlcXVlc3RUeXBlLmxldmVsTWVtYmVyc1F1ZXJ5LHtncm91cElkOmcsbGV2ZWw6TH0pKX19cmV0dXJue2lSZXF1ZXN0VHlwZTpyLGFSZXF1ZXN0SWQ6UixhR3JvdXBNZW1iZXJzQXV0b0V4cGFuc2lvblJlcXVlc3REZXRhaWxzOmIsc0dyb3VwSWQ6ZyxpTGVuZ3RoOmx9fTtBLnByb3RvdHlwZS5fcHJlcGFyZUdyb3VwTWVtYmVyc0F1dG9FeHBhbnNpb25SZXF1ZXN0SWRzPWZ1bmN0aW9uKGcsbil7dmFyIG09dGhpcy5fZ2V0R3JvdXBJZExldmVsKGcpKzE7dmFyIGE9bStuO3ZhciByPVtdO2Zvcih2YXIgbD1tO2w8PWE7bCsrKXtyLnB1c2godGhpcy5fZ2V0UmVxdWVzdElkKEEuX3JlcXVlc3RUeXBlLmxldmVsTWVtYmVyc1F1ZXJ5LHtncm91cElkOmcsbGV2ZWw6bH0pKX1yZXR1cm4gcn07QS5wcm90b3R5cGUuX2dldFF1ZXJ5T0RhdGFSZXF1ZXN0T3B0aW9ucz1mdW5jdGlvbihhKXt2YXIgcz1hLmdldFVSSVF1ZXJ5T3B0aW9uVmFsdWUoIiRzZWxlY3QiKTt2YXIgZj1hLmdldFVSSVF1ZXJ5T3B0aW9uVmFsdWUoIiRmaWx0ZXIiKTt2YXIgTz1hLmdldFVSSVF1ZXJ5T3B0aW9uVmFsdWUoIiRvcmRlcmJ5Iik7dmFyIGI9YS5nZXRVUklRdWVyeU9wdGlvblZhbHVlKCIkc2tpcCIpO3ZhciB0PWEuZ2V0VVJJUXVlcnlPcHRpb25WYWx1ZSgiJHRvcCIpO3ZhciBpPWEuZ2V0VVJJUXVlcnlPcHRpb25WYWx1ZSgiJGlubGluZWNvdW50Iik7aWYodGhpcy5tUGFyYW1ldGVyc1siZmlsdGVyIl0pZis9ImFuZCAoIit0aGlzLm1QYXJhbWV0ZXJzWyJmaWx0ZXIiXSsiKSI7dmFyIHA9W107aWYocylwLnB1c2goIiRzZWxlY3Q9IitzKTtpZihmKXAucHVzaCgiJGZpbHRlcj0iK2YpO2lmKE8pcC5wdXNoKCIkb3JkZXJieT0iK08pO2lmKGIpcC5wdXNoKCIkc2tpcD0iK2IpO2lmKHQpcC5wdXNoKCIkdG9wPSIrdCk7aWYoaSlwLnB1c2goIiRpbmxpbmVjb3VudD0iK2kpO3JldHVybiBwfTtBLnByb3RvdHlwZS5fZXhlY3V0ZUJhdGNoUmVxdWVzdD1mdW5jdGlvbihyKXt2YXIgYz10aGlzLmlBbmFseXRpY2FsSW5mb1ZlcnNpb25OdW1iZXI7dmFyIHQ9dGhpczt2YXIgYj1bXSxlPVtdO2Zvcih2YXIgaT0tMSxSO1I9clsrK2ldOyl7dmFyIGE9Ui5vQW5hbHl0aWNhbFF1ZXJ5UmVxdWVzdCxnPVIuc0dyb3VwSWQ7aWYoYS5nZXRVUklRdWVyeU9wdGlvblZhbHVlKCIkc2VsZWN0Iik9PW51bGwpe3RoaXMuZmlyZURhdGFSZXF1ZXN0ZWQoKTt2YXIgRT10aGlzLmdldE1vZGVsKCkuZ2V0Q29udGV4dCgiL2FydGlmaWNpYWxSb290Q29udGVudCIpO2c9bnVsbDt0aGlzLm1MZW5ndGhbZ109MTt0aGlzLm1GaW5hbExlbmd0aFtnXT10cnVlO3RoaXMubUtleVtnXT1bImFydGlmaWNpYWxSb290Q29udGVudCJdO3RoaXMuYk5lZWRzVXBkYXRlPXRydWU7dmFyIHQ9dGhpcztpZihyLmxlbmd0aD09MSl7c2V0VGltZW91dChmdW5jdGlvbigpe3QuZmlyZURhdGFSZWNlaXZlZCgpfSl9dGhpcy5iQXJ0aWZpY2FsUm9vdENvbnRleHQ9dHJ1ZTtjb250aW51ZX12YXIgcD1hLmdldFVSSVRvUXVlcnlSZXN1bHRFbnRyaWVzKCk7aWYocC5pbmRleE9mKCIvIik9PTApcD1wLnN1YnN0cmluZygxKTtpZighdGhpcy5faXNSZXF1ZXN0UGVuZGluZyhSLnNSZXF1ZXN0SWQpKXt0aGlzLl9yZWdpc3Rlck5ld1JlcXVlc3QoUi5zUmVxdWVzdElkKTtiLnB1c2godGhpcy5vTW9kZWwuY3JlYXRlQmF0Y2hPcGVyYXRpb24ocC5yZXBsYWNlKC9cIC9nLCIlMjAiKSwiR0VUIikpO2UucHVzaChSKX19cS5zYXAubG9nLmRlYnVnKCJBbmFseXRpY2FsQmluZGluZzogZXhlY3V0aW5nIGJhdGNoIHJlcXVlc3Qgd2l0aCAiK2UubGVuZ3RoKyIgb3BlcmF0aW9ucyIpO3ZhciBkPXRoaXMuX2dldElkRm9yTmV3UmVxdWVzdEhhbmRsZSgpO2lmKGIubGVuZ3RoPjApe3RoaXMub01vZGVsLmFkZEJhdGNoUmVhZE9wZXJhdGlvbnMoYik7dGhpcy5maXJlRGF0YVJlcXVlc3RlZCgpO3ZhciBmPXRoaXMub01vZGVsLnN1Ym1pdEJhdGNoKHMsaCx0cnVlLHRydWUpO3RoaXMub01vZGVsLmZpcmVSZXF1ZXN0U2VudCh7dXJsOnRoaXMub01vZGVsLnNTZXJ2aWNlVXJsKyIvJGJhdGNoIix0eXBlOiJQT1NUIixhc3luYzp0cnVlLGluZm86IiIsaW5mb09iamVjdDp7fX0pO3RoaXMuX3JlZ2lzdGVyTmV3UmVxdWVzdEhhbmRsZShkLGYpfWZ1bmN0aW9uIHMoRCxqKXt0Ll9kZXJlZ2lzdGVySGFuZGxlT2ZDb21wbGV0ZWRSZXF1ZXN0KGQpO2lmKGUubGVuZ3RoIT1ELl9fYmF0Y2hSZXNwb25zZXMubGVuZ3RoKXEuc2FwLmxvZy5mYXRhbCgiYXNzZXJ0aW9uIGZhaWxlZDogcmVjZWl2ZWQgIitELl9fYmF0Y2hSZXNwb25zZXMubGVuZ3RoKyIgcmVzcG9uc2VzIGZvciAiK2UubGVuZ3RoKyIgcmVhZCBvcGVyYXRpb25zIGluIHRoZSBiYXRjaCByZXF1ZXN0Iik7aWYoYyE9dC5pQW5hbHl0aWNhbEluZm9WZXJzaW9uTnVtYmVyKXtmb3IodmFyIGk9LTEsaztrPWVbKytpXS5zUmVxdWVzdElkOyl7dC5fZGVyZWdpc3RlckNvbXBsZXRlZFJlcXVlc3Qoayk7dC5fY2xlYW51cEdyb3VwaW5nRm9yQ29tcGxldGVkUmVxdWVzdChrKX1yZXR1cm59Zm9yKHZhciBpPTA7aTxELl9fYmF0Y2hSZXNwb25zZXMubGVuZ3RoO2krKyl7aWYoRC5fX2JhdGNoUmVzcG9uc2VzW2ldLmRhdGEhPXVuZGVmaW5lZCl7c3dpdGNoKGVbaV0uaVJlcXVlc3RUeXBlKXtjYXNlIEEuX3JlcXVlc3RUeXBlLmdyb3VwTWVtYmVyc1F1ZXJ5OnQuX3Byb2Nlc3NHcm91cE1lbWJlcnNRdWVyeVJlc3BvbnNlKGVbaV0sRC5fX2JhdGNoUmVzcG9uc2VzW2ldLmRhdGEpO2JyZWFrO2Nhc2UgQS5fcmVxdWVzdFR5cGUudG90YWxTaXplUXVlcnk6dC5fcHJvY2Vzc1RvdGFsU2l6ZVF1ZXJ5UmVzcG9uc2UoZVtpXSxELl9fYmF0Y2hSZXNwb25zZXNbaV0uZGF0YSk7YnJlYWs7Y2FzZSBBLl9yZXF1ZXN0VHlwZS5sZXZlbE1lbWJlcnNRdWVyeTp0Ll9wcm9jZXNzTGV2ZWxNZW1iZXJzUXVlcnlSZXNwb25zZShlW2ldLEQuX19iYXRjaFJlc3BvbnNlc1tpXS5kYXRhKTticmVhaztkZWZhdWx0OnEuc2FwLmxvZy5mYXRhbCgiaW52YWxpZCByZXF1ZXN0IHR5cGUgIitlW2ldLmlSZXF1ZXN0VHlwZSk7Y29udGludWV9fXQuX2RlcmVnaXN0ZXJDb21wbGV0ZWRSZXF1ZXN0KGVbaV0uc1JlcXVlc3RJZCk7dC5fY2xlYW51cEdyb3VwaW5nRm9yQ29tcGxldGVkUmVxdWVzdChlW2ldLnNSZXF1ZXN0SWQpfXZhciBPPXRydWU7dmFyIEI9dC5vTW9kZWwuX2dldEJhdGNoRXJyb3JzKEQpO2lmKEIubGVuZ3RoPjApTz1mYWxzZTt0Lm9Nb2RlbC5maXJlUmVxdWVzdENvbXBsZXRlZCh7dXJsOmoucmVxdWVzdFVyaSx0eXBlOiJQT1NUIixhc3luYzp0cnVlLGluZm86IiIsaW5mb09iamVjdDp7fSxzdWNjZXNzOk8sZXJyb3JvYmplY3Q6Tz97fTp0Lm9Nb2RlbC5faGFuZGxlRXJyb3IoQlswXSl9KTtpZihPKXt0Lm9Nb2RlbC5jaGVja1VwZGF0ZSgpfXQuZmlyZURhdGFSZWNlaXZlZCgpfWZ1bmN0aW9uIGgoail7dC5fZGVyZWdpc3RlckhhbmRsZU9mQ29tcGxldGVkUmVxdWVzdChkKTtmb3IodmFyIGk9LTEsaztrPWVbKytpXTspe3QuX2RlcmVnaXN0ZXJDb21wbGV0ZWRSZXF1ZXN0KGsuc1JlcXVlc3RJZCk7dC5fY2xlYW51cEdyb3VwaW5nRm9yQ29tcGxldGVkUmVxdWVzdChrLnNSZXF1ZXN0SWQpfWlmKGMhPXQuaUFuYWx5dGljYWxJbmZvVmVyc2lvbk51bWJlcil7cmV0dXJufXQub01vZGVsLmZpcmVSZXF1ZXN0Q29tcGxldGVkKHt1cmw6IiIsdHlwZToiUE9TVCIsYXN5bmM6dHJ1ZSxpbmZvOiIiLGluZm9PYmplY3Q6e30sc3VjY2VzczpmYWxzZSxlcnJvcm9iamVjdDp0Lm9Nb2RlbC5faGFuZGxlRXJyb3Ioail9KTt0Lm9Nb2RlbC5maXJlUmVxdWVzdEZhaWxlZCh0Lm9Nb2RlbC5faGFuZGxlRXJyb3IoaikpO3QuZmlyZURhdGFSZWNlaXZlZCgpfX07QS5wcm90b3R5cGUuX2V4ZWN1dGVRdWVyeVJlcXVlc3Q9ZnVuY3Rpb24ocil7aWYoci5pUmVxdWVzdFR5cGU9PUEuX3JlcXVlc3RUeXBlLmdyb3VwTWVtYmVyc0F1dG9FeHBhbnNpb25RdWVyeSl7Zm9yKHZhciBpPS0xLGE7YT1yLmFHcm91cE1lbWJlcnNBdXRvRXhwYW5zaW9uUmVxdWVzdERldGFpbHNbKytpXTspe3RoaXMuX2V4ZWN1dGVRdWVyeVJlcXVlc3QoYSl9cmV0dXJufXZhciBjPXRoaXMuaUFuYWx5dGljYWxJbmZvVmVyc2lvbk51bWJlcjt2YXIgYT1yLm9BbmFseXRpY2FsUXVlcnlSZXF1ZXN0LGc9ci5zR3JvdXBJZDt2YXIgcD1hLmdldFVSSVRvUXVlcnlSZXN1bHRFbnRpdHlTZXQoKTt2YXIgUD10aGlzLl9nZXRRdWVyeU9EYXRhUmVxdWVzdE9wdGlvbnMoYSk7dmFyIHQ9dGhpcztpZihhLmdldFVSSVF1ZXJ5T3B0aW9uVmFsdWUoIiRzZWxlY3QiKT09bnVsbCl7dGhpcy5maXJlRGF0YVJlcXVlc3RlZCgpO3ZhciBlPXRoaXMuZ2V0TW9kZWwoKS5nZXRDb250ZXh0KCIvYXJ0aWZpY2lhbFJvb3RDb250ZW50Iik7Zz1udWxsO3RoaXMubUxlbmd0aFtnXT0xO3RoaXMubUZpbmFsTGVuZ3RoW2ddPXRydWU7dGhpcy5tS2V5W2ddPVsiYXJ0aWZpY2lhbFJvb3RDb250ZW50Il07dGhpcy5iTmVlZHNVcGRhdGU9dHJ1ZTt2YXIgdD10aGlzO3NldFRpbWVvdXQoZnVuY3Rpb24oKXtpZih0Ll9jbGVhbnVwR3JvdXBpbmdGb3JDb21wbGV0ZWRSZXF1ZXN0KHIuc1JlcXVlc3RJZCkpdC5maXJlRGF0YVJlY2VpdmVkKCl9KTt0aGlzLmJBcnRpZmljYWxSb290Q29udGV4dD10cnVlO3JldHVybn10aGlzLl9yZWdpc3Rlck5ld1JlcXVlc3Qoci5zUmVxdWVzdElkKTt0aGlzLmZpcmVEYXRhUmVxdWVzdGVkKCk7Zm9yKHZhciBpPTA7aTxQLmxlbmd0aDtpKyspUFtpXT1QW2ldLnJlcGxhY2UoL1wgL2csIiUyMCIpO3Euc2FwLmxvZy5kZWJ1ZygiQW5hbHl0aWNhbEJpbmRpbmc6IGV4ZWN1dGluZyBxdWVyeSByZXF1ZXN0Iik7dmFyIFI9dGhpcy5fZ2V0SWRGb3JOZXdSZXF1ZXN0SGFuZGxlKCk7dGhpcy5vTW9kZWwuX2xvYWREYXRhKHAsUCxzLEUsZmFsc2UsdSxmKTtmdW5jdGlvbiBzKGQpe3QuX2RlcmVnaXN0ZXJIYW5kbGVPZkNvbXBsZXRlZFJlcXVlc3QoUik7aWYoYyE9dC5pQW5hbHl0aWNhbEluZm9WZXJzaW9uTnVtYmVyKXt0Ll9kZXJlZ2lzdGVyQ29tcGxldGVkUmVxdWVzdChyLnNSZXF1ZXN0SWQpO3JldHVybn1zd2l0Y2goci5pUmVxdWVzdFR5cGUpe2Nhc2UgQS5fcmVxdWVzdFR5cGUuZ3JvdXBNZW1iZXJzUXVlcnk6dC5fcHJvY2Vzc0dyb3VwTWVtYmVyc1F1ZXJ5UmVzcG9uc2UocixkKTticmVhaztjYXNlIEEuX3JlcXVlc3RUeXBlLnRvdGFsU2l6ZVF1ZXJ5OnQuX3Byb2Nlc3NUb3RhbFNpemVRdWVyeVJlc3BvbnNlKHIsZCk7YnJlYWs7Y2FzZSBBLl9yZXF1ZXN0VHlwZS5sZXZlbE1lbWJlcnNRdWVyeTp0Ll9wcm9jZXNzTGV2ZWxNZW1iZXJzUXVlcnlSZXNwb25zZShyLGQpO2JyZWFrO2RlZmF1bHQ6cS5zYXAubG9nLmZhdGFsKCJpbnZhbGlkIHJlcXVlc3QgdHlwZSAiK3IuaVJlcXVlc3RUeXBlKTticmVha310Ll9kZXJlZ2lzdGVyQ29tcGxldGVkUmVxdWVzdChyLnNSZXF1ZXN0SWQpfWZ1bmN0aW9uIGYoKXtpZihjIT10LmlBbmFseXRpY2FsSW5mb1ZlcnNpb25OdW1iZXIpe3JldHVybn1pZih0Ll9jbGVhbnVwR3JvdXBpbmdGb3JDb21wbGV0ZWRSZXF1ZXN0KHIuc1JlcXVlc3RJZCkpdC5maXJlRGF0YVJlY2VpdmVkKCl9ZnVuY3Rpb24gRShkKXt0Ll9kZXJlZ2lzdGVySGFuZGxlT2ZDb21wbGV0ZWRSZXF1ZXN0KFIpO3QuX2RlcmVnaXN0ZXJDb21wbGV0ZWRSZXF1ZXN0KHIuc1JlcXVlc3RJZCk7dC5fY2xlYW51cEdyb3VwaW5nRm9yQ29tcGxldGVkUmVxdWVzdChyLnNSZXF1ZXN0SWQpO2lmKGMhPXQuaUFuYWx5dGljYWxJbmZvVmVyc2lvbk51bWJlcil7cmV0dXJufXQuZmlyZURhdGFSZWNlaXZlZCgpfWZ1bmN0aW9uIHUoYil7dC5fcmVnaXN0ZXJOZXdSZXF1ZXN0SGFuZGxlKFIsYil9fTtBLnByb3RvdHlwZS5fYWJvcnRBbGxQZW5kaW5nUmVxdWVzdHM9ZnVuY3Rpb24oKXt0aGlzLl9hYm9ydEFsbFBlbmRpbmdSZXF1ZXN0c0J5SGFuZGxlKCk7dGhpcy5fY2xlYXJBbGxQZW5kaW5nUmVxdWVzdHMoKX07QS5wcm90b3R5cGUuX3Byb2Nlc3NHcm91cE1lbWJlcnNRdWVyeVJlc3BvbnNlPWZ1bmN0aW9uKHIsZCl7dmFyIGc9ci5zR3JvdXBJZCxzPXIuYVNlbGVjdGVkVW5pdFByb3BlcnR5TmFtZSxhPXIuYUFnZ3JlZ2F0aW9uTGV2ZWwsYj1yLmlTdGFydEluZGV4LGw9ci5pTGVuZ3RoLEc9Zz09bnVsbD8wOnRoaXMuX2dldEdyb3VwSWRMZXZlbChnKSsxO2lmKCF0aGlzLm1LZXlbZ10pdGhpcy5tS2V5W2ddPVtdO3ZhciBLPXRoaXMubUtleVtnXTt2YXIgYz1iO3ZhciB1PShzLmxlbmd0aD4wKTt2YXIgcD1udWxsLEQ9bnVsbDt2YXIgZj0tMTt2YXIgZT0wO3ZhciBoPW51bGw7Zm9yKHZhciBpPTA7aTxkLnJlc3VsdHMubGVuZ3RoO2krKyl7dmFyIEU9ZC5yZXN1bHRzW2ldO2lmKHUpe0Q9IiI7Zm9yKHZhciBqPTA7ajxhLmxlbmd0aDtqKyspe0QrPUVbYVtqXV0rInwifWlmKHA9PUQpe2lmKGY9PS0xKWY9aS0xO3ZhciBtPS0xLFA9ZC5yZXN1bHRzW2ktMV07Zm9yKHZhciBrPTA7azxzLmxlbmd0aDtrKyspe2lmKFBbc1trXV0hPUVbc1trXV0pe209azticmVha319aWYobT09LTEpcS5zYXAubG9nLmZhdGFsKCJhc3NlcnRpb24gZmFpbGVkOiBubyBkZXZpYXRpbmcgdW5pdHMgZm91bmQgZm9yIHJlc3VsdCBlbnRyaWVzICIrKGktMSkrIiBhbmQgIitpKX1pZigocCE9RHx8aT09ZC5yZXN1bHRzLmxlbmd0aC0xKSYmZiE9LTEpe3ZhciBNPXEuZXh0ZW5kKHRydWUse30sZC5yZXN1bHRzW2ZdKTt2YXIgbj10aGlzLm9Nb2RlbC5fZ2V0T2JqZWN0KCIvIit0aGlzLm9Nb2RlbC5fZ2V0S2V5KGQucmVzdWx0c1tmXSkpO2Zvcih2YXIgaz0wO2s8cy5sZW5ndGg7aysrKU1bc1trXV09IioiO2Zvcih2YXIgdCBpbiB0aGlzLm9NZWFzdXJlRGV0YWlsc1NldCl7dmFyIHY9dGhpcy5vTWVhc3VyZURldGFpbHNTZXRbdF07aWYoIXIuYklzRmxhdExpc3RSZXF1ZXN0JiYhdGhpcy5tQW5hbHl0aWNhbEluZm9CeVByb3BlcnR5W3RdLnRvdGFsKXtpZih2LnJhd1ZhbHVlUHJvcGVydHlOYW1lIT11bmRlZmluZWQpTVt2LnJhd1ZhbHVlUHJvcGVydHlOYW1lXT11bmRlZmluZWQ7aWYodi5mb3JtYXR0ZWRWYWx1ZVByb3BlcnR5TmFtZSE9dW5kZWZpbmVkKU1bdi5mb3JtYXR0ZWRWYWx1ZVByb3BlcnR5TmFtZV09dW5kZWZpbmVkfWVsc2V7aWYodi5yYXdWYWx1ZVByb3BlcnR5TmFtZSE9dW5kZWZpbmVkKU1bdi5yYXdWYWx1ZVByb3BlcnR5TmFtZV09bnVsbDtpZih2LmZvcm1hdHRlZFZhbHVlUHJvcGVydHlOYW1lIT11bmRlZmluZWQpTVt2LmZvcm1hdHRlZFZhbHVlUHJvcGVydHlOYW1lXT0iKiJ9fXZhciB3PSIiO2lmKGg9PW51bGwpaD10aGlzLm9BbmFseXRpY2FsUXVlcnlSZXN1bHQuZ2V0QWxsRGltZW5zaW9uTmFtZXMoKS5jb25jYXQoW10pLnNvcnQoKTtmb3IodmFyIGs9MDtrPGgubGVuZ3RoO2srKyl7dmFyIHg9TVtoW2tdXTt3Kz0oeD09PXVuZGVmaW5lZD8iIjp4KSsiLCJ9TS5fX21ldGFkYXRhLnVyaT13KyItbXVsdGlwbGUtdW5pdHMtbm90LWRlcmVmZXJlbmNhYmxlIjtkZWxldGUgTS5fX21ldGFkYXRhWyJzZWxmIl07ZGVsZXRlIE0uX19tZXRhZGF0YVsic2VsZl9saW5rX2V4dGVuc2lvbnMiXTtNWyJefnZvbGF0aWxlIl09dHJ1ZTt0aGlzLm9Nb2RlbC5faW1wb3J0RGF0YShNLHt9KTt2YXIgeT10aGlzLm9Nb2RlbC5fZ2V0S2V5KE0pO3RoaXMub01vZGVsLmdldENvbnRleHQoJy8nK3kpWyJfdm9sYXRpbGUiXT10cnVlO0tbYy0xXT15O2lmKGk9PWQucmVzdWx0cy5sZW5ndGgtMSYmcD09RCllKz1pLWY7ZWxzZSBlKz1pLWYtMTtmPS0xO2lmKHAhPUQpS1tjKytdPXRoaXMub01vZGVsLl9nZXRLZXkoRSl9ZWxzZSBpZihwIT1EKUtbYysrXT10aGlzLm9Nb2RlbC5fZ2V0S2V5KEUpO3A9RH1lbHNlIEtbYysrXT10aGlzLm9Nb2RlbC5fZ2V0S2V5KEUpO2lmKCFyLmJJc0xlYWZHcm91cHNSZXF1ZXN0KXt2YXIgej10aGlzLl9nZXRHcm91cElkRnJvbUNvbnRleHQodGhpcy5vTW9kZWwuZ2V0Q29udGV4dCgnLycrS1tjLTFdKSxHKTt0aGlzLm1Pd25LZXlbel09S1tjLTFdfX1pZighci5iQXZvaWRMZW5ndGhVcGRhdGUpe2lmKGQuX19jb3VudCl7dGhpcy5tTGVuZ3RoW2ddPXBhcnNlSW50KGQuX19jb3VudCwxMCktZTt0aGlzLm1GaW5hbExlbmd0aFtnXT10cnVlO2lmKHIuYklzRmxhdExpc3RSZXF1ZXN0KXRoaXMuaVRvdGFsU2l6ZT1kLl9fY291bnR9aWYodGhpcy5tTGVuZ3RoW2ddPGIrZC5yZXN1bHRzLmxlbmd0aCl7dGhpcy5tTGVuZ3RoW2ddPWIrKGQucmVzdWx0cy5sZW5ndGgtZSk7dGhpcy5tRmluYWxMZW5ndGhbZ109ZmFsc2V9aWYoKGQucmVzdWx0cy5sZW5ndGgtZSk8bHx8bD09PXVuZGVmaW5lZCl7dGhpcy5tTGVuZ3RoW2ddPWIrKGQucmVzdWx0cy5sZW5ndGgtZSk7dGhpcy5tRmluYWxMZW5ndGhbZ109dHJ1ZX1pZihkLnJlc3VsdHMubGVuZ3RoPT0wKXt0aGlzLm1MZW5ndGhbZ109MDt0aGlzLm1GaW5hbExlbmd0aFtnXT10cnVlfX10aGlzLmJOZWVkc1VwZGF0ZT10cnVlfTtBLnByb3RvdHlwZS5fcHJvY2Vzc1RvdGFsU2l6ZVF1ZXJ5UmVzcG9uc2U9ZnVuY3Rpb24ocixkKXt2YXIgYT1yLm9BbmFseXRpY2FsUXVlcnlSZXF1ZXN0O2lmKGQuX19jb3VudD09dW5kZWZpbmVkKXtxLnNhcC5sb2cuZmF0YWwoIm1pc3NpbmcgZW50aXR5IGNvdW50IGluIHF1ZXJ5IHJlc3VsdCIpO3JldHVybn10aGlzLmlUb3RhbFNpemU9ZC5fX2NvdW50fTtBLnByb3RvdHlwZS5fcHJvY2Vzc0xldmVsTWVtYmVyc1F1ZXJ5UmVzcG9uc2U9ZnVuY3Rpb24ocixkKXt2YXIgcD1mdW5jdGlvbihjLEkpe3ZhciBnPXtpUmVxdWVzdFR5cGU6QS5fcmVxdWVzdFR5cGUuZ3JvdXBNZW1iZXJzUXVlcnksc1JlcXVlc3RJZDp0Ll9nZXRSZXF1ZXN0SWQoQS5fcmVxdWVzdFR5cGUuZ3JvdXBNZW1iZXJzUXVlcnkse2dyb3VwSWQ6UH0pLG9BbmFseXRpY2FsUXVlcnlSZXF1ZXN0OnIub0FuYWx5dGljYWxRdWVyeVJlcXVlc3Qsc0dyb3VwSWQ6UCxhU2VsZWN0ZWRVbml0UHJvcGVydHlOYW1lOnIuYVNlbGVjdGVkVW5pdFByb3BlcnR5TmFtZSxhQWdncmVnYXRpb25MZXZlbDpyLmFBZ2dyZWdhdGlvbkxldmVsLGJJc0ZsYXRMaXN0UmVxdWVzdDpyLmJJc0ZsYXRMaXN0UmVxdWVzdCxiSXNMZWFmR3JvdXBzUmVxdWVzdDpyLmJJc0xlYWZHcm91cHNSZXF1ZXN0LGlTdGFydEluZGV4OmM/ci5pU3RhcnRJbmRleDowLGlMZW5ndGg6ci5pTGVuZ3RoLGJBdm9pZExlbmd0aFVwZGF0ZTpyLmJBdm9pZExlbmd0aFVwZGF0ZX07aWYoYyYmci5pU3RhcnRJbmRleD4wJiYodC5tS2V5W2cuc0dyb3VwSWRdPT09dW5kZWZpbmVkfHx0Lm1LZXlbZy5zR3JvdXBJZF1bci5pU3RhcnRJbmRleC0xXT09PXVuZGVmaW5lZCkpe3ZhciBzPXQuX2dldFBhcmVudEdyb3VwSWQoZy5zR3JvdXBJZCk7dmFyIGg9dC5tS2V5W3NdLmluZGV4T2YodC5tT3duS2V5W2cuc0dyb3VwSWRdKTtpZihoPT0tMSlxLnNhcC5sb2cuZmF0YWwoImFzc2VydGlvbiBmYWlsZWQ6IGZhaWxlZCB0byBkZXRlcm1pbmUgcG9zaXRpb24gb2YgIitnLnNHcm91cElkKyIgaW4gZ3JvdXAgIitzKTtpZihoPjAmJnQubUtleVtzXVtoLTFdIT09dW5kZWZpbmVkKXt2YXIgaj10Lm1LZXlbc11baC0xXTt2YXIgaz10Ll9nZXRHcm91cElkRnJvbUNvbnRleHQodC5vTW9kZWwuZ2V0Q29udGV4dCgnLycraiksdC5fZ2V0R3JvdXBJZExldmVsKGcuc0dyb3VwSWQpKTt0Lm1GaW5hbExlbmd0aFtrXT10cnVlO2cuaVN0YXJ0SW5kZXg9MH19aWYoSSl7Zy5pTGVuZ3RoPTA7dC5tTGVuZ3RoW2cuc0dyb3VwSWRdPTB9dmFyIGw9cS5leHRlbmQodHJ1ZSx7fSxkKTtsLnJlc3VsdHM9Yjt0Ll9wcm9jZXNzR3JvdXBNZW1iZXJzUXVlcnlSZXNwb25zZShnLGwpfTt2YXIgYT1yLm9BbmFseXRpY2FsUXVlcnlSZXF1ZXN0LHQ9dGhpcztpZihkLnJlc3VsdHMubGVuZ3RoPT0wKXJldHVybjt2YXIgUD10aGlzLl9nZXRHcm91cElkRnJvbUNvbnRleHQodGhpcy5vTW9kZWwuZ2V0Q29udGV4dCgiLyIrdGhpcy5vTW9kZWwuX2dldEtleShkLnJlc3VsdHNbMF0pKSxyLmlMZXZlbC0xKTt2YXIgYj1bXTt2YXIgYz10cnVlO2Zvcih2YXIgaT0wO2k8ZC5yZXN1bHRzLmxlbmd0aDtpKyspe3ZhciBlPWQucmVzdWx0c1tpXTt2YXIgZj10aGlzLm9Nb2RlbC5nZXRDb250ZXh0KCIvIit0aGlzLm9Nb2RlbC5fZ2V0S2V5KGQucmVzdWx0c1tpXSkpO3ZhciBzPXRoaXMuX2dldEdyb3VwSWRGcm9tQ29udGV4dChmLHIuaUxldmVsLTEpO2lmKFA9PXMpe2IucHVzaChlKTtpZihpPGQucmVzdWx0cy5sZW5ndGgtMSljb250aW51ZX1wKGMsZC5yZXN1bHRzLmxlbmd0aD09ci5pTGVuZ3RoJiZpPT1kLnJlc3VsdHMubGVuZ3RoLTEpO2M9ZmFsc2U7aWYoUCE9cyliPVtlXTtQPXN9aWYoYi5sZW5ndGg9PTEpcChjLGQucmVzdWx0cy5sZW5ndGg9PXIuaUxlbmd0aCl9O0EucHJvdG90eXBlLl9nZXRMb2FkZWRDb250ZXh0c0Zvckdyb3VwPWZ1bmN0aW9uKGcscyxsKXt2YXIgYz1bXSxhLGs9dGhpcy5tS2V5W2ddLEs7aWYoIWspcmV0dXJuIGM7aWYoIXMpcz0wO2lmKCFsKXtsPXRoaXMub01vZGVsLmlTaXplTGltaXQ7aWYodGhpcy5tRmluYWxMZW5ndGhbZ10mJnRoaXMubUxlbmd0aFtnXTxsKWw9dGhpcy5tTGVuZ3RoW2ddfWZvcih2YXIgaT1zO2k8cytsO2krKyl7Sz1rW2ldO2lmKCFLKXticmVha31hPXRoaXMub01vZGVsLmdldENvbnRleHQoJy8nK0spO2MucHVzaChhKX1yZXR1cm4gY307QS5wcm90b3R5cGUuX2NhbGN1bGF0ZVJlcXVpcmVkR3JvdXBTZWN0aW9uPWZ1bmN0aW9uKGcscyxsLHQsYyl7dmFyIEw9ZmFsc2UsYSxiLHAsUCxyLGQ9e30saz10aGlzLm1LZXlbZ10sSztiPXM7YT0wO2lmKCFrKXtQPXM7cD1zK2x9ZWxzZXtmb3IodmFyIGk9cy0xO2k+PU1hdGgubWF4KHMtdCwwKTtpLS0pe0s9a1tpXTtpZighSyl7UD1pKzE7YnJlYWt9fWZvcih2YXIgaj1zK2w7ajxzK2wrdDtqKyspe0s9a1tqXTtpZighSyl7cD1qO2JyZWFrfX19cj1zLVA7aWYoUCYmcz50JiZyPHQpe2lmKGMubGVuZ3RoIT1sKWI9cy10O2Vsc2UgYj1QLXQ7YT10fWlmKGI9PXMpYis9Yy5sZW5ndGg7aWYoYy5sZW5ndGghPWwpYSs9bC1jLmxlbmd0aDtyPXAtcy1sO2lmKHI9PTApYSs9dDtpZihwJiZyPHQmJnI+MCl7aWYoYj49cyl7Yj1wO2ErPXR9fWlmKHRoaXMubUZpbmFsTGVuZ3RoW2ddJiZ0aGlzLm1MZW5ndGhbZ108KGErYikpYT10aGlzLm1MZW5ndGhbZ10tYjtkLnN0YXJ0SW5kZXg9YjtkLmxlbmd0aD1hO3JldHVybiBkfTtBLnByb3RvdHlwZS5fY2FsY3VsYXRlUmVxdWlyZWRHcm91cEV4cGFuc2lvbj1mdW5jdGlvbihnLGEscyxsKXt2YXIgbj17Z3JvdXBJZF9NaXNzaW5nOm51bGwsbGVuZ3RoX01pc3Npbmc6MH07dmFyIGM9ZnVuY3Rpb24oZyxhLHMsbCl7dmFyIEw9dC5fZ2V0R3JvdXBJZExldmVsKGcpO2lmKEw9PWEpe3ZhciBqPXQuX2dldExvYWRlZENvbnRleHRzRm9yR3JvdXAoZyxzLGwpO3ZhciBrPXMrai5sZW5ndGgtMTtpZihqLmxlbmd0aD49bClyZXR1cm4gbjtlbHNle2lmKHQubUZpbmFsTGVuZ3RoW2ddKXtpZihqLmxlbmd0aD49dC5tTGVuZ3RoW2ddKXJldHVybntncm91cElkX01pc3Npbmc6bnVsbCxsZW5ndGhfTWlzc2luZzpsLWoubGVuZ3RofTtlbHNlIHJldHVybntncm91cElkX01pc3Npbmc6ZyxzdGFydEluZGV4X01pc3Npbmc6aysxLGxlbmd0aF9NaXNzaW5nOmwtai5sZW5ndGh9fWVsc2UgcmV0dXJue2dyb3VwSWRfTWlzc2luZzpnLHN0YXJ0SW5kZXhfTWlzc2luZzprKzEsbGVuZ3RoX01pc3Npbmc6bC1qLmxlbmd0aH19fXZhciBqPXQuX2dldExvYWRlZENvbnRleHRzRm9yR3JvdXAoZyxzLGwpO3ZhciBiPWwsaz1zK2oubGVuZ3RoLTE7Zm9yKHZhciBpPS0xLG07bT1qWysraV07KXtiLS07dmFyIEc9Yyh0Ll9nZXRHcm91cElkRnJvbUNvbnRleHQobSxMKzEpLGEsMCxiKTtpZihHLmdyb3VwSWRfTWlzc2luZz09bnVsbCl7aWYoRy5sZW5ndGhfTWlzc2luZz09MClyZXR1cm4gRztlbHNlIGI9Ry5sZW5ndGhfTWlzc2luZ31lbHNle3JldHVybiBHfWlmKGI9PTApYnJlYWt9aWYodC5tRmluYWxMZW5ndGhbZ118fGI9PTApcmV0dXJue2dyb3VwSWRfTWlzc2luZzpudWxsLGxlbmd0aF9NaXNzaW5nOmJ9O2Vsc2UgcmV0dXJue2dyb3VwSWRfTWlzc2luZzpnLHN0YXJ0SW5kZXhfTWlzc2luZzprKzEsbGVuZ3RoX01pc3Npbmc6Yn19O3ZhciB0PXRoaXM7dmFyIEw9dGhpcy5fZ2V0R3JvdXBJZExldmVsKGcpO2lmKEw9PWErMSl7Zz10aGlzLl9nZXRQYXJlbnRHcm91cElkKGcpOy0tTH1pZihnPT1udWxsfHxMPmEpcmV0dXJuIG47dmFyIGI9bCxkPXM7d2hpbGUoZyE9bnVsbCl7dmFyIEc9YyhnLGEsZCxiKTtpZihHLmdyb3VwSWRfTWlzc2luZyE9bnVsbClyZXR1cm4gRztlbHNlIGlmKEcubGVuZ3RoX01pc3Npbmc9PTApcmV0dXJuIEc7ZWxzZXt2YXIgZj1mYWxzZTt3aGlsZSghZil7dmFyIHA9dGhpcy5fZ2V0UGFyZW50R3JvdXBJZChnKTtpZihwPT1udWxsKXtnPXA7LS1MO2JyZWFrfXZhciBlPXRoaXMubU93bktleVtnXTtpZighZSl7cS5zYXAubG9nLmZhdGFsKCJhc3NlcnRpb24gZmFpbGVkOiBlbnRpdHlrZXkgZm9yIGdyb3VwIHcvIElEICIrZysiIG5vdCBhdmFpbGFibGUiKTtyZXR1cm4gbn12YXIgaD10aGlzLm1LZXlbcF0uaW5kZXhPZihlKTtpZihoPT0tMSl7cS5zYXAubG9nLmZhdGFsKCJhc3NlcnRpb24gZmFpbGVkOiBncm91cCB3LyBJRCAiK2crIiBub3QgZm91bmQgaW4gbWVtYmVycyBvZiBwYXJlbnQgdy8gSUQgIitwKTtyZXR1cm4gbn1pZihoPT10aGlzLm1LZXlbcF0ubGVuZ3RoLTEpe2lmKHRoaXMubUZpbmFsTGVuZ3RoW3BdKXtnPXA7LS1MO2NvbnRpbnVlfWVsc2V7cmV0dXJue2dyb3VwSWRfTWlzc2luZzpwLHN0YXJ0SW5kZXhfTWlzc2luZzpoKzEsbGVuZ3RoX01pc3Npbmc6Yn19fWVsc2V7ZT10aGlzLm1LZXlbcF1baCsxXTtnPXRoaXMuX2dldEdyb3VwSWRGcm9tQ29udGV4dCh0aGlzLm9Nb2RlbC5nZXRDb250ZXh0KCcvJytlKSxMKTtmPXRydWV9fWQ9MDtiPUcubGVuZ3RoX01pc3Npbmd9fXJldHVybntncm91cElkX01pc3Npbmc6bnVsbCxsZW5ndGhfTWlzc2luZzpifX07QS5wcm90b3R5cGUuX2dldFJlc291cmNlUGF0aD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmlzUmVsYXRpdmUoKT90aGlzLm9Nb2RlbC5yZXNvbHZlKHRoaXMuc1BhdGgsdGhpcy5nZXRDb250ZXh0KCkpOnRoaXMuc1BhdGh9O0EucHJvdG90eXBlLl9nZXRFbnRpdHlTZXQ9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnNFbnRpdHlTZXROYW1lO3ZhciBiPXRoaXMuZ2V0Q29udGV4dCgpO2lmKCFlKXtlPXRoaXMuc1BhdGguc3BsaXQoIi8iKVsxXTtpZihlLmluZGV4T2YoIigiKSE9LTEpe2U9ZS5zcGxpdCgiKCIpWzBdKyJSZXN1bHRzIn19cmV0dXJuIGV9O0EucHJvdG90eXBlLl9nZXRFZmZlY3RpdmVTb3J0T3JkZXI9ZnVuY3Rpb24ocCl7Zm9yKHZhciBpPTA7aTx0aGlzLmFTb3J0ZXIubGVuZ3RoO2krKyl7aWYodGhpcy5hU29ydGVyW2ldJiZ0aGlzLmFTb3J0ZXJbaV0uc1BhdGg9PXApe3JldHVybiB0aGlzLmFTb3J0ZXJbaV0uYkRlc2NlbmRpbmc/by5Tb3J0T3JkZXIuRGVzY2VuZGluZzpvLlNvcnRPcmRlci5Bc2NlbmRpbmd9fXJldHVybiBudWxsfTtBLnByb3RvdHlwZS5fZ2V0RmlsdGVyT3BlcmF0b3JNYXRjaGluZ1Byb3BlcnR5U29ydE9yZGVyPWZ1bmN0aW9uKHAsdyl7dmFyIGY9c2FwLnVpLm1vZGVsLkZpbHRlck9wZXJhdG9yLkdUO3N3aXRjaCh0aGlzLl9nZXRFZmZlY3RpdmVTb3J0T3JkZXIocCkpe2Nhc2Ugby5Tb3J0T3JkZXIuQXNjZW5kaW5nOmlmKHcpZj1zYXAudWkubW9kZWwuRmlsdGVyT3BlcmF0b3IuR0U7ZWxzZSBmPXNhcC51aS5tb2RlbC5GaWx0ZXJPcGVyYXRvci5HVDticmVhaztjYXNlIG8uU29ydE9yZGVyLkRlc2NlbmRpbmc6aWYodylmPXNhcC51aS5tb2RlbC5GaWx0ZXJPcGVyYXRvci5MRTtlbHNlIGY9c2FwLnVpLm1vZGVsLkZpbHRlck9wZXJhdG9yLkxUO2JyZWFrfXJldHVybiBmfTtBLnByb3RvdHlwZS5fY29udmVydERlcHJlY2F0ZWRGaWx0ZXJPYmplY3RzPWZ1bmN0aW9uKGYpe2lmKCFmKXJldHVybiBmO2Zvcih2YXIgaT0wLGw9Zi5sZW5ndGg7aTxsO2krKyl7aWYoc2FwLnVpLm1vZGVsLm9kYXRhJiZ0eXBlb2Ygc2FwLnVpLm1vZGVsLm9kYXRhLkZpbHRlcj09PSJmdW5jdGlvbiImJmZbaV1pbnN0YW5jZW9mIHNhcC51aS5tb2RlbC5vZGF0YS5GaWx0ZXIpZltpXT1mW2ldLmNvbnZlcnQoKX1yZXR1cm4gZn07QS5wcm90b3R5cGUuX2dldEdyb3VwSWRGcm9tQ29udGV4dD1mdW5jdGlvbihjLGwpe2lmKCFjKXtyZXR1cm4gbnVsbH12YXIgZz0iLyI7dmFyIGQ9bnVsbDtpZihsPnRoaXMuYUFnZ3JlZ2F0aW9uTGV2ZWwubGVuZ3RoKXEuc2FwLmxvZy5mYXRhbCgiYXNzZXJ0aW9uIGZhaWxlZDogYWdncmVnYXRpb24gbGV2ZWwgZGVlcGVyIHRoYW4gbnVtYmVyIG9mIGN1cnJlbnQgYWdncmVnYXRpb24gbGV2ZWxzIik7Zm9yKHZhciBpPTA7aTxsO2krKyl7ZD1jLmdldFByb3BlcnR5KHRoaXMuYUFnZ3JlZ2F0aW9uTGV2ZWxbaV0pO2lmKGQhPW51bGwpe2crPWVuY29kZVVSSUNvbXBvbmVudChkKSsiLyJ9ZWxzZXtnKz0iQC8ifX1yZXR1cm4gZ307QS5wcm90b3R5cGUuX2dldEdyb3VwSWRMZXZlbD1mdW5jdGlvbihnKXtpZihnPT1udWxsKXtxLnNhcC5sb2cuZmF0YWwoImFzc2VydGlvbiBmYWlsZWQ6IG5vIG5lZWQgdG8gZGV0ZXJtaW5lIGxldmVsIG9mIGdyb3VwIElEID0gbnVsbCIpO3JldHVybi0xfXJldHVybiBnLnNwbGl0KCIvIikubGVuZ3RoLTJ9O0EucHJvdG90eXBlLl9nZXRHcm91cElkQ29tcG9uZW50cz1mdW5jdGlvbihnKXtpZihnPT1udWxsKXJldHVybiBudWxsO3ZhciBHPWcuc3BsaXQoIi8iKTt2YXIgZD1uZXcgQXJyYXkoKTtmb3IodmFyIGk9MTtpPEcubGVuZ3RoLTE7aSsrKXtpZihHW2ldPT0iQCIpZFtpLTFdPW51bGw7ZWxzZSBkW2ktMV09ZGVjb2RlVVJJQ29tcG9uZW50KEdbaV0pfXJldHVybiBkfTtBLnByb3RvdHlwZS5fZ2V0R3JvdXBJZEFuY2VzdG9ycz1mdW5jdGlvbihnLG4pe2lmKCFuKXJldHVybltdO2lmKGc9PW51bGwpe3Euc2FwLmxvZy5mYXRhbCgiZ3JvdXAgSUQgbnVsbCBkb2VzIG5vdCBoYXZlIGFuY2VzdG9ycyIpO3JldHVybltdfWlmKGc9PSIvIilpZihNYXRoLmFicyhuKT09MSlyZXR1cm5bbnVsbF07ZWxzZXtxLnNhcC5sb2cuZmF0YWwoImludmFsaWQgbGV2ZWwgY291bnQgIituKyIgZm9yIGFuY2VzdG9ycyBvZiBncm91cElkICIrZyk7cmV0dXJuW119dmFyIEc9Zy5zcGxpdCgiLyIpO3ZhciBhPW5ldyBBcnJheSgpLHM9IiI7dmFyIGY9MCx0PUcubGVuZ3RoLTM7aWYobj4wKWlmKG4tMT50KXEuc2FwLmxvZy5mYXRhbCgiaW52YWxpZCBsZXZlbCBjb3VudCAiK24rIiBmb3IgYW5jZXN0b3JzIG9mIGdyb3VwSWQgIitnKTtlbHNlIHQ9bi0xO2Vsc2UgaWYoLShuKzEpPnQpcS5zYXAubG9nLmZhdGFsKCJpbnZhbGlkIGxldmVsIGNvdW50ICIrbisiIGZvciBhbmNlc3RvcnMgb2YgZ3JvdXBJZCAiK2cpO2Vsc2V7Zj10KzErbjtmb3IodmFyIGk9MDtpPGY7aSsrKXtzKz1HW2ldKyIvIn19Zm9yKHZhciBpPWY7aTw9dDtpKyspe3MrPUdbaV0rIi8iO2EucHVzaChzKX1yZXR1cm4gYX07QS5wcm90b3R5cGUuX2dldFBhcmVudEdyb3VwSWQ9ZnVuY3Rpb24oZyl7cmV0dXJuIHRoaXMuX2dldEdyb3VwSWRBbmNlc3RvcnMoZywtMSlbMF19O0EucHJvdG90eXBlLl9yZW1vdmVEdXBsaWNhdGVzRnJvbVN0cmluZ0FycmF5PWZ1bmN0aW9uKGEpe3ZhciB0PXt9O2Zvcih2YXIgaT0wO2k8YS5sZW5ndGg7aSsrKXRbYVtpXV09dHJ1ZTt2YXIgdT1bXTtmb3IodmFyIHMgaW4gdCl1LnB1c2gocyk7cmV0dXJuIHV9O0EucHJvdG90eXBlLl9nZXRJZEZvck5ld1JlcXVlc3RIYW5kbGU9ZnVuY3Rpb24oKXtpZih0aGlzLm9QZW5kaW5nUmVxdWVzdEhhbmRsZT09PXVuZGVmaW5lZCl0aGlzLm9QZW5kaW5nUmVxdWVzdEhhbmRsZT1bXTtmb3IodmFyIGk9MDtpPHRoaXMub1BlbmRpbmdSZXF1ZXN0SGFuZGxlLmxlbmd0aDtpKyspe2lmKHRoaXMub1BlbmRpbmdSZXF1ZXN0SGFuZGxlW2ldPT09dW5kZWZpbmVkKXJldHVybiBpfXRoaXMub1BlbmRpbmdSZXF1ZXN0SGFuZGxlW3RoaXMub1BlbmRpbmdSZXF1ZXN0SGFuZGxlLmxlbmd0aF09dW5kZWZpbmVkO3JldHVybiB0aGlzLm9QZW5kaW5nUmVxdWVzdEhhbmRsZS5sZW5ndGgtMX07QS5wcm90b3R5cGUuX3JlZ2lzdGVyTmV3UmVxdWVzdEhhbmRsZT1mdW5jdGlvbihyLFIpe2lmKHRoaXMub1BlbmRpbmdSZXF1ZXN0SGFuZGxlW3JdIT09dW5kZWZpbmVkKXEuc2FwLmxvZy5mYXRhbCgicmVxdWVzdCBoYW5kbGUgSUQgYWxyZWFkeSBpbiB1c2UiKTt0aGlzLm9QZW5kaW5nUmVxdWVzdEhhbmRsZVtyXT1SfTtBLnByb3RvdHlwZS5fZGVyZWdpc3RlckhhbmRsZU9mQ29tcGxldGVkUmVxdWVzdD1mdW5jdGlvbihyKXtpZih0aGlzLm9QZW5kaW5nUmVxdWVzdEhhbmRsZVtyXT09PXVuZGVmaW5lZClxLnNhcC5sb2cuZmF0YWwoIm5vIGhhbmRsZSBmb3VuZCBmb3IgdGhpcyByZXF1ZXN0IElEIik7dGhpcy5vUGVuZGluZ1JlcXVlc3RIYW5kbGVbcl09dW5kZWZpbmVkfTtBLnByb3RvdHlwZS5fYWJvcnRBbGxQZW5kaW5nUmVxdWVzdHNCeUhhbmRsZT1mdW5jdGlvbigpe2Zvcih2YXIgaT0wO2k8dGhpcy5vUGVuZGluZ1JlcXVlc3RIYW5kbGUubGVuZ3RoO2krKyl7dGhpcy5vUGVuZGluZ1JlcXVlc3RIYW5kbGVbaV0hPT11bmRlZmluZWQmJnRoaXMub1BlbmRpbmdSZXF1ZXN0SGFuZGxlW2ldLmFib3J0KCl9dGhpcy5vUGVuZGluZ1JlcXVlc3RIYW5kbGU9W119O0EucHJvdG90eXBlLl9nZXRSZXF1ZXN0SWQ9ZnVuY3Rpb24ocixwKXtzd2l0Y2gocil7Y2FzZSBBLl9yZXF1ZXN0VHlwZS5ncm91cE1lbWJlcnNRdWVyeTppZihwLmdyb3VwSWQ9PT11bmRlZmluZWQpcS5zYXAubG9nLmZhdGFsKCJtaXNzaW5nIGdyb3VwIElEIik7dmFyIGc9cC5ncm91cElkO3JldHVybiBBLl9yZXF1ZXN0VHlwZS5ncm91cE1lbWJlcnNRdWVyeSsoZz09bnVsbD8iIjpnKTtjYXNlIEEuX3JlcXVlc3RUeXBlLmxldmVsTWVtYmVyc1F1ZXJ5OmlmKHAubGV2ZWw9PT11bmRlZmluZWQpcS5zYXAubG9nLmZhdGFsKCJtaXNzaW5nIGxldmVsIik7aWYocC5ncm91cElkPT09dW5kZWZpbmVkKXEuc2FwLmxvZy5mYXRhbCgibWlzc2luZyBncm91cElkIik7cmV0dXJuIiIrQS5fcmVxdWVzdFR5cGUubGV2ZWxNZW1iZXJzUXVlcnkrcC5sZXZlbCsodGhpcy5iVXNlQWNjZWxlcmF0ZWRBdXRvRXhwYW5kPT10cnVlPyIiOnAuZ3JvdXBJZCk7Y2FzZSBBLl9yZXF1ZXN0VHlwZS50b3RhbFNpemVRdWVyeTpyZXR1cm4gQS5fcmVxdWVzdFR5cGUudG90YWxTaXplUXVlcnk7ZGVmYXVsdDpxLnNhcC5sb2cuZmF0YWwoImludmFsaWQgcmVxdWVzdCB0eXBlICIrcik7cmV0dXJuLTF9fTtBLnByb3RvdHlwZS5fcmVnaXN0ZXJOZXdSZXF1ZXN0PWZ1bmN0aW9uKHIpe2lmKHI9PXVuZGVmaW5lZHx8cj09IiIpe3Euc2FwLmxvZy5mYXRhbCgibWlzc2luZyByZXF1ZXN0IElEIik7cmV0dXJufWlmKCF0aGlzLm9QZW5kaW5nUmVxdWVzdHNbcl0pdGhpcy5vUGVuZGluZ1JlcXVlc3RzW3JdPTE7ZWxzZSsrdGhpcy5vUGVuZGluZ1JlcXVlc3RzW3JdfTtBLnByb3RvdHlwZS5fY29uc2lkZXJSZXF1ZXN0R3JvdXBpbmc9ZnVuY3Rpb24ocil7Zm9yKHZhciBpPS0xLFI7Uj1yWysraV07KXtpZih0aGlzLm9Hcm91cGVkUmVxdWVzdHNbUl09PT11bmRlZmluZWQpdGhpcy5vR3JvdXBlZFJlcXVlc3RzW1JdPXt9O3ZhciBnPXRoaXMub0dyb3VwZWRSZXF1ZXN0c1tSXTtmb3IodmFyIGo9MDtqPHIubGVuZ3RoO2orKylnW3Jbal1dPXRydWV9fTtBLnByb3RvdHlwZS5faXNSZXF1ZXN0UGVuZGluZz1mdW5jdGlvbihyKXtyZXR1cm4gdGhpcy5vUGVuZGluZ1JlcXVlc3RzW3JdIT11bmRlZmluZWQmJnRoaXMub1BlbmRpbmdSZXF1ZXN0c1tyXT4wfTtBLnByb3RvdHlwZS5fZGVyZWdpc3RlckNvbXBsZXRlZFJlcXVlc3Q9ZnVuY3Rpb24ocil7aWYoIXRoaXMub1BlbmRpbmdSZXF1ZXN0c1tyXSlxLnNhcC5sb2cuZmF0YWwoImFzc2VydGlvbiBmYWlsZWQ6IHRoZXJlIGlzIG5vIHBlbmRpbmcgcmVxdWVzdCBJRCAiK3IpO2lmKHRoaXMub1BlbmRpbmdSZXF1ZXN0c1tyXT09MSlkZWxldGUgdGhpcy5vUGVuZGluZ1JlcXVlc3RzW3JdO2Vsc2UtLXRoaXMub1BlbmRpbmdSZXF1ZXN0c1tyXX07QS5wcm90b3R5cGUuX2NsZWFudXBHcm91cGluZ0ZvckNvbXBsZXRlZFJlcXVlc3Q9ZnVuY3Rpb24ocil7aWYodGhpcy5faXNSZXF1ZXN0UGVuZGluZyhyKSlyZXR1cm4gZmFsc2U7dmFyIGc9dHJ1ZTtpZih0aGlzLm9Hcm91cGVkUmVxdWVzdHNbcl0hPXVuZGVmaW5lZCl7Zm9yKHZhciBPIGluIHRoaXMub0dyb3VwZWRSZXF1ZXN0c1tyXSl7aWYodGhpcy5vUGVuZGluZ1JlcXVlc3RzW09dKXtnPWZhbHNlO2JyZWFrfX19aWYoZyl7dmFyIFI9dGhpcy5vR3JvdXBlZFJlcXVlc3RzW3JdO2RlbGV0ZSB0aGlzLm9Hcm91cGVkUmVxdWVzdHNbcl07Zm9yKHZhciBPIGluIFIpe2lmKE8hPXIpdGhpcy5fY2xlYW51cEdyb3VwaW5nRm9yQ29tcGxldGVkUmVxdWVzdChPKX19cmV0dXJuIGd9O0EucHJvdG90eXBlLl9jbGVhckFsbFBlbmRpbmdSZXF1ZXN0cz1mdW5jdGlvbigpe3RoaXMub1BlbmRpbmdSZXF1ZXN0cz17fTt0aGlzLm9Hcm91cGVkUmVxdWVzdHM9e319O0EucHJvdG90eXBlLnJlc2V0RGF0YT1mdW5jdGlvbihjKXtpZihjKXt2YXIgcD1jLmdldFBhdGgoKTtkZWxldGUgdGhpcy5tS2V5W3BdO2RlbGV0ZSB0aGlzLm1Pd25LZXlbcF07ZGVsZXRlIHRoaXMubUxlbmd0aFtwXTtkZWxldGUgdGhpcy5tRmluYWxMZW5ndGhbcF19ZWxzZXt0aGlzLm1LZXk9e307dGhpcy5tT3duS2V5PXt9O3RoaXMubUxlbmd0aD17fTt0aGlzLm1GaW5hbExlbmd0aD17fX19O0EucHJvdG90eXBlLnJlZnJlc2g9ZnVuY3Rpb24oZixjLGUpe3ZhciBiPWZhbHNlO2lmKCFmKXtpZihlKXt2YXIgcj10aGlzLm9Nb2RlbC5yZXNvbHZlKHRoaXMuc1BhdGgsdGhpcy5vQ29udGV4dCk7dmFyIEU9dGhpcy5vTW9kZWwub01ldGFkYXRhLl9nZXRFbnRpdHlUeXBlQnlQYXRoKHIpO2lmKEUmJihFLmVudGl0eVR5cGUgaW4gZSkpYj10cnVlfWlmKGMmJiFiKXtxLmVhY2godGhpcy5tS2V5LGZ1bmN0aW9uKGksbil7cS5lYWNoKG4sZnVuY3Rpb24oaSxrKXtpZihrIGluIGMpe2I9dHJ1ZTtyZXR1cm4gZmFsc2V9fSk7aWYoYilyZXR1cm4gZmFsc2V9KX1pZighYyYmIWUpe2I9dHJ1ZX19aWYoZnx8Yil7dGhpcy5fYWJvcnRBbGxQZW5kaW5nUmVxdWVzdHMoKTt0aGlzLnJlc2V0RGF0YSgpO3RoaXMuYk5lZWRzVXBkYXRlPWZhbHNlO3RoaXMuX2ZpcmVSZWZyZXNoKHtyZWFzb246c2FwLnVpLm1vZGVsLkNoYW5nZVJlYXNvbi5SZWZyZXNofSl9fTtBLnByb3RvdHlwZS5jaGVja1VwZGF0ZT1mdW5jdGlvbihmLGMpe3ZhciBiPWZhbHNlO2lmKCFmKXtpZih0aGlzLmJOZWVkc1VwZGF0ZXx8IWMpe2I9dHJ1ZX1lbHNle3EuZWFjaCh0aGlzLm1LZXksZnVuY3Rpb24oaSxuKXtxLmVhY2gobixmdW5jdGlvbihpLGspe2lmKGsgaW4gYyl7Yj10cnVlO3JldHVybiBmYWxzZX19KTtpZihiKXJldHVybiBmYWxzZX0pfX1pZihmfHxiKXt0aGlzLmJOZWVkc1VwZGF0ZT1mYWxzZTt0aGlzLl9maXJlQ2hhbmdlKCl9fTtBLnByb3RvdHlwZS5nZXREb3dubG9hZFVybD1mdW5jdGlvbihmKXt2YXIgYT1uZXcgby5RdWVyeVJlc3VsdFJlcXVlc3QodGhpcy5vQW5hbHl0aWNhbFF1ZXJ5UmVzdWx0KTthLnNldFJlc291cmNlUGF0aCh0aGlzLl9nZXRSZXNvdXJjZVBhdGgoKSk7dmFyIHM9W107dmFyIGI9W107Zm9yKHZhciBkIGluIHRoaXMub0RpbWVuc2lvbkRldGFpbHNTZXQpcy5wdXNoKGQpO2Euc2V0QWdncmVnYXRpb25MZXZlbChzKTtmb3IodmFyIGQgaW4gdGhpcy5vRGltZW5zaW9uRGV0YWlsc1NldCl7dmFyIEQ9dGhpcy5vRGltZW5zaW9uRGV0YWlsc1NldFtkXTt2YXIgST0oRC5rZXlQcm9wZXJ0eU5hbWUhPXVuZGVmaW5lZCk7dmFyIGM9KEQudGV4dFByb3BlcnR5TmFtZSE9dW5kZWZpbmVkKTthLmluY2x1ZGVEaW1lbnNpb25LZXlUZXh0QXR0cmlidXRlcyhELm5hbWUsdHJ1ZSxjLEQuYUF0dHJpYnV0ZU5hbWUpfWZvcih2YXIgbSBpbiB0aGlzLm9NZWFzdXJlRGV0YWlsc1NldCliLnB1c2gobSk7YS5zZXRNZWFzdXJlcyhiKTtmb3IodmFyIG0gaW4gdGhpcy5vTWVhc3VyZURldGFpbHNTZXQpe3ZhciBNPXRoaXMub01lYXN1cmVEZXRhaWxzU2V0W21dO3ZhciBlPShNLnJhd1ZhbHVlUHJvcGVydHlOYW1lIT11bmRlZmluZWQpO3ZhciBnPShNLmZvcm1hdHRlZFZhbHVlUHJvcGVydHlOYW1lIT11bmRlZmluZWQpO3ZhciBoPShNLnVuaXRQcm9wZXJ0eU5hbWUhPXVuZGVmaW5lZCk7YS5pbmNsdWRlTWVhc3VyZVJhd0Zvcm1hdHRlZFZhbHVlVW5pdChNLm5hbWUsZSxnLGgpfXZhciBqPWEuZ2V0U29ydEV4cHJlc3Npb24oKTtqLmNsZWFyKCk7Zm9yKHZhciBpPTA7aTx0aGlzLmFTb3J0ZXIubGVuZ3RoO2krKyl7aWYodGhpcy5hU29ydGVyW2ldKXtqLmFkZFNvcnRlcih0aGlzLmFTb3J0ZXJbaV0uc1BhdGgsdGhpcy5hU29ydGVyW2ldLmJEZXNjZW5kaW5nP28uU29ydE9yZGVyLkRlc2NlbmRpbmc6by5Tb3J0T3JkZXIuQXNjZW5kaW5nKX19dmFyIGs9YS5nZXRGaWx0ZXJFeHByZXNzaW9uKCk7ay5jbGVhcigpO2lmKHRoaXMuYUFwcGxpY2F0aW9uRmlsdGVyKXtrLmFkZFVJNUZpbHRlckNvbmRpdGlvbnModGhpcy5hQXBwbGljYXRpb25GaWx0ZXIpfWlmKHRoaXMuYUNvbnRyb2xGaWx0ZXIpe2suYWRkVUk1RmlsdGVyQ29uZGl0aW9ucyh0aGlzLmFDb250cm9sRmlsdGVyKX12YXIgcD1hLmdldFVSSVRvUXVlcnlSZXN1bHRFbnRpdHlTZXQoKTt2YXIgUD10aGlzLl9nZXRRdWVyeU9EYXRhUmVxdWVzdE9wdGlvbnMoYSk7Zm9yKHZhciBpPTAsbD1QLmxlbmd0aDtpPGw7aSsrKXtpZigvXlwkc2VsZWN0L2kudGVzdChQW2ldKSl7UC5zcGxpY2UoaSwxKTticmVha319dmFyIHY9W107Zm9yKHZhciBpPTAsbD10aGlzLmFBbmFseXRpY2FsSW5mby5sZW5ndGg7aTxsO2krKyl7dmFyIG49dGhpcy5hQW5hbHl0aWNhbEluZm9baV07aWYobi52aXNpYmxlKXt2LnB1c2gobi5uYW1lKX19aWYodi5sZW5ndGg+MCl7UC5wdXNoKCIkc2VsZWN0PSIrdi5qb2luKCIsIikpfWlmKGYpe1Auc3BsaWNlKDAsMCwiJGZvcm1hdD0iK2VuY29kZVVSSUNvbXBvbmVudChmKSl9aWYocCl7cmV0dXJuIHRoaXMub01vZGVsLl9jcmVhdGVSZXF1ZXN0VXJsKHAsbnVsbCxQKX19O3JldHVybiBBfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLm1vZGVsLmFuYWx5dGljcy5UcmVlQmluZGluZ0FkYXB0ZXInKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkubW9kZWwuYW5hbHl0aWNzLlRyZWVCaW5kaW5nQWRhcHRlcicpO3NhcC51aS5kZWZpbmUoInNhcC91aS9tb2RlbC9hbmFseXRpY3MvVHJlZUJpbmRpbmdBZGFwdGVyIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL21vZGVsL1RyZWVCaW5kaW5nJywnLi9BbmFseXRpY2FsQmluZGluZyddLGZ1bmN0aW9uKHEsVCxBKXsidXNlIHN0cmljdCI7dmFyIGE9ZnVuY3Rpb24oKXtpZighKHRoaXMgaW5zdGFuY2VvZiBUJiZ0aGlzLmdldENvbnRleHRzPT09dW5kZWZpbmVkKSl7cmV0dXJufWZvcih2YXIgZiBpbiBhLnByb3RvdHlwZSl7aWYoYS5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkoZikpe3RoaXNbZl09YS5wcm90b3R5cGVbZl19fXRoaXMuX2FDb250ZXh0cz1bXTt0aGlzLl9hQ29udGV4dEluZm9zPVtdO3RoaXMuX2JJbml0aWFsPXRydWU7dGhpcy5fb0V4cGFuZGVkPXt9O3RoaXMuX29PcGVuR3JvdXBzPXt9O3RoaXMuX2JUcmlnZ2VyZWRPcGVuR3JvdXBzTG9hZD1mYWxzZX07YS5wcm90b3R5cGUuX3VwZGF0ZUNvbnRleHRzPWZ1bmN0aW9uKHAsYyxDLHIpe3ZhciBJPXA7Zm9yKHZhciBpPTA7aTxjLmxlbmd0aDtpKyspe3ZhciBvPWNbaV07dmFyIGI9Q1tpXTt0aGlzLl9hQ29udGV4dHMuc3BsaWNlKHAscj8xOjAsbyk7dGhpcy5fYUNvbnRleHRJbmZvcy5zcGxpY2UocCxyPzE6MCxiKTtwKyt9aWYoIXIpe3RoaXMuX2ZpcmVDb250ZXh0Q2hhbmdlKHt0eXBlOiJpbnNlcnQiLGluZGV4OkksbGVuZ3RoOmMubGVuZ3RofSl9cmV0dXJuIEN9O2EucHJvdG90eXBlLmdldExlbmd0aD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9hQ29udGV4dHMubGVuZ3RofTthLnByb3RvdHlwZS5nZXRDb250ZXh0SW5mbz1mdW5jdGlvbihpKXtyZXR1cm4gdGhpcy5fYUNvbnRleHRJbmZvcy5zbGljZShpLGkrMSlbMF19O2EucHJvdG90eXBlLl9jcmVhdGVDb250ZXh0SW5mb3M9ZnVuY3Rpb24oYyxwLFAsbCxMLHQscyxJLGIpe2lmKCFJKXtJPTB9dmFyIEM9W107Zm9yKHZhciBpPTA7aTxjLmxlbmd0aDtpKyspe3ZhciBvPWNbaV07Qy5wdXNoKHtjb250ZXh0Om8sbGV2ZWw6bCxleHBhbmRlZDpmYWxzZSxjaGlsZENvdW50OjAscGFyZW50OnAsc3VtOnMscG9zaXRpb246UCxpbmRleDppK0ksYXV0b0V4cGFuZDpiLGV4cGFuZExlbmd0aDpMLGV4cGFuZFRocmVzaG9sZDp0fSk7UCsrfXJldHVybiBDfTthLnByb3RvdHlwZS5nZXRDb250ZXh0cz1mdW5jdGlvbihzLGwsdCl7dmFyIGI9dGhpcztpZighbCl7bD10aGlzLm9Nb2RlbC5pU2l6ZUxpbWl0fWlmKHRoaXMuX2JJbml0aWFsKXt2YXIgbj10aGlzLm1QYXJhbWV0ZXJzJiZ0aGlzLm1QYXJhbWV0ZXJzLm51bWJlck9mRXhwYW5kZWRMZXZlbHM7dmFyIHI9dGhpcy5nZXRSb290Q29udGV4dHMoe3N0YXJ0SW5kZXg6cyxsZW5ndGg6bCx0aHJlc2hvbGQ6dCxudW1iZXJPZkV4cGFuZGVkTGV2ZWxzOm59KTtpZihyJiZyLmxlbmd0aD4wKXt0aGlzLl9iSW5pdGlhbD1mYWxzZTt2YXIgTj10aGlzLl9jcmVhdGVDb250ZXh0SW5mb3MocixudWxsLDAsMCxsLHQsdHJ1ZSwwLHBhcnNlSW50KG4sMTApKzEpO2lmKHRoaXMuYlByb3ZpZGVHcmFuZFRvdGFscyYmdGhpcy5faGFzVG90YWxlZE1lYXN1cmVzKCkpe3RoaXMuX3VwZGF0ZUNvbnRleHRzKDAscixOKX1lbHNle3RoaXMuX2V4cGFuZE5vZGVzRm9yQ29udGV4dHMoTiwwLGwsdCl9fX1pZih0aGlzLl9vT3Blbkdyb3VwcyE9e30mJnRoaXMuX2JUcmlnZ2VyZWRPcGVuR3JvdXBzTG9hZD09ZmFsc2Upe3RoaXMubG9hZEdyb3Vwcyh0aGlzLl9vT3Blbkdyb3Vwcyk7dGhpcy5fYlRyaWdnZXJlZE9wZW5Hcm91cHNMb2FkPXRydWV9dGhpcy5fZXhwYW5kTm9kZXNGb3JDb250ZXh0cyh0aGlzLl9hQ29udGV4dEluZm9zLnNsaWNlKHMscytsKSxzLGwsdCk7dmFyIGM9dGhpcy5fYUNvbnRleHRzLnNsaWNlKHMscytsKTt2YXIgQz10aGlzLl9hQ29udGV4dEluZm9zLnNsaWNlKHMscytsKTt2YXIgbT17fTtxLmVhY2goYyxmdW5jdGlvbihpLG8pe2lmKCFvKXt2YXIgZD1iLl9hQ29udGV4dEluZm9zW3MraV07dmFyIHA9ZC5wYXJlbnQ7dmFyIFM9bVtwLmdldFBhdGgoKV07aWYoUyl7Uy5zdGFydEluZGV4PU1hdGgubWluKFMuc3RhcnRJbmRleCxkLmluZGV4KTtTLnBvc2l0aW9uPU1hdGgubWluKFMucG9zaXRpb24sZC5wb3NpdGlvbik7Uy5lbmRJbmRleD1NYXRoLm1heChTLmVuZEluZGV4LGQuaW5kZXgpfWVsc2V7bVtwLmdldFBhdGgoKV09e3N0YXJ0SW5kZXg6ZC5pbmRleCxlbmRJbmRleDpkLmluZGV4LHBhcmVudDpkLnBhcmVudCxsZXZlbDpkLmxldmVsLTEscG9zaXRpb246ZC5wb3NpdGlvbn19fX0pO3ZhciBiPXRoaXMsdT1mYWxzZTtxLmVhY2gobSxmdW5jdGlvbihpLFMpe3ZhciBkPVMuZW5kSW5kZXgtUy5zdGFydEluZGV4KzE7dmFyIGU9TWF0aC5tYXgoYi5tUGFyYW1ldGVycy5udW1iZXJPZkV4cGFuZGVkTGV2ZWxzLVMubGV2ZWwsMCk7dmFyIE09Yi5nZXROb2RlQ29udGV4dHMoUy5wYXJlbnQse3N0YXJ0SW5kZXg6Uy5zdGFydEluZGV4LGxlbmd0aDpkLHRocmVzaG9sZDp0LGxldmVsOlMubGV2ZWwsbnVtYmVyT2ZFeHBhbmRlZExldmVsczplfSk7aWYoTS5sZW5ndGg+MCl7Yi5fdXBkYXRlQ29udGV4dHMoUy5wb3NpdGlvbixNLGIuX2NyZWF0ZUNvbnRleHRJbmZvcyhNLFMucGFyZW50LFMucG9zaXRpb24sUy5sZXZlbCsxLGQsdCxmYWxzZSwwLGUpLHRydWUpO2IuX3VwZGF0ZUV4cGFuZGVkSW5mbyhTLnBhcmVudCxTLmxldmVsLFMuc3RhcnRJbmRleCxTLmVuZEluZGV4LVMuc3RhcnRJbmRleCsxLHQpO3U9dHJ1ZX19KTtpZih1KXt0aGlzLl9leHBhbmROb2Rlc0ZvckNvbnRleHRzKHRoaXMuX2FDb250ZXh0SW5mb3Muc2xpY2UocyxzK2wpLHMsbCx0KTtjPXRoaXMuX2FDb250ZXh0cy5zbGljZShzLHMrbCl9cmV0dXJuIGN9O2EucHJvdG90eXBlLl9leHBhbmROb2Rlc0ZvckNvbnRleHRzPWZ1bmN0aW9uKGMscyxsLHQpe3ZhciBlPXEuZ3JlcChjLGZ1bmN0aW9uKEMpe3JldHVybiBDLmF1dG9FeHBhbmQ+MH0pO2Zvcih2YXIgaT0wO2k8ZS5sZW5ndGg7aSsrKXt0aGlzLl9leHBhbmROb2RlKGVbaV0scyxsLHQpfX07YS5wcm90b3R5cGUuX2V4cGFuZE5vZGU9ZnVuY3Rpb24oYyxzLGwsdCl7dmFyIEM9Yy5jb250ZXh0LG49Yy5leHBhbmRMZW5ndGgsTj1jLmV4cGFuZFRocmVzaG9sZCxoPXRoaXMuaGFzTWVhc3VyZXMoKTtpZighKGMucG9zaXRpb24+PXMmJmMucG9zaXRpb248PXMrbCl8fGMuZXhwYW5kZWQ9PT10cnVlKXtyZXR1cm59dmFyIGI9dGhpcy5nZXROb2RlQ29udGV4dHMoQyx7c3RhcnRJbmRleDowLGxlbmd0aDpuLHRocmVzaG9sZDpOLGxldmVsOmMubGV2ZWwsbnVtYmVyT2ZFeHBhbmRlZExldmVsczpjLmF1dG9FeHBhbmQ/Yy5hdXRvRXhwYW5kLTE6MH0pO2lmKGImJmIubGVuZ3RoPjApe3ZhciByPXRoaXMuZ2V0R3JvdXBTaXplKEMsYy5sZXZlbCksaT1jLnBhcmVudD9jLnBvc2l0aW9uKzE6MCxwPWksTD1jLmxldmVsKzEsST1MLGQ9dGhpcy5fY3JlYXRlQ29udGV4dEluZm9zKGIsQyxwLEwsbixOLGZhbHNlLDAsYy5hdXRvRXhwYW5kP2MuYXV0b0V4cGFuZC0xOjApO3ArPWQubGVuZ3RoO3ZhciBlPWQubGVuZ3RoO2lmKHI+LTEpe2Zvcih2YXIgaj1iLmxlbmd0aDtqPHI7aisrKXtiLnB1c2godW5kZWZpbmVkKTtkLnB1c2godGhpcy5fY3JlYXRlQ29udGV4dEluZm9zKFt1bmRlZmluZWRdLEMscCxMLGwsdCxmYWxzZSxlLGMuYXV0b0V4cGFuZD9jLmF1dG9FeHBhbmQtMTowKVswXSk7cCsrO2UrK319aWYoQyYmYy5wYXJlbnQhPW51bGwmJnI+MSYmIXRoaXMubVBhcmFtZXRlcnMuc3VtT25Ub3AmJmgpe2IucHVzaChDKTtkLnB1c2godGhpcy5fY3JlYXRlQ29udGV4dEluZm9zKFtDXSxDLHAsTC0xLGwsdCx0cnVlLGUsMClbMF0pfXZhciBmPWIubGVuZ3RoO3RoaXMuX3VwZGF0ZUNvbnRleHRzKGksYixkKTt2YXIgZz1pK2Y7dmFyIFA7TC0tO3ZhciBrPWk7d2hpbGUoUD10aGlzLl9hQ29udGV4dEluZm9zW2tdKXtpZihQLmxldmVsPT1MKXtQLmNoaWxkQ291bnQ9UC5jaGlsZENvdW50K2Y7TC0tfWstLTtpZihMPDApYnJlYWt9dmFyIG89dGhpcy5fYUNvbnRleHRJbmZvc1tnXTtpZihvKXt2YXIgbT10aGlzLl9hQ29udGV4dEluZm9zW2ctMV0ucG9zaXRpb24tby5wb3NpdGlvbisxO2Zvcih2YXIgaj1nO2o8dGhpcy5fYUNvbnRleHRJbmZvcy5sZW5ndGg7aisrKXt0aGlzLl9hQ29udGV4dEluZm9zW2pdLnBvc2l0aW9uKz1tfX1pZihjKXtjLmV4cGFuZGVkPXRydWV9dGhpcy5fdXBkYXRlRXhwYW5kZWRJbmZvKGMuY29udGV4dCxjLmxldmVsLDAsbCx0KTt2YXIgdT1mYWxzZTtmb3IodmFyIGo9MDtqPGIubGVuZ3RoO2orKyl7aWYoSTw9dGhpcy5hQWdncmVnYXRpb25MZXZlbC5sZW5ndGgmJnRoaXMuX29PcGVuR3JvdXBzW3RoaXMuX2dldEdyb3VwSWRGcm9tQ29udGV4dChiW2pdLEkpXSl7dGhpcy5fZXhwYW5kTm9kZShkW2pdLHMsbCx0KTtkZWxldGUgdGhpcy5fb09wZW5Hcm91cHNbdGhpcy5fZ2V0R3JvdXBJZEZyb21Db250ZXh0KGJbal0sSSldO3U9dHJ1ZX1pZihkW2pdLmF1dG9FeHBhbmQ+MCYmdGhpcy5oYXNBdmFpbGFibGVOb2RlQ29udGV4dHMoYltqXSxJKT4wJiYhdSl7dGhpcy5fZXhwYW5kTm9kZShkW2pdLHMsbCx0KX19Yy5hdXRvRXhwYW5kPTB9fTthLnByb3RvdHlwZS5fdXBkYXRlRXhwYW5kZWRJbmZvPWZ1bmN0aW9uKGMsbCxzLEwsdCl7dmFyIGI9dGhpcy5fZ2V0R3JvdXBJZEZyb21Db250ZXh0KGMsbCk7dmFyIHA9Yi5zdWJzdHIoMCxiLmxlbmd0aC0xKS5zcGxpdCgiLyIpO3ZhciBlPXRoaXMuX29FeHBhbmRlZDtmb3IodmFyIGo9MDtqPHAubGVuZ3RoO2orKyl7dmFyIFA9cFtqXTtpZihqPT0wKXtQPSJyb290In1lW1BdPWVbUF18fHt9O2U9ZVtQXTtpZihqPT1wLmxlbmd0aC0xKXtlWyJzZWN0aW9ucyJdPWVbInNlY3Rpb25zIl18fFtdO2lmKGVbInNlY3Rpb25zIl0ubGVuZ3RoPT0wKXtlWyJzZWN0aW9ucyJdLnB1c2goe3N0YXJ0SW5kZXg6cyxsZW5ndGg6TCx0aHJlc2hvbGQ6dH0pfXZhciBFPWZhbHNlO2Zvcih2YXIgaz0wO2s8ZVsic2VjdGlvbnMiXS5sZW5ndGg7aysrKXt2YXIgUz1lWyJzZWN0aW9ucyJdW2tdO3ZhciBpPVMuc3RhcnRJbmRleCtTLmxlbmd0aCtTLnRocmVzaG9sZDt2YXIgZD1zK0wrdDtpZihTLnN0YXJ0SW5kZXg8PXMmJmk+PWQpe3JldHVybn1lbHNlIGlmKFMuc3RhcnRJbmRleDw9cyYmaT49cyl7Uy50aHJlc2hvbGQ9TWF0aC5tYXgoUy50aHJlc2hvbGQsdCk7Uy5sZW5ndGg9ZC1TLnN0YXJ0SW5kZXgtUy50aHJlc2hvbGQ7RT10cnVlfWVsc2UgaWYoUy5zdGFydEluZGV4PnMmJmk+ZCl7Uy5sZW5ndGg9Uy5sZW5ndGgrKFMuc3RhcnRJbmRleC1zKTtTLnN0YXJ0SW5kZXg9cztTLnRocmVzaG9sZD1NYXRoLm1heChTLnRocmVzaG9sZCx0KTtFPXRydWV9ZWxzZSBpZihTLnN0YXJ0SW5kZXg+cyYmUy5lbmRJbmRleDxkKXtTLnN0YXJ0SW5kZXg9cztTLmxlbmd0aD1MO1MudGhyZXNob2xkPXQ7RT10cnVlfX1pZighRSl7ZVsic2VjdGlvbnMiXS5wdXNoKHtzdGFydEluZGV4OnMsbGVuZ3RoOkwsdGhyZXNob2xkOnR9KX19ZWxzZXtlWyJjaGlsZHJlbiJdPWVbImNoaWxkcmVuIl18fHt9O2VbImNoaWxkUHJvcGVydHkiXT10aGlzLmFBZ2dyZWdhdGlvbkxldmVsW2pdO2U9ZVsiY2hpbGRyZW4iXX19fTthLnByb3RvdHlwZS5leHBhbmQ9ZnVuY3Rpb24oaSl7dmFyIGM9dGhpcy5fYUNvbnRleHRJbmZvc1tpXTtpZihjLmV4cGFuZGVkKXtyZXR1cm59Yy5hdXRvRXhwYW5kPWMuYXV0b0V4cGFuZHx8MX07YS5wcm90b3R5cGUuY29sbGFwc2U9ZnVuY3Rpb24oSSl7dmFyIGM9dGhpcy5fYUNvbnRleHRJbmZvc1tJXTt2YXIgQz10aGlzLl9hQ29udGV4dHNbSV07aWYoIWMuZXhwYW5kZWQpe3JldHVybn12YXIgcD1jLnBvc2l0aW9uKzEsbD1jLmNoaWxkQ291bnQsTD1jLmxldmVsO3ZhciBlPXRoaXMuX29FeHBhbmRlZFsicm9vdCJdO3ZhciBzPXRoaXMuX2dldEdyb3VwSWRGcm9tQ29udGV4dChDLEwpO3ZhciBQPXMuc3Vic3RyKDAscy5sZW5ndGgtMSkuc3BsaXQoIi8iKTtmb3IodmFyIGk9MTtpPEw7aSsrKXtlPWVbImNoaWxkcmVuIl1bUFtpXV19ZGVsZXRlIGVbImNoaWxkcmVuIl1bUFtQLmxlbmd0aC0xXV07dmFyIHI9cDt0aGlzLl9hQ29udGV4dHMuc3BsaWNlKHAsbCk7dGhpcy5fYUNvbnRleHRJbmZvcy5zcGxpY2UocCxsKTtwLS07dmFyIG87d2hpbGUobz10aGlzLl9hQ29udGV4dEluZm9zW3BdKXtpZihvLmxldmVsPT1MKXtvLmNoaWxkQ291bnQ9by5jaGlsZENvdW50LWw7TC0tfXAtLTtpZihMPDApYnJlYWt9aWYocjx0aGlzLl9hQ29udGV4dEluZm9zLmxlbmd0aCl7dmFyIGQ9dGhpcy5fYUNvbnRleHRJbmZvc1tyLTFdLnBvc2l0aW9uLXRoaXMuX2FDb250ZXh0SW5mb3Nbcl0ucG9zaXRpb24rMTtmb3IodmFyIGo9cjtqPHRoaXMuX2FDb250ZXh0SW5mb3MubGVuZ3RoO2orKyl7dGhpcy5fYUNvbnRleHRJbmZvc1tqXS5wb3NpdGlvbis9ZH10aGlzLl9maXJlQ29udGV4dENoYW5nZSh7dHlwZToicmVtb3ZlIixpbmRleDpyLGxlbmd0aDpNYXRoLmFicyhkKX0pfWMuZXhwYW5kZWQ9ZmFsc2V9O2EucHJvdG90eXBlLmNvbGxhcHNlQWxsPWZ1bmN0aW9uKGwpe2lmKCFsfHxsPDEpe2w9MX1mb3IodmFyIGk9MCxqPXRoaXMuX2FDb250ZXh0SW5mb3MubGVuZ3RoO2k8ajtpKyspe2lmKHRoaXMuX2FDb250ZXh0SW5mb3NbaV0ubGV2ZWw9PWwpe3RoaXMuY29sbGFwc2UoaSk7aj10aGlzLl9hQ29udGV4dEluZm9zLmxlbmd0aH19fTthLnByb3RvdHlwZS50b2dnbGVJbmRleD1mdW5jdGlvbihpKXtpZighdGhpcy5fYUNvbnRleHRJbmZvc1tpXS5leHBhbmRlZCl7dGhpcy5leHBhbmQoaSl9ZWxzZXt0aGlzLmNvbGxhcHNlKGkpfX07YS5wcm90b3R5cGUuaW5kZXhIYXNDaGlsZHJlbj1mdW5jdGlvbihpKXt2YXIgYz10aGlzLl9hQ29udGV4dEluZm9zW2ldO2lmKCFjLnBhcmVudHx8Yy5zdW0pe3JldHVybiBmYWxzZX1lbHNle3JldHVybiBBLnByb3RvdHlwZS5oYXNDaGlsZHJlbi5jYWxsKHRoaXMsYy5jb250ZXh0LHtsZXZlbDpjLmxldmVsfSl9fTthLnByb3RvdHlwZS5yZXNldERhdGE9ZnVuY3Rpb24oYyl7dmFyIHI9QS5wcm90b3R5cGUucmVzZXREYXRhLmNhbGwodGhpcyxjKTt0aGlzLl9hQ29udGV4dHM9W107dGhpcy5fYUNvbnRleHRJbmZvcz1bXTt0aGlzLl9vT3Blbkdyb3Vwcz17fTt0aGlzLl9yZW1vdmVHcm91cHModGhpcy5fb0V4cGFuZGVkWyJyb290Il0sMCwnJyk7dGhpcy5fb0V4cGFuZGVkPXt9O3RoaXMuX2JJbml0aWFsPXRydWU7dGhpcy5fYlRyaWdnZXJlZE9wZW5Hcm91cHNMb2FkPWZhbHNlO3JldHVybiByfTthLnByb3RvdHlwZS51cGRhdGVBbmFseXRpY2FsSW5mbz1mdW5jdGlvbihjKXt2YXIgcj1BLnByb3RvdHlwZS51cGRhdGVBbmFseXRpY2FsSW5mby5jYWxsKHRoaXMsYyk7dGhpcy5fYUNvbnRleHRzPVtdO3RoaXMuX2FDb250ZXh0SW5mb3M9W107dGhpcy5fb09wZW5Hcm91cHM9e307dGhpcy5fcmVtb3ZlR3JvdXBzKHRoaXMuX29FeHBhbmRlZFsicm9vdCJdLDAsJycpO3RoaXMuX29FeHBhbmRlZD17fTt0aGlzLl9iSW5pdGlhbD10cnVlO3RoaXMuX2JUcmlnZ2VyZWRPcGVuR3JvdXBzTG9hZD1mYWxzZTtyZXR1cm4gcn07YS5wcm90b3R5cGUuX3JlbW92ZUdyb3Vwcz1mdW5jdGlvbihnLGwscCl7aWYoIWcpe3JldHVybn10aGlzLl9vT3Blbkdyb3Vwc1twKycvJ109Zy5zZWN0aW9ucztpZighZy5jaGlsZFByb3BlcnR5KXtyZXR1cm59aWYoZy5jaGlsZFByb3BlcnR5IT10aGlzLmFBZ2dyZWdhdGlvbkxldmVsW2xdKXtkZWxldGUgZy5jaGlsZHJlbjtkZWxldGUgZy5jaGlsZFByb3BlcnR5fWVsc2V7Zm9yKHZhciBjIGluIGcuY2hpbGRyZW4pe3RoaXMuX3JlbW92ZUdyb3VwcyhnLmNoaWxkcmVuW2NdLGwrMSxwKycvJytjKX19fTthLnByb3RvdHlwZS5faGFzVG90YWxlZE1lYXN1cmVzPWZ1bmN0aW9uKCl7dmFyIGg9ZmFsc2U7cS5lYWNoKHRoaXMuZ2V0TWVhc3VyZURldGFpbHMoKSxmdW5jdGlvbihpLG0pe2lmKG0uYW5hbHl0aWNhbEluZm8udG90YWwpe2g9dHJ1ZTtyZXR1cm4gZmFsc2V9fSk7cmV0dXJuIGh9O2EucHJvdG90eXBlLmF0dGFjaENvbnRleHRDaGFuZ2U9ZnVuY3Rpb24oZixsKXt0aGlzLmF0dGFjaEV2ZW50KCJjb250ZXh0Q2hhbmdlIixmLGwpfTthLnByb3RvdHlwZS5kZXRhY2hDb250ZXh0Q2hhbmdlPWZ1bmN0aW9uKGYsbCl7dGhpcy5kZXRhY2hFdmVudCgiY29udGV4dENoYW5nZSIsZixsKX07YS5wcm90b3R5cGUuX2ZpcmVDb250ZXh0Q2hhbmdlPWZ1bmN0aW9uKG0pe3RoaXMuZmlyZUV2ZW50KCJjb250ZXh0Q2hhbmdlIixtKX07cmV0dXJuIGF9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkubW9kZWwub2RhdGEuRmlsdGVyJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLm1vZGVsLm9kYXRhLkZpbHRlcicpO3NhcC51aS5kZWZpbmUoInNhcC91aS9tb2RlbC9vZGF0YS9GaWx0ZXIiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvbW9kZWwvRmlsdGVyJywnc2FwL3VpL21vZGVsL0ZpbHRlck9wZXJhdG9yJ10sZnVuY3Rpb24ocSxGLGEpeyJ1c2Ugc3RyaWN0Ijt2YXIgTz1zYXAudWkuYmFzZS5PYmplY3QuZXh0ZW5kKCJzYXAudWkubW9kZWwub2RhdGEuRmlsdGVyIix7Y29uc3RydWN0b3I6ZnVuY3Rpb24ocCx2LEEpe2lmKHR5cGVvZiBwPT09Im9iamVjdCIpe3ZhciBmPXA7cD1mLnBhdGg7dj1mLnZhbHVlcztBPWYuYW5kfXRoaXMuc1BhdGg9cDt0aGlzLmFWYWx1ZXM9djt0aGlzLmJBTkQ9QT09dW5kZWZpbmVkP3RydWU6QX0sY29udmVydDpmdW5jdGlvbigpe3ZhciBmPVtdO2Zvcih2YXIgaT0wLGw9dGhpcy5hVmFsdWVzJiZ0aGlzLmFWYWx1ZXMubGVuZ3RofHwwO2k8bDtpKyspe2YucHVzaChuZXcgRih7cGF0aDp0aGlzLnNQYXRoLG9wZXJhdG9yOnRoaXMuYVZhbHVlc1tpXS5vcGVyYXRvcix2YWx1ZTE6dGhpcy5hVmFsdWVzW2ldLnZhbHVlMSx2YWx1ZTI6dGhpcy5hVmFsdWVzW2ldLnZhbHVlMn0pKX1pZihmLmxlbmd0aD4xKXt2YXIgbz1uZXcgRih7ZmlsdGVyczpmLGFuZDp0aGlzLmJBTkR9KTtyZXR1cm4gb31lbHNle3JldHVybiBmWzBdfX19KTtyZXR1cm4gT30sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5tb2RlbC5vZGF0YS5PRGF0YUFubm90YXRpb25zJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLm1vZGVsLm9kYXRhLk9EYXRhQW5ub3RhdGlvbnMnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvbW9kZWwvb2RhdGEvT0RhdGFBbm5vdGF0aW9ucyIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ3NhcC91aS9iYXNlL0V2ZW50UHJvdmlkZXInXSxmdW5jdGlvbihxLEUpeyJ1c2Ugc3RyaWN0Ijt2YXIgTz1zYXAudWkuYmFzZS5FdmVudFByb3ZpZGVyLmV4dGVuZCgic2FwLnVpLm1vZGVsLm9kYXRhLk9EYXRhQW5ub3RhdGlvbnMiLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbihhLG0scCl7InVzZSBzdHJpY3QiO0UuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMub01ldGFkYXRhPW07dGhpcy5vQW5ub3RhdGlvbnM9bnVsbDt0aGlzLmJMb2FkZWQ9ZmFsc2U7dGhpcy5iQXN5bmM9cCYmcC5hc3luYzt0aGlzLnhQYXRoPW51bGw7dGhpcy5hQW5ub3RhdGlvblVSST1hO3RoaXMuZXJyb3I9bnVsbDt0aGlzLmJWYWxpZFhNTD10cnVlO3RoaXMub1JlcXVlc3RIYW5kbGVzPVtdO3RoaXMub0xvYWRFdmVudD1udWxsO3RoaXMub0ZhaWxlZEV2ZW50PW51bGw7dGhpcy54bWxDb21wYXRWZXJzaW9uPWZhbHNlO2lmKGEpe3RoaXMubG9hZFhNTCgpO2lmKCF0aGlzLmJBc3luYyl7aWYodGhpcy5lcnJvcil7cS5zYXAubG9nLmVycm9yKCJPRGF0YSBhbm5vdGF0aW9ucyBjb3VsZCBub3QgYmUgbG9hZGVkOiAiK3RoaXMuZXJyb3IubWVzc2FnZSl9fX19LG1ldGFkYXRhOntwdWJsaWNNZXRob2RzOlsicGFyc2UiLCJnZXRBbm5vdGF0aW9uc0RhdGEiLCJhdHRhY2hGYWlsZWQiLCJkZXRhY2hBbm5vYXRpb25zRmFpbGVkIiwiYXR0YWNoTG9hZGVkIiwiZGV0YWNoTG9hZGVkIl19fSk7Ty5wcm90b3R5cGUuZ2V0QW5ub3RhdGlvbnNEYXRhPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub0Fubm90YXRpb25zfTtPLnByb3RvdHlwZS5pc0xvYWRlZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmJMb2FkZWR9O08ucHJvdG90eXBlLmZpcmVMb2FkZWQ9ZnVuY3Rpb24oYSl7dGhpcy5maXJlRXZlbnQoImxvYWRlZCIsYSk7cmV0dXJuIHRoaXN9O08ucHJvdG90eXBlLmF0dGFjaExvYWRlZD1mdW5jdGlvbihkLGYsbCl7dGhpcy5hdHRhY2hFdmVudCgibG9hZGVkIixkLGYsbCk7cmV0dXJuIHRoaXN9O08ucHJvdG90eXBlLmRldGFjaExvYWRlZD1mdW5jdGlvbihmLGwpe3RoaXMuZGV0YWNoRXZlbnQoImxvYWRlZCIsZixsKTtyZXR1cm4gdGhpc307Ty5wcm90b3R5cGUuZmlyZUZhaWxlZD1mdW5jdGlvbihhKXt0aGlzLmZpcmVFdmVudCgiZmFpbGVkIixhKTtyZXR1cm4gdGhpc307Ty5wcm90b3R5cGUuYXR0YWNoRmFpbGVkPWZ1bmN0aW9uKGQsZixsKXt0aGlzLmF0dGFjaEV2ZW50KCJmYWlsZWQiLGQsZixsKTtyZXR1cm4gdGhpc307Ty5wcm90b3R5cGUuZGV0YWNoRmFpbGVkPWZ1bmN0aW9uKGYsbCl7dGhpcy5kZXRhY2hFdmVudCgiZmFpbGVkIixmLGwpO3JldHVybiB0aGlzfTtPLnByb3RvdHlwZS5fcGFyc2VBbGlhc2VzPWZ1bmN0aW9uKHgsYSxBKXt2YXIgcj10aGlzLnhQYXRoLnNlbGVjdE5vZGVzKHgsIi8vZWRteDpSZWZlcmVuY2UiLHgpO2Zvcih2YXIgaT0wO2k8ci5sZW5ndGg7aSs9MSl7dmFyIGI9dGhpcy54UGF0aC5uZXh0Tm9kZShyLGkpO3ZhciBjPXRoaXMueFBhdGguc2VsZWN0Tm9kZXMoeCwiLi9lZG14OkluY2x1ZGUiLGIpO2lmKGMmJmMubGVuZ3RoPjApe3ZhciBkPXRoaXMueFBhdGgubmV4dE5vZGUoYywwKTtpZihkLmdldEF0dHJpYnV0ZSgiQWxpYXMiKSl7QVtkLmdldEF0dHJpYnV0ZSgiQWxpYXMiKV09ZC5nZXRBdHRyaWJ1dGUoIk5hbWVzcGFjZSIpfWVsc2V7QVtkLmdldEF0dHJpYnV0ZSgiTmFtZXNwYWNlIildPWQuZ2V0QXR0cmlidXRlKCJOYW1lc3BhY2UiKX19dmFyIGU9dGhpcy54UGF0aC5zZWxlY3ROb2Rlcyh4LCIuL2VkbXg6SW5jbHVkZUFubm90YXRpb25zIixiKTtpZihlLmxlbmd0aD4wKXtmb3IodmFyIGo9MDtqPGUubGVuZ3RoO2orPTEpe3ZhciBmPXRoaXMueFBhdGgubmV4dE5vZGUoZSxqKTtpZihmLmdldEF0dHJpYnV0ZSgiVGFyZ2V0TmFtZXNwYWNlIikpe3ZhciBzPWYuZ2V0QXR0cmlidXRlKCJUYXJnZXROYW1lc3BhY2UiKTtpZighYVtzXSl7YVtzXT17fX1hW3NdW2YuZ2V0QXR0cmlidXRlKCJUZXJtTmFtZXNwYWNlIildPWIuZ2V0QXR0cmlidXRlKCJVcmkiKX1lbHNle2FbZi5nZXRBdHRyaWJ1dGUoIlRlcm1OYW1lc3BhY2UiKV09Yi5nZXRBdHRyaWJ1dGUoIlVyaSIpfX19fX07Ty5wcm90b3R5cGUucGFyc2U9ZnVuY3Rpb24oeCl7dmFyIG09e30scyxTPXt9LGEsQT17fSx0PXRoaXMsYixULGMsZCxNLGUsZixnLGgsaixwLGssbCxuLG8scix1LHYsdyx5LHosQixDO3ZhciBEPXt9O3RoaXMueFBhdGg9dGhpcy5nZXRYUGF0aCgpO3RoaXMub1NlcnZpY2VNZXRhZGF0YT10aGlzLm9NZXRhZGF0YS5nZXRTZXJ2aWNlTWV0YWRhdGEoKTt4PXRoaXMueFBhdGguc2V0TmFtZVNwYWNlKHgpO3M9dGhpcy54UGF0aC5zZWxlY3ROb2Rlcyh4LCIvL2Q6U2NoZW1hIix4KTtmb3IodmFyIGk9MDtpPHMubGVuZ3RoO2krPTEpe2E9dGhpcy54UGF0aC5uZXh0Tm9kZShzLGkpO1MuQWxpYXM9YS5nZXRBdHRyaWJ1dGUoIkFsaWFzIik7Uy5OYW1lc3BhY2U9YS5nZXRBdHRyaWJ1dGUoIk5hbWVzcGFjZSIpfXRoaXMuX3BhcnNlQWxpYXNlcyh4LEEsRCk7aWYoQSl7bS5hbm5vdGF0aW9uUmVmZXJlbmNlcz1BfW0uYWxpYXNEZWZpbml0aW9ucz1EO2I9dGhpcy54UGF0aC5zZWxlY3ROb2Rlcyh4LCIvL2Q6VGVybSIseCk7aWYoYi5sZW5ndGg+MCl7VD17fTtmb3IodmFyIEY9MDtGPGIubGVuZ3RoO0YrPTEpe2M9dGhpcy54UGF0aC5uZXh0Tm9kZShiLEYpO2Q9dGhpcy5yZXBsYWNlV2l0aEFsaWFzKGMuZ2V0QXR0cmlidXRlKCJUeXBlIiksRCk7VFsiQCIrUy5BbGlhcysiLiIrYy5nZXRBdHRyaWJ1dGUoIk5hbWUiKV09ZH1tLnRlcm1EZWZpbml0aW9ucz1UfU09dGhpcy5nZXRBbGxQcm9wZXJ0aWVzTWV0YWRhdGEodGhpcy5vU2VydmljZU1ldGFkYXRhKTtpZihNLmV4dGVuc2lvbnMpe20ucHJvcGVydHlFeHRlbnNpb25zPU0uZXh0ZW5zaW9uc31lPXRoaXMueFBhdGguc2VsZWN0Tm9kZXMoeCwiLy9kOkFubm90YXRpb25zICIseCk7Zm9yKHZhciBGPTA7RjxlLmxlbmd0aDtGKz0xKXtmPXRoaXMueFBhdGgubmV4dE5vZGUoZSxGKTtpZihmLmhhc0NoaWxkTm9kZXMoKT09PWZhbHNlKXtjb250aW51ZX1nPWYuZ2V0QXR0cmlidXRlKCJUYXJnZXQiKTtoPWcuc3BsaXQoIi4iKVswXTtpZihoJiZEW2hdKXtnPWcucmVwbGFjZShuZXcgUmVnRXhwKGgsIiIpLERbaF0pfWo9ZztwPW51bGw7aWYoZy5pbmRleE9mKCIvIik+MCl7aj1nLnNwbGl0KCIvIilbMF07cD1nLnJlcGxhY2UoaisiLyIsIiIpfWlmKCFtW2pdKXttW2pdPXt9fWlmKHApe2lmKCFtLnByb3BlcnR5QW5ub3RhdGlvbnMpe20ucHJvcGVydHlBbm5vdGF0aW9ucz17fX1pZighbS5wcm9wZXJ0eUFubm90YXRpb25zW2pdKXttLnByb3BlcnR5QW5ub3RhdGlvbnNbal09e319bS5wcm9wZXJ0eUFubm90YXRpb25zW2pdW3BdPXt9O2s9dGhpcy54UGF0aC5zZWxlY3ROb2Rlcyh4LCIuL2Q6QW5ub3RhdGlvbiIsZik7Zm9yKHZhciBHPTA7RzxrLmxlbmd0aDtHKz0xKXtsPXRoaXMueFBhdGgubmV4dE5vZGUoayxHKTtpZihsLmhhc0NoaWxkTm9kZXMoKT09PWZhbHNlKXtuPXRoaXMucmVwbGFjZVdpdGhBbGlhcyhsLmdldEF0dHJpYnV0ZSgiVGVybSIpLEQpO20ucHJvcGVydHlBbm5vdGF0aW9uc1tqXVtwXVtuXT10aGlzLmdldFByb3BlcnR5VmFsdWVBdHRyaWJ1dGVzKGwsRCl9fX1lbHNle289ai5yZXBsYWNlKERbaF0saCk7az10aGlzLnhQYXRoLnNlbGVjdE5vZGVzKHgsIi4vZDpBbm5vdGF0aW9uIixmKTtmb3IodmFyIEg9MDtIPGsubGVuZ3RoO0grPTEpe2w9dGhpcy54UGF0aC5uZXh0Tm9kZShrLEgpO3I9bC5nZXRBdHRyaWJ1dGUoIlF1YWxpZmllciIpO3U9dGhpcy5yZXBsYWNlV2l0aEFsaWFzKGwuZ2V0QXR0cmlidXRlKCJUZXJtIiksRCk7aWYocil7dSs9IiMiK3J9dj10aGlzLmdldFByb3BlcnR5VmFsdWUoeCxsLG8sRCk7dj10aGlzLnNldEVkbVR5cGVzKHYsTS50eXBlcyxqLFMpO21bal1bdV09dn13PXRoaXMueFBhdGguc2VsZWN0Tm9kZXMoeCwiLy9kOkFubm90YXRpb25zW2NvbnRhaW5zKEBUYXJnZXQsICciK28rIicpXS8vZDpQcm9wZXJ0eVZhbHVlW2NvbnRhaW5zKEBQYXRoLCAnLycpXS8vQFBhdGgiLHgpO2ZvcihpPTA7aTx3Lmxlbmd0aDtpKz0xKXt5PXRoaXMueFBhdGgubmV4dE5vZGUodyxpKTt6PXkudmFsdWU7aWYobS5wcm9wZXJ0eUFubm90YXRpb25zKXtpZihtLnByb3BlcnR5QW5ub3RhdGlvbnNbal0pe2lmKG0ucHJvcGVydHlBbm5vdGF0aW9uc1tqXVt6XSl7Y29udGludWV9fX1CPXouc3BsaXQoJy8nKTtpZih0aGlzLmlzTmF2UHJvcGVydHkoaixCWzBdLHRoaXMub1NlcnZpY2VNZXRhZGF0YSkpe2lmKCFtLmV4cGFuZCl7bS5leHBhbmQ9e319aWYoIW0uZXhwYW5kW2pdKXttLmV4cGFuZFtqXT17fX1tLmV4cGFuZFtqXVtCWzBdXT1CWzBdfX1DPXRoaXMueFBhdGguc2VsZWN0Tm9kZXMoeCwiLy9kOkFubm90YXRpb25zW2NvbnRhaW5zKEBUYXJnZXQsICciK28rIicpXS8vZDpQYXRoW2NvbnRhaW5zKC4sICcvJyldIix4KTtmb3IoaT0wO2k8Qy5sZW5ndGg7aSs9MSl7eT10aGlzLnhQYXRoLm5leHROb2RlKEMsaSk7ej10aGlzLnhQYXRoLmdldE5vZGVUZXh0KHkpO2lmKG0ucHJvcGVydHlBbm5vdGF0aW9uc1tqXSl7aWYobS5wcm9wZXJ0eUFubm90YXRpb25zW2pdW3pdKXtjb250aW51ZX19aWYoIW0uZXhwYW5kKXttLmV4cGFuZD17fX1pZighbS5leHBhbmRbal0pe20uZXhwYW5kW2pdPXt9fUI9ei5zcGxpdCgnLycpO2lmKHRoaXMuaXNOYXZQcm9wZXJ0eShqLEJbMF0sdGhpcy5vU2VydmljZU1ldGFkYXRhKSl7aWYoIW0uZXhwYW5kKXttLmV4cGFuZD17fX1pZighbS5leHBhbmRbal0pe20uZXhwYW5kW2pdPXt9fW0uZXhwYW5kW2pdW0JbMF1dPUJbMF19fX19cmV0dXJuIG19O08ucHJvdG90eXBlLmdldFhQYXRoPWZ1bmN0aW9uKCl7dmFyIHg9e307aWYodGhpcy54bWxDb21wYXRWZXJzaW9uKXt4PXtzZXROYW1lU3BhY2U6ZnVuY3Rpb24obyl7by5zZXRQcm9wZXJ0eSgiU2VsZWN0aW9uTmFtZXNwYWNlcyIsJ3htbG5zOmVkbXg9Imh0dHA6Ly9kb2NzLm9hc2lzLW9wZW4ub3JnL29kYXRhL25zL2VkbXgiIHhtbG5zOmQ9Imh0dHA6Ly9kb2NzLm9hc2lzLW9wZW4ub3JnL29kYXRhL25zL2VkbSInKTtvLnNldFByb3BlcnR5KCJTZWxlY3Rpb25MYW5ndWFnZSIsIlhQYXRoIik7cmV0dXJuIG99LHNlbGVjdE5vZGVzOmZ1bmN0aW9uKG8seCxpKXtyZXR1cm4gaS5zZWxlY3ROb2Rlcyh4KX0sbmV4dE5vZGU6ZnVuY3Rpb24obil7cmV0dXJuIG4ubmV4dE5vZGUoKX0sZ2V0Tm9kZVRleHQ6ZnVuY3Rpb24obil7cmV0dXJuIG4udGV4dH19fWVsc2V7eD17c2V0TmFtZVNwYWNlOmZ1bmN0aW9uKG8pe3JldHVybiBvfSxuc1Jlc29sdmVyOmZ1bmN0aW9uKHApe3ZhciBuPXsiZWRteCI6Imh0dHA6Ly9kb2NzLm9hc2lzLW9wZW4ub3JnL29kYXRhL25zL2VkbXgiLCJkIjoiaHR0cDovL2RvY3Mub2FzaXMtb3Blbi5vcmcvb2RhdGEvbnMvZWRtIn07cmV0dXJuIG5bcF18fG51bGx9LHNlbGVjdE5vZGVzOmZ1bmN0aW9uKG8scCxpKXt2YXIgYT1vLmV2YWx1YXRlKHAsaSx0aGlzLm5zUmVzb2x2ZXIsNyxudWxsKTthLmxlbmd0aD1hLnNuYXBzaG90TGVuZ3RoO3JldHVybiBhfSxuZXh0Tm9kZTpmdW5jdGlvbihuLGkpe3JldHVybiBuLnNuYXBzaG90SXRlbShpKX0sZ2V0Tm9kZVRleHQ6ZnVuY3Rpb24obil7cmV0dXJuIG4udGV4dENvbnRlbnR9fX1yZXR1cm4geH07Ty5wcm90b3R5cGUuc2V0WE1MPWZ1bmN0aW9uKHgsWCxvKXt2YXIgZD17c3VjY2VzczpmdW5jdGlvbigpe30sZXJyb3I6ZnVuY3Rpb24oKXt9fTtvPXEuZXh0ZW5kKHt9LGQsbyk7dmFyIHQ9dGhpczt2YXIgYT1udWxsO2lmKHNhcC51aS5EZXZpY2UuYnJvd3Nlci5pbnRlcm5ldF9leHBsb3Jlcil7YT1uZXcgQWN0aXZlWE9iamVjdCgiTWljcm9zb2Z0LlhNTERPTSIpO2EubG9hZFhNTChYKTt0aGlzLnhtbENvbXBhdFZlcnNpb249dHJ1ZX1lbHNlIGlmKHgpe2E9eH1lbHNle2E9bmV3IERPTVBhcnNlcigpLnBhcnNlRnJvbVN0cmluZyhYLCdhcHBsaWNhdGlvbi94bWwnKX1pZihhLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJwYXJzZXJlcnJvciIpLmxlbmd0aD4wKXtvLmVycm9yKHt4bWxEb2M6YX0pO3JldHVybiBmYWxzZX1lbHNle2lmKHEuaXNFbXB0eU9iamVjdCh0aGlzLm9NZXRhZGF0YS5nZXRTZXJ2aWNlTWV0YWRhdGEoKSkpe3RoaXMub01ldGFkYXRhLmF0dGFjaExvYWRlZChmdW5jdGlvbigpe3ZhciBBPXQucGFyc2UoYSk7aWYoQSl7by5zdWNjZXNzKHthbm5vdGF0aW9uczpBLHhtbERvYzphfSl9ZWxzZXtvLmVycm9yKHt4bWxEb2M6YX0pfX0pfWVsc2V7dmFyIEE9dGhpcy5wYXJzZShhKTtpZihBKXtvLnN1Y2Nlc3Moe2Fubm90YXRpb25zOkEseG1sRG9jOmF9KX1lbHNle28uZXJyb3Ioe3htbERvYzphfSl9fXJldHVybiB0cnVlfX07Ty5wcm90b3R5cGUubG9hZFhNTD1mdW5jdGlvbigpe3ZhciB0PXRoaXM7aWYoIXEuaXNBcnJheSh0aGlzLmFBbm5vdGF0aW9uVVJJKSl7dGhpcy5hQW5ub3RhdGlvblVSST1bdGhpcy5hQW5ub3RhdGlvblVSSV19dmFyIGw9dGhpcy5hQW5ub3RhdGlvblVSSS5sZW5ndGg7dGhpcy5tTG9hZGVkPXtsZW5ndGg6bH07Zm9yKHZhciBpPTA7aTxsOysraSl7dGhpcy5tTG9hZGVkW2ldPWZhbHNlO3ZhciBhPXt1cmw6dGhpcy5hQW5ub3RhdGlvblVSSVtpXSxhc3luYzp0aGlzLmJBc3luY307dmFyIGg9KGZ1bmN0aW9uKHIpe3JldHVybiBmdW5jdGlvbiBfaGFuZGxlRmFpbChqLHMpe2lmKHQub1JlcXVlc3RIYW5kbGVzW3JdJiZ0Lm9SZXF1ZXN0SGFuZGxlc1tyXS5iU3VwcHJlc3NFcnJvckhhbmRsZXJDYWxsKXtyZXR1cm59dC5vUmVxdWVzdEhhbmRsZXNbcl09bnVsbDt0LmVycm9yPXttZXNzYWdlOnMsc3RhdHVzQ29kZTpqLnN0YXR1c0NvZGUsc3RhdHVzVGV4dDpqLnN0YXR1c1RleHQsdXJsOnQuYUFubm90YXRpb25VUklbcl0scmVzcG9uc2VUZXh0OmoucmVzcG9uc2VUZXh0fTtpZighdGhpcy5iQXN5bmMpe3Qub0ZhaWxlZEV2ZW50PXEuc2FwLmRlbGF5ZWRDYWxsKDAsdCx0LmZpcmVGYWlsZWQsW3QuZXJyb3JdKX1lbHNle3QuZmlyZUZhaWxlZCh0LmVycm9yKX19fSkoaSk7dmFyIEg9KGZ1bmN0aW9uKHIpe3JldHVybiBmdW5jdGlvbihkLFQsail7dC5vUmVxdWVzdEhhbmRsZXNbcl09bnVsbDt0LnNldFhNTChqLnJlc3BvbnNlWE1MLGoucmVzcG9uc2VUZXh0LHtzdWNjZXNzOmZ1bmN0aW9uKEQpe3QubUxvYWRlZFtyXT1ELmFubm90YXRpb25zO3QuY2hlY2tBbGxMb2FkZWQoKX0sZXJyb3I6ZnVuY3Rpb24oRCl7dC5tTG9hZGVkW3JdPWZhbHNlO2goaiwiTWFsZm9ybWVkIFhNTCBkb2N1bWVudCIpO3QuY2hlY2tBbGxMb2FkZWQoKX19KX19KShpKTt0aGlzLm9SZXF1ZXN0SGFuZGxlc1tpXT1xLmFqYXgoYSkuZG9uZShIKS5mYWlsKGgpfX07Ty5wcm90b3R5cGUuY2hlY2tBbGxMb2FkZWQ9ZnVuY3Rpb24oKXt2YXIgbD10aGlzLm1Mb2FkZWQubGVuZ3RoO2Zvcih2YXIgaT0wO2k8bDsrK2kpe2lmKCF0aGlzLm1Mb2FkZWRbaV0pe3JldHVybn19dGhpcy5vQW5ub3RhdGlvbnM9e307Zm9yKHZhciBpPTA7aTxsOysraSl7cS5leHRlbmQodHJ1ZSx0aGlzLm9Bbm5vdGF0aW9ucyx0aGlzLm1Mb2FkZWRbaV0pfXRoaXMuYkxvYWRlZD10cnVlO2lmKHRoaXMuYkFzeW5jKXt0aGlzLmZpcmVMb2FkZWQoe2Fubm90YXRpb25zOnRoaXMub0Fubm90YXRpb25zfSl9ZWxzZXt0aGlzLm9Mb2FkRXZlbnQ9cS5zYXAuZGVsYXllZENhbGwoMCx0aGlzLHRoaXMuZmlyZUxvYWRlZCxbe2Fubm90YXRpb25zOnRoaXMub0Fubm90YXRpb25zfV0pfX07Ty5wcm90b3R5cGUuZ2V0QWxsUHJvcGVydGllc01ldGFkYXRhPWZ1bmN0aW9uKG0pe3ZhciBNPXt9LFA9e30sbz17fSxiPWZhbHNlLG4sZSxjLGE9e30sZD17fSxmPXt9LGc9ZmFsc2UsaCxDLHMsdCxyLFI7Zm9yKHZhciBpPW0uZGF0YVNlcnZpY2VzLnNjaGVtYS5sZW5ndGgtMTtpPj0wO2ktPTEpe009bS5kYXRhU2VydmljZXMuc2NoZW1hW2ldO2lmKE0uZW50aXR5VHlwZSl7bj1NLm5hbWVzcGFjZTtlPU0uZW50aXR5VHlwZTtjPU0uY29tcGxleFR5cGU7Zm9yKHZhciBqIGluIGUpe2E9ZVtqXTtmPXt9O2lmKGEuaGFzU3RyZWFtJiZhLmhhc1N0cmVhbT09PSJ0cnVlIil7Y29udGludWV9Zm9yKHZhciBrIGluIGEucHJvcGVydHkpe2g9YS5wcm9wZXJ0eVtrXTtpZihoLnR5cGUuc3Vic3RyaW5nKDAsbi5sZW5ndGgpPT09bil7Zm9yKHZhciBsIGluIGMpe2lmKGNbbF0ubmFtZT09PWgudHlwZS5zdWJzdHJpbmcobi5sZW5ndGgrMSkpe2ZvcihrIGluIGNbbF0ucHJvcGVydHkpe0M9Y1tsXS5wcm9wZXJ0eVtrXTtkW2NbbF0ubmFtZSsiLyIrQy5uYW1lXT1DLnR5cGV9fX19ZWxzZXtzPWgubmFtZTt0PWgudHlwZTtmb3IodmFyIHAgaW4gaC5leHRlbnNpb25zKXtyPWguZXh0ZW5zaW9uc1twXTtpZigoci5uYW1lPT09ImRpc3BsYXktZm9ybWF0IikmJihyLnZhbHVlPT09IkRhdGUiKSl7dD0iRWRtLkRhdGUifWVsc2V7Zz10cnVlO2lmKCFmW3NdKXtmW3NdPXt9fWlmKHIubmFtZXNwYWNlJiYhZltzXVtyLm5hbWVzcGFjZV0pe2Zbc11bci5uYW1lc3BhY2VdPXt9fWZbc11bci5uYW1lc3BhY2VdW3IubmFtZV09ci52YWx1ZX19ZFtzXT10fX1pZighUFtuKyIuIithLm5hbWVdKXtQW24rIi4iK2EubmFtZV09e319UFtuKyIuIithLm5hbWVdPWQ7aWYoZyl7aWYoIW9bbisiLiIrYS5uYW1lXSl7Yj10cnVlfW9bbisiLiIrYS5uYW1lXT17fTtvW24rIi4iK2EubmFtZV09Zn19fX1pZihiKXtSPXt0eXBlczpQLGV4dGVuc2lvbnM6b319ZWxzZXtSPXt0eXBlczpQfX1yZXR1cm4gUn07Ty5wcm90b3R5cGUuc2V0RWRtVHlwZXM9ZnVuY3Rpb24ocCxQLHQscyl7dmFyIG8sZT0nJztmb3IodmFyIGEgaW4gcCl7aWYocFthXSl7bz1wW2FdO2lmKG8uVmFsdWUmJm8uVmFsdWUuUGF0aCl7ZT10aGlzLmdldEVkbVR5cGUoby5WYWx1ZS5QYXRoLFAsdCxzKTtpZihlKXtwW2FdLkVkbVR5cGU9ZX1jb250aW51ZX1pZihvLlBhdGgpe2U9dGhpcy5nZXRFZG1UeXBlKG8uUGF0aCxQLHQscyk7aWYoZSl7cFthXS5FZG1UeXBlPWV9Y29udGludWV9aWYoby5GYWNldHMpe3BbYV0uRmFjZXRzPXRoaXMuc2V0RWRtVHlwZXMoby5GYWNldHMsUCx0LHMpO2NvbnRpbnVlfWlmKG8uRGF0YSl7cFthXS5EYXRhPXRoaXMuc2V0RWRtVHlwZXMoby5EYXRhLFAsdCxzKTtjb250aW51ZX1pZihhPT09IkRhdGEiKXtwLkRhdGE9dGhpcy5zZXRFZG1UeXBlcyhvLFAsdCxzKTtjb250aW51ZX1pZihvLlZhbHVlJiZvLlZhbHVlLkFwcGx5KXtwW2FdLlZhbHVlLkFwcGx5LlBhcmFtZXRlcnM9dGhpcy5zZXRFZG1UeXBlcyhvLlZhbHVlLkFwcGx5LlBhcmFtZXRlcnMsUCx0LHMpO2NvbnRpbnVlfWlmKG8uVmFsdWUmJm8uVHlwZSYmKG8uVHlwZT09PSJQYXRoIikpe2U9dGhpcy5nZXRFZG1UeXBlKG8uVmFsdWUsUCx0LHMpO2lmKGUpe3BbYV0uRWRtVHlwZT1lfX19fXJldHVybiBwfTtPLnByb3RvdHlwZS5nZXRFZG1UeXBlPWZ1bmN0aW9uKHAsUCx0LHMpe2lmKChwLmNoYXJBdCgwKT09PSJAIikmJihwLmluZGV4T2Yocy5BbGlhcyk9PT0xKSl7cD1wLnNsaWNlKHMuQWxpYXMubGVuZ3RoKzIpfWlmKHAuaW5kZXhPZigiLyIpPj0wKXtpZihQW3Auc2xpY2UoMCxwLmluZGV4T2YoIi8iKSldKXt0PXAuc2xpY2UoMCxwLmluZGV4T2YoIi8iKSk7cD1wLnNsaWNlKHAuaW5kZXhPZigiLyIpKzEpfX1mb3IodmFyIGEgaW4gUFt0XSl7aWYocD09PWEpe3JldHVybiBQW3RdW2FdfX19O08ucHJvdG90eXBlLmdldFByb3BlcnR5VmFsdWVBdHRyaWJ1dGVzPWZ1bmN0aW9uKGQsYSl7dmFyIGI9IiIsYz0iIixpLHA9e307Zm9yKGk9MDtpPGQuYXR0cmlidXRlcy5sZW5ndGg7aSs9MSl7aWYoKGQuYXR0cmlidXRlc1tpXS5uYW1lIT09IlByb3BlcnR5IikmJihkLmF0dHJpYnV0ZXNbaV0ubmFtZSE9PSJUZXJtIikpe2I9ZC5hdHRyaWJ1dGVzW2ldLm5hbWU7Yz1kLmF0dHJpYnV0ZXNbaV0udmFsdWV9fWlmKGIubGVuZ3RoPjApe3BbYl09dGhpcy5yZXBsYWNlV2l0aEFsaWFzKGMsYSl9cmV0dXJuIHB9O08ucHJvdG90eXBlLmdldFNpbXBsZU5vZGVWYWx1ZT1mdW5jdGlvbih4LGQpe3ZhciB2PXt9LHMsYSxwLGIsYyxlO2lmKGQuaGFzQ2hpbGROb2RlcygpKXtzPXRoaXMueFBhdGguc2VsZWN0Tm9kZXMoeCwiLi9kOlN0cmluZyIsZCk7aWYocy5sZW5ndGg+MCl7YT10aGlzLnhQYXRoLm5leHROb2RlKHMsMCk7dlsiU3RyaW5nIl09dGhpcy54UGF0aC5nZXROb2RlVGV4dChhKX1lbHNle3A9dGhpcy54UGF0aC5zZWxlY3ROb2Rlcyh4LCIuL2Q6UGF0aCIsZCk7aWYocC5sZW5ndGg+MCl7Yj10aGlzLnhQYXRoLm5leHROb2RlKHAsMCk7dlsiUGF0aCJdPXRoaXMueFBhdGguZ2V0Tm9kZVRleHQoYil9ZWxzZXtjPXRoaXMueFBhdGguc2VsZWN0Tm9kZXMoeCwiLi9kOkFwcGx5IixkKTtpZihjLmxlbmd0aD4wKXtlPXRoaXMueFBhdGgubmV4dE5vZGUoYywwKTt2WyJBcHBseSJdPXRoaXMuZ2V0QXBwbHlGdW5jdGlvbnMoeCxlLHRoaXMueFBhdGgpfX19fXJldHVybiB2fTtPLnByb3RvdHlwZS5nZXRQcm9wZXJ0eVZhbHVlPWZ1bmN0aW9uKHgsZCx0LGEpe3ZhciBwPXt9LHIsYixuLGMsZSx1LGYsZyxQPXt9LGgsaSxqLGssbDt2YXIgbT10aGlzLmdldFhQYXRoKCk7aWYoZC5oYXNDaGlsZE5vZGVzKCkpe3I9dGhpcy54UGF0aC5zZWxlY3ROb2Rlcyh4LCIuL2Q6UmVjb3JkIHwgLi9kOkNvbGxlY3Rpb24vZDpSZWNvcmQgfCAuL2Q6Q29sbGVjdGlvbi9kOklmL2Q6UmVjb3JkIixkKTtpZihyLmxlbmd0aCl7Yj0wO2ZvcihuPTA7bjxyLmxlbmd0aDtuKz0xKXtjPXRoaXMueFBhdGgubmV4dE5vZGUocixuKTtlPXRoaXMuZ2V0UHJvcGVydHlWYWx1ZXMoeCxjLHQsYSk7aWYoYy5nZXRBdHRyaWJ1dGUoIlR5cGUiKSl7ZVsiUmVjb3JkVHlwZSJdPXRoaXMucmVwbGFjZVdpdGhBbGlhcyhjLmdldEF0dHJpYnV0ZSgiVHlwZSIpLGEpfWlmKGI9PT0wKXtpZihjLm5leHRFbGVtZW50U2libGluZ3x8KGMucGFyZW50Tm9kZS5ub2RlTmFtZT09PSJDb2xsZWN0aW9uIil8fChjLnBhcmVudE5vZGUubm9kZU5hbWU9PT0iSWYiKSl7cD1bXTtwLnB1c2goZSl9ZWxzZXtwPWV9fWVsc2V7cC5wdXNoKGUpfWIrPTF9fWVsc2V7dT10aGlzLnhQYXRoLnNlbGVjdE5vZGVzKHgsIi4vZDpVcmxSZWYiLGQpO2lmKHUubGVuZ3RoPjApe2ZvcihuPTA7bjx1Lmxlbmd0aDtuKz0xKXtmPXRoaXMueFBhdGgubmV4dE5vZGUodSxuKTtwWyJVcmxSZWYiXT10aGlzLmdldFNpbXBsZU5vZGVWYWx1ZSh4LGYpfX1lbHNle3U9dGhpcy54UGF0aC5zZWxlY3ROb2Rlcyh4LCIuL2Q6VXJsIixkKTtpZih1Lmxlbmd0aD4wKXtmb3Iobj0wO248dS5sZW5ndGg7bis9MSl7Zj10aGlzLnhQYXRoLm5leHROb2RlKHUsbik7cFsiVXJsIl09dGhpcy5nZXRTaW1wbGVOb2RlVmFsdWUoeCxmKX19ZWxzZXtsPXRoaXMueFBhdGguc2VsZWN0Tm9kZXMoeCwiLi9kOkNvbGxlY3Rpb24vZDpBbm5vdGF0aW9uUGF0aCB8IC4vZDpDb2xsZWN0aW9uL2Q6UHJvcGVydHlQYXRoIixkKTtpZihsLmxlbmd0aD4wKXtwPVtdO2ZvcihuPTA7bjxsLmxlbmd0aDtuKz0xKXtnPXRoaXMueFBhdGgubmV4dE5vZGUobCxuKTtQPXt9O1BbZy5ub2RlTmFtZV09bS5nZXROb2RlVGV4dChnKTtwLnB1c2goUCl9fWVsc2V7cD10aGlzLmdldFByb3BlcnR5VmFsdWVBdHRyaWJ1dGVzKGQsYSk7aD10aGlzLnhQYXRoLnNlbGVjdE5vZGVzKHgsIi4vZDpBbm5vdGF0aW9uIixkKTtpPXt9O2ZvcihqPTA7ajxoLmxlbmd0aDtqKz0xKXtpPXRoaXMueFBhdGgubmV4dE5vZGUoaCxqKTtpZihpLmhhc0NoaWxkTm9kZXMoKT09PWZhbHNlKXtrPXRoaXMucmVwbGFjZVdpdGhBbGlhcyhpLmdldEF0dHJpYnV0ZSgiVGVybSIpLGEpO3Bba109dGhpcy5nZXRQcm9wZXJ0eVZhbHVlQXR0cmlidXRlcyhpLGEpfX19fX19fWVsc2V7cD10aGlzLmdldFByb3BlcnR5VmFsdWVBdHRyaWJ1dGVzKGQsYSl9cmV0dXJuIHB9O08ucHJvdG90eXBlLmdldFByb3BlcnR5VmFsdWVzPWZ1bmN0aW9uKHgsZCx0LGEpe3ZhciBwPXt9LGI9e30sYyxuLGUsZixnLGgsaSxqLGssbDtjPXRoaXMueFBhdGguc2VsZWN0Tm9kZXMoeCwiLi9kOkFubm90YXRpb24iLGQpO2ZvcihuPTA7bjxjLmxlbmd0aDtuKz0xKXtiPXRoaXMueFBhdGgubmV4dE5vZGUoYyxuKTtpZihiLmhhc0NoaWxkTm9kZXMoKT09PWZhbHNlKXtlPXRoaXMucmVwbGFjZVdpdGhBbGlhcyhiLmdldEF0dHJpYnV0ZSgiVGVybSIpLGEpO3BbZV09dGhpcy5nZXRQcm9wZXJ0eVZhbHVlQXR0cmlidXRlcyhiLGEpfX1mPXRoaXMueFBhdGguc2VsZWN0Tm9kZXMoeCwiLi9kOlByb3BlcnR5VmFsdWUiLGQpO2lmKGYubGVuZ3RoPjApe2ZvcihnPTA7ZzxmLmxlbmd0aDtnKz0xKXtoPXRoaXMueFBhdGgubmV4dE5vZGUoZixnKTtpPWguZ2V0QXR0cmlidXRlKCJQcm9wZXJ0eSIpO3BbaV09dGhpcy5nZXRQcm9wZXJ0eVZhbHVlKHgsaCx0LGEpO2o9dGhpcy54UGF0aC5zZWxlY3ROb2Rlcyh4LCIuL2Q6QXBwbHkiLGgpO2s9bnVsbDtmb3IobD0wO2w8ai5sZW5ndGg7bCs9MSl7az10aGlzLnhQYXRoLm5leHROb2RlKGosbCk7aWYoayl7cFtpXT17fTtwW2ldWydBcHBseSddPXRoaXMuZ2V0QXBwbHlGdW5jdGlvbnMoeCxrKX19fX1lbHNle3A9dGhpcy5nZXRQcm9wZXJ0eVZhbHVlKHgsZCx0LGEpfXJldHVybiBwfTtPLnByb3RvdHlwZS5nZXRBcHBseUZ1bmN0aW9ucz1mdW5jdGlvbih4LGEpe3ZhciBiPXt9LHAsYz1udWxsLGQ9W10saTtwPXRoaXMueFBhdGguc2VsZWN0Tm9kZXMoeCwiLi9kOioiLGEpO2ZvcihpPTA7aTxwLmxlbmd0aDtpKz0xKXtjPXRoaXMueFBhdGgubmV4dE5vZGUocCxpKTtzd2l0Y2goYy5ub2RlTmFtZSl7Y2FzZSJBcHBseSI6ZC5wdXNoKHsiVHlwZSI6IkFwcGx5IiwiVmFsdWUiOnRoaXMuZ2V0QXBwbHlGdW5jdGlvbnMoeCxjKX0pO2JyZWFrO2Nhc2UiTGFiZWxlZEVsZW1lbnQiOmQucHVzaCh7Ik5hbWUiOmMuZ2V0QXR0cmlidXRlKCJOYW1lIiksIlZhbHVlIjp0aGlzLmdldFNpbXBsZU5vZGVWYWx1ZSh4LGMpfSk7YnJlYWs7ZGVmYXVsdDpkLnB1c2goeyJUeXBlIjpjLm5vZGVOYW1lLCJWYWx1ZSI6dGhpcy54UGF0aC5nZXROb2RlVGV4dChjKX0pO2JyZWFrfX1iWydOYW1lJ109YS5nZXRBdHRyaWJ1dGUoJ0Z1bmN0aW9uJyk7YlsnUGFyYW1ldGVycyddPWQ7cmV0dXJuIGJ9O08ucHJvdG90eXBlLmlzTmF2UHJvcGVydHk9ZnVuY3Rpb24oZSxwLG0pe3ZhciBNLGksbixhLGosaztmb3IoaT1tLmRhdGFTZXJ2aWNlcy5zY2hlbWEubGVuZ3RoLTE7aT49MDtpLT0xKXtNPW0uZGF0YVNlcnZpY2VzLnNjaGVtYVtpXTtpZihNLmVudGl0eVR5cGUpe249TS5uYW1lc3BhY2UrIi4iO2E9TS5lbnRpdHlUeXBlO2ZvcihrPWEubGVuZ3RoLTE7az49MDtrLT0xKXtpZihuK2Fba10ubmFtZT09PWUmJmFba10ubmF2aWdhdGlvblByb3BlcnR5KXtmb3Ioaj0wO2o8YVtrXS5uYXZpZ2F0aW9uUHJvcGVydHkubGVuZ3RoO2orPTEpe2lmKGFba10ubmF2aWdhdGlvblByb3BlcnR5W2pdLm5hbWU9PT1wKXtyZXR1cm4gdHJ1ZX19fX19fXJldHVybiBmYWxzZX07Ty5wcm90b3R5cGUucmVwbGFjZVdpdGhBbGlhcz1mdW5jdGlvbih2LGEpe2Zvcih2YXIgQSBpbiBhKXtpZih2LmluZGV4T2YoQSsiLiIpPj0wKXt2PXYucmVwbGFjZShBKyIuIixhW0FdKyIuIik7cmV0dXJuIHZ9fXJldHVybiB2fTtPLnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKCl7Zm9yKHZhciBpPTA7aTx0aGlzLm9SZXF1ZXN0SGFuZGxlcy5sZW5ndGg7KytpKXtpZih0aGlzLm9SZXF1ZXN0SGFuZGxlc1tpXSl7dGhpcy5vUmVxdWVzdEhhbmRsZXNbaV0uYlN1cHByZXNzRXJyb3JIYW5kbGVyQ2FsbD10cnVlO3RoaXMub1JlcXVlc3RIYW5kbGVzW2ldLmFib3J0KCk7dGhpcy5vUmVxdWVzdEhhbmRsZXNbaV09bnVsbH19c2FwLnVpLmJhc2UuT2JqZWN0LnByb3RvdHlwZS5kZXN0cm95LmFwcGx5KHRoaXMsYXJndW1lbnRzKTtpZighIXRoaXMub0xvYWRFdmVudCl7cS5zYXAuY2xlYXJEZWxheWVkQ2FsbCh0aGlzLm9Mb2FkRXZlbnQpfWlmKCEhdGhpcy5vRmFpbGVkRXZlbnQpe3Euc2FwLmNsZWFyRGVsYXllZENhbGwodGhpcy5vRmFpbGVkRXZlbnQpfX07cmV0dXJuIE99LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkubW9kZWwub2RhdGEuT0RhdGFDb250ZXh0QmluZGluZycpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5tb2RlbC5vZGF0YS5PRGF0YUNvbnRleHRCaW5kaW5nJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL21vZGVsL29kYXRhL09EYXRhQ29udGV4dEJpbmRpbmciLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvbW9kZWwvQ29udGV4dEJpbmRpbmcnXSxmdW5jdGlvbihxLEMpeyJ1c2Ugc3RyaWN0Ijt2YXIgTz1DLmV4dGVuZCgic2FwLnVpLm1vZGVsLm9kYXRhLk9EYXRhQ29udGV4dEJpbmRpbmciLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbihtLHAsYyxQLGUpe0MuY2FsbCh0aGlzLG0scCxjLFAsZSl9fSk7Ty5wcm90b3R5cGUuaW5pdGlhbGl6ZT1mdW5jdGlvbigpe3ZhciB0PXRoaXMscj10aGlzLm9Nb2RlbC5yZXNvbHZlKHRoaXMuc1BhdGgsdGhpcy5vQ29udGV4dCksZD10aGlzLm9Nb2RlbC5fZ2V0T2JqZWN0KHRoaXMuc1BhdGgsdGhpcy5vQ29udGV4dCksUj10aGlzLm9Nb2RlbC5faXNSZWxvYWROZWVkZWQocixkLHRoaXMubVBhcmFtZXRlcnMpO2lmKHRoaXMub01vZGVsLm9NZXRhZGF0YS5pc0xvYWRlZCgpKXtpZihSKXt0aGlzLmZpcmVEYXRhUmVxdWVzdGVkKCl9dGhpcy5vTW9kZWwuY3JlYXRlQmluZGluZ0NvbnRleHQodGhpcy5zUGF0aCx0aGlzLm9Db250ZXh0LHRoaXMubVBhcmFtZXRlcnMsZnVuY3Rpb24oYyl7dC5vRWxlbWVudENvbnRleHQ9Yzt0Ll9maXJlQ2hhbmdlKCk7aWYoUil7dC5maXJlRGF0YVJlY2VpdmVkKCl9fSxSKX19O08ucHJvdG90eXBlLnJlZnJlc2g9ZnVuY3Rpb24oZixjKXt2YXIgdD10aGlzLGsscyxiPWZhbHNlO2lmKGMpe3M9dGhpcy5vTW9kZWwuX2dldE9iamVjdCh0aGlzLnNQYXRoLHRoaXMub0NvbnRleHQpO2lmKHMpe2s9dGhpcy5vTW9kZWwuX2dldEtleShzKTtpZihrIGluIGMpe2I9dHJ1ZX19fWVsc2V7Yj10cnVlfWlmKGZ8fGIpe3RoaXMuZmlyZURhdGFSZXF1ZXN0ZWQoKTt0aGlzLm9Nb2RlbC5jcmVhdGVCaW5kaW5nQ29udGV4dCh0aGlzLnNQYXRoLHRoaXMub0NvbnRleHQsdGhpcy5tUGFyYW1ldGVycyxmdW5jdGlvbihvKXtpZih0Lm9FbGVtZW50Q29udGV4dD09byl7aWYoZil7dC5fZmlyZUNoYW5nZSgpfX1lbHNle3Qub0VsZW1lbnRDb250ZXh0PW87dC5fZmlyZUNoYW5nZSgpfXQuZmlyZURhdGFSZWNlaXZlZCgpfSx0cnVlKX19O08ucHJvdG90eXBlLnNldENvbnRleHQ9ZnVuY3Rpb24oYyl7dmFyIHQ9dGhpcyxyLGQsUjtpZih0aGlzLm9Db250ZXh0IT1jJiZ0aGlzLmlzUmVsYXRpdmUoKSl7cj10aGlzLm9Nb2RlbC5yZXNvbHZlKHRoaXMuc1BhdGgsdGhpcy5vQ29udGV4dCksZD10aGlzLm9Nb2RlbC5fZ2V0T2JqZWN0KHRoaXMuc1BhdGgsdGhpcy5vQ29udGV4dCksUj10aGlzLm9Nb2RlbC5faXNSZWxvYWROZWVkZWQocixkLHRoaXMubVBhcmFtZXRlcnMpO3RoaXMub0NvbnRleHQ9YztpZihSKXt0aGlzLmZpcmVEYXRhUmVxdWVzdGVkKCl9dGhpcy5vTW9kZWwuY3JlYXRlQmluZGluZ0NvbnRleHQodGhpcy5zUGF0aCx0aGlzLm9Db250ZXh0LHRoaXMubVBhcmFtZXRlcnMsZnVuY3Rpb24oYyl7dC5vRWxlbWVudENvbnRleHQ9Yzt0Ll9maXJlQ2hhbmdlKCk7aWYoUil7dC5maXJlRGF0YVJlY2VpdmVkKCl9fSxSKX19O3JldHVybiBPfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLm1vZGVsLm9kYXRhLk9EYXRhTWV0YWRhdGEnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkubW9kZWwub2RhdGEuT0RhdGFNZXRhZGF0YScpO3NhcC51aS5kZWZpbmUoInNhcC91aS9tb2RlbC9vZGF0YS9PRGF0YU1ldGFkYXRhIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL2Jhc2UvRXZlbnRQcm92aWRlciddLGZ1bmN0aW9uKHEsRSl7InVzZSBzdHJpY3QiO3ZhciBPPXNhcC51aS5iYXNlLkV2ZW50UHJvdmlkZXIuZXh0ZW5kKCJzYXAudWkubW9kZWwub2RhdGEuT0RhdGFNZXRhZGF0YSIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKG0scCl7RS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5iTG9hZGVkPWZhbHNlO3RoaXMuYkZhaWxlZD1mYWxzZTt0aGlzLm1FbnRpdHlUeXBlcz17fTt0aGlzLm9SZXF1ZXN0SGFuZGxlPW51bGw7dGhpcy5zVXJsPW07dGhpcy5iQXN5bmM9cC5hc3luYzt0aGlzLnNVc2VyPXAudXNlcjt0aGlzLmJXaXRoQ3JlZGVudGlhbHM9cC53aXRoQ3JlZGVudGlhbHM7dGhpcy5zUGFzc3dvcmQ9cC5wYXNzd29yZDt0aGlzLm1IZWFkZXJzPXAuaGVhZGVyczt0aGlzLm9Mb2FkRXZlbnQ9bnVsbDt0aGlzLm9GYWlsZWRFdmVudD1udWxsO3RoaXMub01ldGFkYXRhPW51bGw7dGhpcy5tTmFtZXNwYWNlcz1wLm5hbWVzcGFjZXN8fHtzYXA6Imh0dHA6Ly93d3cuc2FwLmNvbS9Qcm90b2NvbHMvU0FQRGF0YSIsbToiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9hZG8vMjAwNy8wOC9kYXRhc2VydmljZXMvbWV0YWRhdGEiLCIiOiJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL2Fkby8yMDA3LzA2L2VkbXgifTt0aGlzLl9sb2FkTWV0YWRhdGEoKX0sbWV0YWRhdGE6e3B1YmxpY01ldGhvZHM6WyJnZXRTZXJ2aWNlTWV0YWRhdGEiLCJhdHRhY2hGYWlsZWQiLCJkZXRhY2hGYWlsZWQiLCJhdHRhY2hMb2FkZWQiLCJkZXRhY2hMb2FkZWQiXX19KTtPLnByb3RvdHlwZS5fc2V0TmFtZXNwYWNlcz1mdW5jdGlvbihuKXt0aGlzLm1OYW1lc3BhY2VzPW59O08ucHJvdG90eXBlLl9sb2FkTWV0YWRhdGE9ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3ZhciByPXRoaXMuX2NyZWF0ZVJlcXVlc3QodGhpcy5zVXJsKTtmdW5jdGlvbiBfKG0sUil7aWYoIW18fCFtLmRhdGFTZXJ2aWNlcyl7dmFyIHA9e21lc3NhZ2U6IkludmFsaWQgbWV0YWRhdGEgZG9jdW1lbnQiLHJlcXVlc3Q6cixyZXNwb25zZTpSfTthKHApO3JldHVybn10Lm9NZXRhZGF0YT1tO3Qub1JlcXVlc3RIYW5kbGU9bnVsbDtpZih0LmJBc3luYyl7dC5maXJlTG9hZGVkKHQpfWVsc2V7dC5iTG9hZGVkPXRydWU7dC5vTG9hZEV2ZW50PXEuc2FwLmRlbGF5ZWRDYWxsKDAsdCx0LmZpcmVMb2FkZWQsW3RdKX19ZnVuY3Rpb24gYShlKXt2YXIgcD17bWVzc2FnZTplLm1lc3NhZ2V9O2lmKGUucmVzcG9uc2Upe3Auc3RhdHVzQ29kZT1lLnJlc3BvbnNlLnN0YXR1c0NvZGU7cC5zdGF0dXNUZXh0PWUucmVzcG9uc2Uuc3RhdHVzVGV4dDtwLnJlc3BvbnNlVGV4dD1lLnJlc3BvbnNlLmJvZHl9aWYodC5vUmVxdWVzdEhhbmRsZSYmdC5vUmVxdWVzdEhhbmRsZS5iU3VwcHJlc3NFcnJvckhhbmRsZXJDYWxsKXtyZXR1cm59dC5vUmVxdWVzdEhhbmRsZT1udWxsO2lmKHQuYkFzeW5jKXt0LmZpcmVGYWlsZWQocCl9ZWxzZXt0Lm9GYWlsZWRFdmVudD1xLnNhcC5kZWxheWVkQ2FsbCgwLHQsdC5maXJlRmFpbGVkLFtwXSl9fXRoaXMub1JlcXVlc3RIYW5kbGU9T0RhdGEucmVxdWVzdChyLF8sYSxPRGF0YS5tZXRhZGF0YUhhbmRsZXIpfTtPLnByb3RvdHlwZS5nZXRTZXJ2aWNlTWV0YWRhdGE9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vTWV0YWRhdGF9O08ucHJvdG90eXBlLmlzTG9hZGVkPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYkxvYWRlZH07Ty5wcm90b3R5cGUuZmlyZUxvYWRlZD1mdW5jdGlvbigpe3RoaXMuYkxvYWRlZD10cnVlO3RoaXMuZmlyZUV2ZW50KCJsb2FkZWQiKTtxLnNhcC5sb2cuZGVidWcoJ2xvYWRlZCBvbiBNZXRhZGF0YSBvYmplY3Qgd2FzIGZpcmVkJyk7cmV0dXJuIHRoaXN9O08ucHJvdG90eXBlLmF0dGFjaExvYWRlZD1mdW5jdGlvbihkLGYsbCl7dGhpcy5hdHRhY2hFdmVudCgibG9hZGVkIixkLGYsbCk7cmV0dXJuIHRoaXN9O08ucHJvdG90eXBlLmRldGFjaExvYWRlZD1mdW5jdGlvbihmLGwpe3RoaXMuZGV0YWNoRXZlbnQoImxvYWRlZCIsZixsKTtyZXR1cm4gdGhpc307Ty5wcm90b3R5cGUuZmlyZUZhaWxlZD1mdW5jdGlvbihhKXt0aGlzLmZpcmVFdmVudCgiZmFpbGVkIixhKTtyZXR1cm4gdGhpc307Ty5wcm90b3R5cGUuYXR0YWNoRmFpbGVkPWZ1bmN0aW9uKGQsZixsKXt0aGlzLmF0dGFjaEV2ZW50KCJmYWlsZWQiLGQsZixsKTtyZXR1cm4gdGhpc307Ty5wcm90b3R5cGUuZGV0YWNoRmFpbGVkPWZ1bmN0aW9uKGYsbCl7dGhpcy5kZXRhY2hFdmVudCgiZmFpbGVkIixmLGwpO3JldHVybiB0aGlzfTtPLnByb3RvdHlwZS5fZ2V0RW50aXR5VHlwZUJ5UGF0aD1mdW5jdGlvbihwKXtpZighcCl7cmV0dXJuIG51bGx9aWYoIXRoaXMub01ldGFkYXRhfHxxLmlzRW1wdHlPYmplY3QodGhpcy5vTWV0YWRhdGEpKXtyZXR1cm4gbnVsbH12YXIgYz1wLnJlcGxhY2UoL15cL3xcLyQvZywiIiksUD1jLnNwbGl0KCIvIiksbD1QLmxlbmd0aCxhLEEsbyxlLGIsZCxyLHQ9dGhpcztpZihQWzBdLmluZGV4T2YoIigiKSE9LTEpe1BbMF09UFswXS5zdWJzdHJpbmcoMCxQWzBdLmluZGV4T2YoIigiKSl9aWYobD4xKXtvPXQuX2dldEVudGl0eVR5cGVCeVBhdGgoUFswXSk7Zm9yKHZhciBpPTE7aTxQLmxlbmd0aDtpKyspe2lmKG8pe2lmKFBbaV0uaW5kZXhPZigiKCIpIT0tMSl7UFtpXT1QW2ldLnN1YnN0cmluZygwLFBbaV0uaW5kZXhPZigiKCIpKX1pZihvLm5hdmlnYXRpb25Qcm9wZXJ0eSl7cj10Ll9nZXRFbnRpdHlUeXBlQnlOYXZQcm9wZXJ0eShvLFBbaV0pO2lmKHIpe289cn19ZD1vfX19ZWxzZXtiPXRoaXMuX3NwbGl0TmFtZSh0aGlzLl9nZXRFbnRpdHlUeXBlTmFtZShQWzBdKSk7ZD10aGlzLl9nZXRPYmplY3RNZXRhZGF0YSgiZW50aXR5VHlwZSIsYlswXSxiWzFdKTtpZihkKXtkLmVudGl0eVR5cGU9dGhpcy5fZ2V0RW50aXR5VHlwZU5hbWUoUFswXSl9fWlmKCFkKXt2YXIgZj1QW1AubGVuZ3RoLTFdO3ZhciBGPXRoaXMuX2dldEZ1bmN0aW9uSW1wb3J0TWV0YWRhdGEoZiwiR0VUIik7aWYoRiYmRi5lbnRpdHlTZXQpe2Q9dGhpcy5fZ2V0RW50aXR5VHlwZUJ5UGF0aChGLmVudGl0eVNldCk7aWYoZCl7ZC5lbnRpdHlUeXBlPXRoaXMuX2dldEVudGl0eVR5cGVOYW1lKEYuZW50aXR5U2V0KX19fXJldHVybiBkfTtPLnByb3RvdHlwZS5fZ2V0RW50aXR5VHlwZUJ5TmFtZT1mdW5jdGlvbihuKXt2YXIgZSx0PXRoaXM7aWYoIW4pe3JldHVybiBudWxsfWlmKCF0aGlzLm9NZXRhZGF0YXx8cS5pc0VtcHR5T2JqZWN0KHRoaXMub01ldGFkYXRhKSl7cmV0dXJuIG51bGx9aWYodGhpcy5tRW50aXR5VHlwZXNbbl0pe2U9dGhpcy5tRW50aXR5VHlwZXNbbl19ZWxzZXtxLmVhY2godGhpcy5vTWV0YWRhdGEuZGF0YVNlcnZpY2VzLnNjaGVtYSxmdW5jdGlvbihpLHMpe2lmKHMuZW50aXR5VHlwZSl7cS5lYWNoKHMuZW50aXR5VHlwZSxmdW5jdGlvbihrLG8pe2lmKG8ubmFtZT09PW4pe2U9bzt0Lm1FbnRpdHlUeXBlc1tuXT1lO2UubmFtZXNwYWNlPXMubmFtZXNwYWNlO3JldHVybiBmYWxzZX19KX19KX1yZXR1cm4gZX07Ty5wcm90b3R5cGUuX2dldEFubm90YXRpb249ZnVuY3Rpb24ocCl7dmFyIG4sayxQLG0sTSxlLHMsbyxhLHA7UD1wLnNwbGl0KCcvIycpO009UFsxXS5zcGxpdCgnLycpO2lmKCFQWzBdKXtlPXRoaXMuX2dldEVudGl0eVR5cGVCeU5hbWUoTVswXSk7aWYoIWUpcmV0dXJuO3M9UFsxXS5zdWJzdHIoUFsxXS5pbmRleE9mKCcvJykrMSk7bz10aGlzLl9nZXRQcm9wZXJ0eU1ldGFkYXRhKGUscyk7aWYoIW8pcmV0dXJuO209cy5zdWJzdHIocy5pbmRleE9mKG8ubmFtZSkpO209bS5zdWJzdHIobS5pbmRleE9mKCcvJykrMSl9ZWxzZXtlPXRoaXMuX2dldEVudGl0eVR5cGVCeVBhdGgoUFswXSk7aWYoIWUpcmV0dXJuO3A9UFswXS5yZXBsYWNlKC9eXC98XC8kL2csIiIpO3M9cC5zdWJzdHIocC5pbmRleE9mKCcvJykrMSk7bz10aGlzLl9nZXRQcm9wZXJ0eU1ldGFkYXRhKGUscyk7aWYoIW8pcmV0dXJuO209TS5qb2luKCcvJyl9bj10aGlzLl9nZXRBbm5vdGF0aW9uT2JqZWN0KGUsbyxtKTtyZXR1cm4gbn07Ty5wcm90b3R5cGUuX2dldEFubm90YXRpb25PYmplY3Q9ZnVuY3Rpb24oZSxvLG0pe3ZhciB0PXRoaXMsYSxwLEEsbixzO2lmKCFvKXJldHVybjtuPW87cD1tLnNwbGl0KCcvJyk7aWYocFswXS5pbmRleE9mKCcuJyk+LTEpe3JldHVybiB0aGlzLl9nZXRWNEFubm90YXRpb25PYmplY3QoZSxvLHApfWVsc2V7aWYocC5sZW5ndGg+MSl7bj1uW3BbMF1dO2lmKCFuJiZvLmV4dGVuc2lvbnMpe2Zvcih2YXIgaT0wO2k8by5leHRlbnNpb25zLmxlbmd0aDtpKyspe3ZhciBiPW8uZXh0ZW5zaW9uc1tpXTtpZihiLm5hbWU9PXBbMF0pe249YjticmVha319fW09cC5zcGxpY2UoMCwxKTtBPXRoaXMuX2dldEFubm90YXRpb25PYmplY3QoZSxuLHAuam9pbignLycpKX1lbHNle2lmKHBbMF0uaW5kZXhPZignQCcpPi0xKXtzPXBbMF0uc3Vic3RyKDEpO2E9cy5zcGxpdCgnOicpO0E9blthWzBdXTtpZighQSYmbi5leHRlbnNpb25zKXtmb3IodmFyIGk9MDtpPG4uZXh0ZW5zaW9ucy5sZW5ndGg7aSsrKXt2YXIgYj1uLmV4dGVuc2lvbnNbaV07aWYoYi5uYW1lPT09YVsxXSYmYi5uYW1lc3BhY2U9PT10aGlzLm1OYW1lc3BhY2VzW2FbMF1dKXtBPWIudmFsdWU7YnJlYWt9fX19ZWxzZXthPXBbMF0uc3BsaXQoJzonKTtBPW5bYVswXV07QT1uW3BbMF1dO2lmKCFBJiZuLmV4dGVuc2lvbnMpe2Zvcih2YXIgaT0wO2k8bi5leHRlbnNpb25zLmxlbmd0aDtpKyspe3ZhciBiPW4uZXh0ZW5zaW9uc1tpXTtpZihiLm5hbWU9PT1hWzFdJiZiLm5hbWVzcGFjZT09PXRoaXMubU5hbWVzcGFjZXNbYVswXV0pe0E9YjticmVha319fX19fXJldHVybiBBfTtPLnByb3RvdHlwZS5fZ2V0VjRBbm5vdGF0aW9uT2JqZWN0PWZ1bmN0aW9uKGUsbyxwKXt2YXIgYSxBPVtdO2lmKHAubGVuZ3RoPjEpe3JldHVybn12YXIgdD1lLm5hbWVzcGFjZT9lLm5hbWVzcGFjZSsiLiI6IiI7dCs9ZS5uYW1lKyIvIitvLm5hbWU7cS5lYWNoKHRoaXMub01ldGFkYXRhLmRhdGFTZXJ2aWNlcy5zY2hlbWEsZnVuY3Rpb24oaSxzKXtpZihzLmFubm90YXRpb25zKXtxLmVhY2gocy5hbm5vdGF0aW9ucyxmdW5jdGlvbihrLG8pe2lmKG8udGFyZ2V0PT09dCYmIW8ucXVhbGlmaWVyKXtBLnB1c2goby5hbm5vdGF0aW9uKTtyZXR1cm4gZmFsc2V9fSl9fSk7aWYoQSl7cS5lYWNoKEEsZnVuY3Rpb24oaSxiKXtxLmVhY2goYixmdW5jdGlvbihqLGMpe2lmKGMudGVybT09PXBbMF0pe2E9Y319KX0pfXJldHVybiBhfTtPLnByb3RvdHlwZS5fc3BsaXROYW1lPWZ1bmN0aW9uKGYpe3ZhciBwPVtdO2lmKGYpe3ZhciBzPWYubGFzdEluZGV4T2YoIi4iKTtwWzBdPWYuc3Vic3RyKHMrMSk7cFsxXT1mLnN1YnN0cigwLHMpfXJldHVybiBwfTtPLnByb3RvdHlwZS5fZ2V0RW50aXR5VHlwZU5hbWU9ZnVuY3Rpb24oYyl7dmFyIGU7aWYoYyl7cS5lYWNoKHRoaXMub01ldGFkYXRhLmRhdGFTZXJ2aWNlcy5zY2hlbWEsZnVuY3Rpb24oaSxzKXtpZihzLmVudGl0eUNvbnRhaW5lcil7cS5lYWNoKHMuZW50aXR5Q29udGFpbmVyLGZ1bmN0aW9uKGssbyl7aWYoby5lbnRpdHlTZXQpe3EuZWFjaChvLmVudGl0eVNldCxmdW5jdGlvbihqLGEpe2lmKGEubmFtZT09PWMpe2U9YS5lbnRpdHlUeXBlO3JldHVybiBmYWxzZX19KX19KX19KX1yZXR1cm4gZX07Ty5wcm90b3R5cGUuX2dldE9iamVjdE1ldGFkYXRhPWZ1bmN0aW9uKG8scyxuKXt2YXIgYTtpZihzJiZuKXtxLmVhY2godGhpcy5vTWV0YWRhdGEuZGF0YVNlcnZpY2VzLnNjaGVtYSxmdW5jdGlvbihpLFMpe2lmKFNbb10mJlMubmFtZXNwYWNlPT09bil7cS5lYWNoKFNbb10sZnVuY3Rpb24oaixjKXtpZihjLm5hbWU9PT1zKXthPWM7YS5uYW1lc3BhY2U9Uy5uYW1lc3BhY2U7cmV0dXJuIGZhbHNlfX0pO3JldHVybiFhfX0pfXJldHVybiBhfTtPLnByb3RvdHlwZS5nZXRVc2VCYXRjaD1mdW5jdGlvbigpe3ZhciB1PWZhbHNlO3EuZWFjaCh0aGlzLm9NZXRhZGF0YS5kYXRhU2VydmljZXMuc2NoZW1hLGZ1bmN0aW9uKGkscyl7aWYocy5lbnRpdHlDb250YWluZXIpe3EuZWFjaChzLmVudGl0eUNvbnRhaW5lcixmdW5jdGlvbihrLGUpe2lmKGUuZXh0ZW5zaW9ucyl7cS5lYWNoKGUuZXh0ZW5zaW9ucyxmdW5jdGlvbihsLG8pe2lmKG8ubmFtZT09PSJ1c2UtYmF0Y2giJiZvLm5hbWVzcGFjZT09PSJodHRwOi8vd3d3LnNhcC5jb20vUHJvdG9jb2xzL1NBUERhdGEiKXt1PSh0eXBlb2Ygby52YWx1ZT09PSdzdHJpbmcnKT8oby52YWx1ZS50b0xvd2VyQ2FzZSgpPT09J3RydWUnKTohIW8udmFsdWU7cmV0dXJuIGZhbHNlfX0pfX0pfX0pO3JldHVybiB1fTtPLnByb3RvdHlwZS5fZ2V0RnVuY3Rpb25JbXBvcnRNZXRhZGF0YT1mdW5jdGlvbihmLG0pe3ZhciBvPW51bGw7cS5lYWNoKHRoaXMub01ldGFkYXRhLmRhdGFTZXJ2aWNlcy5zY2hlbWEsZnVuY3Rpb24oaSxzKXtpZihzWyJlbnRpdHlDb250YWluZXIiXSl7cS5lYWNoKHNbImVudGl0eUNvbnRhaW5lciJdLGZ1bmN0aW9uKGosZSl7aWYoZVsiZnVuY3Rpb25JbXBvcnQiXSl7cS5lYWNoKGVbImZ1bmN0aW9uSW1wb3J0Il0sZnVuY3Rpb24oayxGKXtpZihGLm5hbWU9PT1mJiZGLmh0dHBNZXRob2Q9PT1tKXtvPUY7cmV0dXJuIGZhbHNlfX0pfXJldHVybiFvfSl9cmV0dXJuIW99KTtyZXR1cm4gb307Ty5wcm90b3R5cGUuX2dldEVudGl0eVR5cGVCeU5hdlByb3BlcnR5PWZ1bmN0aW9uKGUsbil7dmFyIHQ9dGhpcyxhLEEsYixOO3EuZWFjaChlLm5hdmlnYXRpb25Qcm9wZXJ0eSxmdW5jdGlvbihrLG8pe2lmKG8ubmFtZT09PW4pe2E9dC5fc3BsaXROYW1lKG8ucmVsYXRpb25zaGlwKTtBPXQuX2dldE9iamVjdE1ldGFkYXRhKCJhc3NvY2lhdGlvbiIsYVswXSxhWzFdKTtpZihBKXt2YXIgYz1BLmVuZFswXTtpZihjLnJvbGUhPT1vLnRvUm9sZSl7Yz1BLmVuZFsxXX1iPXQuX3NwbGl0TmFtZShjLnR5cGUpO049dC5fZ2V0T2JqZWN0TWV0YWRhdGEoImVudGl0eVR5cGUiLGJbMF0sYlsxXSk7aWYoTil7Ti5lbnRpdHlUeXBlPWMudHlwZX1yZXR1cm4gZmFsc2V9fX0pO3JldHVybiBOfTtPLnByb3RvdHlwZS5fZ2V0TmF2aWdhdGlvblByb3BlcnR5TmFtZXM9ZnVuY3Rpb24oZSl7dmFyIG49W107aWYoZS5uYXZpZ2F0aW9uUHJvcGVydHkpe3EuZWFjaChlLm5hdmlnYXRpb25Qcm9wZXJ0eSxmdW5jdGlvbihrLE4pe24ucHVzaChOLm5hbWUpfSl9cmV0dXJuIG59O08ucHJvdG90eXBlLl9nZXRQcm9wZXJ0eU1ldGFkYXRhPWZ1bmN0aW9uKGUscCl7dmFyIFAsdD10aGlzO2lmKCFlKXJldHVybjtwPXAucmVwbGFjZSgvXlwvfFwvJC9nLCIiKTt2YXIgYT1wLnNwbGl0KCIvIik7cS5lYWNoKGUucHJvcGVydHksZnVuY3Rpb24oayxiKXtpZihiLm5hbWU9PT1hWzBdKXtQPWI7cmV0dXJuIGZhbHNlfX0pO2lmKFAmJmEubGVuZ3RoPjEmJiFxLnNhcC5zdGFydHNXaXRoKFAudHlwZS50b0xvd2VyQ2FzZSgpLCJlZG0uIikpe3ZhciBuPXRoaXMuX3NwbGl0TmFtZShQLnR5cGUpO1A9dGhpcy5fZ2V0UHJvcGVydHlNZXRhZGF0YSh0aGlzLl9nZXRPYmplY3RNZXRhZGF0YSgiY29tcGxleFR5cGUiLG5bMF0sblsxXSksYVsxXSl9aWYoIVAmJmEubGVuZ3RoPjEpe3ZhciBvPXRoaXMuX2dldEVudGl0eVR5cGVCeU5hdlByb3BlcnR5KGUsYVswXSk7aWYobyl7UD10Ll9nZXRQcm9wZXJ0eU1ldGFkYXRhKG8sYVsxXSl9fXJldHVybiBQfTtPLnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKCl7ZGVsZXRlIHRoaXMub01ldGFkYXRhO2lmKHRoaXMub1JlcXVlc3RIYW5kbGUpe3RoaXMub1JlcXVlc3RIYW5kbGUuYlN1cHByZXNzRXJyb3JIYW5kbGVyQ2FsbD10cnVlO3RoaXMub1JlcXVlc3RIYW5kbGUuYWJvcnQoKTt0aGlzLm9SZXF1ZXN0SGFuZGxlPW51bGx9aWYoISF0aGlzLm9Mb2FkRXZlbnQpe3Euc2FwLmNsZWFyRGVsYXllZENhbGwodGhpcy5vTG9hZEV2ZW50KX1pZighIXRoaXMub0ZhaWxlZEV2ZW50KXtxLnNhcC5jbGVhckRlbGF5ZWRDYWxsKHRoaXMub0ZhaWxlZEV2ZW50KX1zYXAudWkuYmFzZS5PYmplY3QucHJvdG90eXBlLmRlc3Ryb3kuYXBwbHkodGhpcyxhcmd1bWVudHMpfTtPLnByb3RvdHlwZS5fY3JlYXRlUmVxdWVzdD1mdW5jdGlvbih1KXt2YXIgaD17fSxsPXsiQWNjZXB0LUxhbmd1YWdlIjpzYXAudWkuZ2V0Q29yZSgpLmdldENvbmZpZ3VyYXRpb24oKS5nZXRMYW5ndWFnZSgpfTtxLmV4dGVuZChoLHRoaXMubUhlYWRlcnMsbCk7dmFyIHI9e2hlYWRlcnM6aCxyZXF1ZXN0VXJpOnUsbWV0aG9kOidHRVQnLHVzZXI6dGhpcy5zVXNlcixwYXNzd29yZDp0aGlzLnNQYXNzd29yZCxhc3luYzp0aGlzLmJBc3luY307aWYodGhpcy5iQXN5bmMpe3Iud2l0aENyZWRlbnRpYWxzPXRoaXMuYldpdGhDcmVkZW50aWFsc31yZXR1cm4gcn07cmV0dXJuIE99LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkubW9kZWwub2RhdGEuT0RhdGFUcmVlQmluZGluZycpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5tb2RlbC5vZGF0YS5PRGF0YVRyZWVCaW5kaW5nJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL21vZGVsL29kYXRhL09EYXRhVHJlZUJpbmRpbmciLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvbW9kZWwvVHJlZUJpbmRpbmcnXSxmdW5jdGlvbihxLFQpeyJ1c2Ugc3RyaWN0Ijt2YXIgTz1ULmV4dGVuZCgic2FwLnVpLm1vZGVsLm9kYXRhLk9EYXRhVHJlZUJpbmRpbmciLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbihtLHAsYyxmLFApe1QuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMuYlBlbmRpbmdSZXF1ZXN0PWZhbHNlO3RoaXMub0ZpbmFsTGVuZ3Rocz17fTt0aGlzLm9MZW5ndGhzPXt9O3RoaXMub0tleXM9e307dGhpcy5iTmVlZHNVcGRhdGU9ZmFsc2U7aWYoIVB8fCFQLm5hdmlnYXRpb24pe3Euc2FwLmxvZy5lcnJvcigiQSBuYXZpZ2F0aW9uIHBhdGhzIHBhcmFtZXRlciBvYmplY3QgaGFzIHRvIGJlIGRlZmluZWQiKTt0aGlzLm9OYXZpZ2F0aW9uUGF0aHM9e319ZWxzZXt0aGlzLm9OYXZpZ2F0aW9uUGF0aHM9UC5uYXZpZ2F0aW9ufX19KTtPLnByb3RvdHlwZS5nZXRSb290Q29udGV4dHM9ZnVuY3Rpb24oKXt2YXIgbj10aGlzLl9nZXROYXZQYXRoKHRoaXMuc1BhdGgpLGE9dGhpcy5vTW9kZWwucmVzb2x2ZSh0aGlzLnNQYXRoLHRoaXMuZ2V0Q29udGV4dCgpKSx0PXRoaXMsYztpZighYSl7cmV0dXJuW119aWYoIXRoaXMub01vZGVsLmlzTGlzdCh0aGlzLnNQYXRoLHRoaXMuZ2V0Q29udGV4dCgpKSl7aWYodGhpcy5iRGlzcGxheVJvb3ROb2RlKXt0aGlzLm9Nb2RlbC5jcmVhdGVCaW5kaW5nQ29udGV4dChhLG51bGwse2V4cGFuZDpufSxmdW5jdGlvbihOKXtjPU47aWYodC5vUm9vdENvbnRleHQhPT1OKXt0Lm9Sb290Q29udGV4dD1OO3QuYk5lZWRzVXBkYXRlPXRydWV9ZWxzZXt2YXIgZD10Lm9Nb2RlbC5vRGF0YVtjLmdldFBhdGgoKS5zdWJzdHIoMSldO3QuX3Byb2Nlc3NPRGF0YU9iamVjdChkLGMuZ2V0UGF0aCgpLG4pfX0sZmFsc2UpO2lmKGMpe3JldHVybltjXX1lbHNle3JldHVybltdfX1lbHNle2M9dGhpcy5vTW9kZWwuZ2V0Q29udGV4dCh0aGlzLnNQYXRoKTtyZXR1cm4gdGhpcy5nZXROb2RlQ29udGV4dHMoYyl9fWVsc2V7cmV0dXJuIHRoaXMuX2dldENvbnRleHRzRm9yUGF0aChhLG4pfX07Ty5wcm90b3R5cGUuZ2V0Tm9kZUNvbnRleHRzPWZ1bmN0aW9uKGMpe3ZhciBuPXRoaXMuX2dldE5hdlBhdGgoYy5nZXRQYXRoKCkpLGE7aWYoIW4pe3JldHVybltdfWE9dGhpcy5vTW9kZWwucmVzb2x2ZShuLGMpO249dGhpcy5vTmF2aWdhdGlvblBhdGhzW25dO3JldHVybiB0aGlzLl9nZXRDb250ZXh0c0ZvclBhdGgoYSxuKX07Ty5wcm90b3R5cGUuaGFzQ2hpbGRyZW49ZnVuY3Rpb24oYyl7cmV0dXJuIGMmJnRoaXMub0xlbmd0aHNbYy5nZXRQYXRoKCldPjB9O08ucHJvdG90eXBlLl9nZXRDb250ZXh0c0ZvclBhdGg9ZnVuY3Rpb24oYSxuKXt2YXIgYz1bXSxsPXRoaXMub01vZGVsLmlTaXplTGltaXQsTCxrO2lmKHRoaXMub0ZpbmFsTGVuZ3RocyYmdGhpcy5vRmluYWxMZW5ndGhzW2FdJiZ0aGlzLm9MZW5ndGhzW2FdPGwpe2w9dGhpcy5vTGVuZ3Roc1thXX1pZih0aGlzLm9LZXlzW2FdKXtmb3IodmFyIGk9MDtpPGw7aSsrKXtrPXRoaXMub0tleXNbYV1baV07aWYoIWspe2JyZWFrfWMucHVzaCh0aGlzLm9Nb2RlbC5nZXRDb250ZXh0KCcvJytrKSl9fUw9Yy5sZW5ndGghPWwmJiEodGhpcy5vRmluYWxMZW5ndGhzW2FdJiZjLmxlbmd0aD49dGhpcy5vTGVuZ3Roc1thXSk7aWYodGhpcy5vTW9kZWwuZ2V0U2VydmljZU1ldGFkYXRhKCkpe2lmKCF0aGlzLmJQZW5kaW5nUmVxdWVzdCYmTCl7dGhpcy5sb2FkU3ViTm9kZXMoYSxuKX19cmV0dXJuIGN9O08ucHJvdG90eXBlLmxvYWRTdWJOb2Rlcz1mdW5jdGlvbihhLG4pe3ZhciB0PXRoaXMscD1bXTtpZihuKXtwLnB1c2goIiRleHBhbmQ9IituKX1mdW5jdGlvbiBzKGQpe3Qub0xlbmd0aHNbYV09ZC5yZXN1bHRzLmxlbmd0aDt0Lm9GaW5hbExlbmd0aHNbYV09dHJ1ZTt0Lm9LZXlzW2FdPVtdO2Zvcih2YXIgaT0wO2k8ZC5yZXN1bHRzLmxlbmd0aDtpKyspe3ZhciBFPWQucmVzdWx0c1tpXTt0Ll9wcm9jZXNzT0RhdGFPYmplY3QoRSxhLG4pO3Qub0tleXNbYV0ucHVzaCh0Lm9Nb2RlbC5fZ2V0S2V5KEUpKX10Lm9SZXF1ZXN0SGFuZGxlPW51bGw7dC5iUGVuZGluZ1JlcXVlc3Q9ZmFsc2U7dC5iTmVlZHNVcGRhdGU9dHJ1ZX1mdW5jdGlvbiBjKCl7dC5maXJlRGF0YVJlY2VpdmVkKCl9ZnVuY3Rpb24gZShkKXt0Lm9SZXF1ZXN0SGFuZGxlPW51bGw7dC5iUGVuZGluZ1JlcXVlc3Q9ZmFsc2U7dC5maXJlRGF0YVJlY2VpdmVkKCl9ZnVuY3Rpb24gdShoKXt0Lm9SZXF1ZXN0SGFuZGxlPWh9aWYoYSl7aWYoIXRoaXMub0ZpbmFsTGVuZ3Roc1thXSl7dGhpcy5iUGVuZGluZ1JlcXVlc3Q9dHJ1ZTt0aGlzLmZpcmVEYXRhUmVxdWVzdGVkKCk7dGhpcy5vTW9kZWwuX2xvYWREYXRhKGEscCxzLGUsZmFsc2UsdSxjKX19fTtPLnByb3RvdHlwZS5yZXNldERhdGE9ZnVuY3Rpb24oYyl7aWYoYyl7dmFyIHA9Yy5nZXRQYXRoKCk7ZGVsZXRlIHRoaXMub0tleXNbcF07ZGVsZXRlIHRoaXMub0xlbmd0aHNbcF07ZGVsZXRlIHRoaXMub0ZpbmFsTGVuZ3Roc1twXX1lbHNle3RoaXMub0tleXM9e307dGhpcy5vTGVuZ3Rocz17fTt0aGlzLm9GaW5hbExlbmd0aHM9e319fTtPLnByb3RvdHlwZS5yZWZyZXNoPWZ1bmN0aW9uKGYsYyxlKXt2YXIgQz1mYWxzZTtpZighZil7aWYoZSl7dmFyIHI9dGhpcy5vTW9kZWwucmVzb2x2ZSh0aGlzLnNQYXRoLHRoaXMub0NvbnRleHQpO3ZhciBFPXRoaXMub01vZGVsLm9NZXRhZGF0YS5fZ2V0RW50aXR5VHlwZUJ5UGF0aChyKTtpZihFJiYoRS5lbnRpdHlUeXBlIGluIGUpKXtDPXRydWV9fWlmKGMmJiFDKXtxLmVhY2godGhpcy5vS2V5cyxmdW5jdGlvbihpLG4pe3EuZWFjaChuLGZ1bmN0aW9uKGksayl7aWYoayBpbiBjKXtDPXRydWU7cmV0dXJuIGZhbHNlfX0pO2lmKEMpcmV0dXJuIGZhbHNlfSl9aWYoIWMmJiFlKXtDPXRydWV9fWlmKGZ8fEMpe3RoaXMucmVzZXREYXRhKCk7dGhpcy5iTmVlZHNVcGRhdGU9ZmFsc2U7dGhpcy5fZmlyZUNoYW5nZSgpfX07Ty5wcm90b3R5cGUuZmlsdGVyPWZ1bmN0aW9uKGYpe3Euc2FwLmxvZy53YXJuaW5nKCJGaWx0ZXJpbmcgaXMgY3VycmVudGx5IG5vdCBwb3NzaWJsZSBpbiB0aGUgT0RhdGFUcmVlQmluZGluZyIpO3JldHVybiB0aGlzfTtPLnByb3RvdHlwZS5jaGVja1VwZGF0ZT1mdW5jdGlvbihmLGMpe3ZhciBDPWZhbHNlO2lmKCFmKXtpZih0aGlzLmJOZWVkc1VwZGF0ZXx8IWMpe0M9dHJ1ZX1lbHNle3EuZWFjaCh0aGlzLm9LZXlzLGZ1bmN0aW9uKGksbil7cS5lYWNoKG4sZnVuY3Rpb24oaSxrKXtpZihrIGluIGMpe0M9dHJ1ZTtyZXR1cm4gZmFsc2V9fSk7aWYoQylyZXR1cm4gZmFsc2V9KX19aWYoZnx8Qyl7dGhpcy5iTmVlZHNVcGRhdGU9ZmFsc2U7dGhpcy5fZmlyZUNoYW5nZSgpfX07Ty5wcm90b3R5cGUuX2dldE5hdlBhdGg9ZnVuY3Rpb24ocCl7dmFyIGE9dGhpcy5vTW9kZWwucmVzb2x2ZShwLHRoaXMuZ2V0Q29udGV4dCgpKTtpZighYSl7cmV0dXJufXZhciBQPWEuc3BsaXQoIi8iKSxlPVBbUC5sZW5ndGgtMV0sbjt2YXIgYz1lLnNwbGl0KCIoIilbMF07aWYoYyYmdGhpcy5vTmF2aWdhdGlvblBhdGhzW2NdKXtuPXRoaXMub05hdmlnYXRpb25QYXRoc1tjXX1yZXR1cm4gbn07Ty5wcm90b3R5cGUuX3Byb2Nlc3NPRGF0YU9iamVjdD1mdW5jdGlvbihvLGEsbil7dmFyIGs9dGhpcy5vTW9kZWwuX2dldEtleShvKSxjPXRoaXMub01vZGVsLmdldENvbnRleHQoIi8iK2spLHA9Yy5nZXRQYXRoKCk7dmFyIHI9dGhpcy5vTW9kZWwuX2dldE9iamVjdChuLGMpO2lmKHEuaXNBcnJheShyKSl7dGhpcy5vS2V5c1twXT1yO3RoaXMub0xlbmd0aHNbcF09ci5sZW5ndGg7dGhpcy5vRmluYWxMZW5ndGhzW3BdPXRydWV9ZWxzZSBpZih0eXBlb2Ygcj09PSJvYmplY3QiKXt0aGlzLm9LZXlzW3BdPVtyXTt0aGlzLm9MZW5ndGhzW3BdPTA7dGhpcy5vRmluYWxMZW5ndGhzW3BdPXRydWV9ZWxzZXtpZihuJiZvW25dLl9fbGlzdCl7dGhpcy5vS2V5c1twXT1vW25dLl9fbGlzdDt0aGlzLm9MZW5ndGhzW3BdPXRoaXMub0tleXNbcF0ubGVuZ3RoO3RoaXMub0ZpbmFsTGVuZ3Roc1twXT10cnVlfWVsc2V7dGhpcy5vS2V5c1thXT1bXTt0aGlzLm9MZW5ndGhzW2FdPTA7dGhpcy5vRmluYWxMZW5ndGhzW2FdPWZhbHNlfX19O3JldHVybiBPfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLm1vZGVsLm9kYXRhLk9EYXRhVXRpbHMnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkubW9kZWwub2RhdGEuT0RhdGFVdGlscycpO3NhcC51aS5kZWZpbmUoInNhcC91aS9tb2RlbC9vZGF0YS9PRGF0YVV0aWxzIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnLi9GaWx0ZXInLCdzYXAvdWkvbW9kZWwvU29ydGVyJywnc2FwL3VpL21vZGVsL0ZpbHRlcicsJ3NhcC91aS9jb3JlL2Zvcm1hdC9EYXRlRm9ybWF0J10sZnVuY3Rpb24ocSxPLFMsRixEKXsidXNlIHN0cmljdCI7dmFyIGE9ZnVuY3Rpb24oKXt9O2EuY3JlYXRlU29ydFBhcmFtcz1mdW5jdGlvbihzKXt2YXIgYjtpZighc3x8cy5sZW5ndGg9PTApe3JldHVybn1iPSIkb3JkZXJieT0iO2Zvcih2YXIgaT0wO2k8cy5sZW5ndGg7aSsrKXt2YXIgbz1zW2ldO2lmKG8gaW5zdGFuY2VvZiBTKXtiKz1vLnNQYXRoO2IrPW8uYkRlc2NlbmRpbmc/IiUyMGRlc2MiOiIlMjBhc2MiO2IrPSIsIn19Yj1iLnNsaWNlKDAsLTEpO3JldHVybiBifTthLmNyZWF0ZUZpbHRlclBhcmFtcz1mdW5jdGlvbihmLG0sZSl7aWYoIWZ8fGYubGVuZ3RoPT0wKXtyZXR1cm59cmV0dXJuIiRmaWx0ZXI9Iit0aGlzLl9jcmVhdGVGaWx0ZXJQYXJhbXMoZixtLGUpfTthLl9jcmVhdGVGaWx0ZXJQYXJhbXM9ZnVuY3Rpb24oZixtLGUpe3ZhciBzO2lmKCFmfHxmLmxlbmd0aD09MCl7cmV0dXJufXZhciBvPXt9LGI9MCxjLHM9IiIsZD0wLE0sdD10aGlzO3EuZWFjaChmLGZ1bmN0aW9uKGosZyl7aWYoZy5zUGF0aCl7Yz1vW2cuc1BhdGhdO2lmKCFjKXtjPW9bZy5zUGF0aF09W107YisrfX1lbHNle2M9b1siX19tdWx0aUZpbHRlciJdO2lmKCFjKXtjPW9bIl9fbXVsdGlGaWx0ZXIiXT1bXTtiKyt9fWMucHVzaChnKX0pO3EuZWFjaChvLGZ1bmN0aW9uKHAsYyl7aWYoYy5sZW5ndGg+MSl7cys9JygnfXEuZWFjaChjLGZ1bmN0aW9uKGksZyl7aWYoZyBpbnN0YW5jZW9mIE8pe2lmKGcuYVZhbHVlcy5sZW5ndGg+MSl7cys9JygnfXEuZWFjaChnLmFWYWx1ZXMsZnVuY3Rpb24oaSxoKXtpZihpPjApe2lmKGcuYkFORCl7cys9IiUyMGFuZCUyMCJ9ZWxzZXtzKz0iJTIwb3IlMjAifX1zPXQuX2NyZWF0ZUZpbHRlclNlZ21lbnQoZy5zUGF0aCxtLGUsaC5vcGVyYXRvcixoLnZhbHVlMSxoLnZhbHVlMixzKX0pO2lmKGcuYVZhbHVlcy5sZW5ndGg+MSl7cys9JyknfX1lbHNlIGlmKGcuX2JNdWx0aUZpbHRlcil7cys9dC5fcmVzb2x2ZU11bHRpRmlsdGVyKGcsbSxlKX1lbHNle3M9dC5fY3JlYXRlRmlsdGVyU2VnbWVudChnLnNQYXRoLG0sZSxnLnNPcGVyYXRvcixnLm9WYWx1ZTEsZy5vVmFsdWUyLHMpfWlmKGk8Yy5sZW5ndGgtMSl7cys9IiUyMG9yJTIwIn19KTtpZihjLmxlbmd0aD4xKXtzKz0nKSd9aWYoZDxiLTEpe3MrPSIlMjBhbmQlMjAifWQrK30pO3JldHVybiBzfTthLl9jcmVhdGVVcmxQYXJhbXNBcnJheT1mdW5jdGlvbihwKXt2YXIgdSx0PXEudHlwZShwKTtpZih0PT09ImFycmF5Iil7cmV0dXJuIHB9dT1bXTtpZih0PT09Im9iamVjdCIpe3UucHVzaChxLnNhcC5lbmNvZGVVUkxQYXJhbWV0ZXJzKHApKX1lbHNlIGlmKHQ9PT0ic3RyaW5nIil7dS5wdXNoKHApfXJldHVybiB1fTthLl9yZXNvbHZlTXVsdGlGaWx0ZXI9ZnVuY3Rpb24obSxNLGUpe3ZhciB0PXRoaXMsZj1tLmFGaWx0ZXJzLHM9IiI7aWYoZil7cys9IigiO3EuZWFjaChmLGZ1bmN0aW9uKGksbyl7dmFyIGw9ZmFsc2U7aWYoby5fYk11bHRpRmlsdGVyKXtzKz10Ll9yZXNvbHZlTXVsdGlGaWx0ZXIobyxNLGUpfWVsc2UgaWYoby5zUGF0aCl7cys9dC5fY3JlYXRlRmlsdGVyU2VnbWVudChvLnNQYXRoLE0sZSxvLnNPcGVyYXRvcixvLm9WYWx1ZTEsby5vVmFsdWUyLCIiKX1pZihpPChmLmxlbmd0aC0xKSl7aWYobS5iQW5kKXtzKz0iJTIwYW5kJTIwIn1lbHNle3MrPSIlMjBvciUyMCJ9fX0pO3MrPSIpIn1yZXR1cm4gc307YS5fY3JlYXRlRmlsdGVyU2VnbWVudD1mdW5jdGlvbihwLG0sZSxvLHYsVixmKXt2YXIgUCx0O2lmKGUpe1A9bS5fZ2V0UHJvcGVydHlNZXRhZGF0YShlLHApO3Q9UCYmUC50eXBlO31pZih0KXt2PXRoaXMuZm9ybWF0VmFsdWUodix0KTtWPShWIT1udWxsKT90aGlzLmZvcm1hdFZhbHVlKFYsdCk6bnVsbH1lbHNle31pZih2KXt2PXEuc2FwLmVuY29kZVVSTChTdHJpbmcodikpfWlmKFYpe1Y9cS5zYXAuZW5jb2RlVVJMKFN0cmluZyhWKSl9c3dpdGNoKG8pe2Nhc2UiRVEiOmNhc2UiTkUiOmNhc2UiR1QiOmNhc2UiR0UiOmNhc2UiTFQiOmNhc2UiTEUiOmYrPXArIiUyMCIrby50b0xvd2VyQ2FzZSgpKyIlMjAiK3Y7YnJlYWs7Y2FzZSJCVCI6Zis9IigiK3ArIiUyMGdlJTIwIit2KyIlMjBhbmQlMjAiK3ArIiUyMGxlJTIwIitWKyIpIjticmVhaztjYXNlIkNvbnRhaW5zIjpmKz0ic3Vic3RyaW5nb2YoIit2KyIsIitwKyIpIjticmVhaztjYXNlIlN0YXJ0c1dpdGgiOmYrPSJzdGFydHN3aXRoKCIrcCsiLCIrdisiKSI7YnJlYWs7Y2FzZSJFbmRzV2l0aCI6Zis9ImVuZHN3aXRoKCIrcCsiLCIrdisiKSI7YnJlYWs7ZGVmYXVsdDpmKz0idHJ1ZSJ9cmV0dXJuIGZ9O2EuZm9ybWF0VmFsdWU9ZnVuY3Rpb24odix0KXtpZighdGhpcy5vRGF0ZVRpbWVGb3JtYXQpe3RoaXMub0RhdGVUaW1lRm9ybWF0PUQuZ2V0RGF0ZUluc3RhbmNlKHtwYXR0ZXJuOiInZGF0ZXRpbWUnJyd5eXl5LU1NLWRkJ1QnSEg6bW06c3MnJyJ9KTt0aGlzLm9EYXRlVGltZU9mZnNldEZvcm1hdD1ELmdldERhdGVJbnN0YW5jZSh7cGF0dGVybjoiJ2RhdGV0aW1lb2Zmc2V0JycneXl5eS1NTS1kZCdUJ0hIOm1tOnNzJ1onJycifSk7dGhpcy5vVGltZUZvcm1hdD1ELmdldFRpbWVJbnN0YW5jZSh7cGF0dGVybjoiJ3RpbWUnJydISDptbTpzcycnIn0pfWlmKHY9PT1udWxsfHx2PT09dW5kZWZpbmVkKXtyZXR1cm4ibnVsbCJ9dmFyIFY7c3dpdGNoKHQpe2Nhc2UiRWRtLlN0cmluZyI6Vj0iJyIrU3RyaW5nKHYpLnJlcGxhY2UoLycvZywiJyciKSsiJyI7YnJlYWs7Y2FzZSJFZG0uVGltZSI6Vj0idGltZSciK3YrIiciO2JyZWFrO2Nhc2UiRWRtLkRhdGVUaW1lIjpWPXRoaXMub0RhdGVUaW1lRm9ybWF0LmZvcm1hdChuZXcgRGF0ZSh2KSx0cnVlKTticmVhaztjYXNlIkVkbS5EYXRlVGltZU9mZnNldCI6Vj10aGlzLm9EYXRlVGltZU9mZnNldEZvcm1hdC5mb3JtYXQobmV3IERhdGUodiksdHJ1ZSk7YnJlYWs7Y2FzZSJFZG0uR3VpZCI6Vj0iZ3VpZCciK3YrIiciO2JyZWFrO2Nhc2UiRWRtLkRlY2ltYWwiOlY9disiTSI7YnJlYWs7Y2FzZSJFZG0uSW50NjQiOlY9disiTCI7YnJlYWs7Y2FzZSJFZG0uU2luZ2xlIjpWPXYrImYiO2JyZWFrO2Nhc2UiRWRtLkJpbmFyeSI6Vj0iYmluYXJ5JyIrdisiJyI7YnJlYWs7ZGVmYXVsdDpWPW5ldyBTdHJpbmcodik7YnJlYWt9cmV0dXJuIFZ9O3JldHVybiBhfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLm1vZGVsLnR5cGUuQm9vbGVhbicpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5tb2RlbC50eXBlLkJvb2xlYW4nKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvbW9kZWwvdHlwZS9Cb29sZWFuIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL2NvcmUvZm9ybWF0L051bWJlckZvcm1hdCcsJ3NhcC91aS9tb2RlbC9TaW1wbGVUeXBlJ10sZnVuY3Rpb24ocSxOLFMpeyJ1c2Ugc3RyaWN0Ijt2YXIgQj1TLmV4dGVuZCgic2FwLnVpLm1vZGVsLnR5cGUuQm9vbGVhbiIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKCl7Uy5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5zTmFtZT0iQm9vbGVhbiJ9fSk7Qi5wcm90b3R5cGUuZm9ybWF0VmFsdWU9ZnVuY3Rpb24odixpKXtpZih2PT11bmRlZmluZWR8fHY9PW51bGwpe3JldHVybiBudWxsfXN3aXRjaChpKXtjYXNlImJvb2xlYW4iOnJldHVybiB2O2Nhc2Uic3RyaW5nIjpyZXR1cm4gdi50b1N0cmluZygpO2Nhc2UiaW50IjpjYXNlImZsb2F0IjpkZWZhdWx0OnRocm93IG5ldyBzYXAudWkubW9kZWwuRm9ybWF0RXhjZXB0aW9uKCJEb24ndCBrbm93IGhvdyB0byBmb3JtYXQgQm9vbGVhbiB0byAiK2kpfX07Qi5wcm90b3R5cGUucGFyc2VWYWx1ZT1mdW5jdGlvbih2LGkpe3ZhciByO3N3aXRjaChpKXtjYXNlImJvb2xlYW4iOnJldHVybiB2O2Nhc2Uic3RyaW5nIjppZih2LnRvTG93ZXJDYXNlKCk9PSJ0cnVlInx8dj09IlgiKXtyZXR1cm4gdHJ1ZX1pZih2LnRvTG93ZXJDYXNlKCk9PSJmYWxzZSJ8fHY9PSIiKXtyZXR1cm4gZmFsc2V9dGhyb3cgbmV3IHNhcC51aS5tb2RlbC5QYXJzZUV4Y2VwdGlvbigiRG9uJ3Qga25vdyBob3cgdG8gcGFyc2UgQm9vbGVhbiBmcm9tICIraSk7Y2FzZSJpbnQiOmNhc2UiZmxvYXQiOmRlZmF1bHQ6dGhyb3cgbmV3IHNhcC51aS5tb2RlbC5QYXJzZUV4Y2VwdGlvbigiRG9uJ3Qga25vdyBob3cgdG8gcGFyc2UgQm9vbGVhbiBmcm9tICIraSl9fTtCLnByb3RvdHlwZS52YWxpZGF0ZVZhbHVlPWZ1bmN0aW9uKHYpe307cmV0dXJuIEJ9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkubW9kZWwudHlwZS5EYXRlJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLm1vZGVsLnR5cGUuRGF0ZScpO3NhcC51aS5kZWZpbmUoInNhcC91aS9tb2RlbC90eXBlL0RhdGUiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvY29yZS9mb3JtYXQvRGF0ZUZvcm1hdCcsJ3NhcC91aS9tb2RlbC9TaW1wbGVUeXBlJ10sZnVuY3Rpb24ocSxELFMpeyJ1c2Ugc3RyaWN0Ijt2YXIgYT1TLmV4dGVuZCgic2FwLnVpLm1vZGVsLnR5cGUuRGF0ZSIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKCl7Uy5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5zTmFtZT0iRGF0ZSJ9fSk7YS5wcm90b3R5cGUuZm9ybWF0VmFsdWU9ZnVuY3Rpb24odixpKXtzd2l0Y2goaSl7Y2FzZSJzdHJpbmciOmlmKHY9PW51bGwpe3JldHVybiIifWlmKHRoaXMub0lucHV0Rm9ybWF0KXtpZih0aGlzLm9Gb3JtYXRPcHRpb25zLnNvdXJjZS5wYXR0ZXJuPT0idGltZXN0YW1wIil7aWYodHlwZW9mKHYpIT0ibnVtYmVyIil7aWYoaXNOYU4odikpe3Rocm93IG5ldyBzYXAudWkubW9kZWwuRm9ybWF0RXhjZXB0aW9uKCJDYW5ub3QgZm9ybWF0IGRhdGU6ICIrdisiIGlzIG5vdCBhIHZhbGlkIFRpbWVzdGFtcCIpfWVsc2V7dj1wYXJzZUludCh2LDEwKX19dj1uZXcgRGF0ZSh2KX1lbHNle2lmKHY9PSIiKXtyZXR1cm4iIn12PXRoaXMub0lucHV0Rm9ybWF0LnBhcnNlKHYpO2lmKHY9PW51bGwpe3Rocm93IG5ldyBzYXAudWkubW9kZWwuRm9ybWF0RXhjZXB0aW9uKCJDYW5ub3QgZm9ybWF0IGRhdGU6ICIrdisiIGhhcyB0aGUgd3JvbmcgZm9ybWF0Iil9fX1yZXR1cm4gdGhpcy5vT3V0cHV0Rm9ybWF0LmZvcm1hdCh2KTtkZWZhdWx0OnRocm93IG5ldyBzYXAudWkubW9kZWwuRm9ybWF0RXhjZXB0aW9uKCJEb24ndCBrbm93IGhvdyB0byBmb3JtYXQgRGF0ZSB0byAiK2kpfX07YS5wcm90b3R5cGUucGFyc2VWYWx1ZT1mdW5jdGlvbih2LGkpe3ZhciByO3N3aXRjaChpKXtjYXNlInN0cmluZyI6aWYodj09PSIiKXtyZXR1cm4gbnVsbH12YXIgcj10aGlzLm9PdXRwdXRGb3JtYXQucGFyc2Uodik7aWYoIXIpe3Rocm93IG5ldyBzYXAudWkubW9kZWwuUGFyc2VFeGNlcHRpb24odisiIGlzIG5vdCBhIHZhbGlkIERhdGUgdmFsdWUiKX1pZih0aGlzLm9JbnB1dEZvcm1hdCl7aWYodGhpcy5vRm9ybWF0T3B0aW9ucy5zb3VyY2UucGF0dGVybj09InRpbWVzdGFtcCIpe3I9ci5nZXRUaW1lKCl9ZWxzZXtyPXRoaXMub0lucHV0Rm9ybWF0LmZvcm1hdChyKX19cmV0dXJuIHI7ZGVmYXVsdDp0aHJvdyBuZXcgc2FwLnVpLm1vZGVsLlBhcnNlRXhjZXB0aW9uKCJEb24ndCBrbm93IGhvdyB0byBwYXJzZSBEYXRlIGZyb20gIitpKX19O2EucHJvdG90eXBlLnZhbGlkYXRlVmFsdWU9ZnVuY3Rpb24odil7aWYodGhpcy5vQ29uc3RyYWludHMpe3ZhciBWPVtdLGk9dGhpcy5vSW5wdXRGb3JtYXQ7aWYoaSYmdGhpcy5vRm9ybWF0T3B0aW9ucy5zb3VyY2UucGF0dGVybiE9InRpbWVzdGFtcCIpe3Y9aS5wYXJzZSh2KX1xLmVhY2godGhpcy5vQ29uc3RyYWludHMsZnVuY3Rpb24obixjKXtpZihpKXtjPWkucGFyc2UoYyl9c3dpdGNoKG4pe2Nhc2UibWluaW11bSI6aWYodjxjKXtWLnB1c2goIm1pbmltdW0iKX1icmVhaztjYXNlIm1heGltdW0iOmlmKHY+Yyl7Vi5wdXNoKCJtYXhpbXVtIil9fX0pO2lmKFYubGVuZ3RoPjApe3Rocm93IG5ldyBzYXAudWkubW9kZWwuVmFsaWRhdGVFeGNlcHRpb24oIlZhbGlkYXRpb24gb2YgdHlwZSBjb25zdHJhaW50cyBmYWlsZWQiLFYpfX19O2EucHJvdG90eXBlLnNldEZvcm1hdE9wdGlvbnM9ZnVuY3Rpb24oZil7dGhpcy5vRm9ybWF0T3B0aW9ucz1mO3RoaXMuX2hhbmRsZUxvY2FsaXphdGlvbkNoYW5nZSgpfTthLnByb3RvdHlwZS5nZXRPdXRwdXRQYXR0ZXJuPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub091dHB1dEZvcm1hdC5vRm9ybWF0T3B0aW9ucy5wYXR0ZXJufTthLnByb3RvdHlwZS5faGFuZGxlTG9jYWxpemF0aW9uQ2hhbmdlPWZ1bmN0aW9uKCl7dGhpcy5vT3V0cHV0Rm9ybWF0PUQuZ2V0SW5zdGFuY2UodGhpcy5vRm9ybWF0T3B0aW9ucyk7aWYodGhpcy5vRm9ybWF0T3B0aW9ucy5zb3VyY2Upe3RoaXMub0lucHV0Rm9ybWF0PUQuZ2V0SW5zdGFuY2UodGhpcy5vRm9ybWF0T3B0aW9ucy5zb3VyY2UpfX07cmV0dXJuIGF9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkubW9kZWwudHlwZS5EYXRlVGltZScpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5tb2RlbC50eXBlLkRhdGVUaW1lJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL21vZGVsL3R5cGUvRGF0ZVRpbWUiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCcuL0RhdGUnXSxmdW5jdGlvbihxLEQpeyJ1c2Ugc3RyaWN0Ijt2YXIgYT1ELmV4dGVuZCgic2FwLnVpLm1vZGVsLnR5cGUuRGF0ZVRpbWUiLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbigpe0QuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMuc05hbWU9IkRhdGVUaW1lIn19KTthLnByb3RvdHlwZS5faGFuZGxlTG9jYWxpemF0aW9uQ2hhbmdlPWZ1bmN0aW9uKCl7dGhpcy5vT3V0cHV0Rm9ybWF0PXNhcC51aS5jb3JlLmZvcm1hdC5EYXRlRm9ybWF0LmdldERhdGVUaW1lSW5zdGFuY2UodGhpcy5vRm9ybWF0T3B0aW9ucyk7aWYodGhpcy5vRm9ybWF0T3B0aW9ucy5zb3VyY2Upe3RoaXMub0lucHV0Rm9ybWF0PXNhcC51aS5jb3JlLmZvcm1hdC5EYXRlRm9ybWF0LmdldERhdGVUaW1lSW5zdGFuY2UodGhpcy5vRm9ybWF0T3B0aW9ucy5zb3VyY2UpfX07cmV0dXJuIGF9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkubW9kZWwudHlwZS5GbG9hdCcpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5tb2RlbC50eXBlLkZsb2F0Jyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL21vZGVsL3R5cGUvRmxvYXQiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvY29yZS9mb3JtYXQvTnVtYmVyRm9ybWF0Jywnc2FwL3VpL21vZGVsL1NpbXBsZVR5cGUnXSxmdW5jdGlvbihxLE4sUyl7InVzZSBzdHJpY3QiO3ZhciBGPVMuZXh0ZW5kKCJzYXAudWkubW9kZWwudHlwZS5GbG9hdCIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKCl7Uy5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5zTmFtZT0iRmxvYXQifX0pO0YucHJvdG90eXBlLmZvcm1hdFZhbHVlPWZ1bmN0aW9uKHYsaSl7aWYodj09dW5kZWZpbmVkfHx2PT1udWxsKXtyZXR1cm4gbnVsbH1zd2l0Y2goaSl7Y2FzZSJzdHJpbmciOnJldHVybiB0aGlzLm9Gb3JtYXQuZm9ybWF0KHYpO2Nhc2UiaW50IjpyZXR1cm4gTWF0aC5mbG9vcih2KTtjYXNlImZsb2F0IjpyZXR1cm4gdjtkZWZhdWx0OnRocm93IG5ldyBzYXAudWkubW9kZWwuRm9ybWF0RXhjZXB0aW9uKCJEb24ndCBrbm93IGhvdyB0byBmb3JtYXQgRmxvYXQgdG8gIitpKX19O0YucHJvdG90eXBlLnBhcnNlVmFsdWU9ZnVuY3Rpb24odixpKXt2YXIgcjtzd2l0Y2goaSl7Y2FzZSJzdHJpbmciOnI9dGhpcy5vRm9ybWF0LnBhcnNlKHYpO2lmKGlzTmFOKHIpKXt0aHJvdyBuZXcgc2FwLnVpLm1vZGVsLlBhcnNlRXhjZXB0aW9uKHYrIiBpcyBub3QgYSB2YWxpZCBGbG9hdCB2YWx1ZSIpfXJldHVybiByO2Nhc2UiaW50IjpjYXNlImZsb2F0IjpyZXR1cm4gdjtkZWZhdWx0OnRocm93IG5ldyBzYXAudWkubW9kZWwuUGFyc2VFeGNlcHRpb24oIkRvbid0IGtub3cgaG93IHRvIHBhcnNlIEZsb2F0IGZyb20gIitpKX19O0YucHJvdG90eXBlLnZhbGlkYXRlVmFsdWU9ZnVuY3Rpb24odil7aWYodGhpcy5vQ29uc3RyYWludHMpe3ZhciBWPVtdO3EuZWFjaCh0aGlzLm9Db25zdHJhaW50cyxmdW5jdGlvbihuLGMpe3N3aXRjaChuKXtjYXNlIm1pbmltdW0iOmlmKHY8Yyl7Vi5wdXNoKCJtaW5pbXVtIil9YnJlYWs7Y2FzZSJtYXhpbXVtIjppZih2PmMpe1YucHVzaCgibWF4aW11bSIpfX19KTtpZihWLmxlbmd0aD4wKXt0aHJvdyBuZXcgc2FwLnVpLm1vZGVsLlZhbGlkYXRlRXhjZXB0aW9uKCJWYWxpZGF0aW9uIG9mIHR5cGUgY29uc3RyYWludHMgZmFpbGVkIixWKX19fTtGLnByb3RvdHlwZS5zZXRGb3JtYXRPcHRpb25zPWZ1bmN0aW9uKGYpe3RoaXMub0Zvcm1hdE9wdGlvbnM9Zjt0aGlzLl9oYW5kbGVMb2NhbGl6YXRpb25DaGFuZ2UoKX07Ri5wcm90b3R5cGUuX2hhbmRsZUxvY2FsaXphdGlvbkNoYW5nZT1mdW5jdGlvbigpe3RoaXMub0Zvcm1hdD1OLmdldEZsb2F0SW5zdGFuY2UodGhpcy5vRm9ybWF0T3B0aW9ucyl9O3JldHVybiBGfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLm1vZGVsLnR5cGUuSW50ZWdlcicpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5tb2RlbC50eXBlLkludGVnZXInKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvbW9kZWwvdHlwZS9JbnRlZ2VyIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL2NvcmUvZm9ybWF0L051bWJlckZvcm1hdCcsJ3NhcC91aS9tb2RlbC9TaW1wbGVUeXBlJ10sZnVuY3Rpb24ocSxOLFMpeyJ1c2Ugc3RyaWN0Ijt2YXIgST1TLmV4dGVuZCgic2FwLnVpLm1vZGVsLnR5cGUuSW50ZWdlciIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKCl7Uy5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5zTmFtZT0iSW50ZWdlciJ9fSk7SS5wcm90b3R5cGUuZm9ybWF0VmFsdWU9ZnVuY3Rpb24odixpKXtpZih2PT11bmRlZmluZWR8fHY9PW51bGwpe3JldHVybiBudWxsfXN3aXRjaChpKXtjYXNlInN0cmluZyI6cmV0dXJuIHRoaXMub0Zvcm1hdC5mb3JtYXQodik7Y2FzZSJpbnQiOmNhc2UiZmxvYXQiOnJldHVybiB2O2RlZmF1bHQ6dGhyb3cgbmV3IHNhcC51aS5tb2RlbC5Gb3JtYXRFeGNlcHRpb24oIkRvbid0IGtub3cgaG93IHRvIGZvcm1hdCBJbnRlZ2VyIHRvICIraSl9fTtJLnByb3RvdHlwZS5wYXJzZVZhbHVlPWZ1bmN0aW9uKHYsaSl7dmFyIHI7c3dpdGNoKGkpe2Nhc2UiZmxvYXQiOmNhc2Uic3RyaW5nIjpyPXRoaXMub0Zvcm1hdC5wYXJzZShTdHJpbmcodikpO2lmKGlzTmFOKHIpKXt0aHJvdyBuZXcgc2FwLnVpLm1vZGVsLlBhcnNlRXhjZXB0aW9uKHYrIiBpcyBub3QgYSB2YWxpZCBJbnRlZ2VyIHZhbHVlIil9cmV0dXJuIHI7Y2FzZSJpbnQiOnJldHVybiB2O2RlZmF1bHQ6dGhyb3cgbmV3IHNhcC51aS5tb2RlbC5QYXJzZUV4Y2VwdGlvbigiRG9uJ3Qga25vdyBob3cgdG8gcGFyc2UgSW50ZWdlciBmcm9tICIraSl9fTtJLnByb3RvdHlwZS52YWxpZGF0ZVZhbHVlPWZ1bmN0aW9uKHYpe2lmKHRoaXMub0NvbnN0cmFpbnRzKXt2YXIgVj1bXTtxLmVhY2godGhpcy5vQ29uc3RyYWludHMsZnVuY3Rpb24obixjKXtzd2l0Y2gobil7Y2FzZSJtaW5pbXVtIjppZih2PGMpe1YucHVzaCgibWluaW11bSIpfWJyZWFrO2Nhc2UibWF4aW11bSI6aWYodj5jKXtWLnB1c2goIm1heGltdW0iKX19fSk7aWYoVi5sZW5ndGg+MCl7dGhyb3cgbmV3IHNhcC51aS5tb2RlbC5WYWxpZGF0ZUV4Y2VwdGlvbigiVmFsaWRhdGlvbiBvZiB0eXBlIGNvbnN0cmFpbnRzIGZhaWxlZCIsVil9fX07SS5wcm90b3R5cGUuc2V0Rm9ybWF0T3B0aW9ucz1mdW5jdGlvbihmKXt0aGlzLm9Gb3JtYXRPcHRpb25zPWY7dGhpcy5faGFuZGxlTG9jYWxpemF0aW9uQ2hhbmdlKCl9O0kucHJvdG90eXBlLl9oYW5kbGVMb2NhbGl6YXRpb25DaGFuZ2U9ZnVuY3Rpb24oKXt0aGlzLm9Gb3JtYXQ9Ti5nZXRJbnRlZ2VySW5zdGFuY2UodGhpcy5vRm9ybWF0T3B0aW9ucyl9O3JldHVybiBJfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLm1vZGVsLnR5cGUuU3RyaW5nJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLm1vZGVsLnR5cGUuU3RyaW5nJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL21vZGVsL3R5cGUvU3RyaW5nIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL2NvcmUvZm9ybWF0L051bWJlckZvcm1hdCcsJ3NhcC91aS9tb2RlbC9TaW1wbGVUeXBlJ10sZnVuY3Rpb24ocSxOLFMpeyJ1c2Ugc3RyaWN0Ijt2YXIgYT1TLmV4dGVuZCgic2FwLnVpLm1vZGVsLnR5cGUuU3RyaW5nIix7Y29uc3RydWN0b3I6ZnVuY3Rpb24oKXtTLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLnNOYW1lPSJTdHJpbmciO2lmKHRoaXMub0NvbnN0cmFpbnRzLnNlYXJjaCYmdHlwZW9mIHRoaXMub0NvbnN0cmFpbnRzLnNlYXJjaD09InN0cmluZyIpe3RoaXMub0NvbnN0cmFpbnRzLnNlYXJjaD1uZXcgUmVnRXhwKHRoaXMub0NvbnN0cmFpbnRzLnNlYXJjaCl9fX0pO2EucHJvdG90eXBlLmZvcm1hdFZhbHVlPWZ1bmN0aW9uKHYsaSl7aWYodj09dW5kZWZpbmVkfHx2PT1udWxsKXtyZXR1cm4gbnVsbH1zd2l0Y2goaSl7Y2FzZSJzdHJpbmciOnJldHVybiB2O2Nhc2UiaW50Ijp2YXIgcj1wYXJzZUludCh2LDEwKTtpZihpc05hTihyKSl7dGhyb3cgbmV3IHNhcC51aS5tb2RlbC5Gb3JtYXRFeGNlcHRpb24odisiIGlzIG5vdCBhIHZhbGlkIGludCB2YWx1ZSIpfXJldHVybiByO2Nhc2UiZmxvYXQiOnZhciBSPXBhcnNlRmxvYXQodik7aWYoaXNOYU4oUikpe3Rocm93IG5ldyBzYXAudWkubW9kZWwuRm9ybWF0RXhjZXB0aW9uKHYrIiBpcyBub3QgYSB2YWxpZCBmbG9hdCB2YWx1ZSIpfXJldHVybiBSO2Nhc2UiYm9vbGVhbiI6aWYodi50b0xvd2VyQ2FzZSgpPT0idHJ1ZSJ8fHY9PSJYIil7cmV0dXJuIHRydWV9aWYodi50b0xvd2VyQ2FzZSgpPT0iZmFsc2UifHx2PT0iIil7cmV0dXJuIGZhbHNlfXRocm93IG5ldyBzYXAudWkubW9kZWwuRm9ybWF0RXhjZXB0aW9uKHYrIiBpcyBub3QgYSB2YWxpZCBib29sZWFuIHZhbHVlIik7ZGVmYXVsdDp0aHJvdyBuZXcgc2FwLnVpLm1vZGVsLkZvcm1hdEV4Y2VwdGlvbigiRG9uJ3Qga25vdyBob3cgdG8gZm9ybWF0IFN0cmluZyB0byAiK2kpfX07YS5wcm90b3R5cGUucGFyc2VWYWx1ZT1mdW5jdGlvbih2LGkpe3ZhciByO3N3aXRjaChpKXtjYXNlInN0cmluZyI6cmV0dXJuIHY7Y2FzZSJib29sZWFuIjpjYXNlImludCI6Y2FzZSJmbG9hdCI6cmV0dXJuIHYudG9TdHJpbmcoKTtkZWZhdWx0OnRocm93IG5ldyBzYXAudWkubW9kZWwuUGFyc2VFeGNlcHRpb24oIkRvbid0IGtub3cgaG93IHRvIHBhcnNlIFN0cmluZyBmcm9tICIraSl9fTthLnByb3RvdHlwZS52YWxpZGF0ZVZhbHVlPWZ1bmN0aW9uKHYpe2lmKHRoaXMub0NvbnN0cmFpbnRzKXt2YXIgVj1bXTtxLmVhY2godGhpcy5vQ29uc3RyYWludHMsZnVuY3Rpb24obixjKXtzd2l0Y2gobil7Y2FzZSJtYXhMZW5ndGgiOmlmKHYubGVuZ3RoPmMpe1YucHVzaCgibWF4TGVuZ3RoIil9YnJlYWs7Y2FzZSJtaW5MZW5ndGgiOmlmKHYubGVuZ3RoPGMpe1YucHVzaCgibWluTGVuZ3RoIil9YnJlYWs7Y2FzZSJzdGFydHNXaXRoIjppZighcS5zYXAuc3RhcnRzV2l0aCh2LGMpKXtWLnB1c2goInN0YXJ0c1dpdGgiKX1icmVhaztjYXNlInN0YXJ0c1dpdGhJZ25vcmVDYXNlIjppZighcS5zYXAuc3RhcnRzV2l0aElnbm9yZUNhc2UodixjKSl7Vi5wdXNoKCJzdGFydHNXaXRoSWdub3JlQ2FzZSIpfWJyZWFrO2Nhc2UiZW5kc1dpdGgiOmlmKCFxLnNhcC5lbmRzV2l0aCh2LGMpKXtWLnB1c2goImVuZHNXaXRoIil9YnJlYWs7Y2FzZSJlbmRzV2l0aElnbm9yZUNhc2UiOmlmKCFxLnNhcC5lbmRzV2l0aElnbm9yZUNhc2UodixjKSl7Vi5wdXNoKCJlbmRzV2l0aElnbm9yZUNhc2UiKX1icmVhaztjYXNlImNvbnRhaW5zIjppZih2LmluZGV4T2YoYyk9PS0xKXtWLnB1c2goImNvbnRhaW5zIil9YnJlYWs7Y2FzZSJlcXVhbHMiOmlmKHYhPWMpe1YucHVzaCgiZXF1YWxzIil9YnJlYWs7Y2FzZSJzZWFyY2giOmlmKHYuc2VhcmNoKGMpPT0tMSl7Vi5wdXNoKCJzZWFyY2giKX1icmVha319KTtpZihWLmxlbmd0aD4wKXt0aHJvdyBuZXcgc2FwLnVpLm1vZGVsLlZhbGlkYXRlRXhjZXB0aW9uKCJWYWxpZGF0aW9uIG9mIHR5cGUgY29uc3RyYWludHMgZmFpbGVkIixWKX19fTtyZXR1cm4gYX0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5tb2RlbC50eXBlLlRpbWUnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkubW9kZWwudHlwZS5UaW1lJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL21vZGVsL3R5cGUvVGltZSIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJy4vRGF0ZSddLGZ1bmN0aW9uKHEsRCl7InVzZSBzdHJpY3QiO3ZhciBUPUQuZXh0ZW5kKCJzYXAudWkubW9kZWwudHlwZS5UaW1lIix7Y29uc3RydWN0b3I6ZnVuY3Rpb24oKXtELmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLnNOYW1lPSJUaW1lIn19KTtULnByb3RvdHlwZS5faGFuZGxlTG9jYWxpemF0aW9uQ2hhbmdlPWZ1bmN0aW9uKCl7dGhpcy5vT3V0cHV0Rm9ybWF0PXNhcC51aS5jb3JlLmZvcm1hdC5EYXRlRm9ybWF0LmdldFRpbWVJbnN0YW5jZSh0aGlzLm9Gb3JtYXRPcHRpb25zKTtpZih0aGlzLm9Gb3JtYXRPcHRpb25zLnNvdXJjZSl7dGhpcy5vSW5wdXRGb3JtYXQ9c2FwLnVpLmNvcmUuZm9ybWF0LkRhdGVGb3JtYXQuZ2V0VGltZUluc3RhbmNlKHRoaXMub0Zvcm1hdE9wdGlvbnMuc291cmNlKX19O3JldHVybiBUfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnanF1ZXJ5LnNhcC51aScpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ2pxdWVyeS5zYXAudWknKTtzYXAudWkuZGVmaW5lKCJqcXVlcnkuc2FwLnVpIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL0dsb2JhbCddLGZ1bmN0aW9uKHEsRyl7InVzZSBzdHJpY3QiO2lmKCFxLnNhcCl7dGhyb3ciSW5pdGlhbGlzYXRpb24gb2YgalF1ZXJ5LnNhcC51aSBmYWlsZWQuIGpRdWVyeS5zYXAgcGx1Z2luIHJlcXVpcmVkISJ9aWYoIXdpbmRvdy5zYXB8fCF3aW5kb3cuc2FwLnVpKXtxLnNhcC5mYXRhbCgiSW5pdGlhbGlzYXRpb24gb2YgalF1ZXJ5LnNhcC51aSBmYWlsZWQuIEdsb2JhbCBTQVAgVUkgbmFtZXNwYWNlIHJlcXVpcmVkISIpfWlmKHEuc2FwLnVpKXtyZXR1cm59ZnVuY3Rpb24gdShpKXtyZXR1cm4gc2FwLnVpLmdldENvcmUoKS5nZXRVSUFyZWEodGhpcy5pZCkhPW51bGx9ZnVuY3Rpb24gZihpLG8pe3JldHVybiBzYXAudWkuZ2V0Q29yZSgpLmdldFVJQXJlYSh0aGlzLmlkKX1mdW5jdGlvbiBhKGMsaSl7cmV0dXJuIGMuZ2V0VUlBcmVhKCkuZ2V0SW50ZXJmYWNlKCl9cS5mbi5yb290PWZ1bmN0aW9uKHIpe3ZhciB0O2lmKHIpe3NhcC51aS5nZXRDb3JlKCkuc2V0Um9vdCh0aGlzLmdldCgwKSxyKTtyZXR1cm4gdGhpc312YXIgYz10aGlzLmNvbnRyb2woKTtpZihjLmxlbmd0aD4wKXtyZXR1cm4gcS5tYXAoYyxhKX12YXIgVT10aGlzLnVpYXJlYSgpO2lmKFUubGVuZ3RoPjApe3JldHVybiBVfXRoaXMuZWFjaChmdW5jdGlvbihpKXtzYXAudWkuZ2V0Q29yZSgpLmNyZWF0ZVVJQXJlYSh0aGlzKX0pO3JldHVybiB0aGlzfTtxLmZuLnVpYXJlYT1mdW5jdGlvbihpKXt2YXIgVT10aGlzLnNsaWNlKCJbaWRdIikuZmlsdGVyKHUpLm1hcChmKS5nZXQoKTtyZXR1cm4gdHlwZW9mKGkpPT09Im51bWJlciI/VVtpXTpVfTtmdW5jdGlvbiBiKCl7aWYoIXRoaXN8fCF0aGlzLm5vZGVUeXBlfHx0aGlzLm5vZGVUeXBlPT09OSl7cmV0dXJuIG51bGx9dHJ5e3ZhciBpPXEodGhpcykuY2xvc2VzdCgiW2RhdGEtc2FwLXVpXSIpLmF0dHIoImlkIik7cmV0dXJuIGk/c2FwLnVpLmdldENvcmUoKS5ieUlkKGkpOm51bGx9Y2F0Y2goZSl7cmV0dXJuIG51bGx9fXEuZm4uY29udHJvbD1mdW5jdGlvbihpKXt2YXIgYz10aGlzLm1hcChiKTtpZihpPT09dW5kZWZpbmVkfHxpc05hTihpKSl7cmV0dXJuIGMuZ2V0KCl9ZWxzZXtyZXR1cm4gYy5nZXQoaSl9fTtxLmZuLnNhcHVpPWZ1bmN0aW9uKGMsaSxDKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIG89bnVsbDtpZih0aGlzKXtpZihjLmluZGV4T2YoIi4iKT09LTEpe2M9InNhcC51aS5jb21tb25zLiIrY312YXIgZD1xLnNhcC5nZXRPYmplY3QoYyk7aWYoZCl7aWYodHlwZW9mIEM9PSdvYmplY3QnJiZ0eXBlb2YgQy5wcmVzcz09J2Z1bmN0aW9uJyl7Qy5wcmVzcz1xLnByb3h5KEMucHJlc3MsdGhpcyl9bz1uZXcoZCkoaSxDKTtvLnBsYWNlQXQodGhpcyl9fX0pfTtyZXR1cm4gcX0sZmFsc2UpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuYXBwLkFwcGxpY2F0aW9uTWV0YWRhdGEnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuYXBwLkFwcGxpY2F0aW9uTWV0YWRhdGEnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvYXBwL0FwcGxpY2F0aW9uTWV0YWRhdGEiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvY29yZS9Db21wb25lbnRNZXRhZGF0YSddLGZ1bmN0aW9uKHEsQyl7InVzZSBzdHJpY3QiO3ZhciBBPWZ1bmN0aW9uKGMsbyl7Qy5hcHBseSh0aGlzLGFyZ3VtZW50cyl9O0EucHJvdG90eXBlPXEuc2FwLm5ld09iamVjdChDLnByb3RvdHlwZSk7QS5wcmVwcm9jZXNzQ2xhc3NJbmZvPWZ1bmN0aW9uKGMpe2lmKGMmJnR5cGVvZiBjLm1ldGFkYXRhPT09InN0cmluZyIpe2MubWV0YWRhdGE9e19zcmM6Yy5tZXRhZGF0YX19cmV0dXJuIGN9O0EucHJvdG90eXBlLmFwcGx5U2V0dGluZ3M9ZnVuY3Rpb24oYyl7dmFyIHM9Yy5tZXRhZGF0YTtDLnByb3RvdHlwZS5hcHBseVNldHRpbmdzLmNhbGwodGhpcyxjKTtpZihzLl9zcmMpe3Euc2FwLmxvZy53YXJuaW5nKCJUaGUgbWV0YWRhdGEgb2YgdGhlIGFwcGxpY2F0aW9uICIrdGhpcy5nZXROYW1lKCkrIiBpcyBsb2FkZWQgZnJvbSBmaWxlICIrcy5fc3JjKyIuIFRoaXMgaXMgYSBkZXNpZ24gdGltZSBmZWF0dXJlIGFuZCBub3QgZm9yIHByb2R1Y3RpdmUgdXNhZ2UhIik7dmFyIHA9dGhpcy5nZXROYW1lKCkucmVwbGFjZSgvXC5cdys/JC8sIiIpO3ZhciB1PXEuc2FwLmdldE1vZHVsZVBhdGgocCwiLyIrcy5fc3JjKTt2YXIgcj1xLnNhcC5zeW5jR2V0SlNPTih1KTtpZihyLnN1Y2Nlc3Mpe3EuZXh0ZW5kKHMsci5kYXRhKX1lbHNle3Euc2FwLmxvZy5lcnJvcigiRmFpbGVkIHRvIGxvYWQgYXBwbGljYXRpb24gbWV0YWRhdGEgZnJvbSBcIiIrcy5fc3JjKyJcIiEgUmVhc29uOiAiK3IuZXJyb3IpfX10aGlzLl9tUm9vdENvbXBvbmVudD1zLnJvb3RDb21wb25lbnR8fG51bGx9O0EucHJvdG90eXBlLmdldFJvb3RDb21wb25lbnQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbVJvb3RDb21wb25lbnR9O3JldHVybiBBfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUudXRpbC5zZXJpYWxpemVyLkhUTUxWaWV3U2VyaWFsaXplcicpKXsNCi8qDQogKiBTQVAgVUkgZGV2ZWxvcG1lbnQgdG9vbGtpdCBmb3IgSFRNTDUgKFNBUFVJNS9PcGVuVUk1KQ0KICogKGMpIENvcHlyaWdodCAyMDA5LTIwMTQgU0FQIFNFIG9yIGFuIFNBUCBhZmZpbGlhdGUgY29tcGFueS4gDQogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wIC0gc2VlIExJQ0VOU0UudHh0Lg0KICovDQpqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLnV0aWwuc2VyaWFsaXplci5IVE1MVmlld1NlcmlhbGl6ZXInKTtqUXVlcnkuc2FwLnJlcXVpcmUoJ3NhcC51aS50aGlyZHBhcnR5LnZrYmVhdXRpZnknKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS91dGlsL3NlcmlhbGl6ZXIvSFRNTFZpZXdTZXJpYWxpemVyIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL2Jhc2UvRXZlbnRQcm92aWRlcicsJy4vZGVsZWdhdGUvSFRNTCcsJ3NhcC91aS90aGlyZHBhcnR5L3ZrYmVhdXRpZnknXSxmdW5jdGlvbihxLEUsSCx2KXsidXNlIHN0cmljdCI7dmFyIGE9RS5leHRlbmQoInNhcC51aS5jb3JlLnV0aWwuc2VyaWFsaXplci5IVE1MVmlld1NlcmlhbGl6ZXIiLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbihWLHcsZyxHKXtFLmFwcGx5KHRoaXMpO3RoaXMuX29WaWV3PVY7dGhpcy5fb1dpbmRvdz13O3RoaXMuX2ZuR2V0Q29udHJvbElkPWc7dGhpcy5fZm5HZXRFdmVudEhhbmRsZXJOYW1lPUd9fSk7YS5wcm90b3R5cGUuc2VyaWFsaXplPWZ1bmN0aW9uKCl7dmFyIHM9ZnVuY3Rpb24oQyl7cmV0dXJuKEMgaW5zdGFuY2VvZiB0aGlzLl9vV2luZG93LnNhcC51aS5jb3JlLm12Yy5WaWV3KX07dmFyIGM9bmV3IHNhcC51aS5jb3JlLnV0aWwuc2VyaWFsaXplci5TZXJpYWxpemVyKHRoaXMuX29WaWV3LG5ldyBIKHRoaXMuX2ZuR2V0Q29udHJvbElkLHRoaXMuX2ZuR2V0RXZlbnRIYW5kbGVyTmFtZSksdHJ1ZSx0aGlzLl9vV2luZG93LHMpO3ZhciByPWMuc2VyaWFsaXplKCk7dmFyIFY9W107Vi5wdXNoKCc8dGVtcGxhdGUnKTtpZih0aGlzLl9vVmlldy5nZXRDb250cm9sbGVyTmFtZSYmdGhpcy5fb1ZpZXcuZ2V0Q29udHJvbGxlck5hbWUoKSl7Vi5wdXNoKCcgZGF0YS1jb250cm9sbGVyLW5hbWU9IicrdGhpcy5fb1ZpZXcuZ2V0Q29udHJvbGxlck5hbWUoKSsnIicpfVYucHVzaCgiID4iKTtWLnB1c2gocik7Vi5wdXNoKCI8L3RlbXBsYXRlPiIpO3JldHVybiB2a2JlYXV0aWZ5LnhtbChWLmpvaW4oIiIpKX07cmV0dXJuIGF9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS51dGlsLnNlcmlhbGl6ZXIuWE1MVmlld1NlcmlhbGl6ZXInKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS51dGlsLnNlcmlhbGl6ZXIuWE1MVmlld1NlcmlhbGl6ZXInKTtqUXVlcnkuc2FwLnJlcXVpcmUoJ3NhcC51aS50aGlyZHBhcnR5LnZrYmVhdXRpZnknKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS91dGlsL3NlcmlhbGl6ZXIvWE1MVmlld1NlcmlhbGl6ZXIiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvYmFzZS9FdmVudFByb3ZpZGVyJywnLi9kZWxlZ2F0ZS9YTUwnLCdzYXAvdWkvdGhpcmRwYXJ0eS92a2JlYXV0aWZ5J10sZnVuY3Rpb24ocSxFLFgsdil7InVzZSBzdHJpY3QiO3ZhciBhPUUuZXh0ZW5kKCJzYXAudWkuY29yZS51dGlsLnNlcmlhbGl6ZXIuWE1MVmlld1NlcmlhbGl6ZXIiLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbihWLHcsZCxnLEcpe0UuYXBwbHkodGhpcyk7dGhpcy5fb1ZpZXc9Vjt0aGlzLl9vV2luZG93PXc7dGhpcy5fc0RlZmF1bHROYW1lc3BhY2U9ZDt0aGlzLl9mbkdldENvbnRyb2xJZD1nO3RoaXMuX2ZuR2V0RXZlbnRIYW5kbGVyTmFtZT1HfX0pO2EucHJvdG90eXBlLnNlcmlhbGl6ZT1mdW5jdGlvbigpe3ZhciBwPVtdO3ZhciBtPWZ1bmN0aW9uKEMsUCl7aWYoIVApe3ZhciB0PShDKT9DLmNvbnN0cnVjdG9yOiI/Ijt0aHJvdyBFcnJvcigiQ29udHJvbHMgd2l0aCBlbXB0eSBwYWNrYWdlIGFyZSBjdXJyZW50bHkgbm90IHN1cHBvcnRlZCBieSB0aGUgWE1MIHNlcmlhbGl6ZXI6ICIrdCl9aWYocS5pbkFycmF5KFAscCk9PT0tMSl7cC5wdXNoKFApfX07dmFyIHM9ZnVuY3Rpb24oQyl7cmV0dXJuKEMgaW5zdGFuY2VvZiB0aGlzLl9vV2luZG93LnNhcC51aS5jb3JlLm12Yy5WaWV3KX07dmFyIGM9bmV3IHNhcC51aS5jb3JlLnV0aWwuc2VyaWFsaXplci5TZXJpYWxpemVyKHRoaXMuX29WaWV3LG5ldyBYKHRoaXMuX3NEZWZhdWx0TmFtZXNwYWNlLHRoaXMuX2ZuR2V0Q29udHJvbElkLHRoaXMuX2ZuR2V0RXZlbnRIYW5kbGVyTmFtZSxtKSx0cnVlLHRoaXMuX29XaW5kb3cscyk7dmFyIHI9Yy5zZXJpYWxpemUoKTt2YXIgVj1bXTtWLnB1c2goJzxzYXAudWkuY29yZS5tdmM6VmlldycpO2lmKHRoaXMuX29WaWV3LmdldENvbnRyb2xsZXJOYW1lJiZ0aGlzLl9vVmlldy5nZXRDb250cm9sbGVyTmFtZSgpKXtWLnB1c2goJyBjb250cm9sbGVyTmFtZT0iJyt0aGlzLl9vVmlldy5nZXRDb250cm9sbGVyTmFtZSgpKyciJyl9aWYocS5pbkFycmF5KCdzYXAudWkuY29yZS5tdmMnLHApPT09LTEpe3AucHVzaCgnc2FwLnVpLmNvcmUubXZjJyl9Zm9yKHZhciBpPTA7aTxwLmxlbmd0aDtpKyspe2lmKHRoaXMuX3NEZWZhdWx0TmFtZXNwYWNlJiZ0aGlzLl9zRGVmYXVsdE5hbWVzcGFjZT09PXBbaV0pe1YucHVzaCgnIHhtbG5zPSInK3BbaV0rJyInKX1lbHNle1YucHVzaCgnIHhtbG5zOicrcFtpXSsnPSInK3BbaV0rJyInKX19Vi5wdXNoKCIgPiIpO1YucHVzaChyKTtWLnB1c2goIjwvc2FwLnVpLmNvcmUubXZjOlZpZXc+Iik7cmV0dXJuIHZrYmVhdXRpZnkueG1sKFYuam9pbigiIikpfTtyZXR1cm4gYX0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLndzLlNhcFBjcFdlYlNvY2tldCcpKXsNCi8qIQ0KICogU0FQIFVJIGRldmVsb3BtZW50IHRvb2xraXQgZm9yIEhUTUw1IChTQVBVSTUvT3BlblVJNSkNCiAqIChjKSBDb3B5cmlnaHQgMjAwOS0yMDE0IFNBUCBTRSBvciBhbiBTQVAgYWZmaWxpYXRlIGNvbXBhbnkuIA0KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAtIHNlZSBMSUNFTlNFLnR4dC4NCiAqLw0KalF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS53cy5TYXBQY3BXZWJTb2NrZXQnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS93cy9TYXBQY3BXZWJTb2NrZXQiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCcuL1dlYlNvY2tldCddLGZ1bmN0aW9uKHEsVyl7InVzZSBzdHJpY3QiO3ZhciBTPVcuZXh0ZW5kKCJzYXAudWkuY29yZS53cy5TYXBQY3BXZWJTb2NrZXQiLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbih1LHApe1cuYXBwbHkodGhpcyxhcmd1bWVudHMpfX0pO1MuU1VQUE9SVEVEX1BST1RPQ09MUz17djEwOiJ2MTAucGNwLnNhcC5jb20ifTtTLl9kZXNlcmlhbGl6ZVJlZ2V4cD0vKCg/OlteOlxcXXwoPzpcXC4pKSspOigoPzpbXjpcXFxuXXwoPzpcXC4pKSopLztTLl9TRVBBUkFUT1I9IlxuXG4iO1MuX01FU1NBR0U9Ik1FU1NBR0UiO1MucHJvdG90eXBlLl9vbm9wZW49ZnVuY3Rpb24oKXt2YXIgcz1mYWxzZTtpZih0aGlzLmdldFByb3RvY29sKCk9PT0iIil7cz10cnVlfWVsc2V7Zm9yKHZhciBwIGluIFMuU1VQUE9SVEVEX1BST1RPQ09MUyl7aWYoUy5TVVBQT1JURURfUFJPVE9DT0xTLmhhc093blByb3BlcnR5KHApKXtpZihTLlNVUFBPUlRFRF9QUk9UT0NPTFNbcF09PT10aGlzLmdldFByb3RvY29sKCkpe3M9dHJ1ZTticmVha319fX1pZihzKXt0aGlzLmZpcmVPcGVuKCl9ZWxzZXtxLnNhcC5sb2cuZXJyb3IoIlVuc3VwcG9ydGVkIHByb3RvY29sICciK3RoaXMuZ2V0UHJvdG9jb2woKSsiJyBzZWxlY3RlZCBieSB0aGUgc2VydmVyLiAiKyJDb25uZWN0aW9uIHdpbGwgYmUgY2xvc2VkLiIpO3RoaXMuY2xvc2UoIlVuc3VwcG9ydGVkIHByb3RvY29sIHNlbGVjdGVkIGJ5IHRoZSBzZXJ2ZXIiKX19O1MucHJvdG90eXBlLl9vbm1lc3NhZ2U9ZnVuY3Rpb24obSl7dmFyIHM9LTEsZT17fTtpZih0eXBlb2YgbS5kYXRhPT09InN0cmluZyIpe3M9bS5kYXRhLmluZGV4T2YoUy5fU0VQQVJBVE9SKX1pZihzIT09LTEpe2UucGNwRmllbGRzPXRoaXMuX2V4dHJhY3RQY3BGaWVsZHMobS5kYXRhLnN1YnN0cmluZygwLHMpKTtlLmRhdGE9bS5kYXRhLnN1YnN0cihzK1MuX1NFUEFSQVRPUi5sZW5ndGgpfWVsc2V7cS5zYXAubG9nLndhcm5pbmcoIkludmFsaWQgUENQIG1lc3NhZ2UgcmVjZWl2ZWQ6ICIrbS5kYXRhKTtlLnBjcEZpZWxkcz17fTtlLmRhdGE9bS5kYXRhfXRoaXMuZmlyZU1lc3NhZ2UoZSl9O1MucHJvdG90eXBlLl9leHRyYWN0UGNwRmllbGRzPWZ1bmN0aW9uKGgpe3ZhciBmPWguc3BsaXQoIlxuIiksbD1bXSxwPXt9O2Zvcih2YXIgaT0wO2k8Zi5sZW5ndGg7aSsrKXtsPWZbaV0ubWF0Y2goUy5fZGVzZXJpYWxpemVSZWdleHApO2lmKGwmJmwubGVuZ3RoPT09Myl7cFt0aGlzLl91bmVzY2FwZShsWzFdKV09dGhpcy5fdW5lc2NhcGUobFsyXSl9fXJldHVybiBwfTtTLnByb3RvdHlwZS5fdW5lc2NhcGU9ZnVuY3Rpb24oZSl7dmFyIHA9ZS5zcGxpdCgiXHUwMDA4IiksdT0iIjtmb3IodmFyIGk9MDtpPHAubGVuZ3RoO2krKyl7cFtpXT1wW2ldLnJlcGxhY2UoL1xcXFwvZywiXHUwMDA4IikucmVwbGFjZSgvXFw6L2csJzonKS5yZXBsYWNlKC9cXG4vZywnXG4nKS5yZXBsYWNlKC9cdTAwMDgvZywiXFwiKX11PXAuam9pbigiXHUwMDA4Iik7cmV0dXJuIHV9O1MucHJvdG90eXBlLl9zZXJpYWxpemVQY3BGaWVsZHM9ZnVuY3Rpb24ocCxtLFApe3ZhciBzPSIiLGY9IiIsYT0iIjtpZihtPT09J3N0cmluZycpe2E9J3RleHQnfWVsc2UgaWYobT09PSdibG9iJ3x8bT09PSdhcnJheWJ1ZmZlcicpe2E9J2JpbmFyeSd9aWYocCYmdHlwZW9mIHA9PT0nb2JqZWN0Jyl7Zm9yKGYgaW4gcCl7aWYocC5oYXNPd25Qcm9wZXJ0eShmKSYmZi5pbmRleE9mKCdwY3AtJykhPT0wKXtzKz10aGlzLl9lc2NhcGUoZikrIjoiK3RoaXMuX2VzY2FwZShTdHJpbmcocFtmXSkpKyJcbiJ9fX1yZXR1cm4icGNwLWFjdGlvbjoiK1ArIlxucGNwLWJvZHktdHlwZToiK2ErIlxuIitzKyJcbiJ9O1MucHJvdG90eXBlLl9lc2NhcGU9ZnVuY3Rpb24odSl7cmV0dXJuIHUucmVwbGFjZSgvXFwvZywnXFxcXCcpLnJlcGxhY2UoLzovZywnXFw6JykucmVwbGFjZSgvXG4vZywnXFxuJyl9O1MucHJvdG90eXBlLnNlbmQ9ZnVuY3Rpb24obSxwKXt2YXIgTT10eXBlb2YgbSxQPSIiO1A9dGhpcy5fc2VyaWFsaXplUGNwRmllbGRzKHAsTSxTLl9NRVNTQUdFKTtXLnByb3RvdHlwZS5zZW5kLmNhbGwodGhpcyxQK20pO3JldHVybiB0aGlzfTtyZXR1cm4gU30sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5tb2RlbC5DbGllbnRDb250ZXh0QmluZGluZycpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5tb2RlbC5DbGllbnRDb250ZXh0QmluZGluZycpO3NhcC51aS5kZWZpbmUoInNhcC91aS9tb2RlbC9DbGllbnRDb250ZXh0QmluZGluZyIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJy4vQ29udGV4dEJpbmRpbmcnXSxmdW5jdGlvbihxLEMpeyJ1c2Ugc3RyaWN0Ijt2YXIgYT1DLmV4dGVuZCgic2FwLnVpLm1vZGVsLkNsaWVudENvbnRleHRCaW5kaW5nIix7Y29uc3RydWN0b3I6ZnVuY3Rpb24obSxwLGMsUCxlKXtDLmNhbGwodGhpcyxtLHAsYyxQLGUpO3ZhciB0PXRoaXM7bS5jcmVhdGVCaW5kaW5nQ29udGV4dChwLGMsUCxmdW5jdGlvbihjKXt0LmJJbml0aWFsPWZhbHNlO3Qub0VsZW1lbnRDb250ZXh0PWN9KX19KTthLnByb3RvdHlwZS5yZWZyZXNoPWZ1bmN0aW9uKGYpe3ZhciB0PXRoaXM7dGhpcy5vTW9kZWwuY3JlYXRlQmluZGluZ0NvbnRleHQodGhpcy5zUGF0aCx0aGlzLm9Db250ZXh0LHRoaXMubVBhcmFtZXRlcnMsZnVuY3Rpb24oYyl7aWYodC5vRWxlbWVudENvbnRleHQ9PT1jJiYhZil7dC5vTW9kZWwuY2hlY2tVcGRhdGUodHJ1ZSxjKX1lbHNle3Qub0VsZW1lbnRDb250ZXh0PWM7dC5fZmlyZUNoYW5nZSgpfX0sdHJ1ZSl9O2EucHJvdG90eXBlLmluaXRpYWxpemU9ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3RoaXMub01vZGVsLmNyZWF0ZUJpbmRpbmdDb250ZXh0KHRoaXMuc1BhdGgsdGhpcy5vQ29udGV4dCx0aGlzLm1QYXJhbWV0ZXJzLGZ1bmN0aW9uKGMpe3Qub0VsZW1lbnRDb250ZXh0PWM7dC5fZmlyZUNoYW5nZSgpfSx0cnVlKX07YS5wcm90b3R5cGUuc2V0Q29udGV4dD1mdW5jdGlvbihjKXt2YXIgdD10aGlzO2lmKHRoaXMub0NvbnRleHQhPWMpe3RoaXMub0NvbnRleHQ9Yzt0aGlzLm9Nb2RlbC5jcmVhdGVCaW5kaW5nQ29udGV4dCh0aGlzLnNQYXRoLHRoaXMub0NvbnRleHQsdGhpcy5tUGFyYW1ldGVycyxmdW5jdGlvbihjKXt0Lm9FbGVtZW50Q29udGV4dD1jO3QuX2ZpcmVDaGFuZ2UoKX0pfX07cmV0dXJuIGF9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkubW9kZWwuQ2xpZW50TGlzdEJpbmRpbmcnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkubW9kZWwuQ2xpZW50TGlzdEJpbmRpbmcnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvbW9kZWwvQ2xpZW50TGlzdEJpbmRpbmciLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCcuL0ZpbHRlclR5cGUnLCcuL0xpc3RCaW5kaW5nJ10sZnVuY3Rpb24ocSxGLEwpeyJ1c2Ugc3RyaWN0Ijt2YXIgQz1MLmV4dGVuZCgic2FwLnVpLm1vZGVsLkNsaWVudExpc3RCaW5kaW5nIix7Y29uc3RydWN0b3I6ZnVuY3Rpb24obSxwLGMscyxmLFApe0wuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMuYklnbm9yZVN1c3BlbmQ9ZmFsc2U7dGhpcy51cGRhdGUoKX0sbWV0YWRhdGE6e3B1YmxpY01ldGhvZHM6WyJnZXRMZW5ndGgiXX19KTtDLnByb3RvdHlwZS5fZ2V0Q29udGV4dHM9ZnVuY3Rpb24ocyxsKXtpZighcyl7cz0wfWlmKCFsKXtsPU1hdGgubWluKHRoaXMuaUxlbmd0aCx0aGlzLm9Nb2RlbC5pU2l6ZUxpbWl0KX12YXIgZT1NYXRoLm1pbihzK2wsdGhpcy5hSW5kaWNlcy5sZW5ndGgpLGMsYT1bXSxwPXRoaXMub01vZGVsLnJlc29sdmUodGhpcy5zUGF0aCx0aGlzLm9Db250ZXh0KTtpZihwJiYhcS5zYXAuZW5kc1dpdGgocCwiLyIpKXtwKz0iLyJ9Zm9yKHZhciBpPXM7aTxlO2krKyl7Yz10aGlzLm9Nb2RlbC5nZXRDb250ZXh0KHArdGhpcy5hSW5kaWNlc1tpXSk7YS5wdXNoKGMpfXJldHVybiBhfTtDLnByb3RvdHlwZS5zZXRDb250ZXh0PWZ1bmN0aW9uKGMpe2lmKHRoaXMub0NvbnRleHQhPWMpe3RoaXMub0NvbnRleHQ9YztpZih0aGlzLmlzUmVsYXRpdmUoKSl7dGhpcy51cGRhdGUoKTt0aGlzLl9maXJlQ2hhbmdlKHtyZWFzb246c2FwLnVpLm1vZGVsLkNoYW5nZVJlYXNvbi5Db250ZXh0fSl9fX07Qy5wcm90b3R5cGUuZ2V0TGVuZ3RoPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaUxlbmd0aH07Qy5wcm90b3R5cGUuX2dldExlbmd0aD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmFJbmRpY2VzLmxlbmd0aH07Qy5wcm90b3R5cGUudXBkYXRlSW5kaWNlcz1mdW5jdGlvbigpe3RoaXMuYUluZGljZXM9W107Zm9yKHZhciBpPTA7aTx0aGlzLm9MaXN0Lmxlbmd0aDtpKyspe3RoaXMuYUluZGljZXMucHVzaChpKX19O0MucHJvdG90eXBlLnNvcnQ9ZnVuY3Rpb24ocyl7aWYoIXMpe3RoaXMuYVNvcnRlcnM9bnVsbDt0aGlzLnVwZGF0ZUluZGljZXMoKTt0aGlzLmFwcGx5RmlsdGVyKCl9ZWxzZXtpZihzIGluc3RhbmNlb2Ygc2FwLnVpLm1vZGVsLlNvcnRlcil7cz1bc119dGhpcy5hU29ydGVycz1zO3RoaXMuYXBwbHlTb3J0KCl9dGhpcy5iSWdub3JlU3VzcGVuZD10cnVlO3RoaXMuX2ZpcmVDaGFuZ2Uoe3JlYXNvbjpzYXAudWkubW9kZWwuQ2hhbmdlUmVhc29uLlNvcnR9KTt0aGlzLl9maXJlU29ydCh7c29ydGVyOnN9KTt0aGlzLmJJZ25vcmVTdXNwZW5kPWZhbHNlO3JldHVybiB0aGlzfTtDLnByb3RvdHlwZS5hcHBseVNvcnQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLHM9W10sYz1bXSx2LFM7aWYoIXRoaXMuYVNvcnRlcnN8fHRoaXMuYVNvcnRlcnMubGVuZ3RoPT0wKXtyZXR1cm59Zm9yKHZhciBqPTA7ajx0aGlzLmFTb3J0ZXJzLmxlbmd0aDtqKyspe1M9dGhpcy5hU29ydGVyc1tqXTtjW2pdPVMuZm5Db21wYXJlO2lmKCFjW2pdKXtjW2pdPWZ1bmN0aW9uKGEsYil7aWYoYj09bnVsbCl7cmV0dXJuLTF9aWYoYT09bnVsbCl7cmV0dXJuIDF9aWYodHlwZW9mIGE9PSJzdHJpbmciJiZ0eXBlb2YgYj09InN0cmluZyIpe3JldHVybiBhLmxvY2FsZUNvbXBhcmUoYil9aWYoYTxiKXtyZXR1cm4tMX1pZihhPmIpe3JldHVybiAxfXJldHVybiAwfX1xLmVhY2godGhpcy5hSW5kaWNlcyxmdW5jdGlvbihpLEkpe3Y9dC5vTW9kZWwuZ2V0UHJvcGVydHkoUy5zUGF0aCx0Lm9MaXN0W0ldKTtpZih0eXBlb2Ygdj09InN0cmluZyIpe3Y9di50b0xvY2FsZVVwcGVyQ2FzZSgpfWlmKCFzW2pdKXtzW2pdPVtdfXNbal1bSV09dn0pfXRoaXMuYUluZGljZXMuc29ydChmdW5jdGlvbihhLGIpe3ZhciBkPXNbMF1bYV0sZT1zWzBdW2JdO3JldHVybiB0Ll9hcHBseVNvcnRDb21wYXJlKGEsYixkLGUscyxjLDApfSl9O0MucHJvdG90eXBlLl9hcHBseVNvcnRDb21wYXJlPWZ1bmN0aW9uKGEsYix2LGMscyxkLEQpe3ZhciBTPXRoaXMuYVNvcnRlcnNbRF0sZj1kW0RdLHI7cj1mKHYsYyk7aWYoUy5iRGVzY2VuZGluZyl7cj0tcn1pZihyPT0wJiZ0aGlzLmFTb3J0ZXJzW0QrMV0pe3Y9c1tEKzFdW2FdLGM9c1tEKzFdW2JdO3I9dGhpcy5fYXBwbHlTb3J0Q29tcGFyZShhLGIsdixjLHMsZCxEKzEpfXJldHVybiByfTtDLnByb3RvdHlwZS5maWx0ZXI9ZnVuY3Rpb24oZixzKXt0aGlzLnVwZGF0ZUluZGljZXMoKTtpZihmIGluc3RhbmNlb2Ygc2FwLnVpLm1vZGVsLkZpbHRlcil7Zj1bZl19aWYocz09Ri5BcHBsaWNhdGlvbil7dGhpcy5hQXBwbGljYXRpb25GaWx0ZXJzPWZ8fFtdfWVsc2UgaWYocz09Ri5Db250cm9sKXt0aGlzLmFGaWx0ZXJzPWZ8fFtdfWVsc2V7dGhpcy5hRmlsdGVycz1mfHxbXTt0aGlzLmFBcHBsaWNhdGlvbkZpbHRlcnM9W119Zj10aGlzLmFGaWx0ZXJzLmNvbmNhdCh0aGlzLmFBcHBsaWNhdGlvbkZpbHRlcnMpO2lmKGYubGVuZ3RoPT0wKXt0aGlzLmFGaWx0ZXJzPVtdO3RoaXMuYUFwcGxpY2F0aW9uRmlsdGVycz1bXTt0aGlzLmlMZW5ndGg9dGhpcy5fZ2V0TGVuZ3RoKCl9ZWxzZXt0aGlzLmFwcGx5RmlsdGVyKCl9dGhpcy5hcHBseVNvcnQoKTt0aGlzLmJJZ25vcmVTdXNwZW5kPXRydWU7dGhpcy5fZmlyZUNoYW5nZSh7cmVhc29uOnNhcC51aS5tb2RlbC5DaGFuZ2VSZWFzb24uRmlsdGVyfSk7aWYocz09Ri5BcHBsaWNhdGlvbil7dGhpcy5fZmlyZUZpbHRlcih7ZmlsdGVyczp0aGlzLmFBcHBsaWNhdGlvbkZpbHRlcnN9KX1lbHNle3RoaXMuX2ZpcmVGaWx0ZXIoe2ZpbHRlcnM6dGhpcy5hRmlsdGVyc30pfXRoaXMuYklnbm9yZVN1c3BlbmQ9ZmFsc2U7cmV0dXJuIHRoaXN9O0MucHJvdG90eXBlLm5vcm1hbGl6ZUZpbHRlclZhbHVlPWZ1bmN0aW9uKHYpe2lmKHR5cGVvZiB2PT0ic3RyaW5nIil7cmV0dXJuIHYudG9VcHBlckNhc2UoKX1pZih2IGluc3RhbmNlb2YgRGF0ZSl7cmV0dXJuIHYuZ2V0VGltZSgpfXJldHVybiB2fTtDLnByb3RvdHlwZS5hcHBseUZpbHRlcj1mdW5jdGlvbigpe2lmKCF0aGlzLmFGaWx0ZXJzKXtyZXR1cm59dmFyIHQ9dGhpcyxmPXt9LGEsYj1bXSxnPWZhbHNlLGM9dHJ1ZSxkPXRoaXMuYUZpbHRlcnMuY29uY2F0KHRoaXMuYUFwcGxpY2F0aW9uRmlsdGVycyk7cS5lYWNoKGQsZnVuY3Rpb24oaixvKXtpZihvLnNQYXRoIT09dW5kZWZpbmVkKXthPWZbby5zUGF0aF07aWYoIWEpe2E9ZltvLnNQYXRoXT1bXX19ZWxzZXthPWZbIl9fbXVsdGlGaWx0ZXIiXTtpZighYSl7YT1mWyJfX211bHRpRmlsdGVyIl09W119fWEucHVzaChvKX0pO3EuZWFjaCh0aGlzLmFJbmRpY2VzLGZ1bmN0aW9uKGksSSl7Yz10cnVlO3EuZWFjaChmLGZ1bmN0aW9uKHAsYSl7aWYocCE9PSJfX211bHRpRmlsdGVyIil7dmFyIHY9dC5vTW9kZWwuZ2V0UHJvcGVydHkocCx0Lm9MaXN0W0ldKTt2PXQubm9ybWFsaXplRmlsdGVyVmFsdWUodik7Zz1mYWxzZTtxLmVhY2goYSxmdW5jdGlvbihqLG8pe3ZhciBUPXQuZ2V0RmlsdGVyRnVuY3Rpb24obyk7aWYodiE9dW5kZWZpbmVkJiZUKHYpKXtnPXRydWU7cmV0dXJuIGZhbHNlfX0pfWVsc2V7Zz1mYWxzZTtxLmVhY2goYSxmdW5jdGlvbihqLG8pe2c9dC5fcmVzb2x2ZU11bHRpRmlsdGVyKG8sSSk7aWYoZyl7cmV0dXJuIGZhbHNlfX0pfWlmKCFnKXtjPWZhbHNlO3JldHVybiBmYWxzZX19KTtpZihjKXtiLnB1c2goSSl9fSk7dGhpcy5hSW5kaWNlcz1iO3RoaXMuaUxlbmd0aD1iLmxlbmd0aH07Qy5wcm90b3R5cGUuX3Jlc29sdmVNdWx0aUZpbHRlcj1mdW5jdGlvbihtLEkpe3ZhciB0PXRoaXMsTT1mYWxzZSxmPW0uYUZpbHRlcnM7aWYoZil7cS5lYWNoKGYsZnVuY3Rpb24oaSxvKXt2YXIgbD1mYWxzZTtpZihvLl9iTXVsdGlGaWx0ZXIpe2w9dC5fcmVzb2x2ZU11bHRpRmlsdGVyKG8sSSl9ZWxzZSBpZihvLnNQYXRoIT09dW5kZWZpbmVkKXt2YXIgdj10Lm9Nb2RlbC5nZXRQcm9wZXJ0eShvLnNQYXRoLHQub0xpc3RbSV0pO3Y9dC5ub3JtYWxpemVGaWx0ZXJWYWx1ZSh2KTt2YXIgVD10LmdldEZpbHRlckZ1bmN0aW9uKG8pO2lmKHYhPXVuZGVmaW5lZCYmVCh2KSl7bD10cnVlfX1pZihsJiZtLmJBbmQpe009dHJ1ZX1lbHNlIGlmKCFsJiZtLmJBbmQpe009ZmFsc2U7cmV0dXJuIGZhbHNlfWVsc2UgaWYobCl7TT10cnVlO3JldHVybiBmYWxzZX19KX1yZXR1cm4gTX07Qy5wcm90b3R5cGUuZ2V0RmlsdGVyRnVuY3Rpb249ZnVuY3Rpb24oZil7aWYoZi5mblRlc3Qpe3JldHVybiBmLmZuVGVzdH12YXIgdj10aGlzLm5vcm1hbGl6ZUZpbHRlclZhbHVlKGYub1ZhbHVlMSksVj10aGlzLm5vcm1hbGl6ZUZpbHRlclZhbHVlKGYub1ZhbHVlMik7c3dpdGNoKGYuc09wZXJhdG9yKXtjYXNlIkVRIjpmLmZuVGVzdD1mdW5jdGlvbihhKXtyZXR1cm4gYT09dn07YnJlYWs7Y2FzZSJORSI6Zi5mblRlc3Q9ZnVuY3Rpb24oYSl7cmV0dXJuIGEhPXZ9O2JyZWFrO2Nhc2UiTFQiOmYuZm5UZXN0PWZ1bmN0aW9uKGEpe3JldHVybiBhPHZ9O2JyZWFrO2Nhc2UiTEUiOmYuZm5UZXN0PWZ1bmN0aW9uKGEpe3JldHVybiBhPD12fTticmVhaztjYXNlIkdUIjpmLmZuVGVzdD1mdW5jdGlvbihhKXtyZXR1cm4gYT52fTticmVhaztjYXNlIkdFIjpmLmZuVGVzdD1mdW5jdGlvbihhKXtyZXR1cm4gYT49dn07YnJlYWs7Y2FzZSJCVCI6Zi5mblRlc3Q9ZnVuY3Rpb24oYSl7cmV0dXJuKGE+PXYpJiYoYTw9Vil9O2JyZWFrO2Nhc2UiQ29udGFpbnMiOmYuZm5UZXN0PWZ1bmN0aW9uKGEpe2lmKHR5cGVvZiBhIT0ic3RyaW5nIil7dGhyb3cgbmV3IEVycm9yKCJPbmx5IFwiU3RyaW5nXCIgdmFsdWVzIGFyZSBzdXBwb3J0ZWQgZm9yIHRoZSBGaWx0ZXJPcGVyYXRvcjogXCJDb250YWluc1wiLiIpfXJldHVybiBhLmluZGV4T2YodikhPS0xfTticmVhaztjYXNlIlN0YXJ0c1dpdGgiOmYuZm5UZXN0PWZ1bmN0aW9uKGEpe2lmKHR5cGVvZiBhIT0ic3RyaW5nIil7dGhyb3cgbmV3IEVycm9yKCJPbmx5IFwiU3RyaW5nXCIgdmFsdWVzIGFyZSBzdXBwb3J0ZWQgZm9yIHRoZSBGaWx0ZXJPcGVyYXRvcjogXCJTdGFydHNXaXRoXCIuIil9cmV0dXJuIGEuaW5kZXhPZih2KT09MH07YnJlYWs7Y2FzZSJFbmRzV2l0aCI6Zi5mblRlc3Q9ZnVuY3Rpb24oYSl7aWYodHlwZW9mIGEhPSJzdHJpbmciKXt0aHJvdyBuZXcgRXJyb3IoIk9ubHkgXCJTdHJpbmdcIiB2YWx1ZXMgYXJlIHN1cHBvcnRlZCBmb3IgdGhlIEZpbHRlck9wZXJhdG9yOiBcIkVuZHNXaXRoXCIuIil9dmFyIHA9YS5sYXN0SW5kZXhPZih2KTtpZihwPT0tMSl7cmV0dXJuIGZhbHNlfXJldHVybiBwPT1hLmxlbmd0aC1uZXcgU3RyaW5nKGYub1ZhbHVlMSkubGVuZ3RofTticmVhaztkZWZhdWx0OmYuZm5UZXN0PWZ1bmN0aW9uKGEpe3JldHVybiB0cnVlfX1yZXR1cm4gZi5mblRlc3R9O0MucHJvdG90eXBlLmdldERpc3RpbmN0VmFsdWVzPWZ1bmN0aW9uKHApe3ZhciByPVtdLG09e30sdix0PXRoaXM7cS5lYWNoKHRoaXMub0xpc3QsZnVuY3Rpb24oaSxjKXt2PXQub01vZGVsLmdldFByb3BlcnR5KHAsYyk7aWYoIW1bdl0pe21bdl09dHJ1ZTtyLnB1c2godil9fSk7cmV0dXJuIHJ9O3JldHVybiBDfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLm1vZGVsLkNsaWVudFRyZWVCaW5kaW5nJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLm1vZGVsLkNsaWVudFRyZWVCaW5kaW5nJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL21vZGVsL0NsaWVudFRyZWVCaW5kaW5nIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnLi9UcmVlQmluZGluZyddLGZ1bmN0aW9uKHEsVCl7InVzZSBzdHJpY3QiO3ZhciBDPVQuZXh0ZW5kKCJzYXAudWkubW9kZWwuQ2xpZW50VHJlZUJpbmRpbmciLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbihtLHAsYyxmLFApe1QuYXBwbHkodGhpcyxhcmd1bWVudHMpO2lmKCF0aGlzLm9Db250ZXh0KXt0aGlzLm9Db250ZXh0PSIifXRoaXMuZmlsdGVySW5mbz17fTt0aGlzLmZpbHRlckluZm8uYUZpbHRlcmVkQ29udGV4dHM9W107dGhpcy5maWx0ZXJJbmZvLm9QYXJlbnRDb250ZXh0PXt9O2lmKHRoaXMuYUZpbHRlcnMpe2lmKHRoaXMub01vZGVsLl9nZXRPYmplY3QodGhpcy5zUGF0aCx0aGlzLm9Db250ZXh0KSl7dGhpcy5maWx0ZXIoZil9fX19KTtDLnByb3RvdHlwZS5nZXRSb290Q29udGV4dHM9ZnVuY3Rpb24oKXtpZighdGhpcy5vTW9kZWwuaXNMaXN0KHRoaXMuc1BhdGgpKXt2YXIgYz10aGlzLm9Nb2RlbC5nZXRDb250ZXh0KHRoaXMuc1BhdGgpO2lmKHRoaXMuYkRpc3BsYXlSb290Tm9kZSl7cmV0dXJuW2NdfWVsc2V7cmV0dXJuIHRoaXMuZ2V0Tm9kZUNvbnRleHRzKGMpfX1lbHNle3ZhciBhPVtdLHQ9dGhpcztxLmVhY2godGhpcy5vTW9kZWwuX2dldE9iamVjdCh0aGlzLnNQYXRoKSxmdW5jdGlvbihpLG8pe3QuX3NhdmVTdWJDb250ZXh0KG8sYSx0LnNQYXRoKyhxLnNhcC5lbmRzV2l0aCh0LnNQYXRoLCIvIik/IiI6Ii8iKSxpKX0pO3JldHVybiBhfX07Qy5wcm90b3R5cGUuZ2V0Tm9kZUNvbnRleHRzPWZ1bmN0aW9uKGMpe3ZhciBzPWMuZ2V0UGF0aCgpO2lmKCFxLnNhcC5lbmRzV2l0aChzLCIvIikpe3M9cysiLyJ9aWYoIXEuc2FwLnN0YXJ0c1dpdGgocywiLyIpKXtzPSIvIitzfXZhciBhPVtdLHQ9dGhpcyxuPXRoaXMub01vZGVsLl9nZXRPYmplY3QocyksbyxBPXRoaXMubVBhcmFtZXRlcnMmJnRoaXMubVBhcmFtZXRlcnMuYXJyYXlOYW1lcyxiO2lmKEEmJnEuaXNBcnJheShBKSl7cS5lYWNoKEEsZnVuY3Rpb24oaSxkKXtiPW5bZF07aWYoYil7cS5lYWNoKGIsZnVuY3Rpb24oUyxlKXt0Ll9zYXZlU3ViQ29udGV4dChlLGEscyxkKyIvIitTKX0pfX0pfWVsc2V7aWYobil7cS5zYXAuZWFjaChuLGZ1bmN0aW9uKE4sbyl7aWYocS5pc0FycmF5KG8pKXtxLmVhY2gobyxmdW5jdGlvbihTLGQpe3QuX3NhdmVTdWJDb250ZXh0KGQsYSxzLE4rIi8iK1MpfSl9ZWxzZSBpZih0eXBlb2Ygbz09Im9iamVjdCIpe3QuX3NhdmVTdWJDb250ZXh0KG8sYSxzLE4pfX0pfX1yZXR1cm4gYX07Qy5wcm90b3R5cGUuaGFzQ2hpbGRyZW49ZnVuY3Rpb24oYyl7cmV0dXJuIGM/dGhpcy5nZXROb2RlQ29udGV4dHMoYykubGVuZ3RoPjA6ZmFsc2V9O0MucHJvdG90eXBlLl9zYXZlU3ViQ29udGV4dD1mdW5jdGlvbihuLGMscyxOKXtpZih0eXBlb2Ygbj09Im9iamVjdCIpe3ZhciBvPXRoaXMub01vZGVsLmdldENvbnRleHQocytOKTtpZih0aGlzLmFGaWx0ZXJzJiYhdGhpcy5iSXNGaWx0ZXJpbmcpe2lmKHEuaW5BcnJheShvLHRoaXMuZmlsdGVySW5mby5hRmlsdGVyZWRDb250ZXh0cykhPS0xKXtjLnB1c2gobyl9fWVsc2V7Yy5wdXNoKG8pfX19O0MucHJvdG90eXBlLmZpbHRlcj1mdW5jdGlvbihmKXt0aGlzLmZpbHRlckluZm8uYUZpbHRlcmVkQ29udGV4dHM9W107dGhpcy5maWx0ZXJJbmZvLm9QYXJlbnRDb250ZXh0PXt9O2lmKCFmfHwhcS5pc0FycmF5KGYpfHxmLmxlbmd0aD09MCl7dGhpcy5hRmlsdGVycz1udWxsfWVsc2V7dGhpcy5hRmlsdGVycz1mO3ZhciBjPW5ldyBzYXAudWkubW9kZWwuQ29udGV4dCh0aGlzLm9Nb2RlbCx0aGlzLnNQYXRoKTt0aGlzLmZpbHRlclJlY3Vyc2l2ZShjKX10aGlzLl9maXJlQ2hhbmdlKHtyZWFzb246ImZpbHRlciJ9KTt0aGlzLl9maXJlRmlsdGVyKHtmaWx0ZXJzOmZ9KX07Qy5wcm90b3R5cGUuZmlsdGVyUmVjdXJzaXZlPWZ1bmN0aW9uKHApe3RoaXMuYklzRmlsdGVyaW5nPXRydWU7dmFyIGM9dGhpcy5nZXROb2RlQ29udGV4dHMocCk7dGhpcy5iSXNGaWx0ZXJpbmc9ZmFsc2U7aWYoYy5sZW5ndGg+MCl7dmFyIHQ9dGhpcztxLmVhY2goYyxmdW5jdGlvbihpLG8pe3QuZmlsdGVyUmVjdXJzaXZlKG8pfSk7dGhpcy5hcHBseUZpbHRlcihwKX19O0MucHJvdG90eXBlLmFwcGx5RmlsdGVyPWZ1bmN0aW9uKHApe2lmKCF0aGlzLmFGaWx0ZXJzKXtyZXR1cm59dmFyIHQ9dGhpcyxmPXt9LEYsYT1bXSxnPWZhbHNlLGI9dHJ1ZTt0aGlzLmJJc0ZpbHRlcmluZz10cnVlO3ZhciB1PXRoaXMuZ2V0Tm9kZUNvbnRleHRzKHApO3RoaXMuYklzRmlsdGVyaW5nPWZhbHNlO3EuZWFjaCh0LmFGaWx0ZXJzLGZ1bmN0aW9uKGosbyl7aWYoby5zUGF0aCl7Rj1mW28uc1BhdGhdO2lmKCFGKXtGPWZbby5zUGF0aF09W119fWVsc2V7Rj1mWyJfX211bHRpRmlsdGVyIl07aWYoIUYpe0Y9ZlsiX19tdWx0aUZpbHRlciJdPVtdfX1GLnB1c2gobyl9KTtxLmVhY2godSxmdW5jdGlvbihpLFUpe2I9dHJ1ZTtxLmVhY2goZixmdW5jdGlvbihQLEYpe2lmKFAhPT0iX19tdWx0aUZpbHRlciIpe3ZhciB2PXQub01vZGVsLl9nZXRPYmplY3QoUCxVKTtpZih0eXBlb2Ygdj09InN0cmluZyIpe3Y9di50b1VwcGVyQ2FzZSgpfWc9ZmFsc2U7cS5lYWNoKEYsZnVuY3Rpb24oaixvKXt2YXIgYz10LmdldEZpbHRlckZ1bmN0aW9uKG8pO2lmKHYhPXVuZGVmaW5lZCYmYyh2KSl7Zz10cnVlO3JldHVybiBmYWxzZX19KX1lbHNle2c9ZmFsc2U7cS5lYWNoKEYsZnVuY3Rpb24oaixvKXtnPXQuX3Jlc29sdmVNdWx0aUZpbHRlcihvLFUpO2lmKGcpe3JldHVybiBmYWxzZX19KX1pZighZyl7Yj1mYWxzZTtyZXR1cm4gZmFsc2V9fSk7aWYoYil7YS5wdXNoKFUpfX0pO2lmKGEubGVuZ3RoPjApe3EubWVyZ2UodGhpcy5maWx0ZXJJbmZvLmFGaWx0ZXJlZENvbnRleHRzLGEpO3RoaXMuZmlsdGVySW5mby5hRmlsdGVyZWRDb250ZXh0cy5wdXNoKHApO3RoaXMuZmlsdGVySW5mby5vUGFyZW50Q29udGV4dD1wfWlmKHEuaW5BcnJheSh0aGlzLmZpbHRlckluZm8ub1BhcmVudENvbnRleHQsdSkhPS0xKXt0aGlzLmZpbHRlckluZm8uYUZpbHRlcmVkQ29udGV4dHMucHVzaChwKTt0aGlzLmZpbHRlckluZm8ub1BhcmVudENvbnRleHQ9cH19O0MucHJvdG90eXBlLl9yZXNvbHZlTXVsdGlGaWx0ZXI9ZnVuY3Rpb24obSx1KXt2YXIgdD10aGlzLE09ZmFsc2UsZj1tLmFGaWx0ZXJzO2lmKGYpe3EuZWFjaChmLGZ1bmN0aW9uKGksRil7dmFyIGw9ZmFsc2U7aWYoRi5fYk11bHRpRmlsdGVyKXtsPXQuX3Jlc29sdmVNdWx0aUZpbHRlcihGLHUpfWVsc2UgaWYoRi5zUGF0aCl7dmFyIHY9dC5vTW9kZWwuZ2V0UHJvcGVydHkoRi5zUGF0aCx1KTtpZih0eXBlb2Ygdj09InN0cmluZyIpe3Y9di50b1VwcGVyQ2FzZSgpfXZhciBhPXQuZ2V0RmlsdGVyRnVuY3Rpb24oRik7aWYodiE9dW5kZWZpbmVkJiZhKHYpKXtsPXRydWV9fWlmKGwmJm0uYkFuZCl7TT10cnVlfWVsc2UgaWYoIWwmJm0uYkFuZCl7TT1mYWxzZTtyZXR1cm4gZmFsc2V9ZWxzZSBpZihsKXtNPXRydWU7cmV0dXJuIGZhbHNlfX0pfXJldHVybiBNfTtDLnByb3RvdHlwZS5nZXRGaWx0ZXJGdW5jdGlvbj1mdW5jdGlvbihmKXtpZihmLmZuVGVzdCl7cmV0dXJuIGYuZm5UZXN0fXZhciB2PWYub1ZhbHVlMSxWPWYub1ZhbHVlMjtpZih0eXBlb2Ygdj09InN0cmluZyIpe3Y9di50b1VwcGVyQ2FzZSgpfWlmKHR5cGVvZiBWPT0ic3RyaW5nIil7Vj1WLnRvVXBwZXJDYXNlKCl9c3dpdGNoKGYuc09wZXJhdG9yKXtjYXNlIkVRIjpmLmZuVGVzdD1mdW5jdGlvbihhKXtyZXR1cm4gYT09dn07YnJlYWs7Y2FzZSJORSI6Zi5mblRlc3Q9ZnVuY3Rpb24oYSl7cmV0dXJuIGEhPXZ9O2JyZWFrO2Nhc2UiTFQiOmYuZm5UZXN0PWZ1bmN0aW9uKGEpe3JldHVybiBhPHZ9O2JyZWFrO2Nhc2UiTEUiOmYuZm5UZXN0PWZ1bmN0aW9uKGEpe3JldHVybiBhPD12fTticmVhaztjYXNlIkdUIjpmLmZuVGVzdD1mdW5jdGlvbihhKXtyZXR1cm4gYT52fTticmVhaztjYXNlIkdFIjpmLmZuVGVzdD1mdW5jdGlvbihhKXtyZXR1cm4gYT49dn07YnJlYWs7Y2FzZSJCVCI6Zi5mblRlc3Q9ZnVuY3Rpb24oYSl7cmV0dXJuKGE+dikmJihhPFYpfTticmVhaztjYXNlIkNvbnRhaW5zIjpmLmZuVGVzdD1mdW5jdGlvbihhKXtyZXR1cm4gYS5pbmRleE9mKHYpIT0tMX07YnJlYWs7Y2FzZSJTdGFydHNXaXRoIjpmLmZuVGVzdD1mdW5jdGlvbihhKXtyZXR1cm4gYS5pbmRleE9mKHYpPT0wfTticmVhaztjYXNlIkVuZHNXaXRoIjpmLmZuVGVzdD1mdW5jdGlvbihhKXtyZXR1cm4gYS5pbmRleE9mKHYpPT1hLmxlbmd0aC1uZXcgU3RyaW5nKGYub1ZhbHVlMSkubGVuZ3RofTticmVhaztkZWZhdWx0OmYuZm5UZXN0PWZ1bmN0aW9uKGEpe3JldHVybiB0cnVlfX1yZXR1cm4gZi5mblRlc3R9O0MucHJvdG90eXBlLmNoZWNrVXBkYXRlPWZ1bmN0aW9uKGYpe3RoaXMuX2ZpcmVDaGFuZ2UoKX07cmV0dXJuIEN9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkubW9kZWwuUHJvcGVydHlCaW5kaW5nJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLm1vZGVsLlByb3BlcnR5QmluZGluZycpO3NhcC51aS5kZWZpbmUoInNhcC91aS9tb2RlbC9Qcm9wZXJ0eUJpbmRpbmciLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCcuL0JpbmRpbmcnLCcuL1NpbXBsZVR5cGUnXSxmdW5jdGlvbihxLEIsUyl7InVzZSBzdHJpY3QiO3ZhciBQPUIuZXh0ZW5kKCJzYXAudWkubW9kZWwuUHJvcGVydHlCaW5kaW5nIix7Y29uc3RydWN0b3I6ZnVuY3Rpb24obSxwLGMsYSl7Qi5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LG1ldGFkYXRhOnsiYWJzdHJhY3QiOnRydWUscHVibGljTWV0aG9kczpbImdldFZhbHVlIiwic2V0VmFsdWUiLCJzZXRUeXBlIiwiZ2V0VHlwZSIsInNldEZvcm1hdHRlciIsImdldEZvcm1hdHRlciIsImdldEV4dGVybmFsVmFsdWUiLCJzZXRFeHRlcm5hbFZhbHVlIiwiZ2V0QmluZGluZ01vZGUiXX19KTtQLnByb3RvdHlwZS5nZXRFeHRlcm5hbFZhbHVlPWZ1bmN0aW9uKCl7dmFyIHY9dGhpcy5nZXRWYWx1ZSgpO2lmKHRoaXMub1R5cGUpe3Y9dGhpcy5vVHlwZS5mb3JtYXRWYWx1ZSh2LHRoaXMuc0ludGVybmFsVHlwZSl9aWYodGhpcy5mbkZvcm1hdHRlcil7dj10aGlzLmZuRm9ybWF0dGVyKHYpfXJldHVybiB2fTtQLnByb3RvdHlwZS5zZXRFeHRlcm5hbFZhbHVlPWZ1bmN0aW9uKHYpe2lmKHRoaXMuZm5Gb3JtYXR0ZXIpe3JldHVybn1pZih0aGlzLm9UeXBlKXt2PXRoaXMub1R5cGUucGFyc2VWYWx1ZSh2LHRoaXMuc0ludGVybmFsVHlwZSk7dGhpcy5vVHlwZS52YWxpZGF0ZVZhbHVlKHYpfXRoaXMuc2V0VmFsdWUodil9O1AucHJvdG90eXBlLnNldFR5cGU9ZnVuY3Rpb24odCxpKXt0aGlzLm9UeXBlPXQ7dGhpcy5zSW50ZXJuYWxUeXBlPWl9O1AucHJvdG90eXBlLmdldFR5cGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vVHlwZX07UC5wcm90b3R5cGUuc2V0Rm9ybWF0dGVyPWZ1bmN0aW9uKGYpe3RoaXMuZm5Gb3JtYXR0ZXI9Zn07UC5wcm90b3R5cGUuZ2V0Rm9ybWF0dGVyPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZm5Gb3JtYXR0ZXJ9O1AucHJvdG90eXBlLmdldEJpbmRpbmdNb2RlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc01vZGV9O1AucHJvdG90eXBlLnNldEJpbmRpbmdNb2RlPWZ1bmN0aW9uKGIpe3RoaXMuc01vZGU9Yn07cmV0dXJuIFB9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkubW9kZWwuY29udHJvbC5Db250cm9sUHJvcGVydHlCaW5kaW5nJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLm1vZGVsLmNvbnRyb2wuQ29udHJvbFByb3BlcnR5QmluZGluZycpO3NhcC51aS5kZWZpbmUoInNhcC91aS9tb2RlbC9jb250cm9sL0NvbnRyb2xQcm9wZXJ0eUJpbmRpbmciLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvbW9kZWwvUHJvcGVydHlCaW5kaW5nJ10sZnVuY3Rpb24ocSxQKXsidXNlIHN0cmljdCI7dmFyIEM9UC5leHRlbmQoInNhcC51aS5tb2RlbC5jb250cm9sLkNvbnRyb2xQcm9wZXJ0eUJpbmRpbmciLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbihtLHAsYyl7UC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5vVmFsdWU9dGhpcy5fZ2V0VmFsdWUoKX19KTtDLnByb3RvdHlwZS5nZXRWYWx1ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLm9WYWx1ZX07Qy5wcm90b3R5cGUuc2V0VmFsdWU9ZnVuY3Rpb24odil7dGhpcy5vVmFsdWU9djt0aGlzLm9Db250ZXh0LnNldFByb3BlcnR5KHRoaXMuc1BhdGgsdil9O0MucHJvdG90eXBlLl9nZXRWYWx1ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLm9Db250ZXh0LmdldFByb3BlcnR5KHRoaXMuc1BhdGgpfTtDLnByb3RvdHlwZS5zZXRDb250ZXh0PWZ1bmN0aW9uKGMpe3RoaXMub0NvbnRleHQ9Yzt0aGlzLmNoZWNrVXBkYXRlKCl9O0MucHJvdG90eXBlLmNoZWNrVXBkYXRlPWZ1bmN0aW9uKCl7dmFyIHY9dGhpcy5fZ2V0VmFsdWUoKTtpZih2IT09dGhpcy5vVmFsdWUpe3RoaXMub1ZhbHVlPXY7dGhpcy5fZmlyZUNoYW5nZSgpfX07cmV0dXJuIEN9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkubW9kZWwuanNvbi5KU09OTGlzdEJpbmRpbmcnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkubW9kZWwuanNvbi5KU09OTGlzdEJpbmRpbmcnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvbW9kZWwvanNvbi9KU09OTGlzdEJpbmRpbmciLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvbW9kZWwvQ2hhbmdlUmVhc29uJywnc2FwL3VpL21vZGVsL0NsaWVudExpc3RCaW5kaW5nJ10sZnVuY3Rpb24ocSxDLGEpeyJ1c2Ugc3RyaWN0Ijt2YXIgSj1hLmV4dGVuZCgic2FwLnVpLm1vZGVsLmpzb24uSlNPTkxpc3RCaW5kaW5nIik7Si5wcm90b3R5cGUuZ2V0Q29udGV4dHM9ZnVuY3Rpb24ocyxsKXt0aGlzLmlMYXN0U3RhcnRJbmRleD1zO3RoaXMuaUxhc3RMZW5ndGg9bDtpZighcyl7cz0wfWlmKCFsKXtsPU1hdGgubWluKHRoaXMuaUxlbmd0aCx0aGlzLm9Nb2RlbC5pU2l6ZUxpbWl0KX12YXIgYz10aGlzLl9nZXRDb250ZXh0cyhzLGwpLG89e307aWYodGhpcy5iVXNlRXh0ZW5kZWRDaGFuZ2VEZXRlY3Rpb24pe2Zvcih2YXIgaT0wO2k8Yy5sZW5ndGg7aSsrKXtvW2NbaV0uZ2V0UGF0aCgpXT1jW2ldLmdldE9iamVjdCgpfWlmKHRoaXMuYUxhc3RDb250ZXh0cyYmczx0aGlzLmlMYXN0RW5kSW5kZXgpe3ZhciB0PXRoaXM7dmFyIGQ9cS5zYXAuYXJyYXlEaWZmKHRoaXMuYUxhc3RDb250ZXh0cyxjLGZ1bmN0aW9uKE8sbil7cmV0dXJuIHEuc2FwLmVxdWFsKE8mJnQub0xhc3RDb250ZXh0RGF0YSYmdC5vTGFzdENvbnRleHREYXRhW08uZ2V0UGF0aCgpXSxuJiZvJiZvW24uZ2V0UGF0aCgpXSl9KTtjLmRpZmY9ZH10aGlzLmlMYXN0RW5kSW5kZXg9cytsO3RoaXMuYUxhc3RDb250ZXh0cz1jLnNsaWNlKDApO3RoaXMub0xhc3RDb250ZXh0RGF0YT1xLmV4dGVuZCh0cnVlLHt9LG8pfXJldHVybiBjfTtKLnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24oKXt2YXIgbD10aGlzLm9Nb2RlbC5fZ2V0T2JqZWN0KHRoaXMuc1BhdGgsdGhpcy5vQ29udGV4dCk7aWYobCYmcS5pc0FycmF5KGwpKXtpZih0aGlzLmJVc2VFeHRlbmRlZENoYW5nZURldGVjdGlvbil7dGhpcy5vTGlzdD1xLmV4dGVuZCh0cnVlLFtdLGwpfWVsc2V7dGhpcy5vTGlzdD1sLnNsaWNlKDApfXRoaXMudXBkYXRlSW5kaWNlcygpO3RoaXMuYXBwbHlGaWx0ZXIoKTt0aGlzLmFwcGx5U29ydCgpO3RoaXMuaUxlbmd0aD10aGlzLl9nZXRMZW5ndGgoKX1lbHNle3RoaXMub0xpc3Q9W107dGhpcy5hSW5kaWNlcz1bXTt0aGlzLmlMZW5ndGg9MH19O0oucHJvdG90eXBlLmNoZWNrVXBkYXRlPWZ1bmN0aW9uKGYpe2lmKHRoaXMuYlN1c3BlbmRlZCYmIXRoaXMuYklnbm9yZVN1c3BlbmQpcmV0dXJuO2lmKCF0aGlzLmJVc2VFeHRlbmRlZENoYW5nZURldGVjdGlvbil7dmFyIGw9dGhpcy5vTW9kZWwuX2dldE9iamVjdCh0aGlzLnNQYXRoLHRoaXMub0NvbnRleHQpO2lmKCFxLnNhcC5lcXVhbCh0aGlzLm9MaXN0LGwpfHxmKXt0aGlzLnVwZGF0ZSgpO3RoaXMuX2ZpcmVDaGFuZ2Uoe3JlYXNvbjpDLkNoYW5nZX0pfX1lbHNle3ZhciBjPWZhbHNlO3ZhciB0PXRoaXM7dmFyIGw9dGhpcy5vTW9kZWwuX2dldE9iamVjdCh0aGlzLnNQYXRoLHRoaXMub0NvbnRleHQpO2lmKCFxLnNhcC5lcXVhbCh0aGlzLm9MaXN0LGwpKXt0aGlzLnVwZGF0ZSgpfXZhciBiPXRoaXMuX2dldENvbnRleHRzKHRoaXMuaUxhc3RTdGFydEluZGV4LHRoaXMuaUxhc3RMZW5ndGgpO2lmKHRoaXMuYUxhc3RDb250ZXh0cyl7aWYodGhpcy5hTGFzdENvbnRleHRzLmxlbmd0aCE9Yi5sZW5ndGgpe2M9dHJ1ZX1lbHNle3EuZWFjaCh0aGlzLmFMYXN0Q29udGV4dHMsZnVuY3Rpb24oaSxvKXtpZighcS5zYXAuZXF1YWwoYltpXS5nZXRPYmplY3QoKSx0Lm9MYXN0Q29udGV4dERhdGFbby5nZXRQYXRoKCldKSl7Yz10cnVlO3JldHVybiBmYWxzZX19KX19ZWxzZXtjPXRydWV9aWYoY3x8Zil7dGhpcy5fZmlyZUNoYW5nZSh7cmVhc29uOkMuQ2hhbmdlfSl9fX07cmV0dXJuIEp9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkubW9kZWwuanNvbi5KU09OVHJlZUJpbmRpbmcnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkubW9kZWwuanNvbi5KU09OVHJlZUJpbmRpbmcnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvbW9kZWwvanNvbi9KU09OVHJlZUJpbmRpbmciLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvbW9kZWwvQ2xpZW50VHJlZUJpbmRpbmcnXSxmdW5jdGlvbihxLEMpeyJ1c2Ugc3RyaWN0Ijt2YXIgSj1DLmV4dGVuZCgic2FwLnVpLm1vZGVsLmpzb24uSlNPTlRyZWVCaW5kaW5nIik7Si5wcm90b3R5cGUuZ2V0Tm9kZUNvbnRleHRzPWZ1bmN0aW9uKGMpe3ZhciBzPWMuZ2V0UGF0aCgpO2lmKCFxLnNhcC5lbmRzV2l0aChzLCIvIikpe3M9cysiLyJ9aWYoIXEuc2FwLnN0YXJ0c1dpdGgocywiLyIpKXtzPSIvIitzfXZhciBhPVtdLHQ9dGhpcyxuPXRoaXMub01vZGVsLl9nZXRPYmplY3QocyksbyxBPXRoaXMubVBhcmFtZXRlcnMmJnRoaXMubVBhcmFtZXRlcnMuYXJyYXlOYW1lcyxiO2lmKG4pe2lmKEEmJnEuaXNBcnJheShBKSl7cS5lYWNoKEEsZnVuY3Rpb24oaSxkKXtiPW5bZF07aWYoYil7cS5lYWNoKGIsZnVuY3Rpb24oUyxlKXt0Ll9zYXZlU3ViQ29udGV4dChlLGEscyxkKyIvIitTKX0pfX0pfWVsc2V7cS5zYXAuZWFjaChuLGZ1bmN0aW9uKE4sbyl7aWYocS5pc0FycmF5KG8pKXtxLmVhY2gobyxmdW5jdGlvbihTLGQpe3QuX3NhdmVTdWJDb250ZXh0KGQsYSxzLE4rIi8iK1MpfSl9ZWxzZSBpZihvJiZ0eXBlb2Ygbz09Im9iamVjdCIpe3QuX3NhdmVTdWJDb250ZXh0KG8sYSxzLE4pfX0pfX1yZXR1cm4gYX07Si5wcm90b3R5cGUuX3NhdmVTdWJDb250ZXh0PWZ1bmN0aW9uKG4sYyxzLE4pe2lmKHR5cGVvZiBuPT0ib2JqZWN0Iil7dmFyIG89dGhpcy5vTW9kZWwuZ2V0Q29udGV4dChzK04pO2lmKHRoaXMuYUZpbHRlcnMmJiF0aGlzLmJJc0ZpbHRlcmluZyl7aWYocS5pbkFycmF5KG8sdGhpcy5maWx0ZXJJbmZvLmFGaWx0ZXJlZENvbnRleHRzKSE9LTEpe2MucHVzaChvKX19ZWxzZXtjLnB1c2gobyl9fX07cmV0dXJuIEp9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkubW9kZWwub2RhdGEuT0RhdGFMaXN0QmluZGluZycpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5tb2RlbC5vZGF0YS5PRGF0YUxpc3RCaW5kaW5nJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL21vZGVsL29kYXRhL09EYXRhTGlzdEJpbmRpbmciLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvY29yZS9mb3JtYXQvRGF0ZUZvcm1hdCcsJ3NhcC91aS9tb2RlbC9GaWx0ZXJUeXBlJywnc2FwL3VpL21vZGVsL0xpc3RCaW5kaW5nJywnLi9PRGF0YVV0aWxzJywnLi9Db3VudE1vZGUnLCcuL0ZpbHRlciddLGZ1bmN0aW9uKHEsRCxGLEwsTyxDLGEpeyJ1c2Ugc3RyaWN0Ijt2YXIgYj1MLmV4dGVuZCgic2FwLnVpLm1vZGVsLm9kYXRhLk9EYXRhTGlzdEJpbmRpbmciLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbihtLHAsYyxzLGYsUCl7TC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5zRmlsdGVyUGFyYW1zPW51bGw7dGhpcy5zU29ydFBhcmFtcz1udWxsO3RoaXMuc1JhbmdlUGFyYW1zPW51bGw7dGhpcy5zQ3VzdG9tUGFyYW1zPXRoaXMub01vZGVsLmNyZWF0ZUN1c3RvbVBhcmFtcyh0aGlzLm1QYXJhbWV0ZXJzKTt0aGlzLmlTdGFydEluZGV4PTA7dGhpcy5iUGVuZGluZ0NoYW5nZT1mYWxzZTt0aGlzLmFLZXlzPVtdO3RoaXMuYkluaXRpYWw9dHJ1ZTt0aGlzLnNDb3VudE1vZGU9KFAmJlAuY291bnRNb2RlKXx8dGhpcy5vTW9kZWwuc0RlZmF1bHRDb3VudE1vZGU7dGhpcy5iUmVmcmVzaD1mYWxzZTt0aGlzLmJOZWVkc1VwZGF0ZT1mYWxzZTt0aGlzLmJEYXRhQXZhaWxhYmxlPWZhbHNlO3RoaXMuYklnbm9yZVN1c3BlbmQ9ZmFsc2U7aWYoIXRoaXMub01vZGVsLmdldFNlcnZpY2VNZXRhZGF0YSgpKXt2YXIgdD10aGlzLGQ9ZnVuY3Rpb24oZSl7dC5iSW5pdGlhbD1mYWxzZTt0Ll9pbml0U29ydGVyc0ZpbHRlcnMoKTt0Lm9Nb2RlbC5kZXRhY2hNZXRhZGF0YUxvYWRlZChkKX07dGhpcy5vTW9kZWwuYXR0YWNoTWV0YWRhdGFMb2FkZWQodGhpcyxkKX1lbHNle3RoaXMuYkluaXRpYWw9ZmFsc2U7dGhpcy5faW5pdFNvcnRlcnNGaWx0ZXJzKCl9dmFyIHI9dGhpcy5vTW9kZWwuX2dldE9iamVjdCh0aGlzLnNQYXRoLHRoaXMub0NvbnRleHQpO3RoaXMuYUV4cGFuZFJlZnM9cjtpZihxLmlzQXJyYXkocikmJiFzJiYhZil7dGhpcy5hS2V5cz1yO3RoaXMuaUxlbmd0aD1yLmxlbmd0aDt0aGlzLmJMZW5ndGhGaW5hbD10cnVlO3RoaXMuYkRhdGFBdmFpbGFibGU9dHJ1ZX1lbHNlIGlmKHI9PT1udWxsJiZ0aGlzLm9Nb2RlbC5yZXNvbHZlKHRoaXMuc1BhdGgsdGhpcy5vQ29udGV4dCkpe3RoaXMuYUtleXM9W107dGhpcy5pTGVuZ3RoPTA7dGhpcy5iTGVuZ3RoRmluYWw9dHJ1ZTt0aGlzLmJEYXRhQXZhaWxhYmxlPXRydWV9ZWxzZXtpZih0aGlzLm9Nb2RlbC5nZXRTZXJ2aWNlTWV0YWRhdGEoKSl7dGhpcy5yZXNldERhdGEoKX19fX0pO2IucHJvdG90eXBlLmdldENvbnRleHRzPWZ1bmN0aW9uKHMsbCx0KXtpZih0aGlzLmJJbml0aWFsKXtyZXR1cm5bXX10aGlzLmlMYXN0TGVuZ3RoPWw7dGhpcy5pTGFzdFN0YXJ0SW5kZXg9czt0aGlzLmlMYXN0VGhyZXNob2xkPXQ7aWYoIXMpe3M9MH1pZighbCl7bD10aGlzLm9Nb2RlbC5pU2l6ZUxpbWl0O2lmKHRoaXMuYkxlbmd0aEZpbmFsJiZ0aGlzLmlMZW5ndGg8bCl7bD10aGlzLmlMZW5ndGh9fWlmKCF0KXt0PTB9dmFyIGM9dHJ1ZSxkPXRoaXMuX2dldENvbnRleHRzKHMsbCksbz17fSxTO1M9dGhpcy5jYWxjdWxhdGVTZWN0aW9uKHMsbCx0LGQpO2M9ZC5sZW5ndGghPWwmJiEodGhpcy5iTGVuZ3RoRmluYWwmJmQubGVuZ3RoPj10aGlzLmlMZW5ndGgtcyk7aWYodGhpcy5vTW9kZWwuZ2V0U2VydmljZU1ldGFkYXRhKCkpe2lmKCF0aGlzLmJQZW5kaW5nUmVxdWVzdCYmUy5sZW5ndGg+MCYmKGN8fGw8Uy5sZW5ndGgpKXt0aGlzLmxvYWREYXRhKFMuc3RhcnRJbmRleCxTLmxlbmd0aCk7ZC5kYXRhUmVxdWVzdGVkPXRydWV9fWlmKHRoaXMuYlJlZnJlc2gpe2lmKHRoaXMuYkxlbmd0aEZpbmFsJiZ0aGlzLmlMZW5ndGg9PTApe3RoaXMubG9hZERhdGEoUy5zdGFydEluZGV4LFMubGVuZ3RoLHRydWUpO2QuZGF0YVJlcXVlc3RlZD10cnVlfXRoaXMuYlJlZnJlc2g9ZmFsc2V9ZWxzZXtmb3IodmFyIGk9MDtpPGQubGVuZ3RoO2krKyl7b1tkW2ldLmdldFBhdGgoKV09ZFtpXS5nZXRPYmplY3QoKX1pZih0aGlzLmJVc2VFeHRlbmRlZENoYW5nZURldGVjdGlvbil7aWYodGhpcy5hTGFzdENvbnRleHRzJiZzPHRoaXMuaUxhc3RFbmRJbmRleCl7dmFyIGU9dGhpczt2YXIgZj1xLnNhcC5hcnJheURpZmYodGhpcy5hTGFzdENvbnRleHRzLGQsZnVuY3Rpb24oZyxuKXtyZXR1cm4gcS5zYXAuZXF1YWwoZyYmZS5vTGFzdENvbnRleHREYXRhJiZlLm9MYXN0Q29udGV4dERhdGFbZy5nZXRQYXRoKCldLG4mJm8mJm9bbi5nZXRQYXRoKCldKX0pO2QuZGlmZj1mfX10aGlzLmlMYXN0RW5kSW5kZXg9cytsO3RoaXMuYUxhc3RDb250ZXh0cz1kLnNsaWNlKDApO3RoaXMub0xhc3RDb250ZXh0RGF0YT1xLmV4dGVuZCh0cnVlLHt9LG8pfXJldHVybiBkfTtiLnByb3RvdHlwZS5fZ2V0Q29udGV4dHM9ZnVuY3Rpb24ocyxsKXt2YXIgYz1bXSxvLGs7aWYoIXMpe3M9MH1pZighbCl7bD10aGlzLm9Nb2RlbC5pU2l6ZUxpbWl0O2lmKHRoaXMuYkxlbmd0aEZpbmFsJiZ0aGlzLmlMZW5ndGg8bCl7bD10aGlzLmlMZW5ndGh9fWZvcih2YXIgaT1zO2k8cytsO2krKyl7az10aGlzLmFLZXlzW2ldO2lmKCFrKXticmVha31vPXRoaXMub01vZGVsLmdldENvbnRleHQoJy8nK2spO2MucHVzaChvKX1yZXR1cm4gY307Yi5wcm90b3R5cGUuY2FsY3VsYXRlU2VjdGlvbj1mdW5jdGlvbihzLGwsdCxjKXt2YXIgZD1mYWxzZSxTLGUscCxQLHIsbz17fSxrO2U9cztTPTA7Zm9yKHZhciBpPXM7aT49TWF0aC5tYXgocy10LDApO2ktLSl7az10aGlzLmFLZXlzW2ldO2lmKCFrKXtQPWkrMTticmVha319Zm9yKHZhciBqPXMrbDtqPHMrbCt0O2orKyl7az10aGlzLmFLZXlzW2pdO2lmKCFrKXtwPWo7YnJlYWt9fXI9cy1QO2lmKFAmJnM+dCYmcjx0KXtpZihjLmxlbmd0aCE9bCl7ZT1zLXR9ZWxzZXtlPVAtdH1TPXR9aWYoZT09cyl7ZSs9Yy5sZW5ndGh9aWYoYy5sZW5ndGghPWwpe1MrPWwtYy5sZW5ndGh9cj1wLXMtbDtpZihyPT0wKXtTKz10fWlmKHAmJnI8dCYmcj4wKXtpZihlPnMpe2U9cDtTKz10fX1pZih0aGlzLmJMZW5ndGhGaW5hbCYmdGhpcy5pTGVuZ3RoPChTK2UpKXtTPXRoaXMuaUxlbmd0aC1lfW8uc3RhcnRJbmRleD1lO28ubGVuZ3RoPVM7cmV0dXJuIG99O2IucHJvdG90eXBlLnNldENvbnRleHQ9ZnVuY3Rpb24oYyl7aWYodGhpcy5vQ29udGV4dCE9Yyl7dGhpcy5vQ29udGV4dD1jO2lmKHRoaXMuaXNSZWxhdGl2ZSgpKXt0aGlzLl9pbml0U29ydGVyc0ZpbHRlcnMoKTtpZighdGhpcy5iSW5pdGlhbCl7dmFyIHI9dGhpcy5vTW9kZWwuX2dldE9iamVjdCh0aGlzLnNQYXRoLHRoaXMub0NvbnRleHQpO3RoaXMuYUV4cGFuZFJlZnM9cjtpZihxLmlzQXJyYXkocikmJiF0aGlzLmFTb3J0ZXJzLmxlbmd0aD4wJiYhdGhpcy5hRmlsdGVycy5sZW5ndGg+MCl7dGhpcy5hS2V5cz1yO3RoaXMuaUxlbmd0aD1yLmxlbmd0aDt0aGlzLmJMZW5ndGhGaW5hbD10cnVlO3RoaXMuX2ZpcmVDaGFuZ2UoKX1lbHNlIGlmKHI9PT1udWxsJiZ0aGlzLm9Nb2RlbC5yZXNvbHZlKHRoaXMuc1BhdGgsdGhpcy5vQ29udGV4dCkpe3RoaXMuYUtleXM9W107dGhpcy5pTGVuZ3RoPTA7dGhpcy5iTGVuZ3RoRmluYWw9dHJ1ZTt0aGlzLl9maXJlQ2hhbmdlKCl9ZWxzZXt0aGlzLnJlZnJlc2goKX19fX19O2IucHJvdG90eXBlLmdldERvd25sb2FkVXJsPWZ1bmN0aW9uKGYpe3ZhciBwPVtdLFA7aWYoZil7cC5wdXNoKCIkZm9ybWF0PSIrZW5jb2RlVVJJQ29tcG9uZW50KGYpKX1pZih0aGlzLnNTb3J0UGFyYW1zKXtwLnB1c2godGhpcy5zU29ydFBhcmFtcyl9aWYodGhpcy5zRmlsdGVyUGFyYW1zKXtwLnB1c2godGhpcy5zRmlsdGVyUGFyYW1zKX1pZih0aGlzLnNDdXN0b21QYXJhbXMpe3AucHVzaCh0aGlzLnNDdXN0b21QYXJhbXMpfVA9dGhpcy5vTW9kZWwucmVzb2x2ZSh0aGlzLnNQYXRoLHRoaXMub0NvbnRleHQpO2lmKFApe3JldHVybiB0aGlzLm9Nb2RlbC5fY3JlYXRlUmVxdWVzdFVybChQLG51bGwscCl9fTtiLnByb3RvdHlwZS5sb2FkRGF0YT1mdW5jdGlvbihzLGwscCl7dmFyIHQ9dGhpcyxJPWZhbHNlO2lmKHN8fGwpe3RoaXMuc1JhbmdlUGFyYW1zPSIkc2tpcD0iK3MrIiYkdG9wPSIrbDt0aGlzLmlTdGFydEluZGV4PXN9ZWxzZXtzPXRoaXMuaVN0YXJ0SW5kZXh9dmFyIFA9W107aWYodGhpcy5zUmFuZ2VQYXJhbXMpe1AucHVzaCh0aGlzLnNSYW5nZVBhcmFtcyl9aWYodGhpcy5zU29ydFBhcmFtcyl7UC5wdXNoKHRoaXMuc1NvcnRQYXJhbXMpfWlmKHRoaXMuc0ZpbHRlclBhcmFtcyl7UC5wdXNoKHRoaXMuc0ZpbHRlclBhcmFtcyl9aWYodGhpcy5zQ3VzdG9tUGFyYW1zKXtQLnB1c2godGhpcy5zQ3VzdG9tUGFyYW1zKX1pZighdGhpcy5iTGVuZ3RoRmluYWwmJih0aGlzLnNDb3VudE1vZGU9PUMuSW5saW5lfHx0aGlzLnNDb3VudE1vZGU9PUMuQm90aCkpe1AucHVzaCgiJGlubGluZWNvdW50PWFsbHBhZ2VzIik7ST10cnVlfWZ1bmN0aW9uIFMoZil7cS5lYWNoKGYucmVzdWx0cyxmdW5jdGlvbihpLGcpe3QuYUtleXNbcytpXT10Lm9Nb2RlbC5fZ2V0S2V5KGcpfSk7aWYoSSYmZi5fX2NvdW50KXt0LmlMZW5ndGg9cGFyc2VJbnQoZi5fX2NvdW50LDEwKTt0LmJMZW5ndGhGaW5hbD10cnVlfWlmKHQuaUxlbmd0aDxzK2YucmVzdWx0cy5sZW5ndGgpe3QuaUxlbmd0aD1zK2YucmVzdWx0cy5sZW5ndGg7dC5iTGVuZ3RoRmluYWw9ZmFsc2V9aWYoZi5yZXN1bHRzLmxlbmd0aDxsfHxsPT09dW5kZWZpbmVkKXt0LmlMZW5ndGg9cytmLnJlc3VsdHMubGVuZ3RoO3QuYkxlbmd0aEZpbmFsPXRydWV9aWYocz09MCYmZi5yZXN1bHRzLmxlbmd0aD09MCl7dC5pTGVuZ3RoPTA7dC5iTGVuZ3RoRmluYWw9dHJ1ZX10Lm9SZXF1ZXN0SGFuZGxlPW51bGw7dC5iUGVuZGluZ1JlcXVlc3Q9ZmFsc2U7dC5iTmVlZHNVcGRhdGU9dHJ1ZTt0LmJJZ25vcmVTdXNwZW5kPXRydWV9ZnVuY3Rpb24gYyhmKXt0LmZpcmVEYXRhUmVjZWl2ZWQoe2RhdGE6Zn0pfWZ1bmN0aW9uIGUoRSxBKXt0Lm9SZXF1ZXN0SGFuZGxlPW51bGw7dC5iUGVuZGluZ1JlcXVlc3Q9ZmFsc2U7aWYoIUEpe3QuYUtleXM9W107dC5pTGVuZ3RoPTA7dC5iTGVuZ3RoRmluYWw9dHJ1ZTt0LmJEYXRhQXZhaWxhYmxlPXRydWU7dC5fZmlyZUNoYW5nZSh7cmVhc29uOnNhcC51aS5tb2RlbC5DaGFuZ2VSZWFzb24uQ2hhbmdlfSl9dC5maXJlRGF0YVJlY2VpdmVkKCl9ZnVuY3Rpb24gdShoKXt0Lm9SZXF1ZXN0SGFuZGxlPWh9dmFyIGQ9dGhpcy5zUGF0aCxvPXRoaXMub0NvbnRleHQ7aWYodGhpcy5pc1JlbGF0aXZlKCkpe2Q9dGhpcy5vTW9kZWwucmVzb2x2ZShkLG8pfWlmKGQpe2lmKHApe3ZhciBVPXRoaXMub01vZGVsLl9jcmVhdGVSZXF1ZXN0VXJsKGQsbnVsbCxQKTt0aGlzLmZpcmVEYXRhUmVxdWVzdGVkKCk7dGhpcy5vTW9kZWwuZmlyZVJlcXVlc3RTZW50KHt1cmw6VSxtZXRob2Q6IkdFVCIsYXN5bmM6dHJ1ZX0pO3NldFRpbWVvdXQoZnVuY3Rpb24oKXt0LmJOZWVkc1VwZGF0ZT10cnVlO3QuY2hlY2tVcGRhdGUoKTt0Lm9Nb2RlbC5maXJlUmVxdWVzdENvbXBsZXRlZCh7dXJsOlUsbWV0aG9kOiJHRVQiLGFzeW5jOnRydWUsc3VjY2Vzczp0cnVlfSk7dC5maXJlRGF0YVJlY2VpdmVkKCl9LDApfWVsc2V7dGhpcy5iUGVuZGluZ1JlcXVlc3Q9dHJ1ZTt0aGlzLmZpcmVEYXRhUmVxdWVzdGVkKCk7dGhpcy5vTW9kZWwuX2xvYWREYXRhKGQsUCxTLGUsZmFsc2UsdSxjKX19fTtiLnByb3RvdHlwZS5nZXRMZW5ndGg9ZnVuY3Rpb24oKXtpZih0aGlzLmJMZW5ndGhGaW5hbCl7cmV0dXJuIHRoaXMuaUxlbmd0aH1lbHNle3ZhciBBPXRoaXMuaUxhc3RUaHJlc2hvbGR8fHRoaXMuaUxhc3RMZW5ndGh8fDEwO3JldHVybiB0aGlzLmlMZW5ndGgrQX19O2IucHJvdG90eXBlLmlzTGVuZ3RoRmluYWw9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5iTGVuZ3RoRmluYWx9O2IucHJvdG90eXBlLl9nZXRMZW5ndGg9ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3ZhciBwPVtdO2lmKHRoaXMuc0ZpbHRlclBhcmFtcyl7cC5wdXNoKHRoaXMuc0ZpbHRlclBhcmFtcyl9aWYodGhpcy5tUGFyYW1ldGVycyYmdGhpcy5tUGFyYW1ldGVycy5jdXN0b20pe3ZhciBjPXtjdXN0b206e319O3EuZWFjaCh0aGlzLm1QYXJhbWV0ZXJzLmN1c3RvbSxmdW5jdGlvbihzLHYpe2MuY3VzdG9tW3NdPXZ9KTtwLnB1c2godGhpcy5vTW9kZWwuY3JlYXRlQ3VzdG9tUGFyYW1zKGMpKX1mdW5jdGlvbiBfKG8pe3QuaUxlbmd0aD1wYXJzZUludChvLDEwKTt0LmJMZW5ndGhGaW5hbD10cnVlfWZ1bmN0aW9uIGQoZSl7dmFyIEU9IlJlcXVlc3QgZm9yICRjb3VudCBmYWlsZWQ6ICIrZS5tZXNzYWdlO2lmKGUucmVzcG9uc2Upe0UrPSIsICIrZS5yZXNwb25zZS5zdGF0dXNDb2RlKyIsICIrZS5yZXNwb25zZS5zdGF0dXNUZXh0KyIsICIrZS5yZXNwb25zZS5ib2R5fXEuc2FwLmxvZy53YXJuaW5nKEUpfXZhciBQPXRoaXMub01vZGVsLnJlc29sdmUodGhpcy5zUGF0aCx0aGlzLm9Db250ZXh0KTtpZihQKXt2YXIgdT10aGlzLm9Nb2RlbC5fY3JlYXRlUmVxdWVzdFVybChQKyIvJGNvdW50IixudWxsLHApO3ZhciByPXRoaXMub01vZGVsLl9jcmVhdGVSZXF1ZXN0KHUsIkdFVCIsZmFsc2UpO3IuaGVhZGVyc1siQWNjZXB0Il09InRleHQvcGxhaW4sICovKjtxPTAuNSI7dGhpcy5vTW9kZWwuX3JlcXVlc3QocixfLGQsdW5kZWZpbmVkLHVuZGVmaW5lZCx0aGlzLm9Nb2RlbC5nZXRTZXJ2aWNlTWV0YWRhdGEoKSl9fTtiLnByb3RvdHlwZS5yZWZyZXNoPWZ1bmN0aW9uKGYsYyxlKXt2YXIgZD1mYWxzZTtpZighZil7aWYoZSl7dmFyIHI9dGhpcy5vTW9kZWwucmVzb2x2ZSh0aGlzLnNQYXRoLHRoaXMub0NvbnRleHQpO3ZhciBFPXRoaXMub01vZGVsLm9NZXRhZGF0YS5fZ2V0RW50aXR5VHlwZUJ5UGF0aChyKTtpZihFJiYoRS5lbnRpdHlUeXBlIGluIGUpKXtkPXRydWV9fWlmKGMmJiFkKXtxLmVhY2godGhpcy5hS2V5cyxmdW5jdGlvbihpLGspe2lmKGsgaW4gYyl7ZD10cnVlO3JldHVybiBmYWxzZX19KX1pZighYyYmIWUpe2Q9dHJ1ZX19aWYoZnx8ZCl7dGhpcy5hYm9ydFBlbmRpbmdSZXF1ZXN0KCk7dGhpcy5yZXNldERhdGEoKTt0aGlzLl9maXJlUmVmcmVzaCh7cmVhc29uOnNhcC51aS5tb2RlbC5DaGFuZ2VSZWFzb24uUmVmcmVzaH0pfX07Yi5wcm90b3R5cGUuX2ZpcmVSZWZyZXNoPWZ1bmN0aW9uKEEpe2lmKHRoaXMub01vZGVsLnJlc29sdmUodGhpcy5zUGF0aCx0aGlzLm9Db250ZXh0KSl7dGhpcy5iUmVmcmVzaD10cnVlO3RoaXMuZmlyZUV2ZW50KCJyZWZyZXNoIixBKX19O2IucHJvdG90eXBlLmluaXRpYWxpemU9ZnVuY3Rpb24oKXtpZih0aGlzLm9Nb2RlbC5vTWV0YWRhdGEuaXNMb2FkZWQoKSl7aWYodGhpcy5iRGF0YUF2YWlsYWJsZSl7dGhpcy5fZmlyZUNoYW5nZSh7cmVhc29uOnNhcC51aS5tb2RlbC5DaGFuZ2VSZWFzb24uQ2hhbmdlfSl9ZWxzZXt0aGlzLl9maXJlUmVmcmVzaCh7cmVhc29uOnNhcC51aS5tb2RlbC5DaGFuZ2VSZWFzb24uUmVmcmVzaH0pfX19O2IucHJvdG90eXBlLmNoZWNrVXBkYXRlPWZ1bmN0aW9uKGYsYyl7dmFyIGQ9dGhpcy5zQ2hhbmdlUmVhc29uP3RoaXMuc0NoYW5nZVJlYXNvbjpzYXAudWkubW9kZWwuQ2hhbmdlUmVhc29uLkNoYW5nZSxlPWZhbHNlLGwsbyx0PXRoaXMscixSO2lmKHRoaXMuYlN1c3BlbmRlZCYmIXRoaXMuYklnbm9yZVN1c3BlbmQpcmV0dXJuO2lmKCFmJiYhdGhpcy5iTmVlZHNVcGRhdGUpe3I9dGhpcy5vTW9kZWwuX2dldE9iamVjdCh0aGlzLnNQYXRoLHRoaXMub0NvbnRleHQpO1I9cS5pc0FycmF5KHIpJiYhcS5zYXAuZXF1YWwocix0aGlzLmFFeHBhbmRSZWZzKTt0aGlzLmFFeHBhbmRSZWZzPXI7aWYoUil7aWYodGhpcy5hU29ydGVycy5sZW5ndGg+MHx8dGhpcy5hRmlsdGVycy5sZW5ndGg+MCl7dGhpcy5yZWZyZXNoKCk7cmV0dXJufWVsc2V7dGhpcy5hS2V5cz1yO3RoaXMuaUxlbmd0aD1yLmxlbmd0aDt0aGlzLmJMZW5ndGhGaW5hbD10cnVlO2U9dHJ1ZX19ZWxzZSBpZihjKXtxLmVhY2godGhpcy5hS2V5cyxmdW5jdGlvbihpLGspe2lmKGsgaW4gYyl7ZT10cnVlO3JldHVybiBmYWxzZX19KX1lbHNle2U9dHJ1ZX1pZihlJiZ0aGlzLmFMYXN0Q29udGV4dHMpe2U9ZmFsc2U7dmFyIGc9dGhpcy5fZ2V0Q29udGV4dHModGhpcy5pTGFzdFN0YXJ0SW5kZXgsdGhpcy5pTGFzdExlbmd0aCx0aGlzLmlMYXN0VGhyZXNob2xkKTtpZih0aGlzLmFMYXN0Q29udGV4dHMubGVuZ3RoIT1nLmxlbmd0aCl7ZT10cnVlfWVsc2V7cS5lYWNoKHRoaXMuYUxhc3RDb250ZXh0cyxmdW5jdGlvbihpLGgpe2w9dC5vTGFzdENvbnRleHREYXRhW2guZ2V0UGF0aCgpXTtvPWdbaV0uZ2V0T2JqZWN0KCk7aWYoIXEuc2FwLmVxdWFsKGwsbywzLHRydWUpKXtlPXRydWU7cmV0dXJuIGZhbHNlfX0pfX19aWYoZnx8ZXx8dGhpcy5iTmVlZHNVcGRhdGUpe3RoaXMuYk5lZWRzVXBkYXRlPWZhbHNlO3RoaXMuX2ZpcmVDaGFuZ2Uoe3JlYXNvbjpkfSl9dGhpcy5zQ2hhbmdlUmVhc29uPXVuZGVmaW5lZDt0aGlzLmJJZ25vcmVTdXNwZW5kPWZhbHNlfTtiLnByb3RvdHlwZS5yZXNldERhdGE9ZnVuY3Rpb24oKXt0aGlzLmFLZXlzPVtdO3RoaXMuaUxlbmd0aD0wO3RoaXMuYkxlbmd0aEZpbmFsPWZhbHNlO3RoaXMuc0NoYW5nZVJlYXNvbj11bmRlZmluZWQ7dGhpcy5iRGF0YUF2YWlsYWJsZT1mYWxzZTtpZih0aGlzLm9Nb2RlbC5pc0NvdW50U3VwcG9ydGVkKCkmJih0aGlzLnNDb3VudE1vZGU9PUMuUmVxdWVzdHx8dGhpcy5zQ291bnRNb2RlPT1DLkJvdGgpKXt0aGlzLl9nZXRMZW5ndGgoKX19O2IucHJvdG90eXBlLmFib3J0UGVuZGluZ1JlcXVlc3Q9ZnVuY3Rpb24oKXtpZih0aGlzLm9SZXF1ZXN0SGFuZGxlKXt0aGlzLm9SZXF1ZXN0SGFuZGxlLmFib3J0KCk7dGhpcy5vUmVxdWVzdEhhbmRsZT1udWxsO3RoaXMuYlBlbmRpbmdSZXF1ZXN0PWZhbHNlfX07Yi5wcm90b3R5cGUuc29ydD1mdW5jdGlvbihzKXtpZihzIGluc3RhbmNlb2Ygc2FwLnVpLm1vZGVsLlNvcnRlcil7cz1bc119dGhpcy5hU29ydGVycz1zO3RoaXMuY3JlYXRlU29ydFBhcmFtcyhzKTt0aGlzLmFib3J0UGVuZGluZ1JlcXVlc3QoKTt0aGlzLmFLZXlzPVtdO2lmKCF0aGlzLmJJbml0aWFsKXtpZih0aGlzLm9SZXF1ZXN0SGFuZGxlKXt0aGlzLm9SZXF1ZXN0SGFuZGxlLmFib3J0KCk7dGhpcy5vUmVxdWVzdEhhbmRsZT1udWxsO3RoaXMuYlBlbmRpbmdSZXF1ZXN0PWZhbHNlfXRoaXMuc0NoYW5nZVJlYXNvbj1zYXAudWkubW9kZWwuQ2hhbmdlUmVhc29uLlNvcnQ7dGhpcy5fZmlyZVJlZnJlc2goe3JlYXNvbjp0aGlzLnNDaGFuZ2VSZWFzb259KTt0aGlzLl9maXJlU29ydCh7c29ydGVyOnN9KX1yZXR1cm4gdGhpc307Yi5wcm90b3R5cGUuY3JlYXRlU29ydFBhcmFtcz1mdW5jdGlvbihzKXt0aGlzLnNTb3J0UGFyYW1zPU8uY3JlYXRlU29ydFBhcmFtcyhzKX07Yi5wcm90b3R5cGUuZmlsdGVyPWZ1bmN0aW9uKGYscyl7aWYoIWYpe2Y9W119aWYoZiBpbnN0YW5jZW9mIHNhcC51aS5tb2RlbC5GaWx0ZXIpe2Y9W2ZdfWlmKHM9PUYuQXBwbGljYXRpb24pe3RoaXMuYUFwcGxpY2F0aW9uRmlsdGVycz1mfWVsc2V7dGhpcy5hRmlsdGVycz1mfWlmKCFmfHwhcS5pc0FycmF5KGYpfHxmLmxlbmd0aD09MCl7dGhpcy5hRmlsdGVycz1bXX1pZighdGhpcy5hQXBwbGljYXRpb25GaWx0ZXJzfHwhcS5pc0FycmF5KHRoaXMuYUFwcGxpY2F0aW9uRmlsdGVycyl8fHRoaXMuYUFwcGxpY2F0aW9uRmlsdGVycy5sZW5ndGg9PT0wKXt0aGlzLmFBcHBsaWNhdGlvbkZpbHRlcnM9W119dGhpcy5jcmVhdGVGaWx0ZXJQYXJhbXModGhpcy5hRmlsdGVycyx0aGlzLmFBcHBsaWNhdGlvbkZpbHRlcnMpO3RoaXMuYWJvcnRQZW5kaW5nUmVxdWVzdCgpO3RoaXMucmVzZXREYXRhKCk7aWYoIXRoaXMuYkluaXRpYWwpe2lmKHRoaXMub1JlcXVlc3RIYW5kbGUpe3RoaXMub1JlcXVlc3RIYW5kbGUuYWJvcnQoKTt0aGlzLm9SZXF1ZXN0SGFuZGxlPW51bGw7dGhpcy5iUGVuZGluZ1JlcXVlc3Q9ZmFsc2V9dGhpcy5zQ2hhbmdlUmVhc29uPXNhcC51aS5tb2RlbC5DaGFuZ2VSZWFzb24uRmlsdGVyO3RoaXMuX2ZpcmVSZWZyZXNoKHtyZWFzb246dGhpcy5zQ2hhbmdlUmVhc29ufSk7aWYocz09Ri5BcHBsaWNhdGlvbil7dGhpcy5fZmlyZUZpbHRlcih7ZmlsdGVyczp0aGlzLmFBcHBsaWNhdGlvbkZpbHRlcnN9KX1lbHNle3RoaXMuX2ZpcmVGaWx0ZXIoe2ZpbHRlcnM6dGhpcy5hRmlsdGVyc30pfX1yZXR1cm4gdGhpc307Yi5wcm90b3R5cGUuY3JlYXRlRmlsdGVyUGFyYW1zPWZ1bmN0aW9uKGMsQSl7dmFyIGYscz1PLl9jcmVhdGVGaWx0ZXJQYXJhbXMoYyx0aGlzLm9Nb2RlbC5vTWV0YWRhdGEsdGhpcy5vRW50aXR5VHlwZSksZD1PLl9jcmVhdGVGaWx0ZXJQYXJhbXMoQSx0aGlzLm9Nb2RlbC5vTWV0YWRhdGEsdGhpcy5vRW50aXR5VHlwZSk7aWYocyl7Zj1zfWlmKGQpe2lmKHMpe2Y9IigiK2YrIikiKyIlMjBhbmQlMjAiKyIoIitkKyIpIn1lbHNle2Y9ZH19aWYoZil7dGhpcy5zRmlsdGVyUGFyYW1zPSIkZmlsdGVyPSIrZn1lbHNle3RoaXMuc0ZpbHRlclBhcmFtcz11bmRlZmluZWR9fTtiLnByb3RvdHlwZS5faW5pdFNvcnRlcnNGaWx0ZXJzPWZ1bmN0aW9uKCl7dmFyIHI9dGhpcy5vTW9kZWwucmVzb2x2ZSh0aGlzLnNQYXRoLHRoaXMub0NvbnRleHQpO2lmKCFyKXtyZXR1cm59dGhpcy5vRW50aXR5VHlwZT10aGlzLl9nZXRFbnRpdHlUeXBlKCk7dGhpcy5jcmVhdGVTb3J0UGFyYW1zKHRoaXMuYVNvcnRlcnMpO3RoaXMuY3JlYXRlRmlsdGVyUGFyYW1zKHRoaXMuYUZpbHRlcnMuY29uY2F0KHRoaXMuYUFwcGxpY2F0aW9uRmlsdGVycykpfTtiLnByb3RvdHlwZS5fZ2V0RW50aXR5VHlwZT1mdW5jdGlvbigpe3ZhciByPXRoaXMub01vZGVsLnJlc29sdmUodGhpcy5zUGF0aCx0aGlzLm9Db250ZXh0KTtpZihyKXt2YXIgZT10aGlzLm9Nb2RlbC5vTWV0YWRhdGEuX2dldEVudGl0eVR5cGVCeVBhdGgocik7cmV0dXJuIGV9cmV0dXJuIHVuZGVmaW5lZH07Yi5wcm90b3R5cGUucmVzdW1lPWZ1bmN0aW9uKCl7dGhpcy5iSWdub3JlU3VzcGVuZD1mYWxzZTtMLnByb3RvdHlwZS5yZXN1bWUuYXBwbHkodGhpcyxhcmd1bWVudHMpfTtyZXR1cm4gYn0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5tb2RlbC5vZGF0YS5PRGF0YVByb3BlcnR5QmluZGluZycpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5tb2RlbC5vZGF0YS5PRGF0YVByb3BlcnR5QmluZGluZycpO3NhcC51aS5kZWZpbmUoInNhcC91aS9tb2RlbC9vZGF0YS9PRGF0YVByb3BlcnR5QmluZGluZyIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ3NhcC91aS9tb2RlbC9Qcm9wZXJ0eUJpbmRpbmcnXSxmdW5jdGlvbihxLFApeyJ1c2Ugc3RyaWN0Ijt2YXIgTz1QLmV4dGVuZCgic2FwLnVpLm1vZGVsLm9kYXRhLk9EYXRhUHJvcGVydHlCaW5kaW5nIix7Y29uc3RydWN0b3I6ZnVuY3Rpb24obSxwLGMsYSl7UC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5vVmFsdWU9dGhpcy5fZ2V0VmFsdWUoKX19KTtPLnByb3RvdHlwZS5pbml0aWFsaXplPWZ1bmN0aW9uKCl7aWYodGhpcy5vTW9kZWwub01ldGFkYXRhLmlzTG9hZGVkKCkpe3RoaXMuY2hlY2tVcGRhdGUodHJ1ZSl9fTtPLnByb3RvdHlwZS5nZXRWYWx1ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLm9WYWx1ZX07Ty5wcm90b3R5cGUuX2dldFZhbHVlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub01vZGVsLl9nZXRPYmplY3QodGhpcy5zUGF0aCx0aGlzLm9Db250ZXh0KX07Ty5wcm90b3R5cGUuc2V0VmFsdWU9ZnVuY3Rpb24odil7aWYodGhpcy5vVmFsdWUhPXYpe2lmKCF0aGlzLm9Nb2RlbC5zZXRQcm9wZXJ0eSh0aGlzLnNQYXRoLHYsdGhpcy5vQ29udGV4dCkpe3RoaXMuX2ZpcmVDaGFuZ2UoKX19fTtPLnByb3RvdHlwZS5zZXRDb250ZXh0PWZ1bmN0aW9uKGMpe2lmKHRoaXMub0NvbnRleHQhPWMpe3RoaXMub0NvbnRleHQ9YztpZih0aGlzLmlzUmVsYXRpdmUoKSl7dGhpcy5jaGVja1VwZGF0ZSgpfX19O08ucHJvdG90eXBlLmNoZWNrVXBkYXRlPWZ1bmN0aW9uKGYpe3ZhciB2PXRoaXMuX2dldFZhbHVlKCk7aWYoIXEuc2FwLmVxdWFsKHYsdGhpcy5vVmFsdWUpfHxmKXt0aGlzLm9WYWx1ZT12O3RoaXMuX2ZpcmVDaGFuZ2Uoe3JlYXNvbjpzYXAudWkubW9kZWwuQ2hhbmdlUmVhc29uLkNoYW5nZX0pfX07cmV0dXJuIE99LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkubW9kZWwucmVzb3VyY2UuUmVzb3VyY2VQcm9wZXJ0eUJpbmRpbmcnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkubW9kZWwucmVzb3VyY2UuUmVzb3VyY2VQcm9wZXJ0eUJpbmRpbmcnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvbW9kZWwvcmVzb3VyY2UvUmVzb3VyY2VQcm9wZXJ0eUJpbmRpbmciLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvbW9kZWwvUHJvcGVydHlCaW5kaW5nJywnc2FwL3VpL21vZGVsL0NoYW5nZVJlYXNvbiddLGZ1bmN0aW9uKHEsUCxDKXsidXNlIHN0cmljdCI7dmFyIFI9UC5leHRlbmQoInNhcC51aS5tb2RlbC5yZXNvdXJjZS5SZXNvdXJjZVByb3BlcnR5QmluZGluZyIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKG0scCl7UC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5vVmFsdWU9dGhpcy5vTW9kZWwuZ2V0UHJvcGVydHkocCl9fSk7Ui5wcm90b3R5cGUuZ2V0VmFsdWU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vVmFsdWV9O1IucHJvdG90eXBlLmNoZWNrVXBkYXRlPWZ1bmN0aW9uKGYpe2lmKCF0aGlzLmJTdXNwZW5kZWQpe3ZhciB2PXRoaXMub01vZGVsLmdldFByb3BlcnR5KHRoaXMuc1BhdGgpO2lmKGZ8fHYhPXRoaXMub1ZhbHVlKXt0aGlzLm9WYWx1ZT12O3RoaXMuX2ZpcmVDaGFuZ2Uoe3JlYXNvbjpDLkNoYW5nZX0pfX19O3JldHVybiBSfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLm1vZGVsLnhtbC5YTUxMaXN0QmluZGluZycpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5tb2RlbC54bWwuWE1MTGlzdEJpbmRpbmcnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvbW9kZWwveG1sL1hNTExpc3RCaW5kaW5nIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL21vZGVsL0NoYW5nZVJlYXNvbicsJ3NhcC91aS9tb2RlbC9DbGllbnRMaXN0QmluZGluZyddLGZ1bmN0aW9uKHEsQyxhKXsidXNlIHN0cmljdCI7dmFyIFg9YS5leHRlbmQoInNhcC51aS5tb2RlbC54bWwuWE1MTGlzdEJpbmRpbmciKTtYLnByb3RvdHlwZS5nZXRDb250ZXh0cz1mdW5jdGlvbihzLGwpe3RoaXMuaUxhc3RTdGFydEluZGV4PXM7dGhpcy5pTGFzdExlbmd0aD1sO2lmKCFzKXtzPTB9aWYoIWwpe2w9TWF0aC5taW4odGhpcy5pTGVuZ3RoLHRoaXMub01vZGVsLmlTaXplTGltaXQpfXZhciBjPXRoaXMuX2dldENvbnRleHRzKHMsbCksbz17fTtpZih0aGlzLmJVc2VFeHRlbmRlZENoYW5nZURldGVjdGlvbil7Zm9yKHZhciBpPTA7aTxjLmxlbmd0aDtpKyspe29bY1tpXS5nZXRQYXRoKCldPXRoaXMub01vZGVsLl9nZXRPYmplY3QoY1tpXS5nZXRQYXRoKCkpWzBdfWlmKHRoaXMuYUxhc3RDb250ZXh0cyYmczx0aGlzLmlMYXN0RW5kSW5kZXgpe3ZhciB0PXRoaXM7dmFyIGQ9cS5zYXAuYXJyYXlEaWZmKHRoaXMuYUxhc3RDb250ZXh0cyxjLGZ1bmN0aW9uKE8sbil7dmFyIGI9dC5vTGFzdENvbnRleHREYXRhJiZ0Lm9MYXN0Q29udGV4dERhdGFbTy5nZXRQYXRoKCldO3ZhciBOPW8mJm9bbi5nZXRQYXRoKCldO2lmKGImJk4pe3JldHVybiBxLnNhcC5pc0VxdWFsTm9kZShiLE4pfXJldHVybiBmYWxzZX0pO2MuZGlmZj1kfXRoaXMuaUxhc3RFbmRJbmRleD1zK2w7dGhpcy5hTGFzdENvbnRleHRzPWMuc2xpY2UoMCk7dGhpcy5vTGFzdENvbnRleHREYXRhPXt9O3ZhciB0PXRoaXM7cS5lYWNoKG8sZnVuY3Rpb24oayxuKXt0Lm9MYXN0Q29udGV4dERhdGFba109bi5jbG9uZU5vZGUodHJ1ZSl9KX1yZXR1cm4gY307WC5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKCl7dmFyIGw9dGhpcy5vTW9kZWwuX2dldE9iamVjdCh0aGlzLnNQYXRoLHRoaXMub0NvbnRleHQpO2lmKGwpe3RoaXMub0xpc3Q9W107dmFyIHQ9dGhpcztpZih0aGlzLmJVc2VFeHRlbmRlZENoYW5nZURldGVjdGlvbil7cS5lYWNoKGwsZnVuY3Rpb24oayxuKXt0Lm9MaXN0LnB1c2gobi5jbG9uZU5vZGUodHJ1ZSkpfSl9ZWxzZXt0aGlzLm9MaXN0PWwuc2xpY2UoMCl9dGhpcy51cGRhdGVJbmRpY2VzKCk7dGhpcy5hcHBseUZpbHRlcigpO3RoaXMuYXBwbHlTb3J0KCk7dGhpcy5pTGVuZ3RoPXRoaXMuX2dldExlbmd0aCgpfWVsc2V7dGhpcy5vTGlzdD1bXTt0aGlzLmFJbmRpY2VzPVtdO3RoaXMuaUxlbmd0aD0wfX07WC5wcm90b3R5cGUuY2hlY2tVcGRhdGU9ZnVuY3Rpb24oZil7aWYodGhpcy5iU3VzcGVuZGVkJiYhdGhpcy5iSWdub3JlU3VzcGVuZClyZXR1cm47aWYoIXRoaXMuYlVzZUV4dGVuZGVkQ2hhbmdlRGV0ZWN0aW9uKXt2YXIgbD10aGlzLm9Nb2RlbC5fZ2V0T2JqZWN0KHRoaXMuc1BhdGgsdGhpcy5vQ29udGV4dCk7aWYoIXRoaXMub0xpc3R8fCFsfHxsLmxlbmd0aCE9dGhpcy5vTGlzdC5sZW5ndGh8fGYpe3RoaXMudXBkYXRlKCk7dGhpcy5fZmlyZUNoYW5nZSh7cmVhc29uOkMuQ2hhbmdlfSl9fWVsc2V7dmFyIGM9ZmFsc2U7dmFyIHQ9dGhpczt2YXIgbD10aGlzLm9Nb2RlbC5fZ2V0T2JqZWN0KHRoaXMuc1BhdGgsdGhpcy5vQ29udGV4dCk7aWYoIXEuc2FwLmVxdWFsKHRoaXMub0xpc3QsbCkpe3RoaXMudXBkYXRlKCl9dmFyIGI9dGhpcy5fZ2V0Q29udGV4dHModGhpcy5pTGFzdFN0YXJ0SW5kZXgsdGhpcy5pTGFzdExlbmd0aCk7aWYodGhpcy5hTGFzdENvbnRleHRzKXtpZih0aGlzLmFMYXN0Q29udGV4dHMubGVuZ3RoIT1iLmxlbmd0aCl7Yz10cnVlfWVsc2V7cS5lYWNoKHRoaXMuYUxhc3RDb250ZXh0cyxmdW5jdGlvbihpLG8pe3ZhciBuPWJbaV0uZ2V0T2JqZWN0KCk7dmFyIE89dC5vTGFzdENvbnRleHREYXRhJiZ0Lm9MYXN0Q29udGV4dERhdGFbby5nZXRQYXRoKCldO2lmKG4mJk8mJiFPLmlzRXF1YWxOb2RlKG4pKXtjPXRydWU7cmV0dXJuIGZhbHNlfX0pfX1lbHNle2M9dHJ1ZX1pZihjfHxmKXt0aGlzLl9maXJlQ2hhbmdlKHtyZWFzb246Qy5DaGFuZ2V9KX19fTtyZXR1cm4gWH0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5tb2RlbC54bWwuWE1MVHJlZUJpbmRpbmcnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkubW9kZWwueG1sLlhNTFRyZWVCaW5kaW5nJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL21vZGVsL3htbC9YTUxUcmVlQmluZGluZyIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ3NhcC91aS9tb2RlbC9DbGllbnRUcmVlQmluZGluZyddLGZ1bmN0aW9uKHEsQyl7InVzZSBzdHJpY3QiO3ZhciBYPUMuZXh0ZW5kKCJzYXAudWkubW9kZWwueG1sLlhNTFRyZWVCaW5kaW5nIik7WC5wcm90b3R5cGUuZ2V0Tm9kZUNvbnRleHRzPWZ1bmN0aW9uKGMpe3ZhciBzPWMuZ2V0UGF0aCgpO2lmKCFxLnNhcC5lbmRzV2l0aChzLCIvIikpe3M9cysiLyJ9aWYoIXEuc2FwLnN0YXJ0c1dpdGgocywiLyIpKXtzPSIvIitzfXZhciBhPVtdLG49e30sdD10aGlzLE49dGhpcy5vTW9kZWwuX2dldE9iamVjdChjLmdldFBhdGgoKSksbyxiLGQ7cS5lYWNoKE5bMF0uY2hpbGROb2RlcyxmdW5jdGlvbihlLG8pe2lmKG8ubm9kZVR5cGU9PTEpe2lmKG5bby5ub2RlTmFtZV09PXVuZGVmaW5lZCl7bltvLm5vZGVOYW1lXT0wfWVsc2V7bltvLm5vZGVOYW1lXSsrfWI9cytvLm5vZGVOYW1lKyIvIituW28ubm9kZU5hbWVdO2Q9dC5vTW9kZWwuZ2V0Q29udGV4dChiKTtpZih0LmFGaWx0ZXJzJiYhdC5iSXNGaWx0ZXJpbmcpe2lmKHEuaW5BcnJheShkLHQuZmlsdGVySW5mby5hRmlsdGVyZWRDb250ZXh0cykhPS0xKXthLnB1c2goZCl9fWVsc2V7YS5wdXNoKGQpfX19KTtyZXR1cm4gYX07cmV0dXJuIFh9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS51dGlsLnNlcmlhbGl6ZXIuVmlld1NlcmlhbGl6ZXInKSl7DQovKg0KICogU0FQIFVJIGRldmVsb3BtZW50IHRvb2xraXQgZm9yIEhUTUw1IChTQVBVSTUvT3BlblVJNSkNCiAqIChjKSBDb3B5cmlnaHQgMjAwOS0yMDE0IFNBUCBTRSBvciBhbiBTQVAgYWZmaWxpYXRlIGNvbXBhbnkuIA0KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAtIHNlZSBMSUNFTlNFLnR4dC4NCiAqLw0KalF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS51dGlsLnNlcmlhbGl6ZXIuVmlld1NlcmlhbGl6ZXInKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS91dGlsL3NlcmlhbGl6ZXIvVmlld1NlcmlhbGl6ZXIiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvYmFzZS9FdmVudFByb3ZpZGVyJywnLi9IVE1MVmlld1NlcmlhbGl6ZXInLCcuL1NlcmlhbGl6ZXInLCcuL1hNTFZpZXdTZXJpYWxpemVyJ10sZnVuY3Rpb24ocSxFLEgsUyxYKXsidXNlIHN0cmljdCI7dmFyIFY9RS5leHRlbmQoInNhcC51aS5jb3JlLnV0aWwuc2VyaWFsaXplci5WaWV3U2VyaWFsaXplciIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKHIsdyxkKXtFLmFwcGx5KHRoaXMpO3RoaXMuX29Sb290Q29udHJvbD1yO3RoaXMuX29XaW5kb3c9d3x8d2luZG93O3RoaXMuX21WaWV3cz17fTt0aGlzLl9zRGVmYXVsdFhtbE5hbWVzcGFjZT1kfX0pO1YucHJvdG90eXBlLnNlcmlhbGl6ZVRvWE1MPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2VyaWFsaXplKCJYTUwiKX07Vi5wcm90b3R5cGUuc2VyaWFsaXplVG9IVE1MPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2VyaWFsaXplKCJIVE1MIil9O1YucHJvdG90eXBlLnNlcmlhbGl6ZT1mdW5jdGlvbihjKXt0aGlzLl9tVmlld3M9e307dGhpcy5fc0NvbnZlcnRUb1ZpZXdUeXBlPWN8fHVuZGVmaW5lZDtyZXR1cm4gdGhpcy5fc2VyaWFsaXplUmVjdXJzaXZlKHRoaXMuX29Sb290Q29udHJvbCl9O1YucHJvdG90eXBlLl9nZXRWaWV3VHlwZT1mdW5jdGlvbih2KXtpZighdGhpcy5fc0NvbnZlcnRUb1ZpZXdUeXBlKXtpZih2IGluc3RhbmNlb2YgdGhpcy5fb1dpbmRvdy5zYXAudWkuY29yZS5tdmMuSFRNTFZpZXcpe3JldHVybiJIVE1MIn1lbHNlIGlmKHYgaW5zdGFuY2VvZiB0aGlzLl9vV2luZG93LnNhcC51aS5jb3JlLm12Yy5YTUxWaWV3KXtyZXR1cm4iWE1MIn19cmV0dXJuIHRoaXMuX3NDb252ZXJ0VG9WaWV3VHlwZX07Vi5wcm90b3R5cGUuX3NlcmlhbGl6ZVJlY3Vyc2l2ZT1mdW5jdGlvbihjKXtpZihjIGluc3RhbmNlb2YgdGhpcy5fb1dpbmRvdy5zYXAudWkuY29yZS5tdmMuVmlldyl7dmFyIHY9dGhpcy5fZ2V0Vmlld1NlcmlhbGl6ZXIoYyx0aGlzLl9nZXRWaWV3VHlwZShjKSk7aWYodil7dmFyIG89Yy5nZXRWaWV3TmFtZSgpfHxjLmdldENvbnRyb2xsZXJOYW1lKCk7aWYoIXRoaXMuX21WaWV3c1tvXSl7dGhpcy5fbVZpZXdzW29dPXYuc2VyaWFsaXplKHRoaXMuX2dldFZpZXdUeXBlKGMpKX19fWlmKGMuZ2V0TWV0YWRhdGEoKS5nZXRDbGFzcygpPT09dGhpcy5fb1dpbmRvdy5zYXAudWkuY29yZS5VSUFyZWEpe3ZhciBDPWMuZ2V0Q29udGVudCgpO2Zvcih2YXIgaT0wO2k8Qy5sZW5ndGg7aSsrKXt0aGlzLl9zZXJpYWxpemVSZWN1cnNpdmUoQ1tpXSl9fWVsc2UgaWYoYy5nZXRNZXRhZGF0YSgpLmdldENsYXNzKCk9PT10aGlzLl9vV2luZG93LnNhcC51aS5jb3JlLkNvbXBvbmVudENvbnRhaW5lcil7dGhpcy5fc2VyaWFsaXplUmVjdXJzaXZlKGMuZ2V0Q29tcG9uZW50SW5zdGFuY2UoKS5nZXRBZ2dyZWdhdGlvbigicm9vdENvbnRyb2wiKSl9ZWxzZXt2YXIgYT1jLmdldE1ldGFkYXRhKCkuZ2V0QWxsQWdncmVnYXRpb25zKCk7aWYoYSl7Zm9yKHZhciBuIGluIGEpe3ZhciBBPWFbbl07dmFyIGI9Y1tBLl9zR2V0dGVyXSgpO2lmKGImJmIubGVuZ3RoKXtmb3IodmFyIGk9MDtpPGIubGVuZ3RoO2krKyl7dmFyIE89YltpXTtpZihPIGluc3RhbmNlb2YgdGhpcy5fb1dpbmRvdy5zYXAudWkuY29yZS5FbGVtZW50KXt0aGlzLl9zZXJpYWxpemVSZWN1cnNpdmUoTyl9fX1lbHNlIGlmKGIgaW5zdGFuY2VvZiB0aGlzLl9vV2luZG93LnNhcC51aS5jb3JlLkVsZW1lbnQpe3RoaXMuX3NlcmlhbGl6ZVJlY3Vyc2l2ZShiKX19fX1yZXR1cm4gdGhpcy5fbVZpZXdzfTtWLnByb3RvdHlwZS5fZ2V0Vmlld1NlcmlhbGl6ZXI9ZnVuY3Rpb24odix0KXt2YXIgZz1mdW5jdGlvbihlKXtpZihlLmZGdW5jdGlvbiYmZS5mRnVuY3Rpb24uX3NhcHVpX2hhbmRsZXJOYW1lKXt2YXIgaD1lLmZGdW5jdGlvbi5fc2FwdWlfaGFuZGxlck5hbWU7dmFyIGM9di5nZXRDb250cm9sbGVyKCk7aWYoY1toXSl7cmV0dXJuIGh9fX07dmFyIEc9ZnVuY3Rpb24oYyl7aWYoYy5fc2FwdWlfY29udHJvbElkKXtyZXR1cm4gYy5fc2FwdWlfY29udHJvbElkfXJldHVybiBjLmdldElkKCkucmVwbGFjZSh2LmNyZWF0ZUlkKCIiKSwiIil9O2lmKHQ9PT0iSFRNTCIpe3JldHVybiBuZXcgSCh2LHRoaXMuX29XaW5kb3csRyxnKX1lbHNlIGlmKHQ9PT0iWE1MIil7cmV0dXJuIG5ldyBYKHYsdGhpcy5fb1dpbmRvdyx0aGlzLl9zRGVmYXVsdFhtbE5hbWVzcGFjZSxHLGcpfWVsc2V7dmFyIHQ9KHYpP3YuY29uc3RydWN0b3I6Ij8iO3Rocm93IEVycm9yKCJWaWV3IHR5cGUgJyIrdCsiJyBpcyBub3Qgc3VwcG9ydGVkIGZvciBjb252ZXJzaW9uLiBPbmx5IEhUTUwgYW5kIFhNTCBpcyBzdXBwb3J0ZWQiKX19O3JldHVybiBWfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLm1vZGVsLkNsaWVudFByb3BlcnR5QmluZGluZycpKXsNCi8qIQ0KICogU0FQIFVJIGRldmVsb3BtZW50IHRvb2xraXQgZm9yIEhUTUw1IChTQVBVSTUvT3BlblVJNSkNCiAqIChjKSBDb3B5cmlnaHQgMjAwOS0yMDE0IFNBUCBTRSBvciBhbiBTQVAgYWZmaWxpYXRlIGNvbXBhbnkuIA0KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAtIHNlZSBMSUNFTlNFLnR4dC4NCiAqLw0KalF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkubW9kZWwuQ2xpZW50UHJvcGVydHlCaW5kaW5nJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL21vZGVsL0NsaWVudFByb3BlcnR5QmluZGluZyIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJy4vUHJvcGVydHlCaW5kaW5nJ10sZnVuY3Rpb24ocSxQKXsidXNlIHN0cmljdCI7dmFyIEM9UC5leHRlbmQoInNhcC51aS5tb2RlbC5DbGllbnRQcm9wZXJ0eUJpbmRpbmciLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbihtLHAsYyxhKXtQLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLm9WYWx1ZT10aGlzLl9nZXRWYWx1ZSgpfX0pO0MucHJvdG90eXBlLmdldFZhbHVlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub1ZhbHVlfTtDLnByb3RvdHlwZS5fZ2V0VmFsdWU9ZnVuY3Rpb24oKXt2YXIgcD10aGlzLnNQYXRoLnN1YnN0cih0aGlzLnNQYXRoLmxhc3RJbmRleE9mKCIvIikrMSk7aWYocD09Il9fbmFtZV9fIil7dmFyIGE9dGhpcy5vQ29udGV4dC5zcGxpdCgiLyIpO3JldHVybiBhW2EubGVuZ3RoLTFdfXJldHVybiB0aGlzLm9Nb2RlbC5nZXRQcm9wZXJ0eSh0aGlzLnNQYXRoLHRoaXMub0NvbnRleHQpfTtDLnByb3RvdHlwZS5zZXRDb250ZXh0PWZ1bmN0aW9uKGMpe2lmKHRoaXMub0NvbnRleHQhPWMpe3RoaXMub0NvbnRleHQ9YztpZih0aGlzLmlzUmVsYXRpdmUoKSl7dGhpcy5jaGVja1VwZGF0ZSgpfX19O3JldHVybiBDfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLm1vZGVsLkNvbXBvc2l0ZUJpbmRpbmcnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkubW9kZWwuQ29tcG9zaXRlQmluZGluZycpO3NhcC51aS5kZWZpbmUoInNhcC91aS9tb2RlbC9Db21wb3NpdGVCaW5kaW5nIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnLi9Qcm9wZXJ0eUJpbmRpbmcnLCcuL1NpbXBsZVR5cGUnXSxmdW5jdGlvbihxLFAsUyl7InVzZSBzdHJpY3QiO3ZhciBDPVAuZXh0ZW5kKCJzYXAudWkubW9kZWwuQ29tcG9zaXRlQmluZGluZyIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKGIscil7UC5hcHBseSh0aGlzLFtudWxsLCIiXSk7dmFyIHQ9dGhpczt0aGlzLmFCaW5kaW5ncz1iO3RoaXMuYlJhd1ZhbHVlcz1yfSxtZXRhZGF0YTp7cHVibGljTWV0aG9kczpbImdldEJpbmRpbmdzIiwiYXR0YWNoQ2hhbmdlIiwiZGV0YWNoQ2hhbmdlIl19fSk7Qy5wcm90b3R5cGUuZ2V0UGF0aD1mdW5jdGlvbigpe3JldHVybiBudWxsfTtDLnByb3RvdHlwZS5nZXRNb2RlbD1mdW5jdGlvbigpe3JldHVybiBudWxsfTtDLnByb3RvdHlwZS5nZXRDb250ZXh0PWZ1bmN0aW9uKCl7cmV0dXJuIG51bGx9O0MucHJvdG90eXBlLmdldFR5cGU9ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbH07Qy5wcm90b3R5cGUuc2V0Q29udGV4dD1mdW5jdGlvbihjKXtxLmVhY2godGhpcy5hQmluZGluZ3MsZnVuY3Rpb24oaSxiKXtpZighY3x8Yi51cGRhdGVSZXF1aXJlZChjLmdldE1vZGVsKCkpKXtiLnNldENvbnRleHQoYyl9fSl9O0MucHJvdG90eXBlLnNldFZhbHVlPWZ1bmN0aW9uKHYpe3Rocm93IG5ldyBzYXAudWkuYmFzZS5FeGNlcHRpb24oIkNvbXBvc2l0ZSBCaW5kaW5nIGRvZXMgbm90IHN1cHBvcnQgc2V0VmFsdWUgYmVjYXVzZSBpdCBjb250YWlucyBtdWx0aXBsZSBwcm9wZXJ0eSBiaW5kaW5ncyEiKX07Qy5wcm90b3R5cGUuZ2V0VmFsdWU9ZnVuY3Rpb24oKXt2YXIgdj1bXSxWO3EuZWFjaCh0aGlzLmFCaW5kaW5ncyxmdW5jdGlvbihpLGIpe1Y9Yi5nZXRWYWx1ZSgpO3YucHVzaChWKX0pO3JldHVybiB2fTtDLnByb3RvdHlwZS5nZXRFeHRlcm5hbFZhbHVlPWZ1bmN0aW9uKCl7dmFyIHY9W10sVjtpZih0aGlzLmJSYXdWYWx1ZXMpe3Y9dGhpcy5nZXRWYWx1ZSgpfWVsc2V7cS5lYWNoKHRoaXMuYUJpbmRpbmdzLGZ1bmN0aW9uKGksYil7Vj1iLmdldEV4dGVybmFsVmFsdWUoKTt2LnB1c2goVil9KX1pZih0aGlzLmZuRm9ybWF0dGVyKXtWPXRoaXMuZm5Gb3JtYXR0ZXIuYXBwbHkodGhpcyx2KX1lbHNle2lmKHYubGVuZ3RoPjEpe1Y9di5qb2luKCIgIil9ZWxzZXtWPXZbMF19fXJldHVybiBWfTtDLnByb3RvdHlwZS5zZXRFeHRlcm5hbFZhbHVlPWZ1bmN0aW9uKHYpe3Rocm93IG5ldyBzYXAudWkuYmFzZS5FeGNlcHRpb24oIkNvbXBvc2l0ZSBCaW5kaW5nIGRvZXMgbm90IHN1cHBvcnQgc2V0RXh0ZXJuYWxWYWx1ZSBiZWNhdXNlIGl0IGNvbnRhaW5zIG11bHRpcGxlIHByb3BlcnR5IGJpbmRpbmdzISIpfTtDLnByb3RvdHlwZS5nZXRCaW5kaW5ncz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmFCaW5kaW5nc307Qy5wcm90b3R5cGUuYXR0YWNoQ2hhbmdlPWZ1bmN0aW9uKGYsbCl7dGhpcy5hdHRhY2hFdmVudCgiY2hhbmdlIixmLGwpO2lmKHRoaXMuYUJpbmRpbmdzKXt2YXIgdD10aGlzO3EuZWFjaCh0aGlzLmFCaW5kaW5ncyxmdW5jdGlvbihpLGIpe2IuYXR0YWNoQ2hhbmdlKHQuY2hlY2tVcGRhdGUsdCl9KX19O0MucHJvdG90eXBlLmRldGFjaENoYW5nZT1mdW5jdGlvbihmLGwpe3RoaXMuZGV0YWNoRXZlbnQoImNoYW5nZSIsZixsKTtpZih0aGlzLmFCaW5kaW5ncyl7dmFyIHQ9dGhpcztxLmVhY2godGhpcy5hQmluZGluZ3MsZnVuY3Rpb24oaSxiKXtiLmRldGFjaENoYW5nZSh0LmNoZWNrVXBkYXRlLHQpfSl9fTtDLnByb3RvdHlwZS51cGRhdGVSZXF1aXJlZD1mdW5jdGlvbihtKXt2YXIgdT1mYWxzZTtxLmVhY2godGhpcy5hQmluZGluZ3MsZnVuY3Rpb24oaSxiKXt1PXV8fGIudXBkYXRlUmVxdWlyZWQobSl9KTtyZXR1cm4gdX07Qy5wcm90b3R5cGUuY2hlY2tVcGRhdGU9ZnVuY3Rpb24oZil7dmFyIHY9dGhpcy5nZXRFeHRlcm5hbFZhbHVlKCk7aWYoIXEuc2FwLmVxdWFsKHYsdGhpcy5vVmFsdWUpfHxmKXt0aGlzLm9WYWx1ZT12O3RoaXMuX2ZpcmVDaGFuZ2Uoe3JlYXNvbjpzYXAudWkubW9kZWwuQ2hhbmdlUmVhc29uLkNoYW5nZX0pfX07cmV0dXJuIEN9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkubW9kZWwuY29udHJvbC5Db250cm9sTW9kZWwnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkubW9kZWwuY29udHJvbC5Db250cm9sTW9kZWwnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvbW9kZWwvY29udHJvbC9Db250cm9sTW9kZWwiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvbW9kZWwvTW9kZWwnLCcuL0NvbnRyb2xQcm9wZXJ0eUJpbmRpbmcnXSxmdW5jdGlvbihxLE0sQyl7InVzZSBzdHJpY3QiO3ZhciBhPU0uZXh0ZW5kKCJzYXAudWkubW9kZWwuY29udHJvbC5Db250cm9sTW9kZWwiLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbihjKXtNLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLm9Db250cm9sPWM7dGhpcy5vQ29udHJvbC5hdHRhY2hFdmVudCgiX2NoYW5nZSIsdGhpcy5jaGVja1VwZGF0ZSx0aGlzKTt0aGlzLm9FbGVtZW50cz1bXX19KTthLnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKCl7dGhpcy5vQ29udHJvbC5kZXRhY2hFdmVudCgiX2NoYW5nZSIsdGhpcy5jaGVja1VwZGF0ZSx0aGlzKX07YS5wcm90b3R5cGUuYWRkRmFjYWRlQ29tcG9uZW50PWZ1bmN0aW9uKGUpe3ZhciBpPXEuaW5BcnJheShlLHRoaXMub0VsZW1lbnRzKTtpZihpPDApe3RoaXMub0VsZW1lbnRzLnB1c2goZSk7ZS5hdHRhY2hFdmVudCgiX2NoYW5nZSIsdGhpcy5jaGVja1VwZGF0ZSx0aGlzKX19O2EucHJvdG90eXBlLnJlbW92ZUZhY2FkZUNvbXBvbmVudD1mdW5jdGlvbihlKXt2YXIgaT1xLmluQXJyYXkoZSx0aGlzLm9FbGVtZW50cyk7aWYoaT49MCl7dGhpcy5vRWxlbWVudHMuc3BsaWNlKGksMSk7ZS5kZXRhY2hFdmVudCgiX2NoYW5nZSIsdGhpcy5jaGVja1VwZGF0ZSx0aGlzKX19O2EucHJvdG90eXBlLmJpbmRQcm9wZXJ0eT1mdW5jdGlvbihwLGMpe2M9Y3x8dGhpcy5vQ29udHJvbDtpZihjIT09dGhpcy5vQ29udHJvbCl7dGhpcy5hZGRGYWNhZGVDb21wb25lbnQoYyl9cmV0dXJuIG5ldyBDKHRoaXMscCxjKX07YS5wcm90b3R5cGUuY2hlY2tVcGRhdGU9ZnVuY3Rpb24oZSl7aWYodGhpcy5fb25jaGFuZ2Upe3RoaXMuX29uY2hhbmdlKGUpfWlmKHRoaXMuYUJpbmRpbmdzLmxlbmd0aCl7dmFyIGI9dGhpcy5hQmluZGluZ3Muc2xpY2UoMCk7cS5lYWNoKGIsZnVuY3Rpb24oaSxCKXtCLmNoZWNrVXBkYXRlKCl9KX19O3JldHVybiBhfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLm1vZGVsLmpzb24uSlNPTlByb3BlcnR5QmluZGluZycpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5tb2RlbC5qc29uLkpTT05Qcm9wZXJ0eUJpbmRpbmcnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvbW9kZWwvanNvbi9KU09OUHJvcGVydHlCaW5kaW5nIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL21vZGVsL0NsaWVudFByb3BlcnR5QmluZGluZyddLGZ1bmN0aW9uKHEsQyl7InVzZSBzdHJpY3QiO3ZhciBKPUMuZXh0ZW5kKCJzYXAudWkubW9kZWwuanNvbi5KU09OUHJvcGVydHlCaW5kaW5nIik7Si5wcm90b3R5cGUuc2V0VmFsdWU9ZnVuY3Rpb24odil7aWYoIXEuc2FwLmVxdWFsKHRoaXMub1ZhbHVlLHYpKXt0aGlzLm9Nb2RlbC5zZXRQcm9wZXJ0eSh0aGlzLnNQYXRoLHYsdGhpcy5vQ29udGV4dCl9fTtKLnByb3RvdHlwZS5jaGVja1VwZGF0ZT1mdW5jdGlvbihmKXt2YXIgdj10aGlzLl9nZXRWYWx1ZSgpO2lmKCFxLnNhcC5lcXVhbCh2LHRoaXMub1ZhbHVlKXx8Zil7dGhpcy5vVmFsdWU9djt0aGlzLl9maXJlQ2hhbmdlKHtyZWFzb246c2FwLnVpLm1vZGVsLkNoYW5nZVJlYXNvbi5DaGFuZ2V9KX19O3JldHVybiBKfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLm1vZGVsLm9kYXRhLk9EYXRhTW9kZWwnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkubW9kZWwub2RhdGEuT0RhdGFNb2RlbCcpO2pRdWVyeS5zYXAucmVxdWlyZSgnc2FwLnVpLnRoaXJkcGFydHkuZGF0YWpzJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL21vZGVsL29kYXRhL09EYXRhTW9kZWwiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvbW9kZWwvTW9kZWwnLCcuL09EYXRhVXRpbHMnLCcuL0NvdW50TW9kZScsJy4vT0RhdGFDb250ZXh0QmluZGluZycsJy4vT0RhdGFMaXN0QmluZGluZycsJy4vT0RhdGFNZXRhZGF0YScsJy4vT0RhdGFQcm9wZXJ0eUJpbmRpbmcnLCcuL09EYXRhVHJlZUJpbmRpbmcnLCdzYXAvdWkvdGhpcmRwYXJ0eS9VUkknLCdzYXAvdWkvdGhpcmRwYXJ0eS9kYXRhanMnXSxmdW5jdGlvbihxLE0sTyxDLGEsYixjLGQsZSxVLGYpeyJ1c2Ugc3RyaWN0Ijt2YXIgZz1NLmV4dGVuZCgic2FwLnVpLm1vZGVsLm9kYXRhLk9EYXRhTW9kZWwiLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbihzLGosdSxwLGgsdCx3LGwpe00uYXBwbHkodGhpcyxhcmd1bWVudHMpO3ZhciBpLHIsbSxBPW51bGwsTCxrLG4sRCxTLG8sdj10aGlzO2lmKHR5cGVvZiBqPT09Im9iamVjdCIpe3U9ai51c2VyO3A9ai5wYXNzd29yZDtoPWouaGVhZGVyczt0PWoudG9rZW5IYW5kbGluZztsPWoubG9hZE1ldGFkYXRhQXN5bmM7dz1qLndpdGhDcmVkZW50aWFsczttPWoubWF4RGF0YVNlcnZpY2VWZXJzaW9uO2k9ai51c2VCYXRjaDtyPWoucmVmcmVzaEFmdGVyQ2hhbmdlO0E9ai5hbm5vdGF0aW9uVVJJO0w9ai5sb2FkQW5ub3RhdGlvbnNKb2luZWQ7RD1qLmRlZmF1bHRDb3VudE1vZGU7bj1qLm1ldGFkYXRhTmFtZXNwYWNlcztTPWouc2VydmljZVVybFBhcmFtcztvPWoubWV0YWRhdGFVcmxQYXJhbXM7aj1qLmpzb259dGhpcy5zRGVmYXVsdEJpbmRpbmdNb2RlPXNhcC51aS5tb2RlbC5CaW5kaW5nTW9kZS5PbmVXYXk7dGhpcy5tU3VwcG9ydGVkQmluZGluZ01vZGVzPXsiT25lV2F5Ijp0cnVlLCJPbmVUaW1lIjp0cnVlLCJUd29XYXkiOnRydWV9O3RoaXMuYkNvdW50U3VwcG9ydGVkPXRydWU7dGhpcy5iSlNPTj1qO3RoaXMuYkNhY2hlPXRydWU7dGhpcy5hUGVuZGluZ1JlcXVlc3RIYW5kbGVzPVtdO3RoaXMub1JlcXVlc3RRdWV1ZT17fTt0aGlzLmFCYXRjaE9wZXJhdGlvbnM9W107dGhpcy5vSGFuZGxlcjt0aGlzLmJUb2tlbkhhbmRsaW5nPXQhPT1mYWxzZTt0aGlzLmJXaXRoQ3JlZGVudGlhbHM9dz09PXRydWU7dGhpcy5iVXNlQmF0Y2g9aT09PXRydWU7dGhpcy5iUmVmcmVzaEFmdGVyQ2hhbmdlPXIhPT1mYWxzZTt0aGlzLnNNYXhEYXRhU2VydmljZVZlcnNpb249bTt0aGlzLmJMb2FkTWV0YWRhdGFBc3luYz0hIWw7dGhpcy5iTG9hZEFubm90YXRpb25zSm9pbmVkPUw9PT11bmRlZmluZWQ/dHJ1ZTpMO3RoaXMuc0Fubm90YXRpb25VUkk9QTt0aGlzLnNEZWZhdWx0Q291bnRNb2RlPUR8fEMuQm90aDt0aGlzLm9NZXRhZGF0YUxvYWRFdmVudD1udWxsO3RoaXMub01ldGFkYXRhRmFpbGVkRXZlbnQ9bnVsbDtpZih0aGlzLnNBbm5vdGF0aW9uVVJJKXtxLnNhcC5yZXF1aXJlKCJzYXAudWkubW9kZWwub2RhdGEuT0RhdGFBbm5vdGF0aW9ucyIpfXRoaXMub0hlYWRlcnM9e307dGhpcy5zZXRIZWFkZXJzKGgpO3RoaXMub0RhdGE9e307dGhpcy5vTWV0YWRhdGE9bnVsbDt0aGlzLm9Bbm5vdGF0aW9ucz1udWxsO3RoaXMuYVVybFBhcmFtcz1bXTtpZihzLmluZGV4T2YoIj8iKT09LTEpe3RoaXMuc1NlcnZpY2VVcmw9c31lbHNle3ZhciB4PXMuc3BsaXQoIj8iKTt0aGlzLnNTZXJ2aWNlVXJsPXhbMF07dGhpcy5hVXJsUGFyYW1zLnB1c2goeFsxXSl9aWYoc2FwLnVpLmdldENvcmUoKS5nZXRDb25maWd1cmF0aW9uKCkuZ2V0U3RhdGlzdGljcygpKXt0aGlzLmFVcmxQYXJhbXMucHVzaCgic2FwLXN0YXRpc3RpY3M9dHJ1ZSIpfXRoaXMuc1NlcnZpY2VVcmw9dGhpcy5zU2VydmljZVVybC5yZXBsYWNlKC9cLyQvLCIiKTt0aGlzLm9TZXJ2aWNlRGF0YT1nLm1TZXJ2aWNlRGF0YVt0aGlzLnNTZXJ2aWNlVXJsXTtpZighdGhpcy5vU2VydmljZURhdGEpe2cubVNlcnZpY2VEYXRhW3RoaXMuc1NlcnZpY2VVcmxdPXt9O3RoaXMub1NlcnZpY2VEYXRhPWcubVNlcnZpY2VEYXRhW3RoaXMuc1NlcnZpY2VVcmxdfWlmKHRoaXMuYlRva2VuSGFuZGxpbmcmJnRoaXMub1NlcnZpY2VEYXRhLnNlY3VyaXR5VG9rZW4pe3RoaXMub0hlYWRlcnNbIngtY3NyZi10b2tlbiJdPXRoaXMub1NlcnZpY2VEYXRhLnNlY3VyaXR5VG9rZW59dGhpcy5zVXNlcj11O3RoaXMuc1Bhc3N3b3JkPXA7dGhpcy5vSGVhZGVyc1siQWNjZXB0LUxhbmd1YWdlIl09c2FwLnVpLmdldENvcmUoKS5nZXRDb25maWd1cmF0aW9uKCkuZ2V0TGFuZ3VhZ2UoKTtpZighdGhpcy5vU2VydmljZURhdGEub01ldGFkYXRhKXt0aGlzLm9NZXRhZGF0YT1uZXcgc2FwLnVpLm1vZGVsLm9kYXRhLk9EYXRhTWV0YWRhdGEodGhpcy5fY3JlYXRlUmVxdWVzdFVybCgiJG1ldGFkYXRhIix1bmRlZmluZWQsbykse2FzeW5jOnRoaXMuYkxvYWRNZXRhZGF0YUFzeW5jLHVzZXI6dGhpcy5zVXNlcixwYXNzd29yZDp0aGlzLnNQYXNzd29yZCxoZWFkZXJzOnRoaXMubUN1c3RvbUhlYWRlcnMsbmFtZXNwYWNlczpuLHdpdGhDcmVkZW50aWFsczp0aGlzLmJXaXRoQ3JlZGVudGlhbHN9KTt2Lm9TZXJ2aWNlRGF0YS5vTWV0YWRhdGE9di5vTWV0YWRhdGF9ZWxzZXt0aGlzLm9NZXRhZGF0YT10aGlzLm9TZXJ2aWNlRGF0YS5vTWV0YWRhdGF9aWYoUyl7dGhpcy5hVXJsUGFyYW1zPXRoaXMuYVVybFBhcmFtcy5jb25jYXQoTy5fY3JlYXRlVXJsUGFyYW1zQXJyYXkoUykpfWlmKCF0aGlzLm9NZXRhZGF0YS5pc0xvYWRlZCgpKXt0aGlzLm9NZXRhZGF0YS5hdHRhY2hMb2FkZWQoZnVuY3Rpb24oRSl7di5faW5pdGlhbGl6ZU1ldGFkYXRhKCk7di5pbml0aWFsaXplKCl9LHRoaXMpO3RoaXMub01ldGFkYXRhLmF0dGFjaEZhaWxlZCh0aGlzLmZpcmVNZXRhZGF0YUZhaWxlZCx0aGlzKX1pZih0aGlzLnNBbm5vdGF0aW9uVVJJKXt0aGlzLm9Bbm5vdGF0aW9ucz1uZXcgc2FwLnVpLm1vZGVsLm9kYXRhLk9EYXRhQW5ub3RhdGlvbnModGhpcy5zQW5ub3RhdGlvblVSSSx0aGlzLm9NZXRhZGF0YSx7YXN5bmM6dGhpcy5iTG9hZE1ldGFkYXRhQXN5bmN9KTt0aGlzLm9Bbm5vdGF0aW9ucy5hdHRhY2hGYWlsZWQodGhpcy5maXJlQW5ub3RhdGlvbnNGYWlsZWQsdGhpcyk7dGhpcy5vQW5ub3RhdGlvbnMuYXR0YWNoTG9hZGVkKHRoaXMuZmlyZUFubm90YXRpb25zTG9hZGVkLHRoaXMpfWlmKHRoaXMub01ldGFkYXRhLmlzTG9hZGVkKCkpe3RoaXMuX2luaXRpYWxpemVNZXRhZGF0YSh0cnVlKX1pZih0aGlzLmJKU09OKXtpZih0aGlzLnNNYXhEYXRhU2VydmljZVZlcnNpb249PT0iMy4wIil7dGhpcy5vSGVhZGVyc1siQWNjZXB0Il09ImFwcGxpY2F0aW9uL2pzb247b2RhdGE9ZnVsbG1ldGFkYXRhIn1lbHNle3RoaXMub0hlYWRlcnNbIkFjY2VwdCJdPSJhcHBsaWNhdGlvbi9qc29uIn10aGlzLm9IYW5kbGVyPU9EYXRhLmpzb25IYW5kbGVyfWVsc2V7dGhpcy5vSGVhZGVyc1siQWNjZXB0Il09ImFwcGxpY2F0aW9uL2F0b20reG1sLGFwcGxpY2F0aW9uL2F0b21zdmMreG1sLGFwcGxpY2F0aW9uL3htbCI7dGhpcy5vSGFuZGxlcj1PRGF0YS5hdG9tSGFuZGxlcn10aGlzLm9IZWFkZXJzWyJNYXhEYXRhU2VydmljZVZlcnNpb24iXT0iMi4wIjtpZih0aGlzLnNNYXhEYXRhU2VydmljZVZlcnNpb24pe3RoaXMub0hlYWRlcnNbIk1heERhdGFTZXJ2aWNlVmVyc2lvbiJdPXRoaXMuc01heERhdGFTZXJ2aWNlVmVyc2lvbn10aGlzLm9IZWFkZXJzWyJEYXRhU2VydmljZVZlcnNpb24iXT0iMi4wIn0sbWV0YWRhdGE6e3B1YmxpY01ldGhvZHM6WyJjcmVhdGUiLCJyZW1vdmUiLCJ1cGRhdGUiLCJzdWJtaXRDaGFuZ2VzIiwiZ2V0U2VydmljZU1ldGFkYXRhIiwicmVhZCIsImhhc1BlbmRpbmdDaGFuZ2VzIiwicmVmcmVzaCIsInJlc2V0Q2hhbmdlcyIsImlzQ291bnRTdXBwb3J0ZWQiLCJzZXRDb3VudFN1cHBvcnRlZCIsInNldERlZmF1bHRDb3VudE1vZGUiLCJnZXREZWZhdWx0Q291bnRNb2RlIiwiZm9yY2VOb0NhY2hlIiwic2V0UHJvcGVydHkiLCJyZWZyZXNoU2VjdXJpdHlUb2tlbiIsInNldEhlYWRlcnMiLCJnZXRIZWFkZXJzIiwic2V0VXNlQmF0Y2giXX19KTtnLk1fRVZFTlRTPXtSZWplY3RDaGFuZ2U6InJlamVjdENoYW5nZSIsTWV0YWRhdGFMb2FkZWQ6Im1ldGFkYXRhTG9hZGVkIixNZXRhZGF0YUZhaWxlZDoibWV0YWRhdGFGYWlsZWQiLEFubm90YXRpb25zTG9hZGVkOiJhbm5vdGF0aW9uc0xvYWRlZCIsQW5ub3RhdGlvbnNGYWlsZWQ6ImFubm90YXRpb25zRmFpbGVkIn07Zy5tU2VydmljZURhdGE9e307Zy5wcm90b3R5cGUuZmlyZVJlamVjdENoYW5nZT1mdW5jdGlvbihBKXt0aGlzLmZpcmVFdmVudCgicmVqZWN0Q2hhbmdlIixBKTtyZXR1cm4gdGhpc307Zy5wcm90b3R5cGUuYXR0YWNoUmVqZWN0Q2hhbmdlPWZ1bmN0aW9uKEQsRixsKXt0aGlzLmF0dGFjaEV2ZW50KCJyZWplY3RDaGFuZ2UiLEQsRixsKTtyZXR1cm4gdGhpc307Zy5wcm90b3R5cGUuZGV0YWNoUmVqZWN0Q2hhbmdlPWZ1bmN0aW9uKEYsbCl7dGhpcy5kZXRhY2hFdmVudCgicmVqZWN0Q2hhbmdlIixGLGwpO3JldHVybiB0aGlzfTtnLnByb3RvdHlwZS5faW5pdGlhbGl6ZU1ldGFkYXRhPWZ1bmN0aW9uKEQpe3ZhciB0PXRoaXM7dGhpcy5iVXNlQmF0Y2g9dGhpcy5iVXNlQmF0Y2h8fHRoaXMub01ldGFkYXRhLmdldFVzZUJhdGNoKCk7dmFyIGg9ZnVuY3Rpb24oaSl7aWYoISFpKXt0Lm1ldGFkYXRhTG9hZEV2ZW50PXEuc2FwLmRlbGF5ZWRDYWxsKDAsdCxoKX1lbHNle3QuZmlyZU1ldGFkYXRhTG9hZGVkKHttZXRhZGF0YTp0Lm9NZXRhZGF0YX0pO3Euc2FwLmxvZy5kZWJ1ZygiT0RhdGFNb2RlbCBmaXJlZCBtZXRhZGF0YWxvYWRlZCIpfX07aWYodGhpcy5iTG9hZE1ldGFkYXRhQXN5bmMmJnRoaXMuc0Fubm90YXRpb25VUkkmJnRoaXMuYkxvYWRBbm5vdGF0aW9uc0pvaW5lZCl7aWYodGhpcy5vQW5ub3RhdGlvbnMmJnRoaXMub0Fubm90YXRpb25zLmJJbml0aWFsaXplZCl7aCgpfWVsc2V7dGhpcy5vQW5ub3RhdGlvbnMuYXR0YWNoTG9hZGVkKGZ1bmN0aW9uKCl7aCgpfSx0aGlzKX19ZWxzZXtoKEQpfX07Zy5wcm90b3R5cGUuZmlyZUFubm90YXRpb25zTG9hZGVkPWZ1bmN0aW9uKEEpe3RoaXMuZmlyZUV2ZW50KCJhbm5vdGF0aW9uc0xvYWRlZCIsQSk7cmV0dXJuIHRoaXN9O2cucHJvdG90eXBlLmF0dGFjaEFubm90YXRpb25zTG9hZGVkPWZ1bmN0aW9uKEQsRixsKXt0aGlzLmF0dGFjaEV2ZW50KCJhbm5vdGF0aW9uc0xvYWRlZCIsRCxGLGwpO3JldHVybiB0aGlzfTtnLnByb3RvdHlwZS5kZXRhY2hBbm5vdGF0aW9uc0xvYWRlZD1mdW5jdGlvbihGLGwpe3RoaXMuZGV0YWNoRXZlbnQoImFubm90YXRpb25zTG9hZGVkIixGLGwpO3JldHVybiB0aGlzfTtnLnByb3RvdHlwZS5maXJlQW5ub3RhdGlvbnNGYWlsZWQ9ZnVuY3Rpb24oQSl7dGhpcy5maXJlRXZlbnQoImFubm90YXRpb25zRmFpbGVkIixBKTtxLnNhcC5sb2cuZGVidWcoIk9EYXRhTW9kZWwgZmlyZWQgYW5ub3RhdGlvbnNmYWlsZWQiKTtyZXR1cm4gdGhpc307Zy5wcm90b3R5cGUuYXR0YWNoQW5ub3RhdGlvbnNGYWlsZWQ9ZnVuY3Rpb24oRCxGLGwpe3RoaXMuYXR0YWNoRXZlbnQoImFubm90YXRpb25zRmFpbGVkIixELEYsbCk7cmV0dXJuIHRoaXN9O2cucHJvdG90eXBlLmRldGFjaEFubm90YXRpb25zRmFpbGVkPWZ1bmN0aW9uKEYsbCl7dGhpcy5kZXRhY2hFdmVudCgiYW5ub3RhdGlvbnNGYWlsZWQiLEYsbCk7cmV0dXJuIHRoaXN9O2cucHJvdG90eXBlLmZpcmVNZXRhZGF0YUxvYWRlZD1mdW5jdGlvbihBKXt0aGlzLmZpcmVFdmVudCgibWV0YWRhdGFMb2FkZWQiLEEpO3JldHVybiB0aGlzfTtnLnByb3RvdHlwZS5hdHRhY2hNZXRhZGF0YUxvYWRlZD1mdW5jdGlvbihELEYsbCl7dGhpcy5hdHRhY2hFdmVudCgibWV0YWRhdGFMb2FkZWQiLEQsRixsKTtyZXR1cm4gdGhpc307Zy5wcm90b3R5cGUuZGV0YWNoTWV0YWRhdGFMb2FkZWQ9ZnVuY3Rpb24oRixsKXt0aGlzLmRldGFjaEV2ZW50KCJtZXRhZGF0YUxvYWRlZCIsRixsKTtyZXR1cm4gdGhpc307Zy5wcm90b3R5cGUuZmlyZU1ldGFkYXRhRmFpbGVkPWZ1bmN0aW9uKEEpe3RoaXMuZmlyZUV2ZW50KCJtZXRhZGF0YUZhaWxlZCIsQSk7cmV0dXJuIHRoaXN9O2cucHJvdG90eXBlLmF0dGFjaE1ldGFkYXRhRmFpbGVkPWZ1bmN0aW9uKEQsRixsKXt0aGlzLmF0dGFjaEV2ZW50KCJtZXRhZGF0YUZhaWxlZCIsRCxGLGwpO3JldHVybiB0aGlzfTtnLnByb3RvdHlwZS5kZXRhY2hNZXRhZGF0YUZhaWxlZD1mdW5jdGlvbihGLGwpe3RoaXMuZGV0YWNoRXZlbnQoIm1ldGFkYXRhRmFpbGVkIixGLGwpO3JldHVybiB0aGlzfTtnLnByb3RvdHlwZS5fY3JlYXRlUmVxdWVzdFVybD1mdW5jdGlvbihwLG8sdSxCLGgpe3ZhciBpLHIscyxqPSIiO2lmKHAmJnAuaW5kZXhPZignPycpIT0tMSl7cz1wLnN1YnN0cihwLmluZGV4T2YoJz8nKSsxKTtwPXAuc3Vic3RyKDAscC5pbmRleE9mKCc/JykpfXI9dGhpcy5fbm9ybWFsaXplUGF0aChwLG8pO2lmKCFCKXtqPXRoaXMuc1NlcnZpY2VVcmwrcn1lbHNle2o9ci5zdWJzdHIoci5pbmRleE9mKCcvJykrMSl9aT1PLl9jcmVhdGVVcmxQYXJhbXNBcnJheSh1KTtpZih0aGlzLmFVcmxQYXJhbXMpe2k9aS5jb25jYXQodGhpcy5hVXJsUGFyYW1zKX1pZihzKXtpLnB1c2gocyl9aWYoaS5sZW5ndGg+MCl7ais9Ij8iK2kuam9pbigiJiIpfWlmKGg9PT11bmRlZmluZWQpe2g9dHJ1ZX1pZihoPT09ZmFsc2Upe3ZhciB0PXEubm93KCk7dmFyIGs9ai5yZXBsYWNlKC8oWz8mXSlfPVteJl0qLywiJDFfPSIrdCk7aj1rKygoaz09PWopPygvXD8vLnRlc3Qoaik/IiYiOiI/IikrIl89Iit0OiIiKX1yZXR1cm4gan07Zy5wcm90b3R5cGUuX2xvYWREYXRhPWZ1bmN0aW9uKHAsUCxzLEUsaCxILGkpe3ZhciByLFIsbyx0PXRoaXM7ZnVuY3Rpb24gXyhELG0pe3ZhciBuPUQsdj17fTtpZighbil7cS5zYXAubG9nLmZhdGFsKCJUaGUgZm9sbG93aW5nIHByb2JsZW0gb2NjdXJyZWQ6IE5vIGRhdGEgd2FzIHJldHJpZXZlZCBieSBzZXJ2aWNlOiAiK20ucmVxdWVzdFVyaSk7dC5maXJlUmVxdWVzdENvbXBsZXRlZCh7dXJsOm8ucmVxdWVzdFVyaSx0eXBlOiJHRVQiLGFzeW5jOm8uYXN5bmMsaW5mbzoiQWNjZXB0IGhlYWRlcnM6Iit0Lm9IZWFkZXJzWyJBY2NlcHQiXSxpbmZvT2JqZWN0OnthY2NlcHRIZWFkZXJzOnQub0hlYWRlcnNbIkFjY2VwdCJdfSxzdWNjZXNzOmZhbHNlfSk7cmV0dXJuIGZhbHNlfWlmKHQuYlVzZUJhdGNoKXt2YXIgdz10Ll9nZXRCYXRjaEVycm9ycyhEKTtpZih3Lmxlbmd0aD4wKXtqKHdbMF0pO3JldHVybiBmYWxzZX1pZihuLl9fYmF0Y2hSZXNwb25zZXMmJm4uX19iYXRjaFJlc3BvbnNlcy5sZW5ndGg+MCl7bj1uLl9fYmF0Y2hSZXNwb25zZXNbMF0uZGF0YX1lbHNle3Euc2FwLmxvZy5mYXRhbCgiVGhlIGZvbGxvd2luZyBwcm9ibGVtIG9jY3VycmVkOiBObyBkYXRhIHdhcyByZXRyaWV2ZWQgYnkgc2VydmljZTogIittLnJlcXVlc3RVcmkpfX1sPWwuY29uY2F0KG4ucmVzdWx0cyk7aWYobi5fX25leHQpe3ZhciB4PW5ldyBVUkkobi5fX25leHQpO28ucmVxdWVzdFVyaT14LmFic29sdXRlVG8obS5yZXF1ZXN0VXJpKS50b1N0cmluZygpO2sobyl9ZWxzZXtxLmV4dGVuZChuLnJlc3VsdHMsbCk7aWYobi5yZXN1bHRzJiYhcS5pc0FycmF5KG4ucmVzdWx0cykpe249bi5yZXN1bHRzfXQuX2ltcG9ydERhdGEobix2KTtpZih0LnNDaGFuZ2VLZXkmJnYpe3ZhciB5PXQuc0NoYW5nZUtleS5zdWJzdHIodC5zQ2hhbmdlS2V5Lmxhc3RJbmRleE9mKCcvJykrMSk7aWYodlt5XSl7ZGVsZXRlIHQub1JlcXVlc3RRdWV1ZVt0LnNDaGFuZ2VLZXldO3Quc0NoYW5nZUtleT1udWxsfX1pZihzKXtzKG4pfXQuY2hlY2tVcGRhdGUoZmFsc2Usdik7aWYoaSl7aShuKX10LmZpcmVSZXF1ZXN0Q29tcGxldGVkKHt1cmw6by5yZXF1ZXN0VXJpLHR5cGU6IkdFVCIsYXN5bmM6by5hc3luYyxpbmZvOiJBY2NlcHQgaGVhZGVyczoiK3Qub0hlYWRlcnNbIkFjY2VwdCJdLGluZm9PYmplY3Q6e2FjY2VwdEhlYWRlcnM6dC5vSGVhZGVyc1siQWNjZXB0Il19LHN1Y2Nlc3M6dHJ1ZX0pfX1mdW5jdGlvbiBqKG0pe2lmKHQuYlRva2VuSGFuZGxpbmcmJm0ucmVzcG9uc2Upe3ZhciBUPXQuX2dldEhlYWRlcigieC1jc3JmLXRva2VuIixtLnJlc3BvbnNlLmhlYWRlcnMpO2lmKCFvLmJUb2tlblJlc2V0JiZtLnJlc3BvbnNlLnN0YXR1c0NvZGU9PSc0MDMnJiZUJiZULnRvTG93ZXJDYXNlKCk9PSJyZXF1aXJlZCIpe3QucmVzZXRTZWN1cml0eVRva2VuKCk7by5iVG9rZW5SZXNldD10cnVlO2soKTtyZXR1cm59fXZhciBuPXQuX2hhbmRsZUVycm9yKG0pO2lmKEUpe0UobSxyJiZyLmJBYm9ydGVkKX10LmZpcmVSZXF1ZXN0Q29tcGxldGVkKHt1cmw6by5yZXF1ZXN0VXJpLHR5cGU6IkdFVCIsYXN5bmM6by5hc3luYyxpbmZvOiJBY2NlcHQgaGVhZGVyczoiK3Qub0hlYWRlcnNbIkFjY2VwdCJdLGluZm9PYmplY3Q6e2FjY2VwdEhlYWRlcnM6dC5vSGVhZGVyc1siQWNjZXB0Il19LHN1Y2Nlc3M6ZmFsc2UsZXJyb3JvYmplY3Q6bn0pO2lmKCFyfHwhci5iQWJvcnRlZCl7bi51cmw9by5yZXF1ZXN0VXJpO3QuZmlyZVJlcXVlc3RGYWlsZWQobil9fWZ1bmN0aW9uIGsoKXtpZih0LmJVc2VCYXRjaCl7dC51cGRhdGVTZWN1cml0eVRva2VuKCk7dmFyIG09VVJJLnBhcnNlKG8ucmVxdWVzdFVyaSkucXVlcnk7dmFyIG49dC5fY3JlYXRlUmVxdWVzdFVybChwLG51bGwsbSx0LmJVc2VCYXRjaCk7bz10Ll9jcmVhdGVSZXF1ZXN0KG4sIkdFVCIsdHJ1ZSk7dmFyIEI9dC5fY3JlYXRlQmF0Y2hSZXF1ZXN0KFtvXSx0cnVlKTtyPXQuX3JlcXVlc3QoQixfLGosT0RhdGEuYmF0Y2hIYW5kbGVyLHVuZGVmaW5lZCx0LmdldFNlcnZpY2VNZXRhZGF0YSgpKX1lbHNle3I9dC5fcmVxdWVzdChvLF8saix0Lm9IYW5kbGVyLHVuZGVmaW5lZCx0LmdldFNlcnZpY2VNZXRhZGF0YSgpKX1pZihIKXt2YXIgdz17YWJvcnQ6ZnVuY3Rpb24oKXtyLmJBYm9ydGVkPXRydWU7ci5hYm9ydCgpfX07SCh3KX19dmFyIGw9W107dmFyIHU9dGhpcy5fY3JlYXRlUmVxdWVzdFVybChwLG51bGwsUCxudWxsLGh8fHRoaXMuYkNhY2hlKTtvPXRoaXMuX2NyZWF0ZVJlcXVlc3QodSwiR0VUIix0cnVlKTt0aGlzLmZpcmVSZXF1ZXN0U2VudCh7dXJsOm8ucmVxdWVzdFVyaSx0eXBlOiJHRVQiLGFzeW5jOm8uYXN5bmMsaW5mbzoiQWNjZXB0IGhlYWRlcnM6Iit0aGlzLm9IZWFkZXJzWyJBY2NlcHQiXSxpbmZvT2JqZWN0OnthY2NlcHRIZWFkZXJzOnRoaXMub0hlYWRlcnNbIkFjY2VwdCJdfX0pO2soKX07Zy5wcm90b3R5cGUuX2ltcG9ydERhdGE9ZnVuY3Rpb24oRCxrKXt2YXIgdD10aGlzLGwsSyxyLEU7aWYoRC5yZXN1bHRzKXtsPVtdO3EuZWFjaChELnJlc3VsdHMsZnVuY3Rpb24oaSxoKXtsLnB1c2godC5faW1wb3J0RGF0YShoLGspKX0pO3JldHVybiBsfWVsc2V7Sz10aGlzLl9nZXRLZXkoRCk7RT10aGlzLm9EYXRhW0tdO2lmKCFFKXtFPUQ7dGhpcy5vRGF0YVtLXT1FfXEuZWFjaChELGZ1bmN0aW9uKG4scCl7aWYocCYmKHAuX19tZXRhZGF0YSYmcC5fX21ldGFkYXRhLnVyaXx8cC5yZXN1bHRzKSYmIXAuX19kZWZlcnJlZCl7cj10Ll9pbXBvcnREYXRhKHAsayk7aWYocS5pc0FycmF5KHIpKXtFW25dPXtfX2xpc3Q6cn19ZWxzZXtFW25dPXtfX3JlZjpyfX19ZWxzZSBpZighcHx8IXAuX19kZWZlcnJlZCl7RVtuXT1wfX0pO2tbS109dHJ1ZTtyZXR1cm4gS319O2cucHJvdG90eXBlLl9yZW1vdmVSZWZlcmVuY2VzPWZ1bmN0aW9uKEQpe3ZhciB0PXRoaXMsbDtpZihELnJlc3VsdHMpe2w9W107cS5lYWNoKEQucmVzdWx0cyxmdW5jdGlvbihpLGgpe2wucHVzaCh0Ll9yZW1vdmVSZWZlcmVuY2VzKGgpKX0pO3JldHVybiBsfWVsc2V7cS5lYWNoKEQsZnVuY3Rpb24ocCxvKXtpZihvKXtpZihvWyJfX3JlZiJdfHxvWyJfX2xpc3QiXSl7ZGVsZXRlIERbcF19fX0pO3JldHVybiBEfX07Zy5wcm90b3R5cGUuX3Jlc3RvcmVSZWZlcmVuY2VzPWZ1bmN0aW9uKEQpe3ZhciB0PXRoaXMsbyxsLHI9W107aWYoRC5yZXN1bHRzKXtsPVtdO3EuZWFjaChELnJlc3VsdHMsZnVuY3Rpb24oaSxoKXtsLnB1c2godC5fcmVzdG9yZVJlZmVyZW5jZXMoaCkpfSk7cmV0dXJuIGx9ZWxzZXtxLmVhY2goRCxmdW5jdGlvbihwLG8pe2lmKG8mJm9bIl9fcmVmIl0pe3ZhciBoPXQuX2dldE9iamVjdCgiLyIrb1siX19yZWYiXSk7aWYoaCl7ZGVsZXRlIG9bIl9fcmVmIl07RFtwXT1oO3QuX3Jlc3RvcmVSZWZlcmVuY2VzKGgpfX1lbHNlIGlmKG8mJm9bIl9fbGlzdCJdKXtxLmVhY2gob1siX19saXN0Il0sZnVuY3Rpb24oaixFKXt2YXIgaD10Ll9nZXRPYmplY3QoIi8iK29bIl9fbGlzdCJdW2pdKTtpZihoKXtyLnB1c2goaCk7dC5fcmVzdG9yZVJlZmVyZW5jZXMoaCl9fSk7ZGVsZXRlIG9bIl9fbGlzdCJdO28ucmVzdWx0cz1yO3I9W119fSk7cmV0dXJuIER9fTtnLnByb3RvdHlwZS5yZW1vdmVEYXRhPWZ1bmN0aW9uKCl7dGhpcy5vRGF0YT17fX07Zy5wcm90b3R5cGUuaW5pdGlhbGl6ZT1mdW5jdGlvbigpe3ZhciBCPXRoaXMuYUJpbmRpbmdzLnNsaWNlKDApO3EuZWFjaChCLGZ1bmN0aW9uKGksbyl7by5pbml0aWFsaXplKCl9KX07Zy5wcm90b3R5cGUucmVmcmVzaD1mdW5jdGlvbihGLHIpe2lmKHIpe3RoaXMucmVtb3ZlRGF0YSgpfXRoaXMuX3JlZnJlc2goRil9O2cucHJvdG90eXBlLl9yZWZyZXNoPWZ1bmN0aW9uKEYsbSxFKXt2YXIgQj10aGlzLmFCaW5kaW5ncy5zbGljZSgwKTtxLmVhY2goQixmdW5jdGlvbihpLG8pe28ucmVmcmVzaChGLG0sRSl9KX07Zy5wcm90b3R5cGUuY2hlY2tVcGRhdGU9ZnVuY3Rpb24oRixtKXt2YXIgQj10aGlzLmFCaW5kaW5ncy5zbGljZSgwKTtxLmVhY2goQixmdW5jdGlvbihpLG8pe28uY2hlY2tVcGRhdGUoRixtKX0pfTtnLnByb3RvdHlwZS5iaW5kUHJvcGVydHk9ZnVuY3Rpb24ocCxvLFApe3ZhciBCPW5ldyBkKHRoaXMscCxvLFApO3JldHVybiBCfTtnLnByb3RvdHlwZS5iaW5kTGlzdD1mdW5jdGlvbihwLG8scyxGLFApe3ZhciBCPW5ldyBiKHRoaXMscCxvLHMsRixQKTtyZXR1cm4gQn07Zy5wcm90b3R5cGUuYmluZFRyZWU9ZnVuY3Rpb24ocCxvLEYsUCl7dmFyIEI9bmV3IGUodGhpcyxwLG8sRixQKTtyZXR1cm4gQn07Zy5wcm90b3R5cGUuY3JlYXRlQmluZGluZ0NvbnRleHQ9ZnVuY3Rpb24ocCxvLFAsaCxyKXt2YXIgcj0hIXIsRj10aGlzLnJlc29sdmUocCxvKTtpZih0eXBlb2Ygbz09ImZ1bmN0aW9uIil7aD1vO289bnVsbH1pZih0eXBlb2YgUD09ImZ1bmN0aW9uIil7aD1QO1A9bnVsbH12YXIgRD10aGlzLl9nZXRPYmplY3QocCxvKSxrLG4sdD10aGlzO2lmKCFyKXtyPXRoaXMuX2lzUmVsb2FkTmVlZGVkKEYsRCxQKX1pZighcil7az10aGlzLl9nZXRLZXkoRCk7bj10aGlzLmdldENvbnRleHQoJy8nK2spO2gobil9ZWxzZXt2YXIgaT0hcS5zYXAuc3RhcnRzV2l0aChwLCIvIik7aWYoRil7dmFyIGo9W10scz10aGlzLmNyZWF0ZUN1c3RvbVBhcmFtcyhQKTtpZihzKXtqLnB1c2gocyl9dGhpcy5fbG9hZERhdGEoRixqLGZ1bmN0aW9uKEQpe2s9RD90Ll9nZXRLZXkoRCk6dW5kZWZpbmVkO2lmKGsmJm8mJmkpe3ZhciBsPW8uZ2V0UGF0aCgpO2w9bC5zdWJzdHIoMSk7aWYodC5vRGF0YVtsXSl7dC5vRGF0YVtsXVtwXT17X19yZWY6a319fW49dC5nZXRDb250ZXh0KCcvJytrKTtoKG4pfSxmdW5jdGlvbigpe2gobnVsbCl9KX1lbHNle2gobnVsbCl9fX07Zy5wcm90b3R5cGUuX2lzUmVsb2FkTmVlZGVkPWZ1bmN0aW9uKEYsRCxwKXt2YXIgbixOPVtdLGgscyxTPVtdO2lmKCFEKXtyZXR1cm4gdHJ1ZX1pZihwJiZwWyJleHBhbmQiXSl7bj1wWyJleHBhbmQiXS5yZXBsYWNlKC9ccy9nLCIiKTtOPW4uc3BsaXQoJywnKX1pZihOKXtmb3IodmFyIGk9MDtpPE4ubGVuZ3RoO2krKyl7dmFyIGo9TltpXS5pbmRleE9mKCIvIik7aWYoaiE9PS0xKXt2YXIgaz1OW2ldLnNsaWNlKDAsaik7dmFyIGw9TltpXS5zbGljZShqKzEpO05baV09W2ssbF19fX1mb3IodmFyIGk9MDtpPE4ubGVuZ3RoO2krKyl7dmFyIG09TltpXTtpZihxLmlzQXJyYXkobSkpe3ZhciBvPURbbVswXV07dmFyIHI9bVsxXTtpZighb3x8KG8mJm8uX19kZWZlcnJlZCkpe3JldHVybiB0cnVlfWVsc2V7aWYobyl7aWYoby5fX2xpc3QmJm8uX19saXN0Lmxlbmd0aD4wKXtmb3IodmFyIHQ9MDt0PG8uX19saXN0Lmxlbmd0aDt0Kyspe3ZhciBQPSIvIitvLl9fbGlzdFt0XTt2YXIgdT10aGlzLmdldE9iamVjdChQKTt2YXIgUj10aGlzLl9pc1JlbG9hZE5lZWRlZChQLHUse2V4cGFuZDpyfSk7aWYoUil7cmV0dXJuIHRydWV9fX1lbHNlIGlmKG8uX19yZWYpe3ZhciBQPSIvIitvLl9fcmVmO3ZhciB1PXRoaXMuZ2V0T2JqZWN0KFApO3ZhciBSPXRoaXMuX2lzUmVsb2FkTmVlZGVkKFAsdSx7ZXhwYW5kOnJ9KTtpZihSKXtyZXR1cm4gdHJ1ZX19fX19ZWxzZXtpZihEW21dPT09dW5kZWZpbmVkfHwoRFttXSYmRFttXS5fX2RlZmVycmVkKSl7cmV0dXJuIHRydWV9fX1pZihwJiZwWyJzZWxlY3QiXSl7cz1wWyJzZWxlY3QiXS5yZXBsYWNlKC9ccy9nLCIiKTtTPXMuc3BsaXQoJywnKX1mb3IodmFyIGk9MDtpPFMubGVuZ3RoO2krKyl7aWYoRFtTW2ldXT09PXVuZGVmaW5lZCl7cmV0dXJuIHRydWV9fWlmKFMubGVuZ3RoPT0wKXt2YXIgRT10aGlzLm9NZXRhZGF0YS5fZ2V0RW50aXR5VHlwZUJ5UGF0aChGKTtpZighRSl7cmV0dXJuIGZhbHNlfWVsc2V7Zm9yKHZhciBpPTA7aTxFLnByb3BlcnR5Lmxlbmd0aDtpKyspe2lmKERbRS5wcm9wZXJ0eVtpXS5uYW1lXT09PXVuZGVmaW5lZCl7cmV0dXJuIHRydWV9fX19cmV0dXJuIGZhbHNlfTtnLnByb3RvdHlwZS5kZXN0cm95QmluZGluZ0NvbnRleHQ9ZnVuY3Rpb24obyl7fTtnLnByb3RvdHlwZS5jcmVhdGVDdXN0b21QYXJhbXM9ZnVuY3Rpb24ocCl7dmFyIGg9W10sbSxzPXtleHBhbmQ6dHJ1ZSxzZWxlY3Q6dHJ1ZX07Zm9yKHZhciBuIGluIHApe2lmKG4gaW4gcyl7aC5wdXNoKCIkIituKyI9IitxLnNhcC5lbmNvZGVVUkwocFtuXSkpfWlmKG49PSJjdXN0b20iKXttPXBbbl07Zm9yKHZhciBuIGluIG0pe2lmKG4uaW5kZXhPZigiJCIpPT0wKXtxLnNhcC5sb2cud2FybmluZygiVHJ5aW5nIHRvIHNldCBPRGF0YSBwYXJhbWV0ZXIgIituKyIgYXMgY3VzdG9tIHF1ZXJ5IG9wdGlvbiEiKX1lbHNle2gucHVzaChuKyI9IitxLnNhcC5lbmNvZGVVUkwobVtuXSkpfX19fXJldHVybiBoLmpvaW4oIiYiKX07Zy5wcm90b3R5cGUuYmluZENvbnRleHQ9ZnVuY3Rpb24ocCxvLFApe3ZhciBCPW5ldyBhKHRoaXMscCxvLFApO3JldHVybiBCfTtnLnByb3RvdHlwZS5zZXRDb3VudFN1cHBvcnRlZD1mdW5jdGlvbihoKXt0aGlzLmJDb3VudFN1cHBvcnRlZD1ofTtnLnByb3RvdHlwZS5pc0NvdW50U3VwcG9ydGVkPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYkNvdW50U3VwcG9ydGVkfTtnLnByb3RvdHlwZS5zZXREZWZhdWx0Q291bnRNb2RlPWZ1bmN0aW9uKHMpe3RoaXMuc0RlZmF1bHRDb3VudE1vZGU9c307Zy5wcm90b3R5cGUuZ2V0RGVmYXVsdENvdW50TW9kZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnNEZWZhdWx0Q291bnRNb2RlfTtnLnByb3RvdHlwZS5fZ2V0S2V5PWZ1bmN0aW9uKG8sRCl7dmFyIGssdTtpZihvIGluc3RhbmNlb2Ygc2FwLnVpLm1vZGVsLkNvbnRleHQpe2s9by5nZXRQYXRoKCkuc3Vic3RyKDEpfWVsc2UgaWYobyYmby5fX21ldGFkYXRhJiZvLl9fbWV0YWRhdGEudXJpKXt1PW8uX19tZXRhZGF0YS51cmk7az11LnN1YnN0cih1Lmxhc3RJbmRleE9mKCIvIikrMSl9aWYoRClrPWRlY29kZVVSSUNvbXBvbmVudChrKTtyZXR1cm4ga307Zy5wcm90b3R5cGUuZ2V0S2V5PWZ1bmN0aW9uKG8sRCl7cmV0dXJuIHRoaXMuX2dldEtleShvLEQpfTtnLnByb3RvdHlwZS5jcmVhdGVLZXk9ZnVuY3Rpb24ocyxrLEQpe3ZhciBFPXRoaXMub01ldGFkYXRhLl9nZXRFbnRpdHlUeXBlQnlQYXRoKHMpLEs9cyx0PXRoaXMsaCxuLHYscDtLKz0iKCI7aWYoRS5rZXkucHJvcGVydHlSZWYubGVuZ3RoPT0xKXtuPUUua2V5LnByb3BlcnR5UmVmWzBdLm5hbWU7cD10aGlzLm9NZXRhZGF0YS5fZ2V0UHJvcGVydHlNZXRhZGF0YShFLG4pO3Y9Ty5mb3JtYXRWYWx1ZShrW25dLHAudHlwZSk7Sys9RD92OmVuY29kZVVSSUNvbXBvbmVudCh2KX1lbHNle3EuZWFjaChFLmtleS5wcm9wZXJ0eVJlZixmdW5jdGlvbihpLFApe2lmKGk+MClLKz0iLCI7bj1QLm5hbWU7cD10Lm9NZXRhZGF0YS5fZ2V0UHJvcGVydHlNZXRhZGF0YShFLG4pO3Y9Ty5mb3JtYXRWYWx1ZShrW25dLHAudHlwZSk7Sys9bjtLKz0iPSI7Sys9RD92OmVuY29kZVVSSUNvbXBvbmVudCh2KX0pfUsrPSIpIjtyZXR1cm4gS307Zy5wcm90b3R5cGUuZ2V0UHJvcGVydHk9ZnVuY3Rpb24ocCxvLGkpe3ZhciB2PXRoaXMuX2dldE9iamVjdChwLG8pO2lmKGk9PW51bGx8fGk9PXVuZGVmaW5lZCl7cmV0dXJuIHZ9aWYoIXEuaXNQbGFpbk9iamVjdCh2KSl7cmV0dXJuIHZ9dj1xLmV4dGVuZCh0cnVlLHt9LHYpO2lmKGk9PXRydWUpe3JldHVybiB0aGlzLl9yZXN0b3JlUmVmZXJlbmNlcyh2KX1lbHNle3JldHVybiB0aGlzLl9yZW1vdmVSZWZlcmVuY2VzKHYpfX07Zy5wcm90b3R5cGUuX2dldE9iamVjdD1mdW5jdGlvbihwLG8pe3ZhciBuPXRoaXMuaXNMZWdhY3lTeW50YXgoKT90aGlzLm9EYXRhOm51bGwscixrO2lmKHRoaXMub01ldGFkYXRhJiZwJiZwLmluZGV4T2YoJyMnKT4tMSl7cj10aGlzLnJlc29sdmUocCxvKTtpZihyKXtuPXRoaXMub01ldGFkYXRhLl9nZXRBbm5vdGF0aW9uKHIpfX1lbHNle2lmKG8pe2s9by5nZXRQYXRoKCk7az1rLnN1YnN0cigxKTtuPXRoaXMub0RhdGFba119aWYoIXApe3JldHVybiBufXZhciBQPXAuc3BsaXQoIi8iKSxpPTA7aWYoIVBbMF0pe249dGhpcy5vRGF0YTtpKyt9d2hpbGUobiYmUFtpXSl7bj1uW1BbaV1dO2lmKG4pe2lmKG4uX19yZWYpe249dGhpcy5vRGF0YVtuLl9fcmVmXX1lbHNlIGlmKG4uX19saXN0KXtuPW4uX19saXN0fWVsc2UgaWYobi5fX2RlZmVycmVkKXtuPXVuZGVmaW5lZH19aSsrfX1yZXR1cm4gbn07Zy5wcm90b3R5cGUudXBkYXRlU2VjdXJpdHlUb2tlbj1mdW5jdGlvbigpe2lmKHRoaXMuYlRva2VuSGFuZGxpbmcpe2lmKCF0aGlzLm9TZXJ2aWNlRGF0YS5zZWN1cml0eVRva2VuKXt0aGlzLnJlZnJlc2hTZWN1cml0eVRva2VuKCl9aWYodGhpcy5iVG9rZW5IYW5kbGluZyl7dGhpcy5vSGVhZGVyc1sieC1jc3JmLXRva2VuIl09dGhpcy5vU2VydmljZURhdGEuc2VjdXJpdHlUb2tlbn19fTtnLnByb3RvdHlwZS5yZXNldFNlY3VyaXR5VG9rZW49ZnVuY3Rpb24oKXtkZWxldGUgdGhpcy5vU2VydmljZURhdGEuc2VjdXJpdHlUb2tlbjtkZWxldGUgdGhpcy5vSGVhZGVyc1sieC1jc3JmLXRva2VuIl19O2cucHJvdG90eXBlLnJlZnJlc2hTZWN1cml0eVRva2VuPWZ1bmN0aW9uKHMsRSxBKXt2YXIgdD10aGlzLHUsVDtBPUE9PT10cnVlO3U9dGhpcy5fY3JlYXRlUmVxdWVzdFVybCgiLyIpO3ZhciByPXRoaXMuX2NyZWF0ZVJlcXVlc3QodSwiR0VUIixBKTtyLmhlYWRlcnNbIngtY3NyZi10b2tlbiJdPSJGZXRjaCI7ZnVuY3Rpb24gXyhELFIpe2lmKFIpe1Q9dC5fZ2V0SGVhZGVyKCJ4LWNzcmYtdG9rZW4iLFIuaGVhZGVycyk7aWYoVCl7dC5vU2VydmljZURhdGEuc2VjdXJpdHlUb2tlbj1UO3Qub0hlYWRlcnNbIngtY3NyZi10b2tlbiJdPVR9ZWxzZXt0LnJlc2V0U2VjdXJpdHlUb2tlbigpO3QuYlRva2VuSGFuZGxpbmc9ZmFsc2V9fWlmKHMpe3MoRCxSKX19ZnVuY3Rpb24gaChvKXt0LnJlc2V0U2VjdXJpdHlUb2tlbigpO3QuYlRva2VuSGFuZGxpbmc9ZmFsc2U7dC5faGFuZGxlRXJyb3Iobyk7aWYoRSl7RShvKX19cmV0dXJuIHRoaXMuX3JlcXVlc3QocixfLGgsdW5kZWZpbmVkLHVuZGVmaW5lZCx0aGlzLmdldFNlcnZpY2VNZXRhZGF0YSgpKX07Zy5wcm90b3R5cGUuX3N1Ym1pdFJlcXVlc3Q9ZnVuY3Rpb24ocixCLHMsRSxoLGkpe3ZhciB0PXRoaXMsUixtPXt9O2Z1bmN0aW9uIF8oRCxvKXtpZihCJiZoKXt2YXIgbD10Ll9nZXRCYXRjaEVycm9ycyhEKTtpZihsLmxlbmd0aD4wKXtqKGxbMF0pO3JldHVybiBmYWxzZX1pZihELl9fYmF0Y2hSZXNwb25zZXMmJkQuX19iYXRjaFJlc3BvbnNlcy5sZW5ndGg+MCl7Uj1ELl9fYmF0Y2hSZXNwb25zZXNbMF0uZGF0YTtpZighUiYmRC5fX2JhdGNoUmVzcG9uc2VzWzBdLl9fY2hhbmdlUmVzcG9uc2VzKXtSPUQuX19iYXRjaFJlc3BvbnNlc1swXS5fX2NoYW5nZVJlc3BvbnNlc1swXS5kYXRhfX1EPVJ9aWYoaSl7aWYoRCYmRC5fX2JhdGNoUmVzcG9uc2VzKXtxLmVhY2goRC5fX2JhdGNoUmVzcG9uc2VzLGZ1bmN0aW9uKEksbyl7aWYobyYmby5kYXRhKXt0Ll9pbXBvcnREYXRhKG8uZGF0YSxtKX19KX19dC5faGFuZGxlRVRhZyhyLG8sQik7dC5fdXBkYXRlUmVxdWVzdFF1ZXVlKHIsQik7aWYodC5faXNSZWZyZXNoTmVlZGVkKHIsbykpe3QuX3JlZnJlc2goZmFsc2Usci5rZXlzLHIuZW50aXR5VHlwZXMpfWlmKHMpe3MoRCxvKX19ZnVuY3Rpb24gaihvKXtpZih0LmJUb2tlbkhhbmRsaW5nJiZvLnJlc3BvbnNlKXt2YXIgVD10Ll9nZXRIZWFkZXIoIngtY3NyZi10b2tlbiIsby5yZXNwb25zZS5oZWFkZXJzKTtpZighci5iVG9rZW5SZXNldCYmby5yZXNwb25zZS5zdGF0dXNDb2RlPT0nNDAzJyYmVCYmVC50b0xvd2VyQ2FzZSgpPT0icmVxdWlyZWQiKXt0LnJlc2V0U2VjdXJpdHlUb2tlbigpO3IuYlRva2VuUmVzZXQ9dHJ1ZTtrKCk7cmV0dXJufX10Ll9oYW5kbGVFcnJvcihvKTtpZihFKXtFKG8pfX1mdW5jdGlvbiBrKCl7aWYodC5iVG9rZW5IYW5kbGluZyYmci5tZXRob2QhPT0iR0VUIil7dC51cGRhdGVTZWN1cml0eVRva2VuKCk7aWYodC5iVG9rZW5IYW5kbGluZyl7ci5oZWFkZXJzWyJ4LWNzcmYtdG9rZW4iXT10Lm9TZXJ2aWNlRGF0YS5zZWN1cml0eVRva2VufX1pZihCKXtyZXR1cm4gdC5fcmVxdWVzdChyLF8saixPRGF0YS5iYXRjaEhhbmRsZXIsdW5kZWZpbmVkLHQuZ2V0U2VydmljZU1ldGFkYXRhKCkpfWVsc2V7cmV0dXJuIHQuX3JlcXVlc3QocixfLGosdC5vSGFuZGxlcix1bmRlZmluZWQsdC5nZXRTZXJ2aWNlTWV0YWRhdGEoKSl9fXJldHVybiBrKCl9O2cucHJvdG90eXBlLl9jcmVhdGVCYXRjaFJlcXVlc3Q9ZnVuY3Rpb24oQixBKXt2YXIgdSxyLG89e30scD17fSxoPVtdLEs9e30sRT17fTtwLl9fYmF0Y2hSZXF1ZXN0cz1CO3U9dGhpcy5zU2VydmljZVVybCsiLyRiYXRjaCI7aWYodGhpcy5hVXJsUGFyYW1zKXt1Kz0iPyIrdGhpcy5hVXJsUGFyYW1zLmpvaW4oIiYiKX1xLmV4dGVuZChvLHRoaXMubUN1c3RvbUhlYWRlcnMsdGhpcy5vSGVhZGVycyk7ZGVsZXRlIG9bIkNvbnRlbnQtVHlwZSJdO3I9e2hlYWRlcnM6byxyZXF1ZXN0VXJpOnUsbWV0aG9kOiJQT1NUIixkYXRhOnAsdXNlcjp0aGlzLnNVc2VyLHBhc3N3b3JkOnRoaXMuc1Bhc3N3b3JkLGFzeW5jOkF9O2lmKEEpe3Iud2l0aENyZWRlbnRpYWxzPXRoaXMuYldpdGhDcmVkZW50aWFsc31xLmVhY2goQixmdW5jdGlvbihpLG0pe2lmKG1bIl9fY2hhbmdlUmVxdWVzdHMiXSl7cS5lYWNoKG1bIl9fY2hhbmdlUmVxdWVzdHMiXSxmdW5jdGlvbihqLG4pe2lmKG4ua2V5cyYmbi5tZXRob2QhPSJQT1NUIil7cS5lYWNoKG4ua2V5cyxmdW5jdGlvbihrLHMpe0tba109c30pfWVsc2UgaWYobi5lbnRpdHlUeXBlcyYmbi5tZXRob2Q9PSJQT1NUIil7cS5lYWNoKG4uZW50aXR5VHlwZXMsZnVuY3Rpb24obCxzKXtFW2xdPXN9KX19KX19KTtyLmtleXM9SztyLmVudGl0eVR5cGVzPUU7cmV0dXJuIHJ9O2cucHJvdG90eXBlLl9oYW5kbGVFVGFnPWZ1bmN0aW9uKHIsUixCKXt2YXIgdSxFLGgsayxsLG07aWYoQil7bD1yLmRhdGEuX19iYXRjaFJlcXVlc3RzO209Ui5kYXRhLl9fYmF0Y2hSZXNwb25zZXM7aWYobSYmbCl7Zm9yKHZhciBpPTA7aTxsLmxlbmd0aDtpKyspe2g9bFtpXS5fX2NoYW5nZVJlcXVlc3RzO2lmKG1baV0pe2s9bVtpXS5fX2NoYW5nZVJlc3BvbnNlcztpZihoJiZrKXtmb3IodmFyIGo9MDtqPGgubGVuZ3RoO2orKyl7aWYoaFtqXS5tZXRob2Q9PSJNRVJHRSJ8fGhbal0ubWV0aG9kPT0iUFVUIil7dT1oW2pdLnJlcXVlc3RVcmkucmVwbGFjZSh0aGlzLnNTZXJ2aWNlVXJsKycvJywnJyk7aWYoIXEuc2FwLnN0YXJ0c1dpdGgodSwiLyIpKXt1PSIvIit1fUU9dGhpcy5fZ2V0T2JqZWN0KHUpO2lmKEUmJkUuX19tZXRhZGF0YSYma1tqXS5oZWFkZXJzJiZrW2pdLmhlYWRlcnMuRVRhZyl7RS5fX21ldGFkYXRhLmV0YWc9a1tqXS5oZWFkZXJzLkVUYWd9fX19fWVsc2V7cS5zYXAubG9nLndhcm5pbmcoImNvdWxkIG5vdCB1cGRhdGUgRVRhZ3MgZm9yIGJhdGNoIHJlcXVlc3Q6IGNvcnJlc3BvbmRpbmcgcmVzcG9uc2UgZm9yIHJlcXVlc3QgbWlzc2luZyIpfX19ZWxzZXtxLnNhcC5sb2cud2FybmluZygiY291bGQgbm90IHVwZGF0ZSBFVGFncyBmb3IgYmF0Y2ggcmVxdWVzdDogbm8gYmF0Y2ggcmVzcG9uc2VzL3JlcXVlc3RzIGF2YWlsYWJsZSIpfX1lbHNle3U9ci5yZXF1ZXN0VXJpLnJlcGxhY2UodGhpcy5zU2VydmljZVVybCsnLycsJycpO2lmKCFxLnNhcC5zdGFydHNXaXRoKHUsIi8iKSl7dT0iLyIrdX1FPXRoaXMuX2dldE9iamVjdCh1KTtpZihFJiZFLl9fbWV0YWRhdGEmJlIuaGVhZGVycy5FVGFnKXtFLl9fbWV0YWRhdGEuZXRhZz1SLmhlYWRlcnMuRVRhZ319fTtnLnByb3RvdHlwZS5faGFuZGxlQmF0Y2hFcnJvcnM9ZnVuY3Rpb24ocixEKXt2YXIgRT1bXTtFPXRoaXMuX2dldEJhdGNoRXJyb3JzKEQpO3RoaXMuX2hhbmRsZUVUYWcoKX07Zy5wcm90b3R5cGUuX2dldEJhdGNoRXJyb3JzPWZ1bmN0aW9uKEQpe3ZhciBFPVtdLHM7cS5lYWNoKEQuX19iYXRjaFJlc3BvbnNlcyxmdW5jdGlvbihpLG8pe2lmKG8ubWVzc2FnZSl7cz0iVGhlIGZvbGxvd2luZyBwcm9ibGVtIG9jY3VycmVkOiAiK28ubWVzc2FnZTtpZihvLnJlc3BvbnNlKXtzKz1vLnJlc3BvbnNlLnN0YXR1c0NvZGUrIiwiK28ucmVzcG9uc2Uuc3RhdHVzVGV4dCsiLCIrby5yZXNwb25zZS5ib2R5fUUucHVzaChvKTtxLnNhcC5sb2cuZmF0YWwocyl9aWYoby5fX2NoYW5nZVJlc3BvbnNlcyl7cS5lYWNoKG8uX19jaGFuZ2VSZXNwb25zZXMsZnVuY3Rpb24oaSxoKXtpZihoLm1lc3NhZ2Upe3M9IlRoZSBmb2xsb3dpbmcgcHJvYmxlbSBvY2N1cnJlZDogIitoLm1lc3NhZ2U7aWYoaC5yZXNwb25zZSl7cys9aC5yZXNwb25zZS5zdGF0dXNDb2RlKyIsIitoLnJlc3BvbnNlLnN0YXR1c1RleHQrIiwiK2gucmVzcG9uc2UuYm9keX1FLnB1c2goaCk7cS5zYXAubG9nLmZhdGFsKHMpfX0pfX0pO3JldHVybiBFfTtnLnByb3RvdHlwZS5faGFuZGxlRXJyb3I9ZnVuY3Rpb24oRSl7dmFyIHA9e30saCx0O3ZhciBzPSJUaGUgZm9sbG93aW5nIHByb2JsZW0gb2NjdXJyZWQ6ICIrRS5tZXNzYWdlO3AubWVzc2FnZT1FLm1lc3NhZ2U7aWYoRS5yZXNwb25zZSl7aWYodGhpcy5iVG9rZW5IYW5kbGluZyl7dD10aGlzLl9nZXRIZWFkZXIoIngtY3NyZi10b2tlbiIsRS5yZXNwb25zZS5oZWFkZXJzKTtpZihFLnJlc3BvbnNlLnN0YXR1c0NvZGU9PSc0MDMnJiZ0JiZ0LnRvTG93ZXJDYXNlKCk9PSJyZXF1aXJlZCIpe3RoaXMucmVzZXRTZWN1cml0eVRva2VuKCl9fXMrPUUucmVzcG9uc2Uuc3RhdHVzQ29kZSsiLCIrRS5yZXNwb25zZS5zdGF0dXNUZXh0KyIsIitFLnJlc3BvbnNlLmJvZHk7cC5zdGF0dXNDb2RlPUUucmVzcG9uc2Uuc3RhdHVzQ29kZTtwLnN0YXR1c1RleHQ9RS5yZXNwb25zZS5zdGF0dXNUZXh0O3AucmVzcG9uc2VUZXh0PUUucmVzcG9uc2UuYm9keX1xLnNhcC5sb2cuZmF0YWwocyk7cmV0dXJuIHB9O2cucHJvdG90eXBlLmdldERhdGE9ZnVuY3Rpb24ocCxvLGkpe3JldHVybiB0aGlzLmdldFByb3BlcnR5KHAsbyxpKX07Zy5wcm90b3R5cGUuX2dldEVUYWc9ZnVuY3Rpb24ocCxQLEUpe3ZhciBzLGgsaTtpZihFKXtzPUV9ZWxzZXtpZihQJiZQLl9fbWV0YWRhdGEpe3M9UC5fX21ldGFkYXRhLmV0YWd9ZWxzZSBpZihwKXtoPXAucmVwbGFjZSh0aGlzLnNTZXJ2aWNlVXJsKycvJywnJyk7aT1oLmluZGV4T2YoIj8iKTtpZihpPi0xKXtoPWguc3Vic3RyKDAsaSl9aWYodGhpcy5vRGF0YS5oYXNPd25Qcm9wZXJ0eShoKSl7cz10aGlzLmdldFByb3BlcnR5KCcvJytoKycvX19tZXRhZGF0YS9ldGFnJyl9fX1yZXR1cm4gc307Zy5wcm90b3R5cGUuX2NyZWF0ZVJlcXVlc3Q9ZnVuY3Rpb24odSxtLEEscCxFKXt2YXIgbz17fSxzO3EuZXh0ZW5kKG8sdGhpcy5tQ3VzdG9tSGVhZGVycyx0aGlzLm9IZWFkZXJzKTtzPXRoaXMuX2dldEVUYWcodSxwLEUpO2lmKHMmJm0hPSJHRVQiKXtvWyJJZi1NYXRjaCJdPXN9aWYodGhpcy5iSlNPTiYmbSE9IkRFTEVURSImJnRoaXMuc01heERhdGFTZXJ2aWNlVmVyc2lvbj09PSIyLjAiKXtvWyJDb250ZW50LVR5cGUiXT0iYXBwbGljYXRpb24vanNvbiJ9aWYobT09Ik1FUkdFIiYmIXRoaXMuYlVzZUJhdGNoKXtvWyJ4LWh0dHAtbWV0aG9kIl09Ik1FUkdFIjttPSJQT1NUIn12YXIgcj17aGVhZGVyczpvLHJlcXVlc3RVcmk6dSxtZXRob2Q6bSx1c2VyOnRoaXMuc1VzZXIscGFzc3dvcmQ6dGhpcy5zUGFzc3dvcmQsYXN5bmM6QX07aWYocCl7ci5kYXRhPXB9aWYoQSl7ci53aXRoQ3JlZGVudGlhbHM9dGhpcy5iV2l0aENyZWRlbnRpYWxzfXJldHVybiByfTtnLnByb3RvdHlwZS5faXNSZWZyZXNoTmVlZGVkPWZ1bmN0aW9uKHIsUil7dmFyIGg9ZmFsc2UsRSxpPVtdLHQ9dGhpcztpZighdGhpcy5iUmVmcmVzaEFmdGVyQ2hhbmdlKXtyZXR1cm4gaH1pZihyLmRhdGEmJnEuaXNBcnJheShyLmRhdGEuX19iYXRjaFJlcXVlc3RzKSl7aWYoUil7aT10Ll9nZXRCYXRjaEVycm9ycyhSLmRhdGEpO3EuZWFjaChpLGZ1bmN0aW9uKEksbyl7aWYoby5yZXNwb25zZSYmby5yZXNwb25zZS5zdGF0dXNDb2RlPT0iNDEyIil7RT1vLnJlc3BvbnNlLnN0YXR1c0NvZGU7cmV0dXJuIGZhbHNlfX0pO2lmKCEhRSl7cmV0dXJuIGZhbHNlfX1xLmVhY2goci5kYXRhLl9fYmF0Y2hSZXF1ZXN0cyxmdW5jdGlvbihJLEIpe2lmKHEuaXNBcnJheShCLl9fY2hhbmdlUmVxdWVzdHMpKXtxLmVhY2goQi5fX2NoYW5nZVJlcXVlc3RzLGZ1bmN0aW9uKEksbyl7aD1ofHx0Ll9pc1JlZnJlc2hOZWVkZWQobyk7cmV0dXJuIWh9KX1yZXR1cm4haH0pfWVsc2V7aWYoci5tZXRob2Q9PT0iR0VUIil7cmV0dXJuIGZhbHNlfWVsc2V7aWYoUiYmUi5zdGF0dXNDb2RlPT0iNDEyIil7aD1mYWxzZX1lbHNle2g9dHJ1ZX19fXJldHVybiBofTtnLnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24ocCxELFApe3ZhciBzLEUsbSxyLHUsbyxoLFIsQixpLFMsayxqLEE9ZmFsc2U7aWYoUCBpbnN0YW5jZW9mIHNhcC51aS5tb2RlbC5Db250ZXh0fHxhcmd1bWVudHMubGVuZ3RoPjMpe289UDtzPWFyZ3VtZW50c1szXTtFPWFyZ3VtZW50c1s0XTttPWFyZ3VtZW50c1s1XX1lbHNle289UC5jb250ZXh0fHxQLm9Db250ZXh0O3M9UC5zdWNjZXNzfHxQLmZuU3VjY2VzcztFPVAuZXJyb3J8fFAuZm5FcnJvcjtoPVAuZVRhZ3x8UC5zRVRhZzttPXR5cGVvZihQLm1lcmdlKT09InVuZGVmaW5lZCI/UC5iTWVyZ2U9PT10cnVlOlAubWVyZ2U9PT10cnVlO0E9dHlwZW9mKFAuYXN5bmMpPT0idW5kZWZpbmVkIj9QLmJBc3luYz09PXRydWU6UC5hc3luYz09PXRydWU7aj1QLnVybFBhcmFtZXRlcnN9dT10aGlzLl9jcmVhdGVSZXF1ZXN0VXJsKHAsbyxqLHRoaXMuYlVzZUJhdGNoKTtpZihtKXtyPXRoaXMuX2NyZWF0ZVJlcXVlc3QodSwiTUVSR0UiLEEsRCxoKX1lbHNle3I9dGhpcy5fY3JlYXRlUmVxdWVzdCh1LCJQVVQiLEEsRCxoKX1wPXRoaXMuX25vcm1hbGl6ZVBhdGgocCxvKTtTPXRoaXMuX2dldE9iamVjdChwKTtyLmtleXM9e307aWYoUyl7az10aGlzLl9nZXRLZXkoUyk7ci5rZXlzW2tdPXRydWV9aWYodGhpcy5iVXNlQmF0Y2gpe0I9dGhpcy5fY3JlYXRlQmF0Y2hSZXF1ZXN0KFt7X19jaGFuZ2VSZXF1ZXN0czpbcl19XSxBKTtSPXRoaXMuX3N1Ym1pdFJlcXVlc3QoQix0aGlzLmJVc2VCYXRjaCxzLEUsdHJ1ZSl9ZWxzZXtSPXRoaXMuX3N1Ym1pdFJlcXVlc3Qocix0aGlzLmJVc2VCYXRjaCxzLEUpfXJldHVybiBSfTtnLnByb3RvdHlwZS5jcmVhdGU9ZnVuY3Rpb24ocCxELFApe3ZhciByLEIsdSxSLHMsRSxvLFMsaCxBPWZhbHNlLG07aWYoUCYmdHlwZW9mKFApPT0ib2JqZWN0IiYmIShQIGluc3RhbmNlb2Ygc2FwLnVpLm1vZGVsLkNvbnRleHQpKXtvPVAuY29udGV4dDtTPVAuc3VjY2VzczttPVAudXJsUGFyYW1ldGVycztoPVAuZXJyb3I7QT1QLmFzeW5jPT09dHJ1ZX1lbHNle289UDtTPWFyZ3VtZW50c1szXTtoPWFyZ3VtZW50c1s0XX11PXRoaXMuX2NyZWF0ZVJlcXVlc3RVcmwocCxvLG0sdGhpcy5iVXNlQmF0Y2gpO3I9dGhpcy5fY3JlYXRlUmVxdWVzdCh1LCJQT1NUIixBLEQpO3A9dGhpcy5fbm9ybWFsaXplUGF0aChwLG8pO0U9dGhpcy5vTWV0YWRhdGEuX2dldEVudGl0eVR5cGVCeVBhdGgocCk7ci5lbnRpdHlUeXBlcz17fTtpZihFKXtyLmVudGl0eVR5cGVzW0UuZW50aXR5VHlwZV09dHJ1ZX1pZih0aGlzLmJVc2VCYXRjaCl7Qj10aGlzLl9jcmVhdGVCYXRjaFJlcXVlc3QoW3tfX2NoYW5nZVJlcXVlc3RzOltyXX1dLEEpO1I9dGhpcy5fc3VibWl0UmVxdWVzdChCLHRoaXMuYlVzZUJhdGNoLFMsaCx0cnVlKX1lbHNle1I9dGhpcy5fc3VibWl0UmVxdWVzdChyLHRoaXMuYlVzZUJhdGNoLFMsaCl9cmV0dXJuIFJ9O2cucHJvdG90eXBlLnJlbW92ZT1mdW5jdGlvbihwLFApe3ZhciBvLEUscyxTLGgscix1LGksayxqLF8sQixSLGwsbSxBPWZhbHNlLHQ9dGhpcztpZigoUCYmUCBpbnN0YW5jZW9mIHNhcC51aS5tb2RlbC5Db250ZXh0KXx8YXJndW1lbnRzWzJdKXtvPVA7Uz1hcmd1bWVudHNbMl07aD1hcmd1bWVudHNbM119ZWxzZSBpZihQKXtvPVAuY29udGV4dHx8UC5vQ29udGV4dDtTPVAuc3VjY2Vzc3x8UC5mblN1Y2Nlc3M7aD1QLmVycm9yfHxQLmZuRXJyb3I7aT1QLmVUYWd8fFAuc0VUYWc7aj1QLnBheWxvYWR8fFAub1BheWxvYWQ7QT10eXBlb2YoUC5hc3luYyk9PSJ1bmRlZmluZWQiP1AuYkFzeW5jPT09dHJ1ZTpQLmFzeW5jPT09dHJ1ZTttPVAudXJsUGFyYW1ldGVyc31fPWZ1bmN0aW9uKEQsbil7RT11LnN1YnN0cih1Lmxhc3RJbmRleE9mKCcvJykrMSk7aWYoRS5pbmRleE9mKCc/JykhPS0xKXtFPUUuc3Vic3RyKDAsRS5pbmRleE9mKCc/JykpfWRlbGV0ZSB0Lm9EYXRhW0VdO2RlbGV0ZSB0Lm1Db250ZXh0c1siLyIrRV07aWYoUyl7UyhELG4pfX07dT10aGlzLl9jcmVhdGVSZXF1ZXN0VXJsKHAsbyxtLHRoaXMuYlVzZUJhdGNoKTtyPXRoaXMuX2NyZWF0ZVJlcXVlc3QodSwiREVMRVRFIixBLGosaSk7cD10aGlzLl9ub3JtYWxpemVQYXRoKHAsbyk7cz10aGlzLl9nZXRPYmplY3QocCk7ci5rZXlzPXt9O2lmKHMpe2s9dGhpcy5fZ2V0S2V5KHMpO3Iua2V5c1trXT10cnVlfWlmKHRoaXMuYlVzZUJhdGNoKXtCPXRoaXMuX2NyZWF0ZUJhdGNoUmVxdWVzdChbe19fY2hhbmdlUmVxdWVzdHM6W3JdfV0sQSk7Uj10aGlzLl9zdWJtaXRSZXF1ZXN0KEIsdGhpcy5iVXNlQmF0Y2gsXyxoLHRydWUpfWVsc2V7Uj10aGlzLl9zdWJtaXRSZXF1ZXN0KHIsdGhpcy5iVXNlQmF0Y2gsXyxoKX1yZXR1cm4gUn07Zy5wcm90b3R5cGUuY2FsbEZ1bmN0aW9uPWZ1bmN0aW9uKEYscCl7dmFyIHIsQix1LFIsbyxQLGgscyxFLEEsbT0iR0VUIixpPXt9LHQ9dGhpcztpZihwJiZ0eXBlb2YocCk9PSJvYmplY3QiKXttPXAubWV0aG9kP3AubWV0aG9kOm07UD1wLnVybFBhcmFtZXRlcnM7aD1wLmNvbnRleHQ7cz1wLnN1Y2Nlc3M7RT1wLmVycm9yO0E9cC5hc3luYz09PXRydWV9ZWxzZXttPXA7UD1hcmd1bWVudHNbMl07aD1hcmd1bWVudHNbM107cz1hcmd1bWVudHNbNF07RT1hcmd1bWVudHNbNV07QT1hcmd1bWVudHNbNl09PT10cnVlfW89dGhpcy5vTWV0YWRhdGEuX2dldEZ1bmN0aW9uSW1wb3J0TWV0YWRhdGEoRixtKTtpZihvKXt1PXRoaXMuX2NyZWF0ZVJlcXVlc3RVcmwoRixoLG51bGwsdGhpcy5iVXNlQmF0Y2gpO3ZhciBqPVVSSSh1KTtpZihvLnBhcmFtZXRlciE9bnVsbCl7cS5lYWNoKFAsZnVuY3Rpb24oayxsKXt2YXIgbj1xLmdyZXAoby5wYXJhbWV0ZXIsZnVuY3Rpb24odyl7cmV0dXJuIHcubmFtZT09ayYmdy5tb2RlPT0iSW4ifSk7aWYobiE9bnVsbCYmbi5sZW5ndGg+MCl7dmFyIHY9blswXTtpW2tdPU8uZm9ybWF0VmFsdWUobCx2LnR5cGUpfWVsc2V7cS5zYXAubG9nLndhcm5pbmcoIlBhcmFtZXRlciAiK2srIiBpcyBub3QgZGVmaW5lZCBmb3IgZnVuY3Rpb24gY2FsbCAiK0YrIiEiKX19KX1pZihtPT09IkdFVCIpe3JldHVybiB0LnJlYWQoRixoLGksdHJ1ZSxzLEUpfWVsc2V7cS5lYWNoKGksZnVuY3Rpb24oayxsKXtqLmFkZFF1ZXJ5KGssbCl9KTtyPXRoaXMuX2NyZWF0ZVJlcXVlc3Qoai50b1N0cmluZygpLG0sQSk7aWYodGhpcy5iVXNlQmF0Y2gpe0I9dGhpcy5fY3JlYXRlQmF0Y2hSZXF1ZXN0KFt7X19jaGFuZ2VSZXF1ZXN0czpbcl19XSxBKTtSPXRoaXMuX3N1Ym1pdFJlcXVlc3QoQix0aGlzLmJVc2VCYXRjaCxzLEUsdHJ1ZSl9ZWxzZXtSPXRoaXMuX3N1Ym1pdFJlcXVlc3Qocix0aGlzLmJVc2VCYXRjaCxzLEUpfXJldHVybiBSfX19O2cucHJvdG90eXBlLnJlYWQ9ZnVuY3Rpb24ocCxQKXt2YXIgcix1LFIsQixvLG0sQSxzLEUsRixTLGgsaSxqLGssbCx0PXRoaXM7aWYoUCYmdHlwZW9mKFApPT0ib2JqZWN0IiYmIShQIGluc3RhbmNlb2Ygc2FwLnVpLm1vZGVsLkNvbnRleHQpKXtvPVAuY29udGV4dDttPVAudXJsUGFyYW1ldGVycztBPVAuYXN5bmMhPT1mYWxzZTtzPVAuc3VjY2VzcztFPVAuZXJyb3I7Rj1QLmZpbHRlcnM7Uz1QLnNvcnRlcnN9ZWxzZXtvPVA7bT1hcmd1bWVudHNbMl07QT1hcmd1bWVudHNbM10hPT1mYWxzZTtzPWFyZ3VtZW50c1s0XTtFPWFyZ3VtZW50c1s1XX1BPUEhPT1mYWxzZTtsPU8uX2NyZWF0ZVVybFBhcmFtc0FycmF5KG0pO2k9Ty5jcmVhdGVTb3J0UGFyYW1zKFMpO2lmKGkpe2wucHVzaChpKX07aWYoRiYmIXRoaXMub01ldGFkYXRhKXtxLnNhcC5sb2cuZmF0YWwoIlRyaWVkIHRvIHVzZSBmaWx0ZXJzIGluIHJlYWQgbWV0aG9kIGJlZm9yZSBtZXRhZGF0YSBpcyBhdmFpbGFibGUuIil9ZWxzZXtrPXRoaXMuX25vcm1hbGl6ZVBhdGgocCxvKTtqPXRoaXMub01ldGFkYXRhJiZ0aGlzLm9NZXRhZGF0YS5fZ2V0RW50aXR5VHlwZUJ5UGF0aChrKTtoPU8uY3JlYXRlRmlsdGVyUGFyYW1zKEYsdGhpcy5vTWV0YWRhdGEsaik7aWYoaCl7bC5wdXNoKGgpfX11PXRoaXMuX2NyZWF0ZVJlcXVlc3RVcmwocCxvLGwsdGhpcy5iVXNlQmF0Y2gpO3I9dGhpcy5fY3JlYXRlUmVxdWVzdCh1LCJHRVQiLEEpO2lmKHRoaXMuYlVzZUJhdGNoKXtCPXRoaXMuX2NyZWF0ZUJhdGNoUmVxdWVzdChbcl0sQSk7Uj10aGlzLl9zdWJtaXRSZXF1ZXN0KEIsdGhpcy5iVXNlQmF0Y2gscyxFLHRydWUpfWVsc2V7Uj10aGlzLl9zdWJtaXRSZXF1ZXN0KHIsdGhpcy5iVXNlQmF0Y2gscyxFKX1yZXR1cm4gUn07Zy5wcm90b3R5cGUuY3JlYXRlQmF0Y2hPcGVyYXRpb249ZnVuY3Rpb24ocCxtLEQsUCl7dmFyIG89e30sRSxzLGssaDtxLmV4dGVuZChvLHRoaXMubUN1c3RvbUhlYWRlcnMsdGhpcy5vSGVhZGVycyk7aWYocS5zYXAuc3RhcnRzV2l0aChwLCIvIikpe3A9cC5zdWJzdHIoMSl9aWYoUCl7RT1QLnNFVGFnfWlmKG0hPSJHRVQiKXtFPXRoaXMuX2dldEVUYWcocCxELEUpO2lmKEUpe29bIklmLU1hdGNoIl09RX19aWYodGhpcy5iSlNPTil7aWYobSE9IkRFTEVURSImJm0hPSJHRVQiJiZ0aGlzLnNNYXhEYXRhU2VydmljZVZlcnNpb249PT0iMi4wIil7b1siQ29udGVudC1UeXBlIl09ImFwcGxpY2F0aW9uL2pzb24ifX1lbHNle29bIkNvbnRlbnQtVHlwZSJdPSJhcHBsaWNhdGlvbi9hdG9tK3htbCJ9dmFyIHI9e3JlcXVlc3RVcmk6cCxtZXRob2Q6bS50b1VwcGVyQ2FzZSgpLGhlYWRlcnM6b307aWYoRCl7ci5kYXRhPUR9aWYobSE9IkdFVCImJm0hPSJQT1NUIil7aWYocCYmcC5pbmRleE9mKCIvIikhPTApe3A9Jy8nK3B9cz10aGlzLl9nZXRPYmplY3QocCk7aWYocyl7az10aGlzLl9nZXRLZXkocyk7ci5rZXlzPXt9O3Iua2V5c1trXT10cnVlfX1lbHNlIGlmKG09PSJQT1NUIil7aD10aGlzLm9NZXRhZGF0YS5fZ2V0RW50aXR5VHlwZUJ5UGF0aChwKTtpZihoKXtyLmVudGl0eVR5cGVzPXt9O3IuZW50aXR5VHlwZXNbaC5lbnRpdHlUeXBlXT10cnVlfX1yZXR1cm4gcn07Zy5wcm90b3R5cGUuYWRkQmF0Y2hSZWFkT3BlcmF0aW9ucz1mdW5jdGlvbihyKXtpZighcS5pc0FycmF5KHIpfHxyLmxlbmd0aDw9MCl7cS5zYXAubG9nLndhcm5pbmcoIk5vIGFycmF5IHdpdGggYmF0Y2ggb3BlcmF0aW9ucyBwcm92aWRlZCEiKTtyZXR1cm4gZmFsc2V9dmFyIHQ9dGhpcztxLmVhY2gocixmdW5jdGlvbihpLFIpe2lmKFIubWV0aG9kIT0iR0VUIil7cS5zYXAubG9nLndhcm5pbmcoIkJhdGNoIG9wZXJhdGlvbiBzaG91bGQgYmUgYSBHRVQgb3BlcmF0aW9uISIpO3JldHVybiBmYWxzZX10LmFCYXRjaE9wZXJhdGlvbnMucHVzaChSKX0pfTtnLnByb3RvdHlwZS5hZGRCYXRjaENoYW5nZU9wZXJhdGlvbnM9ZnVuY3Rpb24oaCl7aWYoIXEuaXNBcnJheShoKXx8aC5sZW5ndGg8PTApe3JldHVybiBmYWxzZX1xLmVhY2goaCxmdW5jdGlvbihpLG8pe2lmKG8ubWV0aG9kIT0iUE9TVCImJm8ubWV0aG9kIT0iUFVUIiYmby5tZXRob2QhPSJNRVJHRSImJm8ubWV0aG9kIT0iREVMRVRFIil7cS5zYXAubG9nLndhcm5pbmcoIkJhdGNoIG9wZXJhdGlvbiBzaG91bGQgYmUgYSBQT1NUL1BVVC9NRVJHRS9ERUxFVEUgb3BlcmF0aW9uISIpO3JldHVybiBmYWxzZX19KTt0aGlzLmFCYXRjaE9wZXJhdGlvbnMucHVzaCh7X19jaGFuZ2VSZXF1ZXN0czpofSl9O2cucHJvdG90eXBlLmNsZWFyQmF0Y2g9ZnVuY3Rpb24oKXt0aGlzLmFCYXRjaE9wZXJhdGlvbnM9W119O2cucHJvdG90eXBlLnN1Ym1pdEJhdGNoPWZ1bmN0aW9uKHMsRSxBLGkpe3ZhciByLHUsUix0PXRoaXM7ZnVuY3Rpb24gXyhELGope2lmKHMpe3MoRCxqLHQuX2dldEJhdGNoRXJyb3JzKEQpKX19aWYoISh0eXBlb2Yocyk9PSJmdW5jdGlvbiIpKXt2YXIgbz1BO3ZhciBoPUU7QT1zO3M9aDtFPW99QT1BIT09ZmFsc2U7aWYodGhpcy5hQmF0Y2hPcGVyYXRpb25zLmxlbmd0aDw9MCl7cS5zYXAubG9nLndhcm5pbmcoIk5vIGJhdGNoIG9wZXJhdGlvbnMgaW4gYmF0Y2guIE5vIHJlcXVlc3Qgd2lsbCBiZSB0cmlnZ2VyZWQhIik7cmV0dXJuIGZhbHNlfXI9dGhpcy5fY3JlYXRlQmF0Y2hSZXF1ZXN0KHRoaXMuYUJhdGNoT3BlcmF0aW9ucyxBKTtSPXRoaXMuX3N1Ym1pdFJlcXVlc3Qocix0cnVlLF8sRSxmYWxzZSxpKTt0aGlzLmNsZWFyQmF0Y2goKTtyZXR1cm4gUn07Zy5wcm90b3R5cGUuZ2V0U2VydmljZU1ldGFkYXRhPWZ1bmN0aW9uKCl7aWYodGhpcy5vTWV0YWRhdGEmJnRoaXMub01ldGFkYXRhLmlzTG9hZGVkKCkpe3JldHVybiB0aGlzLm9NZXRhZGF0YS5nZXRTZXJ2aWNlTWV0YWRhdGEoKX19O2cucHJvdG90eXBlLmdldFNlcnZpY2VBbm5vdGF0aW9ucz1mdW5jdGlvbigpe2lmKHRoaXMub0Fubm90YXRpb25zJiZ0aGlzLm9Bbm5vdGF0aW9ucy5nZXRBbm5vdGF0aW9uc0RhdGEpe3JldHVybiB0aGlzLm9Bbm5vdGF0aW9ucy5nZXRBbm5vdGF0aW9uc0RhdGEoKX19O2cucHJvdG90eXBlLnN1Ym1pdENoYW5nZXM9ZnVuY3Rpb24ocyxFLHApe3ZhciByLFAsdD10aGlzLGgsaSxULG0sUyxrO2lmKHRoaXMuc0NoYW5nZUtleSl7aD10aGlzLnNDaGFuZ2VLZXkucmVwbGFjZSh0aGlzLnNTZXJ2aWNlVXJsLCcnKTtTPXRoaXMuX2dldE9iamVjdChoKTtQPVM7aWYocS5pc1BsYWluT2JqZWN0KFMpKXtQPXEuZXh0ZW5kKHRydWUse30sUyk7aWYoUC5fX21ldGFkYXRhKXtUPVAuX19tZXRhZGF0YS50eXBlO209UC5fX21ldGFkYXRhLmV0YWc7ZGVsZXRlIFAuX19tZXRhZGF0YTtpZihUfHxtKXtQLl9fbWV0YWRhdGE9e319aWYoVCl7UC5fX21ldGFkYXRhLnR5cGU9VH1pZighIW0pe1AuX19tZXRhZGF0YS5ldGFnPW19fXEuZWFjaChQLGZ1bmN0aW9uKGwsdSl7aWYodSYmdS5fX2RlZmVycmVkKXtkZWxldGUgUFtsXX19KTt2YXIgbz10aGlzLm9NZXRhZGF0YS5fZ2V0RW50aXR5VHlwZUJ5UGF0aChoKTtpZihvKXt2YXIgbj10aGlzLm9NZXRhZGF0YS5fZ2V0TmF2aWdhdGlvblByb3BlcnR5TmFtZXMobyk7cS5lYWNoKG4sZnVuY3Rpb24oSSxOKXtkZWxldGUgUFtOXX0pfVA9dGhpcy5fcmVtb3ZlUmVmZXJlbmNlcyhQKX1pZihwJiZwLnNFVGFnKXtpPXAuc0VUYWd9cj10aGlzLl9jcmVhdGVSZXF1ZXN0KHRoaXMuc0NoYW5nZUtleSwiTUVSR0UiLHRydWUsUCxpKTtpZih0aGlzLnNVcmxQYXJhbXMpe3IucmVxdWVzdFVyaSs9Ij8iK3RoaXMuc1VybFBhcmFtc31yLmtleXM9e307aWYoUyl7az10aGlzLl9nZXRLZXkoUyk7ci5rZXlzW2tdPXRydWV9dGhpcy5vUmVxdWVzdFF1ZXVlW3RoaXMuc0NoYW5nZUtleV09cn1pZihxLmlzRW1wdHlPYmplY3QodGhpcy5vUmVxdWVzdFF1ZXVlKSl7cmV0dXJuIHVuZGVmaW5lZH1pZih0aGlzLmJVc2VCYXRjaCl7dmFyIGo9W107cS5lYWNoKHRoaXMub1JlcXVlc3RRdWV1ZSxmdW5jdGlvbihrLGwpe2RlbGV0ZSBsLl9vUmVmO3ZhciBSPXEuZXh0ZW5kKHRydWUse30sbCk7bC5fb1JlZj1SO1IucmVxdWVzdFVyaT1SLnJlcXVlc3RVcmkucmVwbGFjZSh0LnNTZXJ2aWNlVXJsKycvJywnJyk7Ui5kYXRhLl9iQ3JlYXRlP2RlbGV0ZSBSLmRhdGEuX2JDcmVhdGU6ZmFsc2U7ai5wdXNoKFIpfSk7cj10aGlzLl9jcmVhdGVCYXRjaFJlcXVlc3QoW3tfX2NoYW5nZVJlcXVlc3RzOmp9XSx0cnVlKTt0aGlzLl9zdWJtaXRSZXF1ZXN0KHIsdGhpcy5iVXNlQmF0Y2gscyxFLHRydWUpfWVsc2V7cS5lYWNoKHRoaXMub1JlcXVlc3RRdWV1ZSxmdW5jdGlvbihrLGwpe2RlbGV0ZSBsLl9vUmVmO3ZhciBSPXEuZXh0ZW5kKHRydWUse30sbCk7bC5fb1JlZj1SO2lmKFIuZGF0YSYmUi5kYXRhLl9iQ3JlYXRlKXtkZWxldGUgUi5kYXRhLl9iQ3JlYXRlfXQuX3N1Ym1pdFJlcXVlc3QoUix0aGlzLmJVc2VCYXRjaCxzLEUsdHJ1ZSl9KX1yZXR1cm4gdW5kZWZpbmVkfTtnLnByb3RvdHlwZS5fdXBkYXRlUmVxdWVzdFF1ZXVlPWZ1bmN0aW9uKHIsQil7dmFyIGgsayxvLHQ9dGhpcztpZihCKXtoPXIuZGF0YS5fX2JhdGNoUmVxdWVzdHM7aWYoaCl7Zm9yKHZhciBpPTA7aTxoLmxlbmd0aDtpKyspe2s9aFtpXS5fX2NoYW5nZVJlcXVlc3RzO2lmKGspe2Zvcih2YXIgaj0wO2o8ay5sZW5ndGg7aisrKXtvPWtbal07cS5lYWNoKHRoaXMub1JlcXVlc3RRdWV1ZSxmdW5jdGlvbihLLGwpe2lmKGwuX29SZWY9PT1vJiZLIT09dC5zQ2hhbmdlS2V5KXtkZWxldGUgdC5vUmVxdWVzdFF1ZXVlW0tdO2RlbGV0ZSB0Lm9EYXRhW0tdO2RlbGV0ZSB0Lm1Db250ZXh0c1siLyIrS119ZWxzZSBpZih0LnNDaGFuZ2VLZXkmJks9PT10LnNDaGFuZ2VLZXkpe2RlbGV0ZSB0Lm9SZXF1ZXN0UXVldWVbS107dC5zQ2hhbmdlS2V5PW51bGx9fSl9fX19fWVsc2V7cS5lYWNoKHRoaXMub1JlcXVlc3RRdWV1ZSxmdW5jdGlvbihLLGwpe2lmKGwuX29SZWY9PT1yJiZLIT09dC5zQ2hhbmdlS2V5KXtkZWxldGUgdC5vUmVxdWVzdFF1ZXVlW0tdO2RlbGV0ZSB0Lm9EYXRhW0tdO2RlbGV0ZSB0Lm1Db250ZXh0c1siLyIrS119ZWxzZSBpZih0LnNDaGFuZ2VLZXkmJks9PT10LnNDaGFuZ2VLZXkpe2RlbGV0ZSB0Lm9SZXF1ZXN0UXVldWVbS107dC5zQ2hhbmdlS2V5PW51bGx9fSl9fTtnLnByb3RvdHlwZS5yZXNldENoYW5nZXM9ZnVuY3Rpb24ocyxFKXt2YXIgcDtpZih0aGlzLnNDaGFuZ2VLZXkpe3A9dGhpcy5zQ2hhbmdlS2V5LnJlcGxhY2UodGhpcy5zU2VydmljZVVybCwnJyk7dGhpcy5fbG9hZERhdGEocCxudWxsLHMsRSl9fTtnLnByb3RvdHlwZS5zZXRQcm9wZXJ0eT1mdW5jdGlvbihwLHYsbyl7dmFyIFAsRT17fSxEPXt9LHM9dGhpcy5fY3JlYXRlUmVxdWVzdFVybChwLG8pLGg9cC5zdWJzdHJpbmcoMCxwLmxhc3RJbmRleE9mKCIvIikpLGssaixtPXt9LGw9ZmFsc2U7aWYoIXRoaXMucmVzb2x2ZShwLG8pKXtyZXR1cm4gZmFsc2V9cz1zLnJlcGxhY2UodGhpcy5zU2VydmljZVVybCsnLycsJycpO3M9cy5zdWJzdHJpbmcoMCxzLmluZGV4T2YoIi8iKSk7cz10aGlzLnNTZXJ2aWNlVXJsKycvJytzO1A9cC5zdWJzdHIocC5sYXN0SW5kZXhPZigiLyIpKzEpO0Q9dGhpcy5fZ2V0T2JqZWN0KGgsbyk7aWYoIUQpe3JldHVybiBmYWxzZX1qPWguc3BsaXQoIi8iKTtmb3IodmFyIGk9ai5sZW5ndGgtMTtpPj0wO2ktLSl7RT10aGlzLl9nZXRPYmplY3Qoai5qb2luKCIvIiksbyk7aWYoRSl7az10aGlzLl9nZXRLZXkoRSk7aWYoayl7YnJlYWt9fWouc3BsaWNlKGktMSwxKX1pZighayl7az10aGlzLl9nZXRLZXkobyl9aWYoayl7bVtrXT10cnVlfWlmKEQuX2JDcmVhdGUpe0RbUF09djtsPXRydWU7dGhpcy5jaGVja1VwZGF0ZShmYWxzZSxtKX1lbHNle2lmKCF0aGlzLnNDaGFuZ2VLZXkpe3RoaXMuc0NoYW5nZUtleT1zfWlmKHRoaXMuc0NoYW5nZUtleT09cyl7RFtQXT12O2w9dHJ1ZTt0aGlzLmNoZWNrVXBkYXRlKGZhbHNlLG0pfWVsc2V7dGhpcy5maXJlUmVqZWN0Q2hhbmdlKHtyZWplY3RlZFZhbHVlOnYsb2xkVmFsdWU6RFtQXX0pfX1yZXR1cm4gbH07Zy5wcm90b3R5cGUuX2lzSGVhZGVyUHJpdmF0ZT1mdW5jdGlvbihoKXtzd2l0Y2goaC50b0xvd2VyQ2FzZSgpKXtjYXNlImFjY2VwdCI6Y2FzZSJhY2NlcHQtbGFuZ3VhZ2UiOmNhc2UibWF4ZGF0YXNlcnZpY2V2ZXJzaW9uIjpjYXNlImRhdGFzZXJ2aWNldmVyc2lvbiI6cmV0dXJuIHRydWU7YnJlYWs7Y2FzZSJ4LWNzcmYtdG9rZW4iOnJldHVybiB0aGlzLmJUb2tlbkhhbmRsaW5nO2JyZWFrO2RlZmF1bHQ6cmV0dXJuIGZhbHNlfX07Zy5wcm90b3R5cGUuc2V0SGVhZGVycz1mdW5jdGlvbihoKXt2YXIgbT17fSx0PXRoaXM7aWYoaCl7cS5lYWNoKGgsZnVuY3Rpb24oSCxzKXtpZih0Ll9pc0hlYWRlclByaXZhdGUoSCkpe3Euc2FwLmxvZy53YXJuaW5nKCJOb3QgYWxsb3dlZCB0byBtb2RpZnkgcHJpdmF0ZSBoZWFkZXI6ICIrSCl9ZWxzZXttW0hdPXN9fSk7dGhpcy5tQ3VzdG9tSGVhZGVycz1tfWVsc2V7dGhpcy5tQ3VzdG9tSGVhZGVycz17fX19O2cucHJvdG90eXBlLmdldEhlYWRlcnM9ZnVuY3Rpb24oKXtyZXR1cm4gcS5leHRlbmQoe30sdGhpcy5tQ3VzdG9tSGVhZGVycyx0aGlzLm9IZWFkZXJzKX07Zy5wcm90b3R5cGUuX2dldEhlYWRlcj1mdW5jdGlvbihGLGgpe3ZhciBIO2ZvcihIIGluIGgpe2lmKEgudG9Mb3dlckNhc2UoKT09PUYudG9Mb3dlckNhc2UoKSl7cmV0dXJuIGhbSF19fXJldHVybiBudWxsfTtnLnByb3RvdHlwZS5oYXNQZW5kaW5nQ2hhbmdlcz1mdW5jdGlvbigpe3JldHVybiB0aGlzLnNDaGFuZ2VLZXkhPW51bGx9O2cucHJvdG90eXBlLnVwZGF0ZUJpbmRpbmdzPWZ1bmN0aW9uKEYpe3RoaXMuY2hlY2tVcGRhdGUoRil9O2cucHJvdG90eXBlLmZvcmNlTm9DYWNoZT1mdW5jdGlvbihGKXt0aGlzLmJDYWNoZT0hRn07Zy5wcm90b3R5cGUuc2V0VG9rZW5IYW5kbGluZ0VuYWJsZWQ9ZnVuY3Rpb24odCl7dGhpcy5iVG9rZW5IYW5kbGluZz10fTtnLnByb3RvdHlwZS5zZXRVc2VCYXRjaD1mdW5jdGlvbih1KXt0aGlzLmJVc2VCYXRjaD11fTtnLnByb3RvdHlwZS5mb3JtYXRWYWx1ZT1mdW5jdGlvbih2LHQpe3JldHVybiBPLmZvcm1hdFZhbHVlKHYsdCl9O2cucHJvdG90eXBlLmRlbGV0ZUNyZWF0ZWRFbnRyeT1mdW5jdGlvbihvKXtpZihvKXt2YXIgcD1vLmdldFBhdGgoKTtkZWxldGUgdGhpcy5tQ29udGV4dHNbcF07aWYocS5zYXAuc3RhcnRzV2l0aChwLCIvIikpe3A9cC5zdWJzdHIoMSl9ZGVsZXRlIHRoaXMub1JlcXVlc3RRdWV1ZVtwXTtkZWxldGUgdGhpcy5vRGF0YVtwXX19O2cucHJvdG90eXBlLmNyZWF0ZUVudHJ5PWZ1bmN0aW9uKHAsUCl7dmFyIEU9e30sayx1LHI7aWYoIXEuc2FwLnN0YXJ0c1dpdGgocCwiLyIpKXtwPSIvIitwfXZhciBvPXRoaXMub01ldGFkYXRhLl9nZXRFbnRpdHlUeXBlQnlQYXRoKHApO2lmKCFvKXtyZXR1cm4gdW5kZWZpbmVkfWlmKHR5cGVvZiBQPT09Im9iamVjdCImJiFxLmlzQXJyYXkoUCkpe0U9UH1lbHNle2Zvcih2YXIgaT0wO2k8by5wcm9wZXJ0eS5sZW5ndGg7aSsrKXt2YXIgaD1vLnByb3BlcnR5W2ldO3ZhciB0PWgudHlwZS5zcGxpdCgnLicpO3ZhciBqPXEuaW5BcnJheShoLm5hbWUsUCk+LTE7aWYoIVB8fGope0VbaC5uYW1lXT10aGlzLl9jcmVhdGVQcm9wZXJ0eVZhbHVlKHQpO2lmKGope1Auc3BsaWNlKFAuaW5kZXhPZihoLm5hbWUpLDEpfX19aWYoUCl7fX1FLl9iQ3JlYXRlPXRydWU7az1wLnN1YnN0cmluZygxKSsiKCciK3Euc2FwLnVpZCgpKyInKSI7dGhpcy5vRGF0YVtrXT1FO0UuX19tZXRhZGF0YT17dHlwZToiIitvLmVudGl0eVR5cGV9O3U9dGhpcy5fY3JlYXRlUmVxdWVzdFVybChwKTtyPXRoaXMuX2NyZWF0ZVJlcXVlc3QodSwiUE9TVCIsdHJ1ZSxFKTtyLmVudGl0eVR5cGVzPXt9O3IuZW50aXR5VHlwZXNbby5lbnRpdHlUeXBlXT10cnVlO3RoaXMub1JlcXVlc3RRdWV1ZVtrXT1yO3JldHVybiB0aGlzLmdldENvbnRleHQoIi8iK2spfTtnLnByb3RvdHlwZS5fY3JlYXRlUHJvcGVydHlWYWx1ZT1mdW5jdGlvbih0KXt2YXIgbj10WzBdO3ZhciBUPXRbMV07aWYobi50b1VwcGVyQ2FzZSgpIT09J0VETScpe3ZhciBvPXt9O3ZhciBoPXRoaXMub01ldGFkYXRhLl9nZXRPYmplY3RNZXRhZGF0YSgiY29tcGxleFR5cGUiLFQsbik7Zm9yKHZhciBpPTA7aTxoLnByb3BlcnR5Lmxlbmd0aDtpKyspe3ZhciBwPWgucHJvcGVydHlbaV07dmFyIHQ9cC50eXBlLnNwbGl0KCcuJyk7b1twLm5hbWVdPXRoaXMuX2NyZWF0ZVByb3BlcnR5VmFsdWUodCl9cmV0dXJuIG99ZWxzZXtyZXR1cm4gdGhpcy5fZ2V0RGVmYXVsdFByb3BlcnR5VmFsdWUoVCxuKX19O2cucHJvdG90eXBlLl9nZXREZWZhdWx0UHJvcGVydHlWYWx1ZT1mdW5jdGlvbih0LG4pe3JldHVybiB1bmRlZmluZWR9O2cucHJvdG90eXBlLl9ub3JtYWxpemVQYXRoPWZ1bmN0aW9uKHAsbyl7aWYocCYmcC5pbmRleE9mKCc/JykhPS0xKXtwPXAuc3Vic3RyKDAscC5pbmRleE9mKCc/JykpfWlmKCFvJiYhcS5zYXAuc3RhcnRzV2l0aChwLCIvIikpe3A9Jy8nK3A7cS5zYXAubG9nLndhcm5pbmcoInNQYXRoIHNob3VsZCBiZSBhYnNvbHV0ZSBpZiBubyBDb250ZXh0IGlzIHNldCIpfXJldHVybiB0aGlzLnJlc29sdmUocCxvKX07Zy5wcm90b3R5cGUuc2V0UmVmcmVzaEFmdGVyQ2hhbmdlPWZ1bmN0aW9uKHIpe3RoaXMuYlJlZnJlc2hBZnRlckNoYW5nZT1yfTtnLnByb3RvdHlwZS5pc0xpc3Q9ZnVuY3Rpb24ocCxvKXt2YXIgcD10aGlzLnJlc29sdmUocCxvKTtyZXR1cm4gcCYmcC5zdWJzdHIocC5sYXN0SW5kZXhPZigiLyIpKS5pbmRleE9mKCIoIik9PT0tMX07Zy5wcm90b3R5cGUuX3JlcXVlc3Q9ZnVuY3Rpb24ocixzLEUsaCxILG0pe2lmKHRoaXMuYkRlc3Ryb3llZCl7cmV0dXJue2Fib3J0OmZ1bmN0aW9uKCl7fX19dmFyIHQ9dGhpcztmdW5jdGlvbiB3KGkpe3JldHVybiBmdW5jdGlvbigpe3ZhciBJPXEuaW5BcnJheShSLHQuYVBlbmRpbmdSZXF1ZXN0SGFuZGxlcyk7aWYoST4tMSl7dC5hUGVuZGluZ1JlcXVlc3RIYW5kbGVzLnNwbGljZShJLDEpfWlmKCEoUiYmUi5iU3VwcHJlc3NFcnJvckhhbmRsZXJDYWxsKSl7aS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fX12YXIgUj1PRGF0YS5yZXF1ZXN0KHIsdyhzfHxPRGF0YS5kZWZhdWx0U3VjY2VzcyksdyhFfHxPRGF0YS5kZWZhdWx0RXJyb3IpLGgsSCxtKTtpZihyLmFzeW5jIT09ZmFsc2Upe3RoaXMuYVBlbmRpbmdSZXF1ZXN0SGFuZGxlcy5wdXNoKFIpfXJldHVybiBSfTtnLnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKCl7aWYodGhpcy5hUGVuZGluZ1JlcXVlc3RIYW5kbGVzKXtmb3IodmFyIGk9dGhpcy5hUGVuZGluZ1JlcXVlc3RIYW5kbGVzLmxlbmd0aC0xO2k+PTA7aS0tKXt2YXIgcj10aGlzLmFQZW5kaW5nUmVxdWVzdEhhbmRsZXNbaV07aWYociYmci5hYm9ydCl7ci5iU3VwcHJlc3NFcnJvckhhbmRsZXJDYWxsPXRydWU7ci5hYm9ydCgpfX1kZWxldGUgdGhpcy5hUGVuZGluZ1JlcXVlc3RIYW5kbGVzfWlmKCEhdGhpcy5vTWV0YWRhdGFMb2FkRXZlbnQpe3Euc2FwLmNsZWFyRGVsYXllZENhbGwodGhpcy5vTWV0YWRhdGFMb2FkRXZlbnQpfWlmKCEhdGhpcy5vTWV0YWRhdGFGYWlsZWRFdmVudCl7cS5zYXAuY2xlYXJEZWxheWVkQ2FsbCh0aGlzLm9NZXRhZGF0YUZhaWxlZEV2ZW50KX1pZih0aGlzLm9NZXRhZGF0YSl7dGhpcy5vTWV0YWRhdGEuZGVzdHJveSgpO2RlbGV0ZSB0aGlzLm9NZXRhZGF0YX1pZih0aGlzLm9Bbm5vdGF0aW9ucyl7dGhpcy5vQW5ub3RhdGlvbnMuZGVzdHJveSgpO2RlbGV0ZSB0aGlzLm9Bbm5vdGF0aW9uc31NLnByb3RvdHlwZS5kZXN0cm95LmFwcGx5KHRoaXMsYXJndW1lbnRzKX07cmV0dXJuIGd9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkubW9kZWwucmVzb3VyY2UuUmVzb3VyY2VNb2RlbCcpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5tb2RlbC5yZXNvdXJjZS5SZXNvdXJjZU1vZGVsJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL21vZGVsL3Jlc291cmNlL1Jlc291cmNlTW9kZWwiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvbW9kZWwvTW9kZWwnLCcuL1Jlc291cmNlUHJvcGVydHlCaW5kaW5nJ10sZnVuY3Rpb24ocSxNLFIpeyJ1c2Ugc3RyaWN0Ijt2YXIgYT1NLmV4dGVuZCgic2FwLnVpLm1vZGVsLnJlc291cmNlLlJlc291cmNlTW9kZWwiLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbihkKXtNLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLmJBc3luYz0hIShkJiZkLmFzeW5jKTt0aGlzLnNEZWZhdWx0QmluZGluZ01vZGU9dGhpcy5iQXN5bmM/c2FwLnVpLm1vZGVsLkJpbmRpbmdNb2RlLk9uZVdheTpzYXAudWkubW9kZWwuQmluZGluZ01vZGUuT25lVGltZTt0aGlzLm1TdXBwb3J0ZWRCaW5kaW5nTW9kZXM9eyJPbmVXYXkiOnRydWUsIlR3b1dheSI6ZmFsc2UsIk9uZVRpbWUiOnRydWV9O2lmKHRoaXMuYkFzeW5jJiZ0aGlzLnNEZWZhdWx0QmluZGluZ01vZGU9PXNhcC51aS5tb2RlbC5CaW5kaW5nTW9kZS5PbmVUaW1lKXtxLnNhcC5sb2cud2FybmluZygiVXNpbmcgYmluZGluZyBtb2RlIE9uZVRpbWUgZm9yIGFzeW5jaHJvbm91cyBSZXNvdXJjZU1vZGVsIGlzIG5vdCBzdXBwb3J0ZWQhIil9dGhpcy5vRGF0YT1kO18odGhpcyx0cnVlKX0sbWV0YWRhdGE6e3B1YmxpY01ldGhvZHM6WyJnZXRSZXNvdXJjZUJ1bmRsZSJdfX0pO2EucHJvdG90eXBlLmxvYWRSZXNvdXJjZUJ1bmRsZT1mdW5jdGlvbihkKXt2YXIgYz1zYXAudWkuZ2V0Q29yZSgpLmdldENvbmZpZ3VyYXRpb24oKSxyLHUsbCxpO2w9ZC5idW5kbGVMb2NhbGU7aWYoIWwpe2w9Yy5nZXRMYW5ndWFnZSgpfWk9Yy5nZXRPcmlnaW5JbmZvKCk7dT1iKGQuYnVuZGxlVXJsLGQuYnVuZGxlTmFtZSk7cj1xLnNhcC5yZXNvdXJjZXMoe3VybDp1LGxvY2FsZTpsLGluY2x1ZGVJbmZvOmksYXN5bmM6ISFkLmFzeW5jfSk7cmV0dXJuIHJ9O2EucHJvdG90eXBlLmVuaGFuY2U9ZnVuY3Rpb24oZCl7dmFyIHQ9dGhpcyxyLHA9dGhpcy5iQXN5bmM/bmV3IFByb21pc2UoZnVuY3Rpb24oZSl7cj1lfSk6bnVsbDtmdW5jdGlvbiBjKCl7ZC5hc3luYz10LmJBc3luYzt2YXIgZT10LmxvYWRSZXNvdXJjZUJ1bmRsZShkKTtpZihlIGluc3RhbmNlb2YgUHJvbWlzZSl7ZS50aGVuKGZ1bmN0aW9uKGYpe3QuX29SZXNvdXJjZUJ1bmRsZS5fZW5oYW5jZShmKTtyKHRydWUpfSxmdW5jdGlvbigpe3IodHJ1ZSl9KX1lbHNlIGlmKGUpe3QuX29SZXNvdXJjZUJ1bmRsZS5fZW5oYW5jZShlKX19aWYodGhpcy5fb1Byb21pc2Upe1Byb21pc2UucmVzb2x2ZSh0aGlzLl9vUHJvbWlzZSkudGhlbihjKX1lbHNle2MoKX1yZXR1cm4gcH07YS5wcm90b3R5cGUuYmluZFByb3BlcnR5PWZ1bmN0aW9uKHApe3ZhciBCPW5ldyBSKHRoaXMscCk7cmV0dXJuIEJ9O2EucHJvdG90eXBlLmdldFByb3BlcnR5PWZ1bmN0aW9uKHApe3JldHVybiB0aGlzLl9vUmVzb3VyY2VCdW5kbGU/dGhpcy5fb1Jlc291cmNlQnVuZGxlLmdldFRleHQocCk6bnVsbH07YS5wcm90b3R5cGUuZ2V0UmVzb3VyY2VCdW5kbGU9ZnVuY3Rpb24oKXtpZighdGhpcy5iQXN5bmMpe3JldHVybiB0aGlzLl9vUmVzb3VyY2VCdW5kbGV9ZWxzZXt2YXIgcD10aGlzLl9vUHJvbWlzZTtpZihwKXtyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocixjKXtmdW5jdGlvbiBkKEIpe3IoQil9cC50aGVuKGQsZCl9KX1lbHNle3JldHVybiBQcm9taXNlLnJlc29sdmUodGhpcy5fb1Jlc291cmNlQnVuZGxlKX19fTthLnByb3RvdHlwZS5faGFuZGxlTG9jYWxpemF0aW9uQ2hhbmdlPWZ1bmN0aW9uKCl7Xyh0aGlzLGZhbHNlKX07ZnVuY3Rpb24gXyhtLHQpe3ZhciBkPW0ub0RhdGE7aWYoZCYmKGQuYnVuZGxlVXJsfHxkLmJ1bmRsZU5hbWUpKXt2YXIgcj1tLmxvYWRSZXNvdXJjZUJ1bmRsZShkKTtpZihyIGluc3RhbmNlb2YgUHJvbWlzZSl7dmFyIGU9e3VybDpiKGQuYnVuZGxlVXJsLGQuYnVuZGxlTmFtZSksYXN5bmM6dHJ1ZX07bS5maXJlUmVxdWVzdFNlbnQoZSk7bS5fb1Byb21pc2U9cjttLl9vUHJvbWlzZS50aGVuKGZ1bmN0aW9uKEIpe20uX29SZXNvdXJjZUJ1bmRsZT1CO2RlbGV0ZSBtLl9vUHJvbWlzZTttLmNoZWNrVXBkYXRlKHRydWUpO20uZmlyZVJlcXVlc3RDb21wbGV0ZWQoZSl9KX1lbHNle20uX29SZXNvdXJjZUJ1bmRsZT1yfX1lbHNlIGlmKHQpe3Rocm93IG5ldyBFcnJvcigiTmVpdGhlciBidW5kbGVVcmwgbm9yIGJ1bmRsZU5hbWUgYXJlIGdpdmVuLiBPbmUgb2YgdGhlc2UgaXMgbWFuZGF0b3J5LiIpfX07ZnVuY3Rpb24gYihjLGQpe3ZhciB1PWM7aWYoZCl7dT1xLnNhcC5nZXRNb2R1bGVQYXRoKGQsJy5wcm9wZXJ0aWVzJyl9cmV0dXJuIHV9O3JldHVybiBhfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLm1vZGVsLnhtbC5YTUxQcm9wZXJ0eUJpbmRpbmcnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkubW9kZWwueG1sLlhNTFByb3BlcnR5QmluZGluZycpO3NhcC51aS5kZWZpbmUoInNhcC91aS9tb2RlbC94bWwvWE1MUHJvcGVydHlCaW5kaW5nIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL21vZGVsL0NsaWVudFByb3BlcnR5QmluZGluZyddLGZ1bmN0aW9uKHEsQyl7InVzZSBzdHJpY3QiO3ZhciBYPUMuZXh0ZW5kKCJzYXAudWkubW9kZWwueG1sLlhNTFByb3BlcnR5QmluZGluZyIpO1gucHJvdG90eXBlLnNldFZhbHVlPWZ1bmN0aW9uKHYpe2lmKHRoaXMub1ZhbHVlIT12KXt0aGlzLm9Nb2RlbC5zZXRQcm9wZXJ0eSh0aGlzLnNQYXRoLHYsdGhpcy5vQ29udGV4dCl9fTtYLnByb3RvdHlwZS5jaGVja1VwZGF0ZT1mdW5jdGlvbihmKXt2YXIgdj10aGlzLl9nZXRWYWx1ZSgpO2lmKCFxLnNhcC5lcXVhbCh2LHRoaXMub1ZhbHVlKXx8Zil7dGhpcy5vVmFsdWU9djt0aGlzLl9maXJlQ2hhbmdlKHtyZWFzb246c2FwLnVpLm1vZGVsLkNoYW5nZVJlYXNvbi5DaGFuZ2V9KX19O3JldHVybiBYfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmJhc2UuTWFuYWdlZE9iamVjdCcpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5iYXNlLk1hbmFnZWRPYmplY3QnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvYmFzZS9NYW5hZ2VkT2JqZWN0IixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnLi9CaW5kaW5nUGFyc2VyJywnLi9EYXRhVHlwZScsJy4vRXZlbnRQcm92aWRlcicsJy4vTWFuYWdlZE9iamVjdE1ldGFkYXRhJywnc2FwL3VpL21vZGVsL0NvbXBvc2l0ZUJpbmRpbmcnLCdzYXAvdWkvbW9kZWwvQ29udGV4dEJpbmRpbmcnLCdzYXAvdWkvbW9kZWwvTW9kZWwnLCdzYXAvdWkvbW9kZWwvVHlwZScsJ2pxdWVyeS5zYXAuYWN0JywnanF1ZXJ5LnNhcC5zY3JpcHQnLCdqcXVlcnkuc2FwLnN0cmluZ3MnXSxmdW5jdGlvbihxLEIsRCxFLE0sQyxiLGMsVCl7InVzZSBzdHJpY3QiO3ZhciBkPUUuZXh0ZW5kKCJzYXAudWkuYmFzZS5NYW5hZ2VkT2JqZWN0Iix7bWV0YWRhdGE6eyJhYnN0cmFjdCI6dHJ1ZSxwdWJsaWNNZXRob2RzOlsiZ2V0SWQiLCJnZXRNZXRhZGF0YSIsImdldE1vZGVsIiwic2V0TW9kZWwiLCJoYXNNb2RlbCIsImJpbmRQcm9wZXJ0eSIsInVuYmluZFByb3BlcnR5IiwiYmluZEFnZ3JlZ2F0aW9uIiwidW5iaW5kQWdncmVnYXRpb24iLCJiaW5kT2JqZWN0IiwidW5iaW5kT2JqZWN0IiwiZ2V0T2JqZWN0QmluZGluZyJdLGxpYnJhcnk6InNhcC51aS5jb3JlIixwcm9wZXJ0aWVzOnt9LGFnZ3JlZ2F0aW9uczp7fSxhc3NvY2lhdGlvbnM6e30sZXZlbnRzOnsidmFsaWRhdGlvblN1Y2Nlc3MiOntlbmFibGVFdmVudEJ1YmJsaW5nOnRydWV9LCJ2YWxpZGF0aW9uRXJyb3IiOntlbmFibGVFdmVudEJ1YmJsaW5nOnRydWV9LCJwYXJzZUVycm9yIjp7ZW5hYmxlRXZlbnRCdWJibGluZzp0cnVlfSwiZm9ybWF0RXJyb3IiOntlbmFibGVFdmVudEJ1YmJsaW5nOnRydWV9fX0sY29uc3RydWN0b3I6ZnVuY3Rpb24oaSxzLFMpe0UuYXBwbHkodGhpcyk7aWYodHlwZW9mKGkpIT0ic3RyaW5nIiYmYXJndW1lbnRzLmxlbmd0aD4wKXtTPXM7cz1pO2lmKHMmJnMuaWQpe2k9c1siaWQiXX1lbHNle2k9bnVsbH19aWYoIWkpe2k9dGhpcy5nZXRNZXRhZGF0YSgpLnVpZCgpfHxxLnNhcC51aWQoKX1lbHNle3ZhciBwPWQuX2ZuSWRQcmVwcm9jZXNzb3I7aT0ocD9wLmNhbGwodGhpcyxpKTppKTt2YXIgdD1ELmdldFR5cGUoInNhcC51aS5jb3JlLklEIik7aWYoIXQuaXNWYWxpZChpKSl7dGhyb3cgbmV3IEVycm9yKCJcIiIraSsiXCIgaXMgbm90IGEgdmFsaWQgSUQuIil9fXRoaXMuc0lkPWk7dGhpcy5tUHJvcGVydGllcz10aGlzLmdldE1ldGFkYXRhKCkuY3JlYXRlUHJvcGVydHlCYWcoKTt0aGlzLm1BZ2dyZWdhdGlvbnM9e307dGhpcy5tQXNzb2NpYXRpb25zPXt9O3RoaXMubU1ldGhvZHM9e307dGhpcy5vUGFyZW50PW51bGw7dGhpcy5hRGVsZWdhdGVzPVtdO3RoaXMuYUJlZm9yZURlbGVnYXRlcz1bXTt0aGlzLmlTdXBwcmVzc0ludmFsaWRhdGU9MDt0aGlzLm9Qcm9wYWdhdGVkUHJvcGVydGllcz17b01vZGVsczp7fSxvQmluZGluZ0NvbnRleHRzOnt9fTt0aGlzLm9Nb2RlbHM9e307dGhpcy5vQmluZGluZ0NvbnRleHRzPXt9O3RoaXMubUJpbmRpbmdJbmZvcz17fTt0aGlzLnNCaW5kaW5nUGF0aD1udWxsO3RoaXMubUJpbmRpbmdQYXJhbWV0ZXJzPW51bGw7dGhpcy5tQm91bmRPYmplY3RzPXt9O3RoaXMuX3NPd25lcklkPWQuX3NPd25lcklkO3RyeXtpZih0aGlzLnJlZ2lzdGVyKXRoaXMucmVnaXN0ZXIoKTtpZih0aGlzLl9pbml0Q29tcG9zaXRlU3VwcG9ydCl7dGhpcy5faW5pdENvbXBvc2l0ZVN1cHBvcnQocyl9aWYodGhpcy5pbml0KXt0aGlzLmluaXQoKX10aGlzLmFwcGx5U2V0dGluZ3MocyxTKX1jYXRjaChlKXtpZih0aGlzLmRlcmVnaXN0ZXIpdGhpcy5kZXJlZ2lzdGVyKCk7dGhyb3cgZX19fSxNKTtkLmNyZWF0ZT1mdW5jdGlvbih2LGspe2lmKCF2fHx2IGluc3RhbmNlb2YgZHx8dHlwZW9mIHYhPT0ib2JqZWN0Inx8diBpbnN0YW5jZW9mIFN0cmluZyl7cmV0dXJuIHZ9ZnVuY3Rpb24gZyh0KXtpZih0eXBlb2YgdD09PSJmdW5jdGlvbiIpe3JldHVybiB0fWlmKHR5cGVvZiB0PT09InN0cmluZyIpe3JldHVybiBxLnNhcC5nZXRPYmplY3QodCl9fXZhciBmPWcodi5UeXBlKXx8ZyhrJiZrLnR5cGUpO2lmKHR5cGVvZiBmPT09ImZ1bmN0aW9uIil7cmV0dXJuIG5ldyBmKHYpfXZhciBtPSJEb24ndCBrbm93IGhvdyB0byBjcmVhdGUgYSBNYW5hZ2VkT2JqZWN0IGZyb20gIit2KyIgKCIrKHR5cGVvZiB2KSsiKSI7cS5zYXAubG9nLmZhdGFsKG0pO3Rocm93IG5ldyBFcnJvcihtKX07ZC5fZm5JZFByZXByb2Nlc3Nvcj1udWxsO2QuX2ZuU2V0dGluZ3NQcmVwcm9jZXNzb3I9bnVsbDtkLnJ1bldpdGhQcmVwcm9jZXNzb3JzPWZ1bmN0aW9uKGYscCl7dmFyIG89e2lkOnRoaXMuX2ZuSWRQcmVwcm9jZXNzb3Isc2V0dGluZ3M6dGhpcy5fZm5TZXR0aW5nc1ByZXByb2Nlc3Nvcn07cD1wfHx7fTt0aGlzLl9mbklkUHJlcHJvY2Vzc29yPXAuaWQ7dGhpcy5fZm5TZXR0aW5nc1ByZXByb2Nlc3Nvcj1wLnNldHRpbmdzO3RyeXt2YXIgcj1mLmNhbGwoKTt0aGlzLl9mbklkUHJlcHJvY2Vzc29yPW8uaWQ7dGhpcy5fZm5TZXR0aW5nc1ByZXByb2Nlc3Nvcj1vLnNldHRpbmdzO3JldHVybiByfWNhdGNoKGUpe3RoaXMuX2ZuSWRQcmVwcm9jZXNzb3I9by5pZDt0aGlzLl9mblNldHRpbmdzUHJlcHJvY2Vzc29yPW8uc2V0dGluZ3M7dGhyb3cgZX19O2QuZ2V0T3duZXJJZEZvcj1mdW5jdGlvbihvKXtyZXR1cm4gbyYmby5fc093bmVySWR9O2QucnVuV2l0aE93bmVyPWZ1bmN0aW9uKGYsbyl7dmFyIGE9ZC5fc093bmVySWQ7dHJ5e2QuX3NPd25lcklkPW8uZ2V0SWQoKTt2YXIgcj1mLmNhbGwoKTtkLl9zT3duZXJJZD1hO3JldHVybiByfWNhdGNoKGUpe2QuX3NPd25lcklkPWE7dGhyb3cgZX19O2QucHJvdG90eXBlLmFwcGx5U2V0dGluZ3M9ZnVuY3Rpb24ocyxTKXtpZighc3x8cS5pc0VtcHR5T2JqZWN0KHMpKXtyZXR1cm4gdGhpc312YXIgbT10aGlzLmdldE1ldGFkYXRhKCksdj1tLmdldEpTT05LZXlzKCksYT1kLmNyZWF0ZSxwPWQuX2ZuU2V0dGluZ3NQcmVwcm9jZXNzb3IsayxWLEs7cCYmcC5jYWxsKHRoaXMscyk7aWYocy5tb2RlbHMpe2lmKHR5cGVvZiBzLm1vZGVscyE9PSJvYmplY3QiKXt0aHJvdyBuZXcgRXJyb3IoIm1vZGVscyBtdXN0IGJlIGEgc2ltcGxlIG9iamVjdCIpfWlmKHMubW9kZWxzIGluc3RhbmNlb2YgYyl7dGhpcy5zZXRNb2RlbChzLm1vZGVscyl9ZWxzZXtmb3IoayBpbiBzLm1vZGVscyl7dGhpcy5zZXRNb2RlbChzLm1vZGVsc1trXSxrPT09InVuZGVmaW5lZCI/dW5kZWZpbmVkOmspfX1kZWxldGUgcy5tb2RlbHN9aWYocy5iaW5kaW5nQ29udGV4dHMpe2lmKHR5cGVvZiBzLmJpbmRpbmdDb250ZXh0cyE9PSJvYmplY3QiKXt0aHJvdyBuZXcgRXJyb3IoImJpbmRpbmdDb250ZXh0cyBtdXN0IGJlIGEgc2ltcGxlIG9iamVjdCIpfWlmKHMuYmluZGluZ0NvbnRleHRzIGluc3RhbmNlb2Ygc2FwLnVpLm1vZGVsLkNvbnRleHQpe3RoaXMuc2V0QmluZGluZ0NvbnRleHQocy5iaW5kaW5nQ29udGV4dHMpfWVsc2V7Zm9yKGsgaW4gcy5iaW5kaW5nQ29udGV4dHMpe3RoaXMuc2V0QmluZGluZ0NvbnRleHQocy5iaW5kaW5nQ29udGV4dHNba10saz09PSJ1bmRlZmluZWQiP3VuZGVmaW5lZDprKX19ZGVsZXRlIHMuYmluZGluZ0NvbnRleHRzfWlmKHMub2JqZWN0QmluZGluZ3Mpe2lmKHR5cGVvZiBzLm9iamVjdEJpbmRpbmdzIT09InN0cmluZyImJnR5cGVvZiBzLm9iamVjdEJpbmRpbmdzIT09Im9iamVjdCIpe3Rocm93IG5ldyBFcnJvcigiYmluZGluZyBtdXN0IGJlIGEgc3RyaW5nIG9yIHNpbXBsZSBvYmplY3QiKX1pZih0eXBlb2Ygcy5vYmplY3RCaW5kaW5ncz09PSJzdHJpbmcifHxzLm9iamVjdEJpbmRpbmdzLnBhdGgpe3RoaXMuYmluZE9iamVjdChzLm9iamVjdEJpbmRpbmdzKX1lbHNle2Zvcih2YXIgayBpbiBzLm9iamVjdEJpbmRpbmdzKXtzLm9iamVjdEJpbmRpbmdzLm1vZGVsPWs7dGhpcy5iaW5kT2JqZWN0KHMub2JqZWN0QmluZGluZ3Nba10pfX1kZWxldGUgcy5vYmplY3RCaW5kaW5nc31mb3IoayBpbiBzKXtpZihLPXZba10pe1Y9c1trXTtzd2l0Y2goSy5faUtpbmQpe2Nhc2UgMDp2YXIgbz10aGlzLmV4dHJhY3RCaW5kaW5nSW5mbyhWLFMpO2lmKG8mJnR5cGVvZiBvPT09Im9iamVjdCIpe3RoaXMuYmluZFByb3BlcnR5KGssbyl9ZWxzZXt0aGlzW0suX3NNdXRhdG9yXShvfHxWKX1icmVhaztjYXNlIDE6dmFyIG89Sy5hbHRUeXBlcyYmdGhpcy5leHRyYWN0QmluZGluZ0luZm8oVixTKTtpZihvJiZ0eXBlb2Ygbz09PSJvYmplY3QiKXt0aGlzLmJpbmRQcm9wZXJ0eShrLG8pfWVsc2V7dGhpc1tLLl9zTXV0YXRvcl0oYShvfHxWLEspKX1icmVhaztjYXNlIDI6dmFyIG89dGhpcy5leHRyYWN0QmluZGluZ0luZm8oVixTKTtpZihvJiZ0eXBlb2Ygbz09PSJvYmplY3QiKXt0aGlzLmJpbmRBZ2dyZWdhdGlvbihrLG8pfWVsc2V7Vj1vfHxWO2lmKFYmJiFxLmlzQXJyYXkoVikpe1Y9W1ZdfWlmKFYpe2Zvcih2YXIgaT0wLGw9Vi5sZW5ndGg7aTxsO2krKyl7dGhpc1tLLl9zTXV0YXRvcl0oYShWW2ldLEspKX19fWJyZWFrO2Nhc2UgMzp0aGlzW0suX3NNdXRhdG9yXShWKTticmVhaztjYXNlIDQ6aWYoViYmIXEuaXNBcnJheShWKSl7Vj1bVl19aWYoVil7Zm9yKHZhciBpPTAsbD1WLmxlbmd0aDtpPGw7aSsrKXt0aGlzW0suX3NNdXRhdG9yXShWW2ldKX19YnJlYWs7Y2FzZSA1OmlmKHR5cGVvZiBWPT0iZnVuY3Rpb24iKXt0aGlzW0suX3NNdXRhdG9yXShWKX1lbHNle3RoaXNbSy5fc011dGF0b3JdKFZbMF0sVlsxXSxWWzJdKX1icmVhaztkZWZhdWx0OmJyZWFrfX19cmV0dXJuIHRoaXN9O2QucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIk1hbmFnZWRPYmplY3QgIit0aGlzLmdldE1ldGFkYXRhKCkuZ2V0TmFtZSgpKyIjIit0aGlzLmdldElkKCl9O2QucHJvdG90eXBlLmdldElkPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc0lkfTtkLnByb3RvdHlwZS5zZXRQcm9wZXJ0eT1mdW5jdGlvbihwLHYscyl7dmFyIG89dGhpcy5tUHJvcGVydGllc1twXTt2PXRoaXMudmFsaWRhdGVQcm9wZXJ0eShwLHYpO2lmKHEuc2FwLmVxdWFsKG8sdikpe3JldHVybiB0aGlzfWlmKHMpe3Euc2FwLmFjdC5yZWZyZXNoKCk7dGhpcy5pU3VwcHJlc3NJbnZhbGlkYXRlKyt9dGhpcy5tUHJvcGVydGllc1twXT12O2lmKCF0aGlzLmlzSW52YWxpZGF0ZVN1cHByZXNzZWQoKSl7dGhpcy5pbnZhbGlkYXRlKCl9dGhpcy51cGRhdGVNb2RlbFByb3BlcnR5KHAsdixvKTtFLnByb3RvdHlwZS5maXJlRXZlbnQuYXBwbHkodGhpcyxbIl9jaGFuZ2UiLHsiaWQiOnRoaXMuZ2V0SWQoKSwibmFtZSI6cCwib2xkVmFsdWUiOm8sIm5ld1ZhbHVlIjp2fV0pO2lmKHMpe3RoaXMuaVN1cHByZXNzSW52YWxpZGF0ZS0tfXJldHVybiB0aGlzfTtkLnByb3RvdHlwZS5nZXRQcm9wZXJ0eT1mdW5jdGlvbihwKXt2YXIgdj10aGlzLm1Qcm9wZXJ0aWVzW3BdLG09dGhpcy5nZXRNZXRhZGF0YSgpLFA9bS5nZXRBbGxQcm9wZXJ0aWVzKClbcF0sdDtpZighUCl7dGhyb3cgbmV3IEVycm9yKCJQcm9wZXJ0eSBcIiIrcCsiXCIgZG9lcyBub3QgZXhpc3QgaW4gIit0aGlzKX10PUQuZ2V0VHlwZShQLnR5cGUpO2lmKHQgaW5zdGFuY2VvZiBEJiZ0LmlzQXJyYXlUeXBlKCkmJnEuaXNBcnJheSh2KSl7dj12LnNsaWNlKDApfWlmKHYgaW5zdGFuY2VvZiBTdHJpbmcpe3Y9di52YWx1ZU9mKCl9cmV0dXJuIHZ9O2QucHJvdG90eXBlLnZhbGlkYXRlUHJvcGVydHk9ZnVuY3Rpb24ocCx2KXt2YXIgbT10aGlzLmdldE1ldGFkYXRhKCksUD1tLmdldEFsbFByb3BlcnRpZXMoKVtwXSx0O2lmKCFQKXt0aHJvdyBuZXcgRXJyb3IoIlByb3BlcnR5IFwiIitwKyJcIiBkb2VzIG5vdCBleGlzdCBpbiAiK3RoaXMpfXQ9RC5nZXRUeXBlKFAudHlwZSk7aWYodCBpbnN0YW5jZW9mIEQmJnQuaXNBcnJheVR5cGUoKSYmcS5pc0FycmF5KHYpKXt2PXYuc2xpY2UoMCl9aWYodj09PW51bGx8fHY9PT11bmRlZmluZWQpe2lmKFAuZGVmYXVsdFZhbHVlIT09bnVsbCl7dj1QLmRlZmF1bHRWYWx1ZX1lbHNle3Y9dC5nZXREZWZhdWx0VmFsdWUoKX19ZWxzZSBpZih0IGluc3RhbmNlb2YgRCl7aWYodC5nZXROYW1lKCk9PSJzdHJpbmciKXtpZighKHR5cGVvZiB2PT0ic3RyaW5nInx8diBpbnN0YW5jZW9mIFN0cmluZykpe3Y9IiIrdn19ZWxzZSBpZih0LmdldE5hbWUoKT09InN0cmluZ1tdIil7aWYodHlwZW9mIHY9PSJzdHJpbmciKXt2PVt2XX1pZighcS5pc0FycmF5KHYpKXt0aHJvdyBuZXcgRXJyb3IoIlwiIit2KyJcIiBpcyBvZiB0eXBlICIrdHlwZW9mIHYrIiwgZXhwZWN0ZWQgc3RyaW5nW10iKyIgZm9yIHByb3BlcnR5IFwiIitwKyJcIiBvZiAiK3RoaXMpfWZvcih2YXIgaT0wO2k8di5sZW5ndGg7aSsrKXtpZighdHlwZW9mIHZbaV09PSJzdHJpbmciKXt2W2ldPSIiK3ZbaV19fX1lbHNlIGlmKCF0LmlzVmFsaWQodikpe3Rocm93IG5ldyBFcnJvcigiXCIiK3YrIlwiIGlzIG9mIHR5cGUgIit0eXBlb2YgdisiLCBleHBlY3RlZCAiK3QuZ2V0TmFtZSgpKyIgZm9yIHByb3BlcnR5IFwiIitwKyJcIiBvZiAiK3RoaXMpfX1lbHNlIGlmKCEodiBpbiB0KSl7dGhyb3cgbmV3IEVycm9yKCJcIiIrdisiXCIgaXMgbm90IGEgdmFsaWQgZW50cnkgb2YgdGhlIGVudW1lcmF0aW9uIGZvciBwcm9wZXJ0eSBcIiIrcCsiXCIgb2YgIit0aGlzKX1pZih0JiZ0Lm5vcm1hbGl6ZSYmdHlwZW9mIHQubm9ybWFsaXplPT09ImZ1bmN0aW9uIil7dj10Lm5vcm1hbGl6ZSh2KX1yZXR1cm4gdn07ZC5wcm90b3R5cGUuZ2V0T3JpZ2luSW5mbz1mdW5jdGlvbihwKXt2YXIgdj10aGlzLm1Qcm9wZXJ0aWVzW3BdO2lmKCEodiBpbnN0YW5jZW9mIFN0cmluZyYmdi5vcmlnaW5JbmZvKSl7cmV0dXJuIG51bGx9cmV0dXJuIHYub3JpZ2luSW5mb307ZC5wcm90b3R5cGUuc2V0QXNzb2NpYXRpb249ZnVuY3Rpb24oYSxpLHMpe2lmKGkgaW5zdGFuY2VvZiBkKXtpPWkuZ2V0SWQoKX1lbHNlIGlmKGkhPW51bGwmJnR5cGVvZiBpIT09InN0cmluZyIpe3JldHVybiB0aGlzfWlmKHRoaXMubUFzc29jaWF0aW9uc1thXT09PWkpe3JldHVybiB0aGlzfWlmKHMpe3RoaXMuaVN1cHByZXNzSW52YWxpZGF0ZSsrfXRoaXMubUFzc29jaWF0aW9uc1thXT1pO2lmKCF0aGlzLmlzSW52YWxpZGF0ZVN1cHByZXNzZWQoKSl7dGhpcy5pbnZhbGlkYXRlKCl9aWYocyl7dGhpcy5pU3VwcHJlc3NJbnZhbGlkYXRlLS19cmV0dXJuIHRoaXN9O2QucHJvdG90eXBlLmdldEFzc29jaWF0aW9uPWZ1bmN0aW9uKGEsbyl7dmFyIHI9dGhpcy5tQXNzb2NpYXRpb25zW2FdO2lmKCFyKXtyPXRoaXMubUFzc29jaWF0aW9uc1thXT1vfHxudWxsfWVsc2V7aWYodHlwZW9mIHIubGVuZ3RoPT09J251bWJlcicmJiEoci5wcm9wZXJ0eUlzRW51bWVyYWJsZSgnbGVuZ3RoJykpKXtyZXR1cm4gci5zbGljZSgpfXJldHVybiByfXJldHVybiByfTtkLnByb3RvdHlwZS5hZGRBc3NvY2lhdGlvbj1mdW5jdGlvbihhLGkscyl7aWYoaSBpbnN0YW5jZW9mIGQpe2k9aS5nZXRJZCgpfWVsc2UgaWYodHlwZW9mIGkhPT0ic3RyaW5nIil7cmV0dXJuIHRoaXN9aWYocyl7dGhpcy5pU3VwcHJlc3NJbnZhbGlkYXRlKyt9dmFyIEk9dGhpcy5tQXNzb2NpYXRpb25zW2FdO2lmKCFJKXtJPXRoaXMubUFzc29jaWF0aW9uc1thXT1baV19ZWxzZXtJLnB1c2goaSl9aWYoIXRoaXMuaXNJbnZhbGlkYXRlU3VwcHJlc3NlZCgpKXt0aGlzLmludmFsaWRhdGUoKX1pZihzKXt0aGlzLmlTdXBwcmVzc0ludmFsaWRhdGUtLX1yZXR1cm4gdGhpc307ZC5wcm90b3R5cGUucmVtb3ZlQXNzb2NpYXRpb249ZnVuY3Rpb24oYSxvLHMpe3ZhciBJPXRoaXMubUFzc29jaWF0aW9uc1thXTt2YXIgZT1udWxsO2lmKHMpe3RoaXMuaVN1cHByZXNzSW52YWxpZGF0ZSsrfWlmKHR5cGVvZihvKT09Im9iamVjdCImJm8uZ2V0SWQpe289by5nZXRJZCgpfWlmKHR5cGVvZihvKT09InN0cmluZyIpe2Zvcih2YXIgaT0wO2k8SS5sZW5ndGg7aSsrKXtpZihJW2ldPT1vKXtvPWk7YnJlYWt9fX1pZih0eXBlb2Yobyk9PSJudW1iZXIiKXtpZihvPDB8fG8+PUkubGVuZ3RoKXtxLnNhcC5sb2cud2FybmluZygiTWFuYWdlZE9iamVjdC5yZW1vdmVBc3NvY2lhdGlvbiBjYWxsZWQgd2l0aCBpbnZhbGlkIGluZGV4OiAiK2ErIiwgIitvKX1lbHNle2U9SVtvXTtJLnNwbGljZShvLDEpO2lmKCF0aGlzLmlzSW52YWxpZGF0ZVN1cHByZXNzZWQoKSl7dGhpcy5pbnZhbGlkYXRlKCl9fX1pZihzKXt0aGlzLmlTdXBwcmVzc0ludmFsaWRhdGUtLX1yZXR1cm4gZX07ZC5wcm90b3R5cGUucmVtb3ZlQWxsQXNzb2NpYXRpb249ZnVuY3Rpb24oYSxzKXt2YXIgaT10aGlzLm1Bc3NvY2lhdGlvbnNbYV07aWYoIWkpe3JldHVybltdfWlmKHMpe3RoaXMuaVN1cHByZXNzSW52YWxpZGF0ZSsrfWRlbGV0ZSB0aGlzLm1Bc3NvY2lhdGlvbnNbYV07aWYoIXRoaXMuaXNJbnZhbGlkYXRlU3VwcHJlc3NlZCgpKXt0aGlzLmludmFsaWRhdGUoKX1pZihzKXt0aGlzLmlTdXBwcmVzc0ludmFsaWRhdGUtLX1yZXR1cm4gaX07ZC5wcm90b3R5cGUudmFsaWRhdGVBZ2dyZWdhdGlvbj1mdW5jdGlvbihhLG8sbSl7dmFyIGU9dGhpcy5nZXRNZXRhZGF0YSgpLEE9ZS5nZXRNYW5hZ2VkQWdncmVnYXRpb24oYSksZix0LGksZztpZighQSl7aWYoYSYmZS5fbUhpZGRlbkFnZ3JlZ2F0aW9ucyYmZS5fbUhpZGRlbkFnZ3JlZ2F0aW9uc1thXSl7QT1lLl9tSGlkZGVuQWdncmVnYXRpb25zW2FdO3Euc2FwLmxvZy5lcnJvcigiU3VwcG9ydCBmb3IgJ19tSGlkZGVuQWdncmVnYXRpb25zJyBpcyBhYm91dCB0byBiZSByZW1vdmVkICh3aXRoIDEuMTIgbGF0ZXN0KS4gSGlkZGVuIGFnZ3JlZ2F0aW9ucyBsaWtlICciK2UuZ2V0TmFtZSgpKyIuIithKyInIGluc3RlYWQgY2FuIGJlIGRlY2xhcmVkIGxpa2Ugbm9ybWFsIGFnZ3JlZ2F0aW9ucyBidXQgd2l0aCB2aXNpYmlsaXR5OidoaWRkZW4nLiIpfWVsc2V7Zz0iQWdncmVnYXRpb24gXCIiK2ErIlwiIGRvZXMgbm90IGV4aXN0IGluICIrdGhpcztpZigvXnNhcFwuKHVpXC5jb3JlfHVpXC5jb21tb25zfHVpXC50YWJsZXx1aVwudXgzfG18bWFraXR8dml6fHVpZXh0XC5pbmJveCkkLy50ZXN0KGUuZ2V0TGlicmFyeU5hbWUoKXx8IiIpKXt0aHJvdyBuZXcgRXJyb3IoZyl9ZWxzZXtxLnNhcC5sb2cuZXJyb3IoIlN1cHBvcnQgZm9yIHVuZGVjbGFyZWQgYWdncmVnYXRpb25zIGlzIGFib3V0IHRvIGJlIHJlbW92ZWQgKHdpdGggMS4xMiBsYXRlc3QpLiBIaWRkZW4gYWdncmVnYXRpb25zIGxpa2UgJyIrZS5nZXROYW1lKCkrIi4iK2ErIicgY2FuIGJlIGRlY2xhcmVkIGxpa2Ugbm9ybWFsIGFnZ3JlZ2F0aW9ucyBidXQgd2l0aCB2aXNpYmlsaXR5OidoaWRkZW4nLiIpO3JldHVybiBvfX19aWYoQS5tdWx0aXBsZSE9PW0pe3Rocm93IG5ldyBFcnJvcigiQWdncmVnYXRpb24gJyIrYSsiJyBvZiAiK3RoaXMrIiB1c2VkIHdpdGggd3JvbmcgY2FyZGluYWxpdHkgKGRlY2xhcmVkIGFzICIrKEEubXVsdGlwbGU/IjAuLm4iOiIwLi4xIikrIikiKX1pZighQS5tdWx0aXBsZSYmIW8pe3JldHVybiBvfXQ9cS5zYXAuZ2V0T2JqZWN0KEEudHlwZSk7aWYodHlwZW9mIHQ9PT0iZnVuY3Rpb24iJiZvIGluc3RhbmNlb2YgdCl7cmV0dXJuIG99aWYobyYmby5nZXRNZXRhZGF0YSYmby5nZXRNZXRhZGF0YSgpLmlzSW5zdGFuY2VPZihBLnR5cGUpKXtyZXR1cm4gb31mPUEuYWx0VHlwZXM7aWYoZiYmZi5sZW5ndGgpe2lmKG89PW51bGwpe3JldHVybiBvfWZvcihpPTA7aTxmLmxlbmd0aDtpKyspe3Q9RC5nZXRUeXBlKGZbaV0pO2lmKHQgaW5zdGFuY2VvZiBEKXtpZih0LmlzVmFsaWQobykpe3JldHVybiBvfX1lbHNlIGlmKG8gaW4gdCl7cmV0dXJuIG99fX1nPSJcIiIrbysiXCIgaXMgbm90IHZhbGlkIGZvciBhZ2dyZWdhdGlvbiBcIiIrYSsiXCIgb2YgIit0aGlzO2lmKEQuaXNJbnRlcmZhY2VUeXBlKEEudHlwZSkpe3JldHVybiBvfWVsc2V7dGhyb3cgbmV3IEVycm9yKGcpfX07ZC5wcm90b3R5cGUuc2V0QWdncmVnYXRpb249ZnVuY3Rpb24oYSxvLHMpe3ZhciBPPXRoaXMubUFnZ3JlZ2F0aW9uc1thXTtpZihPPT09byl7cmV0dXJuIHRoaXN9bz10aGlzLnZhbGlkYXRlQWdncmVnYXRpb24oYSxvLGZhbHNlKTtpZihzKXt0aGlzLmlTdXBwcmVzc0ludmFsaWRhdGUrK31pZihPIGluc3RhbmNlb2YgZCl7Ty5zZXRQYXJlbnQobnVsbCl9dGhpcy5tQWdncmVnYXRpb25zW2FdPW87aWYobyBpbnN0YW5jZW9mIGQpe28uc2V0UGFyZW50KHRoaXMsYSxzKX1lbHNle2lmKCF0aGlzLmlzSW52YWxpZGF0ZVN1cHByZXNzZWQoKSl7dGhpcy5pbnZhbGlkYXRlKCl9fWlmKHMpe3RoaXMuaVN1cHByZXNzSW52YWxpZGF0ZS0tfXJldHVybiB0aGlzfTtkLnByb3RvdHlwZS5nZXRBZ2dyZWdhdGlvbj1mdW5jdGlvbihhLG8pe3ZhciBlPXRoaXMubUFnZ3JlZ2F0aW9uc1thXTtpZighZSl7ZT10aGlzLm1BZ2dyZWdhdGlvbnNbYV09b3x8bnVsbH1pZihlKXtpZih0eXBlb2YgZS5sZW5ndGg9PT0nbnVtYmVyJyYmIShlLnByb3BlcnR5SXNFbnVtZXJhYmxlKCdsZW5ndGgnKSkpe3JldHVybiBlLnNsaWNlKCl9cmV0dXJuIGV9ZWxzZXtyZXR1cm4gbnVsbH19O2QucHJvdG90eXBlLmluZGV4T2ZBZ2dyZWdhdGlvbj1mdW5jdGlvbihhLG8pe3ZhciBlPXRoaXMubUFnZ3JlZ2F0aW9uc1thXTtpZihlKXtpZihlLmxlbmd0aD09dW5kZWZpbmVkKXtyZXR1cm4tMn1mb3IodmFyIGk9MDtpPGUubGVuZ3RoO2krKyl7aWYoZVtpXT09byl7cmV0dXJuIGl9fX1yZXR1cm4tMX07ZC5wcm90b3R5cGUuaW5zZXJ0QWdncmVnYXRpb249ZnVuY3Rpb24oYSxvLEkscyl7aWYoIW8pe3JldHVybiB0aGlzfW89dGhpcy52YWxpZGF0ZUFnZ3JlZ2F0aW9uKGEsbyx0cnVlKTt2YXIgZT10aGlzLm1BZ2dyZWdhdGlvbnNbYV18fCh0aGlzLm1BZ2dyZWdhdGlvbnNbYV09W10pO3ZhciBpPUk8MD8wOihJPmUubGVuZ3RoP2UubGVuZ3RoOkkpO2lmKGkhPT1JKXtxLnNhcC5sb2cud2FybmluZygiTWFuYWdlZE9iamVjdC5pbnNlcnRBZ2dyZWdhdGlvbjogaW5kZXggJyIrSSsiJyBvdXQgb2YgcmFuZ2UgWzAsIitlLmxlbmd0aCsiXSwgZm9yY2VkIHRvICIraSl9ZS5zcGxpY2UoaSwwLG8pO28uc2V0UGFyZW50KHRoaXMsYSxzKTtyZXR1cm4gdGhpc307ZC5wcm90b3R5cGUuYWRkQWdncmVnYXRpb249ZnVuY3Rpb24oYSxvLHMpe2lmKCFvKXtyZXR1cm4gdGhpc31vPXRoaXMudmFsaWRhdGVBZ2dyZWdhdGlvbihhLG8sdHJ1ZSk7dmFyIGU9dGhpcy5tQWdncmVnYXRpb25zW2FdO2lmKCFlKXtlPXRoaXMubUFnZ3JlZ2F0aW9uc1thXT1bb119ZWxzZXtlLnB1c2gobyl9by5zZXRQYXJlbnQodGhpcyxhLHMpO3JldHVybiB0aGlzfTtkLnByb3RvdHlwZS5yZW1vdmVBZ2dyZWdhdGlvbj1mdW5jdGlvbihhLG8scyl7dmFyIGU9dGhpcy5tQWdncmVnYXRpb25zW2FdLGY9bnVsbCxpO2lmKCFlKXtyZXR1cm4gbnVsbH1pZihzKXt0aGlzLmlTdXBwcmVzc0ludmFsaWRhdGUrK31pZih0eXBlb2Yobyk9PSJzdHJpbmciKXtmb3IoaT0wO2k8ZS5sZW5ndGg7aSsrKXtpZihlW2ldJiZlW2ldLmdldElkKCk9PT1vKXtvPWk7YnJlYWt9fX1pZih0eXBlb2Yobyk9PSJvYmplY3QiKXtmb3IoaT0wO2k8ZS5sZW5ndGg7aSsrKXtpZihlW2ldPT1vKXtvPWk7YnJlYWt9fX1pZih0eXBlb2Yobyk9PSJudW1iZXIiKXtpZihvPDB8fG8+PWUubGVuZ3RoKXtxLnNhcC5sb2cud2FybmluZygiTWFuYWdlZE9iamVjdC5yZW1vdmVBZ2dyZWdhdGlvbiBjYWxsZWQgd2l0aCBpbnZhbGlkIGluZGV4OiAiK2ErIiwgIitvKX1lbHNle2Y9ZVtvXTtlLnNwbGljZShvLDEpO2Yuc2V0UGFyZW50KG51bGwpO2lmKCF0aGlzLmlzSW52YWxpZGF0ZVN1cHByZXNzZWQoKSl7dGhpcy5pbnZhbGlkYXRlKCl9fX1pZihzKXt0aGlzLmlTdXBwcmVzc0ludmFsaWRhdGUtLX1yZXR1cm4gZn07ZC5wcm90b3R5cGUucmVtb3ZlQWxsQWdncmVnYXRpb249ZnVuY3Rpb24oYSxzKXt2YXIgZT10aGlzLm1BZ2dyZWdhdGlvbnNbYV07aWYoIWUpe3JldHVybltdfWlmKHMpe3RoaXMuaVN1cHByZXNzSW52YWxpZGF0ZSsrfWRlbGV0ZSB0aGlzLm1BZ2dyZWdhdGlvbnNbYV07Zm9yKHZhciBpPTA7aTxlLmxlbmd0aDtpKyspe2VbaV0uc2V0UGFyZW50KG51bGwpfWlmKCF0aGlzLmlzSW52YWxpZGF0ZVN1cHByZXNzZWQoKSl7dGhpcy5pbnZhbGlkYXRlKCl9aWYocyl7dGhpcy5pU3VwcHJlc3NJbnZhbGlkYXRlLS19cmV0dXJuIGV9O2QucHJvdG90eXBlLmRlc3Ryb3lBZ2dyZWdhdGlvbj1mdW5jdGlvbihhLHMpe3ZhciBlPXRoaXMubUFnZ3JlZ2F0aW9uc1thXSxpLGY7aWYoIWUpe3JldHVybiB0aGlzfWlmKHMpe3RoaXMuaVN1cHByZXNzSW52YWxpZGF0ZSsrfWRlbGV0ZSB0aGlzLm1BZ2dyZWdhdGlvbnNbYV07aWYoZSBpbnN0YW5jZW9mIGQpe2UuZGVzdHJveShzKX1lbHNlIGlmKHEuaXNBcnJheShlKSl7Zm9yKGk9ZS5sZW5ndGgtMTtpPj0wO2ktLSl7Zj1lW2ldO2lmKGYpe2YuZGVzdHJveShzKX19fWlmKCF0aGlzLmlzSW52YWxpZGF0ZVN1cHByZXNzZWQoKSl7dGhpcy5pbnZhbGlkYXRlKCl9aWYocyl7dGhpcy5pU3VwcHJlc3NJbnZhbGlkYXRlLS19cmV0dXJuIHRoaXN9O2QucHJvdG90eXBlLmludmFsaWRhdGU9ZnVuY3Rpb24oKXtpZih0aGlzLm9QYXJlbnQpe3RoaXMub1BhcmVudC5pbnZhbGlkYXRlKHRoaXMpfX07ZC5wcm90b3R5cGUuaXNJbnZhbGlkYXRlU3VwcHJlc3NlZD1mdW5jdGlvbigpe3ZhciBpPXRoaXMuaVN1cHByZXNzSW52YWxpZGF0ZT4wO2lmKHRoaXMub1BhcmVudCYmdGhpcy5vUGFyZW50IGluc3RhbmNlb2YgZCl7aT1pfHx0aGlzLm9QYXJlbnQuaXNJbnZhbGlkYXRlU3VwcHJlc3NlZCgpfXJldHVybiBpfTtkLnByb3RvdHlwZS5fcmVtb3ZlQ2hpbGQ9ZnVuY3Rpb24obyxhLHMpe2lmKCFhKXtxLnNhcC5sb2cuZXJyb3IoIkNhbm5vdCByZW1vdmUgYWdncmVnYXRlZCBjaGlsZCB3aXRob3V0IGFnZ3JlZ2F0aW9uIG5hbWUuIixudWxsLHRoaXMpfWVsc2V7aWYocyl7dGhpcy5pU3VwcHJlc3NJbnZhbGlkYXRlKyt9dmFyIGk9dGhpcy5pbmRleE9mQWdncmVnYXRpb24oYSxvKTt2YXIgQT10aGlzLmdldE1ldGFkYXRhKCkuZ2V0SlNPTktleXMoKVthXTtpZihpPT0tMil7aWYoQSYmdGhpc1tBLl9zTXV0YXRvcl0pe3RoaXNbQS5fc011dGF0b3JdKG51bGwpfWVsc2V7dGhpcy5zZXRBZ2dyZWdhdGlvbihhLG51bGwscyl9fWVsc2UgaWYoaT4tMSl7aWYoQSYmdGhpc1tBLl9zUmVtb3ZlTXV0YXRvcl0pe3RoaXNbQS5fc1JlbW92ZU11dGF0b3JdKGkpfWVsc2V7dGhpcy5yZW1vdmVBZ2dyZWdhdGlvbihhLGkscyl9fWVsc2V7fWlmKCF0aGlzLmlzSW52YWxpZGF0ZVN1cHByZXNzZWQoKSl7dGhpcy5pbnZhbGlkYXRlKCl9aWYocyl7dGhpcy5pU3VwcHJlc3NJbnZhbGlkYXRlLS19fX07ZC5wcm90b3R5cGUuc2V0UGFyZW50PWZ1bmN0aW9uKHAsYSxzKXt2YXIgdD10aGlzO2lmKCFwKXt0aGlzLm9QYXJlbnQ9bnVsbDt0aGlzLnNQYXJlbnRBZ2dyZWdhdGlvbk5hbWU9bnVsbDt0aGlzLm9Qcm9wYWdhdGVkUHJvcGVydGllcz17b01vZGVsczp7fSxvQmluZGluZ0NvbnRleHRzOnt9fTtxLnNhcC5hY3QucmVmcmVzaCgpO3JldHVybn1pZihzKXtxLnNhcC5hY3QucmVmcmVzaCgpO3RoaXMuaVN1cHByZXNzSW52YWxpZGF0ZSsrfXZhciBvPXRoaXMuZ2V0UGFyZW50KCk7aWYobyl7by5fcmVtb3ZlQ2hpbGQodGhpcyx0aGlzLnNQYXJlbnRBZ2dyZWdhdGlvbk5hbWUpfXRoaXMub1BhcmVudD1wO3RoaXMuc1BhcmVudEFnZ3JlZ2F0aW9uTmFtZT1hO3RoaXMub1Byb3BhZ2F0ZWRQcm9wZXJ0aWVzPXAuX2dldFByb3BlcnRpZXNUb1Byb3BhZ2F0ZSgpO2lmKHRoaXMuaGFzTW9kZWwoKSl7dGhpcy51cGRhdGVCaW5kaW5nQ29udGV4dChmYWxzZSx0cnVlLHVuZGVmaW5lZCx0cnVlKTt0aGlzLnVwZGF0ZUJpbmRpbmdzKHRydWUsbnVsbCk7dGhpcy5wcm9wYWdhdGVQcm9wZXJ0aWVzKHRydWUpfWlmKHAmJiF0aGlzLmlzSW52YWxpZGF0ZVN1cHByZXNzZWQoKSl7cC5pbnZhbGlkYXRlKHRoaXMpfWlmKHMpe3RoaXMuaVN1cHByZXNzSW52YWxpZGF0ZS0tfXJldHVybiB0aGlzfTtkLnByb3RvdHlwZS5nZXRQYXJlbnQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vUGFyZW50fTtkLnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKHMpe3ZhciB0PXRoaXM7aWYocyl7dGhpcy5pU3VwcHJlc3NJbnZhbGlkYXRlKyt9aWYodGhpcy5leGl0KXt0aGlzLmV4aXQoKX1pZih0aGlzLl9leGl0Q29tcG9zaXRlU3VwcG9ydCl7dGhpcy5fZXhpdENvbXBvc2l0ZVN1cHBvcnQoKX1mb3IodmFyIGEgaW4gdGhpcy5tQWdncmVnYXRpb25zKXt0aGlzLmRlc3Ryb3lBZ2dyZWdhdGlvbihhLHMpfWlmKHRoaXMuZGVyZWdpc3Rlcil0aGlzLmRlcmVnaXN0ZXIoKTtpZih0aGlzLm9QYXJlbnQmJnRoaXMuc1BhcmVudEFnZ3JlZ2F0aW9uTmFtZSl7dGhpcy5vUGFyZW50Ll9yZW1vdmVDaGlsZCh0aGlzLHRoaXMuc1BhcmVudEFnZ3JlZ2F0aW9uTmFtZSxzKX1kZWxldGUgdGhpcy5vUGFyZW50O3EuZWFjaCh0aGlzLm1CaW5kaW5nSW5mb3MsZnVuY3Rpb24obixvKXtpZihvLmZhY3Rvcnkpe3QudW5iaW5kQWdncmVnYXRpb24obix0cnVlKX1lbHNle3QudW5iaW5kUHJvcGVydHkobix0cnVlKX19KTtpZihzKXt0aGlzLmlTdXBwcmVzc0ludmFsaWRhdGUtLX1FLnByb3RvdHlwZS5kZXN0cm95LmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLnNldFBhcmVudD1mdW5jdGlvbigpe3Rocm93IEVycm9yKCJUaGUgb2JqZWN0IHdpdGggSUQgIit0LmdldElkKCkrIiB3YXMgZGVzdHJveWVkIGFuZCBjYW5ub3QgYmUgdXNlZCBhbnltb3JlLiIpfTt0aGlzLmJJc0Rlc3Ryb3llZD10cnVlfTtkLmJpbmRpbmdQYXJzZXI9Qi5zaW1wbGVQYXJzZXI7ZC5wcm90b3R5cGUuaXNCaW5kaW5nPWZ1bmN0aW9uKHYsayl7cmV0dXJuIm9iamVjdCI9PT10eXBlb2YgdGhpcy5leHRyYWN0QmluZGluZ0luZm8odil9O2QucHJvdG90eXBlLmV4dHJhY3RCaW5kaW5nSW5mbz1mdW5jdGlvbih2LHMpe2lmKHYmJnR5cGVvZiB2PT09Im9iamVjdCIpe2lmKHYudWk1b2JqZWN0KXtkZWxldGUgdi51aTVvYmplY3R9ZWxzZSBpZih2LnBhdGh8fHYucGFydHMpe2lmKHYudGVtcGxhdGUpe3YudGVtcGxhdGU9ZC5jcmVhdGUodi50ZW1wbGF0ZSl9cmV0dXJuIHZ9fWlmKHR5cGVvZiB2PT09InN0cmluZyIpe3JldHVybiBkLmJpbmRpbmdQYXJzZXIodixzLHRydWUpfX07ZC5wcm90b3R5cGUuZ2V0QmluZGluZ0luZm89ZnVuY3Rpb24obil7cmV0dXJuIHRoaXMubUJpbmRpbmdJbmZvc1tuXX07ZC5wcm90b3R5cGUuYmluZE9iamVjdD1mdW5jdGlvbihwLFApe3ZhciBhPXt9LG8sbSxzO2lmKHR5cGVvZiBwPT0ib2JqZWN0Iil7dmFyIGU9cDtwPWUucGF0aDtQPWUucGFyYW1ldGVyczttPWUubW9kZWw7YS5ldmVudHM9ZS5ldmVudHN9cz1wLmluZGV4T2YoIj4iKTthLnNCaW5kaW5nUGF0aD1wO2EubUJpbmRpbmdQYXJhbWV0ZXJzPVA7aWYocz4wKXttPXAuc3Vic3RyKDAscyk7YS5zQmluZGluZ1BhdGg9cC5zdWJzdHIocysxKX1vPXRoaXMubUJvdW5kT2JqZWN0c1ttXTtpZihvJiZvLmJpbmRpbmcpe28uYmluZGluZy5kZXRhY2hDaGFuZ2Uoby5mQ2hhbmdlSGFuZGxlcik7by5iaW5kaW5nLmRldGFjaEV2ZW50cyhvLmV2ZW50cyl9dGhpcy5tQm91bmRPYmplY3RzW21dPWE7aWYodGhpcy5nZXRNb2RlbChtKSl7dGhpcy5fYmluZE9iamVjdChtLGEpfXJldHVybiB0aGlzfTtkLnByb3RvdHlwZS5fYmluZE9iamVjdD1mdW5jdGlvbihtLG8pe3ZhciBhLHAsZSx0PXRoaXM7dmFyIGY9ZnVuY3Rpb24oZyl7dC5zZXRCaW5kaW5nQ29udGV4dChhLmdldEJvdW5kQ29udGV4dCgpLG0pfTtlPXRoaXMuZ2V0TW9kZWwobSk7aWYodGhpcy5vUGFyZW50JiZlPT10aGlzLm9QYXJlbnQuZ2V0TW9kZWwobSkpe3A9dGhpcy5vUGFyZW50LmdldEJpbmRpbmdDb250ZXh0KG0pfWE9ZS5iaW5kQ29udGV4dChvLnNCaW5kaW5nUGF0aCxwLG8ubUJpbmRpbmdQYXJhbWV0ZXJzKTthLmF0dGFjaENoYW5nZShmKTtvLmJpbmRpbmc9YTtvLmZDaGFuZ2VIYW5kbGVyPWY7YS5hdHRhY2hFdmVudHMoby5ldmVudHMpO2EuaW5pdGlhbGl6ZSgpfTtkLnByb3RvdHlwZS5iaW5kQ29udGV4dD1mdW5jdGlvbihwKXtyZXR1cm4gdGhpcy5iaW5kRWxlbWVudChwKX07ZC5wcm90b3R5cGUudW5iaW5kQ29udGV4dD1mdW5jdGlvbihtKXtyZXR1cm4gdGhpcy51bmJpbmRFbGVtZW50KG0pfTtkLnByb3RvdHlwZS51bmJpbmRPYmplY3Q9ZnVuY3Rpb24obSl7dmFyIG89dGhpcy5tQm91bmRPYmplY3RzW21dO2lmKG8pe2lmKG8uYmluZGluZyl7by5iaW5kaW5nLmRldGFjaENoYW5nZShvLmZDaGFuZ2VIYW5kbGVyKTtvLmJpbmRpbmcuZGV0YWNoRXZlbnRzKG8uZXZlbnRzKX1kZWxldGUgdGhpcy5tQm91bmRPYmplY3RzW21dO2RlbGV0ZSB0aGlzLm9CaW5kaW5nQ29udGV4dHNbbV07dGhpcy51cGRhdGVCaW5kaW5nQ29udGV4dChmYWxzZSxmYWxzZSxtKX1yZXR1cm4gdGhpc307ZC5wcm90b3R5cGUuYmluZFByb3BlcnR5PWZ1bmN0aW9uKG4sbyl7dmFyIHAsZixtLHMsRix0LFMsYT10cnVlLGU9dGhpcyxnPXRoaXMuZ2V0TWV0YWRhdGEoKSxQPWcuZ2V0QWxsUHJvcGVydGllcygpW25dLGs9Zy5nZXRKU09OS2V5cygpW25dO2lmKCFQJiYhKGsmJmsuYWx0VHlwZXMpKXt0aHJvdyBuZXcgRXJyb3IoIlByb3BlcnR5IFwiIituKyJcIiBkb2VzIG5vdCBleGlzdCBpbiAiK3RoaXMpfWlmKHR5cGVvZiBvPT0ic3RyaW5nIil7cD1hcmd1bWVudHNbMV07Zj1hcmd1bWVudHNbMl07bT1hcmd1bWVudHNbM107aWYodHlwZW9mIGY9PSJmdW5jdGlvbiIpe0Y9Zn1lbHNlIGlmKGYgaW5zdGFuY2VvZiBUKXt0PWZ9bz17Zm9ybWF0dGVyOkYscGFydHM6W3twYXRoOnAsdHlwZTp0LG1vZGU6bX1dfX1pZighby5wYXJ0cyl7by5wYXJ0cz1bXTtvLnBhcnRzWzBdPXtwYXRoOm8ucGF0aCx0eXBlOm8udHlwZSxmb3JtYXRPcHRpb25zOm8uZm9ybWF0T3B0aW9ucyxjb25zdHJhaW50czpvLmNvbnN0cmFpbnRzLG1vZGVsOm8ubW9kZWwsbW9kZTpvLm1vZGV9O2RlbGV0ZSBvLnBhdGg7ZGVsZXRlIG8ubW9kZTtkZWxldGUgby5tb2RlbH1xLmVhY2goby5wYXJ0cyxmdW5jdGlvbihpLGgpe2lmKHR5cGVvZiBoPT0ic3RyaW5nIil7aD17cGF0aDpofTtvLnBhcnRzW2ldPWh9Uz1oLnBhdGguaW5kZXhPZigiPiIpO2lmKFM+MCl7aC5tb2RlbD1oLnBhdGguc3Vic3RyKDAsUyk7aC5wYXRoPWgucGF0aC5zdWJzdHIoUysxKX1pZihvLmZvcm1hdHRlcnx8by5wYXJ0cy5sZW5ndGg+MSl7aC5tb2RlPXNhcC51aS5tb2RlbC5CaW5kaW5nTW9kZS5PbmVXYXl9aWYoIWUuZ2V0TW9kZWwoaC5tb2RlbCkpe2E9ZmFsc2V9fSk7aWYodGhpcy5pc0JvdW5kKG4pKXt0aGlzLnVuYmluZFByb3BlcnR5KG4sdHJ1ZSl9dGhpcy5tQmluZGluZ0luZm9zW25dPW87aWYoYSl7dGhpcy5fYmluZFByb3BlcnR5KG4sbyl9cmV0dXJuIHRoaXN9O2QucHJvdG90eXBlLl9iaW5kUHJvcGVydHk9ZnVuY3Rpb24obixvKXt2YXIgbSxzLGEsZSx0LGYscD10aGlzLmdldE1ldGFkYXRhKCkuZ2V0SlNPTktleXMoKVtuXSxnPXRoaXMsaD1bXSxqPWZ1bmN0aW9uKGkpe2cudXBkYXRlUHJvcGVydHkobil9O2E9dGhpcy5nZXRCaW5kaW5nQ29udGV4dChvLm1vZGVsKTtxLmVhY2goby5wYXJ0cyxmdW5jdGlvbihpLFApe2E9Zy5nZXRCaW5kaW5nQ29udGV4dChQLm1vZGVsKTttPWcuZ2V0TW9kZWwoUC5tb2RlbCk7dD1QLnR5cGU7aWYodHlwZW9mIHQ9PSJzdHJpbmciKXtmPXEuc2FwLmdldE9iamVjdCh0KTt0PW5ldyBmKFAuZm9ybWF0T3B0aW9ucyxQLmNvbnN0cmFpbnRzKX1lPW0uYmluZFByb3BlcnR5KFAucGF0aCxhLG8ucGFyYW1ldGVycyk7ZS5zZXRUeXBlKHQscC50eXBlKTtlLnNldEZvcm1hdHRlcihQLmZvcm1hdHRlcik7cz0hUC5tb2RlP20uZ2V0RGVmYXVsdEJpbmRpbmdNb2RlKCk6UC5tb2RlO2Uuc2V0QmluZGluZ01vZGUocyk7aC5wdXNoKGUpfSk7aWYoaC5sZW5ndGg+MXx8KG8uZm9ybWF0dGVyJiZvLmZvcm1hdHRlci50ZXh0RnJhZ21lbnRzKSl7dD1vLnR5cGU7aWYodHlwZW9mIHQ9PSJzdHJpbmciKXtmPXEuc2FwLmdldE9iamVjdCh0KTt0PW5ldyBmKG8uZm9ybWF0T3B0aW9ucyxvLmNvbnN0cmFpbnRzKX1lPW5ldyBDKGgsby51c2VSYXdWYWx1ZXMpO2Uuc2V0VHlwZSh0LHAudHlwZSk7ZS5zZXRCaW5kaW5nTW9kZShvLm1vZGUpfWVsc2V7ZT1oWzBdfWUuYXR0YWNoQ2hhbmdlKGopO2Uuc2V0Rm9ybWF0dGVyKHEucHJveHkoby5mb3JtYXR0ZXIsdGhpcykpO28uYmluZGluZz1lO28ubW9kZWxDaGFuZ2VIYW5kbGVyPWo7ZS5hdHRhY2hFdmVudHMoby5ldmVudHMpO2UuaW5pdGlhbGl6ZSgpO2lmKGUuZ2V0QmluZGluZ01vZGUoKT09PXNhcC51aS5tb2RlbC5CaW5kaW5nTW9kZS5PbmVUaW1lKXtlLmRldGFjaENoYW5nZShqKTtlLmRldGFjaEV2ZW50cyhvLmV2ZW50cyl9fTtkLnByb3RvdHlwZS51bmJpbmRQcm9wZXJ0eT1mdW5jdGlvbihuLHMpe3ZhciBvPXRoaXMubUJpbmRpbmdJbmZvc1tuXSxwPXRoaXMuZ2V0TWV0YWRhdGEoKS5nZXRKU09OS2V5cygpW25dO2lmKG8pe2lmKG8uYmluZGluZyl7by5iaW5kaW5nLmRldGFjaENoYW5nZShvLm1vZGVsQ2hhbmdlSGFuZGxlcik7by5iaW5kaW5nLmRldGFjaEV2ZW50cyhvLmV2ZW50cyl9ZGVsZXRlIHRoaXMubUJpbmRpbmdJbmZvc1tuXTtpZighcyl7dGhpc1twLl9zTXV0YXRvcl0obnVsbCl9fXJldHVybiB0aGlzfTtkLnByb3RvdHlwZS51cGRhdGVQcm9wZXJ0eT1mdW5jdGlvbihuKXt2YXIgbz10aGlzLm1CaW5kaW5nSW5mb3Nbbl0sYT1vLmJpbmRpbmcscD10aGlzLmdldE1ldGFkYXRhKCkuZ2V0SlNPTktleXMoKVtuXTtpZihvLnNraXBQcm9wZXJ0eVVwZGF0ZSlyZXR1cm47dHJ5e3ZhciB2PWEuZ2V0RXh0ZXJuYWxWYWx1ZSgpO28uc2tpcE1vZGVsVXBkYXRlPXRydWU7dGhpc1twLl9zTXV0YXRvcl0odik7by5za2lwTW9kZWxVcGRhdGU9ZmFsc2V9Y2F0Y2goZSl7by5za2lwTW9kZWxVcGRhdGU9ZmFsc2U7aWYoZSBpbnN0YW5jZW9mIHNhcC51aS5tb2RlbC5Gb3JtYXRFeGNlcHRpb24pe3RoaXMuZmlyZUZvcm1hdEVycm9yKHtlbGVtZW50OnRoaXMscHJvcGVydHk6bix0eXBlOmEuZ2V0VHlwZSgpLG5ld1ZhbHVlOmEuZ2V0VmFsdWUoKSxvbGRWYWx1ZTp0aGlzLmdldFByb3BlcnR5KG4pLGV4Y2VwdGlvbjplfSxmYWxzZSx0cnVlKX1lbHNle3Rocm93IGV9fX07ZC5wcm90b3R5cGUudXBkYXRlTW9kZWxQcm9wZXJ0eT1mdW5jdGlvbihuLHYsbyl7aWYodGhpcy5pc0JvdW5kKG4pKXt2YXIgYT10aGlzLm1CaW5kaW5nSW5mb3Nbbl0sZT1hLmJpbmRpbmc7aWYoYS5za2lwTW9kZWxVcGRhdGUpcmV0dXJuO2lmKGUmJmUuZ2V0QmluZGluZ01vZGUoKT09c2FwLnVpLm1vZGVsLkJpbmRpbmdNb2RlLlR3b1dheSl7dHJ5e2Euc2tpcFByb3BlcnR5VXBkYXRlPXRydWU7ZS5zZXRFeHRlcm5hbFZhbHVlKHYpO2Euc2tpcFByb3BlcnR5VXBkYXRlPWZhbHNlO3ZhciBmPWUuZ2V0RXh0ZXJuYWxWYWx1ZSgpO2lmKHYhPWYpe3RoaXMudXBkYXRlUHJvcGVydHkobil9aWYoZS5nZXRUeXBlKCkpe3RoaXMuZmlyZVZhbGlkYXRpb25TdWNjZXNzKHtlbGVtZW50OnRoaXMscHJvcGVydHk6bix0eXBlOmUuZ2V0VHlwZSgpLG5ld1ZhbHVlOnYsb2xkVmFsdWU6b30sZmFsc2UsdHJ1ZSl9fWNhdGNoKGcpe2Euc2tpcFByb3BlcnR5VXBkYXRlPWZhbHNlO2lmKGcgaW5zdGFuY2VvZiBzYXAudWkubW9kZWwuUGFyc2VFeGNlcHRpb24pe3RoaXMuZmlyZVBhcnNlRXJyb3Ioe2VsZW1lbnQ6dGhpcyxwcm9wZXJ0eTpuLHR5cGU6ZS5nZXRUeXBlKCksbmV3VmFsdWU6dixvbGRWYWx1ZTpvLGV4Y2VwdGlvbjpnfSxmYWxzZSx0cnVlKX1lbHNlIGlmKGcgaW5zdGFuY2VvZiBzYXAudWkubW9kZWwuVmFsaWRhdGVFeGNlcHRpb24pe3RoaXMuZmlyZVZhbGlkYXRpb25FcnJvcih7ZWxlbWVudDp0aGlzLHByb3BlcnR5Om4sdHlwZTplLmdldFR5cGUoKSxuZXdWYWx1ZTp2LG9sZFZhbHVlOm8sZXhjZXB0aW9uOmd9LGZhbHNlLHRydWUpfWVsc2V7dGhyb3cgZ319fX19O2QucHJvdG90eXBlLmJpbmRBZ2dyZWdhdGlvbj1mdW5jdGlvbihuLG8pe3ZhciBwLHQscyxmLG09dGhpcy5nZXRNZXRhZGF0YSgpLGE9bS5nZXRBbGxBZ2dyZWdhdGlvbnMoKVtuXTtpZighYSl7dGhyb3cgbmV3IEVycm9yKCJBZ2dyZWdhdGlvbiBcIiIrbisiXCIgZG9lcyBub3QgZXhpc3QgaW4gIit0aGlzKX1pZih0eXBlb2Ygbz09InN0cmluZyIpe3A9YXJndW1lbnRzWzFdO3Q9YXJndW1lbnRzWzJdO3M9YXJndW1lbnRzWzNdO2Y9YXJndW1lbnRzWzRdO289e3BhdGg6cCxzb3J0ZXI6cyxmaWx0ZXJzOmZ9O2lmKHQgaW5zdGFuY2VvZiBkKXtvLnRlbXBsYXRlPXR9ZWxzZSBpZih0eXBlb2YgdD09PSJmdW5jdGlvbiIpe28uZmFjdG9yeT10fX1pZih0aGlzLmlzQm91bmQobikpe3RoaXMudW5iaW5kQWdncmVnYXRpb24obix0cnVlKX1pZighKG8udGVtcGxhdGV8fG8uZmFjdG9yeSkpe2lmKGEuX2RvZXNOb3RSZXF1aXJlRmFjdG9yeSl7by5mYWN0b3J5PWZ1bmN0aW9uKCl7dGhyb3cgbmV3IEVycm9yKCJkdW1teSBmYWN0b3J5IGNhbGxlZCB1bmV4cGVjdGVkbHkgIil9fWVsc2V7dGhyb3cgbmV3IEVycm9yKCJNaXNzaW5nIHRlbXBsYXRlIG9yIGZhY3RvcnkgZnVuY3Rpb24gZm9yIGFnZ3JlZ2F0aW9uICIrbisiIG9mICIrdGhpcysiICEiKX19aWYoby50ZW1wbGF0ZSl7aWYoby50ZW1wbGF0ZVNoYXJlYWJsZT09PXVuZGVmaW5lZCl7by50ZW1wbGF0ZVNoYXJlYWJsZT10cnVlfW8uZmFjdG9yeT1mdW5jdGlvbihpKXtyZXR1cm4gby50ZW1wbGF0ZS5jbG9uZShpKX19dmFyIFM9by5wYXRoLmluZGV4T2YoIj4iKTtpZihTPjApe28ubW9kZWw9by5wYXRoLnN1YnN0cigwLFMpO28ucGF0aD1vLnBhdGguc3Vic3RyKFMrMSl9dGhpcy5tQmluZGluZ0luZm9zW25dPW87aWYodGhpcy5nZXRNb2RlbChvLm1vZGVsKSl7dGhpcy5fYmluZEFnZ3JlZ2F0aW9uKG4sbyl9cmV0dXJuIHRoaXN9O2QucHJvdG90eXBlLl9iaW5kQWdncmVnYXRpb249ZnVuY3Rpb24obixvKXt2YXIgdD10aGlzLGEsbT1mdW5jdGlvbihnKXt2YXIgdT0idXBkYXRlIituLnN1YnN0cigwLDEpLnRvVXBwZXJDYXNlKCkrbi5zdWJzdHIoMSk7aWYodFt1XSl7dmFyIHM9ZyYmZy5nZXRQYXJhbWV0ZXIoInJlYXNvbiIpO2lmKHMpe3RbdV0ocyl9ZWxzZXt0W3VdKCl9fWVsc2V7dC51cGRhdGVBZ2dyZWdhdGlvbihuKX19LGY9ZnVuY3Rpb24oZyl7dmFyIHI9InJlZnJlc2giK24uc3Vic3RyKDAsMSkudG9VcHBlckNhc2UoKStuLnN1YnN0cigxKTtpZih0W3JdKXt0W3JdKGcuZ2V0UGFyYW1ldGVyKCJyZWFzb24iKSl9ZWxzZXttKGcpfX07dmFyIGU9dGhpcy5nZXRNb2RlbChvLm1vZGVsKTtpZih0aGlzLmlzVHJlZUJpbmRpbmcobikpe2E9ZS5iaW5kVHJlZShvLnBhdGgsdGhpcy5nZXRCaW5kaW5nQ29udGV4dChvLm1vZGVsKSxvLmZpbHRlcnMsby5wYXJhbWV0ZXJzKX1lbHNle2E9ZS5iaW5kTGlzdChvLnBhdGgsdGhpcy5nZXRCaW5kaW5nQ29udGV4dChvLm1vZGVsKSxvLnNvcnRlcixvLmZpbHRlcnMsby5wYXJhbWV0ZXJzKX1pZih0aGlzLmJVc2VFeHRlbmRlZENoYW5nZURldGVjdGlvbj09PXRydWUpe2EuZW5hYmxlRXh0ZW5kZWRDaGFuZ2VEZXRlY3Rpb24oKX1vLmJpbmRpbmc9YTtvLm1vZGVsQ2hhbmdlSGFuZGxlcj1tO28ubW9kZWxSZWZyZXNoSGFuZGxlcj1mO2EuYXR0YWNoQ2hhbmdlKG0pO2EuYXR0YWNoUmVmcmVzaChmKTthLmF0dGFjaEV2ZW50cyhvLmV2ZW50cyk7YS5pbml0aWFsaXplKCl9O2QucHJvdG90eXBlLnVuYmluZEFnZ3JlZ2F0aW9uPWZ1bmN0aW9uKG4scyl7dmFyIG89dGhpcy5tQmluZGluZ0luZm9zW25dLGE9dGhpcy5nZXRNZXRhZGF0YSgpLmdldEpTT05LZXlzKClbbl07aWYobyl7aWYoby5iaW5kaW5nKXtvLmJpbmRpbmcuZGV0YWNoQ2hhbmdlKG8ubW9kZWxDaGFuZ2VIYW5kbGVyKTtvLmJpbmRpbmcuZGV0YWNoUmVmcmVzaChvLm1vZGVsUmVmcmVzaEhhbmRsZXIpO28uYmluZGluZy5kZXRhY2hFdmVudHMoby5ldmVudHMpfWlmKCFvLnRlbXBsYXRlU2hhcmVhYmxlJiZvLnRlbXBsYXRlJiZvLnRlbXBsYXRlLmRlc3Ryb3kpe28udGVtcGxhdGUuZGVzdHJveSgpfWRlbGV0ZSB0aGlzLm1CaW5kaW5nSW5mb3Nbbl07aWYoIXMpe3RoaXNbYS5fc0Rlc3RydWN0b3JdKCl9fXJldHVybiB0aGlzfTtkLnByb3RvdHlwZS51cGRhdGVBZ2dyZWdhdGlvbj1mdW5jdGlvbihuKXt2YXIgbz10aGlzLm1CaW5kaW5nSW5mb3Nbbl0sYT1vLmJpbmRpbmcsZj1vLmZhY3RvcnksQT10aGlzLmdldE1ldGFkYXRhKCkuZ2V0SlNPTktleXMoKVtuXSxlLE49bnVsbCxnPW51bGwsRz1udWxsLHM9bnVsbCx0PXRoaXM7dGhpc1tBLl9zRGVzdHJ1Y3Rvcl0oKTtpZih0aGlzLmlzVHJlZUJpbmRpbmcobikpe3ZhciBpPTAsdT1mdW5jdGlvbihoLGYsYSxwKXtxLmVhY2goaCxmdW5jdGlvbihJLGope3ZhciBrPXQuZ2V0SWQoKSsiLSIraSsrO2U9ZihrLGopO2Uuc2V0QmluZGluZ0NvbnRleHQoaixvLm1vZGVsKTtwW0EuX3NNdXRhdG9yXShlKTt1KGEuZ2V0Tm9kZUNvbnRleHRzKGopLGYsYSxlKX0pfTt1KGEuZ2V0Um9vdENvbnRleHRzKCksZixhLHRoaXMpfWVsc2V7Zz1BLl9zTXV0YXRvcisiR3JvdXAiO0c9YS5pc0dyb3VwZWQoKSYmdGhpc1tnXTtxLmVhY2goYS5nZXRDb250ZXh0cyhvLnN0YXJ0SW5kZXgsby5sZW5ndGgpLGZ1bmN0aW9uKEksaCl7aWYoRyYmYS5hU29ydGVycy5sZW5ndGg+MCl7Tj1hLmFTb3J0ZXJzWzBdLmZuR3JvdXAoaCk7aWYodHlwZW9mIE49PSJzdHJpbmciKXtOPXtrZXk6Tn19aWYoTi5rZXkhPT1zKXt2YXIgajtpZihvLmdyb3VwSGVhZGVyRmFjdG9yeSl7aj1vLmdyb3VwSGVhZGVyRmFjdG9yeShOKX10W2ddKE4saik7cz1OLmtleX19dmFyIGs9dC5nZXRJZCgpKyItIitJO2U9ZihrLGgpO2Uuc2V0QmluZGluZ0NvbnRleHQoaCxvLm1vZGVsKTt0W0EuX3NNdXRhdG9yXShlKX0pfX07ZC5wcm90b3R5cGUucmVmcmVzaEFnZ3JlZ2F0aW9uPWZ1bmN0aW9uKG4pe3ZhciBvPXRoaXMubUJpbmRpbmdJbmZvc1tuXSxhPW8uYmluZGluZzthLmdldENvbnRleHRzKG8uc3RhcnRJbmRleCxvLmxlbmd0aCl9O2QucHJvdG90eXBlLmlzVHJlZUJpbmRpbmc9ZnVuY3Rpb24obil7cmV0dXJuIGZhbHNlfTtkLnByb3RvdHlwZS51cGRhdGVCaW5kaW5ncz1mdW5jdGlvbih1LG0pe3ZhciB0PXRoaXM7ZnVuY3Rpb24gYShvKXt2YXIgcD1vLnBhcnRzLGk7aWYocCYmcC5sZW5ndGg+MSl7Zm9yKGk9MDtpPHAubGVuZ3RoO2krKyl7aWYoKHV8fHBbaV0ubW9kZWw9PW0pJiYhby5iaW5kaW5nLmFCaW5kaW5nc1tpXS51cGRhdGVSZXF1aXJlZCh0LmdldE1vZGVsKHBbaV0ubW9kZWwpKSl7cmV0dXJuIHRydWV9fX1lbHNlIGlmKG8uZmFjdG9yeSl7cmV0dXJuKHV8fG8ubW9kZWw9PW0pJiYhby5iaW5kaW5nLnVwZGF0ZVJlcXVpcmVkKHQuZ2V0TW9kZWwoby5tb2RlbCkpfWVsc2V7cmV0dXJuKHV8fHBbMF0ubW9kZWw9PW0pJiYhby5iaW5kaW5nLnVwZGF0ZVJlcXVpcmVkKHQuZ2V0TW9kZWwocFswXS5tb2RlbCkpfXJldHVybiBmYWxzZX1mdW5jdGlvbiBlKG8pe3ZhciBwPW8ucGFydHMsaTtpZihwKXtmb3IoaT0wO2k8cC5sZW5ndGg7aSsrKXtpZighdC5nZXRNb2RlbChwW2ldLm1vZGVsKSl7cmV0dXJuIGZhbHNlfX1yZXR1cm4gdHJ1ZX1lbHNlIGlmKG8uZmFjdG9yeSl7cmV0dXJuISF0LmdldE1vZGVsKG8ubW9kZWwpfXJldHVybiBmYWxzZX1xLmVhY2godGhpcy5tQmluZGluZ0luZm9zLGZ1bmN0aW9uKG4sbyl7aWYoby5iaW5kaW5nJiZhKG8pKXtvLmJpbmRpbmcuZGV0YWNoQ2hhbmdlKG8ubW9kZWxDaGFuZ2VIYW5kbGVyKTtpZihvLm1vZGVsUmVmcmVzaEhhbmRsZXIpe28uYmluZGluZy5kZXRhY2hSZWZyZXNoKG8ubW9kZWxSZWZyZXNoSGFuZGxlcil9by5iaW5kaW5nLmRldGFjaEV2ZW50cyhvLmV2ZW50cyk7ZGVsZXRlIG8uYmluZGluZ31pZighby5iaW5kaW5nJiZlKG8pKXtpZihvLmZhY3Rvcnkpe3QuX2JpbmRBZ2dyZWdhdGlvbihuLG8pfWVsc2V7dC5fYmluZFByb3BlcnR5KG4sbyl9fX0pfTtkLnByb3RvdHlwZS5pc0JvdW5kPWZ1bmN0aW9uKG4pe3JldHVybihuIGluIHRoaXMubUJpbmRpbmdJbmZvcyl9O2QucHJvdG90eXBlLmdldE9iamVjdEJpbmRpbmc9ZnVuY3Rpb24obSl7cmV0dXJuIHRoaXMubUJvdW5kT2JqZWN0c1ttXSYmdGhpcy5tQm91bmRPYmplY3RzW21dLmJpbmRpbmd9O2QucHJvdG90eXBlLmdldEV2ZW50aW5nUGFyZW50PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub1BhcmVudH07ZC5wcm90b3R5cGUuZ2V0QmluZGluZz1mdW5jdGlvbihuKXtyZXR1cm4gdGhpcy5tQmluZGluZ0luZm9zW25dJiZ0aGlzLm1CaW5kaW5nSW5mb3Nbbl0uYmluZGluZ307ZC5wcm90b3R5cGUuZ2V0QmluZGluZ1BhdGg9ZnVuY3Rpb24obil7dmFyIGk9dGhpcy5tQmluZGluZ0luZm9zW25dO3JldHVybiBpJiYoaS5wYXRofHwoaS5wYXJ0cyYmaS5wYXJ0c1swXSYmaS5wYXJ0c1swXS5wYXRoKSl9O2QucHJvdG90eXBlLnNldEJpbmRpbmdDb250ZXh0PWZ1bmN0aW9uKG8sbSl7dmFyIE89dGhpcy5vQmluZGluZ0NvbnRleHRzW21dO2lmKE8hPT1vKXt0aGlzLm9CaW5kaW5nQ29udGV4dHNbbV09bzt0aGlzLnVwZGF0ZUJpbmRpbmdDb250ZXh0KHRydWUsdHJ1ZSxtKTt0aGlzLnByb3BhZ2F0ZVByb3BlcnRpZXMobSl9cmV0dXJuIHRoaXN9O2QucHJvdG90eXBlLnVwZGF0ZUJpbmRpbmdDb250ZXh0PWZ1bmN0aW9uKHMsUyxtLHUpe3ZhciBvLGE9e30scCxlLHQ9dGhpcztpZih1KXtmb3IobSBpbiB0aGlzLm9Nb2RlbHMpe2lmKHRoaXMub01vZGVscy5oYXNPd25Qcm9wZXJ0eShtKSl7YVttXT1tfX1mb3IobSBpbiB0aGlzLm9Qcm9wYWdhdGVkUHJvcGVydGllcy5vTW9kZWxzKXtpZih0aGlzLm9Qcm9wYWdhdGVkUHJvcGVydGllcy5vTW9kZWxzLmhhc093blByb3BlcnR5KG0pKXthW21dPW19fX1lbHNle2FbbV09bX1mb3IobSBpbiBhKXtpZihhLmhhc093blByb3BlcnR5KG0pKXttPW09PT0idW5kZWZpbmVkIj91bmRlZmluZWQ6bTtvPXRoaXMuZ2V0TW9kZWwobSk7ZT10aGlzLm1Cb3VuZE9iamVjdHNbbV07aWYobyYmZSYmZS5zQmluZGluZ1BhdGgmJiFzKXtpZighZS5iaW5kaW5nKXt0aGlzLl9iaW5kT2JqZWN0KG0sZSl9ZWxzZXtwPW51bGw7aWYodGhpcy5vUGFyZW50JiZvPT10aGlzLm9QYXJlbnQuZ2V0TW9kZWwobSkpe3A9dGhpcy5vUGFyZW50LmdldEJpbmRpbmdDb250ZXh0KG0pfWlmKHAhPT1lLmJpbmRpbmcuZ2V0Q29udGV4dCgpKXtlLmJpbmRpbmcuc2V0Q29udGV4dChwKX19Y29udGludWV9cS5lYWNoKHRoaXMubUJpbmRpbmdJbmZvcyxmdW5jdGlvbihuLGcpe3ZhciBoPWcuYmluZGluZzt2YXIgUD1nLnBhcnRzLGk7aWYoIWgpe3JldHVybn1pZihQJiZQLmxlbmd0aD4xKXtmb3IoaT0wO2k8UC5sZW5ndGg7aSsrKXtpZihQW2ldLm1vZGVsPT1tKXtoLmFCaW5kaW5nc1tpXS5zZXRDb250ZXh0KHQuZ2V0QmluZGluZ0NvbnRleHQoUFtpXS5tb2RlbCkpfX19ZWxzZSBpZihnLmZhY3Rvcnkpe2lmKGcubW9kZWw9PW0pe2guc2V0Q29udGV4dCh0LmdldEJpbmRpbmdDb250ZXh0KGcubW9kZWwpKX19ZWxzZXtpZihQWzBdLm1vZGVsPT1tKXtoLnNldENvbnRleHQodC5nZXRCaW5kaW5nQ29udGV4dChQWzBdLm1vZGVsKSl9fX0pO2lmKCFTKXt2YXIgZj10aGlzLmdldEJpbmRpbmdDb250ZXh0KG0pO3EuZWFjaCh0aGlzLm1BZ2dyZWdhdGlvbnMsZnVuY3Rpb24obixBKXtpZihBIGluc3RhbmNlb2YgZCl7QS5vUHJvcGFnYXRlZFByb3BlcnRpZXMub0JpbmRpbmdDb250ZXh0c1ttXT1mO0EudXBkYXRlQmluZGluZ0NvbnRleHQoZmFsc2UsZmFsc2UsbSl9ZWxzZSBpZihBIGluc3RhbmNlb2YgQXJyYXkpe2Zvcih2YXIgaT0wO2k8QS5sZW5ndGg7aSsrKXtBW2ldLm9Qcm9wYWdhdGVkUHJvcGVydGllcy5vQmluZGluZ0NvbnRleHRzW21dPWY7QVtpXS51cGRhdGVCaW5kaW5nQ29udGV4dChmYWxzZSxmYWxzZSxtKX19fSl9fX19O2QucHJvdG90eXBlLmdldEJpbmRpbmdDb250ZXh0PWZ1bmN0aW9uKG0pe3ZhciBvPXRoaXMuZ2V0TW9kZWwobSk7aWYodGhpcy5vQmluZGluZ0NvbnRleHRzW21dKXtyZXR1cm4gdGhpcy5vQmluZGluZ0NvbnRleHRzW21dfWVsc2UgaWYobyYmdGhpcy5vUGFyZW50JiZ0aGlzLm9QYXJlbnQuZ2V0TW9kZWwobSkmJm8hPXRoaXMub1BhcmVudC5nZXRNb2RlbChtKSl7cmV0dXJuIHVuZGVmaW5lZH1lbHNle3JldHVybiB0aGlzLm9Qcm9wYWdhdGVkUHJvcGVydGllcy5vQmluZGluZ0NvbnRleHRzW21dfX07ZC5wcm90b3R5cGUuc2V0TW9kZWw9ZnVuY3Rpb24obSxuKXtpZighbSYmdGhpcy5vTW9kZWxzW25dKXtkZWxldGUgdGhpcy5vTW9kZWxzW25dO3RoaXMucHJvcGFnYXRlUHJvcGVydGllcyhuKTt0aGlzLnVwZGF0ZUJpbmRpbmdzKGZhbHNlLG4pfWVsc2UgaWYobSYmbSE9PXRoaXMub01vZGVsc1tuXSl7dGhpcy5vTW9kZWxzW25dPW07dGhpcy5wcm9wYWdhdGVQcm9wZXJ0aWVzKG4pO3RoaXMudXBkYXRlQmluZGluZ0NvbnRleHQoZmFsc2UsdHJ1ZSxuKTt0aGlzLnVwZGF0ZUJpbmRpbmdzKGZhbHNlLG4pfWVsc2V7fXJldHVybiB0aGlzfTtkLnByb3RvdHlwZS5wcm9wYWdhdGVQcm9wZXJ0aWVzPWZ1bmN0aW9uKG4pe3ZhciBwPXRoaXMuX2dldFByb3BlcnRpZXNUb1Byb3BhZ2F0ZSgpLHU9bj09PXRydWUsTj11P3VuZGVmaW5lZDpuLHQ9dGhpcztxLmVhY2godGhpcy5tQWdncmVnYXRpb25zLGZ1bmN0aW9uKGEsQSl7aWYoQSBpbnN0YW5jZW9mIGQpe3QuX3Byb3BhZ2F0ZVByb3BlcnRpZXMobixBLHAsdSxOKX1lbHNlIGlmKEEgaW5zdGFuY2VvZiBBcnJheSl7Zm9yKHZhciBpPTA7aTxBLmxlbmd0aDtpKyspe2lmKEFbaV1pbnN0YW5jZW9mIGQpe3QuX3Byb3BhZ2F0ZVByb3BlcnRpZXMobixBW2ldLHAsdSxOKX19fX0pfTtkLnByb3RvdHlwZS5fcHJvcGFnYXRlUHJvcGVydGllcz1mdW5jdGlvbihuLG8scCx1LE4pe2lmKCFwKXtwPXRoaXMuX2dldFByb3BlcnRpZXNUb1Byb3BhZ2F0ZSgpLHU9bj09PXRydWUsTj11P3VuZGVmaW5lZDpufW8ub1Byb3BhZ2F0ZWRQcm9wZXJ0aWVzPXA7by51cGRhdGVCaW5kaW5ncyh1LE4pO28udXBkYXRlQmluZGluZ0NvbnRleHQoZmFsc2UsdHJ1ZSxOLHUpO28ucHJvcGFnYXRlUHJvcGVydGllcyhuKX07ZC5wcm90b3R5cGUuX2dldFByb3BlcnRpZXNUb1Byb3BhZ2F0ZT1mdW5jdGlvbigpe3ZhciBuPXEuaXNFbXB0eU9iamVjdCh0aGlzLm9Nb2RlbHMpLE49cS5pc0VtcHR5T2JqZWN0KHRoaXMub0JpbmRpbmdDb250ZXh0cyk7ZnVuY3Rpb24gbShlLG8sYSl7cmV0dXJuIGU/bzpxLmV4dGVuZCh7fSxvLGEpfWlmKE4mJm4pe3JldHVybiB0aGlzLm9Qcm9wYWdhdGVkUHJvcGVydGllc31lbHNle3JldHVybntvTW9kZWxzOm0obix0aGlzLm9Qcm9wYWdhdGVkUHJvcGVydGllcy5vTW9kZWxzLHRoaXMub01vZGVscyksb0JpbmRpbmdDb250ZXh0czptKE4sdGhpcy5vUHJvcGFnYXRlZFByb3BlcnRpZXMub0JpbmRpbmdDb250ZXh0cyx0aGlzLm9CaW5kaW5nQ29udGV4dHMpfX19O2QucHJvdG90eXBlLmdldE1vZGVsPWZ1bmN0aW9uKG4pe3JldHVybiB0aGlzLm9Nb2RlbHNbbl18fHRoaXMub1Byb3BhZ2F0ZWRQcm9wZXJ0aWVzLm9Nb2RlbHNbbl19O2QucHJvdG90eXBlLmhhc01vZGVsPWZ1bmN0aW9uKCl7cmV0dXJuIShxLmlzRW1wdHlPYmplY3QodGhpcy5vTW9kZWxzKSYmcS5pc0VtcHR5T2JqZWN0KHRoaXMub1Byb3BhZ2F0ZWRQcm9wZXJ0aWVzLm9Nb2RlbHMpKX07ZC5wcm90b3R5cGUuY2xvbmU9ZnVuY3Rpb24oSSxsLG8pe3ZhciB0PXRoaXMsYT10cnVlLGU9dHJ1ZTtpZihvKXthPSEhby5jbG9uZUNoaWxkcmVuO2U9ISFvLmNsb25lQmluZGluZ3N9aWYoIUkpe0k9TS51aWQoImNsb25lIil8fHEuc2FwLnVpZCgpfWlmKCFsJiZhKXtsPXEubWFwKHRoaXMuZmluZEFnZ3JlZ2F0ZWRPYmplY3RzKHRydWUpLGZ1bmN0aW9uKE8pe3JldHVybiBPLmdldElkKCl9KX12YXIgbT10aGlzLmdldE1ldGFkYXRhKCksZj1tLl9vQ2xhc3Mscz10aGlzLmdldElkKCkrIi0iK0ksUz17fSxwPXRoaXMubVByb3BlcnRpZXMsayxnLGg9ZC5iaW5kaW5nUGFyc2VyLmVzY2FwZTtmb3IoayBpbiBwKXtpZihwLmhhc093blByb3BlcnR5KGspJiYhKHRoaXMuaXNCb3VuZChrKSYmZSkpe2lmKHR5cGVvZiBwW2tdPT09InN0cmluZyIpe1Nba109aChwW2tdKX1lbHNle1Nba109cFtrXX19fVNbIm1vZGVscyJdPXRoaXMub01vZGVscztTWyJiaW5kaW5nQ29udGV4dHMiXT10aGlzLm9CaW5kaW5nQ29udGV4dHM7aWYoYSl7cS5lYWNoKHRoaXMubUFnZ3JlZ2F0aW9ucyxmdW5jdGlvbihuLEEpe2lmKG0uaGFzQWdncmVnYXRpb24obikmJiEodC5pc0JvdW5kKG4pJiZlKSl7aWYoQSBpbnN0YW5jZW9mIGQpe1Nbbl09QS5jbG9uZShJLGwpfWVsc2UgaWYocS5pc0FycmF5KEEpKXtTW25dPVtdO2Zvcih2YXIgaT0wO2k8QS5sZW5ndGg7aSsrKXtTW25dLnB1c2goQVtpXS5jbG9uZShJLGwpKX19ZWxzZXtTW25dPUF9fX0pO3EuZWFjaCh0aGlzLm1Bc3NvY2lhdGlvbnMsZnVuY3Rpb24obixBKXtpZihxLmlzQXJyYXkoQSkpe0E9QS5zbGljZSgwKTtmb3IodmFyIGk9MDtpPEEubGVuZ3RoO2krKyl7aWYocS5pbkFycmF5KEFbaV0sbCk+PTApe0FbaV0rPSItIitJfX19ZWxzZSBpZihxLmluQXJyYXkoQSxsKT49MCl7QSs9Ii0iK0l9U1tuXT1BfSl9Zz1uZXcgZihzLFMpO3EuZWFjaCh0aGlzLm1Cb3VuZE9iamVjdHMsZnVuY3Rpb24obixpKXtnLm1Cb3VuZE9iamVjdHNbbl09cS5leHRlbmQoe30saSl9KTtxLmVhY2godGhpcy5tRXZlbnRSZWdpc3RyeSxmdW5jdGlvbihuLEwpe2cubUV2ZW50UmVnaXN0cnlbbl09TC5zbGljZSgpfSk7aWYoZSl7cS5lYWNoKHRoaXMubUJpbmRpbmdJbmZvcyxmdW5jdGlvbihuLGkpe3ZhciBqPXEuZXh0ZW5kKHt9LGkpO2lmKCFpLnRlbXBsYXRlU2hhcmVhYmxlJiZpLnRlbXBsYXRlJiZpLnRlbXBsYXRlLmNsb25lKXtqLnRlbXBsYXRlPWkudGVtcGxhdGUuY2xvbmUoSSxsKTtkZWxldGUgai5mYWN0b3J5fWRlbGV0ZSBqLmJpbmRpbmc7aWYoaS5mYWN0b3J5fHxpLnRlbXBsYXRlKXtnLmJpbmRBZ2dyZWdhdGlvbihuLGopfWVsc2V7Zy5iaW5kUHJvcGVydHkobixqKX19KX1yZXR1cm4gZ307ZC5faGFuZGxlTG9jYWxpemF0aW9uQ2hhbmdlPWZ1bmN0aW9uKHApe3ZhciBpO2lmKHA9PT0xKXtxLmVhY2godGhpcy5vTW9kZWxzLGZ1bmN0aW9uKG4sbSl7aWYobSYmbS5faGFuZGxlTG9jYWxpemF0aW9uQ2hhbmdlKXttLl9oYW5kbGVMb2NhbGl6YXRpb25DaGFuZ2UoKX19KX1lbHNlIGlmKHA9PT0yKXtxLmVhY2godGhpcy5tQmluZGluZ0luZm9zLGZ1bmN0aW9uKG4sbyl7dmFyIFA9by5wYXJ0cztpZihQKXtmb3IoaT0wO2k8UC5sZW5ndGg7aSsrKXtpZihvLnR5cGUmJm8udHlwZS5faGFuZGxlTG9jYWxpemF0aW9uQ2hhbmdlKXtvLnR5cGUuX2hhbmRsZUxvY2FsaXphdGlvbkNoYW5nZSgpfX1pZihvLm1vZGVsQ2hhbmdlSGFuZGxlcil7by5tb2RlbENoYW5nZUhhbmRsZXIoKX19fSl9fTtkLl9tYXBBZ2dyZWdhdGlvbj1mdW5jdGlvbihwLG8sbil7dmFyIGs9cC5nZXRNZXRhZGF0YSgpLmdldEpTT05LZXlzKCk7dmFyIE89a1tvXTt2YXIgTj1rW25dO2lmKCFPfHwhTnx8Ty5faUtpbmQhPTJ8fE4uX2lLaW5kIT0yKXtyZXR1cm59dmFyIGY9eyJpbnNlcnQiOnRydWUsImFkZCI6dHJ1ZSwicmVtb3ZlIjp0cnVlLCJyZW1vdmVBbGwiOmZhbHNlLCJpbmRleE9mIjp0cnVlLCJkZXN0cm95IjpmYWxzZSwiZ2V0IjpmYWxzZX07ZnVuY3Rpb24gbShQLGcpe3JldHVybiBQK2cuc3Vic3RyaW5nKDAsMSkudG9VcHBlckNhc2UoKStnLnN1YnN0cmluZygxKX1mdW5jdGlvbiBhKEYpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiB0aGlzW0ZdLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19Zm9yKHZhciBQIGluIGYpe3ZhciBzPW0oUCxmW1BdP08uc2luZ3VsYXJOYW1lOk8uX3NOYW1lKTt2YXIgZT1tKFAsZltQXT9OLnNpbmd1bGFyTmFtZTpOLl9zTmFtZSk7cFtzXT1hKGUpfX07ZC5wcm90b3R5cGUuZmluZEFnZ3JlZ2F0ZWRPYmplY3RzPWZ1bmN0aW9uKHIpe3ZhciBBPVtdO2Z1bmN0aW9uIGYobyl7Zm9yKHZhciBuIGluIG8ubUFnZ3JlZ2F0aW9ucyl7dmFyIGE9by5tQWdncmVnYXRpb25zW25dO2lmKHEuaXNBcnJheShhKSl7Zm9yKHZhciBpPTA7aTxhLmxlbmd0aDtpKyspe0EucHVzaChhW2ldKTtpZihyKXtmKGFbaV0pfX19ZWxzZSBpZihhIGluc3RhbmNlb2YgZCl7QS5wdXNoKGEpO2lmKHIpe2YoYSl9fX19Zih0aGlzKTtyZXR1cm4gQX07cmV0dXJuIGR9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS5GcmFnbWVudCcpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLkZyYWdtZW50Jyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvRnJhZ21lbnQiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvYmFzZS9NYW5hZ2VkT2JqZWN0JywnLi9EZWNsYXJhdGl2ZVN1cHBvcnQnLCcuL1hNTFRlbXBsYXRlUHJvY2Vzc29yJ10sZnVuY3Rpb24ocSxNLEQsWCl7InVzZSBzdHJpY3QiO3ZhciByPXt9LHQ9e307dmFyIEY9TS5leHRlbmQoInNhcC51aS5jb3JlLkZyYWdtZW50Iix7bWV0YWRhdGE6e3Byb3BlcnRpZXM6e3R5cGU6InN0cmluZyJ9fSxjb25zdHJ1Y3RvcjpmdW5jdGlvbihpLHMpe00uYXBwbHkodGhpcyxhcmd1bWVudHMpO2lmKHRoaXMuX2FDb250ZW50JiZ0aGlzLl9hQ29udGVudC5sZW5ndGg9PTEpe3JldHVybiB0aGlzLl9hQ29udGVudFswXX1lbHNle3JldHVybiB0aGlzLl9hQ29udGVudH19fSk7Ri5yZWdpc3RlclR5cGU9ZnVuY3Rpb24oVCxmKXtpZighdHlwZW9mKFQpPT09InN0cmluZyIpe3Euc2FwLmxvZy5lcnJvcigiSWdub3Jpbmcgbm9uLXN0cmluZyBGcmFnbWVudCB0eXBlOiAiK1QpO3JldHVybn1pZih0W1RdKXtxLnNhcC5sb2cud2FybmluZygic2FwLnVpLmNvcmUuRnJhZ21lbnQucmVnaXN0ZXJUeXBlKCk6IEZyYWdtZW50IHR5cGUgJyIrVCsiJyBpcyBhbHJlYWR5IGRlZmluZWQuIE92ZXJyaWRpbmcgdGhpcyB0eXBlIG5vdyEiKX10W1RdPWZ9O0YucHJvdG90eXBlLl9pbml0Q29tcG9zaXRlU3VwcG9ydD1mdW5jdGlvbihzKXtpZighcyl7dGhyb3cgbmV3IEVycm9yKCJTZXR0aW5ncyBtdXN0IGJlIHNldCIpfWlmKCEocy5mcmFnbWVudE5hbWV8fHMuZnJhZ21lbnRDb250ZW50KSl7dGhyb3cgbmV3IEVycm9yKCJQbGVhc2UgcHJvdmlkZSBhIGZyYWdtZW50IG5hbWUiKX1pZihzLm9Db250cm9sbGVyKXt0aGlzLm9Db250cm9sbGVyPXMub0NvbnRyb2xsZXJ9dGhpcy5fc0V4cGxpY2l0SWQ9cy5zSWR8fHMuaWQ7dGhpcy5fc0ZyYWdtZW50TmFtZT1zLmZyYWdtZW50TmFtZTt2YXIgZj10W3MudHlwZV07aWYoZil7Zi5pbml0LmFwcGx5KHRoaXMsW3NdKX1lbHNle3Rocm93IG5ldyBFcnJvcigiTm8gdHlwZSBmb3IgdGhlIGZyYWdtZW50IGhhcyBiZWVuIHNwZWNpZmllZDogIitzLnR5cGUpfX07Ri5wcm90b3R5cGUuZ2V0Q29udHJvbGxlcj1mdW5jdGlvbigpe3JldHVybiB0aGlzLm9Db250cm9sbGVyfTtGLmJ5SWQ9ZnVuY3Rpb24oZixpKXtpZighKHR5cGVvZihmKT09PSJzdHJpbmciJiZ0eXBlb2YoaSk9PT0ic3RyaW5nIikpe3Euc2FwLmxvZy5lcnJvcigic2FwLnVpLmNvcmUuRnJhZ21lbnQuYnlJZDogdHdvIHN0cmluZ3MgbXVzdCBiZSBnaXZlbiBhcyBwYXJhbWV0ZXJzLCBidXQgYXJlOiAiK2YrIiBhbmQgIitpKTtyZXR1cm4gdW5kZWZpbmVkfXJldHVybiBzYXAudWkuZ2V0Q29yZSgpLmJ5SWQoZisiLS0iK2kpfTtGLmNyZWF0ZUlkPWZ1bmN0aW9uKGYsaSl7aWYoISh0eXBlb2YoZik9PT0ic3RyaW5nIiYmdHlwZW9mKGkpPT09InN0cmluZyIpKXtxLnNhcC5sb2cuZXJyb3IoInNhcC51aS5jb3JlLkZyYWdtZW50LmNyZWF0ZUlkOiB0d28gc3RyaW5ncyBtdXN0IGJlIGdpdmVuIGFzIHBhcmFtZXRlcnMsIGJ1dCBhcmU6ICIrZisiIGFuZCAiK2kpO3JldHVybiB1bmRlZmluZWR9cmV0dXJuIGYrIi0tIitpfTtGLnByb3RvdHlwZS5jcmVhdGVJZD1mdW5jdGlvbihpKXt2YXIgYT10aGlzLl9zRXhwbGljaXRJZD90aGlzLl9zRXhwbGljaXRJZCsiLS0iK2k6aTtpZih0aGlzLl9vQ29udGFpbmluZ1ZpZXcmJnRoaXMuX29Db250YWluaW5nVmlldyE9dGhpcyl7YT10aGlzLl9vQ29udGFpbmluZ1ZpZXcuY3JlYXRlSWQoYSl9cmV0dXJuIGF9O0YucHJvdG90eXBlLmlzU3ViVmlldz1mdW5jdGlvbigpe3JldHVybiB0cnVlfTtzYXAudWkuZnJhZ21lbnQ9ZnVuY3Rpb24obixULGMpe3ZhciBzPXt9O2lmKHR5cGVvZihuKT09PSJzdHJpbmciKXtzLmZyYWdtZW50TmFtZT1uO3Mub0NvbnRyb2xsZXI9YztzLnR5cGU9VH1lbHNlIGlmKHR5cGVvZihuKT09PSJvYmplY3QiKXtzPW47aWYoVCl7cy5vQ29udHJvbGxlcj1UfX1lbHNle3Euc2FwLmxvZy5lcnJvcigic2FwLnVpLmZyYWdtZW50KCkgbXVzdCBiZSBjYWxsZWQgd2l0aCBGcmFnbWVudCBuYW1lIG9yIGNvbmZpZyBvYmplY3QgYXMgZmlyc3QgcGFyYW1ldGVyLCBidXQgaXM6ICIrbil9cmV0dXJuIG5ldyBGKHMpfTtzYXAudWkueG1sZnJhZ21lbnQ9ZnVuY3Rpb24oaSxmLGMpe2lmKHR5cGVvZihpKT09PSJzdHJpbmciKXtpZih0eXBlb2YoZik9PT0ic3RyaW5nIil7cmV0dXJuIHNhcC51aS5mcmFnbWVudCh7ZnJhZ21lbnROYW1lOmYsc0lkOmksdHlwZToiWE1MIn0sYyl9ZWxzZXtyZXR1cm4gc2FwLnVpLmZyYWdtZW50KGksIlhNTCIsZil9fWVsc2V7aS50eXBlPSJYTUwiO3JldHVybiBzYXAudWkuZnJhZ21lbnQoaSxmKX19O3NhcC51aS5qc2ZyYWdtZW50PWZ1bmN0aW9uKG4sZil7aWYodHlwZW9mKG4pPT09InN0cmluZyImJnR5cGVvZihmKT09PSJvYmplY3QiKXtpZihmLmNyZWF0ZUNvbnRlbnQpe3Jbbl09ZjtxLnNhcC5kZWNsYXJlKHttb2ROYW1lOm4sdHlwZToiZnJhZ21lbnQifSxmYWxzZSl9ZWxzZXtyZXR1cm4gc2FwLnVpLmZyYWdtZW50KG4sIkpTIixmKX19ZWxzZSBpZih0eXBlb2Yobik9PT0ic3RyaW5nIiYmZj09PXVuZGVmaW5lZCl7cmV0dXJuIHNhcC51aS5mcmFnbWVudChuLCJKUyIpfWVsc2V7aWYodHlwZW9mKG4pPT09Im9iamVjdCIpe24udHlwZT0iSlMiO3JldHVybiBzYXAudWkuZnJhZ21lbnQobixmKX1lbHNlIGlmKGFyZ3VtZW50cyYmYXJndW1lbnRzLmxlbmd0aD49Myl7cmV0dXJuIHNhcC51aS5mcmFnbWVudCh7aWQ6bixmcmFnbWVudE5hbWU6Zix0eXBlOiJKUyJ9LGFyZ3VtZW50c1syXSl9ZWxzZXtxLnNhcC5sb2cuZXJyb3IoInNhcC51aS5qc2ZyYWdtZW50KCkgd2FzIGNhbGxlZCB3aXRoIHdyb25nIHBhcmFtZXRlciBzZXQ6ICIrbisiICsgIitmKX19fTtzYXAudWkuaHRtbGZyYWdtZW50PWZ1bmN0aW9uKGksZixjKXtpZih0eXBlb2YoaSk9PT0ic3RyaW5nIil7aWYodHlwZW9mKGYpPT09InN0cmluZyIpe3JldHVybiBzYXAudWkuZnJhZ21lbnQoe2ZyYWdtZW50TmFtZTpmLHNJZDppLHR5cGU6IkhUTUwifSxjKX1lbHNle3JldHVybiBzYXAudWkuZnJhZ21lbnQoaSwiSFRNTCIsZil9fWVsc2V7aS50eXBlPSJIVE1MIjtyZXR1cm4gc2FwLnVpLmZyYWdtZW50KGksZil9fTtGLnJlZ2lzdGVyVHlwZSgiWE1MIix7aW5pdDpmdW5jdGlvbihzKXt0aGlzLl94Q29udGVudD1zLmZyYWdtZW50Q29udGVudD8oKHR5cGVvZihzLmZyYWdtZW50Q29udGVudCk9PT0ic3RyaW5nIik/cS5wYXJzZVhNTChzLmZyYWdtZW50Q29udGVudCkuZG9jdW1lbnRFbGVtZW50OnMuZnJhZ21lbnRDb250ZW50KTpYLmxvYWRUZW1wbGF0ZShzLmZyYWdtZW50TmFtZSwiZnJhZ21lbnQiKTt0aGlzLl9vQ29udGFpbmluZ1ZpZXc9dGhpcy5fc0V4cGxpY2l0SWQ/dGhpczoocy5jb250YWluaW5nVmlld3x8dGhpcyk7aWYoKHRoaXMuX29Db250YWluaW5nVmlldz09PXRoaXMpKXt0aGlzLl9vQ29udGFpbmluZ1ZpZXcub0NvbnRyb2xsZXI9KHMuY29udGFpbmluZ1ZpZXcmJnMuY29udGFpbmluZ1ZpZXcub0NvbnRyb2xsZXIpfHxzLm9Db250cm9sbGVyfXZhciBhPXRoaXM7TS5ydW5XaXRoUHJlcHJvY2Vzc29ycyhmdW5jdGlvbigpe3ZhciB4PWEuX3hDb250ZW50O2EuX2FDb250ZW50PVgucGFyc2VUZW1wbGF0ZShhLl94Q29udGVudCxhKX0pfX0pO0YucmVnaXN0ZXJUeXBlKCJKUyIse2luaXQ6ZnVuY3Rpb24ocyl7aWYoIXJbcy5mcmFnbWVudE5hbWVdKXtxLnNhcC5yZXF1aXJlKHttb2ROYW1lOnMuZnJhZ21lbnROYW1lLHR5cGU6ImZyYWdtZW50In0pfXEuZXh0ZW5kKHRoaXMscltzLmZyYWdtZW50TmFtZV0pO3RoaXMuX29Db250YWluaW5nVmlldz1zLmNvbnRhaW5pbmdWaWV3fHx0aGlzO3ZhciBhPXRoaXM7TS5ydW5XaXRoUHJlcHJvY2Vzc29ycyhmdW5jdGlvbigpe3ZhciBjPWEuY3JlYXRlQ29udGVudChzLm9Db250cm9sbGVyfHxhLl9vQ29udGFpbmluZ1ZpZXcub0NvbnRyb2xsZXIpO2EuX2FDb250ZW50PVtdO2EuX2FDb250ZW50PWEuX2FDb250ZW50LmNvbmNhdChjKX0pfX0pOyhmdW5jdGlvbigpe3ZhciBfPXt9O3ZhciBhPWZ1bmN0aW9uKFQpe3ZhciB1PXEuc2FwLmdldE1vZHVsZVBhdGgoVCwiLmZyYWdtZW50Lmh0bWwiKTt2YXIgaD1fW3VdO3ZhciBSO2lmKCFoKXtSPXEuc2FwLmdldFJlc291cmNlTmFtZShULCIuZnJhZ21lbnQuaHRtbCIpO2g9cS5zYXAubG9hZFJlc291cmNlKFIpO19bdV09aH1yZXR1cm4gaH07Ri5yZWdpc3RlclR5cGUoIkhUTUwiLHtpbml0OmZ1bmN0aW9uKHMpe3RoaXMuX2FDb250ZW50PVtdO3RoaXMuZ2V0Q29udGVudD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9hQ29udGVudH07dGhpcy5hZGRDb250ZW50PWZ1bmN0aW9uKEMpe3RoaXMuX2FDb250ZW50LnB1c2goQyl9O3RoaXMuX29Db250YWluaW5nVmlldz1zLmNvbnRhaW5pbmdWaWV3fHx0aGlzO3ZhciBoPXMuZnJhZ21lbnRDb250ZW50fHxhKHMuZnJhZ21lbnROYW1lKTt0aGlzLl9vVGVtcGxhdGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7dmFyIEg9c2FwLnVpLmNvcmUuUmVuZGVyTWFuYWdlci5wcmVwYXJlSFRNTDUoaCk7aWYodHlwZW9mIEg9PT0ic3RyaW5nIil7dGhpcy5fb1RlbXBsYXRlLmlubmVySFRNTD1IfWVsc2V7dmFyIG49SDt2YXIgZj1kb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7Zm9yKHZhciBpPTA7aTxuLmxlbmd0aDtpKyspe2YuYXBwZW5kQ2hpbGQobi5pdGVtKGkpKX10aGlzLl9vVGVtcGxhdGUuYXBwZW5kQ2hpbGQoZil9dmFyIG09dGhpcy5fb1RlbXBsYXRlLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJ0ZW1wbGF0ZSIpWzBdO3ZhciBwPXRoaXMuZ2V0TWV0YWRhdGEoKS5nZXRBbGxQcm9wZXJ0aWVzKCk7aWYobSl7dmFyIGI9dGhpczt2YXIgYz1EO3EuZWFjaChtLmF0dHJpYnV0ZXMsZnVuY3Rpb24oSSxBKXt2YXIgTj1jLmNvbnZlcnRBdHRyaWJ1dGVUb1NldHRpbmdOYW1lKEEubmFtZSxiLmdldElkKCkpO3ZhciB2PUEudmFsdWU7dmFyIFA9cFtOXTtpZighc1tOXSl7aWYoUCl7c1tOXT1jLmNvbnZlcnRWYWx1ZVRvVHlwZShjLmdldFByb3BlcnR5RGF0YVR5cGUoUCksdil9ZWxzZSBpZihzYXAudWkuY29yZS5tdmMuSFRNTFZpZXcuX21BbGxvd2VkU2V0dGluZ3NbTl0pe3NbTl09dn19fSk7dGhpcy5fb1RlbXBsYXRlPW19aWYodGhpcy5fb1RlbXBsYXRlLmNvbnRlbnQpe3ZhciBmPXRoaXMuX29UZW1wbGF0ZS5jb250ZW50O3RoaXMuX29UZW1wbGF0ZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTt0aGlzLl9vVGVtcGxhdGUuYXBwZW5kQ2hpbGQoZil9dmFyIGI9dGhpcztNLnJ1bldpdGhQcmVwcm9jZXNzb3JzKGZ1bmN0aW9uKCl7RC5jb21waWxlKGIuX29UZW1wbGF0ZSxiKTt2YXIgZD1iLmdldENvbnRlbnQoKTtpZihkJiZkLmxlbmd0aD09PTEpe2IuX2FDb250ZW50PVtkWzBdXX1lbHNle319KX19KX0oKSk7cmV0dXJuIEZ9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS5yb3V0aW5nLlJvdXRlcicpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLnJvdXRpbmcuUm91dGVyJyk7alF1ZXJ5LnNhcC5yZXF1aXJlKCdzYXAudWkudGhpcmRwYXJ0eS5jcm9zc3JvYWRzJyk7alF1ZXJ5LnNhcC5yZXF1aXJlKCdzYXAudWkudGhpcmRwYXJ0eS5zaWduYWxzJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvcm91dGluZy9Sb3V0ZXIiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvYmFzZS9FdmVudFByb3ZpZGVyJywnc2FwL3VpL2Jhc2UvTWFuYWdlZE9iamVjdCcsJy4vSGFzaENoYW5nZXInLCcuL1JvdXRlJywnc2FwL3VpL3RoaXJkcGFydHkvY3Jvc3Nyb2FkcycsJ3NhcC91aS90aGlyZHBhcnR5L3NpZ25hbHMnXSxmdW5jdGlvbihxLEUsTSxILFIsYyxzKXsidXNlIHN0cmljdCI7dmFyIHI9e307dmFyIGE9RS5leHRlbmQoInNhcC51aS5jb3JlLnJvdXRpbmcuUm91dGVyIix7Y29uc3RydWN0b3I6ZnVuY3Rpb24obyxDLE8pe0UuYXBwbHkodGhpcyk7dGhpcy5fb0NvbmZpZz1DO3RoaXMuX29Sb3V0ZXI9Y3Jvc3Nyb2Fkcy5jcmVhdGUoKTt0aGlzLl9vUm91dGVyLmlnbm9yZVN0YXRlPXRydWU7dGhpcy5fb1JvdXRlcz17fTt0aGlzLl9vVmlld3M9e307dGhpcy5fb093bmVyPU87dmFyIHQ9dGhpcztpZighbyl7bz17fX1pZihxLmlzQXJyYXkobykpe3ZhciBiPW87bz17fTtxLmVhY2goYixmdW5jdGlvbihpLGQpe29bZC5uYW1lXT1kfSl9cS5lYWNoKG8sZnVuY3Rpb24oZCxlKXtpZihlLm5hbWU9PXVuZGVmaW5lZCl7ZS5uYW1lPWR9dC5hZGRSb3V0ZShlKX0pfSxtZXRhZGF0YTp7cHVibGljTWV0aG9kczpbImluaXRpYWxpemUiLCJnZXRVUkwiLCJyZWdpc3RlciJdfX0pO2EuTV9FVkVOVFM9e1JvdXRlTWF0Y2hlZDoicm91dGVNYXRjaGVkIixSb3V0ZVBhdHRlcm5NYXRjaGVkOiJyb3V0ZVBhdHRlcm5NYXRjaGVkIixWaWV3Q3JlYXRlZDoidmlld0NyZWF0ZWQifTthLnByb3RvdHlwZS5hZGRSb3V0ZT1mdW5jdGlvbihDLHApe2lmKCFDLm5hbWUpe3Euc2FwLmxvZy5lcnJvcigiQSBuYW1lIGhhcyB0byBiZSBzcGVjaWZpZWQgZm9yIGV2ZXJ5IHJvdXRlIil9aWYodGhpcy5fb1JvdXRlc1tDLm5hbWVdKXtxLnNhcC5sb2cuZXJyb3IoIlJvdXRlIHdpdGggbmFtZSAiK0MubmFtZSsiIGFscmVhZHkgZXhpc3RzIil9dGhpcy5fb1JvdXRlc1tDLm5hbWVdPW5ldyBSKHRoaXMsQyxwKX07YS5wcm90b3R5cGUucGFyc2U9ZnVuY3Rpb24obixvKXt0aGlzLl9vUm91dGVyLnBhcnNlKG4pfTthLnByb3RvdHlwZS5pbml0aWFsaXplPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxoPXRoaXMub0hhc2hDaGFuZ2VyPUguZ2V0SW5zdGFuY2UoKTtpZih0aGlzLl9iSXNJbml0aWFsaXplZCl7cS5zYXAubG9nLndhcm5pbmcoIlJvdXRlciBpcyBhbHJlYWR5IGluaXRpYWxpemVkLiIpO3JldHVybiB0aGlzfXRoaXMuX2JJc0luaXRpYWxpemVkPXRydWU7dGhpcy5mbkhhc2hDaGFuZ2VkPWZ1bmN0aW9uKGUpe3QucGFyc2UoZS5nZXRQYXJhbWV0ZXIoIm5ld0hhc2giKSxlLmdldFBhcmFtZXRlcigib2xkSGFzaCIpKX07aC5hdHRhY2hFdmVudCgiaGFzaENoYW5nZWQiLHRoaXMuZm5IYXNoQ2hhbmdlZCk7aWYoIWguaW5pdCgpKXt0aGlzLnBhcnNlKGguZ2V0SGFzaCgpKX1yZXR1cm4gdGhpc307YS5wcm90b3R5cGUuc3RvcD1mdW5jdGlvbigpe2lmKCF0aGlzLl9iSXNJbml0aWFsaXplZCl7cS5zYXAubG9nLndhcm5pbmcoIlJvdXRlciBpcyBub3QgaW5pdGlhbGl6ZWQuIEJ1dCBpdCBnb3Qgc3RvcHBlZCIpfWlmKHRoaXMuZm5IYXNoQ2hhbmdlZCl7dGhpcy5vSGFzaENoYW5nZXIuZGV0YWNoRXZlbnQoImhhc2hDaGFuZ2VkIix0aGlzLmZuSGFzaENoYW5nZWQpfXRoaXMuX2JJc0luaXRpYWxpemVkPWZhbHNlO3JldHVybiB0aGlzfTthLnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKCl7RS5wcm90b3R5cGUuZGVzdHJveS5hcHBseSh0aGlzKTtpZighdGhpcy5fYklzSW5pdGlhbGl6ZWQpe3Euc2FwLmxvZy5pbmZvKCJSb3V0ZXIgaXMgbm90IGluaXRpYWxpemVkLCBidXQgZ290IGRlc3Ryb3llZC4iKX1pZih0aGlzLmZuSGFzaENoYW5nZWQpe3RoaXMub0hhc2hDaGFuZ2VyLmRldGFjaEV2ZW50KCJoYXNoQ2hhbmdlZCIsdGhpcy5mbkhhc2hDaGFuZ2VkKX10aGlzLl9vT3duZXI9bnVsbDt0aGlzLl9vUm91dGVyLnJlbW92ZUFsbFJvdXRlcygpO3RoaXMuX29Sb3V0ZXI9bnVsbDtyZXR1cm4gdGhpc307YS5wcm90b3R5cGUuZ2V0VVJMPWZ1bmN0aW9uKG4scCl7aWYocD09PXVuZGVmaW5lZCl7cD17fX12YXIgbz10aGlzLl9vUm91dGVzW25dO2lmKCFvKXtxLnNhcC5sb2cud2FybmluZygiUm91dGUgd2l0aCBuYW1lICIrbisiIGRvZXMgbm90IGV4aXN0Iik7cmV0dXJufXJldHVybiBvLmdldFVSTChwKX07YS5wcm90b3R5cGUuZ2V0Vmlldz1mdW5jdGlvbih2LFYsYil7aWYoIXYpe3Euc2FwLmxvZy5lcnJvcigiQSBuYW1lIGZvciB0aGUgdmlldyBoYXMgdG8gYmUgZGVmaW5lZCIpfWlmKCF0aGlzLl9vVmlld3Nbdl0pe3ZhciBDPWZ1bmN0aW9uKCl7dmFyIG89e3R5cGU6Vix2aWV3TmFtZTp2fTtpZihiKXtvLmlkPWJ9cmV0dXJuIHNhcC51aS52aWV3KG8pfTtpZih0aGlzLl9vT3duZXIpe3ZhciB0PXRoaXM7TS5ydW5XaXRoT3duZXIoZnVuY3Rpb24oKXt0Ll9vVmlld3Nbdl09QygpfSx0aGlzLl9vT3duZXIpfWVsc2V7dGhpcy5fb1ZpZXdzW3ZdPUMoKX10aGlzLmZpcmVWaWV3Q3JlYXRlZCh7dmlldzp0aGlzLl9vVmlld3Nbdl0sdmlld05hbWU6dix0eXBlOlZ9KX1yZXR1cm4gdGhpcy5fb1ZpZXdzW3ZdfTthLnByb3RvdHlwZS5zZXRWaWV3PWZ1bmN0aW9uKHYsVil7aWYoIXYpe3Euc2FwLmxvZy5lcnJvcigiQSBuYW1lIGZvciB0aGUgdmlldyBoYXMgdG8gYmUgZGVmaW5lZCIpfXRoaXMuX29WaWV3c1t2XT1WfTthLnByb3RvdHlwZS5uYXZUbz1mdW5jdGlvbihuLHAsYil7aWYoYil7dGhpcy5vSGFzaENoYW5nZXIucmVwbGFjZUhhc2godGhpcy5nZXRVUkwobixwKSl9ZWxzZXt0aGlzLm9IYXNoQ2hhbmdlci5zZXRIYXNoKHRoaXMuZ2V0VVJMKG4scCkpfX07YS5wcm90b3R5cGUuYXR0YWNoUm91dGVNYXRjaGVkPWZ1bmN0aW9uKGQsZixsKXt0aGlzLmF0dGFjaEV2ZW50KCJyb3V0ZU1hdGNoZWQiLGQsZixsKTtyZXR1cm4gdGhpc307YS5wcm90b3R5cGUuZGV0YWNoUm91dGVNYXRjaGVkPWZ1bmN0aW9uKGYsbCl7dGhpcy5kZXRhY2hFdmVudCgicm91dGVNYXRjaGVkIixmLGwpO3JldHVybiB0aGlzfTthLnByb3RvdHlwZS5maXJlUm91dGVNYXRjaGVkPWZ1bmN0aW9uKEEpe3RoaXMuZmlyZUV2ZW50KCJyb3V0ZU1hdGNoZWQiLEEpO3JldHVybiB0aGlzfTthLnByb3RvdHlwZS5hdHRhY2hWaWV3Q3JlYXRlZD1mdW5jdGlvbihkLGYsbCl7dGhpcy5hdHRhY2hFdmVudCgidmlld0NyZWF0ZWQiLGQsZixsKTtyZXR1cm4gdGhpc307YS5wcm90b3R5cGUuZGV0YWNoVmlld0NyZWF0ZWQ9ZnVuY3Rpb24oZixsKXt0aGlzLmRldGFjaEV2ZW50KCJ2aWV3Q3JlYXRlZCIsZixsKTtyZXR1cm4gdGhpc307YS5wcm90b3R5cGUuZmlyZVZpZXdDcmVhdGVkPWZ1bmN0aW9uKEEpe3RoaXMuZmlyZUV2ZW50KCJ2aWV3Q3JlYXRlZCIsQSk7cmV0dXJuIHRoaXN9O2EucHJvdG90eXBlLmF0dGFjaFJvdXRlUGF0dGVybk1hdGNoZWQ9ZnVuY3Rpb24oZCxmLGwpe3RoaXMuYXR0YWNoRXZlbnQoInJvdXRlUGF0dGVybk1hdGNoZWQiLGQsZixsKTtyZXR1cm4gdGhpc307YS5wcm90b3R5cGUuZGV0YWNoUm91dGVQYXR0ZXJuTWF0Y2hlZD1mdW5jdGlvbihmLGwpe3RoaXMuZGV0YWNoRXZlbnQoInJvdXRlUGF0dGVybk1hdGNoZWQiLGYsbCk7cmV0dXJuIHRoaXN9O2EucHJvdG90eXBlLmZpcmVSb3V0ZVBhdHRlcm5NYXRjaGVkPWZ1bmN0aW9uKEEpe3RoaXMuZmlyZUV2ZW50KCJyb3V0ZVBhdHRlcm5NYXRjaGVkIixBKTtyZXR1cm4gdGhpc307YS5wcm90b3R5cGUucmVnaXN0ZXI9ZnVuY3Rpb24obil7cltuXT10aGlzO3JldHVybiB0aGlzfTthLmdldFJvdXRlcj1mdW5jdGlvbihuKXtyZXR1cm4gcltuXX07cmV0dXJuIGF9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS50bXBsLlRlbXBsYXRlJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUudG1wbC5UZW1wbGF0ZScpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL3RtcGwvVGVtcGxhdGUiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvYmFzZS9NYW5hZ2VkT2JqZWN0J10sZnVuY3Rpb24ocSxNKXsidXNlIHN0cmljdCI7dmFyIFQ9TS5leHRlbmQoInNhcC51aS5jb3JlLnRtcGwuVGVtcGxhdGUiLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbihpLHMpe00uYXBwbHkodGhpcyxhcmd1bWVudHMpfSxtZXRhZGF0YTp7c3RlcmVvdHlwZToidGVtcGxhdGUiLCJhYnN0cmFjdCI6dHJ1ZSxwcm9wZXJ0aWVzOnsiY29udGVudCI6e3R5cGU6InN0cmluZyIsZ3JvdXA6IkRhdGEiLGRlZmF1bHRWYWx1ZTpudWxsfX0scHVibGljTWV0aG9kczpbImRlY2xhcmVDb250cm9sIiwiY3JlYXRlQ29udHJvbCIsInBsYWNlQXQiLCJjcmVhdGVNZXRhZGF0YSIsImNyZWF0ZVJlbmRlcmVyIl0sbGlicmFyeToic2FwLnVpLmNvcmUifX0pO1QucHJvdG90eXBlLmdldEludGVyZmFjZT1mdW5jdGlvbigpe3JldHVybiB0aGlzfTtULl9tU3VwcG9ydGVkVHlwZXM9e307VC5yZWdpc3RlclR5cGU9ZnVuY3Rpb24odCxjKXtULl9tU3VwcG9ydGVkVHlwZXNbdF09Y307VC51bnJlZ2lzdGVyVHlwZT1mdW5jdGlvbih0KXtkZWxldGUgVC5fbVN1cHBvcnRlZFR5cGVzW3RdfTtULnBhcnNlUGF0aD1mdW5jdGlvbihwKXt2YXIgbT11bmRlZmluZWQscz1wLmluZGV4T2YoIj4iKTtpZihzPjApe209cC5zdWJzdHIoMCxzKTtwPXAuc3Vic3RyKHMrMSl9cmV0dXJue3BhdGg6cCxtb2RlbDptfX07VC5wcm90b3R5cGUuaW5pdD1mdW5jdGlvbihzLFMpe2lmKHRoaXMuZ2V0TWV0YWRhdGEoKS5nZXROYW1lKCk9PT0ic2FwLnVpLmNvcmUudG1wbC5UZW1wbGF0ZSIpe3Rocm93IG5ldyBFcnJvcigiVGhlIGNsYXNzICdzYXAudWkuY29yZS50bXBsLlRlbXBsYXRlJyBpcyBhYnN0cmFjdCBhbmQgbXVzdCBub3QgYmUgaW5zdGFudGlhdGVkISIpfWlmKE0uYmluZGluZ1BhcnNlcj09PXNhcC51aS5iYXNlLkJpbmRpbmdQYXJzZXIuY29tcGxleFBhcnNlcil7VC5wcm90b3R5cGUuZXh0cmFjdEJpbmRpbmdJbmZvPWZ1bmN0aW9uKHYsaSxTKXtNLmJpbmRpbmdQYXJzZXI9c2FwLnVpLmJhc2UuQmluZGluZ1BhcnNlci5zaW1wbGVQYXJzZXI7dmFyIHI9c2FwLnVpLmNvcmUuQ29udHJvbC5wcm90b3R5cGUuZXh0cmFjdEJpbmRpbmdJbmZvLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtNLmJpbmRpbmdQYXJzZXI9c2FwLnVpLmJhc2UuQmluZGluZ1BhcnNlci5jb21wbGV4UGFyc2VyO3JldHVybiByfX19O1QucHJvdG90eXBlLmRlY2xhcmVDb250cm9sPWZ1bmN0aW9uKGMpe2lmKGMpe3ZhciBtPXRoaXMuY3JlYXRlTWV0YWRhdGEoKSxyPXRoaXMuY3JlYXRlUmVuZGVyZXIoKSx0PXRoaXM7cS5zYXAucmVxdWlyZSgic2FwLnVpLmNvcmUudG1wbC5UZW1wbGF0ZUNvbnRyb2wiKTtzYXAudWkuY29yZS50bXBsLlRlbXBsYXRlQ29udHJvbC5leHRlbmQoYyx7bWV0YWRhdGE6bSxpbml0OmZ1bmN0aW9uKCl7c2FwLnVpLmNvcmUudG1wbC5UZW1wbGF0ZUNvbnRyb2wucHJvdG90eXBlLmluaXQuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMuc2V0VGVtcGxhdGUodCl9LHJlbmRlcmVyOntyZW5kZXJUZW1wbGF0ZTpyLGhhc0NvbnRyb2xEYXRhOm0uX2hhc0NvbnRyb2xEYXRhfX0pO3JldHVybiBxLnNhcC5nZXRPYmplY3QoYyl9fTtULnByb3RvdHlwZS5jcmVhdGVDb250cm9sPWZ1bmN0aW9uKGksYyx2KXtxLnNhcC5yZXF1aXJlKCJzYXAudWkuY29yZS50bXBsLlRlbXBsYXRlQ29udHJvbCIpO3ZhciBDPW5ldyBzYXAudWkuY29yZS50bXBsLlRlbXBsYXRlQ29udHJvbCh7aWQ6aSx0ZW1wbGF0ZTp0aGlzLGNvbnRleHQ6Y30pO0Muc2V0VGVtcGxhdGVSZW5kZXJlcih0aGlzLmNyZWF0ZVJlbmRlcmVyKHYpKTtyZXR1cm4gQ307VC5wcm90b3R5cGUucGxhY2VBdD1mdW5jdGlvbihyLGMscCxpKXtpZih0eXBlb2YgYz09PSJzdHJpbmcifHx0eXBlb2YgYz09PSJudW1iZXIiKXtwPWM7Yz11bmRlZmluZWR9dmFyIEk7aWYoIShyIGluc3RhbmNlb2Ygc2FwLnVpLmNvcmUuQ29udHJvbCkmJmkpe3ZhciAkPXR5cGVvZiByPT09InN0cmluZyI/cS5zYXAuYnlJZChyKTpxKHIpO2lmKCQubGVuZ3RoPjApe0k9JC5hdHRyKCJpZCIpO3I9JC5nZXQoMCk7dmFyIEM9JC5hdHRyKCJkYXRhLWNvbnRleHQiKTtjPWN8fEMmJnEucGFyc2VKU09OKEMpO3NhcC51aS5jb3JlLlJlbmRlck1hbmFnZXIubWFya0lubGluZVRlbXBsYXRlKCQpfX12YXIgbz10aGlzLmNyZWF0ZUNvbnRyb2woSSxjKTtvLnBsYWNlQXQocixwKTtyZXR1cm4gb307VC5wcm90b3R5cGUuY3JlYXRlTWV0YWRhdGE9ZnVuY3Rpb24oKXtxLnNhcC5sb2cuZXJyb3IoIlRoZSBmdW5jdGlvbiBjcmVhdGVNZXRhZGF0YSBpcyBhbiBhYnN0cmFjdCBmdW5jdGlvbiB3aGljaCBuZWVkcyB0byBiZSBpbXBsZW1lbnRlZCBieSBzdWJjbGFzc2VzLiIpfTtULnByb3RvdHlwZS5jcmVhdGVSZW5kZXJlcj1mdW5jdGlvbigpe3Euc2FwLmxvZy5lcnJvcigiVGhlIGZ1bmN0aW9uIGNyZWF0ZVJlbmRlcmVyIGlzIGFuIGFic3RyYWN0IGZ1bmN0aW9uIHdoaWNoIG5lZWRzIHRvIGJlIGltcGxlbWVudGVkIGJ5IHN1YmNsYXNzZXMuIil9O3NhcC51aS50ZW1wbGF0ZT1mdW5jdGlvbih0KXtpZighdCl7dmFyIGE9W107cS5lYWNoKFQuX21TdXBwb3J0ZWRUeXBlcyxmdW5jdGlvbihzLGope3EoInNjcmlwdFt0eXBlPSciK3MrIiddLCBbZGF0YS10eXBlPSciK3MrIiddIikuZWFjaChmdW5jdGlvbihtLEUpe2EucHVzaChzYXAudWkudGVtcGxhdGUoe2lkOkUuaWQsZG9tcmVmOkUsdHlwZTpzLF9jbGFzczpqfSkpfSl9KTtyZXR1cm4gYX1lbHNle2lmKHR5cGVvZiB0PT09InN0cmluZyIpe3JldHVybiBzYXAudWkudGVtcGxhdGUoe2lkOnR9KX1lbHNlIGlmKHQmJnQudGFnTmFtZSYmdC5ub2RlTmFtZSYmdC5vd25lckRvY3VtZW50JiZ0Lm5vZGVUeXBlPT09MSl7cmV0dXJuIHNhcC51aS50ZW1wbGF0ZSh7aWQ6dC5pZCxkb21yZWY6dH0pfXQ9cS5leHRlbmQoe3R5cGU6VC5ERUZBVUxUX1RFTVBMQVRFfSx0KTt2YXIgaSxzLGMsQyxyLGI9ZmFsc2UsbD10eXBlb2YgdC5zcmM9PT0ic3RyaW5nIjtpZihsKXt2YXIgUj1xLnNhcC5zamF4KHt1cmw6dC5zcmMsZGF0YVR5cGU6InRleHQifSk7aWYoUi5zdWNjZXNzKXtpPXQuaWQscz10LnR5cGUsYz10LmNvbnRyb2wsQz1SLmRhdGE7dmFyIGQ9L148IS0tXHNVSTU6VGVtcGxhdGVcc3R5cGU9KFthLXpcL1wtXSopXHMoPzpjb250cm9sbGVyPShbQS1aYS16Ll0qKVxzKT8tLT4vLGU9Qy5tYXRjaChkKTtpZihlKXtzPWVbMV07aWYoZS5sZW5ndGg9PTMpe2I9ZVsyXX1DPUMuc3Vic3RyKGVbMF0ubGVuZ3RoKX19ZWxzZXt0aHJvdyBuZXcgRXJyb3IoIlRoZSB0ZW1wbGF0ZSBjb3VsZCBub3QgYmUgbG9hZGVkIGZyb20gIit0LnNyYysiISIpfX1lbHNle3ZhciBFPXQuZG9tcmVmfHxxLnNhcC5kb21CeUlkKHQuaWQpLCQ9cShFKSxJPWZhbHNlO2k9dC5pZHx8RSYmRS5pZDtzPSQuYXR0cigidHlwZSIpfHx0LnR5cGUsYz0kLmF0dHIoImRhdGEtY29udHJvbCIpfHx0LmNvbnRyb2w7aWYoaSl7dmFyIGY9c2FwLnVpLmdldENvcmUoKS5nZXRUZW1wbGF0ZShpKTtpZighZiBpbnN0YW5jZW9mIFQpe3Rocm93IG5ldyBFcnJvcigiT2JqZWN0IGZvciBpZCBcIiIraSsiXCIgaXMgbm8gc2FwLnVpLmNvcmUudG1wbC5UZW1wbGF0ZSEiKX1lbHNle2lmKGYpe3JldHVybiBmfX19aWYoJC5sZW5ndGg9PT0wKXt0aHJvdyBuZXcgRXJyb3IoIkRPTSBlbGVtZW50IGZvciB0aGUgVGVtcGxhdGUgd2l0aCB0aGUgaWQgXCIiK2krIlwiIG5vdCBmb3VuZCEiKX1DPSQuaHRtbCgpO3ZhciBnPS9wYXRoPSIoXHd8XC98Jmd0OykrIi9pO2lmKGcudGVzdChDKSl7Qz1DLnJlcGxhY2UoIiZndDsiLCI+Iil9dmFyIGg9RS50YWdOYW1lLnRvTG93ZXJDYXNlKCk7aWYoaCE9PSJzY3JpcHQiKXtJPSQucGFyZW50cygiYm9keSIpLmxlbmd0aD09PTF9fXZhciBqPXQuX2NsYXNzO2lmKCFqKXtqPVQuX21TdXBwb3J0ZWRUeXBlc1tzXTtpZighail7dGhyb3cgbmV3IEVycm9yKCJUaGUgdHlwZSBcIiIrcysiXCIgaXMgbm90IHN1cHBvcnRlZC4iKX19cS5zYXAucmVxdWlyZShqKTt2YXIgbz1xLnNhcC5nZXRPYmplY3Qoaik7dmFyIGs9bmV3IG8oe2lkOmksY29udGVudDpDfSk7aWYoYyl7ay5kZWNsYXJlQ29udHJvbChjKX1pZihiKXtrLl9zQ29udHJvbGxlck5hbWU9Yn1pZihJKXtrLnBsYWNlQXQoaSx0LmNvbnRleHQsdW5kZWZpbmVkLHRydWUpfXJldHVybiBrfX07VC5ERUZBVUxUX1RFTVBMQVRFPSJ0ZXh0L3gtaGFuZGxlYmFycy10ZW1wbGF0ZSI7VC5yZWdpc3RlclR5cGUoVC5ERUZBVUxUX1RFTVBMQVRFLCJzYXAudWkuY29yZS50bXBsLkhhbmRsZWJhcnNUZW1wbGF0ZSIpO3JldHVybiBUfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUudXRpbC5FeHBvcnRUeXBlJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUudXRpbC5FeHBvcnRUeXBlJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvdXRpbC9FeHBvcnRUeXBlIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL2Jhc2UvTWFuYWdlZE9iamVjdCddLGZ1bmN0aW9uKHEsTSl7J3VzZSBzdHJpY3QnO3ZhciBFPU0uZXh0ZW5kKCdzYXAudWkuY29yZS51dGlsLkV4cG9ydFR5cGUnLHttZXRhZGF0YTp7cHJvcGVydGllczp7ZmlsZUV4dGVuc2lvbjonc3RyaW5nJyxtaW1lVHlwZTonc3RyaW5nJyxjaGFyc2V0OidzdHJpbmcnfX19KTtFLnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKCl7dGhpcy5fb0V4cG9ydD1udWxsfTtFLnByb3RvdHlwZS5fZ2VuZXJhdGU9ZnVuY3Rpb24oZSl7dGhpcy5fb0V4cG9ydD1lO3ZhciBjPXRoaXMuZ2VuZXJhdGUoKTt0aGlzLl9vRXhwb3J0PW51bGw7cmV0dXJuIGN9O0UucHJvdG90eXBlLmdlbmVyYXRlPWZ1bmN0aW9uKCl7cmV0dXJuJyd9O0UucHJvdG90eXBlLmdldENvbHVtbkNvdW50PWZ1bmN0aW9uKCl7aWYodGhpcy5fb0V4cG9ydCl7cmV0dXJuIHRoaXMuX29FeHBvcnQuZ2V0Q29sdW1ucygpLmxlbmd0aH1yZXR1cm4gMH07RS5wcm90b3R5cGUuZ2V0Um93Q291bnQ9ZnVuY3Rpb24oKXtpZih0aGlzLl9vRXhwb3J0JiZ0aGlzLl9vRXhwb3J0LmdldEJpbmRpbmcoInJvd3MiKSl7cmV0dXJuIHRoaXMuX29FeHBvcnQuZ2V0QmluZGluZygicm93cyIpLmdldExlbmd0aCgpfXJldHVybiAwfTtFLnByb3RvdHlwZS5jb2x1bW5HZW5lcmF0b3I9ZnVuY3Rpb24oKXt2YXIgaT0wLGM9dGhpcy5fb0V4cG9ydC5nZXRDb2x1bW5zKCksQz1jLmxlbmd0aDtyZXR1cm57bmV4dDpmdW5jdGlvbigpe2lmKGk8Qyl7dmFyIEk9aTtpKys7cmV0dXJue3ZhbHVlOntpbmRleDpJLG5hbWU6Y1tJXS5nZXROYW1lKCl9LGRvbmU6ZmFsc2V9fWVsc2V7cmV0dXJue3ZhbHVlOnVuZGVmaW5lZCxkb25lOnRydWV9fX19fTtFLnByb3RvdHlwZS5jZWxsR2VuZXJhdG9yPWZ1bmN0aW9uKCl7dmFyIGk9MCxyPXRoaXMuX29FeHBvcnQuZ2V0QWdncmVnYXRpb24oJ190ZW1wbGF0ZScpLGM9ci5nZXRDZWxscygpLEM9Yy5sZW5ndGg7cmV0dXJue25leHQ6ZnVuY3Rpb24oKXtpZihpPEMpe3ZhciBJPWk7aSsrO3ZhciBtPXt9O3EuZWFjaChjW0ldLmdldEN1c3RvbURhdGEoKSxmdW5jdGlvbigpe21bdGhpcy5nZXRLZXkoKV09dGhpcy5nZXRWYWx1ZSgpfSk7cmV0dXJue3ZhbHVlOntpbmRleDpJLGNvbnRlbnQ6Y1tJXS5nZXRDb250ZW50KCksY3VzdG9tRGF0YTptfSxkb25lOmZhbHNlfX1lbHNle3JldHVybnt2YWx1ZTp1bmRlZmluZWQsZG9uZTp0cnVlfX19fX07RS5wcm90b3R5cGUucm93R2VuZXJhdG9yPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxpPTAsZT10aGlzLl9vRXhwb3J0LGI9ZS5nZXRCaW5kaW5nKCJyb3dzIiksQj1lLmdldEJpbmRpbmdJbmZvKCJyb3dzIiksYz1iLmdldENvbnRleHRzKDAsYi5nZXRMZW5ndGgoKSksQz1jLmxlbmd0aCxyPWUuZ2V0QWdncmVnYXRpb24oJ190ZW1wbGF0ZScpO3JldHVybntuZXh0OmZ1bmN0aW9uKCl7aWYoaTxDKXt2YXIgST1pO2krKztyLnNldEJpbmRpbmdDb250ZXh0KGNbSV0sQi5tb2RlbCk7cmV0dXJue3ZhbHVlOntpbmRleDpJLGNlbGxzOnQuY2VsbEdlbmVyYXRvcigpfSxkb25lOmZhbHNlfX1lbHNle3JldHVybnt2YWx1ZTp1bmRlZmluZWQsZG9uZTp0cnVlfX19fX07cmV0dXJuIEV9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS51dGlsLkV4cG9ydFR5cGVDU1YnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS51dGlsLkV4cG9ydFR5cGVDU1YnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS91dGlsL0V4cG9ydFR5cGVDU1YiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCcuL0V4cG9ydFR5cGUnXSxmdW5jdGlvbihxLEUpeyd1c2Ugc3RyaWN0Jzt2YXIgQz1FLmV4dGVuZCgnc2FwLnVpLmNvcmUudXRpbC5FeHBvcnRUeXBlQ1NWJyx7bWV0YWRhdGE6e3Byb3BlcnRpZXM6e3NlcGFyYXRvckNoYXI6e3R5cGU6J3N0cmluZycsZGVmYXVsdFZhbHVlOicsJ319fX0pO0MucHJvdG90eXBlLnNldFNlcGFyYXRvckNoYXI9ZnVuY3Rpb24ocyl7dmFyIHM9dGhpcy52YWxpZGF0ZVByb3BlcnR5KCdzZXBhcmF0b3JDaGFyJyxzKTtpZihzLmxlbmd0aD4xKXt0aHJvdyBuZXcgRXJyb3IoIlZhbHVlIG9mIHByb3BlcnR5IFwic2VwYXJhdG9yQ2hhclwiIG5lZWRzIHRvIGJlIGV4YWN0bHkgb25lIGNoYXJhY3RlciBvciBlbXB0eS4gIisiXCIiK3MrIlwiIGlzICIrcy5sZW5ndGgrIiBjaGFyYWN0ZXJzIGxvbmcuIil9cmV0dXJuIHRoaXMuc2V0UHJvcGVydHkoJ3NlcGFyYXRvckNoYXInLHMpfTtDLnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKCl7dGhpcy5zZXRQcm9wZXJ0eSgnZmlsZUV4dGVuc2lvbicsJ2NzdicsdHJ1ZSk7dGhpcy5zZXRQcm9wZXJ0eSgnbWltZVR5cGUnLCd0ZXh0L2NzdicsdHJ1ZSk7dGhpcy5zZXRQcm9wZXJ0eSgnY2hhcnNldCcsJ3V0Zi04Jyx0cnVlKX07Qy5wcm90b3R5cGUuZXNjYXBlQ29udGVudD1mdW5jdGlvbih2KXtpZih2JiYodi5pbmRleE9mKHRoaXMuZ2V0U2VwYXJhdG9yQ2hhcigpKT4tMXx8di5pbmRleE9mKCdcclxuJyk+LTEpKXt2PXYucmVwbGFjZSgvIi9nLCciIicpO3Y9JyInK3YrJyInfXJldHVybiB2fTtDLnByb3RvdHlwZS5nZW5lcmF0ZT1mdW5jdGlvbigpe3ZhciBiPVtdO3RoaXMuZ2VuZXJhdGVDb2x1bW5zKGIpO3RoaXMuZ2VuZXJhdGVSb3dzKGIpO3JldHVybiBiLmpvaW4oJ1xyXG4nKX07Qy5wcm90b3R5cGUuZ2VuZXJhdGVDb2x1bW5zPWZ1bmN0aW9uKGIpe3ZhciBjPVtdLG89dGhpcy5jb2x1bW5HZW5lcmF0b3IoKSxhO3doaWxlKCEoYT1vLm5leHQoKSkuZG9uZSl7Yy5wdXNoKHRoaXMuZXNjYXBlQ29udGVudChhLnZhbHVlLm5hbWUpKX1iLnB1c2goYy5qb2luKHRoaXMuZ2V0U2VwYXJhdG9yQ2hhcigpKSl9O0MucHJvdG90eXBlLmdlbmVyYXRlUm93cz1mdW5jdGlvbihiKXt2YXIgcj10aGlzLnJvd0dlbmVyYXRvcigpLFI7d2hpbGUoIShSPXIubmV4dCgpKS5kb25lKXt2YXIgYT1bXTt2YXIgYz1SLnZhbHVlLmNlbGxzLG87d2hpbGUoIShvPWMubmV4dCgpKS5kb25lKXthLnB1c2godGhpcy5lc2NhcGVDb250ZW50KG8udmFsdWUuY29udGVudCkpfWIucHVzaChhLmpvaW4odGhpcy5nZXRTZXBhcmF0b3JDaGFyKCkpKX19O3JldHVybiBDfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUudXRpbC5Nb2NrU2VydmVyJykpew0KLyoNCiAqIFNBUCBVSSBkZXZlbG9wbWVudCB0b29sa2l0IGZvciBIVE1MNSAoU0FQVUk1L09wZW5VSTUpDQogKiAoYykgQ29weXJpZ2h0IDIwMDktMjAxNCBTQVAgU0Ugb3IgYW4gU0FQIGFmZmlsaWF0ZSBjb21wYW55LiANCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgLSBzZWUgTElDRU5TRS50eHQuDQogKi8NCmpRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUudXRpbC5Nb2NrU2VydmVyJyk7alF1ZXJ5LnNhcC5yZXF1aXJlKCdzYXAudWkudGhpcmRwYXJ0eS5zaW5vbicpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL3V0aWwvTW9ja1NlcnZlciIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ3NhcC91aS9EZXZpY2UnLCdzYXAvdWkvYmFzZS9NYW5hZ2VkT2JqZWN0Jywnc2FwL3VpL3RoaXJkcGFydHkvc2lub24nXSxmdW5jdGlvbihxLEQsTSxkKXsidXNlIHN0cmljdCI7aWYoISFELmJyb3dzZXIuaW50ZXJuZXRfZXhwbG9yZXIpe3Euc2FwLnJlcXVpcmUoInNhcC51aS50aGlyZHBhcnR5LnNpbm9uLWllIil9dmFyIGY9TS5leHRlbmQoInNhcC51aS5jb3JlLnV0aWwuTW9ja1NlcnZlciIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKGkscyxTKXtNLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtmLl9hU2VydmVycy5wdXNoKHRoaXMpfSxtZXRhZGF0YTp7cHJvcGVydGllczp7cm9vdFVyaToic3RyaW5nIixyZXF1ZXN0czp7dHlwZToib2JqZWN0W10iLGRlZmF1bHRWYWx1ZTpbXX19fSxfb1NlcnZlcjpudWxsLF9hRmlsdGVyOm51bGwsX29Nb2NrZGF0YTpudWxsLF9vTWV0YWRhdGE6bnVsbCxfc01ldGFkYXRhVXJsOm51bGwsX3NNb2NrZGF0YUJhc2VVcmw6bnVsbCxfbUVudGl0eVNldHM6bnVsbH0pO2YucHJvdG90eXBlLnN0YXJ0PWZ1bmN0aW9uKCl7dGhpcy5fb1NlcnZlcj1mLl9nZXRJbnN0YW5jZSgpO3RoaXMuX2FGaWx0ZXJzPVtdO3ZhciByPXRoaXMuZ2V0UmVxdWVzdHMoKTt2YXIgbD1yLmxlbmd0aDtmb3IodmFyIGk9MDtpPGw7aSsrKXt2YXIgUj1yW2ldO3RoaXMuX2FkZFJlcXVlc3RIYW5kbGVyKFIubWV0aG9kLFIucGF0aCxSLnJlc3BvbnNlKX19O2YucHJvdG90eXBlLnN0b3A9ZnVuY3Rpb24oKXtpZih0aGlzLmlzU3RhcnRlZCgpKXt0aGlzLl9yZW1vdmVBbGxSZXF1ZXN0SGFuZGxlcnMoKTt0aGlzLl9yZW1vdmVBbGxGaWx0ZXJzKCk7dGhpcy5fb1NlcnZlcj1udWxsfX07Zi5wcm90b3R5cGUuaXNTdGFydGVkPWZ1bmN0aW9uKCl7cmV0dXJuISF0aGlzLl9vU2VydmVyfTtmLnByb3RvdHlwZS5fYXBwbHlRdWVyeU9uQ29sbGVjdGlvbj1mdW5jdGlvbihGLFEsZSl7dmFyIGE9US5zcGxpdCgnPScpO3ZhciBvPWFbMV07aWYobz09PSIiKXJldHVybjtpZihvLmxhc3RJbmRleE9mKCcsJyk9PT1vLmxlbmd0aCl7cS5zYXAubG9nLmVycm9yKCJUaGUgVVJJIGlzIHZpb2xhdGluZyB0aGUgY29uc3RydWN0aW9uIHJ1bGVzIGRlZmluZWQgaW4gdGhlIERhdGEgU2VydmljZXMgc3BlY2lmaWNhdGlvbiEiKTt0aHJvdyBuZXcgRXJyb3IoIjQwMCIpfXN3aXRjaChhWzBdKXtjYXNlIiR0b3AiOmlmKCEobmV3IFJlZ0V4cCgvXlxkKyQvKS50ZXN0KG8pKSl7cS5zYXAubG9nLmVycm9yKCJJbnZhbGlkIHN5c3RlbSBxdWVyeSBvcHRpb25zIHZhbHVlISIpO3Rocm93IG5ldyBFcnJvcigiNDAwIil9Ri5yZXN1bHRzPUYucmVzdWx0cy5zbGljZSgwLG8pO2JyZWFrO2Nhc2UiJHNraXAiOmlmKCEobmV3IFJlZ0V4cCgvXlxkKyQvKS50ZXN0KG8pKSl7cS5zYXAubG9nLmVycm9yKCJJbnZhbGlkIHN5c3RlbSBxdWVyeSBvcHRpb25zIHZhbHVlISIpO3Rocm93IG5ldyBFcnJvcigiNDAwIil9Ri5yZXN1bHRzPUYucmVzdWx0cy5zbGljZShvLEYucmVzdWx0cy5sZW5ndGgpO2JyZWFrO2Nhc2UiJG9yZGVyYnkiOkYucmVzdWx0cz10aGlzLl9nZXRPZGF0YVF1ZXJ5T3JkZXJieShGLnJlc3VsdHMsbyk7YnJlYWs7Y2FzZSIkZmlsdGVyIjpGLnJlc3VsdHM9dGhpcy5fcmVjdXJzaXZlT2RhdGFRdWVyeUZpbHRlcihGLnJlc3VsdHMsbyk7YnJlYWs7Y2FzZSIkc2VsZWN0IjpGLnJlc3VsdHM9dGhpcy5fZ2V0T2RhdGFRdWVyeVNlbGVjdChGLnJlc3VsdHMsbyk7YnJlYWs7Y2FzZSIkaW5saW5lY291bnQiOnZhciBjPXRoaXMuX2dldE9kYXRhSW5saW5lQ291bnQoRi5yZXN1bHRzLG8pO2lmKGMpe0YuX19jb3VudD1jfWJyZWFrO2Nhc2UiJGV4cGFuZCI6Ri5yZXN1bHRzPXRoaXMuX2dldE9kYXRhUXVlcnlFeHBhbmQoRi5yZXN1bHRzLG8sZSk7YnJlYWs7Y2FzZSIkZm9ybWF0IjpGLnJlc3VsdHM9dGhpcy5fZ2V0T2RhdGFRdWVyeUZvcm1hdChGLnJlc3VsdHMsbyk7YnJlYWs7ZGVmYXVsdDpxLnNhcC5sb2cuZXJyb3IoIkludmFsaWQgc3lzdGVtIHF1ZXJ5IG9wdGlvbnMgdmFsdWUhIik7dGhyb3cgbmV3IEVycm9yKCI0MDAiKX19O2YucHJvdG90eXBlLl9hcHBseVF1ZXJ5T25FbnRyeT1mdW5jdGlvbihlLFEsRSl7dmFyIGE9US5zcGxpdCgnPScpO3ZhciBvPWFbMV07aWYobz09PSIiKXJldHVybjtpZihvLmxhc3RJbmRleE9mKCcsJyk9PT1vLmxlbmd0aCl7cS5zYXAubG9nLmVycm9yKCJUaGUgVVJJIGlzIHZpb2xhdGluZyB0aGUgY29uc3RydWN0aW9uIHJ1bGVzIGRlZmluZWQgaW4gdGhlIERhdGEgU2VydmljZXMgc3BlY2lmaWNhdGlvbiEiKTt0aHJvdyBuZXcgRXJyb3IoIjQwMCIpfXN3aXRjaChhWzBdKXtjYXNlIiRmaWx0ZXIiOnJldHVybiB0aGlzLl9yZWN1cnNpdmVPZGF0YVF1ZXJ5RmlsdGVyKFtlXSxvKVswXTtjYXNlIiRzZWxlY3QiOnJldHVybiB0aGlzLl9nZXRPZGF0YVF1ZXJ5U2VsZWN0KFtlXSxvKVswXTtjYXNlIiRleHBhbmQiOnJldHVybiB0aGlzLl9nZXRPZGF0YVF1ZXJ5RXhwYW5kKFtlXSxvLEUpWzBdO2Nhc2UiJGZvcm1hdCI6cmV0dXJuIHRoaXMuX2dldE9kYXRhUXVlcnlGb3JtYXQoW2VdLG8pO2RlZmF1bHQ6cS5zYXAubG9nLmVycm9yKCJJbnZhbGlkIHN5c3RlbSBxdWVyeSBvcHRpb25zIHZhbHVlISIpO3Rocm93IG5ldyBFcnJvcigiNDAwIil9fTtmLnByb3RvdHlwZS5fZ2V0T2RhdGFRdWVyeU9yZGVyYnk9ZnVuY3Rpb24oYyxvKXt2YXIgcD1vLnNwbGl0KCcsJyk7dmFyIHQ9dGhpcztxLmVhY2gocCxmdW5jdGlvbihpLFApe3BbaV09dC5fdHJpbShQKX0pO3ZhciBDPWZ1bmN0aW9uIGNvbXBhcmUoYSxiKXtmb3IodmFyIGk9MDtpPHAubGVuZ3RoO2krKyl7dmFyIHM9cFtpXS5zcGxpdCgnICcpO3ZhciBTPTE7aWYocy5sZW5ndGg+MSl7c3dpdGNoKHNbMV0pe2Nhc2UnYXNjJzpTPTE7YnJlYWs7Y2FzZSdkZXNjJzpTPS0xO2JyZWFrO2RlZmF1bHQ6cS5zYXAubG9nLmVycm9yKCJJbnZhbGlkIHNvcnRvcmRlciAnIitzWzFdKyInIGRldGVjdGVkISIpO3Rocm93IG5ldyBFcnJvcigiNDAwIil9fXZhciBQLGU7dmFyIGg9c1swXS5pbmRleE9mKCIvIik7aWYoaCE9PS0xKXtQPXNbMF0uc3Vic3RyaW5nKGgrMSk7ZT1zWzBdLnN1YnN0cmluZygwLGgpO2lmKCFhW2VdLmhhc093blByb3BlcnR5KFApKXtxLnNhcC5sb2cuZXJyb3IoIlByb3BlcnR5ICIrUCsiIG5vdCBmb3VuZCEiKTt0aHJvdyBuZXcgRXJyb3IoIjQwMCIpfWlmKGFbZV1bUF08YltlXVtQXSlyZXR1cm4tMSpTO2lmKGFbZV1bUF0+YltlXVtQXSlyZXR1cm4gMSpTfWVsc2V7UD1zWzBdO2lmKCFhLmhhc093blByb3BlcnR5KFApKXtxLnNhcC5sb2cuZXJyb3IoIlByb3BlcnR5ICIrUCsiIG5vdCBmb3VuZCEiKTt0aHJvdyBuZXcgRXJyb3IoIjQwMCIpfWlmKGFbUF08YltQXSlyZXR1cm4tMSpTO2lmKGFbUF0+YltQXSlyZXR1cm4gMSpTfX1yZXR1cm4gMH07cmV0dXJuIGMuc29ydChDKX07Zi5wcm90b3R5cGUuX2FycmF5VW5pcXVlPWZ1bmN0aW9uKGIpe3ZhciBhPWIuY29uY2F0KCk7Zm9yKHZhciBpPTA7aTxhLmxlbmd0aDsrK2kpe2Zvcih2YXIgaj1pKzE7ajxhLmxlbmd0aDsrK2ope2lmKGFbaV09PT1hW2pdKWEuc3BsaWNlKGotLSwxKX19cmV0dXJuIGF9O2YucHJvdG90eXBlLl9nZXRCcmFja2V0SW5kaWNlcz1mdW5jdGlvbihzKXt2YXIgUz1bXTt2YXIgcj1mYWxzZTt2YXIgaSxlPTA7Zm9yKHZhciBjPTA7YzxzLmxlbmd0aDtjKyspe2lmKHNbY109PT0nKCcpe2lmKC9bc3Vic3RyaW5nb2Z8ZW5kc3dpdGh8c3RhcnRzd2l0aF0kLy50ZXN0KHMuc3Vic3RyaW5nKDAsYykpKXtyPXRydWV9ZWxzZXtTLnB1c2goc1tjXSk7aWYoaT09PXVuZGVmaW5lZCl7aT1jfX19ZWxzZSBpZihzW2NdPT09JyknKXtpZighcil7Uy5wb3AoKTtlPWM7aWYoUy5sZW5ndGg9PT0wKXJldHVybntzdGFydDppLGVuZDplfX1lbHNle3I9ZmFsc2V9fX1yZXR1cm57c3RhcnQ6aSxlbmQ6ZX19O2YucHJvdG90eXBlLl9yZWN1cnNpdmVPZGF0YVF1ZXJ5RmlsdGVyPWZ1bmN0aW9uKGEsbyl7dmFyIEk9dGhpcy5fZ2V0QnJhY2tldEluZGljZXMobyk7aWYoSS5zdGFydD09PTAmJkkuZW5kPT09by5sZW5ndGgtMSl7bz10aGlzLl90cmltKG8uc3Vic3RyaW5nKEkuc3RhcnQrMSxJLmVuZCkpO3JldHVybiB0aGlzLl9yZWN1cnNpdmVPZGF0YVF1ZXJ5RmlsdGVyKGEsbyl9dmFyIHI9LyhbXnN1YnN0cmluZ29mfGVuZHN3aXRofHN0YXJ0c3dpdGhdfF4pXCgoLiopXCkvO2lmKHIudGVzdChvKSl7dmFyIGI9by5zdWJzdHJpbmcoSS5zdGFydCxJLmVuZCsxKTt2YXIgYz1uZXcgUmVnRXhwKCIoLiopICsob3J8YW5kKSArKCIrdGhpcy5fdHJpbSh0aGlzLl9lc2NhcGVTdHJpbmdGb3JSZWdFeHAoYikpKyIuKikiKTtpZihJLnN0YXJ0PT09MCl7Yz1uZXcgUmVnRXhwKCIoIit0aGlzLl90cmltKHRoaXMuX2VzY2FwZVN0cmluZ0ZvclJlZ0V4cChiKSkrIikgKyhvcnxhbmQpICsoLiopIil9dmFyIGU9Yy5leGVjKG8pO3ZhciBFPWVbMV07dmFyIE89ZVsyXTt2YXIgcz1lWzNdO3ZhciBTPXRoaXMuX3JlY3Vyc2l2ZU9kYXRhUXVlcnlGaWx0ZXIoYSxFKTt2YXIgaCxwO2lmKE89PT0ib3IiKXtoPXRoaXMuX3JlY3Vyc2l2ZU9kYXRhUXVlcnlGaWx0ZXIoYSxzKTtyZXR1cm4gdGhpcy5fYXJyYXlVbmlxdWUoUy5jb25jYXQoaCkpfWlmKE89PT0iYW5kIil7cmV0dXJuIHRoaXMuX3JlY3Vyc2l2ZU9kYXRhUXVlcnlGaWx0ZXIoUyxzKX19ZWxzZXtwPW8uc3BsaXQoLyArYW5kIHwgb3IgKy8pO2lmKHAubGVuZ3RoPT09MSl7aWYoby5tYXRjaCgvICthbmQgfCBvciArLykpe3Rocm93IG5ldyBFcnJvcigiNDAwIil9cmV0dXJuIHRoaXMuX2dldE9kYXRhUXVlcnlGaWx0ZXIoYSx0aGlzLl90cmltKG8pKX12YXIgUj10aGlzLl9yZWN1cnNpdmVPZGF0YVF1ZXJ5RmlsdGVyKGEscFswXSk7dmFyIGo7Zm9yKHZhciBpPTE7aTxwLmxlbmd0aDtpKyspe2o9bmV3IFJlZ0V4cCh0aGlzLl90cmltKHRoaXMuX2VzY2FwZVN0cmluZ0ZvclJlZ0V4cChwW2ktMV0pKSsiICsoYW5kfG9yKSArIit0aGlzLl90cmltKHRoaXMuX2VzY2FwZVN0cmluZ0ZvclJlZ0V4cChwW2ldKSkpO089ai5leGVjKG8pWzFdO2lmKE89PT0ib3IiKXtoPXRoaXMuX3JlY3Vyc2l2ZU9kYXRhUXVlcnlGaWx0ZXIoYSxwW2ldKTtSPXRoaXMuX2FycmF5VW5pcXVlKFIuY29uY2F0KGgpKX1pZihPPT09ImFuZCIpe1I9dGhpcy5fcmVjdXJzaXZlT2RhdGFRdWVyeUZpbHRlcihSLHBbaV0pfX1yZXR1cm4gUn19O2YucHJvdG90eXBlLl9nZXRPZGF0YVF1ZXJ5RmlsdGVyPWZ1bmN0aW9uKGEsbyl7aWYoYS5sZW5ndGg9PT0wKXJldHVybiBhO3ZhciByPW5ldyBSZWdFeHAoIiguKikgKGVxfG5lfGd0fGx0fGxlfGdlKSAoLiopIik7dmFyIGI9bmV3IFJlZ0V4cCgiKGVuZHN3aXRofHN0YXJ0c3dpdGh8c3Vic3RyaW5nb2YpXFwoKC4qKSIpO3ZhciBPPW51bGw7dmFyIGM9ci5leGVjKG8pO2lmKGMpe089Y1syXX1lbHNle2M9Yi5leGVjKG8pO2lmKGMpe089Y1sxXX1lbHNle3Rocm93IG5ldyBFcnJvcigiNDAwIil9fXZhciB0PXRoaXM7dmFyIEc9ZnVuY3Rpb24odixWLHAscyl7dmFyIGMsZTtpZighdil7Yz1yLmV4ZWMobyk7ZT10Ll90cmltKGNbVisxXSk7dmFyIFA9dC5fdHJpbShjW3ArMV0pfWVsc2V7dmFyIGg9bmV3IFJlZ0V4cCgiKHN1YnN0cmluZ29mfHN0YXJ0c3dpdGh8ZW5kc3dpdGgpXFwoKFteLFxcKV0qKSwoLiopXFwpIik7Yz1oLmV4ZWMobyk7ZT10Ll90cmltKGNbVisyXSk7UD10Ll90cmltKGNbcCsyXSl9aWYoZS5pbmRleE9mKCJkYXRldGltZSIpPT09MCl7ZT10Ll9nZXRKc29uRGF0ZShlKX1lbHNlIGlmKGU9PT0idHJ1ZSIpe2U9dHJ1ZX1lbHNlIGlmKGU9PT0iZmFsc2UiKXtlPWZhbHNlfWVsc2UgaWYodC5faXNWYWxpZE51bWJlcihlKSl7ZT1wYXJzZUZsb2F0KGUpfWVsc2UgaWYoKGUuY2hhckF0KDApPT09IiciKSYmKGUuY2hhckF0KGUubGVuZ3RoLTEpPT09IiciKSl7ZT1lLnN1YnN0cigxLGUubGVuZ3RoLTIpfXZhciBDPVAuaW5kZXhPZigiLyIpO2lmKEMhPT0tMSl7dmFyIGk9UC5zdWJzdHJpbmcoQysxKTt2YXIgaj1QLnN1YnN0cmluZygwLEMpO2lmKCFhWzBdW2pdLmhhc093blByb3BlcnR5KGkpKXtxLnNhcC5sb2cuZXJyb3IoIlByb3BlcnR5ICIraSsiIG5vdCBmb3VuZCEiKTt0aHJvdyBuZXcgRXJyb3IoIjQwMCIpfXJldHVybiBzKFAsZSxqLGkpfWVsc2V7aWYoIWFbMF0uaGFzT3duUHJvcGVydHkoUCkpe3Euc2FwLmxvZy5lcnJvcigiUHJvcGVydHkgIitQKyIgbm90IGZvdW5kIGZvciAiK2FbMF0uX19tZXRhZGF0YS50eXBlKyIhIik7dGhyb3cgbmV3IEVycm9yKCI0MDAiKX1yZXR1cm4gcyhQLGUpfX07c3dpdGNoKE8pe2Nhc2Uic3Vic3RyaW5nb2YiOnJldHVybiBHKHRydWUsMCwxLGZ1bmN0aW9uKHAsdixDLFApe3JldHVybiBxLmdyZXAoYSxmdW5jdGlvbihtKXtpZihDJiZQKXtyZXR1cm4obVtDXVtQXS5pbmRleE9mKHYpIT09LTEpfXJldHVybihtW3BdLmluZGV4T2YodikhPT0tMSl9KX0pO2Nhc2Uic3RhcnRzd2l0aCI6cmV0dXJuIEcodHJ1ZSwxLDAsZnVuY3Rpb24ocCx2LEMsUCl7cmV0dXJuIHEuZ3JlcChhLGZ1bmN0aW9uKG0pe2lmKEMmJlApe3JldHVybihtW0NdW1BdLmluZGV4T2Yodik9PT0wKX1yZXR1cm4obVtwXS5pbmRleE9mKHYpPT09MCl9KX0pO2Nhc2UiZW5kc3dpdGgiOnJldHVybiBHKHRydWUsMSwwLGZ1bmN0aW9uKHAsdixDLFApe3JldHVybiBxLmdyZXAoYSxmdW5jdGlvbihtKXtpZihDJiZQKXtyZXR1cm4obVtDXVtQXS5pbmRleE9mKHYpPT09KG1bQ11bUF0ubGVuZ3RoLXYubGVuZ3RoKSl9cmV0dXJuKG1bcF0uaW5kZXhPZih2KT09PShtW3BdLmxlbmd0aC12Lmxlbmd0aCkpfSl9KTtjYXNlImVxIjpyZXR1cm4gRyhmYWxzZSwyLDAsZnVuY3Rpb24ocCx2LEMsUCl7cmV0dXJuIHEuZ3JlcChhLGZ1bmN0aW9uKG0pe2lmKEMmJlApe3JldHVybihtW0NdW1BdPT09dil9cmV0dXJuKG1bcF09PT12KX0pfSk7Y2FzZSJuZSI6cmV0dXJuIEcoZmFsc2UsMiwwLGZ1bmN0aW9uKHAsdixDLFApe3JldHVybiBxLmdyZXAoYSxmdW5jdGlvbihtKXtpZihDJiZQKXtyZXR1cm4obVtDXVtQXSE9PXYpfXJldHVybihtW3BdIT09dil9KX0pO2Nhc2UiZ3QiOnJldHVybiBHKGZhbHNlLDIsMCxmdW5jdGlvbihwLHYsQyxQKXtyZXR1cm4gcS5ncmVwKGEsZnVuY3Rpb24obSl7aWYoQyYmUCl7cmV0dXJuKG1bQ11bUF0+dil9cmV0dXJuKG1bcF0+dil9KX0pO2Nhc2UibHQiOnJldHVybiBHKGZhbHNlLDIsMCxmdW5jdGlvbihwLHYsQyxQKXtyZXR1cm4gcS5ncmVwKGEsZnVuY3Rpb24obSl7aWYoQyYmUCl7cmV0dXJuKG1bQ11bUF08dil9cmV0dXJuKG1bcF08dil9KX0pO2Nhc2UiZ2UiOnJldHVybiBHKGZhbHNlLDIsMCxmdW5jdGlvbihwLHYsQyxQKXtyZXR1cm4gcS5ncmVwKGEsZnVuY3Rpb24obSl7aWYoQyYmUCl7cmV0dXJuKG1bQ11bUF0+PXYpfXJldHVybihtW3BdPj12KX0pfSk7Y2FzZSJsZSI6cmV0dXJuIEcoZmFsc2UsMiwwLGZ1bmN0aW9uKHAsdixDLFApe3JldHVybiBxLmdyZXAoYSxmdW5jdGlvbihtKXtpZihDJiZQKXtyZXR1cm4obVtDXVtQXTw9dil9cmV0dXJuKG1bcF08PXYpfSl9KTtkZWZhdWx0OnEuc2FwLmxvZy5lcnJvcigiSW52YWxpZCAkZmlsdGVyIG9wZXJhdG9yICciK08rIichIik7dGhyb3cgbmV3IEVycm9yKCI0MDAiKX19O2YucHJvdG90eXBlLl9nZXRPZGF0YVF1ZXJ5U2VsZWN0PWZ1bmN0aW9uKGEsbyl7dmFyIHQ9dGhpczt2YXIgcCxjO3ZhciBQPW8uc3BsaXQoJywnKTt2YXIgcz1bXTt2YXIgYjt2YXIgQz1mdW5jdGlvbihQLGUsYil7aWYoZVsiX19tZXRhZGF0YSJdKXtiWyJfX21ldGFkYXRhIl09ZVsiX19tZXRhZGF0YSJdfXEuZWFjaChQLGZ1bmN0aW9uKGksaCl7dmFyIGo9aC5pbmRleE9mKCIvIik7aWYoaiE9PS0xKXtwPWguc3Vic3RyaW5nKGorMSk7Yz1oLnN1YnN0cmluZygwLGopO2lmKCFiW2NdKXtiW2NdPXt9fWJbY109QyhbcF0sZVtjXSxiW2NdKX1lbHNle2lmKGUmJiFlLmhhc093blByb3BlcnR5KGgpKXtxLnNhcC5sb2cuZXJyb3IoIlJlc291cmNlIG5vdCBmb3VuZCBmb3IgdGhlIHNlbGVjdGlvbiBjbGF1c2UgJyIraCsiJyEiKTt0aHJvdyBuZXcgRXJyb3IoIjQwNCIpfWJbaF09ZVtoXX19KTtyZXR1cm4gYn07aWYocS5pbkFycmF5KCIqIixQKSE9PS0xKXtyZXR1cm4gYX1xLmVhY2goUCxmdW5jdGlvbihpLGUpe1BbaV09dC5fdHJpbShlKX0pO3EuZWFjaChhLGZ1bmN0aW9uKGksZSl7Yj17fTtzLnB1c2goQyhQLGUsYikpfSk7cmV0dXJuIHN9O2YucHJvdG90eXBlLl9nZXRPZGF0YUlubGluZUNvdW50PWZ1bmN0aW9uKGEsbyl7dmFyIHA9by5zcGxpdCgnLCcpO2lmKHAubGVuZ3RoIT09MXx8KHBbMF0hPT0nbm9uZScmJnBbMF0hPT0nYWxscGFnZXMnKSl7cS5zYXAubG9nLmVycm9yKCJJbnZhbGlkIHN5c3RlbSBxdWVyeSBvcHRpb25zIHZhbHVlISIpO3Rocm93IG5ldyBFcnJvcigiNDAwIil9aWYocFswXT09PSdub25lJyl7cmV0dXJufXJldHVybiBhLmxlbmd0aH07Zi5wcm90b3R5cGUuX2dldE9kYXRhUXVlcnlGb3JtYXQ9ZnVuY3Rpb24oYSxvKXtpZihvIT09J2pzb24nKXtxLnNhcC5sb2cuZXJyb3IoIlVuc3VwcG9ydGVkIGZvcm1hdCB2YWx1ZS4gT25seSBqc29uIGZvcm1hdCBpcyBzdXBwb3J0ZWQhIik7dGhyb3cgbmV3IEVycm9yKCI0MDAiKX1yZXR1cm4gYX07Zi5wcm90b3R5cGUuX2dldE9kYXRhUXVlcnlFeHBhbmQ9ZnVuY3Rpb24oYSxvLGUpe3ZhciB0PXRoaXM7dmFyIG49by5zcGxpdCgnLCcpO3EuZWFjaChuLGZ1bmN0aW9uKGkscCl7bltpXT10Ll90cmltKHApfSk7dmFyIEU9dC5fbUVudGl0eVNldHNbZV0ubmF2cHJvcHM7cS5lYWNoKGEsZnVuY3Rpb24oaSxyKXtxLmVhY2gobixmdW5jdGlvbihpLE4pe3ZhciBiPU4uc3BsaXQoIi8iKTt2YXIgcz1iWzBdO2lmKCFyW3NdKXt0aHJvdyBuZXcgRXJyb3IoIjQwNCIpfXZhciBjPXJbc10ucmVzdWx0c3x8cltzXTtpZighY3x8ISFjLl9fZGVmZXJyZWQpe2M9cS5leHRlbmQodHJ1ZSxbXSx0Ll9yZXNvbHZlTmF2aWdhdGlvbihlLHIscykpfWlmKCEhYyYmYi5sZW5ndGg+MSl7dmFyIFI9Yi5zcGxpY2UoMSxiLmxlbmd0aCkuam9pbigiLyIpO2M9dC5fZ2V0T2RhdGFRdWVyeUV4cGFuZChjLFIsRVtzXS50by5lbnRpdHlTZXQpfWlmKEVbc10udG8ubXVsdGlwbGljaXR5PT09IioiKXtyW3NdPXtyZXN1bHRzOmN9fWVsc2V7cltzXT1jWzBdP2NbMF06e319fSl9KTtyZXR1cm4gYX07Zi5wcm90b3R5cGUuX3JlZnJlc2hEYXRhPWZ1bmN0aW9uKCl7dGhpcy5fbG9hZE1ldGFkYXRhKHRoaXMuX3NNZXRhZGF0YVVybCk7dGhpcy5fbUVudGl0eVNldHM9dGhpcy5fZmluZEVudGl0eVNldHModGhpcy5fb01ldGFkYXRhKTtpZighdGhpcy5fc01vY2tkYXRhQmFzZVVybCl7dGhpcy5fZ2VuZXJhdGVNb2NrZGF0YSh0aGlzLl9tRW50aXR5U2V0cyx0aGlzLl9vTWV0YWRhdGEpfWVsc2V7aWYoIXEuc2FwLmVuZHNXaXRoKHRoaXMuX3NNb2NrZGF0YUJhc2VVcmwsIi8iKSYmIXEuc2FwLmVuZHNXaXRoKHRoaXMuX3NNb2NrZGF0YUJhc2VVcmwsIi5qc29uIikpe3RoaXMuX3NNb2NrZGF0YUJhc2VVcmwrPSIvIn10aGlzLl9sb2FkTW9ja2RhdGEodGhpcy5fbUVudGl0eVNldHMsdGhpcy5fc01vY2tkYXRhQmFzZVVybCl9fTtmLnByb3RvdHlwZS5fZ2V0Um9vdFVyaT1mdW5jdGlvbigpe3ZhciB1PXRoaXMuZ2V0Um9vdFVyaSgpO3U9dSYmLyhbXj8jXSopKFs/I10uKik/Ly5leGVjKHUpWzFdO3JldHVybiB1fTtmLnByb3RvdHlwZS5fbG9hZE1ldGFkYXRhPWZ1bmN0aW9uKG0pe3ZhciBvPXEuc2FwLnNqYXgoe3VybDptLGRhdGFUeXBlOiJ4bWwifSkuZGF0YTt0aGlzLl9vTWV0YWRhdGE9bztyZXR1cm4gb307Zi5wcm90b3R5cGUuX2ZpbmRFbnRpdHlTZXRzPWZ1bmN0aW9uKG0pe3ZhciBlPXt9O3ZhciBwPXEobSkuZmluZCgiUHJpbmNpcGFsIik7dmFyIG89cShtKS5maW5kKCJEZXBlbmRlbnQiKTtxKG0pLmZpbmQoIkVudGl0eVNldCIpLmVhY2goZnVuY3Rpb24oaSxFKXt2YXIgJD1xKEUpO3ZhciBhPS8oKC4qKVwuKT8oLiopLy5leGVjKCQuYXR0cigiRW50aXR5VHlwZSIpKTtlWyQuYXR0cigiTmFtZSIpXT17Im5hbWUiOiQuYXR0cigiTmFtZSIpLCJzY2hlbWEiOmFbMl0sInR5cGUiOmFbM10sImtleXMiOltdLCJrZXlzVHlwZSI6e30sIm5hdnByb3BzIjp7fX19KTt2YXIgcj1mdW5jdGlvbihSLEYpe3ZhciBhPXEobSkuZmluZCgiRW5kW1JvbGU9IitSKyJdIik7dmFyIEU7dmFyIHM7cS5lYWNoKGEsZnVuY3Rpb24oaSx2KXtpZighIXEodikuYXR0cigiRW50aXR5U2V0Iikpe0U9cSh2KS5hdHRyKCJFbnRpdHlTZXQiKX1lbHNle3M9cSh2KS5hdHRyKCJNdWx0aXBsaWNpdHkiKX19KTt2YXIgUD1bXTt2YXIgYj0oRik/cDpvO3EoYikuZWFjaChmdW5jdGlvbihpLGMpe2lmKFI9PT0ocShjKS5hdHRyKCJSb2xlIikpKXtxKGMpLmNoaWxkcmVuKCJQcm9wZXJ0eVJlZiIpLmVhY2goZnVuY3Rpb24oaSxoKXtQLnB1c2gocShoKS5hdHRyKCJOYW1lIikpfSk7cmV0dXJuIGZhbHNlfX0pO3JldHVybnsicm9sZSI6UiwiZW50aXR5U2V0IjpFLCJwcm9wUmVmIjpQLCJtdWx0aXBsaWNpdHkiOnN9fTtxLmVhY2goZSxmdW5jdGlvbihFLGEpe3ZhciAkPXEobSkuZmluZCgiRW50aXR5VHlwZVtOYW1lPSIrYS50eXBlKyJdIik7dmFyIGs9cSgkKS5maW5kKCJQcm9wZXJ0eVJlZiIpO3EuZWFjaChrLGZ1bmN0aW9uKGksUCl7dmFyIEs9cShQKS5hdHRyKCJOYW1lIik7YS5rZXlzLnB1c2goSyk7YS5rZXlzVHlwZVtLXT1xKCQpLmZpbmQoIlByb3BlcnR5W05hbWU9IitLKyJdIikuYXR0cigiVHlwZSIpfSk7dmFyIG49cShtKS5maW5kKCJFbnRpdHlUeXBlW05hbWU9IithLnR5cGUrIl0gTmF2aWdhdGlvblByb3BlcnR5Iik7cS5lYWNoKG4sZnVuY3Rpb24oaSxOKXt2YXIgYj1xKE4pO2EubmF2cHJvcHNbYi5hdHRyKCJOYW1lIildPXsibmFtZSI6Yi5hdHRyKCJOYW1lIiksImZyb20iOnIoYi5hdHRyKCJGcm9tUm9sZSIpLHRydWUpLCJ0byI6cihiLmF0dHIoIlRvUm9sZSIpLGZhbHNlKX19KX0pO3JldHVybiBlfTtmLnByb3RvdHlwZS5fZmluZEVudGl0eVR5cGVzPWZ1bmN0aW9uKG0pe3ZhciBlPXt9O3EobSkuZmluZCgiRW50aXR5VHlwZSIpLmVhY2goZnVuY3Rpb24oaSxFKXt2YXIgJD1xKEUpO2VbJC5hdHRyKCJOYW1lIildPXsibmFtZSI6JC5hdHRyKCJOYW1lIiksInByb3BlcnRpZXMiOltdLCJrZXlzIjpbXX07JC5maW5kKCJQcm9wZXJ0eSIpLmVhY2goZnVuY3Rpb24oaSxwKXt2YXIgUD1xKHApO3ZhciB0PVAuYXR0cigiVHlwZSIpO2VbJC5hdHRyKCJOYW1lIildLnByb3BlcnRpZXMucHVzaCh7InNjaGVtYSI6dC5zdWJzdHJpbmcoMCx0Lmxhc3RJbmRleE9mKCIuIikpLCJ0eXBlIjp0LnN1YnN0cmluZyh0Lmxhc3RJbmRleE9mKCIuIikrMSksIm5hbWUiOlAuYXR0cigiTmFtZSIpLCJwcmVjaXNpb24iOlAuYXR0cigiUHJlY2lzaW9uIiksInNjYWxlIjpQLmF0dHIoIlNjYWxlIil9KX0pOyQuZmluZCgiUHJvcGVydHlSZWYiKS5lYWNoKGZ1bmN0aW9uKGksayl7dmFyIEs9cShrKTt2YXIgcD1LLmF0dHIoIk5hbWUiKTtlWyQuYXR0cigiTmFtZSIpXS5rZXlzLnB1c2gocCl9KX0pO3JldHVybiBlfTtmLnByb3RvdHlwZS5fZmluZENvbXBsZXhUeXBlcz1mdW5jdGlvbihtKXt2YXIgYz17fTtxKG0pLmZpbmQoIkNvbXBsZXhUeXBlIikuZWFjaChmdW5jdGlvbihpLEMpe3ZhciAkPXEoQyk7Y1skLmF0dHIoIk5hbWUiKV09eyJuYW1lIjokLmF0dHIoIk5hbWUiKSwicHJvcGVydGllcyI6W119OyQuZmluZCgiUHJvcGVydHkiKS5lYWNoKGZ1bmN0aW9uKGkscCl7dmFyIFA9cShwKTt2YXIgdD1QLmF0dHIoIlR5cGUiKTtjWyQuYXR0cigiTmFtZSIpXS5wcm9wZXJ0aWVzLnB1c2goeyJzY2hlbWEiOnQuc3Vic3RyaW5nKDAsdC5sYXN0SW5kZXhPZigiLiIpKSwidHlwZSI6dC5zdWJzdHJpbmcodC5sYXN0SW5kZXhPZigiLiIpKzEpLCJuYW1lIjpQLmF0dHIoIk5hbWUiKSwicHJlY2lzaW9uIjpQLmF0dHIoIlByZWNpc2lvbiIpLCJzY2FsZSI6UC5hdHRyKCJTY2FsZSIpfSl9KX0pO3JldHVybiBjfTtmLnByb3RvdHlwZS5fY3JlYXRlS2V5c1N0cmluZz1mdW5jdGlvbihlLEUpe3ZhciB0PXRoaXM7dmFyIGs9IiI7aWYoRSl7cS5lYWNoKGUua2V5cyxmdW5jdGlvbihpLEspe2lmKGspe2srPSIsIn12YXIgbz1FW0tdO2lmKGUua2V5c1R5cGVbS109PT0iRWRtLlN0cmluZyIpe289IiciK28rIicifWVsc2UgaWYoZS5rZXlzVHlwZVtLXT09PSJFZG0uRGF0ZVRpbWUiKXtvPXQuX2dldERhdGVUaW1lKG8pfWVsc2UgaWYoZS5rZXlzVHlwZVtLXT09PSJFZG0uR3VpZCIpe289Imd1aWQnIitvKyInIn1pZihlLmtleXMubGVuZ3RoPT09MSl7ays9bztyZXR1cm4ga31rKz1LKyI9IitvfSl9cmV0dXJuIGt9O2YucHJvdG90eXBlLl9sb2FkTW9ja2RhdGE9ZnVuY3Rpb24oZSxiKXt2YXIgdD10aGlzLEU9e307dGhpcy5fb01vY2tkYXRhPXt9O2lmKHEuc2FwLmVuZHNXaXRoKGIsIi5qc29uIikpe3ZhciByPXEuc2FwLnNqYXgoe3VybDpiLGRhdGFUeXBlOiJqc29uIn0pO2lmKHIuc3VjY2Vzcyl7RT1yLmRhdGF9ZWxzZXtxLnNhcC5sb2cuZXJyb3IoIlRoZSBtb2NrZGF0YSBmb3IgYWxsIHRoZSBlbnRpdHkgdHlwZXMgY291bGQgbm90IGJlIGZvdW5kIGF0IFwiIitiKyJcIiEiKX19ZWxzZXtxLmVhY2goZSxmdW5jdGlvbihzLG8pe2lmKCFFW28udHlwZV0pe3ZhciBhPWIrby50eXBlKyIuanNvbiI7dmFyIHI9cS5zYXAuc2pheCh7dXJsOmEsZGF0YVR5cGU6Impzb24ifSk7aWYoci5zdWNjZXNzKXtpZighIXIuZGF0YS5kKXtpZighIXIuZGF0YS5kLnJlc3VsdHMpe0Vbby50eXBlXT1yLmRhdGEuZC5yZXN1bHRzfWVsc2V7cS5zYXAubG9nLmVycm9yKCJUaGUgbW9ja2RhdGEgZm9ybWF0IGZvciBlbnRpdHkgdHlwZSBcIiIrby50eXBlKyJcIiBpbnZhbGlkIil9fWVsc2V7RVtvLnR5cGVdPXIuZGF0YX19ZWxzZXtpZihyLnN0YXR1cz09PSJwYXJzZXJlcnJvciIpe3Euc2FwLmxvZy5lcnJvcigiVGhlIG1vY2tkYXRhIGZvciBlbnRpdHkgdHlwZSBcIiIrby50eXBlKyJcIiBjb3VsZCBub3QgYmUgbG9hZGVkIGR1ZSB0byBhIHBhcnNpbmcgZXJyb3IhIil9ZWxzZXtxLnNhcC5sb2cuZXJyb3IoIlRoZSBtb2NrZGF0YSBmb3IgZW50aXR5IHR5cGUgXCIiK28udHlwZSsiXCIgY291bGQgbm90IGJlIGZvdW5kIGF0IFwiIitiKyJcIiEiKTtpZighIXQuX2JHZW5lcmF0ZU1pc3NpbmdNb2NrRGF0YSl7dmFyIG09e307bVtvLm5hbWVdPW87RVtvLnR5cGVdPXQuX2dlbmVyYXRlT0RhdGFNb2NrZGF0YUZvckVudGl0eVNldChtLHQuX29NZXRhZGF0YSlbby5uYW1lXX19fX19KX1xLmVhY2goZSxmdW5jdGlvbihzLG8pe3QuX29Nb2NrZGF0YVtzXT1bXTtpZihFW28udHlwZV0pe3EuZWFjaChFW28udHlwZV0sZnVuY3Rpb24oaSxhKXt0Ll9vTW9ja2RhdGFbc10ucHVzaChxLmV4dGVuZCh0cnVlLHt9LGEpKX0pfWlmKHQuX29Nb2NrZGF0YVtzXS5sZW5ndGg+MCl7dC5fZW5oYW5jZVdpdGhNZXRhZGF0YShvLHQuX29Nb2NrZGF0YVtzXSl9fSk7cmV0dXJuIHRoaXMuX29Nb2NrZGF0YX07Zi5wcm90b3R5cGUuX2VuaGFuY2VXaXRoTWV0YWRhdGE9ZnVuY3Rpb24oZSxtKXtpZihtKXt2YXIgdD10aGlzLHI9dGhpcy5fZ2V0Um9vdFVyaSgpLEU9ZSYmZS5uYW1lO3EuZWFjaChtLGZ1bmN0aW9uKGksbyl7by5fX21ldGFkYXRhPXtpZDpyK0UrIigiK3QuX2NyZWF0ZUtleXNTdHJpbmcoZSxvKSsiKSIsdHlwZTplLnNjaGVtYSsiLiIrZS50eXBlLHVyaTpyK0UrIigiK3QuX2NyZWF0ZUtleXNTdHJpbmcoZSxvKSsiKSJ9O3EuZWFjaChlLm5hdnByb3BzLGZ1bmN0aW9uKGssbil7b1trXT17X19kZWZlcnJlZDp7dXJpOnIrRSsiKCIrdC5fY3JlYXRlS2V5c1N0cmluZyhlLG8pKyIpLyIra319fSl9KX19O2YucHJvdG90eXBlLl9pc1JlcXVlc3RlZEtleXNWYWxpZD1mdW5jdGlvbihlLHIpe2lmKHIubGVuZ3RoPT09MSl7dmFyIHM9clswXS5zcGxpdCgnPScpO2lmKHRoaXMuX3RyaW0oc1swXSkhPT1lLmtleXNbMF0pe3I9W2Uua2V5c1swXSsiPSIrclswXV19fWZvcih2YXIgaT0wO2k8ci5sZW5ndGg7aSsrKXt2YXIgaz10aGlzLl90cmltKHJbaV0uc3Vic3RyaW5nKDAscltpXS5pbmRleE9mKCc9JykpKTt2YXIgUj10aGlzLl90cmltKHJbaV0uc3Vic3RyaW5nKHJbaV0uaW5kZXhPZignPScpKzEpKTt2YXIgRj1SLmNoYXJBdCgwKTt2YXIgbD1SLmNoYXJBdChSLmxlbmd0aC0xKTtpZihlLmtleXNUeXBlW2tdPT09IkVkbS5TdHJpbmciKXtpZihGIT09IicifHxsIT09IiciKXtyZXR1cm4gZmFsc2V9fWVsc2UgaWYoZS5rZXlzVHlwZVtrXT09PSJFZG0uRGF0ZVRpbWUiKXtpZihGPT09IicifHxsIT09IiciKXtyZXR1cm4gZmFsc2V9fWVsc2UgaWYoZS5rZXlzVHlwZVtrXT09PSJFZG0uR3VpZCIpe2lmKEY9PT0iJyJ8fGwhPT0iJyIpe3JldHVybiBmYWxzZX19ZWxzZXtpZihGPT09IicifHxsPT09IiciKXtyZXR1cm4gZmFsc2V9fX1yZXR1cm4gdHJ1ZX07Zi5wcm90b3R5cGUuX3BhcnNlS2V5cz1mdW5jdGlvbihrLGUpe3ZhciByPXt9O3ZhciBwPWsuc3BsaXQoIiwiKTt2YXIgSyxzLFA7Zm9yKHZhciBpPTA7aTxwLmxlbmd0aDtpKyspe1A9cFtpXS5zcGxpdCgiPSIpO2lmKFAubGVuZ3RoPT09MSYmZS5rZXlzLmxlbmd0aD09PTEpe0s9ZS5rZXlzWzBdO3M9UFswXX1lbHNle2lmKFAubGVuZ3RoPT09Mil7Sz1QWzBdO3M9UFsxXX19aWYocy5pbmRleE9mKCdcJycpPT09MCl7cltLXT1zLnNsaWNlKDEscy5sZW5ndGgtMSl9ZWxzZXtyW0tdPXN9fXJldHVybiByfTtmLnByb3RvdHlwZS5fZ2VuZXJhdGVQcm9wZXJ0eVZhbHVlPWZ1bmN0aW9uKGssdCxDLGkpe3ZhciBJPWk7aWYoIUkpe0k9TWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKjEwMDAwKSsxMDF9c3dpdGNoKHQpe2Nhc2UiU3RyaW5nIjpyZXR1cm4gaysiICIrSTtjYXNlIkRhdGVUaW1lIjp2YXIgYT1uZXcgRGF0ZSgpO2Euc2V0RnVsbFllYXIoMjAwMCtNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqMjApKTthLnNldERhdGUoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKjMwKSk7YS5zZXRNb250aChNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqMTIpKTthLnNldE1pbGxpc2Vjb25kcygwKTtyZXR1cm4iL0RhdGUoIithLmdldFRpbWUoKSsiKS8iO2Nhc2UiSW50MTYiOmNhc2UiSW50MzIiOmNhc2UiSW50NjQiOnJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqMTAwMDApO2Nhc2UiRGVjaW1hbCI6cmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSoxMDAwMDAwKS8xMDA7Y2FzZSJCb29sZWFuIjpyZXR1cm4gTWF0aC5yYW5kb20oKTwuNTtjYXNlIkJ5dGUiOnJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqMTApO2Nhc2UiRG91YmxlIjpyZXR1cm4gTWF0aC5yYW5kb20oKSoxMDtjYXNlIlNpbmdsZSI6cmV0dXJuIE1hdGgucmFuZG9tKCkqMTAwMDAwMDAwMDtjYXNlIlNCeXRlIjpyZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKjEwKTtjYXNlIlRpbWUiOnJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqMjMpKyI6IitNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqNTkpKyI6IitNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqNTkpO2Nhc2UiR3VpZCI6cmV0dXJuJ3h4eHh4eHh4LXh4eHgtNHh4eC15eHh4LXh4eHh4eHh4eHh4eCcucmVwbGFjZSgvW3h5XS9nLGZ1bmN0aW9uKGMpe3ZhciByPU1hdGgucmFuZG9tKCkqMTZ8MCx2PWM9PT0neCc/cjoociYweDN8MHg4KTtyZXR1cm4gdi50b1N0cmluZygxNil9KTtjYXNlIkJpbmFyeSI6dmFyIG49TWF0aC5mbG9vcigtMjE0NzQ4MzY0OCtNYXRoLnJhbmRvbSgpKjQyOTQ5NjcyOTUpO2Zvcih2YXIgYj0wLGU9bixtPSIiO2I8MzI7YisrLG0rPVN0cmluZyhlPj4+MzEpLGU8PD0xKTtyZXR1cm4gbTtjYXNlIkRhdGVUaW1lT2Zmc2V0IjpkZWZhdWx0OnJldHVybiB0aGlzLl9nZW5lcmF0ZURhdGFGcm9tRW50aXR5KENbdF0sSSl9fTtmLnByb3RvdHlwZS5fY29tcGxldGVLZXk9ZnVuY3Rpb24oZSxrLEUpe2lmKEUpe2Zvcih2YXIgaT0wO2k8ZS5rZXlzLmxlbmd0aDtpKyspe3ZhciBLPWUua2V5c1tpXTtpZihrW0tdKXtpZighRVtLXSl7c3dpdGNoKGUua2V5c1R5cGVbS10pe2Nhc2UiRWRtLkRhdGVUaW1lIjpFW0tdPXRoaXMuX2dldEpzb25EYXRlKGtbS10pO2JyZWFrO2Nhc2UiRWRtLkd1aWQiOkVbS109a1tLXS5zdWJzdHJpbmcoNSxrW0tdLmxlbmd0aC0yKTticmVhaztkZWZhdWx0OkVbS109a1tLXX19fWVsc2V7aWYoIUVbS10pe0VbS109dGhpcy5fZ2VuZXJhdGVQcm9wZXJ0eVZhbHVlKEssZS5rZXlzVHlwZVtLXS5zdWJzdHJpbmcoZS5rZXlzVHlwZVtLXS5sYXN0SW5kZXhPZignLicpKzEpKX19fX19O2YucHJvdG90eXBlLl9nZW5lcmF0ZURhdGFGcm9tRW50aXR5PWZ1bmN0aW9uKGUsSSxjKXt2YXIgRT17fTtpZighZSl7cmV0dXJuIEV9Zm9yKHZhciBpPTA7aTxlLnByb3BlcnRpZXMubGVuZ3RoO2krKyl7dmFyIHA9ZS5wcm9wZXJ0aWVzW2ldO3ZhciBQPSIiO0VbcC5uYW1lXT10aGlzLl9nZW5lcmF0ZVByb3BlcnR5VmFsdWUocC5uYW1lLHAudHlwZSxjLEkpfXJldHVybiBFfTtmLnByb3RvdHlwZS5fZ2VuZXJhdGVEYXRhRnJvbUVudGl0eVNldD1mdW5jdGlvbihlLEUsYyl7dmFyIG89RVtlLnR5cGVdO3ZhciBtPVtdO2Zvcih2YXIgaT0wO2k8MTAwO2krKyl7bS5wdXNoKHRoaXMuX2dlbmVyYXRlRGF0YUZyb21FbnRpdHkobyxpKzEsYykpfXJldHVybiBtfTtmLnByb3RvdHlwZS5fZ2VuZXJhdGVNb2NrZGF0YT1mdW5jdGlvbihlLG0pe3ZhciB0PXRoaXM7dmFyIG89e307cS5lYWNoKGUsZnVuY3Rpb24oRSxhKXt2YXIgYj17fTtiW2EubmFtZV09YTtvW0VdPXQuX2dlbmVyYXRlT0RhdGFNb2NrZGF0YUZvckVudGl0eVNldChiLG0pW0VdfSk7dGhpcy5fb01vY2tkYXRhPW99O2YucHJvdG90eXBlLl9nZW5lcmF0ZU9EYXRhTW9ja2RhdGFGb3JFbnRpdHlTZXQ9ZnVuY3Rpb24oZSxtKXt2YXIgdD10aGlzLHI9dGhpcy5fZ2V0Um9vdFVyaSgpLG89e307dmFyIEU9dGhpcy5fZmluZEVudGl0eVR5cGVzKG0pO3ZhciBjPXRoaXMuX2ZpbmRDb21wbGV4VHlwZXMobSk7cS5lYWNoKGUsZnVuY3Rpb24ocyxhKXtvW3NdPXQuX2dlbmVyYXRlRGF0YUZyb21FbnRpdHlTZXQoYSxFLGMpO3EuZWFjaChvW3NdLGZ1bmN0aW9uKGksYil7Yi5fX21ldGFkYXRhPXt1cmk6citzKyIoIit0Ll9jcmVhdGVLZXlzU3RyaW5nKGEsYikrIikiLHR5cGU6YS5zY2hlbWErIi4iK2EudHlwZX07cS5lYWNoKGEubmF2cHJvcHMsZnVuY3Rpb24oayxuKXtiW2tdPXtfX2RlZmVycmVkOnt1cmk6citzKyIoIit0Ll9jcmVhdGVLZXlzU3RyaW5nKGEsYikrIikvIitrfX19KX0pfSk7cmV0dXJuIG99O2YucHJvdG90eXBlLl9yZXNvbHZlTmF2aWdhdGlvbj1mdW5jdGlvbihlLEYsbil7dmFyIEU9dGhpcy5fbUVudGl0eVNldHNbZV07dmFyIE49RS5uYXZwcm9wc1tuXTtpZighTil7dGhyb3cgbmV3IEVycm9yKCI0MDQiKX12YXIgYT1bXTt2YXIgcD1OLmZyb20ucHJvcFJlZi5sZW5ndGg7aWYocD09PTApe2lmKE4udG8ubXVsdGlwbGljaXR5PT09IioiKXtyZXR1cm4gdGhpcy5fb01vY2tkYXRhW04udG8uZW50aXR5U2V0XX1lbHNle2EucHVzaCh0aGlzLl9vTW9ja2RhdGFbTi50by5lbnRpdHlTZXRdWzBdKTtyZXR1cm4gYX19cS5lYWNoKHRoaXMuX29Nb2NrZGF0YVtOLnRvLmVudGl0eVNldF0sZnVuY3Rpb24oSSx0KXt2YXIgYj10cnVlO2Zvcih2YXIgaT0wO2k8cDtpKyspe2lmKEZbTi5mcm9tLnByb3BSZWZbaV1dIT09dFtOLnRvLnByb3BSZWZbaV1dKXtiPWZhbHNlO2JyZWFrfX1pZihiKXthLnB1c2godCl9fSk7cmV0dXJuIGF9O2YucHJvdG90eXBlLnNpbXVsYXRlPWZ1bmN0aW9uKG0sdil7dmFyIHQ9dGhpczt0aGlzLl9zTWV0YWRhdGFVcmw9bTtpZighdnx8dHlwZW9mIHY9PT0ic3RyaW5nIil7dGhpcy5fc01vY2tkYXRhQmFzZVVybD12fWVsc2V7dGhpcy5fc01vY2tkYXRhQmFzZVVybD12LnNNb2NrZGF0YUJhc2VVcmw7dGhpcy5fYkdlbmVyYXRlTWlzc2luZ01vY2tEYXRhPXYuYkdlbmVyYXRlTWlzc2luZ01vY2tEYXRhfXRoaXMuX3JlZnJlc2hEYXRhKCk7dmFyIGg9ZnVuY3Rpb24oeCxIKXtpZih4LnJlcXVlc3RIZWFkZXJzWyJ4LWNzcmYtdG9rZW4iXT09PSJGZXRjaCIpe0hbIlgtQ1NSRi1Ub2tlbiJdPSI0MjQyNDI0MjQyNDI0MjQyNDI0MjQyNDI0MjQyNDI0MiJ9fTt2YXIgRz1mdW5jdGlvbihlLGspe3ZhciBGO3ZhciBFPXQuX21FbnRpdHlTZXRzW2VdO3ZhciBLPUUua2V5czt2YXIgYj1rLnNwbGl0KCcsJyk7aWYoYi5sZW5ndGghPT1LLmxlbmd0aHx8IXQuX2lzUmVxdWVzdGVkS2V5c1ZhbGlkKEUsYikpe3JldHVybiBGfWlmKGIubGVuZ3RoPT09MSYmIWJbMF0uc3BsaXQoJz0nKVsxXSl7Yj1bS1swXSsiPSIrYlswXV19cS5lYWNoKHQuX29Nb2NrZGF0YVtlXSxmdW5jdGlvbihJLG8pe2Zvcih2YXIgaT0wO2k8Yi5sZW5ndGg7aSsrKXt2YXIgYz1iW2ldLnNwbGl0KCc9Jyk7dmFyIHM9dC5fdHJpbShjWzBdKTtpZihxLmluQXJyYXkocyxLKT09PS0xKXtyZXR1cm4gdHJ1ZX12YXIgbj10Ll90cmltKGNbMV0pO3ZhciBPPW9bc107c3dpdGNoKEUua2V5c1R5cGVbc10pe2Nhc2UiRWRtLlN0cmluZyI6bj1uLnJlcGxhY2UoL15cJ3xcJyQvZywnJyk7YnJlYWs7Y2FzZSJFZG0uVGltZSI6Y2FzZSJFZG0uRGF0ZVRpbWUiOk89dC5fZ2V0RGF0ZVRpbWUoTyk7YnJlYWs7Y2FzZSJFZG0uSW50MTYiOmNhc2UiRWRtLkludDMyIjpjYXNlIkVkbS5JbnQ2NCI6Y2FzZSJFZG0uRGVjaW1hbCI6Y2FzZSJFZG0uQnl0ZSI6Y2FzZSJFZG0uRG91YmxlIjpjYXNlIkVkbS5TaW5nbGUiOmNhc2UiRWRtLlNCeXRlIjppZighdC5faXNWYWxpZE51bWJlcihuKSl7cmV0dXJuIGZhbHNlfW49cGFyc2VGbG9hdChuKTticmVhaztjYXNlIkVkbS5HdWlkIjpuPW4ucmVwbGFjZSgvXmd1aWRcJ3xcJyQvZywnJyk7YnJlYWs7Y2FzZSJFZG0uQm9vbGVhbiI6Y2FzZSJFZG0uQmluYXJ5IjpjYXNlIkVkbS5EYXRlVGltZU9mZnNldCI6ZGVmYXVsdDpuPW59aWYoTyE9PW4pe3JldHVybiB0cnVlfX1GPXtpbmRleDpJLGVudHJ5Om99O3JldHVybiBmYWxzZX0pO3JldHVybiBGfTt2YXIgcj1mdW5jdGlvbihlLGssdSl7dmFyIHM9ZS5uYW1lO2lmKHUpe3ZhciBuPWUubmF2cHJvcHNbdV19aWYobil7cz1uLnRvLmVudGl0eVNldH1yZXR1cm4gc307dmFyIGE9ZnVuY3Rpb24oeCxULGssdSl7dmFyIGU9SlNPTi5wYXJzZSh4LnJlcXVlc3RCb2R5KTtpZihlKXt2YXIgSz17fTtpZihrKXtLPXQuX3BhcnNlS2V5cyhrLHQuX21FbnRpdHlTZXRzW1RdKX10Ll9jb21wbGV0ZUtleSh0Ll9tRW50aXR5U2V0c1tUXSxLLGUpO3QuX2VuaGFuY2VXaXRoTWV0YWRhdGEodC5fbUVudGl0eVNldHNbVF0sW2VdKTtyZXR1cm4gZX1yZXR1cm4gbnVsbH07dmFyIFI9W107Ui5wdXNoKHttZXRob2Q6IkdFVCIscGF0aDpuZXcgUmVnRXhwKCJcXCRtZXRhZGF0YShbPyNdLiopPyIpLHJlc3BvbnNlOmZ1bmN0aW9uKHgpe3Euc2FwLnJlcXVpcmUoImpxdWVyeS5zYXAueG1sIik7cS5zYXAubG9nLmRlYnVnKCJNb2NrU2VydmVyOiBpbmNvbWluZyByZXF1ZXN0IGZvciB1cmw6ICIreC51cmwpO3ZhciBIPXsiQ29udGVudC1UeXBlIjoiYXBwbGljYXRpb24veG1sO2NoYXJzZXQ9dXRmLTgifTtoKHgsSCk7eC5yZXNwb25kKDIwMCxILHEuc2FwLnNlcmlhbGl6ZVhNTCh0Ll9vTWV0YWRhdGEpKTtxLnNhcC5sb2cuZGVidWcoIk1vY2tTZXJ2ZXI6IHJlc3BvbnNlIHNlbnQgd2l0aDogMjAwLCAiK3Euc2FwLnNlcmlhbGl6ZVhNTCh0Ll9vTWV0YWRhdGEpKX19KTtSLnB1c2goe21ldGhvZDoiUE9TVCIscGF0aDpuZXcgUmVnRXhwKCJcXCRiYXRjaChbPyNdLiopPyIpLHJlc3BvbnNlOmZ1bmN0aW9uKHgpe3Euc2FwLmxvZy5kZWJ1ZygiTW9ja1NlcnZlcjogaW5jb21pbmcgcmVxdWVzdCBmb3IgdXJsOiAiK3gudXJsKTt2YXIgYj1mdW5jdGlvbihVKXtzd2l0Y2goVSl7Y2FzZSAyMDA6cmV0dXJuIjIwMCBPSyI7Y2FzZSAyMDQ6cmV0dXJuIjIwNCBObyBDb250ZW50IjtjYXNlIDIwMTpyZXR1cm4iMjAxIENyZWF0ZWQiO2Nhc2UgNDAwOnJldHVybiI0MDAgQmFkIFJlcXVlc3QiO2Nhc2UgNDA0OnJldHVybiI0MDQgTm90IEZvdW5kIjtkZWZhdWx0OmJyZWFrfX07dmFyIEI9ZnVuY3Rpb24oQSxVKXt2YXIgVj1KU09OLnN0cmluZ2lmeShBLmRhdGEpfHwiIjtpZihVKXtyZXR1cm4iSFRUUC8xLjEgIitiKEEuc3RhdHVzQ29kZSkrIlxyXG5Db250ZW50LVR5cGU6ICIrVSsiXHJcbkNvbnRlbnQtTGVuZ3RoOiAiK1YubGVuZ3RoKyJcclxuZGF0YXNlcnZpY2V2ZXJzaW9uOiAyLjBcclxuXHJcbiIrVisiXHJcbiJ9cmV0dXJuIkhUVFAvMS4xICIrYihBLnN0YXR1c0NvZGUpKyJcclxuQ29udGVudC1UeXBlOiBhcHBsaWNhdGlvbi9qc29uXHJcbkNvbnRlbnQtTGVuZ3RoOiAiK1YubGVuZ3RoKyJcclxuZGF0YXNlcnZpY2V2ZXJzaW9uOiAyLjBcclxuXHJcbiIrVisiXHJcbiJ9O3ZhciBzPXgucmVxdWVzdEJvZHk7dmFyIG89bmV3IFJlZ0V4cCgiLS1iYXRjaF9bYS16MC05LV0qIik7dmFyIGM9by5leGVjKHMpWzBdO2lmKCEhYyl7dmFyIGU9W107dmFyIGw9cy5zcGxpdChjKTt2YXIgUz14LnVybC5zcGxpdCgiJCIpWzBdO3ZhciBuPW5ldyBSZWdFeHAoIlBVVCAoLiopIEhUVFAiKTt2YXIgcD1uZXcgUmVnRXhwKCJNRVJHRSAoLiopIEhUVFAiKTt2YXIgdT1uZXcgUmVnRXhwKCJQT1NUICguKikgSFRUUCIpO3ZhciB3PW5ldyBSZWdFeHAoIkRFTEVURSAoLiopIEhUVFAiKTt2YXIgeT1uZXcgUmVnRXhwKCJHRVQgKC4qKSBIVFRQIik7Zm9yKHZhciBpPTE7aTxsLmxlbmd0aC0xO2krKyl7dmFyIHo9bFtpXTtpZih5LnRlc3QoeikmJnouaW5kZXhPZigibXVsdGlwYXJ0L21peGVkIik9PT0tMSl7aWYobi50ZXN0KHopfHx1LnRlc3Qoeil8fHcudGVzdCh6KSl7eC5yZXNwb25kKDQwMCxudWxsLCJUaGUgRGF0YSBTZXJ2aWNlcyBSZXF1ZXN0IGNvdWxkIG5vdCBiZSB1bmRlcnN0b29kIGR1ZSB0byBtYWxmb3JtZWQgc3ludGF4Iik7cS5zYXAubG9nLmRlYnVnKCJNb2NrU2VydmVyOiByZXNwb25zZSBzZW50IHdpdGg6IDQwMCIpO3JldHVybn12YXIgQT1xLnNhcC5zamF4KHt1cmw6Uyt5LmV4ZWMoeilbMV0sZGF0YVR5cGU6Impzb24ifSk7aWYoeS5leGVjKHopWzFdLmluZGV4T2YoJyRjb3VudCcpIT09LTEpe3ZhciBDPUIoQSwidGV4dC9wbGFpbiIpfWVsc2V7Qz1CKEEpfWUucHVzaCgiXHJcbkNvbnRlbnQtVHlwZTogYXBwbGljYXRpb24vaHR0cFxyXG4iKyJDb250ZW50LUxlbmd0aDogIitDLmxlbmd0aCsiXHJcbiIrImNvbnRlbnQtdHJhbnNmZXItZW5jb2Rpbmc6IGJpbmFyeVxyXG5cclxuIitDKX1lbHNle3ZhciBFPVtdO3ZhciBGPXEuZXh0ZW5kKHRydWUse30sdC5fb01vY2tkYXRhKTt2YXIgSD1mdW5jdGlvbihVLEwsVil7dmFyIEE9cS5zYXAuc2pheCh7dHlwZTpWLHVybDpTK1UuZXhlYyhLKVsxXSxkYXRhVHlwZToianNvbiIsZGF0YTpMfSk7aWYoQS5zdGF0dXNDb2RlPT09NDAwfHxBLnN0YXR1c0NvZGU9PT00MDQpe3ZhciBQPSJcclxuSFRUUC8xLjEgIitiKEEuc3RhdHVzQ29kZSkrIlxyXG5Db250ZW50LVR5cGU6IGFwcGxpY2F0aW9uL2pzb25cclxuQ29udGVudC1MZW5ndGg6IDBcclxuXHJcbiI7dGhyb3cgbmV3IEVycm9yKFApfUUucHVzaChCKEEpKX07dmFyIEk9ei5zdWJzdHJpbmcoei5pbmRleE9mKCJib3VuZGFyeT0iKSs5LHouaW5kZXhPZigiXHJcblxyXG4iKSk7dmFyIEo9ei5zcGxpdCgiLS0iK0kpO3RyeXtmb3IodmFyIGo9MTtqPEoubGVuZ3RoLTE7aisrKXt2YXIgSz1KW2pdO2lmKHkudGVzdChLKSl7dC5fb01vY2tkYXRhPUY7eC5yZXNwb25kKDQwMCxudWxsLCJUaGUgRGF0YSBTZXJ2aWNlcyBSZXF1ZXN0IGNvdWxkIG5vdCBiZSB1bmRlcnN0b29kIGR1ZSB0byBtYWxmb3JtZWQgc3ludGF4Iik7cS5zYXAubG9nLmRlYnVnKCJNb2NrU2VydmVyOiByZXNwb25zZSBzZW50IHdpdGg6IDQwMCIpO3JldHVybn1lbHNlIGlmKG4udGVzdChLKSl7dmFyIEw9Sy5zdWJzdHJpbmcoSy5pbmRleE9mKCJ7IiksSy5sYXN0SW5kZXhPZigifSIpKzEpLnJlcGxhY2UoL1xcL2csJycpO0gobixMLCdQVVQnKX1lbHNlIGlmKHAudGVzdChLKSl7TD1LLnN1YnN0cmluZyhLLmluZGV4T2YoInsiKSxLLmxhc3RJbmRleE9mKCJ9IikrMSkucmVwbGFjZSgvXFwvZywnJyk7SChwLEwsJ1BVVCcpfWVsc2UgaWYodS50ZXN0KEspKXtMPUsuc3Vic3RyaW5nKEsuaW5kZXhPZigieyIpLEsubGFzdEluZGV4T2YoIn0iKSsxKS5yZXBsYWNlKC9cXC9nLCcnKTtIKHUsTCwnUE9TVCcpfWVsc2UgaWYody50ZXN0KEspKXtIKHcsbnVsbCwnREVMRVRFJyl9fXZhciBOPSJcclxuQ29udGVudC1UeXBlOiBtdWx0aXBhcnQvbWl4ZWQ7IGJvdW5kYXJ5PWVqamVlZmZlMVxyXG5cclxuLS1lamplZWZmZTEiO2Zvcih2YXIgaz0wO2s8RS5sZW5ndGg7aysrKXtOKz0iXHJcbkNvbnRlbnQtVHlwZTogYXBwbGljYXRpb24vaHR0cFxyXG4iKyJDb250ZW50LUxlbmd0aDogIitFW2tdLmxlbmd0aCsiXHJcbiIrImNvbnRlbnQtdHJhbnNmZXItZW5jb2Rpbmc6IGJpbmFyeVxyXG5cclxuIitFW2tdKyItLWVqamVlZmZlMSJ9Tis9Ii0tXHJcbiI7ZS5wdXNoKE4pfWNhdGNoKE8pe3QuX29Nb2NrZGF0YT1GO3ZhciBQPSJcclxuQ29udGVudC1UeXBlOiBhcHBsaWNhdGlvbi9odHRwXHJcbiIrIkNvbnRlbnQtTGVuZ3RoOiAiK08ubWVzc2FnZS5sZW5ndGgrIlxyXG4iKyJjb250ZW50LXRyYW5zZmVyLWVuY29kaW5nOiBiaW5hcnlcclxuXHJcbiIrTy5tZXNzYWdlO2UucHVzaChQKX19fXZhciBRPSItLWVqamVlZmZlMCI7Zm9yKHZhciBpPTA7aTxlLmxlbmd0aDtpKyspe1ErPWVbaV0rIi0tZWpqZWVmZmUwIn1RKz0iLS0iO3ZhciBUPXsnQ29udGVudC1UeXBlJzoibXVsdGlwYXJ0L21peGVkOyBib3VuZGFyeT1lamplZWZmZTAifTtoKHgsVCk7eC5yZXNwb25kKDIwMixULFEpO3Euc2FwLmxvZy5kZWJ1ZygiTW9ja1NlcnZlcjogcmVzcG9uc2Ugc2VudCB3aXRoOiAyMDIsICIrUSl9ZWxzZXt4LnJlc3BvbmQoMjAyKX19fSk7cS5lYWNoKHRoaXMuX21FbnRpdHlTZXRzLGZ1bmN0aW9uKEUsbyl7Ui5wdXNoKHttZXRob2Q6IkdFVCIscGF0aDpuZXcgUmVnRXhwKCIoIitFKyIpL1xcJGNvdW50Lz8oLiopPyIpLHJlc3BvbnNlOmZ1bmN0aW9uKHgsRSx1KXtxLnNhcC5sb2cuZGVidWcoIk1vY2tTZXJ2ZXI6IGluY29taW5nIHJlcXVlc3QgZm9yIHVybDogIit4LnVybCk7dmFyIEg9eyJDb250ZW50LVR5cGUiOiJ0ZXh0L3BsYWluO2NoYXJzZXQ9dXRmLTgifTtoKHgsSCk7dmFyIGI9dC5fb01vY2tkYXRhW0VdO2lmKGIpe3ZhciBGPXtyZXN1bHRzOnEuZXh0ZW5kKHRydWUsW10sYil9O2lmKHUpe3ZhciBVPWRlY29kZVVSSUNvbXBvbmVudCh1KS5yZXBsYWNlKCI/IiwiJiIpLnNwbGl0KCImIik7dHJ5e2lmKFUubGVuZ3RoPjEpe1U9dC5fb3JkZXJRdWVyeU9wdGlvbnMoVSl9cS5lYWNoKFUsZnVuY3Rpb24oaSxRKXt0Ll9hcHBseVF1ZXJ5T25Db2xsZWN0aW9uKEYsUSxFKX0pfWNhdGNoKGUpe3gucmVzcG9uZChwYXJzZUludChlLm1lc3NhZ2V8fGUubnVtYmVyLDEwKSk7cmV0dXJufX14LnJlc3BvbmQoMjAwLEgsIiIrRi5yZXN1bHRzLmxlbmd0aCk7cS5zYXAubG9nLmRlYnVnKCJNb2NrU2VydmVyOiByZXNwb25zZSBzZW50IHdpdGg6IDIwMCwgIitGLnJlc3VsdHMubGVuZ3RoKX1lbHNle3gucmVzcG9uZCg0MDQpO3Euc2FwLmxvZy5kZWJ1ZygiTW9ja1NlcnZlcjogcmVzcG9uc2Ugc2VudCB3aXRoOiA0MDQiKX19fSk7Ui5wdXNoKHttZXRob2Q6IkdFVCIscGF0aDpuZXcgUmVnRXhwKCIoIitFKyIpLz8oXFw/KC4qKSk/IikscmVzcG9uc2U6ZnVuY3Rpb24oeCxFLHUpe3Euc2FwLmxvZy5kZWJ1ZygiTW9ja1NlcnZlcjogaW5jb21pbmcgcmVxdWVzdCBmb3IgdXJsOiAiK3gudXJsKTt2YXIgSD17IkNvbnRlbnQtVHlwZSI6ImFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtOCJ9O2goeCxIKTt2YXIgYj10Ll9vTW9ja2RhdGFbRV07aWYoYil7dmFyIEY9e3Jlc3VsdHM6cS5leHRlbmQodHJ1ZSxbXSxiKX07aWYodSl7dmFyIFU9ZGVjb2RlVVJJQ29tcG9uZW50KHUpLnJlcGxhY2UoIj8iLCImIikuc3BsaXQoIiYiKTt0cnl7aWYoVS5sZW5ndGg+MSl7VT10Ll9vcmRlclF1ZXJ5T3B0aW9ucyhVKX1xLmVhY2goVSxmdW5jdGlvbihpLFEpe3QuX2FwcGx5UXVlcnlPbkNvbGxlY3Rpb24oRixRLEUpfSl9Y2F0Y2goZSl7eC5yZXNwb25kKHBhcnNlSW50KGUubWVzc2FnZXx8ZS5udW1iZXIsMTApKTtyZXR1cm59fXgucmVzcG9uZCgyMDAsSCxKU09OLnN0cmluZ2lmeSh7ZDpGfSkpO3Euc2FwLmxvZy5kZWJ1ZygiTW9ja1NlcnZlcjogcmVzcG9uc2Ugc2VudCB3aXRoOiAyMDAsICIrSlNPTi5zdHJpbmdpZnkoe2Q6Rn0pKX1lbHNle3gucmVzcG9uZCg0MDQpO3Euc2FwLmxvZy5kZWJ1ZygiTW9ja1NlcnZlcjogcmVzcG9uc2Ugc2VudCB3aXRoOiA0MDQiKX19fSk7Ui5wdXNoKHttZXRob2Q6IkdFVCIscGF0aDpuZXcgUmVnRXhwKCIoIitFKyIpXFwoKFteL1xcPyNdKylcXCkvPyhcXD8oLiopKT8iKSxyZXNwb25zZTpmdW5jdGlvbih4LEUsayx1KXtxLnNhcC5sb2cuZGVidWcoIk1vY2tTZXJ2ZXI6IGluY29taW5nIHJlcXVlc3QgZm9yIHVybDogIit4LnVybCk7dmFyIEg9eyJDb250ZW50LVR5cGUiOiJhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTgifTtoKHgsSCk7dmFyIGI9cS5leHRlbmQodHJ1ZSx7fSxHKEUsaykpO2lmKCFxLmlzRW1wdHlPYmplY3QoYikpe2lmKHUpe3ZhciBVPWRlY29kZVVSSUNvbXBvbmVudCh1KS5yZXBsYWNlKCI/IiwiJiIpLnNwbGl0KCImIik7dHJ5e2lmKFUubGVuZ3RoPjEpe1U9dC5fb3JkZXJRdWVyeU9wdGlvbnMoVSl9cS5lYWNoKFUsZnVuY3Rpb24oaSxRKXtiLmVudHJ5PXQuX2FwcGx5UXVlcnlPbkVudHJ5KGIuZW50cnksUSxFKX0pfWNhdGNoKGUpe3gucmVzcG9uZChwYXJzZUludChlLm1lc3NhZ2V8fGUubnVtYmVyLDEwKSk7cS5zYXAubG9nLmRlYnVnKCJNb2NrU2VydmVyOiByZXNwb25zZSBzZW50IHdpdGg6ICIrcGFyc2VJbnQoZS5tZXNzYWdlfHxlLm51bWJlciwxMCkpO3JldHVybn19eC5yZXNwb25kKDIwMCxILEpTT04uc3RyaW5naWZ5KHtkOmIuZW50cnl9KSk7cS5zYXAubG9nLmRlYnVnKCJNb2NrU2VydmVyOiByZXNwb25zZSBzZW50IHdpdGg6IDIwMCwgIitKU09OLnN0cmluZ2lmeSh7ZDpiLmVudHJ5fSkpfWVsc2V7eC5yZXNwb25kKDQwNCk7cS5zYXAubG9nLmRlYnVnKCJNb2NrU2VydmVyOiByZXNwb25zZSBzZW50IHdpdGg6IDQwNCIpfX19KTtxLmVhY2goby5uYXZwcm9wcyxmdW5jdGlvbihuLE4pe1IucHVzaCh7bWV0aG9kOiJHRVQiLHBhdGg6bmV3IFJlZ0V4cCgiKCIrRSsiKVxcKChbXi9cXD8jXSspXFwpLygiK24rIikvXFwkY291bnQvPyguKik/IikscmVzcG9uc2U6ZnVuY3Rpb24oeCxFLGsscyx1KXtxLnNhcC5sb2cuZGVidWcoIk1vY2tTZXJ2ZXI6IGluY29taW5nIHJlcXVlc3QgZm9yIHVybDogIit4LnVybCk7dmFyIEg9eyJDb250ZW50LVR5cGUiOiJ0ZXh0L3BsYWluO2NoYXJzZXQ9dXRmLTgifTtoKHgsSCk7dmFyIGI9RyhFLGRlY29kZVVSSUNvbXBvbmVudChrKSk7aWYoYil7dmFyIGMsRj17fTt0cnl7Yz10Ll9yZXNvbHZlTmF2aWdhdGlvbihFLGIuZW50cnkscyk7aWYoYyYmYy5sZW5ndGghPT0wKXt2YXIgaT10Ll9tRW50aXR5U2V0c1tFXS5uYXZwcm9wc1tzXS50by5tdWx0aXBsaWNpdHk7aWYoaT09PSIqIil7Rj17cmVzdWx0czpxLmV4dGVuZCh0cnVlLFtdLGMpfX1lbHNle0Y9cS5leHRlbmQodHJ1ZSx7fSxjWzBdKX1pZih1KXt2YXIgVT1kZWNvZGVVUklDb21wb25lbnQodSkucmVwbGFjZSgiPyIsIiYiKS5zcGxpdCgiJiIpO2lmKFUubGVuZ3RoPjEpe1U9dC5fb3JkZXJRdWVyeU9wdGlvbnMoVSl9aWYoaT09PSIqIil7cS5lYWNoKFUsZnVuY3Rpb24oSSxRKXt0Ll9hcHBseVF1ZXJ5T25Db2xsZWN0aW9uKEYsUSx0Ll9tRW50aXR5U2V0c1tFXS5uYXZwcm9wc1tzXS50by5lbnRpdHlTZXQpfSl9ZWxzZXtxLmVhY2goVSxmdW5jdGlvbihJLFEpe0Y9dC5fYXBwbHlRdWVyeU9uRW50cnkoRixRLHQuX21FbnRpdHlTZXRzW0VdLm5hdnByb3BzW3NdLnRvLmVudGl0eVNldCl9KX19fXgucmVzcG9uZCgyMDAsSCwiIitGLnJlc3VsdHMubGVuZ3RoKTtxLnNhcC5sb2cuZGVidWcoIk1vY2tTZXJ2ZXI6IHJlc3BvbnNlIHNlbnQgd2l0aDogMjAwLCAiK0YucmVzdWx0cy5sZW5ndGgpO3JldHVybn1jYXRjaChlKXt4LnJlc3BvbmQocGFyc2VJbnQoZS5tZXNzYWdlfHxlLm51bWJlciwxMCkpO3Euc2FwLmxvZy5kZWJ1ZygiTW9ja1NlcnZlcjogcmVzcG9uc2Ugc2VudCB3aXRoOiAiK3BhcnNlSW50KGUubWVzc2FnZXx8ZS5udW1iZXIsMTApKTtyZXR1cm59fWVsc2V7eC5yZXNwb25kKDQwNCk7cS5zYXAubG9nLmRlYnVnKCJNb2NrU2VydmVyOiByZXNwb25zZSBzZW50IHdpdGg6IDQwNCIpfX19KTtSLnB1c2goe21ldGhvZDoiR0VUIixwYXRoOm5ldyBSZWdFeHAoIigiK0UrIilcXCgoW14vXFw/I10rKVxcKS8oIituKyIpLz8oXFw/KC4qKSk/IikscmVzcG9uc2U6ZnVuY3Rpb24oeCxFLGsscyx1KXtxLnNhcC5sb2cuZGVidWcoIk1vY2tTZXJ2ZXI6IGluY29taW5nIHJlcXVlc3QgZm9yIHVybDogIit4LnVybCk7dmFyIEg9eyJDb250ZW50LVR5cGUiOiJhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTgifTtoKHgsSCk7dmFyIGI9RyhFLGRlY29kZVVSSUNvbXBvbmVudChrKSk7aWYoYil7dmFyIGMsRj17fTt0cnl7Yz10Ll9yZXNvbHZlTmF2aWdhdGlvbihFLGIuZW50cnkscyk7aWYoYyYmYy5sZW5ndGghPT0wKXt2YXIgaT10Ll9tRW50aXR5U2V0c1tFXS5uYXZwcm9wc1tzXS50by5tdWx0aXBsaWNpdHk7aWYoaT09PSIqIil7Rj17cmVzdWx0czpxLmV4dGVuZCh0cnVlLFtdLGMpfX1lbHNle0Y9cS5leHRlbmQodHJ1ZSx7fSxjWzBdKX1pZih1KXt2YXIgVT1kZWNvZGVVUklDb21wb25lbnQodSkucmVwbGFjZSgiPyIsIiYiKS5zcGxpdCgiJiIpO2lmKFUubGVuZ3RoPjEpe1U9dC5fb3JkZXJRdWVyeU9wdGlvbnMoVSl9aWYoaT09PSIqIil7cS5lYWNoKFUsZnVuY3Rpb24oSSxRKXt0Ll9hcHBseVF1ZXJ5T25Db2xsZWN0aW9uKEYsUSx0Ll9tRW50aXR5U2V0c1tFXS5uYXZwcm9wc1tzXS50by5lbnRpdHlTZXQpfSl9ZWxzZXtxLmVhY2goVSxmdW5jdGlvbihJLFEpe0Y9dC5fYXBwbHlRdWVyeU9uRW50cnkoRixRLHQuX21FbnRpdHlTZXRzW0VdLm5hdnByb3BzW3NdLnRvLmVudGl0eVNldCl9KX19fXgucmVzcG9uZCgyMDAsSCxKU09OLnN0cmluZ2lmeSh7ZDpGfSkpO3Euc2FwLmxvZy5kZWJ1ZygiTW9ja1NlcnZlcjogcmVzcG9uc2Ugc2VudCB3aXRoOiAyMDAsICIrSlNPTi5zdHJpbmdpZnkoe2Q6Rn0pKTtyZXR1cm59Y2F0Y2goZSl7eC5yZXNwb25kKHBhcnNlSW50KGUubWVzc2FnZXx8ZS5udW1iZXIsMTApKTtxLnNhcC5sb2cuZGVidWcoIk1vY2tTZXJ2ZXI6IHJlc3BvbnNlIHNlbnQgd2l0aDogIitwYXJzZUludChlLm1lc3NhZ2V8fGUubnVtYmVyLDEwKSk7cmV0dXJufX14LnJlc3BvbmQoNDA0KTtxLnNhcC5sb2cuZGVidWcoIk1vY2tTZXJ2ZXI6IHJlc3BvbnNlIHNlbnQgd2l0aDogNDA0Iil9fSl9KTtSLnB1c2goe21ldGhvZDoiUE9TVCIscGF0aDpuZXcgUmVnRXhwKCIoIitFKyIpKFxcKChbXi9cXD8jXSspXFwpLz8oLiopPyk/IikscmVzcG9uc2U6ZnVuY3Rpb24oeCxFLGIsayxuKXtxLnNhcC5sb2cuZGVidWcoIk1vY2tTZXJ2ZXI6IGluY29taW5nIGNyZWF0ZSByZXF1ZXN0IGZvciB1cmw6ICIreC51cmwpO3ZhciBzPW51bGw7dmFyIGM9bnVsbDt2YXIgaT00MDU7dmFyIFQ9cihvLGRlY29kZVVSSUNvbXBvbmVudChrKSxuKTtpZihUKXt2YXIgZT1hKHgsVCxrLG4pO2lmKGUpe3ZhciB1PXQuX2dldFJvb3RVcmkoKStUKyIoIit0Ll9jcmVhdGVLZXlzU3RyaW5nKHQuX21FbnRpdHlTZXRzW1RdLGUpKyIpIjtzPUpTT04uc3RyaW5naWZ5KHtkOmUsdXJpOnV9KTtjPXsiQ29udGVudC1UeXBlIjoiYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04In07dC5fb01vY2tkYXRhW1RdPXQuX29Nb2NrZGF0YVtUXS5jb25jYXQoW2VdKTtpPTIwMX19eC5yZXNwb25kKGksYyxzKTtxLnNhcC5sb2cuZGVidWcoIk1vY2tTZXJ2ZXI6IHJlc3BvbnNlIHNlbnQgd2l0aDogIitpKyIsICIrcyl9fSk7Ui5wdXNoKHttZXRob2Q6IlBVVCIscGF0aDpuZXcgUmVnRXhwKCIoIitFKyIpXFwoKFteL1xcPyNdKylcXCkvPyguKik/IikscmVzcG9uc2U6ZnVuY3Rpb24oeCxFLGssbil7cS5zYXAubG9nLmRlYnVnKCJNb2NrU2VydmVyOiBpbmNvbWluZyB1cGRhdGUgcmVxdWVzdCBmb3IgdXJsOiAiK3gudXJsKTt2YXIgaT00MDU7dmFyIHM9bnVsbDt2YXIgYj1udWxsO3ZhciBUPXIobyxkZWNvZGVVUklDb21wb25lbnQoayksbik7aWYoVCl7dmFyIGU9YSh4LFQsayxuKTtpZihlKXt2YXIgdT10Ll9nZXRSb290VXJpKCkrVCsiKCIrdC5fY3JlYXRlS2V5c1N0cmluZyh0Ll9tRW50aXR5U2V0c1tUXSxlKSsiKSI7Yj17IkNvbnRlbnQtVHlwZSI6ImFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtOCJ9O3ZhciBjPUcoRSxrKTtpZihjKXt0Ll9vTW9ja2RhdGFbRV1bYy5pbmRleF09ZX1pPTIwNH19eC5yZXNwb25kKGksYixzKTtxLnNhcC5sb2cuZGVidWcoIk1vY2tTZXJ2ZXI6IHJlc3BvbnNlIHNlbnQgd2l0aDogIitpKyIsICIrcyl9fSk7Ui5wdXNoKHttZXRob2Q6IkRFTEVURSIscGF0aDpuZXcgUmVnRXhwKCIoIitFKyIpXFwoKFteL1xcPyNdKylcXCkvPyguKik/IikscmVzcG9uc2U6ZnVuY3Rpb24oeCxFLGssdSl7cS5zYXAubG9nLmRlYnVnKCJNb2NrU2VydmVyOiBpbmNvbWluZyBkZWxldGUgcmVxdWVzdCBmb3IgdXJsOiAiK3gudXJsKTt2YXIgaT0yMDA7dmFyIGU9RyhFLGRlY29kZVVSSUNvbXBvbmVudChrKSk7aWYoZSl7dC5fb01vY2tkYXRhW0VdLnNwbGljZShlLmluZGV4LDEpfWVsc2V7aT00MDB9eC5yZXNwb25kKGksbnVsbCxudWxsKTtxLnNhcC5sb2cuZGVidWcoIk1vY2tTZXJ2ZXI6IHJlc3BvbnNlIHNlbnQgd2l0aDogIitpKX19KX0pO3RoaXMuc2V0UmVxdWVzdHMoUil9O2YucHJvdG90eXBlLl9vcmRlclF1ZXJ5T3B0aW9ucz1mdW5jdGlvbih1KXt2YXIgRixpLHMsdCxvLFMsZSxhLE89W107cS5lYWNoKHUsZnVuY3Rpb24oSSxRKXtzd2l0Y2goUS5zcGxpdCgnPScpWzBdKXtjYXNlIiR0b3AiOnQ9cS5pbkFycmF5KFEsdSk7YnJlYWs7Y2FzZSIkc2tpcCI6cz1xLmluQXJyYXkoUSx1KTticmVhaztjYXNlIiRvcmRlcmJ5IjpvPXEuaW5BcnJheShRLHUpO2JyZWFrO2Nhc2UiJGZpbHRlciI6Rj1xLmluQXJyYXkoUSx1KTticmVhaztjYXNlIiRzZWxlY3QiOlM9cS5pbkFycmF5KFEsdSk7YnJlYWs7Y2FzZSIkaW5saW5lY291bnQiOmk9cS5pbkFycmF5KFEsdSk7YnJlYWs7Y2FzZSIkZXhwYW5kIjplPXEuaW5BcnJheShRLHUpO2JyZWFrO2Nhc2UiJGZvcm1hdCI6YT1xLmluQXJyYXkoUSx1KTticmVhaztkZWZhdWx0OmlmKFEuc3BsaXQoJz0nKVswXS5pbmRleE9mKCckJyk9PT0wKXtxLnNhcC5sb2cuZXJyb3IoIkludmFsaWQgc3lzdGVtIHF1ZXJ5IG9wdGlvbnMgdmFsdWUhIik7dGhyb3cgbmV3IEVycm9yKCI0MDAiKX19fSk7aWYoRj49MClPLnB1c2godVtGXSk7aWYoaT49MClPLnB1c2godVtpXSk7aWYocz49MClPLnB1c2godVtzXSk7aWYodD49MClPLnB1c2godVt0XSk7aWYoUz49MClPLnB1c2godVtTXSk7aWYobz49MClPLnB1c2godVtvXSk7aWYoZT49MClPLnB1c2godVtlXSk7aWYoYT49MClPLnB1c2godVthXSk7cmV0dXJuIE99O2YucHJvdG90eXBlLl9yZW1vdmVBbGxSZXF1ZXN0SGFuZGxlcnM9ZnVuY3Rpb24oKXt2YXIgcj10aGlzLmdldFJlcXVlc3RzKCk7dmFyIGw9ci5sZW5ndGg7Zm9yKHZhciBpPTA7aTxsO2krKyl7Zi5fcmVtb3ZlUmVzcG9uc2UocltpXS5yZXNwb25zZSl9fTtmLnByb3RvdHlwZS5fcmVtb3ZlQWxsRmlsdGVycz1mdW5jdGlvbigpe2Zvcih2YXIgaT0wO2k8dGhpcy5fYUZpbHRlcnMubGVuZ3RoO2krKyl7Zi5fcmVtb3ZlRmlsdGVyKHRoaXMuX2FGaWx0ZXJzW2ldKX10aGlzLl9hRmlsdGVycz1udWxsfTtmLnByb3RvdHlwZS5fYWRkUmVxdWVzdEhhbmRsZXI9ZnVuY3Rpb24obSxwLHIpe209bT9tLnRvVXBwZXJDYXNlKCk6bTtpZih0eXBlb2YgbSE9PSJzdHJpbmciKXt0aHJvdyBuZXcgRXJyb3IoIkVycm9yIGluIHJlcXVlc3QgY29uZmlndXJhdGlvbjogdmFsdWUgb2YgJ21ldGhvZCcgaGFzIHRvIGJlIGEgc3RyaW5nIil9aWYoISh0eXBlb2YgcD09PSJzdHJpbmcifHxwIGluc3RhbmNlb2YgUmVnRXhwKSl7dGhyb3cgbmV3IEVycm9yKCJFcnJvciBpbiByZXF1ZXN0IGNvbmZpZ3VyYXRpb246IHZhbHVlIG9mICdwYXRoJyBoYXMgdG8gYmUgYSBzdHJpbmcgb3IgYSByZWd1bGFyIGV4cHJlc3Npb24iKX1pZih0eXBlb2YgciE9PSJmdW5jdGlvbiIpe3Rocm93IG5ldyBFcnJvcigiRXJyb3IgaW4gcmVxdWVzdCBjb25maWd1cmF0aW9uOiB2YWx1ZSBvZiAncmVzcG9uc2UnIGhhcyB0byBiZSBhIGZ1bmN0aW9uIil9dmFyIHU9dGhpcy5fZ2V0Um9vdFVyaSgpO3U9dSYmbmV3IFJlZ0V4cCh0aGlzLl9lc2NhcGVTdHJpbmdGb3JSZWdFeHAodSkpO2lmKHAmJiEocCBpbnN0YW5jZW9mIFJlZ0V4cCkpe3A9bmV3IFJlZ0V4cCh0aGlzLl9jcmVhdGVSZWdFeHBQYXR0ZXJuKHApKX12YXIgUj10aGlzLl9jcmVhdGVSZWdFeHAodT91LnNvdXJjZStwLnNvdXJjZTpwLnNvdXJjZSk7dGhpcy5fYWRkRmlsdGVyKHRoaXMuX2NyZWF0ZUZpbHRlcihtLFIpKTt0aGlzLl9vU2VydmVyLnJlc3BvbmRXaXRoKG0sUixyKTtxLnNhcC5sb2cuZGVidWcoIk1vY2tTZXJ2ZXI6IGFkZGluZyAiK20rIiByZXF1ZXN0IGhhbmRsZXIgZm9yIHBhdHRlcm4gIitSKX07Zi5wcm90b3R5cGUuX2NyZWF0ZVJlZ0V4cD1mdW5jdGlvbihwKXtyZXR1cm4gbmV3IFJlZ0V4cCgiXiIrcCsiJCIpfTtmLnByb3RvdHlwZS5fY3JlYXRlUmVnRXhwUGF0dGVybj1mdW5jdGlvbihwKXtyZXR1cm4gcC5yZXBsYWNlKC86KFtcd1xkXSspL2csIihbXlwvXSspIil9O2YucHJvdG90eXBlLl9lc2NhcGVTdHJpbmdGb3JSZWdFeHA9ZnVuY3Rpb24ocyl7cmV0dXJuIHMucmVwbGFjZSgvW1xcXC9cW1xdXHtcfVwoXClcLVwqXCtcP1wuXF5cJFx8XS9nLCJcXCQmIil9O2YucHJvdG90eXBlLl90cmltPWZ1bmN0aW9uKHMpe3JldHVybiBzJiZzLnJlcGxhY2UoL15ccyt8XHMrJC9nLCIiKX07Zi5wcm90b3R5cGUuX2lzVmFsaWROdW1iZXI9ZnVuY3Rpb24ocyl7cmV0dXJuIWlzTmFOKHBhcnNlRmxvYXQocykpJiZpc0Zpbml0ZShzKX07Zi5wcm90b3R5cGUuX2dldERhdGVUaW1lPWZ1bmN0aW9uKHMpe2lmKCFzKXJldHVybjtyZXR1cm4iZGF0ZXRpbWUnIituZXcgRGF0ZShOdW1iZXIocy5yZXBsYWNlKCIvRGF0ZSgiLCcnKS5yZXBsYWNlKCIpLyIsJycpKSkudG9KU09OKCkuc3Vic3RyaW5nKDAsMTkpKyInIn07Zi5wcm90b3R5cGUuX2dldEpzb25EYXRlPWZ1bmN0aW9uKFMpe2lmKCFTKXJldHVybjt2YXIgbj1mdW5jdGlvbihzKXt2YXIgYT1xLm1hcChzLnNsaWNlKDAsLTUpLnNwbGl0KC9cRC8pLGZ1bmN0aW9uKGkpe3JldHVybiBwYXJzZUludChpLDEwKXx8MH0pO2FbMV0tPTE7YT1uZXcgRGF0ZShEYXRlLlVUQy5hcHBseShEYXRlLGEpKTt2YXIgbz1zLnNsaWNlKC01KTt2YXIgYj1wYXJzZUludChvLDEwKS8xMDA7aWYoby5zbGljZSgwLDEpPT09IisiKXtiKj0tMX1hLnNldEhvdXJzKGEuZ2V0SG91cnMoKStiKTtyZXR1cm4gYS5nZXRUaW1lKCl9O3JldHVybiIvRGF0ZSgiK24oUy5zdWJzdHJpbmcoImRhdGV0aW1lJyIubGVuZ3RoLFMubGVuZ3RoLTEpKSsiKS8ifTtmLnByb3RvdHlwZS5fYWRkRmlsdGVyPWZ1bmN0aW9uKEYpe3RoaXMuX2FGaWx0ZXJzLnB1c2goRik7Zi5fYWRkRmlsdGVyKEYpfTtmLnByb3RvdHlwZS5fY3JlYXRlRmlsdGVyPWZ1bmN0aW9uKHIsUil7cmV0dXJuIGZ1bmN0aW9uKG0sdSxhLFUscCl7cmV0dXJuIHI9PT1tJiZSLnRlc3QodSl9fTtmLnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKHMpe00ucHJvdG90eXBlLmRlc3Ryb3kuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMuc3RvcCgpO3ZhciBTPWYuX2FTZXJ2ZXJzO3ZhciBpPXEuaW5BcnJheSh0aGlzLFMpO1Muc3BsaWNlKGksMSl9O2YuX2FGaWx0ZXJzPVtdO2YuX29TZXJ2ZXI9bnVsbDtmLl9hU2VydmVycz1bXTtmLl9nZXRJbnN0YW5jZT1mdW5jdGlvbigpe2lmKCF0aGlzLl9vU2VydmVyKXt0aGlzLl9vU2VydmVyPXdpbmRvdy5zaW5vbi5mYWtlU2VydmVyLmNyZWF0ZSgpO3RoaXMuX29TZXJ2ZXIuYXV0b1Jlc3BvbmQ9dHJ1ZX1yZXR1cm4gdGhpcy5fb1NlcnZlcn07Zi5jb25maWc9ZnVuY3Rpb24oYyl7dmFyIHM9dGhpcy5fZ2V0SW5zdGFuY2UoKTtzLmF1dG9SZXNwb25kPWMuYXV0b1Jlc3BvbmQ9PT1mYWxzZT9mYWxzZTp0cnVlO3MuYXV0b1Jlc3BvbmRBZnRlcj1jLmF1dG9SZXNwb25kQWZ0ZXJ8fDA7cy5mYWtlSFRUUE1ldGhvZHM9Yy5mYWtlSFRUUE1ldGhvZHN8fGZhbHNlfTtmLnJlc3BvbmQ9ZnVuY3Rpb24oKXt0aGlzLl9nZXRJbnN0YW5jZSgpLnJlc3BvbmQoKX07Zi5zdGFydEFsbD1mdW5jdGlvbigpe2Zvcih2YXIgaT0wO2k8dGhpcy5fYVNlcnZlcnMubGVuZ3RoO2krKyl7dGhpcy5fYVNlcnZlcnNbaV0uc3RhcnQoKX19O2Yuc3RvcEFsbD1mdW5jdGlvbigpe2Zvcih2YXIgaT0wO2k8dGhpcy5fYVNlcnZlcnMubGVuZ3RoO2krKyl7dGhpcy5fYVNlcnZlcnNbaV0uc3RvcCgpfXRoaXMuX2dldEluc3RhbmNlKCkucmVzdG9yZSgpO3RoaXMuX29TZXJ2ZXI9bnVsbH07Zi5kZXN0cm95QWxsPWZ1bmN0aW9uKCl7dGhpcy5zdG9wQWxsKCk7Zm9yKHZhciBpPTA7aTx0aGlzLl9hU2VydmVycy5sZW5ndGg7aSsrKXt0aGlzLl9hU2VydmVyc1tpXS5kZXN0cm95KCl9fTtmLl9hZGRGaWx0ZXI9ZnVuY3Rpb24oRil7dGhpcy5fYUZpbHRlcnMucHVzaChGKX07Zi5fcmVtb3ZlRmlsdGVyPWZ1bmN0aW9uKEYpe3ZhciBpPXEuaW5BcnJheShGLHRoaXMuX2FGaWx0ZXJzKTtpZihpIT09LTEpe3RoaXMuX2FGaWx0ZXJzLnNwbGljZShpLDEpfXJldHVybiBpIT09LTF9O2YuX3JlbW92ZVJlc3BvbnNlPWZ1bmN0aW9uKHIpe3ZhciBSPXRoaXMuX29TZXJ2ZXIucmVzcG9uc2VzO3ZhciBsPVIubGVuZ3RoO2Zvcih2YXIgaT0wO2k8bDtpKyspe2lmKFJbaV0ucmVzcG9uc2U9PT1yKXtSLnNwbGljZShpLDEpO3JldHVybiB0cnVlfX1yZXR1cm4gZmFsc2V9O3dpbmRvdy5zaW5vbi5GYWtlWE1MSHR0cFJlcXVlc3QudXNlRmlsdGVycz10cnVlO3dpbmRvdy5zaW5vbi5GYWtlWE1MSHR0cFJlcXVlc3QuYWRkRmlsdGVyKGZ1bmN0aW9uKG0sdSxhLFUscCl7dmFyIEY9Zi5fYUZpbHRlcnM7Zm9yKHZhciBpPTA7aTxGLmxlbmd0aDtpKyspe3ZhciBiPUZbaV07aWYoYihtLHUsYSxVLHApKXtyZXR1cm4gZmFsc2V9fXJldHVybiB0cnVlfSk7dmFyIGc9ZnVuY3Rpb24oRil7aWYoLy4qXC5qc29uJC9pLnRlc3QoRikpe3JldHVybiJKU09OIn1pZigvLipcLnhtbCQvaS50ZXN0KEYpKXtyZXR1cm4iWE1MIn1pZigvLiptZXRhZGF0YSQvaS50ZXN0KEYpKXtyZXR1cm4iWE1MIn1yZXR1cm4gbnVsbH07d2luZG93LnNpbm9uLkZha2VYTUxIdHRwUmVxdWVzdC5wcm90b3R5cGUucmVzcG9uZEZpbGU9ZnVuY3Rpb24ocyxoLEYpe3ZhciByPXEuc2FwLnNqYXgoe3VybDpGLGRhdGFUeXBlOiJ0ZXh0In0pO2lmKCFyLnN1Y2Nlc3MpdGhyb3cgbmV3IEVycm9yKCJDb3VsZCBub3QgbG9hZCBmaWxlIGZyb206ICIrRik7dmFyIG89ci5kYXRhO3ZhciBtPWcoRik7aWYodGhpc1sicmVzcG9uZCIrbV0pe3RoaXNbInJlc3BvbmQiK21dKHMsaCxvKX1lbHNle3RoaXMucmVzcG9uZChzLGgsbyl9fTt3aW5kb3cuc2lub24uRmFrZVhNTEh0dHBSZXF1ZXN0LnByb3RvdHlwZS5yZXNwb25kSlNPTj1mdW5jdGlvbihzLGgsail7aD1ofHx7fTtoWyJDb250ZW50LVR5cGUiXT1oWyJDb250ZW50LVR5cGUiXXx8ImFwcGxpY2F0aW9uL2pzb24iO3RoaXMucmVzcG9uZChzLGgsdHlwZW9mIGo9PT0ic3RyaW5nIj9qOkpTT04uc3RyaW5naWZ5KGopKX07d2luZG93LnNpbm9uLkZha2VYTUxIdHRwUmVxdWVzdC5wcm90b3R5cGUucmVzcG9uZFhNTD1mdW5jdGlvbihzLGgseCl7aD1ofHx7fTtoWyJDb250ZW50LVR5cGUiXT1oWyJDb250ZW50LVR5cGUiXXx8ImFwcGxpY2F0aW9uL3htbCI7dGhpcy5yZXNwb25kKHMsaCx4KX07cmV0dXJuIGZ9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkubW9kZWwuQ2xpZW50TW9kZWwnKSl7DQovKiENCiAqIFNBUCBVSSBkZXZlbG9wbWVudCB0b29sa2l0IGZvciBIVE1MNSAoU0FQVUk1L09wZW5VSTUpDQogKiAoYykgQ29weXJpZ2h0IDIwMDktMjAxNCBTQVAgU0Ugb3IgYW4gU0FQIGFmZmlsaWF0ZSBjb21wYW55LiANCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgLSBzZWUgTElDRU5TRS50eHQuDQogKi8NCmpRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLm1vZGVsLkNsaWVudE1vZGVsJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL21vZGVsL0NsaWVudE1vZGVsIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnLi9DbGllbnRDb250ZXh0QmluZGluZycsJy4vQ2xpZW50TGlzdEJpbmRpbmcnLCcuL0NsaWVudFByb3BlcnR5QmluZGluZycsJy4vQ2xpZW50VHJlZUJpbmRpbmcnLCcuL01vZGVsJ10sZnVuY3Rpb24ocSxDLGEsYixjLE0peyJ1c2Ugc3RyaWN0Ijt2YXIgZD1NLmV4dGVuZCgic2FwLnVpLm1vZGVsLkNsaWVudE1vZGVsIix7Y29uc3RydWN0b3I6ZnVuY3Rpb24oRCl7TS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5iQ2FjaGU9dHJ1ZTt0aGlzLmFQZW5kaW5nUmVxdWVzdEhhbmRsZXM9W107aWYodHlwZW9mIEQ9PSJzdHJpbmciKXt0aGlzLmxvYWREYXRhKEQpfX0sbWV0YWRhdGE6e3B1YmxpY01ldGhvZHM6WyJsb2FkRGF0YSIsInNldERhdGEiLCJnZXREYXRhIiwic2V0UHJvcGVydHkiLCJmb3JjZU5vQ2FjaGUiXX19KTtkLnByb3RvdHlwZS5nZXREYXRhPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub0RhdGF9O2QucHJvdG90eXBlLmNoZWNrVXBkYXRlPWZ1bmN0aW9uKGYpe3ZhciBCPXRoaXMuYUJpbmRpbmdzLnNsaWNlKDApO3EuZWFjaChCLGZ1bmN0aW9uKGksbyl7by5jaGVja1VwZGF0ZShmKX0pfTtkLnByb3RvdHlwZS5jcmVhdGVCaW5kaW5nQ29udGV4dD1mdW5jdGlvbihwLG8sUCxmKXtpZih0eXBlb2Ygbz09ImZ1bmN0aW9uIil7Zj1vO289bnVsbH1pZih0eXBlb2YgUD09ImZ1bmN0aW9uIil7Zj1QO1A9bnVsbH12YXIgcz10aGlzLnJlc29sdmUocCxvKSxuPShzPT11bmRlZmluZWQpP3VuZGVmaW5lZDp0aGlzLmdldENvbnRleHQocz9zOiIvIik7aWYoIW4pe249bnVsbH1mKG4pfTtkLnByb3RvdHlwZS5fYWpheD1mdW5jdGlvbihwKXt2YXIgdD10aGlzO2lmKHRoaXMuYkRlc3Ryb3llZCl7cmV0dXJufWZ1bmN0aW9uIHcoZil7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGk9cS5pbkFycmF5KHIsdC5hUGVuZGluZ1JlcXVlc3RIYW5kbGVzKTtpZihpPi0xKXt0LmFQZW5kaW5nUmVxdWVzdEhhbmRsZXMuc3BsaWNlKGksMSl9aWYoIShyJiZyLmJTdXBwcmVzc0Vycm9ySGFuZGxlckNhbGwpKXtmLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19fXAuc3VjY2Vzcz13KHAuc3VjY2Vzcyk7cC5lcnJvcj13KHAuZXJyb3IpO3ZhciByPXEuYWpheChwKTtpZihwLmFzeW5jKXt0aGlzLmFQZW5kaW5nUmVxdWVzdEhhbmRsZXMucHVzaChyKX19O2QucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXtpZih0aGlzLmFQZW5kaW5nUmVxdWVzdEhhbmRsZXMpe2Zvcih2YXIgaT10aGlzLmFQZW5kaW5nUmVxdWVzdEhhbmRsZXMubGVuZ3RoLTE7aT49MDtpLS0pe3ZhciByPXRoaXMuYVBlbmRpbmdSZXF1ZXN0SGFuZGxlc1tpXTtpZihyJiZyLmFib3J0KXtyLmJTdXBwcmVzc0Vycm9ySGFuZGxlckNhbGw9dHJ1ZTtyLmFib3J0KCl9fWRlbGV0ZSB0aGlzLmFQZW5kaW5nUmVxdWVzdEhhbmRsZXN9TS5wcm90b3R5cGUuZGVzdHJveS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9O2QucHJvdG90eXBlLmRlc3Ryb3lCaW5kaW5nQ29udGV4dD1mdW5jdGlvbihvKXt9O2QucHJvdG90eXBlLmJpbmRDb250ZXh0PWZ1bmN0aW9uKHAsbyxQKXt2YXIgQj1uZXcgQyh0aGlzLHAsbyxQKTtyZXR1cm4gQn07ZC5wcm90b3R5cGUudXBkYXRlQmluZGluZ3M9ZnVuY3Rpb24oZil7dGhpcy5jaGVja1VwZGF0ZShmKX07ZC5wcm90b3R5cGUuZm9yY2VOb0NhY2hlPWZ1bmN0aW9uKGYpe3RoaXMuYkNhY2hlPSFmfTtyZXR1cm4gZH0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5tb2RlbC5hbmFseXRpY3MuT0RhdGFNb2RlbEFkYXB0ZXInKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkubW9kZWwuYW5hbHl0aWNzLk9EYXRhTW9kZWxBZGFwdGVyJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL21vZGVsL2FuYWx5dGljcy9PRGF0YU1vZGVsQWRhcHRlciIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJy4vQW5hbHl0aWNhbEJpbmRpbmcnLCIuL1RyZWVCaW5kaW5nQWRhcHRlciIsJ3NhcC91aS9tb2RlbC9vZGF0YS9PRGF0YU1vZGVsJywnLi9vZGF0YTRhbmFseXRpY3MnXSxmdW5jdGlvbihxLEEsVCxPLG8peyJ1c2Ugc3RyaWN0Ijt2YXIgYT1mdW5jdGlvbigpe2lmKCEodGhpcyBpbnN0YW5jZW9mIE8mJnRoaXMuZ2V0QW5hbHl0aWNhbEV4dGVuc2lvbnM9PT11bmRlZmluZWQpKXtyZXR1cm59Zm9yKHZhciBmIGluIGEucHJvdG90eXBlKXtpZihhLnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eShmKSl7dGhpc1tmXT1hLnByb3RvdHlwZVtmXX19aWYodGhpcy5pc0NvdW50U3VwcG9ydGVkKCkpe3Euc2FwLmxvZy5pbmZvKCJPRGF0YU1vZGVsQWRhcHRlcjogc3dpdGNoZWQgT0RhdGFNb2RlbCB0byB1c2UgaW5saW5lY291bnQgKG1hbmRhdG9yeSBmb3IgYW5hbHl0aWNhbCBiaW5kaW5ncykiKTt0aGlzLnNldENvdW50U3VwcG9ydGVkKGZhbHNlKX19O2EucHJvdG90eXBlLmJpbmRMaXN0PWZ1bmN0aW9uKHAsYyxzLGYsUCl7aWYoUCYmUC5hbmFseXRpY2FsSW5mbyl7dmFyIGI9bmV3IEEodGhpcyxwLGMscyxmLFApO1QuYXBwbHkoYik7cmV0dXJuIGJ9ZWxzZXtyZXR1cm4gTy5wcm90b3R5cGUuYmluZExpc3QuYXBwbHkodGhpcyxhcmd1bWVudHMpfX07YS5wcm90b3R5cGUuYmluZFRyZWU9ZnVuY3Rpb24ocCxjLGYsUCl7aWYoUCYmUC5hbmFseXRpY2FsSW5mbyl7dmFyIGI9bmV3IEEodGhpcyxwLGMsW10sZixQKTtyZXR1cm4gYn1lbHNle3JldHVybiBPLnByb3RvdHlwZS5iaW5kVHJlZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fTthLnByb3RvdHlwZS5nZXRBbmFseXRpY2FsRXh0ZW5zaW9ucz1mdW5jdGlvbigpe2lmKHRoaXMub09EYXRhNFNBUEFuYWx5dGljc01vZGVsIT11bmRlZmluZWQmJnRoaXMub09EYXRhNFNBUEFuYWx5dGljc01vZGVsIT1udWxsKXJldHVybiB0aGlzLm9PRGF0YTRTQVBBbmFseXRpY3NNb2RlbDt2YXIgcz1udWxsO2lmKGFyZ3VtZW50cy5sZW5ndGg9PTEpe3ZhciBiPWFyZ3VtZW50c1swXTt2YXIgcj1xLnNhcC5zeW5jR2V0VGV4dChiKTtpZihyLnN1Y2Nlc3Mpe3M9ci5kYXRhfX10cnl7dGhpcy5vT0RhdGE0U0FQQW5hbHl0aWNzTW9kZWw9bmV3IG8uTW9kZWwobmV3IG8uTW9kZWwuUmVmZXJlbmNlQnlNb2RlbCh0aGlzKSxzKX1jYXRjaChlKXt0aHJvdyJGYWlsZWQgdG8gaW5zdGFudGlhdGUgYW5hbHl0aWNhbCBleHRlbnNpb25zIGZvciBnaXZlbiBPRGF0YSBtb2RlbDogIitlLm1lc3NhZ2V9cmV0dXJuIHRoaXMub09EYXRhNFNBUEFuYWx5dGljc01vZGVsfTtyZXR1cm4gYX0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5tb2RlbC5qc29uLkpTT05Nb2RlbCcpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5tb2RlbC5qc29uLkpTT05Nb2RlbCcpO3NhcC51aS5kZWZpbmUoInNhcC91aS9tb2RlbC9qc29uL0pTT05Nb2RlbCIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ3NhcC91aS9tb2RlbC9DbGllbnRNb2RlbCcsJy4vSlNPTkxpc3RCaW5kaW5nJywnLi9KU09OUHJvcGVydHlCaW5kaW5nJywnLi9KU09OVHJlZUJpbmRpbmcnXSxmdW5jdGlvbihxLEMsSixhLGIpeyJ1c2Ugc3RyaWN0Ijt2YXIgYz1DLmV4dGVuZCgic2FwLnVpLm1vZGVsLmpzb24uSlNPTk1vZGVsIix7Y29uc3RydWN0b3I6ZnVuY3Rpb24oZCl7Qy5hcHBseSh0aGlzLGFyZ3VtZW50cyk7aWYoZCYmdHlwZW9mIGQ9PSJvYmplY3QiKXt0aGlzLnNldERhdGEoZCl9fSxtZXRhZGF0YTp7cHVibGljTWV0aG9kczpbInNldEpTT04iLCJnZXRKU09OIl19fSk7Yy5wcm90b3R5cGUuc2V0RGF0YT1mdW5jdGlvbihkLG0pe2lmKG0pe3RoaXMub0RhdGE9cS5leHRlbmQodHJ1ZSx7fSx0aGlzLm9EYXRhLGQpfWVsc2V7dGhpcy5vRGF0YT1kfXRoaXMuY2hlY2tVcGRhdGUoKX07Yy5wcm90b3R5cGUuc2V0SlNPTj1mdW5jdGlvbihqLG0pe3ZhciBvO3RyeXtvPXEucGFyc2VKU09OKGopO3RoaXMuc2V0RGF0YShvLG0pfWNhdGNoKGUpe3Euc2FwLmxvZy5mYXRhbCgiVGhlIGZvbGxvd2luZyBwcm9ibGVtIG9jY3VycmVkOiBKU09OIHBhcnNlIEVycm9yOiAiK2UpO3RoaXMuZmlyZVBhcnNlRXJyb3Ioe3VybDoiIixlcnJvckNvZGU6LTEscmVhc29uOiIiLHNyY1RleHQ6ZSxsaW5lOi0xLGxpbmVwb3M6LTEsZmlsZXBvczotMX0pfX07Yy5wcm90b3R5cGUuZ2V0SlNPTj1mdW5jdGlvbigpe3JldHVybiBKU09OLnN0cmluZ2lmeSh0aGlzLm9EYXRhKX07Yy5wcm90b3R5cGUubG9hZERhdGE9ZnVuY3Rpb24odSxwLEEsdCxtLGQsaCl7dmFyIGU9dGhpcztBPShBIT09ZmFsc2UpO3Q9dHx8IkdFVCI7ZD1kPT09dW5kZWZpbmVkP3RoaXMuYkNhY2hlOmQ7dGhpcy5maXJlUmVxdWVzdFNlbnQoe3VybDp1LHR5cGU6dCxhc3luYzpBLGhlYWRlcnM6aCxpbmZvOiJjYWNoZT0iK2QrIjtiTWVyZ2U9IittLGluZm9PYmplY3Q6e2NhY2hlOmQsbWVyZ2U6bX19KTt0aGlzLl9hamF4KHt1cmw6dSxhc3luYzpBLGRhdGFUeXBlOidqc29uJyxjYWNoZTpkLGRhdGE6cCxoZWFkZXJzOmgsdHlwZTp0LHN1Y2Nlc3M6ZnVuY3Rpb24oRCl7aWYoIUQpe3Euc2FwLmxvZy5mYXRhbCgiVGhlIGZvbGxvd2luZyBwcm9ibGVtIG9jY3VycmVkOiBObyBkYXRhIHdhcyByZXRyaWV2ZWQgYnkgc2VydmljZTogIit1KX1lLnNldERhdGEoRCxtKTtlLmZpcmVSZXF1ZXN0Q29tcGxldGVkKHt1cmw6dSx0eXBlOnQsYXN5bmM6QSxoZWFkZXJzOmgsaW5mbzoiY2FjaGU9IitkKyI7Yk1lcmdlPSIrbSxpbmZvT2JqZWN0OntjYWNoZTpkLG1lcmdlOm19LHN1Y2Nlc3M6dHJ1ZX0pfSxlcnJvcjpmdW5jdGlvbihYLGYsZyl7dmFyIEU9e21lc3NhZ2U6ZixzdGF0dXNDb2RlOlguc3RhdHVzLHN0YXR1c1RleHQ6WC5zdGF0dXNUZXh0LHJlc3BvbnNlVGV4dDpYLnJlc3BvbnNlVGV4dH07cS5zYXAubG9nLmZhdGFsKCJUaGUgZm9sbG93aW5nIHByb2JsZW0gb2NjdXJyZWQ6ICIrZixYLnJlc3BvbnNlVGV4dCsiLCIrWC5zdGF0dXMrIiwiK1guc3RhdHVzVGV4dCk7ZS5maXJlUmVxdWVzdENvbXBsZXRlZCh7dXJsOnUsdHlwZTp0LGFzeW5jOkEsaGVhZGVyczpoLGluZm86ImNhY2hlPSIrZCsiO2JNZXJnZT0iK20saW5mb09iamVjdDp7Y2FjaGU6ZCxtZXJnZTptfSxzdWNjZXNzOmZhbHNlLGVycm9yb2JqZWN0OkV9KTtlLmZpcmVSZXF1ZXN0RmFpbGVkKEUpfX0pfTtjLnByb3RvdHlwZS5iaW5kUHJvcGVydHk9ZnVuY3Rpb24ocCxvLFApe3ZhciBCPW5ldyBhKHRoaXMscCxvLFApO3JldHVybiBCfTtjLnByb3RvdHlwZS5iaW5kTGlzdD1mdW5jdGlvbihwLG8scyxmLFApe3ZhciBCPW5ldyBKKHRoaXMscCxvLHMsZixQKTtyZXR1cm4gQn07Yy5wcm90b3R5cGUuYmluZFRyZWU9ZnVuY3Rpb24ocCxvLGYsUCl7dmFyIEI9bmV3IGIodGhpcyxwLG8sZixQKTtyZXR1cm4gQn07Yy5wcm90b3R5cGUuc2V0UHJvcGVydHk9ZnVuY3Rpb24ocCx2LG8pe3ZhciBPPXAuc3Vic3RyaW5nKDAscC5sYXN0SW5kZXhPZigiLyIpKSxQPXAuc3Vic3RyKHAubGFzdEluZGV4T2YoIi8iKSsxKTtpZighdGhpcy5yZXNvbHZlKHAsbykpe3JldHVybn1pZighTyYmIW8pe289dGhpcy5vRGF0YX12YXIgZD10aGlzLl9nZXRPYmplY3QoTyxvKTtpZihkKXtkW1BdPXY7dGhpcy5jaGVja1VwZGF0ZSgpfX07Yy5wcm90b3R5cGUuZ2V0UHJvcGVydHk9ZnVuY3Rpb24ocCxvKXtyZXR1cm4gdGhpcy5fZ2V0T2JqZWN0KHAsbyl9O2MucHJvdG90eXBlLl9nZXRPYmplY3Q9ZnVuY3Rpb24ocCxvKXt2YXIgbj10aGlzLmlzTGVnYWN5U3ludGF4KCk/dGhpcy5vRGF0YTpudWxsO2lmKG8gaW5zdGFuY2VvZiBzYXAudWkubW9kZWwuQ29udGV4dCl7bj10aGlzLl9nZXRPYmplY3Qoby5nZXRQYXRoKCkpfWVsc2UgaWYobyl7bj1vfWlmKCFwKXtyZXR1cm4gbn12YXIgUD1wLnNwbGl0KCIvIiksaT0wO2lmKCFQWzBdKXtuPXRoaXMub0RhdGE7aSsrfXdoaWxlKG4mJlBbaV0pe249bltQW2ldXTtpKyt9cmV0dXJuIG59O2MucHJvdG90eXBlLmlzTGlzdD1mdW5jdGlvbihwLG8pe3ZhciBBPXRoaXMucmVzb2x2ZShwLG8pO3JldHVybiBxLmlzQXJyYXkodGhpcy5fZ2V0T2JqZWN0KEEpKX07cmV0dXJuIGN9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkubW9kZWwueG1sLlhNTE1vZGVsJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLm1vZGVsLnhtbC5YTUxNb2RlbCcpO3NhcC51aS5kZWZpbmUoInNhcC91aS9tb2RlbC94bWwvWE1MTW9kZWwiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvbW9kZWwvQ2xpZW50TW9kZWwnLCcuL1hNTExpc3RCaW5kaW5nJywnLi9YTUxQcm9wZXJ0eUJpbmRpbmcnLCcuL1hNTFRyZWVCaW5kaW5nJywnanF1ZXJ5LnNhcC54bWwnXSxmdW5jdGlvbihxLEMsWCxhLGIpeyJ1c2Ugc3RyaWN0Ijt2YXIgYz1DLmV4dGVuZCgic2FwLnVpLm1vZGVsLnhtbC5YTUxNb2RlbCIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKGQpe0MuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMub05hbWVTcGFjZXM9bnVsbDtpZihkJiZkLmRvY3VtZW50RWxlbWVudCl7dGhpcy5zZXREYXRhKGQpfX0sbWV0YWRhdGE6e3B1YmxpY01ldGhvZHM6WyJzZXRYTUwiLCJnZXRYTUwiLCJzZXROYW1lU3BhY2UiXX19KTtjLnByb3RvdHlwZS5zZXRYTUw9ZnVuY3Rpb24oeCl7dmFyIG89cS5zYXAucGFyc2VYTUwoeCk7aWYoby5wYXJzZUVycm9yLmVycm9yQ29kZSE9MCl7dmFyIHA9by5wYXJzZUVycm9yO3Euc2FwLmxvZy5mYXRhbCgiVGhlIGZvbGxvd2luZyBwcm9ibGVtIG9jY3VycmVkOiBYTUwgcGFyc2UgRXJyb3IgZm9yICIrcC51cmwrIiBjb2RlOiAiK3AuZXJyb3JDb2RlKyIgcmVhc29uOiAiK3AucmVhc29uKyIgc3JjOiAiK3Auc3JjVGV4dCsiIGxpbmU6ICIrcC5saW5lKyIgbGluZXBvczogIitwLmxpbmVwb3MrIiBmaWxlcG9zOiAiK3AuZmlsZXBvcyk7dGhpcy5maXJlUGFyc2VFcnJvcih7dXJsOnAudXJsLGVycm9yQ29kZTpwLmVycm9yQ29kZSxyZWFzb246cC5yZWFzb24sc3JjVGV4dDpwLnNyY1RleHQsbGluZTpwLmxpbmUsbGluZXBvczpwLmxpbmVwb3MsZmlsZXBvczpwLmZpbGVwb3N9KX10aGlzLnNldERhdGEobyl9O2MucHJvdG90eXBlLmdldFhNTD1mdW5jdGlvbigpe3JldHVybiBxLnNhcC5zZXJpYWxpemVYTUwodGhpcy5vRGF0YSl9O2MucHJvdG90eXBlLnNldERhdGE9ZnVuY3Rpb24oZCl7dGhpcy5vRGF0YT1kO3RoaXMuY2hlY2tVcGRhdGUoKX07Yy5wcm90b3R5cGUubG9hZERhdGE9ZnVuY3Rpb24odSxwLEEsdCxkLGgpe3ZhciBlPXRoaXM7QT0oQSE9PWZhbHNlKTt0PXR8fCJHRVQiO2Q9ZD09PXVuZGVmaW5lZD90aGlzLmJDYWNoZTpkO3RoaXMuZmlyZVJlcXVlc3RTZW50KHt1cmw6dSx0eXBlOnQsYXN5bmM6QSxoZWFkZXJzOmgsaW5mbzoiY2FjaGU9IitkLGluZm9PYmplY3Q6e2NhY2hlOmR9fSk7dGhpcy5fYWpheCh7dXJsOnUsYXN5bmM6QSxjYWNoZTpkLGRhdGFUeXBlOid4bWwnLGRhdGE6cCxoZWFkZXJzOmgsdHlwZTp0LHN1Y2Nlc3M6ZnVuY3Rpb24oRCl7aWYoIUQpe3Euc2FwLmxvZy5mYXRhbCgiVGhlIGZvbGxvd2luZyBwcm9ibGVtIG9jY3VycmVkOiBObyBkYXRhIHdhcyByZXRyaWV2ZWQgYnkgc2VydmljZTogIit1KX1lLnNldERhdGEoRCk7ZS5maXJlUmVxdWVzdENvbXBsZXRlZCh7dXJsOnUsdHlwZTp0LGFzeW5jOkEsaGVhZGVyczpoLGluZm86ImNhY2hlPSIrZCxpbmZvT2JqZWN0OntjYWNoZTpkfSxzdWNjZXNzOnRydWV9KX0sZXJyb3I6ZnVuY3Rpb24oZixnLGkpe3ZhciBFPXttZXNzYWdlOmcsc3RhdHVzQ29kZTpmLnN0YXR1cyxzdGF0dXNUZXh0OmYuc3RhdHVzVGV4dCxyZXNwb25zZVRleHQ6Zi5yZXNwb25zZVRleHR9O3Euc2FwLmxvZy5mYXRhbCgiVGhlIGZvbGxvd2luZyBwcm9ibGVtIG9jY3VycmVkOiAiK2csZi5yZXNwb25zZVRleHQrIiwiK2Yuc3RhdHVzKyIsIitmLnN0YXR1c1RleHQpO2UuZmlyZVJlcXVlc3RDb21wbGV0ZWQoe3VybDp1LHR5cGU6dCxhc3luYzpBLGhlYWRlcnM6aCxpbmZvOiJjYWNoZT0iK2QsaW5mb09iamVjdDp7Y2FjaGU6ZH0sc3VjY2VzczpmYWxzZSxlcnJvcm9iamVjdDpFfSk7ZS5maXJlUmVxdWVzdEZhaWxlZChFKX19KX07Yy5wcm90b3R5cGUuc2V0TmFtZVNwYWNlPWZ1bmN0aW9uKG4scCl7aWYoIXApe3A9IiJ9aWYoIXRoaXMub05hbWVTcGFjZXMpe3RoaXMub05hbWVTcGFjZXM9e319dGhpcy5vTmFtZVNwYWNlc1twXT1ufTtjLnByb3RvdHlwZS5iaW5kUHJvcGVydHk9ZnVuY3Rpb24ocCxvLFApe3ZhciBCPW5ldyBhKHRoaXMscCxvLFApO3JldHVybiBCfTtjLnByb3RvdHlwZS5iaW5kTGlzdD1mdW5jdGlvbihwLG8scyxmLFApe3ZhciBCPW5ldyBYKHRoaXMscCxvLHMsZixQKTtyZXR1cm4gQn07Yy5wcm90b3R5cGUuYmluZFRyZWU9ZnVuY3Rpb24ocCxvLGYsUCl7dmFyIEI9bmV3IGIodGhpcyxwLG8sZixQKTtyZXR1cm4gQn07Yy5wcm90b3R5cGUuc2V0UHJvcGVydHk9ZnVuY3Rpb24ocCx2LG8pe3ZhciBPPXAuc3Vic3RyaW5nKDAscC5sYXN0SW5kZXhPZigiLyIpKzEpLFA9cC5zdWJzdHIocC5sYXN0SW5kZXhPZigiLyIpKzEpO2lmKCF0aGlzLnJlc29sdmUocCxvKSl7cmV0dXJufWlmKCF0aGlzLm9EYXRhLmRvY3VtZW50RWxlbWVudCl7cS5zYXAubG9nLndhcm5pbmcoIlRyeWluZyB0byBzZXQgcHJvcGVydHkgIitwKyIsIGJ1dCBubyBkb2N1bWVudCBleGlzdHMuIik7cmV0dXJufXZhciBkO2lmKFAuaW5kZXhPZigiQCIpPT0wKXtkPXRoaXMuX2dldE9iamVjdChPLG8pO2lmKGRbMF0pe2RbMF0uc2V0QXR0cmlidXRlKFAuc3Vic3RyKDEpLHYpO3RoaXMuY2hlY2tVcGRhdGUoKX19ZWxzZXtkPXRoaXMuX2dldE9iamVjdChwLG8pO2lmKGRbMF0pe3EoZFswXSkudGV4dCh2KTt0aGlzLmNoZWNrVXBkYXRlKCl9fX07Yy5wcm90b3R5cGUuZ2V0UHJvcGVydHk9ZnVuY3Rpb24ocCxvKXt2YXIgcj10aGlzLl9nZXRPYmplY3QocCxvKTtpZihyJiZ0eXBlb2YgciE9InN0cmluZyIpe3I9cShyWzBdKS50ZXh0KCl9cmV0dXJuIHJ9O2MucHJvdG90eXBlLmdldE9iamVjdD1mdW5jdGlvbihwLG8pe3ZhciBPPXRoaXMuX2dldE9iamVjdChwLG8pO2lmKHEuaXNBcnJheShPKSl7Tz1PWzBdfXJldHVybiBPfTtjLnByb3RvdHlwZS5fZ2V0T2JqZWN0PWZ1bmN0aW9uKHAsbyl7dmFyIHI9dGhpcy5vRGF0YS5kb2N1bWVudEVsZW1lbnQ7aWYoIXIpe3JldHVybiBudWxsfXZhciBuPXRoaXMuaXNMZWdhY3lTeW50YXgoKT9bcl06W107aWYobyBpbnN0YW5jZW9mIHNhcC51aS5tb2RlbC5Db250ZXh0KXtuPXRoaXMuX2dldE9iamVjdChvLmdldFBhdGgoKSl9ZWxzZSBpZihvKXtuPVtvXX1pZighcCl7cmV0dXJuIG59dmFyIFA9cC5zcGxpdCgiLyIpLHMsaT0wO2lmKCFQWzBdKXtuPXI7aSsrfW49bi5sZW5ndGg9PXVuZGVmaW5lZD9bbl06bjtuPW5bMF0/bjpudWxsO3doaWxlKG4mJm4ubGVuZ3RoPjAmJlBbaV0pe3M9UFtpXTtpZihzLmluZGV4T2YoIkAiKT09MCl7bj10aGlzLl9nZXRBdHRyaWJ1dGUoblswXSxzLnN1YnN0cigxKSl9ZWxzZSBpZihzPT0idGV4dCgpIil7bj1xKG5bMF0pLnRleHQoKX1lbHNlIGlmKGlzTmFOKHMpKXtuPXRoaXMuX2dldENoaWxkRWxlbWVudHNCeVRhZ05hbWUoblswXSxzKX1lbHNle249W25bc11dfWkrK31yZXR1cm4gbn07Yy5wcm90b3R5cGUuX2dldEF0dHJpYnV0ZT1mdW5jdGlvbihuLE4pe2lmKCF0aGlzLm9OYW1lU3BhY2VzfHxOLmluZGV4T2YoIjoiKT09LTEpe3JldHVybiBuLmdldEF0dHJpYnV0ZShOKX12YXIgcz10aGlzLl9nZXROYW1lU3BhY2UoTiksbD10aGlzLl9nZXRMb2NhbE5hbWUoTik7aWYobi5nZXRBdHRyaWJ1dGVOUyl7cmV0dXJuIG4uZ2V0QXR0cmlidXRlTlMocyxsKX1lbHNle2lmKCF0aGlzLm9Eb2NOU1ByZWZpeGVzKXt0aGlzLm9Eb2NOU1ByZWZpeGVzPXRoaXMuX2dldERvY05TUHJlZml4ZXMoKX12YXIgcD10aGlzLm9Eb2NOU1ByZWZpeGVzW3NdO049KHA/cCsiOiI6IiIpK2w7cmV0dXJuIG4uZ2V0QXR0cmlidXRlKE4pfX07Yy5wcm90b3R5cGUuX2dldENoaWxkRWxlbWVudHNCeVRhZ05hbWU9ZnVuY3Rpb24obixOKXt2YXIgZD1uLmNoaWxkTm9kZXMscj1bXTtpZih0aGlzLm9OYW1lU3BhY2VzKXt2YXIgcz10aGlzLl9nZXROYW1lU3BhY2UoTiksbD10aGlzLl9nZXRMb2NhbE5hbWUoTiksZTtxLmVhY2goZCxmdW5jdGlvbihpLG8pe2U9by5sb2NhbE5hbWV8fG8uYmFzZU5hbWU7aWYoby5ub2RlVHlwZT09MSYmZT09bCYmby5uYW1lc3BhY2VVUkk9PXMpe3IucHVzaChvKX19KX1lbHNle3EuZWFjaChkLGZ1bmN0aW9uKGksbyl7aWYoby5ub2RlVHlwZT09MSYmby5ub2RlTmFtZT09Til7ci5wdXNoKG8pfX0pfXJldHVybiByfTtjLnByb3RvdHlwZS5fZ2V0TmFtZVNwYWNlPWZ1bmN0aW9uKG4pe3ZhciBpPW4uaW5kZXhPZigiOiIpLHA9IiI7aWYoaT4wKXtwPW4uc3Vic3RyKDAsaSl9cmV0dXJuIHRoaXMub05hbWVTcGFjZXNbcF19O2MucHJvdG90eXBlLl9nZXRMb2NhbE5hbWU9ZnVuY3Rpb24obil7dmFyIGk9bi5pbmRleE9mKCI6IiksbD1uO2lmKGk+MCl7bD1uLnN1YnN0cihpKzEpfXJldHVybiBsfTtjLnByb3RvdHlwZS5fZ2V0RG9jTlNQcmVmaXhlcz1mdW5jdGlvbigpe3ZhciBwPXt9LGQ9dGhpcy5vRGF0YSYmdGhpcy5vRGF0YS5kb2N1bWVudEVsZW1lbnQ7aWYoIWQpe3JldHVybiBwfXZhciBBPWQuYXR0cmlidXRlcztxLmVhY2goQSxmdW5jdGlvbihpLG8pe3ZhciBuPW8ubmFtZSx2PW8udmFsdWU7aWYobj09InhtbG5zIil7cFt2XT0iIn1lbHNlIGlmKG4uaW5kZXhPZigieG1sbnMiKT09MCl7cFt2XT1uLnN1YnN0cig2KX19KTtyZXR1cm4gcH07Yy5wcm90b3R5cGUuX3Jlc29sdmU9ZnVuY3Rpb24ocCxvKXt2YXIgaT0hcS5zYXAuc3RhcnRzV2l0aChwLCIvIikscj1wO2lmKGkpe2lmKG8pe3I9by5nZXRQYXRoKCkrIi8iK3B9ZWxzZXtyPXRoaXMuaXNMZWdhY3lTeW50YXgoKT8iLyIrcDp1bmRlZmluZWR9fXJldHVybiByfTtjLnByb3RvdHlwZS5pc0xpc3Q9ZnVuY3Rpb24ocCxvKXtyZXR1cm4gZmFsc2V9O3JldHVybiBjfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmFwcC5Nb2NrU2VydmVyJykpew0KLyoNCiAqIFNBUCBVSSBkZXZlbG9wbWVudCB0b29sa2l0IGZvciBIVE1MNSAoU0FQVUk1L09wZW5VSTUpDQogKiAoYykgQ29weXJpZ2h0IDIwMDktMjAxNCBTQVAgU0Ugb3IgYW4gU0FQIGFmZmlsaWF0ZSBjb21wYW55LiANCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgLSBzZWUgTElDRU5TRS50eHQuDQogKi8NCmpRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmFwcC5Nb2NrU2VydmVyJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2FwcC9Nb2NrU2VydmVyIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL2NvcmUvdXRpbC9Nb2NrU2VydmVyJ10sZnVuY3Rpb24ocSxNKXsidXNlIHN0cmljdCI7dmFyIGE9TTtyZXR1cm4gYX0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLnRtcGwuSGFuZGxlYmFyc1RlbXBsYXRlJykpew0KLyohDQogKiBTQVAgVUkgZGV2ZWxvcG1lbnQgdG9vbGtpdCBmb3IgSFRNTDUgKFNBUFVJNS9PcGVuVUk1KQ0KICogKGMpIENvcHlyaWdodCAyMDA5LTIwMTQgU0FQIFNFIG9yIGFuIFNBUCBhZmZpbGlhdGUgY29tcGFueS4gDQogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wIC0gc2VlIExJQ0VOU0UudHh0Lg0KICovDQpqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLnRtcGwuSGFuZGxlYmFyc1RlbXBsYXRlJyk7alF1ZXJ5LnNhcC5yZXF1aXJlKCdzYXAudWkudGhpcmRwYXJ0eS5oYW5kbGViYXJzJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvdG1wbC9IYW5kbGViYXJzVGVtcGxhdGUiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvY29yZS9SZW5kZXJNYW5hZ2VyJywnLi9UZW1wbGF0ZScsJ3NhcC91aS90aGlyZHBhcnR5L2hhbmRsZWJhcnMnXSxmdW5jdGlvbihxLFIsVCxoKXsidXNlIHN0cmljdCI7dmFyIEg9VC5leHRlbmQoInNhcC51aS5jb3JlLnRtcGwuSGFuZGxlYmFyc1RlbXBsYXRlIix7Y29uc3RydWN0b3I6ZnVuY3Rpb24oaSxzKXtULmFwcGx5KHRoaXMsYXJndW1lbnRzKX19KTtULnJlZ2lzdGVyVHlwZSgidGV4dC94LWhhbmRsZWJhcnMtdGVtcGxhdGUiLCJzYXAudWkuY29yZS50bXBsLkhhbmRsZWJhcnNUZW1wbGF0ZSIpO0guUkVOREVSX0hFTFBFUlM9KGZ1bmN0aW9uKCl7dmFyIGU9SGFuZGxlYmFycy5oZWxwZXJzWyJlYWNoIl0sdz1IYW5kbGViYXJzLmhlbHBlcnNbIndpdGgiXSxJPUhhbmRsZWJhcnMuaGVscGVyc1siaWYiXSx1PUhhbmRsZWJhcnMuaGVscGVyc1sidW5sZXNzIl0scD1ULnBhcnNlUGF0aCxyPW5ldyBSKCk7ci5yZW5kZXJDb250cm9sPWZ1bmN0aW9uKGMpe3RoaXMud3JpdGVDb250cm9sRGF0YShjKTt0aGlzLndyaXRlQ2xhc3NlcyhjKTt0aGlzLndyaXRlU3R5bGVzKGMpfTt2YXIgbz17ImVhY2giOmZ1bmN0aW9uKGMsYSl7YT1hfHxjO2lmKCFhLmhhc2gucGF0aCl7cmV0dXJuIGUuYXBwbHkodGhpcyxhcmd1bWVudHMpfWVsc2V7dmFyIGI9YS5kYXRhLnJlbmRlck1hbmFnZXIsZD1hLmRhdGEucm9vdENvbnRyb2wsUD1hLmRhdGEucGF0aCxmPWEuZGF0YS5wYXJlbnRDb250cm9sLHM9KHEuc2FwLnN0YXJ0c1dpdGgoYS5oYXNoLnBhdGgsIi8iKT8iIjooUHx8IiIpKSthLmhhc2gucGF0aCxnPWQuYmluZExpc3QocyksaT1bXSxqO2lmKGEuZGF0YSl7aj1IYW5kbGViYXJzLmNyZWF0ZUZyYW1lKGEuZGF0YSl9aWYoZyl7cS5lYWNoKGcsZnVuY3Rpb24oayx2KXtpZihqKXtqLnJlbmRlck1hbmFnZXI9YjtqLnJvb3RDb250cm9sPWQ7ai5wYXRoPXMrIi8iK2srIi8iO2oucGFyZW50Q29udHJvbD1mfWkucHVzaChhLmZuKHt9LHtkYXRhOmp9KSl9KX1pZighZil7cmV0dXJuIG5ldyBIYW5kbGViYXJzLlNhZmVTdHJpbmcoaS5qb2luKCIiKSl9fX0sIndpdGgiOmZ1bmN0aW9uKGMsYSl7YT1hfHxjO2lmKCFhLmhhc2gucGF0aCl7cmV0dXJuIHcuYXBwbHkodGhpcyxhcmd1bWVudHMpfWVsc2V7fX0sImlmIjpmdW5jdGlvbihjLGEpe2E9YXx8YztpZighYS5oYXNoLnBhdGgpe3JldHVybiBJLmFwcGx5KHRoaXMsYXJndW1lbnRzKX1lbHNle319LCJ1bmxlc3MiOmZ1bmN0aW9uKGMsYSl7YT1hfHxjO2lmKCFhLmhhc2gucGF0aCl7cmV0dXJuIHUuYXBwbHkodGhpcyxhcmd1bWVudHMpfWVsc2V7fX0sInRleHQiOmZ1bmN0aW9uKGMsYSl7YT1hfHxjO3ZhciBiPWEuZGF0YS5yb290Q29udHJvbCxQPWEuZGF0YS5wYXRoLHM9KHEuc2FwLnN0YXJ0c1dpdGgoYS5oYXNoLnBhdGgsIi8iKT8iIjooUHx8IiIpKSthLmhhc2gucGF0aDtpZihzKXt2YXIgdj1iLmJpbmRQcm9wKHMpO3JldHVybiB2JiZuZXcgSGFuZGxlYmFycy5TYWZlU3RyaW5nKHYpfWVsc2V7dGhyb3cgbmV3IEVycm9yKCJUaGUgZXhwcmVzc2lvbiBcInRleHRcIiByZXF1aXJlcyB0aGUgb3B0aW9uIFwicGF0aFwiISIpfX0sImVsZW1lbnQiOmZ1bmN0aW9uKGMsYSl7YT1hfHxjO3ZhciBiPWEuZGF0YS5yZW5kZXJNYW5hZ2VyLGQ9YS5kYXRhLnJvb3RDb250cm9sLEU9ZC5jcmVhdGVET01FbGVtZW50KGEuaGFzaCxhLmRhdGEucGF0aCksUD1hLmRhdGEucGFyZW50RWxlbWVudDtpZihhLmZuKXt2YXIgQz1hLmZuKHt9LHtkYXRhOntyZW5kZXJNYW5hZ2VyOmIscm9vdENvbnRyb2w6ZCxwYXJlbnRFbGVtZW50OkV9fSl9aWYoUCl7UC5hZGRFbGVtZW50KEUpO3JldHVybn1yZXR1cm4gbmV3IEhhbmRsZWJhcnMuU2FmZVN0cmluZyhiLmdldEhUTUwoRSkpfSwiY29udHJvbCI6ZnVuY3Rpb24oYyxhKXthPWF8fGM7dmFyIGI9YS5kYXRhLnJlbmRlck1hbmFnZXIsQz1hLmRhdGEuY29udHJvbDtpZihDKXtyZXR1cm4gbmV3IEhhbmRsZWJhcnMuU2FmZVN0cmluZyhiLmdldEhUTUwoQykpfXZhciBkPWEuZGF0YS5yb290Q29udHJvbCxQPWEuZGF0YS5wYXRoLG09YS5kYXRhLmNoaWxkcmVuLHQ9YS5oYXNoWyJzYXAtdWktdHlwZSJdLE09cS5zYXAuZ2V0T2JqZWN0KHQpLmdldE1ldGFkYXRhKCksRD1hLmhhc2hbInNhcC11aS1kZWZhdWx0LWFnZ3JlZ2F0aW9uIl18fE0uZ2V0RGVmYXVsdEFnZ3JlZ2F0aW9uTmFtZSgpLHY9YS5kYXRhLnZpZXc7dmFyIGY9e307aWYoYS5mbil7YS5mbih7fSx7ZGF0YTp7cm9vdENvbnRyb2w6ZCxwYXRoOlAsY2hpbGRyZW46ZixkZWZhdWx0QWdncmVnYXRpb246RCx2aWV3OnZ9fSl9dmFyIHM9cS5leHRlbmQoe30sYS5oYXNoKTtxLmVhY2gocyxmdW5jdGlvbihrLFYpe2lmKGZba10pe2RlbGV0ZSBzW2tdfX0pO3ZhciBuPWQuY3JlYXRlQ29udHJvbChzLGEuZGF0YS5wYXRoLCEhbSx2KTtpZighcS5pc0VtcHR5T2JqZWN0KGYpKXtzPWEuaGFzaDt2YXIgQT1NLmdldEFsbEFnZ3JlZ2F0aW9ucygpO3EuZWFjaChmLGZ1bmN0aW9uKGcsail7Zm9yKHZhciBpPTAsbD1qLmxlbmd0aDtpPGw7aSsrKXt2YXIgaz1qW2ldLHg9QVtnXSx5PXgmJngubXVsdGlwbGU7aWYodHlwZW9mIHNbZ109PT0ic3RyaW5nIil7dmFyIEI9c2FwLnVpLmJhc2UuTWFuYWdlZE9iamVjdC5iaW5kaW5nUGFyc2VyKHNbZ10sdiYmdi5nZXRDb250cm9sbGVyKCkpO0IudGVtcGxhdGU9aztuLmJpbmRBZ2dyZWdhdGlvbihnLEIpfWVsc2V7aWYoeSl7bi5hZGRBZ2dyZWdhdGlvbihnLGspfWVsc2V7bi5zZXRBZ2dyZWdhdGlvbihnLGspfX19fSl9aWYobSl7dmFyIGc9YS5oYXNoWyJzYXAtdWktYWdncmVnYXRpb24iXXx8YS5kYXRhLmRlZmF1bHRBZ2dyZWdhdGlvbjttW2ddPW1bZ118fFtdO21bZ10ucHVzaChuKTtyZXR1cm59cmV0dXJuIG5ldyBIYW5kbGViYXJzLlNhZmVTdHJpbmcoYi5nZXRIVE1MKG4pKX0sInByb3BlcnR5IjpmdW5jdGlvbihjLGEpe2E9YXx8Yzt2YXIgYj1hLmRhdGEucm9vdENvbnRyb2wsbT1iLmdldE1ldGFkYXRhKCksUD1hLmhhc2gubmFtZSxnPW0uZ2V0QWxsUHJvcGVydGllcygpW1BdLl9zR2V0dGVyO3JldHVybiBiW2ddKCl9LCJhZ2dyZWdhdGlvbiI6ZnVuY3Rpb24oYyxhKXthPWF8fGM7dmFyIGI9YS5kYXRhLnJlbmRlck1hbmFnZXIsZD1hLmRhdGEucm9vdENvbnRyb2wsbT1kLmdldE1ldGFkYXRhKCksQT1hLmhhc2gubmFtZSxnPW0uZ2V0QWxsQWdncmVnYXRpb25zKClbQV0uX3NHZXR0ZXIsZj1bXTt2YXIgQz1kW2ddKCk7aWYoQyl7Zm9yKHZhciBpPTAsbD1DLmxlbmd0aDtpPGw7aSsrKXtpZihhLmZuKXtmLnB1c2goYS5mbih7fSx7ZGF0YTp7cmVuZGVyTWFuYWdlcjpiLHJvb3RDb250cm9sOmQsY29udHJvbDpDW2ldfX0pKX1lbHNle2YucHVzaChiLmdldEhUTUwoQ1tpXSkpfX19cmV0dXJuIG5ldyBIYW5kbGViYXJzLlNhZmVTdHJpbmcoZi5qb2luKCIiKSl9LCJldmVudCI6ZnVuY3Rpb24oYyxhKXthPWF8fGN9LCJjb250cm9sRGF0YSI6ZnVuY3Rpb24oYyxhKXthPWF8fGM7dmFyIGI9YS5kYXRhLnJvb3RDb250cm9sO3JldHVybiBuZXcgSGFuZGxlYmFycy5TYWZlU3RyaW5nKHIuZ2V0SFRNTChiKSl9fTtyZXR1cm4gb30oKSk7SC5wcm90b3R5cGUuY3JlYXRlTWV0YWRhdGE9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmdldENvbnRlbnQoKSxmPXRoaXMuX2ZuVGVtcGxhdGU9dGhpcy5fZm5UZW1wbGF0ZXx8SGFuZGxlYmFycy5jb21waWxlKHQpO3ZhciBtPXt9LGo9c2FwLnVpLmNvcmUudG1wbC5UZW1wbGF0ZUNvbnRyb2wuZ2V0TWV0YWRhdGEoKS5nZXRKU09OS2V5cygpLHA9c2FwLnVpLmNvcmUudG1wbC5UZW1wbGF0ZUNvbnRyb2wuZ2V0TWV0YWRhdGEoKS5nZXRBbGxQcml2YXRlQWdncmVnYXRpb25zKCk7dmFyIG89eyJwcm9wZXJ0eSI6ZnVuY3Rpb24oYyxhKXthPWF8fGM7dmFyIG49YS5oYXNoLm5hbWU7aWYobiYmbiE9PSJpZCImJiFqW25dKXttLnByb3BlcnRpZXM9bS5wcm9wZXJ0aWVzfHx7fTttLnByb3BlcnRpZXNbbl09cS5leHRlbmQoe30se3R5cGU6InN0cmluZyJ9LGEuaGFzaCl9ZWxzZXt0aHJvdyBuZXcgRXJyb3IoIlRoZSBwcm9wZXJ0eSBuYW1lIFwiIituKyJcIiBpcyByZXNlcnZlZC4iKX19LCJhZ2dyZWdhdGlvbiI6ZnVuY3Rpb24oYyxhKXthPWF8fGM7dmFyIG49YS5oYXNoLm5hbWU7aWYobiYmIWpbbl0mJiFwW25dKXthLmhhc2gubXVsdGlwbGU9YS5oYXNoLm11bHRpcGxlPT0idHJ1ZSI7bS5hZ2dyZWdhdGlvbnM9bS5hZ2dyZWdhdGlvbnN8fHt9O20uYWdncmVnYXRpb25zW25dPXEuZXh0ZW5kKHt9LGEuaGFzaCl9ZWxzZXt0aHJvdyBuZXcgRXJyb3IoIlRoZSBhZ2dyZWdhdGlvbiBuYW1lIFwiIituKyJcIiBpcyByZXNlcnZlZC4iKX19LCJldmVudCI6ZnVuY3Rpb24oYyxhKXthPWF8fGN9LCJjb250cm9sRGF0YSI6ZnVuY3Rpb24oYyxhKXthPWF8fGM7bS5faGFzQ29udHJvbERhdGE9dHJ1ZX19O3EuZWFjaChbImVhY2giLCJpZiIsInVubGVzcyIsIndpdGgiXSxmdW5jdGlvbihpLHYpe29bdl09ZnVuY3Rpb24oKXt9fSk7Zih7fSx7aGVscGVyczpvfSk7cmV0dXJuIG19O0gucHJvdG90eXBlLmNyZWF0ZVJlbmRlcmVyPWZ1bmN0aW9uKHYpe3ZhciB0PXRoaXMuZ2V0Q29udGVudCgpLGY9dGhpcy5fZm5UZW1wbGF0ZT10aGlzLl9mblRlbXBsYXRlfHxIYW5kbGViYXJzLmNvbXBpbGUodCk7dmFyIHI9ZnVuY3Rpb24oYSxjKXt2YXIgcz1mKGMuZ2V0Q29udGV4dCgpfHx7fSx7ZGF0YTp7cmVuZGVyTWFuYWdlcjphLHJvb3RDb250cm9sOmMsdmlldzp2fSxoZWxwZXJzOkguUkVOREVSX0hFTFBFUlN9KTthLndyaXRlKHMpfTtyZXR1cm4gcn07cmV0dXJuIEh9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS5Db3JlJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUuQ29yZScpO2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLkNvbXBvbmVudCcpKXsNCi8qDQogKiBTQVAgVUkgZGV2ZWxvcG1lbnQgdG9vbGtpdCBmb3IgSFRNTDUgKFNBUFVJNS9PcGVuVUk1KQ0KICogKGMpIENvcHlyaWdodCAyMDA5LTIwMTQgU0FQIFNFIG9yIGFuIFNBUCBhZmZpbGlhdGUgY29tcGFueS4gDQogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wIC0gc2VlIExJQ0VOU0UudHh0Lg0KICovDQpqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLkNvbXBvbmVudCcpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL0NvbXBvbmVudCIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ3NhcC91aS9iYXNlL01hbmFnZWRPYmplY3QnLCcuL0NvbXBvbmVudE1ldGFkYXRhJywnLi9Db3JlJ10sZnVuY3Rpb24ocSxNLEMsYSl7InVzZSBzdHJpY3QiO3ZhciBiPU0uZXh0ZW5kKCJzYXAudWkuY29yZS5Db21wb25lbnQiLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbihpLHMpe00uYXBwbHkodGhpcyxhcmd1bWVudHMpfSxtZXRhZGF0YTp7c3RlcmVvdHlwZToiY29tcG9uZW50IiwiYWJzdHJhY3QiOnRydWUsdmVyc2lvbjoiMC4wIixpbmNsdWRlczpbXSxkZXBlbmRlbmNpZXM6e2xpYnM6W10sY29tcG9uZW50czpbXSx1aTV2ZXJzaW9uOiIifSxjb25maWc6e30sY3VzdG9taXppbmc6e30sbGlicmFyeToic2FwLnVpLmNvcmUifX0sQyk7Yi5hY3RpdmF0ZUN1c3RvbWl6aW5nPWZ1bmN0aW9uKGMpe307Yi5kZWFjdGl2YXRlQ3VzdG9taXppbmc9ZnVuY3Rpb24oYyl7fTtiLmdldE93bmVySWRGb3I9ZnVuY3Rpb24obyl7aWYobyYmKG8gaW5zdGFuY2VvZiBifHxvIGluc3RhbmNlb2Ygc2FwLnVpLmNvcmUubXZjLlZpZXcpKXtyZXR1cm4gTS5nZXRPd25lcklkRm9yKG8pfX07Yi5wcm90b3R5cGUuZ2V0SW50ZXJmYWNlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9O2IucHJvdG90eXBlLl9pbml0Q29tcG9zaXRlU3VwcG9ydD1mdW5jdGlvbihzKXt0aGlzLl9tTW9ja1NlcnZlcnM9e307dGhpcy5nZXRNZXRhZGF0YSgpLm9uSW5pdENvbXBvbmVudCgpO3RoaXMub0NvbXBvbmVudERhdGE9cyYmcy5jb21wb25lbnREYXRhO3RoaXMuZ2V0TWV0YWRhdGEoKS5pbml0KCk7dGhpcy5pbml0Q29tcG9uZW50TW9kZWxzKCk7aWYodGhpcy5vbldpbmRvd0Vycm9yKXt0aGlzLl9mbldpbmRvd0Vycm9ySGFuZGxlcj1xLnByb3h5KGZ1bmN0aW9uKGUpe3ZhciBFPWUub3JpZ2luYWxFdmVudDt0aGlzLm9uV2luZG93RXJyb3IoRS5tZXNzYWdlLEUuZmlsZW5hbWUsRS5saW5lbm8pfSx0aGlzKTtxKHdpbmRvdykuYmluZCgiZXJyb3IiLHRoaXMuX2ZuV2luZG93RXJyb3JIYW5kbGVyKX1pZih0aGlzLm9uV2luZG93QmVmb3JlVW5sb2FkKXt0aGlzLl9mbldpbmRvd0JlZm9yZVVubG9hZEhhbmRsZXI9cS5wcm94eSh0aGlzLm9uV2luZG93QmVmb3JlVW5sb2FkLHRoaXMpO3Eod2luZG93KS5iaW5kKCJiZWZvcmV1bmxvYWQiLHRoaXMuX2ZuV2luZG93QmVmb3JlVW5sb2FkSGFuZGxlcil9aWYodGhpcy5vbldpbmRvd1VubG9hZCl7dGhpcy5fZm5XaW5kb3dVbmxvYWRIYW5kbGVyPXEucHJveHkodGhpcy5vbldpbmRvd1VubG9hZCx0aGlzKTtxKHdpbmRvdykuYmluZCgidW5sb2FkIix0aGlzLl9mbldpbmRvd1VubG9hZEhhbmRsZXIpfX07Yi5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbigpe2lmKHRoaXMuX21Nb2NrU2VydmVycyl7cS5lYWNoKHRoaXMuX21Nb2NrU2VydmVycyxmdW5jdGlvbihuLG0pe20uc3RvcCgpfSk7ZGVsZXRlIHRoaXMuX21Nb2NrU2VydmVyc31pZih0aGlzLl9mbldpbmRvd0Vycm9ySGFuZGxlcil7cSh3aW5kb3cpLnVuYmluZCgiZXJyb3IiLHRoaXMuX2ZuV2luZG93RXJyb3JIYW5kbGVyKTtkZWxldGUgdGhpcy5fZm5XaW5kb3dFcnJvckhhbmRsZXJ9aWYodGhpcy5fZm5XaW5kb3dCZWZvcmVVbmxvYWRIYW5kbGVyKXtxKHdpbmRvdykudW5iaW5kKCJiZWZvcmV1bmxvYWQiLHRoaXMuX2ZuV2luZG93QmVmb3JlVW5sb2FkSGFuZGxlcik7ZGVsZXRlIHRoaXMuX2ZuV2luZG93QmVmb3JlVW5sb2FkSGFuZGxlcn1pZih0aGlzLl9mbldpbmRvd1VubG9hZEhhbmRsZXIpe3Eod2luZG93KS51bmJpbmQoInVubG9hZCIsdGhpcy5fZm5XaW5kb3dVbmxvYWRIYW5kbGVyKTtkZWxldGUgdGhpcy5fZm5XaW5kb3dVbmxvYWRIYW5kbGVyfWlmKHRoaXMuX29FdmVudEJ1cyl7dGhpcy5fb0V2ZW50QnVzLmRlc3Ryb3koKTtkZWxldGUgdGhpcy5fb0V2ZW50QnVzfU0ucHJvdG90eXBlLmRlc3Ryb3kuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMuZ2V0TWV0YWRhdGEoKS5vbkV4aXRDb21wb25lbnQoKX07Yi5wcm90b3R5cGUuZ2V0Q29tcG9uZW50RGF0YT1mdW5jdGlvbigpe3JldHVybiB0aGlzLm9Db21wb25lbnREYXRhfTtiLnByb3RvdHlwZS5nZXRFdmVudEJ1cz1mdW5jdGlvbigpe2lmKCF0aGlzLl9vRXZlbnRCdXMpe3Euc2FwLnJlcXVpcmUoInNhcC51aS5jb3JlLkV2ZW50QnVzIik7dGhpcy5fb0V2ZW50QnVzPW5ldyBzYXAudWkuY29yZS5FdmVudEJ1cygpfXJldHVybiB0aGlzLl9vRXZlbnRCdXN9O2IucHJvdG90eXBlLmluaXRDb21wb25lbnRNb2RlbHM9ZnVuY3Rpb24obSxzKXt2YXIgbz10aGlzLmdldE1ldGFkYXRhKCk7dmFyIGM9bXx8by5nZXRNb2RlbHMoKSxTPXN8fG8uZ2V0U2VydmljZXMoKTtpZihjKXt2YXIgZj1mdW5jdGlvbihuLHUsZSxnKXtpZih0aGlzLl9tTW9ja1NlcnZlcnNbbl0pe3RoaXMuX21Nb2NrU2VydmVyc1tuXS5zdG9wKCl9cS5zYXAucmVxdWlyZSgic2FwLnVpLmNvcmUudXRpbC5Nb2NrU2VydmVyIik7dGhpcy5fbU1vY2tTZXJ2ZXJzW25dPW5ldyBzYXAudWkuY29yZS51dGlsLk1vY2tTZXJ2ZXIoe3Jvb3RVcmk6dX0pO3RoaXMuX21Nb2NrU2VydmVyc1tuXS5zaW11bGF0ZShlLGcpO3RoaXMuX21Nb2NrU2VydmVyc1tuXS5zdGFydCgpfTt2YXIgZD1mdW5jdGlvbihuLGUpe3ZhciB1PWUudXJpLFQ9ZS50eXBlO3Euc2FwLnJlcXVpcmUoVCk7dmFyIGc9cS5zYXAuZ2V0T2JqZWN0KFQpO3ZhciBoO2lmKFQ9PT0ic2FwLnVpLm1vZGVsLnJlc291cmNlLlJlc291cmNlTW9kZWwiKXtoPW5ldyBnKHtidW5kbGVVcmw6dX0pfWVsc2UgaWYoVD09PSJzYXAudWkubW9kZWwub2RhdGEuT0RhdGFNb2RlbCIpe2lmKGUubW9ja3NlcnZlcil7Zi5jYWxsKHRoaXMsbix1LGUubW9ja3NlcnZlci5tb2RlbCxlLm1vY2tzZXJ2ZXIuZGF0YSl9aD1uZXcgZyh1LGUuc2V0dGluZ3MpfWVsc2UgaWYoVD09PSJzYXAudWkubW9kZWwuanNvbi5KU09OTW9kZWwifHxUPT09InNhcC51aS5tb2RlbC54bWwuWE1MTW9kZWwiKXtoPW5ldyBnKCk7aWYodSl7aC5sb2FkRGF0YSh1KX19cmV0dXJuIGh9O3ZhciB0PXRoaXM7cS5lYWNoKGMsZnVuY3Rpb24oayxlKXt2YXIgZz1lLnNlcnZpY2UsaDtpZihnKXt2YXIgaT1TW2ddO2g9ZC5jYWxsKHQsayxpKX1lbHNlIGlmKGUudHlwZSl7aD1kLmNhbGwodCxrLGUpfWlmKGgpe3Quc2V0TW9kZWwoaCxrfHx1bmRlZmluZWQpfX0pfX07c2FwLnVpLmNvbXBvbmVudD1mdW5jdGlvbihjKXtpZighYyl7dGhyb3cgbmV3IEVycm9yKCJzYXAudWkuY29tcG9uZW50IGNhbm5vdCBiZSBjYWxsZWQgd2l0aG91dCBwYXJhbWV0ZXIhIil9aWYodHlwZW9mIGM9PT0ic3RyaW5nIil7cmV0dXJuIHNhcC51aS5nZXRDb3JlKCkuZ2V0Q29tcG9uZW50KGMpfWVsc2V7dmFyIG49Yy5uYW1lLGk9Yy5pZCxvPWMuY29tcG9uZW50RGF0YSxzPW4rIi5Db21wb25lbnQiLFM9Yy5zZXR0aW5nczt2YXIgZD1zYXAudWkuY29tcG9uZW50LmxvYWQoYyx0cnVlKTt2YXIgST1uZXcgZChxLmV4dGVuZCh7fSxTLHtpZDppLGNvbXBvbmVudERhdGE6b30pKTtxLnNhcC5sb2cuaW5mbygiQ29tcG9uZW50IGluc3RhbmNlIElkID0gIitJLmdldElkKCkpO3JldHVybiBJfX07c2FwLnVpLmNvbXBvbmVudC5sb2FkPWZ1bmN0aW9uKGMsZil7dmFyIG49Yy5uYW1lLHU9Yy51cmwscz1uKyIuQ29tcG9uZW50IixwPXMrIi1wcmVsb2FkIixQPXNhcC51aS5nZXRDb3JlKCkuZ2V0Q29uZmlndXJhdGlvbigpLmdldENvbXBvbmVudFByZWxvYWQoKTtpZighbil7dGhyb3cgbmV3IEVycm9yKCJUaGUgbmFtZSBvZiB0aGUgY29tcG9uZW50IGlzIHVuZGVmaW5lZC4iKX1pZih1KXtxLnNhcC5yZWdpc3Rlck1vZHVsZVBhdGgobix1KX1pZihQPT09InN5bmMifHxQPT09ImFzeW5jIil7dHJ5e2lmKCFxLnNhcC5pc0RlY2xhcmVkKHMsdHJ1ZSkpe3Euc2FwLnJlcXVpcmUocCl9fWNhdGNoKGUpe3Euc2FwLmxvZy53YXJuaW5nKCJjb3VsZG4ndCBwcmVsb2FkIGNvbXBvbmVudCBmcm9tICIrcCsiOiAiKygoZSYmZS5tZXNzYWdlKXx8ZSkpfX1xLnNhcC5yZXF1aXJlKHMpO3ZhciBvPXEuc2FwLmdldE9iamVjdChzKTtpZighbyl7aWYoZil7dGhyb3cgbmV3IEVycm9yKCJUaGUgc3BlY2lmaWVkIGNvbXBvbmVudCBjb250cm9sbGVyXCIiK3MrIlwiIGNvdWxkIG5vdCBiZSBmb3VuZCEiKX1lbHNle3Euc2FwLmxvZy53YXJuaW5nKCJUaGUgc3BlY2lmaWVkIGNvbXBvbmVudCBjb250cm9sbGVyIFwiIitzKyJcIiBjb3VsZCBub3QgYmUgZm91bmQhIil9fXJldHVybiBvfTtyZXR1cm4gYn0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLkNvbnRyb2wnKSl7DQovKiENCiAqIFNBUCBVSSBkZXZlbG9wbWVudCB0b29sa2l0IGZvciBIVE1MNSAoU0FQVUk1L09wZW5VSTUpDQogKiAoYykgQ29weXJpZ2h0IDIwMDktMjAxNCBTQVAgU0Ugb3IgYW4gU0FQIGFmZmlsaWF0ZSBjb21wYW55LiANCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgLSBzZWUgTElDRU5TRS50eHQuDQogKi8NCmpRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUuQ29udHJvbCcpO2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLkN1c3RvbVN0eWxlQ2xhc3NTdXBwb3J0Jykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUuQ3VzdG9tU3R5bGVDbGFzc1N1cHBvcnQnKTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS5FbGVtZW50Jykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUuRWxlbWVudCcpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL0VsZW1lbnQiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvYmFzZS9NYW5hZ2VkT2JqZWN0JywnLi9Db3JlJywnLi9FbGVtZW50TWV0YWRhdGEnLCdzYXAvdWkvbW9kZWwvU2ltcGxlVHlwZScsJ2pxdWVyeS5zYXAuc3RyaW5ncyddLGZ1bmN0aW9uKHEsTSxDLEUsUyl7InVzZSBzdHJpY3QiO3ZhciBhPU0uZXh0ZW5kKCJzYXAudWkuY29yZS5FbGVtZW50Iix7bWV0YWRhdGE6e3N0ZXJlb3R5cGU6ImVsZW1lbnQiLCJhYnN0cmFjdCI6dHJ1ZSxwdWJsaWNNZXRob2RzOlsiZ2V0SWQiLCJnZXRNZXRhZGF0YSIsImdldFRvb2x0aXBfQXNTdHJpbmciLCJnZXRUb29sdGlwX1RleHQiLCJnZXRNb2RlbCIsInNldE1vZGVsIiwiaGFzTW9kZWwiLCJiaW5kRWxlbWVudCIsInVuYmluZEVsZW1lbnQiLCJnZXRFbGVtZW50QmluZGluZyIsInByb3AiLCJnZXRMYXlvdXREYXRhIiwic2V0TGF5b3V0RGF0YSJdLGxpYnJhcnk6InNhcC51aS5jb3JlIixwcm9wZXJ0aWVzOnt9LGFnZ3JlZ2F0aW9uczp7dG9vbHRpcDp7bmFtZToidG9vbHRpcCIsdHlwZToic2FwLnVpLmNvcmUuVG9vbHRpcEJhc2UiLGFsdFR5cGVzOlsic3RyaW5nIl0sbXVsdGlwbGU6ZmFsc2V9LGN1c3RvbURhdGE6e25hbWU6ImN1c3RvbURhdGEiLHR5cGU6InNhcC51aS5jb3JlLkN1c3RvbURhdGEiLG11bHRpcGxlOnRydWUsc2luZ3VsYXJOYW1lOiJjdXN0b21EYXRhIn0sbGF5b3V0RGF0YTp7bmFtZToibGF5b3V0RGF0YSIsdHlwZToic2FwLnVpLmNvcmUuTGF5b3V0RGF0YSIsbXVsdGlwbGU6ZmFsc2Usc2luZ3VsYXJOYW1lOiJsYXlvdXREYXRhIn0sZGVwZW5kZW50czp7bmFtZToiZGVwZW5kZW50cyIsdHlwZToic2FwLnVpLmNvcmUuQ29udHJvbCIsbXVsdGlwbGU6dHJ1ZX19LGFzc29jaWF0aW9uczp7fSxldmVudHM6e319LGNvbnN0cnVjdG9yOmZ1bmN0aW9uKGkscyl7TS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LHJlbmRlcmVyOm51bGx9LEUpO2EuZGVmaW5lQ2xhc3M9ZnVuY3Rpb24oYyxzLG0pe3JldHVybiBzYXAudWkuYmFzZS5PYmplY3QuZGVmaW5lQ2xhc3MoYyxzLG18fEUpfTthLnByb3RvdHlwZS5nZXRJbnRlcmZhY2U9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc307YS5wcm90b3R5cGUuX2hhbmRsZUV2ZW50PWZ1bmN0aW9uKGUpe3ZhciBoPSJvbiIrZS50eXBlO3RoaXMuX2NhbGxFdmVudEhhbmRsZXModGhpcy5hQmVmb3JlRGVsZWdhdGVzLnNsaWNlKDApLGgsZSx0cnVlKTt0aGlzLl9jYWxsRXZlbnRIYW5kbGVzKFt0aGlzXSxoLGUpO3RoaXMuX2NhbGxFdmVudEhhbmRsZXModGhpcy5hRGVsZWdhdGVzLnNsaWNlKDApLGgsZSx0cnVlKX07YS5wcm90b3R5cGUuX2NhbGxFdmVudEhhbmRsZXM9ZnVuY3Rpb24oaCxILGUsZCl7aWYoaC5sZW5ndGg+MCl7Zm9yKHZhciBpPTA7aTxoLmxlbmd0aDtpKyspe2lmKGUuaXNJbW1lZGlhdGVIYW5kbGVyUHJvcGFnYXRpb25TdG9wcGVkKCkpe2JyZWFrfXZhciBvPWQ/aFtpXS5vRGVsZWdhdGU6aFtpXTt2YXIgdD0oZCYmaFtpXS52VGhpcyk/aFtpXS52VGhpczpvO2lmKHQ9PT10cnVlKXt0PXRoaXN9aWYob1tIXSl7b1tIXS5jYWxsKHQsZSl9fX19O2EuY3JlYXRlPWZ1bmN0aW9uKGQsayl7aWYoIWR8fGQgaW5zdGFuY2VvZiBhfHx0eXBlb2YgZCE9PSJvYmplY3QifHxkIGluc3RhbmNlb2YgU3RyaW5nKXtyZXR1cm4gZH1mdW5jdGlvbiBnKHQpe2lmKHR5cGVvZiB0PT09ImZ1bmN0aW9uIil7cmV0dXJuIHR9aWYodHlwZW9mIHQ9PT0ic3RyaW5nIil7cmV0dXJuIHEuc2FwLmdldE9iamVjdCh0KX19dmFyIGM9ZyhkLlR5cGUpfHxnKGsmJmsudHlwZSk7aWYodHlwZW9mIGM9PT0iZnVuY3Rpb24iKXtyZXR1cm4gbmV3IGMoZCl9dmFyIG09IkRvbid0IGtub3cgaG93IHRvIGNyZWF0ZSBhbiBFbGVtZW50IGZyb20gIitkKyIgKCIrKHR5cGVvZiBkKSsiKSI7cS5zYXAubG9nLmZhdGFsKG0pO3Rocm93IG5ldyBFcnJvcihtKX07YS5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtpZih0aGlzLmdldE1ldGFkYXRhKXtyZXR1cm4iRWxlbWVudCAiK3RoaXMuZ2V0TWV0YWRhdGEoKS5nZXROYW1lKCkrIiMiK3RoaXMuc0lkfWVsc2V7cmV0dXJuIkVsZW1lbnQge3Vua25vd24gY2xhc3N9IyIrdGhpcy5zSWR9fTthLnByb3RvdHlwZS5nZXREb21SZWY9ZnVuY3Rpb24ocyl7cmV0dXJuIHEuc2FwLmRvbUJ5SWQocz90aGlzLmdldElkKCkrIi0iK3M6dGhpcy5nZXRJZCgpKX07YS5wcm90b3R5cGUuJD1mdW5jdGlvbihzKXtyZXR1cm4gcSh0aGlzLmdldERvbVJlZihzKSl9O2EucHJvdG90eXBlLmlzQWN0aXZlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub1BhcmVudCYmdGhpcy5vUGFyZW50LmlzQWN0aXZlKCl9O2EucHJvdG90eXBlLnByb3A9ZnVuY3Rpb24ocCx2KXt2YXIgUD10aGlzLmdldE1ldGFkYXRhKCkuZ2V0SlNPTktleXMoKVtwXTtpZihQKXtpZihhcmd1bWVudHMubGVuZ3RoPT0xKXtyZXR1cm4gdGhpc1tQLl9zR2V0dGVyXSgpfWVsc2V7dGhpc1tQLl9zTXV0YXRvcl0odik7cmV0dXJuIHRoaXN9fX07YS5wcm90b3R5cGUuaW5zZXJ0RGVwZW5kZW50PWZ1bmN0aW9uKGMsaSl7cmV0dXJuIHRoaXMuaW5zZXJ0QWdncmVnYXRpb24oImRlcGVuZGVudHMiLGMsaSx0cnVlKX07YS5wcm90b3R5cGUuYWRkRGVwZW5kZW50PWZ1bmN0aW9uKGMpe3JldHVybiB0aGlzLmFkZEFnZ3JlZ2F0aW9uKCJkZXBlbmRlbnRzIixjLHRydWUpfTthLnByb3RvdHlwZS5yZW1vdmVEZXBlbmRlbnQ9ZnVuY3Rpb24oYyl7cmV0dXJuIHRoaXMucmVtb3ZlQWdncmVnYXRpb24oImRlcGVuZGVudHMiLGMsdHJ1ZSl9O2EucHJvdG90eXBlLnJlbW92ZUFsbERlcGVuZGVudHM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yZW1vdmVBbGxBZ2dyZWdhdGlvbigiZGVwZW5kZW50cyIsdHJ1ZSl9O2EucHJvdG90eXBlLmRlc3Ryb3lEZXBlbmRlbnRzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGVzdHJveUFnZ3JlZ2F0aW9uKCJkZXBlbmRlbnRzIix0cnVlKX07YS5wcm90b3R5cGUucmVyZW5kZXI9ZnVuY3Rpb24oKXtpZih0aGlzLm9QYXJlbnQpe3RoaXMub1BhcmVudC5yZXJlbmRlcigpfX07YS5wcm90b3R5cGUuZ2V0VUlBcmVhPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub1BhcmVudD90aGlzLm9QYXJlbnQuZ2V0VUlBcmVhKCk6bnVsbH07YS5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbihzKXtNLnByb3RvdHlwZS5kZXN0cm95LmNhbGwodGhpcyxzKTt0aGlzLiQoKS5yZW1vdmUoKX07YS5wcm90b3R5cGUuZmlyZUV2ZW50PWZ1bmN0aW9uKGUscCl7dmFyIEE9QXJyYXkucHJvdG90eXBlLnNsaWNlLmFwcGx5KGFyZ3VtZW50cyk7QVsxXT1wPXB8fHt9O3AuaWQ9cC5pZHx8dGhpcy5nZXRJZCgpO3JldHVybiBzYXAudWkuYmFzZS5FdmVudFByb3ZpZGVyLnByb3RvdHlwZS5maXJlRXZlbnQuYXBwbHkodGhpcyxBKX07YS5wcm90b3R5cGUuYWRkRGVsZWdhdGU9ZnVuY3Rpb24oZCxjLHQsYil7dGhpcy5yZW1vdmVEZWxlZ2F0ZShkKTtpZih0eXBlb2YgYz09PSJvYmplY3QiKXtiPXQ7dD1jO2M9ZmFsc2V9aWYodHlwZW9mIHQ9PT0iYm9vbGVhbiIpe2I9dDt0PXVuZGVmaW5lZH0oYz90aGlzLmFCZWZvcmVEZWxlZ2F0ZXM6dGhpcy5hRGVsZWdhdGVzKS5wdXNoKHtvRGVsZWdhdGU6ZCxiQ2xvbmU6ISFiLHZUaGlzOigodD09PXRoaXMpP3RydWU6dCl9KTtyZXR1cm4gdGhpc307YS5wcm90b3R5cGUucmVtb3ZlRGVsZWdhdGU9ZnVuY3Rpb24oZCl7Zm9yKHZhciBpPTA7aTx0aGlzLmFEZWxlZ2F0ZXMubGVuZ3RoO2krKyl7aWYodGhpcy5hRGVsZWdhdGVzW2ldLm9EZWxlZ2F0ZT09ZCl7dGhpcy5hRGVsZWdhdGVzLnNwbGljZShpLDEpfX1mb3IodmFyIGk9MDtpPHRoaXMuYUJlZm9yZURlbGVnYXRlcy5sZW5ndGg7aSsrKXtpZih0aGlzLmFCZWZvcmVEZWxlZ2F0ZXNbaV0ub0RlbGVnYXRlPT1kKXt0aGlzLmFCZWZvcmVEZWxlZ2F0ZXMuc3BsaWNlKGksMSl9fXJldHVybiB0aGlzfTthLnByb3RvdHlwZS5hZGRFdmVudERlbGVnYXRlPWZ1bmN0aW9uKGQsdCl7cmV0dXJuIHRoaXMuYWRkRGVsZWdhdGUoZCxmYWxzZSx0LHRydWUpfTthLnByb3RvdHlwZS5yZW1vdmVFdmVudERlbGVnYXRlPWZ1bmN0aW9uKGQpe3JldHVybiB0aGlzLnJlbW92ZURlbGVnYXRlKGQpfTthLnByb3RvdHlwZS5nZXRGb2N1c0RvbVJlZj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmdldERvbVJlZigpfHxudWxsfTthLnByb3RvdHlwZS5mb2N1cz1mdW5jdGlvbigpe3ZhciBmPXRoaXMuZ2V0Rm9jdXNEb21SZWYoKTtpZihmKXt0cnl7Zi5mb2N1cygpfWNhdGNoKGUpe3ZhciBpPWYuaWQ/IiAoaWQ6ICIrZi5pZCsiKSI6IiAiO3Euc2FwLmxvZy53YXJuaW5nKCJET00gZWxlbWVudCIraSsiIGluICIrdGhpcy50b1N0cmluZygpKyIgd2hpY2ggc2hvdWxkIGJlIGZvY3VzZWQgY2Fubm90IGJlIGZvY3VzZWQ6ICIrZS5tZXNzYWdlKX19fTthLnByb3RvdHlwZS5nZXRGb2N1c0luZm89ZnVuY3Rpb24oKXtyZXR1cm57aWQ6dGhpcy5nZXRJZCgpfX07YS5wcm90b3R5cGUuYXBwbHlGb2N1c0luZm89ZnVuY3Rpb24oZil7dGhpcy5mb2N1cygpO3JldHVybiB0aGlzfTthLnByb3RvdHlwZS5fcmVmcmVzaFRvb2x0aXBCYXNlRGVsZWdhdGU9ZnVuY3Rpb24odCl7dmFyIG89dGhpcy5nZXRUb29sdGlwKCk7aWYobyBpbnN0YW5jZW9mIHNhcC51aS5jb3JlLlRvb2x0aXBCYXNlKXt0aGlzLnJlbW92ZURlbGVnYXRlKG8pfWlmKHQgaW5zdGFuY2VvZiBzYXAudWkuY29yZS5Ub29sdGlwQmFzZSl7dC5fY3VycmVudENvbnRyb2w9dGhpczt0aGlzLmFkZERlbGVnYXRlKHQpfX07YS5wcm90b3R5cGUuc2V0VG9vbHRpcD1mdW5jdGlvbih0KXt0aGlzLl9yZWZyZXNoVG9vbHRpcEJhc2VEZWxlZ2F0ZSh0KTt0aGlzLnNldEFnZ3JlZ2F0aW9uKCJ0b29sdGlwIix0KTtyZXR1cm4gdGhpc307YS5wcm90b3R5cGUuZ2V0VG9vbHRpcD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmdldEFnZ3JlZ2F0aW9uKCJ0b29sdGlwIil9O2EucnVuV2l0aFByZXByb2Nlc3NvcnM9TS5ydW5XaXRoUHJlcHJvY2Vzc29yczthLnByb3RvdHlwZS5nZXRUb29sdGlwX0FzU3RyaW5nPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5nZXRUb29sdGlwKCk7aWYodHlwZW9mIHQ9PT0ic3RyaW5nInx8dCBpbnN0YW5jZW9mIFN0cmluZyl7cmV0dXJuIHR9cmV0dXJuIHVuZGVmaW5lZH07YS5wcm90b3R5cGUuZ2V0VG9vbHRpcF9UZXh0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5nZXRUb29sdGlwKCk7aWYodCYmdHlwZW9mIHQuZ2V0VGV4dD09PSJmdW5jdGlvbiIpe3JldHVybiB0LmdldFRleHQoKX1yZXR1cm4gdH07KGZ1bmN0aW9uKCl7dmFyIGc9ZnVuY3Rpb24oZSxrKXt2YXIgZD1lLmdldEFnZ3JlZ2F0aW9uKCJjdXN0b21EYXRhIik7aWYoZCl7Zm9yKHZhciBpPTA7aTxkLmxlbmd0aDtpKyspe2lmKGRbaV0uZ2V0S2V5KCk9PWspe3JldHVybiBkW2ldfX19cmV0dXJuIG51bGx9O3ZhciBzPWZ1bmN0aW9uKGUsayx2LHcpe2lmKHY9PT1udWxsKXt2YXIgZD1nKGUsayk7aWYoIWQpe3JldHVybn12YXIgYj1lLmdldEFnZ3JlZ2F0aW9uKCJjdXN0b21EYXRhIikubGVuZ3RoO2lmKGI9PTEpe2UuZGVzdHJveUFnZ3JlZ2F0aW9uKCJjdXN0b21EYXRhIix0cnVlKX1lbHNle2UucmVtb3ZlQWdncmVnYXRpb24oImN1c3RvbURhdGEiLGQsdHJ1ZSk7ZC5kZXN0cm95KCl9fWVsc2V7dmFyIGQ9ZyhlLGspO2lmKGQpe2Quc2V0VmFsdWUodik7ZC5zZXRXcml0ZVRvRG9tKHcpfWVsc2V7dmFyIGQ9bmV3IHNhcC51aS5jb3JlLkN1c3RvbURhdGEoe2tleTprLHZhbHVlOnYsd3JpdGVUb0RvbTp3fSk7ZS5hZGRBZ2dyZWdhdGlvbigiY3VzdG9tRGF0YSIsZCx0cnVlKX19fTthLnByb3RvdHlwZS5kYXRhPWZ1bmN0aW9uKCl7dmFyIGI9YXJndW1lbnRzLmxlbmd0aDtpZihiPT0wKXt2YXIgZD10aGlzLmdldEFnZ3JlZ2F0aW9uKCJjdXN0b21EYXRhIikscj17fTtpZihkKXtmb3IodmFyIGk9MDtpPGQubGVuZ3RoO2krKyl7cltkW2ldLmdldEtleSgpXT1kW2ldLmdldFZhbHVlKCl9fXJldHVybiByfWVsc2UgaWYoYj09MSl7dmFyIGM9YXJndW1lbnRzWzBdO2lmKGM9PT1udWxsKXt0aGlzLmRlc3Ryb3lBZ2dyZWdhdGlvbigiY3VzdG9tRGF0YSIsdHJ1ZSk7cmV0dXJuIHRoaXN9ZWxzZSBpZih0eXBlb2YgYz09InN0cmluZyIpe3ZhciBlPWcodGhpcyxjKTtyZXR1cm4gZT9lLmdldFZhbHVlKCk6bnVsbH1lbHNlIGlmKHR5cGVvZiBjPT0ib2JqZWN0Iil7Zm9yKHZhciBrIGluIGMpe3ModGhpcyxrLGNba10pfXJldHVybiB0aGlzfWVsc2V7dGhyb3cgbmV3IEVycm9yKCJXaGVuIGRhdGEoKSBpcyBjYWxsZWQgd2l0aCBvbmUgYXJndW1lbnQsIHRoaXMgYXJndW1lbnQgbXVzdCBiZSBhIHN0cmluZywgYW4gb2JqZWN0IG9yIG51bGwsIGJ1dCBpcyAiKyh0eXBlb2YgYykrIjoiK2MrIiAob24gVUkgRWxlbWVudCB3aXRoIElEICciK3RoaXMuZ2V0SWQoKSsiJykiKX19ZWxzZSBpZihiPT0yKXtzKHRoaXMsYXJndW1lbnRzWzBdLGFyZ3VtZW50c1sxXSk7cmV0dXJuIHRoaXN9ZWxzZSBpZihiPT0zKXtzKHRoaXMsYXJndW1lbnRzWzBdLGFyZ3VtZW50c1sxXSxhcmd1bWVudHNbMl0pO3JldHVybiB0aGlzfWVsc2V7dGhyb3cgbmV3IEVycm9yKCJkYXRhKCkgbWF5IG9ubHkgYmUgY2FsbGVkIHdpdGggMC0zIGFyZ3VtZW50cyAob24gVUkgRWxlbWVudCB3aXRoIElEICciK3RoaXMuZ2V0SWQoKSsiJykiKX19fSkoKTthLnByb3RvdHlwZS5jbG9uZT1mdW5jdGlvbihJLGwpe3ZhciBjPU0ucHJvdG90eXBlLmNsb25lLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtmb3IodmFyIGk9MDtpPHRoaXMuYURlbGVnYXRlcy5sZW5ndGg7aSsrKXtpZih0aGlzLmFEZWxlZ2F0ZXNbaV0uYkNsb25lKXtjLmFEZWxlZ2F0ZXMucHVzaCh0aGlzLmFEZWxlZ2F0ZXNbaV0pfX1mb3IodmFyIGk9MDtpPHRoaXMuYUJlZm9yZURlbGVnYXRlcy5sZW5ndGg7aSsrKXtpZih0aGlzLmFCZWZvcmVEZWxlZ2F0ZXNbaV0uYkNsb25lKXtjLmFCZWZvcmVEZWxlZ2F0ZXMucHVzaCh0aGlzLmFCZWZvcmVEZWxlZ2F0ZXNbaV0pfX1yZXR1cm4gY307YS5wcm90b3R5cGUuZmluZEVsZW1lbnRzPWZ1bmN0aW9uKHIpe3ZhciBjPU0ucHJvdG90eXBlLmZpbmRBZ2dyZWdhdGVkT2JqZWN0cy5jYWxsKHRoaXMscik7cmV0dXJuIGN9O2EucHJvdG90eXBlLnNldExheW91dERhdGE9ZnVuY3Rpb24obCl7dGhpcy5zZXRBZ2dyZWdhdGlvbigibGF5b3V0RGF0YSIsbCx0cnVlKTt2YXIgTD10aGlzLmdldFBhcmVudCgpO2lmKEwpe3ZhciBlPXEuRXZlbnQoIkxheW91dERhdGFDaGFuZ2UiKTtlLnNyY0NvbnRyb2w9dGhpcztMLl9oYW5kbGVFdmVudChlKX1yZXR1cm4gdGhpc307YS5wcm90b3R5cGUuYmluZEVsZW1lbnQ9ZnVuY3Rpb24ocCxQKXtyZXR1cm4gdGhpcy5iaW5kT2JqZWN0KHAsUCl9O2EucHJvdG90eXBlLnVuYmluZEVsZW1lbnQ9ZnVuY3Rpb24obSl7cmV0dXJuIHRoaXMudW5iaW5kT2JqZWN0KG0pfTthLnByb3RvdHlwZS5nZXRFbGVtZW50QmluZGluZz1mdW5jdGlvbihtKXtyZXR1cm4gdGhpcy5nZXRPYmplY3RCaW5kaW5nKG0pfTtyZXR1cm4gYX0sdHJ1ZSl9O3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL0N1c3RvbVN0eWxlQ2xhc3NTdXBwb3J0IixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnLi9FbGVtZW50J10sZnVuY3Rpb24ocSxFKXsidXNlIHN0cmljdCI7dmFyIEM9ZnVuY3Rpb24oKXtpZighKHRoaXMgaW5zdGFuY2VvZiBFKSl7cmV0dXJufXZhciBvPXRoaXMuY2xvbmU7dGhpcy5jbG9uZT1mdW5jdGlvbigpe3ZhciBjPW8uYXBwbHkodGhpcyxhcmd1bWVudHMpO2lmKHRoaXMuYUN1c3RvbVN0eWxlQ2xhc3Nlcyl7Yy5hQ3VzdG9tU3R5bGVDbGFzc2VzPXRoaXMuYUN1c3RvbVN0eWxlQ2xhc3Nlcy5zbGljZSgpfXJldHVybiBjfTt0aGlzLmFkZFN0eWxlQ2xhc3M9ZnVuY3Rpb24ocyxTKXtpZighdGhpcy5hQ3VzdG9tU3R5bGVDbGFzc2VzKXt0aGlzLmFDdXN0b21TdHlsZUNsYXNzZXM9W119aWYocyl7aWYocy5pbmRleE9mKCJcIiIpPi0xKXtyZXR1cm4gdGhpc31pZihzLmluZGV4T2YoIiciKT4tMSl7cmV0dXJuIHRoaXN9Zm9yKHZhciBpPXRoaXMuYUN1c3RvbVN0eWxlQ2xhc3Nlcy5sZW5ndGgtMTtpPj0wO2ktLSl7aWYodGhpcy5hQ3VzdG9tU3R5bGVDbGFzc2VzW2ldPT1zKXtyZXR1cm4gdGhpc319dGhpcy5hQ3VzdG9tU3R5bGVDbGFzc2VzLnB1c2gocyk7dmFyIHI9dGhpcy5nZXREb21SZWYoKTtpZihyKXtxKHIpLmFkZENsYXNzKHMpfWVsc2UgaWYoUz09PWZhbHNlKXt0aGlzLmludmFsaWRhdGUoKX19cmV0dXJuIHRoaXN9O3RoaXMucmVtb3ZlU3R5bGVDbGFzcz1mdW5jdGlvbihzLFMpe2lmKHMmJnRoaXMuYUN1c3RvbVN0eWxlQ2xhc3Nlcyl7Zm9yKHZhciBpPXRoaXMuYUN1c3RvbVN0eWxlQ2xhc3Nlcy5sZW5ndGgtMTtpPj0wO2ktLSl7aWYodGhpcy5hQ3VzdG9tU3R5bGVDbGFzc2VzW2ldPT1zKXt0aGlzLmFDdXN0b21TdHlsZUNsYXNzZXMuc3BsaWNlKGksMSk7dmFyIHI9dGhpcy5nZXREb21SZWYoKTtpZihyKXtxKHIpLnJlbW92ZUNsYXNzKHMpfWVsc2UgaWYoUz09PWZhbHNlKXt0aGlzLmludmFsaWRhdGUoKX19fX1yZXR1cm4gdGhpc307dGhpcy50b2dnbGVTdHlsZUNsYXNzPWZ1bmN0aW9uKHMsYSl7aWYocyYmdHlwZW9mIHM9PT0ic3RyaW5nIil7aWYoYT09PXRydWUpe3RoaXMuYWRkU3R5bGVDbGFzcyhzKX1lbHNlIGlmKGE9PT1mYWxzZSl7dGhpcy5yZW1vdmVTdHlsZUNsYXNzKHMpfWVsc2UgaWYoYT09PXVuZGVmaW5lZCl7dGhpcy5oYXNTdHlsZUNsYXNzKHMpP3RoaXMucmVtb3ZlU3R5bGVDbGFzcyhzKTp0aGlzLmFkZFN0eWxlQ2xhc3Mocyl9ZWxzZXtxLnNhcC5sb2cud2FybmluZyh0aGlzLnRvU3RyaW5nKCkrIi0gdG9nZ2xlU3R5bGVDbGFzcygpOiBiQWRkIHNob3VsZCBiZSBhIGJvb2xlYW4gb3IgdW5kZWZpbmVkLCBidXQgaXMgJyIrYSsiJyIpfX1yZXR1cm4gdGhpc307dGhpcy5oYXNTdHlsZUNsYXNzPWZ1bmN0aW9uKHMpe2lmKHMmJnRoaXMuYUN1c3RvbVN0eWxlQ2xhc3Nlcyl7Zm9yKHZhciBpPXRoaXMuYUN1c3RvbVN0eWxlQ2xhc3Nlcy5sZW5ndGgtMTtpPj0wO2ktLSl7aWYodGhpcy5hQ3VzdG9tU3R5bGVDbGFzc2VzW2ldPT1zKXtyZXR1cm4gdHJ1ZX19fXJldHVybiBmYWxzZX07dGhpcy5nZXRNZXRhZGF0YSgpLmFkZFB1YmxpY01ldGhvZHMoWyJhZGRTdHlsZUNsYXNzIiwicmVtb3ZlU3R5bGVDbGFzcyIsInRvZ2dsZVN0eWxlQ2xhc3MiLCJoYXNTdHlsZUNsYXNzIl0pfTtyZXR1cm4gQ30sdHJ1ZSl9O3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL0NvbnRyb2wiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCcuL0N1c3RvbVN0eWxlQ2xhc3NTdXBwb3J0JywnLi9FbGVtZW50J10sZnVuY3Rpb24ocSxDLEUpeyJ1c2Ugc3RyaWN0Ijt2YXIgYT1FLmV4dGVuZCgic2FwLnVpLmNvcmUuQ29udHJvbCIse21ldGFkYXRhOntzdGVyZW90eXBlOiJjb250cm9sIiwiYWJzdHJhY3QiOnRydWUscHVibGljTWV0aG9kczpbInBsYWNlQXQiLCJhdHRhY2hCcm93c2VyRXZlbnQiLCJkZXRhY2hCcm93c2VyRXZlbnQiXSxsaWJyYXJ5OiJzYXAudWkuY29yZSIscHJvcGVydGllczp7ImJ1c3kiOnt0eXBlOiJib29sZWFuIixkZWZhdWx0VmFsdWU6ZmFsc2V9LCJidXN5SW5kaWNhdG9yRGVsYXkiOnt0eXBlOiJpbnQiLGRlZmF1bHRWYWx1ZToxMDAwfX0sYWdncmVnYXRpb25zOnt9LGFzc29jaWF0aW9uczp7fSxldmVudHM6e319LGNvbnN0cnVjdG9yOmZ1bmN0aW9uKGkscyl7dGhpcy5iQWxsb3dUZXh0U2VsZWN0aW9uPXRydWU7RS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5iT3V0cHV0PXRoaXMuZ2V0RG9tUmVmKCkhPW51bGw7aWYodGhpcy5fc2FwVWlDb3JlTG9jYWxCdXN5X2luaXRCdXN5SW5kaWNhdG9yKXt0aGlzLl9zYXBVaUNvcmVMb2NhbEJ1c3lfaW5pdEJ1c3lJbmRpY2F0b3IoKX19LHJlbmRlcmVyOm51bGx9KTthLnByb3RvdHlwZS5jbG9uZT1mdW5jdGlvbigpe3ZhciBjPUUucHJvdG90eXBlLmNsb25lLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtpZih0aGlzLmFCaW5kUGFyYW1ldGVycyl7Zm9yKHZhciBpPTAsbD10aGlzLmFCaW5kUGFyYW1ldGVycy5sZW5ndGg7aTxsO2krKyl7dmFyIHA9dGhpcy5hQmluZFBhcmFtZXRlcnNbaV07Yy5hdHRhY2hCcm93c2VyRXZlbnQocC5zRXZlbnRUeXBlLHAuZm5IYW5kbGVyLHAub0xpc3RlbmVyIT09dGhpcz9wLm9MaXN0ZW5lcjp1bmRlZmluZWQpfX1jLmJBbGxvd1RleHRTZWxlY3Rpb249dGhpcy5iQWxsb3dUZXh0U2VsZWN0aW9uO3JldHVybiBjfTtDLmFwcGx5KGEucHJvdG90eXBlKTthLnByb3RvdHlwZS5pc0FjdGl2ZT1mdW5jdGlvbigpe3JldHVybiBxLnNhcC5kb21CeUlkKHRoaXMuc0lkKSE9bnVsbH07YS5wcm90b3R5cGUuaW52YWxpZGF0ZT1mdW5jdGlvbihvKXt2YXIgdTtpZih0aGlzLmJPdXRwdXQmJih1PXRoaXMuZ2V0VUlBcmVhKCkpKXtpZighdGhpcy5fYklzQmVpbmdEZXN0cm95ZWQpe3UuYWRkSW52YWxpZGF0ZWRDb250cm9sKHRoaXMpfX1lbHNle3ZhciBwPXRoaXMuZ2V0UGFyZW50KCk7aWYocCYmKHRoaXMuYk91dHB1dHx8ISh0aGlzLmdldFZpc2libGUmJnRoaXMuZ2V0VmlzaWJsZSgpPT09ZmFsc2UpKSl7cC5pbnZhbGlkYXRlKHRoaXMpfX19O2EucHJvdG90eXBlLnJlcmVuZGVyPWZ1bmN0aW9uKCl7c2FwLnVpLmNvcmUuVUlBcmVhLnJlcmVuZGVyQ29udHJvbCh0aGlzKX07YS5wcm90b3R5cGUuYWxsb3dUZXh0U2VsZWN0aW9uPWZ1bmN0aW9uKEEpe3RoaXMuYkFsbG93VGV4dFNlbGVjdGlvbj1BO3JldHVybiB0aGlzfTthLnByb3RvdHlwZS5hdHRhY2hCcm93c2VyRXZlbnQ9ZnVuY3Rpb24oZSxoLGwpe2lmKGUmJih0eXBlb2YoZSk9PT0ic3RyaW5nIikpe2lmKGgmJnR5cGVvZihoKT09PSJmdW5jdGlvbiIpe2lmKCF0aGlzLmFCaW5kUGFyYW1ldGVycyl7dGhpcy5hQmluZFBhcmFtZXRlcnM9W119bD1sfHx0aGlzO3ZhciBwPWZ1bmN0aW9uKCl7aC5hcHBseShsLGFyZ3VtZW50cyl9O3RoaXMuYUJpbmRQYXJhbWV0ZXJzLnB1c2goe3NFdmVudFR5cGU6ZSxmbkhhbmRsZXI6aCxvTGlzdGVuZXI6bCxmblByb3h5OnB9KTt0aGlzLiQoKS5iaW5kKGUscCl9fXJldHVybiB0aGlzfTthLnByb3RvdHlwZS5kZXRhY2hCcm93c2VyRXZlbnQ9ZnVuY3Rpb24oZSxoLGwpe2lmKGUmJih0eXBlb2YoZSk9PT0ic3RyaW5nIikpe2lmKGgmJnR5cGVvZihoKT09PSJmdW5jdGlvbiIpe3ZhciAkPXRoaXMuJCgpLGkscDtsPWx8fHRoaXM7aWYodGhpcy5hQmluZFBhcmFtZXRlcnMpe2ZvcihpPXRoaXMuYUJpbmRQYXJhbWV0ZXJzLmxlbmd0aC0xO2k+PTA7aS0tKXtwPXRoaXMuYUJpbmRQYXJhbWV0ZXJzW2ldO2lmKHAuc0V2ZW50VHlwZT09PWUmJnAuZm5IYW5kbGVyPT09aCYmcC5vTGlzdGVuZXI9PT1sKXt0aGlzLmFCaW5kUGFyYW1ldGVycy5zcGxpY2UoaSwxKTskLnVuYmluZChlLHAuZm5Qcm94eSl9fX19fXJldHVybiB0aGlzfTthLnByb3RvdHlwZS5nZXRSZW5kZXJlcj1mdW5jdGlvbigpe3JldHVybiBzYXAudWkuY29yZS5SZW5kZXJNYW5hZ2VyLmdldFJlbmRlcmVyKHRoaXMpfTthLnByb3RvdHlwZS5wbGFjZUF0PWZ1bmN0aW9uKHIscCl7dmFyIGM9c2FwLnVpLmdldENvcmUoKTtpZihjLmlzSW5pdGlhbGl6ZWQoKSl7dmFyIG89cjtpZih0eXBlb2Ygbz09PSJzdHJpbmciKXtvPWMuYnlJZChyKX12YXIgaT1mYWxzZTtpZighKG8gaW5zdGFuY2VvZiBFKSl7bz1jLmNyZWF0ZVVJQXJlYShyKTtpPXRydWV9aWYoIW8pe3JldHVybn1pZighaSl7dmFyIGI9by5nZXRNZXRhZGF0YSgpLmdldEFsbEFnZ3JlZ2F0aW9ucygpWyJjb250ZW50Il07dmFyIGQ9dHJ1ZTtpZihiKXtpZighYi5tdWx0aXBsZXx8Yi50eXBlIT0ic2FwLnVpLmNvcmUuQ29udHJvbCIpe2Q9ZmFsc2V9fWVsc2V7aWYoIW8uYWRkQ29udGVudHx8IW8uaW5zZXJ0Q29udGVudHx8IW8ucmVtb3ZlQWxsQ29udGVudCl7ZD1mYWxzZX19aWYoIWQpe3Euc2FwLmxvZy53YXJuaW5nKCJwbGFjZUF0IGNhbm5vdCBiZSBwcm9jZXNzZWQgYmVjYXVzZSBjb250YWluZXIgIitvKyIgZG9lcyBub3QgaGF2ZSBhbiBhZ2dyZWdhdGlvbiAnY29udGVudCcuIik7cmV0dXJufX1pZih0eXBlb2YgcD09PSJudW1iZXIiKXtvLmluc2VydENvbnRlbnQodGhpcyxwKX1lbHNle3A9cHx8Imxhc3QiO3N3aXRjaChwKXtjYXNlImxhc3QiOm8uYWRkQ29udGVudCh0aGlzKTticmVhaztjYXNlImZpcnN0IjpvLmluc2VydENvbnRlbnQodGhpcywwKTticmVhaztjYXNlIm9ubHkiOm8ucmVtb3ZlQWxsQ29udGVudCgpO28uYWRkQ29udGVudCh0aGlzKTticmVhaztkZWZhdWx0OnEuc2FwLmxvZy53YXJuaW5nKCJQb3NpdGlvbiAiK3ArIiBpcyBub3Qgc3VwcG9ydGVkIGZvciBmdW5jdGlvbiBwbGFjZUF0LiIpfX19ZWxzZXt2YXIgdD10aGlzO2MuYXR0YWNoSW5pdEV2ZW50KGZ1bmN0aW9uKCl7dC5wbGFjZUF0KHIscCl9KX1yZXR1cm4gdGhpc307YS5wcm90b3R5cGUub25zZWxlY3RzdGFydD1mdW5jdGlvbihiKXtpZighdGhpcy5iQWxsb3dUZXh0U2VsZWN0aW9uKXtiLnByZXZlbnREZWZhdWx0KCk7Yi5zdG9wUHJvcGFnYXRpb24oKX19O2EucHJvdG90eXBlLmdldElkRm9yTGFiZWw9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRJZCgpfTthLnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKHMpe3RoaXMuX2JJc0JlaW5nRGVzdHJveWVkPXRydWU7dGhpcy5fY2xlYW51cEJ1c3lJbmRpY2F0b3IoKTtzYXAudWkuY29yZS5SZXNpemVIYW5kbGVyLmRlcmVnaXN0ZXJBbGxGb3JDb250cm9sKHRoaXMuZ2V0SWQoKSk7RS5wcm90b3R5cGUuZGVzdHJveS5jYWxsKHRoaXMscyl9OyhmdW5jdGlvbigpe3ZhciBwPSJmb2N1c2luIGZvY3Vzb3V0IGtleWRvd24ga2V5cHJlc3Mga2V5dXAiLGI9e29uQWZ0ZXJSZW5kZXJpbmc6ZnVuY3Rpb24oKXtpZih0aGlzLmdldFByb3BlcnR5KCJidXN5Iik9PT10cnVlJiZ0aGlzLiQoKSl7QS5hcHBseSh0aGlzKX19fSxBPWZ1bmN0aW9uKCl7dmFyICQ9dGhpcy4kKHRoaXMuX3NCdXN5U2VjdGlvbiksRj1bImFyZWEiLCJiYXNlIiwiYnIiLCJjb2wiLCJlbWJlZCIsImhyIiwiaW1nIiwiaW5wdXQiLCJrZXlnZW4iLCJsaW5rIiwibWVudWl0ZW0iLCJtZXRhIiwicGFyYW0iLCJzb3VyY2UiLCJ0cmFjayIsIndiciJdO2lmKHRoaXMuX2J1c3lJbmRpY2F0b3JEZWxheWVkQ2FsbElkKXtxLnNhcC5jbGVhckRlbGF5ZWRDYWxsKHRoaXMuX2J1c3lJbmRpY2F0b3JEZWxheWVkQ2FsbElkKTtkZWxldGUgdGhpcy5fYnVzeUluZGljYXRvckRlbGF5ZWRDYWxsSWR9dmFyIHQ9JC5nZXQoMCkmJiQuZ2V0KDApLnRhZ05hbWU7aWYodCYmcS5pbkFycmF5KHQudG9Mb3dlckNhc2UoKSxGKT49MCl7cS5zYXAubG9nLndhcm5pbmcoIkJ1c3kgSW5kaWNhdG9yIGNhbm5vdCBiZSBwbGFjZWQgaW4gZWxlbWVudHMgd2l0aCB0YWcgIit0KTtyZXR1cm59aWYoJC5jc3MoJ3Bvc2l0aW9uJyk9PSdzdGF0aWMnKXt0aGlzLl9idXN5U3RvcmVkUG9zaXRpb249J3N0YXRpYyc7JC5jc3MoJ3Bvc2l0aW9uJywncmVsYXRpdmUnKX12YXIgQj1xKCc8ZGl2IGNsYXNzPSJzYXBVaUxvY2FsQnVzeUluZGljYXRvciI+PGRpdiBjbGFzcz0ic2FwVWlMb2NhbEJ1c3lJbmRpY2F0b3JBbmltYXRpb24iPjxkaXYgY2xhc3M9InNhcFVpTG9jYWxCdXN5SW5kaWNhdG9yQm94Ij48L2Rpdj48ZGl2IGNsYXNzPSJzYXBVaUxvY2FsQnVzeUluZGljYXRvckJveCI+PC9kaXY+PGRpdiBjbGFzcz0ic2FwVWlMb2NhbEJ1c3lJbmRpY2F0b3JCb3giPjwvZGl2PjwvZGl2PjwvZGl2PicpO0IuYXR0cigiaWQiLHRoaXMuZ2V0SWQoKSsiLWJ1c3lJbmRpY2F0b3IiKTskLmFwcGVuZChCKTskLmFkZENsYXNzKCdzYXBVaUxvY2FsQnVzeScpO2lmKHRoaXMuX2J1c3lEZWxheWVkQ2FsbElkKXtxLnNhcC5jbGVhckRlbGF5ZWRDYWxsKHRoaXMuX2J1c3lEZWxheWVkQ2FsbElkKX10aGlzLl9idXN5RGVsYXllZENhbGxJZD1xLnNhcC5kZWxheWVkQ2FsbCgxMjAwLHRoaXMsZik7aC5hcHBseSh0aGlzLFt0cnVlXSl9LGg9ZnVuY3Rpb24oQil7aWYoQil7dmFyICQ9dGhpcy4kKHRoaXMuX3NCdXN5U2VjdGlvbiksdD0kLmZpbmQoJ1t0YWJpbmRleF0nKSxjPXRoaXM7dGhpcy5fYnVzeVRhYkluZGljZXM9W107dC5lYWNoKGZ1bmN0aW9uKGksbyl7dmFyIHI9cShvKSxUPXIuYXR0cigndGFiaW5kZXgnKTtpZihUPDApcmV0dXJuIHRydWU7Yy5fYnVzeVRhYkluZGljZXMucHVzaCh7cmVmOnIsdGFiaW5kZXg6VH0pO3IuYXR0cigndGFiaW5kZXgnLC0xKTtyLmJpbmQocCxQKX0pfWVsc2V7aWYodGhpcy5fYnVzeVRhYkluZGljZXMpe3EuZWFjaCh0aGlzLl9idXN5VGFiSW5kaWNlcyxmdW5jdGlvbihpLG8pe28ucmVmLmF0dHIoJ3RhYmluZGV4JyxvLnRhYmluZGV4KTtvLnJlZi51bmJpbmQocCxQKX0pfXRoaXMuX2J1c3lUYWJJbmRpY2VzPVtdfX0sUD1mdW5jdGlvbihlKXtlLnByZXZlbnREZWZhdWx0KCk7ZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKX0sZj1mdW5jdGlvbigpe3ZhciAkPXRoaXMuJCh0aGlzLl9zQnVzeVNlY3Rpb24pLmNoaWxkcmVuKCcuc2FwVWlMb2NhbEJ1c3lJbmRpY2F0b3InKS5jaGlsZHJlbignLnNhcFVpTG9jYWxCdXN5SW5kaWNhdG9yQW5pbWF0aW9uJyk7dmFyIHQ9dGhpczt0Ll9idXN5QW5pbWF0aW9uVGltZXIxPXNldFRpbWVvdXQoZnVuY3Rpb24oKXskLmNoaWxkcmVuKCI6ZXEoMCkiKS5hZGRDbGFzcygnYWN0aXZlJyk7JC5jaGlsZHJlbigiOm5vdCg6ZXEoMCkpIikucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO3QuX2J1c3lBbmltYXRpb25UaW1lcjI9c2V0VGltZW91dChmdW5jdGlvbigpeyQuY2hpbGRyZW4oIjplcSgxKSIpLmFkZENsYXNzKCdhY3RpdmUnKTskLmNoaWxkcmVuKCI6bm90KDplcSgxKSkiKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7dC5fYnVzeUFuaW1hdGlvblRpbWVyMz1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7JC5jaGlsZHJlbigiOmVxKDIpIikuYWRkQ2xhc3MoJ2FjdGl2ZScpOyQuY2hpbGRyZW4oIjpub3QoOmVxKDIpKSIpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTt0Ll9idXN5QW5pbWF0aW9uVGltZXI0PXNldFRpbWVvdXQoZnVuY3Rpb24oKXskLmNoaWxkcmVuKCkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpfSwxNTApfSwxNTApfSwxNTApfSwxNTApO3RoaXMuX2J1c3lEZWxheWVkQ2FsbElkPXEuc2FwLmRlbGF5ZWRDYWxsKDEyMDAsdGhpcyxmKX07YS5wcm90b3R5cGUuc2V0QnVzeT1mdW5jdGlvbihCLHMpe3RoaXMuX3NCdXN5U2VjdGlvbj1zO3ZhciAkPXRoaXMuJCh0aGlzLl9zQnVzeVNlY3Rpb24pO2lmKEI9PXRoaXMuZ2V0UHJvcGVydHkoImJ1c3kiKSl7cmV0dXJufXRoaXMuc2V0UHJvcGVydHkoImJ1c3kiLEIsdHJ1ZSk7aWYoQil7dGhpcy5hZGREZWxlZ2F0ZShiLGZhbHNlLHRoaXMpfWVsc2V7dGhpcy5yZW1vdmVEZWxlZ2F0ZShiKTtpZih0aGlzLl9idXN5SW5kaWNhdG9yRGVsYXllZENhbGxJZCl7cS5zYXAuY2xlYXJEZWxheWVkQ2FsbCh0aGlzLl9idXN5SW5kaWNhdG9yRGVsYXllZENhbGxJZCk7ZGVsZXRlIHRoaXMuX2J1c3lJbmRpY2F0b3JEZWxheWVkQ2FsbElkfX1pZighdGhpcy5nZXREb21SZWYoKSl7cmV0dXJufWlmKEIpe2lmKHRoaXMuZ2V0QnVzeUluZGljYXRvckRlbGF5KCk8PTApe0EuYXBwbHkodGhpcyl9ZWxzZXt0aGlzLl9idXN5SW5kaWNhdG9yRGVsYXllZENhbGxJZD1xLnNhcC5kZWxheWVkQ2FsbCh0aGlzLmdldEJ1c3lJbmRpY2F0b3JEZWxheSgpLHRoaXMsQSl9fWVsc2V7dGhpcy4kKCJidXN5SW5kaWNhdG9yIikucmVtb3ZlKCk7dGhpcy4kKCkucmVtb3ZlQ2xhc3MoJ3NhcFVpTG9jYWxCdXN5Jyk7aWYodGhpcy5fYnVzeVN0b3JlZFBvc2l0aW9uKXskLmNzcygncG9zaXRpb24nLHRoaXMuX2J1c3lTdG9yZWRQb3NpdGlvbik7ZGVsZXRlIHRoaXMuX2J1c3lTdG9yZWRQb3NpdGlvbn1oLmFwcGx5KHRoaXMsW2ZhbHNlXSk7aWYodGhpcy5fYnVzeURlbGF5ZWRDYWxsSWQpe3Euc2FwLmNsZWFyRGVsYXllZENhbGwodGhpcy5fYnVzeURlbGF5ZWRDYWxsSWQpO2RlbGV0ZSB0aGlzLl9idXN5RGVsYXllZENhbGxJZH19fTthLnByb3RvdHlwZS5pc0J1c3k9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRQcm9wZXJ0eSgiYnVzeSIpfTthLnByb3RvdHlwZS5zZXRCdXN5SW5kaWNhdG9yRGVsYXk9ZnVuY3Rpb24oZCl7dGhpcy5zZXRQcm9wZXJ0eSgiYnVzeUluZGljYXRvckRlbGF5IixkLHRydWUpO3JldHVybiB0aGlzfTthLnByb3RvdHlwZS5fY2xlYW51cEJ1c3lJbmRpY2F0b3I9ZnVuY3Rpb24oKXtpZih0aGlzLl9idXN5SW5kaWNhdG9yRGVsYXllZENhbGxJZCl7cS5zYXAuY2xlYXJEZWxheWVkQ2FsbCh0aGlzLl9idXN5SW5kaWNhdG9yRGVsYXllZENhbGxJZCk7ZGVsZXRlIHRoaXMuX2J1c3lJbmRpY2F0b3JEZWxheWVkQ2FsbElkfWlmKHRoaXMuX2J1c3lEZWxheWVkQ2FsbElkKXtxLnNhcC5jbGVhckRlbGF5ZWRDYWxsKHRoaXMuX2J1c3lEZWxheWVkQ2FsbElkKTtkZWxldGUgdGhpcy5fYnVzeURlbGF5ZWRDYWxsSWR9aWYodGhpcy5fYnVzeUFuaW1hdGlvblRpbWVyMSl7Y2xlYXJUaW1lb3V0KHRoaXMuX2J1c3lBbmltYXRpb25UaW1lcjEpO2RlbGV0ZSB0aGlzLl9idXN5QW5pbWF0aW9uVGltZXIxfWlmKHRoaXMuX2J1c3lBbmltYXRpb25UaW1lcjIpe2NsZWFyVGltZW91dCh0aGlzLl9idXN5QW5pbWF0aW9uVGltZXIyKTtkZWxldGUgdGhpcy5fYnVzeUFuaW1hdGlvblRpbWVyMn1pZih0aGlzLl9idXN5QW5pbWF0aW9uVGltZXIzKXtjbGVhclRpbWVvdXQodGhpcy5fYnVzeUFuaW1hdGlvblRpbWVyMyk7ZGVsZXRlIHRoaXMuX2J1c3lBbmltYXRpb25UaW1lcjN9aWYodGhpcy5fYnVzeUFuaW1hdGlvblRpbWVyNCl7Y2xlYXJUaW1lb3V0KHRoaXMuX2J1c3lBbmltYXRpb25UaW1lcjQpO2RlbGV0ZSB0aGlzLl9idXN5QW5pbWF0aW9uVGltZXI0fX19KSgpO3JldHVybiBhfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUuVUlBcmVhJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUuVUlBcmVhJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvVUlBcmVhIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL2Jhc2UvTWFuYWdlZE9iamVjdCcsJy4vRWxlbWVudCcsJ2pxdWVyeS5zYXAuYWN0JywnanF1ZXJ5LnNhcC51aSddLGZ1bmN0aW9uKHEsTSxFKXsidXNlIHN0cmljdCI7dmFyIHI9cS5zYXAubG9nLmdldExvZ2dlcigic2FwLnVpLlJlbmRlcmluZyIsKCh3aW5kb3dbInNhcC11aS1jb25maWciXSYmd2luZG93WyJzYXAtdWktY29uZmlnIl1bInh4LWRlYnVnUmVuZGVyaW5nIl0pfHwvc2FwLXVpLXh4LWRlYnVnKFJ8LXIpZW5kZXJpbmc9KHRydWV8eHxYKS8udGVzdChkb2N1bWVudC5sb2NhdGlvbi5zZWFyY2gpKT9xLnNhcC5sb2cuTGV2ZWwuREVCVUc6TWF0aC5taW4ocS5zYXAubG9nLkxldmVsLklORk8scS5zYXAubG9nLmdldExldmVsKCkpKSxkPWZ1bmN0aW9uKGMpe3JldHVybiBjfSxEPXEubm9vcCxmPXEubm9vcDtpZihyLmlzTG9nZ2FibGUoKSl7ZD1mdW5jdGlvbihjKXt2YXIgbDt0cnl7dGhyb3cgbmV3IEVycm9yKCl9Y2F0Y2goZSl7bD1lLnN0YWNrfHxlLnN0YWNrdHJhY2V8fChlLnNvdXJjZVVSTD9lLnNvdXJjZVVSTCsiOiIrZS5saW5lOm51bGwpO2w9bD9sLnNwbGl0KC9cblxzKi9nKS5zbGljZSgyKTp1bmRlZmluZWR9cmV0dXJue29iajpjLGxvY2F0aW9uOmx9fTtEPWZ1bmN0aW9uKHQsYyl7dmFyIEM9c2FwLnVpLmdldENvcmUoKSxSPXt9LG4sbztmb3IobiBpbiBjKXtvPUMuYnlJZChuKTtSW25dPXt0eXBlOm8/by5nZXRNZXRhZGF0YSgpLmdldE5hbWUoKTooY1tuXS5vYmo9PT10PyJVSUFyZWEiOiIobm8gc3VjaCBjb250cm9sKSIpLGxvY2F0aW9uOmNbbl0ubG9jYXRpb24scmVhc29uOmNbbl0ucmVhc29ufX1yLmRlYnVnKCIgIFVJQXJlYSAnIit0LmdldElkKCkrIicsIHBlbmRpbmcgdXBkYXRlczogIitKU09OLnN0cmluZ2lmeShSLG51bGwsIlx0IikpfTtmPWZ1bmN0aW9uKGIsYSl7dmFyIG47Zm9yKG4gaW4gYSl7aWYoYltuXSE9bnVsbCl7aWYoYltuXS5vYmohPT1hW25dLm9iail7YVtuXS5yZWFzb249InJlcGxhY2VkIGR1cmluZyByZW5kZXJpbmcifWVsc2V7YVtuXS5yZWFzb249ImludmFsaWRhdGVkIGFnYWluIGR1cmluZyByZW5kZXJpbmcifX1lbHNle2Fbbl0ucmVhc29uPSJpbnZhbGlkYXRlZCBkdXJpbmcgcmVuZGVyaW5nIn19fX12YXIgVT1NLmV4dGVuZCgic2FwLnVpLmNvcmUuVUlBcmVhIix7Y29uc3RydWN0b3I6ZnVuY3Rpb24oYyxSKXtpZihhcmd1bWVudHMubGVuZ3RoPT09MCl7cmV0dXJufU0uYXBwbHkodGhpcyk7dGhpcy5vQ29yZT1jO3RoaXMuYkxvY2tlZD1mYWxzZTt0aGlzLmJJbml0aWFsPXRydWU7dGhpcy5hQ29udGVudFRvUmVtb3ZlPVtdO3RoaXMuYk5lZWRzUmVyZW5kZXJpbmc9ZmFsc2U7aWYoUiE9bnVsbCl7dGhpcy5zZXRSb290Tm9kZShSKTt0aGlzLmJOZWVkc1JlcmVuZGVyaW5nPXRoaXMuYk5lZWRzUmVyZW5kZXJpbmcmJiFxLnNhcC5kb21CeUlkKFIuaWQrIi1Jbml0Iil9dGhpcy5tSW52YWxpZGF0ZWRDb250cm9scz17fTtpZighdGhpcy5iTmVlZHNSZXJlbmRlcmluZyl7dGhpcy5iUmVuZGVyU2VsZj1mYWxzZX1lbHNle3RoaXMub0NvcmUuYWRkSW52YWxpZGF0ZWRVSUFyZWEodGhpcyl9fSxtZXRhZGF0YTp7cHVibGljTWV0aG9kczpbInNldFJvb3ROb2RlIiwiZ2V0Um9vdE5vZGUiLCJzZXRSb290Q29udHJvbCIsImdldFJvb3RDb250cm9sIiwibG9jayIsInVubG9jayIsImlzTG9ja2VkIl0sYWdncmVnYXRpb25zOntjb250ZW50OntuYW1lOiJjb250ZW50Iix0eXBlOiJzYXAudWkuY29yZS5Db250cm9sIixtdWx0aXBsZTp0cnVlLHNpbmd1bGFyTmFtZToiY29udGVudCJ9LGRlcGVuZGVudHM6e25hbWU6ImRlcGVuZGVudHMiLHR5cGU6InNhcC51aS5jb3JlLkNvbnRyb2wiLG11bHRpcGxlOnRydWV9fX19KTtVLnByb3RvdHlwZS5pc0ludmFsaWRhdGVTdXBwcmVzc2VkPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaVN1cHByZXNzSW52YWxpZGF0ZT4wfTtVLnByb3RvdHlwZS5nZXRJZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLm9Sb290Tm9kZT90aGlzLm9Sb290Tm9kZS5pZDpudWxsfTtVLnByb3RvdHlwZS5nZXRVSUFyZWE9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc307VS5wcm90b3R5cGUuc2V0Um9vdE5vZGU9ZnVuY3Rpb24oUil7aWYodGhpcy5vUm9vdE5vZGU9PT1SKXtyZXR1cm59aWYodGhpcy5vUm9vdE5vZGUpe3RoaXMuX29uZGV0YWNoKCl9dGhpcy5vUm9vdE5vZGU9UjtpZih0aGlzLmdldENvbnRlbnQoKS5sZW5ndGg+MCl7dGhpcy5pbnZhbGlkYXRlKCl9aWYodGhpcy5vUm9vdE5vZGUpe3RoaXMuX29uYXR0YWNoKCl9fTtVLnByb3RvdHlwZS5nZXRSb290Tm9kZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLm9Sb290Tm9kZX07VS5wcm90b3R5cGUuc2V0Um9vdENvbnRyb2w9ZnVuY3Rpb24oUil7dGhpcy5yZW1vdmVBbGxDb250ZW50KCk7dGhpcy5hZGRDb250ZW50KFIpfTtVLnByb3RvdHlwZS5nZXRSb290Q29udHJvbD1mdW5jdGlvbihpKXt2YXIgYz10aGlzLmdldENvbnRlbnQoKTtpZihjLmxlbmd0aD4wKXtpZihpPj0wJiZpPGMubGVuZ3RoKXtyZXR1cm4gY1tpXX1yZXR1cm4gY1swXX1yZXR1cm4gbnVsbH07VS5wcm90b3R5cGUuX2FkZFJlbW92ZWRDb250ZW50PWZ1bmN0aW9uKG8pe2lmKHRoaXMub1Jvb3ROb2RlJiZvKXt0aGlzLmFDb250ZW50VG9SZW1vdmUucHVzaChvKX19O1UucHJvdG90eXBlLmFkZENvbnRlbnQ9ZnVuY3Rpb24oYyxfKXt0aGlzLmFkZEFnZ3JlZ2F0aW9uKCJjb250ZW50IixjLF8pO2lmKF8hPT10cnVlKXt0aGlzLmludmFsaWRhdGUoKX1yZXR1cm4gdGhpc307VS5wcm90b3R5cGUucmVtb3ZlQ29udGVudD1mdW5jdGlvbihjLF8pe3ZhciBDPXRoaXMucmVtb3ZlQWdncmVnYXRpb24oImNvbnRlbnQiLGMsXyk7aWYoIV8pe3ZhciBvO2lmKEMmJkMuZ2V0RG9tUmVmKXtvPUMuZ2V0RG9tUmVmKCl9dGhpcy5fYWRkUmVtb3ZlZENvbnRlbnQobyl9cmV0dXJuIEN9O1UucHJvdG90eXBlLnJlbW92ZUFsbENvbnRlbnQ9ZnVuY3Rpb24oKXt2YXIgYz10aGlzLnJlbW92ZUFsbEFnZ3JlZ2F0aW9uKCJjb250ZW50Iik7Zm9yKHZhciBpPTA7aTxjLmxlbmd0aDtpKyspe3ZhciBvO3ZhciBDPWNbaV07aWYoQyYmQy5nZXREb21SZWYpe289Qy5nZXREb21SZWYoKX10aGlzLl9hZGRSZW1vdmVkQ29udGVudChvKX1yZXR1cm4gY307VS5wcm90b3R5cGUuZGVzdHJveUNvbnRlbnQ9ZnVuY3Rpb24oKXt2YXIgYz10aGlzLmdldENvbnRlbnQoKTtmb3IodmFyIGk9MDtpPGMubGVuZ3RoO2krKyl7dmFyIG87dmFyIEM9Y1tpXTtpZihDJiZDLmdldERvbVJlZil7bz1DLmdldERvbVJlZigpfXRoaXMuX2FkZFJlbW92ZWRDb250ZW50KG8pfXRoaXMuZGVzdHJveUFnZ3JlZ2F0aW9uKCJjb250ZW50Iik7cmV0dXJuIHRoaXN9O1UucHJvdG90eXBlLmxvY2s9ZnVuY3Rpb24oKXt0aGlzLmJMb2NrZWQ9dHJ1ZX07VS5wcm90b3R5cGUudW5sb2NrPWZ1bmN0aW9uKCl7aWYodGhpcy5iTG9ja2VkJiZ0aGlzLmJOZWVkc1JlcmVuZGVyaW5nKXt0aGlzLm9Db3JlLmFkZEludmFsaWRhdGVkVUlBcmVhKHRoaXMpfXRoaXMuYkxvY2tlZD1mYWxzZX07VS5wcm90b3R5cGUuaXNMb2NrZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5iTG9ja2VkfTtVLnByb3RvdHlwZS5nZXRCaW5kaW5nQ29udGV4dD1mdW5jdGlvbigpe3JldHVybiBudWxsfTtVLnByb3RvdHlwZS5nZXRFdmVudGluZ1BhcmVudD1mdW5jdGlvbigpe3JldHVybiB0aGlzLm9Db3JlfTtVLnByb3RvdHlwZS5pc0FjdGl2ZT1mdW5jdGlvbigpe3JldHVybiBxLnNhcC5kb21CeUlkKHRoaXMuZ2V0SWQoKSkhPW51bGx9O1UucHJvdG90eXBlLmludmFsaWRhdGU9ZnVuY3Rpb24oKXt0aGlzLmFkZEludmFsaWRhdGVkQ29udHJvbCh0aGlzKX07VS5wcm90b3R5cGUuYWRkSW52YWxpZGF0ZWRDb250cm9sPWZ1bmN0aW9uKGMpe2lmKHRoaXMuYlJlbmRlclNlbGYpe3JldHVybn1pZighdGhpcy5iTmVlZHNSZXJlbmRlcmluZyl7dGhpcy5vQ29yZS5hZGRJbnZhbGlkYXRlZFVJQXJlYSh0aGlzKX12YXIgaT1jLmdldElkKCk7aWYoYz09PXRoaXMpe3RoaXMuYlJlbmRlclNlbGY9dHJ1ZTt0aGlzLmJOZWVkc1JlcmVuZGVyaW5nPXRydWU7dGhpcy5tSW52YWxpZGF0ZWRDb250cm9scz17fTt0aGlzLm1JbnZhbGlkYXRlZENvbnRyb2xzW2ldPWQodGhpcyk7cmV0dXJufWlmKHRoaXMubUludmFsaWRhdGVkQ29udHJvbHNbaV0pe3JldHVybn1pZighdGhpcy5iUmVuZGVyU2VsZil7dGhpcy5tSW52YWxpZGF0ZWRDb250cm9sc1tpXT1kKGMpO3RoaXMuYk5lZWRzUmVyZW5kZXJpbmc9dHJ1ZX19O1UucHJvdG90eXBlLnJlcmVuZGVyPWZ1bmN0aW9uKGEpe3ZhciB0PXRoaXM7ZnVuY3Rpb24gYygpe3QuYlJlbmRlclNlbGY9ZmFsc2U7dC5hQ29udGVudFRvUmVtb3ZlPVtdO3QubUludmFsaWRhdGVkQ29udHJvbHM9e307dC5iTmVlZHNSZXJlbmRlcmluZz1mYWxzZX1pZihhKXt0aGlzLmJOZWVkc1JlcmVuZGVyaW5nPXRydWV9aWYodGhpcy5iTG9ja2VkfHwhdGhpcy5iTmVlZHNSZXJlbmRlcmluZyl7cmV0dXJuIGZhbHNlfXZhciBSPXRoaXMuYlJlbmRlclNlbGYsQz10aGlzLmFDb250ZW50VG9SZW1vdmUsST10aGlzLm1JbnZhbGlkYXRlZENvbnRyb2xzLHU9ZmFsc2U7YygpO3Euc2FwLm1lYXN1cmUucGF1c2UoInJlbmRlclBlbmRpbmdVSVVwZGF0ZXMiKTtxLnNhcC5tZWFzdXJlLnN0YXJ0KHRoaXMuZ2V0SWQoKSsiLS0tcmVyZW5kZXIiLCJSZXJlbmRlcmluZyBvZiAiK3RoaXMuZ2V0TWV0YWRhdGEoKS5nZXROYW1lKCkpO0QodGhpcyxJKTtpZihSKXtpZih0aGlzLm9Sb290Tm9kZSl7ci5kZWJ1ZygiRnVsbCBSZW5kZXJpbmcgb2YgVUlBcmVhICciK3RoaXMuZ2V0SWQoKSsiJyIpO3NhcC51aS5jb3JlLlJlbmRlck1hbmFnZXIucHJlc2VydmVDb250ZW50KHRoaXMub1Jvb3ROb2RlLGZhbHNlLHRoaXMuYkluaXRpYWwpO3RoaXMuYkluaXRpYWw9ZmFsc2U7dmFyIGI9ZnVuY3Rpb24oaCxqKXt2YXIgbD1oLmxlbmd0aDt2YXIgaztmb3IodmFyIGk9MDtpPGw7aSsrKXtrPWo/aFtpXS5nZXREb21SZWYoKTpoW2ldO2lmKGsmJiFzYXAudWkuY29yZS5SZW5kZXJNYW5hZ2VyLmlzUHJlc2VydmVkQ29udGVudChrKSYmdC5vUm9vdE5vZGU9PT1rLnBhcmVudE5vZGUpe3EoaykucmVtb3ZlKCl9fXJldHVybiBsfTtiKEMpO3ZhciBlPXRoaXMuZ2V0Q29udGVudCgpO3ZhciBsPWIoZSx0cnVlKTtmb3IodmFyIGk9MDtpPGw7aSsrKXt0aGlzLm9Db3JlLm9SZW5kZXJNYW5hZ2VyLnJlbmRlcihlW2ldLHRoaXMub1Jvb3ROb2RlLHRydWUpfXU9dHJ1ZX1lbHNle3IuZGVidWcoIkZ1bGwgUmVuZGVyaW5nIG9mIFVJQXJlYSAnIit0aGlzLmdldElkKCkrIicgcG9zdHBvbmVkLCBubyByb290IG5vZGUiKX19ZWxzZXt2YXIgZz1mdW5jdGlvbihBKXt3aGlsZShBJiZBIT09dCl7aWYoSS5oYXNPd25Qcm9wZXJ0eShBLmdldElkKCkpKXtyZXR1cm4gdHJ1ZX1pZihBJiZBLmdldE1ldGFkYXRhJiZBLmdldE1ldGFkYXRhKCkuaXNJbnN0YW5jZU9mKCJzYXAudWkuY29yZS5Qb3B1cEludGVyZmFjZSIpKXticmVha31BPUEuZ2V0UGFyZW50KCl9cmV0dXJuIGZhbHNlfTtmb3IodmFyIG4gaW4gSSl7dmFyIG89dGhpcy5vQ29yZS5ieUlkKG4pO2lmKG8mJiFnKG8uZ2V0UGFyZW50KCkpKXtvLnJlcmVuZGVyKCk7dT10cnVlfX19ZihJLHRoaXMubUludmFsaWRhdGVkQ29udHJvbHMpO3Euc2FwLm1lYXN1cmUuZW5kKHRoaXMuZ2V0SWQoKSsiLS0tcmVyZW5kZXIiKTtxLnNhcC5tZWFzdXJlLnJlc3VtZSgicmVuZGVyUGVuZGluZ1VJVXBkYXRlcyIpO3JldHVybiB1fTtVLnByb3RvdHlwZS5fb25Db250cm9sUmVuZGVyZWQ9ZnVuY3Rpb24oYyl7dmFyIGk9Yy5nZXRJZCgpO2lmKHRoaXMubUludmFsaWRhdGVkQ29udHJvbHNbaV0pe2RlbGV0ZSB0aGlzLm1JbnZhbGlkYXRlZENvbnRyb2xzW2ldfX07VS5yZXJlbmRlckNvbnRyb2w9ZnVuY3Rpb24oYyl7dmFyIG89Yz9jLmdldERvbVJlZigpOm51bGw7dmFyIHA9byYmby5wYXJlbnROb2RlO2lmKHApe3ZhciB1PWMuZ2V0VUlBcmVhKCk7dmFyIGE9dT91Lm9Db3JlLm9SZW5kZXJNYW5hZ2VyOnNhcC51aS5nZXRDb3JlKCkuY3JlYXRlUmVuZGVyTWFuYWdlcigpO3IuZGVidWcoIlJlcmVuZGVyIENvbnRyb2wgJyIrYy5nZXRJZCgpKyInIisodT8iIjoiICh1c2luZyBhIHRlbXAuIFJlbmRlck1hbmFnZXIpIikpO3NhcC51aS5jb3JlLlJlbmRlck1hbmFnZXIucHJlc2VydmVDb250ZW50KG8sdHJ1ZSxmYWxzZSk7YS5yZW5kZXIoYyxwKX1lbHNle3ZhciB1PWMuZ2V0VUlBcmVhKCk7dSYmdS5fb25Db250cm9sUmVuZGVyZWQoYyk7ci53YXJuaW5nKCJDb3VsZG4ndCByZXJlbmRlciAnIitjLmdldElkKCkrIicsIGFzIGl0cyBET00gbG9jYXRpb24gY291bGRuJ3QgYmUgZGV0ZXJtaW5lZCIpfX07VS5wcm90b3R5cGUuX2hhbmRsZUV2ZW50PWZ1bmN0aW9uKGUpe3ZhciBvPW51bGw7bz1xKGUudGFyZ2V0KS5jb250cm9sKDApO3Euc2FwLmFjdC5yZWZyZXNoKCk7aWYobz09PW51bGwpe3JldHVybn1pZihlLmlzTWFya2VkKCJkZWxheWVkTW91c2VFdmVudCIpKXtyZXR1cm59aWYoZS5pc01hcmtlZCgiaGFuZGxlZEJ5VUlBcmVhIikpe2Uuc2V0TWFyaygiZmlyc3RVSUFyZWEiLGZhbHNlKTtyZXR1cm59ZS5zZXRNYXJrZWQoImZpcnN0VUlBcmVhIik7ZS5zcmNDb250cm9sPW87aWYoZS50eXBlPT09ImNvbnRleHRtZW51IiYmZS5zaGlmdEtleSYmZS5hbHRLZXkmJiEhKGUubWV0YUtleXx8ZS5jdHJsS2V5KSl7cS5zYXAubG9nLmluZm8oIlN1cHByZXNzZWQgZm9yd2FyZGluZyB0aGUgY29udGV4dG1lbnUgZXZlbnQgYXMgY29udHJvbCBldmVudCBiZWNhdXNlIENUUkwrU0hJRlQrQUxUIGlzIHByZXNzZWQhIik7cmV0dXJufXRoaXMub0NvcmUuX2hhbmRsZUNvbnRyb2xFdmVudChlLHRoaXMuZ2V0SWQoKSk7aWYodGhpcy5iTG9ja2VkfHx0aGlzLm9Db3JlLmlzTG9ja2VkKCkpe3JldHVybn12YXIgYT1bXTtpZihlLmdldFBzZXVkb1R5cGVzKXthPWUuZ2V0UHNldWRvVHlwZXMoKX1hLnB1c2goZS50eXBlKTt3aGlsZShvJiZvIGluc3RhbmNlb2YgRSYmby5pc0FjdGl2ZSgpJiYhZS5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpKXtmb3IodmFyIGk9MCxiPWEubGVuZ3RoO2k8YjtpKyspe3ZhciB0PWFbaV07ZS50eXBlPXQ7ZS5jdXJyZW50VGFyZ2V0PW8uZ2V0RG9tUmVmKCk7by5faGFuZGxlRXZlbnQoZSk7aWYoZS5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCgpKXticmVha319aWYoZS5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpKXticmVha31pZihvLmJTdG9wRXZlbnRCdWJibGluZyl7YnJlYWt9dmFyIGM9by5nZXREb21SZWYoKTtpZighYyl7YnJlYWt9Yz1jLnBhcmVudE5vZGU7bz1udWxsO2lmKGUuaXNNYXJrZWQoImZyb21Nb3VzZW91dCIpJiZxLnNhcC5jb250YWluc09yRXF1YWxzKGMsZS5yZWxhdGVkVGFyZ2V0KSl7YnJlYWt9d2hpbGUoYyYmYyE9PXRoaXMuZ2V0Um9vdE5vZGUoKSl7aWYoYy5pZCl7bz1xKGMpLmNvbnRyb2woMCk7aWYobyl7YnJlYWt9fWM9Yy5wYXJlbnROb2RlfX1lLmN1cnJlbnRUYXJnZXQ9dGhpcy5nZXRSb290Tm9kZSgpOyhlLm9yaWdpbmFsRXZlbnR8fGUpLl9zYXB1aV9oYW5kbGVkQnlVSUFyZWE9dHJ1ZTtpZihlLmlzUHJvcGFnYXRpb25TdG9wcGVkKCkpe3Euc2FwLmxvZy5kZWJ1ZygiJyIrZS50eXBlKyInIHByb3BhZ2F0aW9uIGhhcyBiZWVuIHN0b3BwZWQiKX12YXIgbj1lLnR5cGU7aWYobiE9Im1vdXNlbW92ZSImJm4hPSJtb3VzZW92ZXIiJiZuIT0ic2Nyb2xsIiYmbiE9Im1vdXNlb3V0Iil7dmFyIGc9cShlLnRhcmdldCkuY29udHJvbCgwKTtpZihnKXtxLnNhcC5sb2cuZGVidWcoIkV2ZW50IGZpcmVkOiAnIitlLnR5cGUrIicgb24gIitnLCIiLCJzYXAudWkuY29yZS5VSUFyZWEiKX1lbHNle3Euc2FwLmxvZy5kZWJ1ZygiRXZlbnQgZmlyZWQ6ICciK2UudHlwZSsiJyIsIiIsInNhcC51aS5jb3JlLlVJQXJlYSIpfX19O1UucHJvdG90eXBlLl9vbmF0dGFjaD1mdW5jdGlvbigpe3ZhciBvPXRoaXMuZ2V0Um9vdE5vZGUoKTtpZihvPT1udWxsKXtyZXR1cm59cShvKS5hdHRyKCJkYXRhLXNhcC11aS1hcmVhIixvLmlkKS5iaW5kKHEuc2FwLkNvbnRyb2xFdmVudHMuam9pbigiICIpLHEucHJveHkodGhpcy5faGFuZGxlRXZlbnQsdGhpcykpfTtVLnByb3RvdHlwZS5fb25kZXRhY2g9ZnVuY3Rpb24oKXt2YXIgbz10aGlzLmdldFJvb3ROb2RlKCk7aWYobz09bnVsbCl7cmV0dXJufXEobykucmVtb3ZlQXR0cigiZGF0YS1zYXAtdWktYXJlYSIpLnVuYmluZCgpfTtVLnByb3RvdHlwZS5jbG9uZT1mdW5jdGlvbigpe3Rocm93IG5ldyBFcnJvcigiVUlBcmVhIGNhbid0IGJlIGNsb25lZCIpfTtVLl9vUmVuZGVyTG9nPXI7cmV0dXJuIFV9LHRydWUpfTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9Db3JlIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL0RldmljZScsJ3NhcC91aS9HbG9iYWwnLCdzYXAvdWkvYmFzZS9EYXRhVHlwZScsJ3NhcC91aS9iYXNlL0V2ZW50UHJvdmlkZXInLCcuL0NvbXBvbmVudCcsJy4vQ29uZmlndXJhdGlvbicsJy4vQ29udHJvbCcsJy4vRWxlbWVudCcsJy4vRWxlbWVudE1ldGFkYXRhJywnLi9Gb2N1c0hhbmRsZXInLCcuL1JlbmRlck1hbmFnZXInLCcuL1Jlc2l6ZUhhbmRsZXInLCcuL1RoZW1lQ2hlY2snLCcuL1VJQXJlYScsJy4vdG1wbC9UZW1wbGF0ZScsJ2pxdWVyeS5zYXAuYWN0JywnanF1ZXJ5LnNhcC5kb20nLCdqcXVlcnkuc2FwLmV2ZW50cycsJ2pxdWVyeS5zYXAubW9iaWxlJywnanF1ZXJ5LnNhcC5wcm9wZXJ0aWVzJywnanF1ZXJ5LnNhcC5yZXNvdXJjZXMnLCdqcXVlcnkuc2FwLnNjcmlwdCddLGZ1bmN0aW9uKHEsRCxHLGEsRSxDLGMsZCxlLGcsRixSLGgsVCxVLGopeyJ1c2Ugc3RyaWN0Ijt2YXIgaz1FLmV4dGVuZCgic2FwLnVpLmNvcmUuQ29yZSIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKCl7aWYoc2FwLnVpLmdldENvcmUmJnNhcC51aS5nZXRDb3JlKCkpe3JldHVybiBzYXAudWkuZ2V0Q29yZSgpfXZhciB0PXRoaXMsbD1xLnNhcC5sb2csTT0ic2FwLnVpLmNvcmUuQ29yZSI7RS5hcHBseSh0aGlzKTt0aGlzLmJCb290ZWQ9ZmFsc2U7dGhpcy5iSW5pdGlhbGl6ZWQ9ZmFsc2U7dGhpcy5iRG9tUmVhZHk9ZmFsc2U7dGhpcy5hUGx1Z2lucz1bXTt0aGlzLm1MaWJyYXJpZXM9e307dGhpcy5tUmVzb3VyY2VCdW5kbGVzPXt9O3RoaXMubVVJQXJlYXM9e307dGhpcy5vTW9kZWxzPXt9O3RoaXMub0V2ZW50QnVzPW51bGw7dGhpcy5tRWxlbWVudHM9e307dGhpcy5tT2JqZWN0cz17ImNvbXBvbmVudCI6e30sInRlbXBsYXRlIjp7fX07dGhpcy5vUm9vdENvbXBvbmVudD1udWxsO3RoaXMuYUluaXRMaXN0ZW5lcnM9W107dGhpcy5iSW5pdExlZ2FjeUxpYj1mYWxzZTtsLmluZm8oIkNyZWF0aW5nIENvcmUiLG51bGwsTSk7dGhpcy5vQ29uZmlndXJhdGlvbj1uZXcgYyh0aGlzKTtpZih0aGlzLm9Db25maWd1cmF0aW9uWyJ4eC1iaW5kaW5nU3ludGF4Il09PT0iY29tcGxleCIpe3NhcC51aS5iYXNlLk1hbmFnZWRPYmplY3QuYmluZGluZ1BhcnNlcj1zYXAudWkuYmFzZS5CaW5kaW5nUGFyc2VyLmNvbXBsZXhQYXJzZXJ9aWYodGhpcy5vQ29uZmlndXJhdGlvblsieHgtZGVzaWduTW9kZSJdPT10cnVlKXtzYXAudWkuYmFzZS5CaW5kaW5nUGFyc2VyLl9rZWVwQmluZGluZ1N0cmluZ3M9dHJ1ZX1nLnByb3RvdHlwZS5yZWdpc3Rlcj1mdW5jdGlvbihLKXt0LnJlZ2lzdGVyRWxlbWVudENsYXNzKEspfTtlLnByb3RvdHlwZS5yZWdpc3Rlcj1mdW5jdGlvbigpe3QucmVnaXN0ZXJFbGVtZW50KHRoaXMpfTtlLnByb3RvdHlwZS5kZXJlZ2lzdGVyPWZ1bmN0aW9uKCl7dC5kZXJlZ2lzdGVyRWxlbWVudCh0aGlzKX07Qy5wcm90b3R5cGUucmVnaXN0ZXI9ZnVuY3Rpb24oKXt0LnJlZ2lzdGVyT2JqZWN0KHRoaXMpfTtDLnByb3RvdHlwZS5kZXJlZ2lzdGVyPWZ1bmN0aW9uKCl7dC5kZXJlZ2lzdGVyT2JqZWN0KHRoaXMpfTtqLnByb3RvdHlwZS5yZWdpc3Rlcj1mdW5jdGlvbigpe3QucmVnaXN0ZXJPYmplY3QodGhpcyl9O2oucHJvdG90eXBlLmRlcmVnaXN0ZXI9ZnVuY3Rpb24oKXt0LmRlcmVnaXN0ZXJPYmplY3QodGhpcyl9O3ZhciBtPXRoaXMub0NvbmZpZ3VyYXRpb24ubW9kdWxlcztpZih0aGlzLm9Db25maWd1cmF0aW9uLmdldERlYnVnKCkpe20udW5zaGlmdCgic2FwLXVpLWRlYnVnIil9dmFyIGk9cS5pbkFycmF5KCJzYXAudWkuY29yZS5saWJyYXJ5IixtKTtpZihpIT0wKXtpZihpPjApe20uc3BsaWNlKGksMSl9bS51bnNoaWZ0KCJzYXAudWkuY29yZS5saWJyYXJ5Iil9bC5pbmZvKCJEZWNsYXJlZCBtb2R1bGVzOiAiK20sTSk7dmFyIG89d2luZG93WyJzYXAtdWktY29uZmlnIl07aWYodGhpcy5vQ29uZmlndXJhdGlvbi50aGVtZVJvb3Qpe289b3x8e307by50aGVtZXJvb3RzPW8udGhlbWVyb290c3x8e307by50aGVtZXJvb3RzW3RoaXMub0NvbmZpZ3VyYXRpb24uZ2V0VGhlbWUoKV09dGhpcy5vQ29uZmlndXJhdGlvbi50aGVtZVJvb3R9aWYobyl7aWYoby50aGVtZXJvb3RzKXtmb3IodmFyIGYgaW4gby50aGVtZXJvb3RzKXt2YXIgbj1vLnRoZW1lcm9vdHNbZl07aWYodHlwZW9mIG49PT0ic3RyaW5nIil7dGhpcy5zZXRUaGVtZVJvb3QoZixuKX1lbHNle2Zvcih2YXIgcCBpbiBuKXtpZihwLmxlbmd0aD4wKXt0aGlzLnNldFRoZW1lUm9vdChmLFtwXSxuW3BdKX1lbHNle3RoaXMuc2V0VGhlbWVSb290KGYsbltwXSl9fX19fX10aGlzLnNUaGVtZT10aGlzLm9Db25maWd1cmF0aW9uLmdldFRoZW1lKCk7cShkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpLmFkZENsYXNzKCJzYXBVaVRoZW1lLSIrdGhpcy5zVGhlbWUpO2wuaW5mbygiRGVjbGFyZWQgdGhlbWUgIit0aGlzLnNUaGVtZSxudWxsLE0pO2lmKHRoaXMub0NvbmZpZ3VyYXRpb24uZ2V0UlRMKCkpe3EoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KS5hdHRyKCJkaXIiLCJydGwiKTtsLmluZm8oIlJUTCBtb2RlIGFjdGl2YXRlZCIsbnVsbCxNKX12YXIgJD1xKCJodG1sIik7dmFyIGI9RC5icm93c2VyO3ZhciBzPWIubmFtZTtpZihzPT09Yi5CUk9XU0VSLkNIUk9NRSl7cS5icm93c2VyLnNhZmFyaT1mYWxzZTtxLmJyb3dzZXIuY2hyb21lPXRydWV9ZWxzZSBpZihzPT09Yi5CUk9XU0VSLlNBRkFSSSl7cS5icm93c2VyLnNhZmFyaT10cnVlO3EuYnJvd3Nlci5jaHJvbWU9ZmFsc2U7aWYoYi5tb2JpbGUpe3M9Im0iK3N9fWlmKHMpe3EuYnJvd3Nlci5mVmVyc2lvbj1iLnZlcnNpb247cS5icm93c2VyLm1vYmlsZT1iLm1vYmlsZTtzPXMrTWF0aC5mbG9vcihiLnZlcnNpb24pOyQuYXR0cigiZGF0YS1zYXAtdWktYnJvd3NlciIscyk7bC5kZWJ1ZygiQnJvd3Nlci1JZDogIitzLG51bGwsTSl9JC5hdHRyKCJkYXRhLXNhcC11aS1vcyIsRC5vcy5uYW1lK0Qub3MudmVyc2lvblN0cik7dmFyIHU9bnVsbDtzd2l0Y2goRC5vcy5uYW1lKXtjYXNlIEQub3MuT1MuSU9TOnU9InNhcC1pb3MiO2JyZWFrO2Nhc2UgRC5vcy5PUy5BTkRST0lEOnU9InNhcC1hbmRyb2lkIjticmVhaztjYXNlIEQub3MuT1MuQkxBQ0tCRVJSWTp1PSJzYXAtYmIiO2JyZWFrO2Nhc2UgRC5vcy5PUy5XSU5ET1dTX1BIT05FOnU9InNhcC13aW5waG9uZSI7YnJlYWt9aWYodSl7JC5hZGRDbGFzcyh1KX1pZih0aGlzLm9Db25maWd1cmF0aW9uLmdldFdlaW5yZUlkKCkpe2wuaW5mbygiU3RhcnRpbmcgV0VJTlJFIFJlbW90ZSBXZWIgSW5zcGVjdG9yIik7dmFyIHc9IjxzY3JpcHQgc3JjPVwiIjt3Kz10aGlzLm9Db25maWd1cmF0aW9uLmdldFdlaW5yZVNlcnZlcigpO3crPSIvdGFyZ2V0L3RhcmdldC1zY3JpcHQtbWluLmpzIyI7dys9cS5zYXAuZW5jb2RlVVJMKHRoaXMub0NvbmZpZ3VyYXRpb24uZ2V0V2VpbnJlSWQoKSk7dys9IlwiPjwvc2NyaXB0PiI7ZG9jdW1lbnQud3JpdGUodyl9c2FwLnVpLmdldENvcmU9cS5zYXAuZ2V0dGVyKHRoaXMuZ2V0SW50ZXJmYWNlKCkpO1IuaW5pdEhUTUw1U3VwcG9ydCgpO3RoaXMub1JlbmRlck1hbmFnZXI9bmV3IFIoKTt2YXIgUz1xLnNhcC5zeW5jUG9pbnQoIlVJNSBEb2N1bWVudCBSZWFkeSIsZnVuY3Rpb24oTyxLKXt0LmhhbmRsZUxvYWQoKX0pO3ZhciB2PVMuc3RhcnRUYXNrKCJkb2N1bWVudC5yZWFkeSIpO3ZhciB4PVMuc3RhcnRUYXNrKCJwcmVsb2FkIGFuZCBib290Iik7cShmdW5jdGlvbigpe2wudHJhY2UoImRvY3VtZW50IGlzIHJlYWR5Iik7Uy5maW5pc2hUYXNrKHYpfSk7dmFyIHk9cS5zYXAuc3luY1BvaW50KCJVSTUgQ29yZSBQcmVsb2FkcyBhbmQgQm9vdHN0cmFwIFNjcmlwdCIsZnVuY3Rpb24oTyxLKXtsLnRyYWNlKCJDb3JlIGxvYWRlZDogb3Blbj0iK08rIiwgZmFpbHVyZXM9IitLKTt0Ll9ib290KCk7Uy5maW5pc2hUYXNrKHgpfSk7dmFyIHo9dGhpcy5vQ29uZmlndXJhdGlvblsieHgtYm9vdFRhc2siXTtpZih6KXt2YXIgQT15LnN0YXJ0VGFzaygiY3VzdG9tIGJvb3QgdGFzayIpO3ooZnVuY3Rpb24oSyl7eS5maW5pc2hUYXNrKEEsdHlwZW9mIEs9PT0idW5kZWZpbmVkInx8Sz09PXRydWUpfSl9dmFyIEI9bmV3IHEuc2FwLlZlcnNpb24odGhpcy5vQ29uZmlndXJhdGlvbi5nZXRDb21wYXRpYmlsaXR5VmVyc2lvbigiZmxleEJveFBvbHlmaWxsIikpO2lmKEIuY29tcGFyZVRvKCIxLjE2Iik+PTApe3Euc3VwcG9ydC51c2VGbGV4Qm94UG9seWZpbGw9ZmFsc2V9ZWxzZSBpZighcS5zdXBwb3J0LmZsZXhCb3hMYXlvdXQmJiFxLnN1cHBvcnQubmV3RmxleEJveExheW91dCYmIXEuc3VwcG9ydC5pZTEwRmxleEJveExheW91dCl7cS5zdXBwb3J0LnVzZUZsZXhCb3hQb2x5ZmlsbD10cnVlfWVsc2V7cS5zdXBwb3J0LnVzZUZsZXhCb3hQb2x5ZmlsbD1mYWxzZX12YXIgSD15LnN0YXJ0VGFzaygiYm9vdHN0cmFwIHNjcmlwdCIpO3RoaXMuYm9vdD1mdW5jdGlvbigpe2lmKHRoaXMuYkJvb3RlZCl7cmV0dXJufXRoaXMuYkJvb3RlZD10cnVlO3kuZmluaXNoVGFzayhIKX07dmFyIFA9dGhpcy5vQ29uZmlndXJhdGlvbi5wcmVsb2FkO2lmKHdpbmRvd1sic2FwLXVpLWRlYnVnIl0pe1A9IiJ9aWYoUD09PSJhdXRvIil7UD0od2luZG93WyJzYXAtdWktb3B0aW1pemVkIl0mJiF0aGlzLm9Db25maWd1cmF0aW9uWyd4eC1sb2FkQWxsTW9kZSddKT8ic3luYyI6IiJ9dGhpcy5vQ29uZmlndXJhdGlvbi5wcmVsb2FkPVA7aWYoUD09PSJzeW5jInx8UD09PSJhc3luYyIpe3ZhciBJPVAhPT0ic3luYyI7cS5lYWNoKG0sZnVuY3Rpb24oaSxLKXtpZihLLm1hdGNoKC9cLmxpYnJhcnkkLykpe3Euc2FwLnByZWxvYWRNb2R1bGVzKEsrIi1wcmVsb2FkIixJLHkpfX0pfXZhciBKPXRoaXMub0NvbmZpZ3VyYXRpb24uZ2V0QXBwQ2FjaGVCdXN0ZXIoKTtpZihKJiZKLmxlbmd0aD4wKXtxLnNhcC5yZXF1aXJlKCJzYXAudWkuY29yZS5BcHBDYWNoZUJ1c3RlciIpO3NhcC51aS5jb3JlLkFwcENhY2hlQnVzdGVyLmJvb3QoeSl9fSxtZXRhZGF0YTp7cHVibGljTWV0aG9kczpbImJvb3QiLCJpc0luaXRpYWxpemVkIiwiaXNUaGVtZUFwcGxpZWQiLCJhdHRhY2hJbml0RXZlbnQiLCJhdHRhY2hJbml0IiwiZ2V0UmVuZGVyTWFuYWdlciIsImNyZWF0ZVJlbmRlck1hbmFnZXIiLCJnZXRDb25maWd1cmF0aW9uIiwic2V0Um9vdCIsImNyZWF0ZVVJQXJlYSIsImdldFVJQXJlYSIsImdldFVJRGlydHkiLCJnZXRFbGVtZW50QnlJZCIsImdldEN1cnJlbnRGb2N1c2VkQ29udHJvbElkIiwiZ2V0Q29udHJvbCIsImdldENvbXBvbmVudCIsImdldFRlbXBsYXRlIiwibG9jayIsInVubG9jayIsImlzTG9ja2VkIiwiYXR0YWNoRXZlbnQiLCJkZXRhY2hFdmVudCIsImFwcGx5Q2hhbmdlcyIsImdldEV2ZW50QnVzIiwiYXBwbHlUaGVtZSIsInNldFRoZW1lUm9vdCIsImF0dGFjaFRoZW1lQ2hhbmdlZCIsImRldGFjaFRoZW1lQ2hhbmdlZCIsImdldFN0YXRpY0FyZWFSZWYiLCJyZWdpc3RlclBsdWdpbiIsInVucmVnaXN0ZXJQbHVnaW4iLCJnZXRMaWJyYXJ5UmVzb3VyY2VCdW5kbGUiLCJieUlkIiwiZ2V0TG9hZGVkTGlicmFyaWVzIiwibG9hZExpYnJhcnkiLCJpbml0TGlicmFyeSIsImluY2x1ZGVMaWJyYXJ5VGhlbWUiLCJzZXRNb2RlbCIsImdldE1vZGVsIiwiaGFzTW9kZWwiLCJpc01vYmlsZSIsImF0dGFjaENvbnRyb2xFdmVudCIsImRldGFjaENvbnRyb2xFdmVudCIsImF0dGFjaEludGVydmFsVGltZXIiLCJkZXRhY2hJbnRlcnZhbFRpbWVyIiwiYXR0YWNoUGFyc2VFcnJvciIsImRldGFjaFBhcnNlRXJyb3IiLCJmaXJlUGFyc2VFcnJvciIsImF0dGFjaFZhbGlkYXRpb25FcnJvciIsImRldGFjaFZhbGlkYXRpb25FcnJvciIsImZpcmVWYWxpZGF0aW9uRXJyb3IiLCJhdHRhY2hGb3JtYXRFcnJvciIsImRldGFjaEZvcm1hdEVycm9yIiwiZmlyZUZvcm1hdEVycm9yIiwiYXR0YWNoVmFsaWRhdGlvblN1Y2Nlc3MiLCJkZXRhY2hWYWxpZGF0aW9uU3VjY2VzcyIsImZpcmVWYWxpZGF0aW9uU3VjY2VzcyIsImF0dGFjaExvY2FsaXphdGlvbkNoYW5nZWQiLCJkZXRhY2hMb2NhbGl6YXRpb25DaGFuZ2VkIiwiYXR0YWNoTGlicmFyeUNoYW5nZWQiLCJkZXRhY2hMaWJyYXJ5Q2hhbmdlZCIsImlzU3RhdGljQXJlYVJlZiIsImNyZWF0ZUNvbXBvbmVudCIsImdldFJvb3RDb21wb25lbnQiLCJnZXRBcHBsaWNhdGlvbiJdfX0pO2suTV9FVkVOVFM9e0NvbnRyb2xFdmVudDoiQ29udHJvbEV2ZW50IixVSVVwZGF0ZWQ6IlVJVXBkYXRlZCIsVGhlbWVDaGFuZ2VkOiJUaGVtZUNoYW5nZWQiLExvY2FsaXphdGlvbkNoYW5nZWQ6ImxvY2FsaXphdGlvbkNoYW5nZWQiLExpYnJhcnlDaGFuZ2VkOiJsaWJyYXJ5Q2hhbmdlZCIsVmFsaWRhdGlvbkVycm9yOiJ2YWxpZGF0aW9uRXJyb3IiLFBhcnNlRXJyb3I6InBhcnNlRXJyb3IiLEZvcm1hdEVycm9yOiJmb3JtYXRFcnJvciIsVmFsaWRhdGlvblN1Y2Nlc3M6InZhbGlkYXRpb25TdWNjZXNzIn07ay5wcm90b3R5cGUuX2Jvb3Q9ZnVuY3Rpb24oKXt0aGlzLmxvY2soKTt2YXIgYj10aGlzLm9Db25maWd1cmF0aW9uWyd4eC1wcmVsb2FkTGliQ3NzJ107aWYoYi5sZW5ndGg+MCl7dmFyIEE9YlswXS5zbGljZSgwLDEpPT09IiEiO2lmKEEpe2JbMF09YlswXS5zbGljZSgxKX1pZihiWzBdPT09IioiKXtiLnNwbGljZSgwLDEpO3ZhciBwPTA7cS5lYWNoKHRoaXMub0NvbmZpZ3VyYXRpb24ubW9kdWxlcyxmdW5jdGlvbihpLGYpe3ZhciBtPWYubWF0Y2goL14oLiopXC5saWJyYXJ5JC8pO2lmKG0pe2Iuc3BsaWNlKHAsMCxtWzFdKX19KX1pZighQSl7dGhpcy5pbmNsdWRlTGlicmFyeVRoZW1lKCJzYXAtdWktbWVyZ2VkIix1bmRlZmluZWQsIj9sPSIrYi5qb2luKCIsIikpfX12YXIgdD10aGlzO3EuZWFjaCh0aGlzLm9Db25maWd1cmF0aW9uLm1vZHVsZXMsZnVuY3Rpb24oaSxmKXt2YXIgbT1mLm1hdGNoKC9eKC4qKVwubGlicmFyeSQvKTtpZihtKXt0LmxvYWRMaWJyYXJ5KG1bMV0pfWVsc2V7cS5zYXAucmVxdWlyZShmKX19KTt0aGlzLnVubG9jaygpfTtrLnByb3RvdHlwZS5hcHBseVRoZW1lPWZ1bmN0aW9uKHQscyl7dD10aGlzLm9Db25maWd1cmF0aW9uLl9ub3JtYWxpemVUaGVtZSh0LHMpO2lmKHMpe3RoaXMuc2V0VGhlbWVSb290KHQscyl9aWYodCYmdGhpcy5zVGhlbWUhPXQpe3ZhciBiPXRoaXMuc1RoZW1lO3RoaXMuX3VwZGF0ZVRoZW1lVXJscyh0KTt0aGlzLnNUaGVtZT10O3RoaXMub0NvbmZpZ3VyYXRpb24uX3NldFRoZW1lKHQpO3EoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KS5yZW1vdmVDbGFzcygic2FwVWlUaGVtZS0iK2IpLmFkZENsYXNzKCJzYXBVaVRoZW1lLSIrdCk7aWYodGhpcy5vVGhlbWVDaGVjayl7dGhpcy5vVGhlbWVDaGVjay5maXJlVGhlbWVDaGFuZ2VkRXZlbnQoZmFsc2UsdHJ1ZSl9fX07ay5wcm90b3R5cGUuX3VwZGF0ZVRoZW1lVXJscz1mdW5jdGlvbih0KXt2YXIgYj10aGlzLHM9dGhpcy5vQ29uZmlndXJhdGlvbi5nZXRSVEwoKT8iLVJUTCI6IiI7cSgibGlua1tpZF49c2FwLXVpLXRoZW1lLV0iKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIGw9dGhpcy5pZC5zbGljZSgxMyksTD10aGlzLmhyZWYuc2xpY2UodGhpcy5ocmVmLmxhc3RJbmRleE9mKCIvIikrMSksUz0ibGlicmFyeSIsSCxwLCQ9cSh0aGlzKTtpZigocD1sLmluZGV4T2YoIi1bIikpPjApe1MrPWwuc2xpY2UocCsyLC0xKTtsPWwuc2xpY2UoMCxwKX1pZihMPT09KFMrIi5jc3MiKXx8TD09PShTKyItUlRMLmNzcyIpKXtMPVMrcysiLmNzcyJ9aWYoJC5hdHRyKCJzYXAtdWktY3NzLWNvdW50IikpeyQucmVtb3ZlKCl9SD1iLl9nZXRUaGVtZVBhdGgobCx0KStMO2lmKEghPXRoaXMuaHJlZil7dGhpcy5ocmVmPUg7JC5yZW1vdmVBdHRyKCJzYXAtdWktcmVhZHkiKX19KX07ay5wcm90b3R5cGUuX2dldFRoZW1lUGF0aD1mdW5jdGlvbihsLHQpe2lmKHRoaXMuX21UaGVtZVJvb3RzKXt2YXIgcD10aGlzLl9tVGhlbWVSb290c1t0KyIgIitsXXx8dGhpcy5fbVRoZW1lUm9vdHNbdF07aWYocCl7cD1wK2wucmVwbGFjZSgvXC4vZywiLyIpKyIvdGhlbWVzLyIrdCsiLyI7cS5zYXAucmVnaXN0ZXJNb2R1bGVQYXRoKGwrIi50aGVtZXMuIit0LHApO3JldHVybiBwfX1yZXR1cm4gcS5zYXAuZ2V0TW9kdWxlUGF0aChsKyIudGhlbWVzLiIrdCwiLyIpfTtrLnByb3RvdHlwZS5zZXRUaGVtZVJvb3Q9ZnVuY3Rpb24odCxsLHMpe2lmKCF0aGlzLl9tVGhlbWVSb290cyl7dGhpcy5fbVRoZW1lUm9vdHM9e319aWYocz09PXVuZGVmaW5lZCl7cz1sO2w9dW5kZWZpbmVkfXM9cysocy5zbGljZSgtMSk9PSIvIj8iIjoiLyIpO2lmKGwpe2Zvcih2YXIgaT0wO2k8bC5sZW5ndGg7aSsrKXt2YXIgYj1sW2ldO3RoaXMuX21UaGVtZVJvb3RzW3QrIiAiK2JdPXN9fWVsc2V7dGhpcy5fbVRoZW1lUm9vdHNbdF09c31yZXR1cm4gdGhpc307ay5wcm90b3R5cGUuaW5pdD1mdW5jdGlvbigpe2lmKHRoaXMuYkluaXRpYWxpemVkKXtyZXR1cm59dmFyIGI9cS5zYXAubG9nLE09InNhcC51aS5jb3JlLkNvcmUuaW5pdCgpIjt0aGlzLmJvb3QoKTtiLmluZm8oIkluaXRpYWxpemluZyIsbnVsbCxNKTt0aGlzLm9Gb2N1c0hhbmRsZXI9bmV3IEYoZG9jdW1lbnQuYm9keSx0aGlzKTt0aGlzLm9SZXNpemVIYW5kbGVyPW5ldyBoKHRoaXMpO3RoaXMub1RoZW1lQ2hlY2s9bmV3IFQodGhpcyk7Yi5pbmZvKCJJbml0aWFsaXplZCIsbnVsbCxNKTt0aGlzLmJJbml0aWFsaXplZD10cnVlO2IuaW5mbygiU3RhcnRpbmcgUGx1Z2lucyIsbnVsbCxNKTt0aGlzLnN0YXJ0UGx1Z2lucygpO2IuaW5mbygiUGx1Z2lucyBzdGFydGVkIixudWxsLE0pO3ZhciBvPXRoaXMub0NvbmZpZ3VyYXRpb247aWYoby5hcmVhcyl7Zm9yKHZhciBpPTAsbD1vLmFyZWFzLmxlbmd0aDtpPGw7aSsrKXt0aGlzLmNyZWF0ZVVJQXJlYShvLmFyZWFzW2ldKX1vLmFyZWFzPXVuZGVmaW5lZH1pZihvLm9uSW5pdCl7aWYodHlwZW9mIG8ub25Jbml0PT09ImZ1bmN0aW9uIil7by5vbkluaXQoKX1lbHNle3Euc2FwLmdsb2JhbEV2YWwoby5vbkluaXQpfW8ub25Jbml0PXVuZGVmaW5lZH10aGlzLm9UaGVtZUNoZWNrLmZpcmVUaGVtZUNoYW5nZWRFdmVudCh0cnVlKTt2YXIgcz1vLmdldFJvb3RDb21wb25lbnQoKTtpZihzKXtiLmluZm8oIkxvYWRpbmcgUm9vdCBDb21wb25lbnQ6ICIrcyxudWxsLE0pO3ZhciBtPXNhcC51aS5jb21wb25lbnQoe25hbWU6c30pO3RoaXMub1Jvb3RDb21wb25lbnQ9bTt2YXIgbj1vWyJ4eC1yb290Q29tcG9uZW50Tm9kZSJdO2lmKG4mJm0gaW5zdGFuY2VvZiBzYXAudWkuY29yZS5VSUNvbXBvbmVudCl7dmFyIHA9cS5zYXAuZG9tQnlJZChuKTtpZihwKXtiLmluZm8oIkNyZWF0aW5nIENvbXBvbmVudENvbnRhaW5lciBmb3IgUm9vdCBDb21wb25lbnQ6ICIrcyxudWxsLE0pO3ZhciB0PW5ldyBzYXAudWkuY29yZS5Db21wb25lbnRDb250YWluZXIoe2NvbXBvbmVudDptLHByb3BhZ2F0ZU1vZGVsOnRydWV9KTt0LnBsYWNlQXQocCl9fX1lbHNle3ZhciBBPW8uZ2V0QXBwbGljYXRpb24oKTtpZihBKXtiLndhcm5pbmcoIlRoZSBjb25maWd1cmF0aW9uICdhcHBsaWNhdGlvbicgaXMgZGVwcmVjYXRlZC4gUGxlYXNlIHVzZSB0aGUgY29uZmlndXJhdGlvbiAnY29tcG9uZW50JyBpbnN0ZWFkISBQbGVhc2UgbWlncmF0ZSBmcm9tIHNhcC51aS5hcHAuQXBwbGljYXRpb24gdG8gc2FwLnVpLmNvcmUuQ29tcG9uZW50LiIpO2IuaW5mbygiTG9hZGluZyBBcHBsaWNhdGlvbjogIitBLG51bGwsTSk7cS5zYXAucmVxdWlyZShBKTt2YXIgdT1xLnNhcC5nZXRPYmplY3QoQSk7dmFyIHY9bmV3IHUoKTt9fXZhciB3PXRoaXMuYUluaXRMaXN0ZW5lcnM7dGhpcy5hSW5pdExpc3RlbmVycz11bmRlZmluZWQ7aWYodyYmdy5sZW5ndGg+MCl7Yi5pbmZvKCJGaXJlIExvYWRlZCBFdmVudCIsbnVsbCxNKTtxLmVhY2godyxmdW5jdGlvbihpLGYpe2YoKX0pfXRoaXMucmVuZGVyUGVuZGluZ1VJVXBkYXRlcygpfTtrLnByb3RvdHlwZS5oYW5kbGVMb2FkPWZ1bmN0aW9uKCl7dGhpcy5iRG9tUmVhZHk9dHJ1ZTt2YXIgdz10aGlzLmlzTG9ja2VkKCk7aWYoIXcpe3RoaXMubG9jaygpfXRoaXMuaW5pdCgpO2lmKCF3KXt0aGlzLnVubG9jaygpfX07ay5wcm90b3R5cGUuaXNJbml0aWFsaXplZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmJJbml0aWFsaXplZH07ay5wcm90b3R5cGUuaXNUaGVtZUFwcGxpZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gVC50aGVtZUxvYWRlZH07ay5wcm90b3R5cGUuYXR0YWNoSW5pdEV2ZW50PWZ1bmN0aW9uKGYpe2lmKHRoaXMuYUluaXRMaXN0ZW5lcnMpe3RoaXMuYUluaXRMaXN0ZW5lcnMucHVzaChmKX19O2sucHJvdG90eXBlLmF0dGFjaEluaXQ9ZnVuY3Rpb24oZil7aWYodGhpcy5hSW5pdExpc3RlbmVycyl7dGhpcy5hSW5pdExpc3RlbmVycy5wdXNoKGYpfWVsc2V7ZigpfX07ay5wcm90b3R5cGUubG9jaz1mdW5jdGlvbigpe3RoaXMuYkxvY2tlZD10cnVlfTtrLnByb3RvdHlwZS51bmxvY2s9ZnVuY3Rpb24oKXt0aGlzLmJMb2NrZWQ9ZmFsc2V9O2sucHJvdG90eXBlLmlzTG9ja2VkPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYkxvY2tlZH07ay5wcm90b3R5cGUuZ2V0Q29uZmlndXJhdGlvbj1mdW5jdGlvbigpe3JldHVybiB0aGlzLm9Db25maWd1cmF0aW9ufTtrLnByb3RvdHlwZS5nZXRSZW5kZXJNYW5hZ2VyPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY3JlYXRlUmVuZGVyTWFuYWdlcigpfTtrLnByb3RvdHlwZS5jcmVhdGVSZW5kZXJNYW5hZ2VyPWZ1bmN0aW9uKCl7cmV0dXJuKG5ldyBSKCkpLmdldEludGVyZmFjZSgpfTtrLnByb3RvdHlwZS5nZXRDdXJyZW50Rm9jdXNlZENvbnRyb2xJZD1mdW5jdGlvbigpe2lmKCF0aGlzLmlzSW5pdGlhbGl6ZWQoKSl7dGhyb3cgbmV3IEVycm9yKCJDb3JlIG11c3QgYmUgaW5pdGlhbGl6ZWQiKX1yZXR1cm4gdGhpcy5vRm9jdXNIYW5kbGVyLmdldEN1cnJlbnRGb2N1c2VkQ29udHJvbElkKCl9O2sucHJvdG90eXBlLmxvYWRMaWJyYXJ5PWZ1bmN0aW9uKGwsdSl7aWYoIXRoaXMubUxpYnJhcmllc1tsXSl7dmFyIG09bCsiLmxpYnJhcnkiLEE7aWYodSl7cS5zYXAucmVnaXN0ZXJNb2R1bGVQYXRoKGwsdSl9aWYodGhpcy5vQ29uZmlndXJhdGlvblsneHgtbG9hZEFsbE1vZGUnXSYmIXEuc2FwLmlzRGVjbGFyZWQobSkpe0E9bSsiLWFsbCI7cS5zYXAubG9nLmRlYnVnKCJsb2FkIGFsbC1pbi1vbmUgZmlsZSAiK0EpO3Euc2FwLnJlcXVpcmUoQSl9ZWxzZSBpZih0aGlzLm9Db25maWd1cmF0aW9uLnByZWxvYWQ9PT0nc3luYyd8fHRoaXMub0NvbmZpZ3VyYXRpb24ucHJlbG9hZD09PSdhc3luYycpe3Euc2FwLnByZWxvYWRNb2R1bGVzKG0rIi1wcmVsb2FkIixmYWxzZSl9cS5zYXAucmVxdWlyZShtKTtpZighdGhpcy5tTGlicmFyaWVzW2xdKXtxLnNhcC5sb2cud2FybmluZygibGlicmFyeSAiK2wrIiBkaWRuJ3QgaW5pdGlhbGl6ZSBpdHNlbGYiKTt0aGlzLmluaXRMaWJyYXJ5KGwpfWlmKHRoaXMub1RoZW1lQ2hlY2smJnRoaXMuaXNJbml0aWFsaXplZCgpKXt0aGlzLm9UaGVtZUNoZWNrLmZpcmVUaGVtZUNoYW5nZWRFdmVudCh0cnVlKX19cmV0dXJuIHRoaXMubUxpYnJhcmllc1tsXX07ay5wcm90b3R5cGUuY3JlYXRlQ29tcG9uZW50PWZ1bmN0aW9uKHYsdSxpLHMpe2lmKHR5cGVvZiB2PT09InN0cmluZyIpe3Y9e25hbWU6dix1cmw6dX07aWYodHlwZW9mIGk9PT0ib2JqZWN0Iil7di5zZXR0aW5ncz1pfWVsc2V7di5pZD1pO3Yuc2V0dGluZ3M9c319cmV0dXJuIHNhcC51aS5jb21wb25lbnQodil9O2sucHJvdG90eXBlLmdldFJvb3RDb21wb25lbnQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vUm9vdENvbXBvbmVudH07ay5wcm90b3R5cGUuaW5pdExpYnJhcnk9ZnVuY3Rpb24obCl7dmFyIEw9dHlwZW9mIGw9PT0ic3RyaW5nIixvPUw/e25hbWU6bH06bCxzPW8ubmFtZSxiPXEuc2FwLmxvZyxNPSJzYXAudWkuY29yZS5Db3JlLmluaXRMaWJyYXJ5KCkiO2lmKEwpe2Iud2FybmluZygiW0RlcHJlY2F0ZWRdIGxpYnJhcnkgIitzKyIgdXNlcyBvbGQgZmFzaGlvbmVkIGluaXRMaWJyYXJ5KCkgY2FsbCAocmVidWlsZCB3aXRoIG5ld2VzdCBnZW5lcmF0b3IpIil9aWYoIXN8fHRoaXMubUxpYnJhcmllc1tzXSl7cmV0dXJufWIuZGVidWcoIkFuYWx5emluZyBMaWJyYXJ5ICIrcyxudWxsLE0pO3RoaXMubUxpYnJhcmllc1tzXT1vPXEuZXh0ZW5kKHtkZXBlbmRlbmNpZXM6W10sdHlwZXM6W10saW50ZXJmYWNlczpbXSxjb250cm9sczpbXSxlbGVtZW50czpbXX0sbyk7ZnVuY3Rpb24gZigpe3ZhciBwPXEuc2FwLnByb3BlcnRpZXMoe3VybDpzYXAudWkucmVzb3VyY2UocywibGlicmFyeS5wcm9wZXJ0aWVzIil9KTtvLnZlcnNpb249cC5nZXRQcm9wZXJ0eShzKyJbdmVyc2lvbl0iKTt2YXIgdD1wLmdldFByb3BlcnR5KHMrIltkZXBlbmRlbmNpZXNdIik7Yi5kZWJ1ZygiUmVxdWlyZWQgTGlicmFyaWVzOiAiK3QsbnVsbCxNKTtvLmRlcGVuZGVuY2llcz0odCYmdC5zcGxpdCgvWyw7fCBdLykpfHxbXTt2YXIgSz1wLmdldEtleXMoKSx1PS8oLispXC4odHlwZXxpbnRlcmZhY2V8Y29udHJvbHxlbGVtZW50KSQvLHY7Zm9yKHZhciBpPTA7aTxLLmxlbmd0aDtpKyspe3ZhciB3PXAuZ2V0UHJvcGVydHkoS1tpXSk7aWYodj13Lm1hdGNoKHUpKXtvW3ZbMl0rInMiXS5wdXNoKEtbaV0pfX19aWYoTCl7ZigpfWZvcih2YXIgaT0wO2k8by5kZXBlbmRlbmNpZXMubGVuZ3RoO2krKyl7dmFyIG09by5kZXBlbmRlbmNpZXNbaV07Yi5kZWJ1ZygicmVzb2x2ZSBEZXBlbmRlbmNpZXMgdG8gIittLG51bGwsTSk7aWYoIXRoaXMubUxpYnJhcmllc1ttXSl7Yi53YXJuaW5nKCJEZXBlbmRlbmN5IGZyb20gIitzKyIgdG8gIittKyIgaGFzIG5vdCBiZWVuIHJlc29sdmVkIGJ5IGxpYnJhcnkgaXRzZWxmIixudWxsLE0pO3RoaXMubG9hZExpYnJhcnkobSl9fWEucmVnaXN0ZXJJbnRlcmZhY2VUeXBlcyhvLmludGVyZmFjZXMpO3ZhciBuPW8uY29udHJvbHMuY29uY2F0KG8uZWxlbWVudHMpO2Zvcih2YXIgaT0wO2k8bi5sZW5ndGg7aSsrKXtzYXAudWkubGF6eVJlcXVpcmUobltpXSwibmV3IGV4dGVuZCBnZXRNZXRhZGF0YSIpfWlmKCFvLm5vTGlicmFyeUNTUyYmcS5pbkFycmF5KHMsdGhpcy5vQ29uZmlndXJhdGlvblsneHgtcHJlbG9hZExpYkNzcyddKTwwKXt0aGlzLmluY2x1ZGVMaWJyYXJ5VGhlbWUocyl9by5zTmFtZT1vLm5hbWU7by5hQ29udHJvbHM9by5jb250cm9scztpZighcS5zYXAuaXNEZWNsYXJlZChzKyIubGlicmFyeSIpKXtiLndhcm5pbmcoIkxpYnJhcnkgTW9kdWxlICIrcysiLmxpYnJhcnkiKyIgbm90IGxvYWRlZCBhdXRvbWF0aWNhbGx5IixudWxsLE0pO3Euc2FwLnJlcXVpcmUocysiLmxpYnJhcnkiKX10aGlzLmZpcmVMaWJyYXJ5Q2hhbmdlZCh7bmFtZTpzLHN0ZXJlb3R5cGU6ImxpYnJhcnkiLG9wZXJhdGlvbjoiYWRkIixtZXRhZGF0YTpvfSl9O2sucHJvdG90eXBlLmluY2x1ZGVMaWJyYXJ5VGhlbWU9ZnVuY3Rpb24obCx2LFEpe2lmKChsIT0ic2FwLnVpLmxlZ2FjeSIpJiYobCE9InNhcC51aS5jbGFzc2ljIikpe2lmKCF2KXt2PSIifXZhciBzPSh0aGlzLm9Db25maWd1cmF0aW9uLmdldFJUTCgpPyItUlRMIjoiIik7dmFyIEwsYj1sKyh2Lmxlbmd0aD4wPyItWyIrdisiXSI6dik7aWYobCYmbC5pbmRleE9mKCI6Iik9PS0xKXtMPSJsaWJyYXJ5Iit2K3N9ZWxzZXtMPWwuc3Vic3RyaW5nKGwuaW5kZXhPZigiOiIpKzEpK3Y7bD1sLnN1YnN0cmluZygwLGwuaW5kZXhPZigiOiIpKX12YXIgZj10aGlzLl9nZXRUaGVtZVBhdGgobCx0aGlzLnNUaGVtZSkrTCsiLmNzcyIrKFE/UToiIik7cS5zYXAubG9nLmluZm8oIkluY2x1ZGluZyAiK2YrIiAtICBzYXAudWkuY29yZS5Db3JlLmluY2x1ZGVMaWJyYXJ5VGhlbWUoKSIpO3Euc2FwLmluY2x1ZGVTdHlsZVNoZWV0KGYsInNhcC11aS10aGVtZS0iK2IpO2lmKHNhcC51aS5jb3JlLnRoZW1pbmcmJnNhcC51aS5jb3JlLnRoZW1pbmcuUGFyYW1ldGVycyl7c2FwLnVpLmNvcmUudGhlbWluZy5QYXJhbWV0ZXJzLl9hZGRMaWJyYXJ5VGhlbWUoYil9fX07ay5wcm90b3R5cGUuZ2V0TG9hZGVkTGlicmFyaWVzPWZ1bmN0aW9uKCl7cmV0dXJuIHEuZXh0ZW5kKHt9LHRoaXMubUxpYnJhcmllcyl9O2sucHJvdG90eXBlLmdldExpYnJhcnlSZXNvdXJjZUJ1bmRsZT1mdW5jdGlvbihsLEwpe2w9bHx8InNhcC51aS5jb3JlIjtMPUx8fHRoaXMuZ2V0Q29uZmlndXJhdGlvbigpLmdldExhbmd1YWdlKCk7dmFyIEs9bCsiLyIrTDtpZighdGhpcy5tUmVzb3VyY2VCdW5kbGVzW0tdKXt2YXIgdT1zYXAudWkucmVzb3VyY2UobCwnbWVzc2FnZWJ1bmRsZS5wcm9wZXJ0aWVzJyk7dGhpcy5tUmVzb3VyY2VCdW5kbGVzW0tdPXEuc2FwLnJlc291cmNlcyh7dXJsOnUsbG9jYWxlOkx9KX1yZXR1cm4gdGhpcy5tUmVzb3VyY2VCdW5kbGVzW0tdfTtrLnByb3RvdHlwZS5zZXRSb290PWZ1bmN0aW9uKG8sYil7aWYoYil7Yi5wbGFjZUF0KG8sIm9ubHkiKX19O2sucHJvdG90eXBlLmNyZWF0ZVVJQXJlYT1mdW5jdGlvbihvKXt2YXIgdD10aGlzO2lmKCFvKXt0aHJvdyBuZXcgRXJyb3IoIm9Eb21SZWYgbXVzdCBub3QgYmUgbnVsbCIpfWlmKHR5cGVvZihvKT09PSJzdHJpbmciKXt2YXIgaT1vO289cS5zYXAuZG9tQnlJZChvKTtpZighbyl7dGhyb3cgbmV3IEVycm9yKCJET00gZWxlbWVudCB3aXRoIElEICciK2krIicgbm90IGZvdW5kIGluIHBhZ2UsIGJ1dCBhcHBsaWNhdGlvbiB0cmllcyB0byBpbnNlcnQgY29udGVudC4iKX19aWYoIW8uaWR8fG8uaWQubGVuZ3RoPT0wKXtvLmlkPXEuc2FwLnVpZCgpfXZhciBJPW8uaWQ7aWYoIXRoaXMubVVJQXJlYXNbSV0pe3RoaXMubVVJQXJlYXNbSV09bmV3IFUodGhpcyxvKTtxLmVhY2godGhpcy5vTW9kZWxzLGZ1bmN0aW9uKG4sbSl7dC5tVUlBcmVhc1tJXS5vUHJvcGFnYXRlZFByb3BlcnRpZXMub01vZGVsc1tuXT1tfSk7dGhpcy5tVUlBcmVhc1tJXS5wcm9wYWdhdGVQcm9wZXJ0aWVzKHRydWUpfWVsc2V7dGhpcy5tVUlBcmVhc1tJXS5zZXRSb290Tm9kZShvKX1yZXR1cm4gdGhpcy5tVUlBcmVhc1tJXX07ay5wcm90b3R5cGUuZ2V0VUlBcmVhPWZ1bmN0aW9uKG8pe3ZhciBpPSIiO2lmKHR5cGVvZihvKT09InN0cmluZyIpe2k9b31lbHNle2k9by5pZH1pZihpKXtyZXR1cm4gdGhpcy5tVUlBcmVhc1tpXX1yZXR1cm4gbnVsbH07dmFyIHI9VS5fb1JlbmRlckxvZztrLnByb3RvdHlwZS5hZGRJbnZhbGlkYXRlZFVJQXJlYT1mdW5jdGlvbih1KXtpZighdGhpcy5fc1JlcmVuZGVyVGltZXIpe3IuZGVidWcoIlJlZ2lzdGVyaW5nIHRpbWVyIGZvciBkZWxheWVkIHJlLXJlbmRlcmluZyIpO3RoaXMuX3NSZXJlbmRlclRpbWVyPXEuc2FwLmRlbGF5ZWRDYWxsKDAsdGhpcywicmVuZGVyUGVuZGluZ1VJVXBkYXRlcyIpfX07ay5NQVhfUkVOREVSSU5HX0lURVJBVElPTlM9MjA7ay5wcm90b3R5cGUucmVuZGVyUGVuZGluZ1VJVXBkYXRlcz1mdW5jdGlvbigpe3IuZGVidWcoIlJlbmRlciBwZW5kaW5nIFVJIHVwZGF0ZXM6IHN0YXJ0Iik7cS5zYXAubWVhc3VyZS5zdGFydCgicmVuZGVyUGVuZGluZ1VJVXBkYXRlcyIsIlJlbmRlciBwZW5kaW5nIFVJIHVwZGF0ZXMgaW4gYWxsIFVJQXJlYXMiKTt2YXIgdT1mYWxzZSxsPWsuTUFYX1JFTkRFUklOR19JVEVSQVRJT05TPjAsTD0wO3RoaXMuX2JSZW5kZXJpbmc9dHJ1ZTtkb3tpZihsKXtMKys7aWYoTD5rLk1BWF9SRU5ERVJJTkdfSVRFUkFUSU9OUyl7dGhpcy5fYlJlbmRlcmluZz1mYWxzZTt0aHJvdyBuZXcgRXJyb3IoIlJlbmRlcmluZyBoYXMgYmVlbiByZS1zdGFydGVkIHRvbyBtYW55IHRpbWVzICgiK0wrIikuIEFkZCBVUkwgcGFyYW1ldGVyIHNhcC11aS14eC1kZWJ1Z1JlbmRlcmluZz10cnVlIGZvciBhIGRldGFpbGVkIGFuYWx5c2lzLiIpfWlmKEw+MSl7ci5kZWJ1ZygiUmVuZGVyIHBlbmRpbmcgVUkgdXBkYXRlczogaXRlcmF0aW9uICIrTCl9fWlmKHRoaXMuX3NSZXJlbmRlclRpbWVyKXtxLnNhcC5jbGVhckRlbGF5ZWRDYWxsKHRoaXMuX3NSZXJlbmRlclRpbWVyKTt0aGlzLl9zUmVyZW5kZXJUaW1lcj11bmRlZmluZWR9dmFyIG09dGhpcy5tVUlBcmVhcztmb3IodmFyIGkgaW4gbSl7dT1tW2ldLnJlcmVuZGVyKCl8fHV9fXdoaWxlKGwmJnRoaXMuX3NSZXJlbmRlclRpbWVyKTt0aGlzLl9iUmVuZGVyaW5nPWZhbHNlO2lmKHUpe3RoaXMuZmlyZVVJVXBkYXRlZCgpfXIuZGVidWcoIlJlbmRlciBwZW5kaW5nIFVJIHVwZGF0ZXM6IGZpbmlzaGVkIik7cS5zYXAubWVhc3VyZS5lbmQoInJlbmRlclBlbmRpbmdVSVVwZGF0ZXMiKX07ay5wcm90b3R5cGUuZ2V0VUlEaXJ0eT1mdW5jdGlvbigpe3JldHVybiEhKHRoaXMuX3NSZXJlbmRlclRpbWVyfHx0aGlzLl9iUmVuZGVyaW5nKX07ay5wcm90b3R5cGUuYXR0YWNoVUlVcGRhdGVkPWZ1bmN0aW9uKGYsbCl7dGhpcy5hdHRhY2hFdmVudChrLk1fRVZFTlRTLlVJVXBkYXRlZCxmLGwpfTtrLnByb3RvdHlwZS5kZXRhY2hVSVVwZGF0ZWQ9ZnVuY3Rpb24oZixsKXt0aGlzLmRldGFjaEV2ZW50KGsuTV9FVkVOVFMuVUlVcGRhdGVkLGYsbCl9O2sucHJvdG90eXBlLmZpcmVVSVVwZGF0ZWQ9ZnVuY3Rpb24ocCl7dGhpcy5maXJlRXZlbnQoay5NX0VWRU5UUy5VSVVwZGF0ZWQscCl9O2sucHJvdG90eXBlLmF0dGFjaFRoZW1lQ2hhbmdlZD1mdW5jdGlvbihmLGwpe3RoaXMuYXR0YWNoRXZlbnQoay5NX0VWRU5UUy5UaGVtZUNoYW5nZWQsZixsKX07ay5wcm90b3R5cGUuZGV0YWNoVGhlbWVDaGFuZ2VkPWZ1bmN0aW9uKGYsbCl7dGhpcy5kZXRhY2hFdmVudChrLk1fRVZFTlRTLlRoZW1lQ2hhbmdlZCxmLGwpfTtrLnByb3RvdHlwZS5maXJlVGhlbWVDaGFuZ2VkPWZ1bmN0aW9uKHApe3Euc2FwLnNjcm9sbGJhclNpemUodHJ1ZSk7aWYoc2FwLnVpLmNvcmUudGhlbWluZyYmc2FwLnVpLmNvcmUudGhlbWluZy5QYXJhbWV0ZXJzKXtzYXAudWkuY29yZS50aGVtaW5nLlBhcmFtZXRlcnMucmVzZXQodHJ1ZSl9dmFyIHM9ay5NX0VWRU5UUy5UaGVtZUNoYW5nZWQ7dmFyIG89cS5FdmVudChzKTtvLnRoZW1lPXA/cC50aGVtZTpudWxsO3EuZWFjaCh0aGlzLm1FbGVtZW50cyxmdW5jdGlvbihpLGIpe2IuX2hhbmRsZUV2ZW50KG8pfSk7cS5zYXAuYWN0LnJlZnJlc2goKTt0aGlzLmZpcmVFdmVudChzLHApfTtrLnByb3RvdHlwZS5hdHRhY2hMb2NhbGl6YXRpb25DaGFuZ2VkPWZ1bmN0aW9uKGYsbCl7dGhpcy5hdHRhY2hFdmVudChrLk1fRVZFTlRTLkxvY2FsaXphdGlvbkNoYW5nZWQsZixsKX07ay5wcm90b3R5cGUuZGV0YWNoTG9jYWxpemF0aW9uQ2hhbmdlZD1mdW5jdGlvbihmLGwpe3RoaXMuZGV0YWNoRXZlbnQoay5NX0VWRU5UUy5Mb2NhbGl6YXRpb25DaGFuZ2VkLGYsbCl9O2sucHJvdG90eXBlLmZpcmVMb2NhbGl6YXRpb25DaGFuZ2VkPWZ1bmN0aW9uKG0pe3ZhciB0PXRoaXMscz1rLk1fRVZFTlRTLkxvY2FsaXphdGlvbkNoYW5nZWQsYj1xLkV2ZW50KHMse2NoYW5nZXM6bX0pLEE9c2FwLnVpLmJhc2UuTWFuYWdlZE9iamVjdC5faGFuZGxlTG9jYWxpemF0aW9uQ2hhbmdlLGY9W107cS5lYWNoKG0sZnVuY3Rpb24oaSx2KXtmLnB1c2goaSl9KTtxLnNhcC5sb2cuaW5mbygibG9jYWxpemF0aW9uIHNldHRpbmdzIGNoYW5nZWQ6ICIrZi5qb2luKCIsIiksbnVsbCwic2FwLnVpLmNvcmUuQ29yZSIpO3EuZWFjaCh0aGlzLm9Nb2RlbHMsZnVuY3Rpb24oTixNKXtpZihNJiZNLl9oYW5kbGVMb2NhbGl6YXRpb25DaGFuZ2Upe00uX2hhbmRsZUxvY2FsaXphdGlvbkNoYW5nZSgpfX0pO2Z1bmN0aW9uIG4ocCl7cS5lYWNoKHRoaXMubVVJQXJlYXMsZnVuY3Rpb24oKXtBLmNhbGwodGhpcyxwKX0pO3EuZWFjaCh0aGlzLm1PYmplY3RzWyJjb21wb25lbnQiXSxmdW5jdGlvbigpe0EuY2FsbCh0aGlzLHApfSk7cS5lYWNoKHRoaXMubUVsZW1lbnRzLGZ1bmN0aW9uKCl7QS5jYWxsKHRoaXMscCl9KX1uLmNhbGwodGhpcywxKTtuLmNhbGwodGhpcywyKTtpZihtLnJ0bCE9dW5kZWZpbmVkKXtxKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCkuYXR0cigiZGlyIixtLnJ0bD8icnRsIjoibHRyIik7dGhpcy5fdXBkYXRlVGhlbWVVcmxzKHRoaXMuc1RoZW1lKTtxLmVhY2godGhpcy5tVUlBcmVhcyxmdW5jdGlvbigpe3RoaXMuaW52YWxpZGF0ZSgpfSk7cS5zYXAubG9nLmluZm8oIlJUTCBtb2RlICIrbS5ydGw/ImFjdGl2YXRlZCI6ImRlYWN0aXZhdGVkIil9cS5lYWNoKHRoaXMubUVsZW1lbnRzLGZ1bmN0aW9uKGksbyl7dGhpcy5faGFuZGxlRXZlbnQoYil9KTt0aGlzLmZpcmVFdmVudChzLHtjaGFuZ2VzOm19KX07ay5wcm90b3R5cGUuYXR0YWNoTGlicmFyeUNoYW5nZWQ9ZnVuY3Rpb24oZixsKXt0aGlzLmF0dGFjaEV2ZW50KGsuTV9FVkVOVFMuTGlicmFyeUNoYW5nZWQsZixsKX07ay5wcm90b3R5cGUuZGV0YWNoTGlicmFyeUNoYW5nZWQ9ZnVuY3Rpb24oZixsKXt0aGlzLmRldGFjaEV2ZW50KGsuTV9FVkVOVFMuTGlicmFyeUNoYW5nZWQsZixsKX07ay5wcm90b3R5cGUuZmlyZUxpYnJhcnlDaGFuZ2VkPWZ1bmN0aW9uKHApe3RoaXMuZmlyZUV2ZW50KGsuTV9FVkVOVFMuTGlicmFyeUNoYW5nZWQscCl9O2sucHJvdG90eXBlLmFwcGx5Q2hhbmdlcz1mdW5jdGlvbigpe3RoaXMucmVuZGVyUGVuZGluZ1VJVXBkYXRlcygpfTtrLnByb3RvdHlwZS5yZWdpc3RlckVsZW1lbnRDbGFzcz1mdW5jdGlvbihtKXt2YXIgbj1tLmdldE5hbWUoKSxsPW0uZ2V0TGlicmFyeU5hbWUoKXx8IiIsTD10aGlzLm1MaWJyYXJpZXNbbF0sYj1kLnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKG0uZ2V0Q2xhc3MoKS5wcm90b3R5cGUpLGY9ZmFsc2U7aWYoIUwpe0w9dGhpcy5tTGlicmFyaWVzW2xdPXtkZXBlbmRlbmNpZXM6W10sdHlwZXM6W10saW50ZXJmYWNlczpbXSxjb250cm9sczpbXSxlbGVtZW50czpbXX19aWYoYil7aWYocS5pbkFycmF5KG4sTC5jb250cm9scyk8MCl7TC5jb250cm9scy5wdXNoKG4pO2Y9dHJ1ZX19ZWxzZXtpZihxLmluQXJyYXkobixMLmVsZW1lbnRzKTwwKXtMLmVsZW1lbnRzLnB1c2gobik7Zj10cnVlfX1pZihmKXtxLnNhcC5sb2cuZGVidWcoIkNsYXNzICIrbS5nZXROYW1lKCkrIiByZWdpc3RlcmVkIGZvciBsaWJyYXJ5ICIrbS5nZXRMaWJyYXJ5TmFtZSgpKTt0aGlzLmZpcmVMaWJyYXJ5Q2hhbmdlZCh7bmFtZTptLmdldE5hbWUoKSxzdGVyZW90eXBlOm0uZ2V0U3RlcmVvdHlwZSgpLG9wZXJhdGlvbjoiYWRkIixtZXRhZGF0YTptfSl9fTtrLnByb3RvdHlwZS5yZWdpc3RlckVsZW1lbnQ9ZnVuY3Rpb24obyl7dmFyIGI9dGhpcy5ieUlkKG8uZ2V0SWQoKSk7aWYoYiYmYiE9PW8pe2lmKHRoaXMub0NvbmZpZ3VyYXRpb24uZ2V0Tm9EdXBsaWNhdGVJZHMoKSl7cS5zYXAubG9nLmVycm9yKCJhZGRpbmcgZWxlbWVudCB3aXRoIGR1cGxpY2F0ZSBpZCAnIitvLmdldElkKCkrIiciKTt0aHJvdyBuZXcgRXJyb3IoIkVycm9yOiBhZGRpbmcgZWxlbWVudCB3aXRoIGR1cGxpY2F0ZSBpZCAnIitvLmdldElkKCkrIiciKX1lbHNle3Euc2FwLmxvZy53YXJuaW5nKCJhZGRpbmcgZWxlbWVudCB3aXRoIGR1cGxpY2F0ZSBpZCAnIitvLmdldElkKCkrIiciKX19dGhpcy5tRWxlbWVudHNbby5nZXRJZCgpXT1vfTtrLnByb3RvdHlwZS5kZXJlZ2lzdGVyRWxlbWVudD1mdW5jdGlvbihvKXtkZWxldGUgdGhpcy5tRWxlbWVudHNbby5nZXRJZCgpXX07ay5wcm90b3R5cGUucmVnaXN0ZXJPYmplY3Q9ZnVuY3Rpb24obyl7dmFyIGk9by5nZXRJZCgpLHQ9by5nZXRNZXRhZGF0YSgpLmdldFN0ZXJlb3R5cGUoKSxiPXRoaXMuZ2V0T2JqZWN0KHQsaSk7aWYoYiYmYiE9PW8pe3Euc2FwLmxvZy5lcnJvcigiYWRkaW5nIG9iamVjdCBcIiIrdCsiXCIgd2l0aCBkdXBsaWNhdGUgaWQgJyIraSsiJyIpO3Rocm93IG5ldyBFcnJvcigiRXJyb3I6IGFkZGluZyBvYmplY3QgXCIiK3QrIlwiIHdpdGggZHVwbGljYXRlIGlkICciK2krIiciKX10aGlzLm1PYmplY3RzW3RdW2ldPW99O2sucHJvdG90eXBlLmRlcmVnaXN0ZXJPYmplY3Q9ZnVuY3Rpb24obyl7dmFyIGk9by5nZXRJZCgpLHQ9by5nZXRNZXRhZGF0YSgpLmdldFN0ZXJlb3R5cGUoKTtkZWxldGUgdGhpcy5tT2JqZWN0c1t0XVtpXX07ay5wcm90b3R5cGUuYnlJZD1mdW5jdGlvbihpKXtyZXR1cm4gaT09bnVsbD91bmRlZmluZWQ6dGhpcy5tRWxlbWVudHNbaV19O2sucHJvdG90eXBlLmdldENvbnRyb2w9ay5wcm90b3R5cGUuYnlJZDtrLnByb3RvdHlwZS5nZXRFbGVtZW50QnlJZD1rLnByb3RvdHlwZS5ieUlkO2sucHJvdG90eXBlLmdldE9iamVjdD1mdW5jdGlvbih0LGkpe3JldHVybiBpPT1udWxsP3VuZGVmaW5lZDp0aGlzLm1PYmplY3RzW3RdJiZ0aGlzLm1PYmplY3RzW3RdW2ldfTtrLnByb3RvdHlwZS5nZXRDb21wb25lbnQ9ZnVuY3Rpb24oaSl7cmV0dXJuIHRoaXMuZ2V0T2JqZWN0KCJjb21wb25lbnQiLGkpfTtrLnByb3RvdHlwZS5nZXRUZW1wbGF0ZT1mdW5jdGlvbihpKXtyZXR1cm4gdGhpcy5nZXRPYmplY3QoInRlbXBsYXRlIixpKX07ay5wcm90b3R5cGUuZ2V0U3RhdGljQXJlYVJlZj1mdW5jdGlvbigpe3ZhciBzPSJzYXAtdWktc3RhdGljIjt2YXIgUz1xLnNhcC5kb21CeUlkKHMpO2lmKCFTKXtpZighdGhpcy5iRG9tUmVhZHkpe3Rocm93IG5ldyBFcnJvcigiRE9NIGlzIG5vdCByZWFkeSB5ZXQuIFN0YXRpYyBVSUFyZWEgY2Fubm90IGJlIGNyZWF0ZWQuIil9dmFyIGw9dGhpcy5nZXRDb25maWd1cmF0aW9uKCkuZ2V0UlRMKCk/InJpZ2h0IjoibGVmdCI7Uz1xKCI8RElWLz4iLHtpZDpzfSkuY3NzKHsiaGVpZ2h0IjoiMCIsIndpZHRoIjoiMCIsIm92ZXJmbG93IjoiaGlkZGVuIiwiZmxvYXQiOmx9KS5wcmVwZW5kVG8oZG9jdW1lbnQuYm9keSlbMF07dGhpcy5jcmVhdGVVSUFyZWEoUykuYkluaXRpYWw9ZmFsc2V9cmV0dXJuIFN9O2sucHJvdG90eXBlLmlzU3RhdGljQXJlYVJlZj1mdW5jdGlvbihvKXtyZXR1cm4gbyYmKG8uaWQ9PT0ic2FwLXVpLXN0YXRpYyIpfTtrLl9JX0lOVEVSVkFMPTIwMDtoLnByb3RvdHlwZS5JX0lOVEVSVkFMPWsuX0lfSU5URVJWQUw7ay5wcm90b3R5cGUuYXR0YWNoSW50ZXJ2YWxUaW1lcj1mdW5jdGlvbihmLGwpe2lmKCF0aGlzLm9UaW1lZFRyaWdnZXIpe3Euc2FwLnJlcXVpcmUoInNhcC51aS5jb3JlLkludGVydmFsVHJpZ2dlciIpO3RoaXMub1RpbWVkVHJpZ2dlcj1uZXcgc2FwLnVpLmNvcmUuSW50ZXJ2YWxUcmlnZ2VyKGsuX0lfSU5URVJWQUwpfXRoaXMub1RpbWVkVHJpZ2dlci5hZGRMaXN0ZW5lcihmLGwpfTtrLnByb3RvdHlwZS5kZXRhY2hJbnRlcnZhbFRpbWVyPWZ1bmN0aW9uKGYsbCl7aWYodGhpcy5vVGltZWRUcmlnZ2VyKXt0aGlzLm9UaW1lZFRyaWdnZXIucmVtb3ZlTGlzdGVuZXIoZixsKX19O2sucHJvdG90eXBlLmF0dGFjaENvbnRyb2xFdmVudD1mdW5jdGlvbihmLGwpe3RoaXMuYXR0YWNoRXZlbnQoay5NX0VWRU5UUy5Db250cm9sRXZlbnQsZixsKX07ay5wcm90b3R5cGUuZGV0YWNoQ29udHJvbEV2ZW50PWZ1bmN0aW9uKGYsbCl7dGhpcy5kZXRhY2hFdmVudChrLk1fRVZFTlRTLkNvbnRyb2xFdmVudCxmLGwpfTtrLnByb3RvdHlwZS5maXJlQ29udHJvbEV2ZW50PWZ1bmN0aW9uKHApe3RoaXMuZmlyZUV2ZW50KGsuTV9FVkVOVFMuQ29udHJvbEV2ZW50LHApfTtrLnByb3RvdHlwZS5faGFuZGxlQ29udHJvbEV2ZW50PWZ1bmN0aW9uKG8sdSl7dmFyIGI9cS5FdmVudChvLnR5cGUpO3EuZXh0ZW5kKGIsbyk7Yi5vcmlnaW5hbEV2ZW50PXVuZGVmaW5lZDt0aGlzLmZpcmVDb250cm9sRXZlbnQoeyJicm93c2VyRXZlbnQiOmIsInVpQXJlYSI6dX0pfTtrLnByb3RvdHlwZS5nZXRBcHBsaWNhdGlvbj1mdW5jdGlvbigpe3JldHVybiBzYXAudWkuZ2V0QXBwbGljYXRpb24mJnNhcC51aS5nZXRBcHBsaWNhdGlvbigpfTtrLnByb3RvdHlwZS5yZWdpc3RlclBsdWdpbj1mdW5jdGlvbihwKXtpZighcCl7cmV0dXJufWZvcih2YXIgaT0wLGw9dGhpcy5hUGx1Z2lucy5sZW5ndGg7aTxsO2krKyl7aWYodGhpcy5hUGx1Z2luc1tpXT09PXApe3JldHVybn19dGhpcy5hUGx1Z2lucy5wdXNoKHApO2lmKHRoaXMuYkluaXRpYWxpemVkJiZwJiZwLnN0YXJ0UGx1Z2luKXtwLnN0YXJ0UGx1Z2luKHRoaXMpfX07ay5wcm90b3R5cGUudW5yZWdpc3RlclBsdWdpbj1mdW5jdGlvbihwKXtpZighcCl7cmV0dXJufXZhciBQPS0xO2Zvcih2YXIgaT10aGlzLmFQbHVnaW5zLmxlbmd0aDtpLS07aT49MCl7aWYodGhpcy5hUGx1Z2luc1tpXT09PXApe1A9aTticmVha319aWYoUD09LTEpe3JldHVybn1pZih0aGlzLmJJbml0aWFsaXplZCYmcCYmcC5zdG9wUGx1Z2luKXtwLnN0b3BQbHVnaW4odGhpcyl9dGhpcy5hUGx1Z2lucy5zcGxpY2UoUCwxKX07ay5wcm90b3R5cGUuc3RhcnRQbHVnaW5zPWZ1bmN0aW9uKCl7Zm9yKHZhciBpPTAsbD10aGlzLmFQbHVnaW5zLmxlbmd0aDtpPGw7aSsrKXt2YXIgcD10aGlzLmFQbHVnaW5zW2ldO2lmKHAmJnAuc3RhcnRQbHVnaW4pe3Auc3RhcnRQbHVnaW4odGhpcyx0cnVlKX19fTtrLnByb3RvdHlwZS5zdG9wUGx1Z2lucz1mdW5jdGlvbigpe2Zvcih2YXIgaT0wLGw9dGhpcy5hUGx1Z2lucy5sZW5ndGg7aTxsO2krKyl7dmFyIHA9dGhpcy5hUGx1Z2luc1tpXTtpZihwJiZwLnN0b3BQbHVnaW4pe3Auc3RvcFBsdWdpbih0aGlzKX19fTtrLnByb3RvdHlwZS5zZXRNb2RlbD1mdW5jdGlvbihtLG4pe2lmKCFtJiZ0aGlzLm9Nb2RlbHNbbl0pe2RlbGV0ZSB0aGlzLm9Nb2RlbHNbbl07cS5lYWNoKHRoaXMubVVJQXJlYXMsZnVuY3Rpb24oaSx1KXtkZWxldGUgdS5vUHJvcGFnYXRlZFByb3BlcnRpZXMub01vZGVsc1tuXTt1LnByb3BhZ2F0ZVByb3BlcnRpZXMobil9KX1lbHNlIGlmKG0mJm0hPT10aGlzLm9Nb2RlbHNbbl0pe3RoaXMub01vZGVsc1tuXT1tO3EuZWFjaCh0aGlzLm1VSUFyZWFzLGZ1bmN0aW9uKGksdSl7dS5vUHJvcGFnYXRlZFByb3BlcnRpZXMub01vZGVsc1tuXT1tO3UucHJvcGFnYXRlUHJvcGVydGllcyhuKX0pfWVsc2V7fXJldHVybiB0aGlzfTtrLnByb3RvdHlwZS5nZXRNb2RlbD1mdW5jdGlvbihuKXtyZXR1cm4gdGhpcy5vTW9kZWxzW25dfTtrLnByb3RvdHlwZS5oYXNNb2RlbD1mdW5jdGlvbigpe3JldHVybiFxLmlzRW1wdHlPYmplY3QodGhpcy5vTW9kZWxzKX07ay5wcm90b3R5cGUuZ2V0RXZlbnRCdXM9ZnVuY3Rpb24oKXtpZighdGhpcy5vRXZlbnRCdXMpe3Euc2FwLnJlcXVpcmUoInNhcC51aS5jb3JlLkV2ZW50QnVzIik7dGhpcy5vRXZlbnRCdXM9bmV3IHNhcC51aS5jb3JlLkV2ZW50QnVzKCl9cmV0dXJuIHRoaXMub0V2ZW50QnVzfTtrLnByb3RvdHlwZS5hdHRhY2hWYWxpZGF0aW9uRXJyb3I9ZnVuY3Rpb24oZixsKXt0aGlzLmF0dGFjaEV2ZW50KGsuTV9FVkVOVFMuVmFsaWRhdGlvbkVycm9yLGYsbCk7cmV0dXJuIHRoaXN9O2sucHJvdG90eXBlLmRldGFjaFZhbGlkYXRpb25FcnJvcj1mdW5jdGlvbihmLGwpe3RoaXMuZGV0YWNoRXZlbnQoay5NX0VWRU5UUy5WYWxpZGF0aW9uRXJyb3IsZixsKTtyZXR1cm4gdGhpc307ay5wcm90b3R5cGUuYXR0YWNoUGFyc2VFcnJvcj1mdW5jdGlvbihmLGwpe3RoaXMuYXR0YWNoRXZlbnQoay5NX0VWRU5UUy5QYXJzZUVycm9yLGYsbCk7cmV0dXJuIHRoaXN9O2sucHJvdG90eXBlLmRldGFjaFBhcnNlRXJyb3I9ZnVuY3Rpb24oZixsKXt0aGlzLmRldGFjaEV2ZW50KGsuTV9FVkVOVFMuUGFyc2VFcnJvcixmLGwpO3JldHVybiB0aGlzfTtrLnByb3RvdHlwZS5hdHRhY2hGb3JtYXRFcnJvcj1mdW5jdGlvbihmLGwpe3RoaXMuYXR0YWNoRXZlbnQoay5NX0VWRU5UUy5Gb3JtYXRFcnJvcixmLGwpO3JldHVybiB0aGlzfTtrLnByb3RvdHlwZS5kZXRhY2hGb3JtYXRFcnJvcj1mdW5jdGlvbihmLGwpe3RoaXMuZGV0YWNoRXZlbnQoay5NX0VWRU5UUy5Gb3JtYXRFcnJvcixmLGwpO3JldHVybiB0aGlzfTtrLnByb3RvdHlwZS5hdHRhY2hWYWxpZGF0aW9uU3VjY2Vzcz1mdW5jdGlvbihmLGwpe3RoaXMuYXR0YWNoRXZlbnQoay5NX0VWRU5UUy5WYWxpZGF0aW9uU3VjY2VzcyxmLGwpO3JldHVybiB0aGlzfTtrLnByb3RvdHlwZS5kZXRhY2hWYWxpZGF0aW9uU3VjY2Vzcz1mdW5jdGlvbihmLGwpe3RoaXMuZGV0YWNoRXZlbnQoay5NX0VWRU5UUy5WYWxpZGF0aW9uU3VjY2VzcyxmLGwpO3JldHVybiB0aGlzfTtrLnByb3RvdHlwZS5maXJlUGFyc2VFcnJvcj1mdW5jdGlvbihBKXt0aGlzLmZpcmVFdmVudChrLk1fRVZFTlRTLlBhcnNlRXJyb3IsQSk7cmV0dXJuIHRoaXN9O2sucHJvdG90eXBlLmZpcmVWYWxpZGF0aW9uRXJyb3I9ZnVuY3Rpb24oQSl7dGhpcy5maXJlRXZlbnQoay5NX0VWRU5UUy5WYWxpZGF0aW9uRXJyb3IsQSk7cmV0dXJuIHRoaXN9O2sucHJvdG90eXBlLmZpcmVGb3JtYXRFcnJvcj1mdW5jdGlvbihBKXt0aGlzLmZpcmVFdmVudChrLk1fRVZFTlRTLkZvcm1hdEVycm9yLEEpO3JldHVybiB0aGlzfTtrLnByb3RvdHlwZS5maXJlVmFsaWRhdGlvblN1Y2Nlc3M9ZnVuY3Rpb24oQSl7dGhpcy5maXJlRXZlbnQoay5NX0VWRU5UUy5WYWxpZGF0aW9uU3VjY2VzcyxBKTtyZXR1cm4gdGhpc307ay5wcm90b3R5cGUuaXNNb2JpbGU9ZnVuY3Rpb24oKXtyZXR1cm4gRC5icm93c2VyLm1vYmlsZX07aWYoIXdpbmRvdy5zYXAudWkuZ2V0Q29yZSl7KGZ1bmN0aW9uKCl7bmV3IGsoKX0oKSl9c2FwLnVpLnNldFJvb3Q9ZnVuY3Rpb24obyxiKXtzYXAudWkuZ2V0Q29yZSgpLnNldFJvb3QobyxiKX07cmV0dXJuIGt9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuYXBwLkFwcGxpY2F0aW9uJykpew0KLyoNCiAqIFNBUCBVSSBkZXZlbG9wbWVudCB0b29sa2l0IGZvciBIVE1MNSAoU0FQVUk1L09wZW5VSTUpDQogKiAoYykgQ29weXJpZ2h0IDIwMDktMjAxNCBTQVAgU0Ugb3IgYW4gU0FQIGFmZmlsaWF0ZSBjb21wYW55LiANCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgLSBzZWUgTElDRU5TRS50eHQuDQogKi8NCmpRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmFwcC5BcHBsaWNhdGlvbicpO3NhcC51aS5kZWZpbmUoInNhcC91aS9hcHAvQXBwbGljYXRpb24iLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCcuL0FwcGxpY2F0aW9uTWV0YWRhdGEnLCdzYXAvdWkvY29yZS9Db21wb25lbnQnXSxmdW5jdGlvbihxLEEsQyl7InVzZSBzdHJpY3QiO3ZhciBhPUMuZXh0ZW5kKCJzYXAudWkuYXBwLkFwcGxpY2F0aW9uIix7bWV0YWRhdGE6eyJhYnN0cmFjdCI6dHJ1ZSxwcm9wZXJ0aWVzOntyb290OiJzdHJpbmciLGNvbmZpZzoiYW55In0sYWdncmVnYXRpb25zOntyb290Q29tcG9uZW50Ont0eXBlOiJzYXAudWkuY29yZS5VSUNvbXBvbmVudCIsbXVsdGlwbGU6ZmFsc2V9fSxwdWJsaWNNZXRob2RzOlsiZ2V0VmlldyJdLGRlcHJlY2F0ZWQ6dHJ1ZX0sY29uc3RydWN0b3I6ZnVuY3Rpb24oaSxzKXtpZih0aGlzLm9uRXJyb3Ipe3RoaXMub25XaW5kb3dFcnJvcj10aGlzLm9uRXJyb3J9aWYodGhpcy5vbkJlZm9yZUV4aXQpe3RoaXMub25XaW5kb3dCZWZvcmVVbmxvYWQ9dGhpcy5vbkJlZm9yZUV4aXR9aWYodGhpcy5vbkV4aXQpe3RoaXMub25XaW5kb3dVbmxvYWQ9dGhpcy5vbkV4aXR9Qy5hcHBseSh0aGlzLGFyZ3VtZW50cyk7aWYoc2FwLnVpLmdldEFwcGxpY2F0aW9uKXt0aHJvdyBuZXcgRXJyb3IoIk9ubHkgb25lIGluc3RhbmNlIG9mIHNhcC51aS5hcHAuQXBwbGljYXRpb24gaXMgYWxsb3dlZCIpfXNhcC51aS5nZXRBcHBsaWNhdGlvbj1xLnByb3h5KHRoaXMuX2dldEluc3RhbmNlLHRoaXMpO3NhcC51aS5nZXRDb3JlKCkuYXR0YWNoSW5pdChxLnByb3h5KGZ1bmN0aW9uKCl7dGhpcy5faW5pdFJvb3RDb21wb25lbnQoKTt0aGlzLm1haW4oKX0sdGhpcykpfSxfaW5pdFJvb3RDb21wb25lbnQ6ZnVuY3Rpb24oKXt2YXIgcj10aGlzLmNyZWF0ZVJvb3RDb21wb25lbnQoKTtpZihyKXt0aGlzLnNldFJvb3RDb21wb25lbnQocik7dmFyIGM9bmV3IHNhcC51aS5jb3JlLkNvbXBvbmVudENvbnRhaW5lcih7Y29tcG9uZW50OnJ9KTtjLnBsYWNlQXQodGhpcy5nZXRSb290KCl8fGRvY3VtZW50LmJvZHkpfX0sY3JlYXRlUm9vdENvbXBvbmVudDpmdW5jdGlvbigpe3ZhciByPXRoaXMuZ2V0TWV0YWRhdGEoKS5nZXRSb290Q29tcG9uZW50KCk7dmFyIFI7aWYocil7Uj1zYXAudWkuY29tcG9uZW50KHtuYW1lOnJ9KX1yZXR1cm4gUn0sZ2V0VmlldzpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldFJvb3RDb21wb25lbnQoKX0sX2dldEluc3RhbmNlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9LG1haW46ZnVuY3Rpb24oKXt9LG9uQmVmb3JlRXhpdDpmdW5jdGlvbigpe30sb25FeGl0OmZ1bmN0aW9uKCl7fSxvbkVycm9yOm51bGwsc2V0Q29uZmlnOmZ1bmN0aW9uKGMpe2lmKHR5cGVvZiBjPT09InN0cmluZyIpe3ZhciB1PWM7dmFyIGM9bmV3IHNhcC51aS5tb2RlbC5qc29uLkpTT05Nb2RlbCgpO3ZhciByPXEuc2FwLnNqYXgoe3VybDp1LGRhdGFUeXBlOidqc29uJ30pO2lmKHIuc3VjY2Vzcyl7Yy5zZXREYXRhKHIuZGF0YSl9ZWxzZXt0aHJvdyBuZXcgRXJyb3IoIkNvdWxkIG5vdCBsb2FkIGNvbmZpZyBmaWxlOiAiK3UpfX1pZih0eXBlb2YgYz09PSJvYmplY3QiJiYhYyBpbnN0YW5jZW9mIHNhcC51aS5tb2RlbC5Nb2RlbCl7Yz1uZXcgc2FwLnVpLm1vZGVsLkpTT05Nb2RlbChjKX10aGlzLnNldFByb3BlcnR5KCJjb25maWciLGMpfSxkZXN0cm95OmZ1bmN0aW9uKHMpe2RlbGV0ZSBzYXAudWkuZ2V0QXBwbGljYXRpb247Qy5wcm90b3R5cGUuZGVzdHJveS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fSxBKTtyZXR1cm4gYX0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLkFwcENhY2hlQnVzdGVyJykpew0KLyohDQogKiBTQVAgVUkgZGV2ZWxvcG1lbnQgdG9vbGtpdCBmb3IgSFRNTDUgKFNBUFVJNS9PcGVuVUk1KQ0KICogKGMpIENvcHlyaWdodCAyMDA5LTIwMTQgU0FQIFNFIG9yIGFuIFNBUCBhZmZpbGlhdGUgY29tcGFueS4gDQogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wIC0gc2VlIExJQ0VOU0UudHh0Lg0KICovDQpqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLkFwcENhY2hlQnVzdGVyJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvQXBwQ2FjaGVCdXN0ZXIiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCcuL0NvcmUnLCdzYXAvdWkvdGhpcmRwYXJ0eS9VUkknXSxmdW5jdGlvbihxLEMsVSl7InVzZSBzdHJpY3QiO3ZhciBjPXNhcC51aS5nZXRDb3JlKCkuZ2V0Q29uZmlndXJhdGlvbigpO3ZhciBsPWMuZ2V0TGFuZ3VhZ2UoKTt2YXIgcz1jLmdldEFwcENhY2hlQnVzdGVyTW9kZSgpPT09InN5bmMiO3ZhciBiPWMuZ2V0QXBwQ2FjaGVCdXN0ZXJNb2RlKCk9PT0iYmF0Y2giO3ZhciBpPXt9O3ZhciBhPXEuYWpheDt2YXIgST1xLnNhcC5pbmNsdWRlU2NyaXB0O3ZhciBmPXEuc2FwLmluY2x1ZGVTdHlsZVNoZWV0O3ZhciB2PXNhcC51aS5iYXNlLk1hbmFnZWRPYmplY3QucHJvdG90eXBlLnZhbGlkYXRlUHJvcGVydHk7dmFyIEw9ZG9jdW1lbnQubG9jYXRpb24uaHJlZi5yZXBsYWNlKC9cPy4qfCMuKi9nLCIiKTt2YXIgQj1VUkkoIi4vIikuYWJzb2x1dGVUbyhMKTt2YXIgQT1CLnRvU3RyaW5nKCk7dmFyIHU9VVJJKHEuc2FwLmdldE1vZHVsZVBhdGgoIiIsIi8uLi8iKSk7dmFyIG89dS50b1N0cmluZygpO2lmKHUuaXMoInJlbGF0aXZlIikpe3U9dS5hYnNvbHV0ZVRvKEwpfXZhciBkPXUubm9ybWFsaXplKCkudG9TdHJpbmcoKTt2YXIgcj1VUkkoInJlc291cmNlcyIpLmFic29sdXRlVG8oZCkudG9TdHJpbmcoKTt2YXIgRj1uZXcgUmVnRXhwKCJeIitxLnNhcC5lc2NhcGVSZWdFeHAocikpO3ZhciBFPWZ1bmN0aW9uKGUpe2lmKGUubGVuZ3RoPjAmJmUuc2xpY2UoLTEpIT09Ii8iKXtlKz0iLyJ9cmV0dXJuIGV9O3ZhciBSPWZ1bmN0aW9uKGQsUyl7dmFyIGU7aWYocS5pc0FycmF5KGQpJiYhYil7cS5lYWNoKGQsZnVuY3Rpb24oeCx5KXtSKHksUyl9KX1lbHNlIGlmKHEuaXNBcnJheShkKSYmYil7dmFyIGg9RShkWzBdKTt2YXIgaj1bXTtxLnNhcC5sb2cuZGVidWcoInNhcC51aS5jb3JlLkFwcENhY2hlQnVzdGVyLnJlZ2lzdGVyKFwiIitoKyJcIik7IC8vIEJBVENIIE1PREUhIik7dmFyIGs9Zy5ub3JtYWxpemVVUkwoaCk7cS5zYXAubG9nLmRlYnVnKCIgIC0tPiBub3JtYWxpemVkIHRvOiBcIiIraysiXCIiKTtxLmVhY2goZCxmdW5jdGlvbih4LHkpe3ZhciBtPUUoeSk7dmFyIHo9Zy5ub3JtYWxpemVVUkwobSk7aWYoIWlbbl0pe2oucHVzaCh6KX19KTtpZihqLmxlbmd0aD4wKXt2YXIgbT1rKyJzYXAtdWktY2FjaGVidXN0ZXItaW5mby5qc29uP3NhcC11aS1sYW5ndWFnZT0iK2w7ZT17dXJsOm0sdHlwZToiUE9TVCIsYXN5bmM6IXMmJiEhUyxkYXRhVHlwZToianNvbiIsY29udGVudFR5cGU6InRleHQvcGxhaW4iLGRhdGE6ai5qb2luKCJcbiIpLHN1Y2Nlc3M6ZnVuY3Rpb24oeCl7cS5leHRlbmQoaSx4KX0sZXJyb3I6ZnVuY3Rpb24oKXtxLnNhcC5sb2cuZXJyb3IoIkZhaWxlZCB0byBiYXRjaCBsb2FkIEFwcENhY2hlQnVzdGVyIGluZGV4IGZpbGUgZnJvbTogXCIiK20rIlwiLiIpfX19fWVsc2V7ZD1FKGQpO3Euc2FwLmxvZy5kZWJ1Zygic2FwLnVpLmNvcmUuQXBwQ2FjaGVCdXN0ZXIucmVnaXN0ZXIoXCIiK2QrIlwiKTsiKTt2YXIgbj1nLm5vcm1hbGl6ZVVSTChkKTtxLnNhcC5sb2cuZGVidWcoIiAgLS0+IG5vcm1hbGl6ZWQgdG86IFwiIituKyJcIiIpO2lmKCFpW25dKXt2YXIgbT1uKyJzYXAtdWktY2FjaGVidXN0ZXItaW5mby5qc29uP3NhcC11aS1sYW5ndWFnZT0iK2w7ZT17dXJsOm0sYXN5bmM6IXMmJiEhUyxkYXRhVHlwZToianNvbiIsc3VjY2VzczpmdW5jdGlvbih4KXtpW25dPXh9LGVycm9yOmZ1bmN0aW9uKCl7cS5zYXAubG9nLmVycm9yKCJGYWlsZWQgdG8gbG9hZCBBcHBDYWNoZUJ1c3RlciBpbmRleCBmaWxlIGZyb206IFwiIittKyJcIi4iKX19fX1pZihlKXtpZihlLmFzeW5jKXt2YXIgcD1TLnN0YXJ0VGFzaygibG9hZCAiK20pO3ZhciB0PWUuc3VjY2Vzcyx3PWUuZXJyb3I7cS5leHRlbmQoZSx7c3VjY2VzczpmdW5jdGlvbih4KXt0LmFwcGx5KHRoaXMsYXJndW1lbnRzKTtTLmZpbmlzaFRhc2socCl9LGVycm9yOmZ1bmN0aW9uKCl7dy5hcHBseSh0aGlzLGFyZ3VtZW50cyk7Uy5maW5pc2hUYXNrKHAsZmFsc2UpfX0pfXEuc2FwLmxvZy5pbmZvKCJMb2FkaW5nIEFwcENhY2hlQnVzdGVyIGluZGV4IGZpbGUgZnJvbTogXCIiK20rIlwiLiIpO3EuYWpheChlKX19O3ZhciBnPXtib290OmZ1bmN0aW9uKFMpe3ZhciBlPWMuZ2V0QXBwQ2FjaGVCdXN0ZXIoKTtpZihlJiZlLmxlbmd0aD4wKXtlPWUuc2xpY2UoKTt2YXIgaD10cnVlO3ZhciBWPVN0cmluZyhlWzBdKS50b0xvd2VyQ2FzZSgpO2lmKGUubGVuZ3RoPT09MSl7aWYoVj09PSJ0cnVlInx8Vj09PSJ4Iil7dmFyIHU9VVJJKG8pO2U9dS5pcygicmVsYXRpdmUiKT9bdS50b1N0cmluZygpXTpbXX1lbHNlIGlmKFY9PT0iZmFsc2UiKXtoPWZhbHNlfX1pZihoKXtnLmluaXQoKTtSKGUsUyl9fX0saW5pdDpmdW5jdGlvbigpe3ZhciBoPWcuY29udmVydFVSTDt2YXIgbj1nLm5vcm1hbGl6ZVVSTDt2YXIgaj1mdW5jdGlvbihlKXtpZihlJiZ0eXBlb2YoZSk9PT0ic3RyaW5nIil7ZT1uKGUpO3JldHVybiFlLm1hdGNoKEYpfXJldHVybiBmYWxzZX07cS5hamF4PWZ1bmN0aW9uKGUsayl7aWYoZSYmZS51cmwmJmooZS51cmwpKXtlLnVybD1oKGUudXJsKX1yZXR1cm4gYS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9O3Euc2FwLmluY2x1ZGVTY3JpcHQ9ZnVuY3Rpb24oZSxrKXt2YXIgbT1BcnJheS5wcm90b3R5cGUuc2xpY2UuYXBwbHkoYXJndW1lbnRzKTtpZihqKG1bMF0pKXttWzBdPWgobVswXSl9cmV0dXJuIEkuYXBwbHkodGhpcyxtKX07cS5zYXAuaW5jbHVkZVN0eWxlU2hlZXQ9ZnVuY3Rpb24oZSxrKXt2YXIgbT1BcnJheS5wcm90b3R5cGUuc2xpY2UuYXBwbHkoYXJndW1lbnRzKTtpZihqKG1bMF0pKXttWzBdPWgobVswXSl9cmV0dXJuIGYuYXBwbHkodGhpcyxtKX07c2FwLnVpLmJhc2UuTWFuYWdlZE9iamVjdC5wcm90b3R5cGUudmFsaWRhdGVQcm9wZXJ0eT1mdW5jdGlvbihwLFYpe3ZhciBtPXRoaXMuZ2V0TWV0YWRhdGEoKSxQPW0uZ2V0QWxsUHJvcGVydGllcygpW3BdLGs7aWYoUCYmUC50eXBlPT09InNhcC51aS5jb3JlLlVSSSIpe2s9QXJyYXkucHJvdG90eXBlLnNsaWNlLmFwcGx5KGFyZ3VtZW50cyk7dHJ5e2lmKGooa1sxXSkpe2tbMV09aChrWzFdKX19Y2F0Y2goZSl7fX1yZXR1cm4gdi5hcHBseSh0aGlzLGt8fGFyZ3VtZW50cyl9fSxleGl0OmZ1bmN0aW9uKCl7cS5hamF4PWE7cS5zYXAuaW5jbHVkZVNjcmlwdD1JO3Euc2FwLmluY2x1ZGVTdHlsZVNoZWV0PWY7c2FwLnVpLmJhc2UuTWFuYWdlZE9iamVjdC5wcm90b3R5cGUudmFsaWRhdGVQcm9wZXJ0eT12O2k9e319LHJlZ2lzdGVyOmZ1bmN0aW9uKGQpe1IoZCl9LGNvbnZlcnRVUkw6ZnVuY3Rpb24oZSl7cS5zYXAubG9nLmRlYnVnKCJzYXAudWkuY29yZS5BcHBDYWNoZUJ1c3Rlci5jb252ZXJ0VVJMKFwiIitlKyJcIik7Iik7aWYoaSYmZSl7dmFyIG49Zy5ub3JtYWxpemVVUkwoZSk7cS5zYXAubG9nLmRlYnVnKCIgIC0tPiBub3JtYWxpemVkIHRvOiBcIiIrbisiXCIiKTtpZihuJiZnLmhhbmRsZVVSTChuKSl7cS5lYWNoKGksZnVuY3Rpb24oZCxtKXt2YXIgaDtpZihkJiZuLmxlbmd0aD49ZC5sZW5ndGgmJm4uc2xpY2UoMCxkLmxlbmd0aCk9PT1kKXtoPW4uc2xpY2UoZC5sZW5ndGgpO2lmKG1baF0pe2U9ZCsifiIrbVtoXSsifi8iK2g7cS5zYXAubG9nLmRlYnVnKCIgID09PiByZXR1cm4gXCIiK2UrIlwiOyIpO3JldHVybiBmYWxzZX19fSl9fXJldHVybiBlfSxub3JtYWxpemVVUkw6ZnVuY3Rpb24oZSl7dmFyIHU9VVJJKGV8fCIuLyIpO2lmKHUuaXMoInJlbGF0aXZlIikpe3U9dS5hYnNvbHV0ZVRvKEwpfXJldHVybiB1Lm5vcm1hbGl6ZVByb3RvY29sKCkubm9ybWFsaXplSG9zdG5hbWUoKS5ub3JtYWxpemVQb3J0KCkubm9ybWFsaXplUGF0aCgpLnRvU3RyaW5nKCl9LGhhbmRsZVVSTDpmdW5jdGlvbihlKXtyZXR1cm4gdHJ1ZX19O3JldHVybiBnfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUuQ3VzdG9taXppbmdDb25maWd1cmF0aW9uJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUuQ3VzdG9taXppbmdDb25maWd1cmF0aW9uJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvQ3VzdG9taXppbmdDb25maWd1cmF0aW9uIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnLi9Db3JlJ10sZnVuY3Rpb24ocSxDKXsidXNlIHN0cmljdCI7dmFyIGE9InNhcC51aS52aWV3UmVwbGFjZW1lbnRzIixiPSJzYXAudWkudmlld0V4dGVuc2lvbnMiLGM9InNhcC51aS52aWV3TW9kaWZpY2F0aW9ucyIsZD0ic2FwLnVpLmNvbnRyb2xsZXJFeHRlbnNpb25zIjt2YXIgbT17fTtmdW5jdGlvbiBmKHQsZyl7cS5lYWNoKG0sZnVuY3Rpb24obixvKXtpZihvJiZvW3RdKXtpZihnKG9bdF0pKXtyZXR1cm4gZmFsc2V9fX0pfTt2YXIgZT17bG9nOmZ1bmN0aW9uKCl7aWYod2luZG93LmNvbnNvbGUpe3dpbmRvdy5jb25zb2xlLmxvZyhtKX19LGFjdGl2YXRlRm9yQ29tcG9uZW50OmZ1bmN0aW9uKHMpe3Euc2FwLmxvZy5pbmZvKCJDdXN0b21pemluZ0NvbmZpZ3VyYXRpb246IGFjdGl2YXRlRm9yQ29tcG9uZW50KCciK3MrIicpIik7dmFyIEY9cysiLkNvbXBvbmVudCI7cS5zYXAucmVxdWlyZShGKTt2YXIgbz1xLnNhcC5nZXRPYmplY3QoRikuZ2V0TWV0YWRhdGEoKS5nZXRDdXN0b21pemluZygpO21bc109bztxLnNhcC5sb2cuZGVidWcoIkN1c3RvbWl6aW5nQ29uZmlndXJhdGlvbjogY3VzdG9taXppbmcgY29uZmlndXJhdGlvbiBmb3IgY29tcG9uZW50ICciK3MrIicgbG9hZGVkOiAiK0pTT04uc3RyaW5naWZ5KG8pKX0sZGVhY3RpdmF0ZUZvckNvbXBvbmVudDpmdW5jdGlvbihzKXtxLnNhcC5sb2cuaW5mbygiQ3VzdG9taXppbmdDb25maWd1cmF0aW9uOiBkZWFjdGl2YXRlRm9yQ29tcG9uZW50KCciK3MrIicpIik7ZGVsZXRlIG1bc119LGdldFZpZXdSZXBsYWNlbWVudDpmdW5jdGlvbih2KXt2YXIgcj11bmRlZmluZWQ7ZihhLGZ1bmN0aW9uKG8pe3I9b1t2XTtyZXR1cm4hIXJ9KTtyZXR1cm4gcn0sZ2V0Vmlld0V4dGVuc2lvbjpmdW5jdGlvbih2LEUpe3ZhciByPXVuZGVmaW5lZDtmKGIsZnVuY3Rpb24obyl7cj1vW3ZdJiZvW3ZdW0VdO3JldHVybiEhcn0pO3JldHVybiByfSxnZXRDb250cm9sbGVyRXh0ZW5zaW9uOmZ1bmN0aW9uKHMpe3ZhciByPXVuZGVmaW5lZDtmKGQsZnVuY3Rpb24obyl7cj1vW3NdO3JldHVybiEhcn0pO3JldHVybiByfSxnZXRDdXN0b21Qcm9wZXJ0aWVzOmZ1bmN0aW9uKHYscyl7dmFyIFM9dW5kZWZpbmVkO2YoYyxmdW5jdGlvbihvKXt2YXIgZz1vW3ZdJiZvW3ZdW3NdO3ZhciB1PXt9O3ZhciBWPWZhbHNlO2lmKGcpe3EuZWFjaChnLGZ1bmN0aW9uKG4saCl7aWYobj09PSJ2aXNpYmxlIil7Vj10cnVlO3Vbbl09aDtxLnNhcC5sb2cuaW5mbygiQ3VzdG9taXppbmc6IGN1c3RvbSB2YWx1ZSBmb3IgcHJvcGVydHkgJyIrbisiJyBvZiBjb250cm9sICciK3MrIicgaW4gVmlldyAnIit2KyInIGFwcGxpZWQ6ICIraCl9ZWxzZXtxLnNhcC5sb2cud2FybmluZygiQ3VzdG9taXppbmc6IGN1c3RvbSB2YWx1ZSBmb3IgcHJvcGVydHkgJyIrbisiJyBvZiBjb250cm9sICciK3MrIicgaW4gVmlldyAnIit2KyInIGlnbm9yZWQ6IG9ubHkgdGhlICd2aXNpYmxlJyBwcm9wZXJ0eSBjYW4gYmUgY3VzdG9taXplZC4iKX19KTtpZihWKXtTPVN8fHt9O3EuZXh0ZW5kKFMsdSl9fX0pO3JldHVybiBTfX07aWYoc2FwLnVpLmdldENvcmUoKS5nZXRDb25maWd1cmF0aW9uKCkuZ2V0RGlzYWJsZUN1c3RvbWl6aW5nKCkpe3Euc2FwLmxvZy5pbmZvKCJDdXN0b21pemluZ0NvbmZpZ3VyYXRpb246IGRpc2FibGluZyBDdXN0b21pemluZyBub3ciKTtxLmVhY2goZSxmdW5jdGlvbihuLEEpe2lmKHR5cGVvZiBBPT09ImZ1bmN0aW9uIil7ZVtuXT1mdW5jdGlvbigpe319fSl9cmV0dXJuIGV9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS5Mb2NhbEJ1c3lJbmRpY2F0b3JTdXBwb3J0Jykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUuTG9jYWxCdXN5SW5kaWNhdG9yU3VwcG9ydCcpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL0xvY2FsQnVzeUluZGljYXRvclN1cHBvcnQiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCcuL0VsZW1lbnQnXSxmdW5jdGlvbihxLEUpeyJ1c2Ugc3RyaWN0Ijt2YXIgTD1mdW5jdGlvbigpe2lmKHRoaXM9PT1zYXAudWkuY29yZS5Db250cm9sLnByb3RvdHlwZSl7dGhpcy5zZXREZWxheT1mdW5jdGlvbihkKXt0aGlzLnNldEJ1c3lJbmRpY2F0b3JEZWxheShkKX19ZWxzZXtxLnNhcC5sb2cuZXJyb3IoIk9ubHkgY29udHJvbHMgY2FuIHVzZSB0aGUgTG9jYWxCdXN5SW5kaWNhdG9yIix0aGlzKX19O3JldHVybiBMfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUuUG9wdXBTdXBwb3J0Jykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUuUG9wdXBTdXBwb3J0Jyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvUG9wdXBTdXBwb3J0IixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnLi9FbGVtZW50J10sZnVuY3Rpb24ocSxFKXsidXNlIHN0cmljdCI7dmFyIFA9ZnVuY3Rpb24oKXt0aGlzLmdldE1ldGFkYXRhKCkuYWRkUHVibGljTWV0aG9kcyhbImdldFBhcmVudFBvcHVwIiwiaXNJblBvcHVwIiwiZ2V0UGFyZW50UG9wdXBJZCIsImFkZFRvUG9wdXAiLCJyZW1vdmVGcm9tUG9wdXAiXSk7dGhpcy5pc0luUG9wdXA9ZnVuY3Rpb24odCl7dmFyIHA9dGhpcy5nZXRQYXJlbnRQb3B1cCh0KTtyZXR1cm4gcCYmcC5sZW5ndGg+MH07dGhpcy5nZXRQYXJlbnRQb3B1cD1mdW5jdGlvbih0KXt2YXIgVD10P3Q6dGhpczt2YXIgJD1xKFQgaW5zdGFuY2VvZiBzYXAudWkuY29yZS5FbGVtZW50P1QuZ2V0RG9tUmVmKCk6VCk7cmV0dXJuICQuY2xvc2VzdCgiW2RhdGEtc2FwLXVpLXBvcHVwXSIpfTt0aGlzLmdldFBhcmVudFBvcHVwSWQ9ZnVuY3Rpb24odCl7dmFyIHA9dGhpcy5nZXRQYXJlbnRQb3B1cCh0KTtyZXR1cm4gcC5hdHRyKCJkYXRhLXNhcC11aS1wb3B1cCIpfTt0aGlzLmFkZENoaWxkVG9Qb3B1cD1mdW5jdGlvbihwLGMpe3ZhciBlPSJzYXAudWkuY29yZS5Qb3B1cC5hZGRGb2N1c2FibGVDb250ZW50LSIrcDtzYXAudWkuZ2V0Q29yZSgpLmdldEV2ZW50QnVzKCkucHVibGlzaCgic2FwLnVpIixlLHtpZDpjfSl9O3RoaXMucmVtb3ZlQ2hpbGRGcm9tUG9wdXA9ZnVuY3Rpb24ocCl7aWYoIXApe3A9dGhpcy5nZXRQb3B1cElkKCl9dmFyIGU9InNhcC51aS5jb3JlLlBvcHVwLnJlbW92ZUZvY3VzYWJsZUNvbnRlbnQtIitwO3NhcC51aS5nZXRDb3JlKCkuZ2V0RXZlbnRCdXMoKS5wdWJsaXNoKCJzYXAudWkiLGUse2lkOnRoaXMuZ2V0SWQoKX0pfTt0aGlzLmNsb3NlUG9wdXA9ZnVuY3Rpb24ocCl7dmFyIGU9InNhcC51aS5jb3JlLlBvcHVwLmNsb3NlUG9wdXAtIitwO3NhcC51aS5nZXRDb3JlKCkuZ2V0RXZlbnRCdXMoKS5wdWJsaXNoKCJzYXAudWkiLGUpfTt0aGlzLmluY3JlYXNlWkluZGV4PWZ1bmN0aW9uKHAsaSl7dmFyIGU9InNhcC51aS5jb3JlLlBvcHVwLmluY3JlYXNlWkluZGV4LSIrcDtzYXAudWkuZ2V0Q29yZSgpLmdldEV2ZW50QnVzKCkucHVibGlzaCgic2FwLnVpIixlLHtpc0Zyb21QYXJlbnRQb3B1cDppP2k6ZmFsc2V9KX19O3JldHVybiBQfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUubGlicmFyeScpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLmxpYnJhcnknKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9saWJyYXJ5IixbJy4vQ29yZSddLGZ1bmN0aW9uKCl7c2FwLnVpLmdldENvcmUoKS5pbml0TGlicmFyeSh7bmFtZToic2FwLnVpLmNvcmUiLHR5cGVzOlsic2FwLnVpLmNvcmUuQWNjZXNzaWJsZVJvbGUiLCJzYXAudWkuY29yZS5CYXJDb2xvciIsInNhcC51aS5jb3JlLkNTU0NvbG9yIiwic2FwLnVpLmNvcmUuQ1NTU2l6ZSIsInNhcC51aS5jb3JlLkNTU1NpemVTaG9ydEhhbmQiLCJzYXAudWkuY29yZS5Db2xsaXNpb24iLCJzYXAudWkuY29yZS5EZXNpZ24iLCJzYXAudWkuY29yZS5Eb2NrIiwic2FwLnVpLmNvcmUuSG9yaXpvbnRhbEFsaWduIiwic2FwLnVpLmNvcmUuSUQiLCJzYXAudWkuY29yZS5JY29uQ29sb3IiLCJzYXAudWkuY29yZS5JbWVNb2RlIiwic2FwLnVpLmNvcmUuTWVzc2FnZVR5cGUiLCJzYXAudWkuY29yZS5PcGVuU3RhdGUiLCJzYXAudWkuY29yZS5PcmllbnRhdGlvbiIsInNhcC51aS5jb3JlLlBlcmNlbnRhZ2UiLCJzYXAudWkuY29yZS5TY3JvbGxCYXJBY3Rpb24iLCJzYXAudWkuY29yZS5TY3JvbGxpbmciLCJzYXAudWkuY29yZS5UZXh0QWxpZ24iLCJzYXAudWkuY29yZS5UZXh0RGlyZWN0aW9uIiwic2FwLnVpLmNvcmUuVGl0bGVMZXZlbCIsInNhcC51aS5jb3JlLlVSSSIsInNhcC51aS5jb3JlLlZhbHVlU3RhdGUiLCJzYXAudWkuY29yZS5WZXJ0aWNhbEFsaWduIiwic2FwLnVpLmNvcmUuV3JhcHBpbmciLCJhbnkiLCJib29sZWFuIiwiZmxvYXQiLCJpbnQiLCJzYXAudWkuY29yZS5tdmMuVmlld1R5cGUiLCJvYmplY3QiLCJzYXAudWkuY29yZS5yb3V0aW5nLkhpc3RvcnlEaXJlY3Rpb24iLCJzdHJpbmciLCJ2b2lkIl0saW50ZXJmYWNlczpbInNhcC51aS5jb3JlLkxhYmVsIiwic2FwLnVpLmNvcmUuUG9wdXBJbnRlcmZhY2UiLCJzYXAudWkuY29yZS5Ub29sYmFyIl0sY29udHJvbHM6WyJzYXAudWkuY29yZS5Db21wb25lbnRDb250YWluZXIiLCJzYXAudWkuY29yZS5Db250cm9sIiwic2FwLnVpLmNvcmUuSFRNTCIsInNhcC51aS5jb3JlLkljb24iLCJzYXAudWkuY29yZS5Mb2NhbEJ1c3lJbmRpY2F0b3IiLCJzYXAudWkuY29yZS5TY3JvbGxCYXIiLCJzYXAudWkuY29yZS5Ub29sdGlwQmFzZSIsInNhcC51aS5jb3JlLlVJQ29tcG9uZW50Iiwic2FwLnVpLmNvcmUubXZjLkhUTUxWaWV3Iiwic2FwLnVpLmNvcmUubXZjLkpTT05WaWV3Iiwic2FwLnVpLmNvcmUubXZjLkpTVmlldyIsInNhcC51aS5jb3JlLm12Yy5UZW1wbGF0ZVZpZXciLCJzYXAudWkuY29yZS5tdmMuVmlldyIsInNhcC51aS5jb3JlLm12Yy5YTUxWaWV3Iiwic2FwLnVpLmNvcmUudG1wbC5ET01FbGVtZW50Iiwic2FwLnVpLmNvcmUudG1wbC5UZW1wbGF0ZSIsInNhcC51aS5jb3JlLnRtcGwuVGVtcGxhdGVDb250cm9sIl0sZWxlbWVudHM6WyJzYXAudWkuY29yZS5DdXN0b21EYXRhIiwic2FwLnVpLmNvcmUuRWxlbWVudCIsInNhcC51aS5jb3JlLkl0ZW0iLCJzYXAudWkuY29yZS5MYXlvdXREYXRhIiwic2FwLnVpLmNvcmUuTGlzdEl0ZW0iLCJzYXAudWkuY29yZS5NZXNzYWdlIiwic2FwLnVpLmNvcmUuU2VwYXJhdG9ySXRlbSIsInNhcC51aS5jb3JlLlRpdGxlIiwic2FwLnVpLmNvcmUuVmFyaWFudExheW91dERhdGEiLCJzYXAudWkuY29yZS5zZWFyY2guT3BlblNlYXJjaFByb3ZpZGVyIiwic2FwLnVpLmNvcmUuc2VhcmNoLlNlYXJjaFByb3ZpZGVyIiwic2FwLnVpLmNvcmUudG1wbC5ET01BdHRyaWJ1dGUiXSx2ZXJzaW9uOiIxLjI0LjIifSk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvQWNjZXNzaWJsZVJvbGUiLGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO3NhcC51aS5jb3JlLkFjY2Vzc2libGVSb2xlPXtOb25lOiJOb25lIixBbGVydDoiQWxlcnQiLEFsZXJ0RGlhbG9nOiJBbGVydERpYWxvZyIsQXBwbGljYXRpb246IkFwcGxpY2F0aW9uIixCYW5uZXI6IkJhbm5lciIsQnV0dG9uOiJCdXR0b24iLENoZWNrYm94OiJDaGVja2JveCIsQ29sdW1uSGVhZGVyOiJDb2x1bW5IZWFkZXIiLENvbWJvYm94OiJDb21ib2JveCIsDQovKioNCgkgKiBJbmZvcm1hdGlvbiBhYm91dCB0aGUgY29udGVudCBvbiB0aGUgcGFnZS4gRXhhbXBsZXMgYXJlIGZvb3Rub3RlcywgY29weXJpZ2h0cywgb3IgbGlua3MgdG8gcHJpdmFjeSBzdGF0ZW1lbnRzLg0KCSAqIA0KCSAqIEBwdWJsaWMNCgkgKi8NCkNvbnRlbnRJbmZvOiJDb250ZW50SW5mbyIsRGVmaW5pdGlvbjoiRGVmaW5pdGlvbiIsRGVzY3JpcHRpb246IkRlc2NyaXB0aW9uIixEaWFsb2c6IkRpYWxvZyIsRGlyZWN0b3J5OiJEaXJlY3RvcnkiLERvY3VtZW50OiJEb2N1bWVudCIsR3JpZDoiR3JpZCIsR3JpZENlbGw6IkdyaWRDZWxsIixHcm91cDoiR3JvdXAiLEhlYWRpbmc6IkhlYWRpbmciLEltZzoiSW1nIixMaW5rOiJMaW5rIixMaXN0OiJMaXN0IixMaXN0Ym94OiJMaXN0Ym94IixMaXN0SXRlbToiTGlzdEl0ZW0iLExvZzoiTG9nIixNYWluOiJNYWluIixNYXJxdWVlOiJNYXJxdWVlIixNZW51OiJNZW51IixNZW51YmFyOiJNZW51YmFyIixNZW51SXRlbToiTWVudUl0ZW0iLE1lbnVJdGVtQ2hlY2tib3g6Ik1lbnVJdGVtQ2hlY2tib3giLE1lbnVJdGVtUmFkaW86Ik1lbnVJdGVtUmFkaW8iLE5hdmlnYXRpb246Ik5hdmlnYXRpb24iLE5vdGU6Ik5vdGUiLE9wdGlvbjoiT3B0aW9uIixQcmVzZW50YXRpb246IlByZXNlbnRhdGlvbiIsUHJvZ3Jlc3NCYXI6IlByb2dyZXNzQmFyIixSYWRpbzoiUmFkaW8iLFJhZGlvR3JvdXA6IlJhZGlvR3JvdXAiLFJlZ2lvbjoiUmVnaW9uIixSb3c6IlJvdyIsUm93SGVhZGVyOiJSb3dIZWFkZXIiLFNlYXJjaDoiU2VhcmNoIixTZWNvbmRhcnk6IlNlY29uZGFyeSIsU2VlQWxzbzoiU2VlQWxzbyIsU2VwYXJhdG9yOiJTZXBhcmF0b3IiLFNsaWRlcjoiU2xpZGVyIixTcGluQnV0dG9uOiJTcGluQnV0dG9uIixTdGF0dXM6IlN0YXR1cyIsVGFiOiJUYWIiLFRhYmxpc3Q6IlRhYmxpc3QiLFRhYnBhbmVsOiJUYWJwYW5lbCIsVGV4dGJveDoiVGV4dGJveCIsVGltZXI6IlRpbWVyIixUb29sYmFyOiJUb29sYmFyIixUb29sdGlwOiJUb29sdGlwIixUcmVlOiJUcmVlIixUcmVlR3JpZDoiVHJlZUdyaWQiLFRyZWVJdGVtOiJUcmVlSXRlbSJ9O3JldHVybiBzYXAudWkuY29yZS5BY2Nlc3NpYmxlUm9sZX0sdHJ1ZSk7DQovKiENCiAqIFNBUCBVSSBkZXZlbG9wbWVudCB0b29sa2l0IGZvciBIVE1MNSAoU0FQVUk1L09wZW5VSTUpDQogKiAoYykgQ29weXJpZ2h0IDIwMDktMjAxNCBTQVAgU0Ugb3IgYW4gU0FQIGFmZmlsaWF0ZSBjb21wYW55LiANCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgLSBzZWUgTElDRU5TRS50eHQuDQogKi8NCnNhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL0JhckNvbG9yIixmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0IjtzYXAudWkuY29yZS5CYXJDb2xvcj17TkVVVFJBTDoiTkVVVFJBTCIsUE9TSVRJVkU6IlBPU0lUSVZFIixDUklUSUNBTDoiQ1JJVElDQUwiLE5FR0FUSVZFOiJORUdBVElWRSJ9O3JldHVybiBzYXAudWkuY29yZS5CYXJDb2xvcn0sdHJ1ZSk7c2FwLnVpLmRlZmluZSgnc2FwL3VpL2NvcmUvQ1NTQ29sb3InLFsnc2FwL3VpL2Jhc2UvRGF0YVR5cGUnXSxmdW5jdGlvbihEKXtzYXAudWkuY29yZS5DU1NDb2xvcj1ELmNyZWF0ZVR5cGUoJ3NhcC51aS5jb3JlLkNTU0NvbG9yJyx7aXNWYWxpZDpmdW5jdGlvbih2KXtyZXR1cm4vXigjKFswLTlhLWZBLUZdezN9fFswLTlhLWZBLUZdezZ9KXxyZ2JcKFxzKigoMT9bMC05XT9bMC05XXwyKFswLTRdWzAtOV18NVswLTVdKSl8KFswLTldP1swLTldKFwuWzAtOV0rKT98MTAwKFwuMCspPyklKVxzKigsXHMqKCgxP1swLTldP1swLTldfDIoWzAtNF1bMC05XXw1WzAtNV0pKXwoWzAtOV0/WzAtOV0oXC5bMC05XSspP3wxMDAoXC4wKyk/KSUpXHMqKXsyfVwpfHJnYmFcKChccyooKDE/WzAtOV0/WzAtOV18MihbMC00XVswLTldfDVbMC01XSkpfChbMC05XT9bMC05XShcLlswLTldKyk/fDEwMChcLjArKT8pJSlccyosKXszfVxzKigwKFwuWzAtOV0rKT98MShcLjArKT8pXHMqXCl8aHNsXChccyooWzAtMl0/WzAtOV0/WzAtOV18MyhbMC01XVswLTldfDYwKSlccyooLFxzKigoWzAtOV0/WzAtOV0oXC5bMC05XSspP3wxMDAoXC4wKyk/KSUpXHMqKXsyfVwpfGhzbGFcKFxzKihbMC0yXT9bMC05XT9bMC05XXwzKFswLTVdWzAtOV18NjApKVxzKiwoXHMqKChbMC05XT9bMC05XShcLlswLTldKyk/fDEwMChcLjArKT8pJSlccyosKXsyfVxzKigwKFwuWzAtOV0rKT98MShcLjArKT8pXHMqXCl8YWxpY2VibHVlfGFudGlxdWV3aGl0ZXxhcXVhfGFxdWFtYXJpbmV8YXp1cmV8YmVpZ2V8YmlzcXVlfGJsYWNrfGJsYW5jaGVkYWxtb25kfGJsdWV8Ymx1ZXZpb2xldHxicm93bnxidXJseXdvb2R8Y2FkZXRibHVlfGNoYXJ0cmV1c2V8Y2hvY29sYXRlfGNvcmFsY29ybmZsb3dlcmJsdWV8Y29ybnNpbGt8Y3JpbXNvbnxjeWFufGRhcmtibHVlfGRhcmtjeWFufGRhcmtnb2xkZW5yb2R8ZGFya2dyYXl8ZGFya2dyZWVufGRhcmtraGFraXxkYXJrbWFnZW50YXxkYXJrb2xpdmVncmVlbnxkYXJrb3JhbmdlfGRhcmtvcmNoaWR8ZGFya3JlZHxkYXJrc2FsbW9ufGRhcmtzZWFncmVlbnxkYXJrc2xhdGVibHVlfGRhcmtzbGF0ZWdyYXl8ZGFya3R1cnF1b2lzZXxkYXJrdmlvbGV0fGRlZXBwaW5rfGRlZXBza3libHVlfGRpbWdyYXl8ZG9kZ2VyYmx1ZXxmaXJlYnJpY2t8ZmxvcmFsd2hpdGV8Zm9yZXN0Z3JlZW58ZnVjaHNpYXxnYWluc2Jvcm98Z2hvc3R3aGl0ZXxnb2xkfGdvbGRlbnJvZHxncmF5fGdyZWVufGdyZWVueWVsbG93fGhvbmV5ZGV3fGhvdHBpbmt8aW5kaWFucmVkfGluZGlnb3xpdm9yeXxraGFraXxsYXZlbmRlcnxsYXZlbmRlcmJsdXNofGxhd25ncmVlbnxsZW1vbmNoaWZmb258bGlnaHRibHVlfGxpZ2h0Y29yYWx8bGlnaHRjeWFufGxpZ2h0Z29sZGVucm9keWVsbG93fGxpZ2h0Z3JheXxsaWdodGdyZWVufGxpZ2h0cGlua3xsaWdodHNhbG1vbnxsaWdodHNlYWdyZWVufGxpZ2h0c2t5Ymx1ZXxsaWdodHNsYXRlZ3JheXxsaWdodHN0ZWVsYmx1ZXxsaWdodHllbGxvd3xsaW1lfGxpbWVncmVlbnxsaW5lbnxtYWdlbnRhfG1hcm9vbnxtZWRpdW1hcXVhbWFyaW5lfG1lZGl1bWJsdWV8bWVkaXVtb3JjaGlkfG1lZGl1bXB1cnBsZXxtZWRpdW1zZWFncmVlbnxtZWRpdW1zbGF0ZWJsdWV8bWVkaXVtc3ByaW5nZ3JlZW58bWVkaXVtdHVycXVvaXNlfG1lZGl1bXZpb2xldHJlZHxtaWRuaWdodGJsdWV8bWludGNyZWFtfG1pc3R5cm9zZXxtb2NjYXNpbnxuYXZham93aGl0ZXxuYXZ5fG9sZGxhY2V8b2xpdmV8b2xpdmVkcmFifG9yYW5nZXxvcmFuZ2VyZWR8b3JjaGlkfHBhbGVnb2xkZW5yb2R8cGFsZWdyZWVufHBhbGV0dXJxdW9pc2V8cGFsZXZpb2xldHJlZHxwYXBheWF3aGlwfHBlYWNocHVmZnxwZXJ1fHBpbmt8cGx1bXxwb3dkZXJibHVlfHB1cnBsZXxyZWR8cm9zeWJyb3dufHJveWFsYmx1ZXxzYWRkbGVicm93bnxzYWxtb258c2FuZHlicm93bnxzZWFncmVlbnxzZWFzaGVsbHxzaWVubmF8c2lsdmVyc2t5Ymx1ZXxzbGF0ZWJsdWV8c2xhdGVncmF5fHNub3d8c3ByaW5nZ3JlZW58c3RlZWxibHVlfHRhbnx0ZWFsfHRoaXN0bGV8dG9tYXRvfHR1cnF1b2lzZXx2aW9sZXR8d2hlYXR8d2hpdGV8d2hpdGVzbW9rZXx5ZWxsb3d8eWVsbG93Z3JlZW58dHJhbnNwYXJlbnR8aW5oZXJpdHwpJC8udGVzdCh2KX19LEQuZ2V0VHlwZSgnc3RyaW5nJykpO3JldHVybiBzYXAudWkuY29yZS5DU1NDb2xvcn0sdHJ1ZSk7c2FwLnVpLmRlZmluZSgnc2FwL3VpL2NvcmUvQ1NTU2l6ZScsWydzYXAvdWkvYmFzZS9EYXRhVHlwZSddLGZ1bmN0aW9uKEQpe3NhcC51aS5jb3JlLkNTU1NpemU9RC5jcmVhdGVUeXBlKCdzYXAudWkuY29yZS5DU1NTaXplJyx7aXNWYWxpZDpmdW5jdGlvbih2KXtyZXR1cm4vXihhdXRvfGluaGVyaXR8Wy0rXT8oMCp8KFswLTldK3xbMC05XSpcLlswLTldKykoW3JSXVtlRV1bbU1dfFtlRV1bbU1dfFtlRV1beFhdfFtwUF1beFhdfFtjQ11bbU1dfFttTV1bbU1dfFtpSV1bbk5dfFtwUF1bdFRdfFtwUF1bY0NdfCUpKSkkLy50ZXN0KHYpfX0sRC5nZXRUeXBlKCdzdHJpbmcnKSk7cmV0dXJuIHNhcC51aS5jb3JlLkNTU1NpemV9LHRydWUpO3NhcC51aS5kZWZpbmUoJ3NhcC91aS9jb3JlL0NTU1NpemVTaG9ydEhhbmQnLFsnc2FwL3VpL2Jhc2UvRGF0YVR5cGUnXSxmdW5jdGlvbihEKXtzYXAudWkuY29yZS5DU1NTaXplU2hvcnRIYW5kPUQuY3JlYXRlVHlwZSgnc2FwLnVpLmNvcmUuQ1NTU2l6ZVNob3J0SGFuZCcse2lzVmFsaWQ6ZnVuY3Rpb24odil7cmV0dXJuL14oaW5oZXJpdHwoYXV0b3xbLStdPygwKnwoXGQrfFxkKlwuXGQrKShbZUVdW21NXXxbZUVdW3hYXXxbcFBdW3hYXXxbY0NdW21NXXxbbU1dW21NXXxbaUldW25OXXxbcFBdW3RUXXxbcFBdW2NDXXwlKSkpezF9KFxzKGF1dG98Wy0rXT8oMCp8KFxkK3xcZCpcLlxkKykoW2VFXVttTV18W2VFXVt4WF18W3BQXVt4WF18W2NDXVttTV18W21NXVttTV18W2lJXVtuTl18W3BQXVt0VF18W3BQXVtjQ118JSkpKSl7MCwzfSkkLy50ZXN0KHYpfX0sRC5nZXRUeXBlKCdzdHJpbmcnKSk7cmV0dXJuIHNhcC51aS5jb3JlLkNTU1NpemVTaG9ydEhhbmR9LHRydWUpO3NhcC51aS5kZWZpbmUoJ3NhcC91aS9jb3JlL0NvbGxpc2lvbicsWydzYXAvdWkvYmFzZS9EYXRhVHlwZSddLGZ1bmN0aW9uKEQpe3NhcC51aS5jb3JlLkNvbGxpc2lvbj1ELmNyZWF0ZVR5cGUoJ3NhcC51aS5jb3JlLkNvbGxpc2lvbicse2lzVmFsaWQ6ZnVuY3Rpb24odil7cmV0dXJuL14oKGZsaXB8Zml0fG5vbmUpKCAoZmxpcHxmaXR8bm9uZSkpPykkLy50ZXN0KHYpfX0sRC5nZXRUeXBlKCdzdHJpbmcnKSk7cmV0dXJuIHNhcC51aS5jb3JlLkNvbGxpc2lvbn0sdHJ1ZSk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvRGVzaWduIixmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0IjtzYXAudWkuY29yZS5EZXNpZ249e1N0YW5kYXJkOiJTdGFuZGFyZCIsTW9ub3NwYWNlOiJNb25vc3BhY2UifTtyZXR1cm4gc2FwLnVpLmNvcmUuRGVzaWdufSx0cnVlKTtzYXAudWkuZGVmaW5lKCdzYXAvdWkvY29yZS9Eb2NrJyxbJ3NhcC91aS9iYXNlL0RhdGFUeXBlJ10sZnVuY3Rpb24oRCl7c2FwLnVpLmNvcmUuRG9jaz1ELmNyZWF0ZVR5cGUoJ3NhcC51aS5jb3JlLkRvY2snLHtpc1ZhbGlkOmZ1bmN0aW9uKHYpe3JldHVybi9eKChiZWdpbnxsZWZ0fGNlbnRlcnxyaWdodHxlbmQpICh0b3B8Y2VudGVyfGJvdHRvbSkpJC8udGVzdCh2KX19LEQuZ2V0VHlwZSgnc3RyaW5nJykpO3JldHVybiBzYXAudWkuY29yZS5Eb2NrfSx0cnVlKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9Ib3Jpem9udGFsQWxpZ24iLGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO3NhcC51aS5jb3JlLkhvcml6b250YWxBbGlnbj17QmVnaW46IkJlZ2luIixFbmQ6IkVuZCIsTGVmdDoiTGVmdCIsUmlnaHQ6IlJpZ2h0IixDZW50ZXI6IkNlbnRlciJ9O3JldHVybiBzYXAudWkuY29yZS5Ib3Jpem9udGFsQWxpZ259LHRydWUpO3NhcC51aS5kZWZpbmUoJ3NhcC91aS9jb3JlL0lEJyxbJ3NhcC91aS9iYXNlL0RhdGFUeXBlJ10sZnVuY3Rpb24oRCl7c2FwLnVpLmNvcmUuSUQ9RC5jcmVhdGVUeXBlKCdzYXAudWkuY29yZS5JRCcse2lzVmFsaWQ6ZnVuY3Rpb24odil7cmV0dXJuL14oW0EtWmEtel9dWy1BLVphLXowLTlfLjpdKikkLy50ZXN0KHYpfX0sRC5nZXRUeXBlKCdzdHJpbmcnKSk7cmV0dXJuIHNhcC51aS5jb3JlLklEfSx0cnVlKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9JY29uQ29sb3IiLGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO3NhcC51aS5jb3JlLkljb25Db2xvcj17RGVmYXVsdDoiRGVmYXVsdCIsUG9zaXRpdmU6IlBvc2l0aXZlIixOZWdhdGl2ZToiTmVnYXRpdmUiLENyaXRpY2FsOiJDcml0aWNhbCIsTmV1dHJhbDoiTmV1dHJhbCJ9O3JldHVybiBzYXAudWkuY29yZS5JY29uQ29sb3J9LHRydWUpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL0ltZU1vZGUiLGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO3NhcC51aS5jb3JlLkltZU1vZGU9e0F1dG86IkF1dG8iLEFjdGl2ZToiQWN0aXZlIixJbmFjdGl2ZToiSW5hY3RpdmUiLERpc2FibGVkOiJEaXNhYmxlZCJ9O3JldHVybiBzYXAudWkuY29yZS5JbWVNb2RlfSx0cnVlKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9NZXNzYWdlVHlwZSIsZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7c2FwLnVpLmNvcmUuTWVzc2FnZVR5cGU9e0luZm9ybWF0aW9uOiJJbmZvcm1hdGlvbiIsV2FybmluZzoiV2FybmluZyIsRXJyb3I6IkVycm9yIixOb25lOiJOb25lIixTdWNjZXNzOiJTdWNjZXNzIn07cmV0dXJuIHNhcC51aS5jb3JlLk1lc3NhZ2VUeXBlfSx0cnVlKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9PcGVuU3RhdGUiLGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO3NhcC51aS5jb3JlLk9wZW5TdGF0ZT17T1BFTjoiT1BFTiIsQ0xPU0VEOiJDTE9TRUQiLE9QRU5JTkc6Ik9QRU5JTkciLENMT1NJTkc6IkNMT1NJTkcifTtyZXR1cm4gc2FwLnVpLmNvcmUuT3BlblN0YXRlfSx0cnVlKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9PcmllbnRhdGlvbiIsZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7c2FwLnVpLmNvcmUuT3JpZW50YXRpb249e0hvcml6b250YWw6Ikhvcml6b250YWwiLFZlcnRpY2FsOiJWZXJ0aWNhbCJ9O3JldHVybiBzYXAudWkuY29yZS5PcmllbnRhdGlvbn0sdHJ1ZSk7c2FwLnVpLmRlZmluZSgnc2FwL3VpL2NvcmUvUGVyY2VudGFnZScsWydzYXAvdWkvYmFzZS9EYXRhVHlwZSddLGZ1bmN0aW9uKEQpe3NhcC51aS5jb3JlLlBlcmNlbnRhZ2U9RC5jcmVhdGVUeXBlKCdzYXAudWkuY29yZS5QZXJjZW50YWdlJyx7aXNWYWxpZDpmdW5jdGlvbih2KXtyZXR1cm4vXihbMC05XVswLTldKihcLlswLTldKyk/JSkkLy50ZXN0KHYpfX0sRC5nZXRUeXBlKCdzdHJpbmcnKSk7cmV0dXJuIHNhcC51aS5jb3JlLlBlcmNlbnRhZ2V9LHRydWUpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL1Njcm9sbEJhckFjdGlvbiIsZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7c2FwLnVpLmNvcmUuU2Nyb2xsQmFyQWN0aW9uPXtTdGVwOiJTdGVwIixQYWdlOiJQYWdlIixNb3VzZVdoZWVsOiJNb3VzZVdoZWVsIixEcmFnOiJEcmFnIn07cmV0dXJuIHNhcC51aS5jb3JlLlNjcm9sbEJhckFjdGlvbn0sdHJ1ZSk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvU2Nyb2xsaW5nIixmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0IjtzYXAudWkuY29yZS5TY3JvbGxpbmc9e05vbmU6Ik5vbmUiLEF1dG86IkF1dG8iLFNjcm9sbDoiU2Nyb2xsIixIaWRkZW46IkhpZGRlbiJ9O3JldHVybiBzYXAudWkuY29yZS5TY3JvbGxpbmd9LHRydWUpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL1RleHRBbGlnbiIsZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7c2FwLnVpLmNvcmUuVGV4dEFsaWduPXtCZWdpbjoiQmVnaW4iLEVuZDoiRW5kIixMZWZ0OiJMZWZ0IixSaWdodDoiUmlnaHQiLENlbnRlcjoiQ2VudGVyIn07cmV0dXJuIHNhcC51aS5jb3JlLlRleHRBbGlnbn0sdHJ1ZSk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvVGV4dERpcmVjdGlvbiIsZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7c2FwLnVpLmNvcmUuVGV4dERpcmVjdGlvbj17TFRSOiJMVFIiLFJUTDoiUlRMIixJbmhlcml0OiJJbmhlcml0In07cmV0dXJuIHNhcC51aS5jb3JlLlRleHREaXJlY3Rpb259LHRydWUpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL1RpdGxlTGV2ZWwiLGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO3NhcC51aS5jb3JlLlRpdGxlTGV2ZWw9e0F1dG86IkF1dG8iLEgxOiJIMSIsSDI6IkgyIixIMzoiSDMiLEg0OiJINCIsSDU6Ikg1IixINjoiSDYifTtyZXR1cm4gc2FwLnVpLmNvcmUuVGl0bGVMZXZlbH0sdHJ1ZSk7c2FwLnVpLmRlZmluZSgnc2FwL3VpL2NvcmUvVVJJJyxbJ3NhcC91aS9iYXNlL0RhdGFUeXBlJ10sZnVuY3Rpb24oRCl7c2FwLnVpLmNvcmUuVVJJPUQuY3JlYXRlVHlwZSgnc2FwLnVpLmNvcmUuVVJJJyx7aXNWYWxpZDpmdW5jdGlvbih2KXtyZXR1cm4vXigoKFteOlwvPyNdKyk6KT8oXC9cLyhbXlwvPyNdKikpPyhbXj8jXSopKFw/KFteI10qKSk/KCMoLiopKT8pJC8udGVzdCh2KX19LEQuZ2V0VHlwZSgnc3RyaW5nJykpO3JldHVybiBzYXAudWkuY29yZS5VUkl9LHRydWUpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL1ZhbHVlU3RhdGUiLGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO3NhcC51aS5jb3JlLlZhbHVlU3RhdGU9e0Vycm9yOiJFcnJvciIsV2FybmluZzoiV2FybmluZyIsU3VjY2VzczoiU3VjY2VzcyIsTm9uZToiTm9uZSJ9O3JldHVybiBzYXAudWkuY29yZS5WYWx1ZVN0YXRlfSx0cnVlKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9WZXJ0aWNhbEFsaWduIixmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0IjtzYXAudWkuY29yZS5WZXJ0aWNhbEFsaWduPXtCb3R0b206IkJvdHRvbSIsTWlkZGxlOiJNaWRkbGUiLFRvcDoiVG9wIixJbmhlcml0OiJJbmhlcml0In07cmV0dXJuIHNhcC51aS5jb3JlLlZlcnRpY2FsQWxpZ259LHRydWUpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL1dyYXBwaW5nIixmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0IjtzYXAudWkuY29yZS5XcmFwcGluZz17Tm9uZToiTm9uZSIsU29mdDoiU29mdCIsSGFyZDoiSGFyZCIsT2ZmOiJPZmYifTtyZXR1cm4gc2FwLnVpLmNvcmUuV3JhcHBpbmd9LHRydWUpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL212Yy9WaWV3VHlwZSIsZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7c2FwLnVpLmNvcmUubXZjLlZpZXdUeXBlPXtKU09OOiJKU09OIixYTUw6IlhNTCIsSFRNTDoiSFRNTCIsSlM6IkpTIixUZW1wbGF0ZToiVGVtcGxhdGUifTtyZXR1cm4gc2FwLnVpLmNvcmUubXZjLlZpZXdUeXBlfSx0cnVlKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9yb3V0aW5nL0hpc3RvcnlEaXJlY3Rpb24iLGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO3NhcC51aS5jb3JlLnJvdXRpbmcuSGlzdG9yeURpcmVjdGlvbj17Rm9yd2FyZHM6IkZvcndhcmRzIixCYWNrd2FyZHM6IkJhY2t3YXJkcyIsTmV3RW50cnk6Ik5ld0VudHJ5IixVbmtub3duOiJVbmtub3duIn07cmV0dXJuIHNhcC51aS5jb3JlLnJvdXRpbmcuSGlzdG9yeURpcmVjdGlvbn0sdHJ1ZSk7KGZ1bmN0aW9uKCl7dmFyIGw9c2FwLnVpLmxhenlSZXF1aXJlO2Z1bmN0aW9uIGUocCxjLHMpe2Zvcih2YXIgaT0wO2k8Yy5sZW5ndGg7aSsrKXtpZihzKXtsKHMsY1tpXS50b0xvd2VyQ2FzZSgpLHArY1tpXSl9ZWxzZXtsKHArY1tpXSwibmV3IGV4dGVuZCBnZXRNZXRhZGF0YSIpfX19bCgic2FwLnVpLmNvcmUuQnVzeUluZGljYXRvciIsInNob3cgaGlkZSBhdHRhY2hPcGVuIGRldGFjaE9wZW4gYXR0YWNoQ2xvc2UgZGV0YWNoQ2xvc2UiKTtsKCJzYXAudWkuY29yZS50bXBsLlRlbXBsYXRlIiwicmVnaXN0ZXJUeXBlIHVucmVnaXN0ZXJUeXBlIik7bCgic2FwLnVpLmNvcmUuRnJhZ21lbnQiLCJyZWdpc3RlclR5cGUiKTtsKCJzYXAudWkiLCJ4bWxmcmFnbWVudCIsInNhcC51aS5jb3JlLkZyYWdtZW50Iik7bCgic2FwLnVpIiwianNmcmFnbWVudCIsInNhcC51aS5jb3JlLkZyYWdtZW50Iik7bCgic2FwLnVpIiwiaHRtbGZyYWdtZW50Iiwic2FwLnVpLmNvcmUuRnJhZ21lbnQiKTtlKCJzYXAudWkubW9kZWwuIixbIkZpbHRlciIsIlNvcnRlciIsImpzb24uSlNPTk1vZGVsIiwicmVzb3VyY2UuUmVzb3VyY2VNb2RlbCIsIm9kYXRhLk9EYXRhTW9kZWwiLCJ4bWwuWE1MTW9kZWwiXSk7ZSgic2FwLnVpLm1vZGVsLnR5cGUuIixbIkJvb2xlYW4iLCJJbnRlZ2VyIiwiRmxvYXQiLCJTdHJpbmciLCJEYXRlIiwiVGltZSIsIkRhdGVUaW1lIl0pO2UoInNhcC51aS5jb3JlLiIsWyJMb2NhbGUiLCJMb2NhbGVEYXRhIiwibXZjLkNvbnRyb2xsZXIiXSk7ZSgic2FwLnVpLmNvcmUubXZjLiIsWyJDb250cm9sbGVyIiwiVmlldyIsIkpTVmlldyIsIkpTT05WaWV3IiwiWE1MVmlldyIsIkhUTUxWaWV3IiwiVGVtcGxhdGVWaWV3Il0sInNhcC51aSIpO2UoInNhcC51aS5jb3JlLiIsWyJDb21wb25lbnQiXSwic2FwLnVpIik7ZSgic2FwLnVpLmNvcmUudG1wbC4iLFsiVGVtcGxhdGUiXSwic2FwLnVpIil9KCkpfSxmYWxzZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLnBsdWdpbi5UZW1wbGF0aW5nU3VwcG9ydCcpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLnBsdWdpbi5UZW1wbGF0aW5nU3VwcG9ydCcpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL3BsdWdpbi9UZW1wbGF0aW5nU3VwcG9ydCIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ3NhcC91aS9jb3JlL0NvcmUnLCdzYXAvdWkvY29yZS90bXBsL1RlbXBsYXRlJ10sZnVuY3Rpb24ocSxDLFQpeyJ1c2Ugc3RyaWN0Ijt2YXIgYT1mdW5jdGlvbigpe307YS5wcm90b3R5cGUuc3RhcnRQbHVnaW49ZnVuY3Rpb24oYyxvKXtxLnNhcC5sb2cuaW5mbygiU3RhcnRpbmcgVGVtcGxhdGluZ1N1cHBvcnQgcGx1Z2luLiIpO3RoaXMub0NvcmU9YztzYXAudWkudGVtcGxhdGUoKX07YS5wcm90b3R5cGUuc3RvcFBsdWdpbj1mdW5jdGlvbigpe3Euc2FwLmxvZy5pbmZvKCJTdG9wcGluZyBUZW1wbGF0aW5nU3VwcG9ydCBwbHVnaW4uIik7dGhpcy5vQ29yZT1udWxsfTsoZnVuY3Rpb24oKXt2YXIgdD1uZXcgYSgpO3NhcC51aS5nZXRDb3JlKCkucmVnaXN0ZXJQbHVnaW4odCl9KCkpO3JldHVybiBhfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUuc2VhcmNoLlNlYXJjaFByb3ZpZGVyJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUuc2VhcmNoLlNlYXJjaFByb3ZpZGVyJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvc2VhcmNoL1NlYXJjaFByb3ZpZGVyIixbJ3NhcC91aS9jb3JlL2xpYnJhcnknLCdzYXAvdWkvY29yZS9FbGVtZW50J10sZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7c2FwLnVpLmNvcmUuRWxlbWVudC5leHRlbmQoInNhcC51aS5jb3JlLnNlYXJjaC5TZWFyY2hQcm92aWRlciIse21ldGFkYXRhOntwdWJsaWNNZXRob2RzOlsic3VnZ2VzdCJdLGxpYnJhcnk6InNhcC51aS5jb3JlIixwcm9wZXJ0aWVzOnsiaWNvbiI6e3R5cGU6InN0cmluZyIsZ3JvdXA6Ik1pc2MiLGRlZmF1bHRWYWx1ZTpudWxsfX19fSk7c2FwLnVpLmNvcmUuc2VhcmNoLlNlYXJjaFByb3ZpZGVyLnByb3RvdHlwZS5zdWdnZXN0PWZ1bmN0aW9uKHYsYyl7alF1ZXJ5LnNhcC5sb2cud2FybmluZygic2FwLnVpLmNvcmUuc2VhcmNoLlNlYXJjaFByb3ZpZGVyIGlzIHRoZSBhYnN0cmFjdCBiYXNlIGNsYXNzIGZvciBhbGwgU2VhcmNoUHJvdmlkZXJzLiBEbyBub3QgY3JlYXRlIGluc3RhbmNlcyBvZiB0aGlzIGNsYXNzLCBidXQgdXNlIGEgY29uY3JldGUgc3ViIGNsYXNzIGluc3RlYWQuIil9O3JldHVybiBzYXAudWkuY29yZS5zZWFyY2guU2VhcmNoUHJvdmlkZXJ9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS50aGVtaW5nLlBhcmFtZXRlcnMnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS50aGVtaW5nLlBhcmFtZXRlcnMnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS90aGVtaW5nL1BhcmFtZXRlcnMiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvY29yZS9Db3JlJ10sZnVuY3Rpb24ocSxDKXsidXNlIHN0cmljdCI7dmFyIFA9e307dmFyIHA9bnVsbDt2YXIgdD1udWxsO2Z1bmN0aW9uIHIoKXtwPW51bGx9ZnVuY3Rpb24gbCgpe3ZhciB1PXEodGhpcykuY3NzKCJiYWNrZ3JvdW5kLWltYWdlIik7dmFyIGE9L1woWyInXWRhdGE6dGV4dFwvcGxhaW47dXRmLTgsKC4qKVsiJ11cKSQvaS5leGVjKHUpO2lmKGEmJmEubGVuZ3RoPj0yKXt2YXIgcz1hWzFdO2lmKHMuY2hhckF0KDApIT09InsiJiZzLmNoYXJBdChzLmxlbmd0aC0xKSE9PSJ9Iil7dHJ5e3M9ZGVjb2RlVVJJKHMpfWNhdGNoKGUpe3Euc2FwLmxvZy53YXJuaW5nKCJDb3VsZCBub3QgZGVjb2RlIHRoZW1lIHBhcmFtZXRlcnMgVVJJIGZyb20gbGlicmFyeS5jc3MuIil9fXRyeXt2YXIgbz1xLnBhcnNlSlNPTihzKTtxLmV4dGVuZChwLG8pO3JldHVybn1jYXRjaChlKXtxLnNhcC5sb2cud2FybmluZygiQ291bGQgbm90IHBhcnNlIHRoZW1lIHBhcmFtZXRlcnMgZnJvbSBsaWJyYXJ5LmNzcy4gTG9hZGluZyBsaWJyYXJ5LXBhcmFtZXRlcnMuanNvbiBhcyBmYWxsYmFjayBzb2x1dGlvbi4iKX19dmFyIHU9dGhpcy5ocmVmLFIsYjt1PXUucmVwbGFjZSgvXC9saWJyYXJ5KFteXC8uXSopXC4oPzpjc3N8bGVzcykoJHxbPyNdKS8sZnVuY3Rpb24oJCxjLGQpe3JldHVybiIvbGlicmFyeS1wYXJhbWV0ZXJzLmpzb24iKyhkP2Q6IiIpfSk7Uj1xLnNhcC5zamF4KHt1cmw6dSxkYXRhVHlwZTonanNvbid9KTtpZihSLnN1Y2Nlc3Mpe2I9KHR5cGVvZiBSLmRhdGE9PSJzdHJpbmciKT9xLnBhcnNlSlNPTihSLmRhdGEpOlIuZGF0YTtpZihxLmlzQXJyYXkoYikpe2Zvcih2YXIgaj0wO2o8Yi5sZW5ndGg7aisrKXtxLmV4dGVuZChwLGJbal0pfX1lbHNle3EuZXh0ZW5kKHAsYil9fWVsc2V7cS5zYXAubG9nLndhcm5pbmcoIkNvdWxkIG5vdCBsb2FkIHRoZW1lIHBhcmFtZXRlcnMgZnJvbTogIit1KX19ZnVuY3Rpb24gZygpe2lmKCFwKXtwPXt9O3Q9c2FwLnVpLmdldENvcmUoKS5nZXRDb25maWd1cmF0aW9uKCkuZ2V0VGhlbWUoKTtxKCJsaW5rW2lkXj1zYXAtdWktdGhlbWUtXSIpLmVhY2gobCl9cmV0dXJuIHB9UC5fYWRkTGlicmFyeVRoZW1lPWZ1bmN0aW9uKEwpe2lmKHApe3ZhciBvPXEuc2FwLmRvbUJ5SWQoInNhcC11aS10aGVtZS0iK0wpO2wuYXBwbHkobyl9fTtQLmdldD1mdW5jdGlvbihuKXtpZihhcmd1bWVudHMubGVuZ3RoPT0xKXt2YXIgcz1nKClbbl07aWYodHlwZW9mIHM9PT0idW5kZWZpbmVkIiYmdHlwZW9mIG49PT0ic3RyaW5nIil7dmFyIGk9bi5pbmRleE9mKCI6Iik7aWYoaSE9PS0xKXtuPW4uc3Vic3RyKGkrMSl9cz1nKClbbl19cmV0dXJuIHN9ZWxzZSBpZihhcmd1bWVudHMubGVuZ3RoPT0wKXtyZXR1cm4gcS5leHRlbmQoe30sZygpKX1lbHNle3JldHVybiB1bmRlZmluZWR9fTtQLl9zZXRPckxvYWRQYXJhbWV0ZXJzPWZ1bmN0aW9uKEwpe3A9e307dD1zYXAudWkuZ2V0Q29yZSgpLmdldENvbmZpZ3VyYXRpb24oKS5nZXRUaGVtZSgpO3EoImxpbmtbaWRePXNhcC11aS10aGVtZS1dIikuZWFjaChmdW5jdGlvbigpe3ZhciAkPXEodGhpcyk7dmFyIHM9JC5hdHRyKCJpZCIpLnN1YnN0cigxMyk7aWYoTFtzXSl7cS5leHRlbmQocCxMW3NdKX1lbHNle2wuYXBwbHkodGhpcyl9fSl9O1AucmVzZXQ9ZnVuY3Rpb24oKXt2YXIgbz1hcmd1bWVudHNbMF09PT10cnVlO2lmKCFvfHxzYXAudWkuZ2V0Q29yZSgpLmdldENvbmZpZ3VyYXRpb24oKS5nZXRUaGVtZSgpIT09dCl7cigpfX07UC5fZ2V0VGhlbWVJbWFnZT1mdW5jdGlvbihzLGYpe3M9c3x8InNhcFVpR2xvYmFsTG9nbyI7dmFyIGE9c2FwLnVpLmNvcmUudGhlbWluZy5QYXJhbWV0ZXJzLmdldChzKTtpZihhKXt2YXIgbT0vdXJsW1xzXSpcKCc/Ij8oW15cJyIpXSopJz8iP1wpLy5leGVjKGEpO2lmKG0pe2E9bVsxXX1lbHNlIGlmKGE9PT0iJycifHxhPT09Im5vbmUiKXthPW51bGx9fWlmKCEhZiYmIWEpe3JldHVybiBzYXAudWkucmVzb3VyY2UoJ3NhcC51aS5jb3JlJywndGhlbWVzL2Jhc2UvaW1nLzF4MS5naWYnKX1yZXR1cm4gYX07cmV0dXJuIFB9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS50bXBsLkRPTUF0dHJpYnV0ZScpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLnRtcGwuRE9NQXR0cmlidXRlJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvdG1wbC9ET01BdHRyaWJ1dGUiLFsnc2FwL3VpL2NvcmUvbGlicmFyeScsJ3NhcC91aS9jb3JlL0VsZW1lbnQnXSxmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0IjtzYXAudWkuY29yZS5FbGVtZW50LmV4dGVuZCgic2FwLnVpLmNvcmUudG1wbC5ET01BdHRyaWJ1dGUiLHttZXRhZGF0YTp7bGlicmFyeToic2FwLnVpLmNvcmUiLHByb3BlcnRpZXM6eyJuYW1lIjp7dHlwZToic3RyaW5nIixncm91cDoiRGF0YSIsZGVmYXVsdFZhbHVlOm51bGx9LCJ2YWx1ZSI6e3R5cGU6InN0cmluZyIsZ3JvdXA6IkRhdGEiLGRlZmF1bHRWYWx1ZTpudWxsfX19fSk7c2FwLnVpLmNvcmUudG1wbC5ET01BdHRyaWJ1dGUucHJvdG90eXBlLnNldFZhbHVlPWZ1bmN0aW9uKHYpe3RoaXMuc2V0UHJvcGVydHkoInZhbHVlIix2LHRydWUpO3ZhciBwPXRoaXMuZ2V0UGFyZW50KCksJD1wJiZwLiQoKTtpZigkJiYkLmxlbmd0aD4wKXskLmF0dHIodGhpcy5nZXROYW1lKCksdGhpcy5nZXRQcm9wZXJ0eSgidmFsdWUiKSl9cmV0dXJuIHRoaXN9O3JldHVybiBzYXAudWkuY29yZS50bXBsLkRPTUF0dHJpYnV0ZX0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLnV0aWwuRXhwb3J0Q2VsbCcpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLnV0aWwuRXhwb3J0Q2VsbCcpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL3V0aWwvRXhwb3J0Q2VsbCIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ3NhcC91aS9jb3JlL0VsZW1lbnQnXSxmdW5jdGlvbihxLEUpeyd1c2Ugc3RyaWN0Jzt2YXIgYT1FLmV4dGVuZCgnc2FwLnVpLmNvcmUudXRpbC5FeHBvcnRDZWxsJyx7bWV0YWRhdGE6e3Byb3BlcnRpZXM6e2NvbnRlbnQ6J3N0cmluZyd9fX0pO3JldHVybiBhfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUudXRpbC5FeHBvcnRDb2x1bW4nKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS51dGlsLkV4cG9ydENvbHVtbicpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL3V0aWwvRXhwb3J0Q29sdW1uIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL2Jhc2UvTWFuYWdlZE9iamVjdCcsJy4vRXhwb3J0Q2VsbCddLGZ1bmN0aW9uKHEsTSxFKXsndXNlIHN0cmljdCc7dmFyIGE9TS5leHRlbmQoInNhcC51aS5jb3JlLnV0aWwuRXhwb3J0Q29sdW1uIix7bWV0YWRhdGE6e3Byb3BlcnRpZXM6e25hbWU6InN0cmluZyJ9LGFnZ3JlZ2F0aW9uczp7dGVtcGxhdGU6e3R5cGU6InNhcC51aS5jb3JlLnV0aWwuRXhwb3J0Q2VsbCIsbXVsdGlwbGU6ZmFsc2V9fX19KTtyZXR1cm4gYX0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLnV0aWwuRXhwb3J0Um93Jykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUudXRpbC5FeHBvcnRSb3cnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS91dGlsL0V4cG9ydFJvdyIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ3NhcC91aS9iYXNlL01hbmFnZWRPYmplY3QnLCcuL0V4cG9ydENlbGwnXSxmdW5jdGlvbihxLE0sRSl7J3VzZSBzdHJpY3QnO3ZhciBhPU0uZXh0ZW5kKCJzYXAudWkuY29yZS51dGlsLkV4cG9ydFJvdyIse21ldGFkYXRhOnthZ2dyZWdhdGlvbnM6e2NlbGxzOnt0eXBlOiJzYXAudWkuY29yZS51dGlsLkV4cG9ydENlbGwiLG11bHRpcGxlOnRydWV9fX19KTtyZXR1cm4gYX0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLkN1c3RvbURhdGEnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS5DdXN0b21EYXRhJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvQ3VzdG9tRGF0YSIsWycuL2xpYnJhcnknLCcuL0VsZW1lbnQnXSxmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0IjtzYXAudWkuY29yZS5FbGVtZW50LmV4dGVuZCgic2FwLnVpLmNvcmUuQ3VzdG9tRGF0YSIse21ldGFkYXRhOntsaWJyYXJ5OiJzYXAudWkuY29yZSIscHJvcGVydGllczp7ImtleSI6e3R5cGU6InN0cmluZyIsZ3JvdXA6IkRhdGEiLGRlZmF1bHRWYWx1ZTpudWxsfSwidmFsdWUiOnt0eXBlOiJhbnkiLGdyb3VwOiJEYXRhIixkZWZhdWx0VmFsdWU6bnVsbH0sIndyaXRlVG9Eb20iOnt0eXBlOiJib29sZWFuIixncm91cDoiRGF0YSIsZGVmYXVsdFZhbHVlOmZhbHNlfX19fSk7c2FwLnVpLmNvcmUuQ3VzdG9tRGF0YS5wcm90b3R5cGUuc2V0VmFsdWU9ZnVuY3Rpb24odil7dGhpcy5zZXRQcm9wZXJ0eSgidmFsdWUiLHYsdHJ1ZSk7dmFyIGM9dGhpcy5nZXRQYXJlbnQoKTtpZihjJiZjLmdldERvbVJlZigpJiZ0aGlzLmdldFdyaXRlVG9Eb20oKSl7dmFyIGs9dGhpcy5nZXRLZXkoKTtpZih0eXBlb2Ygdj09PSJzdHJpbmciKXtpZigoc2FwLnVpLmNvcmUuSUQuaXNWYWxpZChrKSkmJihrLmluZGV4T2YoIjoiKT09LTEpJiYoay5pbmRleE9mKCJzYXAtdWkiKSE9PTApKXtjLiQoKS5hdHRyKCJkYXRhLSIrayx2KX1lbHNle2pRdWVyeS5zYXAubG9nLmVycm9yKCJDdXN0b21EYXRhIHdpdGgga2V5ICIraysiIHNob3VsZCBiZSB3cml0dGVuIHRvIEhUTUwgb2YgIitjKyIgYnV0IHRoZSBrZXkgaXMgbm90IHZhbGlkIChtdXN0IGJlIGEgdmFsaWQgc2FwLnVpLmNvcmUuSUQgd2l0aG91dCBhbnkgY29sb24gYW5kIG1heSBub3Qgc3RhcnQgd2l0aCAnc2FwLXVpJykuIil9fWVsc2V7alF1ZXJ5LnNhcC5sb2cuZXJyb3IoIkN1c3RvbURhdGEgd2l0aCBrZXkgIitrKyIgc2hvdWxkIGJlIHdyaXR0ZW4gdG8gSFRNTCBvZiAiK2MrIiBidXQgdGhlIHZhbHVlIGlzIG5vdCBhIHN0cmluZy4iKX19cmV0dXJuIHRoaXN9O3JldHVybiBzYXAudWkuY29yZS5DdXN0b21EYXRhfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUuRW5hYmxlZFByb3BhZ2F0b3InKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS5FbmFibGVkUHJvcGFnYXRvcicpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL0VuYWJsZWRQcm9wYWdhdG9yIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnLi9Db250cm9sJ10sZnVuY3Rpb24ocSxDKXsidXNlIHN0cmljdCI7dmFyIEU9ZnVuY3Rpb24oZCxsKXtpZighKHRoaXMgaW5zdGFuY2VvZiBDKSl7dGhyb3cgbmV3IEVycm9yKCJFbmFibGVkUHJvcGFnYXRvciBvbmx5IHN1cHBvcnRzIHN1YmNsYXNzZXMgb2YgQ29udHJvbCIpfWlmKGQ9PT11bmRlZmluZWQpe2Q9dHJ1ZX1mdW5jdGlvbiBmKGMpe3ZhciBwPWMuZ2V0UGFyZW50KCk7d2hpbGUocCYmIXAuZ2V0RW5hYmxlZCYmcC5nZXRQYXJlbnQpe3A9cC5nZXRQYXJlbnQoKX1yZXR1cm4gcH1pZih0aGlzLmdldEVuYWJsZWQ9PT11bmRlZmluZWQpe3RoaXMuZ2V0RW5hYmxlZD1mdW5jdGlvbigpe3ZhciBwPWYodGhpcyk7cmV0dXJuKHAmJnAuZ2V0RW5hYmxlZCYmIXAuZ2V0RW5hYmxlZCgpKT9mYWxzZTp0aGlzLmdldFByb3BlcnR5KCJlbmFibGVkIil9O2lmKGwpe3RoaXMuZ2V0TWV0YWRhdGEoKS5hZGRQcm9wZXJ0eSgiRW5hYmxlZCIse3R5cGU6ImJvb2xlYW4iLGdyb3VwOiJCZWhhdmlvciIsZGVmYXVsdFZhbHVlOiEhZH0pfXRoaXMuZ2V0TWV0YWRhdGEoKS5hZGRQcm9wZXJ0eSgiZW5hYmxlZCIse3R5cGU6ImJvb2xlYW4iLGdyb3VwOiJCZWhhdmlvciIsZGVmYXVsdFZhbHVlOiEhZH0pO3RoaXMuZ2V0TWV0YWRhdGEoKS5hZGRQdWJsaWNNZXRob2RzKCdnZXRFbmFibGVkJyl9ZWxzZXt2YXIgbz10aGlzLmdldEVuYWJsZWQ7dGhpcy5nZXRFbmFibGVkPWZ1bmN0aW9uKCl7dmFyIHA9Zih0aGlzKTtyZXR1cm4ocCYmcC5nZXRFbmFibGVkJiYhcC5nZXRFbmFibGVkKCkpP2ZhbHNlOm8uYXBwbHkodGhpcyl9fWlmKHRoaXMuc2V0RW5hYmxlZD09PXVuZGVmaW5lZCl7dGhpcy5zZXRFbmFibGVkPWZ1bmN0aW9uKGUpe3RoaXMuc2V0UHJvcGVydHkoImVuYWJsZWQiLGUpfTt0aGlzLmdldE1ldGFkYXRhKCkuYWRkUHVibGljTWV0aG9kcygnc2V0RW5hYmxlZCcpfX07cmV0dXJuIEV9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS5IVE1MJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUuSFRNTCcpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL0hUTUwiLFsnLi9saWJyYXJ5JywnLi9Db250cm9sJ10sZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7c2FwLnVpLmNvcmUuQ29udHJvbC5leHRlbmQoInNhcC51aS5jb3JlLkhUTUwiLHttZXRhZGF0YTp7bGlicmFyeToic2FwLnVpLmNvcmUiLHByb3BlcnRpZXM6eyJjb250ZW50Ijp7dHlwZToic3RyaW5nIixncm91cDoiTWlzYyIsZGVmYXVsdFZhbHVlOm51bGx9LCJwcmVmZXJET00iOnt0eXBlOiJib29sZWFuIixncm91cDoiTWlzYyIsZGVmYXVsdFZhbHVlOnRydWV9LCJzYW5pdGl6ZUNvbnRlbnQiOnt0eXBlOiJib29sZWFuIixncm91cDoiTWlzYyIsZGVmYXVsdFZhbHVlOmZhbHNlfX0sZXZlbnRzOnsiYWZ0ZXJSZW5kZXJpbmciOnt9fX19KTtzYXAudWkuY29yZS5IVE1MLk1fRVZFTlRTPXsnYWZ0ZXJSZW5kZXJpbmcnOidhZnRlclJlbmRlcmluZyd9O3NhcC51aS5jb3JlLkhUTUwucHJvdG90eXBlLmdldERvbVJlZj1mdW5jdGlvbihzKXt2YXIgaT1zP3RoaXMuZ2V0SWQoKSsiLSIrczp0aGlzLmdldElkKCk7cmV0dXJuIGpRdWVyeS5zYXAuZG9tQnlJZCgic2FwLXVpLWR1bW15LSIraSl8fGpRdWVyeS5zYXAuZG9tQnlJZChpKX07c2FwLnVpLmNvcmUuSFRNTC5wcm90b3R5cGUuc2V0Q29udGVudD1mdW5jdGlvbihjKXtmdW5jdGlvbiBwKHMpe2lmKGpRdWVyeS5wYXJzZUhUTUwpe3ZhciBhPWpRdWVyeS5wYXJzZUhUTUwocyk7aWYoYSl7dmFyIGI9MCxlPWEubGVuZ3RoO3doaWxlKGI8ZSYmYVtiXS5ub2RlVHlwZSE9MSl7YisrfXdoaWxlKGI8ZSYmYVtlLTFdLm5vZGVUeXBlIT0xKXtlLS19aWYoYj4wfHxlPGEubGVuZ3RoKXthPWEuc2xpY2UoYixlKX1yZXR1cm4galF1ZXJ5KGEpfX1yZXR1cm4galF1ZXJ5KHMpfWlmKHRoaXMuZ2V0U2FuaXRpemVDb250ZW50KCkpe2M9alF1ZXJ5LnNhcC5fc2FuaXRpemVIVE1MKGMpfXRoaXMuc2V0UHJvcGVydHkoImNvbnRlbnQiLGMsdHJ1ZSk7aWYodGhpcy5nZXREb21SZWYoKSl7dmFyICQ9cCh0aGlzLmdldENvbnRlbnQoKSk7alF1ZXJ5KHRoaXMuZ2V0RG9tUmVmKCkpLnJlcGxhY2VXaXRoKCQpO3RoaXMuX3Bvc3Rwcm9jZXNzTmV3Q29udGVudCgkKX1lbHNle3RoaXMuaW52YWxpZGF0ZSgpfXJldHVybiB0aGlzfTtzYXAudWkuY29yZS5IVE1MLnByb3RvdHlwZS5vbkJlZm9yZVJlbmRlcmluZz1mdW5jdGlvbigpe2lmKHRoaXMuZ2V0UHJlZmVyRE9NKCkmJnRoaXMuZ2V0RG9tUmVmKCkmJiFzYXAudWkuY29yZS5SZW5kZXJNYW5hZ2VyLmlzUHJlc2VydmVkQ29udGVudCh0aGlzLmdldERvbVJlZigpKSl7c2FwLnVpLmNvcmUuUmVuZGVyTWFuYWdlci5wcmVzZXJ2ZUNvbnRlbnQodGhpcy5nZXREb21SZWYoKSx0cnVlLGZhbHNlKX19O3NhcC51aS5jb3JlLkhUTUwucHJvdG90eXBlLm9uQWZ0ZXJSZW5kZXJpbmc9ZnVuY3Rpb24oKXt2YXIgJD1qUXVlcnkoalF1ZXJ5LnNhcC5kb21CeUlkKCJzYXAtdWktZHVtbXktIit0aGlzLmdldElkKCkpKTt2YXIgYT1zYXAudWkuY29yZS5SZW5kZXJNYW5hZ2VyLmZpbmRQcmVzZXJ2ZWRDb250ZW50KHRoaXMuZ2V0SWQoKSk7dmFyIGI9dW5kZWZpbmVkO3ZhciBpPWZhbHNlO2lmKCghdGhpcy5nZXRQcmVmZXJET00oKXx8YS5zaXplKCk9PTApKXthLnJlbW92ZSgpO2I9bmV3IGpRdWVyeSh0aGlzLmdldENvbnRlbnQoKSk7JC5yZXBsYWNlV2l0aChiKX1lbHNlIGlmKGEuc2l6ZSgpPjApeyQucmVwbGFjZVdpdGgoYSk7Yj1hO2k9dHJ1ZX1lbHNleyQucmVtb3ZlKCl9dGhpcy5fcG9zdHByb2Nlc3NOZXdDb250ZW50KGIpO3RoaXMuZmlyZUFmdGVyUmVuZGVyaW5nKHtpc1ByZXNlcnZlZERPTTppfSl9O3NhcC51aS5jb3JlLkhUTUwucHJvdG90eXBlLl9wb3N0cHJvY2Vzc05ld0NvbnRlbnQ9ZnVuY3Rpb24oJCl7aWYoJCYmJC5zaXplKCk+MCl7aWYoJC5sZW5ndGg+MSl7alF1ZXJ5LnNhcC5sb2cud2FybmluZygiW1Vuc3VwcG9ydGVkIEZlYXR1cmVdOiAiK3RoaXMrIiBoYXMgcmVuZGVyZWQgIiskLmxlbmd0aCsiIHJvb3Qgbm9kZXMhIil9ZWxzZXt2YXIgYz0kLmF0dHIoImlkIik7aWYoYyYmYyE9dGhpcy5nZXRJZCgpKXtqUXVlcnkuc2FwLmxvZy53YXJuaW5nKCJbVW5zdXBwb3J0ZWQgRmVhdHVyZV06IElkIG9mIEhUTUwgQ29udHJvbCAnIit0aGlzLmdldElkKCkrIicgZG9lcyBub3QgbWF0Y2ggd2l0aCBjb250ZW50IGlkICciK2MrIichIil9fXNhcC51aS5jb3JlLlJlbmRlck1hbmFnZXIubWFya1ByZXNlcnZhYmxlQ29udGVudCgkLHRoaXMuZ2V0SWQoKSk7aWYoJC5maW5kKCIjIit0aGlzLmdldElkKCkucmVwbGFjZSgvKDp8XC4pL2csJ1xcJDEnKSkubGVuZ3RoPT09MCl7JC5maWx0ZXIoIjpub3QoW2lkXSkiKS5maXJzdCgpLmF0dHIoImlkIix0aGlzLmdldElkKCkpfX1lbHNle2pRdWVyeS5zYXAubG9nLmRlYnVnKCIiK3RoaXMrIiBpcyBlbXB0eSBhZnRlciByZW5kZXJpbmcsIHNldHRpbmcgYk91dHB1dCB0byBmYWxzZSIpO3RoaXMuYk91dHB1dD1mYWxzZX19O3NhcC51aS5jb3JlLkhUTUwucHJvdG90eXBlLnNldERPTUNvbnRlbnQ9ZnVuY3Rpb24oZCl7dmFyICQ9alF1ZXJ5KGQpO2lmKHRoaXMuZ2V0RG9tUmVmKCkpe2pRdWVyeSh0aGlzLmdldERvbVJlZigpKS5yZXBsYWNlV2l0aCgkKTt0aGlzLl9wb3N0cHJvY2Vzc05ld0NvbnRlbnQoJCl9ZWxzZXskLmFwcGVuZFRvKHNhcC51aS5jb3JlLlJlbmRlck1hbmFnZXIuZ2V0UHJlc2VydmVBcmVhUmVmKCkpO2lmKHRoaXMuZ2V0VUlBcmVhKCkpe3RoaXMuZ2V0VUlBcmVhKCkuaW52YWxpZGF0ZSgpfXRoaXMuX3Bvc3Rwcm9jZXNzTmV3Q29udGVudCgkKX1yZXR1cm4gdGhpc307c2FwLnVpLmNvcmUuSFRNTC5wcm90b3R5cGUuc2V0VG9vbHRpcD1mdW5jdGlvbih0KXtqUXVlcnkuc2FwLmxvZy53YXJuaW5nKCJUaGUgc2FwLnVpLmNvcmUuSFRNTCBjb250cm9sIGRvZXNuJ3Qgc3VwcG9ydCB0b29sdGlwcy4gQWRkIHRoZSB0b29sdGlwIHRvIHRoZSBIVE1MIGNvbnRlbnQgaW5zdGVhZC4iKTtyZXR1cm4gc2FwLnVpLmNvcmUuQ29udHJvbC5wcm90b3R5cGUuc2V0VG9vbHRpcC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9O3JldHVybiBzYXAudWkuY29yZS5IVE1MfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUuSWNvbicpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLkljb24nKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9JY29uIixbJy4vbGlicmFyeScsJy4vQ29udHJvbCcsJy4vSWNvblBvb2wnXSxmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0IjtzYXAudWkuY29yZS5Db250cm9sLmV4dGVuZCgic2FwLnVpLmNvcmUuSWNvbiIse21ldGFkYXRhOntsaWJyYXJ5OiJzYXAudWkuY29yZSIscHJvcGVydGllczp7InNyYyI6e3R5cGU6InNhcC51aS5jb3JlLlVSSSIsZ3JvdXA6IkRhdGEiLGRlZmF1bHRWYWx1ZTpudWxsfSwic2l6ZSI6e3R5cGU6InNhcC51aS5jb3JlLkNTU1NpemUiLGdyb3VwOiJEaW1lbnNpb24iLGRlZmF1bHRWYWx1ZTpudWxsfSwiY29sb3IiOnt0eXBlOiJzYXAudWkuY29yZS5DU1NDb2xvciIsZ3JvdXA6IkFwcGVhcmFuY2UiLGRlZmF1bHRWYWx1ZTpudWxsfSwiaG92ZXJDb2xvciI6e3R5cGU6InNhcC51aS5jb3JlLkNTU0NvbG9yIixncm91cDoiQXBwZWFyYW5jZSIsZGVmYXVsdFZhbHVlOm51bGx9LCJhY3RpdmVDb2xvciI6e3R5cGU6InNhcC51aS5jb3JlLkNTU0NvbG9yIixncm91cDoiQXBwZWFyYW5jZSIsZGVmYXVsdFZhbHVlOm51bGx9LCJ3aWR0aCI6e3R5cGU6InNhcC51aS5jb3JlLkNTU1NpemUiLGdyb3VwOiJEaW1lbnNpb24iLGRlZmF1bHRWYWx1ZTpudWxsfSwiaGVpZ2h0Ijp7dHlwZToic2FwLnVpLmNvcmUuQ1NTU2l6ZSIsZ3JvdXA6IkRpbWVuc2lvbiIsZGVmYXVsdFZhbHVlOm51bGx9LCJiYWNrZ3JvdW5kQ29sb3IiOnt0eXBlOiJzYXAudWkuY29yZS5DU1NDb2xvciIsZ3JvdXA6IkFwcGVhcmFuY2UiLGRlZmF1bHRWYWx1ZTpudWxsfSwiaG92ZXJCYWNrZ3JvdW5kQ29sb3IiOnt0eXBlOiJzYXAudWkuY29yZS5DU1NDb2xvciIsZ3JvdXA6IkFwcGVhcmFuY2UiLGRlZmF1bHRWYWx1ZTpudWxsfSwiYWN0aXZlQmFja2dyb3VuZENvbG9yIjp7dHlwZToic2FwLnVpLmNvcmUuQ1NTQ29sb3IiLGdyb3VwOiJBcHBlYXJhbmNlIixkZWZhdWx0VmFsdWU6bnVsbH0sInZpc2libGUiOnt0eXBlOiJib29sZWFuIixncm91cDoiQXBwZWFyYW5jZSIsZGVmYXVsdFZhbHVlOnRydWV9LCJkZWNvcmF0aXZlIjp7dHlwZToiYm9vbGVhbiIsZ3JvdXA6IkFjY2Vzc2liaWxpdHkiLGRlZmF1bHRWYWx1ZTp0cnVlfX0sZXZlbnRzOnsicHJlc3MiOnt9fX19KTtzYXAudWkuY29yZS5JY29uLk1fRVZFTlRTPXsncHJlc3MnOidwcmVzcyd9O3NhcC51aS5jb3JlLkljb24ucHJvdG90eXBlLm9uQWZ0ZXJSZW5kZXJpbmc9ZnVuY3Rpb24oKXt2YXIgaT10aGlzLiQoKTtpZih0aGlzLmhhc0xpc3RlbmVycygicHJlc3MiKSl7aS5jc3MoImN1cnNvciIsInBvaW50ZXIiKX1pZihpLmNzcygiY3Vyc29yIik9PT0iYXV0byIpe2kuY3NzKCJjdXJzb3IiLCJkZWZhdWx0Iil9fTtzYXAudWkuY29yZS5JY29uLnByb3RvdHlwZS5vbm1vdXNlZG93bj1mdW5jdGlvbihlKXt0aGlzLl9iUHJlc3NGaXJlZD1mYWxzZTtpZih0aGlzLmhhc0xpc3RlbmVycygicHJlc3MiKXx8dGhpcy5oYXNMaXN0ZW5lcnMoInRhcCIpKXtlLnNldE1hcmtlZCgpfXZhciBhPXRoaXMuZ2V0QWN0aXZlQ29sb3IoKSxBPXRoaXMuZ2V0QWN0aXZlQmFja2dyb3VuZENvbG9yKCksaTtpZihhfHxBKXtpZighZS50YXJnZXRUb3VjaGVzfHwoZS50YXJnZXRUb3VjaGVzJiZlLnRhcmdldFRvdWNoZXMubGVuZ3RoPT09MSkpe2k9dGhpcy4kKCk7aS5hZGRDbGFzcygic2FwVWlJY29uQWN0aXZlIik7aWYoYSl7aS5jc3MoImNvbG9yIixhKX1pZihBKXtpLmNzcygiYmFja2dyb3VuZC1jb2xvciIsQSl9fX19O3NhcC51aS5jb3JlLkljb24ucHJvdG90eXBlLm9udG91Y2hzdGFydD1zYXAudWkuY29yZS5JY29uLnByb3RvdHlwZS5vbm1vdXNlZG93bjtzYXAudWkuY29yZS5JY29uLnByb3RvdHlwZS5vbm1vdXNldXA9ZnVuY3Rpb24oZSl7aWYoIWUudGFyZ2V0VG91Y2hlc3x8KGUudGFyZ2V0VG91Y2hlcyYmZS50YXJnZXRUb3VjaGVzLmxlbmd0aD09PTApKXt0aGlzLiQoKS5yZW1vdmVDbGFzcygic2FwVWlJY29uQWN0aXZlIik7dGhpcy5fcmVzdG9yZUNvbG9ycygpfX07c2FwLnVpLmNvcmUuSWNvbi5wcm90b3R5cGUub250b3VjaGVuZD1zYXAudWkuY29yZS5JY29uLnByb3RvdHlwZS5vbm1vdXNldXA7c2FwLnVpLmNvcmUuSWNvbi5wcm90b3R5cGUub250b3VjaGNhbmNlbD1zYXAudWkuY29yZS5JY29uLnByb3RvdHlwZS5vbm1vdXNldXA7c2FwLnVpLmNvcmUuSWNvbi5wcm90b3R5cGUub25tb3VzZW92ZXI9ZnVuY3Rpb24oKXt2YXIgaD10aGlzLmdldEhvdmVyQ29sb3IoKSxIPXRoaXMuZ2V0SG92ZXJCYWNrZ3JvdW5kQ29sb3IoKSxpPXRoaXMuJCgpO2lmKGgpe2kuY3NzKCJjb2xvciIsaCl9aWYoSCl7aS5jc3MoImJhY2tncm91bmQtY29sb3IiLEgpfX07c2FwLnVpLmNvcmUuSWNvbi5wcm90b3R5cGUub25tb3VzZW91dD1mdW5jdGlvbigpe3RoaXMuX3Jlc3RvcmVDb2xvcnMoKX07c2FwLnVpLmNvcmUuSWNvbi5wcm90b3R5cGUub25jbGljaz1mdW5jdGlvbigpe2lmKHRoaXMuX2JQcmVzc0ZpcmVkKXtyZXR1cm59dGhpcy5maXJlUHJlc3Moe30pO3RoaXMuX2JQcmVzc0ZpcmVkPXRydWV9O3NhcC51aS5jb3JlLkljb24ucHJvdG90eXBlLm9udGFwPXNhcC51aS5jb3JlLkljb24ucHJvdG90eXBlLm9uY2xpY2s7c2FwLnVpLmNvcmUuSWNvbi5wcm90b3R5cGUub25rZXlkb3duPWZ1bmN0aW9uKGUpe2lmKGUud2hpY2g9PT1qUXVlcnkuc2FwLktleUNvZGVzLlNQQUNFfHxlLndoaWNoPT09alF1ZXJ5LnNhcC5LZXlDb2Rlcy5FTlRFUil7ZS5wcmV2ZW50RGVmYXVsdCgpO3ZhciBpPXRoaXMuJCgpLGE9dGhpcy5nZXRBY3RpdmVDb2xvcigpLEE9dGhpcy5nZXRBY3RpdmVCYWNrZ3JvdW5kQ29sb3IoKTtpLmFkZENsYXNzKCJzYXBVaUljb25BY3RpdmUiKTtpZihhKXtpLmNzcygiY29sb3IiLGEpfWlmKEEpe2kuY3NzKCJiYWNrZ3JvdW5kLWNvbG9yIixBKX19fTtzYXAudWkuY29yZS5JY29uLnByb3RvdHlwZS5vbmtleXVwPWZ1bmN0aW9uKGUpe2lmKGUud2hpY2g9PT1qUXVlcnkuc2FwLktleUNvZGVzLlNQQUNFfHxlLndoaWNoPT09alF1ZXJ5LnNhcC5LZXlDb2Rlcy5FTlRFUil7dGhpcy4kKCkucmVtb3ZlQ2xhc3MoInNhcFVpSWNvbkFjdGl2ZSIpO3RoaXMuX3Jlc3RvcmVDb2xvcnMoKTt0aGlzLmZpcmVQcmVzcyh7fSl9fTtzYXAudWkuY29yZS5JY29uLnByb3RvdHlwZS5fcmVzdG9yZUNvbG9ycz1mdW5jdGlvbigpe3RoaXMuJCgpLmNzcyh7ImNvbG9yIjp0aGlzLmdldENvbG9yKCl8fCIiLCJiYWNrZ3JvdW5kLWNvbG9yIjp0aGlzLmdldEJhY2tncm91bmRDb2xvcigpfHwiIn0pfTtzYXAudWkuY29yZS5JY29uLnByb3RvdHlwZS5zZXRTcmM9ZnVuY3Rpb24ocyl7dmFyIGk9c2FwLnVpLmNvcmUuSWNvblBvb2wuZ2V0SWNvbkluZm8ocyksdD1zYXAudWkuRGV2aWNlLmJyb3dzZXIuaW50ZXJuZXRfZXhwbG9yZXImJnNhcC51aS5EZXZpY2UuYnJvd3Nlci52ZXJzaW9uPDksST10aGlzLiQoKTtpZihpKXtJLmNzcygiZm9udC1mYW1pbHkiLGkuZm9udEZhbWlseSk7aWYodCl7SS50ZXh0KGkuY29udGVudCl9ZWxzZXtJLmF0dHIoImRhdGEtc2FwLXVpLWljb24tY29udGVudCIsaS5jb250ZW50KX1JLnRvZ2dsZUNsYXNzKCJzYXBVaUljb25NaXJyb3JJblJUTCIsIWkuc3VwcHJlc3NNaXJyb3JpbmcpfXRoaXMuc2V0UHJvcGVydHkoInNyYyIscywhIWkpO3JldHVybiB0aGlzfTtzYXAudWkuY29yZS5JY29uLnByb3RvdHlwZS5zZXRXaWR0aD1mdW5jdGlvbih3KXt0aGlzLnNldFByb3BlcnR5KCJ3aWR0aCIsdyx0cnVlKTt0aGlzLiQoKS5jc3MoIndpZHRoIix3KTtyZXR1cm4gdGhpc307c2FwLnVpLmNvcmUuSWNvbi5wcm90b3R5cGUuc2V0SGVpZ2h0PWZ1bmN0aW9uKGgpe3RoaXMuc2V0UHJvcGVydHkoImhlaWdodCIsaCx0cnVlKTt0aGlzLiQoKS5jc3MoeyJoZWlnaHQiOmgsImxpbmUtaGVpZ2h0IjpofSk7cmV0dXJuIHRoaXN9O3NhcC51aS5jb3JlLkljb24ucHJvdG90eXBlLnNldFNpemU9ZnVuY3Rpb24ocyl7dGhpcy5zZXRQcm9wZXJ0eSgic2l6ZSIscyx0cnVlKTt0aGlzLiQoKS5jc3MoImZvbnQtc2l6ZSIscyk7cmV0dXJuIHRoaXN9O3NhcC51aS5jb3JlLkljb24ucHJvdG90eXBlLnNldENvbG9yPWZ1bmN0aW9uKGMpe3RoaXMuc2V0UHJvcGVydHkoImNvbG9yIixjLHRydWUpO3RoaXMuJCgpLmNzcygiY29sb3IiLGMpO3JldHVybiB0aGlzfTtzYXAudWkuY29yZS5JY29uLnByb3RvdHlwZS5zZXRBY3RpdmVDb2xvcj1mdW5jdGlvbihjKXtyZXR1cm4gdGhpcy5zZXRQcm9wZXJ0eSgiYWN0aXZlQ29sb3IiLGMsdHJ1ZSl9O3NhcC51aS5jb3JlLkljb24ucHJvdG90eXBlLnNldEhvdmVyQ29sb3I9ZnVuY3Rpb24oYyl7cmV0dXJuIHRoaXMuc2V0UHJvcGVydHkoImhvdmVyQ29sb3IiLGMsdHJ1ZSl9O3NhcC51aS5jb3JlLkljb24ucHJvdG90eXBlLnNldEJhY2tncm91bmRDb2xvcj1mdW5jdGlvbihjKXt0aGlzLnNldFByb3BlcnR5KCJiYWNrZ3JvdW5kQ29sb3IiLGMsdHJ1ZSk7dGhpcy4kKCkuY3NzKCJiYWNrZ3JvdW5kLWNvbG9yIixjKTtyZXR1cm4gdGhpc307c2FwLnVpLmNvcmUuSWNvbi5wcm90b3R5cGUuc2V0QWN0aXZlQmFja2dyb3VuZENvbG9yPWZ1bmN0aW9uKGMpe3JldHVybiB0aGlzLnNldFByb3BlcnR5KCJhY3RpdmVCYWNrZ3JvdW5kQ29sb3IiLGMsdHJ1ZSl9O3NhcC51aS5jb3JlLkljb24ucHJvdG90eXBlLnNldEhvdmVyQmFja2dyb3VuZENvbG9yPWZ1bmN0aW9uKGMpe3JldHVybiB0aGlzLnNldFByb3BlcnR5KCJob3ZlckJhY2tncm91bmRDb2xvciIsYyx0cnVlKX07c2FwLnVpLmNvcmUuSWNvbi5wcm90b3R5cGUuYXR0YWNoUHJlc3M9ZnVuY3Rpb24oKXt2YXIgbT1BcnJheS5wcm90b3R5cGUuc2xpY2UuYXBwbHkoYXJndW1lbnRzKTttLnNwbGljZSgwLDAsInByZXNzIik7dGhpcy4kKCkuY3NzKCJjdXJzb3IiLCJwb2ludGVyIik7cmV0dXJuIHNhcC51aS5jb3JlLkNvbnRyb2wucHJvdG90eXBlLmF0dGFjaEV2ZW50LmFwcGx5KHRoaXMsbSl9O3NhcC51aS5jb3JlLkljb24ucHJvdG90eXBlLmRldGFjaFByZXNzPWZ1bmN0aW9uKCl7dmFyIG09QXJyYXkucHJvdG90eXBlLnNsaWNlLmFwcGx5KGFyZ3VtZW50cyk7bS5zcGxpY2UoMCwwLCJwcmVzcyIpO3NhcC51aS5jb3JlLkNvbnRyb2wucHJvdG90eXBlLmRldGFjaEV2ZW50LmFwcGx5KHRoaXMsbSk7aWYoIXRoaXMuaGFzTGlzdGVuZXJzKCJwcmVzcyIpKXt0aGlzLiQoKS5jc3MoImN1cnNvciIsImRlZmF1bHQiKX1yZXR1cm4gdGhpc307cmV0dXJuIHNhcC51aS5jb3JlLkljb259LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS5JdGVtJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUuSXRlbScpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL0l0ZW0iLFsnLi9saWJyYXJ5JywnLi9FbGVtZW50J10sZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7c2FwLnVpLmNvcmUuRWxlbWVudC5leHRlbmQoInNhcC51aS5jb3JlLkl0ZW0iLHttZXRhZGF0YTp7bGlicmFyeToic2FwLnVpLmNvcmUiLHByb3BlcnRpZXM6eyJ0ZXh0Ijp7dHlwZToic3RyaW5nIixncm91cDoiTWlzYyIsZGVmYXVsdFZhbHVlOiIifSwiZW5hYmxlZCI6e3R5cGU6ImJvb2xlYW4iLGdyb3VwOiJNaXNjIixkZWZhdWx0VmFsdWU6dHJ1ZX0sInRleHREaXJlY3Rpb24iOnt0eXBlOiJzYXAudWkuY29yZS5UZXh0RGlyZWN0aW9uIixncm91cDoiTWlzYyIsZGVmYXVsdFZhbHVlOnNhcC51aS5jb3JlLlRleHREaXJlY3Rpb24uSW5oZXJpdH0sImtleSI6e3R5cGU6InN0cmluZyIsZ3JvdXA6IkRhdGEiLGRlZmF1bHRWYWx1ZTpudWxsfX19fSk7cmV0dXJuIHNhcC51aS5jb3JlLkl0ZW19LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS5MYXlvdXREYXRhJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUuTGF5b3V0RGF0YScpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL0xheW91dERhdGEiLFsnLi9saWJyYXJ5JywnLi9FbGVtZW50J10sZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7c2FwLnVpLmNvcmUuRWxlbWVudC5leHRlbmQoInNhcC51aS5jb3JlLkxheW91dERhdGEiLHttZXRhZGF0YTp7ImFic3RyYWN0Ijp0cnVlLGxpYnJhcnk6InNhcC51aS5jb3JlIn19KTtzYXAudWkuY29yZS5MYXlvdXREYXRhLnByb3RvdHlwZS5pbnZhbGlkYXRlPWZ1bmN0aW9uKCl7dmFyIHA9dGhpcy5nZXRQYXJlbnQoKTtpZihwJiZwLmdldE1ldGFkYXRhKCkuZ2V0TmFtZSgpPT0ic2FwLnVpLmNvcmUuVmFyaWFudExheW91dERhdGEiKXtwPXAuZ2V0UGFyZW50KCl9aWYocCl7dmFyIGw9cC5nZXRQYXJlbnQoKTtpZihsKXt2YXIgZT1qUXVlcnkuRXZlbnQoIkxheW91dERhdGFDaGFuZ2UiKTtlLnNyY0NvbnRyb2w9cDtsLl9oYW5kbGVFdmVudChlKX19fTtzYXAudWkuY29yZS5MYXlvdXREYXRhLnByb3RvdHlwZS5zZXRMYXlvdXREYXRhPWZ1bmN0aW9uKGwpe3JldHVybiB0aGlzfTtyZXR1cm4gc2FwLnVpLmNvcmUuTGF5b3V0RGF0YX0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLkxpc3RJdGVtJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUuTGlzdEl0ZW0nKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9MaXN0SXRlbSIsWycuL2xpYnJhcnknLCcuL0l0ZW0nXSxmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0IjtzYXAudWkuY29yZS5JdGVtLmV4dGVuZCgic2FwLnVpLmNvcmUuTGlzdEl0ZW0iLHttZXRhZGF0YTp7bGlicmFyeToic2FwLnVpLmNvcmUiLHByb3BlcnRpZXM6eyJpY29uIjp7dHlwZToic3RyaW5nIixncm91cDoiQXBwZWFyYW5jZSIsZGVmYXVsdFZhbHVlOm51bGx9LCJhZGRpdGlvbmFsVGV4dCI6e3R5cGU6InN0cmluZyIsZ3JvdXA6IkRhdGEiLGRlZmF1bHRWYWx1ZTpudWxsfX19fSk7cmV0dXJuIHNhcC51aS5jb3JlLkxpc3RJdGVtfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUuTG9jYWxCdXN5SW5kaWNhdG9yJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUuTG9jYWxCdXN5SW5kaWNhdG9yJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvTG9jYWxCdXN5SW5kaWNhdG9yIixbJy4vbGlicmFyeScsJy4vQ29udHJvbCcsJy4vdGhlbWluZy9QYXJhbWV0ZXJzJywnLi9Mb2NhbEJ1c3lJbmRpY2F0b3JSZW5kZXJlciddLGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO3NhcC51aS5jb3JlLkNvbnRyb2wuZXh0ZW5kKCJzYXAudWkuY29yZS5Mb2NhbEJ1c3lJbmRpY2F0b3IiLHttZXRhZGF0YTp7ZGVwcmVjYXRlZDp0cnVlLGxpYnJhcnk6InNhcC51aS5jb3JlIixwcm9wZXJ0aWVzOnsid2lkdGgiOnt0eXBlOiJzYXAudWkuY29yZS5DU1NTaXplIixncm91cDoiTWlzYyIsZGVmYXVsdFZhbHVlOicxMDBweCd9LCJoZWlnaHQiOnt0eXBlOiJzYXAudWkuY29yZS5DU1NTaXplIixncm91cDoiTWlzYyIsZGVmYXVsdFZhbHVlOicxMDBweCd9fX19KTsoZnVuY3Rpb24oKXtzYXAudWkuY29yZS5Mb2NhbEJ1c3lJbmRpY2F0b3IucHJvdG90eXBlLmluaXQ9ZnVuY3Rpb24oKXt2YXIgcj0ic2FwLnVpLmNvcmUuTG9jYWxCdXN5SW5kaWNhdG9yOiI7dmFyIHA9InNhcFVpTG9jYWxCdXN5SW5kaWNhdG9yQm94U2l6ZSI7cD1zYXAudWkuY29yZS50aGVtaW5nLlBhcmFtZXRlcnMuZ2V0KHIrcCk7dGhpcy5faUJveFNpemU9ODtwPSJzYXBVaUxvY2FsQnVzeUluZGljYXRvckJveENvbG9yIjt0aGlzLl9zQm94Q29sb3I9c2FwLnVpLmNvcmUudGhlbWluZy5QYXJhbWV0ZXJzLmdldChyK3ApO3A9InNhcFVpTG9jYWxCdXN5SW5kaWNhdG9yQm94Q29sb3JBY3RpdmUiO3RoaXMuX3NCb3hDb2xvckFjdGl2ZT1zYXAudWkuY29yZS50aGVtaW5nLlBhcmFtZXRlcnMuZ2V0KHIrcCk7dGhpcy5fYW5pbWF0ZVByb3h5PWpRdWVyeS5wcm94eShhLHRoaXMpfTtzYXAudWkuY29yZS5Mb2NhbEJ1c3lJbmRpY2F0b3IucHJvdG90eXBlLmV4aXQ9ZnVuY3Rpb24oKXtqUXVlcnkuc2FwLmNsZWFyRGVsYXllZENhbGwodGhpcy5fZGVsYXllZENhbGxJZCk7ZGVsZXRlIHRoaXMuX2RlbGF5ZWRDYWxsSWR9O3NhcC51aS5jb3JlLkxvY2FsQnVzeUluZGljYXRvci5wcm90b3R5cGUub25UaGVtZUNoYW5nZWQ9ZnVuY3Rpb24oZSl7aWYodGhpcy5nZXREb21SZWYoKSl7dGhpcy5pbnZhbGlkYXRlKCl9fTtzYXAudWkuY29yZS5Mb2NhbEJ1c3lJbmRpY2F0b3IucHJvdG90eXBlLm9uQWZ0ZXJSZW5kZXJpbmc9ZnVuY3Rpb24oKXt2YXIgdz1wYXJzZUludCh0aGlzLmdldFdpZHRoKCksMTApO3ZhciBoPXBhcnNlSW50KHRoaXMuZ2V0SGVpZ2h0KCksMTApO3ZhciAkPXRoaXMuJCgpOyQuY3NzKCJ3aWR0aCIsdysicHgiKTskLmNzcygiaGVpZ2h0IixoKyJweCIpO3ZhciBiPXRoaXMuJCgiYW5pbWF0aW9uIik7dmFyIGw9TWF0aC5mbG9vcih3LzIpO2wtPU1hdGguZmxvb3IoKDUqdGhpcy5faUJveFNpemUpLzIpO3ZhciB0PU1hdGguZmxvb3IoaC8yKS1NYXRoLmZsb29yKHRoaXMuX2lCb3hTaXplLzIpO2IuY3NzKCJsZWZ0IixsKyJweCIpO2IuY3NzKCJ0b3AiLHQrInB4Iik7aWYoIXRoaXMuXyRsZWZ0KXt0aGlzLl8kbGVmdD10aGlzLiQoImxlZnRCb3giKX1pZighdGhpcy5fJG1pZGRsZSl7dGhpcy5fJG1pZGRsZT10aGlzLiQoIm1pZGRsZUJveCIpfWlmKCF0aGlzLl8kcmlnaHQpe3RoaXMuXyRyaWdodD10aGlzLiQoInJpZ2h0Qm94Iil9dGhpcy5fZGVsYXllZENhbGxJZD1qUXVlcnkuc2FwLmRlbGF5ZWRDYWxsKDAsdGhpcyx0aGlzLl9hbmltYXRlUHJveHkpfTt2YXIgYT1mdW5jdGlvbigpe2lmKHRoaXMuZ2V0RG9tUmVmKCkpe3ZhciB0PXRoaXM7dmFyICQsYixjO3ZhciBkPSIiLGU9IiI7aWYodC5fJGxlZnQpeyQ9dC5fJGxlZnR9ZWxzZXtyZXR1cm59aWYodC5fJG1pZGRsZSl7Yj10Ll8kbWlkZGxlfWVsc2V7cmV0dXJufWlmKHQuXyRyaWdodCl7Yz10Ll8kcmlnaHR9ZWxzZXtyZXR1cm59aWYodC5fc0JveENvbG9yKXtkPXQuX3NCb3hDb2xvcn1lbHNle3JldHVybn1pZih0Ll9zQm94Q29sb3JBY3RpdmUpe2U9dC5fc0JveENvbG9yQWN0aXZlfWVsc2V7cmV0dXJufSQuY3NzKCJiYWNrZ3JvdW5kLWNvbG9yIixlKTtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7JC5jc3MoImJhY2tncm91bmQtY29sb3IiLGQpO2IuY3NzKCJiYWNrZ3JvdW5kLWNvbG9yIixlKTtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Yi5jc3MoImJhY2tncm91bmQtY29sb3IiLGQpO2MuY3NzKCJiYWNrZ3JvdW5kLWNvbG9yIixlKTtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Yy5jc3MoImJhY2tncm91bmQtY29sb3IiLGQpfSwxNTApfSwxNTApfSwxNTApO3RoaXMuX2RlbGF5ZWRDYWxsSWQ9alF1ZXJ5LnNhcC5kZWxheWVkQ2FsbCgxMjAwLHRoaXMsdGhpcy5fYW5pbWF0ZVByb3h5KX19fSgpKTtyZXR1cm4gc2FwLnVpLmNvcmUuTG9jYWxCdXN5SW5kaWNhdG9yfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUuTWVzc2FnZScpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLk1lc3NhZ2UnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9NZXNzYWdlIixbJy4vbGlicmFyeScsJy4vRWxlbWVudCcsJy4vdGhlbWluZy9QYXJhbWV0ZXJzJ10sZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7c2FwLnVpLmNvcmUuRWxlbWVudC5leHRlbmQoInNhcC51aS5jb3JlLk1lc3NhZ2UiLHttZXRhZGF0YTp7cHVibGljTWV0aG9kczpbImdldERlZmF1bHRJY29uIl0sbGlicmFyeToic2FwLnVpLmNvcmUiLHByb3BlcnRpZXM6eyJ0ZXh0Ijp7dHlwZToic3RyaW5nIixncm91cDoiTWlzYyIsZGVmYXVsdFZhbHVlOm51bGx9LCJ0aW1lc3RhbXAiOnt0eXBlOiJzdHJpbmciLGdyb3VwOiJNaXNjIixkZWZhdWx0VmFsdWU6bnVsbH0sImljb24iOnt0eXBlOiJzYXAudWkuY29yZS5VUkkiLGdyb3VwOiJNaXNjIixkZWZhdWx0VmFsdWU6bnVsbH0sImxldmVsIjp7dHlwZToic2FwLnVpLmNvcmUuTWVzc2FnZVR5cGUiLGdyb3VwOiJNaXNjIixkZWZhdWx0VmFsdWU6c2FwLnVpLmNvcmUuTWVzc2FnZVR5cGUuTm9uZX0sInJlYWRPbmx5Ijp7dHlwZToiYm9vbGVhbiIsZ3JvdXA6Ik1pc2MiLGRlZmF1bHRWYWx1ZTpmYWxzZX19fX0pO3NhcC51aS5jb3JlLk1lc3NhZ2UucHJvdG90eXBlLmdldERlZmF1bHRJY29uPWZ1bmN0aW9uKHMpe3ZhciBtPWpRdWVyeS5zYXAuZ2V0TW9kdWxlUGF0aCgic2FwLnVpLmNvcmUiLCcvJyk7dmFyIHQ9InRoZW1lcy8iK3NhcC51aS5nZXRDb3JlKCkuZ2V0Q29uZmlndXJhdGlvbigpLmdldFRoZW1lKCk7dmFyIGk9Ii9pbWcvbWVzc2FnZS8iO2lmKHMmJnM9PSIzMngzMiIpe2krPSIzMngzMi8ifWVsc2V7aSs9IjE2eDE2LyJ9dmFyIHU9IiI7c3dpdGNoKHRoaXMuZ2V0UHJvcGVydHkoImxldmVsIikpe2Nhc2Ugc2FwLnVpLmNvcmUuTWVzc2FnZVR5cGUuRXJyb3I6dT1tK3QraSsiTWVzc2FnZV9JY29uX0Vycm9yLnBuZyI7YnJlYWs7Y2FzZSBzYXAudWkuY29yZS5NZXNzYWdlVHlwZS5JbmZvcm1hdGlvbjp1PW0rdCtpKyJNZXNzYWdlX0ljb25fSW5mb3JtYXRpb24ucG5nIjticmVhaztjYXNlIHNhcC51aS5jb3JlLk1lc3NhZ2VUeXBlLldhcm5pbmc6dT1tK3QraSsiTWVzc2FnZV9JY29uX1dhcm5pbmcucG5nIjticmVhaztjYXNlIHNhcC51aS5jb3JlLk1lc3NhZ2VUeXBlLlN1Y2Nlc3M6dT1tK3QraSsiTWVzc2FnZV9JY29uX1N1Y2Nlc3MucG5nIjticmVhaztjYXNlIHNhcC51aS5jb3JlLk1lc3NhZ2VUeXBlLk5vbmU6ZGVmYXVsdDp1PXRoaXMuZ2V0UHJvcGVydHkoImljb24iKTticmVha31yZXR1cm4gdX07c2FwLnVpLmNvcmUuTWVzc2FnZS5wcm90b3R5cGUuY29tcGFyZUJ5VHlwZT1mdW5jdGlvbihvKXtzYXAudWkuY29yZS5NZXNzYWdlLmNvbXBhcmVCeVR5cGUodGhpcyxvKX07c2FwLnVpLmNvcmUuTWVzc2FnZS5jb21wYXJlQnlUeXBlPWZ1bmN0aW9uKG0sTSl7aWYoIW0mJiFNKXtyZXR1cm4gMH1pZihtJiYhTSl7cmV0dXJuIDF9aWYoIW0mJk0pe3JldHVybi0xfXZhciBsPW0uZ2V0TGV2ZWwoKTt2YXIgTD1NLmdldExldmVsKCk7dmFyIHQ9c2FwLnVpLmNvcmUuTWVzc2FnZVR5cGU7aWYobD09PUwpe3JldHVybiAwfXN3aXRjaChsKXtjYXNlIHQuRXJyb3I6cmV0dXJuIDE7Y2FzZSB0Lldhcm5pbmc6cmV0dXJuIEw9PT10LkVycm9yPy0xOjE7Y2FzZSB0LlN1Y2Nlc3M6cmV0dXJuIEw9PT10LkVycm9yfHxMPT09dC5XYXJuaW5nPy0xOjE7Y2FzZSB0LkluZm9ybWF0aW9uOnJldHVybiBMPT09dC5Ob25lPzE6LTE7Y2FzZSB0Lk5vbmU6cmV0dXJuLTE7ZGVmYXVsdDpqUXVlcnkuc2FwLmxvZy5lcnJvcigiQ29tcGFyaXNvbiBlcnJvciIsdGhpcyk7cmV0dXJuIDB9fTtyZXR1cm4gc2FwLnVpLmNvcmUuTWVzc2FnZX0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLlBvcHVwJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUuUG9wdXAnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9Qb3B1cCIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ3NhcC91aS9iYXNlL01hbmFnZWRPYmplY3QnLCdzYXAvdWkvYmFzZS9PYmplY3QnLCcuL0NvbnRyb2wnLCcuL0ludGVydmFsVHJpZ2dlcicsJy4vUmVuZGVyTWFuYWdlcicsJy4vVUlBcmVhJywnLi9Qb3B1cFN1cHBvcnQnLCdqcXVlcnkuc2FwLnNjcmlwdCddLGZ1bmN0aW9uKHEsTSxCLEMsSSxSLFUsUCl7InVzZSBzdHJpY3QiO3ZhciBhPU0uZXh0ZW5kKCJzYXAudWkuY29yZS5Qb3B1cCIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKGMsbSxzLEEpe00uYXBwbHkodGhpcyk7UC5hcHBseSh0aGlzKTt0aGlzLl9wb3B1cFVJRD1xLnNhcC51aWQoKTt0aGlzLmJPcGVuPWZhbHNlO3RoaXMuZU9wZW5TdGF0ZT1zYXAudWkuY29yZS5PcGVuU3RhdGUuQ0xPU0VEO3RoaXMuX21Gb2N1c0V2ZW50cz17fTt0aGlzLl9tRm9jdXNFdmVudHNbInNhcC51aS5jb3JlLlBvcHVwLmFkZEZvY3VzYWJsZUNvbnRlbnQtIit0aGlzLl9wb3B1cFVJRF09dGhpcy5fYWRkRm9jdXNhYmxlQXJlYTt0aGlzLl9tRm9jdXNFdmVudHNbInNhcC51aS5jb3JlLlBvcHVwLnJlbW92ZUZvY3VzYWJsZUNvbnRlbnQtIit0aGlzLl9wb3B1cFVJRF09dGhpcy5fcmVtb3ZlRm9jdXNhYmxlQXJlYTt0aGlzLl9tRm9jdXNFdmVudHNbInNhcC51aS5jb3JlLlBvcHVwLmNsb3NlUG9wdXAtIit0aGlzLl9wb3B1cFVJRF09dGhpcy5fY2xvc2VQb3B1cDt0aGlzLl9tRm9jdXNFdmVudHNbInNhcC51aS5jb3JlLlBvcHVwLm9uRm9jdXNFdmVudC0iK3RoaXMuX3BvcHVwVUlEXT10aGlzLm9uRm9jdXNFdmVudDt0aGlzLl9tRm9jdXNFdmVudHNbInNhcC51aS5jb3JlLlBvcHVwLmluY3JlYXNlWkluZGV4LSIrdGhpcy5fcG9wdXBVSURdPXRoaXMuX2luY3JlYXNlTXlaSW5kZXg7aWYoYyl7dGhpcy5zZXRDb250ZW50KGMpfXRoaXMuX29EZWZhdWx0UG9zaXRpb249e215OmEuRG9jay5DZW50ZXJDZW50ZXIsYXQ6YS5Eb2NrLkNlbnRlckNlbnRlcixvZjpkb2N1bWVudCxvZmZzZXQ6IjAgMCIsY29sbGlzaW9uOiJmbGlwIn07dGhpcy5fb1Bvc2l0aW9uPXEuZXh0ZW5kKHt9LHRoaXMuX29EZWZhdWx0UG9zaXRpb24pO3RoaXMuX2JNb2RhbD0hIW07dGhpcy5fb1ByZXZpb3VzRm9jdXM9bnVsbDt0aGlzLl9zSW5pdGlhbEZvY3VzSWQ9bnVsbDt0aGlzLl9iU2hhZG93PXR5cGVvZihzKT09PSJib29sZWFuIj9zOnRydWU7dGhpcy5fYkF1dG9DbG9zZT0hIUE7dGhpcy5fYW5pbWF0aW9ucz17b3BlbjpudWxsLGNsb3NlOm51bGx9O3RoaXMuX2R1cmF0aW9ucz17b3BlbjoiZmFzdCIsY2xvc2U6ImZhc3QifTt0aGlzLl9pWkluZGV4PS0xO3RoaXMuX29CbGluZExheWVyPW51bGw7aWYodGhpcy50b3VjaEVuYWJsZWQpe3RoaXMuX2ZBdXRvQ2xvc2VIYW5kbGVyPWZ1bmN0aW9uKGUpe2lmKGUuaXNNYXJrZWQoImRlbGF5ZWRNb3VzZUV2ZW50Iil8fGUuaXNNYXJrZWQoImNhbmNlbEF1dG9DbG9zZSIpKXtyZXR1cm59aWYodGhpcy5lT3BlblN0YXRlPT09c2FwLnVpLmNvcmUuT3BlblN0YXRlLkNMT1NJTkd8fHRoaXMuZU9wZW5TdGF0ZT09PXNhcC51aS5jb3JlLk9wZW5TdGF0ZS5DTE9TRUQpe3JldHVybn12YXIgZD1lLnRhcmdldCxwPXRoaXMuXyQoKS5nZXQoMCksYj1xLmNvbnRhaW5zKHAsZCk7aWYoIWIpe3ZhciBmPXRoaXMuZ2V0Q2hpbGRQb3B1cHMoKTtmb3IodmFyIGk9MCxsPWYubGVuZ3RoO2k8bDtpKyspe3ZhciBEPXEuc2FwLmRvbUJ5SWQoZltpXSk7aWYocS5zYXAuY29udGFpbnNPckVxdWFscyhELGQpKXtiPXRydWU7YnJlYWt9fX1pZighYil7dGhpcy5jbG9zZSgpfX19fSxtZXRhZGF0YTp7bGlicmFyeToic2FwLnVpLmNvcmUiLHB1YmxpY01ldGhvZHM6WyJvcGVuIiwiY2xvc2UiLCJzZXRDb250ZW50IiwiZ2V0Q29udGVudCIsInNldFBvc2l0aW9uIiwic2V0U2hhZG93Iiwic2V0TW9kYWwiLCJnZXRNb2RhbCIsInNldEF1dG9DbG9zZSIsInNldEF1dG9DbG9zZUFyZWFzIiwiaXNPcGVuIiwiZ2V0QXV0b0Nsb3NlIiwiZ2V0T3BlblN0YXRlIiwic2V0QW5pbWF0aW9ucyIsInNldER1cmF0aW9ucyIsImF0dGFjaE9wZW5lZCIsImF0dGFjaENsb3NlZCIsImRldGFjaE9wZW5lZCIsImRldGFjaENsb3NlZCJdLGFzc29jaWF0aW9uczp7ImNoaWxkUG9wdXBzIjp7dHlwZToic2FwLnVpLmNvcmUuUG9wdXAiLG11bHRpcGxlOnRydWUsdmlzaWJpbGl0eToiaGlkZGVuIn19LGV2ZW50czp7Im9wZW5lZCI6e30sImNsb3NlZCI6e319fX0pO2EuX2FjdGl2YXRlQmxpbmRMYXllcj10cnVlO2EuYmxTdGFjaz1bXTthLkRvY2s9e0JlZ2luVG9wOiJiZWdpbiB0b3AiLEJlZ2luQ2VudGVyOiJiZWdpbiBjZW50ZXIiLEJlZ2luQm90dG9tOiJiZWdpbiBib3R0b20iLExlZnRUb3A6ImxlZnQgdG9wIixMZWZ0Q2VudGVyOiJsZWZ0IGNlbnRlciIsTGVmdEJvdHRvbToibGVmdCBib3R0b20iLENlbnRlclRvcDoiY2VudGVyIHRvcCIsQ2VudGVyQ2VudGVyOiJjZW50ZXIgY2VudGVyIixDZW50ZXJCb3R0b206ImNlbnRlciBib3R0b20iLFJpZ2h0VG9wOiJyaWdodCB0b3AiLFJpZ2h0Q2VudGVyOiJyaWdodCBjZW50ZXIiLFJpZ2h0Qm90dG9tOiJyaWdodCBib3R0b20iLEVuZFRvcDoiZW5kIHRvcCIsRW5kQ2VudGVyOiJlbmQgY2VudGVyIixFbmRCb3R0b206ImVuZCBib3R0b20ifTthLnByb3RvdHlwZS50b3VjaEVuYWJsZWQ9c2FwLnVpLkRldmljZS5zdXBwb3J0LnRvdWNofHxxLnNhcC5zaW11bGF0ZU1vYmlsZU9uRGVza3RvcDthLnByb3RvdHlwZS5yZXN0b3JlRm9jdXM9IXNhcC51aS5EZXZpY2Uuc3VwcG9ydC50b3VjaCYmIXEuc2FwLnNpbXVsYXRlTW9iaWxlT25EZXNrdG9wO0IuZXh0ZW5kKCJzYXAudWkuY29yZS5Qb3B1cC5MYXllciIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKCl7dmFyIGQ9dGhpcy5nZXREb21TdHJpbmcoKTt0aGlzLl8kUmVmPXEoZCkuYXBwZW5kVG8oc2FwLnVpLmdldENvcmUoKS5nZXRTdGF0aWNBcmVhUmVmKCkpfX0pO2EuTGF5ZXIucHJvdG90eXBlLmluaXQ9ZnVuY3Rpb24obyx6KXt0aGlzLl8kUmVmLmNzcyh7InZpc2liaWxpdHkiOiJ2aXNpYmxlIiwiei1pbmRleCI6en0pO3RoaXMudXBkYXRlKG8seik7dGhpcy5fJFJlZi5pbnNlcnRBZnRlcihvKS5zaG93KCl9O2EuTGF5ZXIucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbihvLHope3ZhciBiPW8ucmVjdCgpO3RoaXMuXyRSZWYuY3NzKHsibGVmdCI6Yi5sZWZ0LCJ0b3AiOmIudG9wfSk7aWYoby5jc3MoInJpZ2h0IikhPSJhdXRvIiYmby5jc3MoInJpZ2h0IikhPSJpbmhlcml0Iil7dGhpcy5fJFJlZi5jc3MoeyJyaWdodCI6by5jc3MoInJpZ2h0IiksIndpZHRoIjoiYXV0byJ9KX1lbHNle3RoaXMuXyRSZWYuY3NzKHsid2lkdGgiOmIud2lkdGgsInJpZ2h0IjoiYXV0byJ9KX1pZihvLmNzcygiYm90dG9tIikhPSJhdXRvIiYmby5jc3MoImJvdHRvbSIpIT0iaW5oZXJpdCIpe3RoaXMuXyRSZWYuY3NzKHsiYm90dG9tIjpvLmNzcygiYm90dG9tIiksImhlaWdodCI6ImF1dG8ifSl9ZWxzZXt0aGlzLl8kUmVmLmNzcyh7ImhlaWdodCI6Yi5oZWlnaHQsImJvdHRvbSI6ImF1dG8ifSl9aWYodHlwZW9mKHopPT09Im51bWJlciIpe3RoaXMuXyRSZWYuY3NzKCJ6LWluZGV4Iix6KX19O2EuTGF5ZXIucHJvdG90eXBlLnJlc2V0PWZ1bmN0aW9uKCl7dGhpcy5fJFJlZi5oaWRlKCkuY3NzKCJ2aXNpYmlsaXR5IiwiaGlkZGVuIikuYXBwZW5kVG8oc2FwLnVpLmdldENvcmUoKS5nZXRTdGF0aWNBcmVhUmVmKCkpfTthLkxheWVyLnByb3RvdHlwZS5nZXREb21TdHJpbmc9ZnVuY3Rpb24oKXtxLnNhcC5sb2cuZXJyb3IoInNhcC51aS5jb3JlLlBvcHVwLkxheWVyOiBnZXREb21TdHJpbmcgZnVuY3Rpb24gbXVzdCBiZSBvdmVyd3JpdHRlbiEiKTtyZXR1cm4iIn07YS5MYXllci5leHRlbmQoInNhcC51aS5jb3JlLlBvcHVwLkJsaW5kTGF5ZXIiLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbigpe2EuTGF5ZXIuYXBwbHkodGhpcyl9fSk7YS5CbGluZExheWVyLnByb3RvdHlwZS5nZXREb21TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4iPGRpdiBjbGFzcz1cInNhcFVpQmxpTHlcIiBpZD1cInNhcC11aS1ibGluZGxheWVyLSIrcS5zYXAudWlkKCkrIlwiPjxpZnJhbWUgc2Nyb2xsaW5nPVwibm9cIiBzcmM9XCJqYXZhc2NyaXB0OicnXCIJdGFiSW5kZXg9XCItMVwiPjwvaWZyYW1lPjwvZGl2PiJ9O2EucHJvdG90eXBlLm9CbGluZExheWVyUG9vbD1uZXcgc2FwLnVpLmJhc2UuT2JqZWN0UG9vbChhLkJsaW5kTGF5ZXIpO2EuTGF5ZXIuZXh0ZW5kKCJzYXAudWkuY29yZS5Qb3B1cC5TaGllbGRMYXllciIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKCl7YS5MYXllci5hcHBseSh0aGlzKX19KTthLlNoaWVsZExheWVyLnByb3RvdHlwZS5nZXREb21TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4iPGRpdiBjbGFzcz1cInNhcFVpUG9wdXBTaGllbGRcIiBpZD1cInNhcC11aS1zaGllbGRsYXllci0iK3Euc2FwLnVpZCgpKyJcIj48L2Rpdj4ifTthLnByb3RvdHlwZS5vU2hpZWxkTGF5ZXJQb29sPW5ldyBzYXAudWkuYmFzZS5PYmplY3RQb29sKGEuU2hpZWxkTGF5ZXIpOyhmdW5jdGlvbigpe3ZhciBsPTA7YS5nZXRMYXN0WkluZGV4PWZ1bmN0aW9uKCl7cmV0dXJuIGx9O2EucHJvdG90eXBlLmdldExhc3RaSW5kZXg9ZnVuY3Rpb24oKXtyZXR1cm4gYS5nZXRMYXN0WkluZGV4KCl9O2EuZ2V0TmV4dFpJbmRleD1mdW5jdGlvbigpe3JldHVybihsKz0xMCl9O2EucHJvdG90eXBlLmdldE5leHRaSW5kZXg9ZnVuY3Rpb24oKXtyZXR1cm4gYS5nZXROZXh0WkluZGV4KCl9fSgpKTthLnByb3RvdHlwZS5vcGVuPWZ1bmN0aW9uKGQsbSxiLG8sYyxmLGcpe2lmKHRoaXMuZU9wZW5TdGF0ZSE9c2FwLnVpLmNvcmUuT3BlblN0YXRlLkNMT1NFRCl7cmV0dXJufXRoaXMuZU9wZW5TdGF0ZT1zYXAudWkuY29yZS5PcGVuU3RhdGUuT1BFTklORzt2YXIgczt0cnl7cz1zYXAudWkuZ2V0Q29yZSgpLmdldFN0YXRpY0FyZWFSZWYoKTtzPXNhcC51aS5nZXRDb3JlKCkuZ2V0VUlBcmVhKHMpfWNhdGNoKGUpe3Euc2FwLmxvZy5lcnJvcihlKTt0aHJvdyBuZXcgRXJyb3IoIlBvcHVwIGNhbm5vdCBiZSBvcGVuZWQgYmVjYXVzZSBzdGF0aWMgVUlBcmVhIGNhbm5vdCBiZSBkZXRlcm1pbmVkLiIpfXRoaXMuX2JDb250ZW50QWRkZWRUb1N0YXRpYz1mYWxzZTtpZih0aGlzLm9Db250ZW50IGluc3RhbmNlb2YgQyYmIXRoaXMub0NvbnRlbnQuZ2V0UGFyZW50KCkpe3MuYWRkQ29udGVudCh0aGlzLm9Db250ZW50LHRydWUpO3RoaXMuX2JDb250ZW50QWRkZWRUb1N0YXRpYz10cnVlfWlmKHRoaXMub0NvbnRlbnQuZ2V0VUlBcmVhKXt2YXIgQT10aGlzLm9Db250ZW50LmdldFVJQXJlYSgpO2lmKEE9PT1udWxsKXtxLnNhcC5sb2cud2FybmluZygiVGhlIFBvcHVwIGNvbnRlbnQgaXMgTk9UIGNvbm5lY3RlZCB3aXRoIGFuIFVJQXJlYSBhbmQgbWF5IG5vdCB3b3JrIHByb3Blcmx5ISIpfWVsc2UgaWYoYS5fYkVuYWJsZVVJQXJlYUNoZWNrJiZBLmdldFJvb3ROb2RlKCkuaWQhPT1zLmdldFJvb3ROb2RlKCkuaWQpe3Euc2FwLmxvZy53YXJuaW5nKCJUaGUgUG9wdXAgY29udGVudCBpcyBOT1QgY29ubmVjdGVkIHdpdGggdGhlIHN0YXRpYy1VSUFyZWEgYW5kIG1heSBub3Qgd29yayBwcm9wZXJseSEiKX19aWYodHlwZW9mKGQpPT0ic3RyaW5nIil7Zz1mO2Y9YztjPW87bz1iO2I9bTttPWQ7ZD0tMX1pZihkPT09dW5kZWZpbmVkKXtkPS0xfWlmKHRoaXMucmVzdG9yZUZvY3VzKXt0aGlzLl9vUHJldmlvdXNGb2N1cz1hLmdldEN1cnJlbnRGb2N1c0luZm8oKX12YXIgJD10aGlzLl8kKHRydWUpO3ZhciBpPSJmYXN0IjtpZigoZD09PTApfHwoZD4wKSl7aT1kfWVsc2UgaWYoKHRoaXMuX2R1cmF0aW9ucy5vcGVuPT09MCl8fCh0aGlzLl9kdXJhdGlvbnMub3Blbj4wKSl7aT10aGlzLl9kdXJhdGlvbnMub3Blbn12YXIgXztpZihtfHxifHxvfHxjfHxmKXtfPXRoaXMuX2NyZWF0ZVBvc2l0aW9uKG0sYixvLGMsZil9ZWxzZXtfPXRoaXMuX29Qb3NpdGlvbn1pZighXy5vZil7Xy5vZj10aGlzLl9vUG9zaXRpb24ub2Z8fGRvY3VtZW50fXRoaXMuX2laSW5kZXg9dGhpcy5faVpJbmRleD09PXRoaXMuZ2V0TGFzdFpJbmRleCgpP3RoaXMuX2laSW5kZXg6dGhpcy5nZXROZXh0WkluZGV4KCk7dmFyIFM9c2FwLnVpLmdldENvcmUoKS5nZXRTdGF0aWNBcmVhUmVmKCk7JC5jc3MoeyJwb3NpdGlvbiI6ImFic29sdXRlIiwidmlzaWJpbGl0eSI6ImhpZGRlbiJ9KTtpZighKCRbMF0ucGFyZW50Tm9kZT09UykpeyQuYXBwZW5kVG8oUyl9JC5jc3MoInotaW5kZXgiLHRoaXMuX2laSW5kZXgpO3Euc2FwLmxvZy5kZWJ1ZygicG9zaXRpb24gcG9wdXAgY29udGVudCAiKyQuYXR0cigiaWQiKSsiIGF0ICIrKHdpbmRvdy5KU09OP0pTT04uc3RyaW5naWZ5KF8uYXQpOlN0cmluZyhfLmF0KSkpO3RoaXMuX2FwcGx5UG9zaXRpb24oXyk7aWYoZyE9PXVuZGVmaW5lZCl7dGhpcy5zZXRGb2xsb3dPZihnKX12YXIgdD10aGlzO2lmKHNhcC51aS5EZXZpY2Uub3MuaW9zJiZzYXAudWkuRGV2aWNlLnN1cHBvcnQudG91Y2gpe2lmKHRoaXMuX29Ub3BTaGllbGRMYXllcil7cS5zYXAuY2xlYXJEZWxheWVkQ2FsbCh0aGlzLl9pVG9wU2hpZWxkUmVtb3ZlVGltZXIpO3RoaXMuX2lUb3BTaGllbGRSZW1vdmVUaW1lcj1udWxsfWVsc2V7dGhpcy5fb1RvcFNoaWVsZExheWVyPXRoaXMub1NoaWVsZExheWVyUG9vbC5ib3Jyb3dPYmplY3QoJCx0aGlzLl9pWkluZGV4KzEpfXRoaXMuX2lUb3BTaGllbGRSZW1vdmVUaW1lcj1xLnNhcC5kZWxheWVkQ2FsbCg1MDAsdGhpcyxmdW5jdGlvbigpe3RoaXMub1NoaWVsZExheWVyUG9vbC5yZXR1cm5PYmplY3QodGhpcy5fb1RvcFNoaWVsZExheWVyKTt0aGlzLl9vVG9wU2hpZWxkTGF5ZXI9bnVsbDt0aGlzLl9pVG9wU2hpZWxkUmVtb3ZlVGltZXI9bnVsbH0pfXZhciBPPWZ1bmN0aW9uKCl7JC5jc3MoImRpc3BsYXkiLCJibG9jayIpO2lmKHQuX2JNb2RhbHx8dC5fYkF1dG9DbG9zZXx8dC5fc0luaXRpYWxGb2N1c0lkKXt2YXIgaz1udWxsO2lmKHQuX3NJbml0aWFsRm9jdXNJZCl7dmFyIGw9c2FwLnVpLmdldENvcmUoKS5ieUlkKHQuX3NJbml0aWFsRm9jdXNJZCk7aWYobCl7az1sLmdldEZvY3VzRG9tUmVmKCl9az1rfHxxLnNhcC5kb21CeUlkKHQuX3NJbml0aWFsRm9jdXNJZCl9cS5zYXAuZm9jdXMoa3x8JC5maXJzdEZvY3VzYWJsZURvbVJlZigpKX10LmVPcGVuU3RhdGU9c2FwLnVpLmNvcmUuT3BlblN0YXRlLk9QRU47aWYodC5nZXRGb2xsb3dPZigpKXthLkRvY2tUcmlnZ2VyLmFkZExpc3RlbmVyKGEuY2hlY2tEb2NraW5nLHQpfXQuX3VwZGF0ZUJsaW5kTGF5ZXIoKTtpZighIXNhcC51aS5EZXZpY2UuYnJvd3Nlci5pbnRlcm5ldF9leHBsb3JlciYmc2FwLnVpLkRldmljZS5icm93c2VyLnZlcnNpb249PTkpe3Euc2FwLmRlbGF5ZWRDYWxsKDAsdCxmdW5jdGlvbigpe3QuZmlyZU9wZW5lZCgpfSl9ZWxzZXt0LmZpcmVPcGVuZWQoKX19OyQudG9nZ2xlQ2xhc3MoInNhcFVpU2hkIix0aGlzLl9iU2hhZG93KS5oaWRlKCkuY3NzKCJ2aXNpYmlsaXR5IiwidmlzaWJsZSIpO2lmKGk9PTApe3RoaXMuYk9wZW49dHJ1ZTtPLmFwcGx5KCl9ZWxzZXtpZih0aGlzLl9hbmltYXRpb25zLm9wZW4pe3RoaXMuX2FuaW1hdGlvbnMub3Blbi5jYWxsKG51bGwsJCxpLE8pfWVsc2V7JC5mYWRlSW4oaSxPKX19aWYoISFzYXAudWkuRGV2aWNlLmJyb3dzZXIuaW50ZXJuZXRfZXhwbG9yZXImJmEuX2FjdGl2YXRlQmxpbmRMYXllcil7dGhpcy5fb0JsaW5kTGF5ZXI9dGhpcy5vQmxpbmRMYXllclBvb2wuYm9ycm93T2JqZWN0KCQsdGhpcy5faVpJbmRleC0xKX1pZih0aGlzLl9iTW9kYWwpe3RoaXMuX3Nob3dCbG9ja0xheWVyKCl9aWYodGhpcy5vQ29udGVudCBpbnN0YW5jZW9mIHNhcC51aS5jb3JlLkVsZW1lbnQpe3RoaXMub0NvbnRlbnQuYWRkRGVsZWdhdGUodGhpcyl9dGhpcy5iT3Blbj10cnVlO2lmKHRoaXMuaXNJblBvcHVwKG8pfHx0aGlzLmlzSW5Qb3B1cCh0aGlzLl9vUG9zaXRpb24ub2YpKXt2YXIgcD10aGlzLmdldFBhcmVudFBvcHVwSWQobyl8fHRoaXMuZ2V0UGFyZW50UG9wdXBJZCh0aGlzLl9vUG9zaXRpb24ub2YpO3ZhciBoPSIiO3ZhciBqPXRoaXMuZ2V0Q29udGVudCgpO2lmKGogaW5zdGFuY2VvZiBzYXAudWkuY29yZS5FbGVtZW50KXtoPWouZ2V0SWQoKX1lbHNlIGlmKHR5cGVvZiBqPT09Im9iamVjdCIpe2g9ai5pZH10aGlzLmFkZENoaWxkVG9Qb3B1cChwLGgpO3RoaXMuYWRkQ2hpbGRUb1BvcHVwKHAsdGhpcy5fcG9wdXBVSUQpfWlmKHRoaXMuX2JNb2RhbHx8dGhpcy5fYkF1dG9DbG9zZSl7dGhpcy5fYWRkRm9jdXNFdmVudExpc3RlbmVycygpfWlmKHRoaXMudG91Y2hFbmFibGVkJiYhdGhpcy5fYk1vZGFsJiZ0aGlzLl9iQXV0b0Nsb3NlKXtxKGRvY3VtZW50KS5vbigidG91Y2hzdGFydCBtb3VzZWRvd24iLHEucHJveHkodGhpcy5fZkF1dG9DbG9zZUhhbmRsZXIsdGhpcykpfWlmKHRoaXMuX29CbGluZExheWVyKXt0aGlzLl9yZXNpemVMaXN0ZW5lcklkPXNhcC51aS5jb3JlLlJlc2l6ZUhhbmRsZXIucmVnaXN0ZXIodGhpcy5fJCgpLmdldCgwKSxxLnByb3h5KHRoaXMub25yZXNpemUsdGhpcykpfX07YS5wcm90b3R5cGUub25Gb2N1c0V2ZW50PWZ1bmN0aW9uKGIpe3ZhciBlPXEuZXZlbnQuZml4KGIpO2lmKGFyZ3VtZW50cy5sZW5ndGg+MSYmYXJndW1lbnRzWzFdPT09InNhcC51aS5jb3JlLlBvcHVwLm9uRm9jdXNFdmVudC0iK3RoaXMuX3BvcHVwVUlEKXtlPXEuZXZlbnQuZml4KGFyZ3VtZW50c1syXSl9dmFyIHQ9KGUudHlwZT09ImZvY3VzInx8ZS50eXBlPT0iYWN0aXZhdGUiKT8iZm9jdXMiOiJibHVyIjt2YXIgYz1mYWxzZTtpZih0PT0iZm9jdXMiKXt2YXIgZD10aGlzLl8kKCkuZ2V0KDApO2lmKGQpe2M9ZD09ZS50YXJnZXR8fHEuY29udGFpbnMoZCxlLnRhcmdldCk7dmFyIGY9dGhpcy5nZXRDaGlsZFBvcHVwcygpO2lmKCFjKXtmb3IodmFyIGk9MCxsPWYubGVuZ3RoO2k8bDtpKyspe3ZhciBvPXEuc2FwLmRvbUJ5SWQoZltpXSk7aWYobyl7Yz1vPT1lLnRhcmdldHx8cS5jb250YWlucyhvLGUudGFyZ2V0KTtpZihjKXticmVha319fX1xLnNhcC5sb2cuZGVidWcoImZvY3VzIGV2ZW50IG9uICIrZS50YXJnZXQuaWQrIiwgY29udGFpbnM6ICIrYyk7aWYodGhpcy5fYk1vZGFsJiYhYyl7dmFyIFQ9KGEuZ2V0TGFzdFpJbmRleCgpPT10aGlzLl9pWkluZGV4KTtpZihUKXtpZighc2FwLnVpLkRldmljZS5zdXBwb3J0LnRvdWNofHxxKGUudGFyZ2V0KS5pcygiOmlucHV0Iikpe3ZhciBEPXRoaXMub0xhc3RCbHVycmVkRWxlbWVudD90aGlzLm9MYXN0Qmx1cnJlZEVsZW1lbnQ6ZDtxLnNhcC5mb2N1cyhEKX19fWVsc2UgaWYodGhpcy5fYkF1dG9DbG9zZSYmYyYmdGhpcy5fc1RpbWVvdXRJZCl7aWYodGhpcy5fc1RpbWVvdXRJZCl7cS5zYXAuY2xlYXJEZWxheWVkQ2FsbCh0aGlzLl9zVGltZW91dElkKTt0aGlzLl9zVGltZW91dElkPW51bGx9fX19ZWxzZSBpZih0PT0iYmx1ciIpe3Euc2FwLmxvZy5kZWJ1ZygiYmx1ciBldmVudCBvbiAiK2UudGFyZ2V0LmlkKTtpZih0aGlzLl9iTW9kYWwpe3RoaXMub0xhc3RCbHVycmVkRWxlbWVudD1lLnRhcmdldH1lbHNlIGlmKHRoaXMuX2JBdXRvQ2xvc2Upe2lmKCF0aGlzLnRvdWNoRW5hYmxlZCYmIXRoaXMuX3NUaW1lb3V0SWQpe3RoaXMuX3NUaW1lb3V0SWQ9cS5zYXAuZGVsYXllZENhbGwoMCx0aGlzLCJjbG9zZSIpfX19fTthLnByb3RvdHlwZS5zZXRJbml0aWFsRm9jdXNJZD1mdW5jdGlvbihpKXt0aGlzLl9zSW5pdGlhbEZvY3VzSWQ9aX07YS5wcm90b3R5cGUuY2xvc2U9ZnVuY3Rpb24oZCl7aWYodGhpcy5lT3BlblN0YXRlPT1zYXAudWkuY29yZS5PcGVuU3RhdGUuQ0xPU0VEfHx0aGlzLmVPcGVuU3RhdGU9PXNhcC51aS5jb3JlLk9wZW5TdGF0ZS5DTE9TSU5HKXtyZXR1cm59dmFyIGk9ImZhc3QiO2lmKChkPT09MCl8fChkPjApKXtpPWR9ZWxzZSBpZigodGhpcy5fZHVyYXRpb25zLmNsb3NlPT09MCl8fCh0aGlzLl9kdXJhdGlvbnMuY2xvc2U+MCkpe2k9dGhpcy5fZHVyYXRpb25zLmNsb3NlfWlmKGk9PT0wJiZ0aGlzLmVPcGVuU3RhdGU9PXNhcC51aS5jb3JlLk9wZW5TdGF0ZS5PUEVOSU5HKXtyZXR1cm59dGhpcy5lT3BlblN0YXRlPXNhcC51aS5jb3JlLk9wZW5TdGF0ZS5DTE9TSU5HO2lmKHRoaXMuZ2V0Rm9sbG93T2YoKSl7YS5Eb2NrVHJpZ2dlci5yZW1vdmVMaXN0ZW5lcihhLmNoZWNrRG9ja2luZyx0aGlzKX1pZih0aGlzLm9Db250ZW50JiZ0aGlzLl9iQ29udGVudEFkZGVkVG9TdGF0aWMpe3NhcC51aS5nZXRDb3JlKCkuZ2V0RXZlbnRCdXMoKS5wdWJsaXNoKCJzYXAudWkiLCJfX2JlZm9yZVBvcHVwQ2xvc2UiLHtkb21Ob2RlOnRoaXMuXyQoKS5nZXQoMCl9KTt2YXIgcz1zYXAudWkuZ2V0Q29yZSgpLmdldFN0YXRpY0FyZWFSZWYoKTtzPXNhcC51aS5nZXRDb3JlKCkuZ2V0VUlBcmVhKHMpO3MucmVtb3ZlQ29udGVudChzLmluZGV4T2ZDb250ZW50KHRoaXMub0NvbnRlbnQpLHRydWUpfXRoaXMuX2JDb250ZW50QWRkZWRUb1N0YXRpYz1mYWxzZTt0aGlzLl9zVGltZW91dElkPW51bGw7aWYodGhpcy5mRXZlbnRIYW5kbGVyKXt0aGlzLl9yZW1vdmVGb2N1c0V2ZW50TGlzdGVuZXJzKCl9aWYodGhpcy50b3VjaEVuYWJsZWQpe2lmKCF0aGlzLl9iTW9kYWwmJnRoaXMuX2JBdXRvQ2xvc2Upe3EoZG9jdW1lbnQpLm9mZigidG91Y2hzdGFydCBtb3VzZWRvd24iLHRoaXMuX2ZBdXRvQ2xvc2VIYW5kbGVyKX19aWYodGhpcy5vQ29udGVudCBpbnN0YW5jZW9mIHNhcC51aS5jb3JlLkVsZW1lbnQpe3RoaXMub0NvbnRlbnQucmVtb3ZlRGVsZWdhdGUodGhpcyl9dmFyICQ9dGhpcy5fJCgpO2lmKHRoaXMuX2JFdmVudEJ1c0V2ZW50c1JlZ2lzdGVyZWQpe3RoaXMuX3VucmVnaXN0ZXJFdmVudEJ1c0V2ZW50cygpfWlmKHRoaXMuX29CbGluZExheWVyKXt0aGlzLm9CbGluZExheWVyUG9vbC5yZXR1cm5PYmplY3QodGhpcy5fb0JsaW5kTGF5ZXIpfXRoaXMuX29CbGluZExheWVyPW51bGw7dmFyIHQ9dGhpcztpZihzYXAudWkuRGV2aWNlLm9zLmlvcyYmc2FwLnVpLkRldmljZS5zdXBwb3J0LnRvdWNoKXtpZih0aGlzLl9vQm90dG9tU2hpZWxkTGF5ZXIpe3Euc2FwLmNsZWFyRGVsYXllZENhbGwodGhpcy5faUJvdHRvbVNoaWVsZFJlbW92ZVRpbWVyKTt0aGlzLl9pQm90dG9tU2hpZWxkUmVtb3ZlVGltZXI9bnVsbH1lbHNle3RoaXMuX29Cb3R0b21TaGllbGRMYXllcj10aGlzLm9TaGllbGRMYXllclBvb2wuYm9ycm93T2JqZWN0KCQsdGhpcy5faVpJbmRleC0zKX10aGlzLl9pQm90dG9tU2hpZWxkUmVtb3ZlVGltZXI9cS5zYXAuZGVsYXllZENhbGwoNTAwLHRoaXMsZnVuY3Rpb24oKXt0aGlzLm9TaGllbGRMYXllclBvb2wucmV0dXJuT2JqZWN0KHRoaXMuX29Cb3R0b21TaGllbGRMYXllcik7dGhpcy5fb0JvdHRvbVNoaWVsZExheWVyPW51bGw7dGhpcy5faUJvdHRvbVNoaWVsZFJlbW92ZVRpbWVyPW51bGx9KX12YXIgYz1mdW5jdGlvbigpe3EoJCkuaGlkZSgpLmNzcyh7InZpc2liaWxpdHkiOiJoaWRkZW4iLCJsZWZ0IjoiMHB4IiwidG9wIjoiMHB4IiwicmlnaHQiOiIifSk7aWYodC5yZXN0b3JlRm9jdXMpe2lmKHQuX2JNb2RhbCl7YS5hcHBseUZvY3VzSW5mbyh0Ll9vUHJldmlvdXNGb2N1cyk7dC5fb1ByZXZpb3VzRm9jdXM9bnVsbDt0Lm9MYXN0Qmx1cnJlZEVsZW1lbnQ9bnVsbH19dC5iT3Blbj1mYWxzZTt0LmVPcGVuU3RhdGU9c2FwLnVpLmNvcmUuT3BlblN0YXRlLkNMT1NFRDt0LmZpcmVDbG9zZWQoKTt2YXIgYj10LmdldENoaWxkUG9wdXBzKCk7Zm9yKHZhciBqPTAsbD1iLmxlbmd0aDtqPGw7aisrKXt0LmNsb3NlUG9wdXAoYltqXSl9fTtpZihpPT0wKXtjLmFwcGx5KCl9ZWxzZXtpZih0aGlzLl9hbmltYXRpb25zLmNsb3NlKXt0aGlzLl9hbmltYXRpb25zLmNsb3NlLmNhbGwobnVsbCwkLGksYyl9ZWxzZXskLmZhZGVPdXQoaSxjKX19aWYodGhpcy5fYk1vZGFsKXt0aGlzLl9oaWRlQmxvY2tMYXllcigpfWlmKHRoaXMuX3Jlc2l6ZUxpc3RlbmVySWQpe3NhcC51aS5jb3JlLlJlc2l6ZUhhbmRsZXIuZGVyZWdpc3Rlcih0aGlzLl9yZXNpemVMaXN0ZW5lcklkKTt0aGlzLl9yZXNpemVMaXN0ZW5lcklkPW51bGx9fTthLmdldEN1cnJlbnRGb2N1c0luZm89ZnVuY3Rpb24oKXt2YXIgXz1udWxsO3ZhciBmPXNhcC51aS5nZXRDb3JlKCkuZ2V0Q3VycmVudEZvY3VzZWRDb250cm9sSWQoKTtpZihmKXt2YXIgRj1zYXAudWkuZ2V0Q29yZSgpLmdldENvbnRyb2woZik7Xz17J3NGb2N1c0lkJzpmLCdvRm9jdXNJbmZvJzpGP0YuZ2V0Rm9jdXNJbmZvKCk6e319fWVsc2V7dHJ5e3ZhciBlPWRvY3VtZW50LmFjdGl2ZUVsZW1lbnQ7aWYoZSl7Xz17J3NGb2N1c0lkJzplLmlkLCdvRm9jdXNlZEVsZW1lbnQnOmUsJ29Gb2N1c0luZm8nOnt9fX19Y2F0Y2goYil7Xz1udWxsfX1yZXR1cm4gX307YS5hcHBseUZvY3VzSW5mbz1mdW5jdGlvbihwKXtpZihwKXt2YXIgZj1zYXAudWkuZ2V0Q29yZSgpLmdldENvbnRyb2wocC5zRm9jdXNJZCk7aWYoZil7Zi5hcHBseUZvY3VzSW5mbyhwLm9Gb2N1c0luZm8pfWVsc2V7dmFyIGU9cS5zYXAuZG9tQnlJZChwLnNGb2N1c0lkKXx8cC5vRm9jdXNlZEVsZW1lbnQ7cS5zYXAuZm9jdXMoZSl9fX07YS5wcm90b3R5cGUuc2V0Q29udGVudD1mdW5jdGlvbihjKXt0aGlzLm9Db250ZW50PWM7cmV0dXJuIHRoaXN9O2EucHJvdG90eXBlLmdldENvbnRlbnQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vQ29udGVudH07YS5wcm90b3R5cGUuc2V0UG9zaXRpb249ZnVuY3Rpb24obSxiLG8sYyxkKXt0aGlzLl9vUG9zaXRpb249dGhpcy5fY3JlYXRlUG9zaXRpb24obSxiLG8sYyxkKTtpZih0aGlzLmVPcGVuU3RhdGUhPXNhcC51aS5jb3JlLk9wZW5TdGF0ZS5DTE9TRUQpe3RoaXMuX2FwcGx5UG9zaXRpb24odGhpcy5fb1Bvc2l0aW9uKTt0aGlzLl9vQmxpbmRMYXllciYmdGhpcy5fb0JsaW5kTGF5ZXIudXBkYXRlKHRoaXMuXyQoKSl9cmV0dXJuIHRoaXN9O2EucHJvdG90eXBlLl9jcmVhdGVQb3NpdGlvbj1mdW5jdGlvbihtLGIsbyxjLGQpe3ZhciBuPWZhbHNlO2lmKG0mJihtLmluZGV4T2YoIisiKT49MHx8bS5pbmRleE9mKCItIik+PTApKXtuPXRydWU7aWYoYyYmYyE9IjAgMCIpe3Euc2FwLmxvZy53YXJuaW5nKCJvZmZzZXQgdXNlZCBpbiBteSBhbmQgaW4gb2Zmc2V0LCB0aGUgb2Zmc2V0IHZhbHVlIHdpbGwgYmUgaWdub3JlZCIsInNhcC51aS5jb3JlLlBvcHVwIiwic2V0UG9zaXRpb24iKX1jPW51bGx9dmFyIHA9cS5leHRlbmQoe30sdGhpcy5fb0RlZmF1bHRQb3NpdGlvbix7Im15IjptfHx0aGlzLl9vRGVmYXVsdFBvc2l0aW9uLm15LCJhdCI6Ynx8dGhpcy5fb0RlZmF1bHRQb3NpdGlvbi5hdCwib2YiOm8sIm9mZnNldCI6YywiY29sbGlzaW9uIjpkfSk7aWYoIXEudWkudmVyc2lvbil7aWYoYS5fYk5ld09mZnNldD09bnVsbCl7YS5fYk5ld09mZnNldD10cnVlO2lmKCEoc2FwLnVpLkRldmljZS5icm93c2VyLmludGVybmV0X2V4cGxvcmVyJiZzYXAudWkuRGV2aWNlLmJyb3dzZXIudmVyc2lvbj09OCYmcS5zYXAuVmVyc2lvbihxKCkuanF1ZXJ5KS5jb21wYXJlVG8oIjEuOC4xIik8MCkpe3ZhciBEPXEoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2IikpO0QucG9zaXRpb24oe29mOndpbmRvdyx1c2luZzpmdW5jdGlvbihmLGcpe2EuX2JOZXdPZmZzZXQ9KGchPT11bmRlZmluZWQpfX0pfX19aWYoYS5fYk5ld09mZnNldHx8cS5zYXAuVmVyc2lvbihxLnVpLnZlcnNpb24pLmNvbXBhcmVUbygiMS44LjIzIik+MCl7aWYoYyYmYyE9IjAgMCIpe3ZhciBlPXAubXkuc3BsaXQoIiAiKTt2YXIgTz1jLnNwbGl0KCIgIik7dmFyIHM9W3BhcnNlSW50KE9bMF0pPDA/IiI6IisiLHBhcnNlSW50KE9bMV0pPDA/IiI6IisiXTtwLm15PWVbMF0rc1swXStPWzBdKyIgIitlWzFdK3NbMV0rT1sxXTtwLm9mZnNldD1udWxsfX1lbHNlIGlmKG4pe3ZhciBlPXAubXkuc3BsaXQoIiAiKTt2YXIgTz1bIiIsIiJdO3ZhciBpPWVbMF0uaW5kZXhPZigiKyIpO2lmKGk8MCl7aT1lWzBdLmluZGV4T2YoIi0iKX1pZihpPj0wKXtPWzBdPWVbMF0uc2xpY2UoaSk7ZVswXT1lWzBdLnNsaWNlKDAsaSl9aT1lWzFdLmluZGV4T2YoIisiKTtpZihpPDApe2k9ZVsxXS5pbmRleE9mKCItIil9aWYoaT49MCl7T1sxXT1lWzFdLnNsaWNlKGkpO2VbMV09ZVsxXS5zbGljZSgwLGkpfXAubXk9ZVswXSsiICIrZVsxXTtwLm9mZnNldD1PWzBdKyIgIitPWzFdfXJldHVybiBwfTthLnByb3RvdHlwZS5fZ2V0UG9zaXRpb25PZmZzZXQ9ZnVuY3Rpb24oKXt2YXIgbz1bXTtpZih0aGlzLl9vUG9zaXRpb24ubXkmJih0aGlzLl9vUG9zaXRpb24ubXkuaW5kZXhPZigiKyIpPj0wfHx0aGlzLl9vUG9zaXRpb24ubXkuaW5kZXhPZigiLSIpPj0wKSl7dmFyIG09dGhpcy5fb1Bvc2l0aW9uLm15LnNwbGl0KCIgIik7dmFyIGk9bVswXS5pbmRleE9mKCIrIik7aWYoaTwwKXtpPW1bMF0uaW5kZXhPZigiLSIpfWlmKGk+PTApe29bMF09bVswXS5zbGljZShpKX1pPW1bMV0uaW5kZXhPZigiKyIpO2lmKGk8MCl7aT1tWzFdLmluZGV4T2YoIi0iKX1pZihpPj0wKXtvWzFdPW1bMV0uc2xpY2UoaSl9fWVsc2UgaWYodGhpcy5fb1Bvc2l0aW9uLm9mZnNldCl7bz10aGlzLl9vUG9zaXRpb24ub2Zmc2V0LnNwbGl0KCIgIil9cmV0dXJuIG99O2EucHJvdG90eXBlLl9hcHBseVBvc2l0aW9uPWZ1bmN0aW9uKHApe3ZhciBiPXNhcC51aS5nZXRDb3JlKCkuZ2V0Q29uZmlndXJhdGlvbigpLmdldFJUTCgpO3ZhciAkPXRoaXMuXyQoKTt2YXIgQT1wLmF0O2lmKHR5cGVvZihBKT09PSJzdHJpbmciKXskLmNzcygiZGlzcGxheSIsImJsb2NrIikucG9zaXRpb24odGhpcy5fcmVzb2x2ZVJlZmVyZW5jZSh0aGlzLl9jb252ZXJ0UG9zaXRpb25SVEwocCxiKSkpO3RoaXMuX2ZpeFBvc2l0aW9uaW5nKHAsYil9ZWxzZSBpZihzYXAudWkuY29yZS5DU1NTaXplLmlzVmFsaWQoQS5sZWZ0KSYmc2FwLnVpLmNvcmUuQ1NTU2l6ZS5pc1ZhbGlkKEEudG9wKSl7JC5jc3MoeyJsZWZ0IjpBLmxlZnQsInRvcCI6QS50b3B9KX1lbHNlIGlmKHNhcC51aS5jb3JlLkNTU1NpemUuaXNWYWxpZChBLnJpZ2h0KSYmc2FwLnVpLmNvcmUuQ1NTU2l6ZS5pc1ZhbGlkKEEudG9wKSl7JC5jc3MoeyJyaWdodCI6QS5yaWdodCwidG9wIjpBLnRvcH0pfWVsc2UgaWYodHlwZW9mKEEubGVmdCk9PT0ibnVtYmVyIiYmdHlwZW9mKEEudG9wKT09PSJudW1iZXIiKXt2YXIgZD0kWzBdO2lmKGQmJmQuc3R5bGUucmlnaHQpe3ZhciB3PSQub3V0ZXJXaWR0aCgpOyQuY3NzKHsicmlnaHQiOihkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGgtKEEubGVmdCt3KSkrInB4IiwidG9wIjpBLnRvcCsicHgifSl9ZWxzZXskLmNzcyh7ImxlZnQiOkEubGVmdCsicHgiLCJ0b3AiOkEudG9wKyJweCJ9KX19dGhpcy5fb0xhc3RQb3NpdGlvbj1wO3RoaXMuX29MYXN0T2ZSZWN0PXRoaXMuX2NhbGNPZlJlY3QocC5vZil9O2EucHJvdG90eXBlLl9jYWxjT2ZSZWN0PWZ1bmN0aW9uKG8pe3ZhciBPPXRoaXMuX2dldE9mRG9tKG8pO2lmKE8pe3JldHVybiBxKE8pLnJlY3QoKX1yZXR1cm4gbnVsbH07YS5wcm90b3R5cGUuX2dldE9mRG9tPWZ1bmN0aW9uKG8pe2lmKChvIGluc3RhbmNlb2YgRXZlbnQpfHwobyBpbnN0YW5jZW9mIHEuRXZlbnQpKXtyZXR1cm4gbnVsbH12YXIgTztpZih0eXBlb2Yobyk9PT0ic3RyaW5nIil7Tz1xLnNhcC5ieUlkKG8pfWVsc2UgaWYobyBpbnN0YW5jZW9mIHEpe089b31lbHNle089cShvIGluc3RhbmNlb2Ygc2FwLnVpLmNvcmUuRWxlbWVudD9vLmdldERvbVJlZigpOm8pfXJldHVybiBPWzBdfTthLnByb3RvdHlwZS5fY29udmVydFBvc2l0aW9uUlRMPWZ1bmN0aW9uKHAsYil7dmFyIGY9cS5leHRlbmQoe30scCk7aWYoYil7dmFyIG49ZmFsc2U7aWYoZi5teSYmKGYubXkuaW5kZXhPZigiKyIpPj0wfHxmLm15LmluZGV4T2YoIi0iKT49MCkpe249dHJ1ZX1pZigoZi5vZmZzZXR8fG4pJiYoKGYubXkuaW5kZXhPZigiYmVnaW4iKT4tMSl8fChmLm15LmluZGV4T2YoImVuZCIpPi0xKSkmJigoZi5hdC5pbmRleE9mKCJiZWdpbiIpPi0xKXx8KGYuYXQuaW5kZXhPZigiZW5kIik+LTEpKSl7aWYobil7dmFyIG09Zi5teS5zcGxpdCgiICIpO2lmKG0ubGVuZ3RoPT0yKXtmLm15PSIiO2lmKG1bMF0pe2lmKG1bMF0uaW5kZXhPZigiYmVnaW4iKT4tMXx8bVswXS5pbmRleE9mKCJlbmQiKT4tMSl7aWYobVswXS5pbmRleE9mKCIrIik+LTEpe21bMF09bVswXS5yZXBsYWNlKCIrIiwiLSIpfWVsc2UgaWYobVswXS5pbmRleE9mKCItIik+LTEpe21bMF09bVswXS5yZXBsYWNlKCItIiwiKyIpfX1mLm15PW1bMF19aWYobVsxXSl7aWYobVsxXS5pbmRleE9mKCJiZWdpbiIpPi0xfHxtWzFdLmluZGV4T2YoImVuZCIpPi0xKXtpZihtWzFdLmluZGV4T2YoIisiKT4tMSl7bVsxXT1tWzFdLnJlcGxhY2UoIisiLCItIil9ZWxzZSBpZihtWzFdLmluZGV4T2YoIi0iKT4tMSl7bVsxXT1tWzFdLnJlcGxhY2UoIi0iLCIrIil9fWlmKG1bMF0pe2YubXk9Zi5teSsiICJ9Zi5teT1mLm15K21bMV19fX1lbHNle2Yub2Zmc2V0PXRoaXMuX21pcnJvck9mZnNldChmLm9mZnNldCl9fWYubXk9Zi5teS5yZXBsYWNlKCJiZWdpbiIsInJpZ2h0IikucmVwbGFjZSgiZW5kIiwibGVmdCIpO2YuYXQ9Zi5hdC5yZXBsYWNlKCJiZWdpbiIsInJpZ2h0IikucmVwbGFjZSgiZW5kIiwibGVmdCIpfWVsc2V7Zi5teT1mLm15LnJlcGxhY2UoImVuZCIsInJpZ2h0IikucmVwbGFjZSgiYmVnaW4iLCJsZWZ0Iik7Zi5hdD1mLmF0LnJlcGxhY2UoImVuZCIsInJpZ2h0IikucmVwbGFjZSgiYmVnaW4iLCJsZWZ0Iil9cmV0dXJuIGZ9O2EucHJvdG90eXBlLl9taXJyb3JPZmZzZXQ9ZnVuY3Rpb24obyl7dmFyIE89cS50cmltKG8pLnNwbGl0KC9ccy8pO3ZhciBwPXBhcnNlSW50KE9bMF0sMTApO3JldHVybigtcCkrIiAiK09bTy5sZW5ndGgtMV19O2EucHJvdG90eXBlLl9maXhQb3NpdGlvbmluZz1mdW5jdGlvbihwLGIpe3ZhciBtPXAubXk7aWYodHlwZW9mKG0pPT09InN0cmluZyIpe2lmKGImJigobS5pbmRleE9mKCJyaWdodCIpPi0xKXx8KG0uaW5kZXhPZigiYmVnaW4iKT4tMSl8fChtLmluZGV4T2YoImNlbnRlciIpPi0xKSkpe3ZhciAkPXRoaXMuXyQoKTt2YXIgYz1xKHdpbmRvdykud2lkdGgoKS0kLm91dGVyV2lkdGgoKS0kLm9mZnNldCgpLmxlZnQ7JC5jc3MoeyJyaWdodCI6YysicHgiLCJsZWZ0IjoiIn0pfWVsc2UgaWYoKG0uaW5kZXhPZigicmlnaHQiKT4tMSl8fChtLmluZGV4T2YoImVuZCIpPi0xKSl7dmFyICQ9dGhpcy5fJCgpO3ZhciBjPXEod2luZG93KS53aWR0aCgpLSQub3V0ZXJXaWR0aCgpLSQub2Zmc2V0KCkubGVmdDskLmNzcyh7InJpZ2h0IjpjKyJweCIsImxlZnQiOiIifSl9fX07YS5wcm90b3R5cGUuX3Jlc29sdmVSZWZlcmVuY2U9ZnVuY3Rpb24ocCl7dmFyIG89cDtpZihwLm9mIGluc3RhbmNlb2Ygc2FwLnVpLmNvcmUuRWxlbWVudCl7bz1xLmV4dGVuZCh7fSxwLHtvZjpwLm9mLmdldERvbVJlZigpfSl9cmV0dXJuIG99O2EucHJvdG90eXBlLnNldFNoYWRvdz1mdW5jdGlvbihzKXt0aGlzLl9iU2hhZG93PXM7aWYodGhpcy5lT3BlblN0YXRlIT1zYXAudWkuY29yZS5PcGVuU3RhdGUuQ0xPU0VEKXt0aGlzLl8kKCkudG9nZ2xlQ2xhc3MoInNhcFVpU2hkIixzKX1yZXR1cm4gdGhpc307YS5wcm90b3R5cGUuc2V0TW9kYWw9ZnVuY3Rpb24obSxzKXt2YXIgbz10aGlzLl9iTW9kYWw7dGhpcy5fYk1vZGFsPW07dGhpcy5fc01vZGFsQ1NTQ2xhc3M9cztpZih0aGlzLmlzT3BlbigpKXtpZihvIT09bSl7aWYobSl7dGhpcy5fc2hvd0Jsb2NrTGF5ZXIoKX1lbHNle3RoaXMuX2hpZGVCbG9ja0xheWVyKCl9aWYodGhpcy50b3VjaEVuYWJsZWQmJnRoaXMuX2JBdXRvQ2xvc2Upe2lmKCFtKXtxKGRvY3VtZW50KS5vbigidG91Y2hzdGFydCBtb3VzZWRvd24iLHEucHJveHkodGhpcy5fZkF1dG9DbG9zZUhhbmRsZXIsdGhpcykpfWVsc2V7cShkb2N1bWVudCkub2ZmKCJ0b3VjaHN0YXJ0IG1vdXNlZG93biIsdGhpcy5fZkF1dG9DbG9zZUhhbmRsZXIpfX19fXJldHVybiB0aGlzfTthLnByb3RvdHlwZS5nZXRNb2RhbD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9iTW9kYWx9O2EucHJvdG90eXBlLnNldEF1dG9DbG9zZT1mdW5jdGlvbihBKXtpZih0aGlzLnRvdWNoRW5hYmxlZCYmdGhpcy5pc09wZW4oKSYmdGhpcy5fYkF1dG9DbG9zZSE9PUEpe2lmKCF0aGlzLl9iTW9kYWwpe2lmKEEpe3EoZG9jdW1lbnQpLm9uKCJ0b3VjaHN0YXJ0IG1vdXNlZG93biIscS5wcm94eSh0aGlzLl9mQXV0b0Nsb3NlSGFuZGxlcix0aGlzKSl9ZWxzZXtxKGRvY3VtZW50KS5vZmYoInRvdWNoc3RhcnQgbW91c2Vkb3duIix0aGlzLl9mQXV0b0Nsb3NlSGFuZGxlcil9fX10aGlzLl9iQXV0b0Nsb3NlPUE7cmV0dXJuIHRoaXN9O2EucHJvdG90eXBlLnNldEF1dG9DbG9zZUFyZWFzPWZ1bmN0aW9uKEEpe2Zvcih2YXIgaT0wLGw9QS5sZW5ndGg7aTxsO2krKyl7dmFyIHM9IiI7aWYoQVtpXWluc3RhbmNlb2Ygc2FwLnVpLmNvcmUuRWxlbWVudCl7cz1BW2ldLmdldElkKCl9ZWxzZSBpZih0eXBlb2YgQVtpXT09PSJvYmplY3QiKXtzPUFbaV0uaWR9ZWxzZSBpZih0eXBlb2YgQVtpXT09PSJzdHJpbmciKXtzPUFbaV19aWYocS5pbkFycmF5KHMsdGhpcy5nZXRDaGlsZFBvcHVwcygpKT09PS0xKXt0aGlzLmFkZENoaWxkUG9wdXAocyl9fXJldHVybiB0aGlzfTthLnByb3RvdHlwZS5zZXRBbmltYXRpb25zPWZ1bmN0aW9uKG8sYyl7aWYobyYmKHR5cGVvZihvKT09ImZ1bmN0aW9uIikpe3RoaXMuX2FuaW1hdGlvbnMub3Blbj1vfWlmKGMmJih0eXBlb2YoYyk9PSJmdW5jdGlvbiIpKXt0aGlzLl9hbmltYXRpb25zLmNsb3NlPWN9cmV0dXJuIHRoaXN9O2EucHJvdG90eXBlLnNldER1cmF0aW9ucz1mdW5jdGlvbihvLGMpe2lmKChvPjApfHwobz09PTApKXt0aGlzLl9kdXJhdGlvbnMub3Blbj1vfWlmKChjPjApfHwoYz09PTApKXt0aGlzLl9kdXJhdGlvbnMuY2xvc2U9Y31yZXR1cm4gdGhpc307YS5wcm90b3R5cGUuc2V0Rm9sbG93T2Y9ZnVuY3Rpb24oZil7dmFyIHU9ZmFsc2U7YS5Eb2NrVHJpZ2dlci5yZW1vdmVMaXN0ZW5lcihhLmNoZWNrRG9ja2luZyx0aGlzKTtpZih0eXBlb2YoZik9PT0iZnVuY3Rpb24iKXt0aGlzLl9iRm9sbG93T2Y9dHJ1ZTt0aGlzLl9mb2xsb3dPZkhhbmRsZXI9Zjt1PXRydWV9ZWxzZSBpZih0eXBlb2YoZik9PT0iYm9vbGVhbiIpe3RoaXMuX2JGb2xsb3dPZj1mO2lmKCF0aGlzLl9iRm9sbG93T2Ype3RoaXMuX2ZvbGxvd09mSGFuZGxlcj1udWxsfXU9Zn1lbHNle3RoaXMuX2JGb2xsb3dPZj1mYWxzZTt0aGlzLl9mb2xsb3dPZkhhbmRsZXI9bnVsbDtpZihmIT1udWxsKXtxLnNhcC5sb2cuZXJyb3IoIlRyeWluZyB0byBzZXQgYW4gaW52YWxpZCB0eXBlIHRvICdmb2xsb3dPZjogIitmKX19aWYodSYmdGhpcy5fb0xhc3RQb3NpdGlvbil7dGhpcy5fb0xhc3RPZlJlY3Q9dGhpcy5fY2FsY09mUmVjdCh0aGlzLl9vTGFzdFBvc2l0aW9uLm9mKX1pZih0aGlzLl9iRm9sbG93T2YmJnRoaXMuZ2V0T3BlblN0YXRlKCk9PT1zYXAudWkuY29yZS5PcGVuU3RhdGUuT1BFTil7YS5Eb2NrVHJpZ2dlci5hZGRMaXN0ZW5lcihhLmNoZWNrRG9ja2luZyx0aGlzKX19O2EucHJvdG90eXBlLmdldEF1dG9DbG9zZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9iQXV0b0Nsb3NlfTthLnByb3RvdHlwZS5nZXRGb2xsb3dPZj1mdW5jdGlvbigpe2lmKHRoaXMuX2JGb2xsb3dPZil7cmV0dXJuIHR5cGVvZih0aGlzLl9mb2xsb3dPZkhhbmRsZXIpPT09ImZ1bmN0aW9uIj90aGlzLl9mb2xsb3dPZkhhbmRsZXI6dHJ1ZX1yZXR1cm4gZmFsc2V9O2EucHJvdG90eXBlLmlzT3Blbj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmJPcGVufTthLnByb3RvdHlwZS5nZXRPcGVuU3RhdGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lT3BlblN0YXRlfTthLnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKCl7aWYodGhpcy5fcmVzaXplTGlzdGVuZXJJZCl7c2FwLnVpLmNvcmUuUmVzaXplSGFuZGxlci5kZXJlZ2lzdGVyKHRoaXMuX3Jlc2l6ZUxpc3RlbmVySWQpO3RoaXMuX3Jlc2l6ZUxpc3RlbmVySWQ9bnVsbH10aGlzLmNsb3NlKCk7dGhpcy5vQ29udGVudD1udWxsO2lmKHRoaXMuX2JGb2xsb3dPZil7dGhpcy5zZXRGb2xsb3dPZihudWxsKX1pZih0aGlzLl9iRXZlbnRCdXNFdmVudHNSZWdpc3RlcmVkKXt0aGlzLl91bnJlZ2lzdGVyRXZlbnRCdXNFdmVudHMoKX19O2EucHJvdG90eXBlLmV4aXQ9ZnVuY3Rpb24oKXtkZWxldGUgdGhpcy5fbUZvY3VzRXZlbnRzfTthLnByb3RvdHlwZS5fYWRkRm9jdXNFdmVudExpc3RlbmVycz1mdW5jdGlvbihjLGUsRSl7aWYoIXRoaXMuZkV2ZW50SGFuZGxlcil7dGhpcy5mRXZlbnRIYW5kbGVyPXEucHJveHkodGhpcy5vbkZvY3VzRXZlbnQsdGhpcyl9dmFyIHA9dGhpcy5fJCgpO3ZhciBiPXRoaXMuZ2V0Q2hpbGRQb3B1cHMoKTtpZihkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyJiYhc2FwLnVpLkRldmljZS5icm93c2VyLmludGVybmV0X2V4cGxvcmVyKXtkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJmb2N1cyIsdGhpcy5mRXZlbnRIYW5kbGVyLHRydWUpO3AuZ2V0KDApLmFkZEV2ZW50TGlzdGVuZXIoImJsdXIiLHRoaXMuZkV2ZW50SGFuZGxlcix0cnVlKTtmb3IodmFyIGk9MCxsPWIubGVuZ3RoO2k8bDtpKyspe3ZhciBkPXEuc2FwLmRvbUJ5SWQoYltpXSk7aWYoZCl7ZC5hZGRFdmVudExpc3RlbmVyKCJibHVyIix0aGlzLmZFdmVudEhhbmRsZXIsdHJ1ZSl9fX1lbHNle3EoZG9jdW1lbnQpLmJpbmQoImFjdGl2YXRlLiIrdGhpcy5fcG9wdXBVSUQsdGhpcy5mRXZlbnRIYW5kbGVyKTtwLmJpbmQoImRlYWN0aXZhdGUuIit0aGlzLl9wb3B1cFVJRCx0aGlzLmZFdmVudEhhbmRsZXIpO2Zvcih2YXIgaT0wLGw9Yi5sZW5ndGg7aTxsO2krKyl7dmFyIGQ9cS5zYXAuZG9tQnlJZChiW2ldKTtpZihkKXtxKGQpLmJpbmQoImRlYWN0aXZhdGUuIit0aGlzLl9wb3B1cFVJRCx0aGlzLmZFdmVudEhhbmRsZXIpfX19fTthLnByb3RvdHlwZS5fcmVtb3ZlRm9jdXNFdmVudExpc3RlbmVycz1mdW5jdGlvbihjLGUsRSl7dmFyIHA9dGhpcy5fJChmYWxzZSx0cnVlKTtpZighcC5sZW5ndGgpe3JldHVybn12YXIgYj10aGlzLmdldENoaWxkUG9wdXBzKCk7aWYoZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lciYmIXNhcC51aS5EZXZpY2UuYnJvd3Nlci5pbnRlcm5ldF9leHBsb3Jlcil7ZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigiZm9jdXMiLHRoaXMuZkV2ZW50SGFuZGxlcix0cnVlKTtwLmdldCgwKS5yZW1vdmVFdmVudExpc3RlbmVyKCJibHVyIix0aGlzLmZFdmVudEhhbmRsZXIsdHJ1ZSk7Zm9yKHZhciBpPTAsbD1iLmxlbmd0aDtpPGw7aSsrKXt2YXIgZD1xLnNhcC5kb21CeUlkKGJbaV0pO2lmKGQpe2QucmVtb3ZlRXZlbnRMaXN0ZW5lcigiYmx1ciIsdGhpcy5mRXZlbnRIYW5kbGVyLHRydWUpfXRoaXMuY2xvc2VQb3B1cChiW2ldKX19ZWxzZXtxKGRvY3VtZW50KS51bmJpbmQoImFjdGl2YXRlLiIrdGhpcy5fcG9wdXBVSUQsdGhpcy5mRXZlbnRIYW5kbGVyKTtwLnVuYmluZCgiZGVhY3RpdmF0ZS4iK3RoaXMuX3BvcHVwVUlELHRoaXMuZkV2ZW50SGFuZGxlcik7Zm9yKHZhciBpPTAsbD1iLmxlbmd0aDtpPGw7aSsrKXt2YXIgZD1xLnNhcC5kb21CeUlkKGJbaV0pO2lmKGQpe3EoZCkudW5iaW5kKCJkZWFjdGl2YXRlLiIrdGhpcy5fcG9wdXBVSUQsdGhpcy5mRXZlbnRIYW5kbGVyKX19fXRoaXMuZkV2ZW50SGFuZGxlcj1udWxsfTthLnByb3RvdHlwZS5fcmVnaXN0ZXJFdmVudEJ1c0V2ZW50cz1mdW5jdGlvbihjLGUsRSl7dmFyIHQ9dGhpcztxLmVhY2godC5fbUZvY3VzRXZlbnRzLGZ1bmN0aW9uKHMsbCl7c2FwLnVpLmdldENvcmUoKS5nZXRFdmVudEJ1cygpLnN1YnNjcmliZSgic2FwLnVpIixzLGwsdCl9KTt0aGlzLl9iRXZlbnRCdXNFdmVudHNSZWdpc3RlcmVkPXRydWV9O2EucHJvdG90eXBlLl91bnJlZ2lzdGVyRXZlbnRCdXNFdmVudHM9ZnVuY3Rpb24oYyxlLEUpe3ZhciB0PXRoaXM7cS5lYWNoKHQuX21Gb2N1c0V2ZW50cyxmdW5jdGlvbihzLGwpe3NhcC51aS5nZXRDb3JlKCkuZ2V0RXZlbnRCdXMoKS51bnN1YnNjcmliZSgic2FwLnVpIixzLGwsdCl9KTtkZWxldGUgdGhpcy5fYkV2ZW50QnVzRXZlbnRzUmVnaXN0ZXJlZH07YS5wcm90b3R5cGUuX2FkZEZvY3VzYWJsZUFyZWE9ZnVuY3Rpb24oYyxlLEUpe3ZhciBwPXRoaXMuX3BvcHVwVUlEO2lmKHEuaW5BcnJheShFLmlkLHRoaXMuZ2V0Q2hpbGRQb3B1cHMoKSk9PT0tMSl7dGhpcy5hZGRDaGlsZFBvcHVwKEUuaWQpfXZhciAkPXEoJ1tkYXRhLXNhcC11aS1wb3B1cD0iJytFLmlkKyciXScpO2lmKCQubGVuZ3RoPjApe3ZhciBvPWZ1bmN0aW9uKGIpeyQub2ZmKCJibHVyIixvKTt2YXIgcz0ic2FwLnVpLmNvcmUuUG9wdXAub25Gb2N1c0V2ZW50LSIrcDtzYXAudWkuZ2V0Q29yZSgpLmdldEV2ZW50QnVzKCkucHVibGlzaCgic2FwLnVpIixzLGIpfTskLm9uKCJibHVyIixvKX19O2EucHJvdG90eXBlLl9yZW1vdmVGb2N1c2FibGVBcmVhPWZ1bmN0aW9uKGMsZSxFKXt0aGlzLnJlbW92ZUNoaWxkUG9wdXAoRS5pZCl9O2EucHJvdG90eXBlLl9jbG9zZVBvcHVwPWZ1bmN0aW9uKGMsZSxFKXt0aGlzLmNsb3NlKHR5cGVvZiB0aGlzLl9kdXJhdGlvbnMuY2xvc2U9PT0ic3RyaW5nIj8wOnRoaXMuX2R1cmF0aW9ucy5jbG9zZSl9O2EucHJvdG90eXBlLl9zZXRJZGVudGl0eT1mdW5jdGlvbigkKXtpZih0eXBlb2YgJD09PSJvYmplY3QiKXskLmF0dHIoImRhdGEtc2FwLXVpLXBvcHVwIix0aGlzLl9wb3B1cFVJRCl9ZWxzZXtxLnNhcC5sb2cud2FybmluZygiSW5jb3JyZWN0IERvbVJlZi10eXBlIGZvciAnc2V0SWRlbnRpdHknOiAiKyQsdGhpcyk7cmV0dXJufWlmKCF0aGlzLl9iRXZlbnRCdXNFdmVudHNSZWdpc3RlcmVkKXt0aGlzLl9yZWdpc3RlckV2ZW50QnVzRXZlbnRzKCl9fTthLnByb3RvdHlwZS5fJD1mdW5jdGlvbihmLGcpe3ZhciBjO2lmKHRoaXMub0NvbnRlbnQgaW5zdGFuY2VvZiBDKXtjPXRoaXMub0NvbnRlbnQuJCgpO2lmKGZ8fChjLmxlbmd0aD09PTAmJiFnKSl7cS5zYXAubG9nLmluZm8oIlJlbmRlcmluZyBvZiBwb3B1cCBjb250ZW50OiAiK3RoaXMub0NvbnRlbnQuZ2V0SWQoKSk7aWYoYy5sZW5ndGg+MCl7Ui5wcmVzZXJ2ZUNvbnRlbnQoY1swXSx0cnVlLGZhbHNlKX1zYXAudWkuZ2V0Q29yZSgpLmdldFJlbmRlck1hbmFnZXIoKS5yZW5kZXIodGhpcy5vQ29udGVudCxzYXAudWkuZ2V0Q29yZSgpLmdldFN0YXRpY0FyZWFSZWYoKSk7Yz10aGlzLm9Db250ZW50LiQoKX19ZWxzZSBpZih0aGlzLm9Db250ZW50IGluc3RhbmNlb2Ygc2FwLnVpLmNvcmUuRWxlbWVudCl7Yz10aGlzLm9Db250ZW50LiQoKX1lbHNle2M9cSh0aGlzLm9Db250ZW50KX10aGlzLl9zZXRJZGVudGl0eShjKTtyZXR1cm4gY307YS5wcm90b3R5cGUuX3Nob3dCbG9ja0xheWVyPWZ1bmN0aW9uKCl7dmFyIGI9cSgiI3NhcC11aS1ibG9ja2xheWVyLXBvcHVwIiksYz0ic2FwVWlCTHkiKyh0aGlzLl9zTW9kYWxDU1NDbGFzcz8iICIrdGhpcy5fc01vZGFsQ1NTQ2xhc3M6IiIpO2lmKGIubGVuZ3RoPT09MCl7Yj1xKCc8ZGl2IGlkPSJzYXAtdWktYmxvY2tsYXllci1wb3B1cCIgdGFiaW5kZXg9IjAiIGNsYXNzPSInK2MrJyI+PC9kaXY+Jyk7Yi5hcHBlbmRUbyhzYXAudWkuZ2V0Q29yZSgpLmdldFN0YXRpY0FyZWFSZWYoKSl9ZWxzZXtiLnJlbW92ZUNsYXNzKCkuYWRkQ2xhc3MoYyl9YS5ibFN0YWNrLnB1c2godGhpcy5faVpJbmRleC0yKTtiLmNzcyh7InotaW5kZXgiOnRoaXMuX2laSW5kZXgtMiwidmlzaWJpbGl0eSI6InZpc2libGUifSkuc2hvdygpO3EoImh0bWwiKS5hZGRDbGFzcygic2FwVWlCTHlCYWNrIil9O2EucHJvdG90eXBlLl9oaWRlQmxvY2tMYXllcj1mdW5jdGlvbigpe2EuYmxTdGFjay5wb3AoKTtpZihhLmJsU3RhY2subGVuZ3RoPjApe3EoIiNzYXAtdWktYmxvY2tsYXllci1wb3B1cCIpLmNzcyh7InotaW5kZXgiOmEuYmxTdGFja1thLmJsU3RhY2subGVuZ3RoLTFdLCJ2aXNpYmlsaXR5IjoidmlzaWJsZSJ9KS5zaG93KCl9ZWxzZXtxKCIjc2FwLXVpLWJsb2NrbGF5ZXItcG9wdXAiKS5jc3MoInZpc2liaWxpdHkiLCJoaWRkZW4iKS5oaWRlKCk7cSgiaHRtbCIpLnJlbW92ZUNsYXNzKCJzYXBVaUJMeUJhY2siKX19O2EuRG9ja1RyaWdnZXI9bmV3IEkoMjAwKTt2YXIgcj1mdW5jdGlvbihvLGIpe2lmKG8ubGVmdCE9Yi5sZWZ0fHxvLnRvcCE9Yi50b3B8fG8ud2lkdGghPWIud2lkdGh8fG8uaGVpZ2h0IT1iLmhlaWdodCl7cmV0dXJuIGZhbHNlfXJldHVybiB0cnVlfTthLmNoZWNrRG9ja2luZz1mdW5jdGlvbigpe2lmKHRoaXMuZ2V0T3BlblN0YXRlKCk9PT1zYXAudWkuY29yZS5PcGVuU3RhdGUuT1BFTil7dmFyIGM9dGhpcy5fZ2V0T2ZEb20odGhpcy5fb0xhc3RQb3NpdGlvbi5vZiksbz1xKGMpLnJlY3QoKTtpZighbyl7dGhpcy5jbG9zZSgpO3JldHVybn1pZighcS5zYXAuY29udGFpbnNPckVxdWFscyhkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsYykpe2lmKGMuaWQmJmMuaWQhPT0iIil7dmFyIG49cS5zYXAuZG9tQnlJZChjLmlkKTt2YXIgTj1xKG4pLnJlY3QoKTtpZihOJiYhcihvLE4pKXtvPU47ZGVsZXRlIHRoaXMuX29MYXN0UG9zaXRpb24ub2Y7dGhpcy5fb0xhc3RQb3NpdGlvbi5vZj1ufX19aWYodGhpcy5fb0xhc3RPZlJlY3Qpe2lmKCFyKHRoaXMuX29MYXN0T2ZSZWN0LG8pKXtpZih0aGlzLl9mb2xsb3dPZkhhbmRsZXIpe3ZhciBsPXEuZXh0ZW5kKHRydWUse30sdGhpcy5fb0xhc3RQb3NpdGlvbiksTD1xLmV4dGVuZCh0cnVlLHt9LHRoaXMuX29MYXN0T2ZSZWN0KTt0aGlzLl9mb2xsb3dPZkhhbmRsZXIoe2xhc3RQb3NpdGlvbjpsLGxhc3RPZlJlY3Q6TCxjdXJyZW50T2ZSZWN0Om99KX1lbHNle3RoaXMuX2FwcGx5UG9zaXRpb24odGhpcy5fb0xhc3RQb3NpdGlvbil9fX19fTthLnByb3RvdHlwZS5vbnRvdWNoc3RhcnQ9ZnVuY3Rpb24oZSl7dGhpcy5vbm1vdXNlZG93bihlLHRydWUpO3RoaXMuX2JNb3VzZWRvd25DYWxsZWQ9dHJ1ZX07YS5wcm90b3R5cGUub25tb3VzZWRvd249ZnVuY3Rpb24oZSxzKXtpZih0aGlzLl9iTW91c2Vkb3duQ2FsbGVkJiYhcyl7dGhpcy5fYk1vdXNlZG93bkNhbGxlZD1mYWxzZTtyZXR1cm59aWYodGhpcy5faVpJbmRleD09PXRoaXMuZ2V0TGFzdFpJbmRleCgpfHx0aGlzLmdldE1vZGFsKCkpe3JldHVybn10aGlzLl9pbmNyZWFzZU15WkluZGV4KCIiLCJtb3VzZWRvd24iLGUpfTthLnByb3RvdHlwZS5faW5jcmVhc2VNeVpJbmRleD1mdW5jdGlvbihjLGUsRSl7dmFyIHA9dGhpcy5nZXRQYXJlbnRQb3B1cCh0aGlzLl9vTGFzdFBvc2l0aW9uLm9mKTtpZihFLnR5cGUmJkUudHlwZT09PSJtb3VzZWRvd24ifHxFLmlzRnJvbVBhcmVudFBvcHVwfHxwLmxlbmd0aD09PTApe3RoaXMuX2laSW5kZXg9dGhpcy5nZXROZXh0WkluZGV4KCk7dmFyICQ9dGhpcy5fJCgpOyQuY3NzKCJ6LWluZGV4Iix0aGlzLl9pWkluZGV4KTtpZih0aGlzLl9vQmxpbmRMYXllcil7dGhpcy5fb0JsaW5kTGF5ZXIudXBkYXRlKCQsdGhpcy5faVpJbmRleC0xKX1pZighRS50eXBlfHxFLnR5cGUhPSJtb3VzZWRvd24iKXt2YXIgYj10aGlzLmdldENoaWxkUG9wdXBzKCk7Zm9yKHZhciBpPTAsbD1iLmxlbmd0aDtpPGw7aSsrKXt0aGlzLmluY3JlYXNlWkluZGV4KGJbaV0sdHJ1ZSl9fX1lbHNlIGlmKHAubGVuZ3RoPjApe3RoaXMuaW5jcmVhc2VaSW5kZXgocShwLmdldCgwKSkuYXR0cigiZGF0YS1zYXAtdWktcG9wdXAiKSxmYWxzZSl9fTthLnByb3RvdHlwZS5vbkFmdGVyUmVuZGVyaW5nPWZ1bmN0aW9uKGUpe3ZhciAkPXRoaXMuZ2V0Q29udGVudCgpLiQoKTskLnRvZ2dsZUNsYXNzKCJzYXBVaVNoZCIsdGhpcy5fYlNoYWRvdyk7JC5jc3MoInBvc2l0aW9uIiwiYWJzb2x1dGUiKTt0aGlzLl9zZXRJZGVudGl0eSgkKTt2YXIgYj0kWzBdO3ZhciBsPWIuc3R5bGUubGVmdDt2YXIgYz1iLnN0eWxlLnJpZ2h0O3ZhciB0PWIuc3R5bGUudG9wO3ZhciBkPWIuc3R5bGUuYm90dG9tO2lmKCEobCYmbCE9ImF1dG8ifHxjJiZjIT0iYXV0byJ8fHQmJnQhPSJhdXRvInx8ZCYmZCE9ImF1dG8iKSl7cS5zYXAubG9nLmRlYnVnKCJyZXBvc2l0aW9uIHBvcHVwIGNvbnRlbnQgIiskLmF0dHIoImlkIikrIiBhdCAiKyh3aW5kb3cuSlNPTj9KU09OLnN0cmluZ2lmeSh0aGlzLl9vTGFzdFBvc2l0aW9uLmF0KTpTdHJpbmcodGhpcy5fb0xhc3RQb3NpdGlvbi5hdCkpKTt0aGlzLl9hcHBseVBvc2l0aW9uKHRoaXMuX29MYXN0UG9zaXRpb24pfSQuc2hvdygpLmNzcyh7InZpc2liaWxpdHkiOiJ2aXNpYmxlIiwiei1pbmRleCI6dGhpcy5faVpJbmRleH0pO2lmKHRoaXMuX29CbGluZExheWVyKXt0aGlzLl9yZXNpemVMaXN0ZW5lcklkPXNhcC51aS5jb3JlLlJlc2l6ZUhhbmRsZXIucmVnaXN0ZXIodGhpcy5fJCgpLmdldCgwKSxxLnByb3h5KHRoaXMub25yZXNpemUsdGhpcykpfWlmKHRoaXMuaXNPcGVuKCkmJih0aGlzLmdldE1vZGFsKCl8fHRoaXMuZ2V0QXV0b0Nsb3NlKCkpKXt0aGlzLl9hZGRGb2N1c0V2ZW50TGlzdGVuZXJzKCl9fTthLnByb3RvdHlwZS5vbkJlZm9yZVJlbmRlcmluZz1mdW5jdGlvbihlKXtpZih0aGlzLl9yZXNpemVMaXN0ZW5lcklkKXtzYXAudWkuY29yZS5SZXNpemVIYW5kbGVyLmRlcmVnaXN0ZXIodGhpcy5fcmVzaXplTGlzdGVuZXJJZCk7dGhpcy5fcmVzaXplTGlzdGVuZXJJZD1udWxsfWlmKHRoaXMuaXNPcGVuKCkmJih0aGlzLmdldE1vZGFsKCl8fHRoaXMuZ2V0QXV0b0Nsb3NlKCkpKXt0aGlzLl9yZW1vdmVGb2N1c0V2ZW50TGlzdGVuZXJzKCl9fTthLnByb3RvdHlwZS5vbnJlc2l6ZT1mdW5jdGlvbihlKXtpZih0aGlzLmVPcGVuU3RhdGUhPXNhcC51aS5jb3JlLk9wZW5TdGF0ZS5DTE9TRUQmJnRoaXMuX29CbGluZExheWVyKXt2YXIgdD10aGlzO3NldFRpbWVvdXQoZnVuY3Rpb24oKXt0Ll91cGRhdGVCbGluZExheWVyKCl9LDApfX07YS5wcm90b3R5cGUuX3VwZGF0ZUJsaW5kTGF5ZXI9ZnVuY3Rpb24oKXtpZih0aGlzLmVPcGVuU3RhdGUhPXNhcC51aS5jb3JlLk9wZW5TdGF0ZS5DTE9TRUQmJnRoaXMuX29CbGluZExheWVyKXt0aGlzLl9vQmxpbmRMYXllci51cGRhdGUodGhpcy5fJCgpKX19O3JldHVybiBhfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUuU2Nyb2xsQmFyJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUuU2Nyb2xsQmFyJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvU2Nyb2xsQmFyIixbJy4vbGlicmFyeScsJy4vQ29udHJvbCddLGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO3NhcC51aS5jb3JlLkNvbnRyb2wuZXh0ZW5kKCJzYXAudWkuY29yZS5TY3JvbGxCYXIiLHttZXRhZGF0YTp7cHVibGljTWV0aG9kczpbImJpbmQiLCJ1bmJpbmQiLCJwYWdlVXAiLCJwYWdlRG93biJdLGxpYnJhcnk6InNhcC51aS5jb3JlIixwcm9wZXJ0aWVzOnsidmVydGljYWwiOnt0eXBlOiJib29sZWFuIixncm91cDoiQmVoYXZpb3IiLGRlZmF1bHRWYWx1ZTp0cnVlfSwic2Nyb2xsUG9zaXRpb24iOnt0eXBlOiJpbnQiLGdyb3VwOiJCZWhhdmlvciIsZGVmYXVsdFZhbHVlOm51bGx9LCJzaXplIjp7dHlwZToic2FwLnVpLmNvcmUuQ1NTU2l6ZSIsZ3JvdXA6IkRpbWVuc2lvbiIsZGVmYXVsdFZhbHVlOm51bGx9LCJjb250ZW50U2l6ZSI6e3R5cGU6InNhcC51aS5jb3JlLkNTU1NpemUiLGdyb3VwOiJEaW1lbnNpb24iLGRlZmF1bHRWYWx1ZTpudWxsfSwic3RlcHMiOnt0eXBlOiJpbnQiLGdyb3VwOiJEaW1lbnNpb24iLGRlZmF1bHRWYWx1ZTpudWxsfX0sZXZlbnRzOnsic2Nyb2xsIjp7fX19fSk7c2FwLnVpLmNvcmUuU2Nyb2xsQmFyLk1fRVZFTlRTPXsnc2Nyb2xsJzonc2Nyb2xsJ307c2FwLnVpLmNvcmUuU2Nyb2xsQmFyLnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKCl7dGhpcy5fJFNjcm9sbERvbVJlZj1udWxsO3RoaXMuX2lPbGRTY3JvbGxQb3M9MDt0aGlzLl9pT2xkU3RlcD0wO3RoaXMuX2JTY3JvbGxQb3NJc0NoZWNrZWQ9ZmFsc2U7dGhpcy5fYlJUTD1zYXAudWkuZ2V0Q29yZSgpLmdldENvbmZpZ3VyYXRpb24oKS5nZXRSVEwoKTt0aGlzLl9iU3VwcHJlc3NTY3JvbGw9ZmFsc2U7dGhpcy5faU1heENvbnRlbnREaXZTaXplPTEwMDAwMDA7aWYoalF1ZXJ5LnNhcC50b3VjaEV2ZW50TW9kZT09PSJPTiIpe2pRdWVyeS5zYXAucmVxdWlyZSgic2FwLnVpLnRoaXJkcGFydHkuenluZ2FzY3JvbGwiKTt0aGlzLl9pTGFzdFRvdWNoU2Nyb2xsZXJQb3NpdGlvbj1udWxsO3RoaXMuX2lUb3VjaFN0ZXBUcmVzaG9sZD0yNDt0aGlzLl9iU2tpcFRvdWNoSGFuZGxpbmc9ZmFsc2U7dGhpcy5fb1RvdWNoU2Nyb2xsZXI9bmV3IHdpbmRvdy5TY3JvbGxlcihqUXVlcnkucHJveHkodGhpcy5faGFuZGxlVG91Y2hTY3JvbGwsdGhpcykse2JvdW5jaW5nOmZhbHNlfSl9fTtzYXAudWkuY29yZS5TY3JvbGxCYXIucHJvdG90eXBlLm9uQmVmb3JlUmVuZGVyaW5nPWZ1bmN0aW9uKCl7dGhpcy4kKCJzYiIpLnVuYmluZCgic2Nyb2xsIix0aGlzLm9uc2Nyb2xsKX07c2FwLnVpLmNvcmUuU2Nyb2xsQmFyLnByb3RvdHlwZS5vbkFmdGVyUmVuZGVyaW5nPWZ1bmN0aW9uKCl7dGhpcy5faVN0ZXBzPXRoaXMuZ2V0U3RlcHMoKTt2YXIgYz10aGlzLmdldENvbnRlbnRTaXplKCk7dGhpcy5fYlN0ZXBNb2RlPSFjO3ZhciBzPXRoaXMuZ2V0U2l6ZSgpO2lmKGpRdWVyeS5zYXAuZW5kc1dpdGgocywicHgiKSl7cz1zLnN1YnN0cigwLHMubGVuZ3RoLTIpfWVsc2V7cz10aGlzLmdldFZlcnRpY2FsKCk/dGhpcy4kKCkuaGVpZ2h0KCk6dGhpcy4kKCkud2lkdGgoKX12YXIgYT1udWxsO3ZhciAkPXRoaXMuJCgiZmZzaXplIik7aWYoISFzYXAudWkuRGV2aWNlLmJyb3dzZXIuZmlyZWZveCl7YT0kLm91dGVySGVpZ2h0KCl9JC5yZW1vdmUoKTtpZighIXNhcC51aS5EZXZpY2UuYnJvd3Nlci53ZWJraXQpe2lmKCFkb2N1bWVudC53aWR0aCl7YT1NYXRoLnJvdW5kKDQwLyh3aW5kb3cub3V0ZXJXaWR0aC9qUXVlcnkoZG9jdW1lbnQpLndpZHRoKCkpKX1lbHNle2E9TWF0aC5yb3VuZCg0MC8oZG9jdW1lbnQud2lkdGgvalF1ZXJ5KGRvY3VtZW50KS53aWR0aCgpKSl9fWlmKHRoaXMuZ2V0VmVydGljYWwoKSl7dGhpcy5faUZhY3Rvcj0hIXNhcC51aS5EZXZpY2UuYnJvd3Nlci5maXJlZm94P2E6ISFzYXAudWkuRGV2aWNlLmJyb3dzZXIud2Via2l0P2E6TWF0aC5mbG9vcihzKjAuMTI1KTt0aGlzLl9pRmFjdG9yUGFnZT0hIXNhcC51aS5EZXZpY2UuYnJvd3Nlci5maXJlZm94P3MtYTpNYXRoLmZsb29yKHMqMC44NzUpfWVsc2V7dGhpcy5faUZhY3Rvcj0hIXNhcC51aS5EZXZpY2UuYnJvd3Nlci5maXJlZm94PzEwOiEhc2FwLnVpLkRldmljZS5icm93c2VyLndlYmtpdD9hOjc7dGhpcy5faUZhY3RvclBhZ2U9ISFzYXAudWkuRGV2aWNlLmJyb3dzZXIuZmlyZWZveD9NYXRoLmZsb29yKHMqMC44KTohIXNhcC51aS5EZXZpY2UuYnJvd3Nlci53ZWJraXQ/TWF0aC5mbG9vcihzKjAuODc1KTpzLTE0fXRoaXMuXyRTY3JvbGxEb21SZWY9dGhpcy4kKCJzYiIpO2lmKHRoaXMuX2JTdGVwTW9kZSl7aWYodGhpcy5nZXRWZXJ0aWNhbCgpKXt2YXIgUz10aGlzLl9pU3RlcHMqdGhpcy5faUZhY3RvcjtpZihTPnRoaXMuX2lNYXhDb250ZW50RGl2U2l6ZSl7dGhpcy5faUZhY3Rvcj1NYXRoLmNlaWwodGhpcy5faUZhY3Rvci9NYXRoLmNlaWwoUy90aGlzLl9pTWF4Q29udGVudERpdlNpemUpKX12YXIgQz10aGlzLl8kU2Nyb2xsRG9tUmVmLmhlaWdodCgpK3RoaXMuX2lTdGVwcyp0aGlzLl9pRmFjdG9yO3RoaXMuXyRTY3JvbGxEb21SZWYuZmluZCgiZGl2IikuaGVpZ2h0KEMpfWVsc2V7dmFyIEM9dGhpcy5fJFNjcm9sbERvbVJlZi53aWR0aCgpK3RoaXMuX2lTdGVwcyp0aGlzLl9pRmFjdG9yO3RoaXMuXyRTY3JvbGxEb21SZWYuZmluZCgiZGl2Iikud2lkdGgoQyl9fXRoaXMuc2V0Q2hlY2tlZFNjcm9sbFBvc2l0aW9uKHRoaXMuZ2V0U2Nyb2xsUG9zaXRpb24oKT90aGlzLmdldFNjcm9sbFBvc2l0aW9uKCk6MCx0cnVlKTt0aGlzLl8kU2Nyb2xsRG9tUmVmLmJpbmQoInNjcm9sbCIsalF1ZXJ5LnByb3h5KHRoaXMub25zY3JvbGwsdGhpcykpO2lmKGpRdWVyeS5zYXAudG91Y2hFdmVudE1vZGU9PT0iT04iKXt0aGlzLl9iU2tpcFRvdWNoSGFuZGxpbmc9dHJ1ZTt2YXIgbz17d2lkdGg6MCxoZWlnaHQ6MH07b1t0aGlzLmdldFZlcnRpY2FsKCk/ImhlaWdodCI6IndpZHRoIl09dGhpcy5fYlN0ZXBNb2RlPyh0aGlzLmdldFN0ZXBzKCkqdGhpcy5faVRvdWNoU3RlcFRyZXNob2xkKTpwYXJzZUludCh0aGlzLmdldENvbnRlbnRTaXplKCksMTApO3RoaXMuX29Ub3VjaFNjcm9sbGVyLnNldERpbWVuc2lvbnMoMCwwLG8ud2lkdGgsby5oZWlnaHQpO3ZhciBlPXRoaXMuXyRTY3JvbGxEb21SZWYuZ2V0KDApO3ZhciByPWUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7dGhpcy5fb1RvdWNoU2Nyb2xsZXIuc2V0UG9zaXRpb24oci5sZWZ0K2UuY2xpZW50TGVmdCxyLnRvcCtlLmNsaWVudFRvcCk7dGhpcy5fYlNraXBUb3VjaEhhbmRsaW5nPWZhbHNlfX07c2FwLnVpLmNvcmUuU2Nyb2xsQmFyLnByb3RvdHlwZS5vbm1vdXNld2hlZWw9ZnVuY3Rpb24oZSl7aWYodGhpcy4kKCkuaXMoIjp2aXNpYmxlIikpe3ZhciBvPWUub3JpZ2luYWxFdmVudDt2YXIgdz1vLmRldGFpbD9vLmRldGFpbDpvLndoZWVsRGVsdGEqKC0xKS80MDt2YXIgZj13PjA/dHJ1ZTpmYWxzZTtpZihqUXVlcnkuc2FwLmNvbnRhaW5zT3JFcXVhbHModGhpcy5fJFNjcm9sbERvbVJlZlswXSxlLnRhcmdldCkpe3RoaXMuX2RvU2Nyb2xsKHNhcC51aS5jb3JlLlNjcm9sbEJhckFjdGlvbi5Nb3VzZVdoZWVsLGYpfWVsc2V7dGhpcy5fYk1vdXNlV2hlZWw9dHJ1ZTt2YXIgcD1udWxsO2lmKHRoaXMuX2JTdGVwTW9kZSl7cD13K3RoaXMuX2lPbGRTdGVwfWVsc2V7cD13KnRoaXMuX2lGYWN0b3IrdGhpcy5faU9sZFNjcm9sbFBvc310aGlzLnNldENoZWNrZWRTY3JvbGxQb3NpdGlvbihwLHRydWUpfWUucHJldmVudERlZmF1bHQoKTtlLnN0b3BQcm9wYWdhdGlvbigpO3JldHVybiBmYWxzZX19O3NhcC51aS5jb3JlLlNjcm9sbEJhci5wcm90b3R5cGUub250b3VjaHN0YXJ0PWZ1bmN0aW9uKGUpe3ZhciB0PWUudG91Y2hlczt2YXIgZj10WzBdO2lmKGYmJmYudGFyZ2V0JiZmLnRhcmdldC50YWdOYW1lLm1hdGNoKC9pbnB1dHx0ZXh0YXJlYXxzZWxlY3QvaSkpe3JldHVybn1pZih0aGlzLl9vVG91Y2hTY3JvbGxlcil7dGhpcy5fb1RvdWNoU2Nyb2xsZXIuZG9Ub3VjaFN0YXJ0KHQsZS50aW1lU3RhbXApfWlmKHQubGVuZ3RoPT0xKXtlLnByZXZlbnREZWZhdWx0KCl9fTtzYXAudWkuY29yZS5TY3JvbGxCYXIucHJvdG90eXBlLm9udG91Y2htb3ZlPWZ1bmN0aW9uKGUpe2lmKHRoaXMuX29Ub3VjaFNjcm9sbGVyKXt0aGlzLl9vVG91Y2hTY3JvbGxlci5kb1RvdWNoTW92ZShlLnRvdWNoZXMsZS50aW1lU3RhbXAsZS5zY2FsZSl9fTtzYXAudWkuY29yZS5TY3JvbGxCYXIucHJvdG90eXBlLm9udG91Y2hlbmQ9ZnVuY3Rpb24oZSl7aWYodGhpcy5fb1RvdWNoU2Nyb2xsZXIpe3RoaXMuX29Ub3VjaFNjcm9sbGVyLmRvVG91Y2hFbmQoZS50aW1lU3RhbXApfX07c2FwLnVpLmNvcmUuU2Nyb2xsQmFyLnByb3RvdHlwZS5vbnRvdWNoY2FuY2VsPWZ1bmN0aW9uKGUpe2lmKHRoaXMuX29Ub3VjaFNjcm9sbGVyKXt0aGlzLl9vVG91Y2hTY3JvbGxlci5kb1RvdWNoRW5kKGUudGltZVN0YW1wKX19O3NhcC51aS5jb3JlLlNjcm9sbEJhci5wcm90b3R5cGUub25zY3JvbGw9ZnVuY3Rpb24oZSl7aWYodGhpcy5fYlN1cHByZXNzU2Nyb2xsKXt0aGlzLl9iU3VwcHJlc3NTY3JvbGw9ZmFsc2U7ZS5wcmV2ZW50RGVmYXVsdCgpO2Uuc3RvcFByb3BhZ2F0aW9uKCk7cmV0dXJuIGZhbHNlfXZhciBzPW51bGw7aWYodGhpcy5fJFNjcm9sbERvbVJlZil7aWYodGhpcy5nZXRWZXJ0aWNhbCgpKXtzPXRoaXMuXyRTY3JvbGxEb21SZWYuc2Nyb2xsVG9wKCl9ZWxzZXtzPXRoaXMuXyRTY3JvbGxEb21SZWYuc2Nyb2xsTGVmdCgpO2lmKCEhc2FwLnVpLkRldmljZS5icm93c2VyLmZpcmVmb3gmJnRoaXMuX2JSVEwpe3M9TWF0aC5hYnMocyl9ZWxzZSBpZighIXNhcC51aS5EZXZpY2UuYnJvd3Nlci53ZWJraXQmJnRoaXMuX2JSVEwpe3ZhciBTPXRoaXMuXyRTY3JvbGxEb21SZWYuZ2V0KDApO3M9Uy5zY3JvbGxXaWR0aC1TLmNsaWVudFdpZHRoLVMuc2Nyb2xsTGVmdH19fXZhciBkPXMtdGhpcy5faU9sZFNjcm9sbFBvczt2YXIgZj1kPjA/dHJ1ZTpmYWxzZTtpZihkPDApe2Q9ZCooLTEpfXZhciBhPXNhcC51aS5jb3JlLlNjcm9sbEJhckFjdGlvbi5EcmFnO2lmKGQ9PXRoaXMuX2lGYWN0b3Ipe2E9c2FwLnVpLmNvcmUuU2Nyb2xsQmFyQWN0aW9uLlN0ZXB9ZWxzZSBpZihkPT10aGlzLl9pRmFjdG9yUGFnZSl7YT1zYXAudWkuY29yZS5TY3JvbGxCYXJBY3Rpb24uUGFnZX1lbHNlIGlmKHRoaXMuX2JNb3VzZVdoZWVsKXthPXNhcC51aS5jb3JlLlNjcm9sbEJhckFjdGlvbi5Nb3VzZVdoZWVsfXRoaXMuX2RvU2Nyb2xsKGEsZik7ZS5wcmV2ZW50RGVmYXVsdCgpO2Uuc3RvcFByb3BhZ2F0aW9uKCk7cmV0dXJuIGZhbHNlfTtzYXAudWkuY29yZS5TY3JvbGxCYXIucHJvdG90eXBlLl9oYW5kbGVUb3VjaFNjcm9sbD1mdW5jdGlvbihsLHQseil7aWYodGhpcy5fYlNraXBUb3VjaEhhbmRsaW5nKXtyZXR1cm59dmFyIHY9dGhpcy5nZXRWZXJ0aWNhbCgpP3Q6bDtpZih0aGlzLl9iU3RlcE1vZGUpe3ZhciBwPU1hdGgubWF4KE1hdGgucm91bmQodi90aGlzLl9pVG91Y2hTdGVwVHJlc2hvbGQpLDApfWVsc2V7dmFyIHA9TWF0aC5yb3VuZCh2KX1pZih0aGlzLl9pTGFzdFRvdWNoU2Nyb2xsZXJQb3NpdGlvbiE9PXApe3RoaXMuX2lMYXN0VG91Y2hTY3JvbGxlclBvc2l0aW9uPXA7dGhpcy5zZXRDaGVja2VkU2Nyb2xsUG9zaXRpb24ocCx0cnVlKTt0aGlzLmZpcmVTY3JvbGwoKX19O3NhcC51aS5jb3JlLlNjcm9sbEJhci5wcm90b3R5cGUudW5iaW5kPWZ1bmN0aW9uKG8pe2lmKG8pe3RoaXMuXyRPd25lckRvbVJlZj1qUXVlcnkobyk7aWYodGhpcy5nZXRWZXJ0aWNhbCgpKXt0aGlzLl8kT3duZXJEb21SZWYudW5iaW5kKCEhc2FwLnVpLkRldmljZS5icm93c2VyLmZpcmVmb3g/IkRPTU1vdXNlU2Nyb2xsIjoibW91c2V3aGVlbCIsdGhpcy5vbm1vdXNld2hlZWwpfWlmKGpRdWVyeS5zYXAudG91Y2hFdmVudE1vZGU9PT0iT04iKXt0aGlzLl8kT3duZXJEb21SZWYudW5iaW5kKHRoaXMuX2dldFRvdWNoRXZlbnRUeXBlKCJ0b3VjaHN0YXJ0IiksalF1ZXJ5LnByb3h5KHRoaXMub250b3VjaHN0YXJ0LHRoaXMpKTt0aGlzLl8kT3duZXJEb21SZWYudW5iaW5kKHRoaXMuX2dldFRvdWNoRXZlbnRUeXBlKCJ0b3VjaG1vdmUiKSxqUXVlcnkucHJveHkodGhpcy5vbnRvdWNobW92ZSx0aGlzKSk7dGhpcy5fJE93bmVyRG9tUmVmLnVuYmluZCh0aGlzLl9nZXRUb3VjaEV2ZW50VHlwZSgidG91Y2hlbmQiKSxqUXVlcnkucHJveHkodGhpcy5vbnRvdWNoZW5kLHRoaXMpKTt0aGlzLl8kT3duZXJEb21SZWYudW5iaW5kKHRoaXMuX2dldFRvdWNoRXZlbnRUeXBlKCJ0b3VjaGNhbmNsZSIpLGpRdWVyeS5wcm94eSh0aGlzLm9udG91Y2hjYW5jbGUsdGhpcykpfX19O3NhcC51aS5jb3JlLlNjcm9sbEJhci5wcm90b3R5cGUuYmluZD1mdW5jdGlvbihvKXtpZihvKXt0aGlzLl8kT3duZXJEb21SZWY9alF1ZXJ5KG8pO2lmKHRoaXMuZ2V0VmVydGljYWwoKSl7dGhpcy5fJE93bmVyRG9tUmVmLmJpbmQoISFzYXAudWkuRGV2aWNlLmJyb3dzZXIuZmlyZWZveD8iRE9NTW91c2VTY3JvbGwiOiJtb3VzZXdoZWVsIixqUXVlcnkucHJveHkodGhpcy5vbm1vdXNld2hlZWwsdGhpcykpfWlmKGpRdWVyeS5zYXAudG91Y2hFdmVudE1vZGU9PT0iT04iKXt0aGlzLl8kT3duZXJEb21SZWYuYmluZCh0aGlzLl9nZXRUb3VjaEV2ZW50VHlwZSgidG91Y2hzdGFydCIpLGpRdWVyeS5wcm94eSh0aGlzLm9udG91Y2hzdGFydCx0aGlzKSk7dGhpcy5fJE93bmVyRG9tUmVmLmJpbmQodGhpcy5fZ2V0VG91Y2hFdmVudFR5cGUoInRvdWNobW92ZSIpLGpRdWVyeS5wcm94eSh0aGlzLm9udG91Y2htb3ZlLHRoaXMpKTt0aGlzLl8kT3duZXJEb21SZWYuYmluZCh0aGlzLl9nZXRUb3VjaEV2ZW50VHlwZSgidG91Y2hlbmQiKSxqUXVlcnkucHJveHkodGhpcy5vbnRvdWNoZW5kLHRoaXMpKTt0aGlzLl8kT3duZXJEb21SZWYuYmluZCh0aGlzLl9nZXRUb3VjaEV2ZW50VHlwZSgidG91Y2hjYW5jbGUiKSxqUXVlcnkucHJveHkodGhpcy5vbnRvdWNoY2FuY2xlLHRoaXMpKX19fTtzYXAudWkuY29yZS5TY3JvbGxCYXIucHJvdG90eXBlLl9nZXRUb3VjaEV2ZW50VHlwZT1mdW5jdGlvbih0KXtyZXR1cm4galF1ZXJ5LnNhcC50b3VjaEV2ZW50TW9kZT09PSJTSU0iPygic2FwIit0KTp0fTtzYXAudWkuY29yZS5TY3JvbGxCYXIucHJvdG90eXBlLnBhZ2VVcD1mdW5jdGlvbigpe3RoaXMuX2RvU2Nyb2xsKHNhcC51aS5jb3JlLlNjcm9sbEJhckFjdGlvbi5QYWdlLGZhbHNlKX07c2FwLnVpLmNvcmUuU2Nyb2xsQmFyLnByb3RvdHlwZS5wYWdlRG93bj1mdW5jdGlvbigpe3RoaXMuX2RvU2Nyb2xsKHNhcC51aS5jb3JlLlNjcm9sbEJhckFjdGlvbi5QYWdlLHRydWUpfTtzYXAudWkuY29yZS5TY3JvbGxCYXIucHJvdG90eXBlLnNldFNjcm9sbFBvc2l0aW9uPWZ1bmN0aW9uKHMpe2lmKHRoaXMuXyRTY3JvbGxEb21SZWYpe3RoaXMuc2V0Q2hlY2tlZFNjcm9sbFBvc2l0aW9uKHMsdHJ1ZSl9ZWxzZXt0aGlzLnNldFByb3BlcnR5KCJzY3JvbGxQb3NpdGlvbiIscyl9cmV0dXJuIHRoaXN9O3NhcC51aS5jb3JlLlNjcm9sbEJhci5wcm90b3R5cGUuc2V0Q2hlY2tlZFNjcm9sbFBvc2l0aW9uPWZ1bmN0aW9uKHMsYyl7dmFyIEM9TWF0aC5tYXgocywwKTtpZih0aGlzLl9iU3RlcE1vZGU9PT11bmRlZmluZWQpe3RoaXMuX2JTdGVwTW9kZT0hdGhpcy5nZXRDb250ZW50U2l6ZSgpfXZhciBTPUM7aWYodGhpcy5fYlN0ZXBNb2RlKXtDPU1hdGgubWluKEMsdGhpcy5nZXRTdGVwcygpKTtTPUMqdGhpcy5faUZhY3Rvcn1DPU1hdGguZmxvb3IoQyk7dGhpcy5fYlN1cHByZXNzU2Nyb2xsPSFjO3RoaXMuc2V0UHJvcGVydHkoInNjcm9sbFBvc2l0aW9uIixDLHRydWUpO2lmKHRoaXMuZ2V0VmVydGljYWwoKSl7dGhpcy5fJFNjcm9sbERvbVJlZi5zY3JvbGxUb3AoUyl9ZWxzZXtpZighIXNhcC51aS5EZXZpY2UuYnJvd3Nlci5maXJlZm94JiZ0aGlzLl9iUlRMKXt0aGlzLl8kU2Nyb2xsRG9tUmVmLnNjcm9sbExlZnQoLVMpfWVsc2UgaWYoISFzYXAudWkuRGV2aWNlLmJyb3dzZXIud2Via2l0JiZ0aGlzLl9iUlRMKXt2YXIgbz10aGlzLl8kU2Nyb2xsRG9tUmVmLmdldCgwKTt0aGlzLl8kU2Nyb2xsRG9tUmVmLnNjcm9sbExlZnQoby5zY3JvbGxXaWR0aC1vLmNsaWVudFdpZHRoLVMpfWVsc2V7dGhpcy5fJFNjcm9sbERvbVJlZi5zY3JvbGxMZWZ0KFMpfX1pZihqUXVlcnkuc2FwLnRvdWNoRXZlbnRNb2RlPT09Ik9OIil7dmFyIHY9QztpZih0aGlzLl9iU3RlcE1vZGUpe3Y9TWF0aC5yb3VuZChDKnRoaXMuX2lUb3VjaFN0ZXBUcmVzaG9sZCl9dGhpcy5fb1RvdWNoU2Nyb2xsZXIuX19zY3JvbGxUb3A9dGhpcy5nZXRWZXJ0aWNhbCgpP3Y6MDt0aGlzLl9vVG91Y2hTY3JvbGxlci5fX3Njcm9sbExlZnQ9dGhpcy5nZXRWZXJ0aWNhbCgpPzA6dn19O3NhcC51aS5jb3JlLlNjcm9sbEJhci5wcm90b3R5cGUuc2V0Q29udGVudFNpemU9ZnVuY3Rpb24oYyl7dGhpcy5zZXRQcm9wZXJ0eSgiY29udGVudFNpemUiLGMpO3RoaXMuX2JTdGVwTW9kZT1mYWxzZTt2YXIgcz10aGlzLiQoInNiY250Iik7aWYocyl7aWYodGhpcy5nZXRWZXJ0aWNhbCgpKXtzLmhlaWdodChjKX1lbHNle3Mud2lkdGgoYyl9fXJldHVybiB0aGlzfTtzYXAudWkuY29yZS5TY3JvbGxCYXIucHJvdG90eXBlLl9kb1Njcm9sbD1mdW5jdGlvbihlLGYpe3ZhciBzPW51bGw7aWYodGhpcy5fJFNjcm9sbERvbVJlZil7aWYodGhpcy5nZXRWZXJ0aWNhbCgpKXtzPXRoaXMuXyRTY3JvbGxEb21SZWYuc2Nyb2xsVG9wKCl9ZWxzZXtzPXRoaXMuXyRTY3JvbGxEb21SZWYuc2Nyb2xsTGVmdCgpO2lmKCEhc2FwLnVpLkRldmljZS5icm93c2VyLmZpcmVmb3gmJnRoaXMuX2JSVEwpe3M9TWF0aC5hYnMocyl9ZWxzZSBpZighIXNhcC51aS5EZXZpY2UuYnJvd3Nlci53ZWJraXQmJnRoaXMuX2JSVEwpe3ZhciBTPXRoaXMuXyRTY3JvbGxEb21SZWYuZ2V0KDApO3M9Uy5zY3JvbGxXaWR0aC1TLmNsaWVudFdpZHRoLVMuc2Nyb2xsTGVmdH19fWlmKHRoaXMuX2JTdGVwTW9kZSl7dmFyIGk9TWF0aC5yb3VuZChzL3RoaXMuX2lGYWN0b3IpO3ZhciBvPXRoaXMuX2lPbGRTdGVwO2lmKG8hPT1pKXt0aGlzLnNldENoZWNrZWRTY3JvbGxQb3NpdGlvbihpLGZhbHNlKTtqUXVlcnkuc2FwLmxvZy5kZWJ1ZygiLS0tLS1TVEVQTU9ERS0tLS0tOiBOZXcgU3RlcDogIitpKyIgLS0tIE9sZCBTdGVwOiAiK28rIiAtLS0gU2Nyb2xsIFBvcyBpbiBweDogIitzKyIgLS0tIEFjdGlvbjogIitlKyIgLS0tIERpcmVjdGlvbiBpcyBmb3J3YXJkOiAiK2YpO3RoaXMuZmlyZVNjcm9sbCh7YWN0aW9uOmUsZm9yd2FyZDpmLG5ld1Njcm9sbFBvczppLG9sZFNjcm9sbFBvczpvfSk7dGhpcy5faU9sZFN0ZXA9aX19ZWxzZXt0aGlzLnNldFByb3BlcnR5KCJzY3JvbGxQb3NpdGlvbiIscyx0cnVlKTtqUXVlcnkuc2FwLmxvZy5kZWJ1ZygiLS0tLS1QSVhFTE1PREUtLS0tLTogTmV3IFNjcm9sbFBvczogIitzKyIgLS0tIE9sZCBTY3JvbGxQb3M6ICIrdGhpcy5faU9sZFNjcm9sbFBvcysiIC0tLSBBY3Rpb246ICIrZSsiIC0tLSBEaXJlY3Rpb24gaXMgZm9yd2FyZDogIitmKTt0aGlzLmZpcmVTY3JvbGwoe2FjdGlvbjplLGZvcndhcmQ6ZixuZXdTY3JvbGxQb3M6cyxvbGRTY3JvbGxQb3M6dGhpcy5faU9sZFNjcm9sbFBvc30pfXRoaXMuX2JTdXBwcmVzc1Njcm9sbD1mYWxzZTt0aGlzLl9pT2xkU2Nyb2xsUG9zPXM7dGhpcy5fYk1vdXNlV2hlZWw9ZmFsc2V9O3NhcC51aS5jb3JlLlNjcm9sbEJhci5wcm90b3R5cGUub25UaGVtZUNoYW5nZWQ9ZnVuY3Rpb24oKXt0aGlzLnJlcmVuZGVyKCl9O3NhcC51aS5jb3JlLlNjcm9sbEJhci5wcm90b3R5cGUuZ2V0TmF0aXZlU2Nyb2xsUG9zaXRpb249ZnVuY3Rpb24oKXtpZih0aGlzLl8kU2Nyb2xsRG9tUmVmKXtpZih0aGlzLmdldFZlcnRpY2FsKCkpe3JldHVybiB0aGlzLl8kU2Nyb2xsRG9tUmVmLnNjcm9sbFRvcCgpfWVsc2V7cmV0dXJuIHRoaXMuXyRTY3JvbGxEb21SZWYuc2Nyb2xsTGVmdCgpfX1yZXR1cm4gMH07c2FwLnVpLmNvcmUuU2Nyb2xsQmFyLnByb3RvdHlwZS5zZXROYXRpdmVTY3JvbGxQb3NpdGlvbj1mdW5jdGlvbihuKXtpZih0aGlzLl8kU2Nyb2xsRG9tUmVmKXtpZih0aGlzLmdldFZlcnRpY2FsKCkpe3RoaXMuXyRTY3JvbGxEb21SZWYuc2Nyb2xsVG9wKG4pfWVsc2V7dGhpcy5fJFNjcm9sbERvbVJlZi5zY3JvbGxMZWZ0KG4pfX19O3JldHVybiBzYXAudWkuY29yZS5TY3JvbGxCYXJ9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS5TZXBhcmF0b3JJdGVtJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUuU2VwYXJhdG9ySXRlbScpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL1NlcGFyYXRvckl0ZW0iLFsnLi9saWJyYXJ5JywnLi9JdGVtJ10sZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7c2FwLnVpLmNvcmUuSXRlbS5leHRlbmQoInNhcC51aS5jb3JlLlNlcGFyYXRvckl0ZW0iLHttZXRhZGF0YTp7bGlicmFyeToic2FwLnVpLmNvcmUifX0pO3JldHVybiBzYXAudWkuY29yZS5TZXBhcmF0b3JJdGVtfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUuVGl0bGUnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS5UaXRsZScpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL1RpdGxlIixbJy4vbGlicmFyeScsJy4vRWxlbWVudCddLGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO3NhcC51aS5jb3JlLkVsZW1lbnQuZXh0ZW5kKCJzYXAudWkuY29yZS5UaXRsZSIse21ldGFkYXRhOntsaWJyYXJ5OiJzYXAudWkuY29yZSIscHJvcGVydGllczp7InRleHQiOnt0eXBlOiJzdHJpbmciLGdyb3VwOiJBcHBlYXJhbmNlIixkZWZhdWx0VmFsdWU6bnVsbH0sImljb24iOnt0eXBlOiJzYXAudWkuY29yZS5VUkkiLGdyb3VwOiJBcHBlYXJhbmNlIixkZWZhdWx0VmFsdWU6bnVsbH0sImxldmVsIjp7dHlwZToic2FwLnVpLmNvcmUuVGl0bGVMZXZlbCIsZ3JvdXA6IkFwcGVhcmFuY2UiLGRlZmF1bHRWYWx1ZTpzYXAudWkuY29yZS5UaXRsZUxldmVsLkF1dG99LCJlbXBoYXNpemVkIjp7dHlwZToiYm9vbGVhbiIsZ3JvdXA6IkFwcGVhcmFuY2UiLGRlZmF1bHRWYWx1ZTpmYWxzZX19fX0pO3JldHVybiBzYXAudWkuY29yZS5UaXRsZX0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLlRvb2x0aXBCYXNlJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUuVG9vbHRpcEJhc2UnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9Ub29sdGlwQmFzZSIsWycuL2xpYnJhcnknLCcuL0NvbnRyb2wnLCcuL1BvcHVwJ10sZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7c2FwLnVpLmNvcmUuQ29udHJvbC5leHRlbmQoInNhcC51aS5jb3JlLlRvb2x0aXBCYXNlIix7bWV0YWRhdGE6eyJhYnN0cmFjdCI6dHJ1ZSxsaWJyYXJ5OiJzYXAudWkuY29yZSIscHJvcGVydGllczp7InRleHQiOnt0eXBlOiJzdHJpbmciLGdyb3VwOiJNaXNjIixkZWZhdWx0VmFsdWU6IiJ9LCJvcGVuRHVyYXRpb24iOnt0eXBlOiJpbnQiLGdyb3VwOiJCZWhhdmlvciIsZGVmYXVsdFZhbHVlOjIwMH0sImNsb3NlRHVyYXRpb24iOnt0eXBlOiJpbnQiLGdyb3VwOiJCZWhhdmlvciIsZGVmYXVsdFZhbHVlOjIwMH0sIm15UG9zaXRpb24iOnt0eXBlOiJzYXAudWkuY29yZS5Eb2NrIixncm91cDoiQmVoYXZpb3IiLGRlZmF1bHRWYWx1ZTonYmVnaW4gdG9wJ30sImF0UG9zaXRpb24iOnt0eXBlOiJzYXAudWkuY29yZS5Eb2NrIixncm91cDoiQmVoYXZpb3IiLGRlZmF1bHRWYWx1ZTonYmVnaW4gYm90dG9tJ30sIm9mZnNldCI6e3R5cGU6InN0cmluZyIsZ3JvdXA6IkJlaGF2aW9yIixkZWZhdWx0VmFsdWU6JzEwIDMnfSwiY29sbGlzaW9uIjp7dHlwZToic2FwLnVpLmNvcmUuQ29sbGlzaW9uIixncm91cDoiQmVoYXZpb3IiLGRlZmF1bHRWYWx1ZTonZmxpcCd9LCJvcGVuRGVsYXkiOnt0eXBlOiJpbnQiLGdyb3VwOiJNaXNjIixkZWZhdWx0VmFsdWU6NTAwfSwiY2xvc2VEZWxheSI6e3R5cGU6ImludCIsZ3JvdXA6Ik1pc2MiLGRlZmF1bHRWYWx1ZToxMDB9fSxldmVudHM6eyJjbG9zZWQiOnt9fX19KTtzYXAudWkuY29yZS5Ub29sdGlwQmFzZS5NX0VWRU5UUz17J2Nsb3NlZCc6J2Nsb3NlZCd9O3NhcC51aS5jb3JlLlRvb2x0aXBCYXNlLnByb3RvdHlwZS5fZ2V0UG9wdXA9alF1ZXJ5LnNhcC5nZXR0ZXIoKGZ1bmN0aW9uKCl7dmFyIHA9bmV3IHNhcC51aS5jb3JlLlBvcHVwKCk7cC5zZXRTaGFkb3codHJ1ZSk7cmV0dXJuIHB9KCkpKTtzYXAudWkuY29yZS5Ub29sdGlwQmFzZS5wcm90b3R5cGUub25mb2N1c2luPWZ1bmN0aW9uKGUpe3ZhciBzPWpRdWVyeShlLnRhcmdldCkuY29udHJvbCgwKTtpZihzIT1udWxsKXt2YXIgZD1zLmdldEZvY3VzRG9tUmVmKCk7dGhpcy5zU3RvcmVkVG9vbHRpcD1udWxsO2lmKGQudGl0bGUmJmQudGl0bGUhPSIiKXt0aGlzLnNTdG9yZWRUb29sdGlwPWQudGl0bGU7ZC50aXRsZT0iIn12YXIgcD10aGlzLl9nZXRQb3B1cCgpO2lmKCEocC5pc09wZW4oKSYmcC5nZXRDb250ZW50KCk9PXRoaXMpKXtzYXAudWkuZ2V0Q29yZSgpLmdldFJlbmRlck1hbmFnZXIoKS5yZW5kZXIodGhpcyxzYXAudWkuZ2V0Q29yZSgpLmdldFN0YXRpY0FyZWFSZWYoKSx0cnVlKX12YXIgdj1kLmdldEF0dHJpYnV0ZSgiYXJpYS1kZXNjcmliZWRieSIpO3ZhciBpPXRoaXMuZ2V0SWQoKSsiLXRpdGxlICIrdGhpcy5nZXRJZCgpKyItdHh0IjtpZih2PT1udWxsfHx2PT0iIil7ZC5zZXRBdHRyaWJ1dGUoImFyaWEtZGVzY3JpYmVkYnkiLGkpfWVsc2UgaWYodi5pbmRleE9mKGkpPT0tMSl7ZC5zZXRBdHRyaWJ1dGUoImFyaWEtZGVzY3JpYmVkYnkiLHYrIiAiK2kpfX19O3NhcC51aS5jb3JlLlRvb2x0aXBCYXNlLnByb3RvdHlwZS5vbmZvY3Vzb3V0PWZ1bmN0aW9uKGUpe3ZhciBzPWpRdWVyeShlLnRhcmdldCkuY29udHJvbCgwKTtpZihzIT1udWxsKXt2YXIgZD1zLmdldEZvY3VzRG9tUmVmKCk7aWYodGhpcy5zU3RvcmVkVG9vbHRpcCl7ZC50aXRsZT10aGlzLnNTdG9yZWRUb29sdGlwfXZhciB2PWQuZ2V0QXR0cmlidXRlKCJhcmlhLWRlc2NyaWJlZGJ5Iik7dmFyIGk9dGhpcy5nZXRJZCgpKyItdGl0bGUgIit0aGlzLmdldElkKCkrIi10eHQiO2lmKHYmJnYuaW5kZXhPZihpKT49MCl7aWYoalF1ZXJ5LnRyaW0odik9PWkpe2QucmVtb3ZlQXR0cmlidXRlKCJhcmlhLWRlc2NyaWJlZGJ5Iil9ZWxzZXt2PXYucmVwbGFjZShpLCIiKTtkLnNldEF0dHJpYnV0ZSgiYXJpYS1kZXNjcmliZWRieSIsdil9fX1pZihzYXAudWkuY29yZS5Ub29sdGlwQmFzZS5zT3BlblRpbWVvdXQpe2pRdWVyeS5zYXAuY2xlYXJEZWxheWVkQ2FsbChzYXAudWkuY29yZS5Ub29sdGlwQmFzZS5zT3BlblRpbWVvdXQpO3NhcC51aS5jb3JlLlRvb2x0aXBCYXNlLnNPcGVuVGltZW91dD11bmRlZmluZWR9dGhpcy5zQ2xvc2VOb3dUaW1lb3V0PWpRdWVyeS5zYXAuZGVsYXllZENhbGwodGhpcy5nZXRDbG9zZURlbGF5KCksdGhpcywiY2xvc2VQb3B1cCIpfTtzYXAudWkuY29yZS5Ub29sdGlwQmFzZS5wcm90b3R5cGUuaXNTdGFuZGFyZFRvb2x0aXA9ZnVuY3Rpb24odCl7cmV0dXJuKHR5cGVvZiB0PT09InN0cmluZyImJihqUXVlcnkudHJpbSh0KSkhPT0iIil9O3NhcC51aS5jb3JlLlRvb2x0aXBCYXNlLnByb3RvdHlwZS5vbm1vdXNlb3Zlcj1mdW5jdGlvbihlKXt2YXIgRT1qUXVlcnkoZS50YXJnZXQpLmNvbnRyb2woMCk7aWYoRSE9bnVsbCl7aWYoRT09PXRoaXMpe2lmKHRoaXMuc0Nsb3NlTm93VGltZW91dCl7alF1ZXJ5LnNhcC5jbGVhckRlbGF5ZWRDYWxsKHRoaXMuc0Nsb3NlTm93VGltZW91dCk7dGhpcy5zQ2xvc2VOb3dUaW1lb3V0PW51bGx9ZS5zdG9wUHJvcGFnYXRpb24oKTtlLnByZXZlbnREZWZhdWx0KCk7cmV0dXJufXZhciBjPWpRdWVyeShlLmN1cnJlbnRUYXJnZXQpLmNvbnRyb2woMCk7aWYoYyE9PUUmJiF0aGlzLmlzU3RhbmRhcmRUb29sdGlwKEUuZ2V0VG9vbHRpcCgpKSl7aWYodGhpcy5zQ2xvc2VOb3dUaW1lb3V0KXtqUXVlcnkuc2FwLmNsZWFyRGVsYXllZENhbGwodGhpcy5zQ2xvc2VOb3dUaW1lb3V0KTt0aGlzLnNDbG9zZU5vd1RpbWVvdXQ9bnVsbDtlLnN0b3BQcm9wYWdhdGlvbigpO2UucHJldmVudERlZmF1bHQoKTtyZXR1cm59fXZhciBsPWpRdWVyeShlLnJlbGF0ZWRUYXJnZXQpLmNvbnRyb2woMCk7aWYobCl7aWYobC5nZXRQYXJlbnQoKSl7aWYobC5nZXRQYXJlbnQoKT09PWMmJmM9PT1FKXt2YXIgTD1sLmdldFRvb2x0aXAoKTtpZighdGhpcy5pc1N0YW5kYXJkVG9vbHRpcChMKSYmKCFMfHwhKEwgaW5zdGFuY2VvZiBzYXAudWkuY29yZS5Ub29sdGlwQmFzZSkpKXtpZih0aGlzLnNDbG9zZU5vd1RpbWVvdXQpe2pRdWVyeS5zYXAuY2xlYXJEZWxheWVkQ2FsbCh0aGlzLnNDbG9zZU5vd1RpbWVvdXQpO3RoaXMuc0Nsb3NlTm93VGltZW91dD1udWxsO2Uuc3RvcFByb3BhZ2F0aW9uKCk7ZS5wcmV2ZW50RGVmYXVsdCgpO3JldHVybn19fX19aWYodGhpcy5fY3VycmVudENvbnRyb2w9PT1FfHwhdGhpcy5pc1N0YW5kYXJkVG9vbHRpcChFLmdldFRvb2x0aXAoKSkpe3RoaXMucmVtb3ZlU3RhbmRhcmRUb29sdGlwcyhFKTtpZihzYXAudWkuY29yZS5Ub29sdGlwQmFzZS5zT3BlblRpbWVvdXQpe2pRdWVyeS5zYXAuY2xlYXJEZWxheWVkQ2FsbChzYXAudWkuY29yZS5Ub29sdGlwQmFzZS5zT3BlblRpbWVvdXQpfXNhcC51aS5jb3JlLlRvb2x0aXBCYXNlLnNPcGVuVGltZW91dD1qUXVlcnkuc2FwLmRlbGF5ZWRDYWxsKHRoaXMuZ2V0T3BlbkRlbGF5KCksdGhpcywib3BlblBvcHVwIixbdGhpcy5fY3VycmVudENvbnRyb2xdKTtlLnN0b3BQcm9wYWdhdGlvbigpO2UucHJldmVudERlZmF1bHQoKX19fTtzYXAudWkuY29yZS5Ub29sdGlwQmFzZS5wcm90b3R5cGUub25tb3VzZW91dD1mdW5jdGlvbihlKXtpZihzYXAudWkuY29yZS5Ub29sdGlwQmFzZS5zT3BlblRpbWVvdXQpe2pRdWVyeS5zYXAuY2xlYXJEZWxheWVkQ2FsbChzYXAudWkuY29yZS5Ub29sdGlwQmFzZS5zT3BlblRpbWVvdXQpO3NhcC51aS5jb3JlLlRvb2x0aXBCYXNlLnNPcGVuVGltZW91dD11bmRlZmluZWR9aWYoIXRoaXMuc0Nsb3NlTm93VGltZW91dCl7dGhpcy5zQ2xvc2VOb3dUaW1lb3V0PWpRdWVyeS5zYXAuZGVsYXllZENhbGwodGhpcy5nZXRDbG9zZURlbGF5KCksdGhpcywiY2xvc2VQb3B1cCIpfXRoaXMucmVzdG9yZVN0YW5kYXJkVG9vbHRpcHMoKTtlLnN0b3BQcm9wYWdhdGlvbigpO2UucHJldmVudERlZmF1bHQoKX07c2FwLnVpLmNvcmUuVG9vbHRpcEJhc2UucHJvdG90eXBlLmNsb3NlUG9wdXA9ZnVuY3Rpb24oKXt2YXIgcD10aGlzLl9nZXRQb3B1cCgpO2lmKHRoaXMuc0Nsb3NlTm93VGltZW91dCl7alF1ZXJ5LnNhcC5jbGVhckRlbGF5ZWRDYWxsKHRoaXMuc0Nsb3NlTm93VGltZW91dCl9dGhpcy5zQ2xvc2VOb3dUaW1lb3V0PXVuZGVmaW5lZDtwLmF0dGFjaENsb3NlZCh0aGlzLmhhbmRsZUNsb3NlZCx0aGlzKTtwLmNsb3NlKCk7dGhpcy5yZXN0b3JlU3RhbmRhcmRUb29sdGlwcygpfTtzYXAudWkuY29yZS5Ub29sdGlwQmFzZS5wcm90b3R5cGUuaGFuZGxlQ2xvc2VkPWZ1bmN0aW9uKCl7dGhpcy5fZ2V0UG9wdXAoKS5kZXRhY2hDbG9zZWQoalF1ZXJ5LnByb3h5KHRoaXMuaGFuZGxlQ2xvc2VkLHRoaXMpKTt0aGlzLmZpcmVDbG9zZWQoKX07c2FwLnVpLmNvcmUuVG9vbHRpcEJhc2UucHJvdG90eXBlLm9wZW5Qb3B1cD1mdW5jdGlvbihzKXtpZihzLmdldFRvb2x0aXAoKSE9bnVsbCl7aWYodGhpcy5zQ2xvc2VOb3dUaW1lb3V0KXtqUXVlcnkuc2FwLmNsZWFyRGVsYXllZENhbGwodGhpcy5zQ2xvc2VOb3dUaW1lb3V0KTt0aGlzLnNDbG9zZU5vd1RpbWVvdXQ9bnVsbDtyZXR1cm59dmFyIHA9dGhpcy5fZ2V0UG9wdXAoKTtpZihwLmlzT3BlbigpJiZwLmdldENvbnRlbnQoKT09dGhpcyl7cmV0dXJufXNhcC51aS5nZXRDb3JlKCkuZ2V0UmVuZGVyTWFuYWdlcigpLnJlbmRlcih0aGlzLHNhcC51aS5nZXRDb3JlKCkuZ2V0U3RhdGljQXJlYVJlZigpLHRydWUpO3ZhciBkPXMuZ2V0RG9tUmVmKCk7cC5zZXRDb250ZW50KHRoaXMpO3Auc2V0UG9zaXRpb24odGhpcy5nZXRNeVBvc2l0aW9uKCksdGhpcy5nZXRBdFBvc2l0aW9uKCksZCx0aGlzLmdldE9mZnNldCgpLHRoaXMuZ2V0Q29sbGlzaW9uKCkpO3Auc2V0RHVyYXRpb25zKHRoaXMuZ2V0T3BlbkR1cmF0aW9uKCksdGhpcy5nZXRDbG9zZUR1cmF0aW9uKCkpO3Aub3BlbigpO3RoaXMucmVtb3ZlU3RhbmRhcmRUb29sdGlwcyh0aGlzLl9jdXJyZW50Q29udHJvbCl9fTtzYXAudWkuY29yZS5Ub29sdGlwQmFzZS5wcm90b3R5cGUucmVtb3ZlU3RhbmRhcmRUb29sdGlwcz1mdW5jdGlvbigpe3ZhciBkPXRoaXMuX2N1cnJlbnRDb250cm9sLmdldERvbVJlZigpO2lmKCF0aGlzLmFTdG9yZWRUb29sdGlwcyl7dGhpcy5hU3RvcmVkVG9vbHRpcHM9W119ZWxzZXtyZXR1cm59dmFyIHQ9IiI7d2hpbGUoZCYmIShkPT09ZG9jdW1lbnQpKXt0PWQudGl0bGU7aWYodCl7dGhpcy5hU3RvcmVkVG9vbHRpcHMucHVzaCh7ZG9tcmVmOmQsdG9vbHRpcDp0fSk7ZC50aXRsZT0iIn1kPWQucGFyZW50Tm9kZX1pZih0aGlzLl9jdXJyZW50Q29udHJvbC5nZXRUb29sdGlwRG9tUmVmcyl7dmFyIEQ9dGhpcy5fY3VycmVudENvbnRyb2wuZ2V0VG9vbHRpcERvbVJlZnMoKTtmb3IodmFyIGk9MDtpPEQubGVuZ3RoO2krKyl7ZD1EW2ldO2lmKGQpe3Q9ZC50aXRsZTtpZih0KXt0aGlzLmFTdG9yZWRUb29sdGlwcy5wdXNoKHtkb21yZWY6ZCx0b29sdGlwOnR9KTtkLnRpdGxlPSIifX19fX07c2FwLnVpLmNvcmUuVG9vbHRpcEJhc2UucHJvdG90eXBlLnJlc3RvcmVTdGFuZGFyZFRvb2x0aXBzPWZ1bmN0aW9uKCl7dmFyIHA9dGhpcy5fZ2V0UG9wdXAoKTt2YXIgZT1wLmdldE9wZW5TdGF0ZSgpO2lmKGU9PT1zYXAudWkuY29yZS5PcGVuU3RhdGUuT1BFTnx8ZT09PXNhcC51aS5jb3JlLk9wZW5TdGF0ZS5PUEVOSU5HKXtyZXR1cm59aWYoc2FwLnVpLmNvcmUuVG9vbHRpcEJhc2Uuc09wZW5UaW1lb3V0KXtyZXR1cm59aWYodGhpcy5hU3RvcmVkVG9vbHRpcHMpe2Zvcih2YXIgaT0wO2k8dGhpcy5hU3RvcmVkVG9vbHRpcHMubGVuZ3RoO2krKyl7dmFyIGQ9dGhpcy5hU3RvcmVkVG9vbHRpcHNbaV0uZG9tcmVmO2QudGl0bGU9dGhpcy5hU3RvcmVkVG9vbHRpcHNbaV0udG9vbHRpcH19dGhpcy5hU3RvcmVkVG9vbHRpcHM9bnVsbH07c2FwLnVpLmNvcmUuVG9vbHRpcEJhc2UucHJvdG90eXBlLl9zZXRQYXJlbnQ9c2FwLnVpLmNvcmUuVG9vbHRpcEJhc2UucHJvdG90eXBlLnNldFBhcmVudDtzYXAudWkuY29yZS5Ub29sdGlwQmFzZS5wcm90b3R5cGUuc2V0UGFyZW50PWZ1bmN0aW9uKHAsYSl7dmFyIF89dGhpcy5fZ2V0UG9wdXAoKTtpZihfJiZfLmlzT3BlbigpKXt0aGlzLmNsb3NlUG9wdXAoKX10aGlzLl9zZXRQYXJlbnQuYXBwbHkodGhpcyxhcmd1bWVudHMpfTtzYXAudWkuY29yZS5Ub29sdGlwQmFzZS5wcm90b3R5cGUub25rZXlkb3duPWZ1bmN0aW9uKGUpe2lmKGUuY3RybEtleSYmZS53aGljaD09alF1ZXJ5LnNhcC5LZXlDb2Rlcy5JKXt2YXIgRT1qUXVlcnkoZS50YXJnZXQpLmNvbnRyb2woMCk7aWYoRSE9bnVsbCl7aWYodGhpcy5fY3VycmVudENvbnRyb2w9PT1FfHwhdGhpcy5pc1N0YW5kYXJkVG9vbHRpcChFLmdldFRvb2x0aXAoKSkpe3RoaXMucmVtb3ZlU3RhbmRhcmRUb29sdGlwcyhFKTt0aGlzLm9wZW5Qb3B1cCh0aGlzLl9jdXJyZW50Q29udHJvbCk7ZS5wcmV2ZW50RGVmYXVsdCgpO2Uuc3RvcFByb3BhZ2F0aW9uKCl9fX1lbHNlIGlmKGUud2hpY2g9PWpRdWVyeS5zYXAuS2V5Q29kZXMuRVNDQVBFKXtpZihzYXAudWkuY29yZS5Ub29sdGlwQmFzZS5zT3BlblRpbWVvdXQpe2pRdWVyeS5zYXAuY2xlYXJEZWxheWVkQ2FsbChzYXAudWkuY29yZS5Ub29sdGlwQmFzZS5zT3BlblRpbWVvdXQpO3NhcC51aS5jb3JlLlRvb2x0aXBCYXNlLnNPcGVuVGltZW91dD11bmRlZmluZWR9dmFyIHc9dGhpcy5vUG9wdXAmJnRoaXMub1BvcHVwLmlzT3BlbigpO3RoaXMuY2xvc2VQb3B1cCgpO2lmKHcpe2UucHJldmVudERlZmF1bHQoKTtlLnN0b3BQcm9wYWdhdGlvbigpfX19O3NhcC51aS5jb3JlLlRvb2x0aXBCYXNlLnByb3RvdHlwZS5fY2xvc2VPclByZXZlbnRPcGVuPWZ1bmN0aW9uKCl7dmFyIHA9dGhpcy5fZ2V0UG9wdXAoKTtpZihwLmlzT3BlbigpKXt0aGlzLmNsb3NlUG9wdXAoKX1lbHNlIGlmKHNhcC51aS5jb3JlLlRvb2x0aXBCYXNlLnNPcGVuVGltZW91dCl7alF1ZXJ5LnNhcC5jbGVhckRlbGF5ZWRDYWxsKHNhcC51aS5jb3JlLlRvb2x0aXBCYXNlLnNPcGVuVGltZW91dCk7c2FwLnVpLmNvcmUuVG9vbHRpcEJhc2Uuc09wZW5UaW1lb3V0PXVuZGVmaW5lZH19O3JldHVybiBzYXAudWkuY29yZS5Ub29sdGlwQmFzZX0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLlZhcmlhbnRMYXlvdXREYXRhJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUuVmFyaWFudExheW91dERhdGEnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9WYXJpYW50TGF5b3V0RGF0YSIsWycuL2xpYnJhcnknLCcuL0xheW91dERhdGEnXSxmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0IjtzYXAudWkuY29yZS5MYXlvdXREYXRhLmV4dGVuZCgic2FwLnVpLmNvcmUuVmFyaWFudExheW91dERhdGEiLHttZXRhZGF0YTp7bGlicmFyeToic2FwLnVpLmNvcmUiLGFnZ3JlZ2F0aW9uczp7Im11bHRpcGxlTGF5b3V0RGF0YSI6e3R5cGU6InNhcC51aS5jb3JlLkxheW91dERhdGEiLG11bHRpcGxlOnRydWUsc2luZ3VsYXJOYW1lOiJtdWx0aXBsZUxheW91dERhdGEifX19fSk7cmV0dXJuIHNhcC51aS5jb3JlLlZhcmlhbnRMYXlvdXREYXRhfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUubXZjLlZpZXcnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS5tdmMuVmlldycpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL212Yy9WaWV3IixbJ3NhcC91aS9jb3JlL2xpYnJhcnknLCdzYXAvdWkvY29yZS9Db250cm9sJ10sZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7c2FwLnVpLmNvcmUuQ29udHJvbC5leHRlbmQoInNhcC51aS5jb3JlLm12Yy5WaWV3Iix7bWV0YWRhdGE6e3B1YmxpY01ldGhvZHM6WyJnZXRDb250cm9sbGVyIl0sbGlicmFyeToic2FwLnVpLmNvcmUiLHByb3BlcnRpZXM6eyJ3aWR0aCI6e3R5cGU6InNhcC51aS5jb3JlLkNTU1NpemUiLGdyb3VwOiJEaW1lbnNpb24iLGRlZmF1bHRWYWx1ZTonMTAwJSd9LCJoZWlnaHQiOnt0eXBlOiJzYXAudWkuY29yZS5DU1NTaXplIixncm91cDoiRGltZW5zaW9uIixkZWZhdWx0VmFsdWU6bnVsbH0sInZpZXdOYW1lIjp7dHlwZToic3RyaW5nIixncm91cDoiTWlzYyIsZGVmYXVsdFZhbHVlOm51bGx9LCJkaXNwbGF5QmxvY2siOnt0eXBlOiJib29sZWFuIixncm91cDoiQXBwZWFyYW5jZSIsZGVmYXVsdFZhbHVlOmZhbHNlfX0sYWdncmVnYXRpb25zOnsiY29udGVudCI6e3R5cGU6InNhcC51aS5jb3JlLkNvbnRyb2wiLG11bHRpcGxlOnRydWUsc2luZ3VsYXJOYW1lOiJjb250ZW50In19LGV2ZW50czp7ImFmdGVySW5pdCI6e30sImJlZm9yZUV4aXQiOnt9LCJhZnRlclJlbmRlcmluZyI6e30sImJlZm9yZVJlbmRlcmluZyI6e319fX0pO3NhcC51aS5jb3JlLm12Yy5WaWV3Lk1fRVZFTlRTPXsnYWZ0ZXJJbml0JzonYWZ0ZXJJbml0JywnYmVmb3JlRXhpdCc6J2JlZm9yZUV4aXQnLCdhZnRlclJlbmRlcmluZyc6J2FmdGVyUmVuZGVyaW5nJywnYmVmb3JlUmVuZGVyaW5nJzonYmVmb3JlUmVuZGVyaW5nJ307KGZ1bmN0aW9uKCl7c2FwLnVpLmNvcmUubXZjLlZpZXcucHJvdG90eXBlLl9pbml0Q29tcG9zaXRlU3VwcG9ydD1mdW5jdGlvbihzKXt0aGlzLm9WaWV3RGF0YT1zLnZpZXdEYXRhO3RoaXMuc1ZpZXdOYW1lPXMudmlld05hbWU7aWYodGhpcy5pbml0Vmlld1NldHRpbmdzKXt0aGlzLmluaXRWaWV3U2V0dGluZ3Mocyl9Yyh0aGlzLHMpO2lmKHRoaXMub25Db250cm9sbGVyQ29ubmVjdGVkKXt0aGlzLm9uQ29udHJvbGxlckNvbm5lY3RlZCh0aGlzLm9Db250cm9sbGVyKX10aGlzLmZpcmVBZnRlckluaXQoKX07c2FwLnVpLmNvcmUubXZjLlZpZXcucHJvdG90eXBlLmdldENvbnRyb2xsZXI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vQ29udHJvbGxlcn07c2FwLnVpLmNvcmUubXZjLlZpZXcucHJvdG90eXBlLmJ5SWQ9ZnVuY3Rpb24oaSl7cmV0dXJuIHNhcC51aS5nZXRDb3JlKCkuYnlJZCh0aGlzLmNyZWF0ZUlkKGkpKX07c2FwLnVpLmNvcmUubXZjLlZpZXcucHJvdG90eXBlLmNyZWF0ZUlkPWZ1bmN0aW9uKGkpe2lmKCF0aGlzLmlzUHJlZml4ZWRJZChpKSl7aT10aGlzLmdldElkKCkrIi0tIitpfXJldHVybiBpfTtzYXAudWkuY29yZS5tdmMuVmlldy5wcm90b3R5cGUuaXNQcmVmaXhlZElkPWZ1bmN0aW9uKGkpe3JldHVybihpJiZpLmluZGV4T2YodGhpcy5nZXRJZCgpKyItLSIpPT09MCl9O3ZhciBjPWZ1bmN0aW9uKHQscyl7dmFyIEM9cy5jb250cm9sbGVyO2lmKCFDJiZ0LmdldENvbnRyb2xsZXJOYW1lKXt2YXIgZD10LmdldENvbnRyb2xsZXJOYW1lKCk7aWYoZCl7Qz1zYXAudWkuY29udHJvbGxlcihkKX19aWYoc2FwLnVpLmdldENvcmUoKS5nZXRDb25maWd1cmF0aW9uKCkuZ2V0RGVzaWduTW9kZSgpJiYhc2FwLnVpLmdldENvcmUoKS5nZXRDb25maWd1cmF0aW9uKCkuZ2V0U3VwcHJlc3NEZWFjdGl2YXRpb25PZkNvbnRyb2xsZXJDb2RlKCkpe2Zvcih2YXIgbSBpbiBDKXtpZih0eXBlb2YgQ1ttXT09PSJmdW5jdGlvbiImJiFzYXAudWkuY29yZS5tdmMuQ29udHJvbGxlci5wcm90b3R5cGVbbV0pe0NbbV09ZnVuY3Rpb24oKXt9fX19aWYoQyl7dC5vQ29udHJvbGxlcj1DO0MuY29ubmVjdFRvVmlldyh0KX19O3NhcC51aS5jb3JlLm12Yy5WaWV3LnByb3RvdHlwZS5nZXRWaWV3RGF0YT1mdW5jdGlvbigpe3JldHVybiB0aGlzLm9WaWV3RGF0YX07c2FwLnVpLmNvcmUubXZjLlZpZXcucHJvdG90eXBlLmV4aXQ9ZnVuY3Rpb24oKXt0aGlzLmZpcmVCZWZvcmVFeGl0KCk7dGhpcy5vQ29udHJvbGxlcj1udWxsfTtzYXAudWkuY29yZS5tdmMuVmlldy5wcm90b3R5cGUub25BZnRlclJlbmRlcmluZz1mdW5jdGlvbigpe3RoaXMuZmlyZUFmdGVyUmVuZGVyaW5nKCl9O3NhcC51aS5jb3JlLm12Yy5WaWV3LnByb3RvdHlwZS5vbkJlZm9yZVJlbmRlcmluZz1mdW5jdGlvbigpe3RoaXMuZmlyZUJlZm9yZVJlbmRlcmluZygpfTtzYXAudWkuY29yZS5tdmMuVmlldy5wcm90b3R5cGUuY2xvbmU9ZnVuY3Rpb24oaSxsKXt2YXIgcz17fSxrLEM7Zm9yKGsgaW4gdGhpcy5tUHJvcGVydGllcyYmISh0aGlzLmlzQm91bmQmJnRoaXMuaXNCb3VuZChrKSkpe2lmKHRoaXMubVByb3BlcnRpZXMuaGFzT3duUHJvcGVydHkoaykpe3Nba109dGhpcy5tUHJvcGVydGllc1trXX19Qz1zYXAudWkuY29yZS5Db250cm9sLnByb3RvdHlwZS5jbG9uZS5jYWxsKHRoaXMsaSxsLHtjbG9uZUNoaWxkcmVuOmZhbHNlLGNsb25lQmluZGluZ3M6dHJ1ZX0pO0MuYXBwbHlTZXR0aW5ncyhzKTtyZXR1cm4gQ307c2FwLnVpLnZpZXc9ZnVuY3Rpb24oaSx2LHQpe3ZhciBhPW51bGwsVj17fTtpZih0eXBlb2YgaT09PSJvYmplY3QifHx0eXBlb2YgaT09PSJzdHJpbmciJiZ2PT09dW5kZWZpbmVkKXt2PWk7aT11bmRlZmluZWR9aWYodil7aWYodHlwZW9mIHY9PT0ic3RyaW5nIil7Vi52aWV3TmFtZT12fWVsc2V7Vj12fX1pZihpKXtWLmlkPWl9aWYodCl7Vi50eXBlPXR9aWYoc2FwLnVpLmNvcmUuQ3VzdG9taXppbmdDb25maWd1cmF0aW9uKXt2YXIgYj1zYXAudWkuY29yZS5DdXN0b21pemluZ0NvbmZpZ3VyYXRpb24uZ2V0Vmlld1JlcGxhY2VtZW50KFYudmlld05hbWUpO2lmKGIpe2pRdWVyeS5zYXAubG9nLmluZm8oIkN1c3RvbWl6aW5nOiBWaWV3IHJlcGxhY2VtZW50IGZvciB2aWV3ICciK1Yudmlld05hbWUrIicgZm91bmQgYW5kIGFwcGxpZWQ6ICIrYi52aWV3TmFtZSsiICh0eXBlOiAiK2IudHlwZSsiKSIpO2pRdWVyeS5leHRlbmQoVixiKX1lbHNle2pRdWVyeS5zYXAubG9nLmRlYnVnKCJDdXN0b21pemluZzogbm8gVmlldyByZXBsYWNlbWVudCBmb3VuZCBmb3IgdmlldyAnIitWLnZpZXdOYW1lKyInLiIpfX1pZighVi50eXBlKXt0aHJvdyBuZXcgRXJyb3IoIk5vIHZpZXcgdHlwZSBzcGVjaWZpZWQuIil9ZWxzZSBpZihWLnR5cGU9PT1zYXAudWkuY29yZS5tdmMuVmlld1R5cGUuSlMpe2E9bmV3IHNhcC51aS5jb3JlLm12Yy5KU1ZpZXcoVil9ZWxzZSBpZihWLnR5cGU9PT1zYXAudWkuY29yZS5tdmMuVmlld1R5cGUuSlNPTil7YT1uZXcgc2FwLnVpLmNvcmUubXZjLkpTT05WaWV3KFYpfWVsc2UgaWYoVi50eXBlPT09c2FwLnVpLmNvcmUubXZjLlZpZXdUeXBlLlhNTCl7YT1uZXcgc2FwLnVpLmNvcmUubXZjLlhNTFZpZXcoVil9ZWxzZSBpZihWLnR5cGU9PT1zYXAudWkuY29yZS5tdmMuVmlld1R5cGUuSFRNTCl7YT1uZXcgc2FwLnVpLmNvcmUubXZjLkhUTUxWaWV3KFYpfWVsc2UgaWYoVi50eXBlPT09c2FwLnVpLmNvcmUubXZjLlZpZXdUeXBlLlRlbXBsYXRlKXthPW5ldyBzYXAudWkuY29yZS5tdmMuVGVtcGxhdGVWaWV3KFYpfWVsc2V7dGhyb3cgbmV3IEVycm9yKCJVbmtub3duIHZpZXcgdHlwZSAiK1YudHlwZSsiIHNwZWNpZmllZC4iKX1yZXR1cm4gYX19KCkpO3JldHVybiBzYXAudWkuY29yZS5tdmMuVmlld30sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLm12Yy5YTUxWaWV3Jykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUubXZjLlhNTFZpZXcnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9tdmMvWE1MVmlldyIsWydzYXAvdWkvY29yZS9saWJyYXJ5JywnLi9WaWV3JywnanF1ZXJ5LnNhcC54bWwnLCdzYXAvdWkvYmFzZS9EYXRhVHlwZScsJ3NhcC91aS9tb2RlbC9yZXNvdXJjZS9SZXNvdXJjZU1vZGVsJywnc2FwL3VpL2NvcmUvWE1MVGVtcGxhdGVQcm9jZXNzb3InXSxmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0IjtzYXAudWkuY29yZS5tdmMuVmlldy5leHRlbmQoInNhcC51aS5jb3JlLm12Yy5YTUxWaWV3Iix7bWV0YWRhdGE6e2xpYnJhcnk6InNhcC51aS5jb3JlIn19KTtzYXAudWkueG1sdmlldz1mdW5jdGlvbihpLHYpe3JldHVybiBzYXAudWkudmlldyhpLHYsc2FwLnVpLmNvcmUubXZjLlZpZXdUeXBlLlhNTCl9O3NhcC51aS5jb3JlLm12Yy5YTUxWaWV3Ll9zVHlwZT1zYXAudWkuY29yZS5tdmMuVmlld1R5cGUuWE1MO3NhcC51aS5jb3JlLm12Yy5YTUxWaWV3LnByb3RvdHlwZS5pbml0Vmlld1NldHRpbmdzPWZ1bmN0aW9uKHMpe2lmKCFzKXt0aHJvdyBuZXcgRXJyb3IoIm1TZXR0aW5ncyBtdXN0IGJlIGdpdmVuIil9aWYocy52aWV3TmFtZSYmcy52aWV3Q29udGVudCl7dGhyb3cgbmV3IEVycm9yKCJWaWV3IG5hbWUgYW5kIHZpZXcgY29udGVudCBhcmUgZ2l2ZW4uIFRoZXJlIGlzIG5vIHBvaW50IGluIGRvaW5nIHRoaXMsIHNvIHBsZWFzZSBkZWNpZGUuIil9ZWxzZSBpZigocy52aWV3TmFtZXx8cy52aWV3Q29udGVudCkmJnMueG1sTm9kZSl7dGhyb3cgbmV3IEVycm9yKCJWaWV3IG5hbWUvY29udGVudCBBTkQgYW4gWE1MIG5vZGUgYXJlIGdpdmVuLiBUaGVyZSBpcyBubyBwb2ludCBpbiBkb2luZyB0aGlzLCBzbyBwbGVhc2UgZGVjaWRlLiIpfWVsc2UgaWYoIShzLnZpZXdOYW1lfHxzLnZpZXdDb250ZW50KSYmIXMueG1sTm9kZSl7dGhyb3cgbmV3IEVycm9yKCJOZWl0aGVyIHZpZXcgbmFtZS9jb250ZW50IG5vciBhbiBYTUwgbm9kZSBpcyBnaXZlbi4gT25lIG9mIHRoZW0gaXMgcmVxdWlyZWQuIil9aWYocy52aWV3TmFtZSl7dGhpcy5feENvbnRlbnQ9c2FwLnVpLmNvcmUuWE1MVGVtcGxhdGVQcm9jZXNzb3IubG9hZFRlbXBsYXRlKHMudmlld05hbWUpfWVsc2UgaWYocy52aWV3Q29udGVudCl7dGhpcy5tUHJvcGVydGllc1sidmlld0NvbnRlbnQiXT1zLnZpZXdDb250ZW50O3RoaXMuX3hDb250ZW50PWpRdWVyeS5zYXAucGFyc2VYTUwocy52aWV3Q29udGVudCk7aWYodGhpcy5feENvbnRlbnQucGFyc2VFcnJvci5lcnJvckNvZGUhPTApe3ZhciBwPXRoaXMuX3hDb250ZW50LnBhcnNlRXJyb3I7dGhyb3cgbmV3IEVycm9yKCJUaGUgZm9sbG93aW5nIHByb2JsZW0gb2NjdXJyZWQ6IFhNTCBwYXJzZSBFcnJvciBmb3IgIitwLnVybCsiIGNvZGU6ICIrcC5lcnJvckNvZGUrIiByZWFzb246ICIrcC5yZWFzb24rIiBzcmM6ICIrcC5zcmNUZXh0KyIgbGluZTogIitwLmxpbmUrIiBsaW5lcG9zOiAiK3AubGluZXBvcysiIGZpbGVwb3M6ICIrcC5maWxlcG9zKX1lbHNle3RoaXMuX3hDb250ZW50PXRoaXMuX3hDb250ZW50LmRvY3VtZW50RWxlbWVudH19ZWxzZSBpZihzLnhtbE5vZGUpe3RoaXMuX3hDb250ZW50PXMueG1sTm9kZX1lbHNle310aGlzLl9vQ29udGFpbmluZ1ZpZXc9cy5jb250YWluaW5nVmlld3x8dGhpcztpZighdGhpcy5pc1N1YlZpZXcoKSl7c2FwLnVpLmNvcmUuWE1MVGVtcGxhdGVQcm9jZXNzb3IucGFyc2VWaWV3QXR0cmlidXRlcyh0aGlzLl94Q29udGVudCx0aGlzLHMpfWVsc2V7ZGVsZXRlIHMuY29udHJvbGxlcn1pZigodGhpcy5fcmVzb3VyY2VCdW5kbGVOYW1lfHx0aGlzLl9yZXNvdXJjZUJ1bmRsZVVybCkmJighcy5tb2RlbHN8fCFzLm1vZGVsc1t0aGlzLl9yZXNvdXJjZUJ1bmRsZUFsaWFzXSkpe3ZhciBtPW5ldyBzYXAudWkubW9kZWwucmVzb3VyY2UuUmVzb3VyY2VNb2RlbCh7YnVuZGxlTmFtZTp0aGlzLl9yZXNvdXJjZUJ1bmRsZU5hbWUsYnVuZGxlVXJsOnRoaXMuX3Jlc291cmNlQnVuZGxlVXJsLGJ1bmRsZUxvY2FsZTp0aGlzLl9yZXNvdXJjZUJ1bmRsZUxvY2FsZX0pO3RoaXMuc2V0TW9kZWwobSx0aGlzLl9yZXNvdXJjZUJ1bmRsZUFsaWFzKX12YXIgdD10aGlzO3RoaXMub0FmdGVyUmVuZGVyaW5nTm90aWZpZXI9bmV3IHNhcC51aS5jb3JlLm12Yy5YTUxBZnRlclJlbmRlcmluZ05vdGlmaWVyKCk7dGhpcy5vQWZ0ZXJSZW5kZXJpbmdOb3RpZmllci5hZGREZWxlZ2F0ZSh7b25BZnRlclJlbmRlcmluZzpmdW5jdGlvbigpe3Qub25BZnRlclJlbmRlcmluZ0JlZm9yZUNoaWxkcmVuKCl9fSl9O3NhcC51aS5jb3JlLm12Yy5YTUxWaWV3LnByb3RvdHlwZS5leGl0PWZ1bmN0aW9uKCl7dGhpcy5vQWZ0ZXJSZW5kZXJpbmdOb3RpZmllci5kZXN0cm95KCk7c2FwLnVpLmNvcmUubXZjLlZpZXcucHJvdG90eXBlLmV4aXQuYXBwbHkodGhpcyxhcmd1bWVudHMpfTtzYXAudWkuY29yZS5tdmMuWE1MVmlldy5wcm90b3R5cGUub25Db250cm9sbGVyQ29ubmVjdGVkPWZ1bmN0aW9uKGMpe3ZhciB0PXRoaXM7c2FwLnVpLmJhc2UuTWFuYWdlZE9iamVjdC5ydW5XaXRoUHJlcHJvY2Vzc29ycyhmdW5jdGlvbigpe3QuX2FQYXJzZWRDb250ZW50PXNhcC51aS5jb3JlLlhNTFRlbXBsYXRlUHJvY2Vzc29yLnBhcnNlVGVtcGxhdGUodC5feENvbnRlbnQsdCl9KX07c2FwLnVpLmNvcmUubXZjLlhNTFZpZXcucHJvdG90eXBlLmdldENvbnRyb2xsZXJOYW1lPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvbnRyb2xsZXJOYW1lfTtzYXAudWkuY29yZS5tdmMuWE1MVmlldy5wcm90b3R5cGUuaXNTdWJWaWV3PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29Db250YWluaW5nVmlldyE9dGhpc307c2FwLnVpLmNvcmUubXZjLlhNTFZpZXcucHJvdG90eXBlLm9uQWZ0ZXJSZW5kZXJpbmdCZWZvcmVDaGlsZHJlbj1mdW5jdGlvbigpe2lmKHRoaXMuXyRvbGRDb250ZW50Lmxlbmd0aCE9PTApe3ZhciBjPXRoaXMuZ2V0QWdncmVnYXRpb24oImNvbnRlbnQiKTtpZihjKXtmb3IodmFyIGk9MDtpPGMubGVuZ3RoO2krKyl7aWYoY1tpXS5nZXREb21SZWYoKT09PW51bGwpe2NvbnRpbnVlfXZhciAkPWNbaV0uJCgpO2pRdWVyeS5zYXAuYnlJZCgic2FwLXVpLWR1bW15LSIrY1tpXS5nZXRJZCgpLHRoaXMuXyRvbGRDb250ZW50KS5yZXBsYWNlV2l0aCgkKX19alF1ZXJ5LnNhcC5ieUlkKCJzYXAtdWktZHVtbXktIit0aGlzLmdldElkKCkpLnJlcGxhY2VXaXRoKHRoaXMuXyRvbGRDb250ZW50KX10aGlzLl8kb2xkQ29udGVudD11bmRlZmluZWR9O3NhcC51aS5jb3JlLm12Yy5YTUxWaWV3LnByb3RvdHlwZS5fb25DaGlsZFJlcmVuZGVyZWRFbXB0eT1mdW5jdGlvbihjLGUpe2pRdWVyeShlKS5yZXBsYWNlV2l0aCgnPGRpdiBpZD0ic2FwLXVpLWR1bW15LScrYy5nZXRJZCgpKyciIGNsYXNzPSJzYXBVaUhpZGRlbiIvPicpO3JldHVybiB0cnVlfTtzYXAudWkuY29yZS5Db250cm9sLmV4dGVuZCgic2FwLnVpLmNvcmUubXZjLlhNTEFmdGVyUmVuZGVyaW5nTm90aWZpZXIiLHtyZW5kZXJlcjpmdW5jdGlvbihyLGMpe3Iud3JpdGUoIiIpfX0pO3JldHVybiBzYXAudWkuY29yZS5tdmMuWE1MVmlld30sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLnNlYXJjaC5PcGVuU2VhcmNoUHJvdmlkZXInKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS5zZWFyY2guT3BlblNlYXJjaFByb3ZpZGVyJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvc2VhcmNoL09wZW5TZWFyY2hQcm92aWRlciIsWydzYXAvdWkvY29yZS9saWJyYXJ5JywnLi9TZWFyY2hQcm92aWRlcicsJ2pxdWVyeS5zYXAuZW5jb2RlciddLGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO3NhcC51aS5jb3JlLnNlYXJjaC5TZWFyY2hQcm92aWRlci5leHRlbmQoInNhcC51aS5jb3JlLnNlYXJjaC5PcGVuU2VhcmNoUHJvdmlkZXIiLHttZXRhZGF0YTp7bGlicmFyeToic2FwLnVpLmNvcmUiLHByb3BlcnRpZXM6eyJzdWdnZXN0VXJsIjp7dHlwZToic2FwLnVpLmNvcmUuVVJJIixncm91cDoiTWlzYyIsZGVmYXVsdFZhbHVlOm51bGx9LCJzdWdnZXN0VHlwZSI6e3R5cGU6InN0cmluZyIsZ3JvdXA6Ik1pc2MiLGRlZmF1bHRWYWx1ZTonanNvbid9fX19KTtzYXAudWkuY29yZS5zZWFyY2guT3BlblNlYXJjaFByb3ZpZGVyLnByb3RvdHlwZS5zdWdnZXN0PWZ1bmN0aW9uKHYsYyl7dmFyIHU9dGhpcy5nZXRTdWdnZXN0VXJsKCk7aWYoIXUpe3JldHVybn11PXUucmVwbGFjZSgie3NlYXJjaFRlcm1zfSIsalF1ZXJ5LnNhcC5lbmNvZGVVUkwodikpO3ZhciB0PXRoaXMuZ2V0U3VnZ2VzdFR5cGUoKTt2YXIgcztpZih0JiZ0LnRvTG93ZXJDYXNlKCk9PT0ieG1sIil7dD0ieG1sIjtzPWZ1bmN0aW9uKGQpe3ZhciB4PWpRdWVyeShkKTt2YXIgaT14LmZpbmQoIlRleHQiKTt2YXIgUz1bXTtpLmVhY2goZnVuY3Rpb24oKXtTLnB1c2goalF1ZXJ5KHRoaXMpLnRleHQoKSl9KTtjKHYsUyl9fWVsc2V7dD0ianNvbiI7cz1mdW5jdGlvbihkKXtjKHYsZFsxXSl9fWpRdWVyeS5hamF4KHt1cmw6dSxkYXRhVHlwZTp0LHN1Y2Nlc3M6cyxlcnJvcjpmdW5jdGlvbihYLGEsZSl7alF1ZXJ5LnNhcC5sb2cuZmF0YWwoIlRoZSBmb2xsb3dpbmcgcHJvYmxlbSBvY2N1cnJlZDogIithLFgucmVzcG9uc2VUZXh0KyIsIitYLnN0YXR1cyl9fSl9O3JldHVybiBzYXAudWkuY29yZS5zZWFyY2guT3BlblNlYXJjaFByb3ZpZGVyfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUudG1wbC5ET01FbGVtZW50Jykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUudG1wbC5ET01FbGVtZW50Jyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvdG1wbC9ET01FbGVtZW50IixbJ3NhcC91aS9jb3JlL2xpYnJhcnknLCdzYXAvdWkvY29yZS9Db250cm9sJ10sZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7c2FwLnVpLmNvcmUuQ29udHJvbC5leHRlbmQoInNhcC51aS5jb3JlLnRtcGwuRE9NRWxlbWVudCIse21ldGFkYXRhOntwdWJsaWNNZXRob2RzOlsiYXR0ciIsInJlbW92ZUF0dHIiXSxsaWJyYXJ5OiJzYXAudWkuY29yZSIscHJvcGVydGllczp7InRleHQiOnt0eXBlOiJzdHJpbmciLGdyb3VwOiJBcHBlYXJhbmNlIixkZWZhdWx0VmFsdWU6bnVsbH0sInRhZyI6e3R5cGU6InN0cmluZyIsZ3JvdXA6IkJlaGF2aW9yIixkZWZhdWx0VmFsdWU6J3NwYW4nfX0sYWdncmVnYXRpb25zOnsiYXR0cmlidXRlcyI6e3R5cGU6InNhcC51aS5jb3JlLnRtcGwuRE9NQXR0cmlidXRlIixtdWx0aXBsZTp0cnVlLHNpbmd1bGFyTmFtZToiYXR0cmlidXRlIn0sImVsZW1lbnRzIjp7dHlwZToic2FwLnVpLmNvcmUudG1wbC5ET01FbGVtZW50IixtdWx0aXBsZTp0cnVlLHNpbmd1bGFyTmFtZToiZWxlbWVudCJ9fX19KTtzYXAudWkuY29yZS50bXBsLkRPTUVsZW1lbnQucHJvdG90eXBlLmFwcGx5U2V0dGluZ3M9ZnVuY3Rpb24ocyl7c2FwLnVpLmNvcmUuQ29udHJvbC5wcm90b3R5cGUuYXBwbHlTZXR0aW5ncy5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dmFyIHQ9dGhpcyxtPXRoaXMuZ2V0TWV0YWRhdGEoKSxqPW0uZ2V0SlNPTktleXMoKTtqUXVlcnkuZWFjaChzLGZ1bmN0aW9uKGssdil7aWYoayE9PSJpZCImJmshPT0idGV4dCImJiFqW2tdJiZ0eXBlb2Ygdj09PSJzdHJpbmciKXt0LmF0dHIoayx2KX19KX07c2FwLnVpLmNvcmUudG1wbC5ET01FbGVtZW50LnByb3RvdHlwZS5leGl0PXNhcC51aS5jb3JlLnRtcGwuRE9NRWxlbWVudC5wcm90b3R5cGUub25CZWZvcmVSZW5kZXJpbmc9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmdldFRhZygpLnRvTG93ZXJDYXNlKCk7aWYodD09PSJpbnB1dCJ8fHQ9PT0idGV4dGFyZWEifHx0PT09InNlbGVjdCIpe3RoaXMuJCgpLm9mZigiY2hhbmdlIil9fTtzYXAudWkuY29yZS50bXBsLkRPTUVsZW1lbnQucHJvdG90eXBlLm9uQWZ0ZXJSZW5kZXJpbmc9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmdldFRhZygpLnRvTG93ZXJDYXNlKCk7aWYodD09PSJpbnB1dCJ8fHQ9PT0idGV4dGFyZWEifHx0PT09InNlbGVjdCIpe3RoaXMuJCgpLm9uKCJjaGFuZ2UiLGpRdWVyeS5wcm94eSh0aGlzLm9uaW5wdXRjaGFuZ2UsdGhpcykpfX07c2FwLnVpLmNvcmUudG1wbC5ET01FbGVtZW50LnByb3RvdHlwZS5vbmlucHV0Y2hhbmdlPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuZ2V0VGFnKCkudG9Mb3dlckNhc2UoKTtpZih0PT09ImlucHV0Iil7dmFyIHY9dGhpcy4kKCkudmFsKCk7alF1ZXJ5LmVhY2godGhpcy5nZXRBdHRyaWJ1dGVzKCksZnVuY3Rpb24oaSxhKXtpZihhLmdldE5hbWUoKS50b0xvd2VyQ2FzZSgpPT09InZhbHVlIil7YS5zZXRWYWx1ZSh2KX19KX1lbHNlIGlmKHQ9PT0idGV4dGFyZWEiKXt2YXIgVD10aGlzLiQoKS52YWwoKTt0aGlzLnNldFRleHQoVCl9ZWxzZSBpZih0PT09InNlbGVjdCIpe3ZhciBUPSIiO3RoaXMuJCgpLmZpbmQoInNlbGVjdCBvcHRpb246c2VsZWN0ZWQiKS5lYWNoKGZ1bmN0aW9uKCl7VCs9alF1ZXJ5KHRoaXMpLnRleHQoKSsiICJ9KTt0aGlzLnNldFRleHQoVCl9fTtzYXAudWkuY29yZS50bXBsLkRPTUVsZW1lbnQucHJvdG90eXBlLmF0dHI9ZnVuY3Rpb24oayx2KXt2YXIgYT10aGlzLmdldEF0dHJpYnV0ZXMoKSxBO2pRdWVyeS5lYWNoKGEsZnVuY3Rpb24oaSxWKXt2YXIgbj1WLmdldE5hbWUoKTtpZihuLnRvTG93ZXJDYXNlKCk9PT1rKXtBPVY7cmV0dXJuIGZhbHNlfX0pO2lmKHY9PT11bmRlZmluZWQpe3JldHVybiBBJiZBLmdldFZhbHVlKCl9ZWxzZXtpZihBKXtpZih2PT09bnVsbCl7dGhpcy5yZW1vdmVBdHRyaWJ1dGUoQSl9ZWxzZXtBLnNldFZhbHVlKHYpfX1lbHNle2lmKHYhPT1udWxsKXt0aGlzLmFkZEF0dHJpYnV0ZShuZXcgc2FwLnVpLmNvcmUudG1wbC5ET01BdHRyaWJ1dGUoe25hbWU6ayx2YWx1ZTp2fSkpfX1yZXR1cm4gdGhpc319O3NhcC51aS5jb3JlLnRtcGwuRE9NRWxlbWVudC5wcm90b3R5cGUucmVtb3ZlQXR0cj1mdW5jdGlvbihrKXt0aGlzLmF0dHIoayxudWxsKTtyZXR1cm4gdGhpc307c2FwLnVpLmNvcmUudG1wbC5ET01FbGVtZW50LnByb3RvdHlwZS5zZXRUZXh0PWZ1bmN0aW9uKHQpe3RoaXMuc2V0UHJvcGVydHkoInRleHQiLHQsdHJ1ZSk7dmFyICQ9dGhpcy4kKCk7aWYoJC5sZW5ndGg+MCl7dmFyIFQ9dGhpcy5nZXRUYWcoKS50b0xvd2VyQ2FzZSgpO2lmKFQ9PT0idGV4dGFyZWEiKXskLnZhbCh0aGlzLmdldFByb3BlcnR5KCJ0ZXh0IikpfWVsc2V7JC50ZXh0KHRoaXMuZ2V0UHJvcGVydHkoInRleHQiKSl9fX07cmV0dXJuIHNhcC51aS5jb3JlLnRtcGwuRE9NRWxlbWVudH0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLnRtcGwuVGVtcGxhdGVDb250cm9sJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUudG1wbC5UZW1wbGF0ZUNvbnRyb2wnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS90bXBsL1RlbXBsYXRlQ29udHJvbCIsWydzYXAvdWkvY29yZS9saWJyYXJ5Jywnc2FwL3VpL2NvcmUvQ29udHJvbCcsJy4vRE9NRWxlbWVudCcsJy4vRE9NQXR0cmlidXRlJywnc2FwL3VpL2NvcmUvRGVjbGFyYXRpdmVTdXBwb3J0J10sZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7c2FwLnVpLmNvcmUuQ29udHJvbC5leHRlbmQoInNhcC51aS5jb3JlLnRtcGwuVGVtcGxhdGVDb250cm9sIix7bWV0YWRhdGE6e2xpYnJhcnk6InNhcC51aS5jb3JlIixwcm9wZXJ0aWVzOnsiY29udGV4dCI6e3R5cGU6Im9iamVjdCIsZ3JvdXA6IkRhdGEiLGRlZmF1bHRWYWx1ZTpudWxsfX0sYWdncmVnYXRpb25zOnsiY29udHJvbHMiOnt0eXBlOiJzYXAudWkuY29yZS5Db250cm9sIixtdWx0aXBsZTp0cnVlLHNpbmd1bGFyTmFtZToiY29udHJvbCIsdmlzaWJpbGl0eToiaGlkZGVuIn19LGFzc29jaWF0aW9uczp7InRlbXBsYXRlIjp7dHlwZToic2FwLnVpLmNvcmUudG1wbC5UZW1wbGF0ZSIsbXVsdGlwbGU6ZmFsc2V9fSxldmVudHM6eyJhZnRlclJlbmRlcmluZyI6e30sImJlZm9yZVJlbmRlcmluZyI6e319fX0pO3NhcC51aS5jb3JlLnRtcGwuVGVtcGxhdGVDb250cm9sLk1fRVZFTlRTPXsnYWZ0ZXJSZW5kZXJpbmcnOidhZnRlclJlbmRlcmluZycsJ2JlZm9yZVJlbmRlcmluZyc6J2JlZm9yZVJlbmRlcmluZyd9O3NhcC51aS5jb3JlLnRtcGwuVGVtcGxhdGVDb250cm9sLnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKCl7dGhpcy5fYUJpbmRpbmdJbmZvcz1bXX07c2FwLnVpLmNvcmUudG1wbC5UZW1wbGF0ZUNvbnRyb2wucHJvdG90eXBlLmlzSW5saW5lPWZ1bmN0aW9uKCl7dmFyIGk9ZmFsc2U7aWYodGhpcy5nZXRQYXJlbnQoKWluc3RhbmNlb2Ygc2FwLnVpLmNvcmUuVUlBcmVhJiZqUXVlcnkodGhpcy5nZXRQYXJlbnQoKS5nZXRSb290Tm9kZSgpKS5hdHRyKCJpZCIpPT09dGhpcy5nZXRJZCgpKXtpPXRydWV9cmV0dXJuIGl9O3NhcC51aS5jb3JlLnRtcGwuVGVtcGxhdGVDb250cm9sLnByb3RvdHlwZS5wbGFjZUF0PWZ1bmN0aW9uKHIscCl7dmFyIGk9dGhpcy5pc0lubGluZSgpO3ZhciAkPXRoaXMuJCgpLHU9dGhpcy5nZXRVSUFyZWEoKTtzYXAudWkuY29yZS5Db250cm9sLnByb3RvdHlwZS5wbGFjZUF0LmFwcGx5KHRoaXMsYXJndW1lbnRzKTtpZihpJiYkLmxlbmd0aD09PTEpeyQucmVtb3ZlKCk7dS5kZXN0cm95Q29udGVudCgpfX07c2FwLnVpLmNvcmUudG1wbC5UZW1wbGF0ZUNvbnRyb2wucHJvdG90eXBlLmdldFRlbXBsYXRlUmVuZGVyZXI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5mblJlbmRlcmVyfTtzYXAudWkuY29yZS50bXBsLlRlbXBsYXRlQ29udHJvbC5wcm90b3R5cGUuc2V0VGVtcGxhdGVSZW5kZXJlcj1mdW5jdGlvbihyKXt0aGlzLmZuUmVuZGVyZXI9cjtyZXR1cm4gdGhpc307c2FwLnVpLmNvcmUudG1wbC5UZW1wbGF0ZUNvbnRyb2wucHJvdG90eXBlLl9jbGVhbnVwPWZ1bmN0aW9uKCl7dGhpcy5kZXN0cm95QWdncmVnYXRpb24oImNvbnRyb2xzIik7aWYodGhpcy5fYUJpbmRpbmdJbmZvcyl7dmFyIHQ9dGhpcztqUXVlcnkuZWFjaCh0aGlzLl9hQmluZGluZ0luZm9zLGZ1bmN0aW9uKGksYil7dC5nZXRNb2RlbChiLm1vZGVsKS5yZW1vdmVCaW5kaW5nKGIuYmluZGluZyl9KTt0aGlzLl9hQmluZGluZ0luZm9zPVtdfX07c2FwLnVpLmNvcmUudG1wbC5UZW1wbGF0ZUNvbnRyb2wucHJvdG90eXBlLl9jb21waWxlPWZ1bmN0aW9uKCl7dmFyIHQ9c2FwLnVpLmdldENvcmUoKS5ieUlkKHRoaXMuZ2V0VGVtcGxhdGUoKSksZD10JiZ0LmdldERlY2xhcmF0aXZlU3VwcG9ydCgpO2lmKGQpe3ZhciBhPXRoaXM7c2V0VGltZW91dChmdW5jdGlvbigpe3NhcC51aS5jb3JlLkRlY2xhcmF0aXZlU3VwcG9ydC5jb21waWxlKGEuZ2V0RG9tUmVmKCkpfSl9fTtzYXAudWkuY29yZS50bXBsLlRlbXBsYXRlQ29udHJvbC5wcm90b3R5cGUuZXhpdD1mdW5jdGlvbigpe3RoaXMuX2NsZWFudXAoKX07c2FwLnVpLmNvcmUudG1wbC5UZW1wbGF0ZUNvbnRyb2wucHJvdG90eXBlLm9uQmVmb3JlUmVuZGVyaW5nPWZ1bmN0aW9uKCl7dGhpcy5maXJlQmVmb3JlUmVuZGVyaW5nKCk7dGhpcy5fY2xlYW51cCgpfTtzYXAudWkuY29yZS50bXBsLlRlbXBsYXRlQ29udHJvbC5wcm90b3R5cGUub25BZnRlclJlbmRlcmluZz1mdW5jdGlvbigpe3RoaXMuZmlyZUFmdGVyUmVuZGVyaW5nKCl9O3NhcC51aS5jb3JlLnRtcGwuVGVtcGxhdGVDb250cm9sLnByb3RvdHlwZS51cGRhdGVCaW5kaW5ncz1mdW5jdGlvbih1LG0pe3NhcC51aS5iYXNlLk1hbmFnZWRPYmplY3QucHJvdG90eXBlLnVwZGF0ZUJpbmRpbmdzLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtpZih0aGlzLmdldERvbVJlZigpKXt0aGlzLmludmFsaWRhdGUoKX19O3NhcC51aS5jb3JlLnRtcGwuVGVtcGxhdGVDb250cm9sLnByb3RvdHlwZS5iaW5kPWZ1bmN0aW9uKHAsdCl7dmFyIFA9c2FwLnVpLmNvcmUudG1wbC5UZW1wbGF0ZS5wYXJzZVBhdGgocCksbT10aGlzLmdldE1vZGVsKFAubW9kZWwpLHA9UC5wYXRoLE09dD8iYmluZCIralF1ZXJ5LnNhcC5jaGFyVG9VcHBlckNhc2UodCk6ImJpbmRQcm9wZXJ0eSIsYj1tJiZtW01dKHApLGE9dGhpcztpZihiKXtiLmF0dGFjaENoYW5nZShmdW5jdGlvbigpe2pRdWVyeS5zYXAubG9nLmRlYnVnKCJUZW1wbGF0ZUNvbnRyb2wjIithLmdldElkKCkrIjogIit0KyIgYmluZGluZyBjaGFuZ2VkIGZvciBwYXRoIFwiIitwKyJcIiIpO2EuaW52YWxpZGF0ZSgpfSl9dGhpcy5fYUJpbmRpbmdJbmZvcy5wdXNoKHtiaW5kaW5nOmIscGF0aDpQLnBhdGgsbW9kZWw6UC5tb2RlbH0pO3JldHVybiBifTtzYXAudWkuY29yZS50bXBsLlRlbXBsYXRlQ29udHJvbC5wcm90b3R5cGUuYmluZFByb3A9ZnVuY3Rpb24ocCl7dmFyIGI9dGhpcy5iaW5kKHAsInByb3BlcnR5Iik7cmV0dXJuIGImJmIuZ2V0RXh0ZXJuYWxWYWx1ZSgpfTtzYXAudWkuY29yZS50bXBsLlRlbXBsYXRlQ29udHJvbC5wcm90b3R5cGUuYmluZExpc3Q9ZnVuY3Rpb24ocCl7dmFyIGI9dGhpcy5iaW5kKHAsImxpc3QiKSxtPWImJmIuZ2V0TW9kZWwoKSxwPWImJmIuZ2V0UGF0aCgpO3JldHVybiBiJiZtLmdldFByb3BlcnR5KHApfTtzYXAudWkuY29yZS50bXBsLlRlbXBsYXRlQ29udHJvbC5wcm90b3R5cGUuY3JlYXRlRE9NRWxlbWVudD1mdW5jdGlvbihzLHAsZCl7dmFyIGU9bmV3IHNhcC51aS5jb3JlLnRtcGwuRE9NRWxlbWVudChzKTtpZihwKXtlLmJpbmRFbGVtZW50KHApfWlmKCFkKXt0aGlzLmFkZEFnZ3JlZ2F0aW9uKCJjb250cm9scyIsZSl9cmV0dXJuIGV9O3NhcC51aS5jb3JlLnRtcGwuVGVtcGxhdGVDb250cm9sLnByb3RvdHlwZS5jcmVhdGVDb250cm9sPWZ1bmN0aW9uKHMscCxkLHYpe3ZhciBoPXt9O2pRdWVyeS5lYWNoKHMsZnVuY3Rpb24oayxWKXtoWyJkYXRhLSIralF1ZXJ5LnNhcC5oeXBoZW4oayldPVZ9KTt2YXIgJD1qUXVlcnkoIjxkaXYvPiIsaCk7dmFyIGM9c2FwLnVpLmNvcmUuRGVjbGFyYXRpdmVTdXBwb3J0Ll9jcmVhdGVDb250cm9sKCQuZ2V0KDApLHYpO2lmKHApe2MuYmluZEVsZW1lbnQocCl9aWYoIWQpe3RoaXMuYWRkQWdncmVnYXRpb24oImNvbnRyb2xzIixjKX1yZXR1cm4gY307cmV0dXJuIHNhcC51aS5jb3JlLnRtcGwuVGVtcGxhdGVDb250cm9sfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUudXRpbC5FeHBvcnQnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS51dGlsLkV4cG9ydCcpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL3V0aWwvRXhwb3J0IixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL2NvcmUvQ29udHJvbCcsJy4vRXhwb3J0Q29sdW1uJywnLi9FeHBvcnRSb3cnLCcuL0V4cG9ydFR5cGUnLCcuL0ZpbGUnXSxmdW5jdGlvbihxLEMsRSxhLGIsRil7J3VzZSBzdHJpY3QnO2Z1bmN0aW9uIHcoZixvKXtpZihmKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gZi5hcHBseShvLGFyZ3VtZW50cyl9fWVsc2V7cmV0dXJuIGZ9fWZ1bmN0aW9uIHAobSl7cS5zYXAubG9nLndhcm5pbmcoIlVzYWdlIG9mIGRlcHJlY2F0ZWQgalF1ZXJ5IFByb21pc2UgbWV0aG9kOiAnIittKyInLiAiKyJQbGVhc2UgdXNlIHRoZSBzdGFuZGFyZCBQcm9taXNlIG1ldGhvZHMgJ3RoZW4nIC8gJ2NhdGNoJyBpbnN0ZWFkISIsIiIsInNhcC51aS5jb3JlLnV0aWwuRXhwb3J0Iil9ZnVuY3Rpb24gYyhQLG8pe3ZhciBPPW5ldyBQcm9taXNlKFApO289b3x8Tzt2YXIgcj1mYWxzZSxSPWZhbHNlO08udGhlbihmdW5jdGlvbih2KXtyPXRydWU7cmV0dXJuIHZ9LGZ1bmN0aW9uKGUpe1I9dHJ1ZTt0aHJvdyBlfSk7dmFyIG09e3RoZW46Ty50aGVuLCJjYXRjaCI6T1siY2F0Y2giXX07ZnVuY3Rpb24gZihlKXtlLnRoZW49ZnVuY3Rpb24ocyxnKXt2YXIgQT1bdyhzLG8pLHcoZyxvKV07cmV0dXJuIGYobS50aGVuLmFwcGx5KGUsQSksbyl9O2VbImNhdGNoIl09ZnVuY3Rpb24oZyl7dmFyIEE9W3coZyxvKV07cmV0dXJuIGYobVsiY2F0Y2giXS5hcHBseShlLEEpLG8pfTtxLmVhY2goW3tqcToiZG9uZSIsZXM2OiJ0aGVuIn0se2pxOiJmYWlsIixlczY6ImNhdGNoIn0se2pxOiJhbHdheXMiLGVzNjoidGhlbiJ9XSxmdW5jdGlvbihpLGcpe2VbZy5qcV09ZnVuY3Rpb24oKXtwKGcuanEpO3ZhciBoPW51bGw7cS5lYWNoKEFycmF5LnByb3RvdHlwZS5jb25jYXQuYXBwbHkoW10sYXJndW1lbnRzKSxmdW5jdGlvbihpLGope3ZhciBXPXcoaixvKTt2YXIgaz1mdW5jdGlvbih2KXtXLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtyZXR1cm4gdn07dmFyIEE9W2tdO2lmKGcuanE9PT0iYWx3YXlzIil7QS5wdXNoKGspfWlmKCFoKXtoPW1bZy5lczZdLmFwcGx5KGUsQSl9ZWxzZXtoPWhbZy5lczZdLmFwcGx5KGgsQSl9fSk7cmV0dXJuIGYoaCxvKX19KTtlLnBpcGU9ZnVuY3Rpb24oRCxnKXtwKCJwaXBlIik7cmV0dXJuIGUudGhlbihELGcpfTtlLnN0YXRlPWZ1bmN0aW9uKCl7cCgic3RhdGUiKTtpZihyKXtyZXR1cm4icmVzb2x2ZWQifWVsc2UgaWYoUil7cmV0dXJuInJlamVjdGVkIn1lbHNle3JldHVybiJwZW5kaW5nIn19O3JldHVybiBlfXJldHVybiBmKE8pfTt2YXIgZD1DLmV4dGVuZCgnc2FwLnVpLmNvcmUudXRpbC5FeHBvcnQnLHttZXRhZGF0YTp7cHVibGljTWV0aG9kczpbImdlbmVyYXRlIiwic2F2ZUZpbGUiXSxsaWJyYXJ5OiJzYXAudWkuY29yZSIsYWdncmVnYXRpb25zOntleHBvcnRUeXBlOnt0eXBlOidzYXAudWkuY29yZS51dGlsLkV4cG9ydFR5cGUnLG11bHRpcGxlOmZhbHNlfSxjb2x1bW5zOnt0eXBlOidzYXAudWkuY29yZS51dGlsLkV4cG9ydENvbHVtbicsbXVsdGlwbGU6dHJ1ZSxiaW5kYWJsZTonYmluZGFibGUnfSxyb3dzOnt0eXBlOidzYXAudWkuY29yZS51dGlsLkV4cG9ydFJvdycsbXVsdGlwbGU6dHJ1ZSxiaW5kYWJsZTonYmluZGFibGUnfSxfdGVtcGxhdGU6e3R5cGU6J3NhcC51aS5jb3JlLnV0aWwuRXhwb3J0Um93JyxtdWx0aXBsZTpmYWxzZSx2aXNpYmlsaXR5OidoaWRkZW4nfX19fSk7ZC5nZXRNZXRhZGF0YSgpLmdldEFsbEFnZ3JlZ2F0aW9ucygpWyJyb3dzIl0uX2RvZXNOb3RSZXF1aXJlRmFjdG9yeT10cnVlO2QucHJvdG90eXBlLmluaXQ9ZnVuY3Rpb24oKXt0aGlzLl9vUHJvbWlzZT1udWxsO3RoaXMuX2ZuUmVzb2x2ZVByb21pc2U9bnVsbDt0aGlzLl9vUm93QmluZGluZ0luZm89bnVsbH07ZC5wcm90b3R5cGUuZXhpdD1mdW5jdGlvbigpe2RlbGV0ZSB0aGlzLl9vUHJvbWlzZTtkZWxldGUgdGhpcy5fZm5SZXNvbHZlUHJvbWlzZTtkZWxldGUgdGhpcy5fb1Jvd0JpbmRpbmdJbmZvfTtkLnByb3RvdHlwZS5fY3JlYXRlUm93VGVtcGxhdGU9ZnVuY3Rpb24oKXt2YXIgdD1uZXcgYSh0aGlzLmdldElkKCkrIi1yb3ciKSxlPXRoaXMuZ2V0Q29sdW1ucygpO2Zvcih2YXIgaT0wLGw9ZS5sZW5ndGg7aTxsO2krKyl7dmFyIG89ZVtpXS5nZXRUZW1wbGF0ZSgpO2lmKG8pe3QuYWRkQ2VsbChvLmNsb25lKCJjb2wiK2kpKX19cmV0dXJuIHR9O2QucHJvdG90eXBlLmJpbmRBZ2dyZWdhdGlvbj1mdW5jdGlvbihuLEIpe2lmKG49PT0ncm93cycpe3RoaXMuX29Sb3dCaW5kaW5nSW5mbz1CO3JldHVybiB0aGlzfXJldHVybiBDLnByb3RvdHlwZS5iaW5kQWdncmVnYXRpb24uYXBwbHkodGhpcyxhcmd1bWVudHMpfTtkLnByb3RvdHlwZS51cGRhdGVSb3dzPWZ1bmN0aW9uKHIpe2lmKHI9PT0nY2hhbmdlJyYmdGhpcy5fZm5SZXNvbHZlUHJvbWlzZSl7dmFyIHM9dGhpcy5nZXRFeHBvcnRUeXBlKCkuX2dlbmVyYXRlKHRoaXMpO3RoaXMuZGVzdHJveUFnZ3JlZ2F0aW9uKCdfdGVtcGxhdGUnKTt0aGlzLnVuYmluZEFnZ3JlZ2F0aW9uKCdyb3dzJyk7dGhpcy5fZm5SZXNvbHZlUHJvbWlzZShzKTt0aGlzLl9vUHJvbWlzZT1udWxsO3RoaXMuX2ZuUmVzb2x2ZVByb21pc2U9bnVsbH19O2QucHJvdG90eXBlLmdlbmVyYXRlPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcztpZighdGhpcy5fb1Byb21pc2Upe3RoaXMuX29Qcm9taXNlPWMoZnVuY3Rpb24ocixmKXtlLl9mblJlc29sdmVQcm9taXNlPXI7aWYoIWUuaGFzTW9kZWwoKSl7ZigiR2VuZXJhdGUgaXMgbm90IHBvc3NpYmxlIGJlYXVzZSBubyBtb2RlbCB3YXMgc2V0LiIpfWVsc2V7dmFyIHQ9ZS5fY3JlYXRlUm93VGVtcGxhdGUoKTtlLnNldEFnZ3JlZ2F0aW9uKCdfdGVtcGxhdGUnLHQsdHJ1ZSk7Qy5wcm90b3R5cGUuYmluZEFnZ3JlZ2F0aW9uLmNhbGwoZSwncm93cycsZS5fb1Jvd0JpbmRpbmdJbmZvKTtpZihlLmdldEJpbmRpbmcoInJvd3MiKSl7ZS5nZXRCaW5kaW5nKCJyb3dzIikuZ2V0Q29udGV4dHMoMCxlLmdldEJpbmRpbmcoInJvd3MiKS5nZXRMZW5ndGgoKSl9fX0sdGhpcyl9cmV0dXJuIHRoaXMuX29Qcm9taXNlfTtkLnByb3RvdHlwZS5zYXZlRmlsZT1mdW5jdGlvbihmKXtyZXR1cm4gdGhpcy5nZW5lcmF0ZSgpLnRoZW4oZnVuY3Rpb24ocyl7dmFyIGU9dGhpcy5nZXRFeHBvcnRUeXBlKCk7Ri5zYXZlKHMsZnx8ImRhdGEiLGUuZ2V0RmlsZUV4dGVuc2lvbigpLGUuZ2V0TWltZVR5cGUoKSxlLmdldENoYXJzZXQoKSl9KX07cmV0dXJuIGR9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS5CdXN5SW5kaWNhdG9yJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUuQnVzeUluZGljYXRvcicpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL0J1c3lJbmRpY2F0b3IiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCcuL1BvcHVwJ10sZnVuY3Rpb24ocSxQKXsidXNlIHN0cmljdCI7dmFyIEI9cS5leHRlbmQocS5zYXAubmV3T2JqZWN0KHNhcC51aS5iYXNlLkV2ZW50UHJvdmlkZXIucHJvdG90eXBlKSx7b1BvcHVwOm51bGwsb0RvbVJlZjpudWxsLGJPcGVuUmVxdWVzdGVkOmZhbHNlLGlERUZBVUxUX0RFTEFZX01TOjEwMDAsc0RPTV9JRDoic2FwVWlCdXN5SW5kaWNhdG9yIn0pO3NhcC51aS5iYXNlLkV2ZW50UHJvdmlkZXIuYXBwbHkoQik7Qi5NX0VWRU5UUz17T3BlbjoiT3BlbiIsQ2xvc2U6IkNsb3NlIn07Qi5faW5pdD1mdW5jdGlvbigpe3ZhciByPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO3IuaWQ9dGhpcy5zRE9NX0lEO3RoaXMuX29SZXNCdW5kbGU9c2FwLnVpLmdldENvcmUoKS5nZXRMaWJyYXJ5UmVzb3VyY2VCdW5kbGUoInNhcC51aS5jb3JlIik7dmFyIHQ9dGhpcy5fb1Jlc0J1bmRsZS5nZXRUZXh0KCJCVVNZX1RFWFQiKTtkZWxldGUgdGhpcy5fb1Jlc0J1bmRsZTt2YXIgaT1zYXAudWkuZ2V0Q29yZSgpLmdldFN0YXRpY0FyZWFSZWYoKTtpLmFwcGVuZENoaWxkKHIpO3EocikuYWRkQ2xhc3MoInNhcFVpQnVzeSIpLmF0dHIoInRhYmluZGV4IiwwKS5hdHRyKCJyb2xlIiwicHJvZ3Jlc3NiYXIiKS5hdHRyKCJhbHQiLCIiKS5hdHRyKCJ0aXRsZSIsdCk7dGhpcy5vRG9tUmVmPXI7dGhpcy5vUG9wdXA9bmV3IFAocik7dGhpcy5vUG9wdXAuc2V0TW9kYWwodHJ1ZSwic2FwVWlCbHlCdXN5Iik7dGhpcy5vUG9wdXAuc2V0U2hhZG93KGZhbHNlKTtpZihzYXAudWkuRGV2aWNlLmJyb3dzZXIubXNpZSYmc2FwLnVpLkRldmljZS5icm93c2VyLnZlcnNpb248PTkpe3RoaXMuX2lCdXN5UGFnZVdpZHRoPXEoZG9jdW1lbnQuYm9keSkud2lkdGgoKTt0aGlzLl9pQnVzeUxlZnQ9MDt0aGlzLl9pQnVzeURlbHRhPTYwO3RoaXMuX2lCdXN5VGltZVN0ZXA9NTA7dGhpcy5faUJ1c3lXaWR0aD01MDA7dGhpcy5hdHRhY2hPcGVuKHRoaXMuX0lFQW5pbWF0aW9uLHRoaXMpfX07Qi5fSUVBbmltYXRpb249ZnVuY3Rpb24oZSl7aWYoIXRoaXMuXyRCdXN5SW5kaWNhdG9yJiZlKXt0aGlzLl8kQnVzeUluZGljYXRvcj1lLmdldFBhcmFtZXRlcigiJEJ1c3kiKX1xLnNhcC5jbGVhckRlbGF5ZWRDYWxsKHRoaXMuX2lBbmltYXRpb25UaW1lb3V0KTt0aGlzLl9pQnVzeUxlZnQrPXRoaXMuX2lCdXN5RGVsdGE7aWYodGhpcy5faUJ1c3lMZWZ0PnRoaXMuX2lCdXN5UGFnZVdpZHRoKXt0aGlzLl9pQnVzeUxlZnQ9LXRoaXMuX2lCdXN5V2lkdGh9aWYoIXRoaXMuXyRCdXN5SW5kaWNhdG9yKXtxLnNhcC5jbGVhckRlbGF5ZWRDYWxsKHRoaXMuX2lBbmltYXRpb25UaW1lb3V0KX1lbHNle3RoaXMuXyRCdXN5SW5kaWNhdG9yLmNzcygiYmFja2dyb3VuZC1wb3NpdGlvbiIsdGhpcy5faUJ1c3lMZWZ0KyJweCAwcHgiKTt0aGlzLl9pQW5pbWF0aW9uVGltZW91dD1xLnNhcC5kZWxheWVkQ2FsbCh0aGlzLl9pQnVzeVRpbWVTdGVwLHRoaXMsdGhpcy5fSUVBbmltYXRpb24pfX07Qi5zaG93PWZ1bmN0aW9uKGQpe3Euc2FwLmxvZy5kZWJ1Zygic2FwLnVpLmNvcmUuQnVzeUluZGljYXRvci5zaG93IChkZWxheTogIitkKyIpIGF0ICIrbmV3IERhdGUoKS5nZXRUaW1lKCkpO2lmKChkPT09dW5kZWZpbmVkKXx8KChkIT0wKSYmKHBhcnNlSW50KGQsMTApPT0wKSl8fChwYXJzZUludChkLDEwKTwwKSl7ZD10aGlzLmlERUZBVUxUX0RFTEFZX01TfXRoaXMuYk9wZW5SZXF1ZXN0ZWQ9dHJ1ZTtpZihkPT09MCl7dGhpcy5fc2hvd05vd0lmUmVxdWVzdGVkKCl9ZWxzZXtxLnNhcC5kZWxheWVkQ2FsbChkLHRoaXMsIl9zaG93Tm93SWZSZXF1ZXN0ZWQiKX19O0IuX3Nob3dOb3dJZlJlcXVlc3RlZD1mdW5jdGlvbigpe3Euc2FwLmxvZy5kZWJ1Zygic2FwLnVpLmNvcmUuQnVzeUluZGljYXRvci5fc2hvd05vd0lmUmVxdWVzdGVkIChiT3BlblJlcXVlc3RlZDogIit0aGlzLmJPcGVuUmVxdWVzdGVkKyIpIGF0ICIrbmV3IERhdGUoKS5nZXRUaW1lKCkpO2lmKCF0aGlzLmJPcGVuUmVxdWVzdGVkKXtyZXR1cm59aWYoIWRvY3VtZW50LmJvZHl8fCFzYXAudWkuZ2V0Q29yZSgpLmlzSW5pdGlhbGl6ZWQoKSl7cS5zYXAuZGVsYXllZENhbGwoMTAwLHRoaXMsIl9zaG93Tm93SWZSZXF1ZXN0ZWQiKTtyZXR1cm59dGhpcy5iT3BlblJlcXVlc3RlZD1mYWxzZTtpZighdGhpcy5vRG9tUmVmKXt0aGlzLl9pbml0KCl9dGhpcy5vUG9wdXAub3BlbigwLFAuRG9jay5DZW50ZXJDZW50ZXIsUC5Eb2NrLkNlbnRlckNlbnRlcixkb2N1bWVudCk7dGhpcy5maXJlT3Blbih7JEJ1c3k6dGhpcy5vUG9wdXAuXyQoKX0pO3ZhciBkPXEuc2FwLmRvbUJ5SWQoQi5zRE9NX0lEKTtxLnNhcC5mb2N1cyhkKTtxKCJib2R5IikuYXR0cigiYXJpYS1idXN5Iix0cnVlKX07Qi5oaWRlPWZ1bmN0aW9uKCl7cS5zYXAubG9nLmRlYnVnKCJzYXAudWkuY29yZS5CdXN5SW5kaWNhdG9yLmhpZGUgYXQgIituZXcgRGF0ZSgpLmdldFRpbWUoKSk7dmFyIHQ9Qjt0LmJPcGVuUmVxdWVzdGVkPWZhbHNlO2lmKHQub0RvbVJlZil7cSgiYm9keSIpLnJlbW92ZUF0dHIoImFyaWEtYnVzeSIpO3RoaXMuZmlyZUNsb3NlKHskQnVzeTp0aGlzLm9Qb3B1cC5fJCgpfSk7dC5vUG9wdXAuY2xvc2UoMCl9ZGVsZXRlIHRoaXMuXyRCdXN5SW5kaWNhdG9yfTtCLmF0dGFjaE9wZW49ZnVuY3Rpb24oZixsKXt0aGlzLmF0dGFjaEV2ZW50KEIuTV9FVkVOVFMuT3BlbixmLGwpO3JldHVybiB0aGlzfTtCLmRldGFjaE9wZW49ZnVuY3Rpb24oZixsKXt0aGlzLmRldGFjaEV2ZW50KEIuTV9FVkVOVFMuT3BlbixmLGwpO3JldHVybiB0aGlzfTtCLmF0dGFjaENsb3NlPWZ1bmN0aW9uKGYsbCl7dGhpcy5hdHRhY2hFdmVudChCLk1fRVZFTlRTLkNsb3NlLGYsbCk7cmV0dXJuIHRoaXN9O0IuZGV0YWNoQ2xvc2U9ZnVuY3Rpb24oZixsKXt0aGlzLmRldGFjaEV2ZW50KEIuTV9FVkVOVFMuQ2xvc2UsZixsKTtyZXR1cm4gdGhpc307Qi5maXJlT3Blbj1mdW5jdGlvbihwKXt0aGlzLmZpcmVFdmVudChCLk1fRVZFTlRTLk9wZW4scCl9O0IuZmlyZUNsb3NlPWZ1bmN0aW9uKHApe3RoaXMuZmlyZUV2ZW50KEIuTV9FVkVOVFMuQ2xvc2UscCl9O3JldHVybiBCfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUuQ29tcG9uZW50Q29udGFpbmVyJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUuQ29tcG9uZW50Q29udGFpbmVyJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvQ29tcG9uZW50Q29udGFpbmVyIixbJy4vbGlicmFyeScsJy4vQ29udHJvbCddLGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO3NhcC51aS5jb3JlLkNvbnRyb2wuZXh0ZW5kKCJzYXAudWkuY29yZS5Db21wb25lbnRDb250YWluZXIiLHttZXRhZGF0YTp7bGlicmFyeToic2FwLnVpLmNvcmUiLHByb3BlcnRpZXM6eyJuYW1lIjp7dHlwZToic3RyaW5nIixncm91cDoiIixkZWZhdWx0VmFsdWU6bnVsbH0sInVybCI6e3R5cGU6InNhcC51aS5jb3JlLlVSSSIsZ3JvdXA6IiIsZGVmYXVsdFZhbHVlOm51bGx9LCJzZXR0aW5ncyI6e3R5cGU6Im9iamVjdCIsZ3JvdXA6IiIsZGVmYXVsdFZhbHVlOm51bGx9LCJwcm9wYWdhdGVNb2RlbCI6e3R5cGU6ImJvb2xlYW4iLGdyb3VwOiIiLGRlZmF1bHRWYWx1ZTpmYWxzZX0sIndpZHRoIjp7dHlwZToic2FwLnVpLmNvcmUuQ1NTU2l6ZSIsZ3JvdXA6IkRpbWVuc2lvbiIsZGVmYXVsdFZhbHVlOm51bGx9LCJoZWlnaHQiOnt0eXBlOiJzYXAudWkuY29yZS5DU1NTaXplIixncm91cDoiRGltZW5zaW9uIixkZWZhdWx0VmFsdWU6bnVsbH19LGFzc29jaWF0aW9uczp7ImNvbXBvbmVudCI6e3R5cGU6InNhcC51aS5jb3JlLlVJQ29tcG9uZW50IixtdWx0aXBsZTpmYWxzZX19fX0pO3NhcC51aS5jb3JlLkNvbXBvbmVudENvbnRhaW5lci5wcm90b3R5cGUuZ2V0Q29tcG9uZW50SW5zdGFuY2U9ZnVuY3Rpb24oKXt2YXIgYz10aGlzLmdldENvbXBvbmVudCgpO3JldHVybiBzYXAudWkuZ2V0Q29yZSgpLmdldENvbXBvbmVudChjKX07c2FwLnVpLmNvcmUuQ29tcG9uZW50Q29udGFpbmVyLnByb3RvdHlwZS5zZXRDb21wb25lbnQ9ZnVuY3Rpb24oYyxzKXt2YXIgbz10aGlzLmdldENvbXBvbmVudEluc3RhbmNlKCk7aWYobyl7by5zZXRDb250YWluZXIodW5kZWZpbmVkKX10aGlzLnNldEFzc29jaWF0aW9uKCJjb21wb25lbnQiLGMscyk7Yz10aGlzLmdldENvbXBvbmVudEluc3RhbmNlKCk7aWYoYyl7Yy5zZXRDb250YWluZXIodGhpcyk7dGhpcy5wcm9wYWdhdGVQcm9wZXJ0aWVzKCl9fTtzYXAudWkuY29yZS5Db21wb25lbnRDb250YWluZXIucHJvdG90eXBlLm9uQmVmb3JlUmVuZGVyaW5nPWZ1bmN0aW9uKCl7dmFyIGM9dGhpcy5nZXRDb21wb25lbnRJbnN0YW5jZSgpO2lmKCFjKXt2YXIgbj10aGlzLmdldE5hbWUoKTtpZihuKXtjPXNhcC51aS5jb21wb25lbnQoe25hbWU6bix1cmw6dGhpcy5nZXRVcmwoKSxzZXR0aW5nczp0aGlzLmdldFNldHRpbmdzKCl9KTt0aGlzLnNldENvbXBvbmVudChjLHRydWUpfX1pZihjJiZjLm9uQmVmb3JlUmVuZGVyaW5nKXtjLm9uQmVmb3JlUmVuZGVyaW5nKCl9fTtzYXAudWkuY29yZS5Db21wb25lbnRDb250YWluZXIucHJvdG90eXBlLm9uQWZ0ZXJSZW5kZXJpbmc9ZnVuY3Rpb24oKXt2YXIgYz10aGlzLmdldENvbXBvbmVudEluc3RhbmNlKCk7aWYoYyYmYy5vbkFmdGVyUmVuZGVyaW5nKXtjLm9uQWZ0ZXJSZW5kZXJpbmcoKX19O3NhcC51aS5jb3JlLkNvbXBvbmVudENvbnRhaW5lci5wcm90b3R5cGUuZXhpdD1mdW5jdGlvbigpe3ZhciBjPXRoaXMuZ2V0Q29tcG9uZW50SW5zdGFuY2UoKTtpZihjKXtjLmRlc3Ryb3koKX19O3NhcC51aS5jb3JlLkNvbXBvbmVudENvbnRhaW5lci5wcm90b3R5cGUucHJvcGFnYXRlUHJvcGVydGllcz1mdW5jdGlvbihuKXt2YXIgYz10aGlzLmdldENvbXBvbmVudEluc3RhbmNlKCk7aWYoYyYmdGhpcy5nZXRQcm9wYWdhdGVNb2RlbCgpKXt0aGlzLl9wcm9wYWdhdGVQcm9wZXJ0aWVzKG4sYyk7c2FwLnVpLmNvcmUuQ29udHJvbC5wcm90b3R5cGUucHJvcGFnYXRlUHJvcGVydGllcy5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fTtyZXR1cm4gc2FwLnVpLmNvcmUuQ29tcG9uZW50Q29udGFpbmVyfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUuQ29tcG9zaXRlU3VwcG9ydCcpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLkNvbXBvc2l0ZVN1cHBvcnQnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9Db21wb3NpdGVTdXBwb3J0IixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnLi9Db250cm9sJywnc2FwL3VpL21vZGVsL2NvbnRyb2wvQ29udHJvbE1vZGVsJ10sZnVuY3Rpb24ocSxDLGEpeyJ1c2Ugc3RyaWN0Ijt2YXIgYj17fTtiLm1peEludG89ZnVuY3Rpb24oYyxmLG0pe2lmKGFyZ3VtZW50cy5sZW5ndGg9PTImJnR5cGVvZiBmPT09Im9iamVjdCIpe209ZjtmPSJDb21wb25lbnRGYWN0b3J5In1mdW5jdGlvbiBfKCl7dmFyIE09Yy5nZXRNZXRhZGF0YSgpO2Rve009TS5nZXRQYXJlbnQoKTtpZihNJiZNLmdldENvbXBvbmVudEZhY3RvcnlDbGFzcyl7cmV0dXJuIE0uZ2V0Q29tcG9uZW50RmFjdG9yeUNsYXNzKCl9fXdoaWxlKE0pO3JldHVybiBzYXAudWkuY29yZS5Db21wb25lbnRGYWN0b3J5fWNbZl09KF8oKSkuc3ViY2xhc3MobSk7Yy5nZXRNZXRhZGF0YSgpLmdldENvbXBvbmVudEZhY3RvcnlDbGFzcz1xLnNhcC5nZXR0ZXIoY1tmXSk7aWYoIWMucHJvdG90eXBlLl9pbml0Q29tcG9zaXRlU3VwcG9ydCl7Yy5wcm90b3R5cGUuX2luaXRDb21wb3NpdGVTdXBwb3J0PWZ1bmN0aW9uKHMpe3ZhciBGPW5ldyh0aGlzLmdldE1ldGFkYXRhKCkuZ2V0Q29tcG9uZW50RmFjdG9yeUNsYXNzKCkpKHRoaXMpO2lmKHMuY29tcG9uZW50RmFjdG9yeSl7Ri5jdXN0b21pemUocy5jb21wb25lbnRGYWN0b3J5KTtkZWxldGUgcy5jb21wb25lbnRGYWN0b3J5fXRoaXMuZ2V0Q29tcG9uZW50RmFjdG9yeT1xLnNhcC5nZXR0ZXIoRil9fWlmKCFjLnByb3RvdHlwZS5fZXhpdENvbXBvc2l0ZVN1cHBvcnQpe2MucHJvdG90eXBlLl9leGl0Q29tcG9zaXRlU3VwcG9ydD1mdW5jdGlvbigpe3RoaXMuZ2V0Q29tcG9uZW50RmFjdG9yeSgpLmRlc3Ryb3koKTtkZWxldGUgdGhpcy5nZXRDb21wb25lbnRGYWN0b3J5fX19O3NhcC51aS5iYXNlLkV2ZW50UHJvdmlkZXIuZXh0ZW5kKCJzYXAudWkuY29yZS5Db21wb25lbnRGYWN0b3J5Iix7Y29uc3RydWN0b3I6ZnVuY3Rpb24oYyl7c2FwLnVpLmJhc2UuRXZlbnRQcm92aWRlci5hcHBseSh0aGlzKTt0aGlzLm9Db21wb3NpdGU9YztyZXR1cm4gdGhpc319KTtzYXAudWkuY29yZS5Db21wb25lbnRGYWN0b3J5LnByb3RvdHlwZS5hdHRhY2hDaGFuZ2U9ZnVuY3Rpb24oZixvKXt0aGlzLmdldE1vZGVsKCk7dGhpcy5hdHRhY2hFdmVudCgiY2hhbmdlIixmLG8pO3JldHVybiB0aGlzfTtzYXAudWkuY29yZS5Db21wb25lbnRGYWN0b3J5LnByb3RvdHlwZS5kZXRhY2hDaGFuZ2U9ZnVuY3Rpb24oZixvKXt0aGlzLmdldE1vZGVsKCk7dGhpcy5kZXRhY2hFdmVudCgiY2hhbmdlIixmLG8pO3JldHVybiB0aGlzfTtzYXAudWkuY29yZS5Db21wb25lbnRGYWN0b3J5LnByb3RvdHlwZS5nZXRNb2RlbD1mdW5jdGlvbigpe2lmKCF0aGlzLm9Nb2RlbCl7dmFyIHQ9dGhpczt0aGlzLm9Nb2RlbD1uZXcgYSh0aGlzLm9Db21wb3NpdGUpO3RoaXMub01vZGVsLl9vbmNoYW5nZT1mdW5jdGlvbihlKXt0LmZpcmVFdmVudCgiY2hhbmdlIixlLmdldFBhcmFtZXRlcnMmJmUuZ2V0UGFyYW1ldGVycygpKX19cmV0dXJuIHRoaXMub01vZGVsfTtzYXAudWkuY29yZS5Db21wb25lbnRGYWN0b3J5LnByb3RvdHlwZS5hZGRGYWNhZGVDb21wb25lbnQ9ZnVuY3Rpb24oZSl7dGhpcy5nZXRNb2RlbCgpLmFkZChlKX07c2FwLnVpLmNvcmUuQ29tcG9uZW50RmFjdG9yeS5wcm90b3R5cGUucmVtb3ZlRmFjYWRlQ29tcG9uZW50PWZ1bmN0aW9uKGUpe3RoaXMuZ2V0TW9kZWwoKS5yZW1vdmUoZSl9OyhmdW5jdGlvbigpe2Z1bmN0aW9uIF8obyxtLGQpe3EuZWFjaChtLGZ1bmN0aW9uKG4sZil7aWYobi5pbmRleE9mKCJkZWZhdWx0IikhPTApe29bbl09Zn1pZihkJiZuLmluZGV4T2YoImNyZWF0ZSIpPT0wKXtvWyJkZWZhdWx0QyIrbi5zdWJzdHJpbmcoMSldPW9bbl19fSl9ZnVuY3Rpb24gYyhCKXtyZXR1cm4gZnVuY3Rpb24obSl7dmFyIGY9ZnVuY3Rpb24oKXtCLmFwcGx5KHRoaXMsYXJndW1lbnRzKX07Zi5wcm90b3R5cGU9cS5zYXAubmV3T2JqZWN0KEIucHJvdG90eXBlKTtfKGYucHJvdG90eXBlLG0sdHJ1ZSk7Zi5jdXN0b21pemU9ZnVuY3Rpb24obSl7XyhmLnByb3RvdHlwZSxtKTtyZXR1cm4gdGhpc307Zi5zdWJjbGFzcz1jKGYpO3JldHVybiBmfX1zYXAudWkuY29yZS5Db21wb25lbnRGYWN0b3J5LnN1YmNsYXNzPWMoc2FwLnVpLmNvcmUuQ29tcG9uZW50RmFjdG9yeSk7c2FwLnVpLmNvcmUuQ29tcG9uZW50RmFjdG9yeS5wcm90b3R5cGUuY3VzdG9taXplPWZ1bmN0aW9uKG0pe18odGhpcyxtKTtpZih0aGlzLm9Db21wb3NpdGUmJnRoaXMub0NvbXBvc2l0ZS5fb25Db21wb25lbnRGYWN0b3J5Q2hhbmdlZCl7dGhpcy5vQ29tcG9zaXRlLl9vbkNvbXBvbmVudEZhY3RvcnlDaGFuZ2VkKCl9cmV0dXJuIHRoaXN9fSgpKTtyZXR1cm4gYn0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLlVJQ29tcG9uZW50Jykpew0KLyoNCiAqIFNBUCBVSSBkZXZlbG9wbWVudCB0b29sa2l0IGZvciBIVE1MNSAoU0FQVUk1L09wZW5VSTUpDQogKiAoYykgQ29weXJpZ2h0IDIwMDktMjAxNCBTQVAgU0Ugb3IgYW4gU0FQIGFmZmlsaWF0ZSBjb21wYW55LiANCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgLSBzZWUgTElDRU5TRS50eHQuDQogKi8NCmpRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUuVUlDb21wb25lbnQnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9VSUNvbXBvbmVudCIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJy4vQ29tcG9uZW50JywnLi9VSUNvbXBvbmVudE1ldGFkYXRhJywnLi9tdmMvVmlldyddLGZ1bmN0aW9uKHEsQyxVLFYpeyJ1c2Ugc3RyaWN0Ijt2YXIgYT1DLmV4dGVuZCgic2FwLnVpLmNvcmUuVUlDb21wb25lbnQiLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbihpLHMpe3RyeXtDLmFwcGx5KHRoaXMsYXJndW1lbnRzKX1jYXRjaChlKXtpZih0aGlzLl9vUm91dGVyKXt0aGlzLl9vUm91dGVyLmRlc3Ryb3koKX10aHJvdyBlfX0sbWV0YWRhdGE6eyJhYnN0cmFjdCI6dHJ1ZSxyb290VmlldzpudWxsLHB1YmxpY01ldGhvZHM6WyJyZW5kZXIiXSxhZ2dyZWdhdGlvbnM6eyJyb290Q29udHJvbCI6e3R5cGU6InNhcC51aS5jb3JlLkNvbnRyb2wiLG11bHRpcGxlOmZhbHNlLHZpc2liaWxpdHk6ImhpZGRlbiJ9fSxyb3V0aW5nOnt9fX0sVSk7YS5wcm90b3R5cGUuaW5pdD1mdW5jdGlvbigpe3ZhciB0PXRoaXM7dmFyIHA9e307aWYodGhpcy5nZXRBdXRvUHJlZml4SWQoKSl7cC5pZD1mdW5jdGlvbihpKXtyZXR1cm4gdC5jcmVhdGVJZChpKX19dmFyIG09dGhpcy5nZXRNZXRhZGF0YSgpO3ZhciByPXEuZXh0ZW5kKHt9LG0uZ2V0Um91dGluZ0NvbmZpZygpKTt2YXIgUj1tLmdldFJvdXRlcygpO2lmKFIpe3Euc2FwLnJlcXVpcmUoInNhcC51aS5jb3JlLnJvdXRpbmcuUm91dGVyIik7dmFyIGY9ci5yb3V0ZXJDbGFzc3x8c2FwLnVpLmNvcmUucm91dGluZy5Sb3V0ZXI7aWYodHlwZW9mIGY9PT0ic3RyaW5nIil7Zj1xLnNhcC5nZXRPYmplY3QoZil9dGhpcy5fb1JvdXRlcj1uZXcgZihSLHIsdGhpcyl9c2FwLnVpLmJhc2UuTWFuYWdlZE9iamVjdC5ydW5XaXRoT3duZXIoZnVuY3Rpb24oKXtzYXAudWkuYmFzZS5NYW5hZ2VkT2JqZWN0LnJ1bldpdGhQcmVwcm9jZXNzb3JzKGZ1bmN0aW9uKCl7dC5zZXRBZ2dyZWdhdGlvbigicm9vdENvbnRyb2wiLHQuY3JlYXRlQ29udGVudCgpKX0scCl9LHRoaXMpO3ZhciBvPXRoaXMuZ2V0QWdncmVnYXRpb24oInJvb3RDb250cm9sIik7aWYobyBpbnN0YW5jZW9mIFYpe2lmKHIudGFyZ2V0UGFyZW50PT09dW5kZWZpbmVkKXtyLnRhcmdldFBhcmVudD1vLmdldElkKCl9fX07YS5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbigpe2lmKHRoaXMuX29Sb3V0ZXIpe3RoaXMuX29Sb3V0ZXIuZGVzdHJveSgpO2RlbGV0ZSB0aGlzLl9vUm91dGVyfUMucHJvdG90eXBlLmRlc3Ryb3kuYXBwbHkodGhpcyxhcmd1bWVudHMpfTthLmdldFJvdXRlckZvcj1mdW5jdGlvbihjKXt2YXIgdj1jO2lmKHYgaW5zdGFuY2VvZiBzYXAudWkuY29yZS5tdmMuQ29udHJvbGxlcil7dj12LmdldFZpZXcoKX1pZih2IGluc3RhbmNlb2YgVil7dmFyIG89Qy5nZXRPd25lcklkRm9yKHYpLGI9c2FwLnVpLmNvbXBvbmVudChvKTtpZihiKXtyZXR1cm4gYi5nZXRSb3V0ZXIoKX1lbHNle3JldHVybiB1bmRlZmluZWR9fX07YS5wcm90b3R5cGUuZ2V0Um91dGVyPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29Sb3V0ZXJ9O2EucHJvdG90eXBlLmdldEF1dG9QcmVmaXhJZD1mdW5jdGlvbigpe3JldHVybiBmYWxzZX07YS5wcm90b3R5cGUuYnlJZD1mdW5jdGlvbihpKXtyZXR1cm4gc2FwLnVpLmdldENvcmUoKS5ieUlkKHRoaXMuY3JlYXRlSWQoaSkpfTthLnByb3RvdHlwZS5jcmVhdGVJZD1mdW5jdGlvbihpKXtpZighdGhpcy5pc1ByZWZpeGVkSWQoaSkpe2k9dGhpcy5nZXRJZCgpKyItLS0iK2l9cmV0dXJuIGl9O2EucHJvdG90eXBlLmlzUHJlZml4ZWRJZD1mdW5jdGlvbihpKXtyZXR1cm4oaSYmaS5pbmRleE9mKHRoaXMuZ2V0SWQoKSsiLS0tIik9PT0wKX07YS5wcm90b3R5cGUuY3JlYXRlQ29udGVudD1mdW5jdGlvbigpe3ZhciByPXRoaXMuZ2V0TWV0YWRhdGEoKS5nZXRSb290VmlldygpO2lmKHIpe3JldHVybiBzYXAudWkudmlldyhyKX1yZXR1cm4gbnVsbH07YS5wcm90b3R5cGUucmVuZGVyPWZ1bmN0aW9uKHIpe3ZhciBjPXRoaXMuZ2V0QWdncmVnYXRpb24oInJvb3RDb250cm9sIik7aWYoYyYmcil7ci5yZW5kZXJDb250cm9sKGMpfX07YS5wcm90b3R5cGUuZ2V0VUlBcmVhPWZ1bmN0aW9uKCl7cmV0dXJuKHRoaXMub0NvbnRhaW5lcj90aGlzLm9Db250YWluZXIuZ2V0VUlBcmVhKCk6bnVsbCl9O2EucHJvdG90eXBlLmdldEV2ZW50aW5nUGFyZW50PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0VUlBcmVhKCl9O2EucHJvdG90eXBlLnNldENvbnRhaW5lcj1mdW5jdGlvbihjKXt0aGlzLm9Db250YWluZXI9YztyZXR1cm4gdGhpc307YS5wcm90b3R5cGUub25CZWZvcmVSZW5kZXJpbmc9ZnVuY3Rpb24oKXt9O2EucHJvdG90eXBlLm9uQWZ0ZXJSZW5kZXJpbmc9ZnVuY3Rpb24oKXt9O3JldHVybiBhfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUubXZjLkhUTUxWaWV3Jykpew0KLyohDQogKiBTQVAgVUkgZGV2ZWxvcG1lbnQgdG9vbGtpdCBmb3IgSFRNTDUgKFNBUFVJNS9PcGVuVUk1KQ0KICogKGMpIENvcHlyaWdodCAyMDA5LTIwMTQgU0FQIFNFIG9yIGFuIFNBUCBhZmZpbGlhdGUgY29tcGFueS4gDQogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wIC0gc2VlIExJQ0VOU0UudHh0Lg0KICovDQpqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLm12Yy5IVE1MVmlldycpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL212Yy9IVE1MVmlldyIsWydzYXAvdWkvY29yZS9saWJyYXJ5JywnLi9WaWV3Jywnc2FwL3VpL2NvcmUvRGVjbGFyYXRpdmVTdXBwb3J0Jywnc2FwL3VpL2NvcmUvUmVuZGVyTWFuYWdlciddLGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO3NhcC51aS5jb3JlLm12Yy5WaWV3LmV4dGVuZCgic2FwLnVpLmNvcmUubXZjLkhUTUxWaWV3Iix7bWV0YWRhdGE6e2xpYnJhcnk6InNhcC51aS5jb3JlIn19KTtzYXAudWkuaHRtbHZpZXc9ZnVuY3Rpb24oaSx2KXtyZXR1cm4gc2FwLnVpLnZpZXcoaSx2LHNhcC51aS5jb3JlLm12Yy5WaWV3VHlwZS5IVE1MKX07c2FwLnVpLmNvcmUubXZjLkhUTUxWaWV3Ll9zVHlwZT1zYXAudWkuY29yZS5tdmMuVmlld1R5cGUuSFRNTDtzYXAudWkuY29yZS5tdmMuSFRNTFZpZXcuX21UZW1wbGF0ZXM9e307c2FwLnVpLmNvcmUubXZjLkhUTUxWaWV3Ll9tQWxsb3dlZFNldHRpbmdzPXsidmlld05hbWUiOnRydWUsImNvbnRyb2xsZXIiOnRydWUsInZpZXdDb250ZW50Ijp0cnVlLCJjb250cm9sbGVyTmFtZSI6dHJ1ZSwicmVzb3VyY2VCdW5kbGVOYW1lIjp0cnVlLCJyZXNvdXJjZUJ1bmRsZVVybCI6dHJ1ZSwicmVzb3VyY2VCdW5kbGVMb2NhbGUiOnRydWUsInJlc291cmNlQnVuZGxlQWxpYXMiOnRydWV9O3NhcC51aS5jb3JlLm12Yy5IVE1MVmlldy5fZ2V0VGVtcGxhdGU9ZnVuY3Rpb24odCl7dmFyIHU9dGhpcy5fZ2V0Vmlld1VybCh0KTt2YXIgaD10aGlzLl9tVGVtcGxhdGVzW3VdO2lmKCFoKXtoPXRoaXMuX2xvYWRUZW1wbGF0ZSh0KTt0aGlzLl9tVGVtcGxhdGVzW3VdPWh9cmV0dXJuIGh9O3NhcC51aS5jb3JlLm12Yy5IVE1MVmlldy5wcm90b3R5cGUuZ2V0Q29udHJvbGxlck5hbWU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29udHJvbGxlck5hbWV9O3NhcC51aS5jb3JlLm12Yy5IVE1MVmlldy5fZ2V0Vmlld1VybD1mdW5jdGlvbih0KXtyZXR1cm4galF1ZXJ5LnNhcC5nZXRNb2R1bGVQYXRoKHQsIi52aWV3Lmh0bWwiKX07c2FwLnVpLmNvcmUubXZjLkhUTUxWaWV3Ll9sb2FkVGVtcGxhdGU9ZnVuY3Rpb24odCl7dmFyIHI9alF1ZXJ5LnNhcC5nZXRSZXNvdXJjZU5hbWUodCwiLnZpZXcuaHRtbCIpO3JldHVybiBqUXVlcnkuc2FwLmxvYWRSZXNvdXJjZShyKX07c2FwLnVpLmNvcmUubXZjLkhUTUxWaWV3LnByb3RvdHlwZS5pbml0Vmlld1NldHRpbmdzPWZ1bmN0aW9uKHMpe2lmKCFzKXt0aHJvdyBuZXcgRXJyb3IoIm1TZXR0aW5ncyBtdXN0IGJlIGdpdmVuIil9aWYocy52aWV3TmFtZSYmcy52aWV3Q29udGVudCl7dGhyb3cgbmV3IEVycm9yKCJWaWV3IG5hbWUgYW5kIHZpZXcgY29udGVudCBhcmUgZ2l2ZW4uIFRoZXJlIGlzIG5vIHBvaW50IGluIGRvaW5nIHRoaXMsIHNvIHBsZWFzZSBkZWNpZGUuIil9ZWxzZSBpZighcy52aWV3TmFtZSYmIXMudmlld0NvbnRlbnQpe3Rocm93IG5ldyBFcnJvcigiTmVpdGhlciB2aWV3IG5hbWUgbm9yIHZpZXcgY29udGVudCBpcyBnaXZlbi4gT25lIG9mIHRoZW0gaXMgcmVxdWlyZWQuIil9dmFyIGg9cy52aWV3Q29udGVudHx8c2FwLnVpLmNvcmUubXZjLkhUTUxWaWV3Ll9nZXRUZW1wbGF0ZShzLnZpZXdOYW1lKTt0aGlzLl9vVGVtcGxhdGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7dmFyIGg9c2FwLnVpLmNvcmUuUmVuZGVyTWFuYWdlci5wcmVwYXJlSFRNTDUoaCk7aWYodHlwZW9mIGg9PT0ic3RyaW5nIil7dGhpcy5fb1RlbXBsYXRlLmlubmVySFRNTD1ofWVsc2V7dmFyIG49aDt2YXIgZj1kb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7Zm9yKHZhciBpPTA7aTxuLmxlbmd0aDtpKyspe2YuYXBwZW5kQ2hpbGQobi5pdGVtKGkpKX10aGlzLl9vVGVtcGxhdGUuYXBwZW5kQ2hpbGQoZil9dmFyIG09dGhpcy5fb1RlbXBsYXRlLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJ0ZW1wbGF0ZSIpWzBdO3ZhciBwPXRoaXMuZ2V0TWV0YWRhdGEoKS5nZXRBbGxQcm9wZXJ0aWVzKCk7aWYobSl7dmFyIGE9dGhpczt2YXIgRD1zYXAudWkuY29yZS5EZWNsYXJhdGl2ZVN1cHBvcnQ7alF1ZXJ5LmVhY2gobS5hdHRyaWJ1dGVzLGZ1bmN0aW9uKEksQSl7dmFyIE49RC5jb252ZXJ0QXR0cmlidXRlVG9TZXR0aW5nTmFtZShBLm5hbWUsYS5nZXRJZCgpKTt2YXIgdj1BLnZhbHVlO3ZhciBQPXBbTl07aWYoIXNbTl0pe2lmKFApe3NbTl09RC5jb252ZXJ0VmFsdWVUb1R5cGUoRC5nZXRQcm9wZXJ0eURhdGFUeXBlKFApLHYpfWVsc2UgaWYoc2FwLnVpLmNvcmUubXZjLkhUTUxWaWV3Ll9tQWxsb3dlZFNldHRpbmdzW05dKXtzW05dPXZ9fX0pO3RoaXMuX29UZW1wbGF0ZT1tfWlmKHRoaXMuX29UZW1wbGF0ZS5jb250ZW50KXt2YXIgZj10aGlzLl9vVGVtcGxhdGUuY29udGVudDt0aGlzLl9vVGVtcGxhdGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7dGhpcy5fb1RlbXBsYXRlLmFwcGVuZENoaWxkKGYpfWlmKHMuY29udHJvbGxlck5hbWUpe3RoaXMuX2NvbnRyb2xsZXJOYW1lPXMuY29udHJvbGxlck5hbWV9aWYoKHMucmVzb3VyY2VCdW5kbGVOYW1lfHxzLnJlc291cmNlQnVuZGxlVXJsKSYmKCFzLm1vZGVsc3x8IXMubW9kZWxzW3MucmVzb3VyY2VCdW5kbGVBbGlhc10pKXt2YXIgYj1uZXcgc2FwLnVpLm1vZGVsLnJlc291cmNlLlJlc291cmNlTW9kZWwoe2J1bmRsZU5hbWU6cy5yZXNvdXJjZUJ1bmRsZU5hbWUsYnVuZGxlVXJsOnMucmVzb3VyY2VCdW5kbGVVcmwsYnVuZGxlTG9jYWxlOnMucmVzb3VyY2VCdW5kbGVMb2NhbGV9KTt0aGlzLnNldE1vZGVsKGIscy5yZXNvdXJjZUJ1bmRsZUFsaWFzKX19O3NhcC51aS5jb3JlLm12Yy5IVE1MVmlldy5wcm90b3R5cGUub25Db250cm9sbGVyQ29ubmVjdGVkPWZ1bmN0aW9uKGMpe3ZhciBzPXRoaXM7c2FwLnVpLmJhc2UuTWFuYWdlZE9iamVjdC5ydW5XaXRoUHJlcHJvY2Vzc29ycyhmdW5jdGlvbigpe3NhcC51aS5jb3JlLkRlY2xhcmF0aXZlU3VwcG9ydC5jb21waWxlKHMuX29UZW1wbGF0ZSxzKX0pfTtzYXAudWkuY29yZS5tdmMuSFRNTFZpZXcucHJvdG90eXBlLmV4aXQ9ZnVuY3Rpb24oKXt0aGlzLl9vVGVtcGxhdGU9bnVsbDtzYXAudWkuY29yZS5tdmMuVmlldy5wcm90b3R5cGUuZXhpdC5jYWxsKHRoaXMpO2lmKHRoaXMuX2Nvbm5lY3RlZENvbnRyb2xzKXtmb3IodmFyIGk9MDtpPHRoaXMuX2Nvbm5lY3RlZENvbnRyb2xzLmxlbmd0aDtpKyspe3RoaXMuX2Nvbm5lY3RlZENvbnRyb2xzW2ldLmRlc3Ryb3koKX10aGlzLl9jb25uZWN0ZWRDb250cm9scz1udWxsfX07c2FwLnVpLmNvcmUubXZjLkhUTUxWaWV3LnByb3RvdHlwZS5jb25uZWN0Q29udHJvbD1mdW5jdGlvbihjKXt0aGlzLl9jb25uZWN0ZWRDb250cm9scz10aGlzLl9jb25uZWN0ZWRDb250cm9sc3x8W107dGhpcy5fY29ubmVjdGVkQ29udHJvbHMucHVzaChjKX07cmV0dXJuIHNhcC51aS5jb3JlLm12Yy5IVE1MVmlld30sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLm12Yy5KU09OVmlldycpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLm12Yy5KU09OVmlldycpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL212Yy9KU09OVmlldyIsWydzYXAvdWkvY29yZS9saWJyYXJ5JywnLi9WaWV3J10sZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7c2FwLnVpLmNvcmUubXZjLlZpZXcuZXh0ZW5kKCJzYXAudWkuY29yZS5tdmMuSlNPTlZpZXciLHttZXRhZGF0YTp7bGlicmFyeToic2FwLnVpLmNvcmUifX0pOyhmdW5jdGlvbigpe3NhcC51aS5qc29udmlldz1mdW5jdGlvbihpLHYpe3JldHVybiBzYXAudWkudmlldyhpLHYsc2FwLnVpLmNvcmUubXZjLlZpZXdUeXBlLkpTT04pfTtzYXAudWkuY29yZS5tdmMuSlNPTlZpZXcuX3NUeXBlPXNhcC51aS5jb3JlLm12Yy5WaWV3VHlwZS5KU09OO3NhcC51aS5jb3JlLm12Yy5KU09OVmlldy5wcm90b3R5cGUuaW5pdFZpZXdTZXR0aW5ncz1mdW5jdGlvbihzKXtpZighcyl7dGhyb3cgbmV3IEVycm9yKCJtU2V0dGluZ3MgbXVzdCBiZSBnaXZlbiIpfWlmKHMudmlld05hbWUmJnMudmlld0NvbnRlbnQpe3Rocm93IG5ldyBFcnJvcigiVmlldyBuYW1lIGFuZCB2aWV3IGNvbnRlbnQgYXJlIGdpdmVuLiBUaGVyZSBpcyBubyBwb2ludCBpbiBkb2luZyB0aGlzLCBzbyBwbGVhc2UgZGVjaWRlLiIpfWVsc2UgaWYoIXMudmlld05hbWUmJiFzLnZpZXdDb250ZW50KXt0aHJvdyBuZXcgRXJyb3IoIk5laXRoZXIgdmlldyBuYW1lIG5vciB2aWV3IGNvbnRlbnQgaXMgZ2l2ZW4uIE9uZSBvZiB0aGVtIGlzIHJlcXVpcmVkLiIpfWlmKHMudmlld05hbWUpe3RoaXMuX2xvYWRUZW1wbGF0ZShzLnZpZXdOYW1lKX1lbHNlIGlmKHMudmlld0NvbnRlbnQpe3RoaXMubVByb3BlcnRpZXNbInZpZXdDb250ZW50Il09cy52aWV3Q29udGVudDtpZih0eXBlb2Ygcy52aWV3Q29udGVudD09PSJzdHJpbmciKXt0aGlzLl9vSlNPTlZpZXc9alF1ZXJ5LnBhcnNlSlNPTihzLnZpZXdDb250ZW50KTtpZighdGhpcy5fb0pTT05WaWV3KXt0aHJvdyBuZXcgRXJyb3IoImVycm9yIHdoZW4gcGFyc2luZyB2aWV3Q29udGVudDogIitzLnZpZXdDb250ZW50KX19ZWxzZSBpZih0eXBlb2Ygcy52aWV3Q29udGVudD09PSJvYmplY3QiKXt0aGlzLl9vSlNPTlZpZXc9cy52aWV3Q29udGVudH1lbHNle3Rocm93IG5ldyBFcnJvcigidmlld0NvbnRlbnQgbXVzdCBiZSBhIEpTT04gc3RyaW5nIG9yIG9iamVjdCwgYnV0IGlzIGEgIisodHlwZW9mIHMudmlld0NvbnRlbnQpKX19ZWxzZXt9aWYoKHRoaXMuX29KU09OVmlldy5yZXNvdXJjZUJ1bmRsZU5hbWV8fHRoaXMuX29KU09OVmlldy5yZXNvdXJjZUJ1bmRsZVVybCkmJighcy5tb2RlbHN8fCFzLm1vZGVsc1t0aGlzLl9vSlNPTlZpZXcucmVzb3VyY2VCdW5kbGVBbGlhc10pKXt2YXIgbT1uZXcgc2FwLnVpLm1vZGVsLnJlc291cmNlLlJlc291cmNlTW9kZWwoe2J1bmRsZU5hbWU6dGhpcy5fb0pTT05WaWV3LnJlc291cmNlQnVuZGxlTmFtZSxidW5kbGVVcmw6dGhpcy5fb0pTT05WaWV3LnJlc291cmNlQnVuZGxlVXJsfSk7dGhpcy5zZXRNb2RlbChtLHRoaXMuX29KU09OVmlldy5yZXNvdXJjZUJ1bmRsZUFsaWFzKX19O3NhcC51aS5jb3JlLm12Yy5KU09OVmlldy5wcm90b3R5cGUub25Db250cm9sbGVyQ29ubmVjdGVkPWZ1bmN0aW9uKGMpe3ZhciB0PXRoaXM7c2FwLnVpLmJhc2UuTWFuYWdlZE9iamVjdC5ydW5XaXRoUHJlcHJvY2Vzc29ycyhmdW5jdGlvbigpe3QuYXBwbHlTZXR0aW5ncyh7Y29udGVudDp0Ll9vSlNPTlZpZXcuY29udGVudH0pfSx7aWQ6ZnVuY3Rpb24oaSl7cmV0dXJuIHQuY3JlYXRlSWQoaSl9LHNldHRpbmdzOmZ1bmN0aW9uKHMpe3ZhciBtPXRoaXMuZ2V0TWV0YWRhdGEoKSx2PW0uZ2V0SlNPTktleXMoKSxrLFYsSztmb3IoayBpbiBzKXtpZihLPXZba10pe1Y9c1trXTtzd2l0Y2goSy5faUtpbmQpe2Nhc2UgMzpzW2tdPXQuY3JlYXRlSWQoVik7YnJlYWs7Y2FzZSA1OmlmKHR5cGVvZiBzW2tdPT09InN0cmluZyIpe3Nba109W2Nbc1trXV0sY119YnJlYWt9fX19fSl9O3NhcC51aS5jb3JlLm12Yy5KU09OVmlldy5wcm90b3R5cGUuX2xvYWRUZW1wbGF0ZT1mdW5jdGlvbih0KXt2YXIgcj1qUXVlcnkuc2FwLmdldFJlc291cmNlTmFtZSh0LCIudmlldy5qc29uIik7dGhpcy5fb0pTT05WaWV3PWpRdWVyeS5zYXAubG9hZFJlc291cmNlKHIpfTtzYXAudWkuY29yZS5tdmMuSlNPTlZpZXcucHJvdG90eXBlLmdldENvbnRyb2xsZXJOYW1lPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29KU09OVmlldy5jb250cm9sbGVyTmFtZX19KCkpO3JldHVybiBzYXAudWkuY29yZS5tdmMuSlNPTlZpZXd9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS5tdmMuSlNWaWV3Jykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUubXZjLkpTVmlldycpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL212Yy9KU1ZpZXciLFsnc2FwL3VpL2NvcmUvbGlicmFyeScsJy4vVmlldyddLGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO3NhcC51aS5jb3JlLm12Yy5WaWV3LmV4dGVuZCgic2FwLnVpLmNvcmUubXZjLkpTVmlldyIse21ldGFkYXRhOntsaWJyYXJ5OiJzYXAudWkuY29yZSJ9fSk7KGZ1bmN0aW9uKCl7dmFyIHI9e307c2FwLnVpLmpzdmlldz1mdW5jdGlvbihpLHYpe3ZhciBzPXt9O2lmKHYmJnR5cGVvZih2KT09InN0cmluZyIpe3Mudmlld05hbWU9djtzLmNvbnRyb2xsZXI9YXJndW1lbnRzWzJdO3ZhciBWPW5ldyBzYXAudWkuY29yZS5tdmMuSlNWaWV3KGkscyk7cmV0dXJuIFZ9ZWxzZSBpZih2JiZ0eXBlb2Yodik9PSJvYmplY3QiKXtyW2ldPXY7alF1ZXJ5LnNhcC5kZWNsYXJlKHttb2ROYW1lOmksdHlwZToidmlldyJ9LGZhbHNlKX1lbHNlIGlmKGFyZ3VtZW50cy5sZW5ndGg9PTEmJnR5cGVvZihhcmd1bWVudHNbMF0pPT0ic3RyaW5nIil7cy52aWV3TmFtZT1pO3MuY29udHJvbGxlcj1hcmd1bWVudHNbMV07dmFyIFY9cy5pZD9uZXcgc2FwLnVpLmNvcmUubXZjLkpTVmlldyhzLmlkLHMpOm5ldyBzYXAudWkuY29yZS5tdmMuSlNWaWV3KHMpO3JldHVybiBWfWVsc2V7dGhyb3cgbmV3IEVycm9yKCJXcm9uZyBhcmd1bWVudHMhIEVpdGhlciBjYWxsIHNhcC51aS5qc3ZpZXcoW3NJZCxdIHNWaWV3TmFtZSkgdG8gaW5zdGFudGlhdGUgYSBWaWV3IG9yIHNhcC51aS5qc3ZpZXcoc1ZpZXdOYW1lLCBvVmlld0ltcGwpIHRvIGRlZmluZSBhIFZpZXcgdHlwZS4iKX19O3NhcC51aS5jb3JlLm12Yy5KU1ZpZXcucHJvdG90eXBlLmluaXRWaWV3U2V0dGluZ3M9ZnVuY3Rpb24ocyl7aWYoIXJbcy52aWV3TmFtZV0pe2pRdWVyeS5zYXAucmVxdWlyZSh7bW9kTmFtZTpzLnZpZXdOYW1lLHR5cGU6InZpZXcifSl9alF1ZXJ5LmV4dGVuZCh0aGlzLHJbcy52aWV3TmFtZV0pfTtzYXAudWkuY29yZS5tdmMuSlNWaWV3LnByb3RvdHlwZS5vbkNvbnRyb2xsZXJDb25uZWN0ZWQ9ZnVuY3Rpb24oYyl7dmFyIHQ9dGhpczt2YXIgcD17fTtpZih0aGlzLmdldEF1dG9QcmVmaXhJZCgpKXtwLmlkPWZ1bmN0aW9uKGkpe3JldHVybiB0LmNyZWF0ZUlkKGkpfX1zYXAudWkuYmFzZS5NYW5hZ2VkT2JqZWN0LnJ1bldpdGhQcmVwcm9jZXNzb3JzKGZ1bmN0aW9uKCl7dC5hcHBseVNldHRpbmdzKHtjb250ZW50OnQuY3JlYXRlQ29udGVudChjKX0pfSxwKX07c2FwLnVpLmNvcmUubXZjLkpTVmlldy5wcm90b3R5cGUuZ2V0QXV0b1ByZWZpeElkPWZ1bmN0aW9uKCl7cmV0dXJuIGZhbHNlfX0oKSk7cmV0dXJuIHNhcC51aS5jb3JlLm12Yy5KU1ZpZXd9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS5tdmMuVGVtcGxhdGVWaWV3Jykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUubXZjLlRlbXBsYXRlVmlldycpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL212Yy9UZW1wbGF0ZVZpZXciLFsnc2FwL3VpL2NvcmUvbGlicmFyeScsJy4vVmlldyddLGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO3NhcC51aS5jb3JlLm12Yy5WaWV3LmV4dGVuZCgic2FwLnVpLmNvcmUubXZjLlRlbXBsYXRlVmlldyIse21ldGFkYXRhOntsaWJyYXJ5OiJzYXAudWkuY29yZSJ9fSk7KGZ1bmN0aW9uKCl7c2FwLnVpLnRlbXBsYXRldmlldz1mdW5jdGlvbihpLHYpe3JldHVybiBzYXAudWkudmlldyhpLHYsc2FwLnVpLmNvcmUubXZjLlZpZXdUeXBlLlRlbXBsYXRlKX07c2FwLnVpLmNvcmUubXZjLlRlbXBsYXRlVmlldy5fc1R5cGU9c2FwLnVpLmNvcmUubXZjLlZpZXdUeXBlLlRlbXBsYXRlO3NhcC51aS5jb3JlLm12Yy5UZW1wbGF0ZVZpZXcucHJvdG90eXBlLmdldENvbnRyb2xsZXJOYW1lPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NDb250cm9sbGVyTmFtZX07c2FwLnVpLmNvcmUubXZjLlRlbXBsYXRlVmlldy5fZ2V0Vmlld1VybD1mdW5jdGlvbih0KXtyZXR1cm4galF1ZXJ5LnNhcC5nZXRNb2R1bGVQYXRoKHQsIi52aWV3LnRtcGwiKX07c2FwLnVpLmNvcmUubXZjLlRlbXBsYXRlVmlldy5wcm90b3R5cGUuaW5pdFZpZXdTZXR0aW5ncz1mdW5jdGlvbihzKXtpZighcyl7dGhyb3cgbmV3IEVycm9yKCJtU2V0dGluZ3MgbXVzdCBiZSBnaXZlbiIpfWlmKCFzLnZpZXdOYW1lKXt0aHJvdyBuZXcgRXJyb3IoIk5vIHZpZXcgbmFtZSBpcyBnaXZlbi4iKX10aGlzLl9vVGVtcGxhdGU9c2FwLnVpLnRlbXBsYXRlKHtpZDp0aGlzLmdldElkKCksc3JjOnNhcC51aS5jb3JlLm12Yy5UZW1wbGF0ZVZpZXcuX2dldFZpZXdVcmwocy52aWV3TmFtZSl9KTt0aGlzLl9zQ29udHJvbGxlck5hbWU9dGhpcy5fb1RlbXBsYXRlLl9zQ29udHJvbGxlck5hbWU7dGhpcy5fb1RlbXBsYXRlPXRoaXMuX29UZW1wbGF0ZS5jcmVhdGVDb250cm9sKHVuZGVmaW5lZCx1bmRlZmluZWQsdGhpcyk7dGhpcy5hZGRDb250ZW50KHRoaXMuX29UZW1wbGF0ZSl9fSgpKTtyZXR1cm4gc2FwLnVpLmNvcmUubXZjLlRlbXBsYXRlVmlld30sdHJ1ZSl9O3NhcC51aS5nZXRDb3JlKCkuYm9vdCYmc2FwLnVpLmdldENvcmUoKS5ib290KCk7DQp9IGNhdGNoKG9FcnJvcikgewppZiAob0Vycm9yLm5hbWUgIT0gIlJlc3RhcnQiKSB7IHRocm93IG9FcnJvcjsgfQp9Cg==",
                "body": "d2luZG93WyJzYXAtdWktb3B0aW1pemVkIl0gPSB0cnVlOwp0cnkgewovKiENCiAqIFNBUCBVSSBkZXZlbG9wbWVudCB0b29sa2l0IGZvciBIVE1MNSAoU0FQVUk1L09wZW5VSTUpDQogKiAoYykgQ29weXJpZ2h0IDIwMDktMjAxNCBTQVAgU0Ugb3IgYW4gU0FQIGFmZmlsaWF0ZSBjb21wYW55LiANCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgLSBzZWUgTElDRU5TRS50eHQuDQogKi8NCmlmKHdpbmRvdy5qUXVlcnkmJndpbmRvdy5qUXVlcnkuc2FwJiZ3aW5kb3cualF1ZXJ5LnNhcC5kZWNsYXJlKXt3aW5kb3cualF1ZXJ5LnNhcC5kZWNsYXJlKCJzYXAudWkuRGV2aWNlIixmYWxzZSl9aWYodHlwZW9mIHdpbmRvdy5zYXAhPT0ib2JqZWN0IiYmdHlwZW9mIHdpbmRvdy5zYXAhPT0iZnVuY3Rpb24iKXt3aW5kb3cuc2FwPXt9fWlmKHR5cGVvZiB3aW5kb3cuc2FwLnVpIT09Im9iamVjdCIpe3dpbmRvdy5zYXAudWk9e319KGZ1bmN0aW9uKCl7aWYodHlwZW9mIHdpbmRvdy5zYXAudWkuRGV2aWNlPT09Im9iamVjdCJ8fHR5cGVvZiB3aW5kb3cuc2FwLnVpLkRldmljZT09PSJmdW5jdGlvbiIpe3ZhciBjPSIxLjI0LjIiO3dpbmRvdy5zYXAudWkuRGV2aWNlLl9jaGVja0FQSVZlcnNpb24oYyk7cmV0dXJufXZhciBkPXt9O2Z1bmN0aW9uIHAoaSx3KXtyZXR1cm4oIjAwMCIrU3RyaW5nKGkpKS5zbGljZSgtdyl9dmFyIEY9MCxFPTEsVz0yLEk9MyxEPTQsVD01O3ZhciBnPWZ1bmN0aW9uKCl7dGhpcy5kZWZhdWx0Q29tcG9uZW50PSdERVZJQ0UnO3RoaXMuc1dpbmRvd05hbWU9KHdpbmRvdy50b3A9PXdpbmRvdyk/IiI6IlsiK3dpbmRvdy5sb2NhdGlvbi5wYXRobmFtZS5zcGxpdCgnLycpLnNsaWNlKC0xKVswXSsiXSAiO3RoaXMubG9nPWZ1bmN0aW9uKGkscyxhKXthPWF8fHRoaXMuZGVmYXVsdENvbXBvbmVudHx8Jyc7dmFyIGI9bmV3IERhdGUoKSxlPXt0aW1lOnAoYi5nZXRIb3VycygpLDIpKyI6IitwKGIuZ2V0TWludXRlcygpLDIpKyI6IitwKGIuZ2V0U2Vjb25kcygpLDIpLGRhdGU6cChiLmdldEZ1bGxZZWFyKCksNCkrIi0iK3AoYi5nZXRNb250aCgpKzEsMikrIi0iK3AoYi5nZXREYXRlKCksMiksdGltZXN0YW1wOmIuZ2V0VGltZSgpLGxldmVsOmksbWVzc2FnZTpzfHwiIixjb21wb25lbnQ6YXx8IiJ9O2lmKHdpbmRvdy5jb25zb2xlKXt2YXIgZj1lLmRhdGUrIiAiK2UudGltZSsiICIrdGhpcy5zV2luZG93TmFtZStlLm1lc3NhZ2UrIiAtICIrZS5jb21wb25lbnQ7c3dpdGNoKGkpe2Nhc2UgRjpjYXNlIEU6Y29uc29sZS5lcnJvcihmKTticmVhaztjYXNlIFc6Y29uc29sZS53YXJuKGYpO2JyZWFrO2Nhc2UgSTpjb25zb2xlLmluZm8/Y29uc29sZS5pbmZvKGYpOmNvbnNvbGUubG9nKGYpO2JyZWFrO2Nhc2UgRDpjb25zb2xlLmRlYnVnP2NvbnNvbGUuZGVidWcoZik6Y29uc29sZS5sb2coZik7YnJlYWs7Y2FzZSBUOmNvbnNvbGUudHJhY2U/Y29uc29sZS50cmFjZShmKTpjb25zb2xlLmxvZyhmKTticmVha319cmV0dXJuIGV9fTt2YXIgbD1uZXcgZygpO2wubG9nKEksIkRldmljZSBBUEkgbG9nZ2luZyBpbml0aWFsaXplZCIpO2QuX2NoZWNrQVBJVmVyc2lvbj1mdW5jdGlvbihzKXt2YXIgdj0iMS4yNC4yIjtpZih2IT1zKXtsLmxvZyhXLCJEZXZpY2UgQVBJIHZlcnNpb24gZGlmZmVyczogIit2KyIgPC0+ICIrcyl9fTt2YXIgaD17fTtmdW5jdGlvbiBqKGUsZixhKXtpZighaFtlXSl7aFtlXT1bXX1oW2VdLnB1c2goe29MaXN0ZW5lcjphLGZGdW5jdGlvbjpmfSl9O2Z1bmN0aW9uIGsoZSxmLGEpe3ZhciBiPWhbZV07aWYoIWIpe3JldHVybiB0aGlzfWZvcih2YXIgaT0wLHE9Yi5sZW5ndGg7aTxxO2krKyl7aWYoYltpXS5mRnVuY3Rpb249PT1mJiZiW2ldLm9MaXN0ZW5lcj09PWEpe2Iuc3BsaWNlKGksMSk7YnJlYWt9fWlmKGIubGVuZ3RoPT0wKXtkZWxldGUgaFtlXX19O2Z1bmN0aW9uIG4oZSxhKXt2YXIgYj1oW2VdLGY7aWYoYil7Yj1iLnNsaWNlKCk7Zm9yKHZhciBpPTAscT1iLmxlbmd0aDtpPHE7aSsrKXtmPWJbaV07Zi5mRnVuY3Rpb24uY2FsbChmLm9MaXN0ZW5lcnx8d2luZG93LGEpfX19O3ZhciBPPXsiV0lORE9XUyI6IndpbiIsIk1BQ0lOVE9TSCI6Im1hYyIsIkxJTlVYIjoibGludXgiLCJJT1MiOiJpT1MiLCJBTkRST0lEIjoiQW5kcm9pZCIsIkJMQUNLQkVSUlkiOiJiYiIsIldJTkRPV1NfUEhPTkUiOiJ3aW5waG9uZSJ9O2Z1bmN0aW9uIG8oYSl7ZnVuY3Rpb24gYigpe3ZhciBzPW5hdmlnYXRvci5wbGF0Zm9ybTtpZihzLmluZGV4T2YoIldpbiIpIT0tMSl7dmFyIHQ9L3dpbmRvd3MgTlQgNi4oXGQpL2k7dmFyIGY9YS5tYXRjaCh0KTt2YXIgdj0iIjtpZihmKXtpZihmWzFdPT0xKXt2PSI3In1lbHNlIGlmKGZbMV0+MSl7dj0iOCJ9fXJldHVybnsibmFtZSI6Ty5XSU5ET1dTLCJ2ZXJzaW9uU3RyIjp2fX1lbHNlIGlmKHMuaW5kZXhPZigiTWFjIikhPS0xKXtyZXR1cm57Im5hbWUiOk8uTUFDSU5UT1NILCJ2ZXJzaW9uU3RyIjoiIn19ZWxzZSBpZihzLmluZGV4T2YoIkxpbnV4IikhPS0xKXtyZXR1cm57Im5hbWUiOk8uTElOVVgsInZlcnNpb25TdHIiOiIifX1sLmxvZyhJLCJPUyBkZXRlY3Rpb24gcmV0dXJuZWQgbm8gcmVzdWx0Iik7cmV0dXJuIG51bGx9YT1hfHxuYXZpZ2F0b3IudXNlckFnZW50O3ZhciBlPS9cKChbYS16QS1aIF0rKTtccyg/OltVXT9bO10/KShbXERdKykoKD86W1xkLl9dKikpKD86LipbXCldW15cZF0qKShbXGQuXSopXHMvO3ZhciBmPWEubWF0Y2goZSk7aWYoZil7dmFyIGk9L2lQaG9uZXxpUGFkfGlQb2QvO3ZhciBxPS9QbGF5Qm9va3xCbGFja0JlcnJ5LztpZihmWzBdLm1hdGNoKGkpKXtmWzNdPWZbM10ucmVwbGFjZSgvXy9nLCIuIik7cmV0dXJuKHsibmFtZSI6Ty5JT1MsInZlcnNpb25TdHIiOmZbM119KX1lbHNlIGlmKGZbMl0ubWF0Y2goL0FuZHJvaWQvKSl7ZlsyXT1mWzJdLnJlcGxhY2UoL1xzL2csIiIpO3JldHVybih7Im5hbWUiOk8uQU5EUk9JRCwidmVyc2lvblN0ciI6ZlszXX0pfWVsc2UgaWYoZlswXS5tYXRjaChxKSl7cmV0dXJuKHsibmFtZSI6Ty5CTEFDS0JFUlJZLCJ2ZXJzaW9uU3RyIjpmWzRdfSl9ZWxzZXtyZXR1cm4gYigpfX1lbHNlIGlmKGEuaW5kZXhPZigiKEJCMTA7Iik+MCl7ZT0vXHNWZXJzaW9uXC8oW1xkLl0rKVxzLztmPWEubWF0Y2goZSk7aWYoZil7cmV0dXJueyJuYW1lIjpPLkJMQUNLQkVSUlksInZlcnNpb25TdHIiOmZbMV19fWVsc2V7cmV0dXJueyJuYW1lIjpPLkJMQUNLQkVSUlksInZlcnNpb25TdHIiOicxMCd9fX1lbHNle2U9L1dpbmRvd3MgUGhvbmUgKD86T1MgKT8oW1xkLl0qKS87Zj1hLm1hdGNoKGUpO2lmKGYpe3JldHVybih7Im5hbWUiOk8uV0lORE9XU19QSE9ORSwidmVyc2lvblN0ciI6ZlsxXX0pfWVsc2V7cmV0dXJuIGIoKX19fTtmdW5jdGlvbiByKCl7ZC5vcz1vKCl8fHt9O2Qub3MuT1M9TztkLm9zLnZlcnNpb249ZC5vcy52ZXJzaW9uU3RyP3BhcnNlRmxvYXQoZC5vcy52ZXJzaW9uU3RyKTotMTtpZihkLm9zLm5hbWUpe2Zvcih2YXIgYiBpbiBPKXtpZihPW2JdPT09ZC5vcy5uYW1lKXtkLm9zW2IudG9Mb3dlckNhc2UoKV09dHJ1ZX19fX1yKCk7dmFyIEI9eyJJTlRFUk5FVF9FWFBMT1JFUiI6ImllIiwiRklSRUZPWCI6ImZmIiwiQ0hST01FIjoiY3IiLCJTQUZBUkkiOiJzZiIsIkFORFJPSUQiOiJhbiJ9O3ZhciB1PW5hdmlnYXRvci51c2VyQWdlbnQ7DQovKiENCgkgKiBUYWtlbiBmcm9tIGpRdWVyeSBKYXZhU2NyaXB0IExpYnJhcnkgdjEuNy4xDQoJICogaHR0cDovL2pxdWVyeS5jb20vDQoJICoNCgkgKiBDb3B5cmlnaHQgMjAxMSwgSm9obiBSZXNpZw0KCSAqIER1YWwgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBvciBHUEwgVmVyc2lvbiAyIGxpY2Vuc2VzLg0KCSAqIGh0dHA6Ly9qcXVlcnkub3JnL2xpY2Vuc2UNCgkgKg0KCSAqIEluY2x1ZGVzIFNpenpsZS5qcw0KCSAqIGh0dHA6Ly9zaXp6bGVqcy5jb20vDQoJICogQ29weXJpZ2h0IDIwMTEsIFRoZSBEb2pvIEZvdW5kYXRpb24NCgkgKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlULCBCU0QsIGFuZCBHUEwgTGljZW5zZXMuDQoJICoNCgkgKiBEYXRlOiBNb24gTm92IDIxIDIxOjExOjAzIDIwMTEgLTA1MDANCgkgKi8NCmZ1bmN0aW9uIHkoYSl7dmFyIGI9KGF8fHUpLnRvTG93ZXJDYXNlKCk7dmFyIGU9Lyh3ZWJraXQpWyBcL10oW1x3Ll0rKS87dmFyIGY9LyhvcGVyYSkoPzouKnZlcnNpb24pP1sgXC9dKFtcdy5dKykvO3ZhciBpPS8obXNpZSkgKFtcdy5dKykvO3ZhciBxPS8odHJpZGVudClcL1tcdy5dKzsuKnJ2OihbXHcuXSspLzt2YXIgcz0vKG1vemlsbGEpKD86Lio/IHJ2OihbXHcuXSspKT8vO3ZhciBWPWUuZXhlYyhiKXx8Zi5leGVjKGIpfHxpLmV4ZWMoYil8fHEuZXhlYyhiKXx8Yi5pbmRleE9mKCJjb21wYXRpYmxlIik8MCYmcy5leGVjKGIpfHxbXTt2YXIgdD17YnJvd3NlcjpWWzFdfHwiIix2ZXJzaW9uOlZbMl18fCIwIn07dFt0LmJyb3dzZXJdPXRydWU7cmV0dXJuIHR9O2Z1bmN0aW9uIHooYSl7dmFyIGI9eShhKTt2YXIgZT1hfHx1O2lmKGIubW96aWxsYSl7aWYoZS5tYXRjaCgvRmlyZWZveFwvKFxkK1wuXGQrKS8pKXt2YXIgdj1wYXJzZUZsb2F0KFJlZ0V4cC4kMSk7cmV0dXJue25hbWU6Qi5GSVJFRk9YLHZlcnNpb25TdHI6IiIrdix2ZXJzaW9uOnYsbW96aWxsYTp0cnVlLG1vYmlsZTpmYWxzZX19ZWxzZXtyZXR1cm57bW9iaWxlOmkudGVzdChlKSxtb3ppbGxhOnRydWV9fX1lbHNlIGlmKGIud2Via2l0KXt2YXIgZj1lLnRvTG93ZXJDYXNlKCkubWF0Y2goL3dlYmtpdFtcL10oW1xkLl0rKS8pO2lmKGYpe3ZhciB3PWZbMV19dmFyIGk9L01vYmlsZS87aWYoZS5tYXRjaCgvQ2hyb21lXC8oXGQrXC5cZCspLlxkKy8pKXt2YXIgdj1wYXJzZUZsb2F0KFJlZ0V4cC4kMSk7cmV0dXJue25hbWU6Qi5DSFJPTUUsdmVyc2lvblN0cjoiIit2LHZlcnNpb246dixtb2JpbGU6aS50ZXN0KGUpLHdlYmtpdDp0cnVlLHdlYmtpdFZlcnNpb246d319ZWxzZSBpZihlLm1hdGNoKC9BbmRyb2lkIC4rIFZlcnNpb25cLyhcZCtcLlxkKykvKSl7dmFyIHY9cGFyc2VGbG9hdChSZWdFeHAuJDEpO3JldHVybntuYW1lOkIuQU5EUk9JRCx2ZXJzaW9uU3RyOiIiK3YsdmVyc2lvbjp2LG1vYmlsZTppLnRlc3QoZSksd2Via2l0OnRydWUsd2Via2l0VmVyc2lvbjp3fX1lbHNle3ZhciBxPS9WZXJzaW9uXC8oXGQrXC5cZCspLipTYWZhcmkvO2lmKHEudGVzdChlKSl7dmFyIHY9cGFyc2VGbG9hdChxLmV4ZWMoZSlbMV0pO3JldHVybntuYW1lOkIuU0FGQVJJLHZlcnNpb25TdHI6IiIrdix2ZXJzaW9uOnYsbW9iaWxlOmkudGVzdChlKSx3ZWJraXQ6dHJ1ZX19ZWxzZXtyZXR1cm57bW9iaWxlOmkudGVzdChlKSx3ZWJraXQ6dHJ1ZSx3ZWJraXRWZXJzaW9uOnd9fX19ZWxzZSBpZihiLm1zaWV8fGIudHJpZGVudCl7dmFyIHY7aWYoZG9jdW1lbnQuZG9jdW1lbnRNb2RlJiYhYSl7aWYoZG9jdW1lbnQuZG9jdW1lbnRNb2RlPT09Nyl7dj04LjB9ZWxzZXt2PXBhcnNlRmxvYXQoZG9jdW1lbnQuZG9jdW1lbnRNb2RlKX19ZWxzZXt2PXBhcnNlRmxvYXQoYi52ZXJzaW9uKX1yZXR1cm57bmFtZTpCLklOVEVSTkVUX0VYUExPUkVSLHZlcnNpb25TdHI6IiIrdix2ZXJzaW9uOnYsbXNpZTp0cnVlLG1vYmlsZTpmYWxzZX19cmV0dXJue25hbWU6IiIsdmVyc2lvblN0cjoiIix2ZXJzaW9uOi0xLG1vYmlsZTpmYWxzZX19O2QuX3Rlc3RVc2VyQWdlbnQ9ejtmdW5jdGlvbiBBKCl7ZC5icm93c2VyPXooKTtkLmJyb3dzZXIuQlJPV1NFUj1CO2lmKGQuYnJvd3Nlci5uYW1lKXtmb3IodmFyIGIgaW4gQil7aWYoQltiXT09PWQuYnJvd3Nlci5uYW1lKXtkLmJyb3dzZXJbYi50b0xvd2VyQ2FzZSgpXT10cnVlfX19fUEoKTtkLnN1cHBvcnQ9e307ZC5zdXBwb3J0LnRvdWNoPSEhKCgnb250b3VjaHN0YXJ0J2luIHdpbmRvdyl8fHdpbmRvdy5Eb2N1bWVudFRvdWNoJiZkb2N1bWVudCBpbnN0YW5jZW9mIHdpbmRvdy5Eb2N1bWVudFRvdWNoKTtkLnN1cHBvcnQubWF0Y2htZWRpYT0hIXdpbmRvdy5tYXRjaE1lZGlhO3ZhciBtPWQuc3VwcG9ydC5tYXRjaG1lZGlhP3dpbmRvdy5tYXRjaE1lZGlhKCJzY3JlZW4gYW5kIChtYXgtd2lkdGg6MHB4KSIpOm51bGw7ZC5zdXBwb3J0Lm1hdGNobWVkaWFsaXN0ZW5lcj0hIShtJiZtLmFkZExpc3RlbmVyKTtpZihkLmJyb3dzZXIuc2FmYXJpJiZkLmJyb3dzZXIudmVyc2lvbjw2KXtkLnN1cHBvcnQubWF0Y2htZWRpYWxpc3RlbmVyPWZhbHNlfWQuc3VwcG9ydC5vcmllbnRhdGlvbj0hISgib3JpZW50YXRpb24iaW4gd2luZG93JiYib25vcmllbnRhdGlvbmNoYW5nZSJpbiB3aW5kb3cpO2Quc3VwcG9ydC5yZXRpbmE9KHdpbmRvdy5yZXRpbmF8fHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvPj0yKTtkLnN1cHBvcnQud2Vic29ja2V0PSgnV2ViU29ja2V0J2luIHdpbmRvdyk7ZC5zdXBwb3J0LmlucHV0PXt9O2Quc3VwcG9ydC5pbnB1dC5wbGFjZWhvbGRlcj0oJ3BsYWNlaG9sZGVyJ2luIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImlucHV0IikpO2QubWVkaWE9e307dmFyIFI9eyJTQVBfM1NURVBTIjoiM1N0ZXAiLCJTQVBfNFNURVBTIjoiNFN0ZXAiLCJTQVBfNlNURVBTIjoiNlN0ZXAiLCJTQVBfU1RBTkRBUkQiOiJTdGQifTtkLm1lZGlhLlJBTkdFU0VUUz1SO2QubWVkaWEuX3ByZWRlZmluZWRSYW5nZVNldHM9e307ZC5tZWRpYS5fcHJlZGVmaW5lZFJhbmdlU2V0c1tSLlNBUF8zU1RFUFNdPXtwb2ludHM6WzUyMCw5NjBdLHVuaXQ6InB4IixuYW1lOlIuU0FQXzNTVEVQUyxuYW1lczpbIlMiLCJNIiwiTCJdfTtkLm1lZGlhLl9wcmVkZWZpbmVkUmFuZ2VTZXRzW1IuU0FQXzRTVEVQU109e3BvaW50czpbNTIwLDc2MCw5NjBdLHVuaXQ6InB4IixuYW1lOlIuU0FQXzRTVEVQUyxuYW1lczpbIlMiLCJNIiwiTCIsIlhMIl19O2QubWVkaWEuX3ByZWRlZmluZWRSYW5nZVNldHNbUi5TQVBfNlNURVBTXT17cG9pbnRzOlsyNDEsNDAwLDU0MSw3NjgsOTYwXSx1bml0OiJweCIsbmFtZTpSLlNBUF82U1RFUFMsbmFtZXM6WyJYUyIsIlMiLCJNIiwiTCIsIlhMIiwiWFhMIl19O2QubWVkaWEuX3ByZWRlZmluZWRSYW5nZVNldHNbUi5TQVBfU1RBTkRBUkRdPXtwb2ludHM6WzYwMCwxMDI0XSx1bml0OiJweCIsbmFtZTpSLlNBUF9TVEFOREFSRCxuYW1lczpbIlBob25lIiwiVGFibGV0IiwiRGVza3RvcCJdfTt2YXIgXz1SLlNBUF9TVEFOREFSRDt2YXIgQz1kLnN1cHBvcnQubWF0Y2htZWRpYWxpc3RlbmVyPzA6MTAwO3ZhciBHPXt9O3ZhciBIPW51bGw7ZnVuY3Rpb24gSihmLHQsYSl7YT1hfHwicHgiO3ZhciBxPSJzY3JlZW4iO2lmKGY+MCl7cT1xKyIgYW5kIChtaW4td2lkdGg6IitmK2ErIikifWlmKHQ+MCl7cT1xKyIgYW5kIChtYXgtd2lkdGg6Iit0K2ErIikifXJldHVybiBxfTtmdW5jdGlvbiBLKGEpe2lmKCFkLnN1cHBvcnQubWF0Y2htZWRpYWxpc3RlbmVyJiZIPT1RKClbMF0pe3JldHVybn1pZihHW2FdLnRpbWVyKXtjbGVhclRpbWVvdXQoR1thXS50aW1lcik7R1thXS50aW1lcj1udWxsfUdbYV0udGltZXI9c2V0VGltZW91dChmdW5jdGlvbigpe3ZhciBiPU0oYSxmYWxzZSk7aWYoYil7bigibWVkaWFfIithLGIpfX0sQyl9O2Z1bmN0aW9uIEwocyxpKXt2YXIgcT1HW3NdLnF1ZXJpZXNbaV07dmFyIGE9e2Zyb206cS5mcm9tLHVuaXQ6R1tzXS51bml0fTtpZihxLnRvPj0wKXthLnRvPXEudG99aWYoR1tzXS5uYW1lcyl7YS5uYW1lPUdbc10ubmFtZXNbaV19cmV0dXJuIGF9O2Z1bmN0aW9uIE0oYSxiKXtpZihHW2FdKXt2YXIgZT1HW2FdLnF1ZXJpZXM7dmFyIGY9bnVsbDtmb3IodmFyIGk9MCxzPWUubGVuZ3RoO2k8cztpKyspe3ZhciBxPWVbaV07aWYoKHEhPUdbYV0uY3VycmVudHF1ZXJ5fHxiKSYmZC5tZWRpYS5tYXRjaGVzKHEuZnJvbSxxLnRvLEdbYV0udW5pdCkpe2lmKCFiKXtHW2FdLmN1cnJlbnRxdWVyeT1xfWlmKCFHW2FdLm5vQ2xhc3NlcyYmR1thXS5uYW1lcyYmIWIpe04oYSxHW2FdLm5hbWVzW2ldKX1mPUwoYSxpKX19cmV0dXJuIGZ9bC5sb2coVywiTm8gcXVlcnlzZXQgd2l0aCBuYW1lICIrYSsiIGZvdW5kIiwnREVWSUNFLk1FRElBJyk7cmV0dXJuIG51bGx9O2Z1bmN0aW9uIE4ocyxhLGIpe3ZhciBlPSJzYXBVaU1lZGlhLSIrcysiLSI7UChlK2EsYixlKX07ZnVuY3Rpb24gUChzLGIsYSl7dmFyIGU9ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O2lmKGUuY2xhc3NOYW1lLmxlbmd0aD09MCl7aWYoIWIpe2UuY2xhc3NOYW1lPXN9fWVsc2V7dmFyIGY9ZS5jbGFzc05hbWUuc3BsaXQoIiAiKTt2YXIgcT0iIjtmb3IodmFyIGk9MDtpPGYubGVuZ3RoO2krKyl7aWYoKGEmJmZbaV0uaW5kZXhPZihhKSE9MCl8fCghYSYmZltpXSE9cykpe3E9cStmW2ldKyIgIn19aWYoIWIpe3E9cStzfWUuY2xhc3NOYW1lPXF9fTtmdW5jdGlvbiBRKCl7cmV0dXJuW2RvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aCxkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0XX07ZnVuY3Rpb24gUyh2LGEpe2lmKGE9PT0iZW0ifHxhPT09InJlbSIpe3ZhciBzPXdpbmRvdy5nZXRDb21wdXRlZFN0eWxlfHxmdW5jdGlvbihlKXtyZXR1cm4gZS5jdXJyZW50U3R5bGV9O3ZhciB4PXMoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KS5mb250U2l6ZTt2YXIgZj0oeCYmeC5pbmRleE9mKCJweCIpPj0wKT9wYXJzZUZsb2F0KHgsMTApOjE2O3JldHVybiB2KmZ9cmV0dXJuIHZ9O2Z1bmN0aW9uIFUoZix0LGUpe2Y9UyhmLGUpO3Q9Uyh0LGUpO3ZhciB3PVEoKVswXTt2YXIgYT1mPDB8fGY8PXc7dmFyIGI9dDwwfHx3PD10O3JldHVybiBhJiZifTtmdW5jdGlvbiBWKGYsdCxhKXt2YXIgcT1KKGYsdCxhKTt2YXIgbT13aW5kb3cubWF0Y2hNZWRpYShxKTtyZXR1cm4gbSYmbS5tYXRjaGVzfTtkLm1lZGlhLm1hdGNoZXM9ZC5zdXBwb3J0Lm1hdGNobWVkaWE/VjpVO2QubWVkaWEuYXR0YWNoSGFuZGxlcj1mdW5jdGlvbihmLGEscyl7dmFyIGI9c3x8XztqKCJtZWRpYV8iK2IsZixhKX07ZC5tZWRpYS5kZXRhY2hIYW5kbGVyPWZ1bmN0aW9uKGYsYSxzKXt2YXIgYj1zfHxfO2soIm1lZGlhXyIrYixmLGEpfTtkLm1lZGlhLmluaXRSYW5nZVNldD1mdW5jdGlvbihzLGEsYixlLGYpe3ZhciB0O2lmKCFzKXt0PWQubWVkaWEuX3ByZWRlZmluZWRSYW5nZVNldHNbX119ZWxzZSBpZihzJiZkLm1lZGlhLl9wcmVkZWZpbmVkUmFuZ2VTZXRzW3NdKXt0PWQubWVkaWEuX3ByZWRlZmluZWRSYW5nZVNldHNbc119ZWxzZXt0PXtuYW1lOnMsdW5pdDooYnx8InB4IikudG9Mb3dlckNhc2UoKSxwb2ludHM6YXx8W10sbmFtZXM6ZSxub0NsYXNzZXM6ISFmfX1pZihkLm1lZGlhLmhhc1JhbmdlU2V0KHQubmFtZSkpe3JldHVybjtsLmxvZyhJLCJSYW5nZSBzZXQgIit0Lm5hbWUrIiBoYXNlIGFscmVhZHkgYmVlbiBpbml0aWFsaXplZCIsJ0RFVklDRS5NRURJQScpfXM9dC5uYW1lO3QucXVlcmllcz1bXTt0LnRpbWVyPW51bGw7dC5jdXJyZW50cXVlcnk9bnVsbDt0Lmxpc3RlbmVyPWZ1bmN0aW9uKCl7cmV0dXJuIEsocyl9O3ZhciB2LHcseDt2YXIgeDE9dC5wb2ludHM7Zm9yKHZhciBpPTAseTE9eDEubGVuZ3RoO2k8PXkxO2krKyl7dj0oaT09MCk/MDp4MVtpLTFdO3c9KGk9PXgxLmxlbmd0aCk/LTE6eDFbaV07eD1KKHYsdyx0LnVuaXQpO3QucXVlcmllcy5wdXNoKHtxdWVyeTp4LGZyb206dix0bzp3fSl9O2lmKHQubmFtZXMmJnQubmFtZXMubGVuZ3RoIT10LnF1ZXJpZXMubGVuZ3RoKXt0Lm5hbWVzPW51bGx9R1t0Lm5hbWVdPXQ7aWYoZC5zdXBwb3J0Lm1hdGNobWVkaWFsaXN0ZW5lcil7dmFyIHoxPXQucXVlcmllcztmb3IodmFyIGk9MDtpPHoxLmxlbmd0aDtpKyspe3ZhciBxPXoxW2ldO3EubWVkaWE9d2luZG93Lm1hdGNoTWVkaWEocS5xdWVyeSk7cS5tZWRpYS5hZGRMaXN0ZW5lcih0Lmxpc3RlbmVyKX19ZWxzZXtpZih3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcil7d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoInJlc2l6ZSIsdC5saXN0ZW5lcixmYWxzZSk7d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoIm9yaWVudGF0aW9uY2hhbmdlIix0Lmxpc3RlbmVyLGZhbHNlKX1lbHNle3dpbmRvdy5hdHRhY2hFdmVudCgib25yZXNpemUiLHQubGlzdGVuZXIpfX10Lmxpc3RlbmVyKCl9O2QubWVkaWEuZ2V0Q3VycmVudFJhbmdlPWZ1bmN0aW9uKHMpe2lmKCFkLm1lZGlhLmhhc1JhbmdlU2V0KHMpKXtyZXR1cm4gbnVsbH1yZXR1cm4gTShzLHRydWUpfTtkLm1lZGlhLmhhc1JhbmdlU2V0PWZ1bmN0aW9uKHMpe3JldHVybiBzJiYhIUdbc119O2QubWVkaWEucmVtb3ZlUmFuZ2VTZXQ9ZnVuY3Rpb24ocyl7aWYoIWQubWVkaWEuaGFzUmFuZ2VTZXQocykpe2wubG9nKEksIlJhbmdlU2V0ICIrcysiIG5vdCBmb3VuZCwgdGh1cyBjb3VsZCBub3QgYmUgcmVtb3ZlZC4iLCdERVZJQ0UuTUVESUEnKTtyZXR1cm59Zm9yKHZhciB4IGluIFIpe2lmKHM9PT1SW3hdKXtsLmxvZyhXLCJDYW5ub3QgcmVtb3ZlIGRlZmF1bHQgcmFuZ2VzZXQgLSBubyBhY3Rpb24gdGFrZW4uIiwnREVWSUNFLk1FRElBJyk7cmV0dXJufX12YXIgYT1HW3NdO2lmKGQuc3VwcG9ydC5tYXRjaG1lZGlhbGlzdGVuZXIpe3ZhciBxPWEucXVlcmllcztmb3IodmFyIGk9MDtpPHEubGVuZ3RoO2krKyl7cVtpXS5tZWRpYS5yZW1vdmVMaXN0ZW5lcihhLmxpc3RlbmVyKX19ZWxzZXtpZih3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcil7d2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoInJlc2l6ZSIsYS5saXN0ZW5lcixmYWxzZSk7d2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoIm9yaWVudGF0aW9uY2hhbmdlIixhLmxpc3RlbmVyLGZhbHNlKX1lbHNle3dpbmRvdy5kZXRhY2hFdmVudCgib25yZXNpemUiLGEubGlzdGVuZXIpfX1OKHMsIiIsdHJ1ZSk7ZGVsZXRlIGhbIm1lZGlhXyIrc107ZGVsZXRlIEdbc119O3ZhciBYPXsiVEFCTEVUIjoidGFibGV0IiwiUEhPTkUiOiJwaG9uZSIsIkRFU0tUT1AiOiJkZXNrdG9wIiwiQ09NQkkiOiJjb21iaSJ9O3ZhciBZPWQub3Mud2luZG93cyYmZC5vcy52ZXJzaW9uPT09ODt2YXIgWj1kLm9zLndpbmRvd3MmJmQub3MudmVyc2lvbj09PTc7ZC5zeXN0ZW09e307ZnVuY3Rpb24gJChhKXt2YXIgdD1hMSgpO3ZhciBzPXt9O3MudGFibGV0PSgoZC5zdXBwb3J0LnRvdWNoJiYhWil8fCEhYSkmJnQ7cy5waG9uZT0oKGQuc3VwcG9ydC50b3VjaCYmIVopfHwhIWEpJiYhdDtzLmRlc2t0b3A9KCFzLnRhYmxldCYmIXMucGhvbmUpfHxZfHxaO3MuY29tYmk9KHMuZGVza3RvcCYmcy50YWJsZXQpO3MuU1lTVEVNVFlQRT1YO2Zvcih2YXIgYiBpbiBYKXtQKCJzYXAtIitYW2JdLCFzW1hbYl1dKX1yZXR1cm4gc307ZnVuY3Rpb24gYTEoKXt2YXIgYT0oLyg/PWFuZHJvaWQpKD89Liptb2JpbGUpL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSk7dmFyIGI9ZC5vcy5hbmRyb2lkJiYoZC5vcy52ZXJzaW9uPj00LjQpJiYvVmVyc2lvblwvXGQuXGQvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk7aWYoZC5vcy5uYW1lPT09ZC5vcy5PUy5JT1Mpe3JldHVybi9pcGFkL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KX1lbHNle2lmKGQuc3VwcG9ydC50b3VjaCl7dmFyIGU9d2luZG93LmRldmljZVBpeGVsUmF0aW8/d2luZG93LmRldmljZVBpeGVsUmF0aW86MTtpZighYiYmKGQub3MubmFtZT09PWQub3MuT1MuQU5EUk9JRCkmJmQuYnJvd3Nlci53ZWJraXQmJihkLmJyb3dzZXIud2Via2l0VmVyc2lvbj41MzcuMTApKXtlPTF9dmFyIHQ9KE1hdGgubWluKHdpbmRvdy5zY3JlZW4ud2lkdGgvZSx3aW5kb3cuc2NyZWVuLmhlaWdodC9lKT49NjAwKTtpZih0MSgpJiYod2luZG93LnNjcmVlbi5oZWlnaHQ9PT01NTJ8fHdpbmRvdy5zY3JlZW4uaGVpZ2h0PT09NTUzKSYmKC9OZXh1cyA3L2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSkpe3Q9dHJ1ZX1yZXR1cm4gdH1lbHNle3ZhciBmPShkLm9zLm5hbWU9PT1kLm9zLk9TLkFORFJPSUQpJiYhYTtyZXR1cm4gZn19fTtmdW5jdGlvbiBiMShhKXtkLnN5c3RlbT0kKGEpO2lmKGQuc3lzdGVtLnRhYmxldHx8ZC5zeXN0ZW0ucGhvbmUpe2QuYnJvd3Nlci5tb2JpbGU9dHJ1ZX19YjEoKTtkLm9yaWVudGF0aW9uPXt9O2QucmVzaXplPXt9O2Qub3JpZW50YXRpb24uYXR0YWNoSGFuZGxlcj1mdW5jdGlvbihmLGEpe2ooIm9yaWVudGF0aW9uIixmLGEpfTtkLnJlc2l6ZS5hdHRhY2hIYW5kbGVyPWZ1bmN0aW9uKGYsYSl7aigicmVzaXplIixmLGEpfTtkLm9yaWVudGF0aW9uLmRldGFjaEhhbmRsZXI9ZnVuY3Rpb24oZixhKXtrKCJvcmllbnRhdGlvbiIsZixhKX07ZC5yZXNpemUuZGV0YWNoSGFuZGxlcj1mdW5jdGlvbihmLGEpe2soInJlc2l6ZSIsZixhKX07ZnVuY3Rpb24gYzEoaSl7aS5sYW5kc2NhcGU9dDEodHJ1ZSk7aS5wb3J0cmFpdD0haS5sYW5kc2NhcGV9O2Z1bmN0aW9uIGQxKCl7YzEoZC5vcmllbnRhdGlvbik7bigib3JpZW50YXRpb24iLHtsYW5kc2NhcGU6ZC5vcmllbnRhdGlvbi5sYW5kc2NhcGV9KX07ZnVuY3Rpb24gZTEoKXtmMShkLnJlc2l6ZSk7bigicmVzaXplIix7aGVpZ2h0OmQucmVzaXplLmhlaWdodCx3aWR0aDpkLnJlc2l6ZS53aWR0aH0pfTtmdW5jdGlvbiBmMShpKXtpLndpZHRoPVEoKVswXTtpLmhlaWdodD1RKClbMV19O2Z1bmN0aW9uIGcxKCl7dmFyIHc9ZC5vcmllbnRhdGlvbi5sYW5kc2NhcGU7dmFyIGk9dDEoKTtpZih3IT1pKXtkMSgpfWlmKCFsMSl7bDE9d2luZG93LnNldFRpbWVvdXQoaDEsMTUwKX19O2Z1bmN0aW9uIGgxKCl7ZTEoKTtsMT1udWxsfTt2YXIgaTE9ZmFsc2U7dmFyIGoxPWZhbHNlO3ZhciBrMTt2YXIgbDE7dmFyIG0xO3ZhciBuMT1RKClbMV07dmFyIG8xPVEoKVswXTt2YXIgcDE9ZmFsc2U7dmFyIHExO3ZhciByMT0vSU5QVVR8VEVYVEFSRUF8U0VMRUNULzt2YXIgczE9ZC5vcy5pb3MmJmQuYnJvd3Nlci5uYW1lPT09InNmIiYmKChkLnN5c3RlbS5waG9uZSYmZC5vcy52ZXJzaW9uPj03JiZkLm9zLnZlcnNpb248Ny4xKXx8KGQuc3lzdGVtLnRhYmxldCYmZC5vcy52ZXJzaW9uPj03KSk7ZnVuY3Rpb24gdDEoZil7aWYoZC5zdXBwb3J0LnRvdWNoJiZkLnN1cHBvcnQub3JpZW50YXRpb24pe2lmKHAxJiZmKXtyZXR1cm4hZC5vcmllbnRhdGlvbi5sYW5kc2NhcGV9aWYocDEpe3JldHVybiBkLm9yaWVudGF0aW9uLmxhbmRzY2FwZX19ZWxzZXtpZihkLnN1cHBvcnQubWF0Y2htZWRpYSYmZC5zdXBwb3J0Lm9yaWVudGF0aW9uKXtyZXR1cm4hIXdpbmRvdy5tYXRjaE1lZGlhKCIob3JpZW50YXRpb246IGxhbmRzY2FwZSkiKS5tYXRjaGVzfX12YXIgcz1RKCk7cmV0dXJuIHNbMF0+c1sxXX07ZnVuY3Rpb24gdTEoZSl7aWYoZS50eXBlPT0icmVzaXplIil7aWYoczEmJnIxLnRlc3QoZG9jdW1lbnQuYWN0aXZlRWxlbWVudC50YWdOYW1lKSYmIWkxKXtyZXR1cm59dmFyIHc9USgpWzFdO3ZhciBpPVEoKVswXTt2YXIgdD1uZXcgRGF0ZSgpLmdldFRpbWUoKTtpZih3PT09bjEmJmk9PT1vMSl7cmV0dXJufWoxPXRydWU7aWYoKG4xIT13KSYmKG8xPT1pKSl7aWYoIXExfHwodC1xMT4zMDApKXtwMT0odzxuMSl9ZTEoKX1lbHNle28xPWl9cTE9dDtuMT13O2lmKG0xKXt3aW5kb3cuY2xlYXJUaW1lb3V0KG0xKTttMT1udWxsfW0xPXdpbmRvdy5zZXRUaW1lb3V0KHcxLDEyMDApfWVsc2UgaWYoZS50eXBlPT0ib3JpZW50YXRpb25jaGFuZ2UiKXtpMT10cnVlfWlmKGsxKXtjbGVhclRpbWVvdXQoazEpO2sxPW51bGx9azE9d2luZG93LnNldFRpbWVvdXQodjEsNTApfTtmdW5jdGlvbiB2MSgpe2lmKGkxJiZqMSl7ZDEoKTtlMSgpO2kxPWZhbHNlO2oxPWZhbHNlO2lmKG0xKXt3aW5kb3cuY2xlYXJUaW1lb3V0KG0xKTttMT1udWxsfX1rMT1udWxsfTtmdW5jdGlvbiB3MSgpe2kxPWZhbHNlO2oxPWZhbHNlO20xPW51bGx9O2QuX3VwZGF0ZT1mdW5jdGlvbihhKXt1PW5hdmlnYXRvci51c2VyQWdlbnQ7bC5sb2coVywiRGV2aWNlIEFQSSB2YWx1ZXMgbWFuaXB1bGF0ZWQ6IE5PVCBQUk9EVUNUSVZFIEZFQVRVUkUhISEgVGhpcyBzaG91bGQgYmUgb25seSB1c2VkIGZvciB0ZXN0IHB1cnBvc2VzLiBPbmx5IHVzZSBpZiB5b3Uga25vdyB3aGF0IHlvdSBhcmUgZG9pbmcuIik7QSgpO3IoKTtiMShhKX07ZjEoZC5yZXNpemUpO2MxKGQub3JpZW50YXRpb24pO3dpbmRvdy5zYXAudWkuRGV2aWNlPWQ7aWYoZC5zdXBwb3J0LnRvdWNoJiZkLnN1cHBvcnQub3JpZW50YXRpb24pe3dpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJyZXNpemUiLHUxLGZhbHNlKTt3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigib3JpZW50YXRpb25jaGFuZ2UiLHUxLGZhbHNlKX1lbHNle2lmKHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKXt3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigicmVzaXplIixnMSxmYWxzZSl9ZWxzZXt3aW5kb3cuYXR0YWNoRXZlbnQoIm9ucmVzaXplIixnMSl9fWQubWVkaWEuaW5pdFJhbmdlU2V0KCk7aWYoc2FwLnVpLmRlZmluZSl7c2FwLnVpLmRlZmluZSgic2FwL3VpL0RldmljZSIsW10sZnVuY3Rpb24oKXtyZXR1cm4gZH0pfX0oKSk7DQovKiENCiAqIFVSSS5qcyAtIE11dGF0aW5nIFVSTHMNCiAqIFNlY29uZCBMZXZlbCBEb21haW4gKFNMRCkgU3VwcG9ydA0KICoNCiAqIFZlcnNpb246IDEuMTEuMg0KICoNCiAqIEF1dGhvcjogUm9kbmV5IFJlaG0NCiAqIFdlYjogaHR0cDovL21lZGlhbGl6ZS5naXRodWIuY29tL1VSSS5qcy8NCiAqDQogKiBMaWNlbnNlZCB1bmRlcg0KICogICBNSVQgTGljZW5zZSBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlDQogKiAgIEdQTCB2MyBodHRwOi8vb3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvR1BMLTMuMA0KICoNCiAqLw0KKGZ1bmN0aW9uKHIsZil7aWYodHlwZW9mIGV4cG9ydHM9PT0nb2JqZWN0Jyl7bW9kdWxlLmV4cG9ydHM9ZigpfWVsc2UgaWYodHlwZW9mIGRlZmluZT09PSdmdW5jdGlvbicmJmRlZmluZS5hbWQpe2RlZmluZShmKX1lbHNle3IuU2Vjb25kTGV2ZWxEb21haW5zPWYocil9fSh0aGlzLGZ1bmN0aW9uKHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgXz1yJiZyLlNlY29uZExldmVsRG9tYWluczt2YXIgaD1PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O3ZhciBTPXtsaXN0OnsiYWMiOiJjb218Z292fG1pbHxuZXR8b3JnIiwiYWUiOiJhY3xjb3xnb3Z8bWlsfG5hbWV8bmV0fG9yZ3xwcm98c2NoIiwiYWYiOiJjb218ZWR1fGdvdnxuZXR8b3JnIiwiYWwiOiJjb218ZWR1fGdvdnxtaWx8bmV0fG9yZyIsImFvIjoiY298ZWR8Z3Z8aXR8b2d8cGIiLCJhciI6ImNvbXxlZHV8Z29ifGdvdnxpbnR8bWlsfG5ldHxvcmd8dHVyIiwiYXQiOiJhY3xjb3xndnxvciIsImF1IjoiYXNufGNvbXxjc2lyb3xlZHV8Z292fGlkfG5ldHxvcmciLCJiYSI6ImNvfGNvbXxlZHV8Z292fG1pbHxuZXR8b3JnfHJzfHVuYml8dW5tb3x1bnNhfHVudHp8dW56ZSIsImJiIjoiYml6fGNvfGNvbXxlZHV8Z292fGluZm98bmV0fG9yZ3xzdG9yZXx0diIsImJoIjoiYml6fGNjfGNvbXxlZHV8Z292fGluZm98bmV0fG9yZyIsImJuIjoiY29tfGVkdXxnb3Z8bmV0fG9yZyIsImJvIjoiY29tfGVkdXxnb2J8Z292fGludHxtaWx8bmV0fG9yZ3x0diIsImJyIjoiYWRtfGFkdnxhZ3J8YW18YXJxfGFydHxhdG98YnxiaW98YmxvZ3xibWR8Y2ltfGNuZ3xjbnR8Y29tfGNvb3B8ZWNufGVkdXxlbmd8ZXNwfGV0Y3xldGl8ZmFyfGZsb2d8Zm18Zm5kfGZvdHxmc3R8ZzEyfGdnZnxnb3Z8aW1ifGluZHxpbmZ8am9yfGp1c3xsZWx8bWF0fG1lZHxtaWx8bXVzfG5ldHxub218bm90fG50cnxvZG98b3JnfHBwZ3xwcm98cHNjfHBzaXxxc2x8cmVjfHNsZ3xzcnZ8dG1wfHRyZHx0dXJ8dHZ8dmV0fHZsb2d8d2lraXx6bGciLCJicyI6ImNvbXxlZHV8Z292fG5ldHxvcmciLCJieiI6ImR1fGV0fG9tfG92fHJnIiwiY2EiOiJhYnxiY3xtYnxuYnxuZnxubHxuc3xudHxudXxvbnxwZXxxY3xza3x5ayIsImNrIjoiYml6fGNvfGVkdXxnZW58Z292fGluZm98bmV0fG9yZyIsImNuIjoiYWN8YWh8Ymp8Y29tfGNxfGVkdXxmanxnZHxnb3Z8Z3N8Z3h8Z3p8aGF8aGJ8aGV8aGl8aGx8aG58amx8anN8anh8bG58bWlsfG5ldHxubXxueHxvcmd8cWh8c2N8c2R8c2h8c258c3h8dGp8dHd8eGp8eHp8eW58emoiLCJjbyI6ImNvbXxlZHV8Z292fG1pbHxuZXR8bm9tfG9yZyIsImNyIjoiYWN8Y3xjb3xlZHxmaXxnb3xvcnxzYSIsImN5IjoiYWN8Yml6fGNvbXxla2xvZ2VzfGdvdnxsdGR8bmFtZXxuZXR8b3JnfHBhcmxpYW1lbnR8cHJlc3N8cHJvfHRtIiwiZG8iOiJhcnR8Y29tfGVkdXxnb2J8Z292fG1pbHxuZXR8b3JnfHNsZHx3ZWIiLCJkeiI6ImFydHxhc3NvfGNvbXxlZHV8Z292fG5ldHxvcmd8cG9sIiwiZWMiOiJjb218ZWR1fGZpbnxnb3Z8aW5mb3xtZWR8bWlsfG5ldHxvcmd8cHJvIiwiZWciOiJjb218ZWR1fGV1bnxnb3Z8bWlsfG5hbWV8bmV0fG9yZ3xzY2kiLCJlciI6ImNvbXxlZHV8Z292fGluZHxtaWx8bmV0fG9yZ3xyb2NoZXN0fHciLCJlcyI6ImNvbXxlZHV8Z29ifG5vbXxvcmciLCJldCI6ImJpenxjb218ZWR1fGdvdnxpbmZvfG5hbWV8bmV0fG9yZyIsImZqIjoiYWN8Yml6fGNvbXxpbmZvfG1pbHxuYW1lfG5ldHxvcmd8cHJvIiwiZmsiOiJhY3xjb3xnb3Z8bmV0fG5vbXxvcmciLCJmciI6ImFzc298Y29tfGZ8Z291dnxub218cHJkfHByZXNzZXx0bSIsImdnIjoiY298bmV0fG9yZyIsImdoIjoiY29tfGVkdXxnb3Z8bWlsfG9yZyIsImduIjoiYWN8Y29tfGdvdnxuZXR8b3JnIiwiZ3IiOiJjb218ZWR1fGdvdnxtaWx8bmV0fG9yZyIsImd0IjoiY29tfGVkdXxnb2J8aW5kfG1pbHxuZXR8b3JnIiwiZ3UiOiJjb218ZWR1fGdvdnxuZXR8b3JnIiwiaGsiOiJjb218ZWR1fGdvdnxpZHZ8bmV0fG9yZyIsImlkIjoiYWN8Y298Z298bWlsfG5ldHxvcnxzY2h8d2ViIiwiaWwiOiJhY3xjb3xnb3Z8aWRmfGsxMnxtdW5pfG5ldHxvcmciLCJpbiI6ImFjfGNvfGVkdXxlcm5ldHxmaXJtfGdlbnxnb3Z8aXxpbmR8bWlsfG5ldHxuaWN8b3JnfHJlcyIsImlxIjoiY29tfGVkdXxnb3Z8aXxtaWx8bmV0fG9yZyIsImlyIjoiYWN8Y298ZG5zc2VjfGdvdnxpfGlkfG5ldHxvcmd8c2NoIiwiaXQiOiJlZHV8Z292IiwiamUiOiJjb3xuZXR8b3JnIiwiam8iOiJjb218ZWR1fGdvdnxtaWx8bmFtZXxuZXR8b3JnfHNjaCIsImpwIjoiYWN8YWR8Y298ZWR8Z298Z3J8bGd8bmV8b3IiLCJrZSI6ImFjfGNvfGdvfGluZm98bWV8bW9iaXxuZXxvcnxzYyIsImtoIjoiY29tfGVkdXxnb3Z8bWlsfG5ldHxvcmd8cGVyIiwia2kiOiJiaXp8Y29tfGRlfGVkdXxnb3Z8aW5mb3xtb2J8bmV0fG9yZ3x0ZWwiLCJrbSI6ImFzc298Y29tfGNvb3B8ZWR1fGdvdXZ8a3xtZWRlY2lufG1pbHxub218bm90YWlyZXN8cGhhcm1hY2llbnN8cHJlc3NlfHRtfHZldGVyaW5haXJlIiwia24iOiJlZHV8Z292fG5ldHxvcmciLCJrciI6ImFjfGJ1c2FufGNodW5nYnVrfGNodW5nbmFtfGNvfGRhZWd1fGRhZWplb258ZXN8Z2FuZ3dvbnxnb3xnd2FuZ2p1fGd5ZW9uZ2J1a3xneWVvbmdnaXxneWVvbmduYW18aHN8aW5jaGVvbnxqZWp1fGplb25idWt8amVvbm5hbXxrfGtnfG1pbHxtc3xuZXxvcnxwZXxyZXxzY3xzZW91bHx1bHNhbiIsImt3IjoiY29tfGVkdXxnb3Z8bmV0fG9yZyIsImt5IjoiY29tfGVkdXxnb3Z8bmV0fG9yZyIsImt6IjoiY29tfGVkdXxnb3Z8bWlsfG5ldHxvcmciLCJsYiI6ImNvbXxlZHV8Z292fG5ldHxvcmciLCJsayI6ImFzc258Y29tfGVkdXxnb3Z8Z3JwfGhvdGVsfGludHxsdGR8bmV0fG5nb3xvcmd8c2NofHNvY3x3ZWIiLCJsciI6ImNvbXxlZHV8Z292fG5ldHxvcmciLCJsdiI6ImFzbnxjb218Y29uZnxlZHV8Z292fGlkfG1pbHxuZXR8b3JnIiwibHkiOiJjb218ZWR1fGdvdnxpZHxtZWR8bmV0fG9yZ3xwbGN8c2NoIiwibWEiOiJhY3xjb3xnb3Z8bXxuZXR8b3JnfHByZXNzIiwibWMiOiJhc3NvfHRtIiwibWUiOiJhY3xjb3xlZHV8Z292fGl0c3xuZXR8b3JnfHByaXYiLCJtZyI6ImNvbXxlZHV8Z292fG1pbHxub218b3JnfHByZHx0bSIsIm1rIjoiY29tfGVkdXxnb3Z8aW5mfG5hbWV8bmV0fG9yZ3xwcm8iLCJtbCI6ImNvbXxlZHV8Z292fG5ldHxvcmd8cHJlc3NlIiwibW4iOiJlZHV8Z292fG9yZyIsIm1vIjoiY29tfGVkdXxnb3Z8bmV0fG9yZyIsIm10IjoiY29tfGVkdXxnb3Z8bmV0fG9yZyIsIm12IjoiYWVyb3xiaXp8Y29tfGNvb3B8ZWR1fGdvdnxpbmZvfGludHxtaWx8bXVzZXVtfG5hbWV8bmV0fG9yZ3xwcm8iLCJtdyI6ImFjfGNvfGNvbXxjb29wfGVkdXxnb3Z8aW50fG11c2V1bXxuZXR8b3JnIiwibXgiOiJjb218ZWR1fGdvYnxuZXR8b3JnIiwibXkiOiJjb218ZWR1fGdvdnxtaWx8bmFtZXxuZXR8b3JnfHNjaCIsIm5mIjoiYXJ0c3xjb218ZmlybXxpbmZvfG5ldHxvdGhlcnxwZXJ8cmVjfHN0b3JlfHdlYiIsIm5nIjoiYml6fGNvbXxlZHV8Z292fG1pbHxtb2JpfG5hbWV8bmV0fG9yZ3xzY2giLCJuaSI6ImFjfGNvfGNvbXxlZHV8Z29ifG1pbHxuZXR8bm9tfG9yZyIsIm5wIjoiY29tfGVkdXxnb3Z8bWlsfG5ldHxvcmciLCJuciI6ImJpenxjb218ZWR1fGdvdnxpbmZvfG5ldHxvcmciLCJvbSI6ImFjfGJpenxjb3xjb218ZWR1fGdvdnxtZWR8bWlsfG11c2V1bXxuZXR8b3JnfHByb3xzY2giLCJwZSI6ImNvbXxlZHV8Z29ifG1pbHxuZXR8bm9tfG9yZ3xzbGQiLCJwaCI6ImNvbXxlZHV8Z292fGl8bWlsfG5ldHxuZ298b3JnIiwicGsiOiJiaXp8Y29tfGVkdXxmYW18Z29ifGdva3xnb258Z29wfGdvc3xnb3Z8bmV0fG9yZ3x3ZWIiLCJwbCI6ImFydHxiaWFseXN0b2t8Yml6fGNvbXxlZHV8Z2RhfGdkYW5za3xnb3J6b3d8Z292fGluZm98a2F0b3dpY2V8a3Jha293fGxvZHp8bHVibGlufG1pbHxuZXR8bmdvfG9sc3p0eW58b3JnfHBvem5hbnxwd3J8cmFkb218c2x1cHNrfHN6Y3plY2lufHRvcnVufHdhcnN6YXdhfHdhd3x3cm9jfHdyb2NsYXd8emdvcmEiLCJwciI6ImFjfGJpenxjb218ZWR1fGVzdHxnb3Z8aW5mb3xpc2xhfG5hbWV8bmV0fG9yZ3xwcm98cHJvZiIsInBzIjoiY29tfGVkdXxnb3Z8bmV0fG9yZ3xwbG98c2VjIiwicHciOiJiZWxhdXxjb3xlZHxnb3xuZXxvciIsInJvIjoiYXJ0c3xjb218ZmlybXxpbmZvfG5vbXxudHxvcmd8cmVjfHN0b3JlfHRtfHd3dyIsInJzIjoiYWN8Y298ZWR1fGdvdnxpbnxvcmciLCJzYiI6ImNvbXxlZHV8Z292fG5ldHxvcmciLCJzYyI6ImNvbXxlZHV8Z292fG5ldHxvcmciLCJzaCI6ImNvfGNvbXxlZHV8Z292fG5ldHxub218b3JnIiwic2wiOiJjb218ZWR1fGdvdnxuZXR8b3JnIiwic3QiOiJjb3xjb218Y29uc3VsYWRvfGVkdXxlbWJhaXhhZGF8Z292fG1pbHxuZXR8b3JnfHByaW5jaXBlfHNhb3RvbWV8c3RvcmUiLCJzdiI6ImNvbXxlZHV8Z29ifG9yZ3xyZWQiLCJzeiI6ImFjfGNvfG9yZyIsInRyIjoiYXZ8YmJzfGJlbHxiaXp8Y29tfGRyfGVkdXxnZW58Z292fGluZm98azEyfG5hbWV8bmV0fG9yZ3xwb2x8dGVsfHRza3x0dnx3ZWIiLCJ0dCI6ImFlcm98Yml6fGNhdHxjb3xjb218Y29vcHxlZHV8Z292fGluZm98aW50fGpvYnN8bWlsfG1vYml8bXVzZXVtfG5hbWV8bmV0fG9yZ3xwcm98dGVsfHRyYXZlbCIsInR3IjoiY2x1Ynxjb218ZWJpenxlZHV8Z2FtZXxnb3Z8aWR2fG1pbHxuZXR8b3JnIiwibXUiOiJhY3xjb3xjb218Z292fG5ldHxvcnxvcmciLCJteiI6ImFjfGNvfGVkdXxnb3Z8b3JnIiwibmEiOiJjb3xjb20iLCJueiI6ImFjfGNvfGNyaXxnZWVrfGdlbnxnb3Z0fGhlYWx0aHxpd2l8bWFvcml8bWlsfG5ldHxvcmd8cGFybGlhbWVudHxzY2hvb2wiLCJwYSI6ImFib3xhY3xjb218ZWR1fGdvYnxpbmd8bWVkfG5ldHxub218b3JnfHNsZCIsInB0IjoiY29tfGVkdXxnb3Z8aW50fG5ldHxub21lfG9yZ3xwdWJsIiwicHkiOiJjb218ZWR1fGdvdnxtaWx8bmV0fG9yZyIsInFhIjoiY29tfGVkdXxnb3Z8bWlsfG5ldHxvcmciLCJyZSI6ImFzc298Y29tfG5vbSIsInJ1IjoiYWN8YWR5Z2V5YXxhbHRhaXxhbXVyfGFya2hhbmdlbHNrfGFzdHJha2hhbnxiYXNoa2lyaWF8YmVsZ29yb2R8YmlyfGJyeWFuc2t8YnVyeWF0aWF8Y2JnfGNoZWx8Y2hlbHlhYmluc2t8Y2hpdGF8Y2h1a290a2F8Y2h1dmFzaGlhfGNvbXxkYWdlc3RhbnxlLWJ1cmd8ZWR1fGdvdnxncm96bnl8aW50fGlya3V0c2t8aXZhbm92b3xpemhldnNrfGphcnxqb3Noa2FyLW9sYXxrYWxteWtpYXxrYWx1Z2F8a2FtY2hhdGthfGthcmVsaWF8a2F6YW58a2NocnxrZW1lcm92b3xraGFiYXJvdnNrfGtoYWthc3NpYXxraHZ8a2lyb3Z8a29lbmlnfGtvbWl8a29zdHJvbWF8a3Jhbm95YXJza3xrdWJhbnxrdXJnYW58a3Vyc2t8bGlwZXRza3xtYWdhZGFufG1hcml8bWFyaS1lbHxtYXJpbmV8bWlsfG1vcmRvdmlhfG1vc3JlZ3xtc2t8bXVybWFuc2t8bmFsY2hpa3xuZXR8bm5vdnxub3Z8bm92b3NpYmlyc2t8bnNrfG9tc2t8b3JlbmJ1cmd8b3JnfG9yeW9sfHBlbnphfHBlcm18cHB8cHNrb3Z8cHR6fHJuZHxyeWF6YW58c2FraGFsaW58c2FtYXJhfHNhcmF0b3Z8c2ltYmlyc2t8c21vbGVuc2t8c3BifHN0YXZyb3BvbHxzdHZ8c3VyZ3V0fHRhbWJvdnx0YXRhcnN0YW58dG9tfHRvbXNrfHRzYXJpdHN5bnx0c2t8dHVsYXx0dXZhfHR2ZXJ8dHl1bWVufHVkbXx1ZG11cnRpYXx1bGFuLXVkZXx2bGFkaWthdmthenx2bGFkaW1pcnx2bGFkaXZvc3Rva3x2b2xnb2dyYWR8dm9sb2dkYXx2b3JvbmV6aHx2cm58dnlhdGthfHlha3V0aWF8eWFtYWx8eWVrYXRlcmluYnVyZ3x5dXpobm8tc2FraGFsaW5zayIsInJ3IjoiYWN8Y298Y29tfGVkdXxnb3V2fGdvdnxpbnR8bWlsfG5ldCIsInNhIjoiY29tfGVkdXxnb3Z8bWVkfG5ldHxvcmd8cHVifHNjaCIsInNkIjoiY29tfGVkdXxnb3Z8aW5mb3xtZWR8bmV0fG9yZ3x0diIsInNlIjoiYXxhY3xifGJkfGN8ZHxlfGZ8Z3xofGl8a3xsfG18bnxvfG9yZ3xwfHBhcnRpfHBwfHByZXNzfHJ8c3x0fHRtfHV8d3x4fHl8eiIsInNnIjoiY29tfGVkdXxnb3Z8aWRufG5ldHxvcmd8cGVyIiwic24iOiJhcnR8Y29tfGVkdXxnb3V2fG9yZ3xwZXJzb3x1bml2Iiwic3kiOiJjb218ZWR1fGdvdnxtaWx8bmV0fG5ld3N8b3JnIiwidGgiOiJhY3xjb3xnb3xpbnxtaXxuZXR8b3IiLCJ0aiI6ImFjfGJpenxjb3xjb218ZWR1fGdvfGdvdnxpbmZvfGludHxtaWx8bmFtZXxuZXR8bmljfG9yZ3x0ZXN0fHdlYiIsInRuIjoiYWdyaW5ldHxjb218ZGVmZW5zZXxlZHVuZXR8ZW5zfGZpbnxnb3Z8aW5kfGluZm98aW50bHxtaW5jb218bmF0fG5ldHxvcmd8cGVyc298cm5ydHxybnN8cm51fHRvdXJpc20iLCJ0eiI6ImFjfGNvfGdvfG5lfG9yIiwidWEiOiJiaXp8Y2hlcmthc3N5fGNoZXJuaWdvdnxjaGVybm92dHN5fGNrfGNufGNvfGNvbXxjcmltZWF8Y3Z8ZG58ZG5lcHJvcGV0cm92c2t8ZG9uZXRza3xkcHxlZHV8Z292fGlmfGlufGl2YW5vLWZyYW5raXZza3xraHxraGFya292fGtoZXJzb258a2htZWxuaXRza2l5fGtpZXZ8a2lyb3ZvZ3JhZHxrbXxrcnxrc3xrdnxsZ3xsdWdhbnNrfGx1dHNrfGx2aXZ8bWV8bWt8bmV0fG5pa29sYWV2fG9kfG9kZXNzYXxvcmd8cGx8cG9sdGF2YXxwcHxyb3Zub3xydnxzZWJhc3RvcG9sfHN1bXl8dGV8dGVybm9waWx8dXpoZ29yb2R8dmlubmljYXx2bnx6YXBvcml6aHpoZXx6aGl0b21pcnx6cHx6dCIsInVnIjoiYWN8Y298Z298bmV8b3J8b3JnfHNjIiwidWsiOiJhY3xibHxicml0aXNoLWxpYnJhcnl8Y298Y3ltfGdvdnxnb3Z0fGljbmV0fGpldHxsZWF8bHRkfG1lfG1pbHxtb2R8bmF0aW9uYWwtbGlicmFyeS1zY290bGFuZHxuZWx8bmV0fG5oc3xuaWN8bmxzfG9yZ3xvcmdufHBhcmxpYW1lbnR8cGxjfHBvbGljZXxzY2h8c2NvdHxzb2MiLCJ1cyI6ImRuaXxmZWR8aXNhfGtpZHN8bnNuIiwidXkiOiJjb218ZWR1fGd1YnxtaWx8bmV0fG9yZyIsInZlIjoiY298Y29tfGVkdXxnb2J8aW5mb3xtaWx8bmV0fG9yZ3x3ZWIiLCJ2aSI6ImNvfGNvbXxrMTJ8bmV0fG9yZyIsInZuIjoiYWN8Yml6fGNvbXxlZHV8Z292fGhlYWx0aHxpbmZvfGludHxuYW1lfG5ldHxvcmd8cHJvIiwieWUiOiJjb3xjb218Z292fGx0ZHxtZXxuZXR8b3JnfHBsYyIsInl1IjoiYWN8Y298ZWR1fGdvdnxvcmciLCJ6YSI6ImFjfGFncmljfGFsdHxib3Vyc2V8Y2l0eXxjb3xjeWJlcm5ldHxkYnxlZHV8Z292fGdyb25kYXJ8aWFjY2Vzc3xpbXR8aW5jYXxsYW5kZXNpZ258bGF3fG1pbHxuZXR8bmdvfG5pc3xub218b2xpdmV0dGl8b3JnfHBpeHxzY2hvb2x8dG18d2ViIiwiem0iOiJhY3xjb3xjb218ZWR1fGdvdnxuZXR8b3JnfHNjaCJ9LGhhc19leHByZXNzaW9uOm51bGwsaXNfZXhwcmVzc2lvbjpudWxsLGhhczpmdW5jdGlvbihkKXtyZXR1cm4hIWQubWF0Y2goUy5oYXNfZXhwcmVzc2lvbil9LGlzOmZ1bmN0aW9uKGQpe3JldHVybiEhZC5tYXRjaChTLmlzX2V4cHJlc3Npb24pfSxnZXQ6ZnVuY3Rpb24oZCl7dmFyIHQ9ZC5tYXRjaChTLmhhc19leHByZXNzaW9uKTtyZXR1cm4gdCYmdFsxXXx8bnVsbH0sbm9Db25mbGljdDpmdW5jdGlvbigpe2lmKHIuU2Vjb25kTGV2ZWxEb21haW5zPT09dGhpcyl7ci5TZWNvbmRMZXZlbERvbWFpbnM9X31yZXR1cm4gdGhpc30saW5pdDpmdW5jdGlvbigpe3ZhciB0PScnO2Zvcih2YXIgYSBpbiBTLmxpc3Qpe2lmKCFoLmNhbGwoUy5saXN0LGEpKXtjb250aW51ZX12YXIgZT0nKCcrUy5saXN0W2FdKycpXC4nK2E7dCs9J3woJytlKycpJ31TLmhhc19leHByZXNzaW9uPW5ldyBSZWdFeHAoJ1xcLignK3Quc3Vic3RyKDEpKycpJCcsJ2knKTtTLmlzX2V4cHJlc3Npb249bmV3IFJlZ0V4cCgnXignK3Quc3Vic3RyKDEpKycpJCcsJ2knKX19O1MuaW5pdCgpO3JldHVybiBTfSkpOw0KLyohDQogKiBVUkkuanMgLSBNdXRhdGluZyBVUkxzDQogKg0KICogVmVyc2lvbjogMS4xMS4yDQogKg0KICogQXV0aG9yOiBSb2RuZXkgUmVobQ0KICogV2ViOiBodHRwOi8vbWVkaWFsaXplLmdpdGh1Yi5jb20vVVJJLmpzLw0KICoNCiAqIExpY2Vuc2VkIHVuZGVyDQogKiAgIE1JVCBMaWNlbnNlIGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2UNCiAqICAgR1BMIHYzIGh0dHA6Ly9vcGVuc291cmNlLm9yZy9saWNlbnNlcy9HUEwtMy4wDQogKg0KICovDQooZnVuY3Rpb24ocixmKXtpZih0eXBlb2YgZXhwb3J0cz09PSdvYmplY3QnKXttb2R1bGUuZXhwb3J0cz1mKHJlcXVpcmUoJy4vcHVueWNvZGUnKSxyZXF1aXJlKCcuL0lQdjYnKSxyZXF1aXJlKCcuL1NlY29uZExldmVsRG9tYWlucycpKX1lbHNlIGlmKHR5cGVvZiBkZWZpbmU9PT0nZnVuY3Rpb24nJiZkZWZpbmUuYW1kKXtyLlVSST1mKHIucHVueWNvZGUsci5JUHY2LHIuU2Vjb25kTGV2ZWxEb21haW5zLHIpO2RlZmluZShbXSxmdW5jdGlvbigpe3JldHVybiByLlVSSX0pfWVsc2V7ci5VUkk9ZihyLnB1bnljb2RlLHIuSVB2NixyLlNlY29uZExldmVsRG9tYWlucyxyKX19KHRoaXMsZnVuY3Rpb24oYSxJLFMscil7InVzZSBzdHJpY3QiO3ZhciBfPXImJnIuVVJJO2Z1bmN0aW9uIFUoYyxkKXtpZighKHRoaXMgaW5zdGFuY2VvZiBVKSl7cmV0dXJuIG5ldyBVKGMsZCl9aWYoYz09PXVuZGVmaW5lZCl7aWYodHlwZW9mIGxvY2F0aW9uIT09J3VuZGVmaW5lZCcpe2M9bG9jYXRpb24uaHJlZisiIn1lbHNle2M9IiJ9fXRoaXMuaHJlZihjKTtpZihkIT09dW5kZWZpbmVkKXtyZXR1cm4gdGhpcy5hYnNvbHV0ZVRvKGQpfXJldHVybiB0aGlzfTt2YXIgcD1VLnByb3RvdHlwZTt2YXIgaD1PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O2Z1bmN0aW9uIGIocyl7cmV0dXJuIHMucmVwbGFjZSgvKFsuKis/Xj0hOiR7fSgpfFtcXVwvXFxdKS9nLCdcXCQxJyl9ZnVuY3Rpb24gZyh2KXtpZih2PT09dW5kZWZpbmVkKXtyZXR1cm4nVW5kZWZpbmVkJ31yZXR1cm4gU3RyaW5nKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2KSkuc2xpY2UoOCwtMSl9ZnVuY3Rpb24gZihjKXtyZXR1cm4gZyhjKT09PSJBcnJheSJ9ZnVuY3Rpb24gaihkLHYpe3ZhciBsPXt9O3ZhciBpLGM7aWYoZih2KSl7Zm9yKGk9MCxjPXYubGVuZ3RoO2k8YztpKyspe2xbdltpXV09dHJ1ZX19ZWxzZXtsW3ZdPXRydWV9Zm9yKGk9MCxjPWQubGVuZ3RoO2k8YztpKyspe2lmKGxbZFtpXV0hPT11bmRlZmluZWQpe2Quc3BsaWNlKGksMSk7Yy0tO2ktLX19cmV0dXJuIGR9ZnVuY3Rpb24gayhsLHYpe3ZhciBpLGM7aWYoZih2KSl7Zm9yKGk9MCxjPXYubGVuZ3RoO2k8YztpKyspe2lmKCFrKGwsdltpXSkpe3JldHVybiBmYWxzZX19cmV0dXJuIHRydWV9dmFyIGQ9Zyh2KTtmb3IoaT0wLGM9bC5sZW5ndGg7aTxjO2krKyl7aWYoZD09PSdSZWdFeHAnKXtpZih0eXBlb2YgbFtpXT09PSdzdHJpbmcnJiZsW2ldLm1hdGNoKHYpKXtyZXR1cm4gdHJ1ZX19ZWxzZSBpZihsW2ldPT09dil7cmV0dXJuIHRydWV9fXJldHVybiBmYWxzZX1mdW5jdGlvbiBtKGMsdCl7aWYoIWYoYyl8fCFmKHQpKXtyZXR1cm4gZmFsc2V9aWYoYy5sZW5ndGghPT10Lmxlbmd0aCl7cmV0dXJuIGZhbHNlfWMuc29ydCgpO3Quc29ydCgpO2Zvcih2YXIgaT0wLGw9Yy5sZW5ndGg7aTxsO2krKyl7aWYoY1tpXSE9PXRbaV0pe3JldHVybiBmYWxzZX19cmV0dXJuIHRydWV9VS5fcGFydHM9ZnVuY3Rpb24oKXtyZXR1cm57cHJvdG9jb2w6bnVsbCx1c2VybmFtZTpudWxsLHBhc3N3b3JkOm51bGwsaG9zdG5hbWU6bnVsbCx1cm46bnVsbCxwb3J0Om51bGwscGF0aDpudWxsLHF1ZXJ5Om51bGwsZnJhZ21lbnQ6bnVsbCxkdXBsaWNhdGVRdWVyeVBhcmFtZXRlcnM6VS5kdXBsaWNhdGVRdWVyeVBhcmFtZXRlcnMsZXNjYXBlUXVlcnlTcGFjZTpVLmVzY2FwZVF1ZXJ5U3BhY2V9fTtVLmR1cGxpY2F0ZVF1ZXJ5UGFyYW1ldGVycz1mYWxzZTtVLmVzY2FwZVF1ZXJ5U3BhY2U9dHJ1ZTtVLnByb3RvY29sX2V4cHJlc3Npb249L15bYS16XVthLXowLTktKy1dKiQvaTtVLmlkbl9leHByZXNzaW9uPS9bXmEtejAtOVwuLV0vaTtVLnB1bnljb2RlX2V4cHJlc3Npb249Lyh4bi0tKS9pO1UuaXA0X2V4cHJlc3Npb249L15cZHsxLDN9XC5cZHsxLDN9XC5cZHsxLDN9XC5cZHsxLDN9JC87VS5pcDZfZXhwcmVzc2lvbj0vXlxzKigoKFswLTlBLUZhLWZdezEsNH06KXs3fShbMC05QS1GYS1mXXsxLDR9fDopKXwoKFswLTlBLUZhLWZdezEsNH06KXs2fSg6WzAtOUEtRmEtZl17MSw0fXwoKDI1WzAtNV18MlswLTRdXGR8MVxkXGR8WzEtOV0/XGQpKFwuKDI1WzAtNV18MlswLTRdXGR8MVxkXGR8WzEtOV0/XGQpKXszfSl8OikpfCgoWzAtOUEtRmEtZl17MSw0fTopezV9KCgoOlswLTlBLUZhLWZdezEsNH0pezEsMn0pfDooKDI1WzAtNV18MlswLTRdXGR8MVxkXGR8WzEtOV0/XGQpKFwuKDI1WzAtNV18MlswLTRdXGR8MVxkXGR8WzEtOV0/XGQpKXszfSl8OikpfCgoWzAtOUEtRmEtZl17MSw0fTopezR9KCgoOlswLTlBLUZhLWZdezEsNH0pezEsM30pfCgoOlswLTlBLUZhLWZdezEsNH0pPzooKDI1WzAtNV18MlswLTRdXGR8MVxkXGR8WzEtOV0/XGQpKFwuKDI1WzAtNV18MlswLTRdXGR8MVxkXGR8WzEtOV0/XGQpKXszfSkpfDopKXwoKFswLTlBLUZhLWZdezEsNH06KXszfSgoKDpbMC05QS1GYS1mXXsxLDR9KXsxLDR9KXwoKDpbMC05QS1GYS1mXXsxLDR9KXswLDJ9OigoMjVbMC01XXwyWzAtNF1cZHwxXGRcZHxbMS05XT9cZCkoXC4oMjVbMC01XXwyWzAtNF1cZHwxXGRcZHxbMS05XT9cZCkpezN9KSl8OikpfCgoWzAtOUEtRmEtZl17MSw0fTopezJ9KCgoOlswLTlBLUZhLWZdezEsNH0pezEsNX0pfCgoOlswLTlBLUZhLWZdezEsNH0pezAsM306KCgyNVswLTVdfDJbMC00XVxkfDFcZFxkfFsxLTldP1xkKShcLigyNVswLTVdfDJbMC00XVxkfDFcZFxkfFsxLTldP1xkKSl7M30pKXw6KSl8KChbMC05QS1GYS1mXXsxLDR9Oil7MX0oKCg6WzAtOUEtRmEtZl17MSw0fSl7MSw2fSl8KCg6WzAtOUEtRmEtZl17MSw0fSl7MCw0fTooKDI1WzAtNV18MlswLTRdXGR8MVxkXGR8WzEtOV0/XGQpKFwuKDI1WzAtNV18MlswLTRdXGR8MVxkXGR8WzEtOV0/XGQpKXszfSkpfDopKXwoOigoKDpbMC05QS1GYS1mXXsxLDR9KXsxLDd9KXwoKDpbMC05QS1GYS1mXXsxLDR9KXswLDV9OigoMjVbMC01XXwyWzAtNF1cZHwxXGRcZHxbMS05XT9cZCkoXC4oMjVbMC01XXwyWzAtNF1cZHwxXGRcZHxbMS05XT9cZCkpezN9KSl8OikpKSglLispP1xzKiQvO1UuZmluZF91cmlfZXhwcmVzc2lvbj0vXGIoKD86W2Etel1bXHctXSs6KD86XC97MSwzfXxbYS16MC05JV0pfHd3d1xkezAsM31bLl18W2EtejAtOS5cLV0rWy5dW2Etel17Miw0fVwvKSg/OlteXHMoKTw+XSt8XCgoW15ccygpPD5dK3woXChbXlxzKCk8Pl0rXCkpKSpcKSkrKD86XCgoW15ccygpPD5dK3woXChbXlxzKCk8Pl0rXCkpKSpcKXxbXlxzYCEoKVxbXF17fTs6JyIuLDw+P8KrwrvigJzigJ3igJjigJldKSkvaWc7VS5kZWZhdWx0UG9ydHM9e2h0dHA6IjgwIixodHRwczoiNDQzIixmdHA6IjIxIixnb3BoZXI6IjcwIix3czoiODAiLHdzczoiNDQzIn07VS5pbnZhbGlkX2hvc3RuYW1lX2NoYXJhY3RlcnM9L1teYS16QS1aMC05XC4tXS87VS5kb21BdHRyaWJ1dGVzPXsnYSc6J2hyZWYnLCdibG9ja3F1b3RlJzonY2l0ZScsJ2xpbmsnOidocmVmJywnYmFzZSc6J2hyZWYnLCdzY3JpcHQnOidzcmMnLCdmb3JtJzonYWN0aW9uJywnaW1nJzonc3JjJywnYXJlYSc6J2hyZWYnLCdpZnJhbWUnOidzcmMnLCdlbWJlZCc6J3NyYycsJ3NvdXJjZSc6J3NyYycsJ3RyYWNrJzonc3JjJywnaW5wdXQnOidzcmMnfTtVLmdldERvbUF0dHJpYnV0ZT1mdW5jdGlvbihjKXtpZighY3x8IWMubm9kZU5hbWUpe3JldHVybiB1bmRlZmluZWR9dmFyIGQ9Yy5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO2lmKGQ9PT0naW5wdXQnJiZjLnR5cGUhPT0naW1hZ2UnKXtyZXR1cm4gdW5kZWZpbmVkfXJldHVybiBVLmRvbUF0dHJpYnV0ZXNbZF19O2Z1bmN0aW9uIG4odil7cmV0dXJuIGVzY2FwZSh2KX1mdW5jdGlvbiBvKHMpe3JldHVybiBlbmNvZGVVUklDb21wb25lbnQocykucmVwbGFjZSgvWyEnKCkqXS9nLG4pLnJlcGxhY2UoL1wqL2csIiUyQSIpfVUuZW5jb2RlPW87VS5kZWNvZGU9ZGVjb2RlVVJJQ29tcG9uZW50O1UuaXNvODg1OT1mdW5jdGlvbigpe1UuZW5jb2RlPWVzY2FwZTtVLmRlY29kZT11bmVzY2FwZX07VS51bmljb2RlPWZ1bmN0aW9uKCl7VS5lbmNvZGU9bztVLmRlY29kZT1kZWNvZGVVUklDb21wb25lbnR9O1UuY2hhcmFjdGVycz17cGF0aG5hbWU6e2VuY29kZTp7ZXhwcmVzc2lvbjovJSgyNHwyNnwyQnwyQ3wzQnwzRHwzQXw0MCkvaWcsbWFwOnsiJTI0IjoiJCIsIiUyNiI6IiYiLCIlMkIiOiIrIiwiJTJDIjoiLCIsIiUzQiI6IjsiLCIlM0QiOiI9IiwiJTNBIjoiOiIsIiU0MCI6IkAifX0sZGVjb2RlOntleHByZXNzaW9uOi9bXC9cPyNdL2csbWFwOnsiLyI6IiUyRiIsIj8iOiIlM0YiLCIjIjoiJTIzIn19fSxyZXNlcnZlZDp7ZW5jb2RlOntleHByZXNzaW9uOi8lKDIxfDIzfDI0fDI2fDI3fDI4fDI5fDJBfDJCfDJDfDJGfDNBfDNCfDNEfDNGfDQwfDVCfDVEKS9pZyxtYXA6eyIlM0EiOiI6IiwiJTJGIjoiLyIsIiUzRiI6Ij8iLCIlMjMiOiIjIiwiJTVCIjoiWyIsIiU1RCI6Il0iLCIlNDAiOiJAIiwiJTIxIjoiISIsIiUyNCI6IiQiLCIlMjYiOiImIiwiJTI3IjoiJyIsIiUyOCI6IigiLCIlMjkiOiIpIiwiJTJBIjoiKiIsIiUyQiI6IisiLCIlMkMiOiIsIiwiJTNCIjoiOyIsIiUzRCI6Ij0ifX19fTtVLmVuY29kZVF1ZXJ5PWZ1bmN0aW9uKHMsZSl7dmFyIGM9VS5lbmNvZGUocysiIik7cmV0dXJuIGU/Yy5yZXBsYWNlKC8lMjAvZywnKycpOmN9O1UuZGVjb2RlUXVlcnk9ZnVuY3Rpb24ocyxjKXtzKz0iIjt0cnl7cmV0dXJuIFUuZGVjb2RlKGM/cy5yZXBsYWNlKC9cKy9nLCclMjAnKTpzKX1jYXRjaChlKXtyZXR1cm4gc319O1UucmVjb2RlUGF0aD1mdW5jdGlvbihzKXt2YXIgYz0ocysiIikuc3BsaXQoJy8nKTtmb3IodmFyIGk9MCxsPWMubGVuZ3RoO2k8bDtpKyspe2NbaV09VS5lbmNvZGVQYXRoU2VnbWVudChVLmRlY29kZShjW2ldKSl9cmV0dXJuIGMuam9pbignLycpfTtVLmRlY29kZVBhdGg9ZnVuY3Rpb24ocyl7dmFyIGM9KHMrIiIpLnNwbGl0KCcvJyk7Zm9yKHZhciBpPTAsbD1jLmxlbmd0aDtpPGw7aSsrKXtjW2ldPVUuZGVjb2RlUGF0aFNlZ21lbnQoY1tpXSl9cmV0dXJuIGMuam9pbignLycpfTt2YXIgdT17J2VuY29kZSc6J2VuY29kZScsJ2RlY29kZSc6J2RlY29kZSd9O3ZhciB3O3ZhciB5PWZ1bmN0aW9uKGQsdyl7cmV0dXJuIGZ1bmN0aW9uKHMpe3JldHVybiBVW3ddKHMrIiIpLnJlcGxhY2UoVS5jaGFyYWN0ZXJzW2RdW3ddLmV4cHJlc3Npb24sZnVuY3Rpb24oYyl7cmV0dXJuIFUuY2hhcmFjdGVyc1tkXVt3XS5tYXBbY119KX19O2Zvcih3IGluIHUpe1VbdysiUGF0aFNlZ21lbnQiXT15KCJwYXRobmFtZSIsdVt3XSl9VS5lbmNvZGVSZXNlcnZlZD15KCJyZXNlcnZlZCIsImVuY29kZSIpO1UucGFyc2U9ZnVuY3Rpb24ocyxjKXt2YXIgZDtpZighYyl7Yz17fX1kPXMuaW5kZXhPZignIycpO2lmKGQ+LTEpe2MuZnJhZ21lbnQ9cy5zdWJzdHJpbmcoZCsxKXx8bnVsbDtzPXMuc3Vic3RyaW5nKDAsZCl9ZD1zLmluZGV4T2YoJz8nKTtpZihkPi0xKXtjLnF1ZXJ5PXMuc3Vic3RyaW5nKGQrMSl8fG51bGw7cz1zLnN1YnN0cmluZygwLGQpfWlmKHMuc3Vic3RyaW5nKDAsMik9PT0nLy8nKXtjLnByb3RvY29sPW51bGw7cz1zLnN1YnN0cmluZygyKTtzPVUucGFyc2VBdXRob3JpdHkocyxjKX1lbHNle2Q9cy5pbmRleE9mKCc6Jyk7aWYoZD4tMSl7Yy5wcm90b2NvbD1zLnN1YnN0cmluZygwLGQpfHxudWxsO2lmKGMucHJvdG9jb2wmJiFjLnByb3RvY29sLm1hdGNoKFUucHJvdG9jb2xfZXhwcmVzc2lvbikpe2MucHJvdG9jb2w9dW5kZWZpbmVkfWVsc2UgaWYoYy5wcm90b2NvbD09PSdmaWxlJyl7cz1zLnN1YnN0cmluZyhkKzMpfWVsc2UgaWYocy5zdWJzdHJpbmcoZCsxLGQrMyk9PT0nLy8nKXtzPXMuc3Vic3RyaW5nKGQrMyk7cz1VLnBhcnNlQXV0aG9yaXR5KHMsYyl9ZWxzZXtzPXMuc3Vic3RyaW5nKGQrMSk7Yy51cm49dHJ1ZX19fWMucGF0aD1zO3JldHVybiBjfTtVLnBhcnNlSG9zdD1mdW5jdGlvbihzLGMpe3ZhciBkPXMuaW5kZXhPZignLycpO3ZhciBlO3ZhciB0O2lmKGQ9PT0tMSl7ZD1zLmxlbmd0aH1pZihzLmNoYXJBdCgwKT09PSJbIil7ZT1zLmluZGV4T2YoJ10nKTtjLmhvc3RuYW1lPXMuc3Vic3RyaW5nKDEsZSl8fG51bGw7Yy5wb3J0PXMuc3Vic3RyaW5nKGUrMixkKXx8bnVsbH1lbHNlIGlmKHMuaW5kZXhPZignOicpIT09cy5sYXN0SW5kZXhPZignOicpKXtjLmhvc3RuYW1lPXMuc3Vic3RyaW5nKDAsZCl8fG51bGw7Yy5wb3J0PW51bGx9ZWxzZXt0PXMuc3Vic3RyaW5nKDAsZCkuc3BsaXQoJzonKTtjLmhvc3RuYW1lPXRbMF18fG51bGw7Yy5wb3J0PXRbMV18fG51bGx9aWYoYy5ob3N0bmFtZSYmcy5zdWJzdHJpbmcoZCkuY2hhckF0KDApIT09Jy8nKXtkKys7cz0iLyIrc31yZXR1cm4gcy5zdWJzdHJpbmcoZCl8fCcvJ307VS5wYXJzZUF1dGhvcml0eT1mdW5jdGlvbihzLGMpe3M9VS5wYXJzZVVzZXJpbmZvKHMsYyk7cmV0dXJuIFUucGFyc2VIb3N0KHMsYyl9O1UucGFyc2VVc2VyaW5mbz1mdW5jdGlvbihzLGMpe3ZhciBkPXMuaW5kZXhPZignLycpO3ZhciBlPWQ+LTE/cy5sYXN0SW5kZXhPZignQCcsZCk6cy5pbmRleE9mKCdAJyk7dmFyIHQ7aWYoZT4tMSYmKGQ9PT0tMXx8ZTxkKSl7dD1zLnN1YnN0cmluZygwLGUpLnNwbGl0KCc6Jyk7Yy51c2VybmFtZT10WzBdP1UuZGVjb2RlKHRbMF0pOm51bGw7dC5zaGlmdCgpO2MucGFzc3dvcmQ9dFswXT9VLmRlY29kZSh0LmpvaW4oJzonKSk6bnVsbDtzPXMuc3Vic3RyaW5nKGUrMSl9ZWxzZXtjLnVzZXJuYW1lPW51bGw7Yy5wYXNzd29yZD1udWxsfXJldHVybiBzfTtVLnBhcnNlUXVlcnk9ZnVuY3Rpb24ocyxlKXtpZighcyl7cmV0dXJue319cz1zLnJlcGxhY2UoLyYrL2csJyYnKS5yZXBsYWNlKC9eXD8qJip8JiskL2csJycpO2lmKCFzKXtyZXR1cm57fX12YXIgYz17fTt2YXIgZD1zLnNwbGl0KCcmJyk7dmFyIGw9ZC5sZW5ndGg7dmFyIHYsdCx4O2Zvcih2YXIgaT0wO2k8bDtpKyspe3Y9ZFtpXS5zcGxpdCgnPScpO3Q9VS5kZWNvZGVRdWVyeSh2LnNoaWZ0KCksZSk7eD12Lmxlbmd0aD9VLmRlY29kZVF1ZXJ5KHYuam9pbignPScpLGUpOm51bGw7aWYoY1t0XSl7aWYodHlwZW9mIGNbdF09PT0ic3RyaW5nIil7Y1t0XT1bY1t0XV19Y1t0XS5wdXNoKHgpfWVsc2V7Y1t0XT14fX1yZXR1cm4gY307VS5idWlsZD1mdW5jdGlvbihjKXt2YXIgdD0iIjtpZihjLnByb3RvY29sKXt0Kz1jLnByb3RvY29sKyI6In1pZighYy51cm4mJih0fHxjLmhvc3RuYW1lKSl7dCs9Jy8vJ310Kz0oVS5idWlsZEF1dGhvcml0eShjKXx8JycpO2lmKHR5cGVvZiBjLnBhdGg9PT0ic3RyaW5nIil7aWYoYy5wYXRoLmNoYXJBdCgwKSE9PScvJyYmdHlwZW9mIGMuaG9zdG5hbWU9PT0ic3RyaW5nIil7dCs9Jy8nfXQrPWMucGF0aH1pZih0eXBlb2YgYy5xdWVyeT09PSJzdHJpbmciJiZjLnF1ZXJ5KXt0Kz0nPycrYy5xdWVyeX1pZih0eXBlb2YgYy5mcmFnbWVudD09PSJzdHJpbmciJiZjLmZyYWdtZW50KXt0Kz0nIycrYy5mcmFnbWVudH1yZXR1cm4gdH07VS5idWlsZEhvc3Q9ZnVuY3Rpb24oYyl7dmFyIHQ9IiI7aWYoIWMuaG9zdG5hbWUpe3JldHVybiIifWVsc2UgaWYoVS5pcDZfZXhwcmVzc2lvbi50ZXN0KGMuaG9zdG5hbWUpKXtpZihjLnBvcnQpe3QrPSJbIitjLmhvc3RuYW1lKyJdOiIrYy5wb3J0fWVsc2V7dCs9Yy5ob3N0bmFtZX19ZWxzZXt0Kz1jLmhvc3RuYW1lO2lmKGMucG9ydCl7dCs9JzonK2MucG9ydH19cmV0dXJuIHR9O1UuYnVpbGRBdXRob3JpdHk9ZnVuY3Rpb24oYyl7cmV0dXJuIFUuYnVpbGRVc2VyaW5mbyhjKStVLmJ1aWxkSG9zdChjKX07VS5idWlsZFVzZXJpbmZvPWZ1bmN0aW9uKGMpe3ZhciB0PSIiO2lmKGMudXNlcm5hbWUpe3QrPVUuZW5jb2RlKGMudXNlcm5hbWUpO2lmKGMucGFzc3dvcmQpe3QrPSc6JytVLmVuY29kZShjLnBhc3N3b3JkKX10Kz0iQCJ9cmV0dXJuIHR9O1UuYnVpbGRRdWVyeT1mdW5jdGlvbihkLGMsZSl7dmFyIHQ9IiI7dmFyIGwscyxpLHY7Zm9yKHMgaW4gZCl7aWYoaC5jYWxsKGQscykmJnMpe2lmKGYoZFtzXSkpe2w9e307Zm9yKGk9MCx2PWRbc10ubGVuZ3RoO2k8djtpKyspe2lmKGRbc11baV0hPT11bmRlZmluZWQmJmxbZFtzXVtpXSsiIl09PT11bmRlZmluZWQpe3QrPSImIitVLmJ1aWxkUXVlcnlQYXJhbWV0ZXIocyxkW3NdW2ldLGUpO2lmKGMhPT10cnVlKXtsW2Rbc11baV0rIiJdPXRydWV9fX19ZWxzZSBpZihkW3NdIT09dW5kZWZpbmVkKXt0Kz0nJicrVS5idWlsZFF1ZXJ5UGFyYW1ldGVyKHMsZFtzXSxlKX19fXJldHVybiB0LnN1YnN0cmluZygxKX07VS5idWlsZFF1ZXJ5UGFyYW1ldGVyPWZ1bmN0aW9uKGMsdixlKXtyZXR1cm4gVS5lbmNvZGVRdWVyeShjLGUpKyh2IT09bnVsbD8iPSIrVS5lbmNvZGVRdWVyeSh2LGUpOiIiKX07VS5hZGRRdWVyeT1mdW5jdGlvbihkLGMsdil7aWYodHlwZW9mIGM9PT0ib2JqZWN0Iil7Zm9yKHZhciBlIGluIGMpe2lmKGguY2FsbChjLGUpKXtVLmFkZFF1ZXJ5KGQsZSxjW2VdKX19fWVsc2UgaWYodHlwZW9mIGM9PT0ic3RyaW5nIil7aWYoZFtjXT09PXVuZGVmaW5lZCl7ZFtjXT12O3JldHVybn1lbHNlIGlmKHR5cGVvZiBkW2NdPT09InN0cmluZyIpe2RbY109W2RbY11dfWlmKCFmKHYpKXt2PVt2XX1kW2NdPWRbY10uY29uY2F0KHYpfWVsc2V7dGhyb3cgbmV3IFR5cGVFcnJvcigiVVJJLmFkZFF1ZXJ5KCkgYWNjZXB0cyBhbiBvYmplY3QsIHN0cmluZyBhcyB0aGUgbmFtZSBwYXJhbWV0ZXIiKX19O1UucmVtb3ZlUXVlcnk9ZnVuY3Rpb24oZCxjLHYpe3ZhciBpLGwsZTtpZihmKGMpKXtmb3IoaT0wLGw9Yy5sZW5ndGg7aTxsO2krKyl7ZFtjW2ldXT11bmRlZmluZWR9fWVsc2UgaWYodHlwZW9mIGM9PT0ib2JqZWN0Iil7Zm9yKGUgaW4gYyl7aWYoaC5jYWxsKGMsZSkpe1UucmVtb3ZlUXVlcnkoZCxlLGNbZV0pfX19ZWxzZSBpZih0eXBlb2YgYz09PSJzdHJpbmciKXtpZih2IT09dW5kZWZpbmVkKXtpZihkW2NdPT09dil7ZFtjXT11bmRlZmluZWR9ZWxzZSBpZihmKGRbY10pKXtkW2NdPWooZFtjXSx2KX19ZWxzZXtkW2NdPXVuZGVmaW5lZH19ZWxzZXt0aHJvdyBuZXcgVHlwZUVycm9yKCJVUkkuYWRkUXVlcnkoKSBhY2NlcHRzIGFuIG9iamVjdCwgc3RyaW5nIGFzIHRoZSBmaXJzdCBwYXJhbWV0ZXIiKX19O1UuaGFzUXVlcnk9ZnVuY3Rpb24oZCxjLHYsZSl7aWYodHlwZW9mIGM9PT0ib2JqZWN0Iil7Zm9yKHZhciBpIGluIGMpe2lmKGguY2FsbChjLGkpKXtpZighVS5oYXNRdWVyeShkLGksY1tpXSkpe3JldHVybiBmYWxzZX19fXJldHVybiB0cnVlfWVsc2UgaWYodHlwZW9mIGMhPT0ic3RyaW5nIil7dGhyb3cgbmV3IFR5cGVFcnJvcigiVVJJLmhhc1F1ZXJ5KCkgYWNjZXB0cyBhbiBvYmplY3QsIHN0cmluZyBhcyB0aGUgbmFtZSBwYXJhbWV0ZXIiKX1zd2l0Y2goZyh2KSl7Y2FzZSdVbmRlZmluZWQnOnJldHVybiBjIGluIGQ7Y2FzZSdCb29sZWFuJzp2YXIgbD1Cb29sZWFuKGYoZFtjXSk/ZFtjXS5sZW5ndGg6ZFtjXSk7cmV0dXJuIHY9PT1sO2Nhc2UnRnVuY3Rpb24nOnJldHVybiEhdihkW2NdLGMsZCk7Y2FzZSdBcnJheSc6aWYoIWYoZFtjXSkpe3JldHVybiBmYWxzZX12YXIgcz1lP2s6bTtyZXR1cm4gcyhkW2NdLHYpO2Nhc2UnUmVnRXhwJzppZighZihkW2NdKSl7cmV0dXJuIEJvb2xlYW4oZFtjXSYmZFtjXS5tYXRjaCh2KSl9aWYoIWUpe3JldHVybiBmYWxzZX1yZXR1cm4gayhkW2NdLHYpO2Nhc2UnTnVtYmVyJzp2PVN0cmluZyh2KTtjYXNlJ1N0cmluZyc6aWYoIWYoZFtjXSkpe3JldHVybiBkW2NdPT09dn1pZighZSl7cmV0dXJuIGZhbHNlfXJldHVybiBrKGRbY10sdik7ZGVmYXVsdDp0aHJvdyBuZXcgVHlwZUVycm9yKCJVUkkuaGFzUXVlcnkoKSBhY2NlcHRzIHVuZGVmaW5lZCwgYm9vbGVhbiwgc3RyaW5nLCBudW1iZXIsIFJlZ0V4cCwgRnVuY3Rpb24gYXMgdGhlIHZhbHVlIHBhcmFtZXRlciIpfX07VS5jb21tb25QYXRoPWZ1bmN0aW9uKGMsdCl7dmFyIGw9TWF0aC5taW4oYy5sZW5ndGgsdC5sZW5ndGgpO3ZhciBkO2ZvcihkPTA7ZDxsO2QrKyl7aWYoYy5jaGFyQXQoZCkhPT10LmNoYXJBdChkKSl7ZC0tO2JyZWFrfX1pZihkPDEpe3JldHVybiBjLmNoYXJBdCgwKT09PXQuY2hhckF0KDApJiZjLmNoYXJBdCgwKT09PScvJz8nLyc6Jyd9aWYoYy5jaGFyQXQoZCkhPT0nLyd8fHQuY2hhckF0KGQpIT09Jy8nKXtkPWMuc3Vic3RyaW5nKDAsZCkubGFzdEluZGV4T2YoJy8nKX1yZXR1cm4gYy5zdWJzdHJpbmcoMCxkKzEpfTtVLndpdGhpblN0cmluZz1mdW5jdGlvbihzLGMpe3JldHVybiBzLnJlcGxhY2UoVS5maW5kX3VyaV9leHByZXNzaW9uLGMpfTtVLmVuc3VyZVZhbGlkSG9zdG5hbWU9ZnVuY3Rpb24odil7aWYodi5tYXRjaChVLmludmFsaWRfaG9zdG5hbWVfY2hhcmFjdGVycykpe2lmKCFhKXt0aHJvdyBuZXcgVHlwZUVycm9yKCJIb3N0bmFtZSAnIit2KyInIGNvbnRhaW5zIGNoYXJhY3RlcnMgb3RoZXIgdGhhbiBbQS1aMC05Li1dIGFuZCBQdW55Y29kZS5qcyBpcyBub3QgYXZhaWxhYmxlIil9aWYoYS50b0FTQ0lJKHYpLm1hdGNoKFUuaW52YWxpZF9ob3N0bmFtZV9jaGFyYWN0ZXJzKSl7dGhyb3cgbmV3IFR5cGVFcnJvcigiSG9zdG5hbWUgJyIrdisiJyBjb250YWlucyBjaGFyYWN0ZXJzIG90aGVyIHRoYW4gW0EtWjAtOS4tXSIpfX19O1Uubm9Db25mbGljdD1mdW5jdGlvbihjKXtpZihjKXt2YXIgZD17VVJJOnRoaXMubm9Db25mbGljdCgpfTtpZihVUklUZW1wbGF0ZSYmdHlwZW9mIFVSSVRlbXBsYXRlLm5vQ29uZmxpY3Q9PSJmdW5jdGlvbiIpe2QuVVJJVGVtcGxhdGU9VVJJVGVtcGxhdGUubm9Db25mbGljdCgpfWlmKEkmJnR5cGVvZiBJLm5vQ29uZmxpY3Q9PSJmdW5jdGlvbiIpe2QuSVB2Nj1JLm5vQ29uZmxpY3QoKX1pZihTZWNvbmRMZXZlbERvbWFpbnMmJnR5cGVvZiBTZWNvbmRMZXZlbERvbWFpbnMubm9Db25mbGljdD09ImZ1bmN0aW9uIil7ZC5TZWNvbmRMZXZlbERvbWFpbnM9U2Vjb25kTGV2ZWxEb21haW5zLm5vQ29uZmxpY3QoKX1yZXR1cm4gZH1lbHNlIGlmKHIuVVJJPT09dGhpcyl7ci5VUkk9X31yZXR1cm4gdGhpc307cC5idWlsZD1mdW5jdGlvbihkKXtpZihkPT09dHJ1ZSl7dGhpcy5fZGVmZXJyZWRfYnVpbGQ9dHJ1ZX1lbHNlIGlmKGQ9PT11bmRlZmluZWR8fHRoaXMuX2RlZmVycmVkX2J1aWxkKXt0aGlzLl9zdHJpbmc9VS5idWlsZCh0aGlzLl9wYXJ0cyk7dGhpcy5fZGVmZXJyZWRfYnVpbGQ9ZmFsc2V9cmV0dXJuIHRoaXN9O3AuY2xvbmU9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IFUodGhpcyl9O3AudmFsdWVPZj1wLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYnVpbGQoZmFsc2UpLl9zdHJpbmd9O3U9e3Byb3RvY29sOidwcm90b2NvbCcsdXNlcm5hbWU6J3VzZXJuYW1lJyxwYXNzd29yZDoncGFzc3dvcmQnLGhvc3RuYW1lOidob3N0bmFtZScscG9ydDoncG9ydCd9O3k9ZnVuY3Rpb24odyl7cmV0dXJuIGZ1bmN0aW9uKHYsYyl7aWYodj09PXVuZGVmaW5lZCl7cmV0dXJuIHRoaXMuX3BhcnRzW3ddfHwiIn1lbHNle3RoaXMuX3BhcnRzW3ddPXZ8fG51bGw7dGhpcy5idWlsZCghYyk7cmV0dXJuIHRoaXN9fX07Zm9yKHcgaW4gdSl7cFt3XT15KHVbd10pfXU9e3F1ZXJ5Oic/JyxmcmFnbWVudDonIyd9O3k9ZnVuY3Rpb24odyxjKXtyZXR1cm4gZnVuY3Rpb24odixkKXtpZih2PT09dW5kZWZpbmVkKXtyZXR1cm4gdGhpcy5fcGFydHNbd118fCIifWVsc2V7aWYodiE9PW51bGwpe3Y9disiIjtpZih2LmNoYXJBdCgwKT09PWMpe3Y9di5zdWJzdHJpbmcoMSl9fXRoaXMuX3BhcnRzW3ddPXY7dGhpcy5idWlsZCghZCk7cmV0dXJuIHRoaXN9fX07Zm9yKHcgaW4gdSl7cFt3XT15KHcsdVt3XSl9dT17c2VhcmNoOlsnPycsJ3F1ZXJ5J10saGFzaDpbJyMnLCdmcmFnbWVudCddfTt5PWZ1bmN0aW9uKHcsYyl7cmV0dXJuIGZ1bmN0aW9uKHYsZCl7dmFyIHQ9dGhpc1t3XSh2LGQpO3JldHVybiB0eXBlb2YgdD09PSJzdHJpbmciJiZ0Lmxlbmd0aD8oYyt0KTp0fX07Zm9yKHcgaW4gdSl7cFt3XT15KHVbd11bMV0sdVt3XVswXSl9cC5wYXRobmFtZT1mdW5jdGlvbih2LGMpe2lmKHY9PT11bmRlZmluZWR8fHY9PT10cnVlKXt2YXIgZD10aGlzLl9wYXJ0cy5wYXRofHwodGhpcy5fcGFydHMuaG9zdG5hbWU/Jy8nOicnKTtyZXR1cm4gdj9VLmRlY29kZVBhdGgoZCk6ZH1lbHNle3RoaXMuX3BhcnRzLnBhdGg9dj9VLnJlY29kZVBhdGgodik6Ii8iO3RoaXMuYnVpbGQoIWMpO3JldHVybiB0aGlzfX07cC5wYXRoPXAucGF0aG5hbWU7cC5ocmVmPWZ1bmN0aW9uKGMsZCl7dmFyIGU7aWYoYz09PXVuZGVmaW5lZCl7cmV0dXJuIHRoaXMudG9TdHJpbmcoKX10aGlzLl9zdHJpbmc9IiI7dGhpcy5fcGFydHM9VS5fcGFydHMoKTt2YXIgXz1jIGluc3RhbmNlb2YgVTt2YXIgaT10eXBlb2YgYz09PSJvYmplY3QiJiYoYy5ob3N0bmFtZXx8Yy5wYXRofHxjLnBhdGhuYW1lKTtpZihjLm5vZGVOYW1lKXt2YXIgbD1VLmdldERvbUF0dHJpYnV0ZShjKTtjPWNbbF18fCIiO2k9ZmFsc2V9aWYoIV8mJmkmJmMucGF0aG5hbWUhPT11bmRlZmluZWQpe2M9Yy50b1N0cmluZygpfWlmKHR5cGVvZiBjPT09InN0cmluZyIpe3RoaXMuX3BhcnRzPVUucGFyc2UoYyx0aGlzLl9wYXJ0cyl9ZWxzZSBpZihffHxpKXt2YXIgcz1fP2MuX3BhcnRzOmM7Zm9yKGUgaW4gcyl7aWYoaC5jYWxsKHRoaXMuX3BhcnRzLGUpKXt0aGlzLl9wYXJ0c1tlXT1zW2VdfX19ZWxzZXt0aHJvdyBuZXcgVHlwZUVycm9yKCJpbnZhbGlkIGlucHV0Iil9dGhpcy5idWlsZCghZCk7cmV0dXJuIHRoaXN9O3AuaXM9ZnVuY3Rpb24oYyl7dmFyIGk9ZmFsc2U7dmFyIGQ9ZmFsc2U7dmFyIGU9ZmFsc2U7dmFyIGw9ZmFsc2U7dmFyIHM9ZmFsc2U7dmFyIHQ9ZmFsc2U7dmFyIGE9ZmFsc2U7dmFyIHY9IXRoaXMuX3BhcnRzLnVybjtpZih0aGlzLl9wYXJ0cy5ob3N0bmFtZSl7dj1mYWxzZTtkPVUuaXA0X2V4cHJlc3Npb24udGVzdCh0aGlzLl9wYXJ0cy5ob3N0bmFtZSk7ZT1VLmlwNl9leHByZXNzaW9uLnRlc3QodGhpcy5fcGFydHMuaG9zdG5hbWUpO2k9ZHx8ZTtsPSFpO3M9bCYmUyYmUy5oYXModGhpcy5fcGFydHMuaG9zdG5hbWUpO3Q9bCYmVS5pZG5fZXhwcmVzc2lvbi50ZXN0KHRoaXMuX3BhcnRzLmhvc3RuYW1lKTthPWwmJlUucHVueWNvZGVfZXhwcmVzc2lvbi50ZXN0KHRoaXMuX3BhcnRzLmhvc3RuYW1lKX1zd2l0Y2goYy50b0xvd2VyQ2FzZSgpKXtjYXNlJ3JlbGF0aXZlJzpyZXR1cm4gdjtjYXNlJ2Fic29sdXRlJzpyZXR1cm4hdjtjYXNlJ2RvbWFpbic6Y2FzZSduYW1lJzpyZXR1cm4gbDtjYXNlJ3NsZCc6cmV0dXJuIHM7Y2FzZSdpcCc6cmV0dXJuIGk7Y2FzZSdpcDQnOmNhc2UnaXB2NCc6Y2FzZSdpbmV0NCc6cmV0dXJuIGQ7Y2FzZSdpcDYnOmNhc2UnaXB2Nic6Y2FzZSdpbmV0Nic6cmV0dXJuIGU7Y2FzZSdpZG4nOnJldHVybiB0O2Nhc2UndXJsJzpyZXR1cm4hdGhpcy5fcGFydHMudXJuO2Nhc2UndXJuJzpyZXR1cm4hIXRoaXMuX3BhcnRzLnVybjtjYXNlJ3B1bnljb2RlJzpyZXR1cm4gYX1yZXR1cm4gbnVsbH07dmFyIHo9cC5wcm90b2NvbDt2YXIgQT1wLnBvcnQ7dmFyIEI9cC5ob3N0bmFtZTtwLnByb3RvY29sPWZ1bmN0aW9uKHYsYyl7aWYodiE9PXVuZGVmaW5lZCl7aWYodil7dj12LnJlcGxhY2UoLzooXC9cLyk/JC8sJycpO2lmKHYubWF0Y2goL1teYS16QS16MC05XC4rLV0vKSl7dGhyb3cgbmV3IFR5cGVFcnJvcigiUHJvdG9jb2wgJyIrdisiJyBjb250YWlucyBjaGFyYWN0ZXJzIG90aGVyIHRoYW4gW0EtWjAtOS4rLV0iKX19fXJldHVybiB6LmNhbGwodGhpcyx2LGMpfTtwLnNjaGVtZT1wLnByb3RvY29sO3AucG9ydD1mdW5jdGlvbih2LGMpe2lmKHRoaXMuX3BhcnRzLnVybil7cmV0dXJuIHY9PT11bmRlZmluZWQ/Jyc6dGhpc31pZih2IT09dW5kZWZpbmVkKXtpZih2PT09MCl7dj1udWxsfWlmKHYpe3YrPSIiO2lmKHYuY2hhckF0KDApPT09IjoiKXt2PXYuc3Vic3RyaW5nKDEpfWlmKHYubWF0Y2goL1teMC05XS8pKXt0aHJvdyBuZXcgVHlwZUVycm9yKCJQb3J0ICciK3YrIicgY29udGFpbnMgY2hhcmFjdGVycyBvdGhlciB0aGFuIFswLTldIil9fX1yZXR1cm4gQS5jYWxsKHRoaXMsdixjKX07cC5ob3N0bmFtZT1mdW5jdGlvbih2LGMpe2lmKHRoaXMuX3BhcnRzLnVybil7cmV0dXJuIHY9PT11bmRlZmluZWQ/Jyc6dGhpc31pZih2IT09dW5kZWZpbmVkKXt2YXIgeD17fTtVLnBhcnNlSG9zdCh2LHgpO3Y9eC5ob3N0bmFtZX1yZXR1cm4gQi5jYWxsKHRoaXMsdixjKX07cC5ob3N0PWZ1bmN0aW9uKHYsYyl7aWYodGhpcy5fcGFydHMudXJuKXtyZXR1cm4gdj09PXVuZGVmaW5lZD8nJzp0aGlzfWlmKHY9PT11bmRlZmluZWQpe3JldHVybiB0aGlzLl9wYXJ0cy5ob3N0bmFtZT9VLmJ1aWxkSG9zdCh0aGlzLl9wYXJ0cyk6IiJ9ZWxzZXtVLnBhcnNlSG9zdCh2LHRoaXMuX3BhcnRzKTt0aGlzLmJ1aWxkKCFjKTtyZXR1cm4gdGhpc319O3AuYXV0aG9yaXR5PWZ1bmN0aW9uKHYsYyl7aWYodGhpcy5fcGFydHMudXJuKXtyZXR1cm4gdj09PXVuZGVmaW5lZD8nJzp0aGlzfWlmKHY9PT11bmRlZmluZWQpe3JldHVybiB0aGlzLl9wYXJ0cy5ob3N0bmFtZT9VLmJ1aWxkQXV0aG9yaXR5KHRoaXMuX3BhcnRzKToiIn1lbHNle1UucGFyc2VBdXRob3JpdHkodix0aGlzLl9wYXJ0cyk7dGhpcy5idWlsZCghYyk7cmV0dXJuIHRoaXN9fTtwLnVzZXJpbmZvPWZ1bmN0aW9uKHYsYyl7aWYodGhpcy5fcGFydHMudXJuKXtyZXR1cm4gdj09PXVuZGVmaW5lZD8nJzp0aGlzfWlmKHY9PT11bmRlZmluZWQpe2lmKCF0aGlzLl9wYXJ0cy51c2VybmFtZSl7cmV0dXJuIiJ9dmFyIHQ9VS5idWlsZFVzZXJpbmZvKHRoaXMuX3BhcnRzKTtyZXR1cm4gdC5zdWJzdHJpbmcoMCx0Lmxlbmd0aC0xKX1lbHNle2lmKHZbdi5sZW5ndGgtMV0hPT0nQCcpe3YrPSdAJ31VLnBhcnNlVXNlcmluZm8odix0aGlzLl9wYXJ0cyk7dGhpcy5idWlsZCghYyk7cmV0dXJuIHRoaXN9fTtwLnJlc291cmNlPWZ1bmN0aW9uKHYsYyl7dmFyIGQ7aWYodj09PXVuZGVmaW5lZCl7cmV0dXJuIHRoaXMucGF0aCgpK3RoaXMuc2VhcmNoKCkrdGhpcy5oYXNoKCl9ZD1VLnBhcnNlKHYpO3RoaXMuX3BhcnRzLnBhdGg9ZC5wYXRoO3RoaXMuX3BhcnRzLnF1ZXJ5PWQucXVlcnk7dGhpcy5fcGFydHMuZnJhZ21lbnQ9ZC5mcmFnbWVudDt0aGlzLmJ1aWxkKCFjKTtyZXR1cm4gdGhpc307cC5zdWJkb21haW49ZnVuY3Rpb24odixjKXtpZih0aGlzLl9wYXJ0cy51cm4pe3JldHVybiB2PT09dW5kZWZpbmVkPycnOnRoaXN9aWYodj09PXVuZGVmaW5lZCl7aWYoIXRoaXMuX3BhcnRzLmhvc3RuYW1lfHx0aGlzLmlzKCdJUCcpKXtyZXR1cm4iIn12YXIgZD10aGlzLl9wYXJ0cy5ob3N0bmFtZS5sZW5ndGgtdGhpcy5kb21haW4oKS5sZW5ndGgtMTtyZXR1cm4gdGhpcy5fcGFydHMuaG9zdG5hbWUuc3Vic3RyaW5nKDAsZCl8fCIifWVsc2V7dmFyIGU9dGhpcy5fcGFydHMuaG9zdG5hbWUubGVuZ3RoLXRoaXMuZG9tYWluKCkubGVuZ3RoO3ZhciBzPXRoaXMuX3BhcnRzLmhvc3RuYW1lLnN1YnN0cmluZygwLGUpO3ZhciBpPW5ldyBSZWdFeHAoJ14nK2IocykpO2lmKHYmJnYuY2hhckF0KHYubGVuZ3RoLTEpIT09Jy4nKXt2Kz0iLiJ9aWYodil7VS5lbnN1cmVWYWxpZEhvc3RuYW1lKHYpfXRoaXMuX3BhcnRzLmhvc3RuYW1lPXRoaXMuX3BhcnRzLmhvc3RuYW1lLnJlcGxhY2UoaSx2KTt0aGlzLmJ1aWxkKCFjKTtyZXR1cm4gdGhpc319O3AuZG9tYWluPWZ1bmN0aW9uKHYsYyl7aWYodGhpcy5fcGFydHMudXJuKXtyZXR1cm4gdj09PXVuZGVmaW5lZD8nJzp0aGlzfWlmKHR5cGVvZiB2PT09J2Jvb2xlYW4nKXtjPXY7dj11bmRlZmluZWR9aWYodj09PXVuZGVmaW5lZCl7aWYoIXRoaXMuX3BhcnRzLmhvc3RuYW1lfHx0aGlzLmlzKCdJUCcpKXtyZXR1cm4iIn12YXIgdD10aGlzLl9wYXJ0cy5ob3N0bmFtZS5tYXRjaCgvXC4vZyk7aWYodCYmdC5sZW5ndGg8Mil7cmV0dXJuIHRoaXMuX3BhcnRzLmhvc3RuYW1lfXZhciBlPXRoaXMuX3BhcnRzLmhvc3RuYW1lLmxlbmd0aC10aGlzLnRsZChjKS5sZW5ndGgtMTtlPXRoaXMuX3BhcnRzLmhvc3RuYW1lLmxhc3RJbmRleE9mKCcuJyxlLTEpKzE7cmV0dXJuIHRoaXMuX3BhcnRzLmhvc3RuYW1lLnN1YnN0cmluZyhlKXx8IiJ9ZWxzZXtpZighdil7dGhyb3cgbmV3IFR5cGVFcnJvcigiY2Fubm90IHNldCBkb21haW4gZW1wdHkiKX1VLmVuc3VyZVZhbGlkSG9zdG5hbWUodik7aWYoIXRoaXMuX3BhcnRzLmhvc3RuYW1lfHx0aGlzLmlzKCdJUCcpKXt0aGlzLl9wYXJ0cy5ob3N0bmFtZT12fWVsc2V7dmFyIGQ9bmV3IFJlZ0V4cChiKHRoaXMuZG9tYWluKCkpKyIkIik7dGhpcy5fcGFydHMuaG9zdG5hbWU9dGhpcy5fcGFydHMuaG9zdG5hbWUucmVwbGFjZShkLHYpfXRoaXMuYnVpbGQoIWMpO3JldHVybiB0aGlzfX07cC50bGQ9ZnVuY3Rpb24odixjKXtpZih0aGlzLl9wYXJ0cy51cm4pe3JldHVybiB2PT09dW5kZWZpbmVkPycnOnRoaXN9aWYodHlwZW9mIHY9PT0nYm9vbGVhbicpe2M9djt2PXVuZGVmaW5lZH1pZih2PT09dW5kZWZpbmVkKXtpZighdGhpcy5fcGFydHMuaG9zdG5hbWV8fHRoaXMuaXMoJ0lQJykpe3JldHVybiIifXZhciBkPXRoaXMuX3BhcnRzLmhvc3RuYW1lLmxhc3RJbmRleE9mKCcuJyk7dmFyIHQ9dGhpcy5fcGFydHMuaG9zdG5hbWUuc3Vic3RyaW5nKGQrMSk7aWYoYyE9PXRydWUmJlMmJlMubGlzdFt0LnRvTG93ZXJDYXNlKCldKXtyZXR1cm4gUy5nZXQodGhpcy5fcGFydHMuaG9zdG5hbWUpfHx0fXJldHVybiB0fWVsc2V7dmFyIGU7aWYoIXYpe3Rocm93IG5ldyBUeXBlRXJyb3IoImNhbm5vdCBzZXQgVExEIGVtcHR5Iil9ZWxzZSBpZih2Lm1hdGNoKC9bXmEtekEtWjAtOS1dLykpe2lmKFMmJlMuaXModikpe2U9bmV3IFJlZ0V4cChiKHRoaXMudGxkKCkpKyIkIik7dGhpcy5fcGFydHMuaG9zdG5hbWU9dGhpcy5fcGFydHMuaG9zdG5hbWUucmVwbGFjZShlLHYpfWVsc2V7dGhyb3cgbmV3IFR5cGVFcnJvcigiVExEICciK3YrIicgY29udGFpbnMgY2hhcmFjdGVycyBvdGhlciB0aGFuIFtBLVowLTldIil9fWVsc2UgaWYoIXRoaXMuX3BhcnRzLmhvc3RuYW1lfHx0aGlzLmlzKCdJUCcpKXt0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoImNhbm5vdCBzZXQgVExEIG9uIG5vbi1kb21haW4gaG9zdCIpfWVsc2V7ZT1uZXcgUmVnRXhwKGIodGhpcy50bGQoKSkrIiQiKTt0aGlzLl9wYXJ0cy5ob3N0bmFtZT10aGlzLl9wYXJ0cy5ob3N0bmFtZS5yZXBsYWNlKGUsdil9dGhpcy5idWlsZCghYyk7cmV0dXJuIHRoaXN9fTtwLmRpcmVjdG9yeT1mdW5jdGlvbih2LGMpe2lmKHRoaXMuX3BhcnRzLnVybil7cmV0dXJuIHY9PT11bmRlZmluZWQ/Jyc6dGhpc31pZih2PT09dW5kZWZpbmVkfHx2PT09dHJ1ZSl7aWYoIXRoaXMuX3BhcnRzLnBhdGgmJiF0aGlzLl9wYXJ0cy5ob3N0bmFtZSl7cmV0dXJuJyd9aWYodGhpcy5fcGFydHMucGF0aD09PScvJyl7cmV0dXJuJy8nfXZhciBkPXRoaXMuX3BhcnRzLnBhdGgubGVuZ3RoLXRoaXMuZmlsZW5hbWUoKS5sZW5ndGgtMTt2YXIgaT10aGlzLl9wYXJ0cy5wYXRoLnN1YnN0cmluZygwLGQpfHwodGhpcy5fcGFydHMuaG9zdG5hbWU/Ii8iOiIiKTtyZXR1cm4gdj9VLmRlY29kZVBhdGgoaSk6aX1lbHNle3ZhciBlPXRoaXMuX3BhcnRzLnBhdGgubGVuZ3RoLXRoaXMuZmlsZW5hbWUoKS5sZW5ndGg7dmFyIGw9dGhpcy5fcGFydHMucGF0aC5zdWJzdHJpbmcoMCxlKTt2YXIgcz1uZXcgUmVnRXhwKCdeJytiKGwpKTtpZighdGhpcy5pcygncmVsYXRpdmUnKSl7aWYoIXYpe3Y9Jy8nfWlmKHYuY2hhckF0KDApIT09Jy8nKXt2PSIvIit2fX1pZih2JiZ2LmNoYXJBdCh2Lmxlbmd0aC0xKSE9PScvJyl7dis9Jy8nfXY9VS5yZWNvZGVQYXRoKHYpO3RoaXMuX3BhcnRzLnBhdGg9dGhpcy5fcGFydHMucGF0aC5yZXBsYWNlKHMsdik7dGhpcy5idWlsZCghYyk7cmV0dXJuIHRoaXN9fTtwLmZpbGVuYW1lPWZ1bmN0aW9uKHYsYyl7aWYodGhpcy5fcGFydHMudXJuKXtyZXR1cm4gdj09PXVuZGVmaW5lZD8nJzp0aGlzfWlmKHY9PT11bmRlZmluZWR8fHY9PT10cnVlKXtpZighdGhpcy5fcGFydHMucGF0aHx8dGhpcy5fcGFydHMucGF0aD09PScvJyl7cmV0dXJuIiJ9dmFyIGQ9dGhpcy5fcGFydHMucGF0aC5sYXN0SW5kZXhPZignLycpO3ZhciBlPXRoaXMuX3BhcnRzLnBhdGguc3Vic3RyaW5nKGQrMSk7cmV0dXJuIHY/VS5kZWNvZGVQYXRoU2VnbWVudChlKTplfWVsc2V7dmFyIGk9ZmFsc2U7aWYodi5jaGFyQXQoMCk9PT0nLycpe3Y9di5zdWJzdHJpbmcoMSl9aWYodi5tYXRjaCgvXC4/XC8vKSl7aT10cnVlfXZhciBsPW5ldyBSZWdFeHAoYih0aGlzLmZpbGVuYW1lKCkpKyIkIik7dj1VLnJlY29kZVBhdGgodik7dGhpcy5fcGFydHMucGF0aD10aGlzLl9wYXJ0cy5wYXRoLnJlcGxhY2UobCx2KTtpZihpKXt0aGlzLm5vcm1hbGl6ZVBhdGgoYyl9ZWxzZXt0aGlzLmJ1aWxkKCFjKX1yZXR1cm4gdGhpc319O3Auc3VmZml4PWZ1bmN0aW9uKHYsYyl7aWYodGhpcy5fcGFydHMudXJuKXtyZXR1cm4gdj09PXVuZGVmaW5lZD8nJzp0aGlzfWlmKHY9PT11bmRlZmluZWR8fHY9PT10cnVlKXtpZighdGhpcy5fcGFydHMucGF0aHx8dGhpcy5fcGFydHMucGF0aD09PScvJyl7cmV0dXJuIiJ9dmFyIGQ9dGhpcy5maWxlbmFtZSgpO3ZhciBlPWQubGFzdEluZGV4T2YoJy4nKTt2YXIgcyxpO2lmKGU9PT0tMSl7cmV0dXJuIiJ9cz1kLnN1YnN0cmluZyhlKzEpO2k9KC9eW2EtejAtOSVdKyQvaSkudGVzdChzKT9zOiIiO3JldHVybiB2P1UuZGVjb2RlUGF0aFNlZ21lbnQoaSk6aX1lbHNle2lmKHYuY2hhckF0KDApPT09Jy4nKXt2PXYuc3Vic3RyaW5nKDEpfXZhciBsPXRoaXMuc3VmZml4KCk7dmFyIHQ7aWYoIWwpe2lmKCF2KXtyZXR1cm4gdGhpc310aGlzLl9wYXJ0cy5wYXRoKz0nLicrVS5yZWNvZGVQYXRoKHYpfWVsc2UgaWYoIXYpe3Q9bmV3IFJlZ0V4cChiKCIuIitsKSsiJCIpfWVsc2V7dD1uZXcgUmVnRXhwKGIobCkrIiQiKX1pZih0KXt2PVUucmVjb2RlUGF0aCh2KTt0aGlzLl9wYXJ0cy5wYXRoPXRoaXMuX3BhcnRzLnBhdGgucmVwbGFjZSh0LHYpfXRoaXMuYnVpbGQoIWMpO3JldHVybiB0aGlzfX07cC5zZWdtZW50PWZ1bmN0aW9uKHMsdixjKXt2YXIgZD10aGlzLl9wYXJ0cy51cm4/JzonOicvJzt2YXIgZT10aGlzLnBhdGgoKTt2YXIgdD1lLnN1YnN0cmluZygwLDEpPT09Jy8nO3ZhciB4PWUuc3BsaXQoZCk7aWYocyE9PXVuZGVmaW5lZCYmdHlwZW9mIHMhPT0nbnVtYmVyJyl7Yz12O3Y9cztzPXVuZGVmaW5lZH1pZihzIT09dW5kZWZpbmVkJiZ0eXBlb2YgcyE9PSdudW1iZXInKXt0aHJvdyBuZXcgRXJyb3IoIkJhZCBzZWdtZW50ICciK3MrIicsIG11c3QgYmUgMC1iYXNlZCBpbnRlZ2VyIil9aWYodCl7eC5zaGlmdCgpfWlmKHM8MCl7cz1NYXRoLm1heCh4Lmxlbmd0aCtzLDApfWlmKHY9PT11bmRlZmluZWQpe3JldHVybiBzPT09dW5kZWZpbmVkP3g6eFtzXX1lbHNlIGlmKHM9PT1udWxsfHx4W3NdPT09dW5kZWZpbmVkKXtpZihmKHYpKXt4PVtdO2Zvcih2YXIgaT0wLGw9di5sZW5ndGg7aTxsO2krKyl7aWYoIXZbaV0ubGVuZ3RoJiYoIXgubGVuZ3RofHwheFt4Lmxlbmd0aC0xXS5sZW5ndGgpKXtjb250aW51ZX1pZih4Lmxlbmd0aCYmIXhbeC5sZW5ndGgtMV0ubGVuZ3RoKXt4LnBvcCgpfXgucHVzaCh2W2ldKX19ZWxzZSBpZih2fHwodHlwZW9mIHY9PT0ic3RyaW5nIikpe2lmKHhbeC5sZW5ndGgtMV09PT0iIil7eFt4Lmxlbmd0aC0xXT12fWVsc2V7eC5wdXNoKHYpfX19ZWxzZXtpZih2fHwodHlwZW9mIHY9PT0ic3RyaW5nIiYmdi5sZW5ndGgpKXt4W3NdPXZ9ZWxzZXt4LnNwbGljZShzLDEpfX1pZih0KXt4LnVuc2hpZnQoIiIpfXJldHVybiB0aGlzLnBhdGgoeC5qb2luKGQpLGMpfTtwLnNlZ21lbnRDb2RlZD1mdW5jdGlvbihzLHYsYyl7dmFyIGQsaSxsO2lmKHR5cGVvZiBzIT09J251bWJlcicpe2M9djt2PXM7cz11bmRlZmluZWR9aWYodj09PXVuZGVmaW5lZCl7ZD10aGlzLnNlZ21lbnQocyx2LGMpO2lmKCFmKGQpKXtkPWQhPT11bmRlZmluZWQ/VS5kZWNvZGUoZCk6dW5kZWZpbmVkfWVsc2V7Zm9yKGk9MCxsPWQubGVuZ3RoO2k8bDtpKyspe2RbaV09VS5kZWNvZGUoZFtpXSl9fXJldHVybiBkfWlmKCFmKHYpKXt2PXR5cGVvZiB2PT09J3N0cmluZyc/VS5lbmNvZGUodik6dn1lbHNle2ZvcihpPTAsbD12Lmxlbmd0aDtpPGw7aSsrKXt2W2ldPVUuZGVjb2RlKHZbaV0pfX1yZXR1cm4gdGhpcy5zZWdtZW50KHMsdixjKX07dmFyIHE9cC5xdWVyeTtwLnF1ZXJ5PWZ1bmN0aW9uKHYsYyl7aWYodj09PXRydWUpe3JldHVybiBVLnBhcnNlUXVlcnkodGhpcy5fcGFydHMucXVlcnksdGhpcy5fcGFydHMuZXNjYXBlUXVlcnlTcGFjZSl9ZWxzZSBpZih0eXBlb2Ygdj09PSJmdW5jdGlvbiIpe3ZhciBkPVUucGFyc2VRdWVyeSh0aGlzLl9wYXJ0cy5xdWVyeSx0aGlzLl9wYXJ0cy5lc2NhcGVRdWVyeVNwYWNlKTt2YXIgZT12LmNhbGwodGhpcyxkKTt0aGlzLl9wYXJ0cy5xdWVyeT1VLmJ1aWxkUXVlcnkoZXx8ZCx0aGlzLl9wYXJ0cy5kdXBsaWNhdGVRdWVyeVBhcmFtZXRlcnMsdGhpcy5fcGFydHMuZXNjYXBlUXVlcnlTcGFjZSk7dGhpcy5idWlsZCghYyk7cmV0dXJuIHRoaXN9ZWxzZSBpZih2IT09dW5kZWZpbmVkJiZ0eXBlb2YgdiE9PSJzdHJpbmciKXt0aGlzLl9wYXJ0cy5xdWVyeT1VLmJ1aWxkUXVlcnkodix0aGlzLl9wYXJ0cy5kdXBsaWNhdGVRdWVyeVBhcmFtZXRlcnMsdGhpcy5fcGFydHMuZXNjYXBlUXVlcnlTcGFjZSk7dGhpcy5idWlsZCghYyk7cmV0dXJuIHRoaXN9ZWxzZXtyZXR1cm4gcS5jYWxsKHRoaXMsdixjKX19O3Auc2V0UXVlcnk9ZnVuY3Rpb24oYyx2LGQpe3ZhciBlPVUucGFyc2VRdWVyeSh0aGlzLl9wYXJ0cy5xdWVyeSx0aGlzLl9wYXJ0cy5lc2NhcGVRdWVyeVNwYWNlKTtpZih0eXBlb2YgYz09PSJvYmplY3QiKXtmb3IodmFyIGkgaW4gYyl7aWYoaC5jYWxsKGMsaSkpe2VbaV09Y1tpXX19fWVsc2UgaWYodHlwZW9mIGM9PT0ic3RyaW5nIil7ZVtjXT12IT09dW5kZWZpbmVkP3Y6bnVsbH1lbHNle3Rocm93IG5ldyBUeXBlRXJyb3IoIlVSSS5hZGRRdWVyeSgpIGFjY2VwdHMgYW4gb2JqZWN0LCBzdHJpbmcgYXMgdGhlIG5hbWUgcGFyYW1ldGVyIil9dGhpcy5fcGFydHMucXVlcnk9VS5idWlsZFF1ZXJ5KGUsdGhpcy5fcGFydHMuZHVwbGljYXRlUXVlcnlQYXJhbWV0ZXJzLHRoaXMuX3BhcnRzLmVzY2FwZVF1ZXJ5U3BhY2UpO2lmKHR5cGVvZiBjIT09InN0cmluZyIpe2Q9dn10aGlzLmJ1aWxkKCFkKTtyZXR1cm4gdGhpc307cC5hZGRRdWVyeT1mdW5jdGlvbihjLHYsZCl7dmFyIGU9VS5wYXJzZVF1ZXJ5KHRoaXMuX3BhcnRzLnF1ZXJ5LHRoaXMuX3BhcnRzLmVzY2FwZVF1ZXJ5U3BhY2UpO1UuYWRkUXVlcnkoZSxjLHY9PT11bmRlZmluZWQ/bnVsbDp2KTt0aGlzLl9wYXJ0cy5xdWVyeT1VLmJ1aWxkUXVlcnkoZSx0aGlzLl9wYXJ0cy5kdXBsaWNhdGVRdWVyeVBhcmFtZXRlcnMsdGhpcy5fcGFydHMuZXNjYXBlUXVlcnlTcGFjZSk7aWYodHlwZW9mIGMhPT0ic3RyaW5nIil7ZD12fXRoaXMuYnVpbGQoIWQpO3JldHVybiB0aGlzfTtwLnJlbW92ZVF1ZXJ5PWZ1bmN0aW9uKGMsdixkKXt2YXIgZT1VLnBhcnNlUXVlcnkodGhpcy5fcGFydHMucXVlcnksdGhpcy5fcGFydHMuZXNjYXBlUXVlcnlTcGFjZSk7VS5yZW1vdmVRdWVyeShlLGMsdik7dGhpcy5fcGFydHMucXVlcnk9VS5idWlsZFF1ZXJ5KGUsdGhpcy5fcGFydHMuZHVwbGljYXRlUXVlcnlQYXJhbWV0ZXJzLHRoaXMuX3BhcnRzLmVzY2FwZVF1ZXJ5U3BhY2UpO2lmKHR5cGVvZiBjIT09InN0cmluZyIpe2Q9dn10aGlzLmJ1aWxkKCFkKTtyZXR1cm4gdGhpc307cC5oYXNRdWVyeT1mdW5jdGlvbihjLHYsZCl7dmFyIGU9VS5wYXJzZVF1ZXJ5KHRoaXMuX3BhcnRzLnF1ZXJ5LHRoaXMuX3BhcnRzLmVzY2FwZVF1ZXJ5U3BhY2UpO3JldHVybiBVLmhhc1F1ZXJ5KGUsYyx2LGQpfTtwLnNldFNlYXJjaD1wLnNldFF1ZXJ5O3AuYWRkU2VhcmNoPXAuYWRkUXVlcnk7cC5yZW1vdmVTZWFyY2g9cC5yZW1vdmVRdWVyeTtwLmhhc1NlYXJjaD1wLmhhc1F1ZXJ5O3Aubm9ybWFsaXplPWZ1bmN0aW9uKCl7aWYodGhpcy5fcGFydHMudXJuKXtyZXR1cm4gdGhpcy5ub3JtYWxpemVQcm90b2NvbChmYWxzZSkubm9ybWFsaXplUXVlcnkoZmFsc2UpLm5vcm1hbGl6ZUZyYWdtZW50KGZhbHNlKS5idWlsZCgpfXJldHVybiB0aGlzLm5vcm1hbGl6ZVByb3RvY29sKGZhbHNlKS5ub3JtYWxpemVIb3N0bmFtZShmYWxzZSkubm9ybWFsaXplUG9ydChmYWxzZSkubm9ybWFsaXplUGF0aChmYWxzZSkubm9ybWFsaXplUXVlcnkoZmFsc2UpLm5vcm1hbGl6ZUZyYWdtZW50KGZhbHNlKS5idWlsZCgpfTtwLm5vcm1hbGl6ZVByb3RvY29sPWZ1bmN0aW9uKGMpe2lmKHR5cGVvZiB0aGlzLl9wYXJ0cy5wcm90b2NvbD09PSJzdHJpbmciKXt0aGlzLl9wYXJ0cy5wcm90b2NvbD10aGlzLl9wYXJ0cy5wcm90b2NvbC50b0xvd2VyQ2FzZSgpO3RoaXMuYnVpbGQoIWMpfXJldHVybiB0aGlzfTtwLm5vcm1hbGl6ZUhvc3RuYW1lPWZ1bmN0aW9uKGMpe2lmKHRoaXMuX3BhcnRzLmhvc3RuYW1lKXtpZih0aGlzLmlzKCdJRE4nKSYmYSl7dGhpcy5fcGFydHMuaG9zdG5hbWU9YS50b0FTQ0lJKHRoaXMuX3BhcnRzLmhvc3RuYW1lKX1lbHNlIGlmKHRoaXMuaXMoJ0lQdjYnKSYmSSl7dGhpcy5fcGFydHMuaG9zdG5hbWU9SS5iZXN0KHRoaXMuX3BhcnRzLmhvc3RuYW1lKX10aGlzLl9wYXJ0cy5ob3N0bmFtZT10aGlzLl9wYXJ0cy5ob3N0bmFtZS50b0xvd2VyQ2FzZSgpO3RoaXMuYnVpbGQoIWMpfXJldHVybiB0aGlzfTtwLm5vcm1hbGl6ZVBvcnQ9ZnVuY3Rpb24oYyl7aWYodHlwZW9mIHRoaXMuX3BhcnRzLnByb3RvY29sPT09InN0cmluZyImJnRoaXMuX3BhcnRzLnBvcnQ9PT1VLmRlZmF1bHRQb3J0c1t0aGlzLl9wYXJ0cy5wcm90b2NvbF0pe3RoaXMuX3BhcnRzLnBvcnQ9bnVsbDt0aGlzLmJ1aWxkKCFjKX1yZXR1cm4gdGhpc307cC5ub3JtYWxpemVQYXRoPWZ1bmN0aW9uKGMpe2lmKHRoaXMuX3BhcnRzLnVybil7cmV0dXJuIHRoaXN9aWYoIXRoaXMuX3BhcnRzLnBhdGh8fHRoaXMuX3BhcnRzLnBhdGg9PT0nLycpe3JldHVybiB0aGlzfXZhciBkO3ZhciBlPXRoaXMuX3BhcnRzLnBhdGg7dmFyIGksbDtpZihlLmNoYXJBdCgwKSE9PScvJyl7ZD10cnVlO2U9Jy8nK2V9ZT1lLnJlcGxhY2UoLyhcLyhcLlwvKSspfChcL1wuJCkvZywnLycpLnJlcGxhY2UoL1wvezIsfS9nLCcvJyk7d2hpbGUodHJ1ZSl7aT1lLmluZGV4T2YoJy8uLi8nKTtpZihpPT09LTEpe2JyZWFrfWVsc2UgaWYoaT09PTApe2U9ZS5zdWJzdHJpbmcoMyk7YnJlYWt9bD1lLnN1YnN0cmluZygwLGkpLmxhc3RJbmRleE9mKCcvJyk7aWYobD09PS0xKXtsPWl9ZT1lLnN1YnN0cmluZygwLGwpK2Uuc3Vic3RyaW5nKGkrMyl9aWYoZCYmdGhpcy5pcygncmVsYXRpdmUnKSl7ZT1lLnN1YnN0cmluZygxKX1lPVUucmVjb2RlUGF0aChlKTt0aGlzLl9wYXJ0cy5wYXRoPWU7dGhpcy5idWlsZCghYyk7cmV0dXJuIHRoaXN9O3Aubm9ybWFsaXplUGF0aG5hbWU9cC5ub3JtYWxpemVQYXRoO3Aubm9ybWFsaXplUXVlcnk9ZnVuY3Rpb24oYyl7aWYodHlwZW9mIHRoaXMuX3BhcnRzLnF1ZXJ5PT09InN0cmluZyIpe2lmKCF0aGlzLl9wYXJ0cy5xdWVyeS5sZW5ndGgpe3RoaXMuX3BhcnRzLnF1ZXJ5PW51bGx9ZWxzZXt0aGlzLnF1ZXJ5KFUucGFyc2VRdWVyeSh0aGlzLl9wYXJ0cy5xdWVyeSx0aGlzLl9wYXJ0cy5lc2NhcGVRdWVyeVNwYWNlKSl9dGhpcy5idWlsZCghYyl9cmV0dXJuIHRoaXN9O3Aubm9ybWFsaXplRnJhZ21lbnQ9ZnVuY3Rpb24oYyl7aWYoIXRoaXMuX3BhcnRzLmZyYWdtZW50KXt0aGlzLl9wYXJ0cy5mcmFnbWVudD1udWxsO3RoaXMuYnVpbGQoIWMpfXJldHVybiB0aGlzfTtwLm5vcm1hbGl6ZVNlYXJjaD1wLm5vcm1hbGl6ZVF1ZXJ5O3Aubm9ybWFsaXplSGFzaD1wLm5vcm1hbGl6ZUZyYWdtZW50O3AuaXNvODg1OT1mdW5jdGlvbigpe3ZhciBlPVUuZW5jb2RlO3ZhciBkPVUuZGVjb2RlO1UuZW5jb2RlPWVzY2FwZTtVLmRlY29kZT1kZWNvZGVVUklDb21wb25lbnQ7dGhpcy5ub3JtYWxpemUoKTtVLmVuY29kZT1lO1UuZGVjb2RlPWQ7cmV0dXJuIHRoaXN9O3AudW5pY29kZT1mdW5jdGlvbigpe3ZhciBlPVUuZW5jb2RlO3ZhciBkPVUuZGVjb2RlO1UuZW5jb2RlPW87VS5kZWNvZGU9dW5lc2NhcGU7dGhpcy5ub3JtYWxpemUoKTtVLmVuY29kZT1lO1UuZGVjb2RlPWQ7cmV0dXJuIHRoaXN9O3AucmVhZGFibGU9ZnVuY3Rpb24oKXt2YXIgYz10aGlzLmNsb25lKCk7Yy51c2VybmFtZSgiIikucGFzc3dvcmQoIiIpLm5vcm1hbGl6ZSgpO3ZhciB0PScnO2lmKGMuX3BhcnRzLnByb3RvY29sKXt0Kz1jLl9wYXJ0cy5wcm90b2NvbCsnOi8vJ31pZihjLl9wYXJ0cy5ob3N0bmFtZSl7aWYoYy5pcygncHVueWNvZGUnKSYmYSl7dCs9YS50b1VuaWNvZGUoYy5fcGFydHMuaG9zdG5hbWUpO2lmKGMuX3BhcnRzLnBvcnQpe3QrPSI6IitjLl9wYXJ0cy5wb3J0fX1lbHNle3QrPWMuaG9zdCgpfX1pZihjLl9wYXJ0cy5ob3N0bmFtZSYmYy5fcGFydHMucGF0aCYmYy5fcGFydHMucGF0aC5jaGFyQXQoMCkhPT0nLycpe3QrPScvJ310Kz1jLnBhdGgodHJ1ZSk7aWYoYy5fcGFydHMucXVlcnkpe3ZhciBxPScnO2Zvcih2YXIgaT0wLGQ9Yy5fcGFydHMucXVlcnkuc3BsaXQoJyYnKSxsPWQubGVuZ3RoO2k8bDtpKyspe3ZhciBlPShkW2ldfHwiIikuc3BsaXQoJz0nKTtxKz0nJicrVS5kZWNvZGVRdWVyeShlWzBdLHRoaXMuX3BhcnRzLmVzY2FwZVF1ZXJ5U3BhY2UpLnJlcGxhY2UoLyYvZywnJTI2Jyk7aWYoZVsxXSE9PXVuZGVmaW5lZCl7cSs9Ij0iK1UuZGVjb2RlUXVlcnkoZVsxXSx0aGlzLl9wYXJ0cy5lc2NhcGVRdWVyeVNwYWNlKS5yZXBsYWNlKC8mL2csJyUyNicpfX10Kz0nPycrcS5zdWJzdHJpbmcoMSl9dCs9VS5kZWNvZGVRdWVyeShjLmhhc2goKSx0cnVlKTtyZXR1cm4gdH07cC5hYnNvbHV0ZVRvPWZ1bmN0aW9uKGMpe3ZhciBkPXRoaXMuY2xvbmUoKTt2YXIgZT1bJ3Byb3RvY29sJywndXNlcm5hbWUnLCdwYXNzd29yZCcsJ2hvc3RuYW1lJywncG9ydCddO3ZhciBsLGkscDtpZih0aGlzLl9wYXJ0cy51cm4pe3Rocm93IG5ldyBFcnJvcignVVJOcyBkbyBub3QgaGF2ZSBhbnkgZ2VuZXJhbGx5IGRlZmluZWQgaGllcmFyY2hpY2FsIGNvbXBvbmVudHMnKX1pZighKGMgaW5zdGFuY2VvZiBVKSl7Yz1uZXcgVShjKX1pZighZC5fcGFydHMucHJvdG9jb2wpe2QuX3BhcnRzLnByb3RvY29sPWMuX3BhcnRzLnByb3RvY29sfWlmKHRoaXMuX3BhcnRzLmhvc3RuYW1lKXtyZXR1cm4gZH1mb3IoaT0wO3A9ZVtpXTtpKyspe2QuX3BhcnRzW3BdPWMuX3BhcnRzW3BdfWU9WydxdWVyeScsJ3BhdGgnXTtmb3IoaT0wO3A9ZVtpXTtpKyspe2lmKCFkLl9wYXJ0c1twXSYmYy5fcGFydHNbcF0pe2QuX3BhcnRzW3BdPWMuX3BhcnRzW3BdfX1pZihkLnBhdGgoKS5jaGFyQXQoMCkhPT0nLycpe2w9Yy5kaXJlY3RvcnkoKTtkLl9wYXJ0cy5wYXRoPShsPyhsKycvJyk6JycpK2QuX3BhcnRzLnBhdGg7ZC5ub3JtYWxpemVQYXRoKCl9ZC5idWlsZCgpO3JldHVybiBkfTtwLnJlbGF0aXZlVG89ZnVuY3Rpb24oYyl7dmFyIGQ9dGhpcy5jbG9uZSgpLm5vcm1hbGl6ZSgpO3ZhciBlLGksbCxzLHQ7aWYoZC5fcGFydHMudXJuKXt0aHJvdyBuZXcgRXJyb3IoJ1VSTnMgZG8gbm90IGhhdmUgYW55IGdlbmVyYWxseSBkZWZpbmVkIGhpZXJhcmNoaWNhbCBjb21wb25lbnRzJyl9Yz1uZXcgVShjKS5ub3JtYWxpemUoKTtlPWQuX3BhcnRzO2k9Yy5fcGFydHM7cz1kLnBhdGgoKTt0PWMucGF0aCgpO2lmKHMuY2hhckF0KDApIT09Jy8nKXt0aHJvdyBuZXcgRXJyb3IoJ1VSSSBpcyBhbHJlYWR5IHJlbGF0aXZlJyl9aWYodC5jaGFyQXQoMCkhPT0nLycpe3Rocm93IG5ldyBFcnJvcignQ2Fubm90IGNhbGN1bGF0ZSBhIFVSSSByZWxhdGl2ZSB0byBhbm90aGVyIHJlbGF0aXZlIFVSSScpfWlmKGUucHJvdG9jb2w9PT1pLnByb3RvY29sKXtlLnByb3RvY29sPW51bGx9aWYoZS51c2VybmFtZSE9PWkudXNlcm5hbWV8fGUucGFzc3dvcmQhPT1pLnBhc3N3b3JkKXtyZXR1cm4gZC5idWlsZCgpfWlmKGUucHJvdG9jb2whPT1udWxsfHxlLnVzZXJuYW1lIT09bnVsbHx8ZS5wYXNzd29yZCE9PW51bGwpe3JldHVybiBkLmJ1aWxkKCl9aWYoZS5ob3N0bmFtZT09PWkuaG9zdG5hbWUmJmUucG9ydD09PWkucG9ydCl7ZS5ob3N0bmFtZT1udWxsO2UucG9ydD1udWxsfWVsc2V7cmV0dXJuIGQuYnVpbGQoKX1pZihzPT09dCl7ZS5wYXRoPScnO3JldHVybiBkLmJ1aWxkKCl9bD1VLmNvbW1vblBhdGgoZC5wYXRoKCksYy5wYXRoKCkpO2lmKCFsKXtyZXR1cm4gZC5idWlsZCgpfXZhciB2PWkucGF0aC5zdWJzdHJpbmcobC5sZW5ndGgpLnJlcGxhY2UoL1teXC9dKiQvLCcnKS5yZXBsYWNlKC8uKj9cLy9nLCcuLi8nKTtlLnBhdGg9ditlLnBhdGguc3Vic3RyaW5nKGwubGVuZ3RoKTtyZXR1cm4gZC5idWlsZCgpfTtwLmVxdWFscz1mdW5jdGlvbihjKXt2YXIgZD10aGlzLmNsb25lKCk7dmFyIHQ9bmV3IFUoYyk7dmFyIGU9e307dmFyIGk9e307dmFyIGw9e307dmFyIHMsdix4O2Qubm9ybWFsaXplKCk7dC5ub3JtYWxpemUoKTtpZihkLnRvU3RyaW5nKCk9PT10LnRvU3RyaW5nKCkpe3JldHVybiB0cnVlfXM9ZC5xdWVyeSgpO3Y9dC5xdWVyeSgpO2QucXVlcnkoIiIpO3QucXVlcnkoIiIpO2lmKGQudG9TdHJpbmcoKSE9PXQudG9TdHJpbmcoKSl7cmV0dXJuIGZhbHNlfWlmKHMubGVuZ3RoIT09di5sZW5ndGgpe3JldHVybiBmYWxzZX1lPVUucGFyc2VRdWVyeShzLHRoaXMuX3BhcnRzLmVzY2FwZVF1ZXJ5U3BhY2UpO2k9VS5wYXJzZVF1ZXJ5KHYsdGhpcy5fcGFydHMuZXNjYXBlUXVlcnlTcGFjZSk7Zm9yKHggaW4gZSl7aWYoaC5jYWxsKGUseCkpe2lmKCFmKGVbeF0pKXtpZihlW3hdIT09aVt4XSl7cmV0dXJuIGZhbHNlfX1lbHNlIGlmKCFtKGVbeF0saVt4XSkpe3JldHVybiBmYWxzZX1sW3hdPXRydWV9fWZvcih4IGluIGkpe2lmKGguY2FsbChpLHgpKXtpZighbFt4XSl7cmV0dXJuIGZhbHNlfX19cmV0dXJuIHRydWV9O3AuZHVwbGljYXRlUXVlcnlQYXJhbWV0ZXJzPWZ1bmN0aW9uKHYpe3RoaXMuX3BhcnRzLmR1cGxpY2F0ZVF1ZXJ5UGFyYW1ldGVycz0hIXY7cmV0dXJuIHRoaXN9O3AuZXNjYXBlUXVlcnlTcGFjZT1mdW5jdGlvbih2KXt0aGlzLl9wYXJ0cy5lc2NhcGVRdWVyeVNwYWNlPSEhdjtyZXR1cm4gdGhpc307cmV0dXJuIFV9KSk7DQovKiBDb3B5cmlnaHQgR29vZ2xlIEluYy4NCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5jZSBWZXJzaW9uIDIuMA0KICogQXV0b2dlbmVyYXRlZCBhdCBUdWUgTWF5IDIyIDEwOjE4OjIxIFBEVCAyMDEyDQogKiBcQG92ZXJyaWRlcyB3aW5kb3cNCiAqIFxAcHJvdmlkZXMgY3NzU2NoZW1hLCBDU1NfUFJPUF9CSVRfUVVBTlRJVFksIENTU19QUk9QX0JJVF9IQVNIX1ZBTFVFLCBDU1NfUFJPUF9CSVRfTkVHQVRJVkVfUVVBTlRJVFksIENTU19QUk9QX0JJVF9RU1RSSU5HX0NPTlRFTlQsIENTU19QUk9QX0JJVF9RU1RSSU5HX1VSTCwgQ1NTX1BST1BfQklUX0hJU1RPUllfSU5TRU5TSVRJVkUsIENTU19QUk9QX0JJVF9aX0lOREVYLCBDU1NfUFJPUF9CSVRfQUxMT1dFRF9JTl9MSU5LICovDQp2YXIgQ1NTX1BST1BfQklUX1FVQU5USVRZPTE7dmFyIENTU19QUk9QX0JJVF9IQVNIX1ZBTFVFPTI7dmFyIENTU19QUk9QX0JJVF9ORUdBVElWRV9RVUFOVElUWT00O3ZhciBDU1NfUFJPUF9CSVRfUVNUUklOR19DT05URU5UPTg7dmFyIENTU19QUk9QX0JJVF9RU1RSSU5HX1VSTD0xNjt2YXIgQ1NTX1BST1BfQklUX0hJU1RPUllfSU5TRU5TSVRJVkU9MzI7dmFyIENTU19QUk9QX0JJVF9aX0lOREVYPTY0O3ZhciBDU1NfUFJPUF9CSVRfQUxMT1dFRF9JTl9MSU5LPTEyODt2YXIgY3NzU2NoZW1hPShmdW5jdGlvbigpe3ZhciBzPVsncmdiKD86XFwoXFxzKig/OlxcZCt8MHxcXGQrKD86XFwuXFxkKyk/JSlcXHMqLFxccyooPzpcXGQrfDB8XFxkKyg/OlxcLlxcZCspPyUpXFxzKixcXHMqKD86XFxkK3wwfFxcZCsoPzpcXC5cXGQrKT8lKXxhXFwoXFxzKig/OlxcZCt8MHxcXGQrKD86XFwuXFxkKyk/JSlcXHMqLFxccyooPzpcXGQrfDB8XFxkKyg/OlxcLlxcZCspPyUpXFxzKixcXHMqKD86XFxkK3wwfFxcZCsoPzpcXC5cXGQrKT8lKVxccyosXFxzKig/OlxcZCt8MCg/OlxcLlxcZCspP3xcXC5cXGQrfDEoPzpcXC4wKyk/fDB8XFxkKyg/OlxcLlxcZCspPyUpKSAqXFwpJ10sYz1bL14gKiQvaSxSZWdFeHAoJ14gKig/OlxccyonK3NbMF0rJ3woPzpcXHMqJytzWzBdKycpPykrICokJywnaScpLFJlZ0V4cCgnXiAqXFxzKicrc1swXSsnICokJywnaScpLFJlZ0V4cCgnXiAqXFxzKicrc1swXSsnXFxzKicrc1swXSsnICokJywnaScpXSxMPVtbJ2FsaWNlYmx1ZScsJ2FudGlxdWV3aGl0ZScsJ2FxdWEnLCdhcXVhbWFyaW5lJywnYXp1cmUnLCdiZWlnZScsJ2Jpc3F1ZScsJ2JsYWNrJywnYmxhbmNoZWRhbG1vbmQnLCdibHVlJywnYmx1ZXZpb2xldCcsJ2Jyb3duJywnYnVybHl3b29kJywnY2FkZXRibHVlJywnY2hhcnRyZXVzZScsJ2Nob2NvbGF0ZScsJ2NvcmFsJywnY29ybmZsb3dlcmJsdWUnLCdjb3Juc2lsaycsJ2NyaW1zb24nLCdjeWFuJywnZGFya2JsdWUnLCdkYXJrY3lhbicsJ2Rhcmtnb2xkZW5yb2QnLCdkYXJrZ3JheScsJ2RhcmtncmVlbicsJ2RhcmtraGFraScsJ2RhcmttYWdlbnRhJywnZGFya29saXZlZ3JlZW4nLCdkYXJrb3JhbmdlJywnZGFya29yY2hpZCcsJ2RhcmtyZWQnLCdkYXJrc2FsbW9uJywnZGFya3NlYWdyZWVuJywnZGFya3NsYXRlYmx1ZScsJ2RhcmtzbGF0ZWdyYXknLCdkYXJrdHVycXVvaXNlJywnZGFya3Zpb2xldCcsJ2RlZXBwaW5rJywnZGVlcHNreWJsdWUnLCdkaW1ncmF5JywnZG9kZ2VyYmx1ZScsJ2ZpcmVicmljaycsJ2Zsb3JhbHdoaXRlJywnZm9yZXN0Z3JlZW4nLCdmdWNoc2lhJywnZ2FpbnNib3JvJywnZ2hvc3R3aGl0ZScsJ2dvbGQnLCdnb2xkZW5yb2QnLCdncmF5JywnZ3JlZW4nLCdncmVlbnllbGxvdycsJ2hvbmV5ZGV3JywnaG90cGluaycsJ2luZGlhbnJlZCcsJ2luZGlnbycsJ2l2b3J5Jywna2hha2knLCdsYXZlbmRlcicsJ2xhdmVuZGVyYmx1c2gnLCdsYXduZ3JlZW4nLCdsZW1vbmNoaWZmb24nLCdsaWdodGJsdWUnLCdsaWdodGNvcmFsJywnbGlnaHRjeWFuJywnbGlnaHRnb2xkZW5yb2R5ZWxsb3cnLCdsaWdodGdyZWVuJywnbGlnaHRncmV5JywnbGlnaHRwaW5rJywnbGlnaHRzYWxtb24nLCdsaWdodHNlYWdyZWVuJywnbGlnaHRza3libHVlJywnbGlnaHRzbGF0ZWdyYXknLCdsaWdodHN0ZWVsYmx1ZScsJ2xpZ2h0eWVsbG93JywnbGltZScsJ2xpbWVncmVlbicsJ2xpbmVuJywnbWFnZW50YScsJ21hcm9vbicsJ21lZGl1bWFxdWFtYXJpbmUnLCdtZWRpdW1ibHVlJywnbWVkaXVtb3JjaGlkJywnbWVkaXVtcHVycGxlJywnbWVkaXVtc2VhZ3JlZW4nLCdtZWRpdW1zbGF0ZWJsdWUnLCdtZWRpdW1zcHJpbmdncmVlbicsJ21lZGl1bXR1cnF1b2lzZScsJ21lZGl1bXZpb2xldHJlZCcsJ21pZG5pZ2h0Ymx1ZScsJ21pbnRjcmVhbScsJ21pc3R5cm9zZScsJ21vY2Nhc2luJywnbmF2YWpvd2hpdGUnLCduYXZ5Jywnb2xkbGFjZScsJ29saXZlJywnb2xpdmVkcmFiJywnb3JhbmdlJywnb3JhbmdlcmVkJywnb3JjaGlkJywncGFsZWdvbGRlbnJvZCcsJ3BhbGVncmVlbicsJ3BhbGV0dXJxdW9pc2UnLCdwYWxldmlvbGV0cmVkJywncGFwYXlhd2hpcCcsJ3BlYWNocHVmZicsJ3BlcnUnLCdwaW5rJywncGx1bScsJ3Bvd2RlcmJsdWUnLCdwdXJwbGUnLCdyZWQnLCdyb3N5YnJvd24nLCdyb3lhbGJsdWUnLCdzYWRkbGVicm93bicsJ3NhbG1vbicsJ3NhbmR5YnJvd24nLCdzZWFncmVlbicsJ3NlYXNoZWxsJywnc2llbm5hJywnc2lsdmVyJywnc2t5Ymx1ZScsJ3NsYXRlYmx1ZScsJ3NsYXRlZ3JheScsJ3Nub3cnLCdzcHJpbmdncmVlbicsJ3N0ZWVsYmx1ZScsJ3RhbicsJ3RlYWwnLCd0aGlzdGxlJywndG9tYXRvJywndHVycXVvaXNlJywndmlvbGV0Jywnd2hlYXQnLCd3aGl0ZScsJ3doaXRlc21va2UnLCd5ZWxsb3cnLCd5ZWxsb3dncmVlbiddLFsnYWxsLXNjcm9sbCcsJ2NvbC1yZXNpemUnLCdjcm9zc2hhaXInLCdkZWZhdWx0JywnZS1yZXNpemUnLCdoYW5kJywnaGVscCcsJ21vdmUnLCduLXJlc2l6ZScsJ25lLXJlc2l6ZScsJ25vLWRyb3AnLCdub3QtYWxsb3dlZCcsJ253LXJlc2l6ZScsJ3BvaW50ZXInLCdwcm9ncmVzcycsJ3Jvdy1yZXNpemUnLCdzLXJlc2l6ZScsJ3NlLXJlc2l6ZScsJ3N3LXJlc2l6ZScsJ3RleHQnLCd2ZXJ0aWNhbC10ZXh0Jywndy1yZXNpemUnLCd3YWl0J10sWyctbW96LWlubGluZS1ib3gnLCctbW96LWlubGluZS1zdGFjaycsJ2Jsb2NrJywnaW5saW5lJywnaW5saW5lLWJsb2NrJywnaW5saW5lLXRhYmxlJywnbGlzdC1pdGVtJywncnVuLWluJywndGFibGUnLCd0YWJsZS1jYXB0aW9uJywndGFibGUtY2VsbCcsJ3RhYmxlLWNvbHVtbicsJ3RhYmxlLWNvbHVtbi1ncm91cCcsJ3RhYmxlLWZvb3Rlci1ncm91cCcsJ3RhYmxlLWhlYWRlci1ncm91cCcsJ3RhYmxlLXJvdycsJ3RhYmxlLXJvdy1ncm91cCddLFsnYXJtZW5pYW4nLCdjaXJjbGUnLCdkZWNpbWFsJywnZGVjaW1hbC1sZWFkaW5nLXplcm8nLCdkaXNjJywnZ2VvcmdpYW4nLCdsb3dlci1hbHBoYScsJ2xvd2VyLWdyZWVrJywnbG93ZXItbGF0aW4nLCdsb3dlci1yb21hbicsJ3NxdWFyZScsJ3VwcGVyLWFscGhhJywndXBwZXItbGF0aW4nLCd1cHBlci1yb21hbiddLFsnMTAwJywnMjAwJywnMzAwJywnNDAwJywnNTAwJywnNjAwJywnNzAwJywnODAwJywnOTAwJywnYm9sZCcsJ2JvbGRlcicsJ2xpZ2h0ZXInXSxbJ2NvbmRlbnNlZCcsJ2V4cGFuZGVkJywnZXh0cmEtY29uZGVuc2VkJywnZXh0cmEtZXhwYW5kZWQnLCduYXJyb3dlcicsJ3NlbWktY29uZGVuc2VkJywnc2VtaS1leHBhbmRlZCcsJ3VsdHJhLWNvbmRlbnNlZCcsJ3VsdHJhLWV4cGFuZGVkJywnd2lkZXInXSxbJ2JlaGluZCcsJ2NlbnRlci1sZWZ0JywnY2VudGVyLXJpZ2h0JywnZmFyLWxlZnQnLCdmYXItcmlnaHQnLCdsZWZ0LXNpZGUnLCdsZWZ0d2FyZHMnLCdyaWdodC1zaWRlJywncmlnaHR3YXJkcyddLFsnbGFyZ2UnLCdsYXJnZXInLCdzbWFsbCcsJ3NtYWxsZXInLCd4LWxhcmdlJywneC1zbWFsbCcsJ3h4LWxhcmdlJywneHgtc21hbGwnXSxbJy1tb3otcHJlLXdyYXAnLCctby1wcmUtd3JhcCcsJy1wcmUtd3JhcCcsJ25vd3JhcCcsJ3ByZScsJ3ByZS1saW5lJywncHJlLXdyYXAnXSxbJ2Rhc2hlZCcsJ2RvdHRlZCcsJ2RvdWJsZScsJ2dyb292ZScsJ291dHNldCcsJ3JpZGdlJywnc29saWQnXSxbJ2Jhc2VsaW5lJywnbWlkZGxlJywnc3ViJywnc3VwZXInLCd0ZXh0LWJvdHRvbScsJ3RleHQtdG9wJ10sWydjYXB0aW9uJywnaWNvbicsJ21lbnUnLCdtZXNzYWdlLWJveCcsJ3NtYWxsLWNhcHRpb24nLCdzdGF0dXMtYmFyJ10sWydmYXN0JywnZmFzdGVyJywnc2xvdycsJ3Nsb3dlcicsJ3gtZmFzdCcsJ3gtc2xvdyddLFsnYWJvdmUnLCdiZWxvdycsJ2hpZ2hlcicsJ2xldmVsJywnbG93ZXInXSxbJ2JvcmRlci1ib3gnLCdjb250YWluJywnY29udGVudC1ib3gnLCdjb3ZlcicsJ3BhZGRpbmctYm94J10sWydjdXJzaXZlJywnZmFudGFzeScsJ21vbm9zcGFjZScsJ3NhbnMtc2VyaWYnLCdzZXJpZiddLFsnbG91ZCcsJ3NpbGVudCcsJ3NvZnQnLCd4LWxvdWQnLCd4LXNvZnQnXSxbJ25vLXJlcGVhdCcsJ3JlcGVhdC14JywncmVwZWF0LXknLCdyb3VuZCcsJ3NwYWNlJ10sWydibGluaycsJ2xpbmUtdGhyb3VnaCcsJ292ZXJsaW5lJywndW5kZXJsaW5lJ10sWydoaWdoJywnbG93JywneC1oaWdoJywneC1sb3cnXSxbJ2Fic29sdXRlJywncmVsYXRpdmUnLCdzdGF0aWMnXSxbJ2NhcGl0YWxpemUnLCdsb3dlcmNhc2UnLCd1cHBlcmNhc2UnXSxbJ2NoaWxkJywnZmVtYWxlJywnbWFsZSddLFsnYmlkaS1vdmVycmlkZScsJ2VtYmVkJ10sWydib3R0b20nLCd0b3AnXSxbJ2NsaXAnLCdlbGxpcHNpcyddLFsnY29udGludW91cycsJ2RpZ2l0cyddLFsnaGlkZScsJ3Nob3cnXSxbJ2luc2lkZScsJ291dHNpZGUnXSxbJ2l0YWxpYycsJ29ibGlxdWUnXSxbJ2xlZnQnLCdyaWdodCddLFsnbHRyJywncnRsJ10sWyduby1jb250ZW50Jywnbm8tZGlzcGxheSddLFsnc3VwcHJlc3MnLCd1bnJlc3RyaWN0ZWQnXSxbJ3RoaWNrJywndGhpbiddLFsnLCddLFsnLyddLFsnYWx3YXlzJ10sWydhdXRvJ10sWydhdm9pZCddLFsnYm90aCddLFsnYnJlYWstd29yZCddLFsnY2VudGVyJ10sWydjb2RlJ10sWydjb2xsYXBzZSddLFsnZml4ZWQnXSxbJ2hpZGRlbiddLFsnaW5oZXJpdCddLFsnaW5zZXQnXSxbJ2ludmVydCddLFsnanVzdGlmeSddLFsnbG9jYWwnXSxbJ21lZGl1bSddLFsnbWl4J10sWydub25lJ10sWydub3JtYWwnXSxbJ29uY2UnXSxbJ3JlcGVhdCddLFsnc2Nyb2xsJ10sWydzZXBhcmF0ZSddLFsnc21hbGwtY2FwcyddLFsnc3BlbGwtb3V0J10sWyd0cmFuc3BhcmVudCddLFsndmlzaWJsZSddXTtyZXR1cm57Jy1tb3otYm9yZGVyLXJhZGl1cyc6eydjc3NFeHRyYSc6Y1swXSwnY3NzUHJvcEJpdHMnOjUsJ2Nzc0xpdEdyb3VwJzpbTFszNl1dfSwnLW1vei1ib3JkZXItcmFkaXVzLWJvdHRvbWxlZnQnOnsnY3NzRXh0cmEnOmNbMF0sJ2Nzc1Byb3BCaXRzJzo1fSwnLW1vei1ib3JkZXItcmFkaXVzLWJvdHRvbXJpZ2h0Jzp7J2Nzc0V4dHJhJzpjWzBdLCdjc3NQcm9wQml0cyc6NX0sJy1tb3otYm9yZGVyLXJhZGl1cy10b3BsZWZ0Jzp7J2Nzc0V4dHJhJzpjWzBdLCdjc3NQcm9wQml0cyc6NX0sJy1tb3otYm9yZGVyLXJhZGl1cy10b3ByaWdodCc6eydjc3NFeHRyYSc6Y1swXSwnY3NzUHJvcEJpdHMnOjV9LCctbW96LWJveC1zaGFkb3cnOnsnY3NzRXh0cmEnOmNbMV0sJ2Nzc0FsdGVybmF0ZXMnOlsnYm94U2hhZG93J10sJ2Nzc1Byb3BCaXRzJzo3LCdjc3NMaXRHcm91cCc6W0xbMF0sTFszNV0sTFs0OF0sTFs1NF1dfSwnLW1vei1vcGFjaXR5Jzp7J2Nzc1Byb3BCaXRzJzoxLCdjc3NMaXRHcm91cCc6W0xbNDddXX0sJy1tb3otb3V0bGluZSc6eydjc3NFeHRyYSc6Y1szXSwnY3NzUHJvcEJpdHMnOjcsJ2Nzc0xpdEdyb3VwJzpbTFswXSxMWzldLExbMzRdLExbNDZdLExbNDddLExbNDhdLExbNDldLExbNTJdLExbNTRdXX0sJy1tb3otb3V0bGluZS1jb2xvcic6eydjc3NFeHRyYSc6Y1syXSwnY3NzUHJvcEJpdHMnOjIsJ2Nzc0xpdEdyb3VwJzpbTFswXSxMWzQ3XSxMWzQ5XV19LCctbW96LW91dGxpbmUtc3R5bGUnOnsnY3NzUHJvcEJpdHMnOjAsJ2Nzc0xpdEdyb3VwJzpbTFs5XSxMWzQ2XSxMWzQ3XSxMWzQ4XSxMWzU0XV19LCctbW96LW91dGxpbmUtd2lkdGgnOnsnY3NzUHJvcEJpdHMnOjUsJ2Nzc0xpdEdyb3VwJzpbTFszNF0sTFs0N10sTFs1Ml1dfSwnLW8tdGV4dC1vdmVyZmxvdyc6eydjc3NQcm9wQml0cyc6MCwnY3NzTGl0R3JvdXAnOltMWzI1XV19LCctd2Via2l0LWJvcmRlci1ib3R0b20tbGVmdC1yYWRpdXMnOnsnY3NzRXh0cmEnOmNbMF0sJ2Nzc1Byb3BCaXRzJzo1fSwnLXdlYmtpdC1ib3JkZXItYm90dG9tLXJpZ2h0LXJhZGl1cyc6eydjc3NFeHRyYSc6Y1swXSwnY3NzUHJvcEJpdHMnOjV9LCctd2Via2l0LWJvcmRlci1yYWRpdXMnOnsnY3NzRXh0cmEnOmNbMF0sJ2Nzc1Byb3BCaXRzJzo1LCdjc3NMaXRHcm91cCc6W0xbMzZdXX0sJy13ZWJraXQtYm9yZGVyLXJhZGl1cy1ib3R0b20tbGVmdCc6eydjc3NFeHRyYSc6Y1swXSwnY3NzUHJvcEJpdHMnOjV9LCctd2Via2l0LWJvcmRlci1yYWRpdXMtYm90dG9tLXJpZ2h0Jzp7J2Nzc0V4dHJhJzpjWzBdLCdjc3NQcm9wQml0cyc6NX0sJy13ZWJraXQtYm9yZGVyLXJhZGl1cy10b3AtbGVmdCc6eydjc3NFeHRyYSc6Y1swXSwnY3NzUHJvcEJpdHMnOjV9LCctd2Via2l0LWJvcmRlci1yYWRpdXMtdG9wLXJpZ2h0Jzp7J2Nzc0V4dHJhJzpjWzBdLCdjc3NQcm9wQml0cyc6NX0sJy13ZWJraXQtYm9yZGVyLXRvcC1sZWZ0LXJhZGl1cyc6eydjc3NFeHRyYSc6Y1swXSwnY3NzUHJvcEJpdHMnOjV9LCctd2Via2l0LWJvcmRlci10b3AtcmlnaHQtcmFkaXVzJzp7J2Nzc0V4dHJhJzpjWzBdLCdjc3NQcm9wQml0cyc6NX0sJy13ZWJraXQtYm94LXNoYWRvdyc6eydjc3NFeHRyYSc6Y1sxXSwnY3NzQWx0ZXJuYXRlcyc6Wydib3hTaGFkb3cnXSwnY3NzUHJvcEJpdHMnOjcsJ2Nzc0xpdEdyb3VwJzpbTFswXSxMWzM1XSxMWzQ4XSxMWzU0XV19LCdhemltdXRoJzp7J2Nzc1Byb3BCaXRzJzo1LCdjc3NMaXRHcm91cCc6W0xbNl0sTFszMF0sTFs0Ml0sTFs0N11dfSwnYmFja2dyb3VuZCc6eydjc3NFeHRyYSc6UmVnRXhwKCdeICooPzpcXHMqJytzWzBdKycpezAsMn0gKiQnLCdpJyksJ2Nzc1Byb3BCaXRzJzoyMywnY3NzTGl0R3JvdXAnOltMWzBdLExbMTRdLExbMTddLExbMjRdLExbMzBdLExbMzVdLExbMzZdLExbMzhdLExbNDJdLExbNDVdLExbNDddLExbNTFdLExbNTRdLExbNTddLExbNThdLExbNjJdXX0sJ2JhY2tncm91bmQtYXR0YWNobWVudCc6eydjc3NFeHRyYSc6Y1swXSwnY3NzUHJvcEJpdHMnOjAsJ2Nzc0xpdEdyb3VwJzpbTFszNV0sTFs0NV0sTFs1MV0sTFs1OF1dfSwnYmFja2dyb3VuZC1jb2xvcic6eydjc3NFeHRyYSc6Y1syXSwnY3NzUHJvcEJpdHMnOjEzMCwnY3NzTGl0R3JvdXAnOltMWzBdLExbNDddLExbNjJdXX0sJ2JhY2tncm91bmQtaW1hZ2UnOnsnY3NzRXh0cmEnOmNbMF0sJ2Nzc1Byb3BCaXRzJzoxNiwnY3NzTGl0R3JvdXAnOltMWzM1XSxMWzU0XV19LCdiYWNrZ3JvdW5kLXBvc2l0aW9uJzp7J2Nzc0V4dHJhJzpjWzBdLCdjc3NQcm9wQml0cyc6NSwnY3NzTGl0R3JvdXAnOltMWzI0XSxMWzMwXSxMWzM1XSxMWzQyXV19LCdiYWNrZ3JvdW5kLXJlcGVhdCc6eydjc3NFeHRyYSc6Y1swXSwnY3NzUHJvcEJpdHMnOjAsJ2Nzc0xpdEdyb3VwJzpbTFsxN10sTFszNV0sTFs1N11dfSwnYm9yZGVyJzp7J2Nzc0V4dHJhJzpjWzNdLCdjc3NQcm9wQml0cyc6NywnY3NzTGl0R3JvdXAnOltMWzBdLExbOV0sTFszNF0sTFs0Nl0sTFs0N10sTFs0OF0sTFs1Ml0sTFs1NF0sTFs2Ml1dfSwnYm9yZGVyLWJvdHRvbSc6eydjc3NFeHRyYSc6Y1szXSwnY3NzUHJvcEJpdHMnOjcsJ2Nzc0xpdEdyb3VwJzpbTFswXSxMWzldLExbMzRdLExbNDZdLExbNDddLExbNDhdLExbNTJdLExbNTRdLExbNjJdXX0sJ2JvcmRlci1ib3R0b20tY29sb3InOnsnY3NzRXh0cmEnOmNbMl0sJ2Nzc1Byb3BCaXRzJzoyLCdjc3NMaXRHcm91cCc6W0xbMF0sTFs0N10sTFs2Ml1dfSwnYm9yZGVyLWJvdHRvbS1sZWZ0LXJhZGl1cyc6eydjc3NFeHRyYSc6Y1swXSwnY3NzUHJvcEJpdHMnOjV9LCdib3JkZXItYm90dG9tLXJpZ2h0LXJhZGl1cyc6eydjc3NFeHRyYSc6Y1swXSwnY3NzUHJvcEJpdHMnOjV9LCdib3JkZXItYm90dG9tLXN0eWxlJzp7J2Nzc1Byb3BCaXRzJzowLCdjc3NMaXRHcm91cCc6W0xbOV0sTFs0Nl0sTFs0N10sTFs0OF0sTFs1NF1dfSwnYm9yZGVyLWJvdHRvbS13aWR0aCc6eydjc3NQcm9wQml0cyc6NSwnY3NzTGl0R3JvdXAnOltMWzM0XSxMWzQ3XSxMWzUyXV19LCdib3JkZXItY29sbGFwc2UnOnsnY3NzUHJvcEJpdHMnOjAsJ2Nzc0xpdEdyb3VwJzpbTFs0NF0sTFs0N10sTFs1OV1dfSwnYm9yZGVyLWNvbG9yJzp7J2Nzc0V4dHJhJzpSZWdFeHAoJ14gKig/OlxccyonK3NbMF0rJyl7MSw0fSAqJCcsJ2knKSwnY3NzUHJvcEJpdHMnOjIsJ2Nzc0xpdEdyb3VwJzpbTFswXSxMWzQ3XSxMWzYyXV19LCdib3JkZXItbGVmdCc6eydjc3NFeHRyYSc6Y1szXSwnY3NzUHJvcEJpdHMnOjcsJ2Nzc0xpdEdyb3VwJzpbTFswXSxMWzldLExbMzRdLExbNDZdLExbNDddLExbNDhdLExbNTJdLExbNTRdLExbNjJdXX0sJ2JvcmRlci1sZWZ0LWNvbG9yJzp7J2Nzc0V4dHJhJzpjWzJdLCdjc3NQcm9wQml0cyc6MiwnY3NzTGl0R3JvdXAnOltMWzBdLExbNDddLExbNjJdXX0sJ2JvcmRlci1sZWZ0LXN0eWxlJzp7J2Nzc1Byb3BCaXRzJzowLCdjc3NMaXRHcm91cCc6W0xbOV0sTFs0Nl0sTFs0N10sTFs0OF0sTFs1NF1dfSwnYm9yZGVyLWxlZnQtd2lkdGgnOnsnY3NzUHJvcEJpdHMnOjUsJ2Nzc0xpdEdyb3VwJzpbTFszNF0sTFs0N10sTFs1Ml1dfSwnYm9yZGVyLXJhZGl1cyc6eydjc3NFeHRyYSc6Y1swXSwnY3NzUHJvcEJpdHMnOjUsJ2Nzc0xpdEdyb3VwJzpbTFszNl1dfSwnYm9yZGVyLXJpZ2h0Jzp7J2Nzc0V4dHJhJzpjWzNdLCdjc3NQcm9wQml0cyc6NywnY3NzTGl0R3JvdXAnOltMWzBdLExbOV0sTFszNF0sTFs0Nl0sTFs0N10sTFs0OF0sTFs1Ml0sTFs1NF0sTFs2Ml1dfSwnYm9yZGVyLXJpZ2h0LWNvbG9yJzp7J2Nzc0V4dHJhJzpjWzJdLCdjc3NQcm9wQml0cyc6MiwnY3NzTGl0R3JvdXAnOltMWzBdLExbNDddLExbNjJdXX0sJ2JvcmRlci1yaWdodC1zdHlsZSc6eydjc3NQcm9wQml0cyc6MCwnY3NzTGl0R3JvdXAnOltMWzldLExbNDZdLExbNDddLExbNDhdLExbNTRdXX0sJ2JvcmRlci1yaWdodC13aWR0aCc6eydjc3NQcm9wQml0cyc6NSwnY3NzTGl0R3JvdXAnOltMWzM0XSxMWzQ3XSxMWzUyXV19LCdib3JkZXItc3BhY2luZyc6eydjc3NFeHRyYSc6Y1swXSwnY3NzUHJvcEJpdHMnOjUsJ2Nzc0xpdEdyb3VwJzpbTFs0N11dfSwnYm9yZGVyLXN0eWxlJzp7J2Nzc1Byb3BCaXRzJzowLCdjc3NMaXRHcm91cCc6W0xbOV0sTFs0Nl0sTFs0N10sTFs0OF0sTFs1NF1dfSwnYm9yZGVyLXRvcCc6eydjc3NFeHRyYSc6Y1szXSwnY3NzUHJvcEJpdHMnOjcsJ2Nzc0xpdEdyb3VwJzpbTFswXSxMWzldLExbMzRdLExbNDZdLExbNDddLExbNDhdLExbNTJdLExbNTRdLExbNjJdXX0sJ2JvcmRlci10b3AtY29sb3InOnsnY3NzRXh0cmEnOmNbMl0sJ2Nzc1Byb3BCaXRzJzoyLCdjc3NMaXRHcm91cCc6W0xbMF0sTFs0N10sTFs2Ml1dfSwnYm9yZGVyLXRvcC1sZWZ0LXJhZGl1cyc6eydjc3NFeHRyYSc6Y1swXSwnY3NzUHJvcEJpdHMnOjV9LCdib3JkZXItdG9wLXJpZ2h0LXJhZGl1cyc6eydjc3NFeHRyYSc6Y1swXSwnY3NzUHJvcEJpdHMnOjV9LCdib3JkZXItdG9wLXN0eWxlJzp7J2Nzc1Byb3BCaXRzJzowLCdjc3NMaXRHcm91cCc6W0xbOV0sTFs0Nl0sTFs0N10sTFs0OF0sTFs1NF1dfSwnYm9yZGVyLXRvcC13aWR0aCc6eydjc3NQcm9wQml0cyc6NSwnY3NzTGl0R3JvdXAnOltMWzM0XSxMWzQ3XSxMWzUyXV19LCdib3JkZXItd2lkdGgnOnsnY3NzUHJvcEJpdHMnOjUsJ2Nzc0xpdEdyb3VwJzpbTFszNF0sTFs0N10sTFs1Ml1dfSwnYm90dG9tJzp7J2Nzc1Byb3BCaXRzJzo1LCdjc3NMaXRHcm91cCc6W0xbMzhdLExbNDddXX0sJ2JveC1zaGFkb3cnOnsnY3NzRXh0cmEnOmNbMV0sJ2Nzc1Byb3BCaXRzJzo3LCdjc3NMaXRHcm91cCc6W0xbMF0sTFszNV0sTFs0OF0sTFs1NF1dfSwnY2FwdGlvbi1zaWRlJzp7J2Nzc1Byb3BCaXRzJzowLCdjc3NMaXRHcm91cCc6W0xbMjRdLExbNDddXX0sJ2NsZWFyJzp7J2Nzc1Byb3BCaXRzJzowLCdjc3NMaXRHcm91cCc6W0xbMzBdLExbNDBdLExbNDddLExbNTRdXX0sJ2NsaXAnOnsnY3NzRXh0cmEnOi9eICpccypyZWN0XChccyooPzowfFsrXC1dP1xkKyg/OlwuXGQrKT8oPzpbY2VtXW18ZXh8aW58cFtjdHhdKXxhdXRvKVxzKixccyooPzowfFsrXC1dP1xkKyg/OlwuXGQrKT8oPzpbY2VtXW18ZXh8aW58cFtjdHhdKXxhdXRvKVxzKixccyooPzowfFsrXC1dP1xkKyg/OlwuXGQrKT8oPzpbY2VtXW18ZXh8aW58cFtjdHhdKXxhdXRvKVxzKixccyooPzowfFsrXC1dP1xkKyg/OlwuXGQrKT8oPzpbY2VtXW18ZXh8aW58cFtjdHhdKXxhdXRvKSAqXCkgKiQvaSwnY3NzUHJvcEJpdHMnOjAsJ2Nzc0xpdEdyb3VwJzpbTFszOF0sTFs0N11dfSwnY29sb3InOnsnY3NzRXh0cmEnOmNbMl0sJ2Nzc1Byb3BCaXRzJzoxMzAsJ2Nzc0xpdEdyb3VwJzpbTFswXSxMWzQ3XV19LCdjb250ZW50Jzp7J2Nzc1Byb3BCaXRzJzowfSwnY291bnRlci1pbmNyZW1lbnQnOnsnY3NzRXh0cmEnOmNbMF0sJ2Nzc1Byb3BCaXRzJzo1LCdjc3NMaXRHcm91cCc6W0xbNDddLExbNTRdXX0sJ2NvdW50ZXItcmVzZXQnOnsnY3NzRXh0cmEnOmNbMF0sJ2Nzc1Byb3BCaXRzJzo1LCdjc3NMaXRHcm91cCc6W0xbNDddLExbNTRdXX0sJ2N1ZSc6eydjc3NQcm9wQml0cyc6MTYsJ2Nzc0xpdEdyb3VwJzpbTFs0N10sTFs1NF1dfSwnY3VlLWFmdGVyJzp7J2Nzc1Byb3BCaXRzJzoxNiwnY3NzTGl0R3JvdXAnOltMWzQ3XSxMWzU0XV19LCdjdWUtYmVmb3JlJzp7J2Nzc1Byb3BCaXRzJzoxNiwnY3NzTGl0R3JvdXAnOltMWzQ3XSxMWzU0XV19LCdjdXJzb3InOnsnY3NzRXh0cmEnOmNbMF0sJ2Nzc1Byb3BCaXRzJzoxNDQsJ2Nzc0xpdEdyb3VwJzpbTFsxXSxMWzM1XSxMWzM4XSxMWzQ3XV19LCdkaXJlY3Rpb24nOnsnY3NzUHJvcEJpdHMnOjAsJ2Nzc0xpdEdyb3VwJzpbTFszMV0sTFs0N11dfSwnZGlzcGxheSc6eydjc3NQcm9wQml0cyc6MzIsJ2Nzc0xpdEdyb3VwJzpbTFsyXSxMWzQ3XSxMWzU0XV19LCdlbGV2YXRpb24nOnsnY3NzUHJvcEJpdHMnOjUsJ2Nzc0xpdEdyb3VwJzpbTFsxM10sTFs0N11dfSwnZW1wdHktY2VsbHMnOnsnY3NzUHJvcEJpdHMnOjAsJ2Nzc0xpdEdyb3VwJzpbTFsyN10sTFs0N11dfSwnZmlsdGVyJzp7J2Nzc0V4dHJhJzovXiAqKD86XHMqYWxwaGFcKFxzKm9wYWNpdHlccyo9XHMqKD86MHxcZCsoPzpcLlxkKyk/JXxbK1wtXT9cZCsoPzpcLlxkKyk/KSAqXCkpKyAqJC9pLCdjc3NQcm9wQml0cyc6MzJ9LCdmbG9hdCc6eydjc3NBbHRlcm5hdGVzJzpbJ2Nzc0Zsb2F0Jywnc3R5bGVGbG9hdCddLCdjc3NQcm9wQml0cyc6MzIsJ2Nzc0xpdEdyb3VwJzpbTFszMF0sTFs0N10sTFs1NF1dfSwnZm9udCc6eydjc3NFeHRyYSc6Y1swXSwnY3NzUHJvcEJpdHMnOjksJ2Nzc0xpdEdyb3VwJzpbTFs0XSxMWzddLExbMTFdLExbMTVdLExbMjldLExbMzVdLExbMzZdLExbNDddLExbNTJdLExbNTVdLExbNjBdXX0sJ2ZvbnQtZmFtaWx5Jzp7J2Nzc0V4dHJhJzpjWzBdLCdjc3NQcm9wQml0cyc6OCwnY3NzTGl0R3JvdXAnOltMWzE1XSxMWzM1XSxMWzQ3XV19LCdmb250LXNpemUnOnsnY3NzUHJvcEJpdHMnOjEsJ2Nzc0xpdEdyb3VwJzpbTFs3XSxMWzQ3XSxMWzUyXV19LCdmb250LXN0cmV0Y2gnOnsnY3NzUHJvcEJpdHMnOjAsJ2Nzc0xpdEdyb3VwJzpbTFs1XSxMWzU1XV19LCdmb250LXN0eWxlJzp7J2Nzc1Byb3BCaXRzJzowLCdjc3NMaXRHcm91cCc6W0xbMjldLExbNDddLExbNTVdXX0sJ2ZvbnQtdmFyaWFudCc6eydjc3NQcm9wQml0cyc6MCwnY3NzTGl0R3JvdXAnOltMWzQ3XSxMWzU1XSxMWzYwXV19LCdmb250LXdlaWdodCc6eydjc3NQcm9wQml0cyc6MCwnY3NzTGl0R3JvdXAnOltMWzRdLExbNDddLExbNTVdXX0sJ2hlaWdodCc6eydjc3NQcm9wQml0cyc6MzcsJ2Nzc0xpdEdyb3VwJzpbTFszOF0sTFs0N11dfSwnbGVmdCc6eydjc3NQcm9wQml0cyc6MzcsJ2Nzc0xpdEdyb3VwJzpbTFszOF0sTFs0N11dfSwnbGV0dGVyLXNwYWNpbmcnOnsnY3NzUHJvcEJpdHMnOjUsJ2Nzc0xpdEdyb3VwJzpbTFs0N10sTFs1NV1dfSwnbGluZS1oZWlnaHQnOnsnY3NzUHJvcEJpdHMnOjEsJ2Nzc0xpdEdyb3VwJzpbTFs0N10sTFs1NV1dfSwnbGlzdC1zdHlsZSc6eydjc3NQcm9wQml0cyc6MTYsJ2Nzc0xpdEdyb3VwJzpbTFszXSxMWzI4XSxMWzQ3XSxMWzU0XV19LCdsaXN0LXN0eWxlLWltYWdlJzp7J2Nzc1Byb3BCaXRzJzoxNiwnY3NzTGl0R3JvdXAnOltMWzQ3XSxMWzU0XV19LCdsaXN0LXN0eWxlLXBvc2l0aW9uJzp7J2Nzc1Byb3BCaXRzJzowLCdjc3NMaXRHcm91cCc6W0xbMjhdLExbNDddXX0sJ2xpc3Qtc3R5bGUtdHlwZSc6eydjc3NQcm9wQml0cyc6MCwnY3NzTGl0R3JvdXAnOltMWzNdLExbNDddLExbNTRdXX0sJ21hcmdpbic6eydjc3NQcm9wQml0cyc6NSwnY3NzTGl0R3JvdXAnOltMWzM4XSxMWzQ3XV19LCdtYXJnaW4tYm90dG9tJzp7J2Nzc1Byb3BCaXRzJzo1LCdjc3NMaXRHcm91cCc6W0xbMzhdLExbNDddXX0sJ21hcmdpbi1sZWZ0Jzp7J2Nzc1Byb3BCaXRzJzo1LCdjc3NMaXRHcm91cCc6W0xbMzhdLExbNDddXX0sJ21hcmdpbi1yaWdodCc6eydjc3NQcm9wQml0cyc6NSwnY3NzTGl0R3JvdXAnOltMWzM4XSxMWzQ3XV19LCdtYXJnaW4tdG9wJzp7J2Nzc1Byb3BCaXRzJzo1LCdjc3NMaXRHcm91cCc6W0xbMzhdLExbNDddXX0sJ21heC1oZWlnaHQnOnsnY3NzUHJvcEJpdHMnOjEsJ2Nzc0xpdEdyb3VwJzpbTFszOF0sTFs0N10sTFs1NF1dfSwnbWF4LXdpZHRoJzp7J2Nzc1Byb3BCaXRzJzoxLCdjc3NMaXRHcm91cCc6W0xbMzhdLExbNDddLExbNTRdXX0sJ21pbi1oZWlnaHQnOnsnY3NzUHJvcEJpdHMnOjEsJ2Nzc0xpdEdyb3VwJzpbTFszOF0sTFs0N11dfSwnbWluLXdpZHRoJzp7J2Nzc1Byb3BCaXRzJzoxLCdjc3NMaXRHcm91cCc6W0xbMzhdLExbNDddXX0sJ29wYWNpdHknOnsnY3NzUHJvcEJpdHMnOjMzLCdjc3NMaXRHcm91cCc6W0xbNDddXX0sJ291dGxpbmUnOnsnY3NzRXh0cmEnOmNbM10sJ2Nzc1Byb3BCaXRzJzo3LCdjc3NMaXRHcm91cCc6W0xbMF0sTFs5XSxMWzM0XSxMWzQ2XSxMWzQ3XSxMWzQ4XSxMWzQ5XSxMWzUyXSxMWzU0XV19LCdvdXRsaW5lLWNvbG9yJzp7J2Nzc0V4dHJhJzpjWzJdLCdjc3NQcm9wQml0cyc6MiwnY3NzTGl0R3JvdXAnOltMWzBdLExbNDddLExbNDldXX0sJ291dGxpbmUtc3R5bGUnOnsnY3NzUHJvcEJpdHMnOjAsJ2Nzc0xpdEdyb3VwJzpbTFs5XSxMWzQ2XSxMWzQ3XSxMWzQ4XSxMWzU0XV19LCdvdXRsaW5lLXdpZHRoJzp7J2Nzc1Byb3BCaXRzJzo1LCdjc3NMaXRHcm91cCc6W0xbMzRdLExbNDddLExbNTJdXX0sJ292ZXJmbG93Jzp7J2Nzc1Byb3BCaXRzJzozMiwnY3NzTGl0R3JvdXAnOltMWzM4XSxMWzQ2XSxMWzQ3XSxMWzU4XSxMWzYzXV19LCdvdmVyZmxvdy14Jzp7J2Nzc1Byb3BCaXRzJzowLCdjc3NMaXRHcm91cCc6W0xbMzJdLExbMzhdLExbNDZdLExbNThdLExbNjNdXX0sJ292ZXJmbG93LXknOnsnY3NzUHJvcEJpdHMnOjAsJ2Nzc0xpdEdyb3VwJzpbTFszMl0sTFszOF0sTFs0Nl0sTFs1OF0sTFs2M11dfSwncGFkZGluZyc6eydjc3NQcm9wQml0cyc6MSwnY3NzTGl0R3JvdXAnOltMWzQ3XV19LCdwYWRkaW5nLWJvdHRvbSc6eydjc3NQcm9wQml0cyc6MzMsJ2Nzc0xpdEdyb3VwJzpbTFs0N11dfSwncGFkZGluZy1sZWZ0Jzp7J2Nzc1Byb3BCaXRzJzozMywnY3NzTGl0R3JvdXAnOltMWzQ3XV19LCdwYWRkaW5nLXJpZ2h0Jzp7J2Nzc1Byb3BCaXRzJzozMywnY3NzTGl0R3JvdXAnOltMWzQ3XV19LCdwYWRkaW5nLXRvcCc6eydjc3NQcm9wQml0cyc6MzMsJ2Nzc0xpdEdyb3VwJzpbTFs0N11dfSwncGFnZS1icmVhay1hZnRlcic6eydjc3NQcm9wQml0cyc6MCwnY3NzTGl0R3JvdXAnOltMWzMwXSxMWzM3XSxMWzM4XSxMWzM5XSxMWzQ3XV19LCdwYWdlLWJyZWFrLWJlZm9yZSc6eydjc3NQcm9wQml0cyc6MCwnY3NzTGl0R3JvdXAnOltMWzMwXSxMWzM3XSxMWzM4XSxMWzM5XSxMWzQ3XV19LCdwYWdlLWJyZWFrLWluc2lkZSc6eydjc3NQcm9wQml0cyc6MCwnY3NzTGl0R3JvdXAnOltMWzM4XSxMWzM5XSxMWzQ3XV19LCdwYXVzZSc6eydjc3NQcm9wQml0cyc6NSwnY3NzTGl0R3JvdXAnOltMWzQ3XV19LCdwYXVzZS1hZnRlcic6eydjc3NQcm9wQml0cyc6NSwnY3NzTGl0R3JvdXAnOltMWzQ3XV19LCdwYXVzZS1iZWZvcmUnOnsnY3NzUHJvcEJpdHMnOjUsJ2Nzc0xpdEdyb3VwJzpbTFs0N11dfSwncGl0Y2gnOnsnY3NzUHJvcEJpdHMnOjUsJ2Nzc0xpdEdyb3VwJzpbTFsxOV0sTFs0N10sTFs1Ml1dfSwncGl0Y2gtcmFuZ2UnOnsnY3NzUHJvcEJpdHMnOjUsJ2Nzc0xpdEdyb3VwJzpbTFs0N11dfSwncGxheS1kdXJpbmcnOnsnY3NzRXh0cmEnOmNbMF0sJ2Nzc1Byb3BCaXRzJzoxNiwnY3NzTGl0R3JvdXAnOltMWzM4XSxMWzQ3XSxMWzUzXSxMWzU0XSxMWzU3XV19LCdwb3NpdGlvbic6eydjc3NQcm9wQml0cyc6MzIsJ2Nzc0xpdEdyb3VwJzpbTFsyMF0sTFs0N11dfSwncXVvdGVzJzp7J2Nzc0V4dHJhJzpjWzBdLCdjc3NQcm9wQml0cyc6MCwnY3NzTGl0R3JvdXAnOltMWzQ3XSxMWzU0XV19LCdyaWNobmVzcyc6eydjc3NQcm9wQml0cyc6NSwnY3NzTGl0R3JvdXAnOltMWzQ3XV19LCdyaWdodCc6eydjc3NQcm9wQml0cyc6MzcsJ2Nzc0xpdEdyb3VwJzpbTFszOF0sTFs0N11dfSwnc3BlYWsnOnsnY3NzUHJvcEJpdHMnOjAsJ2Nzc0xpdEdyb3VwJzpbTFs0N10sTFs1NF0sTFs1NV0sTFs2MV1dfSwnc3BlYWstaGVhZGVyJzp7J2Nzc1Byb3BCaXRzJzowLCdjc3NMaXRHcm91cCc6W0xbMzddLExbNDddLExbNTZdXX0sJ3NwZWFrLW51bWVyYWwnOnsnY3NzUHJvcEJpdHMnOjAsJ2Nzc0xpdEdyb3VwJzpbTFsyNl0sTFs0N11dfSwnc3BlYWstcHVuY3R1YXRpb24nOnsnY3NzUHJvcEJpdHMnOjAsJ2Nzc0xpdEdyb3VwJzpbTFs0M10sTFs0N10sTFs1NF1dfSwnc3BlZWNoLXJhdGUnOnsnY3NzUHJvcEJpdHMnOjUsJ2Nzc0xpdEdyb3VwJzpbTFsxMl0sTFs0N10sTFs1Ml1dfSwnc3RyZXNzJzp7J2Nzc1Byb3BCaXRzJzo1LCdjc3NMaXRHcm91cCc6W0xbNDddXX0sJ3RhYmxlLWxheW91dCc6eydjc3NQcm9wQml0cyc6MCwnY3NzTGl0R3JvdXAnOltMWzM4XSxMWzQ1XSxMWzQ3XV19LCd0ZXh0LWFsaWduJzp7J2Nzc1Byb3BCaXRzJzowLCdjc3NMaXRHcm91cCc6W0xbMzBdLExbNDJdLExbNDddLExbNTBdXX0sJ3RleHQtZGVjb3JhdGlvbic6eydjc3NQcm9wQml0cyc6MCwnY3NzTGl0R3JvdXAnOltMWzE4XSxMWzQ3XSxMWzU0XV19LCd0ZXh0LWluZGVudCc6eydjc3NQcm9wQml0cyc6NSwnY3NzTGl0R3JvdXAnOltMWzQ3XV19LCd0ZXh0LW92ZXJmbG93Jzp7J2Nzc1Byb3BCaXRzJzowLCdjc3NMaXRHcm91cCc6W0xbMjVdXX0sJ3RleHQtc2hhZG93Jzp7J2Nzc0V4dHJhJzpjWzFdLCdjc3NQcm9wQml0cyc6NywnY3NzTGl0R3JvdXAnOltMWzBdLExbMzVdLExbNDhdLExbNTRdXX0sJ3RleHQtdHJhbnNmb3JtJzp7J2Nzc1Byb3BCaXRzJzowLCdjc3NMaXRHcm91cCc6W0xbMjFdLExbNDddLExbNTRdXX0sJ3RleHQtd3JhcCc6eydjc3NQcm9wQml0cyc6MCwnY3NzTGl0R3JvdXAnOltMWzMzXSxMWzU0XSxMWzU1XV19LCd0b3AnOnsnY3NzUHJvcEJpdHMnOjM3LCdjc3NMaXRHcm91cCc6W0xbMzhdLExbNDddXX0sJ3VuaWNvZGUtYmlkaSc6eydjc3NQcm9wQml0cyc6MCwnY3NzTGl0R3JvdXAnOltMWzIzXSxMWzQ3XSxMWzU1XV19LCd2ZXJ0aWNhbC1hbGlnbic6eydjc3NQcm9wQml0cyc6NSwnY3NzTGl0R3JvdXAnOltMWzEwXSxMWzI0XSxMWzQ3XV19LCd2aXNpYmlsaXR5Jzp7J2Nzc1Byb3BCaXRzJzozMiwnY3NzTGl0R3JvdXAnOltMWzQ0XSxMWzQ2XSxMWzQ3XSxMWzYzXV19LCd2b2ljZS1mYW1pbHknOnsnY3NzRXh0cmEnOmNbMF0sJ2Nzc1Byb3BCaXRzJzo4LCdjc3NMaXRHcm91cCc6W0xbMjJdLExbMzVdLExbNDddXX0sJ3ZvbHVtZSc6eydjc3NQcm9wQml0cyc6MSwnY3NzTGl0R3JvdXAnOltMWzE2XSxMWzQ3XSxMWzUyXV19LCd3aGl0ZS1zcGFjZSc6eydjc3NQcm9wQml0cyc6MCwnY3NzTGl0R3JvdXAnOltMWzhdLExbNDddLExbNTVdXX0sJ3dpZHRoJzp7J2Nzc1Byb3BCaXRzJzozMywnY3NzTGl0R3JvdXAnOltMWzM4XSxMWzQ3XV19LCd3b3JkLXNwYWNpbmcnOnsnY3NzUHJvcEJpdHMnOjUsJ2Nzc0xpdEdyb3VwJzpbTFs0N10sTFs1NV1dfSwnd29yZC13cmFwJzp7J2Nzc1Byb3BCaXRzJzowLCdjc3NMaXRHcm91cCc6W0xbNDFdLExbNTVdXX0sJ3otaW5kZXgnOnsnY3NzUHJvcEJpdHMnOjY5LCdjc3NMaXRHcm91cCc6W0xbMzhdLExbNDddXX0sJ3pvb20nOnsnY3NzUHJvcEJpdHMnOjEsJ2Nzc0xpdEdyb3VwJzpbTFs1NV1dfX19KSgpO2lmKHR5cGVvZiB3aW5kb3chPT0ndW5kZWZpbmVkJyl7d2luZG93Wydjc3NTY2hlbWEnXT1jc3NTY2hlbWF9DQovLyBDb3B5cmlnaHQgKEMpIDIwMTEgR29vZ2xlIEluYy4NCi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOw0KLy8geW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLg0KLy8gWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0DQovLyAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMA0KLy8gZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywNCi8vIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQNCi8vIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLg0KdmFyIGxleENzczt2YXIgZGVjb2RlQ3NzOyhmdW5jdGlvbigpe2Z1bmN0aW9uIGQocyl7dmFyIGk9cGFyc2VJbnQocy5zdWJzdHJpbmcoMSksMTYpO2lmKGk+MHhmZmZmKXtyZXR1cm4gaS09MHgxMDAwMCxTdHJpbmcuZnJvbUNoYXJDb2RlKDB4ZDgwMCsoaT4+MTApLDB4ZGMwMCsoaSYweDNGRikpfWVsc2UgaWYoaT09aSl7cmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUoaSl9ZWxzZSBpZihzWzFdPCcgJyl7cmV0dXJuJyd9ZWxzZXtyZXR1cm4gc1sxXX19ZnVuY3Rpb24gZShzLGkpe3JldHVybiciJytzLnJlcGxhY2UoL1tcdTAwMDAtXHUwMDFmXFxcIjw+XS9nLGkpKyciJ31mdW5jdGlvbiBhKGkpe3JldHVybiBjW2ldfHwoY1tpXT0nXFwnK2kuY2hhckNvZGVBdCgwKS50b1N0cmluZygxNikrJyAnKX1mdW5jdGlvbiBiKGkpe3JldHVybiBmW2ldfHwoZltpXT0oaTwnXHgxMCc/JyUwJzonJScpK2kuY2hhckNvZGVBdCgwKS50b1N0cmluZygxNikpfXZhciBjPXsnXFwnOidcXFxcJ307dmFyIGY9eydcXCc6JyU1Yyd9O3ZhciBnPSdbXFx0XFxuXFxmIF0nO3ZhciBXPWcrJyonO3ZhciBOPSdbXFxuXFxmXSc7dmFyIGg9J1tcXHVkODAwLVxcdWRiZmZdW1xcdWRjMDAtXFx1ZGZmZl0nO3ZhciBrPSdbXFx1MDA4MC1cXHVkN2ZmXFx1ZTAwMC1cXHVmZmZkXXwnK2g7dmFyIFU9J1swLTlhLWZBLUZdezEsNn0nK2crJz8nO3ZhciBsPSdcXFxcJytVO3ZhciBFPScoPzonK1UrJ3xbXFx1MDAyMC1cXHUwMDdlXFx1MDA4MC1cXHVkN2ZmXFx1ZTAwMFxcdWZmZmRdfCcraCsnKSc7dmFyIG09J1xcXFwnK0U7dmFyIG89Jyg/OltcXHRcXHgyMVxceDIzLVxceDI2XFx4MjgtXFx4NWJcXHg1ZC1cXHg3ZV18JytrKyd8JyttKycpJzt2YXIgcD0nW15cJyJcXG5cXGZcXFxcXXxcXFxcW1xcc1xcU10nO3ZhciBxPSciKD86XCd8JytwKycpKiInKyd8XCcoPzpcInwnK3ArJykqXCcnO3ZhciByPSdbLStdPyg/OlswLTldKyg/OlsuXVswLTldKyk/fFsuXVswLTldKyknO3ZhciB0PScoPzpbYS16QS1aX118JytrKyd8JyttKycpJzt2YXIgdT0nKD86W2EtekEtWjAtOV8tXXwnK2srJ3wnK20rJyknO3ZhciB2PXUrJysnO3ZhciBJPSctPycrdCt1KycqJzt2YXIgQT0nQCcrSTt2YXIgSD0nIycrdjt2YXIgdz1yO3ZhciB4PScoPzpAPy0/Jyt0Kyd8IyknK3UrJyonO3ZhciBQPXIrJyUnO3ZhciBEPXIrSTt2YXIgeT1yKycoPzolfCcrSSsnKT8nO3ZhciB6PSd1cmxbKF0nK1crJyg/OicrcSsnfCcrbysnKiknK1crJ1spXSc7dmFyIEI9J1VbK11bMC05QS1GP117MSw2fSg/Oi1bMC05QS1GXXsxLDZ9KT8nO3ZhciBDPSc8XCEtLSc7dmFyIEY9Jy0tPic7dmFyIFM9ZysnKyc7dmFyIEc9Jy8oPzpbKl1bXipdKlsqXSsoPzpbXi9dW14qXSpbKl0rKSovfC9bXlxcblxcZl0qKSc7dmFyIEo9Jyg/IXVybFsoXSknK0krJ1soXSc7dmFyIEs9J349Jzt2YXIgTD0nW3xdPSc7dmFyIE09J1teXT0nO3ZhciBPPSdbJF09Jzt2YXIgUT0nWypdPSc7dmFyIFI9J1t+fF4kKl09Jzt2YXIgVD0nW14iXCdcXFxcL118Lyg/IVsvKl0pJzt2YXIgVj0nXFx1RkVGRic7dmFyIFg9bmV3IFJlZ0V4cChbVixCLHosSix4LHEseSxDLEYsUyxHLFIsVF0uam9pbigifCIpLCdnaScpO2RlY29kZUNzcz1mdW5jdGlvbihpKXtyZXR1cm4gaS5yZXBsYWNlKG5ldyBSZWdFeHAoJ1xcXFwoPzonK0UrJ3wnK04rJyknLCdnJyksZCl9O2xleENzcz1mdW5jdGlvbihzKXtzPScnK3M7dmFyIFk9cy5yZXBsYWNlKC9cclxuPy9nLCdcbicpLm1hdGNoKFgpfHxbXTt2YXIgaj0wO3ZhciBaPScgJztmb3IodmFyIGk9MCxuPVkubGVuZ3RoO2k8bjsrK2kpe3ZhciAkPWRlY29kZUNzcyhZW2ldKTt2YXIgXz0kLmxlbmd0aDt2YXIgY2M9JC5jaGFyQ29kZUF0KDApOyQ9KGNjPT0nIicuY2hhckNvZGVBdCgwKXx8Y2M9PSdcJycuY2hhckNvZGVBdCgwKSk/ZSgkLnN1YnN0cmluZygxLF8tMSksYSk6KGNjPT0nLycuY2hhckNvZGVBdCgwKSYmXz4xfHwkPT0nXFwnfHwkPT1GfHwkPT1DfHwkPT0nXHVmZWZmJ3x8Y2M8PScgJy5jaGFyQ29kZUF0KDApKT8nICc6L3VybFwoL2kudGVzdCgkKT8ndXJsKCcrZSgkLnJlcGxhY2UobmV3IFJlZ0V4cCgnXnVybFxcKCcrVysnWyJcJ10/fFsiXCddPycrVysnXFwpJCcsJ2dpJyksJycpLGIpKycpJzokO2lmKFohPSR8fCQhPScgJyl7WVtqKytdPVo9JH19WS5sZW5ndGg9ajtyZXR1cm4gWX19KSgpO2lmKHR5cGVvZiB3aW5kb3chPT0ndW5kZWZpbmVkJyl7d2luZG93WydsZXhDc3MnXT1sZXhDc3M7d2luZG93WydkZWNvZGVDc3MnXT1kZWNvZGVDc3N9DQovLyBDb3B5cmlnaHQgKEMpIDIwMTEgR29vZ2xlIEluYy4NCi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOw0KLy8geW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLg0KLy8gWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0DQovLyAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMA0KLy8gZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywNCi8vIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQNCi8vIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLg0KdmFyIHNhbml0aXplQ3NzUHJvcGVydHk9KGZ1bmN0aW9uKCl7dmFyIE49J3VybCgiYWJvdXQ6YmxhbmsiKSc7dmFyIGE9L1tcblxmXHJcIlwnKCkqPD5dL2c7dmFyIGI9eydcbic6JyUwYScsJ1xmJzonJTBjJywnXHInOiclMGQnLCciJzonJTIyJywnXCcnOiclMjcnLCcoJzonJTI4JywnKSc6JyUyOScsJyonOiclMmEnLCc8JzonJTNjJywnPic6JyUzZSd9O2Z1bmN0aW9uIGMocyl7aWYoJ3N0cmluZyc9PT10eXBlb2Ygcyl7cmV0dXJuJ3VybCgiJytzLnJlcGxhY2UoYSxkKSsnIiknfWVsc2V7cmV0dXJuIE59fWZ1bmN0aW9uIGQoaCl7cmV0dXJuIGJbaF19dmFyIFU9bmV3IFJlZ0V4cCgnXicrJyg/OicrJyhbXjpcLz8jIF0rKScrJzopPycpO3ZhciBBPS9eKD86aHR0cHM/fG1haWx0bykkL2k7ZnVuY3Rpb24gZShoLHAsbil7aWYoIW4pe3JldHVybiBudWxsfXZhciBpPSgnJytoKS5tYXRjaChVKTtpZihpJiYoIWlbMV18fEEudGVzdChpWzFdKSkpe3JldHVybiBuKGgscCl9ZWxzZXtyZXR1cm4gbnVsbH19ZnVuY3Rpb24gdShoKXt2YXIgbT17fTtmb3IodmFyIGk9aC5sZW5ndGg7LS1pPj0wOyl7dmFyIGs9aFtpXTtmb3IodmFyIGo9ay5sZW5ndGg7LS1qPj0wOyl7bVtrW2pdXT1nfX1yZXR1cm4gbX1mdW5jdGlvbiBmKHQscyl7dmFyIHA9MSxoPXMrMSxuPXQubGVuZ3RoO3doaWxlKGg8biYmcCl7dmFyIGk9dFtoKytdO3ArPShpPT09JygnPzE6aT09PScpJz8tMTowKX1yZXR1cm4gaH12YXIgZz17fTtyZXR1cm4gZnVuY3Rpb24ocCxoLHQsbyl7dmFyIGo9aC5jc3NQcm9wQml0czt2YXIgcT1qJihDU1NfUFJPUF9CSVRfUVNUUklOR19DT05URU5UfENTU19QUk9QX0JJVF9RU1RSSU5HX1VSTCk7dmFyIGw9TmFOO3ZhciBpPTAsaz0wO2Zvcig7aTx0Lmxlbmd0aDsrK2kpe3ZhciBtPXRbaV0udG9Mb3dlckNhc2UoKTt2YXIgbj1tLmNoYXJDb2RlQXQoMCkscixzLHYsdyx4O3ZhciB5LHo7bT0oKG49PT0nICcuY2hhckNvZGVBdCgwKSk/Jyc6KG49PT0nIicuY2hhckNvZGVBdCgwKSk/KChxPT09Q1NTX1BST1BfQklUX1FTVFJJTkdfVVJMJiZvKT8oYyhlKGRlY29kZUNzcyh0W2ldLnN1YnN0cmluZygxLG0ubGVuZ3RoLTEpKSxwLG8pKSk6KHE9PT1DU1NfUFJPUF9CSVRfUVNUUklOR19DT05URU5UKT9tOicnKToobj09PScjJy5jaGFyQ29kZUF0KDApJiYvXiMoPzpbMC05YS1mXXszfSl7MSwyfSQvLnRlc3QobSkpPyhqJkNTU19QUk9QX0JJVF9IQVNIX1ZBTFVFP206JycpOignMCcuY2hhckNvZGVBdCgwKTw9biYmbjw9JzknLmNoYXJDb2RlQXQoMCkpPygoaiZDU1NfUFJPUF9CSVRfUVVBTlRJVFkpPygoaiZDU1NfUFJPUF9CSVRfWl9JTkRFWCk/KG0ubWF0Y2goL15cZHsxLDd9JC8pP206JycpOm0pOicnKToocj1tLmNoYXJDb2RlQXQoMSkscz1tLmNoYXJDb2RlQXQoMiksdj0nMCcuY2hhckNvZGVBdCgwKTw9ciYmcjw9JzknLmNoYXJDb2RlQXQoMCksdz0nMCcuY2hhckNvZGVBdCgwKTw9cyYmczw9JzknLmNoYXJDb2RlQXQoMCksKG49PT0nKycuY2hhckNvZGVBdCgwKSYmKHZ8fChyPT09Jy4nLmNoYXJDb2RlQXQoMCkmJncpKSkpPygoaiZDU1NfUFJPUF9CSVRfUVVBTlRJVFkpPygoaiZDU1NfUFJPUF9CSVRfWl9JTkRFWCk/KG0ubWF0Y2goL15cK1xkezEsN30kLyk/bTonJyk6KCh2PycnOicwJykrbS5zdWJzdHJpbmcoMSkpKTonJyk6KG49PT0nLScuY2hhckNvZGVBdCgwKSYmKHZ8fChyPT09Jy4nLmNoYXJDb2RlQXQoMCkmJncpKSk/KChqJkNTU19QUk9QX0JJVF9ORUdBVElWRV9RVUFOVElUWSk/KChqJkNTU19QUk9QX0JJVF9aX0lOREVYKT8obS5tYXRjaCgvXlwtXGR7MSw3fSQvKT9tOicnKTooKHY/Jy0nOictMCcpK20uc3Vic3RyaW5nKDEpKSk6KChqJkNTU19QUk9QX0JJVF9RVUFOVElUWSk/JzAnOicnKSk6KG49PT0nLicuY2hhckNvZGVBdCgwKSYmdik/KChqJkNTU19QUk9QX0JJVF9RVUFOVElUWSk/JzAnK206JycpOigndXJsKCc9PT1tLnN1YnN0cmluZygwLDQpKT8oKG8mJihxJkNTU19QUk9QX0JJVF9RU1RSSU5HX1VSTCkpP2MoZSh0W2ldLnN1YnN0cmluZyg1LG0ubGVuZ3RoLTIpLHAsbykpOicnKTooKG0uY2hhckF0KG0ubGVuZ3RoLTEpPT09JygnKSYmKHg9Zih0LGkpLHQuc3BsaWNlKGkseC1pLG09dC5zbGljZShpLHgpLmpvaW4oJyAnKSkpLHk9aC5jc3NMaXRHcm91cCx6PSh5PyhoLmNzc0xpdE1hcHx8KGguY3NzTGl0TWFwPXUoeSkpKTpnKSwoelttXT09PWd8fGguY3NzRXh0cmEmJmguY3NzRXh0cmEudGVzdChtKSkpP206KC9eXHcrJC8udGVzdChtKSYmKHE9PT1DU1NfUFJPUF9CSVRfUVNUUklOR19DT05URU5UKSk/KGwrMT09PWs/KHRbbF09dFtsXS5zdWJzdHJpbmcoMCx0W2xdLmxlbmd0aC0xKSsnICcrbSsnIicsbT0nJyk6KGw9aywnIicrbSsnIicpKTonJyk7aWYobSl7dFtrKytdPW19fWlmKGs9PT0xJiZ0WzBdPT09Til7az0wfXQubGVuZ3RoPWt9fSkoKTsNCmZ1bmN0aW9uIHNhbml0aXplQ3NzU2VsZWN0b3JzKHMsYSl7dmFyIGg9W107dmFyIGI9W107dmFyIGs9MCxpO2ZvcihpPTA7aTxzLmxlbmd0aDsrK2kpe2lmKCEoc1tpXT09JyAnJiYoc1tpLTFdPT0nPid8fHNbaSsxXT09Jz4nKSkpe3NbaysrXT1zW2ldfX1zLmxlbmd0aD1rO3ZhciBuPXMubGVuZ3RoLGM9MDtmb3IoaT0wO2k8bjsrK2kpe2lmKHNbaV09PScsJyl7cChjLGkpO2M9aSsxfX1wKGMsbik7ZnVuY3Rpb24gcChjLGUpe3ZhciBkPWZhbHNlO2lmKHNbY109PT0nICcpeysrY31pZihlLTEhPT1jJiZzW2VdPT09JyAnKXstLWV9dmFyIG89W107dmFyIGw9Yzt2YXIgZj0nJztmb3IodmFyIGk9YztpPGU7KytpKXt2YXIgdD1zW2ldO3ZhciBnPSh0PT09Jz4nKTtpZihnfHx0PT09JyAnKXtmPWoobCxpLGZhbHNlKTtpZighZnx8KGcmJi9eaHRtbC9pLnRlc3QoZikpKXtyZXR1cm59bD1pKzE7by5wdXNoKGYsZz8nID4gJzonICcpfX1mPWoobCxlLHRydWUpO2lmKCFmKXtyZXR1cm59by5wdXNoKGYpO2Z1bmN0aW9uIGooYyxlLHEpe3ZhciByPWMsdT1lO3ZhciB2LHcseCx0LHk7dj0nJztpZihjPGUpe3Q9c1tjXS50b0xvd2VyQ2FzZSgpO2lmKHQ9PT0nKid8fCh0PT09J2JvZHknJiZjKzEhPT1lJiYhcSl8fCgnbnVtYmVyJz09PXR5cGVvZih5PWh0bWw0LkVMRU1FTlRTW3RdKSYmISh5Jmh0bWw0LmVmbGFncy5VTlNBRkUpKSl7KytjO3Y9dH19dz0nJzt3aGlsZShjPGUpe3Q9c1tjXTtpZih0LmNoYXJBdCgwKT09PScjJyl7aWYoL14jX3xfXyR8W14jMC05QS1aYS16Ol9cLV0vLnRlc3QodCkpe3JldHVybiBudWxsfXcrPXQrJy0nK2F9ZWxzZSBpZih0PT09Jy4nKXtpZigrK2M8ZSYmL15bMC05QS1aYS16Ol9cLV0rJC8udGVzdCh0PXNbY10pJiYhL15ffF9fJC8udGVzdCh0KSl7dys9Jy4nK3R9ZWxzZXtyZXR1cm4gbnVsbH19ZWxzZXticmVha30rK2N9eD0nJztpZihjPGUmJnNbY109PT0nOicpe3Q9c1srK2NdO2lmKHQ9PT0ndmlzaXRlZCd8fHQ9PT0nbGluaycpe2lmKCEvXlthKl0/JC8udGVzdCh2KSl7cmV0dXJuIG51bGx9ZD10cnVlO3g9JzonK3Q7dj0nYSc7KytjfX1pZihjPT09ZSl7cmV0dXJuIHYrdyt4fXJldHVybiBudWxsfXZhciBtPW8uam9pbignJyk7aWYoL15ib2R5XGIvLnRlc3QobSkpe209Jy52ZG9jLWJvZHlfX18uJythK20uc3Vic3RyaW5nKDQpfWVsc2V7bT0nLicrYSsnICcrbX0oZD9oOmIpLnB1c2gobSl9cmV0dXJuW2IsaF19DQp2YXIgc2FuaXRpemVTdHlsZXNoZWV0PShmdW5jdGlvbigpe3ZhciBhPXt9O3ZhciBjPXsnYnJhaWxsZSc6YSwnZW1ib3NzZWQnOmEsJ2hhbmRoZWxkJzphLCdwcmludCc6YSwncHJvamVjdGlvbic6YSwnc2NyZWVuJzphLCdzcGVlY2gnOmEsJ3R0eSc6YSwndHYnOmF9O2Z1bmN0aW9uIHMoYil7dmFyIGU9ZmFsc2U7Zm9yKHZhciBpPTAsbj1iLmxlbmd0aDtpPG4tMTsrK2kpe3ZhciB0PWJbaV07aWYoJzonPT09YltpKzFdKXtlPSEoY3NzU2NoZW1hW3RdLmNzc1Byb3BCaXRzJkNTU19QUk9QX0JJVF9BTExPV0VEX0lOX0xJTkspfWlmKGUpe2JbaV09Jyd9aWYoJzsnPT09dCl7ZT1mYWxzZX19cmV0dXJuIGIuam9pbignJyl9cmV0dXJuIGZ1bmN0aW9uKGIsZCxvKXt2YXIgZT12b2lkIDA7dmFyIGY9W107dmFyIGc9ZmFsc2U7cGFyc2VDc3NTdHlsZXNoZWV0KGIse3N0YXJ0U3R5bGVzaGVldDpmdW5jdGlvbigpe2U9W119LGVuZFN0eWxlc2hlZXQ6ZnVuY3Rpb24oKXt9LHN0YXJ0QXRydWxlOmZ1bmN0aW9uKGksail7aWYoZyl7aT1udWxsfWVsc2UgaWYoaT09PSdAbWVkaWEnKXtqPWouZmlsdGVyKGZ1bmN0aW9uKG0pe3JldHVybiBjW21dPT1hfSk7aWYoai5sZW5ndGgpe2UucHVzaChpLGouam9pbignLCcpLCd7Jyl9ZWxzZXtpPW51bGx9fWVsc2V7aWYoaT09PSdAaW1wb3J0Jyl7aWYod2luZG93LmNvbnNvbGUpe3dpbmRvdy5jb25zb2xlLmxvZygnQGltcG9ydCAnK2ouam9pbignICcpKycgZWxpZGVkJyl9fWk9bnVsbH1nPSFpO2YucHVzaChpKX0sZW5kQXRydWxlOmZ1bmN0aW9uKCl7dmFyIGk9Zi5wb3AoKTtpZighZyl7ZS5wdXNoKCc7Jyl9aCgpfSxzdGFydEJsb2NrOmZ1bmN0aW9uKCl7aWYoIWcpe2UucHVzaCgneycpfX0sZW5kQmxvY2s6ZnVuY3Rpb24oKXtpZighZyl7ZS5wdXNoKCd9Jyk7Zz10cnVlfX0sc3RhcnRSdWxlc2V0OmZ1bmN0aW9uKGkpe3ZhciBqPXZvaWQgMDt2YXIgcj1mYWxzZTtpZighZyl7dmFyIGs9c2FuaXRpemVDc3NTZWxlY3RvcnMoaSxkKTt2YXIgbD1rWzBdO2o9a1sxXTtpZighbC5sZW5ndGgmJiFqLmxlbmd0aCl7Zz10cnVlfWVsc2V7dmFyIG09bC5qb2luKCcsICcpO2lmKCFtKXttPSdoZWFkID4gaHRtbCc7cj10cnVlfWUucHVzaChtLCd7Jyl9fWYucHVzaChnP251bGw6e2hpc3RvcnlTZW5zaXRpdmVTZWxlY3RvcnM6aixlbmRPZlNlbGVjdG9yczplLmxlbmd0aC0xLHJlbW92ZUhpc3RvcnlJbnNlbnNpdGl2ZVNlbGVjdG9yczpyfSl9LGVuZFJ1bGVzZXQ6ZnVuY3Rpb24oKXt2YXIgcj1mLnBvcCgpO3ZhciBwPWUubGVuZ3RoO2lmKCFnKXtlLnB1c2goJ30nKTtpZihyKXt2YXIgaT1yLmhpc3RvcnlTZW5zaXRpdmVTZWxlY3RvcnM7aWYoaS5sZW5ndGgpe3ZhciBqPWUuc2xpY2Uoci5lbmRPZlNlbGVjdG9ycyk7ZS5wdXNoKGkuam9pbignLCAnKSxzKGopKX19fWlmKHImJnIucmVtb3ZlSGlzdG9yeUluc2Vuc2l0aXZlU2VsZWN0b3JzKXtlLnNwbGljZShyLmVuZE9mU2VsZWN0b3JzLTEscCsxKX1oKCl9LGRlY2xhcmF0aW9uOmZ1bmN0aW9uKHAsdil7aWYoIWcpe3ZhciBpPWNzc1NjaGVtYVtwXTtpZihpKXtzYW5pdGl6ZUNzc1Byb3BlcnR5KHAsaSx2LG8pO2lmKHYubGVuZ3RoKXtlLnB1c2gocCwnOicsdi5qb2luKCcgJyksJzsnKX19fX19KTtmdW5jdGlvbiBoKCl7Zz1mLmxlbmd0aCE9PTAmJmZbZi5sZW5ndGgtMV0hPT1udWxsfXJldHVybiBlLmpvaW4oJycpfX0pKCk7aWYodHlwZW9mIHdpbmRvdyE9PSd1bmRlZmluZWQnKXt3aW5kb3dbJ3Nhbml0aXplQ3NzUHJvcGVydHknXT1zYW5pdGl6ZUNzc1Byb3BlcnR5O3dpbmRvd1snc2FuaXRpemVDc3NTZWxlY3RvcnMnXT1zYW5pdGl6ZUNzc1NlbGVjdG9yczt3aW5kb3dbJ3Nhbml0aXplU3R5bGVzaGVldCddPXNhbml0aXplU3R5bGVzaGVldH0NCi8vIENvcHlyaWdodCAoQykgMjAxMCBHb29nbGUgSW5jLg0KLy8gTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7DQovLyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuDQovLyBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQNCi8vICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wDQovLyBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLA0KLy8gU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZA0KLy8gbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuDQp2YXIgcGFyc2VDc3NTdHlsZXNoZWV0O3ZhciBwYXJzZUNzc0RlY2xhcmF0aW9uczsoZnVuY3Rpb24oKXtwYXJzZUNzc1N0eWxlc2hlZXQ9ZnVuY3Rpb24oZSxoKXt2YXIgdD1sZXhDc3MoZSk7aWYoaC5zdGFydFN0eWxlc2hlZXQpe2guc3RhcnRTdHlsZXNoZWV0KCl9Zm9yKHZhciBpPTAsbj10Lmxlbmd0aDtpPG47KXtpPXRbaV09PT0nICc/aSsxOmEodCxpLG4saCl9aWYoaC5lbmRTdHlsZXNoZWV0KXtoLmVuZFN0eWxlc2hlZXQoKX19O2Z1bmN0aW9uIGEodCxpLG4saCl7aWYoaTxuKXt2YXIgZT10W2ldO2lmKGUuY2hhckF0KDApPT09J0AnKXtyZXR1cm4gYih0LGksbixoLHRydWUpfWVsc2V7cmV0dXJuIHIodCxpLG4saCl9fWVsc2V7cmV0dXJuIGl9fWZ1bmN0aW9uIGIodCxpLG4saCxqKXt2YXIgaz1pKys7d2hpbGUoaTxuJiZ0W2ldIT09J3snJiZ0W2ldIT09JzsnKXsrK2l9aWYoaTxuJiYoanx8dFtpXT09PSc7Jykpe3ZhciBzPWsrMSxlPWk7aWYoczxuJiZ0W3NdPT09JyAnKXsrK3N9aWYoZT5zJiZ0W2UtMV09PT0nICcpey0tZX1pZihoLnN0YXJ0QXRydWxlKXtoLnN0YXJ0QXRydWxlKHRba10udG9Mb3dlckNhc2UoKSx0LnNsaWNlKHMsZSkpfWk9KHRbaV09PT0neycpP2ModCxpLG4saCk6aSsxO2lmKGguZW5kQXRydWxlKXtoLmVuZEF0cnVsZSgpfX1yZXR1cm4gaX1mdW5jdGlvbiBjKHQsaSxuLGgpeysraTtpZihoLnN0YXJ0QmxvY2spe2guc3RhcnRCbG9jaygpfXdoaWxlKGk8bil7dmFyIGU9dFtpXS5jaGFyQXQoMCk7aWYoZT09J30nKXsrK2k7YnJlYWt9aWYoZT09PScgJ3x8ZT09PSc7Jyl7aT1pKzF9ZWxzZSBpZihlPT09J0AnKXtpPWIodCxpLG4saCxmYWxzZSl9ZWxzZSBpZihlPT09J3snKXtpPWModCxpLG4saCl9ZWxzZXtpPXIodCxpLG4saCl9fWlmKGguZW5kQmxvY2spe2guZW5kQmxvY2soKX1yZXR1cm4gaX1mdW5jdGlvbiByKHQsaSxuLGgpe3ZhciBzPWksZT1kKHQsaSxuLHRydWUpO2lmKGU8MCl7ZT1+ZTtyZXR1cm4gaT09PWU/ZSsxOmV9aT1lO2lmKGU+cyYmdFtlLTFdPT09JyAnKXstLWV9dmFyIGo9dFtpXTsrK2k7aWYoaiE9PSd7Jyl7cmV0dXJuIGl9aWYoaC5zdGFydFJ1bGVzZXQpe2guc3RhcnRSdWxlc2V0KHQuc2xpY2UocyxlKSl9d2hpbGUoaTxuKXtqPXRbaV07aWYoaj09PSd9Jyl7KytpO2JyZWFrfWlmKGo9PT0nICcpe2k9aSsxfWVsc2V7aT1nKHQsaSxuLGgpfX1pZihoLmVuZFJ1bGVzZXQpe2guZW5kUnVsZXNldCgpfXJldHVybiBpPG4/aSsxOml9ZnVuY3Rpb24gZCh0LGksbixlKXt2YXIgcz1pO3ZhciBoO3ZhciBqPVtdLGs9LTE7Zm9yKDtpPG47KytpKXtoPXRbaV0uY2hhckF0KDApO2lmKGg9PT0nWyd8fGg9PT0nKCcpe2pbKytrXT1ofWVsc2UgaWYoKGg9PT0nXScmJmpba109PT0nWycpfHwoaD09PScpJyYmaltrXT09PScoJykpey0ta31lbHNlIGlmKGg9PT0neyd8fGg9PT0nfSd8fGg9PT0nOyd8fGg9PT0nQCd8fChoPT09JzonJiYhZSkpe2JyZWFrfX1pZihrPj0wKXtpPX4oaSsxKX1yZXR1cm4gaX12YXIgZj0vXi0/W2Etel0vaTtmdW5jdGlvbiBnKHQsaSxuLGgpe3ZhciBwPXRbaSsrXTtpZighZi50ZXN0KHApKXtyZXR1cm4gaSsxfXZhciBrO2lmKGk8biYmdFtpXT09PScgJyl7KytpfWlmKGk9PW58fHRbaV0hPT0nOicpe3doaWxlKGk8biYmKGs9dFtpXSkhPT0nOycmJmshPT0nfScpeysraX1yZXR1cm4gaX0rK2k7aWYoaTxuJiZ0W2ldPT09JyAnKXsrK2l9dmFyIHM9aSxlPWQodCxpLG4sZmFsc2UpO2lmKGU8MCl7ZT1+ZX1lbHNle3ZhciB2PVtdLGw9MDtmb3IodmFyIGo9cztqPGU7KytqKXtrPXRbal07aWYoayE9PScgJyl7dltsKytdPWt9fWlmKGU8bil7ZG97az10W2VdO2lmKGs9PT0nOyd8fGs9PT0nfScpe2JyZWFrfWw9MH13aGlsZSgrK2U8bik7aWYoaz09PSc7Jyl7KytlfX1pZihsJiZoLmRlY2xhcmF0aW9uKXtoLmRlY2xhcmF0aW9uKHAudG9Mb3dlckNhc2UoKSx2KX19cmV0dXJuIGV9cGFyc2VDc3NEZWNsYXJhdGlvbnM9ZnVuY3Rpb24oZSxoKXt2YXIgdD1sZXhDc3MoZSk7Zm9yKHZhciBpPTAsbj10Lmxlbmd0aDtpPG47KXtpPXRbaV0hPT0nICc/Zyh0LGksbixoKTppKzF9fX0pKCk7aWYodHlwZW9mIHdpbmRvdyE9PSd1bmRlZmluZWQnKXt3aW5kb3dbJ3BhcnNlQ3NzU3R5bGVzaGVldCddPXBhcnNlQ3NzU3R5bGVzaGVldDt3aW5kb3dbJ3BhcnNlQ3NzRGVjbGFyYXRpb25zJ109cGFyc2VDc3NEZWNsYXJhdGlvbnN9DQovKiENCiAqIFNBUCBVSSBkZXZlbG9wbWVudCB0b29sa2l0IGZvciBIVE1MNSAoU0FQVUk1L09wZW5VSTUpDQogKiAoYykgQ29weXJpZ2h0IDIwMDktMjAxNCBTQVAgU0Ugb3IgYW4gU0FQIGFmZmlsaWF0ZSBjb21wYW55LiANCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgLSBzZWUgTElDRU5TRS50eHQuDQogKi8NCnZhciBodG1sND17fTtodG1sNC5hdHlwZT17Tk9ORTowLFVSSToxLFVSSV9GUkFHTUVOVDoxMSxTQ1JJUFQ6MixTVFlMRTozLElEOjQsSURSRUY6NSxJRFJFRlM6NixHTE9CQUxfTkFNRTo3LExPQ0FMX05BTUU6OCxDTEFTU0VTOjksRlJBTUVfVEFSR0VUOjEwfTtodG1sNC5BVFRSSUJTPXsnKjo6YWNjZXNza2V5JzowLCcqOjpjbGFzcyc6OSwnKjo6Y29udGVudGVkaXRhYmxlJzowLCcqOjpjb250ZXh0bWVudSc6MCwnKjo6ZGlyJzowLCcqOjpkcmFnZ2FibGUnOjAsJyo6OmRyb3B6b25lJzowLCcqOjpoaWRkZW4nOjAsJyo6OmlkJzo0LCcqOjpsYW5nJzowLCcqOjpvbmFib3J0JzoyLCcqOjpvbmJsdXInOjIsJyo6Om9uY2FucGxheSc6MiwnKjo6b25jYW5wbGF5dGhyb3VnaCc6MiwnKjo6b25jaGFuZ2UnOjIsJyo6Om9uY2xpY2snOjIsJyo6Om9uY29udGV4dG1lbnUnOjIsJyo6Om9uY3VlY2hhbmdlJzoyLCcqOjpvbmRibGNsaWNrJzoyLCcqOjpvbmRyYWcnOjIsJyo6Om9uZHJhZ2VuZCc6MiwnKjo6b25kcmFnZW50ZXInOjIsJyo6Om9uZHJhZ2xlYXZlJzoyLCcqOjpvbmRyYWdvdmVyJzoyLCcqOjpvbmRyYWdzdGFydCc6MiwnKjo6b25kcm9wJzoyLCcqOjpvbmR1cmF0aW9uY2hhbmdlJzoyLCcqOjpvbmVtcHRpZWQnOjIsJyo6Om9uZW5kZWQnOjIsJyo6Om9uZXJyb3InOjIsJyo6Om9uZm9jdXMnOjIsJyo6Om9uaW5wdXQnOjIsJyo6Om9uaW52YWxpZCc6MiwnKjo6b25rZXlkb3duJzoyLCcqOjpvbmtleXByZXNzJzoyLCcqOjpvbmtleXVwJzoyLCcqOjpvbmxvYWQnOjIsJyo6Om9ubG9hZGVkZGF0YSc6MiwnKjo6b25sb2FkZWRtZXRhZGF0YSc6MiwnKjo6b25sb2Fkc3RhcnQnOjIsJyo6Om9ubW91c2Vkb3duJzoyLCcqOjpvbm1vdXNlbW92ZSc6MiwnKjo6b25tb3VzZW91dCc6MiwnKjo6b25tb3VzZW92ZXInOjIsJyo6Om9ubW91c2V1cCc6MiwnKjo6b25tb3VzZXdoZWVsJzoyLCcqOjpvbnBhdXNlJzoyLCcqOjpvbnBsYXknOjIsJyo6Om9ucGxheWluZyc6MiwnKjo6b25wcm9ncmVzcyc6MiwnKjo6b25yYXRlY2hhbmdlJzoyLCcqOjpvbnJlYWR5c3RhdGVjaGFuZ2UnOjIsJyo6Om9ucmVzZXQnOjIsJyo6Om9uc2Nyb2xsJzoyLCcqOjpvbnNlZWtlZCc6MiwnKjo6b25zZWVraW5nJzoyLCcqOjpvbnNlbGVjdCc6MiwnKjo6b25zaG93JzoyLCcqOjpvbnN0YWxsZWQnOjIsJyo6Om9uc3VibWl0JzoyLCcqOjpvbnN1c3BlbmQnOjIsJyo6Om9udGltZXVwZGF0ZSc6MiwnKjo6b252b2x1bWVjaGFuZ2UnOjIsJyo6Om9ud2FpdGluZyc6MiwnKjo6c3BlbGxjaGVjayc6MCwnKjo6c3R5bGUnOjMsJyo6OnRhYmluZGV4JzowLCcqOjp0aXRsZSc6MCwnYTo6aHJlZic6MSwnYTo6aHJlZmxhbmcnOjAsJ2E6Om1lZGlhJzowLCdhOjpyZWwnOjAsJ2E6OnRhcmdldCc6MCwnYTo6dHlwZSc6MCwnYXJlYTo6YWx0JzowLCdhcmVhOjpjb29yZHMnOjAsJ2FyZWE6OmhyZWYnOjEsJ2FyZWE6OmhyZWZsYW5nJzowLCdhcmVhOjptZWRpYSc6MCwnYXJlYTo6cmVsJzowLCdhcmVhOjpzaGFwZSc6MCwnYXJlYTo6dGFyZ2V0JzoxMCwnYXJlYTo6dHlwZSc6MCwnYXVkaW86OmF1dG9wbGF5JzowLCdhdWRpbzo6Y29udHJvbHMnOjAsJ2F1ZGlvOjpsb29wJzowLCdhdWRpbzo6bWVkaWFncm91cCc6MCwnYXVkaW86OnByZWxvYWQnOjAsJ2F1ZGlvOjpzcmMnOjEsJ2Jhc2U6OmhyZWYnOjEsJ2Jhc2U6OnRhcmdldCc6MTAsJ2Jsb2NrcXVvdGU6OmNpdGUnOjEsJ2JvZHk6Om9uYWZ0ZXJwcmludCc6MiwnYm9keTo6b25iZWZvcmVwcmludCc6MiwnYm9keTo6b25iZWZvcmV1bmxvYWQnOjIsJ2JvZHk6Om9uYmx1cic6MiwnYm9keTo6b25lcnJvcic6MiwnYm9keTo6b25mb2N1cyc6MiwnYm9keTo6b25oYXNoY2hhbmdlJzoyLCdib2R5OjpvbmxvYWQnOjIsJ2JvZHk6Om9ubWVzc2FnZSc6MiwnYm9keTo6b25vZmZsaW5lJzoyLCdib2R5Ojpvbm9ubGluZSc6MiwnYm9keTo6b25wYWdlaGlkZSc6MiwnYm9keTo6b25wYWdlc2hvdyc6MiwnYm9keTo6b25wb3BzdGF0ZSc6MiwnYm9keTo6b25yZWRvJzoyLCdib2R5OjpvbnJlc2l6ZSc6MiwnYm9keTo6b25zY3JvbGwnOjIsJ2JvZHk6Om9uc3RvcmFnZSc6MiwnYm9keTo6b251bmRvJzoyLCdib2R5OjpvbnVubG9hZCc6MiwnYnV0dG9uOjphdXRvZm9jdXMnOjAsJ2J1dHRvbjo6ZGlzYWJsZWQnOjAsJ2J1dHRvbjo6Zm9ybSc6MCwnYnV0dG9uOjpmb3JtYWN0aW9uJzoxLCdidXR0b246OmZvcm1lbmN0eXBlJzowLCdidXR0b246OmZvcm1tZXRob2QnOjAsJ2J1dHRvbjo6Zm9ybW5vdmFsaWRhdGUnOjAsJ2J1dHRvbjo6Zm9ybXRhcmdldCc6MTAsJ2J1dHRvbjo6bmFtZSc6OCwnYnV0dG9uOjp0eXBlJzowLCdidXR0b246OnZhbHVlJzowLCdjYW52YXM6OmhlaWdodCc6MCwnY2FudmFzOjp3aWR0aCc6MCwnY29sOjpzcGFuJzowLCdjb2xncm91cDo6c3Bhbic6MCwnY29tbWFuZDo6Y2hlY2tlZCc6MCwnY29tbWFuZDo6ZGlzYWJsZWQnOjAsJ2NvbW1hbmQ6Omljb24nOjEsJ2NvbW1hbmQ6OmxhYmVsJzowLCdjb21tYW5kOjpyYWRpb2dyb3VwJzowLCdjb21tYW5kOjp0eXBlJzowLCdkZWw6OmNpdGUnOjEsJ2RlbDo6ZGF0ZXRpbWUnOjAsJ2RldGFpbHM6Om9wZW4nOjAsJ2VtYmVkOjpoZWlnaHQnOjAsJ2VtYmVkOjpzcmMnOjEsJ2VtYmVkOjp0eXBlJzowLCdlbWJlZDo6d2lkdGgnOjAsJ2ZpZWxkc2V0OjpkaXNhYmxlZCc6MCwnZmllbGRzZXQ6OmZvcm0nOjAsJ2ZpZWxkc2V0OjpuYW1lJzo4LCdmb3JtOjphY2NlcHQtY2hhcnNldCc6MCwnZm9ybTo6YWN0aW9uJzoxLCdmb3JtOjphdXRvY29tcGxldGUnOjAsJ2Zvcm06OmVuY3R5cGUnOjAsJ2Zvcm06Om1ldGhvZCc6MCwnZm9ybTo6bmFtZSc6NywnZm9ybTo6bm92YWxpZGF0ZSc6MCwnZm9ybTo6dGFyZ2V0JzoxMCwnaHRtbDo6IG1hbmlmZXN0JzoxLCdpZnJhbWU6OmhlaWdodCc6MCwnaWZyYW1lOjpuYW1lJzo3LCdpZnJhbWU6OnNhbmRib3gnOjAsJ2lmcmFtZTo6c2VhbWxlc3MnOjAsJ2lmcmFtZTo6c3JjJzoxLCdpZnJhbWU6OnNyY2RvYyc6MTAsJ2lmcmFtZTo6d2lkdGgnOjAsJ2ltZzo6YWx0JzowLCdpbWc6OmhlaWdodCc6MCwnaW1nOjppc21hcCc6MCwnaW1nOjpuYW1lJzo3LCdpbWc6OnNyYyc6MSwnaW1nOjp1c2VtYXAnOjExLCdpbWc6OndpZHRoJzowLCdpbnB1dDo6YWNjZXB0JzowLCdpbnB1dDo6YWx0JzowLCdpbnB1dDo6YXV0b2NvbXBsZXRlJzowLCdpbnB1dDo6YXV0b2ZvY3VzJzowLCdpbnB1dDo6Y2hlY2tlZCc6MCwnaW5wdXQ6OmRpcm5hbWUnOjAsJ2lucHV0OjpkaXNhYmxlZCc6MCwnaW5wdXQ6OmZvcm0nOjAsJ2lucHV0Ojpmb3JtYWN0aW9uJzoxLCdpbnB1dDo6Zm9ybWVuY3R5cGUnOjAsJ2lucHV0Ojpmb3JtbWV0aG9kJzowLCdpbnB1dDo6Zm9ybW5vdmFsaWRhdGUnOjAsJ2lucHV0Ojpmb3JtdGFyZ2V0JzoxMCwnaW5wdXQ6OmhlaWdodCc6MCwnaW5wdXQ6Omxpc3QnOjAsJ2lucHV0OjptYXgnOjAsJ2lucHV0OjptYXhsZW5ndGgnOjAsJ2lucHV0OjptaW4nOjAsJ2lucHV0OjptdWx0aXBsZSc6MCwnaW5wdXQ6Om5hbWUnOjgsJ2lucHV0OjpwYXR0ZXJuJzowLCdpbnB1dDo6cGxhY2Vob2xkZXInOjAsJ2lucHV0OjpyZWFkb25seSc6MCwnaW5wdXQ6OnJlcXVpcmVkJzowLCdpbnB1dDo6c3RlcCc6MCwnaW5wdXQ6OnNpemUnOjAsJ2lucHV0OjpzcmMnOjEsJ2lucHV0Ojp0eXBlJzowLCdpbnB1dDo6dmFsdWUnOjAsJ2lucHV0Ojp3aWR0aCc6MCwnaW5zOjpjaXRlJzoxLCdpbnM6OmRhdGV0aW1lJzowLCdrZXlnZW46OmF1dG9mb2N1cyc6MCwna2V5Z2VuOjpjaGFsbGVuZ2UnOjAsJ2tleWdlbjo6ZGlzYWJsZWQnOjAsJ2tleWdlbjo6Zm9ybSc6MCwna2V5Z2VuOjprZXl0eXBlJzowLCdrZXlnZW46Om5hbWUnOjgsJ2xhYmVsOjpmb3InOjUsJ2xhYmVsOjpmb3JtJzowLCdsaW5rOjpocmVmJzoxLCdsaW5rOjpocmVmbGFuZyc6MCwnbGluazo6bWVkaWEnOjAsJ2xpbms6OnJlbCc6MCwnbGluazo6c2l6ZXMnOjAsJ2xpbms6OnR5cGUnOjAsJ2xpOjp2YWx1ZSc6MCwnbWFwOjpuYW1lJzo3LCdtZW51OjpsYWJlbCc6MCwnbWVudTo6dHlwZSc6MCwnbWV0YTo6Y2hhcnNldCc6MCwnbWV0YTo6Y29udGVudCc6MCwnbWV0YTo6aHR0cC1lcXVpdic6MCwnbWV0YTo6bmFtZSc6NywnbWV0ZXI6OmZvcm0nOjAsJ21ldGVyOjpoaWdoJzowLCdtZXRlcjo6bG93JzowLCdtZXRlcjo6bWF4JzowLCdtZXRlcjo6bWluJzowLCdtZXRlcjo6b3B0aW11bSc6MCwnbWV0ZXI6OnZhbHVlJzowLCdvYmplY3Q6OmRhdGEnOjEsJ29iamVjdDo6Zm9ybSc6MCwnb2JqZWN0OjpoZWlnaHQnOjAsJ29iamVjdDo6bmFtZSc6OCwnb2JqZWN0Ojp0eXBlJzowLCdvYmplY3Q6OnVzZW1hcCc6MTEsJ29iamVjdDo6d2lkdGgnOjAsJ29sOjpyZXZlcnNlZCc6MCwnb2w6OnN0YXJ0JzowLCdvcHRncm91cDo6ZGlzYWJsZWQnOjAsJ29wdGdyb3VwOjpsYWJlbCc6MCwnb3B0aW9uOjpkaXNhYmxlZCc6MCwnb3B0aW9uOjpsYWJlbCc6MCwnb3B0aW9uOjpzZWxlY3RlZCc6MCwnb3B0aW9uOjp2YWx1ZSc6MCwnb3V0cHV0Ojpmb3InOjUsJ291dHB1dDo6Zm9ybSc6MCwnb3V0cHV0OjpuYW1lJzo4LCdwYXJhbTo6bmFtZSc6OCwncGFyYW06OnZhbHVlJzowLCdwcm9ncmVzczo6Zm9ybSc6MCwncHJvZ3Jlc3M6Om1heCc6MCwncHJvZ3Jlc3M6OnZhbHVlJzowLCdxOjpjaXRlJzoxLCdzY3JpcHQ6OmFzeW5jJzowLCdzY3JpcHQ6OmNoYXJzZXQnOjAsJ3NjcmlwdDo6ZGVmZXInOjAsJ3NjcmlwdDo6c3JjJzoxLCdzY3JpcHQ6OnR5cGUnOjAsJ3NlbGVjdDo6YXV0b2ZvY3VzJzowLCdzZWxlY3Q6OmRpc2FibGVkJzowLCdzZWxlY3Q6OmZvcm0nOjAsJ3NlbGVjdDo6bXVsdGlwbGUnOjAsJ3NlbGVjdDo6bmFtZSc6OCwnc2VsZWN0OjpyZXF1aXJlZCc6MCwnc2VsZWN0OjpzaXplJzowLCdzb3VyY2U6Om1lZGlhJzowLCdzb3VyY2U6OnNyYyc6MSwnc291cmNlOjp0eXBlJzowLCdzdHlsZTo6bWVkaWEnOjAsJ3N0eWxlOjpzY29wZWQnOjAsJ3N0eWxlOjp0eXBlJzowLCd0YWJsZTo6Ym9yZGVyJzowLCd0ZDo6Y29sc3Bhbic6MCwndGQ6OmhlYWRlcnMnOjYsJ3RkOjpyb3dzcGFuJzowLCd0ZXh0YXJlYTo6YXV0b2ZvY3VzJzowLCd0ZXh0YXJlYTo6Y29scyc6MCwndGV4dGFyZWE6OmRpc2FibGVkJzowLCd0ZXh0YXJlYTo6Zm9ybSc6MCwndGV4dGFyZWE6Om1heGxlbmd0aCc6MCwndGV4dGFyZWE6Om5hbWUnOjgsJ3RleHRhcmVhOjpwbGFjZWhvbGRlcic6MCwndGV4dGFyZWE6OnJlYWRvbmx5JzowLCd0ZXh0YXJlYTo6cmVxdWlyZWQnOjAsJ3RleHRhcmVhOjpyb3dzJzowLCd0ZXh0YXJlYTo6d3JhcCc6MCwndGg6OmNvbHNwYW4nOjAsJ3RoOjpoZWFkZXJzJzo2LCd0aDo6cm93c3Bhbic6MCwndGg6OnNjb3BlJzowLCd0aW1lOjpkYXRldGltZSc6MCwndGltZTo6cHViZGF0ZSc6MCwndHJhY2s6OmRlZmF1bHQnOjAsJ3RyYWNrOjpraW5kJzowLCd0cmFjazo6bGFiZWwnOjAsJ3RyYWNrOjpzcmMnOjEsJ3RyYWNrOjpzcmNsYW5nJzowLCd2aWRlbzo6YXV0b3BsYXknOjAsJ3ZpZGVvOjpjb250cm9scyc6MCwndmlkZW86OmhlaWdodCc6MCwndmlkZW86Omxvb3AnOjAsJ3ZpZGVvOjptZWRpYWdyb3VwJzowLCd2aWRlbzo6cG9zdGVyJzoxLCd2aWRlbzo6cHJlbG9hZCc6MCwndmlkZW86OnNyYyc6MSwndmlkZW86OndpZHRoJzowfTtodG1sNC5lZmxhZ3M9e09QVElPTkFMX0VORFRBRzoxLEVNUFRZOjIsQ0RBVEE6NCxSQ0RBVEE6OCxVTlNBRkU6MTYsRk9MREFCTEU6MzIsU0NSSVBUOjY0LFNUWUxFOjEyOH07aHRtbDQuRUxFTUVOVFM9eydhJzowLCdhYmJyJzowLCdhZGRyZXNzJzowLCdhcmVhJzoyLCdhcnRpY2xlJzowLCdhc2lkZSc6MCwnYXVkaW8nOjAsJ2InOjAsJ2Jhc2UnOjE4LCdiZGknOjAsJ2Jkbyc6MCwnYmxvY2txdW90ZSc6MCwnYm9keSc6NDksJ2JyJzoyLCdidXR0b24nOjAsJ2NhbnZhcyc6MCwnY2FwdGlvbic6MCwnY2l0ZSc6MCwnY29kZSc6MCwnY29sJzoyLCdjb2xncm91cCc6MSwnY29tbWFuZCc6MiwnZGF0YWxpc3QnOjAsJ2RkJzoxLCdkZWwnOjAsJ2RldGFpbHMnOjAsJ2Rmbic6MCwnZGl2JzowLCdkbCc6MCwnZHQnOjEsJ2VtJzowLCdlbWJlZCc6MTgsJ2ZpZWxkc2V0JzowLCdmaWdjYXB0aW9uJzowLCdmaWd1cmUnOjAsJ2Zvb3Rlcic6MCwnZm9ybSc6MCwnaDEnOjAsJ2gyJzowLCdoMyc6MCwnaDQnOjAsJ2g1JzowLCdoNic6MCwnaGVhZCc6NDksJ2hlYWRlcic6MCwnaGdyb3VwJzowLCdocic6MiwnaHRtbCc6NDksJ2knOjAsJ2lmcmFtZSc6NCwnaW1nJzoyLCdpbnB1dCc6MiwnaW5zJzowLCdrYmQnOjAsJ2tleWdlbic6MiwnbGFiZWwnOjAsJ2xlZ2VuZCc6MCwnbGknOjEsJ2xpbmsnOjE4LCdtYXAnOjAsJ21hcmsnOjAsJ21lbnUnOjAsJ21ldGEnOjE4LCdtZXRlcic6MCwnbmF2JzowLCdub3NjcmlwdCc6MjAsJ29iamVjdCc6MTYsJ29sJzowLCdvcHRncm91cCc6MSwnb3B0aW9uJzoxLCdvdXRwdXQnOjAsJ3AnOjEsJ3BhcmFtJzoxOCwncHJlJzowLCdwcm9ncmVzcyc6MCwncSc6MCwncnAnOjEsJ3J0JzoxLCdydWJ5JzowLCdzJzowLCdzYW1wJzowLCdzY3JpcHQnOjg0LCdzZWN0aW9uJzowLCdzZWxlY3QnOjAsJ3NtYWxsJzowLCdzb3VyY2UnOjIsJ3NwYW4nOjAsJ3N0cm9uZyc6MCwnc3R5bGUnOjE0OCwnc3ViJzowLCdzdW1tYXJ5JzowLCdzdXAnOjAsJ3RhYmxlJzowLCd0Ym9keSc6MSwndGQnOjEsJ3RleHRhcmVhJzo4LCd0Zm9vdCc6MSwndGgnOjEsJ3RoZWFkJzoxLCd0aW1lJzowLCd0aXRsZSc6MjQsJ3RyJzoxLCd0cmFjayc6MiwndSc6MCwndWwnOjAsJ3Zhcic6MCwndmlkZW8nOjAsJ3dicic6Mn07aHRtbDQudWVmZmVjdHM9e05PVF9MT0FERUQ6MCxTQU1FX0RPQ1VNRU5UOjEsTkVXX0RPQ1VNRU5UOjJ9O2h0bWw0LlVSSUVGRkVDVFM9eydhOjpocmVmJzoyLCdhcmVhOjpocmVmJzoyLCdhdWRpbzo6c3JjJzoxLCdiYXNlOjpocmVmJzoyLCdibG9ja3F1b3RlOjpjaXRlJzowLCdidXR0b246OmZvcm1hY3Rpb24nOjIsJ2NvbW1hbmQ6Omljb24nOjEsJ2RlbDo6Y2l0ZSc6MCwnZW1iZWQ6OnNyYyc6MSwnZm9ybTo6YWN0aW9uJzoyLCdodG1sOjogbWFuaWZlc3QnOjEsJ2lmcmFtZTo6c3JjJzoxLCdpbWc6OnNyYyc6MSwnaW5wdXQ6OmZvcm1hY3Rpb24nOjIsJ2lucHV0OjpzcmMnOjEsJ2luczo6Y2l0ZSc6MCwnbGluazo6aHJlZic6Miwnb2JqZWN0OjpkYXRhJzoxLCdxOjpjaXRlJzowLCdzY3JpcHQ6OnNyYyc6MSwnc291cmNlOjpzcmMnOjEsJ3RyYWNrOjpzcmMnOjEsJ3ZpZGVvOjpwb3N0ZXInOjEsJ3ZpZGVvOjpzcmMnOjF9O2h0bWw0Lmx0eXBlcz17VU5TQU5EQk9YRUQ6MixTQU5EQk9YRUQ6MSxEQVRBOjB9O2h0bWw0LkxPQURFUlRZUEVTPXsnYTo6aHJlZic6MiwnYXJlYTo6aHJlZic6MiwnYXVkaW86OnNyYyc6MSwnYmFzZTo6aHJlZic6MiwnYmxvY2txdW90ZTo6Y2l0ZSc6MiwnYnV0dG9uOjpmb3JtYWN0aW9uJzoyLCdjb21tYW5kOjppY29uJzoxLCdkZWw6OmNpdGUnOjIsJ2VtYmVkOjpzcmMnOjEsJ2Zvcm06OmFjdGlvbic6MiwnaHRtbDo6IG1hbmlmZXN0JzoxLCdpZnJhbWU6OnNyYyc6MSwnaW1nOjpzcmMnOjEsJ2lucHV0Ojpmb3JtYWN0aW9uJzoyLCdpbnB1dDo6c3JjJzoxLCdpbnM6OmNpdGUnOjIsJ2xpbms6OmhyZWYnOjIsJ29iamVjdDo6ZGF0YSc6MCwncTo6Y2l0ZSc6Miwnc2NyaXB0OjpzcmMnOjEsJ3NvdXJjZTo6c3JjJzoxLCd0cmFjazo6c3JjJzoxLCd2aWRlbzo6cG9zdGVyJzoxLCd2aWRlbzo6c3JjJzoxfTtpZih0eXBlb2Ygd2luZG93IT09J3VuZGVmaW5lZCcpe3dpbmRvd1snaHRtbDQnXT1odG1sNH0NCi8vIENvcHlyaWdodCAoQykgMjAwNiBHb29nbGUgSW5jLg0KLy8gTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7DQovLyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuDQovLyBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQNCi8vICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wDQovLyBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLA0KLy8gU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZA0KLy8gbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuDQp2YXIgaHRtbD0oZnVuY3Rpb24oYSl7dmFyIGIsYyxkO2lmKCd1bmRlZmluZWQnIT09dHlwZW9mIHdpbmRvdyl7Yj13aW5kb3dbJ3BhcnNlQ3NzRGVjbGFyYXRpb25zJ107Yz13aW5kb3dbJ3Nhbml0aXplQ3NzUHJvcGVydHknXTtkPXdpbmRvd1snY3NzU2NoZW1hJ119dmFyIGw7aWYoJ3NjcmlwdCc9PT0nU0NSSVBUJy50b0xvd2VyQ2FzZSgpKXtsPWZ1bmN0aW9uKHMpe3JldHVybiBzLnRvTG93ZXJDYXNlKCl9fWVsc2V7bD1mdW5jdGlvbihzKXtyZXR1cm4gcy5yZXBsYWNlKC9bQS1aXS9nLGZ1bmN0aW9uKGUpe3JldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlKGUuY2hhckNvZGVBdCgwKXwzMil9KX19dmFyIEU9eydsdCc6JzwnLCdndCc6Jz4nLCdhbXAnOicmJywnbmJzcCc6J1wyNDAnLCdxdW90JzonIicsJ2Fwb3MnOidcJyd9O3ZhciBmPS9eIyhcZCspJC87dmFyIGc9L14jeChbMC05QS1GYS1mXSspJC87ZnVuY3Rpb24gaihuKXtuPWwobik7aWYoRS5oYXNPd25Qcm9wZXJ0eShuKSl7cmV0dXJuIEVbbl19dmFyIG09bi5tYXRjaChmKTtpZihtKXtyZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZShwYXJzZUludChtWzFdLDEwKSl9ZWxzZSBpZighIShtPW4ubWF0Y2goZykpKXtyZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZShwYXJzZUludChtWzFdLDE2KSl9cmV0dXJuJyd9ZnVuY3Rpb24gayhfLG4pe3JldHVybiBqKG4pfXZhciBvPS9cMC9nO2Z1bmN0aW9uIHIocyl7cmV0dXJuIHMucmVwbGFjZShvLCcnKX12YXIgdD0vJigjXGQrfCN4WzAtOUEtRmEtZl0rfFx3Kyk7L2c7ZnVuY3Rpb24gdShzKXtyZXR1cm4gcy5yZXBsYWNlKHQsayl9dmFyIHc9LyYvZzt2YXIgeD0vJihbXmEteiNdfCMoPzpbXjAtOXhdfHgoPzpbXjAtOWEtZl18JCl8JCl8JCkvZ2k7dmFyIHk9L1s8XS9nO3ZhciB6PS8+L2c7dmFyIEE9L1wiL2c7ZnVuY3Rpb24gQihzKXtyZXR1cm4oJycrcykucmVwbGFjZSh3LCcmYW1wOycpLnJlcGxhY2UoeSwnJmx0OycpLnJlcGxhY2UoeiwnJmd0OycpLnJlcGxhY2UoQSwnJiMzNDsnKX1mdW5jdGlvbiBDKGUpe3JldHVybiBlLnJlcGxhY2UoeCwnJmFtcDskMScpLnJlcGxhY2UoeSwnJmx0OycpLnJlcGxhY2UoeiwnJmd0OycpfXZhciBEPW5ldyBSZWdFeHAoJ15cXHMqJysnKFthLXpdW2Etei1dKiknKycoPzonKygnXFxzKig9KVxccyonKycoJysoJyhcIilbXlwiXSooXCJ8JCknKyd8JysnKFwnKVteXCddKihcJ3wkKScrJ3wnKycoPz1bYS16XVthLXotXSpcXHMqPSknKyd8JysnW15cIlwnXFxzXSonKSsnKScpKycpPycsJ2knKTt2YXIgRj0vXigjWzAtOV0rfCN4WzAtOWEtZl0rfFx3Kyk7L2k7dmFyIEc9KCdhLGInLnNwbGl0KC8oLCkvKS5sZW5ndGg9PT0zKTt2YXIgSD1hLmVmbGFncy5DREFUQXxhLmVmbGFncy5SQ0RBVEE7ZnVuY3Rpb24gSShoKXtyZXR1cm4gZnVuY3Rpb24oZSxwKXtyZXR1cm4gSyhlLGgscCl9fXZhciBKPXt9O2Z1bmN0aW9uIEsoZSxpLG4pe3ZhciBoPWk7dmFyIG0scCxxO3ZhciBzPU4oZSk7dmFyIHY9e25vTW9yZUdUOmZhbHNlLG5vTW9yZUVuZENvbW1lbnRzOmZhbHNlfTtNKGkscywwLHYsbil9ZnVuY3Rpb24gTChoLHAsaSxzLGUpe3JldHVybiBmdW5jdGlvbigpe00oaCxwLGkscyxlKX19ZnVuY3Rpb24gTShoLGksbixzLHEpe3RyeXtpZihoLnN0YXJ0RG9jJiZuPT0wKXtoLnN0YXJ0RG9jKHEpfXZhciBtLHAsdjtmb3IodmFyIF89bixiMT1pLmxlbmd0aDtfPGIxOyl7dmFyIGMxPWlbXysrXTt2YXIgZDE9aVtfXTtzd2l0Y2goYzEpe2Nhc2UnJic6aWYoRi50ZXN0KGQxKSl7aWYoaC5wY2RhdGEpe2gucGNkYXRhKCcmJytkMSxxLEosTChoLGksXyxzLHEpKX1fKyt9ZWxzZXtpZihoLnBjZGF0YSl7aC5wY2RhdGEoIiZhbXA7IixxLEosTChoLGksXyxzLHEpKX19YnJlYWs7Y2FzZSc8XC8nOmlmKG09L14oXHcrKVteXCdcIl0qLy5leGVjKGQxKSl7aWYobVswXS5sZW5ndGg9PT1kMS5sZW5ndGgmJmlbXysxXT09PSc+Jyl7Xys9Mjt2PWwobVsxXSk7aWYoYS5FTEVNRU5UUy5oYXNPd25Qcm9wZXJ0eSh2KSl7aWYoaC5lbmRUYWcpe2guZW5kVGFnKHYscSxKLEwoaCxpLF8scyxxKSl9fX1lbHNle189TyhpLF8saCxxLEoscyl9fWVsc2V7aWYoaC5wY2RhdGEpe2gucGNkYXRhKCcmbHQ7LycscSxKLEwoaCxpLF8scyxxKSl9fWJyZWFrO2Nhc2UnPCc6aWYobT0vXihcdyspXHMqXC8/Ly5leGVjKGQxKSl7aWYobVswXS5sZW5ndGg9PT1kMS5sZW5ndGgmJmlbXysxXT09PSc+Jyl7Xys9Mjt2PWwobVsxXSk7aWYoYS5FTEVNRU5UUy5oYXNPd25Qcm9wZXJ0eSh2KSl7aWYoaC5zdGFydFRhZyl7aC5zdGFydFRhZyh2LFtdLHEsSixMKGgsaSxfLHMscSkpfXZhciBlMT1hLkVMRU1FTlRTW3ZdO2lmKGUxJkgpe3ZhciBmMT17bmFtZTp2LG5leHQ6XyxlZmxhZ3M6ZTF9O189UihpLGYxLGgscSxKLHMpfX19ZWxzZXtfPVAoaSxfLGgscSxKLHMpfX1lbHNle2lmKGgucGNkYXRhKXtoLnBjZGF0YSgnJmx0OycscSxKLEwoaCxpLF8scyxxKSl9fWJyZWFrO2Nhc2UnPFwhLS0nOmlmKCFzLm5vTW9yZUVuZENvbW1lbnRzKXtmb3IocD1fKzE7cDxiMTtwKyspe2lmKGlbcF09PT0nPicmJi8tLSQvLnRlc3QoaVtwLTFdKSl7YnJlYWt9fWlmKHA8YjEpe189cCsxfWVsc2V7cy5ub01vcmVFbmRDb21tZW50cz10cnVlfX1pZihzLm5vTW9yZUVuZENvbW1lbnRzKXtpZihoLnBjZGF0YSl7aC5wY2RhdGEoJyZsdDshLS0nLHEsSixMKGgsaSxfLHMscSkpfX1icmVhaztjYXNlJzxcISc6aWYoIS9eXHcvLnRlc3QoZDEpKXtpZihoLnBjZGF0YSl7aC5wY2RhdGEoJyZsdDshJyxxLEosTChoLGksXyxzLHEpKX19ZWxzZXtpZighcy5ub01vcmVHVCl7Zm9yKHA9XysxO3A8YjE7cCsrKXtpZihpW3BdPT09Jz4nKXticmVha319aWYocDxiMSl7Xz1wKzF9ZWxzZXtzLm5vTW9yZUdUPXRydWV9fWlmKHMubm9Nb3JlR1Qpe2lmKGgucGNkYXRhKXtoLnBjZGF0YSgnJmx0OyEnLHEsSixMKGgsaSxfLHMscSkpfX19YnJlYWs7Y2FzZSc8Pyc6aWYoIXMubm9Nb3JlR1Qpe2ZvcihwPV8rMTtwPGIxO3ArKyl7aWYoaVtwXT09PSc+Jyl7YnJlYWt9fWlmKHA8YjEpe189cCsxfWVsc2V7cy5ub01vcmVHVD10cnVlfX1pZihzLm5vTW9yZUdUKXtpZihoLnBjZGF0YSl7aC5wY2RhdGEoJyZsdDs/JyxxLEosTChoLGksXyxzLHEpKX19YnJlYWs7Y2FzZSc+JzppZihoLnBjZGF0YSl7aC5wY2RhdGEoIiZndDsiLHEsSixMKGgsaSxfLHMscSkpfWJyZWFrO2Nhc2UnJzpicmVhaztkZWZhdWx0OmlmKGgucGNkYXRhKXtoLnBjZGF0YShjMSxxLEosTChoLGksXyxzLHEpKX1icmVha319aWYoaC5lbmREb2Mpe2guZW5kRG9jKHEpfX1jYXRjaChlKXtpZihlIT09Sil7dGhyb3cgZX19fWZ1bmN0aW9uIE4ocyl7dmFyIGU9Lyg8XC98PFwhLS18PFshP118WyY8Pl0pL2c7cys9Jyc7aWYoRyl7cmV0dXJuIHMuc3BsaXQoZSl9ZWxzZXt2YXIgcD1bXTt2YXIgaD0wO3ZhciBtO3doaWxlKChtPWUuZXhlYyhzKSkhPT1udWxsKXtwLnB1c2gocy5zdWJzdHJpbmcoaCxtLmluZGV4KSk7cC5wdXNoKG1bMF0pO2g9bS5pbmRleCttWzBdLmxlbmd0aH1wLnB1c2gocy5zdWJzdHJpbmcoaCkpO3JldHVybiBwfX1mdW5jdGlvbiBPKHAsZSxoLGksSixzKXt2YXIgbT1TKHAsZSk7aWYoIW0pe3JldHVybiBwLmxlbmd0aH1pZihtLmVmbGFncyE9PXZvaWQgMCl7aWYoaC5lbmRUYWcpe2guZW5kVGFnKG0ubmFtZSxpLEosTChoLHAsZSxzLGkpKX19cmV0dXJuIG0ubmV4dH1mdW5jdGlvbiBQKHAsZSxoLGksSixzKXt2YXIgbT1TKHAsZSk7aWYoIW0pe3JldHVybiBwLmxlbmd0aH1pZihtLmVmbGFncyE9PXZvaWQgMCl7aWYoaC5zdGFydFRhZyl7aC5zdGFydFRhZyhtLm5hbWUsbS5hdHRycyxpLEosTChoLHAsbS5uZXh0LHMsaSkpfWlmKG0uZWZsYWdzJkgpe3JldHVybiBSKHAsbSxoLGksSixzKX19cmV0dXJuIG0ubmV4dH12YXIgUT17fTtmdW5jdGlvbiBSKGUsaSxoLG0sSixzKXt2YXIgbj1lLmxlbmd0aDtpZighUS5oYXNPd25Qcm9wZXJ0eShpLm5hbWUpKXtRW2kubmFtZV09bmV3IFJlZ0V4cCgnXicraS5uYW1lKycoPzpbXFxzXFwvXXwkKScsJ2knKX12YXIgcT1RW2kubmFtZV07dmFyIHY9aS5uZXh0O3ZhciBwPWkubmV4dCsxO2Zvcig7cDxuO3ArKyl7aWYoZVtwLTFdPT09JzxcLycmJnEudGVzdChlW3BdKSl7YnJlYWt9fWlmKHA8bil7cC09MX12YXIgXz1lLnNsaWNlKHYscCkuam9pbignJyk7aWYoaS5lZmxhZ3MmYS5lZmxhZ3MuQ0RBVEEpe2lmKGguY2RhdGEpe2guY2RhdGEoXyxtLEosTChoLGUscCxzLG0pKX19ZWxzZSBpZihpLmVmbGFncyZhLmVmbGFncy5SQ0RBVEEpe2lmKGgucmNkYXRhKXtoLnJjZGF0YShDKF8pLG0sSixMKGgsZSxwLHMsbSkpfX1lbHNle3Rocm93IG5ldyBFcnJvcignYnVnJyl9cmV0dXJuIHB9ZnVuY3Rpb24gUyhlLGgpe3ZhciBtPS9eKFx3KykvLmV4ZWMoZVtoXSk7dmFyIGk9e25hbWU6bChtWzFdKX07aWYoYS5FTEVNRU5UUy5oYXNPd25Qcm9wZXJ0eShpLm5hbWUpKXtpLmVmbGFncz1hLkVMRU1FTlRTW2kubmFtZV19ZWxzZXtpLmVmbGFncz12b2lkIDB9dmFyIG49ZVtoXS5zdWJzdHIobVswXS5sZW5ndGgpO3ZhciBwPWgrMTt2YXIgcT1lLmxlbmd0aDtmb3IoO3A8cTtwKyspe2lmKGVbcF09PT0nPicpe2JyZWFrfW4rPWVbcF19aWYocTw9cCl7cmV0dXJuIHZvaWQgMH12YXIgcz1bXTt3aGlsZShuIT09Jycpe209RC5leGVjKG4pO2lmKCFtKXtuPW4ucmVwbGFjZSgvXltcc1xTXVteYS16XHNdKi8sJycpfWVsc2UgaWYoKG1bNF0mJiFtWzVdKXx8KG1bNl0mJiFtWzddKSl7dmFyIHY9bVs0XXx8bVs2XTt2YXIgXz1mYWxzZTt2YXIgYjE9W24sZVtwKytdXTtmb3IoO3A8cTtwKyspe2lmKF8pe2lmKGVbcF09PT0nPicpe2JyZWFrfX1lbHNlIGlmKDA8PWVbcF0uaW5kZXhPZih2KSl7Xz10cnVlfWIxLnB1c2goZVtwXSl9aWYocTw9cCl7YnJlYWt9bj1iMS5qb2luKCcnKTtjb250aW51ZX1lbHNle3ZhciBjMT1sKG1bMV0pO3ZhciBkMT1tWzJdP1QobVszXSk6YzE7cy5wdXNoKGMxLGQxKTtuPW4uc3Vic3RyKG1bMF0ubGVuZ3RoKX19aS5hdHRycz1zO2kubmV4dD1wKzE7cmV0dXJuIGl9ZnVuY3Rpb24gVCh2KXt2YXIgcT12LmNoYXJDb2RlQXQoMCk7aWYocT09PTB4MjJ8fHE9PT0weDI3KXt2PXYuc3Vic3RyKDEsdi5sZW5ndGgtMil9cmV0dXJuIHUocih2KSl9ZnVuY3Rpb24gVShlKXt2YXIgczt2YXIgaDt2YXIgbT1mdW5jdGlvbihpLG4pe2lmKCFoKXtuLnB1c2goaSl9fTtyZXR1cm4gSSh7c3RhcnREb2M6ZnVuY3Rpb24oXyl7cz1bXTtoPWZhbHNlfSxzdGFydFRhZzpmdW5jdGlvbihwLHEsdil7aWYoaCl7cmV0dXJufWlmKCFhLkVMRU1FTlRTLmhhc093blByb3BlcnR5KHApKXtyZXR1cm59dmFyIF89YS5FTEVNRU5UU1twXTtpZihfJmEuZWZsYWdzLkZPTERBQkxFKXtyZXR1cm59cT1lKHAscSk7aWYoIXEpe2g9IShfJmEuZWZsYWdzLkVNUFRZKTtyZXR1cm59aWYoIShfJmEuZWZsYWdzLkVNUFRZKSl7cy5wdXNoKHApfXYucHVzaCgnPCcscCk7Zm9yKHZhciBpPTAsbj1xLmxlbmd0aDtpPG47aSs9Mil7dmFyIGIxPXFbaV0sYzE9cVtpKzFdO2lmKGMxIT09bnVsbCYmYzEhPT12b2lkIDApe3YucHVzaCgnICcsYjEsJz0iJyxCKGMxKSwnIicpfX12LnB1c2goJz4nKX0sZW5kVGFnOmZ1bmN0aW9uKG4scCl7aWYoaCl7aD1mYWxzZTtyZXR1cm59aWYoIWEuRUxFTUVOVFMuaGFzT3duUHJvcGVydHkobikpe3JldHVybn12YXIgcT1hLkVMRU1FTlRTW25dO2lmKCEocSYoYS5lZmxhZ3MuRU1QVFl8YS5lZmxhZ3MuRk9MREFCTEUpKSl7dmFyIHY7aWYocSZhLmVmbGFncy5PUFRJT05BTF9FTkRUQUcpe2Zvcih2PXMubGVuZ3RoOy0tdj49MDspe3ZhciBfPXNbdl07aWYoXz09PW4pe2JyZWFrfWlmKCEoYS5FTEVNRU5UU1tfXSZhLmVmbGFncy5PUFRJT05BTF9FTkRUQUcpKXtyZXR1cm59fX1lbHNle2Zvcih2PXMubGVuZ3RoOy0tdj49MDspe2lmKHNbdl09PT1uKXticmVha319fWlmKHY8MCl7cmV0dXJufWZvcih2YXIgaT1zLmxlbmd0aDstLWk+djspe3ZhciBfPXNbaV07aWYoIShhLkVMRU1FTlRTW19dJmEuZWZsYWdzLk9QVElPTkFMX0VORFRBRykpe3AucHVzaCgnPFwvJyxfLCc+Jyl9fXMubGVuZ3RoPXY7cC5wdXNoKCc8XC8nLG4sJz4nKX19LHBjZGF0YTptLHJjZGF0YTptLGNkYXRhOm0sZW5kRG9jOmZ1bmN0aW9uKGkpe2Zvcig7cy5sZW5ndGg7cy5sZW5ndGgtLSl7aS5wdXNoKCc8XC8nLHNbcy5sZW5ndGgtMV0sJz4nKX19fSl9dmFyIFY9bmV3IFJlZ0V4cCgnXicrJyg/OicrJyhbXjpcLz8jIF0rKScrJzopPycpO3ZhciBXPS9eKD86aHR0cHM/fG1haWx0bykkL2k7ZnVuY3Rpb24gWChlLG4pe2lmKCFuKXtyZXR1cm4gbnVsbH12YXIgcD0oJycrZSkubWF0Y2goVik7aWYocCYmKCFwWzFdfHxXLnRlc3QocFsxXSkpKXtyZXR1cm4gbihlKX1lbHNle3JldHVybiBudWxsfX1mdW5jdGlvbiBZKGUsaCxtLG4pe2Zvcih2YXIgaT0wO2k8aC5sZW5ndGg7aSs9Mil7dmFyIHA9aFtpXTt2YXIgdj1oW2krMV07dmFyIHE9bnVsbCxzO2lmKChzPWUrJzo6JytwLGEuQVRUUklCUy5oYXNPd25Qcm9wZXJ0eShzKSl8fChzPScqOjonK3AsYS5BVFRSSUJTLmhhc093blByb3BlcnR5KHMpKSl7cT1hLkFUVFJJQlNbc119aWYocSE9PW51bGwpe3N3aXRjaChxKXtjYXNlIGEuYXR5cGUuTk9ORTpicmVhaztjYXNlIGEuYXR5cGUuU0NSSVBUOnY9bnVsbDticmVhaztjYXNlIGEuYXR5cGUuU1RZTEU6aWYoJ3VuZGVmaW5lZCc9PT10eXBlb2YgYil7dj1udWxsO2JyZWFrfXZhciBfPVtdO2Iodix7ZGVjbGFyYXRpb246ZnVuY3Rpb24oYjEsYzEpe3ZhciBkMT1iMS50b0xvd2VyQ2FzZSgpO3ZhciBlMT1kW2QxXTtpZighZTEpe3JldHVybn1jKGQxLGUxLGMxLG0pO18ucHVzaChiMSsnOiAnK2MxLmpvaW4oJyAnKSl9fSk7dj1fLmxlbmd0aD4wP18uam9pbignIDsgJyk6bnVsbDticmVhaztjYXNlIGEuYXR5cGUuSUQ6Y2FzZSBhLmF0eXBlLklEUkVGOmNhc2UgYS5hdHlwZS5JRFJFRlM6Y2FzZSBhLmF0eXBlLkdMT0JBTF9OQU1FOmNhc2UgYS5hdHlwZS5MT0NBTF9OQU1FOmNhc2UgYS5hdHlwZS5DTEFTU0VTOnY9bj9uKHYpOnY7YnJlYWs7Y2FzZSBhLmF0eXBlLlVSSTp2PVgodixtKTticmVhaztjYXNlIGEuYXR5cGUuVVJJX0ZSQUdNRU5UOmlmKHYmJicjJz09PXYuY2hhckF0KDApKXt2PXYuc3Vic3RyaW5nKDEpO3Y9bj9uKHYpOnY7aWYodiE9PW51bGwmJnYhPT12b2lkIDApe3Y9JyMnK3Z9fWVsc2V7dj1udWxsfWJyZWFrO2RlZmF1bHQ6dj1udWxsO2JyZWFrfX1lbHNle3Y9bnVsbH1oW2krMV09dn1yZXR1cm4gaH1mdW5jdGlvbiBaKGUsaCl7cmV0dXJuIGZ1bmN0aW9uKGksbSl7aWYoIShhLkVMRU1FTlRTW2ldJmEuZWZsYWdzLlVOU0FGRSkpe3JldHVybiBZKGksbSxlLGgpfX19ZnVuY3Rpb24gJChpLGUpe3ZhciBoPVtdO1UoZSkoaSxoKTtyZXR1cm4gaC5qb2luKCcnKX1mdW5jdGlvbiBhMShpLGUsaCl7dmFyIG09WihlLGgpO3JldHVybiAkKGksbSl9cmV0dXJue2VzY2FwZUF0dHJpYjpCLG1ha2VIdG1sU2FuaXRpemVyOlUsbWFrZVNheFBhcnNlcjpJLG1ha2VUYWdQb2xpY3k6Wixub3JtYWxpemVSQ0RhdGE6QyxzYW5pdGl6ZTphMSxzYW5pdGl6ZUF0dHJpYnM6WSxzYW5pdGl6ZVdpdGhQb2xpY3k6JCx1bmVzY2FwZUVudGl0aWVzOnV9fSkoaHRtbDQpO3ZhciBodG1sX3Nhbml0aXplPWh0bWwuc2FuaXRpemU7aWYodHlwZW9mIHdpbmRvdyE9PSd1bmRlZmluZWQnKXt3aW5kb3dbJ2h0bWwnXT1odG1sO3dpbmRvd1snaHRtbF9zYW5pdGl6ZSddPWh0bWxfc2FuaXRpemV9DQovKiENCiAqIGpRdWVyeSBKYXZhU2NyaXB0IExpYnJhcnkgdjEuMTEuMQ0KICogaHR0cDovL2pxdWVyeS5jb20vDQogKg0KICogSW5jbHVkZXMgU2l6emxlLmpzDQogKiBodHRwOi8vc2l6emxlanMuY29tLw0KICoNCiAqIENvcHlyaWdodCAyMDA1LCAyMDE0IGpRdWVyeSBGb3VuZGF0aW9uLCBJbmMuIGFuZCBvdGhlciBjb250cmlidXRvcnMNCiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZQ0KICogaHR0cDovL2pxdWVyeS5vcmcvbGljZW5zZQ0KICoNCiAqIERhdGU6IDIwMTQtMDUtMDFUMTc6NDJaDQogKi8NCihmdW5jdGlvbihnLGYpe2lmKHR5cGVvZiBtb2R1bGU9PT0ib2JqZWN0IiYmdHlwZW9mIG1vZHVsZS5leHBvcnRzPT09Im9iamVjdCIpe21vZHVsZS5leHBvcnRzPWcuZG9jdW1lbnQ/ZihnLHRydWUpOmZ1bmN0aW9uKHcpe2lmKCF3LmRvY3VtZW50KXt0aHJvdyBuZXcgRXJyb3IoImpRdWVyeSByZXF1aXJlcyBhIHdpbmRvdyB3aXRoIGEgZG9jdW1lbnQiKX1yZXR1cm4gZih3KX19ZWxzZXtmKGcpfX0odHlwZW9mIHdpbmRvdyE9PSJ1bmRlZmluZWQiP3dpbmRvdzp0aGlzLGZ1bmN0aW9uKHcsYyl7dmFyIGQ9W107dmFyIGY9ZC5zbGljZTt2YXIgZz1kLmNvbmNhdDt2YXIgaD1kLnB1c2g7dmFyIGs9ZC5pbmRleE9mO3ZhciBvPXt9O3ZhciBxPW8udG9TdHJpbmc7dmFyIHU9by5oYXNPd25Qcm9wZXJ0eTt2YXIgeD17fTt2YXIgeT0iMS4xMS4xIixRPWZ1bmN0aW9uKHMsYSl7cmV0dXJuIG5ldyBRLmZuLmluaXQocyxhKX0sej0vXltcc1x1RkVGRlx4QTBdK3xbXHNcdUZFRkZceEEwXSskL2csQT0vXi1tcy0vLEI9Ly0oW1xkYS16XSkvZ2ksQz1mdW5jdGlvbihhLGwpe3JldHVybiBsLnRvVXBwZXJDYXNlKCl9O1EuZm49US5wcm90b3R5cGU9e2pxdWVyeTp5LGNvbnN0cnVjdG9yOlEsc2VsZWN0b3I6IiIsbGVuZ3RoOjAsdG9BcnJheTpmdW5jdGlvbigpe3JldHVybiBmLmNhbGwodGhpcyl9LGdldDpmdW5jdGlvbihuKXtyZXR1cm4gbiE9bnVsbD8objwwP3RoaXNbbit0aGlzLmxlbmd0aF06dGhpc1tuXSk6Zi5jYWxsKHRoaXMpfSxwdXNoU3RhY2s6ZnVuY3Rpb24oYSl7dmFyIHI9US5tZXJnZSh0aGlzLmNvbnN0cnVjdG9yKCksYSk7ci5wcmV2T2JqZWN0PXRoaXM7ci5jb250ZXh0PXRoaXMuY29udGV4dDtyZXR1cm4gcn0sZWFjaDpmdW5jdGlvbihhLGIpe3JldHVybiBRLmVhY2godGhpcyxhLGIpfSxtYXA6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMucHVzaFN0YWNrKFEubWFwKHRoaXMsZnVuY3Rpb24oYixpKXtyZXR1cm4gYS5jYWxsKGIsaSxiKX0pKX0sc2xpY2U6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soZi5hcHBseSh0aGlzLGFyZ3VtZW50cykpfSxmaXJzdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVxKDApfSxsYXN0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZXEoLTEpfSxlcTpmdW5jdGlvbihpKXt2YXIgbD10aGlzLmxlbmd0aCxqPStpKyhpPDA/bDowKTtyZXR1cm4gdGhpcy5wdXNoU3RhY2soaj49MCYmajxsP1t0aGlzW2pdXTpbXSl9LGVuZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnByZXZPYmplY3R8fHRoaXMuY29uc3RydWN0b3IobnVsbCl9LHB1c2g6aCxzb3J0OmQuc29ydCxzcGxpY2U6ZC5zcGxpY2V9O1EuZXh0ZW5kPVEuZm4uZXh0ZW5kPWZ1bmN0aW9uKCl7dmFyIHMsYSxiLG4saixsLHQ9YXJndW1lbnRzWzBdfHx7fSxpPTEsbT1hcmd1bWVudHMubGVuZ3RoLHA9ZmFsc2U7aWYodHlwZW9mIHQ9PT0iYm9vbGVhbiIpe3A9dDt0PWFyZ3VtZW50c1tpXXx8e307aSsrfWlmKHR5cGVvZiB0IT09Im9iamVjdCImJiFRLmlzRnVuY3Rpb24odCkpe3Q9e319aWYoaT09PW0pe3Q9dGhpcztpLS19Zm9yKDtpPG07aSsrKXtpZigoaj1hcmd1bWVudHNbaV0pIT1udWxsKXtmb3IobiBpbiBqKXtzPXRbbl07Yj1qW25dO2lmKHQ9PT1iKXtjb250aW51ZX1pZihwJiZiJiYoUS5pc1BsYWluT2JqZWN0KGIpfHwoYT1RLmlzQXJyYXkoYikpKSl7aWYoYSl7YT1mYWxzZTtsPXMmJlEuaXNBcnJheShzKT9zOltdfWVsc2V7bD1zJiZRLmlzUGxhaW5PYmplY3Qocyk/czp7fX10W25dPVEuZXh0ZW5kKHAsbCxiKX1lbHNlIGlmKGIhPT11bmRlZmluZWQpe3Rbbl09Yn19fX1yZXR1cm4gdH07US5leHRlbmQoe2V4cGFuZG86ImpRdWVyeSIrKHkrTWF0aC5yYW5kb20oKSkucmVwbGFjZSgvXEQvZywiIiksaXNSZWFkeTp0cnVlLGVycm9yOmZ1bmN0aW9uKG0pe3Rocm93IG5ldyBFcnJvcihtKX0sbm9vcDpmdW5jdGlvbigpe30saXNGdW5jdGlvbjpmdW5jdGlvbihhKXtyZXR1cm4gUS50eXBlKGEpPT09ImZ1bmN0aW9uIn0saXNBcnJheTpBcnJheS5pc0FycmF5fHxmdW5jdGlvbihhKXtyZXR1cm4gUS50eXBlKGEpPT09ImFycmF5In0saXNXaW5kb3c6ZnVuY3Rpb24oYSl7cmV0dXJuIGEhPW51bGwmJmE9PWEud2luZG93fSxpc051bWVyaWM6ZnVuY3Rpb24oYSl7cmV0dXJuIVEuaXNBcnJheShhKSYmYS1wYXJzZUZsb2F0KGEpPj0wfSxpc0VtcHR5T2JqZWN0OmZ1bmN0aW9uKGEpe3ZhciBuO2ZvcihuIGluIGEpe3JldHVybiBmYWxzZX1yZXR1cm4gdHJ1ZX0saXNQbGFpbk9iamVjdDpmdW5jdGlvbihhKXt2YXIgYjtpZighYXx8US50eXBlKGEpIT09Im9iamVjdCJ8fGEubm9kZVR5cGV8fFEuaXNXaW5kb3coYSkpe3JldHVybiBmYWxzZX10cnl7aWYoYS5jb25zdHJ1Y3RvciYmIXUuY2FsbChhLCJjb25zdHJ1Y3RvciIpJiYhdS5jYWxsKGEuY29uc3RydWN0b3IucHJvdG90eXBlLCJpc1Byb3RvdHlwZU9mIikpe3JldHVybiBmYWxzZX19Y2F0Y2goZSl7cmV0dXJuIGZhbHNlfWlmKHgub3duTGFzdCl7Zm9yKGIgaW4gYSl7cmV0dXJuIHUuY2FsbChhLGIpfX1mb3IoYiBpbiBhKXt9cmV0dXJuIGI9PT11bmRlZmluZWR8fHUuY2FsbChhLGIpfSx0eXBlOmZ1bmN0aW9uKGEpe2lmKGE9PW51bGwpe3JldHVybiBhKyIifXJldHVybiB0eXBlb2YgYT09PSJvYmplY3QifHx0eXBlb2YgYT09PSJmdW5jdGlvbiI/b1txLmNhbGwoYSldfHwib2JqZWN0Ijp0eXBlb2YgYX0sZ2xvYmFsRXZhbDpmdW5jdGlvbihhKXtpZihhJiZRLnRyaW0oYSkpeyh3LmV4ZWNTY3JpcHR8fGZ1bmN0aW9uKGEpe3dbImV2YWwiXS5jYWxsKHcsYSl9KShhKX19LGNhbWVsQ2FzZTpmdW5jdGlvbihzKXtyZXR1cm4gcy5yZXBsYWNlKEEsIm1zLSIpLnJlcGxhY2UoQixDKX0sbm9kZU5hbWU6ZnVuY3Rpb24oYSxuKXtyZXR1cm4gYS5ub2RlTmFtZSYmYS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09bi50b0xvd2VyQ2FzZSgpfSxlYWNoOmZ1bmN0aW9uKGEsYixqKXt2YXIgdixpPTAsbD1hLmxlbmd0aCxtPUQoYSk7aWYoail7aWYobSl7Zm9yKDtpPGw7aSsrKXt2PWIuYXBwbHkoYVtpXSxqKTtpZih2PT09ZmFsc2Upe2JyZWFrfX19ZWxzZXtmb3IoaSBpbiBhKXt2PWIuYXBwbHkoYVtpXSxqKTtpZih2PT09ZmFsc2Upe2JyZWFrfX19fWVsc2V7aWYobSl7Zm9yKDtpPGw7aSsrKXt2PWIuY2FsbChhW2ldLGksYVtpXSk7aWYodj09PWZhbHNlKXticmVha319fWVsc2V7Zm9yKGkgaW4gYSl7dj1iLmNhbGwoYVtpXSxpLGFbaV0pO2lmKHY9PT1mYWxzZSl7YnJlYWt9fX19cmV0dXJuIGF9LHRyaW06ZnVuY3Rpb24odCl7cmV0dXJuIHQ9PW51bGw/IiI6KHQrIiIpLnJlcGxhY2UoeiwiIil9LG1ha2VBcnJheTpmdW5jdGlvbihhLHIpe3ZhciBiPXJ8fFtdO2lmKGEhPW51bGwpe2lmKEQoT2JqZWN0KGEpKSl7US5tZXJnZShiLHR5cGVvZiBhPT09InN0cmluZyI/W2FdOmEpfWVsc2V7aC5jYWxsKGIsYSl9fXJldHVybiBifSxpbkFycmF5OmZ1bmN0aW9uKGEsYixpKXt2YXIgbDtpZihiKXtpZihrKXtyZXR1cm4gay5jYWxsKGIsYSxpKX1sPWIubGVuZ3RoO2k9aT9pPDA/TWF0aC5tYXgoMCxsK2kpOmk6MDtmb3IoO2k8bDtpKyspe2lmKGkgaW4gYiYmYltpXT09PWEpe3JldHVybiBpfX19cmV0dXJuLTF9LG1lcmdlOmZ1bmN0aW9uKGEscyl7dmFyIGw9K3MubGVuZ3RoLGo9MCxpPWEubGVuZ3RoO3doaWxlKGo8bCl7YVtpKytdPXNbaisrXX1pZihsIT09bCl7d2hpbGUoc1tqXSE9PXVuZGVmaW5lZCl7YVtpKytdPXNbaisrXX19YS5sZW5ndGg9aTtyZXR1cm4gYX0sZ3JlcDpmdW5jdGlvbihhLGIsail7dmFyIGwsbT1bXSxpPTAsbj1hLmxlbmd0aCxwPSFqO2Zvcig7aTxuO2krKyl7bD0hYihhW2ldLGkpO2lmKGwhPT1wKXttLnB1c2goYVtpXSl9fXJldHVybiBtfSxtYXA6ZnVuY3Rpb24oYSxiLGope3ZhciB2LGk9MCxsPWEubGVuZ3RoLG09RChhKSxyPVtdO2lmKG0pe2Zvcig7aTxsO2krKyl7dj1iKGFbaV0saSxqKTtpZih2IT1udWxsKXtyLnB1c2godil9fX1lbHNle2ZvcihpIGluIGEpe3Y9YihhW2ldLGksaik7aWYodiE9bnVsbCl7ci5wdXNoKHYpfX19cmV0dXJuIGcuYXBwbHkoW10scil9LGd1aWQ6MSxwcm94eTpmdW5jdGlvbihhLGIpe3ZhciBqLHAsdDtpZih0eXBlb2YgYj09PSJzdHJpbmciKXt0PWFbYl07Yj1hO2E9dH1pZighUS5pc0Z1bmN0aW9uKGEpKXtyZXR1cm4gdW5kZWZpbmVkfWo9Zi5jYWxsKGFyZ3VtZW50cywyKTtwPWZ1bmN0aW9uKCl7cmV0dXJuIGEuYXBwbHkoYnx8dGhpcyxqLmNvbmNhdChmLmNhbGwoYXJndW1lbnRzKSkpfTtwLmd1aWQ9YS5ndWlkPWEuZ3VpZHx8US5ndWlkKys7cmV0dXJuIHB9LG5vdzpmdW5jdGlvbigpe3JldHVybisobmV3IERhdGUoKSl9LHN1cHBvcnQ6eH0pO1EuZWFjaCgiQm9vbGVhbiBOdW1iZXIgU3RyaW5nIEZ1bmN0aW9uIEFycmF5IERhdGUgUmVnRXhwIE9iamVjdCBFcnJvciIuc3BsaXQoIiAiKSxmdW5jdGlvbihpLG4pe29bIltvYmplY3QgIituKyJdIl09bi50b0xvd2VyQ2FzZSgpfSk7ZnVuY3Rpb24gRChhKXt2YXIgbD1hLmxlbmd0aCx0PVEudHlwZShhKTtpZih0PT09ImZ1bmN0aW9uInx8US5pc1dpbmRvdyhhKSl7cmV0dXJuIGZhbHNlfWlmKGEubm9kZVR5cGU9PT0xJiZsKXtyZXR1cm4gdHJ1ZX1yZXR1cm4gdD09PSJhcnJheSJ8fGw9PT0wfHx0eXBlb2YgbD09PSJudW1iZXIiJiZsPjAmJihsLTEpaW4gYX12YXIgUz0NCi8qIQ0KICogU2l6emxlIENTUyBTZWxlY3RvciBFbmdpbmUgdjEuMTAuMTkNCiAqIGh0dHA6Ly9zaXp6bGVqcy5jb20vDQogKg0KICogQ29weXJpZ2h0IDIwMTMgalF1ZXJ5IEZvdW5kYXRpb24sIEluYy4gYW5kIG90aGVyIGNvbnRyaWJ1dG9ycw0KICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlDQogKiBodHRwOi8vanF1ZXJ5Lm9yZy9saWNlbnNlDQogKg0KICogRGF0ZTogMjAxNC0wNC0xOA0KICovDQooZnVuY3Rpb24odyl7dmFyIGkseCxsLG4scCx0LHIscyx2LHIzLHMzLHQzLEosbzMsdTMsdjMsdzMseDMseTMsejM9InNpenpsZSIrLShuZXcgRGF0ZSgpKSxBMz13LmRvY3VtZW50LEIzPTAsQzM9MCxEMz1jNCgpLEUzPWM0KCksRjM9YzQoKSxHMz1mdW5jdGlvbihhLGIpe2lmKGE9PT1iKXtzMz10cnVlfXJldHVybiAwfSxYPXR5cGVvZiB1bmRlZmluZWQsSDM9MTw8MzEsdT0oe30pLmhhc093blByb3BlcnR5LEkzPVtdLEozPUkzLnBvcCxLMz1JMy5wdXNoLGg9STMucHVzaCxmPUkzLnNsaWNlLGs9STMuaW5kZXhPZnx8ZnVuY3Rpb24oYSl7dmFyIGk9MCxiPXRoaXMubGVuZ3RoO2Zvcig7aTxiO2krKyl7aWYodGhpc1tpXT09PWEpe3JldHVybiBpfX1yZXR1cm4tMX0sTDM9ImNoZWNrZWR8c2VsZWN0ZWR8YXN5bmN8YXV0b2ZvY3VzfGF1dG9wbGF5fGNvbnRyb2xzfGRlZmVyfGRpc2FibGVkfGhpZGRlbnxpc21hcHxsb29wfG11bHRpcGxlfG9wZW58cmVhZG9ubHl8cmVxdWlyZWR8c2NvcGVkIixNMz0iW1xceDIwXFx0XFxyXFxuXFxmXSIsTjM9Iig/OlxcXFwufFtcXHctXXxbXlxceDAwLVxceGEwXSkrIixPMz1OMy5yZXBsYWNlKCJ3IiwidyMiKSxQMz0iXFxbIitNMysiKigiK04zKyIpKD86IitNMysiKihbKl4kfCF+XT89KSIrTTMrIiooPzonKCg/OlxcXFwufFteXFxcXCddKSopJ3xcIigoPzpcXFxcLnxbXlxcXFxcIl0pKilcInwoIitPMysiKSl8KSIrTTMrIipcXF0iLFEzPSI6KCIrTjMrIikoPzpcXCgoIisiKCcoKD86XFxcXC58W15cXFxcJ10pKiknfFwiKCg/OlxcXFwufFteXFxcXFwiXSkqKVwiKXwiKyIoKD86XFxcXC58W15cXFxcKClbXFxdXXwiK1AzKyIpKil8IisiLioiKyIpXFwpfCkiLHo9bmV3IFJlZ0V4cCgiXiIrTTMrIit8KCg/Ol58W15cXFxcXSkoPzpcXFxcLikqKSIrTTMrIiskIiwiZyIpLFIzPW5ldyBSZWdFeHAoIl4iK00zKyIqLCIrTTMrIioiKSxTMz1uZXcgUmVnRXhwKCJeIitNMysiKihbPit+XXwiK00zKyIpIitNMysiKiIpLFQzPW5ldyBSZWdFeHAoIj0iK00zKyIqKFteXFxdJ1wiXSo/KSIrTTMrIipcXF0iLCJnIiksVTM9bmV3IFJlZ0V4cChRMyksVjM9bmV3IFJlZ0V4cCgiXiIrTzMrIiQiKSxXMz17IklEIjpuZXcgUmVnRXhwKCJeIygiK04zKyIpIiksIkNMQVNTIjpuZXcgUmVnRXhwKCJeXFwuKCIrTjMrIikiKSwiVEFHIjpuZXcgUmVnRXhwKCJeKCIrTjMucmVwbGFjZSgidyIsIncqIikrIikiKSwiQVRUUiI6bmV3IFJlZ0V4cCgiXiIrUDMpLCJQU0VVRE8iOm5ldyBSZWdFeHAoIl4iK1EzKSwiQ0hJTEQiOm5ldyBSZWdFeHAoIl46KG9ubHl8Zmlyc3R8bGFzdHxudGh8bnRoLWxhc3QpLShjaGlsZHxvZi10eXBlKSg/OlxcKCIrTTMrIiooZXZlbnxvZGR8KChbKy1dfCkoXFxkKilufCkiK00zKyIqKD86KFsrLV18KSIrTTMrIiooXFxkKyl8KSkiK00zKyIqXFwpfCkiLCJpIiksImJvb2wiOm5ldyBSZWdFeHAoIl4oPzoiK0wzKyIpJCIsImkiKSwibmVlZHNDb250ZXh0IjpuZXcgUmVnRXhwKCJeIitNMysiKls+K35dfDooZXZlbnxvZGR8ZXF8Z3R8bHR8bnRofGZpcnN0fGxhc3QpKD86XFwoIitNMysiKigoPzotXFxkKT9cXGQqKSIrTTMrIipcXCl8KSg/PVteLV18JCkiLCJpIil9LFgzPS9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGJ1dHRvbikkL2ksWTM9L15oXGQkL2ksWjM9L15bXntdK1x7XHMqXFtuYXRpdmUgXHcvLEs9L14oPzojKFtcdy1dKyl8KFx3Kyl8XC4oW1x3LV0rKSkkLywkMz0vWyt+XS8sXzM9Lyd8XFwvZyxhND1uZXcgUmVnRXhwKCJcXFxcKFtcXGRhLWZdezEsNn0iK00zKyI/fCgiK00zKyIpfC4pIiwiaWciKSxiND1mdW5jdGlvbihfLGEsYil7dmFyIGo9IjB4IithLTB4MTAwMDA7cmV0dXJuIGohPT1qfHxiP2E6ajwwP1N0cmluZy5mcm9tQ2hhckNvZGUoaisweDEwMDAwKTpTdHJpbmcuZnJvbUNoYXJDb2RlKGo+PjEwfDB4RDgwMCxqJjB4M0ZGfDB4REMwMCl9O3RyeXtoLmFwcGx5KChJMz1mLmNhbGwoQTMuY2hpbGROb2RlcykpLEEzLmNoaWxkTm9kZXMpO0kzW0EzLmNoaWxkTm9kZXMubGVuZ3RoXS5ub2RlVHlwZX1jYXRjaChlKXtoPXthcHBseTpJMy5sZW5ndGg/ZnVuY3Rpb24oYSxiKXtLMy5hcHBseShhLGYuY2FsbChiKSl9OmZ1bmN0aW9uKGEsYil7dmFyIGo9YS5sZW5ndGgsaT0wO3doaWxlKChhW2orK109YltpKytdKSl7fWEubGVuZ3RoPWotMX19fWZ1bmN0aW9uIFMoYSxiLGosXyl7dmFyIHU0LHY0LG0sdzQsaSx4NCx5NCx6NCxBNCxCNDtpZigoYj9iLm93bmVyRG9jdW1lbnR8fGI6QTMpIT09Sil7dDMoYil9Yj1ifHxKO2o9anx8W107aWYoIWF8fHR5cGVvZiBhIT09InN0cmluZyIpe3JldHVybiBqfWlmKCh3ND1iLm5vZGVUeXBlKSE9PTEmJnc0IT09OSl7cmV0dXJuW119aWYodTMmJiFfKXtpZigodTQ9Sy5leGVjKGEpKSl7aWYoKG09dTRbMV0pKXtpZih3ND09PTkpe3Y0PWIuZ2V0RWxlbWVudEJ5SWQobSk7aWYodjQmJnY0LnBhcmVudE5vZGUpe2lmKHY0LmlkPT09bSl7ai5wdXNoKHY0KTtyZXR1cm4gan19ZWxzZXtyZXR1cm4gan19ZWxzZXtpZihiLm93bmVyRG9jdW1lbnQmJih2ND1iLm93bmVyRG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQobSkpJiZ5MyhiLHY0KSYmdjQuaWQ9PT1tKXtqLnB1c2godjQpO3JldHVybiBqfX19ZWxzZSBpZih1NFsyXSl7aC5hcHBseShqLGIuZ2V0RWxlbWVudHNCeVRhZ05hbWUoYSkpO3JldHVybiBqfWVsc2UgaWYoKG09dTRbM10pJiZ4LmdldEVsZW1lbnRzQnlDbGFzc05hbWUmJmIuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSl7aC5hcHBseShqLGIuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShtKSk7cmV0dXJuIGp9fWlmKHgucXNhJiYoIXYzfHwhdjMudGVzdChhKSkpe3o0PXk0PXozO0E0PWI7QjQ9dzQ9PT05JiZhO2lmKHc0PT09MSYmYi5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpIT09Im9iamVjdCIpe3g0PXQoYSk7aWYoKHk0PWIuZ2V0QXR0cmlidXRlKCJpZCIpKSl7ejQ9eTQucmVwbGFjZShfMywiXFwkJiIpfWVsc2V7Yi5zZXRBdHRyaWJ1dGUoImlkIix6NCl9ejQ9IltpZD0nIit6NCsiJ10gIjtpPXg0Lmxlbmd0aDt3aGlsZShpLS0pe3g0W2ldPXo0K200KHg0W2ldKX1BND0kMy50ZXN0KGEpJiZrNChiLnBhcmVudE5vZGUpfHxiO0I0PXg0LmpvaW4oIiwiKX1pZihCNCl7dHJ5e2guYXBwbHkoaixBNC5xdWVyeVNlbGVjdG9yQWxsKEI0KSk7cmV0dXJuIGp9Y2F0Y2goQzQpe31maW5hbGx5e2lmKCF5NCl7Yi5yZW1vdmVBdHRyaWJ1dGUoImlkIil9fX19fXJldHVybiBzKGEucmVwbGFjZSh6LCIkMSIpLGIsaixfKX1mdW5jdGlvbiBjNCgpe3ZhciBhPVtdO2Z1bmN0aW9uIGIoaixtKXtpZihhLnB1c2goaisiICIpPmwuY2FjaGVMZW5ndGgpe2RlbGV0ZSBiW2Euc2hpZnQoKV19cmV0dXJuKGJbaisiICJdPW0pfXJldHVybiBifWZ1bmN0aW9uIGQ0KGEpe2FbejNdPXRydWU7cmV0dXJuIGF9ZnVuY3Rpb24gZTQoYSl7dmFyIGI9Si5jcmVhdGVFbGVtZW50KCJkaXYiKTt0cnl7cmV0dXJuISFhKGIpfWNhdGNoKGUpe3JldHVybiBmYWxzZX1maW5hbGx5e2lmKGIucGFyZW50Tm9kZSl7Yi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGIpfWI9bnVsbH19ZnVuY3Rpb24gZjQoYSxiKXt2YXIgSTM9YS5zcGxpdCgifCIpLGk9YS5sZW5ndGg7d2hpbGUoaS0tKXtsLmF0dHJIYW5kbGVbSTNbaV1dPWJ9fWZ1bmN0aW9uIGc0KGEsYil7dmFyIGo9YiYmYSxtPWomJmEubm9kZVR5cGU9PT0xJiZiLm5vZGVUeXBlPT09MSYmKH5iLnNvdXJjZUluZGV4fHxIMyktKH5hLnNvdXJjZUluZGV4fHxIMyk7aWYobSl7cmV0dXJuIG19aWYoail7d2hpbGUoKGo9ai5uZXh0U2libGluZykpe2lmKGo9PT1iKXtyZXR1cm4tMX19fXJldHVybiBhPzE6LTF9ZnVuY3Rpb24gaDQoYSl7cmV0dXJuIGZ1bmN0aW9uKGIpe3ZhciBqPWIubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm4gaj09PSJpbnB1dCImJmIudHlwZT09PWF9fWZ1bmN0aW9uIGk0KGEpe3JldHVybiBmdW5jdGlvbihiKXt2YXIgaj1iLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7cmV0dXJuKGo9PT0iaW5wdXQifHxqPT09ImJ1dHRvbiIpJiZiLnR5cGU9PT1hfX1mdW5jdGlvbiBqNChhKXtyZXR1cm4gZDQoZnVuY3Rpb24oYil7Yj0rYjtyZXR1cm4gZDQoZnVuY3Rpb24obSx4Myl7dmFyIGosXz1hKFtdLG0ubGVuZ3RoLGIpLGk9Xy5sZW5ndGg7d2hpbGUoaS0tKXtpZihtWyhqPV9baV0pXSl7bVtqXT0hKHgzW2pdPW1bal0pfX19KX0pfWZ1bmN0aW9uIGs0KGEpe3JldHVybiBhJiZ0eXBlb2YgYS5nZXRFbGVtZW50c0J5VGFnTmFtZSE9PVgmJmF9eD1TLnN1cHBvcnQ9e307cD1TLmlzWE1MPWZ1bmN0aW9uKGEpe3ZhciBiPWEmJihhLm93bmVyRG9jdW1lbnR8fGEpLmRvY3VtZW50RWxlbWVudDtyZXR1cm4gYj9iLm5vZGVOYW1lIT09IkhUTUwiOmZhbHNlfTt0Mz1TLnNldERvY3VtZW50PWZ1bmN0aW9uKGope3ZhciBfLHU0PWo/ai5vd25lckRvY3VtZW50fHxqOkEzLHY0PXU0LmRlZmF1bHRWaWV3O2lmKHU0PT09Snx8dTQubm9kZVR5cGUhPT05fHwhdTQuZG9jdW1lbnRFbGVtZW50KXtyZXR1cm4gSn1KPXU0O28zPXU0LmRvY3VtZW50RWxlbWVudDt1Mz0hcCh1NCk7aWYodjQmJnY0IT09djQudG9wKXtpZih2NC5hZGRFdmVudExpc3RlbmVyKXt2NC5hZGRFdmVudExpc3RlbmVyKCJ1bmxvYWQiLGZ1bmN0aW9uKCl7dDMoKX0sZmFsc2UpfWVsc2UgaWYodjQuYXR0YWNoRXZlbnQpe3Y0LmF0dGFjaEV2ZW50KCJvbnVubG9hZCIsZnVuY3Rpb24oKXt0MygpfSl9fXguYXR0cmlidXRlcz1lNChmdW5jdGlvbihhKXthLmNsYXNzTmFtZT0iaSI7cmV0dXJuIWEuZ2V0QXR0cmlidXRlKCJjbGFzc05hbWUiKX0pO3guZ2V0RWxlbWVudHNCeVRhZ05hbWU9ZTQoZnVuY3Rpb24oYSl7YS5hcHBlbmRDaGlsZCh1NC5jcmVhdGVDb21tZW50KCIiKSk7cmV0dXJuIWEuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIioiKS5sZW5ndGh9KTt4LmdldEVsZW1lbnRzQnlDbGFzc05hbWU9WjMudGVzdCh1NC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKSYmZTQoZnVuY3Rpb24oYSl7YS5pbm5lckhUTUw9IjxkaXYgY2xhc3M9J2EnPjwvZGl2PjxkaXYgY2xhc3M9J2EgaSc+PC9kaXY+IjthLmZpcnN0Q2hpbGQuY2xhc3NOYW1lPSJpIjtyZXR1cm4gYS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJpIikubGVuZ3RoPT09Mn0pO3guZ2V0QnlJZD1lNChmdW5jdGlvbihhKXtvMy5hcHBlbmRDaGlsZChhKS5pZD16MztyZXR1cm4hdTQuZ2V0RWxlbWVudHNCeU5hbWV8fCF1NC5nZXRFbGVtZW50c0J5TmFtZSh6MykubGVuZ3RofSk7aWYoeC5nZXRCeUlkKXtsLmZpbmRbIklEIl09ZnVuY3Rpb24oYSxiKXtpZih0eXBlb2YgYi5nZXRFbGVtZW50QnlJZCE9PVgmJnUzKXt2YXIgbT1iLmdldEVsZW1lbnRCeUlkKGEpO3JldHVybiBtJiZtLnBhcmVudE5vZGU/W21dOltdfX07bC5maWx0ZXJbIklEIl09ZnVuY3Rpb24oYSl7dmFyIGI9YS5yZXBsYWNlKGE0LGI0KTtyZXR1cm4gZnVuY3Rpb24obSl7cmV0dXJuIG0uZ2V0QXR0cmlidXRlKCJpZCIpPT09Yn19fWVsc2V7ZGVsZXRlIGwuZmluZFsiSUQiXTtsLmZpbHRlclsiSUQiXT1mdW5jdGlvbihhKXt2YXIgYj1hLnJlcGxhY2UoYTQsYjQpO3JldHVybiBmdW5jdGlvbihtKXt2YXIgaj10eXBlb2YgbS5nZXRBdHRyaWJ1dGVOb2RlIT09WCYmbS5nZXRBdHRyaWJ1dGVOb2RlKCJpZCIpO3JldHVybiBqJiZqLnZhbHVlPT09Yn19fWwuZmluZFsiVEFHIl09eC5nZXRFbGVtZW50c0J5VGFnTmFtZT9mdW5jdGlvbihhLGIpe2lmKHR5cGVvZiBiLmdldEVsZW1lbnRzQnlUYWdOYW1lIT09WCl7cmV0dXJuIGIuZ2V0RWxlbWVudHNCeVRhZ05hbWUoYSl9fTpmdW5jdGlvbihhLGIpe3ZhciBtLHc0PVtdLGk9MCx4ND1iLmdldEVsZW1lbnRzQnlUYWdOYW1lKGEpO2lmKGE9PT0iKiIpe3doaWxlKChtPXg0W2krK10pKXtpZihtLm5vZGVUeXBlPT09MSl7dzQucHVzaChtKX19cmV0dXJuIHc0fXJldHVybiB4NH07bC5maW5kWyJDTEFTUyJdPXguZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSYmZnVuY3Rpb24oYSxiKXtpZih0eXBlb2YgYi5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lIT09WCYmdTMpe3JldHVybiBiLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoYSl9fTt3Mz1bXTt2Mz1bXTtpZigoeC5xc2E9WjMudGVzdCh1NC5xdWVyeVNlbGVjdG9yQWxsKSkpe2U0KGZ1bmN0aW9uKGEpe2EuaW5uZXJIVE1MPSI8c2VsZWN0IG1zYWxsb3djbGlwPScnPjxvcHRpb24gc2VsZWN0ZWQ9Jyc+PC9vcHRpb24+PC9zZWxlY3Q+IjtpZihhLnF1ZXJ5U2VsZWN0b3JBbGwoIlttc2FsbG93Y2xpcF49JyddIikubGVuZ3RoKXt2My5wdXNoKCJbKl4kXT0iK00zKyIqKD86Jyd8XCJcIikiKX1pZighYS5xdWVyeVNlbGVjdG9yQWxsKCJbc2VsZWN0ZWRdIikubGVuZ3RoKXt2My5wdXNoKCJcXFsiK00zKyIqKD86dmFsdWV8IitMMysiKSIpfWlmKCFhLnF1ZXJ5U2VsZWN0b3JBbGwoIjpjaGVja2VkIikubGVuZ3RoKXt2My5wdXNoKCI6Y2hlY2tlZCIpfX0pO2U0KGZ1bmN0aW9uKGEpe3ZhciBiPXU0LmNyZWF0ZUVsZW1lbnQoImlucHV0Iik7Yi5zZXRBdHRyaWJ1dGUoInR5cGUiLCJoaWRkZW4iKTthLmFwcGVuZENoaWxkKGIpLnNldEF0dHJpYnV0ZSgibmFtZSIsIkQiKTtpZihhLnF1ZXJ5U2VsZWN0b3JBbGwoIltuYW1lPWRdIikubGVuZ3RoKXt2My5wdXNoKCJuYW1lIitNMysiKlsqXiR8IX5dPz0iKX1pZighYS5xdWVyeVNlbGVjdG9yQWxsKCI6ZW5hYmxlZCIpLmxlbmd0aCl7djMucHVzaCgiOmVuYWJsZWQiLCI6ZGlzYWJsZWQiKX1hLnF1ZXJ5U2VsZWN0b3JBbGwoIiosOngiKTt2My5wdXNoKCIsLio6Iil9KX1pZigoeC5tYXRjaGVzU2VsZWN0b3I9WjMudGVzdCgoeDM9bzMubWF0Y2hlc3x8bzMud2Via2l0TWF0Y2hlc1NlbGVjdG9yfHxvMy5tb3pNYXRjaGVzU2VsZWN0b3J8fG8zLm9NYXRjaGVzU2VsZWN0b3J8fG8zLm1zTWF0Y2hlc1NlbGVjdG9yKSkpKXtlNChmdW5jdGlvbihhKXt4LmRpc2Nvbm5lY3RlZE1hdGNoPXgzLmNhbGwoYSwiZGl2Iik7eDMuY2FsbChhLCJbcyE9JyddOngiKTt3My5wdXNoKCIhPSIsUTMpfSl9djM9djMubGVuZ3RoJiZuZXcgUmVnRXhwKHYzLmpvaW4oInwiKSk7dzM9dzMubGVuZ3RoJiZuZXcgUmVnRXhwKHczLmpvaW4oInwiKSk7Xz1aMy50ZXN0KG8zLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKTt5Mz1ffHxaMy50ZXN0KG8zLmNvbnRhaW5zKT9mdW5jdGlvbihhLGIpe3ZhciBtPWEubm9kZVR5cGU9PT05P2EuZG9jdW1lbnRFbGVtZW50OmEsdzQ9YiYmYi5wYXJlbnROb2RlO3JldHVybiBhPT09dzR8fCEhKHc0JiZ3NC5ub2RlVHlwZT09PTEmJihtLmNvbnRhaW5zP20uY29udGFpbnModzQpOmEuY29tcGFyZURvY3VtZW50UG9zaXRpb24mJmEuY29tcGFyZURvY3VtZW50UG9zaXRpb24odzQpJjE2KSl9OmZ1bmN0aW9uKGEsYil7aWYoYil7d2hpbGUoKGI9Yi5wYXJlbnROb2RlKSl7aWYoYj09PWEpe3JldHVybiB0cnVlfX19cmV0dXJuIGZhbHNlfTtHMz1fP2Z1bmN0aW9uKGEsYil7aWYoYT09PWIpe3MzPXRydWU7cmV0dXJuIDB9dmFyIG09IWEuY29tcGFyZURvY3VtZW50UG9zaXRpb24tIWIuY29tcGFyZURvY3VtZW50UG9zaXRpb247aWYobSl7cmV0dXJuIG19bT0oYS5vd25lckRvY3VtZW50fHxhKT09PShiLm93bmVyRG9jdW1lbnR8fGIpP2EuY29tcGFyZURvY3VtZW50UG9zaXRpb24oYik6MTtpZihtJjF8fCgheC5zb3J0RGV0YWNoZWQmJmIuY29tcGFyZURvY3VtZW50UG9zaXRpb24oYSk9PT1tKSl7aWYoYT09PXU0fHxhLm93bmVyRG9jdW1lbnQ9PT1BMyYmeTMoQTMsYSkpe3JldHVybi0xfWlmKGI9PT11NHx8Yi5vd25lckRvY3VtZW50PT09QTMmJnkzKEEzLGIpKXtyZXR1cm4gMX1yZXR1cm4gcjM/KGsuY2FsbChyMyxhKS1rLmNhbGwocjMsYikpOjB9cmV0dXJuIG0mND8tMToxfTpmdW5jdGlvbihhLGIpe2lmKGE9PT1iKXtzMz10cnVlO3JldHVybiAwfXZhciBtLGk9MCx3ND1hLnBhcmVudE5vZGUseDQ9Yi5wYXJlbnROb2RlLGFwPVthXSxicD1bYl07aWYoIXc0fHwheDQpe3JldHVybiBhPT09dTQ/LTE6Yj09PXU0PzE6dzQ/LTE6eDQ/MTpyMz8oay5jYWxsKHIzLGEpLWsuY2FsbChyMyxiKSk6MH1lbHNlIGlmKHc0PT09eDQpe3JldHVybiBnNChhLGIpfW09YTt3aGlsZSgobT1tLnBhcmVudE5vZGUpKXthcC51bnNoaWZ0KG0pfW09Yjt3aGlsZSgobT1tLnBhcmVudE5vZGUpKXticC51bnNoaWZ0KG0pfXdoaWxlKGFwW2ldPT09YnBbaV0pe2krK31yZXR1cm4gaT9nNChhcFtpXSxicFtpXSk6YXBbaV09PT1BMz8tMTpicFtpXT09PUEzPzE6MH07cmV0dXJuIHU0fTtTLm1hdGNoZXM9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gUyhhLG51bGwsbnVsbCxiKX07Uy5tYXRjaGVzU2VsZWN0b3I9ZnVuY3Rpb24oYSxiKXtpZigoYS5vd25lckRvY3VtZW50fHxhKSE9PUope3QzKGEpfWI9Yi5yZXBsYWNlKFQzLCI9JyQxJ10iKTtpZih4Lm1hdGNoZXNTZWxlY3RvciYmdTMmJighdzN8fCF3My50ZXN0KGIpKSYmKCF2M3x8IXYzLnRlc3QoYikpKXt0cnl7dmFyIGo9eDMuY2FsbChhLGIpO2lmKGp8fHguZGlzY29ubmVjdGVkTWF0Y2h8fGEuZG9jdW1lbnQmJmEuZG9jdW1lbnQubm9kZVR5cGUhPT0xMSl7cmV0dXJuIGp9fWNhdGNoKGUpe319cmV0dXJuIFMoYixKLG51bGwsW2FdKS5sZW5ndGg+MH07Uy5jb250YWlucz1mdW5jdGlvbihhLGIpe2lmKChhLm93bmVyRG9jdW1lbnR8fGEpIT09Sil7dDMoYSl9cmV0dXJuIHkzKGEsYil9O1MuYXR0cj1mdW5jdGlvbihhLGIpe2lmKChhLm93bmVyRG9jdW1lbnR8fGEpIT09Sil7dDMoYSl9dmFyIGo9bC5hdHRySGFuZGxlW2IudG9Mb3dlckNhc2UoKV0sbT1qJiZ1LmNhbGwobC5hdHRySGFuZGxlLGIudG9Mb3dlckNhc2UoKSk/aihhLGIsIXUzKTp1bmRlZmluZWQ7cmV0dXJuIG0hPT11bmRlZmluZWQ/bTp4LmF0dHJpYnV0ZXN8fCF1Mz9hLmdldEF0dHJpYnV0ZShiKToobT1hLmdldEF0dHJpYnV0ZU5vZGUoYikpJiZtLnNwZWNpZmllZD9tLnZhbHVlOm51bGx9O1MuZXJyb3I9ZnVuY3Rpb24obSl7dGhyb3cgbmV3IEVycm9yKCJTeW50YXggZXJyb3IsIHVucmVjb2duaXplZCBleHByZXNzaW9uOiAiK20pfTtTLnVuaXF1ZVNvcnQ9ZnVuY3Rpb24oYSl7dmFyIGIsbT1bXSxqPTAsaT0wO3MzPSF4LmRldGVjdER1cGxpY2F0ZXM7cjM9IXguc29ydFN0YWJsZSYmYS5zbGljZSgwKTthLnNvcnQoRzMpO2lmKHMzKXt3aGlsZSgoYj1hW2krK10pKXtpZihiPT09YVtpXSl7aj1tLnB1c2goaSl9fXdoaWxlKGotLSl7YS5zcGxpY2UobVtqXSwxKX19cjM9bnVsbDtyZXR1cm4gYX07bj1TLmdldFRleHQ9ZnVuY3Rpb24oYSl7dmFyIGIsaj0iIixpPTAsbT1hLm5vZGVUeXBlO2lmKCFtKXt3aGlsZSgoYj1hW2krK10pKXtqKz1uKGIpfX1lbHNlIGlmKG09PT0xfHxtPT09OXx8bT09PTExKXtpZih0eXBlb2YgYS50ZXh0Q29udGVudD09PSJzdHJpbmciKXtyZXR1cm4gYS50ZXh0Q29udGVudH1lbHNle2ZvcihhPWEuZmlyc3RDaGlsZDthO2E9YS5uZXh0U2libGluZyl7ais9bihhKX19fWVsc2UgaWYobT09PTN8fG09PT00KXtyZXR1cm4gYS5ub2RlVmFsdWV9cmV0dXJuIGp9O2w9Uy5zZWxlY3RvcnM9e2NhY2hlTGVuZ3RoOjUwLGNyZWF0ZVBzZXVkbzpkNCxtYXRjaDpXMyxhdHRySGFuZGxlOnt9LGZpbmQ6e30scmVsYXRpdmU6eyI+Ijp7ZGlyOiJwYXJlbnROb2RlIixmaXJzdDp0cnVlfSwiICI6e2RpcjoicGFyZW50Tm9kZSJ9LCIrIjp7ZGlyOiJwcmV2aW91c1NpYmxpbmciLGZpcnN0OnRydWV9LCJ+Ijp7ZGlyOiJwcmV2aW91c1NpYmxpbmcifX0scHJlRmlsdGVyOnsiQVRUUiI6ZnVuY3Rpb24obSl7bVsxXT1tWzFdLnJlcGxhY2UoYTQsYjQpO21bM109KG1bM118fG1bNF18fG1bNV18fCIiKS5yZXBsYWNlKGE0LGI0KTtpZihtWzJdPT09In49Iil7bVszXT0iICIrbVszXSsiICJ9cmV0dXJuIG0uc2xpY2UoMCw0KX0sIkNISUxEIjpmdW5jdGlvbihtKXttWzFdPW1bMV0udG9Mb3dlckNhc2UoKTtpZihtWzFdLnNsaWNlKDAsMyk9PT0ibnRoIil7aWYoIW1bM10pe1MuZXJyb3IobVswXSl9bVs0XT0rKG1bNF0/bVs1XSsobVs2XXx8MSk6MioobVszXT09PSJldmVuInx8bVszXT09PSJvZGQiKSk7bVs1XT0rKChtWzddK21bOF0pfHxtWzNdPT09Im9kZCIpfWVsc2UgaWYobVszXSl7Uy5lcnJvcihtWzBdKX1yZXR1cm4gbX0sIlBTRVVETyI6ZnVuY3Rpb24obSl7dmFyIGEsYj0hbVs2XSYmbVsyXTtpZihXM1siQ0hJTEQiXS50ZXN0KG1bMF0pKXtyZXR1cm4gbnVsbH1pZihtWzNdKXttWzJdPW1bNF18fG1bNV18fCIifWVsc2UgaWYoYiYmVTMudGVzdChiKSYmKGE9dChiLHRydWUpKSYmKGE9Yi5pbmRleE9mKCIpIixiLmxlbmd0aC1hKS1iLmxlbmd0aCkpe21bMF09bVswXS5zbGljZSgwLGEpO21bMl09Yi5zbGljZSgwLGEpfXJldHVybiBtLnNsaWNlKDAsMyl9fSxmaWx0ZXI6eyJUQUciOmZ1bmN0aW9uKGEpe3ZhciBiPWEucmVwbGFjZShhNCxiNCkudG9Mb3dlckNhc2UoKTtyZXR1cm4gYT09PSIqIj9mdW5jdGlvbigpe3JldHVybiB0cnVlfTpmdW5jdGlvbihqKXtyZXR1cm4gai5ub2RlTmFtZSYmai5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09Yn19LCJDTEFTUyI6ZnVuY3Rpb24oYSl7dmFyIGI9RDNbYSsiICJdO3JldHVybiBifHwoYj1uZXcgUmVnRXhwKCIoXnwiK00zKyIpIithKyIoIitNMysifCQpIikpJiZEMyhhLGZ1bmN0aW9uKGope3JldHVybiBiLnRlc3QodHlwZW9mIGouY2xhc3NOYW1lPT09InN0cmluZyImJmouY2xhc3NOYW1lfHx0eXBlb2Ygai5nZXRBdHRyaWJ1dGUhPT1YJiZqLmdldEF0dHJpYnV0ZSgiY2xhc3MiKXx8IiIpfSl9LCJBVFRSIjpmdW5jdGlvbihhLGIsail7cmV0dXJuIGZ1bmN0aW9uKG0pe3ZhciBfPVMuYXR0cihtLGEpO2lmKF89PW51bGwpe3JldHVybiBiPT09IiE9In1pZighYil7cmV0dXJuIHRydWV9Xys9IiI7cmV0dXJuIGI9PT0iPSI/Xz09PWo6Yj09PSIhPSI/XyE9PWo6Yj09PSJePSI/aiYmXy5pbmRleE9mKGopPT09MDpiPT09Iio9Ij9qJiZfLmluZGV4T2Yoaik+LTE6Yj09PSIkPSI/aiYmXy5zbGljZSgtai5sZW5ndGgpPT09ajpiPT09In49Ij8oIiAiK18rIiAiKS5pbmRleE9mKGopPi0xOmI9PT0ifD0iP189PT1qfHxfLnNsaWNlKDAsai5sZW5ndGgrMSk9PT1qKyItIjpmYWxzZX19LCJDSElMRCI6ZnVuY3Rpb24oYSxiLGosbSxfKXt2YXIgdTQ9YS5zbGljZSgwLDMpIT09Im50aCIsdjQ9YS5zbGljZSgtNCkhPT0ibGFzdCIsdzQ9Yj09PSJvZi10eXBlIjtyZXR1cm4gbT09PTEmJl89PT0wP2Z1bmN0aW9uKHg0KXtyZXR1cm4hIXg0LnBhcmVudE5vZGV9OmZ1bmN0aW9uKHg0LHk0LHo0KXt2YXIgQTQsQjQsQzQsRDQsRTQsRjQsRzQ9dTQhPT12ND8ibmV4dFNpYmxpbmciOiJwcmV2aW91c1NpYmxpbmciLEg0PXg0LnBhcmVudE5vZGUsSTQ9dzQmJng0Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCksSjQ9IXo0JiYhdzQ7aWYoSDQpe2lmKHU0KXt3aGlsZShHNCl7QzQ9eDQ7d2hpbGUoKEM0PUM0W0c0XSkpe2lmKHc0P0M0Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT1JNDpDNC5ub2RlVHlwZT09PTEpe3JldHVybiBmYWxzZX19RjQ9RzQ9YT09PSJvbmx5IiYmIUY0JiYibmV4dFNpYmxpbmcifXJldHVybiB0cnVlfUY0PVt2ND9INC5maXJzdENoaWxkOkg0Lmxhc3RDaGlsZF07aWYodjQmJko0KXtCND1INFt6M118fChINFt6M109e30pO0E0PUI0W2FdfHxbXTtFND1BNFswXT09PUIzJiZBNFsxXTtEND1BNFswXT09PUIzJiZBNFsyXTtDND1FNCYmSDQuY2hpbGROb2Rlc1tFNF07d2hpbGUoKEM0PSsrRTQmJkM0JiZDNFtHNF18fChEND1FND0wKXx8RjQucG9wKCkpKXtpZihDNC5ub2RlVHlwZT09PTEmJisrRDQmJkM0PT09eDQpe0I0W2FdPVtCMyxFNCxENF07YnJlYWt9fX1lbHNlIGlmKEo0JiYoQTQ9KHg0W3ozXXx8KHg0W3ozXT17fSkpW2FdKSYmQTRbMF09PT1CMyl7RDQ9QTRbMV19ZWxzZXt3aGlsZSgoQzQ9KytFNCYmQzQmJkM0W0c0XXx8KEQ0PUU0PTApfHxGNC5wb3AoKSkpe2lmKCh3ND9DNC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09STQ6QzQubm9kZVR5cGU9PT0xKSYmKytENCl7aWYoSjQpeyhDNFt6M118fChDNFt6M109e30pKVthXT1bQjMsRDRdfWlmKEM0PT09eDQpe2JyZWFrfX19fUQ0LT1fO3JldHVybiBEND09PW18fChENCVtPT09MCYmRDQvbT49MCl9fX0sIlBTRVVETyI6ZnVuY3Rpb24oYSxiKXt2YXIgaixtPWwucHNldWRvc1thXXx8bC5zZXRGaWx0ZXJzW2EudG9Mb3dlckNhc2UoKV18fFMuZXJyb3IoInVuc3VwcG9ydGVkIHBzZXVkbzogIithKTtpZihtW3ozXSl7cmV0dXJuIG0oYil9aWYobS5sZW5ndGg+MSl7aj1bYSxhLCIiLGJdO3JldHVybiBsLnNldEZpbHRlcnMuaGFzT3duUHJvcGVydHkoYS50b0xvd2VyQ2FzZSgpKT9kNChmdW5jdGlvbihfLHgzKXt2YXIgdTQsdjQ9bShfLGIpLGk9djQubGVuZ3RoO3doaWxlKGktLSl7dTQ9ay5jYWxsKF8sdjRbaV0pO19bdTRdPSEoeDNbdTRdPXY0W2ldKX19KTpmdW5jdGlvbihfKXtyZXR1cm4gbShfLDAsail9fXJldHVybiBtfX0scHNldWRvczp7Im5vdCI6ZDQoZnVuY3Rpb24oYSl7dmFyIGI9W10saj1bXSxtPXIoYS5yZXBsYWNlKHosIiQxIikpO3JldHVybiBtW3ozXT9kNChmdW5jdGlvbihfLHgzLHU0LHY0KXt2YXIgdzQseDQ9bShfLG51bGwsdjQsW10pLGk9Xy5sZW5ndGg7d2hpbGUoaS0tKXtpZigodzQ9eDRbaV0pKXtfW2ldPSEoeDNbaV09dzQpfX19KTpmdW5jdGlvbihfLHU0LHY0KXtiWzBdPV87bShiLG51bGwsdjQsaik7cmV0dXJuIWoucG9wKCl9fSksImhhcyI6ZDQoZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKGIpe3JldHVybiBTKGEsYikubGVuZ3RoPjB9fSksImNvbnRhaW5zIjpkNChmdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oYil7cmV0dXJuKGIudGV4dENvbnRlbnR8fGIuaW5uZXJUZXh0fHxuKGIpKS5pbmRleE9mKGEpPi0xfX0pLCJsYW5nIjpkNChmdW5jdGlvbihhKXtpZighVjMudGVzdChhfHwiIikpe1MuZXJyb3IoInVuc3VwcG9ydGVkIGxhbmc6ICIrYSl9YT1hLnJlcGxhY2UoYTQsYjQpLnRvTG93ZXJDYXNlKCk7cmV0dXJuIGZ1bmN0aW9uKGIpe3ZhciBqO2Rve2lmKChqPXUzP2IubGFuZzpiLmdldEF0dHJpYnV0ZSgieG1sOmxhbmciKXx8Yi5nZXRBdHRyaWJ1dGUoImxhbmciKSkpe2o9ai50b0xvd2VyQ2FzZSgpO3JldHVybiBqPT09YXx8ai5pbmRleE9mKGErIi0iKT09PTB9fXdoaWxlKChiPWIucGFyZW50Tm9kZSkmJmIubm9kZVR5cGU9PT0xKTtyZXR1cm4gZmFsc2V9fSksInRhcmdldCI6ZnVuY3Rpb24oYSl7dmFyIGI9dy5sb2NhdGlvbiYmdy5sb2NhdGlvbi5oYXNoO3JldHVybiBiJiZiLnNsaWNlKDEpPT09YS5pZH0sInJvb3QiOmZ1bmN0aW9uKGEpe3JldHVybiBhPT09bzN9LCJmb2N1cyI6ZnVuY3Rpb24oYSl7cmV0dXJuIGE9PT1KLmFjdGl2ZUVsZW1lbnQmJighSi5oYXNGb2N1c3x8Si5oYXNGb2N1cygpKSYmISEoYS50eXBlfHxhLmhyZWZ8fH5hLnRhYkluZGV4KX0sImVuYWJsZWQiOmZ1bmN0aW9uKGEpe3JldHVybiBhLmRpc2FibGVkPT09ZmFsc2V9LCJkaXNhYmxlZCI6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuZGlzYWJsZWQ9PT10cnVlfSwiY2hlY2tlZCI6ZnVuY3Rpb24oYSl7dmFyIGI9YS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO3JldHVybihiPT09ImlucHV0IiYmISFhLmNoZWNrZWQpfHwoYj09PSJvcHRpb24iJiYhIWEuc2VsZWN0ZWQpfSwic2VsZWN0ZWQiOmZ1bmN0aW9uKGEpe2lmKGEucGFyZW50Tm9kZSl7YS5wYXJlbnROb2RlLnNlbGVjdGVkSW5kZXh9cmV0dXJuIGEuc2VsZWN0ZWQ9PT10cnVlfSwiZW1wdHkiOmZ1bmN0aW9uKGEpe2ZvcihhPWEuZmlyc3RDaGlsZDthO2E9YS5uZXh0U2libGluZyl7aWYoYS5ub2RlVHlwZTw2KXtyZXR1cm4gZmFsc2V9fXJldHVybiB0cnVlfSwicGFyZW50IjpmdW5jdGlvbihhKXtyZXR1cm4hbC5wc2V1ZG9zWyJlbXB0eSJdKGEpfSwiaGVhZGVyIjpmdW5jdGlvbihhKXtyZXR1cm4gWTMudGVzdChhLm5vZGVOYW1lKX0sImlucHV0IjpmdW5jdGlvbihhKXtyZXR1cm4gWDMudGVzdChhLm5vZGVOYW1lKX0sImJ1dHRvbiI6ZnVuY3Rpb24oYSl7dmFyIGI9YS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO3JldHVybiBiPT09ImlucHV0IiYmYS50eXBlPT09ImJ1dHRvbiJ8fGI9PT0iYnV0dG9uIn0sInRleHQiOmZ1bmN0aW9uKGEpe3ZhciBiO3JldHVybiBhLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT0iaW5wdXQiJiZhLnR5cGU9PT0idGV4dCImJigoYj1hLmdldEF0dHJpYnV0ZSgidHlwZSIpKT09bnVsbHx8Yi50b0xvd2VyQ2FzZSgpPT09InRleHQiKX0sImZpcnN0IjpqNChmdW5jdGlvbigpe3JldHVyblswXX0pLCJsYXN0IjpqNChmdW5jdGlvbihtLGEpe3JldHVyblthLTFdfSksImVxIjpqNChmdW5jdGlvbihtLGEsYil7cmV0dXJuW2I8MD9iK2E6Yl19KSwiZXZlbiI6ajQoZnVuY3Rpb24obSxhKXt2YXIgaT0wO2Zvcig7aTxhO2krPTIpe20ucHVzaChpKX1yZXR1cm4gbX0pLCJvZGQiOmo0KGZ1bmN0aW9uKG0sYSl7dmFyIGk9MTtmb3IoO2k8YTtpKz0yKXttLnB1c2goaSl9cmV0dXJuIG19KSwibHQiOmo0KGZ1bmN0aW9uKG0sYSxiKXt2YXIgaT1iPDA/YithOmI7Zm9yKDstLWk+PTA7KXttLnB1c2goaSl9cmV0dXJuIG19KSwiZ3QiOmo0KGZ1bmN0aW9uKG0sYSxiKXt2YXIgaT1iPDA/YithOmI7Zm9yKDsrK2k8YTspe20ucHVzaChpKX1yZXR1cm4gbX0pfX07bC5wc2V1ZG9zWyJudGgiXT1sLnBzZXVkb3NbImVxIl07Zm9yKGkgaW57cmFkaW86dHJ1ZSxjaGVja2JveDp0cnVlLGZpbGU6dHJ1ZSxwYXNzd29yZDp0cnVlLGltYWdlOnRydWV9KXtsLnBzZXVkb3NbaV09aDQoaSl9Zm9yKGkgaW57c3VibWl0OnRydWUscmVzZXQ6dHJ1ZX0pe2wucHNldWRvc1tpXT1pNChpKX1mdW5jdGlvbiBsNCgpe31sNC5wcm90b3R5cGU9bC5maWx0ZXJzPWwucHNldWRvcztsLnNldEZpbHRlcnM9bmV3IGw0KCk7dD1TLnRva2VuaXplPWZ1bmN0aW9uKGEsYil7dmFyIG0saixfLHU0LHY0LHc0LHg0LHk0PUUzW2ErIiAiXTtpZih5NCl7cmV0dXJuIGI/MDp5NC5zbGljZSgwKX12ND1hO3c0PVtdO3g0PWwucHJlRmlsdGVyO3doaWxlKHY0KXtpZighbXx8KGo9UjMuZXhlYyh2NCkpKXtpZihqKXt2ND12NC5zbGljZShqWzBdLmxlbmd0aCl8fHY0fXc0LnB1c2goKF89W10pKX1tPWZhbHNlO2lmKChqPVMzLmV4ZWModjQpKSl7bT1qLnNoaWZ0KCk7Xy5wdXNoKHt2YWx1ZTptLHR5cGU6alswXS5yZXBsYWNlKHosIiAiKX0pO3Y0PXY0LnNsaWNlKG0ubGVuZ3RoKX1mb3IodTQgaW4gbC5maWx0ZXIpe2lmKChqPVczW3U0XS5leGVjKHY0KSkmJigheDRbdTRdfHwoaj14NFt1NF0oaikpKSl7bT1qLnNoaWZ0KCk7Xy5wdXNoKHt2YWx1ZTptLHR5cGU6dTQsbWF0Y2hlczpqfSk7djQ9djQuc2xpY2UobS5sZW5ndGgpfX1pZighbSl7YnJlYWt9fXJldHVybiBiP3Y0Lmxlbmd0aDp2ND9TLmVycm9yKGEpOkUzKGEsdzQpLnNsaWNlKDApfTtmdW5jdGlvbiBtNChhKXt2YXIgaT0wLGI9YS5sZW5ndGgsaj0iIjtmb3IoO2k8YjtpKyspe2orPWFbaV0udmFsdWV9cmV0dXJuIGp9ZnVuY3Rpb24gbjQobSxhLGIpe3ZhciBqPWEuZGlyLF89YiYmaj09PSJwYXJlbnROb2RlIix1ND1DMysrO3JldHVybiBhLmZpcnN0P2Z1bmN0aW9uKHY0LHc0LHg0KXt3aGlsZSgodjQ9djRbal0pKXtpZih2NC5ub2RlVHlwZT09PTF8fF8pe3JldHVybiBtKHY0LHc0LHg0KX19fTpmdW5jdGlvbih2NCx3NCx4NCl7dmFyIHk0LHo0LEE0PVtCMyx1NF07aWYoeDQpe3doaWxlKCh2ND12NFtqXSkpe2lmKHY0Lm5vZGVUeXBlPT09MXx8Xyl7aWYobSh2NCx3NCx4NCkpe3JldHVybiB0cnVlfX19fWVsc2V7d2hpbGUoKHY0PXY0W2pdKSl7aWYodjQubm9kZVR5cGU9PT0xfHxfKXt6ND12NFt6M118fCh2NFt6M109e30pO2lmKCh5ND16NFtqXSkmJnk0WzBdPT09QjMmJnk0WzFdPT09dTQpe3JldHVybihBNFsyXT15NFsyXSl9ZWxzZXt6NFtqXT1BNDtpZigoQTRbMl09bSh2NCx3NCx4NCkpKXtyZXR1cm4gdHJ1ZX19fX19fX1mdW5jdGlvbiBvNChtKXtyZXR1cm4gbS5sZW5ndGg+MT9mdW5jdGlvbihhLGIsail7dmFyIGk9bS5sZW5ndGg7d2hpbGUoaS0tKXtpZighbVtpXShhLGIsaikpe3JldHVybiBmYWxzZX19cmV0dXJuIHRydWV9Om1bMF19ZnVuY3Rpb24gcDQoYSxiLGope3ZhciBpPTAsbT1iLmxlbmd0aDtmb3IoO2k8bTtpKyspe1MoYSxiW2ldLGopfXJldHVybiBqfWZ1bmN0aW9uIHE0KGEsbSxiLGosXyl7dmFyIHU0LHY0PVtdLGk9MCx3ND1hLmxlbmd0aCx4ND1tIT1udWxsO2Zvcig7aTx3NDtpKyspe2lmKCh1ND1hW2ldKSl7aWYoIWJ8fGIodTQsaixfKSl7djQucHVzaCh1NCk7aWYoeDQpe20ucHVzaChpKX19fX1yZXR1cm4gdjR9ZnVuY3Rpb24gcjQoYSxiLG0saixfLHU0KXtpZihqJiYhalt6M10pe2o9cjQoail9aWYoXyYmIV9bejNdKXtfPXI0KF8sdTQpfXJldHVybiBkNChmdW5jdGlvbih2NCx3NCx4NCx5NCl7dmFyIHo0LGksQTQsQjQ9W10sQzQ9W10sRDQ9dzQubGVuZ3RoLEU0PXY0fHxwNChifHwiKiIseDQubm9kZVR5cGU/W3g0XTp4NCxbXSksRjQ9YSYmKHY0fHwhYik/cTQoRTQsQjQsYSx4NCx5NCk6RTQsRzQ9bT9ffHwodjQ/YTpENHx8aik/W106dzQ6RjQ7aWYobSl7bShGNCxHNCx4NCx5NCl9aWYoail7ejQ9cTQoRzQsQzQpO2ooejQsW10seDQseTQpO2k9ejQubGVuZ3RoO3doaWxlKGktLSl7aWYoKEE0PXo0W2ldKSl7RzRbQzRbaV1dPSEoRjRbQzRbaV1dPUE0KX19fWlmKHY0KXtpZihffHxhKXtpZihfKXt6ND1bXTtpPUc0Lmxlbmd0aDt3aGlsZShpLS0pe2lmKChBND1HNFtpXSkpe3o0LnB1c2goKEY0W2ldPUE0KSl9fV8obnVsbCwoRzQ9W10pLHo0LHk0KX1pPUc0Lmxlbmd0aDt3aGlsZShpLS0pe2lmKChBND1HNFtpXSkmJih6ND1fP2suY2FsbCh2NCxBNCk6QjRbaV0pPi0xKXt2NFt6NF09ISh3NFt6NF09QTQpfX19fWVsc2V7RzQ9cTQoRzQ9PT13ND9HNC5zcGxpY2UoRDQsRzQubGVuZ3RoKTpHNCk7aWYoXyl7XyhudWxsLHc0LEc0LHk0KX1lbHNle2guYXBwbHkodzQsRzQpfX19KX1mdW5jdGlvbiBzNChhKXt2YXIgYixtLGosXz1hLmxlbmd0aCx1ND1sLnJlbGF0aXZlW2FbMF0udHlwZV0sdjQ9dTR8fGwucmVsYXRpdmVbIiAiXSxpPXU0PzE6MCx3ND1uNChmdW5jdGlvbih6NCl7cmV0dXJuIHo0PT09Yn0sdjQsdHJ1ZSkseDQ9bjQoZnVuY3Rpb24oejQpe3JldHVybiBrLmNhbGwoYix6NCk+LTF9LHY0LHRydWUpLHk0PVtmdW5jdGlvbih6NCxBNCxCNCl7cmV0dXJuKCF1NCYmKEI0fHxBNCE9PXYpKXx8KChiPUE0KS5ub2RlVHlwZT93NCh6NCxBNCxCNCk6eDQoejQsQTQsQjQpKX1dO2Zvcig7aTxfO2krKyl7aWYoKG09bC5yZWxhdGl2ZVthW2ldLnR5cGVdKSl7eTQ9W240KG80KHk0KSxtKV19ZWxzZXttPWwuZmlsdGVyW2FbaV0udHlwZV0uYXBwbHkobnVsbCxhW2ldLm1hdGNoZXMpO2lmKG1bejNdKXtqPSsraTtmb3IoO2o8XztqKyspe2lmKGwucmVsYXRpdmVbYVtqXS50eXBlXSl7YnJlYWt9fXJldHVybiByNChpPjEmJm80KHk0KSxpPjEmJm00KGEuc2xpY2UoMCxpLTEpLmNvbmNhdCh7dmFsdWU6YVtpLTJdLnR5cGU9PT0iICI/IioiOiIifSkpLnJlcGxhY2UoeiwiJDEiKSxtLGk8aiYmczQoYS5zbGljZShpLGopKSxqPF8mJnM0KChhPWEuc2xpY2UoaikpKSxqPF8mJm00KGEpKX15NC5wdXNoKG0pfX1yZXR1cm4gbzQoeTQpfWZ1bmN0aW9uIHQ0KGEsYil7dmFyIG09Yi5sZW5ndGg+MCxfPWEubGVuZ3RoPjAsdTQ9ZnVuY3Rpb24odjQsdzQseDQseTQsejQpe3ZhciBBNCxqLEI0LEM0PTAsaT0iMCIsRDQ9djQmJltdLEU0PVtdLEY0PXYsRzQ9djR8fF8mJmwuZmluZFsiVEFHIl0oIioiLHo0KSxIND0oQjMrPUY0PT1udWxsPzE6TWF0aC5yYW5kb20oKXx8MC4xKSxJND1HNC5sZW5ndGg7aWYoejQpe3Y9dzQhPT1KJiZ3NH1mb3IoO2khPT1JNCYmKEE0PUc0W2ldKSE9bnVsbDtpKyspe2lmKF8mJkE0KXtqPTA7d2hpbGUoKEI0PWFbaisrXSkpe2lmKEI0KEE0LHc0LHg0KSl7eTQucHVzaChBNCk7YnJlYWt9fWlmKHo0KXtCMz1INH19aWYobSl7aWYoKEE0PSFCNCYmQTQpKXtDNC0tfWlmKHY0KXtENC5wdXNoKEE0KX19fUM0Kz1pO2lmKG0mJmkhPT1DNCl7aj0wO3doaWxlKChCND1iW2orK10pKXtCNChENCxFNCx3NCx4NCl9aWYodjQpe2lmKEM0PjApe3doaWxlKGktLSl7aWYoIShENFtpXXx8RTRbaV0pKXtFNFtpXT1KMy5jYWxsKHk0KX19fUU0PXE0KEU0KX1oLmFwcGx5KHk0LEU0KTtpZih6NCYmIXY0JiZFNC5sZW5ndGg+MCYmKEM0K2IubGVuZ3RoKT4xKXtTLnVuaXF1ZVNvcnQoeTQpfX1pZih6NCl7QjM9SDQ7dj1GNH1yZXR1cm4gRDR9O3JldHVybiBtP2Q0KHU0KTp1NH1yPVMuY29tcGlsZT1mdW5jdGlvbihhLG0pe3ZhciBpLGI9W10saj1bXSxfPUYzW2ErIiAiXTtpZighXyl7aWYoIW0pe209dChhKX1pPW0ubGVuZ3RoO3doaWxlKGktLSl7Xz1zNChtW2ldKTtpZihfW3ozXSl7Yi5wdXNoKF8pfWVsc2V7ai5wdXNoKF8pfX1fPUYzKGEsdDQoaixiKSk7Xy5zZWxlY3Rvcj1hfXJldHVybiBffTtzPVMuc2VsZWN0PWZ1bmN0aW9uKGEsYixqLG0pe3ZhciBpLF8sdTQsdjQsdzQseDQ9dHlwZW9mIGE9PT0iZnVuY3Rpb24iJiZhLHk0PSFtJiZ0KChhPXg0LnNlbGVjdG9yfHxhKSk7aj1qfHxbXTtpZih5NC5sZW5ndGg9PT0xKXtfPXk0WzBdPXk0WzBdLnNsaWNlKDApO2lmKF8ubGVuZ3RoPjImJih1ND1fWzBdKS50eXBlPT09IklEIiYmeC5nZXRCeUlkJiZiLm5vZGVUeXBlPT09OSYmdTMmJmwucmVsYXRpdmVbX1sxXS50eXBlXSl7Yj0obC5maW5kWyJJRCJdKHU0Lm1hdGNoZXNbMF0ucmVwbGFjZShhNCxiNCksYil8fFtdKVswXTtpZighYil7cmV0dXJuIGp9ZWxzZSBpZih4NCl7Yj1iLnBhcmVudE5vZGV9YT1hLnNsaWNlKF8uc2hpZnQoKS52YWx1ZS5sZW5ndGgpfWk9VzNbIm5lZWRzQ29udGV4dCJdLnRlc3QoYSk/MDpfLmxlbmd0aDt3aGlsZShpLS0pe3U0PV9baV07aWYobC5yZWxhdGl2ZVsodjQ9dTQudHlwZSldKXticmVha31pZigodzQ9bC5maW5kW3Y0XSkpe2lmKChtPXc0KHU0Lm1hdGNoZXNbMF0ucmVwbGFjZShhNCxiNCksJDMudGVzdChfWzBdLnR5cGUpJiZrNChiLnBhcmVudE5vZGUpfHxiKSkpe18uc3BsaWNlKGksMSk7YT1tLmxlbmd0aCYmbTQoXyk7aWYoIWEpe2guYXBwbHkoaixtKTtyZXR1cm4gan1icmVha319fX0oeDR8fHIoYSx5NCkpKG0sYiwhdTMsaiwkMy50ZXN0KGEpJiZrNChiLnBhcmVudE5vZGUpfHxiKTtyZXR1cm4gan07eC5zb3J0U3RhYmxlPXozLnNwbGl0KCIiKS5zb3J0KEczKS5qb2luKCIiKT09PXozO3guZGV0ZWN0RHVwbGljYXRlcz0hIXMzO3QzKCk7eC5zb3J0RGV0YWNoZWQ9ZTQoZnVuY3Rpb24oYSl7cmV0dXJuIGEuY29tcGFyZURvY3VtZW50UG9zaXRpb24oSi5jcmVhdGVFbGVtZW50KCJkaXYiKSkmMX0pO2lmKCFlNChmdW5jdGlvbihhKXthLmlubmVySFRNTD0iPGEgaHJlZj0nIyc+PC9hPiI7cmV0dXJuIGEuZmlyc3RDaGlsZC5nZXRBdHRyaWJ1dGUoImhyZWYiKT09PSIjIn0pKXtmNCgidHlwZXxocmVmfGhlaWdodHx3aWR0aCIsZnVuY3Rpb24oYSxiLHApe2lmKCFwKXtyZXR1cm4gYS5nZXRBdHRyaWJ1dGUoYixiLnRvTG93ZXJDYXNlKCk9PT0idHlwZSI/MToyKX19KX1pZigheC5hdHRyaWJ1dGVzfHwhZTQoZnVuY3Rpb24oYSl7YS5pbm5lckhUTUw9IjxpbnB1dC8+IjthLmZpcnN0Q2hpbGQuc2V0QXR0cmlidXRlKCJ2YWx1ZSIsIiIpO3JldHVybiBhLmZpcnN0Q2hpbGQuZ2V0QXR0cmlidXRlKCJ2YWx1ZSIpPT09IiJ9KSl7ZjQoInZhbHVlIixmdW5jdGlvbihhLGIscCl7aWYoIXAmJmEubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PSJpbnB1dCIpe3JldHVybiBhLmRlZmF1bHRWYWx1ZX19KX1pZighZTQoZnVuY3Rpb24oYSl7cmV0dXJuIGEuZ2V0QXR0cmlidXRlKCJkaXNhYmxlZCIpPT1udWxsfSkpe2Y0KEwzLGZ1bmN0aW9uKGEsYixwKXt2YXIgajtpZighcCl7cmV0dXJuIGFbYl09PT10cnVlP2IudG9Mb3dlckNhc2UoKTooaj1hLmdldEF0dHJpYnV0ZU5vZGUoYikpJiZqLnNwZWNpZmllZD9qLnZhbHVlOm51bGx9fSl9cmV0dXJuIFN9KSh3KTtRLmZpbmQ9UztRLmV4cHI9Uy5zZWxlY3RvcnM7US5leHByWyI6Il09US5leHByLnBzZXVkb3M7US51bmlxdWU9Uy51bmlxdWVTb3J0O1EudGV4dD1TLmdldFRleHQ7US5pc1hNTERvYz1TLmlzWE1MO1EuY29udGFpbnM9Uy5jb250YWluczt2YXIgRT1RLmV4cHIubWF0Y2gubmVlZHNDb250ZXh0O3ZhciBGPSgvXjwoXHcrKVxzKlwvPz4oPzo8XC9cMT58KSQvKTt2YXIgRz0vXi5bXjojXFtcLixdKiQvO2Z1bmN0aW9uIEgoYSxiLG4pe2lmKFEuaXNGdW5jdGlvbihiKSl7cmV0dXJuIFEuZ3JlcChhLGZ1bmN0aW9uKGosaSl7cmV0dXJuISFiLmNhbGwoaixpLGopIT09bn0pfWlmKGIubm9kZVR5cGUpe3JldHVybiBRLmdyZXAoYSxmdW5jdGlvbihqKXtyZXR1cm4oaj09PWIpIT09bn0pfWlmKHR5cGVvZiBiPT09InN0cmluZyIpe2lmKEcudGVzdChiKSl7cmV0dXJuIFEuZmlsdGVyKGIsYSxuKX1iPVEuZmlsdGVyKGIsYSl9cmV0dXJuIFEuZ3JlcChhLGZ1bmN0aW9uKGope3JldHVybihRLmluQXJyYXkoaixiKT49MCkhPT1ufSl9US5maWx0ZXI9ZnVuY3Rpb24oYSxiLG4pe3ZhciBqPWJbMF07aWYobil7YT0iOm5vdCgiK2ErIikifXJldHVybiBiLmxlbmd0aD09PTEmJmoubm9kZVR5cGU9PT0xP1EuZmluZC5tYXRjaGVzU2VsZWN0b3IoaixhKT9bal06W106US5maW5kLm1hdGNoZXMoYSxRLmdyZXAoYixmdW5jdGlvbihqKXtyZXR1cm4gai5ub2RlVHlwZT09PTF9KSl9O1EuZm4uZXh0ZW5kKHtmaW5kOmZ1bmN0aW9uKHMpe3ZhciBpLHI9W10sYT10aGlzLGw9YS5sZW5ndGg7aWYodHlwZW9mIHMhPT0ic3RyaW5nIil7cmV0dXJuIHRoaXMucHVzaFN0YWNrKFEocykuZmlsdGVyKGZ1bmN0aW9uKCl7Zm9yKGk9MDtpPGw7aSsrKXtpZihRLmNvbnRhaW5zKGFbaV0sdGhpcykpe3JldHVybiB0cnVlfX19KSl9Zm9yKGk9MDtpPGw7aSsrKXtRLmZpbmQocyxhW2ldLHIpfXI9dGhpcy5wdXNoU3RhY2sobD4xP1EudW5pcXVlKHIpOnIpO3Iuc2VsZWN0b3I9dGhpcy5zZWxlY3Rvcj90aGlzLnNlbGVjdG9yKyIgIitzOnM7cmV0dXJuIHJ9LGZpbHRlcjpmdW5jdGlvbihzKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soSCh0aGlzLHN8fFtdLGZhbHNlKSl9LG5vdDpmdW5jdGlvbihzKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soSCh0aGlzLHN8fFtdLHRydWUpKX0saXM6ZnVuY3Rpb24ocyl7cmV0dXJuISFIKHRoaXMsdHlwZW9mIHM9PT0ic3RyaW5nIiYmRS50ZXN0KHMpP1Eocyk6c3x8W10sZmFsc2UpLmxlbmd0aH19KTt2YXIgSSxKPXcuZG9jdW1lbnQsSz0vXig/OlxzKig8W1x3XFddKz4pW14+XSp8IyhbXHctXSopKSQvLEw9US5mbi5pbml0PWZ1bmN0aW9uKHMsYSl7dmFyIG0sYjtpZighcyl7cmV0dXJuIHRoaXN9aWYodHlwZW9mIHM9PT0ic3RyaW5nIil7aWYocy5jaGFyQXQoMCk9PT0iPCImJnMuY2hhckF0KHMubGVuZ3RoLTEpPT09Ij4iJiZzLmxlbmd0aD49Myl7bT1bbnVsbCxzLG51bGxdfWVsc2V7bT1LLmV4ZWMocyl9aWYobSYmKG1bMV18fCFhKSl7aWYobVsxXSl7YT1hIGluc3RhbmNlb2YgUT9hWzBdOmE7US5tZXJnZSh0aGlzLFEucGFyc2VIVE1MKG1bMV0sYSYmYS5ub2RlVHlwZT9hLm93bmVyRG9jdW1lbnR8fGE6Six0cnVlKSk7aWYoRi50ZXN0KG1bMV0pJiZRLmlzUGxhaW5PYmplY3QoYSkpe2ZvcihtIGluIGEpe2lmKFEuaXNGdW5jdGlvbih0aGlzW21dKSl7dGhpc1ttXShhW21dKX1lbHNle3RoaXMuYXR0cihtLGFbbV0pfX19cmV0dXJuIHRoaXN9ZWxzZXtiPUouZ2V0RWxlbWVudEJ5SWQobVsyXSk7aWYoYiYmYi5wYXJlbnROb2RlKXtpZihiLmlkIT09bVsyXSl7cmV0dXJuIEkuZmluZChzKX10aGlzLmxlbmd0aD0xO3RoaXNbMF09Yn10aGlzLmNvbnRleHQ9Sjt0aGlzLnNlbGVjdG9yPXM7cmV0dXJuIHRoaXN9fWVsc2UgaWYoIWF8fGEuanF1ZXJ5KXtyZXR1cm4oYXx8SSkuZmluZChzKX1lbHNle3JldHVybiB0aGlzLmNvbnN0cnVjdG9yKGEpLmZpbmQocyl9fWVsc2UgaWYocy5ub2RlVHlwZSl7dGhpcy5jb250ZXh0PXRoaXNbMF09czt0aGlzLmxlbmd0aD0xO3JldHVybiB0aGlzfWVsc2UgaWYoUS5pc0Z1bmN0aW9uKHMpKXtyZXR1cm4gdHlwZW9mIEkucmVhZHkhPT0idW5kZWZpbmVkIj9JLnJlYWR5KHMpOnMoUSl9aWYocy5zZWxlY3RvciE9PXVuZGVmaW5lZCl7dGhpcy5zZWxlY3Rvcj1zLnNlbGVjdG9yO3RoaXMuY29udGV4dD1zLmNvbnRleHR9cmV0dXJuIFEubWFrZUFycmF5KHMsdGhpcyl9O0wucHJvdG90eXBlPVEuZm47ST1RKEopO3ZhciBNPS9eKD86cGFyZW50c3xwcmV2KD86VW50aWx8QWxsKSkvLE49e2NoaWxkcmVuOnRydWUsY29udGVudHM6dHJ1ZSxuZXh0OnRydWUscHJldjp0cnVlfTtRLmV4dGVuZCh7ZGlyOmZ1bmN0aW9uKGEsYixqKXt2YXIgbT1bXSxsPWFbYl07d2hpbGUobCYmbC5ub2RlVHlwZSE9PTkmJihqPT09dW5kZWZpbmVkfHxsLm5vZGVUeXBlIT09MXx8IVEobCkuaXMoaikpKXtpZihsLm5vZGVUeXBlPT09MSl7bS5wdXNoKGwpfWw9bFtiXX1yZXR1cm4gbX0sc2libGluZzpmdW5jdGlvbihuLGEpe3ZhciByPVtdO2Zvcig7bjtuPW4ubmV4dFNpYmxpbmcpe2lmKG4ubm9kZVR5cGU9PT0xJiZuIT09YSl7ci5wdXNoKG4pfX1yZXR1cm4gcn19KTtRLmZuLmV4dGVuZCh7aGFzOmZ1bmN0aW9uKHQpe3ZhciBpLGE9USh0LHRoaXMpLGw9YS5sZW5ndGg7cmV0dXJuIHRoaXMuZmlsdGVyKGZ1bmN0aW9uKCl7Zm9yKGk9MDtpPGw7aSsrKXtpZihRLmNvbnRhaW5zKHRoaXMsYVtpXSkpe3JldHVybiB0cnVlfX19KX0sY2xvc2VzdDpmdW5jdGlvbihzLGEpe3ZhciBiLGk9MCxsPXRoaXMubGVuZ3RoLG09W10scD1FLnRlc3Qocyl8fHR5cGVvZiBzIT09InN0cmluZyI/UShzLGF8fHRoaXMuY29udGV4dCk6MDtmb3IoO2k8bDtpKyspe2ZvcihiPXRoaXNbaV07YiYmYiE9PWE7Yj1iLnBhcmVudE5vZGUpe2lmKGIubm9kZVR5cGU8MTEmJihwP3AuaW5kZXgoYik+LTE6Yi5ub2RlVHlwZT09PTEmJlEuZmluZC5tYXRjaGVzU2VsZWN0b3IoYixzKSkpe20ucHVzaChiKTticmVha319fXJldHVybiB0aGlzLnB1c2hTdGFjayhtLmxlbmd0aD4xP1EudW5pcXVlKG0pOm0pfSxpbmRleDpmdW5jdGlvbihhKXtpZighYSl7cmV0dXJuKHRoaXNbMF0mJnRoaXNbMF0ucGFyZW50Tm9kZSk/dGhpcy5maXJzdCgpLnByZXZBbGwoKS5sZW5ndGg6LTF9aWYodHlwZW9mIGE9PT0ic3RyaW5nIil7cmV0dXJuIFEuaW5BcnJheSh0aGlzWzBdLFEoYSkpfXJldHVybiBRLmluQXJyYXkoYS5qcXVlcnk/YVswXTphLHRoaXMpfSxhZGQ6ZnVuY3Rpb24ocyxhKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soUS51bmlxdWUoUS5tZXJnZSh0aGlzLmdldCgpLFEocyxhKSkpKX0sYWRkQmFjazpmdW5jdGlvbihzKXtyZXR1cm4gdGhpcy5hZGQocz09bnVsbD90aGlzLnByZXZPYmplY3Q6dGhpcy5wcmV2T2JqZWN0LmZpbHRlcihzKSl9fSk7ZnVuY3Rpb24gTyhhLGIpe2Rve2E9YVtiXX13aGlsZShhJiZhLm5vZGVUeXBlIT09MSk7cmV0dXJuIGF9US5lYWNoKHtwYXJlbnQ6ZnVuY3Rpb24oYSl7dmFyIHA9YS5wYXJlbnROb2RlO3JldHVybiBwJiZwLm5vZGVUeXBlIT09MTE/cDpudWxsfSxwYXJlbnRzOmZ1bmN0aW9uKGEpe3JldHVybiBRLmRpcihhLCJwYXJlbnROb2RlIil9LHBhcmVudHNVbnRpbDpmdW5jdGlvbihhLGksYil7cmV0dXJuIFEuZGlyKGEsInBhcmVudE5vZGUiLGIpfSxuZXh0OmZ1bmN0aW9uKGEpe3JldHVybiBPKGEsIm5leHRTaWJsaW5nIil9LHByZXY6ZnVuY3Rpb24oYSl7cmV0dXJuIE8oYSwicHJldmlvdXNTaWJsaW5nIil9LG5leHRBbGw6ZnVuY3Rpb24oYSl7cmV0dXJuIFEuZGlyKGEsIm5leHRTaWJsaW5nIil9LHByZXZBbGw6ZnVuY3Rpb24oYSl7cmV0dXJuIFEuZGlyKGEsInByZXZpb3VzU2libGluZyIpfSxuZXh0VW50aWw6ZnVuY3Rpb24oYSxpLGIpe3JldHVybiBRLmRpcihhLCJuZXh0U2libGluZyIsYil9LHByZXZVbnRpbDpmdW5jdGlvbihhLGksYil7cmV0dXJuIFEuZGlyKGEsInByZXZpb3VzU2libGluZyIsYil9LHNpYmxpbmdzOmZ1bmN0aW9uKGEpe3JldHVybiBRLnNpYmxpbmcoKGEucGFyZW50Tm9kZXx8e30pLmZpcnN0Q2hpbGQsYSl9LGNoaWxkcmVuOmZ1bmN0aW9uKGEpe3JldHVybiBRLnNpYmxpbmcoYS5maXJzdENoaWxkKX0sY29udGVudHM6ZnVuY3Rpb24oYSl7cmV0dXJuIFEubm9kZU5hbWUoYSwiaWZyYW1lIik/YS5jb250ZW50RG9jdW1lbnR8fGEuY29udGVudFdpbmRvdy5kb2N1bWVudDpRLm1lcmdlKFtdLGEuY2hpbGROb2Rlcyl9fSxmdW5jdGlvbihuLGEpe1EuZm5bbl09ZnVuY3Rpb24oYixzKXt2YXIgcj1RLm1hcCh0aGlzLGEsYik7aWYobi5zbGljZSgtNSkhPT0iVW50aWwiKXtzPWJ9aWYocyYmdHlwZW9mIHM9PT0ic3RyaW5nIil7cj1RLmZpbHRlcihzLHIpfWlmKHRoaXMubGVuZ3RoPjEpe2lmKCFOW25dKXtyPVEudW5pcXVlKHIpfWlmKE0udGVzdChuKSl7cj1yLnJldmVyc2UoKX19cmV0dXJuIHRoaXMucHVzaFN0YWNrKHIpfX0pO3ZhciBQPSgvXFMrL2cpO3ZhciBSPXt9O2Z1bmN0aW9uIFQoYSl7dmFyIGI9UlthXT17fTtRLmVhY2goYS5tYXRjaChQKXx8W10sZnVuY3Rpb24oXyxqKXtiW2pdPXRydWV9KTtyZXR1cm4gYn1RLkNhbGxiYWNrcz1mdW5jdGlvbihhKXthPXR5cGVvZiBhPT09InN0cmluZyI/KFJbYV18fFQoYSkpOlEuZXh0ZW5kKHt9LGEpO3ZhciBiLG0saixsLG4scCxyPVtdLHM9IWEub25jZSYmW10sdD1mdW5jdGlvbihfKXttPWEubWVtb3J5JiZfO2o9dHJ1ZTtuPXB8fDA7cD0wO2w9ci5sZW5ndGg7Yj10cnVlO2Zvcig7ciYmbjxsO24rKyl7aWYocltuXS5hcHBseShfWzBdLF9bMV0pPT09ZmFsc2UmJmEuc3RvcE9uRmFsc2Upe209ZmFsc2U7YnJlYWt9fWI9ZmFsc2U7aWYocil7aWYocyl7aWYocy5sZW5ndGgpe3Qocy5zaGlmdCgpKX19ZWxzZSBpZihtKXtyPVtdfWVsc2V7di5kaXNhYmxlKCl9fX0sdj17YWRkOmZ1bmN0aW9uKCl7aWYocil7dmFyIHIzPXIubGVuZ3RoOyhmdW5jdGlvbiBhZGQoczMpe1EuZWFjaChzMyxmdW5jdGlvbihfLHQzKXt2YXIgdTM9US50eXBlKHQzKTtpZih1Mz09PSJmdW5jdGlvbiIpe2lmKCFhLnVuaXF1ZXx8IXYuaGFzKHQzKSl7ci5wdXNoKHQzKX19ZWxzZSBpZih0MyYmdDMubGVuZ3RoJiZ1MyE9PSJzdHJpbmciKXthZGQodDMpfX0pfSkoYXJndW1lbnRzKTtpZihiKXtsPXIubGVuZ3RofWVsc2UgaWYobSl7cD1yMzt0KG0pfX1yZXR1cm4gdGhpc30scmVtb3ZlOmZ1bmN0aW9uKCl7aWYocil7US5lYWNoKGFyZ3VtZW50cyxmdW5jdGlvbihfLHIzKXt2YXIgczM7d2hpbGUoKHMzPVEuaW5BcnJheShyMyxyLHMzKSk+LTEpe3Iuc3BsaWNlKHMzLDEpO2lmKGIpe2lmKHMzPD1sKXtsLS19aWYoczM8PW4pe24tLX19fX0pfXJldHVybiB0aGlzfSxoYXM6ZnVuY3Rpb24oXyl7cmV0dXJuIF8/US5pbkFycmF5KF8scik+LTE6ISEociYmci5sZW5ndGgpfSxlbXB0eTpmdW5jdGlvbigpe3I9W107bD0wO3JldHVybiB0aGlzfSxkaXNhYmxlOmZ1bmN0aW9uKCl7cj1zPW09dW5kZWZpbmVkO3JldHVybiB0aGlzfSxkaXNhYmxlZDpmdW5jdGlvbigpe3JldHVybiFyfSxsb2NrOmZ1bmN0aW9uKCl7cz11bmRlZmluZWQ7aWYoIW0pe3YuZGlzYWJsZSgpfXJldHVybiB0aGlzfSxsb2NrZWQ6ZnVuY3Rpb24oKXtyZXR1cm4hc30sZmlyZVdpdGg6ZnVuY3Rpb24oXyxyMyl7aWYociYmKCFqfHxzKSl7cjM9cjN8fFtdO3IzPVtfLHIzLnNsaWNlP3IzLnNsaWNlKCk6cjNdO2lmKGIpe3MucHVzaChyMyl9ZWxzZXt0KHIzKX19cmV0dXJuIHRoaXN9LGZpcmU6ZnVuY3Rpb24oKXt2LmZpcmVXaXRoKHRoaXMsYXJndW1lbnRzKTtyZXR1cm4gdGhpc30sZmlyZWQ6ZnVuY3Rpb24oKXtyZXR1cm4hIWp9fTtyZXR1cm4gdn07US5leHRlbmQoe0RlZmVycmVkOmZ1bmN0aW9uKGEpe3ZhciB0PVtbInJlc29sdmUiLCJkb25lIixRLkNhbGxiYWNrcygib25jZSBtZW1vcnkiKSwicmVzb2x2ZWQiXSxbInJlamVjdCIsImZhaWwiLFEuQ2FsbGJhY2tzKCJvbmNlIG1lbW9yeSIpLCJyZWplY3RlZCJdLFsibm90aWZ5IiwicHJvZ3Jlc3MiLFEuQ2FsbGJhY2tzKCJtZW1vcnkiKV1dLHM9InBlbmRpbmciLHA9e3N0YXRlOmZ1bmN0aW9uKCl7cmV0dXJuIHN9LGFsd2F5czpmdW5jdGlvbigpe2IuZG9uZShhcmd1bWVudHMpLmZhaWwoYXJndW1lbnRzKTtyZXR1cm4gdGhpc30sdGhlbjpmdW5jdGlvbigpe3ZhciBqPWFyZ3VtZW50cztyZXR1cm4gUS5EZWZlcnJlZChmdW5jdGlvbihuKXtRLmVhY2godCxmdW5jdGlvbihpLGwpe3ZhciBtPVEuaXNGdW5jdGlvbihqW2ldKSYmaltpXTtiW2xbMV1dKGZ1bmN0aW9uKCl7dmFyIHI9bSYmbS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7aWYociYmUS5pc0Z1bmN0aW9uKHIucHJvbWlzZSkpe3IucHJvbWlzZSgpLmRvbmUobi5yZXNvbHZlKS5mYWlsKG4ucmVqZWN0KS5wcm9ncmVzcyhuLm5vdGlmeSl9ZWxzZXtuW2xbMF0rIldpdGgiXSh0aGlzPT09cD9uLnByb21pc2UoKTp0aGlzLG0/W3JdOmFyZ3VtZW50cyl9fSl9KTtqPW51bGx9KS5wcm9taXNlKCl9LHByb21pc2U6ZnVuY3Rpb24oail7cmV0dXJuIGohPW51bGw/US5leHRlbmQoaixwKTpwfX0sYj17fTtwLnBpcGU9cC50aGVuO1EuZWFjaCh0LGZ1bmN0aW9uKGksail7dmFyIGw9alsyXSxtPWpbM107cFtqWzFdXT1sLmFkZDtpZihtKXtsLmFkZChmdW5jdGlvbigpe3M9bX0sdFtpXjFdWzJdLmRpc2FibGUsdFsyXVsyXS5sb2NrKX1iW2pbMF1dPWZ1bmN0aW9uKCl7YltqWzBdKyJXaXRoIl0odGhpcz09PWI/cDp0aGlzLGFyZ3VtZW50cyk7cmV0dXJuIHRoaXN9O2JbalswXSsiV2l0aCJdPWwuZmlyZVdpdGh9KTtwLnByb21pc2UoYik7aWYoYSl7YS5jYWxsKGIsYil9cmV0dXJuIGJ9LHdoZW46ZnVuY3Rpb24ocyl7dmFyIGk9MCxyPWYuY2FsbChhcmd1bWVudHMpLGw9ci5sZW5ndGgsYT1sIT09MXx8KHMmJlEuaXNGdW5jdGlvbihzLnByb21pc2UpKT9sOjAsYj1hPT09MT9zOlEuRGVmZXJyZWQoKSxqPWZ1bmN0aW9uKGksdCx2KXtyZXR1cm4gZnVuY3Rpb24oXyl7dFtpXT10aGlzO3ZbaV09YXJndW1lbnRzLmxlbmd0aD4xP2YuY2FsbChhcmd1bWVudHMpOl87aWYodj09PXApe2Iubm90aWZ5V2l0aCh0LHYpfWVsc2UgaWYoISgtLWEpKXtiLnJlc29sdmVXaXRoKHQsdil9fX0scCxtLG47aWYobD4xKXtwPW5ldyBBcnJheShsKTttPW5ldyBBcnJheShsKTtuPW5ldyBBcnJheShsKTtmb3IoO2k8bDtpKyspe2lmKHJbaV0mJlEuaXNGdW5jdGlvbihyW2ldLnByb21pc2UpKXtyW2ldLnByb21pc2UoKS5kb25lKGooaSxuLHIpKS5mYWlsKGIucmVqZWN0KS5wcm9ncmVzcyhqKGksbSxwKSl9ZWxzZXstLWF9fX1pZighYSl7Yi5yZXNvbHZlV2l0aChuLHIpfXJldHVybiBiLnByb21pc2UoKX19KTt2YXIgVTtRLmZuLnJlYWR5PWZ1bmN0aW9uKGEpe1EucmVhZHkucHJvbWlzZSgpLmRvbmUoYSk7cmV0dXJuIHRoaXN9O1EuZXh0ZW5kKHtpc1JlYWR5OmZhbHNlLHJlYWR5V2FpdDoxLGhvbGRSZWFkeTpmdW5jdGlvbihhKXtpZihhKXtRLnJlYWR5V2FpdCsrfWVsc2V7US5yZWFkeSh0cnVlKX19LHJlYWR5OmZ1bmN0aW9uKGEpe2lmKGE9PT10cnVlPy0tUS5yZWFkeVdhaXQ6US5pc1JlYWR5KXtyZXR1cm59aWYoIUouYm9keSl7cmV0dXJuIHNldFRpbWVvdXQoUS5yZWFkeSl9US5pc1JlYWR5PXRydWU7aWYoYSE9PXRydWUmJi0tUS5yZWFkeVdhaXQ+MCl7cmV0dXJufVUucmVzb2x2ZVdpdGgoSixbUV0pO2lmKFEuZm4udHJpZ2dlckhhbmRsZXIpe1EoSikudHJpZ2dlckhhbmRsZXIoInJlYWR5Iik7UShKKS5vZmYoInJlYWR5Iil9fX0pO2Z1bmN0aW9uIFYoKXtpZihKLmFkZEV2ZW50TGlzdGVuZXIpe0oucmVtb3ZlRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsVyxmYWxzZSk7dy5yZW1vdmVFdmVudExpc3RlbmVyKCJsb2FkIixXLGZhbHNlKX1lbHNle0ouZGV0YWNoRXZlbnQoIm9ucmVhZHlzdGF0ZWNoYW5nZSIsVyk7dy5kZXRhY2hFdmVudCgib25sb2FkIixXKX19ZnVuY3Rpb24gVygpe2lmKEouYWRkRXZlbnRMaXN0ZW5lcnx8ZXZlbnQudHlwZT09PSJsb2FkInx8Si5yZWFkeVN0YXRlPT09ImNvbXBsZXRlIil7VigpO1EucmVhZHkoKX19US5yZWFkeS5wcm9taXNlPWZ1bmN0aW9uKGEpe2lmKCFVKXtVPVEuRGVmZXJyZWQoKTtpZihKLnJlYWR5U3RhdGU9PT0iY29tcGxldGUiKXtzZXRUaW1lb3V0KFEucmVhZHkpfWVsc2UgaWYoSi5hZGRFdmVudExpc3RlbmVyKXtKLmFkZEV2ZW50TGlzdGVuZXIoIkRPTUNvbnRlbnRMb2FkZWQiLFcsZmFsc2UpO3cuYWRkRXZlbnRMaXN0ZW5lcigibG9hZCIsVyxmYWxzZSl9ZWxzZXtKLmF0dGFjaEV2ZW50KCJvbnJlYWR5c3RhdGVjaGFuZ2UiLFcpO3cuYXR0YWNoRXZlbnQoIm9ubG9hZCIsVyk7dmFyIHQ9ZmFsc2U7dHJ5e3Q9dy5mcmFtZUVsZW1lbnQ9PW51bGwmJkouZG9jdW1lbnRFbGVtZW50fWNhdGNoKGUpe31pZih0JiZ0LmRvU2Nyb2xsKXsoZnVuY3Rpb24gZG9TY3JvbGxDaGVjaygpe2lmKCFRLmlzUmVhZHkpe3RyeXt0LmRvU2Nyb2xsKCJsZWZ0Iil9Y2F0Y2goZSl7cmV0dXJuIHNldFRpbWVvdXQoZG9TY3JvbGxDaGVjayw1MCl9VigpO1EucmVhZHkoKX19KSgpfX19cmV0dXJuIFUucHJvbWlzZShhKX07dmFyIFg9dHlwZW9mIHVuZGVmaW5lZDt2YXIgaTtmb3IoaSBpbiBRKHgpKXticmVha314Lm93bkxhc3Q9aSE9PSIwIjt4LmlubGluZUJsb2NrTmVlZHNMYXlvdXQ9ZmFsc2U7UShmdW5jdGlvbigpe3ZhciB2LGEsYixqO2I9Si5nZXRFbGVtZW50c0J5VGFnTmFtZSgiYm9keSIpWzBdO2lmKCFifHwhYi5zdHlsZSl7cmV0dXJufWE9Si5jcmVhdGVFbGVtZW50KCJkaXYiKTtqPUouY3JlYXRlRWxlbWVudCgiZGl2Iik7ai5zdHlsZS5jc3NUZXh0PSJwb3NpdGlvbjphYnNvbHV0ZTtib3JkZXI6MDt3aWR0aDowO2hlaWdodDowO3RvcDowO2xlZnQ6LTk5OTlweCI7Yi5hcHBlbmRDaGlsZChqKS5hcHBlbmRDaGlsZChhKTtpZih0eXBlb2YgYS5zdHlsZS56b29tIT09WCl7YS5zdHlsZS5jc3NUZXh0PSJkaXNwbGF5OmlubGluZTttYXJnaW46MDtib3JkZXI6MDtwYWRkaW5nOjFweDt3aWR0aDoxcHg7em9vbToxIjt4LmlubGluZUJsb2NrTmVlZHNMYXlvdXQ9dj1hLm9mZnNldFdpZHRoPT09MztpZih2KXtiLnN0eWxlLnpvb209MX19Yi5yZW1vdmVDaGlsZChqKX0pOyhmdW5jdGlvbigpe3ZhciBhPUouY3JlYXRlRWxlbWVudCgiZGl2Iik7aWYoeC5kZWxldGVFeHBhbmRvPT1udWxsKXt4LmRlbGV0ZUV4cGFuZG89dHJ1ZTt0cnl7ZGVsZXRlIGEudGVzdH1jYXRjaChlKXt4LmRlbGV0ZUV4cGFuZG89ZmFsc2V9fWE9bnVsbH0pKCk7US5hY2NlcHREYXRhPWZ1bmN0aW9uKGEpe3ZhciBuPVEubm9EYXRhWyhhLm5vZGVOYW1lKyIgIikudG9Mb3dlckNhc2UoKV0sYj0rYS5ub2RlVHlwZXx8MTtyZXR1cm4gYiE9PTEmJmIhPT05P2ZhbHNlOiFufHxuIT09dHJ1ZSYmYS5nZXRBdHRyaWJ1dGUoImNsYXNzaWQiKT09PW59O3ZhciBZPS9eKD86XHtbXHdcV10qXH18XFtbXHdcV10qXF0pJC8sWj0vKFtBLVpdKS9nO2Z1bmN0aW9uICQoYSxiLGope2lmKGo9PT11bmRlZmluZWQmJmEubm9kZVR5cGU9PT0xKXt2YXIgbj0iZGF0YS0iK2IucmVwbGFjZShaLCItJDEiKS50b0xvd2VyQ2FzZSgpO2o9YS5nZXRBdHRyaWJ1dGUobik7aWYodHlwZW9mIGo9PT0ic3RyaW5nIil7dHJ5e2o9aj09PSJ0cnVlIj90cnVlOmo9PT0iZmFsc2UiP2ZhbHNlOmo9PT0ibnVsbCI/bnVsbDoraisiIj09PWo/K2o6WS50ZXN0KGopP1EucGFyc2VKU09OKGopOmp9Y2F0Y2goZSl7fVEuZGF0YShhLGIsail9ZWxzZXtqPXVuZGVmaW5lZH19cmV0dXJuIGp9ZnVuY3Rpb24gYTEoYSl7dmFyIG47Zm9yKG4gaW4gYSl7aWYobj09PSJkYXRhIiYmUS5pc0VtcHR5T2JqZWN0KGFbbl0pKXtjb250aW51ZX1pZihuIT09InRvSlNPTiIpe3JldHVybiBmYWxzZX19cmV0dXJuIHRydWV9ZnVuY3Rpb24gYjEoYSxuLGIscCl7aWYoIVEuYWNjZXB0RGF0YShhKSl7cmV0dXJufXZhciByLHQsaj1RLmV4cGFuZG8sbD1hLm5vZGVUeXBlLG09bD9RLmNhY2hlOmEscz1sP2Fbal06YVtqXSYmajtpZigoIXN8fCFtW3NdfHwoIXAmJiFtW3NdLmRhdGEpKSYmYj09PXVuZGVmaW5lZCYmdHlwZW9mIG49PT0ic3RyaW5nIil7cmV0dXJufWlmKCFzKXtpZihsKXtzPWFbal09ZC5wb3AoKXx8US5ndWlkKyt9ZWxzZXtzPWp9fWlmKCFtW3NdKXttW3NdPWw/e306e3RvSlNPTjpRLm5vb3B9fWlmKHR5cGVvZiBuPT09Im9iamVjdCJ8fHR5cGVvZiBuPT09ImZ1bmN0aW9uIil7aWYocCl7bVtzXT1RLmV4dGVuZChtW3NdLG4pfWVsc2V7bVtzXS5kYXRhPVEuZXh0ZW5kKG1bc10uZGF0YSxuKX19dD1tW3NdO2lmKCFwKXtpZighdC5kYXRhKXt0LmRhdGE9e319dD10LmRhdGF9aWYoYiE9PXVuZGVmaW5lZCl7dFtRLmNhbWVsQ2FzZShuKV09Yn1pZih0eXBlb2Ygbj09PSJzdHJpbmciKXtyPXRbbl07aWYocj09bnVsbCl7cj10W1EuY2FtZWxDYXNlKG4pXX19ZWxzZXtyPXR9cmV0dXJuIHJ9ZnVuY3Rpb24gYzEoYSxuLHApe2lmKCFRLmFjY2VwdERhdGEoYSkpe3JldHVybn12YXIgdCxpLGI9YS5ub2RlVHlwZSxqPWI/US5jYWNoZTphLGw9Yj9hW1EuZXhwYW5kb106US5leHBhbmRvO2lmKCFqW2xdKXtyZXR1cm59aWYobil7dD1wP2pbbF06altsXS5kYXRhO2lmKHQpe2lmKCFRLmlzQXJyYXkobikpe2lmKG4gaW4gdCl7bj1bbl19ZWxzZXtuPVEuY2FtZWxDYXNlKG4pO2lmKG4gaW4gdCl7bj1bbl19ZWxzZXtuPW4uc3BsaXQoIiAiKX19fWVsc2V7bj1uLmNvbmNhdChRLm1hcChuLFEuY2FtZWxDYXNlKSl9aT1uLmxlbmd0aDt3aGlsZShpLS0pe2RlbGV0ZSB0W25baV1dfWlmKHA/IWExKHQpOiFRLmlzRW1wdHlPYmplY3QodCkpe3JldHVybn19fWlmKCFwKXtkZWxldGUgaltsXS5kYXRhO2lmKCFhMShqW2xdKSl7cmV0dXJufX1pZihiKXtRLmNsZWFuRGF0YShbYV0sdHJ1ZSl9ZWxzZSBpZih4LmRlbGV0ZUV4cGFuZG98fGohPWoud2luZG93KXtkZWxldGUgaltsXX1lbHNle2pbbF09bnVsbH19US5leHRlbmQoe2NhY2hlOnt9LG5vRGF0YTp7ImFwcGxldCAiOnRydWUsImVtYmVkICI6dHJ1ZSwib2JqZWN0ICI6ImNsc2lkOkQyN0NEQjZFLUFFNkQtMTFjZi05NkI4LTQ0NDU1MzU0MDAwMCJ9LGhhc0RhdGE6ZnVuY3Rpb24oYSl7YT1hLm5vZGVUeXBlP1EuY2FjaGVbYVtRLmV4cGFuZG9dXTphW1EuZXhwYW5kb107cmV0dXJuISFhJiYhYTEoYSl9LGRhdGE6ZnVuY3Rpb24oYSxuLGIpe3JldHVybiBiMShhLG4sYil9LHJlbW92ZURhdGE6ZnVuY3Rpb24oYSxuKXtyZXR1cm4gYzEoYSxuKX0sX2RhdGE6ZnVuY3Rpb24oYSxuLGIpe3JldHVybiBiMShhLG4sYix0cnVlKX0sX3JlbW92ZURhdGE6ZnVuY3Rpb24oYSxuKXtyZXR1cm4gYzEoYSxuLHRydWUpfX0pO1EuZm4uZXh0ZW5kKHtkYXRhOmZ1bmN0aW9uKGEsdil7dmFyIGksbixiLGo9dGhpc1swXSxsPWomJmouYXR0cmlidXRlcztpZihhPT09dW5kZWZpbmVkKXtpZih0aGlzLmxlbmd0aCl7Yj1RLmRhdGEoaik7aWYoai5ub2RlVHlwZT09PTEmJiFRLl9kYXRhKGosInBhcnNlZEF0dHJzIikpe2k9bC5sZW5ndGg7d2hpbGUoaS0tKXtpZihsW2ldKXtuPWxbaV0ubmFtZTtpZihuLmluZGV4T2YoImRhdGEtIik9PT0wKXtuPVEuY2FtZWxDYXNlKG4uc2xpY2UoNSkpOyQoaixuLGJbbl0pfX19US5fZGF0YShqLCJwYXJzZWRBdHRycyIsdHJ1ZSl9fXJldHVybiBifWlmKHR5cGVvZiBhPT09Im9iamVjdCIpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtRLmRhdGEodGhpcyxhKX0pfXJldHVybiBhcmd1bWVudHMubGVuZ3RoPjE/dGhpcy5lYWNoKGZ1bmN0aW9uKCl7US5kYXRhKHRoaXMsYSx2KX0pOmo/JChqLGEsUS5kYXRhKGosYSkpOnVuZGVmaW5lZH0scmVtb3ZlRGF0YTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7US5yZW1vdmVEYXRhKHRoaXMsYSl9KX19KTtRLmV4dGVuZCh7cXVldWU6ZnVuY3Rpb24oYSx0LGIpe3ZhciBqO2lmKGEpe3Q9KHR8fCJmeCIpKyJxdWV1ZSI7aj1RLl9kYXRhKGEsdCk7aWYoYil7aWYoIWp8fFEuaXNBcnJheShiKSl7aj1RLl9kYXRhKGEsdCxRLm1ha2VBcnJheShiKSl9ZWxzZXtqLnB1c2goYil9fXJldHVybiBqfHxbXX19LGRlcXVldWU6ZnVuY3Rpb24oYSx0KXt0PXR8fCJmeCI7dmFyIGI9US5xdWV1ZShhLHQpLHM9Yi5sZW5ndGgsaj1iLnNoaWZ0KCksbD1RLl9xdWV1ZUhvb2tzKGEsdCksbj1mdW5jdGlvbigpe1EuZGVxdWV1ZShhLHQpfTtpZihqPT09ImlucHJvZ3Jlc3MiKXtqPWIuc2hpZnQoKTtzLS19aWYoail7aWYodD09PSJmeCIpe2IudW5zaGlmdCgiaW5wcm9ncmVzcyIpfWRlbGV0ZSBsLnN0b3A7ai5jYWxsKGEsbixsKX1pZighcyYmbCl7bC5lbXB0eS5maXJlKCl9fSxfcXVldWVIb29rczpmdW5jdGlvbihhLHQpe3ZhciBiPXQrInF1ZXVlSG9va3MiO3JldHVybiBRLl9kYXRhKGEsYil8fFEuX2RhdGEoYSxiLHtlbXB0eTpRLkNhbGxiYWNrcygib25jZSBtZW1vcnkiKS5hZGQoZnVuY3Rpb24oKXtRLl9yZW1vdmVEYXRhKGEsdCsicXVldWUiKTtRLl9yZW1vdmVEYXRhKGEsYil9KX0pfX0pO1EuZm4uZXh0ZW5kKHtxdWV1ZTpmdW5jdGlvbih0LGEpe3ZhciBzPTI7aWYodHlwZW9mIHQhPT0ic3RyaW5nIil7YT10O3Q9ImZ4IjtzLS19aWYoYXJndW1lbnRzLmxlbmd0aDxzKXtyZXR1cm4gUS5xdWV1ZSh0aGlzWzBdLHQpfXJldHVybiBhPT09dW5kZWZpbmVkP3RoaXM6dGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGI9US5xdWV1ZSh0aGlzLHQsYSk7US5fcXVldWVIb29rcyh0aGlzLHQpO2lmKHQ9PT0iZngiJiZiWzBdIT09ImlucHJvZ3Jlc3MiKXtRLmRlcXVldWUodGhpcyx0KX19KX0sZGVxdWV1ZTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7US5kZXF1ZXVlKHRoaXMsdCl9KX0sY2xlYXJRdWV1ZTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5xdWV1ZSh0fHwiZngiLFtdKX0scHJvbWlzZTpmdW5jdGlvbih0LGEpe3ZhciBiLGo9MSxsPVEuRGVmZXJyZWQoKSxtPXRoaXMsaT10aGlzLmxlbmd0aCxyPWZ1bmN0aW9uKCl7aWYoISgtLWopKXtsLnJlc29sdmVXaXRoKG0sW21dKX19O2lmKHR5cGVvZiB0IT09InN0cmluZyIpe2E9dDt0PXVuZGVmaW5lZH10PXR8fCJmeCI7d2hpbGUoaS0tKXtiPVEuX2RhdGEobVtpXSx0KyJxdWV1ZUhvb2tzIik7aWYoYiYmYi5lbXB0eSl7aisrO2IuZW1wdHkuYWRkKHIpfX1yKCk7cmV0dXJuIGwucHJvbWlzZShhKX19KTt2YXIgZDE9KC9bKy1dPyg/OlxkKlwufClcZCsoPzpbZUVdWystXT9cZCt8KS8pLnNvdXJjZTt2YXIgZTE9WyJUb3AiLCJSaWdodCIsIkJvdHRvbSIsIkxlZnQiXTt2YXIgZjE9ZnVuY3Rpb24oYSxiKXthPWJ8fGE7cmV0dXJuIFEuY3NzKGEsImRpc3BsYXkiKT09PSJub25lInx8IVEuY29udGFpbnMoYS5vd25lckRvY3VtZW50LGEpfTt2YXIgZzE9US5hY2Nlc3M9ZnVuY3Rpb24oYSxiLGosdixsLG0scil7dmFyIGk9MCxuPWEubGVuZ3RoLHA9aj09bnVsbDtpZihRLnR5cGUoaik9PT0ib2JqZWN0Iil7bD10cnVlO2ZvcihpIGluIGope1EuYWNjZXNzKGEsYixpLGpbaV0sdHJ1ZSxtLHIpfX1lbHNlIGlmKHYhPT11bmRlZmluZWQpe2w9dHJ1ZTtpZighUS5pc0Z1bmN0aW9uKHYpKXtyPXRydWV9aWYocCl7aWYocil7Yi5jYWxsKGEsdik7Yj1udWxsfWVsc2V7cD1iO2I9ZnVuY3Rpb24ocyxqLHYpe3JldHVybiBwLmNhbGwoUShzKSx2KX19fWlmKGIpe2Zvcig7aTxuO2krKyl7YihhW2ldLGoscj92OnYuY2FsbChhW2ldLGksYihhW2ldLGopKSl9fX1yZXR1cm4gbD9hOnA/Yi5jYWxsKGEpOm4/YihhWzBdLGopOm19O3ZhciBoMT0oL14oPzpjaGVja2JveHxyYWRpbykkL2kpOyhmdW5jdGlvbigpe3ZhciBhPUouY3JlYXRlRWxlbWVudCgiaW5wdXQiKSxiPUouY3JlYXRlRWxlbWVudCgiZGl2Iiksaj1KLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtiLmlubmVySFRNTD0iICA8bGluay8+PHRhYmxlPjwvdGFibGU+PGEgaHJlZj0nL2EnPmE8L2E+PGlucHV0IHR5cGU9J2NoZWNrYm94Jy8+Ijt4LmxlYWRpbmdXaGl0ZXNwYWNlPWIuZmlyc3RDaGlsZC5ub2RlVHlwZT09PTM7eC50Ym9keT0hYi5nZXRFbGVtZW50c0J5VGFnTmFtZSgidGJvZHkiKS5sZW5ndGg7eC5odG1sU2VyaWFsaXplPSEhYi5nZXRFbGVtZW50c0J5VGFnTmFtZSgibGluayIpLmxlbmd0aDt4Lmh0bWw1Q2xvbmU9Si5jcmVhdGVFbGVtZW50KCJuYXYiKS5jbG9uZU5vZGUodHJ1ZSkub3V0ZXJIVE1MIT09Ijw6bmF2PjwvOm5hdj4iO2EudHlwZT0iY2hlY2tib3giO2EuY2hlY2tlZD10cnVlO2ouYXBwZW5kQ2hpbGQoYSk7eC5hcHBlbmRDaGVja2VkPWEuY2hlY2tlZDtiLmlubmVySFRNTD0iPHRleHRhcmVhPng8L3RleHRhcmVhPiI7eC5ub0Nsb25lQ2hlY2tlZD0hIWIuY2xvbmVOb2RlKHRydWUpLmxhc3RDaGlsZC5kZWZhdWx0VmFsdWU7ai5hcHBlbmRDaGlsZChiKTtiLmlubmVySFRNTD0iPGlucHV0IHR5cGU9J3JhZGlvJyBjaGVja2VkPSdjaGVja2VkJyBuYW1lPSd0Jy8+Ijt4LmNoZWNrQ2xvbmU9Yi5jbG9uZU5vZGUodHJ1ZSkuY2xvbmVOb2RlKHRydWUpLmxhc3RDaGlsZC5jaGVja2VkO3gubm9DbG9uZUV2ZW50PXRydWU7aWYoYi5hdHRhY2hFdmVudCl7Yi5hdHRhY2hFdmVudCgib25jbGljayIsZnVuY3Rpb24oKXt4Lm5vQ2xvbmVFdmVudD1mYWxzZX0pO2IuY2xvbmVOb2RlKHRydWUpLmNsaWNrKCl9aWYoeC5kZWxldGVFeHBhbmRvPT1udWxsKXt4LmRlbGV0ZUV4cGFuZG89dHJ1ZTt0cnl7ZGVsZXRlIGIudGVzdH1jYXRjaChlKXt4LmRlbGV0ZUV4cGFuZG89ZmFsc2V9fX0pKCk7KGZ1bmN0aW9uKCl7dmFyIGksYSxiPUouY3JlYXRlRWxlbWVudCgiZGl2Iik7Zm9yKGkgaW57c3VibWl0OnRydWUsY2hhbmdlOnRydWUsZm9jdXNpbjp0cnVlfSl7YT0ib24iK2k7aWYoISh4W2krIkJ1YmJsZXMiXT1hIGluIHcpKXtiLnNldEF0dHJpYnV0ZShhLCJ0Iik7eFtpKyJCdWJibGVzIl09Yi5hdHRyaWJ1dGVzW2FdLmV4cGFuZG89PT1mYWxzZX19Yj1udWxsfSkoKTt2YXIgaTE9L14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWEpJC9pLGoxPS9ea2V5LyxrMT0vXig/Om1vdXNlfHBvaW50ZXJ8Y29udGV4dG1lbnUpfGNsaWNrLyxsMT0vXig/OmZvY3VzaW5mb2N1c3xmb2N1c291dGJsdXIpJC8sbTE9L14oW14uXSopKD86XC4oLispfCkkLztmdW5jdGlvbiBuMSgpe3JldHVybiB0cnVlfWZ1bmN0aW9uIG8xKCl7cmV0dXJuIGZhbHNlfWZ1bmN0aW9uIHAxKCl7dHJ5e3JldHVybiBKLmFjdGl2ZUVsZW1lbnR9Y2F0Y2goYSl7fX1RLmV2ZW50PXtnbG9iYWw6e30sYWRkOmZ1bmN0aW9uKGEsYixqLGwscyl7dmFyIG0sbix0LHAscix2LF8scjMsczMsdDMsdTMsdjM9US5fZGF0YShhKTtpZighdjMpe3JldHVybn1pZihqLmhhbmRsZXIpe3A9ajtqPXAuaGFuZGxlcjtzPXAuc2VsZWN0b3J9aWYoIWouZ3VpZCl7ai5ndWlkPVEuZ3VpZCsrfWlmKCEobj12My5ldmVudHMpKXtuPXYzLmV2ZW50cz17fX1pZighKHY9djMuaGFuZGxlKSl7dj12My5oYW5kbGU9ZnVuY3Rpb24oZSl7cmV0dXJuIHR5cGVvZiBRIT09WCYmKCFlfHxRLmV2ZW50LnRyaWdnZXJlZCE9PWUudHlwZSk/US5ldmVudC5kaXNwYXRjaC5hcHBseSh2LmVsZW0sYXJndW1lbnRzKTp1bmRlZmluZWR9O3YuZWxlbT1hfWI9KGJ8fCIiKS5tYXRjaChQKXx8WyIiXTt0PWIubGVuZ3RoO3doaWxlKHQtLSl7bT1tMS5leGVjKGJbdF0pfHxbXTtzMz11Mz1tWzFdO3QzPShtWzJdfHwiIikuc3BsaXQoIi4iKS5zb3J0KCk7aWYoIXMzKXtjb250aW51ZX1yPVEuZXZlbnQuc3BlY2lhbFtzM118fHt9O3MzPShzP3IuZGVsZWdhdGVUeXBlOnIuYmluZFR5cGUpfHxzMztyPVEuZXZlbnQuc3BlY2lhbFtzM118fHt9O189US5leHRlbmQoe3R5cGU6czMsb3JpZ1R5cGU6dTMsZGF0YTpsLGhhbmRsZXI6aixndWlkOmouZ3VpZCxzZWxlY3RvcjpzLG5lZWRzQ29udGV4dDpzJiZRLmV4cHIubWF0Y2gubmVlZHNDb250ZXh0LnRlc3QocyksbmFtZXNwYWNlOnQzLmpvaW4oIi4iKX0scCk7aWYoIShyMz1uW3MzXSkpe3IzPW5bczNdPVtdO3IzLmRlbGVnYXRlQ291bnQ9MDtpZighci5zZXR1cHx8ci5zZXR1cC5jYWxsKGEsbCx0Myx2KT09PWZhbHNlKXtpZihhLmFkZEV2ZW50TGlzdGVuZXIpe2EuYWRkRXZlbnRMaXN0ZW5lcihzMyx2LGZhbHNlKX1lbHNlIGlmKGEuYXR0YWNoRXZlbnQpe2EuYXR0YWNoRXZlbnQoIm9uIitzMyx2KX19fWlmKHIuYWRkKXtyLmFkZC5jYWxsKGEsXyk7aWYoIV8uaGFuZGxlci5ndWlkKXtfLmhhbmRsZXIuZ3VpZD1qLmd1aWR9fWlmKHMpe3IzLnNwbGljZShyMy5kZWxlZ2F0ZUNvdW50KyssMCxfKX1lbHNle3IzLnB1c2goXyl9US5ldmVudC5nbG9iYWxbczNdPXRydWV9YT1udWxsfSxyZW1vdmU6ZnVuY3Rpb24oYSxiLGwscyxtKXt2YXIgaixuLHAscix0LHYsXyxyMyxzMyx0Myx1Myx2Mz1RLmhhc0RhdGEoYSkmJlEuX2RhdGEoYSk7aWYoIXYzfHwhKHY9djMuZXZlbnRzKSl7cmV0dXJufWI9KGJ8fCIiKS5tYXRjaChQKXx8WyIiXTt0PWIubGVuZ3RoO3doaWxlKHQtLSl7cD1tMS5leGVjKGJbdF0pfHxbXTtzMz11Mz1wWzFdO3QzPShwWzJdfHwiIikuc3BsaXQoIi4iKS5zb3J0KCk7aWYoIXMzKXtmb3IoczMgaW4gdil7US5ldmVudC5yZW1vdmUoYSxzMytiW3RdLGwscyx0cnVlKX1jb250aW51ZX1fPVEuZXZlbnQuc3BlY2lhbFtzM118fHt9O3MzPShzP18uZGVsZWdhdGVUeXBlOl8uYmluZFR5cGUpfHxzMztyMz12W3MzXXx8W107cD1wWzJdJiZuZXcgUmVnRXhwKCIoXnxcXC4pIit0My5qb2luKCJcXC4oPzouKlxcLnwpIikrIihcXC58JCkiKTtyPWo9cjMubGVuZ3RoO3doaWxlKGotLSl7bj1yM1tqXTtpZigobXx8dTM9PT1uLm9yaWdUeXBlKSYmKCFsfHxsLmd1aWQ9PT1uLmd1aWQpJiYoIXB8fHAudGVzdChuLm5hbWVzcGFjZSkpJiYoIXN8fHM9PT1uLnNlbGVjdG9yfHxzPT09IioqIiYmbi5zZWxlY3Rvcikpe3IzLnNwbGljZShqLDEpO2lmKG4uc2VsZWN0b3Ipe3IzLmRlbGVnYXRlQ291bnQtLX1pZihfLnJlbW92ZSl7Xy5yZW1vdmUuY2FsbChhLG4pfX19aWYociYmIXIzLmxlbmd0aCl7aWYoIV8udGVhcmRvd258fF8udGVhcmRvd24uY2FsbChhLHQzLHYzLmhhbmRsZSk9PT1mYWxzZSl7US5yZW1vdmVFdmVudChhLHMzLHYzLmhhbmRsZSl9ZGVsZXRlIHZbczNdfX1pZihRLmlzRW1wdHlPYmplY3Qodikpe2RlbGV0ZSB2My5oYW5kbGU7US5fcmVtb3ZlRGF0YShhLCJldmVudHMiKX19LHRyaWdnZXI6ZnVuY3Rpb24oYSxiLGosbCl7dmFyIG0sbixwLHIscyx0LGksdj1banx8Sl0sXz11LmNhbGwoYSwidHlwZSIpP2EudHlwZTphLHIzPXUuY2FsbChhLCJuYW1lc3BhY2UiKT9hLm5hbWVzcGFjZS5zcGxpdCgiLiIpOltdO3A9dD1qPWp8fEo7aWYoai5ub2RlVHlwZT09PTN8fGoubm9kZVR5cGU9PT04KXtyZXR1cm59aWYobDEudGVzdChfK1EuZXZlbnQudHJpZ2dlcmVkKSl7cmV0dXJufWlmKF8uaW5kZXhPZigiLiIpPj0wKXtyMz1fLnNwbGl0KCIuIik7Xz1yMy5zaGlmdCgpO3IzLnNvcnQoKX1uPV8uaW5kZXhPZigiOiIpPDAmJiJvbiIrXzthPWFbUS5leHBhbmRvXT9hOm5ldyBRLkV2ZW50KF8sdHlwZW9mIGE9PT0ib2JqZWN0IiYmYSk7YS5pc1RyaWdnZXI9bD8yOjM7YS5uYW1lc3BhY2U9cjMuam9pbigiLiIpO2EubmFtZXNwYWNlX3JlPWEubmFtZXNwYWNlP25ldyBSZWdFeHAoIihefFxcLikiK3IzLmpvaW4oIlxcLig/Oi4qXFwufCkiKSsiKFxcLnwkKSIpOm51bGw7YS5yZXN1bHQ9dW5kZWZpbmVkO2lmKCFhLnRhcmdldCl7YS50YXJnZXQ9an1iPWI9PW51bGw/W2FdOlEubWFrZUFycmF5KGIsW2FdKTtzPVEuZXZlbnQuc3BlY2lhbFtfXXx8e307aWYoIWwmJnMudHJpZ2dlciYmcy50cmlnZ2VyLmFwcGx5KGosYik9PT1mYWxzZSl7cmV0dXJufWlmKCFsJiYhcy5ub0J1YmJsZSYmIVEuaXNXaW5kb3coaikpe3I9cy5kZWxlZ2F0ZVR5cGV8fF87aWYoIWwxLnRlc3QocitfKSl7cD1wLnBhcmVudE5vZGV9Zm9yKDtwO3A9cC5wYXJlbnROb2RlKXt2LnB1c2gocCk7dD1wfWlmKHQ9PT0oai5vd25lckRvY3VtZW50fHxKKSl7di5wdXNoKHQuZGVmYXVsdFZpZXd8fHQucGFyZW50V2luZG93fHx3KX19aT0wO3doaWxlKChwPXZbaSsrXSkmJiFhLmlzUHJvcGFnYXRpb25TdG9wcGVkKCkpe2EudHlwZT1pPjE/cjpzLmJpbmRUeXBlfHxfO209KFEuX2RhdGEocCwiZXZlbnRzIil8fHt9KVthLnR5cGVdJiZRLl9kYXRhKHAsImhhbmRsZSIpO2lmKG0pe20uYXBwbHkocCxiKX1tPW4mJnBbbl07aWYobSYmbS5hcHBseSYmUS5hY2NlcHREYXRhKHApKXthLnJlc3VsdD1tLmFwcGx5KHAsYik7aWYoYS5yZXN1bHQ9PT1mYWxzZSl7YS5wcmV2ZW50RGVmYXVsdCgpfX19YS50eXBlPV87aWYoIWwmJiFhLmlzRGVmYXVsdFByZXZlbnRlZCgpKXtpZigoIXMuX2RlZmF1bHR8fHMuX2RlZmF1bHQuYXBwbHkodi5wb3AoKSxiKT09PWZhbHNlKSYmUS5hY2NlcHREYXRhKGopKXtpZihuJiZqW19dJiYhUS5pc1dpbmRvdyhqKSl7dD1qW25dO2lmKHQpe2pbbl09bnVsbH1RLmV2ZW50LnRyaWdnZXJlZD1fO3RyeXtqW19dKCl9Y2F0Y2goZSl7fVEuZXZlbnQudHJpZ2dlcmVkPXVuZGVmaW5lZDtpZih0KXtqW25dPXR9fX19cmV0dXJuIGEucmVzdWx0fSxkaXNwYXRjaDpmdW5jdGlvbihhKXthPVEuZXZlbnQuZml4KGEpO3ZhciBpLHIsYixtLGosbD1bXSxuPWYuY2FsbChhcmd1bWVudHMpLHA9KFEuX2RhdGEodGhpcywiZXZlbnRzIil8fHt9KVthLnR5cGVdfHxbXSxzPVEuZXZlbnQuc3BlY2lhbFthLnR5cGVdfHx7fTtuWzBdPWE7YS5kZWxlZ2F0ZVRhcmdldD10aGlzO2lmKHMucHJlRGlzcGF0Y2gmJnMucHJlRGlzcGF0Y2guY2FsbCh0aGlzLGEpPT09ZmFsc2Upe3JldHVybn1sPVEuZXZlbnQuaGFuZGxlcnMuY2FsbCh0aGlzLGEscCk7aT0wO3doaWxlKChtPWxbaSsrXSkmJiFhLmlzUHJvcGFnYXRpb25TdG9wcGVkKCkpe2EuY3VycmVudFRhcmdldD1tLmVsZW07aj0wO3doaWxlKChiPW0uaGFuZGxlcnNbaisrXSkmJiFhLmlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkKCkpe2lmKCFhLm5hbWVzcGFjZV9yZXx8YS5uYW1lc3BhY2VfcmUudGVzdChiLm5hbWVzcGFjZSkpe2EuaGFuZGxlT2JqPWI7YS5kYXRhPWIuZGF0YTtyPSgoUS5ldmVudC5zcGVjaWFsW2Iub3JpZ1R5cGVdfHx7fSkuaGFuZGxlfHxiLmhhbmRsZXIpLmFwcGx5KG0uZWxlbSxuKTtpZihyIT09dW5kZWZpbmVkKXtpZigoYS5yZXN1bHQ9cik9PT1mYWxzZSl7YS5wcmV2ZW50RGVmYXVsdCgpO2Euc3RvcFByb3BhZ2F0aW9uKCl9fX19fWlmKHMucG9zdERpc3BhdGNoKXtzLnBvc3REaXNwYXRjaC5jYWxsKHRoaXMsYSl9cmV0dXJuIGEucmVzdWx0fSxoYW5kbGVyczpmdW5jdGlvbihhLGIpe3ZhciBzLGosbSxpLGw9W10sbj1iLmRlbGVnYXRlQ291bnQscD1hLnRhcmdldDtpZihuJiZwLm5vZGVUeXBlJiYoIWEuYnV0dG9ufHxhLnR5cGUhPT0iY2xpY2siKSl7Zm9yKDtwIT10aGlzO3A9cC5wYXJlbnROb2RlfHx0aGlzKXtpZihwLm5vZGVUeXBlPT09MSYmKHAuZGlzYWJsZWQhPT10cnVlfHxhLnR5cGUhPT0iY2xpY2siKSl7bT1bXTtmb3IoaT0wO2k8bjtpKyspe2o9YltpXTtzPWouc2VsZWN0b3IrIiAiO2lmKG1bc109PT11bmRlZmluZWQpe21bc109ai5uZWVkc0NvbnRleHQ/UShzLHRoaXMpLmluZGV4KHApPj0wOlEuZmluZChzLHRoaXMsbnVsbCxbcF0pLmxlbmd0aH1pZihtW3NdKXttLnB1c2goail9fWlmKG0ubGVuZ3RoKXtsLnB1c2goe2VsZW06cCxoYW5kbGVyczptfSl9fX19aWYobjxiLmxlbmd0aCl7bC5wdXNoKHtlbGVtOnRoaXMsaGFuZGxlcnM6Yi5zbGljZShuKX0pfXJldHVybiBsfSxmaXg6ZnVuY3Rpb24oYSl7aWYoYVtRLmV4cGFuZG9dKXtyZXR1cm4gYX12YXIgaSxwLGIsdD1hLnR5cGUsaj1hLGw9dGhpcy5maXhIb29rc1t0XTtpZighbCl7dGhpcy5maXhIb29rc1t0XT1sPWsxLnRlc3QodCk/dGhpcy5tb3VzZUhvb2tzOmoxLnRlc3QodCk/dGhpcy5rZXlIb29rczp7fX1iPWwucHJvcHM/dGhpcy5wcm9wcy5jb25jYXQobC5wcm9wcyk6dGhpcy5wcm9wczthPW5ldyBRLkV2ZW50KGopO2k9Yi5sZW5ndGg7d2hpbGUoaS0tKXtwPWJbaV07YVtwXT1qW3BdfWlmKCFhLnRhcmdldCl7YS50YXJnZXQ9ai5zcmNFbGVtZW50fHxKfWlmKGEudGFyZ2V0Lm5vZGVUeXBlPT09Myl7YS50YXJnZXQ9YS50YXJnZXQucGFyZW50Tm9kZX1hLm1ldGFLZXk9ISFhLm1ldGFLZXk7cmV0dXJuIGwuZmlsdGVyP2wuZmlsdGVyKGEsaik6YX0scHJvcHM6ImFsdEtleSBidWJibGVzIGNhbmNlbGFibGUgY3RybEtleSBjdXJyZW50VGFyZ2V0IGV2ZW50UGhhc2UgbWV0YUtleSByZWxhdGVkVGFyZ2V0IHNoaWZ0S2V5IHRhcmdldCB0aW1lU3RhbXAgdmlldyB3aGljaCIuc3BsaXQoIiAiKSxmaXhIb29rczp7fSxrZXlIb29rczp7cHJvcHM6ImNoYXIgY2hhckNvZGUga2V5IGtleUNvZGUiLnNwbGl0KCIgIiksZmlsdGVyOmZ1bmN0aW9uKGEsYil7aWYoYS53aGljaD09bnVsbCl7YS53aGljaD1iLmNoYXJDb2RlIT1udWxsP2IuY2hhckNvZGU6Yi5rZXlDb2RlfXJldHVybiBhfX0sbW91c2VIb29rczp7cHJvcHM6ImJ1dHRvbiBidXR0b25zIGNsaWVudFggY2xpZW50WSBmcm9tRWxlbWVudCBvZmZzZXRYIG9mZnNldFkgcGFnZVggcGFnZVkgc2NyZWVuWCBzY3JlZW5ZIHRvRWxlbWVudCIuc3BsaXQoIiAiKSxmaWx0ZXI6ZnVuY3Rpb24oYSxiKXt2YXIgaixsLG0sbj1iLmJ1dHRvbixwPWIuZnJvbUVsZW1lbnQ7aWYoYS5wYWdlWD09bnVsbCYmYi5jbGllbnRYIT1udWxsKXtsPWEudGFyZ2V0Lm93bmVyRG9jdW1lbnR8fEo7bT1sLmRvY3VtZW50RWxlbWVudDtqPWwuYm9keTthLnBhZ2VYPWIuY2xpZW50WCsobSYmbS5zY3JvbGxMZWZ0fHxqJiZqLnNjcm9sbExlZnR8fDApLShtJiZtLmNsaWVudExlZnR8fGomJmouY2xpZW50TGVmdHx8MCk7YS5wYWdlWT1iLmNsaWVudFkrKG0mJm0uc2Nyb2xsVG9wfHxqJiZqLnNjcm9sbFRvcHx8MCktKG0mJm0uY2xpZW50VG9wfHxqJiZqLmNsaWVudFRvcHx8MCl9aWYoIWEucmVsYXRlZFRhcmdldCYmcCl7YS5yZWxhdGVkVGFyZ2V0PXA9PT1hLnRhcmdldD9iLnRvRWxlbWVudDpwfWlmKCFhLndoaWNoJiZuIT09dW5kZWZpbmVkKXthLndoaWNoPShuJjE/MToobiYyPzM6KG4mND8yOjApKSl9cmV0dXJuIGF9fSxzcGVjaWFsOntsb2FkOntub0J1YmJsZTp0cnVlfSxmb2N1czp7dHJpZ2dlcjpmdW5jdGlvbigpe2lmKHRoaXMhPT1wMSgpJiZ0aGlzLmZvY3VzKXt0cnl7dGhpcy5mb2N1cygpO3JldHVybiBmYWxzZX1jYXRjaChlKXt9fX0sZGVsZWdhdGVUeXBlOiJmb2N1c2luIn0sYmx1cjp7dHJpZ2dlcjpmdW5jdGlvbigpe2lmKHRoaXM9PT1wMSgpJiZ0aGlzLmJsdXIpe3RoaXMuYmx1cigpO3JldHVybiBmYWxzZX19LGRlbGVnYXRlVHlwZToiZm9jdXNvdXQifSxjbGljazp7dHJpZ2dlcjpmdW5jdGlvbigpe2lmKFEubm9kZU5hbWUodGhpcywiaW5wdXQiKSYmdGhpcy50eXBlPT09ImNoZWNrYm94IiYmdGhpcy5jbGljayl7dGhpcy5jbGljaygpO3JldHVybiBmYWxzZX19LF9kZWZhdWx0OmZ1bmN0aW9uKGEpe3JldHVybiBRLm5vZGVOYW1lKGEudGFyZ2V0LCJhIil9fSxiZWZvcmV1bmxvYWQ6e3Bvc3REaXNwYXRjaDpmdW5jdGlvbihhKXtpZihhLnJlc3VsdCE9PXVuZGVmaW5lZCYmYS5vcmlnaW5hbEV2ZW50KXthLm9yaWdpbmFsRXZlbnQucmV0dXJuVmFsdWU9YS5yZXN1bHR9fX19LHNpbXVsYXRlOmZ1bmN0aW9uKHQsYSxiLGope3ZhciBlPVEuZXh0ZW5kKG5ldyBRLkV2ZW50KCksYix7dHlwZTp0LGlzU2ltdWxhdGVkOnRydWUsb3JpZ2luYWxFdmVudDp7fX0pO2lmKGope1EuZXZlbnQudHJpZ2dlcihlLG51bGwsYSl9ZWxzZXtRLmV2ZW50LmRpc3BhdGNoLmNhbGwoYSxlKX1pZihlLmlzRGVmYXVsdFByZXZlbnRlZCgpKXtiLnByZXZlbnREZWZhdWx0KCl9fX07US5yZW1vdmVFdmVudD1KLnJlbW92ZUV2ZW50TGlzdGVuZXI/ZnVuY3Rpb24oYSx0LGIpe2lmKGEucmVtb3ZlRXZlbnRMaXN0ZW5lcil7YS5yZW1vdmVFdmVudExpc3RlbmVyKHQsYixmYWxzZSl9fTpmdW5jdGlvbihhLHQsYil7dmFyIG49Im9uIit0O2lmKGEuZGV0YWNoRXZlbnQpe2lmKHR5cGVvZiBhW25dPT09WCl7YVtuXT1udWxsfWEuZGV0YWNoRXZlbnQobixiKX19O1EuRXZlbnQ9ZnVuY3Rpb24ocyxwKXtpZighKHRoaXMgaW5zdGFuY2VvZiBRLkV2ZW50KSl7cmV0dXJuIG5ldyBRLkV2ZW50KHMscCl9aWYocyYmcy50eXBlKXt0aGlzLm9yaWdpbmFsRXZlbnQ9czt0aGlzLnR5cGU9cy50eXBlO3RoaXMuaXNEZWZhdWx0UHJldmVudGVkPXMuZGVmYXVsdFByZXZlbnRlZHx8cy5kZWZhdWx0UHJldmVudGVkPT09dW5kZWZpbmVkJiZzLnJldHVyblZhbHVlPT09ZmFsc2U/bjE6bzF9ZWxzZXt0aGlzLnR5cGU9c31pZihwKXtRLmV4dGVuZCh0aGlzLHApfXRoaXMudGltZVN0YW1wPXMmJnMudGltZVN0YW1wfHxRLm5vdygpO3RoaXNbUS5leHBhbmRvXT10cnVlfTtRLkV2ZW50LnByb3RvdHlwZT17aXNEZWZhdWx0UHJldmVudGVkOm8xLGlzUHJvcGFnYXRpb25TdG9wcGVkOm8xLGlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkOm8xLHByZXZlbnREZWZhdWx0OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcmlnaW5hbEV2ZW50O3RoaXMuaXNEZWZhdWx0UHJldmVudGVkPW4xO2lmKCFlKXtyZXR1cm59aWYoZS5wcmV2ZW50RGVmYXVsdCl7ZS5wcmV2ZW50RGVmYXVsdCgpfWVsc2V7ZS5yZXR1cm5WYWx1ZT1mYWxzZX19LHN0b3BQcm9wYWdhdGlvbjpmdW5jdGlvbigpe3ZhciBlPXRoaXMub3JpZ2luYWxFdmVudDt0aGlzLmlzUHJvcGFnYXRpb25TdG9wcGVkPW4xO2lmKCFlKXtyZXR1cm59aWYoZS5zdG9wUHJvcGFnYXRpb24pe2Uuc3RvcFByb3BhZ2F0aW9uKCl9ZS5jYW5jZWxCdWJibGU9dHJ1ZX0sc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcmlnaW5hbEV2ZW50O3RoaXMuaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQ9bjE7aWYoZSYmZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24pe2Uuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCl9dGhpcy5zdG9wUHJvcGFnYXRpb24oKX19O1EuZWFjaCh7bW91c2VlbnRlcjoibW91c2VvdmVyIixtb3VzZWxlYXZlOiJtb3VzZW91dCIscG9pbnRlcmVudGVyOiJwb2ludGVyb3ZlciIscG9pbnRlcmxlYXZlOiJwb2ludGVyb3V0In0sZnVuY3Rpb24oYSxiKXtRLmV2ZW50LnNwZWNpYWxbYV09e2RlbGVnYXRlVHlwZTpiLGJpbmRUeXBlOmIsaGFuZGxlOmZ1bmN0aW9uKGope3ZhciByLHQ9dGhpcyxsPWoucmVsYXRlZFRhcmdldCxtPWouaGFuZGxlT2JqO2lmKCFsfHwobCE9PXQmJiFRLmNvbnRhaW5zKHQsbCkpKXtqLnR5cGU9bS5vcmlnVHlwZTtyPW0uaGFuZGxlci5hcHBseSh0aGlzLGFyZ3VtZW50cyk7ai50eXBlPWJ9cmV0dXJuIHJ9fX0pO2lmKCF4LnN1Ym1pdEJ1YmJsZXMpe1EuZXZlbnQuc3BlY2lhbC5zdWJtaXQ9e3NldHVwOmZ1bmN0aW9uKCl7aWYoUS5ub2RlTmFtZSh0aGlzLCJmb3JtIikpe3JldHVybiBmYWxzZX1RLmV2ZW50LmFkZCh0aGlzLCJjbGljay5fc3VibWl0IGtleXByZXNzLl9zdWJtaXQiLGZ1bmN0aW9uKGUpe3ZhciBhPWUudGFyZ2V0LGI9US5ub2RlTmFtZShhLCJpbnB1dCIpfHxRLm5vZGVOYW1lKGEsImJ1dHRvbiIpP2EuZm9ybTp1bmRlZmluZWQ7aWYoYiYmIVEuX2RhdGEoYiwic3VibWl0QnViYmxlcyIpKXtRLmV2ZW50LmFkZChiLCJzdWJtaXQuX3N1Ym1pdCIsZnVuY3Rpb24oail7ai5fc3VibWl0X2J1YmJsZT10cnVlfSk7US5fZGF0YShiLCJzdWJtaXRCdWJibGVzIix0cnVlKX19KX0scG9zdERpc3BhdGNoOmZ1bmN0aW9uKGEpe2lmKGEuX3N1Ym1pdF9idWJibGUpe2RlbGV0ZSBhLl9zdWJtaXRfYnViYmxlO2lmKHRoaXMucGFyZW50Tm9kZSYmIWEuaXNUcmlnZ2VyKXtRLmV2ZW50LnNpbXVsYXRlKCJzdWJtaXQiLHRoaXMucGFyZW50Tm9kZSxhLHRydWUpfX19LHRlYXJkb3duOmZ1bmN0aW9uKCl7aWYoUS5ub2RlTmFtZSh0aGlzLCJmb3JtIikpe3JldHVybiBmYWxzZX1RLmV2ZW50LnJlbW92ZSh0aGlzLCIuX3N1Ym1pdCIpfX19aWYoIXguY2hhbmdlQnViYmxlcyl7US5ldmVudC5zcGVjaWFsLmNoYW5nZT17c2V0dXA6ZnVuY3Rpb24oKXtpZihpMS50ZXN0KHRoaXMubm9kZU5hbWUpKXtpZih0aGlzLnR5cGU9PT0iY2hlY2tib3gifHx0aGlzLnR5cGU9PT0icmFkaW8iKXtRLmV2ZW50LmFkZCh0aGlzLCJwcm9wZXJ0eWNoYW5nZS5fY2hhbmdlIixmdW5jdGlvbihhKXtpZihhLm9yaWdpbmFsRXZlbnQucHJvcGVydHlOYW1lPT09ImNoZWNrZWQiKXt0aGlzLl9qdXN0X2NoYW5nZWQ9dHJ1ZX19KTtRLmV2ZW50LmFkZCh0aGlzLCJjbGljay5fY2hhbmdlIixmdW5jdGlvbihhKXtpZih0aGlzLl9qdXN0X2NoYW5nZWQmJiFhLmlzVHJpZ2dlcil7dGhpcy5fanVzdF9jaGFuZ2VkPWZhbHNlfVEuZXZlbnQuc2ltdWxhdGUoImNoYW5nZSIsdGhpcyxhLHRydWUpfSl9cmV0dXJuIGZhbHNlfVEuZXZlbnQuYWRkKHRoaXMsImJlZm9yZWFjdGl2YXRlLl9jaGFuZ2UiLGZ1bmN0aW9uKGUpe3ZhciBhPWUudGFyZ2V0O2lmKGkxLnRlc3QoYS5ub2RlTmFtZSkmJiFRLl9kYXRhKGEsImNoYW5nZUJ1YmJsZXMiKSl7US5ldmVudC5hZGQoYSwiY2hhbmdlLl9jaGFuZ2UiLGZ1bmN0aW9uKGIpe2lmKHRoaXMucGFyZW50Tm9kZSYmIWIuaXNTaW11bGF0ZWQmJiFiLmlzVHJpZ2dlcil7US5ldmVudC5zaW11bGF0ZSgiY2hhbmdlIix0aGlzLnBhcmVudE5vZGUsYix0cnVlKX19KTtRLl9kYXRhKGEsImNoYW5nZUJ1YmJsZXMiLHRydWUpfX0pfSxoYW5kbGU6ZnVuY3Rpb24oYSl7dmFyIGI9YS50YXJnZXQ7aWYodGhpcyE9PWJ8fGEuaXNTaW11bGF0ZWR8fGEuaXNUcmlnZ2VyfHwoYi50eXBlIT09InJhZGlvIiYmYi50eXBlIT09ImNoZWNrYm94Iikpe3JldHVybiBhLmhhbmRsZU9iai5oYW5kbGVyLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19LHRlYXJkb3duOmZ1bmN0aW9uKCl7US5ldmVudC5yZW1vdmUodGhpcywiLl9jaGFuZ2UiKTtyZXR1cm4haTEudGVzdCh0aGlzLm5vZGVOYW1lKX19fWlmKCF4LmZvY3VzaW5CdWJibGVzKXtRLmVhY2goe2ZvY3VzOiJmb2N1c2luIixibHVyOiJmb2N1c291dCJ9LGZ1bmN0aW9uKGEsYil7dmFyIGo9ZnVuY3Rpb24obCl7US5ldmVudC5zaW11bGF0ZShiLGwudGFyZ2V0LFEuZXZlbnQuZml4KGwpLHRydWUpfTtRLmV2ZW50LnNwZWNpYWxbYl09e3NldHVwOmZ1bmN0aW9uKCl7dmFyIGw9dGhpcy5vd25lckRvY3VtZW50fHx0aGlzLG09US5fZGF0YShsLGIpO2lmKCFtKXtsLmFkZEV2ZW50TGlzdGVuZXIoYSxqLHRydWUpfVEuX2RhdGEobCxiLChtfHwwKSsxKX0sdGVhcmRvd246ZnVuY3Rpb24oKXt2YXIgbD10aGlzLm93bmVyRG9jdW1lbnR8fHRoaXMsbT1RLl9kYXRhKGwsYiktMTtpZighbSl7bC5yZW1vdmVFdmVudExpc3RlbmVyKGEsaix0cnVlKTtRLl9yZW1vdmVEYXRhKGwsYil9ZWxzZXtRLl9kYXRhKGwsYixtKX19fX0pfVEuZm4uZXh0ZW5kKHtvbjpmdW5jdGlvbih0LHMsYSxiLGope3ZhciBsLG07aWYodHlwZW9mIHQ9PT0ib2JqZWN0Iil7aWYodHlwZW9mIHMhPT0ic3RyaW5nIil7YT1hfHxzO3M9dW5kZWZpbmVkfWZvcihsIGluIHQpe3RoaXMub24obCxzLGEsdFtsXSxqKX1yZXR1cm4gdGhpc31pZihhPT1udWxsJiZiPT1udWxsKXtiPXM7YT1zPXVuZGVmaW5lZH1lbHNlIGlmKGI9PW51bGwpe2lmKHR5cGVvZiBzPT09InN0cmluZyIpe2I9YTthPXVuZGVmaW5lZH1lbHNle2I9YTthPXM7cz11bmRlZmluZWR9fWlmKGI9PT1mYWxzZSl7Yj1vMX1lbHNlIGlmKCFiKXtyZXR1cm4gdGhpc31pZihqPT09MSl7bT1iO2I9ZnVuY3Rpb24obil7USgpLm9mZihuKTtyZXR1cm4gbS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9O2IuZ3VpZD1tLmd1aWR8fChtLmd1aWQ9US5ndWlkKyspfXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtRLmV2ZW50LmFkZCh0aGlzLHQsYixhLHMpfSl9LG9uZTpmdW5jdGlvbih0LHMsYSxiKXtyZXR1cm4gdGhpcy5vbih0LHMsYSxiLDEpfSxvZmY6ZnVuY3Rpb24odCxzLGEpe3ZhciBiLGo7aWYodCYmdC5wcmV2ZW50RGVmYXVsdCYmdC5oYW5kbGVPYmope2I9dC5oYW5kbGVPYmo7USh0LmRlbGVnYXRlVGFyZ2V0KS5vZmYoYi5uYW1lc3BhY2U/Yi5vcmlnVHlwZSsiLiIrYi5uYW1lc3BhY2U6Yi5vcmlnVHlwZSxiLnNlbGVjdG9yLGIuaGFuZGxlcik7cmV0dXJuIHRoaXN9aWYodHlwZW9mIHQ9PT0ib2JqZWN0Iil7Zm9yKGogaW4gdCl7dGhpcy5vZmYoaixzLHRbal0pfXJldHVybiB0aGlzfWlmKHM9PT1mYWxzZXx8dHlwZW9mIHM9PT0iZnVuY3Rpb24iKXthPXM7cz11bmRlZmluZWR9aWYoYT09PWZhbHNlKXthPW8xfXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtRLmV2ZW50LnJlbW92ZSh0aGlzLHQsYSxzKX0pfSx0cmlnZ2VyOmZ1bmN0aW9uKHQsYSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe1EuZXZlbnQudHJpZ2dlcih0LGEsdGhpcyl9KX0sdHJpZ2dlckhhbmRsZXI6ZnVuY3Rpb24odCxhKXt2YXIgYj10aGlzWzBdO2lmKGIpe3JldHVybiBRLmV2ZW50LnRyaWdnZXIodCxhLGIsdHJ1ZSl9fX0pO2Z1bmN0aW9uIHExKEope3ZhciBsPXIxLnNwbGl0KCJ8Iikscz1KLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtpZihzLmNyZWF0ZUVsZW1lbnQpe3doaWxlKGwubGVuZ3RoKXtzLmNyZWF0ZUVsZW1lbnQobC5wb3AoKSl9fXJldHVybiBzfXZhciByMT0iYWJicnxhcnRpY2xlfGFzaWRlfGF1ZGlvfGJkaXxjYW52YXN8ZGF0YXxkYXRhbGlzdHxkZXRhaWxzfGZpZ2NhcHRpb258ZmlndXJlfGZvb3RlcnwiKyJoZWFkZXJ8aGdyb3VwfG1hcmt8bWV0ZXJ8bmF2fG91dHB1dHxwcm9ncmVzc3xzZWN0aW9ufHN1bW1hcnl8dGltZXx2aWRlbyIsczE9LyBqUXVlcnlcZCs9Iig/Om51bGx8XGQrKSIvZyx0MT1uZXcgUmVnRXhwKCI8KD86IityMSsiKVtcXHMvPl0iLCJpIiksdTE9L15ccysvLHYxPS88KD8hYXJlYXxicnxjb2x8ZW1iZWR8aHJ8aW1nfGlucHV0fGxpbmt8bWV0YXxwYXJhbSkoKFtcdzpdKylbXj5dKilcLz4vZ2ksdzE9LzwoW1x3Ol0rKS8seDE9Lzx0Ym9keS9pLHkxPS88fCYjP1x3KzsvLHoxPS88KD86c2NyaXB0fHN0eWxlfGxpbmspL2ksQTE9L2NoZWNrZWRccyooPzpbXj1dfD1ccyouY2hlY2tlZC4pL2ksQjE9L14kfFwvKD86amF2YXxlY21hKXNjcmlwdC9pLEMxPS9edHJ1ZVwvKC4qKS8sRDE9L15ccyo8ISg/OlxbQ0RBVEFcW3wtLSl8KD86XF1cXXwtLSk+XHMqJC9nLEUxPXtvcHRpb246WzEsIjxzZWxlY3QgbXVsdGlwbGU9J211bHRpcGxlJz4iLCI8L3NlbGVjdD4iXSxsZWdlbmQ6WzEsIjxmaWVsZHNldD4iLCI8L2ZpZWxkc2V0PiJdLGFyZWE6WzEsIjxtYXA+IiwiPC9tYXA+Il0scGFyYW06WzEsIjxvYmplY3Q+IiwiPC9vYmplY3Q+Il0sdGhlYWQ6WzEsIjx0YWJsZT4iLCI8L3RhYmxlPiJdLHRyOlsyLCI8dGFibGU+PHRib2R5PiIsIjwvdGJvZHk+PC90YWJsZT4iXSxjb2w6WzIsIjx0YWJsZT48dGJvZHk+PC90Ym9keT48Y29sZ3JvdXA+IiwiPC9jb2xncm91cD48L3RhYmxlPiJdLHRkOlszLCI8dGFibGU+PHRib2R5Pjx0cj4iLCI8L3RyPjwvdGJvZHk+PC90YWJsZT4iXSxfZGVmYXVsdDp4Lmh0bWxTZXJpYWxpemU/WzAsIiIsIiJdOlsxLCJYPGRpdj4iLCI8L2Rpdj4iXX0sRjE9cTEoSiksRzE9RjEuYXBwZW5kQ2hpbGQoSi5jcmVhdGVFbGVtZW50KCJkaXYiKSk7RTEub3B0Z3JvdXA9RTEub3B0aW9uO0UxLnRib2R5PUUxLnRmb290PUUxLmNvbGdyb3VwPUUxLmNhcHRpb249RTEudGhlYWQ7RTEudGg9RTEudGQ7ZnVuY3Rpb24gSDEoYSx0KXt2YXIgYixqLGk9MCxsPXR5cGVvZiBhLmdldEVsZW1lbnRzQnlUYWdOYW1lIT09WD9hLmdldEVsZW1lbnRzQnlUYWdOYW1lKHR8fCIqIik6dHlwZW9mIGEucXVlcnlTZWxlY3RvckFsbCE9PVg/YS5xdWVyeVNlbGVjdG9yQWxsKHR8fCIqIik6dW5kZWZpbmVkO2lmKCFsKXtmb3IobD1bXSxiPWEuY2hpbGROb2Rlc3x8YTsoaj1iW2ldKSE9bnVsbDtpKyspe2lmKCF0fHxRLm5vZGVOYW1lKGosdCkpe2wucHVzaChqKX1lbHNle1EubWVyZ2UobCxIMShqLHQpKX19fXJldHVybiB0PT09dW5kZWZpbmVkfHx0JiZRLm5vZGVOYW1lKGEsdCk/US5tZXJnZShbYV0sbCk6bH1mdW5jdGlvbiBJMShhKXtpZihoMS50ZXN0KGEudHlwZSkpe2EuZGVmYXVsdENoZWNrZWQ9YS5jaGVja2VkfX1mdW5jdGlvbiBKMShhLGIpe3JldHVybiBRLm5vZGVOYW1lKGEsInRhYmxlIikmJlEubm9kZU5hbWUoYi5ub2RlVHlwZSE9PTExP2I6Yi5maXJzdENoaWxkLCJ0ciIpP2EuZ2V0RWxlbWVudHNCeVRhZ05hbWUoInRib2R5IilbMF18fGEuYXBwZW5kQ2hpbGQoYS5vd25lckRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInRib2R5IikpOmF9ZnVuY3Rpb24gSzEoYSl7YS50eXBlPShRLmZpbmQuYXR0cihhLCJ0eXBlIikhPT1udWxsKSsiLyIrYS50eXBlO3JldHVybiBhfWZ1bmN0aW9uIEwxKGEpe3ZhciBtPUMxLmV4ZWMoYS50eXBlKTtpZihtKXthLnR5cGU9bVsxXX1lbHNle2EucmVtb3ZlQXR0cmlidXRlKCJ0eXBlIil9cmV0dXJuIGF9ZnVuY3Rpb24gTTEoYSxyKXt2YXIgYixpPTA7Zm9yKDsoYj1hW2ldKSE9bnVsbDtpKyspe1EuX2RhdGEoYiwiZ2xvYmFsRXZhbCIsIXJ8fFEuX2RhdGEocltpXSwiZ2xvYmFsRXZhbCIpKX19ZnVuY3Rpb24gTjEocyxhKXtpZihhLm5vZGVUeXBlIT09MXx8IVEuaGFzRGF0YShzKSl7cmV0dXJufXZhciB0LGksbCxiPVEuX2RhdGEocyksaj1RLl9kYXRhKGEsYiksbT1iLmV2ZW50cztpZihtKXtkZWxldGUgai5oYW5kbGU7ai5ldmVudHM9e307Zm9yKHQgaW4gbSl7Zm9yKGk9MCxsPW1bdF0ubGVuZ3RoO2k8bDtpKyspe1EuZXZlbnQuYWRkKGEsdCxtW3RdW2ldKX19fWlmKGouZGF0YSl7ai5kYXRhPVEuZXh0ZW5kKHt9LGouZGF0YSl9fWZ1bmN0aW9uIE8xKHMsYSl7dmFyIG4sZSxiO2lmKGEubm9kZVR5cGUhPT0xKXtyZXR1cm59bj1hLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7aWYoIXgubm9DbG9uZUV2ZW50JiZhW1EuZXhwYW5kb10pe2I9US5fZGF0YShhKTtmb3IoZSBpbiBiLmV2ZW50cyl7US5yZW1vdmVFdmVudChhLGUsYi5oYW5kbGUpfWEucmVtb3ZlQXR0cmlidXRlKFEuZXhwYW5kbyl9aWYobj09PSJzY3JpcHQiJiZhLnRleHQhPT1zLnRleHQpe0sxKGEpLnRleHQ9cy50ZXh0O0wxKGEpfWVsc2UgaWYobj09PSJvYmplY3QiKXtpZihhLnBhcmVudE5vZGUpe2Eub3V0ZXJIVE1MPXMub3V0ZXJIVE1MfWlmKHguaHRtbDVDbG9uZSYmKHMuaW5uZXJIVE1MJiYhUS50cmltKGEuaW5uZXJIVE1MKSkpe2EuaW5uZXJIVE1MPXMuaW5uZXJIVE1MfX1lbHNlIGlmKG49PT0iaW5wdXQiJiZoMS50ZXN0KHMudHlwZSkpe2EuZGVmYXVsdENoZWNrZWQ9YS5jaGVja2VkPXMuY2hlY2tlZDtpZihhLnZhbHVlIT09cy52YWx1ZSl7YS52YWx1ZT1zLnZhbHVlfX1lbHNlIGlmKG49PT0ib3B0aW9uIil7YS5kZWZhdWx0U2VsZWN0ZWQ9YS5zZWxlY3RlZD1zLmRlZmF1bHRTZWxlY3RlZH1lbHNlIGlmKG49PT0iaW5wdXQifHxuPT09InRleHRhcmVhIil7YS5kZWZhdWx0VmFsdWU9cy5kZWZhdWx0VmFsdWV9fVEuZXh0ZW5kKHtjbG9uZTpmdW5jdGlvbihhLGIsail7dmFyIGwsbixtLGkscyxwPVEuY29udGFpbnMoYS5vd25lckRvY3VtZW50LGEpO2lmKHguaHRtbDVDbG9uZXx8US5pc1hNTERvYyhhKXx8IXQxLnRlc3QoIjwiK2Eubm9kZU5hbWUrIj4iKSl7bT1hLmNsb25lTm9kZSh0cnVlKX1lbHNle0cxLmlubmVySFRNTD1hLm91dGVySFRNTDtHMS5yZW1vdmVDaGlsZChtPUcxLmZpcnN0Q2hpbGQpfWlmKCgheC5ub0Nsb25lRXZlbnR8fCF4Lm5vQ2xvbmVDaGVja2VkKSYmKGEubm9kZVR5cGU9PT0xfHxhLm5vZGVUeXBlPT09MTEpJiYhUS5pc1hNTERvYyhhKSl7bD1IMShtKTtzPUgxKGEpO2ZvcihpPTA7KG49c1tpXSkhPW51bGw7KytpKXtpZihsW2ldKXtPMShuLGxbaV0pfX19aWYoYil7aWYoail7cz1zfHxIMShhKTtsPWx8fEgxKG0pO2ZvcihpPTA7KG49c1tpXSkhPW51bGw7aSsrKXtOMShuLGxbaV0pfX1lbHNle04xKGEsbSl9fWw9SDEobSwic2NyaXB0Iik7aWYobC5sZW5ndGg+MCl7TTEobCwhcCYmSDEoYSwic2NyaXB0IikpfWw9cz1uPW51bGw7cmV0dXJuIG19LGJ1aWxkRnJhZ21lbnQ6ZnVuY3Rpb24oYSxiLHMsbSl7dmFyIGosbixwLHQscix2LF8sbD1hLmxlbmd0aCxyMz1xMShiKSxzMz1bXSxpPTA7Zm9yKDtpPGw7aSsrKXtuPWFbaV07aWYobnx8bj09PTApe2lmKFEudHlwZShuKT09PSJvYmplY3QiKXtRLm1lcmdlKHMzLG4ubm9kZVR5cGU/W25dOm4pfWVsc2UgaWYoIXkxLnRlc3Qobikpe3MzLnB1c2goYi5jcmVhdGVUZXh0Tm9kZShuKSl9ZWxzZXt0PXR8fHIzLmFwcGVuZENoaWxkKGIuY3JlYXRlRWxlbWVudCgiZGl2IikpO3I9KHcxLmV4ZWMobil8fFsiIiwiIl0pWzFdLnRvTG93ZXJDYXNlKCk7Xz1FMVtyXXx8RTEuX2RlZmF1bHQ7dC5pbm5lckhUTUw9X1sxXStuLnJlcGxhY2UodjEsIjwkMT48LyQyPiIpK19bMl07aj1fWzBdO3doaWxlKGotLSl7dD10Lmxhc3RDaGlsZH1pZigheC5sZWFkaW5nV2hpdGVzcGFjZSYmdTEudGVzdChuKSl7czMucHVzaChiLmNyZWF0ZVRleHROb2RlKHUxLmV4ZWMobilbMF0pKX1pZigheC50Ym9keSl7bj1yPT09InRhYmxlIiYmIXgxLnRlc3Qobik/dC5maXJzdENoaWxkOl9bMV09PT0iPHRhYmxlPiImJiF4MS50ZXN0KG4pP3Q6MDtqPW4mJm4uY2hpbGROb2Rlcy5sZW5ndGg7d2hpbGUoai0tKXtpZihRLm5vZGVOYW1lKCh2PW4uY2hpbGROb2Rlc1tqXSksInRib2R5IikmJiF2LmNoaWxkTm9kZXMubGVuZ3RoKXtuLnJlbW92ZUNoaWxkKHYpfX19US5tZXJnZShzMyx0LmNoaWxkTm9kZXMpO3QudGV4dENvbnRlbnQ9IiI7d2hpbGUodC5maXJzdENoaWxkKXt0LnJlbW92ZUNoaWxkKHQuZmlyc3RDaGlsZCl9dD1yMy5sYXN0Q2hpbGR9fX1pZih0KXtyMy5yZW1vdmVDaGlsZCh0KX1pZigheC5hcHBlbmRDaGVja2VkKXtRLmdyZXAoSDEoczMsImlucHV0IiksSTEpfWk9MDt3aGlsZSgobj1zM1tpKytdKSl7aWYobSYmUS5pbkFycmF5KG4sbSkhPT0tMSl7Y29udGludWV9cD1RLmNvbnRhaW5zKG4ub3duZXJEb2N1bWVudCxuKTt0PUgxKHIzLmFwcGVuZENoaWxkKG4pLCJzY3JpcHQiKTtpZihwKXtNMSh0KX1pZihzKXtqPTA7d2hpbGUoKG49dFtqKytdKSl7aWYoQjEudGVzdChuLnR5cGV8fCIiKSl7cy5wdXNoKG4pfX19fXQ9bnVsbDtyZXR1cm4gcjN9LGNsZWFuRGF0YTpmdW5jdGlvbihhLGIpe3ZhciBqLHQsbCxtLGk9MCxuPVEuZXhwYW5kbyxwPVEuY2FjaGUscj14LmRlbGV0ZUV4cGFuZG8scz1RLmV2ZW50LnNwZWNpYWw7Zm9yKDsoaj1hW2ldKSE9bnVsbDtpKyspe2lmKGJ8fFEuYWNjZXB0RGF0YShqKSl7bD1qW25dO209bCYmcFtsXTtpZihtKXtpZihtLmV2ZW50cyl7Zm9yKHQgaW4gbS5ldmVudHMpe2lmKHNbdF0pe1EuZXZlbnQucmVtb3ZlKGosdCl9ZWxzZXtRLnJlbW92ZUV2ZW50KGosdCxtLmhhbmRsZSl9fX1pZihwW2xdKXtkZWxldGUgcFtsXTtpZihyKXtkZWxldGUgaltuXX1lbHNlIGlmKHR5cGVvZiBqLnJlbW92ZUF0dHJpYnV0ZSE9PVgpe2oucmVtb3ZlQXR0cmlidXRlKG4pfWVsc2V7altuXT1udWxsfWQucHVzaChsKX19fX19fSk7US5mbi5leHRlbmQoe3RleHQ6ZnVuY3Rpb24odil7cmV0dXJuIGcxKHRoaXMsZnVuY3Rpb24odil7cmV0dXJuIHY9PT11bmRlZmluZWQ/US50ZXh0KHRoaXMpOnRoaXMuZW1wdHkoKS5hcHBlbmQoKHRoaXNbMF0mJnRoaXNbMF0ub3duZXJEb2N1bWVudHx8SikuY3JlYXRlVGV4dE5vZGUodikpfSxudWxsLHYsYXJndW1lbnRzLmxlbmd0aCl9LGFwcGVuZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRvbU1hbmlwKGFyZ3VtZW50cyxmdW5jdGlvbihhKXtpZih0aGlzLm5vZGVUeXBlPT09MXx8dGhpcy5ub2RlVHlwZT09PTExfHx0aGlzLm5vZGVUeXBlPT09OSl7dmFyIHQ9SjEodGhpcyxhKTt0LmFwcGVuZENoaWxkKGEpfX0pfSxwcmVwZW5kOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZG9tTWFuaXAoYXJndW1lbnRzLGZ1bmN0aW9uKGEpe2lmKHRoaXMubm9kZVR5cGU9PT0xfHx0aGlzLm5vZGVUeXBlPT09MTF8fHRoaXMubm9kZVR5cGU9PT05KXt2YXIgdD1KMSh0aGlzLGEpO3QuaW5zZXJ0QmVmb3JlKGEsdC5maXJzdENoaWxkKX19KX0sYmVmb3JlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZG9tTWFuaXAoYXJndW1lbnRzLGZ1bmN0aW9uKGEpe2lmKHRoaXMucGFyZW50Tm9kZSl7dGhpcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZShhLHRoaXMpfX0pfSxhZnRlcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRvbU1hbmlwKGFyZ3VtZW50cyxmdW5jdGlvbihhKXtpZih0aGlzLnBhcmVudE5vZGUpe3RoaXMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoYSx0aGlzLm5leHRTaWJsaW5nKX19KX0scmVtb3ZlOmZ1bmN0aW9uKHMsYSl7dmFyIGIsaj1zP1EuZmlsdGVyKHMsdGhpcyk6dGhpcyxpPTA7Zm9yKDsoYj1qW2ldKSE9bnVsbDtpKyspe2lmKCFhJiZiLm5vZGVUeXBlPT09MSl7US5jbGVhbkRhdGEoSDEoYikpfWlmKGIucGFyZW50Tm9kZSl7aWYoYSYmUS5jb250YWlucyhiLm93bmVyRG9jdW1lbnQsYikpe00xKEgxKGIsInNjcmlwdCIpKX1iLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYil9fXJldHVybiB0aGlzfSxlbXB0eTpmdW5jdGlvbigpe3ZhciBhLGk9MDtmb3IoOyhhPXRoaXNbaV0pIT1udWxsO2krKyl7aWYoYS5ub2RlVHlwZT09PTEpe1EuY2xlYW5EYXRhKEgxKGEsZmFsc2UpKX13aGlsZShhLmZpcnN0Q2hpbGQpe2EucmVtb3ZlQ2hpbGQoYS5maXJzdENoaWxkKX1pZihhLm9wdGlvbnMmJlEubm9kZU5hbWUoYSwic2VsZWN0Iikpe2Eub3B0aW9ucy5sZW5ndGg9MH19cmV0dXJuIHRoaXN9LGNsb25lOmZ1bmN0aW9uKGEsYil7YT1hPT1udWxsP2ZhbHNlOmE7Yj1iPT1udWxsP2E6YjtyZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24oKXtyZXR1cm4gUS5jbG9uZSh0aGlzLGEsYil9KX0saHRtbDpmdW5jdGlvbih2KXtyZXR1cm4gZzEodGhpcyxmdW5jdGlvbih2KXt2YXIgYT10aGlzWzBdfHx7fSxpPTAsbD10aGlzLmxlbmd0aDtpZih2PT09dW5kZWZpbmVkKXtyZXR1cm4gYS5ub2RlVHlwZT09PTE/YS5pbm5lckhUTUwucmVwbGFjZShzMSwiIik6dW5kZWZpbmVkfWlmKHR5cGVvZiB2PT09InN0cmluZyImJiF6MS50ZXN0KHYpJiYoeC5odG1sU2VyaWFsaXplfHwhdDEudGVzdCh2KSkmJih4LmxlYWRpbmdXaGl0ZXNwYWNlfHwhdTEudGVzdCh2KSkmJiFFMVsodzEuZXhlYyh2KXx8WyIiLCIiXSlbMV0udG9Mb3dlckNhc2UoKV0pe3Y9di5yZXBsYWNlKHYxLCI8JDE+PC8kMj4iKTt0cnl7Zm9yKDtpPGw7aSsrKXthPXRoaXNbaV18fHt9O2lmKGEubm9kZVR5cGU9PT0xKXtRLmNsZWFuRGF0YShIMShhLGZhbHNlKSk7YS5pbm5lckhUTUw9dn19YT0wfWNhdGNoKGUpe319aWYoYSl7dGhpcy5lbXB0eSgpLmFwcGVuZCh2KX19LG51bGwsdixhcmd1bWVudHMubGVuZ3RoKX0scmVwbGFjZVdpdGg6ZnVuY3Rpb24oKXt2YXIgYT1hcmd1bWVudHNbMF07dGhpcy5kb21NYW5pcChhcmd1bWVudHMsZnVuY3Rpb24oYil7YT10aGlzLnBhcmVudE5vZGU7US5jbGVhbkRhdGEoSDEodGhpcykpO2lmKGEpe2EucmVwbGFjZUNoaWxkKGIsdGhpcyl9fSk7cmV0dXJuIGEmJihhLmxlbmd0aHx8YS5ub2RlVHlwZSk/dGhpczp0aGlzLnJlbW92ZSgpfSxkZXRhY2g6ZnVuY3Rpb24ocyl7cmV0dXJuIHRoaXMucmVtb3ZlKHMsdHJ1ZSl9LGRvbU1hbmlwOmZ1bmN0aW9uKGEsYil7YT1nLmFwcGx5KFtdLGEpO3ZhciBqLG4sbSxzLHAscixpPTAsbD10aGlzLmxlbmd0aCx0PXRoaXMsdj1sLTEsXz1hWzBdLHIzPVEuaXNGdW5jdGlvbihfKTtpZihyM3x8KGw+MSYmdHlwZW9mIF89PT0ic3RyaW5nIiYmIXguY2hlY2tDbG9uZSYmQTEudGVzdChfKSkpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oczMpe3ZhciB0Mz10LmVxKHMzKTtpZihyMyl7YVswXT1fLmNhbGwodGhpcyxzMyx0My5odG1sKCkpfXQzLmRvbU1hbmlwKGEsYil9KX1pZihsKXtyPVEuYnVpbGRGcmFnbWVudChhLHRoaXNbMF0ub3duZXJEb2N1bWVudCxmYWxzZSx0aGlzKTtqPXIuZmlyc3RDaGlsZDtpZihyLmNoaWxkTm9kZXMubGVuZ3RoPT09MSl7cj1qfWlmKGope3M9US5tYXAoSDEociwic2NyaXB0IiksSzEpO209cy5sZW5ndGg7Zm9yKDtpPGw7aSsrKXtuPXI7aWYoaSE9PXYpe249US5jbG9uZShuLHRydWUsdHJ1ZSk7aWYobSl7US5tZXJnZShzLEgxKG4sInNjcmlwdCIpKX19Yi5jYWxsKHRoaXNbaV0sbixpKX1pZihtKXtwPXNbcy5sZW5ndGgtMV0ub3duZXJEb2N1bWVudDtRLm1hcChzLEwxKTtmb3IoaT0wO2k8bTtpKyspe249c1tpXTtpZihCMS50ZXN0KG4udHlwZXx8IiIpJiYhUS5fZGF0YShuLCJnbG9iYWxFdmFsIikmJlEuY29udGFpbnMocCxuKSl7aWYobi5zcmMpe2lmKFEuX2V2YWxVcmwpe1EuX2V2YWxVcmwobi5zcmMpfX1lbHNle1EuZ2xvYmFsRXZhbCgobi50ZXh0fHxuLnRleHRDb250ZW50fHxuLmlubmVySFRNTHx8IiIpLnJlcGxhY2UoRDEsIiIpKX19fX1yPWo9bnVsbH19cmV0dXJuIHRoaXN9fSk7US5lYWNoKHthcHBlbmRUbzoiYXBwZW5kIixwcmVwZW5kVG86InByZXBlbmQiLGluc2VydEJlZm9yZToiYmVmb3JlIixpbnNlcnRBZnRlcjoiYWZ0ZXIiLHJlcGxhY2VBbGw6InJlcGxhY2VXaXRoIn0sZnVuY3Rpb24obixhKXtRLmZuW25dPWZ1bmN0aW9uKHMpe3ZhciBiLGk9MCxyPVtdLGo9UShzKSxsPWoubGVuZ3RoLTE7Zm9yKDtpPD1sO2krKyl7Yj1pPT09bD90aGlzOnRoaXMuY2xvbmUodHJ1ZSk7UShqW2ldKVthXShiKTtoLmFwcGx5KHIsYi5nZXQoKSl9cmV0dXJuIHRoaXMucHVzaFN0YWNrKHIpfX0pO3ZhciBQMSxRMT17fTtmdW5jdGlvbiBSMShuLGEpe3ZhciBzLGI9UShhLmNyZWF0ZUVsZW1lbnQobikpLmFwcGVuZFRvKGEuYm9keSksaj13LmdldERlZmF1bHRDb21wdXRlZFN0eWxlJiYocz13LmdldERlZmF1bHRDb21wdXRlZFN0eWxlKGJbMF0pKT9zLmRpc3BsYXk6US5jc3MoYlswXSwiZGlzcGxheSIpO2IuZGV0YWNoKCk7cmV0dXJuIGp9ZnVuY3Rpb24gUzEobil7dmFyIGE9SixiPVExW25dO2lmKCFiKXtiPVIxKG4sYSk7aWYoYj09PSJub25lInx8IWIpe1AxPShQMXx8USgiPGlmcmFtZSBmcmFtZWJvcmRlcj0nMCcgd2lkdGg9JzAnIGhlaWdodD0nMCcvPiIpKS5hcHBlbmRUbyhhLmRvY3VtZW50RWxlbWVudCk7YT0oUDFbMF0uY29udGVudFdpbmRvd3x8UDFbMF0uY29udGVudERvY3VtZW50KS5kb2N1bWVudDthLndyaXRlKCk7YS5jbG9zZSgpO2I9UjEobixhKTtQMS5kZXRhY2goKX1RMVtuXT1ifXJldHVybiBifShmdW5jdGlvbigpe3ZhciBzO3guc2hyaW5rV3JhcEJsb2Nrcz1mdW5jdGlvbigpe2lmKHMhPW51bGwpe3JldHVybiBzfXM9ZmFsc2U7dmFyIGEsYixqO2I9Si5nZXRFbGVtZW50c0J5VGFnTmFtZSgiYm9keSIpWzBdO2lmKCFifHwhYi5zdHlsZSl7cmV0dXJufWE9Si5jcmVhdGVFbGVtZW50KCJkaXYiKTtqPUouY3JlYXRlRWxlbWVudCgiZGl2Iik7ai5zdHlsZS5jc3NUZXh0PSJwb3NpdGlvbjphYnNvbHV0ZTtib3JkZXI6MDt3aWR0aDowO2hlaWdodDowO3RvcDowO2xlZnQ6LTk5OTlweCI7Yi5hcHBlbmRDaGlsZChqKS5hcHBlbmRDaGlsZChhKTtpZih0eXBlb2YgYS5zdHlsZS56b29tIT09WCl7YS5zdHlsZS5jc3NUZXh0PSItd2Via2l0LWJveC1zaXppbmc6Y29udGVudC1ib3g7LW1vei1ib3gtc2l6aW5nOmNvbnRlbnQtYm94OyIrImJveC1zaXppbmc6Y29udGVudC1ib3g7ZGlzcGxheTpibG9jazttYXJnaW46MDtib3JkZXI6MDsiKyJwYWRkaW5nOjFweDt3aWR0aDoxcHg7em9vbToxIjthLmFwcGVuZENoaWxkKEouY3JlYXRlRWxlbWVudCgiZGl2IikpLnN0eWxlLndpZHRoPSI1cHgiO3M9YS5vZmZzZXRXaWR0aCE9PTN9Yi5yZW1vdmVDaGlsZChqKTtyZXR1cm4gc319KSgpO3ZhciBUMT0oL15tYXJnaW4vKTt2YXIgVTE9bmV3IFJlZ0V4cCgiXigiK2QxKyIpKD8hcHgpW2EteiVdKyQiLCJpIik7dmFyIFYxLFcxLFgxPS9eKHRvcHxyaWdodHxib3R0b218bGVmdCkkLztpZih3LmdldENvbXB1dGVkU3R5bGUpe1YxPWZ1bmN0aW9uKGEpe3JldHVybiBhLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcuZ2V0Q29tcHV0ZWRTdHlsZShhLG51bGwpfTtXMT1mdW5jdGlvbihhLG4sYil7dmFyIGosbSxsLHIscz1hLnN0eWxlO2I9Ynx8VjEoYSk7cj1iP2IuZ2V0UHJvcGVydHlWYWx1ZShuKXx8YltuXTp1bmRlZmluZWQ7aWYoYil7aWYocj09PSIiJiYhUS5jb250YWlucyhhLm93bmVyRG9jdW1lbnQsYSkpe3I9US5zdHlsZShhLG4pfWlmKFUxLnRlc3QocikmJlQxLnRlc3Qobikpe2o9cy53aWR0aDttPXMubWluV2lkdGg7bD1zLm1heFdpZHRoO3MubWluV2lkdGg9cy5tYXhXaWR0aD1zLndpZHRoPXI7cj1iLndpZHRoO3Mud2lkdGg9ajtzLm1pbldpZHRoPW07cy5tYXhXaWR0aD1sfX1yZXR1cm4gcj09PXVuZGVmaW5lZD9yOnIrIiJ9fWVsc2UgaWYoSi5kb2N1bWVudEVsZW1lbnQuY3VycmVudFN0eWxlKXtWMT1mdW5jdGlvbihhKXtyZXR1cm4gYS5jdXJyZW50U3R5bGV9O1cxPWZ1bmN0aW9uKGEsbixiKXt2YXIgbCxyLGosbSxzPWEuc3R5bGU7Yj1ifHxWMShhKTttPWI/YltuXTp1bmRlZmluZWQ7aWYobT09bnVsbCYmcyYmc1tuXSl7bT1zW25dfWlmKFUxLnRlc3QobSkmJiFYMS50ZXN0KG4pKXtsPXMubGVmdDtyPWEucnVudGltZVN0eWxlO2o9ciYmci5sZWZ0O2lmKGope3IubGVmdD1hLmN1cnJlbnRTdHlsZS5sZWZ0fXMubGVmdD1uPT09ImZvbnRTaXplIj8iMWVtIjptO209cy5waXhlbExlZnQrInB4IjtzLmxlZnQ9bDtpZihqKXtyLmxlZnQ9an19cmV0dXJuIG09PT11bmRlZmluZWQ/bTptKyIifHwiYXV0byJ9fWZ1bmN0aW9uIFkxKGEsYil7cmV0dXJue2dldDpmdW5jdGlvbigpe3ZhciBqPWEoKTtpZihqPT1udWxsKXtyZXR1cm59aWYoail7ZGVsZXRlIHRoaXMuZ2V0O3JldHVybn1yZXR1cm4odGhpcy5nZXQ9YikuYXBwbHkodGhpcyxhcmd1bWVudHMpfX19KGZ1bmN0aW9uKCl7dmFyIGIscyxhLHAsaixyLGw7Yj1KLmNyZWF0ZUVsZW1lbnQoImRpdiIpO2IuaW5uZXJIVE1MPSIgIDxsaW5rLz48dGFibGU+PC90YWJsZT48YSBocmVmPScvYSc+YTwvYT48aW5wdXQgdHlwZT0nY2hlY2tib3gnLz4iO2E9Yi5nZXRFbGVtZW50c0J5VGFnTmFtZSgiYSIpWzBdO3M9YSYmYS5zdHlsZTtpZighcyl7cmV0dXJufXMuY3NzVGV4dD0iZmxvYXQ6bGVmdDtvcGFjaXR5Oi41Ijt4Lm9wYWNpdHk9cy5vcGFjaXR5PT09IjAuNSI7eC5jc3NGbG9hdD0hIXMuY3NzRmxvYXQ7Yi5zdHlsZS5iYWNrZ3JvdW5kQ2xpcD0iY29udGVudC1ib3giO2IuY2xvbmVOb2RlKHRydWUpLnN0eWxlLmJhY2tncm91bmRDbGlwPSIiO3guY2xlYXJDbG9uZVN0eWxlPWIuc3R5bGUuYmFja2dyb3VuZENsaXA9PT0iY29udGVudC1ib3giO3guYm94U2l6aW5nPXMuYm94U2l6aW5nPT09IiJ8fHMuTW96Qm94U2l6aW5nPT09IiJ8fHMuV2Via2l0Qm94U2l6aW5nPT09IiI7US5leHRlbmQoeCx7cmVsaWFibGVIaWRkZW5PZmZzZXRzOmZ1bmN0aW9uKCl7aWYocj09bnVsbCl7bSgpfXJldHVybiByfSxib3hTaXppbmdSZWxpYWJsZTpmdW5jdGlvbigpe2lmKGo9PW51bGwpe20oKX1yZXR1cm4gan0scGl4ZWxQb3NpdGlvbjpmdW5jdGlvbigpe2lmKHA9PW51bGwpe20oKX1yZXR1cm4gcH0scmVsaWFibGVNYXJnaW5SaWdodDpmdW5jdGlvbigpe2lmKGw9PW51bGwpe20oKX1yZXR1cm4gbH19KTtmdW5jdGlvbiBtKCl7dmFyIGIsbix0LHY7bj1KLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJib2R5IilbMF07aWYoIW58fCFuLnN0eWxlKXtyZXR1cm59Yj1KLmNyZWF0ZUVsZW1lbnQoImRpdiIpO3Q9Si5jcmVhdGVFbGVtZW50KCJkaXYiKTt0LnN0eWxlLmNzc1RleHQ9InBvc2l0aW9uOmFic29sdXRlO2JvcmRlcjowO3dpZHRoOjA7aGVpZ2h0OjA7dG9wOjA7bGVmdDotOTk5OXB4IjtuLmFwcGVuZENoaWxkKHQpLmFwcGVuZENoaWxkKGIpO2Iuc3R5bGUuY3NzVGV4dD0iLXdlYmtpdC1ib3gtc2l6aW5nOmJvcmRlci1ib3g7LW1vei1ib3gtc2l6aW5nOmJvcmRlci1ib3g7IisiYm94LXNpemluZzpib3JkZXItYm94O2Rpc3BsYXk6YmxvY2s7bWFyZ2luLXRvcDoxJTt0b3A6MSU7IisiYm9yZGVyOjFweDtwYWRkaW5nOjFweDt3aWR0aDo0cHg7cG9zaXRpb246YWJzb2x1dGUiO3A9aj1mYWxzZTtsPXRydWU7aWYody5nZXRDb21wdXRlZFN0eWxlKXtwPSh3LmdldENvbXB1dGVkU3R5bGUoYixudWxsKXx8e30pLnRvcCE9PSIxJSI7aj0ody5nZXRDb21wdXRlZFN0eWxlKGIsbnVsbCl8fHt3aWR0aDoiNHB4In0pLndpZHRoPT09IjRweCI7dj1iLmFwcGVuZENoaWxkKEouY3JlYXRlRWxlbWVudCgiZGl2IikpO3Yuc3R5bGUuY3NzVGV4dD1iLnN0eWxlLmNzc1RleHQ9Ii13ZWJraXQtYm94LXNpemluZzpjb250ZW50LWJveDstbW96LWJveC1zaXppbmc6Y29udGVudC1ib3g7IisiYm94LXNpemluZzpjb250ZW50LWJveDtkaXNwbGF5OmJsb2NrO21hcmdpbjowO2JvcmRlcjowO3BhZGRpbmc6MCI7di5zdHlsZS5tYXJnaW5SaWdodD12LnN0eWxlLndpZHRoPSIwIjtiLnN0eWxlLndpZHRoPSIxcHgiO2w9IXBhcnNlRmxvYXQoKHcuZ2V0Q29tcHV0ZWRTdHlsZSh2LG51bGwpfHx7fSkubWFyZ2luUmlnaHQpfWIuaW5uZXJIVE1MPSI8dGFibGU+PHRyPjx0ZD48L3RkPjx0ZD50PC90ZD48L3RyPjwvdGFibGU+Ijt2PWIuZ2V0RWxlbWVudHNCeVRhZ05hbWUoInRkIik7dlswXS5zdHlsZS5jc3NUZXh0PSJtYXJnaW46MDtib3JkZXI6MDtwYWRkaW5nOjA7ZGlzcGxheTpub25lIjtyPXZbMF0ub2Zmc2V0SGVpZ2h0PT09MDtpZihyKXt2WzBdLnN0eWxlLmRpc3BsYXk9IiI7dlsxXS5zdHlsZS5kaXNwbGF5PSJub25lIjtyPXZbMF0ub2Zmc2V0SGVpZ2h0PT09MH1uLnJlbW92ZUNoaWxkKHQpfX0pKCk7US5zd2FwPWZ1bmN0aW9uKGEsYixqLGwpe3ZhciByLG4sbT17fTtmb3IobiBpbiBiKXttW25dPWEuc3R5bGVbbl07YS5zdHlsZVtuXT1iW25dfXI9ai5hcHBseShhLGx8fFtdKTtmb3IobiBpbiBiKXthLnN0eWxlW25dPW1bbl19cmV0dXJuIHJ9O3ZhciBaMT0vYWxwaGFcKFteKV0qXCkvaSwkMT0vb3BhY2l0eVxzKj1ccyooW14pXSopLyxfMT0vXihub25lfHRhYmxlKD8hLWNbZWFdKS4rKS8sYTI9bmV3IFJlZ0V4cCgiXigiK2QxKyIpKC4qKSQiLCJpIiksYjI9bmV3IFJlZ0V4cCgiXihbKy1dKT0oIitkMSsiKSIsImkiKSxjMj17cG9zaXRpb246ImFic29sdXRlIix2aXNpYmlsaXR5OiJoaWRkZW4iLGRpc3BsYXk6ImJsb2NrIn0sZDI9e2xldHRlclNwYWNpbmc6IjAiLGZvbnRXZWlnaHQ6IjQwMCJ9LGUyPVsiV2Via2l0IiwiTyIsIk1veiIsIm1zIl07ZnVuY3Rpb24gZjIocyxuKXtpZihuIGluIHMpe3JldHVybiBufXZhciBhPW4uY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrbi5zbGljZSgxKSxiPW4saT1lMi5sZW5ndGg7d2hpbGUoaS0tKXtuPWUyW2ldK2E7aWYobiBpbiBzKXtyZXR1cm4gbn19cmV0dXJuIGJ9ZnVuY3Rpb24gZzIoYSxzKXt2YXIgYixqLGwsdj1bXSxtPTAsbj1hLmxlbmd0aDtmb3IoO208bjttKyspe2o9YVttXTtpZighai5zdHlsZSl7Y29udGludWV9dlttXT1RLl9kYXRhKGosIm9sZGRpc3BsYXkiKTtiPWouc3R5bGUuZGlzcGxheTtpZihzKXtpZighdlttXSYmYj09PSJub25lIil7ai5zdHlsZS5kaXNwbGF5PSIifWlmKGouc3R5bGUuZGlzcGxheT09PSIiJiZmMShqKSl7dlttXT1RLl9kYXRhKGosIm9sZGRpc3BsYXkiLFMxKGoubm9kZU5hbWUpKX19ZWxzZXtsPWYxKGopO2lmKGImJmIhPT0ibm9uZSJ8fCFsKXtRLl9kYXRhKGosIm9sZGRpc3BsYXkiLGw/YjpRLmNzcyhqLCJkaXNwbGF5IikpfX19Zm9yKG09MDttPG47bSsrKXtqPWFbbV07aWYoIWouc3R5bGUpe2NvbnRpbnVlfWlmKCFzfHxqLnN0eWxlLmRpc3BsYXk9PT0ibm9uZSJ8fGouc3R5bGUuZGlzcGxheT09PSIiKXtqLnN0eWxlLmRpc3BsYXk9cz92W21dfHwiIjoibm9uZSJ9fXJldHVybiBhfWZ1bmN0aW9uIGgyKGEsdixzKXt2YXIgbT1hMi5leGVjKHYpO3JldHVybiBtP01hdGgubWF4KDAsbVsxXS0oc3x8MCkpKyhtWzJdfHwicHgiKTp2fWZ1bmN0aW9uIGkyKGEsbixiLGoscyl7dmFyIGk9Yj09PShqPyJib3JkZXIiOiJjb250ZW50Iik/NDpuPT09IndpZHRoIj8xOjAsdj0wO2Zvcig7aTw0O2krPTIpe2lmKGI9PT0ibWFyZ2luIil7dis9US5jc3MoYSxiK2UxW2ldLHRydWUscyl9aWYoail7aWYoYj09PSJjb250ZW50Iil7di09US5jc3MoYSwicGFkZGluZyIrZTFbaV0sdHJ1ZSxzKX1pZihiIT09Im1hcmdpbiIpe3YtPVEuY3NzKGEsImJvcmRlciIrZTFbaV0rIldpZHRoIix0cnVlLHMpfX1lbHNle3YrPVEuY3NzKGEsInBhZGRpbmciK2UxW2ldLHRydWUscyk7aWYoYiE9PSJwYWRkaW5nIil7dis9US5jc3MoYSwiYm9yZGVyIitlMVtpXSsiV2lkdGgiLHRydWUscyl9fX1yZXR1cm4gdn1mdW5jdGlvbiBqMihhLG4sYil7dmFyIHY9dHJ1ZSxqPW49PT0id2lkdGgiP2Eub2Zmc2V0V2lkdGg6YS5vZmZzZXRIZWlnaHQscz1WMShhKSxsPXguYm94U2l6aW5nJiZRLmNzcyhhLCJib3hTaXppbmciLGZhbHNlLHMpPT09ImJvcmRlci1ib3giO2lmKGo8PTB8fGo9PW51bGwpe2o9VzEoYSxuLHMpO2lmKGo8MHx8aj09bnVsbCl7aj1hLnN0eWxlW25dfWlmKFUxLnRlc3Qoaikpe3JldHVybiBqfXY9bCYmKHguYm94U2l6aW5nUmVsaWFibGUoKXx8aj09PWEuc3R5bGVbbl0pO2o9cGFyc2VGbG9hdChqKXx8MH1yZXR1cm4oaitpMihhLG4sYnx8KGw/ImJvcmRlciI6ImNvbnRlbnQiKSx2LHMpKSsicHgifVEuZXh0ZW5kKHtjc3NIb29rczp7b3BhY2l0eTp7Z2V0OmZ1bmN0aW9uKGEsYil7aWYoYil7dmFyIHI9VzEoYSwib3BhY2l0eSIpO3JldHVybiByPT09IiI/IjEiOnJ9fX19LGNzc051bWJlcjp7ImNvbHVtbkNvdW50Ijp0cnVlLCJmaWxsT3BhY2l0eSI6dHJ1ZSwiZmxleEdyb3ciOnRydWUsImZsZXhTaHJpbmsiOnRydWUsImZvbnRXZWlnaHQiOnRydWUsImxpbmVIZWlnaHQiOnRydWUsIm9wYWNpdHkiOnRydWUsIm9yZGVyIjp0cnVlLCJvcnBoYW5zIjp0cnVlLCJ3aWRvd3MiOnRydWUsInpJbmRleCI6dHJ1ZSwiem9vbSI6dHJ1ZX0sY3NzUHJvcHM6eyJmbG9hdCI6eC5jc3NGbG9hdD8iY3NzRmxvYXQiOiJzdHlsZUZsb2F0In0sc3R5bGU6ZnVuY3Rpb24oYSxuLHYsYil7aWYoIWF8fGEubm9kZVR5cGU9PT0zfHxhLm5vZGVUeXBlPT09OHx8IWEuc3R5bGUpe3JldHVybn12YXIgcix0LGosbD1RLmNhbWVsQ2FzZShuKSxzPWEuc3R5bGU7bj1RLmNzc1Byb3BzW2xdfHwoUS5jc3NQcm9wc1tsXT1mMihzLGwpKTtqPVEuY3NzSG9va3Nbbl18fFEuY3NzSG9va3NbbF07aWYodiE9PXVuZGVmaW5lZCl7dD10eXBlb2YgdjtpZih0PT09InN0cmluZyImJihyPWIyLmV4ZWModikpKXt2PShyWzFdKzEpKnJbMl0rcGFyc2VGbG9hdChRLmNzcyhhLG4pKTt0PSJudW1iZXIifWlmKHY9PW51bGx8fHYhPT12KXtyZXR1cm59aWYodD09PSJudW1iZXIiJiYhUS5jc3NOdW1iZXJbbF0pe3YrPSJweCJ9aWYoIXguY2xlYXJDbG9uZVN0eWxlJiZ2PT09IiImJm4uaW5kZXhPZigiYmFja2dyb3VuZCIpPT09MCl7c1tuXT0iaW5oZXJpdCJ9aWYoIWp8fCEoInNldCJpbiBqKXx8KHY9ai5zZXQoYSx2LGIpKSE9PXVuZGVmaW5lZCl7dHJ5e3Nbbl09dn1jYXRjaChlKXt9fX1lbHNle2lmKGomJiJnZXQiaW4gaiYmKHI9ai5nZXQoYSxmYWxzZSxiKSkhPT11bmRlZmluZWQpe3JldHVybiByfXJldHVybiBzW25dfX0sY3NzOmZ1bmN0aW9uKGEsbixiLHMpe3ZhciBqLHYsbCxtPVEuY2FtZWxDYXNlKG4pO249US5jc3NQcm9wc1ttXXx8KFEuY3NzUHJvcHNbbV09ZjIoYS5zdHlsZSxtKSk7bD1RLmNzc0hvb2tzW25dfHxRLmNzc0hvb2tzW21dO2lmKGwmJiJnZXQiaW4gbCl7dj1sLmdldChhLHRydWUsYil9aWYodj09PXVuZGVmaW5lZCl7dj1XMShhLG4scyl9aWYodj09PSJub3JtYWwiJiZuIGluIGQyKXt2PWQyW25dfWlmKGI9PT0iInx8Yil7aj1wYXJzZUZsb2F0KHYpO3JldHVybiBiPT09dHJ1ZXx8US5pc051bWVyaWMoaik/anx8MDp2fXJldHVybiB2fX0pO1EuZWFjaChbImhlaWdodCIsIndpZHRoIl0sZnVuY3Rpb24oaSxuKXtRLmNzc0hvb2tzW25dPXtnZXQ6ZnVuY3Rpb24oYSxiLGope2lmKGIpe3JldHVybiBfMS50ZXN0KFEuY3NzKGEsImRpc3BsYXkiKSkmJmEub2Zmc2V0V2lkdGg9PT0wP1Euc3dhcChhLGMyLGZ1bmN0aW9uKCl7cmV0dXJuIGoyKGEsbixqKX0pOmoyKGEsbixqKX19LHNldDpmdW5jdGlvbihhLHYsYil7dmFyIHM9YiYmVjEoYSk7cmV0dXJuIGgyKGEsdixiP2kyKGEsbixiLHguYm94U2l6aW5nJiZRLmNzcyhhLCJib3hTaXppbmciLGZhbHNlLHMpPT09ImJvcmRlci1ib3giLHMpOjApfX19KTtpZigheC5vcGFjaXR5KXtRLmNzc0hvb2tzLm9wYWNpdHk9e2dldDpmdW5jdGlvbihhLGIpe3JldHVybiAkMS50ZXN0KChiJiZhLmN1cnJlbnRTdHlsZT9hLmN1cnJlbnRTdHlsZS5maWx0ZXI6YS5zdHlsZS5maWx0ZXIpfHwiIik/KDAuMDEqcGFyc2VGbG9hdChSZWdFeHAuJDEpKSsiIjpiPyIxIjoiIn0sc2V0OmZ1bmN0aW9uKGEsdil7dmFyIHM9YS5zdHlsZSxiPWEuY3VycmVudFN0eWxlLGo9US5pc051bWVyaWModik/ImFscGhhKG9wYWNpdHk9Iit2KjEwMCsiKSI6IiIsbD1iJiZiLmZpbHRlcnx8cy5maWx0ZXJ8fCIiO3Muem9vbT0xO2lmKCh2Pj0xfHx2PT09IiIpJiZRLnRyaW0obC5yZXBsYWNlKFoxLCIiKSk9PT0iIiYmcy5yZW1vdmVBdHRyaWJ1dGUpe3MucmVtb3ZlQXR0cmlidXRlKCJmaWx0ZXIiKTtpZih2PT09IiJ8fGImJiFiLmZpbHRlcil7cmV0dXJufX1zLmZpbHRlcj1aMS50ZXN0KGwpP2wucmVwbGFjZShaMSxqKTpsKyIgIitqfX19US5jc3NIb29rcy5tYXJnaW5SaWdodD1ZMSh4LnJlbGlhYmxlTWFyZ2luUmlnaHQsZnVuY3Rpb24oYSxiKXtpZihiKXtyZXR1cm4gUS5zd2FwKGEseyJkaXNwbGF5IjoiaW5saW5lLWJsb2NrIn0sVzEsW2EsIm1hcmdpblJpZ2h0Il0pfX0pO1EuZWFjaCh7bWFyZ2luOiIiLHBhZGRpbmc6IiIsYm9yZGVyOiJXaWR0aCJ9LGZ1bmN0aW9uKHAscyl7US5jc3NIb29rc1twK3NdPXtleHBhbmQ6ZnVuY3Rpb24odil7dmFyIGk9MCxhPXt9LGI9dHlwZW9mIHY9PT0ic3RyaW5nIj92LnNwbGl0KCIgIik6W3ZdO2Zvcig7aTw0O2krKyl7YVtwK2UxW2ldK3NdPWJbaV18fGJbaS0yXXx8YlswXX1yZXR1cm4gYX19O2lmKCFUMS50ZXN0KHApKXtRLmNzc0hvb2tzW3Arc10uc2V0PWgyfX0pO1EuZm4uZXh0ZW5kKHtjc3M6ZnVuY3Rpb24obix2KXtyZXR1cm4gZzEodGhpcyxmdW5jdGlvbihhLG4sdil7dmFyIHMsbCxtPXt9LGk9MDtpZihRLmlzQXJyYXkobikpe3M9VjEoYSk7bD1uLmxlbmd0aDtmb3IoO2k8bDtpKyspe21bbltpXV09US5jc3MoYSxuW2ldLGZhbHNlLHMpfXJldHVybiBtfXJldHVybiB2IT09dW5kZWZpbmVkP1Euc3R5bGUoYSxuLHYpOlEuY3NzKGEsbil9LG4sdixhcmd1bWVudHMubGVuZ3RoPjEpfSxzaG93OmZ1bmN0aW9uKCl7cmV0dXJuIGcyKHRoaXMsdHJ1ZSl9LGhpZGU6ZnVuY3Rpb24oKXtyZXR1cm4gZzIodGhpcyl9LHRvZ2dsZTpmdW5jdGlvbihzKXtpZih0eXBlb2Ygcz09PSJib29sZWFuIil7cmV0dXJuIHM/dGhpcy5zaG93KCk6dGhpcy5oaWRlKCl9cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe2lmKGYxKHRoaXMpKXtRKHRoaXMpLnNob3coKX1lbHNle1EodGhpcykuaGlkZSgpfX0pfX0pO2Z1bmN0aW9uIGsyKGEsYixwLGosbCl7cmV0dXJuIG5ldyBrMi5wcm90b3R5cGUuaW5pdChhLGIscCxqLGwpfVEuVHdlZW49azI7azIucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjprMixpbml0OmZ1bmN0aW9uKGEsYixwLGosbCxtKXt0aGlzLmVsZW09YTt0aGlzLnByb3A9cDt0aGlzLmVhc2luZz1sfHwic3dpbmciO3RoaXMub3B0aW9ucz1iO3RoaXMuc3RhcnQ9dGhpcy5ub3c9dGhpcy5jdXIoKTt0aGlzLmVuZD1qO3RoaXMudW5pdD1tfHwoUS5jc3NOdW1iZXJbcF0/IiI6InB4Iil9LGN1cjpmdW5jdGlvbigpe3ZhciBhPWsyLnByb3BIb29rc1t0aGlzLnByb3BdO3JldHVybiBhJiZhLmdldD9hLmdldCh0aGlzKTprMi5wcm9wSG9va3MuX2RlZmF1bHQuZ2V0KHRoaXMpfSxydW46ZnVuY3Rpb24ocCl7dmFyIGEsYj1rMi5wcm9wSG9va3NbdGhpcy5wcm9wXTtpZih0aGlzLm9wdGlvbnMuZHVyYXRpb24pe3RoaXMucG9zPWE9US5lYXNpbmdbdGhpcy5lYXNpbmddKHAsdGhpcy5vcHRpb25zLmR1cmF0aW9uKnAsMCwxLHRoaXMub3B0aW9ucy5kdXJhdGlvbil9ZWxzZXt0aGlzLnBvcz1hPXB9dGhpcy5ub3c9KHRoaXMuZW5kLXRoaXMuc3RhcnQpKmErdGhpcy5zdGFydDtpZih0aGlzLm9wdGlvbnMuc3RlcCl7dGhpcy5vcHRpb25zLnN0ZXAuY2FsbCh0aGlzLmVsZW0sdGhpcy5ub3csdGhpcyl9aWYoYiYmYi5zZXQpe2Iuc2V0KHRoaXMpfWVsc2V7azIucHJvcEhvb2tzLl9kZWZhdWx0LnNldCh0aGlzKX1yZXR1cm4gdGhpc319O2syLnByb3RvdHlwZS5pbml0LnByb3RvdHlwZT1rMi5wcm90b3R5cGU7azIucHJvcEhvb2tzPXtfZGVmYXVsdDp7Z2V0OmZ1bmN0aW9uKHQpe3ZhciByO2lmKHQuZWxlbVt0LnByb3BdIT1udWxsJiYoIXQuZWxlbS5zdHlsZXx8dC5lbGVtLnN0eWxlW3QucHJvcF09PW51bGwpKXtyZXR1cm4gdC5lbGVtW3QucHJvcF19cj1RLmNzcyh0LmVsZW0sdC5wcm9wLCIiKTtyZXR1cm4hcnx8cj09PSJhdXRvIj8wOnJ9LHNldDpmdW5jdGlvbih0KXtpZihRLmZ4LnN0ZXBbdC5wcm9wXSl7US5meC5zdGVwW3QucHJvcF0odCl9ZWxzZSBpZih0LmVsZW0uc3R5bGUmJih0LmVsZW0uc3R5bGVbUS5jc3NQcm9wc1t0LnByb3BdXSE9bnVsbHx8US5jc3NIb29rc1t0LnByb3BdKSl7US5zdHlsZSh0LmVsZW0sdC5wcm9wLHQubm93K3QudW5pdCl9ZWxzZXt0LmVsZW1bdC5wcm9wXT10Lm5vd319fX07azIucHJvcEhvb2tzLnNjcm9sbFRvcD1rMi5wcm9wSG9va3Muc2Nyb2xsTGVmdD17c2V0OmZ1bmN0aW9uKHQpe2lmKHQuZWxlbS5ub2RlVHlwZSYmdC5lbGVtLnBhcmVudE5vZGUpe3QuZWxlbVt0LnByb3BdPXQubm93fX19O1EuZWFzaW5nPXtsaW5lYXI6ZnVuY3Rpb24ocCl7cmV0dXJuIHB9LHN3aW5nOmZ1bmN0aW9uKHApe3JldHVybiAwLjUtTWF0aC5jb3MocCpNYXRoLlBJKS8yfX07US5meD1rMi5wcm90b3R5cGUuaW5pdDtRLmZ4LnN0ZXA9e307dmFyIGwyLG0yLG4yPS9eKD86dG9nZ2xlfHNob3d8aGlkZSkkLyxvMj1uZXcgUmVnRXhwKCJeKD86KFsrLV0pPXwpKCIrZDErIikoW2EteiVdKikkIiwiaSIpLHAyPS9xdWV1ZUhvb2tzJC8scTI9W3YyXSxyMj17IioiOltmdW5jdGlvbihwLHYpe3ZhciB0PXRoaXMuY3JlYXRlVHdlZW4ocCx2KSxhPXQuY3VyKCksYj1vMi5leGVjKHYpLGo9YiYmYlszXXx8KFEuY3NzTnVtYmVyW3BdPyIiOiJweCIpLHM9KFEuY3NzTnVtYmVyW3BdfHxqIT09InB4IiYmK2EpJiZvMi5leGVjKFEuY3NzKHQuZWxlbSxwKSksbD0xLG09MjA7aWYocyYmc1szXSE9PWope2o9anx8c1szXTtiPWJ8fFtdO3M9K2F8fDE7ZG97bD1sfHwiLjUiO3M9cy9sO1Euc3R5bGUodC5lbGVtLHAscytqKX13aGlsZShsIT09KGw9dC5jdXIoKS9hKSYmbCE9PTEmJi0tbSl9aWYoYil7cz10LnN0YXJ0PStzfHwrYXx8MDt0LnVuaXQ9ajt0LmVuZD1iWzFdP3MrKGJbMV0rMSkqYlsyXTorYlsyXX1yZXR1cm4gdH1dfTtmdW5jdGlvbiBzMigpe3NldFRpbWVvdXQoZnVuY3Rpb24oKXtsMj11bmRlZmluZWR9KTtyZXR1cm4obDI9US5ub3coKSl9ZnVuY3Rpb24gdDIodCxhKXt2YXIgYixqPXtoZWlnaHQ6dH0saT0wO2E9YT8xOjA7Zm9yKDtpPDQ7aSs9Mi1hKXtiPWUxW2ldO2pbIm1hcmdpbiIrYl09alsicGFkZGluZyIrYl09dH1pZihhKXtqLm9wYWNpdHk9ai53aWR0aD10fXJldHVybiBqfWZ1bmN0aW9uIHUyKHYscCxhKXt2YXIgdCxiPShyMltwXXx8W10pLmNvbmNhdChyMlsiKiJdKSxqPTAsbD1iLmxlbmd0aDtmb3IoO2o8bDtqKyspe2lmKCh0PWJbal0uY2FsbChhLHAsdikpKXtyZXR1cm4gdH19fWZ1bmN0aW9uIHYyKGEscCxiKXt2YXIgaix2LHQsbCxtLG4scixzLF89dGhpcyxyMz17fSxzMz1hLnN0eWxlLHQzPWEubm9kZVR5cGUmJmYxKGEpLHUzPVEuX2RhdGEoYSwiZnhzaG93Iik7aWYoIWIucXVldWUpe209US5fcXVldWVIb29rcyhhLCJmeCIpO2lmKG0udW5xdWV1ZWQ9PW51bGwpe20udW5xdWV1ZWQ9MDtuPW0uZW1wdHkuZmlyZTttLmVtcHR5LmZpcmU9ZnVuY3Rpb24oKXtpZighbS51bnF1ZXVlZCl7bigpfX19bS51bnF1ZXVlZCsrO18uYWx3YXlzKGZ1bmN0aW9uKCl7Xy5hbHdheXMoZnVuY3Rpb24oKXttLnVucXVldWVkLS07aWYoIVEucXVldWUoYSwiZngiKS5sZW5ndGgpe20uZW1wdHkuZmlyZSgpfX0pfSl9aWYoYS5ub2RlVHlwZT09PTEmJigiaGVpZ2h0ImluIHB8fCJ3aWR0aCJpbiBwKSl7Yi5vdmVyZmxvdz1bczMub3ZlcmZsb3csczMub3ZlcmZsb3dYLHMzLm92ZXJmbG93WV07cj1RLmNzcyhhLCJkaXNwbGF5Iik7cz1yPT09Im5vbmUiP1EuX2RhdGEoYSwib2xkZGlzcGxheSIpfHxTMShhLm5vZGVOYW1lKTpyO2lmKHM9PT0iaW5saW5lIiYmUS5jc3MoYSwiZmxvYXQiKT09PSJub25lIil7aWYoIXguaW5saW5lQmxvY2tOZWVkc0xheW91dHx8UzEoYS5ub2RlTmFtZSk9PT0iaW5saW5lIil7czMuZGlzcGxheT0iaW5saW5lLWJsb2NrIn1lbHNle3MzLnpvb209MX19fWlmKGIub3ZlcmZsb3cpe3MzLm92ZXJmbG93PSJoaWRkZW4iO2lmKCF4LnNocmlua1dyYXBCbG9ja3MoKSl7Xy5hbHdheXMoZnVuY3Rpb24oKXtzMy5vdmVyZmxvdz1iLm92ZXJmbG93WzBdO3MzLm92ZXJmbG93WD1iLm92ZXJmbG93WzFdO3MzLm92ZXJmbG93WT1iLm92ZXJmbG93WzJdfSl9fWZvcihqIGluIHApe3Y9cFtqXTtpZihuMi5leGVjKHYpKXtkZWxldGUgcFtqXTt0PXR8fHY9PT0idG9nZ2xlIjtpZih2PT09KHQzPyJoaWRlIjoic2hvdyIpKXtpZih2PT09InNob3ciJiZ1MyYmdTNbal0hPT11bmRlZmluZWQpe3QzPXRydWV9ZWxzZXtjb250aW51ZX19cjNbal09dTMmJnUzW2pdfHxRLnN0eWxlKGEsail9ZWxzZXtyPXVuZGVmaW5lZH19aWYoIVEuaXNFbXB0eU9iamVjdChyMykpe2lmKHUzKXtpZigiaGlkZGVuImluIHUzKXt0Mz11My5oaWRkZW59fWVsc2V7dTM9US5fZGF0YShhLCJmeHNob3ciLHt9KX1pZih0KXt1My5oaWRkZW49IXQzfWlmKHQzKXtRKGEpLnNob3coKX1lbHNle18uZG9uZShmdW5jdGlvbigpe1EoYSkuaGlkZSgpfSl9Xy5kb25lKGZ1bmN0aW9uKCl7dmFyIGo7US5fcmVtb3ZlRGF0YShhLCJmeHNob3ciKTtmb3IoaiBpbiByMyl7US5zdHlsZShhLGoscjNbal0pfX0pO2ZvcihqIGluIHIzKXtsPXUyKHQzP3UzW2pdOjAsaixfKTtpZighKGogaW4gdTMpKXt1M1tqXT1sLnN0YXJ0O2lmKHQzKXtsLmVuZD1sLnN0YXJ0O2wuc3RhcnQ9aj09PSJ3aWR0aCJ8fGo9PT0iaGVpZ2h0Ij8xOjB9fX19ZWxzZSBpZigocj09PSJub25lIj9TMShhLm5vZGVOYW1lKTpyKT09PSJpbmxpbmUiKXtzMy5kaXNwbGF5PXJ9fWZ1bmN0aW9uIHcyKHAscyl7dmFyIGEsbixiLHYsajtmb3IoYSBpbiBwKXtuPVEuY2FtZWxDYXNlKGEpO2I9c1tuXTt2PXBbYV07aWYoUS5pc0FycmF5KHYpKXtiPXZbMV07dj1wW2FdPXZbMF19aWYoYSE9PW4pe3Bbbl09djtkZWxldGUgcFthXX1qPVEuY3NzSG9va3Nbbl07aWYoaiYmImV4cGFuZCJpbiBqKXt2PWouZXhwYW5kKHYpO2RlbGV0ZSBwW25dO2ZvcihhIGluIHYpe2lmKCEoYSBpbiBwKSl7cFthXT12W2FdO3NbYV09Yn19fWVsc2V7c1tuXT1ifX19ZnVuY3Rpb24geDIoYSxwLGIpe3ZhciByLHMsaj0wLGw9cTIubGVuZ3RoLG09US5EZWZlcnJlZCgpLmFsd2F5cyhmdW5jdGlvbigpe2RlbGV0ZSB0LmVsZW19KSx0PWZ1bmN0aW9uKCl7aWYocyl7cmV0dXJuIGZhbHNlfXZhciBfPWwyfHxzMigpLHIzPU1hdGgubWF4KDAsbi5zdGFydFRpbWUrbi5kdXJhdGlvbi1fKSxzMz1yMy9uLmR1cmF0aW9ufHwwLHQzPTEtczMsaj0wLGw9bi50d2VlbnMubGVuZ3RoO2Zvcig7ajxsO2orKyl7bi50d2VlbnNbal0ucnVuKHQzKX1tLm5vdGlmeVdpdGgoYSxbbix0MyxyM10pO2lmKHQzPDEmJmwpe3JldHVybiByM31lbHNle20ucmVzb2x2ZVdpdGgoYSxbbl0pO3JldHVybiBmYWxzZX19LG49bS5wcm9taXNlKHtlbGVtOmEscHJvcHM6US5leHRlbmQoe30scCksb3B0czpRLmV4dGVuZCh0cnVlLHtzcGVjaWFsRWFzaW5nOnt9fSxiKSxvcmlnaW5hbFByb3BlcnRpZXM6cCxvcmlnaW5hbE9wdGlvbnM6YixzdGFydFRpbWU6bDJ8fHMyKCksZHVyYXRpb246Yi5kdXJhdGlvbix0d2VlbnM6W10sY3JlYXRlVHdlZW46ZnVuY3Rpb24oXyxyMyl7dmFyIHMzPVEuVHdlZW4oYSxuLm9wdHMsXyxyMyxuLm9wdHMuc3BlY2lhbEVhc2luZ1tfXXx8bi5vcHRzLmVhc2luZyk7bi50d2VlbnMucHVzaChzMyk7cmV0dXJuIHMzfSxzdG9wOmZ1bmN0aW9uKF8pe3ZhciBqPTAsbD1fP24udHdlZW5zLmxlbmd0aDowO2lmKHMpe3JldHVybiB0aGlzfXM9dHJ1ZTtmb3IoO2o8bDtqKyspe24udHdlZW5zW2pdLnJ1bigxKX1pZihfKXttLnJlc29sdmVXaXRoKGEsW24sX10pfWVsc2V7bS5yZWplY3RXaXRoKGEsW24sX10pfXJldHVybiB0aGlzfX0pLHY9bi5wcm9wczt3Mih2LG4ub3B0cy5zcGVjaWFsRWFzaW5nKTtmb3IoO2o8bDtqKyspe3I9cTJbal0uY2FsbChuLGEsdixuLm9wdHMpO2lmKHIpe3JldHVybiByfX1RLm1hcCh2LHUyLG4pO2lmKFEuaXNGdW5jdGlvbihuLm9wdHMuc3RhcnQpKXtuLm9wdHMuc3RhcnQuY2FsbChhLG4pfVEuZngudGltZXIoUS5leHRlbmQodCx7ZWxlbTphLGFuaW06bixxdWV1ZTpuLm9wdHMucXVldWV9KSk7cmV0dXJuIG4ucHJvZ3Jlc3Mobi5vcHRzLnByb2dyZXNzKS5kb25lKG4ub3B0cy5kb25lLG4ub3B0cy5jb21wbGV0ZSkuZmFpbChuLm9wdHMuZmFpbCkuYWx3YXlzKG4ub3B0cy5hbHdheXMpfVEuQW5pbWF0aW9uPVEuZXh0ZW5kKHgyLHt0d2VlbmVyOmZ1bmN0aW9uKHAsYSl7aWYoUS5pc0Z1bmN0aW9uKHApKXthPXA7cD1bIioiXX1lbHNle3A9cC5zcGxpdCgiICIpfXZhciBiLGo9MCxsPXAubGVuZ3RoO2Zvcig7ajxsO2orKyl7Yj1wW2pdO3IyW2JdPXIyW2JdfHxbXTtyMltiXS51bnNoaWZ0KGEpfX0scHJlZmlsdGVyOmZ1bmN0aW9uKGEscCl7aWYocCl7cTIudW5zaGlmdChhKX1lbHNle3EyLnB1c2goYSl9fX0pO1Euc3BlZWQ9ZnVuY3Rpb24ocyxhLGIpe3ZhciBqPXMmJnR5cGVvZiBzPT09Im9iamVjdCI/US5leHRlbmQoe30scyk6e2NvbXBsZXRlOmJ8fCFiJiZhfHxRLmlzRnVuY3Rpb24ocykmJnMsZHVyYXRpb246cyxlYXNpbmc6YiYmYXx8YSYmIVEuaXNGdW5jdGlvbihhKSYmYX07ai5kdXJhdGlvbj1RLmZ4Lm9mZj8wOnR5cGVvZiBqLmR1cmF0aW9uPT09Im51bWJlciI/ai5kdXJhdGlvbjpqLmR1cmF0aW9uIGluIFEuZnguc3BlZWRzP1EuZnguc3BlZWRzW2ouZHVyYXRpb25dOlEuZnguc3BlZWRzLl9kZWZhdWx0O2lmKGoucXVldWU9PW51bGx8fGoucXVldWU9PT10cnVlKXtqLnF1ZXVlPSJmeCJ9ai5vbGQ9ai5jb21wbGV0ZTtqLmNvbXBsZXRlPWZ1bmN0aW9uKCl7aWYoUS5pc0Z1bmN0aW9uKGoub2xkKSl7ai5vbGQuY2FsbCh0aGlzKX1pZihqLnF1ZXVlKXtRLmRlcXVldWUodGhpcyxqLnF1ZXVlKX19O3JldHVybiBqfTtRLmZuLmV4dGVuZCh7ZmFkZVRvOmZ1bmN0aW9uKHMsdCxhLGIpe3JldHVybiB0aGlzLmZpbHRlcihmMSkuY3NzKCJvcGFjaXR5IiwwKS5zaG93KCkuZW5kKCkuYW5pbWF0ZSh7b3BhY2l0eTp0fSxzLGEsYil9LGFuaW1hdGU6ZnVuY3Rpb24ocCxzLGEsYil7dmFyIGo9US5pc0VtcHR5T2JqZWN0KHApLGw9US5zcGVlZChzLGEsYiksbT1mdW5jdGlvbigpe3ZhciBuPXgyKHRoaXMsUS5leHRlbmQoe30scCksbCk7aWYoanx8US5fZGF0YSh0aGlzLCJmaW5pc2giKSl7bi5zdG9wKHRydWUpfX07bS5maW5pc2g9bTtyZXR1cm4ganx8bC5xdWV1ZT09PWZhbHNlP3RoaXMuZWFjaChtKTp0aGlzLnF1ZXVlKGwucXVldWUsbSl9LHN0b3A6ZnVuY3Rpb24odCxhLGIpe3ZhciBzPWZ1bmN0aW9uKGope3ZhciBsPWouc3RvcDtkZWxldGUgai5zdG9wO2woYil9O2lmKHR5cGVvZiB0IT09InN0cmluZyIpe2I9YTthPXQ7dD11bmRlZmluZWR9aWYoYSYmdCE9PWZhbHNlKXt0aGlzLnF1ZXVlKHR8fCJmeCIsW10pfXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgaj10cnVlLGw9dCE9bnVsbCYmdCsicXVldWVIb29rcyIsbT1RLnRpbWVycyxuPVEuX2RhdGEodGhpcyk7aWYobCl7aWYobltsXSYmbltsXS5zdG9wKXtzKG5bbF0pfX1lbHNle2ZvcihsIGluIG4pe2lmKG5bbF0mJm5bbF0uc3RvcCYmcDIudGVzdChsKSl7cyhuW2xdKX19fWZvcihsPW0ubGVuZ3RoO2wtLTspe2lmKG1bbF0uZWxlbT09PXRoaXMmJih0PT1udWxsfHxtW2xdLnF1ZXVlPT09dCkpe21bbF0uYW5pbS5zdG9wKGIpO2o9ZmFsc2U7bS5zcGxpY2UobCwxKX19aWYoanx8IWIpe1EuZGVxdWV1ZSh0aGlzLHQpfX0pfSxmaW5pc2g6ZnVuY3Rpb24odCl7aWYodCE9PWZhbHNlKXt0PXR8fCJmeCJ9cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBhLGI9US5fZGF0YSh0aGlzKSxqPWJbdCsicXVldWUiXSxsPWJbdCsicXVldWVIb29rcyJdLG09US50aW1lcnMsbj1qP2oubGVuZ3RoOjA7Yi5maW5pc2g9dHJ1ZTtRLnF1ZXVlKHRoaXMsdCxbXSk7aWYobCYmbC5zdG9wKXtsLnN0b3AuY2FsbCh0aGlzLHRydWUpfWZvcihhPW0ubGVuZ3RoO2EtLTspe2lmKG1bYV0uZWxlbT09PXRoaXMmJm1bYV0ucXVldWU9PT10KXttW2FdLmFuaW0uc3RvcCh0cnVlKTttLnNwbGljZShhLDEpfX1mb3IoYT0wO2E8bjthKyspe2lmKGpbYV0mJmpbYV0uZmluaXNoKXtqW2FdLmZpbmlzaC5jYWxsKHRoaXMpfX1kZWxldGUgYi5maW5pc2h9KX19KTtRLmVhY2goWyJ0b2dnbGUiLCJzaG93IiwiaGlkZSJdLGZ1bmN0aW9uKGksbil7dmFyIGE9US5mbltuXTtRLmZuW25dPWZ1bmN0aW9uKHMsYixqKXtyZXR1cm4gcz09bnVsbHx8dHlwZW9mIHM9PT0iYm9vbGVhbiI/YS5hcHBseSh0aGlzLGFyZ3VtZW50cyk6dGhpcy5hbmltYXRlKHQyKG4sdHJ1ZSkscyxiLGopfX0pO1EuZWFjaCh7c2xpZGVEb3duOnQyKCJzaG93Iiksc2xpZGVVcDp0MigiaGlkZSIpLHNsaWRlVG9nZ2xlOnQyKCJ0b2dnbGUiKSxmYWRlSW46e29wYWNpdHk6InNob3cifSxmYWRlT3V0OntvcGFjaXR5OiJoaWRlIn0sZmFkZVRvZ2dsZTp7b3BhY2l0eToidG9nZ2xlIn19LGZ1bmN0aW9uKG4scCl7US5mbltuXT1mdW5jdGlvbihzLGEsYil7cmV0dXJuIHRoaXMuYW5pbWF0ZShwLHMsYSxiKX19KTtRLnRpbWVycz1bXTtRLmZ4LnRpY2s9ZnVuY3Rpb24oKXt2YXIgdCxhPVEudGltZXJzLGk9MDtsMj1RLm5vdygpO2Zvcig7aTxhLmxlbmd0aDtpKyspe3Q9YVtpXTtpZighdCgpJiZhW2ldPT09dCl7YS5zcGxpY2UoaS0tLDEpfX1pZighYS5sZW5ndGgpe1EuZnguc3RvcCgpfWwyPXVuZGVmaW5lZH07US5meC50aW1lcj1mdW5jdGlvbih0KXtRLnRpbWVycy5wdXNoKHQpO2lmKHQoKSl7US5meC5zdGFydCgpfWVsc2V7US50aW1lcnMucG9wKCl9fTtRLmZ4LmludGVydmFsPTEzO1EuZnguc3RhcnQ9ZnVuY3Rpb24oKXtpZighbTIpe20yPXNldEludGVydmFsKFEuZngudGljayxRLmZ4LmludGVydmFsKX19O1EuZnguc3RvcD1mdW5jdGlvbigpe2NsZWFySW50ZXJ2YWwobTIpO20yPW51bGx9O1EuZnguc3BlZWRzPXtzbG93OjYwMCxmYXN0OjIwMCxfZGVmYXVsdDo0MDB9O1EuZm4uZGVsYXk9ZnVuY3Rpb24odCxhKXt0PVEuZng/US5meC5zcGVlZHNbdF18fHQ6dDthPWF8fCJmeCI7cmV0dXJuIHRoaXMucXVldWUoYSxmdW5jdGlvbihuLGIpe3ZhciBqPXNldFRpbWVvdXQobix0KTtiLnN0b3A9ZnVuY3Rpb24oKXtjbGVhclRpbWVvdXQoail9fSl9OyhmdW5jdGlvbigpe3ZhciBiLGoscyxhLGw7aj1KLmNyZWF0ZUVsZW1lbnQoImRpdiIpO2ouc2V0QXR0cmlidXRlKCJjbGFzc05hbWUiLCJ0Iik7ai5pbm5lckhUTUw9IiAgPGxpbmsvPjx0YWJsZT48L3RhYmxlPjxhIGhyZWY9Jy9hJz5hPC9hPjxpbnB1dCB0eXBlPSdjaGVja2JveCcvPiI7YT1qLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJhIilbMF07cz1KLmNyZWF0ZUVsZW1lbnQoInNlbGVjdCIpO2w9cy5hcHBlbmRDaGlsZChKLmNyZWF0ZUVsZW1lbnQoIm9wdGlvbiIpKTtiPWouZ2V0RWxlbWVudHNCeVRhZ05hbWUoImlucHV0IilbMF07YS5zdHlsZS5jc3NUZXh0PSJ0b3A6MXB4Ijt4LmdldFNldEF0dHJpYnV0ZT1qLmNsYXNzTmFtZSE9PSJ0Ijt4LnN0eWxlPS90b3AvLnRlc3QoYS5nZXRBdHRyaWJ1dGUoInN0eWxlIikpO3guaHJlZk5vcm1hbGl6ZWQ9YS5nZXRBdHRyaWJ1dGUoImhyZWYiKT09PSIvYSI7eC5jaGVja09uPSEhYi52YWx1ZTt4Lm9wdFNlbGVjdGVkPWwuc2VsZWN0ZWQ7eC5lbmN0eXBlPSEhSi5jcmVhdGVFbGVtZW50KCJmb3JtIikuZW5jdHlwZTtzLmRpc2FibGVkPXRydWU7eC5vcHREaXNhYmxlZD0hbC5kaXNhYmxlZDtiPUouY3JlYXRlRWxlbWVudCgiaW5wdXQiKTtiLnNldEF0dHJpYnV0ZSgidmFsdWUiLCIiKTt4LmlucHV0PWIuZ2V0QXR0cmlidXRlKCJ2YWx1ZSIpPT09IiI7Yi52YWx1ZT0idCI7Yi5zZXRBdHRyaWJ1dGUoInR5cGUiLCJyYWRpbyIpO3gucmFkaW9WYWx1ZT1iLnZhbHVlPT09InQifSkoKTt2YXIgeTI9L1xyL2c7US5mbi5leHRlbmQoe3ZhbDpmdW5jdGlvbih2KXt2YXIgYSxyLGIsaj10aGlzWzBdO2lmKCFhcmd1bWVudHMubGVuZ3RoKXtpZihqKXthPVEudmFsSG9va3Nbai50eXBlXXx8US52YWxIb29rc1tqLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCldO2lmKGEmJiJnZXQiaW4gYSYmKHI9YS5nZXQoaiwidmFsdWUiKSkhPT11bmRlZmluZWQpe3JldHVybiByfXI9ai52YWx1ZTtyZXR1cm4gdHlwZW9mIHI9PT0ic3RyaW5nIj9yLnJlcGxhY2UoeTIsIiIpOnI9PW51bGw/IiI6cn1yZXR1cm59Yj1RLmlzRnVuY3Rpb24odik7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihpKXt2YXIgbDtpZih0aGlzLm5vZGVUeXBlIT09MSl7cmV0dXJufWlmKGIpe2w9di5jYWxsKHRoaXMsaSxRKHRoaXMpLnZhbCgpKX1lbHNle2w9dn1pZihsPT1udWxsKXtsPSIifWVsc2UgaWYodHlwZW9mIGw9PT0ibnVtYmVyIil7bCs9IiJ9ZWxzZSBpZihRLmlzQXJyYXkobCkpe2w9US5tYXAobCxmdW5jdGlvbih2KXtyZXR1cm4gdj09bnVsbD8iIjp2KyIifSl9YT1RLnZhbEhvb2tzW3RoaXMudHlwZV18fFEudmFsSG9va3NbdGhpcy5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpXTtpZighYXx8ISgic2V0ImluIGEpfHxhLnNldCh0aGlzLGwsInZhbHVlIik9PT11bmRlZmluZWQpe3RoaXMudmFsdWU9bH19KX19KTtRLmV4dGVuZCh7dmFsSG9va3M6e29wdGlvbjp7Z2V0OmZ1bmN0aW9uKGEpe3ZhciB2PVEuZmluZC5hdHRyKGEsInZhbHVlIik7cmV0dXJuIHYhPW51bGw/djpRLnRyaW0oUS50ZXh0KGEpKX19LHNlbGVjdDp7Z2V0OmZ1bmN0aW9uKGEpe3ZhciB2LGIsaj1hLm9wdGlvbnMsbD1hLnNlbGVjdGVkSW5kZXgsbT1hLnR5cGU9PT0ic2VsZWN0LW9uZSJ8fGw8MCxuPW0/bnVsbDpbXSxwPW0/bCsxOmoubGVuZ3RoLGk9bDwwP3A6bT9sOjA7Zm9yKDtpPHA7aSsrKXtiPWpbaV07aWYoKGIuc2VsZWN0ZWR8fGk9PT1sKSYmKHgub3B0RGlzYWJsZWQ/IWIuZGlzYWJsZWQ6Yi5nZXRBdHRyaWJ1dGUoImRpc2FibGVkIik9PT1udWxsKSYmKCFiLnBhcmVudE5vZGUuZGlzYWJsZWR8fCFRLm5vZGVOYW1lKGIucGFyZW50Tm9kZSwib3B0Z3JvdXAiKSkpe3Y9UShiKS52YWwoKTtpZihtKXtyZXR1cm4gdn1uLnB1c2godil9fXJldHVybiBufSxzZXQ6ZnVuY3Rpb24oYSx2KXt2YXIgYixqLGw9YS5vcHRpb25zLG09US5tYWtlQXJyYXkodiksaT1sLmxlbmd0aDt3aGlsZShpLS0pe2o9bFtpXTtpZihRLmluQXJyYXkoUS52YWxIb29rcy5vcHRpb24uZ2V0KGopLG0pPj0wKXt0cnl7ai5zZWxlY3RlZD1iPXRydWV9Y2F0Y2goXyl7ai5zY3JvbGxIZWlnaHR9fWVsc2V7ai5zZWxlY3RlZD1mYWxzZX19aWYoIWIpe2Euc2VsZWN0ZWRJbmRleD0tMX1yZXR1cm4gbH19fX0pO1EuZWFjaChbInJhZGlvIiwiY2hlY2tib3giXSxmdW5jdGlvbigpe1EudmFsSG9va3NbdGhpc109e3NldDpmdW5jdGlvbihhLHYpe2lmKFEuaXNBcnJheSh2KSl7cmV0dXJuKGEuY2hlY2tlZD1RLmluQXJyYXkoUShhKS52YWwoKSx2KT49MCl9fX07aWYoIXguY2hlY2tPbil7US52YWxIb29rc1t0aGlzXS5nZXQ9ZnVuY3Rpb24oYSl7cmV0dXJuIGEuZ2V0QXR0cmlidXRlKCJ2YWx1ZSIpPT09bnVsbD8ib24iOmEudmFsdWV9fX0pO3ZhciB6MixBMixCMj1RLmV4cHIuYXR0ckhhbmRsZSxDMj0vXig/OmNoZWNrZWR8c2VsZWN0ZWQpJC9pLEQyPXguZ2V0U2V0QXR0cmlidXRlLEUyPXguaW5wdXQ7US5mbi5leHRlbmQoe2F0dHI6ZnVuY3Rpb24obix2KXtyZXR1cm4gZzEodGhpcyxRLmF0dHIsbix2LGFyZ3VtZW50cy5sZW5ndGg+MSl9LHJlbW92ZUF0dHI6ZnVuY3Rpb24obil7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe1EucmVtb3ZlQXR0cih0aGlzLG4pfSl9fSk7US5leHRlbmQoe2F0dHI6ZnVuY3Rpb24oYSxuLHYpe3ZhciBiLHIsaj1hLm5vZGVUeXBlO2lmKCFhfHxqPT09M3x8aj09PTh8fGo9PT0yKXtyZXR1cm59aWYodHlwZW9mIGEuZ2V0QXR0cmlidXRlPT09WCl7cmV0dXJuIFEucHJvcChhLG4sdil9aWYoaiE9PTF8fCFRLmlzWE1MRG9jKGEpKXtuPW4udG9Mb3dlckNhc2UoKTtiPVEuYXR0ckhvb2tzW25dfHwoUS5leHByLm1hdGNoLmJvb2wudGVzdChuKT9BMjp6Mil9aWYodiE9PXVuZGVmaW5lZCl7aWYodj09PW51bGwpe1EucmVtb3ZlQXR0cihhLG4pfWVsc2UgaWYoYiYmInNldCJpbiBiJiYocj1iLnNldChhLHYsbikpIT09dW5kZWZpbmVkKXtyZXR1cm4gcn1lbHNle2Euc2V0QXR0cmlidXRlKG4sdisiIik7cmV0dXJuIHZ9fWVsc2UgaWYoYiYmImdldCJpbiBiJiYocj1iLmdldChhLG4pKSE9PW51bGwpe3JldHVybiByfWVsc2V7cj1RLmZpbmQuYXR0cihhLG4pO3JldHVybiByPT1udWxsP3VuZGVmaW5lZDpyfX0scmVtb3ZlQXR0cjpmdW5jdGlvbihhLHYpe3ZhciBuLHAsaT0wLGI9diYmdi5tYXRjaChQKTtpZihiJiZhLm5vZGVUeXBlPT09MSl7d2hpbGUoKG49YltpKytdKSl7cD1RLnByb3BGaXhbbl18fG47aWYoUS5leHByLm1hdGNoLmJvb2wudGVzdChuKSl7aWYoRTImJkQyfHwhQzIudGVzdChuKSl7YVtwXT1mYWxzZX1lbHNle2FbUS5jYW1lbENhc2UoImRlZmF1bHQtIituKV09YVtwXT1mYWxzZX19ZWxzZXtRLmF0dHIoYSxuLCIiKX1hLnJlbW92ZUF0dHJpYnV0ZShEMj9uOnApfX19LGF0dHJIb29rczp7dHlwZTp7c2V0OmZ1bmN0aW9uKGEsdil7aWYoIXgucmFkaW9WYWx1ZSYmdj09PSJyYWRpbyImJlEubm9kZU5hbWUoYSwiaW5wdXQiKSl7dmFyIGI9YS52YWx1ZTthLnNldEF0dHJpYnV0ZSgidHlwZSIsdik7aWYoYil7YS52YWx1ZT1ifXJldHVybiB2fX19fX0pO0EyPXtzZXQ6ZnVuY3Rpb24oYSx2LG4pe2lmKHY9PT1mYWxzZSl7US5yZW1vdmVBdHRyKGEsbil9ZWxzZSBpZihFMiYmRDJ8fCFDMi50ZXN0KG4pKXthLnNldEF0dHJpYnV0ZSghRDImJlEucHJvcEZpeFtuXXx8bixuKX1lbHNle2FbUS5jYW1lbENhc2UoImRlZmF1bHQtIituKV09YVtuXT10cnVlfXJldHVybiBufX07US5lYWNoKFEuZXhwci5tYXRjaC5ib29sLnNvdXJjZS5tYXRjaCgvXHcrL2cpLGZ1bmN0aW9uKGksbil7dmFyIGE9QjJbbl18fFEuZmluZC5hdHRyO0IyW25dPUUyJiZEMnx8IUMyLnRlc3Qobik/ZnVuY3Rpb24oYixuLGope3ZhciByLGw7aWYoIWope2w9QjJbbl07QjJbbl09cjtyPWEoYixuLGopIT1udWxsP24udG9Mb3dlckNhc2UoKTpudWxsO0IyW25dPWx9cmV0dXJuIHJ9OmZ1bmN0aW9uKGIsbixqKXtpZighail7cmV0dXJuIGJbUS5jYW1lbENhc2UoImRlZmF1bHQtIituKV0/bi50b0xvd2VyQ2FzZSgpOm51bGx9fX0pO2lmKCFFMnx8IUQyKXtRLmF0dHJIb29rcy52YWx1ZT17c2V0OmZ1bmN0aW9uKGEsdixuKXtpZihRLm5vZGVOYW1lKGEsImlucHV0Iikpe2EuZGVmYXVsdFZhbHVlPXZ9ZWxzZXtyZXR1cm4gejImJnoyLnNldChhLHYsbil9fX19aWYoIUQyKXt6Mj17c2V0OmZ1bmN0aW9uKGEsdixuKXt2YXIgcj1hLmdldEF0dHJpYnV0ZU5vZGUobik7aWYoIXIpe2Euc2V0QXR0cmlidXRlTm9kZSgocj1hLm93bmVyRG9jdW1lbnQuY3JlYXRlQXR0cmlidXRlKG4pKSl9ci52YWx1ZT12Kz0iIjtpZihuPT09InZhbHVlInx8dj09PWEuZ2V0QXR0cmlidXRlKG4pKXtyZXR1cm4gdn19fTtCMi5pZD1CMi5uYW1lPUIyLmNvb3Jkcz1mdW5jdGlvbihhLG4sYil7dmFyIHI7aWYoIWIpe3JldHVybihyPWEuZ2V0QXR0cmlidXRlTm9kZShuKSkmJnIudmFsdWUhPT0iIj9yLnZhbHVlOm51bGx9fTtRLnZhbEhvb2tzLmJ1dHRvbj17Z2V0OmZ1bmN0aW9uKGEsbil7dmFyIHI9YS5nZXRBdHRyaWJ1dGVOb2RlKG4pO2lmKHImJnIuc3BlY2lmaWVkKXtyZXR1cm4gci52YWx1ZX19LHNldDp6Mi5zZXR9O1EuYXR0ckhvb2tzLmNvbnRlbnRlZGl0YWJsZT17c2V0OmZ1bmN0aW9uKGEsdixuKXt6Mi5zZXQoYSx2PT09IiI/ZmFsc2U6dixuKX19O1EuZWFjaChbIndpZHRoIiwiaGVpZ2h0Il0sZnVuY3Rpb24oaSxuKXtRLmF0dHJIb29rc1tuXT17c2V0OmZ1bmN0aW9uKGEsdil7aWYodj09PSIiKXthLnNldEF0dHJpYnV0ZShuLCJhdXRvIik7cmV0dXJuIHZ9fX19KX1pZigheC5zdHlsZSl7US5hdHRySG9va3Muc3R5bGU9e2dldDpmdW5jdGlvbihhKXtyZXR1cm4gYS5zdHlsZS5jc3NUZXh0fHx1bmRlZmluZWR9LHNldDpmdW5jdGlvbihhLHYpe3JldHVybihhLnN0eWxlLmNzc1RleHQ9disiIil9fX12YXIgRjI9L14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWF8YnV0dG9ufG9iamVjdCkkL2ksRzI9L14oPzphfGFyZWEpJC9pO1EuZm4uZXh0ZW5kKHtwcm9wOmZ1bmN0aW9uKG4sdil7cmV0dXJuIGcxKHRoaXMsUS5wcm9wLG4sdixhcmd1bWVudHMubGVuZ3RoPjEpfSxyZW1vdmVQcm9wOmZ1bmN0aW9uKG4pe249US5wcm9wRml4W25dfHxuO3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt0cnl7dGhpc1tuXT11bmRlZmluZWQ7ZGVsZXRlIHRoaXNbbl19Y2F0Y2goZSl7fX0pfX0pO1EuZXh0ZW5kKHtwcm9wRml4OnsiZm9yIjoiaHRtbEZvciIsImNsYXNzIjoiY2xhc3NOYW1lIn0scHJvcDpmdW5jdGlvbihhLG4sdil7dmFyIHIsYixqLGw9YS5ub2RlVHlwZTtpZighYXx8bD09PTN8fGw9PT04fHxsPT09Mil7cmV0dXJufWo9bCE9PTF8fCFRLmlzWE1MRG9jKGEpO2lmKGope249US5wcm9wRml4W25dfHxuO2I9US5wcm9wSG9va3Nbbl19aWYodiE9PXVuZGVmaW5lZCl7cmV0dXJuIGImJiJzZXQiaW4gYiYmKHI9Yi5zZXQoYSx2LG4pKSE9PXVuZGVmaW5lZD9yOihhW25dPXYpfWVsc2V7cmV0dXJuIGImJiJnZXQiaW4gYiYmKHI9Yi5nZXQoYSxuKSkhPT1udWxsP3I6YVtuXX19LHByb3BIb29rczp7dGFiSW5kZXg6e2dldDpmdW5jdGlvbihhKXt2YXIgdD1RLmZpbmQuYXR0cihhLCJ0YWJpbmRleCIpO3JldHVybiB0P3BhcnNlSW50KHQsMTApOkYyLnRlc3QoYS5ub2RlTmFtZSl8fEcyLnRlc3QoYS5ub2RlTmFtZSkmJmEuaHJlZj8wOi0xfX19fSk7aWYoIXguaHJlZk5vcm1hbGl6ZWQpe1EuZWFjaChbImhyZWYiLCJzcmMiXSxmdW5jdGlvbihpLG4pe1EucHJvcEhvb2tzW25dPXtnZXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuZ2V0QXR0cmlidXRlKG4sNCl9fX0pfWlmKCF4Lm9wdFNlbGVjdGVkKXtRLnByb3BIb29rcy5zZWxlY3RlZD17Z2V0OmZ1bmN0aW9uKGEpe3ZhciBwPWEucGFyZW50Tm9kZTtpZihwKXtwLnNlbGVjdGVkSW5kZXg7aWYocC5wYXJlbnROb2RlKXtwLnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleH19cmV0dXJuIG51bGx9fX1RLmVhY2goWyJ0YWJJbmRleCIsInJlYWRPbmx5IiwibWF4TGVuZ3RoIiwiY2VsbFNwYWNpbmciLCJjZWxsUGFkZGluZyIsInJvd1NwYW4iLCJjb2xTcGFuIiwidXNlTWFwIiwiZnJhbWVCb3JkZXIiLCJjb250ZW50RWRpdGFibGUiXSxmdW5jdGlvbigpe1EucHJvcEZpeFt0aGlzLnRvTG93ZXJDYXNlKCldPXRoaXN9KTtpZigheC5lbmN0eXBlKXtRLnByb3BGaXguZW5jdHlwZT0iZW5jb2RpbmcifXZhciBIMj0vW1x0XHJcblxmXS9nO1EuZm4uZXh0ZW5kKHthZGRDbGFzczpmdW5jdGlvbih2KXt2YXIgYSxiLGwsbSxqLG4saT0wLHA9dGhpcy5sZW5ndGgscj10eXBlb2Ygdj09PSJzdHJpbmciJiZ2O2lmKFEuaXNGdW5jdGlvbih2KSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihqKXtRKHRoaXMpLmFkZENsYXNzKHYuY2FsbCh0aGlzLGosdGhpcy5jbGFzc05hbWUpKX0pfWlmKHIpe2E9KHZ8fCIiKS5tYXRjaChQKXx8W107Zm9yKDtpPHA7aSsrKXtiPXRoaXNbaV07bD1iLm5vZGVUeXBlPT09MSYmKGIuY2xhc3NOYW1lPygiICIrYi5jbGFzc05hbWUrIiAiKS5yZXBsYWNlKEgyLCIgIik6IiAiKTtpZihsKXtqPTA7d2hpbGUoKG09YVtqKytdKSl7aWYobC5pbmRleE9mKCIgIittKyIgIik8MCl7bCs9bSsiICJ9fW49US50cmltKGwpO2lmKGIuY2xhc3NOYW1lIT09bil7Yi5jbGFzc05hbWU9bn19fX1yZXR1cm4gdGhpc30scmVtb3ZlQ2xhc3M6ZnVuY3Rpb24odil7dmFyIGEsYixsLG0saixuLGk9MCxwPXRoaXMubGVuZ3RoLHI9YXJndW1lbnRzLmxlbmd0aD09PTB8fHR5cGVvZiB2PT09InN0cmluZyImJnY7aWYoUS5pc0Z1bmN0aW9uKHYpKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGope1EodGhpcykucmVtb3ZlQ2xhc3Modi5jYWxsKHRoaXMsaix0aGlzLmNsYXNzTmFtZSkpfSl9aWYocil7YT0odnx8IiIpLm1hdGNoKFApfHxbXTtmb3IoO2k8cDtpKyspe2I9dGhpc1tpXTtsPWIubm9kZVR5cGU9PT0xJiYoYi5jbGFzc05hbWU/KCIgIitiLmNsYXNzTmFtZSsiICIpLnJlcGxhY2UoSDIsIiAiKToiIik7aWYobCl7aj0wO3doaWxlKChtPWFbaisrXSkpe3doaWxlKGwuaW5kZXhPZigiICIrbSsiICIpPj0wKXtsPWwucmVwbGFjZSgiICIrbSsiICIsIiAiKX19bj12P1EudHJpbShsKToiIjtpZihiLmNsYXNzTmFtZSE9PW4pe2IuY2xhc3NOYW1lPW59fX19cmV0dXJuIHRoaXN9LHRvZ2dsZUNsYXNzOmZ1bmN0aW9uKHYscyl7dmFyIHQ9dHlwZW9mIHY7aWYodHlwZW9mIHM9PT0iYm9vbGVhbiImJnQ9PT0ic3RyaW5nIil7cmV0dXJuIHM/dGhpcy5hZGRDbGFzcyh2KTp0aGlzLnJlbW92ZUNsYXNzKHYpfWlmKFEuaXNGdW5jdGlvbih2KSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihpKXtRKHRoaXMpLnRvZ2dsZUNsYXNzKHYuY2FsbCh0aGlzLGksdGhpcy5jbGFzc05hbWUscykscyl9KX1yZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7aWYodD09PSJzdHJpbmciKXt2YXIgYSxpPTAsYj1RKHRoaXMpLGo9di5tYXRjaChQKXx8W107d2hpbGUoKGE9altpKytdKSl7aWYoYi5oYXNDbGFzcyhhKSl7Yi5yZW1vdmVDbGFzcyhhKX1lbHNle2IuYWRkQ2xhc3MoYSl9fX1lbHNlIGlmKHQ9PT1YfHx0PT09ImJvb2xlYW4iKXtpZih0aGlzLmNsYXNzTmFtZSl7US5fZGF0YSh0aGlzLCJfX2NsYXNzTmFtZV9fIix0aGlzLmNsYXNzTmFtZSl9dGhpcy5jbGFzc05hbWU9dGhpcy5jbGFzc05hbWV8fHY9PT1mYWxzZT8iIjpRLl9kYXRhKHRoaXMsIl9fY2xhc3NOYW1lX18iKXx8IiJ9fSl9LGhhc0NsYXNzOmZ1bmN0aW9uKHMpe3ZhciBhPSIgIitzKyIgIixpPTAsbD10aGlzLmxlbmd0aDtmb3IoO2k8bDtpKyspe2lmKHRoaXNbaV0ubm9kZVR5cGU9PT0xJiYoIiAiK3RoaXNbaV0uY2xhc3NOYW1lKyIgIikucmVwbGFjZShIMiwiICIpLmluZGV4T2YoYSk+PTApe3JldHVybiB0cnVlfX1yZXR1cm4gZmFsc2V9fSk7US5lYWNoKCgiYmx1ciBmb2N1cyBmb2N1c2luIGZvY3Vzb3V0IGxvYWQgcmVzaXplIHNjcm9sbCB1bmxvYWQgY2xpY2sgZGJsY2xpY2sgIisibW91c2Vkb3duIG1vdXNldXAgbW91c2Vtb3ZlIG1vdXNlb3ZlciBtb3VzZW91dCBtb3VzZWVudGVyIG1vdXNlbGVhdmUgIisiY2hhbmdlIHNlbGVjdCBzdWJtaXQga2V5ZG93biBrZXlwcmVzcyBrZXl1cCBlcnJvciBjb250ZXh0bWVudSIpLnNwbGl0KCIgIiksZnVuY3Rpb24oaSxuKXtRLmZuW25dPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg+MD90aGlzLm9uKG4sbnVsbCxhLGIpOnRoaXMudHJpZ2dlcihuKX19KTtRLmZuLmV4dGVuZCh7aG92ZXI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5tb3VzZWVudGVyKGEpLm1vdXNlbGVhdmUoYnx8YSl9LGJpbmQ6ZnVuY3Rpb24odCxhLGIpe3JldHVybiB0aGlzLm9uKHQsbnVsbCxhLGIpfSx1bmJpbmQ6ZnVuY3Rpb24odCxhKXtyZXR1cm4gdGhpcy5vZmYodCxudWxsLGEpfSxkZWxlZ2F0ZTpmdW5jdGlvbihzLHQsYSxiKXtyZXR1cm4gdGhpcy5vbih0LHMsYSxiKX0sdW5kZWxlZ2F0ZTpmdW5jdGlvbihzLHQsYSl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg9PT0xP3RoaXMub2ZmKHMsIioqIik6dGhpcy5vZmYodCxzfHwiKioiLGEpfX0pO3ZhciBJMj1RLm5vdygpO3ZhciBKMj0oL1w/Lyk7dmFyIEsyPS8oLCl8KFxbfHspfCh9fF0pfCIoPzpbXiJcXFxyXG5dfFxcWyJcXFwvYmZucnRdfFxcdVtcZGEtZkEtRl17NH0pKiJccyo6P3x0cnVlfGZhbHNlfG51bGx8LT8oPyEwXGQpXGQrKD86XC5cZCt8KSg/OltlRV1bKy1dP1xkK3wpL2c7US5wYXJzZUpTT049ZnVuY3Rpb24oYSl7aWYody5KU09OJiZ3LkpTT04ucGFyc2Upe3JldHVybiB3LkpTT04ucGFyc2UoYSsiIil9dmFyIHIsYj1udWxsLHM9US50cmltKGErIiIpO3JldHVybiBzJiYhUS50cmltKHMucmVwbGFjZShLMixmdW5jdGlvbih0LGosbCxtKXtpZihyJiZqKXtiPTB9aWYoYj09PTApe3JldHVybiB0fXI9bHx8ajtiKz0hbS0hbDtyZXR1cm4iIn0pKT8oRnVuY3Rpb24oInJldHVybiAiK3MpKSgpOlEuZXJyb3IoIkludmFsaWQgSlNPTjogIithKX07US5wYXJzZVhNTD1mdW5jdGlvbihhKXt2YXIgYix0O2lmKCFhfHx0eXBlb2YgYSE9PSJzdHJpbmciKXtyZXR1cm4gbnVsbH10cnl7aWYody5ET01QYXJzZXIpe3Q9bmV3IERPTVBhcnNlcigpO2I9dC5wYXJzZUZyb21TdHJpbmcoYSwidGV4dC94bWwiKX1lbHNle2I9bmV3IEFjdGl2ZVhPYmplY3QoIk1pY3Jvc29mdC5YTUxET00iKTtiLmFzeW5jPSJmYWxzZSI7Yi5sb2FkWE1MKGEpfX1jYXRjaChlKXtiPXVuZGVmaW5lZH1pZighYnx8IWIuZG9jdW1lbnRFbGVtZW50fHxiLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJwYXJzZXJlcnJvciIpLmxlbmd0aCl7US5lcnJvcigiSW52YWxpZCBYTUw6ICIrYSl9cmV0dXJuIGJ9O3ZhciBMMixNMixOMj0vIy4qJC8sTzI9LyhbPyZdKV89W14mXSovLFAyPS9eKC4qPyk6WyBcdF0qKFteXHJcbl0qKVxyPyQvbWcsUTI9L14oPzphYm91dHxhcHB8YXBwLXN0b3JhZ2V8ListZXh0ZW5zaW9ufGZpbGV8cmVzfHdpZGdldCk6JC8sUjI9L14oPzpHRVR8SEVBRCkkLyxTMj0vXlwvXC8vLFQyPS9eKFtcdy4rLV0rOikoPzpcL1wvKD86W15cLz8jXSpAfCkoW15cLz8jOl0qKSg/OjooXGQrKXwpfCkvLFUyPXt9LFYyPXt9LFcyPSIqLyIuY29uY2F0KCIqIik7dHJ5e00yPWxvY2F0aW9uLmhyZWZ9Y2F0Y2goZSl7TTI9Si5jcmVhdGVFbGVtZW50KCJhIik7TTIuaHJlZj0iIjtNMj1NMi5ocmVmfUwyPVQyLmV4ZWMoTTIudG9Mb3dlckNhc2UoKSl8fFtdO2Z1bmN0aW9uIFgyKHMpe3JldHVybiBmdW5jdGlvbihhLGIpe2lmKHR5cGVvZiBhIT09InN0cmluZyIpe2I9YTthPSIqIn12YXIgaixpPTAsbD1hLnRvTG93ZXJDYXNlKCkubWF0Y2goUCl8fFtdO2lmKFEuaXNGdW5jdGlvbihiKSl7d2hpbGUoKGo9bFtpKytdKSl7aWYoai5jaGFyQXQoMCk9PT0iKyIpe2o9ai5zbGljZSgxKXx8IioiOyhzW2pdPXNbal18fFtdKS51bnNoaWZ0KGIpfWVsc2V7KHNbal09c1tqXXx8W10pLnB1c2goYil9fX19fWZ1bmN0aW9uIFkyKHMsYSxiLGope3ZhciBsPXt9LG09KHM9PT1WMik7ZnVuY3Rpb24gbihwKXt2YXIgcjtsW3BdPXRydWU7US5lYWNoKHNbcF18fFtdLGZ1bmN0aW9uKF8sdCl7dmFyIHY9dChhLGIsaik7aWYodHlwZW9mIHY9PT0ic3RyaW5nIiYmIW0mJiFsW3ZdKXthLmRhdGFUeXBlcy51bnNoaWZ0KHYpO24odik7cmV0dXJuIGZhbHNlfWVsc2UgaWYobSl7cmV0dXJuIShyPXYpfX0pO3JldHVybiByfXJldHVybiBuKGEuZGF0YVR5cGVzWzBdKXx8IWxbIioiXSYmbigiKiIpfWZ1bmN0aW9uIFoyKHQscyl7dmFyIGEsYixqPVEuYWpheFNldHRpbmdzLmZsYXRPcHRpb25zfHx7fTtmb3IoYiBpbiBzKXtpZihzW2JdIT09dW5kZWZpbmVkKXsoaltiXT90OihhfHwoYT17fSkpKVtiXT1zW2JdfX1pZihhKXtRLmV4dGVuZCh0cnVlLHQsYSl9cmV0dXJuIHR9ZnVuY3Rpb24gJDIocyxqLHIpe3ZhciBhLGIsbCx0LG09cy5jb250ZW50cyxuPXMuZGF0YVR5cGVzO3doaWxlKG5bMF09PT0iKiIpe24uc2hpZnQoKTtpZihiPT09dW5kZWZpbmVkKXtiPXMubWltZVR5cGV8fGouZ2V0UmVzcG9uc2VIZWFkZXIoIkNvbnRlbnQtVHlwZSIpfX1pZihiKXtmb3IodCBpbiBtKXtpZihtW3RdJiZtW3RdLnRlc3QoYikpe24udW5zaGlmdCh0KTticmVha319fWlmKG5bMF1pbiByKXtsPW5bMF19ZWxzZXtmb3IodCBpbiByKXtpZighblswXXx8cy5jb252ZXJ0ZXJzW3QrIiAiK25bMF1dKXtsPXQ7YnJlYWt9aWYoIWEpe2E9dH19bD1sfHxhfWlmKGwpe2lmKGwhPT1uWzBdKXtuLnVuc2hpZnQobCl9cmV0dXJuIHJbbF19fWZ1bmN0aW9uIF8yKHMscixqLGEpe3ZhciBiLGwsbSx0LHAsbj17fSx2PXMuZGF0YVR5cGVzLnNsaWNlKCk7aWYodlsxXSl7Zm9yKG0gaW4gcy5jb252ZXJ0ZXJzKXtuW20udG9Mb3dlckNhc2UoKV09cy5jb252ZXJ0ZXJzW21dfX1sPXYuc2hpZnQoKTt3aGlsZShsKXtpZihzLnJlc3BvbnNlRmllbGRzW2xdKXtqW3MucmVzcG9uc2VGaWVsZHNbbF1dPXJ9aWYoIXAmJmEmJnMuZGF0YUZpbHRlcil7cj1zLmRhdGFGaWx0ZXIocixzLmRhdGFUeXBlKX1wPWw7bD12LnNoaWZ0KCk7aWYobCl7aWYobD09PSIqIil7bD1wfWVsc2UgaWYocCE9PSIqIiYmcCE9PWwpe209bltwKyIgIitsXXx8blsiKiAiK2xdO2lmKCFtKXtmb3IoYiBpbiBuKXt0PWIuc3BsaXQoIiAiKTtpZih0WzFdPT09bCl7bT1uW3ArIiAiK3RbMF1dfHxuWyIqICIrdFswXV07aWYobSl7aWYobT09PXRydWUpe209bltiXX1lbHNlIGlmKG5bYl0hPT10cnVlKXtsPXRbMF07di51bnNoaWZ0KHRbMV0pfWJyZWFrfX19fWlmKG0hPT10cnVlKXtpZihtJiZzWyJ0aHJvd3MiXSl7cj1tKHIpfWVsc2V7dHJ5e3I9bShyKX1jYXRjaChlKXtyZXR1cm57c3RhdGU6InBhcnNlcmVycm9yIixlcnJvcjptP2U6Ik5vIGNvbnZlcnNpb24gZnJvbSAiK3ArIiB0byAiK2x9fX19fX19cmV0dXJue3N0YXRlOiJzdWNjZXNzIixkYXRhOnJ9fVEuZXh0ZW5kKHthY3RpdmU6MCxsYXN0TW9kaWZpZWQ6e30sZXRhZzp7fSxhamF4U2V0dGluZ3M6e3VybDpNMix0eXBlOiJHRVQiLGlzTG9jYWw6UTIudGVzdChMMlsxXSksZ2xvYmFsOnRydWUscHJvY2Vzc0RhdGE6dHJ1ZSxhc3luYzp0cnVlLGNvbnRlbnRUeXBlOiJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7IGNoYXJzZXQ9VVRGLTgiLGFjY2VwdHM6eyIqIjpXMix0ZXh0OiJ0ZXh0L3BsYWluIixodG1sOiJ0ZXh0L2h0bWwiLHhtbDoiYXBwbGljYXRpb24veG1sLCB0ZXh0L3htbCIsanNvbjoiYXBwbGljYXRpb24vanNvbiwgdGV4dC9qYXZhc2NyaXB0In0sY29udGVudHM6e3htbDoveG1sLyxodG1sOi9odG1sLyxqc29uOi9qc29uL30scmVzcG9uc2VGaWVsZHM6e3htbDoicmVzcG9uc2VYTUwiLHRleHQ6InJlc3BvbnNlVGV4dCIsanNvbjoicmVzcG9uc2VKU09OIn0sY29udmVydGVyczp7IiogdGV4dCI6U3RyaW5nLCJ0ZXh0IGh0bWwiOnRydWUsInRleHQganNvbiI6US5wYXJzZUpTT04sInRleHQgeG1sIjpRLnBhcnNlWE1MfSxmbGF0T3B0aW9uczp7dXJsOnRydWUsY29udGV4dDp0cnVlfX0sYWpheFNldHVwOmZ1bmN0aW9uKHQscyl7cmV0dXJuIHM/WjIoWjIodCxRLmFqYXhTZXR0aW5ncykscyk6WjIoUS5hamF4U2V0dGluZ3MsdCl9LGFqYXhQcmVmaWx0ZXI6WDIoVTIpLGFqYXhUcmFuc3BvcnQ6WDIoVjIpLGFqYXg6ZnVuY3Rpb24oYSxiKXtpZih0eXBlb2YgYT09PSJvYmplY3QiKXtiPWE7YT11bmRlZmluZWR9Yj1ifHx7fTt2YXIgcCxpLGoscix0LGwsbSxuLHM9US5hamF4U2V0dXAoe30sYiksdj1zLmNvbnRleHR8fHMsXz1zLmNvbnRleHQmJih2Lm5vZGVUeXBlfHx2LmpxdWVyeSk/USh2KTpRLmV2ZW50LHIzPVEuRGVmZXJyZWQoKSxzMz1RLkNhbGxiYWNrcygib25jZSBtZW1vcnkiKSx0Mz1zLnN0YXR1c0NvZGV8fHt9LHUzPXt9LHYzPXt9LHczPTAseDM9ImNhbmNlbGVkIix5Mz17cmVhZHlTdGF0ZTowLGdldFJlc3BvbnNlSGVhZGVyOmZ1bmN0aW9uKEEzKXt2YXIgQjM7aWYodzM9PT0yKXtpZighbil7bj17fTt3aGlsZSgoQjM9UDIuZXhlYyhyKSkpe25bQjNbMV0udG9Mb3dlckNhc2UoKV09QjNbMl19fUIzPW5bQTMudG9Mb3dlckNhc2UoKV19cmV0dXJuIEIzPT1udWxsP251bGw6QjN9LGdldEFsbFJlc3BvbnNlSGVhZGVyczpmdW5jdGlvbigpe3JldHVybiB3Mz09PTI/cjpudWxsfSxzZXRSZXF1ZXN0SGVhZGVyOmZ1bmN0aW9uKEEzLEIzKXt2YXIgQzM9QTMudG9Mb3dlckNhc2UoKTtpZighdzMpe0EzPXYzW0MzXT12M1tDM118fEEzO3UzW0EzXT1CM31yZXR1cm4gdGhpc30sb3ZlcnJpZGVNaW1lVHlwZTpmdW5jdGlvbihBMyl7aWYoIXczKXtzLm1pbWVUeXBlPUEzfXJldHVybiB0aGlzfSxzdGF0dXNDb2RlOmZ1bmN0aW9uKEEzKXt2YXIgQjM7aWYoQTMpe2lmKHczPDIpe2ZvcihCMyBpbiBBMyl7dDNbQjNdPVt0M1tCM10sQTNbQjNdXX19ZWxzZXt5My5hbHdheXMoQTNbeTMuc3RhdHVzXSl9fXJldHVybiB0aGlzfSxhYm9ydDpmdW5jdGlvbihBMyl7dmFyIEIzPUEzfHx4MztpZihtKXttLmFib3J0KEIzKX16MygwLEIzKTtyZXR1cm4gdGhpc319O3IzLnByb21pc2UoeTMpLmNvbXBsZXRlPXMzLmFkZDt5My5zdWNjZXNzPXkzLmRvbmU7eTMuZXJyb3I9eTMuZmFpbDtzLnVybD0oKGF8fHMudXJsfHxNMikrIiIpLnJlcGxhY2UoTjIsIiIpLnJlcGxhY2UoUzIsTDJbMV0rIi8vIik7cy50eXBlPWIubWV0aG9kfHxiLnR5cGV8fHMubWV0aG9kfHxzLnR5cGU7cy5kYXRhVHlwZXM9US50cmltKHMuZGF0YVR5cGV8fCIqIikudG9Mb3dlckNhc2UoKS5tYXRjaChQKXx8WyIiXTtpZihzLmNyb3NzRG9tYWluPT1udWxsKXtwPVQyLmV4ZWMocy51cmwudG9Mb3dlckNhc2UoKSk7cy5jcm9zc0RvbWFpbj0hIShwJiYocFsxXSE9PUwyWzFdfHxwWzJdIT09TDJbMl18fChwWzNdfHwocFsxXT09PSJodHRwOiI/IjgwIjoiNDQzIikpIT09KEwyWzNdfHwoTDJbMV09PT0iaHR0cDoiPyI4MCI6IjQ0MyIpKSkpfWlmKHMuZGF0YSYmcy5wcm9jZXNzRGF0YSYmdHlwZW9mIHMuZGF0YSE9PSJzdHJpbmciKXtzLmRhdGE9US5wYXJhbShzLmRhdGEscy50cmFkaXRpb25hbCl9WTIoVTIscyxiLHkzKTtpZih3Mz09PTIpe3JldHVybiB5M31sPXMuZ2xvYmFsO2lmKGwmJlEuYWN0aXZlKys9PT0wKXtRLmV2ZW50LnRyaWdnZXIoImFqYXhTdGFydCIpfXMudHlwZT1zLnR5cGUudG9VcHBlckNhc2UoKTtzLmhhc0NvbnRlbnQ9IVIyLnRlc3Qocy50eXBlKTtqPXMudXJsO2lmKCFzLmhhc0NvbnRlbnQpe2lmKHMuZGF0YSl7aj0ocy51cmwrPShKMi50ZXN0KGopPyImIjoiPyIpK3MuZGF0YSk7ZGVsZXRlIHMuZGF0YX1pZihzLmNhY2hlPT09ZmFsc2Upe3MudXJsPU8yLnRlc3Qoaik/ai5yZXBsYWNlKE8yLCIkMV89IitJMisrKTpqKyhKMi50ZXN0KGopPyImIjoiPyIpKyJfPSIrSTIrK319aWYocy5pZk1vZGlmaWVkKXtpZihRLmxhc3RNb2RpZmllZFtqXSl7eTMuc2V0UmVxdWVzdEhlYWRlcigiSWYtTW9kaWZpZWQtU2luY2UiLFEubGFzdE1vZGlmaWVkW2pdKX1pZihRLmV0YWdbal0pe3kzLnNldFJlcXVlc3RIZWFkZXIoIklmLU5vbmUtTWF0Y2giLFEuZXRhZ1tqXSl9fWlmKHMuZGF0YSYmcy5oYXNDb250ZW50JiZzLmNvbnRlbnRUeXBlIT09ZmFsc2V8fGIuY29udGVudFR5cGUpe3kzLnNldFJlcXVlc3RIZWFkZXIoIkNvbnRlbnQtVHlwZSIscy5jb250ZW50VHlwZSl9eTMuc2V0UmVxdWVzdEhlYWRlcigiQWNjZXB0IixzLmRhdGFUeXBlc1swXSYmcy5hY2NlcHRzW3MuZGF0YVR5cGVzWzBdXT9zLmFjY2VwdHNbcy5kYXRhVHlwZXNbMF1dKyhzLmRhdGFUeXBlc1swXSE9PSIqIj8iLCAiK1cyKyI7IHE9MC4wMSI6IiIpOnMuYWNjZXB0c1siKiJdKTtmb3IoaSBpbiBzLmhlYWRlcnMpe3kzLnNldFJlcXVlc3RIZWFkZXIoaSxzLmhlYWRlcnNbaV0pfWlmKHMuYmVmb3JlU2VuZCYmKHMuYmVmb3JlU2VuZC5jYWxsKHYseTMscyk9PT1mYWxzZXx8dzM9PT0yKSl7cmV0dXJuIHkzLmFib3J0KCl9eDM9ImFib3J0Ijtmb3IoaSBpbntzdWNjZXNzOjEsZXJyb3I6MSxjb21wbGV0ZToxfSl7eTNbaV0oc1tpXSl9bT1ZMihWMixzLGIseTMpO2lmKCFtKXt6MygtMSwiTm8gVHJhbnNwb3J0Iil9ZWxzZXt5My5yZWFkeVN0YXRlPTE7aWYobCl7Xy50cmlnZ2VyKCJhamF4U2VuZCIsW3kzLHNdKX1pZihzLmFzeW5jJiZzLnRpbWVvdXQ+MCl7dD1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7eTMuYWJvcnQoInRpbWVvdXQiKX0scy50aW1lb3V0KX10cnl7dzM9MTttLnNlbmQodTMsejMpfWNhdGNoKGUpe2lmKHczPDIpe3ozKC0xLGUpfWVsc2V7dGhyb3cgZX19fWZ1bmN0aW9uIHozKEEzLEIzLEMzLEQzKXt2YXIgRTMsRjMsRzMsSDMsSTMsSjM9QjM7aWYodzM9PT0yKXtyZXR1cm59dzM9MjtpZih0KXtjbGVhclRpbWVvdXQodCl9bT11bmRlZmluZWQ7cj1EM3x8IiI7eTMucmVhZHlTdGF0ZT1BMz4wPzQ6MDtFMz1BMz49MjAwJiZBMzwzMDB8fEEzPT09MzA0O2lmKEMzKXtIMz0kMihzLHkzLEMzKX1IMz1fMihzLEgzLHkzLEUzKTtpZihFMyl7aWYocy5pZk1vZGlmaWVkKXtJMz15My5nZXRSZXNwb25zZUhlYWRlcigiTGFzdC1Nb2RpZmllZCIpO2lmKEkzKXtRLmxhc3RNb2RpZmllZFtqXT1JM31JMz15My5nZXRSZXNwb25zZUhlYWRlcigiZXRhZyIpO2lmKEkzKXtRLmV0YWdbal09STN9fWlmKEEzPT09MjA0fHxzLnR5cGU9PT0iSEVBRCIpe0ozPSJub2NvbnRlbnQifWVsc2UgaWYoQTM9PT0zMDQpe0ozPSJub3Rtb2RpZmllZCJ9ZWxzZXtKMz1IMy5zdGF0ZTtGMz1IMy5kYXRhO0czPUgzLmVycm9yO0UzPSFHM319ZWxzZXtHMz1KMztpZihBM3x8IUozKXtKMz0iZXJyb3IiO2lmKEEzPDApe0EzPTB9fX15My5zdGF0dXM9QTM7eTMuc3RhdHVzVGV4dD0oQjN8fEozKSsiIjtpZihFMyl7cjMucmVzb2x2ZVdpdGgodixbRjMsSjMseTNdKX1lbHNle3IzLnJlamVjdFdpdGgodixbeTMsSjMsRzNdKX15My5zdGF0dXNDb2RlKHQzKTt0Mz11bmRlZmluZWQ7aWYobCl7Xy50cmlnZ2VyKEUzPyJhamF4U3VjY2VzcyI6ImFqYXhFcnJvciIsW3kzLHMsRTM/RjM6RzNdKX1zMy5maXJlV2l0aCh2LFt5MyxKM10pO2lmKGwpe18udHJpZ2dlcigiYWpheENvbXBsZXRlIixbeTMsc10pO2lmKCEoLS1RLmFjdGl2ZSkpe1EuZXZlbnQudHJpZ2dlcigiYWpheFN0b3AiKX19fXJldHVybiB5M30sZ2V0SlNPTjpmdW5jdGlvbihhLGIsail7cmV0dXJuIFEuZ2V0KGEsYixqLCJqc29uIil9LGdldFNjcmlwdDpmdW5jdGlvbihhLGIpe3JldHVybiBRLmdldChhLHVuZGVmaW5lZCxiLCJzY3JpcHQiKX19KTtRLmVhY2goWyJnZXQiLCJwb3N0Il0sZnVuY3Rpb24oaSxtKXtRW21dPWZ1bmN0aW9uKGEsYixqLHQpe2lmKFEuaXNGdW5jdGlvbihiKSl7dD10fHxqO2o9YjtiPXVuZGVmaW5lZH1yZXR1cm4gUS5hamF4KHt1cmw6YSx0eXBlOm0sZGF0YVR5cGU6dCxkYXRhOmIsc3VjY2VzczpqfSl9fSk7US5lYWNoKFsiYWpheFN0YXJ0IiwiYWpheFN0b3AiLCJhamF4Q29tcGxldGUiLCJhamF4RXJyb3IiLCJhamF4U3VjY2VzcyIsImFqYXhTZW5kIl0sZnVuY3Rpb24oaSx0KXtRLmZuW3RdPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLm9uKHQsYSl9fSk7US5fZXZhbFVybD1mdW5jdGlvbihhKXtyZXR1cm4gUS5hamF4KHt1cmw6YSx0eXBlOiJHRVQiLGRhdGFUeXBlOiJzY3JpcHQiLGFzeW5jOmZhbHNlLGdsb2JhbDpmYWxzZSwidGhyb3dzIjp0cnVlfSl9O1EuZm4uZXh0ZW5kKHt3cmFwQWxsOmZ1bmN0aW9uKGEpe2lmKFEuaXNGdW5jdGlvbihhKSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihpKXtRKHRoaXMpLndyYXBBbGwoYS5jYWxsKHRoaXMsaSkpfSl9aWYodGhpc1swXSl7dmFyIGI9UShhLHRoaXNbMF0ub3duZXJEb2N1bWVudCkuZXEoMCkuY2xvbmUodHJ1ZSk7aWYodGhpc1swXS5wYXJlbnROb2RlKXtiLmluc2VydEJlZm9yZSh0aGlzWzBdKX1iLm1hcChmdW5jdGlvbigpe3ZhciBqPXRoaXM7d2hpbGUoai5maXJzdENoaWxkJiZqLmZpcnN0Q2hpbGQubm9kZVR5cGU9PT0xKXtqPWouZmlyc3RDaGlsZH1yZXR1cm4gan0pLmFwcGVuZCh0aGlzKX1yZXR1cm4gdGhpc30sd3JhcElubmVyOmZ1bmN0aW9uKGEpe2lmKFEuaXNGdW5jdGlvbihhKSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihpKXtRKHRoaXMpLndyYXBJbm5lcihhLmNhbGwodGhpcyxpKSl9KX1yZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIHM9USh0aGlzKSxiPXMuY29udGVudHMoKTtpZihiLmxlbmd0aCl7Yi53cmFwQWxsKGEpfWVsc2V7cy5hcHBlbmQoYSl9fSl9LHdyYXA6ZnVuY3Rpb24oYSl7dmFyIGI9US5pc0Z1bmN0aW9uKGEpO3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oaSl7USh0aGlzKS53cmFwQWxsKGI/YS5jYWxsKHRoaXMsaSk6YSl9KX0sdW53cmFwOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucGFyZW50KCkuZWFjaChmdW5jdGlvbigpe2lmKCFRLm5vZGVOYW1lKHRoaXMsImJvZHkiKSl7USh0aGlzKS5yZXBsYWNlV2l0aCh0aGlzLmNoaWxkTm9kZXMpfX0pLmVuZCgpfX0pO1EuZXhwci5maWx0ZXJzLmhpZGRlbj1mdW5jdGlvbihhKXtyZXR1cm4gYS5vZmZzZXRXaWR0aDw9MCYmYS5vZmZzZXRIZWlnaHQ8PTB8fCgheC5yZWxpYWJsZUhpZGRlbk9mZnNldHMoKSYmKChhLnN0eWxlJiZhLnN0eWxlLmRpc3BsYXkpfHxRLmNzcyhhLCJkaXNwbGF5IikpPT09Im5vbmUiKX07US5leHByLmZpbHRlcnMudmlzaWJsZT1mdW5jdGlvbihhKXtyZXR1cm4hUS5leHByLmZpbHRlcnMuaGlkZGVuKGEpfTt2YXIgYTM9LyUyMC9nLGIzPS9cW1xdJC8sYzM9L1xyP1xuL2csZDM9L14oPzpzdWJtaXR8YnV0dG9ufGltYWdlfHJlc2V0fGZpbGUpJC9pLGUzPS9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGtleWdlbikvaTtmdW5jdGlvbiBmMyhwLGEsdCxiKXt2YXIgbjtpZihRLmlzQXJyYXkoYSkpe1EuZWFjaChhLGZ1bmN0aW9uKGksdil7aWYodHx8YjMudGVzdChwKSl7YihwLHYpfWVsc2V7ZjMocCsiWyIrKHR5cGVvZiB2PT09Im9iamVjdCI/aToiIikrIl0iLHYsdCxiKX19KX1lbHNlIGlmKCF0JiZRLnR5cGUoYSk9PT0ib2JqZWN0Iil7Zm9yKG4gaW4gYSl7ZjMocCsiWyIrbisiXSIsYVtuXSx0LGIpfX1lbHNle2IocCxhKX19US5wYXJhbT1mdW5jdGlvbihhLHQpe3ZhciBwLHM9W10sYj1mdW5jdGlvbihqLHYpe3Y9US5pc0Z1bmN0aW9uKHYpP3YoKToodj09bnVsbD8iIjp2KTtzW3MubGVuZ3RoXT1lbmNvZGVVUklDb21wb25lbnQoaikrIj0iK2VuY29kZVVSSUNvbXBvbmVudCh2KX07aWYodD09PXVuZGVmaW5lZCl7dD1RLmFqYXhTZXR0aW5ncyYmUS5hamF4U2V0dGluZ3MudHJhZGl0aW9uYWx9aWYoUS5pc0FycmF5KGEpfHwoYS5qcXVlcnkmJiFRLmlzUGxhaW5PYmplY3QoYSkpKXtRLmVhY2goYSxmdW5jdGlvbigpe2IodGhpcy5uYW1lLHRoaXMudmFsdWUpfSl9ZWxzZXtmb3IocCBpbiBhKXtmMyhwLGFbcF0sdCxiKX19cmV0dXJuIHMuam9pbigiJiIpLnJlcGxhY2UoYTMsIisiKX07US5mbi5leHRlbmQoe3NlcmlhbGl6ZTpmdW5jdGlvbigpe3JldHVybiBRLnBhcmFtKHRoaXMuc2VyaWFsaXplQXJyYXkoKSl9LHNlcmlhbGl6ZUFycmF5OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uKCl7dmFyIGE9US5wcm9wKHRoaXMsImVsZW1lbnRzIik7cmV0dXJuIGE/US5tYWtlQXJyYXkoYSk6dGhpc30pLmZpbHRlcihmdW5jdGlvbigpe3ZhciB0PXRoaXMudHlwZTtyZXR1cm4gdGhpcy5uYW1lJiYhUSh0aGlzKS5pcygiOmRpc2FibGVkIikmJmUzLnRlc3QodGhpcy5ub2RlTmFtZSkmJiFkMy50ZXN0KHQpJiYodGhpcy5jaGVja2VkfHwhaDEudGVzdCh0KSl9KS5tYXAoZnVuY3Rpb24oaSxhKXt2YXIgdj1RKHRoaXMpLnZhbCgpO3JldHVybiB2PT1udWxsP251bGw6US5pc0FycmF5KHYpP1EubWFwKHYsZnVuY3Rpb24odil7cmV0dXJue25hbWU6YS5uYW1lLHZhbHVlOnYucmVwbGFjZShjMywiXHJcbiIpfX0pOntuYW1lOmEubmFtZSx2YWx1ZTp2LnJlcGxhY2UoYzMsIlxyXG4iKX19KS5nZXQoKX19KTtRLmFqYXhTZXR0aW5ncy54aHI9dy5BY3RpdmVYT2JqZWN0IT09dW5kZWZpbmVkP2Z1bmN0aW9uKCl7cmV0dXJuIXRoaXMuaXNMb2NhbCYmL14oZ2V0fHBvc3R8aGVhZHxwdXR8ZGVsZXRlfG9wdGlvbnMpJC9pLnRlc3QodGhpcy50eXBlKSYmajMoKXx8azMoKX06ajM7dmFyIGczPTAsaDM9e30saTM9US5hamF4U2V0dGluZ3MueGhyKCk7aWYody5BY3RpdmVYT2JqZWN0KXtRKHcpLm9uKCJ1bmxvYWQiLGZ1bmN0aW9uKCl7Zm9yKHZhciBhIGluIGgzKXtoM1thXSh1bmRlZmluZWQsdHJ1ZSl9fSl9eC5jb3JzPSEhaTMmJigid2l0aENyZWRlbnRpYWxzImluIGkzKTtpMz14LmFqYXg9ISFpMztpZihpMyl7US5hamF4VHJhbnNwb3J0KGZ1bmN0aW9uKGEpe2lmKCFhLmNyb3NzRG9tYWlufHx4LmNvcnMpe3ZhciBiO3JldHVybntzZW5kOmZ1bmN0aW9uKGosbCl7dmFyIGksbT1hLnhocigpLG49KytnMzttLm9wZW4oYS50eXBlLGEudXJsLGEuYXN5bmMsYS51c2VybmFtZSxhLnBhc3N3b3JkKTtpZihhLnhockZpZWxkcyl7Zm9yKGkgaW4gYS54aHJGaWVsZHMpe21baV09YS54aHJGaWVsZHNbaV19fWlmKGEubWltZVR5cGUmJm0ub3ZlcnJpZGVNaW1lVHlwZSl7bS5vdmVycmlkZU1pbWVUeXBlKGEubWltZVR5cGUpfWlmKCFhLmNyb3NzRG9tYWluJiYhalsiWC1SZXF1ZXN0ZWQtV2l0aCJdKXtqWyJYLVJlcXVlc3RlZC1XaXRoIl09IlhNTEh0dHBSZXF1ZXN0In1mb3IoaSBpbiBqKXtpZihqW2ldIT09dW5kZWZpbmVkKXttLnNldFJlcXVlc3RIZWFkZXIoaSxqW2ldKyIiKX19bS5zZW5kKChhLmhhc0NvbnRlbnQmJmEuZGF0YSl8fG51bGwpO2I9ZnVuY3Rpb24oXyxwKXt2YXIgcyxyLHQ7aWYoYiYmKHB8fG0ucmVhZHlTdGF0ZT09PTQpKXtkZWxldGUgaDNbbl07Yj11bmRlZmluZWQ7bS5vbnJlYWR5c3RhdGVjaGFuZ2U9US5ub29wO2lmKHApe2lmKG0ucmVhZHlTdGF0ZSE9PTQpe20uYWJvcnQoKX19ZWxzZXt0PXt9O3M9bS5zdGF0dXM7aWYodHlwZW9mIG0ucmVzcG9uc2VUZXh0PT09InN0cmluZyIpe3QudGV4dD1tLnJlc3BvbnNlVGV4dH10cnl7cj1tLnN0YXR1c1RleHR9Y2F0Y2goZSl7cj0iIn1pZighcyYmYS5pc0xvY2FsJiYhYS5jcm9zc0RvbWFpbil7cz10LnRleHQ/MjAwOjQwNH1lbHNlIGlmKHM9PT0xMjIzKXtzPTIwNH19fWlmKHQpe2wocyxyLHQsbS5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKSl9fTtpZighYS5hc3luYyl7YigpfWVsc2UgaWYobS5yZWFkeVN0YXRlPT09NCl7c2V0VGltZW91dChiKX1lbHNle20ub25yZWFkeXN0YXRlY2hhbmdlPWgzW25dPWJ9fSxhYm9ydDpmdW5jdGlvbigpe2lmKGIpe2IodW5kZWZpbmVkLHRydWUpfX19fX0pfWZ1bmN0aW9uIGozKCl7dHJ5e3JldHVybiBuZXcgdy5YTUxIdHRwUmVxdWVzdCgpfWNhdGNoKGUpe319ZnVuY3Rpb24gazMoKXt0cnl7cmV0dXJuIG5ldyB3LkFjdGl2ZVhPYmplY3QoIk1pY3Jvc29mdC5YTUxIVFRQIil9Y2F0Y2goZSl7fX1RLmFqYXhTZXR1cCh7YWNjZXB0czp7c2NyaXB0OiJ0ZXh0L2phdmFzY3JpcHQsIGFwcGxpY2F0aW9uL2phdmFzY3JpcHQsIGFwcGxpY2F0aW9uL2VjbWFzY3JpcHQsIGFwcGxpY2F0aW9uL3gtZWNtYXNjcmlwdCJ9LGNvbnRlbnRzOntzY3JpcHQ6Lyg/OmphdmF8ZWNtYSlzY3JpcHQvfSxjb252ZXJ0ZXJzOnsidGV4dCBzY3JpcHQiOmZ1bmN0aW9uKHQpe1EuZ2xvYmFsRXZhbCh0KTtyZXR1cm4gdH19fSk7US5hamF4UHJlZmlsdGVyKCJzY3JpcHQiLGZ1bmN0aW9uKHMpe2lmKHMuY2FjaGU9PT11bmRlZmluZWQpe3MuY2FjaGU9ZmFsc2V9aWYocy5jcm9zc0RvbWFpbil7cy50eXBlPSJHRVQiO3MuZ2xvYmFsPWZhbHNlfX0pO1EuYWpheFRyYW5zcG9ydCgic2NyaXB0IixmdW5jdGlvbihzKXtpZihzLmNyb3NzRG9tYWluKXt2YXIgYSxiPUouaGVhZHx8USgiaGVhZCIpWzBdfHxKLmRvY3VtZW50RWxlbWVudDtyZXR1cm57c2VuZDpmdW5jdGlvbihfLGope2E9Si5jcmVhdGVFbGVtZW50KCJzY3JpcHQiKTthLmFzeW5jPXRydWU7aWYocy5zY3JpcHRDaGFyc2V0KXthLmNoYXJzZXQ9cy5zY3JpcHRDaGFyc2V0fWEuc3JjPXMudXJsO2Eub25sb2FkPWEub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKF8sbCl7aWYobHx8IWEucmVhZHlTdGF0ZXx8L2xvYWRlZHxjb21wbGV0ZS8udGVzdChhLnJlYWR5U3RhdGUpKXthLm9ubG9hZD1hLm9ucmVhZHlzdGF0ZWNoYW5nZT1udWxsO2lmKGEucGFyZW50Tm9kZSl7YS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGEpfWE9bnVsbDtpZighbCl7aigyMDAsInN1Y2Nlc3MiKX19fTtiLmluc2VydEJlZm9yZShhLGIuZmlyc3RDaGlsZCl9LGFib3J0OmZ1bmN0aW9uKCl7aWYoYSl7YS5vbmxvYWQodW5kZWZpbmVkLHRydWUpfX19fX0pO3ZhciBsMz1bXSxtMz0vKD0pXD8oPz0mfCQpfFw/XD8vO1EuYWpheFNldHVwKHtqc29ucDoiY2FsbGJhY2siLGpzb25wQ2FsbGJhY2s6ZnVuY3Rpb24oKXt2YXIgYT1sMy5wb3AoKXx8KFEuZXhwYW5kbysiXyIrKEkyKyspKTt0aGlzW2FdPXRydWU7cmV0dXJuIGF9fSk7US5hamF4UHJlZmlsdGVyKCJqc29uIGpzb25wIixmdW5jdGlvbihzLGEsail7dmFyIGIsbCxyLG09cy5qc29ucCE9PWZhbHNlJiYobTMudGVzdChzLnVybCk/InVybCI6dHlwZW9mIHMuZGF0YT09PSJzdHJpbmciJiYhKHMuY29udGVudFR5cGV8fCIiKS5pbmRleE9mKCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiKSYmbTMudGVzdChzLmRhdGEpJiYiZGF0YSIpO2lmKG18fHMuZGF0YVR5cGVzWzBdPT09Impzb25wIil7Yj1zLmpzb25wQ2FsbGJhY2s9US5pc0Z1bmN0aW9uKHMuanNvbnBDYWxsYmFjayk/cy5qc29ucENhbGxiYWNrKCk6cy5qc29ucENhbGxiYWNrO2lmKG0pe3NbbV09c1ttXS5yZXBsYWNlKG0zLCIkMSIrYil9ZWxzZSBpZihzLmpzb25wIT09ZmFsc2Upe3MudXJsKz0oSjIudGVzdChzLnVybCk/IiYiOiI/Iikrcy5qc29ucCsiPSIrYn1zLmNvbnZlcnRlcnNbInNjcmlwdCBqc29uIl09ZnVuY3Rpb24oKXtpZighcil7US5lcnJvcihiKyIgd2FzIG5vdCBjYWxsZWQiKX1yZXR1cm4gclswXX07cy5kYXRhVHlwZXNbMF09Impzb24iO2w9d1tiXTt3W2JdPWZ1bmN0aW9uKCl7cj1hcmd1bWVudHN9O2ouYWx3YXlzKGZ1bmN0aW9uKCl7d1tiXT1sO2lmKHNbYl0pe3MuanNvbnBDYWxsYmFjaz1hLmpzb25wQ2FsbGJhY2s7bDMucHVzaChiKX1pZihyJiZRLmlzRnVuY3Rpb24obCkpe2woclswXSl9cj1sPXVuZGVmaW5lZH0pO3JldHVybiJzY3JpcHQifX0pO1EucGFyc2VIVE1MPWZ1bmN0aW9uKGEsYixqKXtpZighYXx8dHlwZW9mIGEhPT0ic3RyaW5nIil7cmV0dXJuIG51bGx9aWYodHlwZW9mIGI9PT0iYm9vbGVhbiIpe2o9YjtiPWZhbHNlfWI9Ynx8Sjt2YXIgcD1GLmV4ZWMoYSkscz0haiYmW107aWYocCl7cmV0dXJuW2IuY3JlYXRlRWxlbWVudChwWzFdKV19cD1RLmJ1aWxkRnJhZ21lbnQoW2FdLGIscyk7aWYocyYmcy5sZW5ndGgpe1EocykucmVtb3ZlKCl9cmV0dXJuIFEubWVyZ2UoW10scC5jaGlsZE5vZGVzKX07dmFyIG4zPVEuZm4ubG9hZDtRLmZuLmxvYWQ9ZnVuY3Rpb24oYSxwLGIpe2lmKHR5cGVvZiBhIT09InN0cmluZyImJm4zKXtyZXR1cm4gbjMuYXBwbHkodGhpcyxhcmd1bWVudHMpfXZhciBzLHIsdCxqPXRoaXMsbD1hLmluZGV4T2YoIiAiKTtpZihsPj0wKXtzPVEudHJpbShhLnNsaWNlKGwsYS5sZW5ndGgpKTthPWEuc2xpY2UoMCxsKX1pZihRLmlzRnVuY3Rpb24ocCkpe2I9cDtwPXVuZGVmaW5lZH1lbHNlIGlmKHAmJnR5cGVvZiBwPT09Im9iamVjdCIpe3Q9IlBPU1QifWlmKGoubGVuZ3RoPjApe1EuYWpheCh7dXJsOmEsdHlwZTp0LGRhdGFUeXBlOiJodG1sIixkYXRhOnB9KS5kb25lKGZ1bmN0aW9uKG0pe3I9YXJndW1lbnRzO2ouaHRtbChzP1EoIjxkaXY+IikuYXBwZW5kKFEucGFyc2VIVE1MKG0pKS5maW5kKHMpOm0pfSkuY29tcGxldGUoYiYmZnVuY3Rpb24obSxuKXtqLmVhY2goYixyfHxbbS5yZXNwb25zZVRleHQsbixtXSl9KX1yZXR1cm4gdGhpc307US5leHByLmZpbHRlcnMuYW5pbWF0ZWQ9ZnVuY3Rpb24oYSl7cmV0dXJuIFEuZ3JlcChRLnRpbWVycyxmdW5jdGlvbihiKXtyZXR1cm4gYT09PWIuZWxlbX0pLmxlbmd0aH07dmFyIG8zPXcuZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O2Z1bmN0aW9uIHAzKGEpe3JldHVybiBRLmlzV2luZG93KGEpP2E6YS5ub2RlVHlwZT09PTk/YS5kZWZhdWx0Vmlld3x8YS5wYXJlbnRXaW5kb3c6ZmFsc2V9US5vZmZzZXQ9e3NldE9mZnNldDpmdW5jdGlvbihhLGIsaSl7dmFyIGosbCxtLG4scCxyLHMsdD1RLmNzcyhhLCJwb3NpdGlvbiIpLHY9UShhKSxfPXt9O2lmKHQ9PT0ic3RhdGljIil7YS5zdHlsZS5wb3NpdGlvbj0icmVsYXRpdmUifXA9di5vZmZzZXQoKTttPVEuY3NzKGEsInRvcCIpO3I9US5jc3MoYSwibGVmdCIpO3M9KHQ9PT0iYWJzb2x1dGUifHx0PT09ImZpeGVkIikmJlEuaW5BcnJheSgiYXV0byIsW20scl0pPi0xO2lmKHMpe2o9di5wb3NpdGlvbigpO249ai50b3A7bD1qLmxlZnR9ZWxzZXtuPXBhcnNlRmxvYXQobSl8fDA7bD1wYXJzZUZsb2F0KHIpfHwwfWlmKFEuaXNGdW5jdGlvbihiKSl7Yj1iLmNhbGwoYSxpLHApfWlmKGIudG9wIT1udWxsKXtfLnRvcD0oYi50b3AtcC50b3ApK259aWYoYi5sZWZ0IT1udWxsKXtfLmxlZnQ9KGIubGVmdC1wLmxlZnQpK2x9aWYoInVzaW5nImluIGIpe2IudXNpbmcuY2FsbChhLF8pfWVsc2V7di5jc3MoXyl9fX07US5mbi5leHRlbmQoe29mZnNldDpmdW5jdGlvbihhKXtpZihhcmd1bWVudHMubGVuZ3RoKXtyZXR1cm4gYT09PXVuZGVmaW5lZD90aGlzOnRoaXMuZWFjaChmdW5jdGlvbihpKXtRLm9mZnNldC5zZXRPZmZzZXQodGhpcyxhLGkpfSl9dmFyIG8zLGIsaj17dG9wOjAsbGVmdDowfSxsPXRoaXNbMF0sbT1sJiZsLm93bmVyRG9jdW1lbnQ7aWYoIW0pe3JldHVybn1vMz1tLmRvY3VtZW50RWxlbWVudDtpZighUS5jb250YWlucyhvMyxsKSl7cmV0dXJuIGp9aWYodHlwZW9mIGwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0IT09WCl7aj1sLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpfWI9cDMobSk7cmV0dXJue3RvcDpqLnRvcCsoYi5wYWdlWU9mZnNldHx8bzMuc2Nyb2xsVG9wKS0obzMuY2xpZW50VG9wfHwwKSxsZWZ0OmoubGVmdCsoYi5wYWdlWE9mZnNldHx8bzMuc2Nyb2xsTGVmdCktKG8zLmNsaWVudExlZnR8fDApfX0scG9zaXRpb246ZnVuY3Rpb24oKXtpZighdGhpc1swXSl7cmV0dXJufXZhciBhLGIscD17dG9wOjAsbGVmdDowfSxqPXRoaXNbMF07aWYoUS5jc3MoaiwicG9zaXRpb24iKT09PSJmaXhlZCIpe2I9ai5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKX1lbHNle2E9dGhpcy5vZmZzZXRQYXJlbnQoKTtiPXRoaXMub2Zmc2V0KCk7aWYoIVEubm9kZU5hbWUoYVswXSwiaHRtbCIpKXtwPWEub2Zmc2V0KCl9cC50b3ArPVEuY3NzKGFbMF0sImJvcmRlclRvcFdpZHRoIix0cnVlKTtwLmxlZnQrPVEuY3NzKGFbMF0sImJvcmRlckxlZnRXaWR0aCIsdHJ1ZSl9cmV0dXJue3RvcDpiLnRvcC1wLnRvcC1RLmNzcyhqLCJtYXJnaW5Ub3AiLHRydWUpLGxlZnQ6Yi5sZWZ0LXAubGVmdC1RLmNzcyhqLCJtYXJnaW5MZWZ0Iix0cnVlKX19LG9mZnNldFBhcmVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1hcChmdW5jdGlvbigpe3ZhciBhPXRoaXMub2Zmc2V0UGFyZW50fHxvMzt3aGlsZShhJiYoIVEubm9kZU5hbWUoYSwiaHRtbCIpJiZRLmNzcyhhLCJwb3NpdGlvbiIpPT09InN0YXRpYyIpKXthPWEub2Zmc2V0UGFyZW50fXJldHVybiBhfHxvM30pfX0pO1EuZWFjaCh7c2Nyb2xsTGVmdDoicGFnZVhPZmZzZXQiLHNjcm9sbFRvcDoicGFnZVlPZmZzZXQifSxmdW5jdGlvbihtLHApe3ZhciB0PS9ZLy50ZXN0KHApO1EuZm5bbV09ZnVuY3Rpb24odil7cmV0dXJuIGcxKHRoaXMsZnVuY3Rpb24oYSxtLHYpe3ZhciBiPXAzKGEpO2lmKHY9PT11bmRlZmluZWQpe3JldHVybiBiPyhwIGluIGIpP2JbcF06Yi5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnRbbV06YVttXX1pZihiKXtiLnNjcm9sbFRvKCF0P3Y6UShiKS5zY3JvbGxMZWZ0KCksdD92OlEoYikuc2Nyb2xsVG9wKCkpfWVsc2V7YVttXT12fX0sbSx2LGFyZ3VtZW50cy5sZW5ndGgsbnVsbCl9fSk7US5lYWNoKFsidG9wIiwibGVmdCJdLGZ1bmN0aW9uKGkscCl7US5jc3NIb29rc1twXT1ZMSh4LnBpeGVsUG9zaXRpb24sZnVuY3Rpb24oYSxiKXtpZihiKXtiPVcxKGEscCk7cmV0dXJuIFUxLnRlc3QoYik/UShhKS5wb3NpdGlvbigpW3BdKyJweCI6Yn19KX0pO1EuZWFjaCh7SGVpZ2h0OiJoZWlnaHQiLFdpZHRoOiJ3aWR0aCJ9LGZ1bmN0aW9uKG4sdCl7US5lYWNoKHtwYWRkaW5nOiJpbm5lciIrbixjb250ZW50OnQsIiI6Im91dGVyIitufSxmdW5jdGlvbihhLGIpe1EuZm5bYl09ZnVuY3Rpb24obSx2KXt2YXIgaj1hcmd1bWVudHMubGVuZ3RoJiYoYXx8dHlwZW9mIG0hPT0iYm9vbGVhbiIpLGw9YXx8KG09PT10cnVlfHx2PT09dHJ1ZT8ibWFyZ2luIjoiYm9yZGVyIik7cmV0dXJuIGcxKHRoaXMsZnVuY3Rpb24ocCx0LHYpe3ZhciByO2lmKFEuaXNXaW5kb3cocCkpe3JldHVybiBwLmRvY3VtZW50LmRvY3VtZW50RWxlbWVudFsiY2xpZW50IituXX1pZihwLm5vZGVUeXBlPT09OSl7cj1wLmRvY3VtZW50RWxlbWVudDtyZXR1cm4gTWF0aC5tYXgocC5ib2R5WyJzY3JvbGwiK25dLHJbInNjcm9sbCIrbl0scC5ib2R5WyJvZmZzZXQiK25dLHJbIm9mZnNldCIrbl0sclsiY2xpZW50IituXSl9cmV0dXJuIHY9PT11bmRlZmluZWQ/US5jc3MocCx0LGwpOlEuc3R5bGUocCx0LHYsbCl9LHQsaj9tOnVuZGVmaW5lZCxqLG51bGwpfX0pfSk7US5mbi5zaXplPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubGVuZ3RofTtRLmZuLmFuZFNlbGY9US5mbi5hZGRCYWNrO2lmKHR5cGVvZiBkZWZpbmU9PT0iZnVuY3Rpb24iJiZkZWZpbmUuYW1kKXtkZWZpbmUoImpxdWVyeSIsW10sZnVuY3Rpb24oKXtyZXR1cm4gUX0pfXZhciBxMz13LmpRdWVyeSxfJD13LiQ7US5ub0NvbmZsaWN0PWZ1bmN0aW9uKGEpe2lmKHcuJD09PVEpe3cuJD1fJH1pZihhJiZ3LmpRdWVyeT09PVEpe3cualF1ZXJ5PXEzfXJldHVybiBRfTtpZih0eXBlb2YgYz09PVgpe3cualF1ZXJ5PXcuJD1RfXJldHVybiBRfSkpOw0KLyohDQogKiBqUXVlcnkgVUkgQ29yZSAxLjEwLjQNCiAqIGh0dHA6Ly9qcXVlcnl1aS5jb20NCiAqDQogKiBDb3B5cmlnaHQgMjAxNCBqUXVlcnkgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzDQogKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuDQogKiBodHRwOi8vanF1ZXJ5Lm9yZy9saWNlbnNlDQogKg0KICogaHR0cDovL2FwaS5qcXVlcnl1aS5jb20vY2F0ZWdvcnkvdWktY29yZS8NCiAqLw0KKGZ1bmN0aW9uKCQsdSl7dmFyIGI9MCxyPS9edWktaWQtXGQrJC87JC51aT0kLnVpfHx7fTskLmV4dGVuZCgkLnVpLHt2ZXJzaW9uOiIxLjEwLjQiLGtleUNvZGU6e0JBQ0tTUEFDRTo4LENPTU1BOjE4OCxERUxFVEU6NDYsRE9XTjo0MCxFTkQ6MzUsRU5URVI6MTMsRVNDQVBFOjI3LEhPTUU6MzYsTEVGVDozNyxOVU1QQURfQUREOjEwNyxOVU1QQURfREVDSU1BTDoxMTAsTlVNUEFEX0RJVklERToxMTEsTlVNUEFEX0VOVEVSOjEwOCxOVU1QQURfTVVMVElQTFk6MTA2LE5VTVBBRF9TVUJUUkFDVDoxMDksUEFHRV9ET1dOOjM0LFBBR0VfVVA6MzMsUEVSSU9EOjE5MCxSSUdIVDozOSxTUEFDRTozMixUQUI6OSxVUDozOH19KTskLmZuLmV4dGVuZCh7Zm9jdXM6KGZ1bmN0aW9uKG8pe3JldHVybiBmdW5jdGlvbihkLGEpe3JldHVybiB0eXBlb2YgZD09PSJudW1iZXIiP3RoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBlPXRoaXM7c2V0VGltZW91dChmdW5jdGlvbigpeyQoZSkuZm9jdXMoKTtpZihhKXthLmNhbGwoZSl9fSxkKX0pOm8uYXBwbHkodGhpcyxhcmd1bWVudHMpfX0pKCQuZm4uZm9jdXMpLHNjcm9sbFBhcmVudDpmdW5jdGlvbigpe3ZhciBzO2lmKCgkLnVpLmllJiYoLyhzdGF0aWN8cmVsYXRpdmUpLykudGVzdCh0aGlzLmNzcygicG9zaXRpb24iKSkpfHwoL2Fic29sdXRlLykudGVzdCh0aGlzLmNzcygicG9zaXRpb24iKSkpe3M9dGhpcy5wYXJlbnRzKCkuZmlsdGVyKGZ1bmN0aW9uKCl7cmV0dXJuKC8ocmVsYXRpdmV8YWJzb2x1dGV8Zml4ZWQpLykudGVzdCgkLmNzcyh0aGlzLCJwb3NpdGlvbiIpKSYmKC8oYXV0b3xzY3JvbGwpLykudGVzdCgkLmNzcyh0aGlzLCJvdmVyZmxvdyIpKyQuY3NzKHRoaXMsIm92ZXJmbG93LXkiKSskLmNzcyh0aGlzLCJvdmVyZmxvdy14IikpfSkuZXEoMCl9ZWxzZXtzPXRoaXMucGFyZW50cygpLmZpbHRlcihmdW5jdGlvbigpe3JldHVybigvKGF1dG98c2Nyb2xsKS8pLnRlc3QoJC5jc3ModGhpcywib3ZlcmZsb3ciKSskLmNzcyh0aGlzLCJvdmVyZmxvdy15IikrJC5jc3ModGhpcywib3ZlcmZsb3cteCIpKX0pLmVxKDApfXJldHVybigvZml4ZWQvKS50ZXN0KHRoaXMuY3NzKCJwb3NpdGlvbiIpKXx8IXMubGVuZ3RoPyQoZG9jdW1lbnQpOnN9LHpJbmRleDpmdW5jdGlvbih6KXtpZih6IT09dSl7cmV0dXJuIHRoaXMuY3NzKCJ6SW5kZXgiLHopfWlmKHRoaXMubGVuZ3RoKXt2YXIgZT0kKHRoaXNbMF0pLHAsYTt3aGlsZShlLmxlbmd0aCYmZVswXSE9PWRvY3VtZW50KXtwPWUuY3NzKCJwb3NpdGlvbiIpO2lmKHA9PT0iYWJzb2x1dGUifHxwPT09InJlbGF0aXZlInx8cD09PSJmaXhlZCIpe2E9cGFyc2VJbnQoZS5jc3MoInpJbmRleCIpLDEwKTtpZighaXNOYU4oYSkmJmEhPT0wKXtyZXR1cm4gYX19ZT1lLnBhcmVudCgpfX1yZXR1cm4gMH0sdW5pcXVlSWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7aWYoIXRoaXMuaWQpe3RoaXMuaWQ9InVpLWlkLSIrKCsrYil9fSl9LHJlbW92ZVVuaXF1ZUlkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe2lmKHIudGVzdCh0aGlzLmlkKSl7JCh0aGlzKS5yZW1vdmVBdHRyKCJpZCIpfX0pfX0pO2Z1bmN0aW9uIGYoZSxpKXt2YXIgbSxhLGMsbj1lLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7aWYoImFyZWEiPT09bil7bT1lLnBhcmVudE5vZGU7YT1tLm5hbWU7aWYoIWUuaHJlZnx8IWF8fG0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKSE9PSJtYXAiKXtyZXR1cm4gZmFsc2V9Yz0kKCJpbWdbdXNlbWFwPSMiK2ErIl0iKVswXTtyZXR1cm4hIWMmJnYoYyl9cmV0dXJuKC9pbnB1dHxzZWxlY3R8dGV4dGFyZWF8YnV0dG9ufG9iamVjdC8udGVzdChuKT8hZS5kaXNhYmxlZDoiYSI9PT1uP2UuaHJlZnx8aTppKSYmdihlKX1mdW5jdGlvbiB2KGUpe3JldHVybiAkLmV4cHIuZmlsdGVycy52aXNpYmxlKGUpJiYhJChlKS5wYXJlbnRzKCkuYWRkQmFjaygpLmZpbHRlcihmdW5jdGlvbigpe3JldHVybiAkLmNzcyh0aGlzLCJ2aXNpYmlsaXR5Iik9PT0iaGlkZGVuIn0pLmxlbmd0aH0kLmV4dGVuZCgkLmV4cHJbIjoiXSx7ZGF0YTokLmV4cHIuY3JlYXRlUHNldWRvPyQuZXhwci5jcmVhdGVQc2V1ZG8oZnVuY3Rpb24oZCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiEhJC5kYXRhKGUsZCl9fSk6ZnVuY3Rpb24oZSxpLG0pe3JldHVybiEhJC5kYXRhKGUsbVszXSl9LGZvY3VzYWJsZTpmdW5jdGlvbihlKXtyZXR1cm4gZihlLCFpc05hTigkLmF0dHIoZSwidGFiaW5kZXgiKSkpfSx0YWJiYWJsZTpmdW5jdGlvbihlKXt2YXIgdD0kLmF0dHIoZSwidGFiaW5kZXgiKSxpPWlzTmFOKHQpO3JldHVybihpfHx0Pj0wKSYmZihlLCFpKX19KTtpZighJCgiPGE+Iikub3V0ZXJXaWR0aCgxKS5qcXVlcnkpeyQuZWFjaChbIldpZHRoIiwiSGVpZ2h0Il0sZnVuY3Rpb24oaSxuKXt2YXIgcz1uPT09IldpZHRoIj9bIkxlZnQiLCJSaWdodCJdOlsiVG9wIiwiQm90dG9tIl0sdD1uLnRvTG93ZXJDYXNlKCksbz17aW5uZXJXaWR0aDokLmZuLmlubmVyV2lkdGgsaW5uZXJIZWlnaHQ6JC5mbi5pbm5lckhlaWdodCxvdXRlcldpZHRoOiQuZm4ub3V0ZXJXaWR0aCxvdXRlckhlaWdodDokLmZuLm91dGVySGVpZ2h0fTtmdW5jdGlvbiBhKGUsYyxkLG0peyQuZWFjaChzLGZ1bmN0aW9uKCl7Yy09cGFyc2VGbG9hdCgkLmNzcyhlLCJwYWRkaW5nIit0aGlzKSl8fDA7aWYoZCl7Yy09cGFyc2VGbG9hdCgkLmNzcyhlLCJib3JkZXIiK3RoaXMrIldpZHRoIikpfHwwfWlmKG0pe2MtPXBhcnNlRmxvYXQoJC5jc3MoZSwibWFyZ2luIit0aGlzKSl8fDB9fSk7cmV0dXJuIGN9JC5mblsiaW5uZXIiK25dPWZ1bmN0aW9uKGMpe2lmKGM9PT11KXtyZXR1cm4gb1siaW5uZXIiK25dLmNhbGwodGhpcyl9cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpeyQodGhpcykuY3NzKHQsYSh0aGlzLGMpKyJweCIpfSl9OyQuZm5bIm91dGVyIituXT1mdW5jdGlvbihjLG0pe2lmKHR5cGVvZiBjIT09Im51bWJlciIpe3JldHVybiBvWyJvdXRlciIrbl0uY2FsbCh0aGlzLGMpfXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXskKHRoaXMpLmNzcyh0LGEodGhpcyxjLHRydWUsbSkrInB4Iil9KX19KX1pZighJC5mbi5hZGRCYWNrKXskLmZuLmFkZEJhY2s9ZnVuY3Rpb24ocyl7cmV0dXJuIHRoaXMuYWRkKHM9PW51bGw/dGhpcy5wcmV2T2JqZWN0OnRoaXMucHJldk9iamVjdC5maWx0ZXIocykpfX1pZigkKCI8YT4iKS5kYXRhKCJhLWIiLCJhIikucmVtb3ZlRGF0YSgiYS1iIikuZGF0YSgiYS1iIikpeyQuZm4ucmVtb3ZlRGF0YT0oZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKGspe2lmKGFyZ3VtZW50cy5sZW5ndGgpe3JldHVybiBhLmNhbGwodGhpcywkLmNhbWVsQ2FzZShrKSl9ZWxzZXtyZXR1cm4gYS5jYWxsKHRoaXMpfX19KSgkLmZuLnJlbW92ZURhdGEpfSQudWkuaWU9ISEvbXNpZSBbXHcuXSsvLmV4ZWMobmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpKTskLnN1cHBvcnQuc2VsZWN0c3RhcnQ9Im9uc2VsZWN0c3RhcnQiaW4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7JC5mbi5leHRlbmQoe2Rpc2FibGVTZWxlY3Rpb246ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5iaW5kKCgkLnN1cHBvcnQuc2VsZWN0c3RhcnQ/InNlbGVjdHN0YXJ0IjoibW91c2Vkb3duIikrIi51aS1kaXNhYmxlU2VsZWN0aW9uIixmdW5jdGlvbihlKXtlLnByZXZlbnREZWZhdWx0KCl9KX0sZW5hYmxlU2VsZWN0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudW5iaW5kKCIudWktZGlzYWJsZVNlbGVjdGlvbiIpfX0pOyQuZXh0ZW5kKCQudWkse3BsdWdpbjp7YWRkOmZ1bmN0aW9uKG0sbyxzKXt2YXIgaSxwPSQudWlbbV0ucHJvdG90eXBlO2ZvcihpIGluIHMpe3AucGx1Z2luc1tpXT1wLnBsdWdpbnNbaV18fFtdO3AucGx1Z2luc1tpXS5wdXNoKFtvLHNbaV1dKX19LGNhbGw6ZnVuY3Rpb24oYSxuLGMpe3ZhciBpLHM9YS5wbHVnaW5zW25dO2lmKCFzfHwhYS5lbGVtZW50WzBdLnBhcmVudE5vZGV8fGEuZWxlbWVudFswXS5wYXJlbnROb2RlLm5vZGVUeXBlPT09MTEpe3JldHVybn1mb3IoaT0wO2k8cy5sZW5ndGg7aSsrKXtpZihhLm9wdGlvbnNbc1tpXVswXV0pe3NbaV1bMV0uYXBwbHkoYS5lbGVtZW50LGMpfX19fSxoYXNTY3JvbGw6ZnVuY3Rpb24oZSxhKXtpZigkKGUpLmNzcygib3ZlcmZsb3ciKT09PSJoaWRkZW4iKXtyZXR1cm4gZmFsc2V9dmFyIHM9KGEmJmE9PT0ibGVmdCIpPyJzY3JvbGxMZWZ0Ijoic2Nyb2xsVG9wIixoPWZhbHNlO2lmKGVbc10+MCl7cmV0dXJuIHRydWV9ZVtzXT0xO2g9KGVbc10+MCk7ZVtzXT0wO3JldHVybiBofX0pfSkoalF1ZXJ5KTsNCi8qIQ0KICogalF1ZXJ5IFVJIERhdGVwaWNrZXIgMS4xMC40DQogKiBodHRwOi8vanF1ZXJ5dWkuY29tDQogKg0KICogQ29weXJpZ2h0IDIwMTQgalF1ZXJ5IEZvdW5kYXRpb24gYW5kIG90aGVyIGNvbnRyaWJ1dG9ycw0KICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLg0KICogaHR0cDovL2pxdWVyeS5vcmcvbGljZW5zZQ0KICoNCiAqIGh0dHA6Ly9hcGkuanF1ZXJ5dWkuY29tL2RhdGVwaWNrZXIvDQogKg0KICogRGVwZW5kczoNCiAqCWpxdWVyeS51aS5jb3JlLmpzDQogKi8NCihmdW5jdGlvbigkLHUpeyQuZXh0ZW5kKCQudWkse2RhdGVwaWNrZXI6e3ZlcnNpb246IjEuMTAuNCJ9fSk7dmFyIFA9ImRhdGVwaWNrZXIiLGM7ZnVuY3Rpb24gRCgpe3RoaXMuX2N1ckluc3Q9bnVsbDt0aGlzLl9rZXlFdmVudD1mYWxzZTt0aGlzLl9kaXNhYmxlZElucHV0cz1bXTt0aGlzLl9kYXRlcGlja2VyU2hvd2luZz1mYWxzZTt0aGlzLl9pbkRpYWxvZz1mYWxzZTt0aGlzLl9tYWluRGl2SWQ9InVpLWRhdGVwaWNrZXItZGl2Ijt0aGlzLl9pbmxpbmVDbGFzcz0idWktZGF0ZXBpY2tlci1pbmxpbmUiO3RoaXMuX2FwcGVuZENsYXNzPSJ1aS1kYXRlcGlja2VyLWFwcGVuZCI7dGhpcy5fdHJpZ2dlckNsYXNzPSJ1aS1kYXRlcGlja2VyLXRyaWdnZXIiO3RoaXMuX2RpYWxvZ0NsYXNzPSJ1aS1kYXRlcGlja2VyLWRpYWxvZyI7dGhpcy5fZGlzYWJsZUNsYXNzPSJ1aS1kYXRlcGlja2VyLWRpc2FibGVkIjt0aGlzLl91bnNlbGVjdGFibGVDbGFzcz0idWktZGF0ZXBpY2tlci11bnNlbGVjdGFibGUiO3RoaXMuX2N1cnJlbnRDbGFzcz0idWktZGF0ZXBpY2tlci1jdXJyZW50LWRheSI7dGhpcy5fZGF5T3ZlckNsYXNzPSJ1aS1kYXRlcGlja2VyLWRheXMtY2VsbC1vdmVyIjt0aGlzLnJlZ2lvbmFsPVtdO3RoaXMucmVnaW9uYWxbIiJdPXtjbG9zZVRleHQ6IkRvbmUiLHByZXZUZXh0OiJQcmV2IixuZXh0VGV4dDoiTmV4dCIsY3VycmVudFRleHQ6IlRvZGF5Iixtb250aE5hbWVzOlsiSmFudWFyeSIsIkZlYnJ1YXJ5IiwiTWFyY2giLCJBcHJpbCIsIk1heSIsIkp1bmUiLCJKdWx5IiwiQXVndXN0IiwiU2VwdGVtYmVyIiwiT2N0b2JlciIsIk5vdmVtYmVyIiwiRGVjZW1iZXIiXSxtb250aE5hbWVzU2hvcnQ6WyJKYW4iLCJGZWIiLCJNYXIiLCJBcHIiLCJNYXkiLCJKdW4iLCJKdWwiLCJBdWciLCJTZXAiLCJPY3QiLCJOb3YiLCJEZWMiXSxkYXlOYW1lczpbIlN1bmRheSIsIk1vbmRheSIsIlR1ZXNkYXkiLCJXZWRuZXNkYXkiLCJUaHVyc2RheSIsIkZyaWRheSIsIlNhdHVyZGF5Il0sZGF5TmFtZXNTaG9ydDpbIlN1biIsIk1vbiIsIlR1ZSIsIldlZCIsIlRodSIsIkZyaSIsIlNhdCJdLGRheU5hbWVzTWluOlsiU3UiLCJNbyIsIlR1IiwiV2UiLCJUaCIsIkZyIiwiU2EiXSx3ZWVrSGVhZGVyOiJXayIsZGF0ZUZvcm1hdDoibW0vZGQveXkiLGZpcnN0RGF5OjAsaXNSVEw6ZmFsc2Usc2hvd01vbnRoQWZ0ZXJZZWFyOmZhbHNlLHllYXJTdWZmaXg6IiJ9O3RoaXMuX2RlZmF1bHRzPXtzaG93T246ImZvY3VzIixzaG93QW5pbToiZmFkZUluIixzaG93T3B0aW9uczp7fSxkZWZhdWx0RGF0ZTpudWxsLGFwcGVuZFRleHQ6IiIsYnV0dG9uVGV4dDoiLi4uIixidXR0b25JbWFnZToiIixidXR0b25JbWFnZU9ubHk6ZmFsc2UsaGlkZUlmTm9QcmV2TmV4dDpmYWxzZSxuYXZpZ2F0aW9uQXNEYXRlRm9ybWF0OmZhbHNlLGdvdG9DdXJyZW50OmZhbHNlLGNoYW5nZU1vbnRoOmZhbHNlLGNoYW5nZVllYXI6ZmFsc2UseWVhclJhbmdlOiJjLTEwOmMrMTAiLHNob3dPdGhlck1vbnRoczpmYWxzZSxzZWxlY3RPdGhlck1vbnRoczpmYWxzZSxzaG93V2VlazpmYWxzZSxjYWxjdWxhdGVXZWVrOnRoaXMuaXNvODYwMVdlZWssc2hvcnRZZWFyQ3V0b2ZmOiIrMTAiLG1pbkRhdGU6bnVsbCxtYXhEYXRlOm51bGwsZHVyYXRpb246ImZhc3QiLGJlZm9yZVNob3dEYXk6bnVsbCxiZWZvcmVTaG93Om51bGwsb25TZWxlY3Q6bnVsbCxvbkNoYW5nZU1vbnRoWWVhcjpudWxsLG9uQ2xvc2U6bnVsbCxudW1iZXJPZk1vbnRoczoxLHNob3dDdXJyZW50QXRQb3M6MCxzdGVwTW9udGhzOjEsc3RlcEJpZ01vbnRoczoxMixhbHRGaWVsZDoiIixhbHRGb3JtYXQ6IiIsY29uc3RyYWluSW5wdXQ6dHJ1ZSxzaG93QnV0dG9uUGFuZWw6ZmFsc2UsYXV0b1NpemU6ZmFsc2UsZGlzYWJsZWQ6ZmFsc2V9OyQuZXh0ZW5kKHRoaXMuX2RlZmF1bHRzLHRoaXMucmVnaW9uYWxbIiJdKTt0aGlzLmRwRGl2PWQoJCgiPGRpdiBpZD0nIit0aGlzLl9tYWluRGl2SWQrIicgY2xhc3M9J3VpLWRhdGVwaWNrZXIgdWktd2lkZ2V0IHVpLXdpZGdldC1jb250ZW50IHVpLWhlbHBlci1jbGVhcmZpeCB1aS1jb3JuZXItYWxsJz48L2Rpdj4iKSl9JC5leHRlbmQoRC5wcm90b3R5cGUse21hcmtlckNsYXNzTmFtZToiaGFzRGF0ZXBpY2tlciIsbWF4Um93czo0LF93aWRnZXREYXRlcGlja2VyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZHBEaXZ9LHNldERlZmF1bHRzOmZ1bmN0aW9uKHMpe2YodGhpcy5fZGVmYXVsdHMsc3x8e30pO3JldHVybiB0aGlzfSxfYXR0YWNoRGF0ZXBpY2tlcjpmdW5jdGlvbih0LHMpe3ZhciBuLGksYTtuPXQubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtpPShuPT09ImRpdiJ8fG49PT0ic3BhbiIpO2lmKCF0LmlkKXt0aGlzLnV1aWQrPTE7dC5pZD0iZHAiK3RoaXMudXVpZH1hPXRoaXMuX25ld0luc3QoJCh0KSxpKTthLnNldHRpbmdzPSQuZXh0ZW5kKHt9LHN8fHt9KTtpZihuPT09ImlucHV0Iil7dGhpcy5fY29ubmVjdERhdGVwaWNrZXIodCxhKX1lbHNlIGlmKGkpe3RoaXMuX2lubGluZURhdGVwaWNrZXIodCxhKX19LF9uZXdJbnN0OmZ1bmN0aW9uKHQsaSl7dmFyIGE9dFswXS5pZC5yZXBsYWNlKC8oW15BLVphLXowLTlfXC1dKS9nLCJcXFxcJDEiKTtyZXR1cm57aWQ6YSxpbnB1dDp0LHNlbGVjdGVkRGF5OjAsc2VsZWN0ZWRNb250aDowLHNlbGVjdGVkWWVhcjowLGRyYXdNb250aDowLGRyYXdZZWFyOjAsaW5saW5lOmksZHBEaXY6KCFpP3RoaXMuZHBEaXY6ZCgkKCI8ZGl2IGNsYXNzPSciK3RoaXMuX2lubGluZUNsYXNzKyIgdWktZGF0ZXBpY2tlciB1aS13aWRnZXQgdWktd2lkZ2V0LWNvbnRlbnQgdWktaGVscGVyLWNsZWFyZml4IHVpLWNvcm5lci1hbGwnPjwvZGl2PiIpKSl9fSxfY29ubmVjdERhdGVwaWNrZXI6ZnVuY3Rpb24odCxpKXt2YXIgYT0kKHQpO2kuYXBwZW5kPSQoW10pO2kudHJpZ2dlcj0kKFtdKTtpZihhLmhhc0NsYXNzKHRoaXMubWFya2VyQ2xhc3NOYW1lKSl7cmV0dXJufXRoaXMuX2F0dGFjaG1lbnRzKGEsaSk7YS5hZGRDbGFzcyh0aGlzLm1hcmtlckNsYXNzTmFtZSkua2V5ZG93bih0aGlzLl9kb0tleURvd24pLmtleXByZXNzKHRoaXMuX2RvS2V5UHJlc3MpLmtleXVwKHRoaXMuX2RvS2V5VXApO3RoaXMuX2F1dG9TaXplKGkpOyQuZGF0YSh0LFAsaSk7aWYoaS5zZXR0aW5ncy5kaXNhYmxlZCl7dGhpcy5fZGlzYWJsZURhdGVwaWNrZXIodCl9fSxfYXR0YWNobWVudHM6ZnVuY3Rpb24oaSxhKXt2YXIgcyxiLGUsZz10aGlzLl9nZXQoYSwiYXBwZW5kVGV4dCIpLGg9dGhpcy5fZ2V0KGEsImlzUlRMIik7aWYoYS5hcHBlbmQpe2EuYXBwZW5kLnJlbW92ZSgpfWlmKGcpe2EuYXBwZW5kPSQoIjxzcGFuIGNsYXNzPSciK3RoaXMuX2FwcGVuZENsYXNzKyInPiIrZysiPC9zcGFuPiIpO2lbaD8iYmVmb3JlIjoiYWZ0ZXIiXShhLmFwcGVuZCl9aS51bmJpbmQoImZvY3VzIix0aGlzLl9zaG93RGF0ZXBpY2tlcik7aWYoYS50cmlnZ2VyKXthLnRyaWdnZXIucmVtb3ZlKCl9cz10aGlzLl9nZXQoYSwic2hvd09uIik7aWYocz09PSJmb2N1cyJ8fHM9PT0iYm90aCIpe2kuZm9jdXModGhpcy5fc2hvd0RhdGVwaWNrZXIpfWlmKHM9PT0iYnV0dG9uInx8cz09PSJib3RoIil7Yj10aGlzLl9nZXQoYSwiYnV0dG9uVGV4dCIpO2U9dGhpcy5fZ2V0KGEsImJ1dHRvbkltYWdlIik7YS50cmlnZ2VyPSQodGhpcy5fZ2V0KGEsImJ1dHRvbkltYWdlT25seSIpPyQoIjxpbWcvPiIpLmFkZENsYXNzKHRoaXMuX3RyaWdnZXJDbGFzcykuYXR0cih7c3JjOmUsYWx0OmIsdGl0bGU6Yn0pOiQoIjxidXR0b24gdHlwZT0nYnV0dG9uJz48L2J1dHRvbj4iKS5hZGRDbGFzcyh0aGlzLl90cmlnZ2VyQ2xhc3MpLmh0bWwoIWU/YjokKCI8aW1nLz4iKS5hdHRyKHtzcmM6ZSxhbHQ6Yix0aXRsZTpifSkpKTtpW2g/ImJlZm9yZSI6ImFmdGVyIl0oYS50cmlnZ2VyKTthLnRyaWdnZXIuY2xpY2soZnVuY3Rpb24oKXtpZigkLmRhdGVwaWNrZXIuX2RhdGVwaWNrZXJTaG93aW5nJiYkLmRhdGVwaWNrZXIuX2xhc3RJbnB1dD09PWlbMF0peyQuZGF0ZXBpY2tlci5faGlkZURhdGVwaWNrZXIoKX1lbHNlIGlmKCQuZGF0ZXBpY2tlci5fZGF0ZXBpY2tlclNob3dpbmcmJiQuZGF0ZXBpY2tlci5fbGFzdElucHV0IT09aVswXSl7JC5kYXRlcGlja2VyLl9oaWRlRGF0ZXBpY2tlcigpOyQuZGF0ZXBpY2tlci5fc2hvd0RhdGVwaWNrZXIoaVswXSl9ZWxzZXskLmRhdGVwaWNrZXIuX3Nob3dEYXRlcGlja2VyKGlbMF0pfXJldHVybiBmYWxzZX0pfX0sX2F1dG9TaXplOmZ1bmN0aW9uKGEpe2lmKHRoaXMuX2dldChhLCJhdXRvU2l6ZSIpJiYhYS5pbmxpbmUpe3ZhciBiLG0sZSxpLGc9bmV3IERhdGUoMjAwOSwxMi0xLDIwKSxoPXRoaXMuX2dldChhLCJkYXRlRm9ybWF0Iik7aWYoaC5tYXRjaCgvW0RNXS8pKXtiPWZ1bmN0aW9uKG4pe209MDtlPTA7Zm9yKGk9MDtpPG4ubGVuZ3RoO2krKyl7aWYobltpXS5sZW5ndGg+bSl7bT1uW2ldLmxlbmd0aDtlPWl9fXJldHVybiBlfTtnLnNldE1vbnRoKGIodGhpcy5fZ2V0KGEsKGgubWF0Y2goL01NLyk/Im1vbnRoTmFtZXMiOiJtb250aE5hbWVzU2hvcnQiKSkpKTtnLnNldERhdGUoYih0aGlzLl9nZXQoYSwoaC5tYXRjaCgvREQvKT8iZGF5TmFtZXMiOiJkYXlOYW1lc1Nob3J0IikpKSsyMC1nLmdldERheSgpKX1hLmlucHV0LmF0dHIoInNpemUiLHRoaXMuX2Zvcm1hdERhdGUoYSxnKS5sZW5ndGgpfX0sX2lubGluZURhdGVwaWNrZXI6ZnVuY3Rpb24odCxpKXt2YXIgYT0kKHQpO2lmKGEuaGFzQ2xhc3ModGhpcy5tYXJrZXJDbGFzc05hbWUpKXtyZXR1cm59YS5hZGRDbGFzcyh0aGlzLm1hcmtlckNsYXNzTmFtZSkuYXBwZW5kKGkuZHBEaXYpOyQuZGF0YSh0LFAsaSk7dGhpcy5fc2V0RGF0ZShpLHRoaXMuX2dldERlZmF1bHREYXRlKGkpLHRydWUpO3RoaXMuX3VwZGF0ZURhdGVwaWNrZXIoaSk7dGhpcy5fdXBkYXRlQWx0ZXJuYXRlKGkpO2lmKGkuc2V0dGluZ3MuZGlzYWJsZWQpe3RoaXMuX2Rpc2FibGVEYXRlcGlja2VyKHQpfWkuZHBEaXYuY3NzKCJkaXNwbGF5IiwiYmxvY2siKX0sX2RpYWxvZ0RhdGVwaWNrZXI6ZnVuY3Rpb24oaSxhLG8scyxwKXt2YXIgYixlLGcsaCxqLGs9dGhpcy5fZGlhbG9nSW5zdDtpZighayl7dGhpcy51dWlkKz0xO2I9ImRwIit0aGlzLnV1aWQ7dGhpcy5fZGlhbG9nSW5wdXQ9JCgiPGlucHV0IHR5cGU9J3RleHQnIGlkPSciK2IrIicgc3R5bGU9J3Bvc2l0aW9uOiBhYnNvbHV0ZTsgdG9wOiAtMTAwcHg7IHdpZHRoOiAwcHg7Jy8+Iik7dGhpcy5fZGlhbG9nSW5wdXQua2V5ZG93bih0aGlzLl9kb0tleURvd24pOyQoImJvZHkiKS5hcHBlbmQodGhpcy5fZGlhbG9nSW5wdXQpO2s9dGhpcy5fZGlhbG9nSW5zdD10aGlzLl9uZXdJbnN0KHRoaXMuX2RpYWxvZ0lucHV0LGZhbHNlKTtrLnNldHRpbmdzPXt9OyQuZGF0YSh0aGlzLl9kaWFsb2dJbnB1dFswXSxQLGspfWYoay5zZXR0aW5ncyxzfHx7fSk7YT0oYSYmYS5jb25zdHJ1Y3Rvcj09PURhdGU/dGhpcy5fZm9ybWF0RGF0ZShrLGEpOmEpO3RoaXMuX2RpYWxvZ0lucHV0LnZhbChhKTt0aGlzLl9wb3M9KHA/KHAubGVuZ3RoP3A6W3AucGFnZVgscC5wYWdlWV0pOm51bGwpO2lmKCF0aGlzLl9wb3Mpe2U9ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoO2c9ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodDtoPWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxMZWZ0fHxkb2N1bWVudC5ib2R5LnNjcm9sbExlZnQ7aj1kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wfHxkb2N1bWVudC5ib2R5LnNjcm9sbFRvcDt0aGlzLl9wb3M9WyhlLzIpLTEwMCtoLChnLzIpLTE1MCtqXX10aGlzLl9kaWFsb2dJbnB1dC5jc3MoImxlZnQiLCh0aGlzLl9wb3NbMF0rMjApKyJweCIpLmNzcygidG9wIix0aGlzLl9wb3NbMV0rInB4Iik7ay5zZXR0aW5ncy5vblNlbGVjdD1vO3RoaXMuX2luRGlhbG9nPXRydWU7dGhpcy5kcERpdi5hZGRDbGFzcyh0aGlzLl9kaWFsb2dDbGFzcyk7dGhpcy5fc2hvd0RhdGVwaWNrZXIodGhpcy5fZGlhbG9nSW5wdXRbMF0pO2lmKCQuYmxvY2tVSSl7JC5ibG9ja1VJKHRoaXMuZHBEaXYpfSQuZGF0YSh0aGlzLl9kaWFsb2dJbnB1dFswXSxQLGspO3JldHVybiB0aGlzfSxfZGVzdHJveURhdGVwaWNrZXI6ZnVuY3Rpb24odCl7dmFyIG4sYT0kKHQpLGk9JC5kYXRhKHQsUCk7aWYoIWEuaGFzQ2xhc3ModGhpcy5tYXJrZXJDbGFzc05hbWUpKXtyZXR1cm59bj10Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7JC5yZW1vdmVEYXRhKHQsUCk7aWYobj09PSJpbnB1dCIpe2kuYXBwZW5kLnJlbW92ZSgpO2kudHJpZ2dlci5yZW1vdmUoKTthLnJlbW92ZUNsYXNzKHRoaXMubWFya2VyQ2xhc3NOYW1lKS51bmJpbmQoImZvY3VzIix0aGlzLl9zaG93RGF0ZXBpY2tlcikudW5iaW5kKCJrZXlkb3duIix0aGlzLl9kb0tleURvd24pLnVuYmluZCgia2V5cHJlc3MiLHRoaXMuX2RvS2V5UHJlc3MpLnVuYmluZCgia2V5dXAiLHRoaXMuX2RvS2V5VXApfWVsc2UgaWYobj09PSJkaXYifHxuPT09InNwYW4iKXthLnJlbW92ZUNsYXNzKHRoaXMubWFya2VyQ2xhc3NOYW1lKS5lbXB0eSgpfX0sX2VuYWJsZURhdGVwaWNrZXI6ZnVuY3Rpb24odCl7dmFyIG4saSxhPSQodCksYj0kLmRhdGEodCxQKTtpZighYS5oYXNDbGFzcyh0aGlzLm1hcmtlckNsYXNzTmFtZSkpe3JldHVybn1uPXQubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtpZihuPT09ImlucHV0Iil7dC5kaXNhYmxlZD1mYWxzZTtiLnRyaWdnZXIuZmlsdGVyKCJidXR0b24iKS5lYWNoKGZ1bmN0aW9uKCl7dGhpcy5kaXNhYmxlZD1mYWxzZX0pLmVuZCgpLmZpbHRlcigiaW1nIikuY3NzKHtvcGFjaXR5OiIxLjAiLGN1cnNvcjoiIn0pfWVsc2UgaWYobj09PSJkaXYifHxuPT09InNwYW4iKXtpPWEuY2hpbGRyZW4oIi4iK3RoaXMuX2lubGluZUNsYXNzKTtpLmNoaWxkcmVuKCkucmVtb3ZlQ2xhc3MoInVpLXN0YXRlLWRpc2FibGVkIik7aS5maW5kKCJzZWxlY3QudWktZGF0ZXBpY2tlci1tb250aCwgc2VsZWN0LnVpLWRhdGVwaWNrZXIteWVhciIpLnByb3AoImRpc2FibGVkIixmYWxzZSl9dGhpcy5fZGlzYWJsZWRJbnB1dHM9JC5tYXAodGhpcy5fZGlzYWJsZWRJbnB1dHMsZnVuY3Rpb24odil7cmV0dXJuKHY9PT10P251bGw6dil9KX0sX2Rpc2FibGVEYXRlcGlja2VyOmZ1bmN0aW9uKHQpe3ZhciBuLGksYT0kKHQpLGI9JC5kYXRhKHQsUCk7aWYoIWEuaGFzQ2xhc3ModGhpcy5tYXJrZXJDbGFzc05hbWUpKXtyZXR1cm59bj10Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7aWYobj09PSJpbnB1dCIpe3QuZGlzYWJsZWQ9dHJ1ZTtiLnRyaWdnZXIuZmlsdGVyKCJidXR0b24iKS5lYWNoKGZ1bmN0aW9uKCl7dGhpcy5kaXNhYmxlZD10cnVlfSkuZW5kKCkuZmlsdGVyKCJpbWciKS5jc3Moe29wYWNpdHk6IjAuNSIsY3Vyc29yOiJkZWZhdWx0In0pfWVsc2UgaWYobj09PSJkaXYifHxuPT09InNwYW4iKXtpPWEuY2hpbGRyZW4oIi4iK3RoaXMuX2lubGluZUNsYXNzKTtpLmNoaWxkcmVuKCkuYWRkQ2xhc3MoInVpLXN0YXRlLWRpc2FibGVkIik7aS5maW5kKCJzZWxlY3QudWktZGF0ZXBpY2tlci1tb250aCwgc2VsZWN0LnVpLWRhdGVwaWNrZXIteWVhciIpLnByb3AoImRpc2FibGVkIix0cnVlKX10aGlzLl9kaXNhYmxlZElucHV0cz0kLm1hcCh0aGlzLl9kaXNhYmxlZElucHV0cyxmdW5jdGlvbih2KXtyZXR1cm4odj09PXQ/bnVsbDp2KX0pO3RoaXMuX2Rpc2FibGVkSW5wdXRzW3RoaXMuX2Rpc2FibGVkSW5wdXRzLmxlbmd0aF09dH0sX2lzRGlzYWJsZWREYXRlcGlja2VyOmZ1bmN0aW9uKHQpe2lmKCF0KXtyZXR1cm4gZmFsc2V9Zm9yKHZhciBpPTA7aTx0aGlzLl9kaXNhYmxlZElucHV0cy5sZW5ndGg7aSsrKXtpZih0aGlzLl9kaXNhYmxlZElucHV0c1tpXT09PXQpe3JldHVybiB0cnVlfX1yZXR1cm4gZmFsc2V9LF9nZXRJbnN0OmZ1bmN0aW9uKHQpe3RyeXtyZXR1cm4gJC5kYXRhKHQsUCl9Y2F0Y2goZSl7dGhyb3ciTWlzc2luZyBpbnN0YW5jZSBkYXRhIGZvciB0aGlzIGRhdGVwaWNrZXIifX0sX29wdGlvbkRhdGVwaWNrZXI6ZnVuY3Rpb24odCxuLHYpe3ZhciBzLGEsbSxiLGk9dGhpcy5fZ2V0SW5zdCh0KTtpZihhcmd1bWVudHMubGVuZ3RoPT09MiYmdHlwZW9mIG49PT0ic3RyaW5nIil7cmV0dXJuKG49PT0iZGVmYXVsdHMiPyQuZXh0ZW5kKHt9LCQuZGF0ZXBpY2tlci5fZGVmYXVsdHMpOihpPyhuPT09ImFsbCI/JC5leHRlbmQoe30saS5zZXR0aW5ncyk6dGhpcy5fZ2V0KGksbikpOm51bGwpKX1zPW58fHt9O2lmKHR5cGVvZiBuPT09InN0cmluZyIpe3M9e307c1tuXT12fWlmKGkpe2lmKHRoaXMuX2N1ckluc3Q9PT1pKXt0aGlzLl9oaWRlRGF0ZXBpY2tlcigpfWE9dGhpcy5fZ2V0RGF0ZURhdGVwaWNrZXIodCx0cnVlKTttPXRoaXMuX2dldE1pbk1heERhdGUoaSwibWluIik7Yj10aGlzLl9nZXRNaW5NYXhEYXRlKGksIm1heCIpO2YoaS5zZXR0aW5ncyxzKTtpZihtIT09bnVsbCYmcy5kYXRlRm9ybWF0IT09dSYmcy5taW5EYXRlPT09dSl7aS5zZXR0aW5ncy5taW5EYXRlPXRoaXMuX2Zvcm1hdERhdGUoaSxtKX1pZihiIT09bnVsbCYmcy5kYXRlRm9ybWF0IT09dSYmcy5tYXhEYXRlPT09dSl7aS5zZXR0aW5ncy5tYXhEYXRlPXRoaXMuX2Zvcm1hdERhdGUoaSxiKX1pZigiZGlzYWJsZWQiaW4gcyl7aWYocy5kaXNhYmxlZCl7dGhpcy5fZGlzYWJsZURhdGVwaWNrZXIodCl9ZWxzZXt0aGlzLl9lbmFibGVEYXRlcGlja2VyKHQpfX10aGlzLl9hdHRhY2htZW50cygkKHQpLGkpO3RoaXMuX2F1dG9TaXplKGkpO3RoaXMuX3NldERhdGUoaSxhKTt0aGlzLl91cGRhdGVBbHRlcm5hdGUoaSk7dGhpcy5fdXBkYXRlRGF0ZXBpY2tlcihpKX19LF9jaGFuZ2VEYXRlcGlja2VyOmZ1bmN0aW9uKHQsbix2KXt0aGlzLl9vcHRpb25EYXRlcGlja2VyKHQsbix2KX0sX3JlZnJlc2hEYXRlcGlja2VyOmZ1bmN0aW9uKHQpe3ZhciBpPXRoaXMuX2dldEluc3QodCk7aWYoaSl7dGhpcy5fdXBkYXRlRGF0ZXBpY2tlcihpKX19LF9zZXREYXRlRGF0ZXBpY2tlcjpmdW5jdGlvbih0LGEpe3ZhciBpPXRoaXMuX2dldEluc3QodCk7aWYoaSl7dGhpcy5fc2V0RGF0ZShpLGEpO3RoaXMuX3VwZGF0ZURhdGVwaWNrZXIoaSk7dGhpcy5fdXBkYXRlQWx0ZXJuYXRlKGkpfX0sX2dldERhdGVEYXRlcGlja2VyOmZ1bmN0aW9uKHQsbil7dmFyIGk9dGhpcy5fZ2V0SW5zdCh0KTtpZihpJiYhaS5pbmxpbmUpe3RoaXMuX3NldERhdGVGcm9tRmllbGQoaSxuKX1yZXR1cm4oaT90aGlzLl9nZXREYXRlKGkpOm51bGwpfSxfZG9LZXlEb3duOmZ1bmN0aW9uKGUpe3ZhciBvLGEscyxpPSQuZGF0ZXBpY2tlci5fZ2V0SW5zdChlLnRhcmdldCksaD10cnVlLGI9aS5kcERpdi5pcygiLnVpLWRhdGVwaWNrZXItcnRsIik7aS5fa2V5RXZlbnQ9dHJ1ZTtpZigkLmRhdGVwaWNrZXIuX2RhdGVwaWNrZXJTaG93aW5nKXtzd2l0Y2goZS5rZXlDb2RlKXtjYXNlIDk6JC5kYXRlcGlja2VyLl9oaWRlRGF0ZXBpY2tlcigpO2g9ZmFsc2U7YnJlYWs7Y2FzZSAxMzpzPSQoInRkLiIrJC5kYXRlcGlja2VyLl9kYXlPdmVyQ2xhc3MrIjpub3QoLiIrJC5kYXRlcGlja2VyLl9jdXJyZW50Q2xhc3MrIikiLGkuZHBEaXYpO2lmKHNbMF0peyQuZGF0ZXBpY2tlci5fc2VsZWN0RGF5KGUudGFyZ2V0LGkuc2VsZWN0ZWRNb250aCxpLnNlbGVjdGVkWWVhcixzWzBdKX1vPSQuZGF0ZXBpY2tlci5fZ2V0KGksIm9uU2VsZWN0Iik7aWYobyl7YT0kLmRhdGVwaWNrZXIuX2Zvcm1hdERhdGUoaSk7by5hcHBseSgoaS5pbnB1dD9pLmlucHV0WzBdOm51bGwpLFthLGldKX1lbHNleyQuZGF0ZXBpY2tlci5faGlkZURhdGVwaWNrZXIoKX1yZXR1cm4gZmFsc2U7Y2FzZSAyNzokLmRhdGVwaWNrZXIuX2hpZGVEYXRlcGlja2VyKCk7YnJlYWs7Y2FzZSAzMzokLmRhdGVwaWNrZXIuX2FkanVzdERhdGUoZS50YXJnZXQsKGUuY3RybEtleT8tJC5kYXRlcGlja2VyLl9nZXQoaSwic3RlcEJpZ01vbnRocyIpOi0kLmRhdGVwaWNrZXIuX2dldChpLCJzdGVwTW9udGhzIikpLCJNIik7YnJlYWs7Y2FzZSAzNDokLmRhdGVwaWNrZXIuX2FkanVzdERhdGUoZS50YXJnZXQsKGUuY3RybEtleT8rJC5kYXRlcGlja2VyLl9nZXQoaSwic3RlcEJpZ01vbnRocyIpOiskLmRhdGVwaWNrZXIuX2dldChpLCJzdGVwTW9udGhzIikpLCJNIik7YnJlYWs7Y2FzZSAzNTppZihlLmN0cmxLZXl8fGUubWV0YUtleSl7JC5kYXRlcGlja2VyLl9jbGVhckRhdGUoZS50YXJnZXQpfWg9ZS5jdHJsS2V5fHxlLm1ldGFLZXk7YnJlYWs7Y2FzZSAzNjppZihlLmN0cmxLZXl8fGUubWV0YUtleSl7JC5kYXRlcGlja2VyLl9nb3RvVG9kYXkoZS50YXJnZXQpfWg9ZS5jdHJsS2V5fHxlLm1ldGFLZXk7YnJlYWs7Y2FzZSAzNzppZihlLmN0cmxLZXl8fGUubWV0YUtleSl7JC5kYXRlcGlja2VyLl9hZGp1c3REYXRlKGUudGFyZ2V0LChiPysxOi0xKSwiRCIpfWg9ZS5jdHJsS2V5fHxlLm1ldGFLZXk7aWYoZS5vcmlnaW5hbEV2ZW50LmFsdEtleSl7JC5kYXRlcGlja2VyLl9hZGp1c3REYXRlKGUudGFyZ2V0LChlLmN0cmxLZXk/LSQuZGF0ZXBpY2tlci5fZ2V0KGksInN0ZXBCaWdNb250aHMiKTotJC5kYXRlcGlja2VyLl9nZXQoaSwic3RlcE1vbnRocyIpKSwiTSIpfWJyZWFrO2Nhc2UgMzg6aWYoZS5jdHJsS2V5fHxlLm1ldGFLZXkpeyQuZGF0ZXBpY2tlci5fYWRqdXN0RGF0ZShlLnRhcmdldCwtNywiRCIpfWg9ZS5jdHJsS2V5fHxlLm1ldGFLZXk7YnJlYWs7Y2FzZSAzOTppZihlLmN0cmxLZXl8fGUubWV0YUtleSl7JC5kYXRlcGlja2VyLl9hZGp1c3REYXRlKGUudGFyZ2V0LChiPy0xOisxKSwiRCIpfWg9ZS5jdHJsS2V5fHxlLm1ldGFLZXk7aWYoZS5vcmlnaW5hbEV2ZW50LmFsdEtleSl7JC5kYXRlcGlja2VyLl9hZGp1c3REYXRlKGUudGFyZ2V0LChlLmN0cmxLZXk/KyQuZGF0ZXBpY2tlci5fZ2V0KGksInN0ZXBCaWdNb250aHMiKTorJC5kYXRlcGlja2VyLl9nZXQoaSwic3RlcE1vbnRocyIpKSwiTSIpfWJyZWFrO2Nhc2UgNDA6aWYoZS5jdHJsS2V5fHxlLm1ldGFLZXkpeyQuZGF0ZXBpY2tlci5fYWRqdXN0RGF0ZShlLnRhcmdldCwrNywiRCIpfWg9ZS5jdHJsS2V5fHxlLm1ldGFLZXk7YnJlYWs7ZGVmYXVsdDpoPWZhbHNlfX1lbHNlIGlmKGUua2V5Q29kZT09PTM2JiZlLmN0cmxLZXkpeyQuZGF0ZXBpY2tlci5fc2hvd0RhdGVwaWNrZXIodGhpcyl9ZWxzZXtoPWZhbHNlfWlmKGgpe2UucHJldmVudERlZmF1bHQoKTtlLnN0b3BQcm9wYWdhdGlvbigpfX0sX2RvS2V5UHJlc3M6ZnVuY3Rpb24oZSl7dmFyIGEsYixpPSQuZGF0ZXBpY2tlci5fZ2V0SW5zdChlLnRhcmdldCk7aWYoJC5kYXRlcGlja2VyLl9nZXQoaSwiY29uc3RyYWluSW5wdXQiKSl7YT0kLmRhdGVwaWNrZXIuX3Bvc3NpYmxlQ2hhcnMoJC5kYXRlcGlja2VyLl9nZXQoaSwiZGF0ZUZvcm1hdCIpKTtiPVN0cmluZy5mcm9tQ2hhckNvZGUoZS5jaGFyQ29kZT09bnVsbD9lLmtleUNvZGU6ZS5jaGFyQ29kZSk7cmV0dXJuIGUuY3RybEtleXx8ZS5tZXRhS2V5fHwoYjwiICJ8fCFhfHxhLmluZGV4T2YoYik+LTEpfX0sX2RvS2V5VXA6ZnVuY3Rpb24oZSl7dmFyIGEsaT0kLmRhdGVwaWNrZXIuX2dldEluc3QoZS50YXJnZXQpO2lmKGkuaW5wdXQudmFsKCkhPT1pLmxhc3RWYWwpe3RyeXthPSQuZGF0ZXBpY2tlci5wYXJzZURhdGUoJC5kYXRlcGlja2VyLl9nZXQoaSwiZGF0ZUZvcm1hdCIpLChpLmlucHV0P2kuaW5wdXQudmFsKCk6bnVsbCksJC5kYXRlcGlja2VyLl9nZXRGb3JtYXRDb25maWcoaSkpO2lmKGEpeyQuZGF0ZXBpY2tlci5fc2V0RGF0ZUZyb21GaWVsZChpKTskLmRhdGVwaWNrZXIuX3VwZGF0ZUFsdGVybmF0ZShpKTskLmRhdGVwaWNrZXIuX3VwZGF0ZURhdGVwaWNrZXIoaSl9fWNhdGNoKGIpe319cmV0dXJuIHRydWV9LF9zaG93RGF0ZXBpY2tlcjpmdW5jdGlvbihpKXtpPWkudGFyZ2V0fHxpO2lmKGkubm9kZU5hbWUudG9Mb3dlckNhc2UoKSE9PSJpbnB1dCIpe2k9JCgiaW5wdXQiLGkucGFyZW50Tm9kZSlbMF19aWYoJC5kYXRlcGlja2VyLl9pc0Rpc2FibGVkRGF0ZXBpY2tlcihpKXx8JC5kYXRlcGlja2VyLl9sYXN0SW5wdXQ9PT1pKXtyZXR1cm59dmFyIGEsYixlLGcsbyxzLGg7YT0kLmRhdGVwaWNrZXIuX2dldEluc3QoaSk7aWYoJC5kYXRlcGlja2VyLl9jdXJJbnN0JiYkLmRhdGVwaWNrZXIuX2N1ckluc3QhPT1hKXskLmRhdGVwaWNrZXIuX2N1ckluc3QuZHBEaXYuc3RvcCh0cnVlLHRydWUpO2lmKGEmJiQuZGF0ZXBpY2tlci5fZGF0ZXBpY2tlclNob3dpbmcpeyQuZGF0ZXBpY2tlci5faGlkZURhdGVwaWNrZXIoJC5kYXRlcGlja2VyLl9jdXJJbnN0LmlucHV0WzBdKX19Yj0kLmRhdGVwaWNrZXIuX2dldChhLCJiZWZvcmVTaG93Iik7ZT1iP2IuYXBwbHkoaSxbaSxhXSk6e307aWYoZT09PWZhbHNlKXtyZXR1cm59ZihhLnNldHRpbmdzLGUpO2EubGFzdFZhbD1udWxsOyQuZGF0ZXBpY2tlci5fbGFzdElucHV0PWk7JC5kYXRlcGlja2VyLl9zZXREYXRlRnJvbUZpZWxkKGEpO2lmKCQuZGF0ZXBpY2tlci5faW5EaWFsb2cpe2kudmFsdWU9IiJ9aWYoISQuZGF0ZXBpY2tlci5fcG9zKXskLmRhdGVwaWNrZXIuX3Bvcz0kLmRhdGVwaWNrZXIuX2ZpbmRQb3MoaSk7JC5kYXRlcGlja2VyLl9wb3NbMV0rPWkub2Zmc2V0SGVpZ2h0fWc9ZmFsc2U7JChpKS5wYXJlbnRzKCkuZWFjaChmdW5jdGlvbigpe2d8PSQodGhpcykuY3NzKCJwb3NpdGlvbiIpPT09ImZpeGVkIjtyZXR1cm4hZ30pO289e2xlZnQ6JC5kYXRlcGlja2VyLl9wb3NbMF0sdG9wOiQuZGF0ZXBpY2tlci5fcG9zWzFdfTskLmRhdGVwaWNrZXIuX3Bvcz1udWxsO2EuZHBEaXYuZW1wdHkoKTthLmRwRGl2LmNzcyh7cG9zaXRpb246ImFic29sdXRlIixkaXNwbGF5OiJibG9jayIsdG9wOiItMTAwMHB4In0pOyQuZGF0ZXBpY2tlci5fdXBkYXRlRGF0ZXBpY2tlcihhKTtvPSQuZGF0ZXBpY2tlci5fY2hlY2tPZmZzZXQoYSxvLGcpO2EuZHBEaXYuY3NzKHtwb3NpdGlvbjooJC5kYXRlcGlja2VyLl9pbkRpYWxvZyYmJC5ibG9ja1VJPyJzdGF0aWMiOihnPyJmaXhlZCI6ImFic29sdXRlIikpLGRpc3BsYXk6Im5vbmUiLGxlZnQ6by5sZWZ0KyJweCIsdG9wOm8udG9wKyJweCJ9KTtpZighYS5pbmxpbmUpe3M9JC5kYXRlcGlja2VyLl9nZXQoYSwic2hvd0FuaW0iKTtoPSQuZGF0ZXBpY2tlci5fZ2V0KGEsImR1cmF0aW9uIik7YS5kcERpdi56SW5kZXgoJChpKS56SW5kZXgoKSsxKTskLmRhdGVwaWNrZXIuX2RhdGVwaWNrZXJTaG93aW5nPXRydWU7aWYoJC5lZmZlY3RzJiYkLmVmZmVjdHMuZWZmZWN0W3NdKXthLmRwRGl2LnNob3cocywkLmRhdGVwaWNrZXIuX2dldChhLCJzaG93T3B0aW9ucyIpLGgpfWVsc2V7YS5kcERpdltzfHwic2hvdyJdKHM/aDpudWxsKX1pZigkLmRhdGVwaWNrZXIuX3Nob3VsZEZvY3VzSW5wdXQoYSkpe2EuaW5wdXQuZm9jdXMoKX0kLmRhdGVwaWNrZXIuX2N1ckluc3Q9YX19LF91cGRhdGVEYXRlcGlja2VyOmZ1bmN0aW9uKGkpe3RoaXMubWF4Um93cz00O2M9aTtpLmRwRGl2LmVtcHR5KCkuYXBwZW5kKHRoaXMuX2dlbmVyYXRlSFRNTChpKSk7dGhpcy5fYXR0YWNoSGFuZGxlcnMoaSk7aS5kcERpdi5maW5kKCIuIit0aGlzLl9kYXlPdmVyQ2xhc3MrIiBhIikubW91c2VvdmVyKCk7dmFyIG8sbj10aGlzLl9nZXROdW1iZXJPZk1vbnRocyhpKSxhPW5bMV0sdz0xNztpLmRwRGl2LnJlbW92ZUNsYXNzKCJ1aS1kYXRlcGlja2VyLW11bHRpLTIgdWktZGF0ZXBpY2tlci1tdWx0aS0zIHVpLWRhdGVwaWNrZXItbXVsdGktNCIpLndpZHRoKCIiKTtpZihhPjEpe2kuZHBEaXYuYWRkQ2xhc3MoInVpLWRhdGVwaWNrZXItbXVsdGktIithKS5jc3MoIndpZHRoIiwodyphKSsiZW0iKX1pLmRwRGl2WyhuWzBdIT09MXx8blsxXSE9PTE/ImFkZCI6InJlbW92ZSIpKyJDbGFzcyJdKCJ1aS1kYXRlcGlja2VyLW11bHRpIik7aS5kcERpdlsodGhpcy5fZ2V0KGksImlzUlRMIik/ImFkZCI6InJlbW92ZSIpKyJDbGFzcyJdKCJ1aS1kYXRlcGlja2VyLXJ0bCIpO2lmKGk9PT0kLmRhdGVwaWNrZXIuX2N1ckluc3QmJiQuZGF0ZXBpY2tlci5fZGF0ZXBpY2tlclNob3dpbmcmJiQuZGF0ZXBpY2tlci5fc2hvdWxkRm9jdXNJbnB1dChpKSl7aS5pbnB1dC5mb2N1cygpfWlmKGkueWVhcnNodG1sKXtvPWkueWVhcnNodG1sO3NldFRpbWVvdXQoZnVuY3Rpb24oKXtpZihvPT09aS55ZWFyc2h0bWwmJmkueWVhcnNodG1sKXtpLmRwRGl2LmZpbmQoInNlbGVjdC51aS1kYXRlcGlja2VyLXllYXI6Zmlyc3QiKS5yZXBsYWNlV2l0aChpLnllYXJzaHRtbCl9bz1pLnllYXJzaHRtbD1udWxsfSwwKX19LF9zaG91bGRGb2N1c0lucHV0OmZ1bmN0aW9uKGkpe3JldHVybiBpLmlucHV0JiZpLmlucHV0LmlzKCI6dmlzaWJsZSIpJiYhaS5pbnB1dC5pcygiOmRpc2FibGVkIikmJiFpLmlucHV0LmlzKCI6Zm9jdXMiKX0sX2NoZWNrT2Zmc2V0OmZ1bmN0aW9uKGksbyxhKXt2YXIgYj1pLmRwRGl2Lm91dGVyV2lkdGgoKSxlPWkuZHBEaXYub3V0ZXJIZWlnaHQoKSxnPWkuaW5wdXQ/aS5pbnB1dC5vdXRlcldpZHRoKCk6MCxoPWkuaW5wdXQ/aS5pbnB1dC5vdXRlckhlaWdodCgpOjAsdj1kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGgrKGE/MDokKGRvY3VtZW50KS5zY3JvbGxMZWZ0KCkpLGo9ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodCsoYT8wOiQoZG9jdW1lbnQpLnNjcm9sbFRvcCgpKTtvLmxlZnQtPSh0aGlzLl9nZXQoaSwiaXNSVEwiKT8oYi1nKTowKTtvLmxlZnQtPShhJiZvLmxlZnQ9PT1pLmlucHV0Lm9mZnNldCgpLmxlZnQpPyQoZG9jdW1lbnQpLnNjcm9sbExlZnQoKTowO28udG9wLT0oYSYmby50b3A9PT0oaS5pbnB1dC5vZmZzZXQoKS50b3AraCkpPyQoZG9jdW1lbnQpLnNjcm9sbFRvcCgpOjA7by5sZWZ0LT1NYXRoLm1pbihvLmxlZnQsKG8ubGVmdCtiPnYmJnY+Yik/TWF0aC5hYnMoby5sZWZ0K2Itdik6MCk7by50b3AtPU1hdGgubWluKG8udG9wLChvLnRvcCtlPmomJmo+ZSk/TWF0aC5hYnMoZStoKTowKTtyZXR1cm4gb30sX2ZpbmRQb3M6ZnVuY3Rpb24obyl7dmFyIHAsaT10aGlzLl9nZXRJbnN0KG8pLGE9dGhpcy5fZ2V0KGksImlzUlRMIik7d2hpbGUobyYmKG8udHlwZT09PSJoaWRkZW4ifHxvLm5vZGVUeXBlIT09MXx8JC5leHByLmZpbHRlcnMuaGlkZGVuKG8pKSl7bz1vW2E/InByZXZpb3VzU2libGluZyI6Im5leHRTaWJsaW5nIl19cD0kKG8pLm9mZnNldCgpO3JldHVybltwLmxlZnQscC50b3BdfSxfaGlkZURhdGVwaWNrZXI6ZnVuY3Rpb24oaSl7dmFyIHMsYSxwLG8sYj10aGlzLl9jdXJJbnN0O2lmKCFifHwoaSYmYiE9PSQuZGF0YShpLFApKSl7cmV0dXJufWlmKHRoaXMuX2RhdGVwaWNrZXJTaG93aW5nKXtzPXRoaXMuX2dldChiLCJzaG93QW5pbSIpO2E9dGhpcy5fZ2V0KGIsImR1cmF0aW9uIik7cD1mdW5jdGlvbigpeyQuZGF0ZXBpY2tlci5fdGlkeURpYWxvZyhiKX07aWYoJC5lZmZlY3RzJiYoJC5lZmZlY3RzLmVmZmVjdFtzXXx8JC5lZmZlY3RzW3NdKSl7Yi5kcERpdi5oaWRlKHMsJC5kYXRlcGlja2VyLl9nZXQoYiwic2hvd09wdGlvbnMiKSxhLHApfWVsc2V7Yi5kcERpdlsocz09PSJzbGlkZURvd24iPyJzbGlkZVVwIjoocz09PSJmYWRlSW4iPyJmYWRlT3V0IjoiaGlkZSIpKV0oKHM/YTpudWxsKSxwKX1pZighcyl7cCgpfXRoaXMuX2RhdGVwaWNrZXJTaG93aW5nPWZhbHNlO289dGhpcy5fZ2V0KGIsIm9uQ2xvc2UiKTtpZihvKXtvLmFwcGx5KChiLmlucHV0P2IuaW5wdXRbMF06bnVsbCksWyhiLmlucHV0P2IuaW5wdXQudmFsKCk6IiIpLGJdKX10aGlzLl9sYXN0SW5wdXQ9bnVsbDtpZih0aGlzLl9pbkRpYWxvZyl7dGhpcy5fZGlhbG9nSW5wdXQuY3NzKHtwb3NpdGlvbjoiYWJzb2x1dGUiLGxlZnQ6IjAiLHRvcDoiLTEwMHB4In0pO2lmKCQuYmxvY2tVSSl7JC51bmJsb2NrVUkoKTskKCJib2R5IikuYXBwZW5kKHRoaXMuZHBEaXYpfX10aGlzLl9pbkRpYWxvZz1mYWxzZX19LF90aWR5RGlhbG9nOmZ1bmN0aW9uKGkpe2kuZHBEaXYucmVtb3ZlQ2xhc3ModGhpcy5fZGlhbG9nQ2xhc3MpLnVuYmluZCgiLnVpLWRhdGVwaWNrZXItY2FsZW5kYXIiKX0sX2NoZWNrRXh0ZXJuYWxDbGljazpmdW5jdGlvbihlKXtpZighJC5kYXRlcGlja2VyLl9jdXJJbnN0KXtyZXR1cm59dmFyIGE9JChlLnRhcmdldCksaT0kLmRhdGVwaWNrZXIuX2dldEluc3QoYVswXSk7aWYoKChhWzBdLmlkIT09JC5kYXRlcGlja2VyLl9tYWluRGl2SWQmJmEucGFyZW50cygiIyIrJC5kYXRlcGlja2VyLl9tYWluRGl2SWQpLmxlbmd0aD09PTAmJiFhLmhhc0NsYXNzKCQuZGF0ZXBpY2tlci5tYXJrZXJDbGFzc05hbWUpJiYhYS5jbG9zZXN0KCIuIiskLmRhdGVwaWNrZXIuX3RyaWdnZXJDbGFzcykubGVuZ3RoJiYkLmRhdGVwaWNrZXIuX2RhdGVwaWNrZXJTaG93aW5nJiYhKCQuZGF0ZXBpY2tlci5faW5EaWFsb2cmJiQuYmxvY2tVSSkpKXx8KGEuaGFzQ2xhc3MoJC5kYXRlcGlja2VyLm1hcmtlckNsYXNzTmFtZSkmJiQuZGF0ZXBpY2tlci5fY3VySW5zdCE9PWkpKXskLmRhdGVwaWNrZXIuX2hpZGVEYXRlcGlja2VyKCl9fSxfYWRqdXN0RGF0ZTpmdW5jdGlvbihpLG8scCl7dmFyIHQ9JChpKSxhPXRoaXMuX2dldEluc3QodFswXSk7aWYodGhpcy5faXNEaXNhYmxlZERhdGVwaWNrZXIodFswXSkpe3JldHVybn10aGlzLl9hZGp1c3RJbnN0RGF0ZShhLG8rKHA9PT0iTSI/dGhpcy5fZ2V0KGEsInNob3dDdXJyZW50QXRQb3MiKTowKSxwKTt0aGlzLl91cGRhdGVEYXRlcGlja2VyKGEpfSxfZ290b1RvZGF5OmZ1bmN0aW9uKGkpe3ZhciBhLHQ9JChpKSxiPXRoaXMuX2dldEluc3QodFswXSk7aWYodGhpcy5fZ2V0KGIsImdvdG9DdXJyZW50IikmJmIuY3VycmVudERheSl7Yi5zZWxlY3RlZERheT1iLmN1cnJlbnREYXk7Yi5kcmF3TW9udGg9Yi5zZWxlY3RlZE1vbnRoPWIuY3VycmVudE1vbnRoO2IuZHJhd1llYXI9Yi5zZWxlY3RlZFllYXI9Yi5jdXJyZW50WWVhcn1lbHNle2E9bmV3IERhdGUoKTtiLnNlbGVjdGVkRGF5PWEuZ2V0RGF0ZSgpO2IuZHJhd01vbnRoPWIuc2VsZWN0ZWRNb250aD1hLmdldE1vbnRoKCk7Yi5kcmF3WWVhcj1iLnNlbGVjdGVkWWVhcj1hLmdldEZ1bGxZZWFyKCl9dGhpcy5fbm90aWZ5Q2hhbmdlKGIpO3RoaXMuX2FkanVzdERhdGUodCl9LF9zZWxlY3RNb250aFllYXI6ZnVuY3Rpb24oaSxzLHApe3ZhciB0PSQoaSksYT10aGlzLl9nZXRJbnN0KHRbMF0pO2FbInNlbGVjdGVkIisocD09PSJNIj8iTW9udGgiOiJZZWFyIildPWFbImRyYXciKyhwPT09Ik0iPyJNb250aCI6IlllYXIiKV09cGFyc2VJbnQocy5vcHRpb25zW3Muc2VsZWN0ZWRJbmRleF0udmFsdWUsMTApO3RoaXMuX25vdGlmeUNoYW5nZShhKTt0aGlzLl9hZGp1c3REYXRlKHQpfSxfc2VsZWN0RGF5OmZ1bmN0aW9uKGksbSx5LHQpe3ZhciBhLGI9JChpKTtpZigkKHQpLmhhc0NsYXNzKHRoaXMuX3Vuc2VsZWN0YWJsZUNsYXNzKXx8dGhpcy5faXNEaXNhYmxlZERhdGVwaWNrZXIoYlswXSkpe3JldHVybn1hPXRoaXMuX2dldEluc3QoYlswXSk7YS5zZWxlY3RlZERheT1hLmN1cnJlbnREYXk9JCgiYSIsdCkuaHRtbCgpO2Euc2VsZWN0ZWRNb250aD1hLmN1cnJlbnRNb250aD1tO2Euc2VsZWN0ZWRZZWFyPWEuY3VycmVudFllYXI9eTt0aGlzLl9zZWxlY3REYXRlKGksdGhpcy5fZm9ybWF0RGF0ZShhLGEuY3VycmVudERheSxhLmN1cnJlbnRNb250aCxhLmN1cnJlbnRZZWFyKSl9LF9jbGVhckRhdGU6ZnVuY3Rpb24oaSl7dmFyIHQ9JChpKTt0aGlzLl9zZWxlY3REYXRlKHQsIiIpfSxfc2VsZWN0RGF0ZTpmdW5jdGlvbihpLGEpe3ZhciBvLHQ9JChpKSxiPXRoaXMuX2dldEluc3QodFswXSk7YT0oYSE9bnVsbD9hOnRoaXMuX2Zvcm1hdERhdGUoYikpO2lmKGIuaW5wdXQpe2IuaW5wdXQudmFsKGEpfXRoaXMuX3VwZGF0ZUFsdGVybmF0ZShiKTtvPXRoaXMuX2dldChiLCJvblNlbGVjdCIpO2lmKG8pe28uYXBwbHkoKGIuaW5wdXQ/Yi5pbnB1dFswXTpudWxsKSxbYSxiXSl9ZWxzZSBpZihiLmlucHV0KXtiLmlucHV0LnRyaWdnZXIoImNoYW5nZSIpfWlmKGIuaW5saW5lKXt0aGlzLl91cGRhdGVEYXRlcGlja2VyKGIpfWVsc2V7dGhpcy5faGlkZURhdGVwaWNrZXIoKTt0aGlzLl9sYXN0SW5wdXQ9Yi5pbnB1dFswXTtpZih0eXBlb2YoYi5pbnB1dFswXSkhPT0ib2JqZWN0Iil7Yi5pbnB1dC5mb2N1cygpfXRoaXMuX2xhc3RJbnB1dD1udWxsfX0sX3VwZGF0ZUFsdGVybmF0ZTpmdW5jdGlvbihpKXt2YXIgYSxiLGUsZz10aGlzLl9nZXQoaSwiYWx0RmllbGQiKTtpZihnKXthPXRoaXMuX2dldChpLCJhbHRGb3JtYXQiKXx8dGhpcy5fZ2V0KGksImRhdGVGb3JtYXQiKTtiPXRoaXMuX2dldERhdGUoaSk7ZT10aGlzLmZvcm1hdERhdGUoYSxiLHRoaXMuX2dldEZvcm1hdENvbmZpZyhpKSk7JChnKS5lYWNoKGZ1bmN0aW9uKCl7JCh0aGlzKS52YWwoZSl9KX19LG5vV2Vla2VuZHM6ZnVuY3Rpb24oYSl7dmFyIGI9YS5nZXREYXkoKTtyZXR1cm5bKGI+MCYmYjw2KSwiIl19LGlzbzg2MDFXZWVrOmZ1bmN0aW9uKGEpe3ZhciB0LGI9bmV3IERhdGUoYS5nZXRUaW1lKCkpO2Iuc2V0RGF0ZShiLmdldERhdGUoKSs0LShiLmdldERheSgpfHw3KSk7dD1iLmdldFRpbWUoKTtiLnNldE1vbnRoKDApO2Iuc2V0RGF0ZSgxKTtyZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJvdW5kKCh0LWIpLzg2NDAwMDAwKS83KSsxfSxwYXJzZURhdGU6ZnVuY3Rpb24oZSxnLHMpe2lmKGU9PW51bGx8fGc9PW51bGwpe3Rocm93IkludmFsaWQgYXJndW1lbnRzIn1nPSh0eXBlb2YgZz09PSJvYmplY3QiP2cudG9TdHJpbmcoKTpnKyIiKTtpZihnPT09IiIpe3JldHVybiBudWxsfXZhciBGLGgsaixWPTAsbD0ocz9zLnNob3J0WWVhckN1dG9mZjpudWxsKXx8dGhpcy5fZGVmYXVsdHMuc2hvcnRZZWFyQ3V0b2ZmLG09KHR5cGVvZiBsIT09InN0cmluZyI/bDpuZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCklMTAwK3BhcnNlSW50KGwsMTApKSxuPShzP3MuZGF5TmFtZXNTaG9ydDpudWxsKXx8dGhpcy5fZGVmYXVsdHMuZGF5TmFtZXNTaG9ydCxvPShzP3MuZGF5TmFtZXM6bnVsbCl8fHRoaXMuX2RlZmF1bHRzLmRheU5hbWVzLHA9KHM/cy5tb250aE5hbWVzU2hvcnQ6bnVsbCl8fHRoaXMuX2RlZmF1bHRzLm1vbnRoTmFtZXNTaG9ydCxxPShzP3MubW9udGhOYW1lczpudWxsKXx8dGhpcy5fZGVmYXVsdHMubW9udGhOYW1lcyx5PS0xLHI9LTEsdD0tMSx3PS0xLHg9ZmFsc2UseixBPWZ1bmN0aW9uKGEpe3ZhciBiPShGKzE8ZS5sZW5ndGgmJmUuY2hhckF0KEYrMSk9PT1hKTtpZihiKXtGKyt9cmV0dXJuIGJ9LEI9ZnVuY3Rpb24oYSl7dmFyIGk9QShhKSxiPShhPT09IkAiPzE0OihhPT09IiEiPzIwOihhPT09InkiJiZpPzQ6KGE9PT0ibyI/MzoyKSkpKSxrPW5ldyBSZWdFeHAoIl5cXGR7MSwiK2IrIn0iKSx2PWcuc3Vic3RyaW5nKFYpLm1hdGNoKGspO2lmKCF2KXt0aHJvdyJNaXNzaW5nIG51bWJlciBhdCBwb3NpdGlvbiAiK1Z9Vis9dlswXS5sZW5ndGg7cmV0dXJuIHBhcnNlSW50KHZbMF0sMTApfSxDPWZ1bmN0aW9uKEcsSCxJKXt2YXIgSj0tMSxLPSQubWFwKEEoRyk/STpILGZ1bmN0aW9uKHYsayl7cmV0dXJuW1trLHZdXX0pLnNvcnQoZnVuY3Rpb24oYSxiKXtyZXR1cm4tKGFbMV0ubGVuZ3RoLWJbMV0ubGVuZ3RoKX0pOyQuZWFjaChLLGZ1bmN0aW9uKGksYSl7dmFyIGI9YVsxXTtpZihnLnN1YnN0cihWLGIubGVuZ3RoKS50b0xvd2VyQ2FzZSgpPT09Yi50b0xvd2VyQ2FzZSgpKXtKPWFbMF07Vis9Yi5sZW5ndGg7cmV0dXJuIGZhbHNlfX0pO2lmKEohPT0tMSl7cmV0dXJuIEorMX1lbHNle3Rocm93IlVua25vd24gbmFtZSBhdCBwb3NpdGlvbiAiK1Z9fSxFPWZ1bmN0aW9uKCl7aWYoZy5jaGFyQXQoVikhPT1lLmNoYXJBdChGKSl7dGhyb3ciVW5leHBlY3RlZCBsaXRlcmFsIGF0IHBvc2l0aW9uICIrVn1WKyt9O2ZvcihGPTA7RjxlLmxlbmd0aDtGKyspe2lmKHgpe2lmKGUuY2hhckF0KEYpPT09IiciJiYhQSgiJyIpKXt4PWZhbHNlfWVsc2V7RSgpfX1lbHNle3N3aXRjaChlLmNoYXJBdChGKSl7Y2FzZSJkIjp0PUIoImQiKTticmVhaztjYXNlIkQiOkMoIkQiLG4sbyk7YnJlYWs7Y2FzZSJvIjp3PUIoIm8iKTticmVhaztjYXNlIm0iOnI9QigibSIpO2JyZWFrO2Nhc2UiTSI6cj1DKCJNIixwLHEpO2JyZWFrO2Nhc2UieSI6eT1CKCJ5Iik7YnJlYWs7Y2FzZSJAIjp6PW5ldyBEYXRlKEIoIkAiKSk7eT16LmdldEZ1bGxZZWFyKCk7cj16LmdldE1vbnRoKCkrMTt0PXouZ2V0RGF0ZSgpO2JyZWFrO2Nhc2UiISI6ej1uZXcgRGF0ZSgoQigiISIpLXRoaXMuX3RpY2tzVG8xOTcwKS8xMDAwMCk7eT16LmdldEZ1bGxZZWFyKCk7cj16LmdldE1vbnRoKCkrMTt0PXouZ2V0RGF0ZSgpO2JyZWFrO2Nhc2UiJyI6aWYoQSgiJyIpKXtFKCl9ZWxzZXt4PXRydWV9YnJlYWs7ZGVmYXVsdDpFKCl9fX1pZihWPGcubGVuZ3RoKXtqPWcuc3Vic3RyKFYpO2lmKCEvXlxzKy8udGVzdChqKSl7dGhyb3ciRXh0cmEvdW5wYXJzZWQgY2hhcmFjdGVycyBmb3VuZCBpbiBkYXRlOiAiK2p9fWlmKHk9PT0tMSl7eT1uZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCl9ZWxzZSBpZih5PDEwMCl7eSs9bmV3IERhdGUoKS5nZXRGdWxsWWVhcigpLW5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKSUxMDArKHk8PW0/MDotMTAwKX1pZih3Pi0xKXtyPTE7dD13O2Rve2g9dGhpcy5fZ2V0RGF5c0luTW9udGgoeSxyLTEpO2lmKHQ8PWgpe2JyZWFrfXIrKzt0LT1ofXdoaWxlKHRydWUpfXo9dGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3QobmV3IERhdGUoeSxyLTEsdCkpO2lmKHouZ2V0RnVsbFllYXIoKSE9PXl8fHouZ2V0TW9udGgoKSsxIT09cnx8ei5nZXREYXRlKCkhPT10KXt0aHJvdyJJbnZhbGlkIGRhdGUifXJldHVybiB6fSxBVE9NOiJ5eS1tbS1kZCIsQ09PS0lFOiJELCBkZCBNIHl5IixJU09fODYwMToieXktbW0tZGQiLFJGQ184MjI6IkQsIGQgTSB5IixSRkNfODUwOiJERCwgZGQtTS15IixSRkNfMTAzNjoiRCwgZCBNIHkiLFJGQ18xMTIzOiJELCBkIE0geXkiLFJGQ18yODIyOiJELCBkIE0geXkiLFJTUzoiRCwgZCBNIHkiLFRJQ0tTOiIhIixUSU1FU1RBTVA6IkAiLFczQzoieXktbW0tZGQiLF90aWNrc1RvMTk3MDooKCgxOTcwLTEpKjM2NStNYXRoLmZsb29yKDE5NzAvNCktTWF0aC5mbG9vcigxOTcwLzEwMCkrTWF0aC5mbG9vcigxOTcwLzQwMCkpKjI0KjYwKjYwKjEwMDAwMDAwKSxmb3JtYXREYXRlOmZ1bmN0aW9uKGEsYixzKXtpZighYil7cmV0dXJuIiJ9dmFyIEYsZT0ocz9zLmRheU5hbWVzU2hvcnQ6bnVsbCl8fHRoaXMuX2RlZmF1bHRzLmRheU5hbWVzU2hvcnQsZz0ocz9zLmRheU5hbWVzOm51bGwpfHx0aGlzLl9kZWZhdWx0cy5kYXlOYW1lcyxtPShzP3MubW9udGhOYW1lc1Nob3J0Om51bGwpfHx0aGlzLl9kZWZhdWx0cy5tb250aE5hbWVzU2hvcnQsaD0ocz9zLm1vbnRoTmFtZXM6bnVsbCl8fHRoaXMuX2RlZmF1bHRzLm1vbnRoTmFtZXMsbD1mdW5jdGlvbihuKXt2YXIgcD0oRisxPGEubGVuZ3RoJiZhLmNoYXJBdChGKzEpPT09bik7aWYocCl7RisrfXJldHVybiBwfSxpPWZ1bmN0aW9uKG4sdixwKXt2YXIgcT0iIit2O2lmKGwobikpe3doaWxlKHEubGVuZ3RoPHApe3E9IjAiK3F9fXJldHVybiBxfSxqPWZ1bmN0aW9uKG4sdixwLHEpe3JldHVybihsKG4pP3Fbdl06cFt2XSl9LG89IiIsaz1mYWxzZTtpZihiKXtmb3IoRj0wO0Y8YS5sZW5ndGg7RisrKXtpZihrKXtpZihhLmNoYXJBdChGKT09PSInIiYmIWwoIiciKSl7az1mYWxzZX1lbHNle28rPWEuY2hhckF0KEYpfX1lbHNle3N3aXRjaChhLmNoYXJBdChGKSl7Y2FzZSJkIjpvKz1pKCJkIixiLmdldERhdGUoKSwyKTticmVhaztjYXNlIkQiOm8rPWooIkQiLGIuZ2V0RGF5KCksZSxnKTticmVhaztjYXNlIm8iOm8rPWkoIm8iLE1hdGgucm91bmQoKG5ldyBEYXRlKGIuZ2V0RnVsbFllYXIoKSxiLmdldE1vbnRoKCksYi5nZXREYXRlKCkpLmdldFRpbWUoKS1uZXcgRGF0ZShiLmdldEZ1bGxZZWFyKCksMCwwKS5nZXRUaW1lKCkpLzg2NDAwMDAwKSwzKTticmVhaztjYXNlIm0iOm8rPWkoIm0iLGIuZ2V0TW9udGgoKSsxLDIpO2JyZWFrO2Nhc2UiTSI6bys9aigiTSIsYi5nZXRNb250aCgpLG0saCk7YnJlYWs7Y2FzZSJ5IjpvKz0obCgieSIpP2IuZ2V0RnVsbFllYXIoKTooYi5nZXRZZWFyKCklMTAwPDEwPyIwIjoiIikrYi5nZXRZZWFyKCklMTAwKTticmVhaztjYXNlIkAiOm8rPWIuZ2V0VGltZSgpO2JyZWFrO2Nhc2UiISI6bys9Yi5nZXRUaW1lKCkqMTAwMDArdGhpcy5fdGlja3NUbzE5NzA7YnJlYWs7Y2FzZSInIjppZihsKCInIikpe28rPSInIn1lbHNle2s9dHJ1ZX1icmVhaztkZWZhdWx0Om8rPWEuY2hhckF0KEYpfX19fXJldHVybiBvfSxfcG9zc2libGVDaGFyczpmdW5jdGlvbihhKXt2YXIgRixiPSIiLGw9ZmFsc2UsZT1mdW5jdGlvbihtKXt2YXIgZz0oRisxPGEubGVuZ3RoJiZhLmNoYXJBdChGKzEpPT09bSk7aWYoZyl7RisrfXJldHVybiBnfTtmb3IoRj0wO0Y8YS5sZW5ndGg7RisrKXtpZihsKXtpZihhLmNoYXJBdChGKT09PSInIiYmIWUoIiciKSl7bD1mYWxzZX1lbHNle2IrPWEuY2hhckF0KEYpfX1lbHNle3N3aXRjaChhLmNoYXJBdChGKSl7Y2FzZSJkIjpjYXNlIm0iOmNhc2UieSI6Y2FzZSJAIjpiKz0iMDEyMzQ1Njc4OSI7YnJlYWs7Y2FzZSJEIjpjYXNlIk0iOnJldHVybiBudWxsO2Nhc2UiJyI6aWYoZSgiJyIpKXtiKz0iJyJ9ZWxzZXtsPXRydWV9YnJlYWs7ZGVmYXVsdDpiKz1hLmNoYXJBdChGKX19fXJldHVybiBifSxfZ2V0OmZ1bmN0aW9uKGksbil7cmV0dXJuIGkuc2V0dGluZ3Nbbl0hPT11P2kuc2V0dGluZ3Nbbl06dGhpcy5fZGVmYXVsdHNbbl19LF9zZXREYXRlRnJvbUZpZWxkOmZ1bmN0aW9uKGksbil7aWYoaS5pbnB1dC52YWwoKT09PWkubGFzdFZhbCl7cmV0dXJufXZhciBhPXRoaXMuX2dldChpLCJkYXRlRm9ybWF0IiksYj1pLmxhc3RWYWw9aS5pbnB1dD9pLmlucHV0LnZhbCgpOm51bGwsZT10aGlzLl9nZXREZWZhdWx0RGF0ZShpKSxnPWUscz10aGlzLl9nZXRGb3JtYXRDb25maWcoaSk7dHJ5e2c9dGhpcy5wYXJzZURhdGUoYSxiLHMpfHxlfWNhdGNoKGgpe2I9KG4/IiI6Yil9aS5zZWxlY3RlZERheT1nLmdldERhdGUoKTtpLmRyYXdNb250aD1pLnNlbGVjdGVkTW9udGg9Zy5nZXRNb250aCgpO2kuZHJhd1llYXI9aS5zZWxlY3RlZFllYXI9Zy5nZXRGdWxsWWVhcigpO2kuY3VycmVudERheT0oYj9nLmdldERhdGUoKTowKTtpLmN1cnJlbnRNb250aD0oYj9nLmdldE1vbnRoKCk6MCk7aS5jdXJyZW50WWVhcj0oYj9nLmdldEZ1bGxZZWFyKCk6MCk7dGhpcy5fYWRqdXN0SW5zdERhdGUoaSl9LF9nZXREZWZhdWx0RGF0ZTpmdW5jdGlvbihpKXtyZXR1cm4gdGhpcy5fcmVzdHJpY3RNaW5NYXgoaSx0aGlzLl9kZXRlcm1pbmVEYXRlKGksdGhpcy5fZ2V0KGksImRlZmF1bHREYXRlIiksbmV3IERhdGUoKSkpfSxfZGV0ZXJtaW5lRGF0ZTpmdW5jdGlvbihpLGEsYil7dmFyIG89ZnVuY3Rpb24oZSl7dmFyIGE9bmV3IERhdGUoKTthLnNldERhdGUoYS5nZXREYXRlKCkrZSk7cmV0dXJuIGF9LGc9ZnVuY3Rpb24oaCl7dHJ5e3JldHVybiAkLmRhdGVwaWNrZXIucGFyc2VEYXRlKCQuZGF0ZXBpY2tlci5fZ2V0KGksImRhdGVGb3JtYXQiKSxoLCQuZGF0ZXBpY2tlci5fZ2V0Rm9ybWF0Q29uZmlnKGkpKX1jYXRjaChlKXt9dmFyIGE9KGgudG9Mb3dlckNhc2UoKS5tYXRjaCgvXmMvKT8kLmRhdGVwaWNrZXIuX2dldERhdGUoaSk6bnVsbCl8fG5ldyBEYXRlKCkseT1hLmdldEZ1bGxZZWFyKCksbT1hLmdldE1vbnRoKCksaj1hLmdldERhdGUoKSxwPS8oWytcLV0/WzAtOV0rKVxzKihkfER8d3xXfG18TXx5fFkpPy9nLGs9cC5leGVjKGgpO3doaWxlKGspe3N3aXRjaChrWzJdfHwiZCIpe2Nhc2UiZCI6Y2FzZSJEIjpqKz1wYXJzZUludChrWzFdLDEwKTticmVhaztjYXNlInciOmNhc2UiVyI6ais9cGFyc2VJbnQoa1sxXSwxMCkqNzticmVhaztjYXNlIm0iOmNhc2UiTSI6bSs9cGFyc2VJbnQoa1sxXSwxMCk7aj1NYXRoLm1pbihqLCQuZGF0ZXBpY2tlci5fZ2V0RGF5c0luTW9udGgoeSxtKSk7YnJlYWs7Y2FzZSJ5IjpjYXNlIlkiOnkrPXBhcnNlSW50KGtbMV0sMTApO2o9TWF0aC5taW4oaiwkLmRhdGVwaWNrZXIuX2dldERheXNJbk1vbnRoKHksbSkpO2JyZWFrfWs9cC5leGVjKGgpfXJldHVybiBuZXcgRGF0ZSh5LG0sail9LG49KGE9PW51bGx8fGE9PT0iIj9iOih0eXBlb2YgYT09PSJzdHJpbmciP2coYSk6KHR5cGVvZiBhPT09Im51bWJlciI/KGlzTmFOKGEpP2I6byhhKSk6bmV3IERhdGUoYS5nZXRUaW1lKCkpKSkpO249KG4mJm4udG9TdHJpbmcoKT09PSJJbnZhbGlkIERhdGUiP2I6bik7aWYobil7bi5zZXRIb3VycygwKTtuLnNldE1pbnV0ZXMoMCk7bi5zZXRTZWNvbmRzKDApO24uc2V0TWlsbGlzZWNvbmRzKDApfXJldHVybiB0aGlzLl9kYXlsaWdodFNhdmluZ0FkanVzdChuKX0sX2RheWxpZ2h0U2F2aW5nQWRqdXN0OmZ1bmN0aW9uKGEpe2lmKCFhKXtyZXR1cm4gbnVsbH1hLnNldEhvdXJzKGEuZ2V0SG91cnMoKT4xMj9hLmdldEhvdXJzKCkrMjowKTtyZXR1cm4gYX0sX3NldERhdGU6ZnVuY3Rpb24oaSxhLG4pe3ZhciBiPSFhLG89aS5zZWxlY3RlZE1vbnRoLGU9aS5zZWxlY3RlZFllYXIsZz10aGlzLl9yZXN0cmljdE1pbk1heChpLHRoaXMuX2RldGVybWluZURhdGUoaSxhLG5ldyBEYXRlKCkpKTtpLnNlbGVjdGVkRGF5PWkuY3VycmVudERheT1nLmdldERhdGUoKTtpLmRyYXdNb250aD1pLnNlbGVjdGVkTW9udGg9aS5jdXJyZW50TW9udGg9Zy5nZXRNb250aCgpO2kuZHJhd1llYXI9aS5zZWxlY3RlZFllYXI9aS5jdXJyZW50WWVhcj1nLmdldEZ1bGxZZWFyKCk7aWYoKG8hPT1pLnNlbGVjdGVkTW9udGh8fGUhPT1pLnNlbGVjdGVkWWVhcikmJiFuKXt0aGlzLl9ub3RpZnlDaGFuZ2UoaSl9dGhpcy5fYWRqdXN0SW5zdERhdGUoaSk7aWYoaS5pbnB1dCl7aS5pbnB1dC52YWwoYj8iIjp0aGlzLl9mb3JtYXREYXRlKGkpKX19LF9nZXREYXRlOmZ1bmN0aW9uKGkpe3ZhciBzPSghaS5jdXJyZW50WWVhcnx8KGkuaW5wdXQmJmkuaW5wdXQudmFsKCk9PT0iIik/bnVsbDp0aGlzLl9kYXlsaWdodFNhdmluZ0FkanVzdChuZXcgRGF0ZShpLmN1cnJlbnRZZWFyLGkuY3VycmVudE1vbnRoLGkuY3VycmVudERheSkpKTtyZXR1cm4gc30sX2F0dGFjaEhhbmRsZXJzOmZ1bmN0aW9uKGkpe3ZhciBzPXRoaXMuX2dldChpLCJzdGVwTW9udGhzIiksYT0iIyIraS5pZC5yZXBsYWNlKC9cXFxcL2csIlxcIik7aS5kcERpdi5maW5kKCJbZGF0YS1oYW5kbGVyXSIpLm1hcChmdW5jdGlvbigpe3ZhciBoPXtwcmV2OmZ1bmN0aW9uKCl7JC5kYXRlcGlja2VyLl9hZGp1c3REYXRlKGEsLXMsIk0iKX0sbmV4dDpmdW5jdGlvbigpeyQuZGF0ZXBpY2tlci5fYWRqdXN0RGF0ZShhLCtzLCJNIil9LGhpZGU6ZnVuY3Rpb24oKXskLmRhdGVwaWNrZXIuX2hpZGVEYXRlcGlja2VyKCl9LHRvZGF5OmZ1bmN0aW9uKCl7JC5kYXRlcGlja2VyLl9nb3RvVG9kYXkoYSl9LHNlbGVjdERheTpmdW5jdGlvbigpeyQuZGF0ZXBpY2tlci5fc2VsZWN0RGF5KGEsK3RoaXMuZ2V0QXR0cmlidXRlKCJkYXRhLW1vbnRoIiksK3RoaXMuZ2V0QXR0cmlidXRlKCJkYXRhLXllYXIiKSx0aGlzKTtyZXR1cm4gZmFsc2V9LHNlbGVjdE1vbnRoOmZ1bmN0aW9uKCl7JC5kYXRlcGlja2VyLl9zZWxlY3RNb250aFllYXIoYSx0aGlzLCJNIik7cmV0dXJuIGZhbHNlfSxzZWxlY3RZZWFyOmZ1bmN0aW9uKCl7JC5kYXRlcGlja2VyLl9zZWxlY3RNb250aFllYXIoYSx0aGlzLCJZIik7cmV0dXJuIGZhbHNlfX07JCh0aGlzKS5iaW5kKHRoaXMuZ2V0QXR0cmlidXRlKCJkYXRhLWV2ZW50IiksaFt0aGlzLmdldEF0dHJpYnV0ZSgiZGF0YS1oYW5kbGVyIildKX0pfSxfZ2VuZXJhdGVIVE1MOmZ1bmN0aW9uKGkpe3ZhciBtLHAsYSxuLGIsZSxnLGgsaixrLHMsbCxvLHEscix0LHYsdyx4LHkseixBLEIsQyxFLEYsRyxILEksSixLLEwsTSxOLFIsTyxRLFMsVCxVPW5ldyBEYXRlKCksVj10aGlzLl9kYXlsaWdodFNhdmluZ0FkanVzdChuZXcgRGF0ZShVLmdldEZ1bGxZZWFyKCksVS5nZXRNb250aCgpLFUuZ2V0RGF0ZSgpKSksVz10aGlzLl9nZXQoaSwiaXNSVEwiKSxYPXRoaXMuX2dldChpLCJzaG93QnV0dG9uUGFuZWwiKSxZPXRoaXMuX2dldChpLCJoaWRlSWZOb1ByZXZOZXh0IiksWj10aGlzLl9nZXQoaSwibmF2aWdhdGlvbkFzRGF0ZUZvcm1hdCIpLF89dGhpcy5fZ2V0TnVtYmVyT2ZNb250aHMoaSksYTE9dGhpcy5fZ2V0KGksInNob3dDdXJyZW50QXRQb3MiKSxiMT10aGlzLl9nZXQoaSwic3RlcE1vbnRocyIpLGMxPShfWzBdIT09MXx8X1sxXSE9PTEpLGQxPXRoaXMuX2RheWxpZ2h0U2F2aW5nQWRqdXN0KCghaS5jdXJyZW50RGF5P25ldyBEYXRlKDk5OTksOSw5KTpuZXcgRGF0ZShpLmN1cnJlbnRZZWFyLGkuY3VycmVudE1vbnRoLGkuY3VycmVudERheSkpKSxlMT10aGlzLl9nZXRNaW5NYXhEYXRlKGksIm1pbiIpLGYxPXRoaXMuX2dldE1pbk1heERhdGUoaSwibWF4IiksZzE9aS5kcmF3TW9udGgtYTEsaDE9aS5kcmF3WWVhcjtpZihnMTwwKXtnMSs9MTI7aDEtLX1pZihmMSl7bT10aGlzLl9kYXlsaWdodFNhdmluZ0FkanVzdChuZXcgRGF0ZShmMS5nZXRGdWxsWWVhcigpLGYxLmdldE1vbnRoKCktKF9bMF0qX1sxXSkrMSxmMS5nZXREYXRlKCkpKTttPShlMSYmbTxlMT9lMTptKTt3aGlsZSh0aGlzLl9kYXlsaWdodFNhdmluZ0FkanVzdChuZXcgRGF0ZShoMSxnMSwxKSk+bSl7ZzEtLTtpZihnMTwwKXtnMT0xMTtoMS0tfX19aS5kcmF3TW9udGg9ZzE7aS5kcmF3WWVhcj1oMTtwPXRoaXMuX2dldChpLCJwcmV2VGV4dCIpO3A9KCFaP3A6dGhpcy5mb3JtYXREYXRlKHAsdGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3QobmV3IERhdGUoaDEsZzEtYjEsMSkpLHRoaXMuX2dldEZvcm1hdENvbmZpZyhpKSkpO2E9KHRoaXMuX2NhbkFkanVzdE1vbnRoKGksLTEsaDEsZzEpPyI8YSBjbGFzcz0ndWktZGF0ZXBpY2tlci1wcmV2IHVpLWNvcm5lci1hbGwnIGRhdGEtaGFuZGxlcj0ncHJldicgZGF0YS1ldmVudD0nY2xpY2snIisiIHRpdGxlPSciK3ArIic+PHNwYW4gY2xhc3M9J3VpLWljb24gdWktaWNvbi1jaXJjbGUtdHJpYW5nbGUtIisoVz8iZSI6InciKSsiJz4iK3ArIjwvc3Bhbj48L2E+IjooWT8iIjoiPGEgY2xhc3M9J3VpLWRhdGVwaWNrZXItcHJldiB1aS1jb3JuZXItYWxsIHVpLXN0YXRlLWRpc2FibGVkJyB0aXRsZT0nIitwKyInPjxzcGFuIGNsYXNzPSd1aS1pY29uIHVpLWljb24tY2lyY2xlLXRyaWFuZ2xlLSIrKFc/ImUiOiJ3IikrIic+IitwKyI8L3NwYW4+PC9hPiIpKTtuPXRoaXMuX2dldChpLCJuZXh0VGV4dCIpO249KCFaP246dGhpcy5mb3JtYXREYXRlKG4sdGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3QobmV3IERhdGUoaDEsZzErYjEsMSkpLHRoaXMuX2dldEZvcm1hdENvbmZpZyhpKSkpO2I9KHRoaXMuX2NhbkFkanVzdE1vbnRoKGksKzEsaDEsZzEpPyI8YSBjbGFzcz0ndWktZGF0ZXBpY2tlci1uZXh0IHVpLWNvcm5lci1hbGwnIGRhdGEtaGFuZGxlcj0nbmV4dCcgZGF0YS1ldmVudD0nY2xpY2snIisiIHRpdGxlPSciK24rIic+PHNwYW4gY2xhc3M9J3VpLWljb24gdWktaWNvbi1jaXJjbGUtdHJpYW5nbGUtIisoVz8idyI6ImUiKSsiJz4iK24rIjwvc3Bhbj48L2E+IjooWT8iIjoiPGEgY2xhc3M9J3VpLWRhdGVwaWNrZXItbmV4dCB1aS1jb3JuZXItYWxsIHVpLXN0YXRlLWRpc2FibGVkJyB0aXRsZT0nIituKyInPjxzcGFuIGNsYXNzPSd1aS1pY29uIHVpLWljb24tY2lyY2xlLXRyaWFuZ2xlLSIrKFc/InciOiJlIikrIic+IituKyI8L3NwYW4+PC9hPiIpKTtlPXRoaXMuX2dldChpLCJjdXJyZW50VGV4dCIpO2c9KHRoaXMuX2dldChpLCJnb3RvQ3VycmVudCIpJiZpLmN1cnJlbnREYXk/ZDE6Vik7ZT0oIVo/ZTp0aGlzLmZvcm1hdERhdGUoZSxnLHRoaXMuX2dldEZvcm1hdENvbmZpZyhpKSkpO2g9KCFpLmlubGluZT8iPGJ1dHRvbiB0eXBlPSdidXR0b24nIGNsYXNzPSd1aS1kYXRlcGlja2VyLWNsb3NlIHVpLXN0YXRlLWRlZmF1bHQgdWktcHJpb3JpdHktcHJpbWFyeSB1aS1jb3JuZXItYWxsJyBkYXRhLWhhbmRsZXI9J2hpZGUnIGRhdGEtZXZlbnQ9J2NsaWNrJz4iK3RoaXMuX2dldChpLCJjbG9zZVRleHQiKSsiPC9idXR0b24+IjoiIik7aj0oWCk/IjxkaXYgY2xhc3M9J3VpLWRhdGVwaWNrZXItYnV0dG9ucGFuZSB1aS13aWRnZXQtY29udGVudCc+IisoVz9oOiIiKSsodGhpcy5faXNJblJhbmdlKGksZyk/IjxidXR0b24gdHlwZT0nYnV0dG9uJyBjbGFzcz0ndWktZGF0ZXBpY2tlci1jdXJyZW50IHVpLXN0YXRlLWRlZmF1bHQgdWktcHJpb3JpdHktc2Vjb25kYXJ5IHVpLWNvcm5lci1hbGwnIGRhdGEtaGFuZGxlcj0ndG9kYXknIGRhdGEtZXZlbnQ9J2NsaWNrJyIrIj4iK2UrIjwvYnV0dG9uPiI6IiIpKyhXPyIiOmgpKyI8L2Rpdj4iOiIiO2s9cGFyc2VJbnQodGhpcy5fZ2V0KGksImZpcnN0RGF5IiksMTApO2s9KGlzTmFOKGspPzA6ayk7cz10aGlzLl9nZXQoaSwic2hvd1dlZWsiKTtsPXRoaXMuX2dldChpLCJkYXlOYW1lcyIpO289dGhpcy5fZ2V0KGksImRheU5hbWVzTWluIik7cT10aGlzLl9nZXQoaSwibW9udGhOYW1lcyIpO3I9dGhpcy5fZ2V0KGksIm1vbnRoTmFtZXNTaG9ydCIpO3Q9dGhpcy5fZ2V0KGksImJlZm9yZVNob3dEYXkiKTt2PXRoaXMuX2dldChpLCJzaG93T3RoZXJNb250aHMiKTt3PXRoaXMuX2dldChpLCJzZWxlY3RPdGhlck1vbnRocyIpO3g9dGhpcy5fZ2V0RGVmYXVsdERhdGUoaSk7eT0iIjt6O2ZvcihBPTA7QTxfWzBdO0ErKyl7Qj0iIjt0aGlzLm1heFJvd3M9NDtmb3IoQz0wO0M8X1sxXTtDKyspe0U9dGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3QobmV3IERhdGUoaDEsZzEsaS5zZWxlY3RlZERheSkpO0Y9IiB1aS1jb3JuZXItYWxsIjtHPSIiO2lmKGMxKXtHKz0iPGRpdiBjbGFzcz0ndWktZGF0ZXBpY2tlci1ncm91cCI7aWYoX1sxXT4xKXtzd2l0Y2goQyl7Y2FzZSAwOkcrPSIgdWktZGF0ZXBpY2tlci1ncm91cC1maXJzdCI7Rj0iIHVpLWNvcm5lci0iKyhXPyJyaWdodCI6ImxlZnQiKTticmVhaztjYXNlIF9bMV0tMTpHKz0iIHVpLWRhdGVwaWNrZXItZ3JvdXAtbGFzdCI7Rj0iIHVpLWNvcm5lci0iKyhXPyJsZWZ0IjoicmlnaHQiKTticmVhaztkZWZhdWx0OkcrPSIgdWktZGF0ZXBpY2tlci1ncm91cC1taWRkbGUiO0Y9IiI7YnJlYWt9fUcrPSInPiJ9Rys9IjxkaXYgY2xhc3M9J3VpLWRhdGVwaWNrZXItaGVhZGVyIHVpLXdpZGdldC1oZWFkZXIgdWktaGVscGVyLWNsZWFyZml4IitGKyInPiIrKC9hbGx8bGVmdC8udGVzdChGKSYmQT09PTA/KFc/YjphKToiIikrKC9hbGx8cmlnaHQvLnRlc3QoRikmJkE9PT0wPyhXP2E6Yik6IiIpK3RoaXMuX2dlbmVyYXRlTW9udGhZZWFySGVhZGVyKGksZzEsaDEsZTEsZjEsQT4wfHxDPjAscSxyKSsiPC9kaXY+PHRhYmxlIGNsYXNzPSd1aS1kYXRlcGlja2VyLWNhbGVuZGFyJz48dGhlYWQ+IisiPHRyPiI7SD0ocz8iPHRoIGNsYXNzPSd1aS1kYXRlcGlja2VyLXdlZWstY29sJz4iK3RoaXMuX2dldChpLCJ3ZWVrSGVhZGVyIikrIjwvdGg+IjoiIik7Zm9yKHo9MDt6PDc7eisrKXtJPSh6K2spJTc7SCs9Ijx0aCIrKCh6K2srNiklNz49NT8iIGNsYXNzPSd1aS1kYXRlcGlja2VyLXdlZWstZW5kJyI6IiIpKyI+IisiPHNwYW4gdGl0bGU9JyIrbFtJXSsiJz4iK29bSV0rIjwvc3Bhbj48L3RoPiJ9Rys9SCsiPC90cj48L3RoZWFkPjx0Ym9keT4iO0o9dGhpcy5fZ2V0RGF5c0luTW9udGgoaDEsZzEpO2lmKGgxPT09aS5zZWxlY3RlZFllYXImJmcxPT09aS5zZWxlY3RlZE1vbnRoKXtpLnNlbGVjdGVkRGF5PU1hdGgubWluKGkuc2VsZWN0ZWREYXksSil9Sz0odGhpcy5fZ2V0Rmlyc3REYXlPZk1vbnRoKGgxLGcxKS1rKzcpJTc7TD1NYXRoLmNlaWwoKEsrSikvNyk7TT0oYzE/dGhpcy5tYXhSb3dzPkw/dGhpcy5tYXhSb3dzOkw6TCk7dGhpcy5tYXhSb3dzPU07Tj10aGlzLl9kYXlsaWdodFNhdmluZ0FkanVzdChuZXcgRGF0ZShoMSxnMSwxLUspKTtmb3IoUj0wO1I8TTtSKyspe0crPSI8dHI+IjtPPSghcz8iIjoiPHRkIGNsYXNzPSd1aS1kYXRlcGlja2VyLXdlZWstY29sJz4iK3RoaXMuX2dldChpLCJjYWxjdWxhdGVXZWVrIikoTikrIjwvdGQ+Iik7Zm9yKHo9MDt6PDc7eisrKXtRPSh0P3QuYXBwbHkoKGkuaW5wdXQ/aS5pbnB1dFswXTpudWxsKSxbTl0pOlt0cnVlLCIiXSk7Uz0oTi5nZXRNb250aCgpIT09ZzEpO1Q9KFMmJiF3KXx8IVFbMF18fChlMSYmTjxlMSl8fChmMSYmTj5mMSk7Tys9Ijx0ZCBjbGFzcz0nIisoKHorays2KSU3Pj01PyIgdWktZGF0ZXBpY2tlci13ZWVrLWVuZCI6IiIpKyhTPyIgdWktZGF0ZXBpY2tlci1vdGhlci1tb250aCI6IiIpKygoTi5nZXRUaW1lKCk9PT1FLmdldFRpbWUoKSYmZzE9PT1pLnNlbGVjdGVkTW9udGgmJmkuX2tleUV2ZW50KXx8KHguZ2V0VGltZSgpPT09Ti5nZXRUaW1lKCkmJnguZ2V0VGltZSgpPT09RS5nZXRUaW1lKCkpPyIgIit0aGlzLl9kYXlPdmVyQ2xhc3M6IiIpKyhUPyIgIit0aGlzLl91bnNlbGVjdGFibGVDbGFzcysiIHVpLXN0YXRlLWRpc2FibGVkIjoiIikrKFMmJiF2PyIiOiIgIitRWzFdKyhOLmdldFRpbWUoKT09PWQxLmdldFRpbWUoKT8iICIrdGhpcy5fY3VycmVudENsYXNzOiIiKSsoTi5nZXRUaW1lKCk9PT1WLmdldFRpbWUoKT8iIHVpLWRhdGVwaWNrZXItdG9kYXkiOiIiKSkrIiciKygoIVN8fHYpJiZRWzJdPyIgdGl0bGU9JyIrUVsyXS5yZXBsYWNlKC8nL2csIiYjMzk7IikrIiciOiIiKSsoVD8iIjoiIGRhdGEtaGFuZGxlcj0nc2VsZWN0RGF5JyBkYXRhLWV2ZW50PSdjbGljaycgZGF0YS1tb250aD0nIitOLmdldE1vbnRoKCkrIicgZGF0YS15ZWFyPSciK04uZ2V0RnVsbFllYXIoKSsiJyIpKyI+IisoUyYmIXY/IiYjeGEwOyI6KFQ/IjxzcGFuIGNsYXNzPSd1aS1zdGF0ZS1kZWZhdWx0Jz4iK04uZ2V0RGF0ZSgpKyI8L3NwYW4+IjoiPGEgY2xhc3M9J3VpLXN0YXRlLWRlZmF1bHQiKyhOLmdldFRpbWUoKT09PVYuZ2V0VGltZSgpPyIgdWktc3RhdGUtaGlnaGxpZ2h0IjoiIikrKE4uZ2V0VGltZSgpPT09ZDEuZ2V0VGltZSgpPyIgdWktc3RhdGUtYWN0aXZlIjoiIikrKFM/IiB1aS1wcmlvcml0eS1zZWNvbmRhcnkiOiIiKSsiJyBocmVmPScjJz4iK04uZ2V0RGF0ZSgpKyI8L2E+IikpKyI8L3RkPiI7Ti5zZXREYXRlKE4uZ2V0RGF0ZSgpKzEpO049dGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3QoTil9Rys9TysiPC90cj4ifWcxKys7aWYoZzE+MTEpe2cxPTA7aDErK31HKz0iPC90Ym9keT48L3RhYmxlPiIrKGMxPyI8L2Rpdj4iKygoX1swXT4wJiZDPT09X1sxXS0xKT8iPGRpdiBjbGFzcz0ndWktZGF0ZXBpY2tlci1yb3ctYnJlYWsnPjwvZGl2PiI6IiIpOiIiKTtCKz1HfXkrPUJ9eSs9ajtpLl9rZXlFdmVudD1mYWxzZTtyZXR1cm4geX0sX2dlbmVyYXRlTW9udGhZZWFySGVhZGVyOmZ1bmN0aW9uKGksYSxiLG0sZSxzLGcsaCl7dmFyIGosayxsLHksdCxuLG8scCxxPXRoaXMuX2dldChpLCJjaGFuZ2VNb250aCIpLHI9dGhpcy5fZ2V0KGksImNoYW5nZVllYXIiKSx2PXRoaXMuX2dldChpLCJzaG93TW9udGhBZnRlclllYXIiKSx3PSI8ZGl2IGNsYXNzPSd1aS1kYXRlcGlja2VyLXRpdGxlJz4iLHg9IiI7aWYoc3x8IXEpe3grPSI8c3BhbiBjbGFzcz0ndWktZGF0ZXBpY2tlci1tb250aCc+IitnW2FdKyI8L3NwYW4+In1lbHNle2o9KG0mJm0uZ2V0RnVsbFllYXIoKT09PWIpO2s9KGUmJmUuZ2V0RnVsbFllYXIoKT09PWIpO3grPSI8c2VsZWN0IGNsYXNzPSd1aS1kYXRlcGlja2VyLW1vbnRoJyBkYXRhLWhhbmRsZXI9J3NlbGVjdE1vbnRoJyBkYXRhLWV2ZW50PSdjaGFuZ2UnPiI7Zm9yKGw9MDtsPDEyO2wrKyl7aWYoKCFqfHxsPj1tLmdldE1vbnRoKCkpJiYoIWt8fGw8PWUuZ2V0TW9udGgoKSkpe3grPSI8b3B0aW9uIHZhbHVlPSciK2wrIiciKyhsPT09YT8iIHNlbGVjdGVkPSdzZWxlY3RlZCciOiIiKSsiPiIraFtsXSsiPC9vcHRpb24+In19eCs9Ijwvc2VsZWN0PiJ9aWYoIXYpe3crPXgrKHN8fCEocSYmcik/IiYjeGEwOyI6IiIpfWlmKCFpLnllYXJzaHRtbCl7aS55ZWFyc2h0bWw9IiI7aWYoc3x8IXIpe3crPSI8c3BhbiBjbGFzcz0ndWktZGF0ZXBpY2tlci15ZWFyJz4iK2IrIjwvc3Bhbj4ifWVsc2V7eT10aGlzLl9nZXQoaSwieWVhclJhbmdlIikuc3BsaXQoIjoiKTt0PW5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKTtuPWZ1bmN0aW9uKHope3ZhciBvPSh6Lm1hdGNoKC9jWytcLV0uKi8pP2IrcGFyc2VJbnQoei5zdWJzdHJpbmcoMSksMTApOih6Lm1hdGNoKC9bK1wtXS4qLyk/dCtwYXJzZUludCh6LDEwKTpwYXJzZUludCh6LDEwKSkpO3JldHVybihpc05hTihvKT90Om8pfTtvPW4oeVswXSk7cD1NYXRoLm1heChvLG4oeVsxXXx8IiIpKTtvPShtP01hdGgubWF4KG8sbS5nZXRGdWxsWWVhcigpKTpvKTtwPShlP01hdGgubWluKHAsZS5nZXRGdWxsWWVhcigpKTpwKTtpLnllYXJzaHRtbCs9IjxzZWxlY3QgY2xhc3M9J3VpLWRhdGVwaWNrZXIteWVhcicgZGF0YS1oYW5kbGVyPSdzZWxlY3RZZWFyJyBkYXRhLWV2ZW50PSdjaGFuZ2UnPiI7Zm9yKDtvPD1wO28rKyl7aS55ZWFyc2h0bWwrPSI8b3B0aW9uIHZhbHVlPSciK28rIiciKyhvPT09Yj8iIHNlbGVjdGVkPSdzZWxlY3RlZCciOiIiKSsiPiIrbysiPC9vcHRpb24+In1pLnllYXJzaHRtbCs9Ijwvc2VsZWN0PiI7dys9aS55ZWFyc2h0bWw7aS55ZWFyc2h0bWw9bnVsbH19dys9dGhpcy5fZ2V0KGksInllYXJTdWZmaXgiKTtpZih2KXt3Kz0oc3x8IShxJiZyKT8iJiN4YTA7IjoiIikreH13Kz0iPC9kaXY+IjtyZXR1cm4gd30sX2FkanVzdEluc3REYXRlOmZ1bmN0aW9uKGksbyxwKXt2YXIgeT1pLmRyYXdZZWFyKyhwPT09IlkiP286MCksbT1pLmRyYXdNb250aCsocD09PSJNIj9vOjApLGE9TWF0aC5taW4oaS5zZWxlY3RlZERheSx0aGlzLl9nZXREYXlzSW5Nb250aCh5LG0pKSsocD09PSJEIj9vOjApLGI9dGhpcy5fcmVzdHJpY3RNaW5NYXgoaSx0aGlzLl9kYXlsaWdodFNhdmluZ0FkanVzdChuZXcgRGF0ZSh5LG0sYSkpKTtpLnNlbGVjdGVkRGF5PWIuZ2V0RGF0ZSgpO2kuZHJhd01vbnRoPWkuc2VsZWN0ZWRNb250aD1iLmdldE1vbnRoKCk7aS5kcmF3WWVhcj1pLnNlbGVjdGVkWWVhcj1iLmdldEZ1bGxZZWFyKCk7aWYocD09PSJNInx8cD09PSJZIil7dGhpcy5fbm90aWZ5Q2hhbmdlKGkpfX0sX3Jlc3RyaWN0TWluTWF4OmZ1bmN0aW9uKGksYSl7dmFyIG09dGhpcy5fZ2V0TWluTWF4RGF0ZShpLCJtaW4iKSxiPXRoaXMuX2dldE1pbk1heERhdGUoaSwibWF4Iiksbj0obSYmYTxtP206YSk7cmV0dXJuKGImJm4+Yj9iOm4pfSxfbm90aWZ5Q2hhbmdlOmZ1bmN0aW9uKGkpe3ZhciBvPXRoaXMuX2dldChpLCJvbkNoYW5nZU1vbnRoWWVhciIpO2lmKG8pe28uYXBwbHkoKGkuaW5wdXQ/aS5pbnB1dFswXTpudWxsKSxbaS5zZWxlY3RlZFllYXIsaS5zZWxlY3RlZE1vbnRoKzEsaV0pfX0sX2dldE51bWJlck9mTW9udGhzOmZ1bmN0aW9uKGkpe3ZhciBuPXRoaXMuX2dldChpLCJudW1iZXJPZk1vbnRocyIpO3JldHVybihuPT1udWxsP1sxLDFdOih0eXBlb2Ygbj09PSJudW1iZXIiP1sxLG5dOm4pKX0sX2dldE1pbk1heERhdGU6ZnVuY3Rpb24oaSxtKXtyZXR1cm4gdGhpcy5fZGV0ZXJtaW5lRGF0ZShpLHRoaXMuX2dldChpLG0rIkRhdGUiKSxudWxsKX0sX2dldERheXNJbk1vbnRoOmZ1bmN0aW9uKHksbSl7cmV0dXJuIDMyLXRoaXMuX2RheWxpZ2h0U2F2aW5nQWRqdXN0KG5ldyBEYXRlKHksbSwzMikpLmdldERhdGUoKX0sX2dldEZpcnN0RGF5T2ZNb250aDpmdW5jdGlvbih5LG0pe3JldHVybiBuZXcgRGF0ZSh5LG0sMSkuZ2V0RGF5KCl9LF9jYW5BZGp1c3RNb250aDpmdW5jdGlvbihpLG8sYSxiKXt2YXIgbj10aGlzLl9nZXROdW1iZXJPZk1vbnRocyhpKSxlPXRoaXMuX2RheWxpZ2h0U2F2aW5nQWRqdXN0KG5ldyBEYXRlKGEsYisobzwwP286blswXSpuWzFdKSwxKSk7aWYobzwwKXtlLnNldERhdGUodGhpcy5fZ2V0RGF5c0luTW9udGgoZS5nZXRGdWxsWWVhcigpLGUuZ2V0TW9udGgoKSkpfXJldHVybiB0aGlzLl9pc0luUmFuZ2UoaSxlKX0sX2lzSW5SYW5nZTpmdW5jdGlvbihpLGEpe3ZhciB5LGIsbT10aGlzLl9nZXRNaW5NYXhEYXRlKGksIm1pbiIpLGU9dGhpcy5fZ2V0TWluTWF4RGF0ZShpLCJtYXgiKSxnPW51bGwsaD1udWxsLGo9dGhpcy5fZ2V0KGksInllYXJSYW5nZSIpO2lmKGope3k9ai5zcGxpdCgiOiIpO2I9bmV3IERhdGUoKS5nZXRGdWxsWWVhcigpO2c9cGFyc2VJbnQoeVswXSwxMCk7aD1wYXJzZUludCh5WzFdLDEwKTtpZih5WzBdLm1hdGNoKC9bK1wtXS4qLykpe2crPWJ9aWYoeVsxXS5tYXRjaCgvWytcLV0uKi8pKXtoKz1ifX1yZXR1cm4oKCFtfHxhLmdldFRpbWUoKT49bS5nZXRUaW1lKCkpJiYoIWV8fGEuZ2V0VGltZSgpPD1lLmdldFRpbWUoKSkmJighZ3x8YS5nZXRGdWxsWWVhcigpPj1nKSYmKCFofHxhLmdldEZ1bGxZZWFyKCk8PWgpKX0sX2dldEZvcm1hdENvbmZpZzpmdW5jdGlvbihpKXt2YXIgcz10aGlzLl9nZXQoaSwic2hvcnRZZWFyQ3V0b2ZmIik7cz0odHlwZW9mIHMhPT0ic3RyaW5nIj9zOm5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKSUxMDArcGFyc2VJbnQocywxMCkpO3JldHVybntzaG9ydFllYXJDdXRvZmY6cyxkYXlOYW1lc1Nob3J0OnRoaXMuX2dldChpLCJkYXlOYW1lc1Nob3J0IiksZGF5TmFtZXM6dGhpcy5fZ2V0KGksImRheU5hbWVzIiksbW9udGhOYW1lc1Nob3J0OnRoaXMuX2dldChpLCJtb250aE5hbWVzU2hvcnQiKSxtb250aE5hbWVzOnRoaXMuX2dldChpLCJtb250aE5hbWVzIil9fSxfZm9ybWF0RGF0ZTpmdW5jdGlvbihpLGEsbSx5KXtpZighYSl7aS5jdXJyZW50RGF5PWkuc2VsZWN0ZWREYXk7aS5jdXJyZW50TW9udGg9aS5zZWxlY3RlZE1vbnRoO2kuY3VycmVudFllYXI9aS5zZWxlY3RlZFllYXJ9dmFyIGI9KGE/KHR5cGVvZiBhPT09Im9iamVjdCI/YTp0aGlzLl9kYXlsaWdodFNhdmluZ0FkanVzdChuZXcgRGF0ZSh5LG0sYSkpKTp0aGlzLl9kYXlsaWdodFNhdmluZ0FkanVzdChuZXcgRGF0ZShpLmN1cnJlbnRZZWFyLGkuY3VycmVudE1vbnRoLGkuY3VycmVudERheSkpKTtyZXR1cm4gdGhpcy5mb3JtYXREYXRlKHRoaXMuX2dldChpLCJkYXRlRm9ybWF0IiksYix0aGlzLl9nZXRGb3JtYXRDb25maWcoaSkpfX0pO2Z1bmN0aW9uIGQoYSl7dmFyIHM9ImJ1dHRvbiwgLnVpLWRhdGVwaWNrZXItcHJldiwgLnVpLWRhdGVwaWNrZXItbmV4dCwgLnVpLWRhdGVwaWNrZXItY2FsZW5kYXIgdGQgYSI7cmV0dXJuIGEuZGVsZWdhdGUocywibW91c2VvdXQiLGZ1bmN0aW9uKCl7JCh0aGlzKS5yZW1vdmVDbGFzcygidWktc3RhdGUtaG92ZXIiKTtpZih0aGlzLmNsYXNzTmFtZS5pbmRleE9mKCJ1aS1kYXRlcGlja2VyLXByZXYiKSE9PS0xKXskKHRoaXMpLnJlbW92ZUNsYXNzKCJ1aS1kYXRlcGlja2VyLXByZXYtaG92ZXIiKX1pZih0aGlzLmNsYXNzTmFtZS5pbmRleE9mKCJ1aS1kYXRlcGlja2VyLW5leHQiKSE9PS0xKXskKHRoaXMpLnJlbW92ZUNsYXNzKCJ1aS1kYXRlcGlja2VyLW5leHQtaG92ZXIiKX19KS5kZWxlZ2F0ZShzLCJtb3VzZW92ZXIiLGZ1bmN0aW9uKCl7aWYoISQuZGF0ZXBpY2tlci5faXNEaXNhYmxlZERhdGVwaWNrZXIoYy5pbmxpbmU/YS5wYXJlbnQoKVswXTpjLmlucHV0WzBdKSl7JCh0aGlzKS5wYXJlbnRzKCIudWktZGF0ZXBpY2tlci1jYWxlbmRhciIpLmZpbmQoImEiKS5yZW1vdmVDbGFzcygidWktc3RhdGUtaG92ZXIiKTskKHRoaXMpLmFkZENsYXNzKCJ1aS1zdGF0ZS1ob3ZlciIpO2lmKHRoaXMuY2xhc3NOYW1lLmluZGV4T2YoInVpLWRhdGVwaWNrZXItcHJldiIpIT09LTEpeyQodGhpcykuYWRkQ2xhc3MoInVpLWRhdGVwaWNrZXItcHJldi1ob3ZlciIpfWlmKHRoaXMuY2xhc3NOYW1lLmluZGV4T2YoInVpLWRhdGVwaWNrZXItbmV4dCIpIT09LTEpeyQodGhpcykuYWRkQ2xhc3MoInVpLWRhdGVwaWNrZXItbmV4dC1ob3ZlciIpfX19KX1mdW5jdGlvbiBmKHQscCl7JC5leHRlbmQodCxwKTtmb3IodmFyIG4gaW4gcCl7aWYocFtuXT09bnVsbCl7dFtuXT1wW25dfX1yZXR1cm4gdH0kLmZuLmRhdGVwaWNrZXI9ZnVuY3Rpb24obyl7aWYoIXRoaXMubGVuZ3RoKXtyZXR1cm4gdGhpc31pZighJC5kYXRlcGlja2VyLmluaXRpYWxpemVkKXskKGRvY3VtZW50KS5tb3VzZWRvd24oJC5kYXRlcGlja2VyLl9jaGVja0V4dGVybmFsQ2xpY2spOyQuZGF0ZXBpY2tlci5pbml0aWFsaXplZD10cnVlfWlmKCQoIiMiKyQuZGF0ZXBpY2tlci5fbWFpbkRpdklkKS5sZW5ndGg9PT0wKXskKCJib2R5IikuYXBwZW5kKCQuZGF0ZXBpY2tlci5kcERpdil9dmFyIGE9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpO2lmKHR5cGVvZiBvPT09InN0cmluZyImJihvPT09ImlzRGlzYWJsZWQifHxvPT09ImdldERhdGUifHxvPT09IndpZGdldCIpKXtyZXR1cm4gJC5kYXRlcGlja2VyWyJfIitvKyJEYXRlcGlja2VyIl0uYXBwbHkoJC5kYXRlcGlja2VyLFt0aGlzWzBdXS5jb25jYXQoYSkpfWlmKG89PT0ib3B0aW9uIiYmYXJndW1lbnRzLmxlbmd0aD09PTImJnR5cGVvZiBhcmd1bWVudHNbMV09PT0ic3RyaW5nIil7cmV0dXJuICQuZGF0ZXBpY2tlclsiXyIrbysiRGF0ZXBpY2tlciJdLmFwcGx5KCQuZGF0ZXBpY2tlcixbdGhpc1swXV0uY29uY2F0KGEpKX1yZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dHlwZW9mIG89PT0ic3RyaW5nIj8kLmRhdGVwaWNrZXJbIl8iK28rIkRhdGVwaWNrZXIiXS5hcHBseSgkLmRhdGVwaWNrZXIsW3RoaXNdLmNvbmNhdChhKSk6JC5kYXRlcGlja2VyLl9hdHRhY2hEYXRlcGlja2VyKHRoaXMsbyl9KX07JC5kYXRlcGlja2VyPW5ldyBEKCk7JC5kYXRlcGlja2VyLmluaXRpYWxpemVkPWZhbHNlOyQuZGF0ZXBpY2tlci51dWlkPW5ldyBEYXRlKCkuZ2V0VGltZSgpOyQuZGF0ZXBpY2tlci52ZXJzaW9uPSIxLjEwLjQifSkoalF1ZXJ5KTsNCi8qIQ0KICogalF1ZXJ5IFVJIFBvc2l0aW9uIDEuMTAuNA0KICogaHR0cDovL2pxdWVyeXVpLmNvbQ0KICoNCiAqIENvcHlyaWdodCAyMDE0IGpRdWVyeSBGb3VuZGF0aW9uIGFuZCBvdGhlciBjb250cmlidXRvcnMNCiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS4NCiAqIGh0dHA6Ly9qcXVlcnkub3JnL2xpY2Vuc2UNCiAqDQogKiBodHRwOi8vYXBpLmpxdWVyeXVpLmNvbS9wb3NpdGlvbi8NCiAqLw0KKGZ1bmN0aW9uKCQsdSl7JC51aT0kLnVpfHx7fTt2YXIgYyxtPU1hdGgubWF4LGE9TWF0aC5hYnMscj1NYXRoLnJvdW5kLGI9L2xlZnR8Y2VudGVyfHJpZ2h0LyxkPS90b3B8Y2VudGVyfGJvdHRvbS8sZT0vW1wrXC1dXGQrKFwuW1xkXSspPyU/LyxmPS9eXHcrLyxnPS8lJC8sXz0kLmZuLnBvc2l0aW9uO2Z1bmN0aW9uIGgobyx3LGkpe3JldHVybltwYXJzZUZsb2F0KG9bMF0pKihnLnRlc3Qob1swXSk/dy8xMDA6MSkscGFyc2VGbG9hdChvWzFdKSooZy50ZXN0KG9bMV0pP2kvMTAwOjEpXX1mdW5jdGlvbiBwKGksayl7cmV0dXJuIHBhcnNlSW50KCQuY3NzKGksayksMTApfHwwfWZ1bmN0aW9uIGooaSl7dmFyIGs9aVswXTtpZihrLm5vZGVUeXBlPT09OSl7cmV0dXJue3dpZHRoOmkud2lkdGgoKSxoZWlnaHQ6aS5oZWlnaHQoKSxvZmZzZXQ6e3RvcDowLGxlZnQ6MH19fWlmKCQuaXNXaW5kb3coaykpe3JldHVybnt3aWR0aDppLndpZHRoKCksaGVpZ2h0OmkuaGVpZ2h0KCksb2Zmc2V0Ont0b3A6aS5zY3JvbGxUb3AoKSxsZWZ0Omkuc2Nyb2xsTGVmdCgpfX19aWYoay5wcmV2ZW50RGVmYXVsdCl7cmV0dXJue3dpZHRoOjAsaGVpZ2h0OjAsb2Zmc2V0Ont0b3A6ay5wYWdlWSxsZWZ0OmsucGFnZVh9fX1yZXR1cm57d2lkdGg6aS5vdXRlcldpZHRoKCksaGVpZ2h0Omkub3V0ZXJIZWlnaHQoKSxvZmZzZXQ6aS5vZmZzZXQoKX19JC5wb3NpdGlvbj17c2Nyb2xsYmFyV2lkdGg6ZnVuY3Rpb24oKXtpZihjIT09dSl7cmV0dXJuIGN9dmFyIHcsaSxrPSQoIjxkaXYgc3R5bGU9J2Rpc3BsYXk6YmxvY2s7cG9zaXRpb246YWJzb2x1dGU7d2lkdGg6NTBweDtoZWlnaHQ6NTBweDtvdmVyZmxvdzpoaWRkZW47Jz48ZGl2IHN0eWxlPSdoZWlnaHQ6MTAwcHg7d2lkdGg6YXV0bzsnPjwvZGl2PjwvZGl2PiIpLGw9ay5jaGlsZHJlbigpWzBdOyQoImJvZHkiKS5hcHBlbmQoayk7dz1sLm9mZnNldFdpZHRoO2suY3NzKCJvdmVyZmxvdyIsInNjcm9sbCIpO2k9bC5vZmZzZXRXaWR0aDtpZih3PT09aSl7aT1rWzBdLmNsaWVudFdpZHRofWsucmVtb3ZlKCk7cmV0dXJuKGM9dy1pKX0sZ2V0U2Nyb2xsSW5mbzpmdW5jdGlvbih3KXt2YXIgbz13LmlzV2luZG93fHx3LmlzRG9jdW1lbnQ/IiI6dy5lbGVtZW50LmNzcygib3ZlcmZsb3cteCIpLGk9dy5pc1dpbmRvd3x8dy5pc0RvY3VtZW50PyIiOncuZWxlbWVudC5jc3MoIm92ZXJmbG93LXkiKSxrPW89PT0ic2Nyb2xsInx8KG89PT0iYXV0byImJncud2lkdGg8dy5lbGVtZW50WzBdLnNjcm9sbFdpZHRoKSxsPWk9PT0ic2Nyb2xsInx8KGk9PT0iYXV0byImJncuaGVpZ2h0PHcuZWxlbWVudFswXS5zY3JvbGxIZWlnaHQpO3JldHVybnt3aWR0aDpsPyQucG9zaXRpb24uc2Nyb2xsYmFyV2lkdGgoKTowLGhlaWdodDprPyQucG9zaXRpb24uc2Nyb2xsYmFyV2lkdGgoKTowfX0sZ2V0V2l0aGluSW5mbzpmdW5jdGlvbihpKXt2YXIgdz0kKGl8fHdpbmRvdyksaz0kLmlzV2luZG93KHdbMF0pLGw9ISF3WzBdJiZ3WzBdLm5vZGVUeXBlPT09OTtyZXR1cm57ZWxlbWVudDp3LGlzV2luZG93OmssaXNEb2N1bWVudDpsLG9mZnNldDp3Lm9mZnNldCgpfHx7bGVmdDowLHRvcDowfSxzY3JvbGxMZWZ0Oncuc2Nyb2xsTGVmdCgpLHNjcm9sbFRvcDp3LnNjcm9sbFRvcCgpLHdpZHRoOms/dy53aWR0aCgpOncub3V0ZXJXaWR0aCgpLGhlaWdodDprP3cuaGVpZ2h0KCk6dy5vdXRlckhlaWdodCgpfX19OyQuZm4ucG9zaXRpb249ZnVuY3Rpb24obyl7aWYoIW98fCFvLm9mKXtyZXR1cm4gXy5hcHBseSh0aGlzLGFyZ3VtZW50cyl9bz0kLmV4dGVuZCh7fSxvKTt2YXIgayx0LGwsbixxLHMsdj0kKG8ub2YpLHc9JC5wb3NpdGlvbi5nZXRXaXRoaW5JbmZvKG8ud2l0aGluKSx4PSQucG9zaXRpb24uZ2V0U2Nyb2xsSW5mbyh3KSx5PShvLmNvbGxpc2lvbnx8ImZsaXAiKS5zcGxpdCgiICIpLHo9e307cz1qKHYpO2lmKHZbMF0ucHJldmVudERlZmF1bHQpe28uYXQ9ImxlZnQgdG9wIn10PXMud2lkdGg7bD1zLmhlaWdodDtuPXMub2Zmc2V0O3E9JC5leHRlbmQoe30sbik7JC5lYWNoKFsibXkiLCJhdCJdLGZ1bmN0aW9uKCl7dmFyIGk9KG9bdGhpc118fCIiKS5zcGxpdCgiICIpLEEsQjtpZihpLmxlbmd0aD09PTEpe2k9Yi50ZXN0KGlbMF0pP2kuY29uY2F0KFsiY2VudGVyIl0pOmQudGVzdChpWzBdKT9bImNlbnRlciJdLmNvbmNhdChpKTpbImNlbnRlciIsImNlbnRlciJdfWlbMF09Yi50ZXN0KGlbMF0pP2lbMF06ImNlbnRlciI7aVsxXT1kLnRlc3QoaVsxXSk/aVsxXToiY2VudGVyIjtBPWUuZXhlYyhpWzBdKTtCPWUuZXhlYyhpWzFdKTt6W3RoaXNdPVtBP0FbMF06MCxCP0JbMF06MF07b1t0aGlzXT1bZi5leGVjKGlbMF0pWzBdLGYuZXhlYyhpWzFdKVswXV19KTtpZih5Lmxlbmd0aD09PTEpe3lbMV09eVswXX1pZihvLmF0WzBdPT09InJpZ2h0Iil7cS5sZWZ0Kz10fWVsc2UgaWYoby5hdFswXT09PSJjZW50ZXIiKXtxLmxlZnQrPXQvMn1pZihvLmF0WzFdPT09ImJvdHRvbSIpe3EudG9wKz1sfWVsc2UgaWYoby5hdFsxXT09PSJjZW50ZXIiKXtxLnRvcCs9bC8yfWs9aCh6LmF0LHQsbCk7cS5sZWZ0Kz1rWzBdO3EudG9wKz1rWzFdO3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgQSxCLEM9JCh0aGlzKSxEPUMub3V0ZXJXaWR0aCgpLEU9Qy5vdXRlckhlaWdodCgpLEY9cCh0aGlzLCJtYXJnaW5MZWZ0IiksRz1wKHRoaXMsIm1hcmdpblRvcCIpLEg9RCtGK3AodGhpcywibWFyZ2luUmlnaHQiKSt4LndpZHRoLEk9RStHK3AodGhpcywibWFyZ2luQm90dG9tIikreC5oZWlnaHQsSj0kLmV4dGVuZCh7fSxxKSxLPWgoei5teSxDLm91dGVyV2lkdGgoKSxDLm91dGVySGVpZ2h0KCkpO2lmKG8ubXlbMF09PT0icmlnaHQiKXtKLmxlZnQtPUR9ZWxzZSBpZihvLm15WzBdPT09ImNlbnRlciIpe0oubGVmdC09RC8yfWlmKG8ubXlbMV09PT0iYm90dG9tIil7Si50b3AtPUV9ZWxzZSBpZihvLm15WzFdPT09ImNlbnRlciIpe0oudG9wLT1FLzJ9Si5sZWZ0Kz1LWzBdO0oudG9wKz1LWzFdO2lmKCEkLnN1cHBvcnQub2Zmc2V0RnJhY3Rpb25zKXtKLmxlZnQ9cihKLmxlZnQpO0oudG9wPXIoSi50b3ApfUE9e21hcmdpbkxlZnQ6RixtYXJnaW5Ub3A6R307JC5lYWNoKFsibGVmdCIsInRvcCJdLGZ1bmN0aW9uKGksTCl7aWYoJC51aS5wb3NpdGlvblt5W2ldXSl7JC51aS5wb3NpdGlvblt5W2ldXVtMXShKLHt0YXJnZXRXaWR0aDp0LHRhcmdldEhlaWdodDpsLGVsZW1XaWR0aDpELGVsZW1IZWlnaHQ6RSxjb2xsaXNpb25Qb3NpdGlvbjpBLGNvbGxpc2lvbldpZHRoOkgsY29sbGlzaW9uSGVpZ2h0Okksb2Zmc2V0OltrWzBdK0tbMF0sa1sxXStLWzFdXSxteTpvLm15LGF0Om8uYXQsd2l0aGluOncsZWxlbTpDfSl9fSk7aWYoby51c2luZyl7Qj1mdW5jdGlvbihpKXt2YXIgTD1uLmxlZnQtSi5sZWZ0LE09TCt0LUQsTj1uLnRvcC1KLnRvcCxPPU4rbC1FLFA9e3RhcmdldDp7ZWxlbWVudDp2LGxlZnQ6bi5sZWZ0LHRvcDpuLnRvcCx3aWR0aDp0LGhlaWdodDpsfSxlbGVtZW50OntlbGVtZW50OkMsbGVmdDpKLmxlZnQsdG9wOkoudG9wLHdpZHRoOkQsaGVpZ2h0OkV9LGhvcml6b250YWw6TTwwPyJsZWZ0IjpMPjA/InJpZ2h0IjoiY2VudGVyIix2ZXJ0aWNhbDpPPDA/InRvcCI6Tj4wPyJib3R0b20iOiJtaWRkbGUifTtpZih0PEQmJmEoTCtNKTx0KXtQLmhvcml6b250YWw9ImNlbnRlciJ9aWYobDxFJiZhKE4rTyk8bCl7UC52ZXJ0aWNhbD0ibWlkZGxlIn1pZihtKGEoTCksYShNKSk+bShhKE4pLGEoTykpKXtQLmltcG9ydGFudD0iaG9yaXpvbnRhbCJ9ZWxzZXtQLmltcG9ydGFudD0idmVydGljYWwifW8udXNpbmcuY2FsbCh0aGlzLGksUCl9fUMub2Zmc2V0KCQuZXh0ZW5kKEose3VzaW5nOkJ9KSl9KX07JC51aS5wb3NpdGlvbj17Zml0OntsZWZ0OmZ1bmN0aW9uKGksayl7dmFyIHc9ay53aXRoaW4sbD13LmlzV2luZG93P3cuc2Nyb2xsTGVmdDp3Lm9mZnNldC5sZWZ0LG89dy53aWR0aCxuPWkubGVmdC1rLmNvbGxpc2lvblBvc2l0aW9uLm1hcmdpbkxlZnQscT1sLW4scz1uK2suY29sbGlzaW9uV2lkdGgtby1sLHQ7aWYoay5jb2xsaXNpb25XaWR0aD5vKXtpZihxPjAmJnM8PTApe3Q9aS5sZWZ0K3Eray5jb2xsaXNpb25XaWR0aC1vLWw7aS5sZWZ0Kz1xLXR9ZWxzZSBpZihzPjAmJnE8PTApe2kubGVmdD1sfWVsc2V7aWYocT5zKXtpLmxlZnQ9bCtvLWsuY29sbGlzaW9uV2lkdGh9ZWxzZXtpLmxlZnQ9bH19fWVsc2UgaWYocT4wKXtpLmxlZnQrPXF9ZWxzZSBpZihzPjApe2kubGVmdC09c31lbHNle2kubGVmdD1tKGkubGVmdC1uLGkubGVmdCl9fSx0b3A6ZnVuY3Rpb24oaSxrKXt2YXIgdz1rLndpdGhpbixsPXcuaXNXaW5kb3c/dy5zY3JvbGxUb3A6dy5vZmZzZXQudG9wLG89ay53aXRoaW4uaGVpZ2h0LG49aS50b3Atay5jb2xsaXNpb25Qb3NpdGlvbi5tYXJnaW5Ub3AscT1sLW4scz1uK2suY29sbGlzaW9uSGVpZ2h0LW8tbCx0O2lmKGsuY29sbGlzaW9uSGVpZ2h0Pm8pe2lmKHE+MCYmczw9MCl7dD1pLnRvcCtxK2suY29sbGlzaW9uSGVpZ2h0LW8tbDtpLnRvcCs9cS10fWVsc2UgaWYocz4wJiZxPD0wKXtpLnRvcD1sfWVsc2V7aWYocT5zKXtpLnRvcD1sK28tay5jb2xsaXNpb25IZWlnaHR9ZWxzZXtpLnRvcD1sfX19ZWxzZSBpZihxPjApe2kudG9wKz1xfWVsc2UgaWYocz4wKXtpLnRvcC09c31lbHNle2kudG9wPW0oaS50b3AtbixpLnRvcCl9fX0sZmxpcDp7bGVmdDpmdW5jdGlvbihpLGspe3ZhciB3PWsud2l0aGluLGw9dy5vZmZzZXQubGVmdCt3LnNjcm9sbExlZnQsbz13LndpZHRoLG49dy5pc1dpbmRvdz93LnNjcm9sbExlZnQ6dy5vZmZzZXQubGVmdCxxPWkubGVmdC1rLmNvbGxpc2lvblBvc2l0aW9uLm1hcmdpbkxlZnQscz1xLW4sdD1xK2suY29sbGlzaW9uV2lkdGgtby1uLHY9ay5teVswXT09PSJsZWZ0Ij8tay5lbGVtV2lkdGg6ay5teVswXT09PSJyaWdodCI/ay5lbGVtV2lkdGg6MCx4PWsuYXRbMF09PT0ibGVmdCI/ay50YXJnZXRXaWR0aDprLmF0WzBdPT09InJpZ2h0Ij8tay50YXJnZXRXaWR0aDowLHk9LTIqay5vZmZzZXRbMF0seixBO2lmKHM8MCl7ej1pLmxlZnQrdit4K3kray5jb2xsaXNpb25XaWR0aC1vLWw7aWYoejwwfHx6PGEocykpe2kubGVmdCs9dit4K3l9fWVsc2UgaWYodD4wKXtBPWkubGVmdC1rLmNvbGxpc2lvblBvc2l0aW9uLm1hcmdpbkxlZnQrdit4K3ktbjtpZihBPjB8fGEoQSk8dCl7aS5sZWZ0Kz12K3greX19fSx0b3A6ZnVuY3Rpb24oaSxrKXt2YXIgdz1rLndpdGhpbixsPXcub2Zmc2V0LnRvcCt3LnNjcm9sbFRvcCxvPXcuaGVpZ2h0LG49dy5pc1dpbmRvdz93LnNjcm9sbFRvcDp3Lm9mZnNldC50b3AscT1pLnRvcC1rLmNvbGxpc2lvblBvc2l0aW9uLm1hcmdpblRvcCxzPXEtbix0PXEray5jb2xsaXNpb25IZWlnaHQtby1uLHY9ay5teVsxXT09PSJ0b3AiLHg9dj8tay5lbGVtSGVpZ2h0OmsubXlbMV09PT0iYm90dG9tIj9rLmVsZW1IZWlnaHQ6MCx5PWsuYXRbMV09PT0idG9wIj9rLnRhcmdldEhlaWdodDprLmF0WzFdPT09ImJvdHRvbSI/LWsudGFyZ2V0SGVpZ2h0OjAsej0tMiprLm9mZnNldFsxXSxBLEI7aWYoczwwKXtCPWkudG9wK3greSt6K2suY29sbGlzaW9uSGVpZ2h0LW8tbDtpZigoaS50b3AreCt5K3opPnMmJihCPDB8fEI8YShzKSkpe2kudG9wKz14K3kren19ZWxzZSBpZih0PjApe0E9aS50b3Atay5jb2xsaXNpb25Qb3NpdGlvbi5tYXJnaW5Ub3AreCt5K3otbjtpZigoaS50b3AreCt5K3opPnQmJihBPjB8fGEoQSk8dCkpe2kudG9wKz14K3kren19fX0sZmxpcGZpdDp7bGVmdDpmdW5jdGlvbigpeyQudWkucG9zaXRpb24uZmxpcC5sZWZ0LmFwcGx5KHRoaXMsYXJndW1lbnRzKTskLnVpLnBvc2l0aW9uLmZpdC5sZWZ0LmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sdG9wOmZ1bmN0aW9uKCl7JC51aS5wb3NpdGlvbi5mbGlwLnRvcC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7JC51aS5wb3NpdGlvbi5maXQudG9wLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19fTsoZnVuY3Rpb24oKXt2YXIgdCxrLGwsbyxpLG49ZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImJvZHkiKVswXSxxPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO3Q9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChuPyJkaXYiOiJib2R5Iik7bD17dmlzaWJpbGl0eToiaGlkZGVuIix3aWR0aDowLGhlaWdodDowLGJvcmRlcjowLG1hcmdpbjowLGJhY2tncm91bmQ6Im5vbmUifTtpZihuKXskLmV4dGVuZChsLHtwb3NpdGlvbjoiYWJzb2x1dGUiLGxlZnQ6Ii0xMDAwcHgiLHRvcDoiLTEwMDBweCJ9KX1mb3IoaSBpbiBsKXt0LnN0eWxlW2ldPWxbaV19dC5hcHBlbmRDaGlsZChxKTtrPW58fGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtrLmluc2VydEJlZm9yZSh0LGsuZmlyc3RDaGlsZCk7cS5zdHlsZS5jc3NUZXh0PSJwb3NpdGlvbjogYWJzb2x1dGU7IGxlZnQ6IDEwLjc0MzIyMjJweDsiO289JChxKS5vZmZzZXQoKS5sZWZ0OyQuc3VwcG9ydC5vZmZzZXRGcmFjdGlvbnM9bz4xMCYmbzwxMTt0LmlubmVySFRNTD0iIjtrLnJlbW92ZUNoaWxkKHQpfSkoKX0oalF1ZXJ5KSk7DQovKiENCiAqIFNBUCBVSSBkZXZlbG9wbWVudCB0b29sa2l0IGZvciBIVE1MNSAoU0FQVUk1L09wZW5VSTUpDQogKiAoYykgQ29weXJpZ2h0IDIwMDktMjAxNCBTQVAgU0Ugb3IgYW4gU0FQIGFmZmlsaWF0ZSBjb21wYW55LiANCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgLSBzZWUgTElDRU5TRS50eHQuDQogKi8NCihmdW5jdGlvbihxKXsidXNlIHN0cmljdCI7dmFyIFA9ZnVuY3Rpb24oQSl7aWYodHlwZW9mKEEpIT0iZnVuY3Rpb24iKXt0aHJvdyBuZXcgVHlwZUVycm9yKCJBcmd1bWVudCBpcyBub3QgYSBmdW5jdGlvbiIpfXRoaXMuX2RlZmVycmVkPW5ldyBxLkRlZmVycmVkKCk7dHJ5e3ZhciB0PXRoaXM7QShmdW5jdGlvbih2KXtiKHQsdix0cnVlKX0sZnVuY3Rpb24odil7Yih0LHYsZmFsc2UpfSl9Y2F0Y2goZSl7Yih0aGlzLGUsZmFsc2UpfX07UC5wcm90b3R5cGUudGhlbj1mdW5jdGlvbihvLE8pe3ZhciBmPW5ldyBQKF8pO3RoaXMuX2RlZmVycmVkLnRoZW4oZChvLGYsdHJ1ZSksZChPLGYsZmFsc2UpKTtyZXR1cm4gZn07UC5wcm90b3R5cGVbImNhdGNoIl09ZnVuY3Rpb24obyl7cmV0dXJuIHRoaXMudGhlbih1bmRlZmluZWQsbyl9O1AuYWxsPWZ1bmN0aW9uKHApe3JldHVybiBuZXcgUChmdW5jdGlvbihyLFIpe2lmKCFxLmlzQXJyYXkocCkpe1Ioe30pO3JldHVybn1pZihwLmxlbmd0aD09MCl7cihbXSk7cmV0dXJufXZhciBmPWZhbHNlLHY9bmV3IEFycmF5KHAubGVuZ3RoKSxDPTA7ZnVuY3Rpb24gZShJKXtQLnJlc29sdmUocFtJXSkudGhlbihmdW5jdGlvbihvKXtpZighZil7QysrO3ZbSV09bztpZihDPT1wLmxlbmd0aCl7cih2KX19fSxmdW5jdGlvbihvKXtpZighZil7Zj10cnVlO1Iobyl9fSl9O2Zvcih2YXIgaT0wO2k8cC5sZW5ndGg7aSsrKXtlKGkpfX0pfTtQLnJhY2U9ZnVuY3Rpb24ocCl7cmV0dXJuIG5ldyBQKGZ1bmN0aW9uKHIsUil7aWYoIXEuaXNBcnJheShwKSl7Uih7fSl9dmFyIGY9ZmFsc2U7Zm9yKHZhciBpPTA7aTxwLmxlbmd0aDtpKyspe1AucmVzb2x2ZShwW2ldKS50aGVuKGZ1bmN0aW9uKG8pe2lmKCFmKXtmPXRydWU7cihvKX19LGZ1bmN0aW9uKG8pe2lmKCFmKXtmPXRydWU7UihvKX19KX19KX07UC5yZXNvbHZlPWZ1bmN0aW9uKG8pe3JldHVybiBvIGluc3RhbmNlb2YgUD9vOmMobmV3IFAoXyksbyl9O1AucmVqZWN0PWZ1bmN0aW9uKG8pe3JldHVybiBiKG5ldyBQKF8pLG8sZmFsc2UpfTtmdW5jdGlvbiBfKCl7fTtmdW5jdGlvbiBhKG8pe3JldHVybiBvJiZvLnRoZW4mJnR5cGVvZihvLnRoZW4pPT0iZnVuY3Rpb24ifTtmdW5jdGlvbiBiKHAsbyxyKXtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7aWYoYShvKSYmcil7YyhwLG8pfWVsc2V7cC5fZGVmZXJyZWRbcj8icmVzb2x2ZSI6InJlamVjdCJdKG8pfX0sMCk7cmV0dXJuIHB9O2Z1bmN0aW9uIGMocCxvKXtpZihhKG8pKXt2YXIgZj1mYWxzZTt0cnl7by50aGVuKGZ1bmN0aW9uKHYpe2IocCx2LHRydWUpO2Y9dHJ1ZX0sZnVuY3Rpb24odil7YihwLHYsZmFsc2UpO2Y9dHJ1ZX0pfWNhdGNoKGUpe2lmKCFmKXtiKHAsZSxmYWxzZSl9ZWxzZXtxLnNhcC5sb2cuZGVidWcoIlByb21pc2U6IEVycm9yIGluIHRoZW46ICIrZSl9fX1lbHNle2IocCxvLHRydWUpfXJldHVybiBwfTtmdW5jdGlvbiBkKEEscCxyKXtyZXR1cm4gZnVuY3Rpb24obyl7aWYoIUEpe2IocCxvLHIpfWVsc2V7dHJ5e2MocCxBKG8pKX1jYXRjaChlKXtiKHAsZSxmYWxzZSl9fX19O2lmKCF3aW5kb3cuUHJvbWlzZSl7d2luZG93LlByb21pc2U9UH1pZih3aW5kb3cuc2FwJiZ3aW5kb3cuc2FwLl9fdWk1UHVibGlzaFByb21pc2VQb2x5ZmlsbCl7d2luZG93Ll9VSTVQcm9taXNlPVB9fSkoalF1ZXJ5KTsNCi8qDQoqIGpRdWVyeSBNb2JpbGUgdjEuMy4xDQoqIGh0dHA6Ly9qcXVlcnltb2JpbGUuY29tDQoqDQoqIENvcHlyaWdodCAyMDEwLCAyMDEzIGpRdWVyeSBGb3VuZGF0aW9uLCBJbmMuIGFuZCBvdGhlciBjb250cmlidXRvcnMNCiogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLg0KKiBodHRwOi8vanF1ZXJ5Lm9yZy9saWNlbnNlDQoqDQoqLw0KKGZ1bmN0aW9uKHIsZCxmKXtpZih0eXBlb2YgZGVmaW5lPT09ImZ1bmN0aW9uIiYmZGVmaW5lLmFtZCl7ZGVmaW5lKFsianF1ZXJ5Il0sZnVuY3Rpb24oJCl7ZigkLHIsZCk7cmV0dXJuICQubW9iaWxlfSl9ZWxzZXtmKHIualF1ZXJ5LHIsZCl9fSh0aGlzLGRvY3VtZW50LGZ1bmN0aW9uKFEsZCxmLHUpew0KLy8gQWJvdXQ6IExpY2Vuc2UNCi8vIENvcHlyaWdodCAoYykgMjAxMCAiQ293Ym95IiBCZW4gQWxtYW4sDQovLyBEdWFsIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgYW5kIEdQTCBsaWNlbnNlcy4NCi8vIGh0dHA6Ly9iZW5hbG1hbi5jb20vYWJvdXQvbGljZW5zZS8NCihmdW5jdGlvbigkLGQsdSl7dmFyIHM9J2hhc2hjaGFuZ2UnLGE9ZixiLGM9JC5ldmVudC5zcGVjaWFsLGc9YS5kb2N1bWVudE1vZGUsaD0nb24nK3MgaW4gZCYmKGc9PT11fHxnPjcpO2Z1bmN0aW9uIGkoZSl7ZT1lfHxsb2NhdGlvbi5ocmVmO3JldHVybicjJytlLnJlcGxhY2UoL15bXiNdKiM/KC4qKSQvLCckMScpfTskLmZuW3NdPWZ1bmN0aW9uKGUpe3JldHVybiBlP3RoaXMuYmluZChzLGUpOnRoaXMudHJpZ2dlcihzKX07JC5mbltzXS5kZWxheT01MDtjW3NdPSQuZXh0ZW5kKGNbc10se3NldHVwOmZ1bmN0aW9uKCl7aWYoaCl7cmV0dXJuIGZhbHNlfSQoYi5zdGFydCl9LHRlYXJkb3duOmZ1bmN0aW9uKCl7aWYoaCl7cmV0dXJuIGZhbHNlfSQoYi5zdG9wKX19KTtiPShmdW5jdGlvbigpe3ZhciBqPXt9LHQsbD1pKCksaz1mdW5jdGlvbih2KXtyZXR1cm4gdn0sbT1rLG49aztqLnN0YXJ0PWZ1bmN0aW9uKCl7dHx8cCgpfTtqLnN0b3A9ZnVuY3Rpb24oKXt0JiZjbGVhclRpbWVvdXQodCk7dD11fTtmdW5jdGlvbiBwKCl7dmFyIGU9aSgpLG89bihsKTtpZihlIT09bCl7bShsPWUsbyk7JChkKS50cmlnZ2VyKHMpfWVsc2UgaWYobyE9PWwpe2xvY2F0aW9uLmhyZWY9bG9jYXRpb24uaHJlZi5yZXBsYWNlKC8jLiovLCcnKStvfXQ9c2V0VGltZW91dChwLCQuZm5bc10uZGVsYXkpfTtkLmF0dGFjaEV2ZW50JiYhZC5hZGRFdmVudExpc3RlbmVyJiYhaCYmKGZ1bmN0aW9uKCl7dmFyIG8scTtqLnN0YXJ0PWZ1bmN0aW9uKCl7aWYoIW8pe3E9JC5mbltzXS5zcmM7cT1xJiZxK2koKTtvPSQoJzxpZnJhbWUgdGFiaW5kZXg9Ii0xIiB0aXRsZT0iZW1wdHkiLz4nKS5oaWRlKCkub25lKCdsb2FkJyxmdW5jdGlvbigpe3F8fG0oaSgpKTtwKCl9KS5hdHRyKCdzcmMnLHF8fCdqYXZhc2NyaXB0OjAnKS5pbnNlcnRBZnRlcignYm9keScpWzBdLmNvbnRlbnRXaW5kb3c7YS5vbnByb3BlcnR5Y2hhbmdlPWZ1bmN0aW9uKCl7dHJ5e2lmKGV2ZW50LnByb3BlcnR5TmFtZT09PSd0aXRsZScpe28uZG9jdW1lbnQudGl0bGU9YS50aXRsZX19Y2F0Y2goZSl7fX19fTtqLnN0b3A9aztuPWZ1bmN0aW9uKCl7cmV0dXJuIGkoby5sb2NhdGlvbi5ocmVmKX07bT1mdW5jdGlvbihlLHIpe3ZhciB2PW8uZG9jdW1lbnQsdz0kLmZuW3NdLmRvbWFpbjtpZihlIT09cil7di50aXRsZT1hLnRpdGxlO3Yub3BlbigpO3cmJnYud3JpdGUoJzxzY3JpcHQ+ZG9jdW1lbnQuZG9tYWluPSInK3crJyI8L3NjcmlwdD4nKTt2LmNsb3NlKCk7by5sb2NhdGlvbi5oYXNoPWV9fX0pKCk7cmV0dXJuIGp9KSgpfSkoUSx0aGlzKTsoZnVuY3Rpb24oJCl7JC5tb2JpbGU9e307US5tb2JpbGUub3JpZW50YXRpb25DaGFuZ2VFbmFibGVkPXRydWV9KFEpKTsoZnVuY3Rpb24oJCxkLHUpe3ZhciBuPXt9OyQubW9iaWxlPSQuZXh0ZW5kKCQubW9iaWxlLHt2ZXJzaW9uOiIxLjMuMSIsbnM6IiIsc3ViUGFnZVVybEtleToidWktcGFnZSIsYWN0aXZlUGFnZUNsYXNzOiJ1aS1wYWdlLWFjdGl2ZSIsYWN0aXZlQnRuQ2xhc3M6InVpLWJ0bi1hY3RpdmUiLGZvY3VzQ2xhc3M6InVpLWZvY3VzIixhamF4RW5hYmxlZDp0cnVlLGhhc2hMaXN0ZW5pbmdFbmFibGVkOnRydWUsbGlua0JpbmRpbmdFbmFibGVkOnRydWUsZGVmYXVsdFBhZ2VUcmFuc2l0aW9uOiJmYWRlIixtYXhUcmFuc2l0aW9uV2lkdGg6ZmFsc2UsbWluU2Nyb2xsQmFjazoyNTAsdG91Y2hPdmVyZmxvd0VuYWJsZWQ6ZmFsc2UsZGVmYXVsdERpYWxvZ1RyYW5zaXRpb246InBvcCIscGFnZUxvYWRFcnJvck1lc3NhZ2U6IkVycm9yIExvYWRpbmcgUGFnZSIscGFnZUxvYWRFcnJvck1lc3NhZ2VUaGVtZToiZSIscGhvbmVnYXBOYXZpZ2F0aW9uRW5hYmxlZDpmYWxzZSxhdXRvSW5pdGlhbGl6ZVBhZ2U6dHJ1ZSxwdXNoU3RhdGVFbmFibGVkOnRydWUsaWdub3JlQ29udGVudEVuYWJsZWQ6ZmFsc2Usb3JpZW50YXRpb25DaGFuZ2VFbmFibGVkOnRydWUsYnV0dG9uTWFya3VwOntob3ZlckRlbGF5OjIwMH0sd2luZG93OiQoZCksZG9jdW1lbnQ6JChmKSxrZXlDb2RlOntBTFQ6MTgsQkFDS1NQQUNFOjgsQ0FQU19MT0NLOjIwLENPTU1BOjE4OCxDT01NQU5EOjkxLENPTU1BTkRfTEVGVDo5MSxDT01NQU5EX1JJR0hUOjkzLENPTlRST0w6MTcsREVMRVRFOjQ2LERPV046NDAsRU5EOjM1LEVOVEVSOjEzLEVTQ0FQRToyNyxIT01FOjM2LElOU0VSVDo0NSxMRUZUOjM3LE1FTlU6OTMsTlVNUEFEX0FERDoxMDcsTlVNUEFEX0RFQ0lNQUw6MTEwLE5VTVBBRF9ESVZJREU6MTExLE5VTVBBRF9FTlRFUjoxMDgsTlVNUEFEX01VTFRJUExZOjEwNixOVU1QQURfU1VCVFJBQ1Q6MTA5LFBBR0VfRE9XTjozNCxQQUdFX1VQOjMzLFBFUklPRDoxOTAsUklHSFQ6MzksU0hJRlQ6MTYsU1BBQ0U6MzIsVEFCOjksVVA6MzgsV0lORE9XUzo5MX0sYmVoYXZpb3JzOnt9LHNpbGVudFNjcm9sbDpmdW5jdGlvbih5KXtpZigkLnR5cGUoeSkhPT0ibnVtYmVyIil7eT0kLm1vYmlsZS5kZWZhdWx0SG9tZVNjcm9sbH0kLmV2ZW50LnNwZWNpYWwuc2Nyb2xsc3RhcnQuZW5hYmxlZD1mYWxzZTtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ZC5zY3JvbGxUbygwLHkpOyQubW9iaWxlLmRvY3VtZW50LnRyaWdnZXIoInNpbGVudHNjcm9sbCIse3g6MCx5Onl9KX0sMjApO3NldFRpbWVvdXQoZnVuY3Rpb24oKXskLmV2ZW50LnNwZWNpYWwuc2Nyb2xsc3RhcnQuZW5hYmxlZD10cnVlfSwxNTApfSxuc05vcm1hbGl6ZURpY3Q6bixuc05vcm1hbGl6ZTpmdW5jdGlvbihwKXtpZighcCl7cmV0dXJufXJldHVybiBuW3BdfHwobltwXT0kLmNhbWVsQ2FzZSgkLm1vYmlsZS5ucytwKSl9LGdldEluaGVyaXRlZFRoZW1lOmZ1bmN0aW9uKGEsYil7dmFyIGU9YVswXSxsPSIiLHI9L3VpLShiYXJ8Ym9keXxvdmVybGF5KS0oW2Etel0pXGIvLGMsbTt3aGlsZShlKXtjPWUuY2xhc3NOYW1lfHwiIjtpZihjJiYobT1yLmV4ZWMoYykpJiYobD1tWzJdKSl7YnJlYWt9ZT1lLnBhcmVudE5vZGV9cmV0dXJuIGx8fGJ8fCJhIn0sY2xvc2VzdFBhZ2VEYXRhOmZ1bmN0aW9uKGEpe3JldHVybiBhLmNsb3Nlc3QoJzpqcW1EYXRhKHJvbGU9InBhZ2UiKSwgOmpxbURhdGEocm9sZT0iZGlhbG9nIiknKS5kYXRhKCJtb2JpbGUtcGFnZSIpfSxlbmhhbmNlYWJsZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5oYXZlUGFyZW50cyhhLCJlbmhhbmNlIil9LGhpamFja2FibGU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuaGF2ZVBhcmVudHMoYSwiYWpheCIpfSxoYXZlUGFyZW50czpmdW5jdGlvbihhLGIpe2lmKCEkLm1vYmlsZS5pZ25vcmVDb250ZW50RW5hYmxlZCl7cmV0dXJuIGF9dmFyIGc9YS5sZW5ndGgsaD0kKCksZSxrLGw7Zm9yKHZhciBpPTA7aTxnO2krKyl7az1hLmVxKGkpO2w9ZmFsc2U7ZT1hW2ldO3doaWxlKGUpe3ZhciBjPWUuZ2V0QXR0cmlidXRlP2UuZ2V0QXR0cmlidXRlKCJkYXRhLSIrJC5tb2JpbGUubnMrYik6IiI7aWYoYz09PSJmYWxzZSIpe2w9dHJ1ZTticmVha31lPWUucGFyZW50Tm9kZX1pZighbCl7aD1oLmFkZChrKX19cmV0dXJuIGh9LGdldFNjcmVlbkhlaWdodDpmdW5jdGlvbigpe3JldHVybiBkLmlubmVySGVpZ2h0fHwkLm1vYmlsZS53aW5kb3cuaGVpZ2h0KCl9fSwkLm1vYmlsZSk7JC5mbi5qcW1EYXRhPWZ1bmN0aW9uKHAsdil7dmFyIHI7aWYodHlwZW9mIHAhPT0idW5kZWZpbmVkIil7aWYocCl7cD0kLm1vYmlsZS5uc05vcm1hbGl6ZShwKX1pZihhcmd1bWVudHMubGVuZ3RoPDJ8fHY9PT11KXtyPXRoaXMuZGF0YShwKX1lbHNle3I9dGhpcy5kYXRhKHAsdil9fXJldHVybiByfTskLmpxbURhdGE9ZnVuY3Rpb24oZSxwLHYpe3ZhciByO2lmKHR5cGVvZiBwIT09InVuZGVmaW5lZCIpe3I9JC5kYXRhKGUscD8kLm1vYmlsZS5uc05vcm1hbGl6ZShwKTpwLHYpfXJldHVybiByfTskLmZuLmpxbVJlbW92ZURhdGE9ZnVuY3Rpb24ocCl7cmV0dXJuIHRoaXMucmVtb3ZlRGF0YSgkLm1vYmlsZS5uc05vcm1hbGl6ZShwKSl9OyQuanFtUmVtb3ZlRGF0YT1mdW5jdGlvbihlLHApe3JldHVybiAkLnJlbW92ZURhdGEoZSwkLm1vYmlsZS5uc05vcm1hbGl6ZShwKSl9OyQuZm4ucmVtb3ZlV2l0aERlcGVuZGVudHM9ZnVuY3Rpb24oKXskLnJlbW92ZVdpdGhEZXBlbmRlbnRzKHRoaXMpfTskLnJlbW92ZVdpdGhEZXBlbmRlbnRzPWZ1bmN0aW9uKGUpe3ZhciBhPSQoZSk7KGEuanFtRGF0YSgnZGVwZW5kZW50cycpfHwkKCkpLnJlbW92ZSgpO2EucmVtb3ZlKCl9OyQuZm4uYWRkRGVwZW5kZW50cz1mdW5jdGlvbihhKXskLmFkZERlcGVuZGVudHMoJCh0aGlzKSxhKX07JC5hZGREZXBlbmRlbnRzPWZ1bmN0aW9uKGUsYSl7dmFyIGI9JChlKS5qcW1EYXRhKCdkZXBlbmRlbnRzJyl8fCQoKTskKGUpLmpxbURhdGEoJ2RlcGVuZGVudHMnLCQubWVyZ2UoYixhKSl9OyQuZm4uZ2V0RW5jb2RlZFRleHQ9ZnVuY3Rpb24oKXtyZXR1cm4gJCgiPGRpdi8+IikudGV4dCgkKHRoaXMpLnRleHQoKSkuaHRtbCgpfTskLmZuLmpxbUVuaGFuY2VhYmxlPWZ1bmN0aW9uKCl7cmV0dXJuICQubW9iaWxlLmVuaGFuY2VhYmxlKHRoaXMpfTskLmZuLmpxbUhpamFja2FibGU9ZnVuY3Rpb24oKXtyZXR1cm4gJC5tb2JpbGUuaGlqYWNrYWJsZSh0aGlzKX07dmFyIG89JC5maW5kLGo9LzpqcW1EYXRhXCgoW14pXSopXCkvZzskLmZpbmQ9ZnVuY3Rpb24ocyxjLHIsZSl7cz1zLnJlcGxhY2UoaiwiW2RhdGEtIisoJC5tb2JpbGUubnN8fCIiKSsiJDFdIik7cmV0dXJuIG8uY2FsbCh0aGlzLHMsYyxyLGUpfTskLmV4dGVuZCgkLmZpbmQsbyk7JC5maW5kLm1hdGNoZXM9ZnVuY3Rpb24oZSxzKXtyZXR1cm4gJC5maW5kKGUsbnVsbCxudWxsLHMpfTskLmZpbmQubWF0Y2hlc1NlbGVjdG9yPWZ1bmN0aW9uKGEsZSl7cmV0dXJuICQuZmluZChlLG51bGwsbnVsbCxbYV0pLmxlbmd0aD4wfX0pKFEsdGhpcyk7KGZ1bmN0aW9uKCQsdSl7DQovKiEgbWF0Y2hNZWRpYSgpIHBvbHlmaWxsIC0gVGVzdCBhIENTUyBtZWRpYSB0eXBlL3F1ZXJ5IGluIEpTLiBBdXRob3JzICYgY29weXJpZ2h0IChjKSAyMDEyOiBTY290dCBKZWhsLCBQYXVsIElyaXNoLCBOaWNob2xhcyBaYWthcy4gRHVhbCBNSVQvQlNEIGxpY2Vuc2UgKi8NCmQubWF0Y2hNZWRpYT1kLm1hdGNoTWVkaWF8fChmdW5jdGlvbihhLHUpe3ZhciBiLGM9YS5kb2N1bWVudEVsZW1lbnQscj1jLmZpcnN0RWxlbWVudENoaWxkfHxjLmZpcnN0Q2hpbGQsZT1hLmNyZWF0ZUVsZW1lbnQoImJvZHkiKSxnPWEuY3JlYXRlRWxlbWVudCgiZGl2Iik7Zy5pZD0ibXEtdGVzdC0xIjtnLnN0eWxlLmNzc1RleHQ9InBvc2l0aW9uOmFic29sdXRlO3RvcDotMTAwZW0iO2Uuc3R5bGUuYmFja2dyb3VuZD0ibm9uZSI7ZS5hcHBlbmRDaGlsZChnKTtyZXR1cm4gZnVuY3Rpb24ocSl7Zy5pbm5lckhUTUw9IiZzaHk7PHN0eWxlIG1lZGlhPVwiIitxKyJcIj4gI21xLXRlc3QtMSB7IHdpZHRoOiA0MnB4OyB9PC9zdHlsZT4iO2MuaW5zZXJ0QmVmb3JlKGUscik7Yj1nLm9mZnNldFdpZHRoPT09NDI7Yy5yZW1vdmVDaGlsZChlKTtyZXR1cm57bWF0Y2hlczpiLG1lZGlhOnF9fX0oZikpOyQubW9iaWxlLm1lZGlhPWZ1bmN0aW9uKHEpe3JldHVybiBkLm1hdGNoTWVkaWEocSkubWF0Y2hlc319KShRKTsoZnVuY3Rpb24oJCx1KXt2YXIgcz17dG91Y2g6Im9udG91Y2hlbmQiaW4gZn07JC5tb2JpbGUuc3VwcG9ydD0kLm1vYmlsZS5zdXBwb3J0fHx7fTskLmV4dGVuZCgkLnN1cHBvcnQscyk7JC5leHRlbmQoJC5tb2JpbGUuc3VwcG9ydCxzKX0oUSkpOyhmdW5jdGlvbigkLHUpeyQuZXh0ZW5kKCQuc3VwcG9ydCx7b3JpZW50YXRpb246Im9yaWVudGF0aW9uImluIGQmJiJvbm9yaWVudGF0aW9uY2hhbmdlImluIGR9KX0oUSkpOyhmdW5jdGlvbigkLHUpe2Z1bmN0aW9uIHAoYSl7dmFyIGk9YS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSthLnN1YnN0cigxKSx0PShhKyIgIitlLmpvaW4oaSsiICIpK2kpLnNwbGl0KCIgIik7Zm9yKHZhciB2IGluIHQpe2lmKGNbdFt2XV0hPT11KXtyZXR1cm4gdHJ1ZX19fXZhciBiPSQoIjxib2R5PiIpLnByZXBlbmRUbygiaHRtbCIpLGM9YlswXS5zdHlsZSxlPVsiV2Via2l0IiwiTW96IiwiTyJdLGc9InBhbG1HZXRSZXNvdXJjZSJpbiBkLG89ZC5vcGVyYSxoPWQub3BlcmFtaW5pJiYoe30pLnRvU3RyaW5nLmNhbGwoZC5vcGVyYW1pbmkpPT09IltvYmplY3QgT3BlcmFNaW5pXSIsaj1kLmJsYWNrYmVycnkmJiFwKCItd2Via2l0LXRyYW5zZm9ybSIpO2Z1bmN0aW9uIGsoYSx2LHQpe3ZhciB3PWYuY3JlYXRlRWxlbWVudCgnZGl2JykseD1mdW5jdGlvbihDKXtyZXR1cm4gQy5jaGFyQXQoMCkudG9VcHBlckNhc2UoKStDLnN1YnN0cigxKX0seT1mdW5jdGlvbihDKXtpZihDPT09IiIpe3JldHVybiIifWVsc2V7cmV0dXJuIi0iK0MuY2hhckF0KDApLnRvTG93ZXJDYXNlKCkrQy5zdWJzdHIoMSkrIi0ifX0sej1mdW5jdGlvbihDKXt2YXIgRD15KEMpK2ErIjogIit2KyI7IixFPXgoQyksRj1FKyhFPT09IiI/YTp4KGEpKTt3LnNldEF0dHJpYnV0ZSgic3R5bGUiLEQpO2lmKCEhdy5zdHlsZVtGXSl7Qj10cnVlfX0sQT10P3Q6ZSxCO2Zvcih2YXIgaT0wO2k8QS5sZW5ndGg7aSsrKXt6KEFbaV0pfXJldHVybiEhQn1mdW5jdGlvbiBsKCl7dmFyIGE9InRyYW5zZm9ybS0zZCIsaT0kLm1vYmlsZS5tZWRpYSgiKC0iK2Uuam9pbigiLSIrYSsiKSwoLSIpKyItIithKyIpLCgiK2ErIikiKTtpZihpKXtyZXR1cm4hIWl9dmFyIHY9Zi5jcmVhdGVFbGVtZW50KCJkaXYiKSx3PXsnTW96VHJhbnNmb3JtJzonLW1vei10cmFuc2Zvcm0nLCd0cmFuc2Zvcm0nOid0cmFuc2Zvcm0nfTtiLmFwcGVuZCh2KTtmb3IodmFyIHQgaW4gdyl7aWYodi5zdHlsZVt0XSE9PXUpe3Yuc3R5bGVbdF09J3RyYW5zbGF0ZTNkKCAxMDBweCwgMXB4LCAxcHggKSc7aT1kLmdldENvbXB1dGVkU3R5bGUodikuZ2V0UHJvcGVydHlWYWx1ZSh3W3RdKX19cmV0dXJuKCEhaSYmaSE9PSJub25lIil9ZnVuY3Rpb24gbSgpe3ZhciBhPWxvY2F0aW9uLnByb3RvY29sKyIvLyIrbG9jYXRpb24uaG9zdCtsb2NhdGlvbi5wYXRobmFtZSsidWktZGlyLyIsaT0kKCJoZWFkIGJhc2UiKSx0PW51bGwsdj0iIix3LHg7aWYoIWkubGVuZ3RoKXtpPXQ9JCgiPGJhc2U+Iix7ImhyZWYiOmF9KS5hcHBlbmRUbygiaGVhZCIpfWVsc2V7dj1pLmF0dHIoImhyZWYiKX13PSQoIjxhIGhyZWY9J3Rlc3R1cmwnIC8+IikucHJlcGVuZFRvKGIpO3g9d1swXS5ocmVmO2lbMF0uaHJlZj12fHxsb2NhdGlvbi5wYXRobmFtZTtpZih0KXt0LnJlbW92ZSgpfXJldHVybiB4LmluZGV4T2YoYSk9PT0wfWZ1bmN0aW9uIG4oKXt2YXIgYT1mLmNyZWF0ZUVsZW1lbnQoJ3gnKSxpPWYuZG9jdW1lbnRFbGVtZW50LHQ9ZC5nZXRDb21wdXRlZFN0eWxlLHY7aWYoISgncG9pbnRlckV2ZW50cydpbiBhLnN0eWxlKSl7cmV0dXJuIGZhbHNlfWEuc3R5bGUucG9pbnRlckV2ZW50cz0nYXV0byc7YS5zdHlsZS5wb2ludGVyRXZlbnRzPSd4JztpLmFwcGVuZENoaWxkKGEpO3Y9dCYmdChhLCcnKS5wb2ludGVyRXZlbnRzPT09J2F1dG8nO2kucmVtb3ZlQ2hpbGQoYSk7cmV0dXJuISF2fWZ1bmN0aW9uIHEoKXt2YXIgYT1mLmNyZWF0ZUVsZW1lbnQoImRpdiIpO3JldHVybiB0eXBlb2YgYS5nZXRCb3VuZGluZ0NsaWVudFJlY3QhPT0idW5kZWZpbmVkIn0kLmV4dGVuZCgkLm1vYmlsZSx7YnJvd3Nlcjp7fX0pOyQubW9iaWxlLmJyb3dzZXIub2xkSUU9KGZ1bmN0aW9uKCl7dmFyIHY9MyxpPWYuY3JlYXRlRWxlbWVudCgiZGl2IiksYT1pLmFsbHx8W107ZG97aS5pbm5lckhUTUw9IjwhLS1baWYgZ3QgSUUgIisoKyt2KSsiXT48YnI+PCFbZW5kaWZdLS0+In13aGlsZShhWzBdKTtyZXR1cm4gdj40P3Y6IXZ9KSgpO2Z1bmN0aW9uIHIoKXt2YXIgdz1kLGE9bmF2aWdhdG9yLnVzZXJBZ2VudCxpPW5hdmlnYXRvci5wbGF0Zm9ybSx0PWEubWF0Y2goL0FwcGxlV2ViS2l0XC8oWzAtOV0rKS8pLHY9ISF0JiZ0WzFdLHg9YS5tYXRjaCgvRmVubmVjXC8oWzAtOV0rKS8pLHk9ISF4JiZ4WzFdLHo9YS5tYXRjaCgvT3BlcmEgTW9iaVwvKFswLTldKykvKSxBPSEheiYmelsxXTtpZigoKGkuaW5kZXhPZigiaVBob25lIik+LTF8fGkuaW5kZXhPZigiaVBhZCIpPi0xfHxpLmluZGV4T2YoImlQb2QiKT4tMSkmJnYmJnY8NTM0KXx8KHcub3BlcmFtaW5pJiYoe30pLnRvU3RyaW5nLmNhbGwody5vcGVyYW1pbmkpPT09IltvYmplY3QgT3BlcmFNaW5pXSIpfHwoeiYmQTw3NDU4KXx8KGEuaW5kZXhPZigiQW5kcm9pZCIpPi0xJiZ2JiZ2PDUzMyl8fCh5JiZ5PDYpfHwoInBhbG1HZXRSZXNvdXJjZSJpbiBkJiZ2JiZ2PDUzNCl8fChhLmluZGV4T2YoIk1lZUdvIik+LTEmJmEuaW5kZXhPZigiTm9raWFCcm93c2VyLzguNS4wIik+LTEpKXtyZXR1cm4gZmFsc2V9cmV0dXJuIHRydWV9JC5leHRlbmQoJC5zdXBwb3J0LHtjc3NUcmFuc2l0aW9uczoiV2ViS2l0VHJhbnNpdGlvbkV2ZW50ImluIGR8fGsoJ3RyYW5zaXRpb24nLCdoZWlnaHQgMTAwbXMgbGluZWFyJyxbIldlYmtpdCIsIk1veiIsIiJdKSYmISQubW9iaWxlLmJyb3dzZXIub2xkSUUmJiFvLHB1c2hTdGF0ZToicHVzaFN0YXRlImluIGhpc3RvcnkmJiJyZXBsYWNlU3RhdGUiaW4gaGlzdG9yeSYmIShkLm5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZigiRmlyZWZveCIpPj0wJiZkLnRvcCE9PWQpJiYoZC5uYXZpZ2F0b3IudXNlckFnZW50LnNlYXJjaCgvQ3JpT1MvKT09PS0xKSxtZWRpYXF1ZXJ5OiQubW9iaWxlLm1lZGlhKCJvbmx5IGFsbCIpLGNzc1BzZXVkb0VsZW1lbnQ6ISFwKCJjb250ZW50IiksdG91Y2hPdmVyZmxvdzohIXAoIm92ZXJmbG93U2Nyb2xsaW5nIiksY3NzVHJhbnNmb3JtM2Q6bCgpLGJveFNoYWRvdzohIXAoImJveFNoYWRvdyIpJiYhaixmaXhlZFBvc2l0aW9uOnIoKSxzY3JvbGxUb3A6KCJwYWdlWE9mZnNldCJpbiBkfHwic2Nyb2xsVG9wImluIGYuZG9jdW1lbnRFbGVtZW50fHwic2Nyb2xsVG9wImluIGJbMF0pJiYhZyYmIWgsZHluYW1pY0Jhc2VUYWc6bSgpLGNzc1BvaW50ZXJFdmVudHM6bigpLGJvdW5kaW5nUmVjdDpxKCl9KTtiLnJlbW92ZSgpO3ZhciBzPShmdW5jdGlvbigpe3ZhciBhPWQubmF2aWdhdG9yLnVzZXJBZ2VudDtyZXR1cm4gYS5pbmRleE9mKCJOb2tpYSIpPi0xJiYoYS5pbmRleE9mKCJTeW1iaWFuLzMiKT4tMXx8YS5pbmRleE9mKCJTZXJpZXM2MC81Iik+LTEpJiZhLmluZGV4T2YoIkFwcGxlV2ViS2l0Iik+LTEmJmEubWF0Y2goLyhCcm93c2VyTkd8Tm9raWFCcm93c2VyKVwvN1wuWzAtM10vKX0pKCk7JC5tb2JpbGUuZ3JhZGVBPWZ1bmN0aW9uKCl7cmV0dXJuKCQuc3VwcG9ydC5tZWRpYXF1ZXJ5fHwkLm1vYmlsZS5icm93c2VyLm9sZElFJiYkLm1vYmlsZS5icm93c2VyLm9sZElFPj03KSYmKCQuc3VwcG9ydC5ib3VuZGluZ1JlY3R8fCQuZm4uanF1ZXJ5Lm1hdGNoKC8xXC5bMC03K11cLlswLTkrXT8vKSE9PW51bGwpfTskLm1vYmlsZS5hamF4QmxhY2tsaXN0PWQuYmxhY2tiZXJyeSYmIWQuV2ViS2l0UG9pbnR8fGh8fHM7aWYocyl7JChmdW5jdGlvbigpeyQoImhlYWQgbGlua1tyZWw9J3N0eWxlc2hlZXQnXSIpLmF0dHIoInJlbCIsImFsdGVybmF0ZSBzdHlsZXNoZWV0IikuYXR0cigicmVsIiwic3R5bGVzaGVldCIpfSl9aWYoISQuc3VwcG9ydC5ib3hTaGFkb3cpeyQoImh0bWwiKS5hZGRDbGFzcygidWktbW9iaWxlLW5vc3VwcG9ydC1ib3hzaGFkb3ciKX19KShRKTsoZnVuY3Rpb24oJCx1KXt2YXIgYT0kLm1vYmlsZS53aW5kb3cscyxoOyQuZXZlbnQuc3BlY2lhbC5uYXZpZ2F0ZT1zPXtib3VuZDpmYWxzZSxwdXNoU3RhdGVFbmFibGVkOnRydWUsb3JpZ2luYWxFdmVudE5hbWU6dSxpc1B1c2hTdGF0ZUVuYWJsZWQ6ZnVuY3Rpb24oKXtyZXR1cm4gJC5zdXBwb3J0LnB1c2hTdGF0ZSYmJC5tb2JpbGUucHVzaFN0YXRlRW5hYmxlZD09PXRydWUmJnRoaXMuaXNIYXNoQ2hhbmdlRW5hYmxlZCgpfSxpc0hhc2hDaGFuZ2VFbmFibGVkOmZ1bmN0aW9uKCl7cmV0dXJuICQubW9iaWxlLmhhc2hMaXN0ZW5pbmdFbmFibGVkPT09dHJ1ZX0scG9wc3RhdGU6ZnVuY3Rpb24oZSl7dmFyIG49bmV3ICQuRXZlbnQoIm5hdmlnYXRlIiksYj1uZXcgJC5FdmVudCgiYmVmb3JlbmF2aWdhdGUiKSxjPWUub3JpZ2luYWxFdmVudC5zdGF0ZXx8e30sZz1sb2NhdGlvbi5ocmVmO2EudHJpZ2dlcihiKTtpZihiLmlzRGVmYXVsdFByZXZlbnRlZCgpKXtyZXR1cm59aWYoZS5oaXN0b3J5U3RhdGUpeyQuZXh0ZW5kKGMsZS5oaXN0b3J5U3RhdGUpfW4ub3JpZ2luYWxFdmVudD1lO3NldFRpbWVvdXQoZnVuY3Rpb24oKXthLnRyaWdnZXIobix7c3RhdGU6Y30pfSwwKX0saGFzaGNoYW5nZTpmdW5jdGlvbihlLGIpe3ZhciBuPW5ldyAkLkV2ZW50KCJuYXZpZ2F0ZSIpLGM9bmV3ICQuRXZlbnQoImJlZm9yZW5hdmlnYXRlIik7YS50cmlnZ2VyKGMpO2lmKGMuaXNEZWZhdWx0UHJldmVudGVkKCkpe3JldHVybn1uLm9yaWdpbmFsRXZlbnQ9ZTthLnRyaWdnZXIobix7c3RhdGU6ZS5oYXNoY2hhbmdlU3RhdGV8fHt9fSl9LHNldHVwOmZ1bmN0aW9uKGIsbil7aWYocy5ib3VuZCl7cmV0dXJufXMuYm91bmQ9dHJ1ZTtpZihzLmlzUHVzaFN0YXRlRW5hYmxlZCgpKXtzLm9yaWdpbmFsRXZlbnROYW1lPSJwb3BzdGF0ZSI7YS5iaW5kKCJwb3BzdGF0ZS5uYXZpZ2F0ZSIscy5wb3BzdGF0ZSl9ZWxzZSBpZihzLmlzSGFzaENoYW5nZUVuYWJsZWQoKSl7cy5vcmlnaW5hbEV2ZW50TmFtZT0iaGFzaGNoYW5nZSI7YS5iaW5kKCJoYXNoY2hhbmdlLm5hdmlnYXRlIixzLmhhc2hjaGFuZ2UpfX19fSkoUSk7KGZ1bmN0aW9uKCQpeyQuZXZlbnQuc3BlY2lhbC50aHJvdHRsZWRyZXNpemU9e3NldHVwOmZ1bmN0aW9uKCl7JCh0aGlzKS5iaW5kKCJyZXNpemUiLGgpfSx0ZWFyZG93bjpmdW5jdGlvbigpeyQodGhpcykudW5iaW5kKCJyZXNpemUiLGgpfX07dmFyIHQ9MjUwLGg9ZnVuY3Rpb24oKXtjPShuZXcgRGF0ZSgpKS5nZXRUaW1lKCk7Yj1jLWw7aWYoYj49dCl7bD1jOyQodGhpcykudHJpZ2dlcigidGhyb3R0bGVkcmVzaXplIil9ZWxzZXtpZihhKXtjbGVhclRpbWVvdXQoYSl9YT1zZXRUaW1lb3V0KGgsdC1iKX19LGw9MCxhLGMsYn0pKFEpOyhmdW5jdGlvbigkLGQpe3ZhciB3PSQoZCksZT0ib3JpZW50YXRpb25jaGFuZ2UiLHMsZyxsLGksYSxwPXsiMCI6dHJ1ZSwiMTgwIjp0cnVlfTtpZigkLnN1cHBvcnQub3JpZW50YXRpb24pe3ZhciBiPWQuaW5uZXJXaWR0aHx8dy53aWR0aCgpLGM9ZC5pbm5lckhlaWdodHx8dy5oZWlnaHQoKSxoPTUwO2k9Yj5jJiYoYi1jKT5oO2E9cFtkLm9yaWVudGF0aW9uXTtpZigoaSYmYSl8fCghaSYmIWEpKXtwPXsiLTkwIjp0cnVlLCI5MCI6dHJ1ZX19fSQuZXZlbnQuc3BlY2lhbC5vcmllbnRhdGlvbmNoYW5nZT0kLmV4dGVuZCh7fSwkLmV2ZW50LnNwZWNpYWwub3JpZW50YXRpb25jaGFuZ2Use3NldHVwOmZ1bmN0aW9uKCl7aWYoJC5zdXBwb3J0Lm9yaWVudGF0aW9uJiYhJC5ldmVudC5zcGVjaWFsLm9yaWVudGF0aW9uY2hhbmdlLmRpc2FibGVkKXtyZXR1cm4gZmFsc2V9bD1nKCk7dy5iaW5kKCJ0aHJvdHRsZWRyZXNpemUiLGopfSx0ZWFyZG93bjpmdW5jdGlvbigpe2lmKCQuc3VwcG9ydC5vcmllbnRhdGlvbiYmISQuZXZlbnQuc3BlY2lhbC5vcmllbnRhdGlvbmNoYW5nZS5kaXNhYmxlZCl7cmV0dXJuIGZhbHNlfXcudW5iaW5kKCJ0aHJvdHRsZWRyZXNpemUiLGopfSxhZGQ6ZnVuY3Rpb24oayl7dmFyIG89ay5oYW5kbGVyO2suaGFuZGxlcj1mdW5jdGlvbihtKXttLm9yaWVudGF0aW9uPWcoKTtyZXR1cm4gby5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fX0pO2Z1bmN0aW9uIGooKXt2YXIgbz1nKCk7aWYobyE9PWwpe2w9bzt3LnRyaWdnZXIoZSl9fSQuZXZlbnQuc3BlY2lhbC5vcmllbnRhdGlvbmNoYW5nZS5vcmllbnRhdGlvbj1nPWZ1bmN0aW9uKCl7dmFyIGs9dHJ1ZSxtPWYuZG9jdW1lbnRFbGVtZW50O2lmKCQuc3VwcG9ydC5vcmllbnRhdGlvbil7az1wW2Qub3JpZW50YXRpb25dfWVsc2V7az1tJiZtLmNsaWVudFdpZHRoL20uY2xpZW50SGVpZ2h0PDEuMX1yZXR1cm4gaz8icG9ydHJhaXQiOiJsYW5kc2NhcGUifTskLmZuW2VdPWZ1bmN0aW9uKGspe3JldHVybiBrP3RoaXMuYmluZChlLGspOnRoaXMudHJpZ2dlcihlKX07aWYoJC5hdHRyRm4peyQuYXR0ckZuW2VdPXRydWV9fShRLHRoaXMpKTsoZnVuY3Rpb24oJCxkLGYsdSl7dmFyIGE9InZpcnR1YWxNb3VzZUJpbmRpbmdzIixjPSJ2aXJ0dWFsVG91Y2hJRCIsdj0idm1vdXNlb3ZlciB2bW91c2Vkb3duIHZtb3VzZW1vdmUgdm1vdXNldXAgdmNsaWNrIHZtb3VzZW91dCB2bW91c2VjYW5jZWwiLnNwbGl0KCIgIiksZz0iY2xpZW50WCBjbGllbnRZIHBhZ2VYIHBhZ2VZIHNjcmVlblggc2NyZWVuWSIuc3BsaXQoIiAiKSxtPSQuZXZlbnQubW91c2VIb29rcz8kLmV2ZW50Lm1vdXNlSG9va3MucHJvcHM6W10saD0kLmV2ZW50LnByb3BzLmNvbmNhdChtKSxsPXt9LHI9MCxzPTAsbj0wLHA9ZmFsc2UscT1bXSx3PWZhbHNlLHo9ZmFsc2UsQT0iYWRkRXZlbnRMaXN0ZW5lciJpbiBmLEI9JChmKSxDPTEsRD0wLEU7JC52bW91c2U9e21vdmVEaXN0YW5jZVRocmVzaG9sZDoxMCxjbGlja0Rpc3RhbmNlVGhyZXNob2xkOjEwLHJlc2V0VGltZXJEdXJhdGlvbjoxNTAwfTtmdW5jdGlvbiBGKGUpe3doaWxlKGUmJnR5cGVvZiBlLm9yaWdpbmFsRXZlbnQhPT0idW5kZWZpbmVkIil7ZT1lLm9yaWdpbmFsRXZlbnR9cmV0dXJuIGV9ZnVuY3Rpb24gRyhlLGIpe3ZhciB0PWUudHlwZSxvLGsseCx5LF8sYTEsaSxqLGIxO2U9JC5FdmVudChlKTtlLnR5cGU9YjtvPWUub3JpZ2luYWxFdmVudDtrPSQuZXZlbnQucHJvcHM7aWYodC5zZWFyY2goL14obW91c2V8Y2xpY2spLyk+LTEpe2s9aH1pZihvKXtmb3IoaT1rLmxlbmd0aCx5O2k7KXt5PWtbLS1pXTtlW3ldPW9beV19fWlmKHQuc2VhcmNoKC9tb3VzZShkb3dufHVwKXxjbGljay8pPi0xJiYhZS53aGljaCl7ZS53aGljaD0xfWlmKHQuc2VhcmNoKC9edG91Y2gvKSE9PS0xKXt4PUYobyk7dD14LnRvdWNoZXM7Xz14LmNoYW5nZWRUb3VjaGVzO2ExPSh0JiZ0Lmxlbmd0aCk/dFswXTooKF8mJl8ubGVuZ3RoKT9fWzBdOnUpO2lmKGExKXtmb3Ioaj0wLGIxPWcubGVuZ3RoO2o8YjE7aisrKXt5PWdbal07ZVt5XT1hMVt5XX19fXJldHVybiBlfWZ1bmN0aW9uIEgoZSl7dmFyIGo9e30sYixrO3doaWxlKGUpe2I9JC5kYXRhKGUsYSk7Zm9yKGsgaW4gYil7aWYoYltrXSl7altrXT1qLmhhc1ZpcnR1YWxCaW5kaW5nPXRydWV9fWU9ZS5wYXJlbnROb2RlfXJldHVybiBqfWZ1bmN0aW9uIEkoZSxqKXt2YXIgYjt3aGlsZShlKXtiPSQuZGF0YShlLGEpO2lmKGImJighanx8YltqXSkpe3JldHVybiBlfWU9ZS5wYXJlbnROb2RlfXJldHVybiBudWxsfWZ1bmN0aW9uIEooKXt6PWZhbHNlfWZ1bmN0aW9uIEsoKXt6PXRydWV9ZnVuY3Rpb24gTCgpe0Q9MDtxLmxlbmd0aD0wO3c9ZmFsc2U7SygpfWZ1bmN0aW9uIE0oKXtKKCl9ZnVuY3Rpb24gTigpe08oKTtyPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtyPTA7TCgpfSwkLnZtb3VzZS5yZXNldFRpbWVyRHVyYXRpb24pfWZ1bmN0aW9uIE8oKXtpZihyKXtjbGVhclRpbWVvdXQocik7cj0wfX1mdW5jdGlvbiBQKGUsYixqKXt2YXIgaztpZigoaiYmaltlXSl8fCghaiYmSShiLnRhcmdldCxlKSkpe2s9RyhiLGUpOyQoYi50YXJnZXQpLnRyaWdnZXIoayl9cmV0dXJuIGt9ZnVuY3Rpb24gUihlKXt2YXIgdD0kLmRhdGEoZS50YXJnZXQsYyk7aWYoIXcmJighRHx8RCE9PXQpKXt2YXIgYj1QKCJ2IitlLnR5cGUsZSk7aWYoYil7aWYoYi5pc0RlZmF1bHRQcmV2ZW50ZWQoKSl7ZS5wcmV2ZW50RGVmYXVsdCgpfWlmKGIuaXNQcm9wYWdhdGlvblN0b3BwZWQoKSl7ZS5zdG9wUHJvcGFnYXRpb24oKX1pZihiLmlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkKCkpe2Uuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCl9fX19ZnVuY3Rpb24gUyhlKXt2YXIgYj1GKGUpLnRvdWNoZXMsaixrO2lmKGImJmIubGVuZ3RoPT09MSl7aj1lLnRhcmdldDtrPUgoaik7aWYoay5oYXNWaXJ0dWFsQmluZGluZyl7RD1DKys7JC5kYXRhKGosYyxEKTtPKCk7TSgpO3A9ZmFsc2U7dmFyIHQ9RihlKS50b3VjaGVzWzBdO3M9dC5wYWdlWDtuPXQucGFnZVk7UCgidm1vdXNlb3ZlciIsZSxrKTtQKCJ2bW91c2Vkb3duIixlLGspfX19ZnVuY3Rpb24gVChlKXtpZih6KXtyZXR1cm59aWYoIXApe1AoInZtb3VzZWNhbmNlbCIsZSxIKGUudGFyZ2V0KSl9cD10cnVlO04oKX1mdW5jdGlvbiBVKGUpe2lmKHope3JldHVybn12YXIgdD1GKGUpLnRvdWNoZXNbMF0sYj1wLGo9JC52bW91c2UubW92ZURpc3RhbmNlVGhyZXNob2xkLGs9SChlLnRhcmdldCk7cD1wfHwoTWF0aC5hYnModC5wYWdlWC1zKT5qfHxNYXRoLmFicyh0LnBhZ2VZLW4pPmopO2lmKHAmJiFiKXtQKCJ2bW91c2VjYW5jZWwiLGUsayl9UCgidm1vdXNlbW92ZSIsZSxrKTtOKCl9ZnVuY3Rpb24gVihlKXtpZih6KXtyZXR1cm59SygpO3ZhciBiPUgoZS50YXJnZXQpLHQ7UCgidm1vdXNldXAiLGUsYik7aWYoIXApe3ZhciBqPVAoInZjbGljayIsZSxiKTtpZihqJiYkLnN1cHBvcnQudG91Y2gpe3Q9RihlKS5jaGFuZ2VkVG91Y2hlc1swXTtxLnB1c2goe3RvdWNoSUQ6RCx4OnQuY2xpZW50WCx5OnQuY2xpZW50WSx0YXJnZXQ6ZS50YXJnZXR9KTt3PXRydWV9fVAoInZtb3VzZW91dCIsZSxiKTtwPWZhbHNlO04oKX1mdW5jdGlvbiBXKGUpe3ZhciBiPSQuZGF0YShlLGEpLGs7aWYoYil7Zm9yKGsgaW4gYil7aWYoYltrXSl7cmV0dXJuIHRydWV9fX1yZXR1cm4gZmFsc2V9ZnVuY3Rpb24gWCgpe31mdW5jdGlvbiBZKGUpe3ZhciBiPWUuc3Vic3RyKDEpO3JldHVybntzZXR1cDpmdW5jdGlvbihqLGspe2lmKCFXKHRoaXMpKXskLmRhdGEodGhpcyxhLHt9KX12YXIgbz0kLmRhdGEodGhpcyxhKTtvW2VdPXRydWU7bFtlXT0obFtlXXx8MCkrMTtpZihsW2VdPT09MSl7Qi5iaW5kKGIsUil9JCh0aGlzKS5iaW5kKGIsWCk7aWYoQSl7bFsidG91Y2hzdGFydCJdPShsWyJ0b3VjaHN0YXJ0Il18fDApKzE7aWYobFsidG91Y2hzdGFydCJdPT09MSl7Qi5iaW5kKCJ0b3VjaHN0YXJ0IixTKS5iaW5kKCJ0b3VjaGVuZCIsVikuYmluZCgidG91Y2htb3ZlIixVKX19fSx0ZWFyZG93bjpmdW5jdGlvbihqLGspey0tbFtlXTtpZighbFtlXSl7Qi51bmJpbmQoYixSKX1pZihBKXstLWxbInRvdWNoc3RhcnQiXTtpZighbFsidG91Y2hzdGFydCJdKXtCLnVuYmluZCgidG91Y2hzdGFydCIsUykudW5iaW5kKCJ0b3VjaG1vdmUiLFUpLnVuYmluZCgidG91Y2hlbmQiLFYpLnVuYmluZCgic2Nyb2xsIixUKX19dmFyIG89JCh0aGlzKSx0PSQuZGF0YSh0aGlzLGEpO2lmKHQpe3RbZV09ZmFsc2V9by51bmJpbmQoYixYKTtpZighVyh0aGlzKSl7by5yZW1vdmVEYXRhKGEpfX19fWZvcih2YXIgaT0wO2k8di5sZW5ndGg7aSsrKXskLmV2ZW50LnNwZWNpYWxbdltpXV09WSh2W2ldKX1pZihBKXtmdW5jdGlvbiBaKGUpe3ZhciBiPXEubGVuZ3RoLHQ9ZS50YXJnZXQseCx5LGosaSxvLGs7aWYoYil7eD1lLmNsaWVudFg7eT1lLmNsaWVudFk7RT0kLnZtb3VzZS5jbGlja0Rpc3RhbmNlVGhyZXNob2xkO2o9dDt3aGlsZShqKXtmb3IoaT0wO2k8YjtpKyspe289cVtpXTtrPTA7aWYoKGo9PT10JiZNYXRoLmFicyhvLngteCk8RSYmTWF0aC5hYnMoby55LXkpPEUpfHwkLmRhdGEoaixjKT09PW8udG91Y2hJRCl7aWYoIWUuaXNTeW50aGV0aWMpe2UuX3NhcHVpX2RlbGF5ZWRNb3VzZUV2ZW50PXRydWV9aWYodD09PW8udGFyZ2V0KXtyZXR1cm59ZS5wcmV2ZW50RGVmYXVsdCgpO2Uuc3RvcFByb3BhZ2F0aW9uKCk7cmV0dXJufX1qPWoucGFyZW50Tm9kZX19fTtmLmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNlZG93biIsWix0cnVlKTtmLmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNldXAiLFosdHJ1ZSk7Zi5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsWix0cnVlKX19KShRLGQsZik7KGZ1bmN0aW9uKCQsZCx1KXt2YXIgYT0kKGYpOyQuZWFjaCgoInRvdWNoc3RhcnQgdG91Y2htb3ZlIHRvdWNoZW5kICIrInRhcCB0YXBob2xkICIrInN3aXBlIHN3aXBlbGVmdCBzd2lwZXJpZ2h0ICIrInNjcm9sbHN0YXJ0IHNjcm9sbHN0b3AiKS5zcGxpdCgiICIpLGZ1bmN0aW9uKGksbil7JC5mbltuXT1mdW5jdGlvbihoKXtyZXR1cm4gaD90aGlzLmJpbmQobixoKTp0aGlzLnRyaWdnZXIobil9O2lmKCQuYXR0ckZuKXskLmF0dHJGbltuXT10cnVlfX0pO3ZhciBzPSQubW9iaWxlLnN1cHBvcnQudG91Y2gsYj0idG91Y2htb3ZlIHNjcm9sbCIsdD1zPyJ0b3VjaHN0YXJ0IjoibW91c2Vkb3duIixjPXM/InRvdWNoZW5kIHRvdWNoY2FuY2VsIjoibW91c2V1cCIsZT1zPyJ0b3VjaG1vdmUiOiJtb3VzZW1vdmUiO2Z1bmN0aW9uIGcobyxoLGkpe3ZhciBqPWkudHlwZTtpLnR5cGU9aDskLmV2ZW50LmRpc3BhdGNoLmNhbGwobyxpKTtpLnR5cGU9an0kLmV2ZW50LnNwZWNpYWwuc2Nyb2xsc3RhcnQ9e2VuYWJsZWQ6dHJ1ZSxzZXR1cDpmdW5jdGlvbigpe3ZhciBoPXRoaXMsaT0kKGgpLGosaztmdW5jdGlvbiBsKG0sbil7aj1uO2coaCxqPyJzY3JvbGxzdGFydCI6InNjcm9sbHN0b3AiLG0pfWkuYmluZChiLGZ1bmN0aW9uKG0pe2lmKCEkLmV2ZW50LnNwZWNpYWwuc2Nyb2xsc3RhcnQuZW5hYmxlZCl7cmV0dXJufWlmKCFqKXtsKG0sdHJ1ZSl9Y2xlYXJUaW1lb3V0KGspO2s9c2V0VGltZW91dChmdW5jdGlvbigpe2wobSxmYWxzZSl9LDUwKX0pfX07JC5ldmVudC5zcGVjaWFsLnRhcD17dGFwaG9sZFRocmVzaG9sZDo3NTAsc2V0dXA6ZnVuY3Rpb24oKXt2YXIgaD10aGlzLGk9JChoKTtpLmJpbmQoInZtb3VzZWRvd24iLGZ1bmN0aW9uKGope2lmKGoud2hpY2gmJmoud2hpY2ghPT0xKXtyZXR1cm4gZmFsc2V9dmFyIG89ai50YXJnZXQsaz1qLm9yaWdpbmFsRXZlbnQsbDtmdW5jdGlvbiBtKCl7Y2xlYXJUaW1lb3V0KGwpfWZ1bmN0aW9uIG4oKXttKCk7aS51bmJpbmQoInZjbGljayIscCkudW5iaW5kKCJ2bW91c2V1cCIsbSk7YS51bmJpbmQoInZtb3VzZWNhbmNlbCIsbil9ZnVuY3Rpb24gcChqKXtuKCk7aWYobz09PWoudGFyZ2V0KXtnKGgsInRhcCIsail9fWkuYmluZCgidm1vdXNldXAiLG0pLmJpbmQoInZjbGljayIscCk7YS5iaW5kKCJ2bW91c2VjYW5jZWwiLG4pO2w9c2V0VGltZW91dChmdW5jdGlvbigpe2coaCwidGFwaG9sZCIsJC5FdmVudCgidGFwaG9sZCIse3RhcmdldDpvfSkpfSwkLmV2ZW50LnNwZWNpYWwudGFwLnRhcGhvbGRUaHJlc2hvbGQpfSl9fTskLmV2ZW50LnNwZWNpYWwuc3dpcGU9e3Njcm9sbFN1cHJlc3Npb25UaHJlc2hvbGQ6MzAsZHVyYXRpb25UaHJlc2hvbGQ6MTAwMCxob3Jpem9udGFsRGlzdGFuY2VUaHJlc2hvbGQ6MzAsdmVydGljYWxEaXN0YW5jZVRocmVzaG9sZDo3NSxzdGFydDpmdW5jdGlvbihoKXt2YXIgaT1oLm9yaWdpbmFsRXZlbnQudG91Y2hlcz9oLm9yaWdpbmFsRXZlbnQudG91Y2hlc1swXTpoO3JldHVybnt0aW1lOihuZXcgRGF0ZSgpKS5nZXRUaW1lKCksY29vcmRzOltpLnBhZ2VYLGkucGFnZVldLG9yaWdpbjokKGgudGFyZ2V0KX19LHN0b3A6ZnVuY3Rpb24oaCl7dmFyIGk9aC5vcmlnaW5hbEV2ZW50LnRvdWNoZXM/aC5vcmlnaW5hbEV2ZW50LnRvdWNoZXNbMF06aDtyZXR1cm57dGltZToobmV3IERhdGUoKSkuZ2V0VGltZSgpLGNvb3JkczpbaS5wYWdlWCxpLnBhZ2VZXX19LGhhbmRsZVN3aXBlOmZ1bmN0aW9uKGgsaSl7aWYoaS50aW1lLWgudGltZTwkLmV2ZW50LnNwZWNpYWwuc3dpcGUuZHVyYXRpb25UaHJlc2hvbGQmJk1hdGguYWJzKGguY29vcmRzWzBdLWkuY29vcmRzWzBdKT4kLmV2ZW50LnNwZWNpYWwuc3dpcGUuaG9yaXpvbnRhbERpc3RhbmNlVGhyZXNob2xkJiZNYXRoLmFicyhoLmNvb3Jkc1sxXS1pLmNvb3Jkc1sxXSk8JC5ldmVudC5zcGVjaWFsLnN3aXBlLnZlcnRpY2FsRGlzdGFuY2VUaHJlc2hvbGQpe2gub3JpZ2luLnRyaWdnZXIoInN3aXBlIikudHJpZ2dlcihoLmNvb3Jkc1swXT5pLmNvb3Jkc1swXT8ic3dpcGVsZWZ0Ijoic3dpcGVyaWdodCIpfX0sc2V0dXA6ZnVuY3Rpb24oKXt2YXIgaD10aGlzLGk9JChoKTtpLmJpbmQodCxmdW5jdGlvbihqKXtpZihqLmlzTWFya2VkKCJzd2lwZXN0YXJ0SGFuZGxlZCIpKXtyZXR1cm59ai5zZXRNYXJrZWQoInN3aXBlc3RhcnRIYW5kbGVkIik7dmFyIGs9JC5ldmVudC5zcGVjaWFsLnN3aXBlLnN0YXJ0KGopLGw7ZnVuY3Rpb24gbShqKXtpZighayl7cmV0dXJufWw9JC5ldmVudC5zcGVjaWFsLnN3aXBlLnN0b3Aoaik7aWYoIXNhcC51aS5EZXZpY2Uuc3lzdGVtLmRlc2t0b3B8fHNhcC51aS5EZXZpY2UuYnJvd3Nlci5uYW1lIT09ImNyIil7aWYoTWF0aC5hYnMoay5jb29yZHNbMF0tbC5jb29yZHNbMF0pPiQuZXZlbnQuc3BlY2lhbC5zd2lwZS5zY3JvbGxTdXByZXNzaW9uVGhyZXNob2xkKXtqLnByZXZlbnREZWZhdWx0KCl9fX1mdW5jdGlvbiBuKGope2kudW5iaW5kKGUsbSkudW5iaW5kKGMsbik7aWYoayYmbCl7JC5ldmVudC5zcGVjaWFsLnN3aXBlLmhhbmRsZVN3aXBlKGssbCl9az1sPXV9aS5iaW5kKGUsbSkuYmluZChjLG4pfSl9fTskLmVhY2goe3Njcm9sbHN0b3A6InNjcm9sbHN0YXJ0Iix0YXBob2xkOiJ0YXAiLHN3aXBlbGVmdDoic3dpcGUiLHN3aXBlcmlnaHQ6InN3aXBlIn0sZnVuY3Rpb24oaCxpKXskLmV2ZW50LnNwZWNpYWxbaF09e3NldHVwOmZ1bmN0aW9uKCl7JCh0aGlzKS5iaW5kKGksJC5ub29wKX19fSl9KShRLHRoaXMpfSkpOw0KLyohDQogKiBTQVAgVUkgZGV2ZWxvcG1lbnQgdG9vbGtpdCBmb3IgSFRNTDUgKFNBUFVJNS9PcGVuVUk1KQ0KICogKGMpIENvcHlyaWdodCAyMDA5LTIwMTQgU0FQIFNFIG9yIGFuIFNBUCBhZmZpbGlhdGUgY29tcGFueS4gDQogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wIC0gc2VlIExJQ0VOU0UudHh0Lg0KICovDQooZnVuY3Rpb24oKXtpZighd2luZG93LmpRdWVyeSl7dGhyb3cgbmV3IEVycm9yKCJTQVBVSTUgcmVxdWlyZXMgalF1ZXJ5IGFzIGEgcHJlcmVxdWlzaXRlICg+PSB2ZXJzaW9uIDEuNykiKX1pZihqUXVlcnkuc2FwKXtyZXR1cm59dmFyIF89d2luZG93O3ZhciBhPVtdO2Z1bmN0aW9uIGIobCxtKXthLnB1c2goe2xldmVsOmwsbWVzc2FnZTptfSl9dmFyIGM9dW5kZWZpbmVkO3ZhciByPS9eWzAtOV0rKD86XC4oWzAtOV0rKSg/OlwuKFswLTldKykpPyk/KC4qKSQvO2Z1bmN0aW9uIFYoTSxpLGQscyl7aWYoTSBpbnN0YW5jZW9mIFYpe3JldHVybiBNfWlmKCEodGhpcyBpbnN0YW5jZW9mIFYpKXtyZXR1cm4gbmV3IFYoTSxpLGQscyl9dmFyIG09KHR5cGVvZiBNPT09InN0cmluZyI/ci5leGVjKE0pOihqUXVlcnkuaXNBcnJheShNKT9NOmFyZ3VtZW50cykpfHxbXTtmdW5jdGlvbiBuKHYpe3Y9cGFyc2VJbnQodiwxMCk7cmV0dXJuIGlzTmFOKHYpPzA6dn1NPW4obVswXSk7aT1uKG1bMV0pO2Q9bihtWzJdKTtzPVN0cmluZyhtWzNdfHwiIik7dGhpcy50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiBNKyIuIitpKyIuIitkK3N9O3RoaXMuZ2V0TWFqb3I9ZnVuY3Rpb24oKXtyZXR1cm4gTX07dGhpcy5nZXRNaW5vcj1mdW5jdGlvbigpe3JldHVybiBpfTt0aGlzLmdldFBhdGNoPWZ1bmN0aW9uKCl7cmV0dXJuIGR9O3RoaXMuZ2V0U3VmZml4PWZ1bmN0aW9uKCl7cmV0dXJuIHN9O3RoaXMuY29tcGFyZVRvPWZ1bmN0aW9uKCl7dmFyIG89Vi5hcHBseSh3aW5kb3csYXJndW1lbnRzKTtyZXR1cm4gTS1vLmdldE1ham9yKCl8fGktby5nZXRNaW5vcigpfHxkLW8uZ2V0UGF0Y2goKXx8KChzPG8uZ2V0U3VmZml4KCkpPy0xOihzPT09by5nZXRTdWZmaXgoKSk/MDoxKX19Vi5wcm90b3R5cGUuaW5SYW5nZT1mdW5jdGlvbihtLE0pe3JldHVybiB0aGlzLmNvbXBhcmVUbyhtKT49MCYmdGhpcy5jb21wYXJlVG8oTSk8MH07dmFyIGo9VihqUXVlcnkuZm4uanF1ZXJ5KTtpZighai5pblJhbmdlKCIxLjcuMCIsIjIuMC4wIikpe2IoImVycm9yIiwiU0FQVUk1IHJlcXVpcmVzIGEgalF1ZXJ5IHZlcnNpb24gb2YgMS43IG9yIGhpZ2hlciwgYnV0IGxvd2VyIHRoYW4gMi4wOyBjdXJyZW50IHZlcnNpb24gaXMgIitqUXVlcnkuZm4uanF1ZXJ5KX1pZighalF1ZXJ5LmJyb3dzZXIpe2pRdWVyeS5icm93c2VyPShmdW5jdGlvbih1KXt2YXIgZD0vKHdlYmtpdClbIFwvXShbXHcuXSspLyxpPS8ob3BlcmEpKD86Lip2ZXJzaW9uKT9bIFwvXShbXHcuXSspLyxsPS8obXNpZSkgKFtcdy5dKykvLG09Lyhtb3ppbGxhKSg/Oi4qPyBydjooW1x3Ll0rKSk/Lyx1PXUudG9Mb3dlckNhc2UoKSxuPWQuZXhlYyh1KXx8aS5leGVjKHUpfHxsLmV4ZWModSl8fHUuaW5kZXhPZigiY29tcGF0aWJsZSIpPDAmJm0uZXhlYyh1KXx8W10sbz17fTtpZihuWzFdKXtvW25bMV1dPXRydWU7by52ZXJzaW9uPW5bMl18fCIwIjtpZihvLndlYmtpdCl7by5zYWZhcmk9dHJ1ZX19cmV0dXJuIG99KHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50KSl9aWYoISFzYXAudWkuRGV2aWNlLmJyb3dzZXIuaW50ZXJuZXRfZXhwbG9yZXIpe2pRdWVyeS5zdXBwb3J0LmNvcnM9dHJ1ZX12YXIgZj0oZnVuY3Rpb24oKXt2YXIgdCx1LFIsZD0vXiguKlwvKT9kb3dubG9hZFwvY29uZmlndXJhdG9yW1wvXD9dLyxpPS9eKC4qXC8pPyhzYXAtdWktKGNvcmV8Y3VzdG9tfGJvb3R8bWVyZ2VkKSgtLiopPylcLmpzKFs/I118JCkvLGw9L14oLipcLyk/cmVzb3VyY2VzXC8vO2pRdWVyeSgic2NyaXB0W3NyY10iKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIHM9dGhpcy5nZXRBdHRyaWJ1dGUoInNyYyIpLG07aWYobT1zLm1hdGNoKGQpKXt0PXRoaXM7dT1zO1I9KG1bMV18fCIiKSsicmVzb3VyY2VzLyI7cmV0dXJuIGZhbHNlfWVsc2UgaWYobT1zLm1hdGNoKGkpKXt0PXRoaXM7dT1zO1I9bVsxXXx8IiI7cmV0dXJuIGZhbHNlfWVsc2UgaWYodGhpcy5pZD09J3NhcC11aS1ib290c3RyYXAnJiYobT1zLm1hdGNoKGwpKSl7dD10aGlzO3U9cztSPW1bMF07cmV0dXJuIGZhbHNlfX0pO3JldHVybnt0YWc6dCx1cmw6dSxyZXNvdXJjZVJvb3Q6Un19KSgpOyhmdW5jdGlvbigpe2lmKC9zYXAtYm9vdHN0cmFwLWRlYnVnPSh0cnVlfHh8WCkvLnRlc3QobG9jYXRpb24uc2VhcmNoKSl7d2luZG93WyJzYXAtdWktYlJlc3RhcnQiXT1mYWxzZTt3aW5kb3dbInNhcC11aS1zUmVzdGFydFVybCJdPSJodHRwOi8vbG9jYWxob3N0OjgwODAvc2FwdWk1L3Jlc291cmNlcy9zYXAtdWktY29yZS5qcyI7dmFyIGQ9ZnVuY3Rpb24oKXt2YXIgcz1mLnRhZyxsPSI8c2NyaXB0IHNyYz1cIiIrd2luZG93WyJzYXAtdWktc1Jlc3RhcnRVcmwiXSsiXCIiO2pRdWVyeS5lYWNoKHMuYXR0cmlidXRlcyxmdW5jdGlvbihpLEEpe2lmKEEubm9kZU5hbWUuaW5kZXhPZigiZGF0YS1zYXAtdWktIik9PTApe2wrPSIgIitBLm5vZGVOYW1lKyI9XCIiK0Eubm9kZVZhbHVlKyJcIiJ9fSk7bCs9Ij48L3NjcmlwdD4iO3MucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzKTtqUXVlcnkoIiNzYXAtdWktYm9vdHN0cmFwLWNhY2hlYnVzdGVkIikucmVtb3ZlKCk7d2luZG93WyJzYXAtdWktY29uZmlnIl0mJndpbmRvd1sic2FwLXVpLWNvbmZpZyJdLnJlc291cmNlUm9vdHMmJih3aW5kb3dbInNhcC11aS1jb25maWciXS5yZXNvdXJjZVJvb3RzWyIiXT11bmRlZmluZWQpO2RvY3VtZW50LndyaXRlKGwpO3ZhciBSPW5ldyBFcnJvcigiQWJvcnRpbmcgVUk1IGJvb3RzdHJhcCBhbmQgcmVzdGFydGluZyBmcm9tOiAiK3dpbmRvd1sic2FwLXVpLXNSZXN0YXJ0VXJsIl0pO1IubmFtZT0iUmVzdGFydCI7ZGVsZXRlIHdpbmRvd1sic2FwLXVpLWJSZXN0YXJ0Il07ZGVsZXRlIHdpbmRvd1sic2FwLXVpLXNSZXN0YXJ0VXJsIl07dGhyb3cgUn07ZGVidWdnZXI7aWYod2luZG93WyJzYXAtdWktYlJlc3RhcnQiXSl7ZCgpfX19KSgpOyhmdW5jdGlvbigpe3ZhciBkPS9zYXAtdWktZGVidWc9KHRydWV8eHxYKS8udGVzdChsb2NhdGlvbi5zZWFyY2gpLGk9d2luZG93WyJzYXAtdWktb3B0aW1pemVkIl07dHJ5e2Q9ZHx8KHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgic2FwLXVpLWRlYnVnIik9PSJYIil9Y2F0Y2goZSl7fXdpbmRvd1sic2FwLXVpLWRlYnVnIl09ZDtpZigvLWRiZ1wuanMoWz8jXXwkKS8udGVzdChmLnVybCkpe3dpbmRvd1sic2FwLXVpLWxvYWRkYmciXT10cnVlO3dpbmRvd1sic2FwLXVpLWRlYnVnIl09dHJ1ZX1pZihpJiZkKXt2YXIgRD1mLnVybC5yZXBsYWNlKC9cLyg/OnNhcC11aS1jYWNoZWJ1c3RlclwvKT8oW15cL10rKVwuanMvLCIvJDEtZGJnLmpzIik7d2luZG93WyJzYXAtdWktb3B0aW1pemVkIl09ZmFsc2U7d2luZG93WyJzYXAtdWktbG9hZGRiZyJdPXRydWU7ZG9jdW1lbnQud3JpdGUoIjxzY3JpcHQgdHlwZT1cInRleHQvamF2YXNjcmlwdFwiIHNyYz1cIiIrRCsiXCI+PC9zY3JpcHQ+Iik7dmFyIFI9bmV3IEVycm9yKCJBYm9ydGluZyBVSTUgYm9vdHN0cmFwIGFuZCByZXN0YXJ0aW5nIGZyb206ICIrRCk7Ui5uYW1lPSJSZXN0YXJ0Ijt0aHJvdyBSfX0pKCk7dmFyIEM9X1sic2FwLXVpLWNvbmZpZyJdPShmdW5jdGlvbigpe2Z1bmN0aW9uIG4obyl7alF1ZXJ5LmVhY2gobyxmdW5jdGlvbihpLHYpe3ZhciBtPWkudG9Mb3dlckNhc2UoKTtpZighby5oYXNPd25Qcm9wZXJ0eShtKSl7b1ttXT12O2RlbGV0ZSBvW2ldfX0pO3JldHVybiBvfXZhciBzPWYudGFnLGQ9X1sic2FwLXVpLWNvbmZpZyJdLGw9InNhcC11aS1jb25maWcuanNvbiI7aWYodHlwZW9mIGQ9PT0ic3RyaW5nIil7Yigid2FybmluZyIsIkxvYWRpbmcgZXh0ZXJuYWwgYm9vdHN0cmFwIGNvbmZpZ3VyYXRpb24gZnJvbSBcIiIrZCsiXCIuIFRoaXMgaXMgYSBkZXNpZ24gdGltZSBmZWF0dXJlIGFuZCBub3QgZm9yIHByb2R1Y3RpdmUgdXNhZ2UhIik7aWYoZCE9PWwpe2IoIndhcm5pbmciLCJUaGUgZXh0ZXJuYWwgYm9vdHN0cmFwIGNvbmZpZ3VyYXRpb24gZmlsZSBzaG91bGQgYmUgbmFtZWQgXCIiK2wrIlwiISIpfWpRdWVyeS5hamF4KHt1cmw6ZCxkYXRhVHlwZTonanNvbicsYXN5bmM6ZmFsc2Usc3VjY2VzczpmdW5jdGlvbihELFQsaSl7ZD1EfSxlcnJvcjpmdW5jdGlvbihpLFQsbyl7YigiZXJyb3IiLCJMb2FkaW5nIGV4dGVybmFsaXplZCBib290c3RyYXAgY29uZmlndXJhdGlvbiBmcm9tIFwiIitkKyJcIiBmYWlsZWQhIFJlYXNvbjogIitvKyIhIik7ZD11bmRlZmluZWR9fSl9ZD1uKGR8fHt9KTtkLnJlc291cmNlcm9vdHM9ZC5yZXNvdXJjZXJvb3RzfHx7fTtkLnRoZW1lcm9vdHM9ZC50aGVtZXJvb3RzfHx7fTtkLnJlc291cmNlcm9vdHNbJyddPWQucmVzb3VyY2Vyb290c1snJ118fGYucmVzb3VyY2VSb290O2RbJ3h4LWxvYWRhbGxtb2RlJ109LyhefFwvKShzYXAtP3VpNXxbXlwvXSstYWxsKS5qcyhbPyNdfCQpLy50ZXN0KGYudXJsKTtpZihzKXt2YXIgdD1zLmdldEF0dHJpYnV0ZSgiZGF0YS1zYXAtdWktY29uZmlnIik7aWYodCl7dHJ5e2pRdWVyeS5leHRlbmQoZCxuKChuZXcgRnVuY3Rpb24oInJldHVybiB7Iit0KyJ9OyIpKSgpKSl9Y2F0Y2goZSl7YigiZXJyb3IiLCJmYWlsZWQgdG8gcGFyc2UgZGF0YS1zYXAtdWktY29uZmlnIGF0dHJpYnV0ZTogIisoZS5tZXNzYWdlfHxlKSl9fWpRdWVyeS5lYWNoKHMuYXR0cmlidXRlcyxmdW5jdGlvbihpLG8pe3ZhciBtPW8ubmFtZS5tYXRjaCgvXmRhdGEtc2FwLXVpLSguKikkLyk7aWYobSl7bT1tWzFdLnRvTG93ZXJDYXNlKCk7aWYobT09PSdyZXNvdXJjZXJvb3RzJyl7alF1ZXJ5LmV4dGVuZChkW21dLGpRdWVyeS5wYXJzZUpTT04oby52YWx1ZSkpfWVsc2UgaWYobT09PSd0aGVtZS1yb290cycpe2pRdWVyeS5leHRlbmQoZC50aGVtZXJvb3RzLGpRdWVyeS5wYXJzZUpTT04oby52YWx1ZSkpfWVsc2UgaWYobSE9PSdjb25maWcnKXtkW21dPW8udmFsdWV9fX0pfXJldHVybiBkfSgpKTtpZihDLm5vY29uZmxpY3Q9PT10cnVlfHxDLm5vY29uZmxpY3Q9PT0idHJ1ZSJ8fEMubm9jb25mbGljdD09PSJ4Iil7alF1ZXJ5Lm5vQ29uZmxpY3QoKX1qUXVlcnkuc2FwPXt9O2pRdWVyeS5zYXAuVmVyc2lvbj1WO2pRdWVyeS5zYXAuZGVidWc9ZnVuY3Rpb24oZCl7aWYoIXdpbmRvdy5sb2NhbFN0b3JhZ2Upe3JldHVybiBudWxsfWZ1bmN0aW9uIGkodSl7YWxlcnQoIlVzYWdlIG9mIGRlYnVnIHNvdXJjZXMgaXMgIisodT8ib24iOiJvZmYiKSsiIG5vdy5cbkZvciB0aGUgY2hhbmdlIHRvIHRha2UgZWZmZWN0LCB5b3UgbmVlZCB0byByZWxvYWQgdGhlIHBhZ2UuIil9O2lmKGQ9PT10cnVlKXt3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oInNhcC11aS1kZWJ1ZyIsIlgiKTtpKHRydWUpfWVsc2UgaWYoZD09PWZhbHNlKXt3aW5kb3cubG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oInNhcC11aS1kZWJ1ZyIpO2koZmFsc2UpfXJldHVybiB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oInNhcC11aS1kZWJ1ZyIpPT0iWCJ9O2pRdWVyeS5zYXAuc3RhdGlzdGljcz1mdW5jdGlvbihkKXtpZighd2luZG93LmxvY2FsU3RvcmFnZSl7cmV0dXJuIG51bGx9ZnVuY3Rpb24gaSh1KXthbGVydCgiVXNhZ2Ugb2YgR2F0ZXdheSBzdGF0aXN0aWNzICIrKHU/Im9uIjoib2ZmIikrIiBub3cuXG5Gb3IgdGhlIGNoYW5nZSB0byB0YWtlIGVmZmVjdCwgeW91IG5lZWQgdG8gcmVsb2FkIHRoZSBwYWdlLiIpfTtpZihkPT09dHJ1ZSl7d2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKCJzYXAtdWktc3RhdGlzdGljcyIsIlgiKTtpKHRydWUpfWVsc2UgaWYoZD09PWZhbHNlKXt3aW5kb3cubG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oInNhcC11aS1zdGF0aXN0aWNzIik7aShmYWxzZSl9cmV0dXJuIHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgic2FwLXVpLXN0YXRpc3RpY3MiKT09IlgifTsoZnVuY3Rpb24oKXt2YXIgRj0wLGQ9MSxXPTIsST0zLEQ9NCxUPTUscz0od2luZG93LnRvcD09d2luZG93KT8iIjoiWyIrd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lLnNwbGl0KCcvJykuc2xpY2UoLTEpWzBdKyJdICIsbD1bXSxNPXsnJzpkfSxMPW51bGw7ZnVuY3Rpb24gbihpLHcpe3JldHVybigiMDAwIitTdHJpbmcoaSkpLnNsaWNlKC13KX1mdW5jdGlvbiBvKGkpe3JldHVybighaXx8aXNOYU4oTVtpXSkpP01bJyddOk1baV19ZnVuY3Rpb24gdCgpe2lmKCFMKXtMPXtsaXN0ZW5lcnM6W10sb25Mb2dFbnRyeTpmdW5jdGlvbihtKXtmb3IodmFyIGk9MDtpPEwubGlzdGVuZXJzLmxlbmd0aDtpKyspe2lmKEwubGlzdGVuZXJzW2ldLm9uTG9nRW50cnkpe0wubGlzdGVuZXJzW2ldLm9uTG9nRW50cnkobSl9fX0sYXR0YWNoOmZ1bmN0aW9uKGksbSl7aWYobSl7TC5saXN0ZW5lcnMucHVzaChtKTtpZihtLm9uQXR0YWNoVG9Mb2cpe20ub25BdHRhY2hUb0xvZyhpKX19fSxkZXRhY2g6ZnVuY3Rpb24obSx2KXtmb3IodmFyIGk9MDtpPEwubGlzdGVuZXJzLmxlbmd0aDtpKyspe2lmKEwubGlzdGVuZXJzW2ldPT09dil7aWYodi5vbkRldGFjaEZyb21Mb2cpe3Yub25EZXRhY2hGcm9tTG9nKG0pfUwubGlzdGVuZXJzLnNwbGljZShpLDEpO3JldHVybn19fX19cmV0dXJuIEx9ZnVuY3Rpb24gdShpLG0sdix3KXtpZihpPD1vKHcpKXt2YXIgTj1uZXcgRGF0ZSgpLHk9e3RpbWU6bihOLmdldEhvdXJzKCksMikrIjoiK24oTi5nZXRNaW51dGVzKCksMikrIjoiK24oTi5nZXRTZWNvbmRzKCksMiksZGF0ZTpuKE4uZ2V0RnVsbFllYXIoKSw0KSsiLSIrbihOLmdldE1vbnRoKCkrMSwyKSsiLSIrbihOLmdldERhdGUoKSwyKSx0aW1lc3RhbXA6Ti5nZXRUaW1lKCksbGV2ZWw6aSxtZXNzYWdlOlN0cmluZyhtfHwiIiksZGV0YWlsczpTdHJpbmcodnx8IiIpLGNvbXBvbmVudDpTdHJpbmcod3x8IiIpfTtsLnB1c2goeSk7aWYoTCl7TC5vbkxvZ0VudHJ5KHkpfWlmKHdpbmRvdy5jb25zb2xlKXt2YXIgej15LmRhdGUrIiAiK3kudGltZSsiICIrcyt5Lm1lc3NhZ2UrIiAtICIreS5kZXRhaWxzKyIgIit5LmNvbXBvbmVudDtzd2l0Y2goaSl7Y2FzZSBGOmNhc2UgZDpjb25zb2xlLmVycm9yKHopO2JyZWFrO2Nhc2UgVzpjb25zb2xlLndhcm4oeik7YnJlYWs7Y2FzZSBJOmNvbnNvbGUuaW5mbz9jb25zb2xlLmluZm8oeik6Y29uc29sZS5sb2coeik7YnJlYWs7Y2FzZSBEOmNvbnNvbGUuZGVidWc/Y29uc29sZS5kZWJ1Zyh6KTpjb25zb2xlLmxvZyh6KTticmVhaztjYXNlIFQ6Y29uc29sZS50cmFjZT9jb25zb2xlLnRyYWNlKHopOmNvbnNvbGUubG9nKHopO2JyZWFrfX1yZXR1cm4geX19ZnVuY3Rpb24geChpKXt0aGlzLmZhdGFsPWZ1bmN0aW9uKG0sdix3KXt1KEYsbSx2LHd8fGkpO3JldHVybiB0aGlzfTt0aGlzLmVycm9yPWZ1bmN0aW9uIGVycm9yKG0sdix3KXt1KGQsbSx2LHd8fGkpO3JldHVybiB0aGlzfTt0aGlzLndhcm5pbmc9ZnVuY3Rpb24gd2FybmluZyhtLHYsdyl7dShXLG0sdix3fHxpKTtyZXR1cm4gdGhpc307dGhpcy5pbmZvPWZ1bmN0aW9uIGluZm8obSx2LHcpe3UoSSxtLHYsd3x8aSk7cmV0dXJuIHRoaXN9O3RoaXMuZGVidWc9ZnVuY3Rpb24gZGVidWcobSx2LHcpe3UoRCxtLHYsd3x8aSk7cmV0dXJuIHRoaXN9O3RoaXMudHJhY2U9ZnVuY3Rpb24gdHJhY2UobSx2LHcpe3UoVCxtLHYsd3x8aSk7cmV0dXJuIHRoaXN9O3RoaXMuc2V0TGV2ZWw9ZnVuY3Rpb24gc2V0TGV2ZWwobSx3KXt3PXd8fGl8fCcnO01bd109bTt2YXIgQj1bXTtqUXVlcnkuZWFjaChqUXVlcnkuc2FwLmxvZy5Mb2dMZXZlbCxmdW5jdGlvbih5LHYpe0Jbdl09eX0pO3UoSSwiQ2hhbmdpbmcgbG9nIGxldmVsICIrKHc/ImZvciAnIit3KyInICI6IiIpKyJ0byAiK0JbbV0sIiIsImpRdWVyeS5zYXAubG9nIik7cmV0dXJuIHRoaXN9O3RoaXMuZ2V0TGV2ZWw9ZnVuY3Rpb24gZ2V0TGV2ZWwobSl7cmV0dXJuIG8obXx8aSl9O3RoaXMuaXNMb2dnYWJsZT1mdW5jdGlvbihtLHYpe3JldHVybihtPT1udWxsP0Q6bSk8PW8odnx8aSl9fWpRdWVyeS5zYXAubG9nPWpRdWVyeS5leHRlbmQobmV3IHgoKSx7TGV2ZWw6e05PTkU6Ri0xLEZBVEFMOkYsRVJST1I6ZCxXQVJOSU5HOlcsSU5GTzpJLERFQlVHOkQsVFJBQ0U6VCxBTEw6KFQrMSl9LGdldExvZ2dlcjpmdW5jdGlvbihpLG0pe2lmKCFpc05hTihtKSYmTVtpXT09bnVsbCl7TVtpXT1tfXJldHVybiBuZXcgeChpKX0sZ2V0TG9nRW50cmllczpmdW5jdGlvbigpe3JldHVybiBsLnNsaWNlKCl9LGFkZExvZ0xpc3RlbmVyOmZ1bmN0aW9uKEwpe3QoKS5hdHRhY2godGhpcyxMKTtyZXR1cm4gdGhpc30scmVtb3ZlTG9nTGlzdGVuZXI6ZnVuY3Rpb24oTCl7dCgpLmRldGFjaCh0aGlzLEwpO3JldHVybiB0aGlzfX0pO2pRdWVyeS5zYXAubG9nLkxvZ0xldmVsPWpRdWVyeS5zYXAubG9nLkxldmVsO2pRdWVyeS5zYXAubG9nLmdldExvZz1qUXVlcnkuc2FwLmxvZy5nZXRMb2dFbnRyaWVzO2pRdWVyeS5zYXAuYXNzZXJ0PWZ1bmN0aW9uKFIsbSl7aWYoIVIpe2lmKHdpbmRvdy5jb25zb2xlJiZjb25zb2xlLmFzc2VydCl7Y29uc29sZS5hc3NlcnQoUixzK20pfWVsc2V7alF1ZXJ5LnNhcC5sb2cuZGVidWcoIltBc3NlcnRpb25zXSAiK20pfX19O0MubG9nbGV2ZWw9KGZ1bmN0aW9uKCl7dmFyIG09Lyg/Olw/fCYpc2FwLXVpLWxvZyg/Okx8LWwpZXZlbD0oW14mXSopLy5leGVjKHdpbmRvdy5sb2NhdGlvbi5zZWFyY2gpO3JldHVybiBtJiZtWzFdfSgpKXx8Qy5sb2dsZXZlbDtpZihDLmxvZ2xldmVsKXtqUXVlcnkuc2FwLmxvZy5zZXRMZXZlbChqUXVlcnkuc2FwLmxvZy5MZXZlbFtDLmxvZ2xldmVsLnRvVXBwZXJDYXNlKCldfHxwYXJzZUludChDLmxvZ2xldmVsLDEwKSl9alF1ZXJ5LnNhcC5sb2cuaW5mbygiU0FQIExvZ2dlciBzdGFydGVkLiIpO2pRdWVyeS5lYWNoKGEsZnVuY3Rpb24oaSxlKXtqUXVlcnkuc2FwLmxvZ1tlLmxldmVsXShlLm1lc3NhZ2UpfSk7YT1udWxsfSgpKTtqUXVlcnkuc2FwLmZhY3Rvcnk9ZnVuY3Rpb24gZmFjdG9yeShvKXtmdW5jdGlvbiBGKCl7fUYucHJvdG90eXBlPW87cmV0dXJuIEZ9O2pRdWVyeS5zYXAubmV3T2JqZWN0PWZ1bmN0aW9uIG5ld09iamVjdChvKXtyZXR1cm4gbmV3KGpRdWVyeS5zYXAuZmFjdG9yeShvKSkoKX07alF1ZXJ5LnNhcC5nZXR0ZXI9ZnVuY3Rpb24gZ2V0dGVyKHYpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiB2fX07alF1ZXJ5LnNhcC5nZXRPYmplY3Q9ZnVuY3Rpb24gZ2V0T2JqZWN0KG4sTixvKXt2YXIgTz1vfHxfLGQ9KG58fCIiKS5zcGxpdCgiLiIpLGw9ZC5sZW5ndGgsbT1pc05hTihOKT8wOmwtTixpO2ZvcihpPTA7TyYmaTxsO2krKyl7aWYoIU9bZFtpXV0mJmk8bSl7T1tkW2ldXT17fX1PPU9bZFtpXV19cmV0dXJuIE99O2pRdWVyeS5zYXAuc2V0T2JqZWN0PWZ1bmN0aW9uKG4sdixvKXt2YXIgTz1vfHxfLE49KG58fCIiKS5zcGxpdCgiLiIpLGw9Ti5sZW5ndGgsaTtpZihsPjApe2ZvcihpPTA7TyYmaTxsLTE7aSsrKXtpZighT1tOW2ldXSl7T1tOW2ldXT17fX1PPU9bTltpXV19T1tOW2wtMV1dPXZ9fTtmdW5jdGlvbiBTKG4sZCx0KXt2YXIgVD1bXSxvPTAsRj0wLHM7dGhpcy5zdGFydFRhc2s9ZnVuY3Rpb24obCl7dmFyIEk9VC5sZW5ndGg7VFtJXT17bmFtZTpsLGZpbmlzaGVkOmZhbHNlfTtvKys7cmV0dXJuIEl9O3RoaXMuZmluaXNoVGFzaz1mdW5jdGlvbihJLGwpe2lmKCFUW0ldfHxUW0ldLmZpbmlzaGVkKXt0aHJvdyBuZXcgRXJyb3IoInRyeWluZyB0byBmaW5pc2ggbm9uIGV4aXN0aW5nIG9yIGFscmVhZHkgZmluaXNoZWQgdGFzayIpfVRbSV0uZmluaXNoZWQ9dHJ1ZTtvLS07aWYobD09PWZhbHNlKXtGKyt9aWYobz09PTApe2pRdWVyeS5zYXAubG9nLmluZm8oIlN5bmMgcG9pbnQgJyIrbisiJyBmaW5pc2hlZCAodGFza3M6IitULmxlbmd0aCsiLCBvcGVuOiIrbysiLCBmYWlsdXJlczoiK0YrIikiKTtpZihzKXtjbGVhclRpbWVvdXQocyk7cz1udWxsfTtpKCl9fTtmdW5jdGlvbiBpKCl7ZCYmZChvLEYpO2Q9bnVsbH1pZighaXNOYU4odCkpe3M9c2V0VGltZW91dChmdW5jdGlvbigpe2pRdWVyeS5zYXAubG9nLmluZm8oIlN5bmMgcG9pbnQgJyIrbisiJyB0aW1lZCBvdXQgKHRhc2tzOiIrVC5sZW5ndGgrIiwgb3BlbjoiK28rIiwgZmFpbHVyZXM6IitGKyIpIik7aSgpfSx0KX07alF1ZXJ5LnNhcC5sb2cuaW5mbygiU3luYyBwb2ludCAnIituKyInIGNyZWF0ZWQiKyh0PyIodGltZW91dCBhZnRlciAiK3QrIiBtcykiOiIiKSl9alF1ZXJ5LnNhcC5zeW5jUG9pbnQ9ZnVuY3Rpb24obixkLHQpe3JldHVybiBuZXcgUyhuLGQsdCl9O3ZhciBnPShmdW5jdGlvbigpe3ZhciBvPWpRdWVyeS5zYXAubG9nLmdldExvZ2dlcigic2FwLnVpLk1vZHVsZVN5c3RlbSIsKC9zYXAtdWkteHgtZGVidWcoTXwtbSlvZHVsZShMfC1sKW9hZGluZz0odHJ1ZXx4fFgpLy50ZXN0KGxvY2F0aW9uLnNlYXJjaCl8fENbInh4LWRlYnVnTW9kdWxlTG9hZGluZyJdKT9qUXVlcnkuc2FwLmxvZy5MZXZlbC5ERUJVRzpqUXVlcnkuc2FwLmxvZy5MZXZlbC5JTkZPKSx1PXsnJzoncmVzb3VyY2VzLyd9LEk9MCx0PS0xLEw9MSx2PTIsdz0zLFI9NCxGPTUsTT17InNhcC91aS90aGlyZHBhcnR5L1VSSS5qcyI6e3N0YXRlOlIsdXJsOmMsY29udGVudDpVUkl9LCJzYXAvdWkvRGV2aWNlLmpzIjp7c3RhdGU6Uix1cmw6Yyxjb250ZW50OnNhcC51aS5EZXZpY2V9LCJqcXVlcnkuc2FwLmdsb2JhbC5qcyI6e3N0YXRlOlIsdXJsOmMsY29udGVudDpqUXVlcnl9fSx4PXt9LEE9eydzYXAvdWkvdGhpcmRwYXJ0eS9jcm9zc3JvYWRzLmpzJzp0cnVlLCdzYXAvdWkvdGhpcmRwYXJ0eS9kYXRhanMuanMnOnRydWUsJ3NhcC91aS90aGlyZHBhcnR5L2hhc2hlci5qcyc6dHJ1ZSwnc2FwL3VpL3RoaXJkcGFydHkvSVB2Ni5qcyc6dHJ1ZSwnc2FwL3VpL3RoaXJkcGFydHkvanF1ZXJ5L2pxdWVyeS0xLjExLjEuanMnOnRydWUsJ3NhcC91aS90aGlyZHBhcnR5L2pxdWVyeS9qcXVlcnktMS4xMC4yLmpzJzp0cnVlLCdzYXAvdWkvdGhpcmRwYXJ0eS9qcXVlcnkvanF1ZXJ5LTEuMTAuMS5qcyc6dHJ1ZSwnc2FwL3VpL3RoaXJkcGFydHkvanF1ZXJ5L2pxdWVyeS4xLjcuMS5qcyc6dHJ1ZSwnc2FwL3VpL3RoaXJkcGFydHkvanF1ZXJ5L2pxdWVyeS4xLjguMS5qcyc6dHJ1ZSwnc2FwL3VpL3RoaXJkcGFydHkvanF1ZXJ5LW1vYmlsZS1jdXN0b20uanMnOnRydWUsJ3NhcC91aS90aGlyZHBhcnR5L2xlc3MuanMnOnRydWUsJ3NhcC91aS90aGlyZHBhcnR5L3B1bnljb2RlLmpzJzp0cnVlLCdzYXAvdWkvdGhpcmRwYXJ0eS9yZXF1aXJlLmpzJzp0cnVlLCdzYXAvdWkvdGhpcmRwYXJ0eS9TZWNvbmRMZXZlbERvbWFpbnMuanMnOnRydWUsJ3NhcC91aS90aGlyZHBhcnR5L3NpZ25hbHMuanMnOnRydWUsJ3NhcC91aS90aGlyZHBhcnR5L1VSSS5qcyc6dHJ1ZX0seT1bXSx6PSIiLEI9NTEyKjEwMjQsRD1kb2N1bWVudC5sb2NhdGlvbi5ocmVmLnJlcGxhY2UoL1w/Lip8Iy4qL2csIiIpLEc9ImZyYWdtZW50IixIPSJ2aWV3IixLPXtqczpbSCxHLCJjb250cm9sbGVyIl0seG1sOltILEddLGpzb246W0gsR10saHRtbDpbSCxHXX0sSj1uZXcgUmVnRXhwKCIoXFwuKD86IitLLmpzLmpvaW4oInwiKSsiKSk/XFwuanMkIiksTixPOyhmdW5jdGlvbigpe3ZhciBzPSIiLGQ9IiI7alF1ZXJ5LmVhY2goSyxmdW5jdGlvbihpLGwpe3M9KHM/cysifCI6IiIpK2k7ZD0oZD9kKyJ8IjoiIikrIig/Oig/OiIrbC5qb2luKCJcXC58IikrIlxcLik/IitpKyIpIn0pO3M9IlxcLigiK3MrIikkIjtkPSJcXC4oPzoiK2QrInxbXi4vXSspJCI7by5kZWJ1ZygiY29uc3RydWN0ZWQgcmVnZXhwIGZvciBmaWxlIHR5cGVzIDoiK3MpO28uZGVidWcoImNvbnN0cnVjdGVkIHJlZ2V4cCBmb3IgZmlsZSBzdWItdHlwZXMgOiIrZCk7Tj1uZXcgUmVnRXhwKHMpO089bmV3IFJlZ0V4cChkKX0oKSk7ZnVuY3Rpb24gUShzKXtpZigvXnNhcFwudWlcLnRoaXJkcGFydHlcLmpxdWVyeVwuanF1ZXJ5LS8udGVzdChzKSl7cmV0dXJuInNhcC91aS90aGlyZHBhcnR5L2pxdWVyeS9qcXVlcnktIitzLnNsaWNlKCJzYXAudWkudGhpcmRwYXJ0eS5qcXVlcnkuanF1ZXJ5LSIubGVuZ3RoKX1lbHNlIGlmKC9eanF1ZXJ5XC5zYXBcLi8udGVzdChzKSl7cmV0dXJuIHN9cmV0dXJuIHMucmVwbGFjZSgvXC4vZywiLyIpfWZ1bmN0aW9uIFQocyl7dmFyIGQ7aWYoIS9cLmpzJC8udGVzdChzKSl7cmV0dXJufXM9cy5zbGljZSgwLC0zKTtpZigvXnNhcFwvdWlcL3RoaXJkcGFydHlcL2pxdWVyeVwvanF1ZXJ5LS8udGVzdChzKSl7cmV0dXJuInNhcC51aS50aGlyZHBhcnR5LmpxdWVyeS5qcXVlcnktIitzLnNsaWNlKCJzYXAvdWkvdGhpcmRwYXJ0eS9qcXVlcnkvanF1ZXJ5LSIubGVuZ3RoKX1lbHNlIGlmKC9eanF1ZXJ5XC5zYXBcLi8udGVzdChzKSl7cmV0dXJuIHN9cmV0dXJuIHMucmVwbGFjZSgvXC8vZywiLiIpfWZ1bmN0aW9uIFUocyxkKXt2YXIgaT1zLnNwbGl0KC9cLy8pLGwsYTEsYjEsbTtpZihhcmd1bWVudHMubGVuZ3RoPT09MSYmaS5sZW5ndGg+MCl7bT1PLmV4ZWMoaVtpLmxlbmd0aC0xXSk7aWYobSl7ZD1tWzBdO2lbaS5sZW5ndGgtMV09aVtpLmxlbmd0aC0xXS5zbGljZSgwLG0uaW5kZXgpfWVsc2V7ZD0iIn19Zm9yKGw9aS5sZW5ndGg7bD49MDtsLS0pe2ExPWkuc2xpY2UoMCxsKS5qb2luKCcvJyk7aWYodVthMV0pe2IxPXVbYTFdO2lmKGw8aS5sZW5ndGgpe2IxKz1pLnNsaWNlKGwpLmpvaW4oJy8nKX1pZihiMS5zbGljZSgtMSk9PT0nLycpe2IxPWIxLnNsaWNlKDAsLTEpfXJldHVybiBiMSsoZHx8JycpfX19ZnVuY3Rpb24gVyhzKXt2YXIgZCxpLGw7Zm9yKGQgaW4gdSl7aWYodS5oYXNPd25Qcm9wZXJ0eShkKSl7aT11W2RdLnNsaWNlKDAsLTEpO2lmKHMuaW5kZXhPZihpKT09PTApe2w9ZCtzLnNsaWNlKGkubGVuZ3RoKTtpZihsLmNoYXJBdCgwKT09PScvJyl7bD1sLnNsaWNlKDEpfWlmKE1bbF0mJk1bbF0uZGF0YSl7cmV0dXJuIGx9fX19fWZ1bmN0aW9uIFgobSl7dmFyIGQ7ZD1NW21dfHwoTVttXT17c3RhdGU6SX0pO2lmKGQuc3RhdGU+SSl7cmV0dXJuIGR9aWYoby5pc0xvZ2dhYmxlKCkpe28uZGVidWcoeisiZGVjbGFyZSBtb2R1bGUgJyIrbSsiJyIpfWQuc3RhdGU9UjtpZih5Lmxlbmd0aD09PTApe3kucHVzaChtKTtkLnVybD1kLnVybHx8Y31yZXR1cm4gZH1mdW5jdGlvbiBZKHMpe3ZhciBtPUouZXhlYyhzKSxkLGwsYTEsYjEsaTtpZighbSl7by5lcnJvcigiY2FuIG9ubHkgcmVxdWlyZSBKYXZhc2NyaXB0IG1vZHVsZSwgbm90ICIrcyk7YTEuc3RhdGU9RjtyZXR1cm59ZD1zLnNsaWNlKDAsbS5pbmRleCk7bD1tWzBdO2ExPU1bc118fChNW3NdPXtzdGF0ZTpJfSk7aWYoby5pc0xvZ2dhYmxlKCkpe28uZGVidWcoeisicmVxdWlyZSAnIitzKyInIG9mIHR5cGUgJyIrbCsiJyIpfWlmKGExLnN0YXRlIT09SSl7aWYoYTEuc3RhdGU9PT10KXthMS5zdGF0ZT12O2lmKEFbc10mJnR5cGVvZiB3aW5kb3cuZGVmaW5lPT09ImZ1bmN0aW9uIiYmd2luZG93LmRlZmluZS5hbWQpe3ZhciBjMT13aW5kb3cuZGVmaW5lLmFtZDt0cnl7ZGVsZXRlIHdpbmRvdy5kZWZpbmUuYW1kO1oocyl9ZmluYWxseXt3aW5kb3cuZGVmaW5lLmFtZD1jMX19ZWxzZXtaKHMpfX1pZihhMS5zdGF0ZT09PVIpe2lmKG8uaXNMb2dnYWJsZSgpKXtvLmRlYnVnKHorIm1vZHVsZSAnIitzKyInIGhhcyBhbHJlYWR5IGJlZW4gbG9hZGVkIChza2lwcGVkKS4iKX1yZXR1cm4gdGhpc31lbHNlIGlmKGExLnN0YXRlPT09Ril7dGhyb3cgbmV3IEVycm9yKCJmb3VuZCBpbiBuZWdhdGl2ZSBjYWNoZTogJyIrcysiJyBmcm9tICIrYTEudXJsKyI6ICIrYTEuZXJyb3IpfWVsc2V7cmV0dXJuIHRoaXN9fWExLnN0YXRlPUw7YjE9d2luZG93WyJzYXAtdWktbG9hZGRiZyJdP1siLWRiZyIsIiJdOlsiIl07Zm9yKGk9MDtpPGIxLmxlbmd0aCYmYTEuc3RhdGUhPT12O2krKyl7YTEudXJsPVUoZCxiMVtpXStsKTtpZihvLmlzTG9nZ2FibGUoKSl7by5kZWJ1Zyh6KyJsb2FkaW5nICIrKGIxW2ldP2IxW2ldKyIgdmVyc2lvbiBvZiAiOiIiKSsiJyIrcysiJyBmcm9tICciK2ExLnVybCsiJyIpfWpRdWVyeS5hamF4KHt1cmw6YTEudXJsLGRhdGFUeXBlOid0ZXh0Jyxhc3luYzpmYWxzZSxzdWNjZXNzOmZ1bmN0aW9uKGQxLGUxLGYxKXthMS5zdGF0ZT12O2ExLmRhdGE9ZDF9LGVycm9yOmZ1bmN0aW9uKGQxLGUxLGYxKXthMS5zdGF0ZT1GO2ExLmVycm9yPWQxP2QxLnN0YXR1cysiIC0gIitkMS5zdGF0dXNUZXh0OmUxfX0pfWlmKGExLnN0YXRlPT09dil7aWYoQVtzXSYmdHlwZW9mIHdpbmRvdy5kZWZpbmU9PT0iZnVuY3Rpb24iJiZ3aW5kb3cuZGVmaW5lLmFtZCl7dmFyIGMxPXdpbmRvdy5kZWZpbmUuYW1kO3RyeXtkZWxldGUgd2luZG93LmRlZmluZS5hbWQ7WihzKX1maW5hbGx5e3dpbmRvdy5kZWZpbmUuYW1kPWMxfX1lbHNle1oocyl9fWlmKGExLnN0YXRlIT09Uil7dGhyb3cgbmV3IEVycm9yKCJmYWlsZWQgdG8gbG9hZCAnIitzKyInIGZyb20gIithMS51cmwrIjogIithMS5lcnJvcil9fWZ1bmN0aW9uIFoobSl7dmFyIGQ9TVttXSxzLGk7aWYoZCYmZC5zdGF0ZT09PXYmJnR5cGVvZiBkLmRhdGEhPT0idW5kZWZpbmVkIil7dHJ5e2lmKG8uaXNMb2dnYWJsZSgpKXtvLmRlYnVnKHorImV4ZWN1dGluZyAnIittKyInIik7cz16O3o9eisiOiAifWQuc3RhdGU9dzt5LnB1c2gobSk7aWYodHlwZW9mIGQuZGF0YT09PSJmdW5jdGlvbiIpe2QuZGF0YS5hcHBseSh3aW5kb3cpfWVsc2V7aT1kLmRhdGE7aWYoaSYmIWkubWF0Y2goL1wvXC9bI0BdIHNvdXJjZShNYXBwaW5nKT9VUkw9LiokLykpe2krPSJcbi8vIyBzb3VyY2VVUkw9IitVUkkoZC51cmwpLmFic29sdXRlVG8oRCl9aWYoXy5leGVjU2NyaXB0JiYoIWQuZGF0YXx8ZC5kYXRhLmxlbmd0aDxCKSl7dHJ5e2QuZGF0YSYmXy5leGVjU2NyaXB0KGkpfWNhdGNoKGUpe3kucG9wKCk7alF1ZXJ5LnNhcC5nbG9iYWxFdmFsKGQuZGF0YSk7dGhyb3cgZX19ZWxzZXtfLmV2YWwoaSl9fXkucG9wKCk7ZC5zdGF0ZT1SO2QuZGF0YT11bmRlZmluZWQ7ZC5jb250ZW50PWQuY29udGVudHx8alF1ZXJ5LnNhcC5nZXRPYmplY3QoVChtKSk7aWYoby5pc0xvZ2dhYmxlKCkpe3o9cztvLmRlYnVnKHorImZpbmlzaGVkIGV4ZWN1dGluZyAnIittKyInIil9fWNhdGNoKGwpe2Quc3RhdGU9RjtkLmVycm9yPSgobC50b1N0cmluZyYmbC50b1N0cmluZygpKXx8bC5tZXNzYWdlKSsobC5saW5lPyIobGluZSAiK2wubGluZSsiKSI6IiIpO2QuZGF0YT11bmRlZmluZWQ7aWYod2luZG93WyJzYXAtdWktZGVidWciXSYmKC9zYXAtdWkteHgtc2hvdyhMfC1sKW9hZChFfC1lKXJyb3JzPSh0cnVlfHh8WCkvLnRlc3QobG9jYXRpb24uc2VhcmNoKXx8Q1sieHgtc2hvd2xvYWRlcnJvcnMiXSkpe28uZXJyb3IoImVycm9yIHdoaWxlIGV2YWx1YXRpbmcgIittKyIsIGVtYmVkZGluZyBhZ2FpbiB2aWEgc2NyaXB0IHRhZyB0byBlbmZvcmNlIGEgc3RhY2sgdHJhY2UgKHNlZSBiZWxvdykiKTtqUXVlcnkuc2FwLmluY2x1ZGVTY3JpcHQoZC51cmwpO3JldHVybn19fX1mdW5jdGlvbiAkKGQsbCl7dmFyIHM9W10saSxhMSxiMSxtO2ZvcihpPTA7aTxkLmxlbmd0aDtpKyspe2ExPWRbaV07by5kZWJ1Zyh6KyJyZXF1aXJlICciK2ExKyInIik7WShhMSsiLmpzIik7c1tpXT1NW2ExKyIuanMiXS5jb250ZW50fHxqUXVlcnkuc2FwLmdldE9iamVjdChUKGExKyIuanMiKSk7by5kZWJ1Zyh6KyJyZXF1aXJlICciK2ExKyInOiBkb25lLiIpfWwuYXBwbHkodGhpcyxzKX1qUXVlcnkuc2FwLmdldE1vZHVsZVBhdGg9ZnVuY3Rpb24obSxzKXtyZXR1cm4gVShRKG0pLHMpfTtqUXVlcnkuc2FwLmdldFJlc291cmNlUGF0aD1VO2pRdWVyeS5zYXAucmVnaXN0ZXJNb2R1bGVQYXRoPWZ1bmN0aW9uIHJlZ2lzdGVyTW9kdWxlUGF0aChtLHMpe209bS5yZXBsYWNlKC9cLi9nLCIvIik7cz1zfHwnLic7alF1ZXJ5LnNhcC5yZWdpc3RlclJlc291cmNlUGF0aChtLHMpfTtqUXVlcnkuc2FwLnJlZ2lzdGVyUmVzb3VyY2VQYXRoPWZ1bmN0aW9uKHMsZCl7cz1TdHJpbmcoc3x8IiIpO2lmKGQ9PW51bGwpe2RlbGV0ZSB1W3NdfWVsc2V7ZD1TdHJpbmcoZCk7aWYoZC5zbGljZSgtMSkhPScvJyl7ZCs9Jy8nfXVbc109ZH1vLmluZm8oInJlZ2lzdGVyUmVzb3VyY2VQYXRoICgnIitzKyInLCAnIitkKyInKSIpfTtqUXVlcnkuc2FwLmlzRGVjbGFyZWQ9ZnVuY3Rpb24gaXNEZWNsYXJlZChtLGkpe209UShtKSsiLmpzIjtyZXR1cm4gTVttXSYmKGl8fE1bbV0uc3RhdGUhPT10KX07alF1ZXJ5LnNhcC5nZXRBbGxEZWNsYXJlZE1vZHVsZXM9ZnVuY3Rpb24oKXt2YXIgbT1bXTtqUXVlcnkuZWFjaChNLGZ1bmN0aW9uKHMsZCl7aWYoZCYmZC5zdGF0ZSE9PXQpe3ZhciBpPVQocyk7aWYoaSl7bS5wdXNoKGkpfX19KTtyZXR1cm4gbX07aWYoQy5yZXNvdXJjZXJvb3RzKXtqUXVlcnkuZWFjaChDLnJlc291cmNlcm9vdHMsalF1ZXJ5LnNhcC5yZWdpc3Rlck1vZHVsZVBhdGgpfW8uaW5mbygiVVJMIHByZWZpeGVzIHNldCB0bzoiKTtmb3IodmFyIG4gaW4gdSl7by5pbmZvKCIgICIrKG4/IiciK24rIiciOiIoZGVmYXVsdCkiKSsiIDogIit1W25dKX1qUXVlcnkuc2FwLmRlY2xhcmU9ZnVuY3Rpb24obSxkKXt2YXIgcz1tO2lmKHR5cGVvZihtKT09PSJvYmplY3QiKXtzPW0ubW9kTmFtZTttPVEobS5tb2ROYW1lKSsobS50eXBlPyIuIittLnR5cGU6IiIpKyIuanMifWVsc2V7bT1RKG0pKyIuanMifVgobSk7aWYoZCE9PWZhbHNlKXtqUXVlcnkuc2FwLmdldE9iamVjdChzLDEpfXJldHVybiB0aGlzfTtqUXVlcnkuc2FwLnJlcXVpcmU9ZnVuY3Rpb24obSxkKXtpZihqUXVlcnkuaXNBcnJheShtKSYmdHlwZW9mIGQ9PT0iZnVuY3Rpb24iKXskKG0sZCl9ZWxzZSBpZihhcmd1bWVudHMubGVuZ3RoPjEpe2Zvcih2YXIgaT0wO2k8YXJndW1lbnRzLmxlbmd0aDtpKyspe2pRdWVyeS5zYXAucmVxdWlyZShhcmd1bWVudHNbaV0pfXJldHVybiB0aGlzfWlmKHR5cGVvZihtKT09PSJvYmplY3QiKXttPVEobS5tb2ROYW1lKSsobS50eXBlPyIuIittLnR5cGU6IiIpKyIuanMifWVsc2V7bT1RKG0pKyIuanMifVkobSk7cmV0dXJuIHRoaXN9O2pRdWVyeS5zYXAuX3JlcXVpcmVQYXRoPWZ1bmN0aW9uKG0pe1kobSsiLmpzIil9O3dpbmRvdy5zYXA9d2luZG93LnNhcHx8e307c2FwLnVpPXNhcC51aXx8e307c2FwLnVpLmRlZmluZT1mdW5jdGlvbihzLGQsbCxtKXt2YXIgYTE9W10sYjEsYzEsaTtpZih0eXBlb2Ygcz09PSJzdHJpbmciKXtiMT1zKyIuanMifWVsc2V7bT1sO2w9ZDtkPXM7YjE9eVt5Lmxlbmd0aC0xXX1zPVQoYjEpO2lmKCFqUXVlcnkuaXNBcnJheShkKSl7bT1sO2w9ZDtkPVtdfWVsc2V7dmFyIGQxPWIxLnNsaWNlKDAsMStiMS5sYXN0SW5kZXhPZignLycpKTtmb3IoaT0wO2k8ZC5sZW5ndGg7aSsrKXtpZigvXlwuXC8vLnRlc3QoZFtpXSkpe2RbaV09ZDErZFtpXS5zbGljZSgyKX19fWlmKG8uaXNMb2dnYWJsZSgpKXtvLmRlYnVnKCJkZWZpbmUoIitiMSsiLCAiKyJbJyIrZC5qb2luKCInLCciKSsiJ10iKyIpIil9dmFyIGUxPVgoYjEpOyQoZCxmdW5jdGlvbigpe2lmKG8uaXNMb2dnYWJsZSgpKXtvLmRlYnVnKCJkZWZpbmUoIitiMSsiKTogY2FsbGluZyBmYWN0b3J5ICIrdHlwZW9mIGwpfWlmKG0pe2pRdWVyeS5zYXAuZ2V0T2JqZWN0KHMsMSl9aWYodHlwZW9mIGw9PT0iZnVuY3Rpb24iKXtlMS5jb250ZW50PWwuYXBwbHkod2luZG93LGFyZ3VtZW50cyl9ZWxzZXtlMS5jb250ZW50PWx9aWYobSl7aWYoZTEuY29udGVudD09bnVsbCl7by5lcnJvcigibW9kdWxlICciK2IxKyInIHJldHVybmVkIG5vIGNvbnRlbnQsIGJ1dCBzaG91bGQgYmUgZXhwb3J0ZWQiKX1lbHNle2lmKG8uaXNMb2dnYWJsZSgpKXtvLmRlYnVnKCJleHBvcnRpbmcgY29udGVudCBvZiAnIitiMSsiJzogYXMgZ2xvYmFsIG9iamVjdCIpfWpRdWVyeS5zYXAuc2V0T2JqZWN0KHMsZTEuY29udGVudCl9fX0pfTtqUXVlcnkuc2FwLnByZWxvYWRNb2R1bGVzPWZ1bmN0aW9uKHMsZCxpKXt2YXIgbCxtO2lmKHhbc10pcmV0dXJuO3hbc109dHJ1ZTtsPWpRdWVyeS5zYXAuZ2V0TW9kdWxlUGF0aChzLCIuanNvbiIpO28uZGVidWcoInByZWxvYWQgZmlsZSAiK3MpO209aSYmaS5zdGFydFRhc2soImxvYWQgIitzKTtqUXVlcnkuYWpheCh7ZGF0YVR5cGU6Impzb24iLGFzeW5jOmQsdXJsOmwsc3VjY2VzczpmdW5jdGlvbihhMSl7aWYoYTEpe2ExLnVybD1sfWpRdWVyeS5zYXAucmVnaXN0ZXJQcmVsb2FkZWRNb2R1bGVzKGExLGQsaSk7aSYmaS5maW5pc2hUYXNrKG0pfSxlcnJvcjpmdW5jdGlvbihhMSxiMSxjMSl7by5lcnJvcigiZmFpbGVkIHRvIHByZWxvYWQgJyIrcysiJzogIisoYzF8fGIxKSk7aSYmaS5maW5pc2hUYXNrKG0sZmFsc2UpfX0pfTtqUXVlcnkuc2FwLnJlZ2lzdGVyUHJlbG9hZGVkTW9kdWxlcz1mdW5jdGlvbihkLGkscyl7dmFyIGw9VihkLnZlcnNpb258fCIxLjAiKS5jb21wYXJlVG8oIjIuMCIpPDA7aWYoby5pc0xvZ2dhYmxlKCkpe28uZGVidWcoeisiYWRkaW5nIHByZWxvYWRlZCBtb2R1bGVzIGZyb20gJyIrZC51cmwrIiciKX1pZihkLm5hbWUpe3hbZC5uYW1lXT10cnVlfWpRdWVyeS5lYWNoKGQubW9kdWxlcyxmdW5jdGlvbihtLGExKXttPWw/UShtKSsiLmpzIjptO2lmKCFNW21dKXtNW21dPXtzdGF0ZTp0LHVybDpkLnVybCsiLyIrbSxkYXRhOmExLGdyb3VwOmQubmFtZX19aWYobS5tYXRjaCgvXC9saWJyYXJ5XC5qcyQvKSl7eFtUKG0pKyItcHJlbG9hZCJdPXRydWV9fSk7aWYoZC5kZXBlbmRlbmNpZXMpe2pRdWVyeS5lYWNoKGQuZGVwZW5kZW5jaWVzLGZ1bmN0aW9uKG0sYTEpe2pRdWVyeS5zYXAucHJlbG9hZE1vZHVsZXMoYTEsaSxzKX0pfX07alF1ZXJ5LnNhcC51bmxvYWRSZXNvdXJjZXM9ZnVuY3Rpb24ocyxkLGwsbSl7dmFyIGExPVtdO2lmKGQ9PW51bGwpe2Q9dHJ1ZX1pZihkKXtqUXVlcnkuZWFjaChNLGZ1bmN0aW9uKGksYjEpe2lmKGIxJiZiMS5ncm91cD09PXMpe2ExLnB1c2goaSl9fSk7ZGVsZXRlIHhbc119ZWxzZXtpZihNW3NdKXthMS5wdXNoKHMpfX1qUXVlcnkuZWFjaChhMSxmdW5jdGlvbihpLGIxKXt2YXIgYzE9TVtiMV07aWYoYzEmJm0mJmIxLm1hdGNoKC9cLmpzJC8pKXtqUXVlcnkuc2FwLnNldE9iamVjdChUKGIxKSx1bmRlZmluZWQpfWlmKGMxJiYobHx8YzEuc3RhdGU9PT10KSl7ZGVsZXRlIE1bYjFdfX0pfTtqUXVlcnkuc2FwLmdldFJlc291cmNlTmFtZT1mdW5jdGlvbihtLHMpe3JldHVybiBRKG0pKyhzfHwiLmpzIil9O2pRdWVyeS5zYXAubG9hZFJlc291cmNlPWZ1bmN0aW9uKHMsbSl7dmFyIGksbCxhMSxiMSxjMTtpZih0eXBlb2Ygcz09PSJzdHJpbmciKXttPW18fHt9fWVsc2V7bT1zfHx7fTtzPW0ubmFtZTtpZighcyYmbS51cmwpe3M9VyhtLnVybCl9fW09alF1ZXJ5LmV4dGVuZCh7ZmFpbE9uRXJyb3I6dHJ1ZSxhc3luYzpmYWxzZX0sbSk7aT1tLmRhdGFUeXBlO2lmKGk9PW51bGwmJnMpe2k9KGk9Ti5leGVjKHMpKSYmaVsxXX1jMT1tLmFzeW5jP25ldyBqUXVlcnkuRGVmZXJyZWQoKTpudWxsO2Z1bmN0aW9uIGQxKGQsZSl7aWYoZD09bnVsbCYmbS5mYWlsT25FcnJvcil7ZT1lfHxuZXcgRXJyb3IoIm5vIGRhdGEgcmV0dXJuZWQgZm9yICIrcyk7aWYobS5hc3luYyl7YzEucmVqZWN0KGUpO2pRdWVyeS5zYXAubG9nLmVycm9yKGUpO3JldHVybiBkfXRocm93IGV9aWYobS5hc3luYyl7YzEucmVzb2x2ZShkKX1yZXR1cm4gZH1mdW5jdGlvbiBlMShkKXt2YXIgZjE9alF1ZXJ5LmFqYXhTZXR0aW5ncy5jb252ZXJ0ZXJzWyJ0ZXh0ICIraV07aWYodHlwZW9mIGYxPT09ImZ1bmN0aW9uIil7ZD1mMShkKX1yZXR1cm4gZDEoZCl9bD1zJiZNW3NdJiZNW3NdLmRhdGE7aWYobCE9bnVsbCl7aWYobS5hc3luYyl7c2V0VGltZW91dChmdW5jdGlvbigpe2UxKGwpfSwwKX1lbHNle2w9ZTEobCl9fWVsc2V7alF1ZXJ5LmFqYXgoe3VybDphMT1tLnVybHx8VShzKSxhc3luYzptLmFzeW5jLGRhdGFUeXBlOmksaGVhZGVyczptLmhlYWRlcnMsc3VjY2VzczpmdW5jdGlvbihkLGYxLGcxKXtsPWQxKGQpfSxlcnJvcjpmdW5jdGlvbihkLGYxLGcxKXtiMT1uZXcgRXJyb3IoInJlc291cmNlICIrcysiIGNvdWxkIG5vdCBiZSBsb2FkZWQgZnJvbSAiK2ExKyIuIENoZWNrIGZvciAnZmlsZSBub3QgZm91bmQnIG9yIHBhcnNlIGVycm9ycy4iKTtiMS5zdGF0dXM9ZjE7YjEuZXJyb3I9ZzE7YjEuc3RhdHVzQ29kZT1kLnN0YXR1cztsPWQxKG51bGwsYjEpfX0pfXJldHVybiBtLmFzeW5jP3dpbmRvdy5Qcm9taXNlLnJlc29sdmUoYzEpOmx9O3JldHVybiBmdW5jdGlvbigpe3JldHVybnttb2R1bGVzOk0scHJlZml4ZXM6dX19fSgpKTtmdW5jdGlvbiBoKG8pe3ZhciBkPXdpbmRvdy5kb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgiaGVhZCIpWzBdO2lmKGQpe2QuYXBwZW5kQ2hpbGQobyl9fWpRdWVyeS5zYXAuaW5jbHVkZVNjcmlwdD1mdW5jdGlvbiBpbmNsdWRlU2NyaXB0KHUsaSxsLGQpe3ZhciBzPXdpbmRvdy5kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzY3JpcHQiKTtzLnNyYz11O3MudHlwZT0idGV4dC9qYXZhc2NyaXB0IjtpZihpKXtzLmlkPWl9aWYoISFzYXAudWkuRGV2aWNlLmJyb3dzZXIuaW50ZXJuZXRfZXhwbG9yZXImJnNhcC51aS5EZXZpY2UuYnJvd3Nlci52ZXJzaW9uPDkpe2lmKGwpe3Mub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7aWYocy5yZWFkeVN0YXRlPT09ImxvYWRlZCJ8fHMucmVhZHlTdGF0ZT09PSJjb21wbGV0ZSIpe2woKTtzLm9ucmVhZHlzdGF0ZWNoYW5nZT1udWxsfX19fWVsc2V7aWYobCl7alF1ZXJ5KHMpLmxvYWQobCl9aWYoZCl7alF1ZXJ5KHMpLmVycm9yKGQpfX12YXIgbztpZigoaSYmKG89alF1ZXJ5LnNhcC5kb21CeUlkKGkpKSYmby50YWdOYW1lPT09IlNDUklQVCIpKXtqUXVlcnkobykucmVtb3ZlKCl9aChzKX07alF1ZXJ5LnNhcC5pbmNsdWRlU3R5bGVTaGVldD1mdW5jdGlvbiBpbmNsdWRlU3R5bGVTaGVldCh1LEksbCxkKXt2YXIgbT1mdW5jdGlvbih1LEksbCxkKXt2YXIgTD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJsaW5rIik7TC50eXBlPSJ0ZXh0L2NzcyI7TC5yZWw9InN0eWxlc2hlZXQiO0wuaHJlZj11O2lmKEkpe0wuaWQ9SX1qUXVlcnkoTCkubG9hZChmdW5jdGlvbigpe2pRdWVyeShMKS5hdHRyKCJzYXAtdWktcmVhZHkiLCJ0cnVlIik7aWYobCl7bCgpfX0pO2pRdWVyeShMKS5lcnJvcihmdW5jdGlvbigpe2pRdWVyeShMKS5hdHRyKCJzYXAtdWktcmVhZHkiLCJmYWxzZSIpO2lmKGQpe2QoKX19KTtyZXR1cm4gTH07dmFyIG49ZnVuY3Rpb24odSxJLGwsZCl7aWYoc2FwLnVpLkRldmljZS5icm93c2VyLmludGVybmV0X2V4cGxvcmVyJiZzYXAudWkuRGV2aWNlLmJyb3dzZXIudmVyc2lvbjw9OSYmZG9jdW1lbnQuc3R5bGVTaGVldHMubGVuZ3RoPj0yOCl7dmFyIHM9VVJJLnBhcnNlKGRvY3VtZW50LlVSTCkucGF0aDtqUXVlcnkuc2FwLmxvZy53YXJuaW5nKCJTdGx5ZVNoZWV0ICIrSSsiIG5vdCBhZGRlZCBhcyBMSU5LIGJlY2F1c2Ugb2YgSUUgbGltaXRzIix1LCJqUXVlcnkuc2FwLmluY2x1ZGVTdHlsZVNoZWV0Iik7aWYoIXRoaXMuX29JRVN0eWxlU2hlZXQpe3RoaXMuX29JRVN0eWxlU2hlZXQ9ZG9jdW1lbnQuY3JlYXRlU3R5bGVTaGVldCgpO3RoaXMuX29JRVN0eWxlU2hlZXQuYWRkSW1wb3J0KFVSSSh1KS5hYnNvbHV0ZVRvKHMpKX1lbHNle3ZhciBBPWZhbHNlO2Zvcih2YXIgaT0wO2k8dGhpcy5fb0lFU3R5bGVTaGVldC5pbXBvcnRzLmxlbmd0aDtpKyspe3ZhciB0PXRoaXMuX29JRVN0eWxlU2hlZXQuaW1wb3J0c1tpXTtpZih0LmltcG9ydHMubGVuZ3RoPDMwKXt0LmFkZEltcG9ydChVUkkodSkuYWJzb2x1dGVUbyhzKSk7QT10cnVlO2JyZWFrfX1pZighQSl7dGhpcy5fb0lFU3R5bGVTaGVldC5hZGRJbXBvcnQoVVJJKHUpLmFic29sdXRlVG8ocykpfX12YXIgdj1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2FwLXVpLWNvcmUtY3VzdG9tY3NzJyk7aWYoIWpRdWVyeS5pc0VtcHR5T2JqZWN0KHYpKXtoKHYpfX1lbHNle3ZhciBMPW0odSxJLGwsZCk7aWYoalF1ZXJ5KCcjc2FwLXVpLWNvcmUtY3VzdG9tY3NzJykubGVuZ3RoPjApe2pRdWVyeSgnI3NhcC11aS1jb3JlLWN1c3RvbWNzcycpLmZpcnN0KCkuYmVmb3JlKGpRdWVyeShMKSl9ZWxzZXtoKEwpfX19O3ZhciBvLFI7aWYoKEkmJihvPWpRdWVyeS5zYXAuZG9tQnlJZChJKSkmJihSPW8udGFnTmFtZT09PSJMSU5LIiYmby5yZWw9PT0ic3R5bGVzaGVldCIpKXx8d2luZG93LmRvY3VtZW50LmJvZHkpe2lmKFIpe2lmKG8uZ2V0QXR0cmlidXRlKCJocmVmIikhPT11fHxsfHxkKXtqUXVlcnkobykucmVwbGFjZVdpdGgobSh1LEksbCxkKSl9fWVsc2V7bih1LEksbCxkKX19ZWxzZXtuKHUsSSxsLGQpfX07aWYoIShDLnByb2R1Y3RpdmU9PT10cnVlfHxDLnByb2R1Y3RpdmU9PT0idHJ1ZSJ8fEMucHJvZHVjdGl2ZT09PSJ4Iikpe2pRdWVyeShmdW5jdGlvbigpe2pRdWVyeShkb2N1bWVudC5ib2R5KS5rZXlkb3duKGZ1bmN0aW9uKGUpe2lmKGUua2V5Q29kZT09ODAmJmUuc2hpZnRLZXkmJmUuYWx0S2V5JiZlLmN0cmxLZXkpe3RyeXtqUXVlcnkuc2FwLnJlcXVpcmUoInNhcC51aS5kZWJ1Zy5UZWNobmljYWxJbmZvIil9Y2F0Y2goZSl7cmV0dXJufXNhcC51aS5kZWJ1Zy5UZWNobmljYWxJbmZvLm9wZW4oZnVuY3Rpb24oKXt2YXIgaT1nKCk7cmV0dXJue21vZHVsZXM6aS5tb2R1bGVzLHByZWZpeGVzOmkudXJsUHJlZml4ZXMsY29uZmlnOkN9fSl9fSl9KTtqUXVlcnkoZnVuY3Rpb24oKXtqUXVlcnkoZG9jdW1lbnQuYm9keSkua2V5ZG93bihmdW5jdGlvbihlKXtpZihlLmtleUNvZGU9PTgzJiZlLnNoaWZ0S2V5JiZlLmFsdEtleSYmZS5jdHJsS2V5KXt0cnl7alF1ZXJ5LnNhcC5yZXF1aXJlKCJzYXAudWkuY29yZS5zdXBwb3J0LlN1cHBvcnQiKTt2YXIgcz1zYXAudWkuY29yZS5zdXBwb3J0LlN1cHBvcnQuZ2V0U3R1YigpO2lmKHMuZ2V0VHlwZSgpIT1zYXAudWkuY29yZS5zdXBwb3J0LlN1cHBvcnQuU3R1YlR5cGUuQVBQTElDQVRJT04pe3JldHVybn1zLm9wZW5TdXBwb3J0VG9vbCgpfWNhdGNoKGUpe319fSl9KX1pZigvc2FwLXVpLXh4LWUyZS10cmFjZT0odHJ1ZXx4fFgpLy50ZXN0KGxvY2F0aW9uLnNlYXJjaCkpe2pRdWVyeS5zYXAucmVxdWlyZSgic2FwLnVpLmNvcmUuc3VwcG9ydC50cmFjZS5FMmVUcmFjZUxpYiIrIiIpfWlmKCFqUXVlcnkuc3VwcG9ydCl7alF1ZXJ5LnN1cHBvcnQ9e319alF1ZXJ5LmV4dGVuZChqUXVlcnkuc3VwcG9ydCx7dG91Y2g6Im9udG91Y2hlbmQiaW4gZG9jdW1lbnR9KTt2YXIgcD1bIldlYmtpdCIsIm1zIiwiTW96Il07dmFyIGs9ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlO3ZhciBxPWZ1bmN0aW9uKGQsbCl7aWYoalF1ZXJ5LnN1cHBvcnRbZF09PT11bmRlZmluZWQpe2lmKGtbbF0hPT11bmRlZmluZWQpe2pRdWVyeS5zdXBwb3J0W2RdPXRydWU7aWYobD09PSJib3hGbGV4Inx8bD09PSJmbGV4T3JkZXIifHxsPT09ImZsZXhHcm93Iil7aWYoIXNhcC51aS5EZXZpY2UuYnJvd3Nlci5jaHJvbWV8fHNhcC51aS5EZXZpY2UuYnJvd3Nlci52ZXJzaW9uPjI4KXtqUXVlcnkuc3VwcG9ydC5mbGV4Qm94UHJlZml4ZWQ9ZmFsc2V9fXJldHVybn1lbHNle2w9bC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKStsLnNsaWNlKDEpO2Zvcih2YXIgaSBpbiBwKXtpZihrW3BbaV0rbF0hPT11bmRlZmluZWQpe2pRdWVyeS5zdXBwb3J0W2RdPXRydWU7cmV0dXJufX19alF1ZXJ5LnN1cHBvcnRbZF09ZmFsc2V9fTtxKCJjc3NUcmFuc2Zvcm1zIiwidHJhbnNmb3JtIik7cSgiY3NzVHJhbnNmb3JtczNkIiwicGVyc3BlY3RpdmUiKTtxKCJjc3NUcmFuc2l0aW9ucyIsInRyYW5zaXRpb24iKTtxKCJjc3NBbmltYXRpb25zIiwiYW5pbWF0aW9uTmFtZSIpO2lmKGpRdWVyeS5zdXBwb3J0LmNzc0dyYWRpZW50cz09PXVuZGVmaW5lZCl7dmFyIEU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyksaz1FLnN0eWxlO3RyeXtrLmJhY2tncm91bmRJbWFnZT0ibGluZWFyLWdyYWRpZW50KGxlZnQgdG9wLCByZWQsIHdoaXRlKSI7ay5iYWNrZ3JvdW5kSW1hZ2U9Ii1tb3otbGluZWFyLWdyYWRpZW50KGxlZnQgdG9wLCByZWQsIHdoaXRlKSI7ay5iYWNrZ3JvdW5kSW1hZ2U9Ii13ZWJraXQtbGluZWFyLWdyYWRpZW50KGxlZnQgdG9wLCByZWQsIHdoaXRlKSI7ay5iYWNrZ3JvdW5kSW1hZ2U9Ii1tcy1saW5lYXItZ3JhZGllbnQobGVmdCB0b3AsIHJlZCwgd2hpdGUpIjtrLmJhY2tncm91bmRJbWFnZT0iLXdlYmtpdC1ncmFkaWVudChsaW5lYXIsIGxlZnQgdG9wLCByaWdodCBib3R0b20sIGZyb20ocmVkKSwgdG8od2hpdGUpKSJ9Y2F0Y2goZSl7fWpRdWVyeS5zdXBwb3J0LmNzc0dyYWRpZW50cz0oay5iYWNrZ3JvdW5kSW1hZ2UmJmsuYmFja2dyb3VuZEltYWdlLmluZGV4T2YoImdyYWRpZW50Iik+LTEpO0U9bnVsbH1qUXVlcnkuc3VwcG9ydC5mbGV4Qm94UHJlZml4ZWQ9dHJ1ZTtxKCJmbGV4Qm94TGF5b3V0IiwiYm94RmxleCIpO2lmKGsubXNGbGV4T3JkZXIhPT11bmRlZmluZWQpe2pRdWVyeS5zdXBwb3J0LmllMTBGbGV4Qm94TGF5b3V0PXRydWV9cSgibmV3RmxleEJveExheW91dCIsImZsZXhHcm93Iik7aWYoalF1ZXJ5LnN1cHBvcnQuZmxleEJveExheW91dHx8alF1ZXJ5LnN1cHBvcnQubmV3RmxleEJveExheW91dHx8alF1ZXJ5LnN1cHBvcnQuaWUxMEZsZXhCb3hMYXlvdXQpe2pRdWVyeS5zdXBwb3J0Lmhhc0ZsZXhCb3hTdXBwb3J0PXRydWV9ZWxzZXtqUXVlcnkuc3VwcG9ydC5oYXNGbGV4Qm94U3VwcG9ydD1mYWxzZX1pZighalF1ZXJ5LnN1cHBvcnQub3BhY2l0eSl7KGZ1bmN0aW9uKCl7dmFyIG89alF1ZXJ5LmNzc0hvb2tzLm9wYWNpdHkuc2V0O2pRdWVyeS5jc3NIb29rcy5vcGFjaXR5LnNldD1mdW5jdGlvbihkLHYpe28uYXBwbHkodGhpcyxhcmd1bWVudHMpO2lmKCFqUXVlcnkudHJpbShkLnN0eWxlLmZpbHRlcikpe2Quc3R5bGUucmVtb3ZlQXR0cmlidXRlKCJmaWx0ZXIiKX19fSgpKX1mdW5jdGlvbiBQKCl7ZnVuY3Rpb24gTShpLEkscyxsKXt0aGlzLmlkPWk7dGhpcy5pbmZvPUk7dGhpcy5zdGFydD1zO3RoaXMuZW5kPWw7dGhpcy5wYXVzZT0wO3RoaXMucmVzdW1lPTA7dGhpcy5kdXJhdGlvbj0wO3RoaXMudGltZT0wfXZhciBBPWZhbHNlO3ZhciBkPWpRdWVyeS5hamF4O3RoaXMuZ2V0QWN0aXZlPWZ1bmN0aW9uKCl7cmV0dXJuIEF9O3RoaXMuc2V0QWN0aXZlPWZ1bmN0aW9uKG8pe2lmKEE9PW8pe3JldHVybiBBfUE9bztpZihBKXtqUXVlcnkuYWpheD1mdW5jdGlvbih1LGkpe2pRdWVyeS5zYXAubWVhc3VyZS5zdGFydCh1LnVybCwiUmVxdWVzdCBmb3IgIit1LnVybCk7ZC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7alF1ZXJ5LnNhcC5tZWFzdXJlLmVuZCh1LnVybCl9fWVsc2UgaWYoZCl7alF1ZXJ5LmFqYXg9ZH1yZXR1cm4gQX07dGhpcy5zZXRBY3RpdmUoL3NhcC11aS1tZWFzdXJlPSh0cnVlfHh8WCkvLnRlc3QobG9jYXRpb24uc2VhcmNoKSk7dGhpcy5tTWVhc3VyZW1lbnRzPXt9O3RoaXMuc3RhcnQ9ZnVuY3Rpb24oaSxJKXtpZighQSl7cmV0dXJufXZhciB0PW5ldyBEYXRlKCkuZ2V0VGltZSgpO3ZhciBtPW5ldyBNKGksSSx0LDApO2lmKG0pe3RoaXMubU1lYXN1cmVtZW50c1tpXT1tO3JldHVybih7aWQ6bS5pZCxpbmZvOm0uaW5mbyxzdGFydDptLnN0YXJ0fSl9ZWxzZXtyZXR1cm4gZmFsc2V9fTt0aGlzLnBhdXNlPWZ1bmN0aW9uKGkpe2lmKCFBKXtyZXR1cm59dmFyIHQ9bmV3IERhdGUoKS5nZXRUaW1lKCk7dmFyIG09dGhpcy5tTWVhc3VyZW1lbnRzW2ldO2lmKG0mJm0uZW5kPjApe3JldHVybiBmYWxzZX1pZihtJiZtLnBhdXNlPT0wKXttLnBhdXNlPXQ7aWYobS5wYXVzZT49bS5yZXN1bWUmJm0ucmVzdW1lPjApe20uZHVyYXRpb249bS5kdXJhdGlvbittLnBhdXNlLW0ucmVzdW1lO20ucmVzdW1lPTB9ZWxzZSBpZihtLnBhdXNlPj1tLnN0YXJ0KXttLmR1cmF0aW9uPW0ucGF1c2UtbS5zdGFydH19aWYobSl7cmV0dXJuKHtpZDptLmlkLGluZm86bS5pbmZvLHN0YXJ0Om0uc3RhcnQscGF1c2U6bS5wYXVzZX0pfWVsc2V7cmV0dXJuIGZhbHNlfX07dGhpcy5yZXN1bWU9ZnVuY3Rpb24oaSl7aWYoIUEpe3JldHVybn12YXIgdD1uZXcgRGF0ZSgpLmdldFRpbWUoKTt2YXIgbT10aGlzLm1NZWFzdXJlbWVudHNbaV07aWYobSYmbS5wYXVzZT4wKXttLnBhdXNlPTA7bS5yZXN1bWU9dH1pZihtKXtyZXR1cm4oe2lkOm0uaWQsaW5mbzptLmluZm8sc3RhcnQ6bS5zdGFydCxyZXN1bWU6bS5yZXN1bWV9KX1lbHNle3JldHVybiBmYWxzZX19O3RoaXMuZW5kPWZ1bmN0aW9uKGkpe2lmKCFBKXtyZXR1cm59dmFyIHQ9bmV3IERhdGUoKS5nZXRUaW1lKCk7dmFyIG09dGhpcy5tTWVhc3VyZW1lbnRzW2ldO2lmKG0mJiFtLmVuZCl7bS5lbmQ9dDtpZihtLmVuZD49bS5yZXN1bWUmJm0ucmVzdW1lPjApe20uZHVyYXRpb249bS5kdXJhdGlvbittLmVuZC1tLnJlc3VtZTttLnJlc3VtZT0wfWVsc2UgaWYobS5wYXVzZT4wKXttLnBhdXNlPTB9ZWxzZSBpZihtLmVuZD49bS5zdGFydCl7bS5kdXJhdGlvbj1tLmVuZC1tLnN0YXJ0fWlmKG0uZW5kPj1tLnN0YXJ0KXttLnRpbWU9bS5lbmQtbS5zdGFydH19aWYobSl7cmV0dXJuKHtpZDptLmlkLGluZm86bS5pbmZvLHN0YXJ0Om0uc3RhcnQsZW5kOm0uZW5kLHRpbWU6bS50aW1lLGR1cmF0aW9uOm0uZHVyYXRpb259KX1lbHNle3JldHVybiBmYWxzZX19O3RoaXMuZ2V0TWVhc3VyZW1lbnQ9ZnVuY3Rpb24oaSl7aWYoIUEpe3JldHVybn12YXIgbT10aGlzLm1NZWFzdXJlbWVudHNbaV07aWYobSl7cmV0dXJuKHtpZDptLmlkLGluZm86bS5pbmZvLHN0YXJ0Om0uc3RhcnQsZW5kOm0uZW5kLHRpbWU6bS50aW1lLGR1cmF0aW9uOm0uZHVyYXRpb259KX1lbHNle3JldHVybiBmYWxzZX19O3RoaXMuY2xlYXI9ZnVuY3Rpb24oKXtpZighQSl7cmV0dXJufXRoaXMubU1lYXN1cmVtZW50cz17fX07dGhpcy5yZW1vdmU9ZnVuY3Rpb24oaSl7aWYoIUEpe3JldHVybn1kZWxldGUgdGhpcy5tTWVhc3VyZW1lbnRzW2ldfTt0aGlzLmdldEFsbE1lYXN1cmVtZW50cz1mdW5jdGlvbigpe2lmKCFBKXtyZXR1cm59dmFyIG09bmV3IEFycmF5KCk7alF1ZXJ5LmVhY2godGhpcy5tTWVhc3VyZW1lbnRzLGZ1bmN0aW9uKGksbyl7bS5wdXNoKHtpZDpvLmlkLGluZm86by5pbmZvLHN0YXJ0Om8uc3RhcnQsZW5kOm8uZW5kLGR1cmF0aW9uOm8uZHVyYXRpb24sdGltZTpvLnRpbWV9KX0pO3JldHVybiBtfTt0aGlzLmFkZD1mdW5jdGlvbihpLEkscyxsLHQsRCl7aWYoIUEpe3JldHVybn12YXIgbT1uZXcgTShpLEkscyxsKTttLnRpbWU9dDttLmR1cmF0aW9uPUQ7aWYobSl7dGhpcy5tTWVhc3VyZW1lbnRzW2ldPW07cmV0dXJuKHtpZDptLmlkLGluZm86bS5pbmZvLHN0YXJ0Om0uc3RhcnQsZW5kOm0uZW5kLHRpbWU6bS50aW1lLGR1cmF0aW9uOm0uZHVyYXRpb259KX1lbHNle3JldHVybiBmYWxzZX19fWpRdWVyeS5zYXAubWVhc3VyZT1uZXcgUCgpfSgpKTsNCmpRdWVyeS5zYXAuZ2xvYmFsRXZhbD1mdW5jdGlvbigpe2V2YWwoYXJndW1lbnRzWzBdKX07DQpqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC11aS1jb3JlLWFsbCcpO2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLkRldmljZScpO2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLnRoaXJkcGFydHkuU2Vjb25kTGV2ZWxEb21haW5zJyk7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkudGhpcmRwYXJ0eS5VUkknKTtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS50aGlyZHBhcnR5LmNhamEtaHRtbC1zYW5pdGl6ZXInKTtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS50aGlyZHBhcnR5LmpxdWVyeS5qcXVlcnktMS4xMS4xJyk7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkudGhpcmRwYXJ0eS5qcXVlcnl1aS5qcXVlcnktdWktY29yZScpO2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLnRoaXJkcGFydHkuanF1ZXJ5dWkuanF1ZXJ5LXVpLWRhdGVwaWNrZXInKTtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS50aGlyZHBhcnR5LmpxdWVyeXVpLmpxdWVyeS11aS1wb3NpdGlvbicpO2pRdWVyeS5zYXAuZGVjbGFyZSgnanF1ZXJ5LnNhcC5wcm9taXNlJyk7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkudGhpcmRwYXJ0eS5qcXVlcnktbW9iaWxlLWN1c3RvbScpO2pRdWVyeS5zYXAuZGVjbGFyZSgnanF1ZXJ5LnNhcC5nbG9iYWwnKTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdqcXVlcnkuc2FwLmtleWNvZGVzJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnanF1ZXJ5LnNhcC5rZXljb2RlcycpO3NhcC51aS5kZWZpbmUoImpxdWVyeS5zYXAua2V5Y29kZXMiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnXSxmdW5jdGlvbihxKXsidXNlIHN0cmljdCI7cS5zYXAuS2V5Q29kZXM9e0JBQ0tTUEFDRTo4LFRBQjo5LEVOVEVSOjEzLFNISUZUOjE2LENPTlRST0w6MTcsQUxUOjE4LEJSRUFLOjE5LENBUFNfTE9DSzoyMCxFU0NBUEU6MjcsU1BBQ0U6MzIsUEFHRV9VUDozMyxQQUdFX0RPV046MzQsRU5EOjM1LEhPTUU6MzYsQVJST1dfTEVGVDozNyxBUlJPV19VUDozOCxBUlJPV19SSUdIVDozOSxBUlJPV19ET1dOOjQwLFBSSU5UOjQ0LElOU0VSVDo0NSxERUxFVEU6NDYsRElHSVRfMDo0OCxESUdJVF8xOjQ5LERJR0lUXzI6NTAsRElHSVRfMzo1MSxESUdJVF80OjUyLERJR0lUXzU6NTMsRElHSVRfNjo1NCxESUdJVF83OjU1LERJR0lUXzg6NTYsRElHSVRfOTo1NyxBOjY1LEI6NjYsQzo2NyxEOjY4LEU6NjksRjo3MCxHOjcxLEg6NzIsSTo3MyxKOjc0LEs6NzUsTDo3NixNOjc3LE46NzgsTzo3OSxQOjgwLFE6ODEsUjo4MixTOjgzLFQ6ODQsVTo4NSxWOjg2LFc6ODcsWDo4OCxZOjg5LFo6OTAsV0lORE9XUzo5MSxDT05URVhUX01FTlU6OTMsVFVSTl9PRkY6OTQsU0xFRVA6OTUsTlVNUEFEXzA6OTYsTlVNUEFEXzE6OTcsTlVNUEFEXzI6OTgsTlVNUEFEXzM6OTksTlVNUEFEXzQ6MTAwLE5VTVBBRF81OjEwMSxOVU1QQURfNjoxMDIsTlVNUEFEXzc6MTAzLE5VTVBBRF84OjEwNCxOVU1QQURfOToxMDUsTlVNUEFEX0FTVEVSSVNLOjEwNixOVU1QQURfUExVUzoxMDcsTlVNUEFEX01JTlVTOjEwOSxOVU1QQURfQ09NTUE6MTEwLE5VTVBBRF9TTEFTSDoxMTEsRjE6MTEyLEYyOjExMyxGMzoxMTQsRjQ6MTE1LEY1OjExNixGNjoxMTcsRjc6MTE4LEY4OjExOSxGOToxMjAsRjEwOjEyMSxGMTE6MTIyLEYxMjoxMjMsTlVNX0xPQ0s6MTQ0LFNDUk9MTF9MT0NLOjE0NSxPUEVOX0JSQUNLRVQ6MTg2LFBMVVM6MTg3LENPTU1BOjE4OCxTTEFTSDoxODksRE9UOjE5MCxQSVBFOjE5MSxTRU1JQ09MT046MTkyLE1JTlVTOjIxOSxHUkVBVF9BQ0NFTlQ6MjIwLEVRVUFMUzoyMjEsU0lOR0xFX1FVT1RFOjIyMixCQUNLU0xBU0g6MjI2fTtyZXR1cm4gcX0sZmFsc2UpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdqcXVlcnkuc2FwLmxvZ2dlcicpKXtqUXVlcnkuc2FwLmRlY2xhcmUoImpxdWVyeS5zYXAubG9nZ2VyIixmYWxzZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ2pxdWVyeS5zYXAuc2NyaXB0Jykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnanF1ZXJ5LnNhcC5zY3JpcHQnKTtzYXAudWkuZGVmaW5lKCJqcXVlcnkuc2FwLnNjcmlwdCIsWydqcXVlcnkuc2FwLmdsb2JhbCddLGZ1bmN0aW9uKHEpeyJ1c2Ugc3RyaWN0Ijt2YXIgST0wO3Euc2FwLnVpZD1mdW5jdGlvbiB1aWQoKXtyZXR1cm4iaWQtIituZXcgRGF0ZSgpLnZhbHVlT2YoKSsiLSIrSSsrfTtxLnNhcC5kZWxheWVkQ2FsbD1mdW5jdGlvbiBkZWxheWVkQ2FsbChkLG8sbSxwKXtyZXR1cm4gc2V0VGltZW91dChmdW5jdGlvbigpe2lmKHEudHlwZShtKT09InN0cmluZyIpe209b1ttXX1tLmFwcGx5KG8scHx8W10pfSxkKX07cS5zYXAuY2xlYXJEZWxheWVkQ2FsbD1mdW5jdGlvbiBjbGVhckRlbGF5ZWRDYWxsKGQpe2NsZWFyVGltZW91dChkKTtyZXR1cm4gdGhpc307cS5zYXAuaW50ZXJ2YWxDYWxsPWZ1bmN0aW9uIGludGVydmFsQ2FsbChpLG8sbSxwKXtyZXR1cm4gc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXtpZihxLnR5cGUobSk9PSJzdHJpbmciKXttPW9bbV19bS5hcHBseShvLHB8fFtdKX0saSl9O3Euc2FwLmNsZWFySW50ZXJ2YWxDYWxsPWZ1bmN0aW9uIGNsZWFySW50ZXJ2YWxDYWxsKGkpe2NsZWFySW50ZXJ2YWwoaSk7cmV0dXJuIHRoaXN9O3ZhciBVPWZ1bmN0aW9uKHUpe3RoaXMubVBhcmFtcz17fTt2YXIgUT11fHx3aW5kb3cubG9jYXRpb24uaHJlZjtpZihRLmluZGV4T2YoJyMnKT49MCl7UT1RLnNsaWNlKDAsUS5pbmRleE9mKCcjJykpfWlmKFEuaW5kZXhPZigiPyIpPj0wKXtRPVEuc2xpY2UoUS5pbmRleE9mKCI/IikrMSk7dmFyIHA9US5zcGxpdCgiJiIpLFA9e30sYSxuLHY7Zm9yKHZhciBpPTA7aTxwLmxlbmd0aDtpKyspe2E9cFtpXS5zcGxpdCgiPSIpO249ZGVjb2RlVVJJQ29tcG9uZW50KGFbMF0pO3Y9YS5sZW5ndGg+MT9kZWNvZGVVUklDb21wb25lbnQoYVsxXS5yZXBsYWNlKC9cKy9nLCcgJykpOiIiO2lmKG4pe2lmKCFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoUCxuKSl7UFtuXT1bXX1QW25dLnB1c2godil9fXRoaXMubVBhcmFtcz1QfX07VS5wcm90b3R5cGU9e307VS5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKG4sYSl7dmFyIHY9T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHRoaXMubVBhcmFtcyxuKT90aGlzLm1QYXJhbXNbbl06W107cmV0dXJuIGE9PT10cnVlP3Y6KHZbMF18fG51bGwpfTtxLnNhcC5nZXRVcmlQYXJhbWV0ZXJzPWZ1bmN0aW9uIGdldFVyaVBhcmFtZXRlcnModSl7cmV0dXJuIG5ldyBVKHUpfTtxLnNhcC51bmlxdWU9ZnVuY3Rpb24oYSl7dmFyIGw9YS5sZW5ndGg7aWYobD4xKXthLnNvcnQoKTtmb3IodmFyIGk9MSxqPTA7aTxsO2krKyl7aWYoYVtpXSE9PWFbal0pe2FbKytqXT1hW2ldfX1pZigrK2o8bCl7YS5zcGxpY2UoaixsLWopfX1yZXR1cm4gYX07cS5zYXAuZXF1YWw9ZnVuY3Rpb24oYSxiLG0sYyxkKXtpZih0eXBlb2YgbT09ImJvb2xlYW4iKXtjPW07bT11bmRlZmluZWR9aWYoIWQpZD0wO2lmKCFtKW09MTA7aWYoZD5tKXJldHVybiBmYWxzZTtpZihhPT09YilyZXR1cm4gdHJ1ZTtpZihxLmlzQXJyYXkoYSkmJnEuaXNBcnJheShiKSl7aWYoIWMpe2lmKGEubGVuZ3RoIT1iLmxlbmd0aCl7cmV0dXJuIGZhbHNlfX1lbHNle2lmKGEubGVuZ3RoPmIubGVuZ3RoKXtyZXR1cm4gZmFsc2V9fWZvcih2YXIgaT0wO2k8YS5sZW5ndGg7aSsrKXtpZighcS5zYXAuZXF1YWwoYVtpXSxiW2ldLG0sYyxkKzEpKXtyZXR1cm4gZmFsc2V9fXJldHVybiB0cnVlfWlmKHR5cGVvZiBhPT0ib2JqZWN0IiYmdHlwZW9mIGI9PSJvYmplY3QiKXtpZighYXx8IWIpe3JldHVybiBmYWxzZX1pZihhLmNvbnN0cnVjdG9yIT1iLmNvbnN0cnVjdG9yKXtyZXR1cm4gZmFsc2V9aWYoYS5ub2RlTmFtZSYmYi5ub2RlTmFtZSYmYS5uYW1lc3BhY2VVUkkmJmIubmFtZXNwYWNlVVJJKXtyZXR1cm4gcS5zYXAuaXNFcXVhbE5vZGUoYSxiKX1pZihhIGluc3RhbmNlb2YgRGF0ZSl7cmV0dXJuIGEudmFsdWVPZigpPT1iLnZhbHVlT2YoKX1mb3IodmFyIGkgaW4gYSl7aWYoIXEuc2FwLmVxdWFsKGFbaV0sYltpXSxtLGMsZCsxKSl7cmV0dXJuIGZhbHNlfX1pZighYyl7Zm9yKHZhciBpIGluIGIpe2lmKGFbaV09PT11bmRlZmluZWQpe3JldHVybiBmYWxzZX19fXJldHVybiB0cnVlfXJldHVybiBmYWxzZX07cS5zYXAuZWFjaD1mdW5jdGlvbihvLGMpe3ZhciBhPXEuaXNBcnJheShvKSxsLGk7aWYoYSl7Zm9yKGk9MCxsPW8ubGVuZ3RoO2k8bDtpKyspe2lmKGMuY2FsbChvW2ldLGksb1tpXSk9PT1mYWxzZSl7YnJlYWt9fX1lbHNle2ZvcihpIGluIG8pe2lmKGMuY2FsbChvW2ldLGksb1tpXSk9PT1mYWxzZSl7YnJlYWt9fX1yZXR1cm4gb307cS5zYXAuZm9ySW49e3RvU3RyaW5nOm51bGx9LnByb3BlcnR5SXNFbnVtZXJhYmxlKCJ0b1N0cmluZyIpP2Z1bmN0aW9uKG8sYyl7Zm9yKHZhciBuIGluIG8pe2lmKGMobixvW25dKT09PWZhbHNlKXtyZXR1cm59fX06KGZ1bmN0aW9uKCl7dmFyIEQ9WyJ0b1N0cmluZyIsInZhbHVlT2YiLCJ0b0xvY2FsZVN0cmluZyIsImhhc093blByb3BlcnR5IiwiaXNQcm90b3R5cGVPZiIsInByb3BlcnR5SXNFbnVtZXJhYmxlIiwiY29uc3RydWN0b3IiXSxhPUQubGVuZ3RoLG89T2JqZWN0LnByb3RvdHlwZSxoPW8uaGFzT3duUHJvcGVydHk7cmV0dXJuIGZ1bmN0aW9uKE8sYyl7dmFyIG4saTtmb3IobiBpbiBPKXtpZihjKG4sT1tuXSk9PT1mYWxzZSl7cmV0dXJufX1mb3IodmFyIGk9MDtpPGE7aSsrKXtuPURbaV07aWYoaC5jYWxsKE8sbil8fE9bbl0hPT1vW25dKXtpZihjKG4sT1tuXSk9PT1mYWxzZSl7cmV0dXJufX19fX0oKSk7cS5zYXAuYXJyYXlEaWZmPWZ1bmN0aW9uKG8sbixjKXtjPWN8fGZ1bmN0aW9uKHYsVil7cmV0dXJuIHEuc2FwLmVxdWFsKHYsVil9O3ZhciBPPVtdO3ZhciBOPVtdO3ZhciBtPVtdO2Zvcih2YXIgaT0wO2k8bi5sZW5ndGg7aSsrKXt2YXIgYT1uW2ldO3ZhciBmPTA7dmFyIHQ7Zm9yKHZhciBqPTA7ajxvLmxlbmd0aDtqKyspe2lmKGMob1tqXSxhKSl7ZisrO3Q9ajtpZihmPjEpe2JyZWFrfX19aWYoZj09MSl7dmFyIE09e29sZEluZGV4OnQsbmV3SW5kZXg6aX07aWYobVt0XSl7ZGVsZXRlIE9bdF07ZGVsZXRlIE5bbVt0XS5uZXdJbmRleF19ZWxzZXtOW2ldPXtkYXRhOm5baV0scm93OnR9O09bdF09e2RhdGE6b1t0XSxyb3c6aX07bVt0XT1NfX19Zm9yKHZhciBpPTA7aTxuLmxlbmd0aC0xO2krKyl7aWYoTltpXSYmIU5baSsxXSYmTltpXS5yb3crMTxvLmxlbmd0aCYmIU9bTltpXS5yb3crMV0mJmMob1tOW2ldLnJvdysxXSxuW2krMV0pKXtOW2krMV09e2RhdGE6bltpKzFdLHJvdzpOW2ldLnJvdysxfTtPW05baV0ucm93KzFdPXtkYXRhOk9bTltpXS5yb3crMV0scm93OmkrMX19fWZvcih2YXIgaT1uLmxlbmd0aC0xO2k+MDtpLS0pe2lmKE5baV0mJiFOW2ktMV0mJk5baV0ucm93PjAmJiFPW05baV0ucm93LTFdJiZjKG9bTltpXS5yb3ctMV0sbltpLTFdKSl7TltpLTFdPXtkYXRhOm5baS0xXSxyb3c6TltpXS5yb3ctMX07T1tOW2ldLnJvdy0xXT17ZGF0YTpPW05baV0ucm93LTFdLHJvdzppLTF9fX12YXIgZD1bXTtpZihuLmxlbmd0aD09MCl7Zm9yKHZhciBpPTA7aTxvLmxlbmd0aDtpKyspe2QucHVzaCh7aW5kZXg6MCx0eXBlOidkZWxldGUnfSl9fWVsc2V7dmFyIGI9MDtpZighT1swXSl7Zm9yKHZhciBpPTA7aTxvLmxlbmd0aCYmIU9baV07aSsrKXtkLnB1c2goe2luZGV4OjAsdHlwZTonZGVsZXRlJ30pO2I9aSsxfX1mb3IodmFyIGk9MDtpPG4ubGVuZ3RoO2krKyl7aWYoIU5baV18fE5baV0ucm93PmIpe2QucHVzaCh7aW5kZXg6aSx0eXBlOidpbnNlcnQnfSl9ZWxzZXtiPU5baV0ucm93KzE7Zm9yKHZhciBqPU5baV0ucm93KzE7ajxvLmxlbmd0aCYmKCFPW2pdfHxPW2pdLnJvdzxpKTtqKyspe2QucHVzaCh7aW5kZXg6aSsxLHR5cGU6J2RlbGV0ZSd9KTtiPWorMX19fX1yZXR1cm4gZH07cS5zYXAucGFyc2VKUz0oZnVuY3Rpb24oKXt2YXIgYSxiLGU9eyciJzonIicsJ1wnJzonXCcnLCdcXCc6J1xcJywnLyc6Jy8nLGI6J1xiJyxmOidcZicsbjonXG4nLHI6J1xyJyx0OidcdCd9LHQsZD1mdW5jdGlvbihtKXt0aHJvd3tuYW1lOidTeW50YXhFcnJvcicsbWVzc2FnZTptLGF0OmEsdGV4dDp0fX0sbj1mdW5jdGlvbihjKXtpZihjJiZjIT09Yil7ZCgiRXhwZWN0ZWQgJyIrYysiJyBpbnN0ZWFkIG9mICciK2IrIiciKX1iPXQuY2hhckF0KGEpO2ErPTE7cmV0dXJuIGJ9LGY9ZnVuY3Rpb24oKXt2YXIgZixzPScnO2lmKGI9PT0nLScpe3M9Jy0nO24oJy0nKX13aGlsZShiPj0nMCcmJmI8PSc5Jyl7cys9YjtuKCl9aWYoYj09PScuJyl7cys9Jy4nO3doaWxlKG4oKSYmYj49JzAnJiZiPD0nOScpe3MrPWJ9fWlmKGI9PT0nZSd8fGI9PT0nRScpe3MrPWI7bigpO2lmKGI9PT0nLSd8fGI9PT0nKycpe3MrPWI7bigpfXdoaWxlKGI+PScwJyYmYjw9JzknKXtzKz1iO24oKX19Zj0rcztpZighaXNGaW5pdGUoZikpe2QoIkJhZCBudW1iZXIiKX1lbHNle3JldHVybiBmfX0scz1mdW5jdGlvbigpe3ZhciBjLGkscz0nJyxrLHU7aWYoYj09PSciJ3x8Yj09PSdcJycpe2s9Yjt3aGlsZShuKCkpe2lmKGI9PT1rKXtuKCk7cmV0dXJuIHN9aWYoYj09PSdcXCcpe24oKTtpZihiPT09J3UnKXt1PTA7Zm9yKGk9MDtpPDQ7aSs9MSl7Yz1wYXJzZUludChuKCksMTYpO2lmKCFpc0Zpbml0ZShjKSl7YnJlYWt9dT11KjE2K2N9cys9U3RyaW5nLmZyb21DaGFyQ29kZSh1KX1lbHNlIGlmKHR5cGVvZiBlW2JdPT09J3N0cmluZycpe3MrPWVbYl19ZWxzZXticmVha319ZWxzZXtzKz1ifX19ZCgiQmFkIHN0cmluZyIpfSxnPWZ1bmN0aW9uKCl7dmFyIGc9JycsYyxpPWZ1bmN0aW9uKGIpe3JldHVybiBiPT09Il8ifHwoYj49IjAiJiZiPD0iOSIpfHwoYj49ImEiJiZiPD0ieiIpfHwoYj49IkEiJiZiPD0iWiIpfTtpZihpKGIpKXtnKz1ifWVsc2V7ZCgiQmFkIG5hbWUiKX13aGlsZShuKCkpe2lmKGI9PT0nICcpe24oKTtyZXR1cm4gZ31pZihiPT09JzonKXtyZXR1cm4gZ31pZihpKGIpKXtnKz1ifWVsc2V7ZCgiQmFkIG5hbWUiKX19ZCgiQmFkIG5hbWUiKX0sdz1mdW5jdGlvbigpe3doaWxlKGImJmI8PScgJyl7bigpfX0saD1mdW5jdGlvbigpe3N3aXRjaChiKXtjYXNlJ3QnOm4oJ3QnKTtuKCdyJyk7bigndScpO24oJ2UnKTtyZXR1cm4gdHJ1ZTtjYXNlJ2YnOm4oJ2YnKTtuKCdhJyk7bignbCcpO24oJ3MnKTtuKCdlJyk7cmV0dXJuIGZhbHNlO2Nhc2Unbic6bignbicpO24oJ3UnKTtuKCdsJyk7bignbCcpO3JldHVybiBudWxsfWQoIlVuZXhwZWN0ZWQgJyIrYisiJyIpfSx2LGo9ZnVuY3Rpb24oKXt2YXIgaj1bXTtpZihiPT09J1snKXtuKCdbJyk7dygpO2lmKGI9PT0nXScpe24oJ10nKTtyZXR1cm4gan13aGlsZShiKXtqLnB1c2godigpKTt3KCk7aWYoYj09PSddJyl7bignXScpO3JldHVybiBqfW4oJywnKTt3KCl9fWQoIkJhZCBhcnJheSIpfSxvPWZ1bmN0aW9uKCl7dmFyIGssbz17fTtpZihiPT09J3snKXtuKCd7Jyk7dygpO2lmKGI9PT0nfScpe24oJ30nKTtyZXR1cm4gb313aGlsZShiKXtpZihiPj0iMCImJmI8PSI5Iil7az1mKCl9ZWxzZSBpZihiPT09JyInfHxiPT09J1wnJyl7az1zKCl9ZWxzZXtrPWcoKX13KCk7bignOicpO2lmKE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG8saykpe2QoJ0R1cGxpY2F0ZSBrZXkgIicraysnIicpfW9ba109digpO3coKTtpZihiPT09J30nKXtuKCd9Jyk7cmV0dXJuIG99bignLCcpO3coKX19ZCgiQmFkIG9iamVjdCIpfTt2PWZ1bmN0aW9uKCl7dygpO3N3aXRjaChiKXtjYXNlJ3snOnJldHVybiBvKCk7Y2FzZSdbJzpyZXR1cm4gaigpO2Nhc2UnIic6Y2FzZSdcJyc6cmV0dXJuIHMoKTtjYXNlJy0nOnJldHVybiBmKCk7ZGVmYXVsdDpyZXR1cm4gYj49JzAnJiZiPD0nOSc/ZigpOmgoKX19O3JldHVybiBmdW5jdGlvbihjLGkpe3ZhciByO3Q9YzthPWl8fDA7Yj0nICc7cj12KCk7aWYoaXNOYU4oaSkpe3coKTtpZihiKXtkKCJTeW50YXggZXJyb3IiKX1yZXR1cm4gcn1lbHNle3JldHVybntyZXN1bHQ6cixhdDphLTF9fX19KCkpO3JldHVybiBxfSxmYWxzZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ2pxdWVyeS5zYXAuc2pheCcpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ2pxdWVyeS5zYXAuc2pheCcpO3NhcC51aS5kZWZpbmUoImpxdWVyeS5zYXAuc2pheCIsWydqcXVlcnkuc2FwLmdsb2JhbCddLGZ1bmN0aW9uKHEpeyJ1c2Ugc3RyaWN0IjtxLnNhcC5zamF4U2V0dGluZ3M9e2NvbXBsZXhSZXN1bHQ6dHJ1ZSxmYWxsYmFjazp1bmRlZmluZWR9O3Euc2FwLnNqYXg9ZnVuY3Rpb24gc2pheChvKXt2YXIgcz1xLmV4dGVuZCh0cnVlLHt9LHEuc2FwLnNqYXhTZXR0aW5ncyxvLHthc3luYzpmYWxzZSxzdWNjZXNzOmZ1bmN0aW9uKGQsdCx4KXtyPXtzdWNjZXNzOnRydWUsZGF0YTpkLHN0YXR1czp0LHN0YXR1c0NvZGU6eCYmeC5zdGF0dXN9fSxlcnJvcjpmdW5jdGlvbih4LHQsZSl7cj17c3VjY2VzczpmYWxzZSxkYXRhOnVuZGVmaW5lZCxzdGF0dXM6dCxlcnJvcjplLHN0YXR1c0NvZGU6eC5zdGF0dXN9fX0pO3ZhciByPXVuZGVmaW5lZDtxLmFqYXgocyk7aWYoIXMuY29tcGxleFJlc3VsdCl7cmV0dXJuIHIuc3VjY2Vzcz9yLmRhdGE6cy5mYWxsYmFja31yZXR1cm4gcn07cS5zYXAuc3luY0hlYWQ9ZnVuY3Rpb24odSl7cmV0dXJuIHEuc2FwLnNqYXgoe3R5cGU6J0hFQUQnLHVybDp1fSkuc3VjY2Vzc307cS5zYXAuc3luY0dldD1mdW5jdGlvbiBzeW5jR2V0KHUsZCxEKXtyZXR1cm4gcS5zYXAuc2pheCh7dXJsOnUsZGF0YTpkLHR5cGU6J0dFVCcsZGF0YVR5cGU6RHx8J3RleHQnfSl9O3Euc2FwLnN5bmNQb3N0PWZ1bmN0aW9uIHN5bmNQb3N0KHUsZCxEKXtyZXR1cm4gcS5zYXAuc2pheCh7dXJsOnUsZGF0YTpkLHR5cGU6J1BPU1QnLGRhdGFUeXBlOkR8fCd0ZXh0J30pfTtxLnNhcC5zeW5jR2V0VGV4dD1mdW5jdGlvbiBzeW5jR2V0VGV4dCh1LGQsZil7cmV0dXJuIHEuc2FwLnNqYXgoe3VybDp1LGRhdGE6ZCx0eXBlOidHRVQnLGRhdGFUeXBlOid0ZXh0JyxmYWxsYmFjazpmLGNvbXBsZXhSZXN1bHQ6KGFyZ3VtZW50cy5sZW5ndGg8Myl9KX07cS5zYXAuc3luY0dldEpTT049ZnVuY3Rpb24gc3luY0dldEpTT04odSxkLGYpe3JldHVybiBxLnNhcC5zamF4KHt1cmw6dSxkYXRhOmR8fG51bGwsdHlwZTonR0VUJyxkYXRhVHlwZTonanNvbicsZmFsbGJhY2s6Zixjb21wbGV4UmVzdWx0Oihhcmd1bWVudHMubGVuZ3RoPDMpfSl9O3JldHVybiBxfSxmYWxzZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ2pxdWVyeS5zYXAuc3RvcmFnZScpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ2pxdWVyeS5zYXAuc3RvcmFnZScpO3NhcC51aS5kZWZpbmUoImpxdWVyeS5zYXAuc3RvcmFnZSIsWydqcXVlcnkuc2FwLmdsb2JhbCddLGZ1bmN0aW9uKHEpeyJ1c2Ugc3RyaWN0Ijt2YXIgcz0hISh3aW5kb3cuSlNPTiYmSlNPTi5wYXJzZSYmSlNPTi5zdHJpbmdpZnkpO3ZhciBTPSJzdGF0ZS5rZXlfIjt2YXIgZj1mdW5jdGlvbihhLGIpe3ZhciB0PSJ1bmtub3duIixQPWJ8fFM7UCs9Ii0iO3ZhciBUPVArIl9fX3NhcHVpNVRFU1RfX18iLGM9dHJ1ZSxvO2lmKCFhfHx0eXBlb2YoYSk9PT0ic3RyaW5nIil7dD1hfHwic2Vzc2lvbiI7dHJ5e289d2luZG93W3QrIlN0b3JhZ2UiXX1jYXRjaChlKXtvPW51bGx9dHJ5e2lmKG8pe28uc2V0SXRlbShULCIxIik7by5yZW1vdmVJdGVtKFQpfX1jYXRjaChlKXtjPWZhbHNlO289bnVsbH19ZWxzZSBpZih0eXBlb2YoYSk9PT0ib2JqZWN0Iil7dD1hLmdldFR5cGU/YS5nZXRUeXBlKCk6InVua25vd24iO289YX12YXIgZD0hIW87dGhpcy5pc1N1cHBvcnRlZD1mdW5jdGlvbigpe2lmKCFkKXtyZXR1cm4gZmFsc2V9aWYodHlwZW9mKG8uaXNTdXBwb3J0ZWQpPT0iZnVuY3Rpb24iKXtyZXR1cm4gby5pc1N1cHBvcnRlZCgpfXJldHVybiB0cnVlfTt0aGlzLnB1dD1mdW5jdGlvbihpLGcpe2lmKHRoaXMuaXNTdXBwb3J0ZWQoKSYmaSl7dHJ5e28uc2V0SXRlbShQK2kscz9KU09OLnN0cmluZ2lmeShnKTpnKTtyZXR1cm4gdHJ1ZX1jYXRjaChlKXtyZXR1cm4gZmFsc2V9fWVsc2V7cmV0dXJuIGZhbHNlfX07dGhpcy5nZXQ9ZnVuY3Rpb24oaSl7aWYodGhpcy5pc1N1cHBvcnRlZCgpJiZpKXt0cnl7dmFyIEk9by5nZXRJdGVtKFAraSk7cmV0dXJuIHM/SlNPTi5wYXJzZShJKTpJfWNhdGNoKGUpe3JldHVybiBudWxsfX1lbHNle3JldHVybiBudWxsfX07dGhpcy5yZW1vdmU9ZnVuY3Rpb24oaSl7aWYodGhpcy5pc1N1cHBvcnRlZCgpJiZpKXt0cnl7by5yZW1vdmVJdGVtKFAraSk7cmV0dXJuIHRydWV9Y2F0Y2goZSl7cmV0dXJuIGZhbHNlfX1lbHNle3JldHVybiBmYWxzZX19O3RoaXMucmVtb3ZlQWxsPWZ1bmN0aW9uKEkpe2lmKHRoaXMuaXNTdXBwb3J0ZWQoKSYmby5sZW5ndGgmJihkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyPy9mdW5jdGlvbi86L2Z1bmN0aW9ufG9iamVjdC8pLnRlc3QodHlwZW9mKG8ua2V5KSkpe3RyeXt2YXIgbD1vLmxlbmd0aDt2YXIgaz1bXTt2YXIgZyxpO3ZhciBwPVArKEl8fCIiKTtmb3IoaT0wO2k8bDtpKyspe2c9by5rZXkoaSk7aWYoZyYmZy5pbmRleE9mKHApPT0wKXtrLnB1c2goZyl9fWZvcihpPTA7aTxrLmxlbmd0aDtpKyspe28ucmVtb3ZlSXRlbShrW2ldKX1yZXR1cm4gdHJ1ZX1jYXRjaChlKXtyZXR1cm4gZmFsc2V9fWVsc2V7cmV0dXJuIGZhbHNlfX07dGhpcy5jbGVhcj1mdW5jdGlvbigpe2lmKHRoaXMuaXNTdXBwb3J0ZWQoKSl7dHJ5e28uY2xlYXIoKTtyZXR1cm4gdHJ1ZX1jYXRjaChlKXtyZXR1cm4gZmFsc2V9fWVsc2V7cmV0dXJuIGZhbHNlfX07dGhpcy5nZXRUeXBlPWZ1bmN0aW9uKCl7cmV0dXJuIHR9fTt2YXIgbT17fTtxLnNhcC5zdG9yYWdlPWZ1bmN0aW9uKG8saSl7aWYoIW8pe289cS5zYXAuc3RvcmFnZS5UeXBlLnNlc3Npb259aWYodHlwZW9mKG8pPT09InN0cmluZyImJnEuc2FwLnN0b3JhZ2UuVHlwZVtvXSl7dmFyIGs9bztpZihpJiZpIT1TKXtrPW8rIl8iK2l9cmV0dXJuIG1ba118fChtW2tdPW5ldyBmKG8saSkpfXJldHVybiBuZXcgZihvLGkpfTtxLnNhcC5zdG9yYWdlLlR5cGU9e2xvY2FsOiJsb2NhbCIsc2Vzc2lvbjoic2Vzc2lvbiIsZ2xvYmFsOiJnbG9iYWwifTtmLmFwcGx5KHEuc2FwLnN0b3JhZ2UpO21bcS5zYXAuc3RvcmFnZS5UeXBlLnNlc3Npb25dPXEuc2FwLnN0b3JhZ2U7cmV0dXJuIHF9LGZhbHNlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnanF1ZXJ5LnNhcC5zdHJpbmdzJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnanF1ZXJ5LnNhcC5zdHJpbmdzJyk7c2FwLnVpLmRlZmluZSgianF1ZXJ5LnNhcC5zdHJpbmdzIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJ10sZnVuY3Rpb24ocSl7InVzZSBzdHJpY3QiO3Euc2FwLmVuZHNXaXRoPWZ1bmN0aW9uIGVuZHNXaXRoKHMsZSl7aWYodHlwZW9mKGUpIT0ic3RyaW5nInx8ZT09IiIpe3JldHVybiBmYWxzZX12YXIgcD1zLmxhc3RJbmRleE9mKGUpO3JldHVybiBwPj0wJiZwPT1zLmxlbmd0aC1lLmxlbmd0aH07cS5zYXAuZW5kc1dpdGhJZ25vcmVDYXNlPWZ1bmN0aW9uIGVuZHNXaXRoSWdub3JlQ2FzZShzLGUpe2lmKHR5cGVvZihlKSE9InN0cmluZyJ8fGU9PSIiKXtyZXR1cm4gZmFsc2V9cz1zLnRvVXBwZXJDYXNlKCk7ZT1lLnRvVXBwZXJDYXNlKCk7cmV0dXJuIHEuc2FwLmVuZHNXaXRoKHMsZSl9O3Euc2FwLnN0YXJ0c1dpdGg9ZnVuY3Rpb24gc3RhcnRzV2l0aChzLFMpe2lmKHR5cGVvZihTKSE9InN0cmluZyJ8fFM9PSIiKXtyZXR1cm4gZmFsc2V9aWYocz09Uyl7cmV0dXJuIHRydWV9cmV0dXJuIHMuaW5kZXhPZihTKT09MH07cS5zYXAuc3RhcnRzV2l0aElnbm9yZUNhc2U9ZnVuY3Rpb24gc3RhcnRzV2l0aElnbm9yZUNhc2UocyxTKXtpZih0eXBlb2YoUykhPSJzdHJpbmcifHxTPT0iIil7cmV0dXJuIGZhbHNlfXM9cy50b1VwcGVyQ2FzZSgpO1M9Uy50b1VwcGVyQ2FzZSgpO3JldHVybiBxLnNhcC5zdGFydHNXaXRoKHMsUyl9O3Euc2FwLmNoYXJUb1VwcGVyQ2FzZT1mdW5jdGlvbiBjaGFyVG9VcHBlckNhc2UocyxwKXtpZighcyl7cmV0dXJuIHN9aWYoIXB8fGlzTmFOKHApfHxwPD0wfHxwPj1zLmxlbmd0aCl7cD0wfXZhciBDPXMuY2hhckF0KHApLnRvVXBwZXJDYXNlKCk7aWYocD4wKXtyZXR1cm4gcy5zdWJzdHJpbmcoMCxwKStDK3Muc3Vic3RyaW5nKHArMSl9cmV0dXJuIEMrcy5zdWJzdHJpbmcocCsxKX07cS5zYXAucGFkTGVmdD1mdW5jdGlvbiBwYWRMZWZ0KHMscCxsKXtpZighcyl7cz0iIn13aGlsZShzLmxlbmd0aDxsKXtzPXArc31yZXR1cm4gc307cS5zYXAucGFkUmlnaHQ9ZnVuY3Rpb24gcGFkUmlnaHQocyxwLGwpe2lmKCFzKXtzPSIifXdoaWxlKHMubGVuZ3RoPGwpe3M9cytwfXJldHVybiBzfTt2YXIgcj0vLSguKS9pZztxLnNhcC5jYW1lbENhc2U9ZnVuY3Rpb24gY2FtZWxDYXNlKHMpe3JldHVybiBzLnJlcGxhY2UocixmdW5jdGlvbihtLEMpe3JldHVybiBDLnRvVXBwZXJDYXNlKCl9KX07dmFyIGE9LyhbQS1aXSkvZztxLnNhcC5oeXBoZW49ZnVuY3Rpb24gaHlwaGVuKHMpe3JldHVybiBzLnJlcGxhY2UoYSxmdW5jdGlvbihtLEMpe3JldHVybiItIitDLnRvTG93ZXJDYXNlKCl9KX07dmFyIGI9L1stW1xde30oKSorPy4sXFxeJHwjXHNdL2c7cS5zYXAuZXNjYXBlUmVnRXhwPWZ1bmN0aW9uIGVzY2FwZVJlZ0V4cChzKXtyZXR1cm4gcy5yZXBsYWNlKGIsIlxcJCYiKX07cS5zYXAuZm9ybWF0TWVzc2FnZT1mdW5jdGlvbiBmb3JtYXRNZXNzYWdlKHAsdil7aWYoYXJndW1lbnRzLmxlbmd0aD4yfHwodiE9bnVsbCYmIXEuaXNBcnJheSh2KSkpe3Y9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpfXY9dnx8W107cmV0dXJuIHAucmVwbGFjZShjLGZ1bmN0aW9uKCQsZCxlLGYsbyl7aWYoZCl7cmV0dXJuIicifWVsc2UgaWYoZSl7cmV0dXJuIGUucmVwbGFjZSgvJycvZywiJyIpfWVsc2UgaWYoZil7cmV0dXJuIFN0cmluZyh2W3BhcnNlSW50KGYsMTApXSl9dGhyb3cgbmV3IEVycm9yKCJmb3JtYXRNZXNzYWdlOiBwYXR0ZXJuIHN5bnRheCBlcnJvciBhdCBwb3MuICIrbyl9KX07dmFyIGM9LygnJyl8JyhbXiddKyg/OicnW14nXSopKikoPzonfCQpfFx7KFswLTldKyg/OlxzKixbXnt9XSopPylcfXxbe31dL2c7cmV0dXJuIHF9LGZhbHNlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnanF1ZXJ5LnNhcC54bWwnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdqcXVlcnkuc2FwLnhtbCcpO3NhcC51aS5kZWZpbmUoImpxdWVyeS5zYXAueG1sIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL0RldmljZSddLGZ1bmN0aW9uKHEsRCl7InVzZSBzdHJpY3QiO3Euc2FwLnBhcnNlWE1MPWZ1bmN0aW9uIHBhcnNlWE1MKHgpe3ZhciBYO2lmKHdpbmRvdy5ET01QYXJzZXIpe3ZhciBwPW5ldyBET01QYXJzZXIoKTt0cnl7WD1wLnBhcnNlRnJvbVN0cmluZyh4LCJ0ZXh0L3htbCIpfWNhdGNoKGUpe3ZhciBQPXEuc2FwLmdldFBhcnNlRXJyb3IoWCk7WD17fTtQLnJlYXNvbj1lLm1lc3NhZ2U7WC5wYXJzZUVycm9yPVA7cmV0dXJuIFh9fWVsc2V7WD1uZXcgQWN0aXZlWE9iamVjdCgiTWljcm9zb2Z0LlhNTERPTSIpO1guYXN5bmM9ZmFsc2U7WC5sb2FkWE1MKHgpfXZhciBQPXEuc2FwLmdldFBhcnNlRXJyb3IoWCk7aWYoUCl7aWYoIVgucGFyc2VFcnJvcil7WC5wYXJzZUVycm9yPVB9fXJldHVybiBYfTtxLnNhcC5zZXJpYWxpemVYTUw9ZnVuY3Rpb24gc2VyaWFsaXplWE1MKHgpe3ZhciBYPSIiO2lmKHdpbmRvdy5BY3RpdmVYT2JqZWN0KXtYPXgueG1sO2lmKFgpe3JldHVybiBYfX1pZih3aW5kb3cuWE1MU2VyaWFsaXplcil7dmFyIHM9bmV3IFhNTFNlcmlhbGl6ZXIoKTtYPXMuc2VyaWFsaXplVG9TdHJpbmcoeCl9cmV0dXJuIFh9O3Euc2FwLmlzRXF1YWxOb2RlPWZ1bmN0aW9uKG4sTil7aWYobj09PU4pcmV0dXJuIHRydWU7aWYoIW58fCFOKXJldHVybiBmYWxzZTtpZihuLmlzRXF1YWxOb2RlKXtyZXR1cm4gbi5pc0VxdWFsTm9kZShOKX1pZihuLm5vZGVUeXBlIT1OLm5vZGVUeXBlKXJldHVybiBmYWxzZTtpZihuLm5vZGVWYWx1ZSE9Ti5ub2RlVmFsdWUpcmV0dXJuIGZhbHNlO2lmKG4uYmFzZU5hbWUhPU4uYmFzZU5hbWUpcmV0dXJuIGZhbHNlO2lmKG4ubm9kZU5hbWUhPU4ubm9kZU5hbWUpcmV0dXJuIGZhbHNlO2lmKG4ubmFtZVNwYWNlVVJJIT1OLm5hbWVTcGFjZVVSSSlyZXR1cm4gZmFsc2U7aWYobi5wcmVmaXghPU4ucHJlZml4KXJldHVybiBmYWxzZTtpZihuLm5vZGVUeXBlIT0xKXJldHVybiB0cnVlO2lmKG4uYXR0cmlidXRlcy5sZW5ndGghPU4uYXR0cmlidXRlcy5sZW5ndGgpcmV0dXJuIGZhbHNlO2Zvcih2YXIgaT0wO2k8bi5hdHRyaWJ1dGVzLmxlbmd0aDtpKyspe2lmKCFxLnNhcC5pc0VxdWFsTm9kZShuLmF0dHJpYnV0ZXNbaV0sTi5hdHRyaWJ1dGVzW2ldKSl7cmV0dXJuIGZhbHNlfX1pZihuLmNoaWxkTm9kZXMubGVuZ3RoIT1OLmNoaWxkTm9kZXMubGVuZ3RoKXJldHVybiBmYWxzZTtmb3IodmFyIGk9MDtpPG4uY2hpbGROb2Rlcy5sZW5ndGg7aSsrKXtpZighcS5zYXAuaXNFcXVhbE5vZGUobi5jaGlsZE5vZGVzW2ldLE4uY2hpbGROb2Rlc1tpXSkpe3JldHVybiBmYWxzZX19cmV0dXJuIHRydWV9O3Euc2FwLmdldFBhcnNlRXJyb3I9ZnVuY3Rpb24gZ2V0UGFyc2VFcnJvcihkKXt2YXIgcD17ZXJyb3JDb2RlOi0xLHVybDoiIixyZWFzb246InVua25vd24gZXJyb3IiLHNyY1RleHQ6IiIsbGluZTotMSxsaW5lcG9zOi0xLGZpbGVwb3M6LTF9O2lmKCEhRC5icm93c2VyLmludGVybmV0X2V4cGxvcmVyJiZkJiZkLnBhcnNlRXJyb3ImJmQucGFyc2VFcnJvci5lcnJvckNvZGUhPTApe3JldHVybiBkLnBhcnNlRXJyb3J9aWYoISFELmJyb3dzZXIuZmlyZWZveCYmZCYmZC5kb2N1bWVudEVsZW1lbnQmJmQuZG9jdW1lbnRFbGVtZW50LnRhZ05hbWU9PSJwYXJzZXJlcnJvciIpe3ZhciBlPWQuZG9jdW1lbnRFbGVtZW50LmZpcnN0Q2hpbGQubm9kZVZhbHVlLHI9L1hNTCBQYXJzaW5nIEVycm9yOiAoLiopXG5Mb2NhdGlvbjogKC4qKVxuTGluZSBOdW1iZXIgKFxkKyksIENvbHVtbiAoXGQrKTooLiopLztpZihyLnRlc3QoZSkpe3AucmVhc29uPVJlZ0V4cC4kMTtwLnVybD1SZWdFeHAuJDI7cC5saW5lPXBhcnNlSW50KFJlZ0V4cC4kMywxMCk7cC5saW5lcG9zPXBhcnNlSW50KFJlZ0V4cC4kNCwxMCk7cC5zcmNUZXh0PVJlZ0V4cC4kNX1yZXR1cm4gcH1pZighIUQuYnJvd3Nlci53ZWJraXQmJmQmJmQuZG9jdW1lbnRFbGVtZW50JiZkLmRvY3VtZW50RWxlbWVudC50YWdOYW1lPT0iaHRtbCImJmQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoInBhcnNlcmVycm9yIikubGVuZ3RoPjApe3ZhciBlPXEuc2FwLnNlcmlhbGl6ZVhNTChkKSxyPS9lcnJvciBvbiBsaW5lIChcZCspIGF0IGNvbHVtbiAoXGQrKTogKFtePF0qKS87aWYoci50ZXN0KGUpKXtwLnJlYXNvbj1SZWdFeHAuJDM7cC51cmw9IiI7cC5saW5lPXBhcnNlSW50KFJlZ0V4cC4kMSwxMCk7cC5saW5lcG9zPXBhcnNlSW50KFJlZ0V4cC4kMiwxMCk7cC5zcmNUZXh0PSIifXJldHVybiBwfWlmKCFkfHwhZC5kb2N1bWVudEVsZW1lbnQpe3JldHVybiBwfXJldHVybntlcnJvckNvZGU6MH19O3JldHVybiBxfSxmYWxzZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5iYXNlLkJpbmRpbmdQYXJzZXInKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuYmFzZS5CaW5kaW5nUGFyc2VyJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2Jhc2UvQmluZGluZ1BhcnNlciIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ2pxdWVyeS5zYXAuc2NyaXB0J10sZnVuY3Rpb24ocSl7InVzZSBzdHJpY3QiO3ZhciByPS9eXHtccypbYS16QS1aX11bYS16QS1aMC05X10qXHMqOi87dmFyIGE9LyhcXFtcXFx7XH1dKXwoXHspL2c7dmFyIGI9LyhbXFxce1x9XSkvZztmdW5jdGlvbiBjKGYpe3ZhciBGPWZ1bmN0aW9uKHYpe3ZhciBSPVtdLGw9Zi5sZW5ndGgsaTtmb3IoaT0wO2k8bDtpKyspe2lmKHR5cGVvZiBmW2ldPT09Im51bWJlciIpe1IucHVzaChhcmd1bWVudHNbZltpXV0pfWVsc2V7Ui5wdXNoKGZbaV0pfX1yZXR1cm4gUi5qb2luKCcnKX07Ri50ZXh0RnJhZ21lbnRzPWY7cmV0dXJuIEZ9ZnVuY3Rpb24gZChwKXt2YXIgUD1wLmluZGV4T2YoIj4iKSxvPXtwYXRoOnB9O2lmKFA+MCl7by5tb2RlbD1wLnNsaWNlKDAsUCk7by5wYXRoPXAuc2xpY2UoUCsxKX1yZXR1cm4gb312YXIgQj17fTtCLl9rZWVwQmluZGluZ1N0cmluZ3M9ZmFsc2U7Qi5zaW1wbGVQYXJzZXI9ZnVuY3Rpb24ocyxDKXtpZihxLnNhcC5zdGFydHNXaXRoKHMsInsiKSYmcS5zYXAuZW5kc1dpdGgocywifSIpKXtyZXR1cm4gZChzLnNsaWNlKDEsLTEpKX19O0Iuc2ltcGxlUGFyc2VyLmVzY2FwZT1mdW5jdGlvbih2KXtyZXR1cm4gdn07Qi5jb21wbGV4UGFyc2VyPWZ1bmN0aW9uKHMsQyx1KXt2YXIgZT1xLnNhcC5wYXJzZUpTLGY9e3BhcnRzOltdfSxGPVtdLFUsUCxwPTAsbSxnO2Z1bmN0aW9uIGgobyxrKXtpZih0eXBlb2Ygb1trXT09PSJzdHJpbmciKXt2YXIgbj1vW2tdO2lmKHEuc2FwLnN0YXJ0c1dpdGgob1trXSwiLiIpKXtvW2tdPXEucHJveHkocS5zYXAuZ2V0T2JqZWN0KG9ba10uc2xpY2UoMSksdW5kZWZpbmVkLEMpLEMpfWVsc2V7b1trXT1xLnNhcC5nZXRPYmplY3Qob1trXSl9aWYodHlwZW9mKG9ba10pIT09ImZ1bmN0aW9uIil7cS5zYXAubG9nLmVycm9yKGsrIiBmdW5jdGlvbiAiK24rIiBub3QgZm91bmQhIil9fX1mdW5jdGlvbiBpKG8sayl7dmFyIGw7aWYodHlwZW9mIG9ba109PT0ic3RyaW5nIil7aWYocS5zYXAuc3RhcnRzV2l0aChvW2tdLCIuIikpe2w9cS5zYXAuZ2V0T2JqZWN0KG9ba10uc2xpY2UoMSksdW5kZWZpbmVkLEMpfWVsc2V7bD1xLnNhcC5nZXRPYmplY3Qob1trXSl9aWYodHlwZW9mIGw9PT0iZnVuY3Rpb24iKXtvW2tdPW5ldyBsKG8uZm9ybWF0T3B0aW9ucyxvLmNvbnN0cmFpbnRzKX1lbHNle29ba109bH1kZWxldGUgby5mb3JtYXRPcHRpb25zO2RlbGV0ZSBvLmNvbnN0cmFpbnRzfX1mdW5jdGlvbiBqKG8sayxsKXt2YXIgbjtpZighKHR5cGVvZiBvW2tdPT09Im9iamVjdCJ8fHEuaXNBcnJheShvW2tdKSkpe3JldHVybn1pZihxLmlzQXJyYXkob1trXSkpe3EuZWFjaChvW2tdLGZ1bmN0aW9uKEksTyl7aihvW2tdLEksayl9KX1lbHNle2lmKGs9PT0iZmlsdGVycyJ8fGw9PT0iZmlsdGVycyIpe249cS5zYXAuZ2V0T2JqZWN0KCJzYXAudWkubW9kZWwuRmlsdGVyIil9ZWxzZSBpZihrPT09InNvcnRlciJ8fGw9PT0ic29ydGVyIil7bj1xLnNhcC5nZXRPYmplY3QoInNhcC51aS5tb2RlbC5Tb3J0ZXIiKTtoKG9ba10sImdyb3VwIil9aWYobil7b1trXT1uZXcgbihvW2tdKX19fXdoaWxlKG09YS5leGVjKHMpKXtpZihwPG0uaW5kZXgpe0YucHVzaChzLnNsaWNlKHAsbS5pbmRleCkpfWlmKG1bMV0pe0YucHVzaChtWzFdLnNsaWNlKDEpKTtVPXRydWV9ZWxzZXtpZihyLnRlc3Qocy5zbGljZShtLmluZGV4KSkpe1A9ZShzLG0uaW5kZXgpO2koUC5yZXN1bHQsJ3R5cGUnKTtqKFAucmVzdWx0LCdmaWx0ZXJzJyk7aihQLnJlc3VsdCwnc29ydGVyJyk7aChQLnJlc3VsdCwnZm9ybWF0dGVyJyk7aChQLnJlc3VsdCwnZmFjdG9yeScpO2goUC5yZXN1bHQsJ2dyb3VwSGVhZGVyRmFjdG9yeScpO0YucHVzaChmLnBhcnRzLmxlbmd0aCk7Zi5wYXJ0cy5wdXNoKFAucmVzdWx0KTthLmxhc3RJbmRleD1QLmF0fWVsc2V7Zz1zLmluZGV4T2YoJ30nLG0uaW5kZXgpO2lmKGc8bS5pbmRleCl7dGhyb3cgbmV3IFN5bnRheEVycm9yKCJubyBjbG9zaW5nIGJyYWNlcyBmb3VuZCBpbiAnIitzKyInIGFmdGVyIHBvczoiK20uaW5kZXgpfUYucHVzaChmLnBhcnRzLmxlbmd0aCk7Zi5wYXJ0cy5wdXNoKGQocy5zbGljZShtLmluZGV4KzEsZykpKTthLmxhc3RJbmRleD1nKzF9fXA9YS5sYXN0SW5kZXh9aWYocDxzLmxlbmd0aCl7Ri5wdXNoKHMuc2xpY2UocCkpfWlmKGYucGFydHMubGVuZ3RoPjApe2lmKEYubGVuZ3RoPT09MSl7Zj1mLnBhcnRzWzBdfWVsc2V7Zi5mb3JtYXR0ZXI9YyhGKX1pZihCLl9rZWVwQmluZGluZ1N0cmluZ3Mpe2YuYmluZGluZ1N0cmluZz1zfXJldHVybiBmfWVsc2UgaWYodSYmVSl7cmV0dXJuIEYuam9pbignJyl9fTtCLmNvbXBsZXhQYXJzZXIuZXNjYXBlPWZ1bmN0aW9uKHYpe3JldHVybiB2LnJlcGxhY2UoYiwiXFwkMSIpfTtyZXR1cm4gQn0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5iYXNlLkRhdGFUeXBlJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmJhc2UuRGF0YVR5cGUnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvYmFzZS9EYXRhVHlwZSIsWydqcXVlcnkuc2FwLmdsb2JhbCddLGZ1bmN0aW9uKHEpeyJ1c2Ugc3RyaWN0Ijt2YXIgRD1mdW5jdGlvbigpe3Rocm93IG5ldyBFcnJvcigpfTtELnByb3RvdHlwZS5nZXROYW1lPWZ1bmN0aW9uKCl7cmV0dXJuIHVuZGVmaW5lZH07RC5wcm90b3R5cGUuZ2V0QmFzZVR5cGU9ZnVuY3Rpb24oKXtyZXR1cm4gdW5kZWZpbmVkfTtELnByb3RvdHlwZS5nZXRDb21wb25lbnRUeXBlPWZ1bmN0aW9uKCl7cmV0dXJuIHVuZGVmaW5lZH07RC5wcm90b3R5cGUuZ2V0RGVmYXVsdFZhbHVlPWZ1bmN0aW9uKCl7cmV0dXJuIHVuZGVmaW5lZH07RC5wcm90b3R5cGUuaXNBcnJheVR5cGU9ZnVuY3Rpb24oKXtyZXR1cm4gdW5kZWZpbmVkfTtELnByb3RvdHlwZS5wYXJzZVZhbHVlPWZ1bmN0aW9uKHYpe3ZhciB0PXRoaXMuZ2V0TmFtZSgpO2lmKHQ9PSJzdHJpbmciKXtyZXR1cm4gdn1lbHNlIGlmKHQ9PSJib29sZWFuIil7cmV0dXJuIHY9PSJ0cnVlIn1lbHNlIGlmKHQ9PSJpbnQiKXtyZXR1cm4gcGFyc2VJbnQodiwxMCl9ZWxzZSBpZih0PT0iZmxvYXQiKXtyZXR1cm4gcGFyc2VGbG9hdCh2KX1lbHNlIGlmKHQ9PSJvYmplY3QiKXtyZXR1cm4gdj9xLnBhcnNlSlNPTih2KTpudWxsfWVsc2V7cmV0dXJuIHZ9fTtELnByb3RvdHlwZS5pc1ZhbGlkPXVuZGVmaW5lZDtELnByb3RvdHlwZS5zZXROb3JtYWxpemVyPWZ1bmN0aW9uKG4pe3RoaXMuX2ZuTm9ybWFsaXplcj1ufTtELnByb3RvdHlwZS5ub3JtYWxpemU9ZnVuY3Rpb24odil7aWYodHlwZW9mIHRoaXMuX2ZuTm9ybWFsaXplcj09PSJmdW5jdGlvbiIpe3JldHVybiB0aGlzLl9mbk5vcm1hbGl6ZXIodil9ZWxzZXtyZXR1cm4gdn19OyhmdW5jdGlvbigpe2Z1bmN0aW9uIGMobixzLGIpe3M9c3x8e307Yj1ifHxELnByb3RvdHlwZTt2YXIgdD1xLnNhcC5uZXdPYmplY3QoYik7dC5nZXROYW1lPWZ1bmN0aW9uKCl7cmV0dXJuIG59O2lmKHMuaGFzT3duUHJvcGVydHkoImRlZmF1bHRWYWx1ZSIpKXt2YXIgZD1zLmRlZmF1bHRWYWx1ZTt0LmdldERlZmF1bHRWYWx1ZT1mdW5jdGlvbigpe3JldHVybiBkfX1pZihzLmhhc093blByb3BlcnR5KCJpc1ZhbGlkIikpe3ZhciBpPXMuaXNWYWxpZDt0LmlzVmFsaWQ9Yi5pc1ZhbGlkP2Z1bmN0aW9uKHYpe2lmKCFiLmlzVmFsaWQodikpe3JldHVybiBmYWxzZX1yZXR1cm4gaSh2KX06aX07dC5pc0FycmF5VHlwZT1mdW5jdGlvbigpe3JldHVybiBmYWxzZX07cmV0dXJuIHR9ZnVuY3Rpb24gYShiKXt2YXIgdD1xLnNhcC5uZXdPYmplY3QoRC5wcm90b3R5cGUpO3QuZ2V0TmFtZT1mdW5jdGlvbigpe3JldHVybiBiLmdldE5hbWUoKSsiW10ifTt0LmdldENvbXBvbmVudFR5cGU9ZnVuY3Rpb24oKXtyZXR1cm4gYn07dC5pc1ZhbGlkPWZ1bmN0aW9uKHYpe2lmKHY9PT1udWxsKXtyZXR1cm4gdHJ1ZX1pZihxLmlzQXJyYXkodikpe2Zvcih2YXIgaT0wO2k8di5sZW5ndGg7aSsrKXtpZighYi5pc1ZhbGlkKHZbaV0pKXtyZXR1cm4gZmFsc2V9fXJldHVybiB0cnVlfXJldHVybiBmYWxzZX07dC5wYXJzZVZhbHVlPWZ1bmN0aW9uKHYpe3ZhciBWPXYuc3BsaXQoIiwiKTtmb3IodmFyIGk9MDtpPFYubGVuZ3RoO2krKyl7VltpXT1iLnBhcnNlVmFsdWUoVltpXSl9cmV0dXJuIFZ9O3QuaXNBcnJheVR5cGU9ZnVuY3Rpb24oKXtyZXR1cm4gdHJ1ZX07cmV0dXJuIHR9dmFyIFA9eyJhbnkiOmMoImFueSIse2RlZmF1bHRWYWx1ZTpudWxsLGlzVmFsaWQ6ZnVuY3Rpb24odil7cmV0dXJuIHRydWV9fSksImJvb2xlYW4iOmMoImJvb2xlYW4iLHtkZWZhdWx0VmFsdWU6ZmFsc2UsaXNWYWxpZDpmdW5jdGlvbih2KXtyZXR1cm4gdHlwZW9mIHY9PT0iYm9vbGVhbiJ9fSksImludCI6YygiaW50Iix7ZGVmYXVsdFZhbHVlOjAsaXNWYWxpZDpmdW5jdGlvbih2KXtyZXR1cm4gdHlwZW9mIHY9PT0ibnVtYmVyIiYmTWF0aC5mbG9vcih2KT09dn19KSwiZmxvYXQiOmMoImZsb2F0Iix7ZGVmYXVsdFZhbHVlOjAuMCxpc1ZhbGlkOmZ1bmN0aW9uKHYpe3JldHVybiB0eXBlb2Ygdj09PSJudW1iZXIifX0pLCJzdHJpbmciOmMoInN0cmluZyIse2RlZmF1bHRWYWx1ZToiIixpc1ZhbGlkOmZ1bmN0aW9uKHYpe3JldHVybiB0eXBlb2Ygdj09PSJzdHJpbmcifHx2IGluc3RhbmNlb2YgU3RyaW5nfX0pLCJvYmplY3QiOmMoIm9iamVjdCIse2RlZmF1bHRWYWx1ZTpudWxsLGlzVmFsaWQ6ZnVuY3Rpb24odil7cmV0dXJuIHR5cGVvZiB2PT09Im9iamVjdCJ8fHR5cGVvZiB2PT09ImZ1bmN0aW9uIn19KX07RC5nZXRUeXBlPWZ1bmN0aW9uKHQpe2lmKHQuaW5kZXhPZigiW10iKT4wKXt2YXIgQz10LnN1YnN0cigwLHQubGVuZ3RoLTIpLG89dGhpcy5nZXRUeXBlKEMpO3JldHVybiBvJiZhKG8pfWVsc2V7cmV0dXJuIFBbdF18fHEuc2FwLmdldE9iamVjdCh0KX19O0QuY3JlYXRlVHlwZT1jO3ZhciBJPXt9O0QucmVnaXN0ZXJJbnRlcmZhY2VUeXBlcz1mdW5jdGlvbih0KXtmb3IodmFyIGk9MDtpPHQubGVuZ3RoO2krKyl7cS5zYXAuc2V0T2JqZWN0KHRbaV0sSVt0W2ldXT1uZXcgU3RyaW5nKHRbaV0pKX19O0QuaXNJbnRlcmZhY2VUeXBlPWZ1bmN0aW9uKHQpe3JldHVybiBJLmhhc093blByb3BlcnR5KHQpJiZxLnNhcC5nZXRPYmplY3QodCk9PT1JW3RdfX0oKSk7cmV0dXJuIER9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuYmFzZS5FeGNlcHRpb24nKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuYmFzZS5FeGNlcHRpb24nKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvYmFzZS9FeGNlcHRpb24iLFsnanF1ZXJ5LnNhcC5nbG9iYWwnXSxmdW5jdGlvbihxKXsidXNlIHN0cmljdCI7dmFyIEU9ZnVuY3Rpb24obSl7dGhpcy5uYW1lPSJFeGNlcHRpb24iO3RoaXMubWVzc2FnZT1tfTtyZXR1cm4gRX0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5iYXNlLkludGVyZmFjZScpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5iYXNlLkludGVyZmFjZScpO3NhcC51aS5kZWZpbmUoInNhcC91aS9iYXNlL0ludGVyZmFjZSIsWydqcXVlcnkuc2FwLmdsb2JhbCddLGZ1bmN0aW9uKHEpeyJ1c2Ugc3RyaWN0Ijt2YXIgST1mdW5jdGlvbihvLG0pe2lmKCFvKXtyZXR1cm4gb31mdW5jdGlvbiBjKG8sTSl7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIHQ9b1tNXS5hcHBseShvLGFyZ3VtZW50cyk7cmV0dXJuKHQgaW5zdGFuY2VvZiBzYXAudWkuYmFzZS5PYmplY3QpP3QuZ2V0SW50ZXJmYWNlKCk6dH19aWYoIW0pe3JldHVybnt9fXZhciBNO2Zvcih2YXIgaT0wLGE9bS5sZW5ndGg7aTxhO2krKyl7TT1tW2ldO3RoaXNbTV09YyhvLE0pfX07cmV0dXJuIEl9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuYmFzZS5NZXRhZGF0YScpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5iYXNlLk1ldGFkYXRhJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2Jhc2UvTWV0YWRhdGEiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdqcXVlcnkuc2FwLnNjcmlwdCddLGZ1bmN0aW9uKHEpeyJ1c2Ugc3RyaWN0Ijt2YXIgTT1mdW5jdGlvbihjLEMpe2lmKCFDfHx0eXBlb2YgQy5tZXRhZGF0YSE9PSJvYmplY3QiKXtDPXttZXRhZGF0YTpDfHx7fSxjb25zdHJ1Y3RvcjpxLnNhcC5nZXRPYmplY3QoYyl9O0MubWV0YWRhdGEuX192ZXJzaW9uPTEuMH1DLm1ldGFkYXRhLl9fdmVyc2lvbj1DLm1ldGFkYXRhLl9fdmVyc2lvbnx8Mi4wO2lmKHR5cGVvZiBDLmNvbnN0cnVjdG9yIT09ImZ1bmN0aW9uIil7dGhyb3cgRXJyb3IoImNvbnN0cnVjdG9yIGZvciBjbGFzcyAiK2MrIiBtdXN0IGhhdmUgYmVlbiBkZWNsYXJlZCBiZWZvcmUgY3JlYXRpbmcgbWV0YWRhdGEgZm9yIGl0Iil9dGhpcy5fc0NsYXNzTmFtZT1jO3RoaXMuX29DbGFzcz1DLmNvbnN0cnVjdG9yO3RoaXMuZXh0ZW5kKEMpfTtNLnByb3RvdHlwZS5leHRlbmQ9ZnVuY3Rpb24oYyl7dGhpcy5hcHBseVNldHRpbmdzKGMpO3RoaXMuYWZ0ZXJBcHBseVNldHRpbmdzKCl9O00ucHJvdG90eXBlLmFwcGx5U2V0dGluZ3M9ZnVuY3Rpb24oYyl7dmFyIHQ9dGhpcyxzPWMubWV0YWRhdGEscCxuO2lmKHMuYmFzZVR5cGUpe3ZhciBQPXEuc2FwLmdldE9iamVjdChzLmJhc2VUeXBlKTtpZih0eXBlb2YgUCE9PSJmdW5jdGlvbiIpe3Euc2FwLmxvZy5mYXRhbCgiYmFzZSBjbGFzcyAnIitzLmJhc2VUeXBlKyInIGRvZXMgbm90IGV4aXN0Iil9aWYoUC5nZXRNZXRhZGF0YSl7dGhpcy5fb1BhcmVudD1QLmdldE1ldGFkYXRhKCk7fWVsc2V7dGhpcy5fb1BhcmVudD1uZXcgTShzLmJhc2VUeXBlLHt9KX19ZWxzZXt0aGlzLl9vUGFyZW50PXVuZGVmaW5lZH10aGlzLl9iQWJzdHJhY3Q9ISFzWyJhYnN0cmFjdCJdO3RoaXMuX2JGaW5hbD0hIXNbImZpbmFsIl07dGhpcy5fc1N0ZXJlb3R5cGU9cy5zdGVyZW90eXBlfHwodGhpcy5fb1BhcmVudD90aGlzLl9vUGFyZW50Ll9zU3RlcmVvdHlwZToib2JqZWN0Iik7dGhpcy5fYUludGVyZmFjZXM9cS5zYXAudW5pcXVlKHMuaW50ZXJmYWNlc3x8W10pO3RoaXMuX2FQdWJsaWNNZXRob2RzPXEuc2FwLnVuaXF1ZShzLnB1YmxpY01ldGhvZHN8fFtdKTtwPXRoaXMuX29DbGFzcy5wcm90b3R5cGU7cS5zYXAuZm9ySW4oYyxmdW5jdGlvbihuLHYpe2lmKG4hPT0ibWV0YWRhdGEiJiZuIT09ImNvbnN0cnVjdG9yIil7cFtuXT12O2lmKCFuLm1hdGNoKC9eX3xeb258XmluaXQkfF5leGl0JC8pKXt0Ll9hUHVibGljTWV0aG9kcy5wdXNoKG4pfX19KX07TS5wcm90b3R5cGUuYWZ0ZXJBcHBseVNldHRpbmdzPWZ1bmN0aW9uKCl7aWYodGhpcy5fb1BhcmVudCl7dGhpcy5fYUFsbFB1YmxpY01ldGhvZHM9cS5zYXAudW5pcXVlKHRoaXMuX29QYXJlbnQuX2FBbGxQdWJsaWNNZXRob2RzLmNvbmNhdCh0aGlzLl9hUHVibGljTWV0aG9kcykpfWVsc2V7dGhpcy5fYUFsbFB1YmxpY01ldGhvZHM9dGhpcy5fYVB1YmxpY01ldGhvZHN9fTtNLnByb3RvdHlwZS5nZXRTdGVyZW90eXBlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NTdGVyZW90eXBlfTtNLnByb3RvdHlwZS5nZXROYW1lPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NDbGFzc05hbWV9O00ucHJvdG90eXBlLmdldENsYXNzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29DbGFzc307TS5wcm90b3R5cGUuZ2V0UGFyZW50PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29QYXJlbnR9O00ucHJvdG90eXBlLmdldFB1YmxpY01ldGhvZHM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYVB1YmxpY01ldGhvZHN9O00ucHJvdG90eXBlLmdldEFsbFB1YmxpY01ldGhvZHM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYUFsbFB1YmxpY01ldGhvZHN9O00ucHJvdG90eXBlLmdldEludGVyZmFjZXM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYUludGVyZmFjZXN9O00ucHJvdG90eXBlLmlzSW5zdGFuY2VPZj1mdW5jdGlvbihJKXtpZih0aGlzLl9vUGFyZW50KXtpZih0aGlzLl9vUGFyZW50LmlzSW5zdGFuY2VPZihJKSl7cmV0dXJuIHRydWV9fTt2YXIgYT10aGlzLl9hSW50ZXJmYWNlcztmb3IodmFyIGk9MCxsPWEubGVuZ3RoO2k8bDtpKyspe2lmKGFbaV09PT1JKXtyZXR1cm4gdHJ1ZX19cmV0dXJuIGZhbHNlfTtNLnByb3RvdHlwZS5pc0Fic3RyYWN0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2JBYnN0cmFjdH07TS5wcm90b3R5cGUuaXNGaW5hbD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9iRmluYWx9O00ucHJvdG90eXBlLmFkZFB1YmxpY01ldGhvZHM9ZnVuY3Rpb24obSl7dmFyIG49KG0gaW5zdGFuY2VvZiBBcnJheSk/bTphcmd1bWVudHM7ZnVuY3Rpb24gdShhLHYpe0FycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KGEsdik7cS5zYXAudW5pcXVlKGEpfXUodGhpcy5fYVB1YmxpY01ldGhvZHMsbik7dSh0aGlzLl9hQWxsUHVibGljTWV0aG9kcyxuKX07TS5jcmVhdGVDbGFzcz1mdW5jdGlvbihiLGMsQyxGKXtpZih0eXBlb2YgYj09PSJzdHJpbmciKXtGPUM7Qz1jO2M9YjtiPW51bGx9Rj1GfHxNO2lmKHR5cGVvZiBGLnByZXByb2Nlc3NDbGFzc0luZm89PT0iZnVuY3Rpb24iKXtDPUYucHJlcHJvY2Vzc0NsYXNzSW5mbyhDKX1DPUN8fHt9O0MubWV0YWRhdGE9Qy5tZXRhZGF0YXx8e307aWYoIUMuaGFzT3duUHJvcGVydHkoJ2NvbnN0cnVjdG9yJykpe0MuY29uc3RydWN0b3I9dW5kZWZpbmVkfXZhciBmPUMuY29uc3RydWN0b3I7aWYoYil7aWYoIWYpe2lmKEMubWV0YWRhdGEuZGVwcmVjYXRlZCl7Zj1mdW5jdGlvbigpe3Euc2FwLmxvZy53YXJuaW5nKCJVc2FnZSBvZiBkZXByZWNhdGVkIGNsYXNzOiAiK2MpO2IuYXBwbHkodGhpcyxhcmd1bWVudHMpfX1lbHNle2Y9ZnVuY3Rpb24oKXtiLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19fWYucHJvdG90eXBlPXEuc2FwLm5ld09iamVjdChiLnByb3RvdHlwZSk7Zi5wcm90b3R5cGUuY29uc3RydWN0b3I9ZjtDLm1ldGFkYXRhLmJhc2VUeXBlPWIuZ2V0TWV0YWRhdGEoKS5nZXROYW1lKCl9ZWxzZXtmPWZ8fGZ1bmN0aW9uKCl7fTtkZWxldGUgQy5tZXRhZGF0YS5iYXNlVHlwZX1DLmNvbnN0cnVjdG9yPWY7cS5zYXAuc2V0T2JqZWN0KGMsZik7dmFyIG09bmV3IEYoYyxDKTtmLmdldE1ldGFkYXRhPWYucHJvdG90eXBlLmdldE1ldGFkYXRhPXEuc2FwLmdldHRlcihtKTtpZighZi5nZXRNZXRhZGF0YSgpLmlzRmluYWwoKSl7Zi5leHRlbmQ9ZnVuY3Rpb24ocyxTLGEpe3JldHVybiBNLmNyZWF0ZUNsYXNzKGYscyxTLGF8fEYpfX1yZXR1cm4gZn07cmV0dXJuIE19LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuYmFzZS5PYmplY3QnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuYmFzZS5PYmplY3QnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvYmFzZS9PYmplY3QiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCcuL0ludGVyZmFjZScsJy4vTWV0YWRhdGEnXSxmdW5jdGlvbihxLEksTSl7InVzZSBzdHJpY3QiO3ZhciBCPU0uY3JlYXRlQ2xhc3MoInNhcC51aS5iYXNlLk9iamVjdCIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKCl7aWYoISh0aGlzIGluc3RhbmNlb2YgQikpe3Rocm93IEVycm9yKCJDYW5ub3QgaW5zdGFudGlhdGUgb2JqZWN0OiBcIm5ld1wiIGlzIG1pc3NpbmchIil9fX0pO0IucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXt9O0IucHJvdG90eXBlLmdldEludGVyZmFjZT1mdW5jdGlvbigpe3ZhciBpPW5ldyBJKHRoaXMsdGhpcy5nZXRNZXRhZGF0YSgpLmdldEFsbFB1YmxpY01ldGhvZHMoKSk7dGhpcy5nZXRJbnRlcmZhY2U9cS5zYXAuZ2V0dGVyKGkpO3JldHVybiBpfTtCLmRlZmluZUNsYXNzPWZ1bmN0aW9uKGMscyxGKXt2YXIgbT1uZXcoRnx8TSkoYyxzKTt2YXIgQz1tLmdldENsYXNzKCk7Qy5nZXRNZXRhZGF0YT1DLnByb3RvdHlwZS5nZXRNZXRhZGF0YT1xLnNhcC5nZXR0ZXIobSk7aWYoIW0uaXNGaW5hbCgpKXtDLmV4dGVuZD1mdW5jdGlvbihTLG8sZil7cmV0dXJuIE0uY3JlYXRlQ2xhc3MoQyxTLG8sZnx8Ril9fXEuc2FwLmxvZy5kZWJ1ZygiZGVmaW5lZCBjbGFzcyAnIitjKyInIisobS5nZXRQYXJlbnQoKT8iIGFzIHN1YmNsYXNzIG9mICIrbS5nZXRQYXJlbnQoKS5nZXROYW1lKCk6IiIpKTtyZXR1cm4gbX07cmV0dXJuIEJ9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuYmFzZS5PYmplY3RQb29sJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmJhc2UuT2JqZWN0UG9vbCcpO3NhcC51aS5kZWZpbmUoInNhcC91aS9iYXNlL09iamVjdFBvb2wiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCcuL09iamVjdCddLGZ1bmN0aW9uKHEsQil7InVzZSBzdHJpY3QiO3ZhciBPPUIuZXh0ZW5kKCJzYXAudWkuYmFzZS5PYmplY3RQb29sIix7Y29uc3RydWN0b3I6ZnVuY3Rpb24obyl7Qi5hcHBseSh0aGlzKTt0aGlzLm9PYmplY3RDbGFzcz1vO3RoaXMuYUZyZWVPYmplY3RzPVtdfX0pO08ucHJvdG90eXBlLmJvcnJvd09iamVjdD1mdW5jdGlvbigpe3ZhciBvPXRoaXMuYUZyZWVPYmplY3RzLmxlbmd0aD09MD9uZXcgdGhpcy5vT2JqZWN0Q2xhc3MoKTp0aGlzLmFGcmVlT2JqZWN0cy5wb3AoKTtvLmluaXQuYXBwbHkobyxhcmd1bWVudHMpO3JldHVybiBvfTtPLnByb3RvdHlwZS5yZXR1cm5PYmplY3Q9ZnVuY3Rpb24obyl7by5yZXNldCgpO3RoaXMuYUZyZWVPYmplY3RzLnB1c2gobyl9O3JldHVybiBPfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUuQ29tcG9uZW50Q29udGFpbmVyUmVuZGVyZXInKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS5Db21wb25lbnRDb250YWluZXJSZW5kZXJlcicpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL0NvbXBvbmVudENvbnRhaW5lclJlbmRlcmVyIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJ10sZnVuY3Rpb24ocSl7InVzZSBzdHJpY3QiO3ZhciBDPXt9O0MucmVuZGVyPWZ1bmN0aW9uKHIsYyl7dmFyIFI9cjt2YXIgYj1zYXAudWkuZ2V0Q29yZSgpLmdldENvbmZpZ3VyYXRpb24oKS5nZXRSVEwoKTt2YXIgbz1jLmdldENvbXBvbmVudEluc3RhbmNlKCk7dmFyIHc9Yy5nZXRXaWR0aCgpO3ZhciBoPWMuZ2V0SGVpZ2h0KCk7Ui53cml0ZSgiPGRpdiIpO1Iud3JpdGVDb250cm9sRGF0YShjKTtpZih3KXtSLmFkZFN0eWxlKCJ3aWR0aCIsdyl9aWYoaCl7Ui5hZGRTdHlsZSgiaGVpZ2h0IixoKX1SLndyaXRlU3R5bGVzKCk7Ui5hZGRDbGFzcygic2FwVWlDb21wb25lbnRDb250YWluZXIiKTtSLndyaXRlQ2xhc3NlcygpO1Iud3JpdGUoIj4iKTtSLndyaXRlKCI8ZGl2IGlkPVwiIitjLmdldElkKCkrIi11aWFyZWFcIiIpO2lmKHcmJnchPT0iYXV0byIpe1IuYWRkU3R5bGUoIndpZHRoIiwiMTAwJSIpfWlmKGgmJmghPT0iYXV0byIpe1IuYWRkU3R5bGUoImhlaWdodCIsIjEwMCUiKX1SLndyaXRlU3R5bGVzKCk7Ui53cml0ZSgiPiIpO2lmKG8pe28ucmVuZGVyKFIpfVIud3JpdGUoIjwvZGl2PjwvZGl2PiIpfTtyZXR1cm4gQ30sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLkRlY2xhcmF0aXZlU3VwcG9ydCcpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLkRlY2xhcmF0aXZlU3VwcG9ydCcpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL0RlY2xhcmF0aXZlU3VwcG9ydCIsWydqcXVlcnkuc2FwLmdsb2JhbCddLGZ1bmN0aW9uKHEpeyJ1c2Ugc3RyaWN0Ijt2YXIgRD17fTtELmF0dHJpYnV0ZXM9eyJkYXRhLXNhcC11aS10eXBlIjp0cnVlLCJkYXRhLXNhcC11aS1hZ2dyZWdhdGlvbiI6dHJ1ZSwiZGF0YS1zYXAtdWktZGVmYXVsdC1hZ2dyZWdhdGlvbiI6dHJ1ZSwiZGF0YS1zYXAtdWktYmluZGluZyI6ZnVuY3Rpb24odixzKXt2YXIgYj1zYXAudWkuYmFzZS5NYW5hZ2VkT2JqZWN0LmJpbmRpbmdQYXJzZXIodik7cy5vYmplY3RCaW5kaW5ncz1zLm9iamVjdEJpbmRpbmdzfHx7fTtzLm9iamVjdEJpbmRpbmdzW2IubW9kZWx8fHVuZGVmaW5lZF09Yn0sImRhdGEtdG9vbHRpcCI6ZnVuY3Rpb24odixzKXtzWyJ0b29sdGlwIl09dn0sInRvb2x0aXAiOmZ1bmN0aW9uKHYscyxjKXtzWyJ0b29sdGlwIl09djtxLnNhcC5sb2cud2FybmluZygnW0RlcHJlY2F0ZWRdIENvbnRyb2wgIicrcy5pZCsnIjogVGhlIGF0dHJpYnV0ZSAidG9vbHRpcCIgaXMgbm90IHByZWZpeGVkIHdpdGggImRhdGEtKiIuIEZ1dHVyZSB2ZXJzaW9uIG9mIGRlY2xhcmF0aXZlIHN1cHBvcnQgd2lsbCBvbmx5IHN1cHBwb3J0IGF0dHJpYnV0ZXMgd2l0aCAiZGF0YS0qIiBwcmVmaXguJyl9LCJjbGFzcyI6dHJ1ZSwic3R5bGUiOnRydWUsImlkIjp0cnVlfTtELmNvbXBpbGU9ZnVuY3Rpb24oZSx2LGkpe3ZhciBzPXRoaXM7cShlKS5maW5kKCJbZGF0YS1zYXAtdWktdHlwZV0iKS5maWx0ZXIoZnVuY3Rpb24oKXtyZXR1cm4gcSh0aGlzKS5wYXJlbnRzKCJbZGF0YS1zYXAtdWktdHlwZV0iKS5sZW5ndGg9PT0wfSkuZWFjaChmdW5jdGlvbigpe3MuX2NvbXBpbGUodGhpcyx2LGkpfSl9O0QuX2NvbXBpbGU9ZnVuY3Rpb24oZSx2LGkpe3ZhciAkPXEoZSk7dmFyIHQ9JC5hdHRyKCJkYXRhLXNhcC11aS10eXBlIik7dmFyIGM9W107dmFyIEk9dD09PSJzYXAudWkuY29yZS5VSUFyZWEiO2lmKEkpe3ZhciBzPXRoaXM7JC5jaGlsZHJlbigpLmVhY2goZnVuY3Rpb24oKXt2YXIgQz1zLl9jcmVhdGVDb250cm9sKHRoaXMsdik7aWYoQyl7Yy5wdXNoKEMpfX0pfWVsc2V7dmFyIEM9dGhpcy5fY3JlYXRlQ29udHJvbChlLHYpO2lmKEMpe2MucHVzaChDKX19JC5lbXB0eSgpO3ZhciBhPVtdO3EuZWFjaChlLmF0dHJpYnV0ZXMsZnVuY3Rpb24oYixBKXt2YXIgbj1BLm5hbWU7aWYoIUl8fEkmJi9eZGF0YS0vZy50ZXN0KG4udG9Mb3dlckNhc2UoKSkpe2EucHVzaChuKX19KTtpZihhLmxlbmd0aD4wKXskLnJlbW92ZUF0dHIoYS5qb2luKCIgIikpfXEuZWFjaChjLGZ1bmN0aW9uKGssQyl7aWYoQyBpbnN0YW5jZW9mIHNhcC51aS5jb3JlLkNvbnRyb2wpe2lmKHYmJiFpKXt2LmFkZENvbnRlbnQoQyl9ZWxzZXtDLnBsYWNlQXQoZSk7aWYodil7di5jb25uZWN0Q29udHJvbChDKX19fX0pfTtELl9jcmVhdGVDb250cm9sPWZ1bmN0aW9uKGUsdil7dmFyICQ9cShlKTt2YXIgYz1udWxsO3ZhciB0PSQuYXR0cigiZGF0YS1zYXAtdWktdHlwZSIpO2lmKHQpe3Euc2FwLnJlcXVpcmUodCk7dmFyIEM9cS5zYXAuZ2V0T2JqZWN0KHQpO3ZhciBzPXt9O3ZhciBpPXMuaWQ9dGhpcy5fZ2V0SWQoJCx2KTt0aGlzLl9hZGRTZXR0aW5nc0ZvckF0dHJpYnV0ZXMocyxDLGUsdik7dGhpcy5fYWRkU2V0dGluZ3NGb3JBZ2dyZWdhdGlvbnMocyxDLGUsdik7dmFyIGM7aWYoc2FwLnVpLmNvcmUubXZjLlZpZXcucHJvdG90eXBlLmlzUHJvdG90eXBlT2YoQy5wcm90b3R5cGUpJiZ0eXBlb2YgQy5fc1R5cGU9PT0ic3RyaW5nIil7Yz1zYXAudWkudmlldyhzLHVuZGVmaW5lZCxDLl9zVHlwZSl9ZWxzZXtjPW5ldyBDKHMpfWlmKGUuY2xhc3NOYW1lKXtjLmFkZFN0eWxlQ2xhc3MoZS5jbGFzc05hbWUpfSQucmVtb3ZlQXR0cigiZGF0YS1zYXAtdWktdHlwZSIpfWVsc2V7Yz10aGlzLl9jcmVhdGVIdG1sQ29udHJvbChlLHYpfXJldHVybiBjfTtELl9jcmVhdGVIdG1sQ29udHJvbD1mdW5jdGlvbihlLHYpe3ZhciBoPW5ldyBzYXAudWkuY29yZS5IVE1MKCk7aC5zZXRET01Db250ZW50KGUpO3RoaXMuY29tcGlsZShlLHYsdHJ1ZSk7cmV0dXJuIGh9O0QuX2FkZFNldHRpbmdzRm9yQXR0cmlidXRlcz1mdW5jdGlvbihzLGMsZSx2KXt2YXIgYT10aGlzO3ZhciBTPUQuYXR0cmlidXRlczt2YXIgYj1zYXAudWkuYmFzZS5NYW5hZ2VkT2JqZWN0LmJpbmRpbmdQYXJzZXI7dmFyIEM9W107dmFyIHI9L15kYXRhLWN1c3RvbS1kYXRhOiguKykvaTtxLmVhY2goZS5hdHRyaWJ1dGVzLGZ1bmN0aW9uKGksQSl7dmFyIG49QS5uYW1lO3ZhciBWPUEudmFsdWU7aWYoIXIudGVzdChuKSl7aWYodHlwZW9mIFNbbl09PT0idW5kZWZpbmVkIil7bj1hLmNvbnZlcnRBdHRyaWJ1dGVUb1NldHRpbmdOYW1lKG4scy5pZCk7dmFyIHA9YS5fZ2V0UHJvcGVydHkoYyxuKTtpZihwKXt2YXIgQj1iKFYsdiYmdi5nZXRDb250cm9sbGVyKCksdHJ1ZSk7aWYoQiYmdHlwZW9mIEI9PT0ib2JqZWN0Iil7c1tuXT1CfWVsc2V7c1tuXT1hLmNvbnZlcnRWYWx1ZVRvVHlwZShhLmdldFByb3BlcnR5RGF0YVR5cGUocCksQnx8Vil9fWVsc2UgaWYoYS5fZ2V0QXNzb2NpYXRpb24oYyxuKSl7dmFyIG89YS5fZ2V0QXNzb2NpYXRpb24oYyxuKTtpZihvLm11bHRpcGxlKXtWPVYucmVwbGFjZSgvXHMqLFxzKnxccysvZywiLCIpO3ZhciBJPVYuc3BsaXQoIiwiKTtxLmVhY2goSSxmdW5jdGlvbihpLGcpe0lbaV09dj92LmNyZWF0ZUlkKGcpOmd9KTtzW25dPUl9ZWxzZXtzW25dPXY/di5jcmVhdGVJZChWKTpWfX1lbHNlIGlmKGEuX2dldEFnZ3JlZ2F0aW9uKGMsbikpe3ZhciBkPWEuX2dldEFnZ3JlZ2F0aW9uKGMsbik7aWYoZC5tdWx0aXBsZSl7dmFyIEI9YihWLHYmJnYuZ2V0Q29udHJvbGxlcigpKTtpZihCKXtzW25dPUJ9ZWxzZXt0aHJvdyBuZXcgRXJyb3IoIkFnZ3JlZ2F0aW9uICIrbisiIHdpdGggY2FyZGluYWxpdHkgMC4ubiBvbmx5IGFsbG93cyBiaW5kaW5nIHBhdGhzIGFzIGF0dHJpYnV0ZSB2YWx1ZSIpfX1lbHNlIGlmKGQuYWx0VHlwZXMpe3ZhciBCPWIoVix2JiZ2LmdldENvbnRyb2xsZXIoKSx0cnVlKTtpZihCJiZ0eXBlb2YgQj09PSJvYmplY3QiKXtzW25dPUJ9ZWxzZXtzW25dPWEuY29udmVydFZhbHVlVG9UeXBlKGQuYWx0VHlwZXNbMF0sQnx8Vil9fWVsc2V7dGhyb3cgbmV3IEVycm9yKCJBZ2dyZWdhdGlvbiAiK24rIiBub3Qgc3VwcG9ydGVkIil9fWVsc2UgaWYoYS5fZ2V0RXZlbnQoYyxuKSl7dmFyIGg9cS5zYXAuZ2V0T2JqZWN0KFYpO2lmKHYmJnR5cGVvZiBoPT09InVuZGVmaW5lZCIpe3ZhciBmPSh2Ll9vQ29udGFpbmluZ1ZpZXd8fHYpLmdldENvbnRyb2xsZXIoKTtoPWZbVl07aWYodHlwZW9mIGg9PT0iZnVuY3Rpb24iKXtoPXEucHJveHkoaCxmKTtoLl9zYXB1aV9oYW5kbGVyTmFtZT1WfX1pZih0eXBlb2YgaD09PSJmdW5jdGlvbiIpe3Nbbl09aH1lbHNle3Rocm93IG5ldyBFcnJvcignQ29udHJvbCAiJytzLmlkKyciOiBUaGUgZnVuY3Rpb24gIicrVisnIiBmb3IgdGhlIGV2ZW50ICInK24rJyIgaXMgbm90IGRlZmluZWQnKX19fWVsc2UgaWYodHlwZW9mIFNbbl09PT0iZnVuY3Rpb24iKXtTW25dKFYscyxjKX19ZWxzZXtuPXEuc2FwLmNhbWVsQ2FzZShyLmV4ZWMobilbMV0pO3ZhciBCPWIoVix2JiZ2LmdldENvbnRyb2xsZXIoKSk7Qy5wdXNoKG5ldyBzYXAudWkuY29yZS5DdXN0b21EYXRhKHtrZXk6bix2YWx1ZTpCfHxWfSkpfX0pO2lmKEMubGVuZ3RoPjApe3MuY3VzdG9tRGF0YT1DfXJldHVybiBzfTtELl9hZGRTZXR0aW5nc0ZvckFnZ3JlZ2F0aW9ucz1mdW5jdGlvbihzLGMsZSx2KXt2YXIgJD1xKGUpO3ZhciBkPXRoaXMuX2dldERlZmF1bHRBZ2dyZWdhdGlvbihjLGUpO3ZhciBhPXRoaXM7dmFyIEE9Yy5nZXRNZXRhZGF0YSgpLmdldEFsbEFnZ3JlZ2F0aW9ucygpOyQuY2hpbGRyZW4oKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIGI9cSh0aGlzKTt2YXIgZj1iLmF0dHIoImRhdGEtc2FwLXVpLWFnZ3JlZ2F0aW9uIik7dmFyIHQ9Yi5hdHRyKCJkYXRhLXNhcC11aS10eXBlIik7dmFyIHU9ZmFsc2U7aWYoIWYpe3U9dHJ1ZTtmPWR9aWYoZiYmQVtmXSl7dmFyIG09QVtmXS5tdWx0aXBsZTt2YXIgZz1mdW5jdGlvbihDKXt2YXIgbz1hLl9jcmVhdGVDb250cm9sKEMsdik7aWYobyl7aWYobSl7aWYoIXNbZl0pe3NbZl09W119aWYodHlwZW9mIHNbZl0ucGF0aD09PSJzdHJpbmciKXtzW2ZdLnRlbXBsYXRlPW99ZWxzZXtzW2ZdLnB1c2gobyl9fWVsc2V7c1tmXT1vfX19O2lmKHV8fCh0JiYhdSkpe2codGhpcyl9ZWxzZXtiLmNoaWxkcmVuKCkuZWFjaChmdW5jdGlvbigpe2codGhpcyl9KX19Yi5yZW1vdmVBdHRyKCJkYXRhLXNhcC11aS1hZ2dyZWdhdGlvbiIpO2IucmVtb3ZlQXR0cigiZGF0YS1zYXAtdWktdHlwZSIpfSk7cmV0dXJuIHN9O0QuX2dldElkPWZ1bmN0aW9uKGUsdil7dmFyICQ9cShlKTt2YXIgaT0kLmF0dHIoImlkIik7aWYoaSl7aWYodil7aT12LmNyZWF0ZUlkKGkpOyQuYXR0cigiZGF0YS1zYXAtdWktaWQiLGkpfSQuYXR0cigiaWQiLCIiKX1yZXR1cm4gaX07RC5fZ2V0UHJvcGVydHk9ZnVuY3Rpb24oYyxuKXtyZXR1cm4gYy5nZXRNZXRhZGF0YSgpLmdldEFsbFByb3BlcnRpZXMoKVtuXX07RC5jb252ZXJ0VmFsdWVUb1R5cGU9ZnVuY3Rpb24odCx2KXtpZih0IGluc3RhbmNlb2Ygc2FwLnVpLmJhc2UuRGF0YVR5cGUpe3Y9dC5wYXJzZVZhbHVlKHYpfXJldHVybiB0eXBlb2Ygdj09PSJzdHJpbmciP3NhcC51aS5iYXNlLk1hbmFnZWRPYmplY3QuYmluZGluZ1BhcnNlci5lc2NhcGUodik6dn07RC5nZXRQcm9wZXJ0eURhdGFUeXBlPWZ1bmN0aW9uKHApe3ZhciB0PXNhcC51aS5iYXNlLkRhdGFUeXBlLmdldFR5cGUocC50eXBlKTtpZighdCl7dGhyb3cgbmV3IEVycm9yKCJQcm9wZXJ0eSAiK3AubmFtZSsiIGhhcyBubyBrbm93biB0eXBlIil9cmV0dXJuIHR9O0QuY29udmVydEF0dHJpYnV0ZVRvU2V0dGluZ05hbWU9ZnVuY3Rpb24oYSxpLGQpe2lmKGEuaW5kZXhPZigiZGF0YS0iKT09PTApe2E9YS5zdWJzdHIoNSl9ZWxzZSBpZihkKXtxLnNhcC5sb2cud2FybmluZygnW0RlcHJlY2F0ZWRdIENvbnRyb2wgIicraSsnIjogVGhlIGF0dHJpYnV0ZSAiJythKyciIGlzIG5vdCBwcmVmaXhlZCB3aXRoICJkYXRhLSoiLiBGdXR1cmUgdmVyc2lvbiBvZiBkZWNsYXJhdGl2ZSBzdXBwb3J0IHdpbGwgb25seSBzdXBwcG9ydCBhdHRyaWJ1dGVzIHdpdGggImRhdGEtKiIgcHJlZml4LicpfWVsc2V7dGhyb3cgbmV3IEVycm9yKCdDb250cm9sICInK2krJyI6IFRoZSBhdHRyaWJ1dGUgIicrYSsnIiBpcyBub3QgcHJlZml4ZWQgd2l0aCAiZGF0YS0qIi4nKX1yZXR1cm4gcS5zYXAuY2FtZWxDYXNlKGEpfTtELl9nZXRBc3NvY2lhdGlvbj1mdW5jdGlvbihjLG4pe3JldHVybiBjLmdldE1ldGFkYXRhKCkuZ2V0QWxsQXNzb2NpYXRpb25zKClbbl19O0QuX2dldEFnZ3JlZ2F0aW9uPWZ1bmN0aW9uKGMsbil7cmV0dXJuIGMuZ2V0TWV0YWRhdGEoKS5nZXRBbGxBZ2dyZWdhdGlvbnMoKVtuXX07RC5fZ2V0RXZlbnQ9ZnVuY3Rpb24oYyxuKXtyZXR1cm4gYy5nZXRNZXRhZGF0YSgpLmdldEFsbEV2ZW50cygpW25dfTtELl9nZXREZWZhdWx0QWdncmVnYXRpb249ZnVuY3Rpb24oYyxlKXt2YXIgJD1xKGUpO3ZhciBkPSQuYXR0cigiZGF0YS1zYXAtdWktZGVmYXVsdC1hZ2dyZWdhdGlvbiIpfHxjLmdldE1ldGFkYXRhKCkuZ2V0RGVmYXVsdEFnZ3JlZ2F0aW9uTmFtZSgpOyQucmVtb3ZlQXR0cigiZGF0YS1zYXAtdWktZGVmYXVsdC1hZ2dyZWdhdGlvbiIpO3JldHVybiBkfTtyZXR1cm4gRH0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLkhUTUxSZW5kZXJlcicpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLkhUTUxSZW5kZXJlcicpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL0hUTUxSZW5kZXJlciIsWydqcXVlcnkuc2FwLmdsb2JhbCddLGZ1bmN0aW9uKHEpeyJ1c2Ugc3RyaWN0Ijt2YXIgSD17cmVuZGVyOmZ1bmN0aW9uKHIsYyl7dmFyIHU9Yy5nZXRVSUFyZWEoKTtyLndyaXRlKCI8ZGl2IGlkPVwic2FwLXVpLWR1bW15LSIrYy5nZXRJZCgpKyJcIiBzdHlsZT1cImRpc3BsYXk6bm9uZVwiPiIpO3Iud3JpdGUoIjwvZGl2PiIpfX07cmV0dXJuIEh9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS5IaXN0b3J5Jykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUuSGlzdG9yeScpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL0hpc3RvcnkiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvYmFzZS9PYmplY3QnXSxmdW5jdGlvbihxLEIpeyJ1c2Ugc3RyaWN0Ijt2YXIgSD1CLmV4dGVuZCgic2FwLnVpLmNvcmUuSGlzdG9yeSIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKGkscyl7Qi5hcHBseSh0aGlzKTtpZighcyl7cz17fX12YXIgaD1zLnByZWZpeD9zLnByZWZpeDpkb2N1bWVudC5sb2NhdGlvbi5wYXRobmFtZTt0aGlzLl9pTWF4SGlzdG9yeT1zLm1heD9zLm1heDoxMDA7dGhpcy5fc0hpc3RvcnlJZD1oK2k7cS5zYXAucmVxdWlyZSgianF1ZXJ5LnNhcC5zdG9yYWdlIik7dGhpcy5fb1N0b3JhZ2U9cS5zYXAuc3RvcmFnZShxLnNhcC5zdG9yYWdlLlR5cGUubG9jYWwpO3RoaXMuX2ZGaWx0ZXI9cy5maWx0ZXI/cy5maWx0ZXI6ZnVuY3Rpb24oYSx2KXtyZXR1cm4gYSYmKCF2fHwodiYmcS5zYXAuc3RhcnRzV2l0aElnbm9yZUNhc2UoYSx2KSkpfTt0aGlzLl9mQ2hlY2tIaXN0b3J5PXMuY2hlY2tIaXN0b3J5P3MuY2hlY2tIaXN0b3J5OmZ1bmN0aW9uKGEpe3JldHVybiBhfX0sX2luaXRIaXN0b3J5OmZ1bmN0aW9uKCl7aWYoIXRoaXMuX2FIaXN0b3J5KXt2YXIgaD10aGlzLl9vU3RvcmFnZS5nZXQodGhpcy5fc0hpc3RvcnlJZCk7aWYodHlwZW9mKGgpPT09InN0cmluZyIpe2g9aC5zcGxpdCgiLCIpfWVsc2UgaWYoIWgpe2g9W119dGhpcy5fYUhpc3Rvcnk9dGhpcy5fZkNoZWNrSGlzdG9yeShoKX1yZXR1cm4gdGhpcy5fYUhpc3Rvcnl9LGdldDpmdW5jdGlvbih2KXt2YXIgaD10aGlzLl9pbml0SGlzdG9yeSgpO3ZhciByPVtdO2Zvcih2YXIgaT0wO2k8aC5sZW5ndGg7aSsrKXtpZih0aGlzLl9mRmlsdGVyKGhbaV0sdikpe3IucHVzaChoW2ldKX19cmV0dXJuIHJ9LHJlbW92ZTpmdW5jdGlvbih2KXt2YXIgaD10aGlzLl9pbml0SGlzdG9yeSgpO2Zvcih2YXIgaT0wO2k8aC5sZW5ndGg7aSsrKXtpZihoW2ldPT12KXtoLnNwbGljZShpLDEpO2JyZWFrfX19LGFkZDpmdW5jdGlvbih2KXt2YXIgaD10aGlzLl9pbml0SGlzdG9yeSgpO2Zvcih2YXIgaT0wO2k8aC5sZW5ndGg7aSsrKXtpZihoW2ldPT09dil7aC5zcGxpY2UoaSwxKTticmVha319aC51bnNoaWZ0KHYpO2lmKGgubGVuZ3RoPnRoaXMuX2lNYXhIaXN0b3J5KXtoLnNwbGljZSh0aGlzLl9pTWF4SGlzdG9yeSl9dGhpcy5fb1N0b3JhZ2UucHV0KHRoaXMuX3NIaXN0b3J5SWQsaCl9LGNsZWFyOmZ1bmN0aW9uKCl7dGhpcy5fb1N0b3JhZ2UucmVtb3ZlKHRoaXMuX3NIaXN0b3J5SWQpO3RoaXMuX2FIaXN0b3J5PW51bGx9fSk7cmV0dXJuIEh9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS5JY29uUG9vbCcpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLkljb25Qb29sJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvSWNvblBvb2wiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvdGhpcmRwYXJ0eS9VUkknXSxmdW5jdGlvbihxLFUpeyJ1c2Ugc3RyaWN0IjtpZihiKXtyZXR1cm59dmFyIEk9WyJhY2NpZGVudGFsLWxlYXZlIiwiYWNjb3VudCIsIndyZW5jaCIsIndpbmRvd3MtZG9vcnMiLCJ3YXNoaW5nLW1hY2hpbmUiLCJ2aXNpdHMiLCJ2aWRlbyIsInRyYXZlbC1leHBlbnNlIiwidGVtcGVyYXR1cmUiLCJ0YXNrIiwic3luY2hyb25pemUiLCJzdXJ2ZXkiLCJzZXR0aW5ncyIsInNlYXJjaCIsInNhbGVzLWRvY3VtZW50IiwicmV0YWlsLXN0b3JlIiwicmVmcmVzaCIsInByb2R1Y3QiLCJwcmVzZW50IiwicHB0LWF0dGFjaG1lbnQiLCJwb29sIiwicGllLWNoYXJ0IiwicGljdHVyZSIsInBob3RvLXZvbHRhaWMiLCJwaG9uZSIsInBlbmRpbmciLCJwZGYtYXR0YWNobWVudCIsInBhc3QiLCJvdXRnb2luZy1jYWxsIiwib3Bwb3J0dW5pdHkiLCJvcHBvcnR1bml0aWVzIiwibm90ZXMiLCJtb25leS1iaWxscyIsIm1hcCIsImxvZyIsImxpbmUtY2hhcnRzIiwibGlnaHRidWxiIiwibGVhZHMiLCJsZWFkIiwibGFwdG9wIiwia3BpLW1hbmFnaW5nLW15LWFyZWEiLCJrcGktY29ycG9yYXRlLXBlcmZvcm1hbmNlIiwiaW5jb21pbmctY2FsbCIsImluYm94IiwiaG9yaXpvbnRhbC1iYXItY2hhcnQiLCJoaXN0b3J5IiwiaGVhdGluZy1jb29saW5nIiwiZ2FudHQtYmFycyIsImZ1dHVyZSIsImZyaWRnZSIsImZhbGxiYWNrIiwiZXhwZW5zZS1yZXBvcnQiLCJleGNlbC1hdHRhY2htZW50IiwiZW5lcmd5LXNhdmluZy1saWdodGJ1bGIiLCJlbXBsb3llZSIsImVtYWlsIiwiZWRpdCIsImR1cGxpY2F0ZSIsImRvd25sb2FkIiwiZG9jLWF0dGFjaG1lbnQiLCJkaXNod2FzaGVyIiwiZGVsZXRlIiwiZGVjbGluZSIsImNvbXBsZXRlIiwiY29tcGV0aXRvciIsImNvbGxlY3Rpb25zLW1hbmFnZW1lbnQiLCJjaGFsa2JvYXJkIiwiY2FydCIsImNhcmQiLCJjYW1lcmEiLCJjYWxlbmRhciIsImJlZ2luIiwiYmFza2V0IiwiYmFyLWNoYXJ0IiwiYXR0YWNobWVudCIsImFycm93LXRvcCIsImFycm93LXJpZ2h0IiwiYXJyb3ctbGVmdCIsImFycm93LWJvdHRvbSIsImFwcHJvdmFscyIsImFwcG9pbnRtZW50IiwiYWxwaGFiZXRpY2FsLW9yZGVyIiwiYWxvbmctc3RhY2tlZC1jaGFydCIsImFsZXJ0IiwiYWRkcmVzc2VzIiwiYWRkcmVzcy1ib29rIiwiYWRkLWZpbHRlciIsImFkZC1mYXZvcml0ZSIsImFkZCIsImFjdGl2aXRpZXMiLCJhY3Rpb24iLCJhY2NlcHQiLCJoaW50IiwiZ3JvdXAiLCJjaGVjay1hdmFpbGFiaWxpdHkiLCJ3ZWF0aGVyLXByb29maW5nIiwicGF5bWVudC1hcHByb3ZhbCIsImJhdGNoLXBheW1lbnRzIiwiYmVkIiwiYXJvYmFzZSIsImZhbWlseS1jYXJlIiwiZmF2b3JpdGUiLCJuYXZpZ2F0aW9uLXJpZ2h0LWFycm93IiwibmF2aWdhdGlvbi1sZWZ0LWFycm93IiwiZS1jYXJlIiwibGVzcyIsImxhdGVuZXNzIiwibGFiIiwiaW50ZXJuZXQtYnJvd3NlciIsImluc3RhbmNlIiwiaW5zcGVjdGlvbiIsImltYWdlLXZpZXdlciIsImhvbWUiLCJncmlkIiwiZ29hbHNlZWsiLCJnZW5lcmFsLWxlYXZlLXJlcXVlc3QiLCJjcmVhdGUtbGVhdmUtcmVxdWVzdCIsImZsaWdodCIsImZpbHRlciIsImZhdm9yaXRlLWxpc3QiLCJmYWN0b3J5IiwiZW5kb3Njb3B5IiwiZW1wbG95ZWUtcGFuZSIsImVtcGxveWVlLWFwcHJvdmFscyIsImVtYWlsLXJlYWQiLCJlbGVjdHJvY2FyZGlvZ3JhbSIsImRvY3VtZW50cyIsImRlY2lzaW9uIiwiZGF0YWJhc2UiLCJjdXN0b21lci1oaXN0b3J5IiwiY3VzdG9tZXIiLCJjcmVkaXQtY2FyZCIsImNyZWF0ZS1lbnRyeS10aW1lIiwiY29udGFjdHMiLCJjb21wYXJlIiwiY2xpbmljYWwtb3JkZXIiLCJjaGFpbi1saW5rIiwicHVsbC1kb3duIiwiY2FyZ28tdHJhaW4iLCJjYXItcmVudGFsIiwiYnVzaW5lc3MtY2FyZCIsImJhci1jb2RlIiwiZm9sZGVyLWJsYW5rIiwicGFzc2VuZ2VyLXRyYWluIiwicXVlc3Rpb24tbWFyayIsIndvcmxkIiwiaXBob25lIiwiaXBhZCIsIndhcm5pbmciLCJzb3J0IiwiY291cnNlLWJvb2siLCJjb3Vyc2UtcHJvZ3JhbSIsImFkZC1jb3Vyc2Vib29rIiwicHJpbnQiLCJzYXZlIiwicGxheSIsInBhdXNlIiwicmVjb3JkIiwicmVzcG9uc2UiLCJwdXNocGluLW9uIiwicHVzaHBpbi1vZmYiLCJ1bmZhdm9yaXRlIiwibGVhcm5pbmctYXNzaXN0YW50IiwidGltZXNoZWV0IiwidGltZS1lbnRyeS1yZXF1ZXN0IiwibGlzdCIsImFjdGlvbi1zZXR0aW5ncyIsInNoYXJlIiwiZmVlZCIsInJvbGUiLCJmbGFnIiwicG9zdCIsImluc3BlY3QiLCJpbnNwZWN0LWRvd24iLCJhcHBvaW50bWVudC0yIiwidGFyZ2V0LWdyb3VwIiwibWFya2V0aW5nLWNhbXBhaWduIiwibm90aWZpY2F0aW9uIiwiY29tbWVudCIsInNoaXBwaW5nLXN0YXR1cyIsImNvbGxhYm9yYXRlIiwic2hvcnRjdXQiLCJsZWFkLW91dGRhdGVkIiwidG9vbHMtb3Bwb3J0dW5pdHkiLCJwZXJtaXNzaW9uIiwic3VwcGxpZXIiLCJ0YWJsZS12aWV3IiwidGFibGUtY2hhcnQiLCJzd2l0Y2gtdmlld3MiLCJlLWxlYXJuaW5nIiwibWFuYWdlciIsInN3aXRjaC1jbGFzc2VzIiwic2ltcGxlLXBheW1lbnQiLCJzaWduYXR1cmUiLCJzYWxlcy1vcmRlci1pdGVtIiwic2FsZXMtb3JkZXIiLCJyZXF1ZXN0IiwicmVjZWlwdCIsInB1enpsZSIsInByb2Nlc3MiLCJwcml2YXRlIiwicG9wdXAtd2luZG93IiwicGVyc29uLXBsYWNlaG9sZGVyIiwicGVyLWRpZW0iLCJwYXBlci1wbGFuZSIsInBhaWQtbGVhdmUiLCJwZGYtcmVhZGVyIiwib3ZlcnZpZXctY2hhcnQiLCJvdmVybGF5Iiwib3JnLWNoYXJ0IiwibnVtYmVyLXNpZ24iLCJub3RpZmljYXRpb24tMiIsIm15LXNhbGVzLW9yZGVyIiwibWVhbCIsImxvYW4iLCJvcmRlci1zdGF0dXMiLCJjdXN0b21lci1vcmRlci1lbnRyeSIsInBlcmZvcm1hbmNlIiwibWVudSIsImVtcGxveWVlLWxvb2t1cCIsImVkdWNhdGlvbiIsImN1c3RvbWVyLWJyaWVmaW5nIiwiY3VzdG9tZXItYW5kLWNvbnRhY3RzIiwibXktdmlldyIsImFjY2VsZXJhdGVkIiwidG8tYmUtcmV2aWV3ZWQiLCJ3YXJuaW5nMiIsImZlZWRlci1hcnJvdyIsInF1YWxpdHktaXNzdWUiLCJ3b3JrZmxvdy10YXNrcyIsImNyZWF0ZSIsImhvbWUtc2hhcmUiLCJnbG9iZSIsInRhZ3MiLCJ3b3JrLWhpc3RvcnkiLCJ4LXJheSIsIndvdW5kcy1kb2MiLCJ3ZWItY2FtIiwid2FpdmVyIiwidmVydGljYWwtYmFyLWNoYXJ0IiwidXBzdGFja2VkLWNoYXJ0IiwidHJpcC1yZXBvcnQiLCJtaWNyb3Bob25lIiwidW5wYWlkLWxlYXZlIiwidHJlZSIsInRvYXN0ZXItdXAiLCJ0b2FzdGVyLXRvcCIsInRvYXN0ZXItZG93biIsInRpbWUtYWNjb3VudCIsInRoZWF0ZXIiLCJ0YXhpIiwic3Vid2F5LXRyYWluIiwic3R1ZHktbGVhdmUiLCJzdGV0aG9zY29wZSIsInN0ZXAiLCJzb25vZ3JhcGh5Iiwic29jY29yIiwicGh5c2ljYWwtYWN0aXZpdHkiLCJwaGFybWFjeSIsIm9mZmljaWFsLXNlcnZpY2UiLCJvZmZzaXRlLXdvcmsiLCJudXRyaXRpb24tYWN0aXZpdHkiLCJuZXdzcGFwZXIiLCJtb25pdG9yLXBheW1lbnRzIiwibWFwLTIiLCJtYWNoaW5lIiwibXJpLXNjYW4iLCJlbmQtdXNlci1leHBlcmllbmNlLW1vbml0b3JpbmciLCJ1bndpcmVkIiwiY3VzdG9tZXItZmluYW5jaWFsLWZhY3Qtc2hlZXQiLCJyZXRhaWwtc3RvcmUtbWFuYWdlciIsIk5ldHdlYXZlci1idXNpbmVzcy1jbGllbnQiLCJlbGVjdHJvbmljLW1lZGljYWwtcmVjb3JkIiwiZWFtLXdvcmstb3JkZXIiLCJjdXN0b21lci12aWV3IiwiY3JtLXNlcnZpY2UtbWFuYWdlciIsImNybS1zYWxlcyIsIndpZGdldHMiLCJjb21taXNzaW9uLWNoZWNrIiwiY29sbGVjdGlvbnMtaW5zaWdodCIsImNsaW5pY2FsLXRhc3QtdHJhY2tlciIsImNpdGl6ZW4tY29ubmVjdCIsImNhcnQtYXBwcm92YWwiLCJjYXBpdGFsLXByb2plY3RzIiwiYm8tc3RyYXRlZ3ktbWFuYWdlbWVudCIsImJ1c2luZXNzLW9iamVjdHMtbW9iaWxlIiwiYnVzaW5lc3Mtb2JqZWN0cy1leHBsb3JlciIsImJ1c2luZXNzLW9iamVjdHMtZXhwZXJpZW5jZSIsImJieWQtZGFzaGJvYXJkIiwiYmJ5ZC1hY3RpdmUtc2FsZXMiLCJidXNpbmVzcy1ieS1kZXNpZ24iLCJidXNpbmVzcy1vbmUiLCJzYXAtYm94IiwibWFuYWdlci1pbnNpZ2h0IiwiYWNjb3VudGluZy1kb2N1bWVudC12ZXJpZmljYXRpb24iLCJoci1hcHByb3ZhbCIsImlkZWEtd2FsbCIsIkNoYXJ0LVRyZWUtTWFwIiwiY2FydC01IiwiY2FydC00Iiwid2FsbGV0IiwidmVoaWNsZS1yZXBhaXIiLCJ1cGxvYWQiLCJ1bmxvY2tlZCIsInVtYnJlbGxhIiwidHJhdmVsLXJlcXVlc3QiLCJ0cmF2ZWwtZXhwZW5zZS1yZXBvcnQiLCJ0cmF2ZWwtaXRpbmVyYXJ5IiwidGltZS1vdmVydGltZSIsInRoaW5nLXR5cGUiLCJ0ZWNobmljYWwtb2JqZWN0IiwidGFnIiwic3lyaW5nZSIsInN5bnRheCIsInN1aXRjYXNlIiwic2ltdWxhdGUiLCJzaGllbGQiLCJzaGFyZS0yIiwic2FsZXMtcXVvdGUiLCJyZXBvc3QiLCJwcm92aXNpb24iLCJwcm9qZWN0b3IiLCJhZGQtcHJvZHVjdCIsInBpcGVsaW5lLWFuYWx5c2lzIiwiYWRkLXBob3RvIiwicGFsZXR0ZSIsIm51cnNlIiwic2FsZXMtbm90aWZpY2F0aW9uIiwibWlsZWFnZSIsIm1lZXRpbmctcm9vbSIsIm1lZGlhLWZvcndhcmQiLCJtZWRpYS1wbGF5IiwibWVkaWEtcGF1c2UiLCJtZWRpYS1yZXZlcnNlIiwibWVkaWEtcmV3aW5kIiwibWVhc3VyZW1lbnQtZG9jdW1lbnQiLCJtZWFzdXJpbmctcG9pbnQiLCJtZWFzdXJlIiwibWFwLTMiLCJsb2NrZWQiLCJsZXR0ZXIiLCJqb3VybmV5LWFycml2ZSIsImpvdXJuZXktY2hhbmdlIiwiam91cm5leS1kZXBhcnQiLCJpdC1zeXN0ZW0iLCJpdC1pbnN0YW5jZSIsIml0LWhvc3QiLCJpcGhvbmUtMiIsImlwYWQtMiIsImludmVudG9yeSIsImluc3VyYW5jZS1ob3VzZSIsImluc3VyYW5jZS1saWZlIiwiaW5zdXJhbmNlLWNhciIsImluaXRpYXRpdmUiLCJpbmNpZGVudCIsImdyb3VwLTIiLCJnb2FsIiwiZnVuY3Rpb25hbC1sb2NhdGlvbiIsImZ1bGwtc2NyZWVuIiwiZm9ybSIsImZvYi13YXRjaCIsImJsYW5rLXRhZyIsImZhbWlseS1wcm90ZWN0aW9uIiwiZm9sZGVyIiwiZmF4LW1hY2hpbmUiLCJleGFtcGxlIiwiZXJhc2VyIiwiZW1wbG95ZWUtcmVqZWN0aW9ucyIsImRyb3AtZG93bi1saXN0IiwiZHJhdy1yZWN0YW5nbGUiLCJkb2N1bWVudCIsImRvY3RvciIsImRpc2N1c3Npb24tMiIsImRpc2N1c3Npb24iLCJkaW1lbnNpb24iLCJjdXN0b21lci1hbmQtc3VwcGxpZXIiLCJjcm9wIiwiYWRkLWNvbnRhY3QiLCJjb21wYXJlLTIiLCJjb2xvci1maWxsIiwiY29sbGlzaW9uIiwiY3VycmljdWx1bSIsImNoYXJ0LWF4aXMiLCJmdWxsLXN0YWNrZWQtY2hhcnQiLCJmdWxsLXN0YWNrZWQtY29sdW1uLWNoYXJ0IiwidmVydGljYWwtYmFyLWNoYXJ0LTIiLCJob3Jpem9udGFsLWJhci1jaGFydC0yIiwiaG9yaXpvbnRhbC1zdGFja2VkLWNoYXJ0IiwidmVydGljYWwtc3RhY2tlZC1jaGFydCIsImNob3JvcGxldGgtY2hhcnQiLCJnZW9ncmFwaGljLWJ1YmJsZS1jaGFydCIsIm11bHRpcGxlLXJhZGFyLWNoYXJ0IiwicmFkYXItY2hhcnQiLCJjcm9zc2VkLWxpbmUtY2hhcnQiLCJtdWx0aXBsZS1saW5lLWNoYXJ0IiwibXVsdGlwbGUtYmFyLWNoYXJ0IiwibGluZS1jaGFydCIsImxpbmUtY2hhcnQtZHVhbC1heGlzIiwiYnViYmxlLWNoYXJ0Iiwic2NhdHRlci1jaGFydCIsIm11bHRpcGxlLXBpZS1jaGFydCIsImNvbHVtbi1jaGFydC1kdWFsLWF4aXMiLCJ0YWctY2xvdWQtY2hhcnQiLCJhcmVhLWNoYXJ0IiwiY2F1c2UiLCJjYXJ0LTMiLCJjYXJ0LTIiLCJidXMtcHVibGljLXRyYW5zcG9ydCIsImJ1cmdsYXJ5IiwiYnVpbGRpbmciLCJib3JkZXIiLCJib29rbWFyayIsImJhZGdlIiwiYXR0YWNobWVudC1hdWRpbyIsImF0dGFjaG1lbnQtdmlkZW8iLCJhdHRhY2htZW50LWh0bWwiLCJhdHRhY2htZW50LXBob3RvIiwiYXR0YWNobWVudC1lLXB1YiIsImF0dGFjaG1lbnQtemlwLWZpbGUiLCJhdHRhY2htZW50LXRleHQtZmlsZSIsImFkZC1lcXVpcG1lbnQiLCJhZGQtYWN0aXZpdHkiLCJhY3Rpdml0eS1pbmRpdmlkdWFsIiwiYWN0aXZpdHktMiIsImFkZC1hY3Rpdml0eS0yIiwiYWN0aXZpdHktaXRlbXMiLCJhY3Rpdml0eS1hc3NpZ25lZC10by1nb2FsIiwic3RhdHVzLWNvbXBsZXRlZCIsInN0YXR1cy1lcnJvciIsInN0YXR1cy1pbmFjdGl2ZSIsInN0YXR1cy1pbi1wcm9jZXNzIiwiYmxhbmstdGFnLTIiLCJjYXJ0LWZ1bGwiLCJsb2NhdGUtbWUiLCJwYWdpbmciLCJjb21wYW55LXZpZXciLCJkb2N1bWVudC10ZXh0IiwiZXhwbG9yZXIiLCJwZXJzb25uZWwtdmlldyIsInNvcnRpbmctcmFua2luZyIsImRyaWxsLWRvd24iLCJkcmlsbC11cCIsInZkcy1maWxlIiwic2FwLWxvZ28tc2hhcGUiLCJmb2xkZXItZnVsbCIsInN5c3RlbS1leGl0Iiwic3lzdGVtLWV4aXQtMiIsImNsb3NlLWNvbW1hbmQtZmllbGQiLCJvcGVuLWNvbW1hbmQtZmllbGQiLCJzeXMtZW50ZXItMiIsInN5cy1lbnRlciIsInN5cy1oZWxwLTIiLCJzeXMtaGVscCIsInN5cy1iYWNrIiwic3lzLWJhY2stMiIsInN5cy1jYW5jZWwiLCJzeXMtY2FuY2VsLTIiLCJvcGVuLWZvbGRlciIsInN5cy1maW5kLW5leHQiLCJzeXMtZmluZCIsInN5cy1tb25pdG9yIiwic3lzLXByZXYtcGFnZSIsInN5cy1maXJzdC1wYWdlIiwic3lzLW5leHQtcGFnZSIsInN5cy1sYXN0LXBhZ2UiLCJnZW5lcmF0ZS1zaG9ydGN1dCIsImNyZWF0ZS1zZXNzaW9uIiwiZGlzcGxheS1tb3JlIiwiZW50ZXItbW9yZSIsInpvb20taW4iLCJ6b29tLW91dCIsImhlYWRlciIsImRldGFpbC12aWV3IiwiY29sbGFwc2UiLCJleHBhbmQiLCJwb3NpdGl2ZSIsIm5lZ2F0aXZlIiwiZGlzcGxheSIsIm1lbnUyIiwicmVkbyIsInVuZG8iLCJuYXZpZ2F0aW9uLXVwLWFycm93IiwibmF2aWdhdGlvbi1kb3duLWFycm93IiwiZG93biIsInVwIiwic2hlbGYiLCJiYWNrZ3JvdW5kIiwicmVzaXplIiwibW92ZSIsInNob3ciLCJoaWRlIiwibmF2LWJhY2siLCJlcnJvciIsInNsaW0tYXJyb3ctcmlnaHQiLCJzbGltLWFycm93LWxlZnQiLCJzbGltLWFycm93LWRvd24iLCJzbGltLWFycm93LXVwIiwiZm9yd2FyZCIsIm92ZXJmbG93IiwidmFsdWUtaGVscCIsIm11bHRpLXNlbGVjdCIsImV4aXQtZnVsbC1zY3JlZW4iLCJzeXMtYWRkIiwic3lzLW1pbnVzIiwiZHJvcGRvd24iLCJleHBhbmQtZ3JvdXAiLCJjb2xsYXBzZS1ncm91cCIsInZlcnRpY2FsLWdyaXAiLCJob3Jpem9udGFsLWdyaXAiLCJzb3J0LWRlc2NlbmRpbmciLCJzb3J0LWFzY2VuZGluZyIsImFycm93LWRvd24iXTt2YXIgYT1bImUwMDAiLCJlMDAxIiwiZTAwMiIsImUwMDMiLCJlMDA0IiwiZTAwNSIsImUwMDYiLCJlMDA3IiwiZTAwOCIsImUwMDkiLCJlMDBhIiwiZTAwYiIsImUwMGMiLCJlMDBkIiwiZTAwZSIsImUwMGYiLCJlMDEwIiwiZTAxMSIsImUwMTIiLCJlMDEzIiwiZTAxNCIsImUwMTUiLCJlMDE2IiwiZTAxNyIsImUwMTgiLCJlMDE5IiwiZTAxYSIsImUwMWIiLCJlMDFjIiwiZTAxZCIsImUwMWUiLCJlMDFmIiwiZTAyMCIsImUwMjEiLCJlMDIyIiwiZTAyMyIsImUwMjQiLCJlMDI1IiwiZTAyNiIsImUwMjciLCJlMDI4IiwiZTAyOSIsImUwMmEiLCJlMDJiIiwiZTAyYyIsImUwMmQiLCJlMDJlIiwiZTAyZiIsImUwMzAiLCJlMDMxIiwiZTAzMiIsImUwMzMiLCJlMDM0IiwiZTAzNSIsImUwMzYiLCJlMDM3IiwiZTAzOCIsImUwMzkiLCJlMDNhIiwiZTAzYiIsImUwM2MiLCJlMDNkIiwiZTAzZSIsImUwM2YiLCJlMDQwIiwiZTA0MSIsImUwNDIiLCJlMDQzIiwiZTA0NCIsImUwNDUiLCJlMDQ2IiwiZTA0NyIsImUwNDgiLCJlMDQ5IiwiZTA0YSIsImUwNGIiLCJlMDRjIiwiZTA0ZCIsImUwNGUiLCJlMDRmIiwiZTA1MCIsImUwNTEiLCJlMDUyIiwiZTA1MyIsImUwNTQiLCJlMDU1IiwiZTA1NiIsImUwNTciLCJlMDU4IiwiZTA1OSIsImUwNWEiLCJlMDViIiwiZTA1YyIsImUwNWQiLCJlMDVlIiwiZTA1ZiIsImUwNjAiLCJlMDYxIiwiZTA2MiIsImUwNjMiLCJlMDY0IiwiZTA2NSIsImUwNjYiLCJlMDY3IiwiZTA2OCIsImUwNjkiLCJlMDZhIiwiZTA2YiIsImUwNmMiLCJlMDZkIiwiZTA2ZSIsImUwNmYiLCJlMDcwIiwiZTA3MSIsImUwNzIiLCJlMDczIiwiZTA3NCIsImUwNzUiLCJlMDc2IiwiZTA3NyIsImUwNzgiLCJlMDc5IiwiZTA3YSIsImUwN2IiLCJlMDdjIiwiZTA3ZCIsImUwN2UiLCJlMDdmIiwiZTA4MCIsImUwODEiLCJlMDgyIiwiZTA4MyIsImUwODQiLCJlMDg1IiwiZTA4NiIsImUwODciLCJlMDg4IiwiZTA4OSIsImUwOGEiLCJlMDhiIiwiZTA4YyIsImUwOGQiLCJlMDhlIiwiZTA4ZiIsImUwOTAiLCJlMDkxIiwiZTA5MiIsImUwOTMiLCJlMDk0IiwiZTA5NSIsImUwOTYiLCJlMDk3IiwiZTA5OCIsImUwOTkiLCJlMDlhIiwiZTA5YiIsImUwOWMiLCJlMDlkIiwiZTA5ZSIsImUwOWYiLCJlMGEwIiwiZTBhMSIsImUwYTIiLCJlMGEzIiwiZTBhNCIsImUwYTUiLCJlMGE2IiwiZTBhNyIsImUwYTgiLCJlMGE5IiwiZTBhYSIsImUwYWIiLCJlMGFjIiwiZTBhZCIsImUwYWUiLCJlMGFmIiwiZTBiMCIsImUwYjEiLCJlMGIyIiwiZTBiMyIsImUwYjQiLCJlMGI1IiwiZTBiNiIsImUwYjciLCJlMGI4IiwiZTBiOSIsImUwYmEiLCJlMGJiIiwiZTBiYyIsImUwYmQiLCJlMGJlIiwiZTBiZiIsImUwYzAiLCJlMGMxIiwiZTBjMiIsImUwYzMiLCJlMGM0IiwiZTBjNSIsImUwYzYiLCJlMGM3IiwiZTBjOCIsImUwYzkiLCJlMGNhIiwiZTBjYiIsImUwY2MiLCJlMGNkIiwiZTBjZSIsImUwY2YiLCJlMGQwIiwiZTBkMSIsImUwZDIiLCJlMGQzIiwiZTBkNCIsImUwZDUiLCJlMGQ2IiwiZTBkNyIsImUwZDgiLCJlMGQ5IiwiZTBkYSIsImUwZGIiLCJlMGRjIiwiZTBkZCIsImUwZGUiLCJlMGRmIiwiZTBlMCIsImUwZTEiLCJlMGUyIiwiZTBlMyIsImUwZTQiLCJlMGU1IiwiZTBlNiIsImUwZTciLCJlMGU4IiwiZTBlOSIsImUwZWEiLCJlMGViIiwiZTBlYyIsImUwZWQiLCJlMGVlIiwiZTBlZiIsImUwZjAiLCJlMGYxIiwiZTBmMiIsImUwZjMiLCJlMGY0IiwiZTBmNSIsImUwZjYiLCJlMGY3IiwiZTBmOCIsImUwZjkiLCJlMGZhIiwiZTBmYiIsImUwZmMiLCJlMGZkIiwiZTBmZSIsImUwZmYiLCJlMTAwIiwiZTEwMSIsImUxMDIiLCJlMTAzIiwiZTEwNCIsImUxMDUiLCJlMTA2IiwiZTEwNyIsImUxMDgiLCJlMTA5IiwiZTEwYSIsImUxMGIiLCJlMTBjIiwiZTEwZCIsImUxMGUiLCJlMTBmIiwiZTExMCIsImUxMTEiLCJlMTEyIiwiZTExMyIsImUxMTQiLCJlMTE1IiwiZTExNiIsImUxMTciLCJlMTE4IiwiZTExOSIsImUxMWEiLCJlMTFiIiwiZTExYyIsImUxMWQiLCJlMTFlIiwiZTExZiIsImUxMjAiLCJlMTIxIiwiZTEyMiIsImUxMjMiLCJlMTI0IiwiZTEyNSIsImUxMjYiLCJlMTI3IiwiZTEyOCIsImUxMjkiLCJlMTJhIiwiZTEyYiIsImUxMmMiLCJlMTJkIiwiZTEyZSIsImUxMmYiLCJlMTMwIiwiZTEzMSIsImUxMzIiLCJlMTMzIiwiZTEzNCIsImUxMzUiLCJlMTM2IiwiZTEzNyIsImUxMzgiLCJlMTM5IiwiZTEzYSIsImUxM2IiLCJlMTNjIiwiZTEzZCIsImUxM2UiLCJlMTNmIiwiZTE0MCIsImUxNDEiLCJlMTQyIiwiZTE0MyIsImUxNDQiLCJlMTQ1IiwiZTE0NiIsImUxNDciLCJlMTQ4IiwiZTE0OSIsImUxNGEiLCJlMTRiIiwiZTE0YyIsImUxNGQiLCJlMTRlIiwiZTE0ZiIsImUxNTAiLCJlMTUxIiwiZTE1MiIsImUxNTMiLCJlMTU0IiwiZTE1NSIsImUxNTYiLCJlMTU3IiwiZTE1OCIsImUxNTkiLCJlMTVhIiwiZTE1YiIsImUxNWMiLCJlMTVkIiwiZTE1ZSIsImUxNWYiLCJlMTYwIiwiZTE2MSIsImUxNjIiLCJlMTYzIiwiZTE2NCIsImUxNjUiLCJlMTY2IiwiZTE2NyIsImUxNjgiLCJlMTY5IiwiZTE2YSIsImUxNmIiLCJlMTZjIiwiZTE2ZCIsImUxNmUiLCJlMTZmIiwiZTE3MCIsImUxNzEiLCJlMTcyIiwiZTE3MyIsImUxNzQiLCJlMTc1IiwiZTE3NiIsImUxNzciLCJlMTc4IiwiZTE3OSIsImUxN2EiLCJlMTdiIiwiZTE3YyIsImUxN2QiLCJlMTdlIiwiZTE3ZiIsImUxODAiLCJlMTgxIiwiZTE4MiIsImUxODMiLCJlMTg0IiwiZTE4NSIsImUxODYiLCJlMTg3IiwiZTE4OCIsImUxODkiLCJlMThhIiwiZTE4YiIsImUxOGMiLCJlMThkIiwiZTE4ZSIsImUxOGYiLCJlMTkwIiwiZTE5MSIsImUxOTIiLCJlMTkzIiwiZTE5NCIsImUxOTUiLCJlMTk2IiwiZTE5NyIsImUxOTgiLCJlMTk5IiwiZTE5YSIsImUxOWIiLCJlMTljIiwiZTE5ZCIsImUxOWUiLCJlMTlmIiwiZTFhMCIsImUxYTEiLCJlMWEyIiwiZTFhMyIsImUxYTQiLCJlMWE1IiwiZTFhNiIsImUxYTciLCJlMWE4IiwiZTFhOSIsImUxYWEiLCJlMWFiIiwiZTFhYyIsImUxYWQiLCJlMWFlIiwiZTFhZiIsImUxYjAiLCJlMWIxIiwiZTFiMiIsImUxYjMiLCJlMWI0IiwiZTFiNSIsImUxYjYiLCJlMWI3IiwiZTFiOCIsImUxYjkiLCJlMWJhIiwiZTFiYiIsImUxYmMiLCJlMWJkIiwiZTFiZSIsImUxYmYiLCJlMWMwIiwiZTFjMSIsImUxYzIiLCJlMWMzIiwiZTFjNCIsImUxYzUiLCJlMWM2IiwiZTFjNyIsImUxYzgiLCJlMWM5IiwiZTFjYSIsImUxY2IiLCJlMWNjIiwiZTFjZCIsImUxY2UiLCJlMWNmIiwiZTFkMCIsImUxZDEiLCJlMWQyIiwiZTFkMyIsImUxZDQiLCJlMWQ1IiwiZTFkNiIsImUxZDciLCJlMWQ4IiwiZTFkOSIsImUxZGEiLCJlMWRiIiwiZTFkYyIsImUxZGQiLCJlMWRlIiwiZTFkZiIsImUxZTAiLCJlMWUxIiwiZTFlMiIsImUxZTMiLCJlMWU0IiwiZTFlNSIsImUxZTYiLCJlMWU3IiwiZTFlOCIsImUxZTkiLCJlMWVhIiwiZTFlYiIsImUxZWMiLCJlMWVkIiwiZTFlZSIsImUxZWYiLCJlMWYwIiwiZTFmMSIsImUxZjIiLCJlMWYzIiwiZTFmNCIsImUxZjUiLCJlMWY2IiwiZTFmNyIsImUxZjgiLCJlMWY5IiwiZTIwMCIsImUxZmEiLCJlMWZiIiwiZTFmYyIsImUxZmQiLCJlMWZlIl07dmFyIG09eyJjaGFsa2JvYXJkIjp0cnVlLCJjYWxlbmRhciI6dHJ1ZSwiYWxwaGFiZXRpY2FsLW9yZGVyIjp0cnVlLCJhZGRyZXNzLWJvb2siOnRydWUsImhpbnQiOnRydWUsInBheW1lbnQtYXBwcm92YWwiOnRydWUsImJhdGNoLXBheW1lbnRzIjp0cnVlLCJhcm9iYXNlIjp0cnVlLCJxdWVzdGlvbi1tYXJrIjp0cnVlLCJsZWFkIjp0cnVlLCJsZWFkLW91dGRhdGVkIjp0cnVlLCJzaW1wbGUtcGF5bWVudCI6dHJ1ZSwic2FsZXMtb3JkZXItaXRlbSI6dHJ1ZSwic2FsZXMtb3JkZXIiOnRydWUsInBlci1kaWVtIjp0cnVlLCJwYWlkLWxlYXZlIjp0cnVlLCJwZGYtcmVhZGVyIjp0cnVlLCJteS1zYWxlcy1vcmRlciI6dHJ1ZSwibG9hbiI6dHJ1ZSwiZ2xvYmUiOnRydWUsIndhaXZlciI6dHJ1ZSwidW5wYWlkLWxlYXZlIjp0cnVlLCJjdXN0b21lci1maW5hbmNpYWwtZmFjdC1zaGVldCI6dHJ1ZSwiY3JtLXNhbGVzIjp0cnVlLCJjb21taXNzaW9uLWNoZWNrIjp0cnVlLCJjb2xsZWN0aW9ucy1pbnNpZ2h0Ijp0cnVlLCJjYXBpdGFsLXByb2plY3RzIjp0cnVlLCJidXNpbmVzcy1vbmUiOnRydWUsInRyYXZlbC1leHBlbnNlIjp0cnVlLCJ0cmF2ZWwtZXhwZW5zZS1yZXBvcnQiOnRydWUsInRyYXZlbC1yZXF1ZXN0Ijp0cnVlLCJ0aW1lLW92ZXJ0aW1lIjp0cnVlLCJzYWxlcy1xdW90ZSI6dHJ1ZSwic2FsZXMtbm90aWZpY2F0aW9uIjp0cnVlLCJpbmNpZGVudCI6dHJ1ZSwibW9uZXktYmlsbHMiOnRydWUsInNhbGVzLWRvY3VtZW50Ijp0cnVlLCJvcHBvcnR1bml0aWVzIjp0cnVlLCJleHBlbnNlLXJlcG9ydCI6dHJ1ZSwibW9uaXRvci1wYXltZW50cyI6dHJ1ZSwid2lkZ2V0cyI6dHJ1ZSwic3lzLWhlbHAtMiI6dHJ1ZSwic3lzLWhlbHAiOnRydWUsImFjY2VwdCI6dHJ1ZSwiYWNjb3VudGluZy1kb2N1bWVudC12ZXJpZmljYXRpb24iOnRydWUsImFjdGl2aXRpZXMiOnRydWUsImFjdGl2aXR5LTIiOnRydWUsImFkZC1hY3Rpdml0eSI6dHJ1ZSwiYWRkLWFjdGl2aXR5LTIiOnRydWUsImFwcHJvdmFscyI6dHJ1ZSwiYmJ5ZC1hY3RpdmUtc2FsZXMiOnRydWUsImJ1c2luZXNzLWJ5LWRlc2lnbiI6dHJ1ZSwiY2FydC1hcHByb3ZhbCI6dHJ1ZSwiY29tcGxldGUiOnRydWUsImN1c3RvbWVyLW9yZGVyLWVudHJ5Ijp0cnVlLCJlbXBsb3llZS1hcHByb3ZhbHMiOnRydWUsImhyLWFwcHJvdmFsIjp0cnVlLCJrcGktY29ycG9yYXRlLXBlcmZvcm1hbmNlIjp0cnVlLCJrcGktbWFuYWdpbmctbXktYXJlYSI6dHJ1ZSwic3VydmV5Ijp0cnVlLCJzeXMtZW50ZXIiOnRydWUsInN5cy1lbnRlci0yIjp0cnVlLCJ0YXNrIjp0cnVlfTt2YXIgcz0iU0FQLWljb25zIjt2YXIgcD0ic2FwLWljb24iO3ZhciByPXt9O3ZhciBmPWZhbHNlO3ZhciBiPWZ1bmN0aW9uKCl7dGhyb3cgbmV3IEVycm9yKCl9O2IuY3JlYXRlQ29udHJvbEJ5VVJJPWZ1bmN0aW9uKGMsZCl7aWYodHlwZW9mIGM9PT0ic3RyaW5nIil7Yz17c3JjOmN9fWlmKGMmJmMuc3JjKXt2YXIgUz1jLnNyYyxDPWQ7aWYoYi5pc0ljb25VUkkoUykpe2lmKCFzYXAudWkuY29yZS5JY29uKXtxLnNhcC5yZXF1aXJlKCJzYXAudWkuY29yZS5JY29uIil9Qz1zYXAudWkuY29yZS5JY29uO2lmKGMudGFwKXtjLnByZXNzPWMudGFwO2RlbGV0ZSBjLnRhcH19aWYodHlwZW9mIEM9PT0iZnVuY3Rpb24iKXtyZXR1cm4gbmV3IEMoYyl9fX07Yi5hZGRJY29uPWZ1bmN0aW9uKGksYyxkKXtpZih0eXBlb2YgZD09PSJzdHJpbmciKXtkPXtmb250RmFtaWx5OmFyZ3VtZW50c1syXSxjb250ZW50OmFyZ3VtZW50c1szXSxvdmVyV3JpdGU6ISFhcmd1bWVudHNbNF0sc3VwcHJlc3NNaXJyb3Jpbmc6ISFhcmd1bWVudHNbNV19fWlmKCFyW2NdKXtyW2NdPXt9fXZhciBlPXJbY10sZyxvPWVbaV0saDtpZihvJiYoYz09PXVuZGVmaW5lZHx8IWQub3ZlcldyaXRlKSl7cS5zYXAubG9nLndhcm5pbmcoImljb24gd2l0aCB0aGUgc2FtZSBpY29uTmFtZSBpbiB0aGUgY29sbGVjdGlvbiBhbHJlYWR5IGV4aXN0cywgc3BlY2lmeSB0aGUgbGFzdCBwYXJhbWV0ZXIgdG8gdHJ1ZSBpbiBvcmRlciB0byBvdmVyd3JpdGUiKTtyZXR1cm59aD17cHJvdG9jb2w6cCxob3N0bmFtZTpjfHxpLHBhdGg6Yz9pOnVuZGVmaW5lZH07Zz17bmFtZTppLGNvbGxlY3Rpb246Yyx1cmk6d2luZG93LlVSSS5idWlsZChoKSxmb250RmFtaWx5OmQuZm9udEZhbWlseSxjb250ZW50OlN0cmluZy5mcm9tQ2hhckNvZGUocGFyc2VJbnQoZC5jb250ZW50LDE2KSksc3VwcHJlc3NNaXJyb3Jpbmc6ZC5zdXBwcmVzc01pcnJvcmluZyxza2lwTWlycm9yaW5nOmQuc3VwcHJlc3NNaXJyb3Jpbmd9O2VbaV09ZztyZXR1cm4gZ307Yi5nZXRJY29uVVJJPWZ1bmN0aW9uKGksYyl7dmFyIGQ9cltjXTtpZihkJiZkW2ldKXtyZXR1cm4gZFtpXS51cml9fTtiLmdldEljb25JbmZvPWZ1bmN0aW9uKGksYyl7Yi5pbnNlcnRGb250RmFjZVN0eWxlKCk7dmFyIFA9aSxkPWMsZSxnO2lmKHRoaXMuaXNJY29uVVJJKGkpKXtlPXdpbmRvdy5VUkkucGFyc2UoaSk7aWYoZS5wYXRoLmxlbmd0aD09PTEpe1A9ZS5ob3N0bmFtZTtkPXVuZGVmaW5lZH1lbHNle2Q9ZS5ob3N0bmFtZTtQPWUucGF0aC5zdWJzdHIoMSxlLnBhdGgubGVuZ3RoKX19Zz1yW2RdO3JldHVybiBnJiZnW1BdfTtiLmlzSWNvblVSST1mdW5jdGlvbih1KXtpZighdSl7cmV0dXJuIGZhbHNlfXZhciBjPXdpbmRvdy5VUkkucGFyc2UodSk7cmV0dXJuKGMucHJvdG9jb2w9PT1wKSYmISFjLmhvc3RuYW1lfTtiLmdldEljb25Db2xsZWN0aW9uTmFtZXM9ZnVuY3Rpb24oKXt2YXIgbj1bXTtxLm1hcChyLGZ1bmN0aW9uKHYsayl7bi5wdXNoKGspfSk7cmV0dXJuIG59O2IuZ2V0SWNvbk5hbWVzPWZ1bmN0aW9uKGMpe3ZhciBkPXJbY10sbj1bXTtxLm1hcChkLGZ1bmN0aW9uKHYsayl7bi5wdXNoKGspfSk7cmV0dXJuIG59O2IuaW5zZXJ0Rm9udEZhY2VTdHlsZT1mdW5jdGlvbigpe2lmKGYpe3JldHVybn12YXIgRj1xLnNhcC5nZXRNb2R1bGVQYXRoKCJzYXAudWkuY29yZSIsJy8nKSsidGhlbWVzL2Jhc2UvZm9udHMvIix3LGMsZCxpO2lmKCEhc2FwLnVpLkRldmljZS5icm93c2VyLmludGVybmV0X2V4cGxvcmVyJiZzYXAudWkuRGV2aWNlLmJyb3dzZXIudmVyc2lvbjwxMCYmd2luZG93LnNlbGYhPT13aW5kb3cudG9wKXtGPWIuX2NhbGNBYnNQYXRoKEYsd2luZG93LmxvY2F0aW9uLmhyZWYpfWQ9IkBmb250LWZhY2UgeyIrImZvbnQtZmFtaWx5OiAnU0FQLWljb25zJzsiKyJzcmM6IHVybCgnIitGKyJTQVAtaWNvbnMuZW90Jyk7Iisic3JjOiB1cmwoJyIrRisiU0FQLWljb25zLmVvdD8jaWVmaXgnKSBmb3JtYXQoJ2VtYmVkZGVkLW9wZW50eXBlJyksIisidXJsKCciK0YrIlNBUC1pY29ucy50dGYnKSBmb3JtYXQoJ3RydWV0eXBlJyk7IisiZm9udC13ZWlnaHQ6IG5vcm1hbDsiKyJmb250LXN0eWxlOiBub3JtYWw7IisifSI7cSgnaGVhZCcpLmFwcGVuZCgnPHN0eWxlIHR5cGU9InRleHQvY3NzIj4nK2QrJzwvc3R5bGU+Jyk7Zj10cnVlfTtiLl9jYWxjQWJzUGF0aD1mdW5jdGlvbihSLEIpe0I9QiYmQi5yZXBsYWNlKC9cPy4qfCMuKi9nLCIiKTt2YXIgdT1uZXcgd2luZG93LlVSSShSKSxBPXUuYWJzb2x1dGVUbyhCKTtyZXR1cm4gQS5ocmVmKCl9O2IuX2lzTWlycm9yaW5nU2tpcHBlZD1mdW5jdGlvbihpKXtyZXR1cm4hIW1baV19O3EuZWFjaChJLGZ1bmN0aW9uKGksbil7Yi5hZGRJY29uKG4sdW5kZWZpbmVkLHtmb250RmFtaWx5OnMsY29udGVudDphW2ldLHN1cHByZXNzTWlycm9yaW5nOmIuX2lzTWlycm9yaW5nU2tpcHBlZChuKX0pfSk7cmV0dXJuIGJ9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS5JY29uUmVuZGVyZXInKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS5JY29uUmVuZGVyZXInKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9JY29uUmVuZGVyZXIiLFsianF1ZXJ5LnNhcC5nbG9iYWwiXSxmdW5jdGlvbihxKXsidXNlIHN0cmljdCI7dmFyIEk9e307SS5yZW5kZXI9ZnVuY3Rpb24ocixjKXtpZighYy5nZXRWaXNpYmxlKCkpe3JldHVybn12YXIgaT1zYXAudWkuY29yZS5JY29uUG9vbC5nZXRJY29uSW5mbyhjLmdldFNyYygpKSx3PWMuZ2V0V2lkdGgoKSxoPWMuZ2V0SGVpZ2h0KCksQz1jLmdldENvbG9yKCksYj1jLmdldEJhY2tncm91bmRDb2xvcigpLHM9Yy5nZXRTaXplKCksdD1jLmdldFRvb2x0aXBfQXNTdHJpbmcoKSxUPShzYXAudWkuRGV2aWNlLmJyb3dzZXIuaW50ZXJuZXRfZXhwbG9yZXImJnNhcC51aS5EZXZpY2UuYnJvd3Nlci52ZXJzaW9uPDkpO3Iud3JpdGUoIjxzcGFuIik7ci53cml0ZUNvbnRyb2xEYXRhKGMpO2lmKCFjLmdldERlY29yYXRpdmUoKSl7ci53cml0ZUF0dHJpYnV0ZSgidGFiaW5kZXgiLDApfWlmKHQpe3Iud3JpdGVBdHRyaWJ1dGVFc2NhcGVkKCJ0aXRsZSIsdCl9aWYoaSl7aWYoIVQpe3Iud3JpdGVBdHRyaWJ1dGUoImRhdGEtc2FwLXVpLWljb24tY29udGVudCIsaS5jb250ZW50KX1yLmFkZFN0eWxlKCJmb250LWZhbWlseSIsIiciK2kuZm9udEZhbWlseSsiJyIpfWlmKHcpe3IuYWRkU3R5bGUoIndpZHRoIix3KX1pZihoKXtyLmFkZFN0eWxlKCJoZWlnaHQiLGgpO3IuYWRkU3R5bGUoImxpbmUtaGVpZ2h0IixoKX1pZihDKXtyLmFkZFN0eWxlKCJjb2xvciIsQyl9aWYoYil7ci5hZGRTdHlsZSgiYmFja2dyb3VuZC1jb2xvciIsYil9aWYocyl7ci5hZGRTdHlsZSgiZm9udC1zaXplIixzKX1yLmFkZENsYXNzKCJzYXBVaUljb24iKTtpZihpJiYhaS5zdXBwcmVzc01pcnJvcmluZyl7ci5hZGRDbGFzcygic2FwVWlJY29uTWlycm9ySW5SVEwiKX1yLndyaXRlQ2xhc3NlcygpO3Iud3JpdGVTdHlsZXMoKTtyLndyaXRlKCI+Iik7aWYoaSYmVCl7ci53cml0ZShpLmNvbnRlbnQpfXIud3JpdGUoIjwvc3Bhbj4iKX07cmV0dXJuIEl9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS5Mb2NhbEJ1c3lJbmRpY2F0b3JSZW5kZXJlcicpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLkxvY2FsQnVzeUluZGljYXRvclJlbmRlcmVyJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvTG9jYWxCdXN5SW5kaWNhdG9yUmVuZGVyZXIiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnXSxmdW5jdGlvbihxKXsidXNlIHN0cmljdCI7dmFyIEw9e307KGZ1bmN0aW9uKCl7TC5yZW5kZXI9ZnVuY3Rpb24oUixjKXtSLndyaXRlKCI8ZGl2Iik7Ui53cml0ZUNvbnRyb2xEYXRhKGMpO1IuYWRkQ2xhc3MoInNhcFVpTG9jYWxCdXN5SW5kaWNhdG9yIik7Ui53cml0ZUNsYXNzZXMoKTtSLndyaXRlKCI+Iik7cihSLGMpO1Iud3JpdGUoIjwvZGl2PiIpfTt2YXIgcj1mdW5jdGlvbihSLGMpe3ZhciBJPWMuZ2V0SWQoKTt2YXIgcz1JKyItYW5pbWF0aW9uIjt2YXIgYj1bIi1sZWZ0Qm94IiwiLW1pZGRsZUJveCIsIi1yaWdodEJveCJdO1Iud3JpdGUoJzxkaXYnKTtSLndyaXRlQXR0cmlidXRlKCdpZCcscyk7Ui5hZGRDbGFzcygic2FwVWlMb2NhbEJ1c3lJbmRpY2F0b3JBbmltYXRpb24iKTtSLndyaXRlQ2xhc3NlcygpO1Iud3JpdGUoIj4iKTtmb3IodmFyIGk9MDtpPGIubGVuZ3RoO2krKyl7Ui53cml0ZSgnPGRpdicpO1IuYWRkQ2xhc3MoInNhcFVpTG9jYWxCdXN5SW5kaWNhdG9yQm94Iik7Ui53cml0ZUNsYXNzZXMoKTtSLndyaXRlQXR0cmlidXRlKCJpZCIsSStiW2ldKTtSLndyaXRlKCI+Iik7Ui53cml0ZSgiPC9kaXY+Iil9Ui53cml0ZSgiPC9kaXY+Iil9fSgpKTtyZXR1cm4gTH0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLkxvY2FsZScpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLkxvY2FsZScpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL0xvY2FsZSIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ3NhcC91aS9iYXNlL09iamVjdCddLGZ1bmN0aW9uKHEsQil7InVzZSBzdHJpY3QiO3ZhciBhPS9eKCg/OltBLVpdezIsM30oPzotW0EtWl17M30pezAsM30pfFtBLVpdezR9fFtBLVpdezUsOH0pKD86LShbQS1aXXs0fSkpPyg/Oi0oW0EtWl17Mn18WzAtOV17M30pKT8oLVswLTlBLVpdezUsOH18KD86WzAtOV1bMC05QS1aXXszfSkpKig/Oi0oWzAtOUEtV1laXSg/Oi1bMC05QS1aXXsyLDh9KSspKSooPzotKFgoPzotWzAtOUEtWl17MSw4fSkrKSk/JC9pO3ZhciBMPUIuZXh0ZW5kKCJzYXAudWkuY29yZS5Mb2NhbGUiLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbihsKXtCLmFwcGx5KHRoaXMpO3ZhciByPWEuZXhlYyhsLnJlcGxhY2UoL18vZywiLSIpKTtpZihyPT09bnVsbCl7dGhyb3ciVGhlIGdpdmVuIGxhbmd1YWdlIGRvZXMgbm90IGFkaGVyZSB0byBCQ1AtNDcuIn10aGlzLnNMb2NhbGVJZD1sO3RoaXMuc0xhbmd1YWdlPXJbMV18fG51bGw7dGhpcy5zU2NyaXB0PXJbMl18fG51bGw7dGhpcy5zUmVnaW9uPXJbM118fG51bGw7dGhpcy5zVmFyaWFudD0ocls0XSYmcls0XS5zbGljZSgxKSl8fG51bGw7dGhpcy5zRXh0ZW5zaW9uPXJbNV18fG51bGw7dGhpcy5zUHJpdmF0ZVVzZT1yWzZdfHxudWxsO2lmKHRoaXMuc0xhbmd1YWdlKXt0aGlzLnNMYW5ndWFnZT10aGlzLnNMYW5ndWFnZS50b0xvd2VyQ2FzZSgpfWlmKHRoaXMuc1NjcmlwdCl7dGhpcy5zU2NyaXB0PXRoaXMuc1NjcmlwdC50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoL15bYS16XS8sZnVuY3Rpb24oJCl7cmV0dXJuICQudG9VcHBlckNhc2UoKX0pfWlmKHRoaXMuc1JlZ2lvbil7dGhpcy5zUmVnaW9uPXRoaXMuc1JlZ2lvbi50b1VwcGVyQ2FzZSgpfX0sZ2V0TGFuZ3VhZ2U6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zTGFuZ3VhZ2V9LGdldFNjcmlwdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNTY3JpcHR9LGdldFJlZ2lvbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNSZWdpb259LGdldFZhcmlhbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zVmFyaWFudH0sZ2V0VmFyaWFudFN1YnRhZ3M6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zVmFyaWFudD90aGlzLnNWYXJpYW50LnNwbGl0KCctJyk6W119LGdldEV4dGVuc2lvbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNFeHRlbnNpb259LGdldEV4dGVuc2lvblN1YnRhZ3M6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zRXh0ZW5zaW9uP3RoaXMuc0V4dGVuc2lvbi5zbGljZSgyKS5zcGxpdCgnLScpOltdfSxnZXRQcml2YXRlVXNlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc1ByaXZhdGVVc2V9LGdldFByaXZhdGVVc2VTdWJ0YWdzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc1ByaXZhdGVVc2U/dGhpcy5zUHJpdmF0ZVVzZS5zbGljZSgyKS5zcGxpdCgnLScpOltdfSxoYXNQcml2YXRlVXNlU3VidGFnOmZ1bmN0aW9uKHMpe3JldHVybiBxLmluQXJyYXkocyx0aGlzLmdldFByaXZhdGVVc2VTdWJ0YWdzKCkpPj0wfSx0b1N0cmluZzpmdW5jdGlvbigpe3ZhciByPVt0aGlzLnNMYW5ndWFnZV07aWYodGhpcy5zU2NyaXB0KXtyLnB1c2godGhpcy5zU2NyaXB0KX1pZih0aGlzLnNSZWdpb24pe3IucHVzaCh0aGlzLnNSZWdpb24pfWlmKHRoaXMuc1ZhcmlhbnQpe3IucHVzaCh0aGlzLnNWYXJpYW50KX1pZih0aGlzLnNFeHRlbnNpb24pe3IucHVzaCh0aGlzLnNFeHRlbnNpb24pfWlmKHRoaXMuc1ByaXZhdGVVc2Upe3IucHVzaCh0aGlzLnNQcml2YXRlVXNlKX1yZXR1cm4gci5qb2luKCItIil9LGdldFNBUExvZ29uTGFuZ3VhZ2U6ZnVuY3Rpb24oKXt2YXIgbD10aGlzLnNMYW5ndWFnZXx8IiIsbTtpZihsLmluZGV4T2YoIi0iKT49MCl7bD1sLnNsaWNlKDAsbC5pbmRleE9mKCItIikpfWw9TVtsXXx8bDtpZihsPT09InpoIil7aWYodGhpcy5zU2NyaXB0PT09IkhhbnQifHwoIXRoaXMuc1NjcmlwdCYmdGhpcy5zUmVnaW9uPT09IlRXIikpe2w9InpmIn19aWYodGhpcy5zUHJpdmF0ZVVzZSYmKG09Ly0oc2FwdHJjfHNhcHBzZCkoPzotfCQpL2kuZXhlYyh0aGlzLnNQcml2YXRlVXNlKSkpe2w9KG1bMV0udG9Mb3dlckNhc2UoKT09PSJzYXB0cmMiKT8iMVEiOiIyUSJ9cmV0dXJuIGwudG9VcHBlckNhc2UoKX19KTt2YXIgTT17Iml3IjoiaGUiLCJqaSI6InlpIiwiaW4iOiJpZCIsInNoIjoic3IifTtmdW5jdGlvbiBnKHYpe3ZhciBtPS9cJChbLWEtejAtOUEtWi5fXSspKD86OihbXiRdKikpP1wkLy5leGVjKHYpO3JldHVybihtJiZtWzJdKT9tWzJdLnNwbGl0KC8sLyk6bnVsbH12YXIgQT1nKCIkY2xkci1ydGwtbG9jYWxlczphcixmYSxoZSQiKXx8W107TC5fY2xkckxvY2FsZXM9ZygiJGNsZHItbG9jYWxlczphcixhcl9FRyxhcl9TQSxiZyxicixjYSxjcyxkYSxkZSxkZV9BVCxkZV9DSCxlbCxlbF9DWSxlbixlbl9BVSxlbl9HQixlbl9ISyxlbl9JRSxlbl9JTixlbl9OWixlbl9QRyxlbl9TRyxlbl9aQSxlcyxlc19BUixlc19CTyxlc19DTCxlc19DTyxlc19NWCxlc19QRSxlc19VWSxlc19WRSxldCxmYSxmaSxmcixmcl9CRSxmcl9DQSxmcl9DSCxmcl9MVSxoZSxoaSxocixodSxpZCxpdCxpdF9DSCxqYSxrbyxsdCxsdixuYixubCxubF9CRSxubixwbCxwdCxwdF9QVCxybyxydSxydV9VQSxzayxzbCxzcixzdix0aCx0cix1ayx2aSx6aF9DTix6aF9ISyx6aF9TRyx6aF9UVyQiKTtMLl9jb3JlSTE4bkxvY2FsZXM9ZygiJGNvcmUtaTE4bi1sb2NhbGVzOixhcixiZyxjYSxjcyxkYSxkZSxlbCxlbixlcyxldCxmaSxmcixoaSxocixodSxpdCxpdyxqYSxrbyxsdCxsdixubCxubyxwbCxwdCxybyxydSxzaCxzayxzbCxzdix0aCx0cix1ayx2aSx6aF9DTix6aF9UVyQiKTtMLl9pbXBsaWVzUlRMPWZ1bmN0aW9uKGwpe3ZhciBvPW5ldyBMKGwpO2w9by5nZXRMYW5ndWFnZSgpfHwiIjtsPShsJiZNW2xdKXx8bDt2YXIgcj1vLmdldFJlZ2lvbigpfHwiIjtpZihyJiZxLmluQXJyYXkobCsiXyIrcixBKT49MCl7cmV0dXJuIHRydWV9cmV0dXJuIHEuaW5BcnJheShsLEEpPj0wfTtyZXR1cm4gTH0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLlJlbmRlcmVyJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUuUmVuZGVyZXInKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9SZW5kZXJlciIsWydqcXVlcnkuc2FwLmdsb2JhbCddLGZ1bmN0aW9uKHEpeyJ1c2Ugc3RyaWN0Ijt2YXIgUj17fTtSLmV4dGVuZD1mdW5jdGlvbihwKXt2YXIgYz17X3N1cGVyOnB9O2Zvcih2YXIgZiBpbiBwKXtpZih0eXBlb2YocFtmXSk9PSJmdW5jdGlvbiIpe2NbZl09KGZ1bmN0aW9uKCl7dmFyIG09Zix0PWM7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHQuX3N1cGVyW21dLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19KCkpfX1yZXR1cm4gY307Ui5nZXRUZXh0QWxpZ249ZnVuY3Rpb24odCxUKXt2YXIgcz0iIjt2YXIgYz1zYXAudWkuZ2V0Q29yZSgpLmdldENvbmZpZ3VyYXRpb24oKTtzd2l0Y2godCl7Y2FzZSBzYXAudWkuY29yZS5UZXh0QWxpZ24uRW5kOnN3aXRjaChUKXtjYXNlIkxUUiI6cz0icmlnaHQiO2JyZWFrO2Nhc2UiUlRMIjpzPSJsZWZ0IjticmVhaztkZWZhdWx0OmlmKGMuZ2V0UlRMKCkpe3M9ImxlZnQifWVsc2V7cz0icmlnaHQifWJyZWFrfWJyZWFrO2Nhc2Ugc2FwLnVpLmNvcmUuVGV4dEFsaWduLkJlZ2luOnN3aXRjaChUKXtjYXNlIkxUUiI6cz0ibGVmdCI7YnJlYWs7Y2FzZSJSVEwiOnM9InJpZ2h0IjticmVhaztkZWZhdWx0OmlmKGMuZ2V0UlRMKCkpe3M9InJpZ2h0In1lbHNle3M9ImxlZnQifWJyZWFrfWJyZWFrO2Nhc2Ugc2FwLnVpLmNvcmUuVGV4dEFsaWduLlJpZ2h0OmlmKGMuZ2V0UlRMKCkpe2lmKFQ9PSJMVFIiKXtzPSJyaWdodCJ9fWVsc2V7cz0icmlnaHQifWJyZWFrO2Nhc2Ugc2FwLnVpLmNvcmUuVGV4dEFsaWduLkNlbnRlcjpzPSJjZW50ZXIiO2JyZWFrO2Nhc2Ugc2FwLnVpLmNvcmUuVGV4dEFsaWduLkxlZnQ6aWYoYy5nZXRSVEwoKSl7cz0ibGVmdCJ9ZWxzZXtpZihUPT0iUlRMIil7cz0ibGVmdCJ9fWJyZWFrfXJldHVybiBzfTtyZXR1cm4gUn0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLlNjcm9sbEJhclJlbmRlcmVyJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUuU2Nyb2xsQmFyUmVuZGVyZXInKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9TY3JvbGxCYXJSZW5kZXJlciIsWydqcXVlcnkuc2FwLmdsb2JhbCddLGZ1bmN0aW9uKHEpeyJ1c2Ugc3RyaWN0Ijt2YXIgUz17fTtTLnJlbmRlcj1mdW5jdGlvbihyLHMpe3ZhciBhPXI7dmFyIFI9c2FwLnVpLmdldENvcmUoKS5nZXRDb25maWd1cmF0aW9uKCkuZ2V0UlRMKCk7YS5hZGRDbGFzcygic2FwVWlTY3JvbGxCYXIiKTt2YXIgYjtpZihzYXAudWkuRGV2aWNlLnN1cHBvcnQudG91Y2gpe2I9InNhcFVpU2Nyb2xsQmFyVG91Y2giO2EuYWRkQ2xhc3MoYil9dmFyIHY9cy5nZXRWZXJ0aWNhbCgpO3ZhciBjPXMuZ2V0U2l6ZSgpO3ZhciBDPXMuZ2V0Q29udGVudFNpemUoKTt2YXIgQj1xLnNhcC5zY3JvbGxiYXJTaXplKGIpO3ZhciB3PUIud2lkdGg7dmFyIGg9Qi5oZWlnaHQ7aWYodil7YS53cml0ZSgiPGRpdiIpO2Eud3JpdGVDb250cm9sRGF0YShzKTthLndyaXRlKCIgc3R5bGU9XCJvdmVyZmxvdzpoaWRkZW47d2lkdGg6Iit3KyJweCIpO2lmKGMpe2Eud3JpdGUoIjtoZWlnaHQ6IitjKX1hLndyaXRlKCJcIiIpO2Eud3JpdGVDbGFzc2VzKCk7YS53cml0ZSgiPiIpO2Eud3JpdGUoIjxkaXYgIik7YS53cml0ZUF0dHJpYnV0ZSgiaWQiLHMuZ2V0SWQoKSsiLXNiIik7YS53cml0ZSgiIHN0eWxlPVwid2lkdGg6Iit3KjIrInB4O2hlaWdodDoxMDAlO292ZXJmbG93LXk6c2Nyb2xsO292ZXJmbG93LXg6aGlkZGVuIik7aWYoUil7aWYoKCEoISFzYXAudWkuRGV2aWNlLmJyb3dzZXIuZmlyZWZveCYmc2FwLnVpLkRldmljZS5icm93c2VyLnZlcnNpb249PTMuNikpJiYoISEhc2FwLnVpLkRldmljZS5icm93c2VyLnNhZmFyaSkpe2Eud3JpdGUoIjttYXJnaW4tcmlnaHQ6LSIrdysicHgiKX19ZWxzZXthLndyaXRlKCI7bWFyZ2luLWxlZnQ6LSIrdysicHg7Iil9YS53cml0ZSgiXCI+Iik7YS53cml0ZSgiPGRpdiIpO2Eud3JpdGVBdHRyaWJ1dGUoImlkIixzLmdldElkKCkrIi1zYmNudCIpO2Eud3JpdGUoIiBzdHlsZT1cIndpZHRoOiIrdysicHgiKTtpZihDKXthLndyaXRlKCI7aGVpZ2h0OiIrQyl9YS53cml0ZSgiXCIiKTthLndyaXRlKCI+Iik7YS53cml0ZSgiPC9kaXY+Iik7YS53cml0ZSgiPC9kaXY+Iik7YS53cml0ZSgiPGRpdj4gPHNwYW4gaWQ9IitzLmdldElkKCkrIi1mZnNpemUiKyIgc3R5bGU9J3Bvc2l0aW9uOiBhYnNvbHV0ZTsgdG9wOiAtOTAwMHB4OyBsZWZ0OiAtOTAwMHB4OyB2aXNpYmlsaXR5OiBoaWRkZW47IGxpbmUtaGVpZ2h0OiBub3JtYWw7Jz4gRkYgU2l6ZTwvc3Bhbj48L2Rpdj4iKTthLndyaXRlKCI8L2Rpdj4iKX1lbHNle2Eud3JpdGUoIjxkaXYiKTthLndyaXRlQ29udHJvbERhdGEocyk7YS53cml0ZSgiIHN0eWxlPVwib3ZlcmZsb3c6aGlkZGVuO2hlaWdodDoiK2grInB4Iik7aWYoYyl7YS53cml0ZSgiO3dpZHRoOiIrYyl9YS53cml0ZSgiXCIiKTthLndyaXRlQ2xhc3NlcygpO2Eud3JpdGUoIj4iKTthLndyaXRlKCI8ZGl2ICIpO2Eud3JpdGVBdHRyaWJ1dGUoImlkIixzLmdldElkKCkrIi1zYiIpO2Eud3JpdGUoIiBzdHlsZT1cImhlaWdodDoiK2gqMisicHg7bWFyZ2luLXRvcDotIitoKyJweDtvdmVyZmxvdy14OnNjcm9sbDtvdmVyZmxvdy15OmhpZGRlblwiPiIpO2Eud3JpdGUoIjxkaXYiKTthLndyaXRlQXR0cmlidXRlKCJpZCIscy5nZXRJZCgpKyItc2JjbnQiKTthLndyaXRlKCIgc3R5bGU9XCJoZWlnaHQ6IitoKyJweCIpO2lmKEMpe2Eud3JpdGUoIjt3aWR0aDoiK0MpfWEud3JpdGUoIlwiIik7YS53cml0ZSgiPiIpO2Eud3JpdGUoIjwvZGl2PiIpO2Eud3JpdGUoIjwvZGl2PiIpO2Eud3JpdGUoIjwvZGl2PiIpfX07cmV0dXJuIFN9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS5UaGVtZUNoZWNrJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUuVGhlbWVDaGVjaycpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL1RoZW1lQ2hlY2siLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvRGV2aWNlJywnc2FwL3VpL2Jhc2UvT2JqZWN0JywnanF1ZXJ5LnNhcC5zY3JpcHQnXSxmdW5jdGlvbihxLEQsQil7InVzZSBzdHJpY3QiO3NhcC51aS5fbWF4VGhlbWVDaGVja0N5Y2xlcz0xMDA7dmFyIFQ9Qi5leHRlbmQoInNhcC51aS5jb3JlLlRoZW1lQ2hlY2siLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbihDKXt0aGlzLl9vQ29yZT1DO3RoaXMuX2lDb3VudD0wO3RoaXMuX0NVU1RPTUNTU0NIRUNLPS9cLnNhcFVpVGhlbWVEZXNpZ25lckN1c3RvbUNzcy9pO3RoaXMuX0NVU1RPTUlEPSJzYXAtdWktY29yZS1jdXN0b21jc3MiO3RoaXMuX2N1c3RvbUNTU0FkZGVkPWZhbHNlO3RoaXMuX3RoZW1lQ2hlY2tlZEZvckN1c3RvbT1udWxsO3RoaXMuX21BZGRpdGlvbmFsTGliQ3NzPXt9fSxnZXRJbnRlcmZhY2U6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30sZmlyZVRoZW1lQ2hhbmdlZEV2ZW50OmZ1bmN0aW9uKG8sZil7Yyh0aGlzKTt2YXIgdT1zYXAudWkuX21heFRoZW1lQ2hlY2tDeWNsZXM+MDtpZih1fHxmKXtkLmFwcGx5KHRoaXMsW3RydWVdKX1lbHNle1QudGhlbWVMb2FkZWQ9dHJ1ZX1pZighbyYmIXRoaXMuX3NUaGVtZUNoZWNrSWQpe3RoaXMuX29Db3JlLmZpcmVUaGVtZUNoYW5nZWQoe3RoZW1lOnRoaXMuX29Db3JlLmdldENvbmZpZ3VyYXRpb24oKS5nZXRUaGVtZSgpfSl9fX0pO1QudGhlbWVMb2FkZWQ9ZmFsc2U7VC5jaGVja1N0eWxlPWZ1bmN0aW9uKHMsbCl7aWYodHlwZW9mKHMpPT09InN0cmluZyIpe3M9cS5zYXAuZG9tQnlJZChzKX12YXIgUz1xKHMpO3RyeXt2YXIgcj0hc3x8ISEoKHMuc2hlZXQmJnMuc2hlZXQuY3NzUnVsZXMubGVuZ3RoPjApfHwhIShzLnN0eWxlU2hlZXQmJnMuc3R5bGVTaGVldC5jc3NUZXh0Lmxlbmd0aD4wKXx8ISEocy5pbm5lckhUTUwmJnMuaW5uZXJIVE1MLmxlbmd0aD4wKSk7dmFyIGY9Uy5hdHRyKCJzYXAtdWktcmVhZHkiKTtmPSEhKGY9PT0idHJ1ZSJ8fGY9PT0iZmFsc2UiKTtpZihsKXtxLnNhcC5sb2cuZGVidWcoIlRoZW1lQ2hlY2s6IENoZWNrIHN0eWxlcyAnIitTLmF0dHIoImlkIikrIic6ICIrcisiLyIrZisiLyIrISFzKX1yZXR1cm4gcnx8Zn1jYXRjaChlKXt9aWYobCl7cS5zYXAubG9nLmRlYnVnKCJUaGVtZUNoZWNrOiBFcnJvciBkdXJpbmcgY2hlY2sgc3R5bGVzICciK1MuYXR0cigiaWQiKSsiJzogZmFsc2UvZmFsc2UvIishIXMpfXJldHVybiBmYWxzZX07ZnVuY3Rpb24gYyh0KXtULnRoZW1lTG9hZGVkPWZhbHNlO2lmKHQuX3NUaGVtZUNoZWNrSWQpe3Euc2FwLmNsZWFyRGVsYXllZENhbGwodC5fc1RoZW1lQ2hlY2tJZCk7dC5fc1RoZW1lQ2hlY2tJZD1udWxsO3QuX2lDb3VudD0wO3QuX21BZGRpdGlvbmFsTGliQ3NzPXt9fX1mdW5jdGlvbiBhKHQpe3ZhciBsPXQuX29Db3JlLmdldExvYWRlZExpYnJhcmllcygpO3ZhciBzPXQuX29Db3JlLmdldENvbmZpZ3VyYXRpb24oKS5nZXRUaGVtZSgpO3ZhciBwPXQuX29Db3JlLl9nZXRUaGVtZVBhdGgoInNhcC51aS5jb3JlIixzKSsiY3VzdG9tLmNzcyI7dmFyIHI9dHJ1ZTtpZighIXQuX2N1c3RvbUNTU0FkZGVkJiZ0Ll90aGVtZUNoZWNrZWRGb3JDdXN0b209PT1zKXtsW3QuX0NVU1RPTUlEXT17fX1mdW5jdGlvbiBlKGYpe3I9ciYmVC5jaGVja1N0eWxlKCJzYXAtdWktdGhlbWUtIitmLHRydWUpO2lmKCEhcil7aWYoRC5icm93c2VyLm1zaWUmJkQuYnJvd3Nlci52ZXJzaW9uPD05KXt2YXIgUz1xLnNhcC5kb21CeUlkKCJzYXAtdWktdGhlbWUtIitmKTt2YXIgUj1TJiZTLnNoZWV0JiZTLnNoZWV0LnJ1bGVzJiZTLnNoZWV0LnJ1bGVzLmxlbmd0aD9TLnNoZWV0LnJ1bGVzLmxlbmd0aDowO2lmKFI9PT00MDk1KXt2YXIgbj1wYXJzZUludChxKFMpLmF0dHIoInNhcC11aS1jc3MtY291bnQiKSwxMCk7aWYoaXNOYU4obikpe249MX1lbHNle24rPTF9dmFyIEE9ImllOV8iK247dmFyIGc9dGhpcy5uYW1lKyItIitBO3ZhciBMPSJzYXAtdWktdGhlbWUtIitnO2lmKCF0Ll9tQWRkaXRpb25hbExpYkNzc1tnXSYmIXEuc2FwLmRvbUJ5SWQoTCkpe3QuX21BZGRpdGlvbmFsTGliQ3NzW2ddPXtuYW1lOnRoaXMubmFtZX07dmFyIG87aWYoZiE9PXRoaXMubmFtZSl7bz1xLnNhcC5kb21CeUlkKCJzYXAtdWktdGhlbWUtIit0aGlzLm5hbWUpfWVsc2V7bz1TfXZhciBoPW5ldyBVUkkoby5nZXRBdHRyaWJ1dGUoImhyZWYiKSk7dmFyIGk9aC5zdWZmaXgoKTt2YXIgRj1oLmZpbGVuYW1lKCk7aWYoaS5sZW5ndGg+MCl7aT0iLiIraTtGPUYuc2xpY2UoMCwtaS5sZW5ndGgpfWguZmlsZW5hbWUoRisiXyIrQStpKTt2YXIgSD1oLnRvU3RyaW5nKCk7dmFyIGo9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgibGluayIpO2oudHlwZT0idGV4dC9jc3MiO2oucmVsPSJzdHlsZXNoZWV0IjtqLmhyZWY9SDtqLmlkPUw7cShqKS5hdHRyKCJzYXAtdWktY3NzLWNvdW50IixuKS5sb2FkKGZ1bmN0aW9uKCl7cShqKS5hdHRyKCJzYXAtdWktcmVhZHkiLCJ0cnVlIil9KS5lcnJvcihmdW5jdGlvbigpe3EoaikuYXR0cigic2FwLXVpLXJlYWR5IiwiZmFsc2UiKX0pO1MucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoaixTLm5leHRTaWJsaW5nKX19fWlmKHQuX3RoZW1lQ2hlY2tlZEZvckN1c3RvbSE9cyl7aWYoYih0LGYpKXtxLnNhcC5pbmNsdWRlU3R5bGVTaGVldChwLHQuX0NVU1RPTUlEKTt0Ll9jdXN0b21DU1NBZGRlZD10cnVlO3Euc2FwLmxvZy53YXJuaW5nKCJUaGVtZUNoZWNrIGRlbGl2ZXJlZCBjdXN0b20gQ1NTIG5lZWRzIHRvIGJlIGxvYWRlZCwgVGhlbWUgbm90IHlldCBhcHBsaWVkIik7dC5fdGhlbWVDaGVja2VkRm9yQ3VzdG9tPXM7cj1mYWxzZTtyZXR1cm4gZmFsc2V9ZWxzZXt2YXIgaz1xKCJMSU5LW2lkPSciK3QuX0NVU1RPTUlEKyInXSIpO2lmKGsubGVuZ3RoPjApe2sucmVtb3ZlKCk7cS5zYXAubG9nLmRlYnVnKCJDdXN0b20gQ1NTIHJlbW92ZWQiKX10Ll9jdXN0b21DU1NBZGRlZD1mYWxzZX19fX1xLmVhY2gobCxlKTtxLmVhY2godC5fbUFkZGl0aW9uYWxMaWJDc3MsZSk7aWYoIXIpe3Euc2FwLmxvZy53YXJuaW5nKCJUaGVtZUNoZWNrOiBUaGVtZSBub3QgeWV0IGFwcGxpZWQuIil9ZWxzZXt0Ll90aGVtZUNoZWNrZWRGb3JDdXN0b209c31yZXR1cm4gcn1mdW5jdGlvbiBiKHQsbCl7dmFyIHI9MixzPWZhbHNlLFI9QXJyYXkoKTtpZihxLnNhcC5kb21CeUlkKCJzYXAtdWktdGhlbWUtIitsKSl7dmFyIGU9cS5zYXAuZG9tQnlJZCgic2FwLXVpLXRoZW1lLSIrbCk7aWYoZS5zaGVldCl7Uj1lLnNoZWV0LmNzc1J1bGVzfWVsc2UgaWYoZS5zdHlsZVNoZWV0KXtSPWUuc3R5bGVTaGVldC5ydWxlc319aWYoUi5sZW5ndGg9PTApe3Euc2FwLmxvZy53YXJuaW5nKCJDdXN0b20gY2hlY2s6IEZhaWxlZCByZXRyaWV2aW5nIGEgQ1NTIHJ1bGUgZnJvbSBzdHlsZXNoZWV0ICIrbCk7cmV0dXJuIGZhbHNlfWZvcih2YXIgaT0wOyhpPHImJmk8Ui5sZW5ndGgpO2krKyl7aWYodC5fQ1VTVE9NQ1NTQ0hFQ0sudGVzdChSW2ldLnNlbGVjdG9yVGV4dCkpe3M9dHJ1ZX19cmV0dXJuIHN9ZnVuY3Rpb24gZChmKXt0aGlzLl9pQ291bnQrKzt2YXIgZT10aGlzLl9pQ291bnQ+c2FwLnVpLl9tYXhUaGVtZUNoZWNrQ3ljbGVzO2lmKCFhKHRoaXMpJiYhZSl7dGhpcy5fc1RoZW1lQ2hlY2tJZD1xLnNhcC5kZWxheWVkQ2FsbCgyLHRoaXMsZCl9ZWxzZSBpZighZil7Yyh0aGlzKTtULnRoZW1lTG9hZGVkPXRydWU7dGhpcy5fb0NvcmUuZmlyZVRoZW1lQ2hhbmdlZCh7dGhlbWU6dGhpcy5fb0NvcmUuZ2V0Q29uZmlndXJhdGlvbigpLmdldFRoZW1lKCl9KTtpZihlKXtxLnNhcC5sb2cud2FybmluZygiVGhlbWVDaGVjazogbWF4LiBjaGVjayBjeWNsZXMgcmVhY2hlZC4iKX19ZWxzZXtULnRoZW1lTG9hZGVkPXRydWV9fXJldHVybiBUfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUuVmFsdWVTdGF0ZVN1cHBvcnQnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS5WYWx1ZVN0YXRlU3VwcG9ydCcpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL1ZhbHVlU3RhdGVTdXBwb3J0IixbJ2pxdWVyeS5zYXAuZ2xvYmFsJ10sZnVuY3Rpb24ocSl7InVzZSBzdHJpY3QiO3ZhciBWPXt9O3ZhciB0PW51bGw7dmFyIGU9ZnVuY3Rpb24oKXtpZighdCl7dD17fTt2YXIgcj1zYXAudWkuZ2V0Q29yZSgpLmdldExpYnJhcnlSZXNvdXJjZUJ1bmRsZSgic2FwLnVpLmNvcmUiKTt0W3NhcC51aS5jb3JlLlZhbHVlU3RhdGUuRXJyb3JdPXIuZ2V0VGV4dCgiVkFMVUVfU1RBVEVfRVJST1IiKTt0W3NhcC51aS5jb3JlLlZhbHVlU3RhdGUuV2FybmluZ109ci5nZXRUZXh0KCJWQUxVRV9TVEFURV9XQVJOSU5HIik7dFtzYXAudWkuY29yZS5WYWx1ZVN0YXRlLlN1Y2Nlc3NdPXIuZ2V0VGV4dCgiVkFMVUVfU1RBVEVfU1VDQ0VTUyIpfX07Vi5lbnJpY2hUb29sdGlwPWZ1bmN0aW9uKEUsVCl7aWYoIVQmJkUuZ2V0VG9vbHRpcCgpKXtyZXR1cm4gdW5kZWZpbmVkfWlmKEUuZ2V0VmFsdWVTdGF0ZSl7dmFyIHM9RS5nZXRWYWx1ZVN0YXRlKCk7aWYocyYmKHMhPXNhcC51aS5jb3JlLlZhbHVlU3RhdGUuTm9uZSkpe2UoKTtyZXR1cm4oVD9UKyIgLSAiOiIiKSt0W3NdfX1yZXR1cm4gVH07Vi5nZXRBZGRpdGlvbmFsVGV4dD1mdW5jdGlvbihFKXt2YXIgcj1udWxsO2lmKEUuZ2V0VmFsdWVTdGF0ZSl7dmFyIHM9RS5nZXRWYWx1ZVN0YXRlKCk7aWYocyYmKHMhPXNhcC51aS5jb3JlLlZhbHVlU3RhdGUuTm9uZSkpe2UoKTtyPXRbc119fXJldHVybiByfTtyZXR1cm4gVn0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLlhNTFRlbXBsYXRlUHJvY2Vzc29yJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUuWE1MVGVtcGxhdGVQcm9jZXNzb3InKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9YTUxUZW1wbGF0ZVByb2Nlc3NvciIsWydqcXVlcnkuc2FwLmdsb2JhbCddLGZ1bmN0aW9uKHEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBwKHQsdixuLGMpe3ZhciBiPXNhcC51aS5iYXNlLk1hbmFnZWRPYmplY3QuYmluZGluZ1BhcnNlcih2LGMsdHJ1ZSk7aWYoYiYmdHlwZW9mIGI9PT0ib2JqZWN0Iil7cmV0dXJuIGJ9dmFyIFY9dj1ifHx2O3ZhciBUPXNhcC51aS5iYXNlLkRhdGFUeXBlLmdldFR5cGUodCk7aWYoVCl7aWYoVCBpbnN0YW5jZW9mIHNhcC51aS5iYXNlLkRhdGFUeXBlKXtWPVQucGFyc2VWYWx1ZSh2KX19ZWxzZXt0aHJvdyBuZXcgRXJyb3IoIlByb3BlcnR5ICIrbisiIGhhcyB1bmtub3duIHR5cGUgIit0KX1yZXR1cm4gdHlwZW9mIFY9PT0ic3RyaW5nIj9zYXAudWkuYmFzZS5NYW5hZ2VkT2JqZWN0LmJpbmRpbmdQYXJzZXIuZXNjYXBlKFYpOlZ9ZnVuY3Rpb24gbCh4KXtyZXR1cm4geC5sb2NhbE5hbWV8fHguYmFzZU5hbWV8fHgubm9kZU5hbWV9dmFyIFg9e307WC5sb2FkVGVtcGxhdGU9ZnVuY3Rpb24odCxlKXt2YXIgcj1xLnNhcC5nZXRSZXNvdXJjZU5hbWUodCwiLiIrKGV8fCJ2aWV3IikrIi54bWwiKTtyZXR1cm4gcS5zYXAubG9hZFJlc291cmNlKHIpLmRvY3VtZW50RWxlbWVudH07WC5wYXJzZVZpZXdBdHRyaWJ1dGVzPWZ1bmN0aW9uKHgsdixzKXt2YXIgYT12LmdldE1ldGFkYXRhKCkuZ2V0QWxsUHJvcGVydGllcygpO2Zvcih2YXIgaT0wO2k8eC5hdHRyaWJ1dGVzLmxlbmd0aDtpKyspe3ZhciBiPXguYXR0cmlidXRlc1tpXTtpZihiLm5hbWU9PT0nY29udHJvbGxlck5hbWUnKXt2Ll9jb250cm9sbGVyTmFtZT1iLnZhbHVlfWVsc2UgaWYoYi5uYW1lPT09J3Jlc291cmNlQnVuZGxlTmFtZScpe3YuX3Jlc291cmNlQnVuZGxlTmFtZT1iLnZhbHVlfWVsc2UgaWYoYi5uYW1lPT09J3Jlc291cmNlQnVuZGxlVXJsJyl7di5fcmVzb3VyY2VCdW5kbGVVcmw9Yi52YWx1ZX1lbHNlIGlmKGIubmFtZT09PSdyZXNvdXJjZUJ1bmRsZUxvY2FsZScpe3YuX3Jlc291cmNlQnVuZGxlTG9jYWxlPWIudmFsdWV9ZWxzZSBpZihiLm5hbWU9PT0ncmVzb3VyY2VCdW5kbGVBbGlhcycpe3YuX3Jlc291cmNlQnVuZGxlQWxpYXM9Yi52YWx1ZX1lbHNlIGlmKGIubmFtZT09PSdjbGFzcycpe3YuYWRkU3R5bGVDbGFzcyhiLnZhbHVlKX1lbHNlIGlmKCFzW2IubmFtZV0mJmFbYi5uYW1lXSl7c1tiLm5hbWVdPXAoYVtiLm5hbWVdLnR5cGUsYi52YWx1ZSxiLm5hbWUsdi5fb0NvbnRhaW5pbmdWaWV3Lm9Db250cm9sbGVyKX19fTtYLnBhcnNlVGVtcGxhdGU9ZnVuY3Rpb24oeCx2KXt2YXIgcj1bXTt2YXIgYz11bmRlZmluZWQ7dmFyIEM9di5zVmlld05hbWV8fHYuX3NGcmFnbWVudE5hbWU7aWYoIUMpe3ZhciB0PXY7dmFyIEw9MDt3aGlsZSgrK0w8MTAwMCYmdCYmdCE9PXQuX29Db250YWluaW5nVmlldyl7dD10Ll9vQ29udGFpbmluZ1ZpZXd9Qz10LnNWaWV3TmFtZX1pZih2LmlzU3ViVmlldygpKXthKHgsdHJ1ZSl9ZWxzZXtiKHgpfXJldHVybiByO2Z1bmN0aW9uIGEoeCxSLEkpe2lmKHgubm9kZVR5cGU9PT0xKXt2YXIgcz1sKHgpO2lmKHgubmFtZXNwYWNlVVJJPT09Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwifHx4Lm5hbWVzcGFjZVVSST09PSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIpe3IucHVzaCgiPCIrcysiICIpO3ZhciBqO2Zvcih2YXIgaT0wO2k8eC5hdHRyaWJ1dGVzLmxlbmd0aDtpKyspe3ZhciBrPXguYXR0cmlidXRlc1tpXTt2YXIgbT1rLnZhbHVlO2lmKGsubmFtZT09PSJpZCIpe209di5fb0NvbnRhaW5pbmdWaWV3LmNyZWF0ZUlkKG0pfXIucHVzaChrLm5hbWUrIj1cIiIrcS5zYXAuZW5jb2RlSFRNTChtKSsiXCIgIil9aWYoUj09PXRydWUpe3IucHVzaCgiZGF0YS1zYXAtdWktcHJlc2VydmUiKyI9XCIiK3YuZ2V0SWQoKSsiXCIgIil9ci5wdXNoKCI+Iik7Yih4KTtyLnB1c2goIjwvIitzKyI+Iil9ZWxzZSBpZihzPT09IkZyYWdtZW50RGVmaW5pdGlvbiImJngubmFtZXNwYWNlVVJJPT09InNhcC51aS5jb3JlIil7Yih4LGZhbHNlLHRydWUpfWVsc2V7dmFyIG49ZSh4KTtmb3IodmFyIGk9MDtpPG4ubGVuZ3RoO2krKyl7dmFyIG89bltpXTtpZih2LmdldE1ldGFkYXRhKCkuaGFzQWdncmVnYXRpb24oImNvbnRlbnQiKSl7di5hZGRBZ2dyZWdhdGlvbigiY29udGVudCIsbyl9ZWxzZSBpZih2LmdldE1ldGFkYXRhKCkuaGFzQXNzb2NpYXRpb24oKCJjb250ZW50IikpKXt2LmFkZEFzc29jaWF0aW9uKCJjb250ZW50IixvKX1yLnB1c2gobyl9fX1lbHNlIGlmKHgubm9kZVR5cGU9PT0zJiYhSSl7dmFyIHU9eC50ZXh0Q29udGVudHx8eC50ZXh0LHc9bCh4LnBhcmVudE5vZGUpO2lmKHUpe2lmKHchPSJzdHlsZSIpe3U9cS5zYXAuZW5jb2RlSFRNTCh1KX1yLnB1c2godSl9fX1mdW5jdGlvbiBiKHgsUixJKXt2YXIgaj14LmNoaWxkTm9kZXM7Zm9yKHZhciBpPTA7aTxqLmxlbmd0aDtpKyspe2EoaltpXSxSLEkpfX1mdW5jdGlvbiBmKG4scyl7dmFyIGk7dmFyIG09c2FwLnVpLmdldENvcmUoKS5nZXRMb2FkZWRMaWJyYXJpZXMoKTtxLmVhY2gobSxmdW5jdGlvbihqLGspe2lmKG49PT1rLm5hbWVzcGFjZXx8bj09PWsubmFtZSl7aT1rLm5hbWUrIi4iKygoay50YWdOYW1lcyYmay50YWdOYW1lc1tzXSl8fHMpfX0pO2k9aXx8bisiLiIrcztxLnNhcC5yZXF1aXJlKGkpO3ZhciBvPXEuc2FwLmdldE9iamVjdChpKTtpZihvKXtyZXR1cm4gb31lbHNle3Euc2FwLmxvZy5lcnJvcigiQ2FuJ3QgZmluZCBvYmplY3QgY2xhc3MgJyIraSsiJyBmb3IgWE1MLXZpZXciLCIiLCJYTUxUZW1wbGF0ZVByb2Nlc3Nvci5qcyIpfX1mdW5jdGlvbiBkKG4pe2lmKG4ubmFtZXNwYWNlVVJJPT09Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwifHxuLm5hbWVzcGFjZVVSST09PSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIpe3ZhciBpPW4uYXR0cmlidXRlc1snaWQnXT9uLmF0dHJpYnV0ZXNbJ2lkJ10udGV4dENvbnRlbnR8fG4uYXR0cmlidXRlc1snaWQnXS50ZXh0Om51bGw7cmV0dXJuW25ldyBzYXAudWkuY29yZS5tdmMuWE1MVmlldyh7aWQ6aT92Ll9vQ29udGFpbmluZ1ZpZXcuY3JlYXRlSWQoaSk6dW5kZWZpbmVkLHhtbE5vZGU6bixjb250YWluaW5nVmlldzp2Ll9vQ29udGFpbmluZ1ZpZXd9KV19ZWxzZXtyZXR1cm4gZShuKX19ZnVuY3Rpb24gZShuKXtpZihsKG4pPT09IkV4dGVuc2lvblBvaW50IiYmbi5uYW1lc3BhY2VVUkk9PT0ic2FwLnVpLmNvcmUiKXtyZXR1cm4gZyhuLHYpfWVsc2V7cmV0dXJuIGgobil9fWZ1bmN0aW9uIGcobix2KXt2YXIgUj11bmRlZmluZWQ7aWYoc2FwLnVpLmNvcmUuQ3VzdG9taXppbmdDb25maWd1cmF0aW9uKXt2YXIgaj1zYXAudWkuY29yZS5DdXN0b21pemluZ0NvbmZpZ3VyYXRpb24uZ2V0Vmlld0V4dGVuc2lvbihDLG4uZ2V0QXR0cmlidXRlKCJuYW1lIikpO2lmKGope2lmKGouY2xhc3NOYW1lKXtxLnNhcC5yZXF1aXJlKGouY2xhc3NOYW1lKTt2YXIgbz1xLnNhcC5nZXRPYmplY3Qoai5jbGFzc05hbWUpO3Euc2FwLmxvZy5pbmZvKCJDdXN0b21pemluZzogVmlldyBleHRlbnNpb24gZm91bmQgZm9yIGV4dGVuc2lvbiBwb2ludCAnIituLmdldEF0dHJpYnV0ZSgibmFtZSIpKyInIGluIFZpZXcgJyIrQysiJzogIitqLmNsYXNzTmFtZSsiOiAiKyhqLnZpZXdOYW1lfHxqLmZyYWdtZW50TmFtZSkpO2lmKGouY2xhc3NOYW1lPT09InNhcC51aS5jb3JlLkZyYWdtZW50Iil7dmFyIEY9bmV3IG8oe3R5cGU6ai50eXBlLGZyYWdtZW50TmFtZTpqLmZyYWdtZW50TmFtZSxjb250YWluaW5nVmlldzp2fSk7Uj0ocS5pc0FycmF5KEYpP0Y6W0ZdKX1lbHNlIGlmKGouY2xhc3NOYW1lPT09InNhcC51aS5jb3JlLm12Yy5WaWV3Iil7dmFyIHY9c2FwLnVpLnZpZXcoe3R5cGU6ai50eXBlLHZpZXdOYW1lOmoudmlld05hbWV9KTtSPVt2XX1lbHNle3Euc2FwLmxvZy53YXJuaW5nKCJDdXN0b21pemluZzogVW5rbm93biBleHRlbnNpb24gY2xhc3NOYW1lIGNvbmZpZ3VyZWQgKGFuZCBpZ25vcmVkKSBpbiBDb21wb25lbnQuanMgZm9yIGV4dGVuc2lvbiBwb2ludCAnIituLmdldEF0dHJpYnV0ZSgibmFtZSIpKyInIGluIFZpZXcgJyIrQysiJzogIitqLmNsYXNzTmFtZSl9fWVsc2V7cS5zYXAubG9nLndhcm5pbmcoIkN1c3RvbWl6aW5nOiBubyBleHRlbnNpb24gY2xhc3NOYW1lIGNvbmZpZ3VyZWQgaW4gQ29tcG9uZW50LmpzIGZvciBleHRlbnNpb24gcG9pbnQgJyIrbi5nZXRBdHRyaWJ1dGUoIm5hbWUiKSsiJyBpbiBWaWV3ICciK0MrIic6ICIrai5jbGFzc05hbWUpfX1lbHNle3Euc2FwLmxvZy5kZWJ1ZygiQ3VzdG9taXppbmc6IG5vIFZpZXcgZXh0ZW5zaW9uIGZvdW5kIGZvciBFeHRlbnNpb25Qb2ludCAnIituLmdldEF0dHJpYnV0ZSgibmFtZSIpKyInIGluIFZpZXcgJyIrQysiJy4iKX19aWYoIVIpe1I9W107dmFyIGs9bi5jaGlsZE5vZGVzO2Zvcih2YXIgaT0wO2k8ay5sZW5ndGg7aSsrKXt2YXIgbT1rW2ldO2lmKG0ubm9kZVR5cGU9PT0xKXtSPXEubWVyZ2UoUixkKG0pKX19fXJldHVybiBSfHxbXX1mdW5jdGlvbiBoKG4pe3ZhciBqPW4ubmFtZXNwYWNlVVJJLG89ZihqLGwobikpLHM9e30sUz0iIixrPVtdLE87aWYoIW8pe3JldHVybltdfXZhciBtPW8uZ2V0TWV0YWRhdGEoKTt2YXIgSj1tLmdldEpTT05LZXlzKCk7Zm9yKHZhciBpPTA7aTxuLmF0dHJpYnV0ZXMubGVuZ3RoO2krKyl7dmFyIHU9bi5hdHRyaWJ1dGVzW2ldO3ZhciBOPXUubmFtZTt2YXIgVj11LnZhbHVlO3ZhciBJPUpbTl07aWYoTj09PSJpZCIpe3NbTl09di5fb0NvbnRhaW5pbmdWaWV3LmNyZWF0ZUlkKFYpO089Vn1lbHNlIGlmKE49PT0iY2xhc3MiKXtTKz1WfWVsc2UgaWYoTj09PSJ2aWV3TmFtZSIpe3NbTl09Vn1lbHNlIGlmKE49PT0iZnJhZ21lbnROYW1lIil7c1tOXT1WO3NbJ2NvbnRhaW5pbmdWaWV3J109di5fb0NvbnRhaW5pbmdWaWV3fWVsc2UgaWYoTj09PSJiaW5kaW5nIil7dmFyIEI9c2FwLnVpLmJhc2UuTWFuYWdlZE9iamVjdC5iaW5kaW5nUGFyc2VyKFYsdi5fb0NvbnRhaW5pbmdWaWV3Lm9Db250cm9sbGVyKTtzLm9iamVjdEJpbmRpbmdzPXMub2JqZWN0QmluZGluZ3N8fHt9O3Mub2JqZWN0QmluZGluZ3NbQi5tb2RlbHx8dW5kZWZpbmVkXT1CfWVsc2UgaWYoTi5pbmRleE9mKCI6Iik+LTEpe2lmKHUubmFtZXNwYWNlVVJJPT09Imh0dHA6Ly9zY2hlbWFzLnNhcC5jb20vc2FwdWk1L2V4dGVuc2lvbi9zYXAudWkuY29yZS5DdXN0b21EYXRhLzEiKXt2YXIgdz1sKHUpO2sucHVzaChuZXcgc2FwLnVpLmNvcmUuQ3VzdG9tRGF0YSh7a2V5OncsdmFsdWU6cCgiYW55IixWLHcsdi5fb0NvbnRhaW5pbmdWaWV3Lm9Db250cm9sbGVyKX0pKX1lbHNlIGlmKE4uaW5kZXhPZigieG1sbnM6IikhPT0wKXtxLnNhcC5sb2cud2FybmluZyh2KyI6IFhNTFZpZXcgcGFyc2VyIGVuY291bnRlcmVkIGFuZCBpZ25vcmVkIGF0dHJpYnV0ZSAnIitOKyInICh2YWx1ZTogJyIrVisiJykgd2l0aCB1bmtub3duIG5hbWVzcGFjZSIpfX1lbHNlIGlmKEkmJkkuX2lLaW5kPT09MCl7c1tOXT1wKEkudHlwZSxWLE4sdi5fb0NvbnRhaW5pbmdWaWV3Lm9Db250cm9sbGVyKX1lbHNlIGlmKEkmJkkuX2lLaW5kPT09MSYmSS5hbHRUeXBlcyl7c1tOXT1wKEkuYWx0VHlwZXNbMF0sVixOLHYuX29Db250YWluaW5nVmlldy5vQ29udHJvbGxlcil9ZWxzZSBpZihJJiZJLl9pS2luZD09PTIpe3ZhciBCPXNhcC51aS5iYXNlLk1hbmFnZWRPYmplY3QuYmluZGluZ1BhcnNlcihWLHYuX29Db250YWluaW5nVmlldy5vQ29udHJvbGxlcik7aWYoQil7c1tOXT1CfWVsc2V7cS5zYXAubG9nLmVycm9yKHYrIjogYWdncmVnYXRpb25zIHdpdGggY2FyZGluYWxpdHkgMC4ubiBvbmx5IGFsbG93IGJpbmRpbmcgcGF0aHMgYXMgYXR0cmlidXRlIHZhbHVlICh3cm9uZyB2YWx1ZTogIitOKyI9JyIrVisiJykiKX19ZWxzZSBpZihJJiZJLl9pS2luZD09PTMpe3NbTl09di5fb0NvbnRhaW5pbmdWaWV3LmNyZWF0ZUlkKFYpfWVsc2UgaWYoSSYmSS5faUtpbmQ9PT00KXtzW05dPXEubWFwKFYuc3BsaXQoL1tccyxdKy9nKSxmdW5jdGlvbihHKXtyZXR1cm4gRz92Ll9vQ29udGFpbmluZ1ZpZXcuY3JlYXRlSWQoRyk6bnVsbH0pfWVsc2UgaWYoSSYmSS5faUtpbmQ9PT01KXt2YXIgRT12Ll9vQ29udGFpbmluZ1ZpZXcub0NvbnRyb2xsZXJbVl07aWYodHlwZW9mKEUpIT09ImZ1bmN0aW9uIil7cS5zYXAubG9nLndhcm5pbmcodisiOiBldmVudCBoYW5kbGVyIGZ1bmN0aW9uIFwiIitWKyJcIiBpcyBub3QgYSBmdW5jdGlvbiBvciBkb2VzIG5vdCBleGlzdCBpbiB0aGUgY29udHJvbGxlci4iKX1pZihFKXtFWyJfc2FwdWlfaGFuZGxlck5hbWUiXT1WO3NbTl09W0Usdi5fb0NvbnRhaW5pbmdWaWV3Lm9Db250cm9sbGVyXX19ZWxzZSBpZihOIT09InhtbG5zIil7cS5zYXAubG9nLndhcm5pbmcodisiOiBYTUxUZW1wbGF0ZVByb2Nlc3NvciBlbmNvdW50ZXJlZCBhbmQgaWdub3JlZCB1bmtub3duIGF0dHJpYnV0ZSAnIitOKyInICh2YWx1ZTogJyIrVisiJykiKX19aWYoay5sZW5ndGg+MCl7cy5jdXN0b21EYXRhPWt9ZnVuY3Rpb24geShuLEEseil7dmFyIEcsSDtmb3IoRz1uLmZpcnN0Q2hpbGQ7RztHPUcubmV4dFNpYmxpbmcpe2lmKEcubm9kZVR5cGU9PT0xKXtIPUcubmFtZXNwYWNlVVJJPT09aiYmeiYmeltsKEcpXTtpZihIKXt5KEcsSCl9ZWxzZSBpZihBKXt2YXIgSz1kKEcpO2Zvcih2YXIgaT0wO2k8Sy5sZW5ndGg7aSsrKXt2YXIgTT1LW2ldO3ZhciBQPUEuX3NOYW1lO2lmKEEubXVsdGlwbGUpe2lmKCFzW1BdKXtzW1BdPVtdfWlmKHR5cGVvZiBzW1BdLnBhdGg9PT0ic3RyaW5nIil7c1tQXS50ZW1wbGF0ZT1NfWVsc2V7c1tQXS5wdXNoKE0pfX1lbHNle3NbUF09TX19fWVsc2UgaWYobChuKSE9PSJGcmFnbWVudERlZmluaXRpb24ifHxuLm5hbWVzcGFjZVVSSSE9PSJzYXAudWkuY29yZSIpe3Rocm93IG5ldyBFcnJvcigiQ2Fubm90IGFkZCBkaXJlY3QgY2hpbGQgd2l0aG91dCBkZWZhdWx0IGFnZ3JlZ2F0aW9uIGRlZmluZWQgZm9yIGNvbnRyb2wgIittLmdldEVsZW1lbnROYW1lKCkpfX1lbHNlIGlmKEcubm9kZVR5cGU9PT0zKXtpZihxLnRyaW0oRy50ZXh0Q29udGVudHx8Ry50ZXh0KSl7dGhyb3cgbmV3IEVycm9yKCJDYW5ub3QgYWRkIHRleHQgbm9kZXMgYXMgZGlyZWN0IGNoaWxkIG9mIGFuIGFnZ3JlZ2F0aW9uLiBGb3IgYWRkaW5nIHRleHQgdG8gYW4gYWdncmVnYXRpb24sIGEgc3Vycm91bmRpbmcgaHRtbCB0YWcgaXMgbmVlZGVkIil9fX19dmFyIEE9bS5nZXREZWZhdWx0QWdncmVnYXRpb24oKTt2YXIgej1tLmdldEFsbEFnZ3JlZ2F0aW9ucygpO3kobixBLHopO2lmKHNhcC51aS5jb3JlLkN1c3RvbWl6aW5nQ29uZmlndXJhdGlvbiYmTyl7dmFyIEQ9c2FwLnVpLmNvcmUuQ3VzdG9taXppbmdDb25maWd1cmF0aW9uLmdldEN1c3RvbVByb3BlcnRpZXMoQyxPKTtpZihEKXtzPXEuZXh0ZW5kKHMsRCk7cS5zYXAubG9nLmluZm8oIkN1c3RvbWl6aW5nOiBDb250cm9sIG1vZGlmaWNhdGlvbiBmb3VuZCBmb3IgQ29udHJvbCAnIitPKyInIGluIFZpZXcgJyIrQysiJzogIitKU09OLnN0cmluZ2lmeShEKSl9ZWxzZXtpZihkb2N1bWVudC5sb2NhdGlvbi5zZWFyY2guaW5kZXhPZigic2FwLXVpLXh4LWRlYnVnQ3VzdG9taXppbmciKT4tMSl7cS5zYXAubG9nLmRlYnVnKCJDdXN0b21pemluZzogbm8gQ29udHJvbCBtb2RpZmljYXRpb24gZm91bmQgZm9yIENvbnRyb2wgJyIrTysiJyBpbiBWaWV3ICciK0MrIicuIil9fX12YXIgRjtpZihzYXAudWkuY29yZS5tdmMuVmlldy5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihvLnByb3RvdHlwZSkmJnR5cGVvZiBvLl9zVHlwZT09PSJzdHJpbmciKXtGPXNhcC51aS52aWV3KHMsdW5kZWZpbmVkLG8uX3NUeXBlKX1lbHNle0Y9bmV3IG8ocyl9aWYoUyYmRi5hZGRTdHlsZUNsYXNzKXtGLmFkZFN0eWxlQ2xhc3MoUyl9aWYoIUYpe0Y9W119ZWxzZSBpZighcS5pc0FycmF5KEYpKXtGPVtGXX1yZXR1cm4gRn19O3JldHVybiBYfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUuZGVsZWdhdGUuU2Nyb2xsRW5hYmxlbWVudCcpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLmRlbGVnYXRlLlNjcm9sbEVuYWJsZW1lbnQnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9kZWxlZ2F0ZS9TY3JvbGxFbmFibGVtZW50IixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL2Jhc2UvT2JqZWN0J10sZnVuY3Rpb24ocSxCKXsidXNlIHN0cmljdCI7dmFyICQ9cTt2YXIgUz1CLmV4dGVuZCgic2FwLnVpLmNvcmUuZGVsZWdhdGUuU2Nyb2xsRW5hYmxlbWVudCIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKGMscyxDKXtCLmFwcGx5KHRoaXMpO3RoaXMuX29Db250cm9sPWM7dGhpcy5fb0NvbnRyb2wuYWRkRGVsZWdhdGUodGhpcyk7dGhpcy5fc0NvbnRlbnRJZD1zO3RoaXMuX2JIb3Jpem9udGFsPSEhQy5ob3Jpem9udGFsO3RoaXMuX2JWZXJ0aWNhbD0hIUMudmVydGljYWw7dGhpcy5fc2Nyb2xsWD0wO3RoaXMuX3Njcm9sbFk9MDt0aGlzLl9zY3JvbGxlcj1udWxsO3RoaXMuX3Njcm9sbGJhckNsYXNzPUMuc2Nyb2xsYmFyQ2xhc3N8fGZhbHNlO3RoaXMuX2JvdW5jZT1DLmJvdW5jZTthKHRoaXMsQyk7aWYodGhpcy5faW5pdCl7dGhpcy5faW5pdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fSxzZXRIb3Jpem9udGFsOmZ1bmN0aW9uKGgpe3RoaXMuX2JIb3Jpem9udGFsPSEhaDtpZih0aGlzLl9zY3JvbGxlcil7aWYodGhpcy5fenluZ2Epe3RoaXMuX3Njcm9sbGVyLm9wdGlvbnMuc2Nyb2xsaW5nWD10aGlzLl9iSG9yaXpvbnRhbH1lbHNle3RoaXMuX3Njcm9sbGVyLmhTY3JvbGw9dGhpcy5fc2Nyb2xsZXIuaFNjcm9sbGJhcj10aGlzLl9iSG9yaXpvbnRhbDt0aGlzLl9zY3JvbGxlci5fc2Nyb2xsYmFyKCdoJyl9fWVsc2UgaWYodGhpcy5fc2V0T3ZlcmZsb3cpe3RoaXMuX3NldE92ZXJmbG93KCl9fSxzZXRWZXJ0aWNhbDpmdW5jdGlvbih2KXt0aGlzLl9iVmVydGljYWw9ISF2O2lmKHRoaXMuX3Njcm9sbGVyKXtpZih0aGlzLl96eW5nYSl7dGhpcy5fc2Nyb2xsZXIub3B0aW9ucy5zY3JvbGxpbmdZPXRoaXMuX2JWZXJ0aWNhbH1lbHNle3RoaXMuX3Njcm9sbGVyLnZTY3JvbGw9dGhpcy5fc2Nyb2xsZXIudlNjcm9sbGJhcj10aGlzLl9iVmVydGljYWw7dGhpcy5fc2Nyb2xsZXIuX3Njcm9sbGJhcigndicpfX1lbHNlIGlmKHRoaXMuX3NldE92ZXJmbG93KXt0aGlzLl9zZXRPdmVyZmxvdygpfX0sZ2V0SG9yaXpvbnRhbDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9iSG9yaXpvbnRhbH0sZ2V0VmVydGljYWw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYlZlcnRpY2FsfSxzZXRCb3VuY2U6ZnVuY3Rpb24oYil7dGhpcy5fYm91bmNlPSEhYn0sc2V0UHVsbERvd246ZnVuY3Rpb24oYyl7dGhpcy5fb1B1bGxEb3duPWM7cmV0dXJuIHRoaXN9LHNldEdyb3dpbmdMaXN0OmZ1bmN0aW9uKGcscyl7dGhpcy5fb0dyb3dpbmdMaXN0PWc7dGhpcy5fZm5TY3JvbGxMb2FkQ2FsbGJhY2s9cS5wcm94eShzLGcpO3JldHVybiB0aGlzfSxzZXRJY29uVGFiQmFyOmZ1bmN0aW9uKEkscyxmKXt0aGlzLl9vSWNvblRhYkJhcj1JO3RoaXMuX2ZuU2Nyb2xsRW5kQ2FsbGJhY2s9cS5wcm94eShzLEkpO3RoaXMuX2ZuU2Nyb2xsU3RhcnRDYWxsYmFjaz1xLnByb3h5KGYsSSk7cmV0dXJuIHRoaXN9LHNjcm9sbFRvOmZ1bmN0aW9uKHgseSx0KXt0aGlzLl9zY3JvbGxYPXg7dGhpcy5fc2Nyb2xsWT15O3RoaXMuX3Njcm9sbFRvKHgseSx0KTtyZXR1cm4gdGhpc30sZGVzdHJveTpmdW5jdGlvbigpe2lmKHRoaXMuX2V4aXQpe3RoaXMuX2V4aXQoKX1pZih0aGlzLl9vQ29udHJvbCl7dGhpcy5fb0NvbnRyb2wucmVtb3ZlRGVsZWdhdGUodGhpcyk7dGhpcy5fb0NvbnRyb2w9dW5kZWZpbmVkfX0scmVmcmVzaDpmdW5jdGlvbigpe2lmKHRoaXMuX3JlZnJlc2gpe3RoaXMuX3JlZnJlc2goKX19fSk7dmFyIGk9e2dldFNjcm9sbFRvcDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zY3JvbGxZfSxnZXRTY3JvbGxMZWZ0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3Njcm9sbFh9LGdldE1heFNjcm9sbFRvcDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zY3JvbGxlcj8tdGhpcy5fc2Nyb2xsZXIubWF4U2Nyb2xsWTowfSxfc2Nyb2xsVG86ZnVuY3Rpb24oeCx5LHQpe3RoaXMuX3Njcm9sbGVyJiZ0aGlzLl9zY3JvbGxlci5zY3JvbGxUbygteCwteSx0LGZhbHNlKX0sX3JlZnJlc2g6ZnVuY3Rpb24oKXtpZih0aGlzLl9zY3JvbGxlciYmdGhpcy5fc1Njcm9sbGVySWQpe3ZhciBzPSQuc2FwLmRvbUJ5SWQodGhpcy5fc1Njcm9sbGVySWQpO2lmKHMmJihzLm9mZnNldEhlaWdodD4wKSl7dGhpcy5fYklnbm9yZVNjcm9sbEVuZD10cnVlO3RoaXMuX3Njcm9sbGVyLnJlZnJlc2goKTt0aGlzLl9iSWdub3JlU2Nyb2xsRW5kPWZhbHNlO2lmKC10aGlzLl9zY3JvbGxYIT10aGlzLl9zY3JvbGxlci54fHwtdGhpcy5fc2Nyb2xsWSE9dGhpcy5fc2Nyb2xsZXIueSl7dGhpcy5fc2Nyb2xsZXIuc2Nyb2xsVG8oLXRoaXMuX3Njcm9sbFgsLXRoaXMuX3Njcm9sbFksMCl9aWYodGhpcy5fc2Nyb2xsZXIud3JhcHBlciYmdGhpcy5fc2Nyb2xsZXIud3JhcHBlci5zY3JvbGxUb3Ape3RoaXMuX3Njcm9sbGVyLndyYXBwZXIuc2Nyb2xsVG9wPTB9fX19LF9jbGVhbnVwOmZ1bmN0aW9uKCl7dGhpcy5fdG9nZ2xlUmVzaXplTGlzdGVuZXJzKGZhbHNlKTtpZih0aGlzLl9zY3JvbGxlcil7dGhpcy5fc2Nyb2xsZXIuc3RvcCgpO3RoaXMuX3Njcm9sbFg9LXRoaXMuX3Njcm9sbGVyLng7dmFyIHM9JC5zYXAuZG9tQnlJZCh0aGlzLl9zU2Nyb2xsZXJJZCk7aWYocyYmKHMub2Zmc2V0SGVpZ2h0PjApKXt0aGlzLl9zY3JvbGxZPS10aGlzLl9zY3JvbGxlci55fXRoaXMuX3Njcm9sbGVyLmRlc3Ryb3koKTt0aGlzLl9zY3JvbGxlcj1udWxsfX0sX3RvZ2dsZVJlc2l6ZUxpc3RlbmVyczpmdW5jdGlvbih0KXtpZih0aGlzLl9zU2Nyb2xsZXJSZXNpemVMaXN0ZW5lcklkKXtzYXAudWkuY29yZS5SZXNpemVIYW5kbGVyLmRlcmVnaXN0ZXIodGhpcy5fc1Njcm9sbGVyUmVzaXplTGlzdGVuZXJJZCk7dGhpcy5fc1Njcm9sbGVyUmVzaXplTGlzdGVuZXJJZD1udWxsfWlmKHRoaXMuX3NDb250ZW50UmVzaXplTGlzdGVuZXJJZCl7c2FwLnVpLmNvcmUuUmVzaXplSGFuZGxlci5kZXJlZ2lzdGVyKHRoaXMuX3NDb250ZW50UmVzaXplTGlzdGVuZXJJZCk7dGhpcy5fc0NvbnRlbnRSZXNpemVMaXN0ZW5lcklkPW51bGx9aWYodCYmdGhpcy5fc0NvbnRlbnRJZCYmJC5zYXAuZG9tQnlJZCh0aGlzLl9zQ29udGVudElkKSl7dmFyIGI9JC5wcm94eSh0aGlzLl9yZWZyZXNoLHRoaXMpO3RoaXMuX3NTY3JvbGxlclJlc2l6ZUxpc3RlbmVySWQ9c2FwLnVpLmNvcmUuUmVzaXplSGFuZGxlci5yZWdpc3RlcigkLnNhcC5kb21CeUlkKHRoaXMuX3NTY3JvbGxlcklkKSxiKTt0aGlzLl9zQ29udGVudFJlc2l6ZUxpc3RlbmVySWQ9c2FwLnVpLmNvcmUuUmVzaXplSGFuZGxlci5yZWdpc3RlcigkLnNhcC5kb21CeUlkKHRoaXMuX3NDb250ZW50SWQpLGIpfX0sb25CZWZvcmVSZW5kZXJpbmc6ZnVuY3Rpb24oKXt0aGlzLl9jbGVhbnVwKCl9LG9uZm9jdXNpbjpmdW5jdGlvbihlKXtpZihTLl9iU2Nyb2xsVG9JbnB1dCYmc2FwLnVpLkRldmljZS5vcy5hbmRyb2lkKXt2YXIgYj1lLnNyY0VsZW1lbnQ7dGhpcy5fc1RpbWVySWQmJnEuc2FwLmNsZWFyRGVsYXllZENhbGwodGhpcy5fc1RpbWVySWQpO2lmKGImJmIubm9kZU5hbWUmJihiLm5vZGVOYW1lLnRvVXBwZXJDYXNlKCk9PT0iSU5QVVQifHxiLm5vZGVOYW1lLnRvVXBwZXJDYXNlKCk9PT0iVEVYVEFSRUEiKSl7dGhpcy5fc1RpbWVySWQ9cS5zYXAuZGVsYXllZENhbGwoNDAwLHRoaXMsZnVuY3Rpb24oKXt2YXIgbz10aGlzLl9zY3JvbGxlci5fb2Zmc2V0KGIpO28udG9wKz00ODt0aGlzLl9zY3JvbGxlci5zY3JvbGxUbyhvLmxlZnQsby50b3ApfSl9fX0sb25BZnRlclJlbmRlcmluZzpmdW5jdGlvbigpe3ZhciB0PXRoaXMsYj0odGhpcy5fYm91bmNlIT09dW5kZWZpbmVkKT90aGlzLl9ib3VuY2U6c2FwLnVpLkRldmljZS5vcy5pb3M7dmFyIGM9JC5zYXAuYnlJZCh0aGlzLl9zQ29udGVudElkKTt0aGlzLl9zU2Nyb2xsZXJJZD1jLnBhcmVudCgpLmF0dHIoImlkIik7dmFyIGQ9KCEhc2FwLnVpLkRldmljZS5vcy5hbmRyb2lkJiYhc2FwLnVpLkRldmljZS5icm93c2VyLmNocm9tZSYmKHNhcC51aS5EZXZpY2Uub3MudmVyc2lvbj09NHx8IXNhcC51aS5EZXZpY2Uub3MudmVyc2lvblN0ci5pbmRleE9mKCIyLjMuNCIpKSYmYy5maW5kKCJpbnB1dCx0ZXh0YXJlYSIpLmxlbmd0aCk7dGhpcy5faVRvcE9mZnNldD10aGlzLl9vUHVsbERvd24mJnRoaXMuX29QdWxsRG93bi5nZXREb21SZWYmJnRoaXMuX29QdWxsRG93bi5nZXREb21SZWYoKS5vZmZzZXRIZWlnaHR8fDA7dmFyIHg9dGhpcy5fc2Nyb2xsWHx8MCx5PXRoaXMuX3Njcm9sbFl8fDA7aWYoc2FwLnVpLmdldENvcmUoKS5nZXRDb25maWd1cmF0aW9uKCkuZ2V0UlRMKCkpe2MuYXR0cigiZGlyIiwicnRsIik7dmFyIHA9Yy5wYXJlbnQoKTtwLmF0dHIoImRpciIsImx0ciIpO2lmKCF0aGlzLl9iU2Nyb2xsUG9zSW5pdGlhbGl6ZWQpe3g9dGhpcy5fc2Nyb2xsWD1jLndpZHRoKCktcC53aWR0aCgpO3RoaXMuX2JTY3JvbGxQb3NJbml0aWFsaXplZD10cnVlfX10aGlzLl9zY3JvbGxlcj1uZXcgd2luZG93LmlTY3JvbGwodGhpcy5fc1Njcm9sbGVySWQse3VzZVRyYW5zaXRpb246dHJ1ZSx1c2VUcmFuc2Zvcm06IWQsaGlkZVNjcm9sbGJhcjp0cnVlLGZhZGVTY3JvbGxiYXI6dHJ1ZSxib3VuY2U6ISFiLG1vbWVudHVtOnRydWUsaGFuZGxlQ2xpY2s6ZmFsc2UsaFNjcm9sbDp0aGlzLl9iSG9yaXpvbnRhbCx2U2Nyb2xsOnRoaXMuX2JWZXJ0aWNhbCx4Oi14LHk6LXksdG9wT2Zmc2V0OnRoaXMuX2lUb3BPZmZzZXQsc2Nyb2xsYmFyQ2xhc3M6dGhpcy5fc2Nyb2xsYmFyQ2xhc3Msb25CZWZvcmVTY3JvbGxTdGFydDpmdW5jdGlvbihlKXtpZih0Ll9pc1Njcm9sbGluZyl7ZS5zdG9wUHJvcGFnYXRpb24oKTtlLnByZXZlbnREZWZhdWx0KCl9fSxvblNjcm9sbEVuZDpmdW5jdGlvbigpe2lmKCF0Ll9iSWdub3JlU2Nyb2xsRW5kJiZ0Ll9zY3JvbGxlcil7dC5fc2Nyb2xsWD0tdC5fc2Nyb2xsZXIueDt0Ll9zY3JvbGxZPS10Ll9zY3JvbGxlci55fWlmKHQuX29QdWxsRG93bil7dC5fb1B1bGxEb3duLmRvU2Nyb2xsRW5kKCl9aWYodC5fb0dyb3dpbmdMaXN0JiZ0Ll9mblNjcm9sbExvYWRDYWxsYmFjayl7dmFyIGU9TWF0aC5mbG9vcih0aGlzLndyYXBwZXJILzQpO3ZhciBJPS10aGlzLm1heFNjcm9sbFkrdGhpcy55PGU7aWYodGhpcy5kaXJZPjAmJkkpe3QuX2ZuU2Nyb2xsTG9hZENhbGxiYWNrKCl9fWlmKHQuX29JY29uVGFiQmFyJiZ0Ll9mblNjcm9sbEVuZENhbGxiYWNrKXt0Ll9mblNjcm9sbEVuZENhbGxiYWNrKCl9dC5faXNTY3JvbGxpbmc9ZmFsc2V9LG9uUmVmcmVzaDpmdW5jdGlvbigpe2lmKHQuX29QdWxsRG93bil7dC5fb1B1bGxEb3duLmRvUmVmcmVzaCgpfXQuX3RvZ2dsZVJlc2l6ZUxpc3RlbmVycyh0cnVlKX0sb25TY3JvbGxNb3ZlOmZ1bmN0aW9uKGUpe2lmKCF0Ll9pc1Njcm9sbGluZyl7dmFyIHI9LyhJTlBVVHxURVhUQVJFQSkvaSxBPWRvY3VtZW50LmFjdGl2ZUVsZW1lbnQ7aWYoci50ZXN0KEEudGFnTmFtZSkmJmUudGFyZ2V0IT09QSl7QS5ibHVyKCl9fXQuX2lzU2Nyb2xsaW5nPXRydWU7aWYodC5fb1B1bGxEb3duKXt0Ll9vUHVsbERvd24uZG9TY3JvbGxNb3ZlKCl9aWYodC5fb0ljb25UYWJCYXImJnQuX2ZuU2Nyb2xsU3RhcnRDYWxsYmFjayl7dC5fZm5TY3JvbGxTdGFydENhbGxiYWNrKCl9fX0pO2Zvcih2YXIgUD10aGlzLl9vQ29udHJvbDtQPVAub1BhcmVudDspe3ZhciBzPVAuZ2V0U2Nyb2xsRGVsZWdhdGU/UC5nZXRTY3JvbGxEZWxlZ2F0ZSgpOm51bGw7aWYocyYmKHMuZ2V0VmVydGljYWwoKSYmdGhpcy5nZXRWZXJ0aWNhbCgpfHxzLmdldEhvcml6b250YWwoKSYmdGhpcy5nZXRIb3Jpem9udGFsKCkpKXt0aGlzLl9zY3JvbGxlci5fc2FwdWlfaXNOZXN0ZWQ9dHJ1ZTticmVha319dGhpcy5fc2Nyb2xsZXIuX21vdmU9ZnVuY3Rpb24oZSl7aWYoZS5fc2FwdWlfaGFuZGxlZEJ5Q29udHJvbCYmIWUuX3NhcHVpX3Njcm9sbCl7cmV0dXJufWlmKHRoaXMuX3NhcHVpX2lzTmVzdGVkKXtlLl9zYXB1aV9oYW5kbGVkQnlDb250cm9sPSEodGhpcy5kaXJZPDAmJnRoaXMueT49MCkmJiEodGhpcy5kaXJZPjAmJnRoaXMueTw9dGhpcy5tYXhTY3JvbGxZKSYmISh0aGlzLmRpclg8MCYmdGhpcy54Pj0wKSYmISh0aGlzLmRpclg+MCYmdGhpcy54PD10aGlzLm1heFNjcm9sbFgpfXdpbmRvdy5pU2Nyb2xsLnByb3RvdHlwZS5fbW92ZS5jYWxsKHRoaXMsZSl9O3ZhciBvPWMucGFyZW50KClbMF07aWYobyYmKG8ub2Zmc2V0SGVpZ2h0PjApKXtpZih0aGlzLl9zY3JvbGxYIT0tdGhpcy5fc2Nyb2xsZXIueHx8dGhpcy5fc2Nyb2xsWSE9LXRoaXMuX3Njcm9sbGVyLnkpe3RoaXMuX3Njcm9sbGVyLnNjcm9sbFRvKC10aGlzLl9zY3JvbGxYLC10aGlzLl9zY3JvbGxZLDApfX10aGlzLl90b2dnbGVSZXNpemVMaXN0ZW5lcnModHJ1ZSl9LG9udG91Y2htb3ZlOmZ1bmN0aW9uKGUpe2lmKHRoaXMuX3ByZXZlbnRUb3VjaE1vdmVEZWZhdWx0KXtlLnByZXZlbnREZWZhdWx0KCl9fX07dmFyIHo9e19yZWZyZXNoOmZ1bmN0aW9uKCl7aWYodGhpcy5fc2Nyb2xsZXImJnRoaXMuX3NDb250ZW50SWQmJiQuc2FwLmRvbUJ5SWQodGhpcy5fc0NvbnRlbnRJZCkpe3ZhciBjPSQuc2FwLmJ5SWQodGhpcy5fc0NvbnRlbnRJZCk7dmFyIEM9Yy5wYXJlbnQoKTt0aGlzLl9zY3JvbGxlci5zZXREaW1lbnNpb25zKEMud2lkdGgoKSxDLmhlaWdodCgpLGMud2lkdGgoKSxjLmhlaWdodCgpKX19LF9jbGVhbnVwOmZ1bmN0aW9uKCl7aWYodGhpcy5fc1Njcm9sbGVyUmVzaXplTGlzdGVuZXJJZCl7c2FwLnVpLmNvcmUuUmVzaXplSGFuZGxlci5kZXJlZ2lzdGVyKHRoaXMuX3NTY3JvbGxlclJlc2l6ZUxpc3RlbmVySWQpO3RoaXMuX3NTY3JvbGxlclJlc2l6ZUxpc3RlbmVySWQ9bnVsbH1pZih0aGlzLl9zQ29udGVudFJlc2l6ZUxpc3RlbmVySWQpe3NhcC51aS5jb3JlLlJlc2l6ZUhhbmRsZXIuZGVyZWdpc3Rlcih0aGlzLl9zQ29udGVudFJlc2l6ZUxpc3RlbmVySWQpO3RoaXMuX3NDb250ZW50UmVzaXplTGlzdGVuZXJJZD1udWxsfWlmKHRoaXMuX3Njcm9sbGVyKXt2YXIgdj10aGlzLl9zY3JvbGxlci5nZXRWYWx1ZXMoKTt0aGlzLl9zY3JvbGxYPXYubGVmdDt0aGlzLl9zY3JvbGxZPXYudG9wfX0sX3Njcm9sbFRvOmZ1bmN0aW9uKHgseSx0KXtpZih0aGlzLl9zY3JvbGxlcil7aWYoIWlzTmFOKHQpKXt0aGlzLl9zY3JvbGxlci5vcHRpb25zLmFuaW1hdGlvbkR1cmF0aW9uPXR9dGhpcy5fc2Nyb2xsZXIuc2Nyb2xsVG8oeCx5LCEhdCl9fSxvbkJlZm9yZVJlbmRlcmluZzpmdW5jdGlvbigpe3RoaXMuX2NsZWFudXAoKX0sb25BZnRlclJlbmRlcmluZzpmdW5jdGlvbigpe3RoaXMuX3JlZnJlc2goKTt0aGlzLl9zY3JvbGxlci5zY3JvbGxUbyh0aGlzLl9zY3JvbGxYLHRoaXMuX3Njcm9sbFksZmFsc2UpO3RoaXMuX3NDb250ZW50UmVzaXplTGlzdGVuZXJJZD1zYXAudWkuY29yZS5SZXNpemVIYW5kbGVyLnJlZ2lzdGVyKCQuc2FwLmRvbUJ5SWQodGhpcy5fc0NvbnRlbnRJZCksJC5wcm94eShmdW5jdGlvbigpe2lmKCghdGhpcy5fc0NvbnRlbnRJZHx8ISQuc2FwLmRvbUJ5SWQodGhpcy5fc0NvbnRlbnRJZCkpJiZ0aGlzLl9zQ29udGVudFJlc2l6ZUxpc3RlbmVySWQpe3NhcC51aS5jb3JlLlJlc2l6ZUhhbmRsZXIuZGVyZWdpc3Rlcih0aGlzLl9zQ29udGVudFJlc2l6ZUxpc3RlbmVySWQpO3RoaXMuX3NDb250ZW50UmVzaXplTGlzdGVuZXJJZD1udWxsfWVsc2V7dGhpcy5fcmVmcmVzaCgpfX0sdGhpcykpfSxvbnRvdWNoc3RhcnQ6ZnVuY3Rpb24oZSl7aWYoZS50YXJnZXQudGFnTmFtZS5tYXRjaCgvaW5wdXR8dGV4dGFyZWF8c2VsZWN0L2kpKXtyZXR1cm59dGhpcy5fc2Nyb2xsZXIuZG9Ub3VjaFN0YXJ0KGUudG91Y2hlcyxlLnRpbWVTdGFtcCl9LG9udG91Y2hlbmQ6ZnVuY3Rpb24oZSl7dGhpcy5fc2Nyb2xsZXIuZG9Ub3VjaEVuZChlLnRpbWVTdGFtcCl9LG9udG91Y2htb3ZlOmZ1bmN0aW9uKGUpe3RoaXMuX3Njcm9sbGVyLmRvVG91Y2hNb3ZlKGUudG91Y2hlcyxlLnRpbWVTdGFtcCk7aWYodGhpcy5fcHJldmVudFRvdWNoTW92ZURlZmF1bHQpe2UucHJldmVudERlZmF1bHQoKX1lbHNle2Uuc3RvcFByb3BhZ2F0aW9uKCl9fX07dmFyIG49e2dldFNjcm9sbFRvcDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zY3JvbGxZfHwwfSxnZXRTY3JvbGxMZWZ0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3Njcm9sbFh8fDB9LGdldE1heFNjcm9sbFRvcDpmdW5jdGlvbigpe3JldHVybih0aGlzLl8kQ29udGFpbmVyJiZ0aGlzLl8kQ29udGFpbmVyLmxlbmd0aCk/dGhpcy5fJENvbnRhaW5lclswXS5zY3JvbGxIZWlnaHQtdGhpcy5fJENvbnRhaW5lci5oZWlnaHQoKTotMX0sX3NldE92ZXJmbG93OmZ1bmN0aW9uKCl7dmFyIGM9dGhpcy5fJENvbnRhaW5lcjtpZighY3x8IWNbMF0pcmV0dXJuO2MuY3NzKCJ6LWluZGV4IiwiMCIpO2lmKHNhcC51aS5EZXZpY2Uub3MuaW9zKXtjLmNzcygib3ZlcmZsb3cteCIsdGhpcy5fYkhvcml6b250YWw/InNjcm9sbCI6ImhpZGRlbiIpLmNzcygib3ZlcmZsb3cteSIsdGhpcy5fYlZlcnRpY2FsPyJzY3JvbGwiOiJoaWRkZW4iKS5jc3MoIi13ZWJraXQtb3ZlcmZsb3ctc2Nyb2xsaW5nIiwidG91Y2giKX1lbHNle2MuY3NzKCJvdmVyZmxvdy14Iix0aGlzLl9iSG9yaXpvbnRhbCYmIXRoaXMuX2JEcmFnU2Nyb2xsPyJhdXRvIjoiaGlkZGVuIikuY3NzKCJvdmVyZmxvdy15Iix0aGlzLl9iVmVydGljYWwmJiF0aGlzLl9iRHJhZ1Njcm9sbD8iYXV0byI6ImhpZGRlbiIpfX0sX3JlZnJlc2g6ZnVuY3Rpb24oKXt2YXIgYz10aGlzLl8kQ29udGFpbmVyO2lmKCFjfHwhYy5oZWlnaHQoKSlyZXR1cm47dmFyIEM9JC5zYXAuYnlJZCh0aGlzLl9zQ29udGVudElkKTtpZih0aGlzLl9vUHVsbERvd24mJnRoaXMuX29QdWxsRG93bi5fYlRvdWNoTW9kZSl7dmFyIGQ9dGhpcy5fb1B1bGxEb3duLmdldERvbVJlZigpO2lmKGQpe2Quc3R5bGUubWFyZ2luVG9wPXRoaXMuX29QdWxsRG93bi5faVN0YXRlPT0yPyIiOiItIitkLm9mZnNldEhlaWdodCsicHgifX1pZihjLnNjcm9sbFRvcCgpIT10aGlzLl9zY3JvbGxZKXtjLnNjcm9sbFRvcCh0aGlzLl9zY3JvbGxZKX1pZighKHRoaXMuX29QdWxsRG93biYmdGhpcy5fb1B1bGxEb3duLl9iVG91Y2hNb2RlKSYmIXRoaXMuX2ZuU2Nyb2xsTG9hZENhbGxiYWNrJiYhISFzYXAudWkuRGV2aWNlLmJyb3dzZXIuaW50ZXJuZXRfZXhwbG9yZXIpe3NhcC51aS5jb3JlLlJlc2l6ZUhhbmRsZXIuZGVyZWdpc3Rlcih0aGlzLl9zUmVzaXplTGlzdGVuZXJJZCk7dGhpcy5fc1Jlc2l6ZUxpc3RlbmVySWQ9bnVsbH19LF9vblNjcm9sbDpmdW5jdGlvbihlKXt2YXIgYz10aGlzLl8kQ29udGFpbmVyO2lmKHRoaXMuX29JT1NTY3JvbGwmJnRoaXMuX29JT1NTY3JvbGwuYk1vbWVudHVtKXt2YXIgeT1NYXRoLmFicyh0aGlzLl9zY3JvbGxZLWMuc2Nyb2xsVG9wKCkpO2lmKHk+MCYmeTwxMHx8ZS50aW1lU3RhbXAtdGhpcy5fb0lPU1Njcm9sbC5pVGltZVN0YW1wPjEyMCl7cS5zYXAubG9nLmRlYnVnKCJJT1MgTW9tZW50dW0gU2Nyb2xsaW5nIGlzIE9GRiIpO3RoaXMuX29JT1NTY3JvbGwuYk1vbWVudHVtPWZhbHNlfX10aGlzLl9zY3JvbGxYPWMuc2Nyb2xsTGVmdCgpO3RoaXMuX3Njcm9sbFk9Yy5zY3JvbGxUb3AoKTtpZih0aGlzLl9mblNjcm9sbExvYWRDYWxsYmFjayYmY1swXS5zY3JvbGxIZWlnaHQtYy5zY3JvbGxUb3AoKS1jLmhlaWdodCgpPDEwMCl7dGhpcy5fZm5TY3JvbGxMb2FkQ2FsbGJhY2soKX1pZih0aGlzLl9vSWNvblRhYkJhciYmdGhpcy5fZm5TY3JvbGxFbmRDYWxsYmFjayl7dGhpcy5fZm5TY3JvbGxFbmRDYWxsYmFjaygpfX0sX29uU3RhcnQ6ZnVuY3Rpb24oZSl7dmFyIGM9dGhpcy5fJENvbnRhaW5lclswXTtpZighYylyZXR1cm47dGhpcy5fYkRvRHJhZz10aGlzLl9iRHJhZ1Njcm9sbDtpZighdGhpcy5fc2Nyb2xsYWJsZSl7dGhpcy5fc2Nyb2xsYWJsZT17fX10aGlzLl9zY3JvbGxhYmxlLnZlcnRpY2FsPXRoaXMuX2JWZXJ0aWNhbCYmYy5zY3JvbGxIZWlnaHQ+Yy5jbGllbnRIZWlnaHQ7dGhpcy5fc2Nyb2xsYWJsZS5ob3Jpem9udGFsPXRoaXMuX2JIb3Jpem9udGFsJiZjLnNjcm9sbFdpZHRoPmMuY2xpZW50V2lkdGg7aWYodGhpcy5fb0lPU1Njcm9sbCYmdGhpcy5fb0lPU1Njcm9sbC5iTW9tZW50dW0pe3Euc2FwLmxvZy5kZWJ1ZygiSU9TIE1vbWVudHVtIFNjcm9sbGluZzogcHJldmVudCB0YXAgZXZlbnQiKTtlLnN0b3BQcm9wYWdhdGlvbigpO3RoaXMuX29JT1NTY3JvbGwuYk1vbWVudHVtPWZhbHNlfXZhciBwPWUudG91Y2hlcz9lLnRvdWNoZXNbMF06ZTt0aGlzLl9pWD1wLnBhZ2VYO3RoaXMuX2lZPXAucGFnZVk7aWYodGhpcy5fb0lPU1Njcm9sbCl7aWYoIXRoaXMuX3Njcm9sbGFibGUudmVydGljYWwpe3RoaXMuX29JT1NTY3JvbGwuaVRvcERvd249MH1lbHNlIGlmKGMuc2Nyb2xsVG9wPT09MCl7dGhpcy5fb0lPU1Njcm9sbC5pVG9wRG93bj0xfWVsc2UgaWYoYy5zY3JvbGxUb3A9PT1jLnNjcm9sbEhlaWdodC1jLmNsaWVudEhlaWdodCl7dGhpcy5fb0lPU1Njcm9sbC5pVG9wRG93bj0tMX1lbHNle3RoaXMuX29JT1NTY3JvbGwuaVRvcERvd249MH19dGhpcy5fYlB1bGxEb3duPWZhbHNlO3RoaXMuX2lEaXJlY3Rpb249IiJ9LF9vblRvdWNoTW92ZTpmdW5jdGlvbihlKXt2YXIgYz10aGlzLl8kQ29udGFpbmVyWzBdO3ZhciBwPWUudG91Y2hlc1swXTt2YXIgZD1wLnBhZ2VYLXRoaXMuX2lYO3ZhciBiPXAucGFnZVktdGhpcy5faVk7aWYodGhpcy5faURpcmVjdGlvbj09IiIpe2lmKGQhPTB8fGIhPTApe3RoaXMuX2lEaXJlY3Rpb249TWF0aC5hYnMoYik+TWF0aC5hYnMoZCk/InYiOiJoIn1pZih0aGlzLl9vUHVsbERvd24mJnRoaXMuX29QdWxsRG93bi5fYlRvdWNoTW9kZSYmdGhpcy5faURpcmVjdGlvbj09InYiJiZjLnNjcm9sbFRvcDw9MSl7aWYoYj5NYXRoLmFicyhkKSl7dGhpcy5fYlB1bGxEb3duPXRydWV9fX1pZih0aGlzLl9vSU9TU2Nyb2xsJiZ0aGlzLl9vSU9TU2Nyb2xsLmlUb3BEb3duJiZiIT0wKXtpZihiKnRoaXMuX29JT1NTY3JvbGwuaVRvcERvd24+MCl7dGhpcy5fYkRvRHJhZz10cnVlfX1pZih0aGlzLl9iUHVsbERvd249PT10cnVlKXt2YXIgZj10aGlzLl9vUHVsbERvd24uZ2V0RG9tUmVmKCk7dmFyIHQ9ZS50b3VjaGVzWzBdLnBhZ2VZLXRoaXMuX2lZLWYub2Zmc2V0SGVpZ2h0O2lmKHQ+MjApdD0yMDtmLnN0eWxlLm1hcmdpblRvcD10KyJweCI7dGhpcy5fb1B1bGxEb3duLmRvUHVsbCh0KTtlLnByZXZlbnREZWZhdWx0KCk7dGhpcy5fYkRvRHJhZz1mYWxzZX1pZih0aGlzLl9iRG9EcmFnKXtjLnNjcm9sbExlZnQ9Yy5zY3JvbGxMZWZ0K3RoaXMuX2lYLXAucGFnZVg7Yy5zY3JvbGxUb3A9Yy5zY3JvbGxUb3ArdGhpcy5faVktcC5wYWdlWTt0aGlzLl9pWD1wLnBhZ2VYO3RoaXMuX2lZPXAucGFnZVk7ZS5zZXRNYXJrZWQoKTtlLnByZXZlbnREZWZhdWx0KCk7cmV0dXJufWlmKHRoaXMuX29JT1NTY3JvbGwmJiF0aGlzLl9iRG9EcmFnJiZ0aGlzLl9pRGlyZWN0aW9uPT0idiImJk1hdGguYWJzKGUudG91Y2hlc1swXS5wYWdlWS10aGlzLl9pWSk+PTEwKXt0aGlzLl9vSU9TU2Nyb2xsLmJNb21lbnR1bT10cnVlO3RoaXMuX29JT1NTY3JvbGwuaVRpbWVTdGFtcD1lLnRpbWVTdGFtcH1pZighdGhpcy5fb0lPU1Njcm9sbHx8dGhpcy5fc2Nyb2xsYWJsZS52ZXJ0aWNhbHx8dGhpcy5fc2Nyb2xsYWJsZS5ob3Jpem9udGFsJiZ0aGlzLl9pRGlyZWN0aW9uPT0iaCIpe2Uuc2V0TWFya2VkKCl9aWYod2luZG93LmlTY3JvbGwpe2Uuc2V0TWFya2VkKCJzY3JvbGwiKX19LF9vbkVuZDpmdW5jdGlvbihlKXtpZih0aGlzLl9vSU9TU2Nyb2xsJiZ0aGlzLl9vSU9TU2Nyb2xsLmJNb21lbnR1bSl7dGhpcy5fb0lPU1Njcm9sbC5pVGltZVN0YW1wPWUudGltZVN0YW1wfWlmKHRoaXMuX29QdWxsRG93biYmdGhpcy5fb1B1bGxEb3duLl9iVG91Y2hNb2RlKXt0aGlzLl9vUHVsbERvd24uZG9TY3JvbGxFbmQoKTt0aGlzLl9yZWZyZXNoKCl9aWYodGhpcy5fYkRyYWdTY3JvbGwmJnRoaXMuX2lEaXJlY3Rpb24pe2Uuc2V0TWFya2VkKCl9fSxfb25Nb3VzZURvd246ZnVuY3Rpb24oZSl7aWYoZS5idXR0b249PTApe3RoaXMuX2JTY3JvbGxpbmc9dHJ1ZTt0aGlzLl9vblN0YXJ0KGUpfX0sX29uTW91c2VNb3ZlOmZ1bmN0aW9uKEUpe2lmKHRoaXMuX2JTY3JvbGxpbmcpe3ZhciBlPUUub3JpZ2luYWxFdmVudDt2YXIgYj1lLmJ1dHRvbnN8fGUud2hpY2g7aWYoYj09MSl7dmFyIGM9dGhpcy5fJENvbnRhaW5lclswXTtjLnNjcm9sbExlZnQ9Yy5zY3JvbGxMZWZ0K3RoaXMuX2lYLUUucGFnZVg7Yy5zY3JvbGxUb3A9Yy5zY3JvbGxUb3ArdGhpcy5faVktRS5wYWdlWTt0aGlzLl9pWD1FLnBhZ2VYO3RoaXMuX2lZPUUucGFnZVl9fX0sX29uTW91c2VVcDpmdW5jdGlvbihlKXt0aGlzLl9iU2Nyb2xsaW5nPWZhbHNlO3RoaXMuX29uRW5kKCl9LG9uQmVmb3JlUmVuZGVyaW5nOmZ1bmN0aW9uKCl7aWYodGhpcy5fc1Jlc2l6ZUxpc3RlbmVySWQpe3NhcC51aS5jb3JlLlJlc2l6ZUhhbmRsZXIuZGVyZWdpc3Rlcih0aGlzLl9zUmVzaXplTGlzdGVuZXJJZCk7dGhpcy5fc1Jlc2l6ZUxpc3RlbmVySWQ9bnVsbH12YXIgYz10aGlzLl8kQ29udGFpbmVyO2lmKGMpe2lmKGMuaGVpZ2h0KCk+MCl7dGhpcy5fc2Nyb2xsWD1jLnNjcm9sbExlZnQoKTt0aGlzLl9zY3JvbGxZPWMuc2Nyb2xsVG9wKCl9Yy5vZmYoKX19LG9uQWZ0ZXJSZW5kZXJpbmc6ZnVuY3Rpb24oKXt2YXIgYz10aGlzLl8kQ29udGFpbmVyPSQuc2FwLmJ5SWQodGhpcy5fc0NvbnRlbnRJZCkucGFyZW50KCk7dmFyIF89cS5wcm94eSh0aGlzLl9yZWZyZXNoLHRoaXMpO3RoaXMuX3NldE92ZXJmbG93KCk7dGhpcy5fc2Nyb2xsVG8odGhpcy5fc2Nyb2xsWCx0aGlzLl9zY3JvbGxZKTt0aGlzLl9yZWZyZXNoKCk7aWYoIWMuaXMoIjp2aXNpYmxlIil8fCEhc2FwLnVpLkRldmljZS5icm93c2VyLmludGVybmV0X2V4cGxvcmVyfHx0aGlzLl9vUHVsbERvd258fHRoaXMuX2ZuU2Nyb2xsTG9hZENhbGxiYWNrKXt0aGlzLl9zUmVzaXplTGlzdGVuZXJJZD1zYXAudWkuY29yZS5SZXNpemVIYW5kbGVyLnJlZ2lzdGVyKGNbMF0sXyl9Yy5zY3JvbGwocS5wcm94eSh0aGlzLl9vblNjcm9sbCx0aGlzKSk7aWYoc2FwLnVpLkRldmljZS5zdXBwb3J0LnRvdWNoKXtjLm9uKCJ0b3VjaGNhbmNlbCB0b3VjaGVuZCIscS5wcm94eSh0aGlzLl9vbkVuZCx0aGlzKSkub24oInRvdWNoc3RhcnQiLHEucHJveHkodGhpcy5fb25TdGFydCx0aGlzKSkub24oInRvdWNobW92ZSIscS5wcm94eSh0aGlzLl9vblRvdWNoTW92ZSx0aGlzKSl9ZWxzZSBpZih0aGlzLl9iRHJhZ1Njcm9sbCl7Yy5vbigibW91c2V1cCBtb3VzZWxlYXZlIixxLnByb3h5KHRoaXMuX29uTW91c2VVcCx0aGlzKSkubW91c2Vkb3duKHEucHJveHkodGhpcy5fb25Nb3VzZURvd24sdGhpcykpLm1vdXNlbW92ZShxLnByb3h5KHRoaXMuX29uTW91c2VNb3ZlLHRoaXMpKX19LF9yZWFkQWN0dWFsU2Nyb2xsUG9zaXRpb246ZnVuY3Rpb24oKXtpZih0aGlzLl8kQ29udGFpbmVyLndpZHRoKCk+MCl7dGhpcy5fc2Nyb2xsWD10aGlzLl8kQ29udGFpbmVyLnNjcm9sbExlZnQoKX1pZih0aGlzLl8kQ29udGFpbmVyLmhlaWdodCgpPjApe3RoaXMuX3Njcm9sbFk9dGhpcy5fJENvbnRhaW5lci5zY3JvbGxUb3AoKX19LF9zY3JvbGxUbzpmdW5jdGlvbih4LHksdCl7aWYodGhpcy5fJENvbnRhaW5lci5sZW5ndGg+MCl7aWYodD4wKXt0aGlzLl8kQ29udGFpbmVyLmFuaW1hdGUoe3Njcm9sbFRvcDp5LHNjcm9sbExlZnQ6eH0sdCxxLnByb3h5KHRoaXMuX3JlYWRBY3R1YWxTY3JvbGxQb3NpdGlvbix0aGlzKSl9ZWxzZXt0aGlzLl8kQ29udGFpbmVyLnNjcm9sbFRvcCh5KTt0aGlzLl8kQ29udGFpbmVyLnNjcm9sbExlZnQoeCk7dGhpcy5fcmVhZEFjdHVhbFNjcm9sbFBvc2l0aW9uKCl9fX19O2Z1bmN0aW9uIGEocyxjKXt2YXIgZDtpZighc2FwLnVpLkRldmljZS5zdXBwb3J0LnRvdWNoJiYhJC5zYXAuc2ltdWxhdGVNb2JpbGVPbkRlc2t0b3AmJiFjLm5vblRvdWNoU2Nyb2xsaW5nKXtyZXR1cm59aWYoc2FwLnVpLkRldmljZS5zdXBwb3J0LnRvdWNofHwkLnNhcC5zaW11bGF0ZU1vYmlsZU9uRGVza3RvcCl7JC5zYXAucmVxdWlyZSgianF1ZXJ5LnNhcC5tb2JpbGUiKX1kPXtfaW5pdDpmdW5jdGlvbihDLGIsYyl7ZnVuY3Rpb24gZShmLGgsdil7dmFyIG89bmV3IHdpbmRvdy5TY3JvbGxlcihmdW5jdGlvbihqLHQsayl7dmFyIG09JC5zYXAuYnlJZChmKS5wYXJlbnQoKTttLnNjcm9sbExlZnQoaik7bS5zY3JvbGxUb3AodCl9LHtzY3JvbGxpbmdYOmgsc2Nyb2xsaW5nWTp2LGJvdW5jaW5nOmZhbHNlfSk7cmV0dXJuIG99ZnVuY3Rpb24gZygpe2lmKGMuenluZ2Epe3JldHVybiJ6In1pZihzYXAudWkuRGV2aWNlLm9zLmFuZHJvaWQmJnNhcC51aS5EZXZpY2Uub3MudmVyc2lvbjw0LjF8fHNhcC51aS5EZXZpY2Uub3MuYmxhY2tiZXJyeXx8c2FwLnVpLkRldmljZS5vcy5pb3MmJnNhcC51aS5EZXZpY2Uub3MudmVyc2lvbjw2KXtyZXR1cm4iaSJ9aWYoIXNhcC51aS5EZXZpY2Uuc3VwcG9ydC50b3VjaCYmJC5zYXAuc2ltdWxhdGVNb2JpbGVPbkRlc2t0b3Ape3JldHVybiJpIn1pZihjLmlzY3JvbGw9PSJmb3JjZSJ8fChzYXAudWkuRGV2aWNlLnN1cHBvcnQudG91Y2gmJihjLmlzY3JvbGx8fHNhcC51aS5nZXRDb3JlKCkuZ2V0Q29uZmlndXJhdGlvbigpLmdldE5vTmF0aXZlU2Nyb2xsKCkpKSl7cmV0dXJuImkifXJldHVybiJuIn12YXIgbD1nKCk7dGhpcy5fcHJldmVudFRvdWNoTW92ZURlZmF1bHQ9ISFjLnByZXZlbnREZWZhdWx0O3RoaXMuX3Njcm9sbGVyPW51bGw7c3dpdGNoKGwpe2Nhc2UieiI6JC5zYXAucmVxdWlyZSgic2FwLnVpLnRoaXJkcGFydHkuenluZ2FzY3JvbGwiKTskLmV4dGVuZCh0aGlzLHopO3RoaXMuX3p5bmdhPXRydWU7dGhpcy5fc2Nyb2xsZXI9ZSh0aGlzLl9zQ29udGVudElkLHRoaXMuX2JIb3Jpem9udGFsLHRoaXMuX2JWZXJ0aWNhbCk7YnJlYWs7Y2FzZSJpIjokLnNhcC5yZXF1aXJlKCJzYXAudWkudGhpcmRwYXJ0eS5pc2Nyb2xsIik7JC5leHRlbmQodGhpcyxpKTt0aGlzLl9iSVNjcm9sbD10cnVlO2JyZWFrO2RlZmF1bHQ6aWYoJC5tb2JpbGUmJiQuZXZlbnQuc3BlY2lhbC5zd2lwZSYmJC5ldmVudC5zcGVjaWFsLnN3aXBlLnNjcm9sbFN1cHJlc3Npb25UaHJlc2hvbGQ8MTIwKXskLmV2ZW50LnNwZWNpYWwuc3dpcGUuc2Nyb2xsU3VwcmVzc2lvblRocmVzaG9sZD0xMjB9JC5leHRlbmQodGhpcyxuKTtpZihjLm5vblRvdWNoU2Nyb2xsaW5nPT09dHJ1ZSl7dGhpcy5fYkRyYWdTY3JvbGw9dHJ1ZX1pZihzYXAudWkuZ2V0Q29yZSgpLmdldENvbmZpZ3VyYXRpb24oKS5nZXRSVEwoKSl7dGhpcy5fc2Nyb2xsWD05OTk5fWlmKHNhcC51aS5EZXZpY2Uub3MuaW9zKXt0aGlzLl9vSU9TU2Nyb2xsPXtpVGltZVN0YW1wOjAsYk1vbWVudHVtOmZhbHNlfX1icmVha319LF9leGl0OmZ1bmN0aW9uKCl7aWYodGhpcy5fY2xlYW51cCl7dGhpcy5fY2xlYW51cCgpfXRoaXMuX3Njcm9sbGVyPW51bGx9fTskLmV4dGVuZChzLGQpfXJldHVybiBTfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUubXZjLlZpZXdSZW5kZXJlcicpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLm12Yy5WaWV3UmVuZGVyZXInKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9tdmMvVmlld1JlbmRlcmVyIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJ10sZnVuY3Rpb24ocSl7InVzZSBzdHJpY3QiO3ZhciBWPXt9O1YuYWRkRGlzcGxheUNsYXNzPWZ1bmN0aW9uKHIsYyl7aWYoYy5nZXREaXNwbGF5QmxvY2soKXx8KGMuZ2V0V2lkdGgoKT09PSIxMDAlIiYmYy5nZXRIZWlnaHQoKT09PSIxMDAlIikpe3IuYWRkQ2xhc3MoInNhcFVpVmlld0Rpc3BsYXlCbG9jayIpfX07cmV0dXJuIFZ9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS5tdmMuWE1MVmlld1JlbmRlcmVyJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUubXZjLlhNTFZpZXdSZW5kZXJlcicpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL212Yy9YTUxWaWV3UmVuZGVyZXIiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCcuL1ZpZXdSZW5kZXJlciddLGZ1bmN0aW9uKHEsVil7InVzZSBzdHJpY3QiO3ZhciBYPXt9O1gucmVuZGVyPWZ1bmN0aW9uKHIsYyl7dmFyICQ9Yy5fJG9sZENvbnRlbnQ9c2FwLnVpLmNvcmUuUmVuZGVyTWFuYWdlci5maW5kUHJlc2VydmVkQ29udGVudChjLmdldElkKCkpO2lmKCQubGVuZ3RoPT09MCl7dmFyIHM9Yy5pc1N1YlZpZXcoKTtpZighcyl7ci53cml0ZSgiPGRpdiIpO3Iud3JpdGVDb250cm9sRGF0YShjKTtyLmFkZENsYXNzKCJzYXBVaVZpZXciKTtyLmFkZENsYXNzKCJzYXBVaVhNTFZpZXciKTtWLmFkZERpc3BsYXlDbGFzcyhyLGMpO3Iud3JpdGVBdHRyaWJ1dGUoImRhdGEtc2FwLXVpLXByZXNlcnZlIixjLmdldElkKCkpO2lmKGMuZ2V0V2lkdGgoKSl7ci5hZGRTdHlsZSgid2lkdGgiLGMuZ2V0V2lkdGgoKSl9aWYoYy5nZXRIZWlnaHQoKSl7ci5hZGRTdHlsZSgiaGVpZ2h0IixjLmdldEhlaWdodCgpKX1yLndyaXRlU3R5bGVzKCk7ci53cml0ZUNsYXNzZXMoKTtyLndyaXRlKCI+Iil9Zm9yKHZhciBpPTA7aTxjLl9hUGFyc2VkQ29udGVudC5sZW5ndGg7aSsrKXt2YXIgZj1jLl9hUGFyc2VkQ29udGVudFtpXTtpZihmJiZ0eXBlb2YoZik9PT0ic3RyaW5nIil7ci53cml0ZShmKX1lbHNle3IucmVuZGVyQ29udHJvbChmKTtpZighZi5iT3V0cHV0KXtyLndyaXRlKCc8ZGl2IGlkPSJzYXAtdWktZHVtbXktJytmLmdldElkKCkrJyIgY2xhc3M9InNhcFVpSGlkZGVuIi8+Jyl9fX1pZighcyl7ci53cml0ZSgiPC9kaXY+Iil9fWVsc2V7ci5yZW5kZXJDb250cm9sKGMub0FmdGVyUmVuZGVyaW5nTm90aWZpZXIpO3Iud3JpdGUoJzxkaXYgaWQ9InNhcC11aS1kdW1teS0nK2MuZ2V0SWQoKSsnIiBjbGFzcz0ic2FwVWlIaWRkZW4iPicpO2Zvcih2YXIgaT0wO2k8Yy5fYVBhcnNlZENvbnRlbnQubGVuZ3RoO2krKyl7dmFyIGY9Yy5fYVBhcnNlZENvbnRlbnRbaV07aWYodHlwZW9mKGYpIT09InN0cmluZyIpe3Euc2FwLmJ5SWQoZi5nZXRJZCgpLCQpLnJlcGxhY2VXaXRoKCc8ZGl2IGlkPSJzYXAtdWktZHVtbXktJytmLmdldElkKCkrJyIgY2xhc3M9InNhcFVpSGlkZGVuIi8+Jyk7ci5yZW5kZXJDb250cm9sKGYpfX1yLndyaXRlKCc8L2Rpdj4nKX19O3JldHVybiBYfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUudG1wbC5ET01FbGVtZW50UmVuZGVyZXInKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS50bXBsLkRPTUVsZW1lbnRSZW5kZXJlcicpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL3RtcGwvRE9NRWxlbWVudFJlbmRlcmVyIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJ10sZnVuY3Rpb24ocSl7InVzZSBzdHJpY3QiO3ZhciBEPXt9O0QucmVuZGVyPWZ1bmN0aW9uKHIsZSl7ci53cml0ZSgiPCIpO3Iud3JpdGUoZS5nZXRUYWcoKSk7ci53cml0ZUNvbnRyb2xEYXRhKGUpO3EuZWFjaChlLmdldEF0dHJpYnV0ZXMoKSxmdW5jdGlvbihpLGEpe3ZhciBuPWEuZ2V0TmFtZSgpLnRvTG93ZXJDYXNlKCk7aWYobj09PSJjbGFzcyIpe3ZhciBjPWEuZ2V0VmFsdWUoKS5zcGxpdCgiICIpO3EuZWFjaChjLGZ1bmN0aW9uKGksQyl7dmFyIEM9Qy50cmltKCk7aWYoQyl7ci5hZGRDbGFzcyhDKX19KX1lbHNlIGlmKG49PT0ic3R5bGUiKXt2YXIgcz1hLmdldFZhbHVlKCkuc3BsaXQoIjsiKTtxLmVhY2gocyxmdW5jdGlvbihpLFMpe3ZhciBpPVMuaW5kZXhPZigiOiIpO2lmKGkhPS0xKXt2YXIgaz1TLnN1YnN0cmluZygwLGkpLnRyaW0oKTt2YXIgdj1TLnN1YnN0cmluZyhpKzEpLnRyaW0oKTtyLmFkZFN0eWxlKGssdil9fSl9ZWxzZXtyLndyaXRlQXR0cmlidXRlRXNjYXBlZChhLmdldE5hbWUoKSxhLmdldFZhbHVlKCkpfX0pO3Iud3JpdGVDbGFzc2VzKCk7ci53cml0ZVN0eWxlcygpO3ZhciBFPWUuZ2V0RWxlbWVudHMoKSxoPSEhZS5nZXRUZXh0KCl8fEUubGVuZ3RoPjA7aWYoIWgpe3Iud3JpdGUoIi8+Iil9ZWxzZXtyLndyaXRlKCI+Iik7aWYoZS5nZXRUZXh0KCkpe3Iud3JpdGVFc2NhcGVkKGUuZ2V0VGV4dCgpKX1xLmVhY2goRSxmdW5jdGlvbihpLGMpe3IucmVuZGVyQ29udHJvbChjKX0pO3Iud3JpdGUoIjwvIik7ci53cml0ZShlLmdldFRhZygpKTtyLndyaXRlKCI+Iil9fTtyZXR1cm4gRH0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLnRtcGwuVGVtcGxhdGVDb250cm9sUmVuZGVyZXInKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS50bXBsLlRlbXBsYXRlQ29udHJvbFJlbmRlcmVyJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvdG1wbC9UZW1wbGF0ZUNvbnRyb2xSZW5kZXJlciIsWydqcXVlcnkuc2FwLmdsb2JhbCddLGZ1bmN0aW9uKHEpeyJ1c2Ugc3RyaWN0Ijt2YXIgVD17fTtULnJlbmRlcj1mdW5jdGlvbihyLGMpe3ZhciBzPWMuaXNJbmxpbmUoKXx8dGhpcy5oYXNDb250cm9sRGF0YTtpZighcyl7ci53cml0ZSgiPGRpdiIpO3Iud3JpdGVDb250cm9sRGF0YShjKTtyLndyaXRlU3R5bGVzKCk7ci53cml0ZUNsYXNzZXMoKTtyLndyaXRlKCI+Iil9dmFyIFI9dGhpcy5yZW5kZXJUZW1wbGF0ZXx8Yy5nZXRUZW1wbGF0ZVJlbmRlcmVyKCk7aWYoUil7Ui5hcHBseSh0aGlzLGFyZ3VtZW50cyl9aWYoIXMpe3Iud3JpdGUoIjwvZGl2PiIpfX07cmV0dXJuIFR9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS51dGlsLkZpbGUnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS51dGlsLkZpbGUnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS91dGlsL0ZpbGUiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvRGV2aWNlJ10sZnVuY3Rpb24ocSxEKXsndXNlIHN0cmljdCc7dmFyIEY9e3NhdmU6ZnVuY3Rpb24oZCxmLHMsbSxjKXt2YXIgYT1mKycuJytzO2lmKGM9PT0ndXRmLTgnJiZzPT09J2Nzdicpe2Q9J1x1ZmVmZicrZH1pZih3aW5kb3cuQmxvYil7dmFyIHQ9J2RhdGE6JyttO2lmKGMpe3QrPSc7Y2hhcnNldD0nK2N9dmFyIGI9bmV3IHdpbmRvdy5CbG9iKFtkXSx7dHlwZTp0fSk7aWYod2luZG93Lm5hdmlnYXRvci5tc1NhdmVPck9wZW5CbG9iKXt3aW5kb3cubmF2aWdhdG9yLm1zU2F2ZU9yT3BlbkJsb2IoYixhKX1lbHNle3ZhciB1PXdpbmRvdy5VUkx8fHdpbmRvdy53ZWJraXRVUkw7dmFyIEI9dS5jcmVhdGVPYmplY3RVUkwoYik7dmFyIGw9d2luZG93LmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtpZignZG93bmxvYWQnaW4gbCl7dmFyICQ9cShkb2N1bWVudC5ib2R5KTt2YXIgZT1xKGwpLmF0dHIoe2Rvd25sb2FkOmEsaHJlZjpCLHN0eWxlOidkaXNwbGF5Om5vbmUnfSk7JC5hcHBlbmQoZSk7ZS5nZXQoMCkuY2xpY2soKTtlLnJlbW92ZSgpfWVsc2V7aWYoZCYmYz09PSd1dGYtOCcmJnM9PT0nY3N2Jyl7ZD1kLnN1YnN0cigxKX13aW5kb3cub3Blbih0KyI7YmFzZTY0LCIrd2luZG93LmJ0b2EoZCkpfX19ZWxzZSBpZihELmJyb3dzZXIuaW50ZXJuZXRfZXhwbG9yZXImJkQuYnJvd3Nlci52ZXJzaW9uPD05KXt2YXIgJD1xKGRvY3VtZW50LmJvZHkpO3ZhciBnPXEoJzxpZnJhbWUvPicse3N0eWxlOidkaXNwbGF5Om5vbmUnfSk7JC5hcHBlbmQoZyk7dmFyIG89Zy5nZXQoMCkuY29udGVudFdpbmRvdy5kb2N1bWVudDtvLm9wZW4obSwncmVwbGFjZScpO2lmKGMpe28uY2hhcnNldD1jfW8ud3JpdGUoZCk7by5jbG9zZSgpO3ZhciBUPW5ldyBEYXRlKCk7dmFyIFM9by5leGVjQ29tbWFuZCgnU2F2ZUFzJyxmYWxzZSxhKTtpZighUyYmbmV3IERhdGUoKS1UPDEwKXtvLmV4ZWNDb21tYW5kKCdTYXZlQXMnLGZhbHNlLGErJy50eHQnKX1nLnJlbW92ZSgpfX19O3JldHVybiBGfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUudXRpbC5MaWJyYXJ5SW5mbycpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLnV0aWwuTGlicmFyeUluZm8nKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS91dGlsL0xpYnJhcnlJbmZvIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL2Jhc2UvT2JqZWN0JywnanF1ZXJ5LnNhcC5zY3JpcHQnXSxmdW5jdGlvbihxLEIpeyJ1c2Ugc3RyaWN0Ijt2YXIgTD1CLmV4dGVuZCgic2FwLnVpLmNvcmUudXRpbC5MaWJyYXJ5SW5mbyIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKCl7Qi5hcHBseSh0aGlzKTt0aGlzLl9vTGliSW5mb3M9e319LGRlc3Ryb3k6ZnVuY3Rpb24oKXtCLnByb3RvdHlwZS5kZXN0cm95LmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLl9vTGliSW5mb3M9e319LGdldEludGVyZmFjZTpmdW5jdGlvbigpe3JldHVybiB0aGlzfX0pO0wucHJvdG90eXBlLl9sb2FkTGlicmFyeU1ldGFkYXRhPWZ1bmN0aW9uKGwsYyl7bD1sLnJlcGxhY2UoL1wvL2csIi4iKTtpZih0aGlzLl9vTGliSW5mb3NbbF0pe3Euc2FwLmRlbGF5ZWRDYWxsKDAsd2luZG93LGMsW3RoaXMuX29MaWJJbmZvc1tsXV0pO3JldHVybn12YXIgdT1xLnNhcC5nZXRNb2R1bGVQYXRoKGwsJy8nKSx0PXRoaXM7cS5hamF4KHt1cmw6dSsiLmxpYnJhcnkiLGRhdGFUeXBlOiJ4bWwiLGVycm9yOmZ1bmN0aW9uKHgscyxlKXtxLnNhcC5sb2cuZXJyb3IoImZhaWxlZCB0byBsb2FkIGxpYnJhcnkgZGV0YWlscyBmcm9tICciK3UrIi5saWJyYXJ5JzogIitzKyIsICIrZSk7dC5fb0xpYkluZm9zW2xdPXtuYW1lOmwsZGF0YTpudWxsLHVybDp1fTtjKHQuX29MaWJJbmZvc1tsXSl9LHN1Y2Nlc3M6ZnVuY3Rpb24oZCxzLHgpe3QuX29MaWJJbmZvc1tsXT17bmFtZTpsLGRhdGE6ZCx1cmw6dX07Yyh0Ll9vTGliSW5mb3NbbF0pfX0pfTtMLnByb3RvdHlwZS5fZ2V0TGlicmFyeUluZm89ZnVuY3Rpb24obCxjKXt0aGlzLl9sb2FkTGlicmFyeU1ldGFkYXRhKGwsZnVuY3Rpb24oZCl7dmFyIHI9e2xpYnM6W10sbGlicmFyeTpkLm5hbWUsbGlicmFyeVVybDpkLnVybH07aWYoZC5kYXRhKXt2YXIgJD1xKGQuZGF0YSk7ci52ZW5kb3I9JC5maW5kKCJ2ZW5kb3IiKS50ZXh0KCk7ci5jb3B5cmlnaHQ9JC5maW5kKCJjb3B5cmlnaHQiKS50ZXh0KCk7ci52ZXJzaW9uPSQuZmluZCgidmVyc2lvbiIpLnRleHQoKTtyLmRvY3VtZW50YXRpb249JC5maW5kKCJkb2N1bWVudGF0aW9uIikudGV4dCgpfWMocil9KX07TC5wcm90b3R5cGUuX2dldFRoaXJkUGFydHlJbmZvPWZ1bmN0aW9uKGwsYyl7dGhpcy5fbG9hZExpYnJhcnlNZXRhZGF0YShsLGZ1bmN0aW9uKGQpe3ZhciByPXtsaWJzOltdLGxpYnJhcnk6ZC5uYW1lLGxpYnJhcnlVcmw6ZC51cmx9O2lmKGQuZGF0YSl7dmFyICQ9cShkLmRhdGEpLmZpbmQoImFwcERhdGEiKS5maW5kKCJ0aGlyZHBhcnR5IikuY2hpbGRyZW4oKTskLmVhY2goZnVuY3Rpb24oaSxvKXtpZihvLm5vZGVOYW1lPT09ImxpYiIpe3ZhciBhPXEobyk7dmFyIGI9YS5jaGlsZHJlbigibGljZW5zZSIpO3IubGlicy5wdXNoKHtkaXNwbGF5TmFtZTphLmF0dHIoImRpc3BsYXlOYW1lIiksaG9tZXBhZ2U6YS5hdHRyKCJob21lcGFnZSIpLHZlcnNpb246YS5hdHRyKCJ2ZXJzaW9uIiksbGljZW5zZTp7dXJsOmIuYXR0cigidXJsIiksdHlwZTpiLmF0dHIoInR5cGUiKSxmaWxlOmQudXJsK2IuYXR0cigiZmlsZSIpfX0pfX0pfWMocil9KX07TC5wcm90b3R5cGUuX2dldERvY3VJbmRleD1mdW5jdGlvbihsLGMpe3RoaXMuX2xvYWRMaWJyYXJ5TWV0YWRhdGEobCxmdW5jdGlvbihkKXt2YXIgYT1kLm5hbWUsYj1kLnVybCxyPXsiZG9jdSI6e30sbGlicmFyeTphLGxpYnJhcnlVcmw6Yn07aWYoIWQuZGF0YSl7YyhyKTtyZXR1cm59dmFyIEQ9cShkLmRhdGEpLmZpbmQoImFwcERhdGEiKS5maW5kKCJkb2N1bWVudGF0aW9uIik7dmFyIHU9RC5hdHRyKCJpbmRleFVybCIpO2lmKCF1KXtjKHIpO3JldHVybn1pZihELmF0dHIoInJlc29sdmUiKT09ImxpYiIpe3U9ZC51cmwrdX1xLmFqYXgoe3VybDp1LGRhdGFUeXBlOiJqc29uIixlcnJvcjpmdW5jdGlvbih4LHMsZSl7cS5zYXAubG9nLmVycm9yKCJmYWlsZWQgdG8gbG9hZCBsaWJyYXJ5IGRvY3UgZnJvbSAnIit1KyInOiAiK3MrIiwgIitlKTtjKHIpfSxzdWNjZXNzOmZ1bmN0aW9uKGQscyx4KXtkLmxpYnJhcnk9YTtkLmxpYnJhcnlVcmw9YjtjKGQpfX0pfSl9O3JldHVybiBMfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUud3MuUmVhZHlTdGF0ZScpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLndzLlJlYWR5U3RhdGUnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS93cy9SZWFkeVN0YXRlIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJ10sZnVuY3Rpb24ocSl7InVzZSBzdHJpY3QiO3ZhciBSPXtDT05ORUNUSU5HOjAsT1BFTjoxLENMT1NJTkc6MixDTE9TRUQ6M307cmV0dXJuIFJ9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkubW9kZWwuQmluZGluZ01vZGUnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkubW9kZWwuQmluZGluZ01vZGUnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvbW9kZWwvQmluZGluZ01vZGUiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnXSxmdW5jdGlvbihxKXsidXNlIHN0cmljdCI7dmFyIEI9e0RlZmF1bHQ6IkRlZmF1bHQiLE9uZVRpbWU6Ik9uZVRpbWUiLE9uZVdheToiT25lV2F5IixUd29XYXk6IlR3b1dheSJ9O3JldHVybiBCfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLm1vZGVsLkNoYW5nZVJlYXNvbicpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5tb2RlbC5DaGFuZ2VSZWFzb24nKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvbW9kZWwvQ2hhbmdlUmVhc29uIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJ10sZnVuY3Rpb24ocSl7InVzZSBzdHJpY3QiO3ZhciBDPXtTb3J0OiJzb3J0IixGaWx0ZXI6ImZpbHRlciIsQ2hhbmdlOiJjaGFuZ2UiLENvbnRleHQ6ImNvbnRleHQiLFJlZnJlc2g6InJlZnJlc2gifTtyZXR1cm4gQ30sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5tb2RlbC5GaWx0ZXJPcGVyYXRvcicpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5tb2RlbC5GaWx0ZXJPcGVyYXRvcicpO3NhcC51aS5kZWZpbmUoInNhcC91aS9tb2RlbC9GaWx0ZXJPcGVyYXRvciIsWydqcXVlcnkuc2FwLmdsb2JhbCddLGZ1bmN0aW9uKHEpeyJ1c2Ugc3RyaWN0Ijt2YXIgRj17RVE6IkVRIixORToiTkUiLExUOiJMVCIsTEU6IkxFIixHVDoiR1QiLEdFOiJHRSIsQlQ6IkJUIixDb250YWluczoiQ29udGFpbnMiLFN0YXJ0c1dpdGg6IlN0YXJ0c1dpdGgiLEVuZHNXaXRoOiJFbmRzV2l0aCJ9O3JldHVybiBGfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLm1vZGVsLkZpbHRlclR5cGUnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkubW9kZWwuRmlsdGVyVHlwZScpO3NhcC51aS5kZWZpbmUoInNhcC91aS9tb2RlbC9GaWx0ZXJUeXBlIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJ10sZnVuY3Rpb24ocSl7InVzZSBzdHJpY3QiO3ZhciBGPXtBcHBsaWNhdGlvbjoiQXBwbGljYXRpb24iLENvbnRyb2w6IkNvbnRyb2wifTtyZXR1cm4gRn0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5tb2RlbC5Gb3JtYXRFeGNlcHRpb24nKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkubW9kZWwuRm9ybWF0RXhjZXB0aW9uJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL21vZGVsL0Zvcm1hdEV4Y2VwdGlvbiIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ3NhcC91aS9iYXNlL0V4Y2VwdGlvbiddLGZ1bmN0aW9uKHEsRSl7InVzZSBzdHJpY3QiO3ZhciBGPWZ1bmN0aW9uKG0pe3RoaXMubmFtZT0iRm9ybWF0RXhjZXB0aW9uIjt0aGlzLm1lc3NhZ2U9bX07Ri5wcm90b3R5cGU9cS5zYXAubmV3T2JqZWN0KEUucHJvdG90eXBlKTtyZXR1cm4gRn0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5tb2RlbC5QYXJzZUV4Y2VwdGlvbicpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5tb2RlbC5QYXJzZUV4Y2VwdGlvbicpO3NhcC51aS5kZWZpbmUoInNhcC91aS9tb2RlbC9QYXJzZUV4Y2VwdGlvbiIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ3NhcC91aS9iYXNlL0V4Y2VwdGlvbiddLGZ1bmN0aW9uKHEsRSl7InVzZSBzdHJpY3QiO3ZhciBQPWZ1bmN0aW9uKG0pe3RoaXMubmFtZT0iUGFyc2VFeGNlcHRpb24iO3RoaXMubWVzc2FnZT1tfTtQLnByb3RvdHlwZT1xLnNhcC5uZXdPYmplY3QoRS5wcm90b3R5cGUpO3JldHVybiBQfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLm1vZGVsLlNvcnRlcicpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5tb2RlbC5Tb3J0ZXInKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvbW9kZWwvU29ydGVyIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJ10sZnVuY3Rpb24ocSl7InVzZSBzdHJpY3QiO3ZhciBTPXNhcC51aS5iYXNlLk9iamVjdC5leHRlbmQoInNhcC51aS5tb2RlbC5Tb3J0ZXIiLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbihwLGQsZyl7aWYodHlwZW9mIHA9PT0ib2JqZWN0Iil7dmFyIHM9cDtwPXMucGF0aDtkPXMuZGVzY2VuZGluZztnPXMuZ3JvdXB9dGhpcy5zUGF0aD1wO3ZhciBpPXRoaXMuc1BhdGguaW5kZXhPZigiPiIpO2lmKGk+MCl7dGhpcy5zUGF0aD10aGlzLnNQYXRoLnN1YnN0cihpKzEpfXRoaXMuYkRlc2NlbmRpbmc9ZDt0aGlzLnZHcm91cD1nO2lmKHR5cGVvZiBnPT0iYm9vbGVhbiImJmcpe3RoaXMuZm5Hcm91cD1mdW5jdGlvbihjKXtyZXR1cm4gYy5nZXRQcm9wZXJ0eSh0aGlzLnNQYXRoKX19aWYodHlwZW9mIGc9PSJmdW5jdGlvbiIpe3RoaXMuZm5Hcm91cD1nfX19KTtyZXR1cm4gU30sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5tb2RlbC5UeXBlJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLm1vZGVsLlR5cGUnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvbW9kZWwvVHlwZSIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ3NhcC91aS9iYXNlL09iamVjdCddLGZ1bmN0aW9uKHEsQil7InVzZSBzdHJpY3QiO3ZhciBUPUIuZXh0ZW5kKCJzYXAudWkubW9kZWwuVHlwZSIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKCl7Qi5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5zTmFtZT0iVHlwZSJ9LG1ldGFkYXRhOnsiYWJzdHJhY3QiOnRydWUscHVibGljTWV0aG9kczpbImdldE5hbWUiXX19KTtULnByb3RvdHlwZS5nZXROYW1lPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc05hbWV9O3JldHVybiBUfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLm1vZGVsLlZhbGlkYXRlRXhjZXB0aW9uJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLm1vZGVsLlZhbGlkYXRlRXhjZXB0aW9uJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL21vZGVsL1ZhbGlkYXRlRXhjZXB0aW9uIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL2Jhc2UvRXhjZXB0aW9uJ10sZnVuY3Rpb24ocSxFKXsidXNlIHN0cmljdCI7dmFyIFY9ZnVuY3Rpb24obSx2KXt0aGlzLm5hbWU9IlZhbGlkYXRlRXhjZXB0aW9uIjt0aGlzLm1lc3NhZ2U9bTt0aGlzLnZpb2xhdGVkQ29uc3RyYWludHM9dn07Vi5wcm90b3R5cGU9cS5zYXAubmV3T2JqZWN0KEUucHJvdG90eXBlKTtyZXR1cm4gVn0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5tb2RlbC5hbmFseXRpY3Mub2RhdGE0YW5hbHl0aWNzJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLm1vZGVsLmFuYWx5dGljcy5vZGF0YTRhbmFseXRpY3MnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvbW9kZWwvYW5hbHl0aWNzL29kYXRhNGFuYWx5dGljcyIsWydqcXVlcnkuc2FwLmdsb2JhbCddLGZ1bmN0aW9uKHEpeyJ1c2Ugc3RyaWN0Ijt2YXIgbz1vfHx7fTtvLmNvbnN0YW50cz17fTtvLmNvbnN0YW50c1siU0FQX05BTUVTUEFDRSJdPSJodHRwOi8vd3d3LnNhcC5jb20vUHJvdG9jb2xzL1NBUERhdGEiO28uY29uc3RhbnRzWyJWRVJTSU9OIl09IjAuNyI7by5oZWxwZXI9e3Rva2VuaXplTmFtZXRvTGFiZWxUZXh0OmZ1bmN0aW9uKG4pe3ZhciBsPSIiO2w9bi5yZXBsYWNlKC9eUF8oLiopLywiJDEiKTtsPWwucmVwbGFjZSgvKFteQS1aMC05X10rKShbQS1aMC05X10pL2csIiQxICQyIik7bD1sLnJlcGxhY2UoLyhbQS1aMC05X117Mix9KShbQS1aMC05X10pKFteQS1aMC05X10rKS9nLCIkMSAkMiQzIik7bD1sLnJlcGxhY2UoLyguKikgX0UkLywiJDEiKTtsPWwucmVwbGFjZSgvKC4qKSBfKC4qKS9nLCIkMSAkMiIpO3JldHVybiBsfX07by5Nb2RlbD1mdW5jdGlvbihtLHApe3RoaXMuX2luaXQobSxwKX07by5Nb2RlbC5SZWZlcmVuY2VCeVVSST1mdW5jdGlvbih1KXtyZXR1cm57c1NlcnZpY2VVUkk6dX19O28uTW9kZWwuUmVmZXJlbmNlQnlNb2RlbD1mdW5jdGlvbihtKXtyZXR1cm57b01vZGVsOm19fTtvLk1vZGVsLlJlZmVyZW5jZVdpdGhXb3JrYXJvdW5kPWZ1bmN0aW9uKG0sdyl7cmV0dXJue29Nb2RlbFJlZmVyZW5jZTptLGFXb3JrYXJvdW5kSUQ6d319O28uTW9kZWwucHJvdG90eXBlPXtfaW5pdDpmdW5jdGlvbihtLHApe2lmKHR5cGVvZiBwPT0ic3RyaW5nIil7dGhyb3ciRGVwcmVjYXRlZCBzZWNvbmQgYXJndW1lbnQ6IEFkanVzdCB5b3VyIGludm9jYXRpb24gYnkgcGFzc2luZyBhbiBvYmplY3Qgd2l0aCBhIHByb3BlcnR5IHNBbm5vdGF0aW9uSlNPTkRvYyBhcyBhIHNlY29uZCBhcmd1bWVudCBpbnN0ZWFkIn10aGlzLl9tUGFyYW1ldGVyPXA7dGhpcy5fb0FjdGl2YXRlZFdvcmthcm91bmRzPW5ldyBPYmplY3QoKTtpZihtJiZtLmFXb3JrYXJvdW5kSUQpe2Zvcih2YXIgaT0tMSxJO0k9bS5hV29ya2Fyb3VuZElEWysraV07KXt0aGlzLl9vQWN0aXZhdGVkV29ya2Fyb3VuZHNbSV09dHJ1ZX1tPW0ub01vZGVsUmVmZXJlbmNlfWlmKCFtfHwoIW0uc1NlcnZpY2VVUkkmJiFtLm9Nb2RlbCkpe3Rocm93IlVzYWdlIHdpdGggb01vZGVsUmVmZXJlbmNlIGJlaW5nIGFuIGluc3RhbmNlIG9mIE1vZGVsLlJlZmVyZW5jZUJ5VVJJIG9yIE1vZGVsLlJlZmVyZW5jZUJ5TW9kZWwifWlmKG0ub01vZGVsKXRoaXMuX29Nb2RlbD1tLm9Nb2RlbDtlbHNlIHRoaXMuX29Nb2RlbD1uZXcgc2FwLnVpLm1vZGVsLm9kYXRhLk9EYXRhTW9kZWwobS5zU2VydmljZVVSSSk7aWYodGhpcy5fb01vZGVsLmdldFNlcnZpY2VNZXRhZGF0YSgpLmRhdGFTZXJ2aWNlcz09dW5kZWZpbmVkKXt0aHJvdyJNb2RlbCBjb3VsZCBub3QgYmUgbG9hZGVkIn1pZihwJiZwLnNBbm5vdGF0aW9uSlNPTkRvYyl0aGlzLm1lcmdlVjJBbm5vdGF0aW9ucyhwLnNBbm5vdGF0aW9uSlNPTkRvYyk7dGhpcy5fb1F1ZXJ5UmVzdWx0U2V0PW5ldyBPYmplY3QoKTt0aGlzLl9vUGFyYW1ldGVyaXphdGlvblNldD1uZXcgT2JqZWN0KCk7dGhpcy5fb0VudGl0eVR5cGVTZXQ9bmV3IE9iamVjdCgpO3RoaXMuX29FbnRpdHlTZXRTZXQ9bmV3IE9iamVjdCgpO3RoaXMuX29FbnRpdHlUeXBlTmFtZVRvRW50aXR5U2V0TWFwPW5ldyBPYmplY3QoKTt2YXIgcz10aGlzLl9vTW9kZWwuZ2V0U2VydmljZU1ldGFkYXRhKCkuZGF0YVNlcnZpY2VzLnNjaGVtYVswXTtmb3IodmFyIGk9LTEsYztjPXMuZW50aXR5Q29udGFpbmVyWysraV07KXtpZihjLmlzRGVmYXVsdEVudGl0eUNvbnRhaW5lcj09InRydWUiKXt0aGlzLl9vRGVmYXVsdEVudGl0eUNvbnRhaW5lcj1jO2JyZWFrfX12YXIgZT1zLmVudGl0eVR5cGU7dmFyIFE9W10sUD1bXSx1PVtdO2Zvcih2YXIgaT0tMSx0O3Q9ZVsrK2ldOyl7dmFyIGI9ZmFsc2U7aWYodC5leHRlbnNpb25zIT11bmRlZmluZWQpe2Zvcih2YXIgaj0tMSxFO0U9dC5leHRlbnNpb25zWysral07KXtpZihFLm5hbWVzcGFjZT09by5jb25zdGFudHMuU0FQX05BTUVTUEFDRSYmRS5uYW1lPT0ic2VtYW50aWNzIil7Yj10cnVlO3N3aXRjaChFLnZhbHVlKXtjYXNlImFnZ3JlZ2F0ZSI6US5wdXNoKHQpO2JyZWFrO2Nhc2UicGFyYW1ldGVycyI6UC5wdXNoKHQpO2JyZWFrO2RlZmF1bHQ6dS5wdXNoKHQpfX1pZihiKWNvbnRpbnVlfWlmKCFiKXUucHVzaCh0KX1lbHNlIHUucHVzaCh0KX1mb3IodmFyIGk9LTEsdDt0PXVbKytpXTspe3ZhciBhPW5ldyBvLkVudGl0eVR5cGUodGhpcy5fb01vZGVsLmdldFNlcnZpY2VNZXRhZGF0YSgpLHMsdCk7dGhpcy5fb0VudGl0eVR5cGVTZXRbYS5nZXRRTmFtZSgpXT1hO3ZhciBkPXRoaXMuX2dldEVudGl0eVNldHNPZlR5cGUocyxhLmdldFFOYW1lKCkpO2lmKGQubGVuZ3RoPT0wKXRocm93IkludmFsaWQgY29uc3VtcHRpb24gbW9kZWw6IE5vIGVudGl0eSBzZXQgZm9yIGVudGl0eSB0eXBlICIrYS5nZXRRTmFtZSgpKyIgZm91bmQiO2lmKGQubGVuZ3RoPjEpdGhyb3ciVW5zdXBwb3J0ZWQgY29uc3VtcHRpb24gbW9kZWw6IE1vcmUgdGhhbiBvbmUgZW50aXR5IHNldCBmb3IgZW50aXR5IHR5cGUgIithLmdldFFOYW1lKCkrIiBmb3VuZCI7dmFyIGY9bmV3IG8uRW50aXR5U2V0KHRoaXMuX29Nb2RlbC5nZXRTZXJ2aWNlTWV0YWRhdGEoKSxzLGRbMF1bMF0sZFswXVsxXSxhKTt0aGlzLl9vRW50aXR5U2V0U2V0W2YuZ2V0UU5hbWUoKV09Zjt0aGlzLl9vRW50aXR5VHlwZU5hbWVUb0VudGl0eVNldE1hcFthLmdldFFOYW1lKCldPWZ9dmFyIGc9e307Zm9yKHZhciBpPS0xLHQ7dD1QWysraV07KXt2YXIgYT1uZXcgby5FbnRpdHlUeXBlKHRoaXMuX29Nb2RlbC5nZXRTZXJ2aWNlTWV0YWRhdGEoKSxzLHQpO3RoaXMuX29FbnRpdHlUeXBlU2V0W2EuZ2V0UU5hbWUoKV09YTt2YXIgZD10aGlzLl9nZXRFbnRpdHlTZXRzT2ZUeXBlKHMsYS5nZXRRTmFtZSgpKTtpZihkLmxlbmd0aD09MCl0aHJvdyJJbnZhbGlkIGNvbnN1bXB0aW9uIG1vZGVsOiBObyBlbnRpdHkgc2V0IGZvciBwYXJhbWV0ZXIgZW50aXR5IHR5cGUgIithLmdldFFOYW1lKCkrIiBmb3VuZCI7aWYoZC5sZW5ndGg+MSl0aHJvdyJVbnN1cHBvcnRlZCBjb25zdW1wdGlvbiBtb2RlbDogTW9yZSB0aGFuIG9uZSBlbnRpdHkgc2V0IGZvciBwYXJhbWV0ZXIgZW50aXR5IHR5cGUgIithLmdldFFOYW1lKCkrIiBmb3VuZCI7dmFyIGY9bmV3IG8uRW50aXR5U2V0KHRoaXMuX29Nb2RlbC5nZXRTZXJ2aWNlTWV0YWRhdGEoKSxzLGRbMF1bMF0sZFswXVsxXSxhKTt0aGlzLl9vRW50aXR5U2V0U2V0W2YuZ2V0UU5hbWUoKV09Zjt0aGlzLl9vRW50aXR5VHlwZU5hbWVUb0VudGl0eVNldE1hcFthLmdldFFOYW1lKCldPWY7dmFyIGg9bmV3IG8uUGFyYW1ldGVyaXphdGlvbihhLGYpO3RoaXMuX29QYXJhbWV0ZXJpemF0aW9uU2V0W2guZ2V0TmFtZSgpXT1oO2dbYS5nZXRRTmFtZSgpXT1oO3ZhciBrPWEuZ2V0UU5hbWUoKTtpZihzLmFzc29jaWF0aW9uIT11bmRlZmluZWQpe2Zvcih2YXIgaj0tMSxBO0E9cy5hc3NvY2lhdGlvblsrK2pdOyl7aWYoQS5yZWZlcmVudGlhbENvbnN0cmFpbnQ9PXVuZGVmaW5lZCljb250aW51ZTt2YXIgbD1udWxsO2lmKEEuZW5kWzBdLnR5cGU9PWsmJkEuZW5kWzBdLm11bHRpcGxpY2l0eT09IioiJiZBLmVuZFsxXS5tdWx0aXBsaWNpdHk9PSIxIil7bD1BLmVuZFsxXS50eXBlfWVsc2UgaWYoQS5lbmRbMV0udHlwZT09ayYmQS5lbmRbMV0ubXVsdGlwbGljaXR5PT0iKiImJkEuZW5kWzBdLm11bHRpcGxpY2l0eT09IjEiKXtsPUEuZW5kWzBdLnR5cGV9aWYoIWwpY29udGludWU7aWYoQS5yZWZlcmVudGlhbENvbnN0cmFpbnQuZGVwZW5kZW50LnByb3BlcnR5UmVmLmxlbmd0aCE9MSljb250aW51ZTt2YXIgbj1oLmZpbmRQYXJhbWV0ZXJCeU5hbWUoQS5yZWZlcmVudGlhbENvbnN0cmFpbnQuZGVwZW5kZW50LnByb3BlcnR5UmVmWzBdLm5hbWUpO2lmKG49PW51bGwpY29udGludWU7dmFyIHY9dGhpcy5fb0VudGl0eVR5cGVTZXRbbF07dmFyIFY9dGhpcy5fb0VudGl0eVR5cGVOYW1lVG9FbnRpdHlTZXRNYXBbbF07bi5zZXRWYWx1ZVNldEVudGl0eSh2LFYpfX19Zm9yKHZhciBpPS0xLHQ7dD1RWysraV07KXt2YXIgYT1uZXcgby5FbnRpdHlUeXBlKHRoaXMuX29Nb2RlbC5nZXRTZXJ2aWNlTWV0YWRhdGEoKSxzLHQpO3RoaXMuX29FbnRpdHlUeXBlU2V0W2EuZ2V0UU5hbWUoKV09YTt2YXIgcj1hLmdldFFOYW1lKCk7dmFyIGg9bnVsbDt2YXIgdz1udWxsO2lmKHMuYXNzb2NpYXRpb24hPXVuZGVmaW5lZCl7Zm9yKHZhciBqPS0xLEE7QT1zLmFzc29jaWF0aW9uWysral07KXt2YXIgeD1udWxsO2lmKEEuZW5kWzBdLnR5cGU9PXIpeD1BLmVuZFsxXS50eXBlO2Vsc2UgaWYoQS5lbmRbMV0udHlwZT09cil4PUEuZW5kWzBdLnR5cGU7ZWxzZSBjb250aW51ZTt2YXIgTT1udWxsO009Z1t4XTtpZihNIT1udWxsKWlmKGghPW51bGwpe3Rocm93IkxJTUlUQVRJT046IFVuYWJsZSB0byBoYW5kbGUgbXVsdGlwbGUgcGFyYW1ldGVyIGVudGl0eSB0eXBlcyBvZiBxdWVyeSBlbnRpdHkgIithLm5hbWV9ZWxzZXtoPU07dz1BfX19dmFyIGQ9dGhpcy5fZ2V0RW50aXR5U2V0c09mVHlwZShzLGEuZ2V0UU5hbWUoKSk7aWYoZC5sZW5ndGghPTEpdGhyb3ciSW52YWxpZCBjb25zdW1wdGlvbiBtb2RlbDogVGhlcmUgbXVzdCBiZSBleGFjdGx5IG9uZSBlbnRpdHkgc2V0IGZvciBhbiBlbnRpdHkgdHlwZSBhbm5vdGF0ZWQgd2l0aCBhZ2dyZWdhdGluZyBzZW1hbnRpY3MiO3ZhciBmPW5ldyBvLkVudGl0eVNldCh0aGlzLl9vTW9kZWwuZ2V0U2VydmljZU1ldGFkYXRhKCkscyxkWzBdWzBdLGRbMF1bMV0sYSk7dGhpcy5fb0VudGl0eVNldFNldFtmLmdldFFOYW1lKCldPWY7dGhpcy5fb0VudGl0eVR5cGVOYW1lVG9FbnRpdHlTZXRNYXBbYS5nZXRRTmFtZSgpXT1mO3ZhciB5PW5ldyBvLlF1ZXJ5UmVzdWx0KHRoaXMsYSxmLGgpO3RoaXMuX29RdWVyeVJlc3VsdFNldFt5LmdldE5hbWUoKV09eTtpZihoKWguc2V0VGFyZ2V0UXVlcnlSZXN1bHQoeSx3KTtpZihzLmFzc29jaWF0aW9uIT11bmRlZmluZWQpe2Zvcih2YXIgaj0tMSxBO0E9cy5hc3NvY2lhdGlvblsrK2pdOyl7aWYoQS5yZWZlcmVudGlhbENvbnN0cmFpbnQ9PXVuZGVmaW5lZCljb250aW51ZTt2YXIgRD1udWxsO2lmKEEuZW5kWzBdLnR5cGU9PXImJkEuZW5kWzBdLm11bHRpcGxpY2l0eT09IioiJiZBLmVuZFsxXS5tdWx0aXBsaWNpdHk9PSIxIil7RD1BLmVuZFsxXS50eXBlfWVsc2UgaWYoQS5lbmRbMV0udHlwZT09ciYmQS5lbmRbMV0ubXVsdGlwbGljaXR5PT0iKiImJkEuZW5kWzBdLm11bHRpcGxpY2l0eT09IjEiKXtEPUEuZW5kWzBdLnR5cGV9aWYoIUQpY29udGludWU7aWYoQS5yZWZlcmVudGlhbENvbnN0cmFpbnQuZGVwZW5kZW50LnByb3BlcnR5UmVmLmxlbmd0aCE9MSljb250aW51ZTt2YXIgej15LmZpbmREaW1lbnNpb25CeU5hbWUoQS5yZWZlcmVudGlhbENvbnN0cmFpbnQuZGVwZW5kZW50LnByb3BlcnR5UmVmWzBdLm5hbWUpO2lmKHo9PW51bGwpY29udGludWU7dmFyIEI9dGhpcy5fb0VudGl0eVR5cGVOYW1lVG9FbnRpdHlTZXRNYXBbRF07ei5zZXRNZW1iZXJzRW50aXR5U2V0KEIpfX19fSxvVUk1T0RhdGFNb2RlbEFubm90YXRhYmxlT2JqZWN0OntvYmplY3ROYW1lOiJzY2hlbWEiLGtleVByb3BOYW1lOiJuYW1lc3BhY2UiLGV4dGVuc2lvbnM6dHJ1ZSxhU3ViT2JqZWN0Olt7b2JqZWN0TmFtZToiZW50aXR5VHlwZSIsa2V5UHJvcE5hbWU6Im5hbWUiLGV4dGVuc2lvbnM6dHJ1ZSxhU3ViT2JqZWN0Olt7b2JqZWN0TmFtZToicHJvcGVydHkiLGtleVByb3BOYW1lOiJuYW1lIixhU3ViT2JqZWN0OltdLGV4dGVuc2lvbnM6dHJ1ZX1dfSx7b2JqZWN0TmFtZToiZW50aXR5Q29udGFpbmVyIixrZXlQcm9wTmFtZToibmFtZSIsZXh0ZW5zaW9uczpmYWxzZSxhU3ViT2JqZWN0Olt7b2JqZWN0TmFtZToiZW50aXR5U2V0IixrZXlQcm9wTmFtZToibmFtZSIsZXh0ZW5zaW9uczp0cnVlLGFTdWJPYmplY3Q6W119XX1dfSxtZXJnZVYyQW5ub3RhdGlvbnM6ZnVuY3Rpb24oYSl7dmFyIEE9bnVsbDt0cnl7QT1KU09OLnBhcnNlKGEpfWNhdGNoKGUpe3JldHVybn12YXIgbTt0cnl7bT10aGlzLl9vTW9kZWwuZ2V0U2VydmljZU1ldGFkYXRhKCkuZGF0YVNlcnZpY2VzfWNhdGNoKGUpe3JldHVybn1mb3IodmFyIHAgaW4gQSl7aWYoISh0aGlzLm9VSTVPRGF0YU1vZGVsQW5ub3RhdGFibGVPYmplY3Qub2JqZWN0TmFtZT09cCkpY29udGludWU7aWYoIShBW3BdaW5zdGFuY2VvZiBBcnJheSkpe2NvbnRpbnVlfXRoaXMubWVyZ2VWMkFubm90YXRpb25MZXZlbChtW3RoaXMub1VJNU9EYXRhTW9kZWxBbm5vdGF0YWJsZU9iamVjdC5vYmplY3ROYW1lXSxBW3RoaXMub1VJNU9EYXRhTW9kZWxBbm5vdGF0YWJsZU9iamVjdC5vYmplY3ROYW1lXSx0aGlzLm9VSTVPRGF0YU1vZGVsQW5ub3RhdGFibGVPYmplY3QpO2JyZWFrfXJldHVybn0sbWVyZ2VWMkFubm90YXRpb25MZXZlbDpmdW5jdGlvbihNLGEsdSl7Zm9yKHZhciBpPS0xLEE7QT1hWysraV07KXtmb3IodmFyIGo9LTEsYjtiPU1bKytqXTspe2lmKCEoQVt1LmtleVByb3BOYW1lXT09Ylt1LmtleVByb3BOYW1lXSkpY29udGludWU7aWYoQVsiZXh0ZW5zaW9ucyJdIT11bmRlZmluZWQpe2lmKGJbImV4dGVuc2lvbnMiXT09dW5kZWZpbmVkKWJbImV4dGVuc2lvbnMiXT1uZXcgQXJyYXkoKTtmb3IodmFyIGw9LTEsYztjPUFbImV4dGVuc2lvbnMiXVsrK2xdOyl7dmFyIGY9ZmFsc2U7Zm9yKHZhciBtPS0xLGQ7ZD1iWyJleHRlbnNpb25zIl1bKyttXTspe2lmKGMubmFtZT09ZC5uYW1lJiZjLm5hbWVzcGFjZT09ZC5uYW1lc3BhY2Upe2QudmFsdWU9Yy52YWx1ZTtmPXRydWU7YnJlYWt9fWlmKCFmKWJbImV4dGVuc2lvbnMiXS5wdXNoKGMpfX1mb3IodmFyIGs9LTEsVTtVPXUuYVN1Yk9iamVjdFsrK2tdOyl7Zm9yKHZhciBwIGluIEEpe2lmKCEoVS5vYmplY3ROYW1lPT1wKSljb250aW51ZTtpZighKEFbVS5vYmplY3ROYW1lXWluc3RhbmNlb2YgQXJyYXkpKWNvbnRpbnVlO2lmKChiW1Uub2JqZWN0TmFtZV09PXVuZGVmaW5lZCl8fCghKGJbVS5vYmplY3ROYW1lXWluc3RhbmNlb2YgQXJyYXkpKSljb250aW51ZTt0aGlzLm1lcmdlVjJBbm5vdGF0aW9uTGV2ZWwoYltVLm9iamVjdE5hbWVdLEFbVS5vYmplY3ROYW1lXSxVKTticmVha319fX1yZXR1cm59LGZpbmRRdWVyeVJlc3VsdEJ5TmFtZTpmdW5jdGlvbihuKXt2YXIgUT10aGlzLl9vUXVlcnlSZXN1bHRTZXRbbl07aWYoIVEmJnRoaXMuX29EZWZhdWx0RW50aXR5Q29udGFpbmVyKXt2YXIgcz10aGlzLl9vRGVmYXVsdEVudGl0eUNvbnRhaW5lci5uYW1lKyIuIituO1E9dGhpcy5fb1F1ZXJ5UmVzdWx0U2V0W3NdfXJldHVybiBRfSxnZXRBbGxRdWVyeVJlc3VsdE5hbWVzOmZ1bmN0aW9uKCl7aWYodGhpcy5fYVF1ZXJ5UmVzdWx0TmFtZXMpcmV0dXJuIHRoaXMuX2FRdWVyeVJlc3VsdE5hbWVzO3RoaXMuX2FRdWVyeVJlc3VsdE5hbWVzPW5ldyBBcnJheSgwKTtmb3IodmFyIG4gaW4gdGhpcy5fb1F1ZXJ5UmVzdWx0U2V0KXRoaXMuX2FRdWVyeVJlc3VsdE5hbWVzLnB1c2godGhpcy5fb1F1ZXJ5UmVzdWx0U2V0W25dLmdldE5hbWUoKSk7cmV0dXJuIHRoaXMuX2FRdWVyeVJlc3VsdE5hbWVzfSxnZXRBbGxRdWVyeVJlc3VsdHM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb1F1ZXJ5UmVzdWx0U2V0fSxnZXRPRGF0YU1vZGVsOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29Nb2RlbH0sX2dldEVudGl0eVNldHNPZlR5cGU6ZnVuY3Rpb24ocyxRKXt2YXIgZT1bXTtmb3IodmFyIGk9LTEsRTtFPXMuZW50aXR5Q29udGFpbmVyWysraV07KXtmb3IodmFyIGo9LTEsYTthPUUuZW50aXR5U2V0Wysral07KXtpZihhLmVudGl0eVR5cGU9PVEpZS5wdXNoKFtFLGFdKX19cmV0dXJuIGV9LF9tUGFyYW1ldGVyOm51bGwsX29Nb2RlbDpudWxsLF9vRGVmYXVsdEVudGl0eUNvbnRhaW5lcjpudWxsLF9hUXVlcnlSZXN1bHROYW1lczpudWxsLF9vUXVlcnlSZXN1bHRTZXQ6bnVsbCxfb1BhcmFtZXRlcml6YXRpb25TZXQ6bnVsbCxfb0VudGl0eVR5cGVTZXQ6bnVsbCxfb0VudGl0eVNldFNldDpudWxsLF9vRW50aXR5VHlwZU5hbWVUb0VudGl0eVNldE1hcDpudWxsLF9vQWN0aXZhdGVkV29ya2Fyb3VuZHM6bnVsbH07by5RdWVyeVJlc3VsdD1mdW5jdGlvbihtLGUsRSxwKXt0aGlzLl9pbml0KG0sZSxFLHApfTtvLlF1ZXJ5UmVzdWx0LnByb3RvdHlwZT17X2luaXQ6ZnVuY3Rpb24obSxlLEUscCxhKXt0aGlzLl9vTW9kZWw9bTt0aGlzLl9vRW50aXR5VHlwZT1lO3RoaXMuX29FbnRpdHlTZXQ9RTt0aGlzLl9vUGFyYW1ldGVyaXphdGlvbj1wO3RoaXMuX29EaW1lbnNpb25TZXQ9bmV3IE9iamVjdCgpO3RoaXMuX29NZWFzdXJlU2V0PW5ldyBPYmplY3QoKTt2YXIgUD1lLmdldFR5cGVEZXNjcmlwdGlvbigpLnByb3BlcnR5O3ZhciBBPXt9O2Zvcih2YXIgaT0tMSxiO2I9UFsrK2ldOyl7aWYoYi5leHRlbnNpb25zPT11bmRlZmluZWQpY29udGludWU7Zm9yKHZhciBqPS0xLGM7Yz1iLmV4dGVuc2lvbnNbKytqXTspe2lmKCFjLm5hbWVzcGFjZT09by5jb25zdGFudHMuU0FQX05BTUVTUEFDRSljb250aW51ZTtzd2l0Y2goYy5uYW1lKXtjYXNlImFnZ3JlZ2F0aW9uLXJvbGUiOnN3aXRjaChjLnZhbHVlKXtjYXNlImRpbWVuc2lvbiI6dmFyIGQ9bmV3IG8uRGltZW5zaW9uKHRoaXMsYik7dGhpcy5fb0RpbWVuc2lvblNldFtkLmdldE5hbWUoKV09ZDticmVhaztjYXNlIm1lYXN1cmUiOnZhciBNPW5ldyBvLk1lYXN1cmUodGhpcyxiKTt0aGlzLl9vTWVhc3VyZVNldFtNLmdldE5hbWUoKV09TTticmVhaztjYXNlInRvdGFsZWQtcHJvcGVydGllcy1saXN0Ijp0aGlzLl9vVG90YWxlZFByb3BlcnR5TGlzdFByb3BlcnR5PWI7YnJlYWt9YnJlYWs7Y2FzZSJhdHRyaWJ1dGUtZm9yIjp2YXIgRD1uZXcgby5EaW1lbnNpb25BdHRyaWJ1dGUodGhpcyxiKTtBW0QuZ2V0S2V5UHJvcGVydHkoKV09RDticmVha319fWZvcih2YXIgcyBpbiBBKXt2YXIgRD1BW3NdO0QuZ2V0RGltZW5zaW9uKCkuYWRkQXR0cmlidXRlKEQpfWlmKG0uX29BY3RpdmF0ZWRXb3JrYXJvdW5kcy5JZGVudGlmeVRleHRQcm9wZXJ0aWVzQnlOYW1lKXt2YXIgZj1uZXcgQXJyYXkoKTtmb3IodmFyIGcgaW4gdGhpcy5fb0RpbWVuc2lvblNldCl7dmFyIGQ9dGhpcy5fb0RpbWVuc2lvblNldFtnXTtpZighZC5nZXRUZXh0UHJvcGVydHkoKSl7dmFyIHQ9bnVsbDt0PWUuZmluZFByb3BlcnR5QnlOYW1lKGcrIk5hbWUiKTtpZighdCl0PWUuZmluZFByb3BlcnR5QnlOYW1lKGcrIlRleHQiKTtpZighdCl0PWUuZmluZFByb3BlcnR5QnlOYW1lKGcrIkRlc2MiKTtpZighdCl0PWUuZmluZFByb3BlcnR5QnlOYW1lKGcrIkRlc2NyaXB0aW9uIik7aWYodCl7ZC5zZXRUZXh0UHJvcGVydHkodCk7Zi5wdXNoKHQubmFtZSl9fX1mb3IodmFyIGk9LTEsaDtoPWZbKytpXTspe2RlbGV0ZSB0aGlzLl9vRGltZW5zaW9uU2V0W2hdfX19LGdldE5hbWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRFbnRpdHlTZXQoKS5nZXRRTmFtZSgpfSxnZXRQYXJhbWV0ZXJpemF0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29QYXJhbWV0ZXJpemF0aW9ufSxnZXRBbGxEaW1lbnNpb25OYW1lczpmdW5jdGlvbigpe2lmKHRoaXMuX2FEaW1lbnNpb25OYW1lcylyZXR1cm4gdGhpcy5fYURpbWVuc2lvbk5hbWVzO3RoaXMuX2FEaW1lbnNpb25OYW1lcz1bXTtmb3IodmFyIG4gaW4gdGhpcy5fb0RpbWVuc2lvblNldCl0aGlzLl9hRGltZW5zaW9uTmFtZXMucHVzaCh0aGlzLl9vRGltZW5zaW9uU2V0W25dLmdldE5hbWUoKSk7cmV0dXJuIHRoaXMuX2FEaW1lbnNpb25OYW1lc30sZ2V0QWxsRGltZW5zaW9uczpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vRGltZW5zaW9uU2V0fSxnZXRBbGxNZWFzdXJlTmFtZXM6ZnVuY3Rpb24oKXtpZih0aGlzLl9hTWVhc3VyZU5hbWVzKXJldHVybiB0aGlzLl9hTWVhc3VyZU5hbWVzO3RoaXMuX2FNZWFzdXJlTmFtZXM9W107Zm9yKHZhciBuIGluIHRoaXMuX29NZWFzdXJlU2V0KXRoaXMuX2FNZWFzdXJlTmFtZXMucHVzaCh0aGlzLl9vTWVhc3VyZVNldFtuXS5nZXROYW1lKCkpO3JldHVybiB0aGlzLl9hTWVhc3VyZU5hbWVzfSxnZXRBbGxNZWFzdXJlczpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vTWVhc3VyZVNldH0sZmluZERpbWVuc2lvbkJ5TmFtZTpmdW5jdGlvbihuKXtyZXR1cm4gdGhpcy5fb0RpbWVuc2lvblNldFtuXX0sZmluZERpbWVuc2lvbkJ5UHJvcGVydHlOYW1lOmZ1bmN0aW9uKG4pe2lmKHRoaXMuX29EaW1lbnNpb25TZXRbbl0pcmV0dXJuIHRoaXMuX29EaW1lbnNpb25TZXRbbl07Zm9yKHZhciBkIGluIHRoaXMuX29EaW1lbnNpb25TZXQpe3ZhciBEPXRoaXMuX29EaW1lbnNpb25TZXRbZF07dmFyIHQ9RC5nZXRUZXh0UHJvcGVydHkoKTtpZih0JiZ0Lm5hbWU9PW4pcmV0dXJuIEQ7aWYoRC5maW5kQXR0cmlidXRlQnlOYW1lKG4pKXJldHVybiBEfXJldHVybiBudWxsfSxnZXRUb3RhbGVkUHJvcGVydGllc0xpc3RQcm9wZXJ0eTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vVG90YWxlZFByb3BlcnR5TGlzdFByb3BlcnR5fSxmaW5kTWVhc3VyZUJ5TmFtZTpmdW5jdGlvbihuKXtyZXR1cm4gdGhpcy5fb01lYXN1cmVTZXRbbl19LGZpbmRNZWFzdXJlQnlQcm9wZXJ0eU5hbWU6ZnVuY3Rpb24obil7aWYodGhpcy5fb01lYXN1cmVTZXRbbl0pcmV0dXJuIHRoaXMuX29NZWFzdXJlU2V0W25dO2Zvcih2YXIgbSBpbiB0aGlzLl9vTWVhc3VyZVNldCl7dmFyIE09dGhpcy5fb01lYXN1cmVTZXRbbV07dmFyIGY9TS5nZXRGb3JtYXR0ZWRWYWx1ZVByb3BlcnR5KCk7aWYoZiYmZi5uYW1lPT1uKXJldHVybiBNfXJldHVybiBudWxsfSxnZXRNb2RlbDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vTW9kZWx9LGdldEVudGl0eVR5cGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb0VudGl0eVR5cGV9LGdldEVudGl0eVNldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vRW50aXR5U2V0fSxfb01vZGVsOm51bGwsX29FbnRpdHlUeXBlOm51bGwsX29FbnRpdHlTZXQ6bnVsbCxfb1BhcmFtZXRlcml6YXRpb246bnVsbCxfYURpbWVuc2lvbk5hbWVzOm51bGwsX29EaW1lbnNpb25TZXQ6bnVsbCxfYU1lYXN1cmVOYW1lczpudWxsLF9vTWVhc3VyZVNldDpudWxsLF9vVG90YWxlZFByb3BlcnR5TGlzdFByb3BlcnR5Om51bGx9O28uUGFyYW1ldGVyaXphdGlvbj1mdW5jdGlvbihlLEUpe3RoaXMuX2luaXQoZSxFKX07by5QYXJhbWV0ZXJpemF0aW9uLnByb3RvdHlwZT17X2luaXQ6ZnVuY3Rpb24oZSxFKXt0aGlzLl9vRW50aXR5VHlwZT1lO3RoaXMuX29FbnRpdHlTZXQ9RTt0aGlzLl9vUGFyYW1ldGVyU2V0PW5ldyBPYmplY3QoKTt2YXIgcD1lLmdldFR5cGVEZXNjcmlwdGlvbigpLnByb3BlcnR5O2Zvcih2YXIgaT0tMSxQO1A9cFsrK2ldOyl7aWYoUC5leHRlbnNpb25zPT11bmRlZmluZWQpY29udGludWU7Zm9yKHZhciBqPS0xLGE7YT1QLmV4dGVuc2lvbnNbKytqXTspe2lmKCFhLm5hbWVzcGFjZT09by5jb25zdGFudHMuU0FQX05BTUVTUEFDRSljb250aW51ZTtzd2l0Y2goYS5uYW1lKXtjYXNlInBhcmFtZXRlciI6dmFyIGI9bmV3IG8uUGFyYW1ldGVyKHRoaXMsUCk7dGhpcy5fb1BhcmFtZXRlclNldFtiLmdldE5hbWUoKV09YjticmVha319fX0sc2V0VGFyZ2V0UXVlcnlSZXN1bHQ6ZnVuY3Rpb24oUSxhKXt0aGlzLl9vUXVlcnlSZXN1bHQ9UTt2YXIgcz10aGlzLl9vRW50aXR5VHlwZS5nZXRTY2hlbWEoKS5uYW1lc3BhY2UrIi4iK2EubmFtZTt2YXIgbj10aGlzLl9vRW50aXR5VHlwZS5nZXRUeXBlRGVzY3JpcHRpb24oKS5uYXZpZ2F0aW9uUHJvcGVydHk7aWYoIW4pdGhyb3ciSW52YWxpZCBjb25zdW1wdGlvbiBtb2RlbDogUGFyYW1ldGVycyBlbnRpdHkgdHlwZSBsYWNrcyBuYXZpZ2F0aW9uIHByb3BlcnR5IGZvciBhc3NvY2lhdGlvbiB0byBxdWVyeSByZXN1bHQgZW50aXR5IHR5cGUiO2Zvcih2YXIgaT0tMSxOO049blsrK2ldOyl7aWYoTi5yZWxhdGlvbnNoaXA9PXMpdGhpcy5fb05hdlByb3BUb1F1ZXJ5UmVzdWx0PU4ubmFtZX1pZighdGhpcy5fb05hdlByb3BUb1F1ZXJ5UmVzdWx0KXRocm93IkludmFsaWQgY29uc3VtcHRpb24gbW9kZWw6IFBhcmFtZXRlcnMgZW50aXR5IHR5cGUgbGFja3MgbmF2aWdhdGlvbiBwcm9wZXJ0eSBmb3IgYXNzb2NpYXRpb24gdG8gcXVlcnkgcmVzdWx0IGVudGl0eSB0eXBlIn0sZ2V0VGFyZ2V0UXVlcnlSZXN1bHQ6ZnVuY3Rpb24oKXtpZighdGhpcy5fb1F1ZXJ5UmVzdWx0KXRocm93Ik5vIHRhcmdldCBxdWVyeSByZXN1bHQgc2V0IjtyZXR1cm4gdGhpcy5fb1F1ZXJ5UmVzdWx0fSxnZXROYW1lOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0RW50aXR5U2V0KCkuZ2V0UU5hbWUoKX0sZ2V0QWxsUGFyYW1ldGVyTmFtZXM6ZnVuY3Rpb24oKXtpZih0aGlzLl9hUGFyYW1ldGVyTmFtZXMpcmV0dXJuIHRoaXMuX2FQYXJhbWV0ZXJOYW1lczt0aGlzLl9hUGFyYW1ldGVyTmFtZXM9W107Zm9yKHZhciBuIGluIHRoaXMuX29QYXJhbWV0ZXJTZXQpdGhpcy5fYVBhcmFtZXRlck5hbWVzLnB1c2godGhpcy5fb1BhcmFtZXRlclNldFtuXS5nZXROYW1lKCkpO3JldHVybiB0aGlzLl9hUGFyYW1ldGVyTmFtZXN9LGdldEFsbFBhcmFtZXRlcnM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb1BhcmFtZXRlclNldH0sZmluZFBhcmFtZXRlckJ5TmFtZTpmdW5jdGlvbihuKXtyZXR1cm4gdGhpcy5fb1BhcmFtZXRlclNldFtuXX0sZ2V0TmF2aWdhdGlvblByb3BlcnR5VG9RdWVyeVJlc3VsdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vTmF2UHJvcFRvUXVlcnlSZXN1bHR9LGdldEVudGl0eVR5cGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb0VudGl0eVR5cGV9LGdldEVudGl0eVNldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vRW50aXR5U2V0fSxfb0VudGl0eVR5cGU6bnVsbCxfb0VudGl0eVNldDpudWxsLF9vUXVlcnlSZXN1bHQ6bnVsbCxfb05hdlByb3BUb1F1ZXJ5UmVzdWx0Om51bGwsX2FQYXJhbWV0ZXJOYW1lczpudWxsLF9vUGFyYW1ldGVyU2V0Om51bGx9O28uUGFyYW1ldGVyPWZ1bmN0aW9uKHAsUCl7dGhpcy5faW5pdChwLFApfTtvLlBhcmFtZXRlci5wcm90b3R5cGU9e19pbml0OmZ1bmN0aW9uKHAsUCl7dGhpcy5fb1BhcmFtZXRlcml6YXRpb249cDt0aGlzLl9vUHJvcGVydHk9UDt2YXIgZT1wLmdldEVudGl0eVR5cGUoKTtpZihQLmV4dGVuc2lvbnMhPXVuZGVmaW5lZCl7Zm9yKHZhciBpPS0xLEU7RT1QLmV4dGVuc2lvbnNbKytpXTspe2lmKCFFLm5hbWVzcGFjZT09by5jb25zdGFudHMuU0FQX05BTUVTUEFDRSljb250aW51ZTtzd2l0Y2goRS5uYW1lKXtjYXNlInBhcmFtZXRlciI6c3dpdGNoKEUudmFsdWUpe2Nhc2UibWFuZGF0b3J5Ijp0aGlzLl9iUmVxdWlyZWQ9dHJ1ZTticmVhaztjYXNlIm9wdGlvbmFsIjp0aGlzLl9iUmVxdWlyZWQ9ZmFsc2U7YnJlYWs7ZGVmYXVsdDp0aHJvdyJJbnZhbGlkIGFubm90YXRpb24gdmFsdWUgZm9yIHBhcmFtZXRlciBwcm9wZXJ0eSJ9YnJlYWs7Y2FzZSJsYWJlbCI6dGhpcy5fc0xhYmVsVGV4dD1FLnZhbHVlO2JyZWFrO2Nhc2UidGV4dCI6dGhpcy5fb1RleHRQcm9wZXJ0eT1lLmZpbmRQcm9wZXJ0eUJ5TmFtZShFLnZhbHVlKTticmVhaztjYXNlInVwcGVyLWJvdW5kYXJ5Ijp0aGlzLl9iSW50ZXJ2YWxCb3VuZGFyeVBhcmFtZXRlcj10cnVlO3RoaXMuX29VcHBlckludGVydmFsQm91bmRhcnlQYXJhbWV0ZXJQcm9wZXJ0eT1lLmZpbmRQcm9wZXJ0eUJ5TmFtZShFLnZhbHVlKTticmVhaztjYXNlImxvd2VyLWJvdW5kYXJ5Ijp0aGlzLl9iSW50ZXJ2YWxCb3VuZGFyeVBhcmFtZXRlcj10cnVlO3RoaXMuX29Mb3dlckludGVydmFsQm91bmRhcnlQYXJhbWV0ZXJQcm9wZXJ0eT1lLmZpbmRQcm9wZXJ0eUJ5TmFtZShFLnZhbHVlKTticmVha319fWlmKCF0aGlzLl9zTGFiZWxUZXh0KXRoaXMuX3NMYWJlbFRleHQ9IiJ9LHNldFZhbHVlU2V0RW50aXR5OmZ1bmN0aW9uKGUsRSl7dGhpcy5fb1ZhbHVlU2V0RW50aXR5VHlwZT1lO3RoaXMuX29WYWx1ZVNldEVudGl0eVNldD1FfSxnZXRUZXh0UHJvcGVydHk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb1RleHRQcm9wZXJ0eX0sZ2V0TGFiZWxUZXh0OmZ1bmN0aW9uKCl7aWYoIXRoaXMuX3NMYWJlbFRleHQmJnRoaXMuX29QYXJhbWV0ZXJpemF0aW9uLl9vUXVlcnlSZXN1bHQuX29Nb2RlbC5fb0FjdGl2YXRlZFdvcmthcm91bmRzLkNyZWF0ZUxhYmVsc0Zyb21UZWNobmljYWxOYW1lcyl0aGlzLl9zTGFiZWxUZXh0PW8uaGVscGVyLnRva2VuaXplTmFtZXRvTGFiZWxUZXh0KHRoaXMuZ2V0TmFtZSgpKTtyZXR1cm4gdGhpcy5fc0xhYmVsVGV4dH0saXNPcHRpb25hbDpmdW5jdGlvbigpe3JldHVybighdGhpcy5fYlJlcXVpcmVkKX0saXNJbnRlcnZhbEJvdW5kYXJ5OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2JJbnRlcnZhbEJvdW5kYXJ5UGFyYW1ldGVyfSxpc0xvd2VySW50ZXJ2YWxCb3VuZGFyeTpmdW5jdGlvbigpe3JldHVybih0aGlzLl9vVXBwZXJJbnRlcnZhbEJvdW5kYXJ5UGFyYW1ldGVyUHJvcGVydHk/dHJ1ZTpmYWxzZSl9LGdldFBlZXJJbnRlcnZhbEJvdW5kYXJ5UGFyYW1ldGVyOmZ1bmN0aW9uKCl7dmFyIHA9bnVsbDtpZih0aGlzLl9vTG93ZXJJbnRlcnZhbEJvdW5kYXJ5UGFyYW1ldGVyUHJvcGVydHkpcD10aGlzLl9vTG93ZXJJbnRlcnZhbEJvdW5kYXJ5UGFyYW1ldGVyUHJvcGVydHkubmFtZTtlbHNlIHA9dGhpcy5fb1VwcGVySW50ZXJ2YWxCb3VuZGFyeVBhcmFtZXRlclByb3BlcnR5Lm5hbWU7aWYoIXApdGhyb3ciUGFyYW1ldGVyIGlzIG5vdCBhbiBpbnRlcnZhbCBib3VuZGFyeSI7cmV0dXJuIHRoaXMuX29QYXJhbWV0ZXJpemF0aW9uLmZpbmRQYXJhbWV0ZXJCeU5hbWUocCl9LGlzVmFsdWVTZXRBdmFpbGFibGU6ZnVuY3Rpb24oKXtyZXR1cm4odGhpcy5fb1ZhbHVlU2V0RW50aXR5VHlwZT90cnVlOmZhbHNlKX0sZ2V0TmFtZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vUHJvcGVydHkubmFtZX0sZ2V0UHJvcGVydHk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb1Byb3BlcnR5fSxnZXRDb250YWluaW5nUGFyYW1ldGVyaXphdGlvbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vUGFyYW1ldGVyaXphdGlvbn0sZ2V0VVJJVG9WYWx1ZUVudGl0eVNldDpmdW5jdGlvbihzKXt2YXIgdT1udWxsO3U9KHM/czoiIikrIi8iK3RoaXMuX29WYWx1ZVNldEVudGl0eVNldC5nZXRRTmFtZSgpO3JldHVybiB1fSxfb1BhcmFtZXRlcml6YXRpb246bnVsbCxfb1Byb3BlcnR5Om51bGwsX3NMYWJlbFRleHQ6bnVsbCxfb1RleHRQcm9wZXJ0eTpudWxsLF9iUmVxdWlyZWQ6ZmFsc2UsX2JJbnRlcnZhbEJvdW5kYXJ5UGFyYW1ldGVyOmZhbHNlLF9vTG93ZXJJbnRlcnZhbEJvdW5kYXJ5UGFyYW1ldGVyUHJvcGVydHk6bnVsbCxfb1VwcGVySW50ZXJ2YWxCb3VuZGFyeVBhcmFtZXRlclByb3BlcnR5Om51bGwsX29WYWx1ZVNldEVudGl0eVR5cGU6bnVsbCxfb1ZhbHVlU2V0RW50aXR5U2V0Om51bGx9O28uRGltZW5zaW9uPWZ1bmN0aW9uKFEscCl7dGhpcy5faW5pdChRLHApfTtvLkRpbWVuc2lvbi5wcm90b3R5cGU9e19pbml0OmZ1bmN0aW9uKFEscCl7dGhpcy5fb1F1ZXJ5UmVzdWx0PVE7dGhpcy5fb1Byb3BlcnR5PXA7dGhpcy5fb0F0dHJpYnV0ZVNldD1uZXcgT2JqZWN0KCl9LHNldE1lbWJlcnNFbnRpdHlTZXQ6ZnVuY3Rpb24oZSl7dGhpcy5fb01lbWJlcnNFbnRpdHlTZXQ9ZX0sZ2V0TmFtZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vUHJvcGVydHkubmFtZX0sZ2V0S2V5UHJvcGVydHk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb1Byb3BlcnR5fSxnZXRUZXh0UHJvcGVydHk6ZnVuY3Rpb24oKXtpZighdGhpcy5fb1RleHRQcm9wZXJ0eSl0aGlzLl9vVGV4dFByb3BlcnR5PXRoaXMuX29RdWVyeVJlc3VsdC5nZXRFbnRpdHlUeXBlKCkuZ2V0VGV4dFByb3BlcnR5T2ZQcm9wZXJ0eSh0aGlzLmdldE5hbWUoKSk7cmV0dXJuIHRoaXMuX29UZXh0UHJvcGVydHl9LHNldFRleHRQcm9wZXJ0eTpmdW5jdGlvbih0KXt0aGlzLl9vVGV4dFByb3BlcnR5PXR9LGdldExhYmVsVGV4dDpmdW5jdGlvbigpe2lmKCF0aGlzLl9zTGFiZWxUZXh0KXRoaXMuX3NMYWJlbFRleHQ9dGhpcy5fb1F1ZXJ5UmVzdWx0LmdldEVudGl0eVR5cGUoKS5nZXRMYWJlbE9mUHJvcGVydHkodGhpcy5nZXROYW1lKCkpO2lmKCF0aGlzLl9zTGFiZWxUZXh0JiZ0aGlzLl9vUXVlcnlSZXN1bHQuX29Nb2RlbC5fb0FjdGl2YXRlZFdvcmthcm91bmRzLkNyZWF0ZUxhYmVsc0Zyb21UZWNobmljYWxOYW1lcyl0aGlzLl9zTGFiZWxUZXh0PW8uaGVscGVyLnRva2VuaXplTmFtZXRvTGFiZWxUZXh0KHRoaXMuZ2V0TmFtZSgpKTtyZXR1cm4odGhpcy5fc0xhYmVsVGV4dD09bnVsbD8iIjp0aGlzLl9zTGFiZWxUZXh0KX0sZ2V0U3VwZXJPcmRpbmF0ZURpbWVuc2lvbjpmdW5jdGlvbigpe2lmKCF0aGlzLl9zU3VwZXJPcmRpbmF0ZURpbWVuc2lvbil7dmFyIHM9dGhpcy5fb1F1ZXJ5UmVzdWx0LmdldEVudGl0eVR5cGUoKS5nZXRTdXBlck9yZGluYXRlUHJvcGVydHlPZlByb3BlcnR5KHRoaXMuZ2V0TmFtZSgpKS5uYW1lO3RoaXMuX3NTdXBlck9yZGluYXRlRGltZW5zaW9uPXRoaXMuX29RdWVyeVJlc3VsdC5maW5kRGltZW5zaW9uQnlOYW1lKHMpfXJldHVybiB0aGlzLl9zU3VwZXJPcmRpbmF0ZURpbWVuc2lvbn0sZ2V0SGllcmFyY2h5OmZ1bmN0aW9uKCl7aWYoIXRoaXMuX29IaWVyYXJjaHkpdGhpcy5fb0hpZXJhcmNoeT10aGlzLl9vUXVlcnlSZXN1bHQuZ2V0RW50aXR5VHlwZSgpLmdldEhpZXJhcmNoeSh0aGlzLl9vUHJvcGVydHkubmFtZSk7cmV0dXJuIHRoaXMuX29IaWVyYXJjaHl9LGdldEFsbEF0dHJpYnV0ZU5hbWVzOmZ1bmN0aW9uKCl7aWYodGhpcy5fYUF0dHJpYnV0ZU5hbWVzKXJldHVybiB0aGlzLl9hQXR0cmlidXRlTmFtZXM7dGhpcy5fYUF0dHJpYnV0ZU5hbWVzPVtdO2Zvcih2YXIgbiBpbiB0aGlzLl9vQXR0cmlidXRlU2V0KXRoaXMuX2FBdHRyaWJ1dGVOYW1lcy5wdXNoKHRoaXMuX29BdHRyaWJ1dGVTZXRbbl0uZ2V0TmFtZSgpKTtyZXR1cm4gdGhpcy5fYUF0dHJpYnV0ZU5hbWVzfSxnZXRBbGxBdHRyaWJ1dGVzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29BdHRyaWJ1dGVTZXR9LGZpbmRBdHRyaWJ1dGVCeU5hbWU6ZnVuY3Rpb24obil7cmV0dXJuIHRoaXMuX29BdHRyaWJ1dGVTZXRbbl19LGFkZEF0dHJpYnV0ZTpmdW5jdGlvbihkKXt0aGlzLl9vQXR0cmlidXRlU2V0W2QuZ2V0TmFtZSgpXT1kfSxnZXRDb250YWluaW5nUXVlcnlSZXN1bHQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb1F1ZXJ5UmVzdWx0fSxoYXNNYXN0ZXJEYXRhOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29NZW1iZXJzRW50aXR5U2V0IT1udWxsP3RydWU6ZmFsc2V9LGdldE1hc3RlckRhdGFFbnRpdHlTZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb01lbWJlcnNFbnRpdHlTZXR9LF9vUXVlcnlSZXN1bHQ6bnVsbCxfb1Byb3BlcnR5Om51bGwsX29UZXh0UHJvcGVydHk6bnVsbCxfc0xhYmVsVGV4dDpudWxsLF9zU3VwZXJPcmRpbmF0ZURpbWVuc2lvbjpudWxsLF9hQXR0cmlidXRlTmFtZXM6bnVsbCxfb0F0dHJpYnV0ZVNldDpudWxsLF9vTWVtYmVyc0VudGl0eVNldDpudWxsLF9vSGllcmFyY2h5Om51bGx9O28uRGltZW5zaW9uQXR0cmlidXRlPWZ1bmN0aW9uKFEscCl7dGhpcy5faW5pdChRLHApfTtvLkRpbWVuc2lvbkF0dHJpYnV0ZS5wcm90b3R5cGU9e19pbml0OmZ1bmN0aW9uKFEscCl7dGhpcy5fb1F1ZXJ5UmVzdWx0PVE7dGhpcy5fb1Byb3BlcnR5PXA7aWYocC5leHRlbnNpb25zIT11bmRlZmluZWQpe2Zvcih2YXIgaT0tMSxlO2U9cC5leHRlbnNpb25zWysraV07KXtpZighZS5uYW1lc3BhY2U9PW8uY29uc3RhbnRzLlNBUF9OQU1FU1BBQ0UpY29udGludWU7c3dpdGNoKGUubmFtZSl7Y2FzZSJhdHRyaWJ1dGUtZm9yIjp0aGlzLl9zRGltZW5zaW9uTmFtZT1lLnZhbHVlO2JyZWFrO2Nhc2UibGFiZWwiOnRoaXMuX3NMYWJlbFRleHQ9ZS52YWx1ZTticmVhaztjYXNlInRleHQiOnRoaXMuX29UZXh0UHJvcGVydHk9US5nZXRFbnRpdHlUeXBlKCkuZmluZFByb3BlcnR5QnlOYW1lKGUudmFsdWUpO2JyZWFrfX19fSxnZXROYW1lOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29Qcm9wZXJ0eS5uYW1lfSxnZXRLZXlQcm9wZXJ0eTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vUHJvcGVydHl9LGdldFRleHRQcm9wZXJ0eTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vVGV4dFByb3BlcnR5fSxnZXRMYWJlbFRleHQ6ZnVuY3Rpb24oKXtpZighdGhpcy5fc0xhYmVsVGV4dCYmdGhpcy5fb1F1ZXJ5UmVzdWx0Ll9vTW9kZWwuX29BY3RpdmF0ZWRXb3JrYXJvdW5kcy5DcmVhdGVMYWJlbHNGcm9tVGVjaG5pY2FsTmFtZXMpdGhpcy5fc0xhYmVsVGV4dD1vLmhlbHBlci50b2tlbml6ZU5hbWV0b0xhYmVsVGV4dCh0aGlzLmdldE5hbWUoKSk7cmV0dXJuIHRoaXMuX3NMYWJlbFRleHR9LGdldERpbWVuc2lvbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vUXVlcnlSZXN1bHQuZmluZERpbWVuc2lvbkJ5TmFtZSh0aGlzLl9zRGltZW5zaW9uTmFtZSl9LF9vUXVlcnlSZXN1bHQ6bnVsbCxfb1Byb3BlcnR5Om51bGwsX29UZXh0UHJvcGVydHk6bnVsbCxfc0xhYmVsVGV4dDpudWxsLF9zRGltZW5zaW9uTmFtZTpudWxsfTtvLk1lYXN1cmU9ZnVuY3Rpb24oUSxwKXt0aGlzLl9pbml0KFEscCl9O28uTWVhc3VyZS5wcm90b3R5cGU9e19pbml0OmZ1bmN0aW9uKFEscCl7dGhpcy5fb1F1ZXJ5UmVzdWx0PVE7dGhpcy5fb1Byb3BlcnR5PXA7aWYocC5leHRlbnNpb25zIT11bmRlZmluZWQpe2Zvcih2YXIgaT0tMSxlO2U9cC5leHRlbnNpb25zWysraV07KXtpZighZS5uYW1lc3BhY2U9PW8uY29uc3RhbnRzLlNBUF9OQU1FU1BBQ0UpY29udGludWU7c3dpdGNoKGUubmFtZSl7Y2FzZSJsYWJlbCI6dGhpcy5fc0xhYmVsVGV4dD1lLnZhbHVlO2JyZWFrO2Nhc2UidGV4dCI6dGhpcy5fb1RleHRQcm9wZXJ0eT1RLmdldEVudGl0eVR5cGUoKS5maW5kUHJvcGVydHlCeU5hbWUoZS52YWx1ZSk7YnJlYWs7Y2FzZSJ1bml0Ijp0aGlzLl9vVW5pdFByb3BlcnR5PVEuZ2V0RW50aXR5VHlwZSgpLmZpbmRQcm9wZXJ0eUJ5TmFtZShlLnZhbHVlKTticmVha319fWlmKCF0aGlzLl9zTGFiZWxUZXh0KXRoaXMuX3NMYWJlbFRleHQ9IiJ9LGdldE5hbWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb1Byb3BlcnR5Lm5hbWV9LGdldFJhd1ZhbHVlUHJvcGVydHk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb1Byb3BlcnR5fSxnZXRGb3JtYXR0ZWRWYWx1ZVByb3BlcnR5OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29UZXh0UHJvcGVydHl9LGdldFVuaXRQcm9wZXJ0eTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vVW5pdFByb3BlcnR5fSxnZXRMYWJlbFRleHQ6ZnVuY3Rpb24oKXtpZighdGhpcy5fc0xhYmVsVGV4dCYmdGhpcy5fb1F1ZXJ5UmVzdWx0Ll9vTW9kZWwuX29BY3RpdmF0ZWRXb3JrYXJvdW5kcy5DcmVhdGVMYWJlbHNGcm9tVGVjaG5pY2FsTmFtZXMpdGhpcy5fc0xhYmVsVGV4dD1vLmhlbHBlci50b2tlbml6ZU5hbWV0b0xhYmVsVGV4dCh0aGlzLmdldE5hbWUoKSk7cmV0dXJuIHRoaXMuX3NMYWJlbFRleHR9LGlzVXBkYXRhYmxlOmZ1bmN0aW9uKCl7aWYodGhpcy5fYklzVXBkYXRhYmxlIT1udWxsKXJldHVybiB0aGlzLl9iSXNVcGRhdGFibGU7dmFyIHU9dGhpcy5fb1F1ZXJ5UmVzdWx0LmdldEVudGl0eVNldCgpLmdldFVwZGF0YWJsZVByb3BlcnR5TmFtZVNldCgpO3JldHVybih1W3RoaXMuZ2V0TmFtZSgpXSE9dW5kZWZpbmVkKX0sX29RdWVyeVJlc3VsdDpudWxsLF9vUHJvcGVydHk6bnVsbCxfb1RleHRQcm9wZXJ0eTpudWxsLF9zTGFiZWxUZXh0Om51bGwsX29Vbml0UHJvcGVydHk6bnVsbCxfYklzVXBkYXRhYmxlOm51bGx9O28uRW50aXR5U2V0PWZ1bmN0aW9uKG0scyxjLGUsRSl7dGhpcy5faW5pdChtLHMsYyxlLEUpfTtvLkVudGl0eVNldC5wcm90b3R5cGU9e19pbml0OmZ1bmN0aW9uKG0scyxjLGUsRSl7dGhpcy5fb0VudGl0eVR5cGU9RTt0aGlzLl9vRW50aXR5U2V0PWU7dGhpcy5fb0NvbnRhaW5lcj1jO3RoaXMuX29TY2hlbWE9czt0aGlzLl9vTW9kZWw9bTtpZihzLmVudGl0eUNvbnRhaW5lci5sZW5ndGg+MSl0aGlzLl9zUU5hbWU9Yy5uYW1lKyIuIitlLm5hbWU7ZWxzZSB0aGlzLl9zUU5hbWU9ZS5uYW1lfSxnZXRRTmFtZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zUU5hbWV9LGdldFNldERlc2NyaXB0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29FbnRpdHlTZXR9LGdldEVudGl0eVR5cGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb0VudGl0eVR5cGV9LGdldFNjaGVtYTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vU2NoZW1hfSxnZXRNb2RlbDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vTW9kZWx9LGdldFVwZGF0YWJsZVByb3BlcnR5TmFtZVNldDpmdW5jdGlvbigpe2lmKHRoaXMuX29VcGRhdGFibGVQcm9wZXJ0eU5hbWVzKXJldHVybiB0aGlzLl9vVXBkYXRhYmxlUHJvcGVydHlOYW1lczt0aGlzLl9vVXBkYXRhYmxlUHJvcGVydHlOYW1lcz1uZXcgT2JqZWN0KCk7dmFyIHM9dHJ1ZTtpZih0aGlzLl9vRW50aXR5U2V0LmV4dGVuc2lvbnMhPXVuZGVmaW5lZCl7Zm9yKHZhciBqPS0xLGU7ZT10aGlzLl9vRW50aXR5U2V0LmV4dGVuc2lvbnNbKytqXTspe2lmKGUubmFtZXNwYWNlPT1vLmNvbnN0YW50cy5TQVBfTkFNRVNQQUNFJiZlLm5hbWU9PSJ1cGRhdGFibGUiKXtpZihlLnZhbHVlPT0iZmFsc2UiKXtzPWZhbHNlO2JyZWFrfX19fWlmKCFzKXtyZXR1cm4gdGhpcy5fb1VwZGF0YWJsZVByb3BlcnR5TmFtZXN9dmFyIHA9dGhpcy5fb0VudGl0eVR5cGUuZ2V0VHlwZURlc2NyaXB0aW9uKCkucHJvcGVydHk7Zm9yKHZhciBpPS0xLFA7UD1wWysraV07KXt2YXIgYj10cnVlO2lmKFAuZXh0ZW5zaW9ucz09dW5kZWZpbmVkKWNvbnRpbnVlO2Zvcih2YXIgaj0tMSxlO2U9UC5leHRlbnNpb25zWysral07KXtpZihlLm5hbWVzcGFjZSE9by5jb25zdGFudHMuU0FQX05BTUVTUEFDRSljb250aW51ZTtpZihlLm5hbWU9PSJ1cGRhdGFibGUiKXtpZihlLnZhbHVlPT0iZmFsc2UiKXtiPWZhbHNlO2JyZWFrfX19aWYoYil0aGlzLl9vVXBkYXRhYmxlUHJvcGVydHlOYW1lc1tQLm5hbWVdPXRydWV9cmV0dXJuIHRoaXMuX29VcGRhdGFibGVQcm9wZXJ0eU5hbWVzfSxfb0VudGl0eVR5cGU6bnVsbCxfb0VudGl0eVNldDpudWxsLF9vQ29udGFpbmVyOm51bGwsX29TY2hlbWE6bnVsbCxfb01vZGVsOm51bGwsX3NRTmFtZTpudWxsLF9vVXBkYXRhYmxlUHJvcGVydHlOYW1lczpudWxsfTtvLkVudGl0eVR5cGU9ZnVuY3Rpb24obSxzLGUpe3RoaXMuX2luaXQobSxzLGUpfTtvLkVudGl0eVR5cGUucHJvcGVydHlGaWx0ZXJSZXN0cmljdGlvbj17U0lOR0xFX1ZBTFVFOiJzaW5nbGUtdmFsdWUiLE1VTFRJX1ZBTFVFOiJtdWx0aS12YWx1ZSIsSU5URVJWQUw6ImludGVydmFsIn07by5FbnRpdHlUeXBlLnByb3RvdHlwZT17X2luaXQ6ZnVuY3Rpb24obSxzLGUpe3RoaXMuX29FbnRpdHlUeXBlPWU7dGhpcy5fb1NjaGVtYT1zO3RoaXMuX29Nb2RlbD1tO3RoaXMuX2FLZXlQcm9wZXJ0aWVzPVtdO3RoaXMuX29Qcm9wZXJ0eVNldD1uZXcgT2JqZWN0KCk7dGhpcy5fYUZpbHRlcmFibGVQcm9wZXJ0eU5hbWVzPVtdO3RoaXMuX2FTb3J0YWJsZVByb3BlcnR5TmFtZXM9W107dGhpcy5fYVJlcXVpcmVkRmlsdGVyUHJvcGVydHlOYW1lcz1bXTt0aGlzLl9vUHJvcGVydHlGaWx0ZXJSZXN0cmljdGlvblNldD1uZXcgT2JqZWN0KCk7dGhpcy5fb1Byb3BlcnR5SGVhZGluZ3NTZXQ9e307dGhpcy5fb1Byb3BlcnR5UXVpY2tJbmZvc1NldD17fTt0aGlzLl9zUU5hbWU9cy5uYW1lc3BhY2UrIi4iK2UubmFtZTt2YXIgcj17fTt2YXIgUj1udWxsO2Zvcih2YXIgaT0tMSxwO3A9ZS5rZXkucHJvcGVydHlSZWZbKytpXTspe3RoaXMuX2FLZXlQcm9wZXJ0aWVzLnB1c2gocC5uYW1lKX1mb3IodmFyIGk9LTEsUDtQPWUucHJvcGVydHlbKytpXTspe3RoaXMuX29Qcm9wZXJ0eVNldFtQLm5hbWVdPVA7dGhpcy5fYUZpbHRlcmFibGVQcm9wZXJ0eU5hbWVzLnB1c2goUC5uYW1lKTt0aGlzLl9hU29ydGFibGVQcm9wZXJ0eU5hbWVzLnB1c2goUC5uYW1lKTtpZihQLmV4dGVuc2lvbnM9PXVuZGVmaW5lZCljb250aW51ZTtmb3IodmFyIGo9LTEsRTtFPVAuZXh0ZW5zaW9uc1srK2pdOyl7aWYoIUUubmFtZXNwYWNlPT1vLmNvbnN0YW50cy5TQVBfTkFNRVNQQUNFKWNvbnRpbnVlO3N3aXRjaChFLm5hbWUpe2Nhc2UiZmlsdGVyYWJsZSI6aWYoRS52YWx1ZT09ImZhbHNlIil0aGlzLl9hRmlsdGVyYWJsZVByb3BlcnR5TmFtZXMucG9wKFAubmFtZSk7YnJlYWs7Y2FzZSJzb3J0YWJsZSI6aWYoRS52YWx1ZT09ImZhbHNlIil0aGlzLl9hU29ydGFibGVQcm9wZXJ0eU5hbWVzLnBvcChQLm5hbWUpO2JyZWFrO2Nhc2UicmVxdWlyZWQtaW4tZmlsdGVyIjppZihFLnZhbHVlPT0idHJ1ZSIpdGhpcy5fYVJlcXVpcmVkRmlsdGVyUHJvcGVydHlOYW1lcy5wdXNoKFAubmFtZSk7YnJlYWs7Y2FzZSJmaWx0ZXItcmVzdHJpY3Rpb24iOmlmKEUudmFsdWU9PW8uRW50aXR5VHlwZS5wcm9wZXJ0eUZpbHRlclJlc3RyaWN0aW9uLlNJTkdMRV9WQUxVRXx8RS52YWx1ZT09by5FbnRpdHlUeXBlLnByb3BlcnR5RmlsdGVyUmVzdHJpY3Rpb24uTVVMVElfVkFMVUV8fEUudmFsdWU9PW8uRW50aXR5VHlwZS5wcm9wZXJ0eUZpbHRlclJlc3RyaWN0aW9uLklOVEVSVkFMKXRoaXMuX29Qcm9wZXJ0eUZpbHRlclJlc3RyaWN0aW9uU2V0W1AubmFtZV09RS52YWx1ZTticmVhaztjYXNlImhpZXJhcmNoeS1ub2RlLWZvciI6aWYoIShSPXJbUC5uYW1lXSkpUj1yW1AubmFtZV09bmV3IE9iamVjdCgpO1IuZGltZW5zaW9uTmFtZT1FLnZhbHVlO2JyZWFrO2Nhc2UiaGllcmFyY2h5LXBhcmVudC1ub2RlLWZvciI6Y2FzZSJoaWVyYXJjaHktcGFyZW50LW5vZCI6aWYoIShSPXJbRS52YWx1ZV0pKVI9cltFLnZhbHVlXT1uZXcgT2JqZWN0KCk7Ui5wYXJlbnROb2RlSURQcm9wZXJ0eT1QO2JyZWFrO2Nhc2UiaGllcmFyY2h5LWxldmVsLWZvciI6aWYoIShSPXJbRS52YWx1ZV0pKVI9cltFLnZhbHVlXT1uZXcgT2JqZWN0KCk7Ui5sZXZlbFByb3BlcnR5PVA7YnJlYWs7Y2FzZSJoaWVyYXJjaHktZHJpbGwtc3RhdGUtZm9yIjpjYXNlImhpZXJhcmNoeS1kcmlsbC1zdGF0IjppZighKFI9cltFLnZhbHVlXSkpUj1yW0UudmFsdWVdPW5ldyBPYmplY3QoKTtSLmRyaWxsU3RhdGVQcm9wZXJ0eT1QO2JyZWFrfX19dGhpcy5fb1JlY3Vyc2l2ZUhpZXJhcmNoeVNldD1uZXcgT2JqZWN0KCk7Zm9yKHZhciBoIGluIHIpe3ZhciBIPXJbaF07dmFyIGE9dGhpcy5fb1Byb3BlcnR5U2V0W2hdO3ZhciBkPXRoaXMuX29Qcm9wZXJ0eVNldFtILmRpbWVuc2lvbk5hbWVdO2lmKGQ9PW51bGwpe2Q9YX10aGlzLl9vUmVjdXJzaXZlSGllcmFyY2h5U2V0W2QubmFtZV09bmV3IG8uUmVjdXJzaXZlSGllcmFyY2h5KGUsYSxILnBhcmVudE5vZGVJRFByb3BlcnR5LEgubGV2ZWxQcm9wZXJ0eSxkKX19LGdldFByb3BlcnRpZXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb1Byb3BlcnR5U2V0fSxmaW5kUHJvcGVydHlCeU5hbWU6ZnVuY3Rpb24ocCl7cmV0dXJuIHRoaXMuX29Qcm9wZXJ0eVNldFtwXX0sZ2V0S2V5UHJvcGVydGllczpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9hS2V5UHJvcGVydGllc30sZ2V0TGFiZWxPZlByb3BlcnR5OmZ1bmN0aW9uKHApe3ZhciBQPXRoaXMuX29Qcm9wZXJ0eVNldFtwXTtpZihQPT1udWxsKXRocm93Im5vIHN1Y2ggcHJvcGVydHkgd2l0aCBuYW1lICIrcDtpZihQLmV4dGVuc2lvbnMhPXVuZGVmaW5lZCl7Zm9yKHZhciBpPS0xLGU7ZT1QLmV4dGVuc2lvbnNbKytpXTspe2lmKCFlLm5hbWVzcGFjZT09by5jb25zdGFudHMuU0FQX05BTUVTUEFDRSljb250aW51ZTtpZihlLm5hbWU9PSJsYWJlbCIpcmV0dXJuIGUudmFsdWV9fXJldHVybiBudWxsfSxnZXRIZWFkaW5nT2ZQcm9wZXJ0eTpmdW5jdGlvbihwKXt2YXIgUD10aGlzLl9vUHJvcGVydHlTZXRbcF07aWYoUD09bnVsbCl0aHJvdyJubyBzdWNoIHByb3BlcnR5IHdpdGggbmFtZSAiK3A7aWYoUC5leHRlbnNpb25zIT11bmRlZmluZWQpe3ZhciBzPW51bGw7Zm9yKHZhciBpPS0xLGU7ZT1QLmV4dGVuc2lvbnNbKytpXTspe2lmKCFlLm5hbWVzcGFjZT09by5jb25zdGFudHMuU0FQX05BTUVTUEFDRSljb250aW51ZTtpZihlLm5hbWU9PSJoZWFkaW5nIilyZXR1cm4gZS52YWx1ZTtpZihlLm5hbWU9PSJsYWJlbCIpcz1lLnZhbHVlfX1yZXR1cm4gc30sZ2V0UXVpY2tJbmZvT2ZQcm9wZXJ0eTpmdW5jdGlvbihwKXt2YXIgUD10aGlzLl9vUHJvcGVydHlTZXRbcF07aWYoUD09bnVsbCl0aHJvdyJubyBzdWNoIHByb3BlcnR5IHdpdGggbmFtZSAiK3A7aWYoUC5leHRlbnNpb25zIT11bmRlZmluZWQpe3ZhciBzPW51bGw7Zm9yKHZhciBpPS0xLGU7ZT1QLmV4dGVuc2lvbnNbKytpXTspe2lmKCFlLm5hbWVzcGFjZT09by5jb25zdGFudHMuU0FQX05BTUVTUEFDRSljb250aW51ZTtpZihlLm5hbWU9PSJxdWlja2luZm8iKXJldHVybiBlLnZhbHVlO2lmKGUubmFtZT09ImxhYmVsIilzPWUudmFsdWV9fXJldHVybiBzfSxnZXRUZXh0UHJvcGVydHlPZlByb3BlcnR5OmZ1bmN0aW9uKHApe3ZhciBQPXRoaXMuX29Qcm9wZXJ0eVNldFtwXTtpZihQPT1udWxsKXRocm93Im5vIHN1Y2ggcHJvcGVydHkgd2l0aCBuYW1lICIrcDtpZihQLmV4dGVuc2lvbnMhPXVuZGVmaW5lZCl7Zm9yKHZhciBpPS0xLGU7ZT1QLmV4dGVuc2lvbnNbKytpXTspe2lmKGUubmFtZT09InRleHQiKXJldHVybiB0aGlzLmZpbmRQcm9wZXJ0eUJ5TmFtZShlLnZhbHVlKX19cmV0dXJuIG51bGx9LGdldFN1cGVyT3JkaW5hdGVQcm9wZXJ0eU9mUHJvcGVydHk6ZnVuY3Rpb24ocCl7dmFyIFA9dGhpcy5fb1Byb3BlcnR5U2V0W3BdO2lmKFA9PW51bGwpdGhyb3cibm8gc3VjaCBwcm9wZXJ0eSB3aXRoIG5hbWUgIitwO2lmKFAuZXh0ZW5zaW9ucyE9dW5kZWZpbmVkKXtmb3IodmFyIGk9LTEsZTtlPVAuZXh0ZW5zaW9uc1srK2ldOyl7aWYoZS5uYW1lPT0ic3VwZXItb3JkaW5hdGUiKXJldHVybiB0aGlzLmZpbmRQcm9wZXJ0eUJ5TmFtZShlLnZhbHVlKX19cmV0dXJuIG51bGx9LGdldEZpbHRlcmFibGVQcm9wZXJ0eU5hbWVzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2FGaWx0ZXJhYmxlUHJvcGVydHlOYW1lc30sZ2V0U29ydGFibGVQcm9wZXJ0eU5hbWVzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2FTb3J0YWJsZVByb3BlcnR5TmFtZXN9LGdldFJlcXVpcmVkRmlsdGVyUHJvcGVydHlOYW1lczpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9hUmVxdWlyZWRGaWx0ZXJQcm9wZXJ0eU5hbWVzfSxnZXRQcm9wZXJ0aWVzV2l0aEZpbHRlclJlc3RyaWN0aW9uczpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vUHJvcGVydHlGaWx0ZXJSZXN0cmljdGlvblNldH0sZ2V0QWxsSGllcmFyY2h5UHJvcGVydHlOYW1lczpmdW5jdGlvbigpe2lmKHRoaXMuX2FIaWVyYXJjaHlQcm9wZXJ0eU5hbWVzKXJldHVybiB0aGlzLl9hSGllcmFyY2h5UHJvcGVydHlOYW1lczt0aGlzLl9hSGllcmFyY2h5UHJvcGVydHlOYW1lcz1bXTtmb3IodmFyIG4gaW4gdGhpcy5fb1JlY3Vyc2l2ZUhpZXJhcmNoeVNldCl0aGlzLl9hSGllcmFyY2h5UHJvcGVydHlOYW1lcy5wdXNoKHRoaXMuX29SZWN1cnNpdmVIaWVyYXJjaHlTZXRbbl0uZ2V0Tm9kZVZhbHVlUHJvcGVydHkoKS5uYW1lKTtyZXR1cm4gdGhpcy5fYUhpZXJhcmNoeVByb3BlcnR5TmFtZXN9LGdldEhpZXJhcmNoeTpmdW5jdGlvbihuKXtpZih0aGlzLl9vUmVjdXJzaXZlSGllcmFyY2h5U2V0W25dPT11bmRlZmluZWQpcmV0dXJuIG51bGw7cmV0dXJuIHRoaXMuX29SZWN1cnNpdmVIaWVyYXJjaHlTZXRbbl19LGdldFFOYW1lOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NRTmFtZX0sZ2V0VHlwZURlc2NyaXB0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29FbnRpdHlUeXBlfSxnZXRTY2hlbWE6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb1NjaGVtYX0sZ2V0TW9kZWw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb01vZGVsfSxfb0VudGl0eVR5cGU6bnVsbCxfb1NjaGVtYTpudWxsLF9vTW9kZWw6bnVsbCxfc1FOYW1lOm51bGwsX2FLZXlQcm9wZXJ0aWVzOm51bGwsX29Qcm9wZXJ0eVNldDpudWxsLF9hRmlsdGVyYWJsZVByb3BlcnR5TmFtZXM6bnVsbCxfYVJlcXVpcmVkRmlsdGVyUHJvcGVydHlOYW1lczpudWxsLF9vUHJvcGVydHlGaWx0ZXJSZXN0cmljdGlvblNldDpudWxsLF9hSGllcmFyY2h5UHJvcGVydHlOYW1lczpudWxsLF9vUmVjdXJzaXZlSGllcmFyY2h5U2V0Om51bGx9O28uUmVjdXJzaXZlSGllcmFyY2h5PWZ1bmN0aW9uKGUsbixwLE4sYSl7dGhpcy5faW5pdChlLG4scCxOLGEpfTtvLlJlY3Vyc2l2ZUhpZXJhcmNoeS5wcm90b3R5cGU9e19pbml0OmZ1bmN0aW9uKGUsbixwLE4sYSl7dGhpcy5fb0VudGl0eVR5cGU9ZTt0aGlzLl9vTm9kZUlEUHJvcGVydHk9bjt0aGlzLl9vUGFyZW50Tm9kZUlEUHJvcGVydHk9cDt0aGlzLl9vTm9kZUxldmVsUHJvcGVydHk9Tjt0aGlzLl9vTm9kZVZhbHVlUHJvcGVydHk9YX0saXNSZWN1cnNpdmVIaWVyYXJjaHk6ZnVuY3Rpb24oKXtyZXR1cm4gdHJ1ZX0saXNMZXZlbGVkSGllcmFyY2h5OmZ1bmN0aW9uKCl7cmV0dXJuIGZhbHNlfSxnZXROb2RlSURQcm9wZXJ0eTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vTm9kZUlEUHJvcGVydHl9LGdldFBhcmVudE5vZGVJRFByb3BlcnR5OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29QYXJlbnROb2RlSURQcm9wZXJ0eX0sZ2V0Tm9kZUxldmVsUHJvcGVydHk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb05vZGVMZXZlbFByb3BlcnR5fSxnZXROb2RlVmFsdWVQcm9wZXJ0eTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vTm9kZVZhbHVlUHJvcGVydHl9LF9vTm9kZUlEUHJvcGVydHk6bnVsbCxfb1BhcmVudE5vZGVJRFByb3BlcnR5Om51bGwsX29Ob2RlTGV2ZWxQcm9wZXJ0eTpudWxsLF9vTm9kZVZhbHVlUHJvcGVydHk6bnVsbH07by5GaWx0ZXJFeHByZXNzaW9uPWZ1bmN0aW9uKG0scyxlKXt0aGlzLl9pbml0KG0scyxlKX07by5GaWx0ZXJFeHByZXNzaW9uLnByb3RvdHlwZT17X2luaXQ6ZnVuY3Rpb24obSxzLGUpe3RoaXMuX29FbnRpdHlUeXBlPWU7dGhpcy5fb1NjaGVtYT1zO3RoaXMuX29Nb2RlbD1tO3RoaXMuX2FDb25kaXRpb25VSTVGaWx0ZXI9bmV3IEFycmF5KCk7dGhpcy5fYVVJNUZpbHRlckFycmF5PW5ldyBBcnJheSgpfSxfcmVuZGVyUHJvcGVydHlGaWx0ZXJWYWx1ZTpmdW5jdGlvbihmLHApe3JldHVybiBxLnNhcC5lbmNvZGVVUkwodGhpcy5fb01vZGVsLmdldE9EYXRhTW9kZWwoKS5mb3JtYXRWYWx1ZShmLHApKX0sY2xlYXI6ZnVuY3Rpb24oKXt0aGlzLl9hQ29uZGl0aW9uVUk1RmlsdGVyPW5ldyBBcnJheSgpO3RoaXMuX2FVSTVGaWx0ZXJBcnJheT1uZXcgQXJyYXkoKX0sX2FkZENvbmRpdGlvbjpmdW5jdGlvbihwLE8sdixWKXtmb3IodmFyIGk9LTEsdTt1PXRoaXMuX2FDb25kaXRpb25VSTVGaWx0ZXJbKytpXTspe2lmKHUuc1BhdGg9PXAmJnUuc09wZXJhdG9yPT1PJiZ1Lm9WYWx1ZTE9PXYmJnUub1ZhbHVlMj09VilyZXR1cm59dGhpcy5fYUNvbmRpdGlvblVJNUZpbHRlci5wdXNoKG5ldyBzYXAudWkubW9kZWwuRmlsdGVyKHAsTyx2LFYpKX0sX2FkZFVJNUZpbHRlckFycmF5OmZ1bmN0aW9uKHUpe3RoaXMuX2FVSTVGaWx0ZXJBcnJheS5wdXNoKHUpfSxhZGRDb25kaXRpb246ZnVuY3Rpb24ocCxPLHYsVil7dmFyIFA9dGhpcy5fb0VudGl0eVR5cGUuZmluZFByb3BlcnR5QnlOYW1lKHApO2lmKFA9PW51bGwpe3Rocm93IkNhbm5vdCBhZGQgZmlsdGVyIGNvbmRpdGlvbiBmb3IgdW5rbm93biBwcm9wZXJ0eSBuYW1lICIrcH12YXIgZj10aGlzLl9vRW50aXR5VHlwZS5nZXRGaWx0ZXJhYmxlUHJvcGVydHlOYW1lcygpO2lmKGYuaW5kZXhPZihwKT09PS0xKXt0aHJvdyJDYW5ub3QgYWRkIGZpbHRlciBjb25kaXRpb24gZm9yIG5vdCBmaWx0ZXJhYmxlIHByb3BlcnR5IG5hbWUgIitwfXRoaXMuX2FkZENvbmRpdGlvbihwLE8sdixWKTtyZXR1cm4gdGhpc30sYWRkU2V0Q29uZGl0aW9uOmZ1bmN0aW9uKHAsdil7dmFyIFA9dGhpcy5fb0VudGl0eVR5cGUuZmluZFByb3BlcnR5QnlOYW1lKHApO2lmKFA9PW51bGwpe3Rocm93IkNhbm5vdCBhZGQgZmlsdGVyIGNvbmRpdGlvbiBmb3IgdW5rbm93biBwcm9wZXJ0eSBuYW1lICIrcH12YXIgZj10aGlzLl9vRW50aXR5VHlwZS5nZXRGaWx0ZXJhYmxlUHJvcGVydHlOYW1lcygpO2lmKGYuaW5kZXhPZihwKT09PS0xKXt0aHJvdyJDYW5ub3QgYWRkIGZpbHRlciBjb25kaXRpb24gZm9yIG5vdCBmaWx0ZXJhYmxlIHByb3BlcnR5IG5hbWUgIitwfWZvcih2YXIgaT0tMSxWO1Y9dlsrK2ldOyl0aGlzLl9hZGRDb25kaXRpb24ocCxzYXAudWkubW9kZWwuRmlsdGVyT3BlcmF0b3IuRVEsVik7cmV0dXJuIHRoaXN9LGFkZFVJNUZpbHRlckNvbmRpdGlvbnM6ZnVuY3Rpb24odSl7aWYoIUFycmF5LmlzQXJyYXkodSkpdGhyb3ciQXJndW1lbnQgaXMgbm90IGFuIGFycmF5IjtpZih1Lmxlbmd0aD09MClyZXR1cm4gdGhpczt2YXIgaD1mYWxzZTtmb3IodmFyIGk9MDtpPHUubGVuZ3RoO2krKyl7aWYodVtpXS5hRmlsdGVycyE9dW5kZWZpbmVkKXtoPXRydWU7YnJlYWt9fWlmKGgpdGhpcy5fYWRkVUk1RmlsdGVyQXJyYXkodSk7ZWxzZXtmb3IodmFyIGk9MDtpPHUubGVuZ3RoO2krKyl7dGhpcy5hZGRDb25kaXRpb24odVtpXS5zUGF0aCx1W2ldLnNPcGVyYXRvcix1W2ldLm9WYWx1ZTEsdVtpXS5vVmFsdWUyKX19cmV0dXJuIHRoaXN9LGdldEV4cHJlc3Npb25Bc1VJNUZpbHRlckFycmF5OmZ1bmN0aW9uKCl7dmFyIGY9dGhpcy5fYUNvbmRpdGlvblVJNUZpbHRlci5jb25jYXQoW10pO2Zvcih2YXIgaT0tMSxGO0Y9dGhpcy5fYVVJNUZpbHRlckFycmF5WysraV07KXtmb3IodmFyIGo9LTEsYTthPUZbKytqXTspe2YucHVzaChhKX19cmV0dXJuIGZ9LGdldFByb3BlcnRpZXNSZWZlcmVuY2VkQnlVSTVGaWx0ZXJBcnJheTpmdW5jdGlvbih1LHIpe2Zvcih2YXIgaT0tMSxVO1U9dVsrK2ldOyl7aWYoVS5hRmlsdGVycyE9dW5kZWZpbmVkKXRoaXMuZ2V0UHJvcGVydGllc1JlZmVyZW5jZWRCeVVJNUZpbHRlckFycmF5KFUuYUZpbHRlcnMscik7ZWxzZXtpZihyW1Uuc1BhdGhdPT11bmRlZmluZWQpcltVLnNQYXRoXT1bXTtyW1Uuc1BhdGhdLnB1c2goVSl9fX0sZ2V0UmVmZXJlbmNlZFByb3BlcnRpZXM6ZnVuY3Rpb24oKXt2YXIgcj1uZXcgT2JqZWN0KCk7Zm9yKHZhciBpPS0xLHU7dT10aGlzLl9hQ29uZGl0aW9uVUk1RmlsdGVyWysraV07KXtpZihyW3Uuc1BhdGhdPT11bmRlZmluZWQpclt1LnNQYXRoXT1bXTtyW3Uuc1BhdGhdLnB1c2godSl9Zm9yKHZhciBpPS0xLFU7VT10aGlzLl9hVUk1RmlsdGVyQXJyYXlbKytpXTspe3RoaXMuZ2V0UHJvcGVydGllc1JlZmVyZW5jZWRCeVVJNUZpbHRlckFycmF5KFUscil9cmV0dXJuIHJ9LHJlbmRlclVJNUZpbHRlcjpmdW5jdGlvbih1KXt2YXIgcD10aGlzLl9vRW50aXR5VHlwZS5maW5kUHJvcGVydHlCeU5hbWUodS5zUGF0aCk7aWYocD09bnVsbCl7dGhyb3ciQ2Fubm90IGFkZCBmaWx0ZXIgY29uZGl0aW9uIGZvciB1bmtub3duIHByb3BlcnR5IG5hbWUgIit1LnNQYXRofXZhciBmPW51bGw7c3dpdGNoKHUuc09wZXJhdG9yKXtjYXNlIHNhcC51aS5tb2RlbC5GaWx0ZXJPcGVyYXRvci5CVDpmPSIoIit1LnNQYXRoKyIgIitzYXAudWkubW9kZWwuRmlsdGVyT3BlcmF0b3IuR0UudG9Mb3dlckNhc2UoKSsiICIrdGhpcy5fcmVuZGVyUHJvcGVydHlGaWx0ZXJWYWx1ZSh1Lm9WYWx1ZTEscC50eXBlKSsiIGFuZCAiK3Uuc1BhdGgrIiAiK3NhcC51aS5tb2RlbC5GaWx0ZXJPcGVyYXRvci5MRS50b0xvd2VyQ2FzZSgpKyIgIit0aGlzLl9yZW5kZXJQcm9wZXJ0eUZpbHRlclZhbHVlKHUub1ZhbHVlMixwLnR5cGUpKyIpIjticmVhaztjYXNlIHNhcC51aS5tb2RlbC5GaWx0ZXJPcGVyYXRvci5Db250YWluczpmPSJzdWJzdHJpbmdvZigiK3RoaXMuX3JlbmRlclByb3BlcnR5RmlsdGVyVmFsdWUodS5vVmFsdWUxLCJFZG0uU3RyaW5nIikrIiwiK3Uuc1BhdGgrIikiO2JyZWFrO2Nhc2Ugc2FwLnVpLm1vZGVsLkZpbHRlck9wZXJhdG9yLlN0YXJ0c1dpdGg6Y2FzZSBzYXAudWkubW9kZWwuRmlsdGVyT3BlcmF0b3IuRW5kc1dpdGg6Zj11LnNPcGVyYXRvci50b0xvd2VyQ2FzZSgpKyIoIit1LnNQYXRoKyIsIit0aGlzLl9yZW5kZXJQcm9wZXJ0eUZpbHRlclZhbHVlKHUub1ZhbHVlMSwiRWRtLlN0cmluZyIpKyIpIjticmVhaztkZWZhdWx0OmY9dS5zUGF0aCsiICIrdS5zT3BlcmF0b3IudG9Mb3dlckNhc2UoKSsiICIrdGhpcy5fcmVuZGVyUHJvcGVydHlGaWx0ZXJWYWx1ZSh1Lm9WYWx1ZTEscC50eXBlKX1yZXR1cm4gZn0scmVuZGVyVUk1TXVsdGlGaWx0ZXI6ZnVuY3Rpb24odSl7dmFyIFU9bmV3IEFycmF5KCk7dmFyIE89IiI7dmFyIGw9dS5iQW5kPT10cnVlPyIgYW5kICI6IiBvciAiO2Zvcih2YXIgaT0tMSxhO2E9dS5hRmlsdGVyc1srK2ldOyl7aWYoYS5hRmlsdGVycyE9dW5kZWZpbmVkKXtVLnB1c2goYSk7Y29udGludWV9Tys9KE89PSIiPyIiOmwpKyIoIit0aGlzLnJlbmRlclVJNUZpbHRlcihhKSsiKSJ9aWYoVS5sZW5ndGg+MCl7Zm9yKHZhciBpPS0xLG07bT1VWysraV07KXtPKz0oTz09IiI/IiI6bCkrIigiK3RoaXMucmVuZGVyVUk1TXVsdGlGaWx0ZXIobSkrIikifX1yZXR1cm4gT30scmVuZGVyVUk1RmlsdGVyQXJyYXk6ZnVuY3Rpb24odSl7aWYodS5sZW5ndGg9PTApcmV0dXJuIiI7dmFyIE89IiI7dS5zb3J0KGZ1bmN0aW9uKGEsYil7aWYoYS5zUGF0aD09Yi5zUGF0aClyZXR1cm4gMDtpZihhLnNQYXRoPmIuc1BhdGgpcmV0dXJuIDE7ZWxzZSByZXR1cm4tMX0pO3ZhciBwPXVbMF0uc1BhdGg7dmFyIHM9IiI7dmFyIG49bmV3IEFycmF5KCksVT1uZXcgQXJyYXkoKTtmb3IodmFyIGk9LTEsYztjPXVbKytpXTspe2lmKGMuYUZpbHRlcnMhPXVuZGVmaW5lZCl7VS5wdXNoKGMpO2NvbnRpbnVlfWlmKHAhPWMuc1BhdGgpe2lmKHMhPSIiKU8rPShPPT0iIj8iIjoiIGFuZCAiKSsiKCIrcysiKSI7cz0iIjtpZihuLmxlbmd0aD4wKXtmb3IodmFyIGo9LTEsTjtOPW5bKytqXTspe3MrPShzPT0iIj8iIjoiIGFuZCAiKSt0aGlzLnJlbmRlclVJNUZpbHRlcihOKX1PKz0oTz09IiI/IiI6IiBhbmQgIikrIigiK3MrIikiO3M9IiJ9cD1jLnNQYXRoO249bmV3IEFycmF5KCl9aWYoYy5zT3BlcmF0b3I9PXNhcC51aS5tb2RlbC5GaWx0ZXJPcGVyYXRvci5ORSl7bi5wdXNoKGMpO2NvbnRpbnVlfXMrPShzPT0iIj8iIjoiIG9yICIpK3RoaXMucmVuZGVyVUk1RmlsdGVyKGMpfWlmKHMhPSIiKU8rPShPPT0iIj8iIjoiIGFuZCAiKSsiKCIrcysiKSI7aWYobi5sZW5ndGg+MCl7cz0iIjtmb3IodmFyIGo9LTEsTjtOPW5bKytqXTspe3MrPShzPT0iIj8iIjoiIGFuZCAiKSt0aGlzLnJlbmRlclVJNUZpbHRlcihOKX1PKz0oTz09IiI/IiI6IiBhbmQgIikrIigiK3MrIikifWlmKFUubGVuZ3RoPjApe2Zvcih2YXIgaj0tMSxtO209VVsrK2pdOyl7Tys9KE89PSIiPyIiOiIgYW5kICIpKyIoIit0aGlzLnJlbmRlclVJNU11bHRpRmlsdGVyKG0pKyIpIn19cmV0dXJuIE99LGdldFVSSUZpbHRlck9wdGlvblZhbHVlOmZ1bmN0aW9uKCl7dmFyIE89dGhpcy5yZW5kZXJVSTVGaWx0ZXJBcnJheSh0aGlzLl9hQ29uZGl0aW9uVUk1RmlsdGVyKTtmb3IodmFyIGk9LTEsdTt1PXRoaXMuX2FVSTVGaWx0ZXJBcnJheVsrK2ldOyl7Tys9KE89PSIiPyIiOiIgYW5kICIpKyIoIit0aGlzLnJlbmRlclVJNUZpbHRlckFycmF5KHUpKyIpIn1yZXR1cm4gT30saXNWYWxpZDpmdW5jdGlvbigpe3ZhciByPXRoaXMuX29FbnRpdHlUeXBlLmdldFJlcXVpcmVkRmlsdGVyUHJvcGVydHlOYW1lcygpO3ZhciBwPXRoaXMuZ2V0UmVmZXJlbmNlZFByb3BlcnRpZXMoKTtmb3IodmFyIGk9LTEsUDtQPXJbKytpXTspe2lmKHBbUF09PXVuZGVmaW5lZCl0aHJvdyJmaWx0ZXIgZXhwcmVzc2lvbiBkb2VzIG5vdCBjb250YWluIHJlcXVpcmVkIHByb3BlcnR5ICIrUH12YXIgYT10aGlzLl9vRW50aXR5VHlwZS5nZXRQcm9wZXJ0aWVzV2l0aEZpbHRlclJlc3RyaWN0aW9ucygpO2Zvcih2YXIgUCBpbiBhKXt2YXIgZj1hW1BdO3ZhciBjPTA7aWYoZj09by5FbnRpdHlUeXBlLnByb3BlcnR5RmlsdGVyUmVzdHJpY3Rpb24uU0lOR0xFX1ZBTFVFKXtpZihwW1BdIT11bmRlZmluZWQpe2lmKHBbUF0ubGVuZ3RoPjF8fHBbUF1bMF0uc09wZXJhdG9yIT1zYXAudWkubW9kZWwuRmlsdGVyT3BlcmF0b3IuRVEpdGhyb3ciZmlsdGVyIGV4cHJlc3Npb24gbWF5IHVzZSAiK1ArIiBvbmx5IHdpdGggYSBzaW5nbGUgRVEgY29uZGl0aW9uIn19fXJldHVybiB0cnVlfSxnZXRFbnRpdHlUeXBlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29FbnRpdHlUeXBlfSxnZXRTY2hlbWE6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb1NjaGVtYX0sZ2V0TW9kZWw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb01vZGVsfSxfb0VudGl0eVR5cGU6bnVsbCxfb1NjaGVtYTpudWxsLF9vTW9kZWw6bnVsbCxfYUZpbHRlckNvbmRpdGlvbjpudWxsfTtvLlNvcnRPcmRlcj17QXNjZW5kaW5nOiJhc2MiLERlc2NlbmRpbmc6ImRlc2MifTtvLlNvcnRFeHByZXNzaW9uPWZ1bmN0aW9uKG0scyxlKXt0aGlzLl9pbml0KG0scyxlKX07by5Tb3J0RXhwcmVzc2lvbi5wcm90b3R5cGU9e19pbml0OmZ1bmN0aW9uKG0scyxlKXt0aGlzLl9vRW50aXR5VHlwZT1lO3RoaXMuX29TY2hlbWE9czt0aGlzLl9vTW9kZWw9bTt0aGlzLl9hU29ydENvbmRpdGlvbj1bXX0sX2NvbnRhaW5zU29ydGVyOmZ1bmN0aW9uKHApe3ZhciByPW51bGw7Zm9yKHZhciBpPS0xLGM7Yz10aGlzLl9hU29ydENvbmRpdGlvblsrK2ldOyl7aWYoYy5wcm9wZXJ0eS5uYW1lPT09cCl7cj17c29ydGVyOmMsaW5kZXg6aX07YnJlYWt9fXJldHVybiByfSxfcmVtb3ZlRnJvbUFycmF5OmZ1bmN0aW9uKGEsZix0KXt2YXIgcj1hLnNsaWNlKCh0fHxmKSsxfHxhLmxlbmd0aCk7YS5sZW5ndGg9ZjwwP2EubGVuZ3RoK2Y6ZjtyZXR1cm4gYS5wdXNoLmFwcGx5KGEscil9LGNsZWFyOmZ1bmN0aW9uKCl7dGhpcy5fYVNvcnRDb25kaXRpb249W119LGFkZFNvcnRlcjpmdW5jdGlvbihwLHMpe3ZhciBQPXRoaXMuX29FbnRpdHlUeXBlLmZpbmRQcm9wZXJ0eUJ5TmFtZShwKTtpZihQPT1udWxsKXt0aHJvdyJDYW5ub3QgYWRkIHNvcnQgY29uZGl0aW9uIGZvciB1bmtub3duIHByb3BlcnR5IG5hbWUgIitwfXZhciBlPXRoaXMuX2NvbnRhaW5zU29ydGVyKHApO2lmKGUhPW51bGwpe2Uuc29ydGVyLm9yZGVyPXM7cmV0dXJuIHRoaXN9dmFyIFM9dGhpcy5fb0VudGl0eVR5cGUuZ2V0U29ydGFibGVQcm9wZXJ0eU5hbWVzKCk7aWYoUy5pbmRleE9mKHApPT09LTEpe3Rocm93IkNhbm5vdCBhZGQgc29ydCBjb25kaXRpb24gZm9yIG5vdCBzb3J0YWJsZSBwcm9wZXJ0eSBuYW1lICIrcH10aGlzLl9hU29ydENvbmRpdGlvbi5wdXNoKHtwcm9wZXJ0eTpQLG9yZGVyOnN9KTtyZXR1cm4gdGhpc30scmVtb3ZlU29ydGVyOmZ1bmN0aW9uKHApe2lmKCFwKXJldHVybjt2YXIgcz10aGlzLl9jb250YWluc1NvcnRlcihwKTtpZihzKXt0aGlzLl9yZW1vdmVGcm9tQXJyYXkodGhpcy5fYVNvcnRDb25kaXRpb24scy5pbmRleCl9fSxnZXRFeHByZXNzaW9uc0FzVUk1U29ydGVyQXJyYXk6ZnVuY3Rpb24oKXt2YXIgcz1bXTtmb3IodmFyIGk9LTEsYztjPXRoaXMuX2FTb3J0Q29uZGl0aW9uWysraV07KXtzLnB1c2gobmV3IHNhcC51aS5tb2RlbC5Tb3J0ZXIoYy5wcm9wZXJ0eS5uYW1lLGMub3JkZXI9PW8uU29ydE9yZGVyLkRlc2NlbmRpbmcpKX1yZXR1cm4gc30sZ2V0RXhwcmVzc2lvbkFzVUk1U29ydGVyOmZ1bmN0aW9uKCl7dmFyIHM9dGhpcy5nZXRFeHByZXNzaW9uc0FzVUk1U29ydGVyQXJyYXkoKTtpZihzLmxlbmd0aD09MCl7cmV0dXJuIG51bGx9ZWxzZXtyZXR1cm4gc1swXX19LGdldFVSSU9yZGVyQnlPcHRpb25WYWx1ZTpmdW5jdGlvbihzKXtpZih0aGlzLl9hU29ydENvbmRpdGlvbi5sZW5ndGg9PTApcmV0dXJuIiI7dmFyIE89IiI7Zm9yKHZhciBpPS0xLGM7Yz10aGlzLl9hU29ydENvbmRpdGlvblsrK2ldOyl7aWYoIXNbYy5wcm9wZXJ0eS5uYW1lXSljb250aW51ZTtPKz0oTz09IiI/IiI6IiwiKStjLnByb3BlcnR5Lm5hbWUrIiAiK2Mub3JkZXJ9cmV0dXJuIE99LGdldEVudGl0eVR5cGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb0VudGl0eVR5cGV9LGdldFNjaGVtYTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vU2NoZW1hfSxnZXRNb2RlbDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vTW9kZWx9LF9vRW50aXR5VHlwZTpudWxsLF9vU2NoZW1hOm51bGwsX29Nb2RlbDpudWxsLF9hU29ydENvbmRpdGlvbjpudWxsfTtvLlBhcmFtZXRlcml6YXRpb25SZXF1ZXN0PWZ1bmN0aW9uKHApe3RoaXMuX2luaXQocCl9O28uUGFyYW1ldGVyaXphdGlvblJlcXVlc3QucHJvdG90eXBlPXtfaW5pdDpmdW5jdGlvbihwKXtpZighcCl0aHJvdyJObyBwYXJhbWV0ZXJpemF0aW9uIGdpdmVuIjt0aGlzLl9vUGFyYW1ldGVyaXphdGlvbj1wO3RoaXMuX29QYXJhbWV0ZXJWYWx1ZUFzc2lnbm1lbnQ9bmV3IEFycmF5KCl9LF9yZW5kZXJQYXJhbWV0ZXJLZXlWYWx1ZTpmdW5jdGlvbihrLHApe3JldHVybiBxLnNhcC5lbmNvZGVVUkwodGhpcy5fb1BhcmFtZXRlcml6YXRpb24uZ2V0VGFyZ2V0UXVlcnlSZXN1bHQoKS5nZXRNb2RlbCgpLmdldE9EYXRhTW9kZWwoKS5mb3JtYXRWYWx1ZShrLHApKX0sZ2V0UGFyYW1ldGVyaXphdGlvbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vUGFyYW1ldGVyaXphdGlvbn0sc2V0UGFyYW1ldGVyVmFsdWU6ZnVuY3Rpb24ocCx2LHQpe3ZhciBQPXRoaXMuX29QYXJhbWV0ZXJpemF0aW9uLmZpbmRQYXJhbWV0ZXJCeU5hbWUocCk7aWYoIVApdGhyb3ciSW52YWxpZCBwYXJhbWV0ZXIgbmFtZSAiK3A7aWYodCE9bnVsbCl7aWYoIVAuaXNJbnRlcnZhbEJvdW5kYXJ5KCkpdGhyb3ciUmFuZ2UgdmFsdWUgY2Fubm90IGJlIGFwcGxpZWQgdG8gcGFyYW1ldGVyICIrcCsiIGFjY2VwdGluZyBvbmx5IHNpbmdsZSB2YWx1ZXMiO2lmKCFQLmlzTG93ZXJJbnRlcnZhbEJvdW5kYXJ5KCkpdGhyb3ciUmFuZ2UgdmFsdWUgZ2l2ZW4sIGJ1dCBwYXJhbWV0ZXIgIitwKyIgZG9lcyBub3QgaG9sZCB0aGUgbG93ZXIgYm91bmRhcnkifWlmKCFQLmlzSW50ZXJ2YWxCb3VuZGFyeSgpKXtpZih2PT1udWxsKWRlbGV0ZSB0aGlzLl9vUGFyYW1ldGVyVmFsdWVBc3NpZ25tZW50W3BdO2Vsc2UgdGhpcy5fb1BhcmFtZXRlclZhbHVlQXNzaWdubWVudFtwXT12fWVsc2V7aWYodj09bnVsbCYmdCE9bnVsbCl0aHJvdyJQYXJhbWV0ZXIgIitwKyI6IEFuIHVwcGVyIGJvdW5kYXJ5IGNhbm5vdCBiZSBnaXZlbiB3aXRob3V0IHRoZSBsb3dlciBib3VuZGFyeSI7aWYodj09bnVsbCl7ZGVsZXRlIHRoaXMuX29QYXJhbWV0ZXJWYWx1ZUFzc2lnbm1lbnRbcF07dD1udWxsfWVsc2UgdGhpcy5fb1BhcmFtZXRlclZhbHVlQXNzaWdubWVudFtwXT12O3ZhciB1PVAuZ2V0UGVlckludGVydmFsQm91bmRhcnlQYXJhbWV0ZXIoKTtpZih0PT1udWxsKXQ9djtpZih2PT1udWxsKWRlbGV0ZSB0aGlzLl9vUGFyYW1ldGVyVmFsdWVBc3NpZ25tZW50W3UuZ2V0TmFtZSgpXTtlbHNlIHRoaXMuX29QYXJhbWV0ZXJWYWx1ZUFzc2lnbm1lbnRbdS5nZXROYW1lKCldPXR9cmV0dXJufSxnZXRVUklUb1BhcmFtZXRlcml6YXRpb25FbnRpdHlTZXQ6ZnVuY3Rpb24ocyl7cmV0dXJuKHM/czoiIikrIi8iK3RoaXMuX29QYXJhbWV0ZXJpemF0aW9uLmdldEVudGl0eVNldCgpLmdldFFOYW1lKCl9LGdldFVSSVRvUGFyYW1ldGVyaXphdGlvbkVudHJ5OmZ1bmN0aW9uKHMpe3ZhciBkPXRoaXMuX29QYXJhbWV0ZXJpemF0aW9uLmdldEFsbFBhcmFtZXRlcnMoKTtmb3IodmFyIEQgaW4gZCl7aWYodGhpcy5fb1BhcmFtZXRlclZhbHVlQXNzaWdubWVudFtEXT09dW5kZWZpbmVkKXRocm93IlBhcmFtZXRlciAiK0QrIiBoYXMgbm8gdmFsdWUgYXNzaWduZWQifXZhciBrPSIiLGY9dHJ1ZTtmb3IodmFyIHAgaW4gdGhpcy5fb1BhcmFtZXRlclZhbHVlQXNzaWdubWVudCl7ays9KGY/IiI6IiwiKStwKyI9Iit0aGlzLl9yZW5kZXJQYXJhbWV0ZXJLZXlWYWx1ZSh0aGlzLl9vUGFyYW1ldGVyVmFsdWVBc3NpZ25tZW50W3BdLGRbcF0uZ2V0UHJvcGVydHkoKS50eXBlKTtmPWZhbHNlfXJldHVybihzP3M6IiIpKyIvIit0aGlzLl9vUGFyYW1ldGVyaXphdGlvbi5nZXRFbnRpdHlTZXQoKS5nZXRRTmFtZSgpKyIoIitrKyIpIn0sX29QYXJhbWV0ZXJpemF0aW9uOm51bGwsX29QYXJhbWV0ZXJWYWx1ZUFzc2lnbm1lbnQ6bnVsbH07by5RdWVyeVJlc3VsdFJlcXVlc3Q9ZnVuY3Rpb24oUSxwKXt0aGlzLl9pbml0KFEpfTtvLlF1ZXJ5UmVzdWx0UmVxdWVzdC5wcm90b3R5cGU9e19pbml0OmZ1bmN0aW9uKFEscCl7dGhpcy5fb1F1ZXJ5UmVzdWx0PVE7dGhpcy5fb1BhcmFtZXRlcml6YXRpb25SZXF1ZXN0PXA7dGhpcy5fb0FnZ3JlZ2F0aW9uTGV2ZWw9bmV3IE9iamVjdCgpO3RoaXMuX29NZWFzdXJlcz1uZXcgT2JqZWN0KCk7dGhpcy5fYkluY2x1ZGVFbnRpdHlLZXk9ZmFsc2U7dGhpcy5fb0ZpbHRlckV4cHJlc3Npb249bnVsbDt0aGlzLl9vU29ydEV4cHJlc3Npb249bnVsbDt0aGlzLl9vU2VsZWN0ZWRQcm9wZXJ0eU5hbWVzPW51bGx9LHNldFBhcmFtZXRlcml6YXRpb25SZXF1ZXN0OmZ1bmN0aW9uKHApe3RoaXMuX29QYXJhbWV0ZXJpemF0aW9uUmVxdWVzdD1wfSxzZXRSZXNvdXJjZVBhdGg6ZnVuY3Rpb24ocil7dGhpcy5fc1Jlc291cmNlUGF0aD1yO2lmKHRoaXMuX3NSZXNvdXJjZVBhdGguaW5kZXhPZigiLyIpIT0wKXRocm93Ik1pc3NpbmcgbGVhZGluZyAvIChzbGFzaCkgZm9yIHJlc291cmNlIHBhdGgiO2lmKHRoaXMuX29RdWVyeVJlc3VsdC5nZXRQYXJhbWV0ZXJpemF0aW9uKCkpe3ZhciBsPXIubGFzdEluZGV4T2YoIi8iKTtpZihsPT0tMSl0aHJvdyJNaXNzaW5nIG5hdmlnYXRpb24gZnJvbSBwYXJhbWV0ZXIgZW50aXR5IHNldCB0byBxdWVyeSByZXN1bHQgaW4gcmVzb3VyY2UgcGF0aCI7dmFyIG49ci5zdWJzdHJpbmcobCsxKTtpZihuIT10aGlzLl9vUXVlcnlSZXN1bHQuZ2V0UGFyYW1ldGVyaXphdGlvbigpLmdldE5hdmlnYXRpb25Qcm9wZXJ0eVRvUXVlcnlSZXN1bHQoKSl0aHJvdyJJbnZhbGlkIG5hdmlnYXRpb24gcHJvcGVydHkgZnJvbSBwYXJhbWV0ZXIgZW50aXR5IHNldCB0byBxdWVyeSByZXN1bHQgaW4gcmVzb3VyY2UgcGF0aCJ9fSxnZXRQYXJhbWV0ZXJpemF0aW9uUmVxdWVzdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vUGFyYW1ldGVyaXphdGlvblJlcXVlc3R9LGdldFF1ZXJ5UmVzdWx0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29RdWVyeVJlc3VsdH0sc2V0QWdncmVnYXRpb25MZXZlbDpmdW5jdGlvbihkKXt0aGlzLl9vQWdncmVnYXRpb25MZXZlbD1uZXcgT2JqZWN0KCk7aWYoIWQpe2Q9dGhpcy5fb1F1ZXJ5UmVzdWx0LmdldEFsbERpbWVuc2lvbk5hbWVzKCl9dGhpcy5hZGRUb0FnZ3JlZ2F0aW9uTGV2ZWwoZCk7dGhpcy5fb1NlbGVjdGVkUHJvcGVydHlOYW1lcz1udWxsfSxhZGRUb0FnZ3JlZ2F0aW9uTGV2ZWw6ZnVuY3Rpb24oZCl7aWYoIWQpcmV0dXJuO3RoaXMuX29TZWxlY3RlZFByb3BlcnR5TmFtZXM9bnVsbDtmb3IodmFyIGk9LTEsRDtEPWRbKytpXTspe2lmKCF0aGlzLl9vUXVlcnlSZXN1bHQuZmluZERpbWVuc2lvbkJ5TmFtZShEKSl0aHJvdyBEKyIgaXMgbm90IGEgdmFsaWQgZGltZW5zaW9uIG5hbWUiO3RoaXMuX29BZ2dyZWdhdGlvbkxldmVsW0RdPXtrZXk6dHJ1ZSx0ZXh0OmZhbHNlLGF0dHJpYnV0ZXM6bnVsbH19fSxyZW1vdmVGcm9tQWdncmVnYXRpb25MZXZlbDpmdW5jdGlvbihkKXtpZighZCl7cmV0dXJufXRoaXMuX29TZWxlY3RlZFByb3BlcnR5TmFtZXM9bnVsbDtmb3IodmFyIGk9LTEsRDtEPWRbKytpXTspe2lmKCF0aGlzLl9vUXVlcnlSZXN1bHQuZmluZERpbWVuc2lvbkJ5TmFtZShEKSl7dGhyb3cgRCsiIGlzIG5vdCBhIHZhbGlkIGRpbWVuc2lvbiBuYW1lIn1pZih0aGlzLl9vQWdncmVnYXRpb25MZXZlbFtEXSE9dW5kZWZpbmVkKXtkZWxldGUgdGhpcy5fb0FnZ3JlZ2F0aW9uTGV2ZWxbRF07dGhpcy5nZXRTb3J0RXhwcmVzc2lvbigpLnJlbW92ZVNvcnRlcihEKX19fSxnZXRBZ2dyZWdhdGlvbkxldmVsOmZ1bmN0aW9uKCl7dmFyIGQ9bmV3IEFycmF5KCk7Zm9yKHZhciBEIGluIHRoaXMuX29BZ2dyZWdhdGlvbkxldmVsKXtkLnB1c2goRCl9cmV0dXJuIGR9LGdldEFnZ3JlZ2F0aW9uTGV2ZWxEZXRhaWxzOmZ1bmN0aW9uKGQpe2lmKHRoaXMuX29BZ2dyZWdhdGlvbkxldmVsW2RdPT11bmRlZmluZWQpdGhyb3ciQWdncmVnYXRpb24gbGV2ZWwgZG9lcyBub3QgaW5jbHVkZSBkaW1lbnNpb24gIitkO3JldHVybiB0aGlzLl9vQWdncmVnYXRpb25MZXZlbFtkXX0sc2V0TWVhc3VyZXM6ZnVuY3Rpb24obSl7aWYoIW0pe209dGhpcy5fb1F1ZXJ5UmVzdWx0LmdldEFsbE1lYXN1cmVOYW1lcygpfXRoaXMuX29TZWxlY3RlZFByb3BlcnR5TmFtZXM9bnVsbDt0aGlzLl9vTWVhc3VyZXM9bmV3IE9iamVjdCgpO2Zvcih2YXIgaT0tMSxNO009bVsrK2ldOyl7aWYoIXRoaXMuX29RdWVyeVJlc3VsdC5maW5kTWVhc3VyZUJ5TmFtZShNKSl0aHJvdyBNKyIgaXMgbm90IGEgdmFsaWQgbWVhc3VyZSBuYW1lIjt0aGlzLl9vTWVhc3VyZXNbTV09e3ZhbHVlOnRydWUsdGV4dDpmYWxzZSx1bml0OmZhbHNlfX19LGdldE1lYXN1cmVOYW1lczpmdW5jdGlvbigpe3ZhciBtPW5ldyBBcnJheSgpO2Zvcih2YXIgTSBpbiB0aGlzLl9vTWVhc3VyZXMpe20ucHVzaChNKX1yZXR1cm4gbX0saW5jbHVkZURpbWVuc2lvbktleVRleHRBdHRyaWJ1dGVzOmZ1bmN0aW9uKGQsSSxiLGEpe3RoaXMuX29TZWxlY3RlZFByb3BlcnR5TmFtZXM9bnVsbDt2YXIgRD1uZXcgQXJyYXkoKTtpZihkKXtpZih0aGlzLl9vQWdncmVnYXRpb25MZXZlbFtkXT09dW5kZWZpbmVkKXRocm93IGQrIiBpcyBub3QgaW5jbHVkZWQgaW4gdGhlIGFnZ3JlZ2F0aW9uIGxldmVsIjtELnB1c2goZCl9ZWxzZXtmb3IodmFyIG4gaW4gdGhpcy5fb0FnZ3JlZ2F0aW9uTGV2ZWwpe0QucHVzaChuKX1hPW51bGx9Zm9yKHZhciBpPS0xLHM7cz1EWysraV07KXtpZihJIT1udWxsKXRoaXMuX29BZ2dyZWdhdGlvbkxldmVsW3NdLmtleT1JO2lmKGIhPW51bGwpdGhpcy5fb0FnZ3JlZ2F0aW9uTGV2ZWxbc10udGV4dD1iO2lmKGEhPW51bGwpdGhpcy5fb0FnZ3JlZ2F0aW9uTGV2ZWxbc10uYXR0cmlidXRlcz1hfX0saW5jbHVkZU1lYXN1cmVSYXdGb3JtYXR0ZWRWYWx1ZVVuaXQ6ZnVuY3Rpb24obSxJLGIsYSl7dGhpcy5fb1NlbGVjdGVkUHJvcGVydHlOYW1lcz1udWxsO3ZhciBNPW5ldyBBcnJheSgpO2lmKG0pe2lmKHRoaXMuX29NZWFzdXJlc1ttXT09dW5kZWZpbmVkKXRocm93IG0rIiBpcyBub3QgcGFydCBvZiB0aGUgcXVlcnkgcmVzdWx0IjtNLnB1c2gobSl9ZWxzZXtmb3IodmFyIG4gaW4gdGhpcy5fb01lYXN1cmVzKXtNLnB1c2gobil9fWZvcih2YXIgaT0tMSxzO3M9TVsrK2ldOyl7aWYoSSE9bnVsbCl0aGlzLl9vTWVhc3VyZXNbc10udmFsdWU9STtpZihiIT1udWxsKXRoaXMuX29NZWFzdXJlc1tzXS50ZXh0PWI7aWYoYSE9bnVsbCl0aGlzLl9vTWVhc3VyZXNbc10udW5pdD1hfX0sZ2V0RmlsdGVyRXhwcmVzc2lvbjpmdW5jdGlvbigpe2lmKHRoaXMuX29GaWx0ZXJFeHByZXNzaW9uPT1udWxsKXt2YXIgZT10aGlzLl9vUXVlcnlSZXN1bHQuZ2V0RW50aXR5VHlwZSgpO3RoaXMuX29GaWx0ZXJFeHByZXNzaW9uPW5ldyBvLkZpbHRlckV4cHJlc3Npb24odGhpcy5fb1F1ZXJ5UmVzdWx0LmdldE1vZGVsKCksZS5nZXRTY2hlbWEoKSxlKX1yZXR1cm4gdGhpcy5fb0ZpbHRlckV4cHJlc3Npb259LHNldEZpbHRlckV4cHJlc3Npb246ZnVuY3Rpb24oZil7dGhpcy5fb0ZpbHRlckV4cHJlc3Npb249Zn0sZ2V0U29ydEV4cHJlc3Npb246ZnVuY3Rpb24oKXtpZih0aGlzLl9vU29ydEV4cHJlc3Npb249PW51bGwpe3ZhciBlPXRoaXMuX29RdWVyeVJlc3VsdC5nZXRFbnRpdHlUeXBlKCk7dGhpcy5fb1NvcnRFeHByZXNzaW9uPW5ldyBvLlNvcnRFeHByZXNzaW9uKGUuZ2V0TW9kZWwoKSxlLmdldFNjaGVtYSgpLGUpfXJldHVybiB0aGlzLl9vU29ydEV4cHJlc3Npb259LHNldFNvcnRFeHByZXNzaW9uOmZ1bmN0aW9uKHMpe3RoaXMuX29Tb3J0RXhwcmVzc2lvbj1zfSxzZXRSZXF1ZXN0T3B0aW9uczpmdW5jdGlvbihpLEkpe2lmKGkhPW51bGwpdGhpcy5fYkluY2x1ZGVFbnRpdHlLZXk9aTtpZihJIT1udWxsKXRoaXMuX2JJbmNsdWRlQ291bnQ9SX0sc2V0UmVzdWx0UGFnZUJvdW5kYXJpZXM6ZnVuY3Rpb24ocyxlKXtpZihzIT1udWxsJiZ0eXBlb2YgcyE9PSJudW1iZXIiKXt0aHJvdyJTdGFydCB2YWx1ZSBtdXN0IGJlIG51bGwgb3IgbnVtZXJpYyJ9aWYoZSE9PW51bGwmJnR5cGVvZiBlIT09Im51bWJlciIpe3Rocm93IkVuZCB2YWx1ZSBtdXN0IGJlIG51bGwgb3IgbnVtZXJpYyJ9aWYocz09bnVsbClzPTE7aWYoczwxfHxzPihlPT1udWxsP3M6ZSkpe3Rocm93IkludmFsaWQgdmFsdWVzIGZvciByZXF1ZXN0ZWQgcGFnZSBib3VuZGFyaWVzIn10aGlzLl9pU2tpcFJlcXVlc3RPcHRpb249KHM+MSk/cy0xOm51bGw7dGhpcy5faVRvcFJlcXVlc3RPcHRpb249KGUhPW51bGwpPyhlLXMrMSk6bnVsbH0sZ2V0UmVzdWx0UGFnZUJvdW5kYXJpZXM6ZnVuY3Rpb24oKXtyZXR1cm57c3RhcnQ6KHRoaXMuX2lTa2lwUmVxdWVzdE9wdGlvbj09bnVsbCk/MTp0aGlzLl9pU2tpcFJlcXVlc3RPcHRpb24sZW5kOih0aGlzLl9pVG9wUmVxdWVzdE9wdGlvbiE9bnVsbCk/KHRoaXMuX2lTa2lwUmVxdWVzdE9wdGlvbj09bnVsbCk/MTp0aGlzLl9pU2tpcFJlcXVlc3RPcHRpb24rdGhpcy5faVRvcFJlcXVlc3RPcHRpb246bnVsbH19LGdldFVSSVRvUXVlcnlSZXN1bHRFbnRpdHlTZXQ6ZnVuY3Rpb24ocyl7dmFyIHU9bnVsbDtpZih0aGlzLl9zUmVzb3VyY2VQYXRoIT1udWxsKXt1PShzP3M6IiIpK3RoaXMuX3NSZXNvdXJjZVBhdGh9ZWxzZXtpZih0aGlzLl9vUXVlcnlSZXN1bHQuZ2V0UGFyYW1ldGVyaXphdGlvbigpKXtpZighdGhpcy5fb1BhcmFtZXRlcml6YXRpb25SZXF1ZXN0KXRocm93Ik1pc3NpbmcgcGFyYW1ldGVyaXphdGlvbiByZXF1ZXN0IjtlbHNlIHU9dGhpcy5fb1BhcmFtZXRlcml6YXRpb25SZXF1ZXN0LmdldFVSSVRvUGFyYW1ldGVyaXphdGlvbkVudHJ5KHMpKyIvIit0aGlzLl9vUXVlcnlSZXN1bHQuZ2V0UGFyYW1ldGVyaXphdGlvbigpLmdldE5hdmlnYXRpb25Qcm9wZXJ0eVRvUXVlcnlSZXN1bHQoKX1lbHNlIHU9KHM/czoiIikrIi8iK3RoaXMuX29RdWVyeVJlc3VsdC5nZXRFbnRpdHlTZXQoKS5nZXRRTmFtZSgpfXJldHVybiB1fSxnZXRVUklRdWVyeU9wdGlvblZhbHVlOmZ1bmN0aW9uKFEpe3ZhciBzPW51bGw7c3dpdGNoKFEpe2Nhc2UiJHNlbGVjdCI6e3ZhciBTPSIiO3RoaXMuX29TZWxlY3RlZFByb3BlcnR5TmFtZXM9bmV3IE9iamVjdCgpO3ZhciBkPW51bGw7Zm9yKHZhciBEIGluIHRoaXMuX29BZ2dyZWdhdGlvbkxldmVsKXt2YXIgYT10aGlzLl9vUXVlcnlSZXN1bHQuZmluZERpbWVuc2lvbkJ5TmFtZShEKTt2YXIgYj10aGlzLl9vQWdncmVnYXRpb25MZXZlbFtEXTtpZihiLmtleT09dHJ1ZSl7ZD1hLmdldEtleVByb3BlcnR5KCkubmFtZTtpZih0aGlzLl9vU2VsZWN0ZWRQcm9wZXJ0eU5hbWVzW2RdPT11bmRlZmluZWQpe1MrPShTPT0iIj8iIjoiLCIpK2Q7dGhpcy5fb1NlbGVjdGVkUHJvcGVydHlOYW1lc1tkXT10cnVlfX1pZihiLnRleHQ9PXRydWUmJmEuZ2V0VGV4dFByb3BlcnR5KCkpe2Q9YS5nZXRUZXh0UHJvcGVydHkoKS5uYW1lO2lmKHRoaXMuX29TZWxlY3RlZFByb3BlcnR5TmFtZXNbZF09PXVuZGVmaW5lZCl7Uys9KFM9PSIiPyIiOiIsIikrZDt0aGlzLl9vU2VsZWN0ZWRQcm9wZXJ0eU5hbWVzW2RdPXRydWV9fWlmKGIuYXR0cmlidXRlcyl7Zm9yKHZhciBpPS0xLEE7QT1iLmF0dHJpYnV0ZXNbKytpXTspe2Q9YS5maW5kQXR0cmlidXRlQnlOYW1lKEEpLmdldE5hbWUoKTtpZih0aGlzLl9vU2VsZWN0ZWRQcm9wZXJ0eU5hbWVzW2RdPT11bmRlZmluZWQpe1MrPShTPT0iIj8iIjoiLCIpK2Q7dGhpcy5fb1NlbGVjdGVkUHJvcGVydHlOYW1lc1tkXT10cnVlfX19fXZhciBtO2Zvcih2YXIgTSBpbiB0aGlzLl9vTWVhc3VyZXMpe3ZhciBjPXRoaXMuX29RdWVyeVJlc3VsdC5maW5kTWVhc3VyZUJ5TmFtZShNKTt2YXIgZT10aGlzLl9vTWVhc3VyZXNbTV07aWYoZS52YWx1ZT09dHJ1ZSl7bT1jLmdldFJhd1ZhbHVlUHJvcGVydHkoKS5uYW1lO2lmKHRoaXMuX29TZWxlY3RlZFByb3BlcnR5TmFtZXNbbV09PXVuZGVmaW5lZCl7Uys9KFM9PSIiPyIiOiIsIikrbTt0aGlzLl9vU2VsZWN0ZWRQcm9wZXJ0eU5hbWVzW21dPXRydWV9fWlmKGUudGV4dD09dHJ1ZSYmYy5nZXRGb3JtYXR0ZWRWYWx1ZVByb3BlcnR5KCkpe209Yy5nZXRGb3JtYXR0ZWRWYWx1ZVByb3BlcnR5KCkubmFtZTtpZih0aGlzLl9vU2VsZWN0ZWRQcm9wZXJ0eU5hbWVzW21dPT11bmRlZmluZWQpe1MrPShTPT0iIj8iIjoiLCIpK207dGhpcy5fb1NlbGVjdGVkUHJvcGVydHlOYW1lc1ttXT10cnVlfX1pZihlLnVuaXQ9PXRydWUmJmMuZ2V0VW5pdFByb3BlcnR5KCkpe209Yy5nZXRVbml0UHJvcGVydHkoKS5uYW1lO2lmKHRoaXMuX29TZWxlY3RlZFByb3BlcnR5TmFtZXNbbV09PXVuZGVmaW5lZCl7Uys9KFM9PSIiPyIiOiIsIikrbTt0aGlzLl9vU2VsZWN0ZWRQcm9wZXJ0eU5hbWVzW21dPXRydWV9fX1pZih0aGlzLl9iSW5jbHVkZUVudGl0eUtleSl7dmFyIGs9dGhpcy5fb1F1ZXJ5UmVzdWx0LmdldEVudGl0eVR5cGUoKS5nZXRUeXBlRGVzY3JpcHRpb24oKS5rZXkucHJvcGVydHlSZWY7Zm9yKHZhciBpPS0xLEs7Sz1rWysraV07KXtTKz0oUz09IiI/IiI6IiwiKStLLm5hbWV9fXM9KFM/UzpudWxsKTticmVha31jYXNlIiRmaWx0ZXIiOnt2YXIgZj1udWxsO2lmKHRoaXMuX29GaWx0ZXJFeHByZXNzaW9uKWY9dGhpcy5fb0ZpbHRlckV4cHJlc3Npb24uZ2V0VVJJRmlsdGVyT3B0aW9uVmFsdWUoKTtzPShmP2Y6bnVsbCk7YnJlYWt9Y2FzZSIkb3JkZXJieSI6e3ZhciBnPW51bGw7aWYodGhpcy5fb1NvcnRFeHByZXNzaW9uKWc9dGhpcy5fb1NvcnRFeHByZXNzaW9uLmdldFVSSU9yZGVyQnlPcHRpb25WYWx1ZSh0aGlzLl9vU2VsZWN0ZWRQcm9wZXJ0eU5hbWVzKTtzPShnP2c6bnVsbCk7YnJlYWt9Y2FzZSIkdG9wIjp7aWYodGhpcy5faVRvcFJlcXVlc3RPcHRpb24hPT1udWxsKXtzPXRoaXMuX2lUb3BSZXF1ZXN0T3B0aW9ufWJyZWFrfWNhc2UiJHNraXAiOntzPXRoaXMuX2lTa2lwUmVxdWVzdE9wdGlvbjticmVha31jYXNlIiRpbmxpbmVjb3VudCI6e3M9KHRoaXMuX2JJbmNsdWRlQ291bnQ9PXRydWU/ImFsbHBhZ2VzIjpudWxsKTticmVha31kZWZhdWx0OmJyZWFrfXJldHVybiBzfSxnZXRVUklUb1F1ZXJ5UmVzdWx0RW50cmllczpmdW5jdGlvbihzLHIpe3ZhciByPXRoaXMuZ2V0VVJJVG9RdWVyeVJlc3VsdEVudGl0eVNldChzKTt0aGlzLmdldEZpbHRlckV4cHJlc3Npb24oKS5pc1ZhbGlkKCk7dmFyIFM9dGhpcy5nZXRVUklRdWVyeU9wdGlvblZhbHVlKCIkc2VsZWN0Iik7dmFyIGY9dGhpcy5nZXRVUklRdWVyeU9wdGlvblZhbHVlKCIkZmlsdGVyIik7dmFyIGE9dGhpcy5nZXRVUklRdWVyeU9wdGlvblZhbHVlKCIkb3JkZXJieSIpO3ZhciB0PXRoaXMuZ2V0VVJJUXVlcnlPcHRpb25WYWx1ZSgiJHRvcCIpO3ZhciBiPXRoaXMuZ2V0VVJJUXVlcnlPcHRpb25WYWx1ZSgiJHNraXAiKTt2YXIgaT10aGlzLmdldFVSSVF1ZXJ5T3B0aW9uVmFsdWUoIiRpbmxpbmVjb3VudCIpO3ZhciB1PXI7dmFyIFE9ZmFsc2U7aWYoUyl7dSs9Ij8kc2VsZWN0PSIrUztRPXRydWV9aWYodGhpcy5fb0ZpbHRlckV4cHJlc3Npb24mJmYpe2lmKCFRKXt1Kz0iPyI7UT10cnVlfWVsc2V7dSs9IiYifXUrPSIkZmlsdGVyPSIrZn1pZih0aGlzLl9vU29ydEV4cHJlc3Npb24mJmEpe2lmKCFRKXt1Kz0iPyI7UT10cnVlfWVsc2V7dSs9IiYifXUrPSIkb3JkZXJieT0iK2F9aWYodGhpcy5faVRvcFJlcXVlc3RPcHRpb24mJnQpe2lmKCFRKXt1Kz0iPyI7UT10cnVlfWVsc2V7dSs9IiYifXUrPSIkdG9wPSIrdH1pZih0aGlzLl9pU2tpcFJlcXVlc3RPcHRpb24mJmIpe2lmKCFRKXt1Kz0iPyI7UT10cnVlfWVsc2V7dSs9IiYifXUrPSIkc2tpcD0iK2J9aWYodGhpcy5fYkluY2x1ZGVDb3VudCYmaSl7aWYoIVEpe3UrPSI/IjtRPXRydWV9ZWxzZXt1Kz0iJiJ9dSs9IiRpbmxpbmVjb3VudD0iK2l9cmV0dXJuIHV9LF9vUXVlcnlSZXN1bHQ6bnVsbCxfb1BhcmFtZXRlcml6YXRpb25SZXF1ZXN0Om51bGwsX3NSZXNvdXJjZVBhdGg6bnVsbCxfb0FnZ3JlZ2F0aW9uTGV2ZWw6bnVsbCxfb01lYXN1cmVzOm51bGwsX2JJbmNsdWRlRW50aXR5S2V5Om51bGwsX2JJbmNsdWRlQ291bnQ6bnVsbCxfb0ZpbHRlckV4cHJlc3Npb246bnVsbCxfb1NvcnRFeHByZXNzaW9uOm51bGwsX2lTa2lwUmVxdWVzdE9wdGlvbjowLF9pVG9wUmVxdWVzdE9wdGlvbjpudWxsfTtvLlBhcmFtZXRlclZhbHVlU2V0UmVxdWVzdD1mdW5jdGlvbihwKXt0aGlzLl9pbml0KHApfTtvLlBhcmFtZXRlclZhbHVlU2V0UmVxdWVzdC5wcm90b3R5cGU9e19pbml0OmZ1bmN0aW9uKHApe3RoaXMuX29QYXJhbWV0ZXI9cDt0aGlzLl9vVmFsdWVTZXRSZXN1bHQ9bmV3IE9iamVjdCgpO3RoaXMuX29GaWx0ZXJFeHByZXNzaW9uPW51bGw7dGhpcy5fb1NvcnRFeHByZXNzaW9uPW51bGx9LGluY2x1ZGVQYXJhbWV0ZXJUZXh0OmZ1bmN0aW9uKGkpe2lmKGkhPW51bGwpdGhpcy5fb1ZhbHVlU2V0UmVzdWx0LnRleHQ9aX0sZ2V0RmlsdGVyRXhwcmVzc2lvbjpmdW5jdGlvbigpe2lmKHRoaXMuX29GaWx0ZXJFeHByZXNzaW9uPT1udWxsKXt2YXIgZT10aGlzLl9vUGFyYW1ldGVyLmdldENvbnRhaW5pbmdQYXJhbWV0ZXJpemF0aW9uKCkuZ2V0RW50aXR5VHlwZSgpO3ZhciBtPXRoaXMuX29QYXJhbWV0ZXIuZ2V0Q29udGFpbmluZ1BhcmFtZXRlcml6YXRpb24oKS5nZXRUYXJnZXRRdWVyeVJlc3VsdCgpLmdldE1vZGVsKCk7dGhpcy5fb0ZpbHRlckV4cHJlc3Npb249bmV3IG8uRmlsdGVyRXhwcmVzc2lvbihtLGUuZ2V0U2NoZW1hKCksZSl9cmV0dXJuIHRoaXMuX29GaWx0ZXJFeHByZXNzaW9ufSxzZXRGaWx0ZXJFeHByZXNzaW9uOmZ1bmN0aW9uKGYpe3RoaXMuX29GaWx0ZXJFeHByZXNzaW9uPWZ9LGdldFNvcnRFeHByZXNzaW9uOmZ1bmN0aW9uKCl7aWYodGhpcy5fb1NvcnRFeHByZXNzaW9uPT1udWxsKXt2YXIgZT10aGlzLl9vUGFyYW1ldGVyLmdldENvbnRhaW5pbmdQYXJhbWV0ZXJpemF0aW9uKCkuZ2V0RW50aXR5VHlwZSgpO3RoaXMuX29Tb3J0RXhwcmVzc2lvbj1uZXcgby5Tb3J0RXhwcmVzc2lvbihlLmdldE1vZGVsKCksZS5nZXRTY2hlbWEoKSxlKX1yZXR1cm4gdGhpcy5fb1NvcnRFeHByZXNzaW9ufSxzZXRTb3J0RXhwcmVzc2lvbjpmdW5jdGlvbihzKXt0aGlzLl9vU29ydEV4cHJlc3Npb249c30sZ2V0VVJJUXVlcnlPcHRpb25WYWx1ZTpmdW5jdGlvbihRKXt2YXIgcz1udWxsO3N3aXRjaChRKXtjYXNlIiRzZWxlY3QiOnt2YXIgUz0iIjtTKz0oUz09IiI/IiI6IiwiKSt0aGlzLl9vUGFyYW1ldGVyLmdldFByb3BlcnR5KCkubmFtZTtpZih0aGlzLl9vVmFsdWVTZXRSZXN1bHQudGV4dD09dHJ1ZSYmdGhpcy5fb1BhcmFtZXRlci5nZXRUZXh0UHJvcGVydHkoKSlTKz0oUz09IiI/IiI6IiwiKSt0aGlzLl9vUGFyYW1ldGVyLmdldFRleHRQcm9wZXJ0eSgpLm5hbWU7cz0oUz9TOm51bGwpO2JyZWFrfWNhc2UiJGZpbHRlciI6e3ZhciBmPW51bGw7aWYodGhpcy5fb0ZpbHRlckV4cHJlc3Npb24pZj10aGlzLl9vRmlsdGVyRXhwcmVzc2lvbi5nZXRVUklGaWx0ZXJPcHRpb25WYWx1ZSgpO3M9KGY/ZjpudWxsKTticmVha31jYXNlIiRvcmRlcmJ5Ijp7dmFyIGE9bnVsbDtpZih0aGlzLl9vU29ydEV4cHJlc3Npb24pYT10aGlzLl9vU29ydEV4cHJlc3Npb24uZ2V0VVJJT3JkZXJCeU9wdGlvblZhbHVlKCk7cz0oYT9hOm51bGwpO2JyZWFrfWRlZmF1bHQ6YnJlYWt9cmV0dXJuIHN9LGdldFVSSVRvUGFyYW1ldGVyVmFsdWVTZXRFbnRyaWVzOmZ1bmN0aW9uKHMpe3ZhciByPW51bGw7cj0ocz9zOiIiKSsiLyIrdGhpcy5fb1BhcmFtZXRlci5nZXRDb250YWluaW5nUGFyYW1ldGVyaXphdGlvbigpLmdldEVudGl0eVNldCgpLmdldFFOYW1lKCk7dGhpcy5nZXRGaWx0ZXJFeHByZXNzaW9uKCkuaXNWYWxpZCgpO3ZhciBTPXRoaXMuZ2V0VVJJUXVlcnlPcHRpb25WYWx1ZSgiJHNlbGVjdCIpO3ZhciBmPXRoaXMuZ2V0VVJJUXVlcnlPcHRpb25WYWx1ZSgiJGZpbHRlciIpO3ZhciBhPXRoaXMuZ2V0VVJJUXVlcnlPcHRpb25WYWx1ZSgiJG9yZGVyYnkiKTt2YXIgdT1yO3ZhciBRPWZhbHNlO2lmKFMpe3UrPSI/JHNlbGVjdD0iK1M7UT10cnVlfWlmKHRoaXMuX29GaWx0ZXJFeHByZXNzaW9uJiZmKXtpZighUSl7dSs9Ij8iO1E9dHJ1ZX1lbHNlIHUrPSImIjt1Kz0iJGZpbHRlcj0iK2Z9aWYodGhpcy5fb1NvcnRFeHByZXNzaW9uJiZhKXtpZighUSl7dSs9Ij8iO1E9dHJ1ZX1lbHNlIHUrPSImIjt1Kz0iJG9yZGVyYnk9IithfXJldHVybiB1fSxfb1BhcmFtZXRlcjpudWxsLF9vRmlsdGVyRXhwcmVzc2lvbjpudWxsLF9vU29ydEV4cHJlc3Npb246bnVsbCxfb1ZhbHVlU2V0UmVzdWx0Om51bGx9O28uRGltZW5zaW9uTWVtYmVyU2V0UmVxdWVzdD1mdW5jdGlvbihkLHAsdSl7dGhpcy5faW5pdChkLHAsdSl9O28uRGltZW5zaW9uTWVtYmVyU2V0UmVxdWVzdC5wcm90b3R5cGU9e19pbml0OmZ1bmN0aW9uKGQscCx1KXt0aGlzLl9vRGltZW5zaW9uPWQ7dGhpcy5fb1BhcmFtZXRlcml6YXRpb25SZXF1ZXN0PXA7dGhpcy5fYlVzZU1hc3RlckRhdGE9dTt0aGlzLl9vVmFsdWVTZXRSZXN1bHQ9bmV3IE9iamVjdCgpO3RoaXMuX29GaWx0ZXJFeHByZXNzaW9uPW51bGw7dGhpcy5fb1NvcnRFeHByZXNzaW9uPW51bGw7aWYodGhpcy5fb1BhcmFtZXRlcml6YXRpb25SZXF1ZXN0IT1udWxsJiZ0aGlzLl9iVXNlTWFzdGVyRGF0YT09dHJ1ZSl0aHJvdyJMSU1JVEFUSU9OOiBwYXJhbWV0ZXJpemVkIG1hc3RlciBkYXRhIGVudGl0eSBzZXRzIGFyZSBub3QgeWV0IGltcGxlbWVudGVkIjtpZih0aGlzLl9iVXNlTWFzdGVyRGF0YSl7dGhpcy5fb0VudGl0eVNldD10aGlzLl9vRGltZW5zaW9uLmdldE1hc3RlckRhdGFFbnRpdHlTZXQoKX1lbHNle3RoaXMuX29FbnRpdHlTZXQ9dGhpcy5fb0RpbWVuc2lvbi5nZXRDb250YWluaW5nUXVlcnlSZXN1bHQoKS5nZXRFbnRpdHlTZXQoKTtpZih0aGlzLl9vRGltZW5zaW9uLmdldENvbnRhaW5pbmdRdWVyeVJlc3VsdCgpLmdldFBhcmFtZXRlcml6YXRpb24oKSYmIXRoaXMuX29QYXJhbWV0ZXJpemF0aW9uUmVxdWVzdCl0aHJvdyJNaXNzaW5nIHBhcmFtZXRlcml6YXRpb24gcmVxdWVzdCJ9fSxzZXRQYXJhbWV0ZXJpemF0aW9uUmVxdWVzdDpmdW5jdGlvbihwKXt0aGlzLl9vUGFyYW1ldGVyaXphdGlvblJlcXVlc3Q9cH0saW5jbHVkZURpbWVuc2lvblRleHRBdHRyaWJ1dGVzOmZ1bmN0aW9uKGksSSl7dGhpcy5fb1ZhbHVlU2V0UmVzdWx0LnRleHQ9e3RleHQ6ZmFsc2UsYXR0cmlidXRlczpmYWxzZX07aWYoaT09dHJ1ZSl0aGlzLl9vVmFsdWVTZXRSZXN1bHQudGV4dD10cnVlO2lmKEk9PXRydWUpdGhpcy5fb1ZhbHVlU2V0UmVzdWx0LmF0dHJpYnV0ZXM9dHJ1ZX0sZ2V0RmlsdGVyRXhwcmVzc2lvbjpmdW5jdGlvbigpe2lmKHRoaXMuX29GaWx0ZXJFeHByZXNzaW9uPT1udWxsKXt2YXIgZT10aGlzLl9vRW50aXR5U2V0LmdldEVudGl0eVR5cGUoKTt2YXIgbT10aGlzLl9vRGltZW5zaW9uLmdldENvbnRhaW5pbmdRdWVyeVJlc3VsdCgpLmdldE1vZGVsKCk7dGhpcy5fb0ZpbHRlckV4cHJlc3Npb249bmV3IG8uRmlsdGVyRXhwcmVzc2lvbihtLGUuZ2V0U2NoZW1hKCksZSl9cmV0dXJuIHRoaXMuX29GaWx0ZXJFeHByZXNzaW9ufSxzZXRGaWx0ZXJFeHByZXNzaW9uOmZ1bmN0aW9uKGYpe3RoaXMuX29GaWx0ZXJFeHByZXNzaW9uPWZ9LGdldFNvcnRFeHByZXNzaW9uOmZ1bmN0aW9uKCl7aWYodGhpcy5fb1NvcnRFeHByZXNzaW9uPT1udWxsKXt0aGlzLl9vU29ydEV4cHJlc3Npb249bmV3IG8uU29ydEV4cHJlc3Npb24odGhpcy5fb0VudGl0eVR5cGUuZ2V0TW9kZWwoKSx0aGlzLl9vRW50aXR5VHlwZS5nZXRTY2hlbWEoKSx0aGlzLl9vRW50aXR5VHlwZSl9cmV0dXJuIHRoaXMuX29Tb3J0RXhwcmVzc2lvbn0sc2V0U29ydEV4cHJlc3Npb246ZnVuY3Rpb24ocyl7dGhpcy5fb1NvcnRFeHByZXNzaW9uPXN9LHNldFJlcXVlc3RPcHRpb25zOmZ1bmN0aW9uKGkpe2lmKGkhPW51bGwpdGhpcy5fYkluY2x1ZGVDb3VudD1pfSxzZXRSZXN1bHRQYWdlQm91bmRhcmllczpmdW5jdGlvbihzLGUpe2lmKHMhPW51bGwmJnR5cGVvZiBzIT09Im51bWJlciIpe3Rocm93IlN0YXJ0IHZhbHVlIG11c3QgYmUgbnVsbCBvciBudW1lcmljIn1pZihlIT09bnVsbCYmdHlwZW9mIGUhPT0ibnVtYmVyIil7dGhyb3ciRW5kIHZhbHVlIG11c3QgYmUgbnVsbCBvciBudW1lcmljIn1pZihzPT1udWxsKXM9MTtpZihzPDF8fHM+KGU9PW51bGw/czplKSl7dGhyb3ciSW52YWxpZCB2YWx1ZXMgZm9yIHJlcXVlc3RlZCBwYWdlIGJvdW5kYXJpZXMifXRoaXMuX2lTa2lwUmVxdWVzdE9wdGlvbj0ocz4xKT9zLTE6bnVsbDt0aGlzLl9pVG9wUmVxdWVzdE9wdGlvbj0oZSE9bnVsbCk/KGUtcysxKTpudWxsfSxnZXRSZXN1bHRQYWdlQm91bmRhcmllczpmdW5jdGlvbigpe3JldHVybntzdGFydDoodGhpcy5faVNraXBSZXF1ZXN0T3B0aW9uPT1udWxsKT8xOnRoaXMuX2lTa2lwUmVxdWVzdE9wdGlvbixlbmQ6KHRoaXMuX2lUb3BSZXF1ZXN0T3B0aW9uIT1udWxsKT8odGhpcy5faVNraXBSZXF1ZXN0T3B0aW9uPT1udWxsKT8xOnRoaXMuX2lTa2lwUmVxdWVzdE9wdGlvbit0aGlzLl9pVG9wUmVxdWVzdE9wdGlvbjpudWxsfX0sZ2V0VVJJUXVlcnlPcHRpb25WYWx1ZTpmdW5jdGlvbihRKXt2YXIgcz1udWxsO3N3aXRjaChRKXtjYXNlIiRzZWxlY3QiOnt2YXIgUz0iIjt2YXIgZT10aGlzLl9vRW50aXR5U2V0LmdldEVudGl0eVR5cGUoKTt2YXIgaz1lLmdldEtleVByb3BlcnRpZXMoKTt2YXIgSz1bXTtpZih0aGlzLl9iVXNlTWFzdGVyRGF0YSl7Zm9yKHZhciBpPS0xLGE7YT1rWysraV07KXtTKz0oUz09IiI/IiI6IiwiKSthO3ZhciBiPWUuZ2V0VGV4dFByb3BlcnR5T2ZQcm9wZXJ0eShhKTtpZihiKXtpZih0aGlzLl9vVmFsdWVTZXRSZXN1bHQudGV4dD09dHJ1ZSlTKz0iLCIrYi5uYW1lO0sucHVzaChiLm5hbWUpfX19ZWxzZXtTKz0oUz09IiI/IiI6IiwiKSt0aGlzLl9vRGltZW5zaW9uLmdldEtleVByb3BlcnR5KCkubmFtZTtpZih0aGlzLl9vVmFsdWVTZXRSZXN1bHQudGV4dD09dHJ1ZSYmdGhpcy5fb0RpbWVuc2lvbi5nZXRUZXh0UHJvcGVydHkoKSlTKz0oUz09IiI/IiI6IiwiKSt0aGlzLl9vRGltZW5zaW9uLmdldFRleHRQcm9wZXJ0eSgpLm5hbWV9aWYodGhpcy5fb1ZhbHVlU2V0UmVzdWx0LmF0dHJpYnV0ZXMpe2lmKHRoaXMuX2JVc2VNYXN0ZXJEYXRhKXt2YXIgQT1lLmdldFByb3BlcnRpZXMoKTtmb3IodmFyIHAgaW4gQSl7dmFyIEk9ZmFsc2U7Zm9yKHZhciBpPS0xLGE7YT1rWysraV07KXtpZihwPT1hKXtJPXRydWU7YnJlYWt9fWlmKEkpY29udGludWU7Zm9yKHZhciBpPS0xLGM7Yz1LWysraV07KXtpZihwPT1jKXtJPXRydWU7YnJlYWt9fWlmKCFJKVMrPSIsIitwfX1lbHNle3ZhciBkPXRoaXMuX29EaW1lbnNpb24uZ2V0QWxsQXR0cmlidXRlTmFtZXMoKTtmb3IodmFyIGk9LTEsZjtmPWRbKytpXTspe1MrPShTPT0iIj8iIjoiLCIpK3RoaXMuX29EaW1lbnNpb24uZmluZEF0dHJpYnV0ZUJ5TmFtZShmKS5nZXROYW1lKCl9fX1zPShTP1M6bnVsbCk7YnJlYWt9Y2FzZSIkZmlsdGVyIjp7dmFyIEY9bnVsbDtpZih0aGlzLl9vRmlsdGVyRXhwcmVzc2lvbilGPXRoaXMuX29GaWx0ZXJFeHByZXNzaW9uLmdldFVSSUZpbHRlck9wdGlvblZhbHVlKCk7cz0oRj9GOm51bGwpO2JyZWFrfWNhc2UiJG9yZGVyYnkiOnt2YXIgZz1udWxsO2lmKHRoaXMuX29Tb3J0RXhwcmVzc2lvbilnPXRoaXMuX29Tb3J0RXhwcmVzc2lvbi5nZXRVUklPcmRlckJ5T3B0aW9uVmFsdWUoKTtzPShnP2c6bnVsbCk7YnJlYWt9Y2FzZSIkdG9wIjp7aWYodGhpcy5faVRvcFJlcXVlc3RPcHRpb24hPT1udWxsKXtzPXRoaXMuX2lUb3BSZXF1ZXN0T3B0aW9ufWJyZWFrfWNhc2UiJHNraXAiOntzPXRoaXMuX2lTa2lwUmVxdWVzdE9wdGlvbjticmVha31jYXNlIiRpbmxpbmVjb3VudCI6e3M9KHRoaXMuX2JJbmNsdWRlQ291bnQ9PXRydWU/ImFsbHBhZ2VzIjpudWxsKTticmVha31kZWZhdWx0OmJyZWFrfXJldHVybiBzfSxnZXRVUklUb0RpbWVuc2lvbk1lbWJlckVudGl0eVNldDpmdW5jdGlvbihzKXt2YXIgcj1udWxsO2lmKCF0aGlzLl9iVXNlTWFzdGVyRGF0YSYmdGhpcy5fb1BhcmFtZXRlcml6YXRpb25SZXF1ZXN0KXtyPXRoaXMuX29QYXJhbWV0ZXJpemF0aW9uUmVxdWVzdC5nZXRVUklUb1BhcmFtZXRlcml6YXRpb25FbnRyeShzKSsiLyIrdGhpcy5fb0RpbWVuc2lvbi5nZXRDb250YWluaW5nUXVlcnlSZXN1bHQoKS5nZXRQYXJhbWV0ZXJpemF0aW9uKCkuZ2V0TmF2aWdhdGlvblByb3BlcnR5VG9RdWVyeVJlc3VsdCgpfWVsc2V7cj0ocz9zOiIiKSsiLyIrdGhpcy5fb0VudGl0eVNldC5nZXRRTmFtZSgpfXJldHVybiByfSxnZXRVUklUb0RpbWVuc2lvbk1lbWJlckVudHJpZXM6ZnVuY3Rpb24ocyl7dmFyIHI9dGhpcy5nZXRVUklUb0RpbWVuc2lvbk1lbWJlckVudGl0eVNldChzKTt0aGlzLmdldEZpbHRlckV4cHJlc3Npb24oKS5pc1ZhbGlkKCk7dmFyIFM9dGhpcy5nZXRVUklRdWVyeU9wdGlvblZhbHVlKCIkc2VsZWN0Iik7dmFyIGY9dGhpcy5nZXRVUklRdWVyeU9wdGlvblZhbHVlKCIkZmlsdGVyIik7dmFyIGE9dGhpcy5nZXRVUklRdWVyeU9wdGlvblZhbHVlKCIkb3JkZXJieSIpO3ZhciB0PXRoaXMuZ2V0VVJJUXVlcnlPcHRpb25WYWx1ZSgiJHRvcCIpO3ZhciBiPXRoaXMuZ2V0VVJJUXVlcnlPcHRpb25WYWx1ZSgiJHNraXAiKTt2YXIgaT10aGlzLmdldFVSSVF1ZXJ5T3B0aW9uVmFsdWUoIiRpbmxpbmVjb3VudCIpO3ZhciB1PXI7dmFyIFE9ZmFsc2U7aWYoUyl7dSs9Ij8kc2VsZWN0PSIrUztRPXRydWV9aWYodGhpcy5fb0ZpbHRlckV4cHJlc3Npb24mJmYpe2lmKCFRKXt1Kz0iPyI7UT10cnVlfWVsc2UgdSs9IiYiO3UrPSIkZmlsdGVyPSIrZn1pZih0aGlzLl9vU29ydEV4cHJlc3Npb24mJmEpe2lmKCFRKXt1Kz0iPyI7UT10cnVlfWVsc2UgdSs9IiYiO3UrPSIkb3JkZXJieT0iK2F9aWYodGhpcy5faVRvcFJlcXVlc3RPcHRpb24mJnQpe2lmKCFRKXt1Kz0iPyI7UT10cnVlfWVsc2V7dSs9IiYifXUrPSIkdG9wPSIrdH1pZih0aGlzLl9pU2tpcFJlcXVlc3RPcHRpb24mJmIpe2lmKCFRKXt1Kz0iPyI7UT10cnVlfWVsc2V7dSs9IiYifXUrPSIkc2tpcD0iK2J9aWYodGhpcy5fYkluY2x1ZGVDb3VudCYmaSl7aWYoIVEpe3UrPSI/IjtRPXRydWV9ZWxzZXt1Kz0iJiJ9dSs9IiRpbmxpbmVjb3VudD0iK2l9cmV0dXJuIHV9LF9vRGltZW5zaW9uOm51bGwsX29QYXJhbWV0ZXJpemF0aW9uUmVxdWVzdDpudWxsLF9vRW50aXR5U2V0Om51bGwsX2JVc2VNYXN0ZXJEYXRhOmZhbHNlLF9vRmlsdGVyRXhwcmVzc2lvbjpudWxsLF9vU29ydEV4cHJlc3Npb246bnVsbCxfb1ZhbHVlU2V0UmVzdWx0Om51bGwsX2JJbmNsdWRlQ291bnQ6bnVsbCxfaVNraXBSZXF1ZXN0T3B0aW9uOjAsX2lUb3BSZXF1ZXN0T3B0aW9uOm51bGx9O3JldHVybiBvfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLm1vZGVsLm9kYXRhLkNvdW50TW9kZScpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5tb2RlbC5vZGF0YS5Db3VudE1vZGUnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvbW9kZWwvb2RhdGEvQ291bnRNb2RlIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJ10sZnVuY3Rpb24ocSl7InVzZSBzdHJpY3QiO3ZhciBDPXtSZXF1ZXN0OiJSZXF1ZXN0IixJbmxpbmU6IklubGluZSIsQm90aDoiQm90aCIsTm9uZToiTm9uZSJ9O3JldHVybiBDfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnanF1ZXJ5LnNhcC5hY3QnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdqcXVlcnkuc2FwLmFjdCcpO3NhcC51aS5kZWZpbmUoImpxdWVyeS5zYXAuYWN0IixbJ2pxdWVyeS5zYXAuZ2xvYmFsJ10sZnVuY3Rpb24ocSl7InVzZSBzdHJpY3QiO2lmKHR5cGVvZiB3aW5kb3cualF1ZXJ5LnNhcC5hY3Q9PT0ib2JqZWN0Inx8dHlwZW9mIHdpbmRvdy5qUXVlcnkuc2FwLmFjdD09PSJmdW5jdGlvbiIpe3JldHVybn12YXIgXz17fSxhPXRydWUsYj1udWxsLGM9MTAwMDAsZD0hIXdpbmRvdy5hZGRFdmVudExpc3RlbmVyLGU9W10sZj1bXSxnPWZhbHNlLGg9bnVsbDtmdW5jdGlvbiBqKCl7Yj1udWxsO2lmKGcpe2soKTtyZXR1cm59YT1mYWxzZTtoLm9ic2VydmUoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LHtjaGlsZExpc3Q6dHJ1ZSxhdHRyaWJ1dGVzOnRydWUsc3VidHJlZTp0cnVlLGNoYXJhY3RlckRhdGE6dHJ1ZX0pfTtmdW5jdGlvbiBrKCl7aWYoIWEpe2E9dHJ1ZTtsKGUpO2guZGlzY29ubmVjdCgpfWlmKGIpe2c9dHJ1ZX1lbHNle2I9c2V0VGltZW91dChqLGMpO2c9ZmFsc2V9fTtmdW5jdGlvbiBsKEwpe2lmKEwubGVuZ3RoPT0wKXtyZXR1cm59dmFyIG09TC5zbGljZSgpO3NldFRpbWVvdXQoZnVuY3Rpb24oKXt2YXIgSTtmb3IodmFyIGk9MCxuPW0ubGVuZ3RoO2k8bjtpKyspe0k9bVtpXTtJLmZGdW5jdGlvbi5jYWxsKEkub0xpc3RlbmVyfHx3aW5kb3cpfX0sMCl9O18uYXR0YWNoQWN0aXZhdGU9ZnVuY3Rpb24oRixMKXtlLnB1c2goe29MaXN0ZW5lcjpMLGZGdW5jdGlvbjpGfSl9O18uZGV0YWNoQWN0aXZhdGU9ZnVuY3Rpb24oRixMKXtmb3IodmFyIGk9MCxtPWUubGVuZ3RoO2k8bTtpKyspe2lmKGVbaV0uZkZ1bmN0aW9uPT09RiYmZVtpXS5vTGlzdGVuZXI9PT1MKXtlLnNwbGljZShpLDEpO2JyZWFrfX19O18uaXNBY3RpdmU9IWQ/ZnVuY3Rpb24oKXtyZXR1cm4gdHJ1ZX06ZnVuY3Rpb24oKXtyZXR1cm4gYX07Xy5yZWZyZXNoPSFkP2Z1bmN0aW9uKCl7fTprO2lmKGQpe3ZhciBFPVsicmVzaXplIiwib3JpZW50YXRpb25jaGFuZ2UiLCJtb3VzZW1vdmUiLCJtb3VzZWRvd24iLCJtb3VzZXVwIiwidG91Y2hzdGFydCIsInRvdWNobW92ZSIsInRvdWNoZW5kIiwidG91Y2hjYW5jZWwiLCJwYXN0ZSIsImN1dCIsImtleWRvd24iLCJrZXl1cCIsIkRPTU1vdXNlU2Nyb2xsIiwibW91c2V3aGVlbCJdO2Zvcih2YXIgaT0wO2k8RS5sZW5ndGg7aSsrKXt3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihFW2ldLF8ucmVmcmVzaCx0cnVlKX1pZih3aW5kb3cuTXV0YXRpb25PYnNlcnZlcil7aD1uZXcgd2luZG93Lk11dGF0aW9uT2JzZXJ2ZXIoXy5yZWZyZXNoKX1lbHNlIGlmKHdpbmRvdy5XZWJLaXRNdXRhdGlvbk9ic2VydmVyKXtoPW5ldyB3aW5kb3cuV2ViS2l0TXV0YXRpb25PYnNlcnZlcihfLnJlZnJlc2gpfWVsc2V7aD17b2JzZXJ2ZTpmdW5jdGlvbigpe2RvY3VtZW50LmRvY3VtZW50RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCJET01TdWJ0cmVlTW9kaWZpZWQiLF8ucmVmcmVzaCl9LGRpc2Nvbm5lY3Q6ZnVuY3Rpb24oKXtkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigiRE9NU3VidHJlZU1vZGlmaWVkIixfLnJlZnJlc2gpfX19aygpfXEuc2FwLmFjdD1fO3JldHVybiBxfSxmYWxzZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ2pxdWVyeS5zYXAuZG9tJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnanF1ZXJ5LnNhcC5kb20nKTtzYXAudWkuZGVmaW5lKCJqcXVlcnkuc2FwLmRvbSIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ3NhcC91aS9EZXZpY2UnXSxmdW5jdGlvbihxLEQpeyJ1c2Ugc3RyaWN0Ijt2YXIgZD1mdW5jdGlvbihJLHcpe2lmKCF3KXt3PXdpbmRvd31pZighSXx8ST09IiIpe3JldHVybiBudWxsfXZhciBvPXcuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoSSk7aWYobyYmby5pZD09SSl7cmV0dXJuIG99dmFyIHI9dy5kb2N1bWVudC5nZXRFbGVtZW50c0J5TmFtZShJKTtmb3IodmFyIGk9MDtpPHIubGVuZ3RoO2krKyl7bz1yW2ldO2lmKG8mJm8uaWQ9PUkpe3JldHVybiBvfX1yZXR1cm4gbnVsbH07cS5zYXAuZG9tQnlJZD0hIUQuYnJvd3Nlci5pbnRlcm5ldF9leHBsb3JlciYmRC5icm93c2VyLnZlcnNpb248OD9kOmZ1bmN0aW9uIGRvbUJ5SWQoaSx3KXtyZXR1cm4gaT8od3x8d2luZG93KS5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChpKTpudWxsfTtxLnNhcC5ieUlkPWZ1bmN0aW9uIGJ5SWQoaSxjKXt2YXIgZT0iIjtpZihpKXtlPSIjIitpLnJlcGxhY2UoLyg6fFwuKS9nLCdcXCQxJyl9cmV0dXJuIHEoZSxjKX07cS5zYXAuZm9jdXM9ZnVuY3Rpb24gZm9jdXMobyl7aWYoIW8pe3JldHVybn10cnl7by5mb2N1cygpfWNhdGNoKGUpe3ZhciBpPShvJiZvLmlkKT8iIChJRDogJyIrby5pZCsiJykiOiIiO3Euc2FwLmxvZy53YXJuaW5nKCJFcnJvciB3aGVuIHRyeWluZyB0byBmb2N1cyBhIERPTSBlbGVtZW50IitpKyI6ICIrZS5tZXNzYWdlKTtyZXR1cm4gZmFsc2V9cmV0dXJuIHRydWV9O3EuZm4uY3Vyc29yUG9zPWZ1bmN0aW9uIGN1cnNvclBvcyhwKXt2YXIgbD1hcmd1bWVudHMubGVuZ3RoLHQsTCxULHM7VD10aGlzLnByb3AoInRhZ05hbWUiKTtzPXRoaXMucHJvcCgidHlwZSIpO2lmKHRoaXMubGVuZ3RoPT09MSYmKChUPT0iSU5QVVQiJiYocz09InRleHQifHxzPT0icGFzc3dvcmQifHxzPT0ic2VhcmNoIikpfHxUPT0iVEVYVEFSRUEiKSl7dmFyIG89dGhpcy5nZXQoMCk7aWYobD4wKXtpZih0eXBlb2Yoby5zZWxlY3Rpb25TdGFydCk9PSJudW1iZXIiKXtvLmZvY3VzKCk7by5zZWxlY3Rpb25TdGFydD1wO28uc2VsZWN0aW9uRW5kPXB9ZWxzZSBpZihvLmNyZWF0ZVRleHRSYW5nZSl7dD1vLmNyZWF0ZVRleHRSYW5nZSgpO3ZhciBtPW8udmFsdWUubGVuZ3RoO2lmKHA8MHx8cD5tKXtwPW19aWYodCl7dC5jb2xsYXBzZSgpO3QubW92ZUVuZCgiY2hhcmFjdGVyIixwKTt0Lm1vdmVTdGFydCgiY2hhcmFjdGVyIixwKTt0LnNlbGVjdCgpfX1yZXR1cm4gdGhpc31lbHNle2lmKHR5cGVvZihvLnNlbGVjdGlvblN0YXJ0KT09Im51bWJlciIpe3JldHVybiBvLnNlbGVjdGlvblN0YXJ0fWVsc2UgaWYoby5jcmVhdGVUZXh0UmFuZ2Upe3Q9d2luZG93LmRvY3VtZW50LnNlbGVjdGlvbi5jcmVhdGVSYW5nZSgpO3ZhciBjPXQuZHVwbGljYXRlKCk7aWYoby50YWdOYW1lPT0iVEVYVEFSRUEiKXtjLm1vdmVUb0VsZW1lbnRUZXh0KG8pO3ZhciBDPWMuZHVwbGljYXRlKCk7TD1jLnRleHQubGVuZ3RoO0MubW92ZVN0YXJ0KCJjaGFyYWN0ZXIiLEwpO2lmKEMuaW5SYW5nZSh0KSl7Uz1MfWVsc2V7dmFyIGk9TDt2YXIgUz0wO3doaWxlKEw+MSl7aT1NYXRoLnJvdW5kKEwvMik7Uz1TK2k7Qz1jLmR1cGxpY2F0ZSgpO0MubW92ZVN0YXJ0KCJjaGFyYWN0ZXIiLFMpO2lmKEMuaW5SYW5nZSh0KSl7TD1MLWl9ZWxzZXtTPVMtaTtMPWl9fX1yZXR1cm4gU31lbHNlIGlmKGMucGFyZW50RWxlbWVudCgpPT09byl7Yy5jb2xsYXBzZSgpO3ZhciBMPW8udmFsdWUubGVuZ3RoO2MubW92ZVN0YXJ0KCdjaGFyYWN0ZXInLC1MKTtyZXR1cm4gYy50ZXh0Lmxlbmd0aH19cmV0dXJuLTF9fWVsc2V7cmV0dXJuIHRoaXN9fTtxLmZuLnNlbGVjdFRleHQ9ZnVuY3Rpb24gc2VsZWN0VGV4dChzLEUpe3ZhciBvPXRoaXMuZ2V0KDApO2lmKCFvKXtyZXR1cm4gdGhpc310cnl7aWYodHlwZW9mKG8uc2VsZWN0aW9uU3RhcnQpPT09Im51bWJlciIpe2lmKHM8MCl7cz0wfWlmKEU+by52YWx1ZS5sZW5ndGgpe0U9by52YWx1ZS5sZW5ndGh9aWYoIUV8fHM+RSl7cz0wO0U9MH1vLnNlbGVjdGlvblN0YXJ0PXM7by5zZWxlY3Rpb25FbmQ9RX1lbHNlIGlmKG8uY3JlYXRlVGV4dFJhbmdlKXt2YXIgdD1vLmNyZWF0ZVRleHRSYW5nZSgpO3QuY29sbGFwc2UoKTt0Lm1vdmVTdGFydCgnY2hhcmFjdGVyJyxzKTt0Lm1vdmVFbmQoJ2NoYXJhY3RlcicsRS1zKTt0LnNlbGVjdCgpfX1jYXRjaChlKXt9cmV0dXJuIHRoaXN9O3EuZm4ub3V0ZXJIVE1MPWZ1bmN0aW9uIG91dGVySFRNTCgpe3ZhciBvPXRoaXMuZ2V0KDApO2lmKG8mJm8ub3V0ZXJIVE1MKXtyZXR1cm4gcS50cmltKG8ub3V0ZXJIVE1MKX1lbHNle3ZhciBhPXRoaXNbMF0/dGhpc1swXS5vd25lckRvY3VtZW50OmRvY3VtZW50O3ZhciBiPWEuY3JlYXRlRWxlbWVudCgiZGl2Iik7Yi5hcHBlbmRDaGlsZChvLmNsb25lTm9kZSh0cnVlKSk7cmV0dXJuIGIuaW5uZXJIVE1MfX07cS5zYXAuY29udGFpbnNPckVxdWFscz1mdW5jdGlvbiBjb250YWluc09yRXF1YWxzKG8sYSl7aWYoYSYmbyYmYSE9ZG9jdW1lbnQmJmEhPXdpbmRvdyl7cmV0dXJuKG89PT1hKXx8cS5jb250YWlucyhvLGEpfXJldHVybiBmYWxzZX07cS5mbi5yZWN0PWZ1bmN0aW9uIHJlY3QoKXt2YXIgbz10aGlzLmdldCgwKTtpZihvKXtpZihvLmdldEJvdW5kaW5nQ2xpZW50UmVjdCl7dmFyIGM9by5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTt2YXIgcj17dG9wOmMudG9wLGxlZnQ6Yy5sZWZ0LHdpZHRoOmMucmlnaHQtYy5sZWZ0LGhlaWdodDpjLmJvdHRvbS1jLnRvcH07dmFyIHc9cS5zYXAub3duZXJXaW5kb3cobyk7ci5sZWZ0Kz1xKHcpLnNjcm9sbExlZnQoKTtyLnRvcCs9cSh3KS5zY3JvbGxUb3AoKTtyZXR1cm4gcn1lbHNle3JldHVybnt0b3A6MTAsbGVmdDoxMCx3aWR0aDpvLm9mZnNldFdpZHRoLGhlaWdodDpvLm9mZnNldFdpZHRofX19cmV0dXJuIG51bGx9O3EuZm4ucmVjdENvbnRhaW5zPWZ1bmN0aW9uIHJlY3RDb250YWlucyhwLFApe3ZhciByPXRoaXMucmVjdCgpO2lmKHIpe3JldHVybiBwPj1yLmxlZnQmJnA8PXIubGVmdCtyLndpZHRoJiZQPj1yLnRvcCYmUDw9ci50b3Arci5oZWlnaHR9cmV0dXJuIGZhbHNlfTtxLmZuLmhhc1RhYkluZGV4PWZ1bmN0aW9uIGhhc1RhYkluZGV4KCl7dmFyIHQ9dGhpcy5wcm9wKCJ0YWJJbmRleCIpO2lmKHRoaXMuYXR0cigiZGlzYWJsZWQiKSYmIXRoaXMuYXR0cigidGFiaW5kZXgiKSl7dD0tMX1yZXR1cm4haXNOYU4odCkmJnQ+PTB9O3EuZm4uZmlyc3RGb2N1c2FibGVEb21SZWY9ZnVuY3Rpb24gZmlyc3RGb2N1c2FibGVEb21SZWYoKXt2YXIgYz10aGlzLmdldCgwKTt2YXIgYT1mdW5jdGlvbihpKXtyZXR1cm4gcSh0aGlzKS5jc3MoInZpc2liaWxpdHkiKT09ImhpZGRlbiJ9O2lmKCFjfHxxKGMpLmlzKCc6aGlkZGVuJyl8fHEoYykuZmlsdGVyKGEpLmxlbmd0aD09MSl7cmV0dXJuIG51bGx9dmFyIEM9Yy5maXJzdENoaWxkLG89bnVsbDt3aGlsZShDKXtpZihDLm5vZGVUeXBlPT0xJiZxKEMpLmlzKCc6dmlzaWJsZScpKXtpZihxKEMpLmhhc1RhYkluZGV4KCkpe3JldHVybiBDfWlmKEMuY2hpbGROb2Rlcyl7bz1xKEMpLmZpcnN0Rm9jdXNhYmxlRG9tUmVmKCk7aWYobyl7cmV0dXJuIG99fX1DPUMubmV4dFNpYmxpbmd9cmV0dXJuIG51bGx9O3EuZm4ubGFzdEZvY3VzYWJsZURvbVJlZj1mdW5jdGlvbiBsYXN0Rm9jdXNhYmxlRG9tUmVmKCl7dmFyIGM9dGhpcy5nZXQoMCk7dmFyIGE9ZnVuY3Rpb24oaSl7cmV0dXJuIHEodGhpcykuY3NzKCJ2aXNpYmlsaXR5Iik9PSJoaWRkZW4ifTtpZighY3x8cShjKS5pcygnOmhpZGRlbicpfHxxKGMpLmZpbHRlcihhKS5sZW5ndGg9PTEpe3JldHVybiBudWxsfXZhciBDPWMubGFzdENoaWxkLG89bnVsbDt3aGlsZShDKXtpZihDLm5vZGVUeXBlPT0xJiZxKEMpLmlzKCc6dmlzaWJsZScpKXtpZihDLmNoaWxkTm9kZXMpe289cShDKS5sYXN0Rm9jdXNhYmxlRG9tUmVmKCk7aWYobyl7cmV0dXJuIG99fWlmKHEoQykuaGFzVGFiSW5kZXgoKSl7cmV0dXJuIEN9fUM9Qy5wcmV2aW91c1NpYmxpbmd9cmV0dXJuIG51bGx9O3EuZm4uc2Nyb2xsTGVmdFJUTD1mdW5jdGlvbiBzY3JvbGxMZWZ0UlRMKHApe3ZhciBvPXRoaXMuZ2V0KDApO2lmKG8pe2lmKHA9PT11bmRlZmluZWQpe2lmKCEhRC5icm93c2VyLmludGVybmV0X2V4cGxvcmVyKXtyZXR1cm4gby5zY3JvbGxXaWR0aC1vLnNjcm9sbExlZnQtby5jbGllbnRXaWR0aH1lbHNlIGlmKCEhRC5icm93c2VyLndlYmtpdCl7cmV0dXJuIG8uc2Nyb2xsTGVmdH1lbHNlIGlmKCEhRC5icm93c2VyLmZpcmVmb3gpe3JldHVybiBvLnNjcm9sbFdpZHRoK28uc2Nyb2xsTGVmdC1vLmNsaWVudFdpZHRofWVsc2V7cmV0dXJuIG8uc2Nyb2xsTGVmdH19ZWxzZXtvLnNjcm9sbExlZnQ9cS5zYXAuZGVub3JtYWxpemVTY3JvbGxMZWZ0UlRMKHAsbyk7cmV0dXJuIHRoaXN9fX07DQovKg0KCSAqIFRoZSBmb2xsb3dpbmcgbWV0aG9kcyBhcmUgdGFrZW4gZnJvbSBqUXVlcnkgVUkgY29yZSBidXQgbW9kaWZpZWQuDQoJICoNCgkgKiBqUXVlcnkgVUkgQ29yZQ0KCSAqIGh0dHA6Ly9qcXVlcnl1aS5jb20NCgkgKg0KCSAqIENvcHlyaWdodCAyMDE0IGpRdWVyeSBGb3VuZGF0aW9uIGFuZCBvdGhlciBjb250cmlidXRvcnMNCgkgKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuDQoJICogaHR0cDovL2pxdWVyeS5vcmcvbGljZW5zZQ0KCSAqDQoJICogaHR0cDovL2FwaS5qcXVlcnl1aS5jb20vY2F0ZWdvcnkvdWktY29yZS8NCgkgKi8NCnEuc3VwcG9ydC5zZWxlY3RzdGFydD0ib25zZWxlY3RzdGFydCJpbiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTtxLmZuLmV4dGVuZCh7ZGlzYWJsZVNlbGVjdGlvbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLm9uKChxLnN1cHBvcnQuc2VsZWN0c3RhcnQ/InNlbGVjdHN0YXJ0IjoibW91c2Vkb3duIikrIi5zYXB1aTUtZGlzYWJsZVNlbGVjdGlvbiIsZnVuY3Rpb24oZSl7ZS5wcmV2ZW50RGVmYXVsdCgpfSl9LGVuYWJsZVNlbGVjdGlvbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLm9mZigiLnNhcHVpNS1kaXNhYmxlU2VsZWN0aW9uIil9fSk7cS5mbi5zY3JvbGxSaWdodFJUTD1mdW5jdGlvbiBzY3JvbGxSaWdodFJUTCgpe3ZhciBvPXRoaXMuZ2V0KDApO2lmKG8pe2lmKCEhRC5icm93c2VyLmludGVybmV0X2V4cGxvcmVyKXtyZXR1cm4gby5zY3JvbGxMZWZ0fWVsc2UgaWYoISFELmJyb3dzZXIud2Via2l0KXtyZXR1cm4gby5zY3JvbGxXaWR0aC1vLnNjcm9sbExlZnQtby5jbGllbnRXaWR0aH1lbHNlIGlmKCEhRC5icm93c2VyLmZpcmVmb3gpe3JldHVybigtby5zY3JvbGxMZWZ0KX1lbHNle3JldHVybiBvLnNjcm9sbExlZnR9fX07cS5zYXAuZGVub3JtYWxpemVTY3JvbGxMZWZ0UlRMPWZ1bmN0aW9uKG4sbyl7aWYobyl7aWYoISFELmJyb3dzZXIuaW50ZXJuZXRfZXhwbG9yZXIpe3JldHVybiBvLnNjcm9sbFdpZHRoLW8uY2xpZW50V2lkdGgtbn1lbHNlIGlmKCEhRC5icm93c2VyLndlYmtpdCl7cmV0dXJuIG59ZWxzZSBpZighIUQuYnJvd3Nlci5maXJlZm94KXtyZXR1cm4gby5jbGllbnRXaWR0aCtuLW8uc2Nyb2xsV2lkdGh9ZWxzZXtyZXR1cm4gbn19fTsNCi8qIQ0KCSAqIFRoZSBmb2xsb3dpbmcgZnVuY3Rpb25zIGFyZSB0YWtlbiBmcm9tIGpRdWVyeSBVSSAxLjguMTcgYnV0IG1vZGlmaWVkDQoJICoNCgkgKiBDb3B5cmlnaHQgMjAxMSwgQVVUSE9SUy50eHQgKGh0dHA6Ly9qcXVlcnl1aS5jb20vYWJvdXQpDQoJICogRHVhbCBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIG9yIEdQTCBWZXJzaW9uIDIgbGljZW5zZXMuDQoJICogaHR0cDovL2pxdWVyeS5vcmcvbGljZW5zZQ0KCSAqDQoJICogaHR0cDovL2RvY3MuanF1ZXJ5LmNvbS9VSQ0KCSAqLw0KZnVuY3Rpb24gdihlKXt2YXIgbz1xKGUpLm9mZnNldFBhcmVudCgpO3ZhciBPPWZhbHNlO3ZhciAkPXEoZSkucGFyZW50cygpLmZpbHRlcihmdW5jdGlvbigpe2lmKHRoaXM9PT1vKXtPPXRydWV9cmV0dXJuIE99KTtyZXR1cm4hcShlKS5hZGQoJCkuZmlsdGVyKGZ1bmN0aW9uKCl7cmV0dXJuIHEuY3NzKHRoaXMsInZpc2liaWxpdHkiKT09PSJoaWRkZW4ifHxxLmV4cHIuZmlsdGVycy5oaWRkZW4odGhpcyl9KS5sZW5ndGh9ZnVuY3Rpb24gZihlLGkpe3ZhciBuPWUubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtpZigiYXJlYSI9PT1uKXt2YXIgbT1lLnBhcmVudE5vZGUsYT1tLm5hbWUsYjtpZighZS5ocmVmfHwhYXx8bS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpIT09Im1hcCIpe3JldHVybiBmYWxzZX1iPXEoImltZ1t1c2VtYXA9IyIrYSsiXSIpWzBdO3JldHVybiEhYiYmdihiKX1yZXR1cm4oL2lucHV0fHNlbGVjdHx0ZXh0YXJlYXxidXR0b258b2JqZWN0Ly50ZXN0KG4pPyFlLmRpc2FibGVkOiJhIj09bj9lLmhyZWZ8fGk6aSkmJnYoZSl9aWYoIXEuZXhwclsiOiJdLmZvY3VzYWJsZSl7DQovKiENCgkJICogVGhlIGZvbGxvd2luZyBmdW5jdGlvbiBpcyB0YWtlbiBmcm9tIGpRdWVyeSBVSSAxLjguMTcNCgkJICoNCgkJICogQ29weXJpZ2h0IDIwMTEsIEFVVEhPUlMudHh0IChodHRwOi8vanF1ZXJ5dWkuY29tL2Fib3V0KQ0KCQkgKiBEdWFsIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgb3IgR1BMIFZlcnNpb24gMiBsaWNlbnNlcy4NCgkJICogaHR0cDovL2pxdWVyeS5vcmcvbGljZW5zZQ0KCQkgKg0KCQkgKiBodHRwOi8vZG9jcy5qcXVlcnkuY29tL1VJDQoJCSAqDQoJCSAqIEJ1dCBzaW5jZSB2aXNpYmxlIGlzIG1vZGlmaWVkLCBmb2N1c2FibGUgaXMgZGlmZmVyZW50IHRvbyB0aGUgalF1ZXJ5IFVJIHZlcnNpb24gdG9vLg0KCQkgKi8NCnEuZXh0ZW5kKHEuZXhwclsiOiJdLHtmb2N1c2FibGU6ZnVuY3Rpb24oZSl7cmV0dXJuIGYoZSwhaXNOYU4ocS5hdHRyKGUsInRhYmluZGV4IikpKX19KX1pZighcS5leHByWyI6Il0uc2FwVGFiYmFibGUpew0KLyohDQoJCSAqIFRoZSBmb2xsb3dpbmcgZnVuY3Rpb24gaXMgdGFrZW4gZnJvbQ0KCQkgKiBqUXVlcnkgVUkgQ29yZSAxLjEwLjQNCgkJICogaHR0cDovL2pxdWVyeXVpLmNvbQ0KCQkgKg0KCQkgKiBDb3B5cmlnaHQgMjAxNCBqUXVlcnkgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzDQoJCSAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS4NCgkJICogaHR0cDovL2pxdWVyeS5vcmcvbGljZW5zZQ0KCQkgKg0KCQkgKiBodHRwOi8vYXBpLmpxdWVyeXVpLmNvbS9jYXRlZ29yeS91aS1jb3JlLw0KCQkgKi8NCnEuZXh0ZW5kKHEuZXhwclsiOiJdLHtzYXBUYWJiYWJsZTpmdW5jdGlvbihlKXt2YXIgdD1xLmF0dHIoZSwidGFiaW5kZXgiKSxpPWlzTmFOKHQpO3JldHVybihpfHx0Pj0wKSYmZihlLCFpKX19KX1pZighcS5leHByWyI6Il0uc2FwRm9jdXNhYmxlKXtxLmV4dGVuZChxLmV4cHJbIjoiXSx7c2FwRm9jdXNhYmxlOmZ1bmN0aW9uKGUpe3JldHVybiBmKGUsIWlzTmFOKHEuYXR0cihlLCJ0YWJpbmRleCIpKSl9fSl9aWYoIXEuZm4uekluZGV4KXtxLmZuLnpJbmRleD1mdW5jdGlvbih6KXtpZih6IT09dW5kZWZpbmVkKXtyZXR1cm4gdGhpcy5jc3MoInpJbmRleCIseil9aWYodGhpcy5sZW5ndGgpe3ZhciBlPXEodGhpc1swXSkscCxhO3doaWxlKGUubGVuZ3RoJiZlWzBdIT09ZG9jdW1lbnQpe3A9ZS5jc3MoInBvc2l0aW9uIik7aWYocD09PSJhYnNvbHV0ZSJ8fHA9PT0icmVsYXRpdmUifHxwPT09ImZpeGVkIil7YT1wYXJzZUludChlLmNzcygiekluZGV4IiksMTApO2lmKCFpc05hTihhKSYmYSE9PTApe3JldHVybiBhfX1lPWUucGFyZW50KCl9fXJldHVybiAwfX1xLmZuLnBhcmVudEJ5QXR0cmlidXRlPWZ1bmN0aW9uIHBhcmVudEJ5QXR0cmlidXRlKGEsVil7aWYodGhpcy5sZW5ndGg+MCl7aWYoVil7cmV0dXJuIHRoaXMuZmlyc3QoKS5wYXJlbnRzKCJbIithKyI9JyIrVisiJ10iKS5nZXQoMCl9ZWxzZXtyZXR1cm4gdGhpcy5maXJzdCgpLnBhcmVudHMoIlsiK2ErIl0iKS5nZXQoMCl9fX07cS5zYXAub3duZXJXaW5kb3c9ZnVuY3Rpb24gb3duZXJXaW5kb3cobyl7aWYoby5vd25lckRvY3VtZW50LnBhcmVudFdpbmRvdyl7cmV0dXJuIG8ub3duZXJEb2N1bWVudC5wYXJlbnRXaW5kb3d9cmV0dXJuIG8ub3duZXJEb2N1bWVudC5kZWZhdWx0Vmlld307dmFyIF89e307cS5zYXAuc2Nyb2xsYmFyU2l6ZT1mdW5jdGlvbihjLEYpe2lmKHR5cGVvZiBjPT09ImJvb2xlYW4iKXtGPWM7Yz1udWxsfXZhciBrPWN8fCIjREVGQVVMVCI7aWYoRil7aWYoYyl7ZGVsZXRlIF9bY119ZWxzZXtfPXt9fX1pZihfW2tdKXtyZXR1cm4gX1trXX1pZighZG9jdW1lbnQuYm9keSl7cmV0dXJue3dpZHRoOjAsaGVpZ2h0OjB9fXZhciBhPXEoIjxESVYvPiIpLmNzcygidmlzaWJpbGl0eSIsImhpZGRlbiIpLmNzcygiaGVpZ2h0IiwiMCIpLmNzcygid2lkdGgiLCIwIikuY3NzKCJvdmVyZmxvdyIsImhpZGRlbiIpO2lmKGMpe2EuYWRkQ2xhc3MoYyl9YS5wcmVwZW5kVG8oZG9jdW1lbnQuYm9keSk7dmFyICQ9cSgiPGRpdiBzdHlsZT1cInZpc2liaWxpdHk6dmlzaWJsZTtwb3NpdGlvbjphYnNvbHV0ZTtoZWlnaHQ6MTAwcHg7d2lkdGg6MTAwcHg7b3ZlcmZsb3c6c2Nyb2xsO29wYWNpdHk6MDtcIj48L2Rpdj4iKTthLmFwcGVuZCgkKTt2YXIgbz0kLmdldCgwKTt2YXIgdz1vLm9mZnNldFdpZHRoLW8uc2Nyb2xsV2lkdGg7dmFyIGg9by5vZmZzZXRIZWlnaHQtby5zY3JvbGxIZWlnaHQ7YS5yZW1vdmUoKTtpZih3PT09MHx8aD09PTApe3JldHVybnt3aWR0aDp3LGhlaWdodDpofX1fW2tdPXt3aWR0aDp3LGhlaWdodDpofTtyZXR1cm4gX1trXX07cS5zYXAuc3luY1N0eWxlQ2xhc3M9ZnVuY3Rpb24ocyxTLGEpe2lmKCFzKXJldHVybiBhO2lmKFMgaW5zdGFuY2VvZiBzYXAudWkuY29yZS5Db250cm9sKXtTPVMuJCgpfWVsc2UgaWYodHlwZW9mIFM9PT0ic3RyaW5nIil7Uz1xLnNhcC5ieUlkKFMpfWVsc2UgaWYoIShTIGluc3RhbmNlb2YgcSkpe3JldHVybiBhfXZhciBjPSEhUy5jbG9zZXN0KCIuIitzKS5sZW5ndGg7aWYoYSBpbnN0YW5jZW9mIHEpe2EudG9nZ2xlQ2xhc3MocyxjKX1lbHNlIGlmKGEgaW5zdGFuY2VvZiBzYXAudWkuY29yZS5Db250cm9sKXthLnRvZ2dsZVN0eWxlQ2xhc3MocyxjKX1lbHNle31yZXR1cm4gYX07cmV0dXJuIHF9LGZhbHNlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnanF1ZXJ5LnNhcC5lbmNvZGVyJykpew0KLyohDQogKiBTQVAgVUkgZGV2ZWxvcG1lbnQgdG9vbGtpdCBmb3IgSFRNTDUgKFNBUFVJNS9PcGVuVUk1KQ0KICogKGMpIENvcHlyaWdodCAyMDA5LTIwMTQgU0FQIFNFIG9yIGFuIFNBUCBhZmZpbGlhdGUgY29tcGFueS4gDQogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wIC0gc2VlIExJQ0VOU0UudHh0Lg0KICovDQpqUXVlcnkuc2FwLmRlY2xhcmUoJ2pxdWVyeS5zYXAuZW5jb2RlcicpO3NhcC51aS5kZWZpbmUoImpxdWVyeS5zYXAuZW5jb2RlciIsWydqcXVlcnkuc2FwLmdsb2JhbCddLGZ1bmN0aW9uKHEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBoKGksbCl7dmFyIGc9aS50b1N0cmluZygxNik7aWYobCl7d2hpbGUobD5nLmxlbmd0aCl7Zz0iMCIrZ319cmV0dXJuIGd9dmFyIHI9L1tceDAwLVx4MmJceDJmXHgzYS1ceDQwXHg1Yi1ceDVlXHg2MFx4N2ItXHhmZlx1MjAyOFx1MjAyOV0vZyxhPS9bXHgwMC1ceDA4XHgwYlx4MGNceDBlLVx4MWZceDdmLVx4OWZdLyxIPXsiPCI6IiZsdDsiLCI+IjoiJmd0OyIsIiYiOiImYW1wOyIsIlwiIjoiJnF1b3Q7In07dmFyIGY9ZnVuY3Rpb24oZyl7dmFyIEU9SFtnXTtpZighRSl7aWYoYS50ZXN0KGcpKXtFPSImI3hmZmZkOyJ9ZWxzZXtFPSImI3giK2goZy5jaGFyQ29kZUF0KDApKSsiOyJ9SFtnXT1FfXJldHVybiBFfTtxLnNhcC5lbmNvZGVIVE1MPWZ1bmN0aW9uKFMpe3JldHVybiBTLnJlcGxhY2UocixmKX07cS5zYXAuZW5jb2RlWE1MPWZ1bmN0aW9uKFMpe3JldHVybiBTLnJlcGxhY2UocixmKX07cS5zYXAuZXNjYXBlSFRNTD1mdW5jdGlvbihTKXtyZXR1cm4gUy5yZXBsYWNlKHIsZil9O3ZhciBiPS9bXHgwMC1ceDJiXHgyZFx4MmZceDNhLVx4NDBceDViLVx4NWVceDYwXHg3Yi1ceGZmXHUyMDI4XHUyMDI5XS9nLGo9e307dmFyIEo9ZnVuY3Rpb24oZyl7dmFyIEU9altnXTtpZighRSl7dmFyIGk9Zy5jaGFyQ29kZUF0KDApO2lmKGk8MjU2KXtFPSJcXHgiK2goaSwyKX1lbHNle0U9IlxcdSIraChpLDQpfWpbZ109RX1yZXR1cm4gRX07cS5zYXAuZW5jb2RlSlM9ZnVuY3Rpb24oUyl7cmV0dXJuIFMucmVwbGFjZShiLEopfTtxLnNhcC5lc2NhcGVKUz1mdW5jdGlvbihTKXtyZXR1cm4gUy5yZXBsYWNlKGIsSil9O3ZhciBjPS9bXHgwMC1ceDJjXHgyZlx4M2EtXHg0MFx4NWItXHg1ZVx4NjBceDdiLVx1ZmZmZl0vZyx1PXt9O3ZhciBVPWZ1bmN0aW9uKGcpe3ZhciBFPXVbZ107aWYoIUUpe3ZhciBpPWcuY2hhckNvZGVBdCgwKTtpZihpPDEyOCl7RT0iJSIraChpLDIpfWVsc2UgaWYoaTwyMDQ4KXtFPSIlIitoKChpPj42KXwxOTIsMikrIiUiK2goKGkmNjMpfDEyOCwyKX1lbHNle0U9IiUiK2goKGk+PjEyKXwyMjQsMikrIiUiK2goKChpPj42KSY2Myl8MTI4LDIpKyIlIitoKChpJjYzKXwxMjgsMil9dVtnXT1FfXJldHVybiBFfTtxLnNhcC5lbmNvZGVVUkw9ZnVuY3Rpb24oUyl7cmV0dXJuIFMucmVwbGFjZShjLFUpfTtxLnNhcC5lbmNvZGVVUkxQYXJhbWV0ZXJzPWZ1bmN0aW9uKHApe2lmKCFwKXtyZXR1cm4iIn12YXIgZz1bXTtxLmVhY2gocCxmdW5jdGlvbihuLHYpe2lmKHEudHlwZSh2KT09PSJzdHJpbmciKXt2PXEuc2FwLmVuY29kZVVSTCh2KX1nLnB1c2gocS5zYXAuZW5jb2RlVVJMKG4pKyI9Iit2KX0pO3JldHVybiBnLmpvaW4oIiYiKX07dmFyIGQ9L1tceDAwLVx4MmZceDNhLVx4NDBceDViLVx4NjBceDdiLVx4ZmZcdTIwMjhcdTIwMjldWzAtOUEtRmEtZl0/L2c7dmFyIEM9ZnVuY3Rpb24oZyl7dmFyIGk9Zy5jaGFyQ29kZUF0KDApO2lmKGcubGVuZ3RoPT0xKXtyZXR1cm4iXFwiK2goaSl9ZWxzZXtyZXR1cm4iXFwiK2goaSkrIiAiK2cuc3Vic3RyKDEpfX07cS5zYXAuZW5jb2RlQ1NTPWZ1bmN0aW9uKFMpe3JldHVybiBTLnJlcGxhY2UoZCxDKX07ZnVuY3Rpb24gVyhwLGcsaSxrKXtpZihwKXt0aGlzLnByb3RvY29sPXAudG9VcHBlckNhc2UoKX1pZihnKXt0aGlzLmhvc3Q9Zy50b1VwcGVyQ2FzZSgpfXRoaXMucG9ydD1pO3RoaXMucGF0aD1rfXZhciB3PW5ldyBBcnJheSgpO3Euc2FwLmNsZWFyVXJsV2hpdGVsaXN0PWZ1bmN0aW9uKCl7dy5zcGxpY2UoMCx3Lmxlbmd0aCl9O3Euc2FwLmFkZFVybFdoaXRlbGlzdD1mdW5jdGlvbihwLGcsaSxrKXt2YXIgRT1uZXcgVyhwLGcsaSxrKTt2YXIgST13Lmxlbmd0aDt3W0ldPUV9O3Euc2FwLnJlbW92ZVVybFdoaXRlbGlzdD1mdW5jdGlvbihpKXt3LnNwbGljZShpLDEpfTtxLnNhcC5nZXRVcmxXaGl0ZWxpc3Q9ZnVuY3Rpb24oKXtyZXR1cm4gdy5zbGljZSgpfTtxLnNhcC52YWxpZGF0ZVVybD1mdW5jdGlvbihnKXt2YXIgaz0vKD86KFteOlwvPyNdKyk6KT8oPzpcL1wvKFteXC8/IzpdKikoPzo6KFswLTldKykpPyk/KFtePyNdKikoPzpcPyhbXiNdKikpPyg/OiMoLiopKT8vLmV4ZWMoZyk7aWYoIWspe3JldHVybiBrfXZhciBwPWtbMV0sbD1rWzJdLFA9a1szXSxtPWtbNF0sUT1rWzVdLG49a1s2XTt2YXIgbz0vW1x4MDAtXHgyNFx4MjYtXHgyOVx4MmJceDJjXHgyZlx4M2EtXHg0MFx4NWItXHg1ZVx4NjBceDdiLVx4N2RceDdmLVx1ZmZmZl0vO3ZhciB0PS9bYS16MC05ISMkJSYnKitcLz0/Xl9ge3x9fi1dKyg/OlwuW2EtejAtOSEjJCUmJyorXC89P15fYHt8fX4tXSspKkAoPzpbYS16MC05XSg/OlthLXowLTktXSpbYS16MC05XSk/XC4pK1thLXowLTldKD86W2EtejAtOS1dKlthLXowLTldKT8vO2lmKHApe3A9cC50b1VwcGVyQ2FzZSgpO2lmKHcubGVuZ3RoPD0wKXtpZighL14oaHR0cHM/fGZ0cCkvaS50ZXN0KHApKXtyZXR1cm4gZmFsc2V9fX1pZihsKXtsPWwudG9VcHBlckNhc2UoKX1pZihtKXtpZihwPT09Ik1BSUxUTyIpe3ZhciB2PXQudGVzdChtKTtpZighdil7cmV0dXJuIGZhbHNlfX1lbHNle3ZhciB4PW0uc3BsaXQoIi8iKTtmb3IodmFyIGk9MDtpPHgubGVuZ3RoO2krKyl7dmFyIHY9by50ZXN0KHhbaV0pO2lmKHYpe3JldHVybiBmYWxzZX19fX1pZihRKXt2YXIgeD1RLnNwbGl0KCImIik7Zm9yKHZhciBpPTA7aTx4Lmxlbmd0aDtpKyspe3ZhciB5PXhbaV0uc2VhcmNoKCI9Iik7aWYoeSE9LTEpe3ZhciB6PXhbaV0uc3Vic3RyaW5nKDAseSk7dmFyIEE9eFtpXS5zdWJzdHJpbmcoeSsxKTt2YXIgQj1vLnRlc3Qoeik7dmFyIEQ9by50ZXN0KEEpO2lmKEJ8fEQpe3JldHVybiBmYWxzZX19fX1pZihuKXtpZihvLnRlc3Qobikpe3JldHVybiBmYWxzZX19aWYody5sZW5ndGg+MCl7dmFyIEY9ZmFsc2U7Zm9yKHZhciBpPTA7aTx3Lmxlbmd0aDtpKyspe2lmKCFwfHwhd1tpXS5wcm90b2NvbHx8cD09d1tpXS5wcm90b2NvbCl7dmFyIE89ZmFsc2U7aWYobCYmd1tpXS5ob3N0JiYvXlwqLy50ZXN0KHdbaV0uaG9zdCkpe3ZhciBFPXdbaV0uaG9zdC5zbGljZSgxKS5yZXBsYWNlKC9bLVtcXXt9KCkqKz8uLFxcXiR8I1xzXS9nLCJcXCQmIik7dmFyIEc9UmVnRXhwKEUrIiQiKTtpZihHLnRlc3QobCkpe089dHJ1ZX19ZWxzZSBpZighbHx8IXdbaV0uaG9zdHx8bD09d1tpXS5ob3N0KXtPPXRydWV9aWYoTyl7aWYoKCFsJiYhUCl8fCF3W2ldLnBvcnR8fFA9PXdbaV0ucG9ydCl7aWYod1tpXS5wYXRoJiYvXCokLy50ZXN0KHdbaV0ucGF0aCkpe3ZhciBJPXdbaV0ucGF0aC5zbGljZSgwLC0xKS5yZXBsYWNlKC9bLVtcXXt9KCkqKz8uLFxcXiR8I1xzXS9nLCJcXCQmIik7dmFyIEc9UmVnRXhwKCJeIitJKTtpZihHLnRlc3QobSkpe0Y9dHJ1ZX19ZWxzZSBpZighd1tpXS5wYXRofHxtPT13W2ldLnBhdGgpe0Y9dHJ1ZX19fX1pZihGKXticmVha319aWYoIUYpe3JldHVybiBmYWxzZX19cmV0dXJuIHRydWV9O3Euc2FwLl9zYW5pdGl6ZUhUTUw9ZnVuY3Rpb24oZyxvKXtyZXR1cm4gcyhnLG98fHt1cmlSZXdyaXRlcjpmdW5jdGlvbihpKXtpZihxLnNhcC52YWxpZGF0ZVVybChpKSl7cmV0dXJuIGl9fX0pfTtxLnNhcC5fc2V0SFRNTFNhbml0aXplcj1mdW5jdGlvbihzKXtzPXN8fGV9O2Z1bmN0aW9uIGUoZyxvKXtpZighd2luZG93Lmh0bWx8fCF3aW5kb3cuaHRtbC5zYW5pdGl6ZSl7cS5zYXAucmVxdWlyZSgic2FwLnVpLnRoaXJkcGFydHkuY2FqYS1odG1sLXNhbml0aXplciIpO312YXIgdD1vLnRhZ1BvbGljeXx8d2luZG93Lmh0bWwubWFrZVRhZ1BvbGljeShvLnVyaVJld3JpdGVyLG8udG9rZW5Qb2xpY3kpO3JldHVybiB3aW5kb3cuaHRtbC5zYW5pdGl6ZVdpdGhQb2xpY3koZyx0KX12YXIgcz1lO3JldHVybiBxfSxmYWxzZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ2pxdWVyeS5zYXAuZXZlbnRzJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnanF1ZXJ5LnNhcC5ldmVudHMnKTtzYXAudWkuZGVmaW5lKCJqcXVlcnkuc2FwLmV2ZW50cyIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ2pxdWVyeS5zYXAua2V5Y29kZXMnXSxmdW5jdGlvbihxKXsidXNlIHN0cmljdCI7cS5zYXAuX3RvdWNoVG9Nb3VzZUV2ZW50PXRydWU7dmFyIG8sYSxiLGMsZCxtLEk9ZmFsc2U7aWYoc2FwLnVpLkRldmljZS5icm93c2VyLndlYmtpdCYmL01vYmlsZS8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSYmc2FwLnVpLkRldmljZS5zdXBwb3J0LnRvdWNoKXtJPXRydWU7dmFyIHM9KGZ1bmN0aW9uKCl7dmFyIGU9d2luZG93LmRvY3VtZW50LEg9ZmFsc2UsdD1udWxsLGo9ZmFsc2Uscix1LGk9MDttPVsibW91c2Vkb3duIiwibW91c2VvdmVyIiwibW91c2V1cCIsIm1vdXNlb3V0IiwiY2xpY2siXTt2YXIgdj1mdW5jdGlvbihULEUpe2lmKCFIKXtyZXR1cm59dmFyIE09RS50eXBlPT0idG91Y2hlbmQiP0UuY2hhbmdlZFRvdWNoZXNbMF06RS50b3VjaGVzWzBdO3ZhciB4PWUuY3JlYXRlRXZlbnQoJ01vdXNlRXZlbnQnKTt4LmluaXRNb3VzZUV2ZW50KFQsdHJ1ZSx0cnVlLHdpbmRvdyxFLmRldGFpbCxNLnNjcmVlblgsTS5zY3JlZW5ZLE0uY2xpZW50WCxNLmNsaWVudFksRS5jdHJsS2V5LEUuc2hpZnRLZXksRS5hbHRLZXksRS5tZXRhS2V5LEUuYnV0dG9uLEUucmVsYXRlZFRhcmdldCk7eC5pc1N5bnRoZXRpYz10cnVlO3dpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dC5kaXNwYXRjaEV2ZW50KHgpfSwwKX07dmFyIHc9ZnVuY3Rpb24oRSl7cmV0dXJuIEUudGFyZ2V0LnRhZ05hbWUubWF0Y2goL2lucHV0fHRleHRhcmVhfHNlbGVjdC9pKX07ZD1mdW5jdGlvbihFKXtpZighRS5pc1N5bnRoZXRpYyYmIXcoRSkpe0Uuc3RvcFByb3BhZ2F0aW9uKCk7RS5wcmV2ZW50RGVmYXVsdCgpfX07bz1mdW5jdGlvbihFKXt2YXIgVD1FLnRvdWNoZXMseDtIPShULmxlbmd0aD09MSYmIXcoRSkpO2o9ZmFsc2U7aWYoSCl7eD1UWzBdO3Q9eC50YXJnZXQ7aWYodC5ub2RlVHlwZT09PTMpe3Q9dC5wYXJlbnROb2RlfXI9eC5jbGllbnRYO3U9eC5jbGllbnRZO3YoIm1vdXNlZG93biIsRSl9fTthPWZ1bmN0aW9uKEUpe3ZhciBUO2lmKEgpe1Q9RS50b3VjaGVzWzBdO2lmKE1hdGguYWJzKFQuY2xpZW50WC1yKT4xMHx8TWF0aC5hYnMoVC5jbGllbnRZLXUpPjEwKXtqPXRydWV9aWYoail7digibW91c2Vtb3ZlIixFKX19fTtiPWZ1bmN0aW9uKEUpe3YoIm1vdXNldXAiLEUpO2lmKCFqKXt2KCJjbGljayIsRSl9fTtjPWZ1bmN0aW9uKEUpe3YoIm1vdXNldXAiLEUpfTtmb3IoO2k8bS5sZW5ndGg7aSsrKXtlLmFkZEV2ZW50TGlzdGVuZXIobVtpXSxkLHRydWUpfWUuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsbyx0cnVlKTtlLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsYSx0cnVlKTtlLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJyxiLHRydWUpO2UuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hjYW5jZWwnLGMsdHJ1ZSl9KCkpfXEuc2FwLmRpc2FibGVUb3VjaFRvTW91c2VIYW5kbGluZz1mdW5jdGlvbigpe3ZhciBpPTA7aWYoIUkpe3JldHVybn1kb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JyxvLHRydWUpO2RvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsYSx0cnVlKTtkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsYix0cnVlKTtkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaGNhbmNlbCcsYyx0cnVlKTtmb3IoO2k8bS5sZW5ndGg7aSsrKXtkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKG1baV0sZCx0cnVlKX19O3Euc2FwLkNvbnRyb2xFdmVudHM9WyJjbGljayIsImRibGNsaWNrIiwiY29udGV4dG1lbnUiLCJmb2N1c2luIiwiZm9jdXNvdXQiLCJrZXlkb3duIiwia2V5cHJlc3MiLCJrZXl1cCIsIm1vdXNlZG93biIsIm1vdXNlb3V0IiwibW91c2VvdmVyIiwibW91c2V1cCIsInNlbGVjdCIsInNlbGVjdHN0YXJ0IiwiZHJhZ3N0YXJ0IiwiZHJhZ2VudGVyIiwiZHJhZ292ZXIiLCJkcmFnbGVhdmUiLCJkcmFnZW5kIiwiZHJvcCIsInBhc3RlIiwiY3V0IiwiaW5wdXQiXTtpZihzYXAudWkuRGV2aWNlLnN1cHBvcnQudG91Y2gpe3Euc2FwLkNvbnRyb2xFdmVudHMucHVzaCgidG91Y2hzdGFydCIsInRvdWNoZW5kIiwidG91Y2htb3ZlIiwidG91Y2hjYW5jZWwiKX1xLnNhcC5Qc2V1ZG9FdmVudHM9e3NhcGRvd246e3NOYW1lOiJzYXBkb3duIixhVHlwZXM6WyJrZXlkb3duIl0sZm5DaGVjazpmdW5jdGlvbihlKXtyZXR1cm4gZS5rZXlDb2RlPT1xLnNhcC5LZXlDb2Rlcy5BUlJPV19ET1dOJiYhayhlKX19LHNhcGRvd25tb2RpZmllcnM6e3NOYW1lOiJzYXBkb3dubW9kaWZpZXJzIixhVHlwZXM6WyJrZXlkb3duIl0sZm5DaGVjazpmdW5jdGlvbihlKXtyZXR1cm4gZS5rZXlDb2RlPT1xLnNhcC5LZXlDb2Rlcy5BUlJPV19ET1dOJiZrKGUpfX0sc2Fwc2hvdzp7c05hbWU6InNhcHNob3ciLGFUeXBlczpbImtleWRvd24iXSxmbkNoZWNrOmZ1bmN0aW9uKGUpe3JldHVybihlLmtleUNvZGU9PXEuc2FwLktleUNvZGVzLkY0JiYhayhlKSl8fChlLmtleUNvZGU9PXEuc2FwLktleUNvZGVzLkFSUk9XX0RPV04mJmgoZSxmYWxzZSx0cnVlLGZhbHNlKSl9fSxzYXB1cDp7c05hbWU6InNhcHVwIixhVHlwZXM6WyJrZXlkb3duIl0sZm5DaGVjazpmdW5jdGlvbihlKXtyZXR1cm4gZS5rZXlDb2RlPT1xLnNhcC5LZXlDb2Rlcy5BUlJPV19VUCYmIWsoZSl9fSxzYXB1cG1vZGlmaWVyczp7c05hbWU6InNhcHVwbW9kaWZpZXJzIixhVHlwZXM6WyJrZXlkb3duIl0sZm5DaGVjazpmdW5jdGlvbihlKXtyZXR1cm4gZS5rZXlDb2RlPT1xLnNhcC5LZXlDb2Rlcy5BUlJPV19VUCYmayhlKX19LHNhcGhpZGU6e3NOYW1lOiJzYXBoaWRlIixhVHlwZXM6WyJrZXlkb3duIl0sZm5DaGVjazpmdW5jdGlvbihlKXtyZXR1cm4gZS5rZXlDb2RlPT1xLnNhcC5LZXlDb2Rlcy5BUlJPV19VUCYmaChlLGZhbHNlLHRydWUsZmFsc2UpfX0sc2FwbGVmdDp7c05hbWU6InNhcGxlZnQiLGFUeXBlczpbImtleWRvd24iXSxmbkNoZWNrOmZ1bmN0aW9uKGUpe3JldHVybiBlLmtleUNvZGU9PXEuc2FwLktleUNvZGVzLkFSUk9XX0xFRlQmJiFrKGUpfX0sc2FwbGVmdG1vZGlmaWVyczp7c05hbWU6InNhcGxlZnRtb2RpZmllcnMiLGFUeXBlczpbImtleWRvd24iXSxmbkNoZWNrOmZ1bmN0aW9uKGUpe3JldHVybiBlLmtleUNvZGU9PXEuc2FwLktleUNvZGVzLkFSUk9XX0xFRlQmJmsoZSl9fSxzYXByaWdodDp7c05hbWU6InNhcHJpZ2h0IixhVHlwZXM6WyJrZXlkb3duIl0sZm5DaGVjazpmdW5jdGlvbihlKXtyZXR1cm4gZS5rZXlDb2RlPT1xLnNhcC5LZXlDb2Rlcy5BUlJPV19SSUdIVCYmIWsoZSl9fSxzYXByaWdodG1vZGlmaWVyczp7c05hbWU6InNhcHJpZ2h0bW9kaWZpZXJzIixhVHlwZXM6WyJrZXlkb3duIl0sZm5DaGVjazpmdW5jdGlvbihlKXtyZXR1cm4gZS5rZXlDb2RlPT1xLnNhcC5LZXlDb2Rlcy5BUlJPV19SSUdIVCYmayhlKX19LHNhcGhvbWU6e3NOYW1lOiJzYXBob21lIixhVHlwZXM6WyJrZXlkb3duIl0sZm5DaGVjazpmdW5jdGlvbihlKXtyZXR1cm4gZS5rZXlDb2RlPT1xLnNhcC5LZXlDb2Rlcy5IT01FJiYhayhlKX19LHNhcGhvbWVtb2RpZmllcnM6e3NOYW1lOiJzYXBob21lbW9kaWZpZXJzIixhVHlwZXM6WyJrZXlkb3duIl0sZm5DaGVjazpmdW5jdGlvbihlKXtyZXR1cm4gZS5rZXlDb2RlPT1xLnNhcC5LZXlDb2Rlcy5IT01FJiZrKGUpfX0sc2FwdG9wOntzTmFtZToic2FwdG9wIixhVHlwZXM6WyJrZXlkb3duIl0sZm5DaGVjazpmdW5jdGlvbihlKXtyZXR1cm4gZS5rZXlDb2RlPT1xLnNhcC5LZXlDb2Rlcy5IT01FJiZoKGUsdHJ1ZSxmYWxzZSxmYWxzZSl9fSxzYXBlbmQ6e3NOYW1lOiJzYXBlbmQiLGFUeXBlczpbImtleWRvd24iXSxmbkNoZWNrOmZ1bmN0aW9uKGUpe3JldHVybiBlLmtleUNvZGU9PXEuc2FwLktleUNvZGVzLkVORCYmIWsoZSl9fSxzYXBlbmRtb2RpZmllcnM6e3NOYW1lOiJzYXBlbmRtb2RpZmllcnMiLGFUeXBlczpbImtleWRvd24iXSxmbkNoZWNrOmZ1bmN0aW9uKGUpe3JldHVybiBlLmtleUNvZGU9PXEuc2FwLktleUNvZGVzLkVORCYmayhlKX19LHNhcGJvdHRvbTp7c05hbWU6InNhcGJvdHRvbSIsYVR5cGVzOlsia2V5ZG93biJdLGZuQ2hlY2s6ZnVuY3Rpb24oZSl7cmV0dXJuIGUua2V5Q29kZT09cS5zYXAuS2V5Q29kZXMuRU5EJiZoKGUsdHJ1ZSxmYWxzZSxmYWxzZSl9fSxzYXBwYWdldXA6e3NOYW1lOiJzYXBwYWdldXAiLGFUeXBlczpbImtleWRvd24iXSxmbkNoZWNrOmZ1bmN0aW9uKGUpe3JldHVybiBlLmtleUNvZGU9PXEuc2FwLktleUNvZGVzLlBBR0VfVVAmJiFrKGUpfX0sc2FwcGFnZXVwbW9kaWZpZXJzOntzTmFtZToic2FwcGFnZXVwbW9kaWZpZXJzIixhVHlwZXM6WyJrZXlkb3duIl0sZm5DaGVjazpmdW5jdGlvbihlKXtyZXR1cm4gZS5rZXlDb2RlPT1xLnNhcC5LZXlDb2Rlcy5QQUdFX1VQJiZrKGUpfX0sc2FwcGFnZWRvd246e3NOYW1lOiJzYXBwYWdlZG93biIsYVR5cGVzOlsia2V5ZG93biJdLGZuQ2hlY2s6ZnVuY3Rpb24oZSl7cmV0dXJuIGUua2V5Q29kZT09cS5zYXAuS2V5Q29kZXMuUEFHRV9ET1dOJiYhayhlKX19LHNhcHBhZ2Vkb3dubW9kaWZpZXJzOntzTmFtZToic2FwcGFnZWRvd25tb2RpZmllcnMiLGFUeXBlczpbImtleWRvd24iXSxmbkNoZWNrOmZ1bmN0aW9uKGUpe3JldHVybiBlLmtleUNvZGU9PXEuc2FwLktleUNvZGVzLlBBR0VfRE9XTiYmayhlKX19LHNhcHNlbGVjdDp7c05hbWU6InNhcHNlbGVjdCIsYVR5cGVzOlsia2V5ZG93biJdLGZuQ2hlY2s6ZnVuY3Rpb24oZSl7cmV0dXJuKGUua2V5Q29kZT09cS5zYXAuS2V5Q29kZXMuRU5URVJ8fGUua2V5Q29kZT09cS5zYXAuS2V5Q29kZXMuU1BBQ0UpJiYhayhlKX19LHNhcHNlbGVjdG1vZGlmaWVyczp7c05hbWU6InNhcHNlbGVjdG1vZGlmaWVycyIsYVR5cGVzOlsia2V5ZG93biJdLGZuQ2hlY2s6ZnVuY3Rpb24oZSl7cmV0dXJuKGUua2V5Q29kZT09cS5zYXAuS2V5Q29kZXMuRU5URVJ8fGUua2V5Q29kZT09cS5zYXAuS2V5Q29kZXMuU1BBQ0UpJiZrKGUpfX0sc2Fwc3BhY2U6e3NOYW1lOiJzYXBzcGFjZSIsYVR5cGVzOlsia2V5ZG93biJdLGZuQ2hlY2s6ZnVuY3Rpb24oZSl7cmV0dXJuIGUua2V5Q29kZT09cS5zYXAuS2V5Q29kZXMuU1BBQ0UmJiFrKGUpfX0sc2Fwc3BhY2Vtb2RpZmllcnM6e3NOYW1lOiJzYXBzcGFjZW1vZGlmaWVycyIsYVR5cGVzOlsia2V5ZG93biJdLGZuQ2hlY2s6ZnVuY3Rpb24oZSl7cmV0dXJuIGUua2V5Q29kZT09cS5zYXAuS2V5Q29kZXMuU1BBQ0UmJmsoZSl9fSxzYXBlbnRlcjp7c05hbWU6InNhcGVudGVyIixhVHlwZXM6WyJrZXlkb3duIl0sZm5DaGVjazpmdW5jdGlvbihlKXtyZXR1cm4gZS5rZXlDb2RlPT1xLnNhcC5LZXlDb2Rlcy5FTlRFUiYmIWsoZSl9fSxzYXBlbnRlcm1vZGlmaWVyczp7c05hbWU6InNhcGVudGVybW9kaWZpZXJzIixhVHlwZXM6WyJrZXlkb3duIl0sZm5DaGVjazpmdW5jdGlvbihlKXtyZXR1cm4gZS5rZXlDb2RlPT1xLnNhcC5LZXlDb2Rlcy5FTlRFUiYmayhlKX19LHNhcGJhY2tzcGFjZTp7c05hbWU6InNhcGJhY2tzcGFjZSIsYVR5cGVzOlsia2V5ZG93biJdLGZuQ2hlY2s6ZnVuY3Rpb24oZSl7cmV0dXJuIGUua2V5Q29kZT09cS5zYXAuS2V5Q29kZXMuQkFDS1NQQUNFJiYhayhlKX19LHNhcGJhY2tzcGFjZW1vZGlmaWVyczp7c05hbWU6InNhcGJhY2tzcGFjZW1vZGlmaWVycyIsYVR5cGVzOlsia2V5ZG93biJdLGZuQ2hlY2s6ZnVuY3Rpb24oZSl7cmV0dXJuIGUua2V5Q29kZT09cS5zYXAuS2V5Q29kZXMuQkFDS1NQQUNFJiZrKGUpfX0sc2FwZGVsZXRlOntzTmFtZToic2FwZGVsZXRlIixhVHlwZXM6WyJrZXlkb3duIl0sZm5DaGVjazpmdW5jdGlvbihlKXtyZXR1cm4gZS5rZXlDb2RlPT1xLnNhcC5LZXlDb2Rlcy5ERUxFVEUmJiFrKGUpfX0sc2FwZGVsZXRlbW9kaWZpZXJzOntzTmFtZToic2FwZGVsZXRlbW9kaWZpZXJzIixhVHlwZXM6WyJrZXlkb3duIl0sZm5DaGVjazpmdW5jdGlvbihlKXtyZXR1cm4gZS5rZXlDb2RlPT1xLnNhcC5LZXlDb2Rlcy5ERUxFVEUmJmsoZSl9fSxzYXBleHBhbmQ6e3NOYW1lOiJzYXBleHBhbmQiLGFUeXBlczpbImtleWRvd24iXSxmbkNoZWNrOmZ1bmN0aW9uKGUpe3JldHVybiBlLmtleUNvZGU9PXEuc2FwLktleUNvZGVzLk5VTVBBRF9QTFVTJiYhayhlKX19LHNhcGV4cGFuZG1vZGlmaWVyczp7c05hbWU6InNhcGV4cGFuZG1vZGlmaWVycyIsYVR5cGVzOlsia2V5ZG93biJdLGZuQ2hlY2s6ZnVuY3Rpb24oZSl7cmV0dXJuIGUua2V5Q29kZT09cS5zYXAuS2V5Q29kZXMuTlVNUEFEX1BMVVMmJmsoZSl9fSxzYXBjb2xsYXBzZTp7c05hbWU6InNhcGNvbGxhcHNlIixhVHlwZXM6WyJrZXlkb3duIl0sZm5DaGVjazpmdW5jdGlvbihlKXtyZXR1cm4gZS5rZXlDb2RlPT1xLnNhcC5LZXlDb2Rlcy5OVU1QQURfTUlOVVMmJiFrKGUpfX0sc2FwY29sbGFwc2Vtb2RpZmllcnM6e3NOYW1lOiJzYXBjb2xsYXBzZW1vZGlmaWVycyIsYVR5cGVzOlsia2V5ZG93biJdLGZuQ2hlY2s6ZnVuY3Rpb24oZSl7cmV0dXJuIGUua2V5Q29kZT09cS5zYXAuS2V5Q29kZXMuTlVNUEFEX01JTlVTJiZrKGUpfX0sc2FwY29sbGFwc2VhbGw6e3NOYW1lOiJzYXBjb2xsYXBzZWFsbCIsYVR5cGVzOlsia2V5ZG93biJdLGZuQ2hlY2s6ZnVuY3Rpb24oZSl7cmV0dXJuIGUua2V5Q29kZT09cS5zYXAuS2V5Q29kZXMuTlVNUEFEX0FTVEVSSVNLJiYhayhlKX19LHNhcGVzY2FwZTp7c05hbWU6InNhcGVzY2FwZSIsYVR5cGVzOlsia2V5ZG93biJdLGZuQ2hlY2s6ZnVuY3Rpb24oZSl7cmV0dXJuIGUua2V5Q29kZT09cS5zYXAuS2V5Q29kZXMuRVNDQVBFJiYhayhlKX19LHNhcHRhYm5leHQ6e3NOYW1lOiJzYXB0YWJuZXh0IixhVHlwZXM6WyJrZXlkb3duIl0sZm5DaGVjazpmdW5jdGlvbihlKXtyZXR1cm4gZS5rZXlDb2RlPT1xLnNhcC5LZXlDb2Rlcy5UQUImJiFrKGUpfX0sc2FwdGFicHJldmlvdXM6e3NOYW1lOiJzYXB0YWJwcmV2aW91cyIsYVR5cGVzOlsia2V5ZG93biJdLGZuQ2hlY2s6ZnVuY3Rpb24oZSl7cmV0dXJuIGUua2V5Q29kZT09cS5zYXAuS2V5Q29kZXMuVEFCJiZoKGUsZmFsc2UsZmFsc2UsdHJ1ZSl9fSxzYXBza2lwZm9yd2FyZDp7c05hbWU6InNhcHNraXBmb3J3YXJkIixhVHlwZXM6WyJrZXlkb3duIl0sZm5DaGVjazpmdW5jdGlvbihlKXtyZXR1cm4gZS5rZXlDb2RlPT1xLnNhcC5LZXlDb2Rlcy5GNiYmIWsoZSl9fSxzYXBza2lwYmFjazp7c05hbWU6InNhcHNraXBiYWNrIixhVHlwZXM6WyJrZXlkb3duIl0sZm5DaGVjazpmdW5jdGlvbihlKXtyZXR1cm4gZS5rZXlDb2RlPT1xLnNhcC5LZXlDb2Rlcy5GNiYmaChlLGZhbHNlLGZhbHNlLHRydWUpfX0sc2FwZGVjcmVhc2U6e3NOYW1lOiJzYXBkZWNyZWFzZSIsYVR5cGVzOlsia2V5ZG93biJdLGZuQ2hlY2s6ZnVuY3Rpb24oZSl7dmFyIHI9c2FwLnVpLmdldENvcmUoKS5nZXRDb25maWd1cmF0aW9uKCkuZ2V0UlRMKCk7dmFyIGk9cj9xLnNhcC5LZXlDb2Rlcy5BUlJPV19SSUdIVDpxLnNhcC5LZXlDb2Rlcy5BUlJPV19MRUZUO3JldHVybihlLmtleUNvZGU9PWl8fGUua2V5Q29kZT09cS5zYXAuS2V5Q29kZXMuQVJST1dfRE9XTikmJiFrKGUpfX0sc2FwZGVjcmVhc2Vtb2RpZmllcnM6e3NOYW1lOiJzYXBkZWNyZWFzZW1vZGlmaWVycyIsYVR5cGVzOlsia2V5ZG93biJdLGZuQ2hlY2s6ZnVuY3Rpb24oZSl7dmFyIHI9c2FwLnVpLmdldENvcmUoKS5nZXRDb25maWd1cmF0aW9uKCkuZ2V0UlRMKCk7dmFyIGk9cj9xLnNhcC5LZXlDb2Rlcy5BUlJPV19SSUdIVDpxLnNhcC5LZXlDb2Rlcy5BUlJPV19MRUZUO3JldHVybihlLmtleUNvZGU9PWl8fGUua2V5Q29kZT09cS5zYXAuS2V5Q29kZXMuQVJST1dfRE9XTikmJmsoZSl9fSxzYXBpbmNyZWFzZTp7c05hbWU6InNhcGluY3JlYXNlIixhVHlwZXM6WyJrZXlkb3duIl0sZm5DaGVjazpmdW5jdGlvbihlKXt2YXIgcj1zYXAudWkuZ2V0Q29yZSgpLmdldENvbmZpZ3VyYXRpb24oKS5nZXRSVEwoKTt2YXIgTj1yP3Euc2FwLktleUNvZGVzLkFSUk9XX0xFRlQ6cS5zYXAuS2V5Q29kZXMuQVJST1dfUklHSFQ7cmV0dXJuKGUua2V5Q29kZT09Tnx8ZS5rZXlDb2RlPT1xLnNhcC5LZXlDb2Rlcy5BUlJPV19VUCkmJiFrKGUpfX0sc2FwaW5jcmVhc2Vtb2RpZmllcnM6e3NOYW1lOiJzYXBpbmNyZWFzZW1vZGlmaWVycyIsYVR5cGVzOlsia2V5ZG93biJdLGZuQ2hlY2s6ZnVuY3Rpb24oZSl7dmFyIHI9c2FwLnVpLmdldENvcmUoKS5nZXRDb25maWd1cmF0aW9uKCkuZ2V0UlRMKCk7dmFyIE49cj9xLnNhcC5LZXlDb2Rlcy5BUlJPV19MRUZUOnEuc2FwLktleUNvZGVzLkFSUk9XX1JJR0hUO3JldHVybihlLmtleUNvZGU9PU58fGUua2V5Q29kZT09cS5zYXAuS2V5Q29kZXMuQVJST1dfVVApJiZrKGUpfX0sc2FwcHJldmlvdXM6e3NOYW1lOiJzYXBwcmV2aW91cyIsYVR5cGVzOlsia2V5ZG93biJdLGZuQ2hlY2s6ZnVuY3Rpb24oZSl7dmFyIHI9c2FwLnVpLmdldENvcmUoKS5nZXRDb25maWd1cmF0aW9uKCkuZ2V0UlRMKCk7dmFyIGk9cj9xLnNhcC5LZXlDb2Rlcy5BUlJPV19SSUdIVDpxLnNhcC5LZXlDb2Rlcy5BUlJPV19MRUZUO3JldHVybihlLmtleUNvZGU9PWl8fGUua2V5Q29kZT09cS5zYXAuS2V5Q29kZXMuQVJST1dfVVApJiYhayhlKX19LHNhcHByZXZpb3VzbW9kaWZpZXJzOntzTmFtZToic2FwcHJldmlvdXNtb2RpZmllcnMiLGFUeXBlczpbImtleWRvd24iXSxmbkNoZWNrOmZ1bmN0aW9uKGUpe3ZhciByPXNhcC51aS5nZXRDb3JlKCkuZ2V0Q29uZmlndXJhdGlvbigpLmdldFJUTCgpO3ZhciBpPXI/cS5zYXAuS2V5Q29kZXMuQVJST1dfUklHSFQ6cS5zYXAuS2V5Q29kZXMuQVJST1dfTEVGVDtyZXR1cm4oZS5rZXlDb2RlPT1pfHxlLmtleUNvZGU9PXEuc2FwLktleUNvZGVzLkFSUk9XX1VQKSYmayhlKX19LHNhcG5leHQ6e3NOYW1lOiJzYXBuZXh0IixhVHlwZXM6WyJrZXlkb3duIl0sZm5DaGVjazpmdW5jdGlvbihlKXt2YXIgcj1zYXAudWkuZ2V0Q29yZSgpLmdldENvbmZpZ3VyYXRpb24oKS5nZXRSVEwoKTt2YXIgTj1yP3Euc2FwLktleUNvZGVzLkFSUk9XX0xFRlQ6cS5zYXAuS2V5Q29kZXMuQVJST1dfUklHSFQ7cmV0dXJuKGUua2V5Q29kZT09Tnx8ZS5rZXlDb2RlPT1xLnNhcC5LZXlDb2Rlcy5BUlJPV19ET1dOKSYmIWsoZSl9fSxzYXBuZXh0bW9kaWZpZXJzOntzTmFtZToic2FwbmV4dG1vZGlmaWVycyIsYVR5cGVzOlsia2V5ZG93biJdLGZuQ2hlY2s6ZnVuY3Rpb24oZSl7dmFyIHI9c2FwLnVpLmdldENvcmUoKS5nZXRDb25maWd1cmF0aW9uKCkuZ2V0UlRMKCk7dmFyIE49cj9xLnNhcC5LZXlDb2Rlcy5BUlJPV19MRUZUOnEuc2FwLktleUNvZGVzLkFSUk9XX1JJR0hUO3JldHVybihlLmtleUNvZGU9PU58fGUua2V5Q29kZT09cS5zYXAuS2V5Q29kZXMuQVJST1dfRE9XTikmJmsoZSl9fSxzYXBkZWxheWVkZG91YmxlY2xpY2s6e3NOYW1lOiJzYXBkZWxheWVkZG91YmxlY2xpY2siLGFUeXBlczpbImNsaWNrIl0sZm5DaGVjazpmdW5jdGlvbihlKXt2YXIgaT1xKGUudGFyZ2V0KTt2YXIgaj1lLnRpbWVTdGFtcDt2YXIgcj1pLmRhdGEoInNhcGRlbGF5ZWRkb3VibGVjbGlja19sYXN0Q2xpY2tUaW1lc3RhbXAiKTt2YXIgdD1yfHwwO2kuZGF0YSgic2FwZGVsYXllZGRvdWJsZWNsaWNrX2xhc3RDbGlja1RpbWVzdGFtcCIsaik7dmFyIHU9ai10O3JldHVybih1Pj0zMDAmJnU8PTEzMDApfX19O3ZhciBQPVsic2FwZG93biIsInNhcGRvd25tb2RpZmllcnMiLCJzYXBzaG93Iiwic2FwdXAiLCJzYXB1cG1vZGlmaWVycyIsInNhcGhpZGUiLCJzYXBsZWZ0Iiwic2FwbGVmdG1vZGlmaWVycyIsInNhcHJpZ2h0Iiwic2FwcmlnaHRtb2RpZmllcnMiLCJzYXBob21lIiwic2FwaG9tZW1vZGlmaWVycyIsInNhcHRvcCIsInNhcGVuZCIsInNhcGVuZG1vZGlmaWVycyIsInNhcGJvdHRvbSIsInNhcHBhZ2V1cCIsInNhcHBhZ2V1cG1vZGlmaWVycyIsInNhcHBhZ2Vkb3duIiwic2FwcGFnZWRvd25tb2RpZmllcnMiLCJzYXBzZWxlY3QiLCJzYXBzZWxlY3Rtb2RpZmllcnMiLCJzYXBzcGFjZSIsInNhcHNwYWNlbW9kaWZpZXJzIiwic2FwZW50ZXIiLCJzYXBlbnRlcm1vZGlmaWVycyIsInNhcGV4cGFuZCIsInNhcGJhY2tzcGFjZSIsInNhcGJhY2tzcGFjZW1vZGlmaWVycyIsInNhcGRlbGV0ZSIsInNhcGRlbGV0ZW1vZGlmaWVycyIsInNhcGV4cGFuZG1vZGlmaWVycyIsInNhcGNvbGxhcHNlIiwic2FwY29sbGFwc2Vtb2RpZmllcnMiLCJzYXBjb2xsYXBzZWFsbCIsInNhcGVzY2FwZSIsInNhcHRhYm5leHQiLCJzYXB0YWJwcmV2aW91cyIsInNhcHNraXBmb3J3YXJkIiwic2Fwc2tpcGJhY2siLCJzYXBwcmV2aW91cyIsInNhcHByZXZpb3VzbW9kaWZpZXJzIiwic2FwbmV4dCIsInNhcG5leHRtb2RpZmllcnMiLCJzYXBkZWNyZWFzZSIsInNhcGRlY3JlYXNlbW9kaWZpZXJzIiwic2FwaW5jcmVhc2UiLCJzYXBpbmNyZWFzZW1vZGlmaWVycyIsInNhcGRlbGF5ZWRkb3VibGVjbGljayJdOyhmdW5jdGlvbiBpbml0VG91Y2hFdmVudFN1cHBvcnQoKXtxLnNhcC50b3VjaEV2ZW50TW9kZT0iU0lNIjt2YXIgQT1bXTt2YXIgZT1bXTtpZihzYXAudWkuRGV2aWNlLnN1cHBvcnQudG91Y2gpe3Euc2FwLnRvdWNoRXZlbnRNb2RlPSJPTiI7cS5ldmVudC5wcm9wcy5wdXNoKCJ0b3VjaGVzIiwidGFyZ2V0VG91Y2hlcyIsImNoYW5nZWRUb3VjaGVzIil9dmFyIGo9ZnVuY3Rpb24oeCx5LEgpe3ZhciB6PSJfXyIreCsiSGFuZGxlciI7dmFyIEI9InNhcCIreDtBLnB1c2goQik7ZS5wdXNoKHtzTmFtZTp4LGFUeXBlczpbQl0sZm5DaGVjazpmdW5jdGlvbihFKXtyZXR1cm4gdHJ1ZX19KTtxLmV2ZW50LnNwZWNpYWxbQl09e2FkZDpmdW5jdGlvbihDKXt2YXIgRD10aGlzLCQ9cSh0aGlzKSxFPXtkb21SZWY6RCxldmVudE5hbWU6eCxzYXBFdmVudE5hbWU6QixldmVudEhhbmRsZTpDfTt2YXIgRz1mdW5jdGlvbihKKXtIKEosRSl9O0MuX19zYXBTaW11bGF0ZWRFdmVudEhhbmRsZXI9Rztmb3IodmFyIGk9MDtpPHkubGVuZ3RoO2krKyl7JC5vbih5W2ldLEcpfX0scmVtb3ZlOmZ1bmN0aW9uKEMpe3ZhciAkPXEodGhpcyk7dmFyIEg9Qy5fX3NhcFNpbXVsYXRlZEV2ZW50SGFuZGxlcjskLnJlbW92ZURhdGEoeitDLmd1aWQpO2Zvcih2YXIgaT0wO2k8eS5sZW5ndGg7aSsrKXtxLmV2ZW50LnJlbW92ZSh0aGlzLHlbaV0sSCl9fX19O3ZhciBNPWZ1bmN0aW9uKEUsQyl7dmFyIEQ9cShDLmRvbVJlZik7aWYoRS5pc01hcmtlZCgiZGVsYXllZE1vdXNlRXZlbnQiKSl7cmV0dXJufWlmKCEoRS50eXBlIT0ibW91c2VvdXQifHwoRS50eXBlPT09Im1vdXNlb3V0IiYmcS5zYXAuY2hlY2tNb3VzZUVudGVyT3JMZWF2ZShFLEMuZG9tUmVmKSkpKXt2YXIgeD10cnVlO3ZhciB5PUQuZGF0YSgiX190b3VjaHN0YXJ0X2NvbnRyb2wiKTtpZih5KXt2YXIgej1xLnNhcC5kb21CeUlkKHkpO2lmKHomJnEuc2FwLmNoZWNrTW91c2VFbnRlck9yTGVhdmUoRSx6KSl7eD1mYWxzZX19aWYoeCl7cmV0dXJufX12YXIgTj1xLmV2ZW50LmZpeChFLm9yaWdpbmFsRXZlbnR8fEUpO04udHlwZT1DLnNhcEV2ZW50TmFtZTtpZihOLmlzTWFya2VkKCJmaXJzdFVJQXJlYSIpKXtOLnNldE1hcmsoImhhbmRsZWRCeVVJQXJlYSIsZmFsc2UpfXZhciBCPVt7aWRlbnRpZmllcjoxLHBhZ2VYOk4ucGFnZVgscGFnZVk6Ti5wYWdlWSxjbGllbnRYOk4uY2xpZW50WCxjbGllbnRZOk4uY2xpZW50WSxzY3JlZW5YOk4uc2NyZWVuWCxzY3JlZW5ZOk4uc2NyZWVuWSx0YXJnZXQ6Ti50YXJnZXQscmFkaXVzWDoxLHJhZGl1c1k6MSxyb3RhdGlvbkFuZ2xlOjB9XTtzd2l0Y2goQy5ldmVudE5hbWUpe2Nhc2UidG91Y2hzdGFydCI6Y2FzZSJ0b3VjaG1vdmUiOk4udG91Y2hlcz1OLmNoYW5nZWRUb3VjaGVzPU4udGFyZ2V0VG91Y2hlcz1CO2JyZWFrO2Nhc2UidG91Y2hlbmQiOk4uY2hhbmdlZFRvdWNoZXM9QjtOLnRvdWNoZXM9Ti50YXJnZXRUb3VjaGVzPVtdO2JyZWFrfWlmKEMuZXZlbnROYW1lPT09InRvdWNoc3RhcnQifHxELmRhdGEoIl9fdG91Y2hfaW5fcHJvZ3Jlc3MiKSl7RC5kYXRhKCJfX3RvdWNoX2luX3Byb2dyZXNzIiwiWCIpO3ZhciBHPXEuZm4uY29udHJvbD9xKEUudGFyZ2V0KS5jb250cm9sKDApOm51bGw7aWYoRyl7RC5kYXRhKCJfX3RvdWNoc3RhcnRfY29udHJvbCIsRy5nZXRJZCgpKX1pZihFLnR5cGU9PT0ibW91c2VvdXQiKXtOLnNldE1hcmtlZCgiZnJvbU1vdXNlb3V0Iil9Qy5ldmVudEhhbmRsZS5oYW5kbGVyLmNhbGwoQy5kb21SZWYsTik7aWYoQy5ldmVudE5hbWU9PT0idG91Y2hlbmQiJiYhTi5pc01hcmtlZCgiZnJvbU1vdXNlb3V0Iikpe0QucmVtb3ZlRGF0YSgiX190b3VjaF9pbl9wcm9ncmVzcyIpO0QucmVtb3ZlRGF0YSgiX190b3VjaHN0YXJ0X2NvbnRyb2wiKX19fTtqKCJ0b3VjaHN0YXJ0IixbIm1vdXNlZG93biJdLE0pO2ooInRvdWNoZW5kIixbIm1vdXNldXAiLCJtb3VzZW91dCJdLE0pO2ooInRvdWNobW92ZSIsWyJtb3VzZW1vdmUiXSxNKTtmdW5jdGlvbiByKCl7dmFyIEM9d2luZG93WyJzYXAtdWktY29uZmlnIl18fHt9LEw9Qy5saWJzfHwiIjtmdW5jdGlvbiB4KEspe3JldHVybiBkb2N1bWVudC5sb2NhdGlvbi5zZWFyY2guaW5kZXhPZigic2FwLXVpLSIrSyk+LTF8fCEhQ1tLLnRvTG93ZXJDYXNlKCldfXJldHVybiBzYXAudWkuRGV2aWNlLnN1cHBvcnQudG91Y2h8fHgoInh4LXRlc3QtbW9iaWxlIil8fHgoInh4LWZha2VPUyIpfHxMLm1hdGNoKC9zYXAubVxiLyl9aWYocigpKXtxLnNhcC5yZXF1aXJlKCJzYXAudWkudGhpcmRwYXJ0eS5qcXVlcnktbW9iaWxlLWN1c3RvbSIpO2lmKHNhcC51aS5EZXZpY2Uuc3VwcG9ydC50b3VjaCl7dmFyIEY9ZmFsc2UsdD1xLnZtb3VzZS5tb3ZlRGlzdGFuY2VUaHJlc2hvbGQsdSx2LE8sdzt2YXIgVD1mdW5jdGlvbihFLEMpe3ZhciB4PUUub3JpZ2luYWxFdmVudC50b3VjaGVzWzBdLHk7aWYoRS50eXBlPT09InRvdWNoc3RhcnQiKXtGPWZhbHNlO3U9eC5wYWdlWDt2PXgucGFnZVk7Tz1NYXRoLnJvdW5kKHgucGFnZVgtcShFLnRhcmdldCkub2Zmc2V0KCkubGVmdCk7dz1NYXRoLnJvdW5kKHgucGFnZVktcShFLnRhcmdldCkub2Zmc2V0KCkudG9wKX1lbHNlIGlmKEUudHlwZT09PSJ0b3VjaG1vdmUiKXtGPUZ8fChNYXRoLmFicyh4LnBhZ2VYLXUpPnR8fE1hdGguYWJzKHgucGFnZVktdik+dCl9dmFyIE49cS5ldmVudC5maXgoRS5vcmlnaW5hbEV2ZW50fHxFKTtOLnR5cGU9Qy5zYXBFdmVudE5hbWU7aWYoTi5pc01hcmtlZCgiZmlyc3RVSUFyZWEiKSl7Ti5zZXRNYXJrKCJoYW5kbGVkQnlVSUFyZWEiLGZhbHNlKX1kZWxldGUgTi50b3VjaGVzO2RlbGV0ZSBOLmNoYW5nZWRUb3VjaGVzO2RlbGV0ZSBOLnRhcmdldFRvdWNoZXM7dmFyIHo9KEMuZXZlbnROYW1lPT09Im1vdXNldXAiP0UuY2hhbmdlZFRvdWNoZXNbMF06RS50b3VjaGVzWzBdKTtOLnNjcmVlblg9ei5zY3JlZW5YO04uc2NyZWVuWT16LnNjcmVlblk7Ti5jbGllbnRYPXouY2xpZW50WDtOLmNsaWVudFk9ei5jbGllbnRZO04uY3RybEtleT16LmN0cmxLZXk7Ti5hbHRLZXk9ei5hbHRLZXk7Ti5zaGlmdEtleT16LnNoaWZ0S2V5O04uYnV0dG9uPShzYXAudWkuRGV2aWNlLmJyb3dzZXIubXNpZSYmc2FwLnVpLkRldmljZS5icm93c2VyLnZlcnNpb248PTg/MTowKTt5PU4uaXNNYXJrZWQoImhhbmRsZWRCeVVJQXJlYSIpO0MuZXZlbnRIYW5kbGUuaGFuZGxlci5jYWxsKEMuZG9tUmVmLE4pO2lmKEUudHlwZT09PSJ0b3VjaGVuZCImJiF5JiYhRil7Ti50eXBlPSJjbGljayI7Ti5zZXRNYXJrKCJoYW5kbGVkQnlVSUFyZWEiLGZhbHNlKTtOLm9mZnNldFg9TztOLm9mZnNldFk9dztDLmV2ZW50SGFuZGxlLmhhbmRsZXIuY2FsbChDLmRvbVJlZixOKX19O3Euc2FwLmRpc2FibGVUb3VjaFRvTW91c2VIYW5kbGluZygpO3Euc2FwLl90b3VjaFRvTW91c2VFdmVudD1mYWxzZTtqKCJtb3VzZWRvd24iLFsidG91Y2hzdGFydCJdLFQpO2ooIm1vdXNlbW92ZSIsWyJ0b3VjaG1vdmUiXSxUKTtqKCJtb3VzZXVwIixbInRvdWNoZW5kIiwidG91Y2hjYW5jZWwiXSxUKX1BLnB1c2goInN3aXBlIiwidGFwIiwic3dpcGVsZWZ0Iiwic3dpcGVyaWdodCIsInNjcm9sbHN0YXJ0Iiwic2Nyb2xsc3RvcCIpO2UucHVzaCh7c05hbWU6InN3aXBlYmVnaW4iLGFUeXBlczpbInN3aXBlbGVmdCIsInN3aXBlcmlnaHQiXSxmbkNoZWNrOmZ1bmN0aW9uKEUpe3ZhciBSPXNhcC51aS5nZXRDb3JlKCkuZ2V0Q29uZmlndXJhdGlvbigpLmdldFJUTCgpO3JldHVybihSJiZFLnR5cGU9PT0ic3dpcGVyaWdodCIpfHwoIVImJkUudHlwZT09PSJzd2lwZWxlZnQiKX19KTtlLnB1c2goe3NOYW1lOiJzd2lwZWVuZCIsYVR5cGVzOlsic3dpcGVsZWZ0Iiwic3dpcGVyaWdodCJdLGZuQ2hlY2s6ZnVuY3Rpb24oRSl7dmFyIFI9c2FwLnVpLmdldENvcmUoKS5nZXRDb25maWd1cmF0aW9uKCkuZ2V0UlRMKCk7cmV0dXJuKCFSJiZFLnR5cGU9PT0ic3dpcGVyaWdodCIpfHwoUiYmRS50eXBlPT09InN3aXBlbGVmdCIpfX0pfWlmKHEuc2FwLlZlcnNpb24ocS5mbi5qcXVlcnkpLmNvbXBhcmVUbygiMS45LjEiKTwwKXtxLnNhcC5Db250cm9sRXZlbnRzPXEuc2FwLkNvbnRyb2xFdmVudHMuY29uY2F0KEEpfWVsc2V7cS5zYXAuQ29udHJvbEV2ZW50cz1BLmNvbmNhdChxLnNhcC5Db250cm9sRXZlbnRzKX1mb3IodmFyIGk9MDtpPGUubGVuZ3RoO2krKyl7cS5zYXAuUHNldWRvRXZlbnRzW2VbaV0uc05hbWVdPWVbaV07UC5wdXNoKGVbaV0uc05hbWUpfX0oKSk7ZnVuY3Rpb24gZigpe3ZhciBlPXEuc2FwLlBzZXVkb0V2ZW50cyxyPVtdO2Zvcih2YXIgTiBpbiBlKXtpZihlW05dLmFUeXBlcyl7Zm9yKHZhciBqPTAsaT1lW05dLmFUeXBlcy5sZW5ndGg7ajxpO2orKyl7dmFyIHQ9ZVtOXS5hVHlwZXNbal07aWYocS5pbkFycmF5KHQscik9PS0xKXtyLnB1c2godCl9fX19cmV0dXJuIHJ9dmFyIGc9ZigpO2Z1bmN0aW9uIGgoZSxDLEEsaSl7cmV0dXJuIGUuc2hpZnRLZXk9PWkmJmUuYWx0S2V5PT1BJiZsKGUpPT1DfWZ1bmN0aW9uIGsoZSl7cmV0dXJuIGUuc2hpZnRLZXl8fGUuYWx0S2V5fHxsKGUpfWZ1bmN0aW9uIGwoZSl7cmV0dXJuISEoZS5tZXRhS2V5fHxlLmN0cmxLZXkpfXEuRXZlbnQucHJvdG90eXBlLmdldFBzZXVkb1R5cGVzPWZ1bmN0aW9uKCl7dmFyIGU9W107aWYocS5pbkFycmF5KHRoaXMudHlwZSxnKSE9LTEpe3ZhciBqPVA7dmFyIHI9ai5sZW5ndGg7dmFyIHQ9bnVsbDtmb3IodmFyIGk9MDtpPHI7aSsrKXt0PXEuc2FwLlBzZXVkb0V2ZW50c1tqW2ldXTtpZih0LmFUeXBlcyYmcS5pbkFycmF5KHRoaXMudHlwZSx0LmFUeXBlcyk+LTEmJnQuZm5DaGVjayYmdC5mbkNoZWNrKHRoaXMpKXtlLnB1c2godC5zTmFtZSl9fX10aGlzLmdldFBzZXVkb1R5cGVzPWZ1bmN0aW9uKCl7cmV0dXJuIGUuc2xpY2UoKX07cmV0dXJuIGUuc2xpY2UoKX07cS5FdmVudC5wcm90b3R5cGUuaXNQc2V1ZG9UeXBlPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuZ2V0UHNldWRvVHlwZXMoKTtpZih0KXtyZXR1cm4gcS5pbkFycmF5KHQsZSk+LTF9ZWxzZXtyZXR1cm4gZS5sZW5ndGg+MH19O3ZhciBfPXEuRXZlbnQucHJvdG90eXBlLnByZXZlbnREZWZhdWx0O3EuRXZlbnQucHJvdG90eXBlLnByZXZlbnREZWZhdWx0PWZ1bmN0aW9uKCl7Xy5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dmFyIGU9dGhpcy5vcmlnaW5hbEV2ZW50O2lmKCFlKXtyZXR1cm59aWYoZS5rZXlDb2RlIT0wKXt0cnl7aWYoIXNhcC51aS5EZXZpY2UuYnJvd3Nlci5maXJlZm94KXtlLmtleUNvZGU9MH19Y2F0Y2goaSl7fX19O3Euc2FwLmJpbmRBbnlFdmVudD1mdW5jdGlvbiBiaW5kQW55RXZlbnQoQyl7aWYoQyl7cShkb2N1bWVudCkuYmluZChxLnNhcC5Db250cm9sRXZlbnRzLmpvaW4oIiAiKSxDKX19O3Euc2FwLnVuYmluZEFueUV2ZW50PWZ1bmN0aW9uIHVuYmluZEFueUV2ZW50KEMpe2lmKEMpe3EoZG9jdW1lbnQpLnVuYmluZChxLnNhcC5Db250cm9sRXZlbnRzLmpvaW4oIiAiKSxDKX19O3Euc2FwLmNoZWNrTW91c2VFbnRlck9yTGVhdmU9ZnVuY3Rpb24gY2hlY2tNb3VzZUVudGVyT3JMZWF2ZShFLEQpe2lmKEUudHlwZSE9Im1vdXNlb3ZlciImJkUudHlwZSE9Im1vdXNlb3V0Iil7cmV0dXJuIGZhbHNlfXZhciBpPWZhbHNlO3ZhciBqPUQ7dmFyIHI9RS5yZWxhdGVkVGFyZ2V0O3RyeXt3aGlsZShyJiZyIT09ail7cj1yLnBhcmVudE5vZGV9aWYociE9PWope2k9dHJ1ZX19Y2F0Y2goZSl7fXJldHVybiBpfTtxLnNhcC5pc1NwZWNpYWxLZXk9ZnVuY3Rpb24oZSl7dmFyIEs9cS5zYXAuS2V5Q29kZXMsaT1lLndoaWNoLGo9bihlKXx8cChlKXx8KGk+PTMzJiZpPD0zNil8fChpPj00NCYmaTw9NDYpfHwoaT49MTEyJiZpPD0xMjMpfHwoaT09PUsuQlJFQUspfHwoaT09PUsuQkFDS1NQQUNFKXx8KGk9PT1LLlRBQil8fChpPT09Sy5FTlRFUil8fChpPT09Sy5FU0NBUEUpfHwoaT09PUsuU0NST0xMX0xPQ0spO3N3aXRjaChlLnR5cGUpe2Nhc2Uia2V5ZG93biI6Y2FzZSJrZXl1cCI6cmV0dXJuIGo7Y2FzZSJrZXlwcmVzcyI6cmV0dXJuKGk9PT0wfHxpPT09Sy5CQUNLU1BBQ0V8fGk9PT1LLkVTQ0FQRXx8aT09PUsuRU5URVIpfHxmYWxzZTtkZWZhdWx0OnJldHVybiBmYWxzZX19O2Z1bmN0aW9uIG4oZSl7dmFyIEs9cS5zYXAuS2V5Q29kZXMsaT1lLndoaWNoO3JldHVybihpPT09Sy5TSElGVCl8fChpPT09Sy5DT05UUk9MKXx8KGk9PT1LLkFMVCl8fChpPT09Sy5DQVBTX0xPQ0spfHwoaT09PUsuTlVNX0xPQ0spfWZ1bmN0aW9uIHAoZSl7dmFyIEs9ZS53aGljaCxBPShLPj0zNyYmSzw9NDApO3N3aXRjaChlLnR5cGUpe2Nhc2Uia2V5ZG93biI6Y2FzZSJrZXl1cCI6cmV0dXJuIEE7Y2FzZSJrZXlwcmVzcyI6cmV0dXJuIEs9PT0wO2RlZmF1bHQ6cmV0dXJuIGZhbHNlfX1xLkV2ZW50LnByb3RvdHlwZS5nZXRPZmZzZXRYPWZ1bmN0aW9uKCl7aWYodGhpcy50eXBlPT0nY2xpY2snKXtpZih0aGlzLm9mZnNldFgpe3JldHVybiB0aGlzLm9mZnNldFh9aWYodGhpcy5sYXllclgpe3JldHVybiB0aGlzLmxheWVyWH1pZih0aGlzLm9yaWdpbmFsRXZlbnQubGF5ZXJYKXtyZXR1cm4gdGhpcy5vcmlnaW5hbEV2ZW50LmxheWVyWH19cmV0dXJuIDB9O3EuRXZlbnQucHJvdG90eXBlLmdldE9mZnNldFk9ZnVuY3Rpb24oKXtpZih0aGlzLnR5cGU9PSdjbGljaycpe2lmKHRoaXMub2Zmc2V0WSl7cmV0dXJuIHRoaXMub2Zmc2V0WX1pZih0aGlzLmxheWVyWSl7cmV0dXJuIHRoaXMubGF5ZXJZfWlmKHRoaXMub3JpZ2luYWxFdmVudC5sYXllclkpe3JldHVybiB0aGlzLm9yaWdpbmFsRXZlbnQubGF5ZXJZfX1yZXR1cm4gMH07dmFyIFM9cS5FdmVudC5wcm90b3R5cGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uO3EuRXZlbnQucHJvdG90eXBlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbj1mdW5jdGlvbihlKXtTLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtpZihlKXt0aGlzLl9iSXNTdG9wSGFuZGxlcnM9dHJ1ZX19O3EuRXZlbnQucHJvdG90eXBlLmlzSW1tZWRpYXRlSGFuZGxlclByb3BhZ2F0aW9uU3RvcHBlZD1mdW5jdGlvbigpe3JldHVybiEhdGhpcy5fYklzU3RvcEhhbmRsZXJzfTtxLkV2ZW50LnByb3RvdHlwZS5zZXRNYXJrPWZ1bmN0aW9uKEssdil7Sz1LfHwiaGFuZGxlZEJ5Q29udHJvbCI7dj1hcmd1bWVudHMubGVuZ3RoPDI/dHJ1ZTp2Oyh0aGlzLm9yaWdpbmFsRXZlbnR8fHRoaXMpWyJfc2FwdWlfIitLXT12fTtxLkV2ZW50LnByb3RvdHlwZS5zZXRNYXJrZWQ9cS5FdmVudC5wcm90b3R5cGUuc2V0TWFyaztxLkV2ZW50LnByb3RvdHlwZS5pc01hcmtlZD1mdW5jdGlvbihLKXtLPUt8fCJoYW5kbGVkQnlDb250cm9sIjtyZXR1cm4hISh0aGlzLm9yaWdpbmFsRXZlbnR8fHRoaXMpWyJfc2FwdWlfIitLXX07cmV0dXJuIHF9LGZhbHNlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnanF1ZXJ5LnNhcC5oaXN0b3J5Jykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnanF1ZXJ5LnNhcC5oaXN0b3J5Jyk7c2FwLnVpLmRlZmluZSgianF1ZXJ5LnNhcC5oaXN0b3J5IixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnanF1ZXJ5LnNhcC5zdHJpbmdzJ10sZnVuY3Rpb24ocSl7InVzZSBzdHJpY3QiOyhmdW5jdGlvbigkLHcpe3ZhciBzPSJfc2tpcCIscj0vXHxpZC1bMC05XSstWzAtOV0rLyxhPW5ldyBSZWdFeHAocysiWzAtOV0qJCIpLGI9W10saD1bXSxTPXt9LGM9MCxkPXVuZGVmaW5lZCxJPSJ8IixIPVtdLGU9ZmFsc2UsZixnPWZhbHNlOyQuc2FwLmhpc3Rvcnk9ZnVuY3Rpb24oQSl7aWYoIXEuaXNQbGFpbk9iamVjdChBKSl7cmV0dXJufWlmKCFnKXt2YXIgVz0kKHcpLEI9KHcubG9jYXRpb24uaHJlZi5zcGxpdCgiIyIpWzFdfHwiIik7Vy5iaW5kKCdoYXNoY2hhbmdlJyxrKTtpZigkLmlzQXJyYXkoQS5yb3V0ZXMpKXt2YXIgaSxDO2ZvcihpPTA7aTxBLnJvdXRlcy5sZW5ndGg7aSsrKXtDPUEucm91dGVzW2ldO2lmKEMucGF0aCYmQy5oYW5kbGVyKXskLnNhcC5oaXN0b3J5LmFkZFJvdXRlKEMucGF0aCxDLmhhbmRsZXIpfX19aWYocS5pc0Z1bmN0aW9uKEEuZGVmYXVsdEhhbmRsZXIpKXtmPUEuZGVmYXVsdEhhbmRsZXJ9aC5wdXNoKEIpO2lmKEIubGVuZ3RoPjEpe1cudHJpZ2dlcigiaGFzaGNoYW5nZSIsW3RydWVdKX1lbHNle2Q9Qn1nPXRydWV9fTskLnNhcC5oaXN0b3J5LmFkZEhpc3Rvcnk9ZnVuY3Rpb24oaSxBLEIsVil7dmFyIEMsRDtpZihCPT09dW5kZWZpbmVkKXtCPXRydWV9aWYoIVYpe0Q9bihpLEEpO0M9byhEKTtpZihDKXtEKz0oSStDKX1EKz0oSSsoQj8iMSI6IjAiKSl9ZWxzZXtEPW0oZCl9SC5wdXNoKEQpO1NbRF09dHJ1ZTt3LmxvY2F0aW9uLmhhc2g9RDtyZXR1cm4gRH07JC5zYXAuaGlzdG9yeS5hZGRWaXJ0dWFsSGlzdG9yeT1mdW5jdGlvbigpeyQuc2FwLmhpc3RvcnkuYWRkSGlzdG9yeSgiIix1bmRlZmluZWQsZmFsc2UsdHJ1ZSl9OyQuc2FwLmhpc3RvcnkuYWRkUm91dGU9ZnVuY3Rpb24oaSxBLFQpe2lmKFQpe0E9cS5wcm94eShBLFQpfXZhciBSPXt9O1Iuc0lkZW50aWZpZXI9aTtSWydhY3Rpb24nXT1BO2IucHVzaChSKTtyZXR1cm4gdGhpc307JC5zYXAuaGlzdG9yeS5zZXREZWZhdWx0SGFuZGxlcj1mdW5jdGlvbihpKXtmPWl9OyQuc2FwLmhpc3RvcnkuZ2V0RGVmYXVsdEhhbmRsZXI9ZnVuY3Rpb24oKXtyZXR1cm4gZn07JC5zYXAuaGlzdG9yeS5iYWNrVG9IYXNoPWZ1bmN0aW9uKGkpe2k9aXx8IiI7dmFyIEE7aWYoaC5sZW5ndGg9PT0xKXtpZigkLmlzRnVuY3Rpb24oZikpe2YoKX19ZWxzZXtBPWooZCxpKTtpZihBPDApe3cuaGlzdG9yeS5nbyhBKX1lbHNle3Euc2FwLmxvZy5lcnJvcigialF1ZXJ5LnNhcC5oaXN0b3J5LmJhY2tUb0hhc2g6ICIraSsiaXMgbm90IGluIHRoZSBoaXN0b3J5IHN0YWNrIG9yIGl0J3MgYWZ0ZXIgdGhlIGN1cnJlbnQgaGFzaCIpfX19OyQuc2FwLmhpc3RvcnkuYmFja1Rocm91Z2hQYXRoPWZ1bmN0aW9uKFApe1A9UHx8IiI7UD13LmVuY29kZVVSSUNvbXBvbmVudChQKTt2YXIgaTtpZihoLmxlbmd0aD09PTEpe2lmKCQuaXNGdW5jdGlvbihmKSl7ZigpfX1lbHNle2k9aihkLFAsdHJ1ZSk7aWYoaTwwKXt3Lmhpc3RvcnkuZ28oaSl9ZWxzZXtxLnNhcC5sb2cuZXJyb3IoImpRdWVyeS5zYXAuaGlzdG9yeS5iYWNrVGhyb3VnaFBhdGg6IHRoZXJlJ3Mgbm8gaGlzdG9yeSBzdGF0ZSB3aGljaCBoYXMgdGhlICIrUCsiIGlkZW50aWZpZXIgaW4gdGhlIGhpc3Rvcnkgc3RhY2sgYmVmb3JlIHRoZSBjdXJyZW50IGhhc2giKX19fTskLnNhcC5oaXN0b3J5LmJhY2s9ZnVuY3Rpb24oaSl7aWYoaC5sZW5ndGg9PT0xKXtpZigkLmlzRnVuY3Rpb24oZikpe2YoJC5zYXAuaGlzdG9yeS5OYXZUeXBlLkJhY2spfX1lbHNle2lmKCFpKXtpPTF9dy5oaXN0b3J5LmdvKC0xKmkpfX07JC5zYXAuaGlzdG9yeS5OYXZUeXBlPXt9OyQuc2FwLmhpc3RvcnkuTmF2VHlwZS5CYWNrPSJfYmFjayI7JC5zYXAuaGlzdG9yeS5OYXZUeXBlLkZvcndhcmQ9Il9mb3J3YXJkIjskLnNhcC5oaXN0b3J5Lk5hdlR5cGUuQm9va21hcms9Il9ib29rbWFyayI7JC5zYXAuaGlzdG9yeS5OYXZUeXBlLlVua25vd249Il91bmtub3duIjtmdW5jdGlvbiBqKEMsVCxQKXt2YXIgQT0kLmluQXJyYXkoQyxoKSxCLGksRDtpZihBPjApe2lmKFApe2ZvcihpPUEtMTtpPj0wO2ktLSl7RD1oW2ldO2lmKEQuaW5kZXhPZihUKT09PTAmJiF1KEQpKXtyZXR1cm4gaS1BfX19ZWxzZXtCPSQuaW5BcnJheShULGgpO2lmKChCPT09LTEpJiZULmxlbmd0aD09PTApe3JldHVybi0xKkF9aWYoKEI+LTEpJiYoQjxBKSl7cmV0dXJuIEItQX19fXJldHVybiAwfWZ1bmN0aW9uIGsoRSxNKXt2YXIgaT0ody5sb2NhdGlvbi5ocmVmLnNwbGl0KCIjIilbMV18fCIiKTtpPWwoaSk7aWYoTXx8IVNbaV0pe0gucHVzaChpKX1pZighZSl7ZT10cnVlO2lmKEgubGVuZ3RoPjApe3ZhciBBPUguc2hpZnQoKTtpZihTW0FdKXt0KEEpO2RlbGV0ZSBTW0FdfWVsc2V7eChBKX1kPUF9ZT1mYWxzZX19ZnVuY3Rpb24gcChVKXt2YXIgaT1VLmluZGV4T2YoIiMiKTtpZihpPT09LTEpe3JldHVybiIifWVsc2UgaWYoaT4wJiZpIT09VS5sZW5ndGgtMSl7cmV0dXJuIFUuc2xpY2UoaSsxKX19ZnVuY3Rpb24gbChpLFIpe3ZhciBBPWksQj1pP2kuaW5kZXhPZigiIyIpOi0xLEMsRDtpZihCPT09MCl7QT1BLnNsaWNlKEIrMSl9aWYoUil7QT1BLnJlcGxhY2UociwiIil9cmV0dXJuIEF9ZnVuY3Rpb24gbShpKXt2YXIgUD1pP2k6IiI7aWYodShQKSl7dmFyIEE9UC5sYXN0SW5kZXhPZihzKTtQPVAuc2xpY2UoMCxBKX1yZXR1cm4gUCtzK2MrK31mdW5jdGlvbiBuKGksQSl7dmFyIEU9dy5lbmNvZGVVUklDb21wb25lbnQoaSk7dmFyIEI9dy5lbmNvZGVVUklDb21wb25lbnQody5KU09OLnN0cmluZ2lmeShBKSk7cmV0dXJuIEUrSStCfWZ1bmN0aW9uIG8oQSl7dmFyIEI9JC5pbkFycmF5KGQsaCksVCxpLEM7aWYoQj4tMSl7Zm9yKGk9MDtpPEIrMTtpKyspe0M9aFtpXTtpZihDLnNsaWNlKDAsQy5sZW5ndGgtMik9PT1BKXtyZXR1cm4gcS5zYXAudWlkKCl9fX1yZXR1cm4iIn1mdW5jdGlvbiB0KGkpe3ZhciBBPSQuaW5BcnJheShkLGgpO2lmKCEoQT09PS0xfHxBPT09aC5sZW5ndGgtMSkpe2guc3BsaWNlKEErMSxoLmxlbmd0aC0xLUEpfWgucHVzaChpKX1mdW5jdGlvbiB1KGkpe3JldHVybiBhLnRlc3QoaSl9ZnVuY3Rpb24gdihDLEYpe3ZhciBBPSQuaW5BcnJheShDLGgpLGk7aWYoQSE9PS0xKXtpZihGKXtmb3IoaT1BO2k8aC5sZW5ndGg7aSsrKXtpZighdShoW2ldKSl7cmV0dXJuIGktQX19fWVsc2V7Zm9yKGk9QTtpPj0wO2ktLSl7aWYoIXUoaFtpXSkpe3JldHVybiBpLUF9fXJldHVybi0xKihBKzEpfX19ZnVuY3Rpb24geChBKXt2YXIgUixCLGksUD1BLEMsRCxOLEU7aWYoZD09PXVuZGVmaW5lZCl7RD16KEEpO2lmKCFEfHwhRC5iQm9va21hcmthYmxlKXtpZihxLmlzRnVuY3Rpb24oZikpe2YoJC5zYXAuaGlzdG9yeS5OYXZUeXBlLkJvb2ttYXJrKX1yZXR1cm59fWlmKEEubGVuZ3RoPT09MCl7aWYocS5pc0Z1bmN0aW9uKGYpKXtmKCQuc2FwLmhpc3RvcnkuTmF2VHlwZS5CYWNrKX19ZWxzZXtOPXEuaW5BcnJheShBLGgpO2lmKE49PT0wKXtEPXooQSk7aWYoIUR8fCFELmJCb29rbWFya2FibGUpe2lmKHEuaXNGdW5jdGlvbihmKSl7ZigkLnNhcC5oaXN0b3J5Lk5hdlR5cGUuQmFjayl9cmV0dXJufX1pZih1KEEpKXtpZih1KGQpKXtCPXYoQSxmYWxzZSk7dy5oaXN0b3J5LmdvKEIpfWVsc2V7dmFyIEY9bmV3IFJlZ0V4cChxLnNhcC5lc2NhcGVSZWdFeHAoZCtzKSsiWzAtOV0qJCIpO2lmKEYudGVzdChBKSl7Qj12KEEsdHJ1ZSk7aWYoQil7dy5oaXN0b3J5LmdvKEIpfWVsc2V7dy5oaXN0b3J5LmJhY2soKX19ZWxzZXtCPXYoQSxmYWxzZSk7dy5oaXN0b3J5LmdvKEIpfX19ZWxzZXtpZihOPT09LTEpe0U9JC5zYXAuaGlzdG9yeS5OYXZUeXBlLlVua25vd247aC5wdXNoKEEpfWVsc2V7aWYocS5pbkFycmF5KGQsaCxOKzEpPT09LTEpe0U9JC5zYXAuaGlzdG9yeS5OYXZUeXBlLkZvcndhcmR9ZWxzZXtFPSQuc2FwLmhpc3RvcnkuTmF2VHlwZS5CYWNrfX1EPXooQSk7aWYoRCl7Uj15KEQuc0lkZW50aWZpZXIpO2lmKFIpe1IuYWN0aW9uLmFwcGx5KG51bGwsW0Qub1N0YXRlRGF0YSxFXSl9fWVsc2V7cS5zYXAubG9nLmVycm9yKCJoYXNoIGZvcm1hdCBlcnJvciEgVGhlIGN1cnJlbnQgSGFzaDogIitBKX19fX1mdW5jdGlvbiB5KEEpe3ZhciBpO2ZvcihpPTA7aTxiLmxlbmd0aDtpKyspe2lmKGJbaV0uc0lkZW50aWZpZXI9PT1BKXtyZXR1cm4gYltpXX19fWZ1bmN0aW9uIHooQSl7aWYodShBKSl7dmFyIGk9QS5sYXN0SW5kZXhPZihzKTtBPUEuc2xpY2UoMCxpKX12YXIgUD1BLnNwbGl0KEkpLFI9e307aWYoUC5sZW5ndGg9PT00fHxQLmxlbmd0aD09PTMpe1Iuc0lkZW50aWZpZXI9dy5kZWNvZGVVUklDb21wb25lbnQoUFswXSk7Ui5vU3RhdGVEYXRhPXcuSlNPTi5wYXJzZSh3LmRlY29kZVVSSUNvbXBvbmVudChQWzFdKSk7aWYoUC5sZW5ndGg9PT00KXtSLnVpZD1QWzJdfVIuYkJvb2ttYXJrYWJsZT1QW1AubGVuZ3RoLTFdPT09IjAiP2ZhbHNlOnRydWU7cmV0dXJuIFJ9ZWxzZXtyZXR1cm4gbnVsbH19fSkocSx0aGlzKTtyZXR1cm4gcX0sZmFsc2UpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdqcXVlcnkuc2FwLm1vYmlsZScpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ2pxdWVyeS5zYXAubW9iaWxlJyk7c2FwLnVpLmRlZmluZSgianF1ZXJ5LnNhcC5tb2JpbGUiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvRGV2aWNlJywnanF1ZXJ5LnNhcC5kb20nLCdqcXVlcnkuc2FwLmV2ZW50cyddLGZ1bmN0aW9uKHEsRCl7InVzZSBzdHJpY3QiOyhmdW5jdGlvbigkKXt2YXIgRj0vKD86XD98JilzYXAtdWkteHgtZmFrZU9TPShbXiZdKykvOyQuc2FwLnNpbXVsYXRlTW9iaWxlT25EZXNrdG9wPWZhbHNlO2lmKChELmJyb3dzZXIud2Via2l0fHwoRC5icm93c2VyLm1zaWUmJkQuYnJvd3Nlci52ZXJzaW9uPj0xMCkpJiYhcS5zdXBwb3J0LnRvdWNoKXt2YXIgcj1kb2N1bWVudC5sb2NhdGlvbi5zZWFyY2gubWF0Y2goRik7dmFyIGE9ciYmclsxXXx8cS5zYXAuYnlJZCgic2FwLXVpLWJvb3RzdHJhcCIpLmF0dHIoImRhdGEtc2FwLXVpLXh4LWZha2VPUyIpO2lmKGEpeyQuc2FwLnNpbXVsYXRlTW9iaWxlT25EZXNrdG9wPXRydWU7dmFyIHU9e2lvczoiTW96aWxsYS81LjAgKGlQaG9uZTsgQ1BVIGlQaG9uZSBPUyA1XzBfMSBsaWtlIE1hYyBPUyBYKSBBcHBsZVdlYktpdC81MzQuNDggKEtIVE1MLCBsaWtlIEdlY2tvKSBWZXJzaW9uLzUuMSBNb2JpbGUvOUE0MDYgU2FmYXJpLzc1MzQuNDguMyIsaXBob25lOiJNb3ppbGxhLzUuMCAoaVBob25lOyBDUFUgaVBob25lIE9TIDVfMF8xIGxpa2UgTWFjIE9TIFgpIEFwcGxlV2ViS2l0LzUzNC40OCAoS0hUTUwsIGxpa2UgR2Vja28pIFZlcnNpb24vNS4xIE1vYmlsZS85QTQwNiBTYWZhcmkvNzUzNC40OC4zIixpcGFkOiJNb3ppbGxhLzUuMCAoaVBhZDsgQ1BVIE9TIDVfMV8xIGxpa2UgTWFjIE9TIFgpIEFwcGxlV2ViS2l0LzUzNC40NiAoS0hUTUwsIGxpa2UgR2Vja28pIE1vYmlsZS85QjIwNiIsYW5kcm9pZDoiTW96aWxsYS81LjAgKExpbnV4OyBVOyBBbmRyb2lkIDQuMC4zOyBlbi11czsgR1QtSTkxMDAgQnVpbGQvSU1MNzRLKSBBcHBsZVdlYktpdC81MzQuNDYgKEtIVE1MLCBsaWtlIEdlY2tvKSBWZXJzaW9uLzQuMCBNb2JpbGUgU2FmYXJpLzUzNC40NiIsYW5kcm9pZF9waG9uZToiTW96aWxsYS81LjAgKExpbnV4OyBVOyBBbmRyb2lkIDQuMC4zOyBlbi11czsgR1QtSTkxMDAgQnVpbGQvSU1MNzRLKSBBcHBsZVdlYktpdC81MzQuNDYgKEtIVE1MLCBsaWtlIEdlY2tvKSBWZXJzaW9uLzQuMCBNb2JpbGUgU2FmYXJpLzUzNC40NiIsYW5kcm9pZF90YWJsZXQ6Ik1vemlsbGEvNS4wIChMaW51eDsgQW5kcm9pZCA0LjEuMjsgTmV4dXMgNyBCdWlsZC9KWjA1NEspIEFwcGxlV2ViS2l0LzUzNS4xOSAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS8xOC4wLjEwMjUuMTY2IFNhZmFyaS81MzUuMTkiLGJsYWNrYmVycnk6Ik1vemlsbGEvNS4wIChCQjEwOyBUb3VjaCkgQXBwbGVXZWJLaXQvNTM3LjEwKyAoS0hUTUwsIGxpa2UgR2Vja28pIFZlcnNpb24vMTAuMC45LjIzNzIgTW9iaWxlIFNhZmFyaS81MzcuMTArIix3aW5waG9uZToiTW96aWxsYS81LjAgKGNvbXBhdGlibGU7IE1TSUUgMTAuMDsgV2luZG93cyBQaG9uZSA4LjA7IFRyaWRlbnQvNi4wOyBJRU1vYmlsZS8xMC4wOyBBUk07IFRvdWNoOyBOT0tJQTsgTHVtaWEgOTIwKSJ9W2FdO2lmKHUmJihELmJyb3dzZXIud2Via2l0JiZhIT09IndpbnBob25lInx8RC5icm93c2VyLm1zaWUmJmE9PT0id2lucGhvbmUiKSl7aWYoRC5icm93c2VyLnNhZmFyaSl7dmFyIF89d2luZG93Lm5hdmlnYXRvcjt3aW5kb3cubmF2aWdhdG9yPW5ldyBPYmplY3QoKTt3aW5kb3cubmF2aWdhdG9yLl9fcHJvdG9fXz1fO3dpbmRvdy5uYXZpZ2F0b3IuX19kZWZpbmVHZXR0ZXJfXygndXNlckFnZW50JyxmdW5jdGlvbigpe3JldHVybiB1fSl9ZWxzZXtPYmplY3QuZGVmaW5lUHJvcGVydHkobmF2aWdhdG9yLCJ1c2VyQWdlbnQiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdX19KX1pZihELmJyb3dzZXIud2Via2l0KXtxLmJyb3dzZXIubXNpZT1xLmJyb3dzZXIub3BlcmE9cS5icm93c2VyLm1vemlsbGE9ZmFsc2U7cS5icm93c2VyLndlYmtpdD10cnVlO3EuYnJvd3Nlci52ZXJzaW9uPSI1MzQuNDYifWVsc2V7fUQuX3VwZGF0ZSgkLnNhcC5zaW11bGF0ZU1vYmlsZU9uRGVza3RvcCl9fX0kLm9zPSQuZXh0ZW5kKHtvczpELm9zLm5hbWUsdmVyc2lvbjpELm9zLnZlcnNpb25TdHIsZlZlcnNpb246RC5vcy52ZXJzaW9ufSwkLm9zKTskLm9zW0Qub3MubmFtZV09dHJ1ZTskLmV4dGVuZCgkLnN1cHBvcnQse3JldGluYTp3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbz49Mn0pOyQuZGV2aWNlPSQuZXh0ZW5kKHt9LCQuZGV2aWNlKTskLmRldmljZS5pcz0kLmV4dGVuZCh7c3RhbmRhbG9uZTp3aW5kb3cubmF2aWdhdG9yLnN0YW5kYWxvbmUsbGFuZHNjYXBlOkQub3JpZW50YXRpb24ubGFuZHNjYXBlLHBvcnRyYWl0OkQub3JpZW50YXRpb24ucG9ydHJhaXQsaXBob25lOkQub3MuaW9zJiZELnN5c3RlbS5waG9uZSxpcGFkOkQub3MuaW9zJiZELnN5c3RlbS50YWJsZXQsYW5kcm9pZF9waG9uZTpELnN5c3RlbS5waG9uZSYmRC5vcy5hbmRyb2lkLGFuZHJvaWRfdGFibGV0OkQuc3lzdGVtLnRhYmxldCYmRC5vcy5hbmRyb2lkLHRhYmxldDpELnN5c3RlbS50YWJsZXQscGhvbmU6RC5zeXN0ZW0ucGhvbmUsZGVza3RvcDpELnN5c3RlbS5kZXNrdG9wfSwkLmRldmljZS5pcyk7dmFyIGI9ZmFsc2U7JC5zYXAuaW5pdE1vYmlsZT1mdW5jdGlvbihvKXt2YXIgYz0kKCJoZWFkIik7aWYoIWIpe2I9dHJ1ZTtvPSQuZXh0ZW5kKHt9LHt2aWV3cG9ydDp0cnVlLHN0YXR1c0JhcjoiZGVmYXVsdCIsaGlkZUJyb3dzZXI6dHJ1ZSxwcmV2ZW50U2Nyb2xsOnRydWUscHJldmVudFBob25lTnVtYmVyRGV0ZWN0aW9uOnRydWUsdXNlRnVsbFNjcmVlbkhlaWdodDp0cnVlLGhvbWVJY29uUHJlY29tcG9zZWQ6ZmFsc2V9LG8pO2lmKEQub3MuaW9zJiZvLnByZXZlbnRQaG9uZU51bWJlckRldGVjdGlvbil7Yy5hcHBlbmQoJCgnPG1ldGEgbmFtZT0iZm9ybWF0LWRldGVjdGlvbiIgY29udGVudD0idGVsZXBob25lPW5vIj4nKSl9ZWxzZSBpZihELmJyb3dzZXIubXNpZSl7Yy5hcHBlbmQoJCgnPG1ldGEgaHR0cC1lcXVpdj0iY2xlYXJ0eXBlIiBjb250ZW50PSJvbiI+JykpO2MuYXBwZW5kKCQoJzxtZXRhIG5hbWU9Im1zYXBwbGljYXRpb24tdGFwLWhpZ2hsaWdodCIgY29udGVudD0ibm8iLz4nKSl9dmFyIGk9RC5vcy5pb3MmJkQub3MudmVyc2lvbj49NyYmRC5vcy52ZXJzaW9uPDgmJkQuYnJvd3Nlci5uYW1lPT09InNmIjtpZihvLnZpZXdwb3J0KXt2YXIgbTtpZihpJiZELnN5c3RlbS5waG9uZSl7bT0nbWluaW1hbC11aSwgaW5pdGlhbC1zY2FsZT0xLjAsIG1heGltdW0tc2NhbGU9MS4wLCB1c2VyLXNjYWxhYmxlPTAnfWVsc2UgaWYoaSYmRC5zeXN0ZW0udGFibGV0KXttPSdpbml0aWFsLXNjYWxlPTEuMCwgbWF4aW11bS1zY2FsZT0xLjAsIHVzZXItc2NhbGFibGU9bm8nfWVsc2UgaWYoJC5kZXZpY2UuaXMuaXBob25lJiYoTWF0aC5tYXgod2luZG93LnNjcmVlbi5oZWlnaHQsd2luZG93LnNjcmVlbi53aWR0aCk9PT01NjgpKXttPSJ1c2VyLXNjYWxhYmxlPTAsIGluaXRpYWwtc2NhbGU9MS4wIn1lbHNlIGlmKEQub3MuYW5kcm9pZCYmRC5vcy52ZXJzaW9uPDMpe209IndpZHRoPWRldmljZS13aWR0aCwgaGVpZ2h0PWRldmljZS1oZWlnaHQsIGluaXRpYWwtc2NhbGU9MS4wLCBtYXhpbXVtLXNjYWxlPTEuMCwgdXNlci1zY2FsYWJsZT1ubyJ9ZWxzZSBpZihELm9zLndpbnBob25lKXttPSJ3aWR0aD0zMjAsIHVzZXItc2NhbGFibGU9bm8ifWVsc2V7bT0id2lkdGg9ZGV2aWNlLXdpZHRoLCBpbml0aWFsLXNjYWxlPTEuMCwgbWF4aW11bS1zY2FsZT0xLjAsIHVzZXItc2NhbGFibGU9bm8ifWMuYXBwZW5kKCQoJzxtZXRhIG5hbWU9InZpZXdwb3J0IiBjb250ZW50PSInK20rJyI+JykpfWlmKEQub3MuaW9zKXtjLmFwcGVuZCgkKCc8bWV0YSBuYW1lPSJhcHBsZS1tb2JpbGUtd2ViLWFwcC1jYXBhYmxlIiBjb250ZW50PSJ5ZXMiPicpKTtjLmFwcGVuZCgkKCc8bWV0YSBuYW1lPSJhcHBsZS1tb2JpbGUtd2ViLWFwcC1zdGF0dXMtYmFyLXN0eWxlIiBjb250ZW50PSInK28uc3RhdHVzQmFyKyciPicpKX1pZihvLnByZXZlbnRTY3JvbGwpeyQod2luZG93KS5iaW5kKCJ0b3VjaG1vdmUiLGZ1bmN0aW9uIHNhcEluaXRNb2JpbGVUb3VjaE1vdmVIYW5kbGUoZSl7aWYoIWUuaXNNYXJrZWQoKSl7ZS5wcmV2ZW50RGVmYXVsdCgpfX0pfWlmKG8udXNlRnVsbFNjcmVlbkhlaWdodCl7JChmdW5jdGlvbigpe2RvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZS5oZWlnaHQ9IjEwMCUifSl9fWlmKG8uaG9tZUljb24pe3ZhciBJO2lmKHR5cGVvZiBvLmhvbWVJY29uPT09InN0cmluZyIpe0k9e3Bob25lOm8uaG9tZUljb259fWVsc2V7ST0kLmV4dGVuZCh7fSxvLmhvbWVJY29uKX1JLnByZWNvbXBvc2VkPW8uaG9tZUljb25QcmVjb21wb3NlZHx8SS5wcmVjb21wb3NlZDtJLmZhdmljb249by5ob21lSWNvbi5pY29ufHxJLmZhdmljb247SS5pY29uPXVuZGVmaW5lZDskLnNhcC5zZXRJY29ucyhJKX19OyQuc2FwLnNldEljb25zPWZ1bmN0aW9uKGkpe2lmKCFpfHwodHlwZW9mIGkhPT0ib2JqZWN0IikpeyQuc2FwLmxvZy53YXJuaW5nKCJDYWxsIHRvIGpRdWVyeS5zYXAuc2V0SWNvbnMoKSBoYXMgYmVlbiBpZ25vcmVkIGJlY2F1c2UgdGhlcmUgd2VyZSBubyBpY29ucyBnaXZlbiBvciB0aGUgYXJndW1lbnQgd2FzIG5vdCBhbiBvYmplY3QuIik7cmV0dXJufXZhciBjPSQoImhlYWQiKSxwPWkucHJlY29tcG9zZWQ/Ii1wcmVjb21wb3NlZCI6IiIsZz1mdW5jdGlvbihoKXtyZXR1cm4gaVtoXXx8aVsndGFibGV0QDInXXx8aVsncGhvbmVAMiddfHxpWydwaG9uZSddfHxpWyd0YWJsZXQnXX0scz17InBob25lIjoiIiwidGFibGV0IjoiNzJ4NzIiLCJwaG9uZUAyIjoiMTE0eDExNCIsInRhYmxldEAyIjoiMTQ0eDE0NCJ9O2lmKGlbImZhdmljb24iXSl7dmFyIGQ9Yy5maW5kKCJbcmVsXj1zaG9ydGN1dF0iKTtkLmVhY2goZnVuY3Rpb24oKXtpZih0aGlzLnJlbD09PSJzaG9ydGN1dCBpY29uIil7JCh0aGlzKS5yZW1vdmUoKX19KTtjLmFwcGVuZCgkKCc8bGluayByZWw9InNob3J0Y3V0IGljb24iIGhyZWY9IicraVsiZmF2aWNvbiJdKyciIC8+JykpfWlmKGcoInBob25lIikpe2MuZmluZCgiW3JlbD1hcHBsZS10b3VjaC1pY29uXSIpLnJlbW92ZSgpO2MuZmluZCgiW3JlbD1hcHBsZS10b3VjaC1pY29uLXByZWNvbXBvc2VkXSIpLnJlbW92ZSgpfWZvcih2YXIgZSBpbiBzKXtpW2VdPWlbZV18fGcoZSk7aWYoaVtlXSl7dmFyIGY9c1tlXTtjLmFwcGVuZCgkKCc8bGluayByZWw9ImFwcGxlLXRvdWNoLWljb24nK3ArJyIgJysoZj8nc2l6ZXM9IicrZisnIic6IiIpKycgaHJlZj0iJytpW2VdKyciIC8+JykpfX19fSkocSk7cmV0dXJuIHF9LGZhbHNlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnanF1ZXJ5LnNhcC5wcm9wZXJ0aWVzJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnanF1ZXJ5LnNhcC5wcm9wZXJ0aWVzJyk7c2FwLnVpLmRlZmluZSgianF1ZXJ5LnNhcC5wcm9wZXJ0aWVzIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnanF1ZXJ5LnNhcC5zamF4J10sZnVuY3Rpb24ocSl7InVzZSBzdHJpY3QiO3ZhciBQPWZ1bmN0aW9uKCl7dGhpcy5tUHJvcGVydGllcz17fTt0aGlzLmFLZXlzPVtdfTtQLnByb3RvdHlwZS5nZXRQcm9wZXJ0eT1mdW5jdGlvbihrLGQpe3ZhciB2PXRoaXMubVByb3BlcnRpZXNba107aWYodHlwZW9mKHYpPT0ic3RyaW5nIil7cmV0dXJuIHZ9ZWxzZSBpZihkKXtyZXR1cm4gZH1yZXR1cm4gbnVsbH07UC5wcm90b3R5cGUuZ2V0S2V5cz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmFLZXlzfTtQLnByb3RvdHlwZS5zZXRQcm9wZXJ0eT1mdW5jdGlvbihrLHYpe2lmKHR5cGVvZih2KSE9InN0cmluZyIpe3JldHVybn1pZih0eXBlb2YodGhpcy5tUHJvcGVydGllc1trXSkhPSJzdHJpbmciKXt0aGlzLmFLZXlzLnB1c2goayl9dGhpcy5tUHJvcGVydGllc1trXT12fTtQLnByb3RvdHlwZS5jbG9uZT1mdW5jdGlvbigpe3ZhciBjPW5ldyBQKCk7Yy5tUHJvcGVydGllcz1xLmV4dGVuZCh7fSx0aGlzLm1Qcm9wZXJ0aWVzKTtjLmFLZXlzPXEubWVyZ2UoW10sdGhpcy5hS2V5cyk7cmV0dXJuIGN9O3ZhciByPS8oPzpefFxyXG58XHJ8XG4pWyBcdFxmXSovO3ZhciBhPS8oXFx1WzAtOWEtZkEtRl17MCw0fSl8KFxcLil8KFxcJCl8KFsgXHRcZl0qWyBcdFxmOj1dWyBcdFxmXSopL2c7dmFyIEU9eydcXGYnOidcZicsJ1xcbic6J1xuJywnXFxyJzonXHInLCdcXHQnOidcdCd9O2Z1bmN0aW9uIHAodCxvKXt2YXIgbD10LnNwbGl0KHIpLEwsayx2LEssaSxtLGI7by5tUHJvcGVydGllcz17fTtvLmFLZXlzPVtdO2ZvcihpPTA7aTxsLmxlbmd0aDtpKyspe0w9bFtpXTtpZihMPT09IiJ8fEwuY2hhckF0KDApPT09IiMifHxMLmNoYXJBdCgwKT09PSIhIil7Y29udGludWV9YS5sYXN0SW5kZXg9Yj0wO3Y9IiI7Sz10cnVlO3doaWxlKG09YS5leGVjKEwpKXtpZihiPG0uaW5kZXgpe3YrPUwuc2xpY2UoYixtLmluZGV4KX1iPWEubGFzdEluZGV4O2lmKG1bMV0pe2lmKG1bMV0ubGVuZ3RoIT09Nil7dGhyb3cgbmV3IEVycm9yKCJJbmNvbXBsZXRlIFVuaWNvZGUgRXNjYXBlICciK21bMV0rIiciKX12Kz1TdHJpbmcuZnJvbUNoYXJDb2RlKHBhcnNlSW50KG1bMV0uc2xpY2UoMiksMTYpKX1lbHNlIGlmKG1bMl0pe3YrPUVbbVsyXV18fG1bMl0uc2xpY2UoMSl9ZWxzZSBpZihtWzNdKXtMPWxbKytpXTthLmxhc3RJbmRleD1iPTB9ZWxzZSBpZihtWzRdKXtpZihLKXtLPWZhbHNlO2s9djt2PSIifWVsc2V7dis9bVs0XX19fWlmKGI8TC5sZW5ndGgpe3YrPUwuc2xpY2UoYil9aWYoSyl7az12O3Y9IiJ9by5hS2V5cy5wdXNoKGspO28ubVByb3BlcnRpZXNba109dn1xLnNhcC51bmlxdWUoby5hS2V5cyl9cS5zYXAucHJvcGVydGllcz1mdW5jdGlvbiBwcm9wZXJ0aWVzKG0pe209cS5leHRlbmQoe3VybDp1bmRlZmluZWQsaGVhZGVyczp7fX0sbSk7dmFyIEE9ISFtLmFzeW5jLG89bmV3IFAoKTtmdW5jdGlvbiBfKHQpe2lmKHR5cGVvZih0KT09InN0cmluZyIpe3AodCxvKX19O2Z1bmN0aW9uIGIoKXt2YXIgUjtpZih0eXBlb2YobS51cmwpPT0ic3RyaW5nIil7Uj1xLnNhcC5sb2FkUmVzb3VyY2Uoe3VybDptLnVybCxkYXRhVHlwZTondGV4dCcsaGVhZGVyczptLmhlYWRlcnMsZmFpbE9uRXJyb3I6ZmFsc2UsYXN5bmM6QX0pfXJldHVybiBSfTtpZihBKXtyZXR1cm4gbmV3IHdpbmRvdy5Qcm9taXNlKGZ1bmN0aW9uKGMsZCl7dmFyIFI9YigpO2lmKCFSKXtjKG8pO3JldHVybn1SLnRoZW4oZnVuY3Rpb24odil7dHJ5e18odik7YyhvKX1jYXRjaChlKXtkKGUpfX0sZnVuY3Rpb24odil7ZCh2IGluc3RhbmNlb2YgRXJyb3I/djpuZXcgRXJyb3IoIlByb2JsZW0gZHVyaW5nIGxvYWRpbmcgb2YgcHJvcGVydHkgZmlsZSAnIittLnVybCsiJzogIit2KSl9KX0pfWVsc2V7XyhiKCkpO3JldHVybiBvfX07cmV0dXJuIHF9LGZhbHNlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnanF1ZXJ5LnNhcC5yZXNvdXJjZXMnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdqcXVlcnkuc2FwLnJlc291cmNlcycpO3NhcC51aS5kZWZpbmUoImpxdWVyeS5zYXAucmVzb3VyY2VzIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnanF1ZXJ5LnNhcC5wcm9wZXJ0aWVzJywnanF1ZXJ5LnNhcC5zdHJpbmdzJ10sZnVuY3Rpb24ocSl7InVzZSBzdHJpY3QiO3ZhciByPS9eKCg/OltBLVpdezIsM30oPzotW0EtWl17M30pezAsM30pfFtBLVpdezR9fFtBLVpdezUsOH0pKD86LShbQS1aXXs0fSkpPyg/Oi0oW0EtWl17Mn18WzAtOV17M30pKT8oLVswLTlBLVpdezUsOH18KD86WzAtOV1bMC05QS1aXXszfSkpKig/Oi0oWzAtOUEtV1laXSg/Oi1bMC05QS1aXXsyLDh9KSspKSooPzotKFgoPzotWzAtOUEtWl17MSw4fSkrKSk/JC9pO3ZhciBNPXsiaGUiOiJpdyIsInlpIjoiamkiLCJpZCI6ImluIiwic3IiOiJzaCJ9O3ZhciBhPXsiaXciOiJoZSIsImppIjoieWkiLCJpbiI6ImlkIiwic24iOiJzciJ9O3ZhciBiPS8tKHNhcHRyY3xzYXBwc2QpKD86LXwkKS9pO2Z1bmN0aW9uIG4oTCl7dmFyIG07aWYodHlwZW9mIEw9PT0nc3RyaW5nJyYmKG09ci5leGVjKEwucmVwbGFjZSgvXy9nLCctJykpKSl7dmFyIGc9bVsxXS50b0xvd2VyQ2FzZSgpO2c9TVtnXXx8Zzt2YXIgUz1tWzJdP21bMl0udG9Mb3dlckNhc2UoKTp1bmRlZmluZWQ7dmFyIFI9bVszXT9tWzNdLnRvVXBwZXJDYXNlKCk6dW5kZWZpbmVkO3ZhciBWPW1bNF07dmFyIHA9bVs2XTtpZigocCYmKG09Yi5leGVjKHApKSl8fChWJiYobT1iLmV4ZWMoVikpKSl7cmV0dXJuImVuX1VTXyIrbVsxXS50b0xvd2VyQ2FzZSgpfWlmKGc9PT0iemgiJiYhUil7aWYoUz09PSJoYW5zIil7Uj0iQ04ifWVsc2UgaWYoUz09PSJoYW50Iil7Uj0iVFcifX1yZXR1cm4gZysoUj8iXyIrUisoVj8iXyIrVi5zbGljZSgxKS5yZXBsYWNlKCItIiwiXyIpOiIiKToiIil9fWZ1bmN0aW9uIGQoKXt2YXIgTDtpZih3aW5kb3cuc2FwJiZzYXAudWkmJnNhcC51aS5nZXRDb3JlKXtMPXNhcC51aS5nZXRDb3JlKCkuZ2V0Q29uZmlndXJhdGlvbigpLmdldExhbmd1YWdlKCk7TD1uKEwpfXJldHVybiBMfHwiZW4ifWZ1bmN0aW9uIGMoTCl7dmFyIG07aWYodHlwZW9mIEw9PT0nc3RyaW5nJyYmKG09ci5leGVjKEwucmVwbGFjZSgvXy9nLCctJykpKSl7dmFyIGc9bVsxXS50b0xvd2VyQ2FzZSgpO2c9YVtnXXx8ZztyZXR1cm4gZysobVszXT8iLSIrbVszXS50b1VwcGVyQ2FzZSgpKyhtWzRdPyItIittWzRdLnNsaWNlKDEpLnJlcGxhY2UoIl8iLCItIik6IiIpOiIiKX19dmFyIGU9L14oKD86W14/I10qXC8pP1teXC8/I10qKShcLlteLlwvPyNdKykoKD86XD8oW14jXSopKT8oPzojKC4qKSk/KSQvO3ZhciB2PVsiLnByb3BlcnRpZXMiLCIuaGRidGV4dGJ1bmRsZSJdO2Z1bmN0aW9uIHModSl7dmFyIG09ZS5leGVjKHUpO3JldHVybiBtJiZ7dXJsOnUscHJlZml4Om1bMV0sZXh0Om1bMl0scXVlcnk6bVs0XSxoYXNoOihtWzVdfHwiIiksc3VmZml4Om1bMl0rKG1bM118fCIiKX19dmFyIEI9ZnVuY3Rpb24odSxMLGksQSl7dGhpcy5zTG9jYWxlPW4oTCl8fGQoKTt0aGlzLm9VcmxJbmZvPXModSk7aWYoIXRoaXMub1VybEluZm98fHEuaW5BcnJheSh0aGlzLm9VcmxJbmZvLmV4dCx2KTwwKXt0aHJvdyBuZXcgRXJyb3IoInJlc291cmNlIFVSTCAnIit1KyInIGhhcyB1bmtub3duIHR5cGUgKHNob3VsZCBiZSBvbmUgb2YgIit2LmpvaW4oIiwiKSsiKSIpfXRoaXMuYkluY2x1ZGVJbmZvPWk7dGhpcy5hQ3VzdG9tQnVuZGxlcz1bXTt0aGlzLmFQcm9wZXJ0eUZpbGVzPVtdO3RoaXMuYUxvY2FsZXM9W107dmFyIHA9bCh0aGlzLHRoaXMuc0xvY2FsZSxBKTtpZihBKXt0aGlzLl9wcm9taXNlPXB9fTtCLnByb3RvdHlwZT17fTtCLnByb3RvdHlwZS5fZW5oYW5jZT1mdW5jdGlvbihDKXtpZihDJiZDIGluc3RhbmNlb2YgQil7dGhpcy5hQ3VzdG9tQnVuZGxlcy5wdXNoKEMpfWVsc2V7cS5zYXAubG9nLmVycm9yKCJDdXN0b20gUmVzb3VyY2VCdW5kbGUgaXMgZWl0aGVyIHVuZGVmaW5lZCBvciBub3QgYW4gaW5zdGFuY2VvZiBqUXVlcnkuc2FwLnV0aWwuUmVzb3VyY2VCdW5kbGUuIFRoZXJlZm9yZSB0aGlzIGN1c3RvbSBSZXNvdXJjZUJ1bmRsZSB3aWxsIGJlIGlnbm9yZWQhIil9fTtCLnByb3RvdHlwZS5nZXRUZXh0PWZ1bmN0aW9uKGssQSxDKXt2YXIgVj1udWxsO2Zvcih2YXIgaT10aGlzLmFDdXN0b21CdW5kbGVzLmxlbmd0aC0xO2k+PTA7aS0tKXtWPXRoaXMuYUN1c3RvbUJ1bmRsZXNbaV0uZ2V0VGV4dChrLEEsdHJ1ZSk7aWYoViE9bnVsbCl7cmV0dXJuIFZ9fWZvcih2YXIgaT0wO2k8dGhpcy5hUHJvcGVydHlGaWxlcy5sZW5ndGg7aSsrKXtWPXRoaXMuYVByb3BlcnR5RmlsZXNbaV0uZ2V0UHJvcGVydHkoayk7aWYodHlwZW9mKFYpPT09InN0cmluZyIpe2JyZWFrfX1pZih0eXBlb2YoVikhPT0ic3RyaW5nIil7dmFyIHQ9dGhpcy5hTG9jYWxlc1swXTt3aGlsZSh0Lmxlbmd0aD4wKXtpZih0PT0iemhfSEsiKXt0PSJ6aF9UVyJ9ZWxzZXt2YXIgcD10Lmxhc3RJbmRleE9mKCdfJyk7aWYocD49MCl7dD10LnN1YnN0cmluZygwLHApfWVsc2UgaWYodCE9ImVuIil7dD0iZW4ifWVsc2V7dD0iIn19dmFyIFA9bCh0aGlzLHQpO2lmKFA9PW51bGwpe2NvbnRpbnVlfVY9UC5nZXRQcm9wZXJ0eShrKTtpZih0eXBlb2YoVik9PT0ic3RyaW5nIil7YnJlYWt9fX1pZighQyYmdHlwZW9mKFYpIT09InN0cmluZyIpe1Y9a31pZih0eXBlb2YoVik9PT0ic3RyaW5nIil7aWYoQSl7Vj1xLnNhcC5mb3JtYXRNZXNzYWdlKFYsQSl9aWYodGhpcy5iSW5jbHVkZUluZm8pe1Y9bmV3IFN0cmluZyhWKTtWLm9yaWdpbkluZm89e3NvdXJjZToiUmVzb3VyY2UgQnVuZGxlIix1cmw6dGhpcy5vVXJsSW5mby51cmwsbG9jYWxlOnRoaXMuc0xvY2FsZSxrZXk6a319fXJldHVybiBWfTtmdW5jdGlvbiBsKG8sTCxBKXt2YXIgdT1vLm9VcmxJbmZvLFIscCxQO2lmKHEuaW5BcnJheShMLG8uYUxvY2FsZXMpPT0tMSl7aWYoZihMKSl7c3dpdGNoKHUuZXh0KXtjYXNlJy5oZGJ0ZXh0YnVuZGxlJzpSPXt1cmw6dS51cmwsaGVhZGVyczp7IkFjY2VwdC1MYW5ndWFnZSI6YyhMKXx8IiJ9fTticmVhaztkZWZhdWx0OlI9e3VybDp1LnByZWZpeCsoTD8iXyIrTDoiIikrdS5zdWZmaXh9O2JyZWFrfWlmKEEpe1IuYXN5bmM9dHJ1ZTtQPXdpbmRvdy5Qcm9taXNlLnJlc29sdmUocS5zYXAucHJvcGVydGllcyhSKSl9ZWxzZXtwPXEuc2FwLnByb3BlcnRpZXMoUil9fWVsc2V7cD17Z2V0UHJvcGVydHk6ZnVuY3Rpb24oKXtyZXR1cm4gdW5kZWZpbmVkfX07aWYoQSl7UD13aW5kb3cuUHJvbWlzZS5yZXNvbHZlKHApfX1pZihBKXtQLnRoZW4oZnVuY3Rpb24oZyl7by5hUHJvcGVydHlGaWxlcy5wdXNoKGcpO28uYUxvY2FsZXMucHVzaChMKX0pO3JldHVybiBQfWVsc2V7by5hUHJvcGVydHlGaWxlcy5wdXNoKHApO28uYUxvY2FsZXMucHVzaChMKTtyZXR1cm4gcH19cmV0dXJuIEE/d2luZG93LlByb21pc2UucmVzb2x2ZShudWxsKTpudWxsfWZ1bmN0aW9uIGYoTCl7dmFyIGc9d2luZG93LnNhcCYmc2FwLnVpJiZzYXAudWkuZ2V0Q29yZSYmc2FwLnVpLmdldENvcmUoKS5nZXRDb25maWd1cmF0aW9uKCkuZ2V0U3VwcG9ydGVkTGFuZ3VhZ2VzKCk7aWYoZyYmZy5sZW5ndGg+MCl7cmV0dXJuIHEuaW5BcnJheShMLGcpPj0wfXJldHVybiB0cnVlfXEuc2FwLnJlc291cmNlcz1mdW5jdGlvbiByZXNvdXJjZXMocCl7cD1xLmV4dGVuZCh7dXJsOiIiLGxvY2FsZTp1bmRlZmluZWQsaW5jbHVkZUluZm86ZmFsc2V9LHApO3ZhciBBPSEhcC5hc3luYzt2YXIgbz1uZXcgQihwLnVybCxwLmxvY2FsZSxwLmluY2x1ZGVJbmZvLEEpO2lmKEEpe3JldHVybiBuZXcgd2luZG93LlByb21pc2UoZnVuY3Rpb24oZyxoKXtmdW5jdGlvbiBfKCl7ZyhvKTtkZWxldGUgby5fcHJvbWlzZX1vLl9wcm9taXNlLnRoZW4oXyxfKX0pfWVsc2V7cmV0dXJuIG99fTtxLnNhcC5yZXNvdXJjZXMuX2dldEZhbGxiYWNrTG9jYWxlcz1mdW5jdGlvbihMLFMpe3ZhciB0PW4oTCksZz1bXTtmdW5jdGlvbiBoKEwpe3JldHVybiFTfHxTLmxlbmd0aD09PTB8fHEuaW5BcnJheShMLFMpPj0wfXdoaWxlKHQpe2lmKGgodCkpe2cucHVzaCh0KX1pZih0PT09InpoX0hLIil7dD0iemhfVFcifWVsc2V7dmFyIHA9dC5sYXN0SW5kZXhPZignXycpO2lmKHA+MCl7dD10LnNsaWNlKDAscCl9ZWxzZSBpZih0IT09ImVuIil7dD0iZW4ifWVsc2V7dD0iIn19fWlmKGgoIiIpKXtnLnB1c2goIiIpfXJldHVybiBnfTtyZXR1cm4gcX0sZmFsc2UpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuR2xvYmFsJykpe2lmKHdpbmRvdy5PcGVuQWpheCYmd2luZG93Lk9wZW5BamF4Lmh1Yil7T3BlbkFqYXguaHViLnJlZ2lzdGVyTGlicmFyeSgic2FwIiwiaHR0cDovL3d3dy5zYXAuY29tLyIsIjAuMSIse30pfWpRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLkdsb2JhbCcpO3NhcC51aS5kZWZpbmUoInNhcC91aS9HbG9iYWwiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdqcXVlcnkuc2FwLmRvbSddLGZ1bmN0aW9uKHEpeyJ1c2Ugc3RyaWN0IjtpZih0eXBlb2Ygd2luZG93LnNhcCE9PSJvYmplY3QiJiZ0eXBlb2Ygd2luZG93LnNhcCE9PSJmdW5jdGlvbiIpe3dpbmRvdy5zYXA9e319aWYodHlwZW9mIHdpbmRvdy5zYXAudWkhPT0ib2JqZWN0Iil7d2luZG93LnNhcC51aT17fX1zYXAudWk9cS5leHRlbmQoc2FwLnVpLHt2ZXJzaW9uOiIxLjI0LjIiLGJ1aWxkaW5mbzp7bGFzdGNoYW5nZToiJHtsZGkuc2NtLnJldmlzaW9ufSIsYnVpbGR0aW1lOiIyMDE0MTAxNDE0MjYifX0pO3NhcC51aS5nZXRWZXJzaW9uSW5mbz1mdW5jdGlvbihMKXtpZighc2FwLnVpLnZlcnNpb25pbmZvKXtzYXAudWkudmVyc2lvbmluZm89cS5zYXAubG9hZFJlc291cmNlKCJzYXAtdWktdmVyc2lvbi5qc29uIil9aWYoTCE9PXVuZGVmaW5lZCl7dmFyIGE9c2FwLnVpLnZlcnNpb25pbmZvLmxpYnJhcmllcztmb3IodmFyIGk9MCxsPWEubGVuZ3RoO2k8bDtpKyspe2lmKGFbaV0ubmFtZT09PUwpe3JldHVybiBhW2ldfX19ZWxzZXtyZXR1cm4gc2FwLnVpLnZlcnNpb25pbmZvfX07c2FwLnVpLm5hbWVzcGFjZT1mdW5jdGlvbihuKXtyZXR1cm4gcS5zYXAuZ2V0T2JqZWN0KG4sMCl9O3NhcC51aS5sYXp5UmVxdWlyZT1mdW5jdGlvbihjLG0sTSl7dmFyIGY9Yy5yZXBsYWNlKC9cLy9naSwiXC4iKSxsPWYubGFzdEluZGV4T2YoIi4iKSxwPWYuc3Vic3RyKDAsbCksQz1mLnN1YnN0cihsKzEpLFA9cS5zYXAuZ2V0T2JqZWN0KHAsMCksbz1QW0NdLGE9KG18fCJuZXciKS5zcGxpdCgiICIpLGI9cS5pbkFycmF5KCJuZXciLGEpO009TXx8ZjtpZighbyl7aWYoYj49MCl7bz1mdW5jdGlvbigpe3Euc2FwLmxvZy5kZWJ1ZygibGF6eSBzdHViIGZvciAnIitmKyInIChjb25zdHJ1Y3RvcikgY2FsbGVkLiIpO3Euc2FwLnJlcXVpcmUoTSk7dmFyIHI9UFtDXTtpZihyLl9zYXBVaUxhenlMb2FkZXIpe3Rocm93IG5ldyBFcnJvcigibGF6eVJlcXVpcmU6IHN0dWIgJyIrZisiJ2hhcyBub3QgYmVlbiByZXBsYWNlZCBieSBtb2R1bGUgJyIrTSsiJyIpfXZhciBpPXEuc2FwLm5ld09iamVjdChyLnByb3RvdHlwZSk7dmFyIFI9ci5hcHBseShpLGFyZ3VtZW50cyk7aWYoUiYmKHR5cGVvZiBSPT09ImZ1bmN0aW9uInx8dHlwZW9mIFI9PT0ib2JqZWN0Iikpe2k9Un1yZXR1cm4gaX07by5fc2FwVWlMYXp5TG9hZGVyPXRydWU7YS5zcGxpY2UoYiwxKX1lbHNle289e319UFtDXT1vfXEuZWFjaChhLGZ1bmN0aW9uKGkscyl7aWYoIW9bc10pe29bc109ZnVuY3Rpb24oKXtxLnNhcC5sb2cuZGVidWcoImxhenkgc3R1YiBmb3IgJyIrZisiLiIrcysiJyBjYWxsZWQuIik7cS5zYXAucmVxdWlyZShNKTt2YXIgcj1QW0NdO2lmKHJbc10uX3NhcFVpTGF6eUxvYWRlcil7dGhyb3cgbmV3IEVycm9yKCJsYXp5UmVxdWlyZTogc3R1YiAnIitmKyIuIitzKyInIGhhcyBub3QgYmVlbiByZXBsYWNlZCBieSBsb2FkZWQgbW9kdWxlICciK00rIiciKX1yZXR1cm4gcltzXS5hcHBseShyLGFyZ3VtZW50cyl9O29bc10uX3NhcFVpTGF6eUxvYWRlcj10cnVlfX0pfTtzYXAudWkucmVzb3VyY2U9ZnVuY3Rpb24obCxyKXt2YXIgbT1yLm1hdGNoKC9edGhlbWVzXC8oW15cL10rKVwvLyk7aWYobSl7bCs9Ii50aGVtZXMuIittWzFdO3I9ci5zdWJzdHIobVswXS5sZW5ndGgpfXJldHVybiBxLnNhcC5nZXRNb2R1bGVQYXRoKGwsJy8nKStyfTtzYXAudWkubG9jYWxSZXNvdXJjZXM9ZnVuY3Rpb24obil7cS5zYXAucmVnaXN0ZXJNb2R1bGVQYXRoKG4sIi4vIituLnJlcGxhY2UoL1wuL2csIi8iKSl9O3JldHVybiBzYXAudWl9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuYmFzZS5FdmVudCcpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5iYXNlLkV2ZW50Jyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2Jhc2UvRXZlbnQiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCcuL09iamVjdCddLGZ1bmN0aW9uKHEsQil7InVzZSBzdHJpY3QiO3ZhciBFPUIuZXh0ZW5kKCJzYXAudWkuYmFzZS5FdmVudCIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKGkscyxwKXtCLmFwcGx5KHRoaXMpO2lmKGFyZ3VtZW50cy5sZW5ndGg+MCl7dGhpcy5pbml0KGkscyxwKX19fSk7RS5wcm90b3R5cGUuaW5pdD1mdW5jdGlvbihpLHMscCl7dGhpcy5zSWQ9aTt0aGlzLm9Tb3VyY2U9czt0aGlzLm1QYXJhbWV0ZXJzPXB8fHt9O3RoaXMuYkNhbmNlbEJ1YmJsZT1mYWxzZTt0aGlzLmJQcmV2ZW50RGVmYXVsdD1mYWxzZX07RS5wcm90b3R5cGUucmVzZXQ9ZnVuY3Rpb24oKXt0aGlzLnNJZD0iIjt0aGlzLm9Tb3VyY2U9bnVsbDt0aGlzLm1QYXJhbWV0ZXJzPW51bGw7dGhpcy5iQ2FuY2VsQnViYmxlPWZhbHNlO3RoaXMuYlByZXZlbnREZWZhdWx0PWZhbHNlfTtFLnByb3RvdHlwZS5nZXRJZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnNJZH07RS5wcm90b3R5cGUuZ2V0U291cmNlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub1NvdXJjZX07RS5wcm90b3R5cGUuZ2V0UGFyYW1ldGVycz1mdW5jdGlvbigpe3JldHVybiB0aGlzLm1QYXJhbWV0ZXJzfTtFLnByb3RvdHlwZS5nZXRQYXJhbWV0ZXI9ZnVuY3Rpb24obil7cmV0dXJuIHRoaXMubVBhcmFtZXRlcnNbbl19O0UucHJvdG90eXBlLmNhbmNlbEJ1YmJsZT1mdW5jdGlvbigpe3RoaXMuYkNhbmNlbEJ1YmJsZT10cnVlfTtFLnByb3RvdHlwZS5wcmV2ZW50RGVmYXVsdD1mdW5jdGlvbigpe3RoaXMuYlByZXZlbnREZWZhdWx0PXRydWV9O3JldHVybiBFfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmJhc2UuRXZlbnRQcm92aWRlcicpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5iYXNlLkV2ZW50UHJvdmlkZXInKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvYmFzZS9FdmVudFByb3ZpZGVyIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnLi9FdmVudCcsJy4vT2JqZWN0JywnLi9PYmplY3RQb29sJ10sZnVuY3Rpb24ocSxFLEIsTyl7InVzZSBzdHJpY3QiO3ZhciBhPUIuZXh0ZW5kKCJzYXAudWkuYmFzZS5FdmVudFByb3ZpZGVyIix7Y29uc3RydWN0b3I6ZnVuY3Rpb24oKXtCLmFwcGx5KHRoaXMpO3RoaXMubUV2ZW50UmVnaXN0cnk9e319fSk7YS5NX0VWRU5UUz17RXZlbnRIYW5kbGVyQ2hhbmdlOiJFdmVudEhhbmRsZXJDaGFuZ2UifTthLnByb3RvdHlwZS5vRXZlbnRQb29sPW5ldyBPKEUpO2EucHJvdG90eXBlLmF0dGFjaEV2ZW50PWZ1bmN0aW9uKGUsZCxmLGwpe2lmKHR5cGVvZihkKT09PSJmdW5jdGlvbiIpe2w9ZjtmPWQ7ZD11bmRlZmluZWR9aWYoIXRoaXMubUV2ZW50UmVnaXN0cnlbZV0pe3RoaXMubUV2ZW50UmVnaXN0cnlbZV09W119dGhpcy5tRXZlbnRSZWdpc3RyeVtlXS5wdXNoKHtvTGlzdGVuZXI6bCxmRnVuY3Rpb246ZixvRGF0YTpkfSk7dGhpcy5maXJlRXZlbnQoYS5NX0VWRU5UUy5FdmVudEhhbmRsZXJDaGFuZ2Use0V2ZW50SWQ6ZSx0eXBlOidsaXN0ZW5lckF0dGFjaGVkJ30pO3JldHVybiB0aGlzfTthLnByb3RvdHlwZS5hdHRhY2hFdmVudE9uY2U9ZnVuY3Rpb24oZSxkLGYsbCl7aWYodHlwZW9mKGQpPT09ImZ1bmN0aW9uIil7bD1mO2Y9ZDtkPXVuZGVmaW5lZH1mdW5jdGlvbiBvKCl7dGhpcy5kZXRhY2hFdmVudChlLG8pO2YuYXBwbHkobHx8dGhpcyxhcmd1bWVudHMpfXRoaXMuYXR0YWNoRXZlbnQoZSxkLG8sdW5kZWZpbmVkKTtyZXR1cm4gdGhpc307YS5wcm90b3R5cGUuZGV0YWNoRXZlbnQ9ZnVuY3Rpb24oZSxmLGwpe3ZhciBiPXRoaXMubUV2ZW50UmVnaXN0cnlbZV07aWYoIWIpe3JldHVybiB0aGlzfXZhciBMPWZhbHNlO2Zvcih2YXIgaT0wLGM9Yi5sZW5ndGg7aTxjO2krKyl7aWYoYltpXS5mRnVuY3Rpb249PT1mJiZiW2ldLm9MaXN0ZW5lcj09PWwpe2Iuc3BsaWNlKGksMSk7TD10cnVlO2JyZWFrfX1pZihiLmxlbmd0aD09MCl7ZGVsZXRlIHRoaXMubUV2ZW50UmVnaXN0cnlbZV19aWYoTCl7dGhpcy5maXJlRXZlbnQoYS5NX0VWRU5UUy5FdmVudEhhbmRsZXJDaGFuZ2Use0V2ZW50SWQ6ZSx0eXBlOidsaXN0ZW5lckRldGFjaGVkJ30pfXJldHVybiB0aGlzfTthLnByb3RvdHlwZS5maXJlRXZlbnQ9ZnVuY3Rpb24oZSxwLEEsYil7aWYodHlwZW9mIHA9PSJib29sZWFuIil7Yj1BO0E9cH12YXIgYz10aGlzLm1FdmVudFJlZ2lzdHJ5W2VdLFA9ZmFsc2UsbyxkLEk7aWYoYnx8KGMmJnEuaXNBcnJheShjKSkpe2M9Yz9jLnNsaWNlKCk6W107bz10aGlzLm9FdmVudFBvb2wuYm9ycm93T2JqZWN0KGUsdGhpcyxwKTtmb3IodmFyIGk9MCxsPWMubGVuZ3RoO2k8bDtpKyspe0k9Y1tpXTtJLmZGdW5jdGlvbi5jYWxsKEkub0xpc3RlbmVyfHx0aGlzLG8sSS5vRGF0YSl9aWYoYil7ZD10aGlzLmdldEV2ZW50aW5nUGFyZW50KCk7d2hpbGUoZCYmIW8uYkNhbmNlbEJ1YmJsZSl7Yz1kLm1FdmVudFJlZ2lzdHJ5W2VdO2lmKGMmJmMgaW5zdGFuY2VvZiBBcnJheSl7Yz1jLnNsaWNlKCk7Zm9yKHZhciBpPTAsbD1jLmxlbmd0aDtpPGw7aSsrKXtJPWNbaV07SS5mRnVuY3Rpb24uY2FsbChJLm9MaXN0ZW5lcnx8ZCxvLEkub0RhdGEpfX1kPWQuZ2V0RXZlbnRpbmdQYXJlbnQoKX19UD1vLmJQcmV2ZW50RGVmYXVsdDt0aGlzLm9FdmVudFBvb2wucmV0dXJuT2JqZWN0KG8pfWlmKEEpe3JldHVybiFQfWVsc2V7cmV0dXJuIHRoaXN9fTthLnByb3RvdHlwZS5oYXNMaXN0ZW5lcnM9ZnVuY3Rpb24oZSl7cmV0dXJuISF0aGlzLm1FdmVudFJlZ2lzdHJ5W2VdfTthLmdldEV2ZW50TGlzdD1mdW5jdGlvbihlKXtyZXR1cm4gZS5tRXZlbnRSZWdpc3RyeX07YS5wcm90b3R5cGUuZ2V0RXZlbnRpbmdQYXJlbnQ9ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbH07YS5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtpZih0aGlzLmdldE1ldGFkYXRhKXtyZXR1cm4iRXZlbnRQcm92aWRlciAiK3RoaXMuZ2V0TWV0YWRhdGEoKS5nZXROYW1lKCl9ZWxzZXtyZXR1cm4iRXZlbnRQcm92aWRlciJ9fTthLnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKCl7dGhpcy5tRXZlbnRSZWdpc3RyeT17fTtCLnByb3RvdHlwZS5kZXN0cm95LmFwcGx5KHRoaXMsYXJndW1lbnRzKX07cmV0dXJuIGF9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuYmFzZS5NYW5hZ2VkT2JqZWN0TWV0YWRhdGEnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuYmFzZS5NYW5hZ2VkT2JqZWN0TWV0YWRhdGEnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvYmFzZS9NYW5hZ2VkT2JqZWN0TWV0YWRhdGEiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCcuL0RhdGFUeXBlJywnLi9NZXRhZGF0YSddLGZ1bmN0aW9uKHEsRCxNKXsidXNlIHN0cmljdCI7dmFyIGI9ZnVuY3Rpb24oYyxDKXtNLmFwcGx5KHRoaXMsYXJndW1lbnRzKX07Yi5wcm90b3R5cGU9cS5zYXAubmV3T2JqZWN0KE0ucHJvdG90eXBlKTtiLnByb3RvdHlwZS5hcHBseVNldHRpbmdzPWZ1bmN0aW9uKGMpe3ZhciBzPWMubWV0YWRhdGE7TS5wcm90b3R5cGUuYXBwbHlTZXR0aW5ncy5jYWxsKHRoaXMsYyk7dmFyIHI9LyhjaGlsZHJlbnxpZXN8dmVzfG9lc3xzZXN8Y2hlc3xzaGVzfHhlc3xzKSQvaTt2YXIgUz17J2NoaWxkcmVuJzotMywnaWVzJzoneScsJ3Zlcyc6J2YnLCdvZXMnOi0yLCdzZXMnOi0yLCdjaGVzJzotMiwnc2hlcyc6LTIsJ3hlcyc6LTIsJ3MnOi0xfTtmdW5jdGlvbiBuKGksZSxvKXt2YXIgTixJO2k9aXx8e307Zm9yKE4gaW4gaSl7ST1pW05dO2lmKGUmJnR5cGVvZiBJIT09Im9iamVjdCIpe0k9e307SVtlXT1pW05dfUk9cS5leHRlbmQoe30sbyxJKTtJLm5hbWU9TjtpZihJLm11bHRpcGxlPT09dHJ1ZSYmIUkuc2luZ3VsYXJOYW1lKXtJLnNpbmd1bGFyTmFtZT1OLnJlcGxhY2UocixmdW5jdGlvbigkLHApe3ZhciBSPVNbcC50b0xvd2VyQ2FzZSgpXTtyZXR1cm4gdHlwZW9mIFI9PT0ic3RyaW5nIj9SOnAuc2xpY2UoMCxSKX0pfWlbTl09SX1yZXR1cm4gaX1mdW5jdGlvbiBmKGkscCl7dmFyIFI9e30sTjtmb3IoTiBpbiBpKXtpZihwPT09KGlbTl0udmlzaWJpbGl0eT09PSdwdWJsaWMnKSl7UltOXT1pW05dfX1yZXR1cm4gUn12YXIgYT0vKFthLXpdW14uXSooPzpcLlthLXpdW14uXSopKilcLi87ZnVuY3Rpb24gZChOKXt2YXIgbT1hLmV4ZWMoTik7cmV0dXJuKG0mJm1bMV0pfHwiIn10aGlzLl9zTGlicmFyeU5hbWU9cy5saWJyYXJ5fHxkKHRoaXMuZ2V0TmFtZSgpKTt0aGlzLl9tUHJvcGVydGllcz1uKHMucHJvcGVydGllcywidHlwZSIse3R5cGU6InN0cmluZyIsZ3JvdXA6Ik1pc2MifSk7dmFyIEE9bihzLmFnZ3JlZ2F0aW9ucywidHlwZSIse3R5cGU6InNhcC51aS5jb3JlLkNvbnRyb2wiLG11bHRpcGxlOnRydWUsdmlzaWJpbGl0eToncHVibGljJ30pO3RoaXMuX21BZ2dyZWdhdGlvbnM9ZihBLHRydWUpO3RoaXMuX21Qcml2YXRlQWdncmVnYXRpb25zPWYoQSxmYWxzZSk7dGhpcy5fc0RlZmF1bHRBZ2dyZWdhdGlvbj1zLmRlZmF1bHRBZ2dyZWdhdGlvbnx8bnVsbDt0aGlzLl9tQXNzb2NpYXRpb25zPW4ocy5hc3NvY2lhdGlvbnMsInR5cGUiLHt0eXBlOiJzYXAudWkuY29yZS5Db250cm9sIixtdWx0aXBsZTpmYWxzZX0pO3RoaXMuX21FdmVudHM9bihzLmV2ZW50cyxudWxsLHthbGxvd1ByZXZlbnREZWZhdWx0OmZhbHNlfSk7dGhpcy5fYkVucmljaGVkPWZhbHNlO2lmKGMubWV0YWRhdGEuX192ZXJzaW9uPjEuMCl7dGhpcy5nZW5lcmF0ZUFjY2Vzc29ycygpfX07Yi5wcm90b3R5cGUuYWZ0ZXJBcHBseVNldHRpbmdzPWZ1bmN0aW9uKCl7TS5wcm90b3R5cGUuYWZ0ZXJBcHBseVNldHRpbmdzLmNhbGwodGhpcyk7dmFyIHA9dGhpcy5nZXRQYXJlbnQoKTtpZihwJiZwIGluc3RhbmNlb2YgYil7dGhpcy5fbUFsbEV2ZW50cz1xLmV4dGVuZCh7fSxwLl9tQWxsRXZlbnRzLHRoaXMuX21FdmVudHMpO3RoaXMuX21BbGxQcm9wZXJ0aWVzPXEuZXh0ZW5kKHt9LHAuX21BbGxQcm9wZXJ0aWVzLHRoaXMuX21Qcm9wZXJ0aWVzKTt0aGlzLl9tQWxsUHJpdmF0ZUFnZ3JlZ2F0aW9ucz1xLmV4dGVuZCh7fSxwLl9tQWxsUHJpdmF0ZUFnZ3JlZ2F0aW9ucyx0aGlzLl9tUHJpdmF0ZUFnZ3JlZ2F0aW9ucyk7dGhpcy5fbUFsbEFnZ3JlZ2F0aW9ucz1xLmV4dGVuZCh7fSxwLl9tQWxsQWdncmVnYXRpb25zLHRoaXMuX21BZ2dyZWdhdGlvbnMpO3RoaXMuX21BbGxBc3NvY2lhdGlvbnM9cS5leHRlbmQoe30scC5fbUFsbEFzc29jaWF0aW9ucyx0aGlzLl9tQXNzb2NpYXRpb25zKTt0aGlzLl9zRGVmYXVsdEFnZ3JlZ2F0aW9uPXRoaXMuX3NEZWZhdWx0QWdncmVnYXRpb258fHAuX3NEZWZhdWx0QWdncmVnYXRpb247aWYocC5fbUhpZGRlbkFnZ3JlZ2F0aW9ucyl7dGhpcy5fbUhpZGRlbkFnZ3JlZ2F0aW9ucz1xLmV4dGVuZCh7fSxwLl9tSGlkZGVuQWdncmVnYXRpb25zKX19ZWxzZXt0aGlzLl9tQWxsRXZlbnRzPXRoaXMuX21FdmVudHM7dGhpcy5fbUFsbFByb3BlcnRpZXM9dGhpcy5fbVByb3BlcnRpZXM7dGhpcy5fbUFsbFByaXZhdGVBZ2dyZWdhdGlvbnM9dGhpcy5fbVByaXZhdGVBZ2dyZWdhdGlvbnM7dGhpcy5fbUFsbEFnZ3JlZ2F0aW9ucz10aGlzLl9tQWdncmVnYXRpb25zO3RoaXMuX21BbGxBc3NvY2lhdGlvbnM9dGhpcy5fbUFzc29jaWF0aW9uc319O2IuS2luZD17UFJPUEVSVFk6MCxTSU5HTEVfQUdHUkVHQVRJT046MSxNVUxUSVBMRV9BR0dSRUdBVElPTjoyLFNJTkdMRV9BU1NPQ0lBVElPTjozLE1VTFRJUExFX0FTU09DSUFUSU9OOjQsRVZFTlQ6NX07Yi5wcm90b3R5cGUuZ2V0TGlicmFyeU5hbWU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc0xpYnJhcnlOYW1lfTtiLnByb3RvdHlwZS5pc0Fic3RyYWN0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2JBYnN0cmFjdH07Yi5wcm90b3R5cGUuYWRkUHJvcGVydHk9ZnVuY3Rpb24obixpKXtpLm5hbWU9bjt0aGlzLl9tUHJvcGVydGllc1tuXT1pO2lmKCF0aGlzLl9tQWxsUHJvcGVydGllc1tuXSl7dGhpcy5fbUFsbFByb3BlcnRpZXNbbl09aX1pZih0aGlzLl9iRW5yaWNoZWQpe3RoaXMuX2VucmljaENoaWxkSW5mb3MoKX19O2IucHJvdG90eXBlLmhhc1Byb3BlcnR5PWZ1bmN0aW9uKG4pe3JldHVybiEhdGhpcy5fbUFsbFByb3BlcnRpZXNbbl19O2IucHJvdG90eXBlLmdldFByb3BlcnRpZXM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbVByb3BlcnRpZXN9O2IucHJvdG90eXBlLmdldEFsbFByb3BlcnRpZXM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbUFsbFByb3BlcnRpZXN9O2IucHJvdG90eXBlLmdldEFnZ3JlZ2F0aW9ucz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9tQWdncmVnYXRpb25zfTtiLnByb3RvdHlwZS5oYXNBZ2dyZWdhdGlvbj1mdW5jdGlvbihuKXtyZXR1cm4hIXRoaXMuX21BbGxBZ2dyZWdhdGlvbnNbbl19O2IucHJvdG90eXBlLmdldEFsbEFnZ3JlZ2F0aW9ucz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9tQWxsQWdncmVnYXRpb25zfTtiLnByb3RvdHlwZS5nZXRBbGxQcml2YXRlQWdncmVnYXRpb25zPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21BbGxQcml2YXRlQWdncmVnYXRpb25zfTtiLnByb3RvdHlwZS5nZXRNYW5hZ2VkQWdncmVnYXRpb249ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuX21BbGxBZ2dyZWdhdGlvbnNbYV18fHRoaXMuX21BbGxQcml2YXRlQWdncmVnYXRpb25zW2FdfTtiLnByb3RvdHlwZS5nZXREZWZhdWx0QWdncmVnYXRpb25OYW1lPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NEZWZhdWx0QWdncmVnYXRpb259O2IucHJvdG90eXBlLmdldERlZmF1bHRBZ2dyZWdhdGlvbj1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9zRGVmYXVsdEFnZ3JlZ2F0aW9uJiZ0aGlzLmdldEFsbEFnZ3JlZ2F0aW9ucygpW3RoaXMuX3NEZWZhdWx0QWdncmVnYXRpb25dfTtiLnByb3RvdHlwZS5nZXRBc3NvY2lhdGlvbnM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbUFzc29jaWF0aW9uc307Yi5wcm90b3R5cGUuaGFzQXNzb2NpYXRpb249ZnVuY3Rpb24obil7cmV0dXJuISF0aGlzLl9tQWxsQXNzb2NpYXRpb25zW25dfTtiLnByb3RvdHlwZS5nZXRBbGxBc3NvY2lhdGlvbnM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbUFsbEFzc29jaWF0aW9uc307Yi5wcm90b3R5cGUuZ2V0RXZlbnRzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21FdmVudHN9O2IucHJvdG90eXBlLmhhc0V2ZW50PWZ1bmN0aW9uKG4pe3JldHVybiEhdGhpcy5fbUFsbEV2ZW50c1tuXX07Yi5wcm90b3R5cGUuZ2V0QWxsRXZlbnRzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21BbGxFdmVudHN9O2IucHJvdG90eXBlLmdldFByb3BlcnR5RGVmYXVsdHM9ZnVuY3Rpb24oKXt2YXIgZD10aGlzLl9tRGVmYXVsdHMsdDtpZihkKXtyZXR1cm4gZH1pZih0aGlzLmdldFBhcmVudCgpaW5zdGFuY2VvZiBiKXtkPXEuc2FwLm5ld09iamVjdCh0aGlzLmdldFBhcmVudCgpLmdldFByb3BlcnR5RGVmYXVsdHMoKSl9ZWxzZXtkPXt9fWZvcih2YXIgcyBpbiB0aGlzLl9tUHJvcGVydGllcyl7aWYodGhpcy5fbVByb3BlcnRpZXNbc10uZGVmYXVsdFZhbHVlIT09bnVsbCl7ZFtzXT10aGlzLl9tUHJvcGVydGllc1tzXS5kZWZhdWx0VmFsdWV9ZWxzZXt0PUQuZ2V0VHlwZSh0aGlzLl9tUHJvcGVydGllc1tzXS50eXBlKTtpZih0IGluc3RhbmNlb2YgRCl7ZFtzXT10LmdldERlZmF1bHRWYWx1ZSgpfWVsc2V7Zm9yKHZhciBpIGluIHQpe2Rbc109dFtpXTticmVha319fX1yZXR1cm4odGhpcy5fbURlZmF1bHRzPWQpfTtiLnByb3RvdHlwZS5jcmVhdGVQcm9wZXJ0eUJhZz1mdW5jdGlvbigpe2lmKCF0aGlzLl9mblByb3BlcnR5QmFnRmFjdG9yeSl7dGhpcy5fZm5Qcm9wZXJ0eUJhZ0ZhY3Rvcnk9cS5zYXAuZmFjdG9yeSh0aGlzLmdldFByb3BlcnR5RGVmYXVsdHMoKSl9cmV0dXJuIG5ldyh0aGlzLl9mblByb3BlcnR5QmFnRmFjdG9yeSkoKX07Yi5wcm90b3R5cGUuX2VucmljaENoaWxkSW5mb3M9ZnVuY3Rpb24oKXtpZih0aGlzLl9iRW5yaWNoZWQpe3JldHVybn1pZih0aGlzLmdldFBhcmVudCgpaW5zdGFuY2VvZiBiKXt0aGlzLmdldFBhcmVudCgpLl9lbnJpY2hDaGlsZEluZm9zKCl9dmFyIG0sbixpO2Z1bmN0aW9uIGEocCxuKXtyZXR1cm4gcCtuLnN1YnN0cmluZygwLDEpLnRvVXBwZXJDYXNlKCkrbi5zdWJzdHJpbmcoMSl9bT10aGlzLl9tUHJvcGVydGllcztmb3IobiBpbiBtKXtpPW1bbl07aS5fc05hbWU9bjtpLl9zVUlEPW47aS5fb1BhcmVudD10aGlzO2kuX2lLaW5kPWIuS2luZC5QUk9QRVJUWTtpLl9zTXV0YXRvcj1hKCJzZXQiLG4pO2kuX3NHZXR0ZXI9YSgiZ2V0IixuKX1tPXRoaXMuX21BZ2dyZWdhdGlvbnM7Zm9yKG4gaW4gbSl7aT1tW25dO2kuX3NOYW1lPW47aS5fc1VJRD0iYWdncmVnYXRpb246IituO2kuX29QYXJlbnQ9dGhpcztpLl9zRGVzdHJ1Y3Rvcj1hKCJkZXN0cm95IixuKTtpLl9zR2V0dGVyPWEoImdldCIsbik7aWYoaS5tdWx0aXBsZSl7aS5faUtpbmQ9Yi5LaW5kLk1VTFRJUExFX0FHR1JFR0FUSU9OO2kuX3NNdXRhdG9yPWEoImFkZCIsaS5zaW5ndWxhck5hbWUpO2kuX3NSZW1vdmVNdXRhdG9yPWEoInJlbW92ZSIsaS5zaW5ndWxhck5hbWUpO2kuX3NSZW1vdmVBbGxNdXRhdG9yPWEoInJlbW92ZUFsbCIsbil9ZWxzZXtpLl9pS2luZD1iLktpbmQuU0lOR0xFX0FHR1JFR0FUSU9OO2kuX3NNdXRhdG9yPWEoInNldCIsbil9fW09dGhpcy5fbUFzc29jaWF0aW9ucztmb3IobiBpbiBtKXtpPW1bbl07aS5fc05hbWU9bjtpLl9zVUlEPSJhc3NvY2lhdGlvbjoiK247aS5fb1BhcmVudD10aGlzO2kuX3NHZXR0ZXI9YSgiZ2V0IixuKTtpZihpLm11bHRpcGxlKXtpLl9pS2luZD1iLktpbmQuTVVMVElQTEVfQVNTT0NJQVRJT047aS5fc011dGF0b3I9YSgiYWRkIixpLnNpbmd1bGFyTmFtZSl9ZWxzZXtpLl9pS2luZD1iLktpbmQuU0lOR0xFX0FTU09DSUFUSU9OO2kuX3NNdXRhdG9yPWEoInNldCIsbil9fW09dGhpcy5fbUV2ZW50cztmb3IobiBpbiBtKXtpPW1bbl07aS5fc05hbWU9bjtpLl9zVUlEPSJldmVudDoiK247aS5fb1BhcmVudD10aGlzO2kuX2lLaW5kPWIuS2luZC5FVkVOVDtpLl9zTXV0YXRvcj1hKCJhdHRhY2giLG4pfXRoaXMuX2JFbnJpY2hlZD10cnVlfTtiLnByb3RvdHlwZS5nZXRKU09OS2V5cz1mdW5jdGlvbigpe2lmKHRoaXMuX21KU09OS2V5cyl7cmV0dXJuIHRoaXMuX21KU09OS2V5c310aGlzLl9lbnJpY2hDaGlsZEluZm9zKCk7dmFyIGo9e307ZnVuY3Rpb24gYShtKXt2YXIgbixpO2ZvcihuIGluIG0pe2k9bVtuXTtpZighaltuXXx8aS5faUtpbmQ8altuXS5faUtpbmQpe2pbbl09aX07altpLl9zVUlEXT1pfX1hKHRoaXMuZ2V0QWxsUHJvcGVydGllcygpKTthKHRoaXMuZ2V0QWxsQWdncmVnYXRpb25zKCkpO2EodGhpcy5nZXRBbGxBc3NvY2lhdGlvbnMoKSk7YSh0aGlzLmdldEFsbEV2ZW50cygpKTtyZXR1cm4odGhpcy5fbUpTT05LZXlzPWopfTtiLnByb3RvdHlwZS5nZW5lcmF0ZUFjY2Vzc29ycz1mdW5jdGlvbigpe3ZhciBjPXRoaXM7dmFyIGU9dGhpcy5nZXRDbGFzcygpLnByb3RvdHlwZTtmdW5jdGlvbiBnKHAsbixmLGQpe3ZhciBuPXArbi5zdWJzdHJpbmcoMCwxKS50b1VwcGVyQ2FzZSgpK24uc3Vic3RyaW5nKDEpO2lmKCFlW25dKXtlW25dPWQ/ZnVuY3Rpb24oKXtxLnNhcC5sb2cud2FybmluZygiVXNhZ2Ugb2YgZGVwcmVjYXRlZCBmZWF0dXJlOiAiK2MuZ2V0TmFtZSgpKyIuIituKTtyZXR1cm4gZi5hcHBseSh0aGlzLGFyZ3VtZW50cyl9OmY7Yy5fYVB1YmxpY01ldGhvZHMucHVzaChuKX19cS5lYWNoKHRoaXMuX21Qcm9wZXJ0aWVzLGZ1bmN0aW9uKG4saSl7ZygiZ2V0IixuLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0UHJvcGVydHkobil9KTtnKCJzZXQiLG4sZnVuY3Rpb24odil7dGhpcy5zZXRQcm9wZXJ0eShuLHYpO3JldHVybiB0aGlzfSxpLmRlcHJlY2F0ZWQpO2lmKGkuYmluZGFibGUpe2coImJpbmQiLG4sZnVuY3Rpb24ocCxmLG0pe3RoaXMuYmluZFByb3BlcnR5KG4scCxmLG0pO3JldHVybiB0aGlzfSxpLmRlcHJlY2F0ZWQpO2coInVuYmluZCIsbixmdW5jdGlvbihwKXt0aGlzLnVuYmluZFByb3BlcnR5KG4scCk7cmV0dXJuIHRoaXN9KX19KTtxLmVhY2godGhpcy5fbUFnZ3JlZ2F0aW9ucyxmdW5jdGlvbihuLGQpe2lmKCFkLm11bHRpcGxlKXtnKCJnZXQiLG4sZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRBZ2dyZWdhdGlvbihuKX0pO2coInNldCIsbixmdW5jdGlvbih2KXt0aGlzLnNldEFnZ3JlZ2F0aW9uKG4sdik7cmV0dXJuIHRoaXN9LGQuZGVwcmVjYXRlZCl9ZWxzZXt2YXIgaD1kLnNpbmd1bGFyTmFtZTtnKCJnZXQiLG4sZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRBZ2dyZWdhdGlvbihuLFtdKX0pO2coImFkZCIsaCxmdW5jdGlvbihhKXt0aGlzLmFkZEFnZ3JlZ2F0aW9uKG4sYSk7cmV0dXJuIHRoaXN9LGQuZGVwcmVjYXRlZCk7ZygiaW5zZXJ0IixoLGZ1bmN0aW9uKGksYSl7dGhpcy5pbnNlcnRBZ2dyZWdhdGlvbihuLGksYSk7cmV0dXJuIHRoaXN9LGQuZGVwcmVjYXRlZCk7ZygicmVtb3ZlIixoLGZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnJlbW92ZUFnZ3JlZ2F0aW9uKG4sYSl9KTtnKCJyZW1vdmVBbGwiLG4sZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yZW1vdmVBbGxBZ2dyZWdhdGlvbihuKX0pO2coImluZGV4T2YiLGgsZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuaW5kZXhPZkFnZ3JlZ2F0aW9uKG4sYSl9KX1nKCJkZXN0cm95IixuLGZ1bmN0aW9uKCl7dGhpcy5kZXN0cm95QWdncmVnYXRpb24obik7cmV0dXJuIHRoaXN9KTtpZihkLmJpbmRhYmxlKXtnKCJiaW5kIixuLGZ1bmN0aW9uKHAsdCxzLGYpe3RoaXMuYmluZEFnZ3JlZ2F0aW9uKG4scCx0LHMsZik7cmV0dXJuIHRoaXN9LGQuZGVwcmVjYXRlZCk7ZygidW5iaW5kIixuLGZ1bmN0aW9uKHApe3RoaXMudW5iaW5kQWdncmVnYXRpb24obixwKTtyZXR1cm4gdGhpc30pfX0pO3EuZWFjaCh0aGlzLl9tQXNzb2NpYXRpb25zLGZ1bmN0aW9uKG4saSl7aWYoIWkubXVsdGlwbGUpe2coImdldCIsbixmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldEFzc29jaWF0aW9uKG4pfSk7Zygic2V0IixuLGZ1bmN0aW9uKHYpe3RoaXMuc2V0QXNzb2NpYXRpb24obix2KTtyZXR1cm4gdGhpc30saS5kZXByZWNhdGVkKX1lbHNle3ZhciBkPWkuc2luZ3VsYXJOYW1lO2coImdldCIsbixmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldEFzc29jaWF0aW9uKG4sW10pfSk7ZygiYWRkIixkLGZ1bmN0aW9uKGEpe3RoaXMuYWRkQXNzb2NpYXRpb24obixhKTtyZXR1cm4gdGhpc30saS5kZXByZWNhdGVkKTtnKCJyZW1vdmUiLGQsZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMucmVtb3ZlQXNzb2NpYXRpb24obixhKX0pO2coInJlbW92ZUFsbCIsbixmdW5jdGlvbigpe3JldHVybiB0aGlzLnJlbW92ZUFsbEFzc29jaWF0aW9uKG4pfSl9fSk7cS5lYWNoKHRoaXMuX21FdmVudHMsZnVuY3Rpb24obixpKXtnKCJhdHRhY2giLG4sZnVuY3Rpb24oZCxmLG8pe3RoaXMuYXR0YWNoRXZlbnQobixkLGYsbyk7cmV0dXJuIHRoaXN9LGkuZGVwcmVjYXRlZCk7ZygiZGV0YWNoIixuLGZ1bmN0aW9uKGYsbyl7dGhpcy5kZXRhY2hFdmVudChuLGYsbyk7cmV0dXJuIHRoaXN9KTt2YXIgYT0hIWkuYWxsb3dQcmV2ZW50RGVmYXVsdDt2YXIgaD0hIWkuZW5hYmxlRXZlbnRCdWJibGluZztnKCJmaXJlIixuLGZ1bmN0aW9uKHApe3JldHVybiB0aGlzLmZpcmVFdmVudChuLHAsYSxoKX0pfSl9OyhmdW5jdGlvbigpe3ZhciB1PXt9O2Z1bmN0aW9uIGEoaSl7aT1zYXAudWkuZ2V0Q29yZSgpLmdldENvbmZpZ3VyYXRpb24oKS5nZXRVSURQcmVmaXgoKStpO3VbaV09dVtpXXx8MDtyZXR1cm4oaSt1W2ldKyspfWIudWlkPWE7Yi5wcm90b3R5cGUudWlkPWZ1bmN0aW9uKCl7dmFyIGk9dGhpcy5fc1VJRFRva2VuO2lmKHR5cGVvZiBpIT09InN0cmluZyIpe2k9dGhpcy5nZXROYW1lKCk7aT1pLnNsaWNlKGkubGFzdEluZGV4T2YoJy4nKSsxKTtpPWkucmVwbGFjZSgvKFthLXpdKShbQS1aXSkvZywiJDEgJDIiKS5zcGxpdCgiICIpLnNsaWNlKC0xKVswXTtpPXRoaXMuX3NVSURUb2tlbj1pLnJlcGxhY2UoLyhbXkEtWmEtejAtOS1fLjpdKXwoWzAtOV0rJCkvZywiIikudG9Mb3dlckNhc2UoKX1yZXR1cm4gYShpKX19KCkpO3JldHVybiBifSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUuQ29tcG9uZW50TWV0YWRhdGEnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS5Db21wb25lbnRNZXRhZGF0YScpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL0NvbXBvbmVudE1ldGFkYXRhIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL2Jhc2UvTWFuYWdlZE9iamVjdE1ldGFkYXRhJ10sZnVuY3Rpb24ocSxNKXsidXNlIHN0cmljdCI7dmFyIEM9ZnVuY3Rpb24oYyxvKXtNLmFwcGx5KHRoaXMsYXJndW1lbnRzKX07Qy5wcm90b3R5cGU9cS5zYXAubmV3T2JqZWN0KE0ucHJvdG90eXBlKTtDLnByZXByb2Nlc3NDbGFzc0luZm89ZnVuY3Rpb24oYyl7aWYoYyYmdHlwZW9mIGMubWV0YWRhdGE9PT0ic3RyaW5nIil7Yy5tZXRhZGF0YT17X3NyYzpjLm1ldGFkYXRhfX1yZXR1cm4gY307Qy5wcm90b3R5cGUuYXBwbHlTZXR0aW5ncz1mdW5jdGlvbihjKXt2YXIgcz1jLm1ldGFkYXRhO3ZhciBuPXRoaXMuZ2V0TmFtZSgpLHA9bi5yZXBsYWNlKC9cLlx3Kz8kLywiIik7aWYocy5fc3JjKXtpZihzLl9zcmM9PSJjb21wb25lbnQuanNvbiIpe3Euc2FwLmxvZy53YXJuaW5nKCJVc2FnZSBvZiBkZWNsYWNhdGlvbiBcIm1ldGFkYXRhOiAnY29tcG9uZW50Lmpzb24nXCIgaXMgZGVwcmVjYXRlZCAoY29tcG9uZW50ICIrbisiKS4gVXNlIFwibWV0YWRhdGE6ICdqc29uJ1wiIGluc3RlYWQuIil9ZWxzZSBpZihzLl9zcmMhPSJqc29uIil7dGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkIG1ldGFkYXRhIGRlY2xhcmF0aW9uIGZvciBjb21wb25lbnQgIituKyI6IFwiIitzLl9zcmMrIlwiISBVc2UgXCJtZXRhZGF0YTogJ2pzb24nXCIgdG8gbG9hZCBtZXRhZGF0YSBmcm9tIGNvbXBvbmVudC5qc29uLiIpfXZhciByPXAucmVwbGFjZSgvXC4vZywiLyIpKyIvY29tcG9uZW50Lmpzb24iO3Euc2FwLmxvZy5pbmZvKCJUaGUgbWV0YWRhdGEgb2YgdGhlIGNvbXBvbmVudCAiK24rIiBpcyBsb2FkZWQgZnJvbSBmaWxlICIrcisiLiIpO3RyeXt2YXIgUj1xLnNhcC5sb2FkUmVzb3VyY2Uocix7ZGF0YVR5cGU6Impzb24iLGZhaWxPbkVycm9yOmZhbHNlfSk7cS5leHRlbmQocyxSKX1jYXRjaChlKXtxLnNhcC5sb2cuZXJyb3IoIkZhaWxlZCB0byBsb2FkIGNvbXBvbmVudCBtZXRhZGF0YSBmcm9tIFwiIityKyJcIiAoY29tcG9uZW50ICIrbisiKSEgUmVhc29uOiAiK2UpfX1NLnByb3RvdHlwZS5hcHBseVNldHRpbmdzLmNhbGwodGhpcyxjKTt0aGlzLl9zQ29tcG9uZW50TmFtZT1wO3RoaXMuX2JJbml0aWFsaXplZD1mYWxzZTt0aGlzLl9pSW5zdGFuY2VDb3VudD0wO3RoaXMuX3NWZXJzaW9uPXMudmVyc2lvbjt0aGlzLl9tRGVwZW5kZW5jaWVzPXMuZGVwZW5kZW5jaWVzO3RoaXMuX2FJbmNsdWRlcz1zLmluY2x1ZGVzO3RoaXMuX21Db25maWc9cy5jb25maWc7dGhpcy5fbUN1c3RvbWl6aW5nPXMuY3VzdG9taXppbmc7dGhpcy5fbU1vZGVscz1zLm1vZGVsc3x8e307dGhpcy5fbVNlcnZpY2VzPXMuc2VydmljZXN8fHt9O3ZhciBQPXRoaXMuZ2V0UGFyZW50KCk7aWYoUCBpbnN0YW5jZW9mIEMpe3RoaXMuX21Db25maWc9cS5leHRlbmQodHJ1ZSx7fSxQLl9tQ29uZmlnLHRoaXMuX21Db25maWcpO3RoaXMuX21DdXN0b21pemluZz1xLmV4dGVuZCh0cnVlLHt9LFAuX21DdXN0b21pemluZyx0aGlzLl9tQ3VzdG9taXppbmcpO3RoaXMuX21Nb2RlbHM9cS5leHRlbmQodHJ1ZSx7fSxQLl9tTW9kZWxzLHRoaXMuX21Nb2RlbHMpO3RoaXMuX21TZXJ2aWNlcz1xLmV4dGVuZCh0cnVlLHt9LFAuX21TZXJ2aWNlcyx0aGlzLl9tU2VydmljZXMpfXRoaXMuX29TdGF0aWNJbmZvPXN9O0MucHJvdG90eXBlLmluaXQ9ZnVuY3Rpb24oKXtpZighdGhpcy5fYkluaXRpYWxpemVkKXt2YXIgcD10aGlzLmdldFBhcmVudCgpO2lmKHAgaW5zdGFuY2VvZiBDKXtwLmluaXQoKX10aGlzLl9sb2FkRGVwZW5kZW5jaWVzKCk7dGhpcy5fbG9hZEluY2x1ZGVzKCk7dGhpcy5fYkluaXRpYWxpemVkPXRydWV9fTtDLnByb3RvdHlwZS5leGl0PWZ1bmN0aW9uKCl7aWYodGhpcy5fYkluaXRpYWxpemVkKXt2YXIgcD10aGlzLmdldFBhcmVudCgpO2lmKHAgaW5zdGFuY2VvZiBDKXtwLmV4aXQoKX10aGlzLl9iSW5pdGlhbGl6ZWQ9ZmFsc2V9fTtDLnByb3RvdHlwZS5vbkluaXRDb21wb25lbnQ9ZnVuY3Rpb24oKXtpZih0aGlzLl9pSW5zdGFuY2VDb3VudD09PTAmJiFxLmlzRW1wdHlPYmplY3QodGhpcy5fbUN1c3RvbWl6aW5nKSl7cS5zYXAucmVxdWlyZSgic2FwLnVpLmNvcmUuQ3VzdG9taXppbmdDb25maWd1cmF0aW9uIik7c2FwLnVpLmNvcmUuQ3VzdG9taXppbmdDb25maWd1cmF0aW9uLmFjdGl2YXRlRm9yQ29tcG9uZW50KHRoaXMuX3NDb21wb25lbnROYW1lKX10aGlzLl9pSW5zdGFuY2VDb3VudCsrfTtDLnByb3RvdHlwZS5vbkV4aXRDb21wb25lbnQ9ZnVuY3Rpb24oKXt0aGlzLl9pSW5zdGFuY2VDb3VudC0tO2lmKHRoaXMuX2lJbnN0YW5jZUNvdW50PT09MCYmIXEuaXNFbXB0eU9iamVjdCh0aGlzLl9tQ3VzdG9taXppbmcpKXtpZihzYXAudWkuY29yZS5DdXN0b21pemluZ0NvbmZpZ3VyYXRpb24pe3NhcC51aS5jb3JlLkN1c3RvbWl6aW5nQ29uZmlndXJhdGlvbi5kZWFjdGl2YXRlRm9yQ29tcG9uZW50KHRoaXMuX3NDb21wb25lbnROYW1lKX19fTtDLnByb3RvdHlwZS5nZXRDdXN0b21FbnRyeT1mdW5jdGlvbihrLG0pe2lmKCFrfHxrLmluZGV4T2YoIi4iKTw9MCl7cS5zYXAubG9nLndhcm5pbmcoIkNvbXBvbmVudCBNZXRhZGF0YSBlbnRyaWVzIHdpdGgga2V5cyB3aXRob3V0IG5hbWVzcGFjZSBwcmVmaXggY2FuIG5vdCBiZSByZWFkIHZpYSBnZXRDdXN0b21FbnRyeS4gS2V5OiAiK2srIiwgQ29tcG9uZW50OiAiK3RoaXMuZ2V0TmFtZSgpKTtyZXR1cm4gbnVsbH12YXIgZD10aGlzLl9vU3RhdGljSW5mb1trXXx8e307aWYoIXEuaXNQbGFpbk9iamVjdChkKSl7cS5zYXAubG9nLndhcm5pbmcoIkN1c3RvbSBDb21wb25lbnQgTWV0YWRhdGEgZW50cnkgd2l0aCBrZXkgJyIraysiJyBtdXN0IGJlIGFuIG9iamVjdC4gQ29tcG9uZW50OiAiK3RoaXMuZ2V0TmFtZSgpKTtyZXR1cm4gbnVsbH12YXIgcD10aGlzLmdldFBhcmVudCgpO2lmKG0mJnAgaW5zdGFuY2VvZiBDKXtyZXR1cm4gcS5leHRlbmQodHJ1ZSx7fSxwLmdldEN1c3RvbUVudHJ5KGssbSksZCl9cmV0dXJuIHEuZXh0ZW5kKHRydWUse30sZCl9O0MucHJvdG90eXBlLmdldERlcGVuZGVuY2llcz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9tRGVwZW5kZW5jaWVzfTtDLnByb3RvdHlwZS5nZXRJbmNsdWRlcz1mdW5jdGlvbigpe3JldHVybih0aGlzLl9hSW5jbHVkZXMmJnRoaXMuX2FJbmNsdWRlcy5sZW5ndGg+MCk/dGhpcy5fYUluY2x1ZGVzOm51bGx9O0MucHJvdG90eXBlLmdldFVJNVZlcnNpb249ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbURlcGVuZGVuY2llcz90aGlzLl9tRGVwZW5kZW5jaWVzLnVpNXZlcnNpb246bnVsbH07Qy5wcm90b3R5cGUuZ2V0Q29tcG9uZW50cz1mdW5jdGlvbigpe3ZhciBjPW51bGw7aWYodGhpcy5fbURlcGVuZGVuY2llcyl7aWYodGhpcy5fbURlcGVuZGVuY2llcy5jb21wb25lbnRzJiYodGhpcy5fbURlcGVuZGVuY2llcy5jb21wb25lbnRzLmxlbmd0aD4wKSl7Yz10aGlzLl9tRGVwZW5kZW5jaWVzLmNvbXBvbmVudHN9fXJldHVybiBjfTtDLnByb3RvdHlwZS5nZXRMaWJzPWZ1bmN0aW9uKCl7dmFyIGw9bnVsbDtpZih0aGlzLl9tRGVwZW5kZW5jaWVzKXtpZih0aGlzLl9tRGVwZW5kZW5jaWVzLmxpYnMmJih0aGlzLl9tRGVwZW5kZW5jaWVzLmxpYnMubGVuZ3RoPjApKXtsPXRoaXMuX21EZXBlbmRlbmNpZXMubGlic319cmV0dXJuIGx9O0MucHJvdG90eXBlLmdldFZlcnNpb249ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc1ZlcnNpb259O0MucHJvdG90eXBlLmdldENvbmZpZz1mdW5jdGlvbihrKXtyZXR1cm4gdGhpcy5fbUNvbmZpZz9xLmV4dGVuZCh7fSxrP3RoaXMuX21Db25maWdba106dGhpcy5fbUNvbmZpZyk6dW5kZWZpbmVkfTtDLnByb3RvdHlwZS5nZXRDdXN0b21pemluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9tQ3VzdG9taXppbmc/cS5leHRlbmQoe30sdGhpcy5fbUN1c3RvbWl6aW5nKTp1bmRlZmluZWR9O0MucHJvdG90eXBlLmdldE1vZGVscz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9tTW9kZWxzfTtDLnByb3RvdHlwZS5nZXRTZXJ2aWNlcz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9tU2VydmljZXN9O0MucHJvdG90eXBlLl9sb2FkSW5jbHVkZXM9ZnVuY3Rpb24oKXt2YXIgST10aGlzLmdldEluY2x1ZGVzKCk7aWYoSSYmSS5sZW5ndGg+MCl7dmFyIHQ9dGhpczt2YXIgbD10aGlzLmdldExpYnJhcnlOYW1lKCk7cS5lYWNoKEksZnVuY3Rpb24oaSxmKXtpZihmLm1hdGNoKC9cLmNzcyQvaSkpe3ZhciBjPXNhcC51aS5yZXNvdXJjZShsLGYpO3Euc2FwLmxvZy5pbmZvKCJDb21wb25lbnQgXCIiK3QuZ2V0TmFtZSgpKyJcIiBpcyBsb2FkaW5nIENTUzogXCIiK2MrIlwiIik7cS5zYXAuaW5jbHVkZVN0eWxlU2hlZXQoYyl9ZWxzZXt2YXIgbT1mLm1hdGNoKC9cLmpzJC9pKTtpZihtKXt2YXIgcD1sLnJlcGxhY2UoL1wuL2csJy8nKSsoZi5zbGljZSgwLDEpPT09Jy8nPycnOicvJykrZi5zbGljZSgwLG0uaW5kZXgpO3Euc2FwLmxvZy5pbmZvKCJDb21wb25lbnQgXCIiK3QuZ2V0TmFtZSgpKyJcIiBpcyBsb2FkaW5nIEpTOiBcIiIrcCsiXCIiKTtxLnNhcC5fcmVxdWlyZVBhdGgocCl9fX0pfX07Qy5wcm90b3R5cGUuX2xvYWREZXBlbmRlbmNpZXM9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLGQ9dGhpcy5nZXREZXBlbmRlbmNpZXMoKTtpZihkKXt2YXIgbD1kLmxpYnM7aWYobCl7cS5lYWNoKGwsZnVuY3Rpb24oaSxMKXtxLnNhcC5sb2cuaW5mbygiQ29tcG9uZW50IFwiIit0LmdldE5hbWUoKSsiXCIgaXMgbG9hZGluZyBsaWJyYXJ5OiBcIiIrTCsiXCIiKTtzYXAudWkuZ2V0Q29yZSgpLmxvYWRMaWJyYXJ5KEwpfSl9dmFyIGM9ZC5jb21wb25lbnRzO2lmKGMpe3EuZWFjaChjLGZ1bmN0aW9uKGksbil7cS5zYXAubG9nLmluZm8oIkNvbXBvbmVudCBcIiIrdC5nZXROYW1lKCkrIlwiIGlzIGxvYWRpbmcgY29tcG9uZW50OiBcIiIrbisiLkNvbXBvbmVudFwiIik7c2FwLnVpLmNvbXBvbmVudC5sb2FkKHtuYW1lOm59KX0pfX19O3JldHVybiBDfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUuQ29uZmlndXJhdGlvbicpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLkNvbmZpZ3VyYXRpb24nKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9Db25maWd1cmF0aW9uIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL2Jhc2UvT2JqZWN0JywnLi9Mb2NhbGUnLCdzYXAvdWkvdGhpcmRwYXJ0eS9VUkknXSxmdW5jdGlvbihxLEIsTCxVKXsidXNlIHN0cmljdCI7dmFyIEM9Qi5leHRlbmQoInNhcC51aS5jb3JlLkNvbmZpZ3VyYXRpb24iLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbihvKXt0aGlzLl9vQ29yZT1vO2Z1bmN0aW9uIGYoKXt2YXIgZTtpZighIXNhcC51aS5EZXZpY2Uub3MuYW5kcm9pZCl7ZT1uYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9ccyhbYS16XXsyfS1bYS16XXsyfSlbOyldL2kpO2lmKGUpe3JldHVybiBlWzFdfX1yZXR1cm4gbmF2aWdhdG9yLmxhbmd1YWdlfHxuYXZpZ2F0b3IudXNlckxhbmd1YWdlfHxuYXZpZ2F0b3IuYnJvd3Nlckxhbmd1YWdlfXZhciBnPXsidGhlbWUiOnt0eXBlOiJzdHJpbmciLGRlZmF1bHRWYWx1ZToiYmFzZSJ9LCJsYW5ndWFnZSI6e3R5cGU6InN0cmluZyIsZGVmYXVsdFZhbHVlOmYoKX0sImZvcm1hdExvY2FsZSI6e3R5cGU6InN0cmluZyIsZGVmYXVsdFZhbHVlOm51bGx9LCJhY2Nlc3NpYmlsaXR5Ijp7dHlwZToiYm9vbGVhbiIsZGVmYXVsdFZhbHVlOnRydWV9LCJhbmltYXRpb24iOnt0eXBlOiJib29sZWFuIixkZWZhdWx0VmFsdWU6dHJ1ZX0sInJ0bCI6e3R5cGU6ImJvb2xlYW4iLGRlZmF1bHRWYWx1ZTpudWxsfSwiZGVidWciOnt0eXBlOiJib29sZWFuIixkZWZhdWx0VmFsdWU6ZmFsc2V9LCJpbnNwZWN0Ijp7dHlwZToiYm9vbGVhbiIsZGVmYXVsdFZhbHVlOmZhbHNlfSwib3JpZ2luSW5mbyI6e3R5cGU6ImJvb2xlYW4iLGRlZmF1bHRWYWx1ZTpmYWxzZX0sIm5vQ29uZmxpY3QiOnt0eXBlOiJib29sZWFuIixkZWZhdWx0VmFsdWU6ZmFsc2Usbm9Vcmw6dHJ1ZX0sIm5vRHVwbGljYXRlSWRzIjp7dHlwZToiYm9vbGVhbiIsZGVmYXVsdFZhbHVlOnRydWV9LCJ0cmFjZSI6e3R5cGU6ImJvb2xlYW4iLGRlZmF1bHRWYWx1ZTpmYWxzZSxub1VybDp0cnVlfSwibW9kdWxlcyI6e3R5cGU6InN0cmluZ1tdIixkZWZhdWx0VmFsdWU6W10sbm9Vcmw6dHJ1ZX0sImFyZWFzIjp7dHlwZToic3RyaW5nW10iLGRlZmF1bHRWYWx1ZTpudWxsLG5vVXJsOnRydWV9LCJvbkluaXQiOnt0eXBlOiJjb2RlIixkZWZhdWx0VmFsdWU6dW5kZWZpbmVkLG5vVXJsOnRydWV9LCJ1aWRQcmVmaXgiOnt0eXBlOiJzdHJpbmciLGRlZmF1bHRWYWx1ZToiX18iLG5vVXJsOnRydWV9LCJpZ25vcmVVcmxQYXJhbXMiOnt0eXBlOiJib29sZWFuIixkZWZhdWx0VmFsdWU6ZmFsc2Usbm9Vcmw6dHJ1ZX0sIndlaW5yZVNlcnZlciI6e3R5cGU6InN0cmluZyIsZGVmYXVsdFZhbHVlOiIiLG5vVXJsOnRydWV9LCJ3ZWlucmVJZCI6e3R5cGU6InN0cmluZyIsZGVmYXVsdFZhbHVlOiIifSwicHJlbG9hZCI6e3R5cGU6InN0cmluZyIsZGVmYXVsdFZhbHVlOiJhdXRvIn0sInJvb3RDb21wb25lbnQiOnt0eXBlOiJzdHJpbmciLGRlZmF1bHRWYWx1ZToiIixub1VybDp0cnVlfSwieHgtcm9vdENvbXBvbmVudE5vZGUiOnt0eXBlOiJzdHJpbmciLGRlZmF1bHRWYWx1ZToiIixub1VybDp0cnVlfSwiYXBwbGljYXRpb24iOnt0eXBlOiJzdHJpbmciLGRlZmF1bHRWYWx1ZToiIn0sImFwcENhY2hlQnVzdGVyIjp7dHlwZToic3RyaW5nW10iLGRlZmF1bHRWYWx1ZTpbXX0sInh4LWFwcENhY2hlQnVzdGVyTW9kZSI6e3R5cGU6InN0cmluZyIsZGVmYXVsdFZhbHVlOiJzeW5jIn0sInh4LWRpc2FibGVDdXN0b21pemluZyI6e3R5cGU6ImJvb2xlYW4iLGRlZmF1bHRWYWx1ZTpmYWxzZSxub1VybDp0cnVlfSwieHgtbG9hZEFsbE1vZGUiOnt0eXBlOiJib29sZWFuIixkZWZhdWx0VmFsdWU6ZmFsc2Usbm9Vcmw6dHJ1ZX0sInh4LXRlc3QtbW9iaWxlIjp7dHlwZToiYm9vbGVhbiIsZGVmYXVsdFZhbHVlOmZhbHNlfSwieHgtcHJlbG9hZExpYkNzcyI6e3R5cGU6InN0cmluZ1tdIixkZWZhdWx0VmFsdWU6W119LCJ4eC1jb21wb25lbnRQcmVsb2FkIjp7dHlwZToic3RyaW5nIixkZWZhdWx0VmFsdWU6IiJ9LCJ4eC1iaW5kaW5nU3ludGF4Ijp7dHlwZToic3RyaW5nIixkZWZhdWx0VmFsdWU6InNpbXBsZSIsbm9Vcmw6dHJ1ZX0sInh4LWRlc2lnbk1vZGUiOnt0eXBlOiJib29sZWFuIixkZWZhdWx0VmFsdWU6ZmFsc2V9LCJ4eC1hY2Nlc3NpYmlsaXR5TW9kZSI6e3R5cGU6ImJvb2xlYW4iLGRlZmF1bHRWYWx1ZTpmYWxzZX0sInh4LXN1cHBvcnRlZExhbmd1YWdlcyI6e3R5cGU6InN0cmluZ1tdIixkZWZhdWx0VmFsdWU6W119LCJ4eC1ib290VGFzayI6e3R5cGU6ImZ1bmN0aW9uIixkZWZhdWx0VmFsdWU6dW5kZWZpbmVkLG5vVXJsOnRydWV9LCJ4eC1zdXBwcmVzc0RlYWN0aXZhdGlvbk9mQ29udHJvbGxlckNvZGUiOnt0eXBlOiJib29sZWFuIixkZWZhdWx0VmFsdWU6ZmFsc2V9LCJ4eC1ub05hdGl2ZVNjcm9sbCI6e3R5cGU6ImJvb2xlYW4iLGRlZmF1bHRWYWx1ZTpmYWxzZX0sInN0YXRpc3RpY3MiOnt0eXBlOiJib29sZWFuIixkZWZhdWx0VmFsdWU6ZmFsc2V9fTt2YXIgaD17Inh4LXRlc3QiOiIxLjE1IiwiZmxleEJveFBvbHlmaWxsIjoiMS4xNCIsInNhcE1lVGFiQ29udGFpbmVyIjoiMS4xNCIsInNhcE1lUHJvZ2Vzc0luZGljYXRvciI6IjEuMTQiLCJzYXBNR3Jvd2luZ0xpc3QiOiIxLjE0Iiwic2FwTUxpc3RBc1RhYmxlIjoiMS4xNCIsInNhcE1EaWFsb2dXaXRoUGFkZGluZyI6IjEuMTQifTt0aGlzLm9Gb3JtYXRTZXR0aW5ncz1uZXcgQy5Gb3JtYXRTZXR0aW5ncyh0aGlzKTt2YXIgaT10aGlzO2Z1bmN0aW9uIHMoTixWKXtpZih0eXBlb2YgVj09PSJ1bmRlZmluZWQifHxWPT09bnVsbCl7cmV0dXJufXN3aXRjaChnW05dLnR5cGUpe2Nhc2UiYm9vbGVhbiI6aWYodHlwZW9mIFY9PT0ic3RyaW5nIil7aWYoZ1tOXS5kZWZhdWx0VmFsdWUpe2lbTl09Vi50b0xvd2VyQ2FzZSgpIT0iZmFsc2UifWVsc2V7aVtOXT1WLnRvTG93ZXJDYXNlKCk9PT0idHJ1ZSJ8fFYudG9Mb3dlckNhc2UoKT09PSJ4In19ZWxzZXtpW05dPSEhVn1icmVhaztjYXNlInN0cmluZyI6aVtOXT0iIitWO2JyZWFrO2Nhc2UiY29kZSI6aVtOXT10eXBlb2YgVj09PSJmdW5jdGlvbiI/VjpTdHJpbmcoVik7YnJlYWs7Y2FzZSJmdW5jdGlvbiI6aWYodHlwZW9mIFYhPT0iZnVuY3Rpb24iKXt0aHJvdyBuZXcgRXJyb3IoInVuc3VwcG9ydGVkIHZhbHVlIil9aVtOXT1WO2JyZWFrO2Nhc2Uic3RyaW5nW10iOmlmKHEuaXNBcnJheShWKSl7aVtOXT1WfWVsc2UgaWYodHlwZW9mIFY9PT0ic3RyaW5nIil7aVtOXT1xLm1hcChWLnNwbGl0KC9bICw7XS8pLGZ1bmN0aW9uKCQpe3JldHVybiBxLnRyaW0oJCl9KX1lbHNle3Rocm93IG5ldyBFcnJvcigidW5zdXBwb3J0ZWQgdmFsdWUiKX1icmVhaztkZWZhdWx0OnRocm93IG5ldyBFcnJvcigiaWxsZWdhbCBzdGF0ZSIpfX1mdW5jdGlvbiBqKFQpe3ZhciB2LHc7dHJ5e3Y9bmV3IFVSSShULHdpbmRvdy5sb2NhdGlvbi5ocmVmKS5ub3JtYWxpemUoKTt3PXYucGF0aCgpO3JldHVybiB3Kyh3LnNsaWNlKC0xKT09PScvJz8nJzonLycpKyJVSTUvIn1jYXRjaChlKXt9fWZvcih2YXIgbiBpbiBnKXtpW25dPWdbbl0uZGVmYXVsdFZhbHVlfXZhciBrPXdpbmRvd1sic2FwLXVpLWNvbmZpZyJdfHx7fTtrLm9uaW5pdD1rLm9uaW5pdHx8a1siZXZ0LW9uaW5pdCJdO2Zvcih2YXIgbiBpbiBnKXtzKG4sa1tuLnRvTG93ZXJDYXNlKCldKX1pZihrLmxpYnMpe2kubW9kdWxlcz1xLm1hcChrLmxpYnMuc3BsaXQoIiwiKSxmdW5jdGlvbigkKXtyZXR1cm4gcS50cmltKCQpKyIubGlicmFyeSJ9KS5jb25jYXQoaS5tb2R1bGVzKX12YXIgUD0iY29tcGF0dmVyc2lvbiI7dmFyIEQ9a1tQXTt2YXIgbD1xLnNhcC5WZXJzaW9uKCIxLjE0Iik7dGhpcy5fY29tcGF0dmVyc2lvbj17fTtmdW5jdGlvbiBfKGUpe3ZhciB2PSFlP0R8fGwudG9TdHJpbmcoKTprW1ArIi0iK2UudG9Mb3dlckNhc2UoKV18fER8fGhbZV18fGwudG9TdHJpbmcoKTt2PXEuc2FwLlZlcnNpb24odi50b0xvd2VyQ2FzZSgpPT09ImVkZ2UiP3NhcC51aS52ZXJzaW9uOnYpO3JldHVybiBxLnNhcC5WZXJzaW9uKHYuZ2V0TWFqb3IoKSx2LmdldE1pbm9yKCkpfXRoaXMuX2NvbXBhdHZlcnNpb24uX2RlZmF1bHQ9XygpO2Zvcih2YXIgbiBpbiBoKXt0aGlzLl9jb21wYXR2ZXJzaW9uW25dPV8obil9aWYoIWkuaWdub3JlVXJsUGFyYW1zKXt2YXIgdT0ic2FwLXVpLSI7dmFyIG09cS5zYXAuZ2V0VXJpUGFyYW1ldGVycygpO2lmKG0ubVBhcmFtc1snc2FwLWxvY2FsZSddfHxtLm1QYXJhbXNbJ3NhcC1sYW5ndWFnZSddKXt2YXIgVj1tLmdldCgnc2FwLWxvY2FsZScpfHxNW20uZ2V0KCdzYXAtbGFuZ3VhZ2UnKS50b1VwcGVyQ2FzZSgpXXx8bS5nZXQoJ3NhcC1sYW5ndWFnZScpO2lmKFY9PT0iIil7aVsnbGFuZ3VhZ2UnXT1nWydsYW5ndWFnZSddLmRlZmF1bHRWYWx1ZX1lbHNle3MoJ2xhbmd1YWdlJyxWKX19aWYobS5tUGFyYW1zWydzYXAtYWNjZXNzaWJpbGl0eSddKXt2YXIgVj1tLmdldCgnc2FwLWFjY2Vzc2liaWxpdHknKTtpZihWPT09IlgifHxWPT09IngiKXtzKCd4eC1hY2Nlc3NpYmlsaXR5TW9kZScsdHJ1ZSl9ZWxzZXtzKCd4eC1hY2Nlc3NpYmlsaXR5TW9kZScsZmFsc2UpfX1pZihtLm1QYXJhbXNbJ3NhcC1ydGwnXSl7dmFyIFY9bS5nZXQoJ3NhcC1ydGwnKTtpZihWPT09IlgifHxWPT09IngiKXtzKCdydGwnLHRydWUpfWVsc2V7cygncnRsJyxmYWxzZSl9fWlmKG0ubVBhcmFtc1snc2FwLXRoZW1lJ10pe3ZhciBWPW0uZ2V0KCdzYXAtdGhlbWUnKTtpZihWPT09IiIpe2lbJ3RoZW1lJ109Z1sndGhlbWUnXS5kZWZhdWx0VmFsdWV9ZWxzZXtzKCd0aGVtZScsVil9fWlmKG0ubVBhcmFtc1snc2FwLXN0YXRpc3RpY3MnXSl7dmFyIFY9bS5nZXQoJ3NhcC1zdGF0aXN0aWNzJyk7cygnc3RhdGlzdGljcycsVil9Zm9yKHZhciBuIGluIGcpe2lmKGdbbl0ubm9Vcmwpe2NvbnRpbnVlfXZhciBWPW0uZ2V0KHUrbik7aWYoVj09PSIiKXtpW25dPWdbbl0uZGVmYXVsdFZhbHVlfWVsc2V7cyhuLFYpfX19dGhpcy5kZXJpdmVkUlRMPUwuX2ltcGxpZXNSVEwoaS5sYW5ndWFnZSk7dmFyIHQ9aS50aGVtZTt2YXIgVDt2YXIgST10LmluZGV4T2YoIkAiKTtpZihJPj0wKXtUPWoodC5zbGljZShJKzEpKTtpZihUKXtpLnRoZW1lPXQuc2xpY2UoMCxJKTtpLnRoZW1lUm9vdD1UfWVsc2V7aS50aGVtZT0oay50aGVtZSYmay50aGVtZSE9PXQpP2sudGhlbWU6ImJhc2UiO0k9LTF9fWkudGhlbWU9dGhpcy5fbm9ybWFsaXplVGhlbWUoaS50aGVtZSxUKTt2YXIgcD1pWydsYW5ndWFnZXNEZWxpdmVyZWRXaXRoQ29yZSddPUwuX2NvcmVJMThuTG9jYWxlczt2YXIgcj1pWyd4eC1zdXBwb3J0ZWRMYW5ndWFnZXMnXTtpZihyLmxlbmd0aD09PTB8fChyLmxlbmd0aD09PTEmJnJbMF09PT0nKicpKXtyPVtdfWVsc2UgaWYoci5sZW5ndGg9PT0xJiZyWzBdPT09J2RlZmF1bHQnKXtyPXB8fFtdfWlbJ3h4LXN1cHBvcnRlZExhbmd1YWdlcyddPXI7Zm9yKHZhciBuIGluIGcpe2lmKGlbbl0hPT1nW25dLmRlZmF1bHRWYWx1ZSl7cS5zYXAubG9nLmluZm8oIiAgIituKyIgPSAiK2lbbl0pfX19LGdldFZlcnNpb246ZnVuY3Rpb24oKXtpZih0aGlzLl92ZXJzaW9uKXtyZXR1cm4gdGhpcy5fdmVyc2lvbn10aGlzLl92ZXJzaW9uPW5ldyBxLnNhcC5WZXJzaW9uKHNhcC51aS52ZXJzaW9uKTtyZXR1cm4gdGhpcy5fdmVyc2lvbn0sZ2V0Q29tcGF0aWJpbGl0eVZlcnNpb246ZnVuY3Rpb24oZil7aWYodHlwZW9mKGYpPT09InN0cmluZyImJnRoaXMuX2NvbXBhdHZlcnNpb25bZl0pe3JldHVybiB0aGlzLl9jb21wYXR2ZXJzaW9uW2ZdfXJldHVybiB0aGlzLl9jb21wYXR2ZXJzaW9uLl9kZWZhdWx0fSxnZXRUaGVtZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnRoZW1lfSxfc2V0VGhlbWU6ZnVuY3Rpb24odCl7dGhpcy50aGVtZT10O3JldHVybiB0aGlzfSxfbm9ybWFsaXplVGhlbWU6ZnVuY3Rpb24odCxUKXtpZih0JiZUPT1udWxsJiZ0Lm1hdGNoKC9ec2FwX2NvcmJ1JC9pKSlyZXR1cm4ic2FwX2dvbGRyZWZsZWN0aW9uIjtyZXR1cm4gdH0sZ2V0TGFuZ3VhZ2U6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sYW5ndWFnZX0sc2V0TGFuZ3VhZ2U6ZnVuY3Rpb24obCl7ZCh0eXBlb2YgbD09PSJzdHJpbmciJiZsLCJzTGFuZ3VhZ2UgbXVzdCBiZSBhIEJDUDQ3IGxhbmd1YWdlIHRhZyBvciBKYXZhIExvY2FsZSBpZCBvciBudWxsIik7dmFyIG89dGhpcy5nZXRSVEwoKSxtO2lmKGwhPXRoaXMubGFuZ3VhZ2Upe209dGhpcy5fY29sbGVjdCgpO3RoaXMubGFuZ3VhZ2U9bS5sYW5ndWFnZT1sO3RoaXMuZGVyaXZlZFJUTD1MLl9pbXBsaWVzUlRMKGwpO2lmKG8hPXRoaXMuZ2V0UlRMKCkpe20ucnRsPXRoaXMuZ2V0UlRMKCl9dGhpcy5fZW5kQ29sbGVjdCgpfXJldHVybiB0aGlzfSxnZXRMb2NhbGU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IEwodGhpcy5sYW5ndWFnZSl9LGdldEZvcm1hdExvY2FsZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmZvcm1hdExvY2FsZXx8dGhpcy5sYW5ndWFnZX0sc2V0Rm9ybWF0TG9jYWxlOmZ1bmN0aW9uKGYpe2QoZj09PW51bGx8fHR5cGVvZiBmPT09InN0cmluZyImJmYsInNGb3JtYXRMb2NhbGUgbXVzdCBiZSBhIEJDUDQ3IGxhbmd1YWdlIHRhZyBvciBKYXZhIExvY2FsZSBpZCBvciBudWxsIik7dmFyIG07aWYoZiE9dGhpcy5mb3JtYXRMb2NhbGUpe209dGhpcy5fY29sbGVjdCgpO3RoaXMuZm9ybWF0TG9jYWxlPW0uZm9ybWF0TG9jYWxlPWY7dGhpcy5fZW5kQ29sbGVjdCgpfXJldHVybiB0aGlzfSxnZXRMYW5ndWFnZXNEZWxpdmVyZWRXaXRoQ29yZTpmdW5jdGlvbigpe3JldHVybiB0aGlzWyJsYW5ndWFnZXNEZWxpdmVyZWRXaXRoQ29yZSJdfSxnZXRTdXBwb3J0ZWRMYW5ndWFnZXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc1sieHgtc3VwcG9ydGVkTGFuZ3VhZ2VzIl19LGdldEFjY2Vzc2liaWxpdHk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hY2Nlc3NpYmlsaXR5fSxnZXRBbmltYXRpb246ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hbmltYXRpb259LGdldFJUTDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnJ0bD09PW51bGw/dGhpcy5kZXJpdmVkUlRMOnRoaXMucnRsfSxzZXRSVEw6ZnVuY3Rpb24ocil7ZChyPT09bnVsbHx8dHlwZW9mIHI9PT0iYm9vbGVhbiIsImJSVEwgbXVzdCBiZSBudWxsIG9yIGEgYm9vbGVhbiIpO3ZhciBtO2lmKHIhPXRoaXMucnRsKXttPXRoaXMuX2NvbGxlY3QoKTt0aGlzLnJ0bD1tLnJ0bD10aGlzLmdldFJUTCgpO3RoaXMuX2VuZENvbGxlY3QoKX1yZXR1cm4gdGhpc30sZ2V0RGVidWc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kZWJ1Z30sZ2V0SW5zcGVjdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmluc3BlY3R9LGdldE9yaWdpbkluZm86ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vcmlnaW5JbmZvfSxnZXROb0R1cGxpY2F0ZUlkczpmdW5jdGlvbigpe3JldHVybiB0aGlzLm5vRHVwbGljYXRlSWRzfSxnZXRUcmFjZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnRyYWNlfSxnZXRVSURQcmVmaXg6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy51aWRQcmVmaXh9LGdldERlc2lnbk1vZGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc1sieHgtZGVzaWduTW9kZSJdfSxnZXRTdXBwcmVzc0RlYWN0aXZhdGlvbk9mQ29udHJvbGxlckNvZGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc1sieHgtc3VwcHJlc3NEZWFjdGl2YXRpb25PZkNvbnRyb2xsZXJDb2RlIl19LGdldFdlaW5yZVNlcnZlcjpmdW5jdGlvbigpe3ZhciB3PXRoaXMud2VpbnJlU2VydmVyO2lmKCF3KXt3PXdpbmRvdy5sb2NhdGlvbi5wcm90b2NvbCsiLy8iK3dpbmRvdy5sb2NhdGlvbi5ob3N0bmFtZSsiOiI7dys9KHBhcnNlSW50KHdpbmRvdy5sb2NhdGlvbi5wb3J0LDEwKXx8ODA4MCkrMX1yZXR1cm4gd30sZ2V0V2VpbnJlSWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy53ZWlucmVJZH0sZ2V0QXBwbGljYXRpb246ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hcHBsaWNhdGlvbn0sZ2V0Um9vdENvbXBvbmVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnJvb3RDb21wb25lbnR9LGdldEFwcENhY2hlQnVzdGVyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYXBwQ2FjaGVCdXN0ZXJ9LGdldEFwcENhY2hlQnVzdGVyTW9kZTpmdW5jdGlvbigpe3JldHVybiB0aGlzWyJ4eC1hcHBDYWNoZUJ1c3Rlck1vZGUiXX0sZ2V0RGlzYWJsZUN1c3RvbWl6aW5nOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXNbInh4LWRpc2FibGVDdXN0b21pemluZyJdfSxnZXRQcmVsb2FkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHJlbG9hZH0sZ2V0Q29tcG9uZW50UHJlbG9hZDpmdW5jdGlvbigpe3JldHVybiB0aGlzWyd4eC1jb21wb25lbnRQcmVsb2FkJ118fHRoaXMucHJlbG9hZH0sZ2V0Rm9ybWF0U2V0dGluZ3M6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vRm9ybWF0U2V0dGluZ3N9LF9jb2xsZWN0OmZ1bmN0aW9uKCl7dmFyIG09dGhpcy5tQ2hhbmdlc3x8KHRoaXMubUNoYW5nZXM9e19fY291bnQ6MH0pO20uX19jb3VudCsrO3JldHVybiBtfSxfZW5kQ29sbGVjdDpmdW5jdGlvbigpe3ZhciBtPXRoaXMubUNoYW5nZXM7aWYobSYmKC0tbS5fX2NvdW50KT09PTApe2RlbGV0ZSBtLl9fY291bnQ7dGhpcy5fb0NvcmUmJnRoaXMuX29Db3JlLmZpcmVMb2NhbGl6YXRpb25DaGFuZ2VkKG0pO2RlbGV0ZSB0aGlzLm1DaGFuZ2VzfX0sZ2V0U3RhdGlzdGljczpmdW5jdGlvbigpe3JldHVybiB0aGlzLnN0YXRpc3RpY3N8fHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgic2FwLXVpLXN0YXRpc3RpY3MiKT09IlgifSxnZXROb05hdGl2ZVNjcm9sbDpmdW5jdGlvbigpe3JldHVybiB0aGlzWyJ4eC1ub05hdGl2ZVNjcm9sbCJdfX0pO3ZhciBNPXsiWkgiOiJ6aC1IYW5zIiwiWkYiOiJ6aC1IYW50IiwiMVEiOiJlbi1VUy14LXNhcHRyYyIsIjJRIjoiZW4tVVMteC1zYXBwc2QifTt2YXIgYT17IiI6e3BhdHRlcm46bnVsbH0sIjEiOntwYXR0ZXJuOiJkZC5NTS55eXl5In0sIjIiOntwYXR0ZXJuOiJNTS9kZC95eXl5In0sIjMiOntwYXR0ZXJuOiJNTS1kZC15eXl5In0sIjQiOntwYXR0ZXJuOiJ5eXl5Lk1NLmRkIn0sIjUiOntwYXR0ZXJuOiJ5eXl5L01NL2RkIn0sIjYiOntwYXR0ZXJuOiJ5eXl5LU1NLWRkIn0sIjciOntwYXR0ZXJuOiJHeXkuTU0uZGQiLGlnbm9yZTp0cnVlfSwiOCI6e3BhdHRlcm46Ikd5eS9NTS9kZCIsaWdub3JlOnRydWV9LCI5Ijp7cGF0dGVybjoiR3l5LU1NLWRkIixpZ25vcmU6dHJ1ZX0sIkEiOntwYXR0ZXJuOiJ5eXl5L01NL2RkIixpZ25vcmU6dHJ1ZX0sIkIiOntwYXR0ZXJuOiJ5eXl5L01NL2RkIixpZ25vcmU6dHJ1ZX0sIkMiOntwYXR0ZXJuOiJ5eXl5L01NL2RkIixpZ25vcmU6dHJ1ZX19O3ZhciBiPXsiIjp7InNob3J0IjpudWxsLG1lZGl1bTpudWxsLGRheVBlcmlvZHM6bnVsbH0sIjAiOnsic2hvcnQiOiJISDptbSIsbWVkaXVtOiJISDptbTpzcyIsZGF5UGVyaW9kczpudWxsfSwiMSI6eyJzaG9ydCI6ImhoOm1tIGEiLG1lZGl1bToiaGg6bW06c3MgYSIsZGF5UGVyaW9kczpbIkFNIiwiUE0iXX0sIjIiOnsic2hvcnQiOiJoaDptbSBhIixtZWRpdW06ImhoOm1tOnNzIGEiLGRheVBlcmlvZHM6WyJhbSIsInBtIl19LCIzIjp7InNob3J0IjoiS0s6bW0gYSIsbWVkaXVtOiJLSzptbTpzcyBhIixkYXlQZXJpb2RzOlsiQU0iLCJQTSJdfSwiNCI6eyJzaG9ydCI6IktLOm1tIGEiLG1lZGl1bToiS0s6bW06c3MgYSIsZGF5UGVyaW9kczpbImFtIiwicG0iXX19O3ZhciBjPXsiIjp7Z3JvdXBpbmdTZXBhcmF0b3I6bnVsbCxkZWNpbWFsU2VwYXJhdG9yOm51bGx9LCIgIjp7Z3JvdXBpbmdTZXBhcmF0b3I6Ii4iLGRlY2ltYWxTZXBhcmF0b3I6IiwifSwiWCI6e2dyb3VwaW5nU2VwYXJhdG9yOiIsIixkZWNpbWFsU2VwYXJhdG9yOiIuIn0sIlkiOntncm91cGluZ1NlcGFyYXRvcjoiICIsZGVjaW1hbFNlcGFyYXRvcjoiLCJ9fTtmdW5jdGlvbiBkKGUsbSl7aWYoIWUpe3Rocm93IG5ldyBFcnJvcihtKX19Qi5leHRlbmQoInNhcC51aS5jb3JlLkNvbmZpZ3VyYXRpb24uRm9ybWF0U2V0dGluZ3MiLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbihvKXt0aGlzLm9Db25maWd1cmF0aW9uPW87dGhpcy5tU2V0dGluZ3M9e307dGhpcy5zTGVnYWN5RGF0ZUZvcm1hdD11bmRlZmluZWQ7dGhpcy5zTGVnYWN5VGltZUZvcm1hdD11bmRlZmluZWQ7dGhpcy5zTGVnYWN5TnVtYmVyRm9ybWF0U3ltYm9sU2V0PXVuZGVmaW5lZH0sZ2V0Rm9ybWF0TG9jYWxlOmZ1bmN0aW9uKCl7ZnVuY3Rpb24gZih0KXt2YXIgbD10Lm9Db25maWd1cmF0aW9uLmxhbmd1YWdlO2lmKCFxLmlzRW1wdHlPYmplY3QodC5tU2V0dGluZ3MpKXtpZihsLmluZGV4T2YoIi14LSIpPDApe2w9bCsiLXgtc2FwdWZtdCJ9ZWxzZSBpZihsLmluZGV4T2YoIi1zYXB1Zm10Iik8PWwuaW5kZXhPZigiLXgtIikpe2w9bCsiLXNhcHVmbXQifX1yZXR1cm4gbH1yZXR1cm4gbmV3IEwodGhpcy5vQ29uZmlndXJhdGlvbi5mb3JtYXRMb2NhbGV8fGYodGhpcykpfSxfc2V0OmZ1bmN0aW9uKGssdil7dmFyIG89dGhpcy5tU2V0dGluZ3Nba107aWYodiE9bnVsbCl7dGhpcy5tU2V0dGluZ3Nba109dn1lbHNle2RlbGV0ZSB0aGlzLm1TZXR0aW5nc1trXX1pZigobz09bnVsbCE9dj09bnVsbCl8fCFxLnNhcC5lcXVhbChvLHYpKXt2YXIgbT10aGlzLm9Db25maWd1cmF0aW9uLl9jb2xsZWN0KCk7bVtrXT12O3RoaXMub0NvbmZpZ3VyYXRpb24uX2VuZENvbGxlY3QoKX19LGdldERhdGVQYXR0ZXJuOmZ1bmN0aW9uKHMpe3JldHVybiB0aGlzLm1TZXR0aW5nc1siZGF0ZUZvcm1hdC0iK3NdfSxzZXREYXRlUGF0dGVybjpmdW5jdGlvbihzLHApe2Qocz09InNob3J0Inx8cz09Im1lZGl1bSJ8fHM9PSJsb25nInx8cz09ImZ1bGwiLCJzU3R5bGUgbXVzdCBiZSBzaG9ydCwgbWVkaXVtLCBsb25nIG9yIGZ1bGwiKTt0aGlzLl9zZXQoImRhdGVGb3JtYXQtIitzLHApO3JldHVybiB0aGlzfSxnZXRUaW1lUGF0dGVybjpmdW5jdGlvbihzKXtyZXR1cm4gdGhpcy5tU2V0dGluZ3NbInRpbWVGb3JtYXQtIitzXX0sc2V0VGltZVBhdHRlcm46ZnVuY3Rpb24ocyxwKXtkKHM9PSJzaG9ydCJ8fHM9PSJtZWRpdW0ifHxzPT0ibG9uZyJ8fHM9PSJmdWxsIiwic1N0eWxlIG11c3QgYmUgc2hvcnQsIG1lZGl1bSwgbG9uZyBvciBmdWxsIik7dGhpcy5fc2V0KCJ0aW1lRm9ybWF0LSIrcyxwKTtyZXR1cm4gdGhpc30sZ2V0TnVtYmVyU3ltYm9sOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLm1TZXR0aW5nc1sic3ltYm9scy1sYXRuLSIrdF19LHNldE51bWJlclN5bWJvbDpmdW5jdGlvbih0LHMpe2QodD09ImRlY2ltYWwifHx0PT0iZ3JvdXAifHx0PT0icGx1c1NpZ24ifHx0PT0ibWludXNTaWduIiwic1R5cGUgbXVzdCBiZSBkZWNpbWFsLCBncm91cCwgcGx1c1NpZ24gb3IgbWludXNTaWduIik7dGhpcy5fc2V0KCJzeW1ib2xzLWxhdG4tIit0LHMpO3JldHVybiB0aGlzfSxfc2V0RGF5UGVyaW9kczpmdW5jdGlvbih3LHQpe3RoaXMuX3NldCgiZGF5UGVyaW9kcy1mb3JtYXQtIit3LHQpO3JldHVybiB0aGlzfSxnZXRMZWdhY3lEYXRlRm9ybWF0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc0xlZ2FjeURhdGVGb3JtYXR8fHVuZGVmaW5lZH0sc2V0TGVnYWN5RGF0ZUZvcm1hdDpmdW5jdGlvbihmKXtmPWY/U3RyaW5nKGYpLnRvVXBwZXJDYXNlKCk6IiI7ZCghZnx8YS5oYXNPd25Qcm9wZXJ0eShmKSwic0Zvcm1hdElkIG11c3QgYmUgb25lIG9mIFsnMScsJzInLCczJywnNCcsJzUnLCc2JywnNycsJzgnLCc5JywnQScsJ0InLCdDJ10gb3IgZW1wdHkiKTtpZihhW2ZdLmlnbm9yZSl7cS5zYXAubG9nLndhcm5pbmcoIlRoZSBBQkFQIGRhdGUgZm9ybWF0ICciK2YrIicgKCIrYVtmXS5wYXR0ZXJuKyIpIGlzIG5vdCBzdXBwb3J0ZWQgeWV0LiBGYWxsaW5nIGJhY2sgdG8gbG9jYWxlIHNwZWNpZmljIGRhdGUgZm9ybWF0cy4iKTtmPSIifXZhciBtPXRoaXMub0NvbmZpZ3VyYXRpb24uX2NvbGxlY3QoKTt0aGlzLnNMZWdhY3lEYXRlRm9ybWF0PW0ubGVnYWN5RGF0ZUZvcm1hdD1mO3RoaXMuc2V0RGF0ZVBhdHRlcm4oInNob3J0IixhW2ZdLnBhdHRlcm4pO3RoaXMuc2V0RGF0ZVBhdHRlcm4oIm1lZGl1bSIsYVtmXS5wYXR0ZXJuKTt0aGlzLm9Db25maWd1cmF0aW9uLl9lbmRDb2xsZWN0KCk7cmV0dXJuIHRoaXN9LGdldExlZ2FjeVRpbWVGb3JtYXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zTGVnYWN5VGltZUZvcm1hdHx8dW5kZWZpbmVkfSxzZXRMZWdhY3lUaW1lRm9ybWF0OmZ1bmN0aW9uKGYpe2QoIWZ8fGIuaGFzT3duUHJvcGVydHkoZiksInNGb3JtYXRJZCBtdXN0IGJlIG9uZSBvZiBbJzAnLCcxJywnMicsJzMnLCc0J10gb3IgZW1wdHkiKTt2YXIgbT10aGlzLm9Db25maWd1cmF0aW9uLl9jb2xsZWN0KCk7dGhpcy5zTGVnYWN5VGltZUZvcm1hdD1tLmxlZ2FjeVRpbWVGb3JtYXQ9Zj1mfHwiIjt0aGlzLnNldFRpbWVQYXR0ZXJuKCJzaG9ydCIsYltmXVsic2hvcnQiXSk7dGhpcy5zZXRUaW1lUGF0dGVybigibWVkaXVtIixiW2ZdWyJtZWRpdW0iXSk7dGhpcy5fc2V0RGF5UGVyaW9kcygiYWJicmV2aWF0ZWQiLGJbZl0uZGF5UGVyaW9kcyk7dGhpcy5vQ29uZmlndXJhdGlvbi5fZW5kQ29sbGVjdCgpO3JldHVybiB0aGlzfSxnZXRMZWdhY3lOdW1iZXJGb3JtYXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zTGVnYWN5TnVtYmVyRm9ybWF0fHx1bmRlZmluZWR9LHNldExlZ2FjeU51bWJlckZvcm1hdDpmdW5jdGlvbihmKXtmPWY/Zi50b1VwcGVyQ2FzZSgpOiIiO2QoIWZ8fGMuaGFzT3duUHJvcGVydHkoZiksInNGb3JtYXRJZCBtdXN0IGJlIG9uZSBvZiBbJyAnLCdYJywnWSddIG9yIGVtcHR5Iik7dmFyIG09dGhpcy5vQ29uZmlndXJhdGlvbi5fY29sbGVjdCgpO3RoaXMuc0xlZ2FjeU51bWJlckZvcm1hdD1tLmxlZ2FjeU51bWJlckZvcm1hdD1mO3RoaXMuc2V0TnVtYmVyU3ltYm9sKCJncm91cCIsY1tmXS5ncm91cGluZ1NlcGFyYXRvcik7dGhpcy5zZXROdW1iZXJTeW1ib2woImRlY2ltYWwiLGNbZl0uZGVjaW1hbFNlcGFyYXRvcik7dGhpcy5vQ29uZmlndXJhdGlvbi5fZW5kQ29sbGVjdCgpfSxnZXRDdXN0b21Mb2NhbGVEYXRhOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubVNldHRpbmdzfX0pO3JldHVybiBDfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUuRWxlbWVudE1ldGFkYXRhJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUuRWxlbWVudE1ldGFkYXRhJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvRWxlbWVudE1ldGFkYXRhIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL2Jhc2UvTWFuYWdlZE9iamVjdE1ldGFkYXRhJ10sZnVuY3Rpb24ocSxNKXsidXNlIHN0cmljdCI7dmFyIEU9ZnVuY3Rpb24oYyxDKXtNLmFwcGx5KHRoaXMsYXJndW1lbnRzKX07RS5wcm90b3R5cGU9cS5zYXAubmV3T2JqZWN0KE0ucHJvdG90eXBlKTtFLnVpZD1NLnVpZDtFLnByb3RvdHlwZS5nZXRFbGVtZW50TmFtZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9zQ2xhc3NOYW1lfTtFLnByb3RvdHlwZS5nZXRSZW5kZXJlck5hbWU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc1JlbmRlcmVyTmFtZX07RS5wcm90b3R5cGUuZ2V0UmVuZGVyZXI9ZnVuY3Rpb24oKXt2YXIgcj10aGlzLmdldFJlbmRlcmVyTmFtZSgpO2lmKCFyKXtyZXR1cm59dmFyIFI9cS5zYXAuZ2V0T2JqZWN0KHIpO2lmKFIpe3JldHVybiBSfXEuc2FwLnJlcXVpcmUocik7cmV0dXJuIHEuc2FwLmdldE9iamVjdChyKX07RS5wcm90b3R5cGUuYXBwbHlTZXR0aW5ncz1mdW5jdGlvbihjKXt2YXIgcz1jLm1ldGFkYXRhO3RoaXMuX3NWaXNpYmlsaXR5PXNbInZpc2liaWxpdHkiXXx8InB1YmxpYyI7dmFyIHI9Yy5oYXNPd25Qcm9wZXJ0eSgicmVuZGVyZXIiKT8oYy5yZW5kZXJlcnx8IiIpOnVuZGVmaW5lZDtkZWxldGUgYy5yZW5kZXJlcjtNLnByb3RvdHlwZS5hcHBseVNldHRpbmdzLmNhbGwodGhpcyxjKTt0aGlzLl9zUmVuZGVyZXJOYW1lPXRoaXMuZ2V0TmFtZSgpKyJSZW5kZXJlciI7aWYodHlwZW9mIHIhPT0idW5kZWZpbmVkIil7aWYodHlwZW9mIHI9PT0ic3RyaW5nIil7dGhpcy5fc1JlbmRlcmVyTmFtZT1yfHx1bmRlZmluZWQ7cmV0dXJufWlmKHR5cGVvZiByPT09ImZ1bmN0aW9uIil7cj17cmVuZGVyOnJ9fXZhciBwPXRoaXMuZ2V0UGFyZW50KCk7dmFyIGI7aWYocCYmcCBpbnN0YW5jZW9mIEUpe2I9cC5nZXRSZW5kZXJlcigpfWlmKCFiKXtxLnNhcC5yZXF1aXJlKCJzYXAudWkuY29yZS5SZW5kZXJlciIpO2I9c2FwLnVpLmNvcmUuUmVuZGVyZXJ9dmFyIFI9cS5zYXAubmV3T2JqZWN0KGIpO3EuZXh0ZW5kKFIscik7cS5zYXAuc2V0T2JqZWN0KHRoaXMuZ2V0UmVuZGVyZXJOYW1lKCksUil9fTtFLnByb3RvdHlwZS5hZnRlckFwcGx5U2V0dGluZ3M9ZnVuY3Rpb24oKXtNLnByb3RvdHlwZS5hZnRlckFwcGx5U2V0dGluZ3MuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMucmVnaXN0ZXImJnRoaXMucmVnaXN0ZXIodGhpcyl9O0UucHJvdG90eXBlLmlzSGlkZGVuPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NWaXNpYmlsaXR5PT09ImhpZGRlbiJ9O3JldHVybiBFfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUuRXZlbnRCdXMnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS5FdmVudEJ1cycpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL0V2ZW50QnVzIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL2Jhc2UvRXZlbnRQcm92aWRlciddLGZ1bmN0aW9uKHEsRSl7InVzZSBzdHJpY3QiO3ZhciBhPXNhcC51aS5iYXNlLk9iamVjdC5leHRlbmQoInNhcC51aS5jb3JlLkV2ZW50QnVzIix7Y29uc3RydWN0b3I6ZnVuY3Rpb24oKXtzYXAudWkuYmFzZS5PYmplY3QuYXBwbHkodGhpcyk7dGhpcy5fbUNoYW5uZWxzPXt9O3RoaXMuX2RlZmF1bHRDaGFubmVsPW5ldyBFKCl9fSk7YS5wcm90b3R5cGUuc3Vic2NyaWJlPWZ1bmN0aW9uKGMsZSxmLGwpe2lmKHR5cGVvZihlKT09PSJmdW5jdGlvbiIpe2w9ZjtmPWU7ZT1jO2M9bnVsbH12YXIgQz1iKHRoaXMsYyk7Qy5hdHRhY2hFdmVudChlLGYsbCk7cmV0dXJuIHRoaXN9O2EucHJvdG90eXBlLnVuc3Vic2NyaWJlPWZ1bmN0aW9uKGMsZSxmLGwpe2lmKHR5cGVvZihlKT09PSJmdW5jdGlvbiIpe2w9ZjtmPWU7ZT1jO2M9bnVsbH12YXIgQz1nKHRoaXMsYyk7aWYoIUMpe3JldHVybiB0aGlzfUMuZGV0YWNoRXZlbnQoZSxmLGwpO2lmKEMhPXRoaXMuX2RlZmF1bHRDaGFubmVsKXt2YXIgbT1FLmdldEV2ZW50TGlzdChDKTt2YXIgaT10cnVlO2Zvcih2YXIgSSBpbiBtKXtpZihDLmhhc0xpc3RlbmVycyhJKSl7aT1mYWxzZTticmVha319aWYoaSl7ZGVsZXRlIHRoaXMuX21DaGFubmVsc1tjXX19cmV0dXJuIHRoaXN9O2EucHJvdG90eXBlLnB1Ymxpc2g9ZnVuY3Rpb24oYyxlLGQpe2lmKGFyZ3VtZW50cy5sZW5ndGg9PTEpe2Q9bnVsbDtlPWM7Yz1udWxsfWVsc2UgaWYoYXJndW1lbnRzLmxlbmd0aD09Mil7aWYodHlwZW9mKGUpIT0ic3RyaW5nIil7ZD1lO2U9YztjPW51bGx9fWQ9ZD9kOnt9O3ZhciBDPWcodGhpcyxjKTtpZighQyl7cmV0dXJufXZhciBmPUUuZ2V0RXZlbnRMaXN0KEMpW2VdO2lmKGYmJnEuaXNBcnJheShmKSl7Zj1mLnNsaWNlKCk7dmFyIEk7Zm9yKHZhciBpPTAsbD1mLmxlbmd0aDtpPGw7aSsrKXtJPWZbaV07SS5mRnVuY3Rpb24uY2FsbChJLm9MaXN0ZW5lcnx8dGhpcyxjLGUsZCl9fX07YS5wcm90b3R5cGUuZ2V0SW50ZXJmYWNlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9O2EucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXt0aGlzLl9kZWZhdWx0Q2hhbm5lbC5kZXN0cm95KCk7Zm9yKHZhciBjIGluIHRoaXMuX21DaGFubmVscyl7dGhpcy5fbUNoYW5uZWxzW2NdLmRlc3Ryb3koKX10aGlzLl9tQ2hhbm5lbHM9e307c2FwLnVpLmJhc2UuT2JqZWN0LnByb3RvdHlwZS5kZXN0cm95LmFwcGx5KHRoaXMsYXJndW1lbnRzKX07ZnVuY3Rpb24gZyhlLGMpe2lmKCFjKXtyZXR1cm4gZS5fZGVmYXVsdENoYW5uZWx9cmV0dXJuIGUuX21DaGFubmVsc1tjXX07ZnVuY3Rpb24gYihlLGMpe3ZhciBDPWcoZSxjKTtpZighQyYmYyl7ZS5fbUNoYW5uZWxzW2NdPW5ldyBFKCk7Qz1lLl9tQ2hhbm5lbHNbY119cmV0dXJuIEN9O3JldHVybiBhfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUuRm9jdXNIYW5kbGVyJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUuRm9jdXNIYW5kbGVyJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvRm9jdXNIYW5kbGVyIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL0RldmljZScsJ3NhcC91aS9HbG9iYWwnLCdzYXAvdWkvYmFzZS9PYmplY3QnLCdqcXVlcnkuc2FwLnNjcmlwdCddLGZ1bmN0aW9uKHEsRCxHLEIpeyJ1c2Ugc3RyaWN0Ijt2YXIgRj1CLmV4dGVuZCgic2FwLnVpLmNvcmUuRm9jdXNIYW5kbGVyIix7Y29uc3RydWN0b3I6ZnVuY3Rpb24ocixjKXtCLmFwcGx5KHRoaXMpO3RoaXMub0NvcmU9Yzt0aGlzLm9DdXJyZW50PW51bGw7dGhpcy5vTGFzdD1udWxsO3RoaXMuYUV2ZW50UXVldWU9W107dGhpcy5mRXZlbnRIYW5kbGVyPXEucHJveHkodGhpcy5vbkV2ZW50LHRoaXMpO3RoaXMuZkRlc3Ryb3lIYW5kbGVyPXEucHJveHkodGhpcy5kZXN0cm95LHRoaXMpO2lmKHIuYWRkRXZlbnRMaXN0ZW5lciYmISEhRC5icm93c2VyLmludGVybmV0X2V4cGxvcmVyKXtyLmFkZEV2ZW50TGlzdGVuZXIoImZvY3VzIix0aGlzLmZFdmVudEhhbmRsZXIsdHJ1ZSk7ci5hZGRFdmVudExpc3RlbmVyKCJibHVyIix0aGlzLmZFdmVudEhhbmRsZXIsdHJ1ZSl9ZWxzZXtxKHIpLmJpbmQoImFjdGl2YXRlIix0aGlzLmZFdmVudEhhbmRsZXIpO3EocikuYmluZCgiZGVhY3RpdmF0ZSIsdGhpcy5mRXZlbnRIYW5kbGVyKX1xLnNhcC5sb2cuZGVidWcoIkZvY3VzSGFuZGxlciBzZXR1cCBvbiBSb290ICIrci50eXBlKyhyLmlkPyI6ICIrci5pZDoiIiksbnVsbCwic2FwLnVpLmNvcmUuRm9jdXNIYW5kbGVyIik7cSh3aW5kb3cpLmJpbmQoInVubG9hZCIseyJvUm9vdFJlZiI6cn0sdGhpcy5mRGVzdHJveUhhbmRsZXIpfX0pO0YucHJvdG90eXBlLmdldEN1cnJlbnRGb2N1c2VkQ29udHJvbElkPWZ1bmN0aW9uKCl7dmFyIGM9bnVsbDt0cnl7dmFyIGE9cShkb2N1bWVudC5hY3RpdmVFbGVtZW50KTtpZihhLmlzKCI6Zm9jdXMiKXx8KEQuYnJvd3Nlci5pbnRlcm5ldF9leHBsb3JlciYmRC5icm93c2VyLnZlcnNpb249PTgmJmRvY3VtZW50Lmhhc0ZvY3VzKCkpKXtjPWEuY29udHJvbCgpfX1jYXRjaChlKXt9cmV0dXJuIGMmJmMubGVuZ3RoPjA/Y1swXS5nZXRJZCgpOm51bGx9O0YucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oZSl7dmFyIHI9ZS5kYXRhLm9Sb290UmVmO2lmKHIpe2lmKHIucmVtb3ZlRXZlbnRMaXN0ZW5lciYmISEhRC5icm93c2VyLmludGVybmV0X2V4cGxvcmVyKXtyLnJlbW92ZUV2ZW50TGlzdGVuZXIoImZvY3VzIix0aGlzLmZFdmVudEhhbmRsZXIsdHJ1ZSk7ci5yZW1vdmVFdmVudExpc3RlbmVyKCJibHVyIix0aGlzLmZFdmVudEhhbmRsZXIsdHJ1ZSl9ZWxzZXtxKHIpLnVuYmluZCgiYWN0aXZhdGUiLHRoaXMuZkV2ZW50SGFuZGxlcik7cShyKS51bmJpbmQoImRlYWN0aXZhdGUiLHRoaXMuZkV2ZW50SGFuZGxlcil9fXEod2luZG93KS51bmJpbmQoInVubG9hZCIsdGhpcy5mRGVzdHJveUhhbmRsZXIpO3RoaXMub0NvcmU9bnVsbH07Ri5wcm90b3R5cGUub25FdmVudD1mdW5jdGlvbihiKXt2YXIgZT1xLmV2ZW50LmZpeChiKTtxLnNhcC5sb2cuZGVidWcoIkV2ZW50ICIrZS50eXBlKyIgcmVhY2hlZCBGb2N1cyBIYW5kbGVyICh0YXJnZXQ6ICIrZS50YXJnZXQrKGUudGFyZ2V0P2UudGFyZ2V0LmlkOiIiKSsiKSIsbnVsbCwic2FwLnVpLmNvcmUuRm9jdXNIYW5kbGVyIik7dmFyIGE9KGUudHlwZT09ImZvY3VzInx8ZS50eXBlPT0iZm9jdXNpbiJ8fGUudHlwZT09ImFjdGl2YXRlIik/ImZvY3VzIjoiYmx1ciI7dGhpcy5hRXZlbnRRdWV1ZS5wdXNoKHt0eXBlOmEsY29udHJvbElkOmcoZS50YXJnZXQpfSk7aWYodGhpcy5hRXZlbnRRdWV1ZS5sZW5ndGg9PTEpe3RoaXMucHJvY2Vzc0V2ZW50KCl9fTtGLnByb3RvdHlwZS5wcm9jZXNzRXZlbnQ9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmFFdmVudFF1ZXVlWzBdO2lmKCFlKXtyZXR1cm59dHJ5e2lmKGUudHlwZT09ImZvY3VzIil7dGhpcy5vbmZvY3VzRXZlbnQoZS5jb250cm9sSWQpfWVsc2UgaWYoZS50eXBlPT0iYmx1ciIpe3RoaXMub25ibHVyRXZlbnQoZS5jb250cm9sSWQpfX1maW5hbGx5e3RoaXMuYUV2ZW50UXVldWUuc2hpZnQoKTtpZih0aGlzLmFFdmVudFF1ZXVlLmxlbmd0aD4wKXt0aGlzLnByb2Nlc3NFdmVudCgpfX19O0YucHJvdG90eXBlLm9uZm9jdXNFdmVudD1mdW5jdGlvbihjKXt0aGlzLm9DdXJyZW50PWM7aWYoIXRoaXMub0xhc3Qpe3JldHVybn10KHRoaXMub0xhc3QsYyx0aGlzLm9Db3JlKTt0aGlzLm9MYXN0PW51bGx9O0YucHJvdG90eXBlLm9uYmx1ckV2ZW50PWZ1bmN0aW9uKGMpe2lmKCF0aGlzLm9DdXJyZW50KXtyZXR1cm59dGhpcy5vTGFzdD1jO3RoaXMub0N1cnJlbnQ9bnVsbDtxLnNhcC5kZWxheWVkQ2FsbCgwLHRoaXMsImNoZWNrRm9yTG9zdEZvY3VzIil9O0YucHJvdG90eXBlLmNoZWNrRm9yTG9zdEZvY3VzPWZ1bmN0aW9uKCl7aWYodGhpcy5vQ3VycmVudD09bnVsbCYmdGhpcy5vTGFzdCE9bnVsbCl7dCh0aGlzLm9MYXN0LG51bGwsdGhpcy5vQ29yZSl9dGhpcy5vTGFzdD1udWxsfTt2YXIgZz1mdW5jdGlvbihkKXt2YXIgaT1xKGQpLmNsb3Nlc3QoIltkYXRhLXNhcC11aV0iKS5hdHRyKCJpZCIpO2lmKGkpe3JldHVybiBpfXJldHVybiBudWxsfTt2YXIgdD1mdW5jdGlvbihjLHIsQyl7dmFyIG89Yz9zYXAudWkuZ2V0Q29yZSgpLmJ5SWQoYyk6bnVsbDtpZihvKXt2YXIgUj1yP3NhcC51aS5nZXRDb3JlKCkuYnlJZChyKTpudWxsO3ZhciBlPXEuRXZlbnQoInNhcGZvY3VzbGVhdmUiKTtlLnRhcmdldD1vLmdldERvbVJlZigpO2UucmVsYXRlZENvbnRyb2xJZD1SP1IuZ2V0SWQoKTpudWxsO2UucmVsYXRlZENvbnRyb2xGb2N1c0luZm89Uj9SLmdldEZvY3VzSW5mbygpOm51bGw7dmFyIGE9by5nZXRVSUFyZWEoKTt2YXIgdT1udWxsO2lmKGEpe3U9Qy5nZXRVSUFyZWEoYS5nZXRJZCgpKX1lbHNle3ZhciBwPXNhcC51aS5nZXRDb3JlKCkuZ2V0U3RhdGljQXJlYVJlZigpO2lmKHEuc2FwLmNvbnRhaW5zT3JFcXVhbHMocCxlLnRhcmdldCkpe3U9Qy5nZXRVSUFyZWEocC5pZCl9fWlmKHUpe3UuX2hhbmRsZUV2ZW50KGUpfX19O3JldHVybiBGfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUuSW50ZXJ2YWxUcmlnZ2VyJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUuSW50ZXJ2YWxUcmlnZ2VyJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvSW50ZXJ2YWxUcmlnZ2VyIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnLi9FdmVudEJ1cyddLGZ1bmN0aW9uKHEsRSl7InVzZSBzdHJpY3QiO3ZhciBfPSJzYXBVaUludGVydmFsVHJpZ2dlci1ldmVudCI7dmFyIEk9c2FwLnVpLmJhc2UuT2JqZWN0LmV4dGVuZCgic2FwLnVpLmNvcmUuSW50ZXJ2YWxUcmlnZ2VyIix7Y29uc3RydWN0b3I6ZnVuY3Rpb24oaSl7c2FwLnVpLmJhc2UuT2JqZWN0LmFwcGx5KHRoaXMpO3RoaXMuX29FdmVudEJ1cz1uZXcgRSgpO3RoaXMuX2RlbGF5ZWRDYWxsSWQ9bnVsbDt0aGlzLl90cmlnZ2VyUHJveHk9cS5wcm94eSh0LHRoaXMpO3RoaXMuX2lJbnRlcnZhbD0wO2lmKGkpe3RoaXMuc2V0SW50ZXJ2YWwoaSl9fX0pO3ZhciB0PWZ1bmN0aW9uKCl7cS5zYXAuY2xlYXJEZWxheWVkQ2FsbCh0aGlzLl9kZWxheWVkQ2FsbElkKTt2YXIgaD10aGlzLl9vRXZlbnRCdXMuX2RlZmF1bHRDaGFubmVsLmhhc0xpc3RlbmVycyhfKTtpZih0aGlzLl9pSW50ZXJ2YWw+MCYmaCl7dGhpcy5fb0V2ZW50QnVzLnB1Ymxpc2goXyk7dGhpcy5fZGVsYXllZENhbGxJZD1xLnNhcC5kZWxheWVkQ2FsbCh0aGlzLl9pSW50ZXJ2YWwsdGhpcyx0aGlzLl90cmlnZ2VyUHJveHkpfX07SS5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbigpe3NhcC51aS5iYXNlLk9iamVjdC5wcm90b3R5cGUuZGVzdHJveS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7ZGVsZXRlIHRoaXMuX3RyaWdnZXJQcm94eTt0aGlzLl9vRXZlbnRCdXMuZGVzdHJveSgpO2RlbGV0ZSB0aGlzLl9vRXZlbnRCdXN9O0kucHJvdG90eXBlLnNldEludGVydmFsPWZ1bmN0aW9uKGkpe2lmKHRoaXMuX2lJbnRlcnZhbCE9PWkpe3RoaXMuX2lJbnRlcnZhbD1pO3RoaXMuX3RyaWdnZXJQcm94eSgpfX07SS5wcm90b3R5cGUuYWRkTGlzdGVuZXI9ZnVuY3Rpb24oZixsKXt0aGlzLl9vRXZlbnRCdXMuc3Vic2NyaWJlKF8sZixsKTt0aGlzLl90cmlnZ2VyUHJveHkoKX07SS5wcm90b3R5cGUucmVtb3ZlTGlzdGVuZXI9ZnVuY3Rpb24oZixsKXt0aGlzLl9vRXZlbnRCdXMudW5zdWJzY3JpYmUoXyxmLGwpfTtJLnByb3RvdHlwZS5nZXRJbnRlcmZhY2U9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc307cmV0dXJuIEl9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS5Mb2NhbGVEYXRhJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUuTG9jYWxlRGF0YScpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL0xvY2FsZURhdGEiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvYmFzZS9PYmplY3QnLCcuL0NvbmZpZ3VyYXRpb24nLCcuL0xvY2FsZSddLGZ1bmN0aW9uKHEsQixDLEwpeyJ1c2Ugc3RyaWN0Ijt2YXIgYT1CLmV4dGVuZCgic2FwLnVpLmNvcmUuTG9jYWxlRGF0YSIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKG8pe0IuYXBwbHkodGhpcyk7dGhpcy5tRGF0YT1nKG8pfSxfZ2V0OmZ1bmN0aW9uKGspe3JldHVybiB0aGlzLm1EYXRhW2tdfSxnZXRPcmllbnRhdGlvbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9nZXQoIm9yaWVudGF0aW9uIil9LGdldExhbmd1YWdlczpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9nZXQoImxhbmd1YWdlcyIpfSxnZXRTY3JpcHRzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2dldCgic2NyaXB0cyIpfSxnZXRUZXJyaXRvcmllczpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9nZXQoInRlcnJpdG9yaWVzIil9LGdldE1vbnRoczpmdW5jdGlvbih3KXtyZXR1cm4gdGhpcy5fZ2V0KCJtb250aHMtZm9ybWF0LSIrdyl9LGdldE1vbnRoc1N0YW5kQWxvbmU6ZnVuY3Rpb24odyl7cmV0dXJuIHRoaXMuX2dldCgibW9udGhzLXN0YW5kQWxvbmUtIit3KX0sZ2V0RGF5czpmdW5jdGlvbih3KXtyZXR1cm4gdGhpcy5fZ2V0KCJkYXlzLWZvcm1hdC0iK3cpfSxnZXREYXlzU3RhbmRBbG9uZTpmdW5jdGlvbih3KXtyZXR1cm4gdGhpcy5fZ2V0KCJkYXlzLXN0YW5kQWxvbmUtIit3KX0sZ2V0UXVhcnRlcnM6ZnVuY3Rpb24odyl7cmV0dXJuIHRoaXMuX2dldCgicXVhcnRlcnMtZm9ybWF0LSIrdyl9LGdldERheVBlcmlvZHM6ZnVuY3Rpb24odyl7cmV0dXJuIHRoaXMuX2dldCgiZGF5UGVyaW9kcy1mb3JtYXQtIit3KX0sZ2V0RGF0ZVBhdHRlcm46ZnVuY3Rpb24ocyl7cmV0dXJuIHRoaXMuX2dldCgiZGF0ZUZvcm1hdC0iK3MpfSxnZXRUaW1lUGF0dGVybjpmdW5jdGlvbihzKXtyZXR1cm4gdGhpcy5fZ2V0KCJ0aW1lRm9ybWF0LSIrcyl9LGdldERhdGVUaW1lUGF0dGVybjpmdW5jdGlvbihzKXtyZXR1cm4gdGhpcy5fZ2V0KCJkYXRlVGltZUZvcm1hdC0iK3MpfSxnZXROdW1iZXJTeW1ib2w6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2dldCgic3ltYm9scy1sYXRuLSIrdCl9LGdldERlY2ltYWxQYXR0ZXJuOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2dldCgiZGVjaW1hbEZvcm1hdCIpLnN0YW5kYXJkfSxnZXRDdXJyZW5jeVBhdHRlcm46ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZ2V0KCJjdXJyZW5jeUZvcm1hdCIpLnN0YW5kYXJkfSxnZXRQZXJjZW50UGF0dGVybjpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9nZXQoInBlcmNlbnRGb3JtYXQiKS5zdGFuZGFyZH0sZ2V0Rmlyc3REYXlPZldlZWs6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZ2V0KCJ3ZWVrRGF0YS1maXJzdERheSIpfSxnZXRXZWVrZW5kU3RhcnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZ2V0KCJ3ZWVrRGF0YS13ZWVrZW5kU3RhcnQiKX0sZ2V0V2Vla2VuZEVuZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9nZXQoIndlZWtEYXRhLXdlZWtlbmRFbmQiKX0sZ2V0SW50ZXJ2YWxQYXR0ZXJuOmZ1bmN0aW9uKGkpe3JldHVybihpJiZ0aGlzLl9nZXQoImludGVydmFsRm9ybWF0LSIraSkpfHx0aGlzLl9nZXQoImludGVydmFsRm9ybWF0RmFsbGJhY2siKX0sZ2V0Q3VycmVuY3lEaWdpdHM6ZnVuY3Rpb24ocyl7dmFyIG89dGhpcy5fZ2V0KCJjdXJyZW5jeURpZ2l0cyIpO3ZhciBkPTI7aWYobyl7aWYob1tzXSE9dW5kZWZpbmVkKXtkPW9bc119ZWxzZXtkPW9bIkRFRkFVTFQiXX19cmV0dXJuIGR9LGdldEN1cnJlbmN5U3ltYm9sOmZ1bmN0aW9uKHMpe3ZhciBvPXRoaXMuX2dldCgiY3VycmVuY3lTeW1ib2xzIik7cmV0dXJuKG8mJm9bc10pfHxzfX0pO3ZhciBNPXsib3JpZW50YXRpb24iOiJsZWZ0LXRvLXJpZ2h0IiwibGFuZ3VhZ2VzIjp7fSwic2NyaXB0cyI6e30sInRlcnJpdG9yaWVzIjp7fSwiZGF0ZUZvcm1hdC1mdWxsIjoiRUVFRSwgTU1NTSBkLCB5IiwiZGF0ZUZvcm1hdC1sb25nIjoiTU1NTSBkLCB5IiwiZGF0ZUZvcm1hdC1tZWRpdW0iOiJNTU0gZCwgeSIsImRhdGVGb3JtYXQtc2hvcnQiOiJNL2QveXkiLCJ0aW1lRm9ybWF0LWZ1bGwiOiJoOm1tOnNzIGEgenp6eiIsInRpbWVGb3JtYXQtbG9uZyI6Img6bW06c3MgYSB6IiwidGltZUZvcm1hdC1tZWRpdW0iOiJoOm1tOnNzIGEiLCJ0aW1lRm9ybWF0LXNob3J0IjoiaDptbSBhIiwiZGF0ZVRpbWVGb3JtYXQtZnVsbCI6InsxfSAnYXQnIHswfSIsImRhdGVUaW1lRm9ybWF0LWxvbmciOiJ7MX0gJ2F0JyB7MH0iLCJkYXRlVGltZUZvcm1hdC1tZWRpdW0iOiJ7MX0sIHswfSIsImRhdGVUaW1lRm9ybWF0LXNob3J0IjoiezF9LCB7MH0iLCJkZWNpbWFsRm9ybWF0Ijp7InN0YW5kYXJkIjoiIywjIzAuIyMjIn0sImN1cnJlbmN5Rm9ybWF0Ijp7InN0YW5kYXJkIjoiwqQjLCMjMC4wMCJ9LCJwZXJjZW50Rm9ybWF0Ijp7InN0YW5kYXJkIjoiIywjIzAlIn0sIm1vbnRocy1mb3JtYXQtYWJicmV2aWF0ZWQiOlsiSmFuIiwiRmViIiwiTWFyIiwiQXByIiwiTWF5IiwiSnVuIiwiSnVsIiwiQXVnIiwiU2VwIiwiT2N0IiwiTm92IiwiRGVjIl0sIm1vbnRocy1mb3JtYXQtd2lkZSI6WyJKYW51YXJ5IiwiRmVicnVhcnkiLCJNYXJjaCIsIkFwcmlsIiwiTWF5IiwiSnVuZSIsIkp1bHkiLCJBdWd1c3QiLCJTZXB0ZW1iZXIiLCJPY3RvYmVyIiwiTm92ZW1iZXIiLCJEZWNlbWJlciJdLCJtb250aHMtZm9ybWF0LW5hcnJvdyI6WyIxIiwiMiIsIjMiLCI0IiwiNSIsIjYiLCI3IiwiOCIsIjkiLCIxMCIsIjExIiwiMTIiXSwibW9udGhzLXN0YW5kQWxvbmUtYWJicmV2aWF0ZWQiOlsiSmFuIiwiRmViIiwiTWFyIiwiQXByIiwiTWF5IiwiSnVuIiwiSnVsIiwiQXVnIiwiU2VwIiwiT2N0IiwiTm92IiwiRGVjIl0sIm1vbnRocy1zdGFuZEFsb25lLXdpZGUiOlsiSmFudWFyeSIsIkZlYnJ1YXJ5IiwiTWFyY2giLCJBcHJpbCIsIk1heSIsIkp1bmUiLCJKdWx5IiwiQXVndXN0IiwiU2VwdGVtYmVyIiwiT2N0b2JlciIsIk5vdmVtYmVyIiwiRGVjZW1iZXIiXSwibW9udGhzLXN0YW5kQWxvbmUtbmFycm93IjpbIjEiLCIyIiwiMyIsIjQiLCI1IiwiNiIsIjciLCI4IiwiOSIsIjEwIiwiMTEiLCIxMiJdLCJkYXlzLWZvcm1hdC1hYmJyZXZpYXRlZCI6WyJTdW4iLCJNb24iLCJUdWUiLCJXZWQiLCJUaHUiLCJGcmkiLCJTYXQiXSwiZGF5cy1mb3JtYXQtd2lkZSI6WyJTdW5kYXkiLCJNb25kYXkiLCJUdWVzZGF5IiwiV2VkbmVzZGF5IiwiVGh1cnNkYXkiLCJGcmlkYXkiLCJTYXR1cmRheSJdLCJkYXlzLWZvcm1hdC1uYXJyb3ciOlsiUyIsIk0iLCJUIiwiVyIsIlQiLCJGIiwiUyJdLCJkYXlzLXN0YW5kQWxvbmUtYWJicmV2aWF0ZWQiOlsiU3VuIiwiTW9uIiwiVHVlIiwiV2VkIiwiVGh1IiwiRnJpIiwiU2F0Il0sImRheXMtc3RhbmRBbG9uZS13aWRlIjpbIlN1bmRheSIsIk1vbmRheSIsIlR1ZXNkYXkiLCJXZWRuZXNkYXkiLCJUaHVyc2RheSIsIkZyaWRheSIsIlNhdHVyZGF5Il0sImRheXMtc3RhbmRBbG9uZS1uYXJyb3ciOlsiUyIsIk0iLCJUIiwiVyIsIlQiLCJGIiwiUyJdLCJxdWFydGVycy1mb3JtYXQtbmFycm93IjpbIjEiLCIyIiwiMyIsIjQiXSwicXVhcnRlcnMtZm9ybWF0LWFiYnJldmlhdGVkIjpbIlExIiwiUTIiLCJRMyIsIlE0Il0sInF1YXJ0ZXJzLWZvcm1hdC13aWRlIjpbIjFzdCBxdWFydGVyIiwiMm5kIHF1YXJ0ZXIiLCIzcmQgcXVhcnRlciIsIjR0aCBxdWFydGVyIl0sInF1YXJ0ZXJzLXN0YW5kQWxvbmUtbmFycm93IjpbIjEiLCIyIiwiMyIsIjQiXSwic3ltYm9scy1sYXRuLWRlY2ltYWwiOiIuIiwic3ltYm9scy1sYXRuLWdyb3VwIjoiLCIsInN5bWJvbHMtbGF0bi1wbHVzU2lnbiI6IisiLCJzeW1ib2xzLWxhdG4tbWludXNTaWduIjoiLSIsImRheVBlcmlvZHMtZm9ybWF0LW5hcnJvdyI6WyJBTSIsIlBNIl0sImRheVBlcmlvZHMtZm9ybWF0LXdpZGUiOlsiQU0iLCJQTSJdLCJkYXlQZXJpb2RzLWZvcm1hdC1hYmJyZXZpYXRlZCI6WyJBTSIsIlBNIl0sIndlZWtEYXRhLW1pbkRheXMiOjQsIndlZWtEYXRhLWZpcnN0RGF5IjoxLCJ3ZWVrRGF0YS13ZWVrZW5kU3RhcnQiOjYsIndlZWtEYXRhLXdlZWtlbmRFbmQiOjAsImludGVydmFsRm9ybWF0RmFsbGJhY2siOiJ7MH0g4oCTIHsxfSJ9O3ZhciBiPXsiaXciOiJoZSIsImppIjoieWkiLCJpbiI6ImlkIiwic2giOiJzciJ9O3ZhciBjPShmdW5jdGlvbigpe3ZhciBkPUwuX2NsZHJMb2NhbGVzLHI9e30saTtpZihkKXtmb3IoaT0wO2k8ZC5sZW5ndGg7aSsrKXtyW2RbaV1dPXRydWV9fXJldHVybiByfSgpKTt2YXIgbD17fTtmdW5jdGlvbiBnKG8pe3ZhciBzPW8uZ2V0TGFuZ3VhZ2UoKXx8IiIsUz1vLmdldFNjcmlwdCgpfHwiIixyPW8uZ2V0UmVnaW9uKCl8fCIiLGQ7ZnVuY3Rpb24gZShpKXt2YXIgRDtpZighbFtpXSYmKCFjfHxjW2ldPT09dHJ1ZSkpe2xbaV09cS5zYXAubG9hZFJlc291cmNlKCJzYXAvdWkvY29yZS9jbGRyLyIraSsiLmpzb24iLHtkYXRhVHlwZToianNvbiIsZmFpbE9uRXJyb3I6ZmFsc2V9KX1yZXR1cm4gbFtpXX1zPShzJiZiW3NdKXx8cztpZihzPT09Im5vIil7cz0ibmIifWlmKHM9PT0iemgiJiYhcil7aWYoUz09PSJIYW5zIil7cj0iQ04ifWVsc2UgaWYoUz09PSJIYW50Iil7cj0iVFcifX12YXIgaT1zKyJfIityO2lmKHMmJnIpe2Q9ZShpKX1pZighZCYmcyl7ZD1lKHMpfWxbaV09ZHx8TTtyZXR1cm4gbFtpXX07YS5leHRlbmQoInNhcC51aS5jb3JlLkN1c3RvbUxvY2FsZURhdGEiLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbihvKXthLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLm1DdXN0b21EYXRhPXNhcC51aS5nZXRDb3JlKCkuZ2V0Q29uZmlndXJhdGlvbigpLmdldEZvcm1hdFNldHRpbmdzKCkuZ2V0Q3VzdG9tTG9jYWxlRGF0YSgpfSxfZ2V0OmZ1bmN0aW9uKGkpe3JldHVybiB0aGlzLm1DdXN0b21EYXRhW2ldfHx0aGlzLm1EYXRhW2ldfX0pO2EuZ2V0SW5zdGFuY2U9ZnVuY3Rpb24obyl7cmV0dXJuIG8uaGFzUHJpdmF0ZVVzZVN1YnRhZygic2FwdWZtdCIpP25ldyBzYXAudWkuY29yZS5DdXN0b21Mb2NhbGVEYXRhKG8pOm5ldyBhKG8pfTtyZXR1cm4gYX0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLlJlbmRlck1hbmFnZXInKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS5SZW5kZXJNYW5hZ2VyJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvUmVuZGVyTWFuYWdlciIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ3NhcC91aS9iYXNlL0ludGVyZmFjZScsJ3NhcC91aS9iYXNlL09iamVjdCcsJ2pxdWVyeS5zYXAuYWN0JywnanF1ZXJ5LnNhcC5lbmNvZGVyJ10sZnVuY3Rpb24ocSxJLEIpeyJ1c2Ugc3RyaWN0Ijt2YXIgYz1bInJlbmRlckNvbnRyb2wiLCJ3cml0ZSIsIndyaXRlRXNjYXBlZCIsInRyYW5zbGF0ZSIsIndyaXRlQWNjZWxlcmF0b3JLZXkiLCJ3cml0ZUNvbnRyb2xEYXRhIiwid3JpdGVFbGVtZW50RGF0YSIsIndyaXRlQXR0cmlidXRlIiwid3JpdGVBdHRyaWJ1dGVFc2NhcGVkIiwiYWRkQ2xhc3MiLCJ3cml0ZUNsYXNzZXMiLCJhZGRTdHlsZSIsIndyaXRlU3R5bGVzIiwid3JpdGVBY2Nlc3NpYmlsaXR5U3RhdGUiLCJ3cml0ZUljb24iLCJnZXRDb25maWd1cmF0aW9uIiwiZ2V0SFRNTCIsImNsZWFudXBDb250cm9sV2l0aG91dFJlbmRlcmluZyJdO3ZhciBOPVsicmVuZGVyIiwiZmx1c2giLCJkZXN0cm95Il07dmFyIFI9Qi5leHRlbmQoInNhcC51aS5jb3JlLlJlbmRlck1hbmFnZXIiLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbigpe0IuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMuYUJ1ZmZlcj1bXTt0aGlzLmFSZW5kZXJlZENvbnRyb2xzPVtdO3RoaXMuYVN0eWxlU3RhY2s9W3t9XX0sbWV0YWRhdGE6e3B1YmxpY01ldGhvZHM6Yy5jb25jYXQoTil9fSk7Ui5wcm90b3R5cGUuZ2V0UmVuZGVyZXJJbnRlcmZhY2U9ZnVuY3Rpb24oKXt2YXIgaT1uZXcgSSh0aGlzLGMpO3RoaXMuZ2V0UmVuZGVyZXJJbnRlcmZhY2U9cS5zYXAuZ2V0dGVyKGkpO3JldHVybiBpfTtSLnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKCl7dGhpcy5hQnVmZmVyPVtdO3RoaXMuYVJlbmRlcmVkQ29udHJvbHM9W107dGhpcy5hU3R5bGVTdGFjaz1be31dfTtSLnByb3RvdHlwZS5nZXRDb25maWd1cmF0aW9uPWZ1bmN0aW9uKCl7cmV0dXJuIHNhcC51aS5nZXRDb3JlKCkuZ2V0Q29uZmlndXJhdGlvbigpfTtSLnByb3RvdHlwZS5nZXRSZW5kZXJlcj1mdW5jdGlvbihDKXtyZXR1cm4gUi5nZXRSZW5kZXJlcihDKX07dmFyIHQ9ZnVuY3Rpb24ocixDKXtyLl9iTG9ja2VkPXRydWU7dHJ5e3ZhciBlPXEuRXZlbnQoIkJlZm9yZVJlbmRlcmluZyIpO2Uuc3JjQ29udHJvbD1DO0MuX2hhbmRsZUV2ZW50KGUpfWZpbmFsbHl7ci5fYkxvY2tlZD1mYWxzZX19O1IucHJvdG90eXBlLmNsZWFudXBDb250cm9sV2l0aG91dFJlbmRlcmluZz1mdW5jdGlvbihDKXtpZighQ3x8IUMuZ2V0RG9tUmVmKCkpe3JldHVybn10KHRoaXMsQyk7Qy5iT3V0cHV0PWZhbHNlfTtSLnByb3RvdHlwZS5yZW5kZXJDb250cm9sPWZ1bmN0aW9uKEMpe2lmKCFDKXtyZXR1cm59aWYoIXRoaXMuYVJlbmRlclN0YWNrKXt0aGlzLmFSZW5kZXJTdGFjaz1uZXcgQXJyYXkoKX1pZih0aGlzLmFSZW5kZXJTdGFjayYmdGhpcy5hUmVuZGVyU3RhY2subGVuZ3RoPjApe3Euc2FwLm1lYXN1cmUucGF1c2UodGhpcy5hUmVuZGVyU3RhY2tbMF0rIi0tLXJlbmRlckNvbnRyb2wiKX1lbHNlIGlmKEMuZ2V0UGFyZW50KCkmJkMuZ2V0UGFyZW50KCkuZ2V0TWV0YWRhdGEoKS5nZXROYW1lKCk9PSJzYXAudWkuY29yZS5VSUFyZWEiKXtxLnNhcC5tZWFzdXJlLnBhdXNlKEMuZ2V0UGFyZW50KCkuZ2V0SWQoKSsiLS0tcmVyZW5kZXIiKX10aGlzLmFSZW5kZXJTdGFjay51bnNoaWZ0KEMuZ2V0SWQoKSk7cS5zYXAubWVhc3VyZS5zdGFydChDLmdldElkKCkrIi0tLXJlbmRlckNvbnRyb2wiLCJSZW5kZXJpbmcgb2YgIitDLmdldE1ldGFkYXRhKCkuZ2V0TmFtZSgpKTt2YXIgYj10aGlzLmFCdWZmZXIubGVuZ3RoO3ZhciBvPXt9O2lmKEMuYUN1c3RvbVN0eWxlQ2xhc3NlcyYmQy5hQ3VzdG9tU3R5bGVDbGFzc2VzLmxlbmd0aD4wKXtvLmFDdXN0b21TdHlsZUNsYXNzZXM9Qy5hQ3VzdG9tU3R5bGVDbGFzc2VzfXRoaXMuYVN0eWxlU3RhY2sucHVzaChvKTtxLnNhcC5tZWFzdXJlLnBhdXNlKEMuZ2V0SWQoKSsiLS0tcmVuZGVyQ29udHJvbCIpO3ZhciByPXRoaXMuZ2V0UmVuZGVyZXIoQyk7cS5zYXAubWVhc3VyZS5yZXN1bWUoQy5nZXRJZCgpKyItLS1yZW5kZXJDb250cm9sIik7dCh0aGlzLEMpO3ZhciBhPUMuYUJpbmRQYXJhbWV0ZXJzO2lmKGEmJmEubGVuZ3RoPjApe3ZhciBkPXEoQy5nZXREb21SZWYoKSk7aWYoZCYmZFswXSl7Zm9yKHZhciBpPTA7aTxhLmxlbmd0aDtpKyspe3ZhciBwPWFbaV07ZC51bmJpbmQocC5zRXZlbnRUeXBlLHAuZm5Qcm94eSl9fX1yLnJlbmRlcih0aGlzLmdldFJlbmRlcmVySW50ZXJmYWNlKCksQyk7dGhpcy5hU3R5bGVTdGFjay5wb3AoKTt0aGlzLmFSZW5kZXJlZENvbnRyb2xzLnB1c2goQyk7aWYoQy5nZXRVSUFyZWEmJkMuZ2V0VUlBcmVhKCkpe0MuZ2V0VUlBcmVhKCkuX29uQ29udHJvbFJlbmRlcmVkKEMpfUMuYk91dHB1dD10aGlzLmFCdWZmZXIubGVuZ3RoIT1iO3Euc2FwLm1lYXN1cmUuZW5kKEMuZ2V0SWQoKSsiLS0tcmVuZGVyQ29udHJvbCIpO3RoaXMuYVJlbmRlclN0YWNrLnNoaWZ0KCk7aWYodGhpcy5hUmVuZGVyU3RhY2smJnRoaXMuYVJlbmRlclN0YWNrLmxlbmd0aD4wKXtxLnNhcC5tZWFzdXJlLnJlc3VtZSh0aGlzLmFSZW5kZXJTdGFja1swXSsiLS0tcmVuZGVyQ29udHJvbCIpfWVsc2UgaWYoQy5nZXRQYXJlbnQoKSYmQy5nZXRQYXJlbnQoKS5nZXRNZXRhZGF0YSgpLmdldE5hbWUoKT09InNhcC51aS5jb3JlLlVJQXJlYSIpe3Euc2FwLm1lYXN1cmUucmVzdW1lKEMuZ2V0UGFyZW50KCkuZ2V0SWQoKSsiLS0tcmVyZW5kZXIiKX19O1IucHJvdG90eXBlLmdldEhUTUw9ZnVuY3Rpb24oQyl7dmFyIGE9dGhpcy5hQnVmZmVyO3ZhciByPXRoaXMuYUJ1ZmZlcj1bXTt0aGlzLnJlbmRlckNvbnRyb2woQyk7dGhpcy5hQnVmZmVyPWE7cmV0dXJuIHIuam9pbigiIil9OyhmdW5jdGlvbigpe3ZhciBzPWZ1bmN0aW9uKCl7dmFyIEM9c2FwLnVpLmdldENvcmUoKTt2YXIgRj1DLmdldEN1cnJlbnRGb2N1c2VkQ29udHJvbElkKCksbz1udWxsLGE9bnVsbDtpZihGKXt2YXIgYj1DLmdldEVsZW1lbnRCeUlkKEYpO2lmKGIpe289Yi5nZXRGb2N1c0luZm8oKTthPWIuZ2V0Rm9jdXNEb21SZWYoKX19cmV0dXJue2ZvY3VzZWRDb250cm9sSWQ6Rixmb2N1c0luZm86byxmb2N1c0RvbVJlZjphfX07dmFyIGY9ZnVuY3Rpb24ocixhLFMpe2Zvcih2YXIgaT0wLGI9YS5sZW5ndGg7aTxiO2krKyl7dmFyIEM9YVtpXTtpZihDLmJPdXRwdXQpe3IuX2JMb2NrZWQ9dHJ1ZTt0cnl7dmFyIEU9cS5FdmVudCgiQWZ0ZXJSZW5kZXJpbmciKTtFLnNyY0NvbnRyb2w9QztxLnNhcC5tZWFzdXJlLnN0YXJ0KEMuZ2V0SWQoKSsiLS0tQWZ0ZXJSZW5kZXJpbmciLCJBZnRlclJlbmRlcmluZyBvZiAiK0MuZ2V0TWV0YWRhdGEoKS5nZXROYW1lKCkpO0MuX2hhbmRsZUV2ZW50KEUpO3Euc2FwLm1lYXN1cmUuZW5kKEMuZ2V0SWQoKSsiLS0tQWZ0ZXJSZW5kZXJpbmciKX1maW5hbGx5e3IuX2JMb2NrZWQ9ZmFsc2V9fX10cnl7aWYoUyYmUy5mb2N1c2VkQ29udHJvbElkKXt2YXIgRj1zYXAudWkuZ2V0Q29yZSgpLmdldEVsZW1lbnRCeUlkKFMuZm9jdXNlZENvbnRyb2xJZCk7aWYoRiYmRi5nZXRGb2N1c0RvbVJlZigpIT1TLmZvY3VzRG9tUmVmKXtGLmFwcGx5Rm9jdXNJbmZvKFMuZm9jdXNJbmZvKX19fWNhdGNoKGUpe3Euc2FwLmxvZy53YXJuaW5nKCJQcm9ibGVtcyB3aGlsZSByZXN0b3JlIGZvY3VzIGFmdGVyIHJlbmRlcmluZzogIitlLG51bGwscil9Zm9yKHZhciBpPTAsYj1hLmxlbmd0aDtpPGI7aSsrKXt2YXIgQz1hW2ldLGQ9Qy5hQmluZFBhcmFtZXRlcnM7aWYoZCYmZC5sZW5ndGg+MCl7dmFyIEQ9cShDLmdldERvbVJlZigpKTtpZihEJiZEWzBdKXtmb3IodmFyIGo9MDtqPGQubGVuZ3RoO2orKyl7dmFyIHA9ZFtqXTtELmJpbmQocC5zRXZlbnRUeXBlLHAuZm5Qcm94eSl9fX19fTtSLnByb3RvdHlwZS5mbHVzaD1mdW5jdGlvbihULGQsdil7aWYodGhpcy5iUmVuZGVyZXJNb2RlKXtxLnNhcC5sb2cuaW5mbygiRmx1c2ggbXVzdCBub3QgYmUgY2FsbGVkIGZyb20gY29udHJvbCByZW5kZXJlcnMuIENhbGwgaWdub3JlZC4iLG51bGwsdGhpcyk7cmV0dXJufWlmKCFkJiYodHlwZW9mIHYhPT0ibnVtYmVyIikmJiF2KXtSLnByZXNlcnZlQ29udGVudChUKX12YXIgUz1zKCk7dmFyIGg9Ui5wcmVwYXJlSFRNTDUodGhpcy5hQnVmZmVyLmpvaW4oIiIpKTtpZih0aGlzLl9mUHV0SW50b0RvbSl7dGhpcy5fZlB1dEludG9Eb20oVCxoKX1lbHNle2Zvcih2YXIgaT0wO2k8dGhpcy5hUmVuZGVyZWRDb250cm9scy5sZW5ndGg7aSsrKXt2YXIgbz10aGlzLmFSZW5kZXJlZENvbnRyb2xzW2ldLmdldERvbVJlZigpO2lmKG8mJiFSLmlzUHJlc2VydmVkQ29udGVudChvKSl7aWYoUi5pc0lubGluZVRlbXBsYXRlKG8pKXtxKG8pLmVtcHR5KCl9ZWxzZXtxKG8pLnJlbW92ZSgpfX19aWYodHlwZW9mIHY9PT0ibnVtYmVyIil7aWYodjw9MCl7cShUKS5wcmVwZW5kKGgpfWVsc2V7dmFyICQ9cShUKS5jaGlsZHJlbigpLmVxKHYtMSk7aWYoJC5sZW5ndGg9PT0xKXskLmFmdGVyKGgpfWVsc2V7cShUKS5hcHBlbmQoaCl9fX1lbHNlIGlmKCF2KXtxKFQpLmh0bWwoaCl9ZWxzZXtxKFQpLmFwcGVuZChoKX19Zih0aGlzLHRoaXMuYVJlbmRlcmVkQ29udHJvbHMsUyk7dGhpcy5hUmVuZGVyZWRDb250cm9scz1bXTt0aGlzLmFCdWZmZXI9W107dGhpcy5hU3R5bGVTdGFjaz1be31dO3Euc2FwLmFjdC5yZWZyZXNoKCl9O1IucHJvdG90eXBlLnJlbmRlcj1mdW5jdGlvbihDLFQpe2lmKHRoaXMuYlJlbmRlcmVyTW9kZSl7cS5zYXAubG9nLmluZm8oIlJlbmRlciBtdXN0IG5vdCBiZSBjYWxsZWQgZnJvbSBjb250cm9sIHJlbmRlcmVycy4gQ2FsbCBpZ25vcmVkLiIsbnVsbCx0aGlzKTtyZXR1cm59aWYodGhpcy5fYkxvY2tlZCl7cS5zYXAubG9nLmVycm9yKCJSZW5kZXIgbXVzdCBub3QgYmUgY2FsbGVkIHdpdGhpbiBCZWZvcmUgb3IgQWZ0ZXIgUmVuZGVyaW5nIFBoYXNlLiBDYWxsIGlnbm9yZWQuIixudWxsLHRoaXMpO3JldHVybn10aGlzLmFCdWZmZXI9W107dGhpcy5yZW5kZXJDb250cm9sKEMpO3RoaXMuX2ZQdXRJbnRvRG9tPWZ1bmN0aW9uKG8saCl7aWYoQyYmVCl7dmFyIGE9Qy5nZXREb21SZWYoKTtpZihSLmlzUHJlc2VydmVkQ29udGVudChhKSl7YT1xLnNhcC5ieUlkKCJzYXAtdWktZHVtbXktIitDLmdldElkKCkpWzBdfHxhfXZhciBuPWEmJmEucGFyZW50Tm9kZSE9VDt2YXIgQT1mdW5jdGlvbigpe3ZhciBqPXEoVCk7aWYoVC5pbm5lckhUTUw9PSIiKXtqLmh0bWwoaCl9ZWxzZXtqLmFwcGVuZChoKX19O2lmKG4pe2lmKCFSLmlzUHJlc2VydmVkQ29udGVudChhKSl7aWYoUi5pc0lubGluZVRlbXBsYXRlKGEpKXtxKGEpLmVtcHR5KCl9ZWxzZXtxKGEpLnJlbW92ZSgpfX1pZihoKXtBKCl9fWVsc2V7aWYoaCl7aWYoYSl7aWYoUi5pc0lubGluZVRlbXBsYXRlKGEpKXtxKGEpLmh0bWwoaCl9ZWxzZXtxKGEpLnJlcGxhY2VXaXRoKGgpfX1lbHNle0EoKX19ZWxzZXtpZihSLmlzSW5saW5lVGVtcGxhdGUoYSkpe3EoYSkuZW1wdHkoKX1lbHNle2lmKCFDLmdldFBhcmVudCgpfHwhQy5nZXRQYXJlbnQoKS5fb25DaGlsZFJlcmVuZGVyZWRFbXB0eXx8IUMuZ2V0UGFyZW50KCkuX29uQ2hpbGRSZXJlbmRlcmVkRW1wdHkoQyxhKSl7cShhKS5yZW1vdmUoKX19fX19fTt0aGlzLmZsdXNoKFQsdHJ1ZSk7dGhpcy5fZlB1dEludG9Eb209bnVsbH19KCkpO1IuZ2V0UmVuZGVyZXI9ZnVuY3Rpb24oQyl7cmV0dXJuIEMuZ2V0TWV0YWRhdGEoKS5nZXRSZW5kZXJlcigpfTtSLmluaXRIVE1MNVN1cHBvcnQ9ZnVuY3Rpb24oKXtpZighIXNhcC51aS5EZXZpY2UuYnJvd3Nlci5pbnRlcm5ldF9leHBsb3JlciYmKHNhcC51aS5EZXZpY2UuYnJvd3Nlci52ZXJzaW9uPT09OHx8c2FwLnVpLkRldmljZS5icm93c2VyLnZlcnNpb249PT03KSl7dmFyIFQ9WyJhcnRpY2xlIiwiYXNpZGUiLCJhdWRpbyIsImNhbnZhcyIsImNvbW1hbmQiLCJkYXRhbGlzdCIsImRldGFpbHMiLCJmaWdjYXB0aW9uIiwiZmlndXJlIiwiZm9vdGVyIiwiaGVhZGVyIiwiaGdyb3VwIiwia2V5Z2VuIiwibWFyayIsIm1ldGVyIiwibmF2Iiwib3V0cHV0IiwicHJvZ3Jlc3MiLCJycCIsInJ0IiwicnVieSIsInNlY3Rpb24iLCJzb3VyY2UiLCJzdW1tYXJ5IiwidGVtcGxhdGUiLCJ0aW1lIiwidmlkZW8iLCJ3YnIiXTtmb3IodmFyIGk9MDtpPFQubGVuZ3RoO2krKyl7ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChUW2ldKX12YXIgcj1uZXcgUmVnRXhwKCI8KCIrVC5qb2luKCJ8IikrIikoXFxzfD4pIiwiaSIpO3ZhciBkPW51bGw7Ui5wcmVwYXJlSFRNTDU9ZnVuY3Rpb24oaCl7aWYoaCYmaC5tYXRjaChyKSl7aWYoIWQpe2Q9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7ZC5zdHlsZS5kaXNwbGF5PSdub25lJ312YXIgZT1kLmNsb25lTm9kZSh0cnVlKTt2YXIgZj1kb2N1bWVudC5ib2R5fHxkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7Zi5hcHBlbmRDaGlsZChlKTtlLmlubmVySFRNTD1oLnJlcGxhY2UoL15cc1xzKi8sJycpLnJlcGxhY2UoL1xzXHMqJC8sJycpO2YucmVtb3ZlQ2hpbGQoZSk7cmV0dXJuIGUuY2hpbGROb2Rlc31yZXR1cm4gaH07cS5zYXAubG9nLmluZm8oIklFOCBIVE1MNSBzdXBwb3J0IGFjdGl2YXRlZCIpfWVsc2V7cS5zYXAubG9nLmluZm8oIm5vIElFOCBIVE1MNSBzdXBwb3J0IHJlcXVpcmVkIik7Ui5wcmVwYXJlSFRNTDU9ZnVuY3Rpb24oaCl7cmV0dXJuIGh9fX07Ui5mb3JjZVJlcGFpbnQ9ZnVuY3Rpb24oZCl7dmFyIEQ9dHlwZW9mIGQ9PSJzdHJpbmciP3Euc2FwLmRvbUJ5SWQoZCk6ZDtpZihEKXtxLnNhcC5sb2cuZGVidWcoImZvcmNpbmcgYSByZXBhaW50IGZvciAiKyhELmlkfHxTdHJpbmcoRCkpKTt2YXIgbz1ELnN0eWxlLmRpc3BsYXk7dmFyIGE9ZG9jdW1lbnQuYWN0aXZlRWxlbWVudDtELnN0eWxlLmRpc3BsYXk9Im5vbmUiO0Qub2Zmc2V0SGVpZ2h0O0Quc3R5bGUuZGlzcGxheT1vO2lmKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQhPT1hKXtxLnNhcC5mb2N1cyhhKX19fTsoZnVuY3Rpb24oKXt2YXIgYT0ic2FwLXVpLXByZXNlcnZlIixiPSJzYXAtdWktc3RhdGljIixBPSJkYXRhLXNhcC11aS1wcmVzZXJ2ZSIsZD0iZGF0YS1zYXAtdWktYXJlYSI7ZnVuY3Rpb24gZygpe3ZhciAkPXEoIiMiK2EpO2lmKCQubGVuZ3RoPT09MCl7JD1xKCI8RElWLz4iLHtyb2xlOiJhcHBsaWNhdGlvbiIsaWQ6YX0pLmFkZENsYXNzKCJzYXBVaUhpZGRlbiIpLmNzcygid2lkdGgiLCIwIikuY3NzKCJoZWlnaHQiLCIwIikuY3NzKCJvdmVyZmxvdyIsImhpZGRlbiIpLmFwcGVuZFRvKGRvY3VtZW50LmJvZHkpfXJldHVybiAkfWZ1bmN0aW9uIG0obil7cSgiPERJVi8+Iix7aWQ6InNhcC11aS1kdW1teS0iK24uaWR9KS5hZGRDbGFzcygic2FwVWlIaWRkZW4iKS5pbnNlcnRCZWZvcmUobil9Ui5wcmVzZXJ2ZUNvbnRlbnQ9ZnVuY3Rpb24ocixwLFApe3NhcC51aS5nZXRDb3JlKCkuZ2V0RXZlbnRCdXMoKS5wdWJsaXNoKCJzYXAudWkiLCJfX3ByZXNlcnZlQ29udGVudCIse2RvbU5vZGU6cn0pO3ZhciAkPWcoKTtmdW5jdGlvbiBmKGgpe2lmKGguaWQ9PT1hfHxoLmlkPT09Yil7cmV0dXJufWlmKGguaGFzQXR0cmlidXRlKEEpKXtpZihoPT09cil7bShoKX0kLmFwcGVuZChoKX1lbHNlIGlmKFAmJmguaWQpe1IubWFya1ByZXNlcnZhYmxlQ29udGVudChxKGgpLGguaWQpOyQuYXBwZW5kKGgpO3JldHVybn1pZighaC5oYXNBdHRyaWJ1dGUoZCkpe3ZhciBuPWguZmlyc3RDaGlsZDt3aGlsZShuKXtoPW47bj1uLm5leHRTaWJsaW5nO2lmKGgubm9kZVR5cGU9PT0xKXtmKGgpfX19fXEuc2FwLm1lYXN1cmUuc3RhcnQoci5pZCsiLS0tcHJlc2VydmVDb250ZW50IiwicHJlc2VydmVDb250ZW50IGZvciAiK3IuaWQpO2lmKHApe2Yocil9ZWxzZXtxKHIpLmNoaWxkcmVuKCkuZWFjaChmdW5jdGlvbihpLG4pe2Yobil9KX1xLnNhcC5tZWFzdXJlLmVuZChyLmlkKyItLS1wcmVzZXJ2ZUNvbnRlbnQiKX07Ui5maW5kUHJlc2VydmVkQ29udGVudD1mdW5jdGlvbihpKXt2YXIgJD1nKCksZj0kLmNoaWxkcmVuKCJbIitBKyI9JyIraS5yZXBsYWNlKC8oOnxcLikvZywnXFwkMScpKyInXSIpO3JldHVybiBmfTtSLm1hcmtQcmVzZXJ2YWJsZUNvbnRlbnQ9ZnVuY3Rpb24oJCxpKXskLmF0dHIoQSxpKX07Ui5pc1ByZXNlcnZlZENvbnRlbnQ9ZnVuY3Rpb24oRCl7cmV0dXJuKEQmJkQuZ2V0QXR0cmlidXRlKEEpJiZELnBhcmVudE5vZGUmJkQucGFyZW50Tm9kZS5pZD09YSl9O1IuZ2V0UHJlc2VydmVBcmVhUmVmPWZ1bmN0aW9uKCl7cmV0dXJuIGcoKVswXX07dmFyIGU9ImRhdGEtc2FwLXVpLXRlbXBsYXRlIjtSLm1hcmtJbmxpbmVUZW1wbGF0ZT1mdW5jdGlvbigkKXskLmF0dHIoZSwiIil9O1IuaXNJbmxpbmVUZW1wbGF0ZT1mdW5jdGlvbihEKXtyZXR1cm4oRCYmRC5oYXNBdHRyaWJ1dGUoZSkpfX0oKSk7Ui5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24oVCl7dGhpcy5hQnVmZmVyLnB1c2guYXBwbHkodGhpcy5hQnVmZmVyLGFyZ3VtZW50cyk7cmV0dXJuIHRoaXN9O1IucHJvdG90eXBlLndyaXRlRXNjYXBlZD1mdW5jdGlvbihULGwpe2lmKGwpe3ZhciBMPVQuc3BsaXQoIlxuIik7Zm9yKHZhciBpPTA7aTxMLmxlbmd0aDtpKyspe0xbaV09cS5zYXAuZW5jb2RlSFRNTChMW2ldKX1UPUwuam9pbigiPGJyPiIpfWVsc2V7VD1xLnNhcC5lbmNvZGVIVE1MKFQpfXRoaXMuYUJ1ZmZlci5wdXNoKFQpO3JldHVybiB0aGlzfTtSLnByb3RvdHlwZS50cmFuc2xhdGU9ZnVuY3Rpb24oayl7fTtSLnByb3RvdHlwZS53cml0ZUFjY2VsZXJhdG9yS2V5PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9O1IucHJvdG90eXBlLmFkZFN0eWxlPWZ1bmN0aW9uKG4sdil7aWYodiE9PXVuZGVmaW5lZCYmdiE9PW51bGwpe3ZhciBzPXRoaXMuYVN0eWxlU3RhY2tbdGhpcy5hU3R5bGVTdGFjay5sZW5ndGgtMV07aWYoIXMuYVN0eWxlKXtzLmFTdHlsZT1bXX1zLmFTdHlsZS5wdXNoKG4rIjoiK3YpfXJldHVybiB0aGlzfTtSLnByb3RvdHlwZS53cml0ZVN0eWxlcz1mdW5jdGlvbigpe3ZhciBzPXRoaXMuYVN0eWxlU3RhY2tbdGhpcy5hU3R5bGVTdGFjay5sZW5ndGgtMV07aWYocy5hU3R5bGUpe3RoaXMud3JpdGUoIiBzdHlsZT1cIiIrcy5hU3R5bGUuam9pbigiOyIpKyJcIiAiKX1zLmFTdHlsZT1udWxsO3JldHVybiB0aGlzfTtSLnByb3RvdHlwZS5hZGRDbGFzcz1mdW5jdGlvbihuKXtpZihuKXt2YXIgcz10aGlzLmFTdHlsZVN0YWNrW3RoaXMuYVN0eWxlU3RhY2subGVuZ3RoLTFdO2lmKCFzLmFDbGFzc2VzKXtzLmFDbGFzc2VzPVtdfXMuYUNsYXNzZXMucHVzaChuKX1yZXR1cm4gdGhpc307Ui5wcm90b3R5cGUud3JpdGVDbGFzc2VzPWZ1bmN0aW9uKGUpe3ZhciBzPXRoaXMuYVN0eWxlU3RhY2tbdGhpcy5hU3R5bGVTdGFjay5sZW5ndGgtMV07dmFyIEM9ZT9lLmFDdXN0b21TdHlsZUNsYXNzZXM6KChlPT09ZmFsc2UpP1tdOnMuYUN1c3RvbVN0eWxlQ2xhc3Nlcyk7aWYocy5hQ2xhc3Nlc3x8Qyl7dmFyIGE9W10uY29uY2F0KHMuYUNsYXNzZXN8fFtdLEN8fFtdKTthLnNvcnQoKTthPXEubWFwKGEsZnVuY3Rpb24obixpKXtyZXR1cm4oaT09MHx8biE9YVtpLTFdKT9uOm51bGx9KTt0aGlzLndyaXRlKCIgY2xhc3M9XCIiLGEuam9pbigiICIpLCJcIiAiKX1pZighZSl7cy5hQ3VzdG9tU3R5bGVDbGFzc2VzPW51bGx9cy5hQ2xhc3Nlcz1udWxsO3JldHVybiB0aGlzfTtSLnByb3RvdHlwZS53cml0ZUNvbnRyb2xEYXRhPWZ1bmN0aW9uKEMpe3RoaXMud3JpdGVFbGVtZW50RGF0YShDKTtyZXR1cm4gdGhpc307Ui5wcm90b3R5cGUud3JpdGVFbGVtZW50RGF0YT1mdW5jdGlvbihlKXt2YXIgcz1lLmdldElkKCk7aWYocyl7dGhpcy53cml0ZUF0dHJpYnV0ZSgiaWQiLHMpLndyaXRlQXR0cmlidXRlKCJkYXRhLXNhcC11aSIscyl9dmFyIGQ9ZS5nZXRDdXN0b21EYXRhKCk7dmFyIGw9ZC5sZW5ndGg7Zm9yKHZhciBpPTA7aTxsO2krKyl7dmFyIEQ9ZFtpXTtpZihELmdldFdyaXRlVG9Eb20oKSl7dmFyIGs9RC5nZXRLZXkoKTtpZih0eXBlb2YgRC5nZXRWYWx1ZSgpPT09InN0cmluZyIpe2lmKChzYXAudWkuY29yZS5JRC5pc1ZhbGlkKGspKSYmKGsuaW5kZXhPZigiOiIpPT0tMSkmJihrLmluZGV4T2YoInNhcC11aSIpIT09MCkpe3RoaXMud3JpdGVBdHRyaWJ1dGVFc2NhcGVkKCJkYXRhLSIrayxELmdldFZhbHVlKCkpfWVsc2V7cS5zYXAubG9nLmVycm9yKCJDdXN0b21EYXRhIHdpdGgga2V5ICIraysiIHNob3VsZCBiZSB3cml0dGVuIHRvIEhUTUwgb2YgIit0aGlzKyIgYnV0IHRoZSBrZXkgaXMgbm90IHZhbGlkIChtdXN0IGJlIGEgdmFsaWQgc2FwLnVpLmNvcmUuSUQgd2l0aG91dCBhbnkgY29sb24gYW5kIG1heSBub3Qgc3RhcnQgd2l0aCAnc2FwLXVpJykuIil9fWVsc2V7cS5zYXAubG9nLmVycm9yKCJDdXN0b21EYXRhIHdpdGgga2V5ICIraysiIHNob3VsZCBiZSB3cml0dGVuIHRvIEhUTUwgb2YgIit0aGlzKyIgYnV0IHRoZSB2YWx1ZSBpcyBub3QgYSBzdHJpbmcuIil9fX1yZXR1cm4gdGhpc307Ui5wcm90b3R5cGUud3JpdGVBdHRyaWJ1dGU9ZnVuY3Rpb24obix2KXt0aGlzLndyaXRlKCIgIixuLCI9XCIiLHYsIlwiIik7cmV0dXJuIHRoaXN9O1IucHJvdG90eXBlLndyaXRlQXR0cmlidXRlRXNjYXBlZD1mdW5jdGlvbihuLHYpe3RoaXMud3JpdGVBdHRyaWJ1dGUobixxLnNhcC5lc2NhcGVIVE1MKFN0cmluZyh2KSkpO3JldHVybiB0aGlzfTtSLnByb3RvdHlwZS53cml0ZUFjY2Vzc2liaWxpdHlTdGF0ZT1mdW5jdGlvbihlLFApe2lmKCFzYXAudWkuZ2V0Q29yZSgpLmdldENvbmZpZ3VyYXRpb24oKS5nZXRBY2Nlc3NpYmlsaXR5KCkpe3JldHVybiB0aGlzfWlmKGFyZ3VtZW50cy5sZW5ndGg9PTEmJiEoZSBpbnN0YW5jZW9mIHNhcC51aS5jb3JlLkVsZW1lbnQpKXtQPWU7ZT1udWxsfXZhciBhPXt9O2lmKGUhPW51bGwpe3ZhciBtPWUuZ2V0TWV0YWRhdGEoKTttLl9lbnJpY2hDaGlsZEluZm9zKCk7dmFyIGI9ZnVuY3Rpb24oRSxBLHYpe3ZhciBvPW0uZ2V0QWxsUHJvcGVydGllcygpW0VdO2lmKG8mJmVbby5fc0dldHRlcl0oKT09PXYpe2FbQV09InRydWUifX07dmFyIGQ9ZnVuY3Rpb24oRSxBKXt2YXIgbz1tLmdldEFsbEFzc29jaWF0aW9ucygpW0VdO2lmKG8mJm8ubXVsdGlwbGUpe3ZhciBrPWVbby5fc0dldHRlcl0oKTtpZihrLmxlbmd0aD4wKXthW0FdPWsuam9pbigiICIpfX19O2IoImVkaXRhYmxlIiwicmVhZG9ubHkiLGZhbHNlKTtiKCJlbmFibGVkIiwiZGlzYWJsZWQiLGZhbHNlKTtiKCJ2aXNpYmxlIiwiaGlkZGVuIixmYWxzZSk7YigicmVxdWlyZWQiLCJyZXF1aXJlZCIsdHJ1ZSk7Yigic2VsZWN0ZWQiLCJzZWxlY3RlZCIsdHJ1ZSk7YigiY2hlY2tlZCIsImNoZWNrZWQiLHRydWUpO2QoImFyaWFEZXNjcmliZWRCeSIsImRlc2NyaWJlZGJ5Iik7ZCgiYXJpYUxhYmVsbGVkQnkiLCJsYWJlbGxlZGJ5Iil9aWYoUCl7dmFyIGY9ZnVuY3Rpb24odil7dmFyIGk9dHlwZW9mKHYpO3JldHVybiB2PT09bnVsbHx8dj09PSIifHxpPT09Im51bWJlciJ8fGk9PT0ic3RyaW5nInx8aT09PSJib29sZWFuIn07dmFyIGc9e307dmFyIHgsaCxpLGo7Zm9yKHggaW4gUCl7aD1QW3hdO2lmKGYoaCkpe2dbeF09aH1lbHNlIGlmKHR5cGVvZihoKT09PSJvYmplY3QiJiZmKGgudmFsdWUpKXtqPSIiO2lmKGguYXBwZW5kJiYoeD09PSJkZXNjcmliZWRieSJ8fHg9PT0ibGFiZWxsZWRieSIpKXtqPWFbeF0/YVt4XSsiICI6IiJ9Z1t4XT1qK2gudmFsdWV9fXEuZXh0ZW5kKGEsZyl9aWYoZSBpbnN0YW5jZW9mIHNhcC51aS5jb3JlLkVsZW1lbnQmJmUuZ2V0UGFyZW50KCkmJmUuZ2V0UGFyZW50KCkuZW5oYW5jZUFjY2Vzc2liaWxpdHlTdGF0ZSl7ZS5nZXRQYXJlbnQoKS5lbmhhbmNlQWNjZXNzaWJpbGl0eVN0YXRlKGUsYSl9Zm9yKHZhciBwIGluIGEpe2lmKGFbcF0hPW51bGwmJmFbcF0hPT0iIil7dGhpcy53cml0ZUF0dHJpYnV0ZUVzY2FwZWQocD09PSJyb2xlIj9wOiJhcmlhLSIrcCxhW3BdKX19cmV0dXJuIHRoaXN9O1IucHJvdG90eXBlLndyaXRlSWNvbj1mdW5jdGlvbih1LEMsYSl7cS5zYXAucmVxdWlyZSgic2FwLnVpLmNvcmUuSWNvblBvb2wiKTt2YXIgaT1zYXAudWkuY29yZS5JY29uUG9vbC5pc0ljb25VUkkodSkscz1pPyI8c3BhbiAiOiI8aW1nICIsVD0oc2FwLnVpLkRldmljZS5icm93c2VyLmludGVybmV0X2V4cGxvcmVyJiZzYXAudWkuRGV2aWNlLmJyb3dzZXIudmVyc2lvbjw5KSxiLHAsbztpZih0eXBlb2YgQz09PSJzdHJpbmciKXtDPVtDXX1pZihpKXtvPXNhcC51aS5jb3JlLkljb25Qb29sLmdldEljb25JbmZvKHUpO2lmKCFvKXtxLnNhcC5sb2cuZXJyb3IoIkFuIHVucmVnaXN0ZXJlZCBpY29uOiAiK3UrIiBpcyB1c2VkIGluIHNhcC51aS5jb3JlLlJlbmRlck1hbmFnZXIncyB3cml0ZUljb24gbWV0aG9kLiIpO3JldHVybn1pZighQyl7Qz1bXX1DLnB1c2goInNhcFVpSWNvbiIpO2lmKCFvLnN1cHByZXNzTWlycm9yaW5nKXtDLnB1c2goInNhcFVpSWNvbk1pcnJvckluUlRMIil9fXRoaXMud3JpdGUocyk7aWYocS5pc0FycmF5KEMpJiZDLmxlbmd0aCl7Yj1DLmpvaW4oIiAiKTt0aGlzLndyaXRlKCJjbGFzcz1cIiIrYisiXCIgIil9aWYoaSl7aWYoIWEpe2E9e319aWYoIVQpe2FbImRhdGEtc2FwLXVpLWljb24tY29udGVudCJdPW8uY29udGVudH10aGlzLndyaXRlKCJzdHlsZT1cImZvbnQtZmFtaWx5OiAiK28uZm9udEZhbWlseSsiO1wiICIpfWVsc2V7YT1xLmV4dGVuZCh7cm9sZToicHJlc2VudGF0aW9uIixhbHQ6IiIsc3JjOnV9LGEpfWlmKHR5cGVvZiBhPT09Im9iamVjdCIpe2ZvcihwIGluIGEpe2lmKGEuaGFzT3duUHJvcGVydHkocCkpe3RoaXMud3JpdGVBdHRyaWJ1dGVFc2NhcGVkKHAsYVtwXSl9fX10aGlzLndyaXRlKGk/Ij4iOiIvPiIpO2lmKGkpe1QmJnRoaXMud3JpdGUoby5jb250ZW50KTt0aGlzLndyaXRlKCI8L3NwYW4+Iil9fTtyZXR1cm4gUn0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLlJlc2l6ZUhhbmRsZXInKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS5SZXNpemVIYW5kbGVyJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvUmVzaXplSGFuZGxlciIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ3NhcC91aS9HbG9iYWwnLCdzYXAvdWkvYmFzZS9PYmplY3QnLCdqcXVlcnkuc2FwLmFjdCcsJ2pxdWVyeS5zYXAuc2NyaXB0J10sZnVuY3Rpb24ocSxHLEIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbD1xLnNhcC5sb2cuZ2V0TG9nZ2VyKCJzYXAudWkuY29yZS5SZXNpemVIYW5kbGVyIixxLnNhcC5sb2cuTGV2ZWwuRVJST1IpO3ZhciBjPW51bGw7dmFyIFI9Qi5leHRlbmQoInNhcC51aS5jb3JlLlJlc2l6ZUhhbmRsZXIiLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbihDKXtCLmFwcGx5KHRoaXMpO2M9Qzt0aGlzLmFSZXNpemVMaXN0ZW5lcnM9W107dGhpcy5iUmVnaXN0ZXJlZD1mYWxzZTt0aGlzLmlJZENvdW50ZXI9MDt0aGlzLmZEZXN0cm95SGFuZGxlcj1xLnByb3h5KHRoaXMuZGVzdHJveSx0aGlzKTtxKHdpbmRvdykuYmluZCgidW5sb2FkIix0aGlzLmZEZXN0cm95SGFuZGxlcik7cS5zYXAuYWN0LmF0dGFjaEFjdGl2YXRlKGksdGhpcyl9fSk7ZnVuY3Rpb24gYSgpe2lmKHRoaXMuYlJlZ2lzdGVyZWQpe3RoaXMuYlJlZ2lzdGVyZWQ9ZmFsc2U7c2FwLnVpLmdldENvcmUoKS5kZXRhY2hJbnRlcnZhbFRpbWVyKHRoaXMuY2hlY2tTaXplcyx0aGlzKX19O2Z1bmN0aW9uIGkoKXtpZighdGhpcy5iUmVnaXN0ZXJlZCYmdGhpcy5hUmVzaXplTGlzdGVuZXJzLmxlbmd0aD4wKXt0aGlzLmJSZWdpc3RlcmVkPXRydWU7c2FwLnVpLmdldENvcmUoKS5hdHRhY2hJbnRlcnZhbFRpbWVyKHRoaXMuY2hlY2tTaXplcyx0aGlzKX19O1IucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oZSl7cS5zYXAuYWN0LmRldGFjaEFjdGl2YXRlKGksdGhpcyk7cSh3aW5kb3cpLnVuYmluZCgidW5sb2FkIix0aGlzLmZEZXN0cm95SGFuZGxlcik7Yz1udWxsO3RoaXMuYVJlc2l6ZUxpc3RlbmVycz1bXTthLmFwcGx5KHRoaXMpfTtSLnByb3RvdHlwZS5hdHRhY2hMaXN0ZW5lcj1mdW5jdGlvbihyLGgpe3ZhciBJPXIgaW5zdGFuY2VvZiBzYXAudWkuY29yZS5Db250cm9sLGQ9ST9yLmdldERvbVJlZigpOnIsdz1kP2Qub2Zmc2V0V2lkdGg6MCxIPWQ/ZC5vZmZzZXRIZWlnaHQ6MCxzPSJycy0iK25ldyBEYXRlKCkudmFsdWVPZigpKyItIit0aGlzLmlJZENvdW50ZXIrKyxiPShJPygiQ29udHJvbCAiK3IuZ2V0SWQoKSk6KHIuaWQ/ci5pZDpTdHJpbmcocikpKTt0aGlzLmFSZXNpemVMaXN0ZW5lcnMucHVzaCh7c0lkOnMsb0RvbVJlZjpJP251bGw6cixvQ29udHJvbDpJP3I6bnVsbCxmSGFuZGxlcjpoLGlXaWR0aDp3LGlIZWlnaHQ6SCxkYmc6Yn0pO2wuZGVidWcoInJlZ2lzdGVyZWQgIitiKTtpLmFwcGx5KHRoaXMpO3JldHVybiBzfTtSLnByb3RvdHlwZS5kZXRhY2hMaXN0ZW5lcj1mdW5jdGlvbihJKXt2YXIgdD10aGlzO3EuZWFjaCh0aGlzLmFSZXNpemVMaXN0ZW5lcnMsZnVuY3Rpb24oYixyKXtpZihyLnNJZD09SSl7dC5hUmVzaXplTGlzdGVuZXJzLnNwbGljZShiLDEpO2wuZGVidWcoImRlcmVnaXN0ZXJlZCAiK0kpO3JldHVybiBmYWxzZX19KTtpZih0aGlzLmFSZXNpemVMaXN0ZW5lcnMubGVuZ3RoPT0wKXthLmFwcGx5KHRoaXMpfX07Ui5wcm90b3R5cGUuY2hlY2tTaXplcz1mdW5jdGlvbigpe3ZhciBkPWwuaXNMb2dnYWJsZSgpO2lmKGQpe2wuZGVidWcoImNoZWNrU2l6ZXM6Iil9cS5lYWNoKHRoaXMuYVJlc2l6ZUxpc3RlbmVycyxmdW5jdGlvbihiLHIpe2lmKHIpe3ZhciBDPSEhci5vQ29udHJvbCxEPUM/ci5vQ29udHJvbC5nZXREb21SZWYoKTpyLm9Eb21SZWY7aWYoRCYmcS5jb250YWlucyhkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsRCkpe3ZhciBvPXIuaVdpZHRoLE89ci5pSGVpZ2h0LG49RC5vZmZzZXRXaWR0aCxOPUQub2Zmc2V0SGVpZ2h0O2lmKG8hPW58fE8hPU4pe3IuaVdpZHRoPW47ci5pSGVpZ2h0PU47dmFyIGU9cS5FdmVudCgicmVzaXplIik7ZS50YXJnZXQ9RDtlLmN1cnJlbnRUYXJnZXQ9RDtlLnNpemU9e3dpZHRoOm4saGVpZ2h0Ok59O2Uub2xkU2l6ZT17d2lkdGg6byxoZWlnaHQ6T307ZS5jb250cm9sPUM/ci5vQ29udHJvbDpudWxsO2lmKGQpe2wuZGVidWcoInJlc2l6ZSBkZXRlY3RlZCBmb3IgJyIrci5kYmcrIic6ICIrZS5vbGRTaXplLndpZHRoKyJ4IitlLm9sZFNpemUuaGVpZ2h0KyIgLT4gIitlLnNpemUud2lkdGgrIngiK2Uuc2l6ZS5oZWlnaHQpfXIuZkhhbmRsZXIoZSl9fX19KTtpZihSLl9rZWVwQWN0aXZlIT10cnVlJiZSLl9rZWVwQWN0aXZlIT1mYWxzZSl7Ui5fa2VlcEFjdGl2ZT1mYWxzZX1pZighcS5zYXAuYWN0LmlzQWN0aXZlKCkmJiFSLl9rZWVwQWN0aXZlKXthLmFwcGx5KHRoaXMpfX07Ui5yZWdpc3Rlcj1mdW5jdGlvbihyLGgpe2lmKCFjfHwhYy5vUmVzaXplSGFuZGxlcil7cmV0dXJuIG51bGx9cmV0dXJuIGMub1Jlc2l6ZUhhbmRsZXIuYXR0YWNoTGlzdGVuZXIocixoKX07Ui5kZXJlZ2lzdGVyPWZ1bmN0aW9uKEkpe2lmKCFjfHwhYy5vUmVzaXplSGFuZGxlcil7cmV0dXJufWMub1Jlc2l6ZUhhbmRsZXIuZGV0YWNoTGlzdGVuZXIoSSl9O1IuZGVyZWdpc3RlckFsbEZvckNvbnRyb2w9ZnVuY3Rpb24oQyl7aWYoIWN8fCFjLm9SZXNpemVIYW5kbGVyKXtyZXR1cm59dmFyIEk9W107cS5lYWNoKGMub1Jlc2l6ZUhhbmRsZXIuYVJlc2l6ZUxpc3RlbmVycyxmdW5jdGlvbihiLHIpe2lmKHImJnIub0NvbnRyb2wmJnIub0NvbnRyb2wuZ2V0SWQoKT09PUMpe0kucHVzaChyLnNJZCl9fSk7cS5lYWNoKEksZnVuY3Rpb24oYixzKXtSLmRlcmVnaXN0ZXIocyl9KX07cmV0dXJuIFJ9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS5VSUNvbXBvbmVudE1ldGFkYXRhJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUuVUlDb21wb25lbnRNZXRhZGF0YScpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL1VJQ29tcG9uZW50TWV0YWRhdGEiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCcuL0NvbXBvbmVudE1ldGFkYXRhJ10sZnVuY3Rpb24ocSxDKXsidXNlIHN0cmljdCI7dmFyIFU9ZnVuY3Rpb24oYyxvKXtDLmFwcGx5KHRoaXMsYXJndW1lbnRzKX07VS5wcm90b3R5cGU9cS5zYXAubmV3T2JqZWN0KEMucHJvdG90eXBlKTtVLnByZXByb2Nlc3NDbGFzc0luZm89ZnVuY3Rpb24oYyl7aWYoYyYmdHlwZW9mIGMubWV0YWRhdGE9PT0ic3RyaW5nIil7Yy5tZXRhZGF0YT17X3NyYzpjLm1ldGFkYXRhfX1yZXR1cm4gY307VS5wcm90b3R5cGUuYXBwbHlTZXR0aW5ncz1mdW5jdGlvbihjKXtDLnByb3RvdHlwZS5hcHBseVNldHRpbmdzLmNhbGwodGhpcyxjKTt2YXIgcz1jLm1ldGFkYXRhO3RoaXMuX21Sb290Vmlldz1zLnJvb3RWaWV3O2lmKHR5cGVvZiB0aGlzLl9tUm9vdFZpZXc9PT0ic3RyaW5nIil7dGhpcy5fbVJvb3RWaWV3PXt2aWV3TmFtZTp0aGlzLl9tUm9vdFZpZXcsdHlwZTpzYXAudWkuY29yZS5tdmMuVmlld1R5cGUuWE1MfX10aGlzLl9tUm91dGluZz1zLnJvdXRpbmc7dmFyIHA9dGhpcy5nZXRQYXJlbnQoKTtpZihwIGluc3RhbmNlb2YgVSl7aWYocC5fbVJvb3RWaWV3KXt0aGlzLl9tUm9vdFZpZXc9cS5leHRlbmQodHJ1ZSx7fSxwLl9tUm9vdFZpZXcsdGhpcy5fbVJvb3RWaWV3KX10aGlzLl9tUm91dGluZz1xLmV4dGVuZCh0cnVlLHt9LHAuX21Sb3V0aW5nLHRoaXMuX21Sb3V0aW5nKX19O1UucHJvdG90eXBlLmdldFJvb3RWaWV3PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21Sb290Vmlld307VS5wcm90b3R5cGUuZ2V0Um91dGluZ0NvbmZpZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9tUm91dGluZyYmdGhpcy5fbVJvdXRpbmcuY29uZmlnfTtVLnByb3RvdHlwZS5nZXRSb3V0ZXM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbVJvdXRpbmcmJnRoaXMuX21Sb3V0aW5nLnJvdXRlc307cmV0dXJuIFV9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS5kZWxlZ2F0ZS5JdGVtTmF2aWdhdGlvbicpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLmRlbGVnYXRlLkl0ZW1OYXZpZ2F0aW9uJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvZGVsZWdhdGUvSXRlbU5hdmlnYXRpb24iLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvYmFzZS9FdmVudFByb3ZpZGVyJ10sZnVuY3Rpb24ocSxFKXsidXNlIHN0cmljdCI7dmFyIEk9RS5leHRlbmQoInNhcC51aS5jb3JlLmRlbGVnYXRlLkl0ZW1OYXZpZ2F0aW9uIix7Y29uc3RydWN0b3I6ZnVuY3Rpb24oZCxpLG4pe0UuYXBwbHkodGhpcyk7dGhpcy5vRG9tUmVmPW51bGw7aWYoZCl7dGhpcy5zZXRSb290RG9tUmVmKGQpfXRoaXMuYUl0ZW1Eb21SZWZzPVtdO2lmKGkpe3RoaXMuc2V0SXRlbURvbVJlZnMoaSl9dGhpcy5pVGFiSW5kZXg9LTE7dGhpcy5pQWN0aXZlVGFiSW5kZXg9ISFuPy0xOjA7dGhpcy5pRm9jdXNlZEluZGV4PS0xO3RoaXMuaVNlbGVjdGVkSW5kZXg9LTE7dGhpcy5iQ3ljbGluZz10cnVlO3RoaXMuYlRhYmxlTW9kZT1mYWxzZTt0aGlzLmlQYWdlU2l6ZT0tMTt0aGlzLl9iTW91c2VEb3duSGFwcGVuZWQ9ZmFsc2U7dGhpcy5vRGlzYWJsZWRNb2RpZmllcnM9e3NhcGVuZDpbImFsdCIsInNoaWZ0Il0sc2FwaG9tZTpbImFsdCIsInNoaWZ0Il19fX0pO0kuRXZlbnRzPXtCZWZvcmVGb2N1czoiQmVmb3JlRm9jdXMiLEFmdGVyRm9jdXM6IkFmdGVyRm9jdXMiLEJvcmRlclJlYWNoZWQ6IkJvcmRlclJlYWNoZWQiLEZvY3VzQWdhaW46IkZvY3VzQWdhaW4ifTtJLnByb3RvdHlwZS5zZXREaXNhYmxlZE1vZGlmaWVycz1mdW5jdGlvbihkKXt0aGlzLm9EaXNhYmxlZE1vZGlmaWVycz1kO3JldHVybiB0aGlzfTtJLnByb3RvdHlwZS5nZXREaXNhYmxlZE1vZGlmaWVycz1mdW5jdGlvbihkKXtyZXR1cm4gdGhpcy5vRGlzYWJsZWRNb2RpZmllcnN9O0kucHJvdG90eXBlLmhhc0Rpc2FibGVkTW9kaWZpZXI9ZnVuY3Rpb24oZSl7dmFyIGQ9dGhpcy5vRGlzYWJsZWRNb2RpZmllcnNbZS50eXBlLnJlcGxhY2UoIm1vZGlmaWVycyIsIiIpXTtpZihxLmlzQXJyYXkoZCkpe2Zvcih2YXIgaT0wO2k8ZC5sZW5ndGg7aSsrKXtpZihlW2RbaV0rIktleSJdKXtyZXR1cm4gdHJ1ZX19fXJldHVybiBmYWxzZX07SS5wcm90b3R5cGUuc2V0Um9vdERvbVJlZj1mdW5jdGlvbihkKXt0aGlzLm9Eb21SZWY9ZDtpZighcSh0aGlzLm9Eb21SZWYpLmRhdGEoInNhcC5JTkl0ZW0iKSl7aWYodGhpcy5pRm9jdXNlZEluZGV4Pj0wKXtxKHRoaXMub0RvbVJlZikuYXR0cigidGFiSW5kZXgiLHRoaXMuaVRhYkluZGV4KX1lbHNle3EodGhpcy5vRG9tUmVmKS5hdHRyKCJ0YWJJbmRleCIsdGhpcy5pQWN0aXZlVGFiSW5kZXgpfX1xKHRoaXMub0RvbVJlZikuZGF0YSgic2FwLklOUm9vdCIsdGhpcyk7cmV0dXJuIHRoaXN9O0kucHJvdG90eXBlLmdldFJvb3REb21SZWY9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vRG9tUmVmfTtJLnByb3RvdHlwZS5nZXRJdGVtRG9tUmVmcz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmFJdGVtRG9tUmVmc307SS5wcm90b3R5cGUuc2V0SXRlbURvbVJlZnM9ZnVuY3Rpb24oYSl7dGhpcy5hSXRlbURvbVJlZnM9YTtmb3IodmFyIGk9MDtpPHRoaXMuYUl0ZW1Eb21SZWZzLmxlbmd0aDtpKyspe2lmKHRoaXMuYUl0ZW1Eb21SZWZzW2ldKXt2YXIgJD1xKHRoaXMuYUl0ZW1Eb21SZWZzW2ldKTtpZihpPT10aGlzLmlGb2N1c2VkSW5kZXgmJiEkLmRhdGEoInNhcC5JTlJvb3QiKSl7JC5hdHRyKCJ0YWJJbmRleCIsdGhpcy5pQWN0aXZlVGFiSW5kZXgpfWVsc2UgaWYoJC5hdHRyKCJ0YWJpbmRleCIpPT0iMCIpeyQuYXR0cigidGFiSW5kZXgiLC0xKX0kLmRhdGEoInNhcC5JTkl0ZW0iLHRydWUpOyQuZGF0YSgic2FwLkluTmF2QXJlYSIsdHJ1ZSk7aWYoJC5kYXRhKCJzYXAuSU5Sb290IikmJmkhPXRoaXMuaUZvY3VzZWRJbmRleCl7JC5kYXRhKCJzYXAuSU5Sb290Iikuc2V0TmVzdGVkSXRlbXNUYWJpbmRleCgpfX19cmV0dXJuIHRoaXN9O0kucHJvdG90eXBlLnNldEl0ZW1zVGFiaW5kZXg9ZnVuY3Rpb24oKXtmb3IodmFyIGk9MDtpPHRoaXMuYUl0ZW1Eb21SZWZzLmxlbmd0aDtpKyspe2lmKHRoaXMuYUl0ZW1Eb21SZWZzW2ldKXt2YXIgJD1xKHRoaXMuYUl0ZW1Eb21SZWZzW2ldKTtpZigkLmlzKCI6c2FwRm9jdXNhYmxlIikpe2lmKGk9PXRoaXMuaUZvY3VzZWRJbmRleCYmISQuZGF0YSgic2FwLklOUm9vdCIpKXskLmF0dHIoInRhYkluZGV4Iix0aGlzLmlBY3RpdmVUYWJJbmRleCl9ZWxzZXskLmF0dHIoInRhYkluZGV4IiwtMSl9fX19cmV0dXJuIHRoaXN9O0kucHJvdG90eXBlLnNldE5lc3RlZEl0ZW1zVGFiaW5kZXg9ZnVuY3Rpb24oKXtpZihxKHRoaXMub0RvbVJlZikuZGF0YSgic2FwLklOSXRlbSIpKXtmb3IodmFyIGk9MDtpPHRoaXMuYUl0ZW1Eb21SZWZzLmxlbmd0aDtpKyspe2lmKHRoaXMuYUl0ZW1Eb21SZWZzW2ldJiZxKHRoaXMuYUl0ZW1Eb21SZWZzW2ldKS5hdHRyKCJ0YWJpbmRleCIpPT0iMCIpe3EodGhpcy5hSXRlbURvbVJlZnNbaV0pLmF0dHIoInRhYkluZGV4IiwtMSl9fX1yZXR1cm4gdGhpc307SS5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbigpe2lmKHRoaXMub0RvbVJlZil7cSh0aGlzLm9Eb21SZWYpLnJlbW92ZURhdGEoInNhcC5JTlJvb3QiKTt0aGlzLm9Eb21SZWY9bnVsbH1pZih0aGlzLmFJdGVtRG9tUmVmcyl7Zm9yKHZhciBpPTA7aTx0aGlzLmFJdGVtRG9tUmVmcy5sZW5ndGg7aSsrKXtpZih0aGlzLmFJdGVtRG9tUmVmc1tpXSl7cSh0aGlzLmFJdGVtRG9tUmVmc1tpXSkucmVtb3ZlRGF0YSgic2FwLklOSXRlbSIpO3EodGhpcy5hSXRlbURvbVJlZnNbaV0pLnJlbW92ZURhdGEoInNhcC5Jbk5hdkFyZWEiKX19dGhpcy5hSXRlbURvbVJlZnM9bnVsbH10aGlzLl9iSXRlbVRhYkluZGV4PXVuZGVmaW5lZH07SS5wcm90b3R5cGUuc2V0Q3ljbGluZz1mdW5jdGlvbihjKXt0aGlzLmJDeWNsaW5nPWM7cmV0dXJuIHRoaXN9O0kucHJvdG90eXBlLnNldFRhYmxlTW9kZT1mdW5jdGlvbih0LFQpe3RoaXMuYlRhYmxlTW9kZT10O3RoaXMuYlRhYmxlTGlzdD10P1Q6ZmFsc2U7cmV0dXJuIHRoaXN9O0kucHJvdG90eXBlLnNldFBhZ2VTaXplPWZ1bmN0aW9uKHApe3RoaXMuaVBhZ2VTaXplPXA7cmV0dXJuIHRoaXN9O0kucHJvdG90eXBlLnNldFNlbGVjdGVkSW5kZXg9ZnVuY3Rpb24oaSl7dGhpcy5pU2VsZWN0ZWRJbmRleD1pO3JldHVybiB0aGlzfTtJLnByb3RvdHlwZS5zZXRDb2x1bW5zPWZ1bmN0aW9uKGMsbil7dGhpcy5pQ29sdW1ucz1jO3RoaXMuYk5vQ29sdW1uQ2hhbmdlPW47cmV0dXJuIHRoaXN9O0kucHJvdG90eXBlLnNldEhvbWVFbmRDb2x1bW5Nb2RlPWZ1bmN0aW9uKHMsYyl7dGhpcy5fYlN0YXlJblJvdz1zO3RoaXMuX2JDdHJsRW5hYmxlZD1jfTtJLnByb3RvdHlwZS5mb2N1c0l0ZW09ZnVuY3Rpb24oaSxlKXtxLnNhcC5sb2cuaW5mbygiRm9jdXNJdGVtOiAiK2krIiBpRm9jdXNlZEluZGV4OiAiK3RoaXMuaUZvY3VzZWRJbmRleCwiZm9jdXNJdGVtIiwiSXRlbU5hdmlnYXRpb24iKTtpZihpPT10aGlzLmlGb2N1c2VkSW5kZXgmJnRoaXMuYUl0ZW1Eb21SZWZzW3RoaXMuaUZvY3VzZWRJbmRleF09PWRvY3VtZW50LmFjdGl2ZUVsZW1lbnQpe3RoaXMuZmlyZUV2ZW50KEkuRXZlbnRzLkZvY3VzQWdhaW4se2luZGV4OmksZXZlbnQ6ZX0pO3JldHVybn1pZighdGhpcy5hSXRlbURvbVJlZnNbaV18fCFxKHRoaXMuYUl0ZW1Eb21SZWZzW2ldKS5pcygiOnNhcEZvY3VzYWJsZSIpKXtpZih0aGlzLmJUYWJsZU1vZGUpe3ZhciBjPWkldGhpcy5pQ29sdW1ucztpZihlLmtleUNvZGU9PXEuc2FwLktleUNvZGVzLkFSUk9XX1JJR0hUKXtpZihjPHRoaXMuaUNvbHVtbnMtMSl7aSs9MX19ZWxzZXtpZihjPjEpe2ktPTF9fXRoaXMuZm9jdXNJdGVtKGksZSl9cmV0dXJufXRoaXMuZmlyZUV2ZW50KEkuRXZlbnRzLkJlZm9yZUZvY3VzLHtpbmRleDppLGV2ZW50OmV9KTt0aGlzLnNldEZvY3VzZWRJbmRleChpKTt0aGlzLmJJU2V0Rm9jdXM9dHJ1ZTtpZihxKHRoaXMuYUl0ZW1Eb21SZWZzW3RoaXMuaUZvY3VzZWRJbmRleF0pLmRhdGEoInNhcC5JTlJvb3QiKSYmZSl7dmFyIG89cSh0aGlzLmFJdGVtRG9tUmVmc1t0aGlzLmlGb2N1c2VkSW5kZXhdKS5kYXRhKCJzYXAuSU5Sb290Iik7by5fc0ZvY3VzRXZlbnQ9ZS50eXBlfXEuc2FwLmxvZy5pbmZvKCJTZXQgRm9jdXMgb24gSUQ6ICIrdGhpcy5hSXRlbURvbVJlZnNbdGhpcy5pRm9jdXNlZEluZGV4XS5pZCwiZm9jdXNJdGVtIiwiSXRlbU5hdmlnYXRpb24iKTtxLnNhcC5mb2N1cyh0aGlzLmFJdGVtRG9tUmVmc1t0aGlzLmlGb2N1c2VkSW5kZXhdKTt0aGlzLmZpcmVFdmVudChJLkV2ZW50cy5BZnRlckZvY3VzLHtpbmRleDppLGV2ZW50OmV9KX07SS5wcm90b3R5cGUuc2V0Rm9jdXNlZEluZGV4PWZ1bmN0aW9uKGkpe3ZhciAkO2lmKGk8MCl7aT0wfWlmKGk+dGhpcy5hSXRlbURvbVJlZnMubGVuZ3RoLTEpe2k9dGhpcy5hSXRlbURvbVJlZnMubGVuZ3RoLTF9cSh0aGlzLm9Eb21SZWYpLmF0dHIoInRhYkluZGV4Iix0aGlzLmlUYWJJbmRleCk7aWYodGhpcy5pRm9jdXNlZEluZGV4IT09LTEmJnRoaXMuYUl0ZW1Eb21SZWZzLmxlbmd0aD50aGlzLmlGb2N1c2VkSW5kZXgpe3EodGhpcy5hSXRlbURvbVJlZnNbdGhpcy5pRm9jdXNlZEluZGV4XSkuYXR0cigidGFiSW5kZXgiLC0xKTskPXEodGhpcy5hSXRlbURvbVJlZnNbdGhpcy5pRm9jdXNlZEluZGV4XSk7aWYoJC5kYXRhKCJzYXAuSU5Sb290IikmJmkhPXRoaXMuaUZvY3VzZWRJbmRleCl7cSgkLmRhdGEoInNhcC5JTlJvb3QiKS5hSXRlbURvbVJlZnNbJC5kYXRhKCJzYXAuSU5Sb290IikuaUZvY3VzZWRJbmRleF0pLmF0dHIoInRhYkluZGV4IiwtMSl9fXRoaXMuaUZvY3VzZWRJbmRleD1pO3ZhciBmPXRoaXMuYUl0ZW1Eb21SZWZzW3RoaXMuaUZvY3VzZWRJbmRleF07JD1xKHRoaXMuYUl0ZW1Eb21SZWZzW3RoaXMuaUZvY3VzZWRJbmRleF0pO2lmKCEkLmRhdGEoInNhcC5JTlJvb3QiKSl7cShmKS5hdHRyKCJ0YWJJbmRleCIsdGhpcy5pQWN0aXZlVGFiSW5kZXgpfXJldHVybiB0aGlzfTtJLnByb3RvdHlwZS5nZXRGb2N1c2VkRG9tUmVmPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYUl0ZW1Eb21SZWZzW3RoaXMuaUZvY3VzZWRJbmRleF19O0kucHJvdG90eXBlLmdldEZvY3VzZWRJbmRleD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmlGb2N1c2VkSW5kZXh9O0kucHJvdG90eXBlLm9uZm9jdXNpbj1mdW5jdGlvbihlKXt2YXIgcz1lLnRhcmdldDtpZihzPT10aGlzLm9Eb21SZWYpe2lmKCF0aGlzLl9iSXRlbVRhYkluZGV4KXt0aGlzLnNldEl0ZW1zVGFiaW5kZXgoKTt0aGlzLl9iSXRlbVRhYkluZGV4PXRydWV9aWYodGhpcy5fYk1vdXNlRG93bkhhcHBlbmVkKXtyZXR1cm59dmFyIGE7aWYocSh0aGlzLm9Eb21SZWYpLmRhdGEoInNhcC5JTkl0ZW0iKSYmdGhpcy5fc0ZvY3VzRXZlbnQmJiFxKHRoaXMub0RvbVJlZikuZGF0YSgic2FwLkluTmF2QXJlYSIpKXtzd2l0Y2godGhpcy5fc0ZvY3VzRXZlbnQpe2Nhc2Uic2FwbmV4dCI6YT0wO2JyZWFrO2Nhc2Uic2FwcHJldmlvdXMiOmE9dGhpcy5hSXRlbURvbVJlZnMubGVuZ3RoLTE7YnJlYWs7ZGVmYXVsdDphPXRoaXMuaVNlbGVjdGVkSW5kZXghPS0xP3RoaXMuaVNlbGVjdGVkSW5kZXg6KHRoaXMuaUZvY3VzZWRJbmRleCE9LTE/dGhpcy5pRm9jdXNlZEluZGV4OjApO2JyZWFrfXRoaXMuX3NGb2N1c0V2ZW50PXVuZGVmaW5lZH1lbHNle2E9dGhpcy5pU2VsZWN0ZWRJbmRleCE9LTE/dGhpcy5pU2VsZWN0ZWRJbmRleDoodGhpcy5pRm9jdXNlZEluZGV4IT0tMT90aGlzLmlGb2N1c2VkSW5kZXg6MCl9dGhpcy5mb2N1c0l0ZW0oYSxlKTtpZih0aGlzLmlGb2N1c2VkSW5kZXg9PS0xKXtmb3IodmFyIGk9YSsxO2k8dGhpcy5hSXRlbURvbVJlZnMubGVuZ3RoO2krKyl7dGhpcy5mb2N1c0l0ZW0oaSxlKTtpZih0aGlzLmlGb2N1c2VkSW5kZXg9PWkpe2JyZWFrfX1pZih0aGlzLmlGb2N1c2VkSW5kZXg9PS0xJiZhPjApe2Zvcih2YXIgaT1hLTE7aT49MDtpLS0pe3RoaXMuZm9jdXNJdGVtKGksZSk7aWYodGhpcy5pRm9jdXNlZEluZGV4PT1pKXticmVha319fX1lLnByZXZlbnREZWZhdWx0KCk7ZS5zdG9wUHJvcGFnYXRpb24oKX1lbHNlIGlmKCF0aGlzLmJJU2V0Rm9jdXMpe2lmKHRoaXMuYUl0ZW1Eb21SZWZzJiZlLnRhcmdldCE9dGhpcy5hSXRlbURvbVJlZnNbdGhpcy5pRm9jdXNlZEluZGV4XSl7Zm9yKHZhciBpPTA7aTx0aGlzLmFJdGVtRG9tUmVmcy5sZW5ndGg7aSsrKXtpZihlLnRhcmdldD09dGhpcy5hSXRlbURvbVJlZnNbaV0pe3RoaXMuZm9jdXNJdGVtKGksZSk7YnJlYWt9fX1lbHNle3RoaXMuZmlyZUV2ZW50KEkuRXZlbnRzLkFmdGVyRm9jdXMse2luZGV4OnRoaXMuaUZvY3VzZWRJbmRleCxldmVudDplfSl9fXRoaXMuYklTZXRGb2N1cz1mYWxzZX07SS5wcm90b3R5cGUub25zYXBmb2N1c2xlYXZlPWZ1bmN0aW9uKGUpe2lmKCFlLnJlbGF0ZWRDb250cm9sSWR8fCFxLnNhcC5jb250YWluc09yRXF1YWxzKHRoaXMub0RvbVJlZixzYXAudWkuZ2V0Q29yZSgpLmJ5SWQoZS5yZWxhdGVkQ29udHJvbElkKS5nZXRGb2N1c0RvbVJlZigpKSl7dGhpcy5zZXRGb2N1c2VkSW5kZXgodGhpcy5pU2VsZWN0ZWRJbmRleCE9LTE/dGhpcy5pU2VsZWN0ZWRJbmRleDoodGhpcy5pRm9jdXNlZEluZGV4IT0tMT90aGlzLmlGb2N1c2VkSW5kZXg6MCkpO2lmKHEodGhpcy5vRG9tUmVmKS5kYXRhKCJzYXAuSU5JdGVtIikpe3ZhciBwLGQ9cSh0aGlzLm9Eb21SZWYpO3doaWxlKCFwKXtkPWQucGFyZW50KCk7aWYoZC5kYXRhKCJzYXAuSU5Sb290Iikpe3A9ZC5nZXQoMCl9fWlmKCFlLnJlbGF0ZWRDb250cm9sSWR8fHEuc2FwLmNvbnRhaW5zT3JFcXVhbHMocCxzYXAudWkuZ2V0Q29yZSgpLmJ5SWQoZS5yZWxhdGVkQ29udHJvbElkKS5nZXRGb2N1c0RvbVJlZigpKSl7cSh0aGlzLmFJdGVtRG9tUmVmc1t0aGlzLmlGb2N1c2VkSW5kZXhdKS5hdHRyKCJ0YWJJbmRleCIsLTEpfX12YXIgZD1xKHRoaXMub0RvbVJlZik7aWYoZC5kYXRhKCJzYXAuSW5OYXZBcmVhIik9PT1mYWxzZSl7ZC5kYXRhKCJzYXAuSW5OYXZBcmVhIix0cnVlKX19fTtJLnByb3RvdHlwZS5vbm1vdXNlZG93bj1mdW5jdGlvbihlKXt2YXIgcz1lLnRhcmdldDtpZihxLnNhcC5jb250YWluc09yRXF1YWxzKHRoaXMub0RvbVJlZixzKSl7Zm9yKHZhciBpPTA7aTx0aGlzLmFJdGVtRG9tUmVmcy5sZW5ndGg7aSsrKXt2YXIgbz10aGlzLmFJdGVtRG9tUmVmc1tpXTtpZihxLnNhcC5jb250YWluc09yRXF1YWxzKG8scykpe2lmKCF0aGlzLmJUYWJsZU1vZGUpe3RoaXMuZm9jdXNJdGVtKGksZSl9ZWxzZXtpZihvPT09c3x8IXEocykuaXMoIjpzYXBGb2N1c2FibGUiKSl7dGhpcy5mb2N1c0l0ZW0oaSxlKX19cmV0dXJufX1pZihzPT10aGlzLm9Eb21SZWYpe3RoaXMuX2JNb3VzZURvd25IYXBwZW5lZD10cnVlO3ZhciB0PXRoaXM7d2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKXt0Ll9iTW91c2VEb3duSGFwcGVuZWQ9ZmFsc2V9LDIwKX19fTtJLnByb3RvdHlwZS5vbnNhcG5leHQ9ZnVuY3Rpb24oZSl7aWYoIXEuc2FwLmNvbnRhaW5zT3JFcXVhbHModGhpcy5vRG9tUmVmLGUudGFyZ2V0KSl7cmV0dXJufWlmKHEodGhpcy5vRG9tUmVmKS5kYXRhKCJzYXAuSW5OYXZBcmVhIikpe3JldHVybn1pZih0aGlzLmJUYWJsZU1vZGUmJnEuaW5BcnJheShlLnRhcmdldCx0aGlzLmFJdGVtRG9tUmVmcyk9PT0tMSl7cmV0dXJufXZhciBpPXRoaXMuaUZvY3VzZWRJbmRleCxmPXRydWUsYj1mYWxzZTtpZihpPi0xKXtpZih0aGlzLmJUYWJsZU1vZGUpe3ZhciByPXRoaXMuYUl0ZW1Eb21SZWZzLmxlbmd0aC90aGlzLmlDb2x1bW5zLFI9TWF0aC5mbG9vcihpL3RoaXMuaUNvbHVtbnMpLGM9aSV0aGlzLmlDb2x1bW5zO2lmKGUua2V5Q29kZT09cS5zYXAuS2V5Q29kZXMuQVJST1dfRE9XTil7aWYoUjxyLTEpe2krPXRoaXMuaUNvbHVtbnN9fWVsc2V7aWYoYzx0aGlzLmlDb2x1bW5zLTEpe2krPTF9fX1lbHNle2Rve2lmKHRoaXMuaUNvbHVtbnM+MSYmZS5rZXlDb2RlPT1xLnNhcC5LZXlDb2Rlcy5BUlJPV19ET1dOKXtpZigoaSt0aGlzLmlDb2x1bW5zKT49dGhpcy5hSXRlbURvbVJlZnMubGVuZ3RoKXtpZighdGhpcy5iTm9Db2x1bW5DaGFuZ2Upe2lmKChpJXRoaXMuaUNvbHVtbnMpPCh0aGlzLmlDb2x1bW5zLTEpKXtpPShpJXRoaXMuaUNvbHVtbnMpKzF9ZWxzZSBpZih0aGlzLmJDeWNsaW5nKXtpPTB9fWVsc2V7aT10aGlzLmlGb2N1c2VkSW5kZXg7Yj10cnVlfX1lbHNle2k9aSt0aGlzLmlDb2x1bW5zfX1lbHNle2lmKGk9PXRoaXMuYUl0ZW1Eb21SZWZzLmxlbmd0aC0xKXtpZihxKHRoaXMub0RvbVJlZikuZGF0YSgic2FwLklOSXRlbSIpKXtyZXR1cm59ZWxzZSBpZih0aGlzLmJDeWNsaW5nKXtpPTB9ZWxzZXtpPXRoaXMuaUZvY3VzZWRJbmRleDtiPXRydWV9fWVsc2V7aSsrfX1pZihpPT09dGhpcy5pRm9jdXNlZEluZGV4KXtpZihmKXtmPWZhbHNlfWVsc2V7dGhyb3cgbmV3IEVycm9yKCJJdGVtTmF2aWdhdGlvbiBoYXMgbm8gdmlzaWJsZS9leGlzdGluZyBpdGVtcyBhbmQgaXMgaGVuY2UgdW5hYmxlIHRvIHNlbGVjdCB0aGUgbmV4dCBvbmUiKX19fXdoaWxlKCF0aGlzLmFJdGVtRG9tUmVmc1tpXXx8IXEodGhpcy5hSXRlbURvbVJlZnNbaV0pLmlzKCI6dmlzaWJsZSIpfHxxKHRoaXMuYUl0ZW1Eb21SZWZzW2ldKS5jc3MoInZpc2liaWxpdHkiKT09PSJoaWRkZW4ifHwhcSh0aGlzLmFJdGVtRG9tUmVmc1tpXSkuaXMoIjpzYXBGb2N1c2FibGUiKSl9dGhpcy5mb2N1c0l0ZW0oaSxlKTtpZihiKXt0aGlzLmZpcmVFdmVudChJLkV2ZW50cy5Cb3JkZXJSZWFjaGVkLHtpbmRleDppLGV2ZW50OmV9KX1lLnByZXZlbnREZWZhdWx0KCk7ZS5zdG9wUHJvcGFnYXRpb24oKX19O0kucHJvdG90eXBlLm9uc2FwbmV4dG1vZGlmaWVycz1mdW5jdGlvbihlKXtpZih0aGlzLmhhc0Rpc2FibGVkTW9kaWZpZXIoZSkpe3JldHVybn10aGlzLm9uc2FwbmV4dChlKX07SS5wcm90b3R5cGUub25zYXBwcmV2aW91cz1mdW5jdGlvbihlKXtpZighcS5zYXAuY29udGFpbnNPckVxdWFscyh0aGlzLm9Eb21SZWYsZS50YXJnZXQpKXtyZXR1cm59aWYocSh0aGlzLm9Eb21SZWYpLmRhdGEoInNhcC5Jbk5hdkFyZWEiKSl7cmV0dXJufWlmKHRoaXMuYlRhYmxlTW9kZSYmcS5pbkFycmF5KGUudGFyZ2V0LHRoaXMuYUl0ZW1Eb21SZWZzKT09PS0xKXtyZXR1cm59dmFyIGk9dGhpcy5pRm9jdXNlZEluZGV4LGY9dHJ1ZSxiPWZhbHNlO2lmKGk+LTEpe2lmKHRoaXMuYlRhYmxlTW9kZSl7dmFyIHI9dGhpcy5hSXRlbURvbVJlZnMubGVuZ3RoL3RoaXMuaUNvbHVtbnMsUj1NYXRoLmZsb29yKGkvdGhpcy5pQ29sdW1ucyksYz1pJXRoaXMuaUNvbHVtbnM7aWYoZS5rZXlDb2RlPT1xLnNhcC5LZXlDb2Rlcy5BUlJPV19VUCl7aWYoUj4wKXtpLT10aGlzLmlDb2x1bW5zfX1lbHNle2lmKGM+MCl7aS09MX19fWVsc2V7ZG97aWYodGhpcy5pQ29sdW1ucz4xJiZlLmtleUNvZGU9PXEuc2FwLktleUNvZGVzLkFSUk9XX1VQKXtpZigoaS10aGlzLmlDb2x1bW5zKTwwKXtpZighdGhpcy5iTm9Db2x1bW5DaGFuZ2Upe3ZhciBjPTA7aWYoKGkldGhpcy5pQ29sdW1ucyk+MCl7Yz0oaSV0aGlzLmlDb2x1bW5zKS0xfWVsc2UgaWYodGhpcy5iQ3ljbGluZyl7Yz10aGlzLmlDb2x1bW5zLTF9aWYoaT09PTAmJmM9PT0wKXtpPTB9ZWxzZXt2YXIgYT1NYXRoLmNlaWwodGhpcy5hSXRlbURvbVJlZnMubGVuZ3RoL3RoaXMuaUNvbHVtbnMpO2k9YysoKGEtMSkqdGhpcy5pQ29sdW1ucyk7aWYoaT49dGhpcy5hSXRlbURvbVJlZnMubGVuZ3RoKXtpPWktdGhpcy5pQ29sdW1uc319fWVsc2V7aT10aGlzLmlGb2N1c2VkSW5kZXg7Yj10cnVlfX1lbHNle2k9aS10aGlzLmlDb2x1bW5zfX1lbHNle2lmKGk9PTApe2lmKHEodGhpcy5vRG9tUmVmKS5kYXRhKCJzYXAuSU5JdGVtIikpe3JldHVybn1lbHNlIGlmKHRoaXMuYkN5Y2xpbmcpe2k9dGhpcy5hSXRlbURvbVJlZnMubGVuZ3RoLTF9ZWxzZXtpPXRoaXMuaUZvY3VzZWRJbmRleDtiPXRydWV9fWVsc2V7aS0tfX1pZihpPT10aGlzLmlGb2N1c2VkSW5kZXgpe2lmKGYpe2Y9ZmFsc2V9ZWxzZXt0aHJvdyBuZXcgRXJyb3IoIkl0ZW1OYXZpZ2F0aW9uIGhhcyBubyB2aXNpYmxlL2V4aXN0aW5nIGl0ZW1zIGFuZCBpcyBoZW5jZSB1bmFibGUgdG8gc2VsZWN0IHRoZSBwcmV2aW91cyBvbmUiKX19fXdoaWxlKCF0aGlzLmFJdGVtRG9tUmVmc1tpXXx8IXEodGhpcy5hSXRlbURvbVJlZnNbaV0pLmlzKCI6dmlzaWJsZSIpfHxxKHRoaXMuYUl0ZW1Eb21SZWZzW2ldKS5jc3MoInZpc2liaWxpdHkiKT09PSJoaWRkZW4ifHwhcSh0aGlzLmFJdGVtRG9tUmVmc1tpXSkuaXMoIjpzYXBGb2N1c2FibGUiKSl9dGhpcy5mb2N1c0l0ZW0oaSxlKTtpZihiKXt0aGlzLmZpcmVFdmVudChJLkV2ZW50cy5Cb3JkZXJSZWFjaGVkLHtpbmRleDppLGV2ZW50OmV9KX1lLnByZXZlbnREZWZhdWx0KCk7ZS5zdG9wUHJvcGFnYXRpb24oKX19O0kucHJvdG90eXBlLm9uc2FwcHJldmlvdXNtb2RpZmllcnM9ZnVuY3Rpb24oZSl7aWYodGhpcy5oYXNEaXNhYmxlZE1vZGlmaWVyKGUpKXtyZXR1cm59dGhpcy5vbnNhcHByZXZpb3VzKGUpfTtJLnByb3RvdHlwZS5vbnNhcHBhZ2V1cD1mdW5jdGlvbihlKXtpZighcS5zYXAuY29udGFpbnNPckVxdWFscyh0aGlzLm9Eb21SZWYsZS50YXJnZXQpKXtyZXR1cm59aWYodGhpcy5iVGFibGVNb2RlJiZxLmluQXJyYXkoZS50YXJnZXQsdGhpcy5hSXRlbURvbVJlZnMpPT09LTEpe3JldHVybn12YXIgaT0wO3ZhciBiPWZhbHNlO2lmKHRoaXMuaVBhZ2VTaXplPjApe2k9dGhpcy5pRm9jdXNlZEluZGV4O2lmKGk+LTEpe2k9aS10aGlzLmlQYWdlU2l6ZTt3aGlsZShpPjAmJiFxKHRoaXMuYUl0ZW1Eb21SZWZzW2ldKS5pcygiOnNhcEZvY3VzYWJsZSIpKXtpLS19aWYoaTwwKXtpZighdGhpcy5iTm9Db2x1bW5DaGFuZ2Upe2k9MH1lbHNle2k9dGhpcy5pRm9jdXNlZEluZGV4O2I9dHJ1ZX19dGhpcy5mb2N1c0l0ZW0oaSxlKX19ZWxzZSBpZih0aGlzLmJUYWJsZU1vZGUpe2k9dGhpcy5pRm9jdXNlZEluZGV4JXRoaXMuaUNvbHVtbnM7dGhpcy5mb2N1c0l0ZW0oaSxlKX1pZihiKXt0aGlzLmZpcmVFdmVudChJLkV2ZW50cy5Cb3JkZXJSZWFjaGVkLHtpbmRleDppLGV2ZW50OmV9KX1lLnByZXZlbnREZWZhdWx0KCk7ZS5zdG9wUHJvcGFnYXRpb24oKX07SS5wcm90b3R5cGUub25zYXBwYWdlZG93bj1mdW5jdGlvbihlKXtpZighcS5zYXAuY29udGFpbnNPckVxdWFscyh0aGlzLm9Eb21SZWYsZS50YXJnZXQpKXtyZXR1cm59aWYodGhpcy5iVGFibGVNb2RlJiZxLmluQXJyYXkoZS50YXJnZXQsdGhpcy5hSXRlbURvbVJlZnMpPT09LTEpe3JldHVybn12YXIgaT0wO3ZhciBiPWZhbHNlO2lmKHRoaXMuaVBhZ2VTaXplPjApe2k9dGhpcy5pRm9jdXNlZEluZGV4O2lmKGk+LTEpe2k9aSt0aGlzLmlQYWdlU2l6ZTt3aGlsZShpPHRoaXMuYUl0ZW1Eb21SZWZzLmxlbmd0aC0xJiYhcSh0aGlzLmFJdGVtRG9tUmVmc1tpXSkuaXMoIjpzYXBGb2N1c2FibGUiKSl7aSsrfWlmKGk+dGhpcy5hSXRlbURvbVJlZnMubGVuZ3RoLTEpe2lmKCF0aGlzLmJOb0NvbHVtbkNoYW5nZSl7aT10aGlzLmFJdGVtRG9tUmVmcy5sZW5ndGgtMX1lbHNle2k9dGhpcy5pRm9jdXNlZEluZGV4O2I9dHJ1ZX19dGhpcy5mb2N1c0l0ZW0oaSxlKX19ZWxzZSBpZih0aGlzLmJUYWJsZU1vZGUpe3ZhciByPXRoaXMuYUl0ZW1Eb21SZWZzLmxlbmd0aC90aGlzLmlDb2x1bW5zLGM9dGhpcy5pRm9jdXNlZEluZGV4JXRoaXMuaUNvbHVtbnM7aT0oci0xKSp0aGlzLmlDb2x1bW5zK2M7dGhpcy5mb2N1c0l0ZW0oaSxlKX1pZihiKXt0aGlzLmZpcmVFdmVudChJLkV2ZW50cy5Cb3JkZXJSZWFjaGVkLHtpbmRleDppLGV2ZW50OmV9KX1lLnByZXZlbnREZWZhdWx0KCk7ZS5zdG9wUHJvcGFnYXRpb24oKX07SS5wcm90b3R5cGUub25zYXBob21lPWZ1bmN0aW9uKGUpe2lmKCFxLnNhcC5jb250YWluc09yRXF1YWxzKHRoaXMub0RvbVJlZixlLnRhcmdldCkpe3JldHVybn1pZih0aGlzLmJUYWJsZU1vZGUmJnEuaW5BcnJheShlLnRhcmdldCx0aGlzLmFJdGVtRG9tUmVmcyk9PT0tMSl7cmV0dXJufXZhciBpPTA7aWYodGhpcy5iVGFibGVNb2RlKXtpZighdGhpcy5iVGFibGVMaXN0JiYhKGUubWV0YUtleXx8ZS5jdHJsS2V5KSl7dmFyIHI9TWF0aC5mbG9vcih0aGlzLmlGb2N1c2VkSW5kZXgvdGhpcy5pQ29sdW1ucyk7aT1yKnRoaXMuaUNvbHVtbnN9fWVsc2V7aWYoISEoZS5tZXRhS2V5fHxlLmN0cmxLZXkpJiYhdGhpcy5fYkN0cmxFbmFibGVkKXtyZXR1cm59aWYodGhpcy5fYlN0YXlJblJvdyYmISh0aGlzLl9iQ3RybEVuYWJsZWQmJihlLm1ldGFLZXl8fGUuY3RybEtleSkpJiZ0aGlzLmlDb2x1bW5zPjApe3ZhciByPU1hdGguZmxvb3IodGhpcy5pRm9jdXNlZEluZGV4L3RoaXMuaUNvbHVtbnMpO2k9cip0aGlzLmlDb2x1bW5zfWVsc2V7d2hpbGUoIXRoaXMuYUl0ZW1Eb21SZWZzW2ldfHwhcSh0aGlzLmFJdGVtRG9tUmVmc1tpXSkuaXMoIjp2aXNpYmxlIil8fHEodGhpcy5hSXRlbURvbVJlZnNbaV0pLmNzcygidmlzaWJpbGl0eSIpPT09ImhpZGRlbiJ8fCFxKHRoaXMuYUl0ZW1Eb21SZWZzW2ldKS5pcygiOnNhcEZvY3VzYWJsZSIpKXtpKys7aWYoaT09dGhpcy5hSXRlbURvbVJlZnMubGVuZ3RoKXtyZXR1cm59fX19dGhpcy5mb2N1c0l0ZW0oaSxlKTtlLnByZXZlbnREZWZhdWx0KCk7ZS5zdG9wUHJvcGFnYXRpb24oKX07SS5wcm90b3R5cGUub25zYXBob21lbW9kaWZpZXJzPWZ1bmN0aW9uKGUpe2lmKHRoaXMuaGFzRGlzYWJsZWRNb2RpZmllcihlKSl7cmV0dXJufXRoaXMub25zYXBob21lKGUpfTtJLnByb3RvdHlwZS5vbnNhcGVuZD1mdW5jdGlvbihlKXtpZighcS5zYXAuY29udGFpbnNPckVxdWFscyh0aGlzLm9Eb21SZWYsZS50YXJnZXQpKXtyZXR1cm59aWYodGhpcy5iVGFibGVNb2RlJiZxLmluQXJyYXkoZS50YXJnZXQsdGhpcy5hSXRlbURvbVJlZnMpPT09LTEpe3JldHVybn12YXIgaT10aGlzLmFJdGVtRG9tUmVmcy5sZW5ndGgtMTtpZih0aGlzLmJUYWJsZU1vZGUpe2lmKCF0aGlzLmJUYWJsZUxpc3QmJiEoZS5tZXRhS2V5fHxlLmN0cmxLZXkpKXt2YXIgcj1NYXRoLmZsb29yKHRoaXMuaUZvY3VzZWRJbmRleC90aGlzLmlDb2x1bW5zKTtpPXIqdGhpcy5pQ29sdW1ucyt0aGlzLmlDb2x1bW5zLTF9fWVsc2V7aWYoISEoZS5tZXRhS2V5fHxlLmN0cmxLZXkpJiYhdGhpcy5fYkN0cmxFbmFibGVkKXtyZXR1cm59aWYodGhpcy5fYlN0YXlJblJvdyYmISh0aGlzLl9iQ3RybEVuYWJsZWQmJihlLm1ldGFLZXl8fGUuY3RybEtleSkpJiZ0aGlzLmlDb2x1bW5zPjApe3ZhciByPU1hdGguZmxvb3IodGhpcy5pRm9jdXNlZEluZGV4L3RoaXMuaUNvbHVtbnMpO2k9KHIrMSkqdGhpcy5pQ29sdW1ucy0xO2lmKGk+PXRoaXMuYUl0ZW1Eb21SZWZzLmxlbmd0aCl7aT10aGlzLmFJdGVtRG9tUmVmcy5sZW5ndGgtMX19ZWxzZXt3aGlsZSghdGhpcy5hSXRlbURvbVJlZnNbaV18fCFxKHRoaXMuYUl0ZW1Eb21SZWZzW2ldKS5pcygiOnZpc2libGUiKXx8cSh0aGlzLmFJdGVtRG9tUmVmc1tpXSkuY3NzKCJ2aXNpYmlsaXR5Iik9PSJoaWRkZW4ifHwhcSh0aGlzLmFJdGVtRG9tUmVmc1tpXSkuaXMoIjpzYXBGb2N1c2FibGUiKSl7aS0tO2lmKGk8MCl7cmV0dXJufX19fXRoaXMuZm9jdXNJdGVtKGksZSk7ZS5wcmV2ZW50RGVmYXVsdCgpO2Uuc3RvcFByb3BhZ2F0aW9uKCl9O0kucHJvdG90eXBlLm9uc2FwZW5kbW9kaWZpZXJzPWZ1bmN0aW9uKGUpe2lmKHRoaXMuaGFzRGlzYWJsZWRNb2RpZmllcihlKSl7cmV0dXJufXRoaXMub25zYXBlbmQoZSl9O0kucHJvdG90eXBlLnNldFRhYkluZGV4MD1mdW5jdGlvbigpe3RoaXMuaVRhYkluZGV4PTA7dGhpcy5pQWN0aXZlVGFiSW5kZXg9MH07SS5wcm90b3R5cGUub25rZXl1cD1mdW5jdGlvbihlKXtpZihlLmtleUNvZGU9PXEuc2FwLktleUNvZGVzLkYyKXt2YXIgZD1xKHRoaXMub0RvbVJlZik7aWYoZC5kYXRhKCJzYXAuSW5OYXZBcmVhIikpe2QuZGF0YSgic2FwLkluTmF2QXJlYSIsZmFsc2UpfWVsc2UgaWYoZC5kYXRhKCJzYXAuSW5OYXZBcmVhIik9PT1mYWxzZSl7ZC5kYXRhKCJzYXAuSW5OYXZBcmVhIix0cnVlKX1lLnByZXZlbnREZWZhdWx0KCk7ZS5zdG9wUHJvcGFnYXRpb24oKX19O3JldHVybiBJfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUuZm9ybWF0LkRhdGVGb3JtYXQnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS5mb3JtYXQuRGF0ZUZvcm1hdCcpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL2Zvcm1hdC9EYXRlRm9ybWF0IixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL2NvcmUvTG9jYWxlRGF0YSddLGZ1bmN0aW9uKHEsTCl7InVzZSBzdHJpY3QiO3ZhciBEPWZ1bmN0aW9uKCl7dGhyb3cgbmV3IEVycm9yKCl9O0Qub0RhdGVJbmZvPXtvRGVmYXVsdEZvcm1hdE9wdGlvbnM6e3N0eWxlOiJtZWRpdW0ifSxhRmFsbGJhY2tGb3JtYXRPcHRpb25zOlt7c3R5bGU6InNob3J0In0se3N0eWxlOiJtZWRpdW0ifSx7cGF0dGVybjoieXl5eS1NTS1kZCJ9LHtwYXR0ZXJuOiJ5eXl5TU1kZCJ9XSxnZXRQYXR0ZXJuOmZ1bmN0aW9uKGwscyl7cmV0dXJuIGwuZ2V0RGF0ZVBhdHRlcm4ocyl9LG9SZXF1aXJlZFBhcnRzOnsidGV4dCI6dHJ1ZSwieWVhciI6dHJ1ZSwid2Vla1llYXIiOnRydWUsIm1vbnRoIjp0cnVlLCJkYXkiOnRydWV9fTtELm9EYXRlVGltZUluZm89e29EZWZhdWx0Rm9ybWF0T3B0aW9uczp7c3R5bGU6Im1lZGl1bSJ9LGFGYWxsYmFja0Zvcm1hdE9wdGlvbnM6W3tzdHlsZToic2hvcnQifSx7c3R5bGU6Im1lZGl1bSJ9LHtwYXR0ZXJuOiJ5eXl5LU1NLWRkJ1QnaGg6bW06c3MifSx7cGF0dGVybjoieXl5eU1NZGQgaGhtbXNzIn1dLGdldFBhdHRlcm46ZnVuY3Rpb24obCxzKXt2YXIgZD1sLmdldERhdGVUaW1lUGF0dGVybihzKSxhPWwuZ2V0RGF0ZVBhdHRlcm4ocyksdD1sLmdldFRpbWVQYXR0ZXJuKHMpO3JldHVybiBkLnJlcGxhY2UoInsxfSIsYSkucmVwbGFjZSgiezB9Iix0KX0sb1JlcXVpcmVkUGFydHM6eyJ0ZXh0Ijp0cnVlLCJ5ZWFyIjp0cnVlLCJ3ZWVrWWVhciI6dHJ1ZSwibW9udGgiOnRydWUsImRheSI6dHJ1ZSwiaG91cjBfMjMiOnRydWUsImhvdXIxXzI0Ijp0cnVlLCJob3VyMF8xMSI6dHJ1ZSwiaG91cjFfMTIiOnRydWV9fTtELm9UaW1lSW5mbz17b0RlZmF1bHRGb3JtYXRPcHRpb25zOntzdHlsZToibWVkaXVtIn0sYUZhbGxiYWNrRm9ybWF0T3B0aW9uczpbe3N0eWxlOiJzaG9ydCJ9LHtzdHlsZToibWVkaXVtIn0se3BhdHRlcm46ImhoOm1tOnNzIn0se3BhdHRlcm46ImhobW1zcyJ9XSxnZXRQYXR0ZXJuOmZ1bmN0aW9uKGwscyl7cmV0dXJuIGwuZ2V0VGltZVBhdHRlcm4ocyl9LG9SZXF1aXJlZFBhcnRzOnsidGV4dCI6dHJ1ZSwiaG91cjBfMjMiOnRydWUsImhvdXIxXzI0Ijp0cnVlLCJob3VyMF8xMSI6dHJ1ZSwiaG91cjFfMTIiOnRydWV9fTtELmdldEluc3RhbmNlPWZ1bmN0aW9uKGYsbCl7cmV0dXJuIHRoaXMuZ2V0RGF0ZUluc3RhbmNlKGYsbCl9O0QuZ2V0RGF0ZUluc3RhbmNlPWZ1bmN0aW9uKGYsbCl7cmV0dXJuIHRoaXMuY3JlYXRlSW5zdGFuY2UoZixsLHRoaXMub0RhdGVJbmZvKX07RC5nZXREYXRlVGltZUluc3RhbmNlPWZ1bmN0aW9uKGYsbCl7cmV0dXJuIHRoaXMuY3JlYXRlSW5zdGFuY2UoZixsLHRoaXMub0RhdGVUaW1lSW5mbyl9O0QuZ2V0VGltZUluc3RhbmNlPWZ1bmN0aW9uKGYsbCl7cmV0dXJuIHRoaXMuY3JlYXRlSW5zdGFuY2UoZixsLHRoaXMub1RpbWVJbmZvKX07RC5jcmVhdGVJbnN0YW5jZT1mdW5jdGlvbihmLGwsSSl7dmFyIEY9cS5zYXAubmV3T2JqZWN0KHRoaXMucHJvdG90eXBlKTtpZihmIGluc3RhbmNlb2Ygc2FwLnVpLmNvcmUuTG9jYWxlKXtsPWY7Zj11bmRlZmluZWR9aWYoIWwpe2w9c2FwLnVpLmdldENvcmUoKS5nZXRDb25maWd1cmF0aW9uKCkuZ2V0Rm9ybWF0U2V0dGluZ3MoKS5nZXRGb3JtYXRMb2NhbGUoKX1GLm9Mb2NhbGU9bDtGLm9Mb2NhbGVEYXRhPUwuZ2V0SW5zdGFuY2UobCk7Ri5vRm9ybWF0T3B0aW9ucz1xLmV4dGVuZChmYWxzZSx7fSxJLm9EZWZhdWx0Rm9ybWF0T3B0aW9ucyxmKTtpZighRi5vRm9ybWF0T3B0aW9ucy5wYXR0ZXJuKXtGLm9Gb3JtYXRPcHRpb25zLnBhdHRlcm49SS5nZXRQYXR0ZXJuKEYub0xvY2FsZURhdGEsRi5vRm9ybWF0T3B0aW9ucy5zdHlsZSl9aWYoIUkuYUZhbGxiYWNrRm9ybWF0cyl7SS5hRmFsbGJhY2tGb3JtYXRzPVtdO3EuZWFjaChJLmFGYWxsYmFja0Zvcm1hdE9wdGlvbnMsZnVuY3Rpb24oaSxmKXt2YXIgbz1ELmNyZWF0ZUluc3RhbmNlKGYsbCxJKTtvLmJJc0ZhbGxiYWNrPXRydWU7SS5hRmFsbGJhY2tGb3JtYXRzLnB1c2gobyl9KX1GLmFGYWxsYmFja0Zvcm1hdHM9SS5hRmFsbGJhY2tGb3JtYXRzO0Yub1JlcXVpcmVkUGFydHM9SS5vUmVxdWlyZWRQYXJ0cztGLmluaXQoKTtyZXR1cm4gRn07RC5wcm90b3R5cGUuaW5pdD1mdW5jdGlvbigpe3RoaXMuYU1vbnRoc0FiYnJldj10aGlzLm9Mb2NhbGVEYXRhLmdldE1vbnRocygiYWJicmV2aWF0ZWQiKTt0aGlzLmFNb250aHNXaWRlPXRoaXMub0xvY2FsZURhdGEuZ2V0TW9udGhzKCJ3aWRlIik7dGhpcy5hTW9udGhzQWJicmV2U3Q9dGhpcy5vTG9jYWxlRGF0YS5nZXRNb250aHNTdGFuZEFsb25lKCJhYmJyZXZpYXRlZCIpO3RoaXMuYU1vbnRoc1dpZGVTdD10aGlzLm9Mb2NhbGVEYXRhLmdldE1vbnRoc1N0YW5kQWxvbmUoIndpZGUiKTt0aGlzLmFEYXlzQWJicmV2PXRoaXMub0xvY2FsZURhdGEuZ2V0RGF5cygiYWJicmV2aWF0ZWQiKTt0aGlzLmFEYXlzV2lkZT10aGlzLm9Mb2NhbGVEYXRhLmdldERheXMoIndpZGUiKTt0aGlzLmFEYXlzQWJicmV2U3Q9dGhpcy5vTG9jYWxlRGF0YS5nZXREYXlzU3RhbmRBbG9uZSgiYWJicmV2aWF0ZWQiKTt0aGlzLmFEYXlzV2lkZVN0PXRoaXMub0xvY2FsZURhdGEuZ2V0RGF5c1N0YW5kQWxvbmUoIndpZGUiKTt0aGlzLmFEYXlQZXJpb2RzPXRoaXMub0xvY2FsZURhdGEuZ2V0RGF5UGVyaW9kcygiYWJicmV2aWF0ZWQiKTt0aGlzLmFGb3JtYXRBcnJheT10aGlzLnBhcnNlSmF2YURhdGVGb3JtYXQodGhpcy5vRm9ybWF0T3B0aW9ucy5wYXR0ZXJuKX07RC5wcm90b3R5cGUub1N0YXRlcz17IkciOiJlcmEiLCJ5IjoieWVhciIsIlkiOiJ3ZWVrWWVhciIsIk0iOiJtb250aCIsIkwiOiJtb250aFN0YW5kYWxvbmUiLCJ3Ijoid2Vla0luWWVhciIsIlciOiJ3ZWVrSW5Nb250aCIsIkQiOiJkYXlJblllYXIiLCJkIjoiZGF5IiwiRiI6ImRheU9mV2Vla0luTW9udGgiLCJFIjoiZGF5TmFtZUluV2VlayIsImMiOiJkYXlOYW1lSW5XZWVrU3RhbmRhbG9uZSIsInUiOiJkYXlOdW1iZXJPZldlZWsiLCJhIjoiYW1QbU1hcmtlciIsIkgiOiJob3VyMF8yMyIsImsiOiJob3VyMV8yNCIsIksiOiJob3VyMF8xMSIsImgiOiJob3VyMV8xMiIsIm0iOiJtaW51dGUiLCJzIjoic2Vjb25kIiwiUyI6Im1pbGxpc2Vjb25kIiwieiI6InRpbWV6b25lR2VuZXJhbCIsIloiOiJ0aW1lem9uZVJGQzgyMiIsIlgiOiJ0aW1lem9uZUlTTzg2MDEifTtELnByb3RvdHlwZS5mb3JtYXQ9ZnVuY3Rpb24oZCx1KXtpZih1PT09dW5kZWZpbmVkKXt1PXRoaXMub0Zvcm1hdE9wdGlvbnMuVVRDfXZhciBiPVtdLHAsYT11P2QuZ2V0VVRDRGF5KCk6ZC5nZXREYXkoKSxjPXU/ZC5nZXRVVENEYXRlKCk6ZC5nZXREYXRlKCksbT11P2QuZ2V0VVRDTW9udGgoKTpkLmdldE1vbnRoKCkseT11P2QuZ2V0VVRDRnVsbFllYXIoKTpkLmdldEZ1bGxZZWFyKCksTT11P2QuZ2V0VVRDTWlsbGlzZWNvbmRzKCk6ZC5nZXRNaWxsaXNlY29uZHMoKSxzPXU/ZC5nZXRVVENTZWNvbmRzKCk6ZC5nZXRTZWNvbmRzKCksZT11P2QuZ2V0VVRDTWludXRlcygpOmQuZ2V0TWludXRlcygpLGg9dT9kLmdldFVUQ0hvdXJzKCk6ZC5nZXRIb3VycygpLHQ9TWF0aC5hYnMoZC5nZXRUaW1lem9uZU9mZnNldCgpKSxQPWQuZ2V0VGltZXpvbmVPZmZzZXQoKT4wLEg9TWF0aC5mbG9vcih0LzYwKSxmPXQlNjAsWSx3LGcscjtmb3IodmFyIGk9MDtpPHRoaXMuYUZvcm1hdEFycmF5Lmxlbmd0aDtpKyspe3A9dGhpcy5hRm9ybWF0QXJyYXlbaV07c3dpdGNoKHAuc1R5cGUpe2Nhc2UidGV4dCI6Yi5wdXNoKHAuc1ZhbHVlKTticmVhaztjYXNlImRheSI6Yi5wdXNoKHEuc2FwLnBhZExlZnQoU3RyaW5nKGMpLCIwIixwLmlEaWdpdHMpKTticmVhaztjYXNlImRheU5hbWVJbldlZWsiOmlmKHAuaURpZ2l0czw0KXtiLnB1c2godGhpcy5hRGF5c0FiYnJldlthXSl9ZWxzZSBpZihwLmlEaWdpdHM+PTQpe2IucHVzaCh0aGlzLmFEYXlzV2lkZVthXSl9YnJlYWs7Y2FzZSJkYXlOYW1lSW5XZWVrU3RhbmRhbG9uZSI6aWYocC5pRGlnaXRzPDQpe2IucHVzaCh0aGlzLmFEYXlzQWJicmV2U3RbYV0pfWVsc2UgaWYocC5pRGlnaXRzPj00KXtiLnB1c2godGhpcy5hRGF5c1dpZGVTdFthXSl9YnJlYWs7Y2FzZSJkYXlOdW1iZXJPZldlZWsiOmIucHVzaChhfHw3KTticmVhaztjYXNlIm1vbnRoIjppZihwLmlEaWdpdHM9PTMpe2IucHVzaCh0aGlzLmFNb250aHNBYmJyZXZbbV0pfWVsc2UgaWYocC5pRGlnaXRzPj00KXtiLnB1c2godGhpcy5hTW9udGhzV2lkZVttXSl9ZWxzZXtiLnB1c2gocS5zYXAucGFkTGVmdChTdHJpbmcobSsxKSwiMCIscC5pRGlnaXRzKSl9YnJlYWs7Y2FzZSJtb250aFN0YW5kYWxvbmUiOmlmKHAuaURpZ2l0cz09Myl7Yi5wdXNoKHRoaXMuYU1vbnRoc0FiYnJldlN0W21dKX1lbHNlIGlmKHAuaURpZ2l0cz49NCl7Yi5wdXNoKHRoaXMuYU1vbnRoc1dpZGVTdFttXSl9ZWxzZXtiLnB1c2gocS5zYXAucGFkTGVmdChTdHJpbmcobSsxKSwiMCIscC5pRGlnaXRzKSl9YnJlYWs7Y2FzZSJlcmEiOmIucHVzaCgiQUQiKTticmVhaztjYXNlInllYXIiOmNhc2Uid2Vla1llYXIiOlk9IiIreTtpZihwLmlEaWdpdHM9PTImJlkubGVuZ3RoPjIpe1k9WS5zdWJzdHIoWS5sZW5ndGgtMil9Yi5wdXNoKHEuc2FwLnBhZExlZnQoWSwiMCIscC5pRGlnaXRzKSk7YnJlYWs7Y2FzZSJ3ZWVrSW5ZZWFyIjp3PSIiO2lmKGQuZ2V0V2Vlayl7dys9ZC5nZXRXZWVrKCl9Yi5wdXNoKHEuc2FwLnBhZExlZnQodywiMCIscC5pRGlnaXRzKSk7YnJlYWs7Y2FzZSJob3VyMF8yMyI6Yi5wdXNoKHEuc2FwLnBhZExlZnQoU3RyaW5nKGgpLCIwIixwLmlEaWdpdHMpKTticmVhaztjYXNlImhvdXIxXzI0IjppZihoPT0wKXtnPSIyNCJ9ZWxzZXtnPVN0cmluZyhoKX1iLnB1c2gocS5zYXAucGFkTGVmdChnLCIwIixwLmlEaWdpdHMpKTticmVhaztjYXNlImhvdXIwXzExIjppZihoPjExKXtnPVN0cmluZyhoLTEyKX1lbHNle2c9U3RyaW5nKGgpfWIucHVzaChxLnNhcC5wYWRMZWZ0KGcsIjAiLHAuaURpZ2l0cykpO2JyZWFrO2Nhc2UiaG91cjFfMTIiOmlmKGg+MTIpe2c9U3RyaW5nKGgtMTIpfWVsc2UgaWYoaD09MCl7Zz0iMTIifWVsc2V7Zz1TdHJpbmcoaCl9Yi5wdXNoKHEuc2FwLnBhZExlZnQoZywiMCIscC5pRGlnaXRzKSk7YnJlYWs7Y2FzZSJtaW51dGUiOmIucHVzaChxLnNhcC5wYWRMZWZ0KFN0cmluZyhlKSwiMCIscC5pRGlnaXRzKSk7YnJlYWs7Y2FzZSJzZWNvbmQiOmIucHVzaChxLnNhcC5wYWRMZWZ0KFN0cmluZyhzKSwiMCIscC5pRGlnaXRzKSk7YnJlYWs7Y2FzZSJtaWxsaXNlY29uZCI6Yi5wdXNoKHEuc2FwLnBhZFJpZ2h0KHEuc2FwLnBhZExlZnQoU3RyaW5nKE0pLCIwIixNYXRoLm1pbigzLHAuaURpZ2l0cykpLCIwIixwLmlEaWdpdHMpKTticmVhaztjYXNlImFtUG1NYXJrZXIiOnZhciBqPWg8MTI/MDoxO2IucHVzaCh0aGlzLmFEYXlQZXJpb2RzW2pdKTticmVhaztjYXNlInRpbWV6b25lR2VuZXJhbCI6aWYocC5pRGlnaXRzPjMmJmQuZ2V0VGltZXpvbmVMb25nKXtiLnB1c2goZC5nZXRUaW1lem9uZUxvbmcoKSk7YnJlYWt9ZWxzZSBpZihkLmdldFRpbWV6b25lU2hvcnQpe2IucHVzaChkLmdldFRpbWV6b25lU2hvcnQoKSk7YnJlYWt9Yi5wdXNoKCJHTVQiKTtjYXNlInRpbWV6b25lSVNPODYwMSI6aWYoIXUmJnQhPTApe2IucHVzaChQPyItIjoiKyIpO2IucHVzaChxLnNhcC5wYWRMZWZ0KFN0cmluZyhIKSwiMCIsMikpO2IucHVzaCgiOiIpO2IucHVzaChxLnNhcC5wYWRMZWZ0KFN0cmluZyhmKSwiMCIsMikpfWVsc2V7Yi5wdXNoKCJaIil9YnJlYWs7Y2FzZSJ0aW1lem9uZVJGQzgyMiI6aWYoIXUmJnQhPTApe2IucHVzaChQPyItIjoiKyIpO2IucHVzaChxLnNhcC5wYWRMZWZ0KFN0cmluZyhIKSwiMCIsMikpO2IucHVzaChxLnNhcC5wYWRMZWZ0KFN0cmluZyhmKSwiMCIsMikpfWJyZWFrfX1yPWIuam9pbigiIik7aWYoc2FwLnVpLmdldENvcmUoKS5nZXRDb25maWd1cmF0aW9uKCkuZ2V0T3JpZ2luSW5mbygpKXtyPW5ldyBTdHJpbmcocik7ci5vcmlnaW5JbmZvPXtzb3VyY2U6IkNvbW1vbiBMb2NhbGUgRGF0YSBSZXBvc2l0b3J5Iixsb2NhbGU6dGhpcy5vTG9jYWxlLnRvU3RyaW5nKCksc3R5bGU6dGhpcy5vRm9ybWF0T3B0aW9ucy5zdHlsZSxwYXR0ZXJuOnRoaXMub0Zvcm1hdE9wdGlvbnMucGF0dGVybn19cmV0dXJuIHJ9O0QucHJvdG90eXBlLnBhcnNlPWZ1bmN0aW9uKHYsdSl7aWYodT09PXVuZGVmaW5lZCl7dT10aGlzLm9Gb3JtYXRPcHRpb25zLlVUQ312YXIgZCxJPTAsZT1mYWxzZSxhPW51bGwsbT1udWxsLHk9bnVsbCxoPW51bGwsTT1udWxsLHM9bnVsbCxiPW51bGwscD1mYWxzZSxQLGMsdD1udWxsLFY9dHJ1ZSxyPXRoaXMub1JlcXVpcmVkUGFydHM7ZnVuY3Rpb24gZih4KXtyZXR1cm4geD49NDgmJng8PTU3fWZ1bmN0aW9uIGcoeCl7dmFyIHo9MDt3aGlsZSh6PHgmJmYodi5jaGFyQ29kZUF0KEkreikpKXt6Kyt9cmV0dXJuIHYuc3Vic3RyKEkseil9ZnVuY3Rpb24gaih4KXt2YXIgaTtmb3IoaT0wO2k8eC5sZW5ndGg7aSsrKXtpZih2LmluZGV4T2YoeFtpXSxJKT09SSl7cmV0dXJuIHhbaV19fXJldHVybiBudWxsfWZ1bmN0aW9uIGsoeCl7dmFyIGk7Zm9yKGk9MDtpPHgubGVuZ3RoO2krKyl7aWYodi5pbmRleE9mKHhbaV0sSSk9PUkpe3JldHVybiBpfX1yZXR1cm4gbnVsbH1mdW5jdGlvbiBsKHgpe3ZhciB6PXYuY2hhckF0KEkpPT0iKyI/LTE6MTtJKys7Yz1nKDIpO3ZhciBCPXBhcnNlSW50KGMsMTApO0k9SSsyO2lmKHgpe0krK31jPWcoMik7ST1JKzI7dD1wYXJzZUludChjLDEwKTt0PSh0KzYwKkIpKnp9ZnVuY3Rpb24gbih4LHope2lmKHggaW4gciYmeil7Vj1mYWxzZX19dj1xLnRyaW0odik7Zm9yKHZhciBpPTA7aTx0aGlzLmFGb3JtYXRBcnJheS5sZW5ndGg7aSsrKXtQPXRoaXMuYUZvcm1hdEFycmF5W2ldO3N3aXRjaChQLnNUeXBlKXtjYXNlInRleHQiOmlmKHYuaW5kZXhPZihQLnNWYWx1ZSxJKT09SSl7SSs9UC5zVmFsdWUubGVuZ3RofWVsc2V7bihQLnNUeXBlLHRoaXMuYUZvcm1hdEFycmF5W2krMV0uc1R5cGUgaW4gcil9YnJlYWs7Y2FzZSJkYXkiOmM9ZyhNYXRoLm1heChQLmlEaWdpdHMsMikpO24oUC5zVHlwZSxjPT09IiIpO0krPWMubGVuZ3RoO2E9cGFyc2VJbnQoYywxMCk7YnJlYWs7Y2FzZSJkYXlOYW1lSW5XZWVrIjpjYXNlImRheU5hbWVJbldlZWtTdGFuZGFsb25lIjpjPWoodGhpcy5hRGF5c1dpZGUpO2lmKGMpe0krPWMubGVuZ3RoO2JyZWFrfWM9aih0aGlzLmFEYXlzV2lkZVN0KTtpZihjKXtJKz1jLmxlbmd0aDticmVha31jPWoodGhpcy5hRGF5c0FiYnJldik7aWYoYyl7SSs9Yy5sZW5ndGg7YnJlYWt9Yz1qKHRoaXMuYURheXNBYmJyZXZTdCk7aWYoYyl7SSs9Yy5sZW5ndGg7YnJlYWt9YnJlYWs7Y2FzZSJkYXlOdW1iZXJPZldlZWsiOmM9ZyhQLmlEaWdpdHMpO0krPWMubGVuZ3RoO2JyZWFrO2Nhc2UibW9udGgiOmNhc2UibW9udGhTdGFuZGFsb25lIjppZihQLmlEaWdpdHM8Myl7Yz1nKE1hdGgubWF4KFAuaURpZ2l0cywyKSk7bihQLnNUeXBlLGM9PT0iIik7bT1wYXJzZUludChjLDEwKS0xO0krPWMubGVuZ3RofWVsc2V7bT1rKHRoaXMuYU1vbnRoc1dpZGUpO2lmKG0hPW51bGwpe0krPXRoaXMuYU1vbnRoc1dpZGVbbV0ubGVuZ3RoO2JyZWFrfW09ayh0aGlzLmFNb250aHNXaWRlU3QpO2lmKG0hPW51bGwpe0krPXRoaXMuYU1vbnRoc1dpZGVTdFttXS5sZW5ndGg7YnJlYWt9bT1rKHRoaXMuYU1vbnRoc0FiYnJldik7aWYobSE9bnVsbCl7SSs9dGhpcy5hTW9udGhzQWJicmV2W21dLmxlbmd0aDticmVha31tPWsodGhpcy5hTW9udGhzQWJicmV2U3QpO2lmKG0hPW51bGwpe0krPXRoaXMuYU1vbnRoc0FiYnJldlN0W21dLmxlbmd0aDticmVha31uKFAuc1R5cGUsdHJ1ZSl9YnJlYWs7Y2FzZSJlcmEiOmJyZWFrO2Nhc2UieWVhciI6Y2FzZSJ3ZWVrWWVhciI6aWYoUC5pRGlnaXRzPT0xKXtjPWcoNCl9ZWxzZSBpZihQLmlEaWdpdHM9PTIpe2M9ZygyKX1lbHNle2M9ZyhQLmlEaWdpdHMpfUkrPWMubGVuZ3RoO24oUC5zVHlwZSxjPT09IiIpO3k9cGFyc2VJbnQoYywxMCk7aWYoYy5sZW5ndGg8PTIpe3ZhciBDPW5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKSxvPU1hdGguZmxvb3IoQy8xMDApLFk9byoxMDAreS1DO2lmKFk8LTcwKXt5Kz0obysxKSoxMDB9ZWxzZSBpZihZPDMwKXt5Kz1vKjEwMH1lbHNle3krPShvLTEpKjEwMH19YnJlYWs7Y2FzZSJ3ZWVrSW5ZZWFyIjpicmVhaztjYXNlImhvdXIwXzIzIjpjPWcoTWF0aC5tYXgoUC5pRGlnaXRzLDIpKTtuKFAuc1R5cGUsYz09PSIiKTtJKz1jLmxlbmd0aDtoPXBhcnNlSW50KGMsMTApO2JyZWFrO2Nhc2UiaG91cjFfMjQiOmM9ZyhNYXRoLm1heChQLmlEaWdpdHMsMikpO24oUC5zVHlwZSxjPT09IiIpO0krPWMubGVuZ3RoO2g9cGFyc2VJbnQoYywxMCk7aWYoaD09MjQpe2g9MH1icmVhaztjYXNlImhvdXIwXzExIjpjPWcoTWF0aC5tYXgoUC5pRGlnaXRzLDIpKTtuKFAuc1R5cGUsYz09PSIiKTtJKz1jLmxlbmd0aDtoPXBhcnNlSW50KGMsMTApO2JyZWFrO2Nhc2UiaG91cjFfMTIiOmM9ZyhNYXRoLm1heChQLmlEaWdpdHMsMikpO24oUC5zVHlwZSxjPT09IiIpO0krPWMubGVuZ3RoO2g9cGFyc2VJbnQoYywxMCk7aWYoaD09MTIpe2g9MDtwPXRydWV9YnJlYWs7Y2FzZSJtaW51dGUiOmM9ZyhNYXRoLm1heChQLmlEaWdpdHMsMikpO24oUC5zVHlwZSxjPT09IiIpO0krPWMubGVuZ3RoO009cGFyc2VJbnQoYywxMCk7YnJlYWs7Y2FzZSJzZWNvbmQiOmM9ZyhNYXRoLm1heChQLmlEaWdpdHMsMikpO24oUC5zVHlwZSxjPT09IiIpO0krPWMubGVuZ3RoO3M9cGFyc2VJbnQoYywxMCk7YnJlYWs7Y2FzZSJtaWxsaXNlY29uZCI6Yz1nKE1hdGgubWF4KFAuaURpZ2l0cywzKSk7SSs9Yy5sZW5ndGg7Yz1xLnNhcC5wYWRSaWdodChjLCIwIiwzKTtiPXBhcnNlSW50KGMsMTApO2JyZWFrO2Nhc2UiYW1QbU1hcmtlciI6dmFyIEE9dGhpcy5hRGF5UGVyaW9kc1swXSx3PXRoaXMuYURheVBlcmlvZHNbMV07aWYodi5pbmRleE9mKEEsSSk9PUkpe3A9ZmFsc2U7SSs9Mn1lbHNlIGlmKHYuaW5kZXhPZih3LEkpPT1JKXtwPXRydWU7SSs9Mn1icmVhaztjYXNlInRpbWV6b25lR2VuZXJhbCI6dmFyIFQ9di5zdWJzdHJpbmcoSSxJKzMpO2lmKFQ9PT0iR01UInx8VD09PSJVVEMiKXtJPUkrM31lbHNlIGlmKHYuc3Vic3RyaW5nKEksSSsyKT09PSJVVCIpe0k9SSsyfWVsc2UgaWYodi5jaGFyQXQoSSk9PSJaIil7ST1JKzE7dD0wO2JyZWFrfWVsc2V7cS5zYXAubG9nLmVycm9yKHYrIiBjYW5ub3QgYmUgcGFyc2VkIGNvcnJlY2x5IGJ5IHNhcC51aS5jb3JlLmZvcm1hdC5EYXRlRm9ybWF0OiBUaGUgZ2l2ZW4gdGltZXpvbmUgaXMgbm90IHN1cHBvcnRlZCEiKTticmVha31jYXNlInRpbWV6b25lSVNPODYwMSI6aWYodi5jaGFyQXQoSSk9PSJaIil7ST1JKzE7dD0wO2JyZWFrfWwodHJ1ZSk7YnJlYWs7Y2FzZSJ0aW1lem9uZVJGQzgyMiI6bChmYWxzZSk7YnJlYWt9aWYoIVYpe2JyZWFrfX1pZihJPHYubGVuZ3RoKXtWPWZhbHNlfWlmKHApe2grPTEyfWlmKFYpe2lmKHQhPW51bGwpe2Q9bmV3IERhdGUoMCk7ZC5zZXRVVENGdWxsWWVhcih5fHwxOTcwKTtkLnNldFVUQ01vbnRoKG18fDApO2Quc2V0VVRDRGF0ZShhfHwxKTtkLnNldFVUQ0hvdXJzKGh8fDApO2Quc2V0VVRDTWludXRlcygoTXx8MCkrdCk7ZC5zZXRVVENTZWNvbmRzKHN8fDApO2Quc2V0VVRDTWlsbGlzZWNvbmRzKGJ8fDApfWVsc2UgaWYodSl7ZD1uZXcgRGF0ZSgwKTtkLnNldFVUQ0Z1bGxZZWFyKHl8fDE5NzApO2Quc2V0VVRDTW9udGgobXx8MCk7ZC5zZXRVVENEYXRlKGF8fDEpO2Quc2V0VVRDSG91cnMoaHx8MCk7ZC5zZXRVVENNaW51dGVzKE18fDApO2Quc2V0VVRDU2Vjb25kcyhzfHwwKTtkLnNldFVUQ01pbGxpc2Vjb25kcyhifHwwKX1lbHNle2Q9bmV3IERhdGUoMTk3MCwwLDEsMCwwLDApO2Quc2V0RnVsbFllYXIoeXx8MTk3MCk7ZC5zZXRNb250aChtfHwwKTtkLnNldERhdGUoYXx8MSk7ZC5zZXRIb3VycyhofHwwKTtkLnNldE1pbnV0ZXMoTXx8MCk7ZC5zZXRTZWNvbmRzKHN8fDApO2Quc2V0TWlsbGlzZWNvbmRzKGJ8fDApfXJldHVybiBkfWlmKCF0aGlzLmJJc0ZhbGxiYWNrKXtxLmVhY2godGhpcy5hRmFsbGJhY2tGb3JtYXRzLGZ1bmN0aW9uKGksRil7ZD1GLnBhcnNlKHYsdSk7aWYoZCl7cmV0dXJuIGZhbHNlfX0pO3JldHVybiBkfXJldHVybiBudWxsfTtELnByb3RvdHlwZS5wYXJzZUphdmFEYXRlRm9ybWF0PWZ1bmN0aW9uKGYpe3ZhciBGPVtdLGksUT1mYWxzZSxjPW51bGwscz0iIixuPSIiO2ZvcihpPTA7aTxmLmxlbmd0aDtpKyspe3ZhciBDPWYuY2hhckF0KGkpLE4scCxQO2lmKFEpe2lmKEM9PSInIil7cD1mLmNoYXJBdChpLTEpO1A9Zi5jaGFyQXQoaS0yKTtOPWYuY2hhckF0KGkrMSk7aWYocD09IiciJiZQIT0iJyIpe1E9ZmFsc2V9ZWxzZSBpZihOPT0iJyIpe2krPTF9ZWxzZXtRPWZhbHNlO2NvbnRpbnVlfX1pZihzPT0idGV4dCIpe2Muc1ZhbHVlKz1DfWVsc2V7Yz17c1R5cGU6InRleHQiLHNWYWx1ZTpDfTtGLnB1c2goYyk7cz0idGV4dCJ9fWVsc2V7aWYoQz09IiciKXtRPXRydWV9ZWxzZSBpZih0aGlzLm9TdGF0ZXNbQ10pe249dGhpcy5vU3RhdGVzW0NdO2lmKHM9PW4pe2MuaURpZ2l0cysrfWVsc2V7Yz17c1R5cGU6bixpRGlnaXRzOjF9O0YucHVzaChjKTtzPW59fWVsc2V7aWYocz09InRleHQiKXtjLnNWYWx1ZSs9Q31lbHNle2M9e3NUeXBlOiJ0ZXh0IixzVmFsdWU6Q307Ri5wdXNoKGMpO3M9InRleHQifX19fXJldHVybiBGfTtyZXR1cm4gRH0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLmZvcm1hdC5OdW1iZXJGb3JtYXQnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS5mb3JtYXQuTnVtYmVyRm9ybWF0Jyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvZm9ybWF0L051bWJlckZvcm1hdCIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ3NhcC91aS9jb3JlL0xvY2FsZURhdGEnXSxmdW5jdGlvbihxLEwpeyJ1c2Ugc3RyaWN0Ijt2YXIgTj1zYXAudWkuYmFzZS5PYmplY3QuZXh0ZW5kKCJzYXAudWkuY29yZS5mb3JtYXQuTnVtYmVyRm9ybWF0Iix7Y29uc3RydWN0b3I6ZnVuY3Rpb24oZil7dGhyb3cgbmV3IEVycm9yKCl9fSk7Ti5JTlRFR0VSPTA7Ti5GTE9BVD0xO04uQ1VSUkVOQ1k9MjtOLlBFUkNFTlQ9MztOLm9EZWZhdWx0SW50ZWdlckZvcm1hdD17bWluSW50ZWdlckRpZ2l0czoxLG1heEludGVnZXJEaWdpdHM6OTksbWluRnJhY3Rpb25EaWdpdHM6MCxtYXhGcmFjdGlvbkRpZ2l0czowLGdyb3VwaW5nRW5hYmxlZDpmYWxzZSxncm91cGluZ1NlcGFyYXRvcjoiLCIsZGVjaW1hbFNlcGFyYXRvcjoiLiIscGx1c1NpZ246IisiLG1pbnVzU2lnbjoiLSIsaXNJbnRlZ2VyOnRydWUsdHlwZTpOLklOVEVHRVIsc2hvd01lYXN1cmU6ZmFsc2V9O04ub0RlZmF1bHRGbG9hdEZvcm1hdD17bWluSW50ZWdlckRpZ2l0czoxLG1heEludGVnZXJEaWdpdHM6OTksbWluRnJhY3Rpb25EaWdpdHM6MCxtYXhGcmFjdGlvbkRpZ2l0czo5OSxncm91cGluZ0VuYWJsZWQ6dHJ1ZSxncm91cGluZ1NlcGFyYXRvcjoiLCIsZGVjaW1hbFNlcGFyYXRvcjoiLiIscGx1c1NpZ246IisiLG1pbnVzU2lnbjoiLSIsaXNJbnRlZ2VyOmZhbHNlLHR5cGU6Ti5GTE9BVCxzaG93TWVhc3VyZTpmYWxzZX07Ti5vRGVmYXVsdEN1cnJlbmN5Rm9ybWF0PXttaW5JbnRlZ2VyRGlnaXRzOjEsbWF4SW50ZWdlckRpZ2l0czo5OSxtaW5GcmFjdGlvbkRpZ2l0czoyLG1heEZyYWN0aW9uRGlnaXRzOjIsZ3JvdXBpbmdFbmFibGVkOnRydWUsZ3JvdXBpbmdTZXBhcmF0b3I6IiwiLGRlY2ltYWxTZXBhcmF0b3I6Ii4iLHBsdXNTaWduOiIrIixtaW51c1NpZ246Ii0iLGlzSW50ZWdlcjpmYWxzZSx0eXBlOk4uQ1VSUkVOQ1ksc2hvd01lYXN1cmU6dHJ1ZX07Ti5nZXRJbnN0YW5jZT1mdW5jdGlvbihmLGwpe3JldHVybiB0aGlzLmdldEZsb2F0SW5zdGFuY2UoZixsKX07Ti5nZXRGbG9hdEluc3RhbmNlPWZ1bmN0aW9uKGYsbCl7dmFyIEY9dGhpcy5jcmVhdGVJbnN0YW5jZShmLGwpLG89dGhpcy5nZXRMb2NhbGVGb3JtYXRPcHRpb25zKEYub0xvY2FsZURhdGEsTi5GTE9BVCk7Ri5vRm9ybWF0T3B0aW9ucz1xLmV4dGVuZChmYWxzZSx7fSx0aGlzLm9EZWZhdWx0RmxvYXRGb3JtYXQsbyxmKTtpZihmJiZmLnBhdHRlcm4pe0Yub0Zvcm1hdE9wdGlvbnM9cS5leHRlbmQoZmFsc2UsRi5vRm9ybWF0T3B0aW9ucyx0aGlzLnBhcnNlTnVtYmVyUGF0dGVybihmLnBhdHRlcm4pKX1yZXR1cm4gRn07Ti5nZXRJbnRlZ2VySW5zdGFuY2U9ZnVuY3Rpb24oZixsKXt2YXIgRj10aGlzLmNyZWF0ZUluc3RhbmNlKGYsbCksbz10aGlzLmdldExvY2FsZUZvcm1hdE9wdGlvbnMoRi5vTG9jYWxlRGF0YSxOLklOVEVHRVIpO0Yub0Zvcm1hdE9wdGlvbnM9cS5leHRlbmQoZmFsc2Use30sdGhpcy5vRGVmYXVsdEludGVnZXJGb3JtYXQsbyxmKTtpZihmJiZmLnBhdHRlcm4pe0Yub0Zvcm1hdE9wdGlvbnM9cS5leHRlbmQoZmFsc2UsRi5vRm9ybWF0T3B0aW9ucyx0aGlzLnBhcnNlTnVtYmVyUGF0dGVybihmLnBhdHRlcm4pKX1yZXR1cm4gRn07Ti5nZXRDdXJyZW5jeUluc3RhbmNlPWZ1bmN0aW9uKGYsbCl7dmFyIEY9dGhpcy5jcmVhdGVJbnN0YW5jZShmLGwpLG89dGhpcy5nZXRMb2NhbGVGb3JtYXRPcHRpb25zKEYub0xvY2FsZURhdGEsTi5DVVJSRU5DWSk7Ri5vRm9ybWF0T3B0aW9ucz1xLmV4dGVuZChmYWxzZSx7fSx0aGlzLm9EZWZhdWx0Q3VycmVuY3lGb3JtYXQsbyxmKTtpZihmJiZmLnBhdHRlcm4pe0Yub0Zvcm1hdE9wdGlvbnM9cS5leHRlbmQoZmFsc2UsRi5vRm9ybWF0T3B0aW9ucyx0aGlzLnBhcnNlTnVtYmVyUGF0dGVybihmLnBhdHRlcm4pKX1yZXR1cm4gRn07Ti5jcmVhdGVJbnN0YW5jZT1mdW5jdGlvbihmLGwpe3ZhciBGPXEuc2FwLm5ld09iamVjdCh0aGlzLnByb3RvdHlwZSk7aWYoZiBpbnN0YW5jZW9mIHNhcC51aS5jb3JlLkxvY2FsZSl7bD1mO2Y9dW5kZWZpbmVkfWlmKCFsKXtsPXNhcC51aS5nZXRDb3JlKCkuZ2V0Q29uZmlndXJhdGlvbigpLmdldEZvcm1hdFNldHRpbmdzKCkuZ2V0Rm9ybWF0TG9jYWxlKCl9Ri5vTG9jYWxlPWw7Ri5vTG9jYWxlRGF0YT1MLmdldEluc3RhbmNlKGwpO3JldHVybiBGfTtOLmdldExvY2FsZUZvcm1hdE9wdGlvbnM9ZnVuY3Rpb24obCx0KXt2YXIgbz17fSxuO2lmKHQ9PU4uQ1VSUkVOQ1kpe249bC5nZXRDdXJyZW5jeVBhdHRlcm4oKTtvPXRoaXMucGFyc2VOdW1iZXJQYXR0ZXJuKG4pfW8ucGx1c1NpZ249bC5nZXROdW1iZXJTeW1ib2woInBsdXNTaWduIik7by5taW51c1NpZ249bC5nZXROdW1iZXJTeW1ib2woIm1pbnVzU2lnbiIpO28uZGVjaW1hbFNlcGFyYXRvcj1sLmdldE51bWJlclN5bWJvbCgiZGVjaW1hbCIpO28uZ3JvdXBpbmdTZXBhcmF0b3I9bC5nZXROdW1iZXJTeW1ib2woImdyb3VwIik7by5wYXR0ZXJuPW47cmV0dXJuIG99O04ucGFyc2VOdW1iZXJQYXR0ZXJuPWZ1bmN0aW9uKGYpe3ZhciBtPTA7dmFyIE09MDt2YXIgYT0wO3ZhciBnPWZhbHNlO3ZhciBzPTA7Zm9yKHZhciBpPTA7aTxmLmxlbmd0aDtpKyspe3ZhciBjPWZbaV07aWYoYz09PSIsIil7Zz10cnVlO2NvbnRpbnVlfWVsc2UgaWYoYz09PSIuIil7cz0xO2NvbnRpbnVlfWVsc2UgaWYocz09MCYmYz09PSIwIil7bSsrfWVsc2UgaWYocz09MSl7aWYoYz09PSIwIil7TSsrO2ErK31lbHNlIGlmKGM9PT0iIyIpe2ErK319fXJldHVybnttaW5JbnRlZ2VyRGlnaXRzOm0sbWluRnJhY3Rpb25EaWdpdHM6TSxtYXhGcmFjdGlvbkRpZ2l0czphLGdyb3VwaW5nRW5hYmxlZDpnfX07Ti5wcm90b3R5cGUuZm9ybWF0PWZ1bmN0aW9uKHYsbSl7dmFyIG49dGhpcy5jb252ZXJ0VG9EZWNpbWFsKHYpLGk9IiIsZj0iIixnPSIiLHI9IiIscD0wLGw9MCxiPXY8MCxkPS0xLG89dGhpcy5vRm9ybWF0T3B0aW9ucztpZihuPT0iTmFOIil7cmV0dXJuIG59aWYoby50eXBlPT1OLkNVUlJFTkNZKXt2YXIgRD10aGlzLm9Mb2NhbGVEYXRhLmdldEN1cnJlbmN5RGlnaXRzKG0pO28ubWF4RnJhY3Rpb25EaWdpdHM9RDtvLm1pbkZyYWN0aW9uRGlnaXRzPUR9aWYoYil7bj1uLnN1YnN0cigxKX1kPW4uaW5kZXhPZigiLiIpO2lmKGQ+LTEpe2k9bi5zdWJzdHIoMCxkKTtmPW4uc3Vic3RyKGQrMSl9ZWxzZXtpPW59aWYoaS5sZW5ndGg8by5taW5JbnRlZ2VyRGlnaXRzKXtpPXEuc2FwLnBhZExlZnQoaSwiMCIsby5taW5JbnRlZ2VyRGlnaXRzKX1lbHNlIGlmKGkubGVuZ3RoPm8ubWF4SW50ZWdlckRpZ2l0cyl7aT1xLnNhcC5wYWRMZWZ0KCIiLCI/IixvLm1heEludGVnZXJEaWdpdHMpfWlmKGYubGVuZ3RoPG8ubWluRnJhY3Rpb25EaWdpdHMpe2Y9cS5zYXAucGFkUmlnaHQoZiwiMCIsby5taW5GcmFjdGlvbkRpZ2l0cyl9ZWxzZSBpZihmLmxlbmd0aD5vLm1heEZyYWN0aW9uRGlnaXRzKXtmPWYuc3Vic3RyKDAsby5tYXhGcmFjdGlvbkRpZ2l0cyl9bD1pLmxlbmd0aDtpZihvLmdyb3VwaW5nRW5hYmxlZCYmbD4zKXtwPWwlM3x8MztnPWkuc3Vic3RyKDAscCk7d2hpbGUocDxpLmxlbmd0aCl7Zys9by5ncm91cGluZ1NlcGFyYXRvcjtnKz1pLnN1YnN0cihwLDMpO3ArPTN9aT1nfWlmKGIpe3I9by5taW51c1NpZ259cis9aTtpZihmKXtyKz1vLmRlY2ltYWxTZXBhcmF0b3IrZn1pZihtJiZvLnNob3dNZWFzdXJlKXtpZihvLnR5cGU9PU4uQ1VSUkVOQ1kpe3ZhciBjPSdcdTAwYTQnO3ZhciBQPW8ucGF0dGVybjtQPVAucmVwbGFjZSgvXHUwMGE0Lyx0aGlzLm9Mb2NhbGVEYXRhLmdldEN1cnJlbmN5U3ltYm9sKG0pKTtQPVAucmVwbGFjZSgvWzAjLixdKy8scik7cj1QfX1pZihzYXAudWkuZ2V0Q29yZSgpLmdldENvbmZpZ3VyYXRpb24oKS5nZXRPcmlnaW5JbmZvKCkpe3I9bmV3IFN0cmluZyhyKTtyLm9yaWdpbkluZm89e3NvdXJjZToiQ29tbW9uIExvY2FsZSBEYXRhIFJlcG9zaXRvcnkiLGxvY2FsZTp0aGlzLm9Mb2NhbGUudG9TdHJpbmcoKX19cmV0dXJuIHJ9O04ucHJvdG90eXBlLnBhcnNlPWZ1bmN0aW9uKHYpe3ZhciBvPXRoaXMub0Zvcm1hdE9wdGlvbnMscj0iXlxccyooWystXT8oPzpbMC05XFwiK28uZ3JvdXBpbmdTZXBhcmF0b3IrIl0rfFswLTlcXCIrby5ncm91cGluZ1NlcGFyYXRvcisiXSpcXCIrby5kZWNpbWFsU2VwYXJhdG9yKyJbMC05XSspKFtlRV1bKy1dWzAtOV0rKT8pXFxzKiQiLFI9Il5cXHMqKFsrLV0/WzAtOVxcIitvLmdyb3VwaW5nU2VwYXJhdG9yKyJdKylcXHMqJCIsZz1uZXcgUmVnRXhwKCJcXCIrby5ncm91cGluZ1NlcGFyYXRvciwiZyIpLGQ9bmV3IFJlZ0V4cCgiXFwiK28uZGVjaW1hbFNlcGFyYXRvciwiZyIpLGEsYj0wO3Y9di5yZXBsYWNlKC9ccy9nLCIiKTtpZihvLmlzSW50ZWdlcil7YT1uZXcgUmVnRXhwKFIpfWVsc2V7YT1uZXcgUmVnRXhwKHIpfWlmKCFhLnRlc3Qodikpe3JldHVybiBOYU59dj12LnJlcGxhY2UoZywiIik7aWYoby5pc0ludGVnZXIpe2I9cGFyc2VJbnQodiwxMCl9ZWxzZXt2PXYucmVwbGFjZShkLCIuIik7Yj1wYXJzZUZsb2F0KHYpfXJldHVybiBifTtOLnByb3RvdHlwZS5jb252ZXJ0VG9EZWNpbWFsPWZ1bmN0aW9uKHYpe3ZhciBWPSIiK3YsbixiLGQsZixlLHA7aWYoVi5pbmRleE9mKCJlIik9PS0xJiZWLmluZGV4T2YoIkUiKT09LTEpe3JldHVybiBWfXZhciByPVYubWF0Y2goL14oWystXT8pKChcZCspKD86XC4oXGQrKSk/KVtlRV0oWystXT9cZCspJC8pO249clsxXT09Ii0iO2I9clsyXS5yZXBsYWNlKC9cLi9nLCIiKTtkPXJbM10/clszXS5sZW5ndGg6MDtmPXJbNF0/cls0XS5sZW5ndGg6MDtlPXBhcnNlSW50KHJbNV0sMTApO2lmKGU+MCl7aWYoZTxmKXtwPWQrZTtWPWIuc3Vic3RyKDAscCkrIi4iK2Iuc3Vic3RyKHApfWVsc2V7Vj1iO2UtPWY7Zm9yKHZhciBpPTA7aTxlO2krKyl7Vis9IjAifX19ZWxzZXtpZigtZTxkKXtwPWQrZTtWPWIuc3Vic3RyKDAscCkrIi4iK2Iuc3Vic3RyKHApfWVsc2V7Vj1iO2UrPWQ7Zm9yKHZhciBpPTA7aT5lO2ktLSl7Vj0iMCIrVn1WPSIwLiIrVn19aWYobil7Vj0iLSIrVn1yZXR1cm4gVn07cmV0dXJuIE59LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS5tdmMuQ29udHJvbGxlcicpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLm12Yy5Db250cm9sbGVyJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvbXZjL0NvbnRyb2xsZXIiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvYmFzZS9FdmVudFByb3ZpZGVyJ10sZnVuY3Rpb24ocSxFKXsidXNlIHN0cmljdCI7dmFyIHI9e307dmFyIEM9RS5leHRlbmQoInNhcC51aS5jb3JlLm12Yy5Db250cm9sbGVyIix7Y29uc3RydWN0b3I6ZnVuY3Rpb24obil7dmFyIHQ9bnVsbDtpZih0eXBlb2Yobik9PSJzdHJpbmciKXtpZighcltuXSl7cS5zYXAucmVxdWlyZSh7bW9kTmFtZTpuLHR5cGU6ImNvbnRyb2xsZXIifSk7aWYoIXJbbl0pe3Rocm93IG5ldyBFcnJvcigiQ29udHJvbGxlciB0eXBlICIrbisiIGlzIHN0aWxsIHVuZGVmaW5lZCBhZnRlciB0cnlpbmcgdG8gbG9hZCBpdC4iKX19dD1yW25dfUUuYXBwbHkodGhpcyxhcmd1bWVudHMpO2lmKHQpe3EuZXh0ZW5kKHRoaXMscltuXSl9fX0pO3ZhciBjPXsib25Jbml0Ijp0cnVlLCJvbkV4aXQiOmZhbHNlLCJvbkJlZm9yZVJlbmRlcmluZyI6ZmFsc2UsIm9uQWZ0ZXJSZW5kZXJpbmciOnRydWV9O2Z1bmN0aW9uIGUobyxuKXt2YXIgYTtpZihzYXAudWkuY29yZS5DdXN0b21pemluZ0NvbmZpZ3VyYXRpb24pe3ZhciBiPXNhcC51aS5jb3JlLkN1c3RvbWl6aW5nQ29uZmlndXJhdGlvbi5nZXRDb250cm9sbGVyRXh0ZW5zaW9uKG4pO2lmKGIpe3ZhciBzPWIuY29udHJvbGxlck5hbWU7cS5zYXAubG9nLmluZm8oIkN1c3RvbWl6aW5nOiBDb250cm9sbGVyICciK24rIicgaXMgbm93IGV4dGVuZGVkIGJ5ICciK3MrIiciKTtpZighcltzXSYmIXEuc2FwLmdldE9iamVjdChzKSl7cS5zYXAucmVxdWlyZSh7bW9kTmFtZTpzLHR5cGU6ImNvbnRyb2xsZXIifSl9aWYoIXJbc10mJiFxLnNhcC5nZXRPYmplY3Qocykpe3Euc2FwLmxvZy5lcnJvcigiQXR0ZW1wdCB0byBsb2FkIEV4dGVuc2lvbiBDb250cm9sbGVyICIrcysiIHdhcyBub3Qgc3VjY2Vzc2Z1bCAtIGlzIHRoZSBDb250cm9sbGVyIGNvcnJlY3RseSBkZWZpbmVkIGluIGl0cyBmaWxlPyIpfWlmKGE9cltzXSl7Zm9yKHZhciBtIGluIGEpe2lmKGNbbV0hPT11bmRlZmluZWQpe3ZhciBPPW9bbV07aWYoTyYmdHlwZW9mIE89PT0iZnVuY3Rpb24iKXsoZnVuY3Rpb24obSxPKXtvW21dPWZ1bmN0aW9uKCl7aWYoY1ttXSl7Ty5hcHBseShvLGFyZ3VtZW50cyk7YVttXS5hcHBseShvLGFyZ3VtZW50cyl9ZWxzZXthW21dLmFwcGx5KG8sYXJndW1lbnRzKTtPLmFwcGx5KG8sYXJndW1lbnRzKX19fSkobSxPKX1lbHNle29bbV09YVttXX19ZWxzZXtvW21dPWFbbV19fXJldHVybiBvfWVsc2V7fX1lbHNle3Euc2FwLmxvZy5kZWJ1ZygiQ3VzdG9taXppbmc6IG5vIENvbnRyb2xsZXIgZXh0ZW5zaW9uIGZvdW5kIGZvciBDb250cm9sbGVyICciK24rIicuIil9fXJldHVybiBvfXNhcC51aS5jb250cm9sbGVyPWZ1bmN0aW9uKG4sbyl7aWYoIW4pe3Rocm93IG5ldyBFcnJvcigiQ29udHJvbGxlciBuYW1lICgnc05hbWUnIHBhcmFtZXRlcikgaXMgcmVxdWlyZWQiKX1pZighbyl7aWYoIXJbbl0mJiFxLnNhcC5nZXRPYmplY3Qobikpe3Euc2FwLnJlcXVpcmUoe21vZE5hbWU6bix0eXBlOiJjb250cm9sbGVyIn0pfWlmKHJbbl0pe3ZhciBhPW5ldyBDKG4pO2E9ZShhLG4pO3JldHVybiBhfWVsc2V7dmFyIGI9cS5zYXAuZ2V0T2JqZWN0KG4pO2lmKHR5cGVvZiBiPT09ImZ1bmN0aW9uIiYmYi5wcm90b3R5cGUgaW5zdGFuY2VvZiBDKXt2YXIgYT1uZXcgYigpO2E9ZShhLG4pO3JldHVybiBhfX10aHJvdyBuZXcgRXJyb3IoIkNvbnRyb2xsZXIgIituKyIgY291bGRuJ3QgYmUgaW5zdGFudGlhdGVkIil9ZWxzZXtyW25dPW99fTtDLnByb3RvdHlwZS5nZXRWaWV3PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub1ZpZXd9O0MucHJvdG90eXBlLmJ5SWQ9ZnVuY3Rpb24oaSl7cmV0dXJuIHRoaXMub1ZpZXc/dGhpcy5vVmlldy5ieUlkKGkpOnVuZGVmaW5lZH07Qy5wcm90b3R5cGUuY3JlYXRlSWQ9ZnVuY3Rpb24oaSl7cmV0dXJuIHRoaXMub1ZpZXc/dGhpcy5vVmlldy5jcmVhdGVJZChpKTp1bmRlZmluZWR9O0MucHJvdG90eXBlLmdldE93bmVyQ29tcG9uZW50PWZ1bmN0aW9uKCl7cS5zYXAucmVxdWlyZSgic2FwLnVpLmNvcmUuQ29tcG9uZW50Iik7dmFyIHY9c2FwLnVpLmNvcmUuQ29tcG9uZW50LmdldE93bmVySWRGb3IodGhpcy5nZXRWaWV3KCkpO2lmKHY9PT11bmRlZmluZWQpe3JldHVybiB1bmRlZmluZWR9cmV0dXJuIHNhcC51aS5jb21wb25lbnQodil9O0MucHJvdG90eXBlLmNvbm5lY3RUb1ZpZXc9ZnVuY3Rpb24odil7dGhpcy5vVmlldz12O2lmKHRoaXMub25Jbml0KXt2LmF0dGFjaEFmdGVySW5pdCh0aGlzLm9uSW5pdCx0aGlzKX1pZih0aGlzLm9uRXhpdCl7di5hdHRhY2hCZWZvcmVFeGl0KHRoaXMub25FeGl0LHRoaXMpfWlmKHRoaXMub25BZnRlclJlbmRlcmluZyl7di5hdHRhY2hBZnRlclJlbmRlcmluZyh0aGlzLm9uQWZ0ZXJSZW5kZXJpbmcsdGhpcyl9aWYodGhpcy5vbkJlZm9yZVJlbmRlcmluZyl7di5hdHRhY2hCZWZvcmVSZW5kZXJpbmcodGhpcy5vbkJlZm9yZVJlbmRlcmluZyx0aGlzKX19O3JldHVybiBDfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUubXZjLkhUTUxWaWV3UmVuZGVyZXInKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS5tdmMuSFRNTFZpZXdSZW5kZXJlcicpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL212Yy9IVE1MVmlld1JlbmRlcmVyIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnLi9WaWV3UmVuZGVyZXInXSxmdW5jdGlvbihxLFYpeyJ1c2Ugc3RyaWN0Ijt2YXIgSD17fTtILnJlbmRlcj1mdW5jdGlvbihyLGMpe3ZhciBhPXI7YS53cml0ZSgiPGRpdiIpO2Eud3JpdGVDb250cm9sRGF0YShjKTthLmFkZENsYXNzKCJzYXBVaVZpZXciKTthLmFkZENsYXNzKCJzYXBVaUhUTUxWaWV3Iik7Vi5hZGREaXNwbGF5Q2xhc3MoYSxjKTtpZihjLmdldFdpZHRoKCkpe2EuYWRkU3R5bGUoIndpZHRoIixjLmdldFdpZHRoKCkpfWlmKGMuZ2V0SGVpZ2h0KCkpe2EuYWRkU3R5bGUoImhlaWdodCIsYy5nZXRIZWlnaHQoKSl9YS53cml0ZVN0eWxlcygpO2Eud3JpdGVDbGFzc2VzKCk7YS53cml0ZSgiPiIpO3ZhciBoPWMuX29UZW1wbGF0ZS5pbm5lckhUTUw7dmFyIGI9Yy5nZXRDb250ZW50KCk7dmFyIGQ9W107dmFyIGU9ZnVuY3Rpb24oYyl7dmFyIHQ9SC5fZ2V0SFRNTChhLGMsaCk7aWYodCl7aD10fWVsc2V7ZC5wdXNoKGMpfX07aWYoYil7aWYocS5pc0FycmF5KGIpKXtmb3IodmFyIGk9MDtpPGIubGVuZ3RoO2krKyl7ZShiW2ldKX19ZWxzZSBpZihiKXtlKGIpfX1hLndyaXRlKGgpO2Zvcih2YXIgaT0wO2k8ZC5sZW5ndGg7aSsrKXthLnJlbmRlckNvbnRyb2woZFtpXSl9YS53cml0ZSgiPC9kaXY+Iil9O0guX2dldEhUTUw9ZnVuY3Rpb24ocixjLGgpe3ZhciBpPWMuZ2V0SWQoKTtoPWgucmVwbGFjZSgvKDxkaXYpL2dpLCJcbiQxIik7dmFyIGE9bmV3IFJlZ0V4cCgnPGRpdi4qP2RhdGEtc2FwLXVpLWlkPSInK2krJyIuKj8+PC9kaXY+JywiZ2kiKTt2YXIgbT1hLmV4ZWMoaCk7aWYobSl7aD1oLnJlcGxhY2UobVswXSxyLmdldEhUTUwoYykpO3JldHVybiBofWVsc2V7cmV0dXJuIiJ9fTtyZXR1cm4gSH0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLm12Yy5KU09OVmlld1JlbmRlcmVyJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUubXZjLkpTT05WaWV3UmVuZGVyZXInKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9tdmMvSlNPTlZpZXdSZW5kZXJlciIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJy4vVmlld1JlbmRlcmVyJ10sZnVuY3Rpb24ocSxWKXsidXNlIHN0cmljdCI7dmFyIEo9e307Si5yZW5kZXI9ZnVuY3Rpb24ocixjKXt2YXIgYT1yO2Eud3JpdGUoIjxkaXYiKTthLndyaXRlQ29udHJvbERhdGEoYyk7YS5hZGRDbGFzcygic2FwVWlWaWV3Iik7YS5hZGRDbGFzcygic2FwVWlKU09OVmlldyIpO1YuYWRkRGlzcGxheUNsYXNzKGEsYyk7aWYoYy5nZXRXaWR0aCgpKXthLmFkZFN0eWxlKCJ3aWR0aCIsYy5nZXRXaWR0aCgpKX1pZihjLmdldEhlaWdodCgpKXthLmFkZFN0eWxlKCJoZWlnaHQiLGMuZ2V0SGVpZ2h0KCkpfWEud3JpdGVTdHlsZXMoKTthLndyaXRlQ2xhc3NlcygpO2Eud3JpdGUoIj4iKTt2YXIgYj1jLmdldENvbnRlbnQoKTtpZihiKXtpZihiLmxlbmd0aCYmIShiIGluc3RhbmNlb2Ygc2FwLnVpLmNvcmUuQ29udHJvbCkpe2Zvcih2YXIgaT0wO2k8Yi5sZW5ndGg7aSsrKXthLnJlbmRlckNvbnRyb2woYltpXSl9fWVsc2V7YS5yZW5kZXJDb250cm9sKGMuZ2V0Q29udGVudCgpKX19YS53cml0ZSgiPC9kaXY+Iil9O3JldHVybiBKfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUubXZjLkpTVmlld1JlbmRlcmVyJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUubXZjLkpTVmlld1JlbmRlcmVyJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvbXZjL0pTVmlld1JlbmRlcmVyIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnLi9WaWV3UmVuZGVyZXInXSxmdW5jdGlvbihxLFYpeyJ1c2Ugc3RyaWN0Ijt2YXIgSj17fTtKLnJlbmRlcj1mdW5jdGlvbihyLGMpe3ZhciBhPXI7YS53cml0ZSgiPGRpdiIpO2Eud3JpdGVDb250cm9sRGF0YShjKTthLmFkZENsYXNzKCJzYXBVaVZpZXciKTthLmFkZENsYXNzKCJzYXBVaUpTVmlldyIpO1YuYWRkRGlzcGxheUNsYXNzKGEsYyk7aWYoYy5nZXRXaWR0aCgpKXthLmFkZFN0eWxlKCJ3aWR0aCIsYy5nZXRXaWR0aCgpKX1pZihjLmdldEhlaWdodCgpKXthLmFkZFN0eWxlKCJoZWlnaHQiLGMuZ2V0SGVpZ2h0KCkpfWEud3JpdGVTdHlsZXMoKTthLndyaXRlQ2xhc3NlcygpO2Eud3JpdGUoIj4iKTt2YXIgYj1jLmdldENvbnRlbnQoKTtpZihiKXtpZihxLmlzQXJyYXkoYikpe2Zvcih2YXIgaT0wO2k8Yi5sZW5ndGg7aSsrKXthLnJlbmRlckNvbnRyb2woYltpXSl9fWVsc2UgaWYoYil7YS5yZW5kZXJDb250cm9sKGIpfX1hLndyaXRlKCI8L2Rpdj4iKX07cmV0dXJuIEp9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS5tdmMuVGVtcGxhdGVWaWV3UmVuZGVyZXInKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS5tdmMuVGVtcGxhdGVWaWV3UmVuZGVyZXInKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9tdmMvVGVtcGxhdGVWaWV3UmVuZGVyZXIiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCcuL1ZpZXdSZW5kZXJlciddLGZ1bmN0aW9uKHEsVil7InVzZSBzdHJpY3QiO3ZhciBUPXt9O1QucmVuZGVyPWZ1bmN0aW9uKHIsYyl7dmFyIGE9cjthLndyaXRlKCI8ZGl2Iik7YS53cml0ZUNvbnRyb2xEYXRhKGMpO2EuYWRkQ2xhc3MoInNhcFVpVmlldyIpO2EuYWRkQ2xhc3MoInNhcFVpVG1wbFZpZXciKTtWLmFkZERpc3BsYXlDbGFzcyhhLGMpO2EuYWRkU3R5bGUoIndpZHRoIixjLmdldFdpZHRoKCkpO2EuYWRkU3R5bGUoImhlaWdodCIsYy5nZXRIZWlnaHQoKSk7YS53cml0ZVN0eWxlcygpO2Eud3JpdGVDbGFzc2VzKCk7YS53cml0ZSgiPiIpO2EucmVuZGVyQ29udHJvbChjLl9vVGVtcGxhdGUpO2Eud3JpdGUoIjwvZGl2PiIpfTtyZXR1cm4gVH0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLnJvdXRpbmcuSGFzaENoYW5nZXInKSl7DQovLyBDb3B5cmlnaHQgKGMpIDIwMTMgU0FQIFNFLCBBbGwgUmlnaHRzIFJlc2VydmVkDQpqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLnJvdXRpbmcuSGFzaENoYW5nZXInKTtqUXVlcnkuc2FwLnJlcXVpcmUoJ3NhcC51aS50aGlyZHBhcnR5LnNpZ25hbHMnKTtqUXVlcnkuc2FwLnJlcXVpcmUoJ3NhcC51aS50aGlyZHBhcnR5Lmhhc2hlcicpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL3JvdXRpbmcvSGFzaENoYW5nZXIiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvYmFzZS9FdmVudFByb3ZpZGVyJywnc2FwL3VpL3RoaXJkcGFydHkvc2lnbmFscycsJ3NhcC91aS90aGlyZHBhcnR5L2hhc2hlciddLGZ1bmN0aW9uKHEsRSxzLGgpeyJ1c2Ugc3RyaWN0Ijt2YXIgSD1FLmV4dGVuZCgic2FwLnVpLmNvcmUucm91dGluZy5IYXNoQ2hhbmdlciIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKCl7RS5hcHBseSh0aGlzKX19KTtILnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKCl7aWYodGhpcy5faW5pdGlhbGl6ZWQpe3Euc2FwLmxvZy5pbmZvKCJ0aGlzIEhhc2hDaGFuZ2VyIGluc3RhbmNlIGhhcyBhbHJlYWR5IGJlZW4gaW5pdGlhbGl6ZWQuIik7cmV0dXJuIGZhbHNlfWhhc2hlci5jaGFuZ2VkLmFkZCh0aGlzLmZpcmVIYXNoQ2hhbmdlZCx0aGlzKTtpZighaGFzaGVyLmlzQWN0aXZlKCkpe2hhc2hlci5pbml0aWFsaXplZC5hZGRPbmNlKHRoaXMuZmlyZUhhc2hDaGFuZ2VkLHRoaXMpO2hhc2hlci5pbml0KCl9ZWxzZXt0aGlzLmZpcmVIYXNoQ2hhbmdlZChoYXNoZXIuZ2V0SGFzaCgpKX10aGlzLl9pbml0aWFsaXplZD10cnVlO3JldHVybiB0aGlzLl9pbml0aWFsaXplZH07SC5wcm90b3R5cGUuZmlyZUhhc2hDaGFuZ2VkPWZ1bmN0aW9uKG4sbyl7dGhpcy5maXJlRXZlbnQoImhhc2hDaGFuZ2VkIix7bmV3SGFzaDpuLG9sZEhhc2g6b30pfTtILnByb3RvdHlwZS5zZXRIYXNoPWZ1bmN0aW9uKGEpe3RoaXMuZmlyZUV2ZW50KCJoYXNoU2V0Iix7c0hhc2g6YX0pO2hhc2hlci5zZXRIYXNoKGEpfTtILnByb3RvdHlwZS5yZXBsYWNlSGFzaD1mdW5jdGlvbihhKXt0aGlzLmZpcmVFdmVudCgiaGFzaFJlcGxhY2VkIix7c0hhc2g6YX0pO2hhc2hlci5yZXBsYWNlSGFzaChhKX07SC5wcm90b3R5cGUuZ2V0SGFzaD1mdW5jdGlvbigpe3JldHVybiBoYXNoZXIuZ2V0SGFzaCgpfTtILnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKCl7aGFzaGVyLmNoYW5nZWQucmVtb3ZlKHRoaXMuZmlyZUhhc2hDaGFuZ2VkLHRoaXMpO0UucHJvdG90eXBlLmRlc3Ryb3kuYXBwbHkodGhpcyxhcmd1bWVudHMpfTsoZnVuY3Rpb24oKXt2YXIgXz1udWxsO0guZ2V0SW5zdGFuY2U9ZnVuY3Rpb24oKXtpZighXyl7Xz1uZXcgSCgpfXJldHVybiBffTtILnJlcGxhY2VIYXNoQ2hhbmdlcj1mdW5jdGlvbihvKXtpZihfKXtxLmV4dGVuZChvLm1FdmVudFJlZ2lzdHJ5LF8ubUV2ZW50UmVnaXN0cnkpO18uZGVzdHJveSgpfV89b319KCkpO3JldHVybiBIfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUucm91dGluZy5IaXN0b3J5Jykpew0KLyohDQogKiBTQVAgVUkgZGV2ZWxvcG1lbnQgdG9vbGtpdCBmb3IgSFRNTDUgKFNBUFVJNS9PcGVuVUk1KQ0KICogKGMpIENvcHlyaWdodCAyMDA5LTIwMTQgU0FQIFNFIG9yIGFuIFNBUCBhZmZpbGlhdGUgY29tcGFueS4gDQogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wIC0gc2VlIExJQ0VOU0UudHh0Lg0KICovDQpqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLnJvdXRpbmcuSGlzdG9yeScpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL3JvdXRpbmcvSGlzdG9yeSIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJy4vSGFzaENoYW5nZXInXSxmdW5jdGlvbihxLEgpeyJ1c2Ugc3RyaWN0Ijt2YXIgYT1mdW5jdGlvbihoKXt0aGlzLl9pSGlzdG9yeUxlbmd0aD13aW5kb3cuaGlzdG9yeS5sZW5ndGg7dGhpcy5hSGlzdG9yeT1bXTt0aGlzLl9iSXNJbml0aWFsPXRydWU7aWYoIWgpe3Euc2FwLmxvZy5lcnJvcigic2FwLnVpLmNvcmUucm91dGluZy5IaXN0b3J5IGNvbnN0cnVjdG9yIHdhcyBjYWxsZWQgYW5kIGl0IGRpZCBub3QgZ2V0IGEgaGFzaENoYW5nZXIgYXMgcGFyYW1ldGVyIil9dGhpcy5fb0hhc2hDaGFuZ2VyPWg7dGhpcy5fb0hhc2hDaGFuZ2VyLmF0dGFjaEV2ZW50KCJoYXNoQ2hhbmdlZCIsdGhpcy5fb25IYXNoQ2hhbmdlLHRoaXMpO3RoaXMuX29IYXNoQ2hhbmdlci5hdHRhY2hFdmVudCgiaGFzaFJlcGxhY2VkIix0aGlzLl9oYXNoUmVwbGFjZWQsdGhpcyk7dGhpcy5fb0hhc2hDaGFuZ2VyLmF0dGFjaEV2ZW50KCJoYXNoU2V0Iix0aGlzLl9oYXNoU2V0LHRoaXMpO3RoaXMuX3Jlc2V0KCl9O2EucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24obil7dGhpcy5fb0hhc2hDaGFuZ2VyLmRldGFjaEV2ZW50KCJoYXNoQ2hhbmdlZCIsdGhpcy5fb25IYXNoQ2hhbmdlLHRoaXMpO3RoaXMuX29IYXNoQ2hhbmdlci5kZXRhY2hFdmVudCgiaGFzaFJlcGxhY2VkIix0aGlzLl9oYXNoUmVwbGFjZWQsdGhpcyk7dGhpcy5fb0hhc2hDaGFuZ2VyLmRldGFjaEV2ZW50KCJoYXNoU2V0Iix0aGlzLl9oYXNoU2V0LHRoaXMpO3RoaXMuX29IYXNoQ2hhbmdlcj1udWxsfTthLnByb3RvdHlwZS5nZXREaXJlY3Rpb249ZnVuY3Rpb24obil7aWYobiE9PXVuZGVmaW5lZCYmdGhpcy5fYklzSW5pdGlhbCl7cmV0dXJuIHVuZGVmaW5lZH1pZihuPT09dW5kZWZpbmVkKXtyZXR1cm4gdGhpcy5fc0N1cnJlbnREaXJlY3Rpb259cmV0dXJuIHRoaXMuX2dldERpcmVjdGlvbihuKX07YS5wcm90b3R5cGUuZ2V0UHJldmlvdXNIYXNoPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYUhpc3RvcnlbdGhpcy5pSGlzdG9yeVBvc2l0aW9uLTFdfTthLnByb3RvdHlwZS5fcmVzZXQ9ZnVuY3Rpb24oKXt0aGlzLmFIaXN0b3J5Lmxlbmd0aD0wO3RoaXMuaUhpc3RvcnlQb3NpdGlvbj0wO3RoaXMuX2JVbmtub3duPXRydWU7dGhpcy5hSGlzdG9yeVswXT10aGlzLl9vSGFzaENoYW5nZXIuZ2V0SGFzaCgpfTthLnByb3RvdHlwZS5fZ2V0RGlyZWN0aW9uPWZ1bmN0aW9uKG4saCl7dmFyIGQ9c2FwLnVpLmNvcmUucm91dGluZy5IaXN0b3J5RGlyZWN0aW9uO2lmKHRoaXMuX29OZXh0SGFzaCYmdGhpcy5fb05leHRIYXNoLnNIYXNoPT09bil7cmV0dXJuIGQuTmV3RW50cnl9aWYodGhpcy5fYlVua25vd24pe3JldHVybiBkLlVua25vd259aWYoaCl7cmV0dXJuIGQuTmV3RW50cnl9aWYodGhpcy5hSGlzdG9yeVt0aGlzLmlIaXN0b3J5UG9zaXRpb24rMV09PT1uJiZ0aGlzLmFIaXN0b3J5W3RoaXMuaUhpc3RvcnlQb3NpdGlvbi0xXT09PW4pe3JldHVybiBkLlVua25vd259aWYodGhpcy5hSGlzdG9yeVt0aGlzLmlIaXN0b3J5UG9zaXRpb24tMV09PT1uKXtyZXR1cm4gZC5CYWNrd2FyZHN9aWYodGhpcy5hSGlzdG9yeVt0aGlzLmlIaXN0b3J5UG9zaXRpb24rMV09PT1uKXtyZXR1cm4gZC5Gb3J3YXJkc31yZXR1cm4gZC5Vbmtub3dufTthLnByb3RvdHlwZS5fb25IYXNoQ2hhbmdlPWZ1bmN0aW9uKGUpe3RoaXMuX2hhc2hDaGFuZ2UoZS5nZXRQYXJhbWV0ZXIoIm5ld0hhc2giKSl9O2EucHJvdG90eXBlLl9oYXNoQ2hhbmdlPWZ1bmN0aW9uKG4pe3ZhciBkPXNhcC51aS5jb3JlLnJvdXRpbmcuSGlzdG9yeURpcmVjdGlvbixiPXdpbmRvdy5oaXN0b3J5Lmxlbmd0aCxEO2lmKHRoaXMuX29OZXh0SGFzaCYmdGhpcy5fb05leHRIYXNoLmJXYXNSZXBsYWNlZCYmdGhpcy5fb05leHRIYXNoLnNIYXNoPT09bil7dGhpcy5hSGlzdG9yeVt0aGlzLmlIaXN0b3J5UG9zaXRpb25dPW47dGhpcy5fb05leHRIYXNoPW51bGw7cmV0dXJufXRoaXMuX2JJc0luaXRpYWw9ZmFsc2U7RD10aGlzLl9zQ3VycmVudERpcmVjdGlvbj10aGlzLl9nZXREaXJlY3Rpb24obix0aGlzLl9pSGlzdG9yeUxlbmd0aDx3aW5kb3cuaGlzdG9yeS5sZW5ndGgpO2lmKHRoaXMuX29OZXh0SGFzaCYmIXRoaXMuX29OZXh0SGFzaC5iV2FzUmVwbGFjZWQpe3RoaXMuX2lIaXN0b3J5TGVuZ3RoPWIrMX1lbHNle3RoaXMuX2lIaXN0b3J5TGVuZ3RoPWJ9aWYodGhpcy5fb05leHRIYXNoKXt0aGlzLl9vTmV4dEhhc2g9bnVsbH1pZihEPT09ZC5Vbmtub3duKXt0aGlzLl9yZXNldCgpO3JldHVybn10aGlzLl9iVW5rbm93bj1mYWxzZTtpZihEPT09ZC5OZXdFbnRyeSl7aWYodGhpcy5pSGlzdG9yeVBvc2l0aW9uKzE8dGhpcy5hSGlzdG9yeS5sZW5ndGgpe3RoaXMuYUhpc3Rvcnk9dGhpcy5hSGlzdG9yeS5zbGljZSgwLHRoaXMuaUhpc3RvcnlQb3NpdGlvbisxKX10aGlzLmFIaXN0b3J5LnB1c2gobik7dGhpcy5pSGlzdG9yeVBvc2l0aW9uKz0xO3JldHVybn1pZihEPT09ZC5Gb3J3YXJkcyl7dGhpcy5pSGlzdG9yeVBvc2l0aW9uKys7cmV0dXJufWlmKEQ9PT1kLkJhY2t3YXJkcyl7dGhpcy5pSGlzdG9yeVBvc2l0aW9uLS19fTthLnByb3RvdHlwZS5faGFzaFNldD1mdW5jdGlvbihlKXt0aGlzLl9oYXNoQ2hhbmdlZEJ5QXBwKGUuZ2V0UGFyYW1ldGVyKCJzSGFzaCIpLGZhbHNlKX07YS5wcm90b3R5cGUuX2hhc2hSZXBsYWNlZD1mdW5jdGlvbihlKXt0aGlzLl9oYXNoQ2hhbmdlZEJ5QXBwKGUuZ2V0UGFyYW1ldGVyKCJzSGFzaCIpLHRydWUpfTthLnByb3RvdHlwZS5faGFzaENoYW5nZWRCeUFwcD1mdW5jdGlvbihuLHcpe3RoaXMuX29OZXh0SGFzaD17c0hhc2g6bixiV2FzUmVwbGFjZWQ6d319OyhmdW5jdGlvbigpe3ZhciBpPW5ldyBhKEguZ2V0SW5zdGFuY2UoKSk7YS5nZXRJbnN0YW5jZT1mdW5jdGlvbigpe3JldHVybiBpfX0oKSk7cmV0dXJuIGF9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS5yb3V0aW5nLlJvdXRlJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUucm91dGluZy5Sb3V0ZScpO2pRdWVyeS5zYXAucmVxdWlyZSgnc2FwLnVpLnRoaXJkcGFydHkuY3Jvc3Nyb2FkcycpO2pRdWVyeS5zYXAucmVxdWlyZSgnc2FwLnVpLnRoaXJkcGFydHkuc2lnbmFscycpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL3JvdXRpbmcvUm91dGUiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvYmFzZS9FdmVudFByb3ZpZGVyJywnc2FwL3VpL3RoaXJkcGFydHkvY3Jvc3Nyb2FkcycsJ3NhcC91aS90aGlyZHBhcnR5L3NpZ25hbHMnXSxmdW5jdGlvbihxLEUsYyxzKXsidXNlIHN0cmljdCI7dmFyIFI9RS5leHRlbmQoInNhcC51aS5jb3JlLnJvdXRpbmcuUm91dGUiLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbihyLEMscCl7aWYoIUMubmFtZSl7cS5zYXAubG9nLmVycm9yKCJBIG5hbWUgaGFzIHRvIGJlIHNwZWNpZmllZCBmb3IgZXZlcnkgcm91dGUiKX12YXIgdD10aGlzLHY9Qy5wYXR0ZXJuO2lmKCFxLmlzQXJyYXkodikpe3Y9W3ZdfWlmKHEuaXNBcnJheShDLnN1YnJvdXRlcykpe3ZhciBTPUMuc3Vicm91dGVzO0Muc3Vicm91dGVzPXt9O3EuZWFjaChTLGZ1bmN0aW9uKGksbyl7Qy5zdWJyb3V0ZXNbby5uYW1lXT1vfSl9dGhpcy5fYVBhdHRlcm49W107dGhpcy5fYVJvdXRlcz1bXTt0aGlzLl9vUGFyZW50PXA7dGhpcy5fb0NvbmZpZz1DO2lmKEMuc3Vicm91dGVzKXtxLmVhY2goQy5zdWJyb3V0ZXMsZnVuY3Rpb24oYSxvKXtpZihvLm5hbWU9PXVuZGVmaW5lZCl7by5uYW1lPWF9ci5hZGRSb3V0ZShvLHQpfSl9aWYoQy5wYXR0ZXJuPT09dW5kZWZpbmVkKXtyZXR1cm59cS5lYWNoKHYsZnVuY3Rpb24oaSxhKXt0Ll9hUGF0dGVybltpXT1hO3QuX2FSb3V0ZXNbaV09ci5fb1JvdXRlci5hZGRSb3V0ZShhKTt0Ll9hUm91dGVzW2ldLm1hdGNoZWQuYWRkKGZ1bmN0aW9uKCl7dmFyIEE9e307cS5lYWNoKGFyZ3VtZW50cyxmdW5jdGlvbihiLGQpe0FbdC5fYVJvdXRlc1tpXS5fcGFyYW1zSWRzW2JdXT1kfSk7dC5fcm91dGVNYXRjaGVkKHIsQSx0cnVlKX0pfSl9LG1ldGFkYXRhOntwdWJsaWNNZXRob2RzOlsiZ2V0VVJMIiwiZ2V0UGF0dGVybiJdfX0pO1IucHJvdG90eXBlLmdldFVSTD1mdW5jdGlvbihwKXtyZXR1cm4gdGhpcy5fYVJvdXRlc1swXS5pbnRlcnBvbGF0ZShwKX07Ui5wcm90b3R5cGUuZ2V0UGF0dGVybj1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9hUGF0dGVyblswXX07Ui5wcm90b3R5cGUuX3JvdXRlTWF0Y2hlZD1mdW5jdGlvbihyLGEsaSl7dmFyIHYscCx0LFQ7aWYodGhpcy5fb1BhcmVudCl7cD10aGlzLl9vUGFyZW50Ll9yb3V0ZU1hdGNoZWQocixhKTt0PXAub1RhcmdldFBhcmVudDtUPXAub1RhcmdldENvbnRyb2x9dmFyIEM9cS5leHRlbmQoe30sci5fb0NvbmZpZyx0aGlzLl9vQ29uZmlnKTtpZigoVHx8Qy50YXJnZXRDb250cm9sKSYmQy50YXJnZXRBZ2dyZWdhdGlvbil7aWYoIXQpe2lmKEMudGFyZ2V0UGFyZW50KXtUPXNhcC51aS5nZXRDb3JlKCkuYnlJZChDLnRhcmdldFBhcmVudCkuYnlJZChDLnRhcmdldENvbnRyb2wpfX1lbHNle2lmKEMudGFyZ2V0Q29udHJvbCl7VD10LmJ5SWQoQy50YXJnZXRDb250cm9sKX19aWYoIVQpe1Q9c2FwLnVpLmdldENvcmUoKS5ieUlkKEMudGFyZ2V0Q29udHJvbCl9aWYoVCl7dmFyIEE9VC5nZXRNZXRhZGF0YSgpLmdldEpTT05LZXlzKClbQy50YXJnZXRBZ2dyZWdhdGlvbl07aWYoQSl7dmFyIFY9Qy52aWV3O2lmKEMudmlld1BhdGgpe1Y9Qy52aWV3UGF0aCsiLiIrVn12PXIuZ2V0VmlldyhWLEMudmlld1R5cGUsQy52aWV3SWQpO2lmKEMuY2xlYXJUYXJnZXQ9PT10cnVlKXtUW0EuX3NSZW1vdmVBbGxNdXRhdG9yXSgpfVRbQS5fc011dGF0b3JdKHYpfWVsc2V7cS5zYXAubG9nLmVycm9yKCJDb250cm9sICIrQy50YXJnZXRDb250cm9sKyIgZG9lcyBub3QgaGFzIGFuIGFnZ3JlZ2F0aW9uIGNhbGxlZCAiK0MudGFyZ2V0QWdncmVnYXRpb24pfX1lbHNle3Euc2FwLmxvZy5lcnJvcigiQ29udHJvbCB3aXRoIElEICIrQy50YXJnZXRDb250cm9sKyIgY291bGQgbm90IGJlIGZvdW5kIil9fWlmKEMuY2FsbGJhY2spe0MuY2FsbGJhY2sodGhpcyxhLEMsVCx2KX1yLmZpcmVSb3V0ZU1hdGNoZWQoe25hbWU6Qy5uYW1lLGFyZ3VtZW50czphLHRhcmdldENvbnRyb2w6VCx2aWV3OnYsY29uZmlnOkN9KTtpZihpKXtyLmZpcmVSb3V0ZVBhdHRlcm5NYXRjaGVkKHtuYW1lOkMubmFtZSxhcmd1bWVudHM6YSx0YXJnZXRDb250cm9sOlQsdmlldzp2LGNvbmZpZzpDfSl9cmV0dXJue29UYXJnZXRQYXJlbnQ6dixvVGFyZ2V0Q29udHJvbDpUfX07cmV0dXJuIFJ9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS51dGlsLnNlcmlhbGl6ZXIuU2VyaWFsaXplcicpKXsNCi8qDQogKiBTQVAgVUkgZGV2ZWxvcG1lbnQgdG9vbGtpdCBmb3IgSFRNTDUgKFNBUFVJNS9PcGVuVUk1KQ0KICogKGMpIENvcHlyaWdodCAyMDA5LTIwMTQgU0FQIFNFIG9yIGFuIFNBUCBhZmZpbGlhdGUgY29tcGFueS4gDQogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wIC0gc2VlIExJQ0VOU0UudHh0Lg0KICovDQpqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLnV0aWwuc2VyaWFsaXplci5TZXJpYWxpemVyJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvdXRpbC9zZXJpYWxpemVyL1NlcmlhbGl6ZXIiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvYmFzZS9FdmVudFByb3ZpZGVyJ10sZnVuY3Rpb24ocSxFKXsidXNlIHN0cmljdCI7dmFyIFM9RS5leHRlbmQoInNhcC51aS5jb3JlLnV0aWwuc2VyaWFsaXplci5TZXJpYWxpemVyIix7Y29uc3RydWN0b3I6ZnVuY3Rpb24ocixzLGIsdyxmKXtFLmFwcGx5KHRoaXMpO3RoaXMuX29Sb290Q29udHJvbD1yO3RoaXMuX2RlbGVnYXRlPXM7dGhpcy5fYlNraXBSb290PSEhYjt0aGlzLl9vV2luZG93PXd8fHdpbmRvdzt0aGlzLl9mblNraXBBZ2dyZWdhdGlvbnM9Zn19KTtTLnByb3RvdHlwZS5zZXJpYWxpemU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc2VyaWFsaXplUmVjdXJzaXZlKHRoaXMuX29Sb290Q29udHJvbCwwKX07Uy5wcm90b3R5cGUuX3NlcmlhbGl6ZVJlY3Vyc2l2ZT1mdW5jdGlvbihjLGwsYSxiKXt2YXIgQz1bXTt2YXIgdz0oIXRoaXMuX2JTa2lwUm9vdHx8bCE9PTApO2lmKHcpe2MuZ2V0TWV0YWRhdGEoKS5nZXRKU09OS2V5cygpO3ZhciBzPXRoaXMuX2RlbGVnYXRlLnN0YXJ0KGMsYSxiKTt2YXIgbT10aGlzLl9kZWxlZ2F0ZS5taWRkbGUoYyxhLGIpO0MucHVzaChzK20pfWlmKGw9PT0wfHwhKHRoaXMuX2ZuU2tpcEFnZ3JlZ2F0aW9ucyYmdGhpcy5fZm5Ta2lwQWdncmVnYXRpb25zKGMpKSl7dmFyIEE9Yy5nZXRNZXRhZGF0YSgpLmdldEFsbEFnZ3JlZ2F0aW9ucygpO2lmKEEpe2Zvcih2YXIgbiBpbiBBKXt2YXIgZT1bXTt2YXIgbz1BW25dO3ZhciB2PWNbby5fc0dldHRlcl0oKTtpZihjLmdldEJpbmRpbmdQYXRoKG4pJiZjLmdldEJpbmRpbmdJbmZvKG4pLnRlbXBsYXRlKXtlLnB1c2goYy5nZXRCaW5kaW5nSW5mbyhuKS50ZW1wbGF0ZSl9ZWxzZSBpZih2JiZ2Lmxlbmd0aCl7Zm9yKHZhciBpPTA7aTx2Lmxlbmd0aDtpKyspe3ZhciBPPXZbaV07aWYoTyBpbnN0YW5jZW9mIHRoaXMuX29XaW5kb3cuc2FwLnVpLmNvcmUuRWxlbWVudCl7ZS5wdXNoKE8pfX19ZWxzZSBpZih2IGluc3RhbmNlb2YgdGhpcy5fb1dpbmRvdy5zYXAudWkuY29yZS5FbGVtZW50KXtlLnB1c2godil9aWYoZS5sZW5ndGg+MCl7aWYodyl7Qy5wdXNoKHRoaXMuX2RlbGVnYXRlLnN0YXJ0QWdncmVnYXRpb24oYyxuKSl9dmFyIGQ9dGhpcy5faXNEZWZhdWx0QWdncmVnYXRpb24oYyxuKTtmb3IodmFyIGk9MDtpPGUubGVuZ3RoO2krKyl7Qy5wdXNoKHRoaXMuX3NlcmlhbGl6ZVJlY3Vyc2l2ZShlW2ldLGwrMSxuLGQpKX1pZih3KXtDLnB1c2godGhpcy5fZGVsZWdhdGUuZW5kQWdncmVnYXRpb24oYyxuKSl9fX19fWlmKHcpe3ZhciBmPXRoaXMuX2RlbGVnYXRlLmVuZChjLGEsYik7Qy5wdXNoKGYpfXJldHVybiBDLmpvaW4oIiIpfTtTLnByb3RvdHlwZS5faXNEZWZhdWx0QWdncmVnYXRpb249ZnVuY3Rpb24oYyxhKXtyZXR1cm4gYy5nZXRNZXRhZGF0YSgpLmdldERlZmF1bHRBZ2dyZWdhdGlvbk5hbWUoKT09PWF9O3JldHVybiBTfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUudXRpbC5zZXJpYWxpemVyLmRlbGVnYXRlLkRlbGVnYXRlJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUudXRpbC5zZXJpYWxpemVyLmRlbGVnYXRlLkRlbGVnYXRlJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvdXRpbC9zZXJpYWxpemVyL2RlbGVnYXRlL0RlbGVnYXRlIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL2Jhc2UvRXZlbnRQcm92aWRlciddLGZ1bmN0aW9uKHEsRSl7InVzZSBzdHJpY3QiO3ZhciBEPUUuZXh0ZW5kKCJzYXAudWkuY29yZS51dGlsLnNlcmlhbGl6ZXIuZGVsZWdhdGUuRGVsZWdhdGUiLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbigpe0UuYXBwbHkodGhpcyl9fSk7RC5wcm90b3R5cGUuc3RhcnQ9ZnVuY3Rpb24oYyxhLGkpe3JldHVybiIifTtELnByb3RvdHlwZS5taWRkbGU9ZnVuY3Rpb24oYyxhLGkpe3JldHVybiIifTtELnByb3RvdHlwZS5lbmQ9ZnVuY3Rpb24oYyxhLGkpe3JldHVybiIifTtELnByb3RvdHlwZS5zdGFydEFnZ3JlZ2F0aW9uPWZ1bmN0aW9uKGMsYSl7cmV0dXJuIiJ9O0QucHJvdG90eXBlLmVuZEFnZ3JlZ2F0aW9uPWZ1bmN0aW9uKGMsYSl7cmV0dXJuIiJ9O3JldHVybiBEfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUudXRpbC5zZXJpYWxpemVyLmRlbGVnYXRlLkhUTUwnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS51dGlsLnNlcmlhbGl6ZXIuZGVsZWdhdGUuSFRNTCcpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL3V0aWwvc2VyaWFsaXplci9kZWxlZ2F0ZS9IVE1MIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnLi9EZWxlZ2F0ZSddLGZ1bmN0aW9uKHEsRCl7InVzZSBzdHJpY3QiO3ZhciBIPUQuZXh0ZW5kKCJzYXAudWkuY29yZS51dGlsLnNlcmlhbGl6ZXIuZGVsZWdhdGUuSFRNTCIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKGcsRyl7RC5hcHBseSh0aGlzKTt0aGlzLl9mbkdldENvbnRyb2xJZD1nO3RoaXMuX2ZuR2V0RXZlbnRIYW5kbGVyTmFtZT1HfX0pO0gucHJvdG90eXBlLnN0YXJ0QWdncmVnYXRpb249ZnVuY3Rpb24oYyxhKXtyZXR1cm4nPGRpdiBkYXRhLXNhcC11aS1hZ2dyZWdhdGlvbj0iJythKyciPid9O0gucHJvdG90eXBlLmVuZEFnZ3JlZ2F0aW9uPWZ1bmN0aW9uKGMsYSl7cmV0dXJuJzwvZGl2Pid9O0gucHJvdG90eXBlLnN0YXJ0PWZ1bmN0aW9uKGMsYSxpKXtyZXR1cm4iPGRpdiJ9O0gucHJvdG90eXBlLm1pZGRsZT1mdW5jdGlvbihjLGEsYil7dmFyIGg9W107dmFyIEk9KHRoaXMuX2ZuR2V0Q29udHJvbElkKT90aGlzLl9mbkdldENvbnRyb2xJZChjKTpjLmdldElkKCk7aWYoSS5pbmRleE9mKCJfXyIpIT09MCl7aC5wdXNoKHRoaXMuX2NyZWF0ZUF0dHJpYnV0ZSgiaWQiLEkpKX1oLnB1c2godGhpcy5fY3JlYXRlQXR0cmlidXRlKCJkYXRhLXNhcC11aS10eXBlIixjLmdldE1ldGFkYXRhKCkuX3NDbGFzc05hbWUpKTtpZihjLmFDdXN0b21TdHlsZUNsYXNzZXMpe3ZhciBDPWMuYUN1c3RvbVN0eWxlQ2xhc3Nlczt2YXIgZD1bXTtmb3IodmFyIGk9MDtpPEMubGVuZ3RoO2krKyl7dmFyIHM9Q1tpXTtpZighcS5zYXAuc3RhcnRzV2l0aChzLCJzYXBNIikmJiFxLnNhcC5zdGFydHNXaXRoKHMsInNhcFVpIikpe2QucHVzaChzKX19aWYoZC5sZW5ndGg+MCl7aC5wdXNoKHRoaXMuX2NyZWF0ZUF0dHJpYnV0ZSgiY2xhc3MiLGQuam9pbigiICIpKSl9fWlmKHRoaXMuX2ZuR2V0RXZlbnRIYW5kbGVyTmFtZSl7dmFyIGU9Yy5nZXRNZXRhZGF0YSgpLmdldEFsbEV2ZW50cygpO2Zvcih2YXIgRSBpbiBlKXtpZihjLmhhc0xpc3RlbmVycyhFKSl7dmFyIGY9Yy5tRXZlbnRSZWdpc3RyeVtFXTtmb3IodmFyIGk9MDtpPGYubGVuZ3RoO2krKyl7dmFyIGc9dGhpcy5fZm5HZXRFdmVudEhhbmRsZXJOYW1lKGZbaV0pO2lmKGcpe2gucHVzaCh0aGlzLl9jcmVhdGVBdHRyaWJ1dGUoImRhdGEtIit0aGlzLl9jcmVhdGVIdG1sQXR0cmlidXRlTmFtZShFKSxnKSk7YnJlYWt9fX19fXZhciBBPWMuZ2V0TWV0YWRhdGEoKS5nZXRBbGxBc3NvY2lhdGlvbnMoKTt0aGlzLl9jcmVhdGVBdHRyaWJ1dGVzKGgsYyxBLGZ1bmN0aW9uKG4sdil7aWYoQVtuXS5tdWx0aXBsZSl7cmV0dXJuIHYuam9pbigiICIpfXJldHVybiB2fSxmdW5jdGlvbihuLHYpe3JldHVybih2IT09bnVsbCYmdHlwZW9mIHYhPT11bmRlZmluZWQmJnYhPT0iIil9KTt2YXIgcD1jLmdldE1ldGFkYXRhKCkuZ2V0QWxsUHJvcGVydGllcygpO3RoaXMuX2NyZWF0ZUF0dHJpYnV0ZXMoaCxjLHAsbnVsbCxmdW5jdGlvbihuLHYpe3JldHVybighIWMuZ2V0QmluZGluZ0luZm8obil8fCh2IT09bnVsbCYmdHlwZW9mIHYhPT11bmRlZmluZWQmJnYhPT0iIikpfSk7dmFyIG89Yy5nZXRNZXRhZGF0YSgpLmdldEFsbEFnZ3JlZ2F0aW9ucygpO3RoaXMuX2NyZWF0ZUF0dHJpYnV0ZXMoaCxjLG8sbnVsbCxmdW5jdGlvbihuLHYpe2lmKCFjLmdldEJpbmRpbmdJbmZvKG4pJiYoIXZ8fCh0eXBlb2YgdiE9PSJzdHJpbmciKSkpe3JldHVybiBmYWxzZX1yZXR1cm4gdHJ1ZX0pO2gucHVzaCgnPicpO3JldHVybiBoLmpvaW4oJycpfTtILnByb3RvdHlwZS5lbmQ9ZnVuY3Rpb24oYyxhLGkpe3JldHVybiI8L2Rpdj4ifTtILnByb3RvdHlwZS5fY3JlYXRlQXR0cmlidXRlcz1mdW5jdGlvbihoLGMsbyxnLHYpe2Zvcih2YXIgbiBpbiBvKXt2YXIgcD1vW25dO3ZhciBHPXAuX3NHZXR0ZXI7aWYoY1tHXSl7dmFyIFY9Y1tHXSgpO1Y9Zz9nKG4sVik6VjtpZighYy5nZXRCaW5kaW5nSW5mbyhuKSl7aWYoViE9PXAuZGVmYXVsdFZhbHVlKXtpZighdnx8dihuLFYpKXtoLnB1c2godGhpcy5fY3JlYXRlQXR0cmlidXRlKCJkYXRhLSIrdGhpcy5fY3JlYXRlSHRtbEF0dHJpYnV0ZU5hbWUobiksVikpfX19ZWxzZXtoLnB1c2godGhpcy5fY3JlYXRlRGF0YUJpbmRpbmdBdHRyaWJ1dGUoYyxuLFYpKX19fX07SC5wcm90b3R5cGUuX2NyZWF0ZURhdGFCaW5kaW5nQXR0cmlidXRlPWZ1bmN0aW9uKGMsbix2KXt2YXIgYj1jLmdldEJpbmRpbmdJbmZvKG4pO3ZhciBCPW51bGw7dmFyIHA9djtpZighYi5iaW5kaW5nU3RyaW5nKXtpZihiLmJpbmRpbmcpe3ZhciBDPWIuYmluZGluZy5nZXRNZXRhZGF0YSgpLmdldE5hbWUoKTtpZihDPT09InNhcC51aS5tb2RlbC5Qcm9wZXJ0eUJpbmRpbmcifHxDPT09InNhcC51aS5tb2RlbC5yZXNvdXJjZS5SZXNvdXJjZVByb3BlcnR5QmluZGluZyIpe0I9Yi5iaW5kaW5nLmdldFZhbHVlKCl9fWlmKGIucGFydHMpe2I9Yi5wYXJ0c1swXX12YXIgbT1iLm1vZGVsO2lmKEI9PT12fHxCPT09bnVsbCl7cD0ieyIrKG0/KG0rIj4iK2IucGF0aCk6Yi5wYXRoKSsifSJ9fWVsc2V7cD1iLmJpbmRpbmdTdHJpbmd9cmV0dXJuIHRoaXMuX2NyZWF0ZUF0dHJpYnV0ZSgiZGF0YS0iK3RoaXMuX2NyZWF0ZUh0bWxBdHRyaWJ1dGVOYW1lKG4pLHApfTtILnByb3RvdHlwZS5fY3JlYXRlQXR0cmlidXRlPWZ1bmN0aW9uKGEsdil7cmV0dXJuJyAnK2ErJz0iJyt2KyciJ307SC5wcm90b3R5cGUuX2NyZWF0ZUh0bWxBdHRyaWJ1dGVOYW1lPWZ1bmN0aW9uKG4pe3JldHVybiBxLnNhcC5oeXBoZW4obil9O3JldHVybiBIfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUudXRpbC5zZXJpYWxpemVyLmRlbGVnYXRlLlhNTCcpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLnV0aWwuc2VyaWFsaXplci5kZWxlZ2F0ZS5YTUwnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS91dGlsL3NlcmlhbGl6ZXIvZGVsZWdhdGUvWE1MIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnLi9EZWxlZ2F0ZSddLGZ1bmN0aW9uKHEsRCl7InVzZSBzdHJpY3QiO3ZhciBYPUQuZXh0ZW5kKCJzYXAudWkuY29yZS51dGlsLnNlcmlhbGl6ZXIuZGVsZWdhdGUuWE1MIix7Y29uc3RydWN0b3I6ZnVuY3Rpb24oZCxnLEcsbSl7RC5hcHBseSh0aGlzKTt0aGlzLl9zRGVmYXVsdE5hbWVzcGFjZT1kO3RoaXMuX2ZuR2V0Q29udHJvbElkPWc7dGhpcy5fZm5NZW1vcml6ZVBhY2thZ2U9bTt0aGlzLl9mbkdldEV2ZW50SGFuZGxlck5hbWU9R319KTtYLnByb3RvdHlwZS5zdGFydEFnZ3JlZ2F0aW9uPWZ1bmN0aW9uKGMsYSl7cmV0dXJuJzwnK3RoaXMuX2NyZWF0ZUFnZ3JlZ2F0aW9uTmFtZShjLGEpKyc+J307WC5wcm90b3R5cGUuZW5kQWdncmVnYXRpb249ZnVuY3Rpb24oYyxhKXtyZXR1cm4nPC8nK3RoaXMuX2NyZWF0ZUFnZ3JlZ2F0aW9uTmFtZShjLGEpKyc+J307WC5wcm90b3R5cGUuc3RhcnQ9ZnVuY3Rpb24oYyxhLGkpe3JldHVybiI8Iit0aGlzLl9jcmVhdGVUYWdOYW1lKGMpfTtYLnByb3RvdHlwZS5lbmQ9ZnVuY3Rpb24oYyxhLGkpe3JldHVybiI8LyIrdGhpcy5fY3JlYXRlVGFnTmFtZShjKSsiPiJ9O1gucHJvdG90eXBlLm1pZGRsZT1mdW5jdGlvbihjLGEsYil7dmFyIHg9W107dmFyIEk9KHRoaXMuX2ZuR2V0Q29udHJvbElkKT90aGlzLl9mbkdldENvbnRyb2xJZChjKTpjLmdldElkKCk7aWYoSS5pbmRleE9mKCJfXyIpIT09MCl7eC5wdXNoKHRoaXMuX2NyZWF0ZUF0dHJpYnV0ZSgiaWQiLEkpKX1pZihjLmFDdXN0b21TdHlsZUNsYXNzZXMpe3ZhciBDPWMuYUN1c3RvbVN0eWxlQ2xhc3Nlczt2YXIgZD1bXTtmb3IodmFyIGk9MDtpPEMubGVuZ3RoO2krKyl7dmFyIHM9Q1tpXTtpZighcS5zYXAuc3RhcnRzV2l0aChzLCJzYXBNIikmJiFxLnNhcC5zdGFydHNXaXRoKHMsInNhcFVpIikpe2QucHVzaChzKX19aWYoZC5sZW5ndGg+MCl7eC5wdXNoKHRoaXMuX2NyZWF0ZUF0dHJpYnV0ZSgiY2xhc3MiLGQuam9pbigiICIpKSl9fWlmKHRoaXMuX2ZuR2V0RXZlbnRIYW5kbGVyTmFtZSl7dmFyIGU9Yy5nZXRNZXRhZGF0YSgpLmdldEFsbEV2ZW50cygpO2Zvcih2YXIgRSBpbiBlKXtpZihjLmhhc0xpc3RlbmVycyhFKSl7dmFyIGY9Yy5tRXZlbnRSZWdpc3RyeVtFXTtmb3IodmFyIGk9MDtpPGYubGVuZ3RoO2krKyl7dmFyIGg9dGhpcy5fZm5HZXRFdmVudEhhbmRsZXJOYW1lKGZbaV0pO2lmKGgpe3gucHVzaCh0aGlzLl9jcmVhdGVBdHRyaWJ1dGUoRSxoKSk7YnJlYWt9fX19fXZhciBBPWMuZ2V0TWV0YWRhdGEoKS5nZXRBbGxBc3NvY2lhdGlvbnMoKTt0aGlzLl9jcmVhdGVBdHRyaWJ1dGVzKHgsYyxBLGZ1bmN0aW9uKG4sdil7aWYoQVtuXS5tdWx0aXBsZSl7cmV0dXJuIHYuam9pbigiICIpfXJldHVybiB2fSxmdW5jdGlvbihuLHYpe3JldHVybih2IT09bnVsbCYmdHlwZW9mIHYhPT11bmRlZmluZWQmJnYhPT0iIil9KTt2YXIgcD1jLmdldE1ldGFkYXRhKCkuZ2V0QWxsUHJvcGVydGllcygpO3RoaXMuX2NyZWF0ZUF0dHJpYnV0ZXMoeCxjLHAsbnVsbCxmdW5jdGlvbihuLHYpe3JldHVybighIWMuZ2V0QmluZGluZ0luZm8obil8fCh2IT09bnVsbCYmdHlwZW9mIHYhPT11bmRlZmluZWQmJnYhPT0iIikpfSk7dmFyIG89Yy5nZXRNZXRhZGF0YSgpLmdldEFsbEFnZ3JlZ2F0aW9ucygpO3RoaXMuX2NyZWF0ZUF0dHJpYnV0ZXMoeCxjLG8sbnVsbCxmdW5jdGlvbihuLHYpe2lmKCFjLmdldEJpbmRpbmdJbmZvKG4pJiYoIXZ8fCh0eXBlb2YgdiE9PSJzdHJpbmciKSkpe3JldHVybiBmYWxzZX1yZXR1cm4gdHJ1ZX0pO3gucHVzaCgnPicpO3JldHVybiB4LmpvaW4oJycpfTtYLnByb3RvdHlwZS5fY3JlYXRlQXR0cmlidXRlcz1mdW5jdGlvbih4LGMsbyxnLHYpe2Zvcih2YXIgbiBpbiBvKXt2YXIgcD1vW25dO3ZhciBHPXAuX3NHZXR0ZXI7aWYoY1tHXSl7dmFyIFY9Y1tHXSgpO1Y9Zz9nKG4sVik6VjtpZighYy5nZXRCaW5kaW5nSW5mbyhuKSl7aWYoViE9PXAuZGVmYXVsdFZhbHVlKXtpZighdnx8dihuLFYpKXt4LnB1c2godGhpcy5fY3JlYXRlQXR0cmlidXRlKG4sVikpfX19ZWxzZXt4LnB1c2godGhpcy5fY3JlYXRlRGF0YUJpbmRpbmdBdHRyaWJ1dGUoYyxuLFYpKX19fX07WC5wcm90b3R5cGUuX2NyZWF0ZURhdGFCaW5kaW5nQXR0cmlidXRlPWZ1bmN0aW9uKGMsbix2KXt2YXIgYj1jLmdldEJpbmRpbmdJbmZvKG4pO3ZhciBCPW51bGw7dmFyIHA9djtpZighYi5iaW5kaW5nU3RyaW5nKXtpZihiLmJpbmRpbmcpe3ZhciBDPWIuYmluZGluZy5nZXRNZXRhZGF0YSgpLmdldE5hbWUoKTtpZihDPT09InNhcC51aS5tb2RlbC5Qcm9wZXJ0eUJpbmRpbmcifHxDPT09InNhcC51aS5tb2RlbC5yZXNvdXJjZS5SZXNvdXJjZVByb3BlcnR5QmluZGluZyIpe0I9Yi5iaW5kaW5nLmdldFZhbHVlKCl9fWlmKGIucGFydHMpe2I9Yi5wYXJ0c1swXX12YXIgbT1iLm1vZGVsO2lmKEI9PT12fHxCPT09bnVsbCl7cD0ieyIrKG0/KG0rIj4iK2IucGF0aCk6Yi5wYXRoKSsifSJ9fWVsc2V7cD1iLmJpbmRpbmdTdHJpbmd9cmV0dXJuIHRoaXMuX2NyZWF0ZUF0dHJpYnV0ZShuLHApfTtYLnByb3RvdHlwZS5fY3JlYXRlQXR0cmlidXRlPWZ1bmN0aW9uKGEsdil7cmV0dXJuJyAnK2ErJz0iJyt2KyciJ307WC5wcm90b3R5cGUuX2NyZWF0ZVRhZ05hbWU9ZnVuY3Rpb24oYyl7dmFyIEM9Yy5nZXRNZXRhZGF0YSgpLl9zQ2xhc3NOYW1lO3ZhciBsPUMubGFzdEluZGV4T2YoIi4iKTt2YXIgcz0obD09PS0xKT9DOkMuc3Vic3RyaW5nKGwrMSk7dmFyIHA9KGw9PT0tMSk/QzpDLnN1YnN0cmluZygwLGwpO2lmKHRoaXMuX2ZuTWVtb3JpemVQYWNrYWdlKXt0aGlzLl9mbk1lbW9yaXplUGFja2FnZShjLHApfXJldHVybiB0aGlzLl9jcmVhdGVOYW1lc3BhY2UocCxzKX07WC5wcm90b3R5cGUuX2NyZWF0ZUFnZ3JlZ2F0aW9uTmFtZT1mdW5jdGlvbihjLGEpe3ZhciBDPWMuZ2V0TWV0YWRhdGEoKS5fc0NsYXNzTmFtZTt2YXIgbD1DLmxhc3RJbmRleE9mKCIuIik7dmFyIHA9KGw9PT0tMSk/QzpDLnN1YnN0cmluZygwLGwpO3JldHVybiB0aGlzLl9jcmVhdGVOYW1lc3BhY2UocCxhKX07WC5wcm90b3R5cGUuX2NyZWF0ZU5hbWVzcGFjZT1mdW5jdGlvbihuLE4pe2lmKHRoaXMuX3NEZWZhdWx0TmFtZXNwYWNlJiZ0aGlzLl9zRGVmYXVsdE5hbWVzcGFjZT09PW4pe3JldHVybiBOfWVsc2V7cmV0dXJuIG4rIjoiK059fTtyZXR1cm4gWH0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLndzLldlYlNvY2tldCcpKXsNCi8qIQ0KICogU0FQIFVJIGRldmVsb3BtZW50IHRvb2xraXQgZm9yIEhUTUw1IChTQVBVSTUvT3BlblVJNSkNCiAqIChjKSBDb3B5cmlnaHQgMjAwOS0yMDE0IFNBUCBTRSBvciBhbiBTQVAgYWZmaWxpYXRlIGNvbXBhbnkuIA0KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAtIHNlZSBMSUNFTlNFLnR4dC4NCiAqLw0KalF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS53cy5XZWJTb2NrZXQnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS93cy9XZWJTb2NrZXQiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvRGV2aWNlJywnc2FwL3VpL2Jhc2UvRXZlbnRQcm92aWRlcicsJy4vUmVhZHlTdGF0ZSddLGZ1bmN0aW9uKHEsRCxFLFIpeyJ1c2Ugc3RyaWN0Ijt2YXIgVz1FLmV4dGVuZCgic2FwLnVpLmNvcmUud3MuV2ViU29ja2V0Iix7Y29uc3RydWN0b3I6ZnVuY3Rpb24odSxwKXtFLmFwcGx5KHRoaXMpO2lmKCFELnN1cHBvcnQud2Vic29ja2V0KXt0aHJvdyBuZXcgRXJyb3IoIkJyb3dzZXIgZG9lcyBub3Qgc3VwcG9ydCBXZWJTb2NrZXRzLiIpfWlmKHR5cGVvZih1KSE9PSJzdHJpbmciKXt0aHJvdyBuZXcgRXJyb3IoInNVcmwgbXVzdCBiZSBhIHN0cmluZy4iKX1pZih0eXBlb2YocCkhPT0ndW5kZWZpbmVkJyYmIXEuaXNBcnJheShwKSYmdHlwZW9mKHApIT09J3N0cmluZycpe3Rocm93IG5ldyBFcnJvcigiYVByb3RvY29scyBtdXN0IGJlIGEgc3RyaW5nLCBhcnJheSBvZiBzdHJpbmdzIG9yIHVuZGVmaW5lZC4iKX10aGlzLl9vcGVuQ29ubmVjdGlvbih1LHApfSxtZXRhZGF0YTp7cHVibGljTWV0aG9kczpbInNlbmQiLCJjbG9zZSIsImdldFJlYWR5U3RhdGUiLCJnZXRQcm90b2NvbCJdfX0pO1cucHJvdG90eXBlLmdldEludGVyZmFjZT1mdW5jdGlvbigpe3JldHVybiB0aGlzfTtXLk1fRVZFTlRTPXtPcGVuOiJvcGVuIixDbG9zZToiY2xvc2UiLEVycm9yOiJlcnJvciIsTWVzc2FnZToibWVzc2FnZSJ9O1cucHJvdG90eXBlLmF0dGFjaE9wZW49ZnVuY3Rpb24oZCxmLGwpe3RoaXMuYXR0YWNoRXZlbnQoIm9wZW4iLGQsZixsKTtyZXR1cm4gdGhpc307Vy5wcm90b3R5cGUuZGV0YWNoT3Blbj1mdW5jdGlvbihmLGwpe3RoaXMuZGV0YWNoRXZlbnQoIm9wZW4iLGYsbCk7cmV0dXJuIHRoaXN9O1cucHJvdG90eXBlLmZpcmVPcGVuPWZ1bmN0aW9uKGEpe3RoaXMuZmlyZUV2ZW50KCJvcGVuIixhKTtyZXR1cm4gdGhpc307Vy5wcm90b3R5cGUuYXR0YWNoQ2xvc2U9ZnVuY3Rpb24oZCxmLGwpe3RoaXMuYXR0YWNoRXZlbnQoImNsb3NlIixkLGYsbCk7cmV0dXJuIHRoaXN9O1cucHJvdG90eXBlLmRldGFjaENsb3NlPWZ1bmN0aW9uKGYsbCl7dGhpcy5kZXRhY2hFdmVudCgiY2xvc2UiLGYsbCk7cmV0dXJuIHRoaXN9O1cucHJvdG90eXBlLmZpcmVDbG9zZT1mdW5jdGlvbihhKXt0aGlzLmZpcmVFdmVudCgiY2xvc2UiLGEpO3JldHVybiB0aGlzfTtXLnByb3RvdHlwZS5hdHRhY2hFcnJvcj1mdW5jdGlvbihkLGYsbCl7dGhpcy5hdHRhY2hFdmVudCgiZXJyb3IiLGQsZixsKTtyZXR1cm4gdGhpc307Vy5wcm90b3R5cGUuZGV0YWNoRXJyb3I9ZnVuY3Rpb24oZixsKXt0aGlzLmRldGFjaEV2ZW50KCJlcnJvciIsZixsKTtyZXR1cm4gdGhpc307Vy5wcm90b3R5cGUuZmlyZUVycm9yPWZ1bmN0aW9uKGEpe3RoaXMuZmlyZUV2ZW50KCJlcnJvciIsYSk7cmV0dXJuIHRoaXN9O1cucHJvdG90eXBlLmF0dGFjaE1lc3NhZ2U9ZnVuY3Rpb24oZCxmLGwpe3RoaXMuYXR0YWNoRXZlbnQoIm1lc3NhZ2UiLGQsZixsKTtyZXR1cm4gdGhpc307Vy5wcm90b3R5cGUuZGV0YWNoTWVzc2FnZT1mdW5jdGlvbihmLGwpe3RoaXMuZGV0YWNoRXZlbnQoIm1lc3NhZ2UiLGYsbCk7cmV0dXJuIHRoaXN9O1cucHJvdG90eXBlLmZpcmVNZXNzYWdlPWZ1bmN0aW9uKGEpe3RoaXMuZmlyZUV2ZW50KCJtZXNzYWdlIixhKTtyZXR1cm4gdGhpc307Vy5wcm90b3R5cGUuX3Jlc29sdmVGdWxsVXJsPWZ1bmN0aW9uKHUpe3ZhciBmPScnO2lmKCEvXndzcz86XC9cLy8udGVzdCh1KSl7dmFyIGw9ZG9jdW1lbnQubG9jYXRpb247Zj0oKGwucHJvdG9jb2w9PT0naHR0cHM6Jyk/J3dzczovLyc6J3dzOi8vJykrbC5ob3N0O2lmKHUuc3Vic3RyKDAsMSk9PT0nLycpe2YrPXV9ZWxzZXtmKz1sLnBhdGhuYW1lLnN1YnN0cmluZygwLGwucGF0aG5hbWUubGFzdEluZGV4T2YoJy8nKSkrJy8nK3V9fWVsc2V7Zj11fXJldHVybiBmfTtXLnByb3RvdHlwZS5fb3BlbkNvbm5lY3Rpb249ZnVuY3Rpb24odSxwKXt2YXIgdT10aGlzLl9yZXNvbHZlRnVsbFVybCh1KTt0aGlzLl9vV3M9KHR5cGVvZihwKT09PSd1bmRlZmluZWQnKT9uZXcgd2luZG93LldlYlNvY2tldCh1KTpuZXcgd2luZG93LldlYlNvY2tldCh1LHApO3RoaXMuX29Xcy5vbm9wZW49cS5wcm94eSh0aGlzLl9vbm9wZW4sdGhpcyk7dGhpcy5fb1dzLm9uY2xvc2U9cS5wcm94eSh0aGlzLl9vbmNsb3NlLHRoaXMpO3RoaXMuX29Xcy5vbm1lc3NhZ2U9cS5wcm94eSh0aGlzLl9vbm1lc3NhZ2UsdGhpcyk7dGhpcy5fb1dzLm9uZXJyb3I9cS5wcm94eSh0aGlzLl9vbmVycm9yLHRoaXMpfTtXLnByb3RvdHlwZS5fb25vcGVuPWZ1bmN0aW9uKCl7dGhpcy5maXJlT3BlbigpfTtXLnByb3RvdHlwZS5fb25jbG9zZT1mdW5jdGlvbihjKXt0aGlzLmZpcmVDbG9zZSh7Y29kZTpjLmNvZGUscmVhc29uOmMucmVhc29uLHdhc0NsZWFuOmMud2FzQ2xlYW59KX07Vy5wcm90b3R5cGUuX29uZXJyb3I9ZnVuY3Rpb24oZSl7dGhpcy5maXJlRXJyb3IoKX07Vy5wcm90b3R5cGUuX29ubWVzc2FnZT1mdW5jdGlvbihtKXt0aGlzLmZpcmVNZXNzYWdlKHtkYXRhOm0uZGF0YX0pfTtXLnByb3RvdHlwZS5zZW5kPWZ1bmN0aW9uKG0pe2lmKHRoaXMuZ2V0UmVhZHlTdGF0ZSgpPT09Ui5PUEVOKXt0aGlzLl9vV3Muc2VuZChtKX1lbHNlIGlmKHRoaXMuZ2V0UmVhZHlTdGF0ZSgpPT09Ui5DT05ORUNUSU5HKXt0aGlzLmF0dGFjaEV2ZW50T25jZSgib3BlbiIsZnVuY3Rpb24oZSl7dGhpcy5fb1dzLnNlbmQobSl9KX1lbHNle3Euc2FwLmxvZy53YXJuaW5nKCJVbmFibGUgdG8gc2VuZCBXZWJTb2NrZXQgbWVzc2FnZS4gIisiQ29ubmVjdGlvbiBpcyBhbHJlYWR5IGNsb3NlZCBvciBjbG9zaW5nLiBtZXNzYWdlOiAiK20pfXJldHVybiB0aGlzfTtXLnByb3RvdHlwZS5jbG9zZT1mdW5jdGlvbihjLHIpe2lmKHR5cGVvZihjKT09PSdzdHJpbmcnKXtyPWM7Yz11bmRlZmluZWR9Yz0odHlwZW9mKGMpPT09J3VuZGVmaW5lZCcpPzEwMDA6YztyPSh0eXBlb2Yocik9PT0ndW5kZWZpbmVkJyk/IiI6cjtpZih0aGlzLmdldFJlYWR5U3RhdGUoKT09PVIuT1BFTil7dGhpcy5fb1dzLmNsb3NlKGMscil9ZWxzZSBpZih0aGlzLmdldFJlYWR5U3RhdGUoKT09PVIuQ09OTkVDVElORyl7dGhpcy5hdHRhY2hFdmVudE9uY2UoIm9wZW4iLGZ1bmN0aW9uKGUpe3RoaXMuX29Xcy5jbG9zZShjLHIpfSl9ZWxzZXt2YXIgdD0nJztzd2l0Y2godGhpcy5nZXRSZWFkeVN0YXRlKCkpe2Nhc2UgUi5DTE9TRUQ6dD0iQ29ubmVjdGlvbiBpcyBhbHJlYWR5IGNsb3NlZC4iO2JyZWFrO2Nhc2UgUi5DTE9TSU5HOnQ9IkNvbm5lY3Rpb24gaXMgYWxyZWFkeSBjbG9zaW5nLiI7YnJlYWt9cS5zYXAubG9nLndhcm5pbmcoIlVuYWJsZSB0byBjbG9zZSBXZWJTb2NrZXQgY29ubmVjdGlvbi4gIit0KX1yZXR1cm4gdGhpc307Vy5wcm90b3R5cGUuZ2V0UmVhZHlTdGF0ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9vV3MucmVhZHlTdGF0ZX07Vy5wcm90b3R5cGUuZ2V0UHJvdG9jb2w9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb1dzLnByb3RvY29sfTtyZXR1cm4gV30sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5tb2RlbC5CaW5kaW5nJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLm1vZGVsLkJpbmRpbmcnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvbW9kZWwvQmluZGluZyIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ3NhcC91aS9iYXNlL0V2ZW50UHJvdmlkZXInLCcuL0NoYW5nZVJlYXNvbiddLGZ1bmN0aW9uKHEsRSxDKXsidXNlIHN0cmljdCI7dmFyIEI9RS5leHRlbmQoInNhcC51aS5tb2RlbC5CaW5kaW5nIix7Y29uc3RydWN0b3I6ZnVuY3Rpb24obSxwLGMsUCl7RS5hcHBseSh0aGlzKTt0aGlzLm9Nb2RlbD1tO3RoaXMuYlJlbGF0aXZlPSFxLnNhcC5zdGFydHNXaXRoKHAsJy8nKTt0aGlzLnNQYXRoPXA7dGhpcy5vQ29udGV4dD1jO3RoaXMubVBhcmFtZXRlcnM9UDt0aGlzLmJJbml0aWFsPWZhbHNlO3RoaXMuYlN1c3BlbmRlZD1mYWxzZX0sbWV0YWRhdGE6eyJhYnN0cmFjdCI6dHJ1ZSxwdWJsaWNNZXRob2RzOlsiZ2V0UGF0aCIsImdldENvbnRleHQiLCJnZXRNb2RlbCIsImF0dGFjaENoYW5nZSIsImRldGFjaENoYW5nZSIsInJlZnJlc2giLCJpc0luaXRpYWwiLCJhdHRhY2hEYXRhUmVxdWVzdGVkIiwiZGV0YWNoRGF0YVJlcXVlc3RlZCIsImF0dGFjaERhdGFSZWNlaXZlZCIsImRldGFjaERhdGFSZWNlaXZlZCIsInN1c3BlbmQiLCJyZXN1bWUiXX19KTtCLnByb3RvdHlwZS5nZXRQYXRoPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc1BhdGh9O0IucHJvdG90eXBlLmdldENvbnRleHQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vQ29udGV4dH07Qi5wcm90b3R5cGUuc2V0Q29udGV4dD1mdW5jdGlvbihjKXtpZih0aGlzLm9Db250ZXh0IT1jKXt0aGlzLm9Db250ZXh0PWM7dGhpcy5fZmlyZUNoYW5nZSgpfX07Qi5wcm90b3R5cGUuZ2V0TW9kZWw9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vTW9kZWx9O0IucHJvdG90eXBlLmF0dGFjaENoYW5nZT1mdW5jdGlvbihmLGwpe2lmKCF0aGlzLmhhc0xpc3RlbmVycygiY2hhbmdlIikpe3RoaXMub01vZGVsLmFkZEJpbmRpbmcodGhpcyl9dGhpcy5hdHRhY2hFdmVudCgiY2hhbmdlIixmLGwpfTtCLnByb3RvdHlwZS5kZXRhY2hDaGFuZ2U9ZnVuY3Rpb24oZixsKXt0aGlzLmRldGFjaEV2ZW50KCJjaGFuZ2UiLGYsbCk7aWYoIXRoaXMuaGFzTGlzdGVuZXJzKCJjaGFuZ2UiKSl7dGhpcy5vTW9kZWwucmVtb3ZlQmluZGluZyh0aGlzKX19O0IucHJvdG90eXBlLl9maXJlQ2hhbmdlPWZ1bmN0aW9uKGEpe3RoaXMuZmlyZUV2ZW50KCJjaGFuZ2UiLGEpfTtCLnByb3RvdHlwZS5hdHRhY2hEYXRhUmVxdWVzdGVkPWZ1bmN0aW9uKGYsbCl7dGhpcy5hdHRhY2hFdmVudCgiZGF0YVJlcXVlc3RlZCIsZixsKX07Qi5wcm90b3R5cGUuZGV0YWNoRGF0YVJlcXVlc3RlZD1mdW5jdGlvbihmLGwpe3RoaXMuZGV0YWNoRXZlbnQoImRhdGFSZXF1ZXN0ZWQiLGYsbCl9O0IucHJvdG90eXBlLmZpcmVEYXRhUmVxdWVzdGVkPWZ1bmN0aW9uKGEpe3RoaXMuZmlyZUV2ZW50KCJkYXRhUmVxdWVzdGVkIixhKX07Qi5wcm90b3R5cGUuYXR0YWNoRGF0YVJlY2VpdmVkPWZ1bmN0aW9uKGYsbCl7dGhpcy5hdHRhY2hFdmVudCgiZGF0YVJlY2VpdmVkIixmLGwpfTtCLnByb3RvdHlwZS5kZXRhY2hEYXRhUmVjZWl2ZWQ9ZnVuY3Rpb24oZixsKXt0aGlzLmRldGFjaEV2ZW50KCJkYXRhUmVjZWl2ZWQiLGYsbCl9O0IucHJvdG90eXBlLmZpcmVEYXRhUmVjZWl2ZWQ9ZnVuY3Rpb24oYSl7dGhpcy5maXJlRXZlbnQoImRhdGFSZWNlaXZlZCIsYSl9O0IucHJvdG90eXBlLnVwZGF0ZVJlcXVpcmVkPWZ1bmN0aW9uKG0pe3JldHVybiBtJiZ0aGlzLmdldE1vZGVsKCk9PT1tfTtCLnByb3RvdHlwZS5jaGVja1VwZGF0ZT1mdW5jdGlvbihmKXtpZighdGhpcy5iU3VzcGVuZGVkKXt0aGlzLl9maXJlQ2hhbmdlKHtyZWFzb246Qy5DaGFuZ2V9KX19O0IucHJvdG90eXBlLnJlZnJlc2g9ZnVuY3Rpb24oZil7dGhpcy5jaGVja1VwZGF0ZShmKX07Qi5wcm90b3R5cGUuaW5pdGlhbGl6ZT1mdW5jdGlvbigpe3RoaXMuY2hlY2tVcGRhdGUodHJ1ZSk7cmV0dXJuIHRoaXN9O0IucHJvdG90eXBlLl9yZWZyZXNoPWZ1bmN0aW9uKCl7dGhpcy5yZWZyZXNoKCl9O0IucHJvdG90eXBlLmlzSW5pdGlhbD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmJJbml0aWFsfTtCLnByb3RvdHlwZS5pc1JlbGF0aXZlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYlJlbGF0aXZlfTtCLnByb3RvdHlwZS5hdHRhY2hFdmVudHM9ZnVuY3Rpb24oZSl7aWYoIWUpe3JldHVybiB0aGlzfXZhciB0PXRoaXM7cS5lYWNoKGUsZnVuY3Rpb24ocyxoKXt2YXIgbT0iYXR0YWNoIitzLnN1YnN0cmluZygwLDEpLnRvVXBwZXJDYXNlKCkrcy5zdWJzdHJpbmcoMSk7aWYodFttXSl7dFttXShoKX1lbHNle3Euc2FwLmxvZy53YXJuaW5nKHQudG9TdHJpbmcoKSsiIGhhcyBubyBoYW5kbGVyIGZvciBldmVudCAnIitzKyInIil9fSk7cmV0dXJuIHRoaXN9O0IucHJvdG90eXBlLmRldGFjaEV2ZW50cz1mdW5jdGlvbihlKXtpZighZSl7cmV0dXJuIHRoaXN9dmFyIHQ9dGhpcztxLmVhY2goZSxmdW5jdGlvbihzLGgpe3ZhciBtPSJkZXRhY2giK3Muc3Vic3RyaW5nKDAsMSkudG9VcHBlckNhc2UoKStzLnN1YnN0cmluZygxKTtpZih0W21dKXt0W21dKGgpfWVsc2V7cS5zYXAubG9nLndhcm5pbmcodC50b1N0cmluZygpKyIgaGFzIG5vIGhhbmRsZXIgZm9yIGV2ZW50ICciK3MrIiciKX19KTtyZXR1cm4gdGhpc307Qi5wcm90b3R5cGUuYXR0YWNoUmVmcmVzaD1mdW5jdGlvbihmLGwpe3RoaXMuYXR0YWNoRXZlbnQoInJlZnJlc2giLGYsbCl9O0IucHJvdG90eXBlLmRldGFjaFJlZnJlc2g9ZnVuY3Rpb24oZixsKXt0aGlzLmRldGFjaEV2ZW50KCJyZWZyZXNoIixmLGwpfTtCLnByb3RvdHlwZS5fZmlyZVJlZnJlc2g9ZnVuY3Rpb24oYSl7dGhpcy5maXJlRXZlbnQoInJlZnJlc2giLGEpfTtCLnByb3RvdHlwZS5zdXNwZW5kPWZ1bmN0aW9uKCl7dGhpcy5iU3VzcGVuZGVkPXRydWV9O0IucHJvdG90eXBlLnJlc3VtZT1mdW5jdGlvbigpe3RoaXMuYlN1c3BlbmRlZD1mYWxzZTt0aGlzLmNoZWNrVXBkYXRlKCl9O3JldHVybiBCfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLm1vZGVsLkNvbnRleHQnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkubW9kZWwuQ29udGV4dCcpO3NhcC51aS5kZWZpbmUoInNhcC91aS9tb2RlbC9Db250ZXh0IixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL2Jhc2UvRXZlbnRQcm92aWRlciddLGZ1bmN0aW9uKHEsRSl7InVzZSBzdHJpY3QiO3ZhciBDPXNhcC51aS5iYXNlLk9iamVjdC5leHRlbmQoInNhcC51aS5tb2RlbC5Db250ZXh0Iix7Y29uc3RydWN0b3I6ZnVuY3Rpb24obSxwKXtzYXAudWkuYmFzZS5PYmplY3QuYXBwbHkodGhpcyk7dGhpcy5vTW9kZWw9bTt0aGlzLnNQYXRoPXB9LG1ldGFkYXRhOnsiYWJzdHJhY3QiOnRydWUscHVibGljTWV0aG9kczpbImdldE1vZGVsIiwiZ2V0UGF0aCIsImdldFByb3BlcnR5IiwiZ2V0T2JqZWN0Il19fSk7Qy5wcm90b3R5cGUuZ2V0TW9kZWw9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vTW9kZWx9O0MucHJvdG90eXBlLmdldFBhdGg9ZnVuY3Rpb24ocCl7cmV0dXJuIHRoaXMuc1BhdGgrKHA/Ii8iK3A6IiIpfTtDLnByb3RvdHlwZS5nZXRQcm9wZXJ0eT1mdW5jdGlvbihwKXtyZXR1cm4gdGhpcy5vTW9kZWwuZ2V0UHJvcGVydHkocCx0aGlzKX07Qy5wcm90b3R5cGUuZ2V0T2JqZWN0PWZ1bmN0aW9uKHApe3JldHVybiB0aGlzLm9Nb2RlbC5nZXRPYmplY3QocCx0aGlzKX07Qy5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zUGF0aH07cmV0dXJuIEN9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkubW9kZWwuQ29udGV4dEJpbmRpbmcnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkubW9kZWwuQ29udGV4dEJpbmRpbmcnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvbW9kZWwvQ29udGV4dEJpbmRpbmciLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCcuL0JpbmRpbmcnXSxmdW5jdGlvbihxLEIpeyJ1c2Ugc3RyaWN0Ijt2YXIgQz1CLmV4dGVuZCgic2FwLnVpLm1vZGVsLkNvbnRleHRCaW5kaW5nIix7Y29uc3RydWN0b3I6ZnVuY3Rpb24obSxwLGMsUCxlKXtCLmNhbGwodGhpcyxtLHAsYyxQLGUpO3RoaXMub0VsZW1lbnRDb250ZXh0PW51bGw7dGhpcy5iSW5pdGlhbD10cnVlfSxtZXRhZGF0YTp7cHVibGljTWV0aG9kczpbImdldEVsZW1lbnRDb250ZXh0Il19fSk7Qy5wcm90b3R5cGUuY2hlY2tVcGRhdGU9ZnVuY3Rpb24oZil7fTtDLnByb3RvdHlwZS5nZXRCb3VuZENvbnRleHQ9ZnVuY3Rpb24oYyl7cmV0dXJuIHRoaXMub0VsZW1lbnRDb250ZXh0fTtyZXR1cm4gQ30sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5tb2RlbC5GaWx0ZXInKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkubW9kZWwuRmlsdGVyJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL21vZGVsL0ZpbHRlciIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJy4vRmlsdGVyT3BlcmF0b3InXSxmdW5jdGlvbihxLEYpeyJ1c2Ugc3RyaWN0Ijt2YXIgYT1zYXAudWkuYmFzZS5PYmplY3QuZXh0ZW5kKCJzYXAudWkubW9kZWwuRmlsdGVyIix7Y29uc3RydWN0b3I6ZnVuY3Rpb24ocCxvLHYsVil7aWYodHlwZW9mIHA9PT0ib2JqZWN0IiYmIXEuaXNBcnJheShwKSl7dmFyIGY9cDt0aGlzLnNQYXRoPWYucGF0aDt0aGlzLnNPcGVyYXRvcj1mLm9wZXJhdG9yO3RoaXMub1ZhbHVlMT1mLnZhbHVlMTt0aGlzLm9WYWx1ZTI9Zi52YWx1ZTI7dGhpcy5hRmlsdGVycz1mLmZpbHRlcnN8fGYuYUZpbHRlcnM7dGhpcy5iQW5kPWYuYW5kfHxmLmJBbmR9ZWxzZXtpZihxLmlzQXJyYXkocCkpe3RoaXMuYUZpbHRlcnM9cH1lbHNle3RoaXMuc1BhdGg9cH1pZihxLnR5cGUobyk9PT0iYm9vbGVhbiIpe3RoaXMuYkFuZD1vfWVsc2V7dGhpcy5zT3BlcmF0b3I9b310aGlzLm9WYWx1ZTE9djt0aGlzLm9WYWx1ZTI9Vn1pZihxLmlzQXJyYXkodGhpcy5hRmlsdGVycykmJiF0aGlzLnNQYXRoJiYhdGhpcy5zT3BlcmF0b3ImJiF0aGlzLm9WYWx1ZTEmJiF0aGlzLm9WYWx1ZTIpe3RoaXMuX2JNdWx0aUZpbHRlcj10cnVlO3EuZWFjaCh0aGlzLmFGaWx0ZXJzLGZ1bmN0aW9uKGksYil7aWYoIShiIGluc3RhbmNlb2YgYSkpe3Euc2FwLmxvZy5lcnJvcigiRmlsdGVyIGluIEFnZ3JlZ2F0aW9uIG9mIE11bHRpIGZpbHRlciBoYXMgdG8gYmUgaW5zdGFuY2Ugb2Ygc2FwLnVpLm1vZGVsLkZpbHRlciIpfX0pfWVsc2UgaWYoIXRoaXMuYUZpbHRlcnMmJnRoaXMuc1BhdGghPT11bmRlZmluZWQmJnRoaXMuc09wZXJhdG9yJiZ0aGlzLm9WYWx1ZTEhPT11bmRlZmluZWQpe3RoaXMuX2JNdWx0aUZpbHRlcj1mYWxzZX1lbHNle3Euc2FwLmxvZy5lcnJvcigiV3JvbmcgcGFyYW1ldGVycyBkZWZpbmVkIGZvciBmaWx0ZXIuIil9fX0pO3JldHVybiBhfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLm1vZGVsLkxpc3RCaW5kaW5nJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLm1vZGVsLkxpc3RCaW5kaW5nJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL21vZGVsL0xpc3RCaW5kaW5nIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnLi9CaW5kaW5nJywnLi9GaWx0ZXInLCcuL1NvcnRlciddLGZ1bmN0aW9uKHEsQixGLFMpeyJ1c2Ugc3RyaWN0Ijt2YXIgTD1CLmV4dGVuZCgic2FwLnVpLm1vZGVsLkxpc3RCaW5kaW5nIix7Y29uc3RydWN0b3I6ZnVuY3Rpb24obSxwLGMscyxmLFApe0IuY2FsbCh0aGlzLG0scCxjLFApO3RoaXMuYVNvcnRlcnM9cztpZighcS5pc0FycmF5KHRoaXMuYVNvcnRlcnMpJiZ0aGlzLmFTb3J0ZXJzIGluc3RhbmNlb2YgUyl7dGhpcy5hU29ydGVycz1bdGhpcy5hU29ydGVyc119ZWxzZSBpZighcS5pc0FycmF5KHRoaXMuYVNvcnRlcnMpKXt0aGlzLmFTb3J0ZXJzPVtdfXRoaXMuYUZpbHRlcnM9W107aWYoIXEuaXNBcnJheShmKSYmZiBpbnN0YW5jZW9mIEYpe2Y9W2ZdfWVsc2UgaWYoIXEuaXNBcnJheShmKSl7Zj1bXX10aGlzLmFBcHBsaWNhdGlvbkZpbHRlcnM9Zjt0aGlzLmJVc2VFeHRlbmRlZENoYW5nZURldGVjdGlvbj1mYWxzZX0sbWV0YWRhdGE6eyJhYnN0cmFjdCI6dHJ1ZSxwdWJsaWNNZXRob2RzOlsiZ2V0Q29udGV4dHMiLCJzb3J0IiwiYXR0YWNoU29ydCIsImRldGFjaFNvcnQiLCJmaWx0ZXIiLCJhdHRhY2hGaWx0ZXIiLCJkZXRhY2hGaWx0ZXIiLCJnZXREaXN0aW5jdFZhbHVlcyIsImlzR3JvdXBlZCIsImdldExlbmd0aCIsImlzTGVuZ3RoRmluYWwiXX19KTtMLnByb3RvdHlwZS5nZXRMZW5ndGg9ZnVuY3Rpb24oKXtyZXR1cm4gMH07TC5wcm90b3R5cGUuaXNMZW5ndGhGaW5hbD1mdW5jdGlvbigpe3JldHVybiB0cnVlfTtMLnByb3RvdHlwZS5nZXREaXN0aW5jdFZhbHVlcz1mdW5jdGlvbihwKXtyZXR1cm4gbnVsbH07TC5wcm90b3R5cGUuYXR0YWNoU29ydD1mdW5jdGlvbihmLGwpe3RoaXMuYXR0YWNoRXZlbnQoInNvcnQiLGYsbCl9O0wucHJvdG90eXBlLmRldGFjaFNvcnQ9ZnVuY3Rpb24oZixsKXt0aGlzLmRldGFjaEV2ZW50KCJzb3J0IixmLGwpfTtMLnByb3RvdHlwZS5fZmlyZVNvcnQ9ZnVuY3Rpb24oYSl7dGhpcy5maXJlRXZlbnQoInNvcnQiLGEpfTtMLnByb3RvdHlwZS5hdHRhY2hGaWx0ZXI9ZnVuY3Rpb24oZixsKXt0aGlzLmF0dGFjaEV2ZW50KCJmaWx0ZXIiLGYsbCl9O0wucHJvdG90eXBlLmRldGFjaEZpbHRlcj1mdW5jdGlvbihmLGwpe3RoaXMuZGV0YWNoRXZlbnQoImZpbHRlciIsZixsKX07TC5wcm90b3R5cGUuX2ZpcmVGaWx0ZXI9ZnVuY3Rpb24oYSl7dGhpcy5maXJlRXZlbnQoImZpbHRlciIsYSl9O0wucHJvdG90eXBlLmlzR3JvdXBlZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmFTb3J0ZXJzLmxlbmd0aD4wJiYhIXRoaXMuYVNvcnRlcnNbMF0uZm5Hcm91cH07TC5wcm90b3R5cGUuZW5hYmxlRXh0ZW5kZWRDaGFuZ2VEZXRlY3Rpb249ZnVuY3Rpb24oKXt0aGlzLmJVc2VFeHRlbmRlZENoYW5nZURldGVjdGlvbj10cnVlO2lmKHRoaXMudXBkYXRlKXt0aGlzLnVwZGF0ZSgpfX07cmV0dXJuIEx9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkubW9kZWwuTW9kZWwnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkubW9kZWwuTW9kZWwnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvbW9kZWwvTW9kZWwiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvYmFzZS9FdmVudFByb3ZpZGVyJywnLi9CaW5kaW5nTW9kZScsJy4vQ29udGV4dCddLGZ1bmN0aW9uKHEsRSxCLEMpeyJ1c2Ugc3RyaWN0Ijt2YXIgTT1FLmV4dGVuZCgic2FwLnVpLm1vZGVsLk1vZGVsIix7Y29uc3RydWN0b3I6ZnVuY3Rpb24oKXtFLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLm9EYXRhPXt9O3RoaXMuYkRlc3Ryb3llZD1mYWxzZTt0aGlzLmFCaW5kaW5ncz1bXTt0aGlzLm1Db250ZXh0cz17fTt0aGlzLmlTaXplTGltaXQ9MTAwO3RoaXMuc0RlZmF1bHRCaW5kaW5nTW9kZT1CLlR3b1dheTt0aGlzLm1TdXBwb3J0ZWRCaW5kaW5nTW9kZXM9eyJPbmVXYXkiOnRydWUsIlR3b1dheSI6dHJ1ZSwiT25lVGltZSI6dHJ1ZX07dGhpcy5iTGVnYWN5U3ludGF4PWZhbHNlfSxtZXRhZGF0YTp7ImFic3RyYWN0Ijp0cnVlLHB1YmxpY01ldGhvZHM6WyJiaW5kUHJvcGVydHkiLCJiaW5kTGlzdCIsImJpbmRUcmVlIiwiYmluZENvbnRleHQiLCJjcmVhdGVCaW5kaW5nQ29udGV4dCIsImRlc3Ryb3lCaW5kaW5nQ29udGV4dCIsImdldFByb3BlcnR5IiwiZ2V0RGVmYXVsdEJpbmRpbmdNb2RlIiwic2V0RGVmYXVsdEJpbmRpbmdNb2RlIiwiaXNCaW5kaW5nTW9kZVN1cHBvcnRlZCIsImF0dGFjaFBhcnNlRXJyb3IiLCJkZXRhY2hQYXJzZUVycm9yIiwiYXR0YWNoUmVxdWVzdENvbXBsZXRlZCIsImRldGFjaFJlcXVlc3RDb21wbGV0ZWQiLCJhdHRhY2hSZXF1ZXN0RmFpbGVkIiwiZGV0YWNoUmVxdWVzdEZhaWxlZCIsImF0dGFjaFJlcXVlc3RTZW50IiwiZGV0YWNoUmVxdWVzdFNlbnQiLCJzZXRTaXplTGltaXQiLCJyZWZyZXNoIiwiaXNMaXN0IiwiZ2V0T2JqZWN0Il19fSk7TS5NX0VWRU5UUz17UGFyc2VFcnJvcjoicGFyc2VFcnJvciIsUmVxdWVzdEZhaWxlZDoicmVxdWVzdEZhaWxlZCIsUmVxdWVzdFNlbnQ6InJlcXVlc3RTZW50IixSZXF1ZXN0Q29tcGxldGVkOiJyZXF1ZXN0Q29tcGxldGVkIn07TS5wcm90b3R5cGUuYXR0YWNoUmVxdWVzdEZhaWxlZD1mdW5jdGlvbihkLGYsbCl7dGhpcy5hdHRhY2hFdmVudCgicmVxdWVzdEZhaWxlZCIsZCxmLGwpO3JldHVybiB0aGlzfTtNLnByb3RvdHlwZS5kZXRhY2hSZXF1ZXN0RmFpbGVkPWZ1bmN0aW9uKGYsbCl7dGhpcy5kZXRhY2hFdmVudCgicmVxdWVzdEZhaWxlZCIsZixsKTtyZXR1cm4gdGhpc307TS5wcm90b3R5cGUuZmlyZVJlcXVlc3RGYWlsZWQ9ZnVuY3Rpb24oYSl7dGhpcy5maXJlRXZlbnQoInJlcXVlc3RGYWlsZWQiLGEpO3JldHVybiB0aGlzfTtNLnByb3RvdHlwZS5hdHRhY2hQYXJzZUVycm9yPWZ1bmN0aW9uKGQsZixsKXt0aGlzLmF0dGFjaEV2ZW50KCJwYXJzZUVycm9yIixkLGYsbCk7cmV0dXJuIHRoaXN9O00ucHJvdG90eXBlLmRldGFjaFBhcnNlRXJyb3I9ZnVuY3Rpb24oZixsKXt0aGlzLmRldGFjaEV2ZW50KCJwYXJzZUVycm9yIixmLGwpO3JldHVybiB0aGlzfTtNLnByb3RvdHlwZS5maXJlUGFyc2VFcnJvcj1mdW5jdGlvbihhKXt0aGlzLmZpcmVFdmVudCgicGFyc2VFcnJvciIsYSk7cmV0dXJuIHRoaXN9O00ucHJvdG90eXBlLmF0dGFjaFJlcXVlc3RTZW50PWZ1bmN0aW9uKGQsZixsKXt0aGlzLmF0dGFjaEV2ZW50KCJyZXF1ZXN0U2VudCIsZCxmLGwpO3JldHVybiB0aGlzfTtNLnByb3RvdHlwZS5kZXRhY2hSZXF1ZXN0U2VudD1mdW5jdGlvbihmLGwpe3RoaXMuZGV0YWNoRXZlbnQoInJlcXVlc3RTZW50IixmLGwpO3JldHVybiB0aGlzfTtNLnByb3RvdHlwZS5maXJlUmVxdWVzdFNlbnQ9ZnVuY3Rpb24oYSl7dGhpcy5maXJlRXZlbnQoInJlcXVlc3RTZW50IixhKTtyZXR1cm4gdGhpc307TS5wcm90b3R5cGUuYXR0YWNoUmVxdWVzdENvbXBsZXRlZD1mdW5jdGlvbihkLGYsbCl7dGhpcy5hdHRhY2hFdmVudCgicmVxdWVzdENvbXBsZXRlZCIsZCxmLGwpO3JldHVybiB0aGlzfTtNLnByb3RvdHlwZS5kZXRhY2hSZXF1ZXN0Q29tcGxldGVkPWZ1bmN0aW9uKGYsbCl7dGhpcy5kZXRhY2hFdmVudCgicmVxdWVzdENvbXBsZXRlZCIsZixsKTtyZXR1cm4gdGhpc307TS5wcm90b3R5cGUuZmlyZVJlcXVlc3RDb21wbGV0ZWQ9ZnVuY3Rpb24oYSl7dGhpcy5maXJlRXZlbnQoInJlcXVlc3RDb21wbGV0ZWQiLGEpO3JldHVybiB0aGlzfTtNLnByb3RvdHlwZS5nZXRPYmplY3Q9ZnVuY3Rpb24ocCxjKXtyZXR1cm4gdGhpcy5nZXRQcm9wZXJ0eShwLGMpfTtNLnByb3RvdHlwZS5nZXRDb250ZXh0PWZ1bmN0aW9uKHApe2lmKCFxLnNhcC5zdGFydHNXaXRoKHAsIi8iKSl7dGhyb3cgbmV3IEVycm9yKCJQYXRoICIrcCsiIG11c3Qgc3RhcnQgd2l0aCBhIC8gIil9dmFyIGM9dGhpcy5tQ29udGV4dHNbcF07aWYoIWMpe2M9bmV3IEModGhpcyxwKTt0aGlzLm1Db250ZXh0c1twXT1jfXJldHVybiBjfTtNLnByb3RvdHlwZS5yZXNvbHZlPWZ1bmN0aW9uKHAsYyl7dmFyIGk9IXEuc2FwLnN0YXJ0c1dpdGgocCwiLyIpLHI9cCxzO2lmKGkpe2lmKGMpe3M9Yy5nZXRQYXRoKCk7cj1zKyhxLnNhcC5lbmRzV2l0aChzLCIvIik/IiI6Ii8iKStwfWVsc2V7cj10aGlzLmlzTGVnYWN5U3ludGF4KCk/Ii8iK3A6dW5kZWZpbmVkfX1pZihyJiZyIT09Ii8iJiZxLnNhcC5lbmRzV2l0aChyLCIvIikpe3I9ci5zdWJzdHIoMCxyLmxlbmd0aC0xKX1yZXR1cm4gcn07TS5wcm90b3R5cGUuYWRkQmluZGluZz1mdW5jdGlvbihiKXt0aGlzLmFCaW5kaW5ncy5wdXNoKGIpfTtNLnByb3RvdHlwZS5yZW1vdmVCaW5kaW5nPWZ1bmN0aW9uKGIpe2Zvcih2YXIgaT0wO2k8dGhpcy5hQmluZGluZ3MubGVuZ3RoO2krKyl7aWYodGhpcy5hQmluZGluZ3NbaV09PWIpe3RoaXMuYUJpbmRpbmdzLnNwbGljZShpLDEpO2JyZWFrfX19O00ucHJvdG90eXBlLmdldERlZmF1bHRCaW5kaW5nTW9kZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnNEZWZhdWx0QmluZGluZ01vZGV9O00ucHJvdG90eXBlLnNldERlZmF1bHRCaW5kaW5nTW9kZT1mdW5jdGlvbihtKXtpZih0aGlzLmlzQmluZGluZ01vZGVTdXBwb3J0ZWQobSkpe3RoaXMuc0RlZmF1bHRCaW5kaW5nTW9kZT1tfWVsc2V7dGhyb3cgbmV3IEVycm9yKCJCaW5kaW5nIG1vZGUgIittKyIgaXMgbm90IHN1cHBvcnRlZCBieSB0aGlzIG1vZGVsLiIpfX07TS5wcm90b3R5cGUuaXNCaW5kaW5nTW9kZVN1cHBvcnRlZD1mdW5jdGlvbihtKXtyZXR1cm4obSBpbiB0aGlzLm1TdXBwb3J0ZWRCaW5kaW5nTW9kZXMpfTtNLnByb3RvdHlwZS5zZXRMZWdhY3lTeW50YXg9ZnVuY3Rpb24obCl7dGhpcy5iTGVnYWN5U3ludGF4PWx9O00ucHJvdG90eXBlLmlzTGVnYWN5U3ludGF4PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYkxlZ2FjeVN5bnRheH07TS5wcm90b3R5cGUuc2V0U2l6ZUxpbWl0PWZ1bmN0aW9uKHMpe3RoaXMuaVNpemVMaW1pdD1zfTtNLnByb3RvdHlwZS5nZXRJbnRlcmZhY2U9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc307TS5wcm90b3R5cGUucmVmcmVzaD1mdW5jdGlvbihmKXt0aGlzLmNoZWNrVXBkYXRlKGYpfTtNLnByb3RvdHlwZS5jaGVja1VwZGF0ZT1mdW5jdGlvbihmKXt2YXIgYj10aGlzLmFCaW5kaW5ncy5zbGljZSgwKTtxLmVhY2goYixmdW5jdGlvbihpLG8pe28uY2hlY2tVcGRhdGUoZil9KX07TS5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbigpe3RoaXMub0RhdGE9e307dGhpcy5hQmluZGluZ3M9W107dGhpcy5tQ29udGV4dHM9e307dGhpcy5iRGVzdHJveWVkPXRydWU7RS5wcm90b3R5cGUuZGVzdHJveS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9O3JldHVybiBNfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLm1vZGVsLlNlbGVjdGlvbk1vZGVsJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLm1vZGVsLlNlbGVjdGlvbk1vZGVsJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL21vZGVsL1NlbGVjdGlvbk1vZGVsIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL2Jhc2UvRXZlbnRQcm92aWRlciddLGZ1bmN0aW9uKHEsRSl7InVzZSBzdHJpY3QiO3ZhciBTPUUuZXh0ZW5kKCJzYXAudWkubW9kZWwuU2VsZWN0aW9uTW9kZWwiLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbihzKXtFLmFwcGx5KHRoaXMpO3RoaXMuaVNlbGVjdGlvbk1vZGU9c3x8Uy5TSU5HTEVfU0VMRUNUSU9OO3RoaXMuYVNlbGVjdGVkSW5kaWNlcz1bXTt0aGlzLmlMZWFkSW5kZXg9LTE7dGhpcy5mblNvcnQ9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYS1ifTt0aGlzLmZuU29ydFJldmVyc2U9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYi1hfX19KTtTLlNJTkdMRV9TRUxFQ1RJT049MDtTLk1VTFRJX1NFTEVDVElPTj0xO1MucHJvdG90eXBlLmdldFNlbGVjdGlvbk1vZGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pU2VsZWN0aW9uTW9kZX07Uy5wcm90b3R5cGUuc2V0U2VsZWN0aW9uTW9kZT1mdW5jdGlvbihzKXt0aGlzLmlTZWxlY3Rpb25Nb2RlPXN8fFMuU0lOR0xFX1NFTEVDVElPTn07Uy5wcm90b3R5cGUuaXNTZWxlY3RlZEluZGV4PWZ1bmN0aW9uKGkpe3JldHVybiBxLmluQXJyYXkoaSx0aGlzLmFTZWxlY3RlZEluZGljZXMpIT09LTF9O1MucHJvdG90eXBlLmdldExlYWRTZWxlY3RlZEluZGV4PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaUxlYWRJbmRleH07Uy5wcm90b3R5cGUuc2V0TGVhZFNlbGVjdGVkSW5kZXg9ZnVuY3Rpb24obCl7dGhpcy5zZXRTZWxlY3Rpb25JbnRlcnZhbChsLGwpO3JldHVybiB0aGlzfTtTLnByb3RvdHlwZS5nZXRNaW5TZWxlY3Rpb25JbmRleD1mdW5jdGlvbigpe2lmKHRoaXMuYVNlbGVjdGVkSW5kaWNlcy5sZW5ndGg+MCl7dmFyIGk9dGhpcy5hU2VsZWN0ZWRJbmRpY2VzLnNvcnQodGhpcy5mblNvcnQpO3JldHVybiBpWzBdfWVsc2V7cmV0dXJuLTF9fTtTLnByb3RvdHlwZS5nZXRNYXhTZWxlY3Rpb25JbmRleD1mdW5jdGlvbigpe2lmKHRoaXMuYVNlbGVjdGVkSW5kaWNlcy5sZW5ndGg+MCl7dmFyIGk9dGhpcy5hU2VsZWN0ZWRJbmRpY2VzLnNvcnQodGhpcy5mblNvcnRSZXZlcnNlKTtyZXR1cm4gaVswXX1lbHNle3JldHVybi0xfX07Uy5wcm90b3R5cGUuZ2V0U2VsZWN0ZWRJbmRpY2VzPWZ1bmN0aW9uKCl7dmFyIGk9dGhpcy5hU2VsZWN0ZWRJbmRpY2VzLnNvcnQodGhpcy5mblNvcnQpO3JldHVybiBpfTtTLnByb3RvdHlwZS5zZXRTZWxlY3Rpb25JbnRlcnZhbD1mdW5jdGlvbihmLHQpe2lmKHRoaXMuaVNlbGVjdGlvbk1vZGU9PT1TLlNJTkdMRV9TRUxFQ1RJT04pe2Y9dH12YXIgRj1NYXRoLm1pbihmLHQpO3ZhciBUPU1hdGgubWF4KGYsdCk7dmFyIGM9dGhpcy5hU2VsZWN0ZWRJbmRpY2VzLnNsaWNlKCk7dmFyIHM9W107Zm9yKHZhciBpPUY7aTw9VDtpKyspe3MucHVzaChpKTt2YXIgcD1xLmluQXJyYXkoaSxjKTtpZihwPT09LTEpe2MucHVzaChpKX1lbHNle2Muc3BsaWNlKHAsMSl9fXRoaXMuX3VwZGF0ZShzLHQsYyk7cmV0dXJuIHRoaXN9O1MucHJvdG90eXBlLmFkZFNlbGVjdGlvbkludGVydmFsPWZ1bmN0aW9uKGYsdCl7aWYodGhpcy5pU2VsZWN0aW9uTW9kZT09PVMuU0lOR0xFX1NFTEVDVElPTil7cmV0dXJuIHRoaXMuc2V0U2VsZWN0aW9uSW50ZXJ2YWwoZix0KX12YXIgRj1NYXRoLm1pbihmLHQpO3ZhciBUPU1hdGgubWF4KGYsdCk7dmFyIGM9W107dmFyIHM9dGhpcy5hU2VsZWN0ZWRJbmRpY2VzO2Zvcih2YXIgaT1GO2k8PVQ7aSsrKXtpZihxLmluQXJyYXkoaSxzKT09PS0xKXtzLnB1c2goaSk7Yy5wdXNoKGkpfX10aGlzLl91cGRhdGUocyxULGMpO3JldHVybiB0aGlzfTtTLnByb3RvdHlwZS5tb3ZlU2VsZWN0aW9uSW50ZXJ2YWw9ZnVuY3Rpb24ocyxtKXt2YXIgYz1bXTt2YXIgYT10aGlzLmFTZWxlY3RlZEluZGljZXM7dmFyIGw9dGhpcy5pTGVhZEluZGV4O2Zvcih2YXIgaT0wO2k8YS5sZW5ndGg7aSsrKXt2YXIgST1hW2ldO2lmKEk+PXMpe2MucHVzaChhW2ldKTthW2ldKz1tO2MucHVzaChhW2ldKTtpZihJPT09dGhpcy5pTGVhZEluZGV4KXtsKz1tfX19dGhpcy5fdXBkYXRlKGEsbCxjKTtyZXR1cm4gdGhpc307Uy5wcm90b3R5cGUucmVtb3ZlU2VsZWN0aW9uSW50ZXJ2YWw9ZnVuY3Rpb24oZix0KXtpZih0aGlzLmlTZWxlY3Rpb25Nb2RlPT09Uy5TSU5HTEVfU0VMRUNUSU9OKXtmPXR9dmFyIEY9TWF0aC5taW4oZix0KTt2YXIgVD1NYXRoLm1heChmLHQpO3ZhciBjPVtdO3ZhciBzPXRoaXMuYVNlbGVjdGVkSW5kaWNlczt2YXIgbD10aGlzLmlMZWFkSW5kZXg7Zm9yKHZhciBpPUY7aTw9VDtpKyspe3ZhciBJPXEuaW5BcnJheShpLHMpO2lmKEk+LTEpe3Muc3BsaWNlKEksMSk7Yy5wdXNoKGkpfWlmKGk9PT10aGlzLmlMZWFkSW5kZXgpe2w9LTF9fXRoaXMuX3VwZGF0ZShzLGwsYyk7cmV0dXJuIHRoaXN9O1MucHJvdG90eXBlLnNsaWNlU2VsZWN0aW9uSW50ZXJ2YWw9ZnVuY3Rpb24oZix0KXt2YXIgRj1NYXRoLm1pbihmLHQpO3ZhciBUPU1hdGgubWF4KGYsdCk7dmFyIGM9W107dmFyIHI9W107dmFyIG89dGhpcy5hU2VsZWN0ZWRJbmRpY2VzLnNsaWNlKDApO3ZhciBzPXRoaXMuYVNlbGVjdGVkSW5kaWNlczt2YXIgbD10aGlzLmlMZWFkSW5kZXg7dmFyIFI9VC1GKzE7Zm9yKHZhciBJPVQ7ST49RjtJLS0pe3ZhciBhPXEuaW5BcnJheShJLHMpO2lmKGE+LTEpe3Muc3BsaWNlKGEsMSk7ci5wdXNoKEkpfWlmKEk9PT10aGlzLmlMZWFkSW5kZXgpe2w9LTF9fWZvcih2YXIgST0wO0k8cy5sZW5ndGg7SSsrKXt2YXIgTz1zW0ldO2lmKE8+PUYpe3ZhciBuPXNbSV0tUjtpZihPPT09bCl7bD1ufXNbSV09bjtpZihxLmluQXJyYXkobixvKT09PS0xKXtjLnB1c2gobil9fX1mb3IodmFyIGk9MDtpPHIubGVuZ3RoO2krKyl7dmFyIEk9b1tvLmxlbmd0aC0xLWldO2lmKHEuaW5BcnJheShJLGMpPT09LTEpe2MucHVzaChJKX19Zm9yKHZhciBpPTA7aTxyLmxlbmd0aDtpKyspe2lmKHEuaW5BcnJheShyW2ldLHMpPT09LTEmJnEuaW5BcnJheShyW2ldLGMpPT09LTEpe2MucHVzaChyW2ldKX19dGhpcy5fdXBkYXRlKHMsbCxjKTtyZXR1cm4gdGhpc307Uy5wcm90b3R5cGUuY2xlYXJTZWxlY3Rpb249ZnVuY3Rpb24oKXtpZih0aGlzLmFTZWxlY3RlZEluZGljZXMubGVuZ3RoPjB8fHRoaXMuaUxlYWRJbmRleCE9PS0xKXt0aGlzLl91cGRhdGUoW10sLTEsdGhpcy5hU2VsZWN0ZWRJbmRpY2VzLnNsaWNlKCkpfXJldHVybiB0aGlzfTtTLnByb3RvdHlwZS5hdHRhY2hTZWxlY3Rpb25DaGFuZ2VkPWZ1bmN0aW9uKGQsZixsKXt0aGlzLmF0dGFjaEV2ZW50KCJzZWxlY3Rpb25DaGFuZ2VkIixkLGYsbCk7cmV0dXJuIHRoaXN9O1MucHJvdG90eXBlLmRldGFjaFNlbGVjdGlvbkNoYW5nZWQ9ZnVuY3Rpb24oZixsKXt0aGlzLmRldGFjaEV2ZW50KCJzZWxlY3Rpb25DaGFuZ2VkIixmLGwpO3JldHVybiB0aGlzfTtTLnByb3RvdHlwZS5maXJlU2VsZWN0aW9uQ2hhbmdlZD1mdW5jdGlvbihhKXt0aGlzLmZpcmVFdmVudCgic2VsZWN0aW9uQ2hhbmdlZCIsYSk7cmV0dXJuIHRoaXN9O1MucHJvdG90eXBlLl91cGRhdGU9ZnVuY3Rpb24ocyxsLGMpe3ZhciBwPXtyb3dJbmRpY2VzOmMmJmMuc29ydCh0aGlzLmZuU29ydCl9O3RoaXMuYVNlbGVjdGVkSW5kaWNlcz1zO3Aub2xkSW5kZXg9dGhpcy5pTGVhZEluZGV4O2lmKHRoaXMuaUxlYWRJbmRleCE9PWwpe3RoaXMuaUxlYWRJbmRleD1sO3AubGVhZEluZGV4PXRoaXMuaUxlYWRJbmRleH1pZihjLmxlbmd0aD4wfHx0eXBlb2YgcC5sZWFkSW5kZXghPT0idW5kZWZpbmVkIil7dGhpcy5maXJlU2VsZWN0aW9uQ2hhbmdlZChwKX19O3JldHVybiBTfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLm1vZGVsLlNpbXBsZVR5cGUnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkubW9kZWwuU2ltcGxlVHlwZScpO3NhcC51aS5kZWZpbmUoInNhcC91aS9tb2RlbC9TaW1wbGVUeXBlIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnLi9Gb3JtYXRFeGNlcHRpb24nLCcuL1BhcnNlRXhjZXB0aW9uJywnLi9UeXBlJywnLi9WYWxpZGF0ZUV4Y2VwdGlvbiddLGZ1bmN0aW9uKHEsRixQLFQsVil7InVzZSBzdHJpY3QiO3ZhciBTPVQuZXh0ZW5kKCJzYXAudWkubW9kZWwuU2ltcGxlVHlwZSIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKGYsYyl7VC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5zZXRGb3JtYXRPcHRpb25zKGZ8fHt9KTt0aGlzLnNldENvbnN0cmFpbnRzKGN8fHt9KTt0aGlzLnNOYW1lPSJTaW1wbGVUeXBlIn0sbWV0YWRhdGE6eyJhYnN0cmFjdCI6dHJ1ZSxwdWJsaWNNZXRob2RzOlsic2V0Q29uc3RyYWludHMiLCJzZXRGb3JtYXRPcHRpb25zIiwiZm9ybWF0VmFsdWUiLCJwYXJzZVZhbHVlIiwidmFsaWRhdGVWYWx1ZSJdfX0pO1MucHJvdG90eXBlLnNldENvbnN0cmFpbnRzPWZ1bmN0aW9uKGMpe3RoaXMub0NvbnN0cmFpbnRzPWN9O1MucHJvdG90eXBlLnNldEZvcm1hdE9wdGlvbnM9ZnVuY3Rpb24oZil7dGhpcy5vRm9ybWF0T3B0aW9ucz1mfTtyZXR1cm4gU30sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5tb2RlbC5UcmVlQmluZGluZycpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5tb2RlbC5UcmVlQmluZGluZycpO3NhcC51aS5kZWZpbmUoInNhcC91aS9tb2RlbC9UcmVlQmluZGluZyIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJy4vQmluZGluZyddLGZ1bmN0aW9uKHEsQil7InVzZSBzdHJpY3QiO3ZhciBUPUIuZXh0ZW5kKCJzYXAudWkubW9kZWwuVHJlZUJpbmRpbmciLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbihtLHAsYyxmLFApe0IuY2FsbCh0aGlzLG0scCxjLFApO3RoaXMuYUZpbHRlcnM9Zjt0aGlzLmJEaXNwbGF5Um9vdE5vZGU9UCYmUC5kaXNwbGF5Um9vdE5vZGU9PT10cnVlfSxtZXRhZGF0YTp7ImFic3RyYWN0Ijp0cnVlLHB1YmxpY01ldGhvZHM6WyJnZXRSb290Q29udGV4dHMiLCJnZXROb2RlQ29udGV4dHMiLCJoYXNDaGlsZHJlbiIsImZpbHRlciJdfX0pO1QucHJvdG90eXBlLmF0dGFjaEZpbHRlcj1mdW5jdGlvbihmLGwpe3RoaXMuYXR0YWNoRXZlbnQoIl9maWx0ZXIiLGYsbCl9O1QucHJvdG90eXBlLmRldGFjaEZpbHRlcj1mdW5jdGlvbihmLGwpe3RoaXMuZGV0YWNoRXZlbnQoIl9maWx0ZXIiLGYsbCl9O1QucHJvdG90eXBlLl9maXJlRmlsdGVyPWZ1bmN0aW9uKGEpe3RoaXMuZmlyZUV2ZW50KCJfZmlsdGVyIixhKX07cmV0dXJuIFR9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkubW9kZWwuYW5hbHl0aWNzLkFuYWx5dGljYWxCaW5kaW5nJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLm1vZGVsLmFuYWx5dGljcy5BbmFseXRpY2FsQmluZGluZycpO3NhcC51aS5kZWZpbmUoInNhcC91aS9tb2RlbC9hbmFseXRpY3MvQW5hbHl0aWNhbEJpbmRpbmciLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvbW9kZWwvVHJlZUJpbmRpbmcnLCdzYXAvdWkvbW9kZWwvQ2hhbmdlUmVhc29uJywnc2FwL3VpL21vZGVsL1NvcnRlcicsJ3NhcC91aS9tb2RlbC9GaWx0ZXJPcGVyYXRvcicsJy4vb2RhdGE0YW5hbHl0aWNzJ10sZnVuY3Rpb24ocSxULEMsUyxGLG8peyJ1c2Ugc3RyaWN0Ijt2YXIgQT1ULmV4dGVuZCgic2FwLnVpLm1vZGVsLmFuYWx5dGljcy5BbmFseXRpY2FsQmluZGluZyIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKG0scCxjLHMsZixQKXtULmNhbGwodGhpcyxtLHAsYyxmLFApO3RoaXMuc0VudGl0eVNldE5hbWU9KFAmJlAuZW50aXR5U2V0KT9QLmVudGl0eVNldDp1bmRlZmluZWQ7dGhpcy5iQXJ0aWZpY2FsUm9vdENvbnRleHQ9ZmFsc2U7dGhpcy5hQXBwbGljYXRpb25GaWx0ZXI9dGhpcy5fY29udmVydERlcHJlY2F0ZWRGaWx0ZXJPYmplY3RzKGYpO3RoaXMuYUNvbnRyb2xGaWx0ZXI9dW5kZWZpbmVkO3RoaXMuYVNvcnRlcj1zP3M6W107dGhpcy5hTWF4QWdncmVnYXRpb25MZXZlbD1bXTt0aGlzLmFBZ2dyZWdhdGlvbkxldmVsPVtdO3RoaXMub1BlbmRpbmdSZXF1ZXN0cz17fTt0aGlzLm9QZW5kaW5nUmVxdWVzdEhhbmRsZT1bXTt0aGlzLm9Hcm91cGVkUmVxdWVzdHM9e307dGhpcy5iVXNlQmF0Y2hSZXF1ZXN0cz0oUCYmUC51c2VCYXRjaFJlcXVlc3RzPT09dHJ1ZSk/dHJ1ZTpmYWxzZTt0aGlzLmJQcm92aWRlVG90YWxTaXplPShQJiZQLnByb3ZpZGVUb3RhbFJlc3VsdFNpemU9PT1mYWxzZSk/ZmFsc2U6dHJ1ZTt0aGlzLmJQcm92aWRlR3JhbmRUb3RhbHM9KFAmJlAucHJvdmlkZUdyYW5kVG90YWxzPT09ZmFsc2UpP2ZhbHNlOnRydWU7dGhpcy5iVXNlQWNjZWxlcmF0ZWRBdXRvRXhwYW5kPXRydWU7dGhpcy5hUmVxdWVzdFF1ZXVlPVtdO3RoaXMuaVRvdGFsU2l6ZT0tMTt0aGlzLm1LZXk9e307dGhpcy5tRmluYWxMZW5ndGg9e307dGhpcy5tTGVuZ3RoPXt9O3RoaXMuYk5lZWRzVXBkYXRlPWZhbHNlO3RoaXMubU93bktleT17fTt0aGlzLm9BbmFseXRpY2FsUXVlcnlSZXN1bHQ9dGhpcy5vTW9kZWwuZ2V0QW5hbHl0aWNhbEV4dGVuc2lvbnMoKS5maW5kUXVlcnlSZXN1bHRCeU5hbWUodGhpcy5fZ2V0RW50aXR5U2V0KCkpO3RoaXMuYUFuYWx5dGljYWxJbmZvPVtdO3RoaXMubUFuYWx5dGljYWxJbmZvQnlQcm9wZXJ0eT17fTt0aGlzLnVwZGF0ZUFuYWx5dGljYWxJbmZvKFA9PXVuZGVmaW5lZD9bXTpQLmFuYWx5dGljYWxJbmZvKX19KTtBLnByb3RvdHlwZS5nZXRSb290Q29udGV4dHM9ZnVuY3Rpb24ocCl7dmFyIGE9KHAmJnAubnVtYmVyT2ZFeHBhbmRlZExldmVscz9wLm51bWJlck9mRXhwYW5kZWRMZXZlbHMrMToxKTt2YXIgcj1udWxsO3ZhciBSPXRoaXMuX2dldFJlcXVlc3RJZChBLl9yZXF1ZXN0VHlwZS5ncm91cE1lbWJlcnNRdWVyeSx7Z3JvdXBJZDpudWxsfSk7aWYodGhpcy5iQXJ0aWZpY2FsUm9vdENvbnRleHQmJiF0aGlzLl9jbGVhbnVwR3JvdXBpbmdGb3JDb21wbGV0ZWRSZXF1ZXN0KFIpKXtyZXR1cm4gbnVsbH1pZihhPD0xKXtyPXRoaXMuX2dldENvbnRleHRzRm9yUGFyZW50Q29udGV4dChudWxsKTtpZihhPT0xKXt0aGlzLl9jb25zaWRlclJlcXVlc3RHcm91cGluZyhbUix0aGlzLl9nZXRSZXF1ZXN0SWQoQS5fcmVxdWVzdFR5cGUuZ3JvdXBNZW1iZXJzUXVlcnkse2dyb3VwSWQ6Ii8ifSldKTt0aGlzLmdldE5vZGVDb250ZXh0cyh0aGlzLmdldE1vZGVsKCkuZ2V0Q29udGV4dCgiLyIpLHtzdGFydEluZGV4OnAuc3RhcnRJbmRleCxsZW5ndGg6cC5sZW5ndGgsdGhyZXNob2xkOnAudGhyZXNob2xkLGxldmVsOjAsbnVtYmVyT2ZFeHBhbmRlZExldmVsczowfSl9fWVsc2V7cj10aGlzLl9nZXRDb250ZXh0c0ZvclBhcmVudENvbnRleHQobnVsbCk7dmFyIGI9dGhpcy5fcHJlcGFyZUdyb3VwTWVtYmVyc0F1dG9FeHBhbnNpb25SZXF1ZXN0SWRzKCIvIixwLm51bWJlck9mRXhwYW5kZWRMZXZlbHMpO2IucHVzaChSKTt0aGlzLl9jb25zaWRlclJlcXVlc3RHcm91cGluZyhiKTt0aGlzLmdldE5vZGVDb250ZXh0cyh0aGlzLmdldE1vZGVsKCkuZ2V0Q29udGV4dCgiLyIpLHtzdGFydEluZGV4OnAuc3RhcnRJbmRleCxsZW5ndGg6cC5sZW5ndGgsdGhyZXNob2xkOnAudGhyZXNob2xkLGxldmVsOjAsbnVtYmVyT2ZFeHBhbmRlZExldmVsczpwLm51bWJlck9mRXhwYW5kZWRMZXZlbHN9KX1pZihyLmxlbmd0aD4xKXEuc2FwLmxvZy5mYXRhbCgiYXNzZXJ0aW9uIGZhaWxlZDogZ3JhbmQgdG90YWwgcmVwcmVzZW50ZWQgYnkgYSBzaW5nbGUgZW50cnkiKTtyZXR1cm4gcn07QS5wcm90b3R5cGUuZ2V0Tm9kZUNvbnRleHRzPWZ1bmN0aW9uKGMscCl7dmFyIHMsbCx0LEwsbjtpZih0eXBlb2YgcD09Im9iamVjdCIpe3M9cC5zdGFydEluZGV4O2w9cC5sZW5ndGg7dD1wLnRocmVzaG9sZDtMPXAubGV2ZWw7bj1wLm51bWJlck9mRXhwYW5kZWRMZXZlbHN9ZWxzZXtzPWFyZ3VtZW50c1sxXTtsPWFyZ3VtZW50c1syXTt0PWFyZ3VtZW50c1szXTtMPWFyZ3VtZW50c1s0XTtuPWFyZ3VtZW50c1s1XX12YXIgYT10aGlzLl9nZXRDb250ZXh0c0ZvclBhcmVudENvbnRleHQoYyxzLGwsdCxMLG4pO3JldHVybiBhfTtBLnByb3RvdHlwZS5Db250ZXh0c0F2YWlsYWJpbGl0eVN0YXR1cz17QUxMOjIsU09NRToxLE5PTkU6MH07QS5wcm90b3R5cGUuaGFzQXZhaWxhYmxlTm9kZUNvbnRleHRzPWZ1bmN0aW9uKGMsbCl7dmFyIGc9dGhpcy5fZ2V0R3JvdXBJZEZyb21Db250ZXh0KGMsbCk7aWYodGhpcy5tS2V5W2ddIT11bmRlZmluZWQpaWYodGhpcy5tRmluYWxMZW5ndGhbZ109PXRydWUpcmV0dXJuIEEucHJvdG90eXBlLkNvbnRleHRzQXZhaWxhYmlsaXR5U3RhdHVzLkFMTDtlbHNlIHJldHVybiBBLnByb3RvdHlwZS5Db250ZXh0c0F2YWlsYWJpbGl0eVN0YXR1cy5TT01FO2Vsc2UgcmV0dXJuIEEucHJvdG90eXBlLkNvbnRleHRzQXZhaWxhYmlsaXR5U3RhdHVzLk5PTkV9O0EucHJvdG90eXBlLmdldEdyb3VwU2l6ZT1mdW5jdGlvbihjLGwpe2lmKGM9PT11bmRlZmluZWQpcmV0dXJuIDA7dmFyIGc9dGhpcy5fZ2V0R3JvdXBJZEZyb21Db250ZXh0KGMsbCk7cmV0dXJuIHRoaXMubUZpbmFsTGVuZ3RoW2ddP3RoaXMubUxlbmd0aFtnXTotMX07QS5wcm90b3R5cGUuZ2V0VG90YWxTaXplPWZ1bmN0aW9uKCl7aWYoIXRoaXMuYlByb3ZpZGVUb3RhbFNpemUpcS5zYXAubG9nLmZhdGFsKCJ0b3RhbCBzaXplIG9mIHJlc3VsdCBleHBsaWNpdGx5IHR1cm5lZCBvZmYsIGJ1dCBnZXR0ZXIgaW52b2tlZCIpO3JldHVybiB0aGlzLmlUb3RhbFNpemV9O0EucHJvdG90eXBlLmhhc0NoaWxkcmVuPWZ1bmN0aW9uKGMscCl7aWYoYz09PXVuZGVmaW5lZClyZXR1cm4gZmFsc2U7aWYoYz09bnVsbClyZXR1cm4gdHJ1ZTt2YXIgaT1wLmxldmVsO2lmKGk9PTApcmV0dXJuIHRydWU7aWYodGhpcy5hQWdncmVnYXRpb25MZXZlbC5sZW5ndGg8aSlyZXR1cm4gZmFsc2U7cmV0dXJuIHRoaXMuYU1heEFnZ3JlZ2F0aW9uTGV2ZWwuaW5kZXhPZih0aGlzLmFBZ2dyZWdhdGlvbkxldmVsW2ktMV0pPHRoaXMuYU1heEFnZ3JlZ2F0aW9uTGV2ZWwubGVuZ3RoLTF9O0EucHJvdG90eXBlLmhhc01lYXN1cmVzPWZ1bmN0aW9uKCl7dmFyIGg9ZmFsc2U7Zm9yKHZhciBwIGluIHRoaXMub01lYXN1cmVEZXRhaWxzU2V0KXtoPXRydWU7YnJlYWt9cmV0dXJuIGh9O0EucHJvdG90eXBlLmdldERpbWVuc2lvbkRldGFpbHM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vRGltZW5zaW9uRGV0YWlsc1NldH07QS5wcm90b3R5cGUuZ2V0TWVhc3VyZURldGFpbHM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vTWVhc3VyZURldGFpbHNTZXR9O0EucHJvdG90eXBlLmhhc0dyYW5kVG90YWxEaXNwbGF5ZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5iUHJvdmlkZUdyYW5kVG90YWxzfTtBLnByb3RvdHlwZS5nZXRQcm9wZXJ0eT1mdW5jdGlvbihwKXtyZXR1cm4gdGhpcy5vQW5hbHl0aWNhbFF1ZXJ5UmVzdWx0LmdldEVudGl0eVR5cGUoKS5maW5kUHJvcGVydHlCeU5hbWUocCl9O0EucHJvdG90eXBlLmdldEZpbHRlcmFibGVQcm9wZXJ0eU5hbWVzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub0FuYWx5dGljYWxRdWVyeVJlc3VsdC5nZXRFbnRpdHlUeXBlKCkuZ2V0RmlsdGVyYWJsZVByb3BlcnR5TmFtZXMoKX07QS5wcm90b3R5cGUuZ2V0U29ydGFibGVQcm9wZXJ0eU5hbWVzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub0FuYWx5dGljYWxRdWVyeVJlc3VsdC5nZXRFbnRpdHlUeXBlKCkuZ2V0U29ydGFibGVQcm9wZXJ0eU5hbWVzKCl9O0EucHJvdG90eXBlLmdldFByb3BlcnR5TGFiZWw9ZnVuY3Rpb24ocCl7cmV0dXJuIHRoaXMub0FuYWx5dGljYWxRdWVyeVJlc3VsdC5nZXRFbnRpdHlUeXBlKCkuZ2V0TGFiZWxPZlByb3BlcnR5KHApfTtBLnByb3RvdHlwZS5nZXRQcm9wZXJ0eUhlYWRpbmc9ZnVuY3Rpb24ocCl7cmV0dXJuIHRoaXMub0FuYWx5dGljYWxRdWVyeVJlc3VsdC5nZXRFbnRpdHlUeXBlKCkuZ2V0SGVhZGluZ09mUHJvcGVydHkocCl9O0EucHJvdG90eXBlLmdldFByb3BlcnR5UXVpY2tJbmZvPWZ1bmN0aW9uKHApe3JldHVybiB0aGlzLm9BbmFseXRpY2FsUXVlcnlSZXN1bHQuZ2V0RW50aXR5VHlwZSgpLmdldFF1aWNrSW5mb09mUHJvcGVydHkocCl9O0EucHJvdG90eXBlLmlzTWVhc3VyZT1mdW5jdGlvbihwKXtyZXR1cm4gcS5pbkFycmF5KHAsdGhpcy5hTWVhc3VyZU5hbWUpIT09LTF9O0EucHJvdG90eXBlLmZpbHRlcj1mdW5jdGlvbihmLHMpe2Y9dGhpcy5fY29udmVydERlcHJlY2F0ZWRGaWx0ZXJPYmplY3RzKGYpO2lmKHM9PXNhcC51aS5tb2RlbC5GaWx0ZXJUeXBlLkFwcGxpY2F0aW9uKXRoaXMuYUFwcGxpY2F0aW9uRmlsdGVyPWY7ZWxzZSB0aGlzLmFDb250cm9sRmlsdGVyPWY7dGhpcy5pVG90YWxTaXplPS0xO3RoaXMuX2Fib3J0QWxsUGVuZGluZ1JlcXVlc3RzKCk7dGhpcy5yZXNldERhdGEoKTt0aGlzLl9maXJlUmVmcmVzaCh7cmVhc29uOkMuRmlsdGVyfSk7cmV0dXJuIHRoaXN9O0EucHJvdG90eXBlLnNvcnQ9ZnVuY3Rpb24ocyl7aWYocyBpbnN0YW5jZW9mIFMpe3M9W3NdfXRoaXMuYVNvcnRlcj1zP3M6W107dGhpcy5fYWJvcnRBbGxQZW5kaW5nUmVxdWVzdHMoKTt0aGlzLl9maXJlUmVmcmVzaCh7cmVhc29uOkMuU29ydH0pO3JldHVybiB0aGlzfTtBLnByb3RvdHlwZS5nZXRHcm91cE5hbWU9ZnVuY3Rpb24oYyxsKXtpZihjPT09dW5kZWZpbmVkKXJldHVybiIiO3ZhciBnPXRoaXMuYUFnZ3JlZ2F0aW9uTGV2ZWxbbC0xXSxkPXRoaXMub0FuYWx5dGljYWxRdWVyeVJlc3VsdC5maW5kRGltZW5zaW9uQnlQcm9wZXJ0eU5hbWUoZyksdj10aGlzLm1BbmFseXRpY2FsSW5mb0J5UHJvcGVydHlbZ10uZm9ybWF0dGVyLHA9Yy5nZXRQcm9wZXJ0eShnKSx0LGYsRztpZihkJiZ0aGlzLm9EaW1lbnNpb25EZXRhaWxzU2V0W2ddLnRleHRQcm9wZXJ0eU5hbWUpe3Q9ZC5nZXRUZXh0UHJvcGVydHkoKX12YXIgcyxhLGIsYTtpZih0KXtzPWQuZ2V0VGV4dFByb3BlcnR5KCkubmFtZTtiPXRoaXMubUFuYWx5dGljYWxJbmZvQnlQcm9wZXJ0eVtzXS5mb3JtYXR0ZXI7YT1jLmdldFByb3BlcnR5KHMpfWlmKCF0KXtmPXY/dihwKTpwO0c9KChkLmdldExhYmVsVGV4dCgpKT9kLmdldExhYmVsVGV4dCgpKyc6ICc6JycpK2Z9ZWxzZXtmPXY/dihwLGEpOnA7Rz0oKGQuZ2V0TGFiZWxUZXh0KCkpP2QuZ2V0TGFiZWxUZXh0KCkrJzogJzonJykrZjt2YXIgZT1iP2IoYSxwKTphO2lmKGUpe0crPScgLSAnK2V9fXJldHVybiBHfTtBLnByb3RvdHlwZS51cGRhdGVBbmFseXRpY2FsSW5mbz1mdW5jdGlvbihjKXt2YXIgcD10aGlzLm9EaW1lbnNpb25EZXRhaWxzU2V0O3RoaXMubUFuYWx5dGljYWxJbmZvQnlQcm9wZXJ0eT1uZXcgT2JqZWN0KCk7dGhpcy5hTWF4QWdncmVnYXRpb25MZXZlbD1uZXcgQXJyYXkoKTt0aGlzLmFBZ2dyZWdhdGlvbkxldmVsPW5ldyBBcnJheSgpO3RoaXMuYU1lYXN1cmVOYW1lPW5ldyBBcnJheSgpO3RoaXMuaUFuYWx5dGljYWxJbmZvVmVyc2lvbk51bWJlcj0odGhpcy5pQW5hbHl0aWNhbEluZm9WZXJzaW9uTnVtYmVyPT09dW5kZWZpbmVkPzE6KHRoaXMuaUFuYWx5dGljYWxJbmZvVmVyc2lvbk51bWJlcj45OTk/MTp0aGlzLmlBbmFseXRpY2FsSW5mb1ZlcnNpb25OdW1iZXIrMSkpO3RoaXMub01lYXN1cmVEZXRhaWxzU2V0PW5ldyBPYmplY3QoKTt0aGlzLm9EaW1lbnNpb25EZXRhaWxzU2V0PW5ldyBPYmplY3QoKTtmb3IodmFyIGk9MDtpPGMubGVuZ3RoO2krKyl7dmFyIGQ9dGhpcy5vQW5hbHl0aWNhbFF1ZXJ5UmVzdWx0LmZpbmREaW1lbnNpb25CeVByb3BlcnR5TmFtZShjW2ldLm5hbWUpO2lmKGQmJihjW2ldLmluUmVzdWx0PT10cnVlfHxjW2ldLnZpc2libGU9PXRydWUpKXtjW2ldLmRpbWVuc2lvblByb3BlcnR5TmFtZT1kLmdldE5hbWUoKTt2YXIgRD10aGlzLm9EaW1lbnNpb25EZXRhaWxzU2V0W2QuZ2V0TmFtZSgpXTtpZighRCl7RD1uZXcgT2JqZWN0KCk7RC5uYW1lPWQuZ2V0TmFtZSgpO0QuYUF0dHJpYnV0ZU5hbWU9bmV3IEFycmF5KCk7RC5ncm91cGVkPWZhbHNlO3RoaXMub0RpbWVuc2lvbkRldGFpbHNTZXRbZC5nZXROYW1lKCldPUQ7dGhpcy5hTWF4QWdncmVnYXRpb25MZXZlbC5wdXNoKEQubmFtZSk7aWYoY1tpXS5ncm91cGVkPT10cnVlKXRoaXMuYUFnZ3JlZ2F0aW9uTGV2ZWwucHVzaChELm5hbWUpfWlmKGNbaV0uZ3JvdXBlZD09dHJ1ZSl7aWYodGhpcy5nZXRTb3J0YWJsZVByb3BlcnR5TmFtZXMoKS5pbmRleE9mKGQuZ2V0TmFtZSgpKT09LTEpe3Euc2FwLmxvZy5mYXRhbCgicHJvcGVydHkgIitkLmdldE5hbWUoKSsiIG11c3QgYmUgc29ydGFibGUgaW4gb3JkZXIgdG8gYmUgdXNlZCBhcyBncm91cGVkIGRpbWVuc2lvbiIpfUQuZ3JvdXBlZD10cnVlfWlmKGQuZ2V0TmFtZSgpPT1jW2ldLm5hbWUpe0Qua2V5UHJvcGVydHlOYW1lPWNbaV0ubmFtZX12YXIgdD1kLmdldFRleHRQcm9wZXJ0eSgpO2lmKHQmJnQubmFtZT09Y1tpXS5uYW1lKXtELnRleHRQcm9wZXJ0eU5hbWU9Y1tpXS5uYW1lfWlmKGQuZmluZEF0dHJpYnV0ZUJ5TmFtZShjW2ldLm5hbWUpKXtELmFBdHRyaWJ1dGVOYW1lLnB1c2goY1tpXS5uYW1lKX1ELmFuYWx5dGljYWxJbmZvPWNbaV19dmFyIG09dGhpcy5vQW5hbHl0aWNhbFF1ZXJ5UmVzdWx0LmZpbmRNZWFzdXJlQnlQcm9wZXJ0eU5hbWUoY1tpXS5uYW1lKTtpZihtJiYoY1tpXS5pblJlc3VsdD09dHJ1ZXx8Y1tpXS52aXNpYmxlPT10cnVlKSl7Y1tpXS5tZWFzdXJlUHJvcGVydHlOYW1lPW0uZ2V0TmFtZSgpO3ZhciBNPXRoaXMub01lYXN1cmVEZXRhaWxzU2V0W20uZ2V0TmFtZSgpXTtpZighTSl7TT1uZXcgT2JqZWN0KCk7TS5uYW1lPW0uZ2V0TmFtZSgpO3RoaXMub01lYXN1cmVEZXRhaWxzU2V0W20uZ2V0TmFtZSgpXT1NO3RoaXMuYU1lYXN1cmVOYW1lLnB1c2goTS5uYW1lKX1pZihtLmdldFJhd1ZhbHVlUHJvcGVydHkoKS5uYW1lPT1jW2ldLm5hbWUpe00ucmF3VmFsdWVQcm9wZXJ0eU5hbWU9Y1tpXS5uYW1lfXZhciBmPW0uZ2V0Rm9ybWF0dGVkVmFsdWVQcm9wZXJ0eSgpO2lmKGYmJmYubmFtZT09Y1tpXS5uYW1lKXtNLmZvcm1hdHRlZFZhbHVlUHJvcGVydHlOYW1lPWNbaV0ubmFtZX1NLmFuYWx5dGljYWxJbmZvPWNbaV19dGhpcy5tQW5hbHl0aWNhbEluZm9CeVByb3BlcnR5W2NbaV0ubmFtZV09Y1tpXX12YXIgTTtmb3IodmFyIGEgaW4gdGhpcy5vTWVhc3VyZURldGFpbHNTZXQpe3ZhciB1PXRoaXMub0FuYWx5dGljYWxRdWVyeVJlc3VsdC5maW5kTWVhc3VyZUJ5TmFtZShhKS5nZXRVbml0UHJvcGVydHkoKTtpZih1KXRoaXMub01lYXN1cmVEZXRhaWxzU2V0W2FdLnVuaXRQcm9wZXJ0eU5hbWU9dS5uYW1lfXZhciBiPWZ1bmN0aW9uKGUpe3ZhciBuPVtdO2Zvcih2YXIgZyBpbiBlKW4ucHVzaChnLm5hbWUpO3JldHVybiBuLnNvcnQoKS5qb2luKCI7Iil9O2lmKGIocCkhPWIodGhpcy5vRGltZW5zaW9uRGV0YWlsc1NldCkpdGhpcy5pVG90YWxTaXplPS0xO3RoaXMuYUFuYWx5dGljYWxJbmZvPWM7dGhpcy5tRmluYWxMZW5ndGg9e307dGhpcy5tTGVuZ3RoPXt9O3RoaXMubUtleT17fTt0aGlzLm1Pd25LZXk9e307dGhpcy5tQ29udGV4dHM9e307dGhpcy5iTmVlZHNVcGRhdGU9ZmFsc2V9O0EucHJvdG90eXBlLmdldEFuYWx5dGljYWxJbmZvRm9yQ29sdW1uPWZ1bmN0aW9uKGMpe3JldHVybiB0aGlzLm1BbmFseXRpY2FsSW5mb0J5UHJvcGVydHlbY119O0EucHJvdG90eXBlLmxvYWRHcm91cHM9ZnVuY3Rpb24oZyl7dmFyIEc9bmV3IEFycmF5KCk7Zm9yKHZhciBzIGluIGcpe0cucHVzaChzKTtkZWxldGUgdGhpcy5tS2V5W3NdO2RlbGV0ZSB0aGlzLm1MZW5ndGhbc107ZGVsZXRlIHRoaXMubUZpbmFsTGVuZ3RoW3NdO3ZhciBhPWdbc107Zm9yKHZhciBpPTA7aTxhLmxlbmd0aDtpKyspe3ZhciBiPWFbaV07dGhpcy5fZ2V0Q29udGV4dHNGb3JQYXJlbnRHcm91cElkKHMsYi5zdGFydEluZGV4LGIubGVuZ3RoLGIudGhyZXNob2xkKX12YXIgcj1uZXcgQXJyYXkoKTtmb3IodmFyIGk9LTEscztzPUdbKytpXTspe3IucHVzaCh0aGlzLl9nZXRSZXF1ZXN0SWQoQS5fcmVxdWVzdFR5cGUuZ3JvdXBNZW1iZXJzUXVlcnkse2dyb3VwSWQ6c30pKX10aGlzLl9jb25zaWRlclJlcXVlc3RHcm91cGluZyhyKX19O0EucHJvdG90eXBlLmdldEFuYWx5dGljYWxRdWVyeVJlc3VsdD1mdW5jdGlvbigpe3JldHVybiB0aGlzLm9BbmFseXRpY2FsUXVlcnlSZXN1bHR9O0EuX3JlcXVlc3RUeXBlPXtncm91cE1lbWJlcnNRdWVyeToxLHRvdGFsU2l6ZVF1ZXJ5OjIsZ3JvdXBNZW1iZXJzQXV0b0V4cGFuc2lvblF1ZXJ5OjMsbGV2ZWxNZW1iZXJzUXVlcnk6NH07QS5wcm90b3R5cGUuX2dldENvbnRleHRzRm9yUGFyZW50Q29udGV4dD1mdW5jdGlvbihwLHMsbCx0LEwsbil7aWYocD09PXVuZGVmaW5lZClyZXR1cm5bXTtpZihwJiZwLmdldFBhdGgoKT09Ii9hcnRpZmljaWFsUm9vdENvbnRlbnQiKXtwPXRoaXMuZ2V0TW9kZWwoKS5nZXRDb250ZXh0KCIvIil9dmFyIFA9dGhpcy5fZ2V0R3JvdXBJZEZyb21Db250ZXh0KHAsTCk7cmV0dXJuIHRoaXMuX2dldENvbnRleHRzRm9yUGFyZW50R3JvdXBJZChQLHMsbCx0LG4pfTtBLnByb3RvdHlwZS5fZ2V0Q29udGV4dHNGb3JQYXJlbnRHcm91cElkPWZ1bmN0aW9uKHAscyxsLHQsbil7aWYocD09PXVuZGVmaW5lZClyZXR1cm5bXTtpZighcylzPTA7aWYoIWwpbD10aGlzLm9Nb2RlbC5pU2l6ZUxpbWl0O2lmKHRoaXMubUZpbmFsTGVuZ3RoW3BdJiZ0aGlzLm1MZW5ndGhbcF08bClsPXRoaXMubUxlbmd0aFtwXTtpZighdCl0PTA7aWYoIW4pbj0wO2lmKHA9PW51bGwpe2lmKG4+MCl7cS5zYXAubG9nLmZhdGFsKCJpbnZhbGlkIHJlcXVlc3QgdG8gZGV0ZXJtaW5lIG5vZGVzIG9mIHJvb3QgY29udGV4dCIpO3JldHVybiBudWxsfX1lbHNle2lmKHRoaXMuX2dldEdyb3VwSWRMZXZlbChwKT49dGhpcy5hQWdncmVnYXRpb25MZXZlbC5sZW5ndGgmJm4+MCl7cS5zYXAubG9nLmZhdGFsKCJpbnZhbGlkIHJlcXVlc3QgdG8gZGV0ZXJtaW5lIG5vZGVzIG9mIGNvbnRleHQgd2l0aCBncm91cCBJRCAiK3ApO3JldHVybiBudWxsfWlmKHRoaXMuX2dldEdyb3VwSWRMZXZlbChwKStuPnRoaXMuYUFnZ3JlZ2F0aW9uTGV2ZWwubGVuZ3RoKXtuPXRoaXMuYUFnZ3JlZ2F0aW9uTGV2ZWwubGVuZ3RoLXRoaXMuX2dldEdyb3VwSWRMZXZlbChwKS0xfX12YXIgYyxMLGcsYSxHLG07dmFyIGI9bj4wJiZwIT1udWxsO2lmKGIpe3ZhciBNPXRoaXMuX2dldEdyb3VwSWRMZXZlbChwKTt2YXIgZD1NK247Rz10aGlzLl9jYWxjdWxhdGVSZXF1aXJlZEdyb3VwRXhwYW5zaW9uKHAsZCxzLGwrdCk7dmFyIEQ9Ry5ncm91cElkX01pc3Npbmc9PW51bGw7RD1EfHxHLmdyb3VwSWRfTWlzc2luZy5sZW5ndGg8cC5sZW5ndGh8fEcuZ3JvdXBJZF9NaXNzaW5nLnN1YnN0cmluZygwLHAubGVuZ3RoKSE9cDtpZihEKXtxLnNhcC5sb2cuZGVidWcoImF1dG8gZXhwYW5kOiBkYXRhIGF2YWlsYWJsZSBmb3IgZ3JvdXAgSUQgIitwKTtjPXRoaXMuX2dldExvYWRlZENvbnRleHRzRm9yR3JvdXAocCxzLGwpfWVsc2V7bT1sK3R9TD0hRH1lbHNle2M9dGhpcy5fZ2V0TG9hZGVkQ29udGV4dHNGb3JHcm91cChwLHMsbCk7Zz10aGlzLl9jYWxjdWxhdGVSZXF1aXJlZEdyb3VwU2VjdGlvbihwLHMsbCx0LGMpO3ZhciBQPWcubGVuZ3RoPjAmJmw8Zy5sZW5ndGg7TD0oYy5sZW5ndGghPWwmJiEodGhpcy5tRmluYWxMZW5ndGhbcF0mJmMubGVuZ3RoPj10aGlzLm1MZW5ndGhbcF0tcykpfHxQfWlmKCFMKXRoaXMuX2NsZWFudXBHcm91cGluZ0ZvckNvbXBsZXRlZFJlcXVlc3QodGhpcy5fZ2V0UmVxdWVzdElkKEEuX3JlcXVlc3RUeXBlLmdyb3VwTWVtYmVyc1F1ZXJ5LHtncm91cElkOnB9KSk7aWYodGhpcy5vTW9kZWwuZ2V0U2VydmljZU1ldGFkYXRhKCkpe2lmKEwpe3ZhciBOPXRoaXMuYlByb3ZpZGVUb3RhbFNpemUmJnRoaXMuaVRvdGFsU2l6ZT09LTEmJiF0aGlzLl9pc1JlcXVlc3RQZW5kaW5nKHRoaXMuX2dldFJlcXVlc3RJZChBLl9yZXF1ZXN0VHlwZS50b3RhbFNpemVRdWVyeSkpO3ZhciBlPXRydWU7dmFyIGY7aWYodGhpcy5iVXNlQmF0Y2hSZXF1ZXN0cyl7aWYoYil7Zj10aGlzLl9wcmVwYXJlR3JvdXBNZW1iZXJzQXV0b0V4cGFuc2lvblJlcXVlc3RJZHMocCxuKTtmb3IodmFyIGk9LTEscjtyPWZbKytpXTspe2lmKHRoaXMuX2lzUmVxdWVzdFBlbmRpbmcocikpe2U9ZmFsc2U7YnJlYWt9fWlmKGUpe3RoaXMuYVJlcXVlc3RRdWV1ZS5wdXNoKFtBLl9yZXF1ZXN0VHlwZS5ncm91cE1lbWJlcnNBdXRvRXhwYW5zaW9uUXVlcnkscCxHLG0sbl0pfX1lbHNle2U9IXRoaXMuX2lzUmVxdWVzdFBlbmRpbmcodGhpcy5fZ2V0UmVxdWVzdElkKEEuX3JlcXVlc3RUeXBlLmdyb3VwTWVtYmVyc1F1ZXJ5LHtncm91cElkOnB9KSk7aWYoZSl7dGhpcy5hUmVxdWVzdFF1ZXVlLnB1c2goW0EuX3JlcXVlc3RUeXBlLmdyb3VwTWVtYmVyc1F1ZXJ5LHAsZy5zdGFydEluZGV4LGcubGVuZ3RoXSk7Zj1bdGhpcy5fZ2V0UmVxdWVzdElkKEEuX3JlcXVlc3RUeXBlLmdyb3VwTWVtYmVyc1F1ZXJ5LHtncm91cElkOnB9KV19fWlmKGUmJk4pe2YucHVzaCh0aGlzLl9nZXRSZXF1ZXN0SWQoQS5fcmVxdWVzdFR5cGUudG90YWxTaXplUXVlcnkpKTt0aGlzLl9jb25zaWRlclJlcXVlc3RHcm91cGluZyhmKTt0aGlzLmFSZXF1ZXN0UXVldWUucHVzaChbQS5fcmVxdWVzdFR5cGUudG90YWxTaXplUXVlcnldKX1pZihlKXtpZihwPT1udWxsKXt0aGlzLl9hYm9ydEFsbFBlbmRpbmdSZXF1ZXN0cygpfXEuc2FwLmRlbGF5ZWRDYWxsKDAsdGhpcyxBLnByb3RvdHlwZS5fcHJvY2Vzc1JlcXVlc3RRdWV1ZSl9fWVsc2V7dmFyIGg7aWYoYil7Zj10aGlzLl9wcmVwYXJlR3JvdXBNZW1iZXJzQXV0b0V4cGFuc2lvblJlcXVlc3RJZHMocCxuKTtmb3IodmFyIGk9LTEscjtyPWZbKytpXTspe2lmKHRoaXMuX2lzUmVxdWVzdFBlbmRpbmcocikpe2U9ZmFsc2U7YnJlYWt9fWlmKGUpe2g9dGhpcy5fcHJlcGFyZUdyb3VwTWVtYmVyc0F1dG9FeHBhbnNpb25RdWVyeVJlcXVlc3QoQS5fcmVxdWVzdFR5cGUuZ3JvdXBNZW1iZXJzQXV0b0V4cGFuc2lvblF1ZXJ5LHAsRyxtLG4pfX1lbHNle2U9IXRoaXMuX2lzUmVxdWVzdFBlbmRpbmcodGhpcy5fZ2V0UmVxdWVzdElkKEEuX3JlcXVlc3RUeXBlLmdyb3VwTWVtYmVyc1F1ZXJ5LHtncm91cElkOnB9KSk7aWYoZSl7aD10aGlzLl9wcmVwYXJlR3JvdXBNZW1iZXJzUXVlcnlSZXF1ZXN0KEEuX3JlcXVlc3RUeXBlLmdyb3VwTWVtYmVyc1F1ZXJ5LHAsZy5zdGFydEluZGV4LGcubGVuZ3RoKTtmPVtoLnNSZXF1ZXN0SWRdfX1pZihlKXtpZihwPT1udWxsKXt0aGlzLl9hYm9ydEFsbFBlbmRpbmdSZXF1ZXN0cygpfXRoaXMuX2V4ZWN1dGVRdWVyeVJlcXVlc3QoaCk7aWYoTiYmIWguYklzRmxhdExpc3RSZXF1ZXN0KXtmLnB1c2godGhpcy5fZ2V0UmVxdWVzdElkKEEuX3JlcXVlc3RUeXBlLnRvdGFsU2l6ZVF1ZXJ5KSk7dGhpcy5fY29uc2lkZXJSZXF1ZXN0R3JvdXBpbmcoZik7dGhpcy5fZXhlY3V0ZVF1ZXJ5UmVxdWVzdCh0aGlzLl9wcmVwYXJlVG90YWxTaXplUXVlcnlSZXF1ZXN0KEEuX3JlcXVlc3RUeXBlLnRvdGFsU2l6ZVF1ZXJ5KSl9fX19fXJldHVybiBjfTtBLnByb3RvdHlwZS5fcHJvY2Vzc1JlcXVlc3RRdWV1ZT1mdW5jdGlvbigpe2lmKHRoaXMuYVJlcXVlc3RRdWV1ZS5sZW5ndGg9PTApcmV0dXJuO3ZhciByPVtdO3ZhciBmPWZhbHNlO2Zvcih2YXIgaT0tMSxSO1I9dGhpcy5hUmVxdWVzdFF1ZXVlWysraV07KXtpZihSWzBdPT1BLl9yZXF1ZXN0VHlwZS5ncm91cE1lbWJlcnNRdWVyeSl7dmFyIGE9QS5wcm90b3R5cGUuX3ByZXBhcmVHcm91cE1lbWJlcnNRdWVyeVJlcXVlc3QuYXBwbHkodGhpcyxSKTtmPWZ8fGEuYklzRmxhdExpc3RSZXF1ZXN0O3IucHVzaChhKX19Zm9yKHZhciBpPS0xLFI7Uj10aGlzLmFSZXF1ZXN0UXVldWVbKytpXTspe3ZhciBhPW51bGw7c3dpdGNoKFJbMF0pe2Nhc2UgQS5fcmVxdWVzdFR5cGUuZ3JvdXBNZW1iZXJzUXVlcnk6Y29udGludWU7Y2FzZSBBLl9yZXF1ZXN0VHlwZS50b3RhbFNpemVRdWVyeTppZighZil7YT1BLnByb3RvdHlwZS5fcHJlcGFyZVRvdGFsU2l6ZVF1ZXJ5UmVxdWVzdC5hcHBseSh0aGlzLFIpO3IucHVzaChhKX1icmVhaztjYXNlIEEuX3JlcXVlc3RUeXBlLmdyb3VwTWVtYmVyc0F1dG9FeHBhbnNpb25RdWVyeTphPUEucHJvdG90eXBlLl9wcmVwYXJlR3JvdXBNZW1iZXJzQXV0b0V4cGFuc2lvblF1ZXJ5UmVxdWVzdC5hcHBseSh0aGlzLFIpO2Zvcih2YXIgaj0tMSxsO2w9YS5hR3JvdXBNZW1iZXJzQXV0b0V4cGFuc2lvblJlcXVlc3REZXRhaWxzWysral07KXtyLnB1c2gobCl9YnJlYWs7ZGVmYXVsdDpxLnNhcC5sb2cuZmF0YWwoInVuaGFuZGxlZCByZXF1ZXN0IHR5cGUgIit0aGlzLmFSZXF1ZXN0UXVldWVbaV1bMF0pO2NvbnRpbnVlfX1pZihyLmxlbmd0aD4xKXRoaXMuX2V4ZWN1dGVCYXRjaFJlcXVlc3Qocik7ZWxzZSB0aGlzLl9leGVjdXRlUXVlcnlSZXF1ZXN0KHJbMF0pO3RoaXMuYVJlcXVlc3RRdWV1ZT1bXX07QS5wcm90b3R5cGUuX3ByZXBhcmVHcm91cE1lbWJlcnNRdWVyeVJlcXVlc3Q9ZnVuY3Rpb24ocixnLHMsTCl7dmFyIEc9W107dmFyIGM9dGhpcy5pQW5hbHl0aWNhbEluZm9WZXJzaW9uTnVtYmVyO3ZhciBhPW5ldyBvLlF1ZXJ5UmVzdWx0UmVxdWVzdCh0aGlzLm9BbmFseXRpY2FsUXVlcnlSZXN1bHQpO2Euc2V0UmVzb3VyY2VQYXRoKHRoaXMuX2dldFJlc291cmNlUGF0aCgpKTthLmdldFNvcnRFeHByZXNzaW9uKCkuY2xlYXIoKTt2YXIgYj0wLGQ9LTE7aWYoZyl7Rz10aGlzLl9nZXRHcm91cElkQ29tcG9uZW50cyhnKTtiPWQ9Ry5sZW5ndGg7dmFyIHU9MDtmb3IodmFyIGk9MCxlPTA7aTxiO2UrKyl7aWYodGhpcy5vRGltZW5zaW9uRGV0YWlsc1NldFt0aGlzLmFNYXhBZ2dyZWdhdGlvbkxldmVsW2VdXS5ncm91cGVkPT1mYWxzZSkrK3U7ZWxzZSsraX1iPWQ9Yit1O2lmKHRoaXMuYU1heEFnZ3JlZ2F0aW9uTGV2ZWwubGVuZ3RoPjApe3doaWxlKHRoaXMub0RpbWVuc2lvbkRldGFpbHNTZXRbdGhpcy5hTWF4QWdncmVnYXRpb25MZXZlbFtkXV0uZ3JvdXBlZD09ZmFsc2UpaWYoKytkPT10aGlzLmFNYXhBZ2dyZWdhdGlvbkxldmVsLmxlbmd0aClicmVha319dmFyIEk9ZD49dGhpcy5hTWF4QWdncmVnYXRpb25MZXZlbC5sZW5ndGgtMTt2YXIgZj10aGlzLmFNYXhBZ2dyZWdhdGlvbkxldmVsLnNsaWNlKDAsZCsxKTthLnNldEFnZ3JlZ2F0aW9uTGV2ZWwoZik7Zm9yKHZhciBpPTA7aTxmLmxlbmd0aDtpKyspe3ZhciBEPXRoaXMub0RpbWVuc2lvbkRldGFpbHNTZXRbZltpXV07dmFyIGg9KEQua2V5UHJvcGVydHlOYW1lIT11bmRlZmluZWQpO3ZhciBqPShELnRleHRQcm9wZXJ0eU5hbWUhPXVuZGVmaW5lZCk7YS5pbmNsdWRlRGltZW5zaW9uS2V5VGV4dEF0dHJpYnV0ZXMoRC5uYW1lLHRydWUsaixELmFBdHRyaWJ1dGVOYW1lKTtpZihELmdyb3VwZWQpe2EuZ2V0U29ydEV4cHJlc3Npb24oKS5hZGRTb3J0ZXIoZltpXSxvLlNvcnRPcmRlci5Bc2NlbmRpbmcpfX12YXIgaz1hLmdldEZpbHRlckV4cHJlc3Npb24oKTtrLmNsZWFyKCk7aWYodGhpcy5hQXBwbGljYXRpb25GaWx0ZXIpay5hZGRVSTVGaWx0ZXJDb25kaXRpb25zKHRoaXMuYUFwcGxpY2F0aW9uRmlsdGVyKTtpZih0aGlzLmFDb250cm9sRmlsdGVyKWsuYWRkVUk1RmlsdGVyQ29uZGl0aW9ucyh0aGlzLmFDb250cm9sRmlsdGVyKTtpZihiPj0xKXtmb3IodmFyIGk9MCxsPUcubGVuZ3RoO2k8bDtpKyspe2suYWRkQ29uZGl0aW9uKHRoaXMuYUFnZ3JlZ2F0aW9uTGV2ZWxbaV0sRi5FUSxHW2ldKX19dmFyIG07dmFyIG47dmFyIHA7dmFyIE07dmFyIHQ9bmV3IEFycmF5KCk7aWYoZyE9bnVsbHx8dGhpcy5iUHJvdmlkZUdyYW5kVG90YWxzKXthLnNldE1lYXN1cmVzKHRoaXMuYU1lYXN1cmVOYW1lKTtmb3IodmFyIHYgaW4gdGhpcy5vTWVhc3VyZURldGFpbHNTZXQpe009dGhpcy5vTWVhc3VyZURldGFpbHNTZXRbdl07aWYoIUkmJnRoaXMubUFuYWx5dGljYWxJbmZvQnlQcm9wZXJ0eVt2XS50b3RhbD09ZmFsc2Upe209ZmFsc2U7bj1mYWxzZTtwPWZhbHNlfWVsc2V7bT0oTS5yYXdWYWx1ZVByb3BlcnR5TmFtZSE9dW5kZWZpbmVkKTtuPShNLmZvcm1hdHRlZFZhbHVlUHJvcGVydHlOYW1lIT11bmRlZmluZWQpO3A9KE0udW5pdFByb3BlcnR5TmFtZSE9dW5kZWZpbmVkKTtpZihwKXtpZih0LmluZGV4T2YoTS51bml0UHJvcGVydHlOYW1lKT09LTEpe3QucHVzaChNLnVuaXRQcm9wZXJ0eU5hbWUpfX19YS5pbmNsdWRlTWVhc3VyZVJhd0Zvcm1hdHRlZFZhbHVlVW5pdChNLm5hbWUsbSxuLHApfWZvcih2YXIgaSBpbiBmKXt2YXIgdztpZigodz10LmluZGV4T2YoZltpXSkpIT0tMSl0LnNwbGljZSh3LDEpfX12YXIgeD1hLmdldFNvcnRFeHByZXNzaW9uKCk7Zm9yKHZhciBpPTA7aTx0aGlzLmFTb3J0ZXIubGVuZ3RoO2krKyl7aWYodGhpcy5hU29ydGVyW2ldKXguYWRkU29ydGVyKHRoaXMuYVNvcnRlcltpXS5zUGF0aCx0aGlzLmFTb3J0ZXJbaV0uYkRlc2NlbmRpbmc/by5Tb3J0T3JkZXIuRGVzY2VuZGluZzpvLlNvcnRPcmRlci5Bc2NlbmRpbmcpfWlmKEw9PTApcS5zYXAubG9nLmZhdGFsKCJ1bmhhbmRsZWQgY2FzZTogbG9hZCAwIGVudGl0aWVzIG9mIHN1YiBncm91cCIpO2Euc2V0UmVzdWx0UGFnZUJvdW5kYXJpZXMocysxLHMrTCk7YS5zZXRSZXF1ZXN0T3B0aW9ucyhudWxsLCF0aGlzLm1GaW5hbExlbmd0aFtnXSk7cmV0dXJue2lSZXF1ZXN0VHlwZTpyLHNSZXF1ZXN0SWQ6dGhpcy5fZ2V0UmVxdWVzdElkKEEuX3JlcXVlc3RUeXBlLmdyb3VwTWVtYmVyc1F1ZXJ5LHtncm91cElkOmd9KSxvQW5hbHl0aWNhbFF1ZXJ5UmVxdWVzdDphLHNHcm91cElkOmcsYVNlbGVjdGVkVW5pdFByb3BlcnR5TmFtZTp0LGFBZ2dyZWdhdGlvbkxldmVsOmYsYklzRmxhdExpc3RSZXF1ZXN0OkkmJmI9PTAsYklzTGVhZkdyb3Vwc1JlcXVlc3Q6SSxpU3RhcnRJbmRleDpzLGlMZW5ndGg6TH19O0EucHJvdG90eXBlLl9wcmVwYXJlVG90YWxTaXplUXVlcnlSZXF1ZXN0PWZ1bmN0aW9uKHIpe3ZhciBjPXRoaXMuaUFuYWx5dGljYWxJbmZvVmVyc2lvbk51bWJlcjt2YXIgYT1uZXcgby5RdWVyeVJlc3VsdFJlcXVlc3QodGhpcy5vQW5hbHl0aWNhbFF1ZXJ5UmVzdWx0KTthLnNldFJlc291cmNlUGF0aCh0aGlzLl9nZXRSZXNvdXJjZVBhdGgoKSk7YS5zZXRBZ2dyZWdhdGlvbkxldmVsKHRoaXMuYU1heEFnZ3JlZ2F0aW9uTGV2ZWwpO2Euc2V0TWVhc3VyZXMoW10pO3ZhciBmPWEuZ2V0RmlsdGVyRXhwcmVzc2lvbigpO2YuY2xlYXIoKTtpZih0aGlzLmFBcHBsaWNhdGlvbkZpbHRlcilmLmFkZFVJNUZpbHRlckNvbmRpdGlvbnModGhpcy5hQXBwbGljYXRpb25GaWx0ZXIpO2lmKHRoaXMuYUNvbnRyb2xGaWx0ZXIpZi5hZGRVSTVGaWx0ZXJDb25kaXRpb25zKHRoaXMuYUNvbnRyb2xGaWx0ZXIpO2Euc2V0UmVzdWx0UGFnZUJvdW5kYXJpZXMoMSwxKTthLnNldFJlcXVlc3RPcHRpb25zKG51bGwsdHJ1ZSk7cmV0dXJue2lSZXF1ZXN0VHlwZTpyLHNSZXF1ZXN0SWQ6dGhpcy5fZ2V0UmVxdWVzdElkKEEuX3JlcXVlc3RUeXBlLnRvdGFsU2l6ZVF1ZXJ5KSxvQW5hbHl0aWNhbFF1ZXJ5UmVxdWVzdDphfX07QS5wcm90b3R5cGUuX3ByZXBhcmVHcm91cE1lbWJlcnNBdXRvRXhwYW5zaW9uUXVlcnlSZXF1ZXN0PWZ1bmN0aW9uKHIsZyxHLGwsbil7dmFyIHA9ZnVuY3Rpb24oRyxjKXtpZihHLmdyb3VwSWRfTWlzc2luZz09bnVsbCl7cS5zYXAubG9nLmZhdGFsKCJtaXNzaW5nIGdyb3VwIElkIG5vdCBwcmVzZW50Iik7cmV0dXJuIGZ9dmFyIGQ9dC5fZ2V0R3JvdXBJZENvbXBvbmVudHMoRy5ncm91cElkX01pc3NpbmcpO3ZhciBlPWQubGVuZ3RoO2lmKGU+Yyl7cS5zYXAubG9nLmZhdGFsKCJ0aGUgZ2l2ZW4gZ3JvdXAgSUQgaXMgdG9vIGRlZXAgZm9yIHJlcXVlc3RlZCBsZXZlbCBmb3IgYXV0byBleHBhbnNpb24iKTtyZXR1cm4gZn12YXIgej1bXTtmb3IodmFyIGk9MDtpPGU7aSsrKXt2YXIgQj10LmFBZ2dyZWdhdGlvbkxldmVsW2ldO3ZhciBWPWRbaV07dmFyIHk9dC5fZ2V0RmlsdGVyT3BlcmF0b3JNYXRjaGluZ1Byb3BlcnR5U29ydE9yZGVyKEIpO3pbaV09bmV3IHNhcC51aS5tb2RlbC5GaWx0ZXIoQix5LFYpfXZhciBEPW51bGw7aWYoRy5zdGFydEluZGV4X01pc3Npbmc+MCl7dmFyIEU9dC5tS2V5W0cuZ3JvdXBJZF9NaXNzaW5nXVtHLnN0YXJ0SW5kZXhfTWlzc2luZy0xXTt2YXIgSD10Lm9Nb2RlbC5nZXRPYmplY3QoIi8iK0UpO3ZhciBJPXQuYUFnZ3JlZ2F0aW9uTGV2ZWxbZV07dmFyIEo9SFtJXTtEPW5ldyBzYXAudWkubW9kZWwuRmlsdGVyKEksdC5fZ2V0RmlsdGVyT3BlcmF0b3JNYXRjaGluZ1Byb3BlcnR5U29ydE9yZGVyKEksZmFsc2UpLEopfXZhciBmPVtdO2Zvcih2YXIgTD0wO0w8YztMKyspe3ZhciBLPVtdO3ZhciBOPU1hdGgubWluKGUsTCsxKTtmb3IodmFyIE89MDtPPE47TysrKXt2YXIgUT1bXTt2YXIgVT1NYXRoLm1pbihlLE8rMSk7dmFyIFc9Ry5zdGFydEluZGV4X01pc3Npbmc+MDtmb3IodmFyIFg9MDtYPFU7WCsrKXt2YXIgWT1uZXcgc2FwLnVpLm1vZGVsLkZpbHRlcigieCIsc2FwLnVpLm1vZGVsLkZpbHRlck9wZXJhdG9yLkVRLCJ4Iik7WT1xLmV4dGVuZCh0cnVlLFkseltYXSk7aWYoVT4xJiZYPFUtMSlZLnNPcGVyYXRvcj1zYXAudWkubW9kZWwuRmlsdGVyT3BlcmF0b3IuRVE7aWYoWD09ZS0xJiZMPmUtMSYmIVcpe2lmKFkuc09wZXJhdG9yPT1zYXAudWkubW9kZWwuRmlsdGVyT3BlcmF0b3IuR1QpWS5zT3BlcmF0b3I9c2FwLnVpLm1vZGVsLkZpbHRlck9wZXJhdG9yLkdFO2Vsc2UgWS5zT3BlcmF0b3I9c2FwLnVpLm1vZGVsLkZpbHRlck9wZXJhdG9yLkxFfVEucHVzaChZKX1pZihRLmxlbmd0aD4wKXtLLnB1c2gobmV3IHNhcC51aS5tb2RlbC5GaWx0ZXIoUSx0cnVlKSk7aWYoTD5lLTEmJk89PWUtMSYmVyl7dmFyIFo9W107Zm9yKHZhciBpPTA7aTxRLmxlbmd0aDtpKyspe3ZhciAkPW5ldyBzYXAudWkubW9kZWwuRmlsdGVyKCJ4IixzYXAudWkubW9kZWwuRmlsdGVyT3BlcmF0b3IuRVEsIngiKTskPXEuZXh0ZW5kKHRydWUsJCxRW2ldKTtaLnB1c2goJCl9WltlLTFdLnNPcGVyYXRvcj1zYXAudWkubW9kZWwuRmlsdGVyT3BlcmF0b3IuRVE7Wi5wdXNoKEQpO0sucHVzaChuZXcgc2FwLnVpLm1vZGVsLkZpbHRlcihaLHRydWUpKTticmVha319fWlmKEsubGVuZ3RoPjApZltMXT1uZXcgc2FwLnVpLm1vZGVsLkZpbHRlcihLLGZhbHNlKTtlbHNlIGZbTF09bnVsbH1yZXR1cm4gZn07dmFyIGE9ZnVuY3Rpb24ocixnLEwseixzLGwsQixVKXt2YXIgRD1bXTt2YXIgRT10LmlBbmFseXRpY2FsSW5mb1ZlcnNpb25OdW1iZXI7dmFyIEg9bmV3IG8uUXVlcnlSZXN1bHRSZXF1ZXN0KHQub0FuYWx5dGljYWxRdWVyeVJlc3VsdCk7SC5zZXRSZXNvdXJjZVBhdGgodC5fZ2V0UmVzb3VyY2VQYXRoKCkpO0guZ2V0U29ydEV4cHJlc3Npb24oKS5jbGVhcigpO3ZhciBJPTAsSj0tMTtJPUo9TC0xO3ZhciBLPTA7Zm9yKHZhciBpPTAsTj0wO2k8STtOKyspe2lmKHQub0RpbWVuc2lvbkRldGFpbHNTZXRbdC5hTWF4QWdncmVnYXRpb25MZXZlbFtOXV0uZ3JvdXBlZD09ZmFsc2UpeysrS31lbHNleysraX19ST1KPUkrSztpZih0LmFNYXhBZ2dyZWdhdGlvbkxldmVsLmxlbmd0aD4wKXt3aGlsZSh0Lm9EaW1lbnNpb25EZXRhaWxzU2V0W3QuYU1heEFnZ3JlZ2F0aW9uTGV2ZWxbSl1dLmdyb3VwZWQ9PWZhbHNlKXtpZigrK0o9PXQuYU1heEFnZ3JlZ2F0aW9uTGV2ZWwubGVuZ3RoKXticmVha319fXZhciBPPUo+PXQuYU1heEFnZ3JlZ2F0aW9uTGV2ZWwubGVuZ3RoLTE7dmFyIFE9dC5hTWF4QWdncmVnYXRpb25MZXZlbC5zbGljZSgwLEorMSk7SC5zZXRBZ2dyZWdhdGlvbkxldmVsKFEpO2Zvcih2YXIgaT0wO2k8US5sZW5ndGg7aSsrKXt2YXIgVj10Lm9EaW1lbnNpb25EZXRhaWxzU2V0W1FbaV1dO3ZhciBXPShWLmtleVByb3BlcnR5TmFtZSE9dW5kZWZpbmVkKTt2YXIgWD0oVi50ZXh0UHJvcGVydHlOYW1lIT11bmRlZmluZWQpO0guaW5jbHVkZURpbWVuc2lvbktleVRleHRBdHRyaWJ1dGVzKFYubmFtZSx0cnVlLFgsVi5hQXR0cmlidXRlTmFtZSk7aWYoVi5ncm91cGVkKXtILmdldFNvcnRFeHByZXNzaW9uKCkuYWRkU29ydGVyKFFbaV0sby5Tb3J0T3JkZXIuQXNjZW5kaW5nKX19dmFyIFk9SC5nZXRGaWx0ZXJFeHByZXNzaW9uKCk7WS5jbGVhcigpO2lmKHQuYUFwcGxpY2F0aW9uRmlsdGVyKVkuYWRkVUk1RmlsdGVyQ29uZGl0aW9ucyh0LmFBcHBsaWNhdGlvbkZpbHRlcik7aWYodC5hQ29udHJvbEZpbHRlcilZLmFkZFVJNUZpbHRlckNvbmRpdGlvbnModC5hQ29udHJvbEZpbHRlcik7WS5hZGRVSTVGaWx0ZXJDb25kaXRpb25zKHopO3ZhciBaO3ZhciAkO3ZhciBfO3ZhciBhMTt2YXIgYjE9bmV3IEFycmF5KCk7SC5zZXRNZWFzdXJlcyh0LmFNZWFzdXJlTmFtZSk7Zm9yKHZhciBjMSBpbiB0Lm9NZWFzdXJlRGV0YWlsc1NldCl7YTE9dC5vTWVhc3VyZURldGFpbHNTZXRbYzFdO2lmKCFPJiZ0Lm1BbmFseXRpY2FsSW5mb0J5UHJvcGVydHlbYzFdLnRvdGFsPT1mYWxzZSl7Wj1mYWxzZTskPWZhbHNlO189ZmFsc2V9ZWxzZXtaPShhMS5yYXdWYWx1ZVByb3BlcnR5TmFtZSE9dW5kZWZpbmVkKTskPShhMS5mb3JtYXR0ZWRWYWx1ZVByb3BlcnR5TmFtZSE9dW5kZWZpbmVkKTtfPShhMS51bml0UHJvcGVydHlOYW1lIT11bmRlZmluZWQpO2lmKF8pe2lmKGIxLmluZGV4T2YoYTEudW5pdFByb3BlcnR5TmFtZSk9PS0xKXtiMS5wdXNoKGExLnVuaXRQcm9wZXJ0eU5hbWUpfX19SC5pbmNsdWRlTWVhc3VyZVJhd0Zvcm1hdHRlZFZhbHVlVW5pdChhMS5uYW1lLFosJCxfKX1mb3IodmFyIGkgaW4gUSl7dmFyIGQxO2lmKChkMT1iMS5pbmRleE9mKFFbaV0pKSE9LTEpYjEuc3BsaWNlKGQxLDEpfXZhciBlMT1ILmdldFNvcnRFeHByZXNzaW9uKCk7Zm9yKHZhciBpPTA7aTx0LmFTb3J0ZXIubGVuZ3RoO2krKyl7aWYodC5hU29ydGVyW2ldKWUxLmFkZFNvcnRlcih0LmFTb3J0ZXJbaV0uc1BhdGgsdC5hU29ydGVyW2ldLmJEZXNjZW5kaW5nP28uU29ydE9yZGVyLkRlc2NlbmRpbmc6by5Tb3J0T3JkZXIuQXNjZW5kaW5nKX1pZihsPT0wKXEuc2FwLmxvZy5mYXRhbCgidW5oYW5kbGVkIGNhc2U6IGxvYWQgMCBlbnRpdGllcyBvZiBzdWIgZ3JvdXAiKTt2YXIgZjE9cztpZighVSlmMT0wO0guc2V0UmVzdWx0UGFnZUJvdW5kYXJpZXMoZjErMSxmMStsKTtyZXR1cm57aVJlcXVlc3RUeXBlOnIsc1JlcXVlc3RJZDp0Ll9nZXRSZXF1ZXN0SWQoQS5fcmVxdWVzdFR5cGUubGV2ZWxNZW1iZXJzUXVlcnkse2dyb3VwSWQ6ZyxsZXZlbDpMfSksb0FuYWx5dGljYWxRdWVyeVJlcXVlc3Q6SCxpTGV2ZWw6TCxhU2VsZWN0ZWRVbml0UHJvcGVydHlOYW1lOmIxLGFBZ2dyZWdhdGlvbkxldmVsOlEsYklzRmxhdExpc3RSZXF1ZXN0Ok8sYklzTGVhZkdyb3Vwc1JlcXVlc3Q6TyxpU3RhcnRJbmRleDpzLGlMZW5ndGg6bCxiQXZvaWRMZW5ndGhVcGRhdGU6Qn19O3ZhciB0PXRoaXM7dmFyIGI9W107dmFyIFI9W107aWYoRyYmdGhpcy5iVXNlQWNjZWxlcmF0ZWRBdXRvRXhwYW5kKXt2YXIgYz10aGlzLl9nZXRHcm91cElkTGV2ZWwoZykrbisxO3ZhciBkPXQuX2dldEdyb3VwSWRDb21wb25lbnRzKEcuZ3JvdXBJZF9NaXNzaW5nKTt2YXIgZT1kLmxlbmd0aDt2YXIgZj1wKEcsYyk7Zm9yKHZhciBMPTE7TDw9YztMKyspe3ZhciBzO2lmKEw+PWUrMilzPTA7ZWxzZSBpZihMPT1lKzEpcz1HLnN0YXJ0SW5kZXhfTWlzc2luZztlbHNlIGlmKGU+MCl7dmFyIGg7aWYoTD09ZSloPUcuZ3JvdXBJZF9NaXNzaW5nO2Vsc2UgaD10aGlzLl9nZXRHcm91cElkQW5jZXN0b3JzKEcuZ3JvdXBJZF9NaXNzaW5nLC0oZS1MKSlbMF07dmFyIGo9dGhpcy5fZ2V0R3JvdXBJZEFuY2VzdG9ycyhHLmdyb3VwSWRfTWlzc2luZywtKGUtTCsxKSlbMF07aWYoIWopcS5zYXAubG9nLmZhdGFsKCJmYWlsZWQgdG8gZGV0ZXJtaW5lIGdyb3VwIGlkIGF0IHBhcmVudCBsZXZlbDsgZ3JvdXAgSUQgPSAiK2crIiwgbGV2ZWwgPSAiK0wpO3ZhciBzPXRoaXMubUtleVtqXS5pbmRleE9mKHRoaXMubU93bktleVtoXSk7aWYocz09LTEpcS5zYXAubG9nLmZhdGFsKCJmYWlsZWQgdG8gZGV0ZXJtaW5lIHBvc2l0aW9uIG9mIHZhbHVlICIraCsiIGluIGdyb3VwICIraik7cysrfXZhciBrPWw+TD9NYXRoLmNlaWwoKGwtTCkvKGMtTCsxKSk6bDt2YXIgbT1mW0wtMV0/W2ZbTC0xXV06W107dmFyIHU9YShBLl9yZXF1ZXN0VHlwZS5sZXZlbE1lbWJlcnNRdWVyeSxnLEwsbSxzLGssZmFsc2UsZmFsc2UpO2IucHVzaCh1KTtSLnB1c2godGhpcy5fZ2V0UmVxdWVzdElkKEEuX3JlcXVlc3RUeXBlLmxldmVsTWVtYmVyc1F1ZXJ5LHtncm91cElkOmcsbGV2ZWw6TH0pKX19ZWxzZXt2YXIgTT10aGlzLl9nZXRHcm91cElkTGV2ZWwoZykrMTt2YXIgYz1NK247dmFyIG09W107dmFyIHY9dGhpcy5fZ2V0R3JvdXBJZENvbXBvbmVudHMoZyk7Zm9yKHZhciBpPTA7aTx2Lmxlbmd0aDtpKyspbS5wdXNoKG5ldyBzYXAudWkubW9kZWwuRmlsdGVyKHRoaXMuYUFnZ3JlZ2F0aW9uTGV2ZWxbaV0sc2FwLnVpLm1vZGVsLkZpbHRlck9wZXJhdG9yLkVRLHZbaV0pKTt2YXIgdz1mYWxzZTtpZihHKXt2YXIgUD10aGlzLmFBZ2dyZWdhdGlvbkxldmVsW3YubGVuZ3RoXTt2YXIgeD10aGlzLl9nZXRHcm91cElkQ29tcG9uZW50cyhHLmdyb3VwSWRfTWlzc2luZylbdi5sZW5ndGhdO2lmKHgpe3ZhciB5PXRoaXMuX2dldEZpbHRlck9wZXJhdG9yTWF0Y2hpbmdQcm9wZXJ0eVNvcnRPcmRlcihQLHRydWUpO20ucHVzaChuZXcgc2FwLnVpLm1vZGVsLkZpbHRlcihQLHkseCkpO3c9dHJ1ZX19Zm9yKHZhciBMPU07TDw9YztMKyspe3ZhciBrPWw+TD9NYXRoLmNlaWwoKGwtTCkvKGMtTCsxKSk6bDt2YXIgdT1hKEEuX3JlcXVlc3RUeXBlLmxldmVsTWVtYmVyc1F1ZXJ5LGcsTCxtLDAsayxMPT1NP3c6ZmFsc2UsdHJ1ZSk7Yi5wdXNoKHUpO1IucHVzaCh0aGlzLl9nZXRSZXF1ZXN0SWQoQS5fcmVxdWVzdFR5cGUubGV2ZWxNZW1iZXJzUXVlcnkse2dyb3VwSWQ6ZyxsZXZlbDpMfSkpfX1yZXR1cm57aVJlcXVlc3RUeXBlOnIsYVJlcXVlc3RJZDpSLGFHcm91cE1lbWJlcnNBdXRvRXhwYW5zaW9uUmVxdWVzdERldGFpbHM6YixzR3JvdXBJZDpnLGlMZW5ndGg6bH19O0EucHJvdG90eXBlLl9wcmVwYXJlR3JvdXBNZW1iZXJzQXV0b0V4cGFuc2lvblJlcXVlc3RJZHM9ZnVuY3Rpb24oZyxuKXt2YXIgbT10aGlzLl9nZXRHcm91cElkTGV2ZWwoZykrMTt2YXIgYT1tK247dmFyIHI9W107Zm9yKHZhciBsPW07bDw9YTtsKyspe3IucHVzaCh0aGlzLl9nZXRSZXF1ZXN0SWQoQS5fcmVxdWVzdFR5cGUubGV2ZWxNZW1iZXJzUXVlcnkse2dyb3VwSWQ6ZyxsZXZlbDpsfSkpfXJldHVybiByfTtBLnByb3RvdHlwZS5fZ2V0UXVlcnlPRGF0YVJlcXVlc3RPcHRpb25zPWZ1bmN0aW9uKGEpe3ZhciBzPWEuZ2V0VVJJUXVlcnlPcHRpb25WYWx1ZSgiJHNlbGVjdCIpO3ZhciBmPWEuZ2V0VVJJUXVlcnlPcHRpb25WYWx1ZSgiJGZpbHRlciIpO3ZhciBPPWEuZ2V0VVJJUXVlcnlPcHRpb25WYWx1ZSgiJG9yZGVyYnkiKTt2YXIgYj1hLmdldFVSSVF1ZXJ5T3B0aW9uVmFsdWUoIiRza2lwIik7dmFyIHQ9YS5nZXRVUklRdWVyeU9wdGlvblZhbHVlKCIkdG9wIik7dmFyIGk9YS5nZXRVUklRdWVyeU9wdGlvblZhbHVlKCIkaW5saW5lY291bnQiKTtpZih0aGlzLm1QYXJhbWV0ZXJzWyJmaWx0ZXIiXSlmKz0iYW5kICgiK3RoaXMubVBhcmFtZXRlcnNbImZpbHRlciJdKyIpIjt2YXIgcD1bXTtpZihzKXAucHVzaCgiJHNlbGVjdD0iK3MpO2lmKGYpcC5wdXNoKCIkZmlsdGVyPSIrZik7aWYoTylwLnB1c2goIiRvcmRlcmJ5PSIrTyk7aWYoYilwLnB1c2goIiRza2lwPSIrYik7aWYodClwLnB1c2goIiR0b3A9Iit0KTtpZihpKXAucHVzaCgiJGlubGluZWNvdW50PSIraSk7cmV0dXJuIHB9O0EucHJvdG90eXBlLl9leGVjdXRlQmF0Y2hSZXF1ZXN0PWZ1bmN0aW9uKHIpe3ZhciBjPXRoaXMuaUFuYWx5dGljYWxJbmZvVmVyc2lvbk51bWJlcjt2YXIgdD10aGlzO3ZhciBiPVtdLGU9W107Zm9yKHZhciBpPS0xLFI7Uj1yWysraV07KXt2YXIgYT1SLm9BbmFseXRpY2FsUXVlcnlSZXF1ZXN0LGc9Ui5zR3JvdXBJZDtpZihhLmdldFVSSVF1ZXJ5T3B0aW9uVmFsdWUoIiRzZWxlY3QiKT09bnVsbCl7dGhpcy5maXJlRGF0YVJlcXVlc3RlZCgpO3ZhciBFPXRoaXMuZ2V0TW9kZWwoKS5nZXRDb250ZXh0KCIvYXJ0aWZpY2lhbFJvb3RDb250ZW50Iik7Zz1udWxsO3RoaXMubUxlbmd0aFtnXT0xO3RoaXMubUZpbmFsTGVuZ3RoW2ddPXRydWU7dGhpcy5tS2V5W2ddPVsiYXJ0aWZpY2lhbFJvb3RDb250ZW50Il07dGhpcy5iTmVlZHNVcGRhdGU9dHJ1ZTt2YXIgdD10aGlzO2lmKHIubGVuZ3RoPT0xKXtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dC5maXJlRGF0YVJlY2VpdmVkKCl9KX10aGlzLmJBcnRpZmljYWxSb290Q29udGV4dD10cnVlO2NvbnRpbnVlfXZhciBwPWEuZ2V0VVJJVG9RdWVyeVJlc3VsdEVudHJpZXMoKTtpZihwLmluZGV4T2YoIi8iKT09MClwPXAuc3Vic3RyaW5nKDEpO2lmKCF0aGlzLl9pc1JlcXVlc3RQZW5kaW5nKFIuc1JlcXVlc3RJZCkpe3RoaXMuX3JlZ2lzdGVyTmV3UmVxdWVzdChSLnNSZXF1ZXN0SWQpO2IucHVzaCh0aGlzLm9Nb2RlbC5jcmVhdGVCYXRjaE9wZXJhdGlvbihwLnJlcGxhY2UoL1wgL2csIiUyMCIpLCJHRVQiKSk7ZS5wdXNoKFIpfX1xLnNhcC5sb2cuZGVidWcoIkFuYWx5dGljYWxCaW5kaW5nOiBleGVjdXRpbmcgYmF0Y2ggcmVxdWVzdCB3aXRoICIrZS5sZW5ndGgrIiBvcGVyYXRpb25zIik7dmFyIGQ9dGhpcy5fZ2V0SWRGb3JOZXdSZXF1ZXN0SGFuZGxlKCk7aWYoYi5sZW5ndGg+MCl7dGhpcy5vTW9kZWwuYWRkQmF0Y2hSZWFkT3BlcmF0aW9ucyhiKTt0aGlzLmZpcmVEYXRhUmVxdWVzdGVkKCk7dmFyIGY9dGhpcy5vTW9kZWwuc3VibWl0QmF0Y2gocyxoLHRydWUsdHJ1ZSk7dGhpcy5vTW9kZWwuZmlyZVJlcXVlc3RTZW50KHt1cmw6dGhpcy5vTW9kZWwuc1NlcnZpY2VVcmwrIi8kYmF0Y2giLHR5cGU6IlBPU1QiLGFzeW5jOnRydWUsaW5mbzoiIixpbmZvT2JqZWN0Ont9fSk7dGhpcy5fcmVnaXN0ZXJOZXdSZXF1ZXN0SGFuZGxlKGQsZil9ZnVuY3Rpb24gcyhELGope3QuX2RlcmVnaXN0ZXJIYW5kbGVPZkNvbXBsZXRlZFJlcXVlc3QoZCk7aWYoZS5sZW5ndGghPUQuX19iYXRjaFJlc3BvbnNlcy5sZW5ndGgpcS5zYXAubG9nLmZhdGFsKCJhc3NlcnRpb24gZmFpbGVkOiByZWNlaXZlZCAiK0QuX19iYXRjaFJlc3BvbnNlcy5sZW5ndGgrIiByZXNwb25zZXMgZm9yICIrZS5sZW5ndGgrIiByZWFkIG9wZXJhdGlvbnMgaW4gdGhlIGJhdGNoIHJlcXVlc3QiKTtpZihjIT10LmlBbmFseXRpY2FsSW5mb1ZlcnNpb25OdW1iZXIpe2Zvcih2YXIgaT0tMSxrO2s9ZVsrK2ldLnNSZXF1ZXN0SWQ7KXt0Ll9kZXJlZ2lzdGVyQ29tcGxldGVkUmVxdWVzdChrKTt0Ll9jbGVhbnVwR3JvdXBpbmdGb3JDb21wbGV0ZWRSZXF1ZXN0KGspfXJldHVybn1mb3IodmFyIGk9MDtpPEQuX19iYXRjaFJlc3BvbnNlcy5sZW5ndGg7aSsrKXtpZihELl9fYmF0Y2hSZXNwb25zZXNbaV0uZGF0YSE9dW5kZWZpbmVkKXtzd2l0Y2goZVtpXS5pUmVxdWVzdFR5cGUpe2Nhc2UgQS5fcmVxdWVzdFR5cGUuZ3JvdXBNZW1iZXJzUXVlcnk6dC5fcHJvY2Vzc0dyb3VwTWVtYmVyc1F1ZXJ5UmVzcG9uc2UoZVtpXSxELl9fYmF0Y2hSZXNwb25zZXNbaV0uZGF0YSk7YnJlYWs7Y2FzZSBBLl9yZXF1ZXN0VHlwZS50b3RhbFNpemVRdWVyeTp0Ll9wcm9jZXNzVG90YWxTaXplUXVlcnlSZXNwb25zZShlW2ldLEQuX19iYXRjaFJlc3BvbnNlc1tpXS5kYXRhKTticmVhaztjYXNlIEEuX3JlcXVlc3RUeXBlLmxldmVsTWVtYmVyc1F1ZXJ5OnQuX3Byb2Nlc3NMZXZlbE1lbWJlcnNRdWVyeVJlc3BvbnNlKGVbaV0sRC5fX2JhdGNoUmVzcG9uc2VzW2ldLmRhdGEpO2JyZWFrO2RlZmF1bHQ6cS5zYXAubG9nLmZhdGFsKCJpbnZhbGlkIHJlcXVlc3QgdHlwZSAiK2VbaV0uaVJlcXVlc3RUeXBlKTtjb250aW51ZX19dC5fZGVyZWdpc3RlckNvbXBsZXRlZFJlcXVlc3QoZVtpXS5zUmVxdWVzdElkKTt0Ll9jbGVhbnVwR3JvdXBpbmdGb3JDb21wbGV0ZWRSZXF1ZXN0KGVbaV0uc1JlcXVlc3RJZCl9dmFyIE89dHJ1ZTt2YXIgQj10Lm9Nb2RlbC5fZ2V0QmF0Y2hFcnJvcnMoRCk7aWYoQi5sZW5ndGg+MClPPWZhbHNlO3Qub01vZGVsLmZpcmVSZXF1ZXN0Q29tcGxldGVkKHt1cmw6ai5yZXF1ZXN0VXJpLHR5cGU6IlBPU1QiLGFzeW5jOnRydWUsaW5mbzoiIixpbmZvT2JqZWN0Ont9LHN1Y2Nlc3M6TyxlcnJvcm9iamVjdDpPP3t9OnQub01vZGVsLl9oYW5kbGVFcnJvcihCWzBdKX0pO2lmKE8pe3Qub01vZGVsLmNoZWNrVXBkYXRlKCl9dC5maXJlRGF0YVJlY2VpdmVkKCl9ZnVuY3Rpb24gaChqKXt0Ll9kZXJlZ2lzdGVySGFuZGxlT2ZDb21wbGV0ZWRSZXF1ZXN0KGQpO2Zvcih2YXIgaT0tMSxrO2s9ZVsrK2ldOyl7dC5fZGVyZWdpc3RlckNvbXBsZXRlZFJlcXVlc3Qoay5zUmVxdWVzdElkKTt0Ll9jbGVhbnVwR3JvdXBpbmdGb3JDb21wbGV0ZWRSZXF1ZXN0KGsuc1JlcXVlc3RJZCl9aWYoYyE9dC5pQW5hbHl0aWNhbEluZm9WZXJzaW9uTnVtYmVyKXtyZXR1cm59dC5vTW9kZWwuZmlyZVJlcXVlc3RDb21wbGV0ZWQoe3VybDoiIix0eXBlOiJQT1NUIixhc3luYzp0cnVlLGluZm86IiIsaW5mb09iamVjdDp7fSxzdWNjZXNzOmZhbHNlLGVycm9yb2JqZWN0OnQub01vZGVsLl9oYW5kbGVFcnJvcihqKX0pO3Qub01vZGVsLmZpcmVSZXF1ZXN0RmFpbGVkKHQub01vZGVsLl9oYW5kbGVFcnJvcihqKSk7dC5maXJlRGF0YVJlY2VpdmVkKCl9fTtBLnByb3RvdHlwZS5fZXhlY3V0ZVF1ZXJ5UmVxdWVzdD1mdW5jdGlvbihyKXtpZihyLmlSZXF1ZXN0VHlwZT09QS5fcmVxdWVzdFR5cGUuZ3JvdXBNZW1iZXJzQXV0b0V4cGFuc2lvblF1ZXJ5KXtmb3IodmFyIGk9LTEsYTthPXIuYUdyb3VwTWVtYmVyc0F1dG9FeHBhbnNpb25SZXF1ZXN0RGV0YWlsc1srK2ldOyl7dGhpcy5fZXhlY3V0ZVF1ZXJ5UmVxdWVzdChhKX1yZXR1cm59dmFyIGM9dGhpcy5pQW5hbHl0aWNhbEluZm9WZXJzaW9uTnVtYmVyO3ZhciBhPXIub0FuYWx5dGljYWxRdWVyeVJlcXVlc3QsZz1yLnNHcm91cElkO3ZhciBwPWEuZ2V0VVJJVG9RdWVyeVJlc3VsdEVudGl0eVNldCgpO3ZhciBQPXRoaXMuX2dldFF1ZXJ5T0RhdGFSZXF1ZXN0T3B0aW9ucyhhKTt2YXIgdD10aGlzO2lmKGEuZ2V0VVJJUXVlcnlPcHRpb25WYWx1ZSgiJHNlbGVjdCIpPT1udWxsKXt0aGlzLmZpcmVEYXRhUmVxdWVzdGVkKCk7dmFyIGU9dGhpcy5nZXRNb2RlbCgpLmdldENvbnRleHQoIi9hcnRpZmljaWFsUm9vdENvbnRlbnQiKTtnPW51bGw7dGhpcy5tTGVuZ3RoW2ddPTE7dGhpcy5tRmluYWxMZW5ndGhbZ109dHJ1ZTt0aGlzLm1LZXlbZ109WyJhcnRpZmljaWFsUm9vdENvbnRlbnQiXTt0aGlzLmJOZWVkc1VwZGF0ZT10cnVlO3ZhciB0PXRoaXM7c2V0VGltZW91dChmdW5jdGlvbigpe2lmKHQuX2NsZWFudXBHcm91cGluZ0ZvckNvbXBsZXRlZFJlcXVlc3Qoci5zUmVxdWVzdElkKSl0LmZpcmVEYXRhUmVjZWl2ZWQoKX0pO3RoaXMuYkFydGlmaWNhbFJvb3RDb250ZXh0PXRydWU7cmV0dXJufXRoaXMuX3JlZ2lzdGVyTmV3UmVxdWVzdChyLnNSZXF1ZXN0SWQpO3RoaXMuZmlyZURhdGFSZXF1ZXN0ZWQoKTtmb3IodmFyIGk9MDtpPFAubGVuZ3RoO2krKylQW2ldPVBbaV0ucmVwbGFjZSgvXCAvZywiJTIwIik7cS5zYXAubG9nLmRlYnVnKCJBbmFseXRpY2FsQmluZGluZzogZXhlY3V0aW5nIHF1ZXJ5IHJlcXVlc3QiKTt2YXIgUj10aGlzLl9nZXRJZEZvck5ld1JlcXVlc3RIYW5kbGUoKTt0aGlzLm9Nb2RlbC5fbG9hZERhdGEocCxQLHMsRSxmYWxzZSx1LGYpO2Z1bmN0aW9uIHMoZCl7dC5fZGVyZWdpc3RlckhhbmRsZU9mQ29tcGxldGVkUmVxdWVzdChSKTtpZihjIT10LmlBbmFseXRpY2FsSW5mb1ZlcnNpb25OdW1iZXIpe3QuX2RlcmVnaXN0ZXJDb21wbGV0ZWRSZXF1ZXN0KHIuc1JlcXVlc3RJZCk7cmV0dXJufXN3aXRjaChyLmlSZXF1ZXN0VHlwZSl7Y2FzZSBBLl9yZXF1ZXN0VHlwZS5ncm91cE1lbWJlcnNRdWVyeTp0Ll9wcm9jZXNzR3JvdXBNZW1iZXJzUXVlcnlSZXNwb25zZShyLGQpO2JyZWFrO2Nhc2UgQS5fcmVxdWVzdFR5cGUudG90YWxTaXplUXVlcnk6dC5fcHJvY2Vzc1RvdGFsU2l6ZVF1ZXJ5UmVzcG9uc2UocixkKTticmVhaztjYXNlIEEuX3JlcXVlc3RUeXBlLmxldmVsTWVtYmVyc1F1ZXJ5OnQuX3Byb2Nlc3NMZXZlbE1lbWJlcnNRdWVyeVJlc3BvbnNlKHIsZCk7YnJlYWs7ZGVmYXVsdDpxLnNhcC5sb2cuZmF0YWwoImludmFsaWQgcmVxdWVzdCB0eXBlICIrci5pUmVxdWVzdFR5cGUpO2JyZWFrfXQuX2RlcmVnaXN0ZXJDb21wbGV0ZWRSZXF1ZXN0KHIuc1JlcXVlc3RJZCl9ZnVuY3Rpb24gZigpe2lmKGMhPXQuaUFuYWx5dGljYWxJbmZvVmVyc2lvbk51bWJlcil7cmV0dXJufWlmKHQuX2NsZWFudXBHcm91cGluZ0ZvckNvbXBsZXRlZFJlcXVlc3Qoci5zUmVxdWVzdElkKSl0LmZpcmVEYXRhUmVjZWl2ZWQoKX1mdW5jdGlvbiBFKGQpe3QuX2RlcmVnaXN0ZXJIYW5kbGVPZkNvbXBsZXRlZFJlcXVlc3QoUik7dC5fZGVyZWdpc3RlckNvbXBsZXRlZFJlcXVlc3Qoci5zUmVxdWVzdElkKTt0Ll9jbGVhbnVwR3JvdXBpbmdGb3JDb21wbGV0ZWRSZXF1ZXN0KHIuc1JlcXVlc3RJZCk7aWYoYyE9dC5pQW5hbHl0aWNhbEluZm9WZXJzaW9uTnVtYmVyKXtyZXR1cm59dC5maXJlRGF0YVJlY2VpdmVkKCl9ZnVuY3Rpb24gdShiKXt0Ll9yZWdpc3Rlck5ld1JlcXVlc3RIYW5kbGUoUixiKX19O0EucHJvdG90eXBlLl9hYm9ydEFsbFBlbmRpbmdSZXF1ZXN0cz1mdW5jdGlvbigpe3RoaXMuX2Fib3J0QWxsUGVuZGluZ1JlcXVlc3RzQnlIYW5kbGUoKTt0aGlzLl9jbGVhckFsbFBlbmRpbmdSZXF1ZXN0cygpfTtBLnByb3RvdHlwZS5fcHJvY2Vzc0dyb3VwTWVtYmVyc1F1ZXJ5UmVzcG9uc2U9ZnVuY3Rpb24ocixkKXt2YXIgZz1yLnNHcm91cElkLHM9ci5hU2VsZWN0ZWRVbml0UHJvcGVydHlOYW1lLGE9ci5hQWdncmVnYXRpb25MZXZlbCxiPXIuaVN0YXJ0SW5kZXgsbD1yLmlMZW5ndGgsRz1nPT1udWxsPzA6dGhpcy5fZ2V0R3JvdXBJZExldmVsKGcpKzE7aWYoIXRoaXMubUtleVtnXSl0aGlzLm1LZXlbZ109W107dmFyIEs9dGhpcy5tS2V5W2ddO3ZhciBjPWI7dmFyIHU9KHMubGVuZ3RoPjApO3ZhciBwPW51bGwsRD1udWxsO3ZhciBmPS0xO3ZhciBlPTA7dmFyIGg9bnVsbDtmb3IodmFyIGk9MDtpPGQucmVzdWx0cy5sZW5ndGg7aSsrKXt2YXIgRT1kLnJlc3VsdHNbaV07aWYodSl7RD0iIjtmb3IodmFyIGo9MDtqPGEubGVuZ3RoO2orKyl7RCs9RVthW2pdXSsifCJ9aWYocD09RCl7aWYoZj09LTEpZj1pLTE7dmFyIG09LTEsUD1kLnJlc3VsdHNbaS0xXTtmb3IodmFyIGs9MDtrPHMubGVuZ3RoO2srKyl7aWYoUFtzW2tdXSE9RVtzW2tdXSl7bT1rO2JyZWFrfX1pZihtPT0tMSlxLnNhcC5sb2cuZmF0YWwoImFzc2VydGlvbiBmYWlsZWQ6IG5vIGRldmlhdGluZyB1bml0cyBmb3VuZCBmb3IgcmVzdWx0IGVudHJpZXMgIisoaS0xKSsiIGFuZCAiK2kpfWlmKChwIT1EfHxpPT1kLnJlc3VsdHMubGVuZ3RoLTEpJiZmIT0tMSl7dmFyIE09cS5leHRlbmQodHJ1ZSx7fSxkLnJlc3VsdHNbZl0pO3ZhciBuPXRoaXMub01vZGVsLl9nZXRPYmplY3QoIi8iK3RoaXMub01vZGVsLl9nZXRLZXkoZC5yZXN1bHRzW2ZdKSk7Zm9yKHZhciBrPTA7azxzLmxlbmd0aDtrKyspTVtzW2tdXT0iKiI7Zm9yKHZhciB0IGluIHRoaXMub01lYXN1cmVEZXRhaWxzU2V0KXt2YXIgdj10aGlzLm9NZWFzdXJlRGV0YWlsc1NldFt0XTtpZighci5iSXNGbGF0TGlzdFJlcXVlc3QmJiF0aGlzLm1BbmFseXRpY2FsSW5mb0J5UHJvcGVydHlbdF0udG90YWwpe2lmKHYucmF3VmFsdWVQcm9wZXJ0eU5hbWUhPXVuZGVmaW5lZClNW3YucmF3VmFsdWVQcm9wZXJ0eU5hbWVdPXVuZGVmaW5lZDtpZih2LmZvcm1hdHRlZFZhbHVlUHJvcGVydHlOYW1lIT11bmRlZmluZWQpTVt2LmZvcm1hdHRlZFZhbHVlUHJvcGVydHlOYW1lXT11bmRlZmluZWR9ZWxzZXtpZih2LnJhd1ZhbHVlUHJvcGVydHlOYW1lIT11bmRlZmluZWQpTVt2LnJhd1ZhbHVlUHJvcGVydHlOYW1lXT1udWxsO2lmKHYuZm9ybWF0dGVkVmFsdWVQcm9wZXJ0eU5hbWUhPXVuZGVmaW5lZClNW3YuZm9ybWF0dGVkVmFsdWVQcm9wZXJ0eU5hbWVdPSIqIn19dmFyIHc9IiI7aWYoaD09bnVsbCloPXRoaXMub0FuYWx5dGljYWxRdWVyeVJlc3VsdC5nZXRBbGxEaW1lbnNpb25OYW1lcygpLmNvbmNhdChbXSkuc29ydCgpO2Zvcih2YXIgaz0wO2s8aC5sZW5ndGg7aysrKXt2YXIgeD1NW2hba11dO3crPSh4PT09dW5kZWZpbmVkPyIiOngpKyIsIn1NLl9fbWV0YWRhdGEudXJpPXcrIi1tdWx0aXBsZS11bml0cy1ub3QtZGVyZWZlcmVuY2FibGUiO2RlbGV0ZSBNLl9fbWV0YWRhdGFbInNlbGYiXTtkZWxldGUgTS5fX21ldGFkYXRhWyJzZWxmX2xpbmtfZXh0ZW5zaW9ucyJdO01bIl5+dm9sYXRpbGUiXT10cnVlO3RoaXMub01vZGVsLl9pbXBvcnREYXRhKE0se30pO3ZhciB5PXRoaXMub01vZGVsLl9nZXRLZXkoTSk7dGhpcy5vTW9kZWwuZ2V0Q29udGV4dCgnLycreSlbIl92b2xhdGlsZSJdPXRydWU7S1tjLTFdPXk7aWYoaT09ZC5yZXN1bHRzLmxlbmd0aC0xJiZwPT1EKWUrPWktZjtlbHNlIGUrPWktZi0xO2Y9LTE7aWYocCE9RClLW2MrK109dGhpcy5vTW9kZWwuX2dldEtleShFKX1lbHNlIGlmKHAhPUQpS1tjKytdPXRoaXMub01vZGVsLl9nZXRLZXkoRSk7cD1EfWVsc2UgS1tjKytdPXRoaXMub01vZGVsLl9nZXRLZXkoRSk7aWYoIXIuYklzTGVhZkdyb3Vwc1JlcXVlc3Qpe3ZhciB6PXRoaXMuX2dldEdyb3VwSWRGcm9tQ29udGV4dCh0aGlzLm9Nb2RlbC5nZXRDb250ZXh0KCcvJytLW2MtMV0pLEcpO3RoaXMubU93bktleVt6XT1LW2MtMV19fWlmKCFyLmJBdm9pZExlbmd0aFVwZGF0ZSl7aWYoZC5fX2NvdW50KXt0aGlzLm1MZW5ndGhbZ109cGFyc2VJbnQoZC5fX2NvdW50LDEwKS1lO3RoaXMubUZpbmFsTGVuZ3RoW2ddPXRydWU7aWYoci5iSXNGbGF0TGlzdFJlcXVlc3QpdGhpcy5pVG90YWxTaXplPWQuX19jb3VudH1pZih0aGlzLm1MZW5ndGhbZ108YitkLnJlc3VsdHMubGVuZ3RoKXt0aGlzLm1MZW5ndGhbZ109YisoZC5yZXN1bHRzLmxlbmd0aC1lKTt0aGlzLm1GaW5hbExlbmd0aFtnXT1mYWxzZX1pZigoZC5yZXN1bHRzLmxlbmd0aC1lKTxsfHxsPT09dW5kZWZpbmVkKXt0aGlzLm1MZW5ndGhbZ109YisoZC5yZXN1bHRzLmxlbmd0aC1lKTt0aGlzLm1GaW5hbExlbmd0aFtnXT10cnVlfWlmKGQucmVzdWx0cy5sZW5ndGg9PTApe3RoaXMubUxlbmd0aFtnXT0wO3RoaXMubUZpbmFsTGVuZ3RoW2ddPXRydWV9fXRoaXMuYk5lZWRzVXBkYXRlPXRydWV9O0EucHJvdG90eXBlLl9wcm9jZXNzVG90YWxTaXplUXVlcnlSZXNwb25zZT1mdW5jdGlvbihyLGQpe3ZhciBhPXIub0FuYWx5dGljYWxRdWVyeVJlcXVlc3Q7aWYoZC5fX2NvdW50PT11bmRlZmluZWQpe3Euc2FwLmxvZy5mYXRhbCgibWlzc2luZyBlbnRpdHkgY291bnQgaW4gcXVlcnkgcmVzdWx0Iik7cmV0dXJufXRoaXMuaVRvdGFsU2l6ZT1kLl9fY291bnR9O0EucHJvdG90eXBlLl9wcm9jZXNzTGV2ZWxNZW1iZXJzUXVlcnlSZXNwb25zZT1mdW5jdGlvbihyLGQpe3ZhciBwPWZ1bmN0aW9uKGMsSSl7dmFyIGc9e2lSZXF1ZXN0VHlwZTpBLl9yZXF1ZXN0VHlwZS5ncm91cE1lbWJlcnNRdWVyeSxzUmVxdWVzdElkOnQuX2dldFJlcXVlc3RJZChBLl9yZXF1ZXN0VHlwZS5ncm91cE1lbWJlcnNRdWVyeSx7Z3JvdXBJZDpQfSksb0FuYWx5dGljYWxRdWVyeVJlcXVlc3Q6ci5vQW5hbHl0aWNhbFF1ZXJ5UmVxdWVzdCxzR3JvdXBJZDpQLGFTZWxlY3RlZFVuaXRQcm9wZXJ0eU5hbWU6ci5hU2VsZWN0ZWRVbml0UHJvcGVydHlOYW1lLGFBZ2dyZWdhdGlvbkxldmVsOnIuYUFnZ3JlZ2F0aW9uTGV2ZWwsYklzRmxhdExpc3RSZXF1ZXN0OnIuYklzRmxhdExpc3RSZXF1ZXN0LGJJc0xlYWZHcm91cHNSZXF1ZXN0OnIuYklzTGVhZkdyb3Vwc1JlcXVlc3QsaVN0YXJ0SW5kZXg6Yz9yLmlTdGFydEluZGV4OjAsaUxlbmd0aDpyLmlMZW5ndGgsYkF2b2lkTGVuZ3RoVXBkYXRlOnIuYkF2b2lkTGVuZ3RoVXBkYXRlfTtpZihjJiZyLmlTdGFydEluZGV4PjAmJih0Lm1LZXlbZy5zR3JvdXBJZF09PT11bmRlZmluZWR8fHQubUtleVtnLnNHcm91cElkXVtyLmlTdGFydEluZGV4LTFdPT09dW5kZWZpbmVkKSl7dmFyIHM9dC5fZ2V0UGFyZW50R3JvdXBJZChnLnNHcm91cElkKTt2YXIgaD10Lm1LZXlbc10uaW5kZXhPZih0Lm1Pd25LZXlbZy5zR3JvdXBJZF0pO2lmKGg9PS0xKXEuc2FwLmxvZy5mYXRhbCgiYXNzZXJ0aW9uIGZhaWxlZDogZmFpbGVkIHRvIGRldGVybWluZSBwb3NpdGlvbiBvZiAiK2cuc0dyb3VwSWQrIiBpbiBncm91cCAiK3MpO2lmKGg+MCYmdC5tS2V5W3NdW2gtMV0hPT11bmRlZmluZWQpe3ZhciBqPXQubUtleVtzXVtoLTFdO3ZhciBrPXQuX2dldEdyb3VwSWRGcm9tQ29udGV4dCh0Lm9Nb2RlbC5nZXRDb250ZXh0KCcvJytqKSx0Ll9nZXRHcm91cElkTGV2ZWwoZy5zR3JvdXBJZCkpO3QubUZpbmFsTGVuZ3RoW2tdPXRydWU7Zy5pU3RhcnRJbmRleD0wfX1pZihJKXtnLmlMZW5ndGg9MDt0Lm1MZW5ndGhbZy5zR3JvdXBJZF09MH12YXIgbD1xLmV4dGVuZCh0cnVlLHt9LGQpO2wucmVzdWx0cz1iO3QuX3Byb2Nlc3NHcm91cE1lbWJlcnNRdWVyeVJlc3BvbnNlKGcsbCl9O3ZhciBhPXIub0FuYWx5dGljYWxRdWVyeVJlcXVlc3QsdD10aGlzO2lmKGQucmVzdWx0cy5sZW5ndGg9PTApcmV0dXJuO3ZhciBQPXRoaXMuX2dldEdyb3VwSWRGcm9tQ29udGV4dCh0aGlzLm9Nb2RlbC5nZXRDb250ZXh0KCIvIit0aGlzLm9Nb2RlbC5fZ2V0S2V5KGQucmVzdWx0c1swXSkpLHIuaUxldmVsLTEpO3ZhciBiPVtdO3ZhciBjPXRydWU7Zm9yKHZhciBpPTA7aTxkLnJlc3VsdHMubGVuZ3RoO2krKyl7dmFyIGU9ZC5yZXN1bHRzW2ldO3ZhciBmPXRoaXMub01vZGVsLmdldENvbnRleHQoIi8iK3RoaXMub01vZGVsLl9nZXRLZXkoZC5yZXN1bHRzW2ldKSk7dmFyIHM9dGhpcy5fZ2V0R3JvdXBJZEZyb21Db250ZXh0KGYsci5pTGV2ZWwtMSk7aWYoUD09cyl7Yi5wdXNoKGUpO2lmKGk8ZC5yZXN1bHRzLmxlbmd0aC0xKWNvbnRpbnVlfXAoYyxkLnJlc3VsdHMubGVuZ3RoPT1yLmlMZW5ndGgmJmk9PWQucmVzdWx0cy5sZW5ndGgtMSk7Yz1mYWxzZTtpZihQIT1zKWI9W2VdO1A9c31pZihiLmxlbmd0aD09MSlwKGMsZC5yZXN1bHRzLmxlbmd0aD09ci5pTGVuZ3RoKX07QS5wcm90b3R5cGUuX2dldExvYWRlZENvbnRleHRzRm9yR3JvdXA9ZnVuY3Rpb24oZyxzLGwpe3ZhciBjPVtdLGEsaz10aGlzLm1LZXlbZ10sSztpZighaylyZXR1cm4gYztpZighcylzPTA7aWYoIWwpe2w9dGhpcy5vTW9kZWwuaVNpemVMaW1pdDtpZih0aGlzLm1GaW5hbExlbmd0aFtnXSYmdGhpcy5tTGVuZ3RoW2ddPGwpbD10aGlzLm1MZW5ndGhbZ119Zm9yKHZhciBpPXM7aTxzK2w7aSsrKXtLPWtbaV07aWYoIUspe2JyZWFrfWE9dGhpcy5vTW9kZWwuZ2V0Q29udGV4dCgnLycrSyk7Yy5wdXNoKGEpfXJldHVybiBjfTtBLnByb3RvdHlwZS5fY2FsY3VsYXRlUmVxdWlyZWRHcm91cFNlY3Rpb249ZnVuY3Rpb24oZyxzLGwsdCxjKXt2YXIgTD1mYWxzZSxhLGIscCxQLHIsZD17fSxrPXRoaXMubUtleVtnXSxLO2I9czthPTA7aWYoIWspe1A9cztwPXMrbH1lbHNle2Zvcih2YXIgaT1zLTE7aT49TWF0aC5tYXgocy10LDApO2ktLSl7Sz1rW2ldO2lmKCFLKXtQPWkrMTticmVha319Zm9yKHZhciBqPXMrbDtqPHMrbCt0O2orKyl7Sz1rW2pdO2lmKCFLKXtwPWo7YnJlYWt9fX1yPXMtUDtpZihQJiZzPnQmJnI8dCl7aWYoYy5sZW5ndGghPWwpYj1zLXQ7ZWxzZSBiPVAtdDthPXR9aWYoYj09cyliKz1jLmxlbmd0aDtpZihjLmxlbmd0aCE9bClhKz1sLWMubGVuZ3RoO3I9cC1zLWw7aWYocj09MClhKz10O2lmKHAmJnI8dCYmcj4wKXtpZihiPj1zKXtiPXA7YSs9dH19aWYodGhpcy5tRmluYWxMZW5ndGhbZ10mJnRoaXMubUxlbmd0aFtnXTwoYStiKSlhPXRoaXMubUxlbmd0aFtnXS1iO2Quc3RhcnRJbmRleD1iO2QubGVuZ3RoPWE7cmV0dXJuIGR9O0EucHJvdG90eXBlLl9jYWxjdWxhdGVSZXF1aXJlZEdyb3VwRXhwYW5zaW9uPWZ1bmN0aW9uKGcsYSxzLGwpe3ZhciBuPXtncm91cElkX01pc3Npbmc6bnVsbCxsZW5ndGhfTWlzc2luZzowfTt2YXIgYz1mdW5jdGlvbihnLGEscyxsKXt2YXIgTD10Ll9nZXRHcm91cElkTGV2ZWwoZyk7aWYoTD09YSl7dmFyIGo9dC5fZ2V0TG9hZGVkQ29udGV4dHNGb3JHcm91cChnLHMsbCk7dmFyIGs9cytqLmxlbmd0aC0xO2lmKGoubGVuZ3RoPj1sKXJldHVybiBuO2Vsc2V7aWYodC5tRmluYWxMZW5ndGhbZ10pe2lmKGoubGVuZ3RoPj10Lm1MZW5ndGhbZ10pcmV0dXJue2dyb3VwSWRfTWlzc2luZzpudWxsLGxlbmd0aF9NaXNzaW5nOmwtai5sZW5ndGh9O2Vsc2UgcmV0dXJue2dyb3VwSWRfTWlzc2luZzpnLHN0YXJ0SW5kZXhfTWlzc2luZzprKzEsbGVuZ3RoX01pc3Npbmc6bC1qLmxlbmd0aH19ZWxzZSByZXR1cm57Z3JvdXBJZF9NaXNzaW5nOmcsc3RhcnRJbmRleF9NaXNzaW5nOmsrMSxsZW5ndGhfTWlzc2luZzpsLWoubGVuZ3RofX19dmFyIGo9dC5fZ2V0TG9hZGVkQ29udGV4dHNGb3JHcm91cChnLHMsbCk7dmFyIGI9bCxrPXMrai5sZW5ndGgtMTtmb3IodmFyIGk9LTEsbTttPWpbKytpXTspe2ItLTt2YXIgRz1jKHQuX2dldEdyb3VwSWRGcm9tQ29udGV4dChtLEwrMSksYSwwLGIpO2lmKEcuZ3JvdXBJZF9NaXNzaW5nPT1udWxsKXtpZihHLmxlbmd0aF9NaXNzaW5nPT0wKXJldHVybiBHO2Vsc2UgYj1HLmxlbmd0aF9NaXNzaW5nfWVsc2V7cmV0dXJuIEd9aWYoYj09MClicmVha31pZih0Lm1GaW5hbExlbmd0aFtnXXx8Yj09MClyZXR1cm57Z3JvdXBJZF9NaXNzaW5nOm51bGwsbGVuZ3RoX01pc3Npbmc6Yn07ZWxzZSByZXR1cm57Z3JvdXBJZF9NaXNzaW5nOmcsc3RhcnRJbmRleF9NaXNzaW5nOmsrMSxsZW5ndGhfTWlzc2luZzpifX07dmFyIHQ9dGhpczt2YXIgTD10aGlzLl9nZXRHcm91cElkTGV2ZWwoZyk7aWYoTD09YSsxKXtnPXRoaXMuX2dldFBhcmVudEdyb3VwSWQoZyk7LS1MfWlmKGc9PW51bGx8fEw+YSlyZXR1cm4gbjt2YXIgYj1sLGQ9czt3aGlsZShnIT1udWxsKXt2YXIgRz1jKGcsYSxkLGIpO2lmKEcuZ3JvdXBJZF9NaXNzaW5nIT1udWxsKXJldHVybiBHO2Vsc2UgaWYoRy5sZW5ndGhfTWlzc2luZz09MClyZXR1cm4gRztlbHNle3ZhciBmPWZhbHNlO3doaWxlKCFmKXt2YXIgcD10aGlzLl9nZXRQYXJlbnRHcm91cElkKGcpO2lmKHA9PW51bGwpe2c9cDstLUw7YnJlYWt9dmFyIGU9dGhpcy5tT3duS2V5W2ddO2lmKCFlKXtxLnNhcC5sb2cuZmF0YWwoImFzc2VydGlvbiBmYWlsZWQ6IGVudGl0eWtleSBmb3IgZ3JvdXAgdy8gSUQgIitnKyIgbm90IGF2YWlsYWJsZSIpO3JldHVybiBufXZhciBoPXRoaXMubUtleVtwXS5pbmRleE9mKGUpO2lmKGg9PS0xKXtxLnNhcC5sb2cuZmF0YWwoImFzc2VydGlvbiBmYWlsZWQ6IGdyb3VwIHcvIElEICIrZysiIG5vdCBmb3VuZCBpbiBtZW1iZXJzIG9mIHBhcmVudCB3LyBJRCAiK3ApO3JldHVybiBufWlmKGg9PXRoaXMubUtleVtwXS5sZW5ndGgtMSl7aWYodGhpcy5tRmluYWxMZW5ndGhbcF0pe2c9cDstLUw7Y29udGludWV9ZWxzZXtyZXR1cm57Z3JvdXBJZF9NaXNzaW5nOnAsc3RhcnRJbmRleF9NaXNzaW5nOmgrMSxsZW5ndGhfTWlzc2luZzpifX19ZWxzZXtlPXRoaXMubUtleVtwXVtoKzFdO2c9dGhpcy5fZ2V0R3JvdXBJZEZyb21Db250ZXh0KHRoaXMub01vZGVsLmdldENvbnRleHQoJy8nK2UpLEwpO2Y9dHJ1ZX19ZD0wO2I9Ry5sZW5ndGhfTWlzc2luZ319cmV0dXJue2dyb3VwSWRfTWlzc2luZzpudWxsLGxlbmd0aF9NaXNzaW5nOmJ9fTtBLnByb3RvdHlwZS5fZ2V0UmVzb3VyY2VQYXRoPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNSZWxhdGl2ZSgpP3RoaXMub01vZGVsLnJlc29sdmUodGhpcy5zUGF0aCx0aGlzLmdldENvbnRleHQoKSk6dGhpcy5zUGF0aH07QS5wcm90b3R5cGUuX2dldEVudGl0eVNldD1mdW5jdGlvbigpe3ZhciBlPXRoaXMuc0VudGl0eVNldE5hbWU7dmFyIGI9dGhpcy5nZXRDb250ZXh0KCk7aWYoIWUpe2U9dGhpcy5zUGF0aC5zcGxpdCgiLyIpWzFdO2lmKGUuaW5kZXhPZigiKCIpIT0tMSl7ZT1lLnNwbGl0KCIoIilbMF0rIlJlc3VsdHMifX1yZXR1cm4gZX07QS5wcm90b3R5cGUuX2dldEVmZmVjdGl2ZVNvcnRPcmRlcj1mdW5jdGlvbihwKXtmb3IodmFyIGk9MDtpPHRoaXMuYVNvcnRlci5sZW5ndGg7aSsrKXtpZih0aGlzLmFTb3J0ZXJbaV0mJnRoaXMuYVNvcnRlcltpXS5zUGF0aD09cCl7cmV0dXJuIHRoaXMuYVNvcnRlcltpXS5iRGVzY2VuZGluZz9vLlNvcnRPcmRlci5EZXNjZW5kaW5nOm8uU29ydE9yZGVyLkFzY2VuZGluZ319cmV0dXJuIG51bGx9O0EucHJvdG90eXBlLl9nZXRGaWx0ZXJPcGVyYXRvck1hdGNoaW5nUHJvcGVydHlTb3J0T3JkZXI9ZnVuY3Rpb24ocCx3KXt2YXIgZj1zYXAudWkubW9kZWwuRmlsdGVyT3BlcmF0b3IuR1Q7c3dpdGNoKHRoaXMuX2dldEVmZmVjdGl2ZVNvcnRPcmRlcihwKSl7Y2FzZSBvLlNvcnRPcmRlci5Bc2NlbmRpbmc6aWYodylmPXNhcC51aS5tb2RlbC5GaWx0ZXJPcGVyYXRvci5HRTtlbHNlIGY9c2FwLnVpLm1vZGVsLkZpbHRlck9wZXJhdG9yLkdUO2JyZWFrO2Nhc2Ugby5Tb3J0T3JkZXIuRGVzY2VuZGluZzppZih3KWY9c2FwLnVpLm1vZGVsLkZpbHRlck9wZXJhdG9yLkxFO2Vsc2UgZj1zYXAudWkubW9kZWwuRmlsdGVyT3BlcmF0b3IuTFQ7YnJlYWt9cmV0dXJuIGZ9O0EucHJvdG90eXBlLl9jb252ZXJ0RGVwcmVjYXRlZEZpbHRlck9iamVjdHM9ZnVuY3Rpb24oZil7aWYoIWYpcmV0dXJuIGY7Zm9yKHZhciBpPTAsbD1mLmxlbmd0aDtpPGw7aSsrKXtpZihzYXAudWkubW9kZWwub2RhdGEmJnR5cGVvZiBzYXAudWkubW9kZWwub2RhdGEuRmlsdGVyPT09ImZ1bmN0aW9uIiYmZltpXWluc3RhbmNlb2Ygc2FwLnVpLm1vZGVsLm9kYXRhLkZpbHRlcilmW2ldPWZbaV0uY29udmVydCgpfXJldHVybiBmfTtBLnByb3RvdHlwZS5fZ2V0R3JvdXBJZEZyb21Db250ZXh0PWZ1bmN0aW9uKGMsbCl7aWYoIWMpe3JldHVybiBudWxsfXZhciBnPSIvIjt2YXIgZD1udWxsO2lmKGw+dGhpcy5hQWdncmVnYXRpb25MZXZlbC5sZW5ndGgpcS5zYXAubG9nLmZhdGFsKCJhc3NlcnRpb24gZmFpbGVkOiBhZ2dyZWdhdGlvbiBsZXZlbCBkZWVwZXIgdGhhbiBudW1iZXIgb2YgY3VycmVudCBhZ2dyZWdhdGlvbiBsZXZlbHMiKTtmb3IodmFyIGk9MDtpPGw7aSsrKXtkPWMuZ2V0UHJvcGVydHkodGhpcy5hQWdncmVnYXRpb25MZXZlbFtpXSk7aWYoZCE9bnVsbCl7Zys9ZW5jb2RlVVJJQ29tcG9uZW50KGQpKyIvIn1lbHNle2crPSJALyJ9fXJldHVybiBnfTtBLnByb3RvdHlwZS5fZ2V0R3JvdXBJZExldmVsPWZ1bmN0aW9uKGcpe2lmKGc9PW51bGwpe3Euc2FwLmxvZy5mYXRhbCgiYXNzZXJ0aW9uIGZhaWxlZDogbm8gbmVlZCB0byBkZXRlcm1pbmUgbGV2ZWwgb2YgZ3JvdXAgSUQgPSBudWxsIik7cmV0dXJuLTF9cmV0dXJuIGcuc3BsaXQoIi8iKS5sZW5ndGgtMn07QS5wcm90b3R5cGUuX2dldEdyb3VwSWRDb21wb25lbnRzPWZ1bmN0aW9uKGcpe2lmKGc9PW51bGwpcmV0dXJuIG51bGw7dmFyIEc9Zy5zcGxpdCgiLyIpO3ZhciBkPW5ldyBBcnJheSgpO2Zvcih2YXIgaT0xO2k8Ry5sZW5ndGgtMTtpKyspe2lmKEdbaV09PSJAIilkW2ktMV09bnVsbDtlbHNlIGRbaS0xXT1kZWNvZGVVUklDb21wb25lbnQoR1tpXSl9cmV0dXJuIGR9O0EucHJvdG90eXBlLl9nZXRHcm91cElkQW5jZXN0b3JzPWZ1bmN0aW9uKGcsbil7aWYoIW4pcmV0dXJuW107aWYoZz09bnVsbCl7cS5zYXAubG9nLmZhdGFsKCJncm91cCBJRCBudWxsIGRvZXMgbm90IGhhdmUgYW5jZXN0b3JzIik7cmV0dXJuW119aWYoZz09Ii8iKWlmKE1hdGguYWJzKG4pPT0xKXJldHVybltudWxsXTtlbHNle3Euc2FwLmxvZy5mYXRhbCgiaW52YWxpZCBsZXZlbCBjb3VudCAiK24rIiBmb3IgYW5jZXN0b3JzIG9mIGdyb3VwSWQgIitnKTtyZXR1cm5bXX12YXIgRz1nLnNwbGl0KCIvIik7dmFyIGE9bmV3IEFycmF5KCkscz0iIjt2YXIgZj0wLHQ9Ry5sZW5ndGgtMztpZihuPjApaWYobi0xPnQpcS5zYXAubG9nLmZhdGFsKCJpbnZhbGlkIGxldmVsIGNvdW50ICIrbisiIGZvciBhbmNlc3RvcnMgb2YgZ3JvdXBJZCAiK2cpO2Vsc2UgdD1uLTE7ZWxzZSBpZigtKG4rMSk+dClxLnNhcC5sb2cuZmF0YWwoImludmFsaWQgbGV2ZWwgY291bnQgIituKyIgZm9yIGFuY2VzdG9ycyBvZiBncm91cElkICIrZyk7ZWxzZXtmPXQrMStuO2Zvcih2YXIgaT0wO2k8ZjtpKyspe3MrPUdbaV0rIi8ifX1mb3IodmFyIGk9ZjtpPD10O2krKyl7cys9R1tpXSsiLyI7YS5wdXNoKHMpfXJldHVybiBhfTtBLnByb3RvdHlwZS5fZ2V0UGFyZW50R3JvdXBJZD1mdW5jdGlvbihnKXtyZXR1cm4gdGhpcy5fZ2V0R3JvdXBJZEFuY2VzdG9ycyhnLC0xKVswXX07QS5wcm90b3R5cGUuX3JlbW92ZUR1cGxpY2F0ZXNGcm9tU3RyaW5nQXJyYXk9ZnVuY3Rpb24oYSl7dmFyIHQ9e307Zm9yKHZhciBpPTA7aTxhLmxlbmd0aDtpKyspdFthW2ldXT10cnVlO3ZhciB1PVtdO2Zvcih2YXIgcyBpbiB0KXUucHVzaChzKTtyZXR1cm4gdX07QS5wcm90b3R5cGUuX2dldElkRm9yTmV3UmVxdWVzdEhhbmRsZT1mdW5jdGlvbigpe2lmKHRoaXMub1BlbmRpbmdSZXF1ZXN0SGFuZGxlPT09dW5kZWZpbmVkKXRoaXMub1BlbmRpbmdSZXF1ZXN0SGFuZGxlPVtdO2Zvcih2YXIgaT0wO2k8dGhpcy5vUGVuZGluZ1JlcXVlc3RIYW5kbGUubGVuZ3RoO2krKyl7aWYodGhpcy5vUGVuZGluZ1JlcXVlc3RIYW5kbGVbaV09PT11bmRlZmluZWQpcmV0dXJuIGl9dGhpcy5vUGVuZGluZ1JlcXVlc3RIYW5kbGVbdGhpcy5vUGVuZGluZ1JlcXVlc3RIYW5kbGUubGVuZ3RoXT11bmRlZmluZWQ7cmV0dXJuIHRoaXMub1BlbmRpbmdSZXF1ZXN0SGFuZGxlLmxlbmd0aC0xfTtBLnByb3RvdHlwZS5fcmVnaXN0ZXJOZXdSZXF1ZXN0SGFuZGxlPWZ1bmN0aW9uKHIsUil7aWYodGhpcy5vUGVuZGluZ1JlcXVlc3RIYW5kbGVbcl0hPT11bmRlZmluZWQpcS5zYXAubG9nLmZhdGFsKCJyZXF1ZXN0IGhhbmRsZSBJRCBhbHJlYWR5IGluIHVzZSIpO3RoaXMub1BlbmRpbmdSZXF1ZXN0SGFuZGxlW3JdPVJ9O0EucHJvdG90eXBlLl9kZXJlZ2lzdGVySGFuZGxlT2ZDb21wbGV0ZWRSZXF1ZXN0PWZ1bmN0aW9uKHIpe2lmKHRoaXMub1BlbmRpbmdSZXF1ZXN0SGFuZGxlW3JdPT09dW5kZWZpbmVkKXEuc2FwLmxvZy5mYXRhbCgibm8gaGFuZGxlIGZvdW5kIGZvciB0aGlzIHJlcXVlc3QgSUQiKTt0aGlzLm9QZW5kaW5nUmVxdWVzdEhhbmRsZVtyXT11bmRlZmluZWR9O0EucHJvdG90eXBlLl9hYm9ydEFsbFBlbmRpbmdSZXF1ZXN0c0J5SGFuZGxlPWZ1bmN0aW9uKCl7Zm9yKHZhciBpPTA7aTx0aGlzLm9QZW5kaW5nUmVxdWVzdEhhbmRsZS5sZW5ndGg7aSsrKXt0aGlzLm9QZW5kaW5nUmVxdWVzdEhhbmRsZVtpXSE9PXVuZGVmaW5lZCYmdGhpcy5vUGVuZGluZ1JlcXVlc3RIYW5kbGVbaV0uYWJvcnQoKX10aGlzLm9QZW5kaW5nUmVxdWVzdEhhbmRsZT1bXX07QS5wcm90b3R5cGUuX2dldFJlcXVlc3RJZD1mdW5jdGlvbihyLHApe3N3aXRjaChyKXtjYXNlIEEuX3JlcXVlc3RUeXBlLmdyb3VwTWVtYmVyc1F1ZXJ5OmlmKHAuZ3JvdXBJZD09PXVuZGVmaW5lZClxLnNhcC5sb2cuZmF0YWwoIm1pc3NpbmcgZ3JvdXAgSUQiKTt2YXIgZz1wLmdyb3VwSWQ7cmV0dXJuIEEuX3JlcXVlc3RUeXBlLmdyb3VwTWVtYmVyc1F1ZXJ5KyhnPT1udWxsPyIiOmcpO2Nhc2UgQS5fcmVxdWVzdFR5cGUubGV2ZWxNZW1iZXJzUXVlcnk6aWYocC5sZXZlbD09PXVuZGVmaW5lZClxLnNhcC5sb2cuZmF0YWwoIm1pc3NpbmcgbGV2ZWwiKTtpZihwLmdyb3VwSWQ9PT11bmRlZmluZWQpcS5zYXAubG9nLmZhdGFsKCJtaXNzaW5nIGdyb3VwSWQiKTtyZXR1cm4iIitBLl9yZXF1ZXN0VHlwZS5sZXZlbE1lbWJlcnNRdWVyeStwLmxldmVsKyh0aGlzLmJVc2VBY2NlbGVyYXRlZEF1dG9FeHBhbmQ9PXRydWU/IiI6cC5ncm91cElkKTtjYXNlIEEuX3JlcXVlc3RUeXBlLnRvdGFsU2l6ZVF1ZXJ5OnJldHVybiBBLl9yZXF1ZXN0VHlwZS50b3RhbFNpemVRdWVyeTtkZWZhdWx0OnEuc2FwLmxvZy5mYXRhbCgiaW52YWxpZCByZXF1ZXN0IHR5cGUgIityKTtyZXR1cm4tMX19O0EucHJvdG90eXBlLl9yZWdpc3Rlck5ld1JlcXVlc3Q9ZnVuY3Rpb24ocil7aWYocj09dW5kZWZpbmVkfHxyPT0iIil7cS5zYXAubG9nLmZhdGFsKCJtaXNzaW5nIHJlcXVlc3QgSUQiKTtyZXR1cm59aWYoIXRoaXMub1BlbmRpbmdSZXF1ZXN0c1tyXSl0aGlzLm9QZW5kaW5nUmVxdWVzdHNbcl09MTtlbHNlKyt0aGlzLm9QZW5kaW5nUmVxdWVzdHNbcl19O0EucHJvdG90eXBlLl9jb25zaWRlclJlcXVlc3RHcm91cGluZz1mdW5jdGlvbihyKXtmb3IodmFyIGk9LTEsUjtSPXJbKytpXTspe2lmKHRoaXMub0dyb3VwZWRSZXF1ZXN0c1tSXT09PXVuZGVmaW5lZCl0aGlzLm9Hcm91cGVkUmVxdWVzdHNbUl09e307dmFyIGc9dGhpcy5vR3JvdXBlZFJlcXVlc3RzW1JdO2Zvcih2YXIgaj0wO2o8ci5sZW5ndGg7aisrKWdbcltqXV09dHJ1ZX19O0EucHJvdG90eXBlLl9pc1JlcXVlc3RQZW5kaW5nPWZ1bmN0aW9uKHIpe3JldHVybiB0aGlzLm9QZW5kaW5nUmVxdWVzdHNbcl0hPXVuZGVmaW5lZCYmdGhpcy5vUGVuZGluZ1JlcXVlc3RzW3JdPjB9O0EucHJvdG90eXBlLl9kZXJlZ2lzdGVyQ29tcGxldGVkUmVxdWVzdD1mdW5jdGlvbihyKXtpZighdGhpcy5vUGVuZGluZ1JlcXVlc3RzW3JdKXEuc2FwLmxvZy5mYXRhbCgiYXNzZXJ0aW9uIGZhaWxlZDogdGhlcmUgaXMgbm8gcGVuZGluZyByZXF1ZXN0IElEICIrcik7aWYodGhpcy5vUGVuZGluZ1JlcXVlc3RzW3JdPT0xKWRlbGV0ZSB0aGlzLm9QZW5kaW5nUmVxdWVzdHNbcl07ZWxzZS0tdGhpcy5vUGVuZGluZ1JlcXVlc3RzW3JdfTtBLnByb3RvdHlwZS5fY2xlYW51cEdyb3VwaW5nRm9yQ29tcGxldGVkUmVxdWVzdD1mdW5jdGlvbihyKXtpZih0aGlzLl9pc1JlcXVlc3RQZW5kaW5nKHIpKXJldHVybiBmYWxzZTt2YXIgZz10cnVlO2lmKHRoaXMub0dyb3VwZWRSZXF1ZXN0c1tyXSE9dW5kZWZpbmVkKXtmb3IodmFyIE8gaW4gdGhpcy5vR3JvdXBlZFJlcXVlc3RzW3JdKXtpZih0aGlzLm9QZW5kaW5nUmVxdWVzdHNbT10pe2c9ZmFsc2U7YnJlYWt9fX1pZihnKXt2YXIgUj10aGlzLm9Hcm91cGVkUmVxdWVzdHNbcl07ZGVsZXRlIHRoaXMub0dyb3VwZWRSZXF1ZXN0c1tyXTtmb3IodmFyIE8gaW4gUil7aWYoTyE9cil0aGlzLl9jbGVhbnVwR3JvdXBpbmdGb3JDb21wbGV0ZWRSZXF1ZXN0KE8pfX1yZXR1cm4gZ307QS5wcm90b3R5cGUuX2NsZWFyQWxsUGVuZGluZ1JlcXVlc3RzPWZ1bmN0aW9uKCl7dGhpcy5vUGVuZGluZ1JlcXVlc3RzPXt9O3RoaXMub0dyb3VwZWRSZXF1ZXN0cz17fX07QS5wcm90b3R5cGUucmVzZXREYXRhPWZ1bmN0aW9uKGMpe2lmKGMpe3ZhciBwPWMuZ2V0UGF0aCgpO2RlbGV0ZSB0aGlzLm1LZXlbcF07ZGVsZXRlIHRoaXMubU93bktleVtwXTtkZWxldGUgdGhpcy5tTGVuZ3RoW3BdO2RlbGV0ZSB0aGlzLm1GaW5hbExlbmd0aFtwXX1lbHNle3RoaXMubUtleT17fTt0aGlzLm1Pd25LZXk9e307dGhpcy5tTGVuZ3RoPXt9O3RoaXMubUZpbmFsTGVuZ3RoPXt9fX07QS5wcm90b3R5cGUucmVmcmVzaD1mdW5jdGlvbihmLGMsZSl7dmFyIGI9ZmFsc2U7aWYoIWYpe2lmKGUpe3ZhciByPXRoaXMub01vZGVsLnJlc29sdmUodGhpcy5zUGF0aCx0aGlzLm9Db250ZXh0KTt2YXIgRT10aGlzLm9Nb2RlbC5vTWV0YWRhdGEuX2dldEVudGl0eVR5cGVCeVBhdGgocik7aWYoRSYmKEUuZW50aXR5VHlwZSBpbiBlKSliPXRydWV9aWYoYyYmIWIpe3EuZWFjaCh0aGlzLm1LZXksZnVuY3Rpb24oaSxuKXtxLmVhY2gobixmdW5jdGlvbihpLGspe2lmKGsgaW4gYyl7Yj10cnVlO3JldHVybiBmYWxzZX19KTtpZihiKXJldHVybiBmYWxzZX0pfWlmKCFjJiYhZSl7Yj10cnVlfX1pZihmfHxiKXt0aGlzLl9hYm9ydEFsbFBlbmRpbmdSZXF1ZXN0cygpO3RoaXMucmVzZXREYXRhKCk7dGhpcy5iTmVlZHNVcGRhdGU9ZmFsc2U7dGhpcy5fZmlyZVJlZnJlc2goe3JlYXNvbjpzYXAudWkubW9kZWwuQ2hhbmdlUmVhc29uLlJlZnJlc2h9KX19O0EucHJvdG90eXBlLmNoZWNrVXBkYXRlPWZ1bmN0aW9uKGYsYyl7dmFyIGI9ZmFsc2U7aWYoIWYpe2lmKHRoaXMuYk5lZWRzVXBkYXRlfHwhYyl7Yj10cnVlfWVsc2V7cS5lYWNoKHRoaXMubUtleSxmdW5jdGlvbihpLG4pe3EuZWFjaChuLGZ1bmN0aW9uKGksayl7aWYoayBpbiBjKXtiPXRydWU7cmV0dXJuIGZhbHNlfX0pO2lmKGIpcmV0dXJuIGZhbHNlfSl9fWlmKGZ8fGIpe3RoaXMuYk5lZWRzVXBkYXRlPWZhbHNlO3RoaXMuX2ZpcmVDaGFuZ2UoKX19O0EucHJvdG90eXBlLmdldERvd25sb2FkVXJsPWZ1bmN0aW9uKGYpe3ZhciBhPW5ldyBvLlF1ZXJ5UmVzdWx0UmVxdWVzdCh0aGlzLm9BbmFseXRpY2FsUXVlcnlSZXN1bHQpO2Euc2V0UmVzb3VyY2VQYXRoKHRoaXMuX2dldFJlc291cmNlUGF0aCgpKTt2YXIgcz1bXTt2YXIgYj1bXTtmb3IodmFyIGQgaW4gdGhpcy5vRGltZW5zaW9uRGV0YWlsc1NldClzLnB1c2goZCk7YS5zZXRBZ2dyZWdhdGlvbkxldmVsKHMpO2Zvcih2YXIgZCBpbiB0aGlzLm9EaW1lbnNpb25EZXRhaWxzU2V0KXt2YXIgRD10aGlzLm9EaW1lbnNpb25EZXRhaWxzU2V0W2RdO3ZhciBJPShELmtleVByb3BlcnR5TmFtZSE9dW5kZWZpbmVkKTt2YXIgYz0oRC50ZXh0UHJvcGVydHlOYW1lIT11bmRlZmluZWQpO2EuaW5jbHVkZURpbWVuc2lvbktleVRleHRBdHRyaWJ1dGVzKEQubmFtZSx0cnVlLGMsRC5hQXR0cmlidXRlTmFtZSl9Zm9yKHZhciBtIGluIHRoaXMub01lYXN1cmVEZXRhaWxzU2V0KWIucHVzaChtKTthLnNldE1lYXN1cmVzKGIpO2Zvcih2YXIgbSBpbiB0aGlzLm9NZWFzdXJlRGV0YWlsc1NldCl7dmFyIE09dGhpcy5vTWVhc3VyZURldGFpbHNTZXRbbV07dmFyIGU9KE0ucmF3VmFsdWVQcm9wZXJ0eU5hbWUhPXVuZGVmaW5lZCk7dmFyIGc9KE0uZm9ybWF0dGVkVmFsdWVQcm9wZXJ0eU5hbWUhPXVuZGVmaW5lZCk7dmFyIGg9KE0udW5pdFByb3BlcnR5TmFtZSE9dW5kZWZpbmVkKTthLmluY2x1ZGVNZWFzdXJlUmF3Rm9ybWF0dGVkVmFsdWVVbml0KE0ubmFtZSxlLGcsaCl9dmFyIGo9YS5nZXRTb3J0RXhwcmVzc2lvbigpO2ouY2xlYXIoKTtmb3IodmFyIGk9MDtpPHRoaXMuYVNvcnRlci5sZW5ndGg7aSsrKXtpZih0aGlzLmFTb3J0ZXJbaV0pe2ouYWRkU29ydGVyKHRoaXMuYVNvcnRlcltpXS5zUGF0aCx0aGlzLmFTb3J0ZXJbaV0uYkRlc2NlbmRpbmc/by5Tb3J0T3JkZXIuRGVzY2VuZGluZzpvLlNvcnRPcmRlci5Bc2NlbmRpbmcpfX12YXIgaz1hLmdldEZpbHRlckV4cHJlc3Npb24oKTtrLmNsZWFyKCk7aWYodGhpcy5hQXBwbGljYXRpb25GaWx0ZXIpe2suYWRkVUk1RmlsdGVyQ29uZGl0aW9ucyh0aGlzLmFBcHBsaWNhdGlvbkZpbHRlcil9aWYodGhpcy5hQ29udHJvbEZpbHRlcil7ay5hZGRVSTVGaWx0ZXJDb25kaXRpb25zKHRoaXMuYUNvbnRyb2xGaWx0ZXIpfXZhciBwPWEuZ2V0VVJJVG9RdWVyeVJlc3VsdEVudGl0eVNldCgpO3ZhciBQPXRoaXMuX2dldFF1ZXJ5T0RhdGFSZXF1ZXN0T3B0aW9ucyhhKTtmb3IodmFyIGk9MCxsPVAubGVuZ3RoO2k8bDtpKyspe2lmKC9eXCRzZWxlY3QvaS50ZXN0KFBbaV0pKXtQLnNwbGljZShpLDEpO2JyZWFrfX12YXIgdj1bXTtmb3IodmFyIGk9MCxsPXRoaXMuYUFuYWx5dGljYWxJbmZvLmxlbmd0aDtpPGw7aSsrKXt2YXIgbj10aGlzLmFBbmFseXRpY2FsSW5mb1tpXTtpZihuLnZpc2libGUpe3YucHVzaChuLm5hbWUpfX1pZih2Lmxlbmd0aD4wKXtQLnB1c2goIiRzZWxlY3Q9Iit2LmpvaW4oIiwiKSl9aWYoZil7UC5zcGxpY2UoMCwwLCIkZm9ybWF0PSIrZW5jb2RlVVJJQ29tcG9uZW50KGYpKX1pZihwKXtyZXR1cm4gdGhpcy5vTW9kZWwuX2NyZWF0ZVJlcXVlc3RVcmwocCxudWxsLFApfX07cmV0dXJuIEF9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkubW9kZWwuYW5hbHl0aWNzLlRyZWVCaW5kaW5nQWRhcHRlcicpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5tb2RlbC5hbmFseXRpY3MuVHJlZUJpbmRpbmdBZGFwdGVyJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL21vZGVsL2FuYWx5dGljcy9UcmVlQmluZGluZ0FkYXB0ZXIiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvbW9kZWwvVHJlZUJpbmRpbmcnLCcuL0FuYWx5dGljYWxCaW5kaW5nJ10sZnVuY3Rpb24ocSxULEEpeyJ1c2Ugc3RyaWN0Ijt2YXIgYT1mdW5jdGlvbigpe2lmKCEodGhpcyBpbnN0YW5jZW9mIFQmJnRoaXMuZ2V0Q29udGV4dHM9PT11bmRlZmluZWQpKXtyZXR1cm59Zm9yKHZhciBmIGluIGEucHJvdG90eXBlKXtpZihhLnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eShmKSl7dGhpc1tmXT1hLnByb3RvdHlwZVtmXX19dGhpcy5fYUNvbnRleHRzPVtdO3RoaXMuX2FDb250ZXh0SW5mb3M9W107dGhpcy5fYkluaXRpYWw9dHJ1ZTt0aGlzLl9vRXhwYW5kZWQ9e307dGhpcy5fb09wZW5Hcm91cHM9e307dGhpcy5fYlRyaWdnZXJlZE9wZW5Hcm91cHNMb2FkPWZhbHNlfTthLnByb3RvdHlwZS5fdXBkYXRlQ29udGV4dHM9ZnVuY3Rpb24ocCxjLEMscil7dmFyIEk9cDtmb3IodmFyIGk9MDtpPGMubGVuZ3RoO2krKyl7dmFyIG89Y1tpXTt2YXIgYj1DW2ldO3RoaXMuX2FDb250ZXh0cy5zcGxpY2UocCxyPzE6MCxvKTt0aGlzLl9hQ29udGV4dEluZm9zLnNwbGljZShwLHI/MTowLGIpO3ArK31pZighcil7dGhpcy5fZmlyZUNvbnRleHRDaGFuZ2Uoe3R5cGU6Imluc2VydCIsaW5kZXg6SSxsZW5ndGg6Yy5sZW5ndGh9KX1yZXR1cm4gQ307YS5wcm90b3R5cGUuZ2V0TGVuZ3RoPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2FDb250ZXh0cy5sZW5ndGh9O2EucHJvdG90eXBlLmdldENvbnRleHRJbmZvPWZ1bmN0aW9uKGkpe3JldHVybiB0aGlzLl9hQ29udGV4dEluZm9zLnNsaWNlKGksaSsxKVswXX07YS5wcm90b3R5cGUuX2NyZWF0ZUNvbnRleHRJbmZvcz1mdW5jdGlvbihjLHAsUCxsLEwsdCxzLEksYil7aWYoIUkpe0k9MH12YXIgQz1bXTtmb3IodmFyIGk9MDtpPGMubGVuZ3RoO2krKyl7dmFyIG89Y1tpXTtDLnB1c2goe2NvbnRleHQ6byxsZXZlbDpsLGV4cGFuZGVkOmZhbHNlLGNoaWxkQ291bnQ6MCxwYXJlbnQ6cCxzdW06cyxwb3NpdGlvbjpQLGluZGV4OmkrSSxhdXRvRXhwYW5kOmIsZXhwYW5kTGVuZ3RoOkwsZXhwYW5kVGhyZXNob2xkOnR9KTtQKyt9cmV0dXJuIEN9O2EucHJvdG90eXBlLmdldENvbnRleHRzPWZ1bmN0aW9uKHMsbCx0KXt2YXIgYj10aGlzO2lmKCFsKXtsPXRoaXMub01vZGVsLmlTaXplTGltaXR9aWYodGhpcy5fYkluaXRpYWwpe3ZhciBuPXRoaXMubVBhcmFtZXRlcnMmJnRoaXMubVBhcmFtZXRlcnMubnVtYmVyT2ZFeHBhbmRlZExldmVsczt2YXIgcj10aGlzLmdldFJvb3RDb250ZXh0cyh7c3RhcnRJbmRleDpzLGxlbmd0aDpsLHRocmVzaG9sZDp0LG51bWJlck9mRXhwYW5kZWRMZXZlbHM6bn0pO2lmKHImJnIubGVuZ3RoPjApe3RoaXMuX2JJbml0aWFsPWZhbHNlO3ZhciBOPXRoaXMuX2NyZWF0ZUNvbnRleHRJbmZvcyhyLG51bGwsMCwwLGwsdCx0cnVlLDAscGFyc2VJbnQobiwxMCkrMSk7aWYodGhpcy5iUHJvdmlkZUdyYW5kVG90YWxzJiZ0aGlzLl9oYXNUb3RhbGVkTWVhc3VyZXMoKSl7dGhpcy5fdXBkYXRlQ29udGV4dHMoMCxyLE4pfWVsc2V7dGhpcy5fZXhwYW5kTm9kZXNGb3JDb250ZXh0cyhOLDAsbCx0KX19fWlmKHRoaXMuX29PcGVuR3JvdXBzIT17fSYmdGhpcy5fYlRyaWdnZXJlZE9wZW5Hcm91cHNMb2FkPT1mYWxzZSl7dGhpcy5sb2FkR3JvdXBzKHRoaXMuX29PcGVuR3JvdXBzKTt0aGlzLl9iVHJpZ2dlcmVkT3Blbkdyb3Vwc0xvYWQ9dHJ1ZX10aGlzLl9leHBhbmROb2Rlc0ZvckNvbnRleHRzKHRoaXMuX2FDb250ZXh0SW5mb3Muc2xpY2UocyxzK2wpLHMsbCx0KTt2YXIgYz10aGlzLl9hQ29udGV4dHMuc2xpY2UocyxzK2wpO3ZhciBDPXRoaXMuX2FDb250ZXh0SW5mb3Muc2xpY2UocyxzK2wpO3ZhciBtPXt9O3EuZWFjaChjLGZ1bmN0aW9uKGksbyl7aWYoIW8pe3ZhciBkPWIuX2FDb250ZXh0SW5mb3NbcytpXTt2YXIgcD1kLnBhcmVudDt2YXIgUz1tW3AuZ2V0UGF0aCgpXTtpZihTKXtTLnN0YXJ0SW5kZXg9TWF0aC5taW4oUy5zdGFydEluZGV4LGQuaW5kZXgpO1MucG9zaXRpb249TWF0aC5taW4oUy5wb3NpdGlvbixkLnBvc2l0aW9uKTtTLmVuZEluZGV4PU1hdGgubWF4KFMuZW5kSW5kZXgsZC5pbmRleCl9ZWxzZXttW3AuZ2V0UGF0aCgpXT17c3RhcnRJbmRleDpkLmluZGV4LGVuZEluZGV4OmQuaW5kZXgscGFyZW50OmQucGFyZW50LGxldmVsOmQubGV2ZWwtMSxwb3NpdGlvbjpkLnBvc2l0aW9ufX19fSk7dmFyIGI9dGhpcyx1PWZhbHNlO3EuZWFjaChtLGZ1bmN0aW9uKGksUyl7dmFyIGQ9Uy5lbmRJbmRleC1TLnN0YXJ0SW5kZXgrMTt2YXIgZT1NYXRoLm1heChiLm1QYXJhbWV0ZXJzLm51bWJlck9mRXhwYW5kZWRMZXZlbHMtUy5sZXZlbCwwKTt2YXIgTT1iLmdldE5vZGVDb250ZXh0cyhTLnBhcmVudCx7c3RhcnRJbmRleDpTLnN0YXJ0SW5kZXgsbGVuZ3RoOmQsdGhyZXNob2xkOnQsbGV2ZWw6Uy5sZXZlbCxudW1iZXJPZkV4cGFuZGVkTGV2ZWxzOmV9KTtpZihNLmxlbmd0aD4wKXtiLl91cGRhdGVDb250ZXh0cyhTLnBvc2l0aW9uLE0sYi5fY3JlYXRlQ29udGV4dEluZm9zKE0sUy5wYXJlbnQsUy5wb3NpdGlvbixTLmxldmVsKzEsZCx0LGZhbHNlLDAsZSksdHJ1ZSk7Yi5fdXBkYXRlRXhwYW5kZWRJbmZvKFMucGFyZW50LFMubGV2ZWwsUy5zdGFydEluZGV4LFMuZW5kSW5kZXgtUy5zdGFydEluZGV4KzEsdCk7dT10cnVlfX0pO2lmKHUpe3RoaXMuX2V4cGFuZE5vZGVzRm9yQ29udGV4dHModGhpcy5fYUNvbnRleHRJbmZvcy5zbGljZShzLHMrbCkscyxsLHQpO2M9dGhpcy5fYUNvbnRleHRzLnNsaWNlKHMscytsKX1yZXR1cm4gY307YS5wcm90b3R5cGUuX2V4cGFuZE5vZGVzRm9yQ29udGV4dHM9ZnVuY3Rpb24oYyxzLGwsdCl7dmFyIGU9cS5ncmVwKGMsZnVuY3Rpb24oQyl7cmV0dXJuIEMuYXV0b0V4cGFuZD4wfSk7Zm9yKHZhciBpPTA7aTxlLmxlbmd0aDtpKyspe3RoaXMuX2V4cGFuZE5vZGUoZVtpXSxzLGwsdCl9fTthLnByb3RvdHlwZS5fZXhwYW5kTm9kZT1mdW5jdGlvbihjLHMsbCx0KXt2YXIgQz1jLmNvbnRleHQsbj1jLmV4cGFuZExlbmd0aCxOPWMuZXhwYW5kVGhyZXNob2xkLGg9dGhpcy5oYXNNZWFzdXJlcygpO2lmKCEoYy5wb3NpdGlvbj49cyYmYy5wb3NpdGlvbjw9cytsKXx8Yy5leHBhbmRlZD09PXRydWUpe3JldHVybn12YXIgYj10aGlzLmdldE5vZGVDb250ZXh0cyhDLHtzdGFydEluZGV4OjAsbGVuZ3RoOm4sdGhyZXNob2xkOk4sbGV2ZWw6Yy5sZXZlbCxudW1iZXJPZkV4cGFuZGVkTGV2ZWxzOmMuYXV0b0V4cGFuZD9jLmF1dG9FeHBhbmQtMTowfSk7aWYoYiYmYi5sZW5ndGg+MCl7dmFyIHI9dGhpcy5nZXRHcm91cFNpemUoQyxjLmxldmVsKSxpPWMucGFyZW50P2MucG9zaXRpb24rMTowLHA9aSxMPWMubGV2ZWwrMSxJPUwsZD10aGlzLl9jcmVhdGVDb250ZXh0SW5mb3MoYixDLHAsTCxuLE4sZmFsc2UsMCxjLmF1dG9FeHBhbmQ/Yy5hdXRvRXhwYW5kLTE6MCk7cCs9ZC5sZW5ndGg7dmFyIGU9ZC5sZW5ndGg7aWYocj4tMSl7Zm9yKHZhciBqPWIubGVuZ3RoO2o8cjtqKyspe2IucHVzaCh1bmRlZmluZWQpO2QucHVzaCh0aGlzLl9jcmVhdGVDb250ZXh0SW5mb3MoW3VuZGVmaW5lZF0sQyxwLEwsbCx0LGZhbHNlLGUsYy5hdXRvRXhwYW5kP2MuYXV0b0V4cGFuZC0xOjApWzBdKTtwKys7ZSsrfX1pZihDJiZjLnBhcmVudCE9bnVsbCYmcj4xJiYhdGhpcy5tUGFyYW1ldGVycy5zdW1PblRvcCYmaCl7Yi5wdXNoKEMpO2QucHVzaCh0aGlzLl9jcmVhdGVDb250ZXh0SW5mb3MoW0NdLEMscCxMLTEsbCx0LHRydWUsZSwwKVswXSl9dmFyIGY9Yi5sZW5ndGg7dGhpcy5fdXBkYXRlQ29udGV4dHMoaSxiLGQpO3ZhciBnPWkrZjt2YXIgUDtMLS07dmFyIGs9aTt3aGlsZShQPXRoaXMuX2FDb250ZXh0SW5mb3Nba10pe2lmKFAubGV2ZWw9PUwpe1AuY2hpbGRDb3VudD1QLmNoaWxkQ291bnQrZjtMLS19ay0tO2lmKEw8MClicmVha312YXIgbz10aGlzLl9hQ29udGV4dEluZm9zW2ddO2lmKG8pe3ZhciBtPXRoaXMuX2FDb250ZXh0SW5mb3NbZy0xXS5wb3NpdGlvbi1vLnBvc2l0aW9uKzE7Zm9yKHZhciBqPWc7ajx0aGlzLl9hQ29udGV4dEluZm9zLmxlbmd0aDtqKyspe3RoaXMuX2FDb250ZXh0SW5mb3Nbal0ucG9zaXRpb24rPW19fWlmKGMpe2MuZXhwYW5kZWQ9dHJ1ZX10aGlzLl91cGRhdGVFeHBhbmRlZEluZm8oYy5jb250ZXh0LGMubGV2ZWwsMCxsLHQpO3ZhciB1PWZhbHNlO2Zvcih2YXIgaj0wO2o8Yi5sZW5ndGg7aisrKXtpZihJPD10aGlzLmFBZ2dyZWdhdGlvbkxldmVsLmxlbmd0aCYmdGhpcy5fb09wZW5Hcm91cHNbdGhpcy5fZ2V0R3JvdXBJZEZyb21Db250ZXh0KGJbal0sSSldKXt0aGlzLl9leHBhbmROb2RlKGRbal0scyxsLHQpO2RlbGV0ZSB0aGlzLl9vT3Blbkdyb3Vwc1t0aGlzLl9nZXRHcm91cElkRnJvbUNvbnRleHQoYltqXSxJKV07dT10cnVlfWlmKGRbal0uYXV0b0V4cGFuZD4wJiZ0aGlzLmhhc0F2YWlsYWJsZU5vZGVDb250ZXh0cyhiW2pdLEkpPjAmJiF1KXt0aGlzLl9leHBhbmROb2RlKGRbal0scyxsLHQpfX1jLmF1dG9FeHBhbmQ9MH19O2EucHJvdG90eXBlLl91cGRhdGVFeHBhbmRlZEluZm89ZnVuY3Rpb24oYyxsLHMsTCx0KXt2YXIgYj10aGlzLl9nZXRHcm91cElkRnJvbUNvbnRleHQoYyxsKTt2YXIgcD1iLnN1YnN0cigwLGIubGVuZ3RoLTEpLnNwbGl0KCIvIik7dmFyIGU9dGhpcy5fb0V4cGFuZGVkO2Zvcih2YXIgaj0wO2o8cC5sZW5ndGg7aisrKXt2YXIgUD1wW2pdO2lmKGo9PTApe1A9InJvb3QifWVbUF09ZVtQXXx8e307ZT1lW1BdO2lmKGo9PXAubGVuZ3RoLTEpe2VbInNlY3Rpb25zIl09ZVsic2VjdGlvbnMiXXx8W107aWYoZVsic2VjdGlvbnMiXS5sZW5ndGg9PTApe2VbInNlY3Rpb25zIl0ucHVzaCh7c3RhcnRJbmRleDpzLGxlbmd0aDpMLHRocmVzaG9sZDp0fSl9dmFyIEU9ZmFsc2U7Zm9yKHZhciBrPTA7azxlWyJzZWN0aW9ucyJdLmxlbmd0aDtrKyspe3ZhciBTPWVbInNlY3Rpb25zIl1ba107dmFyIGk9Uy5zdGFydEluZGV4K1MubGVuZ3RoK1MudGhyZXNob2xkO3ZhciBkPXMrTCt0O2lmKFMuc3RhcnRJbmRleDw9cyYmaT49ZCl7cmV0dXJufWVsc2UgaWYoUy5zdGFydEluZGV4PD1zJiZpPj1zKXtTLnRocmVzaG9sZD1NYXRoLm1heChTLnRocmVzaG9sZCx0KTtTLmxlbmd0aD1kLVMuc3RhcnRJbmRleC1TLnRocmVzaG9sZDtFPXRydWV9ZWxzZSBpZihTLnN0YXJ0SW5kZXg+cyYmaT5kKXtTLmxlbmd0aD1TLmxlbmd0aCsoUy5zdGFydEluZGV4LXMpO1Muc3RhcnRJbmRleD1zO1MudGhyZXNob2xkPU1hdGgubWF4KFMudGhyZXNob2xkLHQpO0U9dHJ1ZX1lbHNlIGlmKFMuc3RhcnRJbmRleD5zJiZTLmVuZEluZGV4PGQpe1Muc3RhcnRJbmRleD1zO1MubGVuZ3RoPUw7Uy50aHJlc2hvbGQ9dDtFPXRydWV9fWlmKCFFKXtlWyJzZWN0aW9ucyJdLnB1c2goe3N0YXJ0SW5kZXg6cyxsZW5ndGg6TCx0aHJlc2hvbGQ6dH0pfX1lbHNle2VbImNoaWxkcmVuIl09ZVsiY2hpbGRyZW4iXXx8e307ZVsiY2hpbGRQcm9wZXJ0eSJdPXRoaXMuYUFnZ3JlZ2F0aW9uTGV2ZWxbal07ZT1lWyJjaGlsZHJlbiJdfX19O2EucHJvdG90eXBlLmV4cGFuZD1mdW5jdGlvbihpKXt2YXIgYz10aGlzLl9hQ29udGV4dEluZm9zW2ldO2lmKGMuZXhwYW5kZWQpe3JldHVybn1jLmF1dG9FeHBhbmQ9Yy5hdXRvRXhwYW5kfHwxfTthLnByb3RvdHlwZS5jb2xsYXBzZT1mdW5jdGlvbihJKXt2YXIgYz10aGlzLl9hQ29udGV4dEluZm9zW0ldO3ZhciBDPXRoaXMuX2FDb250ZXh0c1tJXTtpZighYy5leHBhbmRlZCl7cmV0dXJufXZhciBwPWMucG9zaXRpb24rMSxsPWMuY2hpbGRDb3VudCxMPWMubGV2ZWw7dmFyIGU9dGhpcy5fb0V4cGFuZGVkWyJyb290Il07dmFyIHM9dGhpcy5fZ2V0R3JvdXBJZEZyb21Db250ZXh0KEMsTCk7dmFyIFA9cy5zdWJzdHIoMCxzLmxlbmd0aC0xKS5zcGxpdCgiLyIpO2Zvcih2YXIgaT0xO2k8TDtpKyspe2U9ZVsiY2hpbGRyZW4iXVtQW2ldXX1kZWxldGUgZVsiY2hpbGRyZW4iXVtQW1AubGVuZ3RoLTFdXTt2YXIgcj1wO3RoaXMuX2FDb250ZXh0cy5zcGxpY2UocCxsKTt0aGlzLl9hQ29udGV4dEluZm9zLnNwbGljZShwLGwpO3AtLTt2YXIgbzt3aGlsZShvPXRoaXMuX2FDb250ZXh0SW5mb3NbcF0pe2lmKG8ubGV2ZWw9PUwpe28uY2hpbGRDb3VudD1vLmNoaWxkQ291bnQtbDtMLS19cC0tO2lmKEw8MClicmVha31pZihyPHRoaXMuX2FDb250ZXh0SW5mb3MubGVuZ3RoKXt2YXIgZD10aGlzLl9hQ29udGV4dEluZm9zW3ItMV0ucG9zaXRpb24tdGhpcy5fYUNvbnRleHRJbmZvc1tyXS5wb3NpdGlvbisxO2Zvcih2YXIgaj1yO2o8dGhpcy5fYUNvbnRleHRJbmZvcy5sZW5ndGg7aisrKXt0aGlzLl9hQ29udGV4dEluZm9zW2pdLnBvc2l0aW9uKz1kfXRoaXMuX2ZpcmVDb250ZXh0Q2hhbmdlKHt0eXBlOiJyZW1vdmUiLGluZGV4OnIsbGVuZ3RoOk1hdGguYWJzKGQpfSl9Yy5leHBhbmRlZD1mYWxzZX07YS5wcm90b3R5cGUuY29sbGFwc2VBbGw9ZnVuY3Rpb24obCl7aWYoIWx8fGw8MSl7bD0xfWZvcih2YXIgaT0wLGo9dGhpcy5fYUNvbnRleHRJbmZvcy5sZW5ndGg7aTxqO2krKyl7aWYodGhpcy5fYUNvbnRleHRJbmZvc1tpXS5sZXZlbD09bCl7dGhpcy5jb2xsYXBzZShpKTtqPXRoaXMuX2FDb250ZXh0SW5mb3MubGVuZ3RofX19O2EucHJvdG90eXBlLnRvZ2dsZUluZGV4PWZ1bmN0aW9uKGkpe2lmKCF0aGlzLl9hQ29udGV4dEluZm9zW2ldLmV4cGFuZGVkKXt0aGlzLmV4cGFuZChpKX1lbHNle3RoaXMuY29sbGFwc2UoaSl9fTthLnByb3RvdHlwZS5pbmRleEhhc0NoaWxkcmVuPWZ1bmN0aW9uKGkpe3ZhciBjPXRoaXMuX2FDb250ZXh0SW5mb3NbaV07aWYoIWMucGFyZW50fHxjLnN1bSl7cmV0dXJuIGZhbHNlfWVsc2V7cmV0dXJuIEEucHJvdG90eXBlLmhhc0NoaWxkcmVuLmNhbGwodGhpcyxjLmNvbnRleHQse2xldmVsOmMubGV2ZWx9KX19O2EucHJvdG90eXBlLnJlc2V0RGF0YT1mdW5jdGlvbihjKXt2YXIgcj1BLnByb3RvdHlwZS5yZXNldERhdGEuY2FsbCh0aGlzLGMpO3RoaXMuX2FDb250ZXh0cz1bXTt0aGlzLl9hQ29udGV4dEluZm9zPVtdO3RoaXMuX29PcGVuR3JvdXBzPXt9O3RoaXMuX3JlbW92ZUdyb3Vwcyh0aGlzLl9vRXhwYW5kZWRbInJvb3QiXSwwLCcnKTt0aGlzLl9vRXhwYW5kZWQ9e307dGhpcy5fYkluaXRpYWw9dHJ1ZTt0aGlzLl9iVHJpZ2dlcmVkT3Blbkdyb3Vwc0xvYWQ9ZmFsc2U7cmV0dXJuIHJ9O2EucHJvdG90eXBlLnVwZGF0ZUFuYWx5dGljYWxJbmZvPWZ1bmN0aW9uKGMpe3ZhciByPUEucHJvdG90eXBlLnVwZGF0ZUFuYWx5dGljYWxJbmZvLmNhbGwodGhpcyxjKTt0aGlzLl9hQ29udGV4dHM9W107dGhpcy5fYUNvbnRleHRJbmZvcz1bXTt0aGlzLl9vT3Blbkdyb3Vwcz17fTt0aGlzLl9yZW1vdmVHcm91cHModGhpcy5fb0V4cGFuZGVkWyJyb290Il0sMCwnJyk7dGhpcy5fb0V4cGFuZGVkPXt9O3RoaXMuX2JJbml0aWFsPXRydWU7dGhpcy5fYlRyaWdnZXJlZE9wZW5Hcm91cHNMb2FkPWZhbHNlO3JldHVybiByfTthLnByb3RvdHlwZS5fcmVtb3ZlR3JvdXBzPWZ1bmN0aW9uKGcsbCxwKXtpZighZyl7cmV0dXJufXRoaXMuX29PcGVuR3JvdXBzW3ArJy8nXT1nLnNlY3Rpb25zO2lmKCFnLmNoaWxkUHJvcGVydHkpe3JldHVybn1pZihnLmNoaWxkUHJvcGVydHkhPXRoaXMuYUFnZ3JlZ2F0aW9uTGV2ZWxbbF0pe2RlbGV0ZSBnLmNoaWxkcmVuO2RlbGV0ZSBnLmNoaWxkUHJvcGVydHl9ZWxzZXtmb3IodmFyIGMgaW4gZy5jaGlsZHJlbil7dGhpcy5fcmVtb3ZlR3JvdXBzKGcuY2hpbGRyZW5bY10sbCsxLHArJy8nK2MpfX19O2EucHJvdG90eXBlLl9oYXNUb3RhbGVkTWVhc3VyZXM9ZnVuY3Rpb24oKXt2YXIgaD1mYWxzZTtxLmVhY2godGhpcy5nZXRNZWFzdXJlRGV0YWlscygpLGZ1bmN0aW9uKGksbSl7aWYobS5hbmFseXRpY2FsSW5mby50b3RhbCl7aD10cnVlO3JldHVybiBmYWxzZX19KTtyZXR1cm4gaH07YS5wcm90b3R5cGUuYXR0YWNoQ29udGV4dENoYW5nZT1mdW5jdGlvbihmLGwpe3RoaXMuYXR0YWNoRXZlbnQoImNvbnRleHRDaGFuZ2UiLGYsbCl9O2EucHJvdG90eXBlLmRldGFjaENvbnRleHRDaGFuZ2U9ZnVuY3Rpb24oZixsKXt0aGlzLmRldGFjaEV2ZW50KCJjb250ZXh0Q2hhbmdlIixmLGwpfTthLnByb3RvdHlwZS5fZmlyZUNvbnRleHRDaGFuZ2U9ZnVuY3Rpb24obSl7dGhpcy5maXJlRXZlbnQoImNvbnRleHRDaGFuZ2UiLG0pfTtyZXR1cm4gYX0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5tb2RlbC5vZGF0YS5GaWx0ZXInKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkubW9kZWwub2RhdGEuRmlsdGVyJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL21vZGVsL29kYXRhL0ZpbHRlciIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ3NhcC91aS9tb2RlbC9GaWx0ZXInLCdzYXAvdWkvbW9kZWwvRmlsdGVyT3BlcmF0b3InXSxmdW5jdGlvbihxLEYsYSl7InVzZSBzdHJpY3QiO3ZhciBPPXNhcC51aS5iYXNlLk9iamVjdC5leHRlbmQoInNhcC51aS5tb2RlbC5vZGF0YS5GaWx0ZXIiLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbihwLHYsQSl7aWYodHlwZW9mIHA9PT0ib2JqZWN0Iil7dmFyIGY9cDtwPWYucGF0aDt2PWYudmFsdWVzO0E9Zi5hbmR9dGhpcy5zUGF0aD1wO3RoaXMuYVZhbHVlcz12O3RoaXMuYkFORD1BPT11bmRlZmluZWQ/dHJ1ZTpBfSxjb252ZXJ0OmZ1bmN0aW9uKCl7dmFyIGY9W107Zm9yKHZhciBpPTAsbD10aGlzLmFWYWx1ZXMmJnRoaXMuYVZhbHVlcy5sZW5ndGh8fDA7aTxsO2krKyl7Zi5wdXNoKG5ldyBGKHtwYXRoOnRoaXMuc1BhdGgsb3BlcmF0b3I6dGhpcy5hVmFsdWVzW2ldLm9wZXJhdG9yLHZhbHVlMTp0aGlzLmFWYWx1ZXNbaV0udmFsdWUxLHZhbHVlMjp0aGlzLmFWYWx1ZXNbaV0udmFsdWUyfSkpfWlmKGYubGVuZ3RoPjEpe3ZhciBvPW5ldyBGKHtmaWx0ZXJzOmYsYW5kOnRoaXMuYkFORH0pO3JldHVybiBvfWVsc2V7cmV0dXJuIGZbMF19fX0pO3JldHVybiBPfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLm1vZGVsLm9kYXRhLk9EYXRhQW5ub3RhdGlvbnMnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkubW9kZWwub2RhdGEuT0RhdGFBbm5vdGF0aW9ucycpO3NhcC51aS5kZWZpbmUoInNhcC91aS9tb2RlbC9vZGF0YS9PRGF0YUFubm90YXRpb25zIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL2Jhc2UvRXZlbnRQcm92aWRlciddLGZ1bmN0aW9uKHEsRSl7InVzZSBzdHJpY3QiO3ZhciBPPXNhcC51aS5iYXNlLkV2ZW50UHJvdmlkZXIuZXh0ZW5kKCJzYXAudWkubW9kZWwub2RhdGEuT0RhdGFBbm5vdGF0aW9ucyIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKGEsbSxwKXsidXNlIHN0cmljdCI7RS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5vTWV0YWRhdGE9bTt0aGlzLm9Bbm5vdGF0aW9ucz1udWxsO3RoaXMuYkxvYWRlZD1mYWxzZTt0aGlzLmJBc3luYz1wJiZwLmFzeW5jO3RoaXMueFBhdGg9bnVsbDt0aGlzLmFBbm5vdGF0aW9uVVJJPWE7dGhpcy5lcnJvcj1udWxsO3RoaXMuYlZhbGlkWE1MPXRydWU7dGhpcy5vUmVxdWVzdEhhbmRsZXM9W107dGhpcy5vTG9hZEV2ZW50PW51bGw7dGhpcy5vRmFpbGVkRXZlbnQ9bnVsbDt0aGlzLnhtbENvbXBhdFZlcnNpb249ZmFsc2U7aWYoYSl7dGhpcy5sb2FkWE1MKCk7aWYoIXRoaXMuYkFzeW5jKXtpZih0aGlzLmVycm9yKXtxLnNhcC5sb2cuZXJyb3IoIk9EYXRhIGFubm90YXRpb25zIGNvdWxkIG5vdCBiZSBsb2FkZWQ6ICIrdGhpcy5lcnJvci5tZXNzYWdlKX19fX0sbWV0YWRhdGE6e3B1YmxpY01ldGhvZHM6WyJwYXJzZSIsImdldEFubm90YXRpb25zRGF0YSIsImF0dGFjaEZhaWxlZCIsImRldGFjaEFubm9hdGlvbnNGYWlsZWQiLCJhdHRhY2hMb2FkZWQiLCJkZXRhY2hMb2FkZWQiXX19KTtPLnByb3RvdHlwZS5nZXRBbm5vdGF0aW9uc0RhdGE9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vQW5ub3RhdGlvbnN9O08ucHJvdG90eXBlLmlzTG9hZGVkPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYkxvYWRlZH07Ty5wcm90b3R5cGUuZmlyZUxvYWRlZD1mdW5jdGlvbihhKXt0aGlzLmZpcmVFdmVudCgibG9hZGVkIixhKTtyZXR1cm4gdGhpc307Ty5wcm90b3R5cGUuYXR0YWNoTG9hZGVkPWZ1bmN0aW9uKGQsZixsKXt0aGlzLmF0dGFjaEV2ZW50KCJsb2FkZWQiLGQsZixsKTtyZXR1cm4gdGhpc307Ty5wcm90b3R5cGUuZGV0YWNoTG9hZGVkPWZ1bmN0aW9uKGYsbCl7dGhpcy5kZXRhY2hFdmVudCgibG9hZGVkIixmLGwpO3JldHVybiB0aGlzfTtPLnByb3RvdHlwZS5maXJlRmFpbGVkPWZ1bmN0aW9uKGEpe3RoaXMuZmlyZUV2ZW50KCJmYWlsZWQiLGEpO3JldHVybiB0aGlzfTtPLnByb3RvdHlwZS5hdHRhY2hGYWlsZWQ9ZnVuY3Rpb24oZCxmLGwpe3RoaXMuYXR0YWNoRXZlbnQoImZhaWxlZCIsZCxmLGwpO3JldHVybiB0aGlzfTtPLnByb3RvdHlwZS5kZXRhY2hGYWlsZWQ9ZnVuY3Rpb24oZixsKXt0aGlzLmRldGFjaEV2ZW50KCJmYWlsZWQiLGYsbCk7cmV0dXJuIHRoaXN9O08ucHJvdG90eXBlLl9wYXJzZUFsaWFzZXM9ZnVuY3Rpb24oeCxhLEEpe3ZhciByPXRoaXMueFBhdGguc2VsZWN0Tm9kZXMoeCwiLy9lZG14OlJlZmVyZW5jZSIseCk7Zm9yKHZhciBpPTA7aTxyLmxlbmd0aDtpKz0xKXt2YXIgYj10aGlzLnhQYXRoLm5leHROb2RlKHIsaSk7dmFyIGM9dGhpcy54UGF0aC5zZWxlY3ROb2Rlcyh4LCIuL2VkbXg6SW5jbHVkZSIsYik7aWYoYyYmYy5sZW5ndGg+MCl7dmFyIGQ9dGhpcy54UGF0aC5uZXh0Tm9kZShjLDApO2lmKGQuZ2V0QXR0cmlidXRlKCJBbGlhcyIpKXtBW2QuZ2V0QXR0cmlidXRlKCJBbGlhcyIpXT1kLmdldEF0dHJpYnV0ZSgiTmFtZXNwYWNlIil9ZWxzZXtBW2QuZ2V0QXR0cmlidXRlKCJOYW1lc3BhY2UiKV09ZC5nZXRBdHRyaWJ1dGUoIk5hbWVzcGFjZSIpfX12YXIgZT10aGlzLnhQYXRoLnNlbGVjdE5vZGVzKHgsIi4vZWRteDpJbmNsdWRlQW5ub3RhdGlvbnMiLGIpO2lmKGUubGVuZ3RoPjApe2Zvcih2YXIgaj0wO2o8ZS5sZW5ndGg7ais9MSl7dmFyIGY9dGhpcy54UGF0aC5uZXh0Tm9kZShlLGopO2lmKGYuZ2V0QXR0cmlidXRlKCJUYXJnZXROYW1lc3BhY2UiKSl7dmFyIHM9Zi5nZXRBdHRyaWJ1dGUoIlRhcmdldE5hbWVzcGFjZSIpO2lmKCFhW3NdKXthW3NdPXt9fWFbc11bZi5nZXRBdHRyaWJ1dGUoIlRlcm1OYW1lc3BhY2UiKV09Yi5nZXRBdHRyaWJ1dGUoIlVyaSIpfWVsc2V7YVtmLmdldEF0dHJpYnV0ZSgiVGVybU5hbWVzcGFjZSIpXT1iLmdldEF0dHJpYnV0ZSgiVXJpIil9fX19fTtPLnByb3RvdHlwZS5wYXJzZT1mdW5jdGlvbih4KXt2YXIgbT17fSxzLFM9e30sYSxBPXt9LHQ9dGhpcyxiLFQsYyxkLE0sZSxmLGcsaCxqLHAsayxsLG4sbyxyLHUsdix3LHkseixCLEM7dmFyIEQ9e307dGhpcy54UGF0aD10aGlzLmdldFhQYXRoKCk7dGhpcy5vU2VydmljZU1ldGFkYXRhPXRoaXMub01ldGFkYXRhLmdldFNlcnZpY2VNZXRhZGF0YSgpO3g9dGhpcy54UGF0aC5zZXROYW1lU3BhY2UoeCk7cz10aGlzLnhQYXRoLnNlbGVjdE5vZGVzKHgsIi8vZDpTY2hlbWEiLHgpO2Zvcih2YXIgaT0wO2k8cy5sZW5ndGg7aSs9MSl7YT10aGlzLnhQYXRoLm5leHROb2RlKHMsaSk7Uy5BbGlhcz1hLmdldEF0dHJpYnV0ZSgiQWxpYXMiKTtTLk5hbWVzcGFjZT1hLmdldEF0dHJpYnV0ZSgiTmFtZXNwYWNlIil9dGhpcy5fcGFyc2VBbGlhc2VzKHgsQSxEKTtpZihBKXttLmFubm90YXRpb25SZWZlcmVuY2VzPUF9bS5hbGlhc0RlZmluaXRpb25zPUQ7Yj10aGlzLnhQYXRoLnNlbGVjdE5vZGVzKHgsIi8vZDpUZXJtIix4KTtpZihiLmxlbmd0aD4wKXtUPXt9O2Zvcih2YXIgRj0wO0Y8Yi5sZW5ndGg7Ris9MSl7Yz10aGlzLnhQYXRoLm5leHROb2RlKGIsRik7ZD10aGlzLnJlcGxhY2VXaXRoQWxpYXMoYy5nZXRBdHRyaWJ1dGUoIlR5cGUiKSxEKTtUWyJAIitTLkFsaWFzKyIuIitjLmdldEF0dHJpYnV0ZSgiTmFtZSIpXT1kfW0udGVybURlZmluaXRpb25zPVR9TT10aGlzLmdldEFsbFByb3BlcnRpZXNNZXRhZGF0YSh0aGlzLm9TZXJ2aWNlTWV0YWRhdGEpO2lmKE0uZXh0ZW5zaW9ucyl7bS5wcm9wZXJ0eUV4dGVuc2lvbnM9TS5leHRlbnNpb25zfWU9dGhpcy54UGF0aC5zZWxlY3ROb2Rlcyh4LCIvL2Q6QW5ub3RhdGlvbnMgIix4KTtmb3IodmFyIEY9MDtGPGUubGVuZ3RoO0YrPTEpe2Y9dGhpcy54UGF0aC5uZXh0Tm9kZShlLEYpO2lmKGYuaGFzQ2hpbGROb2RlcygpPT09ZmFsc2Upe2NvbnRpbnVlfWc9Zi5nZXRBdHRyaWJ1dGUoIlRhcmdldCIpO2g9Zy5zcGxpdCgiLiIpWzBdO2lmKGgmJkRbaF0pe2c9Zy5yZXBsYWNlKG5ldyBSZWdFeHAoaCwiIiksRFtoXSl9aj1nO3A9bnVsbDtpZihnLmluZGV4T2YoIi8iKT4wKXtqPWcuc3BsaXQoIi8iKVswXTtwPWcucmVwbGFjZShqKyIvIiwiIil9aWYoIW1bal0pe21bal09e319aWYocCl7aWYoIW0ucHJvcGVydHlBbm5vdGF0aW9ucyl7bS5wcm9wZXJ0eUFubm90YXRpb25zPXt9fWlmKCFtLnByb3BlcnR5QW5ub3RhdGlvbnNbal0pe20ucHJvcGVydHlBbm5vdGF0aW9uc1tqXT17fX1tLnByb3BlcnR5QW5ub3RhdGlvbnNbal1bcF09e307az10aGlzLnhQYXRoLnNlbGVjdE5vZGVzKHgsIi4vZDpBbm5vdGF0aW9uIixmKTtmb3IodmFyIEc9MDtHPGsubGVuZ3RoO0crPTEpe2w9dGhpcy54UGF0aC5uZXh0Tm9kZShrLEcpO2lmKGwuaGFzQ2hpbGROb2RlcygpPT09ZmFsc2Upe249dGhpcy5yZXBsYWNlV2l0aEFsaWFzKGwuZ2V0QXR0cmlidXRlKCJUZXJtIiksRCk7bS5wcm9wZXJ0eUFubm90YXRpb25zW2pdW3BdW25dPXRoaXMuZ2V0UHJvcGVydHlWYWx1ZUF0dHJpYnV0ZXMobCxEKX19fWVsc2V7bz1qLnJlcGxhY2UoRFtoXSxoKTtrPXRoaXMueFBhdGguc2VsZWN0Tm9kZXMoeCwiLi9kOkFubm90YXRpb24iLGYpO2Zvcih2YXIgSD0wO0g8ay5sZW5ndGg7SCs9MSl7bD10aGlzLnhQYXRoLm5leHROb2RlKGssSCk7cj1sLmdldEF0dHJpYnV0ZSgiUXVhbGlmaWVyIik7dT10aGlzLnJlcGxhY2VXaXRoQWxpYXMobC5nZXRBdHRyaWJ1dGUoIlRlcm0iKSxEKTtpZihyKXt1Kz0iIyIrcn12PXRoaXMuZ2V0UHJvcGVydHlWYWx1ZSh4LGwsbyxEKTt2PXRoaXMuc2V0RWRtVHlwZXModixNLnR5cGVzLGosUyk7bVtqXVt1XT12fXc9dGhpcy54UGF0aC5zZWxlY3ROb2Rlcyh4LCIvL2Q6QW5ub3RhdGlvbnNbY29udGFpbnMoQFRhcmdldCwgJyIrbysiJyldLy9kOlByb3BlcnR5VmFsdWVbY29udGFpbnMoQFBhdGgsICcvJyldLy9AUGF0aCIseCk7Zm9yKGk9MDtpPHcubGVuZ3RoO2krPTEpe3k9dGhpcy54UGF0aC5uZXh0Tm9kZSh3LGkpO3o9eS52YWx1ZTtpZihtLnByb3BlcnR5QW5ub3RhdGlvbnMpe2lmKG0ucHJvcGVydHlBbm5vdGF0aW9uc1tqXSl7aWYobS5wcm9wZXJ0eUFubm90YXRpb25zW2pdW3pdKXtjb250aW51ZX19fUI9ei5zcGxpdCgnLycpO2lmKHRoaXMuaXNOYXZQcm9wZXJ0eShqLEJbMF0sdGhpcy5vU2VydmljZU1ldGFkYXRhKSl7aWYoIW0uZXhwYW5kKXttLmV4cGFuZD17fX1pZighbS5leHBhbmRbal0pe20uZXhwYW5kW2pdPXt9fW0uZXhwYW5kW2pdW0JbMF1dPUJbMF19fUM9dGhpcy54UGF0aC5zZWxlY3ROb2Rlcyh4LCIvL2Q6QW5ub3RhdGlvbnNbY29udGFpbnMoQFRhcmdldCwgJyIrbysiJyldLy9kOlBhdGhbY29udGFpbnMoLiwgJy8nKV0iLHgpO2ZvcihpPTA7aTxDLmxlbmd0aDtpKz0xKXt5PXRoaXMueFBhdGgubmV4dE5vZGUoQyxpKTt6PXRoaXMueFBhdGguZ2V0Tm9kZVRleHQoeSk7aWYobS5wcm9wZXJ0eUFubm90YXRpb25zW2pdKXtpZihtLnByb3BlcnR5QW5ub3RhdGlvbnNbal1bel0pe2NvbnRpbnVlfX1pZighbS5leHBhbmQpe20uZXhwYW5kPXt9fWlmKCFtLmV4cGFuZFtqXSl7bS5leHBhbmRbal09e319Qj16LnNwbGl0KCcvJyk7aWYodGhpcy5pc05hdlByb3BlcnR5KGosQlswXSx0aGlzLm9TZXJ2aWNlTWV0YWRhdGEpKXtpZighbS5leHBhbmQpe20uZXhwYW5kPXt9fWlmKCFtLmV4cGFuZFtqXSl7bS5leHBhbmRbal09e319bS5leHBhbmRbal1bQlswXV09QlswXX19fX1yZXR1cm4gbX07Ty5wcm90b3R5cGUuZ2V0WFBhdGg9ZnVuY3Rpb24oKXt2YXIgeD17fTtpZih0aGlzLnhtbENvbXBhdFZlcnNpb24pe3g9e3NldE5hbWVTcGFjZTpmdW5jdGlvbihvKXtvLnNldFByb3BlcnR5KCJTZWxlY3Rpb25OYW1lc3BhY2VzIiwneG1sbnM6ZWRteD0iaHR0cDovL2RvY3Mub2FzaXMtb3Blbi5vcmcvb2RhdGEvbnMvZWRteCIgeG1sbnM6ZD0iaHR0cDovL2RvY3Mub2FzaXMtb3Blbi5vcmcvb2RhdGEvbnMvZWRtIicpO28uc2V0UHJvcGVydHkoIlNlbGVjdGlvbkxhbmd1YWdlIiwiWFBhdGgiKTtyZXR1cm4gb30sc2VsZWN0Tm9kZXM6ZnVuY3Rpb24obyx4LGkpe3JldHVybiBpLnNlbGVjdE5vZGVzKHgpfSxuZXh0Tm9kZTpmdW5jdGlvbihuKXtyZXR1cm4gbi5uZXh0Tm9kZSgpfSxnZXROb2RlVGV4dDpmdW5jdGlvbihuKXtyZXR1cm4gbi50ZXh0fX19ZWxzZXt4PXtzZXROYW1lU3BhY2U6ZnVuY3Rpb24obyl7cmV0dXJuIG99LG5zUmVzb2x2ZXI6ZnVuY3Rpb24ocCl7dmFyIG49eyJlZG14IjoiaHR0cDovL2RvY3Mub2FzaXMtb3Blbi5vcmcvb2RhdGEvbnMvZWRteCIsImQiOiJodHRwOi8vZG9jcy5vYXNpcy1vcGVuLm9yZy9vZGF0YS9ucy9lZG0ifTtyZXR1cm4gbltwXXx8bnVsbH0sc2VsZWN0Tm9kZXM6ZnVuY3Rpb24obyxwLGkpe3ZhciBhPW8uZXZhbHVhdGUocCxpLHRoaXMubnNSZXNvbHZlciw3LG51bGwpO2EubGVuZ3RoPWEuc25hcHNob3RMZW5ndGg7cmV0dXJuIGF9LG5leHROb2RlOmZ1bmN0aW9uKG4saSl7cmV0dXJuIG4uc25hcHNob3RJdGVtKGkpfSxnZXROb2RlVGV4dDpmdW5jdGlvbihuKXtyZXR1cm4gbi50ZXh0Q29udGVudH19fXJldHVybiB4fTtPLnByb3RvdHlwZS5zZXRYTUw9ZnVuY3Rpb24oeCxYLG8pe3ZhciBkPXtzdWNjZXNzOmZ1bmN0aW9uKCl7fSxlcnJvcjpmdW5jdGlvbigpe319O289cS5leHRlbmQoe30sZCxvKTt2YXIgdD10aGlzO3ZhciBhPW51bGw7aWYoc2FwLnVpLkRldmljZS5icm93c2VyLmludGVybmV0X2V4cGxvcmVyKXthPW5ldyBBY3RpdmVYT2JqZWN0KCJNaWNyb3NvZnQuWE1MRE9NIik7YS5sb2FkWE1MKFgpO3RoaXMueG1sQ29tcGF0VmVyc2lvbj10cnVlfWVsc2UgaWYoeCl7YT14fWVsc2V7YT1uZXcgRE9NUGFyc2VyKCkucGFyc2VGcm9tU3RyaW5nKFgsJ2FwcGxpY2F0aW9uL3htbCcpfWlmKGEuZ2V0RWxlbWVudHNCeVRhZ05hbWUoInBhcnNlcmVycm9yIikubGVuZ3RoPjApe28uZXJyb3Ioe3htbERvYzphfSk7cmV0dXJuIGZhbHNlfWVsc2V7aWYocS5pc0VtcHR5T2JqZWN0KHRoaXMub01ldGFkYXRhLmdldFNlcnZpY2VNZXRhZGF0YSgpKSl7dGhpcy5vTWV0YWRhdGEuYXR0YWNoTG9hZGVkKGZ1bmN0aW9uKCl7dmFyIEE9dC5wYXJzZShhKTtpZihBKXtvLnN1Y2Nlc3Moe2Fubm90YXRpb25zOkEseG1sRG9jOmF9KX1lbHNle28uZXJyb3Ioe3htbERvYzphfSl9fSl9ZWxzZXt2YXIgQT10aGlzLnBhcnNlKGEpO2lmKEEpe28uc3VjY2Vzcyh7YW5ub3RhdGlvbnM6QSx4bWxEb2M6YX0pfWVsc2V7by5lcnJvcih7eG1sRG9jOmF9KX19cmV0dXJuIHRydWV9fTtPLnByb3RvdHlwZS5sb2FkWE1MPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztpZighcS5pc0FycmF5KHRoaXMuYUFubm90YXRpb25VUkkpKXt0aGlzLmFBbm5vdGF0aW9uVVJJPVt0aGlzLmFBbm5vdGF0aW9uVVJJXX12YXIgbD10aGlzLmFBbm5vdGF0aW9uVVJJLmxlbmd0aDt0aGlzLm1Mb2FkZWQ9e2xlbmd0aDpsfTtmb3IodmFyIGk9MDtpPGw7KytpKXt0aGlzLm1Mb2FkZWRbaV09ZmFsc2U7dmFyIGE9e3VybDp0aGlzLmFBbm5vdGF0aW9uVVJJW2ldLGFzeW5jOnRoaXMuYkFzeW5jfTt2YXIgaD0oZnVuY3Rpb24ocil7cmV0dXJuIGZ1bmN0aW9uIF9oYW5kbGVGYWlsKGoscyl7aWYodC5vUmVxdWVzdEhhbmRsZXNbcl0mJnQub1JlcXVlc3RIYW5kbGVzW3JdLmJTdXBwcmVzc0Vycm9ySGFuZGxlckNhbGwpe3JldHVybn10Lm9SZXF1ZXN0SGFuZGxlc1tyXT1udWxsO3QuZXJyb3I9e21lc3NhZ2U6cyxzdGF0dXNDb2RlOmouc3RhdHVzQ29kZSxzdGF0dXNUZXh0Omouc3RhdHVzVGV4dCx1cmw6dC5hQW5ub3RhdGlvblVSSVtyXSxyZXNwb25zZVRleHQ6ai5yZXNwb25zZVRleHR9O2lmKCF0aGlzLmJBc3luYyl7dC5vRmFpbGVkRXZlbnQ9cS5zYXAuZGVsYXllZENhbGwoMCx0LHQuZmlyZUZhaWxlZCxbdC5lcnJvcl0pfWVsc2V7dC5maXJlRmFpbGVkKHQuZXJyb3IpfX19KShpKTt2YXIgSD0oZnVuY3Rpb24ocil7cmV0dXJuIGZ1bmN0aW9uKGQsVCxqKXt0Lm9SZXF1ZXN0SGFuZGxlc1tyXT1udWxsO3Quc2V0WE1MKGoucmVzcG9uc2VYTUwsai5yZXNwb25zZVRleHQse3N1Y2Nlc3M6ZnVuY3Rpb24oRCl7dC5tTG9hZGVkW3JdPUQuYW5ub3RhdGlvbnM7dC5jaGVja0FsbExvYWRlZCgpfSxlcnJvcjpmdW5jdGlvbihEKXt0Lm1Mb2FkZWRbcl09ZmFsc2U7aChqLCJNYWxmb3JtZWQgWE1MIGRvY3VtZW50Iik7dC5jaGVja0FsbExvYWRlZCgpfX0pfX0pKGkpO3RoaXMub1JlcXVlc3RIYW5kbGVzW2ldPXEuYWpheChhKS5kb25lKEgpLmZhaWwoaCl9fTtPLnByb3RvdHlwZS5jaGVja0FsbExvYWRlZD1mdW5jdGlvbigpe3ZhciBsPXRoaXMubUxvYWRlZC5sZW5ndGg7Zm9yKHZhciBpPTA7aTxsOysraSl7aWYoIXRoaXMubUxvYWRlZFtpXSl7cmV0dXJufX10aGlzLm9Bbm5vdGF0aW9ucz17fTtmb3IodmFyIGk9MDtpPGw7KytpKXtxLmV4dGVuZCh0cnVlLHRoaXMub0Fubm90YXRpb25zLHRoaXMubUxvYWRlZFtpXSl9dGhpcy5iTG9hZGVkPXRydWU7aWYodGhpcy5iQXN5bmMpe3RoaXMuZmlyZUxvYWRlZCh7YW5ub3RhdGlvbnM6dGhpcy5vQW5ub3RhdGlvbnN9KX1lbHNle3RoaXMub0xvYWRFdmVudD1xLnNhcC5kZWxheWVkQ2FsbCgwLHRoaXMsdGhpcy5maXJlTG9hZGVkLFt7YW5ub3RhdGlvbnM6dGhpcy5vQW5ub3RhdGlvbnN9XSl9fTtPLnByb3RvdHlwZS5nZXRBbGxQcm9wZXJ0aWVzTWV0YWRhdGE9ZnVuY3Rpb24obSl7dmFyIE09e30sUD17fSxvPXt9LGI9ZmFsc2UsbixlLGMsYT17fSxkPXt9LGY9e30sZz1mYWxzZSxoLEMscyx0LHIsUjtmb3IodmFyIGk9bS5kYXRhU2VydmljZXMuc2NoZW1hLmxlbmd0aC0xO2k+PTA7aS09MSl7TT1tLmRhdGFTZXJ2aWNlcy5zY2hlbWFbaV07aWYoTS5lbnRpdHlUeXBlKXtuPU0ubmFtZXNwYWNlO2U9TS5lbnRpdHlUeXBlO2M9TS5jb21wbGV4VHlwZTtmb3IodmFyIGogaW4gZSl7YT1lW2pdO2Y9e307aWYoYS5oYXNTdHJlYW0mJmEuaGFzU3RyZWFtPT09InRydWUiKXtjb250aW51ZX1mb3IodmFyIGsgaW4gYS5wcm9wZXJ0eSl7aD1hLnByb3BlcnR5W2tdO2lmKGgudHlwZS5zdWJzdHJpbmcoMCxuLmxlbmd0aCk9PT1uKXtmb3IodmFyIGwgaW4gYyl7aWYoY1tsXS5uYW1lPT09aC50eXBlLnN1YnN0cmluZyhuLmxlbmd0aCsxKSl7Zm9yKGsgaW4gY1tsXS5wcm9wZXJ0eSl7Qz1jW2xdLnByb3BlcnR5W2tdO2RbY1tsXS5uYW1lKyIvIitDLm5hbWVdPUMudHlwZX19fX1lbHNle3M9aC5uYW1lO3Q9aC50eXBlO2Zvcih2YXIgcCBpbiBoLmV4dGVuc2lvbnMpe3I9aC5leHRlbnNpb25zW3BdO2lmKChyLm5hbWU9PT0iZGlzcGxheS1mb3JtYXQiKSYmKHIudmFsdWU9PT0iRGF0ZSIpKXt0PSJFZG0uRGF0ZSJ9ZWxzZXtnPXRydWU7aWYoIWZbc10pe2Zbc109e319aWYoci5uYW1lc3BhY2UmJiFmW3NdW3IubmFtZXNwYWNlXSl7ZltzXVtyLm5hbWVzcGFjZV09e319ZltzXVtyLm5hbWVzcGFjZV1bci5uYW1lXT1yLnZhbHVlfX1kW3NdPXR9fWlmKCFQW24rIi4iK2EubmFtZV0pe1BbbisiLiIrYS5uYW1lXT17fX1QW24rIi4iK2EubmFtZV09ZDtpZihnKXtpZighb1tuKyIuIithLm5hbWVdKXtiPXRydWV9b1tuKyIuIithLm5hbWVdPXt9O29bbisiLiIrYS5uYW1lXT1mfX19fWlmKGIpe1I9e3R5cGVzOlAsZXh0ZW5zaW9uczpvfX1lbHNle1I9e3R5cGVzOlB9fXJldHVybiBSfTtPLnByb3RvdHlwZS5zZXRFZG1UeXBlcz1mdW5jdGlvbihwLFAsdCxzKXt2YXIgbyxlPScnO2Zvcih2YXIgYSBpbiBwKXtpZihwW2FdKXtvPXBbYV07aWYoby5WYWx1ZSYmby5WYWx1ZS5QYXRoKXtlPXRoaXMuZ2V0RWRtVHlwZShvLlZhbHVlLlBhdGgsUCx0LHMpO2lmKGUpe3BbYV0uRWRtVHlwZT1lfWNvbnRpbnVlfWlmKG8uUGF0aCl7ZT10aGlzLmdldEVkbVR5cGUoby5QYXRoLFAsdCxzKTtpZihlKXtwW2FdLkVkbVR5cGU9ZX1jb250aW51ZX1pZihvLkZhY2V0cyl7cFthXS5GYWNldHM9dGhpcy5zZXRFZG1UeXBlcyhvLkZhY2V0cyxQLHQscyk7Y29udGludWV9aWYoby5EYXRhKXtwW2FdLkRhdGE9dGhpcy5zZXRFZG1UeXBlcyhvLkRhdGEsUCx0LHMpO2NvbnRpbnVlfWlmKGE9PT0iRGF0YSIpe3AuRGF0YT10aGlzLnNldEVkbVR5cGVzKG8sUCx0LHMpO2NvbnRpbnVlfWlmKG8uVmFsdWUmJm8uVmFsdWUuQXBwbHkpe3BbYV0uVmFsdWUuQXBwbHkuUGFyYW1ldGVycz10aGlzLnNldEVkbVR5cGVzKG8uVmFsdWUuQXBwbHkuUGFyYW1ldGVycyxQLHQscyk7Y29udGludWV9aWYoby5WYWx1ZSYmby5UeXBlJiYoby5UeXBlPT09IlBhdGgiKSl7ZT10aGlzLmdldEVkbVR5cGUoby5WYWx1ZSxQLHQscyk7aWYoZSl7cFthXS5FZG1UeXBlPWV9fX19cmV0dXJuIHB9O08ucHJvdG90eXBlLmdldEVkbVR5cGU9ZnVuY3Rpb24ocCxQLHQscyl7aWYoKHAuY2hhckF0KDApPT09IkAiKSYmKHAuaW5kZXhPZihzLkFsaWFzKT09PTEpKXtwPXAuc2xpY2Uocy5BbGlhcy5sZW5ndGgrMil9aWYocC5pbmRleE9mKCIvIik+PTApe2lmKFBbcC5zbGljZSgwLHAuaW5kZXhPZigiLyIpKV0pe3Q9cC5zbGljZSgwLHAuaW5kZXhPZigiLyIpKTtwPXAuc2xpY2UocC5pbmRleE9mKCIvIikrMSl9fWZvcih2YXIgYSBpbiBQW3RdKXtpZihwPT09YSl7cmV0dXJuIFBbdF1bYV19fX07Ty5wcm90b3R5cGUuZ2V0UHJvcGVydHlWYWx1ZUF0dHJpYnV0ZXM9ZnVuY3Rpb24oZCxhKXt2YXIgYj0iIixjPSIiLGkscD17fTtmb3IoaT0wO2k8ZC5hdHRyaWJ1dGVzLmxlbmd0aDtpKz0xKXtpZigoZC5hdHRyaWJ1dGVzW2ldLm5hbWUhPT0iUHJvcGVydHkiKSYmKGQuYXR0cmlidXRlc1tpXS5uYW1lIT09IlRlcm0iKSl7Yj1kLmF0dHJpYnV0ZXNbaV0ubmFtZTtjPWQuYXR0cmlidXRlc1tpXS52YWx1ZX19aWYoYi5sZW5ndGg+MCl7cFtiXT10aGlzLnJlcGxhY2VXaXRoQWxpYXMoYyxhKX1yZXR1cm4gcH07Ty5wcm90b3R5cGUuZ2V0U2ltcGxlTm9kZVZhbHVlPWZ1bmN0aW9uKHgsZCl7dmFyIHY9e30scyxhLHAsYixjLGU7aWYoZC5oYXNDaGlsZE5vZGVzKCkpe3M9dGhpcy54UGF0aC5zZWxlY3ROb2Rlcyh4LCIuL2Q6U3RyaW5nIixkKTtpZihzLmxlbmd0aD4wKXthPXRoaXMueFBhdGgubmV4dE5vZGUocywwKTt2WyJTdHJpbmciXT10aGlzLnhQYXRoLmdldE5vZGVUZXh0KGEpfWVsc2V7cD10aGlzLnhQYXRoLnNlbGVjdE5vZGVzKHgsIi4vZDpQYXRoIixkKTtpZihwLmxlbmd0aD4wKXtiPXRoaXMueFBhdGgubmV4dE5vZGUocCwwKTt2WyJQYXRoIl09dGhpcy54UGF0aC5nZXROb2RlVGV4dChiKX1lbHNle2M9dGhpcy54UGF0aC5zZWxlY3ROb2Rlcyh4LCIuL2Q6QXBwbHkiLGQpO2lmKGMubGVuZ3RoPjApe2U9dGhpcy54UGF0aC5uZXh0Tm9kZShjLDApO3ZbIkFwcGx5Il09dGhpcy5nZXRBcHBseUZ1bmN0aW9ucyh4LGUsdGhpcy54UGF0aCl9fX19cmV0dXJuIHZ9O08ucHJvdG90eXBlLmdldFByb3BlcnR5VmFsdWU9ZnVuY3Rpb24oeCxkLHQsYSl7dmFyIHA9e30scixiLG4sYyxlLHUsZixnLFA9e30saCxpLGosayxsO3ZhciBtPXRoaXMuZ2V0WFBhdGgoKTtpZihkLmhhc0NoaWxkTm9kZXMoKSl7cj10aGlzLnhQYXRoLnNlbGVjdE5vZGVzKHgsIi4vZDpSZWNvcmQgfCAuL2Q6Q29sbGVjdGlvbi9kOlJlY29yZCB8IC4vZDpDb2xsZWN0aW9uL2Q6SWYvZDpSZWNvcmQiLGQpO2lmKHIubGVuZ3RoKXtiPTA7Zm9yKG49MDtuPHIubGVuZ3RoO24rPTEpe2M9dGhpcy54UGF0aC5uZXh0Tm9kZShyLG4pO2U9dGhpcy5nZXRQcm9wZXJ0eVZhbHVlcyh4LGMsdCxhKTtpZihjLmdldEF0dHJpYnV0ZSgiVHlwZSIpKXtlWyJSZWNvcmRUeXBlIl09dGhpcy5yZXBsYWNlV2l0aEFsaWFzKGMuZ2V0QXR0cmlidXRlKCJUeXBlIiksYSl9aWYoYj09PTApe2lmKGMubmV4dEVsZW1lbnRTaWJsaW5nfHwoYy5wYXJlbnROb2RlLm5vZGVOYW1lPT09IkNvbGxlY3Rpb24iKXx8KGMucGFyZW50Tm9kZS5ub2RlTmFtZT09PSJJZiIpKXtwPVtdO3AucHVzaChlKX1lbHNle3A9ZX19ZWxzZXtwLnB1c2goZSl9Yis9MX19ZWxzZXt1PXRoaXMueFBhdGguc2VsZWN0Tm9kZXMoeCwiLi9kOlVybFJlZiIsZCk7aWYodS5sZW5ndGg+MCl7Zm9yKG49MDtuPHUubGVuZ3RoO24rPTEpe2Y9dGhpcy54UGF0aC5uZXh0Tm9kZSh1LG4pO3BbIlVybFJlZiJdPXRoaXMuZ2V0U2ltcGxlTm9kZVZhbHVlKHgsZil9fWVsc2V7dT10aGlzLnhQYXRoLnNlbGVjdE5vZGVzKHgsIi4vZDpVcmwiLGQpO2lmKHUubGVuZ3RoPjApe2ZvcihuPTA7bjx1Lmxlbmd0aDtuKz0xKXtmPXRoaXMueFBhdGgubmV4dE5vZGUodSxuKTtwWyJVcmwiXT10aGlzLmdldFNpbXBsZU5vZGVWYWx1ZSh4LGYpfX1lbHNle2w9dGhpcy54UGF0aC5zZWxlY3ROb2Rlcyh4LCIuL2Q6Q29sbGVjdGlvbi9kOkFubm90YXRpb25QYXRoIHwgLi9kOkNvbGxlY3Rpb24vZDpQcm9wZXJ0eVBhdGgiLGQpO2lmKGwubGVuZ3RoPjApe3A9W107Zm9yKG49MDtuPGwubGVuZ3RoO24rPTEpe2c9dGhpcy54UGF0aC5uZXh0Tm9kZShsLG4pO1A9e307UFtnLm5vZGVOYW1lXT1tLmdldE5vZGVUZXh0KGcpO3AucHVzaChQKX19ZWxzZXtwPXRoaXMuZ2V0UHJvcGVydHlWYWx1ZUF0dHJpYnV0ZXMoZCxhKTtoPXRoaXMueFBhdGguc2VsZWN0Tm9kZXMoeCwiLi9kOkFubm90YXRpb24iLGQpO2k9e307Zm9yKGo9MDtqPGgubGVuZ3RoO2orPTEpe2k9dGhpcy54UGF0aC5uZXh0Tm9kZShoLGopO2lmKGkuaGFzQ2hpbGROb2RlcygpPT09ZmFsc2Upe2s9dGhpcy5yZXBsYWNlV2l0aEFsaWFzKGkuZ2V0QXR0cmlidXRlKCJUZXJtIiksYSk7cFtrXT10aGlzLmdldFByb3BlcnR5VmFsdWVBdHRyaWJ1dGVzKGksYSl9fX19fX19ZWxzZXtwPXRoaXMuZ2V0UHJvcGVydHlWYWx1ZUF0dHJpYnV0ZXMoZCxhKX1yZXR1cm4gcH07Ty5wcm90b3R5cGUuZ2V0UHJvcGVydHlWYWx1ZXM9ZnVuY3Rpb24oeCxkLHQsYSl7dmFyIHA9e30sYj17fSxjLG4sZSxmLGcsaCxpLGosayxsO2M9dGhpcy54UGF0aC5zZWxlY3ROb2Rlcyh4LCIuL2Q6QW5ub3RhdGlvbiIsZCk7Zm9yKG49MDtuPGMubGVuZ3RoO24rPTEpe2I9dGhpcy54UGF0aC5uZXh0Tm9kZShjLG4pO2lmKGIuaGFzQ2hpbGROb2RlcygpPT09ZmFsc2Upe2U9dGhpcy5yZXBsYWNlV2l0aEFsaWFzKGIuZ2V0QXR0cmlidXRlKCJUZXJtIiksYSk7cFtlXT10aGlzLmdldFByb3BlcnR5VmFsdWVBdHRyaWJ1dGVzKGIsYSl9fWY9dGhpcy54UGF0aC5zZWxlY3ROb2Rlcyh4LCIuL2Q6UHJvcGVydHlWYWx1ZSIsZCk7aWYoZi5sZW5ndGg+MCl7Zm9yKGc9MDtnPGYubGVuZ3RoO2crPTEpe2g9dGhpcy54UGF0aC5uZXh0Tm9kZShmLGcpO2k9aC5nZXRBdHRyaWJ1dGUoIlByb3BlcnR5Iik7cFtpXT10aGlzLmdldFByb3BlcnR5VmFsdWUoeCxoLHQsYSk7aj10aGlzLnhQYXRoLnNlbGVjdE5vZGVzKHgsIi4vZDpBcHBseSIsaCk7az1udWxsO2ZvcihsPTA7bDxqLmxlbmd0aDtsKz0xKXtrPXRoaXMueFBhdGgubmV4dE5vZGUoaixsKTtpZihrKXtwW2ldPXt9O3BbaV1bJ0FwcGx5J109dGhpcy5nZXRBcHBseUZ1bmN0aW9ucyh4LGspfX19fWVsc2V7cD10aGlzLmdldFByb3BlcnR5VmFsdWUoeCxkLHQsYSl9cmV0dXJuIHB9O08ucHJvdG90eXBlLmdldEFwcGx5RnVuY3Rpb25zPWZ1bmN0aW9uKHgsYSl7dmFyIGI9e30scCxjPW51bGwsZD1bXSxpO3A9dGhpcy54UGF0aC5zZWxlY3ROb2Rlcyh4LCIuL2Q6KiIsYSk7Zm9yKGk9MDtpPHAubGVuZ3RoO2krPTEpe2M9dGhpcy54UGF0aC5uZXh0Tm9kZShwLGkpO3N3aXRjaChjLm5vZGVOYW1lKXtjYXNlIkFwcGx5IjpkLnB1c2goeyJUeXBlIjoiQXBwbHkiLCJWYWx1ZSI6dGhpcy5nZXRBcHBseUZ1bmN0aW9ucyh4LGMpfSk7YnJlYWs7Y2FzZSJMYWJlbGVkRWxlbWVudCI6ZC5wdXNoKHsiTmFtZSI6Yy5nZXRBdHRyaWJ1dGUoIk5hbWUiKSwiVmFsdWUiOnRoaXMuZ2V0U2ltcGxlTm9kZVZhbHVlKHgsYyl9KTticmVhaztkZWZhdWx0OmQucHVzaCh7IlR5cGUiOmMubm9kZU5hbWUsIlZhbHVlIjp0aGlzLnhQYXRoLmdldE5vZGVUZXh0KGMpfSk7YnJlYWt9fWJbJ05hbWUnXT1hLmdldEF0dHJpYnV0ZSgnRnVuY3Rpb24nKTtiWydQYXJhbWV0ZXJzJ109ZDtyZXR1cm4gYn07Ty5wcm90b3R5cGUuaXNOYXZQcm9wZXJ0eT1mdW5jdGlvbihlLHAsbSl7dmFyIE0saSxuLGEsaixrO2ZvcihpPW0uZGF0YVNlcnZpY2VzLnNjaGVtYS5sZW5ndGgtMTtpPj0wO2ktPTEpe009bS5kYXRhU2VydmljZXMuc2NoZW1hW2ldO2lmKE0uZW50aXR5VHlwZSl7bj1NLm5hbWVzcGFjZSsiLiI7YT1NLmVudGl0eVR5cGU7Zm9yKGs9YS5sZW5ndGgtMTtrPj0wO2stPTEpe2lmKG4rYVtrXS5uYW1lPT09ZSYmYVtrXS5uYXZpZ2F0aW9uUHJvcGVydHkpe2ZvcihqPTA7ajxhW2tdLm5hdmlnYXRpb25Qcm9wZXJ0eS5sZW5ndGg7ais9MSl7aWYoYVtrXS5uYXZpZ2F0aW9uUHJvcGVydHlbal0ubmFtZT09PXApe3JldHVybiB0cnVlfX19fX19cmV0dXJuIGZhbHNlfTtPLnByb3RvdHlwZS5yZXBsYWNlV2l0aEFsaWFzPWZ1bmN0aW9uKHYsYSl7Zm9yKHZhciBBIGluIGEpe2lmKHYuaW5kZXhPZihBKyIuIik+PTApe3Y9di5yZXBsYWNlKEErIi4iLGFbQV0rIi4iKTtyZXR1cm4gdn19cmV0dXJuIHZ9O08ucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXtmb3IodmFyIGk9MDtpPHRoaXMub1JlcXVlc3RIYW5kbGVzLmxlbmd0aDsrK2kpe2lmKHRoaXMub1JlcXVlc3RIYW5kbGVzW2ldKXt0aGlzLm9SZXF1ZXN0SGFuZGxlc1tpXS5iU3VwcHJlc3NFcnJvckhhbmRsZXJDYWxsPXRydWU7dGhpcy5vUmVxdWVzdEhhbmRsZXNbaV0uYWJvcnQoKTt0aGlzLm9SZXF1ZXN0SGFuZGxlc1tpXT1udWxsfX1zYXAudWkuYmFzZS5PYmplY3QucHJvdG90eXBlLmRlc3Ryb3kuYXBwbHkodGhpcyxhcmd1bWVudHMpO2lmKCEhdGhpcy5vTG9hZEV2ZW50KXtxLnNhcC5jbGVhckRlbGF5ZWRDYWxsKHRoaXMub0xvYWRFdmVudCl9aWYoISF0aGlzLm9GYWlsZWRFdmVudCl7cS5zYXAuY2xlYXJEZWxheWVkQ2FsbCh0aGlzLm9GYWlsZWRFdmVudCl9fTtyZXR1cm4gT30sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5tb2RlbC5vZGF0YS5PRGF0YUNvbnRleHRCaW5kaW5nJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLm1vZGVsLm9kYXRhLk9EYXRhQ29udGV4dEJpbmRpbmcnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvbW9kZWwvb2RhdGEvT0RhdGFDb250ZXh0QmluZGluZyIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ3NhcC91aS9tb2RlbC9Db250ZXh0QmluZGluZyddLGZ1bmN0aW9uKHEsQyl7InVzZSBzdHJpY3QiO3ZhciBPPUMuZXh0ZW5kKCJzYXAudWkubW9kZWwub2RhdGEuT0RhdGFDb250ZXh0QmluZGluZyIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKG0scCxjLFAsZSl7Qy5jYWxsKHRoaXMsbSxwLGMsUCxlKX19KTtPLnByb3RvdHlwZS5pbml0aWFsaXplPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxyPXRoaXMub01vZGVsLnJlc29sdmUodGhpcy5zUGF0aCx0aGlzLm9Db250ZXh0KSxkPXRoaXMub01vZGVsLl9nZXRPYmplY3QodGhpcy5zUGF0aCx0aGlzLm9Db250ZXh0KSxSPXRoaXMub01vZGVsLl9pc1JlbG9hZE5lZWRlZChyLGQsdGhpcy5tUGFyYW1ldGVycyk7aWYodGhpcy5vTW9kZWwub01ldGFkYXRhLmlzTG9hZGVkKCkpe2lmKFIpe3RoaXMuZmlyZURhdGFSZXF1ZXN0ZWQoKX10aGlzLm9Nb2RlbC5jcmVhdGVCaW5kaW5nQ29udGV4dCh0aGlzLnNQYXRoLHRoaXMub0NvbnRleHQsdGhpcy5tUGFyYW1ldGVycyxmdW5jdGlvbihjKXt0Lm9FbGVtZW50Q29udGV4dD1jO3QuX2ZpcmVDaGFuZ2UoKTtpZihSKXt0LmZpcmVEYXRhUmVjZWl2ZWQoKX19LFIpfX07Ty5wcm90b3R5cGUucmVmcmVzaD1mdW5jdGlvbihmLGMpe3ZhciB0PXRoaXMsayxzLGI9ZmFsc2U7aWYoYyl7cz10aGlzLm9Nb2RlbC5fZ2V0T2JqZWN0KHRoaXMuc1BhdGgsdGhpcy5vQ29udGV4dCk7aWYocyl7az10aGlzLm9Nb2RlbC5fZ2V0S2V5KHMpO2lmKGsgaW4gYyl7Yj10cnVlfX19ZWxzZXtiPXRydWV9aWYoZnx8Yil7dGhpcy5maXJlRGF0YVJlcXVlc3RlZCgpO3RoaXMub01vZGVsLmNyZWF0ZUJpbmRpbmdDb250ZXh0KHRoaXMuc1BhdGgsdGhpcy5vQ29udGV4dCx0aGlzLm1QYXJhbWV0ZXJzLGZ1bmN0aW9uKG8pe2lmKHQub0VsZW1lbnRDb250ZXh0PT1vKXtpZihmKXt0Ll9maXJlQ2hhbmdlKCl9fWVsc2V7dC5vRWxlbWVudENvbnRleHQ9bzt0Ll9maXJlQ2hhbmdlKCl9dC5maXJlRGF0YVJlY2VpdmVkKCl9LHRydWUpfX07Ty5wcm90b3R5cGUuc2V0Q29udGV4dD1mdW5jdGlvbihjKXt2YXIgdD10aGlzLHIsZCxSO2lmKHRoaXMub0NvbnRleHQhPWMmJnRoaXMuaXNSZWxhdGl2ZSgpKXtyPXRoaXMub01vZGVsLnJlc29sdmUodGhpcy5zUGF0aCx0aGlzLm9Db250ZXh0KSxkPXRoaXMub01vZGVsLl9nZXRPYmplY3QodGhpcy5zUGF0aCx0aGlzLm9Db250ZXh0KSxSPXRoaXMub01vZGVsLl9pc1JlbG9hZE5lZWRlZChyLGQsdGhpcy5tUGFyYW1ldGVycyk7dGhpcy5vQ29udGV4dD1jO2lmKFIpe3RoaXMuZmlyZURhdGFSZXF1ZXN0ZWQoKX10aGlzLm9Nb2RlbC5jcmVhdGVCaW5kaW5nQ29udGV4dCh0aGlzLnNQYXRoLHRoaXMub0NvbnRleHQsdGhpcy5tUGFyYW1ldGVycyxmdW5jdGlvbihjKXt0Lm9FbGVtZW50Q29udGV4dD1jO3QuX2ZpcmVDaGFuZ2UoKTtpZihSKXt0LmZpcmVEYXRhUmVjZWl2ZWQoKX19LFIpfX07cmV0dXJuIE99LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkubW9kZWwub2RhdGEuT0RhdGFNZXRhZGF0YScpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5tb2RlbC5vZGF0YS5PRGF0YU1ldGFkYXRhJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL21vZGVsL29kYXRhL09EYXRhTWV0YWRhdGEiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvYmFzZS9FdmVudFByb3ZpZGVyJ10sZnVuY3Rpb24ocSxFKXsidXNlIHN0cmljdCI7dmFyIE89c2FwLnVpLmJhc2UuRXZlbnRQcm92aWRlci5leHRlbmQoInNhcC51aS5tb2RlbC5vZGF0YS5PRGF0YU1ldGFkYXRhIix7Y29uc3RydWN0b3I6ZnVuY3Rpb24obSxwKXtFLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLmJMb2FkZWQ9ZmFsc2U7dGhpcy5iRmFpbGVkPWZhbHNlO3RoaXMubUVudGl0eVR5cGVzPXt9O3RoaXMub1JlcXVlc3RIYW5kbGU9bnVsbDt0aGlzLnNVcmw9bTt0aGlzLmJBc3luYz1wLmFzeW5jO3RoaXMuc1VzZXI9cC51c2VyO3RoaXMuYldpdGhDcmVkZW50aWFscz1wLndpdGhDcmVkZW50aWFsczt0aGlzLnNQYXNzd29yZD1wLnBhc3N3b3JkO3RoaXMubUhlYWRlcnM9cC5oZWFkZXJzO3RoaXMub0xvYWRFdmVudD1udWxsO3RoaXMub0ZhaWxlZEV2ZW50PW51bGw7dGhpcy5vTWV0YWRhdGE9bnVsbDt0aGlzLm1OYW1lc3BhY2VzPXAubmFtZXNwYWNlc3x8e3NhcDoiaHR0cDovL3d3dy5zYXAuY29tL1Byb3RvY29scy9TQVBEYXRhIixtOiJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL2Fkby8yMDA3LzA4L2RhdGFzZXJ2aWNlcy9tZXRhZGF0YSIsIiI6Imh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vYWRvLzIwMDcvMDYvZWRteCJ9O3RoaXMuX2xvYWRNZXRhZGF0YSgpfSxtZXRhZGF0YTp7cHVibGljTWV0aG9kczpbImdldFNlcnZpY2VNZXRhZGF0YSIsImF0dGFjaEZhaWxlZCIsImRldGFjaEZhaWxlZCIsImF0dGFjaExvYWRlZCIsImRldGFjaExvYWRlZCJdfX0pO08ucHJvdG90eXBlLl9zZXROYW1lc3BhY2VzPWZ1bmN0aW9uKG4pe3RoaXMubU5hbWVzcGFjZXM9bn07Ty5wcm90b3R5cGUuX2xvYWRNZXRhZGF0YT1mdW5jdGlvbigpe3ZhciB0PXRoaXM7dmFyIHI9dGhpcy5fY3JlYXRlUmVxdWVzdCh0aGlzLnNVcmwpO2Z1bmN0aW9uIF8obSxSKXtpZighbXx8IW0uZGF0YVNlcnZpY2VzKXt2YXIgcD17bWVzc2FnZToiSW52YWxpZCBtZXRhZGF0YSBkb2N1bWVudCIscmVxdWVzdDpyLHJlc3BvbnNlOlJ9O2EocCk7cmV0dXJufXQub01ldGFkYXRhPW07dC5vUmVxdWVzdEhhbmRsZT1udWxsO2lmKHQuYkFzeW5jKXt0LmZpcmVMb2FkZWQodCl9ZWxzZXt0LmJMb2FkZWQ9dHJ1ZTt0Lm9Mb2FkRXZlbnQ9cS5zYXAuZGVsYXllZENhbGwoMCx0LHQuZmlyZUxvYWRlZCxbdF0pfX1mdW5jdGlvbiBhKGUpe3ZhciBwPXttZXNzYWdlOmUubWVzc2FnZX07aWYoZS5yZXNwb25zZSl7cC5zdGF0dXNDb2RlPWUucmVzcG9uc2Uuc3RhdHVzQ29kZTtwLnN0YXR1c1RleHQ9ZS5yZXNwb25zZS5zdGF0dXNUZXh0O3AucmVzcG9uc2VUZXh0PWUucmVzcG9uc2UuYm9keX1pZih0Lm9SZXF1ZXN0SGFuZGxlJiZ0Lm9SZXF1ZXN0SGFuZGxlLmJTdXBwcmVzc0Vycm9ySGFuZGxlckNhbGwpe3JldHVybn10Lm9SZXF1ZXN0SGFuZGxlPW51bGw7aWYodC5iQXN5bmMpe3QuZmlyZUZhaWxlZChwKX1lbHNle3Qub0ZhaWxlZEV2ZW50PXEuc2FwLmRlbGF5ZWRDYWxsKDAsdCx0LmZpcmVGYWlsZWQsW3BdKX19dGhpcy5vUmVxdWVzdEhhbmRsZT1PRGF0YS5yZXF1ZXN0KHIsXyxhLE9EYXRhLm1ldGFkYXRhSGFuZGxlcil9O08ucHJvdG90eXBlLmdldFNlcnZpY2VNZXRhZGF0YT1mdW5jdGlvbigpe3JldHVybiB0aGlzLm9NZXRhZGF0YX07Ty5wcm90b3R5cGUuaXNMb2FkZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5iTG9hZGVkfTtPLnByb3RvdHlwZS5maXJlTG9hZGVkPWZ1bmN0aW9uKCl7dGhpcy5iTG9hZGVkPXRydWU7dGhpcy5maXJlRXZlbnQoImxvYWRlZCIpO3Euc2FwLmxvZy5kZWJ1ZygnbG9hZGVkIG9uIE1ldGFkYXRhIG9iamVjdCB3YXMgZmlyZWQnKTtyZXR1cm4gdGhpc307Ty5wcm90b3R5cGUuYXR0YWNoTG9hZGVkPWZ1bmN0aW9uKGQsZixsKXt0aGlzLmF0dGFjaEV2ZW50KCJsb2FkZWQiLGQsZixsKTtyZXR1cm4gdGhpc307Ty5wcm90b3R5cGUuZGV0YWNoTG9hZGVkPWZ1bmN0aW9uKGYsbCl7dGhpcy5kZXRhY2hFdmVudCgibG9hZGVkIixmLGwpO3JldHVybiB0aGlzfTtPLnByb3RvdHlwZS5maXJlRmFpbGVkPWZ1bmN0aW9uKGEpe3RoaXMuZmlyZUV2ZW50KCJmYWlsZWQiLGEpO3JldHVybiB0aGlzfTtPLnByb3RvdHlwZS5hdHRhY2hGYWlsZWQ9ZnVuY3Rpb24oZCxmLGwpe3RoaXMuYXR0YWNoRXZlbnQoImZhaWxlZCIsZCxmLGwpO3JldHVybiB0aGlzfTtPLnByb3RvdHlwZS5kZXRhY2hGYWlsZWQ9ZnVuY3Rpb24oZixsKXt0aGlzLmRldGFjaEV2ZW50KCJmYWlsZWQiLGYsbCk7cmV0dXJuIHRoaXN9O08ucHJvdG90eXBlLl9nZXRFbnRpdHlUeXBlQnlQYXRoPWZ1bmN0aW9uKHApe2lmKCFwKXtyZXR1cm4gbnVsbH1pZighdGhpcy5vTWV0YWRhdGF8fHEuaXNFbXB0eU9iamVjdCh0aGlzLm9NZXRhZGF0YSkpe3JldHVybiBudWxsfXZhciBjPXAucmVwbGFjZSgvXlwvfFwvJC9nLCIiKSxQPWMuc3BsaXQoIi8iKSxsPVAubGVuZ3RoLGEsQSxvLGUsYixkLHIsdD10aGlzO2lmKFBbMF0uaW5kZXhPZigiKCIpIT0tMSl7UFswXT1QWzBdLnN1YnN0cmluZygwLFBbMF0uaW5kZXhPZigiKCIpKX1pZihsPjEpe289dC5fZ2V0RW50aXR5VHlwZUJ5UGF0aChQWzBdKTtmb3IodmFyIGk9MTtpPFAubGVuZ3RoO2krKyl7aWYobyl7aWYoUFtpXS5pbmRleE9mKCIoIikhPS0xKXtQW2ldPVBbaV0uc3Vic3RyaW5nKDAsUFtpXS5pbmRleE9mKCIoIikpfWlmKG8ubmF2aWdhdGlvblByb3BlcnR5KXtyPXQuX2dldEVudGl0eVR5cGVCeU5hdlByb3BlcnR5KG8sUFtpXSk7aWYocil7bz1yfX1kPW99fX1lbHNle2I9dGhpcy5fc3BsaXROYW1lKHRoaXMuX2dldEVudGl0eVR5cGVOYW1lKFBbMF0pKTtkPXRoaXMuX2dldE9iamVjdE1ldGFkYXRhKCJlbnRpdHlUeXBlIixiWzBdLGJbMV0pO2lmKGQpe2QuZW50aXR5VHlwZT10aGlzLl9nZXRFbnRpdHlUeXBlTmFtZShQWzBdKX19aWYoIWQpe3ZhciBmPVBbUC5sZW5ndGgtMV07dmFyIEY9dGhpcy5fZ2V0RnVuY3Rpb25JbXBvcnRNZXRhZGF0YShmLCJHRVQiKTtpZihGJiZGLmVudGl0eVNldCl7ZD10aGlzLl9nZXRFbnRpdHlUeXBlQnlQYXRoKEYuZW50aXR5U2V0KTtpZihkKXtkLmVudGl0eVR5cGU9dGhpcy5fZ2V0RW50aXR5VHlwZU5hbWUoRi5lbnRpdHlTZXQpfX19cmV0dXJuIGR9O08ucHJvdG90eXBlLl9nZXRFbnRpdHlUeXBlQnlOYW1lPWZ1bmN0aW9uKG4pe3ZhciBlLHQ9dGhpcztpZighbil7cmV0dXJuIG51bGx9aWYoIXRoaXMub01ldGFkYXRhfHxxLmlzRW1wdHlPYmplY3QodGhpcy5vTWV0YWRhdGEpKXtyZXR1cm4gbnVsbH1pZih0aGlzLm1FbnRpdHlUeXBlc1tuXSl7ZT10aGlzLm1FbnRpdHlUeXBlc1tuXX1lbHNle3EuZWFjaCh0aGlzLm9NZXRhZGF0YS5kYXRhU2VydmljZXMuc2NoZW1hLGZ1bmN0aW9uKGkscyl7aWYocy5lbnRpdHlUeXBlKXtxLmVhY2gocy5lbnRpdHlUeXBlLGZ1bmN0aW9uKGssbyl7aWYoby5uYW1lPT09bil7ZT1vO3QubUVudGl0eVR5cGVzW25dPWU7ZS5uYW1lc3BhY2U9cy5uYW1lc3BhY2U7cmV0dXJuIGZhbHNlfX0pfX0pfXJldHVybiBlfTtPLnByb3RvdHlwZS5fZ2V0QW5ub3RhdGlvbj1mdW5jdGlvbihwKXt2YXIgbixrLFAsbSxNLGUscyxvLGEscDtQPXAuc3BsaXQoJy8jJyk7TT1QWzFdLnNwbGl0KCcvJyk7aWYoIVBbMF0pe2U9dGhpcy5fZ2V0RW50aXR5VHlwZUJ5TmFtZShNWzBdKTtpZighZSlyZXR1cm47cz1QWzFdLnN1YnN0cihQWzFdLmluZGV4T2YoJy8nKSsxKTtvPXRoaXMuX2dldFByb3BlcnR5TWV0YWRhdGEoZSxzKTtpZighbylyZXR1cm47bT1zLnN1YnN0cihzLmluZGV4T2Yoby5uYW1lKSk7bT1tLnN1YnN0cihtLmluZGV4T2YoJy8nKSsxKX1lbHNle2U9dGhpcy5fZ2V0RW50aXR5VHlwZUJ5UGF0aChQWzBdKTtpZighZSlyZXR1cm47cD1QWzBdLnJlcGxhY2UoL15cL3xcLyQvZywiIik7cz1wLnN1YnN0cihwLmluZGV4T2YoJy8nKSsxKTtvPXRoaXMuX2dldFByb3BlcnR5TWV0YWRhdGEoZSxzKTtpZighbylyZXR1cm47bT1NLmpvaW4oJy8nKX1uPXRoaXMuX2dldEFubm90YXRpb25PYmplY3QoZSxvLG0pO3JldHVybiBufTtPLnByb3RvdHlwZS5fZ2V0QW5ub3RhdGlvbk9iamVjdD1mdW5jdGlvbihlLG8sbSl7dmFyIHQ9dGhpcyxhLHAsQSxuLHM7aWYoIW8pcmV0dXJuO249bztwPW0uc3BsaXQoJy8nKTtpZihwWzBdLmluZGV4T2YoJy4nKT4tMSl7cmV0dXJuIHRoaXMuX2dldFY0QW5ub3RhdGlvbk9iamVjdChlLG8scCl9ZWxzZXtpZihwLmxlbmd0aD4xKXtuPW5bcFswXV07aWYoIW4mJm8uZXh0ZW5zaW9ucyl7Zm9yKHZhciBpPTA7aTxvLmV4dGVuc2lvbnMubGVuZ3RoO2krKyl7dmFyIGI9by5leHRlbnNpb25zW2ldO2lmKGIubmFtZT09cFswXSl7bj1iO2JyZWFrfX19bT1wLnNwbGljZSgwLDEpO0E9dGhpcy5fZ2V0QW5ub3RhdGlvbk9iamVjdChlLG4scC5qb2luKCcvJykpfWVsc2V7aWYocFswXS5pbmRleE9mKCdAJyk+LTEpe3M9cFswXS5zdWJzdHIoMSk7YT1zLnNwbGl0KCc6Jyk7QT1uW2FbMF1dO2lmKCFBJiZuLmV4dGVuc2lvbnMpe2Zvcih2YXIgaT0wO2k8bi5leHRlbnNpb25zLmxlbmd0aDtpKyspe3ZhciBiPW4uZXh0ZW5zaW9uc1tpXTtpZihiLm5hbWU9PT1hWzFdJiZiLm5hbWVzcGFjZT09PXRoaXMubU5hbWVzcGFjZXNbYVswXV0pe0E9Yi52YWx1ZTticmVha319fX1lbHNle2E9cFswXS5zcGxpdCgnOicpO0E9blthWzBdXTtBPW5bcFswXV07aWYoIUEmJm4uZXh0ZW5zaW9ucyl7Zm9yKHZhciBpPTA7aTxuLmV4dGVuc2lvbnMubGVuZ3RoO2krKyl7dmFyIGI9bi5leHRlbnNpb25zW2ldO2lmKGIubmFtZT09PWFbMV0mJmIubmFtZXNwYWNlPT09dGhpcy5tTmFtZXNwYWNlc1thWzBdXSl7QT1iO2JyZWFrfX19fX19cmV0dXJuIEF9O08ucHJvdG90eXBlLl9nZXRWNEFubm90YXRpb25PYmplY3Q9ZnVuY3Rpb24oZSxvLHApe3ZhciBhLEE9W107aWYocC5sZW5ndGg+MSl7cmV0dXJufXZhciB0PWUubmFtZXNwYWNlP2UubmFtZXNwYWNlKyIuIjoiIjt0Kz1lLm5hbWUrIi8iK28ubmFtZTtxLmVhY2godGhpcy5vTWV0YWRhdGEuZGF0YVNlcnZpY2VzLnNjaGVtYSxmdW5jdGlvbihpLHMpe2lmKHMuYW5ub3RhdGlvbnMpe3EuZWFjaChzLmFubm90YXRpb25zLGZ1bmN0aW9uKGssbyl7aWYoby50YXJnZXQ9PT10JiYhby5xdWFsaWZpZXIpe0EucHVzaChvLmFubm90YXRpb24pO3JldHVybiBmYWxzZX19KX19KTtpZihBKXtxLmVhY2goQSxmdW5jdGlvbihpLGIpe3EuZWFjaChiLGZ1bmN0aW9uKGosYyl7aWYoYy50ZXJtPT09cFswXSl7YT1jfX0pfSl9cmV0dXJuIGF9O08ucHJvdG90eXBlLl9zcGxpdE5hbWU9ZnVuY3Rpb24oZil7dmFyIHA9W107aWYoZil7dmFyIHM9Zi5sYXN0SW5kZXhPZigiLiIpO3BbMF09Zi5zdWJzdHIocysxKTtwWzFdPWYuc3Vic3RyKDAscyl9cmV0dXJuIHB9O08ucHJvdG90eXBlLl9nZXRFbnRpdHlUeXBlTmFtZT1mdW5jdGlvbihjKXt2YXIgZTtpZihjKXtxLmVhY2godGhpcy5vTWV0YWRhdGEuZGF0YVNlcnZpY2VzLnNjaGVtYSxmdW5jdGlvbihpLHMpe2lmKHMuZW50aXR5Q29udGFpbmVyKXtxLmVhY2gocy5lbnRpdHlDb250YWluZXIsZnVuY3Rpb24oayxvKXtpZihvLmVudGl0eVNldCl7cS5lYWNoKG8uZW50aXR5U2V0LGZ1bmN0aW9uKGosYSl7aWYoYS5uYW1lPT09Yyl7ZT1hLmVudGl0eVR5cGU7cmV0dXJuIGZhbHNlfX0pfX0pfX0pfXJldHVybiBlfTtPLnByb3RvdHlwZS5fZ2V0T2JqZWN0TWV0YWRhdGE9ZnVuY3Rpb24obyxzLG4pe3ZhciBhO2lmKHMmJm4pe3EuZWFjaCh0aGlzLm9NZXRhZGF0YS5kYXRhU2VydmljZXMuc2NoZW1hLGZ1bmN0aW9uKGksUyl7aWYoU1tvXSYmUy5uYW1lc3BhY2U9PT1uKXtxLmVhY2goU1tvXSxmdW5jdGlvbihqLGMpe2lmKGMubmFtZT09PXMpe2E9YzthLm5hbWVzcGFjZT1TLm5hbWVzcGFjZTtyZXR1cm4gZmFsc2V9fSk7cmV0dXJuIWF9fSl9cmV0dXJuIGF9O08ucHJvdG90eXBlLmdldFVzZUJhdGNoPWZ1bmN0aW9uKCl7dmFyIHU9ZmFsc2U7cS5lYWNoKHRoaXMub01ldGFkYXRhLmRhdGFTZXJ2aWNlcy5zY2hlbWEsZnVuY3Rpb24oaSxzKXtpZihzLmVudGl0eUNvbnRhaW5lcil7cS5lYWNoKHMuZW50aXR5Q29udGFpbmVyLGZ1bmN0aW9uKGssZSl7aWYoZS5leHRlbnNpb25zKXtxLmVhY2goZS5leHRlbnNpb25zLGZ1bmN0aW9uKGwsbyl7aWYoby5uYW1lPT09InVzZS1iYXRjaCImJm8ubmFtZXNwYWNlPT09Imh0dHA6Ly93d3cuc2FwLmNvbS9Qcm90b2NvbHMvU0FQRGF0YSIpe3U9KHR5cGVvZiBvLnZhbHVlPT09J3N0cmluZycpPyhvLnZhbHVlLnRvTG93ZXJDYXNlKCk9PT0ndHJ1ZScpOiEhby52YWx1ZTtyZXR1cm4gZmFsc2V9fSl9fSl9fSk7cmV0dXJuIHV9O08ucHJvdG90eXBlLl9nZXRGdW5jdGlvbkltcG9ydE1ldGFkYXRhPWZ1bmN0aW9uKGYsbSl7dmFyIG89bnVsbDtxLmVhY2godGhpcy5vTWV0YWRhdGEuZGF0YVNlcnZpY2VzLnNjaGVtYSxmdW5jdGlvbihpLHMpe2lmKHNbImVudGl0eUNvbnRhaW5lciJdKXtxLmVhY2goc1siZW50aXR5Q29udGFpbmVyIl0sZnVuY3Rpb24oaixlKXtpZihlWyJmdW5jdGlvbkltcG9ydCJdKXtxLmVhY2goZVsiZnVuY3Rpb25JbXBvcnQiXSxmdW5jdGlvbihrLEYpe2lmKEYubmFtZT09PWYmJkYuaHR0cE1ldGhvZD09PW0pe289RjtyZXR1cm4gZmFsc2V9fSl9cmV0dXJuIW99KX1yZXR1cm4hb30pO3JldHVybiBvfTtPLnByb3RvdHlwZS5fZ2V0RW50aXR5VHlwZUJ5TmF2UHJvcGVydHk9ZnVuY3Rpb24oZSxuKXt2YXIgdD10aGlzLGEsQSxiLE47cS5lYWNoKGUubmF2aWdhdGlvblByb3BlcnR5LGZ1bmN0aW9uKGssbyl7aWYoby5uYW1lPT09bil7YT10Ll9zcGxpdE5hbWUoby5yZWxhdGlvbnNoaXApO0E9dC5fZ2V0T2JqZWN0TWV0YWRhdGEoImFzc29jaWF0aW9uIixhWzBdLGFbMV0pO2lmKEEpe3ZhciBjPUEuZW5kWzBdO2lmKGMucm9sZSE9PW8udG9Sb2xlKXtjPUEuZW5kWzFdfWI9dC5fc3BsaXROYW1lKGMudHlwZSk7Tj10Ll9nZXRPYmplY3RNZXRhZGF0YSgiZW50aXR5VHlwZSIsYlswXSxiWzFdKTtpZihOKXtOLmVudGl0eVR5cGU9Yy50eXBlfXJldHVybiBmYWxzZX19fSk7cmV0dXJuIE59O08ucHJvdG90eXBlLl9nZXROYXZpZ2F0aW9uUHJvcGVydHlOYW1lcz1mdW5jdGlvbihlKXt2YXIgbj1bXTtpZihlLm5hdmlnYXRpb25Qcm9wZXJ0eSl7cS5lYWNoKGUubmF2aWdhdGlvblByb3BlcnR5LGZ1bmN0aW9uKGssTil7bi5wdXNoKE4ubmFtZSl9KX1yZXR1cm4gbn07Ty5wcm90b3R5cGUuX2dldFByb3BlcnR5TWV0YWRhdGE9ZnVuY3Rpb24oZSxwKXt2YXIgUCx0PXRoaXM7aWYoIWUpcmV0dXJuO3A9cC5yZXBsYWNlKC9eXC98XC8kL2csIiIpO3ZhciBhPXAuc3BsaXQoIi8iKTtxLmVhY2goZS5wcm9wZXJ0eSxmdW5jdGlvbihrLGIpe2lmKGIubmFtZT09PWFbMF0pe1A9YjtyZXR1cm4gZmFsc2V9fSk7aWYoUCYmYS5sZW5ndGg+MSYmIXEuc2FwLnN0YXJ0c1dpdGgoUC50eXBlLnRvTG93ZXJDYXNlKCksImVkbS4iKSl7dmFyIG49dGhpcy5fc3BsaXROYW1lKFAudHlwZSk7UD10aGlzLl9nZXRQcm9wZXJ0eU1ldGFkYXRhKHRoaXMuX2dldE9iamVjdE1ldGFkYXRhKCJjb21wbGV4VHlwZSIsblswXSxuWzFdKSxhWzFdKX1pZighUCYmYS5sZW5ndGg+MSl7dmFyIG89dGhpcy5fZ2V0RW50aXR5VHlwZUJ5TmF2UHJvcGVydHkoZSxhWzBdKTtpZihvKXtQPXQuX2dldFByb3BlcnR5TWV0YWRhdGEobyxhWzFdKX19cmV0dXJuIFB9O08ucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXtkZWxldGUgdGhpcy5vTWV0YWRhdGE7aWYodGhpcy5vUmVxdWVzdEhhbmRsZSl7dGhpcy5vUmVxdWVzdEhhbmRsZS5iU3VwcHJlc3NFcnJvckhhbmRsZXJDYWxsPXRydWU7dGhpcy5vUmVxdWVzdEhhbmRsZS5hYm9ydCgpO3RoaXMub1JlcXVlc3RIYW5kbGU9bnVsbH1pZighIXRoaXMub0xvYWRFdmVudCl7cS5zYXAuY2xlYXJEZWxheWVkQ2FsbCh0aGlzLm9Mb2FkRXZlbnQpfWlmKCEhdGhpcy5vRmFpbGVkRXZlbnQpe3Euc2FwLmNsZWFyRGVsYXllZENhbGwodGhpcy5vRmFpbGVkRXZlbnQpfXNhcC51aS5iYXNlLk9iamVjdC5wcm90b3R5cGUuZGVzdHJveS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9O08ucHJvdG90eXBlLl9jcmVhdGVSZXF1ZXN0PWZ1bmN0aW9uKHUpe3ZhciBoPXt9LGw9eyJBY2NlcHQtTGFuZ3VhZ2UiOnNhcC51aS5nZXRDb3JlKCkuZ2V0Q29uZmlndXJhdGlvbigpLmdldExhbmd1YWdlKCl9O3EuZXh0ZW5kKGgsdGhpcy5tSGVhZGVycyxsKTt2YXIgcj17aGVhZGVyczpoLHJlcXVlc3RVcmk6dSxtZXRob2Q6J0dFVCcsdXNlcjp0aGlzLnNVc2VyLHBhc3N3b3JkOnRoaXMuc1Bhc3N3b3JkLGFzeW5jOnRoaXMuYkFzeW5jfTtpZih0aGlzLmJBc3luYyl7ci53aXRoQ3JlZGVudGlhbHM9dGhpcy5iV2l0aENyZWRlbnRpYWxzfXJldHVybiByfTtyZXR1cm4gT30sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5tb2RlbC5vZGF0YS5PRGF0YVRyZWVCaW5kaW5nJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLm1vZGVsLm9kYXRhLk9EYXRhVHJlZUJpbmRpbmcnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvbW9kZWwvb2RhdGEvT0RhdGFUcmVlQmluZGluZyIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ3NhcC91aS9tb2RlbC9UcmVlQmluZGluZyddLGZ1bmN0aW9uKHEsVCl7InVzZSBzdHJpY3QiO3ZhciBPPVQuZXh0ZW5kKCJzYXAudWkubW9kZWwub2RhdGEuT0RhdGFUcmVlQmluZGluZyIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKG0scCxjLGYsUCl7VC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5iUGVuZGluZ1JlcXVlc3Q9ZmFsc2U7dGhpcy5vRmluYWxMZW5ndGhzPXt9O3RoaXMub0xlbmd0aHM9e307dGhpcy5vS2V5cz17fTt0aGlzLmJOZWVkc1VwZGF0ZT1mYWxzZTtpZighUHx8IVAubmF2aWdhdGlvbil7cS5zYXAubG9nLmVycm9yKCJBIG5hdmlnYXRpb24gcGF0aHMgcGFyYW1ldGVyIG9iamVjdCBoYXMgdG8gYmUgZGVmaW5lZCIpO3RoaXMub05hdmlnYXRpb25QYXRocz17fX1lbHNle3RoaXMub05hdmlnYXRpb25QYXRocz1QLm5hdmlnYXRpb259fX0pO08ucHJvdG90eXBlLmdldFJvb3RDb250ZXh0cz1mdW5jdGlvbigpe3ZhciBuPXRoaXMuX2dldE5hdlBhdGgodGhpcy5zUGF0aCksYT10aGlzLm9Nb2RlbC5yZXNvbHZlKHRoaXMuc1BhdGgsdGhpcy5nZXRDb250ZXh0KCkpLHQ9dGhpcyxjO2lmKCFhKXtyZXR1cm5bXX1pZighdGhpcy5vTW9kZWwuaXNMaXN0KHRoaXMuc1BhdGgsdGhpcy5nZXRDb250ZXh0KCkpKXtpZih0aGlzLmJEaXNwbGF5Um9vdE5vZGUpe3RoaXMub01vZGVsLmNyZWF0ZUJpbmRpbmdDb250ZXh0KGEsbnVsbCx7ZXhwYW5kOm59LGZ1bmN0aW9uKE4pe2M9TjtpZih0Lm9Sb290Q29udGV4dCE9PU4pe3Qub1Jvb3RDb250ZXh0PU47dC5iTmVlZHNVcGRhdGU9dHJ1ZX1lbHNle3ZhciBkPXQub01vZGVsLm9EYXRhW2MuZ2V0UGF0aCgpLnN1YnN0cigxKV07dC5fcHJvY2Vzc09EYXRhT2JqZWN0KGQsYy5nZXRQYXRoKCksbil9fSxmYWxzZSk7aWYoYyl7cmV0dXJuW2NdfWVsc2V7cmV0dXJuW119fWVsc2V7Yz10aGlzLm9Nb2RlbC5nZXRDb250ZXh0KHRoaXMuc1BhdGgpO3JldHVybiB0aGlzLmdldE5vZGVDb250ZXh0cyhjKX19ZWxzZXtyZXR1cm4gdGhpcy5fZ2V0Q29udGV4dHNGb3JQYXRoKGEsbil9fTtPLnByb3RvdHlwZS5nZXROb2RlQ29udGV4dHM9ZnVuY3Rpb24oYyl7dmFyIG49dGhpcy5fZ2V0TmF2UGF0aChjLmdldFBhdGgoKSksYTtpZighbil7cmV0dXJuW119YT10aGlzLm9Nb2RlbC5yZXNvbHZlKG4sYyk7bj10aGlzLm9OYXZpZ2F0aW9uUGF0aHNbbl07cmV0dXJuIHRoaXMuX2dldENvbnRleHRzRm9yUGF0aChhLG4pfTtPLnByb3RvdHlwZS5oYXNDaGlsZHJlbj1mdW5jdGlvbihjKXtyZXR1cm4gYyYmdGhpcy5vTGVuZ3Roc1tjLmdldFBhdGgoKV0+MH07Ty5wcm90b3R5cGUuX2dldENvbnRleHRzRm9yUGF0aD1mdW5jdGlvbihhLG4pe3ZhciBjPVtdLGw9dGhpcy5vTW9kZWwuaVNpemVMaW1pdCxMLGs7aWYodGhpcy5vRmluYWxMZW5ndGhzJiZ0aGlzLm9GaW5hbExlbmd0aHNbYV0mJnRoaXMub0xlbmd0aHNbYV08bCl7bD10aGlzLm9MZW5ndGhzW2FdfWlmKHRoaXMub0tleXNbYV0pe2Zvcih2YXIgaT0wO2k8bDtpKyspe2s9dGhpcy5vS2V5c1thXVtpXTtpZighayl7YnJlYWt9Yy5wdXNoKHRoaXMub01vZGVsLmdldENvbnRleHQoJy8nK2spKX19TD1jLmxlbmd0aCE9bCYmISh0aGlzLm9GaW5hbExlbmd0aHNbYV0mJmMubGVuZ3RoPj10aGlzLm9MZW5ndGhzW2FdKTtpZih0aGlzLm9Nb2RlbC5nZXRTZXJ2aWNlTWV0YWRhdGEoKSl7aWYoIXRoaXMuYlBlbmRpbmdSZXF1ZXN0JiZMKXt0aGlzLmxvYWRTdWJOb2RlcyhhLG4pfX1yZXR1cm4gY307Ty5wcm90b3R5cGUubG9hZFN1Yk5vZGVzPWZ1bmN0aW9uKGEsbil7dmFyIHQ9dGhpcyxwPVtdO2lmKG4pe3AucHVzaCgiJGV4cGFuZD0iK24pfWZ1bmN0aW9uIHMoZCl7dC5vTGVuZ3Roc1thXT1kLnJlc3VsdHMubGVuZ3RoO3Qub0ZpbmFsTGVuZ3Roc1thXT10cnVlO3Qub0tleXNbYV09W107Zm9yKHZhciBpPTA7aTxkLnJlc3VsdHMubGVuZ3RoO2krKyl7dmFyIEU9ZC5yZXN1bHRzW2ldO3QuX3Byb2Nlc3NPRGF0YU9iamVjdChFLGEsbik7dC5vS2V5c1thXS5wdXNoKHQub01vZGVsLl9nZXRLZXkoRSkpfXQub1JlcXVlc3RIYW5kbGU9bnVsbDt0LmJQZW5kaW5nUmVxdWVzdD1mYWxzZTt0LmJOZWVkc1VwZGF0ZT10cnVlfWZ1bmN0aW9uIGMoKXt0LmZpcmVEYXRhUmVjZWl2ZWQoKX1mdW5jdGlvbiBlKGQpe3Qub1JlcXVlc3RIYW5kbGU9bnVsbDt0LmJQZW5kaW5nUmVxdWVzdD1mYWxzZTt0LmZpcmVEYXRhUmVjZWl2ZWQoKX1mdW5jdGlvbiB1KGgpe3Qub1JlcXVlc3RIYW5kbGU9aH1pZihhKXtpZighdGhpcy5vRmluYWxMZW5ndGhzW2FdKXt0aGlzLmJQZW5kaW5nUmVxdWVzdD10cnVlO3RoaXMuZmlyZURhdGFSZXF1ZXN0ZWQoKTt0aGlzLm9Nb2RlbC5fbG9hZERhdGEoYSxwLHMsZSxmYWxzZSx1LGMpfX19O08ucHJvdG90eXBlLnJlc2V0RGF0YT1mdW5jdGlvbihjKXtpZihjKXt2YXIgcD1jLmdldFBhdGgoKTtkZWxldGUgdGhpcy5vS2V5c1twXTtkZWxldGUgdGhpcy5vTGVuZ3Roc1twXTtkZWxldGUgdGhpcy5vRmluYWxMZW5ndGhzW3BdfWVsc2V7dGhpcy5vS2V5cz17fTt0aGlzLm9MZW5ndGhzPXt9O3RoaXMub0ZpbmFsTGVuZ3Rocz17fX19O08ucHJvdG90eXBlLnJlZnJlc2g9ZnVuY3Rpb24oZixjLGUpe3ZhciBDPWZhbHNlO2lmKCFmKXtpZihlKXt2YXIgcj10aGlzLm9Nb2RlbC5yZXNvbHZlKHRoaXMuc1BhdGgsdGhpcy5vQ29udGV4dCk7dmFyIEU9dGhpcy5vTW9kZWwub01ldGFkYXRhLl9nZXRFbnRpdHlUeXBlQnlQYXRoKHIpO2lmKEUmJihFLmVudGl0eVR5cGUgaW4gZSkpe0M9dHJ1ZX19aWYoYyYmIUMpe3EuZWFjaCh0aGlzLm9LZXlzLGZ1bmN0aW9uKGksbil7cS5lYWNoKG4sZnVuY3Rpb24oaSxrKXtpZihrIGluIGMpe0M9dHJ1ZTtyZXR1cm4gZmFsc2V9fSk7aWYoQylyZXR1cm4gZmFsc2V9KX1pZighYyYmIWUpe0M9dHJ1ZX19aWYoZnx8Qyl7dGhpcy5yZXNldERhdGEoKTt0aGlzLmJOZWVkc1VwZGF0ZT1mYWxzZTt0aGlzLl9maXJlQ2hhbmdlKCl9fTtPLnByb3RvdHlwZS5maWx0ZXI9ZnVuY3Rpb24oZil7cS5zYXAubG9nLndhcm5pbmcoIkZpbHRlcmluZyBpcyBjdXJyZW50bHkgbm90IHBvc3NpYmxlIGluIHRoZSBPRGF0YVRyZWVCaW5kaW5nIik7cmV0dXJuIHRoaXN9O08ucHJvdG90eXBlLmNoZWNrVXBkYXRlPWZ1bmN0aW9uKGYsYyl7dmFyIEM9ZmFsc2U7aWYoIWYpe2lmKHRoaXMuYk5lZWRzVXBkYXRlfHwhYyl7Qz10cnVlfWVsc2V7cS5lYWNoKHRoaXMub0tleXMsZnVuY3Rpb24oaSxuKXtxLmVhY2gobixmdW5jdGlvbihpLGspe2lmKGsgaW4gYyl7Qz10cnVlO3JldHVybiBmYWxzZX19KTtpZihDKXJldHVybiBmYWxzZX0pfX1pZihmfHxDKXt0aGlzLmJOZWVkc1VwZGF0ZT1mYWxzZTt0aGlzLl9maXJlQ2hhbmdlKCl9fTtPLnByb3RvdHlwZS5fZ2V0TmF2UGF0aD1mdW5jdGlvbihwKXt2YXIgYT10aGlzLm9Nb2RlbC5yZXNvbHZlKHAsdGhpcy5nZXRDb250ZXh0KCkpO2lmKCFhKXtyZXR1cm59dmFyIFA9YS5zcGxpdCgiLyIpLGU9UFtQLmxlbmd0aC0xXSxuO3ZhciBjPWUuc3BsaXQoIigiKVswXTtpZihjJiZ0aGlzLm9OYXZpZ2F0aW9uUGF0aHNbY10pe249dGhpcy5vTmF2aWdhdGlvblBhdGhzW2NdfXJldHVybiBufTtPLnByb3RvdHlwZS5fcHJvY2Vzc09EYXRhT2JqZWN0PWZ1bmN0aW9uKG8sYSxuKXt2YXIgaz10aGlzLm9Nb2RlbC5fZ2V0S2V5KG8pLGM9dGhpcy5vTW9kZWwuZ2V0Q29udGV4dCgiLyIraykscD1jLmdldFBhdGgoKTt2YXIgcj10aGlzLm9Nb2RlbC5fZ2V0T2JqZWN0KG4sYyk7aWYocS5pc0FycmF5KHIpKXt0aGlzLm9LZXlzW3BdPXI7dGhpcy5vTGVuZ3Roc1twXT1yLmxlbmd0aDt0aGlzLm9GaW5hbExlbmd0aHNbcF09dHJ1ZX1lbHNlIGlmKHR5cGVvZiByPT09Im9iamVjdCIpe3RoaXMub0tleXNbcF09W3JdO3RoaXMub0xlbmd0aHNbcF09MDt0aGlzLm9GaW5hbExlbmd0aHNbcF09dHJ1ZX1lbHNle2lmKG4mJm9bbl0uX19saXN0KXt0aGlzLm9LZXlzW3BdPW9bbl0uX19saXN0O3RoaXMub0xlbmd0aHNbcF09dGhpcy5vS2V5c1twXS5sZW5ndGg7dGhpcy5vRmluYWxMZW5ndGhzW3BdPXRydWV9ZWxzZXt0aGlzLm9LZXlzW2FdPVtdO3RoaXMub0xlbmd0aHNbYV09MDt0aGlzLm9GaW5hbExlbmd0aHNbYV09ZmFsc2V9fX07cmV0dXJuIE99LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkubW9kZWwub2RhdGEuT0RhdGFVdGlscycpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5tb2RlbC5vZGF0YS5PRGF0YVV0aWxzJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL21vZGVsL29kYXRhL09EYXRhVXRpbHMiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCcuL0ZpbHRlcicsJ3NhcC91aS9tb2RlbC9Tb3J0ZXInLCdzYXAvdWkvbW9kZWwvRmlsdGVyJywnc2FwL3VpL2NvcmUvZm9ybWF0L0RhdGVGb3JtYXQnXSxmdW5jdGlvbihxLE8sUyxGLEQpeyJ1c2Ugc3RyaWN0Ijt2YXIgYT1mdW5jdGlvbigpe307YS5jcmVhdGVTb3J0UGFyYW1zPWZ1bmN0aW9uKHMpe3ZhciBiO2lmKCFzfHxzLmxlbmd0aD09MCl7cmV0dXJufWI9IiRvcmRlcmJ5PSI7Zm9yKHZhciBpPTA7aTxzLmxlbmd0aDtpKyspe3ZhciBvPXNbaV07aWYobyBpbnN0YW5jZW9mIFMpe2IrPW8uc1BhdGg7Yis9by5iRGVzY2VuZGluZz8iJTIwZGVzYyI6IiUyMGFzYyI7Yis9IiwifX1iPWIuc2xpY2UoMCwtMSk7cmV0dXJuIGJ9O2EuY3JlYXRlRmlsdGVyUGFyYW1zPWZ1bmN0aW9uKGYsbSxlKXtpZighZnx8Zi5sZW5ndGg9PTApe3JldHVybn1yZXR1cm4iJGZpbHRlcj0iK3RoaXMuX2NyZWF0ZUZpbHRlclBhcmFtcyhmLG0sZSl9O2EuX2NyZWF0ZUZpbHRlclBhcmFtcz1mdW5jdGlvbihmLG0sZSl7dmFyIHM7aWYoIWZ8fGYubGVuZ3RoPT0wKXtyZXR1cm59dmFyIG89e30sYj0wLGMscz0iIixkPTAsTSx0PXRoaXM7cS5lYWNoKGYsZnVuY3Rpb24oaixnKXtpZihnLnNQYXRoKXtjPW9bZy5zUGF0aF07aWYoIWMpe2M9b1tnLnNQYXRoXT1bXTtiKyt9fWVsc2V7Yz1vWyJfX211bHRpRmlsdGVyIl07aWYoIWMpe2M9b1siX19tdWx0aUZpbHRlciJdPVtdO2IrK319Yy5wdXNoKGcpfSk7cS5lYWNoKG8sZnVuY3Rpb24ocCxjKXtpZihjLmxlbmd0aD4xKXtzKz0nKCd9cS5lYWNoKGMsZnVuY3Rpb24oaSxnKXtpZihnIGluc3RhbmNlb2YgTyl7aWYoZy5hVmFsdWVzLmxlbmd0aD4xKXtzKz0nKCd9cS5lYWNoKGcuYVZhbHVlcyxmdW5jdGlvbihpLGgpe2lmKGk+MCl7aWYoZy5iQU5EKXtzKz0iJTIwYW5kJTIwIn1lbHNle3MrPSIlMjBvciUyMCJ9fXM9dC5fY3JlYXRlRmlsdGVyU2VnbWVudChnLnNQYXRoLG0sZSxoLm9wZXJhdG9yLGgudmFsdWUxLGgudmFsdWUyLHMpfSk7aWYoZy5hVmFsdWVzLmxlbmd0aD4xKXtzKz0nKSd9fWVsc2UgaWYoZy5fYk11bHRpRmlsdGVyKXtzKz10Ll9yZXNvbHZlTXVsdGlGaWx0ZXIoZyxtLGUpfWVsc2V7cz10Ll9jcmVhdGVGaWx0ZXJTZWdtZW50KGcuc1BhdGgsbSxlLGcuc09wZXJhdG9yLGcub1ZhbHVlMSxnLm9WYWx1ZTIscyl9aWYoaTxjLmxlbmd0aC0xKXtzKz0iJTIwb3IlMjAifX0pO2lmKGMubGVuZ3RoPjEpe3MrPScpJ31pZihkPGItMSl7cys9IiUyMGFuZCUyMCJ9ZCsrfSk7cmV0dXJuIHN9O2EuX2NyZWF0ZVVybFBhcmFtc0FycmF5PWZ1bmN0aW9uKHApe3ZhciB1LHQ9cS50eXBlKHApO2lmKHQ9PT0iYXJyYXkiKXtyZXR1cm4gcH11PVtdO2lmKHQ9PT0ib2JqZWN0Iil7dS5wdXNoKHEuc2FwLmVuY29kZVVSTFBhcmFtZXRlcnMocCkpfWVsc2UgaWYodD09PSJzdHJpbmciKXt1LnB1c2gocCl9cmV0dXJuIHV9O2EuX3Jlc29sdmVNdWx0aUZpbHRlcj1mdW5jdGlvbihtLE0sZSl7dmFyIHQ9dGhpcyxmPW0uYUZpbHRlcnMscz0iIjtpZihmKXtzKz0iKCI7cS5lYWNoKGYsZnVuY3Rpb24oaSxvKXt2YXIgbD1mYWxzZTtpZihvLl9iTXVsdGlGaWx0ZXIpe3MrPXQuX3Jlc29sdmVNdWx0aUZpbHRlcihvLE0sZSl9ZWxzZSBpZihvLnNQYXRoKXtzKz10Ll9jcmVhdGVGaWx0ZXJTZWdtZW50KG8uc1BhdGgsTSxlLG8uc09wZXJhdG9yLG8ub1ZhbHVlMSxvLm9WYWx1ZTIsIiIpfWlmKGk8KGYubGVuZ3RoLTEpKXtpZihtLmJBbmQpe3MrPSIlMjBhbmQlMjAifWVsc2V7cys9IiUyMG9yJTIwIn19fSk7cys9IikifXJldHVybiBzfTthLl9jcmVhdGVGaWx0ZXJTZWdtZW50PWZ1bmN0aW9uKHAsbSxlLG8sdixWLGYpe3ZhciBQLHQ7aWYoZSl7UD1tLl9nZXRQcm9wZXJ0eU1ldGFkYXRhKGUscCk7dD1QJiZQLnR5cGU7fWlmKHQpe3Y9dGhpcy5mb3JtYXRWYWx1ZSh2LHQpO1Y9KFYhPW51bGwpP3RoaXMuZm9ybWF0VmFsdWUoVix0KTpudWxsfWVsc2V7fWlmKHYpe3Y9cS5zYXAuZW5jb2RlVVJMKFN0cmluZyh2KSl9aWYoVil7Vj1xLnNhcC5lbmNvZGVVUkwoU3RyaW5nKFYpKX1zd2l0Y2gobyl7Y2FzZSJFUSI6Y2FzZSJORSI6Y2FzZSJHVCI6Y2FzZSJHRSI6Y2FzZSJMVCI6Y2FzZSJMRSI6Zis9cCsiJTIwIitvLnRvTG93ZXJDYXNlKCkrIiUyMCIrdjticmVhaztjYXNlIkJUIjpmKz0iKCIrcCsiJTIwZ2UlMjAiK3YrIiUyMGFuZCUyMCIrcCsiJTIwbGUlMjAiK1YrIikiO2JyZWFrO2Nhc2UiQ29udGFpbnMiOmYrPSJzdWJzdHJpbmdvZigiK3YrIiwiK3ArIikiO2JyZWFrO2Nhc2UiU3RhcnRzV2l0aCI6Zis9InN0YXJ0c3dpdGgoIitwKyIsIit2KyIpIjticmVhaztjYXNlIkVuZHNXaXRoIjpmKz0iZW5kc3dpdGgoIitwKyIsIit2KyIpIjticmVhaztkZWZhdWx0OmYrPSJ0cnVlIn1yZXR1cm4gZn07YS5mb3JtYXRWYWx1ZT1mdW5jdGlvbih2LHQpe2lmKCF0aGlzLm9EYXRlVGltZUZvcm1hdCl7dGhpcy5vRGF0ZVRpbWVGb3JtYXQ9RC5nZXREYXRlSW5zdGFuY2Uoe3BhdHRlcm46IidkYXRldGltZScnJ3l5eXktTU0tZGQnVCdISDptbTpzcycnIn0pO3RoaXMub0RhdGVUaW1lT2Zmc2V0Rm9ybWF0PUQuZ2V0RGF0ZUluc3RhbmNlKHtwYXR0ZXJuOiInZGF0ZXRpbWVvZmZzZXQnJyd5eXl5LU1NLWRkJ1QnSEg6bW06c3MnWicnJyJ9KTt0aGlzLm9UaW1lRm9ybWF0PUQuZ2V0VGltZUluc3RhbmNlKHtwYXR0ZXJuOiIndGltZScnJ0hIOm1tOnNzJycifSl9aWYodj09PW51bGx8fHY9PT11bmRlZmluZWQpe3JldHVybiJudWxsIn12YXIgVjtzd2l0Y2godCl7Y2FzZSJFZG0uU3RyaW5nIjpWPSInIitTdHJpbmcodikucmVwbGFjZSgvJy9nLCInJyIpKyInIjticmVhaztjYXNlIkVkbS5UaW1lIjpWPSJ0aW1lJyIrdisiJyI7YnJlYWs7Y2FzZSJFZG0uRGF0ZVRpbWUiOlY9dGhpcy5vRGF0ZVRpbWVGb3JtYXQuZm9ybWF0KG5ldyBEYXRlKHYpLHRydWUpO2JyZWFrO2Nhc2UiRWRtLkRhdGVUaW1lT2Zmc2V0IjpWPXRoaXMub0RhdGVUaW1lT2Zmc2V0Rm9ybWF0LmZvcm1hdChuZXcgRGF0ZSh2KSx0cnVlKTticmVhaztjYXNlIkVkbS5HdWlkIjpWPSJndWlkJyIrdisiJyI7YnJlYWs7Y2FzZSJFZG0uRGVjaW1hbCI6Vj12KyJNIjticmVhaztjYXNlIkVkbS5JbnQ2NCI6Vj12KyJMIjticmVhaztjYXNlIkVkbS5TaW5nbGUiOlY9disiZiI7YnJlYWs7Y2FzZSJFZG0uQmluYXJ5IjpWPSJiaW5hcnknIit2KyInIjticmVhaztkZWZhdWx0OlY9bmV3IFN0cmluZyh2KTticmVha31yZXR1cm4gVn07cmV0dXJuIGF9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkubW9kZWwudHlwZS5Cb29sZWFuJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLm1vZGVsLnR5cGUuQm9vbGVhbicpO3NhcC51aS5kZWZpbmUoInNhcC91aS9tb2RlbC90eXBlL0Jvb2xlYW4iLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvY29yZS9mb3JtYXQvTnVtYmVyRm9ybWF0Jywnc2FwL3VpL21vZGVsL1NpbXBsZVR5cGUnXSxmdW5jdGlvbihxLE4sUyl7InVzZSBzdHJpY3QiO3ZhciBCPVMuZXh0ZW5kKCJzYXAudWkubW9kZWwudHlwZS5Cb29sZWFuIix7Y29uc3RydWN0b3I6ZnVuY3Rpb24oKXtTLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLnNOYW1lPSJCb29sZWFuIn19KTtCLnByb3RvdHlwZS5mb3JtYXRWYWx1ZT1mdW5jdGlvbih2LGkpe2lmKHY9PXVuZGVmaW5lZHx8dj09bnVsbCl7cmV0dXJuIG51bGx9c3dpdGNoKGkpe2Nhc2UiYm9vbGVhbiI6cmV0dXJuIHY7Y2FzZSJzdHJpbmciOnJldHVybiB2LnRvU3RyaW5nKCk7Y2FzZSJpbnQiOmNhc2UiZmxvYXQiOmRlZmF1bHQ6dGhyb3cgbmV3IHNhcC51aS5tb2RlbC5Gb3JtYXRFeGNlcHRpb24oIkRvbid0IGtub3cgaG93IHRvIGZvcm1hdCBCb29sZWFuIHRvICIraSl9fTtCLnByb3RvdHlwZS5wYXJzZVZhbHVlPWZ1bmN0aW9uKHYsaSl7dmFyIHI7c3dpdGNoKGkpe2Nhc2UiYm9vbGVhbiI6cmV0dXJuIHY7Y2FzZSJzdHJpbmciOmlmKHYudG9Mb3dlckNhc2UoKT09InRydWUifHx2PT0iWCIpe3JldHVybiB0cnVlfWlmKHYudG9Mb3dlckNhc2UoKT09ImZhbHNlInx8dj09IiIpe3JldHVybiBmYWxzZX10aHJvdyBuZXcgc2FwLnVpLm1vZGVsLlBhcnNlRXhjZXB0aW9uKCJEb24ndCBrbm93IGhvdyB0byBwYXJzZSBCb29sZWFuIGZyb20gIitpKTtjYXNlImludCI6Y2FzZSJmbG9hdCI6ZGVmYXVsdDp0aHJvdyBuZXcgc2FwLnVpLm1vZGVsLlBhcnNlRXhjZXB0aW9uKCJEb24ndCBrbm93IGhvdyB0byBwYXJzZSBCb29sZWFuIGZyb20gIitpKX19O0IucHJvdG90eXBlLnZhbGlkYXRlVmFsdWU9ZnVuY3Rpb24odil7fTtyZXR1cm4gQn0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5tb2RlbC50eXBlLkRhdGUnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkubW9kZWwudHlwZS5EYXRlJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL21vZGVsL3R5cGUvRGF0ZSIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ3NhcC91aS9jb3JlL2Zvcm1hdC9EYXRlRm9ybWF0Jywnc2FwL3VpL21vZGVsL1NpbXBsZVR5cGUnXSxmdW5jdGlvbihxLEQsUyl7InVzZSBzdHJpY3QiO3ZhciBhPVMuZXh0ZW5kKCJzYXAudWkubW9kZWwudHlwZS5EYXRlIix7Y29uc3RydWN0b3I6ZnVuY3Rpb24oKXtTLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLnNOYW1lPSJEYXRlIn19KTthLnByb3RvdHlwZS5mb3JtYXRWYWx1ZT1mdW5jdGlvbih2LGkpe3N3aXRjaChpKXtjYXNlInN0cmluZyI6aWYodj09bnVsbCl7cmV0dXJuIiJ9aWYodGhpcy5vSW5wdXRGb3JtYXQpe2lmKHRoaXMub0Zvcm1hdE9wdGlvbnMuc291cmNlLnBhdHRlcm49PSJ0aW1lc3RhbXAiKXtpZih0eXBlb2YodikhPSJudW1iZXIiKXtpZihpc05hTih2KSl7dGhyb3cgbmV3IHNhcC51aS5tb2RlbC5Gb3JtYXRFeGNlcHRpb24oIkNhbm5vdCBmb3JtYXQgZGF0ZTogIit2KyIgaXMgbm90IGEgdmFsaWQgVGltZXN0YW1wIil9ZWxzZXt2PXBhcnNlSW50KHYsMTApfX12PW5ldyBEYXRlKHYpfWVsc2V7aWYodj09IiIpe3JldHVybiIifXY9dGhpcy5vSW5wdXRGb3JtYXQucGFyc2Uodik7aWYodj09bnVsbCl7dGhyb3cgbmV3IHNhcC51aS5tb2RlbC5Gb3JtYXRFeGNlcHRpb24oIkNhbm5vdCBmb3JtYXQgZGF0ZTogIit2KyIgaGFzIHRoZSB3cm9uZyBmb3JtYXQiKX19fXJldHVybiB0aGlzLm9PdXRwdXRGb3JtYXQuZm9ybWF0KHYpO2RlZmF1bHQ6dGhyb3cgbmV3IHNhcC51aS5tb2RlbC5Gb3JtYXRFeGNlcHRpb24oIkRvbid0IGtub3cgaG93IHRvIGZvcm1hdCBEYXRlIHRvICIraSl9fTthLnByb3RvdHlwZS5wYXJzZVZhbHVlPWZ1bmN0aW9uKHYsaSl7dmFyIHI7c3dpdGNoKGkpe2Nhc2Uic3RyaW5nIjppZih2PT09IiIpe3JldHVybiBudWxsfXZhciByPXRoaXMub091dHB1dEZvcm1hdC5wYXJzZSh2KTtpZighcil7dGhyb3cgbmV3IHNhcC51aS5tb2RlbC5QYXJzZUV4Y2VwdGlvbih2KyIgaXMgbm90IGEgdmFsaWQgRGF0ZSB2YWx1ZSIpfWlmKHRoaXMub0lucHV0Rm9ybWF0KXtpZih0aGlzLm9Gb3JtYXRPcHRpb25zLnNvdXJjZS5wYXR0ZXJuPT0idGltZXN0YW1wIil7cj1yLmdldFRpbWUoKX1lbHNle3I9dGhpcy5vSW5wdXRGb3JtYXQuZm9ybWF0KHIpfX1yZXR1cm4gcjtkZWZhdWx0OnRocm93IG5ldyBzYXAudWkubW9kZWwuUGFyc2VFeGNlcHRpb24oIkRvbid0IGtub3cgaG93IHRvIHBhcnNlIERhdGUgZnJvbSAiK2kpfX07YS5wcm90b3R5cGUudmFsaWRhdGVWYWx1ZT1mdW5jdGlvbih2KXtpZih0aGlzLm9Db25zdHJhaW50cyl7dmFyIFY9W10saT10aGlzLm9JbnB1dEZvcm1hdDtpZihpJiZ0aGlzLm9Gb3JtYXRPcHRpb25zLnNvdXJjZS5wYXR0ZXJuIT0idGltZXN0YW1wIil7dj1pLnBhcnNlKHYpfXEuZWFjaCh0aGlzLm9Db25zdHJhaW50cyxmdW5jdGlvbihuLGMpe2lmKGkpe2M9aS5wYXJzZShjKX1zd2l0Y2gobil7Y2FzZSJtaW5pbXVtIjppZih2PGMpe1YucHVzaCgibWluaW11bSIpfWJyZWFrO2Nhc2UibWF4aW11bSI6aWYodj5jKXtWLnB1c2goIm1heGltdW0iKX19fSk7aWYoVi5sZW5ndGg+MCl7dGhyb3cgbmV3IHNhcC51aS5tb2RlbC5WYWxpZGF0ZUV4Y2VwdGlvbigiVmFsaWRhdGlvbiBvZiB0eXBlIGNvbnN0cmFpbnRzIGZhaWxlZCIsVil9fX07YS5wcm90b3R5cGUuc2V0Rm9ybWF0T3B0aW9ucz1mdW5jdGlvbihmKXt0aGlzLm9Gb3JtYXRPcHRpb25zPWY7dGhpcy5faGFuZGxlTG9jYWxpemF0aW9uQ2hhbmdlKCl9O2EucHJvdG90eXBlLmdldE91dHB1dFBhdHRlcm49ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vT3V0cHV0Rm9ybWF0Lm9Gb3JtYXRPcHRpb25zLnBhdHRlcm59O2EucHJvdG90eXBlLl9oYW5kbGVMb2NhbGl6YXRpb25DaGFuZ2U9ZnVuY3Rpb24oKXt0aGlzLm9PdXRwdXRGb3JtYXQ9RC5nZXRJbnN0YW5jZSh0aGlzLm9Gb3JtYXRPcHRpb25zKTtpZih0aGlzLm9Gb3JtYXRPcHRpb25zLnNvdXJjZSl7dGhpcy5vSW5wdXRGb3JtYXQ9RC5nZXRJbnN0YW5jZSh0aGlzLm9Gb3JtYXRPcHRpb25zLnNvdXJjZSl9fTtyZXR1cm4gYX0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5tb2RlbC50eXBlLkRhdGVUaW1lJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLm1vZGVsLnR5cGUuRGF0ZVRpbWUnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvbW9kZWwvdHlwZS9EYXRlVGltZSIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJy4vRGF0ZSddLGZ1bmN0aW9uKHEsRCl7InVzZSBzdHJpY3QiO3ZhciBhPUQuZXh0ZW5kKCJzYXAudWkubW9kZWwudHlwZS5EYXRlVGltZSIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKCl7RC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5zTmFtZT0iRGF0ZVRpbWUifX0pO2EucHJvdG90eXBlLl9oYW5kbGVMb2NhbGl6YXRpb25DaGFuZ2U9ZnVuY3Rpb24oKXt0aGlzLm9PdXRwdXRGb3JtYXQ9c2FwLnVpLmNvcmUuZm9ybWF0LkRhdGVGb3JtYXQuZ2V0RGF0ZVRpbWVJbnN0YW5jZSh0aGlzLm9Gb3JtYXRPcHRpb25zKTtpZih0aGlzLm9Gb3JtYXRPcHRpb25zLnNvdXJjZSl7dGhpcy5vSW5wdXRGb3JtYXQ9c2FwLnVpLmNvcmUuZm9ybWF0LkRhdGVGb3JtYXQuZ2V0RGF0ZVRpbWVJbnN0YW5jZSh0aGlzLm9Gb3JtYXRPcHRpb25zLnNvdXJjZSl9fTtyZXR1cm4gYX0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5tb2RlbC50eXBlLkZsb2F0Jykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLm1vZGVsLnR5cGUuRmxvYXQnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvbW9kZWwvdHlwZS9GbG9hdCIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ3NhcC91aS9jb3JlL2Zvcm1hdC9OdW1iZXJGb3JtYXQnLCdzYXAvdWkvbW9kZWwvU2ltcGxlVHlwZSddLGZ1bmN0aW9uKHEsTixTKXsidXNlIHN0cmljdCI7dmFyIEY9Uy5leHRlbmQoInNhcC51aS5tb2RlbC50eXBlLkZsb2F0Iix7Y29uc3RydWN0b3I6ZnVuY3Rpb24oKXtTLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLnNOYW1lPSJGbG9hdCJ9fSk7Ri5wcm90b3R5cGUuZm9ybWF0VmFsdWU9ZnVuY3Rpb24odixpKXtpZih2PT11bmRlZmluZWR8fHY9PW51bGwpe3JldHVybiBudWxsfXN3aXRjaChpKXtjYXNlInN0cmluZyI6cmV0dXJuIHRoaXMub0Zvcm1hdC5mb3JtYXQodik7Y2FzZSJpbnQiOnJldHVybiBNYXRoLmZsb29yKHYpO2Nhc2UiZmxvYXQiOnJldHVybiB2O2RlZmF1bHQ6dGhyb3cgbmV3IHNhcC51aS5tb2RlbC5Gb3JtYXRFeGNlcHRpb24oIkRvbid0IGtub3cgaG93IHRvIGZvcm1hdCBGbG9hdCB0byAiK2kpfX07Ri5wcm90b3R5cGUucGFyc2VWYWx1ZT1mdW5jdGlvbih2LGkpe3ZhciByO3N3aXRjaChpKXtjYXNlInN0cmluZyI6cj10aGlzLm9Gb3JtYXQucGFyc2Uodik7aWYoaXNOYU4ocikpe3Rocm93IG5ldyBzYXAudWkubW9kZWwuUGFyc2VFeGNlcHRpb24odisiIGlzIG5vdCBhIHZhbGlkIEZsb2F0IHZhbHVlIil9cmV0dXJuIHI7Y2FzZSJpbnQiOmNhc2UiZmxvYXQiOnJldHVybiB2O2RlZmF1bHQ6dGhyb3cgbmV3IHNhcC51aS5tb2RlbC5QYXJzZUV4Y2VwdGlvbigiRG9uJ3Qga25vdyBob3cgdG8gcGFyc2UgRmxvYXQgZnJvbSAiK2kpfX07Ri5wcm90b3R5cGUudmFsaWRhdGVWYWx1ZT1mdW5jdGlvbih2KXtpZih0aGlzLm9Db25zdHJhaW50cyl7dmFyIFY9W107cS5lYWNoKHRoaXMub0NvbnN0cmFpbnRzLGZ1bmN0aW9uKG4sYyl7c3dpdGNoKG4pe2Nhc2UibWluaW11bSI6aWYodjxjKXtWLnB1c2goIm1pbmltdW0iKX1icmVhaztjYXNlIm1heGltdW0iOmlmKHY+Yyl7Vi5wdXNoKCJtYXhpbXVtIil9fX0pO2lmKFYubGVuZ3RoPjApe3Rocm93IG5ldyBzYXAudWkubW9kZWwuVmFsaWRhdGVFeGNlcHRpb24oIlZhbGlkYXRpb24gb2YgdHlwZSBjb25zdHJhaW50cyBmYWlsZWQiLFYpfX19O0YucHJvdG90eXBlLnNldEZvcm1hdE9wdGlvbnM9ZnVuY3Rpb24oZil7dGhpcy5vRm9ybWF0T3B0aW9ucz1mO3RoaXMuX2hhbmRsZUxvY2FsaXphdGlvbkNoYW5nZSgpfTtGLnByb3RvdHlwZS5faGFuZGxlTG9jYWxpemF0aW9uQ2hhbmdlPWZ1bmN0aW9uKCl7dGhpcy5vRm9ybWF0PU4uZ2V0RmxvYXRJbnN0YW5jZSh0aGlzLm9Gb3JtYXRPcHRpb25zKX07cmV0dXJuIEZ9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkubW9kZWwudHlwZS5JbnRlZ2VyJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLm1vZGVsLnR5cGUuSW50ZWdlcicpO3NhcC51aS5kZWZpbmUoInNhcC91aS9tb2RlbC90eXBlL0ludGVnZXIiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvY29yZS9mb3JtYXQvTnVtYmVyRm9ybWF0Jywnc2FwL3VpL21vZGVsL1NpbXBsZVR5cGUnXSxmdW5jdGlvbihxLE4sUyl7InVzZSBzdHJpY3QiO3ZhciBJPVMuZXh0ZW5kKCJzYXAudWkubW9kZWwudHlwZS5JbnRlZ2VyIix7Y29uc3RydWN0b3I6ZnVuY3Rpb24oKXtTLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLnNOYW1lPSJJbnRlZ2VyIn19KTtJLnByb3RvdHlwZS5mb3JtYXRWYWx1ZT1mdW5jdGlvbih2LGkpe2lmKHY9PXVuZGVmaW5lZHx8dj09bnVsbCl7cmV0dXJuIG51bGx9c3dpdGNoKGkpe2Nhc2Uic3RyaW5nIjpyZXR1cm4gdGhpcy5vRm9ybWF0LmZvcm1hdCh2KTtjYXNlImludCI6Y2FzZSJmbG9hdCI6cmV0dXJuIHY7ZGVmYXVsdDp0aHJvdyBuZXcgc2FwLnVpLm1vZGVsLkZvcm1hdEV4Y2VwdGlvbigiRG9uJ3Qga25vdyBob3cgdG8gZm9ybWF0IEludGVnZXIgdG8gIitpKX19O0kucHJvdG90eXBlLnBhcnNlVmFsdWU9ZnVuY3Rpb24odixpKXt2YXIgcjtzd2l0Y2goaSl7Y2FzZSJmbG9hdCI6Y2FzZSJzdHJpbmciOnI9dGhpcy5vRm9ybWF0LnBhcnNlKFN0cmluZyh2KSk7aWYoaXNOYU4ocikpe3Rocm93IG5ldyBzYXAudWkubW9kZWwuUGFyc2VFeGNlcHRpb24odisiIGlzIG5vdCBhIHZhbGlkIEludGVnZXIgdmFsdWUiKX1yZXR1cm4gcjtjYXNlImludCI6cmV0dXJuIHY7ZGVmYXVsdDp0aHJvdyBuZXcgc2FwLnVpLm1vZGVsLlBhcnNlRXhjZXB0aW9uKCJEb24ndCBrbm93IGhvdyB0byBwYXJzZSBJbnRlZ2VyIGZyb20gIitpKX19O0kucHJvdG90eXBlLnZhbGlkYXRlVmFsdWU9ZnVuY3Rpb24odil7aWYodGhpcy5vQ29uc3RyYWludHMpe3ZhciBWPVtdO3EuZWFjaCh0aGlzLm9Db25zdHJhaW50cyxmdW5jdGlvbihuLGMpe3N3aXRjaChuKXtjYXNlIm1pbmltdW0iOmlmKHY8Yyl7Vi5wdXNoKCJtaW5pbXVtIil9YnJlYWs7Y2FzZSJtYXhpbXVtIjppZih2PmMpe1YucHVzaCgibWF4aW11bSIpfX19KTtpZihWLmxlbmd0aD4wKXt0aHJvdyBuZXcgc2FwLnVpLm1vZGVsLlZhbGlkYXRlRXhjZXB0aW9uKCJWYWxpZGF0aW9uIG9mIHR5cGUgY29uc3RyYWludHMgZmFpbGVkIixWKX19fTtJLnByb3RvdHlwZS5zZXRGb3JtYXRPcHRpb25zPWZ1bmN0aW9uKGYpe3RoaXMub0Zvcm1hdE9wdGlvbnM9Zjt0aGlzLl9oYW5kbGVMb2NhbGl6YXRpb25DaGFuZ2UoKX07SS5wcm90b3R5cGUuX2hhbmRsZUxvY2FsaXphdGlvbkNoYW5nZT1mdW5jdGlvbigpe3RoaXMub0Zvcm1hdD1OLmdldEludGVnZXJJbnN0YW5jZSh0aGlzLm9Gb3JtYXRPcHRpb25zKX07cmV0dXJuIEl9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkubW9kZWwudHlwZS5TdHJpbmcnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkubW9kZWwudHlwZS5TdHJpbmcnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvbW9kZWwvdHlwZS9TdHJpbmciLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvY29yZS9mb3JtYXQvTnVtYmVyRm9ybWF0Jywnc2FwL3VpL21vZGVsL1NpbXBsZVR5cGUnXSxmdW5jdGlvbihxLE4sUyl7InVzZSBzdHJpY3QiO3ZhciBhPVMuZXh0ZW5kKCJzYXAudWkubW9kZWwudHlwZS5TdHJpbmciLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbigpe1MuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMuc05hbWU9IlN0cmluZyI7aWYodGhpcy5vQ29uc3RyYWludHMuc2VhcmNoJiZ0eXBlb2YgdGhpcy5vQ29uc3RyYWludHMuc2VhcmNoPT0ic3RyaW5nIil7dGhpcy5vQ29uc3RyYWludHMuc2VhcmNoPW5ldyBSZWdFeHAodGhpcy5vQ29uc3RyYWludHMuc2VhcmNoKX19fSk7YS5wcm90b3R5cGUuZm9ybWF0VmFsdWU9ZnVuY3Rpb24odixpKXtpZih2PT11bmRlZmluZWR8fHY9PW51bGwpe3JldHVybiBudWxsfXN3aXRjaChpKXtjYXNlInN0cmluZyI6cmV0dXJuIHY7Y2FzZSJpbnQiOnZhciByPXBhcnNlSW50KHYsMTApO2lmKGlzTmFOKHIpKXt0aHJvdyBuZXcgc2FwLnVpLm1vZGVsLkZvcm1hdEV4Y2VwdGlvbih2KyIgaXMgbm90IGEgdmFsaWQgaW50IHZhbHVlIil9cmV0dXJuIHI7Y2FzZSJmbG9hdCI6dmFyIFI9cGFyc2VGbG9hdCh2KTtpZihpc05hTihSKSl7dGhyb3cgbmV3IHNhcC51aS5tb2RlbC5Gb3JtYXRFeGNlcHRpb24odisiIGlzIG5vdCBhIHZhbGlkIGZsb2F0IHZhbHVlIil9cmV0dXJuIFI7Y2FzZSJib29sZWFuIjppZih2LnRvTG93ZXJDYXNlKCk9PSJ0cnVlInx8dj09IlgiKXtyZXR1cm4gdHJ1ZX1pZih2LnRvTG93ZXJDYXNlKCk9PSJmYWxzZSJ8fHY9PSIiKXtyZXR1cm4gZmFsc2V9dGhyb3cgbmV3IHNhcC51aS5tb2RlbC5Gb3JtYXRFeGNlcHRpb24odisiIGlzIG5vdCBhIHZhbGlkIGJvb2xlYW4gdmFsdWUiKTtkZWZhdWx0OnRocm93IG5ldyBzYXAudWkubW9kZWwuRm9ybWF0RXhjZXB0aW9uKCJEb24ndCBrbm93IGhvdyB0byBmb3JtYXQgU3RyaW5nIHRvICIraSl9fTthLnByb3RvdHlwZS5wYXJzZVZhbHVlPWZ1bmN0aW9uKHYsaSl7dmFyIHI7c3dpdGNoKGkpe2Nhc2Uic3RyaW5nIjpyZXR1cm4gdjtjYXNlImJvb2xlYW4iOmNhc2UiaW50IjpjYXNlImZsb2F0IjpyZXR1cm4gdi50b1N0cmluZygpO2RlZmF1bHQ6dGhyb3cgbmV3IHNhcC51aS5tb2RlbC5QYXJzZUV4Y2VwdGlvbigiRG9uJ3Qga25vdyBob3cgdG8gcGFyc2UgU3RyaW5nIGZyb20gIitpKX19O2EucHJvdG90eXBlLnZhbGlkYXRlVmFsdWU9ZnVuY3Rpb24odil7aWYodGhpcy5vQ29uc3RyYWludHMpe3ZhciBWPVtdO3EuZWFjaCh0aGlzLm9Db25zdHJhaW50cyxmdW5jdGlvbihuLGMpe3N3aXRjaChuKXtjYXNlIm1heExlbmd0aCI6aWYodi5sZW5ndGg+Yyl7Vi5wdXNoKCJtYXhMZW5ndGgiKX1icmVhaztjYXNlIm1pbkxlbmd0aCI6aWYodi5sZW5ndGg8Yyl7Vi5wdXNoKCJtaW5MZW5ndGgiKX1icmVhaztjYXNlInN0YXJ0c1dpdGgiOmlmKCFxLnNhcC5zdGFydHNXaXRoKHYsYykpe1YucHVzaCgic3RhcnRzV2l0aCIpfWJyZWFrO2Nhc2Uic3RhcnRzV2l0aElnbm9yZUNhc2UiOmlmKCFxLnNhcC5zdGFydHNXaXRoSWdub3JlQ2FzZSh2LGMpKXtWLnB1c2goInN0YXJ0c1dpdGhJZ25vcmVDYXNlIil9YnJlYWs7Y2FzZSJlbmRzV2l0aCI6aWYoIXEuc2FwLmVuZHNXaXRoKHYsYykpe1YucHVzaCgiZW5kc1dpdGgiKX1icmVhaztjYXNlImVuZHNXaXRoSWdub3JlQ2FzZSI6aWYoIXEuc2FwLmVuZHNXaXRoSWdub3JlQ2FzZSh2LGMpKXtWLnB1c2goImVuZHNXaXRoSWdub3JlQ2FzZSIpfWJyZWFrO2Nhc2UiY29udGFpbnMiOmlmKHYuaW5kZXhPZihjKT09LTEpe1YucHVzaCgiY29udGFpbnMiKX1icmVhaztjYXNlImVxdWFscyI6aWYodiE9Yyl7Vi5wdXNoKCJlcXVhbHMiKX1icmVhaztjYXNlInNlYXJjaCI6aWYodi5zZWFyY2goYyk9PS0xKXtWLnB1c2goInNlYXJjaCIpfWJyZWFrfX0pO2lmKFYubGVuZ3RoPjApe3Rocm93IG5ldyBzYXAudWkubW9kZWwuVmFsaWRhdGVFeGNlcHRpb24oIlZhbGlkYXRpb24gb2YgdHlwZSBjb25zdHJhaW50cyBmYWlsZWQiLFYpfX19O3JldHVybiBhfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLm1vZGVsLnR5cGUuVGltZScpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5tb2RlbC50eXBlLlRpbWUnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvbW9kZWwvdHlwZS9UaW1lIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnLi9EYXRlJ10sZnVuY3Rpb24ocSxEKXsidXNlIHN0cmljdCI7dmFyIFQ9RC5leHRlbmQoInNhcC51aS5tb2RlbC50eXBlLlRpbWUiLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbigpe0QuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMuc05hbWU9IlRpbWUifX0pO1QucHJvdG90eXBlLl9oYW5kbGVMb2NhbGl6YXRpb25DaGFuZ2U9ZnVuY3Rpb24oKXt0aGlzLm9PdXRwdXRGb3JtYXQ9c2FwLnVpLmNvcmUuZm9ybWF0LkRhdGVGb3JtYXQuZ2V0VGltZUluc3RhbmNlKHRoaXMub0Zvcm1hdE9wdGlvbnMpO2lmKHRoaXMub0Zvcm1hdE9wdGlvbnMuc291cmNlKXt0aGlzLm9JbnB1dEZvcm1hdD1zYXAudWkuY29yZS5mb3JtYXQuRGF0ZUZvcm1hdC5nZXRUaW1lSW5zdGFuY2UodGhpcy5vRm9ybWF0T3B0aW9ucy5zb3VyY2UpfX07cmV0dXJuIFR9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdqcXVlcnkuc2FwLnVpJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnanF1ZXJ5LnNhcC51aScpO3NhcC51aS5kZWZpbmUoImpxdWVyeS5zYXAudWkiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvR2xvYmFsJ10sZnVuY3Rpb24ocSxHKXsidXNlIHN0cmljdCI7aWYoIXEuc2FwKXt0aHJvdyJJbml0aWFsaXNhdGlvbiBvZiBqUXVlcnkuc2FwLnVpIGZhaWxlZC4galF1ZXJ5LnNhcCBwbHVnaW4gcmVxdWlyZWQhIn1pZighd2luZG93LnNhcHx8IXdpbmRvdy5zYXAudWkpe3Euc2FwLmZhdGFsKCJJbml0aWFsaXNhdGlvbiBvZiBqUXVlcnkuc2FwLnVpIGZhaWxlZC4gR2xvYmFsIFNBUCBVSSBuYW1lc3BhY2UgcmVxdWlyZWQhIil9aWYocS5zYXAudWkpe3JldHVybn1mdW5jdGlvbiB1KGkpe3JldHVybiBzYXAudWkuZ2V0Q29yZSgpLmdldFVJQXJlYSh0aGlzLmlkKSE9bnVsbH1mdW5jdGlvbiBmKGksbyl7cmV0dXJuIHNhcC51aS5nZXRDb3JlKCkuZ2V0VUlBcmVhKHRoaXMuaWQpfWZ1bmN0aW9uIGEoYyxpKXtyZXR1cm4gYy5nZXRVSUFyZWEoKS5nZXRJbnRlcmZhY2UoKX1xLmZuLnJvb3Q9ZnVuY3Rpb24ocil7dmFyIHQ7aWYocil7c2FwLnVpLmdldENvcmUoKS5zZXRSb290KHRoaXMuZ2V0KDApLHIpO3JldHVybiB0aGlzfXZhciBjPXRoaXMuY29udHJvbCgpO2lmKGMubGVuZ3RoPjApe3JldHVybiBxLm1hcChjLGEpfXZhciBVPXRoaXMudWlhcmVhKCk7aWYoVS5sZW5ndGg+MCl7cmV0dXJuIFV9dGhpcy5lYWNoKGZ1bmN0aW9uKGkpe3NhcC51aS5nZXRDb3JlKCkuY3JlYXRlVUlBcmVhKHRoaXMpfSk7cmV0dXJuIHRoaXN9O3EuZm4udWlhcmVhPWZ1bmN0aW9uKGkpe3ZhciBVPXRoaXMuc2xpY2UoIltpZF0iKS5maWx0ZXIodSkubWFwKGYpLmdldCgpO3JldHVybiB0eXBlb2YoaSk9PT0ibnVtYmVyIj9VW2ldOlV9O2Z1bmN0aW9uIGIoKXtpZighdGhpc3x8IXRoaXMubm9kZVR5cGV8fHRoaXMubm9kZVR5cGU9PT05KXtyZXR1cm4gbnVsbH10cnl7dmFyIGk9cSh0aGlzKS5jbG9zZXN0KCJbZGF0YS1zYXAtdWldIikuYXR0cigiaWQiKTtyZXR1cm4gaT9zYXAudWkuZ2V0Q29yZSgpLmJ5SWQoaSk6bnVsbH1jYXRjaChlKXtyZXR1cm4gbnVsbH19cS5mbi5jb250cm9sPWZ1bmN0aW9uKGkpe3ZhciBjPXRoaXMubWFwKGIpO2lmKGk9PT11bmRlZmluZWR8fGlzTmFOKGkpKXtyZXR1cm4gYy5nZXQoKX1lbHNle3JldHVybiBjLmdldChpKX19O3EuZm4uc2FwdWk9ZnVuY3Rpb24oYyxpLEMpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgbz1udWxsO2lmKHRoaXMpe2lmKGMuaW5kZXhPZigiLiIpPT0tMSl7Yz0ic2FwLnVpLmNvbW1vbnMuIitjfXZhciBkPXEuc2FwLmdldE9iamVjdChjKTtpZihkKXtpZih0eXBlb2YgQz09J29iamVjdCcmJnR5cGVvZiBDLnByZXNzPT0nZnVuY3Rpb24nKXtDLnByZXNzPXEucHJveHkoQy5wcmVzcyx0aGlzKX1vPW5ldyhkKShpLEMpO28ucGxhY2VBdCh0aGlzKX19fSl9O3JldHVybiBxfSxmYWxzZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5hcHAuQXBwbGljYXRpb25NZXRhZGF0YScpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5hcHAuQXBwbGljYXRpb25NZXRhZGF0YScpO3NhcC51aS5kZWZpbmUoInNhcC91aS9hcHAvQXBwbGljYXRpb25NZXRhZGF0YSIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ3NhcC91aS9jb3JlL0NvbXBvbmVudE1ldGFkYXRhJ10sZnVuY3Rpb24ocSxDKXsidXNlIHN0cmljdCI7dmFyIEE9ZnVuY3Rpb24oYyxvKXtDLmFwcGx5KHRoaXMsYXJndW1lbnRzKX07QS5wcm90b3R5cGU9cS5zYXAubmV3T2JqZWN0KEMucHJvdG90eXBlKTtBLnByZXByb2Nlc3NDbGFzc0luZm89ZnVuY3Rpb24oYyl7aWYoYyYmdHlwZW9mIGMubWV0YWRhdGE9PT0ic3RyaW5nIil7Yy5tZXRhZGF0YT17X3NyYzpjLm1ldGFkYXRhfX1yZXR1cm4gY307QS5wcm90b3R5cGUuYXBwbHlTZXR0aW5ncz1mdW5jdGlvbihjKXt2YXIgcz1jLm1ldGFkYXRhO0MucHJvdG90eXBlLmFwcGx5U2V0dGluZ3MuY2FsbCh0aGlzLGMpO2lmKHMuX3NyYyl7cS5zYXAubG9nLndhcm5pbmcoIlRoZSBtZXRhZGF0YSBvZiB0aGUgYXBwbGljYXRpb24gIit0aGlzLmdldE5hbWUoKSsiIGlzIGxvYWRlZCBmcm9tIGZpbGUgIitzLl9zcmMrIi4gVGhpcyBpcyBhIGRlc2lnbiB0aW1lIGZlYXR1cmUgYW5kIG5vdCBmb3IgcHJvZHVjdGl2ZSB1c2FnZSEiKTt2YXIgcD10aGlzLmdldE5hbWUoKS5yZXBsYWNlKC9cLlx3Kz8kLywiIik7dmFyIHU9cS5zYXAuZ2V0TW9kdWxlUGF0aChwLCIvIitzLl9zcmMpO3ZhciByPXEuc2FwLnN5bmNHZXRKU09OKHUpO2lmKHIuc3VjY2Vzcyl7cS5leHRlbmQocyxyLmRhdGEpfWVsc2V7cS5zYXAubG9nLmVycm9yKCJGYWlsZWQgdG8gbG9hZCBhcHBsaWNhdGlvbiBtZXRhZGF0YSBmcm9tIFwiIitzLl9zcmMrIlwiISBSZWFzb246ICIrci5lcnJvcil9fXRoaXMuX21Sb290Q29tcG9uZW50PXMucm9vdENvbXBvbmVudHx8bnVsbH07QS5wcm90b3R5cGUuZ2V0Um9vdENvbXBvbmVudD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9tUm9vdENvbXBvbmVudH07cmV0dXJuIEF9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS51dGlsLnNlcmlhbGl6ZXIuSFRNTFZpZXdTZXJpYWxpemVyJykpew0KLyoNCiAqIFNBUCBVSSBkZXZlbG9wbWVudCB0b29sa2l0IGZvciBIVE1MNSAoU0FQVUk1L09wZW5VSTUpDQogKiAoYykgQ29weXJpZ2h0IDIwMDktMjAxNCBTQVAgU0Ugb3IgYW4gU0FQIGFmZmlsaWF0ZSBjb21wYW55LiANCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgLSBzZWUgTElDRU5TRS50eHQuDQogKi8NCmpRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUudXRpbC5zZXJpYWxpemVyLkhUTUxWaWV3U2VyaWFsaXplcicpO2pRdWVyeS5zYXAucmVxdWlyZSgnc2FwLnVpLnRoaXJkcGFydHkudmtiZWF1dGlmeScpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL3V0aWwvc2VyaWFsaXplci9IVE1MVmlld1NlcmlhbGl6ZXIiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvYmFzZS9FdmVudFByb3ZpZGVyJywnLi9kZWxlZ2F0ZS9IVE1MJywnc2FwL3VpL3RoaXJkcGFydHkvdmtiZWF1dGlmeSddLGZ1bmN0aW9uKHEsRSxILHYpeyJ1c2Ugc3RyaWN0Ijt2YXIgYT1FLmV4dGVuZCgic2FwLnVpLmNvcmUudXRpbC5zZXJpYWxpemVyLkhUTUxWaWV3U2VyaWFsaXplciIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKFYsdyxnLEcpe0UuYXBwbHkodGhpcyk7dGhpcy5fb1ZpZXc9Vjt0aGlzLl9vV2luZG93PXc7dGhpcy5fZm5HZXRDb250cm9sSWQ9Zzt0aGlzLl9mbkdldEV2ZW50SGFuZGxlck5hbWU9R319KTthLnByb3RvdHlwZS5zZXJpYWxpemU9ZnVuY3Rpb24oKXt2YXIgcz1mdW5jdGlvbihDKXtyZXR1cm4oQyBpbnN0YW5jZW9mIHRoaXMuX29XaW5kb3cuc2FwLnVpLmNvcmUubXZjLlZpZXcpfTt2YXIgYz1uZXcgc2FwLnVpLmNvcmUudXRpbC5zZXJpYWxpemVyLlNlcmlhbGl6ZXIodGhpcy5fb1ZpZXcsbmV3IEgodGhpcy5fZm5HZXRDb250cm9sSWQsdGhpcy5fZm5HZXRFdmVudEhhbmRsZXJOYW1lKSx0cnVlLHRoaXMuX29XaW5kb3cscyk7dmFyIHI9Yy5zZXJpYWxpemUoKTt2YXIgVj1bXTtWLnB1c2goJzx0ZW1wbGF0ZScpO2lmKHRoaXMuX29WaWV3LmdldENvbnRyb2xsZXJOYW1lJiZ0aGlzLl9vVmlldy5nZXRDb250cm9sbGVyTmFtZSgpKXtWLnB1c2goJyBkYXRhLWNvbnRyb2xsZXItbmFtZT0iJyt0aGlzLl9vVmlldy5nZXRDb250cm9sbGVyTmFtZSgpKyciJyl9Vi5wdXNoKCIgPiIpO1YucHVzaChyKTtWLnB1c2goIjwvdGVtcGxhdGU+Iik7cmV0dXJuIHZrYmVhdXRpZnkueG1sKFYuam9pbigiIikpfTtyZXR1cm4gYX0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLnV0aWwuc2VyaWFsaXplci5YTUxWaWV3U2VyaWFsaXplcicpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLnV0aWwuc2VyaWFsaXplci5YTUxWaWV3U2VyaWFsaXplcicpO2pRdWVyeS5zYXAucmVxdWlyZSgnc2FwLnVpLnRoaXJkcGFydHkudmtiZWF1dGlmeScpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL3V0aWwvc2VyaWFsaXplci9YTUxWaWV3U2VyaWFsaXplciIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ3NhcC91aS9iYXNlL0V2ZW50UHJvdmlkZXInLCcuL2RlbGVnYXRlL1hNTCcsJ3NhcC91aS90aGlyZHBhcnR5L3ZrYmVhdXRpZnknXSxmdW5jdGlvbihxLEUsWCx2KXsidXNlIHN0cmljdCI7dmFyIGE9RS5leHRlbmQoInNhcC51aS5jb3JlLnV0aWwuc2VyaWFsaXplci5YTUxWaWV3U2VyaWFsaXplciIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKFYsdyxkLGcsRyl7RS5hcHBseSh0aGlzKTt0aGlzLl9vVmlldz1WO3RoaXMuX29XaW5kb3c9dzt0aGlzLl9zRGVmYXVsdE5hbWVzcGFjZT1kO3RoaXMuX2ZuR2V0Q29udHJvbElkPWc7dGhpcy5fZm5HZXRFdmVudEhhbmRsZXJOYW1lPUd9fSk7YS5wcm90b3R5cGUuc2VyaWFsaXplPWZ1bmN0aW9uKCl7dmFyIHA9W107dmFyIG09ZnVuY3Rpb24oQyxQKXtpZighUCl7dmFyIHQ9KEMpP0MuY29uc3RydWN0b3I6Ij8iO3Rocm93IEVycm9yKCJDb250cm9scyB3aXRoIGVtcHR5IHBhY2thZ2UgYXJlIGN1cnJlbnRseSBub3Qgc3VwcG9ydGVkIGJ5IHRoZSBYTUwgc2VyaWFsaXplcjogIit0KX1pZihxLmluQXJyYXkoUCxwKT09PS0xKXtwLnB1c2goUCl9fTt2YXIgcz1mdW5jdGlvbihDKXtyZXR1cm4oQyBpbnN0YW5jZW9mIHRoaXMuX29XaW5kb3cuc2FwLnVpLmNvcmUubXZjLlZpZXcpfTt2YXIgYz1uZXcgc2FwLnVpLmNvcmUudXRpbC5zZXJpYWxpemVyLlNlcmlhbGl6ZXIodGhpcy5fb1ZpZXcsbmV3IFgodGhpcy5fc0RlZmF1bHROYW1lc3BhY2UsdGhpcy5fZm5HZXRDb250cm9sSWQsdGhpcy5fZm5HZXRFdmVudEhhbmRsZXJOYW1lLG0pLHRydWUsdGhpcy5fb1dpbmRvdyxzKTt2YXIgcj1jLnNlcmlhbGl6ZSgpO3ZhciBWPVtdO1YucHVzaCgnPHNhcC51aS5jb3JlLm12YzpWaWV3Jyk7aWYodGhpcy5fb1ZpZXcuZ2V0Q29udHJvbGxlck5hbWUmJnRoaXMuX29WaWV3LmdldENvbnRyb2xsZXJOYW1lKCkpe1YucHVzaCgnIGNvbnRyb2xsZXJOYW1lPSInK3RoaXMuX29WaWV3LmdldENvbnRyb2xsZXJOYW1lKCkrJyInKX1pZihxLmluQXJyYXkoJ3NhcC51aS5jb3JlLm12YycscCk9PT0tMSl7cC5wdXNoKCdzYXAudWkuY29yZS5tdmMnKX1mb3IodmFyIGk9MDtpPHAubGVuZ3RoO2krKyl7aWYodGhpcy5fc0RlZmF1bHROYW1lc3BhY2UmJnRoaXMuX3NEZWZhdWx0TmFtZXNwYWNlPT09cFtpXSl7Vi5wdXNoKCcgeG1sbnM9IicrcFtpXSsnIicpfWVsc2V7Vi5wdXNoKCcgeG1sbnM6JytwW2ldKyc9IicrcFtpXSsnIicpfX1WLnB1c2goIiA+Iik7Vi5wdXNoKHIpO1YucHVzaCgiPC9zYXAudWkuY29yZS5tdmM6Vmlldz4iKTtyZXR1cm4gdmtiZWF1dGlmeS54bWwoVi5qb2luKCIiKSl9O3JldHVybiBhfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUud3MuU2FwUGNwV2ViU29ja2V0Jykpew0KLyohDQogKiBTQVAgVUkgZGV2ZWxvcG1lbnQgdG9vbGtpdCBmb3IgSFRNTDUgKFNBUFVJNS9PcGVuVUk1KQ0KICogKGMpIENvcHlyaWdodCAyMDA5LTIwMTQgU0FQIFNFIG9yIGFuIFNBUCBhZmZpbGlhdGUgY29tcGFueS4gDQogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wIC0gc2VlIExJQ0VOU0UudHh0Lg0KICovDQpqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLndzLlNhcFBjcFdlYlNvY2tldCcpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL3dzL1NhcFBjcFdlYlNvY2tldCIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJy4vV2ViU29ja2V0J10sZnVuY3Rpb24ocSxXKXsidXNlIHN0cmljdCI7dmFyIFM9Vy5leHRlbmQoInNhcC51aS5jb3JlLndzLlNhcFBjcFdlYlNvY2tldCIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKHUscCl7Vy5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fSk7Uy5TVVBQT1JURURfUFJPVE9DT0xTPXt2MTA6InYxMC5wY3Auc2FwLmNvbSJ9O1MuX2Rlc2VyaWFsaXplUmVnZXhwPS8oKD86W146XFxdfCg/OlxcLikpKyk6KCg/OlteOlxcXG5dfCg/OlxcLikpKikvO1MuX1NFUEFSQVRPUj0iXG5cbiI7Uy5fTUVTU0FHRT0iTUVTU0FHRSI7Uy5wcm90b3R5cGUuX29ub3Blbj1mdW5jdGlvbigpe3ZhciBzPWZhbHNlO2lmKHRoaXMuZ2V0UHJvdG9jb2woKT09PSIiKXtzPXRydWV9ZWxzZXtmb3IodmFyIHAgaW4gUy5TVVBQT1JURURfUFJPVE9DT0xTKXtpZihTLlNVUFBPUlRFRF9QUk9UT0NPTFMuaGFzT3duUHJvcGVydHkocCkpe2lmKFMuU1VQUE9SVEVEX1BST1RPQ09MU1twXT09PXRoaXMuZ2V0UHJvdG9jb2woKSl7cz10cnVlO2JyZWFrfX19fWlmKHMpe3RoaXMuZmlyZU9wZW4oKX1lbHNle3Euc2FwLmxvZy5lcnJvcigiVW5zdXBwb3J0ZWQgcHJvdG9jb2wgJyIrdGhpcy5nZXRQcm90b2NvbCgpKyInIHNlbGVjdGVkIGJ5IHRoZSBzZXJ2ZXIuICIrIkNvbm5lY3Rpb24gd2lsbCBiZSBjbG9zZWQuIik7dGhpcy5jbG9zZSgiVW5zdXBwb3J0ZWQgcHJvdG9jb2wgc2VsZWN0ZWQgYnkgdGhlIHNlcnZlciIpfX07Uy5wcm90b3R5cGUuX29ubWVzc2FnZT1mdW5jdGlvbihtKXt2YXIgcz0tMSxlPXt9O2lmKHR5cGVvZiBtLmRhdGE9PT0ic3RyaW5nIil7cz1tLmRhdGEuaW5kZXhPZihTLl9TRVBBUkFUT1IpfWlmKHMhPT0tMSl7ZS5wY3BGaWVsZHM9dGhpcy5fZXh0cmFjdFBjcEZpZWxkcyhtLmRhdGEuc3Vic3RyaW5nKDAscykpO2UuZGF0YT1tLmRhdGEuc3Vic3RyKHMrUy5fU0VQQVJBVE9SLmxlbmd0aCl9ZWxzZXtxLnNhcC5sb2cud2FybmluZygiSW52YWxpZCBQQ1AgbWVzc2FnZSByZWNlaXZlZDogIittLmRhdGEpO2UucGNwRmllbGRzPXt9O2UuZGF0YT1tLmRhdGF9dGhpcy5maXJlTWVzc2FnZShlKX07Uy5wcm90b3R5cGUuX2V4dHJhY3RQY3BGaWVsZHM9ZnVuY3Rpb24oaCl7dmFyIGY9aC5zcGxpdCgiXG4iKSxsPVtdLHA9e307Zm9yKHZhciBpPTA7aTxmLmxlbmd0aDtpKyspe2w9ZltpXS5tYXRjaChTLl9kZXNlcmlhbGl6ZVJlZ2V4cCk7aWYobCYmbC5sZW5ndGg9PT0zKXtwW3RoaXMuX3VuZXNjYXBlKGxbMV0pXT10aGlzLl91bmVzY2FwZShsWzJdKX19cmV0dXJuIHB9O1MucHJvdG90eXBlLl91bmVzY2FwZT1mdW5jdGlvbihlKXt2YXIgcD1lLnNwbGl0KCJcdTAwMDgiKSx1PSIiO2Zvcih2YXIgaT0wO2k8cC5sZW5ndGg7aSsrKXtwW2ldPXBbaV0ucmVwbGFjZSgvXFxcXC9nLCJcdTAwMDgiKS5yZXBsYWNlKC9cXDovZywnOicpLnJlcGxhY2UoL1xcbi9nLCdcbicpLnJlcGxhY2UoL1x1MDAwOC9nLCJcXCIpfXU9cC5qb2luKCJcdTAwMDgiKTtyZXR1cm4gdX07Uy5wcm90b3R5cGUuX3NlcmlhbGl6ZVBjcEZpZWxkcz1mdW5jdGlvbihwLG0sUCl7dmFyIHM9IiIsZj0iIixhPSIiO2lmKG09PT0nc3RyaW5nJyl7YT0ndGV4dCd9ZWxzZSBpZihtPT09J2Jsb2InfHxtPT09J2FycmF5YnVmZmVyJyl7YT0nYmluYXJ5J31pZihwJiZ0eXBlb2YgcD09PSdvYmplY3QnKXtmb3IoZiBpbiBwKXtpZihwLmhhc093blByb3BlcnR5KGYpJiZmLmluZGV4T2YoJ3BjcC0nKSE9PTApe3MrPXRoaXMuX2VzY2FwZShmKSsiOiIrdGhpcy5fZXNjYXBlKFN0cmluZyhwW2ZdKSkrIlxuIn19fXJldHVybiJwY3AtYWN0aW9uOiIrUCsiXG5wY3AtYm9keS10eXBlOiIrYSsiXG4iK3MrIlxuIn07Uy5wcm90b3R5cGUuX2VzY2FwZT1mdW5jdGlvbih1KXtyZXR1cm4gdS5yZXBsYWNlKC9cXC9nLCdcXFxcJykucmVwbGFjZSgvOi9nLCdcXDonKS5yZXBsYWNlKC9cbi9nLCdcXG4nKX07Uy5wcm90b3R5cGUuc2VuZD1mdW5jdGlvbihtLHApe3ZhciBNPXR5cGVvZiBtLFA9IiI7UD10aGlzLl9zZXJpYWxpemVQY3BGaWVsZHMocCxNLFMuX01FU1NBR0UpO1cucHJvdG90eXBlLnNlbmQuY2FsbCh0aGlzLFArbSk7cmV0dXJuIHRoaXN9O3JldHVybiBTfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLm1vZGVsLkNsaWVudENvbnRleHRCaW5kaW5nJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLm1vZGVsLkNsaWVudENvbnRleHRCaW5kaW5nJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL21vZGVsL0NsaWVudENvbnRleHRCaW5kaW5nIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnLi9Db250ZXh0QmluZGluZyddLGZ1bmN0aW9uKHEsQyl7InVzZSBzdHJpY3QiO3ZhciBhPUMuZXh0ZW5kKCJzYXAudWkubW9kZWwuQ2xpZW50Q29udGV4dEJpbmRpbmciLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbihtLHAsYyxQLGUpe0MuY2FsbCh0aGlzLG0scCxjLFAsZSk7dmFyIHQ9dGhpczttLmNyZWF0ZUJpbmRpbmdDb250ZXh0KHAsYyxQLGZ1bmN0aW9uKGMpe3QuYkluaXRpYWw9ZmFsc2U7dC5vRWxlbWVudENvbnRleHQ9Y30pfX0pO2EucHJvdG90eXBlLnJlZnJlc2g9ZnVuY3Rpb24oZil7dmFyIHQ9dGhpczt0aGlzLm9Nb2RlbC5jcmVhdGVCaW5kaW5nQ29udGV4dCh0aGlzLnNQYXRoLHRoaXMub0NvbnRleHQsdGhpcy5tUGFyYW1ldGVycyxmdW5jdGlvbihjKXtpZih0Lm9FbGVtZW50Q29udGV4dD09PWMmJiFmKXt0Lm9Nb2RlbC5jaGVja1VwZGF0ZSh0cnVlLGMpfWVsc2V7dC5vRWxlbWVudENvbnRleHQ9Yzt0Ll9maXJlQ2hhbmdlKCl9fSx0cnVlKX07YS5wcm90b3R5cGUuaW5pdGlhbGl6ZT1mdW5jdGlvbigpe3ZhciB0PXRoaXM7dGhpcy5vTW9kZWwuY3JlYXRlQmluZGluZ0NvbnRleHQodGhpcy5zUGF0aCx0aGlzLm9Db250ZXh0LHRoaXMubVBhcmFtZXRlcnMsZnVuY3Rpb24oYyl7dC5vRWxlbWVudENvbnRleHQ9Yzt0Ll9maXJlQ2hhbmdlKCl9LHRydWUpfTthLnByb3RvdHlwZS5zZXRDb250ZXh0PWZ1bmN0aW9uKGMpe3ZhciB0PXRoaXM7aWYodGhpcy5vQ29udGV4dCE9Yyl7dGhpcy5vQ29udGV4dD1jO3RoaXMub01vZGVsLmNyZWF0ZUJpbmRpbmdDb250ZXh0KHRoaXMuc1BhdGgsdGhpcy5vQ29udGV4dCx0aGlzLm1QYXJhbWV0ZXJzLGZ1bmN0aW9uKGMpe3Qub0VsZW1lbnRDb250ZXh0PWM7dC5fZmlyZUNoYW5nZSgpfSl9fTtyZXR1cm4gYX0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5tb2RlbC5DbGllbnRMaXN0QmluZGluZycpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5tb2RlbC5DbGllbnRMaXN0QmluZGluZycpO3NhcC51aS5kZWZpbmUoInNhcC91aS9tb2RlbC9DbGllbnRMaXN0QmluZGluZyIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJy4vRmlsdGVyVHlwZScsJy4vTGlzdEJpbmRpbmcnXSxmdW5jdGlvbihxLEYsTCl7InVzZSBzdHJpY3QiO3ZhciBDPUwuZXh0ZW5kKCJzYXAudWkubW9kZWwuQ2xpZW50TGlzdEJpbmRpbmciLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbihtLHAsYyxzLGYsUCl7TC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5iSWdub3JlU3VzcGVuZD1mYWxzZTt0aGlzLnVwZGF0ZSgpfSxtZXRhZGF0YTp7cHVibGljTWV0aG9kczpbImdldExlbmd0aCJdfX0pO0MucHJvdG90eXBlLl9nZXRDb250ZXh0cz1mdW5jdGlvbihzLGwpe2lmKCFzKXtzPTB9aWYoIWwpe2w9TWF0aC5taW4odGhpcy5pTGVuZ3RoLHRoaXMub01vZGVsLmlTaXplTGltaXQpfXZhciBlPU1hdGgubWluKHMrbCx0aGlzLmFJbmRpY2VzLmxlbmd0aCksYyxhPVtdLHA9dGhpcy5vTW9kZWwucmVzb2x2ZSh0aGlzLnNQYXRoLHRoaXMub0NvbnRleHQpO2lmKHAmJiFxLnNhcC5lbmRzV2l0aChwLCIvIikpe3ArPSIvIn1mb3IodmFyIGk9cztpPGU7aSsrKXtjPXRoaXMub01vZGVsLmdldENvbnRleHQocCt0aGlzLmFJbmRpY2VzW2ldKTthLnB1c2goYyl9cmV0dXJuIGF9O0MucHJvdG90eXBlLnNldENvbnRleHQ9ZnVuY3Rpb24oYyl7aWYodGhpcy5vQ29udGV4dCE9Yyl7dGhpcy5vQ29udGV4dD1jO2lmKHRoaXMuaXNSZWxhdGl2ZSgpKXt0aGlzLnVwZGF0ZSgpO3RoaXMuX2ZpcmVDaGFuZ2Uoe3JlYXNvbjpzYXAudWkubW9kZWwuQ2hhbmdlUmVhc29uLkNvbnRleHR9KX19fTtDLnByb3RvdHlwZS5nZXRMZW5ndGg9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pTGVuZ3RofTtDLnByb3RvdHlwZS5fZ2V0TGVuZ3RoPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYUluZGljZXMubGVuZ3RofTtDLnByb3RvdHlwZS51cGRhdGVJbmRpY2VzPWZ1bmN0aW9uKCl7dGhpcy5hSW5kaWNlcz1bXTtmb3IodmFyIGk9MDtpPHRoaXMub0xpc3QubGVuZ3RoO2krKyl7dGhpcy5hSW5kaWNlcy5wdXNoKGkpfX07Qy5wcm90b3R5cGUuc29ydD1mdW5jdGlvbihzKXtpZighcyl7dGhpcy5hU29ydGVycz1udWxsO3RoaXMudXBkYXRlSW5kaWNlcygpO3RoaXMuYXBwbHlGaWx0ZXIoKX1lbHNle2lmKHMgaW5zdGFuY2VvZiBzYXAudWkubW9kZWwuU29ydGVyKXtzPVtzXX10aGlzLmFTb3J0ZXJzPXM7dGhpcy5hcHBseVNvcnQoKX10aGlzLmJJZ25vcmVTdXNwZW5kPXRydWU7dGhpcy5fZmlyZUNoYW5nZSh7cmVhc29uOnNhcC51aS5tb2RlbC5DaGFuZ2VSZWFzb24uU29ydH0pO3RoaXMuX2ZpcmVTb3J0KHtzb3J0ZXI6c30pO3RoaXMuYklnbm9yZVN1c3BlbmQ9ZmFsc2U7cmV0dXJuIHRoaXN9O0MucHJvdG90eXBlLmFwcGx5U29ydD1mdW5jdGlvbigpe3ZhciB0PXRoaXMscz1bXSxjPVtdLHYsUztpZighdGhpcy5hU29ydGVyc3x8dGhpcy5hU29ydGVycy5sZW5ndGg9PTApe3JldHVybn1mb3IodmFyIGo9MDtqPHRoaXMuYVNvcnRlcnMubGVuZ3RoO2orKyl7Uz10aGlzLmFTb3J0ZXJzW2pdO2Nbal09Uy5mbkNvbXBhcmU7aWYoIWNbal0pe2Nbal09ZnVuY3Rpb24oYSxiKXtpZihiPT1udWxsKXtyZXR1cm4tMX1pZihhPT1udWxsKXtyZXR1cm4gMX1pZih0eXBlb2YgYT09InN0cmluZyImJnR5cGVvZiBiPT0ic3RyaW5nIil7cmV0dXJuIGEubG9jYWxlQ29tcGFyZShiKX1pZihhPGIpe3JldHVybi0xfWlmKGE+Yil7cmV0dXJuIDF9cmV0dXJuIDB9fXEuZWFjaCh0aGlzLmFJbmRpY2VzLGZ1bmN0aW9uKGksSSl7dj10Lm9Nb2RlbC5nZXRQcm9wZXJ0eShTLnNQYXRoLHQub0xpc3RbSV0pO2lmKHR5cGVvZiB2PT0ic3RyaW5nIil7dj12LnRvTG9jYWxlVXBwZXJDYXNlKCl9aWYoIXNbal0pe3Nbal09W119c1tqXVtJXT12fSl9dGhpcy5hSW5kaWNlcy5zb3J0KGZ1bmN0aW9uKGEsYil7dmFyIGQ9c1swXVthXSxlPXNbMF1bYl07cmV0dXJuIHQuX2FwcGx5U29ydENvbXBhcmUoYSxiLGQsZSxzLGMsMCl9KX07Qy5wcm90b3R5cGUuX2FwcGx5U29ydENvbXBhcmU9ZnVuY3Rpb24oYSxiLHYsYyxzLGQsRCl7dmFyIFM9dGhpcy5hU29ydGVyc1tEXSxmPWRbRF0scjtyPWYodixjKTtpZihTLmJEZXNjZW5kaW5nKXtyPS1yfWlmKHI9PTAmJnRoaXMuYVNvcnRlcnNbRCsxXSl7dj1zW0QrMV1bYV0sYz1zW0QrMV1bYl07cj10aGlzLl9hcHBseVNvcnRDb21wYXJlKGEsYix2LGMscyxkLEQrMSl9cmV0dXJuIHJ9O0MucHJvdG90eXBlLmZpbHRlcj1mdW5jdGlvbihmLHMpe3RoaXMudXBkYXRlSW5kaWNlcygpO2lmKGYgaW5zdGFuY2VvZiBzYXAudWkubW9kZWwuRmlsdGVyKXtmPVtmXX1pZihzPT1GLkFwcGxpY2F0aW9uKXt0aGlzLmFBcHBsaWNhdGlvbkZpbHRlcnM9Znx8W119ZWxzZSBpZihzPT1GLkNvbnRyb2wpe3RoaXMuYUZpbHRlcnM9Znx8W119ZWxzZXt0aGlzLmFGaWx0ZXJzPWZ8fFtdO3RoaXMuYUFwcGxpY2F0aW9uRmlsdGVycz1bXX1mPXRoaXMuYUZpbHRlcnMuY29uY2F0KHRoaXMuYUFwcGxpY2F0aW9uRmlsdGVycyk7aWYoZi5sZW5ndGg9PTApe3RoaXMuYUZpbHRlcnM9W107dGhpcy5hQXBwbGljYXRpb25GaWx0ZXJzPVtdO3RoaXMuaUxlbmd0aD10aGlzLl9nZXRMZW5ndGgoKX1lbHNle3RoaXMuYXBwbHlGaWx0ZXIoKX10aGlzLmFwcGx5U29ydCgpO3RoaXMuYklnbm9yZVN1c3BlbmQ9dHJ1ZTt0aGlzLl9maXJlQ2hhbmdlKHtyZWFzb246c2FwLnVpLm1vZGVsLkNoYW5nZVJlYXNvbi5GaWx0ZXJ9KTtpZihzPT1GLkFwcGxpY2F0aW9uKXt0aGlzLl9maXJlRmlsdGVyKHtmaWx0ZXJzOnRoaXMuYUFwcGxpY2F0aW9uRmlsdGVyc30pfWVsc2V7dGhpcy5fZmlyZUZpbHRlcih7ZmlsdGVyczp0aGlzLmFGaWx0ZXJzfSl9dGhpcy5iSWdub3JlU3VzcGVuZD1mYWxzZTtyZXR1cm4gdGhpc307Qy5wcm90b3R5cGUubm9ybWFsaXplRmlsdGVyVmFsdWU9ZnVuY3Rpb24odil7aWYodHlwZW9mIHY9PSJzdHJpbmciKXtyZXR1cm4gdi50b1VwcGVyQ2FzZSgpfWlmKHYgaW5zdGFuY2VvZiBEYXRlKXtyZXR1cm4gdi5nZXRUaW1lKCl9cmV0dXJuIHZ9O0MucHJvdG90eXBlLmFwcGx5RmlsdGVyPWZ1bmN0aW9uKCl7aWYoIXRoaXMuYUZpbHRlcnMpe3JldHVybn12YXIgdD10aGlzLGY9e30sYSxiPVtdLGc9ZmFsc2UsYz10cnVlLGQ9dGhpcy5hRmlsdGVycy5jb25jYXQodGhpcy5hQXBwbGljYXRpb25GaWx0ZXJzKTtxLmVhY2goZCxmdW5jdGlvbihqLG8pe2lmKG8uc1BhdGghPT11bmRlZmluZWQpe2E9ZltvLnNQYXRoXTtpZighYSl7YT1mW28uc1BhdGhdPVtdfX1lbHNle2E9ZlsiX19tdWx0aUZpbHRlciJdO2lmKCFhKXthPWZbIl9fbXVsdGlGaWx0ZXIiXT1bXX19YS5wdXNoKG8pfSk7cS5lYWNoKHRoaXMuYUluZGljZXMsZnVuY3Rpb24oaSxJKXtjPXRydWU7cS5lYWNoKGYsZnVuY3Rpb24ocCxhKXtpZihwIT09Il9fbXVsdGlGaWx0ZXIiKXt2YXIgdj10Lm9Nb2RlbC5nZXRQcm9wZXJ0eShwLHQub0xpc3RbSV0pO3Y9dC5ub3JtYWxpemVGaWx0ZXJWYWx1ZSh2KTtnPWZhbHNlO3EuZWFjaChhLGZ1bmN0aW9uKGosbyl7dmFyIFQ9dC5nZXRGaWx0ZXJGdW5jdGlvbihvKTtpZih2IT11bmRlZmluZWQmJlQodikpe2c9dHJ1ZTtyZXR1cm4gZmFsc2V9fSl9ZWxzZXtnPWZhbHNlO3EuZWFjaChhLGZ1bmN0aW9uKGosbyl7Zz10Ll9yZXNvbHZlTXVsdGlGaWx0ZXIobyxJKTtpZihnKXtyZXR1cm4gZmFsc2V9fSl9aWYoIWcpe2M9ZmFsc2U7cmV0dXJuIGZhbHNlfX0pO2lmKGMpe2IucHVzaChJKX19KTt0aGlzLmFJbmRpY2VzPWI7dGhpcy5pTGVuZ3RoPWIubGVuZ3RofTtDLnByb3RvdHlwZS5fcmVzb2x2ZU11bHRpRmlsdGVyPWZ1bmN0aW9uKG0sSSl7dmFyIHQ9dGhpcyxNPWZhbHNlLGY9bS5hRmlsdGVycztpZihmKXtxLmVhY2goZixmdW5jdGlvbihpLG8pe3ZhciBsPWZhbHNlO2lmKG8uX2JNdWx0aUZpbHRlcil7bD10Ll9yZXNvbHZlTXVsdGlGaWx0ZXIobyxJKX1lbHNlIGlmKG8uc1BhdGghPT11bmRlZmluZWQpe3ZhciB2PXQub01vZGVsLmdldFByb3BlcnR5KG8uc1BhdGgsdC5vTGlzdFtJXSk7dj10Lm5vcm1hbGl6ZUZpbHRlclZhbHVlKHYpO3ZhciBUPXQuZ2V0RmlsdGVyRnVuY3Rpb24obyk7aWYodiE9dW5kZWZpbmVkJiZUKHYpKXtsPXRydWV9fWlmKGwmJm0uYkFuZCl7TT10cnVlfWVsc2UgaWYoIWwmJm0uYkFuZCl7TT1mYWxzZTtyZXR1cm4gZmFsc2V9ZWxzZSBpZihsKXtNPXRydWU7cmV0dXJuIGZhbHNlfX0pfXJldHVybiBNfTtDLnByb3RvdHlwZS5nZXRGaWx0ZXJGdW5jdGlvbj1mdW5jdGlvbihmKXtpZihmLmZuVGVzdCl7cmV0dXJuIGYuZm5UZXN0fXZhciB2PXRoaXMubm9ybWFsaXplRmlsdGVyVmFsdWUoZi5vVmFsdWUxKSxWPXRoaXMubm9ybWFsaXplRmlsdGVyVmFsdWUoZi5vVmFsdWUyKTtzd2l0Y2goZi5zT3BlcmF0b3Ipe2Nhc2UiRVEiOmYuZm5UZXN0PWZ1bmN0aW9uKGEpe3JldHVybiBhPT12fTticmVhaztjYXNlIk5FIjpmLmZuVGVzdD1mdW5jdGlvbihhKXtyZXR1cm4gYSE9dn07YnJlYWs7Y2FzZSJMVCI6Zi5mblRlc3Q9ZnVuY3Rpb24oYSl7cmV0dXJuIGE8dn07YnJlYWs7Y2FzZSJMRSI6Zi5mblRlc3Q9ZnVuY3Rpb24oYSl7cmV0dXJuIGE8PXZ9O2JyZWFrO2Nhc2UiR1QiOmYuZm5UZXN0PWZ1bmN0aW9uKGEpe3JldHVybiBhPnZ9O2JyZWFrO2Nhc2UiR0UiOmYuZm5UZXN0PWZ1bmN0aW9uKGEpe3JldHVybiBhPj12fTticmVhaztjYXNlIkJUIjpmLmZuVGVzdD1mdW5jdGlvbihhKXtyZXR1cm4oYT49dikmJihhPD1WKX07YnJlYWs7Y2FzZSJDb250YWlucyI6Zi5mblRlc3Q9ZnVuY3Rpb24oYSl7aWYodHlwZW9mIGEhPSJzdHJpbmciKXt0aHJvdyBuZXcgRXJyb3IoIk9ubHkgXCJTdHJpbmdcIiB2YWx1ZXMgYXJlIHN1cHBvcnRlZCBmb3IgdGhlIEZpbHRlck9wZXJhdG9yOiBcIkNvbnRhaW5zXCIuIil9cmV0dXJuIGEuaW5kZXhPZih2KSE9LTF9O2JyZWFrO2Nhc2UiU3RhcnRzV2l0aCI6Zi5mblRlc3Q9ZnVuY3Rpb24oYSl7aWYodHlwZW9mIGEhPSJzdHJpbmciKXt0aHJvdyBuZXcgRXJyb3IoIk9ubHkgXCJTdHJpbmdcIiB2YWx1ZXMgYXJlIHN1cHBvcnRlZCBmb3IgdGhlIEZpbHRlck9wZXJhdG9yOiBcIlN0YXJ0c1dpdGhcIi4iKX1yZXR1cm4gYS5pbmRleE9mKHYpPT0wfTticmVhaztjYXNlIkVuZHNXaXRoIjpmLmZuVGVzdD1mdW5jdGlvbihhKXtpZih0eXBlb2YgYSE9InN0cmluZyIpe3Rocm93IG5ldyBFcnJvcigiT25seSBcIlN0cmluZ1wiIHZhbHVlcyBhcmUgc3VwcG9ydGVkIGZvciB0aGUgRmlsdGVyT3BlcmF0b3I6IFwiRW5kc1dpdGhcIi4iKX12YXIgcD1hLmxhc3RJbmRleE9mKHYpO2lmKHA9PS0xKXtyZXR1cm4gZmFsc2V9cmV0dXJuIHA9PWEubGVuZ3RoLW5ldyBTdHJpbmcoZi5vVmFsdWUxKS5sZW5ndGh9O2JyZWFrO2RlZmF1bHQ6Zi5mblRlc3Q9ZnVuY3Rpb24oYSl7cmV0dXJuIHRydWV9fXJldHVybiBmLmZuVGVzdH07Qy5wcm90b3R5cGUuZ2V0RGlzdGluY3RWYWx1ZXM9ZnVuY3Rpb24ocCl7dmFyIHI9W10sbT17fSx2LHQ9dGhpcztxLmVhY2godGhpcy5vTGlzdCxmdW5jdGlvbihpLGMpe3Y9dC5vTW9kZWwuZ2V0UHJvcGVydHkocCxjKTtpZighbVt2XSl7bVt2XT10cnVlO3IucHVzaCh2KX19KTtyZXR1cm4gcn07cmV0dXJuIEN9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkubW9kZWwuQ2xpZW50VHJlZUJpbmRpbmcnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkubW9kZWwuQ2xpZW50VHJlZUJpbmRpbmcnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvbW9kZWwvQ2xpZW50VHJlZUJpbmRpbmciLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCcuL1RyZWVCaW5kaW5nJ10sZnVuY3Rpb24ocSxUKXsidXNlIHN0cmljdCI7dmFyIEM9VC5leHRlbmQoInNhcC51aS5tb2RlbC5DbGllbnRUcmVlQmluZGluZyIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKG0scCxjLGYsUCl7VC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7aWYoIXRoaXMub0NvbnRleHQpe3RoaXMub0NvbnRleHQ9IiJ9dGhpcy5maWx0ZXJJbmZvPXt9O3RoaXMuZmlsdGVySW5mby5hRmlsdGVyZWRDb250ZXh0cz1bXTt0aGlzLmZpbHRlckluZm8ub1BhcmVudENvbnRleHQ9e307aWYodGhpcy5hRmlsdGVycyl7aWYodGhpcy5vTW9kZWwuX2dldE9iamVjdCh0aGlzLnNQYXRoLHRoaXMub0NvbnRleHQpKXt0aGlzLmZpbHRlcihmKX19fX0pO0MucHJvdG90eXBlLmdldFJvb3RDb250ZXh0cz1mdW5jdGlvbigpe2lmKCF0aGlzLm9Nb2RlbC5pc0xpc3QodGhpcy5zUGF0aCkpe3ZhciBjPXRoaXMub01vZGVsLmdldENvbnRleHQodGhpcy5zUGF0aCk7aWYodGhpcy5iRGlzcGxheVJvb3ROb2RlKXtyZXR1cm5bY119ZWxzZXtyZXR1cm4gdGhpcy5nZXROb2RlQ29udGV4dHMoYyl9fWVsc2V7dmFyIGE9W10sdD10aGlzO3EuZWFjaCh0aGlzLm9Nb2RlbC5fZ2V0T2JqZWN0KHRoaXMuc1BhdGgpLGZ1bmN0aW9uKGksbyl7dC5fc2F2ZVN1YkNvbnRleHQobyxhLHQuc1BhdGgrKHEuc2FwLmVuZHNXaXRoKHQuc1BhdGgsIi8iKT8iIjoiLyIpLGkpfSk7cmV0dXJuIGF9fTtDLnByb3RvdHlwZS5nZXROb2RlQ29udGV4dHM9ZnVuY3Rpb24oYyl7dmFyIHM9Yy5nZXRQYXRoKCk7aWYoIXEuc2FwLmVuZHNXaXRoKHMsIi8iKSl7cz1zKyIvIn1pZighcS5zYXAuc3RhcnRzV2l0aChzLCIvIikpe3M9Ii8iK3N9dmFyIGE9W10sdD10aGlzLG49dGhpcy5vTW9kZWwuX2dldE9iamVjdChzKSxvLEE9dGhpcy5tUGFyYW1ldGVycyYmdGhpcy5tUGFyYW1ldGVycy5hcnJheU5hbWVzLGI7aWYoQSYmcS5pc0FycmF5KEEpKXtxLmVhY2goQSxmdW5jdGlvbihpLGQpe2I9bltkXTtpZihiKXtxLmVhY2goYixmdW5jdGlvbihTLGUpe3QuX3NhdmVTdWJDb250ZXh0KGUsYSxzLGQrIi8iK1MpfSl9fSl9ZWxzZXtpZihuKXtxLnNhcC5lYWNoKG4sZnVuY3Rpb24oTixvKXtpZihxLmlzQXJyYXkobykpe3EuZWFjaChvLGZ1bmN0aW9uKFMsZCl7dC5fc2F2ZVN1YkNvbnRleHQoZCxhLHMsTisiLyIrUyl9KX1lbHNlIGlmKHR5cGVvZiBvPT0ib2JqZWN0Iil7dC5fc2F2ZVN1YkNvbnRleHQobyxhLHMsTil9fSl9fXJldHVybiBhfTtDLnByb3RvdHlwZS5oYXNDaGlsZHJlbj1mdW5jdGlvbihjKXtyZXR1cm4gYz90aGlzLmdldE5vZGVDb250ZXh0cyhjKS5sZW5ndGg+MDpmYWxzZX07Qy5wcm90b3R5cGUuX3NhdmVTdWJDb250ZXh0PWZ1bmN0aW9uKG4sYyxzLE4pe2lmKHR5cGVvZiBuPT0ib2JqZWN0Iil7dmFyIG89dGhpcy5vTW9kZWwuZ2V0Q29udGV4dChzK04pO2lmKHRoaXMuYUZpbHRlcnMmJiF0aGlzLmJJc0ZpbHRlcmluZyl7aWYocS5pbkFycmF5KG8sdGhpcy5maWx0ZXJJbmZvLmFGaWx0ZXJlZENvbnRleHRzKSE9LTEpe2MucHVzaChvKX19ZWxzZXtjLnB1c2gobyl9fX07Qy5wcm90b3R5cGUuZmlsdGVyPWZ1bmN0aW9uKGYpe3RoaXMuZmlsdGVySW5mby5hRmlsdGVyZWRDb250ZXh0cz1bXTt0aGlzLmZpbHRlckluZm8ub1BhcmVudENvbnRleHQ9e307aWYoIWZ8fCFxLmlzQXJyYXkoZil8fGYubGVuZ3RoPT0wKXt0aGlzLmFGaWx0ZXJzPW51bGx9ZWxzZXt0aGlzLmFGaWx0ZXJzPWY7dmFyIGM9bmV3IHNhcC51aS5tb2RlbC5Db250ZXh0KHRoaXMub01vZGVsLHRoaXMuc1BhdGgpO3RoaXMuZmlsdGVyUmVjdXJzaXZlKGMpfXRoaXMuX2ZpcmVDaGFuZ2Uoe3JlYXNvbjoiZmlsdGVyIn0pO3RoaXMuX2ZpcmVGaWx0ZXIoe2ZpbHRlcnM6Zn0pfTtDLnByb3RvdHlwZS5maWx0ZXJSZWN1cnNpdmU9ZnVuY3Rpb24ocCl7dGhpcy5iSXNGaWx0ZXJpbmc9dHJ1ZTt2YXIgYz10aGlzLmdldE5vZGVDb250ZXh0cyhwKTt0aGlzLmJJc0ZpbHRlcmluZz1mYWxzZTtpZihjLmxlbmd0aD4wKXt2YXIgdD10aGlzO3EuZWFjaChjLGZ1bmN0aW9uKGksbyl7dC5maWx0ZXJSZWN1cnNpdmUobyl9KTt0aGlzLmFwcGx5RmlsdGVyKHApfX07Qy5wcm90b3R5cGUuYXBwbHlGaWx0ZXI9ZnVuY3Rpb24ocCl7aWYoIXRoaXMuYUZpbHRlcnMpe3JldHVybn12YXIgdD10aGlzLGY9e30sRixhPVtdLGc9ZmFsc2UsYj10cnVlO3RoaXMuYklzRmlsdGVyaW5nPXRydWU7dmFyIHU9dGhpcy5nZXROb2RlQ29udGV4dHMocCk7dGhpcy5iSXNGaWx0ZXJpbmc9ZmFsc2U7cS5lYWNoKHQuYUZpbHRlcnMsZnVuY3Rpb24oaixvKXtpZihvLnNQYXRoKXtGPWZbby5zUGF0aF07aWYoIUYpe0Y9ZltvLnNQYXRoXT1bXX19ZWxzZXtGPWZbIl9fbXVsdGlGaWx0ZXIiXTtpZighRil7Rj1mWyJfX211bHRpRmlsdGVyIl09W119fUYucHVzaChvKX0pO3EuZWFjaCh1LGZ1bmN0aW9uKGksVSl7Yj10cnVlO3EuZWFjaChmLGZ1bmN0aW9uKFAsRil7aWYoUCE9PSJfX211bHRpRmlsdGVyIil7dmFyIHY9dC5vTW9kZWwuX2dldE9iamVjdChQLFUpO2lmKHR5cGVvZiB2PT0ic3RyaW5nIil7dj12LnRvVXBwZXJDYXNlKCl9Zz1mYWxzZTtxLmVhY2goRixmdW5jdGlvbihqLG8pe3ZhciBjPXQuZ2V0RmlsdGVyRnVuY3Rpb24obyk7aWYodiE9dW5kZWZpbmVkJiZjKHYpKXtnPXRydWU7cmV0dXJuIGZhbHNlfX0pfWVsc2V7Zz1mYWxzZTtxLmVhY2goRixmdW5jdGlvbihqLG8pe2c9dC5fcmVzb2x2ZU11bHRpRmlsdGVyKG8sVSk7aWYoZyl7cmV0dXJuIGZhbHNlfX0pfWlmKCFnKXtiPWZhbHNlO3JldHVybiBmYWxzZX19KTtpZihiKXthLnB1c2goVSl9fSk7aWYoYS5sZW5ndGg+MCl7cS5tZXJnZSh0aGlzLmZpbHRlckluZm8uYUZpbHRlcmVkQ29udGV4dHMsYSk7dGhpcy5maWx0ZXJJbmZvLmFGaWx0ZXJlZENvbnRleHRzLnB1c2gocCk7dGhpcy5maWx0ZXJJbmZvLm9QYXJlbnRDb250ZXh0PXB9aWYocS5pbkFycmF5KHRoaXMuZmlsdGVySW5mby5vUGFyZW50Q29udGV4dCx1KSE9LTEpe3RoaXMuZmlsdGVySW5mby5hRmlsdGVyZWRDb250ZXh0cy5wdXNoKHApO3RoaXMuZmlsdGVySW5mby5vUGFyZW50Q29udGV4dD1wfX07Qy5wcm90b3R5cGUuX3Jlc29sdmVNdWx0aUZpbHRlcj1mdW5jdGlvbihtLHUpe3ZhciB0PXRoaXMsTT1mYWxzZSxmPW0uYUZpbHRlcnM7aWYoZil7cS5lYWNoKGYsZnVuY3Rpb24oaSxGKXt2YXIgbD1mYWxzZTtpZihGLl9iTXVsdGlGaWx0ZXIpe2w9dC5fcmVzb2x2ZU11bHRpRmlsdGVyKEYsdSl9ZWxzZSBpZihGLnNQYXRoKXt2YXIgdj10Lm9Nb2RlbC5nZXRQcm9wZXJ0eShGLnNQYXRoLHUpO2lmKHR5cGVvZiB2PT0ic3RyaW5nIil7dj12LnRvVXBwZXJDYXNlKCl9dmFyIGE9dC5nZXRGaWx0ZXJGdW5jdGlvbihGKTtpZih2IT11bmRlZmluZWQmJmEodikpe2w9dHJ1ZX19aWYobCYmbS5iQW5kKXtNPXRydWV9ZWxzZSBpZighbCYmbS5iQW5kKXtNPWZhbHNlO3JldHVybiBmYWxzZX1lbHNlIGlmKGwpe009dHJ1ZTtyZXR1cm4gZmFsc2V9fSl9cmV0dXJuIE19O0MucHJvdG90eXBlLmdldEZpbHRlckZ1bmN0aW9uPWZ1bmN0aW9uKGYpe2lmKGYuZm5UZXN0KXtyZXR1cm4gZi5mblRlc3R9dmFyIHY9Zi5vVmFsdWUxLFY9Zi5vVmFsdWUyO2lmKHR5cGVvZiB2PT0ic3RyaW5nIil7dj12LnRvVXBwZXJDYXNlKCl9aWYodHlwZW9mIFY9PSJzdHJpbmciKXtWPVYudG9VcHBlckNhc2UoKX1zd2l0Y2goZi5zT3BlcmF0b3Ipe2Nhc2UiRVEiOmYuZm5UZXN0PWZ1bmN0aW9uKGEpe3JldHVybiBhPT12fTticmVhaztjYXNlIk5FIjpmLmZuVGVzdD1mdW5jdGlvbihhKXtyZXR1cm4gYSE9dn07YnJlYWs7Y2FzZSJMVCI6Zi5mblRlc3Q9ZnVuY3Rpb24oYSl7cmV0dXJuIGE8dn07YnJlYWs7Y2FzZSJMRSI6Zi5mblRlc3Q9ZnVuY3Rpb24oYSl7cmV0dXJuIGE8PXZ9O2JyZWFrO2Nhc2UiR1QiOmYuZm5UZXN0PWZ1bmN0aW9uKGEpe3JldHVybiBhPnZ9O2JyZWFrO2Nhc2UiR0UiOmYuZm5UZXN0PWZ1bmN0aW9uKGEpe3JldHVybiBhPj12fTticmVhaztjYXNlIkJUIjpmLmZuVGVzdD1mdW5jdGlvbihhKXtyZXR1cm4oYT52KSYmKGE8Vil9O2JyZWFrO2Nhc2UiQ29udGFpbnMiOmYuZm5UZXN0PWZ1bmN0aW9uKGEpe3JldHVybiBhLmluZGV4T2YodikhPS0xfTticmVhaztjYXNlIlN0YXJ0c1dpdGgiOmYuZm5UZXN0PWZ1bmN0aW9uKGEpe3JldHVybiBhLmluZGV4T2Yodik9PTB9O2JyZWFrO2Nhc2UiRW5kc1dpdGgiOmYuZm5UZXN0PWZ1bmN0aW9uKGEpe3JldHVybiBhLmluZGV4T2Yodik9PWEubGVuZ3RoLW5ldyBTdHJpbmcoZi5vVmFsdWUxKS5sZW5ndGh9O2JyZWFrO2RlZmF1bHQ6Zi5mblRlc3Q9ZnVuY3Rpb24oYSl7cmV0dXJuIHRydWV9fXJldHVybiBmLmZuVGVzdH07Qy5wcm90b3R5cGUuY2hlY2tVcGRhdGU9ZnVuY3Rpb24oZil7dGhpcy5fZmlyZUNoYW5nZSgpfTtyZXR1cm4gQ30sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5tb2RlbC5Qcm9wZXJ0eUJpbmRpbmcnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkubW9kZWwuUHJvcGVydHlCaW5kaW5nJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL21vZGVsL1Byb3BlcnR5QmluZGluZyIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJy4vQmluZGluZycsJy4vU2ltcGxlVHlwZSddLGZ1bmN0aW9uKHEsQixTKXsidXNlIHN0cmljdCI7dmFyIFA9Qi5leHRlbmQoInNhcC51aS5tb2RlbC5Qcm9wZXJ0eUJpbmRpbmciLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbihtLHAsYyxhKXtCLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sbWV0YWRhdGE6eyJhYnN0cmFjdCI6dHJ1ZSxwdWJsaWNNZXRob2RzOlsiZ2V0VmFsdWUiLCJzZXRWYWx1ZSIsInNldFR5cGUiLCJnZXRUeXBlIiwic2V0Rm9ybWF0dGVyIiwiZ2V0Rm9ybWF0dGVyIiwiZ2V0RXh0ZXJuYWxWYWx1ZSIsInNldEV4dGVybmFsVmFsdWUiLCJnZXRCaW5kaW5nTW9kZSJdfX0pO1AucHJvdG90eXBlLmdldEV4dGVybmFsVmFsdWU9ZnVuY3Rpb24oKXt2YXIgdj10aGlzLmdldFZhbHVlKCk7aWYodGhpcy5vVHlwZSl7dj10aGlzLm9UeXBlLmZvcm1hdFZhbHVlKHYsdGhpcy5zSW50ZXJuYWxUeXBlKX1pZih0aGlzLmZuRm9ybWF0dGVyKXt2PXRoaXMuZm5Gb3JtYXR0ZXIodil9cmV0dXJuIHZ9O1AucHJvdG90eXBlLnNldEV4dGVybmFsVmFsdWU9ZnVuY3Rpb24odil7aWYodGhpcy5mbkZvcm1hdHRlcil7cmV0dXJufWlmKHRoaXMub1R5cGUpe3Y9dGhpcy5vVHlwZS5wYXJzZVZhbHVlKHYsdGhpcy5zSW50ZXJuYWxUeXBlKTt0aGlzLm9UeXBlLnZhbGlkYXRlVmFsdWUodil9dGhpcy5zZXRWYWx1ZSh2KX07UC5wcm90b3R5cGUuc2V0VHlwZT1mdW5jdGlvbih0LGkpe3RoaXMub1R5cGU9dDt0aGlzLnNJbnRlcm5hbFR5cGU9aX07UC5wcm90b3R5cGUuZ2V0VHlwZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLm9UeXBlfTtQLnByb3RvdHlwZS5zZXRGb3JtYXR0ZXI9ZnVuY3Rpb24oZil7dGhpcy5mbkZvcm1hdHRlcj1mfTtQLnByb3RvdHlwZS5nZXRGb3JtYXR0ZXI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5mbkZvcm1hdHRlcn07UC5wcm90b3R5cGUuZ2V0QmluZGluZ01vZGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zTW9kZX07UC5wcm90b3R5cGUuc2V0QmluZGluZ01vZGU9ZnVuY3Rpb24oYil7dGhpcy5zTW9kZT1ifTtyZXR1cm4gUH0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5tb2RlbC5jb250cm9sLkNvbnRyb2xQcm9wZXJ0eUJpbmRpbmcnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkubW9kZWwuY29udHJvbC5Db250cm9sUHJvcGVydHlCaW5kaW5nJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL21vZGVsL2NvbnRyb2wvQ29udHJvbFByb3BlcnR5QmluZGluZyIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ3NhcC91aS9tb2RlbC9Qcm9wZXJ0eUJpbmRpbmcnXSxmdW5jdGlvbihxLFApeyJ1c2Ugc3RyaWN0Ijt2YXIgQz1QLmV4dGVuZCgic2FwLnVpLm1vZGVsLmNvbnRyb2wuQ29udHJvbFByb3BlcnR5QmluZGluZyIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKG0scCxjKXtQLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLm9WYWx1ZT10aGlzLl9nZXRWYWx1ZSgpfX0pO0MucHJvdG90eXBlLmdldFZhbHVlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub1ZhbHVlfTtDLnByb3RvdHlwZS5zZXRWYWx1ZT1mdW5jdGlvbih2KXt0aGlzLm9WYWx1ZT12O3RoaXMub0NvbnRleHQuc2V0UHJvcGVydHkodGhpcy5zUGF0aCx2KX07Qy5wcm90b3R5cGUuX2dldFZhbHVlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub0NvbnRleHQuZ2V0UHJvcGVydHkodGhpcy5zUGF0aCl9O0MucHJvdG90eXBlLnNldENvbnRleHQ9ZnVuY3Rpb24oYyl7dGhpcy5vQ29udGV4dD1jO3RoaXMuY2hlY2tVcGRhdGUoKX07Qy5wcm90b3R5cGUuY2hlY2tVcGRhdGU9ZnVuY3Rpb24oKXt2YXIgdj10aGlzLl9nZXRWYWx1ZSgpO2lmKHYhPT10aGlzLm9WYWx1ZSl7dGhpcy5vVmFsdWU9djt0aGlzLl9maXJlQ2hhbmdlKCl9fTtyZXR1cm4gQ30sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5tb2RlbC5qc29uLkpTT05MaXN0QmluZGluZycpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5tb2RlbC5qc29uLkpTT05MaXN0QmluZGluZycpO3NhcC51aS5kZWZpbmUoInNhcC91aS9tb2RlbC9qc29uL0pTT05MaXN0QmluZGluZyIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ3NhcC91aS9tb2RlbC9DaGFuZ2VSZWFzb24nLCdzYXAvdWkvbW9kZWwvQ2xpZW50TGlzdEJpbmRpbmcnXSxmdW5jdGlvbihxLEMsYSl7InVzZSBzdHJpY3QiO3ZhciBKPWEuZXh0ZW5kKCJzYXAudWkubW9kZWwuanNvbi5KU09OTGlzdEJpbmRpbmciKTtKLnByb3RvdHlwZS5nZXRDb250ZXh0cz1mdW5jdGlvbihzLGwpe3RoaXMuaUxhc3RTdGFydEluZGV4PXM7dGhpcy5pTGFzdExlbmd0aD1sO2lmKCFzKXtzPTB9aWYoIWwpe2w9TWF0aC5taW4odGhpcy5pTGVuZ3RoLHRoaXMub01vZGVsLmlTaXplTGltaXQpfXZhciBjPXRoaXMuX2dldENvbnRleHRzKHMsbCksbz17fTtpZih0aGlzLmJVc2VFeHRlbmRlZENoYW5nZURldGVjdGlvbil7Zm9yKHZhciBpPTA7aTxjLmxlbmd0aDtpKyspe29bY1tpXS5nZXRQYXRoKCldPWNbaV0uZ2V0T2JqZWN0KCl9aWYodGhpcy5hTGFzdENvbnRleHRzJiZzPHRoaXMuaUxhc3RFbmRJbmRleCl7dmFyIHQ9dGhpczt2YXIgZD1xLnNhcC5hcnJheURpZmYodGhpcy5hTGFzdENvbnRleHRzLGMsZnVuY3Rpb24oTyxuKXtyZXR1cm4gcS5zYXAuZXF1YWwoTyYmdC5vTGFzdENvbnRleHREYXRhJiZ0Lm9MYXN0Q29udGV4dERhdGFbTy5nZXRQYXRoKCldLG4mJm8mJm9bbi5nZXRQYXRoKCldKX0pO2MuZGlmZj1kfXRoaXMuaUxhc3RFbmRJbmRleD1zK2w7dGhpcy5hTGFzdENvbnRleHRzPWMuc2xpY2UoMCk7dGhpcy5vTGFzdENvbnRleHREYXRhPXEuZXh0ZW5kKHRydWUse30sbyl9cmV0dXJuIGN9O0oucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbigpe3ZhciBsPXRoaXMub01vZGVsLl9nZXRPYmplY3QodGhpcy5zUGF0aCx0aGlzLm9Db250ZXh0KTtpZihsJiZxLmlzQXJyYXkobCkpe2lmKHRoaXMuYlVzZUV4dGVuZGVkQ2hhbmdlRGV0ZWN0aW9uKXt0aGlzLm9MaXN0PXEuZXh0ZW5kKHRydWUsW10sbCl9ZWxzZXt0aGlzLm9MaXN0PWwuc2xpY2UoMCl9dGhpcy51cGRhdGVJbmRpY2VzKCk7dGhpcy5hcHBseUZpbHRlcigpO3RoaXMuYXBwbHlTb3J0KCk7dGhpcy5pTGVuZ3RoPXRoaXMuX2dldExlbmd0aCgpfWVsc2V7dGhpcy5vTGlzdD1bXTt0aGlzLmFJbmRpY2VzPVtdO3RoaXMuaUxlbmd0aD0wfX07Si5wcm90b3R5cGUuY2hlY2tVcGRhdGU9ZnVuY3Rpb24oZil7aWYodGhpcy5iU3VzcGVuZGVkJiYhdGhpcy5iSWdub3JlU3VzcGVuZClyZXR1cm47aWYoIXRoaXMuYlVzZUV4dGVuZGVkQ2hhbmdlRGV0ZWN0aW9uKXt2YXIgbD10aGlzLm9Nb2RlbC5fZ2V0T2JqZWN0KHRoaXMuc1BhdGgsdGhpcy5vQ29udGV4dCk7aWYoIXEuc2FwLmVxdWFsKHRoaXMub0xpc3QsbCl8fGYpe3RoaXMudXBkYXRlKCk7dGhpcy5fZmlyZUNoYW5nZSh7cmVhc29uOkMuQ2hhbmdlfSl9fWVsc2V7dmFyIGM9ZmFsc2U7dmFyIHQ9dGhpczt2YXIgbD10aGlzLm9Nb2RlbC5fZ2V0T2JqZWN0KHRoaXMuc1BhdGgsdGhpcy5vQ29udGV4dCk7aWYoIXEuc2FwLmVxdWFsKHRoaXMub0xpc3QsbCkpe3RoaXMudXBkYXRlKCl9dmFyIGI9dGhpcy5fZ2V0Q29udGV4dHModGhpcy5pTGFzdFN0YXJ0SW5kZXgsdGhpcy5pTGFzdExlbmd0aCk7aWYodGhpcy5hTGFzdENvbnRleHRzKXtpZih0aGlzLmFMYXN0Q29udGV4dHMubGVuZ3RoIT1iLmxlbmd0aCl7Yz10cnVlfWVsc2V7cS5lYWNoKHRoaXMuYUxhc3RDb250ZXh0cyxmdW5jdGlvbihpLG8pe2lmKCFxLnNhcC5lcXVhbChiW2ldLmdldE9iamVjdCgpLHQub0xhc3RDb250ZXh0RGF0YVtvLmdldFBhdGgoKV0pKXtjPXRydWU7cmV0dXJuIGZhbHNlfX0pfX1lbHNle2M9dHJ1ZX1pZihjfHxmKXt0aGlzLl9maXJlQ2hhbmdlKHtyZWFzb246Qy5DaGFuZ2V9KX19fTtyZXR1cm4gSn0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5tb2RlbC5qc29uLkpTT05UcmVlQmluZGluZycpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5tb2RlbC5qc29uLkpTT05UcmVlQmluZGluZycpO3NhcC51aS5kZWZpbmUoInNhcC91aS9tb2RlbC9qc29uL0pTT05UcmVlQmluZGluZyIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ3NhcC91aS9tb2RlbC9DbGllbnRUcmVlQmluZGluZyddLGZ1bmN0aW9uKHEsQyl7InVzZSBzdHJpY3QiO3ZhciBKPUMuZXh0ZW5kKCJzYXAudWkubW9kZWwuanNvbi5KU09OVHJlZUJpbmRpbmciKTtKLnByb3RvdHlwZS5nZXROb2RlQ29udGV4dHM9ZnVuY3Rpb24oYyl7dmFyIHM9Yy5nZXRQYXRoKCk7aWYoIXEuc2FwLmVuZHNXaXRoKHMsIi8iKSl7cz1zKyIvIn1pZighcS5zYXAuc3RhcnRzV2l0aChzLCIvIikpe3M9Ii8iK3N9dmFyIGE9W10sdD10aGlzLG49dGhpcy5vTW9kZWwuX2dldE9iamVjdChzKSxvLEE9dGhpcy5tUGFyYW1ldGVycyYmdGhpcy5tUGFyYW1ldGVycy5hcnJheU5hbWVzLGI7aWYobil7aWYoQSYmcS5pc0FycmF5KEEpKXtxLmVhY2goQSxmdW5jdGlvbihpLGQpe2I9bltkXTtpZihiKXtxLmVhY2goYixmdW5jdGlvbihTLGUpe3QuX3NhdmVTdWJDb250ZXh0KGUsYSxzLGQrIi8iK1MpfSl9fSl9ZWxzZXtxLnNhcC5lYWNoKG4sZnVuY3Rpb24oTixvKXtpZihxLmlzQXJyYXkobykpe3EuZWFjaChvLGZ1bmN0aW9uKFMsZCl7dC5fc2F2ZVN1YkNvbnRleHQoZCxhLHMsTisiLyIrUyl9KX1lbHNlIGlmKG8mJnR5cGVvZiBvPT0ib2JqZWN0Iil7dC5fc2F2ZVN1YkNvbnRleHQobyxhLHMsTil9fSl9fXJldHVybiBhfTtKLnByb3RvdHlwZS5fc2F2ZVN1YkNvbnRleHQ9ZnVuY3Rpb24obixjLHMsTil7aWYodHlwZW9mIG49PSJvYmplY3QiKXt2YXIgbz10aGlzLm9Nb2RlbC5nZXRDb250ZXh0KHMrTik7aWYodGhpcy5hRmlsdGVycyYmIXRoaXMuYklzRmlsdGVyaW5nKXtpZihxLmluQXJyYXkobyx0aGlzLmZpbHRlckluZm8uYUZpbHRlcmVkQ29udGV4dHMpIT0tMSl7Yy5wdXNoKG8pfX1lbHNle2MucHVzaChvKX19fTtyZXR1cm4gSn0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5tb2RlbC5vZGF0YS5PRGF0YUxpc3RCaW5kaW5nJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLm1vZGVsLm9kYXRhLk9EYXRhTGlzdEJpbmRpbmcnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvbW9kZWwvb2RhdGEvT0RhdGFMaXN0QmluZGluZyIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ3NhcC91aS9jb3JlL2Zvcm1hdC9EYXRlRm9ybWF0Jywnc2FwL3VpL21vZGVsL0ZpbHRlclR5cGUnLCdzYXAvdWkvbW9kZWwvTGlzdEJpbmRpbmcnLCcuL09EYXRhVXRpbHMnLCcuL0NvdW50TW9kZScsJy4vRmlsdGVyJ10sZnVuY3Rpb24ocSxELEYsTCxPLEMsYSl7InVzZSBzdHJpY3QiO3ZhciBiPUwuZXh0ZW5kKCJzYXAudWkubW9kZWwub2RhdGEuT0RhdGFMaXN0QmluZGluZyIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKG0scCxjLHMsZixQKXtMLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLnNGaWx0ZXJQYXJhbXM9bnVsbDt0aGlzLnNTb3J0UGFyYW1zPW51bGw7dGhpcy5zUmFuZ2VQYXJhbXM9bnVsbDt0aGlzLnNDdXN0b21QYXJhbXM9dGhpcy5vTW9kZWwuY3JlYXRlQ3VzdG9tUGFyYW1zKHRoaXMubVBhcmFtZXRlcnMpO3RoaXMuaVN0YXJ0SW5kZXg9MDt0aGlzLmJQZW5kaW5nQ2hhbmdlPWZhbHNlO3RoaXMuYUtleXM9W107dGhpcy5iSW5pdGlhbD10cnVlO3RoaXMuc0NvdW50TW9kZT0oUCYmUC5jb3VudE1vZGUpfHx0aGlzLm9Nb2RlbC5zRGVmYXVsdENvdW50TW9kZTt0aGlzLmJSZWZyZXNoPWZhbHNlO3RoaXMuYk5lZWRzVXBkYXRlPWZhbHNlO3RoaXMuYkRhdGFBdmFpbGFibGU9ZmFsc2U7dGhpcy5iSWdub3JlU3VzcGVuZD1mYWxzZTtpZighdGhpcy5vTW9kZWwuZ2V0U2VydmljZU1ldGFkYXRhKCkpe3ZhciB0PXRoaXMsZD1mdW5jdGlvbihlKXt0LmJJbml0aWFsPWZhbHNlO3QuX2luaXRTb3J0ZXJzRmlsdGVycygpO3Qub01vZGVsLmRldGFjaE1ldGFkYXRhTG9hZGVkKGQpfTt0aGlzLm9Nb2RlbC5hdHRhY2hNZXRhZGF0YUxvYWRlZCh0aGlzLGQpfWVsc2V7dGhpcy5iSW5pdGlhbD1mYWxzZTt0aGlzLl9pbml0U29ydGVyc0ZpbHRlcnMoKX12YXIgcj10aGlzLm9Nb2RlbC5fZ2V0T2JqZWN0KHRoaXMuc1BhdGgsdGhpcy5vQ29udGV4dCk7dGhpcy5hRXhwYW5kUmVmcz1yO2lmKHEuaXNBcnJheShyKSYmIXMmJiFmKXt0aGlzLmFLZXlzPXI7dGhpcy5pTGVuZ3RoPXIubGVuZ3RoO3RoaXMuYkxlbmd0aEZpbmFsPXRydWU7dGhpcy5iRGF0YUF2YWlsYWJsZT10cnVlfWVsc2UgaWYocj09PW51bGwmJnRoaXMub01vZGVsLnJlc29sdmUodGhpcy5zUGF0aCx0aGlzLm9Db250ZXh0KSl7dGhpcy5hS2V5cz1bXTt0aGlzLmlMZW5ndGg9MDt0aGlzLmJMZW5ndGhGaW5hbD10cnVlO3RoaXMuYkRhdGFBdmFpbGFibGU9dHJ1ZX1lbHNle2lmKHRoaXMub01vZGVsLmdldFNlcnZpY2VNZXRhZGF0YSgpKXt0aGlzLnJlc2V0RGF0YSgpfX19fSk7Yi5wcm90b3R5cGUuZ2V0Q29udGV4dHM9ZnVuY3Rpb24ocyxsLHQpe2lmKHRoaXMuYkluaXRpYWwpe3JldHVybltdfXRoaXMuaUxhc3RMZW5ndGg9bDt0aGlzLmlMYXN0U3RhcnRJbmRleD1zO3RoaXMuaUxhc3RUaHJlc2hvbGQ9dDtpZighcyl7cz0wfWlmKCFsKXtsPXRoaXMub01vZGVsLmlTaXplTGltaXQ7aWYodGhpcy5iTGVuZ3RoRmluYWwmJnRoaXMuaUxlbmd0aDxsKXtsPXRoaXMuaUxlbmd0aH19aWYoIXQpe3Q9MH12YXIgYz10cnVlLGQ9dGhpcy5fZ2V0Q29udGV4dHMocyxsKSxvPXt9LFM7Uz10aGlzLmNhbGN1bGF0ZVNlY3Rpb24ocyxsLHQsZCk7Yz1kLmxlbmd0aCE9bCYmISh0aGlzLmJMZW5ndGhGaW5hbCYmZC5sZW5ndGg+PXRoaXMuaUxlbmd0aC1zKTtpZih0aGlzLm9Nb2RlbC5nZXRTZXJ2aWNlTWV0YWRhdGEoKSl7aWYoIXRoaXMuYlBlbmRpbmdSZXF1ZXN0JiZTLmxlbmd0aD4wJiYoY3x8bDxTLmxlbmd0aCkpe3RoaXMubG9hZERhdGEoUy5zdGFydEluZGV4LFMubGVuZ3RoKTtkLmRhdGFSZXF1ZXN0ZWQ9dHJ1ZX19aWYodGhpcy5iUmVmcmVzaCl7aWYodGhpcy5iTGVuZ3RoRmluYWwmJnRoaXMuaUxlbmd0aD09MCl7dGhpcy5sb2FkRGF0YShTLnN0YXJ0SW5kZXgsUy5sZW5ndGgsdHJ1ZSk7ZC5kYXRhUmVxdWVzdGVkPXRydWV9dGhpcy5iUmVmcmVzaD1mYWxzZX1lbHNle2Zvcih2YXIgaT0wO2k8ZC5sZW5ndGg7aSsrKXtvW2RbaV0uZ2V0UGF0aCgpXT1kW2ldLmdldE9iamVjdCgpfWlmKHRoaXMuYlVzZUV4dGVuZGVkQ2hhbmdlRGV0ZWN0aW9uKXtpZih0aGlzLmFMYXN0Q29udGV4dHMmJnM8dGhpcy5pTGFzdEVuZEluZGV4KXt2YXIgZT10aGlzO3ZhciBmPXEuc2FwLmFycmF5RGlmZih0aGlzLmFMYXN0Q29udGV4dHMsZCxmdW5jdGlvbihnLG4pe3JldHVybiBxLnNhcC5lcXVhbChnJiZlLm9MYXN0Q29udGV4dERhdGEmJmUub0xhc3RDb250ZXh0RGF0YVtnLmdldFBhdGgoKV0sbiYmbyYmb1tuLmdldFBhdGgoKV0pfSk7ZC5kaWZmPWZ9fXRoaXMuaUxhc3RFbmRJbmRleD1zK2w7dGhpcy5hTGFzdENvbnRleHRzPWQuc2xpY2UoMCk7dGhpcy5vTGFzdENvbnRleHREYXRhPXEuZXh0ZW5kKHRydWUse30sbyl9cmV0dXJuIGR9O2IucHJvdG90eXBlLl9nZXRDb250ZXh0cz1mdW5jdGlvbihzLGwpe3ZhciBjPVtdLG8saztpZighcyl7cz0wfWlmKCFsKXtsPXRoaXMub01vZGVsLmlTaXplTGltaXQ7aWYodGhpcy5iTGVuZ3RoRmluYWwmJnRoaXMuaUxlbmd0aDxsKXtsPXRoaXMuaUxlbmd0aH19Zm9yKHZhciBpPXM7aTxzK2w7aSsrKXtrPXRoaXMuYUtleXNbaV07aWYoIWspe2JyZWFrfW89dGhpcy5vTW9kZWwuZ2V0Q29udGV4dCgnLycrayk7Yy5wdXNoKG8pfXJldHVybiBjfTtiLnByb3RvdHlwZS5jYWxjdWxhdGVTZWN0aW9uPWZ1bmN0aW9uKHMsbCx0LGMpe3ZhciBkPWZhbHNlLFMsZSxwLFAscixvPXt9LGs7ZT1zO1M9MDtmb3IodmFyIGk9cztpPj1NYXRoLm1heChzLXQsMCk7aS0tKXtrPXRoaXMuYUtleXNbaV07aWYoIWspe1A9aSsxO2JyZWFrfX1mb3IodmFyIGo9cytsO2o8cytsK3Q7aisrKXtrPXRoaXMuYUtleXNbal07aWYoIWspe3A9ajticmVha319cj1zLVA7aWYoUCYmcz50JiZyPHQpe2lmKGMubGVuZ3RoIT1sKXtlPXMtdH1lbHNle2U9UC10fVM9dH1pZihlPT1zKXtlKz1jLmxlbmd0aH1pZihjLmxlbmd0aCE9bCl7Uys9bC1jLmxlbmd0aH1yPXAtcy1sO2lmKHI9PTApe1MrPXR9aWYocCYmcjx0JiZyPjApe2lmKGU+cyl7ZT1wO1MrPXR9fWlmKHRoaXMuYkxlbmd0aEZpbmFsJiZ0aGlzLmlMZW5ndGg8KFMrZSkpe1M9dGhpcy5pTGVuZ3RoLWV9by5zdGFydEluZGV4PWU7by5sZW5ndGg9UztyZXR1cm4gb307Yi5wcm90b3R5cGUuc2V0Q29udGV4dD1mdW5jdGlvbihjKXtpZih0aGlzLm9Db250ZXh0IT1jKXt0aGlzLm9Db250ZXh0PWM7aWYodGhpcy5pc1JlbGF0aXZlKCkpe3RoaXMuX2luaXRTb3J0ZXJzRmlsdGVycygpO2lmKCF0aGlzLmJJbml0aWFsKXt2YXIgcj10aGlzLm9Nb2RlbC5fZ2V0T2JqZWN0KHRoaXMuc1BhdGgsdGhpcy5vQ29udGV4dCk7dGhpcy5hRXhwYW5kUmVmcz1yO2lmKHEuaXNBcnJheShyKSYmIXRoaXMuYVNvcnRlcnMubGVuZ3RoPjAmJiF0aGlzLmFGaWx0ZXJzLmxlbmd0aD4wKXt0aGlzLmFLZXlzPXI7dGhpcy5pTGVuZ3RoPXIubGVuZ3RoO3RoaXMuYkxlbmd0aEZpbmFsPXRydWU7dGhpcy5fZmlyZUNoYW5nZSgpfWVsc2UgaWYocj09PW51bGwmJnRoaXMub01vZGVsLnJlc29sdmUodGhpcy5zUGF0aCx0aGlzLm9Db250ZXh0KSl7dGhpcy5hS2V5cz1bXTt0aGlzLmlMZW5ndGg9MDt0aGlzLmJMZW5ndGhGaW5hbD10cnVlO3RoaXMuX2ZpcmVDaGFuZ2UoKX1lbHNle3RoaXMucmVmcmVzaCgpfX19fX07Yi5wcm90b3R5cGUuZ2V0RG93bmxvYWRVcmw9ZnVuY3Rpb24oZil7dmFyIHA9W10sUDtpZihmKXtwLnB1c2goIiRmb3JtYXQ9IitlbmNvZGVVUklDb21wb25lbnQoZikpfWlmKHRoaXMuc1NvcnRQYXJhbXMpe3AucHVzaCh0aGlzLnNTb3J0UGFyYW1zKX1pZih0aGlzLnNGaWx0ZXJQYXJhbXMpe3AucHVzaCh0aGlzLnNGaWx0ZXJQYXJhbXMpfWlmKHRoaXMuc0N1c3RvbVBhcmFtcyl7cC5wdXNoKHRoaXMuc0N1c3RvbVBhcmFtcyl9UD10aGlzLm9Nb2RlbC5yZXNvbHZlKHRoaXMuc1BhdGgsdGhpcy5vQ29udGV4dCk7aWYoUCl7cmV0dXJuIHRoaXMub01vZGVsLl9jcmVhdGVSZXF1ZXN0VXJsKFAsbnVsbCxwKX19O2IucHJvdG90eXBlLmxvYWREYXRhPWZ1bmN0aW9uKHMsbCxwKXt2YXIgdD10aGlzLEk9ZmFsc2U7aWYoc3x8bCl7dGhpcy5zUmFuZ2VQYXJhbXM9IiRza2lwPSIrcysiJiR0b3A9IitsO3RoaXMuaVN0YXJ0SW5kZXg9c31lbHNle3M9dGhpcy5pU3RhcnRJbmRleH12YXIgUD1bXTtpZih0aGlzLnNSYW5nZVBhcmFtcyl7UC5wdXNoKHRoaXMuc1JhbmdlUGFyYW1zKX1pZih0aGlzLnNTb3J0UGFyYW1zKXtQLnB1c2godGhpcy5zU29ydFBhcmFtcyl9aWYodGhpcy5zRmlsdGVyUGFyYW1zKXtQLnB1c2godGhpcy5zRmlsdGVyUGFyYW1zKX1pZih0aGlzLnNDdXN0b21QYXJhbXMpe1AucHVzaCh0aGlzLnNDdXN0b21QYXJhbXMpfWlmKCF0aGlzLmJMZW5ndGhGaW5hbCYmKHRoaXMuc0NvdW50TW9kZT09Qy5JbmxpbmV8fHRoaXMuc0NvdW50TW9kZT09Qy5Cb3RoKSl7UC5wdXNoKCIkaW5saW5lY291bnQ9YWxscGFnZXMiKTtJPXRydWV9ZnVuY3Rpb24gUyhmKXtxLmVhY2goZi5yZXN1bHRzLGZ1bmN0aW9uKGksZyl7dC5hS2V5c1tzK2ldPXQub01vZGVsLl9nZXRLZXkoZyl9KTtpZihJJiZmLl9fY291bnQpe3QuaUxlbmd0aD1wYXJzZUludChmLl9fY291bnQsMTApO3QuYkxlbmd0aEZpbmFsPXRydWV9aWYodC5pTGVuZ3RoPHMrZi5yZXN1bHRzLmxlbmd0aCl7dC5pTGVuZ3RoPXMrZi5yZXN1bHRzLmxlbmd0aDt0LmJMZW5ndGhGaW5hbD1mYWxzZX1pZihmLnJlc3VsdHMubGVuZ3RoPGx8fGw9PT11bmRlZmluZWQpe3QuaUxlbmd0aD1zK2YucmVzdWx0cy5sZW5ndGg7dC5iTGVuZ3RoRmluYWw9dHJ1ZX1pZihzPT0wJiZmLnJlc3VsdHMubGVuZ3RoPT0wKXt0LmlMZW5ndGg9MDt0LmJMZW5ndGhGaW5hbD10cnVlfXQub1JlcXVlc3RIYW5kbGU9bnVsbDt0LmJQZW5kaW5nUmVxdWVzdD1mYWxzZTt0LmJOZWVkc1VwZGF0ZT10cnVlO3QuYklnbm9yZVN1c3BlbmQ9dHJ1ZX1mdW5jdGlvbiBjKGYpe3QuZmlyZURhdGFSZWNlaXZlZCh7ZGF0YTpmfSl9ZnVuY3Rpb24gZShFLEEpe3Qub1JlcXVlc3RIYW5kbGU9bnVsbDt0LmJQZW5kaW5nUmVxdWVzdD1mYWxzZTtpZighQSl7dC5hS2V5cz1bXTt0LmlMZW5ndGg9MDt0LmJMZW5ndGhGaW5hbD10cnVlO3QuYkRhdGFBdmFpbGFibGU9dHJ1ZTt0Ll9maXJlQ2hhbmdlKHtyZWFzb246c2FwLnVpLm1vZGVsLkNoYW5nZVJlYXNvbi5DaGFuZ2V9KX10LmZpcmVEYXRhUmVjZWl2ZWQoKX1mdW5jdGlvbiB1KGgpe3Qub1JlcXVlc3RIYW5kbGU9aH12YXIgZD10aGlzLnNQYXRoLG89dGhpcy5vQ29udGV4dDtpZih0aGlzLmlzUmVsYXRpdmUoKSl7ZD10aGlzLm9Nb2RlbC5yZXNvbHZlKGQsbyl9aWYoZCl7aWYocCl7dmFyIFU9dGhpcy5vTW9kZWwuX2NyZWF0ZVJlcXVlc3RVcmwoZCxudWxsLFApO3RoaXMuZmlyZURhdGFSZXF1ZXN0ZWQoKTt0aGlzLm9Nb2RlbC5maXJlUmVxdWVzdFNlbnQoe3VybDpVLG1ldGhvZDoiR0VUIixhc3luYzp0cnVlfSk7c2V0VGltZW91dChmdW5jdGlvbigpe3QuYk5lZWRzVXBkYXRlPXRydWU7dC5jaGVja1VwZGF0ZSgpO3Qub01vZGVsLmZpcmVSZXF1ZXN0Q29tcGxldGVkKHt1cmw6VSxtZXRob2Q6IkdFVCIsYXN5bmM6dHJ1ZSxzdWNjZXNzOnRydWV9KTt0LmZpcmVEYXRhUmVjZWl2ZWQoKX0sMCl9ZWxzZXt0aGlzLmJQZW5kaW5nUmVxdWVzdD10cnVlO3RoaXMuZmlyZURhdGFSZXF1ZXN0ZWQoKTt0aGlzLm9Nb2RlbC5fbG9hZERhdGEoZCxQLFMsZSxmYWxzZSx1LGMpfX19O2IucHJvdG90eXBlLmdldExlbmd0aD1mdW5jdGlvbigpe2lmKHRoaXMuYkxlbmd0aEZpbmFsKXtyZXR1cm4gdGhpcy5pTGVuZ3RofWVsc2V7dmFyIEE9dGhpcy5pTGFzdFRocmVzaG9sZHx8dGhpcy5pTGFzdExlbmd0aHx8MTA7cmV0dXJuIHRoaXMuaUxlbmd0aCtBfX07Yi5wcm90b3R5cGUuaXNMZW5ndGhGaW5hbD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmJMZW5ndGhGaW5hbH07Yi5wcm90b3R5cGUuX2dldExlbmd0aD1mdW5jdGlvbigpe3ZhciB0PXRoaXM7dmFyIHA9W107aWYodGhpcy5zRmlsdGVyUGFyYW1zKXtwLnB1c2godGhpcy5zRmlsdGVyUGFyYW1zKX1pZih0aGlzLm1QYXJhbWV0ZXJzJiZ0aGlzLm1QYXJhbWV0ZXJzLmN1c3RvbSl7dmFyIGM9e2N1c3RvbTp7fX07cS5lYWNoKHRoaXMubVBhcmFtZXRlcnMuY3VzdG9tLGZ1bmN0aW9uKHMsdil7Yy5jdXN0b21bc109dn0pO3AucHVzaCh0aGlzLm9Nb2RlbC5jcmVhdGVDdXN0b21QYXJhbXMoYykpfWZ1bmN0aW9uIF8obyl7dC5pTGVuZ3RoPXBhcnNlSW50KG8sMTApO3QuYkxlbmd0aEZpbmFsPXRydWV9ZnVuY3Rpb24gZChlKXt2YXIgRT0iUmVxdWVzdCBmb3IgJGNvdW50IGZhaWxlZDogIitlLm1lc3NhZ2U7aWYoZS5yZXNwb25zZSl7RSs9IiwgIitlLnJlc3BvbnNlLnN0YXR1c0NvZGUrIiwgIitlLnJlc3BvbnNlLnN0YXR1c1RleHQrIiwgIitlLnJlc3BvbnNlLmJvZHl9cS5zYXAubG9nLndhcm5pbmcoRSl9dmFyIFA9dGhpcy5vTW9kZWwucmVzb2x2ZSh0aGlzLnNQYXRoLHRoaXMub0NvbnRleHQpO2lmKFApe3ZhciB1PXRoaXMub01vZGVsLl9jcmVhdGVSZXF1ZXN0VXJsKFArIi8kY291bnQiLG51bGwscCk7dmFyIHI9dGhpcy5vTW9kZWwuX2NyZWF0ZVJlcXVlc3QodSwiR0VUIixmYWxzZSk7ci5oZWFkZXJzWyJBY2NlcHQiXT0idGV4dC9wbGFpbiwgKi8qO3E9MC41Ijt0aGlzLm9Nb2RlbC5fcmVxdWVzdChyLF8sZCx1bmRlZmluZWQsdW5kZWZpbmVkLHRoaXMub01vZGVsLmdldFNlcnZpY2VNZXRhZGF0YSgpKX19O2IucHJvdG90eXBlLnJlZnJlc2g9ZnVuY3Rpb24oZixjLGUpe3ZhciBkPWZhbHNlO2lmKCFmKXtpZihlKXt2YXIgcj10aGlzLm9Nb2RlbC5yZXNvbHZlKHRoaXMuc1BhdGgsdGhpcy5vQ29udGV4dCk7dmFyIEU9dGhpcy5vTW9kZWwub01ldGFkYXRhLl9nZXRFbnRpdHlUeXBlQnlQYXRoKHIpO2lmKEUmJihFLmVudGl0eVR5cGUgaW4gZSkpe2Q9dHJ1ZX19aWYoYyYmIWQpe3EuZWFjaCh0aGlzLmFLZXlzLGZ1bmN0aW9uKGksayl7aWYoayBpbiBjKXtkPXRydWU7cmV0dXJuIGZhbHNlfX0pfWlmKCFjJiYhZSl7ZD10cnVlfX1pZihmfHxkKXt0aGlzLmFib3J0UGVuZGluZ1JlcXVlc3QoKTt0aGlzLnJlc2V0RGF0YSgpO3RoaXMuX2ZpcmVSZWZyZXNoKHtyZWFzb246c2FwLnVpLm1vZGVsLkNoYW5nZVJlYXNvbi5SZWZyZXNofSl9fTtiLnByb3RvdHlwZS5fZmlyZVJlZnJlc2g9ZnVuY3Rpb24oQSl7aWYodGhpcy5vTW9kZWwucmVzb2x2ZSh0aGlzLnNQYXRoLHRoaXMub0NvbnRleHQpKXt0aGlzLmJSZWZyZXNoPXRydWU7dGhpcy5maXJlRXZlbnQoInJlZnJlc2giLEEpfX07Yi5wcm90b3R5cGUuaW5pdGlhbGl6ZT1mdW5jdGlvbigpe2lmKHRoaXMub01vZGVsLm9NZXRhZGF0YS5pc0xvYWRlZCgpKXtpZih0aGlzLmJEYXRhQXZhaWxhYmxlKXt0aGlzLl9maXJlQ2hhbmdlKHtyZWFzb246c2FwLnVpLm1vZGVsLkNoYW5nZVJlYXNvbi5DaGFuZ2V9KX1lbHNle3RoaXMuX2ZpcmVSZWZyZXNoKHtyZWFzb246c2FwLnVpLm1vZGVsLkNoYW5nZVJlYXNvbi5SZWZyZXNofSl9fX07Yi5wcm90b3R5cGUuY2hlY2tVcGRhdGU9ZnVuY3Rpb24oZixjKXt2YXIgZD10aGlzLnNDaGFuZ2VSZWFzb24/dGhpcy5zQ2hhbmdlUmVhc29uOnNhcC51aS5tb2RlbC5DaGFuZ2VSZWFzb24uQ2hhbmdlLGU9ZmFsc2UsbCxvLHQ9dGhpcyxyLFI7aWYodGhpcy5iU3VzcGVuZGVkJiYhdGhpcy5iSWdub3JlU3VzcGVuZClyZXR1cm47aWYoIWYmJiF0aGlzLmJOZWVkc1VwZGF0ZSl7cj10aGlzLm9Nb2RlbC5fZ2V0T2JqZWN0KHRoaXMuc1BhdGgsdGhpcy5vQ29udGV4dCk7Uj1xLmlzQXJyYXkocikmJiFxLnNhcC5lcXVhbChyLHRoaXMuYUV4cGFuZFJlZnMpO3RoaXMuYUV4cGFuZFJlZnM9cjtpZihSKXtpZih0aGlzLmFTb3J0ZXJzLmxlbmd0aD4wfHx0aGlzLmFGaWx0ZXJzLmxlbmd0aD4wKXt0aGlzLnJlZnJlc2goKTtyZXR1cm59ZWxzZXt0aGlzLmFLZXlzPXI7dGhpcy5pTGVuZ3RoPXIubGVuZ3RoO3RoaXMuYkxlbmd0aEZpbmFsPXRydWU7ZT10cnVlfX1lbHNlIGlmKGMpe3EuZWFjaCh0aGlzLmFLZXlzLGZ1bmN0aW9uKGksayl7aWYoayBpbiBjKXtlPXRydWU7cmV0dXJuIGZhbHNlfX0pfWVsc2V7ZT10cnVlfWlmKGUmJnRoaXMuYUxhc3RDb250ZXh0cyl7ZT1mYWxzZTt2YXIgZz10aGlzLl9nZXRDb250ZXh0cyh0aGlzLmlMYXN0U3RhcnRJbmRleCx0aGlzLmlMYXN0TGVuZ3RoLHRoaXMuaUxhc3RUaHJlc2hvbGQpO2lmKHRoaXMuYUxhc3RDb250ZXh0cy5sZW5ndGghPWcubGVuZ3RoKXtlPXRydWV9ZWxzZXtxLmVhY2godGhpcy5hTGFzdENvbnRleHRzLGZ1bmN0aW9uKGksaCl7bD10Lm9MYXN0Q29udGV4dERhdGFbaC5nZXRQYXRoKCldO289Z1tpXS5nZXRPYmplY3QoKTtpZighcS5zYXAuZXF1YWwobCxvLDMsdHJ1ZSkpe2U9dHJ1ZTtyZXR1cm4gZmFsc2V9fSl9fX1pZihmfHxlfHx0aGlzLmJOZWVkc1VwZGF0ZSl7dGhpcy5iTmVlZHNVcGRhdGU9ZmFsc2U7dGhpcy5fZmlyZUNoYW5nZSh7cmVhc29uOmR9KX10aGlzLnNDaGFuZ2VSZWFzb249dW5kZWZpbmVkO3RoaXMuYklnbm9yZVN1c3BlbmQ9ZmFsc2V9O2IucHJvdG90eXBlLnJlc2V0RGF0YT1mdW5jdGlvbigpe3RoaXMuYUtleXM9W107dGhpcy5pTGVuZ3RoPTA7dGhpcy5iTGVuZ3RoRmluYWw9ZmFsc2U7dGhpcy5zQ2hhbmdlUmVhc29uPXVuZGVmaW5lZDt0aGlzLmJEYXRhQXZhaWxhYmxlPWZhbHNlO2lmKHRoaXMub01vZGVsLmlzQ291bnRTdXBwb3J0ZWQoKSYmKHRoaXMuc0NvdW50TW9kZT09Qy5SZXF1ZXN0fHx0aGlzLnNDb3VudE1vZGU9PUMuQm90aCkpe3RoaXMuX2dldExlbmd0aCgpfX07Yi5wcm90b3R5cGUuYWJvcnRQZW5kaW5nUmVxdWVzdD1mdW5jdGlvbigpe2lmKHRoaXMub1JlcXVlc3RIYW5kbGUpe3RoaXMub1JlcXVlc3RIYW5kbGUuYWJvcnQoKTt0aGlzLm9SZXF1ZXN0SGFuZGxlPW51bGw7dGhpcy5iUGVuZGluZ1JlcXVlc3Q9ZmFsc2V9fTtiLnByb3RvdHlwZS5zb3J0PWZ1bmN0aW9uKHMpe2lmKHMgaW5zdGFuY2VvZiBzYXAudWkubW9kZWwuU29ydGVyKXtzPVtzXX10aGlzLmFTb3J0ZXJzPXM7dGhpcy5jcmVhdGVTb3J0UGFyYW1zKHMpO3RoaXMuYWJvcnRQZW5kaW5nUmVxdWVzdCgpO3RoaXMuYUtleXM9W107aWYoIXRoaXMuYkluaXRpYWwpe2lmKHRoaXMub1JlcXVlc3RIYW5kbGUpe3RoaXMub1JlcXVlc3RIYW5kbGUuYWJvcnQoKTt0aGlzLm9SZXF1ZXN0SGFuZGxlPW51bGw7dGhpcy5iUGVuZGluZ1JlcXVlc3Q9ZmFsc2V9dGhpcy5zQ2hhbmdlUmVhc29uPXNhcC51aS5tb2RlbC5DaGFuZ2VSZWFzb24uU29ydDt0aGlzLl9maXJlUmVmcmVzaCh7cmVhc29uOnRoaXMuc0NoYW5nZVJlYXNvbn0pO3RoaXMuX2ZpcmVTb3J0KHtzb3J0ZXI6c30pfXJldHVybiB0aGlzfTtiLnByb3RvdHlwZS5jcmVhdGVTb3J0UGFyYW1zPWZ1bmN0aW9uKHMpe3RoaXMuc1NvcnRQYXJhbXM9Ty5jcmVhdGVTb3J0UGFyYW1zKHMpfTtiLnByb3RvdHlwZS5maWx0ZXI9ZnVuY3Rpb24oZixzKXtpZighZil7Zj1bXX1pZihmIGluc3RhbmNlb2Ygc2FwLnVpLm1vZGVsLkZpbHRlcil7Zj1bZl19aWYocz09Ri5BcHBsaWNhdGlvbil7dGhpcy5hQXBwbGljYXRpb25GaWx0ZXJzPWZ9ZWxzZXt0aGlzLmFGaWx0ZXJzPWZ9aWYoIWZ8fCFxLmlzQXJyYXkoZil8fGYubGVuZ3RoPT0wKXt0aGlzLmFGaWx0ZXJzPVtdfWlmKCF0aGlzLmFBcHBsaWNhdGlvbkZpbHRlcnN8fCFxLmlzQXJyYXkodGhpcy5hQXBwbGljYXRpb25GaWx0ZXJzKXx8dGhpcy5hQXBwbGljYXRpb25GaWx0ZXJzLmxlbmd0aD09PTApe3RoaXMuYUFwcGxpY2F0aW9uRmlsdGVycz1bXX10aGlzLmNyZWF0ZUZpbHRlclBhcmFtcyh0aGlzLmFGaWx0ZXJzLHRoaXMuYUFwcGxpY2F0aW9uRmlsdGVycyk7dGhpcy5hYm9ydFBlbmRpbmdSZXF1ZXN0KCk7dGhpcy5yZXNldERhdGEoKTtpZighdGhpcy5iSW5pdGlhbCl7aWYodGhpcy5vUmVxdWVzdEhhbmRsZSl7dGhpcy5vUmVxdWVzdEhhbmRsZS5hYm9ydCgpO3RoaXMub1JlcXVlc3RIYW5kbGU9bnVsbDt0aGlzLmJQZW5kaW5nUmVxdWVzdD1mYWxzZX10aGlzLnNDaGFuZ2VSZWFzb249c2FwLnVpLm1vZGVsLkNoYW5nZVJlYXNvbi5GaWx0ZXI7dGhpcy5fZmlyZVJlZnJlc2goe3JlYXNvbjp0aGlzLnNDaGFuZ2VSZWFzb259KTtpZihzPT1GLkFwcGxpY2F0aW9uKXt0aGlzLl9maXJlRmlsdGVyKHtmaWx0ZXJzOnRoaXMuYUFwcGxpY2F0aW9uRmlsdGVyc30pfWVsc2V7dGhpcy5fZmlyZUZpbHRlcih7ZmlsdGVyczp0aGlzLmFGaWx0ZXJzfSl9fXJldHVybiB0aGlzfTtiLnByb3RvdHlwZS5jcmVhdGVGaWx0ZXJQYXJhbXM9ZnVuY3Rpb24oYyxBKXt2YXIgZixzPU8uX2NyZWF0ZUZpbHRlclBhcmFtcyhjLHRoaXMub01vZGVsLm9NZXRhZGF0YSx0aGlzLm9FbnRpdHlUeXBlKSxkPU8uX2NyZWF0ZUZpbHRlclBhcmFtcyhBLHRoaXMub01vZGVsLm9NZXRhZGF0YSx0aGlzLm9FbnRpdHlUeXBlKTtpZihzKXtmPXN9aWYoZCl7aWYocyl7Zj0iKCIrZisiKSIrIiUyMGFuZCUyMCIrIigiK2QrIikifWVsc2V7Zj1kfX1pZihmKXt0aGlzLnNGaWx0ZXJQYXJhbXM9IiRmaWx0ZXI9IitmfWVsc2V7dGhpcy5zRmlsdGVyUGFyYW1zPXVuZGVmaW5lZH19O2IucHJvdG90eXBlLl9pbml0U29ydGVyc0ZpbHRlcnM9ZnVuY3Rpb24oKXt2YXIgcj10aGlzLm9Nb2RlbC5yZXNvbHZlKHRoaXMuc1BhdGgsdGhpcy5vQ29udGV4dCk7aWYoIXIpe3JldHVybn10aGlzLm9FbnRpdHlUeXBlPXRoaXMuX2dldEVudGl0eVR5cGUoKTt0aGlzLmNyZWF0ZVNvcnRQYXJhbXModGhpcy5hU29ydGVycyk7dGhpcy5jcmVhdGVGaWx0ZXJQYXJhbXModGhpcy5hRmlsdGVycy5jb25jYXQodGhpcy5hQXBwbGljYXRpb25GaWx0ZXJzKSl9O2IucHJvdG90eXBlLl9nZXRFbnRpdHlUeXBlPWZ1bmN0aW9uKCl7dmFyIHI9dGhpcy5vTW9kZWwucmVzb2x2ZSh0aGlzLnNQYXRoLHRoaXMub0NvbnRleHQpO2lmKHIpe3ZhciBlPXRoaXMub01vZGVsLm9NZXRhZGF0YS5fZ2V0RW50aXR5VHlwZUJ5UGF0aChyKTtyZXR1cm4gZX1yZXR1cm4gdW5kZWZpbmVkfTtiLnByb3RvdHlwZS5yZXN1bWU9ZnVuY3Rpb24oKXt0aGlzLmJJZ25vcmVTdXNwZW5kPWZhbHNlO0wucHJvdG90eXBlLnJlc3VtZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9O3JldHVybiBifSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLm1vZGVsLm9kYXRhLk9EYXRhUHJvcGVydHlCaW5kaW5nJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLm1vZGVsLm9kYXRhLk9EYXRhUHJvcGVydHlCaW5kaW5nJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL21vZGVsL29kYXRhL09EYXRhUHJvcGVydHlCaW5kaW5nIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL21vZGVsL1Byb3BlcnR5QmluZGluZyddLGZ1bmN0aW9uKHEsUCl7InVzZSBzdHJpY3QiO3ZhciBPPVAuZXh0ZW5kKCJzYXAudWkubW9kZWwub2RhdGEuT0RhdGFQcm9wZXJ0eUJpbmRpbmciLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbihtLHAsYyxhKXtQLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLm9WYWx1ZT10aGlzLl9nZXRWYWx1ZSgpfX0pO08ucHJvdG90eXBlLmluaXRpYWxpemU9ZnVuY3Rpb24oKXtpZih0aGlzLm9Nb2RlbC5vTWV0YWRhdGEuaXNMb2FkZWQoKSl7dGhpcy5jaGVja1VwZGF0ZSh0cnVlKX19O08ucHJvdG90eXBlLmdldFZhbHVlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub1ZhbHVlfTtPLnByb3RvdHlwZS5fZ2V0VmFsdWU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vTW9kZWwuX2dldE9iamVjdCh0aGlzLnNQYXRoLHRoaXMub0NvbnRleHQpfTtPLnByb3RvdHlwZS5zZXRWYWx1ZT1mdW5jdGlvbih2KXtpZih0aGlzLm9WYWx1ZSE9dil7aWYoIXRoaXMub01vZGVsLnNldFByb3BlcnR5KHRoaXMuc1BhdGgsdix0aGlzLm9Db250ZXh0KSl7dGhpcy5fZmlyZUNoYW5nZSgpfX19O08ucHJvdG90eXBlLnNldENvbnRleHQ9ZnVuY3Rpb24oYyl7aWYodGhpcy5vQ29udGV4dCE9Yyl7dGhpcy5vQ29udGV4dD1jO2lmKHRoaXMuaXNSZWxhdGl2ZSgpKXt0aGlzLmNoZWNrVXBkYXRlKCl9fX07Ty5wcm90b3R5cGUuY2hlY2tVcGRhdGU9ZnVuY3Rpb24oZil7dmFyIHY9dGhpcy5fZ2V0VmFsdWUoKTtpZighcS5zYXAuZXF1YWwodix0aGlzLm9WYWx1ZSl8fGYpe3RoaXMub1ZhbHVlPXY7dGhpcy5fZmlyZUNoYW5nZSh7cmVhc29uOnNhcC51aS5tb2RlbC5DaGFuZ2VSZWFzb24uQ2hhbmdlfSl9fTtyZXR1cm4gT30sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5tb2RlbC5yZXNvdXJjZS5SZXNvdXJjZVByb3BlcnR5QmluZGluZycpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5tb2RlbC5yZXNvdXJjZS5SZXNvdXJjZVByb3BlcnR5QmluZGluZycpO3NhcC51aS5kZWZpbmUoInNhcC91aS9tb2RlbC9yZXNvdXJjZS9SZXNvdXJjZVByb3BlcnR5QmluZGluZyIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ3NhcC91aS9tb2RlbC9Qcm9wZXJ0eUJpbmRpbmcnLCdzYXAvdWkvbW9kZWwvQ2hhbmdlUmVhc29uJ10sZnVuY3Rpb24ocSxQLEMpeyJ1c2Ugc3RyaWN0Ijt2YXIgUj1QLmV4dGVuZCgic2FwLnVpLm1vZGVsLnJlc291cmNlLlJlc291cmNlUHJvcGVydHlCaW5kaW5nIix7Y29uc3RydWN0b3I6ZnVuY3Rpb24obSxwKXtQLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLm9WYWx1ZT10aGlzLm9Nb2RlbC5nZXRQcm9wZXJ0eShwKX19KTtSLnByb3RvdHlwZS5nZXRWYWx1ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLm9WYWx1ZX07Ui5wcm90b3R5cGUuY2hlY2tVcGRhdGU9ZnVuY3Rpb24oZil7aWYoIXRoaXMuYlN1c3BlbmRlZCl7dmFyIHY9dGhpcy5vTW9kZWwuZ2V0UHJvcGVydHkodGhpcy5zUGF0aCk7aWYoZnx8diE9dGhpcy5vVmFsdWUpe3RoaXMub1ZhbHVlPXY7dGhpcy5fZmlyZUNoYW5nZSh7cmVhc29uOkMuQ2hhbmdlfSl9fX07cmV0dXJuIFJ9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkubW9kZWwueG1sLlhNTExpc3RCaW5kaW5nJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLm1vZGVsLnhtbC5YTUxMaXN0QmluZGluZycpO3NhcC51aS5kZWZpbmUoInNhcC91aS9tb2RlbC94bWwvWE1MTGlzdEJpbmRpbmciLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvbW9kZWwvQ2hhbmdlUmVhc29uJywnc2FwL3VpL21vZGVsL0NsaWVudExpc3RCaW5kaW5nJ10sZnVuY3Rpb24ocSxDLGEpeyJ1c2Ugc3RyaWN0Ijt2YXIgWD1hLmV4dGVuZCgic2FwLnVpLm1vZGVsLnhtbC5YTUxMaXN0QmluZGluZyIpO1gucHJvdG90eXBlLmdldENvbnRleHRzPWZ1bmN0aW9uKHMsbCl7dGhpcy5pTGFzdFN0YXJ0SW5kZXg9czt0aGlzLmlMYXN0TGVuZ3RoPWw7aWYoIXMpe3M9MH1pZighbCl7bD1NYXRoLm1pbih0aGlzLmlMZW5ndGgsdGhpcy5vTW9kZWwuaVNpemVMaW1pdCl9dmFyIGM9dGhpcy5fZ2V0Q29udGV4dHMocyxsKSxvPXt9O2lmKHRoaXMuYlVzZUV4dGVuZGVkQ2hhbmdlRGV0ZWN0aW9uKXtmb3IodmFyIGk9MDtpPGMubGVuZ3RoO2krKyl7b1tjW2ldLmdldFBhdGgoKV09dGhpcy5vTW9kZWwuX2dldE9iamVjdChjW2ldLmdldFBhdGgoKSlbMF19aWYodGhpcy5hTGFzdENvbnRleHRzJiZzPHRoaXMuaUxhc3RFbmRJbmRleCl7dmFyIHQ9dGhpczt2YXIgZD1xLnNhcC5hcnJheURpZmYodGhpcy5hTGFzdENvbnRleHRzLGMsZnVuY3Rpb24oTyxuKXt2YXIgYj10Lm9MYXN0Q29udGV4dERhdGEmJnQub0xhc3RDb250ZXh0RGF0YVtPLmdldFBhdGgoKV07dmFyIE49byYmb1tuLmdldFBhdGgoKV07aWYoYiYmTil7cmV0dXJuIHEuc2FwLmlzRXF1YWxOb2RlKGIsTil9cmV0dXJuIGZhbHNlfSk7Yy5kaWZmPWR9dGhpcy5pTGFzdEVuZEluZGV4PXMrbDt0aGlzLmFMYXN0Q29udGV4dHM9Yy5zbGljZSgwKTt0aGlzLm9MYXN0Q29udGV4dERhdGE9e307dmFyIHQ9dGhpcztxLmVhY2gobyxmdW5jdGlvbihrLG4pe3Qub0xhc3RDb250ZXh0RGF0YVtrXT1uLmNsb25lTm9kZSh0cnVlKX0pfXJldHVybiBjfTtYLnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24oKXt2YXIgbD10aGlzLm9Nb2RlbC5fZ2V0T2JqZWN0KHRoaXMuc1BhdGgsdGhpcy5vQ29udGV4dCk7aWYobCl7dGhpcy5vTGlzdD1bXTt2YXIgdD10aGlzO2lmKHRoaXMuYlVzZUV4dGVuZGVkQ2hhbmdlRGV0ZWN0aW9uKXtxLmVhY2gobCxmdW5jdGlvbihrLG4pe3Qub0xpc3QucHVzaChuLmNsb25lTm9kZSh0cnVlKSl9KX1lbHNle3RoaXMub0xpc3Q9bC5zbGljZSgwKX10aGlzLnVwZGF0ZUluZGljZXMoKTt0aGlzLmFwcGx5RmlsdGVyKCk7dGhpcy5hcHBseVNvcnQoKTt0aGlzLmlMZW5ndGg9dGhpcy5fZ2V0TGVuZ3RoKCl9ZWxzZXt0aGlzLm9MaXN0PVtdO3RoaXMuYUluZGljZXM9W107dGhpcy5pTGVuZ3RoPTB9fTtYLnByb3RvdHlwZS5jaGVja1VwZGF0ZT1mdW5jdGlvbihmKXtpZih0aGlzLmJTdXNwZW5kZWQmJiF0aGlzLmJJZ25vcmVTdXNwZW5kKXJldHVybjtpZighdGhpcy5iVXNlRXh0ZW5kZWRDaGFuZ2VEZXRlY3Rpb24pe3ZhciBsPXRoaXMub01vZGVsLl9nZXRPYmplY3QodGhpcy5zUGF0aCx0aGlzLm9Db250ZXh0KTtpZighdGhpcy5vTGlzdHx8IWx8fGwubGVuZ3RoIT10aGlzLm9MaXN0Lmxlbmd0aHx8Zil7dGhpcy51cGRhdGUoKTt0aGlzLl9maXJlQ2hhbmdlKHtyZWFzb246Qy5DaGFuZ2V9KX19ZWxzZXt2YXIgYz1mYWxzZTt2YXIgdD10aGlzO3ZhciBsPXRoaXMub01vZGVsLl9nZXRPYmplY3QodGhpcy5zUGF0aCx0aGlzLm9Db250ZXh0KTtpZighcS5zYXAuZXF1YWwodGhpcy5vTGlzdCxsKSl7dGhpcy51cGRhdGUoKX12YXIgYj10aGlzLl9nZXRDb250ZXh0cyh0aGlzLmlMYXN0U3RhcnRJbmRleCx0aGlzLmlMYXN0TGVuZ3RoKTtpZih0aGlzLmFMYXN0Q29udGV4dHMpe2lmKHRoaXMuYUxhc3RDb250ZXh0cy5sZW5ndGghPWIubGVuZ3RoKXtjPXRydWV9ZWxzZXtxLmVhY2godGhpcy5hTGFzdENvbnRleHRzLGZ1bmN0aW9uKGksbyl7dmFyIG49YltpXS5nZXRPYmplY3QoKTt2YXIgTz10Lm9MYXN0Q29udGV4dERhdGEmJnQub0xhc3RDb250ZXh0RGF0YVtvLmdldFBhdGgoKV07aWYobiYmTyYmIU8uaXNFcXVhbE5vZGUobikpe2M9dHJ1ZTtyZXR1cm4gZmFsc2V9fSl9fWVsc2V7Yz10cnVlfWlmKGN8fGYpe3RoaXMuX2ZpcmVDaGFuZ2Uoe3JlYXNvbjpDLkNoYW5nZX0pfX19O3JldHVybiBYfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLm1vZGVsLnhtbC5YTUxUcmVlQmluZGluZycpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5tb2RlbC54bWwuWE1MVHJlZUJpbmRpbmcnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvbW9kZWwveG1sL1hNTFRyZWVCaW5kaW5nIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL21vZGVsL0NsaWVudFRyZWVCaW5kaW5nJ10sZnVuY3Rpb24ocSxDKXsidXNlIHN0cmljdCI7dmFyIFg9Qy5leHRlbmQoInNhcC51aS5tb2RlbC54bWwuWE1MVHJlZUJpbmRpbmciKTtYLnByb3RvdHlwZS5nZXROb2RlQ29udGV4dHM9ZnVuY3Rpb24oYyl7dmFyIHM9Yy5nZXRQYXRoKCk7aWYoIXEuc2FwLmVuZHNXaXRoKHMsIi8iKSl7cz1zKyIvIn1pZighcS5zYXAuc3RhcnRzV2l0aChzLCIvIikpe3M9Ii8iK3N9dmFyIGE9W10sbj17fSx0PXRoaXMsTj10aGlzLm9Nb2RlbC5fZ2V0T2JqZWN0KGMuZ2V0UGF0aCgpKSxvLGIsZDtxLmVhY2goTlswXS5jaGlsZE5vZGVzLGZ1bmN0aW9uKGUsbyl7aWYoby5ub2RlVHlwZT09MSl7aWYobltvLm5vZGVOYW1lXT09dW5kZWZpbmVkKXtuW28ubm9kZU5hbWVdPTB9ZWxzZXtuW28ubm9kZU5hbWVdKyt9Yj1zK28ubm9kZU5hbWUrIi8iK25bby5ub2RlTmFtZV07ZD10Lm9Nb2RlbC5nZXRDb250ZXh0KGIpO2lmKHQuYUZpbHRlcnMmJiF0LmJJc0ZpbHRlcmluZyl7aWYocS5pbkFycmF5KGQsdC5maWx0ZXJJbmZvLmFGaWx0ZXJlZENvbnRleHRzKSE9LTEpe2EucHVzaChkKX19ZWxzZXthLnB1c2goZCl9fX0pO3JldHVybiBhfTtyZXR1cm4gWH0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLnV0aWwuc2VyaWFsaXplci5WaWV3U2VyaWFsaXplcicpKXsNCi8qDQogKiBTQVAgVUkgZGV2ZWxvcG1lbnQgdG9vbGtpdCBmb3IgSFRNTDUgKFNBUFVJNS9PcGVuVUk1KQ0KICogKGMpIENvcHlyaWdodCAyMDA5LTIwMTQgU0FQIFNFIG9yIGFuIFNBUCBhZmZpbGlhdGUgY29tcGFueS4gDQogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wIC0gc2VlIExJQ0VOU0UudHh0Lg0KICovDQpqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLnV0aWwuc2VyaWFsaXplci5WaWV3U2VyaWFsaXplcicpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL3V0aWwvc2VyaWFsaXplci9WaWV3U2VyaWFsaXplciIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ3NhcC91aS9iYXNlL0V2ZW50UHJvdmlkZXInLCcuL0hUTUxWaWV3U2VyaWFsaXplcicsJy4vU2VyaWFsaXplcicsJy4vWE1MVmlld1NlcmlhbGl6ZXInXSxmdW5jdGlvbihxLEUsSCxTLFgpeyJ1c2Ugc3RyaWN0Ijt2YXIgVj1FLmV4dGVuZCgic2FwLnVpLmNvcmUudXRpbC5zZXJpYWxpemVyLlZpZXdTZXJpYWxpemVyIix7Y29uc3RydWN0b3I6ZnVuY3Rpb24ocix3LGQpe0UuYXBwbHkodGhpcyk7dGhpcy5fb1Jvb3RDb250cm9sPXI7dGhpcy5fb1dpbmRvdz13fHx3aW5kb3c7dGhpcy5fbVZpZXdzPXt9O3RoaXMuX3NEZWZhdWx0WG1sTmFtZXNwYWNlPWR9fSk7Vi5wcm90b3R5cGUuc2VyaWFsaXplVG9YTUw9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zZXJpYWxpemUoIlhNTCIpfTtWLnByb3RvdHlwZS5zZXJpYWxpemVUb0hUTUw9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zZXJpYWxpemUoIkhUTUwiKX07Vi5wcm90b3R5cGUuc2VyaWFsaXplPWZ1bmN0aW9uKGMpe3RoaXMuX21WaWV3cz17fTt0aGlzLl9zQ29udmVydFRvVmlld1R5cGU9Y3x8dW5kZWZpbmVkO3JldHVybiB0aGlzLl9zZXJpYWxpemVSZWN1cnNpdmUodGhpcy5fb1Jvb3RDb250cm9sKX07Vi5wcm90b3R5cGUuX2dldFZpZXdUeXBlPWZ1bmN0aW9uKHYpe2lmKCF0aGlzLl9zQ29udmVydFRvVmlld1R5cGUpe2lmKHYgaW5zdGFuY2VvZiB0aGlzLl9vV2luZG93LnNhcC51aS5jb3JlLm12Yy5IVE1MVmlldyl7cmV0dXJuIkhUTUwifWVsc2UgaWYodiBpbnN0YW5jZW9mIHRoaXMuX29XaW5kb3cuc2FwLnVpLmNvcmUubXZjLlhNTFZpZXcpe3JldHVybiJYTUwifX1yZXR1cm4gdGhpcy5fc0NvbnZlcnRUb1ZpZXdUeXBlfTtWLnByb3RvdHlwZS5fc2VyaWFsaXplUmVjdXJzaXZlPWZ1bmN0aW9uKGMpe2lmKGMgaW5zdGFuY2VvZiB0aGlzLl9vV2luZG93LnNhcC51aS5jb3JlLm12Yy5WaWV3KXt2YXIgdj10aGlzLl9nZXRWaWV3U2VyaWFsaXplcihjLHRoaXMuX2dldFZpZXdUeXBlKGMpKTtpZih2KXt2YXIgbz1jLmdldFZpZXdOYW1lKCl8fGMuZ2V0Q29udHJvbGxlck5hbWUoKTtpZighdGhpcy5fbVZpZXdzW29dKXt0aGlzLl9tVmlld3Nbb109di5zZXJpYWxpemUodGhpcy5fZ2V0Vmlld1R5cGUoYykpfX19aWYoYy5nZXRNZXRhZGF0YSgpLmdldENsYXNzKCk9PT10aGlzLl9vV2luZG93LnNhcC51aS5jb3JlLlVJQXJlYSl7dmFyIEM9Yy5nZXRDb250ZW50KCk7Zm9yKHZhciBpPTA7aTxDLmxlbmd0aDtpKyspe3RoaXMuX3NlcmlhbGl6ZVJlY3Vyc2l2ZShDW2ldKX19ZWxzZSBpZihjLmdldE1ldGFkYXRhKCkuZ2V0Q2xhc3MoKT09PXRoaXMuX29XaW5kb3cuc2FwLnVpLmNvcmUuQ29tcG9uZW50Q29udGFpbmVyKXt0aGlzLl9zZXJpYWxpemVSZWN1cnNpdmUoYy5nZXRDb21wb25lbnRJbnN0YW5jZSgpLmdldEFnZ3JlZ2F0aW9uKCJyb290Q29udHJvbCIpKX1lbHNle3ZhciBhPWMuZ2V0TWV0YWRhdGEoKS5nZXRBbGxBZ2dyZWdhdGlvbnMoKTtpZihhKXtmb3IodmFyIG4gaW4gYSl7dmFyIEE9YVtuXTt2YXIgYj1jW0EuX3NHZXR0ZXJdKCk7aWYoYiYmYi5sZW5ndGgpe2Zvcih2YXIgaT0wO2k8Yi5sZW5ndGg7aSsrKXt2YXIgTz1iW2ldO2lmKE8gaW5zdGFuY2VvZiB0aGlzLl9vV2luZG93LnNhcC51aS5jb3JlLkVsZW1lbnQpe3RoaXMuX3NlcmlhbGl6ZVJlY3Vyc2l2ZShPKX19fWVsc2UgaWYoYiBpbnN0YW5jZW9mIHRoaXMuX29XaW5kb3cuc2FwLnVpLmNvcmUuRWxlbWVudCl7dGhpcy5fc2VyaWFsaXplUmVjdXJzaXZlKGIpfX19fXJldHVybiB0aGlzLl9tVmlld3N9O1YucHJvdG90eXBlLl9nZXRWaWV3U2VyaWFsaXplcj1mdW5jdGlvbih2LHQpe3ZhciBnPWZ1bmN0aW9uKGUpe2lmKGUuZkZ1bmN0aW9uJiZlLmZGdW5jdGlvbi5fc2FwdWlfaGFuZGxlck5hbWUpe3ZhciBoPWUuZkZ1bmN0aW9uLl9zYXB1aV9oYW5kbGVyTmFtZTt2YXIgYz12LmdldENvbnRyb2xsZXIoKTtpZihjW2hdKXtyZXR1cm4gaH19fTt2YXIgRz1mdW5jdGlvbihjKXtpZihjLl9zYXB1aV9jb250cm9sSWQpe3JldHVybiBjLl9zYXB1aV9jb250cm9sSWR9cmV0dXJuIGMuZ2V0SWQoKS5yZXBsYWNlKHYuY3JlYXRlSWQoIiIpLCIiKX07aWYodD09PSJIVE1MIil7cmV0dXJuIG5ldyBIKHYsdGhpcy5fb1dpbmRvdyxHLGcpfWVsc2UgaWYodD09PSJYTUwiKXtyZXR1cm4gbmV3IFgodix0aGlzLl9vV2luZG93LHRoaXMuX3NEZWZhdWx0WG1sTmFtZXNwYWNlLEcsZyl9ZWxzZXt2YXIgdD0odik/di5jb25zdHJ1Y3RvcjoiPyI7dGhyb3cgRXJyb3IoIlZpZXcgdHlwZSAnIit0KyInIGlzIG5vdCBzdXBwb3J0ZWQgZm9yIGNvbnZlcnNpb24uIE9ubHkgSFRNTCBhbmQgWE1MIGlzIHN1cHBvcnRlZCIpfX07cmV0dXJuIFZ9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkubW9kZWwuQ2xpZW50UHJvcGVydHlCaW5kaW5nJykpew0KLyohDQogKiBTQVAgVUkgZGV2ZWxvcG1lbnQgdG9vbGtpdCBmb3IgSFRNTDUgKFNBUFVJNS9PcGVuVUk1KQ0KICogKGMpIENvcHlyaWdodCAyMDA5LTIwMTQgU0FQIFNFIG9yIGFuIFNBUCBhZmZpbGlhdGUgY29tcGFueS4gDQogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wIC0gc2VlIExJQ0VOU0UudHh0Lg0KICovDQpqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5tb2RlbC5DbGllbnRQcm9wZXJ0eUJpbmRpbmcnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvbW9kZWwvQ2xpZW50UHJvcGVydHlCaW5kaW5nIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnLi9Qcm9wZXJ0eUJpbmRpbmcnXSxmdW5jdGlvbihxLFApeyJ1c2Ugc3RyaWN0Ijt2YXIgQz1QLmV4dGVuZCgic2FwLnVpLm1vZGVsLkNsaWVudFByb3BlcnR5QmluZGluZyIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKG0scCxjLGEpe1AuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMub1ZhbHVlPXRoaXMuX2dldFZhbHVlKCl9fSk7Qy5wcm90b3R5cGUuZ2V0VmFsdWU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vVmFsdWV9O0MucHJvdG90eXBlLl9nZXRWYWx1ZT1mdW5jdGlvbigpe3ZhciBwPXRoaXMuc1BhdGguc3Vic3RyKHRoaXMuc1BhdGgubGFzdEluZGV4T2YoIi8iKSsxKTtpZihwPT0iX19uYW1lX18iKXt2YXIgYT10aGlzLm9Db250ZXh0LnNwbGl0KCIvIik7cmV0dXJuIGFbYS5sZW5ndGgtMV19cmV0dXJuIHRoaXMub01vZGVsLmdldFByb3BlcnR5KHRoaXMuc1BhdGgsdGhpcy5vQ29udGV4dCl9O0MucHJvdG90eXBlLnNldENvbnRleHQ9ZnVuY3Rpb24oYyl7aWYodGhpcy5vQ29udGV4dCE9Yyl7dGhpcy5vQ29udGV4dD1jO2lmKHRoaXMuaXNSZWxhdGl2ZSgpKXt0aGlzLmNoZWNrVXBkYXRlKCl9fX07cmV0dXJuIEN9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkubW9kZWwuQ29tcG9zaXRlQmluZGluZycpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5tb2RlbC5Db21wb3NpdGVCaW5kaW5nJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL21vZGVsL0NvbXBvc2l0ZUJpbmRpbmciLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCcuL1Byb3BlcnR5QmluZGluZycsJy4vU2ltcGxlVHlwZSddLGZ1bmN0aW9uKHEsUCxTKXsidXNlIHN0cmljdCI7dmFyIEM9UC5leHRlbmQoInNhcC51aS5tb2RlbC5Db21wb3NpdGVCaW5kaW5nIix7Y29uc3RydWN0b3I6ZnVuY3Rpb24oYixyKXtQLmFwcGx5KHRoaXMsW251bGwsIiJdKTt2YXIgdD10aGlzO3RoaXMuYUJpbmRpbmdzPWI7dGhpcy5iUmF3VmFsdWVzPXJ9LG1ldGFkYXRhOntwdWJsaWNNZXRob2RzOlsiZ2V0QmluZGluZ3MiLCJhdHRhY2hDaGFuZ2UiLCJkZXRhY2hDaGFuZ2UiXX19KTtDLnByb3RvdHlwZS5nZXRQYXRoPWZ1bmN0aW9uKCl7cmV0dXJuIG51bGx9O0MucHJvdG90eXBlLmdldE1vZGVsPWZ1bmN0aW9uKCl7cmV0dXJuIG51bGx9O0MucHJvdG90eXBlLmdldENvbnRleHQ9ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbH07Qy5wcm90b3R5cGUuZ2V0VHlwZT1mdW5jdGlvbigpe3JldHVybiBudWxsfTtDLnByb3RvdHlwZS5zZXRDb250ZXh0PWZ1bmN0aW9uKGMpe3EuZWFjaCh0aGlzLmFCaW5kaW5ncyxmdW5jdGlvbihpLGIpe2lmKCFjfHxiLnVwZGF0ZVJlcXVpcmVkKGMuZ2V0TW9kZWwoKSkpe2Iuc2V0Q29udGV4dChjKX19KX07Qy5wcm90b3R5cGUuc2V0VmFsdWU9ZnVuY3Rpb24odil7dGhyb3cgbmV3IHNhcC51aS5iYXNlLkV4Y2VwdGlvbigiQ29tcG9zaXRlIEJpbmRpbmcgZG9lcyBub3Qgc3VwcG9ydCBzZXRWYWx1ZSBiZWNhdXNlIGl0IGNvbnRhaW5zIG11bHRpcGxlIHByb3BlcnR5IGJpbmRpbmdzISIpfTtDLnByb3RvdHlwZS5nZXRWYWx1ZT1mdW5jdGlvbigpe3ZhciB2PVtdLFY7cS5lYWNoKHRoaXMuYUJpbmRpbmdzLGZ1bmN0aW9uKGksYil7Vj1iLmdldFZhbHVlKCk7di5wdXNoKFYpfSk7cmV0dXJuIHZ9O0MucHJvdG90eXBlLmdldEV4dGVybmFsVmFsdWU9ZnVuY3Rpb24oKXt2YXIgdj1bXSxWO2lmKHRoaXMuYlJhd1ZhbHVlcyl7dj10aGlzLmdldFZhbHVlKCl9ZWxzZXtxLmVhY2godGhpcy5hQmluZGluZ3MsZnVuY3Rpb24oaSxiKXtWPWIuZ2V0RXh0ZXJuYWxWYWx1ZSgpO3YucHVzaChWKX0pfWlmKHRoaXMuZm5Gb3JtYXR0ZXIpe1Y9dGhpcy5mbkZvcm1hdHRlci5hcHBseSh0aGlzLHYpfWVsc2V7aWYodi5sZW5ndGg+MSl7Vj12LmpvaW4oIiAiKX1lbHNle1Y9dlswXX19cmV0dXJuIFZ9O0MucHJvdG90eXBlLnNldEV4dGVybmFsVmFsdWU9ZnVuY3Rpb24odil7dGhyb3cgbmV3IHNhcC51aS5iYXNlLkV4Y2VwdGlvbigiQ29tcG9zaXRlIEJpbmRpbmcgZG9lcyBub3Qgc3VwcG9ydCBzZXRFeHRlcm5hbFZhbHVlIGJlY2F1c2UgaXQgY29udGFpbnMgbXVsdGlwbGUgcHJvcGVydHkgYmluZGluZ3MhIil9O0MucHJvdG90eXBlLmdldEJpbmRpbmdzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYUJpbmRpbmdzfTtDLnByb3RvdHlwZS5hdHRhY2hDaGFuZ2U9ZnVuY3Rpb24oZixsKXt0aGlzLmF0dGFjaEV2ZW50KCJjaGFuZ2UiLGYsbCk7aWYodGhpcy5hQmluZGluZ3Mpe3ZhciB0PXRoaXM7cS5lYWNoKHRoaXMuYUJpbmRpbmdzLGZ1bmN0aW9uKGksYil7Yi5hdHRhY2hDaGFuZ2UodC5jaGVja1VwZGF0ZSx0KX0pfX07Qy5wcm90b3R5cGUuZGV0YWNoQ2hhbmdlPWZ1bmN0aW9uKGYsbCl7dGhpcy5kZXRhY2hFdmVudCgiY2hhbmdlIixmLGwpO2lmKHRoaXMuYUJpbmRpbmdzKXt2YXIgdD10aGlzO3EuZWFjaCh0aGlzLmFCaW5kaW5ncyxmdW5jdGlvbihpLGIpe2IuZGV0YWNoQ2hhbmdlKHQuY2hlY2tVcGRhdGUsdCl9KX19O0MucHJvdG90eXBlLnVwZGF0ZVJlcXVpcmVkPWZ1bmN0aW9uKG0pe3ZhciB1PWZhbHNlO3EuZWFjaCh0aGlzLmFCaW5kaW5ncyxmdW5jdGlvbihpLGIpe3U9dXx8Yi51cGRhdGVSZXF1aXJlZChtKX0pO3JldHVybiB1fTtDLnByb3RvdHlwZS5jaGVja1VwZGF0ZT1mdW5jdGlvbihmKXt2YXIgdj10aGlzLmdldEV4dGVybmFsVmFsdWUoKTtpZighcS5zYXAuZXF1YWwodix0aGlzLm9WYWx1ZSl8fGYpe3RoaXMub1ZhbHVlPXY7dGhpcy5fZmlyZUNoYW5nZSh7cmVhc29uOnNhcC51aS5tb2RlbC5DaGFuZ2VSZWFzb24uQ2hhbmdlfSl9fTtyZXR1cm4gQ30sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5tb2RlbC5jb250cm9sLkNvbnRyb2xNb2RlbCcpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5tb2RlbC5jb250cm9sLkNvbnRyb2xNb2RlbCcpO3NhcC51aS5kZWZpbmUoInNhcC91aS9tb2RlbC9jb250cm9sL0NvbnRyb2xNb2RlbCIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ3NhcC91aS9tb2RlbC9Nb2RlbCcsJy4vQ29udHJvbFByb3BlcnR5QmluZGluZyddLGZ1bmN0aW9uKHEsTSxDKXsidXNlIHN0cmljdCI7dmFyIGE9TS5leHRlbmQoInNhcC51aS5tb2RlbC5jb250cm9sLkNvbnRyb2xNb2RlbCIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKGMpe00uYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMub0NvbnRyb2w9Yzt0aGlzLm9Db250cm9sLmF0dGFjaEV2ZW50KCJfY2hhbmdlIix0aGlzLmNoZWNrVXBkYXRlLHRoaXMpO3RoaXMub0VsZW1lbnRzPVtdfX0pO2EucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXt0aGlzLm9Db250cm9sLmRldGFjaEV2ZW50KCJfY2hhbmdlIix0aGlzLmNoZWNrVXBkYXRlLHRoaXMpfTthLnByb3RvdHlwZS5hZGRGYWNhZGVDb21wb25lbnQ9ZnVuY3Rpb24oZSl7dmFyIGk9cS5pbkFycmF5KGUsdGhpcy5vRWxlbWVudHMpO2lmKGk8MCl7dGhpcy5vRWxlbWVudHMucHVzaChlKTtlLmF0dGFjaEV2ZW50KCJfY2hhbmdlIix0aGlzLmNoZWNrVXBkYXRlLHRoaXMpfX07YS5wcm90b3R5cGUucmVtb3ZlRmFjYWRlQ29tcG9uZW50PWZ1bmN0aW9uKGUpe3ZhciBpPXEuaW5BcnJheShlLHRoaXMub0VsZW1lbnRzKTtpZihpPj0wKXt0aGlzLm9FbGVtZW50cy5zcGxpY2UoaSwxKTtlLmRldGFjaEV2ZW50KCJfY2hhbmdlIix0aGlzLmNoZWNrVXBkYXRlLHRoaXMpfX07YS5wcm90b3R5cGUuYmluZFByb3BlcnR5PWZ1bmN0aW9uKHAsYyl7Yz1jfHx0aGlzLm9Db250cm9sO2lmKGMhPT10aGlzLm9Db250cm9sKXt0aGlzLmFkZEZhY2FkZUNvbXBvbmVudChjKX1yZXR1cm4gbmV3IEModGhpcyxwLGMpfTthLnByb3RvdHlwZS5jaGVja1VwZGF0ZT1mdW5jdGlvbihlKXtpZih0aGlzLl9vbmNoYW5nZSl7dGhpcy5fb25jaGFuZ2UoZSl9aWYodGhpcy5hQmluZGluZ3MubGVuZ3RoKXt2YXIgYj10aGlzLmFCaW5kaW5ncy5zbGljZSgwKTtxLmVhY2goYixmdW5jdGlvbihpLEIpe0IuY2hlY2tVcGRhdGUoKX0pfX07cmV0dXJuIGF9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkubW9kZWwuanNvbi5KU09OUHJvcGVydHlCaW5kaW5nJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLm1vZGVsLmpzb24uSlNPTlByb3BlcnR5QmluZGluZycpO3NhcC51aS5kZWZpbmUoInNhcC91aS9tb2RlbC9qc29uL0pTT05Qcm9wZXJ0eUJpbmRpbmciLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvbW9kZWwvQ2xpZW50UHJvcGVydHlCaW5kaW5nJ10sZnVuY3Rpb24ocSxDKXsidXNlIHN0cmljdCI7dmFyIEo9Qy5leHRlbmQoInNhcC51aS5tb2RlbC5qc29uLkpTT05Qcm9wZXJ0eUJpbmRpbmciKTtKLnByb3RvdHlwZS5zZXRWYWx1ZT1mdW5jdGlvbih2KXtpZighcS5zYXAuZXF1YWwodGhpcy5vVmFsdWUsdikpe3RoaXMub01vZGVsLnNldFByb3BlcnR5KHRoaXMuc1BhdGgsdix0aGlzLm9Db250ZXh0KX19O0oucHJvdG90eXBlLmNoZWNrVXBkYXRlPWZ1bmN0aW9uKGYpe3ZhciB2PXRoaXMuX2dldFZhbHVlKCk7aWYoIXEuc2FwLmVxdWFsKHYsdGhpcy5vVmFsdWUpfHxmKXt0aGlzLm9WYWx1ZT12O3RoaXMuX2ZpcmVDaGFuZ2Uoe3JlYXNvbjpzYXAudWkubW9kZWwuQ2hhbmdlUmVhc29uLkNoYW5nZX0pfX07cmV0dXJuIEp9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkubW9kZWwub2RhdGEuT0RhdGFNb2RlbCcpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5tb2RlbC5vZGF0YS5PRGF0YU1vZGVsJyk7alF1ZXJ5LnNhcC5yZXF1aXJlKCdzYXAudWkudGhpcmRwYXJ0eS5kYXRhanMnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvbW9kZWwvb2RhdGEvT0RhdGFNb2RlbCIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ3NhcC91aS9tb2RlbC9Nb2RlbCcsJy4vT0RhdGFVdGlscycsJy4vQ291bnRNb2RlJywnLi9PRGF0YUNvbnRleHRCaW5kaW5nJywnLi9PRGF0YUxpc3RCaW5kaW5nJywnLi9PRGF0YU1ldGFkYXRhJywnLi9PRGF0YVByb3BlcnR5QmluZGluZycsJy4vT0RhdGFUcmVlQmluZGluZycsJ3NhcC91aS90aGlyZHBhcnR5L1VSSScsJ3NhcC91aS90aGlyZHBhcnR5L2RhdGFqcyddLGZ1bmN0aW9uKHEsTSxPLEMsYSxiLGMsZCxlLFUsZil7InVzZSBzdHJpY3QiO3ZhciBnPU0uZXh0ZW5kKCJzYXAudWkubW9kZWwub2RhdGEuT0RhdGFNb2RlbCIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKHMsaix1LHAsaCx0LHcsbCl7TS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dmFyIGkscixtLEE9bnVsbCxMLGssbixELFMsbyx2PXRoaXM7aWYodHlwZW9mIGo9PT0ib2JqZWN0Iil7dT1qLnVzZXI7cD1qLnBhc3N3b3JkO2g9ai5oZWFkZXJzO3Q9ai50b2tlbkhhbmRsaW5nO2w9ai5sb2FkTWV0YWRhdGFBc3luYzt3PWoud2l0aENyZWRlbnRpYWxzO209ai5tYXhEYXRhU2VydmljZVZlcnNpb247aT1qLnVzZUJhdGNoO3I9ai5yZWZyZXNoQWZ0ZXJDaGFuZ2U7QT1qLmFubm90YXRpb25VUkk7TD1qLmxvYWRBbm5vdGF0aW9uc0pvaW5lZDtEPWouZGVmYXVsdENvdW50TW9kZTtuPWoubWV0YWRhdGFOYW1lc3BhY2VzO1M9ai5zZXJ2aWNlVXJsUGFyYW1zO289ai5tZXRhZGF0YVVybFBhcmFtcztqPWouanNvbn10aGlzLnNEZWZhdWx0QmluZGluZ01vZGU9c2FwLnVpLm1vZGVsLkJpbmRpbmdNb2RlLk9uZVdheTt0aGlzLm1TdXBwb3J0ZWRCaW5kaW5nTW9kZXM9eyJPbmVXYXkiOnRydWUsIk9uZVRpbWUiOnRydWUsIlR3b1dheSI6dHJ1ZX07dGhpcy5iQ291bnRTdXBwb3J0ZWQ9dHJ1ZTt0aGlzLmJKU09OPWo7dGhpcy5iQ2FjaGU9dHJ1ZTt0aGlzLmFQZW5kaW5nUmVxdWVzdEhhbmRsZXM9W107dGhpcy5vUmVxdWVzdFF1ZXVlPXt9O3RoaXMuYUJhdGNoT3BlcmF0aW9ucz1bXTt0aGlzLm9IYW5kbGVyO3RoaXMuYlRva2VuSGFuZGxpbmc9dCE9PWZhbHNlO3RoaXMuYldpdGhDcmVkZW50aWFscz13PT09dHJ1ZTt0aGlzLmJVc2VCYXRjaD1pPT09dHJ1ZTt0aGlzLmJSZWZyZXNoQWZ0ZXJDaGFuZ2U9ciE9PWZhbHNlO3RoaXMuc01heERhdGFTZXJ2aWNlVmVyc2lvbj1tO3RoaXMuYkxvYWRNZXRhZGF0YUFzeW5jPSEhbDt0aGlzLmJMb2FkQW5ub3RhdGlvbnNKb2luZWQ9TD09PXVuZGVmaW5lZD90cnVlOkw7dGhpcy5zQW5ub3RhdGlvblVSST1BO3RoaXMuc0RlZmF1bHRDb3VudE1vZGU9RHx8Qy5Cb3RoO3RoaXMub01ldGFkYXRhTG9hZEV2ZW50PW51bGw7dGhpcy5vTWV0YWRhdGFGYWlsZWRFdmVudD1udWxsO2lmKHRoaXMuc0Fubm90YXRpb25VUkkpe3Euc2FwLnJlcXVpcmUoInNhcC51aS5tb2RlbC5vZGF0YS5PRGF0YUFubm90YXRpb25zIil9dGhpcy5vSGVhZGVycz17fTt0aGlzLnNldEhlYWRlcnMoaCk7dGhpcy5vRGF0YT17fTt0aGlzLm9NZXRhZGF0YT1udWxsO3RoaXMub0Fubm90YXRpb25zPW51bGw7dGhpcy5hVXJsUGFyYW1zPVtdO2lmKHMuaW5kZXhPZigiPyIpPT0tMSl7dGhpcy5zU2VydmljZVVybD1zfWVsc2V7dmFyIHg9cy5zcGxpdCgiPyIpO3RoaXMuc1NlcnZpY2VVcmw9eFswXTt0aGlzLmFVcmxQYXJhbXMucHVzaCh4WzFdKX1pZihzYXAudWkuZ2V0Q29yZSgpLmdldENvbmZpZ3VyYXRpb24oKS5nZXRTdGF0aXN0aWNzKCkpe3RoaXMuYVVybFBhcmFtcy5wdXNoKCJzYXAtc3RhdGlzdGljcz10cnVlIil9dGhpcy5zU2VydmljZVVybD10aGlzLnNTZXJ2aWNlVXJsLnJlcGxhY2UoL1wvJC8sIiIpO3RoaXMub1NlcnZpY2VEYXRhPWcubVNlcnZpY2VEYXRhW3RoaXMuc1NlcnZpY2VVcmxdO2lmKCF0aGlzLm9TZXJ2aWNlRGF0YSl7Zy5tU2VydmljZURhdGFbdGhpcy5zU2VydmljZVVybF09e307dGhpcy5vU2VydmljZURhdGE9Zy5tU2VydmljZURhdGFbdGhpcy5zU2VydmljZVVybF19aWYodGhpcy5iVG9rZW5IYW5kbGluZyYmdGhpcy5vU2VydmljZURhdGEuc2VjdXJpdHlUb2tlbil7dGhpcy5vSGVhZGVyc1sieC1jc3JmLXRva2VuIl09dGhpcy5vU2VydmljZURhdGEuc2VjdXJpdHlUb2tlbn10aGlzLnNVc2VyPXU7dGhpcy5zUGFzc3dvcmQ9cDt0aGlzLm9IZWFkZXJzWyJBY2NlcHQtTGFuZ3VhZ2UiXT1zYXAudWkuZ2V0Q29yZSgpLmdldENvbmZpZ3VyYXRpb24oKS5nZXRMYW5ndWFnZSgpO2lmKCF0aGlzLm9TZXJ2aWNlRGF0YS5vTWV0YWRhdGEpe3RoaXMub01ldGFkYXRhPW5ldyBzYXAudWkubW9kZWwub2RhdGEuT0RhdGFNZXRhZGF0YSh0aGlzLl9jcmVhdGVSZXF1ZXN0VXJsKCIkbWV0YWRhdGEiLHVuZGVmaW5lZCxvKSx7YXN5bmM6dGhpcy5iTG9hZE1ldGFkYXRhQXN5bmMsdXNlcjp0aGlzLnNVc2VyLHBhc3N3b3JkOnRoaXMuc1Bhc3N3b3JkLGhlYWRlcnM6dGhpcy5tQ3VzdG9tSGVhZGVycyxuYW1lc3BhY2VzOm4sd2l0aENyZWRlbnRpYWxzOnRoaXMuYldpdGhDcmVkZW50aWFsc30pO3Yub1NlcnZpY2VEYXRhLm9NZXRhZGF0YT12Lm9NZXRhZGF0YX1lbHNle3RoaXMub01ldGFkYXRhPXRoaXMub1NlcnZpY2VEYXRhLm9NZXRhZGF0YX1pZihTKXt0aGlzLmFVcmxQYXJhbXM9dGhpcy5hVXJsUGFyYW1zLmNvbmNhdChPLl9jcmVhdGVVcmxQYXJhbXNBcnJheShTKSl9aWYoIXRoaXMub01ldGFkYXRhLmlzTG9hZGVkKCkpe3RoaXMub01ldGFkYXRhLmF0dGFjaExvYWRlZChmdW5jdGlvbihFKXt2Ll9pbml0aWFsaXplTWV0YWRhdGEoKTt2LmluaXRpYWxpemUoKX0sdGhpcyk7dGhpcy5vTWV0YWRhdGEuYXR0YWNoRmFpbGVkKHRoaXMuZmlyZU1ldGFkYXRhRmFpbGVkLHRoaXMpfWlmKHRoaXMuc0Fubm90YXRpb25VUkkpe3RoaXMub0Fubm90YXRpb25zPW5ldyBzYXAudWkubW9kZWwub2RhdGEuT0RhdGFBbm5vdGF0aW9ucyh0aGlzLnNBbm5vdGF0aW9uVVJJLHRoaXMub01ldGFkYXRhLHthc3luYzp0aGlzLmJMb2FkTWV0YWRhdGFBc3luY30pO3RoaXMub0Fubm90YXRpb25zLmF0dGFjaEZhaWxlZCh0aGlzLmZpcmVBbm5vdGF0aW9uc0ZhaWxlZCx0aGlzKTt0aGlzLm9Bbm5vdGF0aW9ucy5hdHRhY2hMb2FkZWQodGhpcy5maXJlQW5ub3RhdGlvbnNMb2FkZWQsdGhpcyl9aWYodGhpcy5vTWV0YWRhdGEuaXNMb2FkZWQoKSl7dGhpcy5faW5pdGlhbGl6ZU1ldGFkYXRhKHRydWUpfWlmKHRoaXMuYkpTT04pe2lmKHRoaXMuc01heERhdGFTZXJ2aWNlVmVyc2lvbj09PSIzLjAiKXt0aGlzLm9IZWFkZXJzWyJBY2NlcHQiXT0iYXBwbGljYXRpb24vanNvbjtvZGF0YT1mdWxsbWV0YWRhdGEifWVsc2V7dGhpcy5vSGVhZGVyc1siQWNjZXB0Il09ImFwcGxpY2F0aW9uL2pzb24ifXRoaXMub0hhbmRsZXI9T0RhdGEuanNvbkhhbmRsZXJ9ZWxzZXt0aGlzLm9IZWFkZXJzWyJBY2NlcHQiXT0iYXBwbGljYXRpb24vYXRvbSt4bWwsYXBwbGljYXRpb24vYXRvbXN2Yyt4bWwsYXBwbGljYXRpb24veG1sIjt0aGlzLm9IYW5kbGVyPU9EYXRhLmF0b21IYW5kbGVyfXRoaXMub0hlYWRlcnNbIk1heERhdGFTZXJ2aWNlVmVyc2lvbiJdPSIyLjAiO2lmKHRoaXMuc01heERhdGFTZXJ2aWNlVmVyc2lvbil7dGhpcy5vSGVhZGVyc1siTWF4RGF0YVNlcnZpY2VWZXJzaW9uIl09dGhpcy5zTWF4RGF0YVNlcnZpY2VWZXJzaW9ufXRoaXMub0hlYWRlcnNbIkRhdGFTZXJ2aWNlVmVyc2lvbiJdPSIyLjAifSxtZXRhZGF0YTp7cHVibGljTWV0aG9kczpbImNyZWF0ZSIsInJlbW92ZSIsInVwZGF0ZSIsInN1Ym1pdENoYW5nZXMiLCJnZXRTZXJ2aWNlTWV0YWRhdGEiLCJyZWFkIiwiaGFzUGVuZGluZ0NoYW5nZXMiLCJyZWZyZXNoIiwicmVzZXRDaGFuZ2VzIiwiaXNDb3VudFN1cHBvcnRlZCIsInNldENvdW50U3VwcG9ydGVkIiwic2V0RGVmYXVsdENvdW50TW9kZSIsImdldERlZmF1bHRDb3VudE1vZGUiLCJmb3JjZU5vQ2FjaGUiLCJzZXRQcm9wZXJ0eSIsInJlZnJlc2hTZWN1cml0eVRva2VuIiwic2V0SGVhZGVycyIsImdldEhlYWRlcnMiLCJzZXRVc2VCYXRjaCJdfX0pO2cuTV9FVkVOVFM9e1JlamVjdENoYW5nZToicmVqZWN0Q2hhbmdlIixNZXRhZGF0YUxvYWRlZDoibWV0YWRhdGFMb2FkZWQiLE1ldGFkYXRhRmFpbGVkOiJtZXRhZGF0YUZhaWxlZCIsQW5ub3RhdGlvbnNMb2FkZWQ6ImFubm90YXRpb25zTG9hZGVkIixBbm5vdGF0aW9uc0ZhaWxlZDoiYW5ub3RhdGlvbnNGYWlsZWQifTtnLm1TZXJ2aWNlRGF0YT17fTtnLnByb3RvdHlwZS5maXJlUmVqZWN0Q2hhbmdlPWZ1bmN0aW9uKEEpe3RoaXMuZmlyZUV2ZW50KCJyZWplY3RDaGFuZ2UiLEEpO3JldHVybiB0aGlzfTtnLnByb3RvdHlwZS5hdHRhY2hSZWplY3RDaGFuZ2U9ZnVuY3Rpb24oRCxGLGwpe3RoaXMuYXR0YWNoRXZlbnQoInJlamVjdENoYW5nZSIsRCxGLGwpO3JldHVybiB0aGlzfTtnLnByb3RvdHlwZS5kZXRhY2hSZWplY3RDaGFuZ2U9ZnVuY3Rpb24oRixsKXt0aGlzLmRldGFjaEV2ZW50KCJyZWplY3RDaGFuZ2UiLEYsbCk7cmV0dXJuIHRoaXN9O2cucHJvdG90eXBlLl9pbml0aWFsaXplTWV0YWRhdGE9ZnVuY3Rpb24oRCl7dmFyIHQ9dGhpczt0aGlzLmJVc2VCYXRjaD10aGlzLmJVc2VCYXRjaHx8dGhpcy5vTWV0YWRhdGEuZ2V0VXNlQmF0Y2goKTt2YXIgaD1mdW5jdGlvbihpKXtpZighIWkpe3QubWV0YWRhdGFMb2FkRXZlbnQ9cS5zYXAuZGVsYXllZENhbGwoMCx0LGgpfWVsc2V7dC5maXJlTWV0YWRhdGFMb2FkZWQoe21ldGFkYXRhOnQub01ldGFkYXRhfSk7cS5zYXAubG9nLmRlYnVnKCJPRGF0YU1vZGVsIGZpcmVkIG1ldGFkYXRhbG9hZGVkIil9fTtpZih0aGlzLmJMb2FkTWV0YWRhdGFBc3luYyYmdGhpcy5zQW5ub3RhdGlvblVSSSYmdGhpcy5iTG9hZEFubm90YXRpb25zSm9pbmVkKXtpZih0aGlzLm9Bbm5vdGF0aW9ucyYmdGhpcy5vQW5ub3RhdGlvbnMuYkluaXRpYWxpemVkKXtoKCl9ZWxzZXt0aGlzLm9Bbm5vdGF0aW9ucy5hdHRhY2hMb2FkZWQoZnVuY3Rpb24oKXtoKCl9LHRoaXMpfX1lbHNle2goRCl9fTtnLnByb3RvdHlwZS5maXJlQW5ub3RhdGlvbnNMb2FkZWQ9ZnVuY3Rpb24oQSl7dGhpcy5maXJlRXZlbnQoImFubm90YXRpb25zTG9hZGVkIixBKTtyZXR1cm4gdGhpc307Zy5wcm90b3R5cGUuYXR0YWNoQW5ub3RhdGlvbnNMb2FkZWQ9ZnVuY3Rpb24oRCxGLGwpe3RoaXMuYXR0YWNoRXZlbnQoImFubm90YXRpb25zTG9hZGVkIixELEYsbCk7cmV0dXJuIHRoaXN9O2cucHJvdG90eXBlLmRldGFjaEFubm90YXRpb25zTG9hZGVkPWZ1bmN0aW9uKEYsbCl7dGhpcy5kZXRhY2hFdmVudCgiYW5ub3RhdGlvbnNMb2FkZWQiLEYsbCk7cmV0dXJuIHRoaXN9O2cucHJvdG90eXBlLmZpcmVBbm5vdGF0aW9uc0ZhaWxlZD1mdW5jdGlvbihBKXt0aGlzLmZpcmVFdmVudCgiYW5ub3RhdGlvbnNGYWlsZWQiLEEpO3Euc2FwLmxvZy5kZWJ1ZygiT0RhdGFNb2RlbCBmaXJlZCBhbm5vdGF0aW9uc2ZhaWxlZCIpO3JldHVybiB0aGlzfTtnLnByb3RvdHlwZS5hdHRhY2hBbm5vdGF0aW9uc0ZhaWxlZD1mdW5jdGlvbihELEYsbCl7dGhpcy5hdHRhY2hFdmVudCgiYW5ub3RhdGlvbnNGYWlsZWQiLEQsRixsKTtyZXR1cm4gdGhpc307Zy5wcm90b3R5cGUuZGV0YWNoQW5ub3RhdGlvbnNGYWlsZWQ9ZnVuY3Rpb24oRixsKXt0aGlzLmRldGFjaEV2ZW50KCJhbm5vdGF0aW9uc0ZhaWxlZCIsRixsKTtyZXR1cm4gdGhpc307Zy5wcm90b3R5cGUuZmlyZU1ldGFkYXRhTG9hZGVkPWZ1bmN0aW9uKEEpe3RoaXMuZmlyZUV2ZW50KCJtZXRhZGF0YUxvYWRlZCIsQSk7cmV0dXJuIHRoaXN9O2cucHJvdG90eXBlLmF0dGFjaE1ldGFkYXRhTG9hZGVkPWZ1bmN0aW9uKEQsRixsKXt0aGlzLmF0dGFjaEV2ZW50KCJtZXRhZGF0YUxvYWRlZCIsRCxGLGwpO3JldHVybiB0aGlzfTtnLnByb3RvdHlwZS5kZXRhY2hNZXRhZGF0YUxvYWRlZD1mdW5jdGlvbihGLGwpe3RoaXMuZGV0YWNoRXZlbnQoIm1ldGFkYXRhTG9hZGVkIixGLGwpO3JldHVybiB0aGlzfTtnLnByb3RvdHlwZS5maXJlTWV0YWRhdGFGYWlsZWQ9ZnVuY3Rpb24oQSl7dGhpcy5maXJlRXZlbnQoIm1ldGFkYXRhRmFpbGVkIixBKTtyZXR1cm4gdGhpc307Zy5wcm90b3R5cGUuYXR0YWNoTWV0YWRhdGFGYWlsZWQ9ZnVuY3Rpb24oRCxGLGwpe3RoaXMuYXR0YWNoRXZlbnQoIm1ldGFkYXRhRmFpbGVkIixELEYsbCk7cmV0dXJuIHRoaXN9O2cucHJvdG90eXBlLmRldGFjaE1ldGFkYXRhRmFpbGVkPWZ1bmN0aW9uKEYsbCl7dGhpcy5kZXRhY2hFdmVudCgibWV0YWRhdGFGYWlsZWQiLEYsbCk7cmV0dXJuIHRoaXN9O2cucHJvdG90eXBlLl9jcmVhdGVSZXF1ZXN0VXJsPWZ1bmN0aW9uKHAsbyx1LEIsaCl7dmFyIGkscixzLGo9IiI7aWYocCYmcC5pbmRleE9mKCc/JykhPS0xKXtzPXAuc3Vic3RyKHAuaW5kZXhPZignPycpKzEpO3A9cC5zdWJzdHIoMCxwLmluZGV4T2YoJz8nKSl9cj10aGlzLl9ub3JtYWxpemVQYXRoKHAsbyk7aWYoIUIpe2o9dGhpcy5zU2VydmljZVVybCtyfWVsc2V7aj1yLnN1YnN0cihyLmluZGV4T2YoJy8nKSsxKX1pPU8uX2NyZWF0ZVVybFBhcmFtc0FycmF5KHUpO2lmKHRoaXMuYVVybFBhcmFtcyl7aT1pLmNvbmNhdCh0aGlzLmFVcmxQYXJhbXMpfWlmKHMpe2kucHVzaChzKX1pZihpLmxlbmd0aD4wKXtqKz0iPyIraS5qb2luKCImIil9aWYoaD09PXVuZGVmaW5lZCl7aD10cnVlfWlmKGg9PT1mYWxzZSl7dmFyIHQ9cS5ub3coKTt2YXIgaz1qLnJlcGxhY2UoLyhbPyZdKV89W14mXSovLCIkMV89Iit0KTtqPWsrKChrPT09aik/KC9cPy8udGVzdChqKT8iJiI6Ij8iKSsiXz0iK3Q6IiIpfXJldHVybiBqfTtnLnByb3RvdHlwZS5fbG9hZERhdGE9ZnVuY3Rpb24ocCxQLHMsRSxoLEgsaSl7dmFyIHIsUixvLHQ9dGhpcztmdW5jdGlvbiBfKEQsbSl7dmFyIG49RCx2PXt9O2lmKCFuKXtxLnNhcC5sb2cuZmF0YWwoIlRoZSBmb2xsb3dpbmcgcHJvYmxlbSBvY2N1cnJlZDogTm8gZGF0YSB3YXMgcmV0cmlldmVkIGJ5IHNlcnZpY2U6ICIrbS5yZXF1ZXN0VXJpKTt0LmZpcmVSZXF1ZXN0Q29tcGxldGVkKHt1cmw6by5yZXF1ZXN0VXJpLHR5cGU6IkdFVCIsYXN5bmM6by5hc3luYyxpbmZvOiJBY2NlcHQgaGVhZGVyczoiK3Qub0hlYWRlcnNbIkFjY2VwdCJdLGluZm9PYmplY3Q6e2FjY2VwdEhlYWRlcnM6dC5vSGVhZGVyc1siQWNjZXB0Il19LHN1Y2Nlc3M6ZmFsc2V9KTtyZXR1cm4gZmFsc2V9aWYodC5iVXNlQmF0Y2gpe3ZhciB3PXQuX2dldEJhdGNoRXJyb3JzKEQpO2lmKHcubGVuZ3RoPjApe2ood1swXSk7cmV0dXJuIGZhbHNlfWlmKG4uX19iYXRjaFJlc3BvbnNlcyYmbi5fX2JhdGNoUmVzcG9uc2VzLmxlbmd0aD4wKXtuPW4uX19iYXRjaFJlc3BvbnNlc1swXS5kYXRhfWVsc2V7cS5zYXAubG9nLmZhdGFsKCJUaGUgZm9sbG93aW5nIHByb2JsZW0gb2NjdXJyZWQ6IE5vIGRhdGEgd2FzIHJldHJpZXZlZCBieSBzZXJ2aWNlOiAiK20ucmVxdWVzdFVyaSl9fWw9bC5jb25jYXQobi5yZXN1bHRzKTtpZihuLl9fbmV4dCl7dmFyIHg9bmV3IFVSSShuLl9fbmV4dCk7by5yZXF1ZXN0VXJpPXguYWJzb2x1dGVUbyhtLnJlcXVlc3RVcmkpLnRvU3RyaW5nKCk7ayhvKX1lbHNle3EuZXh0ZW5kKG4ucmVzdWx0cyxsKTtpZihuLnJlc3VsdHMmJiFxLmlzQXJyYXkobi5yZXN1bHRzKSl7bj1uLnJlc3VsdHN9dC5faW1wb3J0RGF0YShuLHYpO2lmKHQuc0NoYW5nZUtleSYmdil7dmFyIHk9dC5zQ2hhbmdlS2V5LnN1YnN0cih0LnNDaGFuZ2VLZXkubGFzdEluZGV4T2YoJy8nKSsxKTtpZih2W3ldKXtkZWxldGUgdC5vUmVxdWVzdFF1ZXVlW3Quc0NoYW5nZUtleV07dC5zQ2hhbmdlS2V5PW51bGx9fWlmKHMpe3Mobil9dC5jaGVja1VwZGF0ZShmYWxzZSx2KTtpZihpKXtpKG4pfXQuZmlyZVJlcXVlc3RDb21wbGV0ZWQoe3VybDpvLnJlcXVlc3RVcmksdHlwZToiR0VUIixhc3luYzpvLmFzeW5jLGluZm86IkFjY2VwdCBoZWFkZXJzOiIrdC5vSGVhZGVyc1siQWNjZXB0Il0saW5mb09iamVjdDp7YWNjZXB0SGVhZGVyczp0Lm9IZWFkZXJzWyJBY2NlcHQiXX0sc3VjY2Vzczp0cnVlfSl9fWZ1bmN0aW9uIGoobSl7aWYodC5iVG9rZW5IYW5kbGluZyYmbS5yZXNwb25zZSl7dmFyIFQ9dC5fZ2V0SGVhZGVyKCJ4LWNzcmYtdG9rZW4iLG0ucmVzcG9uc2UuaGVhZGVycyk7aWYoIW8uYlRva2VuUmVzZXQmJm0ucmVzcG9uc2Uuc3RhdHVzQ29kZT09JzQwMycmJlQmJlQudG9Mb3dlckNhc2UoKT09InJlcXVpcmVkIil7dC5yZXNldFNlY3VyaXR5VG9rZW4oKTtvLmJUb2tlblJlc2V0PXRydWU7aygpO3JldHVybn19dmFyIG49dC5faGFuZGxlRXJyb3IobSk7aWYoRSl7RShtLHImJnIuYkFib3J0ZWQpfXQuZmlyZVJlcXVlc3RDb21wbGV0ZWQoe3VybDpvLnJlcXVlc3RVcmksdHlwZToiR0VUIixhc3luYzpvLmFzeW5jLGluZm86IkFjY2VwdCBoZWFkZXJzOiIrdC5vSGVhZGVyc1siQWNjZXB0Il0saW5mb09iamVjdDp7YWNjZXB0SGVhZGVyczp0Lm9IZWFkZXJzWyJBY2NlcHQiXX0sc3VjY2VzczpmYWxzZSxlcnJvcm9iamVjdDpufSk7aWYoIXJ8fCFyLmJBYm9ydGVkKXtuLnVybD1vLnJlcXVlc3RVcmk7dC5maXJlUmVxdWVzdEZhaWxlZChuKX19ZnVuY3Rpb24gaygpe2lmKHQuYlVzZUJhdGNoKXt0LnVwZGF0ZVNlY3VyaXR5VG9rZW4oKTt2YXIgbT1VUkkucGFyc2Uoby5yZXF1ZXN0VXJpKS5xdWVyeTt2YXIgbj10Ll9jcmVhdGVSZXF1ZXN0VXJsKHAsbnVsbCxtLHQuYlVzZUJhdGNoKTtvPXQuX2NyZWF0ZVJlcXVlc3QobiwiR0VUIix0cnVlKTt2YXIgQj10Ll9jcmVhdGVCYXRjaFJlcXVlc3QoW29dLHRydWUpO3I9dC5fcmVxdWVzdChCLF8saixPRGF0YS5iYXRjaEhhbmRsZXIsdW5kZWZpbmVkLHQuZ2V0U2VydmljZU1ldGFkYXRhKCkpfWVsc2V7cj10Ll9yZXF1ZXN0KG8sXyxqLHQub0hhbmRsZXIsdW5kZWZpbmVkLHQuZ2V0U2VydmljZU1ldGFkYXRhKCkpfWlmKEgpe3ZhciB3PXthYm9ydDpmdW5jdGlvbigpe3IuYkFib3J0ZWQ9dHJ1ZTtyLmFib3J0KCl9fTtIKHcpfX12YXIgbD1bXTt2YXIgdT10aGlzLl9jcmVhdGVSZXF1ZXN0VXJsKHAsbnVsbCxQLG51bGwsaHx8dGhpcy5iQ2FjaGUpO289dGhpcy5fY3JlYXRlUmVxdWVzdCh1LCJHRVQiLHRydWUpO3RoaXMuZmlyZVJlcXVlc3RTZW50KHt1cmw6by5yZXF1ZXN0VXJpLHR5cGU6IkdFVCIsYXN5bmM6by5hc3luYyxpbmZvOiJBY2NlcHQgaGVhZGVyczoiK3RoaXMub0hlYWRlcnNbIkFjY2VwdCJdLGluZm9PYmplY3Q6e2FjY2VwdEhlYWRlcnM6dGhpcy5vSGVhZGVyc1siQWNjZXB0Il19fSk7aygpfTtnLnByb3RvdHlwZS5faW1wb3J0RGF0YT1mdW5jdGlvbihELGspe3ZhciB0PXRoaXMsbCxLLHIsRTtpZihELnJlc3VsdHMpe2w9W107cS5lYWNoKEQucmVzdWx0cyxmdW5jdGlvbihpLGgpe2wucHVzaCh0Ll9pbXBvcnREYXRhKGgsaykpfSk7cmV0dXJuIGx9ZWxzZXtLPXRoaXMuX2dldEtleShEKTtFPXRoaXMub0RhdGFbS107aWYoIUUpe0U9RDt0aGlzLm9EYXRhW0tdPUV9cS5lYWNoKEQsZnVuY3Rpb24obixwKXtpZihwJiYocC5fX21ldGFkYXRhJiZwLl9fbWV0YWRhdGEudXJpfHxwLnJlc3VsdHMpJiYhcC5fX2RlZmVycmVkKXtyPXQuX2ltcG9ydERhdGEocCxrKTtpZihxLmlzQXJyYXkocikpe0Vbbl09e19fbGlzdDpyfX1lbHNle0Vbbl09e19fcmVmOnJ9fX1lbHNlIGlmKCFwfHwhcC5fX2RlZmVycmVkKXtFW25dPXB9fSk7a1tLXT10cnVlO3JldHVybiBLfX07Zy5wcm90b3R5cGUuX3JlbW92ZVJlZmVyZW5jZXM9ZnVuY3Rpb24oRCl7dmFyIHQ9dGhpcyxsO2lmKEQucmVzdWx0cyl7bD1bXTtxLmVhY2goRC5yZXN1bHRzLGZ1bmN0aW9uKGksaCl7bC5wdXNoKHQuX3JlbW92ZVJlZmVyZW5jZXMoaCkpfSk7cmV0dXJuIGx9ZWxzZXtxLmVhY2goRCxmdW5jdGlvbihwLG8pe2lmKG8pe2lmKG9bIl9fcmVmIl18fG9bIl9fbGlzdCJdKXtkZWxldGUgRFtwXX19fSk7cmV0dXJuIER9fTtnLnByb3RvdHlwZS5fcmVzdG9yZVJlZmVyZW5jZXM9ZnVuY3Rpb24oRCl7dmFyIHQ9dGhpcyxvLGwscj1bXTtpZihELnJlc3VsdHMpe2w9W107cS5lYWNoKEQucmVzdWx0cyxmdW5jdGlvbihpLGgpe2wucHVzaCh0Ll9yZXN0b3JlUmVmZXJlbmNlcyhoKSl9KTtyZXR1cm4gbH1lbHNle3EuZWFjaChELGZ1bmN0aW9uKHAsbyl7aWYobyYmb1siX19yZWYiXSl7dmFyIGg9dC5fZ2V0T2JqZWN0KCIvIitvWyJfX3JlZiJdKTtpZihoKXtkZWxldGUgb1siX19yZWYiXTtEW3BdPWg7dC5fcmVzdG9yZVJlZmVyZW5jZXMoaCl9fWVsc2UgaWYobyYmb1siX19saXN0Il0pe3EuZWFjaChvWyJfX2xpc3QiXSxmdW5jdGlvbihqLEUpe3ZhciBoPXQuX2dldE9iamVjdCgiLyIrb1siX19saXN0Il1bal0pO2lmKGgpe3IucHVzaChoKTt0Ll9yZXN0b3JlUmVmZXJlbmNlcyhoKX19KTtkZWxldGUgb1siX19saXN0Il07by5yZXN1bHRzPXI7cj1bXX19KTtyZXR1cm4gRH19O2cucHJvdG90eXBlLnJlbW92ZURhdGE9ZnVuY3Rpb24oKXt0aGlzLm9EYXRhPXt9fTtnLnByb3RvdHlwZS5pbml0aWFsaXplPWZ1bmN0aW9uKCl7dmFyIEI9dGhpcy5hQmluZGluZ3Muc2xpY2UoMCk7cS5lYWNoKEIsZnVuY3Rpb24oaSxvKXtvLmluaXRpYWxpemUoKX0pfTtnLnByb3RvdHlwZS5yZWZyZXNoPWZ1bmN0aW9uKEYscil7aWYocil7dGhpcy5yZW1vdmVEYXRhKCl9dGhpcy5fcmVmcmVzaChGKX07Zy5wcm90b3R5cGUuX3JlZnJlc2g9ZnVuY3Rpb24oRixtLEUpe3ZhciBCPXRoaXMuYUJpbmRpbmdzLnNsaWNlKDApO3EuZWFjaChCLGZ1bmN0aW9uKGksbyl7by5yZWZyZXNoKEYsbSxFKX0pfTtnLnByb3RvdHlwZS5jaGVja1VwZGF0ZT1mdW5jdGlvbihGLG0pe3ZhciBCPXRoaXMuYUJpbmRpbmdzLnNsaWNlKDApO3EuZWFjaChCLGZ1bmN0aW9uKGksbyl7by5jaGVja1VwZGF0ZShGLG0pfSl9O2cucHJvdG90eXBlLmJpbmRQcm9wZXJ0eT1mdW5jdGlvbihwLG8sUCl7dmFyIEI9bmV3IGQodGhpcyxwLG8sUCk7cmV0dXJuIEJ9O2cucHJvdG90eXBlLmJpbmRMaXN0PWZ1bmN0aW9uKHAsbyxzLEYsUCl7dmFyIEI9bmV3IGIodGhpcyxwLG8scyxGLFApO3JldHVybiBCfTtnLnByb3RvdHlwZS5iaW5kVHJlZT1mdW5jdGlvbihwLG8sRixQKXt2YXIgQj1uZXcgZSh0aGlzLHAsbyxGLFApO3JldHVybiBCfTtnLnByb3RvdHlwZS5jcmVhdGVCaW5kaW5nQ29udGV4dD1mdW5jdGlvbihwLG8sUCxoLHIpe3ZhciByPSEhcixGPXRoaXMucmVzb2x2ZShwLG8pO2lmKHR5cGVvZiBvPT0iZnVuY3Rpb24iKXtoPW87bz1udWxsfWlmKHR5cGVvZiBQPT0iZnVuY3Rpb24iKXtoPVA7UD1udWxsfXZhciBEPXRoaXMuX2dldE9iamVjdChwLG8pLGssbix0PXRoaXM7aWYoIXIpe3I9dGhpcy5faXNSZWxvYWROZWVkZWQoRixELFApfWlmKCFyKXtrPXRoaXMuX2dldEtleShEKTtuPXRoaXMuZ2V0Q29udGV4dCgnLycrayk7aChuKX1lbHNle3ZhciBpPSFxLnNhcC5zdGFydHNXaXRoKHAsIi8iKTtpZihGKXt2YXIgaj1bXSxzPXRoaXMuY3JlYXRlQ3VzdG9tUGFyYW1zKFApO2lmKHMpe2oucHVzaChzKX10aGlzLl9sb2FkRGF0YShGLGosZnVuY3Rpb24oRCl7az1EP3QuX2dldEtleShEKTp1bmRlZmluZWQ7aWYoayYmbyYmaSl7dmFyIGw9by5nZXRQYXRoKCk7bD1sLnN1YnN0cigxKTtpZih0Lm9EYXRhW2xdKXt0Lm9EYXRhW2xdW3BdPXtfX3JlZjprfX19bj10LmdldENvbnRleHQoJy8nK2spO2gobil9LGZ1bmN0aW9uKCl7aChudWxsKX0pfWVsc2V7aChudWxsKX19fTtnLnByb3RvdHlwZS5faXNSZWxvYWROZWVkZWQ9ZnVuY3Rpb24oRixELHApe3ZhciBuLE49W10saCxzLFM9W107aWYoIUQpe3JldHVybiB0cnVlfWlmKHAmJnBbImV4cGFuZCJdKXtuPXBbImV4cGFuZCJdLnJlcGxhY2UoL1xzL2csIiIpO049bi5zcGxpdCgnLCcpfWlmKE4pe2Zvcih2YXIgaT0wO2k8Ti5sZW5ndGg7aSsrKXt2YXIgaj1OW2ldLmluZGV4T2YoIi8iKTtpZihqIT09LTEpe3ZhciBrPU5baV0uc2xpY2UoMCxqKTt2YXIgbD1OW2ldLnNsaWNlKGorMSk7TltpXT1bayxsXX19fWZvcih2YXIgaT0wO2k8Ti5sZW5ndGg7aSsrKXt2YXIgbT1OW2ldO2lmKHEuaXNBcnJheShtKSl7dmFyIG89RFttWzBdXTt2YXIgcj1tWzFdO2lmKCFvfHwobyYmby5fX2RlZmVycmVkKSl7cmV0dXJuIHRydWV9ZWxzZXtpZihvKXtpZihvLl9fbGlzdCYmby5fX2xpc3QubGVuZ3RoPjApe2Zvcih2YXIgdD0wO3Q8by5fX2xpc3QubGVuZ3RoO3QrKyl7dmFyIFA9Ii8iK28uX19saXN0W3RdO3ZhciB1PXRoaXMuZ2V0T2JqZWN0KFApO3ZhciBSPXRoaXMuX2lzUmVsb2FkTmVlZGVkKFAsdSx7ZXhwYW5kOnJ9KTtpZihSKXtyZXR1cm4gdHJ1ZX19fWVsc2UgaWYoby5fX3JlZil7dmFyIFA9Ii8iK28uX19yZWY7dmFyIHU9dGhpcy5nZXRPYmplY3QoUCk7dmFyIFI9dGhpcy5faXNSZWxvYWROZWVkZWQoUCx1LHtleHBhbmQ6cn0pO2lmKFIpe3JldHVybiB0cnVlfX19fX1lbHNle2lmKERbbV09PT11bmRlZmluZWR8fChEW21dJiZEW21dLl9fZGVmZXJyZWQpKXtyZXR1cm4gdHJ1ZX19fWlmKHAmJnBbInNlbGVjdCJdKXtzPXBbInNlbGVjdCJdLnJlcGxhY2UoL1xzL2csIiIpO1M9cy5zcGxpdCgnLCcpfWZvcih2YXIgaT0wO2k8Uy5sZW5ndGg7aSsrKXtpZihEW1NbaV1dPT09dW5kZWZpbmVkKXtyZXR1cm4gdHJ1ZX19aWYoUy5sZW5ndGg9PTApe3ZhciBFPXRoaXMub01ldGFkYXRhLl9nZXRFbnRpdHlUeXBlQnlQYXRoKEYpO2lmKCFFKXtyZXR1cm4gZmFsc2V9ZWxzZXtmb3IodmFyIGk9MDtpPEUucHJvcGVydHkubGVuZ3RoO2krKyl7aWYoRFtFLnByb3BlcnR5W2ldLm5hbWVdPT09dW5kZWZpbmVkKXtyZXR1cm4gdHJ1ZX19fX1yZXR1cm4gZmFsc2V9O2cucHJvdG90eXBlLmRlc3Ryb3lCaW5kaW5nQ29udGV4dD1mdW5jdGlvbihvKXt9O2cucHJvdG90eXBlLmNyZWF0ZUN1c3RvbVBhcmFtcz1mdW5jdGlvbihwKXt2YXIgaD1bXSxtLHM9e2V4cGFuZDp0cnVlLHNlbGVjdDp0cnVlfTtmb3IodmFyIG4gaW4gcCl7aWYobiBpbiBzKXtoLnB1c2goIiQiK24rIj0iK3Euc2FwLmVuY29kZVVSTChwW25dKSl9aWYobj09ImN1c3RvbSIpe209cFtuXTtmb3IodmFyIG4gaW4gbSl7aWYobi5pbmRleE9mKCIkIik9PTApe3Euc2FwLmxvZy53YXJuaW5nKCJUcnlpbmcgdG8gc2V0IE9EYXRhIHBhcmFtZXRlciAiK24rIiBhcyBjdXN0b20gcXVlcnkgb3B0aW9uISIpfWVsc2V7aC5wdXNoKG4rIj0iK3Euc2FwLmVuY29kZVVSTChtW25dKSl9fX19cmV0dXJuIGguam9pbigiJiIpfTtnLnByb3RvdHlwZS5iaW5kQ29udGV4dD1mdW5jdGlvbihwLG8sUCl7dmFyIEI9bmV3IGEodGhpcyxwLG8sUCk7cmV0dXJuIEJ9O2cucHJvdG90eXBlLnNldENvdW50U3VwcG9ydGVkPWZ1bmN0aW9uKGgpe3RoaXMuYkNvdW50U3VwcG9ydGVkPWh9O2cucHJvdG90eXBlLmlzQ291bnRTdXBwb3J0ZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5iQ291bnRTdXBwb3J0ZWR9O2cucHJvdG90eXBlLnNldERlZmF1bHRDb3VudE1vZGU9ZnVuY3Rpb24ocyl7dGhpcy5zRGVmYXVsdENvdW50TW9kZT1zfTtnLnByb3RvdHlwZS5nZXREZWZhdWx0Q291bnRNb2RlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc0RlZmF1bHRDb3VudE1vZGV9O2cucHJvdG90eXBlLl9nZXRLZXk9ZnVuY3Rpb24obyxEKXt2YXIgayx1O2lmKG8gaW5zdGFuY2VvZiBzYXAudWkubW9kZWwuQ29udGV4dCl7az1vLmdldFBhdGgoKS5zdWJzdHIoMSl9ZWxzZSBpZihvJiZvLl9fbWV0YWRhdGEmJm8uX19tZXRhZGF0YS51cmkpe3U9by5fX21ldGFkYXRhLnVyaTtrPXUuc3Vic3RyKHUubGFzdEluZGV4T2YoIi8iKSsxKX1pZihEKWs9ZGVjb2RlVVJJQ29tcG9uZW50KGspO3JldHVybiBrfTtnLnByb3RvdHlwZS5nZXRLZXk9ZnVuY3Rpb24obyxEKXtyZXR1cm4gdGhpcy5fZ2V0S2V5KG8sRCl9O2cucHJvdG90eXBlLmNyZWF0ZUtleT1mdW5jdGlvbihzLGssRCl7dmFyIEU9dGhpcy5vTWV0YWRhdGEuX2dldEVudGl0eVR5cGVCeVBhdGgocyksSz1zLHQ9dGhpcyxoLG4sdixwO0srPSIoIjtpZihFLmtleS5wcm9wZXJ0eVJlZi5sZW5ndGg9PTEpe249RS5rZXkucHJvcGVydHlSZWZbMF0ubmFtZTtwPXRoaXMub01ldGFkYXRhLl9nZXRQcm9wZXJ0eU1ldGFkYXRhKEUsbik7dj1PLmZvcm1hdFZhbHVlKGtbbl0scC50eXBlKTtLKz1EP3Y6ZW5jb2RlVVJJQ29tcG9uZW50KHYpfWVsc2V7cS5lYWNoKEUua2V5LnByb3BlcnR5UmVmLGZ1bmN0aW9uKGksUCl7aWYoaT4wKUsrPSIsIjtuPVAubmFtZTtwPXQub01ldGFkYXRhLl9nZXRQcm9wZXJ0eU1ldGFkYXRhKEUsbik7dj1PLmZvcm1hdFZhbHVlKGtbbl0scC50eXBlKTtLKz1uO0srPSI9IjtLKz1EP3Y6ZW5jb2RlVVJJQ29tcG9uZW50KHYpfSl9Sys9IikiO3JldHVybiBLfTtnLnByb3RvdHlwZS5nZXRQcm9wZXJ0eT1mdW5jdGlvbihwLG8saSl7dmFyIHY9dGhpcy5fZ2V0T2JqZWN0KHAsbyk7aWYoaT09bnVsbHx8aT09dW5kZWZpbmVkKXtyZXR1cm4gdn1pZighcS5pc1BsYWluT2JqZWN0KHYpKXtyZXR1cm4gdn12PXEuZXh0ZW5kKHRydWUse30sdik7aWYoaT09dHJ1ZSl7cmV0dXJuIHRoaXMuX3Jlc3RvcmVSZWZlcmVuY2VzKHYpfWVsc2V7cmV0dXJuIHRoaXMuX3JlbW92ZVJlZmVyZW5jZXModil9fTtnLnByb3RvdHlwZS5fZ2V0T2JqZWN0PWZ1bmN0aW9uKHAsbyl7dmFyIG49dGhpcy5pc0xlZ2FjeVN5bnRheCgpP3RoaXMub0RhdGE6bnVsbCxyLGs7aWYodGhpcy5vTWV0YWRhdGEmJnAmJnAuaW5kZXhPZignIycpPi0xKXtyPXRoaXMucmVzb2x2ZShwLG8pO2lmKHIpe249dGhpcy5vTWV0YWRhdGEuX2dldEFubm90YXRpb24ocil9fWVsc2V7aWYobyl7az1vLmdldFBhdGgoKTtrPWsuc3Vic3RyKDEpO249dGhpcy5vRGF0YVtrXX1pZighcCl7cmV0dXJuIG59dmFyIFA9cC5zcGxpdCgiLyIpLGk9MDtpZighUFswXSl7bj10aGlzLm9EYXRhO2krK313aGlsZShuJiZQW2ldKXtuPW5bUFtpXV07aWYobil7aWYobi5fX3JlZil7bj10aGlzLm9EYXRhW24uX19yZWZdfWVsc2UgaWYobi5fX2xpc3Qpe249bi5fX2xpc3R9ZWxzZSBpZihuLl9fZGVmZXJyZWQpe249dW5kZWZpbmVkfX1pKyt9fXJldHVybiBufTtnLnByb3RvdHlwZS51cGRhdGVTZWN1cml0eVRva2VuPWZ1bmN0aW9uKCl7aWYodGhpcy5iVG9rZW5IYW5kbGluZyl7aWYoIXRoaXMub1NlcnZpY2VEYXRhLnNlY3VyaXR5VG9rZW4pe3RoaXMucmVmcmVzaFNlY3VyaXR5VG9rZW4oKX1pZih0aGlzLmJUb2tlbkhhbmRsaW5nKXt0aGlzLm9IZWFkZXJzWyJ4LWNzcmYtdG9rZW4iXT10aGlzLm9TZXJ2aWNlRGF0YS5zZWN1cml0eVRva2VufX19O2cucHJvdG90eXBlLnJlc2V0U2VjdXJpdHlUb2tlbj1mdW5jdGlvbigpe2RlbGV0ZSB0aGlzLm9TZXJ2aWNlRGF0YS5zZWN1cml0eVRva2VuO2RlbGV0ZSB0aGlzLm9IZWFkZXJzWyJ4LWNzcmYtdG9rZW4iXX07Zy5wcm90b3R5cGUucmVmcmVzaFNlY3VyaXR5VG9rZW49ZnVuY3Rpb24ocyxFLEEpe3ZhciB0PXRoaXMsdSxUO0E9QT09PXRydWU7dT10aGlzLl9jcmVhdGVSZXF1ZXN0VXJsKCIvIik7dmFyIHI9dGhpcy5fY3JlYXRlUmVxdWVzdCh1LCJHRVQiLEEpO3IuaGVhZGVyc1sieC1jc3JmLXRva2VuIl09IkZldGNoIjtmdW5jdGlvbiBfKEQsUil7aWYoUil7VD10Ll9nZXRIZWFkZXIoIngtY3NyZi10b2tlbiIsUi5oZWFkZXJzKTtpZihUKXt0Lm9TZXJ2aWNlRGF0YS5zZWN1cml0eVRva2VuPVQ7dC5vSGVhZGVyc1sieC1jc3JmLXRva2VuIl09VH1lbHNle3QucmVzZXRTZWN1cml0eVRva2VuKCk7dC5iVG9rZW5IYW5kbGluZz1mYWxzZX19aWYocyl7cyhELFIpfX1mdW5jdGlvbiBoKG8pe3QucmVzZXRTZWN1cml0eVRva2VuKCk7dC5iVG9rZW5IYW5kbGluZz1mYWxzZTt0Ll9oYW5kbGVFcnJvcihvKTtpZihFKXtFKG8pfX1yZXR1cm4gdGhpcy5fcmVxdWVzdChyLF8saCx1bmRlZmluZWQsdW5kZWZpbmVkLHRoaXMuZ2V0U2VydmljZU1ldGFkYXRhKCkpfTtnLnByb3RvdHlwZS5fc3VibWl0UmVxdWVzdD1mdW5jdGlvbihyLEIscyxFLGgsaSl7dmFyIHQ9dGhpcyxSLG09e307ZnVuY3Rpb24gXyhELG8pe2lmKEImJmgpe3ZhciBsPXQuX2dldEJhdGNoRXJyb3JzKEQpO2lmKGwubGVuZ3RoPjApe2oobFswXSk7cmV0dXJuIGZhbHNlfWlmKEQuX19iYXRjaFJlc3BvbnNlcyYmRC5fX2JhdGNoUmVzcG9uc2VzLmxlbmd0aD4wKXtSPUQuX19iYXRjaFJlc3BvbnNlc1swXS5kYXRhO2lmKCFSJiZELl9fYmF0Y2hSZXNwb25zZXNbMF0uX19jaGFuZ2VSZXNwb25zZXMpe1I9RC5fX2JhdGNoUmVzcG9uc2VzWzBdLl9fY2hhbmdlUmVzcG9uc2VzWzBdLmRhdGF9fUQ9Un1pZihpKXtpZihEJiZELl9fYmF0Y2hSZXNwb25zZXMpe3EuZWFjaChELl9fYmF0Y2hSZXNwb25zZXMsZnVuY3Rpb24oSSxvKXtpZihvJiZvLmRhdGEpe3QuX2ltcG9ydERhdGEoby5kYXRhLG0pfX0pfX10Ll9oYW5kbGVFVGFnKHIsbyxCKTt0Ll91cGRhdGVSZXF1ZXN0UXVldWUocixCKTtpZih0Ll9pc1JlZnJlc2hOZWVkZWQocixvKSl7dC5fcmVmcmVzaChmYWxzZSxyLmtleXMsci5lbnRpdHlUeXBlcyl9aWYocyl7cyhELG8pfX1mdW5jdGlvbiBqKG8pe2lmKHQuYlRva2VuSGFuZGxpbmcmJm8ucmVzcG9uc2Upe3ZhciBUPXQuX2dldEhlYWRlcigieC1jc3JmLXRva2VuIixvLnJlc3BvbnNlLmhlYWRlcnMpO2lmKCFyLmJUb2tlblJlc2V0JiZvLnJlc3BvbnNlLnN0YXR1c0NvZGU9PSc0MDMnJiZUJiZULnRvTG93ZXJDYXNlKCk9PSJyZXF1aXJlZCIpe3QucmVzZXRTZWN1cml0eVRva2VuKCk7ci5iVG9rZW5SZXNldD10cnVlO2soKTtyZXR1cm59fXQuX2hhbmRsZUVycm9yKG8pO2lmKEUpe0Uobyl9fWZ1bmN0aW9uIGsoKXtpZih0LmJUb2tlbkhhbmRsaW5nJiZyLm1ldGhvZCE9PSJHRVQiKXt0LnVwZGF0ZVNlY3VyaXR5VG9rZW4oKTtpZih0LmJUb2tlbkhhbmRsaW5nKXtyLmhlYWRlcnNbIngtY3NyZi10b2tlbiJdPXQub1NlcnZpY2VEYXRhLnNlY3VyaXR5VG9rZW59fWlmKEIpe3JldHVybiB0Ll9yZXF1ZXN0KHIsXyxqLE9EYXRhLmJhdGNoSGFuZGxlcix1bmRlZmluZWQsdC5nZXRTZXJ2aWNlTWV0YWRhdGEoKSl9ZWxzZXtyZXR1cm4gdC5fcmVxdWVzdChyLF8saix0Lm9IYW5kbGVyLHVuZGVmaW5lZCx0LmdldFNlcnZpY2VNZXRhZGF0YSgpKX19cmV0dXJuIGsoKX07Zy5wcm90b3R5cGUuX2NyZWF0ZUJhdGNoUmVxdWVzdD1mdW5jdGlvbihCLEEpe3ZhciB1LHIsbz17fSxwPXt9LGg9W10sSz17fSxFPXt9O3AuX19iYXRjaFJlcXVlc3RzPUI7dT10aGlzLnNTZXJ2aWNlVXJsKyIvJGJhdGNoIjtpZih0aGlzLmFVcmxQYXJhbXMpe3UrPSI/Iit0aGlzLmFVcmxQYXJhbXMuam9pbigiJiIpfXEuZXh0ZW5kKG8sdGhpcy5tQ3VzdG9tSGVhZGVycyx0aGlzLm9IZWFkZXJzKTtkZWxldGUgb1siQ29udGVudC1UeXBlIl07cj17aGVhZGVyczpvLHJlcXVlc3RVcmk6dSxtZXRob2Q6IlBPU1QiLGRhdGE6cCx1c2VyOnRoaXMuc1VzZXIscGFzc3dvcmQ6dGhpcy5zUGFzc3dvcmQsYXN5bmM6QX07aWYoQSl7ci53aXRoQ3JlZGVudGlhbHM9dGhpcy5iV2l0aENyZWRlbnRpYWxzfXEuZWFjaChCLGZ1bmN0aW9uKGksbSl7aWYobVsiX19jaGFuZ2VSZXF1ZXN0cyJdKXtxLmVhY2gobVsiX19jaGFuZ2VSZXF1ZXN0cyJdLGZ1bmN0aW9uKGosbil7aWYobi5rZXlzJiZuLm1ldGhvZCE9IlBPU1QiKXtxLmVhY2gobi5rZXlzLGZ1bmN0aW9uKGsscyl7S1trXT1zfSl9ZWxzZSBpZihuLmVudGl0eVR5cGVzJiZuLm1ldGhvZD09IlBPU1QiKXtxLmVhY2gobi5lbnRpdHlUeXBlcyxmdW5jdGlvbihsLHMpe0VbbF09c30pfX0pfX0pO3Iua2V5cz1LO3IuZW50aXR5VHlwZXM9RTtyZXR1cm4gcn07Zy5wcm90b3R5cGUuX2hhbmRsZUVUYWc9ZnVuY3Rpb24ocixSLEIpe3ZhciB1LEUsaCxrLGwsbTtpZihCKXtsPXIuZGF0YS5fX2JhdGNoUmVxdWVzdHM7bT1SLmRhdGEuX19iYXRjaFJlc3BvbnNlcztpZihtJiZsKXtmb3IodmFyIGk9MDtpPGwubGVuZ3RoO2krKyl7aD1sW2ldLl9fY2hhbmdlUmVxdWVzdHM7aWYobVtpXSl7az1tW2ldLl9fY2hhbmdlUmVzcG9uc2VzO2lmKGgmJmspe2Zvcih2YXIgaj0wO2o8aC5sZW5ndGg7aisrKXtpZihoW2pdLm1ldGhvZD09Ik1FUkdFInx8aFtqXS5tZXRob2Q9PSJQVVQiKXt1PWhbal0ucmVxdWVzdFVyaS5yZXBsYWNlKHRoaXMuc1NlcnZpY2VVcmwrJy8nLCcnKTtpZighcS5zYXAuc3RhcnRzV2l0aCh1LCIvIikpe3U9Ii8iK3V9RT10aGlzLl9nZXRPYmplY3QodSk7aWYoRSYmRS5fX21ldGFkYXRhJiZrW2pdLmhlYWRlcnMmJmtbal0uaGVhZGVycy5FVGFnKXtFLl9fbWV0YWRhdGEuZXRhZz1rW2pdLmhlYWRlcnMuRVRhZ319fX19ZWxzZXtxLnNhcC5sb2cud2FybmluZygiY291bGQgbm90IHVwZGF0ZSBFVGFncyBmb3IgYmF0Y2ggcmVxdWVzdDogY29ycmVzcG9uZGluZyByZXNwb25zZSBmb3IgcmVxdWVzdCBtaXNzaW5nIil9fX1lbHNle3Euc2FwLmxvZy53YXJuaW5nKCJjb3VsZCBub3QgdXBkYXRlIEVUYWdzIGZvciBiYXRjaCByZXF1ZXN0OiBubyBiYXRjaCByZXNwb25zZXMvcmVxdWVzdHMgYXZhaWxhYmxlIil9fWVsc2V7dT1yLnJlcXVlc3RVcmkucmVwbGFjZSh0aGlzLnNTZXJ2aWNlVXJsKycvJywnJyk7aWYoIXEuc2FwLnN0YXJ0c1dpdGgodSwiLyIpKXt1PSIvIit1fUU9dGhpcy5fZ2V0T2JqZWN0KHUpO2lmKEUmJkUuX19tZXRhZGF0YSYmUi5oZWFkZXJzLkVUYWcpe0UuX19tZXRhZGF0YS5ldGFnPVIuaGVhZGVycy5FVGFnfX19O2cucHJvdG90eXBlLl9oYW5kbGVCYXRjaEVycm9ycz1mdW5jdGlvbihyLEQpe3ZhciBFPVtdO0U9dGhpcy5fZ2V0QmF0Y2hFcnJvcnMoRCk7dGhpcy5faGFuZGxlRVRhZygpfTtnLnByb3RvdHlwZS5fZ2V0QmF0Y2hFcnJvcnM9ZnVuY3Rpb24oRCl7dmFyIEU9W10scztxLmVhY2goRC5fX2JhdGNoUmVzcG9uc2VzLGZ1bmN0aW9uKGksbyl7aWYoby5tZXNzYWdlKXtzPSJUaGUgZm9sbG93aW5nIHByb2JsZW0gb2NjdXJyZWQ6ICIrby5tZXNzYWdlO2lmKG8ucmVzcG9uc2Upe3MrPW8ucmVzcG9uc2Uuc3RhdHVzQ29kZSsiLCIrby5yZXNwb25zZS5zdGF0dXNUZXh0KyIsIitvLnJlc3BvbnNlLmJvZHl9RS5wdXNoKG8pO3Euc2FwLmxvZy5mYXRhbChzKX1pZihvLl9fY2hhbmdlUmVzcG9uc2VzKXtxLmVhY2goby5fX2NoYW5nZVJlc3BvbnNlcyxmdW5jdGlvbihpLGgpe2lmKGgubWVzc2FnZSl7cz0iVGhlIGZvbGxvd2luZyBwcm9ibGVtIG9jY3VycmVkOiAiK2gubWVzc2FnZTtpZihoLnJlc3BvbnNlKXtzKz1oLnJlc3BvbnNlLnN0YXR1c0NvZGUrIiwiK2gucmVzcG9uc2Uuc3RhdHVzVGV4dCsiLCIraC5yZXNwb25zZS5ib2R5fUUucHVzaChoKTtxLnNhcC5sb2cuZmF0YWwocyl9fSl9fSk7cmV0dXJuIEV9O2cucHJvdG90eXBlLl9oYW5kbGVFcnJvcj1mdW5jdGlvbihFKXt2YXIgcD17fSxoLHQ7dmFyIHM9IlRoZSBmb2xsb3dpbmcgcHJvYmxlbSBvY2N1cnJlZDogIitFLm1lc3NhZ2U7cC5tZXNzYWdlPUUubWVzc2FnZTtpZihFLnJlc3BvbnNlKXtpZih0aGlzLmJUb2tlbkhhbmRsaW5nKXt0PXRoaXMuX2dldEhlYWRlcigieC1jc3JmLXRva2VuIixFLnJlc3BvbnNlLmhlYWRlcnMpO2lmKEUucmVzcG9uc2Uuc3RhdHVzQ29kZT09JzQwMycmJnQmJnQudG9Mb3dlckNhc2UoKT09InJlcXVpcmVkIil7dGhpcy5yZXNldFNlY3VyaXR5VG9rZW4oKX19cys9RS5yZXNwb25zZS5zdGF0dXNDb2RlKyIsIitFLnJlc3BvbnNlLnN0YXR1c1RleHQrIiwiK0UucmVzcG9uc2UuYm9keTtwLnN0YXR1c0NvZGU9RS5yZXNwb25zZS5zdGF0dXNDb2RlO3Auc3RhdHVzVGV4dD1FLnJlc3BvbnNlLnN0YXR1c1RleHQ7cC5yZXNwb25zZVRleHQ9RS5yZXNwb25zZS5ib2R5fXEuc2FwLmxvZy5mYXRhbChzKTtyZXR1cm4gcH07Zy5wcm90b3R5cGUuZ2V0RGF0YT1mdW5jdGlvbihwLG8saSl7cmV0dXJuIHRoaXMuZ2V0UHJvcGVydHkocCxvLGkpfTtnLnByb3RvdHlwZS5fZ2V0RVRhZz1mdW5jdGlvbihwLFAsRSl7dmFyIHMsaCxpO2lmKEUpe3M9RX1lbHNle2lmKFAmJlAuX19tZXRhZGF0YSl7cz1QLl9fbWV0YWRhdGEuZXRhZ31lbHNlIGlmKHApe2g9cC5yZXBsYWNlKHRoaXMuc1NlcnZpY2VVcmwrJy8nLCcnKTtpPWguaW5kZXhPZigiPyIpO2lmKGk+LTEpe2g9aC5zdWJzdHIoMCxpKX1pZih0aGlzLm9EYXRhLmhhc093blByb3BlcnR5KGgpKXtzPXRoaXMuZ2V0UHJvcGVydHkoJy8nK2grJy9fX21ldGFkYXRhL2V0YWcnKX19fXJldHVybiBzfTtnLnByb3RvdHlwZS5fY3JlYXRlUmVxdWVzdD1mdW5jdGlvbih1LG0sQSxwLEUpe3ZhciBvPXt9LHM7cS5leHRlbmQobyx0aGlzLm1DdXN0b21IZWFkZXJzLHRoaXMub0hlYWRlcnMpO3M9dGhpcy5fZ2V0RVRhZyh1LHAsRSk7aWYocyYmbSE9IkdFVCIpe29bIklmLU1hdGNoIl09c31pZih0aGlzLmJKU09OJiZtIT0iREVMRVRFIiYmdGhpcy5zTWF4RGF0YVNlcnZpY2VWZXJzaW9uPT09IjIuMCIpe29bIkNvbnRlbnQtVHlwZSJdPSJhcHBsaWNhdGlvbi9qc29uIn1pZihtPT0iTUVSR0UiJiYhdGhpcy5iVXNlQmF0Y2gpe29bIngtaHR0cC1tZXRob2QiXT0iTUVSR0UiO209IlBPU1QifXZhciByPXtoZWFkZXJzOm8scmVxdWVzdFVyaTp1LG1ldGhvZDptLHVzZXI6dGhpcy5zVXNlcixwYXNzd29yZDp0aGlzLnNQYXNzd29yZCxhc3luYzpBfTtpZihwKXtyLmRhdGE9cH1pZihBKXtyLndpdGhDcmVkZW50aWFscz10aGlzLmJXaXRoQ3JlZGVudGlhbHN9cmV0dXJuIHJ9O2cucHJvdG90eXBlLl9pc1JlZnJlc2hOZWVkZWQ9ZnVuY3Rpb24ocixSKXt2YXIgaD1mYWxzZSxFLGk9W10sdD10aGlzO2lmKCF0aGlzLmJSZWZyZXNoQWZ0ZXJDaGFuZ2Upe3JldHVybiBofWlmKHIuZGF0YSYmcS5pc0FycmF5KHIuZGF0YS5fX2JhdGNoUmVxdWVzdHMpKXtpZihSKXtpPXQuX2dldEJhdGNoRXJyb3JzKFIuZGF0YSk7cS5lYWNoKGksZnVuY3Rpb24oSSxvKXtpZihvLnJlc3BvbnNlJiZvLnJlc3BvbnNlLnN0YXR1c0NvZGU9PSI0MTIiKXtFPW8ucmVzcG9uc2Uuc3RhdHVzQ29kZTtyZXR1cm4gZmFsc2V9fSk7aWYoISFFKXtyZXR1cm4gZmFsc2V9fXEuZWFjaChyLmRhdGEuX19iYXRjaFJlcXVlc3RzLGZ1bmN0aW9uKEksQil7aWYocS5pc0FycmF5KEIuX19jaGFuZ2VSZXF1ZXN0cykpe3EuZWFjaChCLl9fY2hhbmdlUmVxdWVzdHMsZnVuY3Rpb24oSSxvKXtoPWh8fHQuX2lzUmVmcmVzaE5lZWRlZChvKTtyZXR1cm4haH0pfXJldHVybiFofSl9ZWxzZXtpZihyLm1ldGhvZD09PSJHRVQiKXtyZXR1cm4gZmFsc2V9ZWxzZXtpZihSJiZSLnN0YXR1c0NvZGU9PSI0MTIiKXtoPWZhbHNlfWVsc2V7aD10cnVlfX19cmV0dXJuIGh9O2cucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbihwLEQsUCl7dmFyIHMsRSxtLHIsdSxvLGgsUixCLGksUyxrLGosQT1mYWxzZTtpZihQIGluc3RhbmNlb2Ygc2FwLnVpLm1vZGVsLkNvbnRleHR8fGFyZ3VtZW50cy5sZW5ndGg+Myl7bz1QO3M9YXJndW1lbnRzWzNdO0U9YXJndW1lbnRzWzRdO209YXJndW1lbnRzWzVdfWVsc2V7bz1QLmNvbnRleHR8fFAub0NvbnRleHQ7cz1QLnN1Y2Nlc3N8fFAuZm5TdWNjZXNzO0U9UC5lcnJvcnx8UC5mbkVycm9yO2g9UC5lVGFnfHxQLnNFVGFnO209dHlwZW9mKFAubWVyZ2UpPT0idW5kZWZpbmVkIj9QLmJNZXJnZT09PXRydWU6UC5tZXJnZT09PXRydWU7QT10eXBlb2YoUC5hc3luYyk9PSJ1bmRlZmluZWQiP1AuYkFzeW5jPT09dHJ1ZTpQLmFzeW5jPT09dHJ1ZTtqPVAudXJsUGFyYW1ldGVyc311PXRoaXMuX2NyZWF0ZVJlcXVlc3RVcmwocCxvLGosdGhpcy5iVXNlQmF0Y2gpO2lmKG0pe3I9dGhpcy5fY3JlYXRlUmVxdWVzdCh1LCJNRVJHRSIsQSxELGgpfWVsc2V7cj10aGlzLl9jcmVhdGVSZXF1ZXN0KHUsIlBVVCIsQSxELGgpfXA9dGhpcy5fbm9ybWFsaXplUGF0aChwLG8pO1M9dGhpcy5fZ2V0T2JqZWN0KHApO3Iua2V5cz17fTtpZihTKXtrPXRoaXMuX2dldEtleShTKTtyLmtleXNba109dHJ1ZX1pZih0aGlzLmJVc2VCYXRjaCl7Qj10aGlzLl9jcmVhdGVCYXRjaFJlcXVlc3QoW3tfX2NoYW5nZVJlcXVlc3RzOltyXX1dLEEpO1I9dGhpcy5fc3VibWl0UmVxdWVzdChCLHRoaXMuYlVzZUJhdGNoLHMsRSx0cnVlKX1lbHNle1I9dGhpcy5fc3VibWl0UmVxdWVzdChyLHRoaXMuYlVzZUJhdGNoLHMsRSl9cmV0dXJuIFJ9O2cucHJvdG90eXBlLmNyZWF0ZT1mdW5jdGlvbihwLEQsUCl7dmFyIHIsQix1LFIscyxFLG8sUyxoLEE9ZmFsc2UsbTtpZihQJiZ0eXBlb2YoUCk9PSJvYmplY3QiJiYhKFAgaW5zdGFuY2VvZiBzYXAudWkubW9kZWwuQ29udGV4dCkpe289UC5jb250ZXh0O1M9UC5zdWNjZXNzO209UC51cmxQYXJhbWV0ZXJzO2g9UC5lcnJvcjtBPVAuYXN5bmM9PT10cnVlfWVsc2V7bz1QO1M9YXJndW1lbnRzWzNdO2g9YXJndW1lbnRzWzRdfXU9dGhpcy5fY3JlYXRlUmVxdWVzdFVybChwLG8sbSx0aGlzLmJVc2VCYXRjaCk7cj10aGlzLl9jcmVhdGVSZXF1ZXN0KHUsIlBPU1QiLEEsRCk7cD10aGlzLl9ub3JtYWxpemVQYXRoKHAsbyk7RT10aGlzLm9NZXRhZGF0YS5fZ2V0RW50aXR5VHlwZUJ5UGF0aChwKTtyLmVudGl0eVR5cGVzPXt9O2lmKEUpe3IuZW50aXR5VHlwZXNbRS5lbnRpdHlUeXBlXT10cnVlfWlmKHRoaXMuYlVzZUJhdGNoKXtCPXRoaXMuX2NyZWF0ZUJhdGNoUmVxdWVzdChbe19fY2hhbmdlUmVxdWVzdHM6W3JdfV0sQSk7Uj10aGlzLl9zdWJtaXRSZXF1ZXN0KEIsdGhpcy5iVXNlQmF0Y2gsUyxoLHRydWUpfWVsc2V7Uj10aGlzLl9zdWJtaXRSZXF1ZXN0KHIsdGhpcy5iVXNlQmF0Y2gsUyxoKX1yZXR1cm4gUn07Zy5wcm90b3R5cGUucmVtb3ZlPWZ1bmN0aW9uKHAsUCl7dmFyIG8sRSxzLFMsaCxyLHUsaSxrLGosXyxCLFIsbCxtLEE9ZmFsc2UsdD10aGlzO2lmKChQJiZQIGluc3RhbmNlb2Ygc2FwLnVpLm1vZGVsLkNvbnRleHQpfHxhcmd1bWVudHNbMl0pe289UDtTPWFyZ3VtZW50c1syXTtoPWFyZ3VtZW50c1szXX1lbHNlIGlmKFApe289UC5jb250ZXh0fHxQLm9Db250ZXh0O1M9UC5zdWNjZXNzfHxQLmZuU3VjY2VzcztoPVAuZXJyb3J8fFAuZm5FcnJvcjtpPVAuZVRhZ3x8UC5zRVRhZztqPVAucGF5bG9hZHx8UC5vUGF5bG9hZDtBPXR5cGVvZihQLmFzeW5jKT09InVuZGVmaW5lZCI/UC5iQXN5bmM9PT10cnVlOlAuYXN5bmM9PT10cnVlO209UC51cmxQYXJhbWV0ZXJzfV89ZnVuY3Rpb24oRCxuKXtFPXUuc3Vic3RyKHUubGFzdEluZGV4T2YoJy8nKSsxKTtpZihFLmluZGV4T2YoJz8nKSE9LTEpe0U9RS5zdWJzdHIoMCxFLmluZGV4T2YoJz8nKSl9ZGVsZXRlIHQub0RhdGFbRV07ZGVsZXRlIHQubUNvbnRleHRzWyIvIitFXTtpZihTKXtTKEQsbil9fTt1PXRoaXMuX2NyZWF0ZVJlcXVlc3RVcmwocCxvLG0sdGhpcy5iVXNlQmF0Y2gpO3I9dGhpcy5fY3JlYXRlUmVxdWVzdCh1LCJERUxFVEUiLEEsaixpKTtwPXRoaXMuX25vcm1hbGl6ZVBhdGgocCxvKTtzPXRoaXMuX2dldE9iamVjdChwKTtyLmtleXM9e307aWYocyl7az10aGlzLl9nZXRLZXkocyk7ci5rZXlzW2tdPXRydWV9aWYodGhpcy5iVXNlQmF0Y2gpe0I9dGhpcy5fY3JlYXRlQmF0Y2hSZXF1ZXN0KFt7X19jaGFuZ2VSZXF1ZXN0czpbcl19XSxBKTtSPXRoaXMuX3N1Ym1pdFJlcXVlc3QoQix0aGlzLmJVc2VCYXRjaCxfLGgsdHJ1ZSl9ZWxzZXtSPXRoaXMuX3N1Ym1pdFJlcXVlc3Qocix0aGlzLmJVc2VCYXRjaCxfLGgpfXJldHVybiBSfTtnLnByb3RvdHlwZS5jYWxsRnVuY3Rpb249ZnVuY3Rpb24oRixwKXt2YXIgcixCLHUsUixvLFAsaCxzLEUsQSxtPSJHRVQiLGk9e30sdD10aGlzO2lmKHAmJnR5cGVvZihwKT09Im9iamVjdCIpe209cC5tZXRob2Q/cC5tZXRob2Q6bTtQPXAudXJsUGFyYW1ldGVycztoPXAuY29udGV4dDtzPXAuc3VjY2VzcztFPXAuZXJyb3I7QT1wLmFzeW5jPT09dHJ1ZX1lbHNle209cDtQPWFyZ3VtZW50c1syXTtoPWFyZ3VtZW50c1szXTtzPWFyZ3VtZW50c1s0XTtFPWFyZ3VtZW50c1s1XTtBPWFyZ3VtZW50c1s2XT09PXRydWV9bz10aGlzLm9NZXRhZGF0YS5fZ2V0RnVuY3Rpb25JbXBvcnRNZXRhZGF0YShGLG0pO2lmKG8pe3U9dGhpcy5fY3JlYXRlUmVxdWVzdFVybChGLGgsbnVsbCx0aGlzLmJVc2VCYXRjaCk7dmFyIGo9VVJJKHUpO2lmKG8ucGFyYW1ldGVyIT1udWxsKXtxLmVhY2goUCxmdW5jdGlvbihrLGwpe3ZhciBuPXEuZ3JlcChvLnBhcmFtZXRlcixmdW5jdGlvbih3KXtyZXR1cm4gdy5uYW1lPT1rJiZ3Lm1vZGU9PSJJbiJ9KTtpZihuIT1udWxsJiZuLmxlbmd0aD4wKXt2YXIgdj1uWzBdO2lba109Ty5mb3JtYXRWYWx1ZShsLHYudHlwZSl9ZWxzZXtxLnNhcC5sb2cud2FybmluZygiUGFyYW1ldGVyICIraysiIGlzIG5vdCBkZWZpbmVkIGZvciBmdW5jdGlvbiBjYWxsICIrRisiISIpfX0pfWlmKG09PT0iR0VUIil7cmV0dXJuIHQucmVhZChGLGgsaSx0cnVlLHMsRSl9ZWxzZXtxLmVhY2goaSxmdW5jdGlvbihrLGwpe2ouYWRkUXVlcnkoayxsKX0pO3I9dGhpcy5fY3JlYXRlUmVxdWVzdChqLnRvU3RyaW5nKCksbSxBKTtpZih0aGlzLmJVc2VCYXRjaCl7Qj10aGlzLl9jcmVhdGVCYXRjaFJlcXVlc3QoW3tfX2NoYW5nZVJlcXVlc3RzOltyXX1dLEEpO1I9dGhpcy5fc3VibWl0UmVxdWVzdChCLHRoaXMuYlVzZUJhdGNoLHMsRSx0cnVlKX1lbHNle1I9dGhpcy5fc3VibWl0UmVxdWVzdChyLHRoaXMuYlVzZUJhdGNoLHMsRSl9cmV0dXJuIFJ9fX07Zy5wcm90b3R5cGUucmVhZD1mdW5jdGlvbihwLFApe3ZhciByLHUsUixCLG8sbSxBLHMsRSxGLFMsaCxpLGosayxsLHQ9dGhpcztpZihQJiZ0eXBlb2YoUCk9PSJvYmplY3QiJiYhKFAgaW5zdGFuY2VvZiBzYXAudWkubW9kZWwuQ29udGV4dCkpe289UC5jb250ZXh0O209UC51cmxQYXJhbWV0ZXJzO0E9UC5hc3luYyE9PWZhbHNlO3M9UC5zdWNjZXNzO0U9UC5lcnJvcjtGPVAuZmlsdGVycztTPVAuc29ydGVyc31lbHNle289UDttPWFyZ3VtZW50c1syXTtBPWFyZ3VtZW50c1szXSE9PWZhbHNlO3M9YXJndW1lbnRzWzRdO0U9YXJndW1lbnRzWzVdfUE9QSE9PWZhbHNlO2w9Ty5fY3JlYXRlVXJsUGFyYW1zQXJyYXkobSk7aT1PLmNyZWF0ZVNvcnRQYXJhbXMoUyk7aWYoaSl7bC5wdXNoKGkpfTtpZihGJiYhdGhpcy5vTWV0YWRhdGEpe3Euc2FwLmxvZy5mYXRhbCgiVHJpZWQgdG8gdXNlIGZpbHRlcnMgaW4gcmVhZCBtZXRob2QgYmVmb3JlIG1ldGFkYXRhIGlzIGF2YWlsYWJsZS4iKX1lbHNle2s9dGhpcy5fbm9ybWFsaXplUGF0aChwLG8pO2o9dGhpcy5vTWV0YWRhdGEmJnRoaXMub01ldGFkYXRhLl9nZXRFbnRpdHlUeXBlQnlQYXRoKGspO2g9Ty5jcmVhdGVGaWx0ZXJQYXJhbXMoRix0aGlzLm9NZXRhZGF0YSxqKTtpZihoKXtsLnB1c2goaCl9fXU9dGhpcy5fY3JlYXRlUmVxdWVzdFVybChwLG8sbCx0aGlzLmJVc2VCYXRjaCk7cj10aGlzLl9jcmVhdGVSZXF1ZXN0KHUsIkdFVCIsQSk7aWYodGhpcy5iVXNlQmF0Y2gpe0I9dGhpcy5fY3JlYXRlQmF0Y2hSZXF1ZXN0KFtyXSxBKTtSPXRoaXMuX3N1Ym1pdFJlcXVlc3QoQix0aGlzLmJVc2VCYXRjaCxzLEUsdHJ1ZSl9ZWxzZXtSPXRoaXMuX3N1Ym1pdFJlcXVlc3Qocix0aGlzLmJVc2VCYXRjaCxzLEUpfXJldHVybiBSfTtnLnByb3RvdHlwZS5jcmVhdGVCYXRjaE9wZXJhdGlvbj1mdW5jdGlvbihwLG0sRCxQKXt2YXIgbz17fSxFLHMsayxoO3EuZXh0ZW5kKG8sdGhpcy5tQ3VzdG9tSGVhZGVycyx0aGlzLm9IZWFkZXJzKTtpZihxLnNhcC5zdGFydHNXaXRoKHAsIi8iKSl7cD1wLnN1YnN0cigxKX1pZihQKXtFPVAuc0VUYWd9aWYobSE9IkdFVCIpe0U9dGhpcy5fZ2V0RVRhZyhwLEQsRSk7aWYoRSl7b1siSWYtTWF0Y2giXT1FfX1pZih0aGlzLmJKU09OKXtpZihtIT0iREVMRVRFIiYmbSE9IkdFVCImJnRoaXMuc01heERhdGFTZXJ2aWNlVmVyc2lvbj09PSIyLjAiKXtvWyJDb250ZW50LVR5cGUiXT0iYXBwbGljYXRpb24vanNvbiJ9fWVsc2V7b1siQ29udGVudC1UeXBlIl09ImFwcGxpY2F0aW9uL2F0b20reG1sIn12YXIgcj17cmVxdWVzdFVyaTpwLG1ldGhvZDptLnRvVXBwZXJDYXNlKCksaGVhZGVyczpvfTtpZihEKXtyLmRhdGE9RH1pZihtIT0iR0VUIiYmbSE9IlBPU1QiKXtpZihwJiZwLmluZGV4T2YoIi8iKSE9MCl7cD0nLycrcH1zPXRoaXMuX2dldE9iamVjdChwKTtpZihzKXtrPXRoaXMuX2dldEtleShzKTtyLmtleXM9e307ci5rZXlzW2tdPXRydWV9fWVsc2UgaWYobT09IlBPU1QiKXtoPXRoaXMub01ldGFkYXRhLl9nZXRFbnRpdHlUeXBlQnlQYXRoKHApO2lmKGgpe3IuZW50aXR5VHlwZXM9e307ci5lbnRpdHlUeXBlc1toLmVudGl0eVR5cGVdPXRydWV9fXJldHVybiByfTtnLnByb3RvdHlwZS5hZGRCYXRjaFJlYWRPcGVyYXRpb25zPWZ1bmN0aW9uKHIpe2lmKCFxLmlzQXJyYXkocil8fHIubGVuZ3RoPD0wKXtxLnNhcC5sb2cud2FybmluZygiTm8gYXJyYXkgd2l0aCBiYXRjaCBvcGVyYXRpb25zIHByb3ZpZGVkISIpO3JldHVybiBmYWxzZX12YXIgdD10aGlzO3EuZWFjaChyLGZ1bmN0aW9uKGksUil7aWYoUi5tZXRob2QhPSJHRVQiKXtxLnNhcC5sb2cud2FybmluZygiQmF0Y2ggb3BlcmF0aW9uIHNob3VsZCBiZSBhIEdFVCBvcGVyYXRpb24hIik7cmV0dXJuIGZhbHNlfXQuYUJhdGNoT3BlcmF0aW9ucy5wdXNoKFIpfSl9O2cucHJvdG90eXBlLmFkZEJhdGNoQ2hhbmdlT3BlcmF0aW9ucz1mdW5jdGlvbihoKXtpZighcS5pc0FycmF5KGgpfHxoLmxlbmd0aDw9MCl7cmV0dXJuIGZhbHNlfXEuZWFjaChoLGZ1bmN0aW9uKGksbyl7aWYoby5tZXRob2QhPSJQT1NUIiYmby5tZXRob2QhPSJQVVQiJiZvLm1ldGhvZCE9Ik1FUkdFIiYmby5tZXRob2QhPSJERUxFVEUiKXtxLnNhcC5sb2cud2FybmluZygiQmF0Y2ggb3BlcmF0aW9uIHNob3VsZCBiZSBhIFBPU1QvUFVUL01FUkdFL0RFTEVURSBvcGVyYXRpb24hIik7cmV0dXJuIGZhbHNlfX0pO3RoaXMuYUJhdGNoT3BlcmF0aW9ucy5wdXNoKHtfX2NoYW5nZVJlcXVlc3RzOmh9KX07Zy5wcm90b3R5cGUuY2xlYXJCYXRjaD1mdW5jdGlvbigpe3RoaXMuYUJhdGNoT3BlcmF0aW9ucz1bXX07Zy5wcm90b3R5cGUuc3VibWl0QmF0Y2g9ZnVuY3Rpb24ocyxFLEEsaSl7dmFyIHIsdSxSLHQ9dGhpcztmdW5jdGlvbiBfKEQsail7aWYocyl7cyhELGosdC5fZ2V0QmF0Y2hFcnJvcnMoRCkpfX1pZighKHR5cGVvZihzKT09ImZ1bmN0aW9uIikpe3ZhciBvPUE7dmFyIGg9RTtBPXM7cz1oO0U9b31BPUEhPT1mYWxzZTtpZih0aGlzLmFCYXRjaE9wZXJhdGlvbnMubGVuZ3RoPD0wKXtxLnNhcC5sb2cud2FybmluZygiTm8gYmF0Y2ggb3BlcmF0aW9ucyBpbiBiYXRjaC4gTm8gcmVxdWVzdCB3aWxsIGJlIHRyaWdnZXJlZCEiKTtyZXR1cm4gZmFsc2V9cj10aGlzLl9jcmVhdGVCYXRjaFJlcXVlc3QodGhpcy5hQmF0Y2hPcGVyYXRpb25zLEEpO1I9dGhpcy5fc3VibWl0UmVxdWVzdChyLHRydWUsXyxFLGZhbHNlLGkpO3RoaXMuY2xlYXJCYXRjaCgpO3JldHVybiBSfTtnLnByb3RvdHlwZS5nZXRTZXJ2aWNlTWV0YWRhdGE9ZnVuY3Rpb24oKXtpZih0aGlzLm9NZXRhZGF0YSYmdGhpcy5vTWV0YWRhdGEuaXNMb2FkZWQoKSl7cmV0dXJuIHRoaXMub01ldGFkYXRhLmdldFNlcnZpY2VNZXRhZGF0YSgpfX07Zy5wcm90b3R5cGUuZ2V0U2VydmljZUFubm90YXRpb25zPWZ1bmN0aW9uKCl7aWYodGhpcy5vQW5ub3RhdGlvbnMmJnRoaXMub0Fubm90YXRpb25zLmdldEFubm90YXRpb25zRGF0YSl7cmV0dXJuIHRoaXMub0Fubm90YXRpb25zLmdldEFubm90YXRpb25zRGF0YSgpfX07Zy5wcm90b3R5cGUuc3VibWl0Q2hhbmdlcz1mdW5jdGlvbihzLEUscCl7dmFyIHIsUCx0PXRoaXMsaCxpLFQsbSxTLGs7aWYodGhpcy5zQ2hhbmdlS2V5KXtoPXRoaXMuc0NoYW5nZUtleS5yZXBsYWNlKHRoaXMuc1NlcnZpY2VVcmwsJycpO1M9dGhpcy5fZ2V0T2JqZWN0KGgpO1A9UztpZihxLmlzUGxhaW5PYmplY3QoUykpe1A9cS5leHRlbmQodHJ1ZSx7fSxTKTtpZihQLl9fbWV0YWRhdGEpe1Q9UC5fX21ldGFkYXRhLnR5cGU7bT1QLl9fbWV0YWRhdGEuZXRhZztkZWxldGUgUC5fX21ldGFkYXRhO2lmKFR8fG0pe1AuX19tZXRhZGF0YT17fX1pZihUKXtQLl9fbWV0YWRhdGEudHlwZT1UfWlmKCEhbSl7UC5fX21ldGFkYXRhLmV0YWc9bX19cS5lYWNoKFAsZnVuY3Rpb24obCx1KXtpZih1JiZ1Ll9fZGVmZXJyZWQpe2RlbGV0ZSBQW2xdfX0pO3ZhciBvPXRoaXMub01ldGFkYXRhLl9nZXRFbnRpdHlUeXBlQnlQYXRoKGgpO2lmKG8pe3ZhciBuPXRoaXMub01ldGFkYXRhLl9nZXROYXZpZ2F0aW9uUHJvcGVydHlOYW1lcyhvKTtxLmVhY2gobixmdW5jdGlvbihJLE4pe2RlbGV0ZSBQW05dfSl9UD10aGlzLl9yZW1vdmVSZWZlcmVuY2VzKFApfWlmKHAmJnAuc0VUYWcpe2k9cC5zRVRhZ31yPXRoaXMuX2NyZWF0ZVJlcXVlc3QodGhpcy5zQ2hhbmdlS2V5LCJNRVJHRSIsdHJ1ZSxQLGkpO2lmKHRoaXMuc1VybFBhcmFtcyl7ci5yZXF1ZXN0VXJpKz0iPyIrdGhpcy5zVXJsUGFyYW1zfXIua2V5cz17fTtpZihTKXtrPXRoaXMuX2dldEtleShTKTtyLmtleXNba109dHJ1ZX10aGlzLm9SZXF1ZXN0UXVldWVbdGhpcy5zQ2hhbmdlS2V5XT1yfWlmKHEuaXNFbXB0eU9iamVjdCh0aGlzLm9SZXF1ZXN0UXVldWUpKXtyZXR1cm4gdW5kZWZpbmVkfWlmKHRoaXMuYlVzZUJhdGNoKXt2YXIgaj1bXTtxLmVhY2godGhpcy5vUmVxdWVzdFF1ZXVlLGZ1bmN0aW9uKGssbCl7ZGVsZXRlIGwuX29SZWY7dmFyIFI9cS5leHRlbmQodHJ1ZSx7fSxsKTtsLl9vUmVmPVI7Ui5yZXF1ZXN0VXJpPVIucmVxdWVzdFVyaS5yZXBsYWNlKHQuc1NlcnZpY2VVcmwrJy8nLCcnKTtSLmRhdGEuX2JDcmVhdGU/ZGVsZXRlIFIuZGF0YS5fYkNyZWF0ZTpmYWxzZTtqLnB1c2goUil9KTtyPXRoaXMuX2NyZWF0ZUJhdGNoUmVxdWVzdChbe19fY2hhbmdlUmVxdWVzdHM6an1dLHRydWUpO3RoaXMuX3N1Ym1pdFJlcXVlc3Qocix0aGlzLmJVc2VCYXRjaCxzLEUsdHJ1ZSl9ZWxzZXtxLmVhY2godGhpcy5vUmVxdWVzdFF1ZXVlLGZ1bmN0aW9uKGssbCl7ZGVsZXRlIGwuX29SZWY7dmFyIFI9cS5leHRlbmQodHJ1ZSx7fSxsKTtsLl9vUmVmPVI7aWYoUi5kYXRhJiZSLmRhdGEuX2JDcmVhdGUpe2RlbGV0ZSBSLmRhdGEuX2JDcmVhdGV9dC5fc3VibWl0UmVxdWVzdChSLHRoaXMuYlVzZUJhdGNoLHMsRSx0cnVlKX0pfXJldHVybiB1bmRlZmluZWR9O2cucHJvdG90eXBlLl91cGRhdGVSZXF1ZXN0UXVldWU9ZnVuY3Rpb24ocixCKXt2YXIgaCxrLG8sdD10aGlzO2lmKEIpe2g9ci5kYXRhLl9fYmF0Y2hSZXF1ZXN0cztpZihoKXtmb3IodmFyIGk9MDtpPGgubGVuZ3RoO2krKyl7az1oW2ldLl9fY2hhbmdlUmVxdWVzdHM7aWYoayl7Zm9yKHZhciBqPTA7ajxrLmxlbmd0aDtqKyspe289a1tqXTtxLmVhY2godGhpcy5vUmVxdWVzdFF1ZXVlLGZ1bmN0aW9uKEssbCl7aWYobC5fb1JlZj09PW8mJkshPT10LnNDaGFuZ2VLZXkpe2RlbGV0ZSB0Lm9SZXF1ZXN0UXVldWVbS107ZGVsZXRlIHQub0RhdGFbS107ZGVsZXRlIHQubUNvbnRleHRzWyIvIitLXX1lbHNlIGlmKHQuc0NoYW5nZUtleSYmSz09PXQuc0NoYW5nZUtleSl7ZGVsZXRlIHQub1JlcXVlc3RRdWV1ZVtLXTt0LnNDaGFuZ2VLZXk9bnVsbH19KX19fX19ZWxzZXtxLmVhY2godGhpcy5vUmVxdWVzdFF1ZXVlLGZ1bmN0aW9uKEssbCl7aWYobC5fb1JlZj09PXImJkshPT10LnNDaGFuZ2VLZXkpe2RlbGV0ZSB0Lm9SZXF1ZXN0UXVldWVbS107ZGVsZXRlIHQub0RhdGFbS107ZGVsZXRlIHQubUNvbnRleHRzWyIvIitLXX1lbHNlIGlmKHQuc0NoYW5nZUtleSYmSz09PXQuc0NoYW5nZUtleSl7ZGVsZXRlIHQub1JlcXVlc3RRdWV1ZVtLXTt0LnNDaGFuZ2VLZXk9bnVsbH19KX19O2cucHJvdG90eXBlLnJlc2V0Q2hhbmdlcz1mdW5jdGlvbihzLEUpe3ZhciBwO2lmKHRoaXMuc0NoYW5nZUtleSl7cD10aGlzLnNDaGFuZ2VLZXkucmVwbGFjZSh0aGlzLnNTZXJ2aWNlVXJsLCcnKTt0aGlzLl9sb2FkRGF0YShwLG51bGwscyxFKX19O2cucHJvdG90eXBlLnNldFByb3BlcnR5PWZ1bmN0aW9uKHAsdixvKXt2YXIgUCxFPXt9LEQ9e30scz10aGlzLl9jcmVhdGVSZXF1ZXN0VXJsKHAsbyksaD1wLnN1YnN0cmluZygwLHAubGFzdEluZGV4T2YoIi8iKSksayxqLG09e30sbD1mYWxzZTtpZighdGhpcy5yZXNvbHZlKHAsbykpe3JldHVybiBmYWxzZX1zPXMucmVwbGFjZSh0aGlzLnNTZXJ2aWNlVXJsKycvJywnJyk7cz1zLnN1YnN0cmluZygwLHMuaW5kZXhPZigiLyIpKTtzPXRoaXMuc1NlcnZpY2VVcmwrJy8nK3M7UD1wLnN1YnN0cihwLmxhc3RJbmRleE9mKCIvIikrMSk7RD10aGlzLl9nZXRPYmplY3QoaCxvKTtpZighRCl7cmV0dXJuIGZhbHNlfWo9aC5zcGxpdCgiLyIpO2Zvcih2YXIgaT1qLmxlbmd0aC0xO2k+PTA7aS0tKXtFPXRoaXMuX2dldE9iamVjdChqLmpvaW4oIi8iKSxvKTtpZihFKXtrPXRoaXMuX2dldEtleShFKTtpZihrKXticmVha319ai5zcGxpY2UoaS0xLDEpfWlmKCFrKXtrPXRoaXMuX2dldEtleShvKX1pZihrKXttW2tdPXRydWV9aWYoRC5fYkNyZWF0ZSl7RFtQXT12O2w9dHJ1ZTt0aGlzLmNoZWNrVXBkYXRlKGZhbHNlLG0pfWVsc2V7aWYoIXRoaXMuc0NoYW5nZUtleSl7dGhpcy5zQ2hhbmdlS2V5PXN9aWYodGhpcy5zQ2hhbmdlS2V5PT1zKXtEW1BdPXY7bD10cnVlO3RoaXMuY2hlY2tVcGRhdGUoZmFsc2UsbSl9ZWxzZXt0aGlzLmZpcmVSZWplY3RDaGFuZ2Uoe3JlamVjdGVkVmFsdWU6dixvbGRWYWx1ZTpEW1BdfSl9fXJldHVybiBsfTtnLnByb3RvdHlwZS5faXNIZWFkZXJQcml2YXRlPWZ1bmN0aW9uKGgpe3N3aXRjaChoLnRvTG93ZXJDYXNlKCkpe2Nhc2UiYWNjZXB0IjpjYXNlImFjY2VwdC1sYW5ndWFnZSI6Y2FzZSJtYXhkYXRhc2VydmljZXZlcnNpb24iOmNhc2UiZGF0YXNlcnZpY2V2ZXJzaW9uIjpyZXR1cm4gdHJ1ZTticmVhaztjYXNlIngtY3NyZi10b2tlbiI6cmV0dXJuIHRoaXMuYlRva2VuSGFuZGxpbmc7YnJlYWs7ZGVmYXVsdDpyZXR1cm4gZmFsc2V9fTtnLnByb3RvdHlwZS5zZXRIZWFkZXJzPWZ1bmN0aW9uKGgpe3ZhciBtPXt9LHQ9dGhpcztpZihoKXtxLmVhY2goaCxmdW5jdGlvbihILHMpe2lmKHQuX2lzSGVhZGVyUHJpdmF0ZShIKSl7cS5zYXAubG9nLndhcm5pbmcoIk5vdCBhbGxvd2VkIHRvIG1vZGlmeSBwcml2YXRlIGhlYWRlcjogIitIKX1lbHNle21bSF09c319KTt0aGlzLm1DdXN0b21IZWFkZXJzPW19ZWxzZXt0aGlzLm1DdXN0b21IZWFkZXJzPXt9fX07Zy5wcm90b3R5cGUuZ2V0SGVhZGVycz1mdW5jdGlvbigpe3JldHVybiBxLmV4dGVuZCh7fSx0aGlzLm1DdXN0b21IZWFkZXJzLHRoaXMub0hlYWRlcnMpfTtnLnByb3RvdHlwZS5fZ2V0SGVhZGVyPWZ1bmN0aW9uKEYsaCl7dmFyIEg7Zm9yKEggaW4gaCl7aWYoSC50b0xvd2VyQ2FzZSgpPT09Ri50b0xvd2VyQ2FzZSgpKXtyZXR1cm4gaFtIXX19cmV0dXJuIG51bGx9O2cucHJvdG90eXBlLmhhc1BlbmRpbmdDaGFuZ2VzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc0NoYW5nZUtleSE9bnVsbH07Zy5wcm90b3R5cGUudXBkYXRlQmluZGluZ3M9ZnVuY3Rpb24oRil7dGhpcy5jaGVja1VwZGF0ZShGKX07Zy5wcm90b3R5cGUuZm9yY2VOb0NhY2hlPWZ1bmN0aW9uKEYpe3RoaXMuYkNhY2hlPSFGfTtnLnByb3RvdHlwZS5zZXRUb2tlbkhhbmRsaW5nRW5hYmxlZD1mdW5jdGlvbih0KXt0aGlzLmJUb2tlbkhhbmRsaW5nPXR9O2cucHJvdG90eXBlLnNldFVzZUJhdGNoPWZ1bmN0aW9uKHUpe3RoaXMuYlVzZUJhdGNoPXV9O2cucHJvdG90eXBlLmZvcm1hdFZhbHVlPWZ1bmN0aW9uKHYsdCl7cmV0dXJuIE8uZm9ybWF0VmFsdWUodix0KX07Zy5wcm90b3R5cGUuZGVsZXRlQ3JlYXRlZEVudHJ5PWZ1bmN0aW9uKG8pe2lmKG8pe3ZhciBwPW8uZ2V0UGF0aCgpO2RlbGV0ZSB0aGlzLm1Db250ZXh0c1twXTtpZihxLnNhcC5zdGFydHNXaXRoKHAsIi8iKSl7cD1wLnN1YnN0cigxKX1kZWxldGUgdGhpcy5vUmVxdWVzdFF1ZXVlW3BdO2RlbGV0ZSB0aGlzLm9EYXRhW3BdfX07Zy5wcm90b3R5cGUuY3JlYXRlRW50cnk9ZnVuY3Rpb24ocCxQKXt2YXIgRT17fSxrLHUscjtpZighcS5zYXAuc3RhcnRzV2l0aChwLCIvIikpe3A9Ii8iK3B9dmFyIG89dGhpcy5vTWV0YWRhdGEuX2dldEVudGl0eVR5cGVCeVBhdGgocCk7aWYoIW8pe3JldHVybiB1bmRlZmluZWR9aWYodHlwZW9mIFA9PT0ib2JqZWN0IiYmIXEuaXNBcnJheShQKSl7RT1QfWVsc2V7Zm9yKHZhciBpPTA7aTxvLnByb3BlcnR5Lmxlbmd0aDtpKyspe3ZhciBoPW8ucHJvcGVydHlbaV07dmFyIHQ9aC50eXBlLnNwbGl0KCcuJyk7dmFyIGo9cS5pbkFycmF5KGgubmFtZSxQKT4tMTtpZighUHx8ail7RVtoLm5hbWVdPXRoaXMuX2NyZWF0ZVByb3BlcnR5VmFsdWUodCk7aWYoail7UC5zcGxpY2UoUC5pbmRleE9mKGgubmFtZSksMSl9fX1pZihQKXt9fUUuX2JDcmVhdGU9dHJ1ZTtrPXAuc3Vic3RyaW5nKDEpKyIoJyIrcS5zYXAudWlkKCkrIicpIjt0aGlzLm9EYXRhW2tdPUU7RS5fX21ldGFkYXRhPXt0eXBlOiIiK28uZW50aXR5VHlwZX07dT10aGlzLl9jcmVhdGVSZXF1ZXN0VXJsKHApO3I9dGhpcy5fY3JlYXRlUmVxdWVzdCh1LCJQT1NUIix0cnVlLEUpO3IuZW50aXR5VHlwZXM9e307ci5lbnRpdHlUeXBlc1tvLmVudGl0eVR5cGVdPXRydWU7dGhpcy5vUmVxdWVzdFF1ZXVlW2tdPXI7cmV0dXJuIHRoaXMuZ2V0Q29udGV4dCgiLyIrayl9O2cucHJvdG90eXBlLl9jcmVhdGVQcm9wZXJ0eVZhbHVlPWZ1bmN0aW9uKHQpe3ZhciBuPXRbMF07dmFyIFQ9dFsxXTtpZihuLnRvVXBwZXJDYXNlKCkhPT0nRURNJyl7dmFyIG89e307dmFyIGg9dGhpcy5vTWV0YWRhdGEuX2dldE9iamVjdE1ldGFkYXRhKCJjb21wbGV4VHlwZSIsVCxuKTtmb3IodmFyIGk9MDtpPGgucHJvcGVydHkubGVuZ3RoO2krKyl7dmFyIHA9aC5wcm9wZXJ0eVtpXTt2YXIgdD1wLnR5cGUuc3BsaXQoJy4nKTtvW3AubmFtZV09dGhpcy5fY3JlYXRlUHJvcGVydHlWYWx1ZSh0KX1yZXR1cm4gb31lbHNle3JldHVybiB0aGlzLl9nZXREZWZhdWx0UHJvcGVydHlWYWx1ZShULG4pfX07Zy5wcm90b3R5cGUuX2dldERlZmF1bHRQcm9wZXJ0eVZhbHVlPWZ1bmN0aW9uKHQsbil7cmV0dXJuIHVuZGVmaW5lZH07Zy5wcm90b3R5cGUuX25vcm1hbGl6ZVBhdGg9ZnVuY3Rpb24ocCxvKXtpZihwJiZwLmluZGV4T2YoJz8nKSE9LTEpe3A9cC5zdWJzdHIoMCxwLmluZGV4T2YoJz8nKSl9aWYoIW8mJiFxLnNhcC5zdGFydHNXaXRoKHAsIi8iKSl7cD0nLycrcDtxLnNhcC5sb2cud2FybmluZygic1BhdGggc2hvdWxkIGJlIGFic29sdXRlIGlmIG5vIENvbnRleHQgaXMgc2V0Iil9cmV0dXJuIHRoaXMucmVzb2x2ZShwLG8pfTtnLnByb3RvdHlwZS5zZXRSZWZyZXNoQWZ0ZXJDaGFuZ2U9ZnVuY3Rpb24ocil7dGhpcy5iUmVmcmVzaEFmdGVyQ2hhbmdlPXJ9O2cucHJvdG90eXBlLmlzTGlzdD1mdW5jdGlvbihwLG8pe3ZhciBwPXRoaXMucmVzb2x2ZShwLG8pO3JldHVybiBwJiZwLnN1YnN0cihwLmxhc3RJbmRleE9mKCIvIikpLmluZGV4T2YoIigiKT09PS0xfTtnLnByb3RvdHlwZS5fcmVxdWVzdD1mdW5jdGlvbihyLHMsRSxoLEgsbSl7aWYodGhpcy5iRGVzdHJveWVkKXtyZXR1cm57YWJvcnQ6ZnVuY3Rpb24oKXt9fX12YXIgdD10aGlzO2Z1bmN0aW9uIHcoaSl7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIEk9cS5pbkFycmF5KFIsdC5hUGVuZGluZ1JlcXVlc3RIYW5kbGVzKTtpZihJPi0xKXt0LmFQZW5kaW5nUmVxdWVzdEhhbmRsZXMuc3BsaWNlKEksMSl9aWYoIShSJiZSLmJTdXBwcmVzc0Vycm9ySGFuZGxlckNhbGwpKXtpLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19fXZhciBSPU9EYXRhLnJlcXVlc3Qocix3KHN8fE9EYXRhLmRlZmF1bHRTdWNjZXNzKSx3KEV8fE9EYXRhLmRlZmF1bHRFcnJvciksaCxILG0pO2lmKHIuYXN5bmMhPT1mYWxzZSl7dGhpcy5hUGVuZGluZ1JlcXVlc3RIYW5kbGVzLnB1c2goUil9cmV0dXJuIFJ9O2cucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXtpZih0aGlzLmFQZW5kaW5nUmVxdWVzdEhhbmRsZXMpe2Zvcih2YXIgaT10aGlzLmFQZW5kaW5nUmVxdWVzdEhhbmRsZXMubGVuZ3RoLTE7aT49MDtpLS0pe3ZhciByPXRoaXMuYVBlbmRpbmdSZXF1ZXN0SGFuZGxlc1tpXTtpZihyJiZyLmFib3J0KXtyLmJTdXBwcmVzc0Vycm9ySGFuZGxlckNhbGw9dHJ1ZTtyLmFib3J0KCl9fWRlbGV0ZSB0aGlzLmFQZW5kaW5nUmVxdWVzdEhhbmRsZXN9aWYoISF0aGlzLm9NZXRhZGF0YUxvYWRFdmVudCl7cS5zYXAuY2xlYXJEZWxheWVkQ2FsbCh0aGlzLm9NZXRhZGF0YUxvYWRFdmVudCl9aWYoISF0aGlzLm9NZXRhZGF0YUZhaWxlZEV2ZW50KXtxLnNhcC5jbGVhckRlbGF5ZWRDYWxsKHRoaXMub01ldGFkYXRhRmFpbGVkRXZlbnQpfWlmKHRoaXMub01ldGFkYXRhKXt0aGlzLm9NZXRhZGF0YS5kZXN0cm95KCk7ZGVsZXRlIHRoaXMub01ldGFkYXRhfWlmKHRoaXMub0Fubm90YXRpb25zKXt0aGlzLm9Bbm5vdGF0aW9ucy5kZXN0cm95KCk7ZGVsZXRlIHRoaXMub0Fubm90YXRpb25zfU0ucHJvdG90eXBlLmRlc3Ryb3kuYXBwbHkodGhpcyxhcmd1bWVudHMpfTtyZXR1cm4gZ30sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5tb2RlbC5yZXNvdXJjZS5SZXNvdXJjZU1vZGVsJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLm1vZGVsLnJlc291cmNlLlJlc291cmNlTW9kZWwnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvbW9kZWwvcmVzb3VyY2UvUmVzb3VyY2VNb2RlbCIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ3NhcC91aS9tb2RlbC9Nb2RlbCcsJy4vUmVzb3VyY2VQcm9wZXJ0eUJpbmRpbmcnXSxmdW5jdGlvbihxLE0sUil7InVzZSBzdHJpY3QiO3ZhciBhPU0uZXh0ZW5kKCJzYXAudWkubW9kZWwucmVzb3VyY2UuUmVzb3VyY2VNb2RlbCIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKGQpe00uYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMuYkFzeW5jPSEhKGQmJmQuYXN5bmMpO3RoaXMuc0RlZmF1bHRCaW5kaW5nTW9kZT10aGlzLmJBc3luYz9zYXAudWkubW9kZWwuQmluZGluZ01vZGUuT25lV2F5OnNhcC51aS5tb2RlbC5CaW5kaW5nTW9kZS5PbmVUaW1lO3RoaXMubVN1cHBvcnRlZEJpbmRpbmdNb2Rlcz17Ik9uZVdheSI6dHJ1ZSwiVHdvV2F5IjpmYWxzZSwiT25lVGltZSI6dHJ1ZX07aWYodGhpcy5iQXN5bmMmJnRoaXMuc0RlZmF1bHRCaW5kaW5nTW9kZT09c2FwLnVpLm1vZGVsLkJpbmRpbmdNb2RlLk9uZVRpbWUpe3Euc2FwLmxvZy53YXJuaW5nKCJVc2luZyBiaW5kaW5nIG1vZGUgT25lVGltZSBmb3IgYXN5bmNocm9ub3VzIFJlc291cmNlTW9kZWwgaXMgbm90IHN1cHBvcnRlZCEiKX10aGlzLm9EYXRhPWQ7Xyh0aGlzLHRydWUpfSxtZXRhZGF0YTp7cHVibGljTWV0aG9kczpbImdldFJlc291cmNlQnVuZGxlIl19fSk7YS5wcm90b3R5cGUubG9hZFJlc291cmNlQnVuZGxlPWZ1bmN0aW9uKGQpe3ZhciBjPXNhcC51aS5nZXRDb3JlKCkuZ2V0Q29uZmlndXJhdGlvbigpLHIsdSxsLGk7bD1kLmJ1bmRsZUxvY2FsZTtpZighbCl7bD1jLmdldExhbmd1YWdlKCl9aT1jLmdldE9yaWdpbkluZm8oKTt1PWIoZC5idW5kbGVVcmwsZC5idW5kbGVOYW1lKTtyPXEuc2FwLnJlc291cmNlcyh7dXJsOnUsbG9jYWxlOmwsaW5jbHVkZUluZm86aSxhc3luYzohIWQuYXN5bmN9KTtyZXR1cm4gcn07YS5wcm90b3R5cGUuZW5oYW5jZT1mdW5jdGlvbihkKXt2YXIgdD10aGlzLHIscD10aGlzLmJBc3luYz9uZXcgUHJvbWlzZShmdW5jdGlvbihlKXtyPWV9KTpudWxsO2Z1bmN0aW9uIGMoKXtkLmFzeW5jPXQuYkFzeW5jO3ZhciBlPXQubG9hZFJlc291cmNlQnVuZGxlKGQpO2lmKGUgaW5zdGFuY2VvZiBQcm9taXNlKXtlLnRoZW4oZnVuY3Rpb24oZil7dC5fb1Jlc291cmNlQnVuZGxlLl9lbmhhbmNlKGYpO3IodHJ1ZSl9LGZ1bmN0aW9uKCl7cih0cnVlKX0pfWVsc2UgaWYoZSl7dC5fb1Jlc291cmNlQnVuZGxlLl9lbmhhbmNlKGUpfX1pZih0aGlzLl9vUHJvbWlzZSl7UHJvbWlzZS5yZXNvbHZlKHRoaXMuX29Qcm9taXNlKS50aGVuKGMpfWVsc2V7YygpfXJldHVybiBwfTthLnByb3RvdHlwZS5iaW5kUHJvcGVydHk9ZnVuY3Rpb24ocCl7dmFyIEI9bmV3IFIodGhpcyxwKTtyZXR1cm4gQn07YS5wcm90b3R5cGUuZ2V0UHJvcGVydHk9ZnVuY3Rpb24ocCl7cmV0dXJuIHRoaXMuX29SZXNvdXJjZUJ1bmRsZT90aGlzLl9vUmVzb3VyY2VCdW5kbGUuZ2V0VGV4dChwKTpudWxsfTthLnByb3RvdHlwZS5nZXRSZXNvdXJjZUJ1bmRsZT1mdW5jdGlvbigpe2lmKCF0aGlzLmJBc3luYyl7cmV0dXJuIHRoaXMuX29SZXNvdXJjZUJ1bmRsZX1lbHNle3ZhciBwPXRoaXMuX29Qcm9taXNlO2lmKHApe3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyLGMpe2Z1bmN0aW9uIGQoQil7cihCKX1wLnRoZW4oZCxkKX0pfWVsc2V7cmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzLl9vUmVzb3VyY2VCdW5kbGUpfX19O2EucHJvdG90eXBlLl9oYW5kbGVMb2NhbGl6YXRpb25DaGFuZ2U9ZnVuY3Rpb24oKXtfKHRoaXMsZmFsc2UpfTtmdW5jdGlvbiBfKG0sdCl7dmFyIGQ9bS5vRGF0YTtpZihkJiYoZC5idW5kbGVVcmx8fGQuYnVuZGxlTmFtZSkpe3ZhciByPW0ubG9hZFJlc291cmNlQnVuZGxlKGQpO2lmKHIgaW5zdGFuY2VvZiBQcm9taXNlKXt2YXIgZT17dXJsOmIoZC5idW5kbGVVcmwsZC5idW5kbGVOYW1lKSxhc3luYzp0cnVlfTttLmZpcmVSZXF1ZXN0U2VudChlKTttLl9vUHJvbWlzZT1yO20uX29Qcm9taXNlLnRoZW4oZnVuY3Rpb24oQil7bS5fb1Jlc291cmNlQnVuZGxlPUI7ZGVsZXRlIG0uX29Qcm9taXNlO20uY2hlY2tVcGRhdGUodHJ1ZSk7bS5maXJlUmVxdWVzdENvbXBsZXRlZChlKX0pfWVsc2V7bS5fb1Jlc291cmNlQnVuZGxlPXJ9fWVsc2UgaWYodCl7dGhyb3cgbmV3IEVycm9yKCJOZWl0aGVyIGJ1bmRsZVVybCBub3IgYnVuZGxlTmFtZSBhcmUgZ2l2ZW4uIE9uZSBvZiB0aGVzZSBpcyBtYW5kYXRvcnkuIil9fTtmdW5jdGlvbiBiKGMsZCl7dmFyIHU9YztpZihkKXt1PXEuc2FwLmdldE1vZHVsZVBhdGgoZCwnLnByb3BlcnRpZXMnKX1yZXR1cm4gdX07cmV0dXJuIGF9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkubW9kZWwueG1sLlhNTFByb3BlcnR5QmluZGluZycpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5tb2RlbC54bWwuWE1MUHJvcGVydHlCaW5kaW5nJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL21vZGVsL3htbC9YTUxQcm9wZXJ0eUJpbmRpbmciLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvbW9kZWwvQ2xpZW50UHJvcGVydHlCaW5kaW5nJ10sZnVuY3Rpb24ocSxDKXsidXNlIHN0cmljdCI7dmFyIFg9Qy5leHRlbmQoInNhcC51aS5tb2RlbC54bWwuWE1MUHJvcGVydHlCaW5kaW5nIik7WC5wcm90b3R5cGUuc2V0VmFsdWU9ZnVuY3Rpb24odil7aWYodGhpcy5vVmFsdWUhPXYpe3RoaXMub01vZGVsLnNldFByb3BlcnR5KHRoaXMuc1BhdGgsdix0aGlzLm9Db250ZXh0KX19O1gucHJvdG90eXBlLmNoZWNrVXBkYXRlPWZ1bmN0aW9uKGYpe3ZhciB2PXRoaXMuX2dldFZhbHVlKCk7aWYoIXEuc2FwLmVxdWFsKHYsdGhpcy5vVmFsdWUpfHxmKXt0aGlzLm9WYWx1ZT12O3RoaXMuX2ZpcmVDaGFuZ2Uoe3JlYXNvbjpzYXAudWkubW9kZWwuQ2hhbmdlUmVhc29uLkNoYW5nZX0pfX07cmV0dXJuIFh9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuYmFzZS5NYW5hZ2VkT2JqZWN0Jykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmJhc2UuTWFuYWdlZE9iamVjdCcpO3NhcC51aS5kZWZpbmUoInNhcC91aS9iYXNlL01hbmFnZWRPYmplY3QiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCcuL0JpbmRpbmdQYXJzZXInLCcuL0RhdGFUeXBlJywnLi9FdmVudFByb3ZpZGVyJywnLi9NYW5hZ2VkT2JqZWN0TWV0YWRhdGEnLCdzYXAvdWkvbW9kZWwvQ29tcG9zaXRlQmluZGluZycsJ3NhcC91aS9tb2RlbC9Db250ZXh0QmluZGluZycsJ3NhcC91aS9tb2RlbC9Nb2RlbCcsJ3NhcC91aS9tb2RlbC9UeXBlJywnanF1ZXJ5LnNhcC5hY3QnLCdqcXVlcnkuc2FwLnNjcmlwdCcsJ2pxdWVyeS5zYXAuc3RyaW5ncyddLGZ1bmN0aW9uKHEsQixELEUsTSxDLGIsYyxUKXsidXNlIHN0cmljdCI7dmFyIGQ9RS5leHRlbmQoInNhcC51aS5iYXNlLk1hbmFnZWRPYmplY3QiLHttZXRhZGF0YTp7ImFic3RyYWN0Ijp0cnVlLHB1YmxpY01ldGhvZHM6WyJnZXRJZCIsImdldE1ldGFkYXRhIiwiZ2V0TW9kZWwiLCJzZXRNb2RlbCIsImhhc01vZGVsIiwiYmluZFByb3BlcnR5IiwidW5iaW5kUHJvcGVydHkiLCJiaW5kQWdncmVnYXRpb24iLCJ1bmJpbmRBZ2dyZWdhdGlvbiIsImJpbmRPYmplY3QiLCJ1bmJpbmRPYmplY3QiLCJnZXRPYmplY3RCaW5kaW5nIl0sbGlicmFyeToic2FwLnVpLmNvcmUiLHByb3BlcnRpZXM6e30sYWdncmVnYXRpb25zOnt9LGFzc29jaWF0aW9uczp7fSxldmVudHM6eyJ2YWxpZGF0aW9uU3VjY2VzcyI6e2VuYWJsZUV2ZW50QnViYmxpbmc6dHJ1ZX0sInZhbGlkYXRpb25FcnJvciI6e2VuYWJsZUV2ZW50QnViYmxpbmc6dHJ1ZX0sInBhcnNlRXJyb3IiOntlbmFibGVFdmVudEJ1YmJsaW5nOnRydWV9LCJmb3JtYXRFcnJvciI6e2VuYWJsZUV2ZW50QnViYmxpbmc6dHJ1ZX19fSxjb25zdHJ1Y3RvcjpmdW5jdGlvbihpLHMsUyl7RS5hcHBseSh0aGlzKTtpZih0eXBlb2YoaSkhPSJzdHJpbmciJiZhcmd1bWVudHMubGVuZ3RoPjApe1M9cztzPWk7aWYocyYmcy5pZCl7aT1zWyJpZCJdfWVsc2V7aT1udWxsfX1pZighaSl7aT10aGlzLmdldE1ldGFkYXRhKCkudWlkKCl8fHEuc2FwLnVpZCgpfWVsc2V7dmFyIHA9ZC5fZm5JZFByZXByb2Nlc3NvcjtpPShwP3AuY2FsbCh0aGlzLGkpOmkpO3ZhciB0PUQuZ2V0VHlwZSgic2FwLnVpLmNvcmUuSUQiKTtpZighdC5pc1ZhbGlkKGkpKXt0aHJvdyBuZXcgRXJyb3IoIlwiIitpKyJcIiBpcyBub3QgYSB2YWxpZCBJRC4iKX19dGhpcy5zSWQ9aTt0aGlzLm1Qcm9wZXJ0aWVzPXRoaXMuZ2V0TWV0YWRhdGEoKS5jcmVhdGVQcm9wZXJ0eUJhZygpO3RoaXMubUFnZ3JlZ2F0aW9ucz17fTt0aGlzLm1Bc3NvY2lhdGlvbnM9e307dGhpcy5tTWV0aG9kcz17fTt0aGlzLm9QYXJlbnQ9bnVsbDt0aGlzLmFEZWxlZ2F0ZXM9W107dGhpcy5hQmVmb3JlRGVsZWdhdGVzPVtdO3RoaXMuaVN1cHByZXNzSW52YWxpZGF0ZT0wO3RoaXMub1Byb3BhZ2F0ZWRQcm9wZXJ0aWVzPXtvTW9kZWxzOnt9LG9CaW5kaW5nQ29udGV4dHM6e319O3RoaXMub01vZGVscz17fTt0aGlzLm9CaW5kaW5nQ29udGV4dHM9e307dGhpcy5tQmluZGluZ0luZm9zPXt9O3RoaXMuc0JpbmRpbmdQYXRoPW51bGw7dGhpcy5tQmluZGluZ1BhcmFtZXRlcnM9bnVsbDt0aGlzLm1Cb3VuZE9iamVjdHM9e307dGhpcy5fc093bmVySWQ9ZC5fc093bmVySWQ7dHJ5e2lmKHRoaXMucmVnaXN0ZXIpdGhpcy5yZWdpc3RlcigpO2lmKHRoaXMuX2luaXRDb21wb3NpdGVTdXBwb3J0KXt0aGlzLl9pbml0Q29tcG9zaXRlU3VwcG9ydChzKX1pZih0aGlzLmluaXQpe3RoaXMuaW5pdCgpfXRoaXMuYXBwbHlTZXR0aW5ncyhzLFMpfWNhdGNoKGUpe2lmKHRoaXMuZGVyZWdpc3Rlcil0aGlzLmRlcmVnaXN0ZXIoKTt0aHJvdyBlfX19LE0pO2QuY3JlYXRlPWZ1bmN0aW9uKHYsayl7aWYoIXZ8fHYgaW5zdGFuY2VvZiBkfHx0eXBlb2YgdiE9PSJvYmplY3QifHx2IGluc3RhbmNlb2YgU3RyaW5nKXtyZXR1cm4gdn1mdW5jdGlvbiBnKHQpe2lmKHR5cGVvZiB0PT09ImZ1bmN0aW9uIil7cmV0dXJuIHR9aWYodHlwZW9mIHQ9PT0ic3RyaW5nIil7cmV0dXJuIHEuc2FwLmdldE9iamVjdCh0KX19dmFyIGY9Zyh2LlR5cGUpfHxnKGsmJmsudHlwZSk7aWYodHlwZW9mIGY9PT0iZnVuY3Rpb24iKXtyZXR1cm4gbmV3IGYodil9dmFyIG09IkRvbid0IGtub3cgaG93IHRvIGNyZWF0ZSBhIE1hbmFnZWRPYmplY3QgZnJvbSAiK3YrIiAoIisodHlwZW9mIHYpKyIpIjtxLnNhcC5sb2cuZmF0YWwobSk7dGhyb3cgbmV3IEVycm9yKG0pfTtkLl9mbklkUHJlcHJvY2Vzc29yPW51bGw7ZC5fZm5TZXR0aW5nc1ByZXByb2Nlc3Nvcj1udWxsO2QucnVuV2l0aFByZXByb2Nlc3NvcnM9ZnVuY3Rpb24oZixwKXt2YXIgbz17aWQ6dGhpcy5fZm5JZFByZXByb2Nlc3NvcixzZXR0aW5nczp0aGlzLl9mblNldHRpbmdzUHJlcHJvY2Vzc29yfTtwPXB8fHt9O3RoaXMuX2ZuSWRQcmVwcm9jZXNzb3I9cC5pZDt0aGlzLl9mblNldHRpbmdzUHJlcHJvY2Vzc29yPXAuc2V0dGluZ3M7dHJ5e3ZhciByPWYuY2FsbCgpO3RoaXMuX2ZuSWRQcmVwcm9jZXNzb3I9by5pZDt0aGlzLl9mblNldHRpbmdzUHJlcHJvY2Vzc29yPW8uc2V0dGluZ3M7cmV0dXJuIHJ9Y2F0Y2goZSl7dGhpcy5fZm5JZFByZXByb2Nlc3Nvcj1vLmlkO3RoaXMuX2ZuU2V0dGluZ3NQcmVwcm9jZXNzb3I9by5zZXR0aW5nczt0aHJvdyBlfX07ZC5nZXRPd25lcklkRm9yPWZ1bmN0aW9uKG8pe3JldHVybiBvJiZvLl9zT3duZXJJZH07ZC5ydW5XaXRoT3duZXI9ZnVuY3Rpb24oZixvKXt2YXIgYT1kLl9zT3duZXJJZDt0cnl7ZC5fc093bmVySWQ9by5nZXRJZCgpO3ZhciByPWYuY2FsbCgpO2QuX3NPd25lcklkPWE7cmV0dXJuIHJ9Y2F0Y2goZSl7ZC5fc093bmVySWQ9YTt0aHJvdyBlfX07ZC5wcm90b3R5cGUuYXBwbHlTZXR0aW5ncz1mdW5jdGlvbihzLFMpe2lmKCFzfHxxLmlzRW1wdHlPYmplY3Qocykpe3JldHVybiB0aGlzfXZhciBtPXRoaXMuZ2V0TWV0YWRhdGEoKSx2PW0uZ2V0SlNPTktleXMoKSxhPWQuY3JlYXRlLHA9ZC5fZm5TZXR0aW5nc1ByZXByb2Nlc3NvcixrLFYsSztwJiZwLmNhbGwodGhpcyxzKTtpZihzLm1vZGVscyl7aWYodHlwZW9mIHMubW9kZWxzIT09Im9iamVjdCIpe3Rocm93IG5ldyBFcnJvcigibW9kZWxzIG11c3QgYmUgYSBzaW1wbGUgb2JqZWN0Iil9aWYocy5tb2RlbHMgaW5zdGFuY2VvZiBjKXt0aGlzLnNldE1vZGVsKHMubW9kZWxzKX1lbHNle2ZvcihrIGluIHMubW9kZWxzKXt0aGlzLnNldE1vZGVsKHMubW9kZWxzW2tdLGs9PT0idW5kZWZpbmVkIj91bmRlZmluZWQ6ayl9fWRlbGV0ZSBzLm1vZGVsc31pZihzLmJpbmRpbmdDb250ZXh0cyl7aWYodHlwZW9mIHMuYmluZGluZ0NvbnRleHRzIT09Im9iamVjdCIpe3Rocm93IG5ldyBFcnJvcigiYmluZGluZ0NvbnRleHRzIG11c3QgYmUgYSBzaW1wbGUgb2JqZWN0Iil9aWYocy5iaW5kaW5nQ29udGV4dHMgaW5zdGFuY2VvZiBzYXAudWkubW9kZWwuQ29udGV4dCl7dGhpcy5zZXRCaW5kaW5nQ29udGV4dChzLmJpbmRpbmdDb250ZXh0cyl9ZWxzZXtmb3IoayBpbiBzLmJpbmRpbmdDb250ZXh0cyl7dGhpcy5zZXRCaW5kaW5nQ29udGV4dChzLmJpbmRpbmdDb250ZXh0c1trXSxrPT09InVuZGVmaW5lZCI/dW5kZWZpbmVkOmspfX1kZWxldGUgcy5iaW5kaW5nQ29udGV4dHN9aWYocy5vYmplY3RCaW5kaW5ncyl7aWYodHlwZW9mIHMub2JqZWN0QmluZGluZ3MhPT0ic3RyaW5nIiYmdHlwZW9mIHMub2JqZWN0QmluZGluZ3MhPT0ib2JqZWN0Iil7dGhyb3cgbmV3IEVycm9yKCJiaW5kaW5nIG11c3QgYmUgYSBzdHJpbmcgb3Igc2ltcGxlIG9iamVjdCIpfWlmKHR5cGVvZiBzLm9iamVjdEJpbmRpbmdzPT09InN0cmluZyJ8fHMub2JqZWN0QmluZGluZ3MucGF0aCl7dGhpcy5iaW5kT2JqZWN0KHMub2JqZWN0QmluZGluZ3MpfWVsc2V7Zm9yKHZhciBrIGluIHMub2JqZWN0QmluZGluZ3Mpe3Mub2JqZWN0QmluZGluZ3MubW9kZWw9azt0aGlzLmJpbmRPYmplY3Qocy5vYmplY3RCaW5kaW5nc1trXSl9fWRlbGV0ZSBzLm9iamVjdEJpbmRpbmdzfWZvcihrIGluIHMpe2lmKEs9dltrXSl7Vj1zW2tdO3N3aXRjaChLLl9pS2luZCl7Y2FzZSAwOnZhciBvPXRoaXMuZXh0cmFjdEJpbmRpbmdJbmZvKFYsUyk7aWYobyYmdHlwZW9mIG89PT0ib2JqZWN0Iil7dGhpcy5iaW5kUHJvcGVydHkoayxvKX1lbHNle3RoaXNbSy5fc011dGF0b3JdKG98fFYpfWJyZWFrO2Nhc2UgMTp2YXIgbz1LLmFsdFR5cGVzJiZ0aGlzLmV4dHJhY3RCaW5kaW5nSW5mbyhWLFMpO2lmKG8mJnR5cGVvZiBvPT09Im9iamVjdCIpe3RoaXMuYmluZFByb3BlcnR5KGssbyl9ZWxzZXt0aGlzW0suX3NNdXRhdG9yXShhKG98fFYsSykpfWJyZWFrO2Nhc2UgMjp2YXIgbz10aGlzLmV4dHJhY3RCaW5kaW5nSW5mbyhWLFMpO2lmKG8mJnR5cGVvZiBvPT09Im9iamVjdCIpe3RoaXMuYmluZEFnZ3JlZ2F0aW9uKGssbyl9ZWxzZXtWPW98fFY7aWYoViYmIXEuaXNBcnJheShWKSl7Vj1bVl19aWYoVil7Zm9yKHZhciBpPTAsbD1WLmxlbmd0aDtpPGw7aSsrKXt0aGlzW0suX3NNdXRhdG9yXShhKFZbaV0sSykpfX19YnJlYWs7Y2FzZSAzOnRoaXNbSy5fc011dGF0b3JdKFYpO2JyZWFrO2Nhc2UgNDppZihWJiYhcS5pc0FycmF5KFYpKXtWPVtWXX1pZihWKXtmb3IodmFyIGk9MCxsPVYubGVuZ3RoO2k8bDtpKyspe3RoaXNbSy5fc011dGF0b3JdKFZbaV0pfX1icmVhaztjYXNlIDU6aWYodHlwZW9mIFY9PSJmdW5jdGlvbiIpe3RoaXNbSy5fc011dGF0b3JdKFYpfWVsc2V7dGhpc1tLLl9zTXV0YXRvcl0oVlswXSxWWzFdLFZbMl0pfWJyZWFrO2RlZmF1bHQ6YnJlYWt9fX1yZXR1cm4gdGhpc307ZC5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4iTWFuYWdlZE9iamVjdCAiK3RoaXMuZ2V0TWV0YWRhdGEoKS5nZXROYW1lKCkrIiMiK3RoaXMuZ2V0SWQoKX07ZC5wcm90b3R5cGUuZ2V0SWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zSWR9O2QucHJvdG90eXBlLnNldFByb3BlcnR5PWZ1bmN0aW9uKHAsdixzKXt2YXIgbz10aGlzLm1Qcm9wZXJ0aWVzW3BdO3Y9dGhpcy52YWxpZGF0ZVByb3BlcnR5KHAsdik7aWYocS5zYXAuZXF1YWwobyx2KSl7cmV0dXJuIHRoaXN9aWYocyl7cS5zYXAuYWN0LnJlZnJlc2goKTt0aGlzLmlTdXBwcmVzc0ludmFsaWRhdGUrK310aGlzLm1Qcm9wZXJ0aWVzW3BdPXY7aWYoIXRoaXMuaXNJbnZhbGlkYXRlU3VwcHJlc3NlZCgpKXt0aGlzLmludmFsaWRhdGUoKX10aGlzLnVwZGF0ZU1vZGVsUHJvcGVydHkocCx2LG8pO0UucHJvdG90eXBlLmZpcmVFdmVudC5hcHBseSh0aGlzLFsiX2NoYW5nZSIseyJpZCI6dGhpcy5nZXRJZCgpLCJuYW1lIjpwLCJvbGRWYWx1ZSI6bywibmV3VmFsdWUiOnZ9XSk7aWYocyl7dGhpcy5pU3VwcHJlc3NJbnZhbGlkYXRlLS19cmV0dXJuIHRoaXN9O2QucHJvdG90eXBlLmdldFByb3BlcnR5PWZ1bmN0aW9uKHApe3ZhciB2PXRoaXMubVByb3BlcnRpZXNbcF0sbT10aGlzLmdldE1ldGFkYXRhKCksUD1tLmdldEFsbFByb3BlcnRpZXMoKVtwXSx0O2lmKCFQKXt0aHJvdyBuZXcgRXJyb3IoIlByb3BlcnR5IFwiIitwKyJcIiBkb2VzIG5vdCBleGlzdCBpbiAiK3RoaXMpfXQ9RC5nZXRUeXBlKFAudHlwZSk7aWYodCBpbnN0YW5jZW9mIEQmJnQuaXNBcnJheVR5cGUoKSYmcS5pc0FycmF5KHYpKXt2PXYuc2xpY2UoMCl9aWYodiBpbnN0YW5jZW9mIFN0cmluZyl7dj12LnZhbHVlT2YoKX1yZXR1cm4gdn07ZC5wcm90b3R5cGUudmFsaWRhdGVQcm9wZXJ0eT1mdW5jdGlvbihwLHYpe3ZhciBtPXRoaXMuZ2V0TWV0YWRhdGEoKSxQPW0uZ2V0QWxsUHJvcGVydGllcygpW3BdLHQ7aWYoIVApe3Rocm93IG5ldyBFcnJvcigiUHJvcGVydHkgXCIiK3ArIlwiIGRvZXMgbm90IGV4aXN0IGluICIrdGhpcyl9dD1ELmdldFR5cGUoUC50eXBlKTtpZih0IGluc3RhbmNlb2YgRCYmdC5pc0FycmF5VHlwZSgpJiZxLmlzQXJyYXkodikpe3Y9di5zbGljZSgwKX1pZih2PT09bnVsbHx8dj09PXVuZGVmaW5lZCl7aWYoUC5kZWZhdWx0VmFsdWUhPT1udWxsKXt2PVAuZGVmYXVsdFZhbHVlfWVsc2V7dj10LmdldERlZmF1bHRWYWx1ZSgpfX1lbHNlIGlmKHQgaW5zdGFuY2VvZiBEKXtpZih0LmdldE5hbWUoKT09InN0cmluZyIpe2lmKCEodHlwZW9mIHY9PSJzdHJpbmcifHx2IGluc3RhbmNlb2YgU3RyaW5nKSl7dj0iIit2fX1lbHNlIGlmKHQuZ2V0TmFtZSgpPT0ic3RyaW5nW10iKXtpZih0eXBlb2Ygdj09InN0cmluZyIpe3Y9W3ZdfWlmKCFxLmlzQXJyYXkodikpe3Rocm93IG5ldyBFcnJvcigiXCIiK3YrIlwiIGlzIG9mIHR5cGUgIit0eXBlb2YgdisiLCBleHBlY3RlZCBzdHJpbmdbXSIrIiBmb3IgcHJvcGVydHkgXCIiK3ArIlwiIG9mICIrdGhpcyl9Zm9yKHZhciBpPTA7aTx2Lmxlbmd0aDtpKyspe2lmKCF0eXBlb2YgdltpXT09InN0cmluZyIpe3ZbaV09IiIrdltpXX19fWVsc2UgaWYoIXQuaXNWYWxpZCh2KSl7dGhyb3cgbmV3IEVycm9yKCJcIiIrdisiXCIgaXMgb2YgdHlwZSAiK3R5cGVvZiB2KyIsIGV4cGVjdGVkICIrdC5nZXROYW1lKCkrIiBmb3IgcHJvcGVydHkgXCIiK3ArIlwiIG9mICIrdGhpcyl9fWVsc2UgaWYoISh2IGluIHQpKXt0aHJvdyBuZXcgRXJyb3IoIlwiIit2KyJcIiBpcyBub3QgYSB2YWxpZCBlbnRyeSBvZiB0aGUgZW51bWVyYXRpb24gZm9yIHByb3BlcnR5IFwiIitwKyJcIiBvZiAiK3RoaXMpfWlmKHQmJnQubm9ybWFsaXplJiZ0eXBlb2YgdC5ub3JtYWxpemU9PT0iZnVuY3Rpb24iKXt2PXQubm9ybWFsaXplKHYpfXJldHVybiB2fTtkLnByb3RvdHlwZS5nZXRPcmlnaW5JbmZvPWZ1bmN0aW9uKHApe3ZhciB2PXRoaXMubVByb3BlcnRpZXNbcF07aWYoISh2IGluc3RhbmNlb2YgU3RyaW5nJiZ2Lm9yaWdpbkluZm8pKXtyZXR1cm4gbnVsbH1yZXR1cm4gdi5vcmlnaW5JbmZvfTtkLnByb3RvdHlwZS5zZXRBc3NvY2lhdGlvbj1mdW5jdGlvbihhLGkscyl7aWYoaSBpbnN0YW5jZW9mIGQpe2k9aS5nZXRJZCgpfWVsc2UgaWYoaSE9bnVsbCYmdHlwZW9mIGkhPT0ic3RyaW5nIil7cmV0dXJuIHRoaXN9aWYodGhpcy5tQXNzb2NpYXRpb25zW2FdPT09aSl7cmV0dXJuIHRoaXN9aWYocyl7dGhpcy5pU3VwcHJlc3NJbnZhbGlkYXRlKyt9dGhpcy5tQXNzb2NpYXRpb25zW2FdPWk7aWYoIXRoaXMuaXNJbnZhbGlkYXRlU3VwcHJlc3NlZCgpKXt0aGlzLmludmFsaWRhdGUoKX1pZihzKXt0aGlzLmlTdXBwcmVzc0ludmFsaWRhdGUtLX1yZXR1cm4gdGhpc307ZC5wcm90b3R5cGUuZ2V0QXNzb2NpYXRpb249ZnVuY3Rpb24oYSxvKXt2YXIgcj10aGlzLm1Bc3NvY2lhdGlvbnNbYV07aWYoIXIpe3I9dGhpcy5tQXNzb2NpYXRpb25zW2FdPW98fG51bGx9ZWxzZXtpZih0eXBlb2Ygci5sZW5ndGg9PT0nbnVtYmVyJyYmIShyLnByb3BlcnR5SXNFbnVtZXJhYmxlKCdsZW5ndGgnKSkpe3JldHVybiByLnNsaWNlKCl9cmV0dXJuIHJ9cmV0dXJuIHJ9O2QucHJvdG90eXBlLmFkZEFzc29jaWF0aW9uPWZ1bmN0aW9uKGEsaSxzKXtpZihpIGluc3RhbmNlb2YgZCl7aT1pLmdldElkKCl9ZWxzZSBpZih0eXBlb2YgaSE9PSJzdHJpbmciKXtyZXR1cm4gdGhpc31pZihzKXt0aGlzLmlTdXBwcmVzc0ludmFsaWRhdGUrK312YXIgST10aGlzLm1Bc3NvY2lhdGlvbnNbYV07aWYoIUkpe0k9dGhpcy5tQXNzb2NpYXRpb25zW2FdPVtpXX1lbHNle0kucHVzaChpKX1pZighdGhpcy5pc0ludmFsaWRhdGVTdXBwcmVzc2VkKCkpe3RoaXMuaW52YWxpZGF0ZSgpfWlmKHMpe3RoaXMuaVN1cHByZXNzSW52YWxpZGF0ZS0tfXJldHVybiB0aGlzfTtkLnByb3RvdHlwZS5yZW1vdmVBc3NvY2lhdGlvbj1mdW5jdGlvbihhLG8scyl7dmFyIEk9dGhpcy5tQXNzb2NpYXRpb25zW2FdO3ZhciBlPW51bGw7aWYocyl7dGhpcy5pU3VwcHJlc3NJbnZhbGlkYXRlKyt9aWYodHlwZW9mKG8pPT0ib2JqZWN0IiYmby5nZXRJZCl7bz1vLmdldElkKCl9aWYodHlwZW9mKG8pPT0ic3RyaW5nIil7Zm9yKHZhciBpPTA7aTxJLmxlbmd0aDtpKyspe2lmKElbaV09PW8pe289aTticmVha319fWlmKHR5cGVvZihvKT09Im51bWJlciIpe2lmKG88MHx8bz49SS5sZW5ndGgpe3Euc2FwLmxvZy53YXJuaW5nKCJNYW5hZ2VkT2JqZWN0LnJlbW92ZUFzc29jaWF0aW9uIGNhbGxlZCB3aXRoIGludmFsaWQgaW5kZXg6ICIrYSsiLCAiK28pfWVsc2V7ZT1JW29dO0kuc3BsaWNlKG8sMSk7aWYoIXRoaXMuaXNJbnZhbGlkYXRlU3VwcHJlc3NlZCgpKXt0aGlzLmludmFsaWRhdGUoKX19fWlmKHMpe3RoaXMuaVN1cHByZXNzSW52YWxpZGF0ZS0tfXJldHVybiBlfTtkLnByb3RvdHlwZS5yZW1vdmVBbGxBc3NvY2lhdGlvbj1mdW5jdGlvbihhLHMpe3ZhciBpPXRoaXMubUFzc29jaWF0aW9uc1thXTtpZighaSl7cmV0dXJuW119aWYocyl7dGhpcy5pU3VwcHJlc3NJbnZhbGlkYXRlKyt9ZGVsZXRlIHRoaXMubUFzc29jaWF0aW9uc1thXTtpZighdGhpcy5pc0ludmFsaWRhdGVTdXBwcmVzc2VkKCkpe3RoaXMuaW52YWxpZGF0ZSgpfWlmKHMpe3RoaXMuaVN1cHByZXNzSW52YWxpZGF0ZS0tfXJldHVybiBpfTtkLnByb3RvdHlwZS52YWxpZGF0ZUFnZ3JlZ2F0aW9uPWZ1bmN0aW9uKGEsbyxtKXt2YXIgZT10aGlzLmdldE1ldGFkYXRhKCksQT1lLmdldE1hbmFnZWRBZ2dyZWdhdGlvbihhKSxmLHQsaSxnO2lmKCFBKXtpZihhJiZlLl9tSGlkZGVuQWdncmVnYXRpb25zJiZlLl9tSGlkZGVuQWdncmVnYXRpb25zW2FdKXtBPWUuX21IaWRkZW5BZ2dyZWdhdGlvbnNbYV07cS5zYXAubG9nLmVycm9yKCJTdXBwb3J0IGZvciAnX21IaWRkZW5BZ2dyZWdhdGlvbnMnIGlzIGFib3V0IHRvIGJlIHJlbW92ZWQgKHdpdGggMS4xMiBsYXRlc3QpLiBIaWRkZW4gYWdncmVnYXRpb25zIGxpa2UgJyIrZS5nZXROYW1lKCkrIi4iK2ErIicgaW5zdGVhZCBjYW4gYmUgZGVjbGFyZWQgbGlrZSBub3JtYWwgYWdncmVnYXRpb25zIGJ1dCB3aXRoIHZpc2liaWxpdHk6J2hpZGRlbicuIil9ZWxzZXtnPSJBZ2dyZWdhdGlvbiBcIiIrYSsiXCIgZG9lcyBub3QgZXhpc3QgaW4gIit0aGlzO2lmKC9ec2FwXC4odWlcLmNvcmV8dWlcLmNvbW1vbnN8dWlcLnRhYmxlfHVpXC51eDN8bXxtYWtpdHx2aXp8dWlleHRcLmluYm94KSQvLnRlc3QoZS5nZXRMaWJyYXJ5TmFtZSgpfHwiIikpe3Rocm93IG5ldyBFcnJvcihnKX1lbHNle3Euc2FwLmxvZy5lcnJvcigiU3VwcG9ydCBmb3IgdW5kZWNsYXJlZCBhZ2dyZWdhdGlvbnMgaXMgYWJvdXQgdG8gYmUgcmVtb3ZlZCAod2l0aCAxLjEyIGxhdGVzdCkuIEhpZGRlbiBhZ2dyZWdhdGlvbnMgbGlrZSAnIitlLmdldE5hbWUoKSsiLiIrYSsiJyBjYW4gYmUgZGVjbGFyZWQgbGlrZSBub3JtYWwgYWdncmVnYXRpb25zIGJ1dCB3aXRoIHZpc2liaWxpdHk6J2hpZGRlbicuIik7cmV0dXJuIG99fX1pZihBLm11bHRpcGxlIT09bSl7dGhyb3cgbmV3IEVycm9yKCJBZ2dyZWdhdGlvbiAnIithKyInIG9mICIrdGhpcysiIHVzZWQgd2l0aCB3cm9uZyBjYXJkaW5hbGl0eSAoZGVjbGFyZWQgYXMgIisoQS5tdWx0aXBsZT8iMC4ubiI6IjAuLjEiKSsiKSIpfWlmKCFBLm11bHRpcGxlJiYhbyl7cmV0dXJuIG99dD1xLnNhcC5nZXRPYmplY3QoQS50eXBlKTtpZih0eXBlb2YgdD09PSJmdW5jdGlvbiImJm8gaW5zdGFuY2VvZiB0KXtyZXR1cm4gb31pZihvJiZvLmdldE1ldGFkYXRhJiZvLmdldE1ldGFkYXRhKCkuaXNJbnN0YW5jZU9mKEEudHlwZSkpe3JldHVybiBvfWY9QS5hbHRUeXBlcztpZihmJiZmLmxlbmd0aCl7aWYobz09bnVsbCl7cmV0dXJuIG99Zm9yKGk9MDtpPGYubGVuZ3RoO2krKyl7dD1ELmdldFR5cGUoZltpXSk7aWYodCBpbnN0YW5jZW9mIEQpe2lmKHQuaXNWYWxpZChvKSl7cmV0dXJuIG99fWVsc2UgaWYobyBpbiB0KXtyZXR1cm4gb319fWc9IlwiIitvKyJcIiBpcyBub3QgdmFsaWQgZm9yIGFnZ3JlZ2F0aW9uIFwiIithKyJcIiBvZiAiK3RoaXM7aWYoRC5pc0ludGVyZmFjZVR5cGUoQS50eXBlKSl7cmV0dXJuIG99ZWxzZXt0aHJvdyBuZXcgRXJyb3IoZyl9fTtkLnByb3RvdHlwZS5zZXRBZ2dyZWdhdGlvbj1mdW5jdGlvbihhLG8scyl7dmFyIE89dGhpcy5tQWdncmVnYXRpb25zW2FdO2lmKE89PT1vKXtyZXR1cm4gdGhpc31vPXRoaXMudmFsaWRhdGVBZ2dyZWdhdGlvbihhLG8sZmFsc2UpO2lmKHMpe3RoaXMuaVN1cHByZXNzSW52YWxpZGF0ZSsrfWlmKE8gaW5zdGFuY2VvZiBkKXtPLnNldFBhcmVudChudWxsKX10aGlzLm1BZ2dyZWdhdGlvbnNbYV09bztpZihvIGluc3RhbmNlb2YgZCl7by5zZXRQYXJlbnQodGhpcyxhLHMpfWVsc2V7aWYoIXRoaXMuaXNJbnZhbGlkYXRlU3VwcHJlc3NlZCgpKXt0aGlzLmludmFsaWRhdGUoKX19aWYocyl7dGhpcy5pU3VwcHJlc3NJbnZhbGlkYXRlLS19cmV0dXJuIHRoaXN9O2QucHJvdG90eXBlLmdldEFnZ3JlZ2F0aW9uPWZ1bmN0aW9uKGEsbyl7dmFyIGU9dGhpcy5tQWdncmVnYXRpb25zW2FdO2lmKCFlKXtlPXRoaXMubUFnZ3JlZ2F0aW9uc1thXT1vfHxudWxsfWlmKGUpe2lmKHR5cGVvZiBlLmxlbmd0aD09PSdudW1iZXInJiYhKGUucHJvcGVydHlJc0VudW1lcmFibGUoJ2xlbmd0aCcpKSl7cmV0dXJuIGUuc2xpY2UoKX1yZXR1cm4gZX1lbHNle3JldHVybiBudWxsfX07ZC5wcm90b3R5cGUuaW5kZXhPZkFnZ3JlZ2F0aW9uPWZ1bmN0aW9uKGEsbyl7dmFyIGU9dGhpcy5tQWdncmVnYXRpb25zW2FdO2lmKGUpe2lmKGUubGVuZ3RoPT11bmRlZmluZWQpe3JldHVybi0yfWZvcih2YXIgaT0wO2k8ZS5sZW5ndGg7aSsrKXtpZihlW2ldPT1vKXtyZXR1cm4gaX19fXJldHVybi0xfTtkLnByb3RvdHlwZS5pbnNlcnRBZ2dyZWdhdGlvbj1mdW5jdGlvbihhLG8sSSxzKXtpZighbyl7cmV0dXJuIHRoaXN9bz10aGlzLnZhbGlkYXRlQWdncmVnYXRpb24oYSxvLHRydWUpO3ZhciBlPXRoaXMubUFnZ3JlZ2F0aW9uc1thXXx8KHRoaXMubUFnZ3JlZ2F0aW9uc1thXT1bXSk7dmFyIGk9STwwPzA6KEk+ZS5sZW5ndGg/ZS5sZW5ndGg6SSk7aWYoaSE9PUkpe3Euc2FwLmxvZy53YXJuaW5nKCJNYW5hZ2VkT2JqZWN0Lmluc2VydEFnZ3JlZ2F0aW9uOiBpbmRleCAnIitJKyInIG91dCBvZiByYW5nZSBbMCwiK2UubGVuZ3RoKyJdLCBmb3JjZWQgdG8gIitpKX1lLnNwbGljZShpLDAsbyk7by5zZXRQYXJlbnQodGhpcyxhLHMpO3JldHVybiB0aGlzfTtkLnByb3RvdHlwZS5hZGRBZ2dyZWdhdGlvbj1mdW5jdGlvbihhLG8scyl7aWYoIW8pe3JldHVybiB0aGlzfW89dGhpcy52YWxpZGF0ZUFnZ3JlZ2F0aW9uKGEsbyx0cnVlKTt2YXIgZT10aGlzLm1BZ2dyZWdhdGlvbnNbYV07aWYoIWUpe2U9dGhpcy5tQWdncmVnYXRpb25zW2FdPVtvXX1lbHNle2UucHVzaChvKX1vLnNldFBhcmVudCh0aGlzLGEscyk7cmV0dXJuIHRoaXN9O2QucHJvdG90eXBlLnJlbW92ZUFnZ3JlZ2F0aW9uPWZ1bmN0aW9uKGEsbyxzKXt2YXIgZT10aGlzLm1BZ2dyZWdhdGlvbnNbYV0sZj1udWxsLGk7aWYoIWUpe3JldHVybiBudWxsfWlmKHMpe3RoaXMuaVN1cHByZXNzSW52YWxpZGF0ZSsrfWlmKHR5cGVvZihvKT09InN0cmluZyIpe2ZvcihpPTA7aTxlLmxlbmd0aDtpKyspe2lmKGVbaV0mJmVbaV0uZ2V0SWQoKT09PW8pe289aTticmVha319fWlmKHR5cGVvZihvKT09Im9iamVjdCIpe2ZvcihpPTA7aTxlLmxlbmd0aDtpKyspe2lmKGVbaV09PW8pe289aTticmVha319fWlmKHR5cGVvZihvKT09Im51bWJlciIpe2lmKG88MHx8bz49ZS5sZW5ndGgpe3Euc2FwLmxvZy53YXJuaW5nKCJNYW5hZ2VkT2JqZWN0LnJlbW92ZUFnZ3JlZ2F0aW9uIGNhbGxlZCB3aXRoIGludmFsaWQgaW5kZXg6ICIrYSsiLCAiK28pfWVsc2V7Zj1lW29dO2Uuc3BsaWNlKG8sMSk7Zi5zZXRQYXJlbnQobnVsbCk7aWYoIXRoaXMuaXNJbnZhbGlkYXRlU3VwcHJlc3NlZCgpKXt0aGlzLmludmFsaWRhdGUoKX19fWlmKHMpe3RoaXMuaVN1cHByZXNzSW52YWxpZGF0ZS0tfXJldHVybiBmfTtkLnByb3RvdHlwZS5yZW1vdmVBbGxBZ2dyZWdhdGlvbj1mdW5jdGlvbihhLHMpe3ZhciBlPXRoaXMubUFnZ3JlZ2F0aW9uc1thXTtpZighZSl7cmV0dXJuW119aWYocyl7dGhpcy5pU3VwcHJlc3NJbnZhbGlkYXRlKyt9ZGVsZXRlIHRoaXMubUFnZ3JlZ2F0aW9uc1thXTtmb3IodmFyIGk9MDtpPGUubGVuZ3RoO2krKyl7ZVtpXS5zZXRQYXJlbnQobnVsbCl9aWYoIXRoaXMuaXNJbnZhbGlkYXRlU3VwcHJlc3NlZCgpKXt0aGlzLmludmFsaWRhdGUoKX1pZihzKXt0aGlzLmlTdXBwcmVzc0ludmFsaWRhdGUtLX1yZXR1cm4gZX07ZC5wcm90b3R5cGUuZGVzdHJveUFnZ3JlZ2F0aW9uPWZ1bmN0aW9uKGEscyl7dmFyIGU9dGhpcy5tQWdncmVnYXRpb25zW2FdLGksZjtpZighZSl7cmV0dXJuIHRoaXN9aWYocyl7dGhpcy5pU3VwcHJlc3NJbnZhbGlkYXRlKyt9ZGVsZXRlIHRoaXMubUFnZ3JlZ2F0aW9uc1thXTtpZihlIGluc3RhbmNlb2YgZCl7ZS5kZXN0cm95KHMpfWVsc2UgaWYocS5pc0FycmF5KGUpKXtmb3IoaT1lLmxlbmd0aC0xO2k+PTA7aS0tKXtmPWVbaV07aWYoZil7Zi5kZXN0cm95KHMpfX19aWYoIXRoaXMuaXNJbnZhbGlkYXRlU3VwcHJlc3NlZCgpKXt0aGlzLmludmFsaWRhdGUoKX1pZihzKXt0aGlzLmlTdXBwcmVzc0ludmFsaWRhdGUtLX1yZXR1cm4gdGhpc307ZC5wcm90b3R5cGUuaW52YWxpZGF0ZT1mdW5jdGlvbigpe2lmKHRoaXMub1BhcmVudCl7dGhpcy5vUGFyZW50LmludmFsaWRhdGUodGhpcyl9fTtkLnByb3RvdHlwZS5pc0ludmFsaWRhdGVTdXBwcmVzc2VkPWZ1bmN0aW9uKCl7dmFyIGk9dGhpcy5pU3VwcHJlc3NJbnZhbGlkYXRlPjA7aWYodGhpcy5vUGFyZW50JiZ0aGlzLm9QYXJlbnQgaW5zdGFuY2VvZiBkKXtpPWl8fHRoaXMub1BhcmVudC5pc0ludmFsaWRhdGVTdXBwcmVzc2VkKCl9cmV0dXJuIGl9O2QucHJvdG90eXBlLl9yZW1vdmVDaGlsZD1mdW5jdGlvbihvLGEscyl7aWYoIWEpe3Euc2FwLmxvZy5lcnJvcigiQ2Fubm90IHJlbW92ZSBhZ2dyZWdhdGVkIGNoaWxkIHdpdGhvdXQgYWdncmVnYXRpb24gbmFtZS4iLG51bGwsdGhpcyl9ZWxzZXtpZihzKXt0aGlzLmlTdXBwcmVzc0ludmFsaWRhdGUrK312YXIgaT10aGlzLmluZGV4T2ZBZ2dyZWdhdGlvbihhLG8pO3ZhciBBPXRoaXMuZ2V0TWV0YWRhdGEoKS5nZXRKU09OS2V5cygpW2FdO2lmKGk9PS0yKXtpZihBJiZ0aGlzW0EuX3NNdXRhdG9yXSl7dGhpc1tBLl9zTXV0YXRvcl0obnVsbCl9ZWxzZXt0aGlzLnNldEFnZ3JlZ2F0aW9uKGEsbnVsbCxzKX19ZWxzZSBpZihpPi0xKXtpZihBJiZ0aGlzW0EuX3NSZW1vdmVNdXRhdG9yXSl7dGhpc1tBLl9zUmVtb3ZlTXV0YXRvcl0oaSl9ZWxzZXt0aGlzLnJlbW92ZUFnZ3JlZ2F0aW9uKGEsaSxzKX19ZWxzZXt9aWYoIXRoaXMuaXNJbnZhbGlkYXRlU3VwcHJlc3NlZCgpKXt0aGlzLmludmFsaWRhdGUoKX1pZihzKXt0aGlzLmlTdXBwcmVzc0ludmFsaWRhdGUtLX19fTtkLnByb3RvdHlwZS5zZXRQYXJlbnQ9ZnVuY3Rpb24ocCxhLHMpe3ZhciB0PXRoaXM7aWYoIXApe3RoaXMub1BhcmVudD1udWxsO3RoaXMuc1BhcmVudEFnZ3JlZ2F0aW9uTmFtZT1udWxsO3RoaXMub1Byb3BhZ2F0ZWRQcm9wZXJ0aWVzPXtvTW9kZWxzOnt9LG9CaW5kaW5nQ29udGV4dHM6e319O3Euc2FwLmFjdC5yZWZyZXNoKCk7cmV0dXJufWlmKHMpe3Euc2FwLmFjdC5yZWZyZXNoKCk7dGhpcy5pU3VwcHJlc3NJbnZhbGlkYXRlKyt9dmFyIG89dGhpcy5nZXRQYXJlbnQoKTtpZihvKXtvLl9yZW1vdmVDaGlsZCh0aGlzLHRoaXMuc1BhcmVudEFnZ3JlZ2F0aW9uTmFtZSl9dGhpcy5vUGFyZW50PXA7dGhpcy5zUGFyZW50QWdncmVnYXRpb25OYW1lPWE7dGhpcy5vUHJvcGFnYXRlZFByb3BlcnRpZXM9cC5fZ2V0UHJvcGVydGllc1RvUHJvcGFnYXRlKCk7aWYodGhpcy5oYXNNb2RlbCgpKXt0aGlzLnVwZGF0ZUJpbmRpbmdDb250ZXh0KGZhbHNlLHRydWUsdW5kZWZpbmVkLHRydWUpO3RoaXMudXBkYXRlQmluZGluZ3ModHJ1ZSxudWxsKTt0aGlzLnByb3BhZ2F0ZVByb3BlcnRpZXModHJ1ZSl9aWYocCYmIXRoaXMuaXNJbnZhbGlkYXRlU3VwcHJlc3NlZCgpKXtwLmludmFsaWRhdGUodGhpcyl9aWYocyl7dGhpcy5pU3VwcHJlc3NJbnZhbGlkYXRlLS19cmV0dXJuIHRoaXN9O2QucHJvdG90eXBlLmdldFBhcmVudD1mdW5jdGlvbigpe3JldHVybiB0aGlzLm9QYXJlbnR9O2QucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24ocyl7dmFyIHQ9dGhpcztpZihzKXt0aGlzLmlTdXBwcmVzc0ludmFsaWRhdGUrK31pZih0aGlzLmV4aXQpe3RoaXMuZXhpdCgpfWlmKHRoaXMuX2V4aXRDb21wb3NpdGVTdXBwb3J0KXt0aGlzLl9leGl0Q29tcG9zaXRlU3VwcG9ydCgpfWZvcih2YXIgYSBpbiB0aGlzLm1BZ2dyZWdhdGlvbnMpe3RoaXMuZGVzdHJveUFnZ3JlZ2F0aW9uKGEscyl9aWYodGhpcy5kZXJlZ2lzdGVyKXRoaXMuZGVyZWdpc3RlcigpO2lmKHRoaXMub1BhcmVudCYmdGhpcy5zUGFyZW50QWdncmVnYXRpb25OYW1lKXt0aGlzLm9QYXJlbnQuX3JlbW92ZUNoaWxkKHRoaXMsdGhpcy5zUGFyZW50QWdncmVnYXRpb25OYW1lLHMpfWRlbGV0ZSB0aGlzLm9QYXJlbnQ7cS5lYWNoKHRoaXMubUJpbmRpbmdJbmZvcyxmdW5jdGlvbihuLG8pe2lmKG8uZmFjdG9yeSl7dC51bmJpbmRBZ2dyZWdhdGlvbihuLHRydWUpfWVsc2V7dC51bmJpbmRQcm9wZXJ0eShuLHRydWUpfX0pO2lmKHMpe3RoaXMuaVN1cHByZXNzSW52YWxpZGF0ZS0tfUUucHJvdG90eXBlLmRlc3Ryb3kuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMuc2V0UGFyZW50PWZ1bmN0aW9uKCl7dGhyb3cgRXJyb3IoIlRoZSBvYmplY3Qgd2l0aCBJRCAiK3QuZ2V0SWQoKSsiIHdhcyBkZXN0cm95ZWQgYW5kIGNhbm5vdCBiZSB1c2VkIGFueW1vcmUuIil9O3RoaXMuYklzRGVzdHJveWVkPXRydWV9O2QuYmluZGluZ1BhcnNlcj1CLnNpbXBsZVBhcnNlcjtkLnByb3RvdHlwZS5pc0JpbmRpbmc9ZnVuY3Rpb24odixrKXtyZXR1cm4ib2JqZWN0Ij09PXR5cGVvZiB0aGlzLmV4dHJhY3RCaW5kaW5nSW5mbyh2KX07ZC5wcm90b3R5cGUuZXh0cmFjdEJpbmRpbmdJbmZvPWZ1bmN0aW9uKHYscyl7aWYodiYmdHlwZW9mIHY9PT0ib2JqZWN0Iil7aWYodi51aTVvYmplY3Qpe2RlbGV0ZSB2LnVpNW9iamVjdH1lbHNlIGlmKHYucGF0aHx8di5wYXJ0cyl7aWYodi50ZW1wbGF0ZSl7di50ZW1wbGF0ZT1kLmNyZWF0ZSh2LnRlbXBsYXRlKX1yZXR1cm4gdn19aWYodHlwZW9mIHY9PT0ic3RyaW5nIil7cmV0dXJuIGQuYmluZGluZ1BhcnNlcih2LHMsdHJ1ZSl9fTtkLnByb3RvdHlwZS5nZXRCaW5kaW5nSW5mbz1mdW5jdGlvbihuKXtyZXR1cm4gdGhpcy5tQmluZGluZ0luZm9zW25dfTtkLnByb3RvdHlwZS5iaW5kT2JqZWN0PWZ1bmN0aW9uKHAsUCl7dmFyIGE9e30sbyxtLHM7aWYodHlwZW9mIHA9PSJvYmplY3QiKXt2YXIgZT1wO3A9ZS5wYXRoO1A9ZS5wYXJhbWV0ZXJzO209ZS5tb2RlbDthLmV2ZW50cz1lLmV2ZW50c31zPXAuaW5kZXhPZigiPiIpO2Euc0JpbmRpbmdQYXRoPXA7YS5tQmluZGluZ1BhcmFtZXRlcnM9UDtpZihzPjApe209cC5zdWJzdHIoMCxzKTthLnNCaW5kaW5nUGF0aD1wLnN1YnN0cihzKzEpfW89dGhpcy5tQm91bmRPYmplY3RzW21dO2lmKG8mJm8uYmluZGluZyl7by5iaW5kaW5nLmRldGFjaENoYW5nZShvLmZDaGFuZ2VIYW5kbGVyKTtvLmJpbmRpbmcuZGV0YWNoRXZlbnRzKG8uZXZlbnRzKX10aGlzLm1Cb3VuZE9iamVjdHNbbV09YTtpZih0aGlzLmdldE1vZGVsKG0pKXt0aGlzLl9iaW5kT2JqZWN0KG0sYSl9cmV0dXJuIHRoaXN9O2QucHJvdG90eXBlLl9iaW5kT2JqZWN0PWZ1bmN0aW9uKG0sbyl7dmFyIGEscCxlLHQ9dGhpczt2YXIgZj1mdW5jdGlvbihnKXt0LnNldEJpbmRpbmdDb250ZXh0KGEuZ2V0Qm91bmRDb250ZXh0KCksbSl9O2U9dGhpcy5nZXRNb2RlbChtKTtpZih0aGlzLm9QYXJlbnQmJmU9PXRoaXMub1BhcmVudC5nZXRNb2RlbChtKSl7cD10aGlzLm9QYXJlbnQuZ2V0QmluZGluZ0NvbnRleHQobSl9YT1lLmJpbmRDb250ZXh0KG8uc0JpbmRpbmdQYXRoLHAsby5tQmluZGluZ1BhcmFtZXRlcnMpO2EuYXR0YWNoQ2hhbmdlKGYpO28uYmluZGluZz1hO28uZkNoYW5nZUhhbmRsZXI9ZjthLmF0dGFjaEV2ZW50cyhvLmV2ZW50cyk7YS5pbml0aWFsaXplKCl9O2QucHJvdG90eXBlLmJpbmRDb250ZXh0PWZ1bmN0aW9uKHApe3JldHVybiB0aGlzLmJpbmRFbGVtZW50KHApfTtkLnByb3RvdHlwZS51bmJpbmRDb250ZXh0PWZ1bmN0aW9uKG0pe3JldHVybiB0aGlzLnVuYmluZEVsZW1lbnQobSl9O2QucHJvdG90eXBlLnVuYmluZE9iamVjdD1mdW5jdGlvbihtKXt2YXIgbz10aGlzLm1Cb3VuZE9iamVjdHNbbV07aWYobyl7aWYoby5iaW5kaW5nKXtvLmJpbmRpbmcuZGV0YWNoQ2hhbmdlKG8uZkNoYW5nZUhhbmRsZXIpO28uYmluZGluZy5kZXRhY2hFdmVudHMoby5ldmVudHMpfWRlbGV0ZSB0aGlzLm1Cb3VuZE9iamVjdHNbbV07ZGVsZXRlIHRoaXMub0JpbmRpbmdDb250ZXh0c1ttXTt0aGlzLnVwZGF0ZUJpbmRpbmdDb250ZXh0KGZhbHNlLGZhbHNlLG0pfXJldHVybiB0aGlzfTtkLnByb3RvdHlwZS5iaW5kUHJvcGVydHk9ZnVuY3Rpb24obixvKXt2YXIgcCxmLG0scyxGLHQsUyxhPXRydWUsZT10aGlzLGc9dGhpcy5nZXRNZXRhZGF0YSgpLFA9Zy5nZXRBbGxQcm9wZXJ0aWVzKClbbl0saz1nLmdldEpTT05LZXlzKClbbl07aWYoIVAmJiEoayYmay5hbHRUeXBlcykpe3Rocm93IG5ldyBFcnJvcigiUHJvcGVydHkgXCIiK24rIlwiIGRvZXMgbm90IGV4aXN0IGluICIrdGhpcyl9aWYodHlwZW9mIG89PSJzdHJpbmciKXtwPWFyZ3VtZW50c1sxXTtmPWFyZ3VtZW50c1syXTttPWFyZ3VtZW50c1szXTtpZih0eXBlb2YgZj09ImZ1bmN0aW9uIil7Rj1mfWVsc2UgaWYoZiBpbnN0YW5jZW9mIFQpe3Q9Zn1vPXtmb3JtYXR0ZXI6RixwYXJ0czpbe3BhdGg6cCx0eXBlOnQsbW9kZTptfV19fWlmKCFvLnBhcnRzKXtvLnBhcnRzPVtdO28ucGFydHNbMF09e3BhdGg6by5wYXRoLHR5cGU6by50eXBlLGZvcm1hdE9wdGlvbnM6by5mb3JtYXRPcHRpb25zLGNvbnN0cmFpbnRzOm8uY29uc3RyYWludHMsbW9kZWw6by5tb2RlbCxtb2RlOm8ubW9kZX07ZGVsZXRlIG8ucGF0aDtkZWxldGUgby5tb2RlO2RlbGV0ZSBvLm1vZGVsfXEuZWFjaChvLnBhcnRzLGZ1bmN0aW9uKGksaCl7aWYodHlwZW9mIGg9PSJzdHJpbmciKXtoPXtwYXRoOmh9O28ucGFydHNbaV09aH1TPWgucGF0aC5pbmRleE9mKCI+Iik7aWYoUz4wKXtoLm1vZGVsPWgucGF0aC5zdWJzdHIoMCxTKTtoLnBhdGg9aC5wYXRoLnN1YnN0cihTKzEpfWlmKG8uZm9ybWF0dGVyfHxvLnBhcnRzLmxlbmd0aD4xKXtoLm1vZGU9c2FwLnVpLm1vZGVsLkJpbmRpbmdNb2RlLk9uZVdheX1pZighZS5nZXRNb2RlbChoLm1vZGVsKSl7YT1mYWxzZX19KTtpZih0aGlzLmlzQm91bmQobikpe3RoaXMudW5iaW5kUHJvcGVydHkobix0cnVlKX10aGlzLm1CaW5kaW5nSW5mb3Nbbl09bztpZihhKXt0aGlzLl9iaW5kUHJvcGVydHkobixvKX1yZXR1cm4gdGhpc307ZC5wcm90b3R5cGUuX2JpbmRQcm9wZXJ0eT1mdW5jdGlvbihuLG8pe3ZhciBtLHMsYSxlLHQsZixwPXRoaXMuZ2V0TWV0YWRhdGEoKS5nZXRKU09OS2V5cygpW25dLGc9dGhpcyxoPVtdLGo9ZnVuY3Rpb24oaSl7Zy51cGRhdGVQcm9wZXJ0eShuKX07YT10aGlzLmdldEJpbmRpbmdDb250ZXh0KG8ubW9kZWwpO3EuZWFjaChvLnBhcnRzLGZ1bmN0aW9uKGksUCl7YT1nLmdldEJpbmRpbmdDb250ZXh0KFAubW9kZWwpO209Zy5nZXRNb2RlbChQLm1vZGVsKTt0PVAudHlwZTtpZih0eXBlb2YgdD09InN0cmluZyIpe2Y9cS5zYXAuZ2V0T2JqZWN0KHQpO3Q9bmV3IGYoUC5mb3JtYXRPcHRpb25zLFAuY29uc3RyYWludHMpfWU9bS5iaW5kUHJvcGVydHkoUC5wYXRoLGEsby5wYXJhbWV0ZXJzKTtlLnNldFR5cGUodCxwLnR5cGUpO2Uuc2V0Rm9ybWF0dGVyKFAuZm9ybWF0dGVyKTtzPSFQLm1vZGU/bS5nZXREZWZhdWx0QmluZGluZ01vZGUoKTpQLm1vZGU7ZS5zZXRCaW5kaW5nTW9kZShzKTtoLnB1c2goZSl9KTtpZihoLmxlbmd0aD4xfHwoby5mb3JtYXR0ZXImJm8uZm9ybWF0dGVyLnRleHRGcmFnbWVudHMpKXt0PW8udHlwZTtpZih0eXBlb2YgdD09InN0cmluZyIpe2Y9cS5zYXAuZ2V0T2JqZWN0KHQpO3Q9bmV3IGYoby5mb3JtYXRPcHRpb25zLG8uY29uc3RyYWludHMpfWU9bmV3IEMoaCxvLnVzZVJhd1ZhbHVlcyk7ZS5zZXRUeXBlKHQscC50eXBlKTtlLnNldEJpbmRpbmdNb2RlKG8ubW9kZSl9ZWxzZXtlPWhbMF19ZS5hdHRhY2hDaGFuZ2Uoaik7ZS5zZXRGb3JtYXR0ZXIocS5wcm94eShvLmZvcm1hdHRlcix0aGlzKSk7by5iaW5kaW5nPWU7by5tb2RlbENoYW5nZUhhbmRsZXI9ajtlLmF0dGFjaEV2ZW50cyhvLmV2ZW50cyk7ZS5pbml0aWFsaXplKCk7aWYoZS5nZXRCaW5kaW5nTW9kZSgpPT09c2FwLnVpLm1vZGVsLkJpbmRpbmdNb2RlLk9uZVRpbWUpe2UuZGV0YWNoQ2hhbmdlKGopO2UuZGV0YWNoRXZlbnRzKG8uZXZlbnRzKX19O2QucHJvdG90eXBlLnVuYmluZFByb3BlcnR5PWZ1bmN0aW9uKG4scyl7dmFyIG89dGhpcy5tQmluZGluZ0luZm9zW25dLHA9dGhpcy5nZXRNZXRhZGF0YSgpLmdldEpTT05LZXlzKClbbl07aWYobyl7aWYoby5iaW5kaW5nKXtvLmJpbmRpbmcuZGV0YWNoQ2hhbmdlKG8ubW9kZWxDaGFuZ2VIYW5kbGVyKTtvLmJpbmRpbmcuZGV0YWNoRXZlbnRzKG8uZXZlbnRzKX1kZWxldGUgdGhpcy5tQmluZGluZ0luZm9zW25dO2lmKCFzKXt0aGlzW3AuX3NNdXRhdG9yXShudWxsKX19cmV0dXJuIHRoaXN9O2QucHJvdG90eXBlLnVwZGF0ZVByb3BlcnR5PWZ1bmN0aW9uKG4pe3ZhciBvPXRoaXMubUJpbmRpbmdJbmZvc1tuXSxhPW8uYmluZGluZyxwPXRoaXMuZ2V0TWV0YWRhdGEoKS5nZXRKU09OS2V5cygpW25dO2lmKG8uc2tpcFByb3BlcnR5VXBkYXRlKXJldHVybjt0cnl7dmFyIHY9YS5nZXRFeHRlcm5hbFZhbHVlKCk7by5za2lwTW9kZWxVcGRhdGU9dHJ1ZTt0aGlzW3AuX3NNdXRhdG9yXSh2KTtvLnNraXBNb2RlbFVwZGF0ZT1mYWxzZX1jYXRjaChlKXtvLnNraXBNb2RlbFVwZGF0ZT1mYWxzZTtpZihlIGluc3RhbmNlb2Ygc2FwLnVpLm1vZGVsLkZvcm1hdEV4Y2VwdGlvbil7dGhpcy5maXJlRm9ybWF0RXJyb3Ioe2VsZW1lbnQ6dGhpcyxwcm9wZXJ0eTpuLHR5cGU6YS5nZXRUeXBlKCksbmV3VmFsdWU6YS5nZXRWYWx1ZSgpLG9sZFZhbHVlOnRoaXMuZ2V0UHJvcGVydHkobiksZXhjZXB0aW9uOmV9LGZhbHNlLHRydWUpfWVsc2V7dGhyb3cgZX19fTtkLnByb3RvdHlwZS51cGRhdGVNb2RlbFByb3BlcnR5PWZ1bmN0aW9uKG4sdixvKXtpZih0aGlzLmlzQm91bmQobikpe3ZhciBhPXRoaXMubUJpbmRpbmdJbmZvc1tuXSxlPWEuYmluZGluZztpZihhLnNraXBNb2RlbFVwZGF0ZSlyZXR1cm47aWYoZSYmZS5nZXRCaW5kaW5nTW9kZSgpPT1zYXAudWkubW9kZWwuQmluZGluZ01vZGUuVHdvV2F5KXt0cnl7YS5za2lwUHJvcGVydHlVcGRhdGU9dHJ1ZTtlLnNldEV4dGVybmFsVmFsdWUodik7YS5za2lwUHJvcGVydHlVcGRhdGU9ZmFsc2U7dmFyIGY9ZS5nZXRFeHRlcm5hbFZhbHVlKCk7aWYodiE9Zil7dGhpcy51cGRhdGVQcm9wZXJ0eShuKX1pZihlLmdldFR5cGUoKSl7dGhpcy5maXJlVmFsaWRhdGlvblN1Y2Nlc3Moe2VsZW1lbnQ6dGhpcyxwcm9wZXJ0eTpuLHR5cGU6ZS5nZXRUeXBlKCksbmV3VmFsdWU6dixvbGRWYWx1ZTpvfSxmYWxzZSx0cnVlKX19Y2F0Y2goZyl7YS5za2lwUHJvcGVydHlVcGRhdGU9ZmFsc2U7aWYoZyBpbnN0YW5jZW9mIHNhcC51aS5tb2RlbC5QYXJzZUV4Y2VwdGlvbil7dGhpcy5maXJlUGFyc2VFcnJvcih7ZWxlbWVudDp0aGlzLHByb3BlcnR5Om4sdHlwZTplLmdldFR5cGUoKSxuZXdWYWx1ZTp2LG9sZFZhbHVlOm8sZXhjZXB0aW9uOmd9LGZhbHNlLHRydWUpfWVsc2UgaWYoZyBpbnN0YW5jZW9mIHNhcC51aS5tb2RlbC5WYWxpZGF0ZUV4Y2VwdGlvbil7dGhpcy5maXJlVmFsaWRhdGlvbkVycm9yKHtlbGVtZW50OnRoaXMscHJvcGVydHk6bix0eXBlOmUuZ2V0VHlwZSgpLG5ld1ZhbHVlOnYsb2xkVmFsdWU6byxleGNlcHRpb246Z30sZmFsc2UsdHJ1ZSl9ZWxzZXt0aHJvdyBnfX19fX07ZC5wcm90b3R5cGUuYmluZEFnZ3JlZ2F0aW9uPWZ1bmN0aW9uKG4sbyl7dmFyIHAsdCxzLGYsbT10aGlzLmdldE1ldGFkYXRhKCksYT1tLmdldEFsbEFnZ3JlZ2F0aW9ucygpW25dO2lmKCFhKXt0aHJvdyBuZXcgRXJyb3IoIkFnZ3JlZ2F0aW9uIFwiIituKyJcIiBkb2VzIG5vdCBleGlzdCBpbiAiK3RoaXMpfWlmKHR5cGVvZiBvPT0ic3RyaW5nIil7cD1hcmd1bWVudHNbMV07dD1hcmd1bWVudHNbMl07cz1hcmd1bWVudHNbM107Zj1hcmd1bWVudHNbNF07bz17cGF0aDpwLHNvcnRlcjpzLGZpbHRlcnM6Zn07aWYodCBpbnN0YW5jZW9mIGQpe28udGVtcGxhdGU9dH1lbHNlIGlmKHR5cGVvZiB0PT09ImZ1bmN0aW9uIil7by5mYWN0b3J5PXR9fWlmKHRoaXMuaXNCb3VuZChuKSl7dGhpcy51bmJpbmRBZ2dyZWdhdGlvbihuLHRydWUpfWlmKCEoby50ZW1wbGF0ZXx8by5mYWN0b3J5KSl7aWYoYS5fZG9lc05vdFJlcXVpcmVGYWN0b3J5KXtvLmZhY3Rvcnk9ZnVuY3Rpb24oKXt0aHJvdyBuZXcgRXJyb3IoImR1bW15IGZhY3RvcnkgY2FsbGVkIHVuZXhwZWN0ZWRseSAiKX19ZWxzZXt0aHJvdyBuZXcgRXJyb3IoIk1pc3NpbmcgdGVtcGxhdGUgb3IgZmFjdG9yeSBmdW5jdGlvbiBmb3IgYWdncmVnYXRpb24gIituKyIgb2YgIit0aGlzKyIgISIpfX1pZihvLnRlbXBsYXRlKXtpZihvLnRlbXBsYXRlU2hhcmVhYmxlPT09dW5kZWZpbmVkKXtvLnRlbXBsYXRlU2hhcmVhYmxlPXRydWV9by5mYWN0b3J5PWZ1bmN0aW9uKGkpe3JldHVybiBvLnRlbXBsYXRlLmNsb25lKGkpfX12YXIgUz1vLnBhdGguaW5kZXhPZigiPiIpO2lmKFM+MCl7by5tb2RlbD1vLnBhdGguc3Vic3RyKDAsUyk7by5wYXRoPW8ucGF0aC5zdWJzdHIoUysxKX10aGlzLm1CaW5kaW5nSW5mb3Nbbl09bztpZih0aGlzLmdldE1vZGVsKG8ubW9kZWwpKXt0aGlzLl9iaW5kQWdncmVnYXRpb24obixvKX1yZXR1cm4gdGhpc307ZC5wcm90b3R5cGUuX2JpbmRBZ2dyZWdhdGlvbj1mdW5jdGlvbihuLG8pe3ZhciB0PXRoaXMsYSxtPWZ1bmN0aW9uKGcpe3ZhciB1PSJ1cGRhdGUiK24uc3Vic3RyKDAsMSkudG9VcHBlckNhc2UoKStuLnN1YnN0cigxKTtpZih0W3VdKXt2YXIgcz1nJiZnLmdldFBhcmFtZXRlcigicmVhc29uIik7aWYocyl7dFt1XShzKX1lbHNle3RbdV0oKX19ZWxzZXt0LnVwZGF0ZUFnZ3JlZ2F0aW9uKG4pfX0sZj1mdW5jdGlvbihnKXt2YXIgcj0icmVmcmVzaCIrbi5zdWJzdHIoMCwxKS50b1VwcGVyQ2FzZSgpK24uc3Vic3RyKDEpO2lmKHRbcl0pe3Rbcl0oZy5nZXRQYXJhbWV0ZXIoInJlYXNvbiIpKX1lbHNle20oZyl9fTt2YXIgZT10aGlzLmdldE1vZGVsKG8ubW9kZWwpO2lmKHRoaXMuaXNUcmVlQmluZGluZyhuKSl7YT1lLmJpbmRUcmVlKG8ucGF0aCx0aGlzLmdldEJpbmRpbmdDb250ZXh0KG8ubW9kZWwpLG8uZmlsdGVycyxvLnBhcmFtZXRlcnMpfWVsc2V7YT1lLmJpbmRMaXN0KG8ucGF0aCx0aGlzLmdldEJpbmRpbmdDb250ZXh0KG8ubW9kZWwpLG8uc29ydGVyLG8uZmlsdGVycyxvLnBhcmFtZXRlcnMpfWlmKHRoaXMuYlVzZUV4dGVuZGVkQ2hhbmdlRGV0ZWN0aW9uPT09dHJ1ZSl7YS5lbmFibGVFeHRlbmRlZENoYW5nZURldGVjdGlvbigpfW8uYmluZGluZz1hO28ubW9kZWxDaGFuZ2VIYW5kbGVyPW07by5tb2RlbFJlZnJlc2hIYW5kbGVyPWY7YS5hdHRhY2hDaGFuZ2UobSk7YS5hdHRhY2hSZWZyZXNoKGYpO2EuYXR0YWNoRXZlbnRzKG8uZXZlbnRzKTthLmluaXRpYWxpemUoKX07ZC5wcm90b3R5cGUudW5iaW5kQWdncmVnYXRpb249ZnVuY3Rpb24obixzKXt2YXIgbz10aGlzLm1CaW5kaW5nSW5mb3Nbbl0sYT10aGlzLmdldE1ldGFkYXRhKCkuZ2V0SlNPTktleXMoKVtuXTtpZihvKXtpZihvLmJpbmRpbmcpe28uYmluZGluZy5kZXRhY2hDaGFuZ2Uoby5tb2RlbENoYW5nZUhhbmRsZXIpO28uYmluZGluZy5kZXRhY2hSZWZyZXNoKG8ubW9kZWxSZWZyZXNoSGFuZGxlcik7by5iaW5kaW5nLmRldGFjaEV2ZW50cyhvLmV2ZW50cyl9aWYoIW8udGVtcGxhdGVTaGFyZWFibGUmJm8udGVtcGxhdGUmJm8udGVtcGxhdGUuZGVzdHJveSl7by50ZW1wbGF0ZS5kZXN0cm95KCl9ZGVsZXRlIHRoaXMubUJpbmRpbmdJbmZvc1tuXTtpZighcyl7dGhpc1thLl9zRGVzdHJ1Y3Rvcl0oKX19cmV0dXJuIHRoaXN9O2QucHJvdG90eXBlLnVwZGF0ZUFnZ3JlZ2F0aW9uPWZ1bmN0aW9uKG4pe3ZhciBvPXRoaXMubUJpbmRpbmdJbmZvc1tuXSxhPW8uYmluZGluZyxmPW8uZmFjdG9yeSxBPXRoaXMuZ2V0TWV0YWRhdGEoKS5nZXRKU09OS2V5cygpW25dLGUsTj1udWxsLGc9bnVsbCxHPW51bGwscz1udWxsLHQ9dGhpczt0aGlzW0EuX3NEZXN0cnVjdG9yXSgpO2lmKHRoaXMuaXNUcmVlQmluZGluZyhuKSl7dmFyIGk9MCx1PWZ1bmN0aW9uKGgsZixhLHApe3EuZWFjaChoLGZ1bmN0aW9uKEksail7dmFyIGs9dC5nZXRJZCgpKyItIitpKys7ZT1mKGssaik7ZS5zZXRCaW5kaW5nQ29udGV4dChqLG8ubW9kZWwpO3BbQS5fc011dGF0b3JdKGUpO3UoYS5nZXROb2RlQ29udGV4dHMoaiksZixhLGUpfSl9O3UoYS5nZXRSb290Q29udGV4dHMoKSxmLGEsdGhpcyl9ZWxzZXtnPUEuX3NNdXRhdG9yKyJHcm91cCI7Rz1hLmlzR3JvdXBlZCgpJiZ0aGlzW2ddO3EuZWFjaChhLmdldENvbnRleHRzKG8uc3RhcnRJbmRleCxvLmxlbmd0aCksZnVuY3Rpb24oSSxoKXtpZihHJiZhLmFTb3J0ZXJzLmxlbmd0aD4wKXtOPWEuYVNvcnRlcnNbMF0uZm5Hcm91cChoKTtpZih0eXBlb2YgTj09InN0cmluZyIpe049e2tleTpOfX1pZihOLmtleSE9PXMpe3ZhciBqO2lmKG8uZ3JvdXBIZWFkZXJGYWN0b3J5KXtqPW8uZ3JvdXBIZWFkZXJGYWN0b3J5KE4pfXRbZ10oTixqKTtzPU4ua2V5fX12YXIgaz10LmdldElkKCkrIi0iK0k7ZT1mKGssaCk7ZS5zZXRCaW5kaW5nQ29udGV4dChoLG8ubW9kZWwpO3RbQS5fc011dGF0b3JdKGUpfSl9fTtkLnByb3RvdHlwZS5yZWZyZXNoQWdncmVnYXRpb249ZnVuY3Rpb24obil7dmFyIG89dGhpcy5tQmluZGluZ0luZm9zW25dLGE9by5iaW5kaW5nO2EuZ2V0Q29udGV4dHMoby5zdGFydEluZGV4LG8ubGVuZ3RoKX07ZC5wcm90b3R5cGUuaXNUcmVlQmluZGluZz1mdW5jdGlvbihuKXtyZXR1cm4gZmFsc2V9O2QucHJvdG90eXBlLnVwZGF0ZUJpbmRpbmdzPWZ1bmN0aW9uKHUsbSl7dmFyIHQ9dGhpcztmdW5jdGlvbiBhKG8pe3ZhciBwPW8ucGFydHMsaTtpZihwJiZwLmxlbmd0aD4xKXtmb3IoaT0wO2k8cC5sZW5ndGg7aSsrKXtpZigodXx8cFtpXS5tb2RlbD09bSkmJiFvLmJpbmRpbmcuYUJpbmRpbmdzW2ldLnVwZGF0ZVJlcXVpcmVkKHQuZ2V0TW9kZWwocFtpXS5tb2RlbCkpKXtyZXR1cm4gdHJ1ZX19fWVsc2UgaWYoby5mYWN0b3J5KXtyZXR1cm4odXx8by5tb2RlbD09bSkmJiFvLmJpbmRpbmcudXBkYXRlUmVxdWlyZWQodC5nZXRNb2RlbChvLm1vZGVsKSl9ZWxzZXtyZXR1cm4odXx8cFswXS5tb2RlbD09bSkmJiFvLmJpbmRpbmcudXBkYXRlUmVxdWlyZWQodC5nZXRNb2RlbChwWzBdLm1vZGVsKSl9cmV0dXJuIGZhbHNlfWZ1bmN0aW9uIGUobyl7dmFyIHA9by5wYXJ0cyxpO2lmKHApe2ZvcihpPTA7aTxwLmxlbmd0aDtpKyspe2lmKCF0LmdldE1vZGVsKHBbaV0ubW9kZWwpKXtyZXR1cm4gZmFsc2V9fXJldHVybiB0cnVlfWVsc2UgaWYoby5mYWN0b3J5KXtyZXR1cm4hIXQuZ2V0TW9kZWwoby5tb2RlbCl9cmV0dXJuIGZhbHNlfXEuZWFjaCh0aGlzLm1CaW5kaW5nSW5mb3MsZnVuY3Rpb24obixvKXtpZihvLmJpbmRpbmcmJmEobykpe28uYmluZGluZy5kZXRhY2hDaGFuZ2Uoby5tb2RlbENoYW5nZUhhbmRsZXIpO2lmKG8ubW9kZWxSZWZyZXNoSGFuZGxlcil7by5iaW5kaW5nLmRldGFjaFJlZnJlc2goby5tb2RlbFJlZnJlc2hIYW5kbGVyKX1vLmJpbmRpbmcuZGV0YWNoRXZlbnRzKG8uZXZlbnRzKTtkZWxldGUgby5iaW5kaW5nfWlmKCFvLmJpbmRpbmcmJmUobykpe2lmKG8uZmFjdG9yeSl7dC5fYmluZEFnZ3JlZ2F0aW9uKG4sbyl9ZWxzZXt0Ll9iaW5kUHJvcGVydHkobixvKX19fSl9O2QucHJvdG90eXBlLmlzQm91bmQ9ZnVuY3Rpb24obil7cmV0dXJuKG4gaW4gdGhpcy5tQmluZGluZ0luZm9zKX07ZC5wcm90b3R5cGUuZ2V0T2JqZWN0QmluZGluZz1mdW5jdGlvbihtKXtyZXR1cm4gdGhpcy5tQm91bmRPYmplY3RzW21dJiZ0aGlzLm1Cb3VuZE9iamVjdHNbbV0uYmluZGluZ307ZC5wcm90b3R5cGUuZ2V0RXZlbnRpbmdQYXJlbnQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vUGFyZW50fTtkLnByb3RvdHlwZS5nZXRCaW5kaW5nPWZ1bmN0aW9uKG4pe3JldHVybiB0aGlzLm1CaW5kaW5nSW5mb3Nbbl0mJnRoaXMubUJpbmRpbmdJbmZvc1tuXS5iaW5kaW5nfTtkLnByb3RvdHlwZS5nZXRCaW5kaW5nUGF0aD1mdW5jdGlvbihuKXt2YXIgaT10aGlzLm1CaW5kaW5nSW5mb3Nbbl07cmV0dXJuIGkmJihpLnBhdGh8fChpLnBhcnRzJiZpLnBhcnRzWzBdJiZpLnBhcnRzWzBdLnBhdGgpKX07ZC5wcm90b3R5cGUuc2V0QmluZGluZ0NvbnRleHQ9ZnVuY3Rpb24obyxtKXt2YXIgTz10aGlzLm9CaW5kaW5nQ29udGV4dHNbbV07aWYoTyE9PW8pe3RoaXMub0JpbmRpbmdDb250ZXh0c1ttXT1vO3RoaXMudXBkYXRlQmluZGluZ0NvbnRleHQodHJ1ZSx0cnVlLG0pO3RoaXMucHJvcGFnYXRlUHJvcGVydGllcyhtKX1yZXR1cm4gdGhpc307ZC5wcm90b3R5cGUudXBkYXRlQmluZGluZ0NvbnRleHQ9ZnVuY3Rpb24ocyxTLG0sdSl7dmFyIG8sYT17fSxwLGUsdD10aGlzO2lmKHUpe2ZvcihtIGluIHRoaXMub01vZGVscyl7aWYodGhpcy5vTW9kZWxzLmhhc093blByb3BlcnR5KG0pKXthW21dPW19fWZvcihtIGluIHRoaXMub1Byb3BhZ2F0ZWRQcm9wZXJ0aWVzLm9Nb2RlbHMpe2lmKHRoaXMub1Byb3BhZ2F0ZWRQcm9wZXJ0aWVzLm9Nb2RlbHMuaGFzT3duUHJvcGVydHkobSkpe2FbbV09bX19fWVsc2V7YVttXT1tfWZvcihtIGluIGEpe2lmKGEuaGFzT3duUHJvcGVydHkobSkpe209bT09PSJ1bmRlZmluZWQiP3VuZGVmaW5lZDptO289dGhpcy5nZXRNb2RlbChtKTtlPXRoaXMubUJvdW5kT2JqZWN0c1ttXTtpZihvJiZlJiZlLnNCaW5kaW5nUGF0aCYmIXMpe2lmKCFlLmJpbmRpbmcpe3RoaXMuX2JpbmRPYmplY3QobSxlKX1lbHNle3A9bnVsbDtpZih0aGlzLm9QYXJlbnQmJm89PXRoaXMub1BhcmVudC5nZXRNb2RlbChtKSl7cD10aGlzLm9QYXJlbnQuZ2V0QmluZGluZ0NvbnRleHQobSl9aWYocCE9PWUuYmluZGluZy5nZXRDb250ZXh0KCkpe2UuYmluZGluZy5zZXRDb250ZXh0KHApfX1jb250aW51ZX1xLmVhY2godGhpcy5tQmluZGluZ0luZm9zLGZ1bmN0aW9uKG4sZyl7dmFyIGg9Zy5iaW5kaW5nO3ZhciBQPWcucGFydHMsaTtpZighaCl7cmV0dXJufWlmKFAmJlAubGVuZ3RoPjEpe2ZvcihpPTA7aTxQLmxlbmd0aDtpKyspe2lmKFBbaV0ubW9kZWw9PW0pe2guYUJpbmRpbmdzW2ldLnNldENvbnRleHQodC5nZXRCaW5kaW5nQ29udGV4dChQW2ldLm1vZGVsKSl9fX1lbHNlIGlmKGcuZmFjdG9yeSl7aWYoZy5tb2RlbD09bSl7aC5zZXRDb250ZXh0KHQuZ2V0QmluZGluZ0NvbnRleHQoZy5tb2RlbCkpfX1lbHNle2lmKFBbMF0ubW9kZWw9PW0pe2guc2V0Q29udGV4dCh0LmdldEJpbmRpbmdDb250ZXh0KFBbMF0ubW9kZWwpKX19fSk7aWYoIVMpe3ZhciBmPXRoaXMuZ2V0QmluZGluZ0NvbnRleHQobSk7cS5lYWNoKHRoaXMubUFnZ3JlZ2F0aW9ucyxmdW5jdGlvbihuLEEpe2lmKEEgaW5zdGFuY2VvZiBkKXtBLm9Qcm9wYWdhdGVkUHJvcGVydGllcy5vQmluZGluZ0NvbnRleHRzW21dPWY7QS51cGRhdGVCaW5kaW5nQ29udGV4dChmYWxzZSxmYWxzZSxtKX1lbHNlIGlmKEEgaW5zdGFuY2VvZiBBcnJheSl7Zm9yKHZhciBpPTA7aTxBLmxlbmd0aDtpKyspe0FbaV0ub1Byb3BhZ2F0ZWRQcm9wZXJ0aWVzLm9CaW5kaW5nQ29udGV4dHNbbV09ZjtBW2ldLnVwZGF0ZUJpbmRpbmdDb250ZXh0KGZhbHNlLGZhbHNlLG0pfX19KX19fX07ZC5wcm90b3R5cGUuZ2V0QmluZGluZ0NvbnRleHQ9ZnVuY3Rpb24obSl7dmFyIG89dGhpcy5nZXRNb2RlbChtKTtpZih0aGlzLm9CaW5kaW5nQ29udGV4dHNbbV0pe3JldHVybiB0aGlzLm9CaW5kaW5nQ29udGV4dHNbbV19ZWxzZSBpZihvJiZ0aGlzLm9QYXJlbnQmJnRoaXMub1BhcmVudC5nZXRNb2RlbChtKSYmbyE9dGhpcy5vUGFyZW50LmdldE1vZGVsKG0pKXtyZXR1cm4gdW5kZWZpbmVkfWVsc2V7cmV0dXJuIHRoaXMub1Byb3BhZ2F0ZWRQcm9wZXJ0aWVzLm9CaW5kaW5nQ29udGV4dHNbbV19fTtkLnByb3RvdHlwZS5zZXRNb2RlbD1mdW5jdGlvbihtLG4pe2lmKCFtJiZ0aGlzLm9Nb2RlbHNbbl0pe2RlbGV0ZSB0aGlzLm9Nb2RlbHNbbl07dGhpcy5wcm9wYWdhdGVQcm9wZXJ0aWVzKG4pO3RoaXMudXBkYXRlQmluZGluZ3MoZmFsc2Usbil9ZWxzZSBpZihtJiZtIT09dGhpcy5vTW9kZWxzW25dKXt0aGlzLm9Nb2RlbHNbbl09bTt0aGlzLnByb3BhZ2F0ZVByb3BlcnRpZXMobik7dGhpcy51cGRhdGVCaW5kaW5nQ29udGV4dChmYWxzZSx0cnVlLG4pO3RoaXMudXBkYXRlQmluZGluZ3MoZmFsc2Usbil9ZWxzZXt9cmV0dXJuIHRoaXN9O2QucHJvdG90eXBlLnByb3BhZ2F0ZVByb3BlcnRpZXM9ZnVuY3Rpb24obil7dmFyIHA9dGhpcy5fZ2V0UHJvcGVydGllc1RvUHJvcGFnYXRlKCksdT1uPT09dHJ1ZSxOPXU/dW5kZWZpbmVkOm4sdD10aGlzO3EuZWFjaCh0aGlzLm1BZ2dyZWdhdGlvbnMsZnVuY3Rpb24oYSxBKXtpZihBIGluc3RhbmNlb2YgZCl7dC5fcHJvcGFnYXRlUHJvcGVydGllcyhuLEEscCx1LE4pfWVsc2UgaWYoQSBpbnN0YW5jZW9mIEFycmF5KXtmb3IodmFyIGk9MDtpPEEubGVuZ3RoO2krKyl7aWYoQVtpXWluc3RhbmNlb2YgZCl7dC5fcHJvcGFnYXRlUHJvcGVydGllcyhuLEFbaV0scCx1LE4pfX19fSl9O2QucHJvdG90eXBlLl9wcm9wYWdhdGVQcm9wZXJ0aWVzPWZ1bmN0aW9uKG4sbyxwLHUsTil7aWYoIXApe3A9dGhpcy5fZ2V0UHJvcGVydGllc1RvUHJvcGFnYXRlKCksdT1uPT09dHJ1ZSxOPXU/dW5kZWZpbmVkOm59by5vUHJvcGFnYXRlZFByb3BlcnRpZXM9cDtvLnVwZGF0ZUJpbmRpbmdzKHUsTik7by51cGRhdGVCaW5kaW5nQ29udGV4dChmYWxzZSx0cnVlLE4sdSk7by5wcm9wYWdhdGVQcm9wZXJ0aWVzKG4pfTtkLnByb3RvdHlwZS5fZ2V0UHJvcGVydGllc1RvUHJvcGFnYXRlPWZ1bmN0aW9uKCl7dmFyIG49cS5pc0VtcHR5T2JqZWN0KHRoaXMub01vZGVscyksTj1xLmlzRW1wdHlPYmplY3QodGhpcy5vQmluZGluZ0NvbnRleHRzKTtmdW5jdGlvbiBtKGUsbyxhKXtyZXR1cm4gZT9vOnEuZXh0ZW5kKHt9LG8sYSl9aWYoTiYmbil7cmV0dXJuIHRoaXMub1Byb3BhZ2F0ZWRQcm9wZXJ0aWVzfWVsc2V7cmV0dXJue29Nb2RlbHM6bShuLHRoaXMub1Byb3BhZ2F0ZWRQcm9wZXJ0aWVzLm9Nb2RlbHMsdGhpcy5vTW9kZWxzKSxvQmluZGluZ0NvbnRleHRzOm0oTix0aGlzLm9Qcm9wYWdhdGVkUHJvcGVydGllcy5vQmluZGluZ0NvbnRleHRzLHRoaXMub0JpbmRpbmdDb250ZXh0cyl9fX07ZC5wcm90b3R5cGUuZ2V0TW9kZWw9ZnVuY3Rpb24obil7cmV0dXJuIHRoaXMub01vZGVsc1tuXXx8dGhpcy5vUHJvcGFnYXRlZFByb3BlcnRpZXMub01vZGVsc1tuXX07ZC5wcm90b3R5cGUuaGFzTW9kZWw9ZnVuY3Rpb24oKXtyZXR1cm4hKHEuaXNFbXB0eU9iamVjdCh0aGlzLm9Nb2RlbHMpJiZxLmlzRW1wdHlPYmplY3QodGhpcy5vUHJvcGFnYXRlZFByb3BlcnRpZXMub01vZGVscykpfTtkLnByb3RvdHlwZS5jbG9uZT1mdW5jdGlvbihJLGwsbyl7dmFyIHQ9dGhpcyxhPXRydWUsZT10cnVlO2lmKG8pe2E9ISFvLmNsb25lQ2hpbGRyZW47ZT0hIW8uY2xvbmVCaW5kaW5nc31pZighSSl7ST1NLnVpZCgiY2xvbmUiKXx8cS5zYXAudWlkKCl9aWYoIWwmJmEpe2w9cS5tYXAodGhpcy5maW5kQWdncmVnYXRlZE9iamVjdHModHJ1ZSksZnVuY3Rpb24oTyl7cmV0dXJuIE8uZ2V0SWQoKX0pfXZhciBtPXRoaXMuZ2V0TWV0YWRhdGEoKSxmPW0uX29DbGFzcyxzPXRoaXMuZ2V0SWQoKSsiLSIrSSxTPXt9LHA9dGhpcy5tUHJvcGVydGllcyxrLGcsaD1kLmJpbmRpbmdQYXJzZXIuZXNjYXBlO2ZvcihrIGluIHApe2lmKHAuaGFzT3duUHJvcGVydHkoaykmJiEodGhpcy5pc0JvdW5kKGspJiZlKSl7aWYodHlwZW9mIHBba109PT0ic3RyaW5nIil7U1trXT1oKHBba10pfWVsc2V7U1trXT1wW2tdfX19U1sibW9kZWxzIl09dGhpcy5vTW9kZWxzO1NbImJpbmRpbmdDb250ZXh0cyJdPXRoaXMub0JpbmRpbmdDb250ZXh0cztpZihhKXtxLmVhY2godGhpcy5tQWdncmVnYXRpb25zLGZ1bmN0aW9uKG4sQSl7aWYobS5oYXNBZ2dyZWdhdGlvbihuKSYmISh0LmlzQm91bmQobikmJmUpKXtpZihBIGluc3RhbmNlb2YgZCl7U1tuXT1BLmNsb25lKEksbCl9ZWxzZSBpZihxLmlzQXJyYXkoQSkpe1Nbbl09W107Zm9yKHZhciBpPTA7aTxBLmxlbmd0aDtpKyspe1Nbbl0ucHVzaChBW2ldLmNsb25lKEksbCkpfX1lbHNle1Nbbl09QX19fSk7cS5lYWNoKHRoaXMubUFzc29jaWF0aW9ucyxmdW5jdGlvbihuLEEpe2lmKHEuaXNBcnJheShBKSl7QT1BLnNsaWNlKDApO2Zvcih2YXIgaT0wO2k8QS5sZW5ndGg7aSsrKXtpZihxLmluQXJyYXkoQVtpXSxsKT49MCl7QVtpXSs9Ii0iK0l9fX1lbHNlIGlmKHEuaW5BcnJheShBLGwpPj0wKXtBKz0iLSIrSX1TW25dPUF9KX1nPW5ldyBmKHMsUyk7cS5lYWNoKHRoaXMubUJvdW5kT2JqZWN0cyxmdW5jdGlvbihuLGkpe2cubUJvdW5kT2JqZWN0c1tuXT1xLmV4dGVuZCh7fSxpKX0pO3EuZWFjaCh0aGlzLm1FdmVudFJlZ2lzdHJ5LGZ1bmN0aW9uKG4sTCl7Zy5tRXZlbnRSZWdpc3RyeVtuXT1MLnNsaWNlKCl9KTtpZihlKXtxLmVhY2godGhpcy5tQmluZGluZ0luZm9zLGZ1bmN0aW9uKG4saSl7dmFyIGo9cS5leHRlbmQoe30saSk7aWYoIWkudGVtcGxhdGVTaGFyZWFibGUmJmkudGVtcGxhdGUmJmkudGVtcGxhdGUuY2xvbmUpe2oudGVtcGxhdGU9aS50ZW1wbGF0ZS5jbG9uZShJLGwpO2RlbGV0ZSBqLmZhY3Rvcnl9ZGVsZXRlIGouYmluZGluZztpZihpLmZhY3Rvcnl8fGkudGVtcGxhdGUpe2cuYmluZEFnZ3JlZ2F0aW9uKG4sail9ZWxzZXtnLmJpbmRQcm9wZXJ0eShuLGopfX0pfXJldHVybiBnfTtkLl9oYW5kbGVMb2NhbGl6YXRpb25DaGFuZ2U9ZnVuY3Rpb24ocCl7dmFyIGk7aWYocD09PTEpe3EuZWFjaCh0aGlzLm9Nb2RlbHMsZnVuY3Rpb24obixtKXtpZihtJiZtLl9oYW5kbGVMb2NhbGl6YXRpb25DaGFuZ2Upe20uX2hhbmRsZUxvY2FsaXphdGlvbkNoYW5nZSgpfX0pfWVsc2UgaWYocD09PTIpe3EuZWFjaCh0aGlzLm1CaW5kaW5nSW5mb3MsZnVuY3Rpb24obixvKXt2YXIgUD1vLnBhcnRzO2lmKFApe2ZvcihpPTA7aTxQLmxlbmd0aDtpKyspe2lmKG8udHlwZSYmby50eXBlLl9oYW5kbGVMb2NhbGl6YXRpb25DaGFuZ2Upe28udHlwZS5faGFuZGxlTG9jYWxpemF0aW9uQ2hhbmdlKCl9fWlmKG8ubW9kZWxDaGFuZ2VIYW5kbGVyKXtvLm1vZGVsQ2hhbmdlSGFuZGxlcigpfX19KX19O2QuX21hcEFnZ3JlZ2F0aW9uPWZ1bmN0aW9uKHAsbyxuKXt2YXIgaz1wLmdldE1ldGFkYXRhKCkuZ2V0SlNPTktleXMoKTt2YXIgTz1rW29dO3ZhciBOPWtbbl07aWYoIU98fCFOfHxPLl9pS2luZCE9Mnx8Ti5faUtpbmQhPTIpe3JldHVybn12YXIgZj17Imluc2VydCI6dHJ1ZSwiYWRkIjp0cnVlLCJyZW1vdmUiOnRydWUsInJlbW92ZUFsbCI6ZmFsc2UsImluZGV4T2YiOnRydWUsImRlc3Ryb3kiOmZhbHNlLCJnZXQiOmZhbHNlfTtmdW5jdGlvbiBtKFAsZyl7cmV0dXJuIFArZy5zdWJzdHJpbmcoMCwxKS50b1VwcGVyQ2FzZSgpK2cuc3Vic3RyaW5nKDEpfWZ1bmN0aW9uIGEoRil7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXNbRl0uYXBwbHkodGhpcyxhcmd1bWVudHMpfX1mb3IodmFyIFAgaW4gZil7dmFyIHM9bShQLGZbUF0/Ty5zaW5ndWxhck5hbWU6Ty5fc05hbWUpO3ZhciBlPW0oUCxmW1BdP04uc2luZ3VsYXJOYW1lOk4uX3NOYW1lKTtwW3NdPWEoZSl9fTtkLnByb3RvdHlwZS5maW5kQWdncmVnYXRlZE9iamVjdHM9ZnVuY3Rpb24ocil7dmFyIEE9W107ZnVuY3Rpb24gZihvKXtmb3IodmFyIG4gaW4gby5tQWdncmVnYXRpb25zKXt2YXIgYT1vLm1BZ2dyZWdhdGlvbnNbbl07aWYocS5pc0FycmF5KGEpKXtmb3IodmFyIGk9MDtpPGEubGVuZ3RoO2krKyl7QS5wdXNoKGFbaV0pO2lmKHIpe2YoYVtpXSl9fX1lbHNlIGlmKGEgaW5zdGFuY2VvZiBkKXtBLnB1c2goYSk7aWYocil7ZihhKX19fX1mKHRoaXMpO3JldHVybiBBfTtyZXR1cm4gZH0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLkZyYWdtZW50Jykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUuRnJhZ21lbnQnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9GcmFnbWVudCIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ3NhcC91aS9iYXNlL01hbmFnZWRPYmplY3QnLCcuL0RlY2xhcmF0aXZlU3VwcG9ydCcsJy4vWE1MVGVtcGxhdGVQcm9jZXNzb3InXSxmdW5jdGlvbihxLE0sRCxYKXsidXNlIHN0cmljdCI7dmFyIHI9e30sdD17fTt2YXIgRj1NLmV4dGVuZCgic2FwLnVpLmNvcmUuRnJhZ21lbnQiLHttZXRhZGF0YTp7cHJvcGVydGllczp7dHlwZToic3RyaW5nIn19LGNvbnN0cnVjdG9yOmZ1bmN0aW9uKGkscyl7TS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7aWYodGhpcy5fYUNvbnRlbnQmJnRoaXMuX2FDb250ZW50Lmxlbmd0aD09MSl7cmV0dXJuIHRoaXMuX2FDb250ZW50WzBdfWVsc2V7cmV0dXJuIHRoaXMuX2FDb250ZW50fX19KTtGLnJlZ2lzdGVyVHlwZT1mdW5jdGlvbihULGYpe2lmKCF0eXBlb2YoVCk9PT0ic3RyaW5nIil7cS5zYXAubG9nLmVycm9yKCJJZ25vcmluZyBub24tc3RyaW5nIEZyYWdtZW50IHR5cGU6ICIrVCk7cmV0dXJufWlmKHRbVF0pe3Euc2FwLmxvZy53YXJuaW5nKCJzYXAudWkuY29yZS5GcmFnbWVudC5yZWdpc3RlclR5cGUoKTogRnJhZ21lbnQgdHlwZSAnIitUKyInIGlzIGFscmVhZHkgZGVmaW5lZC4gT3ZlcnJpZGluZyB0aGlzIHR5cGUgbm93ISIpfXRbVF09Zn07Ri5wcm90b3R5cGUuX2luaXRDb21wb3NpdGVTdXBwb3J0PWZ1bmN0aW9uKHMpe2lmKCFzKXt0aHJvdyBuZXcgRXJyb3IoIlNldHRpbmdzIG11c3QgYmUgc2V0Iil9aWYoIShzLmZyYWdtZW50TmFtZXx8cy5mcmFnbWVudENvbnRlbnQpKXt0aHJvdyBuZXcgRXJyb3IoIlBsZWFzZSBwcm92aWRlIGEgZnJhZ21lbnQgbmFtZSIpfWlmKHMub0NvbnRyb2xsZXIpe3RoaXMub0NvbnRyb2xsZXI9cy5vQ29udHJvbGxlcn10aGlzLl9zRXhwbGljaXRJZD1zLnNJZHx8cy5pZDt0aGlzLl9zRnJhZ21lbnROYW1lPXMuZnJhZ21lbnROYW1lO3ZhciBmPXRbcy50eXBlXTtpZihmKXtmLmluaXQuYXBwbHkodGhpcyxbc10pfWVsc2V7dGhyb3cgbmV3IEVycm9yKCJObyB0eXBlIGZvciB0aGUgZnJhZ21lbnQgaGFzIGJlZW4gc3BlY2lmaWVkOiAiK3MudHlwZSl9fTtGLnByb3RvdHlwZS5nZXRDb250cm9sbGVyPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub0NvbnRyb2xsZXJ9O0YuYnlJZD1mdW5jdGlvbihmLGkpe2lmKCEodHlwZW9mKGYpPT09InN0cmluZyImJnR5cGVvZihpKT09PSJzdHJpbmciKSl7cS5zYXAubG9nLmVycm9yKCJzYXAudWkuY29yZS5GcmFnbWVudC5ieUlkOiB0d28gc3RyaW5ncyBtdXN0IGJlIGdpdmVuIGFzIHBhcmFtZXRlcnMsIGJ1dCBhcmU6ICIrZisiIGFuZCAiK2kpO3JldHVybiB1bmRlZmluZWR9cmV0dXJuIHNhcC51aS5nZXRDb3JlKCkuYnlJZChmKyItLSIraSl9O0YuY3JlYXRlSWQ9ZnVuY3Rpb24oZixpKXtpZighKHR5cGVvZihmKT09PSJzdHJpbmciJiZ0eXBlb2YoaSk9PT0ic3RyaW5nIikpe3Euc2FwLmxvZy5lcnJvcigic2FwLnVpLmNvcmUuRnJhZ21lbnQuY3JlYXRlSWQ6IHR3byBzdHJpbmdzIG11c3QgYmUgZ2l2ZW4gYXMgcGFyYW1ldGVycywgYnV0IGFyZTogIitmKyIgYW5kICIraSk7cmV0dXJuIHVuZGVmaW5lZH1yZXR1cm4gZisiLS0iK2l9O0YucHJvdG90eXBlLmNyZWF0ZUlkPWZ1bmN0aW9uKGkpe3ZhciBhPXRoaXMuX3NFeHBsaWNpdElkP3RoaXMuX3NFeHBsaWNpdElkKyItLSIraTppO2lmKHRoaXMuX29Db250YWluaW5nVmlldyYmdGhpcy5fb0NvbnRhaW5pbmdWaWV3IT10aGlzKXthPXRoaXMuX29Db250YWluaW5nVmlldy5jcmVhdGVJZChhKX1yZXR1cm4gYX07Ri5wcm90b3R5cGUuaXNTdWJWaWV3PWZ1bmN0aW9uKCl7cmV0dXJuIHRydWV9O3NhcC51aS5mcmFnbWVudD1mdW5jdGlvbihuLFQsYyl7dmFyIHM9e307aWYodHlwZW9mKG4pPT09InN0cmluZyIpe3MuZnJhZ21lbnROYW1lPW47cy5vQ29udHJvbGxlcj1jO3MudHlwZT1UfWVsc2UgaWYodHlwZW9mKG4pPT09Im9iamVjdCIpe3M9bjtpZihUKXtzLm9Db250cm9sbGVyPVR9fWVsc2V7cS5zYXAubG9nLmVycm9yKCJzYXAudWkuZnJhZ21lbnQoKSBtdXN0IGJlIGNhbGxlZCB3aXRoIEZyYWdtZW50IG5hbWUgb3IgY29uZmlnIG9iamVjdCBhcyBmaXJzdCBwYXJhbWV0ZXIsIGJ1dCBpczogIituKX1yZXR1cm4gbmV3IEYocyl9O3NhcC51aS54bWxmcmFnbWVudD1mdW5jdGlvbihpLGYsYyl7aWYodHlwZW9mKGkpPT09InN0cmluZyIpe2lmKHR5cGVvZihmKT09PSJzdHJpbmciKXtyZXR1cm4gc2FwLnVpLmZyYWdtZW50KHtmcmFnbWVudE5hbWU6ZixzSWQ6aSx0eXBlOiJYTUwifSxjKX1lbHNle3JldHVybiBzYXAudWkuZnJhZ21lbnQoaSwiWE1MIixmKX19ZWxzZXtpLnR5cGU9IlhNTCI7cmV0dXJuIHNhcC51aS5mcmFnbWVudChpLGYpfX07c2FwLnVpLmpzZnJhZ21lbnQ9ZnVuY3Rpb24obixmKXtpZih0eXBlb2Yobik9PT0ic3RyaW5nIiYmdHlwZW9mKGYpPT09Im9iamVjdCIpe2lmKGYuY3JlYXRlQ29udGVudCl7cltuXT1mO3Euc2FwLmRlY2xhcmUoe21vZE5hbWU6bix0eXBlOiJmcmFnbWVudCJ9LGZhbHNlKX1lbHNle3JldHVybiBzYXAudWkuZnJhZ21lbnQobiwiSlMiLGYpfX1lbHNlIGlmKHR5cGVvZihuKT09PSJzdHJpbmciJiZmPT09dW5kZWZpbmVkKXtyZXR1cm4gc2FwLnVpLmZyYWdtZW50KG4sIkpTIil9ZWxzZXtpZih0eXBlb2Yobik9PT0ib2JqZWN0Iil7bi50eXBlPSJKUyI7cmV0dXJuIHNhcC51aS5mcmFnbWVudChuLGYpfWVsc2UgaWYoYXJndW1lbnRzJiZhcmd1bWVudHMubGVuZ3RoPj0zKXtyZXR1cm4gc2FwLnVpLmZyYWdtZW50KHtpZDpuLGZyYWdtZW50TmFtZTpmLHR5cGU6IkpTIn0sYXJndW1lbnRzWzJdKX1lbHNle3Euc2FwLmxvZy5lcnJvcigic2FwLnVpLmpzZnJhZ21lbnQoKSB3YXMgY2FsbGVkIHdpdGggd3JvbmcgcGFyYW1ldGVyIHNldDogIituKyIgKyAiK2YpfX19O3NhcC51aS5odG1sZnJhZ21lbnQ9ZnVuY3Rpb24oaSxmLGMpe2lmKHR5cGVvZihpKT09PSJzdHJpbmciKXtpZih0eXBlb2YoZik9PT0ic3RyaW5nIil7cmV0dXJuIHNhcC51aS5mcmFnbWVudCh7ZnJhZ21lbnROYW1lOmYsc0lkOmksdHlwZToiSFRNTCJ9LGMpfWVsc2V7cmV0dXJuIHNhcC51aS5mcmFnbWVudChpLCJIVE1MIixmKX19ZWxzZXtpLnR5cGU9IkhUTUwiO3JldHVybiBzYXAudWkuZnJhZ21lbnQoaSxmKX19O0YucmVnaXN0ZXJUeXBlKCJYTUwiLHtpbml0OmZ1bmN0aW9uKHMpe3RoaXMuX3hDb250ZW50PXMuZnJhZ21lbnRDb250ZW50PygodHlwZW9mKHMuZnJhZ21lbnRDb250ZW50KT09PSJzdHJpbmciKT9xLnBhcnNlWE1MKHMuZnJhZ21lbnRDb250ZW50KS5kb2N1bWVudEVsZW1lbnQ6cy5mcmFnbWVudENvbnRlbnQpOlgubG9hZFRlbXBsYXRlKHMuZnJhZ21lbnROYW1lLCJmcmFnbWVudCIpO3RoaXMuX29Db250YWluaW5nVmlldz10aGlzLl9zRXhwbGljaXRJZD90aGlzOihzLmNvbnRhaW5pbmdWaWV3fHx0aGlzKTtpZigodGhpcy5fb0NvbnRhaW5pbmdWaWV3PT09dGhpcykpe3RoaXMuX29Db250YWluaW5nVmlldy5vQ29udHJvbGxlcj0ocy5jb250YWluaW5nVmlldyYmcy5jb250YWluaW5nVmlldy5vQ29udHJvbGxlcil8fHMub0NvbnRyb2xsZXJ9dmFyIGE9dGhpcztNLnJ1bldpdGhQcmVwcm9jZXNzb3JzKGZ1bmN0aW9uKCl7dmFyIHg9YS5feENvbnRlbnQ7YS5fYUNvbnRlbnQ9WC5wYXJzZVRlbXBsYXRlKGEuX3hDb250ZW50LGEpfSl9fSk7Ri5yZWdpc3RlclR5cGUoIkpTIix7aW5pdDpmdW5jdGlvbihzKXtpZighcltzLmZyYWdtZW50TmFtZV0pe3Euc2FwLnJlcXVpcmUoe21vZE5hbWU6cy5mcmFnbWVudE5hbWUsdHlwZToiZnJhZ21lbnQifSl9cS5leHRlbmQodGhpcyxyW3MuZnJhZ21lbnROYW1lXSk7dGhpcy5fb0NvbnRhaW5pbmdWaWV3PXMuY29udGFpbmluZ1ZpZXd8fHRoaXM7dmFyIGE9dGhpcztNLnJ1bldpdGhQcmVwcm9jZXNzb3JzKGZ1bmN0aW9uKCl7dmFyIGM9YS5jcmVhdGVDb250ZW50KHMub0NvbnRyb2xsZXJ8fGEuX29Db250YWluaW5nVmlldy5vQ29udHJvbGxlcik7YS5fYUNvbnRlbnQ9W107YS5fYUNvbnRlbnQ9YS5fYUNvbnRlbnQuY29uY2F0KGMpfSl9fSk7KGZ1bmN0aW9uKCl7dmFyIF89e307dmFyIGE9ZnVuY3Rpb24oVCl7dmFyIHU9cS5zYXAuZ2V0TW9kdWxlUGF0aChULCIuZnJhZ21lbnQuaHRtbCIpO3ZhciBoPV9bdV07dmFyIFI7aWYoIWgpe1I9cS5zYXAuZ2V0UmVzb3VyY2VOYW1lKFQsIi5mcmFnbWVudC5odG1sIik7aD1xLnNhcC5sb2FkUmVzb3VyY2UoUik7X1t1XT1ofXJldHVybiBofTtGLnJlZ2lzdGVyVHlwZSgiSFRNTCIse2luaXQ6ZnVuY3Rpb24ocyl7dGhpcy5fYUNvbnRlbnQ9W107dGhpcy5nZXRDb250ZW50PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2FDb250ZW50fTt0aGlzLmFkZENvbnRlbnQ9ZnVuY3Rpb24oQyl7dGhpcy5fYUNvbnRlbnQucHVzaChDKX07dGhpcy5fb0NvbnRhaW5pbmdWaWV3PXMuY29udGFpbmluZ1ZpZXd8fHRoaXM7dmFyIGg9cy5mcmFnbWVudENvbnRlbnR8fGEocy5mcmFnbWVudE5hbWUpO3RoaXMuX29UZW1wbGF0ZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTt2YXIgSD1zYXAudWkuY29yZS5SZW5kZXJNYW5hZ2VyLnByZXBhcmVIVE1MNShoKTtpZih0eXBlb2YgSD09PSJzdHJpbmciKXt0aGlzLl9vVGVtcGxhdGUuaW5uZXJIVE1MPUh9ZWxzZXt2YXIgbj1IO3ZhciBmPWRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtmb3IodmFyIGk9MDtpPG4ubGVuZ3RoO2krKyl7Zi5hcHBlbmRDaGlsZChuLml0ZW0oaSkpfXRoaXMuX29UZW1wbGF0ZS5hcHBlbmRDaGlsZChmKX12YXIgbT10aGlzLl9vVGVtcGxhdGUuZ2V0RWxlbWVudHNCeVRhZ05hbWUoInRlbXBsYXRlIilbMF07dmFyIHA9dGhpcy5nZXRNZXRhZGF0YSgpLmdldEFsbFByb3BlcnRpZXMoKTtpZihtKXt2YXIgYj10aGlzO3ZhciBjPUQ7cS5lYWNoKG0uYXR0cmlidXRlcyxmdW5jdGlvbihJLEEpe3ZhciBOPWMuY29udmVydEF0dHJpYnV0ZVRvU2V0dGluZ05hbWUoQS5uYW1lLGIuZ2V0SWQoKSk7dmFyIHY9QS52YWx1ZTt2YXIgUD1wW05dO2lmKCFzW05dKXtpZihQKXtzW05dPWMuY29udmVydFZhbHVlVG9UeXBlKGMuZ2V0UHJvcGVydHlEYXRhVHlwZShQKSx2KX1lbHNlIGlmKHNhcC51aS5jb3JlLm12Yy5IVE1MVmlldy5fbUFsbG93ZWRTZXR0aW5nc1tOXSl7c1tOXT12fX19KTt0aGlzLl9vVGVtcGxhdGU9bX1pZih0aGlzLl9vVGVtcGxhdGUuY29udGVudCl7dmFyIGY9dGhpcy5fb1RlbXBsYXRlLmNvbnRlbnQ7dGhpcy5fb1RlbXBsYXRlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO3RoaXMuX29UZW1wbGF0ZS5hcHBlbmRDaGlsZChmKX12YXIgYj10aGlzO00ucnVuV2l0aFByZXByb2Nlc3NvcnMoZnVuY3Rpb24oKXtELmNvbXBpbGUoYi5fb1RlbXBsYXRlLGIpO3ZhciBkPWIuZ2V0Q29udGVudCgpO2lmKGQmJmQubGVuZ3RoPT09MSl7Yi5fYUNvbnRlbnQ9W2RbMF1dfWVsc2V7fX0pfX0pfSgpKTtyZXR1cm4gRn0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLnJvdXRpbmcuUm91dGVyJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUucm91dGluZy5Sb3V0ZXInKTtqUXVlcnkuc2FwLnJlcXVpcmUoJ3NhcC51aS50aGlyZHBhcnR5LmNyb3Nzcm9hZHMnKTtqUXVlcnkuc2FwLnJlcXVpcmUoJ3NhcC51aS50aGlyZHBhcnR5LnNpZ25hbHMnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9yb3V0aW5nL1JvdXRlciIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ3NhcC91aS9iYXNlL0V2ZW50UHJvdmlkZXInLCdzYXAvdWkvYmFzZS9NYW5hZ2VkT2JqZWN0JywnLi9IYXNoQ2hhbmdlcicsJy4vUm91dGUnLCdzYXAvdWkvdGhpcmRwYXJ0eS9jcm9zc3JvYWRzJywnc2FwL3VpL3RoaXJkcGFydHkvc2lnbmFscyddLGZ1bmN0aW9uKHEsRSxNLEgsUixjLHMpeyJ1c2Ugc3RyaWN0Ijt2YXIgcj17fTt2YXIgYT1FLmV4dGVuZCgic2FwLnVpLmNvcmUucm91dGluZy5Sb3V0ZXIiLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbihvLEMsTyl7RS5hcHBseSh0aGlzKTt0aGlzLl9vQ29uZmlnPUM7dGhpcy5fb1JvdXRlcj1jcm9zc3JvYWRzLmNyZWF0ZSgpO3RoaXMuX29Sb3V0ZXIuaWdub3JlU3RhdGU9dHJ1ZTt0aGlzLl9vUm91dGVzPXt9O3RoaXMuX29WaWV3cz17fTt0aGlzLl9vT3duZXI9Tzt2YXIgdD10aGlzO2lmKCFvKXtvPXt9fWlmKHEuaXNBcnJheShvKSl7dmFyIGI9bztvPXt9O3EuZWFjaChiLGZ1bmN0aW9uKGksZCl7b1tkLm5hbWVdPWR9KX1xLmVhY2gobyxmdW5jdGlvbihkLGUpe2lmKGUubmFtZT09dW5kZWZpbmVkKXtlLm5hbWU9ZH10LmFkZFJvdXRlKGUpfSl9LG1ldGFkYXRhOntwdWJsaWNNZXRob2RzOlsiaW5pdGlhbGl6ZSIsImdldFVSTCIsInJlZ2lzdGVyIl19fSk7YS5NX0VWRU5UUz17Um91dGVNYXRjaGVkOiJyb3V0ZU1hdGNoZWQiLFJvdXRlUGF0dGVybk1hdGNoZWQ6InJvdXRlUGF0dGVybk1hdGNoZWQiLFZpZXdDcmVhdGVkOiJ2aWV3Q3JlYXRlZCJ9O2EucHJvdG90eXBlLmFkZFJvdXRlPWZ1bmN0aW9uKEMscCl7aWYoIUMubmFtZSl7cS5zYXAubG9nLmVycm9yKCJBIG5hbWUgaGFzIHRvIGJlIHNwZWNpZmllZCBmb3IgZXZlcnkgcm91dGUiKX1pZih0aGlzLl9vUm91dGVzW0MubmFtZV0pe3Euc2FwLmxvZy5lcnJvcigiUm91dGUgd2l0aCBuYW1lICIrQy5uYW1lKyIgYWxyZWFkeSBleGlzdHMiKX10aGlzLl9vUm91dGVzW0MubmFtZV09bmV3IFIodGhpcyxDLHApfTthLnByb3RvdHlwZS5wYXJzZT1mdW5jdGlvbihuLG8pe3RoaXMuX29Sb3V0ZXIucGFyc2Uobil9O2EucHJvdG90eXBlLmluaXRpYWxpemU9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLGg9dGhpcy5vSGFzaENoYW5nZXI9SC5nZXRJbnN0YW5jZSgpO2lmKHRoaXMuX2JJc0luaXRpYWxpemVkKXtxLnNhcC5sb2cud2FybmluZygiUm91dGVyIGlzIGFscmVhZHkgaW5pdGlhbGl6ZWQuIik7cmV0dXJuIHRoaXN9dGhpcy5fYklzSW5pdGlhbGl6ZWQ9dHJ1ZTt0aGlzLmZuSGFzaENoYW5nZWQ9ZnVuY3Rpb24oZSl7dC5wYXJzZShlLmdldFBhcmFtZXRlcigibmV3SGFzaCIpLGUuZ2V0UGFyYW1ldGVyKCJvbGRIYXNoIikpfTtoLmF0dGFjaEV2ZW50KCJoYXNoQ2hhbmdlZCIsdGhpcy5mbkhhc2hDaGFuZ2VkKTtpZighaC5pbml0KCkpe3RoaXMucGFyc2UoaC5nZXRIYXNoKCkpfXJldHVybiB0aGlzfTthLnByb3RvdHlwZS5zdG9wPWZ1bmN0aW9uKCl7aWYoIXRoaXMuX2JJc0luaXRpYWxpemVkKXtxLnNhcC5sb2cud2FybmluZygiUm91dGVyIGlzIG5vdCBpbml0aWFsaXplZC4gQnV0IGl0IGdvdCBzdG9wcGVkIil9aWYodGhpcy5mbkhhc2hDaGFuZ2VkKXt0aGlzLm9IYXNoQ2hhbmdlci5kZXRhY2hFdmVudCgiaGFzaENoYW5nZWQiLHRoaXMuZm5IYXNoQ2hhbmdlZCl9dGhpcy5fYklzSW5pdGlhbGl6ZWQ9ZmFsc2U7cmV0dXJuIHRoaXN9O2EucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXtFLnByb3RvdHlwZS5kZXN0cm95LmFwcGx5KHRoaXMpO2lmKCF0aGlzLl9iSXNJbml0aWFsaXplZCl7cS5zYXAubG9nLmluZm8oIlJvdXRlciBpcyBub3QgaW5pdGlhbGl6ZWQsIGJ1dCBnb3QgZGVzdHJveWVkLiIpfWlmKHRoaXMuZm5IYXNoQ2hhbmdlZCl7dGhpcy5vSGFzaENoYW5nZXIuZGV0YWNoRXZlbnQoImhhc2hDaGFuZ2VkIix0aGlzLmZuSGFzaENoYW5nZWQpfXRoaXMuX29Pd25lcj1udWxsO3RoaXMuX29Sb3V0ZXIucmVtb3ZlQWxsUm91dGVzKCk7dGhpcy5fb1JvdXRlcj1udWxsO3JldHVybiB0aGlzfTthLnByb3RvdHlwZS5nZXRVUkw9ZnVuY3Rpb24obixwKXtpZihwPT09dW5kZWZpbmVkKXtwPXt9fXZhciBvPXRoaXMuX29Sb3V0ZXNbbl07aWYoIW8pe3Euc2FwLmxvZy53YXJuaW5nKCJSb3V0ZSB3aXRoIG5hbWUgIituKyIgZG9lcyBub3QgZXhpc3QiKTtyZXR1cm59cmV0dXJuIG8uZ2V0VVJMKHApfTthLnByb3RvdHlwZS5nZXRWaWV3PWZ1bmN0aW9uKHYsVixiKXtpZighdil7cS5zYXAubG9nLmVycm9yKCJBIG5hbWUgZm9yIHRoZSB2aWV3IGhhcyB0byBiZSBkZWZpbmVkIil9aWYoIXRoaXMuX29WaWV3c1t2XSl7dmFyIEM9ZnVuY3Rpb24oKXt2YXIgbz17dHlwZTpWLHZpZXdOYW1lOnZ9O2lmKGIpe28uaWQ9Yn1yZXR1cm4gc2FwLnVpLnZpZXcobyl9O2lmKHRoaXMuX29Pd25lcil7dmFyIHQ9dGhpcztNLnJ1bldpdGhPd25lcihmdW5jdGlvbigpe3QuX29WaWV3c1t2XT1DKCl9LHRoaXMuX29Pd25lcil9ZWxzZXt0aGlzLl9vVmlld3Nbdl09QygpfXRoaXMuZmlyZVZpZXdDcmVhdGVkKHt2aWV3OnRoaXMuX29WaWV3c1t2XSx2aWV3TmFtZTp2LHR5cGU6Vn0pfXJldHVybiB0aGlzLl9vVmlld3Nbdl19O2EucHJvdG90eXBlLnNldFZpZXc9ZnVuY3Rpb24odixWKXtpZighdil7cS5zYXAubG9nLmVycm9yKCJBIG5hbWUgZm9yIHRoZSB2aWV3IGhhcyB0byBiZSBkZWZpbmVkIil9dGhpcy5fb1ZpZXdzW3ZdPVZ9O2EucHJvdG90eXBlLm5hdlRvPWZ1bmN0aW9uKG4scCxiKXtpZihiKXt0aGlzLm9IYXNoQ2hhbmdlci5yZXBsYWNlSGFzaCh0aGlzLmdldFVSTChuLHApKX1lbHNle3RoaXMub0hhc2hDaGFuZ2VyLnNldEhhc2godGhpcy5nZXRVUkwobixwKSl9fTthLnByb3RvdHlwZS5hdHRhY2hSb3V0ZU1hdGNoZWQ9ZnVuY3Rpb24oZCxmLGwpe3RoaXMuYXR0YWNoRXZlbnQoInJvdXRlTWF0Y2hlZCIsZCxmLGwpO3JldHVybiB0aGlzfTthLnByb3RvdHlwZS5kZXRhY2hSb3V0ZU1hdGNoZWQ9ZnVuY3Rpb24oZixsKXt0aGlzLmRldGFjaEV2ZW50KCJyb3V0ZU1hdGNoZWQiLGYsbCk7cmV0dXJuIHRoaXN9O2EucHJvdG90eXBlLmZpcmVSb3V0ZU1hdGNoZWQ9ZnVuY3Rpb24oQSl7dGhpcy5maXJlRXZlbnQoInJvdXRlTWF0Y2hlZCIsQSk7cmV0dXJuIHRoaXN9O2EucHJvdG90eXBlLmF0dGFjaFZpZXdDcmVhdGVkPWZ1bmN0aW9uKGQsZixsKXt0aGlzLmF0dGFjaEV2ZW50KCJ2aWV3Q3JlYXRlZCIsZCxmLGwpO3JldHVybiB0aGlzfTthLnByb3RvdHlwZS5kZXRhY2hWaWV3Q3JlYXRlZD1mdW5jdGlvbihmLGwpe3RoaXMuZGV0YWNoRXZlbnQoInZpZXdDcmVhdGVkIixmLGwpO3JldHVybiB0aGlzfTthLnByb3RvdHlwZS5maXJlVmlld0NyZWF0ZWQ9ZnVuY3Rpb24oQSl7dGhpcy5maXJlRXZlbnQoInZpZXdDcmVhdGVkIixBKTtyZXR1cm4gdGhpc307YS5wcm90b3R5cGUuYXR0YWNoUm91dGVQYXR0ZXJuTWF0Y2hlZD1mdW5jdGlvbihkLGYsbCl7dGhpcy5hdHRhY2hFdmVudCgicm91dGVQYXR0ZXJuTWF0Y2hlZCIsZCxmLGwpO3JldHVybiB0aGlzfTthLnByb3RvdHlwZS5kZXRhY2hSb3V0ZVBhdHRlcm5NYXRjaGVkPWZ1bmN0aW9uKGYsbCl7dGhpcy5kZXRhY2hFdmVudCgicm91dGVQYXR0ZXJuTWF0Y2hlZCIsZixsKTtyZXR1cm4gdGhpc307YS5wcm90b3R5cGUuZmlyZVJvdXRlUGF0dGVybk1hdGNoZWQ9ZnVuY3Rpb24oQSl7dGhpcy5maXJlRXZlbnQoInJvdXRlUGF0dGVybk1hdGNoZWQiLEEpO3JldHVybiB0aGlzfTthLnByb3RvdHlwZS5yZWdpc3Rlcj1mdW5jdGlvbihuKXtyW25dPXRoaXM7cmV0dXJuIHRoaXN9O2EuZ2V0Um91dGVyPWZ1bmN0aW9uKG4pe3JldHVybiByW25dfTtyZXR1cm4gYX0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLnRtcGwuVGVtcGxhdGUnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS50bXBsLlRlbXBsYXRlJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvdG1wbC9UZW1wbGF0ZSIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ3NhcC91aS9iYXNlL01hbmFnZWRPYmplY3QnXSxmdW5jdGlvbihxLE0peyJ1c2Ugc3RyaWN0Ijt2YXIgVD1NLmV4dGVuZCgic2FwLnVpLmNvcmUudG1wbC5UZW1wbGF0ZSIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKGkscyl7TS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LG1ldGFkYXRhOntzdGVyZW90eXBlOiJ0ZW1wbGF0ZSIsImFic3RyYWN0Ijp0cnVlLHByb3BlcnRpZXM6eyJjb250ZW50Ijp7dHlwZToic3RyaW5nIixncm91cDoiRGF0YSIsZGVmYXVsdFZhbHVlOm51bGx9fSxwdWJsaWNNZXRob2RzOlsiZGVjbGFyZUNvbnRyb2wiLCJjcmVhdGVDb250cm9sIiwicGxhY2VBdCIsImNyZWF0ZU1ldGFkYXRhIiwiY3JlYXRlUmVuZGVyZXIiXSxsaWJyYXJ5OiJzYXAudWkuY29yZSJ9fSk7VC5wcm90b3R5cGUuZ2V0SW50ZXJmYWNlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9O1QuX21TdXBwb3J0ZWRUeXBlcz17fTtULnJlZ2lzdGVyVHlwZT1mdW5jdGlvbih0LGMpe1QuX21TdXBwb3J0ZWRUeXBlc1t0XT1jfTtULnVucmVnaXN0ZXJUeXBlPWZ1bmN0aW9uKHQpe2RlbGV0ZSBULl9tU3VwcG9ydGVkVHlwZXNbdF19O1QucGFyc2VQYXRoPWZ1bmN0aW9uKHApe3ZhciBtPXVuZGVmaW5lZCxzPXAuaW5kZXhPZigiPiIpO2lmKHM+MCl7bT1wLnN1YnN0cigwLHMpO3A9cC5zdWJzdHIocysxKX1yZXR1cm57cGF0aDpwLG1vZGVsOm19fTtULnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKHMsUyl7aWYodGhpcy5nZXRNZXRhZGF0YSgpLmdldE5hbWUoKT09PSJzYXAudWkuY29yZS50bXBsLlRlbXBsYXRlIil7dGhyb3cgbmV3IEVycm9yKCJUaGUgY2xhc3MgJ3NhcC51aS5jb3JlLnRtcGwuVGVtcGxhdGUnIGlzIGFic3RyYWN0IGFuZCBtdXN0IG5vdCBiZSBpbnN0YW50aWF0ZWQhIil9aWYoTS5iaW5kaW5nUGFyc2VyPT09c2FwLnVpLmJhc2UuQmluZGluZ1BhcnNlci5jb21wbGV4UGFyc2VyKXtULnByb3RvdHlwZS5leHRyYWN0QmluZGluZ0luZm89ZnVuY3Rpb24odixpLFMpe00uYmluZGluZ1BhcnNlcj1zYXAudWkuYmFzZS5CaW5kaW5nUGFyc2VyLnNpbXBsZVBhcnNlcjt2YXIgcj1zYXAudWkuY29yZS5Db250cm9sLnByb3RvdHlwZS5leHRyYWN0QmluZGluZ0luZm8uYXBwbHkodGhpcyxhcmd1bWVudHMpO00uYmluZGluZ1BhcnNlcj1zYXAudWkuYmFzZS5CaW5kaW5nUGFyc2VyLmNvbXBsZXhQYXJzZXI7cmV0dXJuIHJ9fX07VC5wcm90b3R5cGUuZGVjbGFyZUNvbnRyb2w9ZnVuY3Rpb24oYyl7aWYoYyl7dmFyIG09dGhpcy5jcmVhdGVNZXRhZGF0YSgpLHI9dGhpcy5jcmVhdGVSZW5kZXJlcigpLHQ9dGhpcztxLnNhcC5yZXF1aXJlKCJzYXAudWkuY29yZS50bXBsLlRlbXBsYXRlQ29udHJvbCIpO3NhcC51aS5jb3JlLnRtcGwuVGVtcGxhdGVDb250cm9sLmV4dGVuZChjLHttZXRhZGF0YTptLGluaXQ6ZnVuY3Rpb24oKXtzYXAudWkuY29yZS50bXBsLlRlbXBsYXRlQ29udHJvbC5wcm90b3R5cGUuaW5pdC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5zZXRUZW1wbGF0ZSh0KX0scmVuZGVyZXI6e3JlbmRlclRlbXBsYXRlOnIsaGFzQ29udHJvbERhdGE6bS5faGFzQ29udHJvbERhdGF9fSk7cmV0dXJuIHEuc2FwLmdldE9iamVjdChjKX19O1QucHJvdG90eXBlLmNyZWF0ZUNvbnRyb2w9ZnVuY3Rpb24oaSxjLHYpe3Euc2FwLnJlcXVpcmUoInNhcC51aS5jb3JlLnRtcGwuVGVtcGxhdGVDb250cm9sIik7dmFyIEM9bmV3IHNhcC51aS5jb3JlLnRtcGwuVGVtcGxhdGVDb250cm9sKHtpZDppLHRlbXBsYXRlOnRoaXMsY29udGV4dDpjfSk7Qy5zZXRUZW1wbGF0ZVJlbmRlcmVyKHRoaXMuY3JlYXRlUmVuZGVyZXIodikpO3JldHVybiBDfTtULnByb3RvdHlwZS5wbGFjZUF0PWZ1bmN0aW9uKHIsYyxwLGkpe2lmKHR5cGVvZiBjPT09InN0cmluZyJ8fHR5cGVvZiBjPT09Im51bWJlciIpe3A9YztjPXVuZGVmaW5lZH12YXIgSTtpZighKHIgaW5zdGFuY2VvZiBzYXAudWkuY29yZS5Db250cm9sKSYmaSl7dmFyICQ9dHlwZW9mIHI9PT0ic3RyaW5nIj9xLnNhcC5ieUlkKHIpOnEocik7aWYoJC5sZW5ndGg+MCl7ST0kLmF0dHIoImlkIik7cj0kLmdldCgwKTt2YXIgQz0kLmF0dHIoImRhdGEtY29udGV4dCIpO2M9Y3x8QyYmcS5wYXJzZUpTT04oQyk7c2FwLnVpLmNvcmUuUmVuZGVyTWFuYWdlci5tYXJrSW5saW5lVGVtcGxhdGUoJCl9fXZhciBvPXRoaXMuY3JlYXRlQ29udHJvbChJLGMpO28ucGxhY2VBdChyLHApO3JldHVybiBvfTtULnByb3RvdHlwZS5jcmVhdGVNZXRhZGF0YT1mdW5jdGlvbigpe3Euc2FwLmxvZy5lcnJvcigiVGhlIGZ1bmN0aW9uIGNyZWF0ZU1ldGFkYXRhIGlzIGFuIGFic3RyYWN0IGZ1bmN0aW9uIHdoaWNoIG5lZWRzIHRvIGJlIGltcGxlbWVudGVkIGJ5IHN1YmNsYXNzZXMuIil9O1QucHJvdG90eXBlLmNyZWF0ZVJlbmRlcmVyPWZ1bmN0aW9uKCl7cS5zYXAubG9nLmVycm9yKCJUaGUgZnVuY3Rpb24gY3JlYXRlUmVuZGVyZXIgaXMgYW4gYWJzdHJhY3QgZnVuY3Rpb24gd2hpY2ggbmVlZHMgdG8gYmUgaW1wbGVtZW50ZWQgYnkgc3ViY2xhc3Nlcy4iKX07c2FwLnVpLnRlbXBsYXRlPWZ1bmN0aW9uKHQpe2lmKCF0KXt2YXIgYT1bXTtxLmVhY2goVC5fbVN1cHBvcnRlZFR5cGVzLGZ1bmN0aW9uKHMsail7cSgic2NyaXB0W3R5cGU9JyIrcysiJ10sIFtkYXRhLXR5cGU9JyIrcysiJ10iKS5lYWNoKGZ1bmN0aW9uKG0sRSl7YS5wdXNoKHNhcC51aS50ZW1wbGF0ZSh7aWQ6RS5pZCxkb21yZWY6RSx0eXBlOnMsX2NsYXNzOmp9KSl9KX0pO3JldHVybiBhfWVsc2V7aWYodHlwZW9mIHQ9PT0ic3RyaW5nIil7cmV0dXJuIHNhcC51aS50ZW1wbGF0ZSh7aWQ6dH0pfWVsc2UgaWYodCYmdC50YWdOYW1lJiZ0Lm5vZGVOYW1lJiZ0Lm93bmVyRG9jdW1lbnQmJnQubm9kZVR5cGU9PT0xKXtyZXR1cm4gc2FwLnVpLnRlbXBsYXRlKHtpZDp0LmlkLGRvbXJlZjp0fSl9dD1xLmV4dGVuZCh7dHlwZTpULkRFRkFVTFRfVEVNUExBVEV9LHQpO3ZhciBpLHMsYyxDLHIsYj1mYWxzZSxsPXR5cGVvZiB0LnNyYz09PSJzdHJpbmciO2lmKGwpe3ZhciBSPXEuc2FwLnNqYXgoe3VybDp0LnNyYyxkYXRhVHlwZToidGV4dCJ9KTtpZihSLnN1Y2Nlc3Mpe2k9dC5pZCxzPXQudHlwZSxjPXQuY29udHJvbCxDPVIuZGF0YTt2YXIgZD0vXjwhLS1cc1VJNTpUZW1wbGF0ZVxzdHlwZT0oW2EtelwvXC1dKilccyg/OmNvbnRyb2xsZXI9KFtBLVphLXouXSopXHMpPy0tPi8sZT1DLm1hdGNoKGQpO2lmKGUpe3M9ZVsxXTtpZihlLmxlbmd0aD09Myl7Yj1lWzJdfUM9Qy5zdWJzdHIoZVswXS5sZW5ndGgpfX1lbHNle3Rocm93IG5ldyBFcnJvcigiVGhlIHRlbXBsYXRlIGNvdWxkIG5vdCBiZSBsb2FkZWQgZnJvbSAiK3Quc3JjKyIhIil9fWVsc2V7dmFyIEU9dC5kb21yZWZ8fHEuc2FwLmRvbUJ5SWQodC5pZCksJD1xKEUpLEk9ZmFsc2U7aT10LmlkfHxFJiZFLmlkO3M9JC5hdHRyKCJ0eXBlIil8fHQudHlwZSxjPSQuYXR0cigiZGF0YS1jb250cm9sIil8fHQuY29udHJvbDtpZihpKXt2YXIgZj1zYXAudWkuZ2V0Q29yZSgpLmdldFRlbXBsYXRlKGkpO2lmKCFmIGluc3RhbmNlb2YgVCl7dGhyb3cgbmV3IEVycm9yKCJPYmplY3QgZm9yIGlkIFwiIitpKyJcIiBpcyBubyBzYXAudWkuY29yZS50bXBsLlRlbXBsYXRlISIpfWVsc2V7aWYoZil7cmV0dXJuIGZ9fX1pZigkLmxlbmd0aD09PTApe3Rocm93IG5ldyBFcnJvcigiRE9NIGVsZW1lbnQgZm9yIHRoZSBUZW1wbGF0ZSB3aXRoIHRoZSBpZCBcIiIraSsiXCIgbm90IGZvdW5kISIpfUM9JC5odG1sKCk7dmFyIGc9L3BhdGg9Iihcd3xcL3wmZ3Q7KSsiL2k7aWYoZy50ZXN0KEMpKXtDPUMucmVwbGFjZSgiJmd0OyIsIj4iKX12YXIgaD1FLnRhZ05hbWUudG9Mb3dlckNhc2UoKTtpZihoIT09InNjcmlwdCIpe0k9JC5wYXJlbnRzKCJib2R5IikubGVuZ3RoPT09MX19dmFyIGo9dC5fY2xhc3M7aWYoIWope2o9VC5fbVN1cHBvcnRlZFR5cGVzW3NdO2lmKCFqKXt0aHJvdyBuZXcgRXJyb3IoIlRoZSB0eXBlIFwiIitzKyJcIiBpcyBub3Qgc3VwcG9ydGVkLiIpfX1xLnNhcC5yZXF1aXJlKGopO3ZhciBvPXEuc2FwLmdldE9iamVjdChqKTt2YXIgaz1uZXcgbyh7aWQ6aSxjb250ZW50OkN9KTtpZihjKXtrLmRlY2xhcmVDb250cm9sKGMpfWlmKGIpe2suX3NDb250cm9sbGVyTmFtZT1ifWlmKEkpe2sucGxhY2VBdChpLHQuY29udGV4dCx1bmRlZmluZWQsdHJ1ZSl9cmV0dXJuIGt9fTtULkRFRkFVTFRfVEVNUExBVEU9InRleHQveC1oYW5kbGViYXJzLXRlbXBsYXRlIjtULnJlZ2lzdGVyVHlwZShULkRFRkFVTFRfVEVNUExBVEUsInNhcC51aS5jb3JlLnRtcGwuSGFuZGxlYmFyc1RlbXBsYXRlIik7cmV0dXJuIFR9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS51dGlsLkV4cG9ydFR5cGUnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS51dGlsLkV4cG9ydFR5cGUnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS91dGlsL0V4cG9ydFR5cGUiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvYmFzZS9NYW5hZ2VkT2JqZWN0J10sZnVuY3Rpb24ocSxNKXsndXNlIHN0cmljdCc7dmFyIEU9TS5leHRlbmQoJ3NhcC51aS5jb3JlLnV0aWwuRXhwb3J0VHlwZScse21ldGFkYXRhOntwcm9wZXJ0aWVzOntmaWxlRXh0ZW5zaW9uOidzdHJpbmcnLG1pbWVUeXBlOidzdHJpbmcnLGNoYXJzZXQ6J3N0cmluZyd9fX0pO0UucHJvdG90eXBlLmluaXQ9ZnVuY3Rpb24oKXt0aGlzLl9vRXhwb3J0PW51bGx9O0UucHJvdG90eXBlLl9nZW5lcmF0ZT1mdW5jdGlvbihlKXt0aGlzLl9vRXhwb3J0PWU7dmFyIGM9dGhpcy5nZW5lcmF0ZSgpO3RoaXMuX29FeHBvcnQ9bnVsbDtyZXR1cm4gY307RS5wcm90b3R5cGUuZ2VuZXJhdGU9ZnVuY3Rpb24oKXtyZXR1cm4nJ307RS5wcm90b3R5cGUuZ2V0Q29sdW1uQ291bnQ9ZnVuY3Rpb24oKXtpZih0aGlzLl9vRXhwb3J0KXtyZXR1cm4gdGhpcy5fb0V4cG9ydC5nZXRDb2x1bW5zKCkubGVuZ3RofXJldHVybiAwfTtFLnByb3RvdHlwZS5nZXRSb3dDb3VudD1mdW5jdGlvbigpe2lmKHRoaXMuX29FeHBvcnQmJnRoaXMuX29FeHBvcnQuZ2V0QmluZGluZygicm93cyIpKXtyZXR1cm4gdGhpcy5fb0V4cG9ydC5nZXRCaW5kaW5nKCJyb3dzIikuZ2V0TGVuZ3RoKCl9cmV0dXJuIDB9O0UucHJvdG90eXBlLmNvbHVtbkdlbmVyYXRvcj1mdW5jdGlvbigpe3ZhciBpPTAsYz10aGlzLl9vRXhwb3J0LmdldENvbHVtbnMoKSxDPWMubGVuZ3RoO3JldHVybntuZXh0OmZ1bmN0aW9uKCl7aWYoaTxDKXt2YXIgST1pO2krKztyZXR1cm57dmFsdWU6e2luZGV4OkksbmFtZTpjW0ldLmdldE5hbWUoKX0sZG9uZTpmYWxzZX19ZWxzZXtyZXR1cm57dmFsdWU6dW5kZWZpbmVkLGRvbmU6dHJ1ZX19fX19O0UucHJvdG90eXBlLmNlbGxHZW5lcmF0b3I9ZnVuY3Rpb24oKXt2YXIgaT0wLHI9dGhpcy5fb0V4cG9ydC5nZXRBZ2dyZWdhdGlvbignX3RlbXBsYXRlJyksYz1yLmdldENlbGxzKCksQz1jLmxlbmd0aDtyZXR1cm57bmV4dDpmdW5jdGlvbigpe2lmKGk8Qyl7dmFyIEk9aTtpKys7dmFyIG09e307cS5lYWNoKGNbSV0uZ2V0Q3VzdG9tRGF0YSgpLGZ1bmN0aW9uKCl7bVt0aGlzLmdldEtleSgpXT10aGlzLmdldFZhbHVlKCl9KTtyZXR1cm57dmFsdWU6e2luZGV4OkksY29udGVudDpjW0ldLmdldENvbnRlbnQoKSxjdXN0b21EYXRhOm19LGRvbmU6ZmFsc2V9fWVsc2V7cmV0dXJue3ZhbHVlOnVuZGVmaW5lZCxkb25lOnRydWV9fX19fTtFLnByb3RvdHlwZS5yb3dHZW5lcmF0b3I9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLGk9MCxlPXRoaXMuX29FeHBvcnQsYj1lLmdldEJpbmRpbmcoInJvd3MiKSxCPWUuZ2V0QmluZGluZ0luZm8oInJvd3MiKSxjPWIuZ2V0Q29udGV4dHMoMCxiLmdldExlbmd0aCgpKSxDPWMubGVuZ3RoLHI9ZS5nZXRBZ2dyZWdhdGlvbignX3RlbXBsYXRlJyk7cmV0dXJue25leHQ6ZnVuY3Rpb24oKXtpZihpPEMpe3ZhciBJPWk7aSsrO3Iuc2V0QmluZGluZ0NvbnRleHQoY1tJXSxCLm1vZGVsKTtyZXR1cm57dmFsdWU6e2luZGV4OkksY2VsbHM6dC5jZWxsR2VuZXJhdG9yKCl9LGRvbmU6ZmFsc2V9fWVsc2V7cmV0dXJue3ZhbHVlOnVuZGVmaW5lZCxkb25lOnRydWV9fX19fTtyZXR1cm4gRX0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLnV0aWwuRXhwb3J0VHlwZUNTVicpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLnV0aWwuRXhwb3J0VHlwZUNTVicpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL3V0aWwvRXhwb3J0VHlwZUNTViIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJy4vRXhwb3J0VHlwZSddLGZ1bmN0aW9uKHEsRSl7J3VzZSBzdHJpY3QnO3ZhciBDPUUuZXh0ZW5kKCdzYXAudWkuY29yZS51dGlsLkV4cG9ydFR5cGVDU1YnLHttZXRhZGF0YTp7cHJvcGVydGllczp7c2VwYXJhdG9yQ2hhcjp7dHlwZTonc3RyaW5nJyxkZWZhdWx0VmFsdWU6JywnfX19fSk7Qy5wcm90b3R5cGUuc2V0U2VwYXJhdG9yQ2hhcj1mdW5jdGlvbihzKXt2YXIgcz10aGlzLnZhbGlkYXRlUHJvcGVydHkoJ3NlcGFyYXRvckNoYXInLHMpO2lmKHMubGVuZ3RoPjEpe3Rocm93IG5ldyBFcnJvcigiVmFsdWUgb2YgcHJvcGVydHkgXCJzZXBhcmF0b3JDaGFyXCIgbmVlZHMgdG8gYmUgZXhhY3RseSBvbmUgY2hhcmFjdGVyIG9yIGVtcHR5LiAiKyJcIiIrcysiXCIgaXMgIitzLmxlbmd0aCsiIGNoYXJhY3RlcnMgbG9uZy4iKX1yZXR1cm4gdGhpcy5zZXRQcm9wZXJ0eSgnc2VwYXJhdG9yQ2hhcicscyl9O0MucHJvdG90eXBlLmluaXQ9ZnVuY3Rpb24oKXt0aGlzLnNldFByb3BlcnR5KCdmaWxlRXh0ZW5zaW9uJywnY3N2Jyx0cnVlKTt0aGlzLnNldFByb3BlcnR5KCdtaW1lVHlwZScsJ3RleHQvY3N2Jyx0cnVlKTt0aGlzLnNldFByb3BlcnR5KCdjaGFyc2V0JywndXRmLTgnLHRydWUpfTtDLnByb3RvdHlwZS5lc2NhcGVDb250ZW50PWZ1bmN0aW9uKHYpe2lmKHYmJih2LmluZGV4T2YodGhpcy5nZXRTZXBhcmF0b3JDaGFyKCkpPi0xfHx2LmluZGV4T2YoJ1xyXG4nKT4tMSkpe3Y9di5yZXBsYWNlKC8iL2csJyIiJyk7dj0nIicrdisnIid9cmV0dXJuIHZ9O0MucHJvdG90eXBlLmdlbmVyYXRlPWZ1bmN0aW9uKCl7dmFyIGI9W107dGhpcy5nZW5lcmF0ZUNvbHVtbnMoYik7dGhpcy5nZW5lcmF0ZVJvd3MoYik7cmV0dXJuIGIuam9pbignXHJcbicpfTtDLnByb3RvdHlwZS5nZW5lcmF0ZUNvbHVtbnM9ZnVuY3Rpb24oYil7dmFyIGM9W10sbz10aGlzLmNvbHVtbkdlbmVyYXRvcigpLGE7d2hpbGUoIShhPW8ubmV4dCgpKS5kb25lKXtjLnB1c2godGhpcy5lc2NhcGVDb250ZW50KGEudmFsdWUubmFtZSkpfWIucHVzaChjLmpvaW4odGhpcy5nZXRTZXBhcmF0b3JDaGFyKCkpKX07Qy5wcm90b3R5cGUuZ2VuZXJhdGVSb3dzPWZ1bmN0aW9uKGIpe3ZhciByPXRoaXMucm93R2VuZXJhdG9yKCksUjt3aGlsZSghKFI9ci5uZXh0KCkpLmRvbmUpe3ZhciBhPVtdO3ZhciBjPVIudmFsdWUuY2VsbHMsbzt3aGlsZSghKG89Yy5uZXh0KCkpLmRvbmUpe2EucHVzaCh0aGlzLmVzY2FwZUNvbnRlbnQoby52YWx1ZS5jb250ZW50KSl9Yi5wdXNoKGEuam9pbih0aGlzLmdldFNlcGFyYXRvckNoYXIoKSkpfX07cmV0dXJuIEN9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS51dGlsLk1vY2tTZXJ2ZXInKSl7DQovKg0KICogU0FQIFVJIGRldmVsb3BtZW50IHRvb2xraXQgZm9yIEhUTUw1IChTQVBVSTUvT3BlblVJNSkNCiAqIChjKSBDb3B5cmlnaHQgMjAwOS0yMDE0IFNBUCBTRSBvciBhbiBTQVAgYWZmaWxpYXRlIGNvbXBhbnkuIA0KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAtIHNlZSBMSUNFTlNFLnR4dC4NCiAqLw0KalF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS51dGlsLk1vY2tTZXJ2ZXInKTtqUXVlcnkuc2FwLnJlcXVpcmUoJ3NhcC51aS50aGlyZHBhcnR5LnNpbm9uJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvdXRpbC9Nb2NrU2VydmVyIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL0RldmljZScsJ3NhcC91aS9iYXNlL01hbmFnZWRPYmplY3QnLCdzYXAvdWkvdGhpcmRwYXJ0eS9zaW5vbiddLGZ1bmN0aW9uKHEsRCxNLGQpeyJ1c2Ugc3RyaWN0IjtpZighIUQuYnJvd3Nlci5pbnRlcm5ldF9leHBsb3Jlcil7cS5zYXAucmVxdWlyZSgic2FwLnVpLnRoaXJkcGFydHkuc2lub24taWUiKX12YXIgZj1NLmV4dGVuZCgic2FwLnVpLmNvcmUudXRpbC5Nb2NrU2VydmVyIix7Y29uc3RydWN0b3I6ZnVuY3Rpb24oaSxzLFMpe00uYXBwbHkodGhpcyxhcmd1bWVudHMpO2YuX2FTZXJ2ZXJzLnB1c2godGhpcyl9LG1ldGFkYXRhOntwcm9wZXJ0aWVzOntyb290VXJpOiJzdHJpbmciLHJlcXVlc3RzOnt0eXBlOiJvYmplY3RbXSIsZGVmYXVsdFZhbHVlOltdfX19LF9vU2VydmVyOm51bGwsX2FGaWx0ZXI6bnVsbCxfb01vY2tkYXRhOm51bGwsX29NZXRhZGF0YTpudWxsLF9zTWV0YWRhdGFVcmw6bnVsbCxfc01vY2tkYXRhQmFzZVVybDpudWxsLF9tRW50aXR5U2V0czpudWxsfSk7Zi5wcm90b3R5cGUuc3RhcnQ9ZnVuY3Rpb24oKXt0aGlzLl9vU2VydmVyPWYuX2dldEluc3RhbmNlKCk7dGhpcy5fYUZpbHRlcnM9W107dmFyIHI9dGhpcy5nZXRSZXF1ZXN0cygpO3ZhciBsPXIubGVuZ3RoO2Zvcih2YXIgaT0wO2k8bDtpKyspe3ZhciBSPXJbaV07dGhpcy5fYWRkUmVxdWVzdEhhbmRsZXIoUi5tZXRob2QsUi5wYXRoLFIucmVzcG9uc2UpfX07Zi5wcm90b3R5cGUuc3RvcD1mdW5jdGlvbigpe2lmKHRoaXMuaXNTdGFydGVkKCkpe3RoaXMuX3JlbW92ZUFsbFJlcXVlc3RIYW5kbGVycygpO3RoaXMuX3JlbW92ZUFsbEZpbHRlcnMoKTt0aGlzLl9vU2VydmVyPW51bGx9fTtmLnByb3RvdHlwZS5pc1N0YXJ0ZWQ9ZnVuY3Rpb24oKXtyZXR1cm4hIXRoaXMuX29TZXJ2ZXJ9O2YucHJvdG90eXBlLl9hcHBseVF1ZXJ5T25Db2xsZWN0aW9uPWZ1bmN0aW9uKEYsUSxlKXt2YXIgYT1RLnNwbGl0KCc9Jyk7dmFyIG89YVsxXTtpZihvPT09IiIpcmV0dXJuO2lmKG8ubGFzdEluZGV4T2YoJywnKT09PW8ubGVuZ3RoKXtxLnNhcC5sb2cuZXJyb3IoIlRoZSBVUkkgaXMgdmlvbGF0aW5nIHRoZSBjb25zdHJ1Y3Rpb24gcnVsZXMgZGVmaW5lZCBpbiB0aGUgRGF0YSBTZXJ2aWNlcyBzcGVjaWZpY2F0aW9uISIpO3Rocm93IG5ldyBFcnJvcigiNDAwIil9c3dpdGNoKGFbMF0pe2Nhc2UiJHRvcCI6aWYoIShuZXcgUmVnRXhwKC9eXGQrJC8pLnRlc3QobykpKXtxLnNhcC5sb2cuZXJyb3IoIkludmFsaWQgc3lzdGVtIHF1ZXJ5IG9wdGlvbnMgdmFsdWUhIik7dGhyb3cgbmV3IEVycm9yKCI0MDAiKX1GLnJlc3VsdHM9Ri5yZXN1bHRzLnNsaWNlKDAsbyk7YnJlYWs7Y2FzZSIkc2tpcCI6aWYoIShuZXcgUmVnRXhwKC9eXGQrJC8pLnRlc3QobykpKXtxLnNhcC5sb2cuZXJyb3IoIkludmFsaWQgc3lzdGVtIHF1ZXJ5IG9wdGlvbnMgdmFsdWUhIik7dGhyb3cgbmV3IEVycm9yKCI0MDAiKX1GLnJlc3VsdHM9Ri5yZXN1bHRzLnNsaWNlKG8sRi5yZXN1bHRzLmxlbmd0aCk7YnJlYWs7Y2FzZSIkb3JkZXJieSI6Ri5yZXN1bHRzPXRoaXMuX2dldE9kYXRhUXVlcnlPcmRlcmJ5KEYucmVzdWx0cyxvKTticmVhaztjYXNlIiRmaWx0ZXIiOkYucmVzdWx0cz10aGlzLl9yZWN1cnNpdmVPZGF0YVF1ZXJ5RmlsdGVyKEYucmVzdWx0cyxvKTticmVhaztjYXNlIiRzZWxlY3QiOkYucmVzdWx0cz10aGlzLl9nZXRPZGF0YVF1ZXJ5U2VsZWN0KEYucmVzdWx0cyxvKTticmVhaztjYXNlIiRpbmxpbmVjb3VudCI6dmFyIGM9dGhpcy5fZ2V0T2RhdGFJbmxpbmVDb3VudChGLnJlc3VsdHMsbyk7aWYoYyl7Ri5fX2NvdW50PWN9YnJlYWs7Y2FzZSIkZXhwYW5kIjpGLnJlc3VsdHM9dGhpcy5fZ2V0T2RhdGFRdWVyeUV4cGFuZChGLnJlc3VsdHMsbyxlKTticmVhaztjYXNlIiRmb3JtYXQiOkYucmVzdWx0cz10aGlzLl9nZXRPZGF0YVF1ZXJ5Rm9ybWF0KEYucmVzdWx0cyxvKTticmVhaztkZWZhdWx0OnEuc2FwLmxvZy5lcnJvcigiSW52YWxpZCBzeXN0ZW0gcXVlcnkgb3B0aW9ucyB2YWx1ZSEiKTt0aHJvdyBuZXcgRXJyb3IoIjQwMCIpfX07Zi5wcm90b3R5cGUuX2FwcGx5UXVlcnlPbkVudHJ5PWZ1bmN0aW9uKGUsUSxFKXt2YXIgYT1RLnNwbGl0KCc9Jyk7dmFyIG89YVsxXTtpZihvPT09IiIpcmV0dXJuO2lmKG8ubGFzdEluZGV4T2YoJywnKT09PW8ubGVuZ3RoKXtxLnNhcC5sb2cuZXJyb3IoIlRoZSBVUkkgaXMgdmlvbGF0aW5nIHRoZSBjb25zdHJ1Y3Rpb24gcnVsZXMgZGVmaW5lZCBpbiB0aGUgRGF0YSBTZXJ2aWNlcyBzcGVjaWZpY2F0aW9uISIpO3Rocm93IG5ldyBFcnJvcigiNDAwIil9c3dpdGNoKGFbMF0pe2Nhc2UiJGZpbHRlciI6cmV0dXJuIHRoaXMuX3JlY3Vyc2l2ZU9kYXRhUXVlcnlGaWx0ZXIoW2VdLG8pWzBdO2Nhc2UiJHNlbGVjdCI6cmV0dXJuIHRoaXMuX2dldE9kYXRhUXVlcnlTZWxlY3QoW2VdLG8pWzBdO2Nhc2UiJGV4cGFuZCI6cmV0dXJuIHRoaXMuX2dldE9kYXRhUXVlcnlFeHBhbmQoW2VdLG8sRSlbMF07Y2FzZSIkZm9ybWF0IjpyZXR1cm4gdGhpcy5fZ2V0T2RhdGFRdWVyeUZvcm1hdChbZV0sbyk7ZGVmYXVsdDpxLnNhcC5sb2cuZXJyb3IoIkludmFsaWQgc3lzdGVtIHF1ZXJ5IG9wdGlvbnMgdmFsdWUhIik7dGhyb3cgbmV3IEVycm9yKCI0MDAiKX19O2YucHJvdG90eXBlLl9nZXRPZGF0YVF1ZXJ5T3JkZXJieT1mdW5jdGlvbihjLG8pe3ZhciBwPW8uc3BsaXQoJywnKTt2YXIgdD10aGlzO3EuZWFjaChwLGZ1bmN0aW9uKGksUCl7cFtpXT10Ll90cmltKFApfSk7dmFyIEM9ZnVuY3Rpb24gY29tcGFyZShhLGIpe2Zvcih2YXIgaT0wO2k8cC5sZW5ndGg7aSsrKXt2YXIgcz1wW2ldLnNwbGl0KCcgJyk7dmFyIFM9MTtpZihzLmxlbmd0aD4xKXtzd2l0Y2goc1sxXSl7Y2FzZSdhc2MnOlM9MTticmVhaztjYXNlJ2Rlc2MnOlM9LTE7YnJlYWs7ZGVmYXVsdDpxLnNhcC5sb2cuZXJyb3IoIkludmFsaWQgc29ydG9yZGVyICciK3NbMV0rIicgZGV0ZWN0ZWQhIik7dGhyb3cgbmV3IEVycm9yKCI0MDAiKX19dmFyIFAsZTt2YXIgaD1zWzBdLmluZGV4T2YoIi8iKTtpZihoIT09LTEpe1A9c1swXS5zdWJzdHJpbmcoaCsxKTtlPXNbMF0uc3Vic3RyaW5nKDAsaCk7aWYoIWFbZV0uaGFzT3duUHJvcGVydHkoUCkpe3Euc2FwLmxvZy5lcnJvcigiUHJvcGVydHkgIitQKyIgbm90IGZvdW5kISIpO3Rocm93IG5ldyBFcnJvcigiNDAwIil9aWYoYVtlXVtQXTxiW2VdW1BdKXJldHVybi0xKlM7aWYoYVtlXVtQXT5iW2VdW1BdKXJldHVybiAxKlN9ZWxzZXtQPXNbMF07aWYoIWEuaGFzT3duUHJvcGVydHkoUCkpe3Euc2FwLmxvZy5lcnJvcigiUHJvcGVydHkgIitQKyIgbm90IGZvdW5kISIpO3Rocm93IG5ldyBFcnJvcigiNDAwIil9aWYoYVtQXTxiW1BdKXJldHVybi0xKlM7aWYoYVtQXT5iW1BdKXJldHVybiAxKlN9fXJldHVybiAwfTtyZXR1cm4gYy5zb3J0KEMpfTtmLnByb3RvdHlwZS5fYXJyYXlVbmlxdWU9ZnVuY3Rpb24oYil7dmFyIGE9Yi5jb25jYXQoKTtmb3IodmFyIGk9MDtpPGEubGVuZ3RoOysraSl7Zm9yKHZhciBqPWkrMTtqPGEubGVuZ3RoOysrail7aWYoYVtpXT09PWFbal0pYS5zcGxpY2Uoai0tLDEpfX1yZXR1cm4gYX07Zi5wcm90b3R5cGUuX2dldEJyYWNrZXRJbmRpY2VzPWZ1bmN0aW9uKHMpe3ZhciBTPVtdO3ZhciByPWZhbHNlO3ZhciBpLGU9MDtmb3IodmFyIGM9MDtjPHMubGVuZ3RoO2MrKyl7aWYoc1tjXT09PScoJyl7aWYoL1tzdWJzdHJpbmdvZnxlbmRzd2l0aHxzdGFydHN3aXRoXSQvLnRlc3Qocy5zdWJzdHJpbmcoMCxjKSkpe3I9dHJ1ZX1lbHNle1MucHVzaChzW2NdKTtpZihpPT09dW5kZWZpbmVkKXtpPWN9fX1lbHNlIGlmKHNbY109PT0nKScpe2lmKCFyKXtTLnBvcCgpO2U9YztpZihTLmxlbmd0aD09PTApcmV0dXJue3N0YXJ0OmksZW5kOmV9fWVsc2V7cj1mYWxzZX19fXJldHVybntzdGFydDppLGVuZDplfX07Zi5wcm90b3R5cGUuX3JlY3Vyc2l2ZU9kYXRhUXVlcnlGaWx0ZXI9ZnVuY3Rpb24oYSxvKXt2YXIgST10aGlzLl9nZXRCcmFja2V0SW5kaWNlcyhvKTtpZihJLnN0YXJ0PT09MCYmSS5lbmQ9PT1vLmxlbmd0aC0xKXtvPXRoaXMuX3RyaW0oby5zdWJzdHJpbmcoSS5zdGFydCsxLEkuZW5kKSk7cmV0dXJuIHRoaXMuX3JlY3Vyc2l2ZU9kYXRhUXVlcnlGaWx0ZXIoYSxvKX12YXIgcj0vKFtec3Vic3RyaW5nb2Z8ZW5kc3dpdGh8c3RhcnRzd2l0aF18XilcKCguKilcKS87aWYoci50ZXN0KG8pKXt2YXIgYj1vLnN1YnN0cmluZyhJLnN0YXJ0LEkuZW5kKzEpO3ZhciBjPW5ldyBSZWdFeHAoIiguKikgKyhvcnxhbmQpICsoIit0aGlzLl90cmltKHRoaXMuX2VzY2FwZVN0cmluZ0ZvclJlZ0V4cChiKSkrIi4qKSIpO2lmKEkuc3RhcnQ9PT0wKXtjPW5ldyBSZWdFeHAoIigiK3RoaXMuX3RyaW0odGhpcy5fZXNjYXBlU3RyaW5nRm9yUmVnRXhwKGIpKSsiKSArKG9yfGFuZCkgKyguKikiKX12YXIgZT1jLmV4ZWMobyk7dmFyIEU9ZVsxXTt2YXIgTz1lWzJdO3ZhciBzPWVbM107dmFyIFM9dGhpcy5fcmVjdXJzaXZlT2RhdGFRdWVyeUZpbHRlcihhLEUpO3ZhciBoLHA7aWYoTz09PSJvciIpe2g9dGhpcy5fcmVjdXJzaXZlT2RhdGFRdWVyeUZpbHRlcihhLHMpO3JldHVybiB0aGlzLl9hcnJheVVuaXF1ZShTLmNvbmNhdChoKSl9aWYoTz09PSJhbmQiKXtyZXR1cm4gdGhpcy5fcmVjdXJzaXZlT2RhdGFRdWVyeUZpbHRlcihTLHMpfX1lbHNle3A9by5zcGxpdCgvICthbmQgfCBvciArLyk7aWYocC5sZW5ndGg9PT0xKXtpZihvLm1hdGNoKC8gK2FuZCB8IG9yICsvKSl7dGhyb3cgbmV3IEVycm9yKCI0MDAiKX1yZXR1cm4gdGhpcy5fZ2V0T2RhdGFRdWVyeUZpbHRlcihhLHRoaXMuX3RyaW0obykpfXZhciBSPXRoaXMuX3JlY3Vyc2l2ZU9kYXRhUXVlcnlGaWx0ZXIoYSxwWzBdKTt2YXIgajtmb3IodmFyIGk9MTtpPHAubGVuZ3RoO2krKyl7aj1uZXcgUmVnRXhwKHRoaXMuX3RyaW0odGhpcy5fZXNjYXBlU3RyaW5nRm9yUmVnRXhwKHBbaS0xXSkpKyIgKyhhbmR8b3IpICsiK3RoaXMuX3RyaW0odGhpcy5fZXNjYXBlU3RyaW5nRm9yUmVnRXhwKHBbaV0pKSk7Tz1qLmV4ZWMobylbMV07aWYoTz09PSJvciIpe2g9dGhpcy5fcmVjdXJzaXZlT2RhdGFRdWVyeUZpbHRlcihhLHBbaV0pO1I9dGhpcy5fYXJyYXlVbmlxdWUoUi5jb25jYXQoaCkpfWlmKE89PT0iYW5kIil7Uj10aGlzLl9yZWN1cnNpdmVPZGF0YVF1ZXJ5RmlsdGVyKFIscFtpXSl9fXJldHVybiBSfX07Zi5wcm90b3R5cGUuX2dldE9kYXRhUXVlcnlGaWx0ZXI9ZnVuY3Rpb24oYSxvKXtpZihhLmxlbmd0aD09PTApcmV0dXJuIGE7dmFyIHI9bmV3IFJlZ0V4cCgiKC4qKSAoZXF8bmV8Z3R8bHR8bGV8Z2UpICguKikiKTt2YXIgYj1uZXcgUmVnRXhwKCIoZW5kc3dpdGh8c3RhcnRzd2l0aHxzdWJzdHJpbmdvZilcXCgoLiopIik7dmFyIE89bnVsbDt2YXIgYz1yLmV4ZWMobyk7aWYoYyl7Tz1jWzJdfWVsc2V7Yz1iLmV4ZWMobyk7aWYoYyl7Tz1jWzFdfWVsc2V7dGhyb3cgbmV3IEVycm9yKCI0MDAiKX19dmFyIHQ9dGhpczt2YXIgRz1mdW5jdGlvbih2LFYscCxzKXt2YXIgYyxlO2lmKCF2KXtjPXIuZXhlYyhvKTtlPXQuX3RyaW0oY1tWKzFdKTt2YXIgUD10Ll90cmltKGNbcCsxXSl9ZWxzZXt2YXIgaD1uZXcgUmVnRXhwKCIoc3Vic3RyaW5nb2Z8c3RhcnRzd2l0aHxlbmRzd2l0aClcXCgoW14sXFwpXSopLCguKilcXCkiKTtjPWguZXhlYyhvKTtlPXQuX3RyaW0oY1tWKzJdKTtQPXQuX3RyaW0oY1twKzJdKX1pZihlLmluZGV4T2YoImRhdGV0aW1lIik9PT0wKXtlPXQuX2dldEpzb25EYXRlKGUpfWVsc2UgaWYoZT09PSJ0cnVlIil7ZT10cnVlfWVsc2UgaWYoZT09PSJmYWxzZSIpe2U9ZmFsc2V9ZWxzZSBpZih0Ll9pc1ZhbGlkTnVtYmVyKGUpKXtlPXBhcnNlRmxvYXQoZSl9ZWxzZSBpZigoZS5jaGFyQXQoMCk9PT0iJyIpJiYoZS5jaGFyQXQoZS5sZW5ndGgtMSk9PT0iJyIpKXtlPWUuc3Vic3RyKDEsZS5sZW5ndGgtMil9dmFyIEM9UC5pbmRleE9mKCIvIik7aWYoQyE9PS0xKXt2YXIgaT1QLnN1YnN0cmluZyhDKzEpO3ZhciBqPVAuc3Vic3RyaW5nKDAsQyk7aWYoIWFbMF1bal0uaGFzT3duUHJvcGVydHkoaSkpe3Euc2FwLmxvZy5lcnJvcigiUHJvcGVydHkgIitpKyIgbm90IGZvdW5kISIpO3Rocm93IG5ldyBFcnJvcigiNDAwIil9cmV0dXJuIHMoUCxlLGosaSl9ZWxzZXtpZighYVswXS5oYXNPd25Qcm9wZXJ0eShQKSl7cS5zYXAubG9nLmVycm9yKCJQcm9wZXJ0eSAiK1ArIiBub3QgZm91bmQgZm9yICIrYVswXS5fX21ldGFkYXRhLnR5cGUrIiEiKTt0aHJvdyBuZXcgRXJyb3IoIjQwMCIpfXJldHVybiBzKFAsZSl9fTtzd2l0Y2goTyl7Y2FzZSJzdWJzdHJpbmdvZiI6cmV0dXJuIEcodHJ1ZSwwLDEsZnVuY3Rpb24ocCx2LEMsUCl7cmV0dXJuIHEuZ3JlcChhLGZ1bmN0aW9uKG0pe2lmKEMmJlApe3JldHVybihtW0NdW1BdLmluZGV4T2YodikhPT0tMSl9cmV0dXJuKG1bcF0uaW5kZXhPZih2KSE9PS0xKX0pfSk7Y2FzZSJzdGFydHN3aXRoIjpyZXR1cm4gRyh0cnVlLDEsMCxmdW5jdGlvbihwLHYsQyxQKXtyZXR1cm4gcS5ncmVwKGEsZnVuY3Rpb24obSl7aWYoQyYmUCl7cmV0dXJuKG1bQ11bUF0uaW5kZXhPZih2KT09PTApfXJldHVybihtW3BdLmluZGV4T2Yodik9PT0wKX0pfSk7Y2FzZSJlbmRzd2l0aCI6cmV0dXJuIEcodHJ1ZSwxLDAsZnVuY3Rpb24ocCx2LEMsUCl7cmV0dXJuIHEuZ3JlcChhLGZ1bmN0aW9uKG0pe2lmKEMmJlApe3JldHVybihtW0NdW1BdLmluZGV4T2Yodik9PT0obVtDXVtQXS5sZW5ndGgtdi5sZW5ndGgpKX1yZXR1cm4obVtwXS5pbmRleE9mKHYpPT09KG1bcF0ubGVuZ3RoLXYubGVuZ3RoKSl9KX0pO2Nhc2UiZXEiOnJldHVybiBHKGZhbHNlLDIsMCxmdW5jdGlvbihwLHYsQyxQKXtyZXR1cm4gcS5ncmVwKGEsZnVuY3Rpb24obSl7aWYoQyYmUCl7cmV0dXJuKG1bQ11bUF09PT12KX1yZXR1cm4obVtwXT09PXYpfSl9KTtjYXNlIm5lIjpyZXR1cm4gRyhmYWxzZSwyLDAsZnVuY3Rpb24ocCx2LEMsUCl7cmV0dXJuIHEuZ3JlcChhLGZ1bmN0aW9uKG0pe2lmKEMmJlApe3JldHVybihtW0NdW1BdIT09dil9cmV0dXJuKG1bcF0hPT12KX0pfSk7Y2FzZSJndCI6cmV0dXJuIEcoZmFsc2UsMiwwLGZ1bmN0aW9uKHAsdixDLFApe3JldHVybiBxLmdyZXAoYSxmdW5jdGlvbihtKXtpZihDJiZQKXtyZXR1cm4obVtDXVtQXT52KX1yZXR1cm4obVtwXT52KX0pfSk7Y2FzZSJsdCI6cmV0dXJuIEcoZmFsc2UsMiwwLGZ1bmN0aW9uKHAsdixDLFApe3JldHVybiBxLmdyZXAoYSxmdW5jdGlvbihtKXtpZihDJiZQKXtyZXR1cm4obVtDXVtQXTx2KX1yZXR1cm4obVtwXTx2KX0pfSk7Y2FzZSJnZSI6cmV0dXJuIEcoZmFsc2UsMiwwLGZ1bmN0aW9uKHAsdixDLFApe3JldHVybiBxLmdyZXAoYSxmdW5jdGlvbihtKXtpZihDJiZQKXtyZXR1cm4obVtDXVtQXT49dil9cmV0dXJuKG1bcF0+PXYpfSl9KTtjYXNlImxlIjpyZXR1cm4gRyhmYWxzZSwyLDAsZnVuY3Rpb24ocCx2LEMsUCl7cmV0dXJuIHEuZ3JlcChhLGZ1bmN0aW9uKG0pe2lmKEMmJlApe3JldHVybihtW0NdW1BdPD12KX1yZXR1cm4obVtwXTw9dil9KX0pO2RlZmF1bHQ6cS5zYXAubG9nLmVycm9yKCJJbnZhbGlkICRmaWx0ZXIgb3BlcmF0b3IgJyIrTysiJyEiKTt0aHJvdyBuZXcgRXJyb3IoIjQwMCIpfX07Zi5wcm90b3R5cGUuX2dldE9kYXRhUXVlcnlTZWxlY3Q9ZnVuY3Rpb24oYSxvKXt2YXIgdD10aGlzO3ZhciBwLGM7dmFyIFA9by5zcGxpdCgnLCcpO3ZhciBzPVtdO3ZhciBiO3ZhciBDPWZ1bmN0aW9uKFAsZSxiKXtpZihlWyJfX21ldGFkYXRhIl0pe2JbIl9fbWV0YWRhdGEiXT1lWyJfX21ldGFkYXRhIl19cS5lYWNoKFAsZnVuY3Rpb24oaSxoKXt2YXIgaj1oLmluZGV4T2YoIi8iKTtpZihqIT09LTEpe3A9aC5zdWJzdHJpbmcoaisxKTtjPWguc3Vic3RyaW5nKDAsaik7aWYoIWJbY10pe2JbY109e319YltjXT1DKFtwXSxlW2NdLGJbY10pfWVsc2V7aWYoZSYmIWUuaGFzT3duUHJvcGVydHkoaCkpe3Euc2FwLmxvZy5lcnJvcigiUmVzb3VyY2Ugbm90IGZvdW5kIGZvciB0aGUgc2VsZWN0aW9uIGNsYXVzZSAnIitoKyInISIpO3Rocm93IG5ldyBFcnJvcigiNDA0Iil9YltoXT1lW2hdfX0pO3JldHVybiBifTtpZihxLmluQXJyYXkoIioiLFApIT09LTEpe3JldHVybiBhfXEuZWFjaChQLGZ1bmN0aW9uKGksZSl7UFtpXT10Ll90cmltKGUpfSk7cS5lYWNoKGEsZnVuY3Rpb24oaSxlKXtiPXt9O3MucHVzaChDKFAsZSxiKSl9KTtyZXR1cm4gc307Zi5wcm90b3R5cGUuX2dldE9kYXRhSW5saW5lQ291bnQ9ZnVuY3Rpb24oYSxvKXt2YXIgcD1vLnNwbGl0KCcsJyk7aWYocC5sZW5ndGghPT0xfHwocFswXSE9PSdub25lJyYmcFswXSE9PSdhbGxwYWdlcycpKXtxLnNhcC5sb2cuZXJyb3IoIkludmFsaWQgc3lzdGVtIHF1ZXJ5IG9wdGlvbnMgdmFsdWUhIik7dGhyb3cgbmV3IEVycm9yKCI0MDAiKX1pZihwWzBdPT09J25vbmUnKXtyZXR1cm59cmV0dXJuIGEubGVuZ3RofTtmLnByb3RvdHlwZS5fZ2V0T2RhdGFRdWVyeUZvcm1hdD1mdW5jdGlvbihhLG8pe2lmKG8hPT0nanNvbicpe3Euc2FwLmxvZy5lcnJvcigiVW5zdXBwb3J0ZWQgZm9ybWF0IHZhbHVlLiBPbmx5IGpzb24gZm9ybWF0IGlzIHN1cHBvcnRlZCEiKTt0aHJvdyBuZXcgRXJyb3IoIjQwMCIpfXJldHVybiBhfTtmLnByb3RvdHlwZS5fZ2V0T2RhdGFRdWVyeUV4cGFuZD1mdW5jdGlvbihhLG8sZSl7dmFyIHQ9dGhpczt2YXIgbj1vLnNwbGl0KCcsJyk7cS5lYWNoKG4sZnVuY3Rpb24oaSxwKXtuW2ldPXQuX3RyaW0ocCl9KTt2YXIgRT10Ll9tRW50aXR5U2V0c1tlXS5uYXZwcm9wcztxLmVhY2goYSxmdW5jdGlvbihpLHIpe3EuZWFjaChuLGZ1bmN0aW9uKGksTil7dmFyIGI9Ti5zcGxpdCgiLyIpO3ZhciBzPWJbMF07aWYoIXJbc10pe3Rocm93IG5ldyBFcnJvcigiNDA0Iil9dmFyIGM9cltzXS5yZXN1bHRzfHxyW3NdO2lmKCFjfHwhIWMuX19kZWZlcnJlZCl7Yz1xLmV4dGVuZCh0cnVlLFtdLHQuX3Jlc29sdmVOYXZpZ2F0aW9uKGUscixzKSl9aWYoISFjJiZiLmxlbmd0aD4xKXt2YXIgUj1iLnNwbGljZSgxLGIubGVuZ3RoKS5qb2luKCIvIik7Yz10Ll9nZXRPZGF0YVF1ZXJ5RXhwYW5kKGMsUixFW3NdLnRvLmVudGl0eVNldCl9aWYoRVtzXS50by5tdWx0aXBsaWNpdHk9PT0iKiIpe3Jbc109e3Jlc3VsdHM6Y319ZWxzZXtyW3NdPWNbMF0/Y1swXTp7fX19KX0pO3JldHVybiBhfTtmLnByb3RvdHlwZS5fcmVmcmVzaERhdGE9ZnVuY3Rpb24oKXt0aGlzLl9sb2FkTWV0YWRhdGEodGhpcy5fc01ldGFkYXRhVXJsKTt0aGlzLl9tRW50aXR5U2V0cz10aGlzLl9maW5kRW50aXR5U2V0cyh0aGlzLl9vTWV0YWRhdGEpO2lmKCF0aGlzLl9zTW9ja2RhdGFCYXNlVXJsKXt0aGlzLl9nZW5lcmF0ZU1vY2tkYXRhKHRoaXMuX21FbnRpdHlTZXRzLHRoaXMuX29NZXRhZGF0YSl9ZWxzZXtpZighcS5zYXAuZW5kc1dpdGgodGhpcy5fc01vY2tkYXRhQmFzZVVybCwiLyIpJiYhcS5zYXAuZW5kc1dpdGgodGhpcy5fc01vY2tkYXRhQmFzZVVybCwiLmpzb24iKSl7dGhpcy5fc01vY2tkYXRhQmFzZVVybCs9Ii8ifXRoaXMuX2xvYWRNb2NrZGF0YSh0aGlzLl9tRW50aXR5U2V0cyx0aGlzLl9zTW9ja2RhdGFCYXNlVXJsKX19O2YucHJvdG90eXBlLl9nZXRSb290VXJpPWZ1bmN0aW9uKCl7dmFyIHU9dGhpcy5nZXRSb290VXJpKCk7dT11JiYvKFtePyNdKikoWz8jXS4qKT8vLmV4ZWModSlbMV07cmV0dXJuIHV9O2YucHJvdG90eXBlLl9sb2FkTWV0YWRhdGE9ZnVuY3Rpb24obSl7dmFyIG89cS5zYXAuc2pheCh7dXJsOm0sZGF0YVR5cGU6InhtbCJ9KS5kYXRhO3RoaXMuX29NZXRhZGF0YT1vO3JldHVybiBvfTtmLnByb3RvdHlwZS5fZmluZEVudGl0eVNldHM9ZnVuY3Rpb24obSl7dmFyIGU9e307dmFyIHA9cShtKS5maW5kKCJQcmluY2lwYWwiKTt2YXIgbz1xKG0pLmZpbmQoIkRlcGVuZGVudCIpO3EobSkuZmluZCgiRW50aXR5U2V0IikuZWFjaChmdW5jdGlvbihpLEUpe3ZhciAkPXEoRSk7dmFyIGE9LygoLiopXC4pPyguKikvLmV4ZWMoJC5hdHRyKCJFbnRpdHlUeXBlIikpO2VbJC5hdHRyKCJOYW1lIildPXsibmFtZSI6JC5hdHRyKCJOYW1lIiksInNjaGVtYSI6YVsyXSwidHlwZSI6YVszXSwia2V5cyI6W10sImtleXNUeXBlIjp7fSwibmF2cHJvcHMiOnt9fX0pO3ZhciByPWZ1bmN0aW9uKFIsRil7dmFyIGE9cShtKS5maW5kKCJFbmRbUm9sZT0iK1IrIl0iKTt2YXIgRTt2YXIgcztxLmVhY2goYSxmdW5jdGlvbihpLHYpe2lmKCEhcSh2KS5hdHRyKCJFbnRpdHlTZXQiKSl7RT1xKHYpLmF0dHIoIkVudGl0eVNldCIpfWVsc2V7cz1xKHYpLmF0dHIoIk11bHRpcGxpY2l0eSIpfX0pO3ZhciBQPVtdO3ZhciBiPShGKT9wOm87cShiKS5lYWNoKGZ1bmN0aW9uKGksYyl7aWYoUj09PShxKGMpLmF0dHIoIlJvbGUiKSkpe3EoYykuY2hpbGRyZW4oIlByb3BlcnR5UmVmIikuZWFjaChmdW5jdGlvbihpLGgpe1AucHVzaChxKGgpLmF0dHIoIk5hbWUiKSl9KTtyZXR1cm4gZmFsc2V9fSk7cmV0dXJueyJyb2xlIjpSLCJlbnRpdHlTZXQiOkUsInByb3BSZWYiOlAsIm11bHRpcGxpY2l0eSI6c319O3EuZWFjaChlLGZ1bmN0aW9uKEUsYSl7dmFyICQ9cShtKS5maW5kKCJFbnRpdHlUeXBlW05hbWU9IithLnR5cGUrIl0iKTt2YXIgaz1xKCQpLmZpbmQoIlByb3BlcnR5UmVmIik7cS5lYWNoKGssZnVuY3Rpb24oaSxQKXt2YXIgSz1xKFApLmF0dHIoIk5hbWUiKTthLmtleXMucHVzaChLKTthLmtleXNUeXBlW0tdPXEoJCkuZmluZCgiUHJvcGVydHlbTmFtZT0iK0srIl0iKS5hdHRyKCJUeXBlIil9KTt2YXIgbj1xKG0pLmZpbmQoIkVudGl0eVR5cGVbTmFtZT0iK2EudHlwZSsiXSBOYXZpZ2F0aW9uUHJvcGVydHkiKTtxLmVhY2gobixmdW5jdGlvbihpLE4pe3ZhciBiPXEoTik7YS5uYXZwcm9wc1tiLmF0dHIoIk5hbWUiKV09eyJuYW1lIjpiLmF0dHIoIk5hbWUiKSwiZnJvbSI6cihiLmF0dHIoIkZyb21Sb2xlIiksdHJ1ZSksInRvIjpyKGIuYXR0cigiVG9Sb2xlIiksZmFsc2UpfX0pfSk7cmV0dXJuIGV9O2YucHJvdG90eXBlLl9maW5kRW50aXR5VHlwZXM9ZnVuY3Rpb24obSl7dmFyIGU9e307cShtKS5maW5kKCJFbnRpdHlUeXBlIikuZWFjaChmdW5jdGlvbihpLEUpe3ZhciAkPXEoRSk7ZVskLmF0dHIoIk5hbWUiKV09eyJuYW1lIjokLmF0dHIoIk5hbWUiKSwicHJvcGVydGllcyI6W10sImtleXMiOltdfTskLmZpbmQoIlByb3BlcnR5IikuZWFjaChmdW5jdGlvbihpLHApe3ZhciBQPXEocCk7dmFyIHQ9UC5hdHRyKCJUeXBlIik7ZVskLmF0dHIoIk5hbWUiKV0ucHJvcGVydGllcy5wdXNoKHsic2NoZW1hIjp0LnN1YnN0cmluZygwLHQubGFzdEluZGV4T2YoIi4iKSksInR5cGUiOnQuc3Vic3RyaW5nKHQubGFzdEluZGV4T2YoIi4iKSsxKSwibmFtZSI6UC5hdHRyKCJOYW1lIiksInByZWNpc2lvbiI6UC5hdHRyKCJQcmVjaXNpb24iKSwic2NhbGUiOlAuYXR0cigiU2NhbGUiKX0pfSk7JC5maW5kKCJQcm9wZXJ0eVJlZiIpLmVhY2goZnVuY3Rpb24oaSxrKXt2YXIgSz1xKGspO3ZhciBwPUsuYXR0cigiTmFtZSIpO2VbJC5hdHRyKCJOYW1lIildLmtleXMucHVzaChwKX0pfSk7cmV0dXJuIGV9O2YucHJvdG90eXBlLl9maW5kQ29tcGxleFR5cGVzPWZ1bmN0aW9uKG0pe3ZhciBjPXt9O3EobSkuZmluZCgiQ29tcGxleFR5cGUiKS5lYWNoKGZ1bmN0aW9uKGksQyl7dmFyICQ9cShDKTtjWyQuYXR0cigiTmFtZSIpXT17Im5hbWUiOiQuYXR0cigiTmFtZSIpLCJwcm9wZXJ0aWVzIjpbXX07JC5maW5kKCJQcm9wZXJ0eSIpLmVhY2goZnVuY3Rpb24oaSxwKXt2YXIgUD1xKHApO3ZhciB0PVAuYXR0cigiVHlwZSIpO2NbJC5hdHRyKCJOYW1lIildLnByb3BlcnRpZXMucHVzaCh7InNjaGVtYSI6dC5zdWJzdHJpbmcoMCx0Lmxhc3RJbmRleE9mKCIuIikpLCJ0eXBlIjp0LnN1YnN0cmluZyh0Lmxhc3RJbmRleE9mKCIuIikrMSksIm5hbWUiOlAuYXR0cigiTmFtZSIpLCJwcmVjaXNpb24iOlAuYXR0cigiUHJlY2lzaW9uIiksInNjYWxlIjpQLmF0dHIoIlNjYWxlIil9KX0pfSk7cmV0dXJuIGN9O2YucHJvdG90eXBlLl9jcmVhdGVLZXlzU3RyaW5nPWZ1bmN0aW9uKGUsRSl7dmFyIHQ9dGhpczt2YXIgaz0iIjtpZihFKXtxLmVhY2goZS5rZXlzLGZ1bmN0aW9uKGksSyl7aWYoayl7ays9IiwifXZhciBvPUVbS107aWYoZS5rZXlzVHlwZVtLXT09PSJFZG0uU3RyaW5nIil7bz0iJyIrbysiJyJ9ZWxzZSBpZihlLmtleXNUeXBlW0tdPT09IkVkbS5EYXRlVGltZSIpe289dC5fZ2V0RGF0ZVRpbWUobyl9ZWxzZSBpZihlLmtleXNUeXBlW0tdPT09IkVkbS5HdWlkIil7bz0iZ3VpZCciK28rIicifWlmKGUua2V5cy5sZW5ndGg9PT0xKXtrKz1vO3JldHVybiBrfWsrPUsrIj0iK299KX1yZXR1cm4ga307Zi5wcm90b3R5cGUuX2xvYWRNb2NrZGF0YT1mdW5jdGlvbihlLGIpe3ZhciB0PXRoaXMsRT17fTt0aGlzLl9vTW9ja2RhdGE9e307aWYocS5zYXAuZW5kc1dpdGgoYiwiLmpzb24iKSl7dmFyIHI9cS5zYXAuc2pheCh7dXJsOmIsZGF0YVR5cGU6Impzb24ifSk7aWYoci5zdWNjZXNzKXtFPXIuZGF0YX1lbHNle3Euc2FwLmxvZy5lcnJvcigiVGhlIG1vY2tkYXRhIGZvciBhbGwgdGhlIGVudGl0eSB0eXBlcyBjb3VsZCBub3QgYmUgZm91bmQgYXQgXCIiK2IrIlwiISIpfX1lbHNle3EuZWFjaChlLGZ1bmN0aW9uKHMsbyl7aWYoIUVbby50eXBlXSl7dmFyIGE9YitvLnR5cGUrIi5qc29uIjt2YXIgcj1xLnNhcC5zamF4KHt1cmw6YSxkYXRhVHlwZToianNvbiJ9KTtpZihyLnN1Y2Nlc3Mpe2lmKCEhci5kYXRhLmQpe2lmKCEhci5kYXRhLmQucmVzdWx0cyl7RVtvLnR5cGVdPXIuZGF0YS5kLnJlc3VsdHN9ZWxzZXtxLnNhcC5sb2cuZXJyb3IoIlRoZSBtb2NrZGF0YSBmb3JtYXQgZm9yIGVudGl0eSB0eXBlIFwiIitvLnR5cGUrIlwiIGludmFsaWQiKX19ZWxzZXtFW28udHlwZV09ci5kYXRhfX1lbHNle2lmKHIuc3RhdHVzPT09InBhcnNlcmVycm9yIil7cS5zYXAubG9nLmVycm9yKCJUaGUgbW9ja2RhdGEgZm9yIGVudGl0eSB0eXBlIFwiIitvLnR5cGUrIlwiIGNvdWxkIG5vdCBiZSBsb2FkZWQgZHVlIHRvIGEgcGFyc2luZyBlcnJvciEiKX1lbHNle3Euc2FwLmxvZy5lcnJvcigiVGhlIG1vY2tkYXRhIGZvciBlbnRpdHkgdHlwZSBcIiIrby50eXBlKyJcIiBjb3VsZCBub3QgYmUgZm91bmQgYXQgXCIiK2IrIlwiISIpO2lmKCEhdC5fYkdlbmVyYXRlTWlzc2luZ01vY2tEYXRhKXt2YXIgbT17fTttW28ubmFtZV09bztFW28udHlwZV09dC5fZ2VuZXJhdGVPRGF0YU1vY2tkYXRhRm9yRW50aXR5U2V0KG0sdC5fb01ldGFkYXRhKVtvLm5hbWVdfX19fX0pfXEuZWFjaChlLGZ1bmN0aW9uKHMsbyl7dC5fb01vY2tkYXRhW3NdPVtdO2lmKEVbby50eXBlXSl7cS5lYWNoKEVbby50eXBlXSxmdW5jdGlvbihpLGEpe3QuX29Nb2NrZGF0YVtzXS5wdXNoKHEuZXh0ZW5kKHRydWUse30sYSkpfSl9aWYodC5fb01vY2tkYXRhW3NdLmxlbmd0aD4wKXt0Ll9lbmhhbmNlV2l0aE1ldGFkYXRhKG8sdC5fb01vY2tkYXRhW3NdKX19KTtyZXR1cm4gdGhpcy5fb01vY2tkYXRhfTtmLnByb3RvdHlwZS5fZW5oYW5jZVdpdGhNZXRhZGF0YT1mdW5jdGlvbihlLG0pe2lmKG0pe3ZhciB0PXRoaXMscj10aGlzLl9nZXRSb290VXJpKCksRT1lJiZlLm5hbWU7cS5lYWNoKG0sZnVuY3Rpb24oaSxvKXtvLl9fbWV0YWRhdGE9e2lkOnIrRSsiKCIrdC5fY3JlYXRlS2V5c1N0cmluZyhlLG8pKyIpIix0eXBlOmUuc2NoZW1hKyIuIitlLnR5cGUsdXJpOnIrRSsiKCIrdC5fY3JlYXRlS2V5c1N0cmluZyhlLG8pKyIpIn07cS5lYWNoKGUubmF2cHJvcHMsZnVuY3Rpb24oayxuKXtvW2tdPXtfX2RlZmVycmVkOnt1cmk6citFKyIoIit0Ll9jcmVhdGVLZXlzU3RyaW5nKGUsbykrIikvIitrfX19KX0pfX07Zi5wcm90b3R5cGUuX2lzUmVxdWVzdGVkS2V5c1ZhbGlkPWZ1bmN0aW9uKGUscil7aWYoci5sZW5ndGg9PT0xKXt2YXIgcz1yWzBdLnNwbGl0KCc9Jyk7aWYodGhpcy5fdHJpbShzWzBdKSE9PWUua2V5c1swXSl7cj1bZS5rZXlzWzBdKyI9IityWzBdXX19Zm9yKHZhciBpPTA7aTxyLmxlbmd0aDtpKyspe3ZhciBrPXRoaXMuX3RyaW0ocltpXS5zdWJzdHJpbmcoMCxyW2ldLmluZGV4T2YoJz0nKSkpO3ZhciBSPXRoaXMuX3RyaW0ocltpXS5zdWJzdHJpbmcocltpXS5pbmRleE9mKCc9JykrMSkpO3ZhciBGPVIuY2hhckF0KDApO3ZhciBsPVIuY2hhckF0KFIubGVuZ3RoLTEpO2lmKGUua2V5c1R5cGVba109PT0iRWRtLlN0cmluZyIpe2lmKEYhPT0iJyJ8fGwhPT0iJyIpe3JldHVybiBmYWxzZX19ZWxzZSBpZihlLmtleXNUeXBlW2tdPT09IkVkbS5EYXRlVGltZSIpe2lmKEY9PT0iJyJ8fGwhPT0iJyIpe3JldHVybiBmYWxzZX19ZWxzZSBpZihlLmtleXNUeXBlW2tdPT09IkVkbS5HdWlkIil7aWYoRj09PSInInx8bCE9PSInIil7cmV0dXJuIGZhbHNlfX1lbHNle2lmKEY9PT0iJyJ8fGw9PT0iJyIpe3JldHVybiBmYWxzZX19fXJldHVybiB0cnVlfTtmLnByb3RvdHlwZS5fcGFyc2VLZXlzPWZ1bmN0aW9uKGssZSl7dmFyIHI9e307dmFyIHA9ay5zcGxpdCgiLCIpO3ZhciBLLHMsUDtmb3IodmFyIGk9MDtpPHAubGVuZ3RoO2krKyl7UD1wW2ldLnNwbGl0KCI9Iik7aWYoUC5sZW5ndGg9PT0xJiZlLmtleXMubGVuZ3RoPT09MSl7Sz1lLmtleXNbMF07cz1QWzBdfWVsc2V7aWYoUC5sZW5ndGg9PT0yKXtLPVBbMF07cz1QWzFdfX1pZihzLmluZGV4T2YoJ1wnJyk9PT0wKXtyW0tdPXMuc2xpY2UoMSxzLmxlbmd0aC0xKX1lbHNle3JbS109c319cmV0dXJuIHJ9O2YucHJvdG90eXBlLl9nZW5lcmF0ZVByb3BlcnR5VmFsdWU9ZnVuY3Rpb24oayx0LEMsaSl7dmFyIEk9aTtpZighSSl7ST1NYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqMTAwMDApKzEwMX1zd2l0Y2godCl7Y2FzZSJTdHJpbmciOnJldHVybiBrKyIgIitJO2Nhc2UiRGF0ZVRpbWUiOnZhciBhPW5ldyBEYXRlKCk7YS5zZXRGdWxsWWVhcigyMDAwK01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSoyMCkpO2Euc2V0RGF0ZShNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqMzApKTthLnNldE1vbnRoKE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSoxMikpO2Euc2V0TWlsbGlzZWNvbmRzKDApO3JldHVybiIvRGF0ZSgiK2EuZ2V0VGltZSgpKyIpLyI7Y2FzZSJJbnQxNiI6Y2FzZSJJbnQzMiI6Y2FzZSJJbnQ2NCI6cmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSoxMDAwMCk7Y2FzZSJEZWNpbWFsIjpyZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKjEwMDAwMDApLzEwMDtjYXNlIkJvb2xlYW4iOnJldHVybiBNYXRoLnJhbmRvbSgpPC41O2Nhc2UiQnl0ZSI6cmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSoxMCk7Y2FzZSJEb3VibGUiOnJldHVybiBNYXRoLnJhbmRvbSgpKjEwO2Nhc2UiU2luZ2xlIjpyZXR1cm4gTWF0aC5yYW5kb20oKSoxMDAwMDAwMDAwO2Nhc2UiU0J5dGUiOnJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqMTApO2Nhc2UiVGltZSI6cmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSoyMykrIjoiK01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSo1OSkrIjoiK01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSo1OSk7Y2FzZSJHdWlkIjpyZXR1cm4neHh4eHh4eHgteHh4eC00eHh4LXl4eHgteHh4eHh4eHh4eHh4Jy5yZXBsYWNlKC9beHldL2csZnVuY3Rpb24oYyl7dmFyIHI9TWF0aC5yYW5kb20oKSoxNnwwLHY9Yz09PSd4Jz9yOihyJjB4M3wweDgpO3JldHVybiB2LnRvU3RyaW5nKDE2KX0pO2Nhc2UiQmluYXJ5Ijp2YXIgbj1NYXRoLmZsb29yKC0yMTQ3NDgzNjQ4K01hdGgucmFuZG9tKCkqNDI5NDk2NzI5NSk7Zm9yKHZhciBiPTAsZT1uLG09IiI7YjwzMjtiKyssbSs9U3RyaW5nKGU+Pj4zMSksZTw8PTEpO3JldHVybiBtO2Nhc2UiRGF0ZVRpbWVPZmZzZXQiOmRlZmF1bHQ6cmV0dXJuIHRoaXMuX2dlbmVyYXRlRGF0YUZyb21FbnRpdHkoQ1t0XSxJKX19O2YucHJvdG90eXBlLl9jb21wbGV0ZUtleT1mdW5jdGlvbihlLGssRSl7aWYoRSl7Zm9yKHZhciBpPTA7aTxlLmtleXMubGVuZ3RoO2krKyl7dmFyIEs9ZS5rZXlzW2ldO2lmKGtbS10pe2lmKCFFW0tdKXtzd2l0Y2goZS5rZXlzVHlwZVtLXSl7Y2FzZSJFZG0uRGF0ZVRpbWUiOkVbS109dGhpcy5fZ2V0SnNvbkRhdGUoa1tLXSk7YnJlYWs7Y2FzZSJFZG0uR3VpZCI6RVtLXT1rW0tdLnN1YnN0cmluZyg1LGtbS10ubGVuZ3RoLTIpO2JyZWFrO2RlZmF1bHQ6RVtLXT1rW0tdfX19ZWxzZXtpZighRVtLXSl7RVtLXT10aGlzLl9nZW5lcmF0ZVByb3BlcnR5VmFsdWUoSyxlLmtleXNUeXBlW0tdLnN1YnN0cmluZyhlLmtleXNUeXBlW0tdLmxhc3RJbmRleE9mKCcuJykrMSkpfX19fX07Zi5wcm90b3R5cGUuX2dlbmVyYXRlRGF0YUZyb21FbnRpdHk9ZnVuY3Rpb24oZSxJLGMpe3ZhciBFPXt9O2lmKCFlKXtyZXR1cm4gRX1mb3IodmFyIGk9MDtpPGUucHJvcGVydGllcy5sZW5ndGg7aSsrKXt2YXIgcD1lLnByb3BlcnRpZXNbaV07dmFyIFA9IiI7RVtwLm5hbWVdPXRoaXMuX2dlbmVyYXRlUHJvcGVydHlWYWx1ZShwLm5hbWUscC50eXBlLGMsSSl9cmV0dXJuIEV9O2YucHJvdG90eXBlLl9nZW5lcmF0ZURhdGFGcm9tRW50aXR5U2V0PWZ1bmN0aW9uKGUsRSxjKXt2YXIgbz1FW2UudHlwZV07dmFyIG09W107Zm9yKHZhciBpPTA7aTwxMDA7aSsrKXttLnB1c2godGhpcy5fZ2VuZXJhdGVEYXRhRnJvbUVudGl0eShvLGkrMSxjKSl9cmV0dXJuIG19O2YucHJvdG90eXBlLl9nZW5lcmF0ZU1vY2tkYXRhPWZ1bmN0aW9uKGUsbSl7dmFyIHQ9dGhpczt2YXIgbz17fTtxLmVhY2goZSxmdW5jdGlvbihFLGEpe3ZhciBiPXt9O2JbYS5uYW1lXT1hO29bRV09dC5fZ2VuZXJhdGVPRGF0YU1vY2tkYXRhRm9yRW50aXR5U2V0KGIsbSlbRV19KTt0aGlzLl9vTW9ja2RhdGE9b307Zi5wcm90b3R5cGUuX2dlbmVyYXRlT0RhdGFNb2NrZGF0YUZvckVudGl0eVNldD1mdW5jdGlvbihlLG0pe3ZhciB0PXRoaXMscj10aGlzLl9nZXRSb290VXJpKCksbz17fTt2YXIgRT10aGlzLl9maW5kRW50aXR5VHlwZXMobSk7dmFyIGM9dGhpcy5fZmluZENvbXBsZXhUeXBlcyhtKTtxLmVhY2goZSxmdW5jdGlvbihzLGEpe29bc109dC5fZ2VuZXJhdGVEYXRhRnJvbUVudGl0eVNldChhLEUsYyk7cS5lYWNoKG9bc10sZnVuY3Rpb24oaSxiKXtiLl9fbWV0YWRhdGE9e3VyaTpyK3MrIigiK3QuX2NyZWF0ZUtleXNTdHJpbmcoYSxiKSsiKSIsdHlwZTphLnNjaGVtYSsiLiIrYS50eXBlfTtxLmVhY2goYS5uYXZwcm9wcyxmdW5jdGlvbihrLG4pe2Jba109e19fZGVmZXJyZWQ6e3VyaTpyK3MrIigiK3QuX2NyZWF0ZUtleXNTdHJpbmcoYSxiKSsiKS8iK2t9fX0pfSl9KTtyZXR1cm4gb307Zi5wcm90b3R5cGUuX3Jlc29sdmVOYXZpZ2F0aW9uPWZ1bmN0aW9uKGUsRixuKXt2YXIgRT10aGlzLl9tRW50aXR5U2V0c1tlXTt2YXIgTj1FLm5hdnByb3BzW25dO2lmKCFOKXt0aHJvdyBuZXcgRXJyb3IoIjQwNCIpfXZhciBhPVtdO3ZhciBwPU4uZnJvbS5wcm9wUmVmLmxlbmd0aDtpZihwPT09MCl7aWYoTi50by5tdWx0aXBsaWNpdHk9PT0iKiIpe3JldHVybiB0aGlzLl9vTW9ja2RhdGFbTi50by5lbnRpdHlTZXRdfWVsc2V7YS5wdXNoKHRoaXMuX29Nb2NrZGF0YVtOLnRvLmVudGl0eVNldF1bMF0pO3JldHVybiBhfX1xLmVhY2godGhpcy5fb01vY2tkYXRhW04udG8uZW50aXR5U2V0XSxmdW5jdGlvbihJLHQpe3ZhciBiPXRydWU7Zm9yKHZhciBpPTA7aTxwO2krKyl7aWYoRltOLmZyb20ucHJvcFJlZltpXV0hPT10W04udG8ucHJvcFJlZltpXV0pe2I9ZmFsc2U7YnJlYWt9fWlmKGIpe2EucHVzaCh0KX19KTtyZXR1cm4gYX07Zi5wcm90b3R5cGUuc2ltdWxhdGU9ZnVuY3Rpb24obSx2KXt2YXIgdD10aGlzO3RoaXMuX3NNZXRhZGF0YVVybD1tO2lmKCF2fHx0eXBlb2Ygdj09PSJzdHJpbmciKXt0aGlzLl9zTW9ja2RhdGFCYXNlVXJsPXZ9ZWxzZXt0aGlzLl9zTW9ja2RhdGFCYXNlVXJsPXYuc01vY2tkYXRhQmFzZVVybDt0aGlzLl9iR2VuZXJhdGVNaXNzaW5nTW9ja0RhdGE9di5iR2VuZXJhdGVNaXNzaW5nTW9ja0RhdGF9dGhpcy5fcmVmcmVzaERhdGEoKTt2YXIgaD1mdW5jdGlvbih4LEgpe2lmKHgucmVxdWVzdEhlYWRlcnNbIngtY3NyZi10b2tlbiJdPT09IkZldGNoIil7SFsiWC1DU1JGLVRva2VuIl09IjQyNDI0MjQyNDI0MjQyNDI0MjQyNDI0MjQyNDI0MjQyIn19O3ZhciBHPWZ1bmN0aW9uKGUsayl7dmFyIEY7dmFyIEU9dC5fbUVudGl0eVNldHNbZV07dmFyIEs9RS5rZXlzO3ZhciBiPWsuc3BsaXQoJywnKTtpZihiLmxlbmd0aCE9PUsubGVuZ3RofHwhdC5faXNSZXF1ZXN0ZWRLZXlzVmFsaWQoRSxiKSl7cmV0dXJuIEZ9aWYoYi5sZW5ndGg9PT0xJiYhYlswXS5zcGxpdCgnPScpWzFdKXtiPVtLWzBdKyI9IitiWzBdXX1xLmVhY2godC5fb01vY2tkYXRhW2VdLGZ1bmN0aW9uKEksbyl7Zm9yKHZhciBpPTA7aTxiLmxlbmd0aDtpKyspe3ZhciBjPWJbaV0uc3BsaXQoJz0nKTt2YXIgcz10Ll90cmltKGNbMF0pO2lmKHEuaW5BcnJheShzLEspPT09LTEpe3JldHVybiB0cnVlfXZhciBuPXQuX3RyaW0oY1sxXSk7dmFyIE89b1tzXTtzd2l0Y2goRS5rZXlzVHlwZVtzXSl7Y2FzZSJFZG0uU3RyaW5nIjpuPW4ucmVwbGFjZSgvXlwnfFwnJC9nLCcnKTticmVhaztjYXNlIkVkbS5UaW1lIjpjYXNlIkVkbS5EYXRlVGltZSI6Tz10Ll9nZXREYXRlVGltZShPKTticmVhaztjYXNlIkVkbS5JbnQxNiI6Y2FzZSJFZG0uSW50MzIiOmNhc2UiRWRtLkludDY0IjpjYXNlIkVkbS5EZWNpbWFsIjpjYXNlIkVkbS5CeXRlIjpjYXNlIkVkbS5Eb3VibGUiOmNhc2UiRWRtLlNpbmdsZSI6Y2FzZSJFZG0uU0J5dGUiOmlmKCF0Ll9pc1ZhbGlkTnVtYmVyKG4pKXtyZXR1cm4gZmFsc2V9bj1wYXJzZUZsb2F0KG4pO2JyZWFrO2Nhc2UiRWRtLkd1aWQiOm49bi5yZXBsYWNlKC9eZ3VpZFwnfFwnJC9nLCcnKTticmVhaztjYXNlIkVkbS5Cb29sZWFuIjpjYXNlIkVkbS5CaW5hcnkiOmNhc2UiRWRtLkRhdGVUaW1lT2Zmc2V0IjpkZWZhdWx0Om49bn1pZihPIT09bil7cmV0dXJuIHRydWV9fUY9e2luZGV4OkksZW50cnk6b307cmV0dXJuIGZhbHNlfSk7cmV0dXJuIEZ9O3ZhciByPWZ1bmN0aW9uKGUsayx1KXt2YXIgcz1lLm5hbWU7aWYodSl7dmFyIG49ZS5uYXZwcm9wc1t1XX1pZihuKXtzPW4udG8uZW50aXR5U2V0fXJldHVybiBzfTt2YXIgYT1mdW5jdGlvbih4LFQsayx1KXt2YXIgZT1KU09OLnBhcnNlKHgucmVxdWVzdEJvZHkpO2lmKGUpe3ZhciBLPXt9O2lmKGspe0s9dC5fcGFyc2VLZXlzKGssdC5fbUVudGl0eVNldHNbVF0pfXQuX2NvbXBsZXRlS2V5KHQuX21FbnRpdHlTZXRzW1RdLEssZSk7dC5fZW5oYW5jZVdpdGhNZXRhZGF0YSh0Ll9tRW50aXR5U2V0c1tUXSxbZV0pO3JldHVybiBlfXJldHVybiBudWxsfTt2YXIgUj1bXTtSLnB1c2goe21ldGhvZDoiR0VUIixwYXRoOm5ldyBSZWdFeHAoIlxcJG1ldGFkYXRhKFs/I10uKik/IikscmVzcG9uc2U6ZnVuY3Rpb24oeCl7cS5zYXAucmVxdWlyZSgianF1ZXJ5LnNhcC54bWwiKTtxLnNhcC5sb2cuZGVidWcoIk1vY2tTZXJ2ZXI6IGluY29taW5nIHJlcXVlc3QgZm9yIHVybDogIit4LnVybCk7dmFyIEg9eyJDb250ZW50LVR5cGUiOiJhcHBsaWNhdGlvbi94bWw7Y2hhcnNldD11dGYtOCJ9O2goeCxIKTt4LnJlc3BvbmQoMjAwLEgscS5zYXAuc2VyaWFsaXplWE1MKHQuX29NZXRhZGF0YSkpO3Euc2FwLmxvZy5kZWJ1ZygiTW9ja1NlcnZlcjogcmVzcG9uc2Ugc2VudCB3aXRoOiAyMDAsICIrcS5zYXAuc2VyaWFsaXplWE1MKHQuX29NZXRhZGF0YSkpfX0pO1IucHVzaCh7bWV0aG9kOiJQT1NUIixwYXRoOm5ldyBSZWdFeHAoIlxcJGJhdGNoKFs/I10uKik/IikscmVzcG9uc2U6ZnVuY3Rpb24oeCl7cS5zYXAubG9nLmRlYnVnKCJNb2NrU2VydmVyOiBpbmNvbWluZyByZXF1ZXN0IGZvciB1cmw6ICIreC51cmwpO3ZhciBiPWZ1bmN0aW9uKFUpe3N3aXRjaChVKXtjYXNlIDIwMDpyZXR1cm4iMjAwIE9LIjtjYXNlIDIwNDpyZXR1cm4iMjA0IE5vIENvbnRlbnQiO2Nhc2UgMjAxOnJldHVybiIyMDEgQ3JlYXRlZCI7Y2FzZSA0MDA6cmV0dXJuIjQwMCBCYWQgUmVxdWVzdCI7Y2FzZSA0MDQ6cmV0dXJuIjQwNCBOb3QgRm91bmQiO2RlZmF1bHQ6YnJlYWt9fTt2YXIgQj1mdW5jdGlvbihBLFUpe3ZhciBWPUpTT04uc3RyaW5naWZ5KEEuZGF0YSl8fCIiO2lmKFUpe3JldHVybiJIVFRQLzEuMSAiK2IoQS5zdGF0dXNDb2RlKSsiXHJcbkNvbnRlbnQtVHlwZTogIitVKyJcclxuQ29udGVudC1MZW5ndGg6ICIrVi5sZW5ndGgrIlxyXG5kYXRhc2VydmljZXZlcnNpb246IDIuMFxyXG5cclxuIitWKyJcclxuIn1yZXR1cm4iSFRUUC8xLjEgIitiKEEuc3RhdHVzQ29kZSkrIlxyXG5Db250ZW50LVR5cGU6IGFwcGxpY2F0aW9uL2pzb25cclxuQ29udGVudC1MZW5ndGg6ICIrVi5sZW5ndGgrIlxyXG5kYXRhc2VydmljZXZlcnNpb246IDIuMFxyXG5cclxuIitWKyJcclxuIn07dmFyIHM9eC5yZXF1ZXN0Qm9keTt2YXIgbz1uZXcgUmVnRXhwKCItLWJhdGNoX1thLXowLTktXSoiKTt2YXIgYz1vLmV4ZWMocylbMF07aWYoISFjKXt2YXIgZT1bXTt2YXIgbD1zLnNwbGl0KGMpO3ZhciBTPXgudXJsLnNwbGl0KCIkIilbMF07dmFyIG49bmV3IFJlZ0V4cCgiUFVUICguKikgSFRUUCIpO3ZhciBwPW5ldyBSZWdFeHAoIk1FUkdFICguKikgSFRUUCIpO3ZhciB1PW5ldyBSZWdFeHAoIlBPU1QgKC4qKSBIVFRQIik7dmFyIHc9bmV3IFJlZ0V4cCgiREVMRVRFICguKikgSFRUUCIpO3ZhciB5PW5ldyBSZWdFeHAoIkdFVCAoLiopIEhUVFAiKTtmb3IodmFyIGk9MTtpPGwubGVuZ3RoLTE7aSsrKXt2YXIgej1sW2ldO2lmKHkudGVzdCh6KSYmei5pbmRleE9mKCJtdWx0aXBhcnQvbWl4ZWQiKT09PS0xKXtpZihuLnRlc3Qoeil8fHUudGVzdCh6KXx8dy50ZXN0KHopKXt4LnJlc3BvbmQoNDAwLG51bGwsIlRoZSBEYXRhIFNlcnZpY2VzIFJlcXVlc3QgY291bGQgbm90IGJlIHVuZGVyc3Rvb2QgZHVlIHRvIG1hbGZvcm1lZCBzeW50YXgiKTtxLnNhcC5sb2cuZGVidWcoIk1vY2tTZXJ2ZXI6IHJlc3BvbnNlIHNlbnQgd2l0aDogNDAwIik7cmV0dXJufXZhciBBPXEuc2FwLnNqYXgoe3VybDpTK3kuZXhlYyh6KVsxXSxkYXRhVHlwZToianNvbiJ9KTtpZih5LmV4ZWMoeilbMV0uaW5kZXhPZignJGNvdW50JykhPT0tMSl7dmFyIEM9QihBLCJ0ZXh0L3BsYWluIil9ZWxzZXtDPUIoQSl9ZS5wdXNoKCJcclxuQ29udGVudC1UeXBlOiBhcHBsaWNhdGlvbi9odHRwXHJcbiIrIkNvbnRlbnQtTGVuZ3RoOiAiK0MubGVuZ3RoKyJcclxuIisiY29udGVudC10cmFuc2Zlci1lbmNvZGluZzogYmluYXJ5XHJcblxyXG4iK0MpfWVsc2V7dmFyIEU9W107dmFyIEY9cS5leHRlbmQodHJ1ZSx7fSx0Ll9vTW9ja2RhdGEpO3ZhciBIPWZ1bmN0aW9uKFUsTCxWKXt2YXIgQT1xLnNhcC5zamF4KHt0eXBlOlYsdXJsOlMrVS5leGVjKEspWzFdLGRhdGFUeXBlOiJqc29uIixkYXRhOkx9KTtpZihBLnN0YXR1c0NvZGU9PT00MDB8fEEuc3RhdHVzQ29kZT09PTQwNCl7dmFyIFA9IlxyXG5IVFRQLzEuMSAiK2IoQS5zdGF0dXNDb2RlKSsiXHJcbkNvbnRlbnQtVHlwZTogYXBwbGljYXRpb24vanNvblxyXG5Db250ZW50LUxlbmd0aDogMFxyXG5cclxuIjt0aHJvdyBuZXcgRXJyb3IoUCl9RS5wdXNoKEIoQSkpfTt2YXIgST16LnN1YnN0cmluZyh6LmluZGV4T2YoImJvdW5kYXJ5PSIpKzksei5pbmRleE9mKCJcclxuXHJcbiIpKTt2YXIgSj16LnNwbGl0KCItLSIrSSk7dHJ5e2Zvcih2YXIgaj0xO2o8Si5sZW5ndGgtMTtqKyspe3ZhciBLPUpbal07aWYoeS50ZXN0KEspKXt0Ll9vTW9ja2RhdGE9Rjt4LnJlc3BvbmQoNDAwLG51bGwsIlRoZSBEYXRhIFNlcnZpY2VzIFJlcXVlc3QgY291bGQgbm90IGJlIHVuZGVyc3Rvb2QgZHVlIHRvIG1hbGZvcm1lZCBzeW50YXgiKTtxLnNhcC5sb2cuZGVidWcoIk1vY2tTZXJ2ZXI6IHJlc3BvbnNlIHNlbnQgd2l0aDogNDAwIik7cmV0dXJufWVsc2UgaWYobi50ZXN0KEspKXt2YXIgTD1LLnN1YnN0cmluZyhLLmluZGV4T2YoInsiKSxLLmxhc3RJbmRleE9mKCJ9IikrMSkucmVwbGFjZSgvXFwvZywnJyk7SChuLEwsJ1BVVCcpfWVsc2UgaWYocC50ZXN0KEspKXtMPUsuc3Vic3RyaW5nKEsuaW5kZXhPZigieyIpLEsubGFzdEluZGV4T2YoIn0iKSsxKS5yZXBsYWNlKC9cXC9nLCcnKTtIKHAsTCwnUFVUJyl9ZWxzZSBpZih1LnRlc3QoSykpe0w9Sy5zdWJzdHJpbmcoSy5pbmRleE9mKCJ7IiksSy5sYXN0SW5kZXhPZigifSIpKzEpLnJlcGxhY2UoL1xcL2csJycpO0godSxMLCdQT1NUJyl9ZWxzZSBpZih3LnRlc3QoSykpe0godyxudWxsLCdERUxFVEUnKX19dmFyIE49IlxyXG5Db250ZW50LVR5cGU6IG11bHRpcGFydC9taXhlZDsgYm91bmRhcnk9ZWpqZWVmZmUxXHJcblxyXG4tLWVqamVlZmZlMSI7Zm9yKHZhciBrPTA7azxFLmxlbmd0aDtrKyspe04rPSJcclxuQ29udGVudC1UeXBlOiBhcHBsaWNhdGlvbi9odHRwXHJcbiIrIkNvbnRlbnQtTGVuZ3RoOiAiK0Vba10ubGVuZ3RoKyJcclxuIisiY29udGVudC10cmFuc2Zlci1lbmNvZGluZzogYmluYXJ5XHJcblxyXG4iK0Vba10rIi0tZWpqZWVmZmUxIn1OKz0iLS1cclxuIjtlLnB1c2goTil9Y2F0Y2goTyl7dC5fb01vY2tkYXRhPUY7dmFyIFA9IlxyXG5Db250ZW50LVR5cGU6IGFwcGxpY2F0aW9uL2h0dHBcclxuIisiQ29udGVudC1MZW5ndGg6ICIrTy5tZXNzYWdlLmxlbmd0aCsiXHJcbiIrImNvbnRlbnQtdHJhbnNmZXItZW5jb2Rpbmc6IGJpbmFyeVxyXG5cclxuIitPLm1lc3NhZ2U7ZS5wdXNoKFApfX19dmFyIFE9Ii0tZWpqZWVmZmUwIjtmb3IodmFyIGk9MDtpPGUubGVuZ3RoO2krKyl7USs9ZVtpXSsiLS1lamplZWZmZTAifVErPSItLSI7dmFyIFQ9eydDb250ZW50LVR5cGUnOiJtdWx0aXBhcnQvbWl4ZWQ7IGJvdW5kYXJ5PWVqamVlZmZlMCJ9O2goeCxUKTt4LnJlc3BvbmQoMjAyLFQsUSk7cS5zYXAubG9nLmRlYnVnKCJNb2NrU2VydmVyOiByZXNwb25zZSBzZW50IHdpdGg6IDIwMiwgIitRKX1lbHNle3gucmVzcG9uZCgyMDIpfX19KTtxLmVhY2godGhpcy5fbUVudGl0eVNldHMsZnVuY3Rpb24oRSxvKXtSLnB1c2goe21ldGhvZDoiR0VUIixwYXRoOm5ldyBSZWdFeHAoIigiK0UrIikvXFwkY291bnQvPyguKik/IikscmVzcG9uc2U6ZnVuY3Rpb24oeCxFLHUpe3Euc2FwLmxvZy5kZWJ1ZygiTW9ja1NlcnZlcjogaW5jb21pbmcgcmVxdWVzdCBmb3IgdXJsOiAiK3gudXJsKTt2YXIgSD17IkNvbnRlbnQtVHlwZSI6InRleHQvcGxhaW47Y2hhcnNldD11dGYtOCJ9O2goeCxIKTt2YXIgYj10Ll9vTW9ja2RhdGFbRV07aWYoYil7dmFyIEY9e3Jlc3VsdHM6cS5leHRlbmQodHJ1ZSxbXSxiKX07aWYodSl7dmFyIFU9ZGVjb2RlVVJJQ29tcG9uZW50KHUpLnJlcGxhY2UoIj8iLCImIikuc3BsaXQoIiYiKTt0cnl7aWYoVS5sZW5ndGg+MSl7VT10Ll9vcmRlclF1ZXJ5T3B0aW9ucyhVKX1xLmVhY2goVSxmdW5jdGlvbihpLFEpe3QuX2FwcGx5UXVlcnlPbkNvbGxlY3Rpb24oRixRLEUpfSl9Y2F0Y2goZSl7eC5yZXNwb25kKHBhcnNlSW50KGUubWVzc2FnZXx8ZS5udW1iZXIsMTApKTtyZXR1cm59fXgucmVzcG9uZCgyMDAsSCwiIitGLnJlc3VsdHMubGVuZ3RoKTtxLnNhcC5sb2cuZGVidWcoIk1vY2tTZXJ2ZXI6IHJlc3BvbnNlIHNlbnQgd2l0aDogMjAwLCAiK0YucmVzdWx0cy5sZW5ndGgpfWVsc2V7eC5yZXNwb25kKDQwNCk7cS5zYXAubG9nLmRlYnVnKCJNb2NrU2VydmVyOiByZXNwb25zZSBzZW50IHdpdGg6IDQwNCIpfX19KTtSLnB1c2goe21ldGhvZDoiR0VUIixwYXRoOm5ldyBSZWdFeHAoIigiK0UrIikvPyhcXD8oLiopKT8iKSxyZXNwb25zZTpmdW5jdGlvbih4LEUsdSl7cS5zYXAubG9nLmRlYnVnKCJNb2NrU2VydmVyOiBpbmNvbWluZyByZXF1ZXN0IGZvciB1cmw6ICIreC51cmwpO3ZhciBIPXsiQ29udGVudC1UeXBlIjoiYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04In07aCh4LEgpO3ZhciBiPXQuX29Nb2NrZGF0YVtFXTtpZihiKXt2YXIgRj17cmVzdWx0czpxLmV4dGVuZCh0cnVlLFtdLGIpfTtpZih1KXt2YXIgVT1kZWNvZGVVUklDb21wb25lbnQodSkucmVwbGFjZSgiPyIsIiYiKS5zcGxpdCgiJiIpO3RyeXtpZihVLmxlbmd0aD4xKXtVPXQuX29yZGVyUXVlcnlPcHRpb25zKFUpfXEuZWFjaChVLGZ1bmN0aW9uKGksUSl7dC5fYXBwbHlRdWVyeU9uQ29sbGVjdGlvbihGLFEsRSl9KX1jYXRjaChlKXt4LnJlc3BvbmQocGFyc2VJbnQoZS5tZXNzYWdlfHxlLm51bWJlciwxMCkpO3JldHVybn19eC5yZXNwb25kKDIwMCxILEpTT04uc3RyaW5naWZ5KHtkOkZ9KSk7cS5zYXAubG9nLmRlYnVnKCJNb2NrU2VydmVyOiByZXNwb25zZSBzZW50IHdpdGg6IDIwMCwgIitKU09OLnN0cmluZ2lmeSh7ZDpGfSkpfWVsc2V7eC5yZXNwb25kKDQwNCk7cS5zYXAubG9nLmRlYnVnKCJNb2NrU2VydmVyOiByZXNwb25zZSBzZW50IHdpdGg6IDQwNCIpfX19KTtSLnB1c2goe21ldGhvZDoiR0VUIixwYXRoOm5ldyBSZWdFeHAoIigiK0UrIilcXCgoW14vXFw/I10rKVxcKS8/KFxcPyguKikpPyIpLHJlc3BvbnNlOmZ1bmN0aW9uKHgsRSxrLHUpe3Euc2FwLmxvZy5kZWJ1ZygiTW9ja1NlcnZlcjogaW5jb21pbmcgcmVxdWVzdCBmb3IgdXJsOiAiK3gudXJsKTt2YXIgSD17IkNvbnRlbnQtVHlwZSI6ImFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtOCJ9O2goeCxIKTt2YXIgYj1xLmV4dGVuZCh0cnVlLHt9LEcoRSxrKSk7aWYoIXEuaXNFbXB0eU9iamVjdChiKSl7aWYodSl7dmFyIFU9ZGVjb2RlVVJJQ29tcG9uZW50KHUpLnJlcGxhY2UoIj8iLCImIikuc3BsaXQoIiYiKTt0cnl7aWYoVS5sZW5ndGg+MSl7VT10Ll9vcmRlclF1ZXJ5T3B0aW9ucyhVKX1xLmVhY2goVSxmdW5jdGlvbihpLFEpe2IuZW50cnk9dC5fYXBwbHlRdWVyeU9uRW50cnkoYi5lbnRyeSxRLEUpfSl9Y2F0Y2goZSl7eC5yZXNwb25kKHBhcnNlSW50KGUubWVzc2FnZXx8ZS5udW1iZXIsMTApKTtxLnNhcC5sb2cuZGVidWcoIk1vY2tTZXJ2ZXI6IHJlc3BvbnNlIHNlbnQgd2l0aDogIitwYXJzZUludChlLm1lc3NhZ2V8fGUubnVtYmVyLDEwKSk7cmV0dXJufX14LnJlc3BvbmQoMjAwLEgsSlNPTi5zdHJpbmdpZnkoe2Q6Yi5lbnRyeX0pKTtxLnNhcC5sb2cuZGVidWcoIk1vY2tTZXJ2ZXI6IHJlc3BvbnNlIHNlbnQgd2l0aDogMjAwLCAiK0pTT04uc3RyaW5naWZ5KHtkOmIuZW50cnl9KSl9ZWxzZXt4LnJlc3BvbmQoNDA0KTtxLnNhcC5sb2cuZGVidWcoIk1vY2tTZXJ2ZXI6IHJlc3BvbnNlIHNlbnQgd2l0aDogNDA0Iil9fX0pO3EuZWFjaChvLm5hdnByb3BzLGZ1bmN0aW9uKG4sTil7Ui5wdXNoKHttZXRob2Q6IkdFVCIscGF0aDpuZXcgUmVnRXhwKCIoIitFKyIpXFwoKFteL1xcPyNdKylcXCkvKCIrbisiKS9cXCRjb3VudC8/KC4qKT8iKSxyZXNwb25zZTpmdW5jdGlvbih4LEUsayxzLHUpe3Euc2FwLmxvZy5kZWJ1ZygiTW9ja1NlcnZlcjogaW5jb21pbmcgcmVxdWVzdCBmb3IgdXJsOiAiK3gudXJsKTt2YXIgSD17IkNvbnRlbnQtVHlwZSI6InRleHQvcGxhaW47Y2hhcnNldD11dGYtOCJ9O2goeCxIKTt2YXIgYj1HKEUsZGVjb2RlVVJJQ29tcG9uZW50KGspKTtpZihiKXt2YXIgYyxGPXt9O3RyeXtjPXQuX3Jlc29sdmVOYXZpZ2F0aW9uKEUsYi5lbnRyeSxzKTtpZihjJiZjLmxlbmd0aCE9PTApe3ZhciBpPXQuX21FbnRpdHlTZXRzW0VdLm5hdnByb3BzW3NdLnRvLm11bHRpcGxpY2l0eTtpZihpPT09IioiKXtGPXtyZXN1bHRzOnEuZXh0ZW5kKHRydWUsW10sYyl9fWVsc2V7Rj1xLmV4dGVuZCh0cnVlLHt9LGNbMF0pfWlmKHUpe3ZhciBVPWRlY29kZVVSSUNvbXBvbmVudCh1KS5yZXBsYWNlKCI/IiwiJiIpLnNwbGl0KCImIik7aWYoVS5sZW5ndGg+MSl7VT10Ll9vcmRlclF1ZXJ5T3B0aW9ucyhVKX1pZihpPT09IioiKXtxLmVhY2goVSxmdW5jdGlvbihJLFEpe3QuX2FwcGx5UXVlcnlPbkNvbGxlY3Rpb24oRixRLHQuX21FbnRpdHlTZXRzW0VdLm5hdnByb3BzW3NdLnRvLmVudGl0eVNldCl9KX1lbHNle3EuZWFjaChVLGZ1bmN0aW9uKEksUSl7Rj10Ll9hcHBseVF1ZXJ5T25FbnRyeShGLFEsdC5fbUVudGl0eVNldHNbRV0ubmF2cHJvcHNbc10udG8uZW50aXR5U2V0KX0pfX19eC5yZXNwb25kKDIwMCxILCIiK0YucmVzdWx0cy5sZW5ndGgpO3Euc2FwLmxvZy5kZWJ1ZygiTW9ja1NlcnZlcjogcmVzcG9uc2Ugc2VudCB3aXRoOiAyMDAsICIrRi5yZXN1bHRzLmxlbmd0aCk7cmV0dXJufWNhdGNoKGUpe3gucmVzcG9uZChwYXJzZUludChlLm1lc3NhZ2V8fGUubnVtYmVyLDEwKSk7cS5zYXAubG9nLmRlYnVnKCJNb2NrU2VydmVyOiByZXNwb25zZSBzZW50IHdpdGg6ICIrcGFyc2VJbnQoZS5tZXNzYWdlfHxlLm51bWJlciwxMCkpO3JldHVybn19ZWxzZXt4LnJlc3BvbmQoNDA0KTtxLnNhcC5sb2cuZGVidWcoIk1vY2tTZXJ2ZXI6IHJlc3BvbnNlIHNlbnQgd2l0aDogNDA0Iil9fX0pO1IucHVzaCh7bWV0aG9kOiJHRVQiLHBhdGg6bmV3IFJlZ0V4cCgiKCIrRSsiKVxcKChbXi9cXD8jXSspXFwpLygiK24rIikvPyhcXD8oLiopKT8iKSxyZXNwb25zZTpmdW5jdGlvbih4LEUsayxzLHUpe3Euc2FwLmxvZy5kZWJ1ZygiTW9ja1NlcnZlcjogaW5jb21pbmcgcmVxdWVzdCBmb3IgdXJsOiAiK3gudXJsKTt2YXIgSD17IkNvbnRlbnQtVHlwZSI6ImFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtOCJ9O2goeCxIKTt2YXIgYj1HKEUsZGVjb2RlVVJJQ29tcG9uZW50KGspKTtpZihiKXt2YXIgYyxGPXt9O3RyeXtjPXQuX3Jlc29sdmVOYXZpZ2F0aW9uKEUsYi5lbnRyeSxzKTtpZihjJiZjLmxlbmd0aCE9PTApe3ZhciBpPXQuX21FbnRpdHlTZXRzW0VdLm5hdnByb3BzW3NdLnRvLm11bHRpcGxpY2l0eTtpZihpPT09IioiKXtGPXtyZXN1bHRzOnEuZXh0ZW5kKHRydWUsW10sYyl9fWVsc2V7Rj1xLmV4dGVuZCh0cnVlLHt9LGNbMF0pfWlmKHUpe3ZhciBVPWRlY29kZVVSSUNvbXBvbmVudCh1KS5yZXBsYWNlKCI/IiwiJiIpLnNwbGl0KCImIik7aWYoVS5sZW5ndGg+MSl7VT10Ll9vcmRlclF1ZXJ5T3B0aW9ucyhVKX1pZihpPT09IioiKXtxLmVhY2goVSxmdW5jdGlvbihJLFEpe3QuX2FwcGx5UXVlcnlPbkNvbGxlY3Rpb24oRixRLHQuX21FbnRpdHlTZXRzW0VdLm5hdnByb3BzW3NdLnRvLmVudGl0eVNldCl9KX1lbHNle3EuZWFjaChVLGZ1bmN0aW9uKEksUSl7Rj10Ll9hcHBseVF1ZXJ5T25FbnRyeShGLFEsdC5fbUVudGl0eVNldHNbRV0ubmF2cHJvcHNbc10udG8uZW50aXR5U2V0KX0pfX19eC5yZXNwb25kKDIwMCxILEpTT04uc3RyaW5naWZ5KHtkOkZ9KSk7cS5zYXAubG9nLmRlYnVnKCJNb2NrU2VydmVyOiByZXNwb25zZSBzZW50IHdpdGg6IDIwMCwgIitKU09OLnN0cmluZ2lmeSh7ZDpGfSkpO3JldHVybn1jYXRjaChlKXt4LnJlc3BvbmQocGFyc2VJbnQoZS5tZXNzYWdlfHxlLm51bWJlciwxMCkpO3Euc2FwLmxvZy5kZWJ1ZygiTW9ja1NlcnZlcjogcmVzcG9uc2Ugc2VudCB3aXRoOiAiK3BhcnNlSW50KGUubWVzc2FnZXx8ZS5udW1iZXIsMTApKTtyZXR1cm59fXgucmVzcG9uZCg0MDQpO3Euc2FwLmxvZy5kZWJ1ZygiTW9ja1NlcnZlcjogcmVzcG9uc2Ugc2VudCB3aXRoOiA0MDQiKX19KX0pO1IucHVzaCh7bWV0aG9kOiJQT1NUIixwYXRoOm5ldyBSZWdFeHAoIigiK0UrIikoXFwoKFteL1xcPyNdKylcXCkvPyguKik/KT8iKSxyZXNwb25zZTpmdW5jdGlvbih4LEUsYixrLG4pe3Euc2FwLmxvZy5kZWJ1ZygiTW9ja1NlcnZlcjogaW5jb21pbmcgY3JlYXRlIHJlcXVlc3QgZm9yIHVybDogIit4LnVybCk7dmFyIHM9bnVsbDt2YXIgYz1udWxsO3ZhciBpPTQwNTt2YXIgVD1yKG8sZGVjb2RlVVJJQ29tcG9uZW50KGspLG4pO2lmKFQpe3ZhciBlPWEoeCxULGssbik7aWYoZSl7dmFyIHU9dC5fZ2V0Um9vdFVyaSgpK1QrIigiK3QuX2NyZWF0ZUtleXNTdHJpbmcodC5fbUVudGl0eVNldHNbVF0sZSkrIikiO3M9SlNPTi5zdHJpbmdpZnkoe2Q6ZSx1cmk6dX0pO2M9eyJDb250ZW50LVR5cGUiOiJhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTgifTt0Ll9vTW9ja2RhdGFbVF09dC5fb01vY2tkYXRhW1RdLmNvbmNhdChbZV0pO2k9MjAxfX14LnJlc3BvbmQoaSxjLHMpO3Euc2FwLmxvZy5kZWJ1ZygiTW9ja1NlcnZlcjogcmVzcG9uc2Ugc2VudCB3aXRoOiAiK2krIiwgIitzKX19KTtSLnB1c2goe21ldGhvZDoiUFVUIixwYXRoOm5ldyBSZWdFeHAoIigiK0UrIilcXCgoW14vXFw/I10rKVxcKS8/KC4qKT8iKSxyZXNwb25zZTpmdW5jdGlvbih4LEUsayxuKXtxLnNhcC5sb2cuZGVidWcoIk1vY2tTZXJ2ZXI6IGluY29taW5nIHVwZGF0ZSByZXF1ZXN0IGZvciB1cmw6ICIreC51cmwpO3ZhciBpPTQwNTt2YXIgcz1udWxsO3ZhciBiPW51bGw7dmFyIFQ9cihvLGRlY29kZVVSSUNvbXBvbmVudChrKSxuKTtpZihUKXt2YXIgZT1hKHgsVCxrLG4pO2lmKGUpe3ZhciB1PXQuX2dldFJvb3RVcmkoKStUKyIoIit0Ll9jcmVhdGVLZXlzU3RyaW5nKHQuX21FbnRpdHlTZXRzW1RdLGUpKyIpIjtiPXsiQ29udGVudC1UeXBlIjoiYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04In07dmFyIGM9RyhFLGspO2lmKGMpe3QuX29Nb2NrZGF0YVtFXVtjLmluZGV4XT1lfWk9MjA0fX14LnJlc3BvbmQoaSxiLHMpO3Euc2FwLmxvZy5kZWJ1ZygiTW9ja1NlcnZlcjogcmVzcG9uc2Ugc2VudCB3aXRoOiAiK2krIiwgIitzKX19KTtSLnB1c2goe21ldGhvZDoiREVMRVRFIixwYXRoOm5ldyBSZWdFeHAoIigiK0UrIilcXCgoW14vXFw/I10rKVxcKS8/KC4qKT8iKSxyZXNwb25zZTpmdW5jdGlvbih4LEUsayx1KXtxLnNhcC5sb2cuZGVidWcoIk1vY2tTZXJ2ZXI6IGluY29taW5nIGRlbGV0ZSByZXF1ZXN0IGZvciB1cmw6ICIreC51cmwpO3ZhciBpPTIwMDt2YXIgZT1HKEUsZGVjb2RlVVJJQ29tcG9uZW50KGspKTtpZihlKXt0Ll9vTW9ja2RhdGFbRV0uc3BsaWNlKGUuaW5kZXgsMSl9ZWxzZXtpPTQwMH14LnJlc3BvbmQoaSxudWxsLG51bGwpO3Euc2FwLmxvZy5kZWJ1ZygiTW9ja1NlcnZlcjogcmVzcG9uc2Ugc2VudCB3aXRoOiAiK2kpfX0pfSk7dGhpcy5zZXRSZXF1ZXN0cyhSKX07Zi5wcm90b3R5cGUuX29yZGVyUXVlcnlPcHRpb25zPWZ1bmN0aW9uKHUpe3ZhciBGLGkscyx0LG8sUyxlLGEsTz1bXTtxLmVhY2godSxmdW5jdGlvbihJLFEpe3N3aXRjaChRLnNwbGl0KCc9JylbMF0pe2Nhc2UiJHRvcCI6dD1xLmluQXJyYXkoUSx1KTticmVhaztjYXNlIiRza2lwIjpzPXEuaW5BcnJheShRLHUpO2JyZWFrO2Nhc2UiJG9yZGVyYnkiOm89cS5pbkFycmF5KFEsdSk7YnJlYWs7Y2FzZSIkZmlsdGVyIjpGPXEuaW5BcnJheShRLHUpO2JyZWFrO2Nhc2UiJHNlbGVjdCI6Uz1xLmluQXJyYXkoUSx1KTticmVhaztjYXNlIiRpbmxpbmVjb3VudCI6aT1xLmluQXJyYXkoUSx1KTticmVhaztjYXNlIiRleHBhbmQiOmU9cS5pbkFycmF5KFEsdSk7YnJlYWs7Y2FzZSIkZm9ybWF0IjphPXEuaW5BcnJheShRLHUpO2JyZWFrO2RlZmF1bHQ6aWYoUS5zcGxpdCgnPScpWzBdLmluZGV4T2YoJyQnKT09PTApe3Euc2FwLmxvZy5lcnJvcigiSW52YWxpZCBzeXN0ZW0gcXVlcnkgb3B0aW9ucyB2YWx1ZSEiKTt0aHJvdyBuZXcgRXJyb3IoIjQwMCIpfX19KTtpZihGPj0wKU8ucHVzaCh1W0ZdKTtpZihpPj0wKU8ucHVzaCh1W2ldKTtpZihzPj0wKU8ucHVzaCh1W3NdKTtpZih0Pj0wKU8ucHVzaCh1W3RdKTtpZihTPj0wKU8ucHVzaCh1W1NdKTtpZihvPj0wKU8ucHVzaCh1W29dKTtpZihlPj0wKU8ucHVzaCh1W2VdKTtpZihhPj0wKU8ucHVzaCh1W2FdKTtyZXR1cm4gT307Zi5wcm90b3R5cGUuX3JlbW92ZUFsbFJlcXVlc3RIYW5kbGVycz1mdW5jdGlvbigpe3ZhciByPXRoaXMuZ2V0UmVxdWVzdHMoKTt2YXIgbD1yLmxlbmd0aDtmb3IodmFyIGk9MDtpPGw7aSsrKXtmLl9yZW1vdmVSZXNwb25zZShyW2ldLnJlc3BvbnNlKX19O2YucHJvdG90eXBlLl9yZW1vdmVBbGxGaWx0ZXJzPWZ1bmN0aW9uKCl7Zm9yKHZhciBpPTA7aTx0aGlzLl9hRmlsdGVycy5sZW5ndGg7aSsrKXtmLl9yZW1vdmVGaWx0ZXIodGhpcy5fYUZpbHRlcnNbaV0pfXRoaXMuX2FGaWx0ZXJzPW51bGx9O2YucHJvdG90eXBlLl9hZGRSZXF1ZXN0SGFuZGxlcj1mdW5jdGlvbihtLHAscil7bT1tP20udG9VcHBlckNhc2UoKTptO2lmKHR5cGVvZiBtIT09InN0cmluZyIpe3Rocm93IG5ldyBFcnJvcigiRXJyb3IgaW4gcmVxdWVzdCBjb25maWd1cmF0aW9uOiB2YWx1ZSBvZiAnbWV0aG9kJyBoYXMgdG8gYmUgYSBzdHJpbmciKX1pZighKHR5cGVvZiBwPT09InN0cmluZyJ8fHAgaW5zdGFuY2VvZiBSZWdFeHApKXt0aHJvdyBuZXcgRXJyb3IoIkVycm9yIGluIHJlcXVlc3QgY29uZmlndXJhdGlvbjogdmFsdWUgb2YgJ3BhdGgnIGhhcyB0byBiZSBhIHN0cmluZyBvciBhIHJlZ3VsYXIgZXhwcmVzc2lvbiIpfWlmKHR5cGVvZiByIT09ImZ1bmN0aW9uIil7dGhyb3cgbmV3IEVycm9yKCJFcnJvciBpbiByZXF1ZXN0IGNvbmZpZ3VyYXRpb246IHZhbHVlIG9mICdyZXNwb25zZScgaGFzIHRvIGJlIGEgZnVuY3Rpb24iKX12YXIgdT10aGlzLl9nZXRSb290VXJpKCk7dT11JiZuZXcgUmVnRXhwKHRoaXMuX2VzY2FwZVN0cmluZ0ZvclJlZ0V4cCh1KSk7aWYocCYmIShwIGluc3RhbmNlb2YgUmVnRXhwKSl7cD1uZXcgUmVnRXhwKHRoaXMuX2NyZWF0ZVJlZ0V4cFBhdHRlcm4ocCkpfXZhciBSPXRoaXMuX2NyZWF0ZVJlZ0V4cCh1P3Uuc291cmNlK3Auc291cmNlOnAuc291cmNlKTt0aGlzLl9hZGRGaWx0ZXIodGhpcy5fY3JlYXRlRmlsdGVyKG0sUikpO3RoaXMuX29TZXJ2ZXIucmVzcG9uZFdpdGgobSxSLHIpO3Euc2FwLmxvZy5kZWJ1ZygiTW9ja1NlcnZlcjogYWRkaW5nICIrbSsiIHJlcXVlc3QgaGFuZGxlciBmb3IgcGF0dGVybiAiK1IpfTtmLnByb3RvdHlwZS5fY3JlYXRlUmVnRXhwPWZ1bmN0aW9uKHApe3JldHVybiBuZXcgUmVnRXhwKCJeIitwKyIkIil9O2YucHJvdG90eXBlLl9jcmVhdGVSZWdFeHBQYXR0ZXJuPWZ1bmN0aW9uKHApe3JldHVybiBwLnJlcGxhY2UoLzooW1x3XGRdKykvZywiKFteXC9dKykiKX07Zi5wcm90b3R5cGUuX2VzY2FwZVN0cmluZ0ZvclJlZ0V4cD1mdW5jdGlvbihzKXtyZXR1cm4gcy5yZXBsYWNlKC9bXFxcL1xbXF1ce1x9XChcKVwtXCpcK1w/XC5cXlwkXHxdL2csIlxcJCYiKX07Zi5wcm90b3R5cGUuX3RyaW09ZnVuY3Rpb24ocyl7cmV0dXJuIHMmJnMucmVwbGFjZSgvXlxzK3xccyskL2csIiIpfTtmLnByb3RvdHlwZS5faXNWYWxpZE51bWJlcj1mdW5jdGlvbihzKXtyZXR1cm4haXNOYU4ocGFyc2VGbG9hdChzKSkmJmlzRmluaXRlKHMpfTtmLnByb3RvdHlwZS5fZ2V0RGF0ZVRpbWU9ZnVuY3Rpb24ocyl7aWYoIXMpcmV0dXJuO3JldHVybiJkYXRldGltZSciK25ldyBEYXRlKE51bWJlcihzLnJlcGxhY2UoIi9EYXRlKCIsJycpLnJlcGxhY2UoIikvIiwnJykpKS50b0pTT04oKS5zdWJzdHJpbmcoMCwxOSkrIicifTtmLnByb3RvdHlwZS5fZ2V0SnNvbkRhdGU9ZnVuY3Rpb24oUyl7aWYoIVMpcmV0dXJuO3ZhciBuPWZ1bmN0aW9uKHMpe3ZhciBhPXEubWFwKHMuc2xpY2UoMCwtNSkuc3BsaXQoL1xELyksZnVuY3Rpb24oaSl7cmV0dXJuIHBhcnNlSW50KGksMTApfHwwfSk7YVsxXS09MTthPW5ldyBEYXRlKERhdGUuVVRDLmFwcGx5KERhdGUsYSkpO3ZhciBvPXMuc2xpY2UoLTUpO3ZhciBiPXBhcnNlSW50KG8sMTApLzEwMDtpZihvLnNsaWNlKDAsMSk9PT0iKyIpe2IqPS0xfWEuc2V0SG91cnMoYS5nZXRIb3VycygpK2IpO3JldHVybiBhLmdldFRpbWUoKX07cmV0dXJuIi9EYXRlKCIrbihTLnN1YnN0cmluZygiZGF0ZXRpbWUnIi5sZW5ndGgsUy5sZW5ndGgtMSkpKyIpLyJ9O2YucHJvdG90eXBlLl9hZGRGaWx0ZXI9ZnVuY3Rpb24oRil7dGhpcy5fYUZpbHRlcnMucHVzaChGKTtmLl9hZGRGaWx0ZXIoRil9O2YucHJvdG90eXBlLl9jcmVhdGVGaWx0ZXI9ZnVuY3Rpb24ocixSKXtyZXR1cm4gZnVuY3Rpb24obSx1LGEsVSxwKXtyZXR1cm4gcj09PW0mJlIudGVzdCh1KX19O2YucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24ocyl7TS5wcm90b3R5cGUuZGVzdHJveS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5zdG9wKCk7dmFyIFM9Zi5fYVNlcnZlcnM7dmFyIGk9cS5pbkFycmF5KHRoaXMsUyk7Uy5zcGxpY2UoaSwxKX07Zi5fYUZpbHRlcnM9W107Zi5fb1NlcnZlcj1udWxsO2YuX2FTZXJ2ZXJzPVtdO2YuX2dldEluc3RhbmNlPWZ1bmN0aW9uKCl7aWYoIXRoaXMuX29TZXJ2ZXIpe3RoaXMuX29TZXJ2ZXI9d2luZG93LnNpbm9uLmZha2VTZXJ2ZXIuY3JlYXRlKCk7dGhpcy5fb1NlcnZlci5hdXRvUmVzcG9uZD10cnVlfXJldHVybiB0aGlzLl9vU2VydmVyfTtmLmNvbmZpZz1mdW5jdGlvbihjKXt2YXIgcz10aGlzLl9nZXRJbnN0YW5jZSgpO3MuYXV0b1Jlc3BvbmQ9Yy5hdXRvUmVzcG9uZD09PWZhbHNlP2ZhbHNlOnRydWU7cy5hdXRvUmVzcG9uZEFmdGVyPWMuYXV0b1Jlc3BvbmRBZnRlcnx8MDtzLmZha2VIVFRQTWV0aG9kcz1jLmZha2VIVFRQTWV0aG9kc3x8ZmFsc2V9O2YucmVzcG9uZD1mdW5jdGlvbigpe3RoaXMuX2dldEluc3RhbmNlKCkucmVzcG9uZCgpfTtmLnN0YXJ0QWxsPWZ1bmN0aW9uKCl7Zm9yKHZhciBpPTA7aTx0aGlzLl9hU2VydmVycy5sZW5ndGg7aSsrKXt0aGlzLl9hU2VydmVyc1tpXS5zdGFydCgpfX07Zi5zdG9wQWxsPWZ1bmN0aW9uKCl7Zm9yKHZhciBpPTA7aTx0aGlzLl9hU2VydmVycy5sZW5ndGg7aSsrKXt0aGlzLl9hU2VydmVyc1tpXS5zdG9wKCl9dGhpcy5fZ2V0SW5zdGFuY2UoKS5yZXN0b3JlKCk7dGhpcy5fb1NlcnZlcj1udWxsfTtmLmRlc3Ryb3lBbGw9ZnVuY3Rpb24oKXt0aGlzLnN0b3BBbGwoKTtmb3IodmFyIGk9MDtpPHRoaXMuX2FTZXJ2ZXJzLmxlbmd0aDtpKyspe3RoaXMuX2FTZXJ2ZXJzW2ldLmRlc3Ryb3koKX19O2YuX2FkZEZpbHRlcj1mdW5jdGlvbihGKXt0aGlzLl9hRmlsdGVycy5wdXNoKEYpfTtmLl9yZW1vdmVGaWx0ZXI9ZnVuY3Rpb24oRil7dmFyIGk9cS5pbkFycmF5KEYsdGhpcy5fYUZpbHRlcnMpO2lmKGkhPT0tMSl7dGhpcy5fYUZpbHRlcnMuc3BsaWNlKGksMSl9cmV0dXJuIGkhPT0tMX07Zi5fcmVtb3ZlUmVzcG9uc2U9ZnVuY3Rpb24ocil7dmFyIFI9dGhpcy5fb1NlcnZlci5yZXNwb25zZXM7dmFyIGw9Ui5sZW5ndGg7Zm9yKHZhciBpPTA7aTxsO2krKyl7aWYoUltpXS5yZXNwb25zZT09PXIpe1Iuc3BsaWNlKGksMSk7cmV0dXJuIHRydWV9fXJldHVybiBmYWxzZX07d2luZG93LnNpbm9uLkZha2VYTUxIdHRwUmVxdWVzdC51c2VGaWx0ZXJzPXRydWU7d2luZG93LnNpbm9uLkZha2VYTUxIdHRwUmVxdWVzdC5hZGRGaWx0ZXIoZnVuY3Rpb24obSx1LGEsVSxwKXt2YXIgRj1mLl9hRmlsdGVycztmb3IodmFyIGk9MDtpPEYubGVuZ3RoO2krKyl7dmFyIGI9RltpXTtpZihiKG0sdSxhLFUscCkpe3JldHVybiBmYWxzZX19cmV0dXJuIHRydWV9KTt2YXIgZz1mdW5jdGlvbihGKXtpZigvLipcLmpzb24kL2kudGVzdChGKSl7cmV0dXJuIkpTT04ifWlmKC8uKlwueG1sJC9pLnRlc3QoRikpe3JldHVybiJYTUwifWlmKC8uKm1ldGFkYXRhJC9pLnRlc3QoRikpe3JldHVybiJYTUwifXJldHVybiBudWxsfTt3aW5kb3cuc2lub24uRmFrZVhNTEh0dHBSZXF1ZXN0LnByb3RvdHlwZS5yZXNwb25kRmlsZT1mdW5jdGlvbihzLGgsRil7dmFyIHI9cS5zYXAuc2pheCh7dXJsOkYsZGF0YVR5cGU6InRleHQifSk7aWYoIXIuc3VjY2Vzcyl0aHJvdyBuZXcgRXJyb3IoIkNvdWxkIG5vdCBsb2FkIGZpbGUgZnJvbTogIitGKTt2YXIgbz1yLmRhdGE7dmFyIG09ZyhGKTtpZih0aGlzWyJyZXNwb25kIittXSl7dGhpc1sicmVzcG9uZCIrbV0ocyxoLG8pfWVsc2V7dGhpcy5yZXNwb25kKHMsaCxvKX19O3dpbmRvdy5zaW5vbi5GYWtlWE1MSHR0cFJlcXVlc3QucHJvdG90eXBlLnJlc3BvbmRKU09OPWZ1bmN0aW9uKHMsaCxqKXtoPWh8fHt9O2hbIkNvbnRlbnQtVHlwZSJdPWhbIkNvbnRlbnQtVHlwZSJdfHwiYXBwbGljYXRpb24vanNvbiI7dGhpcy5yZXNwb25kKHMsaCx0eXBlb2Ygaj09PSJzdHJpbmciP2o6SlNPTi5zdHJpbmdpZnkoaikpfTt3aW5kb3cuc2lub24uRmFrZVhNTEh0dHBSZXF1ZXN0LnByb3RvdHlwZS5yZXNwb25kWE1MPWZ1bmN0aW9uKHMsaCx4KXtoPWh8fHt9O2hbIkNvbnRlbnQtVHlwZSJdPWhbIkNvbnRlbnQtVHlwZSJdfHwiYXBwbGljYXRpb24veG1sIjt0aGlzLnJlc3BvbmQocyxoLHgpfTtyZXR1cm4gZn0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5tb2RlbC5DbGllbnRNb2RlbCcpKXsNCi8qIQ0KICogU0FQIFVJIGRldmVsb3BtZW50IHRvb2xraXQgZm9yIEhUTUw1IChTQVBVSTUvT3BlblVJNSkNCiAqIChjKSBDb3B5cmlnaHQgMjAwOS0yMDE0IFNBUCBTRSBvciBhbiBTQVAgYWZmaWxpYXRlIGNvbXBhbnkuIA0KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAtIHNlZSBMSUNFTlNFLnR4dC4NCiAqLw0KalF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkubW9kZWwuQ2xpZW50TW9kZWwnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvbW9kZWwvQ2xpZW50TW9kZWwiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCcuL0NsaWVudENvbnRleHRCaW5kaW5nJywnLi9DbGllbnRMaXN0QmluZGluZycsJy4vQ2xpZW50UHJvcGVydHlCaW5kaW5nJywnLi9DbGllbnRUcmVlQmluZGluZycsJy4vTW9kZWwnXSxmdW5jdGlvbihxLEMsYSxiLGMsTSl7InVzZSBzdHJpY3QiO3ZhciBkPU0uZXh0ZW5kKCJzYXAudWkubW9kZWwuQ2xpZW50TW9kZWwiLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbihEKXtNLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLmJDYWNoZT10cnVlO3RoaXMuYVBlbmRpbmdSZXF1ZXN0SGFuZGxlcz1bXTtpZih0eXBlb2YgRD09InN0cmluZyIpe3RoaXMubG9hZERhdGEoRCl9fSxtZXRhZGF0YTp7cHVibGljTWV0aG9kczpbImxvYWREYXRhIiwic2V0RGF0YSIsImdldERhdGEiLCJzZXRQcm9wZXJ0eSIsImZvcmNlTm9DYWNoZSJdfX0pO2QucHJvdG90eXBlLmdldERhdGE9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vRGF0YX07ZC5wcm90b3R5cGUuY2hlY2tVcGRhdGU9ZnVuY3Rpb24oZil7dmFyIEI9dGhpcy5hQmluZGluZ3Muc2xpY2UoMCk7cS5lYWNoKEIsZnVuY3Rpb24oaSxvKXtvLmNoZWNrVXBkYXRlKGYpfSl9O2QucHJvdG90eXBlLmNyZWF0ZUJpbmRpbmdDb250ZXh0PWZ1bmN0aW9uKHAsbyxQLGYpe2lmKHR5cGVvZiBvPT0iZnVuY3Rpb24iKXtmPW87bz1udWxsfWlmKHR5cGVvZiBQPT0iZnVuY3Rpb24iKXtmPVA7UD1udWxsfXZhciBzPXRoaXMucmVzb2x2ZShwLG8pLG49KHM9PXVuZGVmaW5lZCk/dW5kZWZpbmVkOnRoaXMuZ2V0Q29udGV4dChzP3M6Ii8iKTtpZighbil7bj1udWxsfWYobil9O2QucHJvdG90eXBlLl9hamF4PWZ1bmN0aW9uKHApe3ZhciB0PXRoaXM7aWYodGhpcy5iRGVzdHJveWVkKXtyZXR1cm59ZnVuY3Rpb24gdyhmKXtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgaT1xLmluQXJyYXkocix0LmFQZW5kaW5nUmVxdWVzdEhhbmRsZXMpO2lmKGk+LTEpe3QuYVBlbmRpbmdSZXF1ZXN0SGFuZGxlcy5zcGxpY2UoaSwxKX1pZighKHImJnIuYlN1cHByZXNzRXJyb3JIYW5kbGVyQ2FsbCkpe2YuYXBwbHkodGhpcyxhcmd1bWVudHMpfX19cC5zdWNjZXNzPXcocC5zdWNjZXNzKTtwLmVycm9yPXcocC5lcnJvcik7dmFyIHI9cS5hamF4KHApO2lmKHAuYXN5bmMpe3RoaXMuYVBlbmRpbmdSZXF1ZXN0SGFuZGxlcy5wdXNoKHIpfX07ZC5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbigpe2lmKHRoaXMuYVBlbmRpbmdSZXF1ZXN0SGFuZGxlcyl7Zm9yKHZhciBpPXRoaXMuYVBlbmRpbmdSZXF1ZXN0SGFuZGxlcy5sZW5ndGgtMTtpPj0wO2ktLSl7dmFyIHI9dGhpcy5hUGVuZGluZ1JlcXVlc3RIYW5kbGVzW2ldO2lmKHImJnIuYWJvcnQpe3IuYlN1cHByZXNzRXJyb3JIYW5kbGVyQ2FsbD10cnVlO3IuYWJvcnQoKX19ZGVsZXRlIHRoaXMuYVBlbmRpbmdSZXF1ZXN0SGFuZGxlc31NLnByb3RvdHlwZS5kZXN0cm95LmFwcGx5KHRoaXMsYXJndW1lbnRzKX07ZC5wcm90b3R5cGUuZGVzdHJveUJpbmRpbmdDb250ZXh0PWZ1bmN0aW9uKG8pe307ZC5wcm90b3R5cGUuYmluZENvbnRleHQ9ZnVuY3Rpb24ocCxvLFApe3ZhciBCPW5ldyBDKHRoaXMscCxvLFApO3JldHVybiBCfTtkLnByb3RvdHlwZS51cGRhdGVCaW5kaW5ncz1mdW5jdGlvbihmKXt0aGlzLmNoZWNrVXBkYXRlKGYpfTtkLnByb3RvdHlwZS5mb3JjZU5vQ2FjaGU9ZnVuY3Rpb24oZil7dGhpcy5iQ2FjaGU9IWZ9O3JldHVybiBkfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLm1vZGVsLmFuYWx5dGljcy5PRGF0YU1vZGVsQWRhcHRlcicpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5tb2RlbC5hbmFseXRpY3MuT0RhdGFNb2RlbEFkYXB0ZXInKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvbW9kZWwvYW5hbHl0aWNzL09EYXRhTW9kZWxBZGFwdGVyIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnLi9BbmFseXRpY2FsQmluZGluZycsIi4vVHJlZUJpbmRpbmdBZGFwdGVyIiwnc2FwL3VpL21vZGVsL29kYXRhL09EYXRhTW9kZWwnLCcuL29kYXRhNGFuYWx5dGljcyddLGZ1bmN0aW9uKHEsQSxULE8sbyl7InVzZSBzdHJpY3QiO3ZhciBhPWZ1bmN0aW9uKCl7aWYoISh0aGlzIGluc3RhbmNlb2YgTyYmdGhpcy5nZXRBbmFseXRpY2FsRXh0ZW5zaW9ucz09PXVuZGVmaW5lZCkpe3JldHVybn1mb3IodmFyIGYgaW4gYS5wcm90b3R5cGUpe2lmKGEucHJvdG90eXBlLmhhc093blByb3BlcnR5KGYpKXt0aGlzW2ZdPWEucHJvdG90eXBlW2ZdfX1pZih0aGlzLmlzQ291bnRTdXBwb3J0ZWQoKSl7cS5zYXAubG9nLmluZm8oIk9EYXRhTW9kZWxBZGFwdGVyOiBzd2l0Y2hlZCBPRGF0YU1vZGVsIHRvIHVzZSBpbmxpbmVjb3VudCAobWFuZGF0b3J5IGZvciBhbmFseXRpY2FsIGJpbmRpbmdzKSIpO3RoaXMuc2V0Q291bnRTdXBwb3J0ZWQoZmFsc2UpfX07YS5wcm90b3R5cGUuYmluZExpc3Q9ZnVuY3Rpb24ocCxjLHMsZixQKXtpZihQJiZQLmFuYWx5dGljYWxJbmZvKXt2YXIgYj1uZXcgQSh0aGlzLHAsYyxzLGYsUCk7VC5hcHBseShiKTtyZXR1cm4gYn1lbHNle3JldHVybiBPLnByb3RvdHlwZS5iaW5kTGlzdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fTthLnByb3RvdHlwZS5iaW5kVHJlZT1mdW5jdGlvbihwLGMsZixQKXtpZihQJiZQLmFuYWx5dGljYWxJbmZvKXt2YXIgYj1uZXcgQSh0aGlzLHAsYyxbXSxmLFApO3JldHVybiBifWVsc2V7cmV0dXJuIE8ucHJvdG90eXBlLmJpbmRUcmVlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19O2EucHJvdG90eXBlLmdldEFuYWx5dGljYWxFeHRlbnNpb25zPWZ1bmN0aW9uKCl7aWYodGhpcy5vT0RhdGE0U0FQQW5hbHl0aWNzTW9kZWwhPXVuZGVmaW5lZCYmdGhpcy5vT0RhdGE0U0FQQW5hbHl0aWNzTW9kZWwhPW51bGwpcmV0dXJuIHRoaXMub09EYXRhNFNBUEFuYWx5dGljc01vZGVsO3ZhciBzPW51bGw7aWYoYXJndW1lbnRzLmxlbmd0aD09MSl7dmFyIGI9YXJndW1lbnRzWzBdO3ZhciByPXEuc2FwLnN5bmNHZXRUZXh0KGIpO2lmKHIuc3VjY2Vzcyl7cz1yLmRhdGF9fXRyeXt0aGlzLm9PRGF0YTRTQVBBbmFseXRpY3NNb2RlbD1uZXcgby5Nb2RlbChuZXcgby5Nb2RlbC5SZWZlcmVuY2VCeU1vZGVsKHRoaXMpLHMpfWNhdGNoKGUpe3Rocm93IkZhaWxlZCB0byBpbnN0YW50aWF0ZSBhbmFseXRpY2FsIGV4dGVuc2lvbnMgZm9yIGdpdmVuIE9EYXRhIG1vZGVsOiAiK2UubWVzc2FnZX1yZXR1cm4gdGhpcy5vT0RhdGE0U0FQQW5hbHl0aWNzTW9kZWx9O3JldHVybiBhfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLm1vZGVsLmpzb24uSlNPTk1vZGVsJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLm1vZGVsLmpzb24uSlNPTk1vZGVsJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL21vZGVsL2pzb24vSlNPTk1vZGVsIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL21vZGVsL0NsaWVudE1vZGVsJywnLi9KU09OTGlzdEJpbmRpbmcnLCcuL0pTT05Qcm9wZXJ0eUJpbmRpbmcnLCcuL0pTT05UcmVlQmluZGluZyddLGZ1bmN0aW9uKHEsQyxKLGEsYil7InVzZSBzdHJpY3QiO3ZhciBjPUMuZXh0ZW5kKCJzYXAudWkubW9kZWwuanNvbi5KU09OTW9kZWwiLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbihkKXtDLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtpZihkJiZ0eXBlb2YgZD09Im9iamVjdCIpe3RoaXMuc2V0RGF0YShkKX19LG1ldGFkYXRhOntwdWJsaWNNZXRob2RzOlsic2V0SlNPTiIsImdldEpTT04iXX19KTtjLnByb3RvdHlwZS5zZXREYXRhPWZ1bmN0aW9uKGQsbSl7aWYobSl7dGhpcy5vRGF0YT1xLmV4dGVuZCh0cnVlLHt9LHRoaXMub0RhdGEsZCl9ZWxzZXt0aGlzLm9EYXRhPWR9dGhpcy5jaGVja1VwZGF0ZSgpfTtjLnByb3RvdHlwZS5zZXRKU09OPWZ1bmN0aW9uKGosbSl7dmFyIG87dHJ5e289cS5wYXJzZUpTT04oaik7dGhpcy5zZXREYXRhKG8sbSl9Y2F0Y2goZSl7cS5zYXAubG9nLmZhdGFsKCJUaGUgZm9sbG93aW5nIHByb2JsZW0gb2NjdXJyZWQ6IEpTT04gcGFyc2UgRXJyb3I6ICIrZSk7dGhpcy5maXJlUGFyc2VFcnJvcih7dXJsOiIiLGVycm9yQ29kZTotMSxyZWFzb246IiIsc3JjVGV4dDplLGxpbmU6LTEsbGluZXBvczotMSxmaWxlcG9zOi0xfSl9fTtjLnByb3RvdHlwZS5nZXRKU09OPWZ1bmN0aW9uKCl7cmV0dXJuIEpTT04uc3RyaW5naWZ5KHRoaXMub0RhdGEpfTtjLnByb3RvdHlwZS5sb2FkRGF0YT1mdW5jdGlvbih1LHAsQSx0LG0sZCxoKXt2YXIgZT10aGlzO0E9KEEhPT1mYWxzZSk7dD10fHwiR0VUIjtkPWQ9PT11bmRlZmluZWQ/dGhpcy5iQ2FjaGU6ZDt0aGlzLmZpcmVSZXF1ZXN0U2VudCh7dXJsOnUsdHlwZTp0LGFzeW5jOkEsaGVhZGVyczpoLGluZm86ImNhY2hlPSIrZCsiO2JNZXJnZT0iK20saW5mb09iamVjdDp7Y2FjaGU6ZCxtZXJnZTptfX0pO3RoaXMuX2FqYXgoe3VybDp1LGFzeW5jOkEsZGF0YVR5cGU6J2pzb24nLGNhY2hlOmQsZGF0YTpwLGhlYWRlcnM6aCx0eXBlOnQsc3VjY2VzczpmdW5jdGlvbihEKXtpZighRCl7cS5zYXAubG9nLmZhdGFsKCJUaGUgZm9sbG93aW5nIHByb2JsZW0gb2NjdXJyZWQ6IE5vIGRhdGEgd2FzIHJldHJpZXZlZCBieSBzZXJ2aWNlOiAiK3UpfWUuc2V0RGF0YShELG0pO2UuZmlyZVJlcXVlc3RDb21wbGV0ZWQoe3VybDp1LHR5cGU6dCxhc3luYzpBLGhlYWRlcnM6aCxpbmZvOiJjYWNoZT0iK2QrIjtiTWVyZ2U9IittLGluZm9PYmplY3Q6e2NhY2hlOmQsbWVyZ2U6bX0sc3VjY2Vzczp0cnVlfSl9LGVycm9yOmZ1bmN0aW9uKFgsZixnKXt2YXIgRT17bWVzc2FnZTpmLHN0YXR1c0NvZGU6WC5zdGF0dXMsc3RhdHVzVGV4dDpYLnN0YXR1c1RleHQscmVzcG9uc2VUZXh0OlgucmVzcG9uc2VUZXh0fTtxLnNhcC5sb2cuZmF0YWwoIlRoZSBmb2xsb3dpbmcgcHJvYmxlbSBvY2N1cnJlZDogIitmLFgucmVzcG9uc2VUZXh0KyIsIitYLnN0YXR1cysiLCIrWC5zdGF0dXNUZXh0KTtlLmZpcmVSZXF1ZXN0Q29tcGxldGVkKHt1cmw6dSx0eXBlOnQsYXN5bmM6QSxoZWFkZXJzOmgsaW5mbzoiY2FjaGU9IitkKyI7Yk1lcmdlPSIrbSxpbmZvT2JqZWN0OntjYWNoZTpkLG1lcmdlOm19LHN1Y2Nlc3M6ZmFsc2UsZXJyb3JvYmplY3Q6RX0pO2UuZmlyZVJlcXVlc3RGYWlsZWQoRSl9fSl9O2MucHJvdG90eXBlLmJpbmRQcm9wZXJ0eT1mdW5jdGlvbihwLG8sUCl7dmFyIEI9bmV3IGEodGhpcyxwLG8sUCk7cmV0dXJuIEJ9O2MucHJvdG90eXBlLmJpbmRMaXN0PWZ1bmN0aW9uKHAsbyxzLGYsUCl7dmFyIEI9bmV3IEoodGhpcyxwLG8scyxmLFApO3JldHVybiBCfTtjLnByb3RvdHlwZS5iaW5kVHJlZT1mdW5jdGlvbihwLG8sZixQKXt2YXIgQj1uZXcgYih0aGlzLHAsbyxmLFApO3JldHVybiBCfTtjLnByb3RvdHlwZS5zZXRQcm9wZXJ0eT1mdW5jdGlvbihwLHYsbyl7dmFyIE89cC5zdWJzdHJpbmcoMCxwLmxhc3RJbmRleE9mKCIvIikpLFA9cC5zdWJzdHIocC5sYXN0SW5kZXhPZigiLyIpKzEpO2lmKCF0aGlzLnJlc29sdmUocCxvKSl7cmV0dXJufWlmKCFPJiYhbyl7bz10aGlzLm9EYXRhfXZhciBkPXRoaXMuX2dldE9iamVjdChPLG8pO2lmKGQpe2RbUF09djt0aGlzLmNoZWNrVXBkYXRlKCl9fTtjLnByb3RvdHlwZS5nZXRQcm9wZXJ0eT1mdW5jdGlvbihwLG8pe3JldHVybiB0aGlzLl9nZXRPYmplY3QocCxvKX07Yy5wcm90b3R5cGUuX2dldE9iamVjdD1mdW5jdGlvbihwLG8pe3ZhciBuPXRoaXMuaXNMZWdhY3lTeW50YXgoKT90aGlzLm9EYXRhOm51bGw7aWYobyBpbnN0YW5jZW9mIHNhcC51aS5tb2RlbC5Db250ZXh0KXtuPXRoaXMuX2dldE9iamVjdChvLmdldFBhdGgoKSl9ZWxzZSBpZihvKXtuPW99aWYoIXApe3JldHVybiBufXZhciBQPXAuc3BsaXQoIi8iKSxpPTA7aWYoIVBbMF0pe249dGhpcy5vRGF0YTtpKyt9d2hpbGUobiYmUFtpXSl7bj1uW1BbaV1dO2krK31yZXR1cm4gbn07Yy5wcm90b3R5cGUuaXNMaXN0PWZ1bmN0aW9uKHAsbyl7dmFyIEE9dGhpcy5yZXNvbHZlKHAsbyk7cmV0dXJuIHEuaXNBcnJheSh0aGlzLl9nZXRPYmplY3QoQSkpfTtyZXR1cm4gY30sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5tb2RlbC54bWwuWE1MTW9kZWwnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkubW9kZWwueG1sLlhNTE1vZGVsJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL21vZGVsL3htbC9YTUxNb2RlbCIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ3NhcC91aS9tb2RlbC9DbGllbnRNb2RlbCcsJy4vWE1MTGlzdEJpbmRpbmcnLCcuL1hNTFByb3BlcnR5QmluZGluZycsJy4vWE1MVHJlZUJpbmRpbmcnLCdqcXVlcnkuc2FwLnhtbCddLGZ1bmN0aW9uKHEsQyxYLGEsYil7InVzZSBzdHJpY3QiO3ZhciBjPUMuZXh0ZW5kKCJzYXAudWkubW9kZWwueG1sLlhNTE1vZGVsIix7Y29uc3RydWN0b3I6ZnVuY3Rpb24oZCl7Qy5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5vTmFtZVNwYWNlcz1udWxsO2lmKGQmJmQuZG9jdW1lbnRFbGVtZW50KXt0aGlzLnNldERhdGEoZCl9fSxtZXRhZGF0YTp7cHVibGljTWV0aG9kczpbInNldFhNTCIsImdldFhNTCIsInNldE5hbWVTcGFjZSJdfX0pO2MucHJvdG90eXBlLnNldFhNTD1mdW5jdGlvbih4KXt2YXIgbz1xLnNhcC5wYXJzZVhNTCh4KTtpZihvLnBhcnNlRXJyb3IuZXJyb3JDb2RlIT0wKXt2YXIgcD1vLnBhcnNlRXJyb3I7cS5zYXAubG9nLmZhdGFsKCJUaGUgZm9sbG93aW5nIHByb2JsZW0gb2NjdXJyZWQ6IFhNTCBwYXJzZSBFcnJvciBmb3IgIitwLnVybCsiIGNvZGU6ICIrcC5lcnJvckNvZGUrIiByZWFzb246ICIrcC5yZWFzb24rIiBzcmM6ICIrcC5zcmNUZXh0KyIgbGluZTogIitwLmxpbmUrIiBsaW5lcG9zOiAiK3AubGluZXBvcysiIGZpbGVwb3M6ICIrcC5maWxlcG9zKTt0aGlzLmZpcmVQYXJzZUVycm9yKHt1cmw6cC51cmwsZXJyb3JDb2RlOnAuZXJyb3JDb2RlLHJlYXNvbjpwLnJlYXNvbixzcmNUZXh0OnAuc3JjVGV4dCxsaW5lOnAubGluZSxsaW5lcG9zOnAubGluZXBvcyxmaWxlcG9zOnAuZmlsZXBvc30pfXRoaXMuc2V0RGF0YShvKX07Yy5wcm90b3R5cGUuZ2V0WE1MPWZ1bmN0aW9uKCl7cmV0dXJuIHEuc2FwLnNlcmlhbGl6ZVhNTCh0aGlzLm9EYXRhKX07Yy5wcm90b3R5cGUuc2V0RGF0YT1mdW5jdGlvbihkKXt0aGlzLm9EYXRhPWQ7dGhpcy5jaGVja1VwZGF0ZSgpfTtjLnByb3RvdHlwZS5sb2FkRGF0YT1mdW5jdGlvbih1LHAsQSx0LGQsaCl7dmFyIGU9dGhpcztBPShBIT09ZmFsc2UpO3Q9dHx8IkdFVCI7ZD1kPT09dW5kZWZpbmVkP3RoaXMuYkNhY2hlOmQ7dGhpcy5maXJlUmVxdWVzdFNlbnQoe3VybDp1LHR5cGU6dCxhc3luYzpBLGhlYWRlcnM6aCxpbmZvOiJjYWNoZT0iK2QsaW5mb09iamVjdDp7Y2FjaGU6ZH19KTt0aGlzLl9hamF4KHt1cmw6dSxhc3luYzpBLGNhY2hlOmQsZGF0YVR5cGU6J3htbCcsZGF0YTpwLGhlYWRlcnM6aCx0eXBlOnQsc3VjY2VzczpmdW5jdGlvbihEKXtpZighRCl7cS5zYXAubG9nLmZhdGFsKCJUaGUgZm9sbG93aW5nIHByb2JsZW0gb2NjdXJyZWQ6IE5vIGRhdGEgd2FzIHJldHJpZXZlZCBieSBzZXJ2aWNlOiAiK3UpfWUuc2V0RGF0YShEKTtlLmZpcmVSZXF1ZXN0Q29tcGxldGVkKHt1cmw6dSx0eXBlOnQsYXN5bmM6QSxoZWFkZXJzOmgsaW5mbzoiY2FjaGU9IitkLGluZm9PYmplY3Q6e2NhY2hlOmR9LHN1Y2Nlc3M6dHJ1ZX0pfSxlcnJvcjpmdW5jdGlvbihmLGcsaSl7dmFyIEU9e21lc3NhZ2U6ZyxzdGF0dXNDb2RlOmYuc3RhdHVzLHN0YXR1c1RleHQ6Zi5zdGF0dXNUZXh0LHJlc3BvbnNlVGV4dDpmLnJlc3BvbnNlVGV4dH07cS5zYXAubG9nLmZhdGFsKCJUaGUgZm9sbG93aW5nIHByb2JsZW0gb2NjdXJyZWQ6ICIrZyxmLnJlc3BvbnNlVGV4dCsiLCIrZi5zdGF0dXMrIiwiK2Yuc3RhdHVzVGV4dCk7ZS5maXJlUmVxdWVzdENvbXBsZXRlZCh7dXJsOnUsdHlwZTp0LGFzeW5jOkEsaGVhZGVyczpoLGluZm86ImNhY2hlPSIrZCxpbmZvT2JqZWN0OntjYWNoZTpkfSxzdWNjZXNzOmZhbHNlLGVycm9yb2JqZWN0OkV9KTtlLmZpcmVSZXF1ZXN0RmFpbGVkKEUpfX0pfTtjLnByb3RvdHlwZS5zZXROYW1lU3BhY2U9ZnVuY3Rpb24obixwKXtpZighcCl7cD0iIn1pZighdGhpcy5vTmFtZVNwYWNlcyl7dGhpcy5vTmFtZVNwYWNlcz17fX10aGlzLm9OYW1lU3BhY2VzW3BdPW59O2MucHJvdG90eXBlLmJpbmRQcm9wZXJ0eT1mdW5jdGlvbihwLG8sUCl7dmFyIEI9bmV3IGEodGhpcyxwLG8sUCk7cmV0dXJuIEJ9O2MucHJvdG90eXBlLmJpbmRMaXN0PWZ1bmN0aW9uKHAsbyxzLGYsUCl7dmFyIEI9bmV3IFgodGhpcyxwLG8scyxmLFApO3JldHVybiBCfTtjLnByb3RvdHlwZS5iaW5kVHJlZT1mdW5jdGlvbihwLG8sZixQKXt2YXIgQj1uZXcgYih0aGlzLHAsbyxmLFApO3JldHVybiBCfTtjLnByb3RvdHlwZS5zZXRQcm9wZXJ0eT1mdW5jdGlvbihwLHYsbyl7dmFyIE89cC5zdWJzdHJpbmcoMCxwLmxhc3RJbmRleE9mKCIvIikrMSksUD1wLnN1YnN0cihwLmxhc3RJbmRleE9mKCIvIikrMSk7aWYoIXRoaXMucmVzb2x2ZShwLG8pKXtyZXR1cm59aWYoIXRoaXMub0RhdGEuZG9jdW1lbnRFbGVtZW50KXtxLnNhcC5sb2cud2FybmluZygiVHJ5aW5nIHRvIHNldCBwcm9wZXJ0eSAiK3ArIiwgYnV0IG5vIGRvY3VtZW50IGV4aXN0cy4iKTtyZXR1cm59dmFyIGQ7aWYoUC5pbmRleE9mKCJAIik9PTApe2Q9dGhpcy5fZ2V0T2JqZWN0KE8sbyk7aWYoZFswXSl7ZFswXS5zZXRBdHRyaWJ1dGUoUC5zdWJzdHIoMSksdik7dGhpcy5jaGVja1VwZGF0ZSgpfX1lbHNle2Q9dGhpcy5fZ2V0T2JqZWN0KHAsbyk7aWYoZFswXSl7cShkWzBdKS50ZXh0KHYpO3RoaXMuY2hlY2tVcGRhdGUoKX19fTtjLnByb3RvdHlwZS5nZXRQcm9wZXJ0eT1mdW5jdGlvbihwLG8pe3ZhciByPXRoaXMuX2dldE9iamVjdChwLG8pO2lmKHImJnR5cGVvZiByIT0ic3RyaW5nIil7cj1xKHJbMF0pLnRleHQoKX1yZXR1cm4gcn07Yy5wcm90b3R5cGUuZ2V0T2JqZWN0PWZ1bmN0aW9uKHAsbyl7dmFyIE89dGhpcy5fZ2V0T2JqZWN0KHAsbyk7aWYocS5pc0FycmF5KE8pKXtPPU9bMF19cmV0dXJuIE99O2MucHJvdG90eXBlLl9nZXRPYmplY3Q9ZnVuY3Rpb24ocCxvKXt2YXIgcj10aGlzLm9EYXRhLmRvY3VtZW50RWxlbWVudDtpZighcil7cmV0dXJuIG51bGx9dmFyIG49dGhpcy5pc0xlZ2FjeVN5bnRheCgpP1tyXTpbXTtpZihvIGluc3RhbmNlb2Ygc2FwLnVpLm1vZGVsLkNvbnRleHQpe249dGhpcy5fZ2V0T2JqZWN0KG8uZ2V0UGF0aCgpKX1lbHNlIGlmKG8pe249W29dfWlmKCFwKXtyZXR1cm4gbn12YXIgUD1wLnNwbGl0KCIvIikscyxpPTA7aWYoIVBbMF0pe249cjtpKyt9bj1uLmxlbmd0aD09dW5kZWZpbmVkP1tuXTpuO249blswXT9uOm51bGw7d2hpbGUobiYmbi5sZW5ndGg+MCYmUFtpXSl7cz1QW2ldO2lmKHMuaW5kZXhPZigiQCIpPT0wKXtuPXRoaXMuX2dldEF0dHJpYnV0ZShuWzBdLHMuc3Vic3RyKDEpKX1lbHNlIGlmKHM9PSJ0ZXh0KCkiKXtuPXEoblswXSkudGV4dCgpfWVsc2UgaWYoaXNOYU4ocykpe249dGhpcy5fZ2V0Q2hpbGRFbGVtZW50c0J5VGFnTmFtZShuWzBdLHMpfWVsc2V7bj1bbltzXV19aSsrfXJldHVybiBufTtjLnByb3RvdHlwZS5fZ2V0QXR0cmlidXRlPWZ1bmN0aW9uKG4sTil7aWYoIXRoaXMub05hbWVTcGFjZXN8fE4uaW5kZXhPZigiOiIpPT0tMSl7cmV0dXJuIG4uZ2V0QXR0cmlidXRlKE4pfXZhciBzPXRoaXMuX2dldE5hbWVTcGFjZShOKSxsPXRoaXMuX2dldExvY2FsTmFtZShOKTtpZihuLmdldEF0dHJpYnV0ZU5TKXtyZXR1cm4gbi5nZXRBdHRyaWJ1dGVOUyhzLGwpfWVsc2V7aWYoIXRoaXMub0RvY05TUHJlZml4ZXMpe3RoaXMub0RvY05TUHJlZml4ZXM9dGhpcy5fZ2V0RG9jTlNQcmVmaXhlcygpfXZhciBwPXRoaXMub0RvY05TUHJlZml4ZXNbc107Tj0ocD9wKyI6IjoiIikrbDtyZXR1cm4gbi5nZXRBdHRyaWJ1dGUoTil9fTtjLnByb3RvdHlwZS5fZ2V0Q2hpbGRFbGVtZW50c0J5VGFnTmFtZT1mdW5jdGlvbihuLE4pe3ZhciBkPW4uY2hpbGROb2RlcyxyPVtdO2lmKHRoaXMub05hbWVTcGFjZXMpe3ZhciBzPXRoaXMuX2dldE5hbWVTcGFjZShOKSxsPXRoaXMuX2dldExvY2FsTmFtZShOKSxlO3EuZWFjaChkLGZ1bmN0aW9uKGksbyl7ZT1vLmxvY2FsTmFtZXx8by5iYXNlTmFtZTtpZihvLm5vZGVUeXBlPT0xJiZlPT1sJiZvLm5hbWVzcGFjZVVSST09cyl7ci5wdXNoKG8pfX0pfWVsc2V7cS5lYWNoKGQsZnVuY3Rpb24oaSxvKXtpZihvLm5vZGVUeXBlPT0xJiZvLm5vZGVOYW1lPT1OKXtyLnB1c2gobyl9fSl9cmV0dXJuIHJ9O2MucHJvdG90eXBlLl9nZXROYW1lU3BhY2U9ZnVuY3Rpb24obil7dmFyIGk9bi5pbmRleE9mKCI6IikscD0iIjtpZihpPjApe3A9bi5zdWJzdHIoMCxpKX1yZXR1cm4gdGhpcy5vTmFtZVNwYWNlc1twXX07Yy5wcm90b3R5cGUuX2dldExvY2FsTmFtZT1mdW5jdGlvbihuKXt2YXIgaT1uLmluZGV4T2YoIjoiKSxsPW47aWYoaT4wKXtsPW4uc3Vic3RyKGkrMSl9cmV0dXJuIGx9O2MucHJvdG90eXBlLl9nZXREb2NOU1ByZWZpeGVzPWZ1bmN0aW9uKCl7dmFyIHA9e30sZD10aGlzLm9EYXRhJiZ0aGlzLm9EYXRhLmRvY3VtZW50RWxlbWVudDtpZighZCl7cmV0dXJuIHB9dmFyIEE9ZC5hdHRyaWJ1dGVzO3EuZWFjaChBLGZ1bmN0aW9uKGksbyl7dmFyIG49by5uYW1lLHY9by52YWx1ZTtpZihuPT0ieG1sbnMiKXtwW3ZdPSIifWVsc2UgaWYobi5pbmRleE9mKCJ4bWxucyIpPT0wKXtwW3ZdPW4uc3Vic3RyKDYpfX0pO3JldHVybiBwfTtjLnByb3RvdHlwZS5fcmVzb2x2ZT1mdW5jdGlvbihwLG8pe3ZhciBpPSFxLnNhcC5zdGFydHNXaXRoKHAsIi8iKSxyPXA7aWYoaSl7aWYobyl7cj1vLmdldFBhdGgoKSsiLyIrcH1lbHNle3I9dGhpcy5pc0xlZ2FjeVN5bnRheCgpPyIvIitwOnVuZGVmaW5lZH19cmV0dXJuIHJ9O2MucHJvdG90eXBlLmlzTGlzdD1mdW5jdGlvbihwLG8pe3JldHVybiBmYWxzZX07cmV0dXJuIGN9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuYXBwLk1vY2tTZXJ2ZXInKSl7DQovKg0KICogU0FQIFVJIGRldmVsb3BtZW50IHRvb2xraXQgZm9yIEhUTUw1IChTQVBVSTUvT3BlblVJNSkNCiAqIChjKSBDb3B5cmlnaHQgMjAwOS0yMDE0IFNBUCBTRSBvciBhbiBTQVAgYWZmaWxpYXRlIGNvbXBhbnkuIA0KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAtIHNlZSBMSUNFTlNFLnR4dC4NCiAqLw0KalF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuYXBwLk1vY2tTZXJ2ZXInKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvYXBwL01vY2tTZXJ2ZXIiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvY29yZS91dGlsL01vY2tTZXJ2ZXInXSxmdW5jdGlvbihxLE0peyJ1c2Ugc3RyaWN0Ijt2YXIgYT1NO3JldHVybiBhfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUudG1wbC5IYW5kbGViYXJzVGVtcGxhdGUnKSl7DQovKiENCiAqIFNBUCBVSSBkZXZlbG9wbWVudCB0b29sa2l0IGZvciBIVE1MNSAoU0FQVUk1L09wZW5VSTUpDQogKiAoYykgQ29weXJpZ2h0IDIwMDktMjAxNCBTQVAgU0Ugb3IgYW4gU0FQIGFmZmlsaWF0ZSBjb21wYW55LiANCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgLSBzZWUgTElDRU5TRS50eHQuDQogKi8NCmpRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUudG1wbC5IYW5kbGViYXJzVGVtcGxhdGUnKTtqUXVlcnkuc2FwLnJlcXVpcmUoJ3NhcC51aS50aGlyZHBhcnR5LmhhbmRsZWJhcnMnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS90bXBsL0hhbmRsZWJhcnNUZW1wbGF0ZSIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ3NhcC91aS9jb3JlL1JlbmRlck1hbmFnZXInLCcuL1RlbXBsYXRlJywnc2FwL3VpL3RoaXJkcGFydHkvaGFuZGxlYmFycyddLGZ1bmN0aW9uKHEsUixULGgpeyJ1c2Ugc3RyaWN0Ijt2YXIgSD1ULmV4dGVuZCgic2FwLnVpLmNvcmUudG1wbC5IYW5kbGViYXJzVGVtcGxhdGUiLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbihpLHMpe1QuYXBwbHkodGhpcyxhcmd1bWVudHMpfX0pO1QucmVnaXN0ZXJUeXBlKCJ0ZXh0L3gtaGFuZGxlYmFycy10ZW1wbGF0ZSIsInNhcC51aS5jb3JlLnRtcGwuSGFuZGxlYmFyc1RlbXBsYXRlIik7SC5SRU5ERVJfSEVMUEVSUz0oZnVuY3Rpb24oKXt2YXIgZT1IYW5kbGViYXJzLmhlbHBlcnNbImVhY2giXSx3PUhhbmRsZWJhcnMuaGVscGVyc1sid2l0aCJdLEk9SGFuZGxlYmFycy5oZWxwZXJzWyJpZiJdLHU9SGFuZGxlYmFycy5oZWxwZXJzWyJ1bmxlc3MiXSxwPVQucGFyc2VQYXRoLHI9bmV3IFIoKTtyLnJlbmRlckNvbnRyb2w9ZnVuY3Rpb24oYyl7dGhpcy53cml0ZUNvbnRyb2xEYXRhKGMpO3RoaXMud3JpdGVDbGFzc2VzKGMpO3RoaXMud3JpdGVTdHlsZXMoYyl9O3ZhciBvPXsiZWFjaCI6ZnVuY3Rpb24oYyxhKXthPWF8fGM7aWYoIWEuaGFzaC5wYXRoKXtyZXR1cm4gZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9ZWxzZXt2YXIgYj1hLmRhdGEucmVuZGVyTWFuYWdlcixkPWEuZGF0YS5yb290Q29udHJvbCxQPWEuZGF0YS5wYXRoLGY9YS5kYXRhLnBhcmVudENvbnRyb2wscz0ocS5zYXAuc3RhcnRzV2l0aChhLmhhc2gucGF0aCwiLyIpPyIiOihQfHwiIikpK2EuaGFzaC5wYXRoLGc9ZC5iaW5kTGlzdChzKSxpPVtdLGo7aWYoYS5kYXRhKXtqPUhhbmRsZWJhcnMuY3JlYXRlRnJhbWUoYS5kYXRhKX1pZihnKXtxLmVhY2goZyxmdW5jdGlvbihrLHYpe2lmKGope2oucmVuZGVyTWFuYWdlcj1iO2oucm9vdENvbnRyb2w9ZDtqLnBhdGg9cysiLyIraysiLyI7ai5wYXJlbnRDb250cm9sPWZ9aS5wdXNoKGEuZm4oe30se2RhdGE6an0pKX0pfWlmKCFmKXtyZXR1cm4gbmV3IEhhbmRsZWJhcnMuU2FmZVN0cmluZyhpLmpvaW4oIiIpKX19fSwid2l0aCI6ZnVuY3Rpb24oYyxhKXthPWF8fGM7aWYoIWEuaGFzaC5wYXRoKXtyZXR1cm4gdy5hcHBseSh0aGlzLGFyZ3VtZW50cyl9ZWxzZXt9fSwiaWYiOmZ1bmN0aW9uKGMsYSl7YT1hfHxjO2lmKCFhLmhhc2gucGF0aCl7cmV0dXJuIEkuYXBwbHkodGhpcyxhcmd1bWVudHMpfWVsc2V7fX0sInVubGVzcyI6ZnVuY3Rpb24oYyxhKXthPWF8fGM7aWYoIWEuaGFzaC5wYXRoKXtyZXR1cm4gdS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9ZWxzZXt9fSwidGV4dCI6ZnVuY3Rpb24oYyxhKXthPWF8fGM7dmFyIGI9YS5kYXRhLnJvb3RDb250cm9sLFA9YS5kYXRhLnBhdGgscz0ocS5zYXAuc3RhcnRzV2l0aChhLmhhc2gucGF0aCwiLyIpPyIiOihQfHwiIikpK2EuaGFzaC5wYXRoO2lmKHMpe3ZhciB2PWIuYmluZFByb3Aocyk7cmV0dXJuIHYmJm5ldyBIYW5kbGViYXJzLlNhZmVTdHJpbmcodil9ZWxzZXt0aHJvdyBuZXcgRXJyb3IoIlRoZSBleHByZXNzaW9uIFwidGV4dFwiIHJlcXVpcmVzIHRoZSBvcHRpb24gXCJwYXRoXCIhIil9fSwiZWxlbWVudCI6ZnVuY3Rpb24oYyxhKXthPWF8fGM7dmFyIGI9YS5kYXRhLnJlbmRlck1hbmFnZXIsZD1hLmRhdGEucm9vdENvbnRyb2wsRT1kLmNyZWF0ZURPTUVsZW1lbnQoYS5oYXNoLGEuZGF0YS5wYXRoKSxQPWEuZGF0YS5wYXJlbnRFbGVtZW50O2lmKGEuZm4pe3ZhciBDPWEuZm4oe30se2RhdGE6e3JlbmRlck1hbmFnZXI6Yixyb290Q29udHJvbDpkLHBhcmVudEVsZW1lbnQ6RX19KX1pZihQKXtQLmFkZEVsZW1lbnQoRSk7cmV0dXJufXJldHVybiBuZXcgSGFuZGxlYmFycy5TYWZlU3RyaW5nKGIuZ2V0SFRNTChFKSl9LCJjb250cm9sIjpmdW5jdGlvbihjLGEpe2E9YXx8Yzt2YXIgYj1hLmRhdGEucmVuZGVyTWFuYWdlcixDPWEuZGF0YS5jb250cm9sO2lmKEMpe3JldHVybiBuZXcgSGFuZGxlYmFycy5TYWZlU3RyaW5nKGIuZ2V0SFRNTChDKSl9dmFyIGQ9YS5kYXRhLnJvb3RDb250cm9sLFA9YS5kYXRhLnBhdGgsbT1hLmRhdGEuY2hpbGRyZW4sdD1hLmhhc2hbInNhcC11aS10eXBlIl0sTT1xLnNhcC5nZXRPYmplY3QodCkuZ2V0TWV0YWRhdGEoKSxEPWEuaGFzaFsic2FwLXVpLWRlZmF1bHQtYWdncmVnYXRpb24iXXx8TS5nZXREZWZhdWx0QWdncmVnYXRpb25OYW1lKCksdj1hLmRhdGEudmlldzt2YXIgZj17fTtpZihhLmZuKXthLmZuKHt9LHtkYXRhOntyb290Q29udHJvbDpkLHBhdGg6UCxjaGlsZHJlbjpmLGRlZmF1bHRBZ2dyZWdhdGlvbjpELHZpZXc6dn19KX12YXIgcz1xLmV4dGVuZCh7fSxhLmhhc2gpO3EuZWFjaChzLGZ1bmN0aW9uKGssVil7aWYoZltrXSl7ZGVsZXRlIHNba119fSk7dmFyIG49ZC5jcmVhdGVDb250cm9sKHMsYS5kYXRhLnBhdGgsISFtLHYpO2lmKCFxLmlzRW1wdHlPYmplY3QoZikpe3M9YS5oYXNoO3ZhciBBPU0uZ2V0QWxsQWdncmVnYXRpb25zKCk7cS5lYWNoKGYsZnVuY3Rpb24oZyxqKXtmb3IodmFyIGk9MCxsPWoubGVuZ3RoO2k8bDtpKyspe3ZhciBrPWpbaV0seD1BW2ddLHk9eCYmeC5tdWx0aXBsZTtpZih0eXBlb2Ygc1tnXT09PSJzdHJpbmciKXt2YXIgQj1zYXAudWkuYmFzZS5NYW5hZ2VkT2JqZWN0LmJpbmRpbmdQYXJzZXIoc1tnXSx2JiZ2LmdldENvbnRyb2xsZXIoKSk7Qi50ZW1wbGF0ZT1rO24uYmluZEFnZ3JlZ2F0aW9uKGcsQil9ZWxzZXtpZih5KXtuLmFkZEFnZ3JlZ2F0aW9uKGcsayl9ZWxzZXtuLnNldEFnZ3JlZ2F0aW9uKGcsayl9fX19KX1pZihtKXt2YXIgZz1hLmhhc2hbInNhcC11aS1hZ2dyZWdhdGlvbiJdfHxhLmRhdGEuZGVmYXVsdEFnZ3JlZ2F0aW9uO21bZ109bVtnXXx8W107bVtnXS5wdXNoKG4pO3JldHVybn1yZXR1cm4gbmV3IEhhbmRsZWJhcnMuU2FmZVN0cmluZyhiLmdldEhUTUwobikpfSwicHJvcGVydHkiOmZ1bmN0aW9uKGMsYSl7YT1hfHxjO3ZhciBiPWEuZGF0YS5yb290Q29udHJvbCxtPWIuZ2V0TWV0YWRhdGEoKSxQPWEuaGFzaC5uYW1lLGc9bS5nZXRBbGxQcm9wZXJ0aWVzKClbUF0uX3NHZXR0ZXI7cmV0dXJuIGJbZ10oKX0sImFnZ3JlZ2F0aW9uIjpmdW5jdGlvbihjLGEpe2E9YXx8Yzt2YXIgYj1hLmRhdGEucmVuZGVyTWFuYWdlcixkPWEuZGF0YS5yb290Q29udHJvbCxtPWQuZ2V0TWV0YWRhdGEoKSxBPWEuaGFzaC5uYW1lLGc9bS5nZXRBbGxBZ2dyZWdhdGlvbnMoKVtBXS5fc0dldHRlcixmPVtdO3ZhciBDPWRbZ10oKTtpZihDKXtmb3IodmFyIGk9MCxsPUMubGVuZ3RoO2k8bDtpKyspe2lmKGEuZm4pe2YucHVzaChhLmZuKHt9LHtkYXRhOntyZW5kZXJNYW5hZ2VyOmIscm9vdENvbnRyb2w6ZCxjb250cm9sOkNbaV19fSkpfWVsc2V7Zi5wdXNoKGIuZ2V0SFRNTChDW2ldKSl9fX1yZXR1cm4gbmV3IEhhbmRsZWJhcnMuU2FmZVN0cmluZyhmLmpvaW4oIiIpKX0sImV2ZW50IjpmdW5jdGlvbihjLGEpe2E9YXx8Y30sImNvbnRyb2xEYXRhIjpmdW5jdGlvbihjLGEpe2E9YXx8Yzt2YXIgYj1hLmRhdGEucm9vdENvbnRyb2w7cmV0dXJuIG5ldyBIYW5kbGViYXJzLlNhZmVTdHJpbmcoci5nZXRIVE1MKGIpKX19O3JldHVybiBvfSgpKTtILnByb3RvdHlwZS5jcmVhdGVNZXRhZGF0YT1mdW5jdGlvbigpe3ZhciB0PXRoaXMuZ2V0Q29udGVudCgpLGY9dGhpcy5fZm5UZW1wbGF0ZT10aGlzLl9mblRlbXBsYXRlfHxIYW5kbGViYXJzLmNvbXBpbGUodCk7dmFyIG09e30saj1zYXAudWkuY29yZS50bXBsLlRlbXBsYXRlQ29udHJvbC5nZXRNZXRhZGF0YSgpLmdldEpTT05LZXlzKCkscD1zYXAudWkuY29yZS50bXBsLlRlbXBsYXRlQ29udHJvbC5nZXRNZXRhZGF0YSgpLmdldEFsbFByaXZhdGVBZ2dyZWdhdGlvbnMoKTt2YXIgbz17InByb3BlcnR5IjpmdW5jdGlvbihjLGEpe2E9YXx8Yzt2YXIgbj1hLmhhc2gubmFtZTtpZihuJiZuIT09ImlkIiYmIWpbbl0pe20ucHJvcGVydGllcz1tLnByb3BlcnRpZXN8fHt9O20ucHJvcGVydGllc1tuXT1xLmV4dGVuZCh7fSx7dHlwZToic3RyaW5nIn0sYS5oYXNoKX1lbHNle3Rocm93IG5ldyBFcnJvcigiVGhlIHByb3BlcnR5IG5hbWUgXCIiK24rIlwiIGlzIHJlc2VydmVkLiIpfX0sImFnZ3JlZ2F0aW9uIjpmdW5jdGlvbihjLGEpe2E9YXx8Yzt2YXIgbj1hLmhhc2gubmFtZTtpZihuJiYhaltuXSYmIXBbbl0pe2EuaGFzaC5tdWx0aXBsZT1hLmhhc2gubXVsdGlwbGU9PSJ0cnVlIjttLmFnZ3JlZ2F0aW9ucz1tLmFnZ3JlZ2F0aW9uc3x8e307bS5hZ2dyZWdhdGlvbnNbbl09cS5leHRlbmQoe30sYS5oYXNoKX1lbHNle3Rocm93IG5ldyBFcnJvcigiVGhlIGFnZ3JlZ2F0aW9uIG5hbWUgXCIiK24rIlwiIGlzIHJlc2VydmVkLiIpfX0sImV2ZW50IjpmdW5jdGlvbihjLGEpe2E9YXx8Y30sImNvbnRyb2xEYXRhIjpmdW5jdGlvbihjLGEpe2E9YXx8YzttLl9oYXNDb250cm9sRGF0YT10cnVlfX07cS5lYWNoKFsiZWFjaCIsImlmIiwidW5sZXNzIiwid2l0aCJdLGZ1bmN0aW9uKGksdil7b1t2XT1mdW5jdGlvbigpe319KTtmKHt9LHtoZWxwZXJzOm99KTtyZXR1cm4gbX07SC5wcm90b3R5cGUuY3JlYXRlUmVuZGVyZXI9ZnVuY3Rpb24odil7dmFyIHQ9dGhpcy5nZXRDb250ZW50KCksZj10aGlzLl9mblRlbXBsYXRlPXRoaXMuX2ZuVGVtcGxhdGV8fEhhbmRsZWJhcnMuY29tcGlsZSh0KTt2YXIgcj1mdW5jdGlvbihhLGMpe3ZhciBzPWYoYy5nZXRDb250ZXh0KCl8fHt9LHtkYXRhOntyZW5kZXJNYW5hZ2VyOmEscm9vdENvbnRyb2w6Yyx2aWV3OnZ9LGhlbHBlcnM6SC5SRU5ERVJfSEVMUEVSU30pO2Eud3JpdGUocyl9O3JldHVybiByfTtyZXR1cm4gSH0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLkNvcmUnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS5Db3JlJyk7aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUuQ29tcG9uZW50Jykpew0KLyoNCiAqIFNBUCBVSSBkZXZlbG9wbWVudCB0b29sa2l0IGZvciBIVE1MNSAoU0FQVUk1L09wZW5VSTUpDQogKiAoYykgQ29weXJpZ2h0IDIwMDktMjAxNCBTQVAgU0Ugb3IgYW4gU0FQIGFmZmlsaWF0ZSBjb21wYW55LiANCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgLSBzZWUgTElDRU5TRS50eHQuDQogKi8NCmpRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUuQ29tcG9uZW50Jyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvQ29tcG9uZW50IixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL2Jhc2UvTWFuYWdlZE9iamVjdCcsJy4vQ29tcG9uZW50TWV0YWRhdGEnLCcuL0NvcmUnXSxmdW5jdGlvbihxLE0sQyxhKXsidXNlIHN0cmljdCI7dmFyIGI9TS5leHRlbmQoInNhcC51aS5jb3JlLkNvbXBvbmVudCIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKGkscyl7TS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LG1ldGFkYXRhOntzdGVyZW90eXBlOiJjb21wb25lbnQiLCJhYnN0cmFjdCI6dHJ1ZSx2ZXJzaW9uOiIwLjAiLGluY2x1ZGVzOltdLGRlcGVuZGVuY2llczp7bGliczpbXSxjb21wb25lbnRzOltdLHVpNXZlcnNpb246IiJ9LGNvbmZpZzp7fSxjdXN0b21pemluZzp7fSxsaWJyYXJ5OiJzYXAudWkuY29yZSJ9fSxDKTtiLmFjdGl2YXRlQ3VzdG9taXppbmc9ZnVuY3Rpb24oYyl7fTtiLmRlYWN0aXZhdGVDdXN0b21pemluZz1mdW5jdGlvbihjKXt9O2IuZ2V0T3duZXJJZEZvcj1mdW5jdGlvbihvKXtpZihvJiYobyBpbnN0YW5jZW9mIGJ8fG8gaW5zdGFuY2VvZiBzYXAudWkuY29yZS5tdmMuVmlldykpe3JldHVybiBNLmdldE93bmVySWRGb3Iobyl9fTtiLnByb3RvdHlwZS5nZXRJbnRlcmZhY2U9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc307Yi5wcm90b3R5cGUuX2luaXRDb21wb3NpdGVTdXBwb3J0PWZ1bmN0aW9uKHMpe3RoaXMuX21Nb2NrU2VydmVycz17fTt0aGlzLmdldE1ldGFkYXRhKCkub25Jbml0Q29tcG9uZW50KCk7dGhpcy5vQ29tcG9uZW50RGF0YT1zJiZzLmNvbXBvbmVudERhdGE7dGhpcy5nZXRNZXRhZGF0YSgpLmluaXQoKTt0aGlzLmluaXRDb21wb25lbnRNb2RlbHMoKTtpZih0aGlzLm9uV2luZG93RXJyb3Ipe3RoaXMuX2ZuV2luZG93RXJyb3JIYW5kbGVyPXEucHJveHkoZnVuY3Rpb24oZSl7dmFyIEU9ZS5vcmlnaW5hbEV2ZW50O3RoaXMub25XaW5kb3dFcnJvcihFLm1lc3NhZ2UsRS5maWxlbmFtZSxFLmxpbmVubyl9LHRoaXMpO3Eod2luZG93KS5iaW5kKCJlcnJvciIsdGhpcy5fZm5XaW5kb3dFcnJvckhhbmRsZXIpfWlmKHRoaXMub25XaW5kb3dCZWZvcmVVbmxvYWQpe3RoaXMuX2ZuV2luZG93QmVmb3JlVW5sb2FkSGFuZGxlcj1xLnByb3h5KHRoaXMub25XaW5kb3dCZWZvcmVVbmxvYWQsdGhpcyk7cSh3aW5kb3cpLmJpbmQoImJlZm9yZXVubG9hZCIsdGhpcy5fZm5XaW5kb3dCZWZvcmVVbmxvYWRIYW5kbGVyKX1pZih0aGlzLm9uV2luZG93VW5sb2FkKXt0aGlzLl9mbldpbmRvd1VubG9hZEhhbmRsZXI9cS5wcm94eSh0aGlzLm9uV2luZG93VW5sb2FkLHRoaXMpO3Eod2luZG93KS5iaW5kKCJ1bmxvYWQiLHRoaXMuX2ZuV2luZG93VW5sb2FkSGFuZGxlcil9fTtiLnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKCl7aWYodGhpcy5fbU1vY2tTZXJ2ZXJzKXtxLmVhY2godGhpcy5fbU1vY2tTZXJ2ZXJzLGZ1bmN0aW9uKG4sbSl7bS5zdG9wKCl9KTtkZWxldGUgdGhpcy5fbU1vY2tTZXJ2ZXJzfWlmKHRoaXMuX2ZuV2luZG93RXJyb3JIYW5kbGVyKXtxKHdpbmRvdykudW5iaW5kKCJlcnJvciIsdGhpcy5fZm5XaW5kb3dFcnJvckhhbmRsZXIpO2RlbGV0ZSB0aGlzLl9mbldpbmRvd0Vycm9ySGFuZGxlcn1pZih0aGlzLl9mbldpbmRvd0JlZm9yZVVubG9hZEhhbmRsZXIpe3Eod2luZG93KS51bmJpbmQoImJlZm9yZXVubG9hZCIsdGhpcy5fZm5XaW5kb3dCZWZvcmVVbmxvYWRIYW5kbGVyKTtkZWxldGUgdGhpcy5fZm5XaW5kb3dCZWZvcmVVbmxvYWRIYW5kbGVyfWlmKHRoaXMuX2ZuV2luZG93VW5sb2FkSGFuZGxlcil7cSh3aW5kb3cpLnVuYmluZCgidW5sb2FkIix0aGlzLl9mbldpbmRvd1VubG9hZEhhbmRsZXIpO2RlbGV0ZSB0aGlzLl9mbldpbmRvd1VubG9hZEhhbmRsZXJ9aWYodGhpcy5fb0V2ZW50QnVzKXt0aGlzLl9vRXZlbnRCdXMuZGVzdHJveSgpO2RlbGV0ZSB0aGlzLl9vRXZlbnRCdXN9TS5wcm90b3R5cGUuZGVzdHJveS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5nZXRNZXRhZGF0YSgpLm9uRXhpdENvbXBvbmVudCgpfTtiLnByb3RvdHlwZS5nZXRDb21wb25lbnREYXRhPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub0NvbXBvbmVudERhdGF9O2IucHJvdG90eXBlLmdldEV2ZW50QnVzPWZ1bmN0aW9uKCl7aWYoIXRoaXMuX29FdmVudEJ1cyl7cS5zYXAucmVxdWlyZSgic2FwLnVpLmNvcmUuRXZlbnRCdXMiKTt0aGlzLl9vRXZlbnRCdXM9bmV3IHNhcC51aS5jb3JlLkV2ZW50QnVzKCl9cmV0dXJuIHRoaXMuX29FdmVudEJ1c307Yi5wcm90b3R5cGUuaW5pdENvbXBvbmVudE1vZGVscz1mdW5jdGlvbihtLHMpe3ZhciBvPXRoaXMuZ2V0TWV0YWRhdGEoKTt2YXIgYz1tfHxvLmdldE1vZGVscygpLFM9c3x8by5nZXRTZXJ2aWNlcygpO2lmKGMpe3ZhciBmPWZ1bmN0aW9uKG4sdSxlLGcpe2lmKHRoaXMuX21Nb2NrU2VydmVyc1tuXSl7dGhpcy5fbU1vY2tTZXJ2ZXJzW25dLnN0b3AoKX1xLnNhcC5yZXF1aXJlKCJzYXAudWkuY29yZS51dGlsLk1vY2tTZXJ2ZXIiKTt0aGlzLl9tTW9ja1NlcnZlcnNbbl09bmV3IHNhcC51aS5jb3JlLnV0aWwuTW9ja1NlcnZlcih7cm9vdFVyaTp1fSk7dGhpcy5fbU1vY2tTZXJ2ZXJzW25dLnNpbXVsYXRlKGUsZyk7dGhpcy5fbU1vY2tTZXJ2ZXJzW25dLnN0YXJ0KCl9O3ZhciBkPWZ1bmN0aW9uKG4sZSl7dmFyIHU9ZS51cmksVD1lLnR5cGU7cS5zYXAucmVxdWlyZShUKTt2YXIgZz1xLnNhcC5nZXRPYmplY3QoVCk7dmFyIGg7aWYoVD09PSJzYXAudWkubW9kZWwucmVzb3VyY2UuUmVzb3VyY2VNb2RlbCIpe2g9bmV3IGcoe2J1bmRsZVVybDp1fSl9ZWxzZSBpZihUPT09InNhcC51aS5tb2RlbC5vZGF0YS5PRGF0YU1vZGVsIil7aWYoZS5tb2Nrc2VydmVyKXtmLmNhbGwodGhpcyxuLHUsZS5tb2Nrc2VydmVyLm1vZGVsLGUubW9ja3NlcnZlci5kYXRhKX1oPW5ldyBnKHUsZS5zZXR0aW5ncyl9ZWxzZSBpZihUPT09InNhcC51aS5tb2RlbC5qc29uLkpTT05Nb2RlbCJ8fFQ9PT0ic2FwLnVpLm1vZGVsLnhtbC5YTUxNb2RlbCIpe2g9bmV3IGcoKTtpZih1KXtoLmxvYWREYXRhKHUpfX1yZXR1cm4gaH07dmFyIHQ9dGhpcztxLmVhY2goYyxmdW5jdGlvbihrLGUpe3ZhciBnPWUuc2VydmljZSxoO2lmKGcpe3ZhciBpPVNbZ107aD1kLmNhbGwodCxrLGkpfWVsc2UgaWYoZS50eXBlKXtoPWQuY2FsbCh0LGssZSl9aWYoaCl7dC5zZXRNb2RlbChoLGt8fHVuZGVmaW5lZCl9fSl9fTtzYXAudWkuY29tcG9uZW50PWZ1bmN0aW9uKGMpe2lmKCFjKXt0aHJvdyBuZXcgRXJyb3IoInNhcC51aS5jb21wb25lbnQgY2Fubm90IGJlIGNhbGxlZCB3aXRob3V0IHBhcmFtZXRlciEiKX1pZih0eXBlb2YgYz09PSJzdHJpbmciKXtyZXR1cm4gc2FwLnVpLmdldENvcmUoKS5nZXRDb21wb25lbnQoYyl9ZWxzZXt2YXIgbj1jLm5hbWUsaT1jLmlkLG89Yy5jb21wb25lbnREYXRhLHM9bisiLkNvbXBvbmVudCIsUz1jLnNldHRpbmdzO3ZhciBkPXNhcC51aS5jb21wb25lbnQubG9hZChjLHRydWUpO3ZhciBJPW5ldyBkKHEuZXh0ZW5kKHt9LFMse2lkOmksY29tcG9uZW50RGF0YTpvfSkpO3Euc2FwLmxvZy5pbmZvKCJDb21wb25lbnQgaW5zdGFuY2UgSWQgPSAiK0kuZ2V0SWQoKSk7cmV0dXJuIEl9fTtzYXAudWkuY29tcG9uZW50LmxvYWQ9ZnVuY3Rpb24oYyxmKXt2YXIgbj1jLm5hbWUsdT1jLnVybCxzPW4rIi5Db21wb25lbnQiLHA9cysiLXByZWxvYWQiLFA9c2FwLnVpLmdldENvcmUoKS5nZXRDb25maWd1cmF0aW9uKCkuZ2V0Q29tcG9uZW50UHJlbG9hZCgpO2lmKCFuKXt0aHJvdyBuZXcgRXJyb3IoIlRoZSBuYW1lIG9mIHRoZSBjb21wb25lbnQgaXMgdW5kZWZpbmVkLiIpfWlmKHUpe3Euc2FwLnJlZ2lzdGVyTW9kdWxlUGF0aChuLHUpfWlmKFA9PT0ic3luYyJ8fFA9PT0iYXN5bmMiKXt0cnl7aWYoIXEuc2FwLmlzRGVjbGFyZWQocyx0cnVlKSl7cS5zYXAucmVxdWlyZShwKX19Y2F0Y2goZSl7cS5zYXAubG9nLndhcm5pbmcoImNvdWxkbid0IHByZWxvYWQgY29tcG9uZW50IGZyb20gIitwKyI6ICIrKChlJiZlLm1lc3NhZ2UpfHxlKSl9fXEuc2FwLnJlcXVpcmUocyk7dmFyIG89cS5zYXAuZ2V0T2JqZWN0KHMpO2lmKCFvKXtpZihmKXt0aHJvdyBuZXcgRXJyb3IoIlRoZSBzcGVjaWZpZWQgY29tcG9uZW50IGNvbnRyb2xsZXJcIiIrcysiXCIgY291bGQgbm90IGJlIGZvdW5kISIpfWVsc2V7cS5zYXAubG9nLndhcm5pbmcoIlRoZSBzcGVjaWZpZWQgY29tcG9uZW50IGNvbnRyb2xsZXIgXCIiK3MrIlwiIGNvdWxkIG5vdCBiZSBmb3VuZCEiKX19cmV0dXJuIG99O3JldHVybiBifSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUuQ29udHJvbCcpKXsNCi8qIQ0KICogU0FQIFVJIGRldmVsb3BtZW50IHRvb2xraXQgZm9yIEhUTUw1IChTQVBVSTUvT3BlblVJNSkNCiAqIChjKSBDb3B5cmlnaHQgMjAwOS0yMDE0IFNBUCBTRSBvciBhbiBTQVAgYWZmaWxpYXRlIGNvbXBhbnkuIA0KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAtIHNlZSBMSUNFTlNFLnR4dC4NCiAqLw0KalF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS5Db250cm9sJyk7aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUuQ3VzdG9tU3R5bGVDbGFzc1N1cHBvcnQnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS5DdXN0b21TdHlsZUNsYXNzU3VwcG9ydCcpO2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLkVsZW1lbnQnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS5FbGVtZW50Jyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvRWxlbWVudCIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ3NhcC91aS9iYXNlL01hbmFnZWRPYmplY3QnLCcuL0NvcmUnLCcuL0VsZW1lbnRNZXRhZGF0YScsJ3NhcC91aS9tb2RlbC9TaW1wbGVUeXBlJywnanF1ZXJ5LnNhcC5zdHJpbmdzJ10sZnVuY3Rpb24ocSxNLEMsRSxTKXsidXNlIHN0cmljdCI7dmFyIGE9TS5leHRlbmQoInNhcC51aS5jb3JlLkVsZW1lbnQiLHttZXRhZGF0YTp7c3RlcmVvdHlwZToiZWxlbWVudCIsImFic3RyYWN0Ijp0cnVlLHB1YmxpY01ldGhvZHM6WyJnZXRJZCIsImdldE1ldGFkYXRhIiwiZ2V0VG9vbHRpcF9Bc1N0cmluZyIsImdldFRvb2x0aXBfVGV4dCIsImdldE1vZGVsIiwic2V0TW9kZWwiLCJoYXNNb2RlbCIsImJpbmRFbGVtZW50IiwidW5iaW5kRWxlbWVudCIsImdldEVsZW1lbnRCaW5kaW5nIiwicHJvcCIsImdldExheW91dERhdGEiLCJzZXRMYXlvdXREYXRhIl0sbGlicmFyeToic2FwLnVpLmNvcmUiLHByb3BlcnRpZXM6e30sYWdncmVnYXRpb25zOnt0b29sdGlwOntuYW1lOiJ0b29sdGlwIix0eXBlOiJzYXAudWkuY29yZS5Ub29sdGlwQmFzZSIsYWx0VHlwZXM6WyJzdHJpbmciXSxtdWx0aXBsZTpmYWxzZX0sY3VzdG9tRGF0YTp7bmFtZToiY3VzdG9tRGF0YSIsdHlwZToic2FwLnVpLmNvcmUuQ3VzdG9tRGF0YSIsbXVsdGlwbGU6dHJ1ZSxzaW5ndWxhck5hbWU6ImN1c3RvbURhdGEifSxsYXlvdXREYXRhOntuYW1lOiJsYXlvdXREYXRhIix0eXBlOiJzYXAudWkuY29yZS5MYXlvdXREYXRhIixtdWx0aXBsZTpmYWxzZSxzaW5ndWxhck5hbWU6ImxheW91dERhdGEifSxkZXBlbmRlbnRzOntuYW1lOiJkZXBlbmRlbnRzIix0eXBlOiJzYXAudWkuY29yZS5Db250cm9sIixtdWx0aXBsZTp0cnVlfX0sYXNzb2NpYXRpb25zOnt9LGV2ZW50czp7fX0sY29uc3RydWN0b3I6ZnVuY3Rpb24oaSxzKXtNLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0scmVuZGVyZXI6bnVsbH0sRSk7YS5kZWZpbmVDbGFzcz1mdW5jdGlvbihjLHMsbSl7cmV0dXJuIHNhcC51aS5iYXNlLk9iamVjdC5kZWZpbmVDbGFzcyhjLHMsbXx8RSl9O2EucHJvdG90eXBlLmdldEludGVyZmFjZT1mdW5jdGlvbigpe3JldHVybiB0aGlzfTthLnByb3RvdHlwZS5faGFuZGxlRXZlbnQ9ZnVuY3Rpb24oZSl7dmFyIGg9Im9uIitlLnR5cGU7dGhpcy5fY2FsbEV2ZW50SGFuZGxlcyh0aGlzLmFCZWZvcmVEZWxlZ2F0ZXMuc2xpY2UoMCksaCxlLHRydWUpO3RoaXMuX2NhbGxFdmVudEhhbmRsZXMoW3RoaXNdLGgsZSk7dGhpcy5fY2FsbEV2ZW50SGFuZGxlcyh0aGlzLmFEZWxlZ2F0ZXMuc2xpY2UoMCksaCxlLHRydWUpfTthLnByb3RvdHlwZS5fY2FsbEV2ZW50SGFuZGxlcz1mdW5jdGlvbihoLEgsZSxkKXtpZihoLmxlbmd0aD4wKXtmb3IodmFyIGk9MDtpPGgubGVuZ3RoO2krKyl7aWYoZS5pc0ltbWVkaWF0ZUhhbmRsZXJQcm9wYWdhdGlvblN0b3BwZWQoKSl7YnJlYWt9dmFyIG89ZD9oW2ldLm9EZWxlZ2F0ZTpoW2ldO3ZhciB0PShkJiZoW2ldLnZUaGlzKT9oW2ldLnZUaGlzOm87aWYodD09PXRydWUpe3Q9dGhpc31pZihvW0hdKXtvW0hdLmNhbGwodCxlKX19fX07YS5jcmVhdGU9ZnVuY3Rpb24oZCxrKXtpZighZHx8ZCBpbnN0YW5jZW9mIGF8fHR5cGVvZiBkIT09Im9iamVjdCJ8fGQgaW5zdGFuY2VvZiBTdHJpbmcpe3JldHVybiBkfWZ1bmN0aW9uIGcodCl7aWYodHlwZW9mIHQ9PT0iZnVuY3Rpb24iKXtyZXR1cm4gdH1pZih0eXBlb2YgdD09PSJzdHJpbmciKXtyZXR1cm4gcS5zYXAuZ2V0T2JqZWN0KHQpfX12YXIgYz1nKGQuVHlwZSl8fGcoayYmay50eXBlKTtpZih0eXBlb2YgYz09PSJmdW5jdGlvbiIpe3JldHVybiBuZXcgYyhkKX12YXIgbT0iRG9uJ3Qga25vdyBob3cgdG8gY3JlYXRlIGFuIEVsZW1lbnQgZnJvbSAiK2QrIiAoIisodHlwZW9mIGQpKyIpIjtxLnNhcC5sb2cuZmF0YWwobSk7dGhyb3cgbmV3IEVycm9yKG0pfTthLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe2lmKHRoaXMuZ2V0TWV0YWRhdGEpe3JldHVybiJFbGVtZW50ICIrdGhpcy5nZXRNZXRhZGF0YSgpLmdldE5hbWUoKSsiIyIrdGhpcy5zSWR9ZWxzZXtyZXR1cm4iRWxlbWVudCB7dW5rbm93biBjbGFzc30jIit0aGlzLnNJZH19O2EucHJvdG90eXBlLmdldERvbVJlZj1mdW5jdGlvbihzKXtyZXR1cm4gcS5zYXAuZG9tQnlJZChzP3RoaXMuZ2V0SWQoKSsiLSIrczp0aGlzLmdldElkKCkpfTthLnByb3RvdHlwZS4kPWZ1bmN0aW9uKHMpe3JldHVybiBxKHRoaXMuZ2V0RG9tUmVmKHMpKX07YS5wcm90b3R5cGUuaXNBY3RpdmU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vUGFyZW50JiZ0aGlzLm9QYXJlbnQuaXNBY3RpdmUoKX07YS5wcm90b3R5cGUucHJvcD1mdW5jdGlvbihwLHYpe3ZhciBQPXRoaXMuZ2V0TWV0YWRhdGEoKS5nZXRKU09OS2V5cygpW3BdO2lmKFApe2lmKGFyZ3VtZW50cy5sZW5ndGg9PTEpe3JldHVybiB0aGlzW1AuX3NHZXR0ZXJdKCl9ZWxzZXt0aGlzW1AuX3NNdXRhdG9yXSh2KTtyZXR1cm4gdGhpc319fTthLnByb3RvdHlwZS5pbnNlcnREZXBlbmRlbnQ9ZnVuY3Rpb24oYyxpKXtyZXR1cm4gdGhpcy5pbnNlcnRBZ2dyZWdhdGlvbigiZGVwZW5kZW50cyIsYyxpLHRydWUpfTthLnByb3RvdHlwZS5hZGREZXBlbmRlbnQ9ZnVuY3Rpb24oYyl7cmV0dXJuIHRoaXMuYWRkQWdncmVnYXRpb24oImRlcGVuZGVudHMiLGMsdHJ1ZSl9O2EucHJvdG90eXBlLnJlbW92ZURlcGVuZGVudD1mdW5jdGlvbihjKXtyZXR1cm4gdGhpcy5yZW1vdmVBZ2dyZWdhdGlvbigiZGVwZW5kZW50cyIsYyx0cnVlKX07YS5wcm90b3R5cGUucmVtb3ZlQWxsRGVwZW5kZW50cz1mdW5jdGlvbigpe3JldHVybiB0aGlzLnJlbW92ZUFsbEFnZ3JlZ2F0aW9uKCJkZXBlbmRlbnRzIix0cnVlKX07YS5wcm90b3R5cGUuZGVzdHJveURlcGVuZGVudHM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kZXN0cm95QWdncmVnYXRpb24oImRlcGVuZGVudHMiLHRydWUpfTthLnByb3RvdHlwZS5yZXJlbmRlcj1mdW5jdGlvbigpe2lmKHRoaXMub1BhcmVudCl7dGhpcy5vUGFyZW50LnJlcmVuZGVyKCl9fTthLnByb3RvdHlwZS5nZXRVSUFyZWE9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vUGFyZW50P3RoaXMub1BhcmVudC5nZXRVSUFyZWEoKTpudWxsfTthLnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKHMpe00ucHJvdG90eXBlLmRlc3Ryb3kuY2FsbCh0aGlzLHMpO3RoaXMuJCgpLnJlbW92ZSgpfTthLnByb3RvdHlwZS5maXJlRXZlbnQ9ZnVuY3Rpb24oZSxwKXt2YXIgQT1BcnJheS5wcm90b3R5cGUuc2xpY2UuYXBwbHkoYXJndW1lbnRzKTtBWzFdPXA9cHx8e307cC5pZD1wLmlkfHx0aGlzLmdldElkKCk7cmV0dXJuIHNhcC51aS5iYXNlLkV2ZW50UHJvdmlkZXIucHJvdG90eXBlLmZpcmVFdmVudC5hcHBseSh0aGlzLEEpfTthLnByb3RvdHlwZS5hZGREZWxlZ2F0ZT1mdW5jdGlvbihkLGMsdCxiKXt0aGlzLnJlbW92ZURlbGVnYXRlKGQpO2lmKHR5cGVvZiBjPT09Im9iamVjdCIpe2I9dDt0PWM7Yz1mYWxzZX1pZih0eXBlb2YgdD09PSJib29sZWFuIil7Yj10O3Q9dW5kZWZpbmVkfShjP3RoaXMuYUJlZm9yZURlbGVnYXRlczp0aGlzLmFEZWxlZ2F0ZXMpLnB1c2goe29EZWxlZ2F0ZTpkLGJDbG9uZTohIWIsdlRoaXM6KCh0PT09dGhpcyk/dHJ1ZTp0KX0pO3JldHVybiB0aGlzfTthLnByb3RvdHlwZS5yZW1vdmVEZWxlZ2F0ZT1mdW5jdGlvbihkKXtmb3IodmFyIGk9MDtpPHRoaXMuYURlbGVnYXRlcy5sZW5ndGg7aSsrKXtpZih0aGlzLmFEZWxlZ2F0ZXNbaV0ub0RlbGVnYXRlPT1kKXt0aGlzLmFEZWxlZ2F0ZXMuc3BsaWNlKGksMSl9fWZvcih2YXIgaT0wO2k8dGhpcy5hQmVmb3JlRGVsZWdhdGVzLmxlbmd0aDtpKyspe2lmKHRoaXMuYUJlZm9yZURlbGVnYXRlc1tpXS5vRGVsZWdhdGU9PWQpe3RoaXMuYUJlZm9yZURlbGVnYXRlcy5zcGxpY2UoaSwxKX19cmV0dXJuIHRoaXN9O2EucHJvdG90eXBlLmFkZEV2ZW50RGVsZWdhdGU9ZnVuY3Rpb24oZCx0KXtyZXR1cm4gdGhpcy5hZGREZWxlZ2F0ZShkLGZhbHNlLHQsdHJ1ZSl9O2EucHJvdG90eXBlLnJlbW92ZUV2ZW50RGVsZWdhdGU9ZnVuY3Rpb24oZCl7cmV0dXJuIHRoaXMucmVtb3ZlRGVsZWdhdGUoZCl9O2EucHJvdG90eXBlLmdldEZvY3VzRG9tUmVmPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0RG9tUmVmKCl8fG51bGx9O2EucHJvdG90eXBlLmZvY3VzPWZ1bmN0aW9uKCl7dmFyIGY9dGhpcy5nZXRGb2N1c0RvbVJlZigpO2lmKGYpe3RyeXtmLmZvY3VzKCl9Y2F0Y2goZSl7dmFyIGk9Zi5pZD8iIChpZDogIitmLmlkKyIpIjoiICI7cS5zYXAubG9nLndhcm5pbmcoIkRPTSBlbGVtZW50IitpKyIgaW4gIit0aGlzLnRvU3RyaW5nKCkrIiB3aGljaCBzaG91bGQgYmUgZm9jdXNlZCBjYW5ub3QgYmUgZm9jdXNlZDogIitlLm1lc3NhZ2UpfX19O2EucHJvdG90eXBlLmdldEZvY3VzSW5mbz1mdW5jdGlvbigpe3JldHVybntpZDp0aGlzLmdldElkKCl9fTthLnByb3RvdHlwZS5hcHBseUZvY3VzSW5mbz1mdW5jdGlvbihmKXt0aGlzLmZvY3VzKCk7cmV0dXJuIHRoaXN9O2EucHJvdG90eXBlLl9yZWZyZXNoVG9vbHRpcEJhc2VEZWxlZ2F0ZT1mdW5jdGlvbih0KXt2YXIgbz10aGlzLmdldFRvb2x0aXAoKTtpZihvIGluc3RhbmNlb2Ygc2FwLnVpLmNvcmUuVG9vbHRpcEJhc2Upe3RoaXMucmVtb3ZlRGVsZWdhdGUobyl9aWYodCBpbnN0YW5jZW9mIHNhcC51aS5jb3JlLlRvb2x0aXBCYXNlKXt0Ll9jdXJyZW50Q29udHJvbD10aGlzO3RoaXMuYWRkRGVsZWdhdGUodCl9fTthLnByb3RvdHlwZS5zZXRUb29sdGlwPWZ1bmN0aW9uKHQpe3RoaXMuX3JlZnJlc2hUb29sdGlwQmFzZURlbGVnYXRlKHQpO3RoaXMuc2V0QWdncmVnYXRpb24oInRvb2x0aXAiLHQpO3JldHVybiB0aGlzfTthLnByb3RvdHlwZS5nZXRUb29sdGlwPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0QWdncmVnYXRpb24oInRvb2x0aXAiKX07YS5ydW5XaXRoUHJlcHJvY2Vzc29ycz1NLnJ1bldpdGhQcmVwcm9jZXNzb3JzO2EucHJvdG90eXBlLmdldFRvb2x0aXBfQXNTdHJpbmc9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmdldFRvb2x0aXAoKTtpZih0eXBlb2YgdD09PSJzdHJpbmcifHx0IGluc3RhbmNlb2YgU3RyaW5nKXtyZXR1cm4gdH1yZXR1cm4gdW5kZWZpbmVkfTthLnByb3RvdHlwZS5nZXRUb29sdGlwX1RleHQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmdldFRvb2x0aXAoKTtpZih0JiZ0eXBlb2YgdC5nZXRUZXh0PT09ImZ1bmN0aW9uIil7cmV0dXJuIHQuZ2V0VGV4dCgpfXJldHVybiB0fTsoZnVuY3Rpb24oKXt2YXIgZz1mdW5jdGlvbihlLGspe3ZhciBkPWUuZ2V0QWdncmVnYXRpb24oImN1c3RvbURhdGEiKTtpZihkKXtmb3IodmFyIGk9MDtpPGQubGVuZ3RoO2krKyl7aWYoZFtpXS5nZXRLZXkoKT09ayl7cmV0dXJuIGRbaV19fX1yZXR1cm4gbnVsbH07dmFyIHM9ZnVuY3Rpb24oZSxrLHYsdyl7aWYodj09PW51bGwpe3ZhciBkPWcoZSxrKTtpZighZCl7cmV0dXJufXZhciBiPWUuZ2V0QWdncmVnYXRpb24oImN1c3RvbURhdGEiKS5sZW5ndGg7aWYoYj09MSl7ZS5kZXN0cm95QWdncmVnYXRpb24oImN1c3RvbURhdGEiLHRydWUpfWVsc2V7ZS5yZW1vdmVBZ2dyZWdhdGlvbigiY3VzdG9tRGF0YSIsZCx0cnVlKTtkLmRlc3Ryb3koKX19ZWxzZXt2YXIgZD1nKGUsayk7aWYoZCl7ZC5zZXRWYWx1ZSh2KTtkLnNldFdyaXRlVG9Eb20odyl9ZWxzZXt2YXIgZD1uZXcgc2FwLnVpLmNvcmUuQ3VzdG9tRGF0YSh7a2V5OmssdmFsdWU6dix3cml0ZVRvRG9tOnd9KTtlLmFkZEFnZ3JlZ2F0aW9uKCJjdXN0b21EYXRhIixkLHRydWUpfX19O2EucHJvdG90eXBlLmRhdGE9ZnVuY3Rpb24oKXt2YXIgYj1hcmd1bWVudHMubGVuZ3RoO2lmKGI9PTApe3ZhciBkPXRoaXMuZ2V0QWdncmVnYXRpb24oImN1c3RvbURhdGEiKSxyPXt9O2lmKGQpe2Zvcih2YXIgaT0wO2k8ZC5sZW5ndGg7aSsrKXtyW2RbaV0uZ2V0S2V5KCldPWRbaV0uZ2V0VmFsdWUoKX19cmV0dXJuIHJ9ZWxzZSBpZihiPT0xKXt2YXIgYz1hcmd1bWVudHNbMF07aWYoYz09PW51bGwpe3RoaXMuZGVzdHJveUFnZ3JlZ2F0aW9uKCJjdXN0b21EYXRhIix0cnVlKTtyZXR1cm4gdGhpc31lbHNlIGlmKHR5cGVvZiBjPT0ic3RyaW5nIil7dmFyIGU9Zyh0aGlzLGMpO3JldHVybiBlP2UuZ2V0VmFsdWUoKTpudWxsfWVsc2UgaWYodHlwZW9mIGM9PSJvYmplY3QiKXtmb3IodmFyIGsgaW4gYyl7cyh0aGlzLGssY1trXSl9cmV0dXJuIHRoaXN9ZWxzZXt0aHJvdyBuZXcgRXJyb3IoIldoZW4gZGF0YSgpIGlzIGNhbGxlZCB3aXRoIG9uZSBhcmd1bWVudCwgdGhpcyBhcmd1bWVudCBtdXN0IGJlIGEgc3RyaW5nLCBhbiBvYmplY3Qgb3IgbnVsbCwgYnV0IGlzICIrKHR5cGVvZiBjKSsiOiIrYysiIChvbiBVSSBFbGVtZW50IHdpdGggSUQgJyIrdGhpcy5nZXRJZCgpKyInKSIpfX1lbHNlIGlmKGI9PTIpe3ModGhpcyxhcmd1bWVudHNbMF0sYXJndW1lbnRzWzFdKTtyZXR1cm4gdGhpc31lbHNlIGlmKGI9PTMpe3ModGhpcyxhcmd1bWVudHNbMF0sYXJndW1lbnRzWzFdLGFyZ3VtZW50c1syXSk7cmV0dXJuIHRoaXN9ZWxzZXt0aHJvdyBuZXcgRXJyb3IoImRhdGEoKSBtYXkgb25seSBiZSBjYWxsZWQgd2l0aCAwLTMgYXJndW1lbnRzIChvbiBVSSBFbGVtZW50IHdpdGggSUQgJyIrdGhpcy5nZXRJZCgpKyInKSIpfX19KSgpO2EucHJvdG90eXBlLmNsb25lPWZ1bmN0aW9uKEksbCl7dmFyIGM9TS5wcm90b3R5cGUuY2xvbmUuYXBwbHkodGhpcyxhcmd1bWVudHMpO2Zvcih2YXIgaT0wO2k8dGhpcy5hRGVsZWdhdGVzLmxlbmd0aDtpKyspe2lmKHRoaXMuYURlbGVnYXRlc1tpXS5iQ2xvbmUpe2MuYURlbGVnYXRlcy5wdXNoKHRoaXMuYURlbGVnYXRlc1tpXSl9fWZvcih2YXIgaT0wO2k8dGhpcy5hQmVmb3JlRGVsZWdhdGVzLmxlbmd0aDtpKyspe2lmKHRoaXMuYUJlZm9yZURlbGVnYXRlc1tpXS5iQ2xvbmUpe2MuYUJlZm9yZURlbGVnYXRlcy5wdXNoKHRoaXMuYUJlZm9yZURlbGVnYXRlc1tpXSl9fXJldHVybiBjfTthLnByb3RvdHlwZS5maW5kRWxlbWVudHM9ZnVuY3Rpb24ocil7dmFyIGM9TS5wcm90b3R5cGUuZmluZEFnZ3JlZ2F0ZWRPYmplY3RzLmNhbGwodGhpcyxyKTtyZXR1cm4gY307YS5wcm90b3R5cGUuc2V0TGF5b3V0RGF0YT1mdW5jdGlvbihsKXt0aGlzLnNldEFnZ3JlZ2F0aW9uKCJsYXlvdXREYXRhIixsLHRydWUpO3ZhciBMPXRoaXMuZ2V0UGFyZW50KCk7aWYoTCl7dmFyIGU9cS5FdmVudCgiTGF5b3V0RGF0YUNoYW5nZSIpO2Uuc3JjQ29udHJvbD10aGlzO0wuX2hhbmRsZUV2ZW50KGUpfXJldHVybiB0aGlzfTthLnByb3RvdHlwZS5iaW5kRWxlbWVudD1mdW5jdGlvbihwLFApe3JldHVybiB0aGlzLmJpbmRPYmplY3QocCxQKX07YS5wcm90b3R5cGUudW5iaW5kRWxlbWVudD1mdW5jdGlvbihtKXtyZXR1cm4gdGhpcy51bmJpbmRPYmplY3QobSl9O2EucHJvdG90eXBlLmdldEVsZW1lbnRCaW5kaW5nPWZ1bmN0aW9uKG0pe3JldHVybiB0aGlzLmdldE9iamVjdEJpbmRpbmcobSl9O3JldHVybiBhfSx0cnVlKX07c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvQ3VzdG9tU3R5bGVDbGFzc1N1cHBvcnQiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCcuL0VsZW1lbnQnXSxmdW5jdGlvbihxLEUpeyJ1c2Ugc3RyaWN0Ijt2YXIgQz1mdW5jdGlvbigpe2lmKCEodGhpcyBpbnN0YW5jZW9mIEUpKXtyZXR1cm59dmFyIG89dGhpcy5jbG9uZTt0aGlzLmNsb25lPWZ1bmN0aW9uKCl7dmFyIGM9by5hcHBseSh0aGlzLGFyZ3VtZW50cyk7aWYodGhpcy5hQ3VzdG9tU3R5bGVDbGFzc2VzKXtjLmFDdXN0b21TdHlsZUNsYXNzZXM9dGhpcy5hQ3VzdG9tU3R5bGVDbGFzc2VzLnNsaWNlKCl9cmV0dXJuIGN9O3RoaXMuYWRkU3R5bGVDbGFzcz1mdW5jdGlvbihzLFMpe2lmKCF0aGlzLmFDdXN0b21TdHlsZUNsYXNzZXMpe3RoaXMuYUN1c3RvbVN0eWxlQ2xhc3Nlcz1bXX1pZihzKXtpZihzLmluZGV4T2YoIlwiIik+LTEpe3JldHVybiB0aGlzfWlmKHMuaW5kZXhPZigiJyIpPi0xKXtyZXR1cm4gdGhpc31mb3IodmFyIGk9dGhpcy5hQ3VzdG9tU3R5bGVDbGFzc2VzLmxlbmd0aC0xO2k+PTA7aS0tKXtpZih0aGlzLmFDdXN0b21TdHlsZUNsYXNzZXNbaV09PXMpe3JldHVybiB0aGlzfX10aGlzLmFDdXN0b21TdHlsZUNsYXNzZXMucHVzaChzKTt2YXIgcj10aGlzLmdldERvbVJlZigpO2lmKHIpe3EocikuYWRkQ2xhc3Mocyl9ZWxzZSBpZihTPT09ZmFsc2Upe3RoaXMuaW52YWxpZGF0ZSgpfX1yZXR1cm4gdGhpc307dGhpcy5yZW1vdmVTdHlsZUNsYXNzPWZ1bmN0aW9uKHMsUyl7aWYocyYmdGhpcy5hQ3VzdG9tU3R5bGVDbGFzc2VzKXtmb3IodmFyIGk9dGhpcy5hQ3VzdG9tU3R5bGVDbGFzc2VzLmxlbmd0aC0xO2k+PTA7aS0tKXtpZih0aGlzLmFDdXN0b21TdHlsZUNsYXNzZXNbaV09PXMpe3RoaXMuYUN1c3RvbVN0eWxlQ2xhc3Nlcy5zcGxpY2UoaSwxKTt2YXIgcj10aGlzLmdldERvbVJlZigpO2lmKHIpe3EocikucmVtb3ZlQ2xhc3Mocyl9ZWxzZSBpZihTPT09ZmFsc2Upe3RoaXMuaW52YWxpZGF0ZSgpfX19fXJldHVybiB0aGlzfTt0aGlzLnRvZ2dsZVN0eWxlQ2xhc3M9ZnVuY3Rpb24ocyxhKXtpZihzJiZ0eXBlb2Ygcz09PSJzdHJpbmciKXtpZihhPT09dHJ1ZSl7dGhpcy5hZGRTdHlsZUNsYXNzKHMpfWVsc2UgaWYoYT09PWZhbHNlKXt0aGlzLnJlbW92ZVN0eWxlQ2xhc3Mocyl9ZWxzZSBpZihhPT09dW5kZWZpbmVkKXt0aGlzLmhhc1N0eWxlQ2xhc3Mocyk/dGhpcy5yZW1vdmVTdHlsZUNsYXNzKHMpOnRoaXMuYWRkU3R5bGVDbGFzcyhzKX1lbHNle3Euc2FwLmxvZy53YXJuaW5nKHRoaXMudG9TdHJpbmcoKSsiLSB0b2dnbGVTdHlsZUNsYXNzKCk6IGJBZGQgc2hvdWxkIGJlIGEgYm9vbGVhbiBvciB1bmRlZmluZWQsIGJ1dCBpcyAnIithKyInIil9fXJldHVybiB0aGlzfTt0aGlzLmhhc1N0eWxlQ2xhc3M9ZnVuY3Rpb24ocyl7aWYocyYmdGhpcy5hQ3VzdG9tU3R5bGVDbGFzc2VzKXtmb3IodmFyIGk9dGhpcy5hQ3VzdG9tU3R5bGVDbGFzc2VzLmxlbmd0aC0xO2k+PTA7aS0tKXtpZih0aGlzLmFDdXN0b21TdHlsZUNsYXNzZXNbaV09PXMpe3JldHVybiB0cnVlfX19cmV0dXJuIGZhbHNlfTt0aGlzLmdldE1ldGFkYXRhKCkuYWRkUHVibGljTWV0aG9kcyhbImFkZFN0eWxlQ2xhc3MiLCJyZW1vdmVTdHlsZUNsYXNzIiwidG9nZ2xlU3R5bGVDbGFzcyIsImhhc1N0eWxlQ2xhc3MiXSl9O3JldHVybiBDfSx0cnVlKX07c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvQ29udHJvbCIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJy4vQ3VzdG9tU3R5bGVDbGFzc1N1cHBvcnQnLCcuL0VsZW1lbnQnXSxmdW5jdGlvbihxLEMsRSl7InVzZSBzdHJpY3QiO3ZhciBhPUUuZXh0ZW5kKCJzYXAudWkuY29yZS5Db250cm9sIix7bWV0YWRhdGE6e3N0ZXJlb3R5cGU6ImNvbnRyb2wiLCJhYnN0cmFjdCI6dHJ1ZSxwdWJsaWNNZXRob2RzOlsicGxhY2VBdCIsImF0dGFjaEJyb3dzZXJFdmVudCIsImRldGFjaEJyb3dzZXJFdmVudCJdLGxpYnJhcnk6InNhcC51aS5jb3JlIixwcm9wZXJ0aWVzOnsiYnVzeSI6e3R5cGU6ImJvb2xlYW4iLGRlZmF1bHRWYWx1ZTpmYWxzZX0sImJ1c3lJbmRpY2F0b3JEZWxheSI6e3R5cGU6ImludCIsZGVmYXVsdFZhbHVlOjEwMDB9fSxhZ2dyZWdhdGlvbnM6e30sYXNzb2NpYXRpb25zOnt9LGV2ZW50czp7fX0sY29uc3RydWN0b3I6ZnVuY3Rpb24oaSxzKXt0aGlzLmJBbGxvd1RleHRTZWxlY3Rpb249dHJ1ZTtFLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLmJPdXRwdXQ9dGhpcy5nZXREb21SZWYoKSE9bnVsbDtpZih0aGlzLl9zYXBVaUNvcmVMb2NhbEJ1c3lfaW5pdEJ1c3lJbmRpY2F0b3Ipe3RoaXMuX3NhcFVpQ29yZUxvY2FsQnVzeV9pbml0QnVzeUluZGljYXRvcigpfX0scmVuZGVyZXI6bnVsbH0pO2EucHJvdG90eXBlLmNsb25lPWZ1bmN0aW9uKCl7dmFyIGM9RS5wcm90b3R5cGUuY2xvbmUuYXBwbHkodGhpcyxhcmd1bWVudHMpO2lmKHRoaXMuYUJpbmRQYXJhbWV0ZXJzKXtmb3IodmFyIGk9MCxsPXRoaXMuYUJpbmRQYXJhbWV0ZXJzLmxlbmd0aDtpPGw7aSsrKXt2YXIgcD10aGlzLmFCaW5kUGFyYW1ldGVyc1tpXTtjLmF0dGFjaEJyb3dzZXJFdmVudChwLnNFdmVudFR5cGUscC5mbkhhbmRsZXIscC5vTGlzdGVuZXIhPT10aGlzP3Aub0xpc3RlbmVyOnVuZGVmaW5lZCl9fWMuYkFsbG93VGV4dFNlbGVjdGlvbj10aGlzLmJBbGxvd1RleHRTZWxlY3Rpb247cmV0dXJuIGN9O0MuYXBwbHkoYS5wcm90b3R5cGUpO2EucHJvdG90eXBlLmlzQWN0aXZlPWZ1bmN0aW9uKCl7cmV0dXJuIHEuc2FwLmRvbUJ5SWQodGhpcy5zSWQpIT1udWxsfTthLnByb3RvdHlwZS5pbnZhbGlkYXRlPWZ1bmN0aW9uKG8pe3ZhciB1O2lmKHRoaXMuYk91dHB1dCYmKHU9dGhpcy5nZXRVSUFyZWEoKSkpe2lmKCF0aGlzLl9iSXNCZWluZ0Rlc3Ryb3llZCl7dS5hZGRJbnZhbGlkYXRlZENvbnRyb2wodGhpcyl9fWVsc2V7dmFyIHA9dGhpcy5nZXRQYXJlbnQoKTtpZihwJiYodGhpcy5iT3V0cHV0fHwhKHRoaXMuZ2V0VmlzaWJsZSYmdGhpcy5nZXRWaXNpYmxlKCk9PT1mYWxzZSkpKXtwLmludmFsaWRhdGUodGhpcyl9fX07YS5wcm90b3R5cGUucmVyZW5kZXI9ZnVuY3Rpb24oKXtzYXAudWkuY29yZS5VSUFyZWEucmVyZW5kZXJDb250cm9sKHRoaXMpfTthLnByb3RvdHlwZS5hbGxvd1RleHRTZWxlY3Rpb249ZnVuY3Rpb24oQSl7dGhpcy5iQWxsb3dUZXh0U2VsZWN0aW9uPUE7cmV0dXJuIHRoaXN9O2EucHJvdG90eXBlLmF0dGFjaEJyb3dzZXJFdmVudD1mdW5jdGlvbihlLGgsbCl7aWYoZSYmKHR5cGVvZihlKT09PSJzdHJpbmciKSl7aWYoaCYmdHlwZW9mKGgpPT09ImZ1bmN0aW9uIil7aWYoIXRoaXMuYUJpbmRQYXJhbWV0ZXJzKXt0aGlzLmFCaW5kUGFyYW1ldGVycz1bXX1sPWx8fHRoaXM7dmFyIHA9ZnVuY3Rpb24oKXtoLmFwcGx5KGwsYXJndW1lbnRzKX07dGhpcy5hQmluZFBhcmFtZXRlcnMucHVzaCh7c0V2ZW50VHlwZTplLGZuSGFuZGxlcjpoLG9MaXN0ZW5lcjpsLGZuUHJveHk6cH0pO3RoaXMuJCgpLmJpbmQoZSxwKX19cmV0dXJuIHRoaXN9O2EucHJvdG90eXBlLmRldGFjaEJyb3dzZXJFdmVudD1mdW5jdGlvbihlLGgsbCl7aWYoZSYmKHR5cGVvZihlKT09PSJzdHJpbmciKSl7aWYoaCYmdHlwZW9mKGgpPT09ImZ1bmN0aW9uIil7dmFyICQ9dGhpcy4kKCksaSxwO2w9bHx8dGhpcztpZih0aGlzLmFCaW5kUGFyYW1ldGVycyl7Zm9yKGk9dGhpcy5hQmluZFBhcmFtZXRlcnMubGVuZ3RoLTE7aT49MDtpLS0pe3A9dGhpcy5hQmluZFBhcmFtZXRlcnNbaV07aWYocC5zRXZlbnRUeXBlPT09ZSYmcC5mbkhhbmRsZXI9PT1oJiZwLm9MaXN0ZW5lcj09PWwpe3RoaXMuYUJpbmRQYXJhbWV0ZXJzLnNwbGljZShpLDEpOyQudW5iaW5kKGUscC5mblByb3h5KX19fX19cmV0dXJuIHRoaXN9O2EucHJvdG90eXBlLmdldFJlbmRlcmVyPWZ1bmN0aW9uKCl7cmV0dXJuIHNhcC51aS5jb3JlLlJlbmRlck1hbmFnZXIuZ2V0UmVuZGVyZXIodGhpcyl9O2EucHJvdG90eXBlLnBsYWNlQXQ9ZnVuY3Rpb24ocixwKXt2YXIgYz1zYXAudWkuZ2V0Q29yZSgpO2lmKGMuaXNJbml0aWFsaXplZCgpKXt2YXIgbz1yO2lmKHR5cGVvZiBvPT09InN0cmluZyIpe289Yy5ieUlkKHIpfXZhciBpPWZhbHNlO2lmKCEobyBpbnN0YW5jZW9mIEUpKXtvPWMuY3JlYXRlVUlBcmVhKHIpO2k9dHJ1ZX1pZighbyl7cmV0dXJufWlmKCFpKXt2YXIgYj1vLmdldE1ldGFkYXRhKCkuZ2V0QWxsQWdncmVnYXRpb25zKClbImNvbnRlbnQiXTt2YXIgZD10cnVlO2lmKGIpe2lmKCFiLm11bHRpcGxlfHxiLnR5cGUhPSJzYXAudWkuY29yZS5Db250cm9sIil7ZD1mYWxzZX19ZWxzZXtpZighby5hZGRDb250ZW50fHwhby5pbnNlcnRDb250ZW50fHwhby5yZW1vdmVBbGxDb250ZW50KXtkPWZhbHNlfX1pZighZCl7cS5zYXAubG9nLndhcm5pbmcoInBsYWNlQXQgY2Fubm90IGJlIHByb2Nlc3NlZCBiZWNhdXNlIGNvbnRhaW5lciAiK28rIiBkb2VzIG5vdCBoYXZlIGFuIGFnZ3JlZ2F0aW9uICdjb250ZW50Jy4iKTtyZXR1cm59fWlmKHR5cGVvZiBwPT09Im51bWJlciIpe28uaW5zZXJ0Q29udGVudCh0aGlzLHApfWVsc2V7cD1wfHwibGFzdCI7c3dpdGNoKHApe2Nhc2UibGFzdCI6by5hZGRDb250ZW50KHRoaXMpO2JyZWFrO2Nhc2UiZmlyc3QiOm8uaW5zZXJ0Q29udGVudCh0aGlzLDApO2JyZWFrO2Nhc2Uib25seSI6by5yZW1vdmVBbGxDb250ZW50KCk7by5hZGRDb250ZW50KHRoaXMpO2JyZWFrO2RlZmF1bHQ6cS5zYXAubG9nLndhcm5pbmcoIlBvc2l0aW9uICIrcCsiIGlzIG5vdCBzdXBwb3J0ZWQgZm9yIGZ1bmN0aW9uIHBsYWNlQXQuIil9fX1lbHNle3ZhciB0PXRoaXM7Yy5hdHRhY2hJbml0RXZlbnQoZnVuY3Rpb24oKXt0LnBsYWNlQXQocixwKX0pfXJldHVybiB0aGlzfTthLnByb3RvdHlwZS5vbnNlbGVjdHN0YXJ0PWZ1bmN0aW9uKGIpe2lmKCF0aGlzLmJBbGxvd1RleHRTZWxlY3Rpb24pe2IucHJldmVudERlZmF1bHQoKTtiLnN0b3BQcm9wYWdhdGlvbigpfX07YS5wcm90b3R5cGUuZ2V0SWRGb3JMYWJlbD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmdldElkKCl9O2EucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24ocyl7dGhpcy5fYklzQmVpbmdEZXN0cm95ZWQ9dHJ1ZTt0aGlzLl9jbGVhbnVwQnVzeUluZGljYXRvcigpO3NhcC51aS5jb3JlLlJlc2l6ZUhhbmRsZXIuZGVyZWdpc3RlckFsbEZvckNvbnRyb2wodGhpcy5nZXRJZCgpKTtFLnByb3RvdHlwZS5kZXN0cm95LmNhbGwodGhpcyxzKX07KGZ1bmN0aW9uKCl7dmFyIHA9ImZvY3VzaW4gZm9jdXNvdXQga2V5ZG93biBrZXlwcmVzcyBrZXl1cCIsYj17b25BZnRlclJlbmRlcmluZzpmdW5jdGlvbigpe2lmKHRoaXMuZ2V0UHJvcGVydHkoImJ1c3kiKT09PXRydWUmJnRoaXMuJCgpKXtBLmFwcGx5KHRoaXMpfX19LEE9ZnVuY3Rpb24oKXt2YXIgJD10aGlzLiQodGhpcy5fc0J1c3lTZWN0aW9uKSxGPVsiYXJlYSIsImJhc2UiLCJiciIsImNvbCIsImVtYmVkIiwiaHIiLCJpbWciLCJpbnB1dCIsImtleWdlbiIsImxpbmsiLCJtZW51aXRlbSIsIm1ldGEiLCJwYXJhbSIsInNvdXJjZSIsInRyYWNrIiwid2JyIl07aWYodGhpcy5fYnVzeUluZGljYXRvckRlbGF5ZWRDYWxsSWQpe3Euc2FwLmNsZWFyRGVsYXllZENhbGwodGhpcy5fYnVzeUluZGljYXRvckRlbGF5ZWRDYWxsSWQpO2RlbGV0ZSB0aGlzLl9idXN5SW5kaWNhdG9yRGVsYXllZENhbGxJZH12YXIgdD0kLmdldCgwKSYmJC5nZXQoMCkudGFnTmFtZTtpZih0JiZxLmluQXJyYXkodC50b0xvd2VyQ2FzZSgpLEYpPj0wKXtxLnNhcC5sb2cud2FybmluZygiQnVzeSBJbmRpY2F0b3IgY2Fubm90IGJlIHBsYWNlZCBpbiBlbGVtZW50cyB3aXRoIHRhZyAiK3QpO3JldHVybn1pZigkLmNzcygncG9zaXRpb24nKT09J3N0YXRpYycpe3RoaXMuX2J1c3lTdG9yZWRQb3NpdGlvbj0nc3RhdGljJzskLmNzcygncG9zaXRpb24nLCdyZWxhdGl2ZScpfXZhciBCPXEoJzxkaXYgY2xhc3M9InNhcFVpTG9jYWxCdXN5SW5kaWNhdG9yIj48ZGl2IGNsYXNzPSJzYXBVaUxvY2FsQnVzeUluZGljYXRvckFuaW1hdGlvbiI+PGRpdiBjbGFzcz0ic2FwVWlMb2NhbEJ1c3lJbmRpY2F0b3JCb3giPjwvZGl2PjxkaXYgY2xhc3M9InNhcFVpTG9jYWxCdXN5SW5kaWNhdG9yQm94Ij48L2Rpdj48ZGl2IGNsYXNzPSJzYXBVaUxvY2FsQnVzeUluZGljYXRvckJveCI+PC9kaXY+PC9kaXY+PC9kaXY+Jyk7Qi5hdHRyKCJpZCIsdGhpcy5nZXRJZCgpKyItYnVzeUluZGljYXRvciIpOyQuYXBwZW5kKEIpOyQuYWRkQ2xhc3MoJ3NhcFVpTG9jYWxCdXN5Jyk7aWYodGhpcy5fYnVzeURlbGF5ZWRDYWxsSWQpe3Euc2FwLmNsZWFyRGVsYXllZENhbGwodGhpcy5fYnVzeURlbGF5ZWRDYWxsSWQpfXRoaXMuX2J1c3lEZWxheWVkQ2FsbElkPXEuc2FwLmRlbGF5ZWRDYWxsKDEyMDAsdGhpcyxmKTtoLmFwcGx5KHRoaXMsW3RydWVdKX0saD1mdW5jdGlvbihCKXtpZihCKXt2YXIgJD10aGlzLiQodGhpcy5fc0J1c3lTZWN0aW9uKSx0PSQuZmluZCgnW3RhYmluZGV4XScpLGM9dGhpczt0aGlzLl9idXN5VGFiSW5kaWNlcz1bXTt0LmVhY2goZnVuY3Rpb24oaSxvKXt2YXIgcj1xKG8pLFQ9ci5hdHRyKCd0YWJpbmRleCcpO2lmKFQ8MClyZXR1cm4gdHJ1ZTtjLl9idXN5VGFiSW5kaWNlcy5wdXNoKHtyZWY6cix0YWJpbmRleDpUfSk7ci5hdHRyKCd0YWJpbmRleCcsLTEpO3IuYmluZChwLFApfSl9ZWxzZXtpZih0aGlzLl9idXN5VGFiSW5kaWNlcyl7cS5lYWNoKHRoaXMuX2J1c3lUYWJJbmRpY2VzLGZ1bmN0aW9uKGksbyl7by5yZWYuYXR0cigndGFiaW5kZXgnLG8udGFiaW5kZXgpO28ucmVmLnVuYmluZChwLFApfSl9dGhpcy5fYnVzeVRhYkluZGljZXM9W119fSxQPWZ1bmN0aW9uKGUpe2UucHJldmVudERlZmF1bHQoKTtlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpfSxmPWZ1bmN0aW9uKCl7dmFyICQ9dGhpcy4kKHRoaXMuX3NCdXN5U2VjdGlvbikuY2hpbGRyZW4oJy5zYXBVaUxvY2FsQnVzeUluZGljYXRvcicpLmNoaWxkcmVuKCcuc2FwVWlMb2NhbEJ1c3lJbmRpY2F0b3JBbmltYXRpb24nKTt2YXIgdD10aGlzO3QuX2J1c3lBbmltYXRpb25UaW1lcjE9c2V0VGltZW91dChmdW5jdGlvbigpeyQuY2hpbGRyZW4oIjplcSgwKSIpLmFkZENsYXNzKCdhY3RpdmUnKTskLmNoaWxkcmVuKCI6bm90KDplcSgwKSkiKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7dC5fYnVzeUFuaW1hdGlvblRpbWVyMj1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7JC5jaGlsZHJlbigiOmVxKDEpIikuYWRkQ2xhc3MoJ2FjdGl2ZScpOyQuY2hpbGRyZW4oIjpub3QoOmVxKDEpKSIpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTt0Ll9idXN5QW5pbWF0aW9uVGltZXIzPXNldFRpbWVvdXQoZnVuY3Rpb24oKXskLmNoaWxkcmVuKCI6ZXEoMikiKS5hZGRDbGFzcygnYWN0aXZlJyk7JC5jaGlsZHJlbigiOm5vdCg6ZXEoMikpIikucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO3QuX2J1c3lBbmltYXRpb25UaW1lcjQ9c2V0VGltZW91dChmdW5jdGlvbigpeyQuY2hpbGRyZW4oKS5yZW1vdmVDbGFzcygnYWN0aXZlJyl9LDE1MCl9LDE1MCl9LDE1MCl9LDE1MCk7dGhpcy5fYnVzeURlbGF5ZWRDYWxsSWQ9cS5zYXAuZGVsYXllZENhbGwoMTIwMCx0aGlzLGYpfTthLnByb3RvdHlwZS5zZXRCdXN5PWZ1bmN0aW9uKEIscyl7dGhpcy5fc0J1c3lTZWN0aW9uPXM7dmFyICQ9dGhpcy4kKHRoaXMuX3NCdXN5U2VjdGlvbik7aWYoQj09dGhpcy5nZXRQcm9wZXJ0eSgiYnVzeSIpKXtyZXR1cm59dGhpcy5zZXRQcm9wZXJ0eSgiYnVzeSIsQix0cnVlKTtpZihCKXt0aGlzLmFkZERlbGVnYXRlKGIsZmFsc2UsdGhpcyl9ZWxzZXt0aGlzLnJlbW92ZURlbGVnYXRlKGIpO2lmKHRoaXMuX2J1c3lJbmRpY2F0b3JEZWxheWVkQ2FsbElkKXtxLnNhcC5jbGVhckRlbGF5ZWRDYWxsKHRoaXMuX2J1c3lJbmRpY2F0b3JEZWxheWVkQ2FsbElkKTtkZWxldGUgdGhpcy5fYnVzeUluZGljYXRvckRlbGF5ZWRDYWxsSWR9fWlmKCF0aGlzLmdldERvbVJlZigpKXtyZXR1cm59aWYoQil7aWYodGhpcy5nZXRCdXN5SW5kaWNhdG9yRGVsYXkoKTw9MCl7QS5hcHBseSh0aGlzKX1lbHNle3RoaXMuX2J1c3lJbmRpY2F0b3JEZWxheWVkQ2FsbElkPXEuc2FwLmRlbGF5ZWRDYWxsKHRoaXMuZ2V0QnVzeUluZGljYXRvckRlbGF5KCksdGhpcyxBKX19ZWxzZXt0aGlzLiQoImJ1c3lJbmRpY2F0b3IiKS5yZW1vdmUoKTt0aGlzLiQoKS5yZW1vdmVDbGFzcygnc2FwVWlMb2NhbEJ1c3knKTtpZih0aGlzLl9idXN5U3RvcmVkUG9zaXRpb24peyQuY3NzKCdwb3NpdGlvbicsdGhpcy5fYnVzeVN0b3JlZFBvc2l0aW9uKTtkZWxldGUgdGhpcy5fYnVzeVN0b3JlZFBvc2l0aW9ufWguYXBwbHkodGhpcyxbZmFsc2VdKTtpZih0aGlzLl9idXN5RGVsYXllZENhbGxJZCl7cS5zYXAuY2xlYXJEZWxheWVkQ2FsbCh0aGlzLl9idXN5RGVsYXllZENhbGxJZCk7ZGVsZXRlIHRoaXMuX2J1c3lEZWxheWVkQ2FsbElkfX19O2EucHJvdG90eXBlLmlzQnVzeT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmdldFByb3BlcnR5KCJidXN5Iil9O2EucHJvdG90eXBlLnNldEJ1c3lJbmRpY2F0b3JEZWxheT1mdW5jdGlvbihkKXt0aGlzLnNldFByb3BlcnR5KCJidXN5SW5kaWNhdG9yRGVsYXkiLGQsdHJ1ZSk7cmV0dXJuIHRoaXN9O2EucHJvdG90eXBlLl9jbGVhbnVwQnVzeUluZGljYXRvcj1mdW5jdGlvbigpe2lmKHRoaXMuX2J1c3lJbmRpY2F0b3JEZWxheWVkQ2FsbElkKXtxLnNhcC5jbGVhckRlbGF5ZWRDYWxsKHRoaXMuX2J1c3lJbmRpY2F0b3JEZWxheWVkQ2FsbElkKTtkZWxldGUgdGhpcy5fYnVzeUluZGljYXRvckRlbGF5ZWRDYWxsSWR9aWYodGhpcy5fYnVzeURlbGF5ZWRDYWxsSWQpe3Euc2FwLmNsZWFyRGVsYXllZENhbGwodGhpcy5fYnVzeURlbGF5ZWRDYWxsSWQpO2RlbGV0ZSB0aGlzLl9idXN5RGVsYXllZENhbGxJZH1pZih0aGlzLl9idXN5QW5pbWF0aW9uVGltZXIxKXtjbGVhclRpbWVvdXQodGhpcy5fYnVzeUFuaW1hdGlvblRpbWVyMSk7ZGVsZXRlIHRoaXMuX2J1c3lBbmltYXRpb25UaW1lcjF9aWYodGhpcy5fYnVzeUFuaW1hdGlvblRpbWVyMil7Y2xlYXJUaW1lb3V0KHRoaXMuX2J1c3lBbmltYXRpb25UaW1lcjIpO2RlbGV0ZSB0aGlzLl9idXN5QW5pbWF0aW9uVGltZXIyfWlmKHRoaXMuX2J1c3lBbmltYXRpb25UaW1lcjMpe2NsZWFyVGltZW91dCh0aGlzLl9idXN5QW5pbWF0aW9uVGltZXIzKTtkZWxldGUgdGhpcy5fYnVzeUFuaW1hdGlvblRpbWVyM31pZih0aGlzLl9idXN5QW5pbWF0aW9uVGltZXI0KXtjbGVhclRpbWVvdXQodGhpcy5fYnVzeUFuaW1hdGlvblRpbWVyNCk7ZGVsZXRlIHRoaXMuX2J1c3lBbmltYXRpb25UaW1lcjR9fX0pKCk7cmV0dXJuIGF9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS5VSUFyZWEnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS5VSUFyZWEnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9VSUFyZWEiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvYmFzZS9NYW5hZ2VkT2JqZWN0JywnLi9FbGVtZW50JywnanF1ZXJ5LnNhcC5hY3QnLCdqcXVlcnkuc2FwLnVpJ10sZnVuY3Rpb24ocSxNLEUpeyJ1c2Ugc3RyaWN0Ijt2YXIgcj1xLnNhcC5sb2cuZ2V0TG9nZ2VyKCJzYXAudWkuUmVuZGVyaW5nIiwoKHdpbmRvd1sic2FwLXVpLWNvbmZpZyJdJiZ3aW5kb3dbInNhcC11aS1jb25maWciXVsieHgtZGVidWdSZW5kZXJpbmciXSl8fC9zYXAtdWkteHgtZGVidWcoUnwtcillbmRlcmluZz0odHJ1ZXx4fFgpLy50ZXN0KGRvY3VtZW50LmxvY2F0aW9uLnNlYXJjaCkpP3Euc2FwLmxvZy5MZXZlbC5ERUJVRzpNYXRoLm1pbihxLnNhcC5sb2cuTGV2ZWwuSU5GTyxxLnNhcC5sb2cuZ2V0TGV2ZWwoKSkpLGQ9ZnVuY3Rpb24oYyl7cmV0dXJuIGN9LEQ9cS5ub29wLGY9cS5ub29wO2lmKHIuaXNMb2dnYWJsZSgpKXtkPWZ1bmN0aW9uKGMpe3ZhciBsO3RyeXt0aHJvdyBuZXcgRXJyb3IoKX1jYXRjaChlKXtsPWUuc3RhY2t8fGUuc3RhY2t0cmFjZXx8KGUuc291cmNlVVJMP2Uuc291cmNlVVJMKyI6IitlLmxpbmU6bnVsbCk7bD1sP2wuc3BsaXQoL1xuXHMqL2cpLnNsaWNlKDIpOnVuZGVmaW5lZH1yZXR1cm57b2JqOmMsbG9jYXRpb246bH19O0Q9ZnVuY3Rpb24odCxjKXt2YXIgQz1zYXAudWkuZ2V0Q29yZSgpLFI9e30sbixvO2ZvcihuIGluIGMpe289Qy5ieUlkKG4pO1Jbbl09e3R5cGU6bz9vLmdldE1ldGFkYXRhKCkuZ2V0TmFtZSgpOihjW25dLm9iaj09PXQ/IlVJQXJlYSI6IihubyBzdWNoIGNvbnRyb2wpIiksbG9jYXRpb246Y1tuXS5sb2NhdGlvbixyZWFzb246Y1tuXS5yZWFzb259fXIuZGVidWcoIiAgVUlBcmVhICciK3QuZ2V0SWQoKSsiJywgcGVuZGluZyB1cGRhdGVzOiAiK0pTT04uc3RyaW5naWZ5KFIsbnVsbCwiXHQiKSl9O2Y9ZnVuY3Rpb24oYixhKXt2YXIgbjtmb3IobiBpbiBhKXtpZihiW25dIT1udWxsKXtpZihiW25dLm9iaiE9PWFbbl0ub2JqKXthW25dLnJlYXNvbj0icmVwbGFjZWQgZHVyaW5nIHJlbmRlcmluZyJ9ZWxzZXthW25dLnJlYXNvbj0iaW52YWxpZGF0ZWQgYWdhaW4gZHVyaW5nIHJlbmRlcmluZyJ9fWVsc2V7YVtuXS5yZWFzb249ImludmFsaWRhdGVkIGR1cmluZyByZW5kZXJpbmcifX19fXZhciBVPU0uZXh0ZW5kKCJzYXAudWkuY29yZS5VSUFyZWEiLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbihjLFIpe2lmKGFyZ3VtZW50cy5sZW5ndGg9PT0wKXtyZXR1cm59TS5hcHBseSh0aGlzKTt0aGlzLm9Db3JlPWM7dGhpcy5iTG9ja2VkPWZhbHNlO3RoaXMuYkluaXRpYWw9dHJ1ZTt0aGlzLmFDb250ZW50VG9SZW1vdmU9W107dGhpcy5iTmVlZHNSZXJlbmRlcmluZz1mYWxzZTtpZihSIT1udWxsKXt0aGlzLnNldFJvb3ROb2RlKFIpO3RoaXMuYk5lZWRzUmVyZW5kZXJpbmc9dGhpcy5iTmVlZHNSZXJlbmRlcmluZyYmIXEuc2FwLmRvbUJ5SWQoUi5pZCsiLUluaXQiKX10aGlzLm1JbnZhbGlkYXRlZENvbnRyb2xzPXt9O2lmKCF0aGlzLmJOZWVkc1JlcmVuZGVyaW5nKXt0aGlzLmJSZW5kZXJTZWxmPWZhbHNlfWVsc2V7dGhpcy5vQ29yZS5hZGRJbnZhbGlkYXRlZFVJQXJlYSh0aGlzKX19LG1ldGFkYXRhOntwdWJsaWNNZXRob2RzOlsic2V0Um9vdE5vZGUiLCJnZXRSb290Tm9kZSIsInNldFJvb3RDb250cm9sIiwiZ2V0Um9vdENvbnRyb2wiLCJsb2NrIiwidW5sb2NrIiwiaXNMb2NrZWQiXSxhZ2dyZWdhdGlvbnM6e2NvbnRlbnQ6e25hbWU6ImNvbnRlbnQiLHR5cGU6InNhcC51aS5jb3JlLkNvbnRyb2wiLG11bHRpcGxlOnRydWUsc2luZ3VsYXJOYW1lOiJjb250ZW50In0sZGVwZW5kZW50czp7bmFtZToiZGVwZW5kZW50cyIsdHlwZToic2FwLnVpLmNvcmUuQ29udHJvbCIsbXVsdGlwbGU6dHJ1ZX19fX0pO1UucHJvdG90eXBlLmlzSW52YWxpZGF0ZVN1cHByZXNzZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pU3VwcHJlc3NJbnZhbGlkYXRlPjB9O1UucHJvdG90eXBlLmdldElkPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub1Jvb3ROb2RlP3RoaXMub1Jvb3ROb2RlLmlkOm51bGx9O1UucHJvdG90eXBlLmdldFVJQXJlYT1mdW5jdGlvbigpe3JldHVybiB0aGlzfTtVLnByb3RvdHlwZS5zZXRSb290Tm9kZT1mdW5jdGlvbihSKXtpZih0aGlzLm9Sb290Tm9kZT09PVIpe3JldHVybn1pZih0aGlzLm9Sb290Tm9kZSl7dGhpcy5fb25kZXRhY2goKX10aGlzLm9Sb290Tm9kZT1SO2lmKHRoaXMuZ2V0Q29udGVudCgpLmxlbmd0aD4wKXt0aGlzLmludmFsaWRhdGUoKX1pZih0aGlzLm9Sb290Tm9kZSl7dGhpcy5fb25hdHRhY2goKX19O1UucHJvdG90eXBlLmdldFJvb3ROb2RlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub1Jvb3ROb2RlfTtVLnByb3RvdHlwZS5zZXRSb290Q29udHJvbD1mdW5jdGlvbihSKXt0aGlzLnJlbW92ZUFsbENvbnRlbnQoKTt0aGlzLmFkZENvbnRlbnQoUil9O1UucHJvdG90eXBlLmdldFJvb3RDb250cm9sPWZ1bmN0aW9uKGkpe3ZhciBjPXRoaXMuZ2V0Q29udGVudCgpO2lmKGMubGVuZ3RoPjApe2lmKGk+PTAmJmk8Yy5sZW5ndGgpe3JldHVybiBjW2ldfXJldHVybiBjWzBdfXJldHVybiBudWxsfTtVLnByb3RvdHlwZS5fYWRkUmVtb3ZlZENvbnRlbnQ9ZnVuY3Rpb24obyl7aWYodGhpcy5vUm9vdE5vZGUmJm8pe3RoaXMuYUNvbnRlbnRUb1JlbW92ZS5wdXNoKG8pfX07VS5wcm90b3R5cGUuYWRkQ29udGVudD1mdW5jdGlvbihjLF8pe3RoaXMuYWRkQWdncmVnYXRpb24oImNvbnRlbnQiLGMsXyk7aWYoXyE9PXRydWUpe3RoaXMuaW52YWxpZGF0ZSgpfXJldHVybiB0aGlzfTtVLnByb3RvdHlwZS5yZW1vdmVDb250ZW50PWZ1bmN0aW9uKGMsXyl7dmFyIEM9dGhpcy5yZW1vdmVBZ2dyZWdhdGlvbigiY29udGVudCIsYyxfKTtpZighXyl7dmFyIG87aWYoQyYmQy5nZXREb21SZWYpe289Qy5nZXREb21SZWYoKX10aGlzLl9hZGRSZW1vdmVkQ29udGVudChvKX1yZXR1cm4gQ307VS5wcm90b3R5cGUucmVtb3ZlQWxsQ29udGVudD1mdW5jdGlvbigpe3ZhciBjPXRoaXMucmVtb3ZlQWxsQWdncmVnYXRpb24oImNvbnRlbnQiKTtmb3IodmFyIGk9MDtpPGMubGVuZ3RoO2krKyl7dmFyIG87dmFyIEM9Y1tpXTtpZihDJiZDLmdldERvbVJlZil7bz1DLmdldERvbVJlZigpfXRoaXMuX2FkZFJlbW92ZWRDb250ZW50KG8pfXJldHVybiBjfTtVLnByb3RvdHlwZS5kZXN0cm95Q29udGVudD1mdW5jdGlvbigpe3ZhciBjPXRoaXMuZ2V0Q29udGVudCgpO2Zvcih2YXIgaT0wO2k8Yy5sZW5ndGg7aSsrKXt2YXIgbzt2YXIgQz1jW2ldO2lmKEMmJkMuZ2V0RG9tUmVmKXtvPUMuZ2V0RG9tUmVmKCl9dGhpcy5fYWRkUmVtb3ZlZENvbnRlbnQobyl9dGhpcy5kZXN0cm95QWdncmVnYXRpb24oImNvbnRlbnQiKTtyZXR1cm4gdGhpc307VS5wcm90b3R5cGUubG9jaz1mdW5jdGlvbigpe3RoaXMuYkxvY2tlZD10cnVlfTtVLnByb3RvdHlwZS51bmxvY2s9ZnVuY3Rpb24oKXtpZih0aGlzLmJMb2NrZWQmJnRoaXMuYk5lZWRzUmVyZW5kZXJpbmcpe3RoaXMub0NvcmUuYWRkSW52YWxpZGF0ZWRVSUFyZWEodGhpcyl9dGhpcy5iTG9ja2VkPWZhbHNlfTtVLnByb3RvdHlwZS5pc0xvY2tlZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmJMb2NrZWR9O1UucHJvdG90eXBlLmdldEJpbmRpbmdDb250ZXh0PWZ1bmN0aW9uKCl7cmV0dXJuIG51bGx9O1UucHJvdG90eXBlLmdldEV2ZW50aW5nUGFyZW50PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub0NvcmV9O1UucHJvdG90eXBlLmlzQWN0aXZlPWZ1bmN0aW9uKCl7cmV0dXJuIHEuc2FwLmRvbUJ5SWQodGhpcy5nZXRJZCgpKSE9bnVsbH07VS5wcm90b3R5cGUuaW52YWxpZGF0ZT1mdW5jdGlvbigpe3RoaXMuYWRkSW52YWxpZGF0ZWRDb250cm9sKHRoaXMpfTtVLnByb3RvdHlwZS5hZGRJbnZhbGlkYXRlZENvbnRyb2w9ZnVuY3Rpb24oYyl7aWYodGhpcy5iUmVuZGVyU2VsZil7cmV0dXJufWlmKCF0aGlzLmJOZWVkc1JlcmVuZGVyaW5nKXt0aGlzLm9Db3JlLmFkZEludmFsaWRhdGVkVUlBcmVhKHRoaXMpfXZhciBpPWMuZ2V0SWQoKTtpZihjPT09dGhpcyl7dGhpcy5iUmVuZGVyU2VsZj10cnVlO3RoaXMuYk5lZWRzUmVyZW5kZXJpbmc9dHJ1ZTt0aGlzLm1JbnZhbGlkYXRlZENvbnRyb2xzPXt9O3RoaXMubUludmFsaWRhdGVkQ29udHJvbHNbaV09ZCh0aGlzKTtyZXR1cm59aWYodGhpcy5tSW52YWxpZGF0ZWRDb250cm9sc1tpXSl7cmV0dXJufWlmKCF0aGlzLmJSZW5kZXJTZWxmKXt0aGlzLm1JbnZhbGlkYXRlZENvbnRyb2xzW2ldPWQoYyk7dGhpcy5iTmVlZHNSZXJlbmRlcmluZz10cnVlfX07VS5wcm90b3R5cGUucmVyZW5kZXI9ZnVuY3Rpb24oYSl7dmFyIHQ9dGhpcztmdW5jdGlvbiBjKCl7dC5iUmVuZGVyU2VsZj1mYWxzZTt0LmFDb250ZW50VG9SZW1vdmU9W107dC5tSW52YWxpZGF0ZWRDb250cm9scz17fTt0LmJOZWVkc1JlcmVuZGVyaW5nPWZhbHNlfWlmKGEpe3RoaXMuYk5lZWRzUmVyZW5kZXJpbmc9dHJ1ZX1pZih0aGlzLmJMb2NrZWR8fCF0aGlzLmJOZWVkc1JlcmVuZGVyaW5nKXtyZXR1cm4gZmFsc2V9dmFyIFI9dGhpcy5iUmVuZGVyU2VsZixDPXRoaXMuYUNvbnRlbnRUb1JlbW92ZSxJPXRoaXMubUludmFsaWRhdGVkQ29udHJvbHMsdT1mYWxzZTtjKCk7cS5zYXAubWVhc3VyZS5wYXVzZSgicmVuZGVyUGVuZGluZ1VJVXBkYXRlcyIpO3Euc2FwLm1lYXN1cmUuc3RhcnQodGhpcy5nZXRJZCgpKyItLS1yZXJlbmRlciIsIlJlcmVuZGVyaW5nIG9mICIrdGhpcy5nZXRNZXRhZGF0YSgpLmdldE5hbWUoKSk7RCh0aGlzLEkpO2lmKFIpe2lmKHRoaXMub1Jvb3ROb2RlKXtyLmRlYnVnKCJGdWxsIFJlbmRlcmluZyBvZiBVSUFyZWEgJyIrdGhpcy5nZXRJZCgpKyInIik7c2FwLnVpLmNvcmUuUmVuZGVyTWFuYWdlci5wcmVzZXJ2ZUNvbnRlbnQodGhpcy5vUm9vdE5vZGUsZmFsc2UsdGhpcy5iSW5pdGlhbCk7dGhpcy5iSW5pdGlhbD1mYWxzZTt2YXIgYj1mdW5jdGlvbihoLGope3ZhciBsPWgubGVuZ3RoO3ZhciBrO2Zvcih2YXIgaT0wO2k8bDtpKyspe2s9aj9oW2ldLmdldERvbVJlZigpOmhbaV07aWYoayYmIXNhcC51aS5jb3JlLlJlbmRlck1hbmFnZXIuaXNQcmVzZXJ2ZWRDb250ZW50KGspJiZ0Lm9Sb290Tm9kZT09PWsucGFyZW50Tm9kZSl7cShrKS5yZW1vdmUoKX19cmV0dXJuIGx9O2IoQyk7dmFyIGU9dGhpcy5nZXRDb250ZW50KCk7dmFyIGw9YihlLHRydWUpO2Zvcih2YXIgaT0wO2k8bDtpKyspe3RoaXMub0NvcmUub1JlbmRlck1hbmFnZXIucmVuZGVyKGVbaV0sdGhpcy5vUm9vdE5vZGUsdHJ1ZSl9dT10cnVlfWVsc2V7ci5kZWJ1ZygiRnVsbCBSZW5kZXJpbmcgb2YgVUlBcmVhICciK3RoaXMuZ2V0SWQoKSsiJyBwb3N0cG9uZWQsIG5vIHJvb3Qgbm9kZSIpfX1lbHNle3ZhciBnPWZ1bmN0aW9uKEEpe3doaWxlKEEmJkEhPT10KXtpZihJLmhhc093blByb3BlcnR5KEEuZ2V0SWQoKSkpe3JldHVybiB0cnVlfWlmKEEmJkEuZ2V0TWV0YWRhdGEmJkEuZ2V0TWV0YWRhdGEoKS5pc0luc3RhbmNlT2YoInNhcC51aS5jb3JlLlBvcHVwSW50ZXJmYWNlIikpe2JyZWFrfUE9QS5nZXRQYXJlbnQoKX1yZXR1cm4gZmFsc2V9O2Zvcih2YXIgbiBpbiBJKXt2YXIgbz10aGlzLm9Db3JlLmJ5SWQobik7aWYobyYmIWcoby5nZXRQYXJlbnQoKSkpe28ucmVyZW5kZXIoKTt1PXRydWV9fX1mKEksdGhpcy5tSW52YWxpZGF0ZWRDb250cm9scyk7cS5zYXAubWVhc3VyZS5lbmQodGhpcy5nZXRJZCgpKyItLS1yZXJlbmRlciIpO3Euc2FwLm1lYXN1cmUucmVzdW1lKCJyZW5kZXJQZW5kaW5nVUlVcGRhdGVzIik7cmV0dXJuIHV9O1UucHJvdG90eXBlLl9vbkNvbnRyb2xSZW5kZXJlZD1mdW5jdGlvbihjKXt2YXIgaT1jLmdldElkKCk7aWYodGhpcy5tSW52YWxpZGF0ZWRDb250cm9sc1tpXSl7ZGVsZXRlIHRoaXMubUludmFsaWRhdGVkQ29udHJvbHNbaV19fTtVLnJlcmVuZGVyQ29udHJvbD1mdW5jdGlvbihjKXt2YXIgbz1jP2MuZ2V0RG9tUmVmKCk6bnVsbDt2YXIgcD1vJiZvLnBhcmVudE5vZGU7aWYocCl7dmFyIHU9Yy5nZXRVSUFyZWEoKTt2YXIgYT11P3Uub0NvcmUub1JlbmRlck1hbmFnZXI6c2FwLnVpLmdldENvcmUoKS5jcmVhdGVSZW5kZXJNYW5hZ2VyKCk7ci5kZWJ1ZygiUmVyZW5kZXIgQ29udHJvbCAnIitjLmdldElkKCkrIiciKyh1PyIiOiIgKHVzaW5nIGEgdGVtcC4gUmVuZGVyTWFuYWdlcikiKSk7c2FwLnVpLmNvcmUuUmVuZGVyTWFuYWdlci5wcmVzZXJ2ZUNvbnRlbnQobyx0cnVlLGZhbHNlKTthLnJlbmRlcihjLHApfWVsc2V7dmFyIHU9Yy5nZXRVSUFyZWEoKTt1JiZ1Ll9vbkNvbnRyb2xSZW5kZXJlZChjKTtyLndhcm5pbmcoIkNvdWxkbid0IHJlcmVuZGVyICciK2MuZ2V0SWQoKSsiJywgYXMgaXRzIERPTSBsb2NhdGlvbiBjb3VsZG4ndCBiZSBkZXRlcm1pbmVkIil9fTtVLnByb3RvdHlwZS5faGFuZGxlRXZlbnQ9ZnVuY3Rpb24oZSl7dmFyIG89bnVsbDtvPXEoZS50YXJnZXQpLmNvbnRyb2woMCk7cS5zYXAuYWN0LnJlZnJlc2goKTtpZihvPT09bnVsbCl7cmV0dXJufWlmKGUuaXNNYXJrZWQoImRlbGF5ZWRNb3VzZUV2ZW50Iikpe3JldHVybn1pZihlLmlzTWFya2VkKCJoYW5kbGVkQnlVSUFyZWEiKSl7ZS5zZXRNYXJrKCJmaXJzdFVJQXJlYSIsZmFsc2UpO3JldHVybn1lLnNldE1hcmtlZCgiZmlyc3RVSUFyZWEiKTtlLnNyY0NvbnRyb2w9bztpZihlLnR5cGU9PT0iY29udGV4dG1lbnUiJiZlLnNoaWZ0S2V5JiZlLmFsdEtleSYmISEoZS5tZXRhS2V5fHxlLmN0cmxLZXkpKXtxLnNhcC5sb2cuaW5mbygiU3VwcHJlc3NlZCBmb3J3YXJkaW5nIHRoZSBjb250ZXh0bWVudSBldmVudCBhcyBjb250cm9sIGV2ZW50IGJlY2F1c2UgQ1RSTCtTSElGVCtBTFQgaXMgcHJlc3NlZCEiKTtyZXR1cm59dGhpcy5vQ29yZS5faGFuZGxlQ29udHJvbEV2ZW50KGUsdGhpcy5nZXRJZCgpKTtpZih0aGlzLmJMb2NrZWR8fHRoaXMub0NvcmUuaXNMb2NrZWQoKSl7cmV0dXJufXZhciBhPVtdO2lmKGUuZ2V0UHNldWRvVHlwZXMpe2E9ZS5nZXRQc2V1ZG9UeXBlcygpfWEucHVzaChlLnR5cGUpO3doaWxlKG8mJm8gaW5zdGFuY2VvZiBFJiZvLmlzQWN0aXZlKCkmJiFlLmlzUHJvcGFnYXRpb25TdG9wcGVkKCkpe2Zvcih2YXIgaT0wLGI9YS5sZW5ndGg7aTxiO2krKyl7dmFyIHQ9YVtpXTtlLnR5cGU9dDtlLmN1cnJlbnRUYXJnZXQ9by5nZXREb21SZWYoKTtvLl9oYW5kbGVFdmVudChlKTtpZihlLmlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkKCkpe2JyZWFrfX1pZihlLmlzUHJvcGFnYXRpb25TdG9wcGVkKCkpe2JyZWFrfWlmKG8uYlN0b3BFdmVudEJ1YmJsaW5nKXticmVha312YXIgYz1vLmdldERvbVJlZigpO2lmKCFjKXticmVha31jPWMucGFyZW50Tm9kZTtvPW51bGw7aWYoZS5pc01hcmtlZCgiZnJvbU1vdXNlb3V0IikmJnEuc2FwLmNvbnRhaW5zT3JFcXVhbHMoYyxlLnJlbGF0ZWRUYXJnZXQpKXticmVha313aGlsZShjJiZjIT09dGhpcy5nZXRSb290Tm9kZSgpKXtpZihjLmlkKXtvPXEoYykuY29udHJvbCgwKTtpZihvKXticmVha319Yz1jLnBhcmVudE5vZGV9fWUuY3VycmVudFRhcmdldD10aGlzLmdldFJvb3ROb2RlKCk7KGUub3JpZ2luYWxFdmVudHx8ZSkuX3NhcHVpX2hhbmRsZWRCeVVJQXJlYT10cnVlO2lmKGUuaXNQcm9wYWdhdGlvblN0b3BwZWQoKSl7cS5zYXAubG9nLmRlYnVnKCInIitlLnR5cGUrIicgcHJvcGFnYXRpb24gaGFzIGJlZW4gc3RvcHBlZCIpfXZhciBuPWUudHlwZTtpZihuIT0ibW91c2Vtb3ZlIiYmbiE9Im1vdXNlb3ZlciImJm4hPSJzY3JvbGwiJiZuIT0ibW91c2VvdXQiKXt2YXIgZz1xKGUudGFyZ2V0KS5jb250cm9sKDApO2lmKGcpe3Euc2FwLmxvZy5kZWJ1ZygiRXZlbnQgZmlyZWQ6ICciK2UudHlwZSsiJyBvbiAiK2csIiIsInNhcC51aS5jb3JlLlVJQXJlYSIpfWVsc2V7cS5zYXAubG9nLmRlYnVnKCJFdmVudCBmaXJlZDogJyIrZS50eXBlKyInIiwiIiwic2FwLnVpLmNvcmUuVUlBcmVhIil9fX07VS5wcm90b3R5cGUuX29uYXR0YWNoPWZ1bmN0aW9uKCl7dmFyIG89dGhpcy5nZXRSb290Tm9kZSgpO2lmKG89PW51bGwpe3JldHVybn1xKG8pLmF0dHIoImRhdGEtc2FwLXVpLWFyZWEiLG8uaWQpLmJpbmQocS5zYXAuQ29udHJvbEV2ZW50cy5qb2luKCIgIikscS5wcm94eSh0aGlzLl9oYW5kbGVFdmVudCx0aGlzKSl9O1UucHJvdG90eXBlLl9vbmRldGFjaD1mdW5jdGlvbigpe3ZhciBvPXRoaXMuZ2V0Um9vdE5vZGUoKTtpZihvPT1udWxsKXtyZXR1cm59cShvKS5yZW1vdmVBdHRyKCJkYXRhLXNhcC11aS1hcmVhIikudW5iaW5kKCl9O1UucHJvdG90eXBlLmNsb25lPWZ1bmN0aW9uKCl7dGhyb3cgbmV3IEVycm9yKCJVSUFyZWEgY2FuJ3QgYmUgY2xvbmVkIil9O1UuX29SZW5kZXJMb2c9cjtyZXR1cm4gVX0sdHJ1ZSl9O3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL0NvcmUiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvRGV2aWNlJywnc2FwL3VpL0dsb2JhbCcsJ3NhcC91aS9iYXNlL0RhdGFUeXBlJywnc2FwL3VpL2Jhc2UvRXZlbnRQcm92aWRlcicsJy4vQ29tcG9uZW50JywnLi9Db25maWd1cmF0aW9uJywnLi9Db250cm9sJywnLi9FbGVtZW50JywnLi9FbGVtZW50TWV0YWRhdGEnLCcuL0ZvY3VzSGFuZGxlcicsJy4vUmVuZGVyTWFuYWdlcicsJy4vUmVzaXplSGFuZGxlcicsJy4vVGhlbWVDaGVjaycsJy4vVUlBcmVhJywnLi90bXBsL1RlbXBsYXRlJywnanF1ZXJ5LnNhcC5hY3QnLCdqcXVlcnkuc2FwLmRvbScsJ2pxdWVyeS5zYXAuZXZlbnRzJywnanF1ZXJ5LnNhcC5tb2JpbGUnLCdqcXVlcnkuc2FwLnByb3BlcnRpZXMnLCdqcXVlcnkuc2FwLnJlc291cmNlcycsJ2pxdWVyeS5zYXAuc2NyaXB0J10sZnVuY3Rpb24ocSxELEcsYSxFLEMsYyxkLGUsZyxGLFIsaCxULFUsail7InVzZSBzdHJpY3QiO3ZhciBrPUUuZXh0ZW5kKCJzYXAudWkuY29yZS5Db3JlIix7Y29uc3RydWN0b3I6ZnVuY3Rpb24oKXtpZihzYXAudWkuZ2V0Q29yZSYmc2FwLnVpLmdldENvcmUoKSl7cmV0dXJuIHNhcC51aS5nZXRDb3JlKCl9dmFyIHQ9dGhpcyxsPXEuc2FwLmxvZyxNPSJzYXAudWkuY29yZS5Db3JlIjtFLmFwcGx5KHRoaXMpO3RoaXMuYkJvb3RlZD1mYWxzZTt0aGlzLmJJbml0aWFsaXplZD1mYWxzZTt0aGlzLmJEb21SZWFkeT1mYWxzZTt0aGlzLmFQbHVnaW5zPVtdO3RoaXMubUxpYnJhcmllcz17fTt0aGlzLm1SZXNvdXJjZUJ1bmRsZXM9e307dGhpcy5tVUlBcmVhcz17fTt0aGlzLm9Nb2RlbHM9e307dGhpcy5vRXZlbnRCdXM9bnVsbDt0aGlzLm1FbGVtZW50cz17fTt0aGlzLm1PYmplY3RzPXsiY29tcG9uZW50Ijp7fSwidGVtcGxhdGUiOnt9fTt0aGlzLm9Sb290Q29tcG9uZW50PW51bGw7dGhpcy5hSW5pdExpc3RlbmVycz1bXTt0aGlzLmJJbml0TGVnYWN5TGliPWZhbHNlO2wuaW5mbygiQ3JlYXRpbmcgQ29yZSIsbnVsbCxNKTt0aGlzLm9Db25maWd1cmF0aW9uPW5ldyBjKHRoaXMpO2lmKHRoaXMub0NvbmZpZ3VyYXRpb25bInh4LWJpbmRpbmdTeW50YXgiXT09PSJjb21wbGV4Iil7c2FwLnVpLmJhc2UuTWFuYWdlZE9iamVjdC5iaW5kaW5nUGFyc2VyPXNhcC51aS5iYXNlLkJpbmRpbmdQYXJzZXIuY29tcGxleFBhcnNlcn1pZih0aGlzLm9Db25maWd1cmF0aW9uWyJ4eC1kZXNpZ25Nb2RlIl09PXRydWUpe3NhcC51aS5iYXNlLkJpbmRpbmdQYXJzZXIuX2tlZXBCaW5kaW5nU3RyaW5ncz10cnVlfWcucHJvdG90eXBlLnJlZ2lzdGVyPWZ1bmN0aW9uKEspe3QucmVnaXN0ZXJFbGVtZW50Q2xhc3MoSyl9O2UucHJvdG90eXBlLnJlZ2lzdGVyPWZ1bmN0aW9uKCl7dC5yZWdpc3RlckVsZW1lbnQodGhpcyl9O2UucHJvdG90eXBlLmRlcmVnaXN0ZXI9ZnVuY3Rpb24oKXt0LmRlcmVnaXN0ZXJFbGVtZW50KHRoaXMpfTtDLnByb3RvdHlwZS5yZWdpc3Rlcj1mdW5jdGlvbigpe3QucmVnaXN0ZXJPYmplY3QodGhpcyl9O0MucHJvdG90eXBlLmRlcmVnaXN0ZXI9ZnVuY3Rpb24oKXt0LmRlcmVnaXN0ZXJPYmplY3QodGhpcyl9O2oucHJvdG90eXBlLnJlZ2lzdGVyPWZ1bmN0aW9uKCl7dC5yZWdpc3Rlck9iamVjdCh0aGlzKX07ai5wcm90b3R5cGUuZGVyZWdpc3Rlcj1mdW5jdGlvbigpe3QuZGVyZWdpc3Rlck9iamVjdCh0aGlzKX07dmFyIG09dGhpcy5vQ29uZmlndXJhdGlvbi5tb2R1bGVzO2lmKHRoaXMub0NvbmZpZ3VyYXRpb24uZ2V0RGVidWcoKSl7bS51bnNoaWZ0KCJzYXAtdWktZGVidWciKX12YXIgaT1xLmluQXJyYXkoInNhcC51aS5jb3JlLmxpYnJhcnkiLG0pO2lmKGkhPTApe2lmKGk+MCl7bS5zcGxpY2UoaSwxKX1tLnVuc2hpZnQoInNhcC51aS5jb3JlLmxpYnJhcnkiKX1sLmluZm8oIkRlY2xhcmVkIG1vZHVsZXM6ICIrbSxNKTt2YXIgbz13aW5kb3dbInNhcC11aS1jb25maWciXTtpZih0aGlzLm9Db25maWd1cmF0aW9uLnRoZW1lUm9vdCl7bz1vfHx7fTtvLnRoZW1lcm9vdHM9by50aGVtZXJvb3RzfHx7fTtvLnRoZW1lcm9vdHNbdGhpcy5vQ29uZmlndXJhdGlvbi5nZXRUaGVtZSgpXT10aGlzLm9Db25maWd1cmF0aW9uLnRoZW1lUm9vdH1pZihvKXtpZihvLnRoZW1lcm9vdHMpe2Zvcih2YXIgZiBpbiBvLnRoZW1lcm9vdHMpe3ZhciBuPW8udGhlbWVyb290c1tmXTtpZih0eXBlb2Ygbj09PSJzdHJpbmciKXt0aGlzLnNldFRoZW1lUm9vdChmLG4pfWVsc2V7Zm9yKHZhciBwIGluIG4pe2lmKHAubGVuZ3RoPjApe3RoaXMuc2V0VGhlbWVSb290KGYsW3BdLG5bcF0pfWVsc2V7dGhpcy5zZXRUaGVtZVJvb3QoZixuW3BdKX19fX19fXRoaXMuc1RoZW1lPXRoaXMub0NvbmZpZ3VyYXRpb24uZ2V0VGhlbWUoKTtxKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCkuYWRkQ2xhc3MoInNhcFVpVGhlbWUtIit0aGlzLnNUaGVtZSk7bC5pbmZvKCJEZWNsYXJlZCB0aGVtZSAiK3RoaXMuc1RoZW1lLG51bGwsTSk7aWYodGhpcy5vQ29uZmlndXJhdGlvbi5nZXRSVEwoKSl7cShkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpLmF0dHIoImRpciIsInJ0bCIpO2wuaW5mbygiUlRMIG1vZGUgYWN0aXZhdGVkIixudWxsLE0pfXZhciAkPXEoImh0bWwiKTt2YXIgYj1ELmJyb3dzZXI7dmFyIHM9Yi5uYW1lO2lmKHM9PT1iLkJST1dTRVIuQ0hST01FKXtxLmJyb3dzZXIuc2FmYXJpPWZhbHNlO3EuYnJvd3Nlci5jaHJvbWU9dHJ1ZX1lbHNlIGlmKHM9PT1iLkJST1dTRVIuU0FGQVJJKXtxLmJyb3dzZXIuc2FmYXJpPXRydWU7cS5icm93c2VyLmNocm9tZT1mYWxzZTtpZihiLm1vYmlsZSl7cz0ibSIrc319aWYocyl7cS5icm93c2VyLmZWZXJzaW9uPWIudmVyc2lvbjtxLmJyb3dzZXIubW9iaWxlPWIubW9iaWxlO3M9cytNYXRoLmZsb29yKGIudmVyc2lvbik7JC5hdHRyKCJkYXRhLXNhcC11aS1icm93c2VyIixzKTtsLmRlYnVnKCJCcm93c2VyLUlkOiAiK3MsbnVsbCxNKX0kLmF0dHIoImRhdGEtc2FwLXVpLW9zIixELm9zLm5hbWUrRC5vcy52ZXJzaW9uU3RyKTt2YXIgdT1udWxsO3N3aXRjaChELm9zLm5hbWUpe2Nhc2UgRC5vcy5PUy5JT1M6dT0ic2FwLWlvcyI7YnJlYWs7Y2FzZSBELm9zLk9TLkFORFJPSUQ6dT0ic2FwLWFuZHJvaWQiO2JyZWFrO2Nhc2UgRC5vcy5PUy5CTEFDS0JFUlJZOnU9InNhcC1iYiI7YnJlYWs7Y2FzZSBELm9zLk9TLldJTkRPV1NfUEhPTkU6dT0ic2FwLXdpbnBob25lIjticmVha31pZih1KXskLmFkZENsYXNzKHUpfWlmKHRoaXMub0NvbmZpZ3VyYXRpb24uZ2V0V2VpbnJlSWQoKSl7bC5pbmZvKCJTdGFydGluZyBXRUlOUkUgUmVtb3RlIFdlYiBJbnNwZWN0b3IiKTt2YXIgdz0iPHNjcmlwdCBzcmM9XCIiO3crPXRoaXMub0NvbmZpZ3VyYXRpb24uZ2V0V2VpbnJlU2VydmVyKCk7dys9Ii90YXJnZXQvdGFyZ2V0LXNjcmlwdC1taW4uanMjIjt3Kz1xLnNhcC5lbmNvZGVVUkwodGhpcy5vQ29uZmlndXJhdGlvbi5nZXRXZWlucmVJZCgpKTt3Kz0iXCI+PC9zY3JpcHQ+Ijtkb2N1bWVudC53cml0ZSh3KX1zYXAudWkuZ2V0Q29yZT1xLnNhcC5nZXR0ZXIodGhpcy5nZXRJbnRlcmZhY2UoKSk7Ui5pbml0SFRNTDVTdXBwb3J0KCk7dGhpcy5vUmVuZGVyTWFuYWdlcj1uZXcgUigpO3ZhciBTPXEuc2FwLnN5bmNQb2ludCgiVUk1IERvY3VtZW50IFJlYWR5IixmdW5jdGlvbihPLEspe3QuaGFuZGxlTG9hZCgpfSk7dmFyIHY9Uy5zdGFydFRhc2soImRvY3VtZW50LnJlYWR5Iik7dmFyIHg9Uy5zdGFydFRhc2soInByZWxvYWQgYW5kIGJvb3QiKTtxKGZ1bmN0aW9uKCl7bC50cmFjZSgiZG9jdW1lbnQgaXMgcmVhZHkiKTtTLmZpbmlzaFRhc2sodil9KTt2YXIgeT1xLnNhcC5zeW5jUG9pbnQoIlVJNSBDb3JlIFByZWxvYWRzIGFuZCBCb290c3RyYXAgU2NyaXB0IixmdW5jdGlvbihPLEspe2wudHJhY2UoIkNvcmUgbG9hZGVkOiBvcGVuPSIrTysiLCBmYWlsdXJlcz0iK0spO3QuX2Jvb3QoKTtTLmZpbmlzaFRhc2soeCl9KTt2YXIgej10aGlzLm9Db25maWd1cmF0aW9uWyJ4eC1ib290VGFzayJdO2lmKHope3ZhciBBPXkuc3RhcnRUYXNrKCJjdXN0b20gYm9vdCB0YXNrIik7eihmdW5jdGlvbihLKXt5LmZpbmlzaFRhc2soQSx0eXBlb2YgSz09PSJ1bmRlZmluZWQifHxLPT09dHJ1ZSl9KX12YXIgQj1uZXcgcS5zYXAuVmVyc2lvbih0aGlzLm9Db25maWd1cmF0aW9uLmdldENvbXBhdGliaWxpdHlWZXJzaW9uKCJmbGV4Qm94UG9seWZpbGwiKSk7aWYoQi5jb21wYXJlVG8oIjEuMTYiKT49MCl7cS5zdXBwb3J0LnVzZUZsZXhCb3hQb2x5ZmlsbD1mYWxzZX1lbHNlIGlmKCFxLnN1cHBvcnQuZmxleEJveExheW91dCYmIXEuc3VwcG9ydC5uZXdGbGV4Qm94TGF5b3V0JiYhcS5zdXBwb3J0LmllMTBGbGV4Qm94TGF5b3V0KXtxLnN1cHBvcnQudXNlRmxleEJveFBvbHlmaWxsPXRydWV9ZWxzZXtxLnN1cHBvcnQudXNlRmxleEJveFBvbHlmaWxsPWZhbHNlfXZhciBIPXkuc3RhcnRUYXNrKCJib290c3RyYXAgc2NyaXB0Iik7dGhpcy5ib290PWZ1bmN0aW9uKCl7aWYodGhpcy5iQm9vdGVkKXtyZXR1cm59dGhpcy5iQm9vdGVkPXRydWU7eS5maW5pc2hUYXNrKEgpfTt2YXIgUD10aGlzLm9Db25maWd1cmF0aW9uLnByZWxvYWQ7aWYod2luZG93WyJzYXAtdWktZGVidWciXSl7UD0iIn1pZihQPT09ImF1dG8iKXtQPSh3aW5kb3dbInNhcC11aS1vcHRpbWl6ZWQiXSYmIXRoaXMub0NvbmZpZ3VyYXRpb25bJ3h4LWxvYWRBbGxNb2RlJ10pPyJzeW5jIjoiIn10aGlzLm9Db25maWd1cmF0aW9uLnByZWxvYWQ9UDtpZihQPT09InN5bmMifHxQPT09ImFzeW5jIil7dmFyIEk9UCE9PSJzeW5jIjtxLmVhY2gobSxmdW5jdGlvbihpLEspe2lmKEsubWF0Y2goL1wubGlicmFyeSQvKSl7cS5zYXAucHJlbG9hZE1vZHVsZXMoSysiLXByZWxvYWQiLEkseSl9fSl9dmFyIEo9dGhpcy5vQ29uZmlndXJhdGlvbi5nZXRBcHBDYWNoZUJ1c3RlcigpO2lmKEomJkoubGVuZ3RoPjApe3Euc2FwLnJlcXVpcmUoInNhcC51aS5jb3JlLkFwcENhY2hlQnVzdGVyIik7c2FwLnVpLmNvcmUuQXBwQ2FjaGVCdXN0ZXIuYm9vdCh5KX19LG1ldGFkYXRhOntwdWJsaWNNZXRob2RzOlsiYm9vdCIsImlzSW5pdGlhbGl6ZWQiLCJpc1RoZW1lQXBwbGllZCIsImF0dGFjaEluaXRFdmVudCIsImF0dGFjaEluaXQiLCJnZXRSZW5kZXJNYW5hZ2VyIiwiY3JlYXRlUmVuZGVyTWFuYWdlciIsImdldENvbmZpZ3VyYXRpb24iLCJzZXRSb290IiwiY3JlYXRlVUlBcmVhIiwiZ2V0VUlBcmVhIiwiZ2V0VUlEaXJ0eSIsImdldEVsZW1lbnRCeUlkIiwiZ2V0Q3VycmVudEZvY3VzZWRDb250cm9sSWQiLCJnZXRDb250cm9sIiwiZ2V0Q29tcG9uZW50IiwiZ2V0VGVtcGxhdGUiLCJsb2NrIiwidW5sb2NrIiwiaXNMb2NrZWQiLCJhdHRhY2hFdmVudCIsImRldGFjaEV2ZW50IiwiYXBwbHlDaGFuZ2VzIiwiZ2V0RXZlbnRCdXMiLCJhcHBseVRoZW1lIiwic2V0VGhlbWVSb290IiwiYXR0YWNoVGhlbWVDaGFuZ2VkIiwiZGV0YWNoVGhlbWVDaGFuZ2VkIiwiZ2V0U3RhdGljQXJlYVJlZiIsInJlZ2lzdGVyUGx1Z2luIiwidW5yZWdpc3RlclBsdWdpbiIsImdldExpYnJhcnlSZXNvdXJjZUJ1bmRsZSIsImJ5SWQiLCJnZXRMb2FkZWRMaWJyYXJpZXMiLCJsb2FkTGlicmFyeSIsImluaXRMaWJyYXJ5IiwiaW5jbHVkZUxpYnJhcnlUaGVtZSIsInNldE1vZGVsIiwiZ2V0TW9kZWwiLCJoYXNNb2RlbCIsImlzTW9iaWxlIiwiYXR0YWNoQ29udHJvbEV2ZW50IiwiZGV0YWNoQ29udHJvbEV2ZW50IiwiYXR0YWNoSW50ZXJ2YWxUaW1lciIsImRldGFjaEludGVydmFsVGltZXIiLCJhdHRhY2hQYXJzZUVycm9yIiwiZGV0YWNoUGFyc2VFcnJvciIsImZpcmVQYXJzZUVycm9yIiwiYXR0YWNoVmFsaWRhdGlvbkVycm9yIiwiZGV0YWNoVmFsaWRhdGlvbkVycm9yIiwiZmlyZVZhbGlkYXRpb25FcnJvciIsImF0dGFjaEZvcm1hdEVycm9yIiwiZGV0YWNoRm9ybWF0RXJyb3IiLCJmaXJlRm9ybWF0RXJyb3IiLCJhdHRhY2hWYWxpZGF0aW9uU3VjY2VzcyIsImRldGFjaFZhbGlkYXRpb25TdWNjZXNzIiwiZmlyZVZhbGlkYXRpb25TdWNjZXNzIiwiYXR0YWNoTG9jYWxpemF0aW9uQ2hhbmdlZCIsImRldGFjaExvY2FsaXphdGlvbkNoYW5nZWQiLCJhdHRhY2hMaWJyYXJ5Q2hhbmdlZCIsImRldGFjaExpYnJhcnlDaGFuZ2VkIiwiaXNTdGF0aWNBcmVhUmVmIiwiY3JlYXRlQ29tcG9uZW50IiwiZ2V0Um9vdENvbXBvbmVudCIsImdldEFwcGxpY2F0aW9uIl19fSk7ay5NX0VWRU5UUz17Q29udHJvbEV2ZW50OiJDb250cm9sRXZlbnQiLFVJVXBkYXRlZDoiVUlVcGRhdGVkIixUaGVtZUNoYW5nZWQ6IlRoZW1lQ2hhbmdlZCIsTG9jYWxpemF0aW9uQ2hhbmdlZDoibG9jYWxpemF0aW9uQ2hhbmdlZCIsTGlicmFyeUNoYW5nZWQ6ImxpYnJhcnlDaGFuZ2VkIixWYWxpZGF0aW9uRXJyb3I6InZhbGlkYXRpb25FcnJvciIsUGFyc2VFcnJvcjoicGFyc2VFcnJvciIsRm9ybWF0RXJyb3I6ImZvcm1hdEVycm9yIixWYWxpZGF0aW9uU3VjY2VzczoidmFsaWRhdGlvblN1Y2Nlc3MifTtrLnByb3RvdHlwZS5fYm9vdD1mdW5jdGlvbigpe3RoaXMubG9jaygpO3ZhciBiPXRoaXMub0NvbmZpZ3VyYXRpb25bJ3h4LXByZWxvYWRMaWJDc3MnXTtpZihiLmxlbmd0aD4wKXt2YXIgQT1iWzBdLnNsaWNlKDAsMSk9PT0iISI7aWYoQSl7YlswXT1iWzBdLnNsaWNlKDEpfWlmKGJbMF09PT0iKiIpe2Iuc3BsaWNlKDAsMSk7dmFyIHA9MDtxLmVhY2godGhpcy5vQ29uZmlndXJhdGlvbi5tb2R1bGVzLGZ1bmN0aW9uKGksZil7dmFyIG09Zi5tYXRjaCgvXiguKilcLmxpYnJhcnkkLyk7aWYobSl7Yi5zcGxpY2UocCwwLG1bMV0pfX0pfWlmKCFBKXt0aGlzLmluY2x1ZGVMaWJyYXJ5VGhlbWUoInNhcC11aS1tZXJnZWQiLHVuZGVmaW5lZCwiP2w9IitiLmpvaW4oIiwiKSl9fXZhciB0PXRoaXM7cS5lYWNoKHRoaXMub0NvbmZpZ3VyYXRpb24ubW9kdWxlcyxmdW5jdGlvbihpLGYpe3ZhciBtPWYubWF0Y2goL14oLiopXC5saWJyYXJ5JC8pO2lmKG0pe3QubG9hZExpYnJhcnkobVsxXSl9ZWxzZXtxLnNhcC5yZXF1aXJlKGYpfX0pO3RoaXMudW5sb2NrKCl9O2sucHJvdG90eXBlLmFwcGx5VGhlbWU9ZnVuY3Rpb24odCxzKXt0PXRoaXMub0NvbmZpZ3VyYXRpb24uX25vcm1hbGl6ZVRoZW1lKHQscyk7aWYocyl7dGhpcy5zZXRUaGVtZVJvb3QodCxzKX1pZih0JiZ0aGlzLnNUaGVtZSE9dCl7dmFyIGI9dGhpcy5zVGhlbWU7dGhpcy5fdXBkYXRlVGhlbWVVcmxzKHQpO3RoaXMuc1RoZW1lPXQ7dGhpcy5vQ29uZmlndXJhdGlvbi5fc2V0VGhlbWUodCk7cShkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpLnJlbW92ZUNsYXNzKCJzYXBVaVRoZW1lLSIrYikuYWRkQ2xhc3MoInNhcFVpVGhlbWUtIit0KTtpZih0aGlzLm9UaGVtZUNoZWNrKXt0aGlzLm9UaGVtZUNoZWNrLmZpcmVUaGVtZUNoYW5nZWRFdmVudChmYWxzZSx0cnVlKX19fTtrLnByb3RvdHlwZS5fdXBkYXRlVGhlbWVVcmxzPWZ1bmN0aW9uKHQpe3ZhciBiPXRoaXMscz10aGlzLm9Db25maWd1cmF0aW9uLmdldFJUTCgpPyItUlRMIjoiIjtxKCJsaW5rW2lkXj1zYXAtdWktdGhlbWUtXSIpLmVhY2goZnVuY3Rpb24oKXt2YXIgbD10aGlzLmlkLnNsaWNlKDEzKSxMPXRoaXMuaHJlZi5zbGljZSh0aGlzLmhyZWYubGFzdEluZGV4T2YoIi8iKSsxKSxTPSJsaWJyYXJ5IixILHAsJD1xKHRoaXMpO2lmKChwPWwuaW5kZXhPZigiLVsiKSk+MCl7Uys9bC5zbGljZShwKzIsLTEpO2w9bC5zbGljZSgwLHApfWlmKEw9PT0oUysiLmNzcyIpfHxMPT09KFMrIi1SVEwuY3NzIikpe0w9UytzKyIuY3NzIn1pZigkLmF0dHIoInNhcC11aS1jc3MtY291bnQiKSl7JC5yZW1vdmUoKX1IPWIuX2dldFRoZW1lUGF0aChsLHQpK0w7aWYoSCE9dGhpcy5ocmVmKXt0aGlzLmhyZWY9SDskLnJlbW92ZUF0dHIoInNhcC11aS1yZWFkeSIpfX0pfTtrLnByb3RvdHlwZS5fZ2V0VGhlbWVQYXRoPWZ1bmN0aW9uKGwsdCl7aWYodGhpcy5fbVRoZW1lUm9vdHMpe3ZhciBwPXRoaXMuX21UaGVtZVJvb3RzW3QrIiAiK2xdfHx0aGlzLl9tVGhlbWVSb290c1t0XTtpZihwKXtwPXArbC5yZXBsYWNlKC9cLi9nLCIvIikrIi90aGVtZXMvIit0KyIvIjtxLnNhcC5yZWdpc3Rlck1vZHVsZVBhdGgobCsiLnRoZW1lcy4iK3QscCk7cmV0dXJuIHB9fXJldHVybiBxLnNhcC5nZXRNb2R1bGVQYXRoKGwrIi50aGVtZXMuIit0LCIvIil9O2sucHJvdG90eXBlLnNldFRoZW1lUm9vdD1mdW5jdGlvbih0LGwscyl7aWYoIXRoaXMuX21UaGVtZVJvb3RzKXt0aGlzLl9tVGhlbWVSb290cz17fX1pZihzPT09dW5kZWZpbmVkKXtzPWw7bD11bmRlZmluZWR9cz1zKyhzLnNsaWNlKC0xKT09Ii8iPyIiOiIvIik7aWYobCl7Zm9yKHZhciBpPTA7aTxsLmxlbmd0aDtpKyspe3ZhciBiPWxbaV07dGhpcy5fbVRoZW1lUm9vdHNbdCsiICIrYl09c319ZWxzZXt0aGlzLl9tVGhlbWVSb290c1t0XT1zfXJldHVybiB0aGlzfTtrLnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKCl7aWYodGhpcy5iSW5pdGlhbGl6ZWQpe3JldHVybn12YXIgYj1xLnNhcC5sb2csTT0ic2FwLnVpLmNvcmUuQ29yZS5pbml0KCkiO3RoaXMuYm9vdCgpO2IuaW5mbygiSW5pdGlhbGl6aW5nIixudWxsLE0pO3RoaXMub0ZvY3VzSGFuZGxlcj1uZXcgRihkb2N1bWVudC5ib2R5LHRoaXMpO3RoaXMub1Jlc2l6ZUhhbmRsZXI9bmV3IGgodGhpcyk7dGhpcy5vVGhlbWVDaGVjaz1uZXcgVCh0aGlzKTtiLmluZm8oIkluaXRpYWxpemVkIixudWxsLE0pO3RoaXMuYkluaXRpYWxpemVkPXRydWU7Yi5pbmZvKCJTdGFydGluZyBQbHVnaW5zIixudWxsLE0pO3RoaXMuc3RhcnRQbHVnaW5zKCk7Yi5pbmZvKCJQbHVnaW5zIHN0YXJ0ZWQiLG51bGwsTSk7dmFyIG89dGhpcy5vQ29uZmlndXJhdGlvbjtpZihvLmFyZWFzKXtmb3IodmFyIGk9MCxsPW8uYXJlYXMubGVuZ3RoO2k8bDtpKyspe3RoaXMuY3JlYXRlVUlBcmVhKG8uYXJlYXNbaV0pfW8uYXJlYXM9dW5kZWZpbmVkfWlmKG8ub25Jbml0KXtpZih0eXBlb2Ygby5vbkluaXQ9PT0iZnVuY3Rpb24iKXtvLm9uSW5pdCgpfWVsc2V7cS5zYXAuZ2xvYmFsRXZhbChvLm9uSW5pdCl9by5vbkluaXQ9dW5kZWZpbmVkfXRoaXMub1RoZW1lQ2hlY2suZmlyZVRoZW1lQ2hhbmdlZEV2ZW50KHRydWUpO3ZhciBzPW8uZ2V0Um9vdENvbXBvbmVudCgpO2lmKHMpe2IuaW5mbygiTG9hZGluZyBSb290IENvbXBvbmVudDogIitzLG51bGwsTSk7dmFyIG09c2FwLnVpLmNvbXBvbmVudCh7bmFtZTpzfSk7dGhpcy5vUm9vdENvbXBvbmVudD1tO3ZhciBuPW9bInh4LXJvb3RDb21wb25lbnROb2RlIl07aWYobiYmbSBpbnN0YW5jZW9mIHNhcC51aS5jb3JlLlVJQ29tcG9uZW50KXt2YXIgcD1xLnNhcC5kb21CeUlkKG4pO2lmKHApe2IuaW5mbygiQ3JlYXRpbmcgQ29tcG9uZW50Q29udGFpbmVyIGZvciBSb290IENvbXBvbmVudDogIitzLG51bGwsTSk7dmFyIHQ9bmV3IHNhcC51aS5jb3JlLkNvbXBvbmVudENvbnRhaW5lcih7Y29tcG9uZW50Om0scHJvcGFnYXRlTW9kZWw6dHJ1ZX0pO3QucGxhY2VBdChwKX19fWVsc2V7dmFyIEE9by5nZXRBcHBsaWNhdGlvbigpO2lmKEEpe2Iud2FybmluZygiVGhlIGNvbmZpZ3VyYXRpb24gJ2FwcGxpY2F0aW9uJyBpcyBkZXByZWNhdGVkLiBQbGVhc2UgdXNlIHRoZSBjb25maWd1cmF0aW9uICdjb21wb25lbnQnIGluc3RlYWQhIFBsZWFzZSBtaWdyYXRlIGZyb20gc2FwLnVpLmFwcC5BcHBsaWNhdGlvbiB0byBzYXAudWkuY29yZS5Db21wb25lbnQuIik7Yi5pbmZvKCJMb2FkaW5nIEFwcGxpY2F0aW9uOiAiK0EsbnVsbCxNKTtxLnNhcC5yZXF1aXJlKEEpO3ZhciB1PXEuc2FwLmdldE9iamVjdChBKTt2YXIgdj1uZXcgdSgpO319dmFyIHc9dGhpcy5hSW5pdExpc3RlbmVyczt0aGlzLmFJbml0TGlzdGVuZXJzPXVuZGVmaW5lZDtpZih3JiZ3Lmxlbmd0aD4wKXtiLmluZm8oIkZpcmUgTG9hZGVkIEV2ZW50IixudWxsLE0pO3EuZWFjaCh3LGZ1bmN0aW9uKGksZil7ZigpfSl9dGhpcy5yZW5kZXJQZW5kaW5nVUlVcGRhdGVzKCl9O2sucHJvdG90eXBlLmhhbmRsZUxvYWQ9ZnVuY3Rpb24oKXt0aGlzLmJEb21SZWFkeT10cnVlO3ZhciB3PXRoaXMuaXNMb2NrZWQoKTtpZighdyl7dGhpcy5sb2NrKCl9dGhpcy5pbml0KCk7aWYoIXcpe3RoaXMudW5sb2NrKCl9fTtrLnByb3RvdHlwZS5pc0luaXRpYWxpemVkPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYkluaXRpYWxpemVkfTtrLnByb3RvdHlwZS5pc1RoZW1lQXBwbGllZD1mdW5jdGlvbigpe3JldHVybiBULnRoZW1lTG9hZGVkfTtrLnByb3RvdHlwZS5hdHRhY2hJbml0RXZlbnQ9ZnVuY3Rpb24oZil7aWYodGhpcy5hSW5pdExpc3RlbmVycyl7dGhpcy5hSW5pdExpc3RlbmVycy5wdXNoKGYpfX07ay5wcm90b3R5cGUuYXR0YWNoSW5pdD1mdW5jdGlvbihmKXtpZih0aGlzLmFJbml0TGlzdGVuZXJzKXt0aGlzLmFJbml0TGlzdGVuZXJzLnB1c2goZil9ZWxzZXtmKCl9fTtrLnByb3RvdHlwZS5sb2NrPWZ1bmN0aW9uKCl7dGhpcy5iTG9ja2VkPXRydWV9O2sucHJvdG90eXBlLnVubG9jaz1mdW5jdGlvbigpe3RoaXMuYkxvY2tlZD1mYWxzZX07ay5wcm90b3R5cGUuaXNMb2NrZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5iTG9ja2VkfTtrLnByb3RvdHlwZS5nZXRDb25maWd1cmF0aW9uPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub0NvbmZpZ3VyYXRpb259O2sucHJvdG90eXBlLmdldFJlbmRlck1hbmFnZXI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jcmVhdGVSZW5kZXJNYW5hZ2VyKCl9O2sucHJvdG90eXBlLmNyZWF0ZVJlbmRlck1hbmFnZXI9ZnVuY3Rpb24oKXtyZXR1cm4obmV3IFIoKSkuZ2V0SW50ZXJmYWNlKCl9O2sucHJvdG90eXBlLmdldEN1cnJlbnRGb2N1c2VkQ29udHJvbElkPWZ1bmN0aW9uKCl7aWYoIXRoaXMuaXNJbml0aWFsaXplZCgpKXt0aHJvdyBuZXcgRXJyb3IoIkNvcmUgbXVzdCBiZSBpbml0aWFsaXplZCIpfXJldHVybiB0aGlzLm9Gb2N1c0hhbmRsZXIuZ2V0Q3VycmVudEZvY3VzZWRDb250cm9sSWQoKX07ay5wcm90b3R5cGUubG9hZExpYnJhcnk9ZnVuY3Rpb24obCx1KXtpZighdGhpcy5tTGlicmFyaWVzW2xdKXt2YXIgbT1sKyIubGlicmFyeSIsQTtpZih1KXtxLnNhcC5yZWdpc3Rlck1vZHVsZVBhdGgobCx1KX1pZih0aGlzLm9Db25maWd1cmF0aW9uWyd4eC1sb2FkQWxsTW9kZSddJiYhcS5zYXAuaXNEZWNsYXJlZChtKSl7QT1tKyItYWxsIjtxLnNhcC5sb2cuZGVidWcoImxvYWQgYWxsLWluLW9uZSBmaWxlICIrQSk7cS5zYXAucmVxdWlyZShBKX1lbHNlIGlmKHRoaXMub0NvbmZpZ3VyYXRpb24ucHJlbG9hZD09PSdzeW5jJ3x8dGhpcy5vQ29uZmlndXJhdGlvbi5wcmVsb2FkPT09J2FzeW5jJyl7cS5zYXAucHJlbG9hZE1vZHVsZXMobSsiLXByZWxvYWQiLGZhbHNlKX1xLnNhcC5yZXF1aXJlKG0pO2lmKCF0aGlzLm1MaWJyYXJpZXNbbF0pe3Euc2FwLmxvZy53YXJuaW5nKCJsaWJyYXJ5ICIrbCsiIGRpZG4ndCBpbml0aWFsaXplIGl0c2VsZiIpO3RoaXMuaW5pdExpYnJhcnkobCl9aWYodGhpcy5vVGhlbWVDaGVjayYmdGhpcy5pc0luaXRpYWxpemVkKCkpe3RoaXMub1RoZW1lQ2hlY2suZmlyZVRoZW1lQ2hhbmdlZEV2ZW50KHRydWUpfX1yZXR1cm4gdGhpcy5tTGlicmFyaWVzW2xdfTtrLnByb3RvdHlwZS5jcmVhdGVDb21wb25lbnQ9ZnVuY3Rpb24odix1LGkscyl7aWYodHlwZW9mIHY9PT0ic3RyaW5nIil7dj17bmFtZTp2LHVybDp1fTtpZih0eXBlb2YgaT09PSJvYmplY3QiKXt2LnNldHRpbmdzPWl9ZWxzZXt2LmlkPWk7di5zZXR0aW5ncz1zfX1yZXR1cm4gc2FwLnVpLmNvbXBvbmVudCh2KX07ay5wcm90b3R5cGUuZ2V0Um9vdENvbXBvbmVudD1mdW5jdGlvbigpe3JldHVybiB0aGlzLm9Sb290Q29tcG9uZW50fTtrLnByb3RvdHlwZS5pbml0TGlicmFyeT1mdW5jdGlvbihsKXt2YXIgTD10eXBlb2YgbD09PSJzdHJpbmciLG89TD97bmFtZTpsfTpsLHM9by5uYW1lLGI9cS5zYXAubG9nLE09InNhcC51aS5jb3JlLkNvcmUuaW5pdExpYnJhcnkoKSI7aWYoTCl7Yi53YXJuaW5nKCJbRGVwcmVjYXRlZF0gbGlicmFyeSAiK3MrIiB1c2VzIG9sZCBmYXNoaW9uZWQgaW5pdExpYnJhcnkoKSBjYWxsIChyZWJ1aWxkIHdpdGggbmV3ZXN0IGdlbmVyYXRvcikiKX1pZighc3x8dGhpcy5tTGlicmFyaWVzW3NdKXtyZXR1cm59Yi5kZWJ1ZygiQW5hbHl6aW5nIExpYnJhcnkgIitzLG51bGwsTSk7dGhpcy5tTGlicmFyaWVzW3NdPW89cS5leHRlbmQoe2RlcGVuZGVuY2llczpbXSx0eXBlczpbXSxpbnRlcmZhY2VzOltdLGNvbnRyb2xzOltdLGVsZW1lbnRzOltdfSxvKTtmdW5jdGlvbiBmKCl7dmFyIHA9cS5zYXAucHJvcGVydGllcyh7dXJsOnNhcC51aS5yZXNvdXJjZShzLCJsaWJyYXJ5LnByb3BlcnRpZXMiKX0pO28udmVyc2lvbj1wLmdldFByb3BlcnR5KHMrIlt2ZXJzaW9uXSIpO3ZhciB0PXAuZ2V0UHJvcGVydHkocysiW2RlcGVuZGVuY2llc10iKTtiLmRlYnVnKCJSZXF1aXJlZCBMaWJyYXJpZXM6ICIrdCxudWxsLE0pO28uZGVwZW5kZW5jaWVzPSh0JiZ0LnNwbGl0KC9bLDt8IF0vKSl8fFtdO3ZhciBLPXAuZ2V0S2V5cygpLHU9LyguKylcLih0eXBlfGludGVyZmFjZXxjb250cm9sfGVsZW1lbnQpJC8sdjtmb3IodmFyIGk9MDtpPEsubGVuZ3RoO2krKyl7dmFyIHc9cC5nZXRQcm9wZXJ0eShLW2ldKTtpZih2PXcubWF0Y2godSkpe29bdlsyXSsicyJdLnB1c2goS1tpXSl9fX1pZihMKXtmKCl9Zm9yKHZhciBpPTA7aTxvLmRlcGVuZGVuY2llcy5sZW5ndGg7aSsrKXt2YXIgbT1vLmRlcGVuZGVuY2llc1tpXTtiLmRlYnVnKCJyZXNvbHZlIERlcGVuZGVuY2llcyB0byAiK20sbnVsbCxNKTtpZighdGhpcy5tTGlicmFyaWVzW21dKXtiLndhcm5pbmcoIkRlcGVuZGVuY3kgZnJvbSAiK3MrIiB0byAiK20rIiBoYXMgbm90IGJlZW4gcmVzb2x2ZWQgYnkgbGlicmFyeSBpdHNlbGYiLG51bGwsTSk7dGhpcy5sb2FkTGlicmFyeShtKX19YS5yZWdpc3RlckludGVyZmFjZVR5cGVzKG8uaW50ZXJmYWNlcyk7dmFyIG49by5jb250cm9scy5jb25jYXQoby5lbGVtZW50cyk7Zm9yKHZhciBpPTA7aTxuLmxlbmd0aDtpKyspe3NhcC51aS5sYXp5UmVxdWlyZShuW2ldLCJuZXcgZXh0ZW5kIGdldE1ldGFkYXRhIil9aWYoIW8ubm9MaWJyYXJ5Q1NTJiZxLmluQXJyYXkocyx0aGlzLm9Db25maWd1cmF0aW9uWyd4eC1wcmVsb2FkTGliQ3NzJ10pPDApe3RoaXMuaW5jbHVkZUxpYnJhcnlUaGVtZShzKX1vLnNOYW1lPW8ubmFtZTtvLmFDb250cm9scz1vLmNvbnRyb2xzO2lmKCFxLnNhcC5pc0RlY2xhcmVkKHMrIi5saWJyYXJ5Iikpe2Iud2FybmluZygiTGlicmFyeSBNb2R1bGUgIitzKyIubGlicmFyeSIrIiBub3QgbG9hZGVkIGF1dG9tYXRpY2FsbHkiLG51bGwsTSk7cS5zYXAucmVxdWlyZShzKyIubGlicmFyeSIpfXRoaXMuZmlyZUxpYnJhcnlDaGFuZ2VkKHtuYW1lOnMsc3RlcmVvdHlwZToibGlicmFyeSIsb3BlcmF0aW9uOiJhZGQiLG1ldGFkYXRhOm99KX07ay5wcm90b3R5cGUuaW5jbHVkZUxpYnJhcnlUaGVtZT1mdW5jdGlvbihsLHYsUSl7aWYoKGwhPSJzYXAudWkubGVnYWN5IikmJihsIT0ic2FwLnVpLmNsYXNzaWMiKSl7aWYoIXYpe3Y9IiJ9dmFyIHM9KHRoaXMub0NvbmZpZ3VyYXRpb24uZ2V0UlRMKCk/Ii1SVEwiOiIiKTt2YXIgTCxiPWwrKHYubGVuZ3RoPjA/Ii1bIit2KyJdIjp2KTtpZihsJiZsLmluZGV4T2YoIjoiKT09LTEpe0w9ImxpYnJhcnkiK3Yrc31lbHNle0w9bC5zdWJzdHJpbmcobC5pbmRleE9mKCI6IikrMSkrdjtsPWwuc3Vic3RyaW5nKDAsbC5pbmRleE9mKCI6IikpfXZhciBmPXRoaXMuX2dldFRoZW1lUGF0aChsLHRoaXMuc1RoZW1lKStMKyIuY3NzIisoUT9ROiIiKTtxLnNhcC5sb2cuaW5mbygiSW5jbHVkaW5nICIrZisiIC0gIHNhcC51aS5jb3JlLkNvcmUuaW5jbHVkZUxpYnJhcnlUaGVtZSgpIik7cS5zYXAuaW5jbHVkZVN0eWxlU2hlZXQoZiwic2FwLXVpLXRoZW1lLSIrYik7aWYoc2FwLnVpLmNvcmUudGhlbWluZyYmc2FwLnVpLmNvcmUudGhlbWluZy5QYXJhbWV0ZXJzKXtzYXAudWkuY29yZS50aGVtaW5nLlBhcmFtZXRlcnMuX2FkZExpYnJhcnlUaGVtZShiKX19fTtrLnByb3RvdHlwZS5nZXRMb2FkZWRMaWJyYXJpZXM9ZnVuY3Rpb24oKXtyZXR1cm4gcS5leHRlbmQoe30sdGhpcy5tTGlicmFyaWVzKX07ay5wcm90b3R5cGUuZ2V0TGlicmFyeVJlc291cmNlQnVuZGxlPWZ1bmN0aW9uKGwsTCl7bD1sfHwic2FwLnVpLmNvcmUiO0w9THx8dGhpcy5nZXRDb25maWd1cmF0aW9uKCkuZ2V0TGFuZ3VhZ2UoKTt2YXIgSz1sKyIvIitMO2lmKCF0aGlzLm1SZXNvdXJjZUJ1bmRsZXNbS10pe3ZhciB1PXNhcC51aS5yZXNvdXJjZShsLCdtZXNzYWdlYnVuZGxlLnByb3BlcnRpZXMnKTt0aGlzLm1SZXNvdXJjZUJ1bmRsZXNbS109cS5zYXAucmVzb3VyY2VzKHt1cmw6dSxsb2NhbGU6TH0pfXJldHVybiB0aGlzLm1SZXNvdXJjZUJ1bmRsZXNbS119O2sucHJvdG90eXBlLnNldFJvb3Q9ZnVuY3Rpb24obyxiKXtpZihiKXtiLnBsYWNlQXQobywib25seSIpfX07ay5wcm90b3R5cGUuY3JlYXRlVUlBcmVhPWZ1bmN0aW9uKG8pe3ZhciB0PXRoaXM7aWYoIW8pe3Rocm93IG5ldyBFcnJvcigib0RvbVJlZiBtdXN0IG5vdCBiZSBudWxsIil9aWYodHlwZW9mKG8pPT09InN0cmluZyIpe3ZhciBpPW87bz1xLnNhcC5kb21CeUlkKG8pO2lmKCFvKXt0aHJvdyBuZXcgRXJyb3IoIkRPTSBlbGVtZW50IHdpdGggSUQgJyIraSsiJyBub3QgZm91bmQgaW4gcGFnZSwgYnV0IGFwcGxpY2F0aW9uIHRyaWVzIHRvIGluc2VydCBjb250ZW50LiIpfX1pZighby5pZHx8by5pZC5sZW5ndGg9PTApe28uaWQ9cS5zYXAudWlkKCl9dmFyIEk9by5pZDtpZighdGhpcy5tVUlBcmVhc1tJXSl7dGhpcy5tVUlBcmVhc1tJXT1uZXcgVSh0aGlzLG8pO3EuZWFjaCh0aGlzLm9Nb2RlbHMsZnVuY3Rpb24obixtKXt0Lm1VSUFyZWFzW0ldLm9Qcm9wYWdhdGVkUHJvcGVydGllcy5vTW9kZWxzW25dPW19KTt0aGlzLm1VSUFyZWFzW0ldLnByb3BhZ2F0ZVByb3BlcnRpZXModHJ1ZSl9ZWxzZXt0aGlzLm1VSUFyZWFzW0ldLnNldFJvb3ROb2RlKG8pfXJldHVybiB0aGlzLm1VSUFyZWFzW0ldfTtrLnByb3RvdHlwZS5nZXRVSUFyZWE9ZnVuY3Rpb24obyl7dmFyIGk9IiI7aWYodHlwZW9mKG8pPT0ic3RyaW5nIil7aT1vfWVsc2V7aT1vLmlkfWlmKGkpe3JldHVybiB0aGlzLm1VSUFyZWFzW2ldfXJldHVybiBudWxsfTt2YXIgcj1VLl9vUmVuZGVyTG9nO2sucHJvdG90eXBlLmFkZEludmFsaWRhdGVkVUlBcmVhPWZ1bmN0aW9uKHUpe2lmKCF0aGlzLl9zUmVyZW5kZXJUaW1lcil7ci5kZWJ1ZygiUmVnaXN0ZXJpbmcgdGltZXIgZm9yIGRlbGF5ZWQgcmUtcmVuZGVyaW5nIik7dGhpcy5fc1JlcmVuZGVyVGltZXI9cS5zYXAuZGVsYXllZENhbGwoMCx0aGlzLCJyZW5kZXJQZW5kaW5nVUlVcGRhdGVzIil9fTtrLk1BWF9SRU5ERVJJTkdfSVRFUkFUSU9OUz0yMDtrLnByb3RvdHlwZS5yZW5kZXJQZW5kaW5nVUlVcGRhdGVzPWZ1bmN0aW9uKCl7ci5kZWJ1ZygiUmVuZGVyIHBlbmRpbmcgVUkgdXBkYXRlczogc3RhcnQiKTtxLnNhcC5tZWFzdXJlLnN0YXJ0KCJyZW5kZXJQZW5kaW5nVUlVcGRhdGVzIiwiUmVuZGVyIHBlbmRpbmcgVUkgdXBkYXRlcyBpbiBhbGwgVUlBcmVhcyIpO3ZhciB1PWZhbHNlLGw9ay5NQVhfUkVOREVSSU5HX0lURVJBVElPTlM+MCxMPTA7dGhpcy5fYlJlbmRlcmluZz10cnVlO2Rve2lmKGwpe0wrKztpZihMPmsuTUFYX1JFTkRFUklOR19JVEVSQVRJT05TKXt0aGlzLl9iUmVuZGVyaW5nPWZhbHNlO3Rocm93IG5ldyBFcnJvcigiUmVuZGVyaW5nIGhhcyBiZWVuIHJlLXN0YXJ0ZWQgdG9vIG1hbnkgdGltZXMgKCIrTCsiKS4gQWRkIFVSTCBwYXJhbWV0ZXIgc2FwLXVpLXh4LWRlYnVnUmVuZGVyaW5nPXRydWUgZm9yIGEgZGV0YWlsZWQgYW5hbHlzaXMuIil9aWYoTD4xKXtyLmRlYnVnKCJSZW5kZXIgcGVuZGluZyBVSSB1cGRhdGVzOiBpdGVyYXRpb24gIitMKX19aWYodGhpcy5fc1JlcmVuZGVyVGltZXIpe3Euc2FwLmNsZWFyRGVsYXllZENhbGwodGhpcy5fc1JlcmVuZGVyVGltZXIpO3RoaXMuX3NSZXJlbmRlclRpbWVyPXVuZGVmaW5lZH12YXIgbT10aGlzLm1VSUFyZWFzO2Zvcih2YXIgaSBpbiBtKXt1PW1baV0ucmVyZW5kZXIoKXx8dX19d2hpbGUobCYmdGhpcy5fc1JlcmVuZGVyVGltZXIpO3RoaXMuX2JSZW5kZXJpbmc9ZmFsc2U7aWYodSl7dGhpcy5maXJlVUlVcGRhdGVkKCl9ci5kZWJ1ZygiUmVuZGVyIHBlbmRpbmcgVUkgdXBkYXRlczogZmluaXNoZWQiKTtxLnNhcC5tZWFzdXJlLmVuZCgicmVuZGVyUGVuZGluZ1VJVXBkYXRlcyIpfTtrLnByb3RvdHlwZS5nZXRVSURpcnR5PWZ1bmN0aW9uKCl7cmV0dXJuISEodGhpcy5fc1JlcmVuZGVyVGltZXJ8fHRoaXMuX2JSZW5kZXJpbmcpfTtrLnByb3RvdHlwZS5hdHRhY2hVSVVwZGF0ZWQ9ZnVuY3Rpb24oZixsKXt0aGlzLmF0dGFjaEV2ZW50KGsuTV9FVkVOVFMuVUlVcGRhdGVkLGYsbCl9O2sucHJvdG90eXBlLmRldGFjaFVJVXBkYXRlZD1mdW5jdGlvbihmLGwpe3RoaXMuZGV0YWNoRXZlbnQoay5NX0VWRU5UUy5VSVVwZGF0ZWQsZixsKX07ay5wcm90b3R5cGUuZmlyZVVJVXBkYXRlZD1mdW5jdGlvbihwKXt0aGlzLmZpcmVFdmVudChrLk1fRVZFTlRTLlVJVXBkYXRlZCxwKX07ay5wcm90b3R5cGUuYXR0YWNoVGhlbWVDaGFuZ2VkPWZ1bmN0aW9uKGYsbCl7dGhpcy5hdHRhY2hFdmVudChrLk1fRVZFTlRTLlRoZW1lQ2hhbmdlZCxmLGwpfTtrLnByb3RvdHlwZS5kZXRhY2hUaGVtZUNoYW5nZWQ9ZnVuY3Rpb24oZixsKXt0aGlzLmRldGFjaEV2ZW50KGsuTV9FVkVOVFMuVGhlbWVDaGFuZ2VkLGYsbCl9O2sucHJvdG90eXBlLmZpcmVUaGVtZUNoYW5nZWQ9ZnVuY3Rpb24ocCl7cS5zYXAuc2Nyb2xsYmFyU2l6ZSh0cnVlKTtpZihzYXAudWkuY29yZS50aGVtaW5nJiZzYXAudWkuY29yZS50aGVtaW5nLlBhcmFtZXRlcnMpe3NhcC51aS5jb3JlLnRoZW1pbmcuUGFyYW1ldGVycy5yZXNldCh0cnVlKX12YXIgcz1rLk1fRVZFTlRTLlRoZW1lQ2hhbmdlZDt2YXIgbz1xLkV2ZW50KHMpO28udGhlbWU9cD9wLnRoZW1lOm51bGw7cS5lYWNoKHRoaXMubUVsZW1lbnRzLGZ1bmN0aW9uKGksYil7Yi5faGFuZGxlRXZlbnQobyl9KTtxLnNhcC5hY3QucmVmcmVzaCgpO3RoaXMuZmlyZUV2ZW50KHMscCl9O2sucHJvdG90eXBlLmF0dGFjaExvY2FsaXphdGlvbkNoYW5nZWQ9ZnVuY3Rpb24oZixsKXt0aGlzLmF0dGFjaEV2ZW50KGsuTV9FVkVOVFMuTG9jYWxpemF0aW9uQ2hhbmdlZCxmLGwpfTtrLnByb3RvdHlwZS5kZXRhY2hMb2NhbGl6YXRpb25DaGFuZ2VkPWZ1bmN0aW9uKGYsbCl7dGhpcy5kZXRhY2hFdmVudChrLk1fRVZFTlRTLkxvY2FsaXphdGlvbkNoYW5nZWQsZixsKX07ay5wcm90b3R5cGUuZmlyZUxvY2FsaXphdGlvbkNoYW5nZWQ9ZnVuY3Rpb24obSl7dmFyIHQ9dGhpcyxzPWsuTV9FVkVOVFMuTG9jYWxpemF0aW9uQ2hhbmdlZCxiPXEuRXZlbnQocyx7Y2hhbmdlczptfSksQT1zYXAudWkuYmFzZS5NYW5hZ2VkT2JqZWN0Ll9oYW5kbGVMb2NhbGl6YXRpb25DaGFuZ2UsZj1bXTtxLmVhY2gobSxmdW5jdGlvbihpLHYpe2YucHVzaChpKX0pO3Euc2FwLmxvZy5pbmZvKCJsb2NhbGl6YXRpb24gc2V0dGluZ3MgY2hhbmdlZDogIitmLmpvaW4oIiwiKSxudWxsLCJzYXAudWkuY29yZS5Db3JlIik7cS5lYWNoKHRoaXMub01vZGVscyxmdW5jdGlvbihOLE0pe2lmKE0mJk0uX2hhbmRsZUxvY2FsaXphdGlvbkNoYW5nZSl7TS5faGFuZGxlTG9jYWxpemF0aW9uQ2hhbmdlKCl9fSk7ZnVuY3Rpb24gbihwKXtxLmVhY2godGhpcy5tVUlBcmVhcyxmdW5jdGlvbigpe0EuY2FsbCh0aGlzLHApfSk7cS5lYWNoKHRoaXMubU9iamVjdHNbImNvbXBvbmVudCJdLGZ1bmN0aW9uKCl7QS5jYWxsKHRoaXMscCl9KTtxLmVhY2godGhpcy5tRWxlbWVudHMsZnVuY3Rpb24oKXtBLmNhbGwodGhpcyxwKX0pfW4uY2FsbCh0aGlzLDEpO24uY2FsbCh0aGlzLDIpO2lmKG0ucnRsIT11bmRlZmluZWQpe3EoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KS5hdHRyKCJkaXIiLG0ucnRsPyJydGwiOiJsdHIiKTt0aGlzLl91cGRhdGVUaGVtZVVybHModGhpcy5zVGhlbWUpO3EuZWFjaCh0aGlzLm1VSUFyZWFzLGZ1bmN0aW9uKCl7dGhpcy5pbnZhbGlkYXRlKCl9KTtxLnNhcC5sb2cuaW5mbygiUlRMIG1vZGUgIittLnJ0bD8iYWN0aXZhdGVkIjoiZGVhY3RpdmF0ZWQiKX1xLmVhY2godGhpcy5tRWxlbWVudHMsZnVuY3Rpb24oaSxvKXt0aGlzLl9oYW5kbGVFdmVudChiKX0pO3RoaXMuZmlyZUV2ZW50KHMse2NoYW5nZXM6bX0pfTtrLnByb3RvdHlwZS5hdHRhY2hMaWJyYXJ5Q2hhbmdlZD1mdW5jdGlvbihmLGwpe3RoaXMuYXR0YWNoRXZlbnQoay5NX0VWRU5UUy5MaWJyYXJ5Q2hhbmdlZCxmLGwpfTtrLnByb3RvdHlwZS5kZXRhY2hMaWJyYXJ5Q2hhbmdlZD1mdW5jdGlvbihmLGwpe3RoaXMuZGV0YWNoRXZlbnQoay5NX0VWRU5UUy5MaWJyYXJ5Q2hhbmdlZCxmLGwpfTtrLnByb3RvdHlwZS5maXJlTGlicmFyeUNoYW5nZWQ9ZnVuY3Rpb24ocCl7dGhpcy5maXJlRXZlbnQoay5NX0VWRU5UUy5MaWJyYXJ5Q2hhbmdlZCxwKX07ay5wcm90b3R5cGUuYXBwbHlDaGFuZ2VzPWZ1bmN0aW9uKCl7dGhpcy5yZW5kZXJQZW5kaW5nVUlVcGRhdGVzKCl9O2sucHJvdG90eXBlLnJlZ2lzdGVyRWxlbWVudENsYXNzPWZ1bmN0aW9uKG0pe3ZhciBuPW0uZ2V0TmFtZSgpLGw9bS5nZXRMaWJyYXJ5TmFtZSgpfHwiIixMPXRoaXMubUxpYnJhcmllc1tsXSxiPWQucHJvdG90eXBlLmlzUHJvdG90eXBlT2YobS5nZXRDbGFzcygpLnByb3RvdHlwZSksZj1mYWxzZTtpZighTCl7TD10aGlzLm1MaWJyYXJpZXNbbF09e2RlcGVuZGVuY2llczpbXSx0eXBlczpbXSxpbnRlcmZhY2VzOltdLGNvbnRyb2xzOltdLGVsZW1lbnRzOltdfX1pZihiKXtpZihxLmluQXJyYXkobixMLmNvbnRyb2xzKTwwKXtMLmNvbnRyb2xzLnB1c2gobik7Zj10cnVlfX1lbHNle2lmKHEuaW5BcnJheShuLEwuZWxlbWVudHMpPDApe0wuZWxlbWVudHMucHVzaChuKTtmPXRydWV9fWlmKGYpe3Euc2FwLmxvZy5kZWJ1ZygiQ2xhc3MgIittLmdldE5hbWUoKSsiIHJlZ2lzdGVyZWQgZm9yIGxpYnJhcnkgIittLmdldExpYnJhcnlOYW1lKCkpO3RoaXMuZmlyZUxpYnJhcnlDaGFuZ2VkKHtuYW1lOm0uZ2V0TmFtZSgpLHN0ZXJlb3R5cGU6bS5nZXRTdGVyZW90eXBlKCksb3BlcmF0aW9uOiJhZGQiLG1ldGFkYXRhOm19KX19O2sucHJvdG90eXBlLnJlZ2lzdGVyRWxlbWVudD1mdW5jdGlvbihvKXt2YXIgYj10aGlzLmJ5SWQoby5nZXRJZCgpKTtpZihiJiZiIT09byl7aWYodGhpcy5vQ29uZmlndXJhdGlvbi5nZXROb0R1cGxpY2F0ZUlkcygpKXtxLnNhcC5sb2cuZXJyb3IoImFkZGluZyBlbGVtZW50IHdpdGggZHVwbGljYXRlIGlkICciK28uZ2V0SWQoKSsiJyIpO3Rocm93IG5ldyBFcnJvcigiRXJyb3I6IGFkZGluZyBlbGVtZW50IHdpdGggZHVwbGljYXRlIGlkICciK28uZ2V0SWQoKSsiJyIpfWVsc2V7cS5zYXAubG9nLndhcm5pbmcoImFkZGluZyBlbGVtZW50IHdpdGggZHVwbGljYXRlIGlkICciK28uZ2V0SWQoKSsiJyIpfX10aGlzLm1FbGVtZW50c1tvLmdldElkKCldPW99O2sucHJvdG90eXBlLmRlcmVnaXN0ZXJFbGVtZW50PWZ1bmN0aW9uKG8pe2RlbGV0ZSB0aGlzLm1FbGVtZW50c1tvLmdldElkKCldfTtrLnByb3RvdHlwZS5yZWdpc3Rlck9iamVjdD1mdW5jdGlvbihvKXt2YXIgaT1vLmdldElkKCksdD1vLmdldE1ldGFkYXRhKCkuZ2V0U3RlcmVvdHlwZSgpLGI9dGhpcy5nZXRPYmplY3QodCxpKTtpZihiJiZiIT09byl7cS5zYXAubG9nLmVycm9yKCJhZGRpbmcgb2JqZWN0IFwiIit0KyJcIiB3aXRoIGR1cGxpY2F0ZSBpZCAnIitpKyInIik7dGhyb3cgbmV3IEVycm9yKCJFcnJvcjogYWRkaW5nIG9iamVjdCBcIiIrdCsiXCIgd2l0aCBkdXBsaWNhdGUgaWQgJyIraSsiJyIpfXRoaXMubU9iamVjdHNbdF1baV09b307ay5wcm90b3R5cGUuZGVyZWdpc3Rlck9iamVjdD1mdW5jdGlvbihvKXt2YXIgaT1vLmdldElkKCksdD1vLmdldE1ldGFkYXRhKCkuZ2V0U3RlcmVvdHlwZSgpO2RlbGV0ZSB0aGlzLm1PYmplY3RzW3RdW2ldfTtrLnByb3RvdHlwZS5ieUlkPWZ1bmN0aW9uKGkpe3JldHVybiBpPT1udWxsP3VuZGVmaW5lZDp0aGlzLm1FbGVtZW50c1tpXX07ay5wcm90b3R5cGUuZ2V0Q29udHJvbD1rLnByb3RvdHlwZS5ieUlkO2sucHJvdG90eXBlLmdldEVsZW1lbnRCeUlkPWsucHJvdG90eXBlLmJ5SWQ7ay5wcm90b3R5cGUuZ2V0T2JqZWN0PWZ1bmN0aW9uKHQsaSl7cmV0dXJuIGk9PW51bGw/dW5kZWZpbmVkOnRoaXMubU9iamVjdHNbdF0mJnRoaXMubU9iamVjdHNbdF1baV19O2sucHJvdG90eXBlLmdldENvbXBvbmVudD1mdW5jdGlvbihpKXtyZXR1cm4gdGhpcy5nZXRPYmplY3QoImNvbXBvbmVudCIsaSl9O2sucHJvdG90eXBlLmdldFRlbXBsYXRlPWZ1bmN0aW9uKGkpe3JldHVybiB0aGlzLmdldE9iamVjdCgidGVtcGxhdGUiLGkpfTtrLnByb3RvdHlwZS5nZXRTdGF0aWNBcmVhUmVmPWZ1bmN0aW9uKCl7dmFyIHM9InNhcC11aS1zdGF0aWMiO3ZhciBTPXEuc2FwLmRvbUJ5SWQocyk7aWYoIVMpe2lmKCF0aGlzLmJEb21SZWFkeSl7dGhyb3cgbmV3IEVycm9yKCJET00gaXMgbm90IHJlYWR5IHlldC4gU3RhdGljIFVJQXJlYSBjYW5ub3QgYmUgY3JlYXRlZC4iKX12YXIgbD10aGlzLmdldENvbmZpZ3VyYXRpb24oKS5nZXRSVEwoKT8icmlnaHQiOiJsZWZ0IjtTPXEoIjxESVYvPiIse2lkOnN9KS5jc3MoeyJoZWlnaHQiOiIwIiwid2lkdGgiOiIwIiwib3ZlcmZsb3ciOiJoaWRkZW4iLCJmbG9hdCI6bH0pLnByZXBlbmRUbyhkb2N1bWVudC5ib2R5KVswXTt0aGlzLmNyZWF0ZVVJQXJlYShTKS5iSW5pdGlhbD1mYWxzZX1yZXR1cm4gU307ay5wcm90b3R5cGUuaXNTdGF0aWNBcmVhUmVmPWZ1bmN0aW9uKG8pe3JldHVybiBvJiYoby5pZD09PSJzYXAtdWktc3RhdGljIil9O2suX0lfSU5URVJWQUw9MjAwO2gucHJvdG90eXBlLklfSU5URVJWQUw9ay5fSV9JTlRFUlZBTDtrLnByb3RvdHlwZS5hdHRhY2hJbnRlcnZhbFRpbWVyPWZ1bmN0aW9uKGYsbCl7aWYoIXRoaXMub1RpbWVkVHJpZ2dlcil7cS5zYXAucmVxdWlyZSgic2FwLnVpLmNvcmUuSW50ZXJ2YWxUcmlnZ2VyIik7dGhpcy5vVGltZWRUcmlnZ2VyPW5ldyBzYXAudWkuY29yZS5JbnRlcnZhbFRyaWdnZXIoay5fSV9JTlRFUlZBTCl9dGhpcy5vVGltZWRUcmlnZ2VyLmFkZExpc3RlbmVyKGYsbCl9O2sucHJvdG90eXBlLmRldGFjaEludGVydmFsVGltZXI9ZnVuY3Rpb24oZixsKXtpZih0aGlzLm9UaW1lZFRyaWdnZXIpe3RoaXMub1RpbWVkVHJpZ2dlci5yZW1vdmVMaXN0ZW5lcihmLGwpfX07ay5wcm90b3R5cGUuYXR0YWNoQ29udHJvbEV2ZW50PWZ1bmN0aW9uKGYsbCl7dGhpcy5hdHRhY2hFdmVudChrLk1fRVZFTlRTLkNvbnRyb2xFdmVudCxmLGwpfTtrLnByb3RvdHlwZS5kZXRhY2hDb250cm9sRXZlbnQ9ZnVuY3Rpb24oZixsKXt0aGlzLmRldGFjaEV2ZW50KGsuTV9FVkVOVFMuQ29udHJvbEV2ZW50LGYsbCl9O2sucHJvdG90eXBlLmZpcmVDb250cm9sRXZlbnQ9ZnVuY3Rpb24ocCl7dGhpcy5maXJlRXZlbnQoay5NX0VWRU5UUy5Db250cm9sRXZlbnQscCl9O2sucHJvdG90eXBlLl9oYW5kbGVDb250cm9sRXZlbnQ9ZnVuY3Rpb24obyx1KXt2YXIgYj1xLkV2ZW50KG8udHlwZSk7cS5leHRlbmQoYixvKTtiLm9yaWdpbmFsRXZlbnQ9dW5kZWZpbmVkO3RoaXMuZmlyZUNvbnRyb2xFdmVudCh7ImJyb3dzZXJFdmVudCI6YiwidWlBcmVhIjp1fSl9O2sucHJvdG90eXBlLmdldEFwcGxpY2F0aW9uPWZ1bmN0aW9uKCl7cmV0dXJuIHNhcC51aS5nZXRBcHBsaWNhdGlvbiYmc2FwLnVpLmdldEFwcGxpY2F0aW9uKCl9O2sucHJvdG90eXBlLnJlZ2lzdGVyUGx1Z2luPWZ1bmN0aW9uKHApe2lmKCFwKXtyZXR1cm59Zm9yKHZhciBpPTAsbD10aGlzLmFQbHVnaW5zLmxlbmd0aDtpPGw7aSsrKXtpZih0aGlzLmFQbHVnaW5zW2ldPT09cCl7cmV0dXJufX10aGlzLmFQbHVnaW5zLnB1c2gocCk7aWYodGhpcy5iSW5pdGlhbGl6ZWQmJnAmJnAuc3RhcnRQbHVnaW4pe3Auc3RhcnRQbHVnaW4odGhpcyl9fTtrLnByb3RvdHlwZS51bnJlZ2lzdGVyUGx1Z2luPWZ1bmN0aW9uKHApe2lmKCFwKXtyZXR1cm59dmFyIFA9LTE7Zm9yKHZhciBpPXRoaXMuYVBsdWdpbnMubGVuZ3RoO2ktLTtpPj0wKXtpZih0aGlzLmFQbHVnaW5zW2ldPT09cCl7UD1pO2JyZWFrfX1pZihQPT0tMSl7cmV0dXJufWlmKHRoaXMuYkluaXRpYWxpemVkJiZwJiZwLnN0b3BQbHVnaW4pe3Auc3RvcFBsdWdpbih0aGlzKX10aGlzLmFQbHVnaW5zLnNwbGljZShQLDEpfTtrLnByb3RvdHlwZS5zdGFydFBsdWdpbnM9ZnVuY3Rpb24oKXtmb3IodmFyIGk9MCxsPXRoaXMuYVBsdWdpbnMubGVuZ3RoO2k8bDtpKyspe3ZhciBwPXRoaXMuYVBsdWdpbnNbaV07aWYocCYmcC5zdGFydFBsdWdpbil7cC5zdGFydFBsdWdpbih0aGlzLHRydWUpfX19O2sucHJvdG90eXBlLnN0b3BQbHVnaW5zPWZ1bmN0aW9uKCl7Zm9yKHZhciBpPTAsbD10aGlzLmFQbHVnaW5zLmxlbmd0aDtpPGw7aSsrKXt2YXIgcD10aGlzLmFQbHVnaW5zW2ldO2lmKHAmJnAuc3RvcFBsdWdpbil7cC5zdG9wUGx1Z2luKHRoaXMpfX19O2sucHJvdG90eXBlLnNldE1vZGVsPWZ1bmN0aW9uKG0sbil7aWYoIW0mJnRoaXMub01vZGVsc1tuXSl7ZGVsZXRlIHRoaXMub01vZGVsc1tuXTtxLmVhY2godGhpcy5tVUlBcmVhcyxmdW5jdGlvbihpLHUpe2RlbGV0ZSB1Lm9Qcm9wYWdhdGVkUHJvcGVydGllcy5vTW9kZWxzW25dO3UucHJvcGFnYXRlUHJvcGVydGllcyhuKX0pfWVsc2UgaWYobSYmbSE9PXRoaXMub01vZGVsc1tuXSl7dGhpcy5vTW9kZWxzW25dPW07cS5lYWNoKHRoaXMubVVJQXJlYXMsZnVuY3Rpb24oaSx1KXt1Lm9Qcm9wYWdhdGVkUHJvcGVydGllcy5vTW9kZWxzW25dPW07dS5wcm9wYWdhdGVQcm9wZXJ0aWVzKG4pfSl9ZWxzZXt9cmV0dXJuIHRoaXN9O2sucHJvdG90eXBlLmdldE1vZGVsPWZ1bmN0aW9uKG4pe3JldHVybiB0aGlzLm9Nb2RlbHNbbl19O2sucHJvdG90eXBlLmhhc01vZGVsPWZ1bmN0aW9uKCl7cmV0dXJuIXEuaXNFbXB0eU9iamVjdCh0aGlzLm9Nb2RlbHMpfTtrLnByb3RvdHlwZS5nZXRFdmVudEJ1cz1mdW5jdGlvbigpe2lmKCF0aGlzLm9FdmVudEJ1cyl7cS5zYXAucmVxdWlyZSgic2FwLnVpLmNvcmUuRXZlbnRCdXMiKTt0aGlzLm9FdmVudEJ1cz1uZXcgc2FwLnVpLmNvcmUuRXZlbnRCdXMoKX1yZXR1cm4gdGhpcy5vRXZlbnRCdXN9O2sucHJvdG90eXBlLmF0dGFjaFZhbGlkYXRpb25FcnJvcj1mdW5jdGlvbihmLGwpe3RoaXMuYXR0YWNoRXZlbnQoay5NX0VWRU5UUy5WYWxpZGF0aW9uRXJyb3IsZixsKTtyZXR1cm4gdGhpc307ay5wcm90b3R5cGUuZGV0YWNoVmFsaWRhdGlvbkVycm9yPWZ1bmN0aW9uKGYsbCl7dGhpcy5kZXRhY2hFdmVudChrLk1fRVZFTlRTLlZhbGlkYXRpb25FcnJvcixmLGwpO3JldHVybiB0aGlzfTtrLnByb3RvdHlwZS5hdHRhY2hQYXJzZUVycm9yPWZ1bmN0aW9uKGYsbCl7dGhpcy5hdHRhY2hFdmVudChrLk1fRVZFTlRTLlBhcnNlRXJyb3IsZixsKTtyZXR1cm4gdGhpc307ay5wcm90b3R5cGUuZGV0YWNoUGFyc2VFcnJvcj1mdW5jdGlvbihmLGwpe3RoaXMuZGV0YWNoRXZlbnQoay5NX0VWRU5UUy5QYXJzZUVycm9yLGYsbCk7cmV0dXJuIHRoaXN9O2sucHJvdG90eXBlLmF0dGFjaEZvcm1hdEVycm9yPWZ1bmN0aW9uKGYsbCl7dGhpcy5hdHRhY2hFdmVudChrLk1fRVZFTlRTLkZvcm1hdEVycm9yLGYsbCk7cmV0dXJuIHRoaXN9O2sucHJvdG90eXBlLmRldGFjaEZvcm1hdEVycm9yPWZ1bmN0aW9uKGYsbCl7dGhpcy5kZXRhY2hFdmVudChrLk1fRVZFTlRTLkZvcm1hdEVycm9yLGYsbCk7cmV0dXJuIHRoaXN9O2sucHJvdG90eXBlLmF0dGFjaFZhbGlkYXRpb25TdWNjZXNzPWZ1bmN0aW9uKGYsbCl7dGhpcy5hdHRhY2hFdmVudChrLk1fRVZFTlRTLlZhbGlkYXRpb25TdWNjZXNzLGYsbCk7cmV0dXJuIHRoaXN9O2sucHJvdG90eXBlLmRldGFjaFZhbGlkYXRpb25TdWNjZXNzPWZ1bmN0aW9uKGYsbCl7dGhpcy5kZXRhY2hFdmVudChrLk1fRVZFTlRTLlZhbGlkYXRpb25TdWNjZXNzLGYsbCk7cmV0dXJuIHRoaXN9O2sucHJvdG90eXBlLmZpcmVQYXJzZUVycm9yPWZ1bmN0aW9uKEEpe3RoaXMuZmlyZUV2ZW50KGsuTV9FVkVOVFMuUGFyc2VFcnJvcixBKTtyZXR1cm4gdGhpc307ay5wcm90b3R5cGUuZmlyZVZhbGlkYXRpb25FcnJvcj1mdW5jdGlvbihBKXt0aGlzLmZpcmVFdmVudChrLk1fRVZFTlRTLlZhbGlkYXRpb25FcnJvcixBKTtyZXR1cm4gdGhpc307ay5wcm90b3R5cGUuZmlyZUZvcm1hdEVycm9yPWZ1bmN0aW9uKEEpe3RoaXMuZmlyZUV2ZW50KGsuTV9FVkVOVFMuRm9ybWF0RXJyb3IsQSk7cmV0dXJuIHRoaXN9O2sucHJvdG90eXBlLmZpcmVWYWxpZGF0aW9uU3VjY2Vzcz1mdW5jdGlvbihBKXt0aGlzLmZpcmVFdmVudChrLk1fRVZFTlRTLlZhbGlkYXRpb25TdWNjZXNzLEEpO3JldHVybiB0aGlzfTtrLnByb3RvdHlwZS5pc01vYmlsZT1mdW5jdGlvbigpe3JldHVybiBELmJyb3dzZXIubW9iaWxlfTtpZighd2luZG93LnNhcC51aS5nZXRDb3JlKXsoZnVuY3Rpb24oKXtuZXcgaygpfSgpKX1zYXAudWkuc2V0Um9vdD1mdW5jdGlvbihvLGIpe3NhcC51aS5nZXRDb3JlKCkuc2V0Um9vdChvLGIpfTtyZXR1cm4ga30sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5hcHAuQXBwbGljYXRpb24nKSl7DQovKg0KICogU0FQIFVJIGRldmVsb3BtZW50IHRvb2xraXQgZm9yIEhUTUw1IChTQVBVSTUvT3BlblVJNSkNCiAqIChjKSBDb3B5cmlnaHQgMjAwOS0yMDE0IFNBUCBTRSBvciBhbiBTQVAgYWZmaWxpYXRlIGNvbXBhbnkuIA0KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAtIHNlZSBMSUNFTlNFLnR4dC4NCiAqLw0KalF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuYXBwLkFwcGxpY2F0aW9uJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2FwcC9BcHBsaWNhdGlvbiIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJy4vQXBwbGljYXRpb25NZXRhZGF0YScsJ3NhcC91aS9jb3JlL0NvbXBvbmVudCddLGZ1bmN0aW9uKHEsQSxDKXsidXNlIHN0cmljdCI7dmFyIGE9Qy5leHRlbmQoInNhcC51aS5hcHAuQXBwbGljYXRpb24iLHttZXRhZGF0YTp7ImFic3RyYWN0Ijp0cnVlLHByb3BlcnRpZXM6e3Jvb3Q6InN0cmluZyIsY29uZmlnOiJhbnkifSxhZ2dyZWdhdGlvbnM6e3Jvb3RDb21wb25lbnQ6e3R5cGU6InNhcC51aS5jb3JlLlVJQ29tcG9uZW50IixtdWx0aXBsZTpmYWxzZX19LHB1YmxpY01ldGhvZHM6WyJnZXRWaWV3Il0sZGVwcmVjYXRlZDp0cnVlfSxjb25zdHJ1Y3RvcjpmdW5jdGlvbihpLHMpe2lmKHRoaXMub25FcnJvcil7dGhpcy5vbldpbmRvd0Vycm9yPXRoaXMub25FcnJvcn1pZih0aGlzLm9uQmVmb3JlRXhpdCl7dGhpcy5vbldpbmRvd0JlZm9yZVVubG9hZD10aGlzLm9uQmVmb3JlRXhpdH1pZih0aGlzLm9uRXhpdCl7dGhpcy5vbldpbmRvd1VubG9hZD10aGlzLm9uRXhpdH1DLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtpZihzYXAudWkuZ2V0QXBwbGljYXRpb24pe3Rocm93IG5ldyBFcnJvcigiT25seSBvbmUgaW5zdGFuY2Ugb2Ygc2FwLnVpLmFwcC5BcHBsaWNhdGlvbiBpcyBhbGxvd2VkIil9c2FwLnVpLmdldEFwcGxpY2F0aW9uPXEucHJveHkodGhpcy5fZ2V0SW5zdGFuY2UsdGhpcyk7c2FwLnVpLmdldENvcmUoKS5hdHRhY2hJbml0KHEucHJveHkoZnVuY3Rpb24oKXt0aGlzLl9pbml0Um9vdENvbXBvbmVudCgpO3RoaXMubWFpbigpfSx0aGlzKSl9LF9pbml0Um9vdENvbXBvbmVudDpmdW5jdGlvbigpe3ZhciByPXRoaXMuY3JlYXRlUm9vdENvbXBvbmVudCgpO2lmKHIpe3RoaXMuc2V0Um9vdENvbXBvbmVudChyKTt2YXIgYz1uZXcgc2FwLnVpLmNvcmUuQ29tcG9uZW50Q29udGFpbmVyKHtjb21wb25lbnQ6cn0pO2MucGxhY2VBdCh0aGlzLmdldFJvb3QoKXx8ZG9jdW1lbnQuYm9keSl9fSxjcmVhdGVSb290Q29tcG9uZW50OmZ1bmN0aW9uKCl7dmFyIHI9dGhpcy5nZXRNZXRhZGF0YSgpLmdldFJvb3RDb21wb25lbnQoKTt2YXIgUjtpZihyKXtSPXNhcC51aS5jb21wb25lbnQoe25hbWU6cn0pfXJldHVybiBSfSxnZXRWaWV3OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0Um9vdENvbXBvbmVudCgpfSxfZ2V0SW5zdGFuY2U6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30sbWFpbjpmdW5jdGlvbigpe30sb25CZWZvcmVFeGl0OmZ1bmN0aW9uKCl7fSxvbkV4aXQ6ZnVuY3Rpb24oKXt9LG9uRXJyb3I6bnVsbCxzZXRDb25maWc6ZnVuY3Rpb24oYyl7aWYodHlwZW9mIGM9PT0ic3RyaW5nIil7dmFyIHU9Yzt2YXIgYz1uZXcgc2FwLnVpLm1vZGVsLmpzb24uSlNPTk1vZGVsKCk7dmFyIHI9cS5zYXAuc2pheCh7dXJsOnUsZGF0YVR5cGU6J2pzb24nfSk7aWYoci5zdWNjZXNzKXtjLnNldERhdGEoci5kYXRhKX1lbHNle3Rocm93IG5ldyBFcnJvcigiQ291bGQgbm90IGxvYWQgY29uZmlnIGZpbGU6ICIrdSl9fWlmKHR5cGVvZiBjPT09Im9iamVjdCImJiFjIGluc3RhbmNlb2Ygc2FwLnVpLm1vZGVsLk1vZGVsKXtjPW5ldyBzYXAudWkubW9kZWwuSlNPTk1vZGVsKGMpfXRoaXMuc2V0UHJvcGVydHkoImNvbmZpZyIsYyl9LGRlc3Ryb3k6ZnVuY3Rpb24ocyl7ZGVsZXRlIHNhcC51aS5nZXRBcHBsaWNhdGlvbjtDLnByb3RvdHlwZS5kZXN0cm95LmFwcGx5KHRoaXMsYXJndW1lbnRzKX19LEEpO3JldHVybiBhfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUuQXBwQ2FjaGVCdXN0ZXInKSl7DQovKiENCiAqIFNBUCBVSSBkZXZlbG9wbWVudCB0b29sa2l0IGZvciBIVE1MNSAoU0FQVUk1L09wZW5VSTUpDQogKiAoYykgQ29weXJpZ2h0IDIwMDktMjAxNCBTQVAgU0Ugb3IgYW4gU0FQIGFmZmlsaWF0ZSBjb21wYW55LiANCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgLSBzZWUgTElDRU5TRS50eHQuDQogKi8NCmpRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUuQXBwQ2FjaGVCdXN0ZXInKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9BcHBDYWNoZUJ1c3RlciIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJy4vQ29yZScsJ3NhcC91aS90aGlyZHBhcnR5L1VSSSddLGZ1bmN0aW9uKHEsQyxVKXsidXNlIHN0cmljdCI7dmFyIGM9c2FwLnVpLmdldENvcmUoKS5nZXRDb25maWd1cmF0aW9uKCk7dmFyIGw9Yy5nZXRMYW5ndWFnZSgpO3ZhciBzPWMuZ2V0QXBwQ2FjaGVCdXN0ZXJNb2RlKCk9PT0ic3luYyI7dmFyIGI9Yy5nZXRBcHBDYWNoZUJ1c3Rlck1vZGUoKT09PSJiYXRjaCI7dmFyIGk9e307dmFyIGE9cS5hamF4O3ZhciBJPXEuc2FwLmluY2x1ZGVTY3JpcHQ7dmFyIGY9cS5zYXAuaW5jbHVkZVN0eWxlU2hlZXQ7dmFyIHY9c2FwLnVpLmJhc2UuTWFuYWdlZE9iamVjdC5wcm90b3R5cGUudmFsaWRhdGVQcm9wZXJ0eTt2YXIgTD1kb2N1bWVudC5sb2NhdGlvbi5ocmVmLnJlcGxhY2UoL1w/Lip8Iy4qL2csIiIpO3ZhciBCPVVSSSgiLi8iKS5hYnNvbHV0ZVRvKEwpO3ZhciBBPUIudG9TdHJpbmcoKTt2YXIgdT1VUkkocS5zYXAuZ2V0TW9kdWxlUGF0aCgiIiwiLy4uLyIpKTt2YXIgbz11LnRvU3RyaW5nKCk7aWYodS5pcygicmVsYXRpdmUiKSl7dT11LmFic29sdXRlVG8oTCl9dmFyIGQ9dS5ub3JtYWxpemUoKS50b1N0cmluZygpO3ZhciByPVVSSSgicmVzb3VyY2VzIikuYWJzb2x1dGVUbyhkKS50b1N0cmluZygpO3ZhciBGPW5ldyBSZWdFeHAoIl4iK3Euc2FwLmVzY2FwZVJlZ0V4cChyKSk7dmFyIEU9ZnVuY3Rpb24oZSl7aWYoZS5sZW5ndGg+MCYmZS5zbGljZSgtMSkhPT0iLyIpe2UrPSIvIn1yZXR1cm4gZX07dmFyIFI9ZnVuY3Rpb24oZCxTKXt2YXIgZTtpZihxLmlzQXJyYXkoZCkmJiFiKXtxLmVhY2goZCxmdW5jdGlvbih4LHkpe1IoeSxTKX0pfWVsc2UgaWYocS5pc0FycmF5KGQpJiZiKXt2YXIgaD1FKGRbMF0pO3ZhciBqPVtdO3Euc2FwLmxvZy5kZWJ1Zygic2FwLnVpLmNvcmUuQXBwQ2FjaGVCdXN0ZXIucmVnaXN0ZXIoXCIiK2grIlwiKTsgLy8gQkFUQ0ggTU9ERSEiKTt2YXIgaz1nLm5vcm1hbGl6ZVVSTChoKTtxLnNhcC5sb2cuZGVidWcoIiAgLS0+IG5vcm1hbGl6ZWQgdG86IFwiIitrKyJcIiIpO3EuZWFjaChkLGZ1bmN0aW9uKHgseSl7dmFyIG09RSh5KTt2YXIgej1nLm5vcm1hbGl6ZVVSTChtKTtpZighaVtuXSl7ai5wdXNoKHopfX0pO2lmKGoubGVuZ3RoPjApe3ZhciBtPWsrInNhcC11aS1jYWNoZWJ1c3Rlci1pbmZvLmpzb24/c2FwLXVpLWxhbmd1YWdlPSIrbDtlPXt1cmw6bSx0eXBlOiJQT1NUIixhc3luYzohcyYmISFTLGRhdGFUeXBlOiJqc29uIixjb250ZW50VHlwZToidGV4dC9wbGFpbiIsZGF0YTpqLmpvaW4oIlxuIiksc3VjY2VzczpmdW5jdGlvbih4KXtxLmV4dGVuZChpLHgpfSxlcnJvcjpmdW5jdGlvbigpe3Euc2FwLmxvZy5lcnJvcigiRmFpbGVkIHRvIGJhdGNoIGxvYWQgQXBwQ2FjaGVCdXN0ZXIgaW5kZXggZmlsZSBmcm9tOiBcIiIrbSsiXCIuIil9fX19ZWxzZXtkPUUoZCk7cS5zYXAubG9nLmRlYnVnKCJzYXAudWkuY29yZS5BcHBDYWNoZUJ1c3Rlci5yZWdpc3RlcihcIiIrZCsiXCIpOyIpO3ZhciBuPWcubm9ybWFsaXplVVJMKGQpO3Euc2FwLmxvZy5kZWJ1ZygiICAtLT4gbm9ybWFsaXplZCB0bzogXCIiK24rIlwiIik7aWYoIWlbbl0pe3ZhciBtPW4rInNhcC11aS1jYWNoZWJ1c3Rlci1pbmZvLmpzb24/c2FwLXVpLWxhbmd1YWdlPSIrbDtlPXt1cmw6bSxhc3luYzohcyYmISFTLGRhdGFUeXBlOiJqc29uIixzdWNjZXNzOmZ1bmN0aW9uKHgpe2lbbl09eH0sZXJyb3I6ZnVuY3Rpb24oKXtxLnNhcC5sb2cuZXJyb3IoIkZhaWxlZCB0byBsb2FkIEFwcENhY2hlQnVzdGVyIGluZGV4IGZpbGUgZnJvbTogXCIiK20rIlwiLiIpfX19fWlmKGUpe2lmKGUuYXN5bmMpe3ZhciBwPVMuc3RhcnRUYXNrKCJsb2FkICIrbSk7dmFyIHQ9ZS5zdWNjZXNzLHc9ZS5lcnJvcjtxLmV4dGVuZChlLHtzdWNjZXNzOmZ1bmN0aW9uKHgpe3QuYXBwbHkodGhpcyxhcmd1bWVudHMpO1MuZmluaXNoVGFzayhwKX0sZXJyb3I6ZnVuY3Rpb24oKXt3LmFwcGx5KHRoaXMsYXJndW1lbnRzKTtTLmZpbmlzaFRhc2socCxmYWxzZSl9fSl9cS5zYXAubG9nLmluZm8oIkxvYWRpbmcgQXBwQ2FjaGVCdXN0ZXIgaW5kZXggZmlsZSBmcm9tOiBcIiIrbSsiXCIuIik7cS5hamF4KGUpfX07dmFyIGc9e2Jvb3Q6ZnVuY3Rpb24oUyl7dmFyIGU9Yy5nZXRBcHBDYWNoZUJ1c3RlcigpO2lmKGUmJmUubGVuZ3RoPjApe2U9ZS5zbGljZSgpO3ZhciBoPXRydWU7dmFyIFY9U3RyaW5nKGVbMF0pLnRvTG93ZXJDYXNlKCk7aWYoZS5sZW5ndGg9PT0xKXtpZihWPT09InRydWUifHxWPT09IngiKXt2YXIgdT1VUkkobyk7ZT11LmlzKCJyZWxhdGl2ZSIpP1t1LnRvU3RyaW5nKCldOltdfWVsc2UgaWYoVj09PSJmYWxzZSIpe2g9ZmFsc2V9fWlmKGgpe2cuaW5pdCgpO1IoZSxTKX19fSxpbml0OmZ1bmN0aW9uKCl7dmFyIGg9Zy5jb252ZXJ0VVJMO3ZhciBuPWcubm9ybWFsaXplVVJMO3ZhciBqPWZ1bmN0aW9uKGUpe2lmKGUmJnR5cGVvZihlKT09PSJzdHJpbmciKXtlPW4oZSk7cmV0dXJuIWUubWF0Y2goRil9cmV0dXJuIGZhbHNlfTtxLmFqYXg9ZnVuY3Rpb24oZSxrKXtpZihlJiZlLnVybCYmaihlLnVybCkpe2UudXJsPWgoZS51cmwpfXJldHVybiBhLmFwcGx5KHRoaXMsYXJndW1lbnRzKX07cS5zYXAuaW5jbHVkZVNjcmlwdD1mdW5jdGlvbihlLGspe3ZhciBtPUFycmF5LnByb3RvdHlwZS5zbGljZS5hcHBseShhcmd1bWVudHMpO2lmKGoobVswXSkpe21bMF09aChtWzBdKX1yZXR1cm4gSS5hcHBseSh0aGlzLG0pfTtxLnNhcC5pbmNsdWRlU3R5bGVTaGVldD1mdW5jdGlvbihlLGspe3ZhciBtPUFycmF5LnByb3RvdHlwZS5zbGljZS5hcHBseShhcmd1bWVudHMpO2lmKGoobVswXSkpe21bMF09aChtWzBdKX1yZXR1cm4gZi5hcHBseSh0aGlzLG0pfTtzYXAudWkuYmFzZS5NYW5hZ2VkT2JqZWN0LnByb3RvdHlwZS52YWxpZGF0ZVByb3BlcnR5PWZ1bmN0aW9uKHAsVil7dmFyIG09dGhpcy5nZXRNZXRhZGF0YSgpLFA9bS5nZXRBbGxQcm9wZXJ0aWVzKClbcF0saztpZihQJiZQLnR5cGU9PT0ic2FwLnVpLmNvcmUuVVJJIil7az1BcnJheS5wcm90b3R5cGUuc2xpY2UuYXBwbHkoYXJndW1lbnRzKTt0cnl7aWYoaihrWzFdKSl7a1sxXT1oKGtbMV0pfX1jYXRjaChlKXt9fXJldHVybiB2LmFwcGx5KHRoaXMsa3x8YXJndW1lbnRzKX19LGV4aXQ6ZnVuY3Rpb24oKXtxLmFqYXg9YTtxLnNhcC5pbmNsdWRlU2NyaXB0PUk7cS5zYXAuaW5jbHVkZVN0eWxlU2hlZXQ9ZjtzYXAudWkuYmFzZS5NYW5hZ2VkT2JqZWN0LnByb3RvdHlwZS52YWxpZGF0ZVByb3BlcnR5PXY7aT17fX0scmVnaXN0ZXI6ZnVuY3Rpb24oZCl7UihkKX0sY29udmVydFVSTDpmdW5jdGlvbihlKXtxLnNhcC5sb2cuZGVidWcoInNhcC51aS5jb3JlLkFwcENhY2hlQnVzdGVyLmNvbnZlcnRVUkwoXCIiK2UrIlwiKTsiKTtpZihpJiZlKXt2YXIgbj1nLm5vcm1hbGl6ZVVSTChlKTtxLnNhcC5sb2cuZGVidWcoIiAgLS0+IG5vcm1hbGl6ZWQgdG86IFwiIituKyJcIiIpO2lmKG4mJmcuaGFuZGxlVVJMKG4pKXtxLmVhY2goaSxmdW5jdGlvbihkLG0pe3ZhciBoO2lmKGQmJm4ubGVuZ3RoPj1kLmxlbmd0aCYmbi5zbGljZSgwLGQubGVuZ3RoKT09PWQpe2g9bi5zbGljZShkLmxlbmd0aCk7aWYobVtoXSl7ZT1kKyJ+IittW2hdKyJ+LyIraDtxLnNhcC5sb2cuZGVidWcoIiAgPT0+IHJldHVybiBcIiIrZSsiXCI7Iik7cmV0dXJuIGZhbHNlfX19KX19cmV0dXJuIGV9LG5vcm1hbGl6ZVVSTDpmdW5jdGlvbihlKXt2YXIgdT1VUkkoZXx8Ii4vIik7aWYodS5pcygicmVsYXRpdmUiKSl7dT11LmFic29sdXRlVG8oTCl9cmV0dXJuIHUubm9ybWFsaXplUHJvdG9jb2woKS5ub3JtYWxpemVIb3N0bmFtZSgpLm5vcm1hbGl6ZVBvcnQoKS5ub3JtYWxpemVQYXRoKCkudG9TdHJpbmcoKX0saGFuZGxlVVJMOmZ1bmN0aW9uKGUpe3JldHVybiB0cnVlfX07cmV0dXJuIGd9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS5DdXN0b21pemluZ0NvbmZpZ3VyYXRpb24nKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS5DdXN0b21pemluZ0NvbmZpZ3VyYXRpb24nKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9DdXN0b21pemluZ0NvbmZpZ3VyYXRpb24iLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCcuL0NvcmUnXSxmdW5jdGlvbihxLEMpeyJ1c2Ugc3RyaWN0Ijt2YXIgYT0ic2FwLnVpLnZpZXdSZXBsYWNlbWVudHMiLGI9InNhcC51aS52aWV3RXh0ZW5zaW9ucyIsYz0ic2FwLnVpLnZpZXdNb2RpZmljYXRpb25zIixkPSJzYXAudWkuY29udHJvbGxlckV4dGVuc2lvbnMiO3ZhciBtPXt9O2Z1bmN0aW9uIGYodCxnKXtxLmVhY2gobSxmdW5jdGlvbihuLG8pe2lmKG8mJm9bdF0pe2lmKGcob1t0XSkpe3JldHVybiBmYWxzZX19fSl9O3ZhciBlPXtsb2c6ZnVuY3Rpb24oKXtpZih3aW5kb3cuY29uc29sZSl7d2luZG93LmNvbnNvbGUubG9nKG0pfX0sYWN0aXZhdGVGb3JDb21wb25lbnQ6ZnVuY3Rpb24ocyl7cS5zYXAubG9nLmluZm8oIkN1c3RvbWl6aW5nQ29uZmlndXJhdGlvbjogYWN0aXZhdGVGb3JDb21wb25lbnQoJyIrcysiJykiKTt2YXIgRj1zKyIuQ29tcG9uZW50IjtxLnNhcC5yZXF1aXJlKEYpO3ZhciBvPXEuc2FwLmdldE9iamVjdChGKS5nZXRNZXRhZGF0YSgpLmdldEN1c3RvbWl6aW5nKCk7bVtzXT1vO3Euc2FwLmxvZy5kZWJ1ZygiQ3VzdG9taXppbmdDb25maWd1cmF0aW9uOiBjdXN0b21pemluZyBjb25maWd1cmF0aW9uIGZvciBjb21wb25lbnQgJyIrcysiJyBsb2FkZWQ6ICIrSlNPTi5zdHJpbmdpZnkobykpfSxkZWFjdGl2YXRlRm9yQ29tcG9uZW50OmZ1bmN0aW9uKHMpe3Euc2FwLmxvZy5pbmZvKCJDdXN0b21pemluZ0NvbmZpZ3VyYXRpb246IGRlYWN0aXZhdGVGb3JDb21wb25lbnQoJyIrcysiJykiKTtkZWxldGUgbVtzXX0sZ2V0Vmlld1JlcGxhY2VtZW50OmZ1bmN0aW9uKHYpe3ZhciByPXVuZGVmaW5lZDtmKGEsZnVuY3Rpb24obyl7cj1vW3ZdO3JldHVybiEhcn0pO3JldHVybiByfSxnZXRWaWV3RXh0ZW5zaW9uOmZ1bmN0aW9uKHYsRSl7dmFyIHI9dW5kZWZpbmVkO2YoYixmdW5jdGlvbihvKXtyPW9bdl0mJm9bdl1bRV07cmV0dXJuISFyfSk7cmV0dXJuIHJ9LGdldENvbnRyb2xsZXJFeHRlbnNpb246ZnVuY3Rpb24ocyl7dmFyIHI9dW5kZWZpbmVkO2YoZCxmdW5jdGlvbihvKXtyPW9bc107cmV0dXJuISFyfSk7cmV0dXJuIHJ9LGdldEN1c3RvbVByb3BlcnRpZXM6ZnVuY3Rpb24odixzKXt2YXIgUz11bmRlZmluZWQ7ZihjLGZ1bmN0aW9uKG8pe3ZhciBnPW9bdl0mJm9bdl1bc107dmFyIHU9e307dmFyIFY9ZmFsc2U7aWYoZyl7cS5lYWNoKGcsZnVuY3Rpb24obixoKXtpZihuPT09InZpc2libGUiKXtWPXRydWU7dVtuXT1oO3Euc2FwLmxvZy5pbmZvKCJDdXN0b21pemluZzogY3VzdG9tIHZhbHVlIGZvciBwcm9wZXJ0eSAnIituKyInIG9mIGNvbnRyb2wgJyIrcysiJyBpbiBWaWV3ICciK3YrIicgYXBwbGllZDogIitoKX1lbHNle3Euc2FwLmxvZy53YXJuaW5nKCJDdXN0b21pemluZzogY3VzdG9tIHZhbHVlIGZvciBwcm9wZXJ0eSAnIituKyInIG9mIGNvbnRyb2wgJyIrcysiJyBpbiBWaWV3ICciK3YrIicgaWdub3JlZDogb25seSB0aGUgJ3Zpc2libGUnIHByb3BlcnR5IGNhbiBiZSBjdXN0b21pemVkLiIpfX0pO2lmKFYpe1M9U3x8e307cS5leHRlbmQoUyx1KX19fSk7cmV0dXJuIFN9fTtpZihzYXAudWkuZ2V0Q29yZSgpLmdldENvbmZpZ3VyYXRpb24oKS5nZXREaXNhYmxlQ3VzdG9taXppbmcoKSl7cS5zYXAubG9nLmluZm8oIkN1c3RvbWl6aW5nQ29uZmlndXJhdGlvbjogZGlzYWJsaW5nIEN1c3RvbWl6aW5nIG5vdyIpO3EuZWFjaChlLGZ1bmN0aW9uKG4sQSl7aWYodHlwZW9mIEE9PT0iZnVuY3Rpb24iKXtlW25dPWZ1bmN0aW9uKCl7fX19KX1yZXR1cm4gZX0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLkxvY2FsQnVzeUluZGljYXRvclN1cHBvcnQnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS5Mb2NhbEJ1c3lJbmRpY2F0b3JTdXBwb3J0Jyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvTG9jYWxCdXN5SW5kaWNhdG9yU3VwcG9ydCIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJy4vRWxlbWVudCddLGZ1bmN0aW9uKHEsRSl7InVzZSBzdHJpY3QiO3ZhciBMPWZ1bmN0aW9uKCl7aWYodGhpcz09PXNhcC51aS5jb3JlLkNvbnRyb2wucHJvdG90eXBlKXt0aGlzLnNldERlbGF5PWZ1bmN0aW9uKGQpe3RoaXMuc2V0QnVzeUluZGljYXRvckRlbGF5KGQpfX1lbHNle3Euc2FwLmxvZy5lcnJvcigiT25seSBjb250cm9scyBjYW4gdXNlIHRoZSBMb2NhbEJ1c3lJbmRpY2F0b3IiLHRoaXMpfX07cmV0dXJuIEx9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS5Qb3B1cFN1cHBvcnQnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS5Qb3B1cFN1cHBvcnQnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9Qb3B1cFN1cHBvcnQiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCcuL0VsZW1lbnQnXSxmdW5jdGlvbihxLEUpeyJ1c2Ugc3RyaWN0Ijt2YXIgUD1mdW5jdGlvbigpe3RoaXMuZ2V0TWV0YWRhdGEoKS5hZGRQdWJsaWNNZXRob2RzKFsiZ2V0UGFyZW50UG9wdXAiLCJpc0luUG9wdXAiLCJnZXRQYXJlbnRQb3B1cElkIiwiYWRkVG9Qb3B1cCIsInJlbW92ZUZyb21Qb3B1cCJdKTt0aGlzLmlzSW5Qb3B1cD1mdW5jdGlvbih0KXt2YXIgcD10aGlzLmdldFBhcmVudFBvcHVwKHQpO3JldHVybiBwJiZwLmxlbmd0aD4wfTt0aGlzLmdldFBhcmVudFBvcHVwPWZ1bmN0aW9uKHQpe3ZhciBUPXQ/dDp0aGlzO3ZhciAkPXEoVCBpbnN0YW5jZW9mIHNhcC51aS5jb3JlLkVsZW1lbnQ/VC5nZXREb21SZWYoKTpUKTtyZXR1cm4gJC5jbG9zZXN0KCJbZGF0YS1zYXAtdWktcG9wdXBdIil9O3RoaXMuZ2V0UGFyZW50UG9wdXBJZD1mdW5jdGlvbih0KXt2YXIgcD10aGlzLmdldFBhcmVudFBvcHVwKHQpO3JldHVybiBwLmF0dHIoImRhdGEtc2FwLXVpLXBvcHVwIil9O3RoaXMuYWRkQ2hpbGRUb1BvcHVwPWZ1bmN0aW9uKHAsYyl7dmFyIGU9InNhcC51aS5jb3JlLlBvcHVwLmFkZEZvY3VzYWJsZUNvbnRlbnQtIitwO3NhcC51aS5nZXRDb3JlKCkuZ2V0RXZlbnRCdXMoKS5wdWJsaXNoKCJzYXAudWkiLGUse2lkOmN9KX07dGhpcy5yZW1vdmVDaGlsZEZyb21Qb3B1cD1mdW5jdGlvbihwKXtpZighcCl7cD10aGlzLmdldFBvcHVwSWQoKX12YXIgZT0ic2FwLnVpLmNvcmUuUG9wdXAucmVtb3ZlRm9jdXNhYmxlQ29udGVudC0iK3A7c2FwLnVpLmdldENvcmUoKS5nZXRFdmVudEJ1cygpLnB1Ymxpc2goInNhcC51aSIsZSx7aWQ6dGhpcy5nZXRJZCgpfSl9O3RoaXMuY2xvc2VQb3B1cD1mdW5jdGlvbihwKXt2YXIgZT0ic2FwLnVpLmNvcmUuUG9wdXAuY2xvc2VQb3B1cC0iK3A7c2FwLnVpLmdldENvcmUoKS5nZXRFdmVudEJ1cygpLnB1Ymxpc2goInNhcC51aSIsZSl9O3RoaXMuaW5jcmVhc2VaSW5kZXg9ZnVuY3Rpb24ocCxpKXt2YXIgZT0ic2FwLnVpLmNvcmUuUG9wdXAuaW5jcmVhc2VaSW5kZXgtIitwO3NhcC51aS5nZXRDb3JlKCkuZ2V0RXZlbnRCdXMoKS5wdWJsaXNoKCJzYXAudWkiLGUse2lzRnJvbVBhcmVudFBvcHVwOmk/aTpmYWxzZX0pfX07cmV0dXJuIFB9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS5saWJyYXJ5Jykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUubGlicmFyeScpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL2xpYnJhcnkiLFsnLi9Db3JlJ10sZnVuY3Rpb24oKXtzYXAudWkuZ2V0Q29yZSgpLmluaXRMaWJyYXJ5KHtuYW1lOiJzYXAudWkuY29yZSIsdHlwZXM6WyJzYXAudWkuY29yZS5BY2Nlc3NpYmxlUm9sZSIsInNhcC51aS5jb3JlLkJhckNvbG9yIiwic2FwLnVpLmNvcmUuQ1NTQ29sb3IiLCJzYXAudWkuY29yZS5DU1NTaXplIiwic2FwLnVpLmNvcmUuQ1NTU2l6ZVNob3J0SGFuZCIsInNhcC51aS5jb3JlLkNvbGxpc2lvbiIsInNhcC51aS5jb3JlLkRlc2lnbiIsInNhcC51aS5jb3JlLkRvY2siLCJzYXAudWkuY29yZS5Ib3Jpem9udGFsQWxpZ24iLCJzYXAudWkuY29yZS5JRCIsInNhcC51aS5jb3JlLkljb25Db2xvciIsInNhcC51aS5jb3JlLkltZU1vZGUiLCJzYXAudWkuY29yZS5NZXNzYWdlVHlwZSIsInNhcC51aS5jb3JlLk9wZW5TdGF0ZSIsInNhcC51aS5jb3JlLk9yaWVudGF0aW9uIiwic2FwLnVpLmNvcmUuUGVyY2VudGFnZSIsInNhcC51aS5jb3JlLlNjcm9sbEJhckFjdGlvbiIsInNhcC51aS5jb3JlLlNjcm9sbGluZyIsInNhcC51aS5jb3JlLlRleHRBbGlnbiIsInNhcC51aS5jb3JlLlRleHREaXJlY3Rpb24iLCJzYXAudWkuY29yZS5UaXRsZUxldmVsIiwic2FwLnVpLmNvcmUuVVJJIiwic2FwLnVpLmNvcmUuVmFsdWVTdGF0ZSIsInNhcC51aS5jb3JlLlZlcnRpY2FsQWxpZ24iLCJzYXAudWkuY29yZS5XcmFwcGluZyIsImFueSIsImJvb2xlYW4iLCJmbG9hdCIsImludCIsInNhcC51aS5jb3JlLm12Yy5WaWV3VHlwZSIsIm9iamVjdCIsInNhcC51aS5jb3JlLnJvdXRpbmcuSGlzdG9yeURpcmVjdGlvbiIsInN0cmluZyIsInZvaWQiXSxpbnRlcmZhY2VzOlsic2FwLnVpLmNvcmUuTGFiZWwiLCJzYXAudWkuY29yZS5Qb3B1cEludGVyZmFjZSIsInNhcC51aS5jb3JlLlRvb2xiYXIiXSxjb250cm9sczpbInNhcC51aS5jb3JlLkNvbXBvbmVudENvbnRhaW5lciIsInNhcC51aS5jb3JlLkNvbnRyb2wiLCJzYXAudWkuY29yZS5IVE1MIiwic2FwLnVpLmNvcmUuSWNvbiIsInNhcC51aS5jb3JlLkxvY2FsQnVzeUluZGljYXRvciIsInNhcC51aS5jb3JlLlNjcm9sbEJhciIsInNhcC51aS5jb3JlLlRvb2x0aXBCYXNlIiwic2FwLnVpLmNvcmUuVUlDb21wb25lbnQiLCJzYXAudWkuY29yZS5tdmMuSFRNTFZpZXciLCJzYXAudWkuY29yZS5tdmMuSlNPTlZpZXciLCJzYXAudWkuY29yZS5tdmMuSlNWaWV3Iiwic2FwLnVpLmNvcmUubXZjLlRlbXBsYXRlVmlldyIsInNhcC51aS5jb3JlLm12Yy5WaWV3Iiwic2FwLnVpLmNvcmUubXZjLlhNTFZpZXciLCJzYXAudWkuY29yZS50bXBsLkRPTUVsZW1lbnQiLCJzYXAudWkuY29yZS50bXBsLlRlbXBsYXRlIiwic2FwLnVpLmNvcmUudG1wbC5UZW1wbGF0ZUNvbnRyb2wiXSxlbGVtZW50czpbInNhcC51aS5jb3JlLkN1c3RvbURhdGEiLCJzYXAudWkuY29yZS5FbGVtZW50Iiwic2FwLnVpLmNvcmUuSXRlbSIsInNhcC51aS5jb3JlLkxheW91dERhdGEiLCJzYXAudWkuY29yZS5MaXN0SXRlbSIsInNhcC51aS5jb3JlLk1lc3NhZ2UiLCJzYXAudWkuY29yZS5TZXBhcmF0b3JJdGVtIiwic2FwLnVpLmNvcmUuVGl0bGUiLCJzYXAudWkuY29yZS5WYXJpYW50TGF5b3V0RGF0YSIsInNhcC51aS5jb3JlLnNlYXJjaC5PcGVuU2VhcmNoUHJvdmlkZXIiLCJzYXAudWkuY29yZS5zZWFyY2guU2VhcmNoUHJvdmlkZXIiLCJzYXAudWkuY29yZS50bXBsLkRPTUF0dHJpYnV0ZSJdLHZlcnNpb246IjEuMjQuMiJ9KTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9BY2Nlc3NpYmxlUm9sZSIsZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7c2FwLnVpLmNvcmUuQWNjZXNzaWJsZVJvbGU9e05vbmU6Ik5vbmUiLEFsZXJ0OiJBbGVydCIsQWxlcnREaWFsb2c6IkFsZXJ0RGlhbG9nIixBcHBsaWNhdGlvbjoiQXBwbGljYXRpb24iLEJhbm5lcjoiQmFubmVyIixCdXR0b246IkJ1dHRvbiIsQ2hlY2tib3g6IkNoZWNrYm94IixDb2x1bW5IZWFkZXI6IkNvbHVtbkhlYWRlciIsQ29tYm9ib3g6IkNvbWJvYm94IiwNCi8qKg0KCSAqIEluZm9ybWF0aW9uIGFib3V0IHRoZSBjb250ZW50IG9uIHRoZSBwYWdlLiBFeGFtcGxlcyBhcmUgZm9vdG5vdGVzLCBjb3B5cmlnaHRzLCBvciBsaW5rcyB0byBwcml2YWN5IHN0YXRlbWVudHMuDQoJICogDQoJICogQHB1YmxpYw0KCSAqLw0KQ29udGVudEluZm86IkNvbnRlbnRJbmZvIixEZWZpbml0aW9uOiJEZWZpbml0aW9uIixEZXNjcmlwdGlvbjoiRGVzY3JpcHRpb24iLERpYWxvZzoiRGlhbG9nIixEaXJlY3Rvcnk6IkRpcmVjdG9yeSIsRG9jdW1lbnQ6IkRvY3VtZW50IixHcmlkOiJHcmlkIixHcmlkQ2VsbDoiR3JpZENlbGwiLEdyb3VwOiJHcm91cCIsSGVhZGluZzoiSGVhZGluZyIsSW1nOiJJbWciLExpbms6IkxpbmsiLExpc3Q6Ikxpc3QiLExpc3Rib3g6Ikxpc3Rib3giLExpc3RJdGVtOiJMaXN0SXRlbSIsTG9nOiJMb2ciLE1haW46Ik1haW4iLE1hcnF1ZWU6Ik1hcnF1ZWUiLE1lbnU6Ik1lbnUiLE1lbnViYXI6Ik1lbnViYXIiLE1lbnVJdGVtOiJNZW51SXRlbSIsTWVudUl0ZW1DaGVja2JveDoiTWVudUl0ZW1DaGVja2JveCIsTWVudUl0ZW1SYWRpbzoiTWVudUl0ZW1SYWRpbyIsTmF2aWdhdGlvbjoiTmF2aWdhdGlvbiIsTm90ZToiTm90ZSIsT3B0aW9uOiJPcHRpb24iLFByZXNlbnRhdGlvbjoiUHJlc2VudGF0aW9uIixQcm9ncmVzc0JhcjoiUHJvZ3Jlc3NCYXIiLFJhZGlvOiJSYWRpbyIsUmFkaW9Hcm91cDoiUmFkaW9Hcm91cCIsUmVnaW9uOiJSZWdpb24iLFJvdzoiUm93IixSb3dIZWFkZXI6IlJvd0hlYWRlciIsU2VhcmNoOiJTZWFyY2giLFNlY29uZGFyeToiU2Vjb25kYXJ5IixTZWVBbHNvOiJTZWVBbHNvIixTZXBhcmF0b3I6IlNlcGFyYXRvciIsU2xpZGVyOiJTbGlkZXIiLFNwaW5CdXR0b246IlNwaW5CdXR0b24iLFN0YXR1czoiU3RhdHVzIixUYWI6IlRhYiIsVGFibGlzdDoiVGFibGlzdCIsVGFicGFuZWw6IlRhYnBhbmVsIixUZXh0Ym94OiJUZXh0Ym94IixUaW1lcjoiVGltZXIiLFRvb2xiYXI6IlRvb2xiYXIiLFRvb2x0aXA6IlRvb2x0aXAiLFRyZWU6IlRyZWUiLFRyZWVHcmlkOiJUcmVlR3JpZCIsVHJlZUl0ZW06IlRyZWVJdGVtIn07cmV0dXJuIHNhcC51aS5jb3JlLkFjY2Vzc2libGVSb2xlfSx0cnVlKTsNCi8qIQ0KICogU0FQIFVJIGRldmVsb3BtZW50IHRvb2xraXQgZm9yIEhUTUw1IChTQVBVSTUvT3BlblVJNSkNCiAqIChjKSBDb3B5cmlnaHQgMjAwOS0yMDE0IFNBUCBTRSBvciBhbiBTQVAgYWZmaWxpYXRlIGNvbXBhbnkuIA0KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAtIHNlZSBMSUNFTlNFLnR4dC4NCiAqLw0Kc2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvQmFyQ29sb3IiLGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO3NhcC51aS5jb3JlLkJhckNvbG9yPXtORVVUUkFMOiJORVVUUkFMIixQT1NJVElWRToiUE9TSVRJVkUiLENSSVRJQ0FMOiJDUklUSUNBTCIsTkVHQVRJVkU6Ik5FR0FUSVZFIn07cmV0dXJuIHNhcC51aS5jb3JlLkJhckNvbG9yfSx0cnVlKTtzYXAudWkuZGVmaW5lKCdzYXAvdWkvY29yZS9DU1NDb2xvcicsWydzYXAvdWkvYmFzZS9EYXRhVHlwZSddLGZ1bmN0aW9uKEQpe3NhcC51aS5jb3JlLkNTU0NvbG9yPUQuY3JlYXRlVHlwZSgnc2FwLnVpLmNvcmUuQ1NTQ29sb3InLHtpc1ZhbGlkOmZ1bmN0aW9uKHYpe3JldHVybi9eKCMoWzAtOWEtZkEtRl17M318WzAtOWEtZkEtRl17Nn0pfHJnYlwoXHMqKCgxP1swLTldP1swLTldfDIoWzAtNF1bMC05XXw1WzAtNV0pKXwoWzAtOV0/WzAtOV0oXC5bMC05XSspP3wxMDAoXC4wKyk/KSUpXHMqKCxccyooKDE/WzAtOV0/WzAtOV18MihbMC00XVswLTldfDVbMC01XSkpfChbMC05XT9bMC05XShcLlswLTldKyk/fDEwMChcLjArKT8pJSlccyopezJ9XCl8cmdiYVwoKFxzKigoMT9bMC05XT9bMC05XXwyKFswLTRdWzAtOV18NVswLTVdKSl8KFswLTldP1swLTldKFwuWzAtOV0rKT98MTAwKFwuMCspPyklKVxzKiwpezN9XHMqKDAoXC5bMC05XSspP3wxKFwuMCspPylccypcKXxoc2xcKFxzKihbMC0yXT9bMC05XT9bMC05XXwzKFswLTVdWzAtOV18NjApKVxzKigsXHMqKChbMC05XT9bMC05XShcLlswLTldKyk/fDEwMChcLjArKT8pJSlccyopezJ9XCl8aHNsYVwoXHMqKFswLTJdP1swLTldP1swLTldfDMoWzAtNV1bMC05XXw2MCkpXHMqLChccyooKFswLTldP1swLTldKFwuWzAtOV0rKT98MTAwKFwuMCspPyklKVxzKiwpezJ9XHMqKDAoXC5bMC05XSspP3wxKFwuMCspPylccypcKXxhbGljZWJsdWV8YW50aXF1ZXdoaXRlfGFxdWF8YXF1YW1hcmluZXxhenVyZXxiZWlnZXxiaXNxdWV8YmxhY2t8YmxhbmNoZWRhbG1vbmR8Ymx1ZXxibHVldmlvbGV0fGJyb3dufGJ1cmx5d29vZHxjYWRldGJsdWV8Y2hhcnRyZXVzZXxjaG9jb2xhdGV8Y29yYWxjb3JuZmxvd2VyYmx1ZXxjb3Juc2lsa3xjcmltc29ufGN5YW58ZGFya2JsdWV8ZGFya2N5YW58ZGFya2dvbGRlbnJvZHxkYXJrZ3JheXxkYXJrZ3JlZW58ZGFya2toYWtpfGRhcmttYWdlbnRhfGRhcmtvbGl2ZWdyZWVufGRhcmtvcmFuZ2V8ZGFya29yY2hpZHxkYXJrcmVkfGRhcmtzYWxtb258ZGFya3NlYWdyZWVufGRhcmtzbGF0ZWJsdWV8ZGFya3NsYXRlZ3JheXxkYXJrdHVycXVvaXNlfGRhcmt2aW9sZXR8ZGVlcHBpbmt8ZGVlcHNreWJsdWV8ZGltZ3JheXxkb2RnZXJibHVlfGZpcmVicmlja3xmbG9yYWx3aGl0ZXxmb3Jlc3RncmVlbnxmdWNoc2lhfGdhaW5zYm9yb3xnaG9zdHdoaXRlfGdvbGR8Z29sZGVucm9kfGdyYXl8Z3JlZW58Z3JlZW55ZWxsb3d8aG9uZXlkZXd8aG90cGlua3xpbmRpYW5yZWR8aW5kaWdvfGl2b3J5fGtoYWtpfGxhdmVuZGVyfGxhdmVuZGVyYmx1c2h8bGF3bmdyZWVufGxlbW9uY2hpZmZvbnxsaWdodGJsdWV8bGlnaHRjb3JhbHxsaWdodGN5YW58bGlnaHRnb2xkZW5yb2R5ZWxsb3d8bGlnaHRncmF5fGxpZ2h0Z3JlZW58bGlnaHRwaW5rfGxpZ2h0c2FsbW9ufGxpZ2h0c2VhZ3JlZW58bGlnaHRza3libHVlfGxpZ2h0c2xhdGVncmF5fGxpZ2h0c3RlZWxibHVlfGxpZ2h0eWVsbG93fGxpbWV8bGltZWdyZWVufGxpbmVufG1hZ2VudGF8bWFyb29ufG1lZGl1bWFxdWFtYXJpbmV8bWVkaXVtYmx1ZXxtZWRpdW1vcmNoaWR8bWVkaXVtcHVycGxlfG1lZGl1bXNlYWdyZWVufG1lZGl1bXNsYXRlYmx1ZXxtZWRpdW1zcHJpbmdncmVlbnxtZWRpdW10dXJxdW9pc2V8bWVkaXVtdmlvbGV0cmVkfG1pZG5pZ2h0Ymx1ZXxtaW50Y3JlYW18bWlzdHlyb3NlfG1vY2Nhc2lufG5hdmFqb3doaXRlfG5hdnl8b2xkbGFjZXxvbGl2ZXxvbGl2ZWRyYWJ8b3JhbmdlfG9yYW5nZXJlZHxvcmNoaWR8cGFsZWdvbGRlbnJvZHxwYWxlZ3JlZW58cGFsZXR1cnF1b2lzZXxwYWxldmlvbGV0cmVkfHBhcGF5YXdoaXB8cGVhY2hwdWZmfHBlcnV8cGlua3xwbHVtfHBvd2RlcmJsdWV8cHVycGxlfHJlZHxyb3N5YnJvd258cm95YWxibHVlfHNhZGRsZWJyb3dufHNhbG1vbnxzYW5keWJyb3dufHNlYWdyZWVufHNlYXNoZWxsfHNpZW5uYXxzaWx2ZXJza3libHVlfHNsYXRlYmx1ZXxzbGF0ZWdyYXl8c25vd3xzcHJpbmdncmVlbnxzdGVlbGJsdWV8dGFufHRlYWx8dGhpc3RsZXx0b21hdG98dHVycXVvaXNlfHZpb2xldHx3aGVhdHx3aGl0ZXx3aGl0ZXNtb2tlfHllbGxvd3x5ZWxsb3dncmVlbnx0cmFuc3BhcmVudHxpbmhlcml0fCkkLy50ZXN0KHYpfX0sRC5nZXRUeXBlKCdzdHJpbmcnKSk7cmV0dXJuIHNhcC51aS5jb3JlLkNTU0NvbG9yfSx0cnVlKTtzYXAudWkuZGVmaW5lKCdzYXAvdWkvY29yZS9DU1NTaXplJyxbJ3NhcC91aS9iYXNlL0RhdGFUeXBlJ10sZnVuY3Rpb24oRCl7c2FwLnVpLmNvcmUuQ1NTU2l6ZT1ELmNyZWF0ZVR5cGUoJ3NhcC51aS5jb3JlLkNTU1NpemUnLHtpc1ZhbGlkOmZ1bmN0aW9uKHYpe3JldHVybi9eKGF1dG98aW5oZXJpdHxbLStdPygwKnwoWzAtOV0rfFswLTldKlwuWzAtOV0rKShbclJdW2VFXVttTV18W2VFXVttTV18W2VFXVt4WF18W3BQXVt4WF18W2NDXVttTV18W21NXVttTV18W2lJXVtuTl18W3BQXVt0VF18W3BQXVtjQ118JSkpKSQvLnRlc3Qodil9fSxELmdldFR5cGUoJ3N0cmluZycpKTtyZXR1cm4gc2FwLnVpLmNvcmUuQ1NTU2l6ZX0sdHJ1ZSk7c2FwLnVpLmRlZmluZSgnc2FwL3VpL2NvcmUvQ1NTU2l6ZVNob3J0SGFuZCcsWydzYXAvdWkvYmFzZS9EYXRhVHlwZSddLGZ1bmN0aW9uKEQpe3NhcC51aS5jb3JlLkNTU1NpemVTaG9ydEhhbmQ9RC5jcmVhdGVUeXBlKCdzYXAudWkuY29yZS5DU1NTaXplU2hvcnRIYW5kJyx7aXNWYWxpZDpmdW5jdGlvbih2KXtyZXR1cm4vXihpbmhlcml0fChhdXRvfFstK10/KDAqfChcZCt8XGQqXC5cZCspKFtlRV1bbU1dfFtlRV1beFhdfFtwUF1beFhdfFtjQ11bbU1dfFttTV1bbU1dfFtpSV1bbk5dfFtwUF1bdFRdfFtwUF1bY0NdfCUpKSl7MX0oXHMoYXV0b3xbLStdPygwKnwoXGQrfFxkKlwuXGQrKShbZUVdW21NXXxbZUVdW3hYXXxbcFBdW3hYXXxbY0NdW21NXXxbbU1dW21NXXxbaUldW25OXXxbcFBdW3RUXXxbcFBdW2NDXXwlKSkpKXswLDN9KSQvLnRlc3Qodil9fSxELmdldFR5cGUoJ3N0cmluZycpKTtyZXR1cm4gc2FwLnVpLmNvcmUuQ1NTU2l6ZVNob3J0SGFuZH0sdHJ1ZSk7c2FwLnVpLmRlZmluZSgnc2FwL3VpL2NvcmUvQ29sbGlzaW9uJyxbJ3NhcC91aS9iYXNlL0RhdGFUeXBlJ10sZnVuY3Rpb24oRCl7c2FwLnVpLmNvcmUuQ29sbGlzaW9uPUQuY3JlYXRlVHlwZSgnc2FwLnVpLmNvcmUuQ29sbGlzaW9uJyx7aXNWYWxpZDpmdW5jdGlvbih2KXtyZXR1cm4vXigoZmxpcHxmaXR8bm9uZSkoIChmbGlwfGZpdHxub25lKSk/KSQvLnRlc3Qodil9fSxELmdldFR5cGUoJ3N0cmluZycpKTtyZXR1cm4gc2FwLnVpLmNvcmUuQ29sbGlzaW9ufSx0cnVlKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9EZXNpZ24iLGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO3NhcC51aS5jb3JlLkRlc2lnbj17U3RhbmRhcmQ6IlN0YW5kYXJkIixNb25vc3BhY2U6Ik1vbm9zcGFjZSJ9O3JldHVybiBzYXAudWkuY29yZS5EZXNpZ259LHRydWUpO3NhcC51aS5kZWZpbmUoJ3NhcC91aS9jb3JlL0RvY2snLFsnc2FwL3VpL2Jhc2UvRGF0YVR5cGUnXSxmdW5jdGlvbihEKXtzYXAudWkuY29yZS5Eb2NrPUQuY3JlYXRlVHlwZSgnc2FwLnVpLmNvcmUuRG9jaycse2lzVmFsaWQ6ZnVuY3Rpb24odil7cmV0dXJuL14oKGJlZ2lufGxlZnR8Y2VudGVyfHJpZ2h0fGVuZCkgKHRvcHxjZW50ZXJ8Ym90dG9tKSkkLy50ZXN0KHYpfX0sRC5nZXRUeXBlKCdzdHJpbmcnKSk7cmV0dXJuIHNhcC51aS5jb3JlLkRvY2t9LHRydWUpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL0hvcml6b250YWxBbGlnbiIsZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7c2FwLnVpLmNvcmUuSG9yaXpvbnRhbEFsaWduPXtCZWdpbjoiQmVnaW4iLEVuZDoiRW5kIixMZWZ0OiJMZWZ0IixSaWdodDoiUmlnaHQiLENlbnRlcjoiQ2VudGVyIn07cmV0dXJuIHNhcC51aS5jb3JlLkhvcml6b250YWxBbGlnbn0sdHJ1ZSk7c2FwLnVpLmRlZmluZSgnc2FwL3VpL2NvcmUvSUQnLFsnc2FwL3VpL2Jhc2UvRGF0YVR5cGUnXSxmdW5jdGlvbihEKXtzYXAudWkuY29yZS5JRD1ELmNyZWF0ZVR5cGUoJ3NhcC51aS5jb3JlLklEJyx7aXNWYWxpZDpmdW5jdGlvbih2KXtyZXR1cm4vXihbQS1aYS16X11bLUEtWmEtejAtOV8uOl0qKSQvLnRlc3Qodil9fSxELmdldFR5cGUoJ3N0cmluZycpKTtyZXR1cm4gc2FwLnVpLmNvcmUuSUR9LHRydWUpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL0ljb25Db2xvciIsZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7c2FwLnVpLmNvcmUuSWNvbkNvbG9yPXtEZWZhdWx0OiJEZWZhdWx0IixQb3NpdGl2ZToiUG9zaXRpdmUiLE5lZ2F0aXZlOiJOZWdhdGl2ZSIsQ3JpdGljYWw6IkNyaXRpY2FsIixOZXV0cmFsOiJOZXV0cmFsIn07cmV0dXJuIHNhcC51aS5jb3JlLkljb25Db2xvcn0sdHJ1ZSk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvSW1lTW9kZSIsZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7c2FwLnVpLmNvcmUuSW1lTW9kZT17QXV0bzoiQXV0byIsQWN0aXZlOiJBY3RpdmUiLEluYWN0aXZlOiJJbmFjdGl2ZSIsRGlzYWJsZWQ6IkRpc2FibGVkIn07cmV0dXJuIHNhcC51aS5jb3JlLkltZU1vZGV9LHRydWUpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL01lc3NhZ2VUeXBlIixmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0IjtzYXAudWkuY29yZS5NZXNzYWdlVHlwZT17SW5mb3JtYXRpb246IkluZm9ybWF0aW9uIixXYXJuaW5nOiJXYXJuaW5nIixFcnJvcjoiRXJyb3IiLE5vbmU6Ik5vbmUiLFN1Y2Nlc3M6IlN1Y2Nlc3MifTtyZXR1cm4gc2FwLnVpLmNvcmUuTWVzc2FnZVR5cGV9LHRydWUpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL09wZW5TdGF0ZSIsZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7c2FwLnVpLmNvcmUuT3BlblN0YXRlPXtPUEVOOiJPUEVOIixDTE9TRUQ6IkNMT1NFRCIsT1BFTklORzoiT1BFTklORyIsQ0xPU0lORzoiQ0xPU0lORyJ9O3JldHVybiBzYXAudWkuY29yZS5PcGVuU3RhdGV9LHRydWUpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL09yaWVudGF0aW9uIixmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0IjtzYXAudWkuY29yZS5PcmllbnRhdGlvbj17SG9yaXpvbnRhbDoiSG9yaXpvbnRhbCIsVmVydGljYWw6IlZlcnRpY2FsIn07cmV0dXJuIHNhcC51aS5jb3JlLk9yaWVudGF0aW9ufSx0cnVlKTtzYXAudWkuZGVmaW5lKCdzYXAvdWkvY29yZS9QZXJjZW50YWdlJyxbJ3NhcC91aS9iYXNlL0RhdGFUeXBlJ10sZnVuY3Rpb24oRCl7c2FwLnVpLmNvcmUuUGVyY2VudGFnZT1ELmNyZWF0ZVR5cGUoJ3NhcC51aS5jb3JlLlBlcmNlbnRhZ2UnLHtpc1ZhbGlkOmZ1bmN0aW9uKHYpe3JldHVybi9eKFswLTldWzAtOV0qKFwuWzAtOV0rKT8lKSQvLnRlc3Qodil9fSxELmdldFR5cGUoJ3N0cmluZycpKTtyZXR1cm4gc2FwLnVpLmNvcmUuUGVyY2VudGFnZX0sdHJ1ZSk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvU2Nyb2xsQmFyQWN0aW9uIixmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0IjtzYXAudWkuY29yZS5TY3JvbGxCYXJBY3Rpb249e1N0ZXA6IlN0ZXAiLFBhZ2U6IlBhZ2UiLE1vdXNlV2hlZWw6Ik1vdXNlV2hlZWwiLERyYWc6IkRyYWcifTtyZXR1cm4gc2FwLnVpLmNvcmUuU2Nyb2xsQmFyQWN0aW9ufSx0cnVlKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9TY3JvbGxpbmciLGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO3NhcC51aS5jb3JlLlNjcm9sbGluZz17Tm9uZToiTm9uZSIsQXV0bzoiQXV0byIsU2Nyb2xsOiJTY3JvbGwiLEhpZGRlbjoiSGlkZGVuIn07cmV0dXJuIHNhcC51aS5jb3JlLlNjcm9sbGluZ30sdHJ1ZSk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvVGV4dEFsaWduIixmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0IjtzYXAudWkuY29yZS5UZXh0QWxpZ249e0JlZ2luOiJCZWdpbiIsRW5kOiJFbmQiLExlZnQ6IkxlZnQiLFJpZ2h0OiJSaWdodCIsQ2VudGVyOiJDZW50ZXIifTtyZXR1cm4gc2FwLnVpLmNvcmUuVGV4dEFsaWdufSx0cnVlKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9UZXh0RGlyZWN0aW9uIixmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0IjtzYXAudWkuY29yZS5UZXh0RGlyZWN0aW9uPXtMVFI6IkxUUiIsUlRMOiJSVEwiLEluaGVyaXQ6IkluaGVyaXQifTtyZXR1cm4gc2FwLnVpLmNvcmUuVGV4dERpcmVjdGlvbn0sdHJ1ZSk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvVGl0bGVMZXZlbCIsZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7c2FwLnVpLmNvcmUuVGl0bGVMZXZlbD17QXV0bzoiQXV0byIsSDE6IkgxIixIMjoiSDIiLEgzOiJIMyIsSDQ6Ikg0IixINToiSDUiLEg2OiJINiJ9O3JldHVybiBzYXAudWkuY29yZS5UaXRsZUxldmVsfSx0cnVlKTtzYXAudWkuZGVmaW5lKCdzYXAvdWkvY29yZS9VUkknLFsnc2FwL3VpL2Jhc2UvRGF0YVR5cGUnXSxmdW5jdGlvbihEKXtzYXAudWkuY29yZS5VUkk9RC5jcmVhdGVUeXBlKCdzYXAudWkuY29yZS5VUkknLHtpc1ZhbGlkOmZ1bmN0aW9uKHYpe3JldHVybi9eKCgoW146XC8/I10rKTopPyhcL1wvKFteXC8/I10qKSk/KFtePyNdKikoXD8oW14jXSopKT8oIyguKikpPykkLy50ZXN0KHYpfX0sRC5nZXRUeXBlKCdzdHJpbmcnKSk7cmV0dXJuIHNhcC51aS5jb3JlLlVSSX0sdHJ1ZSk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvVmFsdWVTdGF0ZSIsZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7c2FwLnVpLmNvcmUuVmFsdWVTdGF0ZT17RXJyb3I6IkVycm9yIixXYXJuaW5nOiJXYXJuaW5nIixTdWNjZXNzOiJTdWNjZXNzIixOb25lOiJOb25lIn07cmV0dXJuIHNhcC51aS5jb3JlLlZhbHVlU3RhdGV9LHRydWUpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL1ZlcnRpY2FsQWxpZ24iLGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO3NhcC51aS5jb3JlLlZlcnRpY2FsQWxpZ249e0JvdHRvbToiQm90dG9tIixNaWRkbGU6Ik1pZGRsZSIsVG9wOiJUb3AiLEluaGVyaXQ6IkluaGVyaXQifTtyZXR1cm4gc2FwLnVpLmNvcmUuVmVydGljYWxBbGlnbn0sdHJ1ZSk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvV3JhcHBpbmciLGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO3NhcC51aS5jb3JlLldyYXBwaW5nPXtOb25lOiJOb25lIixTb2Z0OiJTb2Z0IixIYXJkOiJIYXJkIixPZmY6Ik9mZiJ9O3JldHVybiBzYXAudWkuY29yZS5XcmFwcGluZ30sdHJ1ZSk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvbXZjL1ZpZXdUeXBlIixmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0IjtzYXAudWkuY29yZS5tdmMuVmlld1R5cGU9e0pTT046IkpTT04iLFhNTDoiWE1MIixIVE1MOiJIVE1MIixKUzoiSlMiLFRlbXBsYXRlOiJUZW1wbGF0ZSJ9O3JldHVybiBzYXAudWkuY29yZS5tdmMuVmlld1R5cGV9LHRydWUpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL3JvdXRpbmcvSGlzdG9yeURpcmVjdGlvbiIsZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7c2FwLnVpLmNvcmUucm91dGluZy5IaXN0b3J5RGlyZWN0aW9uPXtGb3J3YXJkczoiRm9yd2FyZHMiLEJhY2t3YXJkczoiQmFja3dhcmRzIixOZXdFbnRyeToiTmV3RW50cnkiLFVua25vd246IlVua25vd24ifTtyZXR1cm4gc2FwLnVpLmNvcmUucm91dGluZy5IaXN0b3J5RGlyZWN0aW9ufSx0cnVlKTsoZnVuY3Rpb24oKXt2YXIgbD1zYXAudWkubGF6eVJlcXVpcmU7ZnVuY3Rpb24gZShwLGMscyl7Zm9yKHZhciBpPTA7aTxjLmxlbmd0aDtpKyspe2lmKHMpe2wocyxjW2ldLnRvTG93ZXJDYXNlKCkscCtjW2ldKX1lbHNle2wocCtjW2ldLCJuZXcgZXh0ZW5kIGdldE1ldGFkYXRhIil9fX1sKCJzYXAudWkuY29yZS5CdXN5SW5kaWNhdG9yIiwic2hvdyBoaWRlIGF0dGFjaE9wZW4gZGV0YWNoT3BlbiBhdHRhY2hDbG9zZSBkZXRhY2hDbG9zZSIpO2woInNhcC51aS5jb3JlLnRtcGwuVGVtcGxhdGUiLCJyZWdpc3RlclR5cGUgdW5yZWdpc3RlclR5cGUiKTtsKCJzYXAudWkuY29yZS5GcmFnbWVudCIsInJlZ2lzdGVyVHlwZSIpO2woInNhcC51aSIsInhtbGZyYWdtZW50Iiwic2FwLnVpLmNvcmUuRnJhZ21lbnQiKTtsKCJzYXAudWkiLCJqc2ZyYWdtZW50Iiwic2FwLnVpLmNvcmUuRnJhZ21lbnQiKTtsKCJzYXAudWkiLCJodG1sZnJhZ21lbnQiLCJzYXAudWkuY29yZS5GcmFnbWVudCIpO2UoInNhcC51aS5tb2RlbC4iLFsiRmlsdGVyIiwiU29ydGVyIiwianNvbi5KU09OTW9kZWwiLCJyZXNvdXJjZS5SZXNvdXJjZU1vZGVsIiwib2RhdGEuT0RhdGFNb2RlbCIsInhtbC5YTUxNb2RlbCJdKTtlKCJzYXAudWkubW9kZWwudHlwZS4iLFsiQm9vbGVhbiIsIkludGVnZXIiLCJGbG9hdCIsIlN0cmluZyIsIkRhdGUiLCJUaW1lIiwiRGF0ZVRpbWUiXSk7ZSgic2FwLnVpLmNvcmUuIixbIkxvY2FsZSIsIkxvY2FsZURhdGEiLCJtdmMuQ29udHJvbGxlciJdKTtlKCJzYXAudWkuY29yZS5tdmMuIixbIkNvbnRyb2xsZXIiLCJWaWV3IiwiSlNWaWV3IiwiSlNPTlZpZXciLCJYTUxWaWV3IiwiSFRNTFZpZXciLCJUZW1wbGF0ZVZpZXciXSwic2FwLnVpIik7ZSgic2FwLnVpLmNvcmUuIixbIkNvbXBvbmVudCJdLCJzYXAudWkiKTtlKCJzYXAudWkuY29yZS50bXBsLiIsWyJUZW1wbGF0ZSJdLCJzYXAudWkiKX0oKSl9LGZhbHNlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUucGx1Z2luLlRlbXBsYXRpbmdTdXBwb3J0Jykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUucGx1Z2luLlRlbXBsYXRpbmdTdXBwb3J0Jyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvcGx1Z2luL1RlbXBsYXRpbmdTdXBwb3J0IixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL2NvcmUvQ29yZScsJ3NhcC91aS9jb3JlL3RtcGwvVGVtcGxhdGUnXSxmdW5jdGlvbihxLEMsVCl7InVzZSBzdHJpY3QiO3ZhciBhPWZ1bmN0aW9uKCl7fTthLnByb3RvdHlwZS5zdGFydFBsdWdpbj1mdW5jdGlvbihjLG8pe3Euc2FwLmxvZy5pbmZvKCJTdGFydGluZyBUZW1wbGF0aW5nU3VwcG9ydCBwbHVnaW4uIik7dGhpcy5vQ29yZT1jO3NhcC51aS50ZW1wbGF0ZSgpfTthLnByb3RvdHlwZS5zdG9wUGx1Z2luPWZ1bmN0aW9uKCl7cS5zYXAubG9nLmluZm8oIlN0b3BwaW5nIFRlbXBsYXRpbmdTdXBwb3J0IHBsdWdpbi4iKTt0aGlzLm9Db3JlPW51bGx9OyhmdW5jdGlvbigpe3ZhciB0PW5ldyBhKCk7c2FwLnVpLmdldENvcmUoKS5yZWdpc3RlclBsdWdpbih0KX0oKSk7cmV0dXJuIGF9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS5zZWFyY2guU2VhcmNoUHJvdmlkZXInKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS5zZWFyY2guU2VhcmNoUHJvdmlkZXInKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9zZWFyY2gvU2VhcmNoUHJvdmlkZXIiLFsnc2FwL3VpL2NvcmUvbGlicmFyeScsJ3NhcC91aS9jb3JlL0VsZW1lbnQnXSxmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0IjtzYXAudWkuY29yZS5FbGVtZW50LmV4dGVuZCgic2FwLnVpLmNvcmUuc2VhcmNoLlNlYXJjaFByb3ZpZGVyIix7bWV0YWRhdGE6e3B1YmxpY01ldGhvZHM6WyJzdWdnZXN0Il0sbGlicmFyeToic2FwLnVpLmNvcmUiLHByb3BlcnRpZXM6eyJpY29uIjp7dHlwZToic3RyaW5nIixncm91cDoiTWlzYyIsZGVmYXVsdFZhbHVlOm51bGx9fX19KTtzYXAudWkuY29yZS5zZWFyY2guU2VhcmNoUHJvdmlkZXIucHJvdG90eXBlLnN1Z2dlc3Q9ZnVuY3Rpb24odixjKXtqUXVlcnkuc2FwLmxvZy53YXJuaW5nKCJzYXAudWkuY29yZS5zZWFyY2guU2VhcmNoUHJvdmlkZXIgaXMgdGhlIGFic3RyYWN0IGJhc2UgY2xhc3MgZm9yIGFsbCBTZWFyY2hQcm92aWRlcnMuIERvIG5vdCBjcmVhdGUgaW5zdGFuY2VzIG9mIHRoaXMgY2xhc3MsIGJ1dCB1c2UgYSBjb25jcmV0ZSBzdWIgY2xhc3MgaW5zdGVhZC4iKX07cmV0dXJuIHNhcC51aS5jb3JlLnNlYXJjaC5TZWFyY2hQcm92aWRlcn0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLnRoZW1pbmcuUGFyYW1ldGVycycpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLnRoZW1pbmcuUGFyYW1ldGVycycpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL3RoZW1pbmcvUGFyYW1ldGVycyIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJ3NhcC91aS9jb3JlL0NvcmUnXSxmdW5jdGlvbihxLEMpeyJ1c2Ugc3RyaWN0Ijt2YXIgUD17fTt2YXIgcD1udWxsO3ZhciB0PW51bGw7ZnVuY3Rpb24gcigpe3A9bnVsbH1mdW5jdGlvbiBsKCl7dmFyIHU9cSh0aGlzKS5jc3MoImJhY2tncm91bmQtaW1hZ2UiKTt2YXIgYT0vXChbIiddZGF0YTp0ZXh0XC9wbGFpbjt1dGYtOCwoLiopWyInXVwpJC9pLmV4ZWModSk7aWYoYSYmYS5sZW5ndGg+PTIpe3ZhciBzPWFbMV07aWYocy5jaGFyQXQoMCkhPT0ieyImJnMuY2hhckF0KHMubGVuZ3RoLTEpIT09In0iKXt0cnl7cz1kZWNvZGVVUkkocyl9Y2F0Y2goZSl7cS5zYXAubG9nLndhcm5pbmcoIkNvdWxkIG5vdCBkZWNvZGUgdGhlbWUgcGFyYW1ldGVycyBVUkkgZnJvbSBsaWJyYXJ5LmNzcy4iKX19dHJ5e3ZhciBvPXEucGFyc2VKU09OKHMpO3EuZXh0ZW5kKHAsbyk7cmV0dXJufWNhdGNoKGUpe3Euc2FwLmxvZy53YXJuaW5nKCJDb3VsZCBub3QgcGFyc2UgdGhlbWUgcGFyYW1ldGVycyBmcm9tIGxpYnJhcnkuY3NzLiBMb2FkaW5nIGxpYnJhcnktcGFyYW1ldGVycy5qc29uIGFzIGZhbGxiYWNrIHNvbHV0aW9uLiIpfX12YXIgdT10aGlzLmhyZWYsUixiO3U9dS5yZXBsYWNlKC9cL2xpYnJhcnkoW15cLy5dKilcLig/OmNzc3xsZXNzKSgkfFs/I10pLyxmdW5jdGlvbigkLGMsZCl7cmV0dXJuIi9saWJyYXJ5LXBhcmFtZXRlcnMuanNvbiIrKGQ/ZDoiIil9KTtSPXEuc2FwLnNqYXgoe3VybDp1LGRhdGFUeXBlOidqc29uJ30pO2lmKFIuc3VjY2Vzcyl7Yj0odHlwZW9mIFIuZGF0YT09InN0cmluZyIpP3EucGFyc2VKU09OKFIuZGF0YSk6Ui5kYXRhO2lmKHEuaXNBcnJheShiKSl7Zm9yKHZhciBqPTA7ajxiLmxlbmd0aDtqKyspe3EuZXh0ZW5kKHAsYltqXSl9fWVsc2V7cS5leHRlbmQocCxiKX19ZWxzZXtxLnNhcC5sb2cud2FybmluZygiQ291bGQgbm90IGxvYWQgdGhlbWUgcGFyYW1ldGVycyBmcm9tOiAiK3UpfX1mdW5jdGlvbiBnKCl7aWYoIXApe3A9e307dD1zYXAudWkuZ2V0Q29yZSgpLmdldENvbmZpZ3VyYXRpb24oKS5nZXRUaGVtZSgpO3EoImxpbmtbaWRePXNhcC11aS10aGVtZS1dIikuZWFjaChsKX1yZXR1cm4gcH1QLl9hZGRMaWJyYXJ5VGhlbWU9ZnVuY3Rpb24oTCl7aWYocCl7dmFyIG89cS5zYXAuZG9tQnlJZCgic2FwLXVpLXRoZW1lLSIrTCk7bC5hcHBseShvKX19O1AuZ2V0PWZ1bmN0aW9uKG4pe2lmKGFyZ3VtZW50cy5sZW5ndGg9PTEpe3ZhciBzPWcoKVtuXTtpZih0eXBlb2Ygcz09PSJ1bmRlZmluZWQiJiZ0eXBlb2Ygbj09PSJzdHJpbmciKXt2YXIgaT1uLmluZGV4T2YoIjoiKTtpZihpIT09LTEpe249bi5zdWJzdHIoaSsxKX1zPWcoKVtuXX1yZXR1cm4gc31lbHNlIGlmKGFyZ3VtZW50cy5sZW5ndGg9PTApe3JldHVybiBxLmV4dGVuZCh7fSxnKCkpfWVsc2V7cmV0dXJuIHVuZGVmaW5lZH19O1AuX3NldE9yTG9hZFBhcmFtZXRlcnM9ZnVuY3Rpb24oTCl7cD17fTt0PXNhcC51aS5nZXRDb3JlKCkuZ2V0Q29uZmlndXJhdGlvbigpLmdldFRoZW1lKCk7cSgibGlua1tpZF49c2FwLXVpLXRoZW1lLV0iKS5lYWNoKGZ1bmN0aW9uKCl7dmFyICQ9cSh0aGlzKTt2YXIgcz0kLmF0dHIoImlkIikuc3Vic3RyKDEzKTtpZihMW3NdKXtxLmV4dGVuZChwLExbc10pfWVsc2V7bC5hcHBseSh0aGlzKX19KX07UC5yZXNldD1mdW5jdGlvbigpe3ZhciBvPWFyZ3VtZW50c1swXT09PXRydWU7aWYoIW98fHNhcC51aS5nZXRDb3JlKCkuZ2V0Q29uZmlndXJhdGlvbigpLmdldFRoZW1lKCkhPT10KXtyKCl9fTtQLl9nZXRUaGVtZUltYWdlPWZ1bmN0aW9uKHMsZil7cz1zfHwic2FwVWlHbG9iYWxMb2dvIjt2YXIgYT1zYXAudWkuY29yZS50aGVtaW5nLlBhcmFtZXRlcnMuZ2V0KHMpO2lmKGEpe3ZhciBtPS91cmxbXHNdKlwoJz8iPyhbXlwnIildKiknPyI/XCkvLmV4ZWMoYSk7aWYobSl7YT1tWzFdfWVsc2UgaWYoYT09PSInJyJ8fGE9PT0ibm9uZSIpe2E9bnVsbH19aWYoISFmJiYhYSl7cmV0dXJuIHNhcC51aS5yZXNvdXJjZSgnc2FwLnVpLmNvcmUnLCd0aGVtZXMvYmFzZS9pbWcvMXgxLmdpZicpfXJldHVybiBhfTtyZXR1cm4gUH0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLnRtcGwuRE9NQXR0cmlidXRlJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUudG1wbC5ET01BdHRyaWJ1dGUnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS90bXBsL0RPTUF0dHJpYnV0ZSIsWydzYXAvdWkvY29yZS9saWJyYXJ5Jywnc2FwL3VpL2NvcmUvRWxlbWVudCddLGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO3NhcC51aS5jb3JlLkVsZW1lbnQuZXh0ZW5kKCJzYXAudWkuY29yZS50bXBsLkRPTUF0dHJpYnV0ZSIse21ldGFkYXRhOntsaWJyYXJ5OiJzYXAudWkuY29yZSIscHJvcGVydGllczp7Im5hbWUiOnt0eXBlOiJzdHJpbmciLGdyb3VwOiJEYXRhIixkZWZhdWx0VmFsdWU6bnVsbH0sInZhbHVlIjp7dHlwZToic3RyaW5nIixncm91cDoiRGF0YSIsZGVmYXVsdFZhbHVlOm51bGx9fX19KTtzYXAudWkuY29yZS50bXBsLkRPTUF0dHJpYnV0ZS5wcm90b3R5cGUuc2V0VmFsdWU9ZnVuY3Rpb24odil7dGhpcy5zZXRQcm9wZXJ0eSgidmFsdWUiLHYsdHJ1ZSk7dmFyIHA9dGhpcy5nZXRQYXJlbnQoKSwkPXAmJnAuJCgpO2lmKCQmJiQubGVuZ3RoPjApeyQuYXR0cih0aGlzLmdldE5hbWUoKSx0aGlzLmdldFByb3BlcnR5KCJ2YWx1ZSIpKX1yZXR1cm4gdGhpc307cmV0dXJuIHNhcC51aS5jb3JlLnRtcGwuRE9NQXR0cmlidXRlfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUudXRpbC5FeHBvcnRDZWxsJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUudXRpbC5FeHBvcnRDZWxsJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvdXRpbC9FeHBvcnRDZWxsIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL2NvcmUvRWxlbWVudCddLGZ1bmN0aW9uKHEsRSl7J3VzZSBzdHJpY3QnO3ZhciBhPUUuZXh0ZW5kKCdzYXAudWkuY29yZS51dGlsLkV4cG9ydENlbGwnLHttZXRhZGF0YTp7cHJvcGVydGllczp7Y29udGVudDonc3RyaW5nJ319fSk7cmV0dXJuIGF9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS51dGlsLkV4cG9ydENvbHVtbicpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLnV0aWwuRXhwb3J0Q29sdW1uJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvdXRpbC9FeHBvcnRDb2x1bW4iLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvYmFzZS9NYW5hZ2VkT2JqZWN0JywnLi9FeHBvcnRDZWxsJ10sZnVuY3Rpb24ocSxNLEUpeyd1c2Ugc3RyaWN0Jzt2YXIgYT1NLmV4dGVuZCgic2FwLnVpLmNvcmUudXRpbC5FeHBvcnRDb2x1bW4iLHttZXRhZGF0YTp7cHJvcGVydGllczp7bmFtZToic3RyaW5nIn0sYWdncmVnYXRpb25zOnt0ZW1wbGF0ZTp7dHlwZToic2FwLnVpLmNvcmUudXRpbC5FeHBvcnRDZWxsIixtdWx0aXBsZTpmYWxzZX19fX0pO3JldHVybiBhfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUudXRpbC5FeHBvcnRSb3cnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS51dGlsLkV4cG9ydFJvdycpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL3V0aWwvRXhwb3J0Um93IixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL2Jhc2UvTWFuYWdlZE9iamVjdCcsJy4vRXhwb3J0Q2VsbCddLGZ1bmN0aW9uKHEsTSxFKXsndXNlIHN0cmljdCc7dmFyIGE9TS5leHRlbmQoInNhcC51aS5jb3JlLnV0aWwuRXhwb3J0Um93Iix7bWV0YWRhdGE6e2FnZ3JlZ2F0aW9uczp7Y2VsbHM6e3R5cGU6InNhcC51aS5jb3JlLnV0aWwuRXhwb3J0Q2VsbCIsbXVsdGlwbGU6dHJ1ZX19fX0pO3JldHVybiBhfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUuQ3VzdG9tRGF0YScpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLkN1c3RvbURhdGEnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9DdXN0b21EYXRhIixbJy4vbGlicmFyeScsJy4vRWxlbWVudCddLGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO3NhcC51aS5jb3JlLkVsZW1lbnQuZXh0ZW5kKCJzYXAudWkuY29yZS5DdXN0b21EYXRhIix7bWV0YWRhdGE6e2xpYnJhcnk6InNhcC51aS5jb3JlIixwcm9wZXJ0aWVzOnsia2V5Ijp7dHlwZToic3RyaW5nIixncm91cDoiRGF0YSIsZGVmYXVsdFZhbHVlOm51bGx9LCJ2YWx1ZSI6e3R5cGU6ImFueSIsZ3JvdXA6IkRhdGEiLGRlZmF1bHRWYWx1ZTpudWxsfSwid3JpdGVUb0RvbSI6e3R5cGU6ImJvb2xlYW4iLGdyb3VwOiJEYXRhIixkZWZhdWx0VmFsdWU6ZmFsc2V9fX19KTtzYXAudWkuY29yZS5DdXN0b21EYXRhLnByb3RvdHlwZS5zZXRWYWx1ZT1mdW5jdGlvbih2KXt0aGlzLnNldFByb3BlcnR5KCJ2YWx1ZSIsdix0cnVlKTt2YXIgYz10aGlzLmdldFBhcmVudCgpO2lmKGMmJmMuZ2V0RG9tUmVmKCkmJnRoaXMuZ2V0V3JpdGVUb0RvbSgpKXt2YXIgaz10aGlzLmdldEtleSgpO2lmKHR5cGVvZiB2PT09InN0cmluZyIpe2lmKChzYXAudWkuY29yZS5JRC5pc1ZhbGlkKGspKSYmKGsuaW5kZXhPZigiOiIpPT0tMSkmJihrLmluZGV4T2YoInNhcC11aSIpIT09MCkpe2MuJCgpLmF0dHIoImRhdGEtIitrLHYpfWVsc2V7alF1ZXJ5LnNhcC5sb2cuZXJyb3IoIkN1c3RvbURhdGEgd2l0aCBrZXkgIitrKyIgc2hvdWxkIGJlIHdyaXR0ZW4gdG8gSFRNTCBvZiAiK2MrIiBidXQgdGhlIGtleSBpcyBub3QgdmFsaWQgKG11c3QgYmUgYSB2YWxpZCBzYXAudWkuY29yZS5JRCB3aXRob3V0IGFueSBjb2xvbiBhbmQgbWF5IG5vdCBzdGFydCB3aXRoICdzYXAtdWknKS4iKX19ZWxzZXtqUXVlcnkuc2FwLmxvZy5lcnJvcigiQ3VzdG9tRGF0YSB3aXRoIGtleSAiK2srIiBzaG91bGQgYmUgd3JpdHRlbiB0byBIVE1MIG9mICIrYysiIGJ1dCB0aGUgdmFsdWUgaXMgbm90IGEgc3RyaW5nLiIpfX1yZXR1cm4gdGhpc307cmV0dXJuIHNhcC51aS5jb3JlLkN1c3RvbURhdGF9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS5FbmFibGVkUHJvcGFnYXRvcicpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLkVuYWJsZWRQcm9wYWdhdG9yJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvRW5hYmxlZFByb3BhZ2F0b3IiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCcuL0NvbnRyb2wnXSxmdW5jdGlvbihxLEMpeyJ1c2Ugc3RyaWN0Ijt2YXIgRT1mdW5jdGlvbihkLGwpe2lmKCEodGhpcyBpbnN0YW5jZW9mIEMpKXt0aHJvdyBuZXcgRXJyb3IoIkVuYWJsZWRQcm9wYWdhdG9yIG9ubHkgc3VwcG9ydHMgc3ViY2xhc3NlcyBvZiBDb250cm9sIil9aWYoZD09PXVuZGVmaW5lZCl7ZD10cnVlfWZ1bmN0aW9uIGYoYyl7dmFyIHA9Yy5nZXRQYXJlbnQoKTt3aGlsZShwJiYhcC5nZXRFbmFibGVkJiZwLmdldFBhcmVudCl7cD1wLmdldFBhcmVudCgpfXJldHVybiBwfWlmKHRoaXMuZ2V0RW5hYmxlZD09PXVuZGVmaW5lZCl7dGhpcy5nZXRFbmFibGVkPWZ1bmN0aW9uKCl7dmFyIHA9Zih0aGlzKTtyZXR1cm4ocCYmcC5nZXRFbmFibGVkJiYhcC5nZXRFbmFibGVkKCkpP2ZhbHNlOnRoaXMuZ2V0UHJvcGVydHkoImVuYWJsZWQiKX07aWYobCl7dGhpcy5nZXRNZXRhZGF0YSgpLmFkZFByb3BlcnR5KCJFbmFibGVkIix7dHlwZToiYm9vbGVhbiIsZ3JvdXA6IkJlaGF2aW9yIixkZWZhdWx0VmFsdWU6ISFkfSl9dGhpcy5nZXRNZXRhZGF0YSgpLmFkZFByb3BlcnR5KCJlbmFibGVkIix7dHlwZToiYm9vbGVhbiIsZ3JvdXA6IkJlaGF2aW9yIixkZWZhdWx0VmFsdWU6ISFkfSk7dGhpcy5nZXRNZXRhZGF0YSgpLmFkZFB1YmxpY01ldGhvZHMoJ2dldEVuYWJsZWQnKX1lbHNle3ZhciBvPXRoaXMuZ2V0RW5hYmxlZDt0aGlzLmdldEVuYWJsZWQ9ZnVuY3Rpb24oKXt2YXIgcD1mKHRoaXMpO3JldHVybihwJiZwLmdldEVuYWJsZWQmJiFwLmdldEVuYWJsZWQoKSk/ZmFsc2U6by5hcHBseSh0aGlzKX19aWYodGhpcy5zZXRFbmFibGVkPT09dW5kZWZpbmVkKXt0aGlzLnNldEVuYWJsZWQ9ZnVuY3Rpb24oZSl7dGhpcy5zZXRQcm9wZXJ0eSgiZW5hYmxlZCIsZSl9O3RoaXMuZ2V0TWV0YWRhdGEoKS5hZGRQdWJsaWNNZXRob2RzKCdzZXRFbmFibGVkJyl9fTtyZXR1cm4gRX0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLkhUTUwnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS5IVE1MJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvSFRNTCIsWycuL2xpYnJhcnknLCcuL0NvbnRyb2wnXSxmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0IjtzYXAudWkuY29yZS5Db250cm9sLmV4dGVuZCgic2FwLnVpLmNvcmUuSFRNTCIse21ldGFkYXRhOntsaWJyYXJ5OiJzYXAudWkuY29yZSIscHJvcGVydGllczp7ImNvbnRlbnQiOnt0eXBlOiJzdHJpbmciLGdyb3VwOiJNaXNjIixkZWZhdWx0VmFsdWU6bnVsbH0sInByZWZlckRPTSI6e3R5cGU6ImJvb2xlYW4iLGdyb3VwOiJNaXNjIixkZWZhdWx0VmFsdWU6dHJ1ZX0sInNhbml0aXplQ29udGVudCI6e3R5cGU6ImJvb2xlYW4iLGdyb3VwOiJNaXNjIixkZWZhdWx0VmFsdWU6ZmFsc2V9fSxldmVudHM6eyJhZnRlclJlbmRlcmluZyI6e319fX0pO3NhcC51aS5jb3JlLkhUTUwuTV9FVkVOVFM9eydhZnRlclJlbmRlcmluZyc6J2FmdGVyUmVuZGVyaW5nJ307c2FwLnVpLmNvcmUuSFRNTC5wcm90b3R5cGUuZ2V0RG9tUmVmPWZ1bmN0aW9uKHMpe3ZhciBpPXM/dGhpcy5nZXRJZCgpKyItIitzOnRoaXMuZ2V0SWQoKTtyZXR1cm4galF1ZXJ5LnNhcC5kb21CeUlkKCJzYXAtdWktZHVtbXktIitpKXx8alF1ZXJ5LnNhcC5kb21CeUlkKGkpfTtzYXAudWkuY29yZS5IVE1MLnByb3RvdHlwZS5zZXRDb250ZW50PWZ1bmN0aW9uKGMpe2Z1bmN0aW9uIHAocyl7aWYoalF1ZXJ5LnBhcnNlSFRNTCl7dmFyIGE9alF1ZXJ5LnBhcnNlSFRNTChzKTtpZihhKXt2YXIgYj0wLGU9YS5sZW5ndGg7d2hpbGUoYjxlJiZhW2JdLm5vZGVUeXBlIT0xKXtiKyt9d2hpbGUoYjxlJiZhW2UtMV0ubm9kZVR5cGUhPTEpe2UtLX1pZihiPjB8fGU8YS5sZW5ndGgpe2E9YS5zbGljZShiLGUpfXJldHVybiBqUXVlcnkoYSl9fXJldHVybiBqUXVlcnkocyl9aWYodGhpcy5nZXRTYW5pdGl6ZUNvbnRlbnQoKSl7Yz1qUXVlcnkuc2FwLl9zYW5pdGl6ZUhUTUwoYyl9dGhpcy5zZXRQcm9wZXJ0eSgiY29udGVudCIsYyx0cnVlKTtpZih0aGlzLmdldERvbVJlZigpKXt2YXIgJD1wKHRoaXMuZ2V0Q29udGVudCgpKTtqUXVlcnkodGhpcy5nZXREb21SZWYoKSkucmVwbGFjZVdpdGgoJCk7dGhpcy5fcG9zdHByb2Nlc3NOZXdDb250ZW50KCQpfWVsc2V7dGhpcy5pbnZhbGlkYXRlKCl9cmV0dXJuIHRoaXN9O3NhcC51aS5jb3JlLkhUTUwucHJvdG90eXBlLm9uQmVmb3JlUmVuZGVyaW5nPWZ1bmN0aW9uKCl7aWYodGhpcy5nZXRQcmVmZXJET00oKSYmdGhpcy5nZXREb21SZWYoKSYmIXNhcC51aS5jb3JlLlJlbmRlck1hbmFnZXIuaXNQcmVzZXJ2ZWRDb250ZW50KHRoaXMuZ2V0RG9tUmVmKCkpKXtzYXAudWkuY29yZS5SZW5kZXJNYW5hZ2VyLnByZXNlcnZlQ29udGVudCh0aGlzLmdldERvbVJlZigpLHRydWUsZmFsc2UpfX07c2FwLnVpLmNvcmUuSFRNTC5wcm90b3R5cGUub25BZnRlclJlbmRlcmluZz1mdW5jdGlvbigpe3ZhciAkPWpRdWVyeShqUXVlcnkuc2FwLmRvbUJ5SWQoInNhcC11aS1kdW1teS0iK3RoaXMuZ2V0SWQoKSkpO3ZhciBhPXNhcC51aS5jb3JlLlJlbmRlck1hbmFnZXIuZmluZFByZXNlcnZlZENvbnRlbnQodGhpcy5nZXRJZCgpKTt2YXIgYj11bmRlZmluZWQ7dmFyIGk9ZmFsc2U7aWYoKCF0aGlzLmdldFByZWZlckRPTSgpfHxhLnNpemUoKT09MCkpe2EucmVtb3ZlKCk7Yj1uZXcgalF1ZXJ5KHRoaXMuZ2V0Q29udGVudCgpKTskLnJlcGxhY2VXaXRoKGIpfWVsc2UgaWYoYS5zaXplKCk+MCl7JC5yZXBsYWNlV2l0aChhKTtiPWE7aT10cnVlfWVsc2V7JC5yZW1vdmUoKX10aGlzLl9wb3N0cHJvY2Vzc05ld0NvbnRlbnQoYik7dGhpcy5maXJlQWZ0ZXJSZW5kZXJpbmcoe2lzUHJlc2VydmVkRE9NOml9KX07c2FwLnVpLmNvcmUuSFRNTC5wcm90b3R5cGUuX3Bvc3Rwcm9jZXNzTmV3Q29udGVudD1mdW5jdGlvbigkKXtpZigkJiYkLnNpemUoKT4wKXtpZigkLmxlbmd0aD4xKXtqUXVlcnkuc2FwLmxvZy53YXJuaW5nKCJbVW5zdXBwb3J0ZWQgRmVhdHVyZV06ICIrdGhpcysiIGhhcyByZW5kZXJlZCAiKyQubGVuZ3RoKyIgcm9vdCBub2RlcyEiKX1lbHNle3ZhciBjPSQuYXR0cigiaWQiKTtpZihjJiZjIT10aGlzLmdldElkKCkpe2pRdWVyeS5zYXAubG9nLndhcm5pbmcoIltVbnN1cHBvcnRlZCBGZWF0dXJlXTogSWQgb2YgSFRNTCBDb250cm9sICciK3RoaXMuZ2V0SWQoKSsiJyBkb2VzIG5vdCBtYXRjaCB3aXRoIGNvbnRlbnQgaWQgJyIrYysiJyEiKX19c2FwLnVpLmNvcmUuUmVuZGVyTWFuYWdlci5tYXJrUHJlc2VydmFibGVDb250ZW50KCQsdGhpcy5nZXRJZCgpKTtpZigkLmZpbmQoIiMiK3RoaXMuZ2V0SWQoKS5yZXBsYWNlKC8oOnxcLikvZywnXFwkMScpKS5sZW5ndGg9PT0wKXskLmZpbHRlcigiOm5vdChbaWRdKSIpLmZpcnN0KCkuYXR0cigiaWQiLHRoaXMuZ2V0SWQoKSl9fWVsc2V7alF1ZXJ5LnNhcC5sb2cuZGVidWcoIiIrdGhpcysiIGlzIGVtcHR5IGFmdGVyIHJlbmRlcmluZywgc2V0dGluZyBiT3V0cHV0IHRvIGZhbHNlIik7dGhpcy5iT3V0cHV0PWZhbHNlfX07c2FwLnVpLmNvcmUuSFRNTC5wcm90b3R5cGUuc2V0RE9NQ29udGVudD1mdW5jdGlvbihkKXt2YXIgJD1qUXVlcnkoZCk7aWYodGhpcy5nZXREb21SZWYoKSl7alF1ZXJ5KHRoaXMuZ2V0RG9tUmVmKCkpLnJlcGxhY2VXaXRoKCQpO3RoaXMuX3Bvc3Rwcm9jZXNzTmV3Q29udGVudCgkKX1lbHNleyQuYXBwZW5kVG8oc2FwLnVpLmNvcmUuUmVuZGVyTWFuYWdlci5nZXRQcmVzZXJ2ZUFyZWFSZWYoKSk7aWYodGhpcy5nZXRVSUFyZWEoKSl7dGhpcy5nZXRVSUFyZWEoKS5pbnZhbGlkYXRlKCl9dGhpcy5fcG9zdHByb2Nlc3NOZXdDb250ZW50KCQpfXJldHVybiB0aGlzfTtzYXAudWkuY29yZS5IVE1MLnByb3RvdHlwZS5zZXRUb29sdGlwPWZ1bmN0aW9uKHQpe2pRdWVyeS5zYXAubG9nLndhcm5pbmcoIlRoZSBzYXAudWkuY29yZS5IVE1MIGNvbnRyb2wgZG9lc24ndCBzdXBwb3J0IHRvb2x0aXBzLiBBZGQgdGhlIHRvb2x0aXAgdG8gdGhlIEhUTUwgY29udGVudCBpbnN0ZWFkLiIpO3JldHVybiBzYXAudWkuY29yZS5Db250cm9sLnByb3RvdHlwZS5zZXRUb29sdGlwLmFwcGx5KHRoaXMsYXJndW1lbnRzKX07cmV0dXJuIHNhcC51aS5jb3JlLkhUTUx9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS5JY29uJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUuSWNvbicpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL0ljb24iLFsnLi9saWJyYXJ5JywnLi9Db250cm9sJywnLi9JY29uUG9vbCddLGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO3NhcC51aS5jb3JlLkNvbnRyb2wuZXh0ZW5kKCJzYXAudWkuY29yZS5JY29uIix7bWV0YWRhdGE6e2xpYnJhcnk6InNhcC51aS5jb3JlIixwcm9wZXJ0aWVzOnsic3JjIjp7dHlwZToic2FwLnVpLmNvcmUuVVJJIixncm91cDoiRGF0YSIsZGVmYXVsdFZhbHVlOm51bGx9LCJzaXplIjp7dHlwZToic2FwLnVpLmNvcmUuQ1NTU2l6ZSIsZ3JvdXA6IkRpbWVuc2lvbiIsZGVmYXVsdFZhbHVlOm51bGx9LCJjb2xvciI6e3R5cGU6InNhcC51aS5jb3JlLkNTU0NvbG9yIixncm91cDoiQXBwZWFyYW5jZSIsZGVmYXVsdFZhbHVlOm51bGx9LCJob3ZlckNvbG9yIjp7dHlwZToic2FwLnVpLmNvcmUuQ1NTQ29sb3IiLGdyb3VwOiJBcHBlYXJhbmNlIixkZWZhdWx0VmFsdWU6bnVsbH0sImFjdGl2ZUNvbG9yIjp7dHlwZToic2FwLnVpLmNvcmUuQ1NTQ29sb3IiLGdyb3VwOiJBcHBlYXJhbmNlIixkZWZhdWx0VmFsdWU6bnVsbH0sIndpZHRoIjp7dHlwZToic2FwLnVpLmNvcmUuQ1NTU2l6ZSIsZ3JvdXA6IkRpbWVuc2lvbiIsZGVmYXVsdFZhbHVlOm51bGx9LCJoZWlnaHQiOnt0eXBlOiJzYXAudWkuY29yZS5DU1NTaXplIixncm91cDoiRGltZW5zaW9uIixkZWZhdWx0VmFsdWU6bnVsbH0sImJhY2tncm91bmRDb2xvciI6e3R5cGU6InNhcC51aS5jb3JlLkNTU0NvbG9yIixncm91cDoiQXBwZWFyYW5jZSIsZGVmYXVsdFZhbHVlOm51bGx9LCJob3ZlckJhY2tncm91bmRDb2xvciI6e3R5cGU6InNhcC51aS5jb3JlLkNTU0NvbG9yIixncm91cDoiQXBwZWFyYW5jZSIsZGVmYXVsdFZhbHVlOm51bGx9LCJhY3RpdmVCYWNrZ3JvdW5kQ29sb3IiOnt0eXBlOiJzYXAudWkuY29yZS5DU1NDb2xvciIsZ3JvdXA6IkFwcGVhcmFuY2UiLGRlZmF1bHRWYWx1ZTpudWxsfSwidmlzaWJsZSI6e3R5cGU6ImJvb2xlYW4iLGdyb3VwOiJBcHBlYXJhbmNlIixkZWZhdWx0VmFsdWU6dHJ1ZX0sImRlY29yYXRpdmUiOnt0eXBlOiJib29sZWFuIixncm91cDoiQWNjZXNzaWJpbGl0eSIsZGVmYXVsdFZhbHVlOnRydWV9fSxldmVudHM6eyJwcmVzcyI6e319fX0pO3NhcC51aS5jb3JlLkljb24uTV9FVkVOVFM9eydwcmVzcyc6J3ByZXNzJ307c2FwLnVpLmNvcmUuSWNvbi5wcm90b3R5cGUub25BZnRlclJlbmRlcmluZz1mdW5jdGlvbigpe3ZhciBpPXRoaXMuJCgpO2lmKHRoaXMuaGFzTGlzdGVuZXJzKCJwcmVzcyIpKXtpLmNzcygiY3Vyc29yIiwicG9pbnRlciIpfWlmKGkuY3NzKCJjdXJzb3IiKT09PSJhdXRvIil7aS5jc3MoImN1cnNvciIsImRlZmF1bHQiKX19O3NhcC51aS5jb3JlLkljb24ucHJvdG90eXBlLm9ubW91c2Vkb3duPWZ1bmN0aW9uKGUpe3RoaXMuX2JQcmVzc0ZpcmVkPWZhbHNlO2lmKHRoaXMuaGFzTGlzdGVuZXJzKCJwcmVzcyIpfHx0aGlzLmhhc0xpc3RlbmVycygidGFwIikpe2Uuc2V0TWFya2VkKCl9dmFyIGE9dGhpcy5nZXRBY3RpdmVDb2xvcigpLEE9dGhpcy5nZXRBY3RpdmVCYWNrZ3JvdW5kQ29sb3IoKSxpO2lmKGF8fEEpe2lmKCFlLnRhcmdldFRvdWNoZXN8fChlLnRhcmdldFRvdWNoZXMmJmUudGFyZ2V0VG91Y2hlcy5sZW5ndGg9PT0xKSl7aT10aGlzLiQoKTtpLmFkZENsYXNzKCJzYXBVaUljb25BY3RpdmUiKTtpZihhKXtpLmNzcygiY29sb3IiLGEpfWlmKEEpe2kuY3NzKCJiYWNrZ3JvdW5kLWNvbG9yIixBKX19fX07c2FwLnVpLmNvcmUuSWNvbi5wcm90b3R5cGUub250b3VjaHN0YXJ0PXNhcC51aS5jb3JlLkljb24ucHJvdG90eXBlLm9ubW91c2Vkb3duO3NhcC51aS5jb3JlLkljb24ucHJvdG90eXBlLm9ubW91c2V1cD1mdW5jdGlvbihlKXtpZighZS50YXJnZXRUb3VjaGVzfHwoZS50YXJnZXRUb3VjaGVzJiZlLnRhcmdldFRvdWNoZXMubGVuZ3RoPT09MCkpe3RoaXMuJCgpLnJlbW92ZUNsYXNzKCJzYXBVaUljb25BY3RpdmUiKTt0aGlzLl9yZXN0b3JlQ29sb3JzKCl9fTtzYXAudWkuY29yZS5JY29uLnByb3RvdHlwZS5vbnRvdWNoZW5kPXNhcC51aS5jb3JlLkljb24ucHJvdG90eXBlLm9ubW91c2V1cDtzYXAudWkuY29yZS5JY29uLnByb3RvdHlwZS5vbnRvdWNoY2FuY2VsPXNhcC51aS5jb3JlLkljb24ucHJvdG90eXBlLm9ubW91c2V1cDtzYXAudWkuY29yZS5JY29uLnByb3RvdHlwZS5vbm1vdXNlb3Zlcj1mdW5jdGlvbigpe3ZhciBoPXRoaXMuZ2V0SG92ZXJDb2xvcigpLEg9dGhpcy5nZXRIb3ZlckJhY2tncm91bmRDb2xvcigpLGk9dGhpcy4kKCk7aWYoaCl7aS5jc3MoImNvbG9yIixoKX1pZihIKXtpLmNzcygiYmFja2dyb3VuZC1jb2xvciIsSCl9fTtzYXAudWkuY29yZS5JY29uLnByb3RvdHlwZS5vbm1vdXNlb3V0PWZ1bmN0aW9uKCl7dGhpcy5fcmVzdG9yZUNvbG9ycygpfTtzYXAudWkuY29yZS5JY29uLnByb3RvdHlwZS5vbmNsaWNrPWZ1bmN0aW9uKCl7aWYodGhpcy5fYlByZXNzRmlyZWQpe3JldHVybn10aGlzLmZpcmVQcmVzcyh7fSk7dGhpcy5fYlByZXNzRmlyZWQ9dHJ1ZX07c2FwLnVpLmNvcmUuSWNvbi5wcm90b3R5cGUub250YXA9c2FwLnVpLmNvcmUuSWNvbi5wcm90b3R5cGUub25jbGljaztzYXAudWkuY29yZS5JY29uLnByb3RvdHlwZS5vbmtleWRvd249ZnVuY3Rpb24oZSl7aWYoZS53aGljaD09PWpRdWVyeS5zYXAuS2V5Q29kZXMuU1BBQ0V8fGUud2hpY2g9PT1qUXVlcnkuc2FwLktleUNvZGVzLkVOVEVSKXtlLnByZXZlbnREZWZhdWx0KCk7dmFyIGk9dGhpcy4kKCksYT10aGlzLmdldEFjdGl2ZUNvbG9yKCksQT10aGlzLmdldEFjdGl2ZUJhY2tncm91bmRDb2xvcigpO2kuYWRkQ2xhc3MoInNhcFVpSWNvbkFjdGl2ZSIpO2lmKGEpe2kuY3NzKCJjb2xvciIsYSl9aWYoQSl7aS5jc3MoImJhY2tncm91bmQtY29sb3IiLEEpfX19O3NhcC51aS5jb3JlLkljb24ucHJvdG90eXBlLm9ua2V5dXA9ZnVuY3Rpb24oZSl7aWYoZS53aGljaD09PWpRdWVyeS5zYXAuS2V5Q29kZXMuU1BBQ0V8fGUud2hpY2g9PT1qUXVlcnkuc2FwLktleUNvZGVzLkVOVEVSKXt0aGlzLiQoKS5yZW1vdmVDbGFzcygic2FwVWlJY29uQWN0aXZlIik7dGhpcy5fcmVzdG9yZUNvbG9ycygpO3RoaXMuZmlyZVByZXNzKHt9KX19O3NhcC51aS5jb3JlLkljb24ucHJvdG90eXBlLl9yZXN0b3JlQ29sb3JzPWZ1bmN0aW9uKCl7dGhpcy4kKCkuY3NzKHsiY29sb3IiOnRoaXMuZ2V0Q29sb3IoKXx8IiIsImJhY2tncm91bmQtY29sb3IiOnRoaXMuZ2V0QmFja2dyb3VuZENvbG9yKCl8fCIifSl9O3NhcC51aS5jb3JlLkljb24ucHJvdG90eXBlLnNldFNyYz1mdW5jdGlvbihzKXt2YXIgaT1zYXAudWkuY29yZS5JY29uUG9vbC5nZXRJY29uSW5mbyhzKSx0PXNhcC51aS5EZXZpY2UuYnJvd3Nlci5pbnRlcm5ldF9leHBsb3JlciYmc2FwLnVpLkRldmljZS5icm93c2VyLnZlcnNpb248OSxJPXRoaXMuJCgpO2lmKGkpe0kuY3NzKCJmb250LWZhbWlseSIsaS5mb250RmFtaWx5KTtpZih0KXtJLnRleHQoaS5jb250ZW50KX1lbHNle0kuYXR0cigiZGF0YS1zYXAtdWktaWNvbi1jb250ZW50IixpLmNvbnRlbnQpfUkudG9nZ2xlQ2xhc3MoInNhcFVpSWNvbk1pcnJvckluUlRMIiwhaS5zdXBwcmVzc01pcnJvcmluZyl9dGhpcy5zZXRQcm9wZXJ0eSgic3JjIixzLCEhaSk7cmV0dXJuIHRoaXN9O3NhcC51aS5jb3JlLkljb24ucHJvdG90eXBlLnNldFdpZHRoPWZ1bmN0aW9uKHcpe3RoaXMuc2V0UHJvcGVydHkoIndpZHRoIix3LHRydWUpO3RoaXMuJCgpLmNzcygid2lkdGgiLHcpO3JldHVybiB0aGlzfTtzYXAudWkuY29yZS5JY29uLnByb3RvdHlwZS5zZXRIZWlnaHQ9ZnVuY3Rpb24oaCl7dGhpcy5zZXRQcm9wZXJ0eSgiaGVpZ2h0IixoLHRydWUpO3RoaXMuJCgpLmNzcyh7ImhlaWdodCI6aCwibGluZS1oZWlnaHQiOmh9KTtyZXR1cm4gdGhpc307c2FwLnVpLmNvcmUuSWNvbi5wcm90b3R5cGUuc2V0U2l6ZT1mdW5jdGlvbihzKXt0aGlzLnNldFByb3BlcnR5KCJzaXplIixzLHRydWUpO3RoaXMuJCgpLmNzcygiZm9udC1zaXplIixzKTtyZXR1cm4gdGhpc307c2FwLnVpLmNvcmUuSWNvbi5wcm90b3R5cGUuc2V0Q29sb3I9ZnVuY3Rpb24oYyl7dGhpcy5zZXRQcm9wZXJ0eSgiY29sb3IiLGMsdHJ1ZSk7dGhpcy4kKCkuY3NzKCJjb2xvciIsYyk7cmV0dXJuIHRoaXN9O3NhcC51aS5jb3JlLkljb24ucHJvdG90eXBlLnNldEFjdGl2ZUNvbG9yPWZ1bmN0aW9uKGMpe3JldHVybiB0aGlzLnNldFByb3BlcnR5KCJhY3RpdmVDb2xvciIsYyx0cnVlKX07c2FwLnVpLmNvcmUuSWNvbi5wcm90b3R5cGUuc2V0SG92ZXJDb2xvcj1mdW5jdGlvbihjKXtyZXR1cm4gdGhpcy5zZXRQcm9wZXJ0eSgiaG92ZXJDb2xvciIsYyx0cnVlKX07c2FwLnVpLmNvcmUuSWNvbi5wcm90b3R5cGUuc2V0QmFja2dyb3VuZENvbG9yPWZ1bmN0aW9uKGMpe3RoaXMuc2V0UHJvcGVydHkoImJhY2tncm91bmRDb2xvciIsYyx0cnVlKTt0aGlzLiQoKS5jc3MoImJhY2tncm91bmQtY29sb3IiLGMpO3JldHVybiB0aGlzfTtzYXAudWkuY29yZS5JY29uLnByb3RvdHlwZS5zZXRBY3RpdmVCYWNrZ3JvdW5kQ29sb3I9ZnVuY3Rpb24oYyl7cmV0dXJuIHRoaXMuc2V0UHJvcGVydHkoImFjdGl2ZUJhY2tncm91bmRDb2xvciIsYyx0cnVlKX07c2FwLnVpLmNvcmUuSWNvbi5wcm90b3R5cGUuc2V0SG92ZXJCYWNrZ3JvdW5kQ29sb3I9ZnVuY3Rpb24oYyl7cmV0dXJuIHRoaXMuc2V0UHJvcGVydHkoImhvdmVyQmFja2dyb3VuZENvbG9yIixjLHRydWUpfTtzYXAudWkuY29yZS5JY29uLnByb3RvdHlwZS5hdHRhY2hQcmVzcz1mdW5jdGlvbigpe3ZhciBtPUFycmF5LnByb3RvdHlwZS5zbGljZS5hcHBseShhcmd1bWVudHMpO20uc3BsaWNlKDAsMCwicHJlc3MiKTt0aGlzLiQoKS5jc3MoImN1cnNvciIsInBvaW50ZXIiKTtyZXR1cm4gc2FwLnVpLmNvcmUuQ29udHJvbC5wcm90b3R5cGUuYXR0YWNoRXZlbnQuYXBwbHkodGhpcyxtKX07c2FwLnVpLmNvcmUuSWNvbi5wcm90b3R5cGUuZGV0YWNoUHJlc3M9ZnVuY3Rpb24oKXt2YXIgbT1BcnJheS5wcm90b3R5cGUuc2xpY2UuYXBwbHkoYXJndW1lbnRzKTttLnNwbGljZSgwLDAsInByZXNzIik7c2FwLnVpLmNvcmUuQ29udHJvbC5wcm90b3R5cGUuZGV0YWNoRXZlbnQuYXBwbHkodGhpcyxtKTtpZighdGhpcy5oYXNMaXN0ZW5lcnMoInByZXNzIikpe3RoaXMuJCgpLmNzcygiY3Vyc29yIiwiZGVmYXVsdCIpfXJldHVybiB0aGlzfTtyZXR1cm4gc2FwLnVpLmNvcmUuSWNvbn0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLkl0ZW0nKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS5JdGVtJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvSXRlbSIsWycuL2xpYnJhcnknLCcuL0VsZW1lbnQnXSxmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0IjtzYXAudWkuY29yZS5FbGVtZW50LmV4dGVuZCgic2FwLnVpLmNvcmUuSXRlbSIse21ldGFkYXRhOntsaWJyYXJ5OiJzYXAudWkuY29yZSIscHJvcGVydGllczp7InRleHQiOnt0eXBlOiJzdHJpbmciLGdyb3VwOiJNaXNjIixkZWZhdWx0VmFsdWU6IiJ9LCJlbmFibGVkIjp7dHlwZToiYm9vbGVhbiIsZ3JvdXA6Ik1pc2MiLGRlZmF1bHRWYWx1ZTp0cnVlfSwidGV4dERpcmVjdGlvbiI6e3R5cGU6InNhcC51aS5jb3JlLlRleHREaXJlY3Rpb24iLGdyb3VwOiJNaXNjIixkZWZhdWx0VmFsdWU6c2FwLnVpLmNvcmUuVGV4dERpcmVjdGlvbi5Jbmhlcml0fSwia2V5Ijp7dHlwZToic3RyaW5nIixncm91cDoiRGF0YSIsZGVmYXVsdFZhbHVlOm51bGx9fX19KTtyZXR1cm4gc2FwLnVpLmNvcmUuSXRlbX0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLkxheW91dERhdGEnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS5MYXlvdXREYXRhJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvTGF5b3V0RGF0YSIsWycuL2xpYnJhcnknLCcuL0VsZW1lbnQnXSxmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0IjtzYXAudWkuY29yZS5FbGVtZW50LmV4dGVuZCgic2FwLnVpLmNvcmUuTGF5b3V0RGF0YSIse21ldGFkYXRhOnsiYWJzdHJhY3QiOnRydWUsbGlicmFyeToic2FwLnVpLmNvcmUifX0pO3NhcC51aS5jb3JlLkxheW91dERhdGEucHJvdG90eXBlLmludmFsaWRhdGU9ZnVuY3Rpb24oKXt2YXIgcD10aGlzLmdldFBhcmVudCgpO2lmKHAmJnAuZ2V0TWV0YWRhdGEoKS5nZXROYW1lKCk9PSJzYXAudWkuY29yZS5WYXJpYW50TGF5b3V0RGF0YSIpe3A9cC5nZXRQYXJlbnQoKX1pZihwKXt2YXIgbD1wLmdldFBhcmVudCgpO2lmKGwpe3ZhciBlPWpRdWVyeS5FdmVudCgiTGF5b3V0RGF0YUNoYW5nZSIpO2Uuc3JjQ29udHJvbD1wO2wuX2hhbmRsZUV2ZW50KGUpfX19O3NhcC51aS5jb3JlLkxheW91dERhdGEucHJvdG90eXBlLnNldExheW91dERhdGE9ZnVuY3Rpb24obCl7cmV0dXJuIHRoaXN9O3JldHVybiBzYXAudWkuY29yZS5MYXlvdXREYXRhfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUuTGlzdEl0ZW0nKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS5MaXN0SXRlbScpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL0xpc3RJdGVtIixbJy4vbGlicmFyeScsJy4vSXRlbSddLGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO3NhcC51aS5jb3JlLkl0ZW0uZXh0ZW5kKCJzYXAudWkuY29yZS5MaXN0SXRlbSIse21ldGFkYXRhOntsaWJyYXJ5OiJzYXAudWkuY29yZSIscHJvcGVydGllczp7Imljb24iOnt0eXBlOiJzdHJpbmciLGdyb3VwOiJBcHBlYXJhbmNlIixkZWZhdWx0VmFsdWU6bnVsbH0sImFkZGl0aW9uYWxUZXh0Ijp7dHlwZToic3RyaW5nIixncm91cDoiRGF0YSIsZGVmYXVsdFZhbHVlOm51bGx9fX19KTtyZXR1cm4gc2FwLnVpLmNvcmUuTGlzdEl0ZW19LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS5Mb2NhbEJ1c3lJbmRpY2F0b3InKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS5Mb2NhbEJ1c3lJbmRpY2F0b3InKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9Mb2NhbEJ1c3lJbmRpY2F0b3IiLFsnLi9saWJyYXJ5JywnLi9Db250cm9sJywnLi90aGVtaW5nL1BhcmFtZXRlcnMnLCcuL0xvY2FsQnVzeUluZGljYXRvclJlbmRlcmVyJ10sZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7c2FwLnVpLmNvcmUuQ29udHJvbC5leHRlbmQoInNhcC51aS5jb3JlLkxvY2FsQnVzeUluZGljYXRvciIse21ldGFkYXRhOntkZXByZWNhdGVkOnRydWUsbGlicmFyeToic2FwLnVpLmNvcmUiLHByb3BlcnRpZXM6eyJ3aWR0aCI6e3R5cGU6InNhcC51aS5jb3JlLkNTU1NpemUiLGdyb3VwOiJNaXNjIixkZWZhdWx0VmFsdWU6JzEwMHB4J30sImhlaWdodCI6e3R5cGU6InNhcC51aS5jb3JlLkNTU1NpemUiLGdyb3VwOiJNaXNjIixkZWZhdWx0VmFsdWU6JzEwMHB4J319fX0pOyhmdW5jdGlvbigpe3NhcC51aS5jb3JlLkxvY2FsQnVzeUluZGljYXRvci5wcm90b3R5cGUuaW5pdD1mdW5jdGlvbigpe3ZhciByPSJzYXAudWkuY29yZS5Mb2NhbEJ1c3lJbmRpY2F0b3I6Ijt2YXIgcD0ic2FwVWlMb2NhbEJ1c3lJbmRpY2F0b3JCb3hTaXplIjtwPXNhcC51aS5jb3JlLnRoZW1pbmcuUGFyYW1ldGVycy5nZXQocitwKTt0aGlzLl9pQm94U2l6ZT04O3A9InNhcFVpTG9jYWxCdXN5SW5kaWNhdG9yQm94Q29sb3IiO3RoaXMuX3NCb3hDb2xvcj1zYXAudWkuY29yZS50aGVtaW5nLlBhcmFtZXRlcnMuZ2V0KHIrcCk7cD0ic2FwVWlMb2NhbEJ1c3lJbmRpY2F0b3JCb3hDb2xvckFjdGl2ZSI7dGhpcy5fc0JveENvbG9yQWN0aXZlPXNhcC51aS5jb3JlLnRoZW1pbmcuUGFyYW1ldGVycy5nZXQocitwKTt0aGlzLl9hbmltYXRlUHJveHk9alF1ZXJ5LnByb3h5KGEsdGhpcyl9O3NhcC51aS5jb3JlLkxvY2FsQnVzeUluZGljYXRvci5wcm90b3R5cGUuZXhpdD1mdW5jdGlvbigpe2pRdWVyeS5zYXAuY2xlYXJEZWxheWVkQ2FsbCh0aGlzLl9kZWxheWVkQ2FsbElkKTtkZWxldGUgdGhpcy5fZGVsYXllZENhbGxJZH07c2FwLnVpLmNvcmUuTG9jYWxCdXN5SW5kaWNhdG9yLnByb3RvdHlwZS5vblRoZW1lQ2hhbmdlZD1mdW5jdGlvbihlKXtpZih0aGlzLmdldERvbVJlZigpKXt0aGlzLmludmFsaWRhdGUoKX19O3NhcC51aS5jb3JlLkxvY2FsQnVzeUluZGljYXRvci5wcm90b3R5cGUub25BZnRlclJlbmRlcmluZz1mdW5jdGlvbigpe3ZhciB3PXBhcnNlSW50KHRoaXMuZ2V0V2lkdGgoKSwxMCk7dmFyIGg9cGFyc2VJbnQodGhpcy5nZXRIZWlnaHQoKSwxMCk7dmFyICQ9dGhpcy4kKCk7JC5jc3MoIndpZHRoIix3KyJweCIpOyQuY3NzKCJoZWlnaHQiLGgrInB4Iik7dmFyIGI9dGhpcy4kKCJhbmltYXRpb24iKTt2YXIgbD1NYXRoLmZsb29yKHcvMik7bC09TWF0aC5mbG9vcigoNSp0aGlzLl9pQm94U2l6ZSkvMik7dmFyIHQ9TWF0aC5mbG9vcihoLzIpLU1hdGguZmxvb3IodGhpcy5faUJveFNpemUvMik7Yi5jc3MoImxlZnQiLGwrInB4Iik7Yi5jc3MoInRvcCIsdCsicHgiKTtpZighdGhpcy5fJGxlZnQpe3RoaXMuXyRsZWZ0PXRoaXMuJCgibGVmdEJveCIpfWlmKCF0aGlzLl8kbWlkZGxlKXt0aGlzLl8kbWlkZGxlPXRoaXMuJCgibWlkZGxlQm94Iil9aWYoIXRoaXMuXyRyaWdodCl7dGhpcy5fJHJpZ2h0PXRoaXMuJCgicmlnaHRCb3giKX10aGlzLl9kZWxheWVkQ2FsbElkPWpRdWVyeS5zYXAuZGVsYXllZENhbGwoMCx0aGlzLHRoaXMuX2FuaW1hdGVQcm94eSl9O3ZhciBhPWZ1bmN0aW9uKCl7aWYodGhpcy5nZXREb21SZWYoKSl7dmFyIHQ9dGhpczt2YXIgJCxiLGM7dmFyIGQ9IiIsZT0iIjtpZih0Ll8kbGVmdCl7JD10Ll8kbGVmdH1lbHNle3JldHVybn1pZih0Ll8kbWlkZGxlKXtiPXQuXyRtaWRkbGV9ZWxzZXtyZXR1cm59aWYodC5fJHJpZ2h0KXtjPXQuXyRyaWdodH1lbHNle3JldHVybn1pZih0Ll9zQm94Q29sb3Ipe2Q9dC5fc0JveENvbG9yfWVsc2V7cmV0dXJufWlmKHQuX3NCb3hDb2xvckFjdGl2ZSl7ZT10Ll9zQm94Q29sb3JBY3RpdmV9ZWxzZXtyZXR1cm59JC5jc3MoImJhY2tncm91bmQtY29sb3IiLGUpO3NldFRpbWVvdXQoZnVuY3Rpb24oKXskLmNzcygiYmFja2dyb3VuZC1jb2xvciIsZCk7Yi5jc3MoImJhY2tncm91bmQtY29sb3IiLGUpO3NldFRpbWVvdXQoZnVuY3Rpb24oKXtiLmNzcygiYmFja2dyb3VuZC1jb2xvciIsZCk7Yy5jc3MoImJhY2tncm91bmQtY29sb3IiLGUpO3NldFRpbWVvdXQoZnVuY3Rpb24oKXtjLmNzcygiYmFja2dyb3VuZC1jb2xvciIsZCl9LDE1MCl9LDE1MCl9LDE1MCk7dGhpcy5fZGVsYXllZENhbGxJZD1qUXVlcnkuc2FwLmRlbGF5ZWRDYWxsKDEyMDAsdGhpcyx0aGlzLl9hbmltYXRlUHJveHkpfX19KCkpO3JldHVybiBzYXAudWkuY29yZS5Mb2NhbEJ1c3lJbmRpY2F0b3J9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS5NZXNzYWdlJykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUuTWVzc2FnZScpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL01lc3NhZ2UiLFsnLi9saWJyYXJ5JywnLi9FbGVtZW50JywnLi90aGVtaW5nL1BhcmFtZXRlcnMnXSxmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0IjtzYXAudWkuY29yZS5FbGVtZW50LmV4dGVuZCgic2FwLnVpLmNvcmUuTWVzc2FnZSIse21ldGFkYXRhOntwdWJsaWNNZXRob2RzOlsiZ2V0RGVmYXVsdEljb24iXSxsaWJyYXJ5OiJzYXAudWkuY29yZSIscHJvcGVydGllczp7InRleHQiOnt0eXBlOiJzdHJpbmciLGdyb3VwOiJNaXNjIixkZWZhdWx0VmFsdWU6bnVsbH0sInRpbWVzdGFtcCI6e3R5cGU6InN0cmluZyIsZ3JvdXA6Ik1pc2MiLGRlZmF1bHRWYWx1ZTpudWxsfSwiaWNvbiI6e3R5cGU6InNhcC51aS5jb3JlLlVSSSIsZ3JvdXA6Ik1pc2MiLGRlZmF1bHRWYWx1ZTpudWxsfSwibGV2ZWwiOnt0eXBlOiJzYXAudWkuY29yZS5NZXNzYWdlVHlwZSIsZ3JvdXA6Ik1pc2MiLGRlZmF1bHRWYWx1ZTpzYXAudWkuY29yZS5NZXNzYWdlVHlwZS5Ob25lfSwicmVhZE9ubHkiOnt0eXBlOiJib29sZWFuIixncm91cDoiTWlzYyIsZGVmYXVsdFZhbHVlOmZhbHNlfX19fSk7c2FwLnVpLmNvcmUuTWVzc2FnZS5wcm90b3R5cGUuZ2V0RGVmYXVsdEljb249ZnVuY3Rpb24ocyl7dmFyIG09alF1ZXJ5LnNhcC5nZXRNb2R1bGVQYXRoKCJzYXAudWkuY29yZSIsJy8nKTt2YXIgdD0idGhlbWVzLyIrc2FwLnVpLmdldENvcmUoKS5nZXRDb25maWd1cmF0aW9uKCkuZ2V0VGhlbWUoKTt2YXIgaT0iL2ltZy9tZXNzYWdlLyI7aWYocyYmcz09IjMyeDMyIil7aSs9IjMyeDMyLyJ9ZWxzZXtpKz0iMTZ4MTYvIn12YXIgdT0iIjtzd2l0Y2godGhpcy5nZXRQcm9wZXJ0eSgibGV2ZWwiKSl7Y2FzZSBzYXAudWkuY29yZS5NZXNzYWdlVHlwZS5FcnJvcjp1PW0rdCtpKyJNZXNzYWdlX0ljb25fRXJyb3IucG5nIjticmVhaztjYXNlIHNhcC51aS5jb3JlLk1lc3NhZ2VUeXBlLkluZm9ybWF0aW9uOnU9bSt0K2krIk1lc3NhZ2VfSWNvbl9JbmZvcm1hdGlvbi5wbmciO2JyZWFrO2Nhc2Ugc2FwLnVpLmNvcmUuTWVzc2FnZVR5cGUuV2FybmluZzp1PW0rdCtpKyJNZXNzYWdlX0ljb25fV2FybmluZy5wbmciO2JyZWFrO2Nhc2Ugc2FwLnVpLmNvcmUuTWVzc2FnZVR5cGUuU3VjY2Vzczp1PW0rdCtpKyJNZXNzYWdlX0ljb25fU3VjY2Vzcy5wbmciO2JyZWFrO2Nhc2Ugc2FwLnVpLmNvcmUuTWVzc2FnZVR5cGUuTm9uZTpkZWZhdWx0OnU9dGhpcy5nZXRQcm9wZXJ0eSgiaWNvbiIpO2JyZWFrfXJldHVybiB1fTtzYXAudWkuY29yZS5NZXNzYWdlLnByb3RvdHlwZS5jb21wYXJlQnlUeXBlPWZ1bmN0aW9uKG8pe3NhcC51aS5jb3JlLk1lc3NhZ2UuY29tcGFyZUJ5VHlwZSh0aGlzLG8pfTtzYXAudWkuY29yZS5NZXNzYWdlLmNvbXBhcmVCeVR5cGU9ZnVuY3Rpb24obSxNKXtpZighbSYmIU0pe3JldHVybiAwfWlmKG0mJiFNKXtyZXR1cm4gMX1pZighbSYmTSl7cmV0dXJuLTF9dmFyIGw9bS5nZXRMZXZlbCgpO3ZhciBMPU0uZ2V0TGV2ZWwoKTt2YXIgdD1zYXAudWkuY29yZS5NZXNzYWdlVHlwZTtpZihsPT09TCl7cmV0dXJuIDB9c3dpdGNoKGwpe2Nhc2UgdC5FcnJvcjpyZXR1cm4gMTtjYXNlIHQuV2FybmluZzpyZXR1cm4gTD09PXQuRXJyb3I/LTE6MTtjYXNlIHQuU3VjY2VzczpyZXR1cm4gTD09PXQuRXJyb3J8fEw9PT10Lldhcm5pbmc/LTE6MTtjYXNlIHQuSW5mb3JtYXRpb246cmV0dXJuIEw9PT10Lk5vbmU/MTotMTtjYXNlIHQuTm9uZTpyZXR1cm4tMTtkZWZhdWx0OmpRdWVyeS5zYXAubG9nLmVycm9yKCJDb21wYXJpc29uIGVycm9yIix0aGlzKTtyZXR1cm4gMH19O3JldHVybiBzYXAudWkuY29yZS5NZXNzYWdlfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUuUG9wdXAnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS5Qb3B1cCcpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL1BvcHVwIixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnc2FwL3VpL2Jhc2UvTWFuYWdlZE9iamVjdCcsJ3NhcC91aS9iYXNlL09iamVjdCcsJy4vQ29udHJvbCcsJy4vSW50ZXJ2YWxUcmlnZ2VyJywnLi9SZW5kZXJNYW5hZ2VyJywnLi9VSUFyZWEnLCcuL1BvcHVwU3VwcG9ydCcsJ2pxdWVyeS5zYXAuc2NyaXB0J10sZnVuY3Rpb24ocSxNLEIsQyxJLFIsVSxQKXsidXNlIHN0cmljdCI7dmFyIGE9TS5leHRlbmQoInNhcC51aS5jb3JlLlBvcHVwIix7Y29uc3RydWN0b3I6ZnVuY3Rpb24oYyxtLHMsQSl7TS5hcHBseSh0aGlzKTtQLmFwcGx5KHRoaXMpO3RoaXMuX3BvcHVwVUlEPXEuc2FwLnVpZCgpO3RoaXMuYk9wZW49ZmFsc2U7dGhpcy5lT3BlblN0YXRlPXNhcC51aS5jb3JlLk9wZW5TdGF0ZS5DTE9TRUQ7dGhpcy5fbUZvY3VzRXZlbnRzPXt9O3RoaXMuX21Gb2N1c0V2ZW50c1sic2FwLnVpLmNvcmUuUG9wdXAuYWRkRm9jdXNhYmxlQ29udGVudC0iK3RoaXMuX3BvcHVwVUlEXT10aGlzLl9hZGRGb2N1c2FibGVBcmVhO3RoaXMuX21Gb2N1c0V2ZW50c1sic2FwLnVpLmNvcmUuUG9wdXAucmVtb3ZlRm9jdXNhYmxlQ29udGVudC0iK3RoaXMuX3BvcHVwVUlEXT10aGlzLl9yZW1vdmVGb2N1c2FibGVBcmVhO3RoaXMuX21Gb2N1c0V2ZW50c1sic2FwLnVpLmNvcmUuUG9wdXAuY2xvc2VQb3B1cC0iK3RoaXMuX3BvcHVwVUlEXT10aGlzLl9jbG9zZVBvcHVwO3RoaXMuX21Gb2N1c0V2ZW50c1sic2FwLnVpLmNvcmUuUG9wdXAub25Gb2N1c0V2ZW50LSIrdGhpcy5fcG9wdXBVSURdPXRoaXMub25Gb2N1c0V2ZW50O3RoaXMuX21Gb2N1c0V2ZW50c1sic2FwLnVpLmNvcmUuUG9wdXAuaW5jcmVhc2VaSW5kZXgtIit0aGlzLl9wb3B1cFVJRF09dGhpcy5faW5jcmVhc2VNeVpJbmRleDtpZihjKXt0aGlzLnNldENvbnRlbnQoYyl9dGhpcy5fb0RlZmF1bHRQb3NpdGlvbj17bXk6YS5Eb2NrLkNlbnRlckNlbnRlcixhdDphLkRvY2suQ2VudGVyQ2VudGVyLG9mOmRvY3VtZW50LG9mZnNldDoiMCAwIixjb2xsaXNpb246ImZsaXAifTt0aGlzLl9vUG9zaXRpb249cS5leHRlbmQoe30sdGhpcy5fb0RlZmF1bHRQb3NpdGlvbik7dGhpcy5fYk1vZGFsPSEhbTt0aGlzLl9vUHJldmlvdXNGb2N1cz1udWxsO3RoaXMuX3NJbml0aWFsRm9jdXNJZD1udWxsO3RoaXMuX2JTaGFkb3c9dHlwZW9mKHMpPT09ImJvb2xlYW4iP3M6dHJ1ZTt0aGlzLl9iQXV0b0Nsb3NlPSEhQTt0aGlzLl9hbmltYXRpb25zPXtvcGVuOm51bGwsY2xvc2U6bnVsbH07dGhpcy5fZHVyYXRpb25zPXtvcGVuOiJmYXN0IixjbG9zZToiZmFzdCJ9O3RoaXMuX2laSW5kZXg9LTE7dGhpcy5fb0JsaW5kTGF5ZXI9bnVsbDtpZih0aGlzLnRvdWNoRW5hYmxlZCl7dGhpcy5fZkF1dG9DbG9zZUhhbmRsZXI9ZnVuY3Rpb24oZSl7aWYoZS5pc01hcmtlZCgiZGVsYXllZE1vdXNlRXZlbnQiKXx8ZS5pc01hcmtlZCgiY2FuY2VsQXV0b0Nsb3NlIikpe3JldHVybn1pZih0aGlzLmVPcGVuU3RhdGU9PT1zYXAudWkuY29yZS5PcGVuU3RhdGUuQ0xPU0lOR3x8dGhpcy5lT3BlblN0YXRlPT09c2FwLnVpLmNvcmUuT3BlblN0YXRlLkNMT1NFRCl7cmV0dXJufXZhciBkPWUudGFyZ2V0LHA9dGhpcy5fJCgpLmdldCgwKSxiPXEuY29udGFpbnMocCxkKTtpZighYil7dmFyIGY9dGhpcy5nZXRDaGlsZFBvcHVwcygpO2Zvcih2YXIgaT0wLGw9Zi5sZW5ndGg7aTxsO2krKyl7dmFyIEQ9cS5zYXAuZG9tQnlJZChmW2ldKTtpZihxLnNhcC5jb250YWluc09yRXF1YWxzKEQsZCkpe2I9dHJ1ZTticmVha319fWlmKCFiKXt0aGlzLmNsb3NlKCl9fX19LG1ldGFkYXRhOntsaWJyYXJ5OiJzYXAudWkuY29yZSIscHVibGljTWV0aG9kczpbIm9wZW4iLCJjbG9zZSIsInNldENvbnRlbnQiLCJnZXRDb250ZW50Iiwic2V0UG9zaXRpb24iLCJzZXRTaGFkb3ciLCJzZXRNb2RhbCIsImdldE1vZGFsIiwic2V0QXV0b0Nsb3NlIiwic2V0QXV0b0Nsb3NlQXJlYXMiLCJpc09wZW4iLCJnZXRBdXRvQ2xvc2UiLCJnZXRPcGVuU3RhdGUiLCJzZXRBbmltYXRpb25zIiwic2V0RHVyYXRpb25zIiwiYXR0YWNoT3BlbmVkIiwiYXR0YWNoQ2xvc2VkIiwiZGV0YWNoT3BlbmVkIiwiZGV0YWNoQ2xvc2VkIl0sYXNzb2NpYXRpb25zOnsiY2hpbGRQb3B1cHMiOnt0eXBlOiJzYXAudWkuY29yZS5Qb3B1cCIsbXVsdGlwbGU6dHJ1ZSx2aXNpYmlsaXR5OiJoaWRkZW4ifX0sZXZlbnRzOnsib3BlbmVkIjp7fSwiY2xvc2VkIjp7fX19fSk7YS5fYWN0aXZhdGVCbGluZExheWVyPXRydWU7YS5ibFN0YWNrPVtdO2EuRG9jaz17QmVnaW5Ub3A6ImJlZ2luIHRvcCIsQmVnaW5DZW50ZXI6ImJlZ2luIGNlbnRlciIsQmVnaW5Cb3R0b206ImJlZ2luIGJvdHRvbSIsTGVmdFRvcDoibGVmdCB0b3AiLExlZnRDZW50ZXI6ImxlZnQgY2VudGVyIixMZWZ0Qm90dG9tOiJsZWZ0IGJvdHRvbSIsQ2VudGVyVG9wOiJjZW50ZXIgdG9wIixDZW50ZXJDZW50ZXI6ImNlbnRlciBjZW50ZXIiLENlbnRlckJvdHRvbToiY2VudGVyIGJvdHRvbSIsUmlnaHRUb3A6InJpZ2h0IHRvcCIsUmlnaHRDZW50ZXI6InJpZ2h0IGNlbnRlciIsUmlnaHRCb3R0b206InJpZ2h0IGJvdHRvbSIsRW5kVG9wOiJlbmQgdG9wIixFbmRDZW50ZXI6ImVuZCBjZW50ZXIiLEVuZEJvdHRvbToiZW5kIGJvdHRvbSJ9O2EucHJvdG90eXBlLnRvdWNoRW5hYmxlZD1zYXAudWkuRGV2aWNlLnN1cHBvcnQudG91Y2h8fHEuc2FwLnNpbXVsYXRlTW9iaWxlT25EZXNrdG9wO2EucHJvdG90eXBlLnJlc3RvcmVGb2N1cz0hc2FwLnVpLkRldmljZS5zdXBwb3J0LnRvdWNoJiYhcS5zYXAuc2ltdWxhdGVNb2JpbGVPbkRlc2t0b3A7Qi5leHRlbmQoInNhcC51aS5jb3JlLlBvcHVwLkxheWVyIix7Y29uc3RydWN0b3I6ZnVuY3Rpb24oKXt2YXIgZD10aGlzLmdldERvbVN0cmluZygpO3RoaXMuXyRSZWY9cShkKS5hcHBlbmRUbyhzYXAudWkuZ2V0Q29yZSgpLmdldFN0YXRpY0FyZWFSZWYoKSl9fSk7YS5MYXllci5wcm90b3R5cGUuaW5pdD1mdW5jdGlvbihvLHope3RoaXMuXyRSZWYuY3NzKHsidmlzaWJpbGl0eSI6InZpc2libGUiLCJ6LWluZGV4Ijp6fSk7dGhpcy51cGRhdGUobyx6KTt0aGlzLl8kUmVmLmluc2VydEFmdGVyKG8pLnNob3coKX07YS5MYXllci5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKG8seil7dmFyIGI9by5yZWN0KCk7dGhpcy5fJFJlZi5jc3MoeyJsZWZ0IjpiLmxlZnQsInRvcCI6Yi50b3B9KTtpZihvLmNzcygicmlnaHQiKSE9ImF1dG8iJiZvLmNzcygicmlnaHQiKSE9ImluaGVyaXQiKXt0aGlzLl8kUmVmLmNzcyh7InJpZ2h0IjpvLmNzcygicmlnaHQiKSwid2lkdGgiOiJhdXRvIn0pfWVsc2V7dGhpcy5fJFJlZi5jc3MoeyJ3aWR0aCI6Yi53aWR0aCwicmlnaHQiOiJhdXRvIn0pfWlmKG8uY3NzKCJib3R0b20iKSE9ImF1dG8iJiZvLmNzcygiYm90dG9tIikhPSJpbmhlcml0Iil7dGhpcy5fJFJlZi5jc3MoeyJib3R0b20iOm8uY3NzKCJib3R0b20iKSwiaGVpZ2h0IjoiYXV0byJ9KX1lbHNle3RoaXMuXyRSZWYuY3NzKHsiaGVpZ2h0IjpiLmhlaWdodCwiYm90dG9tIjoiYXV0byJ9KX1pZih0eXBlb2Yoeik9PT0ibnVtYmVyIil7dGhpcy5fJFJlZi5jc3MoInotaW5kZXgiLHopfX07YS5MYXllci5wcm90b3R5cGUucmVzZXQ9ZnVuY3Rpb24oKXt0aGlzLl8kUmVmLmhpZGUoKS5jc3MoInZpc2liaWxpdHkiLCJoaWRkZW4iKS5hcHBlbmRUbyhzYXAudWkuZ2V0Q29yZSgpLmdldFN0YXRpY0FyZWFSZWYoKSl9O2EuTGF5ZXIucHJvdG90eXBlLmdldERvbVN0cmluZz1mdW5jdGlvbigpe3Euc2FwLmxvZy5lcnJvcigic2FwLnVpLmNvcmUuUG9wdXAuTGF5ZXI6IGdldERvbVN0cmluZyBmdW5jdGlvbiBtdXN0IGJlIG92ZXJ3cml0dGVuISIpO3JldHVybiIifTthLkxheWVyLmV4dGVuZCgic2FwLnVpLmNvcmUuUG9wdXAuQmxpbmRMYXllciIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKCl7YS5MYXllci5hcHBseSh0aGlzKX19KTthLkJsaW5kTGF5ZXIucHJvdG90eXBlLmdldERvbVN0cmluZz1mdW5jdGlvbigpe3JldHVybiI8ZGl2IGNsYXNzPVwic2FwVWlCbGlMeVwiIGlkPVwic2FwLXVpLWJsaW5kbGF5ZXItIitxLnNhcC51aWQoKSsiXCI+PGlmcmFtZSBzY3JvbGxpbmc9XCJub1wiIHNyYz1cImphdmFzY3JpcHQ6JydcIgl0YWJJbmRleD1cIi0xXCI+PC9pZnJhbWU+PC9kaXY+In07YS5wcm90b3R5cGUub0JsaW5kTGF5ZXJQb29sPW5ldyBzYXAudWkuYmFzZS5PYmplY3RQb29sKGEuQmxpbmRMYXllcik7YS5MYXllci5leHRlbmQoInNhcC51aS5jb3JlLlBvcHVwLlNoaWVsZExheWVyIix7Y29uc3RydWN0b3I6ZnVuY3Rpb24oKXthLkxheWVyLmFwcGx5KHRoaXMpfX0pO2EuU2hpZWxkTGF5ZXIucHJvdG90eXBlLmdldERvbVN0cmluZz1mdW5jdGlvbigpe3JldHVybiI8ZGl2IGNsYXNzPVwic2FwVWlQb3B1cFNoaWVsZFwiIGlkPVwic2FwLXVpLXNoaWVsZGxheWVyLSIrcS5zYXAudWlkKCkrIlwiPjwvZGl2PiJ9O2EucHJvdG90eXBlLm9TaGllbGRMYXllclBvb2w9bmV3IHNhcC51aS5iYXNlLk9iamVjdFBvb2woYS5TaGllbGRMYXllcik7KGZ1bmN0aW9uKCl7dmFyIGw9MDthLmdldExhc3RaSW5kZXg9ZnVuY3Rpb24oKXtyZXR1cm4gbH07YS5wcm90b3R5cGUuZ2V0TGFzdFpJbmRleD1mdW5jdGlvbigpe3JldHVybiBhLmdldExhc3RaSW5kZXgoKX07YS5nZXROZXh0WkluZGV4PWZ1bmN0aW9uKCl7cmV0dXJuKGwrPTEwKX07YS5wcm90b3R5cGUuZ2V0TmV4dFpJbmRleD1mdW5jdGlvbigpe3JldHVybiBhLmdldE5leHRaSW5kZXgoKX19KCkpO2EucHJvdG90eXBlLm9wZW49ZnVuY3Rpb24oZCxtLGIsbyxjLGYsZyl7aWYodGhpcy5lT3BlblN0YXRlIT1zYXAudWkuY29yZS5PcGVuU3RhdGUuQ0xPU0VEKXtyZXR1cm59dGhpcy5lT3BlblN0YXRlPXNhcC51aS5jb3JlLk9wZW5TdGF0ZS5PUEVOSU5HO3ZhciBzO3RyeXtzPXNhcC51aS5nZXRDb3JlKCkuZ2V0U3RhdGljQXJlYVJlZigpO3M9c2FwLnVpLmdldENvcmUoKS5nZXRVSUFyZWEocyl9Y2F0Y2goZSl7cS5zYXAubG9nLmVycm9yKGUpO3Rocm93IG5ldyBFcnJvcigiUG9wdXAgY2Fubm90IGJlIG9wZW5lZCBiZWNhdXNlIHN0YXRpYyBVSUFyZWEgY2Fubm90IGJlIGRldGVybWluZWQuIil9dGhpcy5fYkNvbnRlbnRBZGRlZFRvU3RhdGljPWZhbHNlO2lmKHRoaXMub0NvbnRlbnQgaW5zdGFuY2VvZiBDJiYhdGhpcy5vQ29udGVudC5nZXRQYXJlbnQoKSl7cy5hZGRDb250ZW50KHRoaXMub0NvbnRlbnQsdHJ1ZSk7dGhpcy5fYkNvbnRlbnRBZGRlZFRvU3RhdGljPXRydWV9aWYodGhpcy5vQ29udGVudC5nZXRVSUFyZWEpe3ZhciBBPXRoaXMub0NvbnRlbnQuZ2V0VUlBcmVhKCk7aWYoQT09PW51bGwpe3Euc2FwLmxvZy53YXJuaW5nKCJUaGUgUG9wdXAgY29udGVudCBpcyBOT1QgY29ubmVjdGVkIHdpdGggYW4gVUlBcmVhIGFuZCBtYXkgbm90IHdvcmsgcHJvcGVybHkhIil9ZWxzZSBpZihhLl9iRW5hYmxlVUlBcmVhQ2hlY2smJkEuZ2V0Um9vdE5vZGUoKS5pZCE9PXMuZ2V0Um9vdE5vZGUoKS5pZCl7cS5zYXAubG9nLndhcm5pbmcoIlRoZSBQb3B1cCBjb250ZW50IGlzIE5PVCBjb25uZWN0ZWQgd2l0aCB0aGUgc3RhdGljLVVJQXJlYSBhbmQgbWF5IG5vdCB3b3JrIHByb3Blcmx5ISIpfX1pZih0eXBlb2YoZCk9PSJzdHJpbmciKXtnPWY7Zj1jO2M9bztvPWI7Yj1tO209ZDtkPS0xfWlmKGQ9PT11bmRlZmluZWQpe2Q9LTF9aWYodGhpcy5yZXN0b3JlRm9jdXMpe3RoaXMuX29QcmV2aW91c0ZvY3VzPWEuZ2V0Q3VycmVudEZvY3VzSW5mbygpfXZhciAkPXRoaXMuXyQodHJ1ZSk7dmFyIGk9ImZhc3QiO2lmKChkPT09MCl8fChkPjApKXtpPWR9ZWxzZSBpZigodGhpcy5fZHVyYXRpb25zLm9wZW49PT0wKXx8KHRoaXMuX2R1cmF0aW9ucy5vcGVuPjApKXtpPXRoaXMuX2R1cmF0aW9ucy5vcGVufXZhciBfO2lmKG18fGJ8fG98fGN8fGYpe189dGhpcy5fY3JlYXRlUG9zaXRpb24obSxiLG8sYyxmKX1lbHNle189dGhpcy5fb1Bvc2l0aW9ufWlmKCFfLm9mKXtfLm9mPXRoaXMuX29Qb3NpdGlvbi5vZnx8ZG9jdW1lbnR9dGhpcy5faVpJbmRleD10aGlzLl9pWkluZGV4PT09dGhpcy5nZXRMYXN0WkluZGV4KCk/dGhpcy5faVpJbmRleDp0aGlzLmdldE5leHRaSW5kZXgoKTt2YXIgUz1zYXAudWkuZ2V0Q29yZSgpLmdldFN0YXRpY0FyZWFSZWYoKTskLmNzcyh7InBvc2l0aW9uIjoiYWJzb2x1dGUiLCJ2aXNpYmlsaXR5IjoiaGlkZGVuIn0pO2lmKCEoJFswXS5wYXJlbnROb2RlPT1TKSl7JC5hcHBlbmRUbyhTKX0kLmNzcygiei1pbmRleCIsdGhpcy5faVpJbmRleCk7cS5zYXAubG9nLmRlYnVnKCJwb3NpdGlvbiBwb3B1cCBjb250ZW50ICIrJC5hdHRyKCJpZCIpKyIgYXQgIisod2luZG93LkpTT04/SlNPTi5zdHJpbmdpZnkoXy5hdCk6U3RyaW5nKF8uYXQpKSk7dGhpcy5fYXBwbHlQb3NpdGlvbihfKTtpZihnIT09dW5kZWZpbmVkKXt0aGlzLnNldEZvbGxvd09mKGcpfXZhciB0PXRoaXM7aWYoc2FwLnVpLkRldmljZS5vcy5pb3MmJnNhcC51aS5EZXZpY2Uuc3VwcG9ydC50b3VjaCl7aWYodGhpcy5fb1RvcFNoaWVsZExheWVyKXtxLnNhcC5jbGVhckRlbGF5ZWRDYWxsKHRoaXMuX2lUb3BTaGllbGRSZW1vdmVUaW1lcik7dGhpcy5faVRvcFNoaWVsZFJlbW92ZVRpbWVyPW51bGx9ZWxzZXt0aGlzLl9vVG9wU2hpZWxkTGF5ZXI9dGhpcy5vU2hpZWxkTGF5ZXJQb29sLmJvcnJvd09iamVjdCgkLHRoaXMuX2laSW5kZXgrMSl9dGhpcy5faVRvcFNoaWVsZFJlbW92ZVRpbWVyPXEuc2FwLmRlbGF5ZWRDYWxsKDUwMCx0aGlzLGZ1bmN0aW9uKCl7dGhpcy5vU2hpZWxkTGF5ZXJQb29sLnJldHVybk9iamVjdCh0aGlzLl9vVG9wU2hpZWxkTGF5ZXIpO3RoaXMuX29Ub3BTaGllbGRMYXllcj1udWxsO3RoaXMuX2lUb3BTaGllbGRSZW1vdmVUaW1lcj1udWxsfSl9dmFyIE89ZnVuY3Rpb24oKXskLmNzcygiZGlzcGxheSIsImJsb2NrIik7aWYodC5fYk1vZGFsfHx0Ll9iQXV0b0Nsb3NlfHx0Ll9zSW5pdGlhbEZvY3VzSWQpe3ZhciBrPW51bGw7aWYodC5fc0luaXRpYWxGb2N1c0lkKXt2YXIgbD1zYXAudWkuZ2V0Q29yZSgpLmJ5SWQodC5fc0luaXRpYWxGb2N1c0lkKTtpZihsKXtrPWwuZ2V0Rm9jdXNEb21SZWYoKX1rPWt8fHEuc2FwLmRvbUJ5SWQodC5fc0luaXRpYWxGb2N1c0lkKX1xLnNhcC5mb2N1cyhrfHwkLmZpcnN0Rm9jdXNhYmxlRG9tUmVmKCkpfXQuZU9wZW5TdGF0ZT1zYXAudWkuY29yZS5PcGVuU3RhdGUuT1BFTjtpZih0LmdldEZvbGxvd09mKCkpe2EuRG9ja1RyaWdnZXIuYWRkTGlzdGVuZXIoYS5jaGVja0RvY2tpbmcsdCl9dC5fdXBkYXRlQmxpbmRMYXllcigpO2lmKCEhc2FwLnVpLkRldmljZS5icm93c2VyLmludGVybmV0X2V4cGxvcmVyJiZzYXAudWkuRGV2aWNlLmJyb3dzZXIudmVyc2lvbj09OSl7cS5zYXAuZGVsYXllZENhbGwoMCx0LGZ1bmN0aW9uKCl7dC5maXJlT3BlbmVkKCl9KX1lbHNle3QuZmlyZU9wZW5lZCgpfX07JC50b2dnbGVDbGFzcygic2FwVWlTaGQiLHRoaXMuX2JTaGFkb3cpLmhpZGUoKS5jc3MoInZpc2liaWxpdHkiLCJ2aXNpYmxlIik7aWYoaT09MCl7dGhpcy5iT3Blbj10cnVlO08uYXBwbHkoKX1lbHNle2lmKHRoaXMuX2FuaW1hdGlvbnMub3Blbil7dGhpcy5fYW5pbWF0aW9ucy5vcGVuLmNhbGwobnVsbCwkLGksTyl9ZWxzZXskLmZhZGVJbihpLE8pfX1pZighIXNhcC51aS5EZXZpY2UuYnJvd3Nlci5pbnRlcm5ldF9leHBsb3JlciYmYS5fYWN0aXZhdGVCbGluZExheWVyKXt0aGlzLl9vQmxpbmRMYXllcj10aGlzLm9CbGluZExheWVyUG9vbC5ib3Jyb3dPYmplY3QoJCx0aGlzLl9pWkluZGV4LTEpfWlmKHRoaXMuX2JNb2RhbCl7dGhpcy5fc2hvd0Jsb2NrTGF5ZXIoKX1pZih0aGlzLm9Db250ZW50IGluc3RhbmNlb2Ygc2FwLnVpLmNvcmUuRWxlbWVudCl7dGhpcy5vQ29udGVudC5hZGREZWxlZ2F0ZSh0aGlzKX10aGlzLmJPcGVuPXRydWU7aWYodGhpcy5pc0luUG9wdXAobyl8fHRoaXMuaXNJblBvcHVwKHRoaXMuX29Qb3NpdGlvbi5vZikpe3ZhciBwPXRoaXMuZ2V0UGFyZW50UG9wdXBJZChvKXx8dGhpcy5nZXRQYXJlbnRQb3B1cElkKHRoaXMuX29Qb3NpdGlvbi5vZik7dmFyIGg9IiI7dmFyIGo9dGhpcy5nZXRDb250ZW50KCk7aWYoaiBpbnN0YW5jZW9mIHNhcC51aS5jb3JlLkVsZW1lbnQpe2g9ai5nZXRJZCgpfWVsc2UgaWYodHlwZW9mIGo9PT0ib2JqZWN0Iil7aD1qLmlkfXRoaXMuYWRkQ2hpbGRUb1BvcHVwKHAsaCk7dGhpcy5hZGRDaGlsZFRvUG9wdXAocCx0aGlzLl9wb3B1cFVJRCl9aWYodGhpcy5fYk1vZGFsfHx0aGlzLl9iQXV0b0Nsb3NlKXt0aGlzLl9hZGRGb2N1c0V2ZW50TGlzdGVuZXJzKCl9aWYodGhpcy50b3VjaEVuYWJsZWQmJiF0aGlzLl9iTW9kYWwmJnRoaXMuX2JBdXRvQ2xvc2Upe3EoZG9jdW1lbnQpLm9uKCJ0b3VjaHN0YXJ0IG1vdXNlZG93biIscS5wcm94eSh0aGlzLl9mQXV0b0Nsb3NlSGFuZGxlcix0aGlzKSl9aWYodGhpcy5fb0JsaW5kTGF5ZXIpe3RoaXMuX3Jlc2l6ZUxpc3RlbmVySWQ9c2FwLnVpLmNvcmUuUmVzaXplSGFuZGxlci5yZWdpc3Rlcih0aGlzLl8kKCkuZ2V0KDApLHEucHJveHkodGhpcy5vbnJlc2l6ZSx0aGlzKSl9fTthLnByb3RvdHlwZS5vbkZvY3VzRXZlbnQ9ZnVuY3Rpb24oYil7dmFyIGU9cS5ldmVudC5maXgoYik7aWYoYXJndW1lbnRzLmxlbmd0aD4xJiZhcmd1bWVudHNbMV09PT0ic2FwLnVpLmNvcmUuUG9wdXAub25Gb2N1c0V2ZW50LSIrdGhpcy5fcG9wdXBVSUQpe2U9cS5ldmVudC5maXgoYXJndW1lbnRzWzJdKX12YXIgdD0oZS50eXBlPT0iZm9jdXMifHxlLnR5cGU9PSJhY3RpdmF0ZSIpPyJmb2N1cyI6ImJsdXIiO3ZhciBjPWZhbHNlO2lmKHQ9PSJmb2N1cyIpe3ZhciBkPXRoaXMuXyQoKS5nZXQoMCk7aWYoZCl7Yz1kPT1lLnRhcmdldHx8cS5jb250YWlucyhkLGUudGFyZ2V0KTt2YXIgZj10aGlzLmdldENoaWxkUG9wdXBzKCk7aWYoIWMpe2Zvcih2YXIgaT0wLGw9Zi5sZW5ndGg7aTxsO2krKyl7dmFyIG89cS5zYXAuZG9tQnlJZChmW2ldKTtpZihvKXtjPW89PWUudGFyZ2V0fHxxLmNvbnRhaW5zKG8sZS50YXJnZXQpO2lmKGMpe2JyZWFrfX19fXEuc2FwLmxvZy5kZWJ1ZygiZm9jdXMgZXZlbnQgb24gIitlLnRhcmdldC5pZCsiLCBjb250YWluczogIitjKTtpZih0aGlzLl9iTW9kYWwmJiFjKXt2YXIgVD0oYS5nZXRMYXN0WkluZGV4KCk9PXRoaXMuX2laSW5kZXgpO2lmKFQpe2lmKCFzYXAudWkuRGV2aWNlLnN1cHBvcnQudG91Y2h8fHEoZS50YXJnZXQpLmlzKCI6aW5wdXQiKSl7dmFyIEQ9dGhpcy5vTGFzdEJsdXJyZWRFbGVtZW50P3RoaXMub0xhc3RCbHVycmVkRWxlbWVudDpkO3Euc2FwLmZvY3VzKEQpfX19ZWxzZSBpZih0aGlzLl9iQXV0b0Nsb3NlJiZjJiZ0aGlzLl9zVGltZW91dElkKXtpZih0aGlzLl9zVGltZW91dElkKXtxLnNhcC5jbGVhckRlbGF5ZWRDYWxsKHRoaXMuX3NUaW1lb3V0SWQpO3RoaXMuX3NUaW1lb3V0SWQ9bnVsbH19fX1lbHNlIGlmKHQ9PSJibHVyIil7cS5zYXAubG9nLmRlYnVnKCJibHVyIGV2ZW50IG9uICIrZS50YXJnZXQuaWQpO2lmKHRoaXMuX2JNb2RhbCl7dGhpcy5vTGFzdEJsdXJyZWRFbGVtZW50PWUudGFyZ2V0fWVsc2UgaWYodGhpcy5fYkF1dG9DbG9zZSl7aWYoIXRoaXMudG91Y2hFbmFibGVkJiYhdGhpcy5fc1RpbWVvdXRJZCl7dGhpcy5fc1RpbWVvdXRJZD1xLnNhcC5kZWxheWVkQ2FsbCgwLHRoaXMsImNsb3NlIil9fX19O2EucHJvdG90eXBlLnNldEluaXRpYWxGb2N1c0lkPWZ1bmN0aW9uKGkpe3RoaXMuX3NJbml0aWFsRm9jdXNJZD1pfTthLnByb3RvdHlwZS5jbG9zZT1mdW5jdGlvbihkKXtpZih0aGlzLmVPcGVuU3RhdGU9PXNhcC51aS5jb3JlLk9wZW5TdGF0ZS5DTE9TRUR8fHRoaXMuZU9wZW5TdGF0ZT09c2FwLnVpLmNvcmUuT3BlblN0YXRlLkNMT1NJTkcpe3JldHVybn12YXIgaT0iZmFzdCI7aWYoKGQ9PT0wKXx8KGQ+MCkpe2k9ZH1lbHNlIGlmKCh0aGlzLl9kdXJhdGlvbnMuY2xvc2U9PT0wKXx8KHRoaXMuX2R1cmF0aW9ucy5jbG9zZT4wKSl7aT10aGlzLl9kdXJhdGlvbnMuY2xvc2V9aWYoaT09PTAmJnRoaXMuZU9wZW5TdGF0ZT09c2FwLnVpLmNvcmUuT3BlblN0YXRlLk9QRU5JTkcpe3JldHVybn10aGlzLmVPcGVuU3RhdGU9c2FwLnVpLmNvcmUuT3BlblN0YXRlLkNMT1NJTkc7aWYodGhpcy5nZXRGb2xsb3dPZigpKXthLkRvY2tUcmlnZ2VyLnJlbW92ZUxpc3RlbmVyKGEuY2hlY2tEb2NraW5nLHRoaXMpfWlmKHRoaXMub0NvbnRlbnQmJnRoaXMuX2JDb250ZW50QWRkZWRUb1N0YXRpYyl7c2FwLnVpLmdldENvcmUoKS5nZXRFdmVudEJ1cygpLnB1Ymxpc2goInNhcC51aSIsIl9fYmVmb3JlUG9wdXBDbG9zZSIse2RvbU5vZGU6dGhpcy5fJCgpLmdldCgwKX0pO3ZhciBzPXNhcC51aS5nZXRDb3JlKCkuZ2V0U3RhdGljQXJlYVJlZigpO3M9c2FwLnVpLmdldENvcmUoKS5nZXRVSUFyZWEocyk7cy5yZW1vdmVDb250ZW50KHMuaW5kZXhPZkNvbnRlbnQodGhpcy5vQ29udGVudCksdHJ1ZSl9dGhpcy5fYkNvbnRlbnRBZGRlZFRvU3RhdGljPWZhbHNlO3RoaXMuX3NUaW1lb3V0SWQ9bnVsbDtpZih0aGlzLmZFdmVudEhhbmRsZXIpe3RoaXMuX3JlbW92ZUZvY3VzRXZlbnRMaXN0ZW5lcnMoKX1pZih0aGlzLnRvdWNoRW5hYmxlZCl7aWYoIXRoaXMuX2JNb2RhbCYmdGhpcy5fYkF1dG9DbG9zZSl7cShkb2N1bWVudCkub2ZmKCJ0b3VjaHN0YXJ0IG1vdXNlZG93biIsdGhpcy5fZkF1dG9DbG9zZUhhbmRsZXIpfX1pZih0aGlzLm9Db250ZW50IGluc3RhbmNlb2Ygc2FwLnVpLmNvcmUuRWxlbWVudCl7dGhpcy5vQ29udGVudC5yZW1vdmVEZWxlZ2F0ZSh0aGlzKX12YXIgJD10aGlzLl8kKCk7aWYodGhpcy5fYkV2ZW50QnVzRXZlbnRzUmVnaXN0ZXJlZCl7dGhpcy5fdW5yZWdpc3RlckV2ZW50QnVzRXZlbnRzKCl9aWYodGhpcy5fb0JsaW5kTGF5ZXIpe3RoaXMub0JsaW5kTGF5ZXJQb29sLnJldHVybk9iamVjdCh0aGlzLl9vQmxpbmRMYXllcil9dGhpcy5fb0JsaW5kTGF5ZXI9bnVsbDt2YXIgdD10aGlzO2lmKHNhcC51aS5EZXZpY2Uub3MuaW9zJiZzYXAudWkuRGV2aWNlLnN1cHBvcnQudG91Y2gpe2lmKHRoaXMuX29Cb3R0b21TaGllbGRMYXllcil7cS5zYXAuY2xlYXJEZWxheWVkQ2FsbCh0aGlzLl9pQm90dG9tU2hpZWxkUmVtb3ZlVGltZXIpO3RoaXMuX2lCb3R0b21TaGllbGRSZW1vdmVUaW1lcj1udWxsfWVsc2V7dGhpcy5fb0JvdHRvbVNoaWVsZExheWVyPXRoaXMub1NoaWVsZExheWVyUG9vbC5ib3Jyb3dPYmplY3QoJCx0aGlzLl9pWkluZGV4LTMpfXRoaXMuX2lCb3R0b21TaGllbGRSZW1vdmVUaW1lcj1xLnNhcC5kZWxheWVkQ2FsbCg1MDAsdGhpcyxmdW5jdGlvbigpe3RoaXMub1NoaWVsZExheWVyUG9vbC5yZXR1cm5PYmplY3QodGhpcy5fb0JvdHRvbVNoaWVsZExheWVyKTt0aGlzLl9vQm90dG9tU2hpZWxkTGF5ZXI9bnVsbDt0aGlzLl9pQm90dG9tU2hpZWxkUmVtb3ZlVGltZXI9bnVsbH0pfXZhciBjPWZ1bmN0aW9uKCl7cSgkKS5oaWRlKCkuY3NzKHsidmlzaWJpbGl0eSI6ImhpZGRlbiIsImxlZnQiOiIwcHgiLCJ0b3AiOiIwcHgiLCJyaWdodCI6IiJ9KTtpZih0LnJlc3RvcmVGb2N1cyl7aWYodC5fYk1vZGFsKXthLmFwcGx5Rm9jdXNJbmZvKHQuX29QcmV2aW91c0ZvY3VzKTt0Ll9vUHJldmlvdXNGb2N1cz1udWxsO3Qub0xhc3RCbHVycmVkRWxlbWVudD1udWxsfX10LmJPcGVuPWZhbHNlO3QuZU9wZW5TdGF0ZT1zYXAudWkuY29yZS5PcGVuU3RhdGUuQ0xPU0VEO3QuZmlyZUNsb3NlZCgpO3ZhciBiPXQuZ2V0Q2hpbGRQb3B1cHMoKTtmb3IodmFyIGo9MCxsPWIubGVuZ3RoO2o8bDtqKyspe3QuY2xvc2VQb3B1cChiW2pdKX19O2lmKGk9PTApe2MuYXBwbHkoKX1lbHNle2lmKHRoaXMuX2FuaW1hdGlvbnMuY2xvc2Upe3RoaXMuX2FuaW1hdGlvbnMuY2xvc2UuY2FsbChudWxsLCQsaSxjKX1lbHNleyQuZmFkZU91dChpLGMpfX1pZih0aGlzLl9iTW9kYWwpe3RoaXMuX2hpZGVCbG9ja0xheWVyKCl9aWYodGhpcy5fcmVzaXplTGlzdGVuZXJJZCl7c2FwLnVpLmNvcmUuUmVzaXplSGFuZGxlci5kZXJlZ2lzdGVyKHRoaXMuX3Jlc2l6ZUxpc3RlbmVySWQpO3RoaXMuX3Jlc2l6ZUxpc3RlbmVySWQ9bnVsbH19O2EuZ2V0Q3VycmVudEZvY3VzSW5mbz1mdW5jdGlvbigpe3ZhciBfPW51bGw7dmFyIGY9c2FwLnVpLmdldENvcmUoKS5nZXRDdXJyZW50Rm9jdXNlZENvbnRyb2xJZCgpO2lmKGYpe3ZhciBGPXNhcC51aS5nZXRDb3JlKCkuZ2V0Q29udHJvbChmKTtfPXsnc0ZvY3VzSWQnOmYsJ29Gb2N1c0luZm8nOkY/Ri5nZXRGb2N1c0luZm8oKTp7fX19ZWxzZXt0cnl7dmFyIGU9ZG9jdW1lbnQuYWN0aXZlRWxlbWVudDtpZihlKXtfPXsnc0ZvY3VzSWQnOmUuaWQsJ29Gb2N1c2VkRWxlbWVudCc6ZSwnb0ZvY3VzSW5mbyc6e319fX1jYXRjaChiKXtfPW51bGx9fXJldHVybiBffTthLmFwcGx5Rm9jdXNJbmZvPWZ1bmN0aW9uKHApe2lmKHApe3ZhciBmPXNhcC51aS5nZXRDb3JlKCkuZ2V0Q29udHJvbChwLnNGb2N1c0lkKTtpZihmKXtmLmFwcGx5Rm9jdXNJbmZvKHAub0ZvY3VzSW5mbyl9ZWxzZXt2YXIgZT1xLnNhcC5kb21CeUlkKHAuc0ZvY3VzSWQpfHxwLm9Gb2N1c2VkRWxlbWVudDtxLnNhcC5mb2N1cyhlKX19fTthLnByb3RvdHlwZS5zZXRDb250ZW50PWZ1bmN0aW9uKGMpe3RoaXMub0NvbnRlbnQ9YztyZXR1cm4gdGhpc307YS5wcm90b3R5cGUuZ2V0Q29udGVudD1mdW5jdGlvbigpe3JldHVybiB0aGlzLm9Db250ZW50fTthLnByb3RvdHlwZS5zZXRQb3NpdGlvbj1mdW5jdGlvbihtLGIsbyxjLGQpe3RoaXMuX29Qb3NpdGlvbj10aGlzLl9jcmVhdGVQb3NpdGlvbihtLGIsbyxjLGQpO2lmKHRoaXMuZU9wZW5TdGF0ZSE9c2FwLnVpLmNvcmUuT3BlblN0YXRlLkNMT1NFRCl7dGhpcy5fYXBwbHlQb3NpdGlvbih0aGlzLl9vUG9zaXRpb24pO3RoaXMuX29CbGluZExheWVyJiZ0aGlzLl9vQmxpbmRMYXllci51cGRhdGUodGhpcy5fJCgpKX1yZXR1cm4gdGhpc307YS5wcm90b3R5cGUuX2NyZWF0ZVBvc2l0aW9uPWZ1bmN0aW9uKG0sYixvLGMsZCl7dmFyIG49ZmFsc2U7aWYobSYmKG0uaW5kZXhPZigiKyIpPj0wfHxtLmluZGV4T2YoIi0iKT49MCkpe249dHJ1ZTtpZihjJiZjIT0iMCAwIil7cS5zYXAubG9nLndhcm5pbmcoIm9mZnNldCB1c2VkIGluIG15IGFuZCBpbiBvZmZzZXQsIHRoZSBvZmZzZXQgdmFsdWUgd2lsbCBiZSBpZ25vcmVkIiwic2FwLnVpLmNvcmUuUG9wdXAiLCJzZXRQb3NpdGlvbiIpfWM9bnVsbH12YXIgcD1xLmV4dGVuZCh7fSx0aGlzLl9vRGVmYXVsdFBvc2l0aW9uLHsibXkiOm18fHRoaXMuX29EZWZhdWx0UG9zaXRpb24ubXksImF0IjpifHx0aGlzLl9vRGVmYXVsdFBvc2l0aW9uLmF0LCJvZiI6bywib2Zmc2V0IjpjLCJjb2xsaXNpb24iOmR9KTtpZighcS51aS52ZXJzaW9uKXtpZihhLl9iTmV3T2Zmc2V0PT1udWxsKXthLl9iTmV3T2Zmc2V0PXRydWU7aWYoIShzYXAudWkuRGV2aWNlLmJyb3dzZXIuaW50ZXJuZXRfZXhwbG9yZXImJnNhcC51aS5EZXZpY2UuYnJvd3Nlci52ZXJzaW9uPT04JiZxLnNhcC5WZXJzaW9uKHEoKS5qcXVlcnkpLmNvbXBhcmVUbygiMS44LjEiKTwwKSl7dmFyIEQ9cShkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKSk7RC5wb3NpdGlvbih7b2Y6d2luZG93LHVzaW5nOmZ1bmN0aW9uKGYsZyl7YS5fYk5ld09mZnNldD0oZyE9PXVuZGVmaW5lZCl9fSl9fX1pZihhLl9iTmV3T2Zmc2V0fHxxLnNhcC5WZXJzaW9uKHEudWkudmVyc2lvbikuY29tcGFyZVRvKCIxLjguMjMiKT4wKXtpZihjJiZjIT0iMCAwIil7dmFyIGU9cC5teS5zcGxpdCgiICIpO3ZhciBPPWMuc3BsaXQoIiAiKTt2YXIgcz1bcGFyc2VJbnQoT1swXSk8MD8iIjoiKyIscGFyc2VJbnQoT1sxXSk8MD8iIjoiKyJdO3AubXk9ZVswXStzWzBdK09bMF0rIiAiK2VbMV0rc1sxXStPWzFdO3Aub2Zmc2V0PW51bGx9fWVsc2UgaWYobil7dmFyIGU9cC5teS5zcGxpdCgiICIpO3ZhciBPPVsiIiwiIl07dmFyIGk9ZVswXS5pbmRleE9mKCIrIik7aWYoaTwwKXtpPWVbMF0uaW5kZXhPZigiLSIpfWlmKGk+PTApe09bMF09ZVswXS5zbGljZShpKTtlWzBdPWVbMF0uc2xpY2UoMCxpKX1pPWVbMV0uaW5kZXhPZigiKyIpO2lmKGk8MCl7aT1lWzFdLmluZGV4T2YoIi0iKX1pZihpPj0wKXtPWzFdPWVbMV0uc2xpY2UoaSk7ZVsxXT1lWzFdLnNsaWNlKDAsaSl9cC5teT1lWzBdKyIgIitlWzFdO3Aub2Zmc2V0PU9bMF0rIiAiK09bMV19cmV0dXJuIHB9O2EucHJvdG90eXBlLl9nZXRQb3NpdGlvbk9mZnNldD1mdW5jdGlvbigpe3ZhciBvPVtdO2lmKHRoaXMuX29Qb3NpdGlvbi5teSYmKHRoaXMuX29Qb3NpdGlvbi5teS5pbmRleE9mKCIrIik+PTB8fHRoaXMuX29Qb3NpdGlvbi5teS5pbmRleE9mKCItIik+PTApKXt2YXIgbT10aGlzLl9vUG9zaXRpb24ubXkuc3BsaXQoIiAiKTt2YXIgaT1tWzBdLmluZGV4T2YoIisiKTtpZihpPDApe2k9bVswXS5pbmRleE9mKCItIil9aWYoaT49MCl7b1swXT1tWzBdLnNsaWNlKGkpfWk9bVsxXS5pbmRleE9mKCIrIik7aWYoaTwwKXtpPW1bMV0uaW5kZXhPZigiLSIpfWlmKGk+PTApe29bMV09bVsxXS5zbGljZShpKX19ZWxzZSBpZih0aGlzLl9vUG9zaXRpb24ub2Zmc2V0KXtvPXRoaXMuX29Qb3NpdGlvbi5vZmZzZXQuc3BsaXQoIiAiKX1yZXR1cm4gb307YS5wcm90b3R5cGUuX2FwcGx5UG9zaXRpb249ZnVuY3Rpb24ocCl7dmFyIGI9c2FwLnVpLmdldENvcmUoKS5nZXRDb25maWd1cmF0aW9uKCkuZ2V0UlRMKCk7dmFyICQ9dGhpcy5fJCgpO3ZhciBBPXAuYXQ7aWYodHlwZW9mKEEpPT09InN0cmluZyIpeyQuY3NzKCJkaXNwbGF5IiwiYmxvY2siKS5wb3NpdGlvbih0aGlzLl9yZXNvbHZlUmVmZXJlbmNlKHRoaXMuX2NvbnZlcnRQb3NpdGlvblJUTChwLGIpKSk7dGhpcy5fZml4UG9zaXRpb25pbmcocCxiKX1lbHNlIGlmKHNhcC51aS5jb3JlLkNTU1NpemUuaXNWYWxpZChBLmxlZnQpJiZzYXAudWkuY29yZS5DU1NTaXplLmlzVmFsaWQoQS50b3ApKXskLmNzcyh7ImxlZnQiOkEubGVmdCwidG9wIjpBLnRvcH0pfWVsc2UgaWYoc2FwLnVpLmNvcmUuQ1NTU2l6ZS5pc1ZhbGlkKEEucmlnaHQpJiZzYXAudWkuY29yZS5DU1NTaXplLmlzVmFsaWQoQS50b3ApKXskLmNzcyh7InJpZ2h0IjpBLnJpZ2h0LCJ0b3AiOkEudG9wfSl9ZWxzZSBpZih0eXBlb2YoQS5sZWZ0KT09PSJudW1iZXIiJiZ0eXBlb2YoQS50b3ApPT09Im51bWJlciIpe3ZhciBkPSRbMF07aWYoZCYmZC5zdHlsZS5yaWdodCl7dmFyIHc9JC5vdXRlcldpZHRoKCk7JC5jc3MoeyJyaWdodCI6KGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aC0oQS5sZWZ0K3cpKSsicHgiLCJ0b3AiOkEudG9wKyJweCJ9KX1lbHNleyQuY3NzKHsibGVmdCI6QS5sZWZ0KyJweCIsInRvcCI6QS50b3ArInB4In0pfX10aGlzLl9vTGFzdFBvc2l0aW9uPXA7dGhpcy5fb0xhc3RPZlJlY3Q9dGhpcy5fY2FsY09mUmVjdChwLm9mKX07YS5wcm90b3R5cGUuX2NhbGNPZlJlY3Q9ZnVuY3Rpb24obyl7dmFyIE89dGhpcy5fZ2V0T2ZEb20obyk7aWYoTyl7cmV0dXJuIHEoTykucmVjdCgpfXJldHVybiBudWxsfTthLnByb3RvdHlwZS5fZ2V0T2ZEb209ZnVuY3Rpb24obyl7aWYoKG8gaW5zdGFuY2VvZiBFdmVudCl8fChvIGluc3RhbmNlb2YgcS5FdmVudCkpe3JldHVybiBudWxsfXZhciBPO2lmKHR5cGVvZihvKT09PSJzdHJpbmciKXtPPXEuc2FwLmJ5SWQobyl9ZWxzZSBpZihvIGluc3RhbmNlb2YgcSl7Tz1vfWVsc2V7Tz1xKG8gaW5zdGFuY2VvZiBzYXAudWkuY29yZS5FbGVtZW50P28uZ2V0RG9tUmVmKCk6byl9cmV0dXJuIE9bMF19O2EucHJvdG90eXBlLl9jb252ZXJ0UG9zaXRpb25SVEw9ZnVuY3Rpb24ocCxiKXt2YXIgZj1xLmV4dGVuZCh7fSxwKTtpZihiKXt2YXIgbj1mYWxzZTtpZihmLm15JiYoZi5teS5pbmRleE9mKCIrIik+PTB8fGYubXkuaW5kZXhPZigiLSIpPj0wKSl7bj10cnVlfWlmKChmLm9mZnNldHx8bikmJigoZi5teS5pbmRleE9mKCJiZWdpbiIpPi0xKXx8KGYubXkuaW5kZXhPZigiZW5kIik+LTEpKSYmKChmLmF0LmluZGV4T2YoImJlZ2luIik+LTEpfHwoZi5hdC5pbmRleE9mKCJlbmQiKT4tMSkpKXtpZihuKXt2YXIgbT1mLm15LnNwbGl0KCIgIik7aWYobS5sZW5ndGg9PTIpe2YubXk9IiI7aWYobVswXSl7aWYobVswXS5pbmRleE9mKCJiZWdpbiIpPi0xfHxtWzBdLmluZGV4T2YoImVuZCIpPi0xKXtpZihtWzBdLmluZGV4T2YoIisiKT4tMSl7bVswXT1tWzBdLnJlcGxhY2UoIisiLCItIil9ZWxzZSBpZihtWzBdLmluZGV4T2YoIi0iKT4tMSl7bVswXT1tWzBdLnJlcGxhY2UoIi0iLCIrIil9fWYubXk9bVswXX1pZihtWzFdKXtpZihtWzFdLmluZGV4T2YoImJlZ2luIik+LTF8fG1bMV0uaW5kZXhPZigiZW5kIik+LTEpe2lmKG1bMV0uaW5kZXhPZigiKyIpPi0xKXttWzFdPW1bMV0ucmVwbGFjZSgiKyIsIi0iKX1lbHNlIGlmKG1bMV0uaW5kZXhPZigiLSIpPi0xKXttWzFdPW1bMV0ucmVwbGFjZSgiLSIsIisiKX19aWYobVswXSl7Zi5teT1mLm15KyIgIn1mLm15PWYubXkrbVsxXX19fWVsc2V7Zi5vZmZzZXQ9dGhpcy5fbWlycm9yT2Zmc2V0KGYub2Zmc2V0KX19Zi5teT1mLm15LnJlcGxhY2UoImJlZ2luIiwicmlnaHQiKS5yZXBsYWNlKCJlbmQiLCJsZWZ0Iik7Zi5hdD1mLmF0LnJlcGxhY2UoImJlZ2luIiwicmlnaHQiKS5yZXBsYWNlKCJlbmQiLCJsZWZ0Iil9ZWxzZXtmLm15PWYubXkucmVwbGFjZSgiZW5kIiwicmlnaHQiKS5yZXBsYWNlKCJiZWdpbiIsImxlZnQiKTtmLmF0PWYuYXQucmVwbGFjZSgiZW5kIiwicmlnaHQiKS5yZXBsYWNlKCJiZWdpbiIsImxlZnQiKX1yZXR1cm4gZn07YS5wcm90b3R5cGUuX21pcnJvck9mZnNldD1mdW5jdGlvbihvKXt2YXIgTz1xLnRyaW0obykuc3BsaXQoL1xzLyk7dmFyIHA9cGFyc2VJbnQoT1swXSwxMCk7cmV0dXJuKC1wKSsiICIrT1tPLmxlbmd0aC0xXX07YS5wcm90b3R5cGUuX2ZpeFBvc2l0aW9uaW5nPWZ1bmN0aW9uKHAsYil7dmFyIG09cC5teTtpZih0eXBlb2YobSk9PT0ic3RyaW5nIil7aWYoYiYmKChtLmluZGV4T2YoInJpZ2h0Iik+LTEpfHwobS5pbmRleE9mKCJiZWdpbiIpPi0xKXx8KG0uaW5kZXhPZigiY2VudGVyIik+LTEpKSl7dmFyICQ9dGhpcy5fJCgpO3ZhciBjPXEod2luZG93KS53aWR0aCgpLSQub3V0ZXJXaWR0aCgpLSQub2Zmc2V0KCkubGVmdDskLmNzcyh7InJpZ2h0IjpjKyJweCIsImxlZnQiOiIifSl9ZWxzZSBpZigobS5pbmRleE9mKCJyaWdodCIpPi0xKXx8KG0uaW5kZXhPZigiZW5kIik+LTEpKXt2YXIgJD10aGlzLl8kKCk7dmFyIGM9cSh3aW5kb3cpLndpZHRoKCktJC5vdXRlcldpZHRoKCktJC5vZmZzZXQoKS5sZWZ0OyQuY3NzKHsicmlnaHQiOmMrInB4IiwibGVmdCI6IiJ9KX19fTthLnByb3RvdHlwZS5fcmVzb2x2ZVJlZmVyZW5jZT1mdW5jdGlvbihwKXt2YXIgbz1wO2lmKHAub2YgaW5zdGFuY2VvZiBzYXAudWkuY29yZS5FbGVtZW50KXtvPXEuZXh0ZW5kKHt9LHAse29mOnAub2YuZ2V0RG9tUmVmKCl9KX1yZXR1cm4gb307YS5wcm90b3R5cGUuc2V0U2hhZG93PWZ1bmN0aW9uKHMpe3RoaXMuX2JTaGFkb3c9cztpZih0aGlzLmVPcGVuU3RhdGUhPXNhcC51aS5jb3JlLk9wZW5TdGF0ZS5DTE9TRUQpe3RoaXMuXyQoKS50b2dnbGVDbGFzcygic2FwVWlTaGQiLHMpfXJldHVybiB0aGlzfTthLnByb3RvdHlwZS5zZXRNb2RhbD1mdW5jdGlvbihtLHMpe3ZhciBvPXRoaXMuX2JNb2RhbDt0aGlzLl9iTW9kYWw9bTt0aGlzLl9zTW9kYWxDU1NDbGFzcz1zO2lmKHRoaXMuaXNPcGVuKCkpe2lmKG8hPT1tKXtpZihtKXt0aGlzLl9zaG93QmxvY2tMYXllcigpfWVsc2V7dGhpcy5faGlkZUJsb2NrTGF5ZXIoKX1pZih0aGlzLnRvdWNoRW5hYmxlZCYmdGhpcy5fYkF1dG9DbG9zZSl7aWYoIW0pe3EoZG9jdW1lbnQpLm9uKCJ0b3VjaHN0YXJ0IG1vdXNlZG93biIscS5wcm94eSh0aGlzLl9mQXV0b0Nsb3NlSGFuZGxlcix0aGlzKSl9ZWxzZXtxKGRvY3VtZW50KS5vZmYoInRvdWNoc3RhcnQgbW91c2Vkb3duIix0aGlzLl9mQXV0b0Nsb3NlSGFuZGxlcil9fX19cmV0dXJuIHRoaXN9O2EucHJvdG90eXBlLmdldE1vZGFsPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2JNb2RhbH07YS5wcm90b3R5cGUuc2V0QXV0b0Nsb3NlPWZ1bmN0aW9uKEEpe2lmKHRoaXMudG91Y2hFbmFibGVkJiZ0aGlzLmlzT3BlbigpJiZ0aGlzLl9iQXV0b0Nsb3NlIT09QSl7aWYoIXRoaXMuX2JNb2RhbCl7aWYoQSl7cShkb2N1bWVudCkub24oInRvdWNoc3RhcnQgbW91c2Vkb3duIixxLnByb3h5KHRoaXMuX2ZBdXRvQ2xvc2VIYW5kbGVyLHRoaXMpKX1lbHNle3EoZG9jdW1lbnQpLm9mZigidG91Y2hzdGFydCBtb3VzZWRvd24iLHRoaXMuX2ZBdXRvQ2xvc2VIYW5kbGVyKX19fXRoaXMuX2JBdXRvQ2xvc2U9QTtyZXR1cm4gdGhpc307YS5wcm90b3R5cGUuc2V0QXV0b0Nsb3NlQXJlYXM9ZnVuY3Rpb24oQSl7Zm9yKHZhciBpPTAsbD1BLmxlbmd0aDtpPGw7aSsrKXt2YXIgcz0iIjtpZihBW2ldaW5zdGFuY2VvZiBzYXAudWkuY29yZS5FbGVtZW50KXtzPUFbaV0uZ2V0SWQoKX1lbHNlIGlmKHR5cGVvZiBBW2ldPT09Im9iamVjdCIpe3M9QVtpXS5pZH1lbHNlIGlmKHR5cGVvZiBBW2ldPT09InN0cmluZyIpe3M9QVtpXX1pZihxLmluQXJyYXkocyx0aGlzLmdldENoaWxkUG9wdXBzKCkpPT09LTEpe3RoaXMuYWRkQ2hpbGRQb3B1cChzKX19cmV0dXJuIHRoaXN9O2EucHJvdG90eXBlLnNldEFuaW1hdGlvbnM9ZnVuY3Rpb24obyxjKXtpZihvJiYodHlwZW9mKG8pPT0iZnVuY3Rpb24iKSl7dGhpcy5fYW5pbWF0aW9ucy5vcGVuPW99aWYoYyYmKHR5cGVvZihjKT09ImZ1bmN0aW9uIikpe3RoaXMuX2FuaW1hdGlvbnMuY2xvc2U9Y31yZXR1cm4gdGhpc307YS5wcm90b3R5cGUuc2V0RHVyYXRpb25zPWZ1bmN0aW9uKG8sYyl7aWYoKG8+MCl8fChvPT09MCkpe3RoaXMuX2R1cmF0aW9ucy5vcGVuPW99aWYoKGM+MCl8fChjPT09MCkpe3RoaXMuX2R1cmF0aW9ucy5jbG9zZT1jfXJldHVybiB0aGlzfTthLnByb3RvdHlwZS5zZXRGb2xsb3dPZj1mdW5jdGlvbihmKXt2YXIgdT1mYWxzZTthLkRvY2tUcmlnZ2VyLnJlbW92ZUxpc3RlbmVyKGEuY2hlY2tEb2NraW5nLHRoaXMpO2lmKHR5cGVvZihmKT09PSJmdW5jdGlvbiIpe3RoaXMuX2JGb2xsb3dPZj10cnVlO3RoaXMuX2ZvbGxvd09mSGFuZGxlcj1mO3U9dHJ1ZX1lbHNlIGlmKHR5cGVvZihmKT09PSJib29sZWFuIil7dGhpcy5fYkZvbGxvd09mPWY7aWYoIXRoaXMuX2JGb2xsb3dPZil7dGhpcy5fZm9sbG93T2ZIYW5kbGVyPW51bGx9dT1mfWVsc2V7dGhpcy5fYkZvbGxvd09mPWZhbHNlO3RoaXMuX2ZvbGxvd09mSGFuZGxlcj1udWxsO2lmKGYhPW51bGwpe3Euc2FwLmxvZy5lcnJvcigiVHJ5aW5nIHRvIHNldCBhbiBpbnZhbGlkIHR5cGUgdG8gJ2ZvbGxvd09mOiAiK2YpfX1pZih1JiZ0aGlzLl9vTGFzdFBvc2l0aW9uKXt0aGlzLl9vTGFzdE9mUmVjdD10aGlzLl9jYWxjT2ZSZWN0KHRoaXMuX29MYXN0UG9zaXRpb24ub2YpfWlmKHRoaXMuX2JGb2xsb3dPZiYmdGhpcy5nZXRPcGVuU3RhdGUoKT09PXNhcC51aS5jb3JlLk9wZW5TdGF0ZS5PUEVOKXthLkRvY2tUcmlnZ2VyLmFkZExpc3RlbmVyKGEuY2hlY2tEb2NraW5nLHRoaXMpfX07YS5wcm90b3R5cGUuZ2V0QXV0b0Nsb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2JBdXRvQ2xvc2V9O2EucHJvdG90eXBlLmdldEZvbGxvd09mPWZ1bmN0aW9uKCl7aWYodGhpcy5fYkZvbGxvd09mKXtyZXR1cm4gdHlwZW9mKHRoaXMuX2ZvbGxvd09mSGFuZGxlcik9PT0iZnVuY3Rpb24iP3RoaXMuX2ZvbGxvd09mSGFuZGxlcjp0cnVlfXJldHVybiBmYWxzZX07YS5wcm90b3R5cGUuaXNPcGVuPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYk9wZW59O2EucHJvdG90eXBlLmdldE9wZW5TdGF0ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmVPcGVuU3RhdGV9O2EucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXtpZih0aGlzLl9yZXNpemVMaXN0ZW5lcklkKXtzYXAudWkuY29yZS5SZXNpemVIYW5kbGVyLmRlcmVnaXN0ZXIodGhpcy5fcmVzaXplTGlzdGVuZXJJZCk7dGhpcy5fcmVzaXplTGlzdGVuZXJJZD1udWxsfXRoaXMuY2xvc2UoKTt0aGlzLm9Db250ZW50PW51bGw7aWYodGhpcy5fYkZvbGxvd09mKXt0aGlzLnNldEZvbGxvd09mKG51bGwpfWlmKHRoaXMuX2JFdmVudEJ1c0V2ZW50c1JlZ2lzdGVyZWQpe3RoaXMuX3VucmVnaXN0ZXJFdmVudEJ1c0V2ZW50cygpfX07YS5wcm90b3R5cGUuZXhpdD1mdW5jdGlvbigpe2RlbGV0ZSB0aGlzLl9tRm9jdXNFdmVudHN9O2EucHJvdG90eXBlLl9hZGRGb2N1c0V2ZW50TGlzdGVuZXJzPWZ1bmN0aW9uKGMsZSxFKXtpZighdGhpcy5mRXZlbnRIYW5kbGVyKXt0aGlzLmZFdmVudEhhbmRsZXI9cS5wcm94eSh0aGlzLm9uRm9jdXNFdmVudCx0aGlzKX12YXIgcD10aGlzLl8kKCk7dmFyIGI9dGhpcy5nZXRDaGlsZFBvcHVwcygpO2lmKGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXImJiFzYXAudWkuRGV2aWNlLmJyb3dzZXIuaW50ZXJuZXRfZXhwbG9yZXIpe2RvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoImZvY3VzIix0aGlzLmZFdmVudEhhbmRsZXIsdHJ1ZSk7cC5nZXQoMCkuYWRkRXZlbnRMaXN0ZW5lcigiYmx1ciIsdGhpcy5mRXZlbnRIYW5kbGVyLHRydWUpO2Zvcih2YXIgaT0wLGw9Yi5sZW5ndGg7aTxsO2krKyl7dmFyIGQ9cS5zYXAuZG9tQnlJZChiW2ldKTtpZihkKXtkLmFkZEV2ZW50TGlzdGVuZXIoImJsdXIiLHRoaXMuZkV2ZW50SGFuZGxlcix0cnVlKX19fWVsc2V7cShkb2N1bWVudCkuYmluZCgiYWN0aXZhdGUuIit0aGlzLl9wb3B1cFVJRCx0aGlzLmZFdmVudEhhbmRsZXIpO3AuYmluZCgiZGVhY3RpdmF0ZS4iK3RoaXMuX3BvcHVwVUlELHRoaXMuZkV2ZW50SGFuZGxlcik7Zm9yKHZhciBpPTAsbD1iLmxlbmd0aDtpPGw7aSsrKXt2YXIgZD1xLnNhcC5kb21CeUlkKGJbaV0pO2lmKGQpe3EoZCkuYmluZCgiZGVhY3RpdmF0ZS4iK3RoaXMuX3BvcHVwVUlELHRoaXMuZkV2ZW50SGFuZGxlcil9fX19O2EucHJvdG90eXBlLl9yZW1vdmVGb2N1c0V2ZW50TGlzdGVuZXJzPWZ1bmN0aW9uKGMsZSxFKXt2YXIgcD10aGlzLl8kKGZhbHNlLHRydWUpO2lmKCFwLmxlbmd0aCl7cmV0dXJufXZhciBiPXRoaXMuZ2V0Q2hpbGRQb3B1cHMoKTtpZihkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyJiYhc2FwLnVpLkRldmljZS5icm93c2VyLmludGVybmV0X2V4cGxvcmVyKXtkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCJmb2N1cyIsdGhpcy5mRXZlbnRIYW5kbGVyLHRydWUpO3AuZ2V0KDApLnJlbW92ZUV2ZW50TGlzdGVuZXIoImJsdXIiLHRoaXMuZkV2ZW50SGFuZGxlcix0cnVlKTtmb3IodmFyIGk9MCxsPWIubGVuZ3RoO2k8bDtpKyspe3ZhciBkPXEuc2FwLmRvbUJ5SWQoYltpXSk7aWYoZCl7ZC5yZW1vdmVFdmVudExpc3RlbmVyKCJibHVyIix0aGlzLmZFdmVudEhhbmRsZXIsdHJ1ZSl9dGhpcy5jbG9zZVBvcHVwKGJbaV0pfX1lbHNle3EoZG9jdW1lbnQpLnVuYmluZCgiYWN0aXZhdGUuIit0aGlzLl9wb3B1cFVJRCx0aGlzLmZFdmVudEhhbmRsZXIpO3AudW5iaW5kKCJkZWFjdGl2YXRlLiIrdGhpcy5fcG9wdXBVSUQsdGhpcy5mRXZlbnRIYW5kbGVyKTtmb3IodmFyIGk9MCxsPWIubGVuZ3RoO2k8bDtpKyspe3ZhciBkPXEuc2FwLmRvbUJ5SWQoYltpXSk7aWYoZCl7cShkKS51bmJpbmQoImRlYWN0aXZhdGUuIit0aGlzLl9wb3B1cFVJRCx0aGlzLmZFdmVudEhhbmRsZXIpfX19dGhpcy5mRXZlbnRIYW5kbGVyPW51bGx9O2EucHJvdG90eXBlLl9yZWdpc3RlckV2ZW50QnVzRXZlbnRzPWZ1bmN0aW9uKGMsZSxFKXt2YXIgdD10aGlzO3EuZWFjaCh0Ll9tRm9jdXNFdmVudHMsZnVuY3Rpb24ocyxsKXtzYXAudWkuZ2V0Q29yZSgpLmdldEV2ZW50QnVzKCkuc3Vic2NyaWJlKCJzYXAudWkiLHMsbCx0KX0pO3RoaXMuX2JFdmVudEJ1c0V2ZW50c1JlZ2lzdGVyZWQ9dHJ1ZX07YS5wcm90b3R5cGUuX3VucmVnaXN0ZXJFdmVudEJ1c0V2ZW50cz1mdW5jdGlvbihjLGUsRSl7dmFyIHQ9dGhpcztxLmVhY2godC5fbUZvY3VzRXZlbnRzLGZ1bmN0aW9uKHMsbCl7c2FwLnVpLmdldENvcmUoKS5nZXRFdmVudEJ1cygpLnVuc3Vic2NyaWJlKCJzYXAudWkiLHMsbCx0KX0pO2RlbGV0ZSB0aGlzLl9iRXZlbnRCdXNFdmVudHNSZWdpc3RlcmVkfTthLnByb3RvdHlwZS5fYWRkRm9jdXNhYmxlQXJlYT1mdW5jdGlvbihjLGUsRSl7dmFyIHA9dGhpcy5fcG9wdXBVSUQ7aWYocS5pbkFycmF5KEUuaWQsdGhpcy5nZXRDaGlsZFBvcHVwcygpKT09PS0xKXt0aGlzLmFkZENoaWxkUG9wdXAoRS5pZCl9dmFyICQ9cSgnW2RhdGEtc2FwLXVpLXBvcHVwPSInK0UuaWQrJyJdJyk7aWYoJC5sZW5ndGg+MCl7dmFyIG89ZnVuY3Rpb24oYil7JC5vZmYoImJsdXIiLG8pO3ZhciBzPSJzYXAudWkuY29yZS5Qb3B1cC5vbkZvY3VzRXZlbnQtIitwO3NhcC51aS5nZXRDb3JlKCkuZ2V0RXZlbnRCdXMoKS5wdWJsaXNoKCJzYXAudWkiLHMsYil9OyQub24oImJsdXIiLG8pfX07YS5wcm90b3R5cGUuX3JlbW92ZUZvY3VzYWJsZUFyZWE9ZnVuY3Rpb24oYyxlLEUpe3RoaXMucmVtb3ZlQ2hpbGRQb3B1cChFLmlkKX07YS5wcm90b3R5cGUuX2Nsb3NlUG9wdXA9ZnVuY3Rpb24oYyxlLEUpe3RoaXMuY2xvc2UodHlwZW9mIHRoaXMuX2R1cmF0aW9ucy5jbG9zZT09PSJzdHJpbmciPzA6dGhpcy5fZHVyYXRpb25zLmNsb3NlKX07YS5wcm90b3R5cGUuX3NldElkZW50aXR5PWZ1bmN0aW9uKCQpe2lmKHR5cGVvZiAkPT09Im9iamVjdCIpeyQuYXR0cigiZGF0YS1zYXAtdWktcG9wdXAiLHRoaXMuX3BvcHVwVUlEKX1lbHNle3Euc2FwLmxvZy53YXJuaW5nKCJJbmNvcnJlY3QgRG9tUmVmLXR5cGUgZm9yICdzZXRJZGVudGl0eSc6ICIrJCx0aGlzKTtyZXR1cm59aWYoIXRoaXMuX2JFdmVudEJ1c0V2ZW50c1JlZ2lzdGVyZWQpe3RoaXMuX3JlZ2lzdGVyRXZlbnRCdXNFdmVudHMoKX19O2EucHJvdG90eXBlLl8kPWZ1bmN0aW9uKGYsZyl7dmFyIGM7aWYodGhpcy5vQ29udGVudCBpbnN0YW5jZW9mIEMpe2M9dGhpcy5vQ29udGVudC4kKCk7aWYoZnx8KGMubGVuZ3RoPT09MCYmIWcpKXtxLnNhcC5sb2cuaW5mbygiUmVuZGVyaW5nIG9mIHBvcHVwIGNvbnRlbnQ6ICIrdGhpcy5vQ29udGVudC5nZXRJZCgpKTtpZihjLmxlbmd0aD4wKXtSLnByZXNlcnZlQ29udGVudChjWzBdLHRydWUsZmFsc2UpfXNhcC51aS5nZXRDb3JlKCkuZ2V0UmVuZGVyTWFuYWdlcigpLnJlbmRlcih0aGlzLm9Db250ZW50LHNhcC51aS5nZXRDb3JlKCkuZ2V0U3RhdGljQXJlYVJlZigpKTtjPXRoaXMub0NvbnRlbnQuJCgpfX1lbHNlIGlmKHRoaXMub0NvbnRlbnQgaW5zdGFuY2VvZiBzYXAudWkuY29yZS5FbGVtZW50KXtjPXRoaXMub0NvbnRlbnQuJCgpfWVsc2V7Yz1xKHRoaXMub0NvbnRlbnQpfXRoaXMuX3NldElkZW50aXR5KGMpO3JldHVybiBjfTthLnByb3RvdHlwZS5fc2hvd0Jsb2NrTGF5ZXI9ZnVuY3Rpb24oKXt2YXIgYj1xKCIjc2FwLXVpLWJsb2NrbGF5ZXItcG9wdXAiKSxjPSJzYXBVaUJMeSIrKHRoaXMuX3NNb2RhbENTU0NsYXNzPyIgIit0aGlzLl9zTW9kYWxDU1NDbGFzczoiIik7aWYoYi5sZW5ndGg9PT0wKXtiPXEoJzxkaXYgaWQ9InNhcC11aS1ibG9ja2xheWVyLXBvcHVwIiB0YWJpbmRleD0iMCIgY2xhc3M9IicrYysnIj48L2Rpdj4nKTtiLmFwcGVuZFRvKHNhcC51aS5nZXRDb3JlKCkuZ2V0U3RhdGljQXJlYVJlZigpKX1lbHNle2IucmVtb3ZlQ2xhc3MoKS5hZGRDbGFzcyhjKX1hLmJsU3RhY2sucHVzaCh0aGlzLl9pWkluZGV4LTIpO2IuY3NzKHsiei1pbmRleCI6dGhpcy5faVpJbmRleC0yLCJ2aXNpYmlsaXR5IjoidmlzaWJsZSJ9KS5zaG93KCk7cSgiaHRtbCIpLmFkZENsYXNzKCJzYXBVaUJMeUJhY2siKX07YS5wcm90b3R5cGUuX2hpZGVCbG9ja0xheWVyPWZ1bmN0aW9uKCl7YS5ibFN0YWNrLnBvcCgpO2lmKGEuYmxTdGFjay5sZW5ndGg+MCl7cSgiI3NhcC11aS1ibG9ja2xheWVyLXBvcHVwIikuY3NzKHsiei1pbmRleCI6YS5ibFN0YWNrW2EuYmxTdGFjay5sZW5ndGgtMV0sInZpc2liaWxpdHkiOiJ2aXNpYmxlIn0pLnNob3coKX1lbHNle3EoIiNzYXAtdWktYmxvY2tsYXllci1wb3B1cCIpLmNzcygidmlzaWJpbGl0eSIsImhpZGRlbiIpLmhpZGUoKTtxKCJodG1sIikucmVtb3ZlQ2xhc3MoInNhcFVpQkx5QmFjayIpfX07YS5Eb2NrVHJpZ2dlcj1uZXcgSSgyMDApO3ZhciByPWZ1bmN0aW9uKG8sYil7aWYoby5sZWZ0IT1iLmxlZnR8fG8udG9wIT1iLnRvcHx8by53aWR0aCE9Yi53aWR0aHx8by5oZWlnaHQhPWIuaGVpZ2h0KXtyZXR1cm4gZmFsc2V9cmV0dXJuIHRydWV9O2EuY2hlY2tEb2NraW5nPWZ1bmN0aW9uKCl7aWYodGhpcy5nZXRPcGVuU3RhdGUoKT09PXNhcC51aS5jb3JlLk9wZW5TdGF0ZS5PUEVOKXt2YXIgYz10aGlzLl9nZXRPZkRvbSh0aGlzLl9vTGFzdFBvc2l0aW9uLm9mKSxvPXEoYykucmVjdCgpO2lmKCFvKXt0aGlzLmNsb3NlKCk7cmV0dXJufWlmKCFxLnNhcC5jb250YWluc09yRXF1YWxzKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCxjKSl7aWYoYy5pZCYmYy5pZCE9PSIiKXt2YXIgbj1xLnNhcC5kb21CeUlkKGMuaWQpO3ZhciBOPXEobikucmVjdCgpO2lmKE4mJiFyKG8sTikpe289TjtkZWxldGUgdGhpcy5fb0xhc3RQb3NpdGlvbi5vZjt0aGlzLl9vTGFzdFBvc2l0aW9uLm9mPW59fX1pZih0aGlzLl9vTGFzdE9mUmVjdCl7aWYoIXIodGhpcy5fb0xhc3RPZlJlY3Qsbykpe2lmKHRoaXMuX2ZvbGxvd09mSGFuZGxlcil7dmFyIGw9cS5leHRlbmQodHJ1ZSx7fSx0aGlzLl9vTGFzdFBvc2l0aW9uKSxMPXEuZXh0ZW5kKHRydWUse30sdGhpcy5fb0xhc3RPZlJlY3QpO3RoaXMuX2ZvbGxvd09mSGFuZGxlcih7bGFzdFBvc2l0aW9uOmwsbGFzdE9mUmVjdDpMLGN1cnJlbnRPZlJlY3Q6b30pfWVsc2V7dGhpcy5fYXBwbHlQb3NpdGlvbih0aGlzLl9vTGFzdFBvc2l0aW9uKX19fX19O2EucHJvdG90eXBlLm9udG91Y2hzdGFydD1mdW5jdGlvbihlKXt0aGlzLm9ubW91c2Vkb3duKGUsdHJ1ZSk7dGhpcy5fYk1vdXNlZG93bkNhbGxlZD10cnVlfTthLnByb3RvdHlwZS5vbm1vdXNlZG93bj1mdW5jdGlvbihlLHMpe2lmKHRoaXMuX2JNb3VzZWRvd25DYWxsZWQmJiFzKXt0aGlzLl9iTW91c2Vkb3duQ2FsbGVkPWZhbHNlO3JldHVybn1pZih0aGlzLl9pWkluZGV4PT09dGhpcy5nZXRMYXN0WkluZGV4KCl8fHRoaXMuZ2V0TW9kYWwoKSl7cmV0dXJufXRoaXMuX2luY3JlYXNlTXlaSW5kZXgoIiIsIm1vdXNlZG93biIsZSl9O2EucHJvdG90eXBlLl9pbmNyZWFzZU15WkluZGV4PWZ1bmN0aW9uKGMsZSxFKXt2YXIgcD10aGlzLmdldFBhcmVudFBvcHVwKHRoaXMuX29MYXN0UG9zaXRpb24ub2YpO2lmKEUudHlwZSYmRS50eXBlPT09Im1vdXNlZG93biJ8fEUuaXNGcm9tUGFyZW50UG9wdXB8fHAubGVuZ3RoPT09MCl7dGhpcy5faVpJbmRleD10aGlzLmdldE5leHRaSW5kZXgoKTt2YXIgJD10aGlzLl8kKCk7JC5jc3MoInotaW5kZXgiLHRoaXMuX2laSW5kZXgpO2lmKHRoaXMuX29CbGluZExheWVyKXt0aGlzLl9vQmxpbmRMYXllci51cGRhdGUoJCx0aGlzLl9pWkluZGV4LTEpfWlmKCFFLnR5cGV8fEUudHlwZSE9Im1vdXNlZG93biIpe3ZhciBiPXRoaXMuZ2V0Q2hpbGRQb3B1cHMoKTtmb3IodmFyIGk9MCxsPWIubGVuZ3RoO2k8bDtpKyspe3RoaXMuaW5jcmVhc2VaSW5kZXgoYltpXSx0cnVlKX19fWVsc2UgaWYocC5sZW5ndGg+MCl7dGhpcy5pbmNyZWFzZVpJbmRleChxKHAuZ2V0KDApKS5hdHRyKCJkYXRhLXNhcC11aS1wb3B1cCIpLGZhbHNlKX19O2EucHJvdG90eXBlLm9uQWZ0ZXJSZW5kZXJpbmc9ZnVuY3Rpb24oZSl7dmFyICQ9dGhpcy5nZXRDb250ZW50KCkuJCgpOyQudG9nZ2xlQ2xhc3MoInNhcFVpU2hkIix0aGlzLl9iU2hhZG93KTskLmNzcygicG9zaXRpb24iLCJhYnNvbHV0ZSIpO3RoaXMuX3NldElkZW50aXR5KCQpO3ZhciBiPSRbMF07dmFyIGw9Yi5zdHlsZS5sZWZ0O3ZhciBjPWIuc3R5bGUucmlnaHQ7dmFyIHQ9Yi5zdHlsZS50b3A7dmFyIGQ9Yi5zdHlsZS5ib3R0b207aWYoIShsJiZsIT0iYXV0byJ8fGMmJmMhPSJhdXRvInx8dCYmdCE9ImF1dG8ifHxkJiZkIT0iYXV0byIpKXtxLnNhcC5sb2cuZGVidWcoInJlcG9zaXRpb24gcG9wdXAgY29udGVudCAiKyQuYXR0cigiaWQiKSsiIGF0ICIrKHdpbmRvdy5KU09OP0pTT04uc3RyaW5naWZ5KHRoaXMuX29MYXN0UG9zaXRpb24uYXQpOlN0cmluZyh0aGlzLl9vTGFzdFBvc2l0aW9uLmF0KSkpO3RoaXMuX2FwcGx5UG9zaXRpb24odGhpcy5fb0xhc3RQb3NpdGlvbil9JC5zaG93KCkuY3NzKHsidmlzaWJpbGl0eSI6InZpc2libGUiLCJ6LWluZGV4Ijp0aGlzLl9pWkluZGV4fSk7aWYodGhpcy5fb0JsaW5kTGF5ZXIpe3RoaXMuX3Jlc2l6ZUxpc3RlbmVySWQ9c2FwLnVpLmNvcmUuUmVzaXplSGFuZGxlci5yZWdpc3Rlcih0aGlzLl8kKCkuZ2V0KDApLHEucHJveHkodGhpcy5vbnJlc2l6ZSx0aGlzKSl9aWYodGhpcy5pc09wZW4oKSYmKHRoaXMuZ2V0TW9kYWwoKXx8dGhpcy5nZXRBdXRvQ2xvc2UoKSkpe3RoaXMuX2FkZEZvY3VzRXZlbnRMaXN0ZW5lcnMoKX19O2EucHJvdG90eXBlLm9uQmVmb3JlUmVuZGVyaW5nPWZ1bmN0aW9uKGUpe2lmKHRoaXMuX3Jlc2l6ZUxpc3RlbmVySWQpe3NhcC51aS5jb3JlLlJlc2l6ZUhhbmRsZXIuZGVyZWdpc3Rlcih0aGlzLl9yZXNpemVMaXN0ZW5lcklkKTt0aGlzLl9yZXNpemVMaXN0ZW5lcklkPW51bGx9aWYodGhpcy5pc09wZW4oKSYmKHRoaXMuZ2V0TW9kYWwoKXx8dGhpcy5nZXRBdXRvQ2xvc2UoKSkpe3RoaXMuX3JlbW92ZUZvY3VzRXZlbnRMaXN0ZW5lcnMoKX19O2EucHJvdG90eXBlLm9ucmVzaXplPWZ1bmN0aW9uKGUpe2lmKHRoaXMuZU9wZW5TdGF0ZSE9c2FwLnVpLmNvcmUuT3BlblN0YXRlLkNMT1NFRCYmdGhpcy5fb0JsaW5kTGF5ZXIpe3ZhciB0PXRoaXM7c2V0VGltZW91dChmdW5jdGlvbigpe3QuX3VwZGF0ZUJsaW5kTGF5ZXIoKX0sMCl9fTthLnByb3RvdHlwZS5fdXBkYXRlQmxpbmRMYXllcj1mdW5jdGlvbigpe2lmKHRoaXMuZU9wZW5TdGF0ZSE9c2FwLnVpLmNvcmUuT3BlblN0YXRlLkNMT1NFRCYmdGhpcy5fb0JsaW5kTGF5ZXIpe3RoaXMuX29CbGluZExheWVyLnVwZGF0ZSh0aGlzLl8kKCkpfX07cmV0dXJuIGF9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS5TY3JvbGxCYXInKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS5TY3JvbGxCYXInKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9TY3JvbGxCYXIiLFsnLi9saWJyYXJ5JywnLi9Db250cm9sJ10sZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7c2FwLnVpLmNvcmUuQ29udHJvbC5leHRlbmQoInNhcC51aS5jb3JlLlNjcm9sbEJhciIse21ldGFkYXRhOntwdWJsaWNNZXRob2RzOlsiYmluZCIsInVuYmluZCIsInBhZ2VVcCIsInBhZ2VEb3duIl0sbGlicmFyeToic2FwLnVpLmNvcmUiLHByb3BlcnRpZXM6eyJ2ZXJ0aWNhbCI6e3R5cGU6ImJvb2xlYW4iLGdyb3VwOiJCZWhhdmlvciIsZGVmYXVsdFZhbHVlOnRydWV9LCJzY3JvbGxQb3NpdGlvbiI6e3R5cGU6ImludCIsZ3JvdXA6IkJlaGF2aW9yIixkZWZhdWx0VmFsdWU6bnVsbH0sInNpemUiOnt0eXBlOiJzYXAudWkuY29yZS5DU1NTaXplIixncm91cDoiRGltZW5zaW9uIixkZWZhdWx0VmFsdWU6bnVsbH0sImNvbnRlbnRTaXplIjp7dHlwZToic2FwLnVpLmNvcmUuQ1NTU2l6ZSIsZ3JvdXA6IkRpbWVuc2lvbiIsZGVmYXVsdFZhbHVlOm51bGx9LCJzdGVwcyI6e3R5cGU6ImludCIsZ3JvdXA6IkRpbWVuc2lvbiIsZGVmYXVsdFZhbHVlOm51bGx9fSxldmVudHM6eyJzY3JvbGwiOnt9fX19KTtzYXAudWkuY29yZS5TY3JvbGxCYXIuTV9FVkVOVFM9eydzY3JvbGwnOidzY3JvbGwnfTtzYXAudWkuY29yZS5TY3JvbGxCYXIucHJvdG90eXBlLmluaXQ9ZnVuY3Rpb24oKXt0aGlzLl8kU2Nyb2xsRG9tUmVmPW51bGw7dGhpcy5faU9sZFNjcm9sbFBvcz0wO3RoaXMuX2lPbGRTdGVwPTA7dGhpcy5fYlNjcm9sbFBvc0lzQ2hlY2tlZD1mYWxzZTt0aGlzLl9iUlRMPXNhcC51aS5nZXRDb3JlKCkuZ2V0Q29uZmlndXJhdGlvbigpLmdldFJUTCgpO3RoaXMuX2JTdXBwcmVzc1Njcm9sbD1mYWxzZTt0aGlzLl9pTWF4Q29udGVudERpdlNpemU9MTAwMDAwMDtpZihqUXVlcnkuc2FwLnRvdWNoRXZlbnRNb2RlPT09Ik9OIil7alF1ZXJ5LnNhcC5yZXF1aXJlKCJzYXAudWkudGhpcmRwYXJ0eS56eW5nYXNjcm9sbCIpO3RoaXMuX2lMYXN0VG91Y2hTY3JvbGxlclBvc2l0aW9uPW51bGw7dGhpcy5faVRvdWNoU3RlcFRyZXNob2xkPTI0O3RoaXMuX2JTa2lwVG91Y2hIYW5kbGluZz1mYWxzZTt0aGlzLl9vVG91Y2hTY3JvbGxlcj1uZXcgd2luZG93LlNjcm9sbGVyKGpRdWVyeS5wcm94eSh0aGlzLl9oYW5kbGVUb3VjaFNjcm9sbCx0aGlzKSx7Ym91bmNpbmc6ZmFsc2V9KX19O3NhcC51aS5jb3JlLlNjcm9sbEJhci5wcm90b3R5cGUub25CZWZvcmVSZW5kZXJpbmc9ZnVuY3Rpb24oKXt0aGlzLiQoInNiIikudW5iaW5kKCJzY3JvbGwiLHRoaXMub25zY3JvbGwpfTtzYXAudWkuY29yZS5TY3JvbGxCYXIucHJvdG90eXBlLm9uQWZ0ZXJSZW5kZXJpbmc9ZnVuY3Rpb24oKXt0aGlzLl9pU3RlcHM9dGhpcy5nZXRTdGVwcygpO3ZhciBjPXRoaXMuZ2V0Q29udGVudFNpemUoKTt0aGlzLl9iU3RlcE1vZGU9IWM7dmFyIHM9dGhpcy5nZXRTaXplKCk7aWYoalF1ZXJ5LnNhcC5lbmRzV2l0aChzLCJweCIpKXtzPXMuc3Vic3RyKDAscy5sZW5ndGgtMil9ZWxzZXtzPXRoaXMuZ2V0VmVydGljYWwoKT90aGlzLiQoKS5oZWlnaHQoKTp0aGlzLiQoKS53aWR0aCgpfXZhciBhPW51bGw7dmFyICQ9dGhpcy4kKCJmZnNpemUiKTtpZighIXNhcC51aS5EZXZpY2UuYnJvd3Nlci5maXJlZm94KXthPSQub3V0ZXJIZWlnaHQoKX0kLnJlbW92ZSgpO2lmKCEhc2FwLnVpLkRldmljZS5icm93c2VyLndlYmtpdCl7aWYoIWRvY3VtZW50LndpZHRoKXthPU1hdGgucm91bmQoNDAvKHdpbmRvdy5vdXRlcldpZHRoL2pRdWVyeShkb2N1bWVudCkud2lkdGgoKSkpfWVsc2V7YT1NYXRoLnJvdW5kKDQwLyhkb2N1bWVudC53aWR0aC9qUXVlcnkoZG9jdW1lbnQpLndpZHRoKCkpKX19aWYodGhpcy5nZXRWZXJ0aWNhbCgpKXt0aGlzLl9pRmFjdG9yPSEhc2FwLnVpLkRldmljZS5icm93c2VyLmZpcmVmb3g/YTohIXNhcC51aS5EZXZpY2UuYnJvd3Nlci53ZWJraXQ/YTpNYXRoLmZsb29yKHMqMC4xMjUpO3RoaXMuX2lGYWN0b3JQYWdlPSEhc2FwLnVpLkRldmljZS5icm93c2VyLmZpcmVmb3g/cy1hOk1hdGguZmxvb3IocyowLjg3NSl9ZWxzZXt0aGlzLl9pRmFjdG9yPSEhc2FwLnVpLkRldmljZS5icm93c2VyLmZpcmVmb3g/MTA6ISFzYXAudWkuRGV2aWNlLmJyb3dzZXIud2Via2l0P2E6Nzt0aGlzLl9pRmFjdG9yUGFnZT0hIXNhcC51aS5EZXZpY2UuYnJvd3Nlci5maXJlZm94P01hdGguZmxvb3IocyowLjgpOiEhc2FwLnVpLkRldmljZS5icm93c2VyLndlYmtpdD9NYXRoLmZsb29yKHMqMC44NzUpOnMtMTR9dGhpcy5fJFNjcm9sbERvbVJlZj10aGlzLiQoInNiIik7aWYodGhpcy5fYlN0ZXBNb2RlKXtpZih0aGlzLmdldFZlcnRpY2FsKCkpe3ZhciBTPXRoaXMuX2lTdGVwcyp0aGlzLl9pRmFjdG9yO2lmKFM+dGhpcy5faU1heENvbnRlbnREaXZTaXplKXt0aGlzLl9pRmFjdG9yPU1hdGguY2VpbCh0aGlzLl9pRmFjdG9yL01hdGguY2VpbChTL3RoaXMuX2lNYXhDb250ZW50RGl2U2l6ZSkpfXZhciBDPXRoaXMuXyRTY3JvbGxEb21SZWYuaGVpZ2h0KCkrdGhpcy5faVN0ZXBzKnRoaXMuX2lGYWN0b3I7dGhpcy5fJFNjcm9sbERvbVJlZi5maW5kKCJkaXYiKS5oZWlnaHQoQyl9ZWxzZXt2YXIgQz10aGlzLl8kU2Nyb2xsRG9tUmVmLndpZHRoKCkrdGhpcy5faVN0ZXBzKnRoaXMuX2lGYWN0b3I7dGhpcy5fJFNjcm9sbERvbVJlZi5maW5kKCJkaXYiKS53aWR0aChDKX19dGhpcy5zZXRDaGVja2VkU2Nyb2xsUG9zaXRpb24odGhpcy5nZXRTY3JvbGxQb3NpdGlvbigpP3RoaXMuZ2V0U2Nyb2xsUG9zaXRpb24oKTowLHRydWUpO3RoaXMuXyRTY3JvbGxEb21SZWYuYmluZCgic2Nyb2xsIixqUXVlcnkucHJveHkodGhpcy5vbnNjcm9sbCx0aGlzKSk7aWYoalF1ZXJ5LnNhcC50b3VjaEV2ZW50TW9kZT09PSJPTiIpe3RoaXMuX2JTa2lwVG91Y2hIYW5kbGluZz10cnVlO3ZhciBvPXt3aWR0aDowLGhlaWdodDowfTtvW3RoaXMuZ2V0VmVydGljYWwoKT8iaGVpZ2h0Ijoid2lkdGgiXT10aGlzLl9iU3RlcE1vZGU/KHRoaXMuZ2V0U3RlcHMoKSp0aGlzLl9pVG91Y2hTdGVwVHJlc2hvbGQpOnBhcnNlSW50KHRoaXMuZ2V0Q29udGVudFNpemUoKSwxMCk7dGhpcy5fb1RvdWNoU2Nyb2xsZXIuc2V0RGltZW5zaW9ucygwLDAsby53aWR0aCxvLmhlaWdodCk7dmFyIGU9dGhpcy5fJFNjcm9sbERvbVJlZi5nZXQoMCk7dmFyIHI9ZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTt0aGlzLl9vVG91Y2hTY3JvbGxlci5zZXRQb3NpdGlvbihyLmxlZnQrZS5jbGllbnRMZWZ0LHIudG9wK2UuY2xpZW50VG9wKTt0aGlzLl9iU2tpcFRvdWNoSGFuZGxpbmc9ZmFsc2V9fTtzYXAudWkuY29yZS5TY3JvbGxCYXIucHJvdG90eXBlLm9ubW91c2V3aGVlbD1mdW5jdGlvbihlKXtpZih0aGlzLiQoKS5pcygiOnZpc2libGUiKSl7dmFyIG89ZS5vcmlnaW5hbEV2ZW50O3ZhciB3PW8uZGV0YWlsP28uZGV0YWlsOm8ud2hlZWxEZWx0YSooLTEpLzQwO3ZhciBmPXc+MD90cnVlOmZhbHNlO2lmKGpRdWVyeS5zYXAuY29udGFpbnNPckVxdWFscyh0aGlzLl8kU2Nyb2xsRG9tUmVmWzBdLGUudGFyZ2V0KSl7dGhpcy5fZG9TY3JvbGwoc2FwLnVpLmNvcmUuU2Nyb2xsQmFyQWN0aW9uLk1vdXNlV2hlZWwsZil9ZWxzZXt0aGlzLl9iTW91c2VXaGVlbD10cnVlO3ZhciBwPW51bGw7aWYodGhpcy5fYlN0ZXBNb2RlKXtwPXcrdGhpcy5faU9sZFN0ZXB9ZWxzZXtwPXcqdGhpcy5faUZhY3Rvcit0aGlzLl9pT2xkU2Nyb2xsUG9zfXRoaXMuc2V0Q2hlY2tlZFNjcm9sbFBvc2l0aW9uKHAsdHJ1ZSl9ZS5wcmV2ZW50RGVmYXVsdCgpO2Uuc3RvcFByb3BhZ2F0aW9uKCk7cmV0dXJuIGZhbHNlfX07c2FwLnVpLmNvcmUuU2Nyb2xsQmFyLnByb3RvdHlwZS5vbnRvdWNoc3RhcnQ9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS50b3VjaGVzO3ZhciBmPXRbMF07aWYoZiYmZi50YXJnZXQmJmYudGFyZ2V0LnRhZ05hbWUubWF0Y2goL2lucHV0fHRleHRhcmVhfHNlbGVjdC9pKSl7cmV0dXJufWlmKHRoaXMuX29Ub3VjaFNjcm9sbGVyKXt0aGlzLl9vVG91Y2hTY3JvbGxlci5kb1RvdWNoU3RhcnQodCxlLnRpbWVTdGFtcCl9aWYodC5sZW5ndGg9PTEpe2UucHJldmVudERlZmF1bHQoKX19O3NhcC51aS5jb3JlLlNjcm9sbEJhci5wcm90b3R5cGUub250b3VjaG1vdmU9ZnVuY3Rpb24oZSl7aWYodGhpcy5fb1RvdWNoU2Nyb2xsZXIpe3RoaXMuX29Ub3VjaFNjcm9sbGVyLmRvVG91Y2hNb3ZlKGUudG91Y2hlcyxlLnRpbWVTdGFtcCxlLnNjYWxlKX19O3NhcC51aS5jb3JlLlNjcm9sbEJhci5wcm90b3R5cGUub250b3VjaGVuZD1mdW5jdGlvbihlKXtpZih0aGlzLl9vVG91Y2hTY3JvbGxlcil7dGhpcy5fb1RvdWNoU2Nyb2xsZXIuZG9Ub3VjaEVuZChlLnRpbWVTdGFtcCl9fTtzYXAudWkuY29yZS5TY3JvbGxCYXIucHJvdG90eXBlLm9udG91Y2hjYW5jZWw9ZnVuY3Rpb24oZSl7aWYodGhpcy5fb1RvdWNoU2Nyb2xsZXIpe3RoaXMuX29Ub3VjaFNjcm9sbGVyLmRvVG91Y2hFbmQoZS50aW1lU3RhbXApfX07c2FwLnVpLmNvcmUuU2Nyb2xsQmFyLnByb3RvdHlwZS5vbnNjcm9sbD1mdW5jdGlvbihlKXtpZih0aGlzLl9iU3VwcHJlc3NTY3JvbGwpe3RoaXMuX2JTdXBwcmVzc1Njcm9sbD1mYWxzZTtlLnByZXZlbnREZWZhdWx0KCk7ZS5zdG9wUHJvcGFnYXRpb24oKTtyZXR1cm4gZmFsc2V9dmFyIHM9bnVsbDtpZih0aGlzLl8kU2Nyb2xsRG9tUmVmKXtpZih0aGlzLmdldFZlcnRpY2FsKCkpe3M9dGhpcy5fJFNjcm9sbERvbVJlZi5zY3JvbGxUb3AoKX1lbHNle3M9dGhpcy5fJFNjcm9sbERvbVJlZi5zY3JvbGxMZWZ0KCk7aWYoISFzYXAudWkuRGV2aWNlLmJyb3dzZXIuZmlyZWZveCYmdGhpcy5fYlJUTCl7cz1NYXRoLmFicyhzKX1lbHNlIGlmKCEhc2FwLnVpLkRldmljZS5icm93c2VyLndlYmtpdCYmdGhpcy5fYlJUTCl7dmFyIFM9dGhpcy5fJFNjcm9sbERvbVJlZi5nZXQoMCk7cz1TLnNjcm9sbFdpZHRoLVMuY2xpZW50V2lkdGgtUy5zY3JvbGxMZWZ0fX19dmFyIGQ9cy10aGlzLl9pT2xkU2Nyb2xsUG9zO3ZhciBmPWQ+MD90cnVlOmZhbHNlO2lmKGQ8MCl7ZD1kKigtMSl9dmFyIGE9c2FwLnVpLmNvcmUuU2Nyb2xsQmFyQWN0aW9uLkRyYWc7aWYoZD09dGhpcy5faUZhY3Rvcil7YT1zYXAudWkuY29yZS5TY3JvbGxCYXJBY3Rpb24uU3RlcH1lbHNlIGlmKGQ9PXRoaXMuX2lGYWN0b3JQYWdlKXthPXNhcC51aS5jb3JlLlNjcm9sbEJhckFjdGlvbi5QYWdlfWVsc2UgaWYodGhpcy5fYk1vdXNlV2hlZWwpe2E9c2FwLnVpLmNvcmUuU2Nyb2xsQmFyQWN0aW9uLk1vdXNlV2hlZWx9dGhpcy5fZG9TY3JvbGwoYSxmKTtlLnByZXZlbnREZWZhdWx0KCk7ZS5zdG9wUHJvcGFnYXRpb24oKTtyZXR1cm4gZmFsc2V9O3NhcC51aS5jb3JlLlNjcm9sbEJhci5wcm90b3R5cGUuX2hhbmRsZVRvdWNoU2Nyb2xsPWZ1bmN0aW9uKGwsdCx6KXtpZih0aGlzLl9iU2tpcFRvdWNoSGFuZGxpbmcpe3JldHVybn12YXIgdj10aGlzLmdldFZlcnRpY2FsKCk/dDpsO2lmKHRoaXMuX2JTdGVwTW9kZSl7dmFyIHA9TWF0aC5tYXgoTWF0aC5yb3VuZCh2L3RoaXMuX2lUb3VjaFN0ZXBUcmVzaG9sZCksMCl9ZWxzZXt2YXIgcD1NYXRoLnJvdW5kKHYpfWlmKHRoaXMuX2lMYXN0VG91Y2hTY3JvbGxlclBvc2l0aW9uIT09cCl7dGhpcy5faUxhc3RUb3VjaFNjcm9sbGVyUG9zaXRpb249cDt0aGlzLnNldENoZWNrZWRTY3JvbGxQb3NpdGlvbihwLHRydWUpO3RoaXMuZmlyZVNjcm9sbCgpfX07c2FwLnVpLmNvcmUuU2Nyb2xsQmFyLnByb3RvdHlwZS51bmJpbmQ9ZnVuY3Rpb24obyl7aWYobyl7dGhpcy5fJE93bmVyRG9tUmVmPWpRdWVyeShvKTtpZih0aGlzLmdldFZlcnRpY2FsKCkpe3RoaXMuXyRPd25lckRvbVJlZi51bmJpbmQoISFzYXAudWkuRGV2aWNlLmJyb3dzZXIuZmlyZWZveD8iRE9NTW91c2VTY3JvbGwiOiJtb3VzZXdoZWVsIix0aGlzLm9ubW91c2V3aGVlbCl9aWYoalF1ZXJ5LnNhcC50b3VjaEV2ZW50TW9kZT09PSJPTiIpe3RoaXMuXyRPd25lckRvbVJlZi51bmJpbmQodGhpcy5fZ2V0VG91Y2hFdmVudFR5cGUoInRvdWNoc3RhcnQiKSxqUXVlcnkucHJveHkodGhpcy5vbnRvdWNoc3RhcnQsdGhpcykpO3RoaXMuXyRPd25lckRvbVJlZi51bmJpbmQodGhpcy5fZ2V0VG91Y2hFdmVudFR5cGUoInRvdWNobW92ZSIpLGpRdWVyeS5wcm94eSh0aGlzLm9udG91Y2htb3ZlLHRoaXMpKTt0aGlzLl8kT3duZXJEb21SZWYudW5iaW5kKHRoaXMuX2dldFRvdWNoRXZlbnRUeXBlKCJ0b3VjaGVuZCIpLGpRdWVyeS5wcm94eSh0aGlzLm9udG91Y2hlbmQsdGhpcykpO3RoaXMuXyRPd25lckRvbVJlZi51bmJpbmQodGhpcy5fZ2V0VG91Y2hFdmVudFR5cGUoInRvdWNoY2FuY2xlIiksalF1ZXJ5LnByb3h5KHRoaXMub250b3VjaGNhbmNsZSx0aGlzKSl9fX07c2FwLnVpLmNvcmUuU2Nyb2xsQmFyLnByb3RvdHlwZS5iaW5kPWZ1bmN0aW9uKG8pe2lmKG8pe3RoaXMuXyRPd25lckRvbVJlZj1qUXVlcnkobyk7aWYodGhpcy5nZXRWZXJ0aWNhbCgpKXt0aGlzLl8kT3duZXJEb21SZWYuYmluZCghIXNhcC51aS5EZXZpY2UuYnJvd3Nlci5maXJlZm94PyJET01Nb3VzZVNjcm9sbCI6Im1vdXNld2hlZWwiLGpRdWVyeS5wcm94eSh0aGlzLm9ubW91c2V3aGVlbCx0aGlzKSl9aWYoalF1ZXJ5LnNhcC50b3VjaEV2ZW50TW9kZT09PSJPTiIpe3RoaXMuXyRPd25lckRvbVJlZi5iaW5kKHRoaXMuX2dldFRvdWNoRXZlbnRUeXBlKCJ0b3VjaHN0YXJ0IiksalF1ZXJ5LnByb3h5KHRoaXMub250b3VjaHN0YXJ0LHRoaXMpKTt0aGlzLl8kT3duZXJEb21SZWYuYmluZCh0aGlzLl9nZXRUb3VjaEV2ZW50VHlwZSgidG91Y2htb3ZlIiksalF1ZXJ5LnByb3h5KHRoaXMub250b3VjaG1vdmUsdGhpcykpO3RoaXMuXyRPd25lckRvbVJlZi5iaW5kKHRoaXMuX2dldFRvdWNoRXZlbnRUeXBlKCJ0b3VjaGVuZCIpLGpRdWVyeS5wcm94eSh0aGlzLm9udG91Y2hlbmQsdGhpcykpO3RoaXMuXyRPd25lckRvbVJlZi5iaW5kKHRoaXMuX2dldFRvdWNoRXZlbnRUeXBlKCJ0b3VjaGNhbmNsZSIpLGpRdWVyeS5wcm94eSh0aGlzLm9udG91Y2hjYW5jbGUsdGhpcykpfX19O3NhcC51aS5jb3JlLlNjcm9sbEJhci5wcm90b3R5cGUuX2dldFRvdWNoRXZlbnRUeXBlPWZ1bmN0aW9uKHQpe3JldHVybiBqUXVlcnkuc2FwLnRvdWNoRXZlbnRNb2RlPT09IlNJTSI/KCJzYXAiK3QpOnR9O3NhcC51aS5jb3JlLlNjcm9sbEJhci5wcm90b3R5cGUucGFnZVVwPWZ1bmN0aW9uKCl7dGhpcy5fZG9TY3JvbGwoc2FwLnVpLmNvcmUuU2Nyb2xsQmFyQWN0aW9uLlBhZ2UsZmFsc2UpfTtzYXAudWkuY29yZS5TY3JvbGxCYXIucHJvdG90eXBlLnBhZ2VEb3duPWZ1bmN0aW9uKCl7dGhpcy5fZG9TY3JvbGwoc2FwLnVpLmNvcmUuU2Nyb2xsQmFyQWN0aW9uLlBhZ2UsdHJ1ZSl9O3NhcC51aS5jb3JlLlNjcm9sbEJhci5wcm90b3R5cGUuc2V0U2Nyb2xsUG9zaXRpb249ZnVuY3Rpb24ocyl7aWYodGhpcy5fJFNjcm9sbERvbVJlZil7dGhpcy5zZXRDaGVja2VkU2Nyb2xsUG9zaXRpb24ocyx0cnVlKX1lbHNle3RoaXMuc2V0UHJvcGVydHkoInNjcm9sbFBvc2l0aW9uIixzKX1yZXR1cm4gdGhpc307c2FwLnVpLmNvcmUuU2Nyb2xsQmFyLnByb3RvdHlwZS5zZXRDaGVja2VkU2Nyb2xsUG9zaXRpb249ZnVuY3Rpb24ocyxjKXt2YXIgQz1NYXRoLm1heChzLDApO2lmKHRoaXMuX2JTdGVwTW9kZT09PXVuZGVmaW5lZCl7dGhpcy5fYlN0ZXBNb2RlPSF0aGlzLmdldENvbnRlbnRTaXplKCl9dmFyIFM9QztpZih0aGlzLl9iU3RlcE1vZGUpe0M9TWF0aC5taW4oQyx0aGlzLmdldFN0ZXBzKCkpO1M9Qyp0aGlzLl9pRmFjdG9yfUM9TWF0aC5mbG9vcihDKTt0aGlzLl9iU3VwcHJlc3NTY3JvbGw9IWM7dGhpcy5zZXRQcm9wZXJ0eSgic2Nyb2xsUG9zaXRpb24iLEMsdHJ1ZSk7aWYodGhpcy5nZXRWZXJ0aWNhbCgpKXt0aGlzLl8kU2Nyb2xsRG9tUmVmLnNjcm9sbFRvcChTKX1lbHNle2lmKCEhc2FwLnVpLkRldmljZS5icm93c2VyLmZpcmVmb3gmJnRoaXMuX2JSVEwpe3RoaXMuXyRTY3JvbGxEb21SZWYuc2Nyb2xsTGVmdCgtUyl9ZWxzZSBpZighIXNhcC51aS5EZXZpY2UuYnJvd3Nlci53ZWJraXQmJnRoaXMuX2JSVEwpe3ZhciBvPXRoaXMuXyRTY3JvbGxEb21SZWYuZ2V0KDApO3RoaXMuXyRTY3JvbGxEb21SZWYuc2Nyb2xsTGVmdChvLnNjcm9sbFdpZHRoLW8uY2xpZW50V2lkdGgtUyl9ZWxzZXt0aGlzLl8kU2Nyb2xsRG9tUmVmLnNjcm9sbExlZnQoUyl9fWlmKGpRdWVyeS5zYXAudG91Y2hFdmVudE1vZGU9PT0iT04iKXt2YXIgdj1DO2lmKHRoaXMuX2JTdGVwTW9kZSl7dj1NYXRoLnJvdW5kKEMqdGhpcy5faVRvdWNoU3RlcFRyZXNob2xkKX10aGlzLl9vVG91Y2hTY3JvbGxlci5fX3Njcm9sbFRvcD10aGlzLmdldFZlcnRpY2FsKCk/djowO3RoaXMuX29Ub3VjaFNjcm9sbGVyLl9fc2Nyb2xsTGVmdD10aGlzLmdldFZlcnRpY2FsKCk/MDp2fX07c2FwLnVpLmNvcmUuU2Nyb2xsQmFyLnByb3RvdHlwZS5zZXRDb250ZW50U2l6ZT1mdW5jdGlvbihjKXt0aGlzLnNldFByb3BlcnR5KCJjb250ZW50U2l6ZSIsYyk7dGhpcy5fYlN0ZXBNb2RlPWZhbHNlO3ZhciBzPXRoaXMuJCgic2JjbnQiKTtpZihzKXtpZih0aGlzLmdldFZlcnRpY2FsKCkpe3MuaGVpZ2h0KGMpfWVsc2V7cy53aWR0aChjKX19cmV0dXJuIHRoaXN9O3NhcC51aS5jb3JlLlNjcm9sbEJhci5wcm90b3R5cGUuX2RvU2Nyb2xsPWZ1bmN0aW9uKGUsZil7dmFyIHM9bnVsbDtpZih0aGlzLl8kU2Nyb2xsRG9tUmVmKXtpZih0aGlzLmdldFZlcnRpY2FsKCkpe3M9dGhpcy5fJFNjcm9sbERvbVJlZi5zY3JvbGxUb3AoKX1lbHNle3M9dGhpcy5fJFNjcm9sbERvbVJlZi5zY3JvbGxMZWZ0KCk7aWYoISFzYXAudWkuRGV2aWNlLmJyb3dzZXIuZmlyZWZveCYmdGhpcy5fYlJUTCl7cz1NYXRoLmFicyhzKX1lbHNlIGlmKCEhc2FwLnVpLkRldmljZS5icm93c2VyLndlYmtpdCYmdGhpcy5fYlJUTCl7dmFyIFM9dGhpcy5fJFNjcm9sbERvbVJlZi5nZXQoMCk7cz1TLnNjcm9sbFdpZHRoLVMuY2xpZW50V2lkdGgtUy5zY3JvbGxMZWZ0fX19aWYodGhpcy5fYlN0ZXBNb2RlKXt2YXIgaT1NYXRoLnJvdW5kKHMvdGhpcy5faUZhY3Rvcik7dmFyIG89dGhpcy5faU9sZFN0ZXA7aWYobyE9PWkpe3RoaXMuc2V0Q2hlY2tlZFNjcm9sbFBvc2l0aW9uKGksZmFsc2UpO2pRdWVyeS5zYXAubG9nLmRlYnVnKCItLS0tLVNURVBNT0RFLS0tLS06IE5ldyBTdGVwOiAiK2krIiAtLS0gT2xkIFN0ZXA6ICIrbysiIC0tLSBTY3JvbGwgUG9zIGluIHB4OiAiK3MrIiAtLS0gQWN0aW9uOiAiK2UrIiAtLS0gRGlyZWN0aW9uIGlzIGZvcndhcmQ6ICIrZik7dGhpcy5maXJlU2Nyb2xsKHthY3Rpb246ZSxmb3J3YXJkOmYsbmV3U2Nyb2xsUG9zOmksb2xkU2Nyb2xsUG9zOm99KTt0aGlzLl9pT2xkU3RlcD1pfX1lbHNle3RoaXMuc2V0UHJvcGVydHkoInNjcm9sbFBvc2l0aW9uIixzLHRydWUpO2pRdWVyeS5zYXAubG9nLmRlYnVnKCItLS0tLVBJWEVMTU9ERS0tLS0tOiBOZXcgU2Nyb2xsUG9zOiAiK3MrIiAtLS0gT2xkIFNjcm9sbFBvczogIit0aGlzLl9pT2xkU2Nyb2xsUG9zKyIgLS0tIEFjdGlvbjogIitlKyIgLS0tIERpcmVjdGlvbiBpcyBmb3J3YXJkOiAiK2YpO3RoaXMuZmlyZVNjcm9sbCh7YWN0aW9uOmUsZm9yd2FyZDpmLG5ld1Njcm9sbFBvczpzLG9sZFNjcm9sbFBvczp0aGlzLl9pT2xkU2Nyb2xsUG9zfSl9dGhpcy5fYlN1cHByZXNzU2Nyb2xsPWZhbHNlO3RoaXMuX2lPbGRTY3JvbGxQb3M9czt0aGlzLl9iTW91c2VXaGVlbD1mYWxzZX07c2FwLnVpLmNvcmUuU2Nyb2xsQmFyLnByb3RvdHlwZS5vblRoZW1lQ2hhbmdlZD1mdW5jdGlvbigpe3RoaXMucmVyZW5kZXIoKX07c2FwLnVpLmNvcmUuU2Nyb2xsQmFyLnByb3RvdHlwZS5nZXROYXRpdmVTY3JvbGxQb3NpdGlvbj1mdW5jdGlvbigpe2lmKHRoaXMuXyRTY3JvbGxEb21SZWYpe2lmKHRoaXMuZ2V0VmVydGljYWwoKSl7cmV0dXJuIHRoaXMuXyRTY3JvbGxEb21SZWYuc2Nyb2xsVG9wKCl9ZWxzZXtyZXR1cm4gdGhpcy5fJFNjcm9sbERvbVJlZi5zY3JvbGxMZWZ0KCl9fXJldHVybiAwfTtzYXAudWkuY29yZS5TY3JvbGxCYXIucHJvdG90eXBlLnNldE5hdGl2ZVNjcm9sbFBvc2l0aW9uPWZ1bmN0aW9uKG4pe2lmKHRoaXMuXyRTY3JvbGxEb21SZWYpe2lmKHRoaXMuZ2V0VmVydGljYWwoKSl7dGhpcy5fJFNjcm9sbERvbVJlZi5zY3JvbGxUb3Aobil9ZWxzZXt0aGlzLl8kU2Nyb2xsRG9tUmVmLnNjcm9sbExlZnQobil9fX07cmV0dXJuIHNhcC51aS5jb3JlLlNjcm9sbEJhcn0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLlNlcGFyYXRvckl0ZW0nKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS5TZXBhcmF0b3JJdGVtJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvU2VwYXJhdG9ySXRlbSIsWycuL2xpYnJhcnknLCcuL0l0ZW0nXSxmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0IjtzYXAudWkuY29yZS5JdGVtLmV4dGVuZCgic2FwLnVpLmNvcmUuU2VwYXJhdG9ySXRlbSIse21ldGFkYXRhOntsaWJyYXJ5OiJzYXAudWkuY29yZSJ9fSk7cmV0dXJuIHNhcC51aS5jb3JlLlNlcGFyYXRvckl0ZW19LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS5UaXRsZScpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLlRpdGxlJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvVGl0bGUiLFsnLi9saWJyYXJ5JywnLi9FbGVtZW50J10sZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7c2FwLnVpLmNvcmUuRWxlbWVudC5leHRlbmQoInNhcC51aS5jb3JlLlRpdGxlIix7bWV0YWRhdGE6e2xpYnJhcnk6InNhcC51aS5jb3JlIixwcm9wZXJ0aWVzOnsidGV4dCI6e3R5cGU6InN0cmluZyIsZ3JvdXA6IkFwcGVhcmFuY2UiLGRlZmF1bHRWYWx1ZTpudWxsfSwiaWNvbiI6e3R5cGU6InNhcC51aS5jb3JlLlVSSSIsZ3JvdXA6IkFwcGVhcmFuY2UiLGRlZmF1bHRWYWx1ZTpudWxsfSwibGV2ZWwiOnt0eXBlOiJzYXAudWkuY29yZS5UaXRsZUxldmVsIixncm91cDoiQXBwZWFyYW5jZSIsZGVmYXVsdFZhbHVlOnNhcC51aS5jb3JlLlRpdGxlTGV2ZWwuQXV0b30sImVtcGhhc2l6ZWQiOnt0eXBlOiJib29sZWFuIixncm91cDoiQXBwZWFyYW5jZSIsZGVmYXVsdFZhbHVlOmZhbHNlfX19fSk7cmV0dXJuIHNhcC51aS5jb3JlLlRpdGxlfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUuVG9vbHRpcEJhc2UnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS5Ub29sdGlwQmFzZScpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL1Rvb2x0aXBCYXNlIixbJy4vbGlicmFyeScsJy4vQ29udHJvbCcsJy4vUG9wdXAnXSxmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0IjtzYXAudWkuY29yZS5Db250cm9sLmV4dGVuZCgic2FwLnVpLmNvcmUuVG9vbHRpcEJhc2UiLHttZXRhZGF0YTp7ImFic3RyYWN0Ijp0cnVlLGxpYnJhcnk6InNhcC51aS5jb3JlIixwcm9wZXJ0aWVzOnsidGV4dCI6e3R5cGU6InN0cmluZyIsZ3JvdXA6Ik1pc2MiLGRlZmF1bHRWYWx1ZToiIn0sIm9wZW5EdXJhdGlvbiI6e3R5cGU6ImludCIsZ3JvdXA6IkJlaGF2aW9yIixkZWZhdWx0VmFsdWU6MjAwfSwiY2xvc2VEdXJhdGlvbiI6e3R5cGU6ImludCIsZ3JvdXA6IkJlaGF2aW9yIixkZWZhdWx0VmFsdWU6MjAwfSwibXlQb3NpdGlvbiI6e3R5cGU6InNhcC51aS5jb3JlLkRvY2siLGdyb3VwOiJCZWhhdmlvciIsZGVmYXVsdFZhbHVlOidiZWdpbiB0b3AnfSwiYXRQb3NpdGlvbiI6e3R5cGU6InNhcC51aS5jb3JlLkRvY2siLGdyb3VwOiJCZWhhdmlvciIsZGVmYXVsdFZhbHVlOidiZWdpbiBib3R0b20nfSwib2Zmc2V0Ijp7dHlwZToic3RyaW5nIixncm91cDoiQmVoYXZpb3IiLGRlZmF1bHRWYWx1ZTonMTAgMyd9LCJjb2xsaXNpb24iOnt0eXBlOiJzYXAudWkuY29yZS5Db2xsaXNpb24iLGdyb3VwOiJCZWhhdmlvciIsZGVmYXVsdFZhbHVlOidmbGlwJ30sIm9wZW5EZWxheSI6e3R5cGU6ImludCIsZ3JvdXA6Ik1pc2MiLGRlZmF1bHRWYWx1ZTo1MDB9LCJjbG9zZURlbGF5Ijp7dHlwZToiaW50Iixncm91cDoiTWlzYyIsZGVmYXVsdFZhbHVlOjEwMH19LGV2ZW50czp7ImNsb3NlZCI6e319fX0pO3NhcC51aS5jb3JlLlRvb2x0aXBCYXNlLk1fRVZFTlRTPXsnY2xvc2VkJzonY2xvc2VkJ307c2FwLnVpLmNvcmUuVG9vbHRpcEJhc2UucHJvdG90eXBlLl9nZXRQb3B1cD1qUXVlcnkuc2FwLmdldHRlcigoZnVuY3Rpb24oKXt2YXIgcD1uZXcgc2FwLnVpLmNvcmUuUG9wdXAoKTtwLnNldFNoYWRvdyh0cnVlKTtyZXR1cm4gcH0oKSkpO3NhcC51aS5jb3JlLlRvb2x0aXBCYXNlLnByb3RvdHlwZS5vbmZvY3VzaW49ZnVuY3Rpb24oZSl7dmFyIHM9alF1ZXJ5KGUudGFyZ2V0KS5jb250cm9sKDApO2lmKHMhPW51bGwpe3ZhciBkPXMuZ2V0Rm9jdXNEb21SZWYoKTt0aGlzLnNTdG9yZWRUb29sdGlwPW51bGw7aWYoZC50aXRsZSYmZC50aXRsZSE9IiIpe3RoaXMuc1N0b3JlZFRvb2x0aXA9ZC50aXRsZTtkLnRpdGxlPSIifXZhciBwPXRoaXMuX2dldFBvcHVwKCk7aWYoIShwLmlzT3BlbigpJiZwLmdldENvbnRlbnQoKT09dGhpcykpe3NhcC51aS5nZXRDb3JlKCkuZ2V0UmVuZGVyTWFuYWdlcigpLnJlbmRlcih0aGlzLHNhcC51aS5nZXRDb3JlKCkuZ2V0U3RhdGljQXJlYVJlZigpLHRydWUpfXZhciB2PWQuZ2V0QXR0cmlidXRlKCJhcmlhLWRlc2NyaWJlZGJ5Iik7dmFyIGk9dGhpcy5nZXRJZCgpKyItdGl0bGUgIit0aGlzLmdldElkKCkrIi10eHQiO2lmKHY9PW51bGx8fHY9PSIiKXtkLnNldEF0dHJpYnV0ZSgiYXJpYS1kZXNjcmliZWRieSIsaSl9ZWxzZSBpZih2LmluZGV4T2YoaSk9PS0xKXtkLnNldEF0dHJpYnV0ZSgiYXJpYS1kZXNjcmliZWRieSIsdisiICIraSl9fX07c2FwLnVpLmNvcmUuVG9vbHRpcEJhc2UucHJvdG90eXBlLm9uZm9jdXNvdXQ9ZnVuY3Rpb24oZSl7dmFyIHM9alF1ZXJ5KGUudGFyZ2V0KS5jb250cm9sKDApO2lmKHMhPW51bGwpe3ZhciBkPXMuZ2V0Rm9jdXNEb21SZWYoKTtpZih0aGlzLnNTdG9yZWRUb29sdGlwKXtkLnRpdGxlPXRoaXMuc1N0b3JlZFRvb2x0aXB9dmFyIHY9ZC5nZXRBdHRyaWJ1dGUoImFyaWEtZGVzY3JpYmVkYnkiKTt2YXIgaT10aGlzLmdldElkKCkrIi10aXRsZSAiK3RoaXMuZ2V0SWQoKSsiLXR4dCI7aWYodiYmdi5pbmRleE9mKGkpPj0wKXtpZihqUXVlcnkudHJpbSh2KT09aSl7ZC5yZW1vdmVBdHRyaWJ1dGUoImFyaWEtZGVzY3JpYmVkYnkiKX1lbHNle3Y9di5yZXBsYWNlKGksIiIpO2Quc2V0QXR0cmlidXRlKCJhcmlhLWRlc2NyaWJlZGJ5Iix2KX19fWlmKHNhcC51aS5jb3JlLlRvb2x0aXBCYXNlLnNPcGVuVGltZW91dCl7alF1ZXJ5LnNhcC5jbGVhckRlbGF5ZWRDYWxsKHNhcC51aS5jb3JlLlRvb2x0aXBCYXNlLnNPcGVuVGltZW91dCk7c2FwLnVpLmNvcmUuVG9vbHRpcEJhc2Uuc09wZW5UaW1lb3V0PXVuZGVmaW5lZH10aGlzLnNDbG9zZU5vd1RpbWVvdXQ9alF1ZXJ5LnNhcC5kZWxheWVkQ2FsbCh0aGlzLmdldENsb3NlRGVsYXkoKSx0aGlzLCJjbG9zZVBvcHVwIil9O3NhcC51aS5jb3JlLlRvb2x0aXBCYXNlLnByb3RvdHlwZS5pc1N0YW5kYXJkVG9vbHRpcD1mdW5jdGlvbih0KXtyZXR1cm4odHlwZW9mIHQ9PT0ic3RyaW5nIiYmKGpRdWVyeS50cmltKHQpKSE9PSIiKX07c2FwLnVpLmNvcmUuVG9vbHRpcEJhc2UucHJvdG90eXBlLm9ubW91c2VvdmVyPWZ1bmN0aW9uKGUpe3ZhciBFPWpRdWVyeShlLnRhcmdldCkuY29udHJvbCgwKTtpZihFIT1udWxsKXtpZihFPT09dGhpcyl7aWYodGhpcy5zQ2xvc2VOb3dUaW1lb3V0KXtqUXVlcnkuc2FwLmNsZWFyRGVsYXllZENhbGwodGhpcy5zQ2xvc2VOb3dUaW1lb3V0KTt0aGlzLnNDbG9zZU5vd1RpbWVvdXQ9bnVsbH1lLnN0b3BQcm9wYWdhdGlvbigpO2UucHJldmVudERlZmF1bHQoKTtyZXR1cm59dmFyIGM9alF1ZXJ5KGUuY3VycmVudFRhcmdldCkuY29udHJvbCgwKTtpZihjIT09RSYmIXRoaXMuaXNTdGFuZGFyZFRvb2x0aXAoRS5nZXRUb29sdGlwKCkpKXtpZih0aGlzLnNDbG9zZU5vd1RpbWVvdXQpe2pRdWVyeS5zYXAuY2xlYXJEZWxheWVkQ2FsbCh0aGlzLnNDbG9zZU5vd1RpbWVvdXQpO3RoaXMuc0Nsb3NlTm93VGltZW91dD1udWxsO2Uuc3RvcFByb3BhZ2F0aW9uKCk7ZS5wcmV2ZW50RGVmYXVsdCgpO3JldHVybn19dmFyIGw9alF1ZXJ5KGUucmVsYXRlZFRhcmdldCkuY29udHJvbCgwKTtpZihsKXtpZihsLmdldFBhcmVudCgpKXtpZihsLmdldFBhcmVudCgpPT09YyYmYz09PUUpe3ZhciBMPWwuZ2V0VG9vbHRpcCgpO2lmKCF0aGlzLmlzU3RhbmRhcmRUb29sdGlwKEwpJiYoIUx8fCEoTCBpbnN0YW5jZW9mIHNhcC51aS5jb3JlLlRvb2x0aXBCYXNlKSkpe2lmKHRoaXMuc0Nsb3NlTm93VGltZW91dCl7alF1ZXJ5LnNhcC5jbGVhckRlbGF5ZWRDYWxsKHRoaXMuc0Nsb3NlTm93VGltZW91dCk7dGhpcy5zQ2xvc2VOb3dUaW1lb3V0PW51bGw7ZS5zdG9wUHJvcGFnYXRpb24oKTtlLnByZXZlbnREZWZhdWx0KCk7cmV0dXJufX19fX1pZih0aGlzLl9jdXJyZW50Q29udHJvbD09PUV8fCF0aGlzLmlzU3RhbmRhcmRUb29sdGlwKEUuZ2V0VG9vbHRpcCgpKSl7dGhpcy5yZW1vdmVTdGFuZGFyZFRvb2x0aXBzKEUpO2lmKHNhcC51aS5jb3JlLlRvb2x0aXBCYXNlLnNPcGVuVGltZW91dCl7alF1ZXJ5LnNhcC5jbGVhckRlbGF5ZWRDYWxsKHNhcC51aS5jb3JlLlRvb2x0aXBCYXNlLnNPcGVuVGltZW91dCl9c2FwLnVpLmNvcmUuVG9vbHRpcEJhc2Uuc09wZW5UaW1lb3V0PWpRdWVyeS5zYXAuZGVsYXllZENhbGwodGhpcy5nZXRPcGVuRGVsYXkoKSx0aGlzLCJvcGVuUG9wdXAiLFt0aGlzLl9jdXJyZW50Q29udHJvbF0pO2Uuc3RvcFByb3BhZ2F0aW9uKCk7ZS5wcmV2ZW50RGVmYXVsdCgpfX19O3NhcC51aS5jb3JlLlRvb2x0aXBCYXNlLnByb3RvdHlwZS5vbm1vdXNlb3V0PWZ1bmN0aW9uKGUpe2lmKHNhcC51aS5jb3JlLlRvb2x0aXBCYXNlLnNPcGVuVGltZW91dCl7alF1ZXJ5LnNhcC5jbGVhckRlbGF5ZWRDYWxsKHNhcC51aS5jb3JlLlRvb2x0aXBCYXNlLnNPcGVuVGltZW91dCk7c2FwLnVpLmNvcmUuVG9vbHRpcEJhc2Uuc09wZW5UaW1lb3V0PXVuZGVmaW5lZH1pZighdGhpcy5zQ2xvc2VOb3dUaW1lb3V0KXt0aGlzLnNDbG9zZU5vd1RpbWVvdXQ9alF1ZXJ5LnNhcC5kZWxheWVkQ2FsbCh0aGlzLmdldENsb3NlRGVsYXkoKSx0aGlzLCJjbG9zZVBvcHVwIil9dGhpcy5yZXN0b3JlU3RhbmRhcmRUb29sdGlwcygpO2Uuc3RvcFByb3BhZ2F0aW9uKCk7ZS5wcmV2ZW50RGVmYXVsdCgpfTtzYXAudWkuY29yZS5Ub29sdGlwQmFzZS5wcm90b3R5cGUuY2xvc2VQb3B1cD1mdW5jdGlvbigpe3ZhciBwPXRoaXMuX2dldFBvcHVwKCk7aWYodGhpcy5zQ2xvc2VOb3dUaW1lb3V0KXtqUXVlcnkuc2FwLmNsZWFyRGVsYXllZENhbGwodGhpcy5zQ2xvc2VOb3dUaW1lb3V0KX10aGlzLnNDbG9zZU5vd1RpbWVvdXQ9dW5kZWZpbmVkO3AuYXR0YWNoQ2xvc2VkKHRoaXMuaGFuZGxlQ2xvc2VkLHRoaXMpO3AuY2xvc2UoKTt0aGlzLnJlc3RvcmVTdGFuZGFyZFRvb2x0aXBzKCl9O3NhcC51aS5jb3JlLlRvb2x0aXBCYXNlLnByb3RvdHlwZS5oYW5kbGVDbG9zZWQ9ZnVuY3Rpb24oKXt0aGlzLl9nZXRQb3B1cCgpLmRldGFjaENsb3NlZChqUXVlcnkucHJveHkodGhpcy5oYW5kbGVDbG9zZWQsdGhpcykpO3RoaXMuZmlyZUNsb3NlZCgpfTtzYXAudWkuY29yZS5Ub29sdGlwQmFzZS5wcm90b3R5cGUub3BlblBvcHVwPWZ1bmN0aW9uKHMpe2lmKHMuZ2V0VG9vbHRpcCgpIT1udWxsKXtpZih0aGlzLnNDbG9zZU5vd1RpbWVvdXQpe2pRdWVyeS5zYXAuY2xlYXJEZWxheWVkQ2FsbCh0aGlzLnNDbG9zZU5vd1RpbWVvdXQpO3RoaXMuc0Nsb3NlTm93VGltZW91dD1udWxsO3JldHVybn12YXIgcD10aGlzLl9nZXRQb3B1cCgpO2lmKHAuaXNPcGVuKCkmJnAuZ2V0Q29udGVudCgpPT10aGlzKXtyZXR1cm59c2FwLnVpLmdldENvcmUoKS5nZXRSZW5kZXJNYW5hZ2VyKCkucmVuZGVyKHRoaXMsc2FwLnVpLmdldENvcmUoKS5nZXRTdGF0aWNBcmVhUmVmKCksdHJ1ZSk7dmFyIGQ9cy5nZXREb21SZWYoKTtwLnNldENvbnRlbnQodGhpcyk7cC5zZXRQb3NpdGlvbih0aGlzLmdldE15UG9zaXRpb24oKSx0aGlzLmdldEF0UG9zaXRpb24oKSxkLHRoaXMuZ2V0T2Zmc2V0KCksdGhpcy5nZXRDb2xsaXNpb24oKSk7cC5zZXREdXJhdGlvbnModGhpcy5nZXRPcGVuRHVyYXRpb24oKSx0aGlzLmdldENsb3NlRHVyYXRpb24oKSk7cC5vcGVuKCk7dGhpcy5yZW1vdmVTdGFuZGFyZFRvb2x0aXBzKHRoaXMuX2N1cnJlbnRDb250cm9sKX19O3NhcC51aS5jb3JlLlRvb2x0aXBCYXNlLnByb3RvdHlwZS5yZW1vdmVTdGFuZGFyZFRvb2x0aXBzPWZ1bmN0aW9uKCl7dmFyIGQ9dGhpcy5fY3VycmVudENvbnRyb2wuZ2V0RG9tUmVmKCk7aWYoIXRoaXMuYVN0b3JlZFRvb2x0aXBzKXt0aGlzLmFTdG9yZWRUb29sdGlwcz1bXX1lbHNle3JldHVybn12YXIgdD0iIjt3aGlsZShkJiYhKGQ9PT1kb2N1bWVudCkpe3Q9ZC50aXRsZTtpZih0KXt0aGlzLmFTdG9yZWRUb29sdGlwcy5wdXNoKHtkb21yZWY6ZCx0b29sdGlwOnR9KTtkLnRpdGxlPSIifWQ9ZC5wYXJlbnROb2RlfWlmKHRoaXMuX2N1cnJlbnRDb250cm9sLmdldFRvb2x0aXBEb21SZWZzKXt2YXIgRD10aGlzLl9jdXJyZW50Q29udHJvbC5nZXRUb29sdGlwRG9tUmVmcygpO2Zvcih2YXIgaT0wO2k8RC5sZW5ndGg7aSsrKXtkPURbaV07aWYoZCl7dD1kLnRpdGxlO2lmKHQpe3RoaXMuYVN0b3JlZFRvb2x0aXBzLnB1c2goe2RvbXJlZjpkLHRvb2x0aXA6dH0pO2QudGl0bGU9IiJ9fX19fTtzYXAudWkuY29yZS5Ub29sdGlwQmFzZS5wcm90b3R5cGUucmVzdG9yZVN0YW5kYXJkVG9vbHRpcHM9ZnVuY3Rpb24oKXt2YXIgcD10aGlzLl9nZXRQb3B1cCgpO3ZhciBlPXAuZ2V0T3BlblN0YXRlKCk7aWYoZT09PXNhcC51aS5jb3JlLk9wZW5TdGF0ZS5PUEVOfHxlPT09c2FwLnVpLmNvcmUuT3BlblN0YXRlLk9QRU5JTkcpe3JldHVybn1pZihzYXAudWkuY29yZS5Ub29sdGlwQmFzZS5zT3BlblRpbWVvdXQpe3JldHVybn1pZih0aGlzLmFTdG9yZWRUb29sdGlwcyl7Zm9yKHZhciBpPTA7aTx0aGlzLmFTdG9yZWRUb29sdGlwcy5sZW5ndGg7aSsrKXt2YXIgZD10aGlzLmFTdG9yZWRUb29sdGlwc1tpXS5kb21yZWY7ZC50aXRsZT10aGlzLmFTdG9yZWRUb29sdGlwc1tpXS50b29sdGlwfX10aGlzLmFTdG9yZWRUb29sdGlwcz1udWxsfTtzYXAudWkuY29yZS5Ub29sdGlwQmFzZS5wcm90b3R5cGUuX3NldFBhcmVudD1zYXAudWkuY29yZS5Ub29sdGlwQmFzZS5wcm90b3R5cGUuc2V0UGFyZW50O3NhcC51aS5jb3JlLlRvb2x0aXBCYXNlLnByb3RvdHlwZS5zZXRQYXJlbnQ9ZnVuY3Rpb24ocCxhKXt2YXIgXz10aGlzLl9nZXRQb3B1cCgpO2lmKF8mJl8uaXNPcGVuKCkpe3RoaXMuY2xvc2VQb3B1cCgpfXRoaXMuX3NldFBhcmVudC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9O3NhcC51aS5jb3JlLlRvb2x0aXBCYXNlLnByb3RvdHlwZS5vbmtleWRvd249ZnVuY3Rpb24oZSl7aWYoZS5jdHJsS2V5JiZlLndoaWNoPT1qUXVlcnkuc2FwLktleUNvZGVzLkkpe3ZhciBFPWpRdWVyeShlLnRhcmdldCkuY29udHJvbCgwKTtpZihFIT1udWxsKXtpZih0aGlzLl9jdXJyZW50Q29udHJvbD09PUV8fCF0aGlzLmlzU3RhbmRhcmRUb29sdGlwKEUuZ2V0VG9vbHRpcCgpKSl7dGhpcy5yZW1vdmVTdGFuZGFyZFRvb2x0aXBzKEUpO3RoaXMub3BlblBvcHVwKHRoaXMuX2N1cnJlbnRDb250cm9sKTtlLnByZXZlbnREZWZhdWx0KCk7ZS5zdG9wUHJvcGFnYXRpb24oKX19fWVsc2UgaWYoZS53aGljaD09alF1ZXJ5LnNhcC5LZXlDb2Rlcy5FU0NBUEUpe2lmKHNhcC51aS5jb3JlLlRvb2x0aXBCYXNlLnNPcGVuVGltZW91dCl7alF1ZXJ5LnNhcC5jbGVhckRlbGF5ZWRDYWxsKHNhcC51aS5jb3JlLlRvb2x0aXBCYXNlLnNPcGVuVGltZW91dCk7c2FwLnVpLmNvcmUuVG9vbHRpcEJhc2Uuc09wZW5UaW1lb3V0PXVuZGVmaW5lZH12YXIgdz10aGlzLm9Qb3B1cCYmdGhpcy5vUG9wdXAuaXNPcGVuKCk7dGhpcy5jbG9zZVBvcHVwKCk7aWYodyl7ZS5wcmV2ZW50RGVmYXVsdCgpO2Uuc3RvcFByb3BhZ2F0aW9uKCl9fX07c2FwLnVpLmNvcmUuVG9vbHRpcEJhc2UucHJvdG90eXBlLl9jbG9zZU9yUHJldmVudE9wZW49ZnVuY3Rpb24oKXt2YXIgcD10aGlzLl9nZXRQb3B1cCgpO2lmKHAuaXNPcGVuKCkpe3RoaXMuY2xvc2VQb3B1cCgpfWVsc2UgaWYoc2FwLnVpLmNvcmUuVG9vbHRpcEJhc2Uuc09wZW5UaW1lb3V0KXtqUXVlcnkuc2FwLmNsZWFyRGVsYXllZENhbGwoc2FwLnVpLmNvcmUuVG9vbHRpcEJhc2Uuc09wZW5UaW1lb3V0KTtzYXAudWkuY29yZS5Ub29sdGlwQmFzZS5zT3BlblRpbWVvdXQ9dW5kZWZpbmVkfX07cmV0dXJuIHNhcC51aS5jb3JlLlRvb2x0aXBCYXNlfSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUuVmFyaWFudExheW91dERhdGEnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS5WYXJpYW50TGF5b3V0RGF0YScpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL1ZhcmlhbnRMYXlvdXREYXRhIixbJy4vbGlicmFyeScsJy4vTGF5b3V0RGF0YSddLGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO3NhcC51aS5jb3JlLkxheW91dERhdGEuZXh0ZW5kKCJzYXAudWkuY29yZS5WYXJpYW50TGF5b3V0RGF0YSIse21ldGFkYXRhOntsaWJyYXJ5OiJzYXAudWkuY29yZSIsYWdncmVnYXRpb25zOnsibXVsdGlwbGVMYXlvdXREYXRhIjp7dHlwZToic2FwLnVpLmNvcmUuTGF5b3V0RGF0YSIsbXVsdGlwbGU6dHJ1ZSxzaW5ndWxhck5hbWU6Im11bHRpcGxlTGF5b3V0RGF0YSJ9fX19KTtyZXR1cm4gc2FwLnVpLmNvcmUuVmFyaWFudExheW91dERhdGF9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS5tdmMuVmlldycpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLm12Yy5WaWV3Jyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvbXZjL1ZpZXciLFsnc2FwL3VpL2NvcmUvbGlicmFyeScsJ3NhcC91aS9jb3JlL0NvbnRyb2wnXSxmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0IjtzYXAudWkuY29yZS5Db250cm9sLmV4dGVuZCgic2FwLnVpLmNvcmUubXZjLlZpZXciLHttZXRhZGF0YTp7cHVibGljTWV0aG9kczpbImdldENvbnRyb2xsZXIiXSxsaWJyYXJ5OiJzYXAudWkuY29yZSIscHJvcGVydGllczp7IndpZHRoIjp7dHlwZToic2FwLnVpLmNvcmUuQ1NTU2l6ZSIsZ3JvdXA6IkRpbWVuc2lvbiIsZGVmYXVsdFZhbHVlOicxMDAlJ30sImhlaWdodCI6e3R5cGU6InNhcC51aS5jb3JlLkNTU1NpemUiLGdyb3VwOiJEaW1lbnNpb24iLGRlZmF1bHRWYWx1ZTpudWxsfSwidmlld05hbWUiOnt0eXBlOiJzdHJpbmciLGdyb3VwOiJNaXNjIixkZWZhdWx0VmFsdWU6bnVsbH0sImRpc3BsYXlCbG9jayI6e3R5cGU6ImJvb2xlYW4iLGdyb3VwOiJBcHBlYXJhbmNlIixkZWZhdWx0VmFsdWU6ZmFsc2V9fSxhZ2dyZWdhdGlvbnM6eyJjb250ZW50Ijp7dHlwZToic2FwLnVpLmNvcmUuQ29udHJvbCIsbXVsdGlwbGU6dHJ1ZSxzaW5ndWxhck5hbWU6ImNvbnRlbnQifX0sZXZlbnRzOnsiYWZ0ZXJJbml0Ijp7fSwiYmVmb3JlRXhpdCI6e30sImFmdGVyUmVuZGVyaW5nIjp7fSwiYmVmb3JlUmVuZGVyaW5nIjp7fX19fSk7c2FwLnVpLmNvcmUubXZjLlZpZXcuTV9FVkVOVFM9eydhZnRlckluaXQnOidhZnRlckluaXQnLCdiZWZvcmVFeGl0JzonYmVmb3JlRXhpdCcsJ2FmdGVyUmVuZGVyaW5nJzonYWZ0ZXJSZW5kZXJpbmcnLCdiZWZvcmVSZW5kZXJpbmcnOidiZWZvcmVSZW5kZXJpbmcnfTsoZnVuY3Rpb24oKXtzYXAudWkuY29yZS5tdmMuVmlldy5wcm90b3R5cGUuX2luaXRDb21wb3NpdGVTdXBwb3J0PWZ1bmN0aW9uKHMpe3RoaXMub1ZpZXdEYXRhPXMudmlld0RhdGE7dGhpcy5zVmlld05hbWU9cy52aWV3TmFtZTtpZih0aGlzLmluaXRWaWV3U2V0dGluZ3Mpe3RoaXMuaW5pdFZpZXdTZXR0aW5ncyhzKX1jKHRoaXMscyk7aWYodGhpcy5vbkNvbnRyb2xsZXJDb25uZWN0ZWQpe3RoaXMub25Db250cm9sbGVyQ29ubmVjdGVkKHRoaXMub0NvbnRyb2xsZXIpfXRoaXMuZmlyZUFmdGVySW5pdCgpfTtzYXAudWkuY29yZS5tdmMuVmlldy5wcm90b3R5cGUuZ2V0Q29udHJvbGxlcj1mdW5jdGlvbigpe3JldHVybiB0aGlzLm9Db250cm9sbGVyfTtzYXAudWkuY29yZS5tdmMuVmlldy5wcm90b3R5cGUuYnlJZD1mdW5jdGlvbihpKXtyZXR1cm4gc2FwLnVpLmdldENvcmUoKS5ieUlkKHRoaXMuY3JlYXRlSWQoaSkpfTtzYXAudWkuY29yZS5tdmMuVmlldy5wcm90b3R5cGUuY3JlYXRlSWQ9ZnVuY3Rpb24oaSl7aWYoIXRoaXMuaXNQcmVmaXhlZElkKGkpKXtpPXRoaXMuZ2V0SWQoKSsiLS0iK2l9cmV0dXJuIGl9O3NhcC51aS5jb3JlLm12Yy5WaWV3LnByb3RvdHlwZS5pc1ByZWZpeGVkSWQ9ZnVuY3Rpb24oaSl7cmV0dXJuKGkmJmkuaW5kZXhPZih0aGlzLmdldElkKCkrIi0tIik9PT0wKX07dmFyIGM9ZnVuY3Rpb24odCxzKXt2YXIgQz1zLmNvbnRyb2xsZXI7aWYoIUMmJnQuZ2V0Q29udHJvbGxlck5hbWUpe3ZhciBkPXQuZ2V0Q29udHJvbGxlck5hbWUoKTtpZihkKXtDPXNhcC51aS5jb250cm9sbGVyKGQpfX1pZihzYXAudWkuZ2V0Q29yZSgpLmdldENvbmZpZ3VyYXRpb24oKS5nZXREZXNpZ25Nb2RlKCkmJiFzYXAudWkuZ2V0Q29yZSgpLmdldENvbmZpZ3VyYXRpb24oKS5nZXRTdXBwcmVzc0RlYWN0aXZhdGlvbk9mQ29udHJvbGxlckNvZGUoKSl7Zm9yKHZhciBtIGluIEMpe2lmKHR5cGVvZiBDW21dPT09ImZ1bmN0aW9uIiYmIXNhcC51aS5jb3JlLm12Yy5Db250cm9sbGVyLnByb3RvdHlwZVttXSl7Q1ttXT1mdW5jdGlvbigpe319fX1pZihDKXt0Lm9Db250cm9sbGVyPUM7Qy5jb25uZWN0VG9WaWV3KHQpfX07c2FwLnVpLmNvcmUubXZjLlZpZXcucHJvdG90eXBlLmdldFZpZXdEYXRhPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub1ZpZXdEYXRhfTtzYXAudWkuY29yZS5tdmMuVmlldy5wcm90b3R5cGUuZXhpdD1mdW5jdGlvbigpe3RoaXMuZmlyZUJlZm9yZUV4aXQoKTt0aGlzLm9Db250cm9sbGVyPW51bGx9O3NhcC51aS5jb3JlLm12Yy5WaWV3LnByb3RvdHlwZS5vbkFmdGVyUmVuZGVyaW5nPWZ1bmN0aW9uKCl7dGhpcy5maXJlQWZ0ZXJSZW5kZXJpbmcoKX07c2FwLnVpLmNvcmUubXZjLlZpZXcucHJvdG90eXBlLm9uQmVmb3JlUmVuZGVyaW5nPWZ1bmN0aW9uKCl7dGhpcy5maXJlQmVmb3JlUmVuZGVyaW5nKCl9O3NhcC51aS5jb3JlLm12Yy5WaWV3LnByb3RvdHlwZS5jbG9uZT1mdW5jdGlvbihpLGwpe3ZhciBzPXt9LGssQztmb3IoayBpbiB0aGlzLm1Qcm9wZXJ0aWVzJiYhKHRoaXMuaXNCb3VuZCYmdGhpcy5pc0JvdW5kKGspKSl7aWYodGhpcy5tUHJvcGVydGllcy5oYXNPd25Qcm9wZXJ0eShrKSl7c1trXT10aGlzLm1Qcm9wZXJ0aWVzW2tdfX1DPXNhcC51aS5jb3JlLkNvbnRyb2wucHJvdG90eXBlLmNsb25lLmNhbGwodGhpcyxpLGwse2Nsb25lQ2hpbGRyZW46ZmFsc2UsY2xvbmVCaW5kaW5nczp0cnVlfSk7Qy5hcHBseVNldHRpbmdzKHMpO3JldHVybiBDfTtzYXAudWkudmlldz1mdW5jdGlvbihpLHYsdCl7dmFyIGE9bnVsbCxWPXt9O2lmKHR5cGVvZiBpPT09Im9iamVjdCJ8fHR5cGVvZiBpPT09InN0cmluZyImJnY9PT11bmRlZmluZWQpe3Y9aTtpPXVuZGVmaW5lZH1pZih2KXtpZih0eXBlb2Ygdj09PSJzdHJpbmciKXtWLnZpZXdOYW1lPXZ9ZWxzZXtWPXZ9fWlmKGkpe1YuaWQ9aX1pZih0KXtWLnR5cGU9dH1pZihzYXAudWkuY29yZS5DdXN0b21pemluZ0NvbmZpZ3VyYXRpb24pe3ZhciBiPXNhcC51aS5jb3JlLkN1c3RvbWl6aW5nQ29uZmlndXJhdGlvbi5nZXRWaWV3UmVwbGFjZW1lbnQoVi52aWV3TmFtZSk7aWYoYil7alF1ZXJ5LnNhcC5sb2cuaW5mbygiQ3VzdG9taXppbmc6IFZpZXcgcmVwbGFjZW1lbnQgZm9yIHZpZXcgJyIrVi52aWV3TmFtZSsiJyBmb3VuZCBhbmQgYXBwbGllZDogIitiLnZpZXdOYW1lKyIgKHR5cGU6ICIrYi50eXBlKyIpIik7alF1ZXJ5LmV4dGVuZChWLGIpfWVsc2V7alF1ZXJ5LnNhcC5sb2cuZGVidWcoIkN1c3RvbWl6aW5nOiBubyBWaWV3IHJlcGxhY2VtZW50IGZvdW5kIGZvciB2aWV3ICciK1Yudmlld05hbWUrIicuIil9fWlmKCFWLnR5cGUpe3Rocm93IG5ldyBFcnJvcigiTm8gdmlldyB0eXBlIHNwZWNpZmllZC4iKX1lbHNlIGlmKFYudHlwZT09PXNhcC51aS5jb3JlLm12Yy5WaWV3VHlwZS5KUyl7YT1uZXcgc2FwLnVpLmNvcmUubXZjLkpTVmlldyhWKX1lbHNlIGlmKFYudHlwZT09PXNhcC51aS5jb3JlLm12Yy5WaWV3VHlwZS5KU09OKXthPW5ldyBzYXAudWkuY29yZS5tdmMuSlNPTlZpZXcoVil9ZWxzZSBpZihWLnR5cGU9PT1zYXAudWkuY29yZS5tdmMuVmlld1R5cGUuWE1MKXthPW5ldyBzYXAudWkuY29yZS5tdmMuWE1MVmlldyhWKX1lbHNlIGlmKFYudHlwZT09PXNhcC51aS5jb3JlLm12Yy5WaWV3VHlwZS5IVE1MKXthPW5ldyBzYXAudWkuY29yZS5tdmMuSFRNTFZpZXcoVil9ZWxzZSBpZihWLnR5cGU9PT1zYXAudWkuY29yZS5tdmMuVmlld1R5cGUuVGVtcGxhdGUpe2E9bmV3IHNhcC51aS5jb3JlLm12Yy5UZW1wbGF0ZVZpZXcoVil9ZWxzZXt0aHJvdyBuZXcgRXJyb3IoIlVua25vd24gdmlldyB0eXBlICIrVi50eXBlKyIgc3BlY2lmaWVkLiIpfXJldHVybiBhfX0oKSk7cmV0dXJuIHNhcC51aS5jb3JlLm12Yy5WaWV3fSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUubXZjLlhNTFZpZXcnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS5tdmMuWE1MVmlldycpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL212Yy9YTUxWaWV3IixbJ3NhcC91aS9jb3JlL2xpYnJhcnknLCcuL1ZpZXcnLCdqcXVlcnkuc2FwLnhtbCcsJ3NhcC91aS9iYXNlL0RhdGFUeXBlJywnc2FwL3VpL21vZGVsL3Jlc291cmNlL1Jlc291cmNlTW9kZWwnLCdzYXAvdWkvY29yZS9YTUxUZW1wbGF0ZVByb2Nlc3NvciddLGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO3NhcC51aS5jb3JlLm12Yy5WaWV3LmV4dGVuZCgic2FwLnVpLmNvcmUubXZjLlhNTFZpZXciLHttZXRhZGF0YTp7bGlicmFyeToic2FwLnVpLmNvcmUifX0pO3NhcC51aS54bWx2aWV3PWZ1bmN0aW9uKGksdil7cmV0dXJuIHNhcC51aS52aWV3KGksdixzYXAudWkuY29yZS5tdmMuVmlld1R5cGUuWE1MKX07c2FwLnVpLmNvcmUubXZjLlhNTFZpZXcuX3NUeXBlPXNhcC51aS5jb3JlLm12Yy5WaWV3VHlwZS5YTUw7c2FwLnVpLmNvcmUubXZjLlhNTFZpZXcucHJvdG90eXBlLmluaXRWaWV3U2V0dGluZ3M9ZnVuY3Rpb24ocyl7aWYoIXMpe3Rocm93IG5ldyBFcnJvcigibVNldHRpbmdzIG11c3QgYmUgZ2l2ZW4iKX1pZihzLnZpZXdOYW1lJiZzLnZpZXdDb250ZW50KXt0aHJvdyBuZXcgRXJyb3IoIlZpZXcgbmFtZSBhbmQgdmlldyBjb250ZW50IGFyZSBnaXZlbi4gVGhlcmUgaXMgbm8gcG9pbnQgaW4gZG9pbmcgdGhpcywgc28gcGxlYXNlIGRlY2lkZS4iKX1lbHNlIGlmKChzLnZpZXdOYW1lfHxzLnZpZXdDb250ZW50KSYmcy54bWxOb2RlKXt0aHJvdyBuZXcgRXJyb3IoIlZpZXcgbmFtZS9jb250ZW50IEFORCBhbiBYTUwgbm9kZSBhcmUgZ2l2ZW4uIFRoZXJlIGlzIG5vIHBvaW50IGluIGRvaW5nIHRoaXMsIHNvIHBsZWFzZSBkZWNpZGUuIil9ZWxzZSBpZighKHMudmlld05hbWV8fHMudmlld0NvbnRlbnQpJiYhcy54bWxOb2RlKXt0aHJvdyBuZXcgRXJyb3IoIk5laXRoZXIgdmlldyBuYW1lL2NvbnRlbnQgbm9yIGFuIFhNTCBub2RlIGlzIGdpdmVuLiBPbmUgb2YgdGhlbSBpcyByZXF1aXJlZC4iKX1pZihzLnZpZXdOYW1lKXt0aGlzLl94Q29udGVudD1zYXAudWkuY29yZS5YTUxUZW1wbGF0ZVByb2Nlc3Nvci5sb2FkVGVtcGxhdGUocy52aWV3TmFtZSl9ZWxzZSBpZihzLnZpZXdDb250ZW50KXt0aGlzLm1Qcm9wZXJ0aWVzWyJ2aWV3Q29udGVudCJdPXMudmlld0NvbnRlbnQ7dGhpcy5feENvbnRlbnQ9alF1ZXJ5LnNhcC5wYXJzZVhNTChzLnZpZXdDb250ZW50KTtpZih0aGlzLl94Q29udGVudC5wYXJzZUVycm9yLmVycm9yQ29kZSE9MCl7dmFyIHA9dGhpcy5feENvbnRlbnQucGFyc2VFcnJvcjt0aHJvdyBuZXcgRXJyb3IoIlRoZSBmb2xsb3dpbmcgcHJvYmxlbSBvY2N1cnJlZDogWE1MIHBhcnNlIEVycm9yIGZvciAiK3AudXJsKyIgY29kZTogIitwLmVycm9yQ29kZSsiIHJlYXNvbjogIitwLnJlYXNvbisiIHNyYzogIitwLnNyY1RleHQrIiBsaW5lOiAiK3AubGluZSsiIGxpbmVwb3M6ICIrcC5saW5lcG9zKyIgZmlsZXBvczogIitwLmZpbGVwb3MpfWVsc2V7dGhpcy5feENvbnRlbnQ9dGhpcy5feENvbnRlbnQuZG9jdW1lbnRFbGVtZW50fX1lbHNlIGlmKHMueG1sTm9kZSl7dGhpcy5feENvbnRlbnQ9cy54bWxOb2RlfWVsc2V7fXRoaXMuX29Db250YWluaW5nVmlldz1zLmNvbnRhaW5pbmdWaWV3fHx0aGlzO2lmKCF0aGlzLmlzU3ViVmlldygpKXtzYXAudWkuY29yZS5YTUxUZW1wbGF0ZVByb2Nlc3Nvci5wYXJzZVZpZXdBdHRyaWJ1dGVzKHRoaXMuX3hDb250ZW50LHRoaXMscyl9ZWxzZXtkZWxldGUgcy5jb250cm9sbGVyfWlmKCh0aGlzLl9yZXNvdXJjZUJ1bmRsZU5hbWV8fHRoaXMuX3Jlc291cmNlQnVuZGxlVXJsKSYmKCFzLm1vZGVsc3x8IXMubW9kZWxzW3RoaXMuX3Jlc291cmNlQnVuZGxlQWxpYXNdKSl7dmFyIG09bmV3IHNhcC51aS5tb2RlbC5yZXNvdXJjZS5SZXNvdXJjZU1vZGVsKHtidW5kbGVOYW1lOnRoaXMuX3Jlc291cmNlQnVuZGxlTmFtZSxidW5kbGVVcmw6dGhpcy5fcmVzb3VyY2VCdW5kbGVVcmwsYnVuZGxlTG9jYWxlOnRoaXMuX3Jlc291cmNlQnVuZGxlTG9jYWxlfSk7dGhpcy5zZXRNb2RlbChtLHRoaXMuX3Jlc291cmNlQnVuZGxlQWxpYXMpfXZhciB0PXRoaXM7dGhpcy5vQWZ0ZXJSZW5kZXJpbmdOb3RpZmllcj1uZXcgc2FwLnVpLmNvcmUubXZjLlhNTEFmdGVyUmVuZGVyaW5nTm90aWZpZXIoKTt0aGlzLm9BZnRlclJlbmRlcmluZ05vdGlmaWVyLmFkZERlbGVnYXRlKHtvbkFmdGVyUmVuZGVyaW5nOmZ1bmN0aW9uKCl7dC5vbkFmdGVyUmVuZGVyaW5nQmVmb3JlQ2hpbGRyZW4oKX19KX07c2FwLnVpLmNvcmUubXZjLlhNTFZpZXcucHJvdG90eXBlLmV4aXQ9ZnVuY3Rpb24oKXt0aGlzLm9BZnRlclJlbmRlcmluZ05vdGlmaWVyLmRlc3Ryb3koKTtzYXAudWkuY29yZS5tdmMuVmlldy5wcm90b3R5cGUuZXhpdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9O3NhcC51aS5jb3JlLm12Yy5YTUxWaWV3LnByb3RvdHlwZS5vbkNvbnRyb2xsZXJDb25uZWN0ZWQ9ZnVuY3Rpb24oYyl7dmFyIHQ9dGhpcztzYXAudWkuYmFzZS5NYW5hZ2VkT2JqZWN0LnJ1bldpdGhQcmVwcm9jZXNzb3JzKGZ1bmN0aW9uKCl7dC5fYVBhcnNlZENvbnRlbnQ9c2FwLnVpLmNvcmUuWE1MVGVtcGxhdGVQcm9jZXNzb3IucGFyc2VUZW1wbGF0ZSh0Ll94Q29udGVudCx0KX0pfTtzYXAudWkuY29yZS5tdmMuWE1MVmlldy5wcm90b3R5cGUuZ2V0Q29udHJvbGxlck5hbWU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29udHJvbGxlck5hbWV9O3NhcC51aS5jb3JlLm12Yy5YTUxWaWV3LnByb3RvdHlwZS5pc1N1YlZpZXc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb0NvbnRhaW5pbmdWaWV3IT10aGlzfTtzYXAudWkuY29yZS5tdmMuWE1MVmlldy5wcm90b3R5cGUub25BZnRlclJlbmRlcmluZ0JlZm9yZUNoaWxkcmVuPWZ1bmN0aW9uKCl7aWYodGhpcy5fJG9sZENvbnRlbnQubGVuZ3RoIT09MCl7dmFyIGM9dGhpcy5nZXRBZ2dyZWdhdGlvbigiY29udGVudCIpO2lmKGMpe2Zvcih2YXIgaT0wO2k8Yy5sZW5ndGg7aSsrKXtpZihjW2ldLmdldERvbVJlZigpPT09bnVsbCl7Y29udGludWV9dmFyICQ9Y1tpXS4kKCk7alF1ZXJ5LnNhcC5ieUlkKCJzYXAtdWktZHVtbXktIitjW2ldLmdldElkKCksdGhpcy5fJG9sZENvbnRlbnQpLnJlcGxhY2VXaXRoKCQpfX1qUXVlcnkuc2FwLmJ5SWQoInNhcC11aS1kdW1teS0iK3RoaXMuZ2V0SWQoKSkucmVwbGFjZVdpdGgodGhpcy5fJG9sZENvbnRlbnQpfXRoaXMuXyRvbGRDb250ZW50PXVuZGVmaW5lZH07c2FwLnVpLmNvcmUubXZjLlhNTFZpZXcucHJvdG90eXBlLl9vbkNoaWxkUmVyZW5kZXJlZEVtcHR5PWZ1bmN0aW9uKGMsZSl7alF1ZXJ5KGUpLnJlcGxhY2VXaXRoKCc8ZGl2IGlkPSJzYXAtdWktZHVtbXktJytjLmdldElkKCkrJyIgY2xhc3M9InNhcFVpSGlkZGVuIi8+Jyk7cmV0dXJuIHRydWV9O3NhcC51aS5jb3JlLkNvbnRyb2wuZXh0ZW5kKCJzYXAudWkuY29yZS5tdmMuWE1MQWZ0ZXJSZW5kZXJpbmdOb3RpZmllciIse3JlbmRlcmVyOmZ1bmN0aW9uKHIsYyl7ci53cml0ZSgiIil9fSk7cmV0dXJuIHNhcC51aS5jb3JlLm12Yy5YTUxWaWV3fSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUuc2VhcmNoLk9wZW5TZWFyY2hQcm92aWRlcicpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLnNlYXJjaC5PcGVuU2VhcmNoUHJvdmlkZXInKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9zZWFyY2gvT3BlblNlYXJjaFByb3ZpZGVyIixbJ3NhcC91aS9jb3JlL2xpYnJhcnknLCcuL1NlYXJjaFByb3ZpZGVyJywnanF1ZXJ5LnNhcC5lbmNvZGVyJ10sZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7c2FwLnVpLmNvcmUuc2VhcmNoLlNlYXJjaFByb3ZpZGVyLmV4dGVuZCgic2FwLnVpLmNvcmUuc2VhcmNoLk9wZW5TZWFyY2hQcm92aWRlciIse21ldGFkYXRhOntsaWJyYXJ5OiJzYXAudWkuY29yZSIscHJvcGVydGllczp7InN1Z2dlc3RVcmwiOnt0eXBlOiJzYXAudWkuY29yZS5VUkkiLGdyb3VwOiJNaXNjIixkZWZhdWx0VmFsdWU6bnVsbH0sInN1Z2dlc3RUeXBlIjp7dHlwZToic3RyaW5nIixncm91cDoiTWlzYyIsZGVmYXVsdFZhbHVlOidqc29uJ319fX0pO3NhcC51aS5jb3JlLnNlYXJjaC5PcGVuU2VhcmNoUHJvdmlkZXIucHJvdG90eXBlLnN1Z2dlc3Q9ZnVuY3Rpb24odixjKXt2YXIgdT10aGlzLmdldFN1Z2dlc3RVcmwoKTtpZighdSl7cmV0dXJufXU9dS5yZXBsYWNlKCJ7c2VhcmNoVGVybXN9IixqUXVlcnkuc2FwLmVuY29kZVVSTCh2KSk7dmFyIHQ9dGhpcy5nZXRTdWdnZXN0VHlwZSgpO3ZhciBzO2lmKHQmJnQudG9Mb3dlckNhc2UoKT09PSJ4bWwiKXt0PSJ4bWwiO3M9ZnVuY3Rpb24oZCl7dmFyIHg9alF1ZXJ5KGQpO3ZhciBpPXguZmluZCgiVGV4dCIpO3ZhciBTPVtdO2kuZWFjaChmdW5jdGlvbigpe1MucHVzaChqUXVlcnkodGhpcykudGV4dCgpKX0pO2ModixTKX19ZWxzZXt0PSJqc29uIjtzPWZ1bmN0aW9uKGQpe2ModixkWzFdKX19alF1ZXJ5LmFqYXgoe3VybDp1LGRhdGFUeXBlOnQsc3VjY2VzczpzLGVycm9yOmZ1bmN0aW9uKFgsYSxlKXtqUXVlcnkuc2FwLmxvZy5mYXRhbCgiVGhlIGZvbGxvd2luZyBwcm9ibGVtIG9jY3VycmVkOiAiK2EsWC5yZXNwb25zZVRleHQrIiwiK1guc3RhdHVzKX19KX07cmV0dXJuIHNhcC51aS5jb3JlLnNlYXJjaC5PcGVuU2VhcmNoUHJvdmlkZXJ9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS50bXBsLkRPTUVsZW1lbnQnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS50bXBsLkRPTUVsZW1lbnQnKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS90bXBsL0RPTUVsZW1lbnQiLFsnc2FwL3VpL2NvcmUvbGlicmFyeScsJ3NhcC91aS9jb3JlL0NvbnRyb2wnXSxmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0IjtzYXAudWkuY29yZS5Db250cm9sLmV4dGVuZCgic2FwLnVpLmNvcmUudG1wbC5ET01FbGVtZW50Iix7bWV0YWRhdGE6e3B1YmxpY01ldGhvZHM6WyJhdHRyIiwicmVtb3ZlQXR0ciJdLGxpYnJhcnk6InNhcC51aS5jb3JlIixwcm9wZXJ0aWVzOnsidGV4dCI6e3R5cGU6InN0cmluZyIsZ3JvdXA6IkFwcGVhcmFuY2UiLGRlZmF1bHRWYWx1ZTpudWxsfSwidGFnIjp7dHlwZToic3RyaW5nIixncm91cDoiQmVoYXZpb3IiLGRlZmF1bHRWYWx1ZTonc3Bhbid9fSxhZ2dyZWdhdGlvbnM6eyJhdHRyaWJ1dGVzIjp7dHlwZToic2FwLnVpLmNvcmUudG1wbC5ET01BdHRyaWJ1dGUiLG11bHRpcGxlOnRydWUsc2luZ3VsYXJOYW1lOiJhdHRyaWJ1dGUifSwiZWxlbWVudHMiOnt0eXBlOiJzYXAudWkuY29yZS50bXBsLkRPTUVsZW1lbnQiLG11bHRpcGxlOnRydWUsc2luZ3VsYXJOYW1lOiJlbGVtZW50In19fX0pO3NhcC51aS5jb3JlLnRtcGwuRE9NRWxlbWVudC5wcm90b3R5cGUuYXBwbHlTZXR0aW5ncz1mdW5jdGlvbihzKXtzYXAudWkuY29yZS5Db250cm9sLnByb3RvdHlwZS5hcHBseVNldHRpbmdzLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt2YXIgdD10aGlzLG09dGhpcy5nZXRNZXRhZGF0YSgpLGo9bS5nZXRKU09OS2V5cygpO2pRdWVyeS5lYWNoKHMsZnVuY3Rpb24oayx2KXtpZihrIT09ImlkIiYmayE9PSJ0ZXh0IiYmIWpba10mJnR5cGVvZiB2PT09InN0cmluZyIpe3QuYXR0cihrLHYpfX0pfTtzYXAudWkuY29yZS50bXBsLkRPTUVsZW1lbnQucHJvdG90eXBlLmV4aXQ9c2FwLnVpLmNvcmUudG1wbC5ET01FbGVtZW50LnByb3RvdHlwZS5vbkJlZm9yZVJlbmRlcmluZz1mdW5jdGlvbigpe3ZhciB0PXRoaXMuZ2V0VGFnKCkudG9Mb3dlckNhc2UoKTtpZih0PT09ImlucHV0Inx8dD09PSJ0ZXh0YXJlYSJ8fHQ9PT0ic2VsZWN0Iil7dGhpcy4kKCkub2ZmKCJjaGFuZ2UiKX19O3NhcC51aS5jb3JlLnRtcGwuRE9NRWxlbWVudC5wcm90b3R5cGUub25BZnRlclJlbmRlcmluZz1mdW5jdGlvbigpe3ZhciB0PXRoaXMuZ2V0VGFnKCkudG9Mb3dlckNhc2UoKTtpZih0PT09ImlucHV0Inx8dD09PSJ0ZXh0YXJlYSJ8fHQ9PT0ic2VsZWN0Iil7dGhpcy4kKCkub24oImNoYW5nZSIsalF1ZXJ5LnByb3h5KHRoaXMub25pbnB1dGNoYW5nZSx0aGlzKSl9fTtzYXAudWkuY29yZS50bXBsLkRPTUVsZW1lbnQucHJvdG90eXBlLm9uaW5wdXRjaGFuZ2U9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5nZXRUYWcoKS50b0xvd2VyQ2FzZSgpO2lmKHQ9PT0iaW5wdXQiKXt2YXIgdj10aGlzLiQoKS52YWwoKTtqUXVlcnkuZWFjaCh0aGlzLmdldEF0dHJpYnV0ZXMoKSxmdW5jdGlvbihpLGEpe2lmKGEuZ2V0TmFtZSgpLnRvTG93ZXJDYXNlKCk9PT0idmFsdWUiKXthLnNldFZhbHVlKHYpfX0pfWVsc2UgaWYodD09PSJ0ZXh0YXJlYSIpe3ZhciBUPXRoaXMuJCgpLnZhbCgpO3RoaXMuc2V0VGV4dChUKX1lbHNlIGlmKHQ9PT0ic2VsZWN0Iil7dmFyIFQ9IiI7dGhpcy4kKCkuZmluZCgic2VsZWN0IG9wdGlvbjpzZWxlY3RlZCIpLmVhY2goZnVuY3Rpb24oKXtUKz1qUXVlcnkodGhpcykudGV4dCgpKyIgIn0pO3RoaXMuc2V0VGV4dChUKX19O3NhcC51aS5jb3JlLnRtcGwuRE9NRWxlbWVudC5wcm90b3R5cGUuYXR0cj1mdW5jdGlvbihrLHYpe3ZhciBhPXRoaXMuZ2V0QXR0cmlidXRlcygpLEE7alF1ZXJ5LmVhY2goYSxmdW5jdGlvbihpLFYpe3ZhciBuPVYuZ2V0TmFtZSgpO2lmKG4udG9Mb3dlckNhc2UoKT09PWspe0E9VjtyZXR1cm4gZmFsc2V9fSk7aWYodj09PXVuZGVmaW5lZCl7cmV0dXJuIEEmJkEuZ2V0VmFsdWUoKX1lbHNle2lmKEEpe2lmKHY9PT1udWxsKXt0aGlzLnJlbW92ZUF0dHJpYnV0ZShBKX1lbHNle0Euc2V0VmFsdWUodil9fWVsc2V7aWYodiE9PW51bGwpe3RoaXMuYWRkQXR0cmlidXRlKG5ldyBzYXAudWkuY29yZS50bXBsLkRPTUF0dHJpYnV0ZSh7bmFtZTprLHZhbHVlOnZ9KSl9fXJldHVybiB0aGlzfX07c2FwLnVpLmNvcmUudG1wbC5ET01FbGVtZW50LnByb3RvdHlwZS5yZW1vdmVBdHRyPWZ1bmN0aW9uKGspe3RoaXMuYXR0cihrLG51bGwpO3JldHVybiB0aGlzfTtzYXAudWkuY29yZS50bXBsLkRPTUVsZW1lbnQucHJvdG90eXBlLnNldFRleHQ9ZnVuY3Rpb24odCl7dGhpcy5zZXRQcm9wZXJ0eSgidGV4dCIsdCx0cnVlKTt2YXIgJD10aGlzLiQoKTtpZigkLmxlbmd0aD4wKXt2YXIgVD10aGlzLmdldFRhZygpLnRvTG93ZXJDYXNlKCk7aWYoVD09PSJ0ZXh0YXJlYSIpeyQudmFsKHRoaXMuZ2V0UHJvcGVydHkoInRleHQiKSl9ZWxzZXskLnRleHQodGhpcy5nZXRQcm9wZXJ0eSgidGV4dCIpKX19fTtyZXR1cm4gc2FwLnVpLmNvcmUudG1wbC5ET01FbGVtZW50fSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUudG1wbC5UZW1wbGF0ZUNvbnRyb2wnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS50bXBsLlRlbXBsYXRlQ29udHJvbCcpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL3RtcGwvVGVtcGxhdGVDb250cm9sIixbJ3NhcC91aS9jb3JlL2xpYnJhcnknLCdzYXAvdWkvY29yZS9Db250cm9sJywnLi9ET01FbGVtZW50JywnLi9ET01BdHRyaWJ1dGUnLCdzYXAvdWkvY29yZS9EZWNsYXJhdGl2ZVN1cHBvcnQnXSxmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0IjtzYXAudWkuY29yZS5Db250cm9sLmV4dGVuZCgic2FwLnVpLmNvcmUudG1wbC5UZW1wbGF0ZUNvbnRyb2wiLHttZXRhZGF0YTp7bGlicmFyeToic2FwLnVpLmNvcmUiLHByb3BlcnRpZXM6eyJjb250ZXh0Ijp7dHlwZToib2JqZWN0Iixncm91cDoiRGF0YSIsZGVmYXVsdFZhbHVlOm51bGx9fSxhZ2dyZWdhdGlvbnM6eyJjb250cm9scyI6e3R5cGU6InNhcC51aS5jb3JlLkNvbnRyb2wiLG11bHRpcGxlOnRydWUsc2luZ3VsYXJOYW1lOiJjb250cm9sIix2aXNpYmlsaXR5OiJoaWRkZW4ifX0sYXNzb2NpYXRpb25zOnsidGVtcGxhdGUiOnt0eXBlOiJzYXAudWkuY29yZS50bXBsLlRlbXBsYXRlIixtdWx0aXBsZTpmYWxzZX19LGV2ZW50czp7ImFmdGVyUmVuZGVyaW5nIjp7fSwiYmVmb3JlUmVuZGVyaW5nIjp7fX19fSk7c2FwLnVpLmNvcmUudG1wbC5UZW1wbGF0ZUNvbnRyb2wuTV9FVkVOVFM9eydhZnRlclJlbmRlcmluZyc6J2FmdGVyUmVuZGVyaW5nJywnYmVmb3JlUmVuZGVyaW5nJzonYmVmb3JlUmVuZGVyaW5nJ307c2FwLnVpLmNvcmUudG1wbC5UZW1wbGF0ZUNvbnRyb2wucHJvdG90eXBlLmluaXQ9ZnVuY3Rpb24oKXt0aGlzLl9hQmluZGluZ0luZm9zPVtdfTtzYXAudWkuY29yZS50bXBsLlRlbXBsYXRlQ29udHJvbC5wcm90b3R5cGUuaXNJbmxpbmU9ZnVuY3Rpb24oKXt2YXIgaT1mYWxzZTtpZih0aGlzLmdldFBhcmVudCgpaW5zdGFuY2VvZiBzYXAudWkuY29yZS5VSUFyZWEmJmpRdWVyeSh0aGlzLmdldFBhcmVudCgpLmdldFJvb3ROb2RlKCkpLmF0dHIoImlkIik9PT10aGlzLmdldElkKCkpe2k9dHJ1ZX1yZXR1cm4gaX07c2FwLnVpLmNvcmUudG1wbC5UZW1wbGF0ZUNvbnRyb2wucHJvdG90eXBlLnBsYWNlQXQ9ZnVuY3Rpb24ocixwKXt2YXIgaT10aGlzLmlzSW5saW5lKCk7dmFyICQ9dGhpcy4kKCksdT10aGlzLmdldFVJQXJlYSgpO3NhcC51aS5jb3JlLkNvbnRyb2wucHJvdG90eXBlLnBsYWNlQXQuYXBwbHkodGhpcyxhcmd1bWVudHMpO2lmKGkmJiQubGVuZ3RoPT09MSl7JC5yZW1vdmUoKTt1LmRlc3Ryb3lDb250ZW50KCl9fTtzYXAudWkuY29yZS50bXBsLlRlbXBsYXRlQ29udHJvbC5wcm90b3R5cGUuZ2V0VGVtcGxhdGVSZW5kZXJlcj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmZuUmVuZGVyZXJ9O3NhcC51aS5jb3JlLnRtcGwuVGVtcGxhdGVDb250cm9sLnByb3RvdHlwZS5zZXRUZW1wbGF0ZVJlbmRlcmVyPWZ1bmN0aW9uKHIpe3RoaXMuZm5SZW5kZXJlcj1yO3JldHVybiB0aGlzfTtzYXAudWkuY29yZS50bXBsLlRlbXBsYXRlQ29udHJvbC5wcm90b3R5cGUuX2NsZWFudXA9ZnVuY3Rpb24oKXt0aGlzLmRlc3Ryb3lBZ2dyZWdhdGlvbigiY29udHJvbHMiKTtpZih0aGlzLl9hQmluZGluZ0luZm9zKXt2YXIgdD10aGlzO2pRdWVyeS5lYWNoKHRoaXMuX2FCaW5kaW5nSW5mb3MsZnVuY3Rpb24oaSxiKXt0LmdldE1vZGVsKGIubW9kZWwpLnJlbW92ZUJpbmRpbmcoYi5iaW5kaW5nKX0pO3RoaXMuX2FCaW5kaW5nSW5mb3M9W119fTtzYXAudWkuY29yZS50bXBsLlRlbXBsYXRlQ29udHJvbC5wcm90b3R5cGUuX2NvbXBpbGU9ZnVuY3Rpb24oKXt2YXIgdD1zYXAudWkuZ2V0Q29yZSgpLmJ5SWQodGhpcy5nZXRUZW1wbGF0ZSgpKSxkPXQmJnQuZ2V0RGVjbGFyYXRpdmVTdXBwb3J0KCk7aWYoZCl7dmFyIGE9dGhpcztzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7c2FwLnVpLmNvcmUuRGVjbGFyYXRpdmVTdXBwb3J0LmNvbXBpbGUoYS5nZXREb21SZWYoKSl9KX19O3NhcC51aS5jb3JlLnRtcGwuVGVtcGxhdGVDb250cm9sLnByb3RvdHlwZS5leGl0PWZ1bmN0aW9uKCl7dGhpcy5fY2xlYW51cCgpfTtzYXAudWkuY29yZS50bXBsLlRlbXBsYXRlQ29udHJvbC5wcm90b3R5cGUub25CZWZvcmVSZW5kZXJpbmc9ZnVuY3Rpb24oKXt0aGlzLmZpcmVCZWZvcmVSZW5kZXJpbmcoKTt0aGlzLl9jbGVhbnVwKCl9O3NhcC51aS5jb3JlLnRtcGwuVGVtcGxhdGVDb250cm9sLnByb3RvdHlwZS5vbkFmdGVyUmVuZGVyaW5nPWZ1bmN0aW9uKCl7dGhpcy5maXJlQWZ0ZXJSZW5kZXJpbmcoKX07c2FwLnVpLmNvcmUudG1wbC5UZW1wbGF0ZUNvbnRyb2wucHJvdG90eXBlLnVwZGF0ZUJpbmRpbmdzPWZ1bmN0aW9uKHUsbSl7c2FwLnVpLmJhc2UuTWFuYWdlZE9iamVjdC5wcm90b3R5cGUudXBkYXRlQmluZGluZ3MuYXBwbHkodGhpcyxhcmd1bWVudHMpO2lmKHRoaXMuZ2V0RG9tUmVmKCkpe3RoaXMuaW52YWxpZGF0ZSgpfX07c2FwLnVpLmNvcmUudG1wbC5UZW1wbGF0ZUNvbnRyb2wucHJvdG90eXBlLmJpbmQ9ZnVuY3Rpb24ocCx0KXt2YXIgUD1zYXAudWkuY29yZS50bXBsLlRlbXBsYXRlLnBhcnNlUGF0aChwKSxtPXRoaXMuZ2V0TW9kZWwoUC5tb2RlbCkscD1QLnBhdGgsTT10PyJiaW5kIitqUXVlcnkuc2FwLmNoYXJUb1VwcGVyQ2FzZSh0KToiYmluZFByb3BlcnR5IixiPW0mJm1bTV0ocCksYT10aGlzO2lmKGIpe2IuYXR0YWNoQ2hhbmdlKGZ1bmN0aW9uKCl7alF1ZXJ5LnNhcC5sb2cuZGVidWcoIlRlbXBsYXRlQ29udHJvbCMiK2EuZ2V0SWQoKSsiOiAiK3QrIiBiaW5kaW5nIGNoYW5nZWQgZm9yIHBhdGggXCIiK3ArIlwiIik7YS5pbnZhbGlkYXRlKCl9KX10aGlzLl9hQmluZGluZ0luZm9zLnB1c2goe2JpbmRpbmc6YixwYXRoOlAucGF0aCxtb2RlbDpQLm1vZGVsfSk7cmV0dXJuIGJ9O3NhcC51aS5jb3JlLnRtcGwuVGVtcGxhdGVDb250cm9sLnByb3RvdHlwZS5iaW5kUHJvcD1mdW5jdGlvbihwKXt2YXIgYj10aGlzLmJpbmQocCwicHJvcGVydHkiKTtyZXR1cm4gYiYmYi5nZXRFeHRlcm5hbFZhbHVlKCl9O3NhcC51aS5jb3JlLnRtcGwuVGVtcGxhdGVDb250cm9sLnByb3RvdHlwZS5iaW5kTGlzdD1mdW5jdGlvbihwKXt2YXIgYj10aGlzLmJpbmQocCwibGlzdCIpLG09YiYmYi5nZXRNb2RlbCgpLHA9YiYmYi5nZXRQYXRoKCk7cmV0dXJuIGImJm0uZ2V0UHJvcGVydHkocCl9O3NhcC51aS5jb3JlLnRtcGwuVGVtcGxhdGVDb250cm9sLnByb3RvdHlwZS5jcmVhdGVET01FbGVtZW50PWZ1bmN0aW9uKHMscCxkKXt2YXIgZT1uZXcgc2FwLnVpLmNvcmUudG1wbC5ET01FbGVtZW50KHMpO2lmKHApe2UuYmluZEVsZW1lbnQocCl9aWYoIWQpe3RoaXMuYWRkQWdncmVnYXRpb24oImNvbnRyb2xzIixlKX1yZXR1cm4gZX07c2FwLnVpLmNvcmUudG1wbC5UZW1wbGF0ZUNvbnRyb2wucHJvdG90eXBlLmNyZWF0ZUNvbnRyb2w9ZnVuY3Rpb24ocyxwLGQsdil7dmFyIGg9e307alF1ZXJ5LmVhY2gocyxmdW5jdGlvbihrLFYpe2hbImRhdGEtIitqUXVlcnkuc2FwLmh5cGhlbihrKV09Vn0pO3ZhciAkPWpRdWVyeSgiPGRpdi8+IixoKTt2YXIgYz1zYXAudWkuY29yZS5EZWNsYXJhdGl2ZVN1cHBvcnQuX2NyZWF0ZUNvbnRyb2woJC5nZXQoMCksdik7aWYocCl7Yy5iaW5kRWxlbWVudChwKX1pZighZCl7dGhpcy5hZGRBZ2dyZWdhdGlvbigiY29udHJvbHMiLGMpfXJldHVybiBjfTtyZXR1cm4gc2FwLnVpLmNvcmUudG1wbC5UZW1wbGF0ZUNvbnRyb2x9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS51dGlsLkV4cG9ydCcpKXtqUXVlcnkuc2FwLmRlY2xhcmUoJ3NhcC51aS5jb3JlLnV0aWwuRXhwb3J0Jyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvdXRpbC9FeHBvcnQiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCdzYXAvdWkvY29yZS9Db250cm9sJywnLi9FeHBvcnRDb2x1bW4nLCcuL0V4cG9ydFJvdycsJy4vRXhwb3J0VHlwZScsJy4vRmlsZSddLGZ1bmN0aW9uKHEsQyxFLGEsYixGKXsndXNlIHN0cmljdCc7ZnVuY3Rpb24gdyhmLG8pe2lmKGYpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBmLmFwcGx5KG8sYXJndW1lbnRzKX19ZWxzZXtyZXR1cm4gZn19ZnVuY3Rpb24gcChtKXtxLnNhcC5sb2cud2FybmluZygiVXNhZ2Ugb2YgZGVwcmVjYXRlZCBqUXVlcnkgUHJvbWlzZSBtZXRob2Q6ICciK20rIicuICIrIlBsZWFzZSB1c2UgdGhlIHN0YW5kYXJkIFByb21pc2UgbWV0aG9kcyAndGhlbicgLyAnY2F0Y2gnIGluc3RlYWQhIiwiIiwic2FwLnVpLmNvcmUudXRpbC5FeHBvcnQiKX1mdW5jdGlvbiBjKFAsbyl7dmFyIE89bmV3IFByb21pc2UoUCk7bz1vfHxPO3ZhciByPWZhbHNlLFI9ZmFsc2U7Ty50aGVuKGZ1bmN0aW9uKHYpe3I9dHJ1ZTtyZXR1cm4gdn0sZnVuY3Rpb24oZSl7Uj10cnVlO3Rocm93IGV9KTt2YXIgbT17dGhlbjpPLnRoZW4sImNhdGNoIjpPWyJjYXRjaCJdfTtmdW5jdGlvbiBmKGUpe2UudGhlbj1mdW5jdGlvbihzLGcpe3ZhciBBPVt3KHMsbyksdyhnLG8pXTtyZXR1cm4gZihtLnRoZW4uYXBwbHkoZSxBKSxvKX07ZVsiY2F0Y2giXT1mdW5jdGlvbihnKXt2YXIgQT1bdyhnLG8pXTtyZXR1cm4gZihtWyJjYXRjaCJdLmFwcGx5KGUsQSksbyl9O3EuZWFjaChbe2pxOiJkb25lIixlczY6InRoZW4ifSx7anE6ImZhaWwiLGVzNjoiY2F0Y2gifSx7anE6ImFsd2F5cyIsZXM2OiJ0aGVuIn1dLGZ1bmN0aW9uKGksZyl7ZVtnLmpxXT1mdW5jdGlvbigpe3AoZy5qcSk7dmFyIGg9bnVsbDtxLmVhY2goQXJyYXkucHJvdG90eXBlLmNvbmNhdC5hcHBseShbXSxhcmd1bWVudHMpLGZ1bmN0aW9uKGksail7dmFyIFc9dyhqLG8pO3ZhciBrPWZ1bmN0aW9uKHYpe1cuYXBwbHkodGhpcyxhcmd1bWVudHMpO3JldHVybiB2fTt2YXIgQT1ba107aWYoZy5qcT09PSJhbHdheXMiKXtBLnB1c2goayl9aWYoIWgpe2g9bVtnLmVzNl0uYXBwbHkoZSxBKX1lbHNle2g9aFtnLmVzNl0uYXBwbHkoaCxBKX19KTtyZXR1cm4gZihoLG8pfX0pO2UucGlwZT1mdW5jdGlvbihELGcpe3AoInBpcGUiKTtyZXR1cm4gZS50aGVuKEQsZyl9O2Uuc3RhdGU9ZnVuY3Rpb24oKXtwKCJzdGF0ZSIpO2lmKHIpe3JldHVybiJyZXNvbHZlZCJ9ZWxzZSBpZihSKXtyZXR1cm4icmVqZWN0ZWQifWVsc2V7cmV0dXJuInBlbmRpbmcifX07cmV0dXJuIGV9cmV0dXJuIGYoTyl9O3ZhciBkPUMuZXh0ZW5kKCdzYXAudWkuY29yZS51dGlsLkV4cG9ydCcse21ldGFkYXRhOntwdWJsaWNNZXRob2RzOlsiZ2VuZXJhdGUiLCJzYXZlRmlsZSJdLGxpYnJhcnk6InNhcC51aS5jb3JlIixhZ2dyZWdhdGlvbnM6e2V4cG9ydFR5cGU6e3R5cGU6J3NhcC51aS5jb3JlLnV0aWwuRXhwb3J0VHlwZScsbXVsdGlwbGU6ZmFsc2V9LGNvbHVtbnM6e3R5cGU6J3NhcC51aS5jb3JlLnV0aWwuRXhwb3J0Q29sdW1uJyxtdWx0aXBsZTp0cnVlLGJpbmRhYmxlOidiaW5kYWJsZSd9LHJvd3M6e3R5cGU6J3NhcC51aS5jb3JlLnV0aWwuRXhwb3J0Um93JyxtdWx0aXBsZTp0cnVlLGJpbmRhYmxlOidiaW5kYWJsZSd9LF90ZW1wbGF0ZTp7dHlwZTonc2FwLnVpLmNvcmUudXRpbC5FeHBvcnRSb3cnLG11bHRpcGxlOmZhbHNlLHZpc2liaWxpdHk6J2hpZGRlbid9fX19KTtkLmdldE1ldGFkYXRhKCkuZ2V0QWxsQWdncmVnYXRpb25zKClbInJvd3MiXS5fZG9lc05vdFJlcXVpcmVGYWN0b3J5PXRydWU7ZC5wcm90b3R5cGUuaW5pdD1mdW5jdGlvbigpe3RoaXMuX29Qcm9taXNlPW51bGw7dGhpcy5fZm5SZXNvbHZlUHJvbWlzZT1udWxsO3RoaXMuX29Sb3dCaW5kaW5nSW5mbz1udWxsfTtkLnByb3RvdHlwZS5leGl0PWZ1bmN0aW9uKCl7ZGVsZXRlIHRoaXMuX29Qcm9taXNlO2RlbGV0ZSB0aGlzLl9mblJlc29sdmVQcm9taXNlO2RlbGV0ZSB0aGlzLl9vUm93QmluZGluZ0luZm99O2QucHJvdG90eXBlLl9jcmVhdGVSb3dUZW1wbGF0ZT1mdW5jdGlvbigpe3ZhciB0PW5ldyBhKHRoaXMuZ2V0SWQoKSsiLXJvdyIpLGU9dGhpcy5nZXRDb2x1bW5zKCk7Zm9yKHZhciBpPTAsbD1lLmxlbmd0aDtpPGw7aSsrKXt2YXIgbz1lW2ldLmdldFRlbXBsYXRlKCk7aWYobyl7dC5hZGRDZWxsKG8uY2xvbmUoImNvbCIraSkpfX1yZXR1cm4gdH07ZC5wcm90b3R5cGUuYmluZEFnZ3JlZ2F0aW9uPWZ1bmN0aW9uKG4sQil7aWYobj09PSdyb3dzJyl7dGhpcy5fb1Jvd0JpbmRpbmdJbmZvPUI7cmV0dXJuIHRoaXN9cmV0dXJuIEMucHJvdG90eXBlLmJpbmRBZ2dyZWdhdGlvbi5hcHBseSh0aGlzLGFyZ3VtZW50cyl9O2QucHJvdG90eXBlLnVwZGF0ZVJvd3M9ZnVuY3Rpb24ocil7aWYocj09PSdjaGFuZ2UnJiZ0aGlzLl9mblJlc29sdmVQcm9taXNlKXt2YXIgcz10aGlzLmdldEV4cG9ydFR5cGUoKS5fZ2VuZXJhdGUodGhpcyk7dGhpcy5kZXN0cm95QWdncmVnYXRpb24oJ190ZW1wbGF0ZScpO3RoaXMudW5iaW5kQWdncmVnYXRpb24oJ3Jvd3MnKTt0aGlzLl9mblJlc29sdmVQcm9taXNlKHMpO3RoaXMuX29Qcm9taXNlPW51bGw7dGhpcy5fZm5SZXNvbHZlUHJvbWlzZT1udWxsfX07ZC5wcm90b3R5cGUuZ2VuZXJhdGU9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2lmKCF0aGlzLl9vUHJvbWlzZSl7dGhpcy5fb1Byb21pc2U9YyhmdW5jdGlvbihyLGYpe2UuX2ZuUmVzb2x2ZVByb21pc2U9cjtpZighZS5oYXNNb2RlbCgpKXtmKCJHZW5lcmF0ZSBpcyBub3QgcG9zc2libGUgYmVhdXNlIG5vIG1vZGVsIHdhcyBzZXQuIil9ZWxzZXt2YXIgdD1lLl9jcmVhdGVSb3dUZW1wbGF0ZSgpO2Uuc2V0QWdncmVnYXRpb24oJ190ZW1wbGF0ZScsdCx0cnVlKTtDLnByb3RvdHlwZS5iaW5kQWdncmVnYXRpb24uY2FsbChlLCdyb3dzJyxlLl9vUm93QmluZGluZ0luZm8pO2lmKGUuZ2V0QmluZGluZygicm93cyIpKXtlLmdldEJpbmRpbmcoInJvd3MiKS5nZXRDb250ZXh0cygwLGUuZ2V0QmluZGluZygicm93cyIpLmdldExlbmd0aCgpKX19fSx0aGlzKX1yZXR1cm4gdGhpcy5fb1Byb21pc2V9O2QucHJvdG90eXBlLnNhdmVGaWxlPWZ1bmN0aW9uKGYpe3JldHVybiB0aGlzLmdlbmVyYXRlKCkudGhlbihmdW5jdGlvbihzKXt2YXIgZT10aGlzLmdldEV4cG9ydFR5cGUoKTtGLnNhdmUocyxmfHwiZGF0YSIsZS5nZXRGaWxlRXh0ZW5zaW9uKCksZS5nZXRNaW1lVHlwZSgpLGUuZ2V0Q2hhcnNldCgpKX0pfTtyZXR1cm4gZH0sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLkJ1c3lJbmRpY2F0b3InKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS5CdXN5SW5kaWNhdG9yJyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvQnVzeUluZGljYXRvciIsWydqcXVlcnkuc2FwLmdsb2JhbCcsJy4vUG9wdXAnXSxmdW5jdGlvbihxLFApeyJ1c2Ugc3RyaWN0Ijt2YXIgQj1xLmV4dGVuZChxLnNhcC5uZXdPYmplY3Qoc2FwLnVpLmJhc2UuRXZlbnRQcm92aWRlci5wcm90b3R5cGUpLHtvUG9wdXA6bnVsbCxvRG9tUmVmOm51bGwsYk9wZW5SZXF1ZXN0ZWQ6ZmFsc2UsaURFRkFVTFRfREVMQVlfTVM6MTAwMCxzRE9NX0lEOiJzYXBVaUJ1c3lJbmRpY2F0b3IifSk7c2FwLnVpLmJhc2UuRXZlbnRQcm92aWRlci5hcHBseShCKTtCLk1fRVZFTlRTPXtPcGVuOiJPcGVuIixDbG9zZToiQ2xvc2UifTtCLl9pbml0PWZ1bmN0aW9uKCl7dmFyIHI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7ci5pZD10aGlzLnNET01fSUQ7dGhpcy5fb1Jlc0J1bmRsZT1zYXAudWkuZ2V0Q29yZSgpLmdldExpYnJhcnlSZXNvdXJjZUJ1bmRsZSgic2FwLnVpLmNvcmUiKTt2YXIgdD10aGlzLl9vUmVzQnVuZGxlLmdldFRleHQoIkJVU1lfVEVYVCIpO2RlbGV0ZSB0aGlzLl9vUmVzQnVuZGxlO3ZhciBpPXNhcC51aS5nZXRDb3JlKCkuZ2V0U3RhdGljQXJlYVJlZigpO2kuYXBwZW5kQ2hpbGQocik7cShyKS5hZGRDbGFzcygic2FwVWlCdXN5IikuYXR0cigidGFiaW5kZXgiLDApLmF0dHIoInJvbGUiLCJwcm9ncmVzc2JhciIpLmF0dHIoImFsdCIsIiIpLmF0dHIoInRpdGxlIix0KTt0aGlzLm9Eb21SZWY9cjt0aGlzLm9Qb3B1cD1uZXcgUChyKTt0aGlzLm9Qb3B1cC5zZXRNb2RhbCh0cnVlLCJzYXBVaUJseUJ1c3kiKTt0aGlzLm9Qb3B1cC5zZXRTaGFkb3coZmFsc2UpO2lmKHNhcC51aS5EZXZpY2UuYnJvd3Nlci5tc2llJiZzYXAudWkuRGV2aWNlLmJyb3dzZXIudmVyc2lvbjw9OSl7dGhpcy5faUJ1c3lQYWdlV2lkdGg9cShkb2N1bWVudC5ib2R5KS53aWR0aCgpO3RoaXMuX2lCdXN5TGVmdD0wO3RoaXMuX2lCdXN5RGVsdGE9NjA7dGhpcy5faUJ1c3lUaW1lU3RlcD01MDt0aGlzLl9pQnVzeVdpZHRoPTUwMDt0aGlzLmF0dGFjaE9wZW4odGhpcy5fSUVBbmltYXRpb24sdGhpcyl9fTtCLl9JRUFuaW1hdGlvbj1mdW5jdGlvbihlKXtpZighdGhpcy5fJEJ1c3lJbmRpY2F0b3ImJmUpe3RoaXMuXyRCdXN5SW5kaWNhdG9yPWUuZ2V0UGFyYW1ldGVyKCIkQnVzeSIpfXEuc2FwLmNsZWFyRGVsYXllZENhbGwodGhpcy5faUFuaW1hdGlvblRpbWVvdXQpO3RoaXMuX2lCdXN5TGVmdCs9dGhpcy5faUJ1c3lEZWx0YTtpZih0aGlzLl9pQnVzeUxlZnQ+dGhpcy5faUJ1c3lQYWdlV2lkdGgpe3RoaXMuX2lCdXN5TGVmdD0tdGhpcy5faUJ1c3lXaWR0aH1pZighdGhpcy5fJEJ1c3lJbmRpY2F0b3Ipe3Euc2FwLmNsZWFyRGVsYXllZENhbGwodGhpcy5faUFuaW1hdGlvblRpbWVvdXQpfWVsc2V7dGhpcy5fJEJ1c3lJbmRpY2F0b3IuY3NzKCJiYWNrZ3JvdW5kLXBvc2l0aW9uIix0aGlzLl9pQnVzeUxlZnQrInB4IDBweCIpO3RoaXMuX2lBbmltYXRpb25UaW1lb3V0PXEuc2FwLmRlbGF5ZWRDYWxsKHRoaXMuX2lCdXN5VGltZVN0ZXAsdGhpcyx0aGlzLl9JRUFuaW1hdGlvbil9fTtCLnNob3c9ZnVuY3Rpb24oZCl7cS5zYXAubG9nLmRlYnVnKCJzYXAudWkuY29yZS5CdXN5SW5kaWNhdG9yLnNob3cgKGRlbGF5OiAiK2QrIikgYXQgIituZXcgRGF0ZSgpLmdldFRpbWUoKSk7aWYoKGQ9PT11bmRlZmluZWQpfHwoKGQhPTApJiYocGFyc2VJbnQoZCwxMCk9PTApKXx8KHBhcnNlSW50KGQsMTApPDApKXtkPXRoaXMuaURFRkFVTFRfREVMQVlfTVN9dGhpcy5iT3BlblJlcXVlc3RlZD10cnVlO2lmKGQ9PT0wKXt0aGlzLl9zaG93Tm93SWZSZXF1ZXN0ZWQoKX1lbHNle3Euc2FwLmRlbGF5ZWRDYWxsKGQsdGhpcywiX3Nob3dOb3dJZlJlcXVlc3RlZCIpfX07Qi5fc2hvd05vd0lmUmVxdWVzdGVkPWZ1bmN0aW9uKCl7cS5zYXAubG9nLmRlYnVnKCJzYXAudWkuY29yZS5CdXN5SW5kaWNhdG9yLl9zaG93Tm93SWZSZXF1ZXN0ZWQgKGJPcGVuUmVxdWVzdGVkOiAiK3RoaXMuYk9wZW5SZXF1ZXN0ZWQrIikgYXQgIituZXcgRGF0ZSgpLmdldFRpbWUoKSk7aWYoIXRoaXMuYk9wZW5SZXF1ZXN0ZWQpe3JldHVybn1pZighZG9jdW1lbnQuYm9keXx8IXNhcC51aS5nZXRDb3JlKCkuaXNJbml0aWFsaXplZCgpKXtxLnNhcC5kZWxheWVkQ2FsbCgxMDAsdGhpcywiX3Nob3dOb3dJZlJlcXVlc3RlZCIpO3JldHVybn10aGlzLmJPcGVuUmVxdWVzdGVkPWZhbHNlO2lmKCF0aGlzLm9Eb21SZWYpe3RoaXMuX2luaXQoKX10aGlzLm9Qb3B1cC5vcGVuKDAsUC5Eb2NrLkNlbnRlckNlbnRlcixQLkRvY2suQ2VudGVyQ2VudGVyLGRvY3VtZW50KTt0aGlzLmZpcmVPcGVuKHskQnVzeTp0aGlzLm9Qb3B1cC5fJCgpfSk7dmFyIGQ9cS5zYXAuZG9tQnlJZChCLnNET01fSUQpO3Euc2FwLmZvY3VzKGQpO3EoImJvZHkiKS5hdHRyKCJhcmlhLWJ1c3kiLHRydWUpfTtCLmhpZGU9ZnVuY3Rpb24oKXtxLnNhcC5sb2cuZGVidWcoInNhcC51aS5jb3JlLkJ1c3lJbmRpY2F0b3IuaGlkZSBhdCAiK25ldyBEYXRlKCkuZ2V0VGltZSgpKTt2YXIgdD1CO3QuYk9wZW5SZXF1ZXN0ZWQ9ZmFsc2U7aWYodC5vRG9tUmVmKXtxKCJib2R5IikucmVtb3ZlQXR0cigiYXJpYS1idXN5Iik7dGhpcy5maXJlQ2xvc2UoeyRCdXN5OnRoaXMub1BvcHVwLl8kKCl9KTt0Lm9Qb3B1cC5jbG9zZSgwKX1kZWxldGUgdGhpcy5fJEJ1c3lJbmRpY2F0b3J9O0IuYXR0YWNoT3Blbj1mdW5jdGlvbihmLGwpe3RoaXMuYXR0YWNoRXZlbnQoQi5NX0VWRU5UUy5PcGVuLGYsbCk7cmV0dXJuIHRoaXN9O0IuZGV0YWNoT3Blbj1mdW5jdGlvbihmLGwpe3RoaXMuZGV0YWNoRXZlbnQoQi5NX0VWRU5UUy5PcGVuLGYsbCk7cmV0dXJuIHRoaXN9O0IuYXR0YWNoQ2xvc2U9ZnVuY3Rpb24oZixsKXt0aGlzLmF0dGFjaEV2ZW50KEIuTV9FVkVOVFMuQ2xvc2UsZixsKTtyZXR1cm4gdGhpc307Qi5kZXRhY2hDbG9zZT1mdW5jdGlvbihmLGwpe3RoaXMuZGV0YWNoRXZlbnQoQi5NX0VWRU5UUy5DbG9zZSxmLGwpO3JldHVybiB0aGlzfTtCLmZpcmVPcGVuPWZ1bmN0aW9uKHApe3RoaXMuZmlyZUV2ZW50KEIuTV9FVkVOVFMuT3BlbixwKX07Qi5maXJlQ2xvc2U9ZnVuY3Rpb24ocCl7dGhpcy5maXJlRXZlbnQoQi5NX0VWRU5UUy5DbG9zZSxwKX07cmV0dXJuIEJ9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS5Db21wb25lbnRDb250YWluZXInKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS5Db21wb25lbnRDb250YWluZXInKTtzYXAudWkuZGVmaW5lKCJzYXAvdWkvY29yZS9Db21wb25lbnRDb250YWluZXIiLFsnLi9saWJyYXJ5JywnLi9Db250cm9sJ10sZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7c2FwLnVpLmNvcmUuQ29udHJvbC5leHRlbmQoInNhcC51aS5jb3JlLkNvbXBvbmVudENvbnRhaW5lciIse21ldGFkYXRhOntsaWJyYXJ5OiJzYXAudWkuY29yZSIscHJvcGVydGllczp7Im5hbWUiOnt0eXBlOiJzdHJpbmciLGdyb3VwOiIiLGRlZmF1bHRWYWx1ZTpudWxsfSwidXJsIjp7dHlwZToic2FwLnVpLmNvcmUuVVJJIixncm91cDoiIixkZWZhdWx0VmFsdWU6bnVsbH0sInNldHRpbmdzIjp7dHlwZToib2JqZWN0Iixncm91cDoiIixkZWZhdWx0VmFsdWU6bnVsbH0sInByb3BhZ2F0ZU1vZGVsIjp7dHlwZToiYm9vbGVhbiIsZ3JvdXA6IiIsZGVmYXVsdFZhbHVlOmZhbHNlfSwid2lkdGgiOnt0eXBlOiJzYXAudWkuY29yZS5DU1NTaXplIixncm91cDoiRGltZW5zaW9uIixkZWZhdWx0VmFsdWU6bnVsbH0sImhlaWdodCI6e3R5cGU6InNhcC51aS5jb3JlLkNTU1NpemUiLGdyb3VwOiJEaW1lbnNpb24iLGRlZmF1bHRWYWx1ZTpudWxsfX0sYXNzb2NpYXRpb25zOnsiY29tcG9uZW50Ijp7dHlwZToic2FwLnVpLmNvcmUuVUlDb21wb25lbnQiLG11bHRpcGxlOmZhbHNlfX19fSk7c2FwLnVpLmNvcmUuQ29tcG9uZW50Q29udGFpbmVyLnByb3RvdHlwZS5nZXRDb21wb25lbnRJbnN0YW5jZT1mdW5jdGlvbigpe3ZhciBjPXRoaXMuZ2V0Q29tcG9uZW50KCk7cmV0dXJuIHNhcC51aS5nZXRDb3JlKCkuZ2V0Q29tcG9uZW50KGMpfTtzYXAudWkuY29yZS5Db21wb25lbnRDb250YWluZXIucHJvdG90eXBlLnNldENvbXBvbmVudD1mdW5jdGlvbihjLHMpe3ZhciBvPXRoaXMuZ2V0Q29tcG9uZW50SW5zdGFuY2UoKTtpZihvKXtvLnNldENvbnRhaW5lcih1bmRlZmluZWQpfXRoaXMuc2V0QXNzb2NpYXRpb24oImNvbXBvbmVudCIsYyxzKTtjPXRoaXMuZ2V0Q29tcG9uZW50SW5zdGFuY2UoKTtpZihjKXtjLnNldENvbnRhaW5lcih0aGlzKTt0aGlzLnByb3BhZ2F0ZVByb3BlcnRpZXMoKX19O3NhcC51aS5jb3JlLkNvbXBvbmVudENvbnRhaW5lci5wcm90b3R5cGUub25CZWZvcmVSZW5kZXJpbmc9ZnVuY3Rpb24oKXt2YXIgYz10aGlzLmdldENvbXBvbmVudEluc3RhbmNlKCk7aWYoIWMpe3ZhciBuPXRoaXMuZ2V0TmFtZSgpO2lmKG4pe2M9c2FwLnVpLmNvbXBvbmVudCh7bmFtZTpuLHVybDp0aGlzLmdldFVybCgpLHNldHRpbmdzOnRoaXMuZ2V0U2V0dGluZ3MoKX0pO3RoaXMuc2V0Q29tcG9uZW50KGMsdHJ1ZSl9fWlmKGMmJmMub25CZWZvcmVSZW5kZXJpbmcpe2Mub25CZWZvcmVSZW5kZXJpbmcoKX19O3NhcC51aS5jb3JlLkNvbXBvbmVudENvbnRhaW5lci5wcm90b3R5cGUub25BZnRlclJlbmRlcmluZz1mdW5jdGlvbigpe3ZhciBjPXRoaXMuZ2V0Q29tcG9uZW50SW5zdGFuY2UoKTtpZihjJiZjLm9uQWZ0ZXJSZW5kZXJpbmcpe2Mub25BZnRlclJlbmRlcmluZygpfX07c2FwLnVpLmNvcmUuQ29tcG9uZW50Q29udGFpbmVyLnByb3RvdHlwZS5leGl0PWZ1bmN0aW9uKCl7dmFyIGM9dGhpcy5nZXRDb21wb25lbnRJbnN0YW5jZSgpO2lmKGMpe2MuZGVzdHJveSgpfX07c2FwLnVpLmNvcmUuQ29tcG9uZW50Q29udGFpbmVyLnByb3RvdHlwZS5wcm9wYWdhdGVQcm9wZXJ0aWVzPWZ1bmN0aW9uKG4pe3ZhciBjPXRoaXMuZ2V0Q29tcG9uZW50SW5zdGFuY2UoKTtpZihjJiZ0aGlzLmdldFByb3BhZ2F0ZU1vZGVsKCkpe3RoaXMuX3Byb3BhZ2F0ZVByb3BlcnRpZXMobixjKTtzYXAudWkuY29yZS5Db250cm9sLnByb3RvdHlwZS5wcm9wYWdhdGVQcm9wZXJ0aWVzLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19O3JldHVybiBzYXAudWkuY29yZS5Db21wb25lbnRDb250YWluZXJ9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS5Db21wb3NpdGVTdXBwb3J0Jykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUuQ29tcG9zaXRlU3VwcG9ydCcpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL0NvbXBvc2l0ZVN1cHBvcnQiLFsnanF1ZXJ5LnNhcC5nbG9iYWwnLCcuL0NvbnRyb2wnLCdzYXAvdWkvbW9kZWwvY29udHJvbC9Db250cm9sTW9kZWwnXSxmdW5jdGlvbihxLEMsYSl7InVzZSBzdHJpY3QiO3ZhciBiPXt9O2IubWl4SW50bz1mdW5jdGlvbihjLGYsbSl7aWYoYXJndW1lbnRzLmxlbmd0aD09MiYmdHlwZW9mIGY9PT0ib2JqZWN0Iil7bT1mO2Y9IkNvbXBvbmVudEZhY3RvcnkifWZ1bmN0aW9uIF8oKXt2YXIgTT1jLmdldE1ldGFkYXRhKCk7ZG97TT1NLmdldFBhcmVudCgpO2lmKE0mJk0uZ2V0Q29tcG9uZW50RmFjdG9yeUNsYXNzKXtyZXR1cm4gTS5nZXRDb21wb25lbnRGYWN0b3J5Q2xhc3MoKX19d2hpbGUoTSk7cmV0dXJuIHNhcC51aS5jb3JlLkNvbXBvbmVudEZhY3Rvcnl9Y1tmXT0oXygpKS5zdWJjbGFzcyhtKTtjLmdldE1ldGFkYXRhKCkuZ2V0Q29tcG9uZW50RmFjdG9yeUNsYXNzPXEuc2FwLmdldHRlcihjW2ZdKTtpZighYy5wcm90b3R5cGUuX2luaXRDb21wb3NpdGVTdXBwb3J0KXtjLnByb3RvdHlwZS5faW5pdENvbXBvc2l0ZVN1cHBvcnQ9ZnVuY3Rpb24ocyl7dmFyIEY9bmV3KHRoaXMuZ2V0TWV0YWRhdGEoKS5nZXRDb21wb25lbnRGYWN0b3J5Q2xhc3MoKSkodGhpcyk7aWYocy5jb21wb25lbnRGYWN0b3J5KXtGLmN1c3RvbWl6ZShzLmNvbXBvbmVudEZhY3RvcnkpO2RlbGV0ZSBzLmNvbXBvbmVudEZhY3Rvcnl9dGhpcy5nZXRDb21wb25lbnRGYWN0b3J5PXEuc2FwLmdldHRlcihGKX19aWYoIWMucHJvdG90eXBlLl9leGl0Q29tcG9zaXRlU3VwcG9ydCl7Yy5wcm90b3R5cGUuX2V4aXRDb21wb3NpdGVTdXBwb3J0PWZ1bmN0aW9uKCl7dGhpcy5nZXRDb21wb25lbnRGYWN0b3J5KCkuZGVzdHJveSgpO2RlbGV0ZSB0aGlzLmdldENvbXBvbmVudEZhY3Rvcnl9fX07c2FwLnVpLmJhc2UuRXZlbnRQcm92aWRlci5leHRlbmQoInNhcC51aS5jb3JlLkNvbXBvbmVudEZhY3RvcnkiLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbihjKXtzYXAudWkuYmFzZS5FdmVudFByb3ZpZGVyLmFwcGx5KHRoaXMpO3RoaXMub0NvbXBvc2l0ZT1jO3JldHVybiB0aGlzfX0pO3NhcC51aS5jb3JlLkNvbXBvbmVudEZhY3RvcnkucHJvdG90eXBlLmF0dGFjaENoYW5nZT1mdW5jdGlvbihmLG8pe3RoaXMuZ2V0TW9kZWwoKTt0aGlzLmF0dGFjaEV2ZW50KCJjaGFuZ2UiLGYsbyk7cmV0dXJuIHRoaXN9O3NhcC51aS5jb3JlLkNvbXBvbmVudEZhY3RvcnkucHJvdG90eXBlLmRldGFjaENoYW5nZT1mdW5jdGlvbihmLG8pe3RoaXMuZ2V0TW9kZWwoKTt0aGlzLmRldGFjaEV2ZW50KCJjaGFuZ2UiLGYsbyk7cmV0dXJuIHRoaXN9O3NhcC51aS5jb3JlLkNvbXBvbmVudEZhY3RvcnkucHJvdG90eXBlLmdldE1vZGVsPWZ1bmN0aW9uKCl7aWYoIXRoaXMub01vZGVsKXt2YXIgdD10aGlzO3RoaXMub01vZGVsPW5ldyBhKHRoaXMub0NvbXBvc2l0ZSk7dGhpcy5vTW9kZWwuX29uY2hhbmdlPWZ1bmN0aW9uKGUpe3QuZmlyZUV2ZW50KCJjaGFuZ2UiLGUuZ2V0UGFyYW1ldGVycyYmZS5nZXRQYXJhbWV0ZXJzKCkpfX1yZXR1cm4gdGhpcy5vTW9kZWx9O3NhcC51aS5jb3JlLkNvbXBvbmVudEZhY3RvcnkucHJvdG90eXBlLmFkZEZhY2FkZUNvbXBvbmVudD1mdW5jdGlvbihlKXt0aGlzLmdldE1vZGVsKCkuYWRkKGUpfTtzYXAudWkuY29yZS5Db21wb25lbnRGYWN0b3J5LnByb3RvdHlwZS5yZW1vdmVGYWNhZGVDb21wb25lbnQ9ZnVuY3Rpb24oZSl7dGhpcy5nZXRNb2RlbCgpLnJlbW92ZShlKX07KGZ1bmN0aW9uKCl7ZnVuY3Rpb24gXyhvLG0sZCl7cS5lYWNoKG0sZnVuY3Rpb24obixmKXtpZihuLmluZGV4T2YoImRlZmF1bHQiKSE9MCl7b1tuXT1mfWlmKGQmJm4uaW5kZXhPZigiY3JlYXRlIik9PTApe29bImRlZmF1bHRDIituLnN1YnN0cmluZygxKV09b1tuXX19KX1mdW5jdGlvbiBjKEIpe3JldHVybiBmdW5jdGlvbihtKXt2YXIgZj1mdW5jdGlvbigpe0IuYXBwbHkodGhpcyxhcmd1bWVudHMpfTtmLnByb3RvdHlwZT1xLnNhcC5uZXdPYmplY3QoQi5wcm90b3R5cGUpO18oZi5wcm90b3R5cGUsbSx0cnVlKTtmLmN1c3RvbWl6ZT1mdW5jdGlvbihtKXtfKGYucHJvdG90eXBlLG0pO3JldHVybiB0aGlzfTtmLnN1YmNsYXNzPWMoZik7cmV0dXJuIGZ9fXNhcC51aS5jb3JlLkNvbXBvbmVudEZhY3Rvcnkuc3ViY2xhc3M9YyhzYXAudWkuY29yZS5Db21wb25lbnRGYWN0b3J5KTtzYXAudWkuY29yZS5Db21wb25lbnRGYWN0b3J5LnByb3RvdHlwZS5jdXN0b21pemU9ZnVuY3Rpb24obSl7Xyh0aGlzLG0pO2lmKHRoaXMub0NvbXBvc2l0ZSYmdGhpcy5vQ29tcG9zaXRlLl9vbkNvbXBvbmVudEZhY3RvcnlDaGFuZ2VkKXt0aGlzLm9Db21wb3NpdGUuX29uQ29tcG9uZW50RmFjdG9yeUNoYW5nZWQoKX1yZXR1cm4gdGhpc319KCkpO3JldHVybiBifSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUuVUlDb21wb25lbnQnKSl7DQovKg0KICogU0FQIFVJIGRldmVsb3BtZW50IHRvb2xraXQgZm9yIEhUTUw1IChTQVBVSTUvT3BlblVJNSkNCiAqIChjKSBDb3B5cmlnaHQgMjAwOS0yMDE0IFNBUCBTRSBvciBhbiBTQVAgYWZmaWxpYXRlIGNvbXBhbnkuIA0KICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAtIHNlZSBMSUNFTlNFLnR4dC4NCiAqLw0KalF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS5VSUNvbXBvbmVudCcpO3NhcC51aS5kZWZpbmUoInNhcC91aS9jb3JlL1VJQ29tcG9uZW50IixbJ2pxdWVyeS5zYXAuZ2xvYmFsJywnLi9Db21wb25lbnQnLCcuL1VJQ29tcG9uZW50TWV0YWRhdGEnLCcuL212Yy9WaWV3J10sZnVuY3Rpb24ocSxDLFUsVil7InVzZSBzdHJpY3QiO3ZhciBhPUMuZXh0ZW5kKCJzYXAudWkuY29yZS5VSUNvbXBvbmVudCIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKGkscyl7dHJ5e0MuYXBwbHkodGhpcyxhcmd1bWVudHMpfWNhdGNoKGUpe2lmKHRoaXMuX29Sb3V0ZXIpe3RoaXMuX29Sb3V0ZXIuZGVzdHJveSgpfXRocm93IGV9fSxtZXRhZGF0YTp7ImFic3RyYWN0Ijp0cnVlLHJvb3RWaWV3Om51bGwscHVibGljTWV0aG9kczpbInJlbmRlciJdLGFnZ3JlZ2F0aW9uczp7InJvb3RDb250cm9sIjp7dHlwZToic2FwLnVpLmNvcmUuQ29udHJvbCIsbXVsdGlwbGU6ZmFsc2UsdmlzaWJpbGl0eToiaGlkZGVuIn19LHJvdXRpbmc6e319fSxVKTthLnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt2YXIgcD17fTtpZih0aGlzLmdldEF1dG9QcmVmaXhJZCgpKXtwLmlkPWZ1bmN0aW9uKGkpe3JldHVybiB0LmNyZWF0ZUlkKGkpfX12YXIgbT10aGlzLmdldE1ldGFkYXRhKCk7dmFyIHI9cS5leHRlbmQoe30sbS5nZXRSb3V0aW5nQ29uZmlnKCkpO3ZhciBSPW0uZ2V0Um91dGVzKCk7aWYoUil7cS5zYXAucmVxdWlyZSgic2FwLnVpLmNvcmUucm91dGluZy5Sb3V0ZXIiKTt2YXIgZj1yLnJvdXRlckNsYXNzfHxzYXAudWkuY29yZS5yb3V0aW5nLlJvdXRlcjtpZih0eXBlb2YgZj09PSJzdHJpbmciKXtmPXEuc2FwLmdldE9iamVjdChmKX10aGlzLl9vUm91dGVyPW5ldyBmKFIscix0aGlzKX1zYXAudWkuYmFzZS5NYW5hZ2VkT2JqZWN0LnJ1bldpdGhPd25lcihmdW5jdGlvbigpe3NhcC51aS5iYXNlLk1hbmFnZWRPYmplY3QucnVuV2l0aFByZXByb2Nlc3NvcnMoZnVuY3Rpb24oKXt0LnNldEFnZ3JlZ2F0aW9uKCJyb290Q29udHJvbCIsdC5jcmVhdGVDb250ZW50KCkpfSxwKX0sdGhpcyk7dmFyIG89dGhpcy5nZXRBZ2dyZWdhdGlvbigicm9vdENvbnRyb2wiKTtpZihvIGluc3RhbmNlb2YgVil7aWYoci50YXJnZXRQYXJlbnQ9PT11bmRlZmluZWQpe3IudGFyZ2V0UGFyZW50PW8uZ2V0SWQoKX19fTthLnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKCl7aWYodGhpcy5fb1JvdXRlcil7dGhpcy5fb1JvdXRlci5kZXN0cm95KCk7ZGVsZXRlIHRoaXMuX29Sb3V0ZXJ9Qy5wcm90b3R5cGUuZGVzdHJveS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9O2EuZ2V0Um91dGVyRm9yPWZ1bmN0aW9uKGMpe3ZhciB2PWM7aWYodiBpbnN0YW5jZW9mIHNhcC51aS5jb3JlLm12Yy5Db250cm9sbGVyKXt2PXYuZ2V0VmlldygpfWlmKHYgaW5zdGFuY2VvZiBWKXt2YXIgbz1DLmdldE93bmVySWRGb3IodiksYj1zYXAudWkuY29tcG9uZW50KG8pO2lmKGIpe3JldHVybiBiLmdldFJvdXRlcigpfWVsc2V7cmV0dXJuIHVuZGVmaW5lZH19fTthLnByb3RvdHlwZS5nZXRSb3V0ZXI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb1JvdXRlcn07YS5wcm90b3R5cGUuZ2V0QXV0b1ByZWZpeElkPWZ1bmN0aW9uKCl7cmV0dXJuIGZhbHNlfTthLnByb3RvdHlwZS5ieUlkPWZ1bmN0aW9uKGkpe3JldHVybiBzYXAudWkuZ2V0Q29yZSgpLmJ5SWQodGhpcy5jcmVhdGVJZChpKSl9O2EucHJvdG90eXBlLmNyZWF0ZUlkPWZ1bmN0aW9uKGkpe2lmKCF0aGlzLmlzUHJlZml4ZWRJZChpKSl7aT10aGlzLmdldElkKCkrIi0tLSIraX1yZXR1cm4gaX07YS5wcm90b3R5cGUuaXNQcmVmaXhlZElkPWZ1bmN0aW9uKGkpe3JldHVybihpJiZpLmluZGV4T2YodGhpcy5nZXRJZCgpKyItLS0iKT09PTApfTthLnByb3RvdHlwZS5jcmVhdGVDb250ZW50PWZ1bmN0aW9uKCl7dmFyIHI9dGhpcy5nZXRNZXRhZGF0YSgpLmdldFJvb3RWaWV3KCk7aWYocil7cmV0dXJuIHNhcC51aS52aWV3KHIpfXJldHVybiBudWxsfTthLnByb3RvdHlwZS5yZW5kZXI9ZnVuY3Rpb24ocil7dmFyIGM9dGhpcy5nZXRBZ2dyZWdhdGlvbigicm9vdENvbnRyb2wiKTtpZihjJiZyKXtyLnJlbmRlckNvbnRyb2woYyl9fTthLnByb3RvdHlwZS5nZXRVSUFyZWE9ZnVuY3Rpb24oKXtyZXR1cm4odGhpcy5vQ29udGFpbmVyP3RoaXMub0NvbnRhaW5lci5nZXRVSUFyZWEoKTpudWxsKX07YS5wcm90b3R5cGUuZ2V0RXZlbnRpbmdQYXJlbnQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRVSUFyZWEoKX07YS5wcm90b3R5cGUuc2V0Q29udGFpbmVyPWZ1bmN0aW9uKGMpe3RoaXMub0NvbnRhaW5lcj1jO3JldHVybiB0aGlzfTthLnByb3RvdHlwZS5vbkJlZm9yZVJlbmRlcmluZz1mdW5jdGlvbigpe307YS5wcm90b3R5cGUub25BZnRlclJlbmRlcmluZz1mdW5jdGlvbigpe307cmV0dXJuIGF9LHRydWUpfTtpZighalF1ZXJ5LnNhcC5pc0RlY2xhcmVkKCdzYXAudWkuY29yZS5tdmMuSFRNTFZpZXcnKSl7DQovKiENCiAqIFNBUCBVSSBkZXZlbG9wbWVudCB0b29sa2l0IGZvciBIVE1MNSAoU0FQVUk1L09wZW5VSTUpDQogKiAoYykgQ29weXJpZ2h0IDIwMDktMjAxNCBTQVAgU0Ugb3IgYW4gU0FQIGFmZmlsaWF0ZSBjb21wYW55LiANCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgLSBzZWUgTElDRU5TRS50eHQuDQogKi8NCmpRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUubXZjLkhUTUxWaWV3Jyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvbXZjL0hUTUxWaWV3IixbJ3NhcC91aS9jb3JlL2xpYnJhcnknLCcuL1ZpZXcnLCdzYXAvdWkvY29yZS9EZWNsYXJhdGl2ZVN1cHBvcnQnLCdzYXAvdWkvY29yZS9SZW5kZXJNYW5hZ2VyJ10sZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7c2FwLnVpLmNvcmUubXZjLlZpZXcuZXh0ZW5kKCJzYXAudWkuY29yZS5tdmMuSFRNTFZpZXciLHttZXRhZGF0YTp7bGlicmFyeToic2FwLnVpLmNvcmUifX0pO3NhcC51aS5odG1sdmlldz1mdW5jdGlvbihpLHYpe3JldHVybiBzYXAudWkudmlldyhpLHYsc2FwLnVpLmNvcmUubXZjLlZpZXdUeXBlLkhUTUwpfTtzYXAudWkuY29yZS5tdmMuSFRNTFZpZXcuX3NUeXBlPXNhcC51aS5jb3JlLm12Yy5WaWV3VHlwZS5IVE1MO3NhcC51aS5jb3JlLm12Yy5IVE1MVmlldy5fbVRlbXBsYXRlcz17fTtzYXAudWkuY29yZS5tdmMuSFRNTFZpZXcuX21BbGxvd2VkU2V0dGluZ3M9eyJ2aWV3TmFtZSI6dHJ1ZSwiY29udHJvbGxlciI6dHJ1ZSwidmlld0NvbnRlbnQiOnRydWUsImNvbnRyb2xsZXJOYW1lIjp0cnVlLCJyZXNvdXJjZUJ1bmRsZU5hbWUiOnRydWUsInJlc291cmNlQnVuZGxlVXJsIjp0cnVlLCJyZXNvdXJjZUJ1bmRsZUxvY2FsZSI6dHJ1ZSwicmVzb3VyY2VCdW5kbGVBbGlhcyI6dHJ1ZX07c2FwLnVpLmNvcmUubXZjLkhUTUxWaWV3Ll9nZXRUZW1wbGF0ZT1mdW5jdGlvbih0KXt2YXIgdT10aGlzLl9nZXRWaWV3VXJsKHQpO3ZhciBoPXRoaXMuX21UZW1wbGF0ZXNbdV07aWYoIWgpe2g9dGhpcy5fbG9hZFRlbXBsYXRlKHQpO3RoaXMuX21UZW1wbGF0ZXNbdV09aH1yZXR1cm4gaH07c2FwLnVpLmNvcmUubXZjLkhUTUxWaWV3LnByb3RvdHlwZS5nZXRDb250cm9sbGVyTmFtZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9jb250cm9sbGVyTmFtZX07c2FwLnVpLmNvcmUubXZjLkhUTUxWaWV3Ll9nZXRWaWV3VXJsPWZ1bmN0aW9uKHQpe3JldHVybiBqUXVlcnkuc2FwLmdldE1vZHVsZVBhdGgodCwiLnZpZXcuaHRtbCIpfTtzYXAudWkuY29yZS5tdmMuSFRNTFZpZXcuX2xvYWRUZW1wbGF0ZT1mdW5jdGlvbih0KXt2YXIgcj1qUXVlcnkuc2FwLmdldFJlc291cmNlTmFtZSh0LCIudmlldy5odG1sIik7cmV0dXJuIGpRdWVyeS5zYXAubG9hZFJlc291cmNlKHIpfTtzYXAudWkuY29yZS5tdmMuSFRNTFZpZXcucHJvdG90eXBlLmluaXRWaWV3U2V0dGluZ3M9ZnVuY3Rpb24ocyl7aWYoIXMpe3Rocm93IG5ldyBFcnJvcigibVNldHRpbmdzIG11c3QgYmUgZ2l2ZW4iKX1pZihzLnZpZXdOYW1lJiZzLnZpZXdDb250ZW50KXt0aHJvdyBuZXcgRXJyb3IoIlZpZXcgbmFtZSBhbmQgdmlldyBjb250ZW50IGFyZSBnaXZlbi4gVGhlcmUgaXMgbm8gcG9pbnQgaW4gZG9pbmcgdGhpcywgc28gcGxlYXNlIGRlY2lkZS4iKX1lbHNlIGlmKCFzLnZpZXdOYW1lJiYhcy52aWV3Q29udGVudCl7dGhyb3cgbmV3IEVycm9yKCJOZWl0aGVyIHZpZXcgbmFtZSBub3IgdmlldyBjb250ZW50IGlzIGdpdmVuLiBPbmUgb2YgdGhlbSBpcyByZXF1aXJlZC4iKX12YXIgaD1zLnZpZXdDb250ZW50fHxzYXAudWkuY29yZS5tdmMuSFRNTFZpZXcuX2dldFRlbXBsYXRlKHMudmlld05hbWUpO3RoaXMuX29UZW1wbGF0ZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTt2YXIgaD1zYXAudWkuY29yZS5SZW5kZXJNYW5hZ2VyLnByZXBhcmVIVE1MNShoKTtpZih0eXBlb2YgaD09PSJzdHJpbmciKXt0aGlzLl9vVGVtcGxhdGUuaW5uZXJIVE1MPWh9ZWxzZXt2YXIgbj1oO3ZhciBmPWRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtmb3IodmFyIGk9MDtpPG4ubGVuZ3RoO2krKyl7Zi5hcHBlbmRDaGlsZChuLml0ZW0oaSkpfXRoaXMuX29UZW1wbGF0ZS5hcHBlbmRDaGlsZChmKX12YXIgbT10aGlzLl9vVGVtcGxhdGUuZ2V0RWxlbWVudHNCeVRhZ05hbWUoInRlbXBsYXRlIilbMF07dmFyIHA9dGhpcy5nZXRNZXRhZGF0YSgpLmdldEFsbFByb3BlcnRpZXMoKTtpZihtKXt2YXIgYT10aGlzO3ZhciBEPXNhcC51aS5jb3JlLkRlY2xhcmF0aXZlU3VwcG9ydDtqUXVlcnkuZWFjaChtLmF0dHJpYnV0ZXMsZnVuY3Rpb24oSSxBKXt2YXIgTj1ELmNvbnZlcnRBdHRyaWJ1dGVUb1NldHRpbmdOYW1lKEEubmFtZSxhLmdldElkKCkpO3ZhciB2PUEudmFsdWU7dmFyIFA9cFtOXTtpZighc1tOXSl7aWYoUCl7c1tOXT1ELmNvbnZlcnRWYWx1ZVRvVHlwZShELmdldFByb3BlcnR5RGF0YVR5cGUoUCksdil9ZWxzZSBpZihzYXAudWkuY29yZS5tdmMuSFRNTFZpZXcuX21BbGxvd2VkU2V0dGluZ3NbTl0pe3NbTl09dn19fSk7dGhpcy5fb1RlbXBsYXRlPW19aWYodGhpcy5fb1RlbXBsYXRlLmNvbnRlbnQpe3ZhciBmPXRoaXMuX29UZW1wbGF0ZS5jb250ZW50O3RoaXMuX29UZW1wbGF0ZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTt0aGlzLl9vVGVtcGxhdGUuYXBwZW5kQ2hpbGQoZil9aWYocy5jb250cm9sbGVyTmFtZSl7dGhpcy5fY29udHJvbGxlck5hbWU9cy5jb250cm9sbGVyTmFtZX1pZigocy5yZXNvdXJjZUJ1bmRsZU5hbWV8fHMucmVzb3VyY2VCdW5kbGVVcmwpJiYoIXMubW9kZWxzfHwhcy5tb2RlbHNbcy5yZXNvdXJjZUJ1bmRsZUFsaWFzXSkpe3ZhciBiPW5ldyBzYXAudWkubW9kZWwucmVzb3VyY2UuUmVzb3VyY2VNb2RlbCh7YnVuZGxlTmFtZTpzLnJlc291cmNlQnVuZGxlTmFtZSxidW5kbGVVcmw6cy5yZXNvdXJjZUJ1bmRsZVVybCxidW5kbGVMb2NhbGU6cy5yZXNvdXJjZUJ1bmRsZUxvY2FsZX0pO3RoaXMuc2V0TW9kZWwoYixzLnJlc291cmNlQnVuZGxlQWxpYXMpfX07c2FwLnVpLmNvcmUubXZjLkhUTUxWaWV3LnByb3RvdHlwZS5vbkNvbnRyb2xsZXJDb25uZWN0ZWQ9ZnVuY3Rpb24oYyl7dmFyIHM9dGhpcztzYXAudWkuYmFzZS5NYW5hZ2VkT2JqZWN0LnJ1bldpdGhQcmVwcm9jZXNzb3JzKGZ1bmN0aW9uKCl7c2FwLnVpLmNvcmUuRGVjbGFyYXRpdmVTdXBwb3J0LmNvbXBpbGUocy5fb1RlbXBsYXRlLHMpfSl9O3NhcC51aS5jb3JlLm12Yy5IVE1MVmlldy5wcm90b3R5cGUuZXhpdD1mdW5jdGlvbigpe3RoaXMuX29UZW1wbGF0ZT1udWxsO3NhcC51aS5jb3JlLm12Yy5WaWV3LnByb3RvdHlwZS5leGl0LmNhbGwodGhpcyk7aWYodGhpcy5fY29ubmVjdGVkQ29udHJvbHMpe2Zvcih2YXIgaT0wO2k8dGhpcy5fY29ubmVjdGVkQ29udHJvbHMubGVuZ3RoO2krKyl7dGhpcy5fY29ubmVjdGVkQ29udHJvbHNbaV0uZGVzdHJveSgpfXRoaXMuX2Nvbm5lY3RlZENvbnRyb2xzPW51bGx9fTtzYXAudWkuY29yZS5tdmMuSFRNTFZpZXcucHJvdG90eXBlLmNvbm5lY3RDb250cm9sPWZ1bmN0aW9uKGMpe3RoaXMuX2Nvbm5lY3RlZENvbnRyb2xzPXRoaXMuX2Nvbm5lY3RlZENvbnRyb2xzfHxbXTt0aGlzLl9jb25uZWN0ZWRDb250cm9scy5wdXNoKGMpfTtyZXR1cm4gc2FwLnVpLmNvcmUubXZjLkhUTUxWaWV3fSx0cnVlKX07aWYoIWpRdWVyeS5zYXAuaXNEZWNsYXJlZCgnc2FwLnVpLmNvcmUubXZjLkpTT05WaWV3Jykpe2pRdWVyeS5zYXAuZGVjbGFyZSgnc2FwLnVpLmNvcmUubXZjLkpTT05WaWV3Jyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvbXZjL0pTT05WaWV3IixbJ3NhcC91aS9jb3JlL2xpYnJhcnknLCcuL1ZpZXcnXSxmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0IjtzYXAudWkuY29yZS5tdmMuVmlldy5leHRlbmQoInNhcC51aS5jb3JlLm12Yy5KU09OVmlldyIse21ldGFkYXRhOntsaWJyYXJ5OiJzYXAudWkuY29yZSJ9fSk7KGZ1bmN0aW9uKCl7c2FwLnVpLmpzb252aWV3PWZ1bmN0aW9uKGksdil7cmV0dXJuIHNhcC51aS52aWV3KGksdixzYXAudWkuY29yZS5tdmMuVmlld1R5cGUuSlNPTil9O3NhcC51aS5jb3JlLm12Yy5KU09OVmlldy5fc1R5cGU9c2FwLnVpLmNvcmUubXZjLlZpZXdUeXBlLkpTT047c2FwLnVpLmNvcmUubXZjLkpTT05WaWV3LnByb3RvdHlwZS5pbml0Vmlld1NldHRpbmdzPWZ1bmN0aW9uKHMpe2lmKCFzKXt0aHJvdyBuZXcgRXJyb3IoIm1TZXR0aW5ncyBtdXN0IGJlIGdpdmVuIil9aWYocy52aWV3TmFtZSYmcy52aWV3Q29udGVudCl7dGhyb3cgbmV3IEVycm9yKCJWaWV3IG5hbWUgYW5kIHZpZXcgY29udGVudCBhcmUgZ2l2ZW4uIFRoZXJlIGlzIG5vIHBvaW50IGluIGRvaW5nIHRoaXMsIHNvIHBsZWFzZSBkZWNpZGUuIil9ZWxzZSBpZighcy52aWV3TmFtZSYmIXMudmlld0NvbnRlbnQpe3Rocm93IG5ldyBFcnJvcigiTmVpdGhlciB2aWV3IG5hbWUgbm9yIHZpZXcgY29udGVudCBpcyBnaXZlbi4gT25lIG9mIHRoZW0gaXMgcmVxdWlyZWQuIil9aWYocy52aWV3TmFtZSl7dGhpcy5fbG9hZFRlbXBsYXRlKHMudmlld05hbWUpfWVsc2UgaWYocy52aWV3Q29udGVudCl7dGhpcy5tUHJvcGVydGllc1sidmlld0NvbnRlbnQiXT1zLnZpZXdDb250ZW50O2lmKHR5cGVvZiBzLnZpZXdDb250ZW50PT09InN0cmluZyIpe3RoaXMuX29KU09OVmlldz1qUXVlcnkucGFyc2VKU09OKHMudmlld0NvbnRlbnQpO2lmKCF0aGlzLl9vSlNPTlZpZXcpe3Rocm93IG5ldyBFcnJvcigiZXJyb3Igd2hlbiBwYXJzaW5nIHZpZXdDb250ZW50OiAiK3Mudmlld0NvbnRlbnQpfX1lbHNlIGlmKHR5cGVvZiBzLnZpZXdDb250ZW50PT09Im9iamVjdCIpe3RoaXMuX29KU09OVmlldz1zLnZpZXdDb250ZW50fWVsc2V7dGhyb3cgbmV3IEVycm9yKCJ2aWV3Q29udGVudCBtdXN0IGJlIGEgSlNPTiBzdHJpbmcgb3Igb2JqZWN0LCBidXQgaXMgYSAiKyh0eXBlb2Ygcy52aWV3Q29udGVudCkpfX1lbHNle31pZigodGhpcy5fb0pTT05WaWV3LnJlc291cmNlQnVuZGxlTmFtZXx8dGhpcy5fb0pTT05WaWV3LnJlc291cmNlQnVuZGxlVXJsKSYmKCFzLm1vZGVsc3x8IXMubW9kZWxzW3RoaXMuX29KU09OVmlldy5yZXNvdXJjZUJ1bmRsZUFsaWFzXSkpe3ZhciBtPW5ldyBzYXAudWkubW9kZWwucmVzb3VyY2UuUmVzb3VyY2VNb2RlbCh7YnVuZGxlTmFtZTp0aGlzLl9vSlNPTlZpZXcucmVzb3VyY2VCdW5kbGVOYW1lLGJ1bmRsZVVybDp0aGlzLl9vSlNPTlZpZXcucmVzb3VyY2VCdW5kbGVVcmx9KTt0aGlzLnNldE1vZGVsKG0sdGhpcy5fb0pTT05WaWV3LnJlc291cmNlQnVuZGxlQWxpYXMpfX07c2FwLnVpLmNvcmUubXZjLkpTT05WaWV3LnByb3RvdHlwZS5vbkNvbnRyb2xsZXJDb25uZWN0ZWQ9ZnVuY3Rpb24oYyl7dmFyIHQ9dGhpcztzYXAudWkuYmFzZS5NYW5hZ2VkT2JqZWN0LnJ1bldpdGhQcmVwcm9jZXNzb3JzKGZ1bmN0aW9uKCl7dC5hcHBseVNldHRpbmdzKHtjb250ZW50OnQuX29KU09OVmlldy5jb250ZW50fSl9LHtpZDpmdW5jdGlvbihpKXtyZXR1cm4gdC5jcmVhdGVJZChpKX0sc2V0dGluZ3M6ZnVuY3Rpb24ocyl7dmFyIG09dGhpcy5nZXRNZXRhZGF0YSgpLHY9bS5nZXRKU09OS2V5cygpLGssVixLO2ZvcihrIGluIHMpe2lmKEs9dltrXSl7Vj1zW2tdO3N3aXRjaChLLl9pS2luZCl7Y2FzZSAzOnNba109dC5jcmVhdGVJZChWKTticmVhaztjYXNlIDU6aWYodHlwZW9mIHNba109PT0ic3RyaW5nIil7c1trXT1bY1tzW2tdXSxjXX1icmVha319fX19KX07c2FwLnVpLmNvcmUubXZjLkpTT05WaWV3LnByb3RvdHlwZS5fbG9hZFRlbXBsYXRlPWZ1bmN0aW9uKHQpe3ZhciByPWpRdWVyeS5zYXAuZ2V0UmVzb3VyY2VOYW1lKHQsIi52aWV3Lmpzb24iKTt0aGlzLl9vSlNPTlZpZXc9alF1ZXJ5LnNhcC5sb2FkUmVzb3VyY2Uocil9O3NhcC51aS5jb3JlLm12Yy5KU09OVmlldy5wcm90b3R5cGUuZ2V0Q29udHJvbGxlck5hbWU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb0pTT05WaWV3LmNvbnRyb2xsZXJOYW1lfX0oKSk7cmV0dXJuIHNhcC51aS5jb3JlLm12Yy5KU09OVmlld30sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLm12Yy5KU1ZpZXcnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS5tdmMuSlNWaWV3Jyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvbXZjL0pTVmlldyIsWydzYXAvdWkvY29yZS9saWJyYXJ5JywnLi9WaWV3J10sZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7c2FwLnVpLmNvcmUubXZjLlZpZXcuZXh0ZW5kKCJzYXAudWkuY29yZS5tdmMuSlNWaWV3Iix7bWV0YWRhdGE6e2xpYnJhcnk6InNhcC51aS5jb3JlIn19KTsoZnVuY3Rpb24oKXt2YXIgcj17fTtzYXAudWkuanN2aWV3PWZ1bmN0aW9uKGksdil7dmFyIHM9e307aWYodiYmdHlwZW9mKHYpPT0ic3RyaW5nIil7cy52aWV3TmFtZT12O3MuY29udHJvbGxlcj1hcmd1bWVudHNbMl07dmFyIFY9bmV3IHNhcC51aS5jb3JlLm12Yy5KU1ZpZXcoaSxzKTtyZXR1cm4gVn1lbHNlIGlmKHYmJnR5cGVvZih2KT09Im9iamVjdCIpe3JbaV09djtqUXVlcnkuc2FwLmRlY2xhcmUoe21vZE5hbWU6aSx0eXBlOiJ2aWV3In0sZmFsc2UpfWVsc2UgaWYoYXJndW1lbnRzLmxlbmd0aD09MSYmdHlwZW9mKGFyZ3VtZW50c1swXSk9PSJzdHJpbmciKXtzLnZpZXdOYW1lPWk7cy5jb250cm9sbGVyPWFyZ3VtZW50c1sxXTt2YXIgVj1zLmlkP25ldyBzYXAudWkuY29yZS5tdmMuSlNWaWV3KHMuaWQscyk6bmV3IHNhcC51aS5jb3JlLm12Yy5KU1ZpZXcocyk7cmV0dXJuIFZ9ZWxzZXt0aHJvdyBuZXcgRXJyb3IoIldyb25nIGFyZ3VtZW50cyEgRWl0aGVyIGNhbGwgc2FwLnVpLmpzdmlldyhbc0lkLF0gc1ZpZXdOYW1lKSB0byBpbnN0YW50aWF0ZSBhIFZpZXcgb3Igc2FwLnVpLmpzdmlldyhzVmlld05hbWUsIG9WaWV3SW1wbCkgdG8gZGVmaW5lIGEgVmlldyB0eXBlLiIpfX07c2FwLnVpLmNvcmUubXZjLkpTVmlldy5wcm90b3R5cGUuaW5pdFZpZXdTZXR0aW5ncz1mdW5jdGlvbihzKXtpZighcltzLnZpZXdOYW1lXSl7alF1ZXJ5LnNhcC5yZXF1aXJlKHttb2ROYW1lOnMudmlld05hbWUsdHlwZToidmlldyJ9KX1qUXVlcnkuZXh0ZW5kKHRoaXMscltzLnZpZXdOYW1lXSl9O3NhcC51aS5jb3JlLm12Yy5KU1ZpZXcucHJvdG90eXBlLm9uQ29udHJvbGxlckNvbm5lY3RlZD1mdW5jdGlvbihjKXt2YXIgdD10aGlzO3ZhciBwPXt9O2lmKHRoaXMuZ2V0QXV0b1ByZWZpeElkKCkpe3AuaWQ9ZnVuY3Rpb24oaSl7cmV0dXJuIHQuY3JlYXRlSWQoaSl9fXNhcC51aS5iYXNlLk1hbmFnZWRPYmplY3QucnVuV2l0aFByZXByb2Nlc3NvcnMoZnVuY3Rpb24oKXt0LmFwcGx5U2V0dGluZ3Moe2NvbnRlbnQ6dC5jcmVhdGVDb250ZW50KGMpfSl9LHApfTtzYXAudWkuY29yZS5tdmMuSlNWaWV3LnByb3RvdHlwZS5nZXRBdXRvUHJlZml4SWQ9ZnVuY3Rpb24oKXtyZXR1cm4gZmFsc2V9fSgpKTtyZXR1cm4gc2FwLnVpLmNvcmUubXZjLkpTVmlld30sdHJ1ZSl9O2lmKCFqUXVlcnkuc2FwLmlzRGVjbGFyZWQoJ3NhcC51aS5jb3JlLm12Yy5UZW1wbGF0ZVZpZXcnKSl7alF1ZXJ5LnNhcC5kZWNsYXJlKCdzYXAudWkuY29yZS5tdmMuVGVtcGxhdGVWaWV3Jyk7c2FwLnVpLmRlZmluZSgic2FwL3VpL2NvcmUvbXZjL1RlbXBsYXRlVmlldyIsWydzYXAvdWkvY29yZS9saWJyYXJ5JywnLi9WaWV3J10sZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7c2FwLnVpLmNvcmUubXZjLlZpZXcuZXh0ZW5kKCJzYXAudWkuY29yZS5tdmMuVGVtcGxhdGVWaWV3Iix7bWV0YWRhdGE6e2xpYnJhcnk6InNhcC51aS5jb3JlIn19KTsoZnVuY3Rpb24oKXtzYXAudWkudGVtcGxhdGV2aWV3PWZ1bmN0aW9uKGksdil7cmV0dXJuIHNhcC51aS52aWV3KGksdixzYXAudWkuY29yZS5tdmMuVmlld1R5cGUuVGVtcGxhdGUpfTtzYXAudWkuY29yZS5tdmMuVGVtcGxhdGVWaWV3Ll9zVHlwZT1zYXAudWkuY29yZS5tdmMuVmlld1R5cGUuVGVtcGxhdGU7c2FwLnVpLmNvcmUubXZjLlRlbXBsYXRlVmlldy5wcm90b3R5cGUuZ2V0Q29udHJvbGxlck5hbWU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc0NvbnRyb2xsZXJOYW1lfTtzYXAudWkuY29yZS5tdmMuVGVtcGxhdGVWaWV3Ll9nZXRWaWV3VXJsPWZ1bmN0aW9uKHQpe3JldHVybiBqUXVlcnkuc2FwLmdldE1vZHVsZVBhdGgodCwiLnZpZXcudG1wbCIpfTtzYXAudWkuY29yZS5tdmMuVGVtcGxhdGVWaWV3LnByb3RvdHlwZS5pbml0Vmlld1NldHRpbmdzPWZ1bmN0aW9uKHMpe2lmKCFzKXt0aHJvdyBuZXcgRXJyb3IoIm1TZXR0aW5ncyBtdXN0IGJlIGdpdmVuIil9aWYoIXMudmlld05hbWUpe3Rocm93IG5ldyBFcnJvcigiTm8gdmlldyBuYW1lIGlzIGdpdmVuLiIpfXRoaXMuX29UZW1wbGF0ZT1zYXAudWkudGVtcGxhdGUoe2lkOnRoaXMuZ2V0SWQoKSxzcmM6c2FwLnVpLmNvcmUubXZjLlRlbXBsYXRlVmlldy5fZ2V0Vmlld1VybChzLnZpZXdOYW1lKX0pO3RoaXMuX3NDb250cm9sbGVyTmFtZT10aGlzLl9vVGVtcGxhdGUuX3NDb250cm9sbGVyTmFtZTt0aGlzLl9vVGVtcGxhdGU9dGhpcy5fb1RlbXBsYXRlLmNyZWF0ZUNvbnRyb2wodW5kZWZpbmVkLHVuZGVmaW5lZCx0aGlzKTt0aGlzLmFkZENvbnRlbnQodGhpcy5fb1RlbXBsYXRlKX19KCkpO3JldHVybiBzYXAudWkuY29yZS5tdmMuVGVtcGxhdGVWaWV3fSx0cnVlKX07c2FwLnVpLmdldENvcmUoKS5ib290JiZzYXAudWkuZ2V0Q29yZSgpLmJvb3QoKTsNCn0gY2F0Y2gob0Vycm9yKSB7CmlmIChvRXJyb3IubmFtZSAhPSAiUmVzdGFydCIpIHsgdGhyb3cgb0Vycm9yOyB9Cn0K",
                "headers": {
                    "Accept-Ranges": "bytes",
                    "Last-Modified": "Fri, 07 Nov 2014 21:26:46 GMT",
                    "Content-Length": "1088349",
                    "Date": "Fri, 07 Nov 2014 21:27:04 GMT",
                    "Content-Type": "application/javascript"
                },
                "cookies": [],
                "mimeType": "script",
                "host": "localhost",
                "protocol": "http",
                "port": 9999,
                "inScope": false,
                "toolFlag": 16962,
                "referenceID": 0,
                "messageType": "response"
            },
            "messageType": "requestResponse"
        }
    ],
    "inScope": true,
    "messageType": "scanIssue"
}