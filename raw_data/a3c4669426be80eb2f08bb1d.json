{
    "url": "http://localhost:9999/futurepress/epub.js/libs/polymer/platform.native.min.js",
    "host": "localhost",
    "port": 9999,
    "protocol": "http",
    "name": "Cross-site scripting (DOM-based)",
    "issueType": 2097936,
    "severity": "High",
    "confidence": "Firm",
    "issueBackground": "DOM-based cross-site scripting vulnerabilities arise when a client-side script within an application's response reads data from a controllable part of the DOM (for example, the URL), and writes this data into the HTML document in an unsafe way. An attacker may be able to use the vulnerability to construct a URL which, if visited by another application user, will cause JavaScript code supplied by the attacker to execute within the user's browser in the context of that user's session with the application.<br><br>The attacker-supplied code can perform a wide variety of actions, such as stealing the victim's session token or login credentials, performing arbitrary actions on the victim's behalf, and logging their keystrokes.<br><br>Users can be induced to visit the attacker's crafted URL in various ways, similar to the usual attack delivery vectors for reflected cross-site scripting vulnerabilities. ",
    "remediationBackground": "Static analysis of code to identify vulnerabilities of this kind may lead to false positives that are not actually exploitable. You should review the highlighted code and related execution paths to determine whether the application is indeed vulnerable, or whether mitigations are in place that would prevent exploitation.<br><br>The most effective way to avoid DOM-based cross-site scripting vulnerabilities is not to dynamically write data into the HTML document that originated from any untrusted source. If the desired functionality of the application means that this behavior is unavoidable, then defenses must be implemented within the client-side code to prevent malicious data from introducing script code into the document. In many cases, the relevant data can be validated on a whitelist basis, to allow only content that is known to be safe. In other cases, it will be necessary to sanitize or encode the data. This can be a complex task, and depending on the context that the data is to be inserted may need to involve a combination of JavaScript escaping, HTML encoding, and URL encoding, in the appropriate sequence.",
    "issueDetail": "The application may be vulnerable to DOM-based cross-site scripting. Data is read from <b>the 'baseURI' property of a DOM element</b> and written to <b>the 'setAttribute()' function of a DOM element</b> via the following statement:<ul><li>d.setAttribu...(\"href\" , document.baseURI) </li></ul>",
    "requestResponses": [
        {
            "request": {
                "host": "localhost",
                "port": 9999,
                "protocol": "http",
                "url": "http://localhost:9999/futurepress/epub.js/libs/polymer/platform.native.min.js",
                "path": "/futurepress/epub.js/libs/polymer/platform.native.min.js",
                "httpVersion": "HTTP/1.1",
                "method": "GET",
                "headers": {
                    "Host": "localhost:9999"
                },
                "body": "",
                "raw": "R0VUIC9mdXR1cmVwcmVzcy9lcHViLmpzL2xpYnMvcG9seW1lci9wbGF0Zm9ybS5uYXRpdmUubWluLmpzIEhUVFAvMS4xDQpIb3N0OiBsb2NhbGhvc3Q6OTk5OQ0KDQo=",
                "inScope": true,
                "toolFlag": 16962,
                "referenceID": 0,
                "messageType": "request"
            },
            "response": {
                "statusCode": 200,
                "raw": "SFRUUC8xLjEgMjAwIE9LDQpDb250ZW50LUxlbmd0aDogOTQ2ODgNCkFjY2VwdC1SYW5nZXM6IGJ5dGVzDQpDb250ZW50LVR5cGU6IGFwcGxpY2F0aW9uL2phdmFzY3JpcHQNCkRhdGU6IFRodSwgMDYgTm92IDIwMTQgMjM6MjI6MTIgR01UDQpMYXN0LU1vZGlmaWVkOiBUaHUsIDA2IE5vdiAyMDE0IDIzOjIyOjEyIEdNVA0KDQovLyBDb3B5cmlnaHQgKGMpIDIwMTIgVGhlIFBvbHltZXIgQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KLy8KLy8gUmVkaXN0cmlidXRpb24gYW5kIHVzZSBpbiBzb3VyY2UgYW5kIGJpbmFyeSBmb3Jtcywgd2l0aCBvciB3aXRob3V0Ci8vIG1vZGlmaWNhdGlvbiwgYXJlIHBlcm1pdHRlZCBwcm92aWRlZCB0aGF0IHRoZSBmb2xsb3dpbmcgY29uZGl0aW9ucyBhcmUKLy8gbWV0OgovLwovLyAgICAqIFJlZGlzdHJpYnV0aW9ucyBvZiBzb3VyY2UgY29kZSBtdXN0IHJldGFpbiB0aGUgYWJvdmUgY29weXJpZ2h0Ci8vIG5vdGljZSwgdGhpcyBsaXN0IG9mIGNvbmRpdGlvbnMgYW5kIHRoZSBmb2xsb3dpbmcgZGlzY2xhaW1lci4KLy8gICAgKiBSZWRpc3RyaWJ1dGlvbnMgaW4gYmluYXJ5IGZvcm0gbXVzdCByZXByb2R1Y2UgdGhlIGFib3ZlCi8vIGNvcHlyaWdodCBub3RpY2UsIHRoaXMgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIKLy8gaW4gdGhlIGRvY3VtZW50YXRpb24gYW5kL29yIG90aGVyIG1hdGVyaWFscyBwcm92aWRlZCB3aXRoIHRoZQovLyBkaXN0cmlidXRpb24uCi8vICAgICogTmVpdGhlciB0aGUgbmFtZSBvZiBHb29nbGUgSW5jLiBub3IgdGhlIG5hbWVzIG9mIGl0cwovLyBjb250cmlidXRvcnMgbWF5IGJlIHVzZWQgdG8gZW5kb3JzZSBvciBwcm9tb3RlIHByb2R1Y3RzIGRlcml2ZWQgZnJvbQovLyB0aGlzIHNvZnR3YXJlIHdpdGhvdXQgc3BlY2lmaWMgcHJpb3Igd3JpdHRlbiBwZXJtaXNzaW9uLgovLwovLyBUSElTIFNPRlRXQVJFIElTIFBST1ZJREVEIEJZIFRIRSBDT1BZUklHSFQgSE9MREVSUyBBTkQgQ09OVFJJQlVUT1JTCi8vICJBUyBJUyIgQU5EIEFOWSBFWFBSRVNTIE9SIElNUExJRUQgV0FSUkFOVElFUywgSU5DTFVESU5HLCBCVVQgTk9UCi8vIExJTUlURUQgVE8sIFRIRSBJTVBMSUVEIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZIEFORCBGSVRORVNTIEZPUgovLyBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBUkUgRElTQ0xBSU1FRC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIENPUFlSSUdIVAovLyBPV05FUiBPUiBDT05UUklCVVRPUlMgQkUgTElBQkxFIEZPUiBBTlkgRElSRUNULCBJTkRJUkVDVCwgSU5DSURFTlRBTCwKLy8gU1BFQ0lBTCwgRVhFTVBMQVJZLCBPUiBDT05TRVFVRU5USUFMIERBTUFHRVMgKElOQ0xVRElORywgQlVUIE5PVAovLyBMSU1JVEVEIFRPLCBQUk9DVVJFTUVOVCBPRiBTVUJTVElUVVRFIEdPT0RTIE9SIFNFUlZJQ0VTOyBMT1NTIE9GIFVTRSwKLy8gREFUQSwgT1IgUFJPRklUUzsgT1IgQlVTSU5FU1MgSU5URVJSVVBUSU9OKSBIT1dFVkVSIENBVVNFRCBBTkQgT04gQU5ZCi8vIFRIRU9SWSBPRiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQ09OVFJBQ1QsIFNUUklDVCBMSUFCSUxJVFksIE9SIFRPUlQKLy8gKElOQ0xVRElORyBORUdMSUdFTkNFIE9SIE9USEVSV0lTRSkgQVJJU0lORyBJTiBBTlkgV0FZIE9VVCBPRiBUSEUgVVNFCi8vIE9GIFRISVMgU09GVFdBUkUsIEVWRU4gSUYgQURWSVNFRCBPRiBUSEUgUE9TU0lCSUxJVFkgT0YgU1VDSCBEQU1BR0UuCmZ1bmN0aW9uIFBvaW50ZXJHZXN0dXJlRXZlbnQoYSxiKXt2YXIgYz1ifHx7fSxkPWRvY3VtZW50LmNyZWF0ZUV2ZW50KCJFdmVudCIpLGU9e2J1YmJsZXM6ITAsY2FuY2VsYWJsZTohMH07cmV0dXJuIE9iamVjdC5rZXlzKGUpLmZvckVhY2goZnVuY3Rpb24oYSl7YSBpbiBjJiYoZVthXT1jW2FdKX0pLGQuaW5pdEV2ZW50KGEsZS5idWJibGVzLGUuY2FuY2VsYWJsZSksT2JqZWN0LmtleXMoYykuZm9yRWFjaChmdW5jdGlvbihhKXtkW2FdPWJbYV19KSxkLnByZXZlbnRUYXA9dGhpcy5wcmV2ZW50VGFwLGR9dmFyIFNpZGVUYWJsZTtpZigidW5kZWZpbmVkIiE9dHlwZW9mIFdlYWtNYXAmJm5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZigiRmlyZWZveC8iKTwwP1NpZGVUYWJsZT1XZWFrTWFwOmZ1bmN0aW9uKCl7dmFyIGE9T2JqZWN0LmRlZmluZVByb3BlcnR5LGI9T2JqZWN0Lmhhc093blByb3BlcnR5LGM9KG5ldyBEYXRlKS5nZXRUaW1lKCklMWU5O1NpZGVUYWJsZT1mdW5jdGlvbigpe3RoaXMubmFtZT0iX19zdCIrKDFlOSpNYXRoLnJhbmRvbSgpPj4+MCkrKGMrKyArIl9fIil9LFNpZGVUYWJsZS5wcm90b3R5cGU9e3NldDpmdW5jdGlvbihiLGMpe2EoYix0aGlzLm5hbWUse3ZhbHVlOmMsd3JpdGFibGU6ITB9KX0sZ2V0OmZ1bmN0aW9uKGEpe3JldHVybiBiLmNhbGwoYSx0aGlzLm5hbWUpP2FbdGhpcy5uYW1lXTp2b2lkIDB9LCJkZWxldGUiOmZ1bmN0aW9uKGEpe3RoaXMuc2V0KGEsdm9pZCAwKX19fSgpLGZ1bmN0aW9uKCl7d2luZG93LnRlbXBsYXRlQ29udGVudD13aW5kb3cudGVtcGxhdGVDb250ZW50fHxmdW5jdGlvbihhKXtyZXR1cm4gYS5jb250ZW50fSx3aW5kb3cud3JhcD13aW5kb3cudW53cmFwPWZ1bmN0aW9uKGEpe3JldHVybiBhfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhIVE1MRWxlbWVudC5wcm90b3R5cGUse3NoYWRvd1Jvb3Q6e2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLndlYmtpdFNoYWRvd1Jvb3R9fSxjcmVhdGVTaGFkb3dSb290Ont2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLndlYmtpdENyZWF0ZVNoYWRvd1Jvb3QoKX19fSksd2luZG93LnRlbXBsYXRlQ29udGVudD1mdW5jdGlvbihhKXtpZih3aW5kb3cuSFRNTFRlbXBsYXRlRWxlbWVudCYmSFRNTFRlbXBsYXRlRWxlbWVudC5ib290c3RyYXAmJkhUTUxUZW1wbGF0ZUVsZW1lbnQuYm9vdHN0cmFwKGEpLCFhLmNvbnRlbnQmJiFhLl9jb250ZW50KXtmb3IodmFyIGI9ZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO2EuZmlyc3RDaGlsZDspYi5hcHBlbmRDaGlsZChhLmZpcnN0Q2hpbGQpO2EuX2NvbnRlbnQ9Yn1yZXR1cm4gYS5jb250ZW50fHxhLl9jb250ZW50fX0oKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEpe2Zvcih2YXIgYj1hfHx7fSxkPTE7ZDxhcmd1bWVudHMubGVuZ3RoO2QrKyl7dmFyIGU9YXJndW1lbnRzW2RdO3RyeXtmb3IodmFyIGYgaW4gZSljKGYsZSxiKX1jYXRjaChnKXt9fXJldHVybiBifWZ1bmN0aW9uIGMoYSxiLGMpe3ZhciBlPWQoYixhKTtPYmplY3QuZGVmaW5lUHJvcGVydHkoYyxhLGUpfWZ1bmN0aW9uIGQoYSxiKXtpZihhKXt2YXIgYz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGEsYik7cmV0dXJuIGN8fGQoT2JqZWN0LmdldFByb3RvdHlwZU9mKGEpLGIpfX1GdW5jdGlvbi5wcm90b3R5cGUuYmluZHx8KEZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMsYz1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMSk7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGQ9Yy5zbGljZSgpO3JldHVybiBkLnB1c2guYXBwbHkoZCxhcmd1bWVudHMpLGIuYXBwbHkoYSxkKX19KSxhLm1peGluPWJ9KHdpbmRvdy5QbGF0Zm9ybSksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSxiLGMpe3ZhciBkPSJzdHJpbmciPT10eXBlb2YgYT9kb2N1bWVudC5jcmVhdGVFbGVtZW50KGEpOmEuY2xvbmVOb2RlKCEwKTtpZihkLmlubmVySFRNTD1iLGMpZm9yKHZhciBlIGluIGMpZC5zZXRBdHRyaWJ1dGUoZSxjW2VdKTtyZXR1cm4gZH12YXIgYz1ET01Ub2tlbkxpc3QucHJvdG90eXBlLmFkZCxkPURPTVRva2VuTGlzdC5wcm90b3R5cGUucmVtb3ZlO0RPTVRva2VuTGlzdC5wcm90b3R5cGUuYWRkPWZ1bmN0aW9uKCl7Zm9yKHZhciBhPTA7YTxhcmd1bWVudHMubGVuZ3RoO2ErKyljLmNhbGwodGhpcyxhcmd1bWVudHNbYV0pfSxET01Ub2tlbkxpc3QucHJvdG90eXBlLnJlbW92ZT1mdW5jdGlvbigpe2Zvcih2YXIgYT0wO2E8YXJndW1lbnRzLmxlbmd0aDthKyspZC5jYWxsKHRoaXMsYXJndW1lbnRzW2FdKX0sRE9NVG9rZW5MaXN0LnByb3RvdHlwZS50b2dnbGU9ZnVuY3Rpb24oYSxiKXsxPT1hcmd1bWVudHMubGVuZ3RoJiYoYj0hdGhpcy5jb250YWlucyhhKSksYj90aGlzLmFkZChhKTp0aGlzLnJlbW92ZShhKX0sRE9NVG9rZW5MaXN0LnByb3RvdHlwZS5zd2l0Y2g9ZnVuY3Rpb24oYSxiKXthJiZ0aGlzLnJlbW92ZShhKSxiJiZ0aGlzLmFkZChiKX07dmFyIGU9ZnVuY3Rpb24oKXtyZXR1cm4gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwodGhpcyl9LGY9d2luZG93Lk5hbWVkTm9kZU1hcHx8d2luZG93Lk1vek5hbWVkQXR0ck1hcHx8e307Tm9kZUxpc3QucHJvdG90eXBlLmFycmF5PWUsZi5wcm90b3R5cGUuYXJyYXk9ZSxIVE1MQ29sbGVjdGlvbi5wcm90b3R5cGUuYXJyYXk9ZTt2YXIgZz1mdW5jdGlvbihhLGIpe2UuY2FsbCh0aGlzKS5mb3JFYWNoKGEsYil9O2lmKE5vZGVMaXN0LnByb3RvdHlwZS5mb3JFYWNoPWcsZi5wcm90b3R5cGUuZm9yRWFjaD1nLEhUTUxDb2xsZWN0aW9uLnByb3RvdHlwZS5mb3JFYWNoPWcsIXdpbmRvdy5wZXJmb3JtYW5jZSl7dmFyIGg9RGF0ZS5ub3coKTt3aW5kb3cucGVyZm9ybWFuY2U9e25vdzpmdW5jdGlvbigpe3JldHVybiBEYXRlLm5vdygpLWh9fX13aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lfHwod2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZT1mdW5jdGlvbigpe3ZhciBhPXdpbmRvdy53ZWJraXRSZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fHdpbmRvdy5tb3pSZXF1ZXN0QW5pbWF0aW9uRnJhbWU7cmV0dXJuIGE/ZnVuY3Rpb24oYil7cmV0dXJuIGEoZnVuY3Rpb24oKXtiKHBlcmZvcm1hbmNlLm5vdygpKX0pfTpmdW5jdGlvbihhKXtyZXR1cm4gd2luZG93LnNldFRpbWVvdXQoYSwxZTMvNjApfX0oKSksd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lfHwod2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lPWZ1bmN0aW9uKCl7cmV0dXJuIHdpbmRvdy53ZWJraXRDYW5jZWxBbmltYXRpb25GcmFtZXx8d2luZG93Lm1vekNhbmNlbEFuaW1hdGlvbkZyYW1lfHxmdW5jdGlvbihhKXtjbGVhclRpbWVvdXQoYSl9fSgpKSxhLmNyZWF0ZURPTT1ifSh3aW5kb3cuUGxhdGZvcm0pLHdpbmRvdy50ZW1wbGF0ZUNvbnRlbnQ9d2luZG93LnRlbXBsYXRlQ29udGVudHx8ZnVuY3Rpb24oYSl7cmV0dXJuIGEuY29udGVudH0sZnVuY3Rpb24oYSl7YT1hfHwod2luZG93Lkluc3BlY3Rvcj17fSk7dmFyIGI7d2luZG93LnNpbnNwZWN0PWZ1bmN0aW9uKGEsZCl7Ynx8KGI9d2luZG93Lm9wZW4oIiIsIlNoYWRvd0RPTSBJbnNwZWN0b3IiLG51bGwsITApLGIuZG9jdW1lbnQud3JpdGUoYyksYi5hcGk9e3NoYWRvd2l6ZTpzaGFkb3dpemV9KSxmKGF8fHdyYXAoZG9jdW1lbnQuYm9keSksZCl9O3ZhciBjPVsiPCFET0NUWVBFIGh0bWw+IiwiPGh0bWw+IiwiICA8aGVhZD4iLCIgICAgPHRpdGxlPlNoYWRvd0RPTSBJbnNwZWN0b3I8L3RpdGxlPiIsIiAgICA8c3R5bGU+IiwiICAgICAgYm9keSB7IiwiICAgICAgfSIsIiAgICAgIHByZSB7IiwnICAgICAgICBmb250OiA5cHQgIkNvdXJpZXIgTmV3IiwgbW9ub3NwYWNlOycsIiAgICAgICAgbGluZS1oZWlnaHQ6IDEuNWVtOyIsIiAgICAgIH0iLCIgICAgICB0YWcgeyIsIiAgICAgICAgY29sb3I6IHB1cnBsZTsiLCIgICAgICB9IiwiICAgICAgdWwgeyIsIiAgICAgICAgIG1hcmdpbjogMDsiLCIgICAgICAgICBwYWRkaW5nOiAwOyIsIiAgICAgICAgIGxpc3Qtc3R5bGU6IG5vbmU7IiwiICAgICAgfSIsIiAgICAgIGxpIHsiLCIgICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IiwiICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2YxZjFmMTsiLCIgICAgICAgICBwYWRkaW5nOiA0cHggNnB4OyIsIiAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDsiLCIgICAgICAgICBtYXJnaW4tcmlnaHQ6IDRweDsiLCIgICAgICB9IiwiICAgIDwvc3R5bGU+IiwiICA8L2hlYWQ+IiwiICA8Ym9keT4iLCcgICAgPHVsIGlkPSJjcnVtYnMiPicsIiAgICA8L3VsPiIsJyAgICA8ZGl2IGlkPSJ0cmVlIj48L2Rpdj4nLCIgIDwvYm9keT4iLCI8L2h0bWw+Il0uam9pbigiXG4iKSxkPVtdLGU9ZnVuY3Rpb24oKXt2YXIgYT1iLmRvY3VtZW50LGM9YS5xdWVyeVNlbGVjdG9yKCIjY3J1bWJzIik7Yy50ZXh0Q29udGVudD0iIjtmb3IodmFyIGUsZz0wO2U9ZFtnXTtnKyspe3ZhciBoPWEuY3JlYXRlRWxlbWVudCgiYSIpO2guaHJlZj0iIyIsaC50ZXh0Q29udGVudD1lLmxvY2FsTmFtZSxoLmlkeD1nLGgub25jbGljaz1mdW5jdGlvbihhKXtmb3IodmFyIGI7ZC5sZW5ndGg+dGhpcy5pZHg7KWI9ZC5wb3AoKTtmKGIuc2hhZG93fHxiLGIpLGEucHJldmVudERlZmF1bHQoKX0sYy5hcHBlbmRDaGlsZChhLmNyZWF0ZUVsZW1lbnQoImxpIikpLmFwcGVuZENoaWxkKGgpfX0sZj1mdW5jdGlvbihhLGMpe3ZhciBmPWIuZG9jdW1lbnQ7az1bXTt2YXIgZz1jfHxhO2QucHVzaChnKSxlKCksZi5ib2R5LnF1ZXJ5U2VsZWN0b3IoIiN0cmVlIikuaW5uZXJIVE1MPSI8cHJlPiIraihhLGEuY2hpbGROb2RlcykrIjwvcHJlPiJ9LGc9QXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbC5iaW5kKEFycmF5LnByb3RvdHlwZS5mb3JFYWNoKSxoPXtTVFlMRToxLFNDUklQVDoxLCIjY29tbWVudCI6MSxURU1QTEFURToxfSxpPWZ1bmN0aW9uKGEpe3JldHVybiBoW2Eubm9kZU5hbWVdfSxqPWZ1bmN0aW9uKGEsYixjKXtpZihpKGEpKXJldHVybiIiO3ZhciBkPWN8fCIiO2lmKGEubG9jYWxOYW1lfHwxMT09YS5ub2RlVHlwZSl7dmFyIGU9YS5sb2NhbE5hbWV8fCJzaGFkb3ctcm9vdCIsZj1kK2woYSk7ImNvbnRlbnQiPT1lJiYoYj1hLmdldERpc3RyaWJ1dGVkTm9kZXMoKSksZis9Ijxici8+Ijt2YXIgaD1kKyImbmJzcDsmbmJzcDsiO2coYixmdW5jdGlvbihhKXtmKz1qKGEsYS5jaGlsZE5vZGVzLGgpfSksZis9ZCx7YnI6MX1bZV18fChmKz0iPHRhZz4mbHQ7LyIrZSsiJmd0OzwvdGFnPiIsZis9Ijxici8+Iil9ZWxzZXt2YXIgaz1hLnRleHRDb250ZW50LnRyaW0oKTtmPWs/ZCsnIicraysnIicrIjxici8+IjoiIn1yZXR1cm4gZn0saz1bXSxsPWZ1bmN0aW9uKGEpe3ZhciBiPSI8dGFnPiZsdDsiLGM9YS5sb2NhbE5hbWV8fCJzaGFkb3ctcm9vdCI7cmV0dXJuIGEud2Via2l0U2hhZG93Um9vdHx8YS5zaGFkb3dSb290PyhiKz0nIDxidXR0b24gaWR4PSInK2subGVuZ3RoKyciIG9uY2xpY2s9ImFwaS5zaGFkb3dpemUuY2FsbCh0aGlzKSI+JytjKyI8L2J1dHRvbj4iLGsucHVzaChhKSk6Yis9Y3x8InNoYWRvdy1yb290IixhLmF0dHJpYnV0ZXMmJmcoYS5hdHRyaWJ1dGVzLGZ1bmN0aW9uKGEpe2IrPSIgIithLm5hbWUrKGEudmFsdWU/Jz0iJythLnZhbHVlKyciJzoiIil9KSxiKz0iJmd0OzwvdGFnPiJ9O3NoYWRvd2l6ZT1mdW5jdGlvbigpe3ZhciBhPU51bWJlcih0aGlzLmF0dHJpYnV0ZXMuaWR4LnZhbHVlKSxiPWtbYV07Yj9mKGIud2Via2l0U2hhZG93Um9vdHx8Yi5zaGFkb3dSb290LGIpOihjb25zb2xlLmxvZygiYmFkIHNoYWRvd2l6ZSBub2RlIiksY29uc29sZS5kaXIodGhpcykpfSxhLm91dHB1dD1qfSh3aW5kb3cuSW5zcGVjdG9yKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYigpe2Z1bmN0aW9uIGEoYSl7InNwbGljZSI9PT1hWzBdLnR5cGUmJiJzcGxpY2UiPT09YVsxXS50eXBlJiYoYj0hMCl9aWYoImZ1bmN0aW9uIiE9dHlwZW9mIE9iamVjdC5vYnNlcnZlfHwiZnVuY3Rpb24iIT10eXBlb2YgQXJyYXkub2JzZXJ2ZSlyZXR1cm4hMTt2YXIgYj0hMSxjPVswXTtyZXR1cm4gQXJyYXkub2JzZXJ2ZShjLGEpLGNbMV09MSxjLmxlbmd0aD0wLE9iamVjdC5kZWxpdmVyQ2hhbmdlUmVjb3JkcyhhKSxifWZ1bmN0aW9uIGMoYSl7cmV0dXJuK2E9PT1hPj4+MH1mdW5jdGlvbiBkKGEpe3JldHVybithfWZ1bmN0aW9uIGUoYSl7cmV0dXJuIGE9PT1PYmplY3QoYSl9ZnVuY3Rpb24gZihhLGIpe3JldHVybiBhPT09Yj8wIT09YXx8MS9hPT09MS9iOksoYSkmJksoYik/ITA6YSE9PWEmJmIhPT1ifWZ1bmN0aW9uIGcoYSl7cmV0dXJuInN0cmluZyIhPXR5cGVvZiBhPyExOihhPWEucmVwbGFjZSgvXHMvZywiIiksIiI9PWE/ITA6Ii4iPT1hWzBdPyExOlMudGVzdChhKSl9ZnVuY3Rpb24gaChhKXt2YXIgYj1UW2FdO2lmKGIpcmV0dXJuIGI7aWYoZyhhKSl7dmFyIGI9bmV3IGkoYSk7cmV0dXJuIFRbYV09YixifX1mdW5jdGlvbiBpKGEpe3JldHVybiIiPT1hLnRyaW0oKT90aGlzOmMoYSk/KHRoaXMucHVzaChTdHJpbmcoYSkpLHRoaXMpOihhLnNwbGl0KC9cLi8pLmZpbHRlcihmdW5jdGlvbihhKXtyZXR1cm4gYX0pLmZvckVhY2goZnVuY3Rpb24oYSl7dGhpcy5wdXNoKGEpfSx0aGlzKSxIJiZ0aGlzLmxlbmd0aCYmKHRoaXMuZ2V0VmFsdWVGcm9tPXRoaXMuY29tcGlsZWRHZXRWYWx1ZUZyb21GbigpKSx2b2lkIDApfWZ1bmN0aW9uIGooYSl7Zm9yKHZhciBiPTA7VT5iJiZhLmNoZWNrKCk7KWEucmVwb3J0KCksYisrfWZ1bmN0aW9uIGsoYSl7Zm9yKHZhciBiIGluIGEpcmV0dXJuITE7cmV0dXJuITB9ZnVuY3Rpb24gbChhKXtyZXR1cm4gayhhLmFkZGVkKSYmayhhLnJlbW92ZWQpJiZrKGEuY2hhbmdlZCl9ZnVuY3Rpb24gbShhLGIpe3ZhciBjPXt9LGQ9e30sZT17fTtmb3IodmFyIGYgaW4gYil7dmFyIGc9YVtmXTsodm9pZCAwPT09Z3x8ZyE9PWJbZl0pJiYoZiBpbiBhP2chPT1iW2ZdJiYoZVtmXT1nKTpkW2ZdPXZvaWQgMCl9Zm9yKHZhciBmIGluIGEpZiBpbiBifHwoY1tmXT1hW2ZdKTtyZXR1cm4gQXJyYXkuaXNBcnJheShhKSYmYS5sZW5ndGghPT1iLmxlbmd0aCYmKGUubGVuZ3RoPWEubGVuZ3RoKSx7YWRkZWQ6YyxyZW1vdmVkOmQsY2hhbmdlZDplfX1mdW5jdGlvbiBuKGEsYil7dmFyIGM9Ynx8KEFycmF5LmlzQXJyYXkoYSk/W106e30pO2Zvcih2YXIgZCBpbiBhKWNbZF09YVtkXTtyZXR1cm4gQXJyYXkuaXNBcnJheShhKSYmKGMubGVuZ3RoPWEubGVuZ3RoKSxjfWZ1bmN0aW9uIG8oYSxiLGMsZCl7dGhpcy5vYmplY3Q9YSx0aGlzLmNhbGxiYWNrPWIsdGhpcy50YXJnZXQ9Yyx0aGlzLnRva2VuPWQsdGhpcy5yZXBvcnRpbmc9ITAsRyYmKHRoaXMuYm91bmRJbnRlcm5hbENhbGxiYWNrPXRoaXMuaW50ZXJuYWxDYWxsYmFjay5iaW5kKHRoaXMpKSx0aGlzLnZhbGlkPSEwLHAodGhpcyksdGhpcy5jb25uZWN0KCksdGhpcy5zeW5jKCEwKX1mdW5jdGlvbiBwKGEpe1cmJihWLnB1c2goYSksby5fYWxsT2JzZXJ2ZXJzQ291bnQrKyl9ZnVuY3Rpb24gcShhLGIsYyxkKXtvLmNhbGwodGhpcyxhLGIsYyxkKX1mdW5jdGlvbiByKGEsYixjLGQpe2lmKCFBcnJheS5pc0FycmF5KGEpKXRocm93IEVycm9yKCJQcm92aWRlZCBvYmplY3QgaXMgbm90IGFuIEFycmF5Iik7by5jYWxsKHRoaXMsYSxiLGMsZCl9ZnVuY3Rpb24gcyhhKXt0aGlzLmFycj1bXSx0aGlzLmNhbGxiYWNrPWEsdGhpcy5pc09ic2VydmVkPSEwfWZ1bmN0aW9uIHQoYSxiLGMsZCxmKXt0aGlzLnZhbHVlPXZvaWQgMDt2YXIgZz1oKGIpO2lmKGcpcmV0dXJuIGcubGVuZ3RoPyhlKGEpJiYodGhpcy5wYXRoPWcsby5jYWxsKHRoaXMsYSxjLGQsZikpLHZvaWQgMCk6KHRoaXMudmFsdWU9YSx2b2lkIDApfWZ1bmN0aW9uIHUoYSxiKXtpZigiZnVuY3Rpb24iPT10eXBlb2YgT2JqZWN0Lm9ic2VydmUpe3ZhciBjPU9iamVjdC5nZXROb3RpZmllcihhKTtyZXR1cm4gZnVuY3Rpb24oZCxlKXt2YXIgZj17b2JqZWN0OmEsdHlwZTpkLG5hbWU6Yn07Mj09PWFyZ3VtZW50cy5sZW5ndGgmJihmLm9sZFZhbHVlPWUpLGMubm90aWZ5KGYpfX19ZnVuY3Rpb24gdihhLGIsYyl7Zm9yKHZhciBkPXt9LGU9e30sZj0wO2Y8Yi5sZW5ndGg7ZisrKXt2YXIgZz1iW2ZdO19bZy50eXBlXT8oZy5uYW1lIGluIGN8fChjW2cubmFtZV09Zy5vbGRWYWx1ZSksInVwZGF0ZWQiIT1nLnR5cGUmJigibmV3IiE9Zy50eXBlP2cubmFtZSBpbiBkPyhkZWxldGUgZFtnLm5hbWVdLGRlbGV0ZSBjW2cubmFtZV0pOmVbZy5uYW1lXT0hMDpnLm5hbWUgaW4gZT9kZWxldGUgZVtnLm5hbWVdOmRbZy5uYW1lXT0hMCkpOihjb25zb2xlLmVycm9yKCJVbmtub3duIGNoYW5nZVJlY29yZCB0eXBlOiAiK2cudHlwZSksY29uc29sZS5lcnJvcihnKSl9Zm9yKHZhciBoIGluIGQpZFtoXT1hW2hdO2Zvcih2YXIgaCBpbiBlKWVbaF09dm9pZCAwO3ZhciBpPXt9O2Zvcih2YXIgaCBpbiBjKWlmKCEoaCBpbiBkfHxoIGluIGUpKXt2YXIgaj1hW2hdO2NbaF0hPT1qJiYoaVtoXT1qKX1yZXR1cm57YWRkZWQ6ZCxyZW1vdmVkOmUsY2hhbmdlZDppfX1mdW5jdGlvbiB3KGEsYixjLGQsZSxmKXtmb3IodmFyIGc9Zi1lKzEsaD1jLWIrMSxpPW5ldyBBcnJheShnKSxqPTA7Zz5qO2orKylpW2pdPW5ldyBBcnJheShoKSxpW2pdWzBdPWo7Zm9yKHZhciBrPTA7aD5rO2srKylpWzBdW2tdPWs7Zm9yKHZhciBqPTE7Zz5qO2orKylmb3IodmFyIGs9MTtoPms7aysrKWlmKGRbZStqLTFdPT09YVtiK2stMV0paVtqXVtrXT1pW2otMV1bay0xXTtlbHNle3ZhciBsPWlbai0xXVtrXSsxLG09aVtqXVtrLTFdKzE7aVtqXVtrXT1tPmw/bDptfXJldHVybiBpfWZ1bmN0aW9uIHgoYSl7Zm9yKHZhciBiPWEubGVuZ3RoLTEsYz1hWzBdLmxlbmd0aC0xLGQ9YVtiXVtjXSxlPVtdO2I+MHx8Yz4wOylpZigwIT1iKWlmKDAhPWMpe3ZhciBmLGc9YVtiLTFdW2MtMV0saD1hW2ItMV1bY10saT1hW2JdW2MtMV07Zj1pPmg/Zz5oP2g6ZzpnPmk/aTpnLGY9PWc/KGc9PWQ/ZS5wdXNoKGFiKTooZS5wdXNoKGJiKSxkPWcpLGItLSxjLS0pOmY9PWg/KGUucHVzaChkYiksYi0tLGQ9aCk6KGUucHVzaChjYiksYy0tLGQ9aSl9ZWxzZSBlLnB1c2goZGIpLGItLTtlbHNlIGUucHVzaChjYiksYy0tO3JldHVybiBlLnJldmVyc2UoKSxlfWZ1bmN0aW9uIHkoYSxiLGMpe2Zvcih2YXIgZD0wO2M+ZDtkKyspaWYoYVtkXSE9PWJbZF0pcmV0dXJuIGQ7cmV0dXJuIGN9ZnVuY3Rpb24geihhLGIsYyl7Zm9yKHZhciBkPWEubGVuZ3RoLGU9Yi5sZW5ndGgsZj0wO2M+ZiYmYVstLWRdPT09YlstLWVdOylmKys7cmV0dXJuIGZ9ZnVuY3Rpb24gQShhLGIsYyl7cmV0dXJue2luZGV4OmEscmVtb3ZlZDpiLGFkZGVkQ291bnQ6Y319ZnVuY3Rpb24gQihhLGIsYyxkLGUsZil7dmFyIGc9MCxoPTAsaT1NYXRoLm1pbihjLWIsZi1lKTtpZigwPT1iJiYwPT1lJiYoZz15KGEsZCxpKSksYz09YS5sZW5ndGgmJmY9PWQubGVuZ3RoJiYoaD16KGEsZCxpLWcpKSxiKz1nLGUrPWcsYy09aCxmLT1oLDA9PWMtYiYmMD09Zi1lKXJldHVybltdO2lmKGI9PWMpe2Zvcih2YXIgaj1BKGIsW10sMCk7Zj5lOylqLnJlbW92ZWQucHVzaChkW2UrK10pO3JldHVybltqXX1pZihlPT1mKXJldHVybltBKGIsW10sYy1iKV07Zm9yKHZhciBrPXgodyhhLGIsYyxkLGUsZikpLGo9dm9pZCAwLGw9W10sbT1iLG49ZSxvPTA7bzxrLmxlbmd0aDtvKyspc3dpdGNoKGtbb10pe2Nhc2UgYWI6aiYmKGwucHVzaChqKSxqPXZvaWQgMCksbSsrLG4rKzticmVhaztjYXNlIGJiOmp8fChqPUEobSxbXSwwKSksai5hZGRlZENvdW50KyssbSsrLGoucmVtb3ZlZC5wdXNoKGRbbl0pLG4rKzticmVhaztjYXNlIGNiOmp8fChqPUEobSxbXSwwKSksai5hZGRlZENvdW50KyssbSsrO2JyZWFrO2Nhc2UgZGI6anx8KGo9QShtLFtdLDApKSxqLnJlbW92ZWQucHVzaChkW25dKSxuKyt9cmV0dXJuIGomJmwucHVzaChqKSxsfWZ1bmN0aW9uIEMoYSxiLGMsZCl7cmV0dXJuIGM+Ynx8YT5kPy0xOmI9PWN8fGQ9PWE/MDpjPmE/ZD5iP2ItYzpkLWM6Yj5kP2QtYTpiLWF9ZnVuY3Rpb24gRChhLGIsYyxkKXtmb3IodmFyIGU9QShiLGMsZCksZj0hMSxnPTAsaD0wO2g8YS5sZW5ndGg7aCsrKXt2YXIgaT1hW2hdO2lmKGkuaW5kZXgrPWcsIWYpe3ZhciBqPUMoZS5pbmRleCxlLmluZGV4K2UucmVtb3ZlZC5sZW5ndGgsaS5pbmRleCxpLmluZGV4K2kuYWRkZWRDb3VudCk7aWYoaj49MCl7YS5zcGxpY2UoaCwxKSxoLS0sZy09aS5hZGRlZENvdW50LWkucmVtb3ZlZC5sZW5ndGgsZS5hZGRlZENvdW50Kz1pLmFkZGVkQ291bnQtajt2YXIgaz1lLnJlbW92ZWQubGVuZ3RoK2kucmVtb3ZlZC5sZW5ndGgtajtpZihlLmFkZGVkQ291bnR8fGspe3ZhciBjPWkucmVtb3ZlZDtpZihlLmluZGV4PGkuaW5kZXgpe3ZhciBsPWUucmVtb3ZlZC5zbGljZSgwLGkuaW5kZXgtZS5pbmRleCk7QXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkobCxjKSxjPWx9aWYoZS5pbmRleCtlLnJlbW92ZWQubGVuZ3RoPmkuaW5kZXgraS5hZGRlZENvdW50KXt2YXIgbT1lLnJlbW92ZWQuc2xpY2UoaS5pbmRleCtpLmFkZGVkQ291bnQtZS5pbmRleCk7QXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkoYyxtKX1lLnJlbW92ZWQ9YyxpLmluZGV4PGUuaW5kZXgmJihlLmluZGV4PWkuaW5kZXgpfWVsc2UgZj0hMH1lbHNlIGlmKGUuaW5kZXg8aS5pbmRleCl7Zj0hMCxhLnNwbGljZShoLDAsZSksaCsrO3ZhciBuPWUuYWRkZWRDb3VudC1lLnJlbW92ZWQubGVuZ3RoO2kuaW5kZXgrPW4sZys9bn19fWZ8fGEucHVzaChlKX1mdW5jdGlvbiBFKGEsYil7Zm9yKHZhciBlPVtdLGY9MDtmPGIubGVuZ3RoO2YrKyl7dmFyIGc9YltmXTtzd2l0Y2goZy50eXBlKXtjYXNlInNwbGljZSI6RChlLGcuaW5kZXgsZy5yZW1vdmVkLnNsaWNlKCksZy5hZGRlZENvdW50KTticmVhaztjYXNlIm5ldyI6Y2FzZSJ1cGRhdGVkIjpjYXNlImRlbGV0ZWQiOmlmKCFjKGcubmFtZSkpY29udGludWU7dmFyIGg9ZChnLm5hbWUpO2lmKDA+aCljb250aW51ZTtEKGUsaCxbZy5vbGRWYWx1ZV0sMSk7YnJlYWs7ZGVmYXVsdDpjb25zb2xlLmVycm9yKCJVbmV4cGVjdGVkIHJlY29yZCB0eXBlOiAiK0pTT04uc3RyaW5naWZ5KGcpKX19cmV0dXJuIGV9ZnVuY3Rpb24gRihhLGIpe3ZhciBjPVtdO3JldHVybiBFKGEsYikuZm9yRWFjaChmdW5jdGlvbihiKXtyZXR1cm4gMT09Yi5hZGRlZENvdW50JiYxPT1iLnJlbW92ZWQubGVuZ3RoPyhiLnJlbW92ZWRbMF0hPT1hW2IuaW5kZXhdJiZjLnB1c2goYiksdm9pZCAwKTooYz1jLmNvbmNhdChCKGEsYi5pbmRleCxiLmluZGV4K2IuYWRkZWRDb3VudCxiLnJlbW92ZWQsMCxiLnJlbW92ZWQubGVuZ3RoKSksdm9pZCAwKX0pLGN9dmFyIEc9YigpLEg9ITE7dHJ5e3ZhciBJPW5ldyBGdW5jdGlvbigiIiwicmV0dXJuIHRydWU7Iik7SD1JKCl9Y2F0Y2goSil7fXZhciBLPWEuTnVtYmVyLmlzTmFOfHxmdW5jdGlvbihiKXtyZXR1cm4ibnVtYmVyIj09dHlwZW9mIGImJmEuaXNOYU4oYil9LEw9Il9fcHJvdG9fXyJpbnt9P2Z1bmN0aW9uKGEpe3JldHVybiBhfTpmdW5jdGlvbihhKXt2YXIgYj1hLl9fcHJvdG9fXztpZighYilyZXR1cm4gYTt2YXIgYz1PYmplY3QuY3JlYXRlKGIpO3JldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhhKS5mb3JFYWNoKGZ1bmN0aW9uKGIpe09iamVjdC5kZWZpbmVQcm9wZXJ0eShjLGIsT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihhLGIpKX0pLGN9LE09IlskX2EtekEtWl0iLE49IlskX2EtekEtWjAtOV0iLE89TSsiKyIrTisiKiIsUD0iKD86WzAtOV18WzEtOV0rWzAtOV0rKSIsUT0iKD86IitPKyJ8IitQKyIpIixSPSIoPzoiK1ErIikoPzpcXC4iK1ErIikqIixTPW5ldyBSZWdFeHAoIl4iK1IrIiQiKSxUPXt9O2kucHJvdG90eXBlPUwoe19fcHJvdG9fXzpbXSx0b1N0cmluZzpmdW5jdGlvbigpe3JldHVybiB0aGlzLmpvaW4oIi4iKX0sZ2V0VmFsdWVGcm9tOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0wO2I8dGhpcy5sZW5ndGg7YisrKXtpZih2b2lkIDA9PT1hfHxudWxsPT09YSlyZXR1cm47YT1hW3RoaXNbYl1dfXJldHVybiBhfSxnZXRWYWx1ZUZyb21PYnNlcnZlZDpmdW5jdGlvbihhLGIpe2IucmVzZXQoKTtmb3IodmFyIGM9MDtjPHRoaXMubGVuZ3RoO2MrKyl7aWYodm9pZCAwPT09YXx8bnVsbD09PWEpcmV0dXJuIGIuY2xlYW51cCgpLHZvaWQgMDtiLm9ic2VydmUoYSksYT1hW3RoaXNbY11dfXJldHVybiBhfSxjb21waWxlZEdldFZhbHVlRnJvbUZuOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5tYXAoZnVuY3Rpb24oYSl7cmV0dXJuIGMoYSk/J1siJythKyciXSc6Ii4iK2F9KSxiPSIiLGQ9Im9iaiI7Yis9ImlmIChvYmogIT09IG51bGwgJiYgb2JqICE9PSB1bmRlZmluZWQiO2Zvcih2YXIgZT0wO2U8dGhpcy5sZW5ndGgtMTtlKyspdGhpc1tlXSxkKz1hW2VdLGIrPSIgJiZcbiAgICAgIitkKyIgIT09IG51bGwgJiYgIitkKyIgIT09IHVuZGVmaW5lZCI7cmV0dXJuIGIrPSIpXG4iLGQrPWFbZV0sYis9IiAgcmV0dXJuICIrZCsiO1xuZWxzZVxuICByZXR1cm4gdW5kZWZpbmVkOyIsbmV3IEZ1bmN0aW9uKCJvYmoiLGIpfSxzZXRWYWx1ZUZyb206ZnVuY3Rpb24oYSxiKXtpZighdGhpcy5sZW5ndGgpcmV0dXJuITE7Zm9yKHZhciBjPTA7Yzx0aGlzLmxlbmd0aC0xO2MrKyl7aWYodm9pZCAwPT09YXx8bnVsbD09PWEpcmV0dXJuITE7YT1hW3RoaXNbY11dfXJldHVybiB2b2lkIDA9PT1hfHxudWxsPT09YT8hMTooYVt0aGlzW3RoaXMubGVuZ3RoLTFdXT1iLCEwKX19KTt2YXIgVT0xZTM7by5wcm90b3R5cGU9e3ZhbGlkOiExLGludGVybmFsQ2FsbGJhY2s6ZnVuY3Rpb24oYSl7dGhpcy52YWxpZCYmdGhpcy5yZXBvcnRpbmcmJnRoaXMuY2hlY2soYSkmJih0aGlzLnJlcG9ydCgpLHRoaXMudGVzdGluZ1Jlc3VsdHMmJih0aGlzLnRlc3RpbmdSZXN1bHRzLmFueUNoYW5nZWQ9ITApKX0sY2xvc2U6ZnVuY3Rpb24oKXt0aGlzLnZhbGlkJiYoImZ1bmN0aW9uIj09dHlwZW9mIHRoaXMub2JqZWN0LnVub2JzZXJ2ZWQmJnRoaXMub2JqZWN0LnVub2JzZXJ2ZWQoKSx0aGlzLmRpc2Nvbm5lY3QoKSx0aGlzLm9iamVjdD12b2lkIDAsdGhpcy52YWxpZD0hMSl9LGRlbGl2ZXI6ZnVuY3Rpb24oYSl7dGhpcy52YWxpZCYmKEc/KHRoaXMudGVzdGluZ1Jlc3VsdHM9YSxPYmplY3QuZGVsaXZlckNoYW5nZVJlY29yZHModGhpcy5ib3VuZEludGVybmFsQ2FsbGJhY2spLHRoaXMudGVzdGluZ1Jlc3VsdHM9dm9pZCAwKTpqKHRoaXMpKX0scmVwb3J0OmZ1bmN0aW9uKCl7aWYodGhpcy5yZXBvcnRpbmcpe3RoaXMuc3luYyghMSksdGhpcy5yZXBvcnRBcmdzLnB1c2godGhpcy50b2tlbik7dHJ5e3RoaXMuY2FsbGJhY2suYXBwbHkodGhpcy50YXJnZXQsdGhpcy5yZXBvcnRBcmdzKX1jYXRjaChhKXtvLl9lcnJvclRocm93bkR1cmluZ0NhbGxiYWNrPSEwLGNvbnNvbGUuZXJyb3IoIkV4Y2VwdGlvbiBjYXVnaHQgZHVyaW5nIG9ic2VydmVyIGNhbGxiYWNrOiAiK2EpfXRoaXMucmVwb3J0QXJncz12b2lkIDB9fSxyZXNldDpmdW5jdGlvbigpe3RoaXMudmFsaWQmJihHJiYodGhpcy5yZXBvcnRpbmc9ITEsT2JqZWN0LmRlbGl2ZXJDaGFuZ2VSZWNvcmRzKHRoaXMuYm91bmRJbnRlcm5hbENhbGxiYWNrKSx0aGlzLnJlcG9ydGluZz0hMCksdGhpcy5zeW5jKCEwKSl9fTt2YXIgVixXPSFHfHxhLmZvcmNlQ29sbGVjdE9ic2VydmVycztvLl9hbGxPYnNlcnZlcnNDb3VudD0wLFcmJihWPVtdKTt2YXIgWD0hMSxZPSJmdW5jdGlvbiI9PXR5cGVvZiBPYmplY3QuZGVsaXZlckFsbENoYW5nZVJlY29yZHM7YS5QbGF0Zm9ybT1hLlBsYXRmb3JtfHx7fSxhLlBsYXRmb3JtLnBlcmZvcm1NaWNyb3Rhc2tDaGVja3BvaW50PWZ1bmN0aW9uKCl7aWYoIVgpe2lmKFkpcmV0dXJuIE9iamVjdC5kZWxpdmVyQWxsQ2hhbmdlUmVjb3JkcygpLHZvaWQgMDtpZihXKXtYPSEwO3ZhciBhPTAsYj17fTtkb3thKys7dmFyIGM9VjtWPVtdLGIuYW55Q2hhbmdlZD0hMTtmb3IodmFyIGQ9MDtkPGMubGVuZ3RoO2QrKyl7dmFyIGU9Y1tkXTtlLnZhbGlkJiYoRz9lLmRlbGl2ZXIoYik6ZS5jaGVjaygpJiYoYi5hbnlDaGFuZ2VkPSEwLGUucmVwb3J0KCkpLFYucHVzaChlKSl9fXdoaWxlKFU+YSYmYi5hbnlDaGFuZ2VkKTtvLl9hbGxPYnNlcnZlcnNDb3VudD1WLmxlbmd0aCxYPSExfX19LFcmJihhLlBsYXRmb3JtLmNsZWFyT2JzZXJ2ZXJzPWZ1bmN0aW9uKCl7Vj1bXX0pLHEucHJvdG90eXBlPUwoe19fcHJvdG9fXzpvLnByb3RvdHlwZSxjb25uZWN0OmZ1bmN0aW9uKCl7RyYmT2JqZWN0Lm9ic2VydmUodGhpcy5vYmplY3QsdGhpcy5ib3VuZEludGVybmFsQ2FsbGJhY2spfSxzeW5jOmZ1bmN0aW9uKCl7R3x8KHRoaXMub2xkT2JqZWN0PW4odGhpcy5vYmplY3QpKX0sY2hlY2s6ZnVuY3Rpb24oYSl7dmFyIGIsYztpZihHKXtpZighYSlyZXR1cm4hMTtjPXt9LGI9dih0aGlzLm9iamVjdCxhLGMpfWVsc2UgYz10aGlzLm9sZE9iamVjdCxiPW0odGhpcy5vYmplY3QsdGhpcy5vbGRPYmplY3QpO3JldHVybiBsKGIpPyExOih0aGlzLnJlcG9ydEFyZ3M9W2IuYWRkZWR8fHt9LGIucmVtb3ZlZHx8e30sYi5jaGFuZ2VkfHx7fV0sdGhpcy5yZXBvcnRBcmdzLnB1c2goZnVuY3Rpb24oYSl7cmV0dXJuIGNbYV19KSwhMCl9LGRpc2Nvbm5lY3Q6ZnVuY3Rpb24oKXtHP3RoaXMub2JqZWN0JiZPYmplY3QudW5vYnNlcnZlKHRoaXMub2JqZWN0LHRoaXMuYm91bmRJbnRlcm5hbENhbGxiYWNrKTp0aGlzLm9sZE9iamVjdD12b2lkIDB9fSksci5wcm90b3R5cGU9TCh7X19wcm90b19fOnEucHJvdG90eXBlLGNvbm5lY3Q6ZnVuY3Rpb24oKXtHJiZBcnJheS5vYnNlcnZlKHRoaXMub2JqZWN0LHRoaXMuYm91bmRJbnRlcm5hbENhbGxiYWNrKX0sc3luYzpmdW5jdGlvbigpe0d8fCh0aGlzLm9sZE9iamVjdD10aGlzLm9iamVjdC5zbGljZSgpKX0sY2hlY2s6ZnVuY3Rpb24oYSl7dmFyIGI7aWYoRyl7aWYoIWEpcmV0dXJuITE7Yj1GKHRoaXMub2JqZWN0LGEpfWVsc2UgYj1CKHRoaXMub2JqZWN0LDAsdGhpcy5vYmplY3QubGVuZ3RoLHRoaXMub2xkT2JqZWN0LDAsdGhpcy5vbGRPYmplY3QubGVuZ3RoKTtyZXR1cm4gYiYmYi5sZW5ndGg/KHRoaXMucmVwb3J0QXJncz1bYl0sITApOiExfX0pLHIuYXBwbHlTcGxpY2VzPWZ1bmN0aW9uKGEsYixjKXtjLmZvckVhY2goZnVuY3Rpb24oYyl7Zm9yKHZhciBkPVtjLmluZGV4LGMucmVtb3ZlZC5sZW5ndGhdLGU9Yy5pbmRleDtlPGMuaW5kZXgrYy5hZGRlZENvdW50OylkLnB1c2goYltlXSksZSsrO0FycmF5LnByb3RvdHlwZS5zcGxpY2UuYXBwbHkoYSxkKX0pfTt2YXIgWj1PYmplY3QuZ2V0UHJvdG90eXBlT2Yoe30pLCQ9T2JqZWN0LmdldFByb3RvdHlwZU9mKFtdKTtzLnByb3RvdHlwZT17cmVzZXQ6ZnVuY3Rpb24oKXt0aGlzLmlzT2JzZXJ2ZWQ9IXRoaXMuaXNPYnNlcnZlZH0sb2JzZXJ2ZTpmdW5jdGlvbihhKXtpZihlKGEpJiZhIT09WiYmYSE9PSQpe3ZhciBiPXRoaXMuYXJyLmluZGV4T2YoYSk7Yj49MCYmdGhpcy5hcnJbYisxXT09PXRoaXMuaXNPYnNlcnZlZHx8KDA+YiYmKGI9dGhpcy5hcnIubGVuZ3RoLHRoaXMuYXJyW2JdPWEsT2JqZWN0Lm9ic2VydmUoYSx0aGlzLmNhbGxiYWNrKSksdGhpcy5hcnJbYisxXT10aGlzLmlzT2JzZXJ2ZWQsdGhpcy5vYnNlcnZlKE9iamVjdC5nZXRQcm90b3R5cGVPZihhKSkpfX0sY2xlYW51cDpmdW5jdGlvbigpe2Zvcih2YXIgYT0wLGI9MCxjPXRoaXMuaXNPYnNlcnZlZDtiPHRoaXMuYXJyLmxlbmd0aDspe3ZhciBkPXRoaXMuYXJyW2JdO3RoaXMuYXJyW2IrMV09PWM/KGI+YSYmKHRoaXMuYXJyW2FdPWQsdGhpcy5hcnJbYSsxXT1jKSxhKz0yKTpPYmplY3QudW5vYnNlcnZlKGQsdGhpcy5jYWxsYmFjayksYis9Mn10aGlzLmFyci5sZW5ndGg9YX19LHQucHJvdG90eXBlPUwoe19fcHJvdG9fXzpvLnByb3RvdHlwZSxjb25uZWN0OmZ1bmN0aW9uKCl7RyYmKHRoaXMub2JzZXJ2ZWRTZXQ9bmV3IHModGhpcy5ib3VuZEludGVybmFsQ2FsbGJhY2spKX0sZGlzY29ubmVjdDpmdW5jdGlvbigpe3RoaXMudmFsdWU9dm9pZCAwLEcmJih0aGlzLm9ic2VydmVkU2V0LnJlc2V0KCksdGhpcy5vYnNlcnZlZFNldC5jbGVhbnVwKCksdGhpcy5vYnNlcnZlZFNldD12b2lkIDApfSxjaGVjazpmdW5jdGlvbigpe3JldHVybiB0aGlzLnZhbHVlPUc/dGhpcy5wYXRoLmdldFZhbHVlRnJvbU9ic2VydmVkKHRoaXMub2JqZWN0LHRoaXMub2JzZXJ2ZWRTZXQpOnRoaXMucGF0aC5nZXRWYWx1ZUZyb20odGhpcy5vYmplY3QpLGYodGhpcy52YWx1ZSx0aGlzLm9sZFZhbHVlKT8hMToodGhpcy5yZXBvcnRBcmdzPVt0aGlzLnZhbHVlLHRoaXMub2xkVmFsdWVdLCEwKX0sc3luYzpmdW5jdGlvbihhKXthJiYodGhpcy52YWx1ZT1HP3RoaXMucGF0aC5nZXRWYWx1ZUZyb21PYnNlcnZlZCh0aGlzLm9iamVjdCx0aGlzLm9ic2VydmVkU2V0KTp0aGlzLnBhdGguZ2V0VmFsdWVGcm9tKHRoaXMub2JqZWN0KSksdGhpcy5vbGRWYWx1ZT10aGlzLnZhbHVlfX0pLHQuZ2V0VmFsdWVBdFBhdGg9ZnVuY3Rpb24oYSxiKXt2YXIgYz1oKGIpO2lmKGMpcmV0dXJuIGMuZ2V0VmFsdWVGcm9tKGEpfSx0LnNldFZhbHVlQXRQYXRoPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1oKGIpO2QmJmQuc2V0VmFsdWVGcm9tKGEsYyl9O3ZhciBfPXsibmV3IjohMCx1cGRhdGVkOiEwLGRlbGV0ZWQ6ITB9O3QuZGVmaW5lUHJvcGVydHk9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWMub2JqZWN0LGU9aChjLnBhdGgpLGY9dShhLGIpLGc9bmV3IHQoZCxjLnBhdGgsZnVuY3Rpb24oYSxiKXtmJiZmKCJ1cGRhdGVkIixiKX0pO3JldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkoYSxiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gZS5nZXRWYWx1ZUZyb20oZCl9LHNldDpmdW5jdGlvbihhKXtlLnNldFZhbHVlRnJvbShkLGEpfSxjb25maWd1cmFibGU6ITB9KSx7Y2xvc2U6ZnVuY3Rpb24oKXt2YXIgYz1lLmdldFZhbHVlRnJvbShkKTtmJiZnLmRlbGl2ZXIoKSxnLmNsb3NlKCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGEsYix7dmFsdWU6Yyx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9KX19fTt2YXIgYWI9MCxiYj0xLGNiPTIsZGI9MzthLk9ic2VydmVyPW8sYS5PYnNlcnZlci5oYXNPYmplY3RPYnNlcnZlPUcsYS5BcnJheU9ic2VydmVyPXIsYS5BcnJheU9ic2VydmVyLmNhbGN1bGF0ZVNwbGljZXM9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gQihhLDAsYS5sZW5ndGgsYiwwLGIubGVuZ3RoKX0sYS5PYmplY3RPYnNlcnZlcj1xLGEuUGF0aE9ic2VydmVyPXQsYS5QYXRoPWl9KHRoaXMpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe2lmKCFhKXRocm93IG5ldyBFcnJvcigiQXNzZXJ0aW9uIGZhaWxlZCIpfWZ1bmN0aW9uIGMoYSl7Zm9yKDthLnBhcmVudE5vZGU7KWE9YS5wYXJlbnROb2RlO3JldHVybiJmdW5jdGlvbiI9PXR5cGVvZiBhLmdldEVsZW1lbnRCeUlkP2E6bnVsbH1mdW5jdGlvbiBkKGEpe3JldHVybiBhLm93bmVyRG9jdW1lbnQuY29udGFpbnMoYSl9ZnVuY3Rpb24gZShhLGIsYyxkKXt0aGlzLmNsb3NlZD0hMSx0aGlzLm5vZGU9YSx0aGlzLnByb3BlcnR5PWIsdGhpcy5tb2RlbD1jLHRoaXMucGF0aD1kLHRoaXMub2JzZXJ2ZXI9bmV3IFBhdGhPYnNlcnZlcihjLGQsdGhpcy5ib3VuZFZhbHVlQ2hhbmdlZCx0aGlzKSx0aGlzLmJvdW5kVmFsdWVDaGFuZ2VkKHRoaXMudmFsdWUpfWZ1bmN0aW9uIGYoYSxiLGMsZCl7dGhpcy5jb25kaXRpb25hbD0iPyI9PWJbYi5sZW5ndGgtMV0sdGhpcy5jb25kaXRpb25hbCYmKGEucmVtb3ZlQXR0cmlidXRlKGIpLGI9Yi5zbGljZSgwLC0xKSksZS5jYWxsKHRoaXMsYSxiLGMsZCl9ZnVuY3Rpb24gZyhhKXtzd2l0Y2goYS50eXBlKXtjYXNlImNoZWNrYm94IjpyZXR1cm4gVDtjYXNlInJhZGlvIjpjYXNlInNlbGVjdC1tdWx0aXBsZSI6Y2FzZSJzZWxlY3Qtb25lIjpyZXR1cm4iY2hhbmdlIjtkZWZhdWx0OnJldHVybiJpbnB1dCJ9fWZ1bmN0aW9uIGgoYSxiLGMsZCl7ZS5jYWxsKHRoaXMsYSxiLGMsZCksdGhpcy5ldmVudFR5cGU9Zyh0aGlzLm5vZGUpLHRoaXMuYm91bmROb2RlVmFsdWVUb01vZGVsPXRoaXMubm9kZVZhbHVlQ2hhbmdlZC5iaW5kKHRoaXMpLHRoaXMubm9kZS5hZGRFdmVudExpc3RlbmVyKHRoaXMuZXZlbnRUeXBlLHRoaXMuYm91bmROb2RlVmFsdWVUb01vZGVsLCEwKX1mdW5jdGlvbiBpKGEpe2lmKCFkKGEpKXJldHVybltdO2lmKGEuZm9ybSlyZXR1cm4gUShhLmZvcm0uZWxlbWVudHMsZnVuY3Rpb24oYil7cmV0dXJuIGIhPWEmJiJJTlBVVCI9PWIudGFnTmFtZSYmInJhZGlvIj09Yi50eXBlJiZiLm5hbWU9PWEubmFtZX0pO3ZhciBiPWEub3duZXJEb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dFt0eXBlPSJyYWRpbyJdW25hbWU9IicrYS5uYW1lKyciXScpO3JldHVybiBRKGIsZnVuY3Rpb24oYil7cmV0dXJuIGIhPWEmJiFiLmZvcm19KX1mdW5jdGlvbiBqKGEsYixjKXtoLmNhbGwodGhpcyxhLCJjaGVja2VkIixiLGMpfWZ1bmN0aW9uIGsoYSxiLGMpe2guY2FsbCh0aGlzLGEsInNlbGVjdGVkSW5kZXgiLGIsYyl9ZnVuY3Rpb24gbChhKXtyZXR1cm4gJFthLnRhZ05hbWVdJiZhLmhhc0F0dHJpYnV0ZSgidGVtcGxhdGUiKX1mdW5jdGlvbiBtKGEpe3JldHVybiJURU1QTEFURSI9PWEudGFnTmFtZXx8bChhKX1mdW5jdGlvbiBuKGEpe3JldHVybiBfJiYiVEVNUExBVEUiPT1hLnRhZ05hbWV9ZnVuY3Rpb24gbyhhLGIpe3ZhciBjPWEucXVlcnlTZWxlY3RvckFsbChhYik7bShhKSYmYihhKSxQKGMsYil9ZnVuY3Rpb24gcChhKXtmdW5jdGlvbiBiKGEpe0hUTUxUZW1wbGF0ZUVsZW1lbnQuZGVjb3JhdGUoYSl8fHAoYS5jb250ZW50KX1vKGEsYil9ZnVuY3Rpb24gcShhLGIpe09iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGIpLmZvckVhY2goZnVuY3Rpb24oYyl7T2JqZWN0LmRlZmluZVByb3BlcnR5KGEsYyxPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGIsYykpfSl9ZnVuY3Rpb24gcihhKXtpZighYS5kZWZhdWx0VmlldylyZXR1cm4gYTt2YXIgYj1lYi5nZXQoYSk7aWYoIWIpe2ZvcihiPWEuaW1wbGVtZW50YXRpb24uY3JlYXRlSFRNTERvY3VtZW50KCIiKTtiLmxhc3RDaGlsZDspYi5yZW1vdmVDaGlsZChiLmxhc3RDaGlsZCk7ZWIuc2V0KGEsYil9cmV0dXJuIGJ9ZnVuY3Rpb24gcyhhKXt2YXIgYj1hLm93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidGVtcGxhdGUiKTthLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGIsYSk7Zm9yKHZhciBjPWEuYXR0cmlidXRlcyxkPWMubGVuZ3RoO2QtLT4wOyl7dmFyIGU9Y1tkXTtaW2UubmFtZV0mJigidGVtcGxhdGUiIT09ZS5uYW1lJiZiLnNldEF0dHJpYnV0ZShlLm5hbWUsZS52YWx1ZSksYS5yZW1vdmVBdHRyaWJ1dGUoZS5uYW1lKSl9cmV0dXJuIGJ9ZnVuY3Rpb24gdChhLGIsYyl7dmFyIGQ9YS5jb250ZW50O2lmKGMpcmV0dXJuIGQuYXBwZW5kQ2hpbGQoYiksdm9pZCAwO2Zvcih2YXIgZTtlPWIuZmlyc3RDaGlsZDspZC5hcHBlbmRDaGlsZChlKX1mdW5jdGlvbiB1KGEpeyJURU1QTEFURSI9PT1hLnRhZ05hbWU/X3x8KGNiP2EuX19wcm90b19fPUhUTUxUZW1wbGF0ZUVsZW1lbnQucHJvdG90eXBlOnEoYSxIVE1MVGVtcGxhdGVFbGVtZW50LnByb3RvdHlwZSkpOihxKGEsSFRNTFRlbXBsYXRlRWxlbWVudC5wcm90b3R5cGUpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShhLCJjb250ZW50IixpYikpfWZ1bmN0aW9uIHYoYSl7dmFyIGI9bGIuZ2V0KGEpO2J8fChiPWZ1bmN0aW9uKCl7SChhLGEubW9kZWwsYS5iaW5kaW5nRGVsZWdhdGUpfSxsYi5zZXQoYSxiKSksYmIoYil9ZnVuY3Rpb24gdyhhLGIsYyxkKXt0aGlzLmNsb3NlZD0hMSx0aGlzLm5vZGU9YSx0aGlzLnByb3BlcnR5PWIsdGhpcy5tb2RlbD1jLHRoaXMucGF0aD1kLHRoaXMubm9kZS5pbnB1dHMuYmluZCh0aGlzLnByb3BlcnR5LGMsZHx8IiIpfWZ1bmN0aW9uIHgoYSl7cmV0dXJuIDM9PWEubGVuZ3RoJiYwPT1hWzBdLmxlbmd0aCYmMD09YVsyXS5sZW5ndGh9ZnVuY3Rpb24geShhKXtpZihhJiZhLmxlbmd0aCl7Zm9yKHZhciBiLGM9YS5sZW5ndGgsZD0wLGU9MCxmPTA7Yz5lOyl7aWYoZD1hLmluZGV4T2YoInt7IixlKSxmPTA+ZD8tMTphLmluZGV4T2YoIn19IixkKzIpLDA+Zil7aWYoIWIpcmV0dXJuO2IucHVzaChhLnNsaWNlKGUpKTticmVha31iPWJ8fFtdLGIucHVzaChhLnNsaWNlKGUsZCkpLGIucHVzaChhLnNsaWNlKGQrMixmKS50cmltKCkpLGU9ZisyfXJldHVybiBlPT09YyYmYi5wdXNoKCIiKSxifX1mdW5jdGlvbiB6KGEsYixjLGQsZSl7dmFyIGYsZz1lJiZlW1hdO3JldHVybiBnJiYiZnVuY3Rpb24iPT10eXBlb2YgZyYmKGY9ZyhjLGQsYixhKSxmJiYoYz1mLGQ9InZhbHVlIikpLGEuYmluZChiLGMsZCl9ZnVuY3Rpb24gQShhLGIsYyxkLGUpe2Zvcih2YXIgZj0wO2Y8YS5sZW5ndGg7Zis9Mil7dmFyIGc9QyhiLGFbZl0sYVtmKzFdLGMsZCk7ZSYmZS5wdXNoKGcpfX1mdW5jdGlvbiBCKGEpe3JldHVybiBmdW5jdGlvbihiKXtmb3IodmFyIGM9IiIsZD0wLGU9ITA7ZDxhLmxlbmd0aDtkKyssZT0hZSlpZihlKWMrPWFbZF07ZWxzZXt2YXIgZj1iW2RdO3ZvaWQgMCE9PWYmJihjKz1mKX1yZXR1cm4gY319ZnVuY3Rpb24gQyhhLGIsYyxkLGUpe2lmKHgoYykpcmV0dXJuIHooYSxiLGQsY1sxXSxlKTtjLmNvbWJpbmF0b3I9Yy5jb21iaW5hdG9yfHxCKGMpO3ZhciBmPW5ldyBNKGMuY29tYmluYXRvcik7Zi5zY2hlZHVsZWQ9ITA7Zm9yKHZhciBnPTE7ZzxjLmxlbmd0aDtnKz0yKXooZixnLGQsY1tnXSxlKTtyZXR1cm4gZi5yZXNvbHZlKCksYS5iaW5kKGIsZiwidmFsdWUiKX1mdW5jdGlvbiBEKGEpe2IoYSk7Zm9yKHZhciBjLGQ9bShhKSxlPSExLGY9ITEsZz0wO2c8YS5hdHRyaWJ1dGVzLmxlbmd0aDtnKyspe3ZhciBoPWEuYXR0cmlidXRlc1tnXSxpPWgubmFtZSxqPWgudmFsdWU7ZCYmKGk9PT1XP2U9ITA6KGk9PT1VfHxpPT09VikmJihmPSEwLGo9anx8Int7fX0iKSk7dmFyIGs9eShqKTtrJiYoYz1jfHxbXSxjLnB1c2goaSxrKSl9cmV0dXJuIGUmJiFmJiYoYz1jfHxbXSxjLnB1c2goVSx5KCJ7e319IikpKSxjfWZ1bmN0aW9uIEUoYSl7aWYoYS5ub2RlVHlwZT09PU5vZGUuRUxFTUVOVF9OT0RFKXJldHVybiBEKGEpO2lmKGEubm9kZVR5cGU9PT1Ob2RlLlRFWFRfTk9ERSl7dmFyIGI9eShhLmRhdGEpO2lmKGIpcmV0dXJuWyJ0ZXh0Q29udGVudCIsYl19fWZ1bmN0aW9uIEYoYSl7dGhpcy5ub2RlPWF9ZnVuY3Rpb24gRyhhLGIsYyxkLGUpe2lmKGImJihiLnRlbXBsYXRlUmVmJiYoSFRNTFRlbXBsYXRlRWxlbWVudC5kZWNvcmF0ZShhLGIudGVtcGxhdGVSZWYpLGQmJmtiLnNldChhLGQpLGUmJmUucHVzaChuZXcgRihhKSkpLGIubGVuZ3RoJiZBKGIsYSxjLGQsZSksYi5jaGlsZHJlbikpZm9yKHZhciBmPTAsZz1hLmZpcnN0Q2hpbGQ7ZztnPWcubmV4dFNpYmxpbmcpRyhnLGIuY2hpbGRyZW5bZisrXSxjLGQsZSl9ZnVuY3Rpb24gSChhLGMsZCl7YihhKTt2YXIgZT1FKGEpO2UmJkEoZSxhLGMsZCk7Zm9yKHZhciBmPWEuZmlyc3RDaGlsZDtmO2Y9Zi5uZXh0U2libGluZylIKGYsYyxkKX1mdW5jdGlvbiBJKGEsYil7dmFyIGM9YS5jbG9uZU5vZGUoITEpO2lmKG0oYykpcmV0dXJuIGM7Zm9yKHZhciBkPWEuZmlyc3RDaGlsZDtkO2Q9ZC5uZXh0U2libGluZyljLmFwcGVuZENoaWxkKEkoZCxiKSk7cmV0dXJuIGN9ZnVuY3Rpb24gSihhKXt2YXIgYj1FKGEpO20oYSkmJihiPWJ8fFtdLGIudGVtcGxhdGVSZWY9YSxiLmhhc1N1YlRlbXBsYXRlPSEwKTtmb3IodmFyIGM9YS5maXJzdENoaWxkLGQ9MDtjO2M9Yy5uZXh0U2libGluZyxkKyspe3ZhciBlPUooYyk7ZSYmKGI9Ynx8W10sYi5jaGlsZHJlbj1iLmNoaWxkcmVufHxbXSxiLmNoaWxkcmVuW2RdPWUsZS5oYXNTdWJUZW1wbGF0ZSYmKGIuaGFzU3ViVGVtcGxhdGU9ITApKX1yZXR1cm4gYn1mdW5jdGlvbiBLKGEsYixjKXt0aGlzLmZpcnN0Tm9kZT1hLHRoaXMubGFzdE5vZGU9Yix0aGlzLm1vZGVsPWN9ZnVuY3Rpb24gTChhLGIpe2lmKGEuZmlyc3RDaGlsZClmb3IodmFyIGM9bmV3IEsoYS5maXJzdENoaWxkLGEubGFzdENoaWxkLGIpLGQ9Yy5maXJzdE5vZGU7ZDspbWIuc2V0KGQsYyksZD1kLm5leHRTaWJsaW5nfWZ1bmN0aW9uIE0oYSl7dGhpcy5vYnNlcnZlcnM9e30sdGhpcy52YWx1ZXM9e30sdGhpcy52YWx1ZT12b2lkIDAsdGhpcy5zaXplPTAsdGhpcy5jb21iaW5hdG9yXz1hLHRoaXMuY2xvc2VkPSExLHRoaXMuc2NoZWR1bGVkPSExfWZ1bmN0aW9uIE4oYSl7dGhpcy5jbG9zZWQ9ITEsdGhpcy50ZW1wbGF0ZUVsZW1lbnRfPWEsdGhpcy50ZXJtaW5hdG9ycz1bXSx0aGlzLml0ZXJhdGVkVmFsdWU9dm9pZCAwLHRoaXMuYXJyYXlPYnNlcnZlcj12b2lkIDAsdGhpcy5pbnB1dHM9bmV3IE0odGhpcy5yZXNvbHZlSW5wdXRzLmJpbmQodGhpcykpfXZhciBPLFA9QXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbC5iaW5kKEFycmF5LnByb3RvdHlwZS5mb3JFYWNoKSxRPUFycmF5LnByb3RvdHlwZS5maWx0ZXIuY2FsbC5iaW5kKEFycmF5LnByb3RvdHlwZS5maWx0ZXIpO2EuTWFwJiYiZnVuY3Rpb24iPT10eXBlb2YgYS5NYXAucHJvdG90eXBlLmZvckVhY2g/Tz1hLk1hcDooTz1mdW5jdGlvbigpe3RoaXMua2V5cz1bXSx0aGlzLnZhbHVlcz1bXX0sTy5wcm90b3R5cGU9e3NldDpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMua2V5cy5pbmRleE9mKGEpOzA+Yz8odGhpcy5rZXlzLnB1c2goYSksdGhpcy52YWx1ZXMucHVzaChiKSk6dGhpcy52YWx1ZXNbY109Yn0sZ2V0OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMua2V5cy5pbmRleE9mKGEpO2lmKCEoMD5iKSlyZXR1cm4gdGhpcy52YWx1ZXNbYl19LCJkZWxldGUiOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMua2V5cy5pbmRleE9mKGEpO3JldHVybiAwPmI/ITE6KHRoaXMua2V5cy5zcGxpY2UoYiwxKSx0aGlzLnZhbHVlcy5zcGxpY2UoYiwxKSwhMCl9LGZvckVhY2g6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9MDtjPHRoaXMua2V5cy5sZW5ndGg7YysrKWEuY2FsbChifHx0aGlzLHRoaXMudmFsdWVzW2NdLHRoaXMua2V5c1tjXSx0aGlzKX19KTt2YXIgUj0iX19wcm90b19fImlue30/ZnVuY3Rpb24oYSl7cmV0dXJuIGF9OmZ1bmN0aW9uKGEpe3ZhciBiPWEuX19wcm90b19fO2lmKCFiKXJldHVybiBhO3ZhciBjPU9iamVjdC5jcmVhdGUoYik7cmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGEpLmZvckVhY2goZnVuY3Rpb24oYil7T2JqZWN0LmRlZmluZVByb3BlcnR5KGMsYixPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGEsYikpfSksY307ImZ1bmN0aW9uIiE9dHlwZW9mIGRvY3VtZW50LmNvbnRhaW5zJiYoRG9jdW1lbnQucHJvdG90eXBlLmNvbnRhaW5zPWZ1bmN0aW9uKGEpe3JldHVybiBhPT09dGhpc3x8YS5wYXJlbnROb2RlPT09dGhpcz8hMDp0aGlzLmRvY3VtZW50RWxlbWVudC5jb250YWlucyhhKX0pO3ZhciBTOyJ1bmRlZmluZWQiIT10eXBlb2YgV2Vha01hcCYmbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCJGaXJlZm94LyIpPDA/Uz1XZWFrTWFwOmZ1bmN0aW9uKCl7dmFyIGE9T2JqZWN0LmRlZmluZVByb3BlcnR5LGI9T2JqZWN0Lmhhc093blByb3BlcnR5LGM9KG5ldyBEYXRlKS5nZXRUaW1lKCklMWU5O1M9ZnVuY3Rpb24oKXt0aGlzLm5hbWU9Il9fc3QiKygxZTkqTWF0aC5yYW5kb20oKT4+PjApKyhjKysgKyJfXyIpfSxTLnByb3RvdHlwZT17c2V0OmZ1bmN0aW9uKGIsYyl7YShiLHRoaXMubmFtZSx7dmFsdWU6Yyx3cml0YWJsZTohMH0pfSxnZXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGIuY2FsbChhLHRoaXMubmFtZSk/YVt0aGlzLm5hbWVdOnZvaWQgMH0sImRlbGV0ZSI6ZnVuY3Rpb24oYSl7dGhpcy5zZXQoYSx2b2lkIDApfX19KCksTm9kZS5wcm90b3R5cGUuYmluZD1mdW5jdGlvbihhLGIsYyl7dGhpcy5iaW5kaW5ncz10aGlzLmJpbmRpbmdzfHx7fTt2YXIgZD10aGlzLmJpbmRpbmdzW2FdO3JldHVybiBkJiZkLmNsb3NlKCksZD10aGlzLmNyZWF0ZUJpbmRpbmcoYSxiLGMpLHRoaXMuYmluZGluZ3NbYV09ZCxkP2Q6KGNvbnNvbGUuZXJyb3IoIlVuaGFuZGxlZCBiaW5kaW5nIHRvIE5vZGU6ICIsdGhpcyxhLGIsYyksdm9pZCAwKX0sTm9kZS5wcm90b3R5cGUuY3JlYXRlQmluZGluZz1mdW5jdGlvbigpe30sTm9kZS5wcm90b3R5cGUudW5iaW5kPWZ1bmN0aW9uKGEpe2lmKHRoaXMuYmluZGluZ3Mpe3ZhciBiPXRoaXMuYmluZGluZ3NbYV07YiYmKGIuY2xvc2UoKSxkZWxldGUgdGhpcy5iaW5kaW5nc1thXSl9fSxOb2RlLnByb3RvdHlwZS51bmJpbmRBbGw9ZnVuY3Rpb24oKXtpZih0aGlzLmJpbmRpbmdzKXtmb3IodmFyIGE9T2JqZWN0LmtleXModGhpcy5iaW5kaW5ncyksYj0wO2I8YS5sZW5ndGg7YisrKXt2YXIgYz10aGlzLmJpbmRpbmdzW2FbYl1dO2MmJmMuY2xvc2UoKX10aGlzLmJpbmRpbmdzPXt9fX0sZS5wcm90b3R5cGU9e2JvdW5kVmFsdWVDaGFuZ2VkOmZ1bmN0aW9uKGEpe3RoaXMubm9kZVt0aGlzLnByb3BlcnR5XT10aGlzLnNhbml0aXplQm91bmRWYWx1ZShhKX0sc2FuaXRpemVCb3VuZFZhbHVlOmZ1bmN0aW9uKGEpe3JldHVybiB2b2lkIDA9PWE/IiI6U3RyaW5nKGEpfSxjbG9zZTpmdW5jdGlvbigpe3RoaXMuY2xvc2VkfHwodGhpcy5vYnNlcnZlci5jbG9zZSgpLHRoaXMub2JzZXJ2ZXI9dm9pZCAwLHRoaXMubm9kZT12b2lkIDAsdGhpcy5tb2RlbD12b2lkIDAsdGhpcy5jbG9zZWQ9ITApfSxnZXQgdmFsdWUoKXtyZXR1cm4gdGhpcy5vYnNlcnZlci52YWx1ZX0sc2V0IHZhbHVlKGEpe1BhdGhPYnNlcnZlci5zZXRWYWx1ZUF0UGF0aCh0aGlzLm1vZGVsLHRoaXMucGF0aCxhKX0scmVzZXQ6ZnVuY3Rpb24oKXt0aGlzLm9ic2VydmVyLnJlc2V0KCl9fSxUZXh0LnByb3RvdHlwZS5jcmVhdGVCaW5kaW5nPWZ1bmN0aW9uKGEsYixjKXtyZXR1cm4idGV4dENvbnRlbnQiPT09YT9uZXcgZSh0aGlzLCJkYXRhIixiLGMpOk5vZGUucHJvdG90eXBlLmNyZWF0ZUJpbmRpbmcuY2FsbCh0aGlzLGEsYixjKX0sZi5wcm90b3R5cGU9Uih7X19wcm90b19fOmUucHJvdG90eXBlLGJvdW5kVmFsdWVDaGFuZ2VkOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNvbmRpdGlvbmFsPyhhP3RoaXMubm9kZS5zZXRBdHRyaWJ1dGUodGhpcy5wcm9wZXJ0eSwiIik6dGhpcy5ub2RlLnJlbW92ZUF0dHJpYnV0ZSh0aGlzLnByb3BlcnR5KSx2b2lkIDApOih0aGlzLm5vZGUuc2V0QXR0cmlidXRlKHRoaXMucHJvcGVydHksdGhpcy5zYW5pdGl6ZUJvdW5kVmFsdWUoYSkpLHZvaWQgMCl9fSksRWxlbWVudC5wcm90b3R5cGUuY3JlYXRlQmluZGluZz1mdW5jdGlvbihhLGIsYyl7cmV0dXJuIG5ldyBmKHRoaXMsYSxiLGMpfTt2YXIgVDshZnVuY3Rpb24oKXt2YXIgYT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKSxiPWEuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW5wdXQiKSk7Yi5zZXRBdHRyaWJ1dGUoInR5cGUiLCJjaGVja2JveCIpO3ZhciBjLGQ9MDtiLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIixmdW5jdGlvbigpe2QrKyxjPWN8fCJjbGljayJ9KSxiLmFkZEV2ZW50TGlzdGVuZXIoImNoYW5nZSIsZnVuY3Rpb24oKXtkKyssYz1jfHwiY2hhbmdlIn0pO3ZhciBlPWRvY3VtZW50LmNyZWF0ZUV2ZW50KCJNb3VzZUV2ZW50Iik7ZS5pbml0TW91c2VFdmVudCgiY2xpY2siLCEwLCEwLHdpbmRvdywwLDAsMCwwLDAsITEsITEsITEsITEsMCxudWxsKSxiLmRpc3BhdGNoRXZlbnQoZSksVD0xPT1kPyJjaGFuZ2UiOmN9KCksaC5wcm90b3R5cGU9Uih7X19wcm90b19fOmUucHJvdG90eXBlLG5vZGVWYWx1ZUNoYW5nZWQ6ZnVuY3Rpb24oKXt0aGlzLnZhbHVlPXRoaXMubm9kZVt0aGlzLnByb3BlcnR5XSx0aGlzLnJlc2V0KCksdGhpcy5wb3N0VXBkYXRlQmluZGluZygpLFBsYXRmb3JtLnBlcmZvcm1NaWNyb3Rhc2tDaGVja3BvaW50KCl9LHBvc3RVcGRhdGVCaW5kaW5nOmZ1bmN0aW9uKCl7fSxjbG9zZTpmdW5jdGlvbigpe3RoaXMuY2xvc2VkfHwodGhpcy5ub2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIodGhpcy5ldmVudFR5cGUsdGhpcy5ib3VuZE5vZGVWYWx1ZVRvTW9kZWwsITApLGUucHJvdG90eXBlLmNsb3NlLmNhbGwodGhpcykpfX0pLGoucHJvdG90eXBlPVIoe19fcHJvdG9fXzpoLnByb3RvdHlwZSxzYW5pdGl6ZUJvdW5kVmFsdWU6ZnVuY3Rpb24oYSl7cmV0dXJuIEJvb2xlYW4oYSl9LHBvc3RVcGRhdGVCaW5kaW5nOmZ1bmN0aW9uKCl7IklOUFVUIj09PXRoaXMubm9kZS50YWdOYW1lJiYicmFkaW8iPT09dGhpcy5ub2RlLnR5cGUmJmkodGhpcy5ub2RlKS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3ZhciBiPWEuYmluZGluZ3MuY2hlY2tlZDtiJiYoYi52YWx1ZT0hMSl9KX19KSxIVE1MSW5wdXRFbGVtZW50LnByb3RvdHlwZS5jcmVhdGVCaW5kaW5nPWZ1bmN0aW9uKGEsYixjKXtyZXR1cm4idmFsdWUiPT09YT8odGhpcy5yZW1vdmVBdHRyaWJ1dGUoYSksbmV3IGgodGhpcywidmFsdWUiLGIsYykpOiJjaGVja2VkIj09PWE/KHRoaXMucmVtb3ZlQXR0cmlidXRlKGEpLG5ldyBqKHRoaXMsYixjKSk6SFRNTEVsZW1lbnQucHJvdG90eXBlLmNyZWF0ZUJpbmRpbmcuY2FsbCh0aGlzLGEsYixjKX0sSFRNTFRleHRBcmVhRWxlbWVudC5wcm90b3R5cGUuY3JlYXRlQmluZGluZz1mdW5jdGlvbihhLGIsYyl7cmV0dXJuInZhbHVlIj09PWE/KHRoaXMucmVtb3ZlQXR0cmlidXRlKGEpLG5ldyBoKHRoaXMsYSxiLGMpKTpIVE1MRWxlbWVudC5wcm90b3R5cGUuY3JlYXRlQmluZGluZy5jYWxsKHRoaXMsYSxiLGMpfSxrLnByb3RvdHlwZT1SKHtfX3Byb3RvX186aC5wcm90b3R5cGUsYm91bmRWYWx1ZUNoYW5nZWQ6ZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYigpe2M+ZS5ub2RlLmxlbmd0aCYmZC0tP2JiKGIpOmUubm9kZVtlLnByb3BlcnR5XT1jfXZhciBjPU51bWJlcihhKTtpZihjPD10aGlzLm5vZGUubGVuZ3RoKXJldHVybiB0aGlzLm5vZGVbdGhpcy5wcm9wZXJ0eV09Yyx2b2lkIDA7dmFyIGQ9MixlPXRoaXM7YmIoYil9fSksSFRNTFNlbGVjdEVsZW1lbnQucHJvdG90eXBlLmNyZWF0ZUJpbmRpbmc9ZnVuY3Rpb24oYSxiLGMpe3JldHVybiJzZWxlY3RlZGluZGV4Ij09PWEudG9Mb3dlckNhc2UoKT8odGhpcy5yZW1vdmVBdHRyaWJ1dGUoYSksbmV3IGsodGhpcyxiLGMpKTpIVE1MRWxlbWVudC5wcm90b3R5cGUuY3JlYXRlQmluZGluZy5jYWxsKHRoaXMsYSxiLGMpfTt2YXIgVT0iYmluZCIsVj0icmVwZWF0IixXPSJpZiIsWD0iZ2V0QmluZGluZyIsWT0iZ2V0SW5zdGFuY2VNb2RlbCIsWj17dGVtcGxhdGU6ITAscmVwZWF0OiEwLGJpbmQ6ITAscmVmOiEwfSwkPXtUSEVBRDohMCxUQk9EWTohMCxURk9PVDohMCxUSDohMCxUUjohMCxURDohMCxDT0xHUk9VUDohMCxDT0w6ITAsQ0FQVElPTjohMCxPUFRJT046ITAsT1BUR1JPVVA6ITB9LF89InVuZGVmaW5lZCIhPXR5cGVvZiBIVE1MVGVtcGxhdGVFbGVtZW50LGFiPSJ0ZW1wbGF0ZSwgIitPYmplY3Qua2V5cygkKS5tYXAoZnVuY3Rpb24oYSl7cmV0dXJuIGEudG9Mb3dlckNhc2UoKSsiW3RlbXBsYXRlXSJ9KS5qb2luKCIsICIpLGJiPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhKXt0aGlzLm5leHRSdW5uZXI9YSx0aGlzLnZhbHVlPSExLHRoaXMubGFzdFZhbHVlPXRoaXMudmFsdWUsdGhpcy5zY2hlZHVsZWQ9W10sdGhpcy5zY2hlZHVsZWRJZHM9W10sdGhpcy5ydW5uaW5nPSExLHRoaXMub2JzZXJ2ZXI9bmV3IFBhdGhPYnNlcnZlcih0aGlzLCJ2YWx1ZSIsdGhpcy5ydW4sdGhpcyl9ZnVuY3Rpb24gYihhKXt2YXIgYj1hW2VdO2FbZV18fChiPWQrKyxhW2VdPWIpLGMuc2NoZWR1bGUoYSxiKX1hLnByb3RvdHlwZT17c2NoZWR1bGU6ZnVuY3Rpb24oYSxiKXtpZighdGhpcy5zY2hlZHVsZWRJZHNbYl0pe2lmKHRoaXMucnVubmluZylyZXR1cm4gdGhpcy5uZXh0UnVubmVyLnNjaGVkdWxlKGEsYik7dGhpcy5zY2hlZHVsZWRJZHNbYl09ITAsdGhpcy5zY2hlZHVsZWQucHVzaChhKSx0aGlzLmxhc3RWYWx1ZT09PXRoaXMudmFsdWUmJih0aGlzLnZhbHVlPSF0aGlzLnZhbHVlKX19LHJ1bjpmdW5jdGlvbigpe3RoaXMucnVubmluZz0hMDtmb3IodmFyIGE9MDthPHRoaXMuc2NoZWR1bGVkLmxlbmd0aDthKyspe3ZhciBiPXRoaXMuc2NoZWR1bGVkW2FdLGM9YltlXTt0aGlzLnNjaGVkdWxlZElkc1tjXT0hMSwiZnVuY3Rpb24iPT10eXBlb2YgYj9iKCk6Yi5yZXNvbHZlKCl9dGhpcy5zY2hlZHVsZWQ9W10sdGhpcy5zY2hlZHVsZWRJZHM9W10sdGhpcy5sYXN0VmFsdWU9dGhpcy52YWx1ZSx0aGlzLnJ1bm5pbmc9ITF9fTt2YXIgYz1uZXcgYShuZXcgYSksZD0xLGU9Il9fc2NoZWR1bGVkSWRfXyI7cmV0dXJuIGJ9KCk7ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsZnVuY3Rpb24oKXtwKGRvY3VtZW50KSxQbGF0Zm9ybS5wZXJmb3JtTWljcm90YXNrQ2hlY2twb2ludCgpfSwhMSksX3x8KGEuSFRNTFRlbXBsYXRlRWxlbWVudD1mdW5jdGlvbigpe3Rocm93IFR5cGVFcnJvcigiSWxsZWdhbCBjb25zdHJ1Y3RvciIpfSk7dmFyIGNiPSJfX3Byb3RvX18iaW57fSxkYj1uZXcgUyxlYj1uZXcgUyxmYj1uZXcgUyxnYj1uZXcgUztIVE1MVGVtcGxhdGVFbGVtZW50LmRlY29yYXRlPWZ1bmN0aW9uKGEsYyl7aWYoYS50ZW1wbGF0ZUlzRGVjb3JhdGVkXylyZXR1cm4hMTt2YXIgZD1hO2QudGVtcGxhdGVJc0RlY29yYXRlZF89ITA7dmFyIGU9bihkKSxmPWUsZz0hZSxoPSExO2lmKCFlJiZsKGQpJiYoYighYyksZD1zKGEpLGQudGVtcGxhdGVJc0RlY29yYXRlZF89ITAsZT1uKGQpLGg9ITApLCFlKXt1KGQpO3ZhciBpPXIoZC5vd25lckRvY3VtZW50KTtkYi5zZXQoZCxpLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSl9cmV0dXJuIGM/ZmIuc2V0KGQsYyk6Zz90KGQsYSxoKTpmJiZwKGQuY29udGVudCksITB9LEhUTUxUZW1wbGF0ZUVsZW1lbnQuYm9vdHN0cmFwPXA7dmFyIGhiPWEuSFRNTFVua25vd25FbGVtZW50fHxIVE1MRWxlbWVudCxpYj17Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGRiLmdldCh0aGlzKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9O198fChIVE1MVGVtcGxhdGVFbGVtZW50LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGhiLnByb3RvdHlwZSksT2JqZWN0LmRlZmluZVByb3BlcnR5KEhUTUxUZW1wbGF0ZUVsZW1lbnQucHJvdG90eXBlLCJjb250ZW50IixpYikpO3ZhciBqYj1uZXcgUyxrYj1uZXcgUyxsYj1uZXcgUzt3LnByb3RvdHlwZT1SKHtfX3Byb3RvX186ZS5wcm90b3R5cGUsZ2V0IHZhbHVlKCl7fSxib3VuZFZhbHVlQ2hhbmdlZDpmdW5jdGlvbigpe30sY2xvc2U6ZnVuY3Rpb24oKXt0aGlzLmNsb3NlZHx8KHRoaXMubm9kZS5pbnB1dHMudW5iaW5kKHRoaXMucHJvcGVydHkpLHRoaXMubm9kZT12b2lkIDAsdGhpcy5tb2RlbD12b2lkIDAsdGhpcy5jbG9zZWQ9ITApfX0pLHEoSFRNTFRlbXBsYXRlRWxlbWVudC5wcm90b3R5cGUse2NyZWF0ZUJpbmRpbmc6ZnVuY3Rpb24oYSxiLGMpe2lmKGE9PT1VfHxhPT09Vnx8YT09PVcpe3ZhciBkPW5iLmdldCh0aGlzKTtyZXR1cm4gZHx8KGQ9bmV3IE4odGhpcyksbmIuc2V0KHRoaXMsZCkpLG5ldyB3KGQsYSxiLGN8fCIiKX1yZXR1cm4gSFRNTEVsZW1lbnQucHJvdG90eXBlLmNyZWF0ZUJpbmRpbmcuY2FsbCh0aGlzLGEsYixjKX0sY3JlYXRlSW5zdGFuY2U6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXRoaXMucmVmLmNvbnRlbnQsZT1nYi5nZXQoZCk7ZXx8KGU9SihkKXx8W10sZ2Iuc2V0KGQsZSkpO3ZhciBmPWUuaGFzU3ViVGVtcGxhdGU/SShkKTpkLmNsb25lTm9kZSghMCk7cmV0dXJuIEcoZixlLGEsYixjKSxMKGYsYSksZn0sZ2V0IG1vZGVsKCl7cmV0dXJuIGpiLmdldCh0aGlzKX0sc2V0IG1vZGVsKGEpe2piLnNldCh0aGlzLGEpLHYodGhpcyl9LGdldCBiaW5kaW5nRGVsZWdhdGUoKXtyZXR1cm4ga2IuZ2V0KHRoaXMpfSxzZXQgYmluZGluZ0RlbGVnYXRlKGEpe2tiLnNldCh0aGlzLGEpLHYodGhpcyl9LGdldCByZWYoKXt2YXIgYSxiPXRoaXMuZ2V0QXR0cmlidXRlKCJyZWYiKTtpZihiKXt2YXIgZD1jKHRoaXMpO2QmJihhPWQuZ2V0RWxlbWVudEJ5SWQoYikpfWlmKGF8fChhPWZiLmdldCh0aGlzKSksIWEpcmV0dXJuIHRoaXM7dmFyIGU9YS5yZWY7cmV0dXJuIGU/ZTphfX0pLEYucHJvdG90eXBlPXtjbG9zZTpmdW5jdGlvbigpe3ZhciBhPW5iLmdldCh0aGlzLm5vZGUpO2EmJmEuY2xvc2UoKX19O3ZhciBtYj1uZXcgUztPYmplY3QuZGVmaW5lUHJvcGVydHkoTm9kZS5wcm90b3R5cGUsInRlbXBsYXRlSW5zdGFuY2UiLHtnZXQ6ZnVuY3Rpb24oKXt2YXIgYT1tYi5nZXQodGhpcyk7cmV0dXJuIGE/YTp0aGlzLnBhcmVudE5vZGU/dGhpcy5wYXJlbnROb2RlLnRlbXBsYXRlSW5zdGFuY2U6dm9pZCAwfX0pLE0ucHJvdG90eXBlPXtzZXQgY29tYmluYXRvcihhKXt0aGlzLmNvbWJpbmF0b3JfPWEsdGhpcy5zY2hlZHVsZVJlc29sdmUoKX0scGF0aFZhbHVlQ2hhbmdlZDpmdW5jdGlvbihhLGIsYyl7dGhpcy52YWx1ZXNbY109YSx0aGlzLnNjaGVkdWxlUmVzb2x2ZSgpfSxiaW5kOmZ1bmN0aW9uKGEsYixjKXt0aGlzLnVuYmluZChhKSx0aGlzLnNpemUrKzt2YXIgZD1uZXcgUGF0aE9ic2VydmVyKGIsYyx0aGlzLnBhdGhWYWx1ZUNoYW5nZWQsdGhpcyxhKTt0aGlzLm9ic2VydmVyc1thXT1kLHRoaXMucGF0aFZhbHVlQ2hhbmdlZChkLnZhbHVlLHZvaWQgMCxhKX0sdW5iaW5kOmZ1bmN0aW9uKGEsYil7dGhpcy5vYnNlcnZlcnNbYV0mJih0aGlzLnNpemUtLSx0aGlzLm9ic2VydmVyc1thXS5jbG9zZSgpLGRlbGV0ZSB0aGlzLm9ic2VydmVyc1thXSxkZWxldGUgdGhpcy52YWx1ZXNbYV0sYnx8dGhpcy5zY2hlZHVsZVJlc29sdmUoKSl9LHNjaGVkdWxlUmVzb2x2ZTpmdW5jdGlvbigpe3RoaXMuc2NoZWR1bGVkfHwodGhpcy5zY2hlZHVsZWQ9ITAsYmIodGhpcykpfSxyZXNvbHZlOmZ1bmN0aW9uKCl7aWYoIXRoaXMuY2xvc2VkKXtpZighdGhpcy5jb21iaW5hdG9yXyl0aHJvdyBFcnJvcigiQ29tcG91bmRCaW5kaW5nIGF0dGVtcHRlZCB0byByZXNvbHZlIHdpdGhvdXQgYSBjb21iaW5hdG9yIik7dGhpcy52YWx1ZT10aGlzLmNvbWJpbmF0b3JfKHRoaXMudmFsdWVzKSx0aGlzLnNjaGVkdWxlZD0hMX19LHVub2JzZXJ2ZWQ6ZnVuY3Rpb24oKXt0aGlzLmNsb3NlKCl9LGNsb3NlOmZ1bmN0aW9uKCl7dGhpcy5jbG9zZWR8fChPYmplY3Qua2V5cyh0aGlzLm9ic2VydmVycykuZm9yRWFjaChmdW5jdGlvbihhKXt0aGlzLnVuYmluZChhLCEwKX0sdGhpcyksdGhpcy5jbG9zZWQ9ITAsdGhpcy52YWx1ZT12b2lkIDApfX0sTi5wcm90b3R5cGU9e3Jlc29sdmVJbnB1dHM6ZnVuY3Rpb24oYSl7dGhpcy5jbG9zZWR8fChXIGluIGEmJiFhW1ddP3RoaXMudmFsdWVDaGFuZ2VkKHZvaWQgMCk6ViBpbiBhP3RoaXMudmFsdWVDaGFuZ2VkKGFbVl0pOlUgaW4gYXx8VyBpbiBhP3RoaXMudmFsdWVDaGFuZ2VkKFthW1VdXSk6dGhpcy52YWx1ZUNoYW5nZWQodm9pZCAwKSl9LHZhbHVlQ2hhbmdlZDpmdW5jdGlvbihhKXtBcnJheS5pc0FycmF5KGEpfHwoYT12b2lkIDApO3ZhciBiPXRoaXMuaXRlcmF0ZWRWYWx1ZTt0aGlzLnVub2JzZXJ2ZSgpLHRoaXMuaXRlcmF0ZWRWYWx1ZT1hLHRoaXMuaXRlcmF0ZWRWYWx1ZSYmKHRoaXMuYXJyYXlPYnNlcnZlcj1uZXcgQXJyYXlPYnNlcnZlcih0aGlzLml0ZXJhdGVkVmFsdWUsdGhpcy5oYW5kbGVTcGxpY2VzLHRoaXMpKTt2YXIgYz1BcnJheU9ic2VydmVyLmNhbGN1bGF0ZVNwbGljZXModGhpcy5pdGVyYXRlZFZhbHVlfHxbXSxifHxbXSk7Yy5sZW5ndGgmJnRoaXMuaGFuZGxlU3BsaWNlcyhjKSx0aGlzLmlucHV0cy5zaXplfHwobmIuZGVsZXRlKHRoaXMpLHRoaXMuY2xvc2UoKSl9LGdldFRlcm1pbmF0b3JBdDpmdW5jdGlvbihhKXtpZigtMT09YSlyZXR1cm4gdGhpcy50ZW1wbGF0ZUVsZW1lbnRfO3ZhciBiPXRoaXMudGVybWluYXRvcnNbMiphXTtpZihiLm5vZGVUeXBlIT09Tm9kZS5FTEVNRU5UX05PREV8fHRoaXMudGVtcGxhdGVFbGVtZW50Xz09PWIpcmV0dXJuIGI7dmFyIGM9bmIuZ2V0KGIpO3JldHVybiBjP2MuZ2V0VGVybWluYXRvckF0KGMudGVybWluYXRvcnMubGVuZ3RoLzItMSk6Ygp9LGluc2VydEluc3RhbmNlQXQ6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9dGhpcy5nZXRUZXJtaW5hdG9yQXQoYS0xKSxmPWI/Yi5sYXN0Q2hpbGR8fGU6Y1tjLmxlbmd0aC0xXXx8ZTt0aGlzLnRlcm1pbmF0b3JzLnNwbGljZSgyKmEsMCxmLGQpO3ZhciBnPXRoaXMudGVtcGxhdGVFbGVtZW50Xy5wYXJlbnROb2RlLGg9ZS5uZXh0U2libGluZztpZihiKXJldHVybiBnLmluc2VydEJlZm9yZShiLGgpLHZvaWQgMDtmb3IodmFyIGk9MDtpPGMubGVuZ3RoO2krKylnLmluc2VydEJlZm9yZShjW2ldLGgpfSxleHRyYWN0SW5zdGFuY2VBdDpmdW5jdGlvbihhKXt2YXIgYj1bXSxjPXRoaXMuZ2V0VGVybWluYXRvckF0KGEtMSksZD10aGlzLmdldFRlcm1pbmF0b3JBdChhKTtiLmJvdW5kPXRoaXMudGVybWluYXRvcnNbMiphKzFdLHRoaXMudGVybWluYXRvcnMuc3BsaWNlKDIqYSwyKTtmb3IodmFyIGU9dGhpcy50ZW1wbGF0ZUVsZW1lbnRfLnBhcmVudE5vZGU7ZCE9PWM7KXt2YXIgZj1jLm5leHRTaWJsaW5nO2Y9PWQmJihkPWMpLGUucmVtb3ZlQ2hpbGQoZiksYi5wdXNoKGYpfXJldHVybiBifSxnZXRJbnN0YW5jZU1vZGVsOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD1jJiZjW1ldO3JldHVybiBkJiYiZnVuY3Rpb24iPT10eXBlb2YgZD9kKGEsYik6Yn0saGFuZGxlU3BsaWNlczpmdW5jdGlvbihhKXtpZighdGhpcy5jbG9zZWQpe3ZhciBiPXRoaXMudGVtcGxhdGVFbGVtZW50XztpZighYi5wYXJlbnROb2RlfHwhYi5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3KXJldHVybiB0aGlzLmNsb3NlKCksbmIuZGVsZXRlKHRoaXMpLHZvaWQgMDt2YXIgYz1iLmJpbmRpbmdEZWxlZ2F0ZSxkPW5ldyBPLGU9MDthLmZvckVhY2goZnVuY3Rpb24oYSl7YS5yZW1vdmVkLmZvckVhY2goZnVuY3Rpb24oYil7dmFyIGM9dGhpcy5leHRyYWN0SW5zdGFuY2VBdChhLmluZGV4K2UpO2Quc2V0KGIsYyl9LHRoaXMpLGUtPWEuYWRkZWRDb3VudH0sdGhpcyksYS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2Zvcih2YXIgZT1hLmluZGV4O2U8YS5pbmRleCthLmFkZGVkQ291bnQ7ZSsrKXt2YXIgZixnPXRoaXMuaXRlcmF0ZWRWYWx1ZVtlXSxoPXZvaWQgMCxpPWQuZ2V0KGcpO2lmKGkpZC5kZWxldGUoZyksZj1pLmJvdW5kO2Vsc2V7Zj1bXTt2YXIgaj10aGlzLmdldEluc3RhbmNlTW9kZWwoYixnLGMpO2g9dGhpcy50ZW1wbGF0ZUVsZW1lbnRfLmNyZWF0ZUluc3RhbmNlKGosYyxmKX10aGlzLmluc2VydEluc3RhbmNlQXQoZSxoLGksZil9fSx0aGlzKSxkLmZvckVhY2goZnVuY3Rpb24oYSl7Zm9yKHZhciBiPWEuYm91bmQsYz0wO2M8Yi5sZW5ndGg7YysrKWJbY10uY2xvc2UoKX0pfX0sdW5vYnNlcnZlOmZ1bmN0aW9uKCl7dGhpcy5hcnJheU9ic2VydmVyJiYodGhpcy5hcnJheU9ic2VydmVyLmNsb3NlKCksdGhpcy5hcnJheU9ic2VydmVyPXZvaWQgMCl9LGNsb3NlOmZ1bmN0aW9uKCl7aWYoIXRoaXMuY2xvc2VkKXt0aGlzLnVub2JzZXJ2ZSgpO2Zvcih2YXIgYT0xO2E8dGhpcy50ZXJtaW5hdG9ycy5sZW5ndGg7YSs9Milmb3IodmFyIGI9dGhpcy50ZXJtaW5hdG9yc1thXSxjPTA7YzxiLmxlbmd0aDtjKyspYltjXS5jbG9zZSgpO3RoaXMudGVybWluYXRvcnMubGVuZ3RoPTAsdGhpcy5pbnB1dHMuY2xvc2UoKSx0aGlzLmNsb3NlZD0hMH19fTt2YXIgbmI9bmV3IFM7YS5Db21wb3VuZEJpbmRpbmc9TSxIVE1MVGVtcGxhdGVFbGVtZW50LmZvckFsbFRlbXBsYXRlc0Zyb21fPW99KHRoaXMpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEsYil7aWYoIWEpdGhyb3cgbmV3IEVycm9yKCJBU1NFUlQ6ICIrYil9ZnVuY3Rpb24gYyhhKXtyZXR1cm4gYT49NDgmJjU3Pj1hfWZ1bmN0aW9uIGQoYSl7cmV0dXJuIDMyPT09YXx8OT09PWF8fDExPT09YXx8MTI9PT1hfHwxNjA9PT1hfHxhPj01NzYwJiYi4ZqA4aCO4oCA4oCB4oCC4oCD4oCE4oCF4oCG4oCH4oCI4oCJ4oCK4oCv4oGf44CA77u/Ii5pbmRleE9mKFN0cmluZy5mcm9tQ2hhckNvZGUoYSkpPjB9ZnVuY3Rpb24gZShhKXtyZXR1cm4gMTA9PT1hfHwxMz09PWF8fDgyMzI9PT1hfHw4MjMzPT09YX1mdW5jdGlvbiBmKGEpe3JldHVybiAzNj09PWF8fDk1PT09YXx8YT49NjUmJjkwPj1hfHxhPj05NyYmMTIyPj1hfWZ1bmN0aW9uIGcoYSl7cmV0dXJuIDM2PT09YXx8OTU9PT1hfHxhPj02NSYmOTA+PWF8fGE+PTk3JiYxMjI+PWF8fGE+PTQ4JiY1Nz49YX1mdW5jdGlvbiBoKGEpe3JldHVybiJ0aGlzIj09PWF9ZnVuY3Rpb24gaSgpe2Zvcig7YmI+YWImJmQoXy5jaGFyQ29kZUF0KGFiKSk7KSsrYWJ9ZnVuY3Rpb24gaigpe3ZhciBhLGI7Zm9yKGE9YWIrKztiYj5hYiYmKGI9Xy5jaGFyQ29kZUF0KGFiKSxnKGIpKTspKythYjtyZXR1cm4gXy5zbGljZShhLGFiKX1mdW5jdGlvbiBrKCl7dmFyIGEsYixjO3JldHVybiBhPWFiLGI9aigpLGM9MT09PWIubGVuZ3RoP1guSWRlbnRpZmllcjpoKGIpP1guS2V5d29yZDoibnVsbCI9PT1iP1guTnVsbExpdGVyYWw6InRydWUiPT09Ynx8ImZhbHNlIj09PWI/WC5Cb29sZWFuTGl0ZXJhbDpYLklkZW50aWZpZXIse3R5cGU6Yyx2YWx1ZTpiLHJhbmdlOlthLGFiXX19ZnVuY3Rpb24gbCgpe3ZhciBhLGIsYyxkLGU9YWIsZj1fLmNoYXJDb2RlQXQoYWIpLGc9X1thYl07c3dpdGNoKGYpe2Nhc2UgNDY6Y2FzZSA0MDpjYXNlIDQxOmNhc2UgNTk6Y2FzZSA0NDpjYXNlIDEyMzpjYXNlIDEyNTpjYXNlIDkxOmNhc2UgOTM6Y2FzZSA1ODpjYXNlIDYzOmNhc2UgMTI2OnJldHVybisrYWIse3R5cGU6WC5QdW5jdHVhdG9yLHZhbHVlOlN0cmluZy5mcm9tQ2hhckNvZGUoZikscmFuZ2U6W2UsYWJdfTtkZWZhdWx0OmlmKGE9Xy5jaGFyQ29kZUF0KGFiKzEpLDYxPT09YSlzd2l0Y2goZil7Y2FzZSAzNzpjYXNlIDM4OmNhc2UgNDI6Y2FzZSA0MzpjYXNlIDQ1OmNhc2UgNDc6Y2FzZSA2MDpjYXNlIDYyOmNhc2UgOTQ6Y2FzZSAxMjQ6cmV0dXJuIGFiKz0yLHt0eXBlOlguUHVuY3R1YXRvcix2YWx1ZTpTdHJpbmcuZnJvbUNoYXJDb2RlKGYpK1N0cmluZy5mcm9tQ2hhckNvZGUoYSkscmFuZ2U6W2UsYWJdfTtjYXNlIDMzOmNhc2UgNjE6cmV0dXJuIGFiKz0yLDYxPT09Xy5jaGFyQ29kZUF0KGFiKSYmKythYix7dHlwZTpYLlB1bmN0dWF0b3IsdmFsdWU6Xy5zbGljZShlLGFiKSxyYW5nZTpbZSxhYl19fX1yZXR1cm4gYj1fW2FiKzFdLGM9X1thYisyXSxkPV9bYWIrM10sIj4iPT09ZyYmIj4iPT09YiYmIj4iPT09YyYmIj0iPT09ZD8oYWIrPTQse3R5cGU6WC5QdW5jdHVhdG9yLHZhbHVlOiI+Pj49IixyYW5nZTpbZSxhYl19KToiPiI9PT1nJiYiPiI9PT1iJiYiPiI9PT1jPyhhYis9Myx7dHlwZTpYLlB1bmN0dWF0b3IsdmFsdWU6Ij4+PiIscmFuZ2U6W2UsYWJdfSk6IjwiPT09ZyYmIjwiPT09YiYmIj0iPT09Yz8oYWIrPTMse3R5cGU6WC5QdW5jdHVhdG9yLHZhbHVlOiI8PD0iLHJhbmdlOltlLGFiXX0pOiI+Ij09PWcmJiI+Ij09PWImJiI9Ij09PWM/KGFiKz0zLHt0eXBlOlguUHVuY3R1YXRvcix2YWx1ZToiPj49IixyYW5nZTpbZSxhYl19KTpnPT09YiYmIistPD4mfCIuaW5kZXhPZihnKT49MD8oYWIrPTIse3R5cGU6WC5QdW5jdHVhdG9yLHZhbHVlOmcrYixyYW5nZTpbZSxhYl19KToiPD49ISstKiUmfF4vIi5pbmRleE9mKGcpPj0wPygrK2FiLHt0eXBlOlguUHVuY3R1YXRvcix2YWx1ZTpnLHJhbmdlOltlLGFiXX0pOihzKHt9LCQuVW5leHBlY3RlZFRva2VuLCJJTExFR0FMIiksdm9pZCAwKX1mdW5jdGlvbiBtKCl7dmFyIGEsZCxlO2lmKGU9X1thYl0sYihjKGUuY2hhckNvZGVBdCgwKSl8fCIuIj09PWUsIk51bWVyaWMgbGl0ZXJhbCBtdXN0IHN0YXJ0IHdpdGggYSBkZWNpbWFsIGRpZ2l0IG9yIGEgZGVjaW1hbCBwb2ludCIpLGQ9YWIsYT0iIiwiLiIhPT1lKXtmb3IoYT1fW2FiKytdLGU9X1thYl0sIjAiPT09YSYmZSYmYyhlLmNoYXJDb2RlQXQoMCkpJiZzKHt9LCQuVW5leHBlY3RlZFRva2VuLCJJTExFR0FMIik7YyhfLmNoYXJDb2RlQXQoYWIpKTspYSs9X1thYisrXTtlPV9bYWJdfWlmKCIuIj09PWUpe2ZvcihhKz1fW2FiKytdO2MoXy5jaGFyQ29kZUF0KGFiKSk7KWErPV9bYWIrK107ZT1fW2FiXX1pZigiZSI9PT1lfHwiRSI9PT1lKWlmKGErPV9bYWIrK10sZT1fW2FiXSwoIisiPT09ZXx8Ii0iPT09ZSkmJihhKz1fW2FiKytdKSxjKF8uY2hhckNvZGVBdChhYikpKWZvcig7YyhfLmNoYXJDb2RlQXQoYWIpKTspYSs9X1thYisrXTtlbHNlIHMoe30sJC5VbmV4cGVjdGVkVG9rZW4sIklMTEVHQUwiKTtyZXR1cm4gZihfLmNoYXJDb2RlQXQoYWIpKSYmcyh7fSwkLlVuZXhwZWN0ZWRUb2tlbiwiSUxMRUdBTCIpLHt0eXBlOlguTnVtZXJpY0xpdGVyYWwsdmFsdWU6cGFyc2VGbG9hdChhKSxyYW5nZTpbZCxhYl19fWZ1bmN0aW9uIG4oKXt2YXIgYSxjLGQsZj0iIixnPSExO2ZvcihhPV9bYWJdLGIoIiciPT09YXx8JyInPT09YSwiU3RyaW5nIGxpdGVyYWwgbXVzdCBzdGFydHMgd2l0aCBhIHF1b3RlIiksYz1hYiwrK2FiO2JiPmFiOyl7aWYoZD1fW2FiKytdLGQ9PT1hKXthPSIiO2JyZWFrfWlmKCJcXCI9PT1kKWlmKGQ9X1thYisrXSxkJiZlKGQuY2hhckNvZGVBdCgwKSkpIlxyIj09PWQmJiJcbiI9PT1fW2FiXSYmKythYjtlbHNlIHN3aXRjaChkKXtjYXNlIm4iOmYrPSJcbiI7YnJlYWs7Y2FzZSJyIjpmKz0iXHIiO2JyZWFrO2Nhc2UidCI6Zis9IgkiO2JyZWFrO2Nhc2UiYiI6Zis9IlxiIjticmVhaztjYXNlImYiOmYrPSJcZiI7YnJlYWs7Y2FzZSJ2IjpmKz0iCyI7YnJlYWs7ZGVmYXVsdDpmKz1kfWVsc2V7aWYoZShkLmNoYXJDb2RlQXQoMCkpKWJyZWFrO2YrPWR9fXJldHVybiIiIT09YSYmcyh7fSwkLlVuZXhwZWN0ZWRUb2tlbiwiSUxMRUdBTCIpLHt0eXBlOlguU3RyaW5nTGl0ZXJhbCx2YWx1ZTpmLG9jdGFsOmcscmFuZ2U6W2MsYWJdfX1mdW5jdGlvbiBvKGEpe3JldHVybiBhLnR5cGU9PT1YLklkZW50aWZpZXJ8fGEudHlwZT09PVguS2V5d29yZHx8YS50eXBlPT09WC5Cb29sZWFuTGl0ZXJhbHx8YS50eXBlPT09WC5OdWxsTGl0ZXJhbH1mdW5jdGlvbiBwKCl7dmFyIGE7cmV0dXJuIGkoKSxhYj49YmI/e3R5cGU6WC5FT0YscmFuZ2U6W2FiLGFiXX06KGE9Xy5jaGFyQ29kZUF0KGFiKSw0MD09PWF8fDQxPT09YXx8NTg9PT1hP2woKTozOT09PWF8fDM0PT09YT9uKCk6ZihhKT9rKCk6NDY9PT1hP2MoXy5jaGFyQ29kZUF0KGFiKzEpKT9tKCk6bCgpOmMoYSk/bSgpOmwoKSl9ZnVuY3Rpb24gcSgpe3ZhciBhO3JldHVybiBhPWRiLGFiPWEucmFuZ2VbMV0sZGI9cCgpLGFiPWEucmFuZ2VbMV0sYX1mdW5jdGlvbiByKCl7dmFyIGE7YT1hYixkYj1wKCksYWI9YX1mdW5jdGlvbiBzKGEsYyl7dmFyIGQsZT1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMiksZj1jLnJlcGxhY2UoLyUoXGQpL2csZnVuY3Rpb24oYSxjKXtyZXR1cm4gYihjPGUubGVuZ3RoLCJNZXNzYWdlIHJlZmVyZW5jZSBtdXN0IGJlIGluIHJhbmdlIiksZVtjXX0pO3Rocm93IGQ9bmV3IEVycm9yKGYpLGQuaW5kZXg9YWIsZC5kZXNjcmlwdGlvbj1mLGR9ZnVuY3Rpb24gdChhKXtzKGEsJC5VbmV4cGVjdGVkVG9rZW4sYS52YWx1ZSl9ZnVuY3Rpb24gdShhKXt2YXIgYj1xKCk7KGIudHlwZSE9PVguUHVuY3R1YXRvcnx8Yi52YWx1ZSE9PWEpJiZ0KGIpfWZ1bmN0aW9uIHYoYSl7cmV0dXJuIGRiLnR5cGU9PT1YLlB1bmN0dWF0b3ImJmRiLnZhbHVlPT09YX1mdW5jdGlvbiB3KGEpe3JldHVybiBkYi50eXBlPT09WC5LZXl3b3JkJiZkYi52YWx1ZT09PWF9ZnVuY3Rpb24geCgpe3JldHVybiA1OT09PV8uY2hhckNvZGVBdChhYik/KHEoKSx2b2lkIDApOihpKCksdigiOyIpPyhxKCksdm9pZCAwKTooZGIudHlwZT09PVguRU9GfHx2KCJ9Iil8fHQoZGIpLHZvaWQgMCkpfWZ1bmN0aW9uIHkoKXt2YXIgYT1bXTtmb3IodSgiWyIpOyF2KCJdIik7KXYoIiwiKT8ocSgpLGEucHVzaChudWxsKSk6KGEucHVzaChPKCkpLHYoIl0iKXx8dSgiLCIpKTtyZXR1cm4gdSgiXSIpLGNiLmNyZWF0ZUFycmF5RXhwcmVzc2lvbihhKX1mdW5jdGlvbiB6KCl7dmFyIGE7cmV0dXJuIGkoKSxhPXEoKSxhLnR5cGU9PT1YLlN0cmluZ0xpdGVyYWx8fGEudHlwZT09PVguTnVtZXJpY0xpdGVyYWw/Y2IuY3JlYXRlTGl0ZXJhbChhKTpjYi5jcmVhdGVJZGVudGlmaWVyKGEudmFsdWUpfWZ1bmN0aW9uIEEoKXt2YXIgYSxiO3JldHVybiBhPWRiLGkoKSwoYS50eXBlPT09WC5FT0Z8fGEudHlwZT09PVguUHVuY3R1YXRvcikmJnQoYSksYj16KCksdSgiOiIpLGNiLmNyZWF0ZVByb3BlcnR5KCJpbml0IixiLE8oKSl9ZnVuY3Rpb24gQigpe3ZhciBhPVtdO2Zvcih1KCJ7Iik7IXYoIn0iKTspYS5wdXNoKEEoKSksdigifSIpfHx1KCIsIik7cmV0dXJuIHUoIn0iKSxjYi5jcmVhdGVPYmplY3RFeHByZXNzaW9uKGEpfWZ1bmN0aW9uIEMoKXt2YXIgYTtyZXR1cm4gdSgiKCIpLGE9UCgpLHUoIikiKSxhfWZ1bmN0aW9uIEQoKXt2YXIgYSxiLGM7cmV0dXJuIHYoIigiKT9DKCk6KGE9ZGIudHlwZSxhPT09WC5JZGVudGlmaWVyP2M9Y2IuY3JlYXRlSWRlbnRpZmllcihxKCkudmFsdWUpOmE9PT1YLlN0cmluZ0xpdGVyYWx8fGE9PT1YLk51bWVyaWNMaXRlcmFsP2M9Y2IuY3JlYXRlTGl0ZXJhbChxKCkpOmE9PT1YLktleXdvcmQ/dygidGhpcyIpJiYocSgpLGM9Y2IuY3JlYXRlVGhpc0V4cHJlc3Npb24oKSk6YT09PVguQm9vbGVhbkxpdGVyYWw/KGI9cSgpLGIudmFsdWU9InRydWUiPT09Yi52YWx1ZSxjPWNiLmNyZWF0ZUxpdGVyYWwoYikpOmE9PT1YLk51bGxMaXRlcmFsPyhiPXEoKSxiLnZhbHVlPW51bGwsYz1jYi5jcmVhdGVMaXRlcmFsKGIpKTp2KCJbIik/Yz15KCk6digieyIpJiYoYz1CKCkpLGM/YzoodChxKCkpLHZvaWQgMCkpfWZ1bmN0aW9uIEUoKXt2YXIgYT1bXTtpZih1KCIoIiksIXYoIikiKSlmb3IoO2JiPmFiJiYoYS5wdXNoKE8oKSksIXYoIikiKSk7KXUoIiwiKTtyZXR1cm4gdSgiKSIpLGF9ZnVuY3Rpb24gRigpe3ZhciBhO3JldHVybiBhPXEoKSxvKGEpfHx0KGEpLGNiLmNyZWF0ZUlkZW50aWZpZXIoYS52YWx1ZSl9ZnVuY3Rpb24gRygpe3JldHVybiB1KCIuIiksRigpfWZ1bmN0aW9uIEgoKXt2YXIgYTtyZXR1cm4gdSgiWyIpLGE9UCgpLHUoIl0iKSxhfWZ1bmN0aW9uIEkoKXt2YXIgYSxiLGM7Zm9yKGE9RCgpO3YoIi4iKXx8digiWyIpfHx2KCIoIik7KXYoIigiKT8oYj1FKCksYT1jYi5jcmVhdGVDYWxsRXhwcmVzc2lvbihhLGIpKTp2KCJbIik/KGM9SCgpLGE9Y2IuY3JlYXRlTWVtYmVyRXhwcmVzc2lvbigiWyIsYSxjKSk6KGM9RygpLGE9Y2IuY3JlYXRlTWVtYmVyRXhwcmVzc2lvbigiLiIsYSxjKSk7cmV0dXJuIGF9ZnVuY3Rpb24gSigpe3ZhciBhO3JldHVybiBhPUkoKSxkYi50eXBlPT09WC5QdW5jdHVhdG9yJiYodigiKysiKXx8digiLS0iKSkmJnMoe30sJC5VbmV4cGVjdGVkVG9rZW4pLGF9ZnVuY3Rpb24gSygpe3ZhciBhLGI7cmV0dXJuIGRiLnR5cGUhPT1YLlB1bmN0dWF0b3ImJmRiLnR5cGUhPT1YLktleXdvcmQ/Yj1KKCk6digiKysiKXx8digiLS0iKT9zKHt9LCQuVW5leHBlY3RlZFRva2VuKTp2KCIrIil8fHYoIi0iKXx8digifiIpfHx2KCIhIik/KGE9cSgpLGI9SygpLGI9Y2IuY3JlYXRlVW5hcnlFeHByZXNzaW9uKGEudmFsdWUsYikpOncoImRlbGV0ZSIpfHx3KCJ2b2lkIil8fHcoInR5cGVvZiIpP3Moe30sJC5VbmV4cGVjdGVkVG9rZW4pOmI9SigpLGJ9ZnVuY3Rpb24gTChhLGIpe3ZhciBjPTA7aWYoYS50eXBlIT09WC5QdW5jdHVhdG9yJiZhLnR5cGUhPT1YLktleXdvcmQpcmV0dXJuIDA7c3dpdGNoKGEudmFsdWUpe2Nhc2UifHwiOmM9MTticmVhaztjYXNlIiYmIjpjPTI7YnJlYWs7Y2FzZSJ8IjpjPTM7YnJlYWs7Y2FzZSJeIjpjPTQ7YnJlYWs7Y2FzZSImIjpjPTU7YnJlYWs7Y2FzZSI9PSI6Y2FzZSIhPSI6Y2FzZSI9PT0iOmNhc2UiIT09IjpjPTY7YnJlYWs7Y2FzZSI8IjpjYXNlIj4iOmNhc2UiPD0iOmNhc2UiPj0iOmNhc2UiaW5zdGFuY2VvZiI6Yz03O2JyZWFrO2Nhc2UiaW4iOmM9Yj83OjA7YnJlYWs7Y2FzZSI8PCI6Y2FzZSI+PiI6Y2FzZSI+Pj4iOmM9ODticmVhaztjYXNlIisiOmNhc2UiLSI6Yz05O2JyZWFrO2Nhc2UiKiI6Y2FzZSIvIjpjYXNlIiUiOmM9MTF9cmV0dXJuIGN9ZnVuY3Rpb24gTSgpe3ZhciBhLGIsYyxkLGUsZixnLGgsaTtpZihkPWViLmFsbG93SW4sZWIuYWxsb3dJbj0hMCxoPUsoKSxiPWRiLGM9TChiLGQpLDA9PT1jKXJldHVybiBoO2ZvcihiLnByZWM9YyxxKCksZj1LKCksZT1baCxiLGZdOyhjPUwoZGIsZCkpPjA7KXtmb3IoO2UubGVuZ3RoPjImJmM8PWVbZS5sZW5ndGgtMl0ucHJlYzspZj1lLnBvcCgpLGc9ZS5wb3AoKS52YWx1ZSxoPWUucG9wKCksYT1jYi5jcmVhdGVCaW5hcnlFeHByZXNzaW9uKGcsaCxmKSxlLnB1c2goYSk7Yj1xKCksYi5wcmVjPWMsZS5wdXNoKGIpLGE9SygpLGUucHVzaChhKX1mb3IoZWIuYWxsb3dJbj1kLGk9ZS5sZW5ndGgtMSxhPWVbaV07aT4xOylhPWNiLmNyZWF0ZUJpbmFyeUV4cHJlc3Npb24oZVtpLTFdLnZhbHVlLGVbaS0yXSxhKSxpLT0yO3JldHVybiBhfWZ1bmN0aW9uIE4oKXt2YXIgYSxiLGMsZDtyZXR1cm4gYT1NKCksdigiPyIpJiYocSgpLGI9ZWIuYWxsb3dJbixlYi5hbGxvd0luPSEwLGM9TygpLGViLmFsbG93SW49Yix1KCI6IiksZD1PKCksYT1jYi5jcmVhdGVDb25kaXRpb25hbEV4cHJlc3Npb24oYSxjLGQpKSxhfWZ1bmN0aW9uIE8oKXt2YXIgYSxiLGM7cmV0dXJuIGE9ZGIsYz1iPU4oKX1mdW5jdGlvbiBQKCl7dmFyIGE7cmV0dXJuIGE9TygpfWZ1bmN0aW9uIFEoKXtyZXR1cm4gdSgiOyIpLGNiLmNyZWF0ZUVtcHR5U3RhdGVtZW50KCl9ZnVuY3Rpb24gUigpe3ZhciBhPVAoKTtyZXR1cm4geCgpLGNiLmNyZWF0ZUV4cHJlc3Npb25TdGF0ZW1lbnQoYSl9ZnVuY3Rpb24gUygpe3ZhciBhLGIsYyxkPWRiLnR5cGU7aWYoZD09PVguRU9GJiZ0KGRiKSxpKCksZD09PVguUHVuY3R1YXRvcilzd2l0Y2goZGIudmFsdWUpe2Nhc2UiOyI6cmV0dXJuIFEoKTtjYXNlIigiOnJldHVybiBSKCl9cmV0dXJuIGE9UCgpLGEudHlwZT09PVouSWRlbnRpZmllciYmdigiOiIpPyhxKCksYz0iJCIrYS5uYW1lLE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlYi5sYWJlbFNldCxjKSYmcyh7fSwkLlJlZGVjbGFyYXRpb24sIkxhYmVsIixhLm5hbWUpLGViLmxhYmVsU2V0W2NdPSEwLGI9UygpLGRlbGV0ZSBlYi5sYWJlbFNldFtjXSxjYi5jcmVhdGVMYWJlbGVkU3RhdGVtZW50KGEsYikpOih4KCksY2IuY3JlYXRlRXhwcmVzc2lvblN0YXRlbWVudChhKSl9ZnVuY3Rpb24gVCgpe3JldHVybiBkYi50eXBlPT09WC5LZXl3b3JkP1MoKTpkYi50eXBlIT09WC5FT0Y/UygpOnZvaWQgMH1mdW5jdGlvbiBVKCl7Zm9yKHZhciBhLGI9W107YmI+YWImJihhPVQoKSwidW5kZWZpbmVkIiE9dHlwZW9mIGEpOyliLnB1c2goYSk7cmV0dXJuIGJ9ZnVuY3Rpb24gVigpe3ZhciBhO3JldHVybiBpKCkscigpLGE9VSgpLGNiLmNyZWF0ZVByb2dyYW0oYSl9ZnVuY3Rpb24gVyhhLGIpe3ZhciBjO3JldHVybiBjPVN0cmluZywic3RyaW5nIj09dHlwZW9mIGF8fGEgaW5zdGFuY2VvZiBTdHJpbmd8fChhPWMoYSkpLGNiPWIsXz1hLGFiPTAsYmI9Xy5sZW5ndGgsZGI9bnVsbCxlYj17YWxsb3dJbjohMCxsYWJlbFNldDp7fX0sYmI+MCYmInVuZGVmaW5lZCI9PXR5cGVvZiBfWzBdJiZhIGluc3RhbmNlb2YgU3RyaW5nJiYoXz1hLnZhbHVlT2YoKSksVigpfXZhciBYLFksWiwkLF8sYWIsYmIsY2IsZGIsZWI7WD17Qm9vbGVhbkxpdGVyYWw6MSxFT0Y6MixJZGVudGlmaWVyOjMsS2V5d29yZDo0LE51bGxMaXRlcmFsOjUsTnVtZXJpY0xpdGVyYWw6NixQdW5jdHVhdG9yOjcsU3RyaW5nTGl0ZXJhbDo4fSxZPXt9LFlbWC5Cb29sZWFuTGl0ZXJhbF09IkJvb2xlYW4iLFlbWC5FT0ZdPSI8ZW5kPiIsWVtYLklkZW50aWZpZXJdPSJJZGVudGlmaWVyIixZW1guS2V5d29yZF09IktleXdvcmQiLFlbWC5OdWxsTGl0ZXJhbF09Ik51bGwiLFlbWC5OdW1lcmljTGl0ZXJhbF09Ik51bWVyaWMiLFlbWC5QdW5jdHVhdG9yXT0iUHVuY3R1YXRvciIsWVtYLlN0cmluZ0xpdGVyYWxdPSJTdHJpbmciLFo9e0FycmF5RXhwcmVzc2lvbjoiQXJyYXlFeHByZXNzaW9uIixCaW5hcnlFeHByZXNzaW9uOiJCaW5hcnlFeHByZXNzaW9uIixDYWxsRXhwcmVzc2lvbjoiQ2FsbEV4cHJlc3Npb24iLENvbmRpdGlvbmFsRXhwcmVzc2lvbjoiQ29uZGl0aW9uYWxFeHByZXNzaW9uIixFbXB0eVN0YXRlbWVudDoiRW1wdHlTdGF0ZW1lbnQiLEV4cHJlc3Npb25TdGF0ZW1lbnQ6IkV4cHJlc3Npb25TdGF0ZW1lbnQiLElkZW50aWZpZXI6IklkZW50aWZpZXIiLExpdGVyYWw6IkxpdGVyYWwiLExhYmVsZWRTdGF0ZW1lbnQ6IkxhYmVsZWRTdGF0ZW1lbnQiLExvZ2ljYWxFeHByZXNzaW9uOiJMb2dpY2FsRXhwcmVzc2lvbiIsTWVtYmVyRXhwcmVzc2lvbjoiTWVtYmVyRXhwcmVzc2lvbiIsT2JqZWN0RXhwcmVzc2lvbjoiT2JqZWN0RXhwcmVzc2lvbiIsUHJvZ3JhbToiUHJvZ3JhbSIsUHJvcGVydHk6IlByb3BlcnR5IixUaGlzRXhwcmVzc2lvbjoiVGhpc0V4cHJlc3Npb24iLFVuYXJ5RXhwcmVzc2lvbjoiVW5hcnlFeHByZXNzaW9uIn0sJD17VW5leHBlY3RlZFRva2VuOiJVbmV4cGVjdGVkIHRva2VuICUwIixVbmtub3duTGFiZWw6IlVuZGVmaW5lZCBsYWJlbCAnJTAnIixSZWRlY2xhcmF0aW9uOiIlMCAnJTEnIGhhcyBhbHJlYWR5IGJlZW4gZGVjbGFyZWQifSxhLmVzcHJpbWE9e3BhcnNlOld9fSh0aGlzKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhLGIsZCxlKXtpZihlLm5vZGVUeXBlPT09Tm9kZS5FTEVNRU5UX05PREUmJiJURU1QTEFURSI9PT1lLnRhZ05hbWUmJigiYmluZCI9PT1kfHwicmVwZWF0Ij09PWQpKXt2YXIgZixnLGg9Yi5tYXRjaChyKTtpZihoPyhmPWhbMV0sZz1oWzJdKTooaD1iLm1hdGNoKHMpLGgmJihmPWhbMl0sZz1oWzFdKSksaCl7dmFyIGk7aWYoZz1nLnRyaW0oKSxnLm1hdGNoKHEpKWk9bmV3IENvbXBvdW5kQmluZGluZyhmdW5jdGlvbihhKXtyZXR1cm4gYS5wYXRofSksaS5iaW5kKCJwYXRoIixhLGcpO2Vsc2UgdHJ5e2k9YyhhLGcpfWNhdGNoKGope2NvbnNvbGUuZXJyb3IoIkludmFsaWQgZXhwcmVzc2lvbiBzeW50YXg6ICIrZyxqKX1pZihpKXJldHVybiB0LnNldChlLGYpLGl9fX1mdW5jdGlvbiBjKGEsYil7dHJ5e3ZhciBjPW5ldyBmO2lmKGVzcHJpbWEucGFyc2UoYixjKSwhYy5zdGF0ZW1lbnRzLmxlbmd0aCYmIWMubGFiZWxlZFN0YXRlbWVudHMubGVuZ3RoKXJldHVybjtpZighYy5sYWJlbGVkU3RhdGVtZW50cy5sZW5ndGgmJmMuc3RhdGVtZW50cy5sZW5ndGg+MSl0aHJvdyBFcnJvcigiTXVsdGlwbGUgdW5sYWJlbGxlZCBzdGF0ZW1lbnRzIGFyZSBub3QgYWxsb3dlZC4iKTt2YXIgZT1jLmxhYmVsZWRTdGF0ZW1lbnRzLmxlbmd0aD9kKGMubGFiZWxlZFN0YXRlbWVudHMpOmU9Yy5zdGF0ZW1lbnRzWzBdLGc9W107Zm9yKHZhciBoIGluIGMuZGVwcylnLnB1c2goaCk7aWYoIWcubGVuZ3RoKXJldHVybnt2YWx1ZTplKHt9KX07Zm9yKHZhciBpPW5ldyBDb21wb3VuZEJpbmRpbmcoZSksaj0wO2o8Zy5sZW5ndGg7aisrKWkuYmluZChnW2pdLGEsZ1tqXSk7cmV0dXJuIGl9Y2F0Y2goayl7Y29uc29sZS5lcnJvcigiSW52YWxpZCBleHByZXNzaW9uIHN5bnRheDogIitiLGspfX1mdW5jdGlvbiBkKGEpe3JldHVybiBmdW5jdGlvbihiKXtmb3IodmFyIGM9W10sZD0wO2Q8YS5sZW5ndGg7ZCsrKWFbZF0uYm9keShiKSYmYy5wdXNoKGFbZF0ubGFiZWwpO3JldHVybiBjLmpvaW4oIiAiKX19ZnVuY3Rpb24gZShhLGIsYyl7dGhpcy5kZXBzPWEsdGhpcy5uYW1lPWIsdGhpcy5sYXN0PWN9ZnVuY3Rpb24gZigpe3RoaXMuc3RhdGVtZW50cz1bXSx0aGlzLmxhYmVsZWRTdGF0ZW1lbnRzPVtdLHRoaXMuZGVwcz17fSx0aGlzLmN1cnJlbnRQYXRoPXZvaWQgMH1mdW5jdGlvbiBnKCl7dGhyb3cgRXJyb3IoIk5vdCBJbXBsZW1lbnRlZCIpfWZ1bmN0aW9uIGgoKXt9dmFyIGk7InVuZGVmaW5lZCIhPXR5cGVvZiBXZWFrTWFwJiZuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoIkZpcmVmb3gvIik8MD9pPVdlYWtNYXA6ZnVuY3Rpb24oKXt2YXIgYT1PYmplY3QuZGVmaW5lUHJvcGVydHksYj1PYmplY3QuaGFzT3duUHJvcGVydHksYz0obmV3IERhdGUpLmdldFRpbWUoKSUxZTk7aT1mdW5jdGlvbigpe3RoaXMubmFtZT0iX19zdCIrKDFlOSpNYXRoLnJhbmRvbSgpPj4+MCkrKGMrKyArIl9fIil9LGkucHJvdG90eXBlPXtzZXQ6ZnVuY3Rpb24oYixjKXthKGIsdGhpcy5uYW1lLHt2YWx1ZTpjLHdyaXRhYmxlOiEwfSl9LGdldDpmdW5jdGlvbihhKXtyZXR1cm4gYi5jYWxsKGEsdGhpcy5uYW1lKT9hW3RoaXMubmFtZV06dm9pZCAwfSwiZGVsZXRlIjpmdW5jdGlvbihhKXt0aGlzLnNldChhLHZvaWQgMCl9fX0oKTt2YXIgaj0iWyRfYS16QS1aXSIsaz0iWyRfYS16QS1aMC05XSIsbD1qKyIrIitrKyIqIixtPSIoIitsKyIpIixuPSIoPzpbMC05XXxbMS05XStbMC05XSspIixvPSIoPzoiK2wrInwiK24rIikiLHA9Iig/OiIrbysiKSg/OlxcLiIrbysiKSoiLHE9bmV3IFJlZ0V4cCgiXiIrcCsiJCIpLHI9bmV3IFJlZ0V4cCgiXiIrbSsiXFxzKiBpbiAoLiopJCIpLHM9bmV3IFJlZ0V4cCgiXiguKikgYXMgXFxzKiIrbSsiJCIpLHQ9bmV3IGk7ZS5wcm90b3R5cGU9e2dldFBhdGg6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sYXN0P3RoaXMubGFzdC5nZXRQYXRoKCkrIi4iK3RoaXMubmFtZTp0aGlzLm5hbWV9LHZhbHVlRm46ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmdldFBhdGgoKTtyZXR1cm4gdGhpcy5kZXBzW2FdPSEwLGZ1bmN0aW9uKGIpe3JldHVybiBiW2FdfX19O3ZhciB1PXsiKyI6ZnVuY3Rpb24oYSl7cmV0dXJuK2F9LCItIjpmdW5jdGlvbihhKXtyZXR1cm4tYX0sIiEiOmZ1bmN0aW9uKGEpe3JldHVybiFhfX0sdj17IisiOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGErYn0sIi0iOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGEtYn0sIioiOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGEqYn0sIi8iOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGEvYn0sIiUiOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGElYn0sIjwiOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGI+YX0sIj4iOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGE+Yn0sIjw9IjpmdW5jdGlvbihhLGIpe3JldHVybiBiPj1hfSwiPj0iOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGE+PWJ9LCI9PSI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT09Yn0sIiE9IjpmdW5jdGlvbihhLGIpe3JldHVybiBhIT1ifSwiPT09IjpmdW5jdGlvbihhLGIpe3JldHVybiBhPT09Yn0sIiE9PSI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYSE9PWJ9LCImJiI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYSYmYn0sInx8IjpmdW5jdGlvbihhLGIpe3JldHVybiBhfHxifX07Zi5wcm90b3R5cGU9e2dldEZuOmZ1bmN0aW9uKGEpe3JldHVybiBhIGluc3RhbmNlb2YgZT9hLnZhbHVlRm4oKTphfSxjcmVhdGVQcm9ncmFtOmZ1bmN0aW9uKCl7fSxjcmVhdGVFeHByZXNzaW9uU3RhdGVtZW50OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnN0YXRlbWVudHMucHVzaChhKSxhfSxjcmVhdGVMYWJlbGVkU3RhdGVtZW50OmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMubGFiZWxlZFN0YXRlbWVudHMucHVzaCh7bGFiZWw6YS5nZXRQYXRoKCksYm9keTpiIGluc3RhbmNlb2YgZT9iLnZhbHVlRm4oKTpifSksYn0sY3JlYXRlVW5hcnlFeHByZXNzaW9uOmZ1bmN0aW9uKGEsYil7aWYoIXVbYV0pdGhyb3cgRXJyb3IoIkRpc2FsbG93ZWQgb3BlcmF0b3I6ICIrYSk7cmV0dXJuIGI9dGhpcy5nZXRGbihiKSxmdW5jdGlvbihjKXtyZXR1cm4gdVthXShiKGMpKX19LGNyZWF0ZUJpbmFyeUV4cHJlc3Npb246ZnVuY3Rpb24oYSxiLGMpe2lmKCF2W2FdKXRocm93IEVycm9yKCJEaXNhbGxvd2VkIG9wZXJhdG9yOiAiK2EpO3JldHVybiBiPXRoaXMuZ2V0Rm4oYiksYz10aGlzLmdldEZuKGMpLGZ1bmN0aW9uKGQpe3JldHVybiB2W2FdKGIoZCksYyhkKSl9fSxjcmVhdGVDb25kaXRpb25hbEV4cHJlc3Npb246ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBhPXRoaXMuZ2V0Rm4oYSksYj10aGlzLmdldEZuKGIpLGM9dGhpcy5nZXRGbihjKSxmdW5jdGlvbihkKXtyZXR1cm4gYShkKT9iKGQpOmMoZCl9fSxjcmVhdGVJZGVudGlmaWVyOmZ1bmN0aW9uKGEpe3ZhciBiPW5ldyBlKHRoaXMuZGVwcyxhKTtyZXR1cm4gYi50eXBlPSJJZGVudGlmaWVyIixifSxjcmVhdGVNZW1iZXJFeHByZXNzaW9uOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gbmV3IGUodGhpcy5kZXBzLGMubmFtZSxiKX0sY3JlYXRlTGl0ZXJhbDpmdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gYS52YWx1ZX19LGNyZWF0ZUFycmF5RXhwcmVzc2lvbjpmdW5jdGlvbihhKXtmb3IodmFyIGI9MDtiPGEubGVuZ3RoO2IrKylhW2JdPXRoaXMuZ2V0Rm4oYVtiXSk7cmV0dXJuIGZ1bmN0aW9uKGIpe2Zvcih2YXIgYz1bXSxkPTA7ZDxhLmxlbmd0aDtkKyspYy5wdXNoKGFbZF0oYikpO3JldHVybiBjfX0sY3JlYXRlUHJvcGVydHk6ZnVuY3Rpb24oYSxiLGMpe3JldHVybntrZXk6YiBpbnN0YW5jZW9mIGU/Yi5nZXRQYXRoKCk6YigpLHZhbHVlOmN9fSxjcmVhdGVPYmplY3RFeHByZXNzaW9uOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0wO2I8YS5sZW5ndGg7YisrKWFbYl0udmFsdWU9dGhpcy5nZXRGbihhW2JdLnZhbHVlKTtyZXR1cm4gZnVuY3Rpb24oYil7Zm9yKHZhciBjPXt9LGQ9MDtkPGEubGVuZ3RoO2QrKyljW2FbZF0ua2V5XT1hW2RdLnZhbHVlKGIpO3JldHVybiBjfX0sY3JlYXRlQ2FsbEV4cHJlc3Npb246ZyxjcmVhdGVFbXB0eVN0YXRlbWVudDpnLGNyZWF0ZVRoaXNFeHByZXNzaW9uOmd9LGgucHJvdG90eXBlPXtnZXRCaW5kaW5nOmZ1bmN0aW9uKGEsZCxlLGYpe3JldHVybiBkPWQudHJpbSgpLGQmJiFkLm1hdGNoKHEpP2IoYSxkLGUsZil8fGMoYSxkLGUsZik6dm9pZCAwfSxnZXRJbnN0YW5jZU1vZGVsOmZ1bmN0aW9uKGEsYil7dmFyIGM9dC5nZXQoYSk7aWYoIWMpcmV0dXJuIGI7dmFyIGQ9YS50ZW1wbGF0ZUluc3RhbmNlP2EudGVtcGxhdGVJbnN0YW5jZS5tb2RlbDphLm1vZGVsLGU9T2JqZWN0LmNyZWF0ZShkKTtyZXR1cm4gZVtjXT1iLGV9fSxhLkV4cHJlc3Npb25TeW50YXg9aH0odGhpcyksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYigpe2xvZ0ZsYWdzLmRhdGEmJmNvbnNvbGUuZ3JvdXAoIk1vZGVsLmRpcnR5Q2hlY2soKSIpLGMoKSxsb2dGbGFncy5kYXRhJiZjb25zb2xlLmdyb3VwRW5kKCl9ZnVuY3Rpb24gYygpe1BsYXRmb3JtLnBlcmZvcm1NaWNyb3Rhc2tDaGVja3BvaW50KCl9dmFyIGQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3R5bGUiKTtkLnRleHRDb250ZW50PSJ0ZW1wbGF0ZSB7ZGlzcGxheTogbm9uZSAhaW1wb3J0YW50O30gLyogaW5qZWN0ZWQgYnkgcGxhdGZvcm0uanMgKi8iO3ZhciBlPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoImhlYWQiKTtlLmluc2VydEJlZm9yZShkLGUuZmlyc3RDaGlsZCksSFRNTFRlbXBsYXRlRWxlbWVudC5fX2luc3RhbmNlQ3JlYXRlZD1mdW5jdGlvbihhKXtkb2N1bWVudC5hZG9wdE5vZGUoYSksQ3VzdG9tRWxlbWVudHMudXBncmFkZUFsbChhKX07dmFyIGY9MTI1O3dpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJXZWJDb21wb25lbnRzUmVhZHkiLGZ1bmN0aW9uKCl7YigpLE9ic2VydmVyLmhhc09iamVjdE9ic2VydmV8fHNldEludGVydmFsKGMsZil9KSxhLmZsdXNoPWIsd2luZG93LmRpcnR5Q2hlY2s9Yn0od2luZG93LlBsYXRmb3JtKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEpe3JldHVybiBkKGEsaSl9ZnVuY3Rpb24gYyhhKXtyZXR1cm4gZChhLGopfWZ1bmN0aW9uIGQoYSxiKXtyZXR1cm4ibGluayI9PT1hLmxvY2FsTmFtZSYmYS5nZXRBdHRyaWJ1dGUoInJlbCIpPT09Yn1mdW5jdGlvbiBlKGEpe3JldHVybiJzY3JpcHQiPT09YS5sb2NhbE5hbWV9ZnVuY3Rpb24gZihhLGIpe3ZhciBjPWE7YyBpbnN0YW5jZW9mIERvY3VtZW50fHwoYz1kb2N1bWVudC5pbXBsZW1lbnRhdGlvbi5jcmVhdGVIVE1MRG9jdW1lbnQoaSksYy5ib2R5LmlubmVySFRNTD1hKSxjLl9VUkw9Yjt2YXIgZD1jLmNyZWF0ZUVsZW1lbnQoImJhc2UiKTtyZXR1cm4gZC5zZXRBdHRyaWJ1dGUoImhyZWYiLGRvY3VtZW50LmJhc2VVUkkpLGMuaGVhZC5hcHBlbmRDaGlsZChkKSx3aW5kb3cuSFRNTFRlbXBsYXRlRWxlbWVudCYmSFRNTFRlbXBsYXRlRWxlbWVudC5ib290c3RyYXAmJkhUTUxUZW1wbGF0ZUVsZW1lbnQuYm9vdHN0cmFwKGMpLGN9YXx8KGE9d2luZG93LkhUTUxJbXBvcnRzPXtmbGFnczp7fX0pO3ZhciBnLGg9YS54aHIsaT0iaW1wb3J0IixqPSJzdHlsZXNoZWV0IixrPXtkb2N1bWVudHM6e30sY2FjaGU6e30scHJlbG9hZFNlbGVjdG9yczpbImxpbmtbcmVsPSIraSsiXSIsImVsZW1lbnQgbGlua1tyZWw9IitqKyJdIiwidGVtcGxhdGUiLCJzY3JpcHRbc3JjXTpub3QoW3R5cGVdKSIsJ3NjcmlwdFtzcmNdW3R5cGU9InRleHQvamF2YXNjcmlwdCJdJ10uam9pbigiLCIpLGxvYWRlcjpmdW5jdGlvbihhKXtyZXR1cm4gZz1uZXcgbChrLmxvYWRlZCxhKSxnLmNhY2hlPWsuY2FjaGUsZ30sbG9hZDpmdW5jdGlvbihhLGIpe2c9ay5sb2FkZXIoYiksay5wcmVsb2FkKGEpfSxwcmVsb2FkOmZ1bmN0aW9uKGEpe3ZhciBiPWEucXVlcnlTZWxlY3RvckFsbChrLnByZWxvYWRTZWxlY3RvcnMpO2I9dGhpcy5maWx0ZXJNYWluRG9jdW1lbnROb2RlcyhhLGIpLGI9dGhpcy5leHRyYWN0VGVtcGxhdGVOb2RlcyhiKSxnLmFkZE5vZGVzKGIpfSxmaWx0ZXJNYWluRG9jdW1lbnROb2RlczpmdW5jdGlvbihhLGIpe3JldHVybiBhPT09ZG9jdW1lbnQmJihiPUFycmF5LnByb3RvdHlwZS5maWx0ZXIuY2FsbChiLGZ1bmN0aW9uKGEpe3JldHVybiFlKGEpfSkpLGJ9LGV4dHJhY3RUZW1wbGF0ZU5vZGVzOmZ1bmN0aW9uKGEpe3ZhciBiPVtdO3JldHVybiBhPUFycmF5LnByb3RvdHlwZS5maWx0ZXIuY2FsbChhLGZ1bmN0aW9uKGEpe2lmKCJ0ZW1wbGF0ZSI9PT1hLmxvY2FsTmFtZSl7aWYoYS5jb250ZW50KXt2YXIgYz1hLmNvbnRlbnQucXVlcnlTZWxlY3RvckFsbCgibGlua1tyZWw9IitqKyJdIik7Yy5sZW5ndGgmJihiPWIuY29uY2F0KEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGMsMCkpKX1yZXR1cm4hMX1yZXR1cm4hMH0pLGIubGVuZ3RoJiYoYT1hLmNvbmNhdChiKSksYX0sbG9hZGVkOmZ1bmN0aW9uKGEsZCxlKXtpZihiKGQpKXt2YXIgZz1rLmRvY3VtZW50c1thXTtnfHwoZz1mKGUsYSkscC5yZXNvbHZlUGF0aHNJbkhUTUwoZyksay5kb2N1bWVudHNbYV09ZyxrLnByZWxvYWQoZykpLGQuaW1wb3J0PXtocmVmOmEsb3duZXJOb2RlOmQsY29udGVudDpnfSxkLmNvbnRlbnQ9ZT1nfWQuX19yZXNvdXJjZT1lLGMoZCkmJnAucmVzb2x2ZVBhdGhzSW5TdHlsZXNoZWV0KGQpfX0sbD1mdW5jdGlvbihhLGIpe3RoaXMub25sb2FkPWEsdGhpcy5vbmNvbXBsZXRlPWIsdGhpcy5pbmZsaWdodD0wLHRoaXMucGVuZGluZz17fSx0aGlzLmNhY2hlPXt9fTtsLnByb3RvdHlwZT17YWRkTm9kZXM6ZnVuY3Rpb24oYSl7dGhpcy5pbmZsaWdodCs9YS5sZW5ndGgscShhLHRoaXMucmVxdWlyZSx0aGlzKSx0aGlzLmNoZWNrRG9uZSgpfSxyZXF1aXJlOmZ1bmN0aW9uKGEpe3ZhciBiPXAubm9kZVVybChhKTthLl9fbm9kZVVybD1iLHRoaXMuZGVkdXBlKGIsYSl8fHRoaXMuZmV0Y2goYixhKX0sZGVkdXBlOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMucGVuZGluZ1thXT8odGhpcy5wZW5kaW5nW2FdLnB1c2goYiksITApOnRoaXMuY2FjaGVbYV0/KHRoaXMub25sb2FkKGEsYixnLmNhY2hlW2FdKSx0aGlzLnRhaWwoKSwhMCk6KHRoaXMucGVuZGluZ1thXT1bYl0sITEpfSxmZXRjaDpmdW5jdGlvbihhLGIpe3ZhciBjPWZ1bmN0aW9uKGMsZCl7dGhpcy5yZWNlaXZlKGEsYixjLGQpfS5iaW5kKHRoaXMpO2gubG9hZChhLGMpfSxyZWNlaXZlOmZ1bmN0aW9uKGEsYixjLGQpe2N8fChnLmNhY2hlW2FdPWQpLGcucGVuZGluZ1thXS5mb3JFYWNoKGZ1bmN0aW9uKGIpe2N8fHRoaXMub25sb2FkKGEsYixkKSx0aGlzLnRhaWwoKX0sdGhpcyksZy5wZW5kaW5nW2FdPW51bGx9LHRhaWw6ZnVuY3Rpb24oKXstLXRoaXMuaW5mbGlnaHQsdGhpcy5jaGVja0RvbmUoKX0sY2hlY2tEb25lOmZ1bmN0aW9uKCl7dGhpcy5pbmZsaWdodHx8dGhpcy5vbmNvbXBsZXRlKCl9fTt2YXIgbT1bImhyZWYiLCJzcmMiLCJhY3Rpb24iXSxuPSJbIittLmpvaW4oIl0sWyIpKyJdIixvPSJ7ey4qfX0iLHA9e25vZGVVcmw6ZnVuY3Rpb24oYSl7cmV0dXJuIHAucmVzb2x2ZVVybChwLmdldERvY3VtZW50VXJsKGRvY3VtZW50KSxwLmhyZWZPclNyYyhhKSl9LGhyZWZPclNyYzpmdW5jdGlvbihhKXtyZXR1cm4gYS5nZXRBdHRyaWJ1dGUoImhyZWYiKXx8YS5nZXRBdHRyaWJ1dGUoInNyYyIpfSxkb2N1bWVudFVybEZyb21Ob2RlOmZ1bmN0aW9uKGEpe3JldHVybiBwLmdldERvY3VtZW50VXJsKGEub3duZXJEb2N1bWVudHx8YSl9LGdldERvY3VtZW50VXJsOmZ1bmN0aW9uKGEpe3ZhciBiPWEmJihhLl9VUkx8fGEuaW1wbCYmYS5pbXBsLl9VUkx8fGEuYmFzZVVSSXx8YS5VUkwpfHwiIjtyZXR1cm4gYi5zcGxpdCgiIyIpWzBdfSxyZXNvbHZlVXJsOmZ1bmN0aW9uKGEsYixjKXtpZih0aGlzLmlzQWJzVXJsKGIpKXJldHVybiBiO3ZhciBkPXRoaXMuY29tcHJlc3NVcmwodGhpcy51cmxUb1BhdGgoYSkrYik7cmV0dXJuIGMmJihkPXAubWFrZVJlbFBhdGgocC5nZXREb2N1bWVudFVybChkb2N1bWVudCksZCkpLGR9LGlzQWJzVXJsOmZ1bmN0aW9uKGEpe3JldHVybi8oXmRhdGE6KXwoXmh0dHBbc10/Oil8KF5cLykvLnRlc3QoYSl9LHVybFRvUGF0aDpmdW5jdGlvbihhKXt2YXIgYj1hLnNwbGl0KCIvIik7cmV0dXJuIGIucG9wKCksYi5wdXNoKCIiKSxiLmpvaW4oIi8iKX0sY29tcHJlc3NVcmw6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiLGM9YS5zcGxpdCgiLyIpLGQ9MDtkPGMubGVuZ3RoO2QrKyliPWNbZF0sIi4uIj09PWImJihjLnNwbGljZShkLTEsMiksZC09Mik7cmV0dXJuIGMuam9pbigiLyIpfSxtYWtlUmVsUGF0aDpmdW5jdGlvbihhLGIpe3ZhciBjLGQ7Zm9yKGM9dGhpcy5jb21wcmVzc1VybChhKS5zcGxpdCgiLyIpLGQ9dGhpcy5jb21wcmVzc1VybChiKS5zcGxpdCgiLyIpO2MubGVuZ3RoJiZjWzBdPT09ZFswXTspYy5zaGlmdCgpLGQuc2hpZnQoKTtmb3IodmFyIGU9MCxmPWMubGVuZ3RoLTE7Zj5lO2UrKylkLnVuc2hpZnQoIi4uIik7dmFyIGc9ZC5qb2luKCIvIik7cmV0dXJuIGd9LHJlc29sdmVQYXRoc0luSFRNTDpmdW5jdGlvbihhLGIpe2I9Ynx8cC5kb2N1bWVudFVybEZyb21Ob2RlKGEpLHAucmVzb2x2ZUF0dHJpYnV0ZXMoYSxiKSxwLnJlc29sdmVTdHlsZUVsdHMoYSxiKTt2YXIgYz1hLnF1ZXJ5U2VsZWN0b3JBbGwoInRlbXBsYXRlIik7YyYmcShjLGZ1bmN0aW9uKGEpe2EuY29udGVudCYmcC5yZXNvbHZlUGF0aHNJbkhUTUwoYS5jb250ZW50LGIpfSl9LHJlc29sdmVQYXRoc0luU3R5bGVzaGVldDpmdW5jdGlvbihhKXt2YXIgYj1wLm5vZGVVcmwoYSk7YS5fX3Jlc291cmNlPXAucmVzb2x2ZUNzc1RleHQoYS5fX3Jlc291cmNlLGIpfSxyZXNvbHZlU3R5bGVFbHRzOmZ1bmN0aW9uKGEsYil7dmFyIGM9YS5xdWVyeVNlbGVjdG9yQWxsKCJzdHlsZSIpO2MmJnEoYyxmdW5jdGlvbihhKXthLnRleHRDb250ZW50PXAucmVzb2x2ZUNzc1RleHQoYS50ZXh0Q29udGVudCxiKX0pfSxyZXNvbHZlQ3NzVGV4dDpmdW5jdGlvbihhLGIpe3JldHVybiBhLnJlcGxhY2UoL3VybFwoW14pXSpcKS9nLGZ1bmN0aW9uKGEpe3ZhciBjPWEucmVwbGFjZSgvWyInXS9nLCIiKS5zbGljZSg0LC0xKTtyZXR1cm4gYz1wLnJlc29sdmVVcmwoYixjLCEwKSwidXJsKCIrYysiKSJ9KX0scmVzb2x2ZUF0dHJpYnV0ZXM6ZnVuY3Rpb24oYSxiKXt2YXIgYz1hJiZhLnF1ZXJ5U2VsZWN0b3JBbGwobik7YyYmcShjLGZ1bmN0aW9uKGEpe3RoaXMucmVzb2x2ZU5vZGVBdHRyaWJ1dGVzKGEsYil9LHRoaXMpfSxyZXNvbHZlTm9kZUF0dHJpYnV0ZXM6ZnVuY3Rpb24oYSxiKXttLmZvckVhY2goZnVuY3Rpb24oYyl7dmFyIGQ9YS5hdHRyaWJ1dGVzW2NdO2lmKGQmJmQudmFsdWUmJmQudmFsdWUuc2VhcmNoKG8pPDApe3ZhciBlPXAucmVzb2x2ZVVybChiLGQudmFsdWUsITApO2QudmFsdWU9ZX19KX19O2g9aHx8e2FzeW5jOiEwLG9rOmZ1bmN0aW9uKGEpe3JldHVybiBhLnN0YXR1cz49MjAwJiZhLnN0YXR1czwzMDB8fDMwND09PWEuc3RhdHVzfHwwPT09YS5zdGF0dXN9LGxvYWQ6ZnVuY3Rpb24oYixjLGQpe3ZhciBlPW5ldyBYTUxIdHRwUmVxdWVzdDtyZXR1cm4oYS5mbGFncy5kZWJ1Z3x8YS5mbGFncy5idXN0KSYmKGIrPSI/IitNYXRoLnJhbmRvbSgpKSxlLm9wZW4oIkdFVCIsYixoLmFzeW5jKSxlLmFkZEV2ZW50TGlzdGVuZXIoInJlYWR5c3RhdGVjaGFuZ2UiLGZ1bmN0aW9uKCl7ND09PWUucmVhZHlTdGF0ZSYmYy5jYWxsKGQsIWgub2soZSkmJmUsZS5yZXNwb25zZSxiKX0pLGUuc2VuZCgpLGV9LGxvYWREb2N1bWVudDpmdW5jdGlvbihhLGIsYyl7dGhpcy5sb2FkKGEsYixjKS5yZXNwb25zZVR5cGU9ImRvY3VtZW50In19O3ZhciBxPUFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwuYmluZChBcnJheS5wcm90b3R5cGUuZm9yRWFjaCk7YS5wYXRoPXAsYS54aHI9aCxhLmltcG9ydGVyPWssYS5nZXREb2N1bWVudFVybD1wLmdldERvY3VtZW50VXJsLGEuSU1QT1JUX0xJTktfVFlQRT1pfSh3aW5kb3cuSFRNTEltcG9ydHMpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7cmV0dXJuImxpbmsiPT09YS5sb2NhbE5hbWUmJmEuZ2V0QXR0cmlidXRlKCJyZWwiKT09PWZ9ZnVuY3Rpb24gYyhhKXtyZXR1cm4gYS5wYXJlbnROb2RlJiYhZChhKSYmIWUoYSl9ZnVuY3Rpb24gZChhKXtyZXR1cm4gYS5vd25lckRvY3VtZW50PT09ZG9jdW1lbnR8fGEub3duZXJEb2N1bWVudC5pbXBsPT09ZG9jdW1lbnR9ZnVuY3Rpb24gZShhKXtyZXR1cm4gYS5wYXJlbnROb2RlJiYiZWxlbWVudCI9PT1hLnBhcmVudE5vZGUubG9jYWxOYW1lfXZhciBmPSJpbXBvcnQiLGc9e3NlbGVjdG9yczpbImxpbmtbcmVsPSIrZisiXSIsImxpbmtbcmVsPXN0eWxlc2hlZXRdIiwic3R5bGUiLCJzY3JpcHQ6bm90KFt0eXBlXSkiLCdzY3JpcHRbdHlwZT0idGV4dC9qYXZhc2NyaXB0Il0nXSxtYXA6e2xpbms6InBhcnNlTGluayIsc2NyaXB0OiJwYXJzZVNjcmlwdCIsc3R5bGU6InBhcnNlR2VuZXJpYyJ9LHBhcnNlOmZ1bmN0aW9uKGEpe2lmKCFhLl9faW1wb3J0UGFyc2VkKXthLl9faW1wb3J0UGFyc2VkPSEwO3ZhciBiPWEucXVlcnlTZWxlY3RvckFsbChnLnNlbGVjdG9ycyk7aChiLGZ1bmN0aW9uKGEpe2dbZy5tYXBbYS5sb2NhbE5hbWVdXShhKX0pfX0scGFyc2VMaW5rOmZ1bmN0aW9uKGEpe2IoYSk/YS5jb250ZW50JiZnLnBhcnNlKGEuY29udGVudCk6dGhpcy5wYXJzZUdlbmVyaWMoYSl9LHBhcnNlR2VuZXJpYzpmdW5jdGlvbihhKXtjKGEpJiZkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKGEpfSxwYXJzZVNjcmlwdDpmdW5jdGlvbihiKXtpZihjKGIpKXt2YXIgZD0oYi5fX3Jlc291cmNlfHxiLnRleHRDb250ZW50KS50cmltKCk7aWYoZCl7dmFyIGU9Yi5fX25vZGVVcmw7aWYoIWUpe3ZhciBlPWEucGF0aC5kb2N1bWVudFVybEZyb21Ob2RlKGIpLGY9IlsiK01hdGguZmxvb3IoMWUzKihNYXRoLnJhbmRvbSgpKzEpKSsiXSIsZz1kLm1hdGNoKC9Qb2x5bWVyXChbJyJdKFteJyJdKikvKTtmPWcmJmdbMV18fGYsZSs9Ii8iK2YrIi5qcyJ9ZCs9IlxuLy8jIHNvdXJjZVVSTD0iK2UrIlxuIixldmFsLmNhbGwod2luZG93LGQpfX19fSxoPUFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwuYmluZChBcnJheS5wcm90b3R5cGUuZm9yRWFjaCk7YS5wYXJzZXI9Z30oSFRNTEltcG9ydHMpLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gYSgpe0hUTUxJbXBvcnRzLmltcG9ydGVyLmxvYWQoZG9jdW1lbnQsZnVuY3Rpb24oKXtIVE1MSW1wb3J0cy5wYXJzZXIucGFyc2UoZG9jdW1lbnQpLEhUTUxJbXBvcnRzLnJlYWR5VGltZT0obmV3IERhdGUpLmdldFRpbWUoKSxkb2N1bWVudC5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgiSFRNTEltcG9ydHNMb2FkZWQiLHtidWJibGVzOiEwfSkpfSl9ImZ1bmN0aW9uIiE9dHlwZW9mIHdpbmRvdy5DdXN0b21FdmVudCYmKHdpbmRvdy5DdXN0b21FdmVudD1mdW5jdGlvbihhKXt2YXIgYj1kb2N1bWVudC5jcmVhdGVFdmVudCgiSFRNTEV2ZW50cyIpO3JldHVybiBiLmluaXRFdmVudChhLCEwLCEwKSxifSksImNvbXBsZXRlIj09PWRvY3VtZW50LnJlYWR5U3RhdGU/YSgpOndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJET01Db250ZW50TG9hZGVkIixhKX0oKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEpe3UucHVzaChhKSx0fHwodD0hMCxxKGQpKX1mdW5jdGlvbiBjKGEpe3JldHVybiB3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwmJndpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbC53cmFwSWZOZWVkZWQoYSl8fGF9ZnVuY3Rpb24gZCgpe3Q9ITE7dmFyIGE9dTt1PVtdLGEuc29ydChmdW5jdGlvbihhLGIpe3JldHVybiBhLnVpZF8tYi51aWRffSk7dmFyIGI9ITE7YS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3ZhciBjPWEudGFrZVJlY29yZHMoKTtlKGEpLGMubGVuZ3RoJiYoYS5jYWxsYmFja18oYyxhKSxiPSEwKX0pLGImJmQoKX1mdW5jdGlvbiBlKGEpe2Eubm9kZXNfLmZvckVhY2goZnVuY3Rpb24oYil7dmFyIGM9cC5nZXQoYik7YyYmYy5mb3JFYWNoKGZ1bmN0aW9uKGIpe2Iub2JzZXJ2ZXI9PT1hJiZiLnJlbW92ZVRyYW5zaWVudE9ic2VydmVycygpfSl9KX1mdW5jdGlvbiBmKGEsYil7Zm9yKHZhciBjPWE7YztjPWMucGFyZW50Tm9kZSl7dmFyIGQ9cC5nZXQoYyk7aWYoZClmb3IodmFyIGU9MDtlPGQubGVuZ3RoO2UrKyl7dmFyIGY9ZFtlXSxnPWYub3B0aW9ucztpZihjPT09YXx8Zy5zdWJ0cmVlKXt2YXIgaD1iKGcpO2gmJmYuZW5xdWV1ZShoKX19fX1mdW5jdGlvbiBnKGEpe3RoaXMuY2FsbGJhY2tfPWEsdGhpcy5ub2Rlc189W10sdGhpcy5yZWNvcmRzXz1bXSx0aGlzLnVpZF89Kyt2fWZ1bmN0aW9uIGgoYSxiKXt0aGlzLnR5cGU9YSx0aGlzLnRhcmdldD1iLHRoaXMuYWRkZWROb2Rlcz1bXSx0aGlzLnJlbW92ZWROb2Rlcz1bXSx0aGlzLnByZXZpb3VzU2libGluZz1udWxsLHRoaXMubmV4dFNpYmxpbmc9bnVsbCx0aGlzLmF0dHJpYnV0ZU5hbWU9bnVsbCx0aGlzLmF0dHJpYnV0ZU5hbWVzcGFjZT1udWxsLHRoaXMub2xkVmFsdWU9bnVsbH1mdW5jdGlvbiBpKGEpe3ZhciBiPW5ldyBoKGEudHlwZSxhLnRhcmdldCk7cmV0dXJuIGIuYWRkZWROb2Rlcz1hLmFkZGVkTm9kZXMuc2xpY2UoKSxiLnJlbW92ZWROb2Rlcz1hLnJlbW92ZWROb2Rlcy5zbGljZSgpLGIucHJldmlvdXNTaWJsaW5nPWEucHJldmlvdXNTaWJsaW5nLGIubmV4dFNpYmxpbmc9YS5uZXh0U2libGluZyxiLmF0dHJpYnV0ZU5hbWU9YS5hdHRyaWJ1dGVOYW1lLGIuYXR0cmlidXRlTmFtZXNwYWNlPWEuYXR0cmlidXRlTmFtZXNwYWNlLGIub2xkVmFsdWU9YS5vbGRWYWx1ZSxifWZ1bmN0aW9uIGooYSxiKXtyZXR1cm4gdz1uZXcgaChhLGIpfWZ1bmN0aW9uIGsoYSl7cmV0dXJuIHg/eDooeD1pKHcpLHgub2xkVmFsdWU9YSx4KX1mdW5jdGlvbiBsKCl7dz14PXZvaWQgMH1mdW5jdGlvbiBtKGEpe3JldHVybiBhPT09eHx8YT09PXd9ZnVuY3Rpb24gbihhLGIpe3JldHVybiBhPT09Yj9hOngmJm0oYSk/eDpudWxsfWZ1bmN0aW9uIG8oYSxiLGMpe3RoaXMub2JzZXJ2ZXI9YSx0aGlzLnRhcmdldD1iLHRoaXMub3B0aW9ucz1jLHRoaXMudHJhbnNpZW50T2JzZXJ2ZWROb2Rlcz1bXX12YXIgcD1uZXcgU2lkZVRhYmxlLHE9d2luZG93Lm1zU2V0SW1tZWRpYXRlO2lmKCFxKXt2YXIgcj1bXSxzPVN0cmluZyhNYXRoLnJhbmRvbSgpKTt3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsZnVuY3Rpb24oYSl7aWYoYS5kYXRhPT09cyl7dmFyIGI9cjtyPVtdLGIuZm9yRWFjaChmdW5jdGlvbihhKXthKCl9KX19KSxxPWZ1bmN0aW9uKGEpe3IucHVzaChhKSx3aW5kb3cucG9zdE1lc3NhZ2UocywiKiIpfX12YXIgdD0hMSx1PVtdLHY9MDtnLnByb3RvdHlwZT17b2JzZXJ2ZTpmdW5jdGlvbihhLGIpe2lmKGE9YyhhKSwhYi5jaGlsZExpc3QmJiFiLmF0dHJpYnV0ZXMmJiFiLmNoYXJhY3RlckRhdGF8fGIuYXR0cmlidXRlT2xkVmFsdWUmJiFiLmF0dHJpYnV0ZXN8fGIuYXR0cmlidXRlRmlsdGVyJiZiLmF0dHJpYnV0ZUZpbHRlci5sZW5ndGgmJiFiLmF0dHJpYnV0ZXN8fGIuY2hhcmFjdGVyRGF0YU9sZFZhbHVlJiYhYi5jaGFyYWN0ZXJEYXRhKXRocm93IG5ldyBTeW50YXhFcnJvcjt2YXIgZD1wLmdldChhKTtkfHxwLnNldChhLGQ9W10pO2Zvcih2YXIgZSxmPTA7ZjxkLmxlbmd0aDtmKyspaWYoZFtmXS5vYnNlcnZlcj09PXRoaXMpe2U9ZFtmXSxlLnJlbW92ZUxpc3RlbmVycygpLGUub3B0aW9ucz1iO2JyZWFrfWV8fChlPW5ldyBvKHRoaXMsYSxiKSxkLnB1c2goZSksdGhpcy5ub2Rlc18ucHVzaChhKSksZS5hZGRMaXN0ZW5lcnMoKX0sZGlzY29ubmVjdDpmdW5jdGlvbigpe3RoaXMubm9kZXNfLmZvckVhY2goZnVuY3Rpb24oYSl7Zm9yKHZhciBiPXAuZ2V0KGEpLGM9MDtjPGIubGVuZ3RoO2MrKyl7dmFyIGQ9YltjXTtpZihkLm9ic2VydmVyPT09dGhpcyl7ZC5yZW1vdmVMaXN0ZW5lcnMoKSxiLnNwbGljZShjLDEpO2JyZWFrfX19LHRoaXMpLHRoaXMucmVjb3Jkc189W119LHRha2VSZWNvcmRzOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5yZWNvcmRzXztyZXR1cm4gdGhpcy5yZWNvcmRzXz1bXSxhfX07dmFyIHcseDtvLnByb3RvdHlwZT17ZW5xdWV1ZTpmdW5jdGlvbihhKXt2YXIgYz10aGlzLm9ic2VydmVyLnJlY29yZHNfLGQ9Yy5sZW5ndGg7aWYoYy5sZW5ndGg+MCl7dmFyIGU9Y1tkLTFdLGY9bihlLGEpO2lmKGYpcmV0dXJuIGNbZC0xXT1mLHZvaWQgMH1lbHNlIGIodGhpcy5vYnNlcnZlcik7Y1tkXT1hfSxhZGRMaXN0ZW5lcnM6ZnVuY3Rpb24oKXt0aGlzLmFkZExpc3RlbmVyc18odGhpcy50YXJnZXQpfSxhZGRMaXN0ZW5lcnNfOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMub3B0aW9ucztiLmF0dHJpYnV0ZXMmJmEuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQXR0ck1vZGlmaWVkIix0aGlzLCEwKSxiLmNoYXJhY3RlckRhdGEmJmEuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ2hhcmFjdGVyRGF0YU1vZGlmaWVkIix0aGlzLCEwKSxiLmNoaWxkTGlzdCYmYS5hZGRFdmVudExpc3RlbmVyKCJET01Ob2RlSW5zZXJ0ZWQiLHRoaXMsITApLChiLmNoaWxkTGlzdHx8Yi5zdWJ0cmVlKSYmYS5hZGRFdmVudExpc3RlbmVyKCJET01Ob2RlUmVtb3ZlZCIsdGhpcywhMCl9LHJlbW92ZUxpc3RlbmVyczpmdW5jdGlvbigpe3RoaXMucmVtb3ZlTGlzdGVuZXJzXyh0aGlzLnRhcmdldCl9LHJlbW92ZUxpc3RlbmVyc186ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5vcHRpb25zO2IuYXR0cmlidXRlcyYmYS5yZW1vdmVFdmVudExpc3RlbmVyKCJET01BdHRyTW9kaWZpZWQiLHRoaXMsITApLGIuY2hhcmFjdGVyRGF0YSYmYS5yZW1vdmVFdmVudExpc3RlbmVyKCJET01DaGFyYWN0ZXJEYXRhTW9kaWZpZWQiLHRoaXMsITApLGIuY2hpbGRMaXN0JiZhLnJlbW92ZUV2ZW50TGlzdGVuZXIoIkRPTU5vZGVJbnNlcnRlZCIsdGhpcywhMCksKGIuY2hpbGRMaXN0fHxiLnN1YnRyZWUpJiZhLnJlbW92ZUV2ZW50TGlzdGVuZXIoIkRPTU5vZGVSZW1vdmVkIix0aGlzLCEwKX0sYWRkVHJhbnNpZW50T2JzZXJ2ZXI6ZnVuY3Rpb24oYSl7aWYoYSE9PXRoaXMudGFyZ2V0KXt0aGlzLmFkZExpc3RlbmVyc18oYSksdGhpcy50cmFuc2llbnRPYnNlcnZlZE5vZGVzLnB1c2goYSk7dmFyIGI9cC5nZXQoYSk7Ynx8cC5zZXQoYSxiPVtdKSxiLnB1c2godGhpcyl9fSxyZW1vdmVUcmFuc2llbnRPYnNlcnZlcnM6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnRyYW5zaWVudE9ic2VydmVkTm9kZXM7dGhpcy50cmFuc2llbnRPYnNlcnZlZE5vZGVzPVtdLGEuZm9yRWFjaChmdW5jdGlvbihhKXt0aGlzLnJlbW92ZUxpc3RlbmVyc18oYSk7Zm9yKHZhciBiPXAuZ2V0KGEpLGM9MDtjPGIubGVuZ3RoO2MrKylpZihiW2NdPT09dGhpcyl7Yi5zcGxpY2UoYywxKTticmVha319LHRoaXMpfSxoYW5kbGVFdmVudDpmdW5jdGlvbihhKXtzd2l0Y2goYS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKSxhLnR5cGUpe2Nhc2UiRE9NQXR0ck1vZGlmaWVkIjp2YXIgYj1hLmF0dHJOYW1lLGM9YS5yZWxhdGVkTm9kZS5uYW1lc3BhY2VVUkksZD1hLnRhcmdldCxlPW5ldyBqKCJhdHRyaWJ1dGVzIixkKTtlLmF0dHJpYnV0ZU5hbWU9YixlLmF0dHJpYnV0ZU5hbWVzcGFjZT1jO3ZhciBnPWEuYXR0ckNoYW5nZT09PU11dGF0aW9uRXZlbnQuQURESVRJT04/bnVsbDphLnByZXZWYWx1ZTtmKGQsZnVuY3Rpb24oYSl7cmV0dXJuIWEuYXR0cmlidXRlc3x8YS5hdHRyaWJ1dGVGaWx0ZXImJmEuYXR0cmlidXRlRmlsdGVyLmxlbmd0aCYmLTE9PT1hLmF0dHJpYnV0ZUZpbHRlci5pbmRleE9mKGIpJiYtMT09PWEuYXR0cmlidXRlRmlsdGVyLmluZGV4T2YoYyk/dm9pZCAwOmEuYXR0cmlidXRlT2xkVmFsdWU/ayhnKTplfSk7YnJlYWs7Y2FzZSJET01DaGFyYWN0ZXJEYXRhTW9kaWZpZWQiOnZhciBkPWEudGFyZ2V0LGU9aigiY2hhcmFjdGVyRGF0YSIsZCksZz1hLnByZXZWYWx1ZTtmKGQsZnVuY3Rpb24oYSl7cmV0dXJuIGEuY2hhcmFjdGVyRGF0YT9hLmNoYXJhY3RlckRhdGFPbGRWYWx1ZT9rKGcpOmU6dm9pZCAwfSk7YnJlYWs7Y2FzZSJET01Ob2RlUmVtb3ZlZCI6dGhpcy5hZGRUcmFuc2llbnRPYnNlcnZlcihhLnRhcmdldCk7Y2FzZSJET01Ob2RlSW5zZXJ0ZWQiOnZhciBoLGksZD1hLnJlbGF0ZWROb2RlLG09YS50YXJnZXQ7IkRPTU5vZGVJbnNlcnRlZCI9PT1hLnR5cGU/KGg9W21dLGk9W10pOihoPVtdLGk9W21dKTt2YXIgbj1tLnByZXZpb3VzU2libGluZyxvPW0ubmV4dFNpYmxpbmcsZT1qKCJjaGlsZExpc3QiLGQpO2UuYWRkZWROb2Rlcz1oLGUucmVtb3ZlZE5vZGVzPWksZS5wcmV2aW91c1NpYmxpbmc9bixlLm5leHRTaWJsaW5nPW8sZihkLGZ1bmN0aW9uKGEpe3JldHVybiBhLmNoaWxkTGlzdD9lOnZvaWQgMH0pfWwoKX19LGEuSnNNdXRhdGlvbk9ic2VydmVyPWd9KHRoaXMpLCF3aW5kb3cuTXV0YXRpb25PYnNlcnZlciYmKHdpbmRvdy5NdXRhdGlvbk9ic2VydmVyPXdpbmRvdy5XZWJLaXRNdXRhdGlvbk9ic2VydmVyfHx3aW5kb3cuSnNNdXRhdGlvbk9ic2VydmVyLCFNdXRhdGlvbk9ic2VydmVyKSl0aHJvdyBuZXcgRXJyb3IoIm5vIG11dGF0aW9uIG9ic2VydmVyIHN1cHBvcnQiKTshZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihiLGYpe3ZhciBnPWZ8fHt9O2lmKCFiKXRocm93IG5ldyBFcnJvcigiTmFtZSBhcmd1bWVudCBtdXN0IG5vdCBiZSBlbXB0eSIpO2lmKGcubmFtZT1iLCFnLnByb3RvdHlwZSl0aHJvdyBuZXcgRXJyb3IoIk9wdGlvbnMgbWlzc2luZyByZXF1aXJlZCBwcm90b3R5cGUgcHJvcGVydHkiKTtyZXR1cm4gZy5saWZlY3ljbGU9Zy5saWZlY3ljbGV8fHt9LGcuYW5jZXN0cnk9YyhnLmV4dGVuZHMpLGQoZyksZShnKSxrKGcucHJvdG90eXBlKSxtKGIsZyksZy5jdG9yPW4oZyksZy5jdG9yLnByb3RvdHlwZT1nLnByb3RvdHlwZSxnLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1nLmN0b3IsYS5yZWFkeSYmYS51cGdyYWRlQWxsKGRvY3VtZW50KSxnLmN0b3J9ZnVuY3Rpb24gYyhhKXt2YXIgYj1zW2FdO3JldHVybiBiP2MoYi5leHRlbmRzKS5jb25jYXQoW2JdKTpbXX1mdW5jdGlvbiBkKGEpe2Zvcih2YXIgYixjPWEuZXh0ZW5kcyxkPTA7Yj1hLmFuY2VzdHJ5W2RdO2QrKyljPWIuaXMmJmIudGFnO2EudGFnPWN8fGEubmFtZSxjJiYoYS5pcz1hLm5hbWUpfWZ1bmN0aW9uIGUoYSl7aWYoIU9iamVjdC5fX3Byb3RvX18pe3ZhciBiPUhUTUxFbGVtZW50LnByb3RvdHlwZTtpZihhLmlzKXt2YXIgYz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KGEudGFnKTtiPU9iamVjdC5nZXRQcm90b3R5cGVPZihjKX19YS5uYXRpdmU9Yn1mdW5jdGlvbiBmKGEpe3JldHVybiBnKHQoYS50YWcpLGEpfWZ1bmN0aW9uIGcoYixjKXtyZXR1cm4gYy5pcyYmYi5zZXRBdHRyaWJ1dGUoImlzIixjLmlzKSxoKGIsYyksYi5fX3VwZ3JhZGVkX189ITAsYS51cGdyYWRlU3VidHJlZShiKSxqKGIpLGJ9ZnVuY3Rpb24gaChhLGIpe09iamVjdC5fX3Byb3RvX18/YS5fX3Byb3RvX189Yi5wcm90b3R5cGU6KGkoYSxiLnByb3RvdHlwZSxiLm5hdGl2ZSksYS5fX3Byb3RvX189Yi5wcm90b3R5cGUpfWZ1bmN0aW9uIGkoYSxiLGMpe2Zvcih2YXIgZD17fSxlPWI7ZSE9PWMmJmUhPT1IVE1MVW5rbm93bkVsZW1lbnQucHJvdG90eXBlOyl7Zm9yKHZhciBmLGc9T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoZSksaD0wO2Y9Z1toXTtoKyspZFtmXXx8KE9iamVjdC5kZWZpbmVQcm9wZXJ0eShhLGYsT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLGYpKSxkW2ZdPTEpO2U9T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpfX1mdW5jdGlvbiBqKGEpe2EucmVhZHlDYWxsYmFjayYmYS5yZWFkeUNhbGxiYWNrKCl9ZnVuY3Rpb24gayhhKXt2YXIgYj1hLnNldEF0dHJpYnV0ZTthLnNldEF0dHJpYnV0ZT1mdW5jdGlvbihhLGMpe2wuY2FsbCh0aGlzLGEsYyxiKX07dmFyIGM9YS5yZW1vdmVBdHRyaWJ1dGU7YS5yZW1vdmVBdHRyaWJ1dGU9ZnVuY3Rpb24oYSxiKXtsLmNhbGwodGhpcyxhLGIsYyl9fWZ1bmN0aW9uIGwoYSxiLGMpe3ZhciBkPXRoaXMuZ2V0QXR0cmlidXRlKGEpO2MuYXBwbHkodGhpcyxhcmd1bWVudHMpLHRoaXMuYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrJiZ0aGlzLmdldEF0dHJpYnV0ZShhKSE9PWQmJnRoaXMuYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrKGEsZCl9ZnVuY3Rpb24gbShhLGIpe3NbYV09Yn1mdW5jdGlvbiBuKGEpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBmKGEpfX1mdW5jdGlvbiBvKGEpe3ZhciBiPXNbYV07cmV0dXJuIGI/bmV3IGIuY3Rvcjp0KGEpfWZ1bmN0aW9uIHAoYSl7aWYoIWEuX191cGdyYWRlZF9fJiZhLm5vZGVUeXBlPT09Tm9kZS5FTEVNRU5UX05PREUpe3ZhciBiPWEuZ2V0QXR0cmlidXRlKCJpcyIpfHxhLmxvY2FsTmFtZSxjPXNbYl07cmV0dXJuIGMmJmcoYSxjKX19ZnVuY3Rpb24gcShiKXt2YXIgYz11LmNhbGwodGhpcyxiKTtyZXR1cm4gYS51cGdyYWRlQWxsKGMpLGN9aWYoYXx8KGE9d2luZG93LkN1c3RvbUVsZW1lbnRzPXtmbGFnczp7fX0pLGEuaGFzTmF0aXZlPShkb2N1bWVudC53ZWJraXRSZWdpc3Rlcnx8ZG9jdW1lbnQucmVnaXN0ZXIpJiYibmF0aXZlIj09PWEuZmxhZ3MucmVnaXN0ZXIsYS5oYXNOYXRpdmUpe2RvY3VtZW50LnJlZ2lzdGVyPWRvY3VtZW50LnJlZ2lzdGVyfHxkb2N1bWVudC53ZWJraXRSZWdpc3Rlcjt2YXIgcj1mdW5jdGlvbigpe307YS5yZWdpc3RyeT17fSxhLnVwZ3JhZGVFbGVtZW50PXJ9ZWxzZXt2YXIgcz17fSx0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQuYmluZChkb2N1bWVudCksdT1Ob2RlLnByb3RvdHlwZS5jbG9uZU5vZGU7ZG9jdW1lbnQucmVnaXN0ZXI9Yixkb2N1bWVudC5jcmVhdGVFbGVtZW50PW8sTm9kZS5wcm90b3R5cGUuY2xvbmVOb2RlPXEsYS5yZWdpc3RyeT1zLGEudXBncmFkZT1wfX0od2luZG93LkN1c3RvbUVsZW1lbnRzKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEsYyxkKXt2YXIgZT1hLmZpcnN0RWxlbWVudENoaWxkO2lmKCFlKWZvcihlPWEuZmlyc3RDaGlsZDtlJiZlLm5vZGVUeXBlIT09Tm9kZS5FTEVNRU5UX05PREU7KWU9ZS5uZXh0U2libGluZztmb3IoO2U7KWMoZSxkKSE9PSEwJiZiKGUsYyxkKSxlPWUubmV4dEVsZW1lbnRTaWJsaW5nO3JldHVybiBudWxsfWZ1bmN0aW9uIGMoYSxkKXtiKGEsZnVuY3Rpb24oYSl7cmV0dXJuIGQoYSk/ITA6KGEud2Via2l0U2hhZG93Um9vdCYmYyhhLndlYmtpdFNoYWRvd1Jvb3QsZCksdm9pZCAwKX0pLGEud2Via2l0U2hhZG93Um9vdCYmYyhhLndlYmtpdFNoYWRvd1Jvb3QsZCl9ZnVuY3Rpb24gZChhKXtyZXR1cm4gZyhhKT8oaChhKSwhMCk6KGkoYSksdm9pZCAwKX1mdW5jdGlvbiBlKGEpe2MoYSxmdW5jdGlvbihhKXtyZXR1cm4gZChhKT8hMDp2b2lkIDB9KX1mdW5jdGlvbiBmKGEpe3JldHVybiBkKGEpfHxlKGEpfWZ1bmN0aW9uIGcoYil7aWYoIWIuX191cGdyYWRlZF9fJiZiLm5vZGVUeXBlPT09Tm9kZS5FTEVNRU5UX05PREUpe3ZhciBjPWIuZ2V0QXR0cmlidXRlKCJpcyIpfHxiLmxvY2FsTmFtZSxkPWEucmVnaXN0cnlbY107aWYoZClyZXR1cm4gbG9nRmxhZ3MuZG9tJiZjb25zb2xlLmdyb3VwKCJ1cGdyYWRlOiIsYi5sb2NhbE5hbWUpLGEudXBncmFkZShiKSxsb2dGbGFncy5kb20mJmNvbnNvbGUuZ3JvdXBFbmQoKSwhMH19ZnVuY3Rpb24gaChhKXtpKGEpLGwoYSkmJmMoYSxmdW5jdGlvbihhKXtpKGEpfSl9ZnVuY3Rpb24gaShhKXsoYS5pbnNlcnRlZENhbGxiYWNrfHxhLl9fdXBncmFkZWRfXyYmbG9nRmxhZ3MuZG9tKSYmKGxvZ0ZsYWdzLmRvbSYmY29uc29sZS5ncm91cCgiaW5zZXJ0ZWQ6IixhLmxvY2FsTmFtZSksbChhKSYmKGEuX19pbnNlcnRlZD0oYS5fX2luc2VydGVkfHwwKSsxLGEuX19pbnNlcnRlZDwxJiYoYS5fX2luc2VydGVkPTEpLGEuX19pbnNlcnRlZD4xP2xvZ0ZsYWdzLmRvbSYmY29uc29sZS53YXJuKCJpbnNlcnRlZDoiLGEubG9jYWxOYW1lLCJpbnNlcnQvcmVtb3ZlIGNvdW50OiIsYS5fX2luc2VydGVkKTphLmluc2VydGVkQ2FsbGJhY2smJihsb2dGbGFncy5kb20mJmNvbnNvbGUubG9nKCJpbnNlcnRlZDoiLGEubG9jYWxOYW1lKSxhLmluc2VydGVkQ2FsbGJhY2soKSkpLGxvZ0ZsYWdzLmRvbSYmY29uc29sZS5ncm91cEVuZCgpKX1mdW5jdGlvbiBqKGEpe2soYSksYyhhLGZ1bmN0aW9uKGEpe2soYSl9KX1mdW5jdGlvbiBrKGEpeyhhLnJlbW92ZWRDYWxsYmFja3x8YS5fX3VwZ3JhZGVkX18mJmxvZ0ZsYWdzLmRvbSkmJihsb2dGbGFncy5kb20mJmNvbnNvbGUubG9nKCJyZW1vdmVkOiIsYS5sb2NhbE5hbWUpLGwoYSl8fChhLl9faW5zZXJ0ZWQ9KGEuX19pbnNlcnRlZHx8MCktMSxhLl9faW5zZXJ0ZWQ+MCYmKGEuX19pbnNlcnRlZD0wKSxhLl9faW5zZXJ0ZWQ8MD9sb2dGbGFncy5kb20mJmNvbnNvbGUud2FybigicmVtb3ZlZDoiLGEubG9jYWxOYW1lLCJpbnNlcnQvcmVtb3ZlIGNvdW50OiIsYS5fX2luc2VydGVkKTphLnJlbW92ZWRDYWxsYmFjayYmYS5yZW1vdmVkQ2FsbGJhY2soKSkpfWZ1bmN0aW9uIGwoYSl7Zm9yKHZhciBiPWE7Yjspe2lmKGI9PWEub3duZXJEb2N1bWVudClyZXR1cm4hMDtiPWIucGFyZW50Tm9kZXx8Yi5ob3N0fX1mdW5jdGlvbiBtKGEpe2Eud2Via2l0U2hhZG93Um9vdCYmIWEud2Via2l0U2hhZG93Um9vdC5fX3dhdGNoZWQmJihsb2dGbGFncy5kb20mJmNvbnNvbGUubG9nKCJ3YXRjaGluZyBzaGFkb3ctcm9vdCBmb3I6ICIsYS5sb2NhbE5hbWUpLHIoYS53ZWJraXRTaGFkb3dSb290KSxhLndlYmtpdFNoYWRvd1Jvb3QuX193YXRjaGVkPSEwKX1mdW5jdGlvbiBuKGEpe20oYSksYyhhLGZ1bmN0aW9uKCl7bShhKX0pfWZ1bmN0aW9uIG8oYSl7c3dpdGNoKGEubG9jYWxOYW1lKXtjYXNlInN0eWxlIjpjYXNlInNjcmlwdCI6Y2FzZSJ0ZW1wbGF0ZSI6Y2FzZSB2b2lkIDA6cmV0dXJuITB9fWZ1bmN0aW9uIHAoYSl7aWYobG9nRmxhZ3MuZG9tKXt2YXIgYj1hWzBdO2lmKGImJiJjaGlsZExpc3QiPT09Yi50eXBlJiZiLmFkZGVkTm9kZXMmJmIuYWRkZWROb2Rlcyl7Zm9yKHZhciBjPWIuYWRkZWROb2Rlc1swXTtjJiZjIT09ZG9jdW1lbnQmJiFjLmhvc3Q7KWM9Yy5wYXJlbnROb2RlO3ZhciBkPWMmJihjLlVSTHx8Yy5fVVJMfHxjLmhvc3QmJmMuaG9zdC5sb2NhbE5hbWUpfHwiIjtkPWQuc3BsaXQoIi8/Iikuc2hpZnQoKS5zcGxpdCgiLyIpLnBvcCgpfWNvbnNvbGUuZ3JvdXAoIm11dGF0aW9ucyAoJWQpIFslc10iLGEubGVuZ3RoLGR8fCIiKX1hLmZvckVhY2goZnVuY3Rpb24oYSl7ImNoaWxkTGlzdCI9PT1hLnR5cGUmJih2KGEuYWRkZWROb2RlcyxmdW5jdGlvbihhKXtvKGEpfHxmKGEpfSksdihhLnJlbW92ZWROb2RlcyxmdW5jdGlvbihhKXtvKGEpfHxqKGEpfSkpfSksbG9nRmxhZ3MuZG9tJiZjb25zb2xlLmdyb3VwRW5kKCl9ZnVuY3Rpb24gcSgpe3AodS50YWtlUmVjb3JkcygpKQp9ZnVuY3Rpb24gcihhKXt1Lm9ic2VydmUoYSx7Y2hpbGRMaXN0OiEwLHN1YnRyZWU6ITB9KX1mdW5jdGlvbiBzKGEpe3IoYSl9ZnVuY3Rpb24gdChhKXtsb2dGbGFncy5kb20mJmNvbnNvbGUuZ3JvdXAoInVwZ3JhZGVEb2N1bWVudDogIiwoYS5VUkx8fGEuX1VSTHx8IiIpLnNwbGl0KCIvIikucG9wKCkpLGYoYSksbG9nRmxhZ3MuZG9tJiZjb25zb2xlLmdyb3VwRW5kKCl9dmFyIHU9bmV3IE11dGF0aW9uT2JzZXJ2ZXIocCksdj1BcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsLmJpbmQoQXJyYXkucHJvdG90eXBlLmZvckVhY2gpO2Eud2F0Y2hTaGFkb3c9bSxhLndhdGNoQWxsU2hhZG93cz1uLGEudXBncmFkZUFsbD1mLGEudXBncmFkZVN1YnRyZWU9ZSxhLm9ic2VydmVEb2N1bWVudD1zLGEudXBncmFkZURvY3VtZW50PXQsYS50YWtlUmVjb3Jkcz1xfSh3aW5kb3cuQ3VzdG9tRWxlbWVudHMpLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gcGFyc2VFbGVtZW50RWxlbWVudChhKXt2YXIgYj17bmFtZToiIiwiZXh0ZW5kcyI6bnVsbH07dGFrZUF0dHJpYnV0ZXMoYSxiKTt2YXIgYz1IVE1MRWxlbWVudC5wcm90b3R5cGU7aWYoYi5leHRlbmRzKXt2YXIgZD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KGIuZXh0ZW5kcyk7Yz1kLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGQpfWIucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYyksYS5vcHRpb25zPWI7dmFyIGU9YS5xdWVyeVNlbGVjdG9yKCdzY3JpcHQ6bm90KFt0eXBlXSksc2NyaXB0W3R5cGU9InRleHQvamF2YXNjcmlwdCJdLHNjcmlwdHMnKTtlJiZleGVjdXRlQ29tcG9uZW50U2NyaXB0KGUudGV4dENvbnRlbnQsYSxiLm5hbWUpO3ZhciBmPWRvY3VtZW50LnJlZ2lzdGVyKGIubmFtZSxiKTthLmN0b3I9Zjt2YXIgZz1hLmdldEF0dHJpYnV0ZSgiY29uc3RydWN0b3IiKTtnJiYod2luZG93W2ddPWYpfWZ1bmN0aW9uIHRha2VBdHRyaWJ1dGVzKGEsYil7Zm9yKHZhciBjIGluIGIpe3ZhciBkPWEuYXR0cmlidXRlc1tjXTtkJiYoYltjXT1kLnZhbHVlKX19ZnVuY3Rpb24gZXhlY3V0ZUNvbXBvbmVudFNjcmlwdChpblNjcmlwdCxpbkNvbnRleHQsaW5OYW1lKXtjb250ZXh0PWluQ29udGV4dDt2YXIgb3duZXI9Y29udGV4dC5vd25lckRvY3VtZW50LHVybD1vd25lci5fVVJMfHxvd25lci5VUkx8fG93bmVyLmltcGwmJihvd25lci5pbXBsLl9VUkx8fG93bmVyLmltcGwuVVJMKSxtYXRjaD11cmwubWF0Y2goLy4qXC8oW14uXSopWy5dPy4qJC8pO2lmKG1hdGNoKXt2YXIgbmFtZT1tYXRjaFsxXTt1cmwrPW5hbWUhPWluTmFtZT8iOiIraW5OYW1lOiIifXZhciBjb2RlPSJfX2NvbXBvbmVudFNjcmlwdCgnIitpbk5hbWUrIicsIGZ1bmN0aW9uKCl7IitpblNjcmlwdCsifSk7IisiXG4vLyMgc291cmNlVVJMPSIrdXJsKyJcbiI7ZXZhbChjb2RlKX1mdW5jdGlvbiBtaXhpbihhLGIpe2E9YXx8e307dHJ5e09iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGIpLmZvckVhY2goZnVuY3Rpb24oYyl7dmFyIGQ9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihiLGMpO2QmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eShhLGMsZCl9KX1jYXRjaChjKXt9cmV0dXJuIGF9dmFyIEhUTUxFbGVtZW50RWxlbWVudD1mdW5jdGlvbihhKXtyZXR1cm4gYS5yZWdpc3Rlcj1IVE1MRWxlbWVudEVsZW1lbnQucHJvdG90eXBlLnJlZ2lzdGVyLHBhcnNlRWxlbWVudEVsZW1lbnQoYSksYX07SFRNTEVsZW1lbnRFbGVtZW50LnByb3RvdHlwZT17cmVnaXN0ZXI6ZnVuY3Rpb24oYSl7YSYmKHRoaXMub3B0aW9ucy5saWZlY3ljbGU9YS5saWZlY3ljbGUsYS5wcm90b3R5cGUmJm1peGluKHRoaXMub3B0aW9ucy5wcm90b3R5cGUsYS5wcm90b3R5cGUpKX19O3ZhciBjb250ZXh0O3dpbmRvdy5fX2NvbXBvbmVudFNjcmlwdD1mdW5jdGlvbihhLGIpe2IuY2FsbChjb250ZXh0KX0sd2luZG93LkhUTUxFbGVtZW50RWxlbWVudD1IVE1MRWxlbWVudEVsZW1lbnR9KCksZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGEpe3JldHVybiJsaW5rIj09PWEubG9jYWxOYW1lJiZhLmdldEF0dHJpYnV0ZSgicmVsIik9PT1ifXZhciBiPXdpbmRvdy5IVE1MSW1wb3J0cz9IVE1MSW1wb3J0cy5JTVBPUlRfTElOS19UWVBFOiJub25lIixjPXtzZWxlY3RvcnM6WyJsaW5rW3JlbD0iK2IrIl0iLCJlbGVtZW50Il0sbWFwOntsaW5rOiJwYXJzZUxpbmsiLGVsZW1lbnQ6InBhcnNlRWxlbWVudCJ9LHBhcnNlOmZ1bmN0aW9uKGEpe2lmKCFhLl9fcGFyc2VkKXthLl9fcGFyc2VkPSEwO3ZhciBiPWEucXVlcnlTZWxlY3RvckFsbChjLnNlbGVjdG9ycyk7ZChiLGZ1bmN0aW9uKGEpe2NbYy5tYXBbYS5sb2NhbE5hbWVdXShhKX0pLEN1c3RvbUVsZW1lbnRzLnVwZ3JhZGVEb2N1bWVudChhKSxDdXN0b21FbGVtZW50cy5vYnNlcnZlRG9jdW1lbnQoYSl9fSxwYXJzZUxpbms6ZnVuY3Rpb24oYil7YShiKSYmdGhpcy5wYXJzZUltcG9ydChiKX0scGFyc2VJbXBvcnQ6ZnVuY3Rpb24oYSl7YS5jb250ZW50JiZjLnBhcnNlKGEuY29udGVudCl9LHBhcnNlRWxlbWVudDpmdW5jdGlvbihhKXtuZXcgSFRNTEVsZW1lbnRFbGVtZW50KGEpfX0sZD1BcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsLmJpbmQoQXJyYXkucHJvdG90eXBlLmZvckVhY2gpO0N1c3RvbUVsZW1lbnRzLnBhcnNlcj1jfSgpLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gYSgpe3NldFRpbWVvdXQoZnVuY3Rpb24oKXtDdXN0b21FbGVtZW50cy5wYXJzZXIucGFyc2UoZG9jdW1lbnQpLEN1c3RvbUVsZW1lbnRzLnVwZ3JhZGVEb2N1bWVudChkb2N1bWVudCksQ3VzdG9tRWxlbWVudHMucmVhZHk9ITAsQ3VzdG9tRWxlbWVudHMucmVhZHlUaW1lPURhdGUubm93KCksd2luZG93LkhUTUxJbXBvcnRzJiYoQ3VzdG9tRWxlbWVudHMuZWxhcHNlZD1DdXN0b21FbGVtZW50cy5yZWFkeVRpbWUtSFRNTEltcG9ydHMucmVhZHlUaW1lKSxkb2N1bWVudC5ib2R5LmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KCJXZWJDb21wb25lbnRzUmVhZHkiLHtidWJibGVzOiEwfSkpfSwwKX1pZigiZnVuY3Rpb24iIT10eXBlb2Ygd2luZG93LkN1c3RvbUV2ZW50JiYod2luZG93LkN1c3RvbUV2ZW50PWZ1bmN0aW9uKGEpe3ZhciBiPWRvY3VtZW50LmNyZWF0ZUV2ZW50KCJIVE1MRXZlbnRzIik7cmV0dXJuIGIuaW5pdEV2ZW50KGEsITAsITApLGJ9KSwiY29tcGxldGUiPT09ZG9jdW1lbnQucmVhZHlTdGF0ZSlhKCk7ZWxzZXt2YXIgYj13aW5kb3cuSFRNTEltcG9ydHM/IkhUTUxJbXBvcnRzTG9hZGVkIjoiRE9NQ29udGVudExvYWRlZCI7d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoYixhKX19KCksZnVuY3Rpb24oKXtmdW5jdGlvbiBhKCl7fXZhciBiPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInN0eWxlIik7Yi50ZXh0Q29udGVudD0iZWxlbWVudCB7ZGlzcGxheTogbm9uZSAhaW1wb3J0YW50O30gLyogaW5qZWN0ZWQgYnkgcGxhdGZvcm0uanMgKi8iO3ZhciBjPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoImhlYWQiKTtpZihjLmluc2VydEJlZm9yZShiLGMuZmlyc3RDaGlsZCksd2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKXtDdXN0b21FbGVtZW50cy53YXRjaFNoYWRvdz1hLEN1c3RvbUVsZW1lbnRzLndhdGNoQWxsU2hhZG93cz1hO3ZhciBkPVsidXBncmFkZUFsbCIsInVwZ3JhZGVTdWJ0cmVlIiwib2JzZXJ2ZURvY3VtZW50IiwidXBncmFkZURvY3VtZW50Il0sZT17fTtkLmZvckVhY2goZnVuY3Rpb24oYSl7ZVthXT1DdXN0b21FbGVtZW50c1thXX0pLGQuZm9yRWFjaChmdW5jdGlvbihhKXtDdXN0b21FbGVtZW50c1thXT1mdW5jdGlvbihiKXtyZXR1cm4gZVthXSh3cmFwKGIpKX19KX19KCksZnVuY3Rpb24oYSl7YT1hfHx7fTt2YXIgYj17c2hhZG93OmZ1bmN0aW9uKGEpe3JldHVybiBhP2Euc2hhZG93Um9vdHx8YS53ZWJraXRTaGFkb3dSb290OnZvaWQgMH0sY2FuVGFyZ2V0OmZ1bmN0aW9uKGEpe3JldHVybiBhJiZCb29sZWFuKGEuZWxlbWVudEZyb21Qb2ludCl9LHRhcmdldGluZ1NoYWRvdzpmdW5jdGlvbihhKXt2YXIgYj10aGlzLnNoYWRvdyhhKTtyZXR1cm4gdGhpcy5jYW5UYXJnZXQoYik/Yjp2b2lkIDB9LG9sZGVyU2hhZG93OmZ1bmN0aW9uKGEpe3ZhciBiPWEub2xkZXJTaGFkb3dSb290O2lmKCFiKXt2YXIgYz1hLnF1ZXJ5U2VsZWN0b3IoInNoYWRvdyIpO2MmJihiPWMub2xkZXJTaGFkb3dSb290KX1yZXR1cm4gYn0sYWxsU2hhZG93czpmdW5jdGlvbihhKXtmb3IodmFyIGI9W10sYz10aGlzLnNoYWRvdyhhKTtjOyliLnB1c2goYyksYz10aGlzLm9sZGVyU2hhZG93KGMpO3JldHVybiBifSxzZWFyY2hSb290OmZ1bmN0aW9uKGEsYixjKXtpZihhKXt2YXIgZCxlLGY9YS5lbGVtZW50RnJvbVBvaW50KGIsYyk7Zm9yKGU9dGhpcy50YXJnZXRpbmdTaGFkb3coZik7ZTspe2lmKGQ9ZS5lbGVtZW50RnJvbVBvaW50KGIsYykpe3ZhciBnPXRoaXMudGFyZ2V0aW5nU2hhZG93KGQpO3JldHVybiB0aGlzLnNlYXJjaFJvb3QoZyxiLGMpfHxkfWU9dGhpcy5vbGRlclNoYWRvdyhlKX1yZXR1cm4gZn19LG93bmVyOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1hO2IucGFyZW50Tm9kZTspYj1iLnBhcmVudE5vZGU7cmV0dXJuIGJ9LGZpbmRUYXJnZXQ6ZnVuY3Rpb24oYSl7dmFyIGI9YS5jbGllbnRYLGM9YS5jbGllbnRZLGQ9dGhpcy5vd25lcihhLnRhcmdldCk7cmV0dXJuIGQuZWxlbWVudEZyb21Qb2ludChiLGMpfHwoZD1kb2N1bWVudCksdGhpcy5zZWFyY2hSb290KGRvY3VtZW50LGIsYyl9fTthLnRhcmdldEZpbmRpbmc9YixhLmZpbmRUYXJnZXQ9Yi5maW5kVGFyZ2V0LmJpbmQoYiksd2luZG93LlBvaW50ZXJFdmVudHNQb2x5ZmlsbD1hfSh3aW5kb3cuUG9pbnRlckV2ZW50c1BvbHlmaWxsKSxmdW5jdGlvbigpe2Z1bmN0aW9uIGEoYSl7cmV0dXJuJ1t0b3VjaC1hY3Rpb249IicrYSsnIl0nfWZ1bmN0aW9uIGIoYSl7cmV0dXJuInsgLW1zLXRvdWNoLWFjdGlvbjogIithKyI7IHRvdWNoLWFjdGlvbjogIithKyI7IH0ifXZhciBjPVsibm9uZSIsImF1dG8iLCJwYW4teCIsInBhbi15Iix7cnVsZToicGFuLXggcGFuLXkiLHNlbGVjdG9yczpbInBhbi14IHBhbi15IiwicGFuLXkgcGFuLXgiXX1dLGQ9IiI7Yy5mb3JFYWNoKGZ1bmN0aW9uKGMpe2QrPVN0cmluZyhjKT09PWM/YShjKStiKGMpOmMuc2VsZWN0b3JzLm1hcChhKStiKGMucnVsZSl9KTt2YXIgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzdHlsZSIpO2UudGV4dENvbnRlbnQ9ZDt2YXIgZj1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCJoZWFkIik7Zi5pbnNlcnRCZWZvcmUoZSxmLmZpcnN0Q2hpbGQpfSgpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSxiKXt2YXIgYj1ifHx7fSxlPWIuYnV0dG9ucztpZih2b2lkIDA9PT1lKXN3aXRjaChiLndoaWNoKXtjYXNlIDE6ZT0xO2JyZWFrO2Nhc2UgMjplPTQ7YnJlYWs7Y2FzZSAzOmU9MjticmVhaztkZWZhdWx0OmU9MH12YXIgZjtpZihjKWY9bmV3IE1vdXNlRXZlbnQoYSxiKTtlbHNle2Y9ZG9jdW1lbnQuY3JlYXRlRXZlbnQoIk1vdXNlRXZlbnQiKTt2YXIgZz17YnViYmxlczohMSxjYW5jZWxhYmxlOiExLHZpZXc6bnVsbCxkZXRhaWw6bnVsbCxzY3JlZW5YOjAsc2NyZWVuWTowLGNsaWVudFg6MCxjbGllbnRZOjAsY3RybEtleTohMSxhbHRLZXk6ITEsc2hpZnRLZXk6ITEsbWV0YUtleTohMSxidXR0b246MCxyZWxhdGVkVGFyZ2V0Om51bGx9O09iamVjdC5rZXlzKGcpLmZvckVhY2goZnVuY3Rpb24oYSl7YSBpbiBiJiYoZ1thXT1iW2FdKX0pLGYuaW5pdE1vdXNlRXZlbnQoYSxnLmJ1YmJsZXMsZy5jYW5jZWxhYmxlLGcudmlldyxnLmRldGFpbCxnLnNjcmVlblgsZy5zY3JlZW5ZLGcuY2xpZW50WCxnLmNsaWVudFksZy5jdHJsS2V5LGcuYWx0S2V5LGcuc2hpZnRLZXksZy5tZXRhS2V5LGcuYnV0dG9uLGcucmVsYXRlZFRhcmdldCl9ZHx8T2JqZWN0LmRlZmluZVByb3BlcnR5KGYsImJ1dHRvbnMiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gZX0sZW51bWVyYWJsZTohMH0pO3ZhciBoPTA7cmV0dXJuIGg9Yi5wcmVzc3VyZT9iLnByZXNzdXJlOmU/LjU6MCxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhmLHtwb2ludGVySWQ6e3ZhbHVlOmIucG9pbnRlcklkfHwwLGVudW1lcmFibGU6ITB9LHdpZHRoOnt2YWx1ZTpiLndpZHRofHwwLGVudW1lcmFibGU6ITB9LGhlaWdodDp7dmFsdWU6Yi5oZWlnaHR8fDAsZW51bWVyYWJsZTohMH0scHJlc3N1cmU6e3ZhbHVlOmgsZW51bWVyYWJsZTohMH0sdGlsdFg6e3ZhbHVlOmIudGlsdFh8fDAsZW51bWVyYWJsZTohMH0sdGlsdFk6e3ZhbHVlOmIudGlsdFl8fDAsZW51bWVyYWJsZTohMH0scG9pbnRlclR5cGU6e3ZhbHVlOmIucG9pbnRlclR5cGV8fCIiLGVudW1lcmFibGU6ITB9LGh3VGltZXN0YW1wOnt2YWx1ZTpiLmh3VGltZXN0YW1wfHwwLGVudW1lcmFibGU6ITB9LGlzUHJpbWFyeTp7dmFsdWU6Yi5pc1ByaW1hcnl8fCExLGVudW1lcmFibGU6ITB9fSksZn12YXIgYz0hMSxkPSExO3RyeXt2YXIgZT1uZXcgTW91c2VFdmVudCgiY2xpY2siLHtidXR0b25zOjF9KTtjPSEwLGQ9MT09PWUuYnV0dG9uc31jYXRjaChmKXt9YS5Qb2ludGVyRXZlbnR8fChhLlBvaW50ZXJFdmVudD1iKX0od2luZG93KSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKCl7dGhpcy5pZHM9W10sdGhpcy5wb2ludGVycz1bXX1iLnByb3RvdHlwZT17c2V0OmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5pZHMuaW5kZXhPZihhKTtjPi0xP3RoaXMucG9pbnRlcnNbY109YjoodGhpcy5pZHMucHVzaChhKSx0aGlzLnBvaW50ZXJzLnB1c2goYikpfSxoYXM6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuaWRzLmluZGV4T2YoYSk+LTF9LCJkZWxldGUiOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuaWRzLmluZGV4T2YoYSk7Yj4tMSYmKHRoaXMuaWRzLnNwbGljZShiLDEpLHRoaXMucG9pbnRlcnMuc3BsaWNlKGIsMSkpfSxnZXQ6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5pZHMuaW5kZXhPZihhKTtyZXR1cm4gdGhpcy5wb2ludGVyc1tiXX0sZ2V0IHNpemUoKXtyZXR1cm4gdGhpcy5wb2ludGVycy5sZW5ndGh9LGNsZWFyOmZ1bmN0aW9uKCl7dGhpcy5pZHMubGVuZ3RoPTAsdGhpcy5wb2ludGVycy5sZW5ndGg9MH0sZm9yRWFjaDpmdW5jdGlvbihhLGIpe3RoaXMuaWRzLmZvckVhY2goZnVuY3Rpb24oYyxkKXthLmNhbGwoYixjLHRoaXMucG9pbnRlcnNbZF0sdGhpcyl9LHRoaXMpfX0sYS5Qb2ludGVyTWFwPXdpbmRvdy5NYXAmJk1hcC5wcm90b3R5cGUuZm9yRWFjaD9NYXA6Yn0od2luZG93LlBvaW50ZXJFdmVudHNQb2x5ZmlsbCksZnVuY3Rpb24oYSl7dmFyIGI7aWYoInVuZGVmaW5lZCIhPXR5cGVvZiBXZWFrTWFwJiZuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoIkZpcmVmb3gvIik8MCliPVdlYWtNYXA7ZWxzZXt2YXIgYz1PYmplY3QuZGVmaW5lUHJvcGVydHksZD1PYmplY3QuaGFzT3duUHJvcGVydHksZT0obmV3IERhdGUpLmdldFRpbWUoKSUxZTk7Yj1mdW5jdGlvbigpe3RoaXMubmFtZT0iX19zdCIrKDFlOSpNYXRoLnJhbmRvbSgpPj4+MCkrKGUrKyArIl9fIil9LGIucHJvdG90eXBlPXtzZXQ6ZnVuY3Rpb24oYSxiKXtjKGEsdGhpcy5uYW1lLHt2YWx1ZTpiLHdyaXRhYmxlOiEwfSl9LGdldDpmdW5jdGlvbihhKXtyZXR1cm4gZC5jYWxsKGEsdGhpcy5uYW1lKT9hW3RoaXMubmFtZV06dm9pZCAwfSwiZGVsZXRlIjpmdW5jdGlvbihhKXt0aGlzLnNldChhLHZvaWQgMCl9fX1hLlNpZGVUYWJsZT1ifSh3aW5kb3cuUG9pbnRlckV2ZW50c1BvbHlmaWxsKSxmdW5jdGlvbihhKXt2YXIgYj17dGFyZ2V0czpuZXcgYS5TaWRlVGFibGUsaGFuZGxlZEV2ZW50czpuZXcgYS5TaWRlVGFibGUscG9pbnRlcm1hcDpuZXcgYS5Qb2ludGVyTWFwLGV2ZW50TWFwOnt9LGV2ZW50U291cmNlczp7fSxldmVudFNvdXJjZUxpc3Q6W10scmVnaXN0ZXJTb3VyY2U6ZnVuY3Rpb24oYSxiKXt2YXIgYz1iLGQ9Yy5ldmVudHM7ZCYmKGQuZm9yRWFjaChmdW5jdGlvbihhKXtjW2FdJiYodGhpcy5ldmVudE1hcFthXT1jW2FdLmJpbmQoYykpfSx0aGlzKSx0aGlzLmV2ZW50U291cmNlc1thXT1jLHRoaXMuZXZlbnRTb3VyY2VMaXN0LnB1c2goYykpfSxyZWdpc3RlcjpmdW5jdGlvbihhKXtmb3IodmFyIGIsYz10aGlzLmV2ZW50U291cmNlTGlzdC5sZW5ndGgsZD0wO2M+ZCYmKGI9dGhpcy5ldmVudFNvdXJjZUxpc3RbZF0pO2QrKyliLnJlZ2lzdGVyLmNhbGwoYixhKX0sdW5yZWdpc3RlcjpmdW5jdGlvbihhKXtmb3IodmFyIGIsYz10aGlzLmV2ZW50U291cmNlTGlzdC5sZW5ndGgsZD0wO2M+ZCYmKGI9dGhpcy5ldmVudFNvdXJjZUxpc3RbZF0pO2QrKyliLnVucmVnaXN0ZXIuY2FsbChiLGEpfSxkb3duOmZ1bmN0aW9uKGEpe3RoaXMuZmlyZUV2ZW50KCJwb2ludGVyZG93biIsYSl9LG1vdmU6ZnVuY3Rpb24oYSl7dGhpcy5maXJlRXZlbnQoInBvaW50ZXJtb3ZlIixhKX0sdXA6ZnVuY3Rpb24oYSl7dGhpcy5maXJlRXZlbnQoInBvaW50ZXJ1cCIsYSl9LGVudGVyOmZ1bmN0aW9uKGEpe2EuYnViYmxlcz0hMSx0aGlzLmZpcmVFdmVudCgicG9pbnRlcmVudGVyIixhKX0sbGVhdmU6ZnVuY3Rpb24oYSl7YS5idWJibGVzPSExLHRoaXMuZmlyZUV2ZW50KCJwb2ludGVybGVhdmUiLGEpfSxvdmVyOmZ1bmN0aW9uKGEpe2EuYnViYmxlcz0hMCx0aGlzLmZpcmVFdmVudCgicG9pbnRlcm92ZXIiLGEpfSxvdXQ6ZnVuY3Rpb24oYSl7YS5idWJibGVzPSEwLHRoaXMuZmlyZUV2ZW50KCJwb2ludGVyb3V0IixhKX0sY2FuY2VsOmZ1bmN0aW9uKGEpe3RoaXMuZmlyZUV2ZW50KCJwb2ludGVyY2FuY2VsIixhKX0sbGVhdmVPdXQ6ZnVuY3Rpb24oYSl7YS50YXJnZXQuY29udGFpbnMoYS5yZWxhdGVkVGFyZ2V0KXx8dGhpcy5sZWF2ZShhKSx0aGlzLm91dChhKX0sZW50ZXJPdmVyOmZ1bmN0aW9uKGEpe2EudGFyZ2V0LmNvbnRhaW5zKGEucmVsYXRlZFRhcmdldCl8fHRoaXMuZW50ZXIoYSksdGhpcy5vdmVyKGEpfSxldmVudEhhbmRsZXI6ZnVuY3Rpb24oYSl7aWYoIXRoaXMuaGFuZGxlZEV2ZW50cy5nZXQoYSkpe3ZhciBiPWEudHlwZSxjPXRoaXMuZXZlbnRNYXAmJnRoaXMuZXZlbnRNYXBbYl07YyYmYyhhKSx0aGlzLmhhbmRsZWRFdmVudHMuc2V0KGEsITApfX0sbGlzdGVuOmZ1bmN0aW9uKGEsYil7Yi5mb3JFYWNoKGZ1bmN0aW9uKGIpe3RoaXMuYWRkRXZlbnQoYSxiKX0sdGhpcyl9LHVubGlzdGVuOmZ1bmN0aW9uKGEsYil7Yi5mb3JFYWNoKGZ1bmN0aW9uKGIpe3RoaXMucmVtb3ZlRXZlbnQoYSxiKX0sdGhpcyl9LGFkZEV2ZW50OmZ1bmN0aW9uKGEsYil7YS5hZGRFdmVudExpc3RlbmVyKGIsdGhpcy5ib3VuZEhhbmRsZXIpfSxyZW1vdmVFdmVudDpmdW5jdGlvbihhLGIpe2EucmVtb3ZlRXZlbnRMaXN0ZW5lcihiLHRoaXMuYm91bmRIYW5kbGVyKX0sbWFrZUV2ZW50OmZ1bmN0aW9uKGEsYil7dmFyIGM9bmV3IFBvaW50ZXJFdmVudChhLGIpO3JldHVybiB0aGlzLnRhcmdldHMuc2V0KGMsdGhpcy50YXJnZXRzLmdldChiKXx8Yi50YXJnZXQpLGN9LGZpcmVFdmVudDpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMubWFrZUV2ZW50KGEsYik7cmV0dXJuIHRoaXMuZGlzcGF0Y2hFdmVudChjKX0sY2xvbmVFdmVudDpmdW5jdGlvbihhKXt2YXIgYj17fTtmb3IodmFyIGMgaW4gYSliW2NdPWFbY107cmV0dXJuIGJ9LGdldFRhcmdldDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5jYXB0dXJlSW5mbyYmdGhpcy5jYXB0dXJlSW5mby5pZD09PWEucG9pbnRlcklkP3RoaXMuY2FwdHVyZUluZm8udGFyZ2V0OnRoaXMudGFyZ2V0cy5nZXQoYSl9LHNldENhcHR1cmU6ZnVuY3Rpb24oYSxiKXt0aGlzLmNhcHR1cmVJbmZvJiZ0aGlzLnJlbGVhc2VDYXB0dXJlKHRoaXMuY2FwdHVyZUluZm8uaWQpLHRoaXMuY2FwdHVyZUluZm89e2lkOmEsdGFyZ2V0OmJ9O3ZhciBjPW5ldyBQb2ludGVyRXZlbnQoImdvdHBvaW50ZXJjYXB0dXJlIix7YnViYmxlczohMH0pO3RoaXMuaW1wbGljaXRSZWxlYXNlPXRoaXMucmVsZWFzZUNhcHR1cmUuYmluZCh0aGlzLGEpLGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoInBvaW50ZXJ1cCIsdGhpcy5pbXBsaWNpdFJlbGVhc2UpLGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoInBvaW50ZXJjYW5jZWwiLHRoaXMuaW1wbGljaXRSZWxlYXNlKSx0aGlzLnRhcmdldHMuc2V0KGMsYiksdGhpcy5hc3luY0Rpc3BhdGNoRXZlbnQoYyl9LHJlbGVhc2VDYXB0dXJlOmZ1bmN0aW9uKGEpe2lmKHRoaXMuY2FwdHVyZUluZm8mJnRoaXMuY2FwdHVyZUluZm8uaWQ9PT1hKXt2YXIgYj1uZXcgUG9pbnRlckV2ZW50KCJsb3N0cG9pbnRlcmNhcHR1cmUiLHtidWJibGVzOiEwfSksYz10aGlzLmNhcHR1cmVJbmZvLnRhcmdldDt0aGlzLmNhcHR1cmVJbmZvPW51bGwsZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigicG9pbnRlcnVwIix0aGlzLmltcGxpY2l0UmVsZWFzZSksZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigicG9pbnRlcmNhbmNlbCIsdGhpcy5pbXBsaWNpdFJlbGVhc2UpLHRoaXMudGFyZ2V0cy5zZXQoYixjKSx0aGlzLmFzeW5jRGlzcGF0Y2hFdmVudChiKX19LGRpc3BhdGNoRXZlbnQ6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5nZXRUYXJnZXQoYSk7cmV0dXJuIGI/Yi5kaXNwYXRjaEV2ZW50KGEpOnZvaWQgMH0sYXN5bmNEaXNwYXRjaEV2ZW50OmZ1bmN0aW9uKGEpe3NldFRpbWVvdXQodGhpcy5kaXNwYXRjaEV2ZW50LmJpbmQodGhpcyxhKSwwKX19O2IuYm91bmRIYW5kbGVyPWIuZXZlbnRIYW5kbGVyLmJpbmQoYiksYS5kaXNwYXRjaGVyPWIsYS5yZWdpc3Rlcj1iLnJlZ2lzdGVyLmJpbmQoYiksYS51bnJlZ2lzdGVyPWIudW5yZWdpc3Rlci5iaW5kKGIpfSh3aW5kb3cuUG9pbnRlckV2ZW50c1BvbHlmaWxsKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEsYixjLGQpe3RoaXMuYWRkQ2FsbGJhY2s9YS5iaW5kKGQpLHRoaXMucmVtb3ZlQ2FsbGJhY2s9Yi5iaW5kKGQpLHRoaXMuY2hhbmdlZENhbGxiYWNrPWMuYmluZChkKSxnJiYodGhpcy5vYnNlcnZlcj1uZXcgZyh0aGlzLm11dGF0aW9uV2F0Y2hlci5iaW5kKHRoaXMpKSl9dmFyIGM9QXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbC5iaW5kKEFycmF5LnByb3RvdHlwZS5mb3JFYWNoKSxkPUFycmF5LnByb3RvdHlwZS5tYXAuY2FsbC5iaW5kKEFycmF5LnByb3RvdHlwZS5tYXApLGU9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwuYmluZChBcnJheS5wcm90b3R5cGUuc2xpY2UpLGY9QXJyYXkucHJvdG90eXBlLmZpbHRlci5jYWxsLmJpbmQoQXJyYXkucHJvdG90eXBlLmZpbHRlciksZz13aW5kb3cuTXV0YXRpb25PYnNlcnZlcnx8d2luZG93LldlYktpdE11dGF0aW9uT2JzZXJ2ZXIsaD0iW3RvdWNoLWFjdGlvbl0iLGk9e3N1YnRyZWU6ITAsY2hpbGRMaXN0OiEwLGF0dHJpYnV0ZXM6ITAsYXR0cmlidXRlT2xkVmFsdWU6ITAsYXR0cmlidXRlRmlsdGVyOlsidG91Y2gtYWN0aW9uIl19O2IucHJvdG90eXBlPXt3YXRjaFN1YnRyZWU6ZnVuY3Rpb24oYil7YS50YXJnZXRGaW5kaW5nLmNhblRhcmdldChiKSYmdGhpcy5vYnNlcnZlci5vYnNlcnZlKGIsaSl9LGVuYWJsZU9uU3VidHJlZTpmdW5jdGlvbihhKXt0aGlzLndhdGNoU3VidHJlZShhKSxhPT09ZG9jdW1lbnQmJiJjb21wbGV0ZSIhPT1kb2N1bWVudC5yZWFkeVN0YXRlP3RoaXMuaW5zdGFsbE9uTG9hZCgpOnRoaXMuaW5zdGFsbE5ld1N1YnRyZWUoYSl9LGluc3RhbGxOZXdTdWJ0cmVlOmZ1bmN0aW9uKGEpe2ModGhpcy5maW5kRWxlbWVudHMoYSksdGhpcy5hZGRFbGVtZW50LHRoaXMpfSxmaW5kRWxlbWVudHM6ZnVuY3Rpb24oYSl7cmV0dXJuIGEucXVlcnlTZWxlY3RvckFsbD9hLnF1ZXJ5U2VsZWN0b3JBbGwoaCk6W119LHJlbW92ZUVsZW1lbnQ6ZnVuY3Rpb24oYSl7dGhpcy5yZW1vdmVDYWxsYmFjayhhKX0sYWRkRWxlbWVudDpmdW5jdGlvbihhKXt0aGlzLmFkZENhbGxiYWNrKGEpfSxlbGVtZW50Q2hhbmdlZDpmdW5jdGlvbihhLGIpe3RoaXMuY2hhbmdlZENhbGxiYWNrKGEsYil9LGNvbmNhdExpc3RzOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGEuY29uY2F0KGUoYikpfSxpbnN0YWxsT25Mb2FkOmZ1bmN0aW9uKCl7ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsdGhpcy5pbnN0YWxsTmV3U3VidHJlZS5iaW5kKHRoaXMsZG9jdW1lbnQpKX0saXNFbGVtZW50OmZ1bmN0aW9uKGEpe3JldHVybiBhLm5vZGVUeXBlPT09Tm9kZS5FTEVNRU5UX05PREV9LGZsYXR0ZW5NdXRhdGlvblRyZWU6ZnVuY3Rpb24oYSl7dmFyIGI9ZChhLHRoaXMuZmluZEVsZW1lbnRzLHRoaXMpO3JldHVybiBiLnB1c2goZihhLHRoaXMuaXNFbGVtZW50KSksYi5yZWR1Y2UodGhpcy5jb25jYXRMaXN0cyxbXSl9LG11dGF0aW9uV2F0Y2hlcjpmdW5jdGlvbihhKXthLmZvckVhY2godGhpcy5tdXRhdGlvbkhhbmRsZXIsdGhpcyl9LG11dGF0aW9uSGFuZGxlcjpmdW5jdGlvbihhKXtpZigiY2hpbGRMaXN0Ij09PWEudHlwZSl7dmFyIGI9dGhpcy5mbGF0dGVuTXV0YXRpb25UcmVlKGEuYWRkZWROb2Rlcyk7Yi5mb3JFYWNoKHRoaXMuYWRkRWxlbWVudCx0aGlzKTt2YXIgYz10aGlzLmZsYXR0ZW5NdXRhdGlvblRyZWUoYS5yZW1vdmVkTm9kZXMpO2MuZm9yRWFjaCh0aGlzLnJlbW92ZUVsZW1lbnQsdGhpcyl9ZWxzZSJhdHRyaWJ1dGVzIj09PWEudHlwZSYmdGhpcy5lbGVtZW50Q2hhbmdlZChhLnRhcmdldCxhLm9sZFZhbHVlKX19LGd8fChiLnByb3RvdHlwZS53YXRjaFN1YnRyZWU9ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oIlBvaW50ZXJFdmVudHNQb2x5ZmlsbDogTXV0YXRpb25PYnNlcnZlcnMgbm90IGZvdW5kLCB0b3VjaC1hY3Rpb24gd2lsbCBub3QgYmUgZHluYW1pY2FsbHkgZGV0ZWN0ZWQiKX0pLGEuSW5zdGFsbGVyPWJ9KHdpbmRvdy5Qb2ludGVyRXZlbnRzUG9seWZpbGwpLGZ1bmN0aW9uKGEpe3ZhciBiPWEuZGlzcGF0Y2hlcixjPWIucG9pbnRlcm1hcCxkPTI1LGU9e1BPSU5URVJfSUQ6MSxQT0lOVEVSX1RZUEU6Im1vdXNlIixldmVudHM6WyJtb3VzZWRvd24iLCJtb3VzZW1vdmUiLCJtb3VzZXVwIiwibW91c2VvdmVyIiwibW91c2VvdXQiXSxyZWdpc3RlcjpmdW5jdGlvbihhKXtiLmxpc3RlbihhLHRoaXMuZXZlbnRzKX0sdW5yZWdpc3RlcjpmdW5jdGlvbihhKXtiLnVubGlzdGVuKGEsdGhpcy5ldmVudHMpfSxsYXN0VG91Y2hlczpbXSxpc0V2ZW50U2ltdWxhdGVkRnJvbVRvdWNoOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYixjPXRoaXMubGFzdFRvdWNoZXMsZT1hLmNsaWVudFgsZj1hLmNsaWVudFksZz0wLGg9Yy5sZW5ndGg7aD5nJiYoYj1jW2ddKTtnKyspe3ZhciBpPU1hdGguYWJzKGUtYi54KSxqPU1hdGguYWJzKGYtYi55KTtpZihkPj1pJiZkPj1qKXJldHVybiEwfX0scHJlcGFyZUV2ZW50OmZ1bmN0aW9uKGEpe3ZhciBjPWIuY2xvbmVFdmVudChhKTtyZXR1cm4gYy5wb2ludGVySWQ9dGhpcy5QT0lOVEVSX0lELGMuaXNQcmltYXJ5PSEwLGMucG9pbnRlclR5cGU9dGhpcy5QT0lOVEVSX1RZUEUsY30sbW91c2Vkb3duOmZ1bmN0aW9uKGEpe2lmKCF0aGlzLmlzRXZlbnRTaW11bGF0ZWRGcm9tVG91Y2goYSkpe3ZhciBkPWMuaGFzKHRoaXMuUE9JTlRFUl9JRCk7ZCYmdGhpcy5jYW5jZWwoYSk7dmFyIGU9dGhpcy5wcmVwYXJlRXZlbnQoYSk7Yy5zZXQodGhpcy5QT0lOVEVSX0lELGEpLGIuZG93bihlKX19LG1vdXNlbW92ZTpmdW5jdGlvbihhKXtpZighdGhpcy5pc0V2ZW50U2ltdWxhdGVkRnJvbVRvdWNoKGEpKXt2YXIgYz10aGlzLnByZXBhcmVFdmVudChhKTtiLm1vdmUoYyl9fSxtb3VzZXVwOmZ1bmN0aW9uKGEpe2lmKCF0aGlzLmlzRXZlbnRTaW11bGF0ZWRGcm9tVG91Y2goYSkpe3ZhciBkPWMuZ2V0KHRoaXMuUE9JTlRFUl9JRCk7aWYoZCYmZC5idXR0b249PT1hLmJ1dHRvbil7dmFyIGU9dGhpcy5wcmVwYXJlRXZlbnQoYSk7Yi51cChlKSx0aGlzLmNsZWFudXBNb3VzZSgpfX19LG1vdXNlb3ZlcjpmdW5jdGlvbihhKXtpZighdGhpcy5pc0V2ZW50U2ltdWxhdGVkRnJvbVRvdWNoKGEpKXt2YXIgYz10aGlzLnByZXBhcmVFdmVudChhKTtiLmVudGVyT3ZlcihjKX19LG1vdXNlb3V0OmZ1bmN0aW9uKGEpe2lmKCF0aGlzLmlzRXZlbnRTaW11bGF0ZWRGcm9tVG91Y2goYSkpe3ZhciBjPXRoaXMucHJlcGFyZUV2ZW50KGEpO2IubGVhdmVPdXQoYyl9fSxjYW5jZWw6ZnVuY3Rpb24oYSl7dmFyIGM9dGhpcy5wcmVwYXJlRXZlbnQoYSk7Yi5jYW5jZWwoYyksdGhpcy5jbGVhbnVwTW91c2UoKX0sY2xlYW51cE1vdXNlOmZ1bmN0aW9uKCl7Yy5kZWxldGUodGhpcy5QT0lOVEVSX0lEKX19O2EubW91c2VFdmVudHM9ZX0od2luZG93LlBvaW50ZXJFdmVudHNQb2x5ZmlsbCksZnVuY3Rpb24oYSl7dmFyIGIsYz1hLmRpc3BhdGNoZXIsZD1hLmZpbmRUYXJnZXQsZT1hLnRhcmdldEZpbmRpbmcuYWxsU2hhZG93cy5iaW5kKGEudGFyZ2V0RmluZGluZyksZj1jLnBvaW50ZXJtYXAsZz1BcnJheS5wcm90b3R5cGUubWFwLmNhbGwuYmluZChBcnJheS5wcm90b3R5cGUubWFwKSxoPTI1MDAsaT0idG91Y2gtYWN0aW9uIixqPSJzdHJpbmciPT10eXBlb2YgZG9jdW1lbnQuaGVhZC5zdHlsZS50b3VjaEFjdGlvbixrPXtzY3JvbGxUeXBlOm5ldyBhLlNpZGVUYWJsZSxldmVudHM6WyJ0b3VjaHN0YXJ0IiwidG91Y2htb3ZlIiwidG91Y2hlbmQiLCJ0b3VjaGNhbmNlbCJdLHJlZ2lzdGVyOmZ1bmN0aW9uKGEpe2o/Yy5saXN0ZW4oYSx0aGlzLmV2ZW50cyk6Yi5lbmFibGVPblN1YnRyZWUoYSl9LHVucmVnaXN0ZXI6ZnVuY3Rpb24oYSl7aiYmYy51bmxpc3RlbihhLHRoaXMuZXZlbnRzKX0sZWxlbWVudEFkZGVkOmZ1bmN0aW9uKGEpe3ZhciBiPWEuZ2V0QXR0cmlidXRlKGkpLGQ9dGhpcy50b3VjaEFjdGlvblRvU2Nyb2xsVHlwZShiKTtkJiYodGhpcy5zY3JvbGxUeXBlLnNldChhLGQpLGMubGlzdGVuKGEsdGhpcy5ldmVudHMpLGUoYSkuZm9yRWFjaChmdW5jdGlvbihhKXt0aGlzLnNjcm9sbFR5cGUuc2V0KGEsZCksYy5saXN0ZW4oYSx0aGlzLmV2ZW50cyl9LHRoaXMpKX0sZWxlbWVudFJlbW92ZWQ6ZnVuY3Rpb24oYSl7dGhpcy5zY3JvbGxUeXBlLmRlbGV0ZShhKSxjLnVubGlzdGVuKGEsdGhpcy5ldmVudHMpLGUoYSkuZm9yRWFjaChmdW5jdGlvbihhKXt0aGlzLnNjcm9sbFR5cGUuZGVsZXRlKGEpLGMudW5saXN0ZW4oYSx0aGlzLmV2ZW50cyl9LHRoaXMpfSxlbGVtZW50Q2hhbmdlZDpmdW5jdGlvbihhLGIpe3ZhciBjPWEuZ2V0QXR0cmlidXRlKGkpLGQ9dGhpcy50b3VjaEFjdGlvbnRvU2Nyb2xsVHlwZShjKSxmPXRoaXMudG91Y2hBY3Rpb25Ub1Njcm9sbFR5cGUoYik7ZCYmZj8odGhpcy5zY3JvbGxUeXBlLnNldChhLGQpLGUoYSkuZm9yRWFjaChmdW5jdGlvbihhKXt0aGlzLnNjcm9sbFR5cGUuc2V0KGEsZCl9LHRoaXMpKTpmP3RoaXMuZWxlbWVudFJlbW92ZWQoYSk6ZCYmdGhpcy5lbGVtZW50QWRkZWQoYSl9LHNjcm9sbFR5cGVzOntFTUlUVEVSOiJub25lIixYU0NST0xMRVI6InBhbi14IixZU0NST0xMRVI6InBhbi15IixTQ1JPTExFUjovXig/OnBhbi14IHBhbi15KXwoPzpwYW4teSBwYW4teCl8YXV0byQvfSx0b3VjaEFjdGlvblRvU2Nyb2xsVHlwZTpmdW5jdGlvbihhKXt2YXIgYj1hLGM9dGhpcy5zY3JvbGxUeXBlcztyZXR1cm4ibm9uZSI9PT1iPyJub25lIjpiPT09Yy5YU0NST0xMRVI/IlgiOmI9PT1jLllTQ1JPTExFUj8iWSI6Yy5TQ1JPTExFUi5leGVjKGIpPyJYWSI6dm9pZCAwfSxQT0lOVEVSX1RZUEU6InRvdWNoIixmaXJzdFRvdWNoOm51bGwsaXNQcmltYXJ5VG91Y2g6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZmlyc3RUb3VjaD09PWEuaWRlbnRpZmllcn0sc2V0UHJpbWFyeVRvdWNoOmZ1bmN0aW9uKGEpe251bGw9PT10aGlzLmZpcnN0VG91Y2gmJih0aGlzLmZpcnN0VG91Y2g9YS5pZGVudGlmaWVyLHRoaXMuZmlyc3RYWT17WDphLmNsaWVudFgsWTphLmNsaWVudFl9LHRoaXMuc2Nyb2xsaW5nPSExKX0scmVtb3ZlUHJpbWFyeVRvdWNoOmZ1bmN0aW9uKGEpe3RoaXMuaXNQcmltYXJ5VG91Y2goYSkmJih0aGlzLmZpcnN0VG91Y2g9bnVsbCx0aGlzLmZpcnN0WFk9bnVsbCl9LHRvdWNoVG9Qb2ludGVyOmZ1bmN0aW9uKGEpe3ZhciBiPWMuY2xvbmVFdmVudChhKTtyZXR1cm4gYi5wb2ludGVySWQ9YS5pZGVudGlmaWVyKzIsYi50YXJnZXQ9ZChiKSxiLmJ1YmJsZXM9ITAsYi5jYW5jZWxhYmxlPSEwLGIuYnV0dG9uPTAsYi5idXR0b25zPTEsYi53aWR0aD1hLndlYmtpdFJhZGl1c1h8fGEucmFkaXVzWHx8MCxiLmhlaWdodD1hLndlYmtpdFJhZGl1c1l8fGEucmFkaXVzWXx8MCxiLnByZXNzdXJlPWEud2Via2l0Rm9yY2V8fGEuZm9yY2V8fC41LGIuaXNQcmltYXJ5PXRoaXMuaXNQcmltYXJ5VG91Y2goYSksYi5wb2ludGVyVHlwZT10aGlzLlBPSU5URVJfVFlQRSxifSxwcm9jZXNzVG91Y2hlczpmdW5jdGlvbihhLGIpe3ZhciBjPWEuY2hhbmdlZFRvdWNoZXMsZD1nKGMsdGhpcy50b3VjaFRvUG9pbnRlcix0aGlzKTtkLmZvckVhY2goYix0aGlzKX0sc2hvdWxkU2Nyb2xsOmZ1bmN0aW9uKGEpe2lmKHRoaXMuZmlyc3RYWSl7dmFyIGIsYz10aGlzLnNjcm9sbFR5cGUuZ2V0KGEuY3VycmVudFRhcmdldCk7aWYoIm5vbmUiPT09YyliPSExO2Vsc2UgaWYoIlhZIj09PWMpYj0hMDtlbHNle3ZhciBkPWEuY2hhbmdlZFRvdWNoZXNbMF0sZT1jLGY9IlkiPT09Yz8iWCI6IlkiLGc9TWF0aC5hYnMoZFsiY2xpZW50IitlXS10aGlzLmZpcnN0WFlbZV0pLGg9TWF0aC5hYnMoZFsiY2xpZW50IitmXS10aGlzLmZpcnN0WFlbZl0pO2I9Zz49aH1yZXR1cm4gdGhpcy5maXJzdFhZPW51bGwsYn19LGZpbmRUb3VjaDpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYyxkPTAsZT1hLmxlbmd0aDtlPmQmJihjPWFbZF0pO2QrKylpZihjLmlkZW50aWZpZXI9PT1iKXJldHVybiEwfSx2YWN1dW1Ub3VjaGVzOmZ1bmN0aW9uKGEpe3ZhciBiPWEudG91Y2hlcztpZihmLnNpemU+PWIubGVuZ3RoKXt2YXIgYz1bXTtmLmZvckVhY2goZnVuY3Rpb24oYSxkKXtpZigxIT09YSYmIXRoaXMuZmluZFRvdWNoKGIsYS0yKSl7dmFyIGU9ZC5vdXQ7Yy5wdXNoKHRoaXMudG91Y2hUb1BvaW50ZXIoZSkpfX0sdGhpcyksYy5mb3JFYWNoKHRoaXMuY2FuY2VsT3V0LHRoaXMpfX0sdG91Y2hzdGFydDpmdW5jdGlvbihhKXt0aGlzLnZhY3V1bVRvdWNoZXMoYSksdGhpcy5zZXRQcmltYXJ5VG91Y2goYS5jaGFuZ2VkVG91Y2hlc1swXSksdGhpcy5kZWR1cFN5bnRoTW91c2UoYSksdGhpcy5zY3JvbGxpbmd8fHRoaXMucHJvY2Vzc1RvdWNoZXMoYSx0aGlzLm92ZXJEb3duKX0sb3ZlckRvd246ZnVuY3Rpb24oYSl7Zi5zZXQoYS5wb2ludGVySWQse3RhcmdldDphLnRhcmdldCxvdXQ6YSxvdXRUYXJnZXQ6YS50YXJnZXR9KSxjLm92ZXIoYSksYy5kb3duKGEpfSx0b3VjaG1vdmU6ZnVuY3Rpb24oYSl7dGhpcy5zY3JvbGxpbmd8fCh0aGlzLnNob3VsZFNjcm9sbChhKT8odGhpcy5zY3JvbGxpbmc9ITAsdGhpcy50b3VjaGNhbmNlbChhKSk6KGEucHJldmVudERlZmF1bHQoKSx0aGlzLnByb2Nlc3NUb3VjaGVzKGEsdGhpcy5tb3ZlT3Zlck91dCkpKX0sbW92ZU92ZXJPdXQ6ZnVuY3Rpb24oYSl7dmFyIGI9YSxkPWYuZ2V0KGIucG9pbnRlcklkKTtpZihkKXt2YXIgZT1kLm91dCxnPWQub3V0VGFyZ2V0O2MubW92ZShiKSxlJiZnIT09Yi50YXJnZXQmJihlLnJlbGF0ZWRUYXJnZXQ9Yi50YXJnZXQsYi5yZWxhdGVkVGFyZ2V0PWcsZS50YXJnZXQ9ZyxiLnRhcmdldD8oYy5sZWF2ZU91dChlKSxjLmVudGVyT3ZlcihiKSk6KGIudGFyZ2V0PWcsYi5yZWxhdGVkVGFyZ2V0PW51bGwsdGhpcy5jYW5jZWxPdXQoYikpKSxkLm91dD1iLGQub3V0VGFyZ2V0PWIudGFyZ2V0fX0sdG91Y2hlbmQ6ZnVuY3Rpb24oYSl7dGhpcy5kZWR1cFN5bnRoTW91c2UoYSksdGhpcy5wcm9jZXNzVG91Y2hlcyhhLHRoaXMudXBPdXQpfSx1cE91dDpmdW5jdGlvbihhKXt0aGlzLnNjcm9sbGluZ3x8KGMudXAoYSksYy5vdXQoYSkpLHRoaXMuY2xlYW5VcFBvaW50ZXIoYSl9LHRvdWNoY2FuY2VsOmZ1bmN0aW9uKGEpe3RoaXMucHJvY2Vzc1RvdWNoZXMoYSx0aGlzLmNhbmNlbE91dCl9LGNhbmNlbE91dDpmdW5jdGlvbihhKXtjLmNhbmNlbChhKSxjLm91dChhKSx0aGlzLmNsZWFuVXBQb2ludGVyKGEpfSxjbGVhblVwUG9pbnRlcjpmdW5jdGlvbihhKXtmLmRlbGV0ZShhLnBvaW50ZXJJZCksdGhpcy5yZW1vdmVQcmltYXJ5VG91Y2goYSl9LGRlZHVwU3ludGhNb3VzZTpmdW5jdGlvbihiKXt2YXIgYz1hLm1vdXNlRXZlbnRzLmxhc3RUb3VjaGVzLGQ9Yi5jaGFuZ2VkVG91Y2hlc1swXTtpZih0aGlzLmlzUHJpbWFyeVRvdWNoKGQpKXt2YXIgZT17eDpkLmNsaWVudFgseTpkLmNsaWVudFl9O2MucHVzaChlKTt2YXIgZj1mdW5jdGlvbihhLGIpe3ZhciBjPWEuaW5kZXhPZihiKTtjPi0xJiZhLnNwbGljZShjLDEpfS5iaW5kKG51bGwsYyxlKTtzZXRUaW1lb3V0KGYsaCl9fX07anx8KGI9bmV3IGEuSW5zdGFsbGVyKGsuZWxlbWVudEFkZGVkLGsuZWxlbWVudFJlbW92ZWQsay5lbGVtZW50Q2hhbmdlZCxrKSksYS50b3VjaEV2ZW50cz1rfSh3aW5kb3cuUG9pbnRlckV2ZW50c1BvbHlmaWxsKSxmdW5jdGlvbihhKXt2YXIgYj1hLmRpc3BhdGNoZXIsYz1iLnBvaW50ZXJtYXAsZD13aW5kb3cuTVNQb2ludGVyRXZlbnQmJiJudW1iZXIiPT10eXBlb2Ygd2luZG93Lk1TUG9pbnRlckV2ZW50Lk1TUE9JTlRFUl9UWVBFX01PVVNFLGU9e2V2ZW50czpbIk1TUG9pbnRlckRvd24iLCJNU1BvaW50ZXJNb3ZlIiwiTVNQb2ludGVyVXAiLCJNU1BvaW50ZXJPdXQiLCJNU1BvaW50ZXJPdmVyIiwiTVNQb2ludGVyQ2FuY2VsIiwiTVNHb3RQb2ludGVyQ2FwdHVyZSIsIk1TTG9zdFBvaW50ZXJDYXB0dXJlIl0scmVnaXN0ZXI6ZnVuY3Rpb24oYSl7Yi5saXN0ZW4oYSx0aGlzLmV2ZW50cyl9LHVucmVnaXN0ZXI6ZnVuY3Rpb24oYSl7Yi51bmxpc3RlbihhLHRoaXMuZXZlbnRzKX0sUE9JTlRFUl9UWVBFUzpbIiIsInVuYXZhaWxhYmxlIiwidG91Y2giLCJwZW4iLCJtb3VzZSJdLHByZXBhcmVFdmVudDpmdW5jdGlvbihhKXt2YXIgYz1hO3JldHVybiBkJiYoYz1iLmNsb25lRXZlbnQoYSksYy5wb2ludGVyVHlwZT10aGlzLlBPSU5URVJfVFlQRVNbYS5wb2ludGVyVHlwZV0pLGN9LGNsZWFudXA6ZnVuY3Rpb24oYSl7Yy5kZWxldGUoYSl9LE1TUG9pbnRlckRvd246ZnVuY3Rpb24oYSl7Yy5zZXQoYS5wb2ludGVySWQsYSk7dmFyIGQ9dGhpcy5wcmVwYXJlRXZlbnQoYSk7Yi5kb3duKGQpfSxNU1BvaW50ZXJNb3ZlOmZ1bmN0aW9uKGEpe3ZhciBjPXRoaXMucHJlcGFyZUV2ZW50KGEpO2IubW92ZShjKX0sTVNQb2ludGVyVXA6ZnVuY3Rpb24oYSl7dmFyIGM9dGhpcy5wcmVwYXJlRXZlbnQoYSk7Yi51cChjKSx0aGlzLmNsZWFudXAoYS5wb2ludGVySWQpfSxNU1BvaW50ZXJPdXQ6ZnVuY3Rpb24oYSl7dmFyIGM9dGhpcy5wcmVwYXJlRXZlbnQoYSk7Yi5sZWF2ZU91dChjKX0sTVNQb2ludGVyT3ZlcjpmdW5jdGlvbihhKXt2YXIgYz10aGlzLnByZXBhcmVFdmVudChhKTtiLmVudGVyT3ZlcihjKX0sTVNQb2ludGVyQ2FuY2VsOmZ1bmN0aW9uKGEpe3ZhciBjPXRoaXMucHJlcGFyZUV2ZW50KGEpO2IuY2FuY2VsKGMpLHRoaXMuY2xlYW51cChhLnBvaW50ZXJJZCl9LE1TTG9zdFBvaW50ZXJDYXB0dXJlOmZ1bmN0aW9uKGEpe3ZhciBjPWIubWFrZUV2ZW50KCJsb3N0cG9pbnRlcmNhcHR1cmUiLGEpO2IuZGlzcGF0Y2hFdmVudChjKX0sTVNHb3RQb2ludGVyQ2FwdHVyZTpmdW5jdGlvbihhKXt2YXIgYz1iLm1ha2VFdmVudCgiZ290cG9pbnRlcmNhcHR1cmUiLGEpO2IuZGlzcGF0Y2hFdmVudChjKX19O2EubXNFdmVudHM9ZX0od2luZG93LlBvaW50ZXJFdmVudHNQb2x5ZmlsbCksZnVuY3Rpb24oYSl7dmFyIGI9YS5kaXNwYXRjaGVyO2lmKHZvaWQgMD09PXdpbmRvdy5uYXZpZ2F0b3IucG9pbnRlckVuYWJsZWQpe2lmKE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW5kb3cubmF2aWdhdG9yLCJwb2ludGVyRW5hYmxlZCIse3ZhbHVlOiEwLGVudW1lcmFibGU6ITB9KSx3aW5kb3cubmF2aWdhdG9yLm1zUG9pbnRlckVuYWJsZWQpe3ZhciBjPXdpbmRvdy5uYXZpZ2F0b3IubXNNYXhUb3VjaFBvaW50cztPYmplY3QuZGVmaW5lUHJvcGVydHkod2luZG93Lm5hdmlnYXRvciwibWF4VG91Y2hQb2ludHMiLHt2YWx1ZTpjLGVudW1lcmFibGU6ITB9KSxiLnJlZ2lzdGVyU291cmNlKCJtcyIsYS5tc0V2ZW50cyl9ZWxzZSBiLnJlZ2lzdGVyU291cmNlKCJtb3VzZSIsYS5tb3VzZUV2ZW50cyksdm9pZCAwIT09d2luZG93Lm9udG91Y2hzdGFydCYmYi5yZWdpc3RlclNvdXJjZSgidG91Y2giLGEudG91Y2hFdmVudHMpO2IucmVnaXN0ZXIoZG9jdW1lbnQpfX0od2luZG93LlBvaW50ZXJFdmVudHNQb2x5ZmlsbCksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhKXtpZighZS5wb2ludGVybWFwLmhhcyhhKSl0aHJvdyBuZXcgRXJyb3IoIkludmFsaWRQb2ludGVySWQiKX12YXIgYyxkLGU9YS5kaXNwYXRjaGVyLGY9d2luZG93Lm5hdmlnYXRvcjtmLm1zUG9pbnRlckVuYWJsZWQ/KGM9ZnVuY3Rpb24oYSl7YihhKSx0aGlzLm1zU2V0UG9pbnRlckNhcHR1cmUoYSl9LGQ9ZnVuY3Rpb24oYSl7YihhKSx0aGlzLm1zUmVsZWFzZVBvaW50ZXJDYXB0dXJlKGEpfSk6KGM9ZnVuY3Rpb24oYSl7YihhKSxlLnNldENhcHR1cmUoYSx0aGlzKX0sZD1mdW5jdGlvbihhKXtiKGEpLGUucmVsZWFzZUNhcHR1cmUoYSx0aGlzKX0pLEVsZW1lbnQucHJvdG90eXBlLnNldFBvaW50ZXJDYXB0dXJlfHxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhFbGVtZW50LnByb3RvdHlwZSx7c2V0UG9pbnRlckNhcHR1cmU6e3ZhbHVlOmN9LHJlbGVhc2VQb2ludGVyQ2FwdHVyZTp7dmFsdWU6ZH19KX0od2luZG93LlBvaW50ZXJFdmVudHNQb2x5ZmlsbCksUG9pbnRlckdlc3R1cmVFdmVudC5wcm90b3R5cGUucHJldmVudFRhcD1mdW5jdGlvbigpe3RoaXMudGFwUHJldmVudGVkPSEwfSxmdW5jdGlvbihhKXthPWF8fHt9LGEudXRpbHM9e0xDQTp7ZmluZDpmdW5jdGlvbihhLGIpe2lmKGE9PT1iKXJldHVybiBhO2lmKGEuY29udGFpbnMpe2lmKGEuY29udGFpbnMoYikpcmV0dXJuIGE7aWYoYi5jb250YWlucyhhKSlyZXR1cm4gYn12YXIgYz10aGlzLmRlcHRoKGEpLGQ9dGhpcy5kZXB0aChiKSxlPWMtZDtmb3IoZT4wP2E9dGhpcy53YWxrKGEsZSk6Yj10aGlzLndhbGsoYiwtZSk7YSYmYiYmYSE9PWI7KWE9dGhpcy53YWxrKGEsMSksYj10aGlzLndhbGsoYiwxKTtyZXR1cm4gYX0sd2FsazpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz0wO2I+YztjKyspYT1hLnBhcmVudE5vZGU7cmV0dXJuIGF9LGRlcHRoOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0wO2E7KWIrKyxhPWEucGFyZW50Tm9kZTtyZXR1cm4gYn19fSxhLmZpbmRMQ0E9ZnVuY3Rpb24oYixjKXtyZXR1cm4gYS51dGlscy5MQ0EuZmluZChiLGMpfSx3aW5kb3cuUG9pbnRlckdlc3R1cmVzPWF9KHdpbmRvdy5Qb2ludGVyR2VzdHVyZXMpLGZ1bmN0aW9uKGEpe3ZhciBiO2lmKCJ1bmRlZmluZWQiIT10eXBlb2YgV2Vha01hcCYmbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCJGaXJlZm94LyIpPDApYj1XZWFrTWFwO2Vsc2V7dmFyIGM9T2JqZWN0LmRlZmluZVByb3BlcnR5LGQ9T2JqZWN0Lmhhc093blByb3BlcnR5LGU9KG5ldyBEYXRlKS5nZXRUaW1lKCklMWU5O2I9ZnVuY3Rpb24oKXt0aGlzLm5hbWU9Il9fc3QiKygxZTkqTWF0aC5yYW5kb20oKT4+PjApKyhlKysgKyJfXyIpfSxiLnByb3RvdHlwZT17c2V0OmZ1bmN0aW9uKGEsYil7YyhhLHRoaXMubmFtZSx7dmFsdWU6Yix3cml0YWJsZTohMH0pfSxnZXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGQuY2FsbChhLHRoaXMubmFtZSk/YVt0aGlzLm5hbWVdOnZvaWQgMH0sImRlbGV0ZSI6ZnVuY3Rpb24oYSl7dGhpcy5zZXQoYSx2b2lkIDApfX19YS5TaWRlVGFibGU9Yn0od2luZG93LlBvaW50ZXJHZXN0dXJlcyksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYigpe3RoaXMuaWRzPVtdLHRoaXMucG9pbnRlcnM9W119Yi5wcm90b3R5cGU9e3NldDpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuaWRzLmluZGV4T2YoYSk7Yz4tMT90aGlzLnBvaW50ZXJzW2NdPWI6KHRoaXMuaWRzLnB1c2goYSksdGhpcy5wb2ludGVycy5wdXNoKGIpKX0saGFzOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmlkcy5pbmRleE9mKGEpPi0xfSwiZGVsZXRlIjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmlkcy5pbmRleE9mKGEpO2I+LTEmJih0aGlzLmlkcy5zcGxpY2UoYiwxKSx0aGlzLnBvaW50ZXJzLnNwbGljZShiLDEpKX0sZ2V0OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuaWRzLmluZGV4T2YoYSk7cmV0dXJuIHRoaXMucG9pbnRlcnNbYl19LGdldCBzaXplKCl7cmV0dXJuIHRoaXMucG9pbnRlcnMubGVuZ3RofSxjbGVhcjpmdW5jdGlvbigpe3RoaXMuaWRzLmxlbmd0aD0wLHRoaXMucG9pbnRlcnMubGVuZ3RoPTB9fSx3aW5kb3cuTWFwJiYoYj13aW5kb3cuTWFwKSxhLlBvaW50ZXJNYXA9Yn0od2luZG93LlBvaW50ZXJHZXN0dXJlcyksZnVuY3Rpb24oYSl7dmFyIGI9e2hhbmRsZWRFdmVudHM6bmV3IGEuU2lkZVRhYmxlLHRhcmdldHM6bmV3IGEuU2lkZVRhYmxlLGhhbmRsZXJzOnt9LHJlY29nbml6ZXJzOnt9LGV2ZW50czpbInBvaW50ZXJkb3duIiwicG9pbnRlcm1vdmUiLCJwb2ludGVydXAiLCJwb2ludGVyb3ZlciIsInBvaW50ZXJvdXQiLCJwb2ludGVyY2FuY2VsIl0scmVnaXN0ZXJSZWNvZ25pemVyOmZ1bmN0aW9uKGEsYil7dmFyIGM9Yjt0aGlzLnJlY29nbml6ZXJzW2FdPWMsdGhpcy5ldmVudHMuZm9yRWFjaChmdW5jdGlvbihhKXtpZihjW2FdKXt2YXIgYj1jW2FdLmJpbmQoYyk7dGhpcy5hZGRIYW5kbGVyKGEsYil9fSx0aGlzKX0sYWRkSGFuZGxlcjpmdW5jdGlvbihhLGIpe3ZhciBjPWE7dGhpcy5oYW5kbGVyc1tjXXx8KHRoaXMuaGFuZGxlcnNbY109W10pLHRoaXMuaGFuZGxlcnNbY10ucHVzaChiKX0scmVnaXN0ZXJUYXJnZXQ6ZnVuY3Rpb24oYSl7dGhpcy5saXN0ZW4odGhpcy5ldmVudHMsYSl9LHVucmVnaXN0ZXJUYXJnZXQ6ZnVuY3Rpb24oYSl7dGhpcy51bmxpc3Rlbih0aGlzLmV2ZW50cyxhKX0sZXZlbnRIYW5kbGVyOmZ1bmN0aW9uKGEpe2lmKCF0aGlzLmhhbmRsZWRFdmVudHMuZ2V0KGEpKXt2YXIgYixjPWEudHlwZTsoYj10aGlzLmhhbmRsZXJzW2NdKSYmdGhpcy5tYWtlUXVldWUoYixhKSx0aGlzLmhhbmRsZWRFdmVudHMuc2V0KGEsITApfX0sbWFrZVF1ZXVlOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5jbG9uZUV2ZW50KGIpO3NldFRpbWVvdXQodGhpcy5ydW5RdWV1ZS5iaW5kKHRoaXMsYSxjKSwwKX0scnVuUXVldWU6ZnVuY3Rpb24oYSxiKXt0aGlzLmN1cnJlbnRQb2ludGVySWQ9Yi5wb2ludGVySWQ7Zm9yKHZhciBjLGQ9MCxlPWEubGVuZ3RoO2U+ZCYmKGM9YVtkXSk7ZCsrKWMoYik7dGhpcy5jdXJyZW50UG9pbnRlcklkPTB9LGxpc3RlbjpmdW5jdGlvbihhLGIpe2EuZm9yRWFjaChmdW5jdGlvbihhKXt0aGlzLmFkZEV2ZW50KGEsdGhpcy5ib3VuZEhhbmRsZXIsITEsYil9LHRoaXMpfSx1bmxpc3RlbjpmdW5jdGlvbihhKXthLmZvckVhY2goZnVuY3Rpb24oYSl7dGhpcy5yZW1vdmVFdmVudChhLHRoaXMuYm91bmRIYW5kbGVyLCExLGluVGFyZ2V0KX0sdGhpcyl9LGFkZEV2ZW50OmZ1bmN0aW9uKGEsYixjLGQpe2QuYWRkRXZlbnRMaXN0ZW5lcihhLGIsYyl9LHJlbW92ZUV2ZW50OmZ1bmN0aW9uKGEsYixjLGQpe2QucmVtb3ZlRXZlbnRMaXN0ZW5lcihhLGIsYyl9LG1ha2VFdmVudDpmdW5jdGlvbihhLGIpe3JldHVybiBuZXcgUG9pbnRlckdlc3R1cmVFdmVudChhLGIpfSxjbG9uZUV2ZW50OmZ1bmN0aW9uKGEpe3ZhciBiPXt9O2Zvcih2YXIgYyBpbiBhKWJbY109YVtjXTtyZXR1cm4gYn0sZGlzcGF0Y2hFdmVudDpmdW5jdGlvbihhLGIpe3ZhciBjPWJ8fHRoaXMudGFyZ2V0cy5nZXQoYSk7YyYmKGMuZGlzcGF0Y2hFdmVudChhKSxhLnRhcFByZXZlbnRlZCYmdGhpcy5wcmV2ZW50VGFwKHRoaXMuY3VycmVudFBvaW50ZXJJZCkpfSxhc3luY0Rpc3BhdGNoRXZlbnQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz1mdW5jdGlvbigpe3RoaXMuZGlzcGF0Y2hFdmVudChhLGIpfS5iaW5kKHRoaXMpO3NldFRpbWVvdXQoYywwKX0scHJldmVudFRhcDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLnJlY29nbml6ZXJzLnRhcDtiJiZiLnByZXZlbnRUYXAoYSl9fTtiLmJvdW5kSGFuZGxlcj1iLmV2ZW50SGFuZGxlci5iaW5kKGIpLGEuZGlzcGF0Y2hlcj1iLGEucmVnaXN0ZXI9ZnVuY3Rpb24oYil7dmFyIGM9d2luZG93LlBvaW50ZXJFdmVudHNQb2x5ZmlsbDtjJiZjLnJlZ2lzdGVyKGIpLGEuZGlzcGF0Y2hlci5yZWdpc3RlclRhcmdldChiKX0sYi5yZWdpc3RlclRhcmdldChkb2N1bWVudCl9KHdpbmRvdy5Qb2ludGVyR2VzdHVyZXMpLGZ1bmN0aW9uKGEpe3ZhciBiPWEuZGlzcGF0Y2hlcixjPXtIT0xEX0RFTEFZOjIwMCxXSUdHTEVfVEhSRVNIT0xEOjE2LGV2ZW50czpbInBvaW50ZXJkb3duIiwicG9pbnRlcm1vdmUiLCJwb2ludGVydXAiLCJwb2ludGVyY2FuY2VsIl0saGVsZFBvaW50ZXI6bnVsbCxob2xkSm9iOm51bGwscHVsc2U6ZnVuY3Rpb24oKXt2YXIgYT1EYXRlLm5vdygpLXRoaXMuaGVsZFBvaW50ZXIudGltZVN0YW1wLGI9dGhpcy5oZWxkPyJob2xkcHVsc2UiOiJob2xkIjt0aGlzLmZpcmVIb2xkKGIsYSksdGhpcy5oZWxkPSEwfSxjYW5jZWw6ZnVuY3Rpb24oKXtjbGVhckludGVydmFsKHRoaXMuaG9sZEpvYiksdGhpcy5oZWxkJiZ0aGlzLmZpcmVIb2xkKCJyZWxlYXNlIiksdGhpcy5oZWxkPSExLHRoaXMuaGVsZFBvaW50ZXI9bnVsbCx0aGlzLnRhcmdldD1udWxsLHRoaXMuaG9sZEpvYj1udWxsfSxwb2ludGVyZG93bjpmdW5jdGlvbihhKXthLmlzUHJpbWFyeSYmIXRoaXMuaGVsZFBvaW50ZXImJih0aGlzLmhlbGRQb2ludGVyPWEsdGhpcy50YXJnZXQ9YS50YXJnZXQsdGhpcy5ob2xkSm9iPXNldEludGVydmFsKHRoaXMucHVsc2UuYmluZCh0aGlzKSx0aGlzLkhPTERfREVMQVkpKX0scG9pbnRlcnVwOmZ1bmN0aW9uKGEpe3RoaXMuaGVsZFBvaW50ZXImJnRoaXMuaGVsZFBvaW50ZXIucG9pbnRlcklkPT09YS5wb2ludGVySWQmJnRoaXMuY2FuY2VsKCl9LHBvaW50ZXJjYW5jZWw6ZnVuY3Rpb24oKXt0aGlzLmNhbmNlbCgpfSxwb2ludGVybW92ZTpmdW5jdGlvbihhKXtpZih0aGlzLmhlbGRQb2ludGVyJiZ0aGlzLmhlbGRQb2ludGVyLnBvaW50ZXJJZD09PWEucG9pbnRlcklkKXt2YXIgYj1hLmNsaWVudFgtdGhpcy5oZWxkUG9pbnRlci5jbGllbnRYLGM9YS5jbGllbnRZLXRoaXMuaGVsZFBvaW50ZXIuY2xpZW50WTtiKmIrYypjPnRoaXMuV0lHR0xFX1RIUkVTSE9MRCYmdGhpcy5jYW5jZWwoKX19LGZpcmVIb2xkOmZ1bmN0aW9uKGEsYyl7dmFyIGQ9e3BvaW50ZXJUeXBlOnRoaXMuaGVsZFBvaW50ZXIucG9pbnRlclR5cGV9O2MmJihkLmhvbGRUaW1lPWMpO3ZhciBlPWIubWFrZUV2ZW50KGEsZCk7Yi5kaXNwYXRjaEV2ZW50KGUsdGhpcy50YXJnZXQpLGUudGFwUHJldmVudGVkJiZiLnByZXZlbnRUYXAodGhpcy5oZWxkUG9pbnRlci5wb2ludGVySWQpfX07Yi5yZWdpc3RlclJlY29nbml6ZXIoImhvbGQiLGMpfSh3aW5kb3cuUG9pbnRlckdlc3R1cmVzKSxmdW5jdGlvbihhKXt2YXIgYj1hLmRpc3BhdGNoZXIsYz1uZXcgYS5Qb2ludGVyTWFwLGQ9e2V2ZW50czpbInBvaW50ZXJkb3duIiwicG9pbnRlcm1vdmUiLCJwb2ludGVydXAiLCJwb2ludGVyY2FuY2VsIl0sV0lHR0xFX1RIUkVTSE9MRDo0LGNsYW1wRGlyOmZ1bmN0aW9uKGEpe3JldHVybiBhPjA/MTotMX0sY2FsY1Bvc2l0aW9uRGVsdGE6ZnVuY3Rpb24oYSxiKXt2YXIgYz0wLGQ9MDtyZXR1cm4gYSYmYiYmKGM9Yi5wYWdlWC1hLnBhZ2VYLGQ9Yi5wYWdlWS1hLnBhZ2VZKSx7eDpjLHk6ZH19LGZpcmVUcmFjazpmdW5jdGlvbihhLGMsZCl7dmFyIGU9ZCxmPXRoaXMuY2FsY1Bvc2l0aW9uRGVsdGEoZS5kb3duRXZlbnQsYyksZz10aGlzLmNhbGNQb3NpdGlvbkRlbHRhKGUubGFzdE1vdmVFdmVudCxjKTtnLngmJihlLnhEaXJlY3Rpb249dGhpcy5jbGFtcERpcihnLngpKSxnLnkmJihlLnlEaXJlY3Rpb249dGhpcy5jbGFtcERpcihnLnkpKTt2YXIgaD17ZHg6Zi54LGR5OmYueSxkZHg6Zy54LGRkeTpnLnksY2xpZW50WDpjLmNsaWVudFgsY2xpZW50WTpjLmNsaWVudFkscGFnZVg6Yy5wYWdlWCxwYWdlWTpjLnBhZ2VZLHNjcmVlblg6Yy5zY3JlZW5YLHNjcmVlblk6Yy5zY3JlZW5ZLHhEaXJlY3Rpb246ZS54RGlyZWN0aW9uLHlEaXJlY3Rpb246ZS55RGlyZWN0aW9uLHRyYWNrSW5mbzplLnRyYWNrSW5mbyxwb2ludGVyVHlwZTpjLnBvaW50ZXJUeXBlfTsidHJhY2tlbmQiPT09YSYmKGguX3JlbGVhc2VUYXJnZXQ9Yy50YXJnZXQpO3ZhciBpPWIubWFrZUV2ZW50KGEsaCk7ZS5sYXN0TW92ZUV2ZW50PWMsYi5kaXNwYXRjaEV2ZW50KGksZS5kb3duVGFyZ2V0KX0scG9pbnRlcmRvd246ZnVuY3Rpb24oYSl7aWYoYS5pc1ByaW1hcnkmJigibW91c2UiPT09YS5wb2ludGVyVHlwZT8xPT09YS5idXR0b25zOiEwKSl7dmFyIGI9e2Rvd25FdmVudDphLGRvd25UYXJnZXQ6YS50YXJnZXQsdHJhY2tJbmZvOnt9LGxhc3RNb3ZlRXZlbnQ6bnVsbCx4RGlyZWN0aW9uOjAseURpcmVjdGlvbjowLHRyYWNraW5nOiExfTtjLnNldChhLnBvaW50ZXJJZCxiKX19LHBvaW50ZXJtb3ZlOmZ1bmN0aW9uKGEpe3ZhciBiPWMuZ2V0KGEucG9pbnRlcklkKTtpZihiKWlmKGIudHJhY2tpbmcpdGhpcy5maXJlVHJhY2soInRyYWNrIixhLGIpO2Vsc2V7dmFyIGQ9dGhpcy5jYWxjUG9zaXRpb25EZWx0YShiLmRvd25FdmVudCxhKSxlPWQueCpkLngrZC55KmQueTtlPnRoaXMuV0lHR0xFX1RIUkVTSE9MRCYmKGIudHJhY2tpbmc9ITAsdGhpcy5maXJlVHJhY2soInRyYWNrc3RhcnQiLGIuZG93bkV2ZW50LGIpLHRoaXMuZmlyZVRyYWNrKCJ0cmFjayIsYSxiKSl9fSxwb2ludGVydXA6ZnVuY3Rpb24oYSl7dmFyIGI9Yy5nZXQoYS5wb2ludGVySWQpO2ImJihiLnRyYWNraW5nJiZ0aGlzLmZpcmVUcmFjaygidHJhY2tlbmQiLGEsYiksYy5kZWxldGUoYS5wb2ludGVySWQpKX0scG9pbnRlcmNhbmNlbDpmdW5jdGlvbihhKXt0aGlzLnBvaW50ZXJ1cChhKX19O2IucmVnaXN0ZXJSZWNvZ25pemVyKCJ0cmFjayIsZCl9KHdpbmRvdy5Qb2ludGVyR2VzdHVyZXMpLGZ1bmN0aW9uKGEpe3ZhciBiPWEuZGlzcGF0Y2hlcixjPXtNSU5fVkVMT0NJVFk6LjUsTUFYX1FVRVVFOjQsbW92ZVF1ZXVlOltdLHRhcmdldDpudWxsLHBvaW50ZXJJZDpudWxsLGV2ZW50czpbInBvaW50ZXJkb3duIiwicG9pbnRlcm1vdmUiLCJwb2ludGVydXAiLCJwb2ludGVyY2FuY2VsIl0scG9pbnRlcmRvd246ZnVuY3Rpb24oYSl7YS5pc1ByaW1hcnkmJiF0aGlzLnBvaW50ZXJJZCYmKHRoaXMucG9pbnRlcklkPWEucG9pbnRlcklkLHRoaXMudGFyZ2V0PWEudGFyZ2V0LHRoaXMuYWRkTW92ZShhKSl9LHBvaW50ZXJtb3ZlOmZ1bmN0aW9uKGEpe2EucG9pbnRlcklkPT09dGhpcy5wb2ludGVySWQmJnRoaXMuYWRkTW92ZShhKX0scG9pbnRlcnVwOmZ1bmN0aW9uKGEpe2EucG9pbnRlcklkPT09dGhpcy5wb2ludGVySWQmJnRoaXMuZmlyZUZsaWNrKGEpLHRoaXMuY2xlYW51cCgpfSxwb2ludGVyY2FuY2VsOmZ1bmN0aW9uKCl7dGhpcy5jbGVhbnVwKCl9LGNsZWFudXA6ZnVuY3Rpb24oKXt0aGlzLm1vdmVRdWV1ZT1bXSx0aGlzLnRhcmdldD1udWxsLHRoaXMucG9pbnRlcklkPW51bGx9LGFkZE1vdmU6ZnVuY3Rpb24oYSl7dGhpcy5tb3ZlUXVldWUubGVuZ3RoPj10aGlzLk1BWF9RVUVVRSYmdGhpcy5tb3ZlUXVldWUuc2hpZnQoKSx0aGlzLm1vdmVRdWV1ZS5wdXNoKGEpfSxmaXJlRmxpY2s6ZnVuY3Rpb24oYSl7Zm9yKHZhciBjLGQsZSxmLGcsaCxpLGo9YSxrPXRoaXMubW92ZVF1ZXVlLmxlbmd0aCxsPTAsbT0wLG49MCxvPTA7az5vJiYoaT10aGlzLm1vdmVRdWV1ZVtvXSk7bysrKWM9ai50aW1lU3RhbXAtaS50aW1lU3RhbXAsZD1qLmNsaWVudFgtaS5jbGllbnRYLGU9ai5jbGllbnRZLWkuY2xpZW50WSxmPWQvYyxnPWUvYyxoPU1hdGguc3FydChmKmYrZypnKSxoPm4mJihsPWYsbT1nLG49aCk7dmFyIHA9TWF0aC5hYnMobCk+TWF0aC5hYnMobSk/IngiOiJ5IixxPXRoaXMuY2FsY0FuZ2xlKGwsbSk7aWYoTWF0aC5hYnMobik+PXRoaXMuTUlOX1ZFTE9DSVRZKXt2YXIgcj1iLm1ha2VFdmVudCgiZmxpY2siLHt4VmVsb2NpdHk6bCx5VmVsb2NpdHk6bSx2ZWxvY2l0eTpuLGFuZ2xlOnEsbWFqb3JBeGlzOnAscG9pbnRlclR5cGU6YS5wb2ludGVyVHlwZX0pO2IuZGlzcGF0Y2hFdmVudChyLHRoaXMudGFyZ2V0KX19LGNhbGNBbmdsZTpmdW5jdGlvbihhLGIpe3JldHVybiAxODAqTWF0aC5hdGFuMihiLGEpL01hdGguUEl9fTtiLnJlZ2lzdGVyUmVjb2duaXplcigiZmxpY2siLGMpfSh3aW5kb3cuUG9pbnRlckdlc3R1cmVzKSxmdW5jdGlvbihhKXt2YXIgYj1hLmRpc3BhdGNoZXIsYz1uZXcgYS5Qb2ludGVyTWFwLGQ9e2V2ZW50czpbInBvaW50ZXJkb3duIiwicG9pbnRlcm1vdmUiLCJwb2ludGVydXAiLCJwb2ludGVyY2FuY2VsIl0scG9pbnRlcmRvd246ZnVuY3Rpb24oYSl7YS5pc1ByaW1hcnkmJiFhLnRhcFByZXZlbnRlZCYmYy5zZXQoYS5wb2ludGVySWQse3RhcmdldDphLnRhcmdldCx4OmEuY2xpZW50WCx5OmEuY2xpZW50WX0pfSxwb2ludGVybW92ZTpmdW5jdGlvbihhKXtpZihhLmlzUHJpbWFyeSl7dmFyIGI9Yy5nZXQoYS5wb2ludGVySWQpO2ImJmEudGFwUHJldmVudGVkJiZjLmRlbGV0ZShhLnBvaW50ZXJJZCl9fSxwb2ludGVydXA6ZnVuY3Rpb24oZCl7dmFyIGU9Yy5nZXQoZC5wb2ludGVySWQpO2lmKGUmJiFkLnRhcFByZXZlbnRlZCl7dmFyIGY9YS5maW5kTENBKGUudGFyZ2V0LGQudGFyZ2V0KTtpZihmKXt2YXIgZz1iLm1ha2VFdmVudCgidGFwIix7eDpkLmNsaWVudFgseTpkLmNsaWVudFkscG9pbnRlclR5cGU6ZC5wb2ludGVyVHlwZX0pO2IuZGlzcGF0Y2hFdmVudChnLGYpfX1jLmRlbGV0ZShkLnBvaW50ZXJJZCl9LHBvaW50ZXJjYW5jZWw6ZnVuY3Rpb24oYSl7Yy5kZWxldGUoYS5wb2ludGVySWQpfSxwcmV2ZW50VGFwOmZ1bmN0aW9uKGEpe2MuZGVsZXRlKGEpfX07Yi5yZWdpc3RlclJlY29nbml6ZXIoInRhcCIsZCl9KHdpbmRvdy5Qb2ludGVyR2VzdHVyZXMpOwovKgovL0Agc291cmNlTWFwcGluZ1VSTD1wbGF0Zm9ybS5uYXRpdmUubWluLmpzLm1hcAoqLw==",
                "body": "Ly8gQ29weXJpZ2h0IChjKSAyMDEyIFRoZSBQb2x5bWVyIEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuCi8vCi8vIFJlZGlzdHJpYnV0aW9uIGFuZCB1c2UgaW4gc291cmNlIGFuZCBiaW5hcnkgZm9ybXMsIHdpdGggb3Igd2l0aG91dAovLyBtb2RpZmljYXRpb24sIGFyZSBwZXJtaXR0ZWQgcHJvdmlkZWQgdGhhdCB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnMgYXJlCi8vIG1ldDoKLy8KLy8gICAgKiBSZWRpc3RyaWJ1dGlvbnMgb2Ygc291cmNlIGNvZGUgbXVzdCByZXRhaW4gdGhlIGFib3ZlIGNvcHlyaWdodAovLyBub3RpY2UsIHRoaXMgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIuCi8vICAgICogUmVkaXN0cmlidXRpb25zIGluIGJpbmFyeSBmb3JtIG11c3QgcmVwcm9kdWNlIHRoZSBhYm92ZQovLyBjb3B5cmlnaHQgbm90aWNlLCB0aGlzIGxpc3Qgb2YgY29uZGl0aW9ucyBhbmQgdGhlIGZvbGxvd2luZyBkaXNjbGFpbWVyCi8vIGluIHRoZSBkb2N1bWVudGF0aW9uIGFuZC9vciBvdGhlciBtYXRlcmlhbHMgcHJvdmlkZWQgd2l0aCB0aGUKLy8gZGlzdHJpYnV0aW9uLgovLyAgICAqIE5laXRoZXIgdGhlIG5hbWUgb2YgR29vZ2xlIEluYy4gbm9yIHRoZSBuYW1lcyBvZiBpdHMKLy8gY29udHJpYnV0b3JzIG1heSBiZSB1c2VkIHRvIGVuZG9yc2Ugb3IgcHJvbW90ZSBwcm9kdWN0cyBkZXJpdmVkIGZyb20KLy8gdGhpcyBzb2Z0d2FyZSB3aXRob3V0IHNwZWNpZmljIHByaW9yIHdyaXR0ZW4gcGVybWlzc2lvbi4KLy8KLy8gVEhJUyBTT0ZUV0FSRSBJUyBQUk9WSURFRCBCWSBUSEUgQ09QWVJJR0hUIEhPTERFUlMgQU5EIENPTlRSSUJVVE9SUwovLyAiQVMgSVMiIEFORCBBTlkgRVhQUkVTUyBPUiBJTVBMSUVEIFdBUlJBTlRJRVMsIElOQ0xVRElORywgQlVUIE5PVAovLyBMSU1JVEVEIFRPLCBUSEUgSU1QTElFRCBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSBBTkQgRklUTkVTUyBGT1IKLy8gQSBQQVJUSUNVTEFSIFBVUlBPU0UgQVJFIERJU0NMQUlNRUQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBDT1BZUklHSFQKLy8gT1dORVIgT1IgQ09OVFJJQlVUT1JTIEJFIExJQUJMRSBGT1IgQU5ZIERJUkVDVCwgSU5ESVJFQ1QsIElOQ0lERU5UQUwsCi8vIFNQRUNJQUwsIEVYRU1QTEFSWSwgT1IgQ09OU0VRVUVOVElBTCBEQU1BR0VTIChJTkNMVURJTkcsIEJVVCBOT1QKLy8gTElNSVRFRCBUTywgUFJPQ1VSRU1FTlQgT0YgU1VCU1RJVFVURSBHT09EUyBPUiBTRVJWSUNFUzsgTE9TUyBPRiBVU0UsCi8vIERBVEEsIE9SIFBST0ZJVFM7IE9SIEJVU0lORVNTIElOVEVSUlVQVElPTikgSE9XRVZFUiBDQVVTRUQgQU5EIE9OIEFOWQovLyBUSEVPUlkgT0YgTElBQklMSVRZLCBXSEVUSEVSIElOIENPTlRSQUNULCBTVFJJQ1QgTElBQklMSVRZLCBPUiBUT1JUCi8vIChJTkNMVURJTkcgTkVHTElHRU5DRSBPUiBPVEhFUldJU0UpIEFSSVNJTkcgSU4gQU5ZIFdBWSBPVVQgT0YgVEhFIFVTRQovLyBPRiBUSElTIFNPRlRXQVJFLCBFVkVOIElGIEFEVklTRUQgT0YgVEhFIFBPU1NJQklMSVRZIE9GIFNVQ0ggREFNQUdFLgpmdW5jdGlvbiBQb2ludGVyR2VzdHVyZUV2ZW50KGEsYil7dmFyIGM9Ynx8e30sZD1kb2N1bWVudC5jcmVhdGVFdmVudCgiRXZlbnQiKSxlPXtidWJibGVzOiEwLGNhbmNlbGFibGU6ITB9O3JldHVybiBPYmplY3Qua2V5cyhlKS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2EgaW4gYyYmKGVbYV09Y1thXSl9KSxkLmluaXRFdmVudChhLGUuYnViYmxlcyxlLmNhbmNlbGFibGUpLE9iamVjdC5rZXlzKGMpLmZvckVhY2goZnVuY3Rpb24oYSl7ZFthXT1iW2FdfSksZC5wcmV2ZW50VGFwPXRoaXMucHJldmVudFRhcCxkfXZhciBTaWRlVGFibGU7aWYoInVuZGVmaW5lZCIhPXR5cGVvZiBXZWFrTWFwJiZuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoIkZpcmVmb3gvIik8MD9TaWRlVGFibGU9V2Vha01hcDpmdW5jdGlvbigpe3ZhciBhPU9iamVjdC5kZWZpbmVQcm9wZXJ0eSxiPU9iamVjdC5oYXNPd25Qcm9wZXJ0eSxjPShuZXcgRGF0ZSkuZ2V0VGltZSgpJTFlOTtTaWRlVGFibGU9ZnVuY3Rpb24oKXt0aGlzLm5hbWU9Il9fc3QiKygxZTkqTWF0aC5yYW5kb20oKT4+PjApKyhjKysgKyJfXyIpfSxTaWRlVGFibGUucHJvdG90eXBlPXtzZXQ6ZnVuY3Rpb24oYixjKXthKGIsdGhpcy5uYW1lLHt2YWx1ZTpjLHdyaXRhYmxlOiEwfSl9LGdldDpmdW5jdGlvbihhKXtyZXR1cm4gYi5jYWxsKGEsdGhpcy5uYW1lKT9hW3RoaXMubmFtZV06dm9pZCAwfSwiZGVsZXRlIjpmdW5jdGlvbihhKXt0aGlzLnNldChhLHZvaWQgMCl9fX0oKSxmdW5jdGlvbigpe3dpbmRvdy50ZW1wbGF0ZUNvbnRlbnQ9d2luZG93LnRlbXBsYXRlQ29udGVudHx8ZnVuY3Rpb24oYSl7cmV0dXJuIGEuY29udGVudH0sd2luZG93LndyYXA9d2luZG93LnVud3JhcD1mdW5jdGlvbihhKXtyZXR1cm4gYX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoSFRNTEVsZW1lbnQucHJvdG90eXBlLHtzaGFkb3dSb290OntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy53ZWJraXRTaGFkb3dSb290fX0sY3JlYXRlU2hhZG93Um9vdDp7dmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy53ZWJraXRDcmVhdGVTaGFkb3dSb290KCl9fX0pLHdpbmRvdy50ZW1wbGF0ZUNvbnRlbnQ9ZnVuY3Rpb24oYSl7aWYod2luZG93LkhUTUxUZW1wbGF0ZUVsZW1lbnQmJkhUTUxUZW1wbGF0ZUVsZW1lbnQuYm9vdHN0cmFwJiZIVE1MVGVtcGxhdGVFbGVtZW50LmJvb3RzdHJhcChhKSwhYS5jb250ZW50JiYhYS5fY29udGVudCl7Zm9yKHZhciBiPWRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTthLmZpcnN0Q2hpbGQ7KWIuYXBwZW5kQ2hpbGQoYS5maXJzdENoaWxkKTthLl9jb250ZW50PWJ9cmV0dXJuIGEuY29udGVudHx8YS5fY29udGVudH19KCksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhKXtmb3IodmFyIGI9YXx8e30sZD0xO2Q8YXJndW1lbnRzLmxlbmd0aDtkKyspe3ZhciBlPWFyZ3VtZW50c1tkXTt0cnl7Zm9yKHZhciBmIGluIGUpYyhmLGUsYil9Y2F0Y2goZyl7fX1yZXR1cm4gYn1mdW5jdGlvbiBjKGEsYixjKXt2YXIgZT1kKGIsYSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGMsYSxlKX1mdW5jdGlvbiBkKGEsYil7aWYoYSl7dmFyIGM9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihhLGIpO3JldHVybiBjfHxkKE9iamVjdC5nZXRQcm90b3R5cGVPZihhKSxiKX19RnVuY3Rpb24ucHJvdG90eXBlLmJpbmR8fChGdW5jdGlvbi5wcm90b3R5cGUuYmluZD1mdW5jdGlvbihhKXt2YXIgYj10aGlzLGM9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpO3JldHVybiBmdW5jdGlvbigpe3ZhciBkPWMuc2xpY2UoKTtyZXR1cm4gZC5wdXNoLmFwcGx5KGQsYXJndW1lbnRzKSxiLmFwcGx5KGEsZCl9fSksYS5taXhpbj1ifSh3aW5kb3cuUGxhdGZvcm0pLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEsYixjKXt2YXIgZD0ic3RyaW5nIj09dHlwZW9mIGE/ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChhKTphLmNsb25lTm9kZSghMCk7aWYoZC5pbm5lckhUTUw9YixjKWZvcih2YXIgZSBpbiBjKWQuc2V0QXR0cmlidXRlKGUsY1tlXSk7cmV0dXJuIGR9dmFyIGM9RE9NVG9rZW5MaXN0LnByb3RvdHlwZS5hZGQsZD1ET01Ub2tlbkxpc3QucHJvdG90eXBlLnJlbW92ZTtET01Ub2tlbkxpc3QucHJvdG90eXBlLmFkZD1mdW5jdGlvbigpe2Zvcih2YXIgYT0wO2E8YXJndW1lbnRzLmxlbmd0aDthKyspYy5jYWxsKHRoaXMsYXJndW1lbnRzW2FdKX0sRE9NVG9rZW5MaXN0LnByb3RvdHlwZS5yZW1vdmU9ZnVuY3Rpb24oKXtmb3IodmFyIGE9MDthPGFyZ3VtZW50cy5sZW5ndGg7YSsrKWQuY2FsbCh0aGlzLGFyZ3VtZW50c1thXSl9LERPTVRva2VuTGlzdC5wcm90b3R5cGUudG9nZ2xlPWZ1bmN0aW9uKGEsYil7MT09YXJndW1lbnRzLmxlbmd0aCYmKGI9IXRoaXMuY29udGFpbnMoYSkpLGI/dGhpcy5hZGQoYSk6dGhpcy5yZW1vdmUoYSl9LERPTVRva2VuTGlzdC5wcm90b3R5cGUuc3dpdGNoPWZ1bmN0aW9uKGEsYil7YSYmdGhpcy5yZW1vdmUoYSksYiYmdGhpcy5hZGQoYil9O3ZhciBlPWZ1bmN0aW9uKCl7cmV0dXJuIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHRoaXMpfSxmPXdpbmRvdy5OYW1lZE5vZGVNYXB8fHdpbmRvdy5Nb3pOYW1lZEF0dHJNYXB8fHt9O05vZGVMaXN0LnByb3RvdHlwZS5hcnJheT1lLGYucHJvdG90eXBlLmFycmF5PWUsSFRNTENvbGxlY3Rpb24ucHJvdG90eXBlLmFycmF5PWU7dmFyIGc9ZnVuY3Rpb24oYSxiKXtlLmNhbGwodGhpcykuZm9yRWFjaChhLGIpfTtpZihOb2RlTGlzdC5wcm90b3R5cGUuZm9yRWFjaD1nLGYucHJvdG90eXBlLmZvckVhY2g9ZyxIVE1MQ29sbGVjdGlvbi5wcm90b3R5cGUuZm9yRWFjaD1nLCF3aW5kb3cucGVyZm9ybWFuY2Upe3ZhciBoPURhdGUubm93KCk7d2luZG93LnBlcmZvcm1hbmNlPXtub3c6ZnVuY3Rpb24oKXtyZXR1cm4gRGF0ZS5ub3coKS1ofX19d2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZXx8KHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWU9ZnVuY3Rpb24oKXt2YXIgYT13aW5kb3cud2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lfHx3aW5kb3cubW96UmVxdWVzdEFuaW1hdGlvbkZyYW1lO3JldHVybiBhP2Z1bmN0aW9uKGIpe3JldHVybiBhKGZ1bmN0aW9uKCl7YihwZXJmb3JtYW5jZS5ub3coKSl9KX06ZnVuY3Rpb24oYSl7cmV0dXJuIHdpbmRvdy5zZXRUaW1lb3V0KGEsMWUzLzYwKX19KCkpLHdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZXx8KHdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZT1mdW5jdGlvbigpe3JldHVybiB3aW5kb3cud2Via2l0Q2FuY2VsQW5pbWF0aW9uRnJhbWV8fHdpbmRvdy5tb3pDYW5jZWxBbmltYXRpb25GcmFtZXx8ZnVuY3Rpb24oYSl7Y2xlYXJUaW1lb3V0KGEpfX0oKSksYS5jcmVhdGVET009Yn0od2luZG93LlBsYXRmb3JtKSx3aW5kb3cudGVtcGxhdGVDb250ZW50PXdpbmRvdy50ZW1wbGF0ZUNvbnRlbnR8fGZ1bmN0aW9uKGEpe3JldHVybiBhLmNvbnRlbnR9LGZ1bmN0aW9uKGEpe2E9YXx8KHdpbmRvdy5JbnNwZWN0b3I9e30pO3ZhciBiO3dpbmRvdy5zaW5zcGVjdD1mdW5jdGlvbihhLGQpe2J8fChiPXdpbmRvdy5vcGVuKCIiLCJTaGFkb3dET00gSW5zcGVjdG9yIixudWxsLCEwKSxiLmRvY3VtZW50LndyaXRlKGMpLGIuYXBpPXtzaGFkb3dpemU6c2hhZG93aXplfSksZihhfHx3cmFwKGRvY3VtZW50LmJvZHkpLGQpfTt2YXIgYz1bIjwhRE9DVFlQRSBodG1sPiIsIjxodG1sPiIsIiAgPGhlYWQ+IiwiICAgIDx0aXRsZT5TaGFkb3dET00gSW5zcGVjdG9yPC90aXRsZT4iLCIgICAgPHN0eWxlPiIsIiAgICAgIGJvZHkgeyIsIiAgICAgIH0iLCIgICAgICBwcmUgeyIsJyAgICAgICAgZm9udDogOXB0ICJDb3VyaWVyIE5ldyIsIG1vbm9zcGFjZTsnLCIgICAgICAgIGxpbmUtaGVpZ2h0OiAxLjVlbTsiLCIgICAgICB9IiwiICAgICAgdGFnIHsiLCIgICAgICAgIGNvbG9yOiBwdXJwbGU7IiwiICAgICAgfSIsIiAgICAgIHVsIHsiLCIgICAgICAgICBtYXJnaW46IDA7IiwiICAgICAgICAgcGFkZGluZzogMDsiLCIgICAgICAgICBsaXN0LXN0eWxlOiBub25lOyIsIiAgICAgIH0iLCIgICAgICBsaSB7IiwiICAgICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrOyIsIiAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmMWYxZjE7IiwiICAgICAgICAgcGFkZGluZzogNHB4IDZweDsiLCIgICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7IiwiICAgICAgICAgbWFyZ2luLXJpZ2h0OiA0cHg7IiwiICAgICAgfSIsIiAgICA8L3N0eWxlPiIsIiAgPC9oZWFkPiIsIiAgPGJvZHk+IiwnICAgIDx1bCBpZD0iY3J1bWJzIj4nLCIgICAgPC91bD4iLCcgICAgPGRpdiBpZD0idHJlZSI+PC9kaXY+JywiICA8L2JvZHk+IiwiPC9odG1sPiJdLmpvaW4oIlxuIiksZD1bXSxlPWZ1bmN0aW9uKCl7dmFyIGE9Yi5kb2N1bWVudCxjPWEucXVlcnlTZWxlY3RvcigiI2NydW1icyIpO2MudGV4dENvbnRlbnQ9IiI7Zm9yKHZhciBlLGc9MDtlPWRbZ107ZysrKXt2YXIgaD1hLmNyZWF0ZUVsZW1lbnQoImEiKTtoLmhyZWY9IiMiLGgudGV4dENvbnRlbnQ9ZS5sb2NhbE5hbWUsaC5pZHg9ZyxoLm9uY2xpY2s9ZnVuY3Rpb24oYSl7Zm9yKHZhciBiO2QubGVuZ3RoPnRoaXMuaWR4OyliPWQucG9wKCk7ZihiLnNoYWRvd3x8YixiKSxhLnByZXZlbnREZWZhdWx0KCl9LGMuYXBwZW5kQ2hpbGQoYS5jcmVhdGVFbGVtZW50KCJsaSIpKS5hcHBlbmRDaGlsZChoKX19LGY9ZnVuY3Rpb24oYSxjKXt2YXIgZj1iLmRvY3VtZW50O2s9W107dmFyIGc9Y3x8YTtkLnB1c2goZyksZSgpLGYuYm9keS5xdWVyeVNlbGVjdG9yKCIjdHJlZSIpLmlubmVySFRNTD0iPHByZT4iK2ooYSxhLmNoaWxkTm9kZXMpKyI8L3ByZT4ifSxnPUFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwuYmluZChBcnJheS5wcm90b3R5cGUuZm9yRWFjaCksaD17U1RZTEU6MSxTQ1JJUFQ6MSwiI2NvbW1lbnQiOjEsVEVNUExBVEU6MX0saT1mdW5jdGlvbihhKXtyZXR1cm4gaFthLm5vZGVOYW1lXX0saj1mdW5jdGlvbihhLGIsYyl7aWYoaShhKSlyZXR1cm4iIjt2YXIgZD1jfHwiIjtpZihhLmxvY2FsTmFtZXx8MTE9PWEubm9kZVR5cGUpe3ZhciBlPWEubG9jYWxOYW1lfHwic2hhZG93LXJvb3QiLGY9ZCtsKGEpOyJjb250ZW50Ij09ZSYmKGI9YS5nZXREaXN0cmlidXRlZE5vZGVzKCkpLGYrPSI8YnIvPiI7dmFyIGg9ZCsiJm5ic3A7Jm5ic3A7IjtnKGIsZnVuY3Rpb24oYSl7Zis9aihhLGEuY2hpbGROb2RlcyxoKX0pLGYrPWQse2JyOjF9W2VdfHwoZis9Ijx0YWc+Jmx0Oy8iK2UrIiZndDs8L3RhZz4iLGYrPSI8YnIvPiIpfWVsc2V7dmFyIGs9YS50ZXh0Q29udGVudC50cmltKCk7Zj1rP2QrJyInK2srJyInKyI8YnIvPiI6IiJ9cmV0dXJuIGZ9LGs9W10sbD1mdW5jdGlvbihhKXt2YXIgYj0iPHRhZz4mbHQ7IixjPWEubG9jYWxOYW1lfHwic2hhZG93LXJvb3QiO3JldHVybiBhLndlYmtpdFNoYWRvd1Jvb3R8fGEuc2hhZG93Um9vdD8oYis9JyA8YnV0dG9uIGlkeD0iJytrLmxlbmd0aCsnIiBvbmNsaWNrPSJhcGkuc2hhZG93aXplLmNhbGwodGhpcykiPicrYysiPC9idXR0b24+IixrLnB1c2goYSkpOmIrPWN8fCJzaGFkb3ctcm9vdCIsYS5hdHRyaWJ1dGVzJiZnKGEuYXR0cmlidXRlcyxmdW5jdGlvbihhKXtiKz0iICIrYS5uYW1lKyhhLnZhbHVlPyc9IicrYS52YWx1ZSsnIic6IiIpfSksYis9IiZndDs8L3RhZz4ifTtzaGFkb3dpemU9ZnVuY3Rpb24oKXt2YXIgYT1OdW1iZXIodGhpcy5hdHRyaWJ1dGVzLmlkeC52YWx1ZSksYj1rW2FdO2I/ZihiLndlYmtpdFNoYWRvd1Jvb3R8fGIuc2hhZG93Um9vdCxiKTooY29uc29sZS5sb2coImJhZCBzaGFkb3dpemUgbm9kZSIpLGNvbnNvbGUuZGlyKHRoaXMpKX0sYS5vdXRwdXQ9an0od2luZG93Lkluc3BlY3RvciksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoKXtmdW5jdGlvbiBhKGEpeyJzcGxpY2UiPT09YVswXS50eXBlJiYic3BsaWNlIj09PWFbMV0udHlwZSYmKGI9ITApfWlmKCJmdW5jdGlvbiIhPXR5cGVvZiBPYmplY3Qub2JzZXJ2ZXx8ImZ1bmN0aW9uIiE9dHlwZW9mIEFycmF5Lm9ic2VydmUpcmV0dXJuITE7dmFyIGI9ITEsYz1bMF07cmV0dXJuIEFycmF5Lm9ic2VydmUoYyxhKSxjWzFdPTEsYy5sZW5ndGg9MCxPYmplY3QuZGVsaXZlckNoYW5nZVJlY29yZHMoYSksYn1mdW5jdGlvbiBjKGEpe3JldHVybithPT09YT4+PjB9ZnVuY3Rpb24gZChhKXtyZXR1cm4rYX1mdW5jdGlvbiBlKGEpe3JldHVybiBhPT09T2JqZWN0KGEpfWZ1bmN0aW9uIGYoYSxiKXtyZXR1cm4gYT09PWI/MCE9PWF8fDEvYT09PTEvYjpLKGEpJiZLKGIpPyEwOmEhPT1hJiZiIT09Yn1mdW5jdGlvbiBnKGEpe3JldHVybiJzdHJpbmciIT10eXBlb2YgYT8hMTooYT1hLnJlcGxhY2UoL1xzL2csIiIpLCIiPT1hPyEwOiIuIj09YVswXT8hMTpTLnRlc3QoYSkpfWZ1bmN0aW9uIGgoYSl7dmFyIGI9VFthXTtpZihiKXJldHVybiBiO2lmKGcoYSkpe3ZhciBiPW5ldyBpKGEpO3JldHVybiBUW2FdPWIsYn19ZnVuY3Rpb24gaShhKXtyZXR1cm4iIj09YS50cmltKCk/dGhpczpjKGEpPyh0aGlzLnB1c2goU3RyaW5nKGEpKSx0aGlzKTooYS5zcGxpdCgvXC4vKS5maWx0ZXIoZnVuY3Rpb24oYSl7cmV0dXJuIGF9KS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3RoaXMucHVzaChhKX0sdGhpcyksSCYmdGhpcy5sZW5ndGgmJih0aGlzLmdldFZhbHVlRnJvbT10aGlzLmNvbXBpbGVkR2V0VmFsdWVGcm9tRm4oKSksdm9pZCAwKX1mdW5jdGlvbiBqKGEpe2Zvcih2YXIgYj0wO1U+YiYmYS5jaGVjaygpOylhLnJlcG9ydCgpLGIrK31mdW5jdGlvbiBrKGEpe2Zvcih2YXIgYiBpbiBhKXJldHVybiExO3JldHVybiEwfWZ1bmN0aW9uIGwoYSl7cmV0dXJuIGsoYS5hZGRlZCkmJmsoYS5yZW1vdmVkKSYmayhhLmNoYW5nZWQpfWZ1bmN0aW9uIG0oYSxiKXt2YXIgYz17fSxkPXt9LGU9e307Zm9yKHZhciBmIGluIGIpe3ZhciBnPWFbZl07KHZvaWQgMD09PWd8fGchPT1iW2ZdKSYmKGYgaW4gYT9nIT09YltmXSYmKGVbZl09Zyk6ZFtmXT12b2lkIDApfWZvcih2YXIgZiBpbiBhKWYgaW4gYnx8KGNbZl09YVtmXSk7cmV0dXJuIEFycmF5LmlzQXJyYXkoYSkmJmEubGVuZ3RoIT09Yi5sZW5ndGgmJihlLmxlbmd0aD1hLmxlbmd0aCkse2FkZGVkOmMscmVtb3ZlZDpkLGNoYW5nZWQ6ZX19ZnVuY3Rpb24gbihhLGIpe3ZhciBjPWJ8fChBcnJheS5pc0FycmF5KGEpP1tdOnt9KTtmb3IodmFyIGQgaW4gYSljW2RdPWFbZF07cmV0dXJuIEFycmF5LmlzQXJyYXkoYSkmJihjLmxlbmd0aD1hLmxlbmd0aCksY31mdW5jdGlvbiBvKGEsYixjLGQpe3RoaXMub2JqZWN0PWEsdGhpcy5jYWxsYmFjaz1iLHRoaXMudGFyZ2V0PWMsdGhpcy50b2tlbj1kLHRoaXMucmVwb3J0aW5nPSEwLEcmJih0aGlzLmJvdW5kSW50ZXJuYWxDYWxsYmFjaz10aGlzLmludGVybmFsQ2FsbGJhY2suYmluZCh0aGlzKSksdGhpcy52YWxpZD0hMCxwKHRoaXMpLHRoaXMuY29ubmVjdCgpLHRoaXMuc3luYyghMCl9ZnVuY3Rpb24gcChhKXtXJiYoVi5wdXNoKGEpLG8uX2FsbE9ic2VydmVyc0NvdW50KyspfWZ1bmN0aW9uIHEoYSxiLGMsZCl7by5jYWxsKHRoaXMsYSxiLGMsZCl9ZnVuY3Rpb24gcihhLGIsYyxkKXtpZighQXJyYXkuaXNBcnJheShhKSl0aHJvdyBFcnJvcigiUHJvdmlkZWQgb2JqZWN0IGlzIG5vdCBhbiBBcnJheSIpO28uY2FsbCh0aGlzLGEsYixjLGQpfWZ1bmN0aW9uIHMoYSl7dGhpcy5hcnI9W10sdGhpcy5jYWxsYmFjaz1hLHRoaXMuaXNPYnNlcnZlZD0hMH1mdW5jdGlvbiB0KGEsYixjLGQsZil7dGhpcy52YWx1ZT12b2lkIDA7dmFyIGc9aChiKTtpZihnKXJldHVybiBnLmxlbmd0aD8oZShhKSYmKHRoaXMucGF0aD1nLG8uY2FsbCh0aGlzLGEsYyxkLGYpKSx2b2lkIDApOih0aGlzLnZhbHVlPWEsdm9pZCAwKX1mdW5jdGlvbiB1KGEsYil7aWYoImZ1bmN0aW9uIj09dHlwZW9mIE9iamVjdC5vYnNlcnZlKXt2YXIgYz1PYmplY3QuZ2V0Tm90aWZpZXIoYSk7cmV0dXJuIGZ1bmN0aW9uKGQsZSl7dmFyIGY9e29iamVjdDphLHR5cGU6ZCxuYW1lOmJ9OzI9PT1hcmd1bWVudHMubGVuZ3RoJiYoZi5vbGRWYWx1ZT1lKSxjLm5vdGlmeShmKX19fWZ1bmN0aW9uIHYoYSxiLGMpe2Zvcih2YXIgZD17fSxlPXt9LGY9MDtmPGIubGVuZ3RoO2YrKyl7dmFyIGc9YltmXTtfW2cudHlwZV0/KGcubmFtZSBpbiBjfHwoY1tnLm5hbWVdPWcub2xkVmFsdWUpLCJ1cGRhdGVkIiE9Zy50eXBlJiYoIm5ldyIhPWcudHlwZT9nLm5hbWUgaW4gZD8oZGVsZXRlIGRbZy5uYW1lXSxkZWxldGUgY1tnLm5hbWVdKTplW2cubmFtZV09ITA6Zy5uYW1lIGluIGU/ZGVsZXRlIGVbZy5uYW1lXTpkW2cubmFtZV09ITApKTooY29uc29sZS5lcnJvcigiVW5rbm93biBjaGFuZ2VSZWNvcmQgdHlwZTogIitnLnR5cGUpLGNvbnNvbGUuZXJyb3IoZykpfWZvcih2YXIgaCBpbiBkKWRbaF09YVtoXTtmb3IodmFyIGggaW4gZSllW2hdPXZvaWQgMDt2YXIgaT17fTtmb3IodmFyIGggaW4gYylpZighKGggaW4gZHx8aCBpbiBlKSl7dmFyIGo9YVtoXTtjW2hdIT09aiYmKGlbaF09ail9cmV0dXJue2FkZGVkOmQscmVtb3ZlZDplLGNoYW5nZWQ6aX19ZnVuY3Rpb24gdyhhLGIsYyxkLGUsZil7Zm9yKHZhciBnPWYtZSsxLGg9Yy1iKzEsaT1uZXcgQXJyYXkoZyksaj0wO2c+ajtqKyspaVtqXT1uZXcgQXJyYXkoaCksaVtqXVswXT1qO2Zvcih2YXIgaz0wO2g+aztrKyspaVswXVtrXT1rO2Zvcih2YXIgaj0xO2c+ajtqKyspZm9yKHZhciBrPTE7aD5rO2srKylpZihkW2Urai0xXT09PWFbYitrLTFdKWlbal1ba109aVtqLTFdW2stMV07ZWxzZXt2YXIgbD1pW2otMV1ba10rMSxtPWlbal1bay0xXSsxO2lbal1ba109bT5sP2w6bX1yZXR1cm4gaX1mdW5jdGlvbiB4KGEpe2Zvcih2YXIgYj1hLmxlbmd0aC0xLGM9YVswXS5sZW5ndGgtMSxkPWFbYl1bY10sZT1bXTtiPjB8fGM+MDspaWYoMCE9YilpZigwIT1jKXt2YXIgZixnPWFbYi0xXVtjLTFdLGg9YVtiLTFdW2NdLGk9YVtiXVtjLTFdO2Y9aT5oP2c+aD9oOmc6Zz5pP2k6ZyxmPT1nPyhnPT1kP2UucHVzaChhYik6KGUucHVzaChiYiksZD1nKSxiLS0sYy0tKTpmPT1oPyhlLnB1c2goZGIpLGItLSxkPWgpOihlLnB1c2goY2IpLGMtLSxkPWkpfWVsc2UgZS5wdXNoKGRiKSxiLS07ZWxzZSBlLnB1c2goY2IpLGMtLTtyZXR1cm4gZS5yZXZlcnNlKCksZX1mdW5jdGlvbiB5KGEsYixjKXtmb3IodmFyIGQ9MDtjPmQ7ZCsrKWlmKGFbZF0hPT1iW2RdKXJldHVybiBkO3JldHVybiBjfWZ1bmN0aW9uIHooYSxiLGMpe2Zvcih2YXIgZD1hLmxlbmd0aCxlPWIubGVuZ3RoLGY9MDtjPmYmJmFbLS1kXT09PWJbLS1lXTspZisrO3JldHVybiBmfWZ1bmN0aW9uIEEoYSxiLGMpe3JldHVybntpbmRleDphLHJlbW92ZWQ6YixhZGRlZENvdW50OmN9fWZ1bmN0aW9uIEIoYSxiLGMsZCxlLGYpe3ZhciBnPTAsaD0wLGk9TWF0aC5taW4oYy1iLGYtZSk7aWYoMD09YiYmMD09ZSYmKGc9eShhLGQsaSkpLGM9PWEubGVuZ3RoJiZmPT1kLmxlbmd0aCYmKGg9eihhLGQsaS1nKSksYis9ZyxlKz1nLGMtPWgsZi09aCwwPT1jLWImJjA9PWYtZSlyZXR1cm5bXTtpZihiPT1jKXtmb3IodmFyIGo9QShiLFtdLDApO2Y+ZTspai5yZW1vdmVkLnB1c2goZFtlKytdKTtyZXR1cm5bal19aWYoZT09ZilyZXR1cm5bQShiLFtdLGMtYildO2Zvcih2YXIgaz14KHcoYSxiLGMsZCxlLGYpKSxqPXZvaWQgMCxsPVtdLG09YixuPWUsbz0wO288ay5sZW5ndGg7bysrKXN3aXRjaChrW29dKXtjYXNlIGFiOmomJihsLnB1c2goaiksaj12b2lkIDApLG0rKyxuKys7YnJlYWs7Y2FzZSBiYjpqfHwoaj1BKG0sW10sMCkpLGouYWRkZWRDb3VudCsrLG0rKyxqLnJlbW92ZWQucHVzaChkW25dKSxuKys7YnJlYWs7Y2FzZSBjYjpqfHwoaj1BKG0sW10sMCkpLGouYWRkZWRDb3VudCsrLG0rKzticmVhaztjYXNlIGRiOmp8fChqPUEobSxbXSwwKSksai5yZW1vdmVkLnB1c2goZFtuXSksbisrfXJldHVybiBqJiZsLnB1c2goaiksbH1mdW5jdGlvbiBDKGEsYixjLGQpe3JldHVybiBjPmJ8fGE+ZD8tMTpiPT1jfHxkPT1hPzA6Yz5hP2Q+Yj9iLWM6ZC1jOmI+ZD9kLWE6Yi1hfWZ1bmN0aW9uIEQoYSxiLGMsZCl7Zm9yKHZhciBlPUEoYixjLGQpLGY9ITEsZz0wLGg9MDtoPGEubGVuZ3RoO2grKyl7dmFyIGk9YVtoXTtpZihpLmluZGV4Kz1nLCFmKXt2YXIgaj1DKGUuaW5kZXgsZS5pbmRleCtlLnJlbW92ZWQubGVuZ3RoLGkuaW5kZXgsaS5pbmRleCtpLmFkZGVkQ291bnQpO2lmKGo+PTApe2Euc3BsaWNlKGgsMSksaC0tLGctPWkuYWRkZWRDb3VudC1pLnJlbW92ZWQubGVuZ3RoLGUuYWRkZWRDb3VudCs9aS5hZGRlZENvdW50LWo7dmFyIGs9ZS5yZW1vdmVkLmxlbmd0aCtpLnJlbW92ZWQubGVuZ3RoLWo7aWYoZS5hZGRlZENvdW50fHxrKXt2YXIgYz1pLnJlbW92ZWQ7aWYoZS5pbmRleDxpLmluZGV4KXt2YXIgbD1lLnJlbW92ZWQuc2xpY2UoMCxpLmluZGV4LWUuaW5kZXgpO0FycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KGwsYyksYz1sfWlmKGUuaW5kZXgrZS5yZW1vdmVkLmxlbmd0aD5pLmluZGV4K2kuYWRkZWRDb3VudCl7dmFyIG09ZS5yZW1vdmVkLnNsaWNlKGkuaW5kZXgraS5hZGRlZENvdW50LWUuaW5kZXgpO0FycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KGMsbSl9ZS5yZW1vdmVkPWMsaS5pbmRleDxlLmluZGV4JiYoZS5pbmRleD1pLmluZGV4KX1lbHNlIGY9ITB9ZWxzZSBpZihlLmluZGV4PGkuaW5kZXgpe2Y9ITAsYS5zcGxpY2UoaCwwLGUpLGgrKzt2YXIgbj1lLmFkZGVkQ291bnQtZS5yZW1vdmVkLmxlbmd0aDtpLmluZGV4Kz1uLGcrPW59fX1mfHxhLnB1c2goZSl9ZnVuY3Rpb24gRShhLGIpe2Zvcih2YXIgZT1bXSxmPTA7ZjxiLmxlbmd0aDtmKyspe3ZhciBnPWJbZl07c3dpdGNoKGcudHlwZSl7Y2FzZSJzcGxpY2UiOkQoZSxnLmluZGV4LGcucmVtb3ZlZC5zbGljZSgpLGcuYWRkZWRDb3VudCk7YnJlYWs7Y2FzZSJuZXciOmNhc2UidXBkYXRlZCI6Y2FzZSJkZWxldGVkIjppZighYyhnLm5hbWUpKWNvbnRpbnVlO3ZhciBoPWQoZy5uYW1lKTtpZigwPmgpY29udGludWU7RChlLGgsW2cub2xkVmFsdWVdLDEpO2JyZWFrO2RlZmF1bHQ6Y29uc29sZS5lcnJvcigiVW5leHBlY3RlZCByZWNvcmQgdHlwZTogIitKU09OLnN0cmluZ2lmeShnKSl9fXJldHVybiBlfWZ1bmN0aW9uIEYoYSxiKXt2YXIgYz1bXTtyZXR1cm4gRShhLGIpLmZvckVhY2goZnVuY3Rpb24oYil7cmV0dXJuIDE9PWIuYWRkZWRDb3VudCYmMT09Yi5yZW1vdmVkLmxlbmd0aD8oYi5yZW1vdmVkWzBdIT09YVtiLmluZGV4XSYmYy5wdXNoKGIpLHZvaWQgMCk6KGM9Yy5jb25jYXQoQihhLGIuaW5kZXgsYi5pbmRleCtiLmFkZGVkQ291bnQsYi5yZW1vdmVkLDAsYi5yZW1vdmVkLmxlbmd0aCkpLHZvaWQgMCl9KSxjfXZhciBHPWIoKSxIPSExO3RyeXt2YXIgST1uZXcgRnVuY3Rpb24oIiIsInJldHVybiB0cnVlOyIpO0g9SSgpfWNhdGNoKEope312YXIgSz1hLk51bWJlci5pc05hTnx8ZnVuY3Rpb24oYil7cmV0dXJuIm51bWJlciI9PXR5cGVvZiBiJiZhLmlzTmFOKGIpfSxMPSJfX3Byb3RvX18iaW57fT9mdW5jdGlvbihhKXtyZXR1cm4gYX06ZnVuY3Rpb24oYSl7dmFyIGI9YS5fX3Byb3RvX187aWYoIWIpcmV0dXJuIGE7dmFyIGM9T2JqZWN0LmNyZWF0ZShiKTtyZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoYSkuZm9yRWFjaChmdW5jdGlvbihiKXtPYmplY3QuZGVmaW5lUHJvcGVydHkoYyxiLE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoYSxiKSl9KSxjfSxNPSJbJF9hLXpBLVpdIixOPSJbJF9hLXpBLVowLTldIixPPU0rIisiK04rIioiLFA9Iig/OlswLTldfFsxLTldK1swLTldKykiLFE9Iig/OiIrTysifCIrUCsiKSIsUj0iKD86IitRKyIpKD86XFwuIitRKyIpKiIsUz1uZXcgUmVnRXhwKCJeIitSKyIkIiksVD17fTtpLnByb3RvdHlwZT1MKHtfX3Byb3RvX186W10sdG9TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5qb2luKCIuIil9LGdldFZhbHVlRnJvbTpmdW5jdGlvbihhKXtmb3IodmFyIGI9MDtiPHRoaXMubGVuZ3RoO2IrKyl7aWYodm9pZCAwPT09YXx8bnVsbD09PWEpcmV0dXJuO2E9YVt0aGlzW2JdXX1yZXR1cm4gYX0sZ2V0VmFsdWVGcm9tT2JzZXJ2ZWQ6ZnVuY3Rpb24oYSxiKXtiLnJlc2V0KCk7Zm9yKHZhciBjPTA7Yzx0aGlzLmxlbmd0aDtjKyspe2lmKHZvaWQgMD09PWF8fG51bGw9PT1hKXJldHVybiBiLmNsZWFudXAoKSx2b2lkIDA7Yi5vYnNlcnZlKGEpLGE9YVt0aGlzW2NdXX1yZXR1cm4gYX0sY29tcGlsZWRHZXRWYWx1ZUZyb21GbjpmdW5jdGlvbigpe3ZhciBhPXRoaXMubWFwKGZ1bmN0aW9uKGEpe3JldHVybiBjKGEpPydbIicrYSsnIl0nOiIuIithfSksYj0iIixkPSJvYmoiO2IrPSJpZiAob2JqICE9PSBudWxsICYmIG9iaiAhPT0gdW5kZWZpbmVkIjtmb3IodmFyIGU9MDtlPHRoaXMubGVuZ3RoLTE7ZSsrKXRoaXNbZV0sZCs9YVtlXSxiKz0iICYmXG4gICAgICIrZCsiICE9PSBudWxsICYmICIrZCsiICE9PSB1bmRlZmluZWQiO3JldHVybiBiKz0iKVxuIixkKz1hW2VdLGIrPSIgIHJldHVybiAiK2QrIjtcbmVsc2VcbiAgcmV0dXJuIHVuZGVmaW5lZDsiLG5ldyBGdW5jdGlvbigib2JqIixiKX0sc2V0VmFsdWVGcm9tOmZ1bmN0aW9uKGEsYil7aWYoIXRoaXMubGVuZ3RoKXJldHVybiExO2Zvcih2YXIgYz0wO2M8dGhpcy5sZW5ndGgtMTtjKyspe2lmKHZvaWQgMD09PWF8fG51bGw9PT1hKXJldHVybiExO2E9YVt0aGlzW2NdXX1yZXR1cm4gdm9pZCAwPT09YXx8bnVsbD09PWE/ITE6KGFbdGhpc1t0aGlzLmxlbmd0aC0xXV09YiwhMCl9fSk7dmFyIFU9MWUzO28ucHJvdG90eXBlPXt2YWxpZDohMSxpbnRlcm5hbENhbGxiYWNrOmZ1bmN0aW9uKGEpe3RoaXMudmFsaWQmJnRoaXMucmVwb3J0aW5nJiZ0aGlzLmNoZWNrKGEpJiYodGhpcy5yZXBvcnQoKSx0aGlzLnRlc3RpbmdSZXN1bHRzJiYodGhpcy50ZXN0aW5nUmVzdWx0cy5hbnlDaGFuZ2VkPSEwKSl9LGNsb3NlOmZ1bmN0aW9uKCl7dGhpcy52YWxpZCYmKCJmdW5jdGlvbiI9PXR5cGVvZiB0aGlzLm9iamVjdC51bm9ic2VydmVkJiZ0aGlzLm9iamVjdC51bm9ic2VydmVkKCksdGhpcy5kaXNjb25uZWN0KCksdGhpcy5vYmplY3Q9dm9pZCAwLHRoaXMudmFsaWQ9ITEpfSxkZWxpdmVyOmZ1bmN0aW9uKGEpe3RoaXMudmFsaWQmJihHPyh0aGlzLnRlc3RpbmdSZXN1bHRzPWEsT2JqZWN0LmRlbGl2ZXJDaGFuZ2VSZWNvcmRzKHRoaXMuYm91bmRJbnRlcm5hbENhbGxiYWNrKSx0aGlzLnRlc3RpbmdSZXN1bHRzPXZvaWQgMCk6aih0aGlzKSl9LHJlcG9ydDpmdW5jdGlvbigpe2lmKHRoaXMucmVwb3J0aW5nKXt0aGlzLnN5bmMoITEpLHRoaXMucmVwb3J0QXJncy5wdXNoKHRoaXMudG9rZW4pO3RyeXt0aGlzLmNhbGxiYWNrLmFwcGx5KHRoaXMudGFyZ2V0LHRoaXMucmVwb3J0QXJncyl9Y2F0Y2goYSl7by5fZXJyb3JUaHJvd25EdXJpbmdDYWxsYmFjaz0hMCxjb25zb2xlLmVycm9yKCJFeGNlcHRpb24gY2F1Z2h0IGR1cmluZyBvYnNlcnZlciBjYWxsYmFjazogIithKX10aGlzLnJlcG9ydEFyZ3M9dm9pZCAwfX0scmVzZXQ6ZnVuY3Rpb24oKXt0aGlzLnZhbGlkJiYoRyYmKHRoaXMucmVwb3J0aW5nPSExLE9iamVjdC5kZWxpdmVyQ2hhbmdlUmVjb3Jkcyh0aGlzLmJvdW5kSW50ZXJuYWxDYWxsYmFjayksdGhpcy5yZXBvcnRpbmc9ITApLHRoaXMuc3luYyghMCkpfX07dmFyIFYsVz0hR3x8YS5mb3JjZUNvbGxlY3RPYnNlcnZlcnM7by5fYWxsT2JzZXJ2ZXJzQ291bnQ9MCxXJiYoVj1bXSk7dmFyIFg9ITEsWT0iZnVuY3Rpb24iPT10eXBlb2YgT2JqZWN0LmRlbGl2ZXJBbGxDaGFuZ2VSZWNvcmRzO2EuUGxhdGZvcm09YS5QbGF0Zm9ybXx8e30sYS5QbGF0Zm9ybS5wZXJmb3JtTWljcm90YXNrQ2hlY2twb2ludD1mdW5jdGlvbigpe2lmKCFYKXtpZihZKXJldHVybiBPYmplY3QuZGVsaXZlckFsbENoYW5nZVJlY29yZHMoKSx2b2lkIDA7aWYoVyl7WD0hMDt2YXIgYT0wLGI9e307ZG97YSsrO3ZhciBjPVY7Vj1bXSxiLmFueUNoYW5nZWQ9ITE7Zm9yKHZhciBkPTA7ZDxjLmxlbmd0aDtkKyspe3ZhciBlPWNbZF07ZS52YWxpZCYmKEc/ZS5kZWxpdmVyKGIpOmUuY2hlY2soKSYmKGIuYW55Q2hhbmdlZD0hMCxlLnJlcG9ydCgpKSxWLnB1c2goZSkpfX13aGlsZShVPmEmJmIuYW55Q2hhbmdlZCk7by5fYWxsT2JzZXJ2ZXJzQ291bnQ9Vi5sZW5ndGgsWD0hMX19fSxXJiYoYS5QbGF0Zm9ybS5jbGVhck9ic2VydmVycz1mdW5jdGlvbigpe1Y9W119KSxxLnByb3RvdHlwZT1MKHtfX3Byb3RvX186by5wcm90b3R5cGUsY29ubmVjdDpmdW5jdGlvbigpe0cmJk9iamVjdC5vYnNlcnZlKHRoaXMub2JqZWN0LHRoaXMuYm91bmRJbnRlcm5hbENhbGxiYWNrKX0sc3luYzpmdW5jdGlvbigpe0d8fCh0aGlzLm9sZE9iamVjdD1uKHRoaXMub2JqZWN0KSl9LGNoZWNrOmZ1bmN0aW9uKGEpe3ZhciBiLGM7aWYoRyl7aWYoIWEpcmV0dXJuITE7Yz17fSxiPXYodGhpcy5vYmplY3QsYSxjKX1lbHNlIGM9dGhpcy5vbGRPYmplY3QsYj1tKHRoaXMub2JqZWN0LHRoaXMub2xkT2JqZWN0KTtyZXR1cm4gbChiKT8hMToodGhpcy5yZXBvcnRBcmdzPVtiLmFkZGVkfHx7fSxiLnJlbW92ZWR8fHt9LGIuY2hhbmdlZHx8e31dLHRoaXMucmVwb3J0QXJncy5wdXNoKGZ1bmN0aW9uKGEpe3JldHVybiBjW2FdfSksITApfSxkaXNjb25uZWN0OmZ1bmN0aW9uKCl7Rz90aGlzLm9iamVjdCYmT2JqZWN0LnVub2JzZXJ2ZSh0aGlzLm9iamVjdCx0aGlzLmJvdW5kSW50ZXJuYWxDYWxsYmFjayk6dGhpcy5vbGRPYmplY3Q9dm9pZCAwfX0pLHIucHJvdG90eXBlPUwoe19fcHJvdG9fXzpxLnByb3RvdHlwZSxjb25uZWN0OmZ1bmN0aW9uKCl7RyYmQXJyYXkub2JzZXJ2ZSh0aGlzLm9iamVjdCx0aGlzLmJvdW5kSW50ZXJuYWxDYWxsYmFjayl9LHN5bmM6ZnVuY3Rpb24oKXtHfHwodGhpcy5vbGRPYmplY3Q9dGhpcy5vYmplY3Quc2xpY2UoKSl9LGNoZWNrOmZ1bmN0aW9uKGEpe3ZhciBiO2lmKEcpe2lmKCFhKXJldHVybiExO2I9Rih0aGlzLm9iamVjdCxhKX1lbHNlIGI9Qih0aGlzLm9iamVjdCwwLHRoaXMub2JqZWN0Lmxlbmd0aCx0aGlzLm9sZE9iamVjdCwwLHRoaXMub2xkT2JqZWN0Lmxlbmd0aCk7cmV0dXJuIGImJmIubGVuZ3RoPyh0aGlzLnJlcG9ydEFyZ3M9W2JdLCEwKTohMX19KSxyLmFwcGx5U3BsaWNlcz1mdW5jdGlvbihhLGIsYyl7Yy5mb3JFYWNoKGZ1bmN0aW9uKGMpe2Zvcih2YXIgZD1bYy5pbmRleCxjLnJlbW92ZWQubGVuZ3RoXSxlPWMuaW5kZXg7ZTxjLmluZGV4K2MuYWRkZWRDb3VudDspZC5wdXNoKGJbZV0pLGUrKztBcnJheS5wcm90b3R5cGUuc3BsaWNlLmFwcGx5KGEsZCl9KX07dmFyIFo9T2JqZWN0LmdldFByb3RvdHlwZU9mKHt9KSwkPU9iamVjdC5nZXRQcm90b3R5cGVPZihbXSk7cy5wcm90b3R5cGU9e3Jlc2V0OmZ1bmN0aW9uKCl7dGhpcy5pc09ic2VydmVkPSF0aGlzLmlzT2JzZXJ2ZWR9LG9ic2VydmU6ZnVuY3Rpb24oYSl7aWYoZShhKSYmYSE9PVomJmEhPT0kKXt2YXIgYj10aGlzLmFyci5pbmRleE9mKGEpO2I+PTAmJnRoaXMuYXJyW2IrMV09PT10aGlzLmlzT2JzZXJ2ZWR8fCgwPmImJihiPXRoaXMuYXJyLmxlbmd0aCx0aGlzLmFycltiXT1hLE9iamVjdC5vYnNlcnZlKGEsdGhpcy5jYWxsYmFjaykpLHRoaXMuYXJyW2IrMV09dGhpcy5pc09ic2VydmVkLHRoaXMub2JzZXJ2ZShPYmplY3QuZ2V0UHJvdG90eXBlT2YoYSkpKX19LGNsZWFudXA6ZnVuY3Rpb24oKXtmb3IodmFyIGE9MCxiPTAsYz10aGlzLmlzT2JzZXJ2ZWQ7Yjx0aGlzLmFyci5sZW5ndGg7KXt2YXIgZD10aGlzLmFycltiXTt0aGlzLmFycltiKzFdPT1jPyhiPmEmJih0aGlzLmFyclthXT1kLHRoaXMuYXJyW2ErMV09YyksYSs9Mik6T2JqZWN0LnVub2JzZXJ2ZShkLHRoaXMuY2FsbGJhY2spLGIrPTJ9dGhpcy5hcnIubGVuZ3RoPWF9fSx0LnByb3RvdHlwZT1MKHtfX3Byb3RvX186by5wcm90b3R5cGUsY29ubmVjdDpmdW5jdGlvbigpe0cmJih0aGlzLm9ic2VydmVkU2V0PW5ldyBzKHRoaXMuYm91bmRJbnRlcm5hbENhbGxiYWNrKSl9LGRpc2Nvbm5lY3Q6ZnVuY3Rpb24oKXt0aGlzLnZhbHVlPXZvaWQgMCxHJiYodGhpcy5vYnNlcnZlZFNldC5yZXNldCgpLHRoaXMub2JzZXJ2ZWRTZXQuY2xlYW51cCgpLHRoaXMub2JzZXJ2ZWRTZXQ9dm9pZCAwKX0sY2hlY2s6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy52YWx1ZT1HP3RoaXMucGF0aC5nZXRWYWx1ZUZyb21PYnNlcnZlZCh0aGlzLm9iamVjdCx0aGlzLm9ic2VydmVkU2V0KTp0aGlzLnBhdGguZ2V0VmFsdWVGcm9tKHRoaXMub2JqZWN0KSxmKHRoaXMudmFsdWUsdGhpcy5vbGRWYWx1ZSk/ITE6KHRoaXMucmVwb3J0QXJncz1bdGhpcy52YWx1ZSx0aGlzLm9sZFZhbHVlXSwhMCl9LHN5bmM6ZnVuY3Rpb24oYSl7YSYmKHRoaXMudmFsdWU9Rz90aGlzLnBhdGguZ2V0VmFsdWVGcm9tT2JzZXJ2ZWQodGhpcy5vYmplY3QsdGhpcy5vYnNlcnZlZFNldCk6dGhpcy5wYXRoLmdldFZhbHVlRnJvbSh0aGlzLm9iamVjdCkpLHRoaXMub2xkVmFsdWU9dGhpcy52YWx1ZX19KSx0LmdldFZhbHVlQXRQYXRoPWZ1bmN0aW9uKGEsYil7dmFyIGM9aChiKTtpZihjKXJldHVybiBjLmdldFZhbHVlRnJvbShhKX0sdC5zZXRWYWx1ZUF0UGF0aD1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9aChiKTtkJiZkLnNldFZhbHVlRnJvbShhLGMpfTt2YXIgXz17Im5ldyI6ITAsdXBkYXRlZDohMCxkZWxldGVkOiEwfTt0LmRlZmluZVByb3BlcnR5PWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1jLm9iamVjdCxlPWgoYy5wYXRoKSxmPXUoYSxiKSxnPW5ldyB0KGQsYy5wYXRoLGZ1bmN0aW9uKGEsYil7ZiYmZigidXBkYXRlZCIsYil9KTtyZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KGEsYix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGUuZ2V0VmFsdWVGcm9tKGQpfSxzZXQ6ZnVuY3Rpb24oYSl7ZS5zZXRWYWx1ZUZyb20oZCxhKX0sY29uZmlndXJhYmxlOiEwfSkse2Nsb3NlOmZ1bmN0aW9uKCl7dmFyIGM9ZS5nZXRWYWx1ZUZyb20oZCk7ZiYmZy5kZWxpdmVyKCksZy5jbG9zZSgpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShhLGIse3ZhbHVlOmMsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfSl9fX07dmFyIGFiPTAsYmI9MSxjYj0yLGRiPTM7YS5PYnNlcnZlcj1vLGEuT2JzZXJ2ZXIuaGFzT2JqZWN0T2JzZXJ2ZT1HLGEuQXJyYXlPYnNlcnZlcj1yLGEuQXJyYXlPYnNlcnZlci5jYWxjdWxhdGVTcGxpY2VzPWZ1bmN0aW9uKGEsYil7cmV0dXJuIEIoYSwwLGEubGVuZ3RoLGIsMCxiLmxlbmd0aCl9LGEuT2JqZWN0T2JzZXJ2ZXI9cSxhLlBhdGhPYnNlcnZlcj10LGEuUGF0aD1pfSh0aGlzKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhKXtpZighYSl0aHJvdyBuZXcgRXJyb3IoIkFzc2VydGlvbiBmYWlsZWQiKX1mdW5jdGlvbiBjKGEpe2Zvcig7YS5wYXJlbnROb2RlOylhPWEucGFyZW50Tm9kZTtyZXR1cm4iZnVuY3Rpb24iPT10eXBlb2YgYS5nZXRFbGVtZW50QnlJZD9hOm51bGx9ZnVuY3Rpb24gZChhKXtyZXR1cm4gYS5vd25lckRvY3VtZW50LmNvbnRhaW5zKGEpfWZ1bmN0aW9uIGUoYSxiLGMsZCl7dGhpcy5jbG9zZWQ9ITEsdGhpcy5ub2RlPWEsdGhpcy5wcm9wZXJ0eT1iLHRoaXMubW9kZWw9Yyx0aGlzLnBhdGg9ZCx0aGlzLm9ic2VydmVyPW5ldyBQYXRoT2JzZXJ2ZXIoYyxkLHRoaXMuYm91bmRWYWx1ZUNoYW5nZWQsdGhpcyksdGhpcy5ib3VuZFZhbHVlQ2hhbmdlZCh0aGlzLnZhbHVlKX1mdW5jdGlvbiBmKGEsYixjLGQpe3RoaXMuY29uZGl0aW9uYWw9Ij8iPT1iW2IubGVuZ3RoLTFdLHRoaXMuY29uZGl0aW9uYWwmJihhLnJlbW92ZUF0dHJpYnV0ZShiKSxiPWIuc2xpY2UoMCwtMSkpLGUuY2FsbCh0aGlzLGEsYixjLGQpfWZ1bmN0aW9uIGcoYSl7c3dpdGNoKGEudHlwZSl7Y2FzZSJjaGVja2JveCI6cmV0dXJuIFQ7Y2FzZSJyYWRpbyI6Y2FzZSJzZWxlY3QtbXVsdGlwbGUiOmNhc2Uic2VsZWN0LW9uZSI6cmV0dXJuImNoYW5nZSI7ZGVmYXVsdDpyZXR1cm4iaW5wdXQifX1mdW5jdGlvbiBoKGEsYixjLGQpe2UuY2FsbCh0aGlzLGEsYixjLGQpLHRoaXMuZXZlbnRUeXBlPWcodGhpcy5ub2RlKSx0aGlzLmJvdW5kTm9kZVZhbHVlVG9Nb2RlbD10aGlzLm5vZGVWYWx1ZUNoYW5nZWQuYmluZCh0aGlzKSx0aGlzLm5vZGUuYWRkRXZlbnRMaXN0ZW5lcih0aGlzLmV2ZW50VHlwZSx0aGlzLmJvdW5kTm9kZVZhbHVlVG9Nb2RlbCwhMCl9ZnVuY3Rpb24gaShhKXtpZighZChhKSlyZXR1cm5bXTtpZihhLmZvcm0pcmV0dXJuIFEoYS5mb3JtLmVsZW1lbnRzLGZ1bmN0aW9uKGIpe3JldHVybiBiIT1hJiYiSU5QVVQiPT1iLnRhZ05hbWUmJiJyYWRpbyI9PWIudHlwZSYmYi5uYW1lPT1hLm5hbWV9KTt2YXIgYj1hLm93bmVyRG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnaW5wdXRbdHlwZT0icmFkaW8iXVtuYW1lPSInK2EubmFtZSsnIl0nKTtyZXR1cm4gUShiLGZ1bmN0aW9uKGIpe3JldHVybiBiIT1hJiYhYi5mb3JtfSl9ZnVuY3Rpb24gaihhLGIsYyl7aC5jYWxsKHRoaXMsYSwiY2hlY2tlZCIsYixjKX1mdW5jdGlvbiBrKGEsYixjKXtoLmNhbGwodGhpcyxhLCJzZWxlY3RlZEluZGV4IixiLGMpfWZ1bmN0aW9uIGwoYSl7cmV0dXJuICRbYS50YWdOYW1lXSYmYS5oYXNBdHRyaWJ1dGUoInRlbXBsYXRlIil9ZnVuY3Rpb24gbShhKXtyZXR1cm4iVEVNUExBVEUiPT1hLnRhZ05hbWV8fGwoYSl9ZnVuY3Rpb24gbihhKXtyZXR1cm4gXyYmIlRFTVBMQVRFIj09YS50YWdOYW1lfWZ1bmN0aW9uIG8oYSxiKXt2YXIgYz1hLnF1ZXJ5U2VsZWN0b3JBbGwoYWIpO20oYSkmJmIoYSksUChjLGIpfWZ1bmN0aW9uIHAoYSl7ZnVuY3Rpb24gYihhKXtIVE1MVGVtcGxhdGVFbGVtZW50LmRlY29yYXRlKGEpfHxwKGEuY29udGVudCl9byhhLGIpfWZ1bmN0aW9uIHEoYSxiKXtPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhiKS5mb3JFYWNoKGZ1bmN0aW9uKGMpe09iamVjdC5kZWZpbmVQcm9wZXJ0eShhLGMsT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihiLGMpKX0pfWZ1bmN0aW9uIHIoYSl7aWYoIWEuZGVmYXVsdFZpZXcpcmV0dXJuIGE7dmFyIGI9ZWIuZ2V0KGEpO2lmKCFiKXtmb3IoYj1hLmltcGxlbWVudGF0aW9uLmNyZWF0ZUhUTUxEb2N1bWVudCgiIik7Yi5sYXN0Q2hpbGQ7KWIucmVtb3ZlQ2hpbGQoYi5sYXN0Q2hpbGQpO2ViLnNldChhLGIpfXJldHVybiBifWZ1bmN0aW9uIHMoYSl7dmFyIGI9YS5vd25lckRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInRlbXBsYXRlIik7YS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShiLGEpO2Zvcih2YXIgYz1hLmF0dHJpYnV0ZXMsZD1jLmxlbmd0aDtkLS0+MDspe3ZhciBlPWNbZF07WltlLm5hbWVdJiYoInRlbXBsYXRlIiE9PWUubmFtZSYmYi5zZXRBdHRyaWJ1dGUoZS5uYW1lLGUudmFsdWUpLGEucmVtb3ZlQXR0cmlidXRlKGUubmFtZSkpfXJldHVybiBifWZ1bmN0aW9uIHQoYSxiLGMpe3ZhciBkPWEuY29udGVudDtpZihjKXJldHVybiBkLmFwcGVuZENoaWxkKGIpLHZvaWQgMDtmb3IodmFyIGU7ZT1iLmZpcnN0Q2hpbGQ7KWQuYXBwZW5kQ2hpbGQoZSl9ZnVuY3Rpb24gdShhKXsiVEVNUExBVEUiPT09YS50YWdOYW1lP198fChjYj9hLl9fcHJvdG9fXz1IVE1MVGVtcGxhdGVFbGVtZW50LnByb3RvdHlwZTpxKGEsSFRNTFRlbXBsYXRlRWxlbWVudC5wcm90b3R5cGUpKToocShhLEhUTUxUZW1wbGF0ZUVsZW1lbnQucHJvdG90eXBlKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoYSwiY29udGVudCIsaWIpKX1mdW5jdGlvbiB2KGEpe3ZhciBiPWxiLmdldChhKTtifHwoYj1mdW5jdGlvbigpe0goYSxhLm1vZGVsLGEuYmluZGluZ0RlbGVnYXRlKX0sbGIuc2V0KGEsYikpLGJiKGIpfWZ1bmN0aW9uIHcoYSxiLGMsZCl7dGhpcy5jbG9zZWQ9ITEsdGhpcy5ub2RlPWEsdGhpcy5wcm9wZXJ0eT1iLHRoaXMubW9kZWw9Yyx0aGlzLnBhdGg9ZCx0aGlzLm5vZGUuaW5wdXRzLmJpbmQodGhpcy5wcm9wZXJ0eSxjLGR8fCIiKX1mdW5jdGlvbiB4KGEpe3JldHVybiAzPT1hLmxlbmd0aCYmMD09YVswXS5sZW5ndGgmJjA9PWFbMl0ubGVuZ3RofWZ1bmN0aW9uIHkoYSl7aWYoYSYmYS5sZW5ndGgpe2Zvcih2YXIgYixjPWEubGVuZ3RoLGQ9MCxlPTAsZj0wO2M+ZTspe2lmKGQ9YS5pbmRleE9mKCJ7eyIsZSksZj0wPmQ/LTE6YS5pbmRleE9mKCJ9fSIsZCsyKSwwPmYpe2lmKCFiKXJldHVybjtiLnB1c2goYS5zbGljZShlKSk7YnJlYWt9Yj1ifHxbXSxiLnB1c2goYS5zbGljZShlLGQpKSxiLnB1c2goYS5zbGljZShkKzIsZikudHJpbSgpKSxlPWYrMn1yZXR1cm4gZT09PWMmJmIucHVzaCgiIiksYn19ZnVuY3Rpb24geihhLGIsYyxkLGUpe3ZhciBmLGc9ZSYmZVtYXTtyZXR1cm4gZyYmImZ1bmN0aW9uIj09dHlwZW9mIGcmJihmPWcoYyxkLGIsYSksZiYmKGM9ZixkPSJ2YWx1ZSIpKSxhLmJpbmQoYixjLGQpfWZ1bmN0aW9uIEEoYSxiLGMsZCxlKXtmb3IodmFyIGY9MDtmPGEubGVuZ3RoO2YrPTIpe3ZhciBnPUMoYixhW2ZdLGFbZisxXSxjLGQpO2UmJmUucHVzaChnKX19ZnVuY3Rpb24gQihhKXtyZXR1cm4gZnVuY3Rpb24oYil7Zm9yKHZhciBjPSIiLGQ9MCxlPSEwO2Q8YS5sZW5ndGg7ZCsrLGU9IWUpaWYoZSljKz1hW2RdO2Vsc2V7dmFyIGY9YltkXTt2b2lkIDAhPT1mJiYoYys9Zil9cmV0dXJuIGN9fWZ1bmN0aW9uIEMoYSxiLGMsZCxlKXtpZih4KGMpKXJldHVybiB6KGEsYixkLGNbMV0sZSk7Yy5jb21iaW5hdG9yPWMuY29tYmluYXRvcnx8QihjKTt2YXIgZj1uZXcgTShjLmNvbWJpbmF0b3IpO2Yuc2NoZWR1bGVkPSEwO2Zvcih2YXIgZz0xO2c8Yy5sZW5ndGg7Zys9Mil6KGYsZyxkLGNbZ10sZSk7cmV0dXJuIGYucmVzb2x2ZSgpLGEuYmluZChiLGYsInZhbHVlIil9ZnVuY3Rpb24gRChhKXtiKGEpO2Zvcih2YXIgYyxkPW0oYSksZT0hMSxmPSExLGc9MDtnPGEuYXR0cmlidXRlcy5sZW5ndGg7ZysrKXt2YXIgaD1hLmF0dHJpYnV0ZXNbZ10saT1oLm5hbWUsaj1oLnZhbHVlO2QmJihpPT09Vz9lPSEwOihpPT09VXx8aT09PVYpJiYoZj0hMCxqPWp8fCJ7e319IikpO3ZhciBrPXkoaik7ayYmKGM9Y3x8W10sYy5wdXNoKGksaykpfXJldHVybiBlJiYhZiYmKGM9Y3x8W10sYy5wdXNoKFUseSgie3t9fSIpKSksY31mdW5jdGlvbiBFKGEpe2lmKGEubm9kZVR5cGU9PT1Ob2RlLkVMRU1FTlRfTk9ERSlyZXR1cm4gRChhKTtpZihhLm5vZGVUeXBlPT09Tm9kZS5URVhUX05PREUpe3ZhciBiPXkoYS5kYXRhKTtpZihiKXJldHVyblsidGV4dENvbnRlbnQiLGJdfX1mdW5jdGlvbiBGKGEpe3RoaXMubm9kZT1hfWZ1bmN0aW9uIEcoYSxiLGMsZCxlKXtpZihiJiYoYi50ZW1wbGF0ZVJlZiYmKEhUTUxUZW1wbGF0ZUVsZW1lbnQuZGVjb3JhdGUoYSxiLnRlbXBsYXRlUmVmKSxkJiZrYi5zZXQoYSxkKSxlJiZlLnB1c2gobmV3IEYoYSkpKSxiLmxlbmd0aCYmQShiLGEsYyxkLGUpLGIuY2hpbGRyZW4pKWZvcih2YXIgZj0wLGc9YS5maXJzdENoaWxkO2c7Zz1nLm5leHRTaWJsaW5nKUcoZyxiLmNoaWxkcmVuW2YrK10sYyxkLGUpfWZ1bmN0aW9uIEgoYSxjLGQpe2IoYSk7dmFyIGU9RShhKTtlJiZBKGUsYSxjLGQpO2Zvcih2YXIgZj1hLmZpcnN0Q2hpbGQ7ZjtmPWYubmV4dFNpYmxpbmcpSChmLGMsZCl9ZnVuY3Rpb24gSShhLGIpe3ZhciBjPWEuY2xvbmVOb2RlKCExKTtpZihtKGMpKXJldHVybiBjO2Zvcih2YXIgZD1hLmZpcnN0Q2hpbGQ7ZDtkPWQubmV4dFNpYmxpbmcpYy5hcHBlbmRDaGlsZChJKGQsYikpO3JldHVybiBjfWZ1bmN0aW9uIEooYSl7dmFyIGI9RShhKTttKGEpJiYoYj1ifHxbXSxiLnRlbXBsYXRlUmVmPWEsYi5oYXNTdWJUZW1wbGF0ZT0hMCk7Zm9yKHZhciBjPWEuZmlyc3RDaGlsZCxkPTA7YztjPWMubmV4dFNpYmxpbmcsZCsrKXt2YXIgZT1KKGMpO2UmJihiPWJ8fFtdLGIuY2hpbGRyZW49Yi5jaGlsZHJlbnx8W10sYi5jaGlsZHJlbltkXT1lLGUuaGFzU3ViVGVtcGxhdGUmJihiLmhhc1N1YlRlbXBsYXRlPSEwKSl9cmV0dXJuIGJ9ZnVuY3Rpb24gSyhhLGIsYyl7dGhpcy5maXJzdE5vZGU9YSx0aGlzLmxhc3ROb2RlPWIsdGhpcy5tb2RlbD1jfWZ1bmN0aW9uIEwoYSxiKXtpZihhLmZpcnN0Q2hpbGQpZm9yKHZhciBjPW5ldyBLKGEuZmlyc3RDaGlsZCxhLmxhc3RDaGlsZCxiKSxkPWMuZmlyc3ROb2RlO2Q7KW1iLnNldChkLGMpLGQ9ZC5uZXh0U2libGluZ31mdW5jdGlvbiBNKGEpe3RoaXMub2JzZXJ2ZXJzPXt9LHRoaXMudmFsdWVzPXt9LHRoaXMudmFsdWU9dm9pZCAwLHRoaXMuc2l6ZT0wLHRoaXMuY29tYmluYXRvcl89YSx0aGlzLmNsb3NlZD0hMSx0aGlzLnNjaGVkdWxlZD0hMX1mdW5jdGlvbiBOKGEpe3RoaXMuY2xvc2VkPSExLHRoaXMudGVtcGxhdGVFbGVtZW50Xz1hLHRoaXMudGVybWluYXRvcnM9W10sdGhpcy5pdGVyYXRlZFZhbHVlPXZvaWQgMCx0aGlzLmFycmF5T2JzZXJ2ZXI9dm9pZCAwLHRoaXMuaW5wdXRzPW5ldyBNKHRoaXMucmVzb2x2ZUlucHV0cy5iaW5kKHRoaXMpKX12YXIgTyxQPUFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwuYmluZChBcnJheS5wcm90b3R5cGUuZm9yRWFjaCksUT1BcnJheS5wcm90b3R5cGUuZmlsdGVyLmNhbGwuYmluZChBcnJheS5wcm90b3R5cGUuZmlsdGVyKTthLk1hcCYmImZ1bmN0aW9uIj09dHlwZW9mIGEuTWFwLnByb3RvdHlwZS5mb3JFYWNoP089YS5NYXA6KE89ZnVuY3Rpb24oKXt0aGlzLmtleXM9W10sdGhpcy52YWx1ZXM9W119LE8ucHJvdG90eXBlPXtzZXQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmtleXMuaW5kZXhPZihhKTswPmM/KHRoaXMua2V5cy5wdXNoKGEpLHRoaXMudmFsdWVzLnB1c2goYikpOnRoaXMudmFsdWVzW2NdPWJ9LGdldDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmtleXMuaW5kZXhPZihhKTtpZighKDA+YikpcmV0dXJuIHRoaXMudmFsdWVzW2JdfSwiZGVsZXRlIjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmtleXMuaW5kZXhPZihhKTtyZXR1cm4gMD5iPyExOih0aGlzLmtleXMuc3BsaWNlKGIsMSksdGhpcy52YWx1ZXMuc3BsaWNlKGIsMSksITApfSxmb3JFYWNoOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTA7Yzx0aGlzLmtleXMubGVuZ3RoO2MrKylhLmNhbGwoYnx8dGhpcyx0aGlzLnZhbHVlc1tjXSx0aGlzLmtleXNbY10sdGhpcyl9fSk7dmFyIFI9Il9fcHJvdG9fXyJpbnt9P2Z1bmN0aW9uKGEpe3JldHVybiBhfTpmdW5jdGlvbihhKXt2YXIgYj1hLl9fcHJvdG9fXztpZighYilyZXR1cm4gYTt2YXIgYz1PYmplY3QuY3JlYXRlKGIpO3JldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhhKS5mb3JFYWNoKGZ1bmN0aW9uKGIpe09iamVjdC5kZWZpbmVQcm9wZXJ0eShjLGIsT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihhLGIpKX0pLGN9OyJmdW5jdGlvbiIhPXR5cGVvZiBkb2N1bWVudC5jb250YWlucyYmKERvY3VtZW50LnByb3RvdHlwZS5jb250YWlucz1mdW5jdGlvbihhKXtyZXR1cm4gYT09PXRoaXN8fGEucGFyZW50Tm9kZT09PXRoaXM/ITA6dGhpcy5kb2N1bWVudEVsZW1lbnQuY29udGFpbnMoYSl9KTt2YXIgUzsidW5kZWZpbmVkIiE9dHlwZW9mIFdlYWtNYXAmJm5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZigiRmlyZWZveC8iKTwwP1M9V2Vha01hcDpmdW5jdGlvbigpe3ZhciBhPU9iamVjdC5kZWZpbmVQcm9wZXJ0eSxiPU9iamVjdC5oYXNPd25Qcm9wZXJ0eSxjPShuZXcgRGF0ZSkuZ2V0VGltZSgpJTFlOTtTPWZ1bmN0aW9uKCl7dGhpcy5uYW1lPSJfX3N0IisoMWU5Kk1hdGgucmFuZG9tKCk+Pj4wKSsoYysrICsiX18iKX0sUy5wcm90b3R5cGU9e3NldDpmdW5jdGlvbihiLGMpe2EoYix0aGlzLm5hbWUse3ZhbHVlOmMsd3JpdGFibGU6ITB9KX0sZ2V0OmZ1bmN0aW9uKGEpe3JldHVybiBiLmNhbGwoYSx0aGlzLm5hbWUpP2FbdGhpcy5uYW1lXTp2b2lkIDB9LCJkZWxldGUiOmZ1bmN0aW9uKGEpe3RoaXMuc2V0KGEsdm9pZCAwKX19fSgpLE5vZGUucHJvdG90eXBlLmJpbmQ9ZnVuY3Rpb24oYSxiLGMpe3RoaXMuYmluZGluZ3M9dGhpcy5iaW5kaW5nc3x8e307dmFyIGQ9dGhpcy5iaW5kaW5nc1thXTtyZXR1cm4gZCYmZC5jbG9zZSgpLGQ9dGhpcy5jcmVhdGVCaW5kaW5nKGEsYixjKSx0aGlzLmJpbmRpbmdzW2FdPWQsZD9kOihjb25zb2xlLmVycm9yKCJVbmhhbmRsZWQgYmluZGluZyB0byBOb2RlOiAiLHRoaXMsYSxiLGMpLHZvaWQgMCl9LE5vZGUucHJvdG90eXBlLmNyZWF0ZUJpbmRpbmc9ZnVuY3Rpb24oKXt9LE5vZGUucHJvdG90eXBlLnVuYmluZD1mdW5jdGlvbihhKXtpZih0aGlzLmJpbmRpbmdzKXt2YXIgYj10aGlzLmJpbmRpbmdzW2FdO2ImJihiLmNsb3NlKCksZGVsZXRlIHRoaXMuYmluZGluZ3NbYV0pfX0sTm9kZS5wcm90b3R5cGUudW5iaW5kQWxsPWZ1bmN0aW9uKCl7aWYodGhpcy5iaW5kaW5ncyl7Zm9yKHZhciBhPU9iamVjdC5rZXlzKHRoaXMuYmluZGluZ3MpLGI9MDtiPGEubGVuZ3RoO2IrKyl7dmFyIGM9dGhpcy5iaW5kaW5nc1thW2JdXTtjJiZjLmNsb3NlKCl9dGhpcy5iaW5kaW5ncz17fX19LGUucHJvdG90eXBlPXtib3VuZFZhbHVlQ2hhbmdlZDpmdW5jdGlvbihhKXt0aGlzLm5vZGVbdGhpcy5wcm9wZXJ0eV09dGhpcy5zYW5pdGl6ZUJvdW5kVmFsdWUoYSl9LHNhbml0aXplQm91bmRWYWx1ZTpmdW5jdGlvbihhKXtyZXR1cm4gdm9pZCAwPT1hPyIiOlN0cmluZyhhKX0sY2xvc2U6ZnVuY3Rpb24oKXt0aGlzLmNsb3NlZHx8KHRoaXMub2JzZXJ2ZXIuY2xvc2UoKSx0aGlzLm9ic2VydmVyPXZvaWQgMCx0aGlzLm5vZGU9dm9pZCAwLHRoaXMubW9kZWw9dm9pZCAwLHRoaXMuY2xvc2VkPSEwKX0sZ2V0IHZhbHVlKCl7cmV0dXJuIHRoaXMub2JzZXJ2ZXIudmFsdWV9LHNldCB2YWx1ZShhKXtQYXRoT2JzZXJ2ZXIuc2V0VmFsdWVBdFBhdGgodGhpcy5tb2RlbCx0aGlzLnBhdGgsYSl9LHJlc2V0OmZ1bmN0aW9uKCl7dGhpcy5vYnNlcnZlci5yZXNldCgpfX0sVGV4dC5wcm90b3R5cGUuY3JlYXRlQmluZGluZz1mdW5jdGlvbihhLGIsYyl7cmV0dXJuInRleHRDb250ZW50Ij09PWE/bmV3IGUodGhpcywiZGF0YSIsYixjKTpOb2RlLnByb3RvdHlwZS5jcmVhdGVCaW5kaW5nLmNhbGwodGhpcyxhLGIsYyl9LGYucHJvdG90eXBlPVIoe19fcHJvdG9fXzplLnByb3RvdHlwZSxib3VuZFZhbHVlQ2hhbmdlZDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5jb25kaXRpb25hbD8oYT90aGlzLm5vZGUuc2V0QXR0cmlidXRlKHRoaXMucHJvcGVydHksIiIpOnRoaXMubm9kZS5yZW1vdmVBdHRyaWJ1dGUodGhpcy5wcm9wZXJ0eSksdm9pZCAwKToodGhpcy5ub2RlLnNldEF0dHJpYnV0ZSh0aGlzLnByb3BlcnR5LHRoaXMuc2FuaXRpemVCb3VuZFZhbHVlKGEpKSx2b2lkIDApfX0pLEVsZW1lbnQucHJvdG90eXBlLmNyZWF0ZUJpbmRpbmc9ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBuZXcgZih0aGlzLGEsYixjKX07dmFyIFQ7IWZ1bmN0aW9uKCl7dmFyIGE9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2IiksYj1hLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImlucHV0IikpO2Iuc2V0QXR0cmlidXRlKCJ0eXBlIiwiY2hlY2tib3giKTt2YXIgYyxkPTA7Yi5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsZnVuY3Rpb24oKXtkKyssYz1jfHwiY2xpY2sifSksYi5hZGRFdmVudExpc3RlbmVyKCJjaGFuZ2UiLGZ1bmN0aW9uKCl7ZCsrLGM9Y3x8ImNoYW5nZSJ9KTt2YXIgZT1kb2N1bWVudC5jcmVhdGVFdmVudCgiTW91c2VFdmVudCIpO2UuaW5pdE1vdXNlRXZlbnQoImNsaWNrIiwhMCwhMCx3aW5kb3csMCwwLDAsMCwwLCExLCExLCExLCExLDAsbnVsbCksYi5kaXNwYXRjaEV2ZW50KGUpLFQ9MT09ZD8iY2hhbmdlIjpjfSgpLGgucHJvdG90eXBlPVIoe19fcHJvdG9fXzplLnByb3RvdHlwZSxub2RlVmFsdWVDaGFuZ2VkOmZ1bmN0aW9uKCl7dGhpcy52YWx1ZT10aGlzLm5vZGVbdGhpcy5wcm9wZXJ0eV0sdGhpcy5yZXNldCgpLHRoaXMucG9zdFVwZGF0ZUJpbmRpbmcoKSxQbGF0Zm9ybS5wZXJmb3JtTWljcm90YXNrQ2hlY2twb2ludCgpfSxwb3N0VXBkYXRlQmluZGluZzpmdW5jdGlvbigpe30sY2xvc2U6ZnVuY3Rpb24oKXt0aGlzLmNsb3NlZHx8KHRoaXMubm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKHRoaXMuZXZlbnRUeXBlLHRoaXMuYm91bmROb2RlVmFsdWVUb01vZGVsLCEwKSxlLnByb3RvdHlwZS5jbG9zZS5jYWxsKHRoaXMpKX19KSxqLnByb3RvdHlwZT1SKHtfX3Byb3RvX186aC5wcm90b3R5cGUsc2FuaXRpemVCb3VuZFZhbHVlOmZ1bmN0aW9uKGEpe3JldHVybiBCb29sZWFuKGEpfSxwb3N0VXBkYXRlQmluZGluZzpmdW5jdGlvbigpeyJJTlBVVCI9PT10aGlzLm5vZGUudGFnTmFtZSYmInJhZGlvIj09PXRoaXMubm9kZS50eXBlJiZpKHRoaXMubm9kZSkuZm9yRWFjaChmdW5jdGlvbihhKXt2YXIgYj1hLmJpbmRpbmdzLmNoZWNrZWQ7YiYmKGIudmFsdWU9ITEpfSl9fSksSFRNTElucHV0RWxlbWVudC5wcm90b3R5cGUuY3JlYXRlQmluZGluZz1mdW5jdGlvbihhLGIsYyl7cmV0dXJuInZhbHVlIj09PWE/KHRoaXMucmVtb3ZlQXR0cmlidXRlKGEpLG5ldyBoKHRoaXMsInZhbHVlIixiLGMpKToiY2hlY2tlZCI9PT1hPyh0aGlzLnJlbW92ZUF0dHJpYnV0ZShhKSxuZXcgaih0aGlzLGIsYykpOkhUTUxFbGVtZW50LnByb3RvdHlwZS5jcmVhdGVCaW5kaW5nLmNhbGwodGhpcyxhLGIsYyl9LEhUTUxUZXh0QXJlYUVsZW1lbnQucHJvdG90eXBlLmNyZWF0ZUJpbmRpbmc9ZnVuY3Rpb24oYSxiLGMpe3JldHVybiJ2YWx1ZSI9PT1hPyh0aGlzLnJlbW92ZUF0dHJpYnV0ZShhKSxuZXcgaCh0aGlzLGEsYixjKSk6SFRNTEVsZW1lbnQucHJvdG90eXBlLmNyZWF0ZUJpbmRpbmcuY2FsbCh0aGlzLGEsYixjKX0say5wcm90b3R5cGU9Uih7X19wcm90b19fOmgucHJvdG90eXBlLGJvdW5kVmFsdWVDaGFuZ2VkOmZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoKXtjPmUubm9kZS5sZW5ndGgmJmQtLT9iYihiKTplLm5vZGVbZS5wcm9wZXJ0eV09Y312YXIgYz1OdW1iZXIoYSk7aWYoYzw9dGhpcy5ub2RlLmxlbmd0aClyZXR1cm4gdGhpcy5ub2RlW3RoaXMucHJvcGVydHldPWMsdm9pZCAwO3ZhciBkPTIsZT10aGlzO2JiKGIpfX0pLEhUTUxTZWxlY3RFbGVtZW50LnByb3RvdHlwZS5jcmVhdGVCaW5kaW5nPWZ1bmN0aW9uKGEsYixjKXtyZXR1cm4ic2VsZWN0ZWRpbmRleCI9PT1hLnRvTG93ZXJDYXNlKCk/KHRoaXMucmVtb3ZlQXR0cmlidXRlKGEpLG5ldyBrKHRoaXMsYixjKSk6SFRNTEVsZW1lbnQucHJvdG90eXBlLmNyZWF0ZUJpbmRpbmcuY2FsbCh0aGlzLGEsYixjKX07dmFyIFU9ImJpbmQiLFY9InJlcGVhdCIsVz0iaWYiLFg9ImdldEJpbmRpbmciLFk9ImdldEluc3RhbmNlTW9kZWwiLFo9e3RlbXBsYXRlOiEwLHJlcGVhdDohMCxiaW5kOiEwLHJlZjohMH0sJD17VEhFQUQ6ITAsVEJPRFk6ITAsVEZPT1Q6ITAsVEg6ITAsVFI6ITAsVEQ6ITAsQ09MR1JPVVA6ITAsQ09MOiEwLENBUFRJT046ITAsT1BUSU9OOiEwLE9QVEdST1VQOiEwfSxfPSJ1bmRlZmluZWQiIT10eXBlb2YgSFRNTFRlbXBsYXRlRWxlbWVudCxhYj0idGVtcGxhdGUsICIrT2JqZWN0LmtleXMoJCkubWFwKGZ1bmN0aW9uKGEpe3JldHVybiBhLnRvTG93ZXJDYXNlKCkrIlt0ZW1wbGF0ZV0ifSkuam9pbigiLCAiKSxiYj1mdW5jdGlvbigpe2Z1bmN0aW9uIGEoYSl7dGhpcy5uZXh0UnVubmVyPWEsdGhpcy52YWx1ZT0hMSx0aGlzLmxhc3RWYWx1ZT10aGlzLnZhbHVlLHRoaXMuc2NoZWR1bGVkPVtdLHRoaXMuc2NoZWR1bGVkSWRzPVtdLHRoaXMucnVubmluZz0hMSx0aGlzLm9ic2VydmVyPW5ldyBQYXRoT2JzZXJ2ZXIodGhpcywidmFsdWUiLHRoaXMucnVuLHRoaXMpfWZ1bmN0aW9uIGIoYSl7dmFyIGI9YVtlXTthW2VdfHwoYj1kKyssYVtlXT1iKSxjLnNjaGVkdWxlKGEsYil9YS5wcm90b3R5cGU9e3NjaGVkdWxlOmZ1bmN0aW9uKGEsYil7aWYoIXRoaXMuc2NoZWR1bGVkSWRzW2JdKXtpZih0aGlzLnJ1bm5pbmcpcmV0dXJuIHRoaXMubmV4dFJ1bm5lci5zY2hlZHVsZShhLGIpO3RoaXMuc2NoZWR1bGVkSWRzW2JdPSEwLHRoaXMuc2NoZWR1bGVkLnB1c2goYSksdGhpcy5sYXN0VmFsdWU9PT10aGlzLnZhbHVlJiYodGhpcy52YWx1ZT0hdGhpcy52YWx1ZSl9fSxydW46ZnVuY3Rpb24oKXt0aGlzLnJ1bm5pbmc9ITA7Zm9yKHZhciBhPTA7YTx0aGlzLnNjaGVkdWxlZC5sZW5ndGg7YSsrKXt2YXIgYj10aGlzLnNjaGVkdWxlZFthXSxjPWJbZV07dGhpcy5zY2hlZHVsZWRJZHNbY109ITEsImZ1bmN0aW9uIj09dHlwZW9mIGI/YigpOmIucmVzb2x2ZSgpfXRoaXMuc2NoZWR1bGVkPVtdLHRoaXMuc2NoZWR1bGVkSWRzPVtdLHRoaXMubGFzdFZhbHVlPXRoaXMudmFsdWUsdGhpcy5ydW5uaW5nPSExfX07dmFyIGM9bmV3IGEobmV3IGEpLGQ9MSxlPSJfX3NjaGVkdWxlZElkX18iO3JldHVybiBifSgpO2RvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoIkRPTUNvbnRlbnRMb2FkZWQiLGZ1bmN0aW9uKCl7cChkb2N1bWVudCksUGxhdGZvcm0ucGVyZm9ybU1pY3JvdGFza0NoZWNrcG9pbnQoKX0sITEpLF98fChhLkhUTUxUZW1wbGF0ZUVsZW1lbnQ9ZnVuY3Rpb24oKXt0aHJvdyBUeXBlRXJyb3IoIklsbGVnYWwgY29uc3RydWN0b3IiKX0pO3ZhciBjYj0iX19wcm90b19fImlue30sZGI9bmV3IFMsZWI9bmV3IFMsZmI9bmV3IFMsZ2I9bmV3IFM7SFRNTFRlbXBsYXRlRWxlbWVudC5kZWNvcmF0ZT1mdW5jdGlvbihhLGMpe2lmKGEudGVtcGxhdGVJc0RlY29yYXRlZF8pcmV0dXJuITE7dmFyIGQ9YTtkLnRlbXBsYXRlSXNEZWNvcmF0ZWRfPSEwO3ZhciBlPW4oZCksZj1lLGc9IWUsaD0hMTtpZighZSYmbChkKSYmKGIoIWMpLGQ9cyhhKSxkLnRlbXBsYXRlSXNEZWNvcmF0ZWRfPSEwLGU9bihkKSxoPSEwKSwhZSl7dShkKTt2YXIgaT1yKGQub3duZXJEb2N1bWVudCk7ZGIuc2V0KGQsaS5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCkpfXJldHVybiBjP2ZiLnNldChkLGMpOmc/dChkLGEsaCk6ZiYmcChkLmNvbnRlbnQpLCEwfSxIVE1MVGVtcGxhdGVFbGVtZW50LmJvb3RzdHJhcD1wO3ZhciBoYj1hLkhUTUxVbmtub3duRWxlbWVudHx8SFRNTEVsZW1lbnQsaWI9e2dldDpmdW5jdGlvbigpe3JldHVybiBkYi5nZXQodGhpcyl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfTtffHwoSFRNTFRlbXBsYXRlRWxlbWVudC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShoYi5wcm90b3R5cGUpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShIVE1MVGVtcGxhdGVFbGVtZW50LnByb3RvdHlwZSwiY29udGVudCIsaWIpKTt2YXIgamI9bmV3IFMsa2I9bmV3IFMsbGI9bmV3IFM7dy5wcm90b3R5cGU9Uih7X19wcm90b19fOmUucHJvdG90eXBlLGdldCB2YWx1ZSgpe30sYm91bmRWYWx1ZUNoYW5nZWQ6ZnVuY3Rpb24oKXt9LGNsb3NlOmZ1bmN0aW9uKCl7dGhpcy5jbG9zZWR8fCh0aGlzLm5vZGUuaW5wdXRzLnVuYmluZCh0aGlzLnByb3BlcnR5KSx0aGlzLm5vZGU9dm9pZCAwLHRoaXMubW9kZWw9dm9pZCAwLHRoaXMuY2xvc2VkPSEwKX19KSxxKEhUTUxUZW1wbGF0ZUVsZW1lbnQucHJvdG90eXBlLHtjcmVhdGVCaW5kaW5nOmZ1bmN0aW9uKGEsYixjKXtpZihhPT09VXx8YT09PVZ8fGE9PT1XKXt2YXIgZD1uYi5nZXQodGhpcyk7cmV0dXJuIGR8fChkPW5ldyBOKHRoaXMpLG5iLnNldCh0aGlzLGQpKSxuZXcgdyhkLGEsYixjfHwiIil9cmV0dXJuIEhUTUxFbGVtZW50LnByb3RvdHlwZS5jcmVhdGVCaW5kaW5nLmNhbGwodGhpcyxhLGIsYyl9LGNyZWF0ZUluc3RhbmNlOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD10aGlzLnJlZi5jb250ZW50LGU9Z2IuZ2V0KGQpO2V8fChlPUooZCl8fFtdLGdiLnNldChkLGUpKTt2YXIgZj1lLmhhc1N1YlRlbXBsYXRlP0koZCk6ZC5jbG9uZU5vZGUoITApO3JldHVybiBHKGYsZSxhLGIsYyksTChmLGEpLGZ9LGdldCBtb2RlbCgpe3JldHVybiBqYi5nZXQodGhpcyl9LHNldCBtb2RlbChhKXtqYi5zZXQodGhpcyxhKSx2KHRoaXMpfSxnZXQgYmluZGluZ0RlbGVnYXRlKCl7cmV0dXJuIGtiLmdldCh0aGlzKX0sc2V0IGJpbmRpbmdEZWxlZ2F0ZShhKXtrYi5zZXQodGhpcyxhKSx2KHRoaXMpfSxnZXQgcmVmKCl7dmFyIGEsYj10aGlzLmdldEF0dHJpYnV0ZSgicmVmIik7aWYoYil7dmFyIGQ9Yyh0aGlzKTtkJiYoYT1kLmdldEVsZW1lbnRCeUlkKGIpKX1pZihhfHwoYT1mYi5nZXQodGhpcykpLCFhKXJldHVybiB0aGlzO3ZhciBlPWEucmVmO3JldHVybiBlP2U6YX19KSxGLnByb3RvdHlwZT17Y2xvc2U6ZnVuY3Rpb24oKXt2YXIgYT1uYi5nZXQodGhpcy5ub2RlKTthJiZhLmNsb3NlKCl9fTt2YXIgbWI9bmV3IFM7T2JqZWN0LmRlZmluZVByb3BlcnR5KE5vZGUucHJvdG90eXBlLCJ0ZW1wbGF0ZUluc3RhbmNlIix7Z2V0OmZ1bmN0aW9uKCl7dmFyIGE9bWIuZ2V0KHRoaXMpO3JldHVybiBhP2E6dGhpcy5wYXJlbnROb2RlP3RoaXMucGFyZW50Tm9kZS50ZW1wbGF0ZUluc3RhbmNlOnZvaWQgMH19KSxNLnByb3RvdHlwZT17c2V0IGNvbWJpbmF0b3IoYSl7dGhpcy5jb21iaW5hdG9yXz1hLHRoaXMuc2NoZWR1bGVSZXNvbHZlKCl9LHBhdGhWYWx1ZUNoYW5nZWQ6ZnVuY3Rpb24oYSxiLGMpe3RoaXMudmFsdWVzW2NdPWEsdGhpcy5zY2hlZHVsZVJlc29sdmUoKX0sYmluZDpmdW5jdGlvbihhLGIsYyl7dGhpcy51bmJpbmQoYSksdGhpcy5zaXplKys7dmFyIGQ9bmV3IFBhdGhPYnNlcnZlcihiLGMsdGhpcy5wYXRoVmFsdWVDaGFuZ2VkLHRoaXMsYSk7dGhpcy5vYnNlcnZlcnNbYV09ZCx0aGlzLnBhdGhWYWx1ZUNoYW5nZWQoZC52YWx1ZSx2b2lkIDAsYSl9LHVuYmluZDpmdW5jdGlvbihhLGIpe3RoaXMub2JzZXJ2ZXJzW2FdJiYodGhpcy5zaXplLS0sdGhpcy5vYnNlcnZlcnNbYV0uY2xvc2UoKSxkZWxldGUgdGhpcy5vYnNlcnZlcnNbYV0sZGVsZXRlIHRoaXMudmFsdWVzW2FdLGJ8fHRoaXMuc2NoZWR1bGVSZXNvbHZlKCkpfSxzY2hlZHVsZVJlc29sdmU6ZnVuY3Rpb24oKXt0aGlzLnNjaGVkdWxlZHx8KHRoaXMuc2NoZWR1bGVkPSEwLGJiKHRoaXMpKX0scmVzb2x2ZTpmdW5jdGlvbigpe2lmKCF0aGlzLmNsb3NlZCl7aWYoIXRoaXMuY29tYmluYXRvcl8pdGhyb3cgRXJyb3IoIkNvbXBvdW5kQmluZGluZyBhdHRlbXB0ZWQgdG8gcmVzb2x2ZSB3aXRob3V0IGEgY29tYmluYXRvciIpO3RoaXMudmFsdWU9dGhpcy5jb21iaW5hdG9yXyh0aGlzLnZhbHVlcyksdGhpcy5zY2hlZHVsZWQ9ITF9fSx1bm9ic2VydmVkOmZ1bmN0aW9uKCl7dGhpcy5jbG9zZSgpfSxjbG9zZTpmdW5jdGlvbigpe3RoaXMuY2xvc2VkfHwoT2JqZWN0LmtleXModGhpcy5vYnNlcnZlcnMpLmZvckVhY2goZnVuY3Rpb24oYSl7dGhpcy51bmJpbmQoYSwhMCl9LHRoaXMpLHRoaXMuY2xvc2VkPSEwLHRoaXMudmFsdWU9dm9pZCAwKX19LE4ucHJvdG90eXBlPXtyZXNvbHZlSW5wdXRzOmZ1bmN0aW9uKGEpe3RoaXMuY2xvc2VkfHwoVyBpbiBhJiYhYVtXXT90aGlzLnZhbHVlQ2hhbmdlZCh2b2lkIDApOlYgaW4gYT90aGlzLnZhbHVlQ2hhbmdlZChhW1ZdKTpVIGluIGF8fFcgaW4gYT90aGlzLnZhbHVlQ2hhbmdlZChbYVtVXV0pOnRoaXMudmFsdWVDaGFuZ2VkKHZvaWQgMCkpfSx2YWx1ZUNoYW5nZWQ6ZnVuY3Rpb24oYSl7QXJyYXkuaXNBcnJheShhKXx8KGE9dm9pZCAwKTt2YXIgYj10aGlzLml0ZXJhdGVkVmFsdWU7dGhpcy51bm9ic2VydmUoKSx0aGlzLml0ZXJhdGVkVmFsdWU9YSx0aGlzLml0ZXJhdGVkVmFsdWUmJih0aGlzLmFycmF5T2JzZXJ2ZXI9bmV3IEFycmF5T2JzZXJ2ZXIodGhpcy5pdGVyYXRlZFZhbHVlLHRoaXMuaGFuZGxlU3BsaWNlcyx0aGlzKSk7dmFyIGM9QXJyYXlPYnNlcnZlci5jYWxjdWxhdGVTcGxpY2VzKHRoaXMuaXRlcmF0ZWRWYWx1ZXx8W10sYnx8W10pO2MubGVuZ3RoJiZ0aGlzLmhhbmRsZVNwbGljZXMoYyksdGhpcy5pbnB1dHMuc2l6ZXx8KG5iLmRlbGV0ZSh0aGlzKSx0aGlzLmNsb3NlKCkpfSxnZXRUZXJtaW5hdG9yQXQ6ZnVuY3Rpb24oYSl7aWYoLTE9PWEpcmV0dXJuIHRoaXMudGVtcGxhdGVFbGVtZW50Xzt2YXIgYj10aGlzLnRlcm1pbmF0b3JzWzIqYV07aWYoYi5ub2RlVHlwZSE9PU5vZGUuRUxFTUVOVF9OT0RFfHx0aGlzLnRlbXBsYXRlRWxlbWVudF89PT1iKXJldHVybiBiO3ZhciBjPW5iLmdldChiKTtyZXR1cm4gYz9jLmdldFRlcm1pbmF0b3JBdChjLnRlcm1pbmF0b3JzLmxlbmd0aC8yLTEpOmIKfSxpbnNlcnRJbnN0YW5jZUF0OmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPXRoaXMuZ2V0VGVybWluYXRvckF0KGEtMSksZj1iP2IubGFzdENoaWxkfHxlOmNbYy5sZW5ndGgtMV18fGU7dGhpcy50ZXJtaW5hdG9ycy5zcGxpY2UoMiphLDAsZixkKTt2YXIgZz10aGlzLnRlbXBsYXRlRWxlbWVudF8ucGFyZW50Tm9kZSxoPWUubmV4dFNpYmxpbmc7aWYoYilyZXR1cm4gZy5pbnNlcnRCZWZvcmUoYixoKSx2b2lkIDA7Zm9yKHZhciBpPTA7aTxjLmxlbmd0aDtpKyspZy5pbnNlcnRCZWZvcmUoY1tpXSxoKX0sZXh0cmFjdEluc3RhbmNlQXQ6ZnVuY3Rpb24oYSl7dmFyIGI9W10sYz10aGlzLmdldFRlcm1pbmF0b3JBdChhLTEpLGQ9dGhpcy5nZXRUZXJtaW5hdG9yQXQoYSk7Yi5ib3VuZD10aGlzLnRlcm1pbmF0b3JzWzIqYSsxXSx0aGlzLnRlcm1pbmF0b3JzLnNwbGljZSgyKmEsMik7Zm9yKHZhciBlPXRoaXMudGVtcGxhdGVFbGVtZW50Xy5wYXJlbnROb2RlO2QhPT1jOyl7dmFyIGY9Yy5uZXh0U2libGluZztmPT1kJiYoZD1jKSxlLnJlbW92ZUNoaWxkKGYpLGIucHVzaChmKX1yZXR1cm4gYn0sZ2V0SW5zdGFuY2VNb2RlbDpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9YyYmY1tZXTtyZXR1cm4gZCYmImZ1bmN0aW9uIj09dHlwZW9mIGQ/ZChhLGIpOmJ9LGhhbmRsZVNwbGljZXM6ZnVuY3Rpb24oYSl7aWYoIXRoaXMuY2xvc2VkKXt2YXIgYj10aGlzLnRlbXBsYXRlRWxlbWVudF87aWYoIWIucGFyZW50Tm9kZXx8IWIub3duZXJEb2N1bWVudC5kZWZhdWx0VmlldylyZXR1cm4gdGhpcy5jbG9zZSgpLG5iLmRlbGV0ZSh0aGlzKSx2b2lkIDA7dmFyIGM9Yi5iaW5kaW5nRGVsZWdhdGUsZD1uZXcgTyxlPTA7YS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2EucmVtb3ZlZC5mb3JFYWNoKGZ1bmN0aW9uKGIpe3ZhciBjPXRoaXMuZXh0cmFjdEluc3RhbmNlQXQoYS5pbmRleCtlKTtkLnNldChiLGMpfSx0aGlzKSxlLT1hLmFkZGVkQ291bnR9LHRoaXMpLGEuZm9yRWFjaChmdW5jdGlvbihhKXtmb3IodmFyIGU9YS5pbmRleDtlPGEuaW5kZXgrYS5hZGRlZENvdW50O2UrKyl7dmFyIGYsZz10aGlzLml0ZXJhdGVkVmFsdWVbZV0saD12b2lkIDAsaT1kLmdldChnKTtpZihpKWQuZGVsZXRlKGcpLGY9aS5ib3VuZDtlbHNle2Y9W107dmFyIGo9dGhpcy5nZXRJbnN0YW5jZU1vZGVsKGIsZyxjKTtoPXRoaXMudGVtcGxhdGVFbGVtZW50Xy5jcmVhdGVJbnN0YW5jZShqLGMsZil9dGhpcy5pbnNlcnRJbnN0YW5jZUF0KGUsaCxpLGYpfX0sdGhpcyksZC5mb3JFYWNoKGZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1hLmJvdW5kLGM9MDtjPGIubGVuZ3RoO2MrKyliW2NdLmNsb3NlKCl9KX19LHVub2JzZXJ2ZTpmdW5jdGlvbigpe3RoaXMuYXJyYXlPYnNlcnZlciYmKHRoaXMuYXJyYXlPYnNlcnZlci5jbG9zZSgpLHRoaXMuYXJyYXlPYnNlcnZlcj12b2lkIDApfSxjbG9zZTpmdW5jdGlvbigpe2lmKCF0aGlzLmNsb3NlZCl7dGhpcy51bm9ic2VydmUoKTtmb3IodmFyIGE9MTthPHRoaXMudGVybWluYXRvcnMubGVuZ3RoO2ErPTIpZm9yKHZhciBiPXRoaXMudGVybWluYXRvcnNbYV0sYz0wO2M8Yi5sZW5ndGg7YysrKWJbY10uY2xvc2UoKTt0aGlzLnRlcm1pbmF0b3JzLmxlbmd0aD0wLHRoaXMuaW5wdXRzLmNsb3NlKCksdGhpcy5jbG9zZWQ9ITB9fX07dmFyIG5iPW5ldyBTO2EuQ29tcG91bmRCaW5kaW5nPU0sSFRNTFRlbXBsYXRlRWxlbWVudC5mb3JBbGxUZW1wbGF0ZXNGcm9tXz1vfSh0aGlzKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhLGIpe2lmKCFhKXRocm93IG5ldyBFcnJvcigiQVNTRVJUOiAiK2IpfWZ1bmN0aW9uIGMoYSl7cmV0dXJuIGE+PTQ4JiY1Nz49YX1mdW5jdGlvbiBkKGEpe3JldHVybiAzMj09PWF8fDk9PT1hfHwxMT09PWF8fDEyPT09YXx8MTYwPT09YXx8YT49NTc2MCYmIuGagOGgjuKAgOKAgeKAguKAg+KAhOKAheKAhuKAh+KAiOKAieKAiuKAr+KBn+OAgO+7vyIuaW5kZXhPZihTdHJpbmcuZnJvbUNoYXJDb2RlKGEpKT4wfWZ1bmN0aW9uIGUoYSl7cmV0dXJuIDEwPT09YXx8MTM9PT1hfHw4MjMyPT09YXx8ODIzMz09PWF9ZnVuY3Rpb24gZihhKXtyZXR1cm4gMzY9PT1hfHw5NT09PWF8fGE+PTY1JiY5MD49YXx8YT49OTcmJjEyMj49YX1mdW5jdGlvbiBnKGEpe3JldHVybiAzNj09PWF8fDk1PT09YXx8YT49NjUmJjkwPj1hfHxhPj05NyYmMTIyPj1hfHxhPj00OCYmNTc+PWF9ZnVuY3Rpb24gaChhKXtyZXR1cm4idGhpcyI9PT1hfWZ1bmN0aW9uIGkoKXtmb3IoO2JiPmFiJiZkKF8uY2hhckNvZGVBdChhYikpOykrK2FifWZ1bmN0aW9uIGooKXt2YXIgYSxiO2ZvcihhPWFiKys7YmI+YWImJihiPV8uY2hhckNvZGVBdChhYiksZyhiKSk7KSsrYWI7cmV0dXJuIF8uc2xpY2UoYSxhYil9ZnVuY3Rpb24gaygpe3ZhciBhLGIsYztyZXR1cm4gYT1hYixiPWooKSxjPTE9PT1iLmxlbmd0aD9YLklkZW50aWZpZXI6aChiKT9YLktleXdvcmQ6Im51bGwiPT09Yj9YLk51bGxMaXRlcmFsOiJ0cnVlIj09PWJ8fCJmYWxzZSI9PT1iP1guQm9vbGVhbkxpdGVyYWw6WC5JZGVudGlmaWVyLHt0eXBlOmMsdmFsdWU6YixyYW5nZTpbYSxhYl19fWZ1bmN0aW9uIGwoKXt2YXIgYSxiLGMsZCxlPWFiLGY9Xy5jaGFyQ29kZUF0KGFiKSxnPV9bYWJdO3N3aXRjaChmKXtjYXNlIDQ2OmNhc2UgNDA6Y2FzZSA0MTpjYXNlIDU5OmNhc2UgNDQ6Y2FzZSAxMjM6Y2FzZSAxMjU6Y2FzZSA5MTpjYXNlIDkzOmNhc2UgNTg6Y2FzZSA2MzpjYXNlIDEyNjpyZXR1cm4rK2FiLHt0eXBlOlguUHVuY3R1YXRvcix2YWx1ZTpTdHJpbmcuZnJvbUNoYXJDb2RlKGYpLHJhbmdlOltlLGFiXX07ZGVmYXVsdDppZihhPV8uY2hhckNvZGVBdChhYisxKSw2MT09PWEpc3dpdGNoKGYpe2Nhc2UgMzc6Y2FzZSAzODpjYXNlIDQyOmNhc2UgNDM6Y2FzZSA0NTpjYXNlIDQ3OmNhc2UgNjA6Y2FzZSA2MjpjYXNlIDk0OmNhc2UgMTI0OnJldHVybiBhYis9Mix7dHlwZTpYLlB1bmN0dWF0b3IsdmFsdWU6U3RyaW5nLmZyb21DaGFyQ29kZShmKStTdHJpbmcuZnJvbUNoYXJDb2RlKGEpLHJhbmdlOltlLGFiXX07Y2FzZSAzMzpjYXNlIDYxOnJldHVybiBhYis9Miw2MT09PV8uY2hhckNvZGVBdChhYikmJisrYWIse3R5cGU6WC5QdW5jdHVhdG9yLHZhbHVlOl8uc2xpY2UoZSxhYikscmFuZ2U6W2UsYWJdfX19cmV0dXJuIGI9X1thYisxXSxjPV9bYWIrMl0sZD1fW2FiKzNdLCI+Ij09PWcmJiI+Ij09PWImJiI+Ij09PWMmJiI9Ij09PWQ/KGFiKz00LHt0eXBlOlguUHVuY3R1YXRvcix2YWx1ZToiPj4+PSIscmFuZ2U6W2UsYWJdfSk6Ij4iPT09ZyYmIj4iPT09YiYmIj4iPT09Yz8oYWIrPTMse3R5cGU6WC5QdW5jdHVhdG9yLHZhbHVlOiI+Pj4iLHJhbmdlOltlLGFiXX0pOiI8Ij09PWcmJiI8Ij09PWImJiI9Ij09PWM/KGFiKz0zLHt0eXBlOlguUHVuY3R1YXRvcix2YWx1ZToiPDw9IixyYW5nZTpbZSxhYl19KToiPiI9PT1nJiYiPiI9PT1iJiYiPSI9PT1jPyhhYis9Myx7dHlwZTpYLlB1bmN0dWF0b3IsdmFsdWU6Ij4+PSIscmFuZ2U6W2UsYWJdfSk6Zz09PWImJiIrLTw+JnwiLmluZGV4T2YoZyk+PTA/KGFiKz0yLHt0eXBlOlguUHVuY3R1YXRvcix2YWx1ZTpnK2IscmFuZ2U6W2UsYWJdfSk6Ijw+PSErLSolJnxeLyIuaW5kZXhPZihnKT49MD8oKythYix7dHlwZTpYLlB1bmN0dWF0b3IsdmFsdWU6ZyxyYW5nZTpbZSxhYl19KToocyh7fSwkLlVuZXhwZWN0ZWRUb2tlbiwiSUxMRUdBTCIpLHZvaWQgMCl9ZnVuY3Rpb24gbSgpe3ZhciBhLGQsZTtpZihlPV9bYWJdLGIoYyhlLmNoYXJDb2RlQXQoMCkpfHwiLiI9PT1lLCJOdW1lcmljIGxpdGVyYWwgbXVzdCBzdGFydCB3aXRoIGEgZGVjaW1hbCBkaWdpdCBvciBhIGRlY2ltYWwgcG9pbnQiKSxkPWFiLGE9IiIsIi4iIT09ZSl7Zm9yKGE9X1thYisrXSxlPV9bYWJdLCIwIj09PWEmJmUmJmMoZS5jaGFyQ29kZUF0KDApKSYmcyh7fSwkLlVuZXhwZWN0ZWRUb2tlbiwiSUxMRUdBTCIpO2MoXy5jaGFyQ29kZUF0KGFiKSk7KWErPV9bYWIrK107ZT1fW2FiXX1pZigiLiI9PT1lKXtmb3IoYSs9X1thYisrXTtjKF8uY2hhckNvZGVBdChhYikpOylhKz1fW2FiKytdO2U9X1thYl19aWYoImUiPT09ZXx8IkUiPT09ZSlpZihhKz1fW2FiKytdLGU9X1thYl0sKCIrIj09PWV8fCItIj09PWUpJiYoYSs9X1thYisrXSksYyhfLmNoYXJDb2RlQXQoYWIpKSlmb3IoO2MoXy5jaGFyQ29kZUF0KGFiKSk7KWErPV9bYWIrK107ZWxzZSBzKHt9LCQuVW5leHBlY3RlZFRva2VuLCJJTExFR0FMIik7cmV0dXJuIGYoXy5jaGFyQ29kZUF0KGFiKSkmJnMoe30sJC5VbmV4cGVjdGVkVG9rZW4sIklMTEVHQUwiKSx7dHlwZTpYLk51bWVyaWNMaXRlcmFsLHZhbHVlOnBhcnNlRmxvYXQoYSkscmFuZ2U6W2QsYWJdfX1mdW5jdGlvbiBuKCl7dmFyIGEsYyxkLGY9IiIsZz0hMTtmb3IoYT1fW2FiXSxiKCInIj09PWF8fCciJz09PWEsIlN0cmluZyBsaXRlcmFsIG11c3Qgc3RhcnRzIHdpdGggYSBxdW90ZSIpLGM9YWIsKythYjtiYj5hYjspe2lmKGQ9X1thYisrXSxkPT09YSl7YT0iIjticmVha31pZigiXFwiPT09ZClpZihkPV9bYWIrK10sZCYmZShkLmNoYXJDb2RlQXQoMCkpKSJcciI9PT1kJiYiXG4iPT09X1thYl0mJisrYWI7ZWxzZSBzd2l0Y2goZCl7Y2FzZSJuIjpmKz0iXG4iO2JyZWFrO2Nhc2UiciI6Zis9IlxyIjticmVhaztjYXNlInQiOmYrPSIJIjticmVhaztjYXNlImIiOmYrPSJcYiI7YnJlYWs7Y2FzZSJmIjpmKz0iXGYiO2JyZWFrO2Nhc2UidiI6Zis9IgsiO2JyZWFrO2RlZmF1bHQ6Zis9ZH1lbHNle2lmKGUoZC5jaGFyQ29kZUF0KDApKSlicmVhaztmKz1kfX1yZXR1cm4iIiE9PWEmJnMoe30sJC5VbmV4cGVjdGVkVG9rZW4sIklMTEVHQUwiKSx7dHlwZTpYLlN0cmluZ0xpdGVyYWwsdmFsdWU6ZixvY3RhbDpnLHJhbmdlOltjLGFiXX19ZnVuY3Rpb24gbyhhKXtyZXR1cm4gYS50eXBlPT09WC5JZGVudGlmaWVyfHxhLnR5cGU9PT1YLktleXdvcmR8fGEudHlwZT09PVguQm9vbGVhbkxpdGVyYWx8fGEudHlwZT09PVguTnVsbExpdGVyYWx9ZnVuY3Rpb24gcCgpe3ZhciBhO3JldHVybiBpKCksYWI+PWJiP3t0eXBlOlguRU9GLHJhbmdlOlthYixhYl19OihhPV8uY2hhckNvZGVBdChhYiksNDA9PT1hfHw0MT09PWF8fDU4PT09YT9sKCk6Mzk9PT1hfHwzND09PWE/bigpOmYoYSk/aygpOjQ2PT09YT9jKF8uY2hhckNvZGVBdChhYisxKSk/bSgpOmwoKTpjKGEpP20oKTpsKCkpfWZ1bmN0aW9uIHEoKXt2YXIgYTtyZXR1cm4gYT1kYixhYj1hLnJhbmdlWzFdLGRiPXAoKSxhYj1hLnJhbmdlWzFdLGF9ZnVuY3Rpb24gcigpe3ZhciBhO2E9YWIsZGI9cCgpLGFiPWF9ZnVuY3Rpb24gcyhhLGMpe3ZhciBkLGU9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDIpLGY9Yy5yZXBsYWNlKC8lKFxkKS9nLGZ1bmN0aW9uKGEsYyl7cmV0dXJuIGIoYzxlLmxlbmd0aCwiTWVzc2FnZSByZWZlcmVuY2UgbXVzdCBiZSBpbiByYW5nZSIpLGVbY119KTt0aHJvdyBkPW5ldyBFcnJvcihmKSxkLmluZGV4PWFiLGQuZGVzY3JpcHRpb249ZixkfWZ1bmN0aW9uIHQoYSl7cyhhLCQuVW5leHBlY3RlZFRva2VuLGEudmFsdWUpfWZ1bmN0aW9uIHUoYSl7dmFyIGI9cSgpOyhiLnR5cGUhPT1YLlB1bmN0dWF0b3J8fGIudmFsdWUhPT1hKSYmdChiKX1mdW5jdGlvbiB2KGEpe3JldHVybiBkYi50eXBlPT09WC5QdW5jdHVhdG9yJiZkYi52YWx1ZT09PWF9ZnVuY3Rpb24gdyhhKXtyZXR1cm4gZGIudHlwZT09PVguS2V5d29yZCYmZGIudmFsdWU9PT1hfWZ1bmN0aW9uIHgoKXtyZXR1cm4gNTk9PT1fLmNoYXJDb2RlQXQoYWIpPyhxKCksdm9pZCAwKTooaSgpLHYoIjsiKT8ocSgpLHZvaWQgMCk6KGRiLnR5cGU9PT1YLkVPRnx8digifSIpfHx0KGRiKSx2b2lkIDApKX1mdW5jdGlvbiB5KCl7dmFyIGE9W107Zm9yKHUoIlsiKTshdigiXSIpOyl2KCIsIik/KHEoKSxhLnB1c2gobnVsbCkpOihhLnB1c2goTygpKSx2KCJdIil8fHUoIiwiKSk7cmV0dXJuIHUoIl0iKSxjYi5jcmVhdGVBcnJheUV4cHJlc3Npb24oYSl9ZnVuY3Rpb24geigpe3ZhciBhO3JldHVybiBpKCksYT1xKCksYS50eXBlPT09WC5TdHJpbmdMaXRlcmFsfHxhLnR5cGU9PT1YLk51bWVyaWNMaXRlcmFsP2NiLmNyZWF0ZUxpdGVyYWwoYSk6Y2IuY3JlYXRlSWRlbnRpZmllcihhLnZhbHVlKX1mdW5jdGlvbiBBKCl7dmFyIGEsYjtyZXR1cm4gYT1kYixpKCksKGEudHlwZT09PVguRU9GfHxhLnR5cGU9PT1YLlB1bmN0dWF0b3IpJiZ0KGEpLGI9eigpLHUoIjoiKSxjYi5jcmVhdGVQcm9wZXJ0eSgiaW5pdCIsYixPKCkpfWZ1bmN0aW9uIEIoKXt2YXIgYT1bXTtmb3IodSgieyIpOyF2KCJ9Iik7KWEucHVzaChBKCkpLHYoIn0iKXx8dSgiLCIpO3JldHVybiB1KCJ9IiksY2IuY3JlYXRlT2JqZWN0RXhwcmVzc2lvbihhKX1mdW5jdGlvbiBDKCl7dmFyIGE7cmV0dXJuIHUoIigiKSxhPVAoKSx1KCIpIiksYX1mdW5jdGlvbiBEKCl7dmFyIGEsYixjO3JldHVybiB2KCIoIik/QygpOihhPWRiLnR5cGUsYT09PVguSWRlbnRpZmllcj9jPWNiLmNyZWF0ZUlkZW50aWZpZXIocSgpLnZhbHVlKTphPT09WC5TdHJpbmdMaXRlcmFsfHxhPT09WC5OdW1lcmljTGl0ZXJhbD9jPWNiLmNyZWF0ZUxpdGVyYWwocSgpKTphPT09WC5LZXl3b3JkP3coInRoaXMiKSYmKHEoKSxjPWNiLmNyZWF0ZVRoaXNFeHByZXNzaW9uKCkpOmE9PT1YLkJvb2xlYW5MaXRlcmFsPyhiPXEoKSxiLnZhbHVlPSJ0cnVlIj09PWIudmFsdWUsYz1jYi5jcmVhdGVMaXRlcmFsKGIpKTphPT09WC5OdWxsTGl0ZXJhbD8oYj1xKCksYi52YWx1ZT1udWxsLGM9Y2IuY3JlYXRlTGl0ZXJhbChiKSk6digiWyIpP2M9eSgpOnYoInsiKSYmKGM9QigpKSxjP2M6KHQocSgpKSx2b2lkIDApKX1mdW5jdGlvbiBFKCl7dmFyIGE9W107aWYodSgiKCIpLCF2KCIpIikpZm9yKDtiYj5hYiYmKGEucHVzaChPKCkpLCF2KCIpIikpOyl1KCIsIik7cmV0dXJuIHUoIikiKSxhfWZ1bmN0aW9uIEYoKXt2YXIgYTtyZXR1cm4gYT1xKCksbyhhKXx8dChhKSxjYi5jcmVhdGVJZGVudGlmaWVyKGEudmFsdWUpfWZ1bmN0aW9uIEcoKXtyZXR1cm4gdSgiLiIpLEYoKX1mdW5jdGlvbiBIKCl7dmFyIGE7cmV0dXJuIHUoIlsiKSxhPVAoKSx1KCJdIiksYX1mdW5jdGlvbiBJKCl7dmFyIGEsYixjO2ZvcihhPUQoKTt2KCIuIil8fHYoIlsiKXx8digiKCIpOyl2KCIoIik/KGI9RSgpLGE9Y2IuY3JlYXRlQ2FsbEV4cHJlc3Npb24oYSxiKSk6digiWyIpPyhjPUgoKSxhPWNiLmNyZWF0ZU1lbWJlckV4cHJlc3Npb24oIlsiLGEsYykpOihjPUcoKSxhPWNiLmNyZWF0ZU1lbWJlckV4cHJlc3Npb24oIi4iLGEsYykpO3JldHVybiBhfWZ1bmN0aW9uIEooKXt2YXIgYTtyZXR1cm4gYT1JKCksZGIudHlwZT09PVguUHVuY3R1YXRvciYmKHYoIisrIil8fHYoIi0tIikpJiZzKHt9LCQuVW5leHBlY3RlZFRva2VuKSxhfWZ1bmN0aW9uIEsoKXt2YXIgYSxiO3JldHVybiBkYi50eXBlIT09WC5QdW5jdHVhdG9yJiZkYi50eXBlIT09WC5LZXl3b3JkP2I9SigpOnYoIisrIil8fHYoIi0tIik/cyh7fSwkLlVuZXhwZWN0ZWRUb2tlbik6digiKyIpfHx2KCItIil8fHYoIn4iKXx8digiISIpPyhhPXEoKSxiPUsoKSxiPWNiLmNyZWF0ZVVuYXJ5RXhwcmVzc2lvbihhLnZhbHVlLGIpKTp3KCJkZWxldGUiKXx8dygidm9pZCIpfHx3KCJ0eXBlb2YiKT9zKHt9LCQuVW5leHBlY3RlZFRva2VuKTpiPUooKSxifWZ1bmN0aW9uIEwoYSxiKXt2YXIgYz0wO2lmKGEudHlwZSE9PVguUHVuY3R1YXRvciYmYS50eXBlIT09WC5LZXl3b3JkKXJldHVybiAwO3N3aXRjaChhLnZhbHVlKXtjYXNlInx8IjpjPTE7YnJlYWs7Y2FzZSImJiI6Yz0yO2JyZWFrO2Nhc2UifCI6Yz0zO2JyZWFrO2Nhc2UiXiI6Yz00O2JyZWFrO2Nhc2UiJiI6Yz01O2JyZWFrO2Nhc2UiPT0iOmNhc2UiIT0iOmNhc2UiPT09IjpjYXNlIiE9PSI6Yz02O2JyZWFrO2Nhc2UiPCI6Y2FzZSI+IjpjYXNlIjw9IjpjYXNlIj49IjpjYXNlImluc3RhbmNlb2YiOmM9NzticmVhaztjYXNlImluIjpjPWI/NzowO2JyZWFrO2Nhc2UiPDwiOmNhc2UiPj4iOmNhc2UiPj4+IjpjPTg7YnJlYWs7Y2FzZSIrIjpjYXNlIi0iOmM9OTticmVhaztjYXNlIioiOmNhc2UiLyI6Y2FzZSIlIjpjPTExfXJldHVybiBjfWZ1bmN0aW9uIE0oKXt2YXIgYSxiLGMsZCxlLGYsZyxoLGk7aWYoZD1lYi5hbGxvd0luLGViLmFsbG93SW49ITAsaD1LKCksYj1kYixjPUwoYixkKSwwPT09YylyZXR1cm4gaDtmb3IoYi5wcmVjPWMscSgpLGY9SygpLGU9W2gsYixmXTsoYz1MKGRiLGQpKT4wOyl7Zm9yKDtlLmxlbmd0aD4yJiZjPD1lW2UubGVuZ3RoLTJdLnByZWM7KWY9ZS5wb3AoKSxnPWUucG9wKCkudmFsdWUsaD1lLnBvcCgpLGE9Y2IuY3JlYXRlQmluYXJ5RXhwcmVzc2lvbihnLGgsZiksZS5wdXNoKGEpO2I9cSgpLGIucHJlYz1jLGUucHVzaChiKSxhPUsoKSxlLnB1c2goYSl9Zm9yKGViLmFsbG93SW49ZCxpPWUubGVuZ3RoLTEsYT1lW2ldO2k+MTspYT1jYi5jcmVhdGVCaW5hcnlFeHByZXNzaW9uKGVbaS0xXS52YWx1ZSxlW2ktMl0sYSksaS09MjtyZXR1cm4gYX1mdW5jdGlvbiBOKCl7dmFyIGEsYixjLGQ7cmV0dXJuIGE9TSgpLHYoIj8iKSYmKHEoKSxiPWViLmFsbG93SW4sZWIuYWxsb3dJbj0hMCxjPU8oKSxlYi5hbGxvd0luPWIsdSgiOiIpLGQ9TygpLGE9Y2IuY3JlYXRlQ29uZGl0aW9uYWxFeHByZXNzaW9uKGEsYyxkKSksYX1mdW5jdGlvbiBPKCl7dmFyIGEsYixjO3JldHVybiBhPWRiLGM9Yj1OKCl9ZnVuY3Rpb24gUCgpe3ZhciBhO3JldHVybiBhPU8oKX1mdW5jdGlvbiBRKCl7cmV0dXJuIHUoIjsiKSxjYi5jcmVhdGVFbXB0eVN0YXRlbWVudCgpfWZ1bmN0aW9uIFIoKXt2YXIgYT1QKCk7cmV0dXJuIHgoKSxjYi5jcmVhdGVFeHByZXNzaW9uU3RhdGVtZW50KGEpfWZ1bmN0aW9uIFMoKXt2YXIgYSxiLGMsZD1kYi50eXBlO2lmKGQ9PT1YLkVPRiYmdChkYiksaSgpLGQ9PT1YLlB1bmN0dWF0b3Ipc3dpdGNoKGRiLnZhbHVlKXtjYXNlIjsiOnJldHVybiBRKCk7Y2FzZSIoIjpyZXR1cm4gUigpfXJldHVybiBhPVAoKSxhLnR5cGU9PT1aLklkZW50aWZpZXImJnYoIjoiKT8ocSgpLGM9IiQiK2EubmFtZSxPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZWIubGFiZWxTZXQsYykmJnMoe30sJC5SZWRlY2xhcmF0aW9uLCJMYWJlbCIsYS5uYW1lKSxlYi5sYWJlbFNldFtjXT0hMCxiPVMoKSxkZWxldGUgZWIubGFiZWxTZXRbY10sY2IuY3JlYXRlTGFiZWxlZFN0YXRlbWVudChhLGIpKTooeCgpLGNiLmNyZWF0ZUV4cHJlc3Npb25TdGF0ZW1lbnQoYSkpfWZ1bmN0aW9uIFQoKXtyZXR1cm4gZGIudHlwZT09PVguS2V5d29yZD9TKCk6ZGIudHlwZSE9PVguRU9GP1MoKTp2b2lkIDB9ZnVuY3Rpb24gVSgpe2Zvcih2YXIgYSxiPVtdO2JiPmFiJiYoYT1UKCksInVuZGVmaW5lZCIhPXR5cGVvZiBhKTspYi5wdXNoKGEpO3JldHVybiBifWZ1bmN0aW9uIFYoKXt2YXIgYTtyZXR1cm4gaSgpLHIoKSxhPVUoKSxjYi5jcmVhdGVQcm9ncmFtKGEpfWZ1bmN0aW9uIFcoYSxiKXt2YXIgYztyZXR1cm4gYz1TdHJpbmcsInN0cmluZyI9PXR5cGVvZiBhfHxhIGluc3RhbmNlb2YgU3RyaW5nfHwoYT1jKGEpKSxjYj1iLF89YSxhYj0wLGJiPV8ubGVuZ3RoLGRiPW51bGwsZWI9e2FsbG93SW46ITAsbGFiZWxTZXQ6e319LGJiPjAmJiJ1bmRlZmluZWQiPT10eXBlb2YgX1swXSYmYSBpbnN0YW5jZW9mIFN0cmluZyYmKF89YS52YWx1ZU9mKCkpLFYoKX12YXIgWCxZLFosJCxfLGFiLGJiLGNiLGRiLGViO1g9e0Jvb2xlYW5MaXRlcmFsOjEsRU9GOjIsSWRlbnRpZmllcjozLEtleXdvcmQ6NCxOdWxsTGl0ZXJhbDo1LE51bWVyaWNMaXRlcmFsOjYsUHVuY3R1YXRvcjo3LFN0cmluZ0xpdGVyYWw6OH0sWT17fSxZW1guQm9vbGVhbkxpdGVyYWxdPSJCb29sZWFuIixZW1guRU9GXT0iPGVuZD4iLFlbWC5JZGVudGlmaWVyXT0iSWRlbnRpZmllciIsWVtYLktleXdvcmRdPSJLZXl3b3JkIixZW1guTnVsbExpdGVyYWxdPSJOdWxsIixZW1guTnVtZXJpY0xpdGVyYWxdPSJOdW1lcmljIixZW1guUHVuY3R1YXRvcl09IlB1bmN0dWF0b3IiLFlbWC5TdHJpbmdMaXRlcmFsXT0iU3RyaW5nIixaPXtBcnJheUV4cHJlc3Npb246IkFycmF5RXhwcmVzc2lvbiIsQmluYXJ5RXhwcmVzc2lvbjoiQmluYXJ5RXhwcmVzc2lvbiIsQ2FsbEV4cHJlc3Npb246IkNhbGxFeHByZXNzaW9uIixDb25kaXRpb25hbEV4cHJlc3Npb246IkNvbmRpdGlvbmFsRXhwcmVzc2lvbiIsRW1wdHlTdGF0ZW1lbnQ6IkVtcHR5U3RhdGVtZW50IixFeHByZXNzaW9uU3RhdGVtZW50OiJFeHByZXNzaW9uU3RhdGVtZW50IixJZGVudGlmaWVyOiJJZGVudGlmaWVyIixMaXRlcmFsOiJMaXRlcmFsIixMYWJlbGVkU3RhdGVtZW50OiJMYWJlbGVkU3RhdGVtZW50IixMb2dpY2FsRXhwcmVzc2lvbjoiTG9naWNhbEV4cHJlc3Npb24iLE1lbWJlckV4cHJlc3Npb246Ik1lbWJlckV4cHJlc3Npb24iLE9iamVjdEV4cHJlc3Npb246Ik9iamVjdEV4cHJlc3Npb24iLFByb2dyYW06IlByb2dyYW0iLFByb3BlcnR5OiJQcm9wZXJ0eSIsVGhpc0V4cHJlc3Npb246IlRoaXNFeHByZXNzaW9uIixVbmFyeUV4cHJlc3Npb246IlVuYXJ5RXhwcmVzc2lvbiJ9LCQ9e1VuZXhwZWN0ZWRUb2tlbjoiVW5leHBlY3RlZCB0b2tlbiAlMCIsVW5rbm93bkxhYmVsOiJVbmRlZmluZWQgbGFiZWwgJyUwJyIsUmVkZWNsYXJhdGlvbjoiJTAgJyUxJyBoYXMgYWxyZWFkeSBiZWVuIGRlY2xhcmVkIn0sYS5lc3ByaW1hPXtwYXJzZTpXfX0odGhpcyksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSxiLGQsZSl7aWYoZS5ub2RlVHlwZT09PU5vZGUuRUxFTUVOVF9OT0RFJiYiVEVNUExBVEUiPT09ZS50YWdOYW1lJiYoImJpbmQiPT09ZHx8InJlcGVhdCI9PT1kKSl7dmFyIGYsZyxoPWIubWF0Y2gocik7aWYoaD8oZj1oWzFdLGc9aFsyXSk6KGg9Yi5tYXRjaChzKSxoJiYoZj1oWzJdLGc9aFsxXSkpLGgpe3ZhciBpO2lmKGc9Zy50cmltKCksZy5tYXRjaChxKSlpPW5ldyBDb21wb3VuZEJpbmRpbmcoZnVuY3Rpb24oYSl7cmV0dXJuIGEucGF0aH0pLGkuYmluZCgicGF0aCIsYSxnKTtlbHNlIHRyeXtpPWMoYSxnKX1jYXRjaChqKXtjb25zb2xlLmVycm9yKCJJbnZhbGlkIGV4cHJlc3Npb24gc3ludGF4OiAiK2csail9aWYoaSlyZXR1cm4gdC5zZXQoZSxmKSxpfX19ZnVuY3Rpb24gYyhhLGIpe3RyeXt2YXIgYz1uZXcgZjtpZihlc3ByaW1hLnBhcnNlKGIsYyksIWMuc3RhdGVtZW50cy5sZW5ndGgmJiFjLmxhYmVsZWRTdGF0ZW1lbnRzLmxlbmd0aClyZXR1cm47aWYoIWMubGFiZWxlZFN0YXRlbWVudHMubGVuZ3RoJiZjLnN0YXRlbWVudHMubGVuZ3RoPjEpdGhyb3cgRXJyb3IoIk11bHRpcGxlIHVubGFiZWxsZWQgc3RhdGVtZW50cyBhcmUgbm90IGFsbG93ZWQuIik7dmFyIGU9Yy5sYWJlbGVkU3RhdGVtZW50cy5sZW5ndGg/ZChjLmxhYmVsZWRTdGF0ZW1lbnRzKTplPWMuc3RhdGVtZW50c1swXSxnPVtdO2Zvcih2YXIgaCBpbiBjLmRlcHMpZy5wdXNoKGgpO2lmKCFnLmxlbmd0aClyZXR1cm57dmFsdWU6ZSh7fSl9O2Zvcih2YXIgaT1uZXcgQ29tcG91bmRCaW5kaW5nKGUpLGo9MDtqPGcubGVuZ3RoO2orKylpLmJpbmQoZ1tqXSxhLGdbal0pO3JldHVybiBpfWNhdGNoKGspe2NvbnNvbGUuZXJyb3IoIkludmFsaWQgZXhwcmVzc2lvbiBzeW50YXg6ICIrYixrKX19ZnVuY3Rpb24gZChhKXtyZXR1cm4gZnVuY3Rpb24oYil7Zm9yKHZhciBjPVtdLGQ9MDtkPGEubGVuZ3RoO2QrKylhW2RdLmJvZHkoYikmJmMucHVzaChhW2RdLmxhYmVsKTtyZXR1cm4gYy5qb2luKCIgIil9fWZ1bmN0aW9uIGUoYSxiLGMpe3RoaXMuZGVwcz1hLHRoaXMubmFtZT1iLHRoaXMubGFzdD1jfWZ1bmN0aW9uIGYoKXt0aGlzLnN0YXRlbWVudHM9W10sdGhpcy5sYWJlbGVkU3RhdGVtZW50cz1bXSx0aGlzLmRlcHM9e30sdGhpcy5jdXJyZW50UGF0aD12b2lkIDB9ZnVuY3Rpb24gZygpe3Rocm93IEVycm9yKCJOb3QgSW1wbGVtZW50ZWQiKX1mdW5jdGlvbiBoKCl7fXZhciBpOyJ1bmRlZmluZWQiIT10eXBlb2YgV2Vha01hcCYmbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCJGaXJlZm94LyIpPDA/aT1XZWFrTWFwOmZ1bmN0aW9uKCl7dmFyIGE9T2JqZWN0LmRlZmluZVByb3BlcnR5LGI9T2JqZWN0Lmhhc093blByb3BlcnR5LGM9KG5ldyBEYXRlKS5nZXRUaW1lKCklMWU5O2k9ZnVuY3Rpb24oKXt0aGlzLm5hbWU9Il9fc3QiKygxZTkqTWF0aC5yYW5kb20oKT4+PjApKyhjKysgKyJfXyIpfSxpLnByb3RvdHlwZT17c2V0OmZ1bmN0aW9uKGIsYyl7YShiLHRoaXMubmFtZSx7dmFsdWU6Yyx3cml0YWJsZTohMH0pfSxnZXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGIuY2FsbChhLHRoaXMubmFtZSk/YVt0aGlzLm5hbWVdOnZvaWQgMH0sImRlbGV0ZSI6ZnVuY3Rpb24oYSl7dGhpcy5zZXQoYSx2b2lkIDApfX19KCk7dmFyIGo9IlskX2EtekEtWl0iLGs9IlskX2EtekEtWjAtOV0iLGw9aisiKyIraysiKiIsbT0iKCIrbCsiKSIsbj0iKD86WzAtOV18WzEtOV0rWzAtOV0rKSIsbz0iKD86IitsKyJ8IituKyIpIixwPSIoPzoiK28rIikoPzpcXC4iK28rIikqIixxPW5ldyBSZWdFeHAoIl4iK3ArIiQiKSxyPW5ldyBSZWdFeHAoIl4iK20rIlxccyogaW4gKC4qKSQiKSxzPW5ldyBSZWdFeHAoIl4oLiopIGFzIFxccyoiK20rIiQiKSx0PW5ldyBpO2UucHJvdG90eXBlPXtnZXRQYXRoOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubGFzdD90aGlzLmxhc3QuZ2V0UGF0aCgpKyIuIit0aGlzLm5hbWU6dGhpcy5uYW1lfSx2YWx1ZUZuOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5nZXRQYXRoKCk7cmV0dXJuIHRoaXMuZGVwc1thXT0hMCxmdW5jdGlvbihiKXtyZXR1cm4gYlthXX19fTt2YXIgdT17IisiOmZ1bmN0aW9uKGEpe3JldHVybithfSwiLSI6ZnVuY3Rpb24oYSl7cmV0dXJuLWF9LCIhIjpmdW5jdGlvbihhKXtyZXR1cm4hYX19LHY9eyIrIjpmdW5jdGlvbihhLGIpe3JldHVybiBhK2J9LCItIjpmdW5jdGlvbihhLGIpe3JldHVybiBhLWJ9LCIqIjpmdW5jdGlvbihhLGIpe3JldHVybiBhKmJ9LCIvIjpmdW5jdGlvbihhLGIpe3JldHVybiBhL2J9LCIlIjpmdW5jdGlvbihhLGIpe3JldHVybiBhJWJ9LCI8IjpmdW5jdGlvbihhLGIpe3JldHVybiBiPmF9LCI+IjpmdW5jdGlvbihhLGIpe3JldHVybiBhPmJ9LCI8PSI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYj49YX0sIj49IjpmdW5jdGlvbihhLGIpe3JldHVybiBhPj1ifSwiPT0iOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGE9PWJ9LCIhPSI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYSE9Yn0sIj09PSI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT09PWJ9LCIhPT0iOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGEhPT1ifSwiJiYiOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGEmJmJ9LCJ8fCI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYXx8Yn19O2YucHJvdG90eXBlPXtnZXRGbjpmdW5jdGlvbihhKXtyZXR1cm4gYSBpbnN0YW5jZW9mIGU/YS52YWx1ZUZuKCk6YX0sY3JlYXRlUHJvZ3JhbTpmdW5jdGlvbigpe30sY3JlYXRlRXhwcmVzc2lvblN0YXRlbWVudDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5zdGF0ZW1lbnRzLnB1c2goYSksYX0sY3JlYXRlTGFiZWxlZFN0YXRlbWVudDpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLmxhYmVsZWRTdGF0ZW1lbnRzLnB1c2goe2xhYmVsOmEuZ2V0UGF0aCgpLGJvZHk6YiBpbnN0YW5jZW9mIGU/Yi52YWx1ZUZuKCk6Yn0pLGJ9LGNyZWF0ZVVuYXJ5RXhwcmVzc2lvbjpmdW5jdGlvbihhLGIpe2lmKCF1W2FdKXRocm93IEVycm9yKCJEaXNhbGxvd2VkIG9wZXJhdG9yOiAiK2EpO3JldHVybiBiPXRoaXMuZ2V0Rm4oYiksZnVuY3Rpb24oYyl7cmV0dXJuIHVbYV0oYihjKSl9fSxjcmVhdGVCaW5hcnlFeHByZXNzaW9uOmZ1bmN0aW9uKGEsYixjKXtpZighdlthXSl0aHJvdyBFcnJvcigiRGlzYWxsb3dlZCBvcGVyYXRvcjogIithKTtyZXR1cm4gYj10aGlzLmdldEZuKGIpLGM9dGhpcy5nZXRGbihjKSxmdW5jdGlvbihkKXtyZXR1cm4gdlthXShiKGQpLGMoZCkpfX0sY3JlYXRlQ29uZGl0aW9uYWxFeHByZXNzaW9uOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gYT10aGlzLmdldEZuKGEpLGI9dGhpcy5nZXRGbihiKSxjPXRoaXMuZ2V0Rm4oYyksZnVuY3Rpb24oZCl7cmV0dXJuIGEoZCk/YihkKTpjKGQpfX0sY3JlYXRlSWRlbnRpZmllcjpmdW5jdGlvbihhKXt2YXIgYj1uZXcgZSh0aGlzLmRlcHMsYSk7cmV0dXJuIGIudHlwZT0iSWRlbnRpZmllciIsYn0sY3JlYXRlTWVtYmVyRXhwcmVzc2lvbjpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIG5ldyBlKHRoaXMuZGVwcyxjLm5hbWUsYil9LGNyZWF0ZUxpdGVyYWw6ZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGEudmFsdWV9fSxjcmVhdGVBcnJheUV4cHJlc3Npb246ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPTA7YjxhLmxlbmd0aDtiKyspYVtiXT10aGlzLmdldEZuKGFbYl0pO3JldHVybiBmdW5jdGlvbihiKXtmb3IodmFyIGM9W10sZD0wO2Q8YS5sZW5ndGg7ZCsrKWMucHVzaChhW2RdKGIpKTtyZXR1cm4gY319LGNyZWF0ZVByb3BlcnR5OmZ1bmN0aW9uKGEsYixjKXtyZXR1cm57a2V5OmIgaW5zdGFuY2VvZiBlP2IuZ2V0UGF0aCgpOmIoKSx2YWx1ZTpjfX0sY3JlYXRlT2JqZWN0RXhwcmVzc2lvbjpmdW5jdGlvbihhKXtmb3IodmFyIGI9MDtiPGEubGVuZ3RoO2IrKylhW2JdLnZhbHVlPXRoaXMuZ2V0Rm4oYVtiXS52YWx1ZSk7cmV0dXJuIGZ1bmN0aW9uKGIpe2Zvcih2YXIgYz17fSxkPTA7ZDxhLmxlbmd0aDtkKyspY1thW2RdLmtleV09YVtkXS52YWx1ZShiKTtyZXR1cm4gY319LGNyZWF0ZUNhbGxFeHByZXNzaW9uOmcsY3JlYXRlRW1wdHlTdGF0ZW1lbnQ6ZyxjcmVhdGVUaGlzRXhwcmVzc2lvbjpnfSxoLnByb3RvdHlwZT17Z2V0QmluZGluZzpmdW5jdGlvbihhLGQsZSxmKXtyZXR1cm4gZD1kLnRyaW0oKSxkJiYhZC5tYXRjaChxKT9iKGEsZCxlLGYpfHxjKGEsZCxlLGYpOnZvaWQgMH0sZ2V0SW5zdGFuY2VNb2RlbDpmdW5jdGlvbihhLGIpe3ZhciBjPXQuZ2V0KGEpO2lmKCFjKXJldHVybiBiO3ZhciBkPWEudGVtcGxhdGVJbnN0YW5jZT9hLnRlbXBsYXRlSW5zdGFuY2UubW9kZWw6YS5tb2RlbCxlPU9iamVjdC5jcmVhdGUoZCk7cmV0dXJuIGVbY109YixlfX0sYS5FeHByZXNzaW9uU3ludGF4PWh9KHRoaXMpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoKXtsb2dGbGFncy5kYXRhJiZjb25zb2xlLmdyb3VwKCJNb2RlbC5kaXJ0eUNoZWNrKCkiKSxjKCksbG9nRmxhZ3MuZGF0YSYmY29uc29sZS5ncm91cEVuZCgpfWZ1bmN0aW9uIGMoKXtQbGF0Zm9ybS5wZXJmb3JtTWljcm90YXNrQ2hlY2twb2ludCgpfXZhciBkPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInN0eWxlIik7ZC50ZXh0Q29udGVudD0idGVtcGxhdGUge2Rpc3BsYXk6IG5vbmUgIWltcG9ydGFudDt9IC8qIGluamVjdGVkIGJ5IHBsYXRmb3JtLmpzICovIjt2YXIgZT1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCJoZWFkIik7ZS5pbnNlcnRCZWZvcmUoZCxlLmZpcnN0Q2hpbGQpLEhUTUxUZW1wbGF0ZUVsZW1lbnQuX19pbnN0YW5jZUNyZWF0ZWQ9ZnVuY3Rpb24oYSl7ZG9jdW1lbnQuYWRvcHROb2RlKGEpLEN1c3RvbUVsZW1lbnRzLnVwZ3JhZGVBbGwoYSl9O3ZhciBmPTEyNTt3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigiV2ViQ29tcG9uZW50c1JlYWR5IixmdW5jdGlvbigpe2IoKSxPYnNlcnZlci5oYXNPYmplY3RPYnNlcnZlfHxzZXRJbnRlcnZhbChjLGYpfSksYS5mbHVzaD1iLHdpbmRvdy5kaXJ0eUNoZWNrPWJ9KHdpbmRvdy5QbGF0Zm9ybSksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhKXtyZXR1cm4gZChhLGkpfWZ1bmN0aW9uIGMoYSl7cmV0dXJuIGQoYSxqKX1mdW5jdGlvbiBkKGEsYil7cmV0dXJuImxpbmsiPT09YS5sb2NhbE5hbWUmJmEuZ2V0QXR0cmlidXRlKCJyZWwiKT09PWJ9ZnVuY3Rpb24gZShhKXtyZXR1cm4ic2NyaXB0Ij09PWEubG9jYWxOYW1lfWZ1bmN0aW9uIGYoYSxiKXt2YXIgYz1hO2MgaW5zdGFuY2VvZiBEb2N1bWVudHx8KGM9ZG9jdW1lbnQuaW1wbGVtZW50YXRpb24uY3JlYXRlSFRNTERvY3VtZW50KGkpLGMuYm9keS5pbm5lckhUTUw9YSksYy5fVVJMPWI7dmFyIGQ9Yy5jcmVhdGVFbGVtZW50KCJiYXNlIik7cmV0dXJuIGQuc2V0QXR0cmlidXRlKCJocmVmIixkb2N1bWVudC5iYXNlVVJJKSxjLmhlYWQuYXBwZW5kQ2hpbGQoZCksd2luZG93LkhUTUxUZW1wbGF0ZUVsZW1lbnQmJkhUTUxUZW1wbGF0ZUVsZW1lbnQuYm9vdHN0cmFwJiZIVE1MVGVtcGxhdGVFbGVtZW50LmJvb3RzdHJhcChjKSxjfWF8fChhPXdpbmRvdy5IVE1MSW1wb3J0cz17ZmxhZ3M6e319KTt2YXIgZyxoPWEueGhyLGk9ImltcG9ydCIsaj0ic3R5bGVzaGVldCIsaz17ZG9jdW1lbnRzOnt9LGNhY2hlOnt9LHByZWxvYWRTZWxlY3RvcnM6WyJsaW5rW3JlbD0iK2krIl0iLCJlbGVtZW50IGxpbmtbcmVsPSIraisiXSIsInRlbXBsYXRlIiwic2NyaXB0W3NyY106bm90KFt0eXBlXSkiLCdzY3JpcHRbc3JjXVt0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiXSddLmpvaW4oIiwiKSxsb2FkZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIGc9bmV3IGwoay5sb2FkZWQsYSksZy5jYWNoZT1rLmNhY2hlLGd9LGxvYWQ6ZnVuY3Rpb24oYSxiKXtnPWsubG9hZGVyKGIpLGsucHJlbG9hZChhKX0scHJlbG9hZDpmdW5jdGlvbihhKXt2YXIgYj1hLnF1ZXJ5U2VsZWN0b3JBbGwoay5wcmVsb2FkU2VsZWN0b3JzKTtiPXRoaXMuZmlsdGVyTWFpbkRvY3VtZW50Tm9kZXMoYSxiKSxiPXRoaXMuZXh0cmFjdFRlbXBsYXRlTm9kZXMoYiksZy5hZGROb2RlcyhiKX0sZmlsdGVyTWFpbkRvY3VtZW50Tm9kZXM6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT09PWRvY3VtZW50JiYoYj1BcnJheS5wcm90b3R5cGUuZmlsdGVyLmNhbGwoYixmdW5jdGlvbihhKXtyZXR1cm4hZShhKX0pKSxifSxleHRyYWN0VGVtcGxhdGVOb2RlczpmdW5jdGlvbihhKXt2YXIgYj1bXTtyZXR1cm4gYT1BcnJheS5wcm90b3R5cGUuZmlsdGVyLmNhbGwoYSxmdW5jdGlvbihhKXtpZigidGVtcGxhdGUiPT09YS5sb2NhbE5hbWUpe2lmKGEuY29udGVudCl7dmFyIGM9YS5jb250ZW50LnF1ZXJ5U2VsZWN0b3JBbGwoImxpbmtbcmVsPSIraisiXSIpO2MubGVuZ3RoJiYoYj1iLmNvbmNhdChBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChjLDApKSl9cmV0dXJuITF9cmV0dXJuITB9KSxiLmxlbmd0aCYmKGE9YS5jb25jYXQoYikpLGF9LGxvYWRlZDpmdW5jdGlvbihhLGQsZSl7aWYoYihkKSl7dmFyIGc9ay5kb2N1bWVudHNbYV07Z3x8KGc9ZihlLGEpLHAucmVzb2x2ZVBhdGhzSW5IVE1MKGcpLGsuZG9jdW1lbnRzW2FdPWcsay5wcmVsb2FkKGcpKSxkLmltcG9ydD17aHJlZjphLG93bmVyTm9kZTpkLGNvbnRlbnQ6Z30sZC5jb250ZW50PWU9Z31kLl9fcmVzb3VyY2U9ZSxjKGQpJiZwLnJlc29sdmVQYXRoc0luU3R5bGVzaGVldChkKX19LGw9ZnVuY3Rpb24oYSxiKXt0aGlzLm9ubG9hZD1hLHRoaXMub25jb21wbGV0ZT1iLHRoaXMuaW5mbGlnaHQ9MCx0aGlzLnBlbmRpbmc9e30sdGhpcy5jYWNoZT17fX07bC5wcm90b3R5cGU9e2FkZE5vZGVzOmZ1bmN0aW9uKGEpe3RoaXMuaW5mbGlnaHQrPWEubGVuZ3RoLHEoYSx0aGlzLnJlcXVpcmUsdGhpcyksdGhpcy5jaGVja0RvbmUoKX0scmVxdWlyZTpmdW5jdGlvbihhKXt2YXIgYj1wLm5vZGVVcmwoYSk7YS5fX25vZGVVcmw9Yix0aGlzLmRlZHVwZShiLGEpfHx0aGlzLmZldGNoKGIsYSl9LGRlZHVwZTpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLnBlbmRpbmdbYV0/KHRoaXMucGVuZGluZ1thXS5wdXNoKGIpLCEwKTp0aGlzLmNhY2hlW2FdPyh0aGlzLm9ubG9hZChhLGIsZy5jYWNoZVthXSksdGhpcy50YWlsKCksITApOih0aGlzLnBlbmRpbmdbYV09W2JdLCExKX0sZmV0Y2g6ZnVuY3Rpb24oYSxiKXt2YXIgYz1mdW5jdGlvbihjLGQpe3RoaXMucmVjZWl2ZShhLGIsYyxkKX0uYmluZCh0aGlzKTtoLmxvYWQoYSxjKX0scmVjZWl2ZTpmdW5jdGlvbihhLGIsYyxkKXtjfHwoZy5jYWNoZVthXT1kKSxnLnBlbmRpbmdbYV0uZm9yRWFjaChmdW5jdGlvbihiKXtjfHx0aGlzLm9ubG9hZChhLGIsZCksdGhpcy50YWlsKCl9LHRoaXMpLGcucGVuZGluZ1thXT1udWxsfSx0YWlsOmZ1bmN0aW9uKCl7LS10aGlzLmluZmxpZ2h0LHRoaXMuY2hlY2tEb25lKCl9LGNoZWNrRG9uZTpmdW5jdGlvbigpe3RoaXMuaW5mbGlnaHR8fHRoaXMub25jb21wbGV0ZSgpfX07dmFyIG09WyJocmVmIiwic3JjIiwiYWN0aW9uIl0sbj0iWyIrbS5qb2luKCJdLFsiKSsiXSIsbz0ie3suKn19IixwPXtub2RlVXJsOmZ1bmN0aW9uKGEpe3JldHVybiBwLnJlc29sdmVVcmwocC5nZXREb2N1bWVudFVybChkb2N1bWVudCkscC5ocmVmT3JTcmMoYSkpfSxocmVmT3JTcmM6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuZ2V0QXR0cmlidXRlKCJocmVmIil8fGEuZ2V0QXR0cmlidXRlKCJzcmMiKX0sZG9jdW1lbnRVcmxGcm9tTm9kZTpmdW5jdGlvbihhKXtyZXR1cm4gcC5nZXREb2N1bWVudFVybChhLm93bmVyRG9jdW1lbnR8fGEpfSxnZXREb2N1bWVudFVybDpmdW5jdGlvbihhKXt2YXIgYj1hJiYoYS5fVVJMfHxhLmltcGwmJmEuaW1wbC5fVVJMfHxhLmJhc2VVUkl8fGEuVVJMKXx8IiI7cmV0dXJuIGIuc3BsaXQoIiMiKVswXX0scmVzb2x2ZVVybDpmdW5jdGlvbihhLGIsYyl7aWYodGhpcy5pc0Fic1VybChiKSlyZXR1cm4gYjt2YXIgZD10aGlzLmNvbXByZXNzVXJsKHRoaXMudXJsVG9QYXRoKGEpK2IpO3JldHVybiBjJiYoZD1wLm1ha2VSZWxQYXRoKHAuZ2V0RG9jdW1lbnRVcmwoZG9jdW1lbnQpLGQpKSxkfSxpc0Fic1VybDpmdW5jdGlvbihhKXtyZXR1cm4vKF5kYXRhOil8KF5odHRwW3NdPzopfCheXC8pLy50ZXN0KGEpfSx1cmxUb1BhdGg6ZnVuY3Rpb24oYSl7dmFyIGI9YS5zcGxpdCgiLyIpO3JldHVybiBiLnBvcCgpLGIucHVzaCgiIiksYi5qb2luKCIvIil9LGNvbXByZXNzVXJsOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYixjPWEuc3BsaXQoIi8iKSxkPTA7ZDxjLmxlbmd0aDtkKyspYj1jW2RdLCIuLiI9PT1iJiYoYy5zcGxpY2UoZC0xLDIpLGQtPTIpO3JldHVybiBjLmpvaW4oIi8iKX0sbWFrZVJlbFBhdGg6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkO2ZvcihjPXRoaXMuY29tcHJlc3NVcmwoYSkuc3BsaXQoIi8iKSxkPXRoaXMuY29tcHJlc3NVcmwoYikuc3BsaXQoIi8iKTtjLmxlbmd0aCYmY1swXT09PWRbMF07KWMuc2hpZnQoKSxkLnNoaWZ0KCk7Zm9yKHZhciBlPTAsZj1jLmxlbmd0aC0xO2Y+ZTtlKyspZC51bnNoaWZ0KCIuLiIpO3ZhciBnPWQuam9pbigiLyIpO3JldHVybiBnfSxyZXNvbHZlUGF0aHNJbkhUTUw6ZnVuY3Rpb24oYSxiKXtiPWJ8fHAuZG9jdW1lbnRVcmxGcm9tTm9kZShhKSxwLnJlc29sdmVBdHRyaWJ1dGVzKGEsYikscC5yZXNvbHZlU3R5bGVFbHRzKGEsYik7dmFyIGM9YS5xdWVyeVNlbGVjdG9yQWxsKCJ0ZW1wbGF0ZSIpO2MmJnEoYyxmdW5jdGlvbihhKXthLmNvbnRlbnQmJnAucmVzb2x2ZVBhdGhzSW5IVE1MKGEuY29udGVudCxiKX0pfSxyZXNvbHZlUGF0aHNJblN0eWxlc2hlZXQ6ZnVuY3Rpb24oYSl7dmFyIGI9cC5ub2RlVXJsKGEpO2EuX19yZXNvdXJjZT1wLnJlc29sdmVDc3NUZXh0KGEuX19yZXNvdXJjZSxiKX0scmVzb2x2ZVN0eWxlRWx0czpmdW5jdGlvbihhLGIpe3ZhciBjPWEucXVlcnlTZWxlY3RvckFsbCgic3R5bGUiKTtjJiZxKGMsZnVuY3Rpb24oYSl7YS50ZXh0Q29udGVudD1wLnJlc29sdmVDc3NUZXh0KGEudGV4dENvbnRlbnQsYil9KX0scmVzb2x2ZUNzc1RleHQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYS5yZXBsYWNlKC91cmxcKFteKV0qXCkvZyxmdW5jdGlvbihhKXt2YXIgYz1hLnJlcGxhY2UoL1siJ10vZywiIikuc2xpY2UoNCwtMSk7cmV0dXJuIGM9cC5yZXNvbHZlVXJsKGIsYywhMCksInVybCgiK2MrIikifSl9LHJlc29sdmVBdHRyaWJ1dGVzOmZ1bmN0aW9uKGEsYil7dmFyIGM9YSYmYS5xdWVyeVNlbGVjdG9yQWxsKG4pO2MmJnEoYyxmdW5jdGlvbihhKXt0aGlzLnJlc29sdmVOb2RlQXR0cmlidXRlcyhhLGIpfSx0aGlzKX0scmVzb2x2ZU5vZGVBdHRyaWJ1dGVzOmZ1bmN0aW9uKGEsYil7bS5mb3JFYWNoKGZ1bmN0aW9uKGMpe3ZhciBkPWEuYXR0cmlidXRlc1tjXTtpZihkJiZkLnZhbHVlJiZkLnZhbHVlLnNlYXJjaChvKTwwKXt2YXIgZT1wLnJlc29sdmVVcmwoYixkLnZhbHVlLCEwKTtkLnZhbHVlPWV9fSl9fTtoPWh8fHthc3luYzohMCxvazpmdW5jdGlvbihhKXtyZXR1cm4gYS5zdGF0dXM+PTIwMCYmYS5zdGF0dXM8MzAwfHwzMDQ9PT1hLnN0YXR1c3x8MD09PWEuc3RhdHVzfSxsb2FkOmZ1bmN0aW9uKGIsYyxkKXt2YXIgZT1uZXcgWE1MSHR0cFJlcXVlc3Q7cmV0dXJuKGEuZmxhZ3MuZGVidWd8fGEuZmxhZ3MuYnVzdCkmJihiKz0iPyIrTWF0aC5yYW5kb20oKSksZS5vcGVuKCJHRVQiLGIsaC5hc3luYyksZS5hZGRFdmVudExpc3RlbmVyKCJyZWFkeXN0YXRlY2hhbmdlIixmdW5jdGlvbigpezQ9PT1lLnJlYWR5U3RhdGUmJmMuY2FsbChkLCFoLm9rKGUpJiZlLGUucmVzcG9uc2UsYil9KSxlLnNlbmQoKSxlfSxsb2FkRG9jdW1lbnQ6ZnVuY3Rpb24oYSxiLGMpe3RoaXMubG9hZChhLGIsYykucmVzcG9uc2VUeXBlPSJkb2N1bWVudCJ9fTt2YXIgcT1BcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsLmJpbmQoQXJyYXkucHJvdG90eXBlLmZvckVhY2gpO2EucGF0aD1wLGEueGhyPWgsYS5pbXBvcnRlcj1rLGEuZ2V0RG9jdW1lbnRVcmw9cC5nZXREb2N1bWVudFVybCxhLklNUE9SVF9MSU5LX1RZUEU9aX0od2luZG93LkhUTUxJbXBvcnRzKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEpe3JldHVybiJsaW5rIj09PWEubG9jYWxOYW1lJiZhLmdldEF0dHJpYnV0ZSgicmVsIik9PT1mfWZ1bmN0aW9uIGMoYSl7cmV0dXJuIGEucGFyZW50Tm9kZSYmIWQoYSkmJiFlKGEpfWZ1bmN0aW9uIGQoYSl7cmV0dXJuIGEub3duZXJEb2N1bWVudD09PWRvY3VtZW50fHxhLm93bmVyRG9jdW1lbnQuaW1wbD09PWRvY3VtZW50fWZ1bmN0aW9uIGUoYSl7cmV0dXJuIGEucGFyZW50Tm9kZSYmImVsZW1lbnQiPT09YS5wYXJlbnROb2RlLmxvY2FsTmFtZX12YXIgZj0iaW1wb3J0IixnPXtzZWxlY3RvcnM6WyJsaW5rW3JlbD0iK2YrIl0iLCJsaW5rW3JlbD1zdHlsZXNoZWV0XSIsInN0eWxlIiwic2NyaXB0Om5vdChbdHlwZV0pIiwnc2NyaXB0W3R5cGU9InRleHQvamF2YXNjcmlwdCJdJ10sbWFwOntsaW5rOiJwYXJzZUxpbmsiLHNjcmlwdDoicGFyc2VTY3JpcHQiLHN0eWxlOiJwYXJzZUdlbmVyaWMifSxwYXJzZTpmdW5jdGlvbihhKXtpZighYS5fX2ltcG9ydFBhcnNlZCl7YS5fX2ltcG9ydFBhcnNlZD0hMDt2YXIgYj1hLnF1ZXJ5U2VsZWN0b3JBbGwoZy5zZWxlY3RvcnMpO2goYixmdW5jdGlvbihhKXtnW2cubWFwW2EubG9jYWxOYW1lXV0oYSl9KX19LHBhcnNlTGluazpmdW5jdGlvbihhKXtiKGEpP2EuY29udGVudCYmZy5wYXJzZShhLmNvbnRlbnQpOnRoaXMucGFyc2VHZW5lcmljKGEpfSxwYXJzZUdlbmVyaWM6ZnVuY3Rpb24oYSl7YyhhKSYmZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChhKX0scGFyc2VTY3JpcHQ6ZnVuY3Rpb24oYil7aWYoYyhiKSl7dmFyIGQ9KGIuX19yZXNvdXJjZXx8Yi50ZXh0Q29udGVudCkudHJpbSgpO2lmKGQpe3ZhciBlPWIuX19ub2RlVXJsO2lmKCFlKXt2YXIgZT1hLnBhdGguZG9jdW1lbnRVcmxGcm9tTm9kZShiKSxmPSJbIitNYXRoLmZsb29yKDFlMyooTWF0aC5yYW5kb20oKSsxKSkrIl0iLGc9ZC5tYXRjaCgvUG9seW1lclwoWyciXShbXiciXSopLyk7Zj1nJiZnWzFdfHxmLGUrPSIvIitmKyIuanMifWQrPSJcbi8vIyBzb3VyY2VVUkw9IitlKyJcbiIsZXZhbC5jYWxsKHdpbmRvdyxkKX19fX0saD1BcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsLmJpbmQoQXJyYXkucHJvdG90eXBlLmZvckVhY2gpO2EucGFyc2VyPWd9KEhUTUxJbXBvcnRzKSxmdW5jdGlvbigpe2Z1bmN0aW9uIGEoKXtIVE1MSW1wb3J0cy5pbXBvcnRlci5sb2FkKGRvY3VtZW50LGZ1bmN0aW9uKCl7SFRNTEltcG9ydHMucGFyc2VyLnBhcnNlKGRvY3VtZW50KSxIVE1MSW1wb3J0cy5yZWFkeVRpbWU9KG5ldyBEYXRlKS5nZXRUaW1lKCksZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoIkhUTUxJbXBvcnRzTG9hZGVkIix7YnViYmxlczohMH0pKX0pfSJmdW5jdGlvbiIhPXR5cGVvZiB3aW5kb3cuQ3VzdG9tRXZlbnQmJih3aW5kb3cuQ3VzdG9tRXZlbnQ9ZnVuY3Rpb24oYSl7dmFyIGI9ZG9jdW1lbnQuY3JlYXRlRXZlbnQoIkhUTUxFdmVudHMiKTtyZXR1cm4gYi5pbml0RXZlbnQoYSwhMCwhMCksYn0pLCJjb21wbGV0ZSI9PT1kb2N1bWVudC5yZWFkeVN0YXRlP2EoKTp3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsYSl9KCksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhKXt1LnB1c2goYSksdHx8KHQ9ITAscShkKSl9ZnVuY3Rpb24gYyhhKXtyZXR1cm4gd2luZG93LlNoYWRvd0RPTVBvbHlmaWxsJiZ3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwud3JhcElmTmVlZGVkKGEpfHxhfWZ1bmN0aW9uIGQoKXt0PSExO3ZhciBhPXU7dT1bXSxhLnNvcnQoZnVuY3Rpb24oYSxiKXtyZXR1cm4gYS51aWRfLWIudWlkX30pO3ZhciBiPSExO2EuZm9yRWFjaChmdW5jdGlvbihhKXt2YXIgYz1hLnRha2VSZWNvcmRzKCk7ZShhKSxjLmxlbmd0aCYmKGEuY2FsbGJhY2tfKGMsYSksYj0hMCl9KSxiJiZkKCl9ZnVuY3Rpb24gZShhKXthLm5vZGVzXy5mb3JFYWNoKGZ1bmN0aW9uKGIpe3ZhciBjPXAuZ2V0KGIpO2MmJmMuZm9yRWFjaChmdW5jdGlvbihiKXtiLm9ic2VydmVyPT09YSYmYi5yZW1vdmVUcmFuc2llbnRPYnNlcnZlcnMoKX0pfSl9ZnVuY3Rpb24gZihhLGIpe2Zvcih2YXIgYz1hO2M7Yz1jLnBhcmVudE5vZGUpe3ZhciBkPXAuZ2V0KGMpO2lmKGQpZm9yKHZhciBlPTA7ZTxkLmxlbmd0aDtlKyspe3ZhciBmPWRbZV0sZz1mLm9wdGlvbnM7aWYoYz09PWF8fGcuc3VidHJlZSl7dmFyIGg9YihnKTtoJiZmLmVucXVldWUoaCl9fX19ZnVuY3Rpb24gZyhhKXt0aGlzLmNhbGxiYWNrXz1hLHRoaXMubm9kZXNfPVtdLHRoaXMucmVjb3Jkc189W10sdGhpcy51aWRfPSsrdn1mdW5jdGlvbiBoKGEsYil7dGhpcy50eXBlPWEsdGhpcy50YXJnZXQ9Yix0aGlzLmFkZGVkTm9kZXM9W10sdGhpcy5yZW1vdmVkTm9kZXM9W10sdGhpcy5wcmV2aW91c1NpYmxpbmc9bnVsbCx0aGlzLm5leHRTaWJsaW5nPW51bGwsdGhpcy5hdHRyaWJ1dGVOYW1lPW51bGwsdGhpcy5hdHRyaWJ1dGVOYW1lc3BhY2U9bnVsbCx0aGlzLm9sZFZhbHVlPW51bGx9ZnVuY3Rpb24gaShhKXt2YXIgYj1uZXcgaChhLnR5cGUsYS50YXJnZXQpO3JldHVybiBiLmFkZGVkTm9kZXM9YS5hZGRlZE5vZGVzLnNsaWNlKCksYi5yZW1vdmVkTm9kZXM9YS5yZW1vdmVkTm9kZXMuc2xpY2UoKSxiLnByZXZpb3VzU2libGluZz1hLnByZXZpb3VzU2libGluZyxiLm5leHRTaWJsaW5nPWEubmV4dFNpYmxpbmcsYi5hdHRyaWJ1dGVOYW1lPWEuYXR0cmlidXRlTmFtZSxiLmF0dHJpYnV0ZU5hbWVzcGFjZT1hLmF0dHJpYnV0ZU5hbWVzcGFjZSxiLm9sZFZhbHVlPWEub2xkVmFsdWUsYn1mdW5jdGlvbiBqKGEsYil7cmV0dXJuIHc9bmV3IGgoYSxiKX1mdW5jdGlvbiBrKGEpe3JldHVybiB4P3g6KHg9aSh3KSx4Lm9sZFZhbHVlPWEseCl9ZnVuY3Rpb24gbCgpe3c9eD12b2lkIDB9ZnVuY3Rpb24gbShhKXtyZXR1cm4gYT09PXh8fGE9PT13fWZ1bmN0aW9uIG4oYSxiKXtyZXR1cm4gYT09PWI/YTp4JiZtKGEpP3g6bnVsbH1mdW5jdGlvbiBvKGEsYixjKXt0aGlzLm9ic2VydmVyPWEsdGhpcy50YXJnZXQ9Yix0aGlzLm9wdGlvbnM9Yyx0aGlzLnRyYW5zaWVudE9ic2VydmVkTm9kZXM9W119dmFyIHA9bmV3IFNpZGVUYWJsZSxxPXdpbmRvdy5tc1NldEltbWVkaWF0ZTtpZighcSl7dmFyIHI9W10scz1TdHJpbmcoTWF0aC5yYW5kb20oKSk7d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLGZ1bmN0aW9uKGEpe2lmKGEuZGF0YT09PXMpe3ZhciBiPXI7cj1bXSxiLmZvckVhY2goZnVuY3Rpb24oYSl7YSgpfSl9fSkscT1mdW5jdGlvbihhKXtyLnB1c2goYSksd2luZG93LnBvc3RNZXNzYWdlKHMsIioiKX19dmFyIHQ9ITEsdT1bXSx2PTA7Zy5wcm90b3R5cGU9e29ic2VydmU6ZnVuY3Rpb24oYSxiKXtpZihhPWMoYSksIWIuY2hpbGRMaXN0JiYhYi5hdHRyaWJ1dGVzJiYhYi5jaGFyYWN0ZXJEYXRhfHxiLmF0dHJpYnV0ZU9sZFZhbHVlJiYhYi5hdHRyaWJ1dGVzfHxiLmF0dHJpYnV0ZUZpbHRlciYmYi5hdHRyaWJ1dGVGaWx0ZXIubGVuZ3RoJiYhYi5hdHRyaWJ1dGVzfHxiLmNoYXJhY3RlckRhdGFPbGRWYWx1ZSYmIWIuY2hhcmFjdGVyRGF0YSl0aHJvdyBuZXcgU3ludGF4RXJyb3I7dmFyIGQ9cC5nZXQoYSk7ZHx8cC5zZXQoYSxkPVtdKTtmb3IodmFyIGUsZj0wO2Y8ZC5sZW5ndGg7ZisrKWlmKGRbZl0ub2JzZXJ2ZXI9PT10aGlzKXtlPWRbZl0sZS5yZW1vdmVMaXN0ZW5lcnMoKSxlLm9wdGlvbnM9YjticmVha31lfHwoZT1uZXcgbyh0aGlzLGEsYiksZC5wdXNoKGUpLHRoaXMubm9kZXNfLnB1c2goYSkpLGUuYWRkTGlzdGVuZXJzKCl9LGRpc2Nvbm5lY3Q6ZnVuY3Rpb24oKXt0aGlzLm5vZGVzXy5mb3JFYWNoKGZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1wLmdldChhKSxjPTA7YzxiLmxlbmd0aDtjKyspe3ZhciBkPWJbY107aWYoZC5vYnNlcnZlcj09PXRoaXMpe2QucmVtb3ZlTGlzdGVuZXJzKCksYi5zcGxpY2UoYywxKTticmVha319fSx0aGlzKSx0aGlzLnJlY29yZHNfPVtdfSx0YWtlUmVjb3JkczpmdW5jdGlvbigpe3ZhciBhPXRoaXMucmVjb3Jkc187cmV0dXJuIHRoaXMucmVjb3Jkc189W10sYX19O3ZhciB3LHg7by5wcm90b3R5cGU9e2VucXVldWU6ZnVuY3Rpb24oYSl7dmFyIGM9dGhpcy5vYnNlcnZlci5yZWNvcmRzXyxkPWMubGVuZ3RoO2lmKGMubGVuZ3RoPjApe3ZhciBlPWNbZC0xXSxmPW4oZSxhKTtpZihmKXJldHVybiBjW2QtMV09Zix2b2lkIDB9ZWxzZSBiKHRoaXMub2JzZXJ2ZXIpO2NbZF09YX0sYWRkTGlzdGVuZXJzOmZ1bmN0aW9uKCl7dGhpcy5hZGRMaXN0ZW5lcnNfKHRoaXMudGFyZ2V0KX0sYWRkTGlzdGVuZXJzXzpmdW5jdGlvbihhKXt2YXIgYj10aGlzLm9wdGlvbnM7Yi5hdHRyaWJ1dGVzJiZhLmFkZEV2ZW50TGlzdGVuZXIoIkRPTUF0dHJNb2RpZmllZCIsdGhpcywhMCksYi5jaGFyYWN0ZXJEYXRhJiZhLmFkZEV2ZW50TGlzdGVuZXIoIkRPTUNoYXJhY3RlckRhdGFNb2RpZmllZCIsdGhpcywhMCksYi5jaGlsZExpc3QmJmEuYWRkRXZlbnRMaXN0ZW5lcigiRE9NTm9kZUluc2VydGVkIix0aGlzLCEwKSwoYi5jaGlsZExpc3R8fGIuc3VidHJlZSkmJmEuYWRkRXZlbnRMaXN0ZW5lcigiRE9NTm9kZVJlbW92ZWQiLHRoaXMsITApfSxyZW1vdmVMaXN0ZW5lcnM6ZnVuY3Rpb24oKXt0aGlzLnJlbW92ZUxpc3RlbmVyc18odGhpcy50YXJnZXQpfSxyZW1vdmVMaXN0ZW5lcnNfOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMub3B0aW9ucztiLmF0dHJpYnV0ZXMmJmEucmVtb3ZlRXZlbnRMaXN0ZW5lcigiRE9NQXR0ck1vZGlmaWVkIix0aGlzLCEwKSxiLmNoYXJhY3RlckRhdGEmJmEucmVtb3ZlRXZlbnRMaXN0ZW5lcigiRE9NQ2hhcmFjdGVyRGF0YU1vZGlmaWVkIix0aGlzLCEwKSxiLmNoaWxkTGlzdCYmYS5yZW1vdmVFdmVudExpc3RlbmVyKCJET01Ob2RlSW5zZXJ0ZWQiLHRoaXMsITApLChiLmNoaWxkTGlzdHx8Yi5zdWJ0cmVlKSYmYS5yZW1vdmVFdmVudExpc3RlbmVyKCJET01Ob2RlUmVtb3ZlZCIsdGhpcywhMCl9LGFkZFRyYW5zaWVudE9ic2VydmVyOmZ1bmN0aW9uKGEpe2lmKGEhPT10aGlzLnRhcmdldCl7dGhpcy5hZGRMaXN0ZW5lcnNfKGEpLHRoaXMudHJhbnNpZW50T2JzZXJ2ZWROb2Rlcy5wdXNoKGEpO3ZhciBiPXAuZ2V0KGEpO2J8fHAuc2V0KGEsYj1bXSksYi5wdXNoKHRoaXMpfX0scmVtb3ZlVHJhbnNpZW50T2JzZXJ2ZXJzOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy50cmFuc2llbnRPYnNlcnZlZE5vZGVzO3RoaXMudHJhbnNpZW50T2JzZXJ2ZWROb2Rlcz1bXSxhLmZvckVhY2goZnVuY3Rpb24oYSl7dGhpcy5yZW1vdmVMaXN0ZW5lcnNfKGEpO2Zvcih2YXIgYj1wLmdldChhKSxjPTA7YzxiLmxlbmd0aDtjKyspaWYoYltjXT09PXRoaXMpe2Iuc3BsaWNlKGMsMSk7YnJlYWt9fSx0aGlzKX0saGFuZGxlRXZlbnQ6ZnVuY3Rpb24oYSl7c3dpdGNoKGEuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCksYS50eXBlKXtjYXNlIkRPTUF0dHJNb2RpZmllZCI6dmFyIGI9YS5hdHRyTmFtZSxjPWEucmVsYXRlZE5vZGUubmFtZXNwYWNlVVJJLGQ9YS50YXJnZXQsZT1uZXcgaigiYXR0cmlidXRlcyIsZCk7ZS5hdHRyaWJ1dGVOYW1lPWIsZS5hdHRyaWJ1dGVOYW1lc3BhY2U9Yzt2YXIgZz1hLmF0dHJDaGFuZ2U9PT1NdXRhdGlvbkV2ZW50LkFERElUSU9OP251bGw6YS5wcmV2VmFsdWU7ZihkLGZ1bmN0aW9uKGEpe3JldHVybiFhLmF0dHJpYnV0ZXN8fGEuYXR0cmlidXRlRmlsdGVyJiZhLmF0dHJpYnV0ZUZpbHRlci5sZW5ndGgmJi0xPT09YS5hdHRyaWJ1dGVGaWx0ZXIuaW5kZXhPZihiKSYmLTE9PT1hLmF0dHJpYnV0ZUZpbHRlci5pbmRleE9mKGMpP3ZvaWQgMDphLmF0dHJpYnV0ZU9sZFZhbHVlP2soZyk6ZX0pO2JyZWFrO2Nhc2UiRE9NQ2hhcmFjdGVyRGF0YU1vZGlmaWVkIjp2YXIgZD1hLnRhcmdldCxlPWooImNoYXJhY3RlckRhdGEiLGQpLGc9YS5wcmV2VmFsdWU7ZihkLGZ1bmN0aW9uKGEpe3JldHVybiBhLmNoYXJhY3RlckRhdGE/YS5jaGFyYWN0ZXJEYXRhT2xkVmFsdWU/ayhnKTplOnZvaWQgMH0pO2JyZWFrO2Nhc2UiRE9NTm9kZVJlbW92ZWQiOnRoaXMuYWRkVHJhbnNpZW50T2JzZXJ2ZXIoYS50YXJnZXQpO2Nhc2UiRE9NTm9kZUluc2VydGVkIjp2YXIgaCxpLGQ9YS5yZWxhdGVkTm9kZSxtPWEudGFyZ2V0OyJET01Ob2RlSW5zZXJ0ZWQiPT09YS50eXBlPyhoPVttXSxpPVtdKTooaD1bXSxpPVttXSk7dmFyIG49bS5wcmV2aW91c1NpYmxpbmcsbz1tLm5leHRTaWJsaW5nLGU9aigiY2hpbGRMaXN0IixkKTtlLmFkZGVkTm9kZXM9aCxlLnJlbW92ZWROb2Rlcz1pLGUucHJldmlvdXNTaWJsaW5nPW4sZS5uZXh0U2libGluZz1vLGYoZCxmdW5jdGlvbihhKXtyZXR1cm4gYS5jaGlsZExpc3Q/ZTp2b2lkIDB9KX1sKCl9fSxhLkpzTXV0YXRpb25PYnNlcnZlcj1nfSh0aGlzKSwhd2luZG93Lk11dGF0aW9uT2JzZXJ2ZXImJih3aW5kb3cuTXV0YXRpb25PYnNlcnZlcj13aW5kb3cuV2ViS2l0TXV0YXRpb25PYnNlcnZlcnx8d2luZG93LkpzTXV0YXRpb25PYnNlcnZlciwhTXV0YXRpb25PYnNlcnZlcikpdGhyb3cgbmV3IEVycm9yKCJubyBtdXRhdGlvbiBvYnNlcnZlciBzdXBwb3J0Iik7IWZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYixmKXt2YXIgZz1mfHx7fTtpZighYil0aHJvdyBuZXcgRXJyb3IoIk5hbWUgYXJndW1lbnQgbXVzdCBub3QgYmUgZW1wdHkiKTtpZihnLm5hbWU9YiwhZy5wcm90b3R5cGUpdGhyb3cgbmV3IEVycm9yKCJPcHRpb25zIG1pc3NpbmcgcmVxdWlyZWQgcHJvdG90eXBlIHByb3BlcnR5Iik7cmV0dXJuIGcubGlmZWN5Y2xlPWcubGlmZWN5Y2xlfHx7fSxnLmFuY2VzdHJ5PWMoZy5leHRlbmRzKSxkKGcpLGUoZyksayhnLnByb3RvdHlwZSksbShiLGcpLGcuY3Rvcj1uKGcpLGcuY3Rvci5wcm90b3R5cGU9Zy5wcm90b3R5cGUsZy5wcm90b3R5cGUuY29uc3RydWN0b3I9Zy5jdG9yLGEucmVhZHkmJmEudXBncmFkZUFsbChkb2N1bWVudCksZy5jdG9yfWZ1bmN0aW9uIGMoYSl7dmFyIGI9c1thXTtyZXR1cm4gYj9jKGIuZXh0ZW5kcykuY29uY2F0KFtiXSk6W119ZnVuY3Rpb24gZChhKXtmb3IodmFyIGIsYz1hLmV4dGVuZHMsZD0wO2I9YS5hbmNlc3RyeVtkXTtkKyspYz1iLmlzJiZiLnRhZzthLnRhZz1jfHxhLm5hbWUsYyYmKGEuaXM9YS5uYW1lKX1mdW5jdGlvbiBlKGEpe2lmKCFPYmplY3QuX19wcm90b19fKXt2YXIgYj1IVE1MRWxlbWVudC5wcm90b3R5cGU7aWYoYS5pcyl7dmFyIGM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChhLnRhZyk7Yj1PYmplY3QuZ2V0UHJvdG90eXBlT2YoYyl9fWEubmF0aXZlPWJ9ZnVuY3Rpb24gZihhKXtyZXR1cm4gZyh0KGEudGFnKSxhKX1mdW5jdGlvbiBnKGIsYyl7cmV0dXJuIGMuaXMmJmIuc2V0QXR0cmlidXRlKCJpcyIsYy5pcyksaChiLGMpLGIuX191cGdyYWRlZF9fPSEwLGEudXBncmFkZVN1YnRyZWUoYiksaihiKSxifWZ1bmN0aW9uIGgoYSxiKXtPYmplY3QuX19wcm90b19fP2EuX19wcm90b19fPWIucHJvdG90eXBlOihpKGEsYi5wcm90b3R5cGUsYi5uYXRpdmUpLGEuX19wcm90b19fPWIucHJvdG90eXBlKX1mdW5jdGlvbiBpKGEsYixjKXtmb3IodmFyIGQ9e30sZT1iO2UhPT1jJiZlIT09SFRNTFVua25vd25FbGVtZW50LnByb3RvdHlwZTspe2Zvcih2YXIgZixnPU9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGUpLGg9MDtmPWdbaF07aCsrKWRbZl18fChPYmplY3QuZGVmaW5lUHJvcGVydHkoYSxmLE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSxmKSksZFtmXT0xKTtlPU9iamVjdC5nZXRQcm90b3R5cGVPZihlKX19ZnVuY3Rpb24gaihhKXthLnJlYWR5Q2FsbGJhY2smJmEucmVhZHlDYWxsYmFjaygpfWZ1bmN0aW9uIGsoYSl7dmFyIGI9YS5zZXRBdHRyaWJ1dGU7YS5zZXRBdHRyaWJ1dGU9ZnVuY3Rpb24oYSxjKXtsLmNhbGwodGhpcyxhLGMsYil9O3ZhciBjPWEucmVtb3ZlQXR0cmlidXRlO2EucmVtb3ZlQXR0cmlidXRlPWZ1bmN0aW9uKGEsYil7bC5jYWxsKHRoaXMsYSxiLGMpfX1mdW5jdGlvbiBsKGEsYixjKXt2YXIgZD10aGlzLmdldEF0dHJpYnV0ZShhKTtjLmFwcGx5KHRoaXMsYXJndW1lbnRzKSx0aGlzLmF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjayYmdGhpcy5nZXRBdHRyaWJ1dGUoYSkhPT1kJiZ0aGlzLmF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjayhhLGQpfWZ1bmN0aW9uIG0oYSxiKXtzW2FdPWJ9ZnVuY3Rpb24gbihhKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gZihhKX19ZnVuY3Rpb24gbyhhKXt2YXIgYj1zW2FdO3JldHVybiBiP25ldyBiLmN0b3I6dChhKX1mdW5jdGlvbiBwKGEpe2lmKCFhLl9fdXBncmFkZWRfXyYmYS5ub2RlVHlwZT09PU5vZGUuRUxFTUVOVF9OT0RFKXt2YXIgYj1hLmdldEF0dHJpYnV0ZSgiaXMiKXx8YS5sb2NhbE5hbWUsYz1zW2JdO3JldHVybiBjJiZnKGEsYyl9fWZ1bmN0aW9uIHEoYil7dmFyIGM9dS5jYWxsKHRoaXMsYik7cmV0dXJuIGEudXBncmFkZUFsbChjKSxjfWlmKGF8fChhPXdpbmRvdy5DdXN0b21FbGVtZW50cz17ZmxhZ3M6e319KSxhLmhhc05hdGl2ZT0oZG9jdW1lbnQud2Via2l0UmVnaXN0ZXJ8fGRvY3VtZW50LnJlZ2lzdGVyKSYmIm5hdGl2ZSI9PT1hLmZsYWdzLnJlZ2lzdGVyLGEuaGFzTmF0aXZlKXtkb2N1bWVudC5yZWdpc3Rlcj1kb2N1bWVudC5yZWdpc3Rlcnx8ZG9jdW1lbnQud2Via2l0UmVnaXN0ZXI7dmFyIHI9ZnVuY3Rpb24oKXt9O2EucmVnaXN0cnk9e30sYS51cGdyYWRlRWxlbWVudD1yfWVsc2V7dmFyIHM9e30sdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50LmJpbmQoZG9jdW1lbnQpLHU9Tm9kZS5wcm90b3R5cGUuY2xvbmVOb2RlO2RvY3VtZW50LnJlZ2lzdGVyPWIsZG9jdW1lbnQuY3JlYXRlRWxlbWVudD1vLE5vZGUucHJvdG90eXBlLmNsb25lTm9kZT1xLGEucmVnaXN0cnk9cyxhLnVwZ3JhZGU9cH19KHdpbmRvdy5DdXN0b21FbGVtZW50cyksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhLGMsZCl7dmFyIGU9YS5maXJzdEVsZW1lbnRDaGlsZDtpZighZSlmb3IoZT1hLmZpcnN0Q2hpbGQ7ZSYmZS5ub2RlVHlwZSE9PU5vZGUuRUxFTUVOVF9OT0RFOyllPWUubmV4dFNpYmxpbmc7Zm9yKDtlOyljKGUsZCkhPT0hMCYmYihlLGMsZCksZT1lLm5leHRFbGVtZW50U2libGluZztyZXR1cm4gbnVsbH1mdW5jdGlvbiBjKGEsZCl7YihhLGZ1bmN0aW9uKGEpe3JldHVybiBkKGEpPyEwOihhLndlYmtpdFNoYWRvd1Jvb3QmJmMoYS53ZWJraXRTaGFkb3dSb290LGQpLHZvaWQgMCl9KSxhLndlYmtpdFNoYWRvd1Jvb3QmJmMoYS53ZWJraXRTaGFkb3dSb290LGQpfWZ1bmN0aW9uIGQoYSl7cmV0dXJuIGcoYSk/KGgoYSksITApOihpKGEpLHZvaWQgMCl9ZnVuY3Rpb24gZShhKXtjKGEsZnVuY3Rpb24oYSl7cmV0dXJuIGQoYSk/ITA6dm9pZCAwfSl9ZnVuY3Rpb24gZihhKXtyZXR1cm4gZChhKXx8ZShhKX1mdW5jdGlvbiBnKGIpe2lmKCFiLl9fdXBncmFkZWRfXyYmYi5ub2RlVHlwZT09PU5vZGUuRUxFTUVOVF9OT0RFKXt2YXIgYz1iLmdldEF0dHJpYnV0ZSgiaXMiKXx8Yi5sb2NhbE5hbWUsZD1hLnJlZ2lzdHJ5W2NdO2lmKGQpcmV0dXJuIGxvZ0ZsYWdzLmRvbSYmY29uc29sZS5ncm91cCgidXBncmFkZToiLGIubG9jYWxOYW1lKSxhLnVwZ3JhZGUoYiksbG9nRmxhZ3MuZG9tJiZjb25zb2xlLmdyb3VwRW5kKCksITB9fWZ1bmN0aW9uIGgoYSl7aShhKSxsKGEpJiZjKGEsZnVuY3Rpb24oYSl7aShhKX0pfWZ1bmN0aW9uIGkoYSl7KGEuaW5zZXJ0ZWRDYWxsYmFja3x8YS5fX3VwZ3JhZGVkX18mJmxvZ0ZsYWdzLmRvbSkmJihsb2dGbGFncy5kb20mJmNvbnNvbGUuZ3JvdXAoImluc2VydGVkOiIsYS5sb2NhbE5hbWUpLGwoYSkmJihhLl9faW5zZXJ0ZWQ9KGEuX19pbnNlcnRlZHx8MCkrMSxhLl9faW5zZXJ0ZWQ8MSYmKGEuX19pbnNlcnRlZD0xKSxhLl9faW5zZXJ0ZWQ+MT9sb2dGbGFncy5kb20mJmNvbnNvbGUud2FybigiaW5zZXJ0ZWQ6IixhLmxvY2FsTmFtZSwiaW5zZXJ0L3JlbW92ZSBjb3VudDoiLGEuX19pbnNlcnRlZCk6YS5pbnNlcnRlZENhbGxiYWNrJiYobG9nRmxhZ3MuZG9tJiZjb25zb2xlLmxvZygiaW5zZXJ0ZWQ6IixhLmxvY2FsTmFtZSksYS5pbnNlcnRlZENhbGxiYWNrKCkpKSxsb2dGbGFncy5kb20mJmNvbnNvbGUuZ3JvdXBFbmQoKSl9ZnVuY3Rpb24gaihhKXtrKGEpLGMoYSxmdW5jdGlvbihhKXtrKGEpfSl9ZnVuY3Rpb24gayhhKXsoYS5yZW1vdmVkQ2FsbGJhY2t8fGEuX191cGdyYWRlZF9fJiZsb2dGbGFncy5kb20pJiYobG9nRmxhZ3MuZG9tJiZjb25zb2xlLmxvZygicmVtb3ZlZDoiLGEubG9jYWxOYW1lKSxsKGEpfHwoYS5fX2luc2VydGVkPShhLl9faW5zZXJ0ZWR8fDApLTEsYS5fX2luc2VydGVkPjAmJihhLl9faW5zZXJ0ZWQ9MCksYS5fX2luc2VydGVkPDA/bG9nRmxhZ3MuZG9tJiZjb25zb2xlLndhcm4oInJlbW92ZWQ6IixhLmxvY2FsTmFtZSwiaW5zZXJ0L3JlbW92ZSBjb3VudDoiLGEuX19pbnNlcnRlZCk6YS5yZW1vdmVkQ2FsbGJhY2smJmEucmVtb3ZlZENhbGxiYWNrKCkpKX1mdW5jdGlvbiBsKGEpe2Zvcih2YXIgYj1hO2I7KXtpZihiPT1hLm93bmVyRG9jdW1lbnQpcmV0dXJuITA7Yj1iLnBhcmVudE5vZGV8fGIuaG9zdH19ZnVuY3Rpb24gbShhKXthLndlYmtpdFNoYWRvd1Jvb3QmJiFhLndlYmtpdFNoYWRvd1Jvb3QuX193YXRjaGVkJiYobG9nRmxhZ3MuZG9tJiZjb25zb2xlLmxvZygid2F0Y2hpbmcgc2hhZG93LXJvb3QgZm9yOiAiLGEubG9jYWxOYW1lKSxyKGEud2Via2l0U2hhZG93Um9vdCksYS53ZWJraXRTaGFkb3dSb290Ll9fd2F0Y2hlZD0hMCl9ZnVuY3Rpb24gbihhKXttKGEpLGMoYSxmdW5jdGlvbigpe20oYSl9KX1mdW5jdGlvbiBvKGEpe3N3aXRjaChhLmxvY2FsTmFtZSl7Y2FzZSJzdHlsZSI6Y2FzZSJzY3JpcHQiOmNhc2UidGVtcGxhdGUiOmNhc2Ugdm9pZCAwOnJldHVybiEwfX1mdW5jdGlvbiBwKGEpe2lmKGxvZ0ZsYWdzLmRvbSl7dmFyIGI9YVswXTtpZihiJiYiY2hpbGRMaXN0Ij09PWIudHlwZSYmYi5hZGRlZE5vZGVzJiZiLmFkZGVkTm9kZXMpe2Zvcih2YXIgYz1iLmFkZGVkTm9kZXNbMF07YyYmYyE9PWRvY3VtZW50JiYhYy5ob3N0OyljPWMucGFyZW50Tm9kZTt2YXIgZD1jJiYoYy5VUkx8fGMuX1VSTHx8Yy5ob3N0JiZjLmhvc3QubG9jYWxOYW1lKXx8IiI7ZD1kLnNwbGl0KCIvPyIpLnNoaWZ0KCkuc3BsaXQoIi8iKS5wb3AoKX1jb25zb2xlLmdyb3VwKCJtdXRhdGlvbnMgKCVkKSBbJXNdIixhLmxlbmd0aCxkfHwiIil9YS5mb3JFYWNoKGZ1bmN0aW9uKGEpeyJjaGlsZExpc3QiPT09YS50eXBlJiYodihhLmFkZGVkTm9kZXMsZnVuY3Rpb24oYSl7byhhKXx8ZihhKX0pLHYoYS5yZW1vdmVkTm9kZXMsZnVuY3Rpb24oYSl7byhhKXx8aihhKX0pKX0pLGxvZ0ZsYWdzLmRvbSYmY29uc29sZS5ncm91cEVuZCgpfWZ1bmN0aW9uIHEoKXtwKHUudGFrZVJlY29yZHMoKSkKfWZ1bmN0aW9uIHIoYSl7dS5vYnNlcnZlKGEse2NoaWxkTGlzdDohMCxzdWJ0cmVlOiEwfSl9ZnVuY3Rpb24gcyhhKXtyKGEpfWZ1bmN0aW9uIHQoYSl7bG9nRmxhZ3MuZG9tJiZjb25zb2xlLmdyb3VwKCJ1cGdyYWRlRG9jdW1lbnQ6ICIsKGEuVVJMfHxhLl9VUkx8fCIiKS5zcGxpdCgiLyIpLnBvcCgpKSxmKGEpLGxvZ0ZsYWdzLmRvbSYmY29uc29sZS5ncm91cEVuZCgpfXZhciB1PW5ldyBNdXRhdGlvbk9ic2VydmVyKHApLHY9QXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbC5iaW5kKEFycmF5LnByb3RvdHlwZS5mb3JFYWNoKTthLndhdGNoU2hhZG93PW0sYS53YXRjaEFsbFNoYWRvd3M9bixhLnVwZ3JhZGVBbGw9ZixhLnVwZ3JhZGVTdWJ0cmVlPWUsYS5vYnNlcnZlRG9jdW1lbnQ9cyxhLnVwZ3JhZGVEb2N1bWVudD10LGEudGFrZVJlY29yZHM9cX0od2luZG93LkN1c3RvbUVsZW1lbnRzKSxmdW5jdGlvbigpe2Z1bmN0aW9uIHBhcnNlRWxlbWVudEVsZW1lbnQoYSl7dmFyIGI9e25hbWU6IiIsImV4dGVuZHMiOm51bGx9O3Rha2VBdHRyaWJ1dGVzKGEsYik7dmFyIGM9SFRNTEVsZW1lbnQucHJvdG90eXBlO2lmKGIuZXh0ZW5kcyl7dmFyIGQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChiLmV4dGVuZHMpO2M9ZC5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihkKX1iLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGMpLGEub3B0aW9ucz1iO3ZhciBlPWEucXVlcnlTZWxlY3Rvcignc2NyaXB0Om5vdChbdHlwZV0pLHNjcmlwdFt0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiXSxzY3JpcHRzJyk7ZSYmZXhlY3V0ZUNvbXBvbmVudFNjcmlwdChlLnRleHRDb250ZW50LGEsYi5uYW1lKTt2YXIgZj1kb2N1bWVudC5yZWdpc3RlcihiLm5hbWUsYik7YS5jdG9yPWY7dmFyIGc9YS5nZXRBdHRyaWJ1dGUoImNvbnN0cnVjdG9yIik7ZyYmKHdpbmRvd1tnXT1mKX1mdW5jdGlvbiB0YWtlQXR0cmlidXRlcyhhLGIpe2Zvcih2YXIgYyBpbiBiKXt2YXIgZD1hLmF0dHJpYnV0ZXNbY107ZCYmKGJbY109ZC52YWx1ZSl9fWZ1bmN0aW9uIGV4ZWN1dGVDb21wb25lbnRTY3JpcHQoaW5TY3JpcHQsaW5Db250ZXh0LGluTmFtZSl7Y29udGV4dD1pbkNvbnRleHQ7dmFyIG93bmVyPWNvbnRleHQub3duZXJEb2N1bWVudCx1cmw9b3duZXIuX1VSTHx8b3duZXIuVVJMfHxvd25lci5pbXBsJiYob3duZXIuaW1wbC5fVVJMfHxvd25lci5pbXBsLlVSTCksbWF0Y2g9dXJsLm1hdGNoKC8uKlwvKFteLl0qKVsuXT8uKiQvKTtpZihtYXRjaCl7dmFyIG5hbWU9bWF0Y2hbMV07dXJsKz1uYW1lIT1pbk5hbWU/IjoiK2luTmFtZToiIn12YXIgY29kZT0iX19jb21wb25lbnRTY3JpcHQoJyIraW5OYW1lKyInLCBmdW5jdGlvbigpeyIraW5TY3JpcHQrIn0pOyIrIlxuLy8jIHNvdXJjZVVSTD0iK3VybCsiXG4iO2V2YWwoY29kZSl9ZnVuY3Rpb24gbWl4aW4oYSxiKXthPWF8fHt9O3RyeXtPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhiKS5mb3JFYWNoKGZ1bmN0aW9uKGMpe3ZhciBkPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoYixjKTtkJiZPYmplY3QuZGVmaW5lUHJvcGVydHkoYSxjLGQpfSl9Y2F0Y2goYyl7fXJldHVybiBhfXZhciBIVE1MRWxlbWVudEVsZW1lbnQ9ZnVuY3Rpb24oYSl7cmV0dXJuIGEucmVnaXN0ZXI9SFRNTEVsZW1lbnRFbGVtZW50LnByb3RvdHlwZS5yZWdpc3RlcixwYXJzZUVsZW1lbnRFbGVtZW50KGEpLGF9O0hUTUxFbGVtZW50RWxlbWVudC5wcm90b3R5cGU9e3JlZ2lzdGVyOmZ1bmN0aW9uKGEpe2EmJih0aGlzLm9wdGlvbnMubGlmZWN5Y2xlPWEubGlmZWN5Y2xlLGEucHJvdG90eXBlJiZtaXhpbih0aGlzLm9wdGlvbnMucHJvdG90eXBlLGEucHJvdG90eXBlKSl9fTt2YXIgY29udGV4dDt3aW5kb3cuX19jb21wb25lbnRTY3JpcHQ9ZnVuY3Rpb24oYSxiKXtiLmNhbGwoY29udGV4dCl9LHdpbmRvdy5IVE1MRWxlbWVudEVsZW1lbnQ9SFRNTEVsZW1lbnRFbGVtZW50fSgpLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhKXtyZXR1cm4ibGluayI9PT1hLmxvY2FsTmFtZSYmYS5nZXRBdHRyaWJ1dGUoInJlbCIpPT09Yn12YXIgYj13aW5kb3cuSFRNTEltcG9ydHM/SFRNTEltcG9ydHMuSU1QT1JUX0xJTktfVFlQRToibm9uZSIsYz17c2VsZWN0b3JzOlsibGlua1tyZWw9IitiKyJdIiwiZWxlbWVudCJdLG1hcDp7bGluazoicGFyc2VMaW5rIixlbGVtZW50OiJwYXJzZUVsZW1lbnQifSxwYXJzZTpmdW5jdGlvbihhKXtpZighYS5fX3BhcnNlZCl7YS5fX3BhcnNlZD0hMDt2YXIgYj1hLnF1ZXJ5U2VsZWN0b3JBbGwoYy5zZWxlY3RvcnMpO2QoYixmdW5jdGlvbihhKXtjW2MubWFwW2EubG9jYWxOYW1lXV0oYSl9KSxDdXN0b21FbGVtZW50cy51cGdyYWRlRG9jdW1lbnQoYSksQ3VzdG9tRWxlbWVudHMub2JzZXJ2ZURvY3VtZW50KGEpfX0scGFyc2VMaW5rOmZ1bmN0aW9uKGIpe2EoYikmJnRoaXMucGFyc2VJbXBvcnQoYil9LHBhcnNlSW1wb3J0OmZ1bmN0aW9uKGEpe2EuY29udGVudCYmYy5wYXJzZShhLmNvbnRlbnQpfSxwYXJzZUVsZW1lbnQ6ZnVuY3Rpb24oYSl7bmV3IEhUTUxFbGVtZW50RWxlbWVudChhKX19LGQ9QXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbC5iaW5kKEFycmF5LnByb3RvdHlwZS5mb3JFYWNoKTtDdXN0b21FbGVtZW50cy5wYXJzZXI9Y30oKSxmdW5jdGlvbigpe2Z1bmN0aW9uIGEoKXtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Q3VzdG9tRWxlbWVudHMucGFyc2VyLnBhcnNlKGRvY3VtZW50KSxDdXN0b21FbGVtZW50cy51cGdyYWRlRG9jdW1lbnQoZG9jdW1lbnQpLEN1c3RvbUVsZW1lbnRzLnJlYWR5PSEwLEN1c3RvbUVsZW1lbnRzLnJlYWR5VGltZT1EYXRlLm5vdygpLHdpbmRvdy5IVE1MSW1wb3J0cyYmKEN1c3RvbUVsZW1lbnRzLmVsYXBzZWQ9Q3VzdG9tRWxlbWVudHMucmVhZHlUaW1lLUhUTUxJbXBvcnRzLnJlYWR5VGltZSksZG9jdW1lbnQuYm9keS5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgiV2ViQ29tcG9uZW50c1JlYWR5Iix7YnViYmxlczohMH0pKX0sMCl9aWYoImZ1bmN0aW9uIiE9dHlwZW9mIHdpbmRvdy5DdXN0b21FdmVudCYmKHdpbmRvdy5DdXN0b21FdmVudD1mdW5jdGlvbihhKXt2YXIgYj1kb2N1bWVudC5jcmVhdGVFdmVudCgiSFRNTEV2ZW50cyIpO3JldHVybiBiLmluaXRFdmVudChhLCEwLCEwKSxifSksImNvbXBsZXRlIj09PWRvY3VtZW50LnJlYWR5U3RhdGUpYSgpO2Vsc2V7dmFyIGI9d2luZG93LkhUTUxJbXBvcnRzPyJIVE1MSW1wb3J0c0xvYWRlZCI6IkRPTUNvbnRlbnRMb2FkZWQiO3dpbmRvdy5hZGRFdmVudExpc3RlbmVyKGIsYSl9fSgpLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gYSgpe312YXIgYj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzdHlsZSIpO2IudGV4dENvbnRlbnQ9ImVsZW1lbnQge2Rpc3BsYXk6IG5vbmUgIWltcG9ydGFudDt9IC8qIGluamVjdGVkIGJ5IHBsYXRmb3JtLmpzICovIjt2YXIgYz1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCJoZWFkIik7aWYoYy5pbnNlcnRCZWZvcmUoYixjLmZpcnN0Q2hpbGQpLHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCl7Q3VzdG9tRWxlbWVudHMud2F0Y2hTaGFkb3c9YSxDdXN0b21FbGVtZW50cy53YXRjaEFsbFNoYWRvd3M9YTt2YXIgZD1bInVwZ3JhZGVBbGwiLCJ1cGdyYWRlU3VidHJlZSIsIm9ic2VydmVEb2N1bWVudCIsInVwZ3JhZGVEb2N1bWVudCJdLGU9e307ZC5mb3JFYWNoKGZ1bmN0aW9uKGEpe2VbYV09Q3VzdG9tRWxlbWVudHNbYV19KSxkLmZvckVhY2goZnVuY3Rpb24oYSl7Q3VzdG9tRWxlbWVudHNbYV09ZnVuY3Rpb24oYil7cmV0dXJuIGVbYV0od3JhcChiKSl9fSl9fSgpLGZ1bmN0aW9uKGEpe2E9YXx8e307dmFyIGI9e3NoYWRvdzpmdW5jdGlvbihhKXtyZXR1cm4gYT9hLnNoYWRvd1Jvb3R8fGEud2Via2l0U2hhZG93Um9vdDp2b2lkIDB9LGNhblRhcmdldDpmdW5jdGlvbihhKXtyZXR1cm4gYSYmQm9vbGVhbihhLmVsZW1lbnRGcm9tUG9pbnQpfSx0YXJnZXRpbmdTaGFkb3c6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5zaGFkb3coYSk7cmV0dXJuIHRoaXMuY2FuVGFyZ2V0KGIpP2I6dm9pZCAwfSxvbGRlclNoYWRvdzpmdW5jdGlvbihhKXt2YXIgYj1hLm9sZGVyU2hhZG93Um9vdDtpZighYil7dmFyIGM9YS5xdWVyeVNlbGVjdG9yKCJzaGFkb3ciKTtjJiYoYj1jLm9sZGVyU2hhZG93Um9vdCl9cmV0dXJuIGJ9LGFsbFNoYWRvd3M6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPVtdLGM9dGhpcy5zaGFkb3coYSk7YzspYi5wdXNoKGMpLGM9dGhpcy5vbGRlclNoYWRvdyhjKTtyZXR1cm4gYn0sc2VhcmNoUm9vdDpmdW5jdGlvbihhLGIsYyl7aWYoYSl7dmFyIGQsZSxmPWEuZWxlbWVudEZyb21Qb2ludChiLGMpO2ZvcihlPXRoaXMudGFyZ2V0aW5nU2hhZG93KGYpO2U7KXtpZihkPWUuZWxlbWVudEZyb21Qb2ludChiLGMpKXt2YXIgZz10aGlzLnRhcmdldGluZ1NoYWRvdyhkKTtyZXR1cm4gdGhpcy5zZWFyY2hSb290KGcsYixjKXx8ZH1lPXRoaXMub2xkZXJTaGFkb3coZSl9cmV0dXJuIGZ9fSxvd25lcjpmdW5jdGlvbihhKXtmb3IodmFyIGI9YTtiLnBhcmVudE5vZGU7KWI9Yi5wYXJlbnROb2RlO3JldHVybiBifSxmaW5kVGFyZ2V0OmZ1bmN0aW9uKGEpe3ZhciBiPWEuY2xpZW50WCxjPWEuY2xpZW50WSxkPXRoaXMub3duZXIoYS50YXJnZXQpO3JldHVybiBkLmVsZW1lbnRGcm9tUG9pbnQoYixjKXx8KGQ9ZG9jdW1lbnQpLHRoaXMuc2VhcmNoUm9vdChkb2N1bWVudCxiLGMpfX07YS50YXJnZXRGaW5kaW5nPWIsYS5maW5kVGFyZ2V0PWIuZmluZFRhcmdldC5iaW5kKGIpLHdpbmRvdy5Qb2ludGVyRXZlbnRzUG9seWZpbGw9YX0od2luZG93LlBvaW50ZXJFdmVudHNQb2x5ZmlsbCksZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGEpe3JldHVybidbdG91Y2gtYWN0aW9uPSInK2ErJyJdJ31mdW5jdGlvbiBiKGEpe3JldHVybiJ7IC1tcy10b3VjaC1hY3Rpb246ICIrYSsiOyB0b3VjaC1hY3Rpb246ICIrYSsiOyB9In12YXIgYz1bIm5vbmUiLCJhdXRvIiwicGFuLXgiLCJwYW4teSIse3J1bGU6InBhbi14IHBhbi15IixzZWxlY3RvcnM6WyJwYW4teCBwYW4teSIsInBhbi15IHBhbi14Il19XSxkPSIiO2MuZm9yRWFjaChmdW5jdGlvbihjKXtkKz1TdHJpbmcoYyk9PT1jP2EoYykrYihjKTpjLnNlbGVjdG9ycy5tYXAoYSkrYihjLnJ1bGUpfSk7dmFyIGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3R5bGUiKTtlLnRleHRDb250ZW50PWQ7dmFyIGY9ZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiaGVhZCIpO2YuaW5zZXJ0QmVmb3JlKGUsZi5maXJzdENoaWxkKX0oKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEsYil7dmFyIGI9Ynx8e30sZT1iLmJ1dHRvbnM7aWYodm9pZCAwPT09ZSlzd2l0Y2goYi53aGljaCl7Y2FzZSAxOmU9MTticmVhaztjYXNlIDI6ZT00O2JyZWFrO2Nhc2UgMzplPTI7YnJlYWs7ZGVmYXVsdDplPTB9dmFyIGY7aWYoYylmPW5ldyBNb3VzZUV2ZW50KGEsYik7ZWxzZXtmPWRvY3VtZW50LmNyZWF0ZUV2ZW50KCJNb3VzZUV2ZW50Iik7dmFyIGc9e2J1YmJsZXM6ITEsY2FuY2VsYWJsZTohMSx2aWV3Om51bGwsZGV0YWlsOm51bGwsc2NyZWVuWDowLHNjcmVlblk6MCxjbGllbnRYOjAsY2xpZW50WTowLGN0cmxLZXk6ITEsYWx0S2V5OiExLHNoaWZ0S2V5OiExLG1ldGFLZXk6ITEsYnV0dG9uOjAscmVsYXRlZFRhcmdldDpudWxsfTtPYmplY3Qua2V5cyhnKS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2EgaW4gYiYmKGdbYV09YlthXSl9KSxmLmluaXRNb3VzZUV2ZW50KGEsZy5idWJibGVzLGcuY2FuY2VsYWJsZSxnLnZpZXcsZy5kZXRhaWwsZy5zY3JlZW5YLGcuc2NyZWVuWSxnLmNsaWVudFgsZy5jbGllbnRZLGcuY3RybEtleSxnLmFsdEtleSxnLnNoaWZ0S2V5LGcubWV0YUtleSxnLmJ1dHRvbixnLnJlbGF0ZWRUYXJnZXQpfWR8fE9iamVjdC5kZWZpbmVQcm9wZXJ0eShmLCJidXR0b25zIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGV9LGVudW1lcmFibGU6ITB9KTt2YXIgaD0wO3JldHVybiBoPWIucHJlc3N1cmU/Yi5wcmVzc3VyZTplPy41OjAsT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoZix7cG9pbnRlcklkOnt2YWx1ZTpiLnBvaW50ZXJJZHx8MCxlbnVtZXJhYmxlOiEwfSx3aWR0aDp7dmFsdWU6Yi53aWR0aHx8MCxlbnVtZXJhYmxlOiEwfSxoZWlnaHQ6e3ZhbHVlOmIuaGVpZ2h0fHwwLGVudW1lcmFibGU6ITB9LHByZXNzdXJlOnt2YWx1ZTpoLGVudW1lcmFibGU6ITB9LHRpbHRYOnt2YWx1ZTpiLnRpbHRYfHwwLGVudW1lcmFibGU6ITB9LHRpbHRZOnt2YWx1ZTpiLnRpbHRZfHwwLGVudW1lcmFibGU6ITB9LHBvaW50ZXJUeXBlOnt2YWx1ZTpiLnBvaW50ZXJUeXBlfHwiIixlbnVtZXJhYmxlOiEwfSxod1RpbWVzdGFtcDp7dmFsdWU6Yi5od1RpbWVzdGFtcHx8MCxlbnVtZXJhYmxlOiEwfSxpc1ByaW1hcnk6e3ZhbHVlOmIuaXNQcmltYXJ5fHwhMSxlbnVtZXJhYmxlOiEwfX0pLGZ9dmFyIGM9ITEsZD0hMTt0cnl7dmFyIGU9bmV3IE1vdXNlRXZlbnQoImNsaWNrIix7YnV0dG9uczoxfSk7Yz0hMCxkPTE9PT1lLmJ1dHRvbnN9Y2F0Y2goZil7fWEuUG9pbnRlckV2ZW50fHwoYS5Qb2ludGVyRXZlbnQ9Yil9KHdpbmRvdyksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYigpe3RoaXMuaWRzPVtdLHRoaXMucG9pbnRlcnM9W119Yi5wcm90b3R5cGU9e3NldDpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuaWRzLmluZGV4T2YoYSk7Yz4tMT90aGlzLnBvaW50ZXJzW2NdPWI6KHRoaXMuaWRzLnB1c2goYSksdGhpcy5wb2ludGVycy5wdXNoKGIpKX0saGFzOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmlkcy5pbmRleE9mKGEpPi0xfSwiZGVsZXRlIjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmlkcy5pbmRleE9mKGEpO2I+LTEmJih0aGlzLmlkcy5zcGxpY2UoYiwxKSx0aGlzLnBvaW50ZXJzLnNwbGljZShiLDEpKX0sZ2V0OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuaWRzLmluZGV4T2YoYSk7cmV0dXJuIHRoaXMucG9pbnRlcnNbYl19LGdldCBzaXplKCl7cmV0dXJuIHRoaXMucG9pbnRlcnMubGVuZ3RofSxjbGVhcjpmdW5jdGlvbigpe3RoaXMuaWRzLmxlbmd0aD0wLHRoaXMucG9pbnRlcnMubGVuZ3RoPTB9LGZvckVhY2g6ZnVuY3Rpb24oYSxiKXt0aGlzLmlkcy5mb3JFYWNoKGZ1bmN0aW9uKGMsZCl7YS5jYWxsKGIsYyx0aGlzLnBvaW50ZXJzW2RdLHRoaXMpfSx0aGlzKX19LGEuUG9pbnRlck1hcD13aW5kb3cuTWFwJiZNYXAucHJvdG90eXBlLmZvckVhY2g/TWFwOmJ9KHdpbmRvdy5Qb2ludGVyRXZlbnRzUG9seWZpbGwpLGZ1bmN0aW9uKGEpe3ZhciBiO2lmKCJ1bmRlZmluZWQiIT10eXBlb2YgV2Vha01hcCYmbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCJGaXJlZm94LyIpPDApYj1XZWFrTWFwO2Vsc2V7dmFyIGM9T2JqZWN0LmRlZmluZVByb3BlcnR5LGQ9T2JqZWN0Lmhhc093blByb3BlcnR5LGU9KG5ldyBEYXRlKS5nZXRUaW1lKCklMWU5O2I9ZnVuY3Rpb24oKXt0aGlzLm5hbWU9Il9fc3QiKygxZTkqTWF0aC5yYW5kb20oKT4+PjApKyhlKysgKyJfXyIpfSxiLnByb3RvdHlwZT17c2V0OmZ1bmN0aW9uKGEsYil7YyhhLHRoaXMubmFtZSx7dmFsdWU6Yix3cml0YWJsZTohMH0pfSxnZXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGQuY2FsbChhLHRoaXMubmFtZSk/YVt0aGlzLm5hbWVdOnZvaWQgMH0sImRlbGV0ZSI6ZnVuY3Rpb24oYSl7dGhpcy5zZXQoYSx2b2lkIDApfX19YS5TaWRlVGFibGU9Yn0od2luZG93LlBvaW50ZXJFdmVudHNQb2x5ZmlsbCksZnVuY3Rpb24oYSl7dmFyIGI9e3RhcmdldHM6bmV3IGEuU2lkZVRhYmxlLGhhbmRsZWRFdmVudHM6bmV3IGEuU2lkZVRhYmxlLHBvaW50ZXJtYXA6bmV3IGEuUG9pbnRlck1hcCxldmVudE1hcDp7fSxldmVudFNvdXJjZXM6e30sZXZlbnRTb3VyY2VMaXN0OltdLHJlZ2lzdGVyU291cmNlOmZ1bmN0aW9uKGEsYil7dmFyIGM9YixkPWMuZXZlbnRzO2QmJihkLmZvckVhY2goZnVuY3Rpb24oYSl7Y1thXSYmKHRoaXMuZXZlbnRNYXBbYV09Y1thXS5iaW5kKGMpKX0sdGhpcyksdGhpcy5ldmVudFNvdXJjZXNbYV09Yyx0aGlzLmV2ZW50U291cmNlTGlzdC5wdXNoKGMpKX0scmVnaXN0ZXI6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiLGM9dGhpcy5ldmVudFNvdXJjZUxpc3QubGVuZ3RoLGQ9MDtjPmQmJihiPXRoaXMuZXZlbnRTb3VyY2VMaXN0W2RdKTtkKyspYi5yZWdpc3Rlci5jYWxsKGIsYSl9LHVucmVnaXN0ZXI6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiLGM9dGhpcy5ldmVudFNvdXJjZUxpc3QubGVuZ3RoLGQ9MDtjPmQmJihiPXRoaXMuZXZlbnRTb3VyY2VMaXN0W2RdKTtkKyspYi51bnJlZ2lzdGVyLmNhbGwoYixhKX0sZG93bjpmdW5jdGlvbihhKXt0aGlzLmZpcmVFdmVudCgicG9pbnRlcmRvd24iLGEpfSxtb3ZlOmZ1bmN0aW9uKGEpe3RoaXMuZmlyZUV2ZW50KCJwb2ludGVybW92ZSIsYSl9LHVwOmZ1bmN0aW9uKGEpe3RoaXMuZmlyZUV2ZW50KCJwb2ludGVydXAiLGEpfSxlbnRlcjpmdW5jdGlvbihhKXthLmJ1YmJsZXM9ITEsdGhpcy5maXJlRXZlbnQoInBvaW50ZXJlbnRlciIsYSl9LGxlYXZlOmZ1bmN0aW9uKGEpe2EuYnViYmxlcz0hMSx0aGlzLmZpcmVFdmVudCgicG9pbnRlcmxlYXZlIixhKX0sb3ZlcjpmdW5jdGlvbihhKXthLmJ1YmJsZXM9ITAsdGhpcy5maXJlRXZlbnQoInBvaW50ZXJvdmVyIixhKX0sb3V0OmZ1bmN0aW9uKGEpe2EuYnViYmxlcz0hMCx0aGlzLmZpcmVFdmVudCgicG9pbnRlcm91dCIsYSl9LGNhbmNlbDpmdW5jdGlvbihhKXt0aGlzLmZpcmVFdmVudCgicG9pbnRlcmNhbmNlbCIsYSl9LGxlYXZlT3V0OmZ1bmN0aW9uKGEpe2EudGFyZ2V0LmNvbnRhaW5zKGEucmVsYXRlZFRhcmdldCl8fHRoaXMubGVhdmUoYSksdGhpcy5vdXQoYSl9LGVudGVyT3ZlcjpmdW5jdGlvbihhKXthLnRhcmdldC5jb250YWlucyhhLnJlbGF0ZWRUYXJnZXQpfHx0aGlzLmVudGVyKGEpLHRoaXMub3ZlcihhKX0sZXZlbnRIYW5kbGVyOmZ1bmN0aW9uKGEpe2lmKCF0aGlzLmhhbmRsZWRFdmVudHMuZ2V0KGEpKXt2YXIgYj1hLnR5cGUsYz10aGlzLmV2ZW50TWFwJiZ0aGlzLmV2ZW50TWFwW2JdO2MmJmMoYSksdGhpcy5oYW5kbGVkRXZlbnRzLnNldChhLCEwKX19LGxpc3RlbjpmdW5jdGlvbihhLGIpe2IuZm9yRWFjaChmdW5jdGlvbihiKXt0aGlzLmFkZEV2ZW50KGEsYil9LHRoaXMpfSx1bmxpc3RlbjpmdW5jdGlvbihhLGIpe2IuZm9yRWFjaChmdW5jdGlvbihiKXt0aGlzLnJlbW92ZUV2ZW50KGEsYil9LHRoaXMpfSxhZGRFdmVudDpmdW5jdGlvbihhLGIpe2EuYWRkRXZlbnRMaXN0ZW5lcihiLHRoaXMuYm91bmRIYW5kbGVyKX0scmVtb3ZlRXZlbnQ6ZnVuY3Rpb24oYSxiKXthLnJlbW92ZUV2ZW50TGlzdGVuZXIoYix0aGlzLmJvdW5kSGFuZGxlcil9LG1ha2VFdmVudDpmdW5jdGlvbihhLGIpe3ZhciBjPW5ldyBQb2ludGVyRXZlbnQoYSxiKTtyZXR1cm4gdGhpcy50YXJnZXRzLnNldChjLHRoaXMudGFyZ2V0cy5nZXQoYil8fGIudGFyZ2V0KSxjfSxmaXJlRXZlbnQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLm1ha2VFdmVudChhLGIpO3JldHVybiB0aGlzLmRpc3BhdGNoRXZlbnQoYyl9LGNsb25lRXZlbnQ6ZnVuY3Rpb24oYSl7dmFyIGI9e307Zm9yKHZhciBjIGluIGEpYltjXT1hW2NdO3JldHVybiBifSxnZXRUYXJnZXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuY2FwdHVyZUluZm8mJnRoaXMuY2FwdHVyZUluZm8uaWQ9PT1hLnBvaW50ZXJJZD90aGlzLmNhcHR1cmVJbmZvLnRhcmdldDp0aGlzLnRhcmdldHMuZ2V0KGEpfSxzZXRDYXB0dXJlOmZ1bmN0aW9uKGEsYil7dGhpcy5jYXB0dXJlSW5mbyYmdGhpcy5yZWxlYXNlQ2FwdHVyZSh0aGlzLmNhcHR1cmVJbmZvLmlkKSx0aGlzLmNhcHR1cmVJbmZvPXtpZDphLHRhcmdldDpifTt2YXIgYz1uZXcgUG9pbnRlckV2ZW50KCJnb3Rwb2ludGVyY2FwdHVyZSIse2J1YmJsZXM6ITB9KTt0aGlzLmltcGxpY2l0UmVsZWFzZT10aGlzLnJlbGVhc2VDYXB0dXJlLmJpbmQodGhpcyxhKSxkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJwb2ludGVydXAiLHRoaXMuaW1wbGljaXRSZWxlYXNlKSxkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJwb2ludGVyY2FuY2VsIix0aGlzLmltcGxpY2l0UmVsZWFzZSksdGhpcy50YXJnZXRzLnNldChjLGIpLHRoaXMuYXN5bmNEaXNwYXRjaEV2ZW50KGMpfSxyZWxlYXNlQ2FwdHVyZTpmdW5jdGlvbihhKXtpZih0aGlzLmNhcHR1cmVJbmZvJiZ0aGlzLmNhcHR1cmVJbmZvLmlkPT09YSl7dmFyIGI9bmV3IFBvaW50ZXJFdmVudCgibG9zdHBvaW50ZXJjYXB0dXJlIix7YnViYmxlczohMH0pLGM9dGhpcy5jYXB0dXJlSW5mby50YXJnZXQ7dGhpcy5jYXB0dXJlSW5mbz1udWxsLGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoInBvaW50ZXJ1cCIsdGhpcy5pbXBsaWNpdFJlbGVhc2UpLGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoInBvaW50ZXJjYW5jZWwiLHRoaXMuaW1wbGljaXRSZWxlYXNlKSx0aGlzLnRhcmdldHMuc2V0KGIsYyksdGhpcy5hc3luY0Rpc3BhdGNoRXZlbnQoYil9fSxkaXNwYXRjaEV2ZW50OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZ2V0VGFyZ2V0KGEpO3JldHVybiBiP2IuZGlzcGF0Y2hFdmVudChhKTp2b2lkIDB9LGFzeW5jRGlzcGF0Y2hFdmVudDpmdW5jdGlvbihhKXtzZXRUaW1lb3V0KHRoaXMuZGlzcGF0Y2hFdmVudC5iaW5kKHRoaXMsYSksMCl9fTtiLmJvdW5kSGFuZGxlcj1iLmV2ZW50SGFuZGxlci5iaW5kKGIpLGEuZGlzcGF0Y2hlcj1iLGEucmVnaXN0ZXI9Yi5yZWdpc3Rlci5iaW5kKGIpLGEudW5yZWdpc3Rlcj1iLnVucmVnaXN0ZXIuYmluZChiKX0od2luZG93LlBvaW50ZXJFdmVudHNQb2x5ZmlsbCksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhLGIsYyxkKXt0aGlzLmFkZENhbGxiYWNrPWEuYmluZChkKSx0aGlzLnJlbW92ZUNhbGxiYWNrPWIuYmluZChkKSx0aGlzLmNoYW5nZWRDYWxsYmFjaz1jLmJpbmQoZCksZyYmKHRoaXMub2JzZXJ2ZXI9bmV3IGcodGhpcy5tdXRhdGlvbldhdGNoZXIuYmluZCh0aGlzKSkpfXZhciBjPUFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwuYmluZChBcnJheS5wcm90b3R5cGUuZm9yRWFjaCksZD1BcnJheS5wcm90b3R5cGUubWFwLmNhbGwuYmluZChBcnJheS5wcm90b3R5cGUubWFwKSxlPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsLmJpbmQoQXJyYXkucHJvdG90eXBlLnNsaWNlKSxmPUFycmF5LnByb3RvdHlwZS5maWx0ZXIuY2FsbC5iaW5kKEFycmF5LnByb3RvdHlwZS5maWx0ZXIpLGc9d2luZG93Lk11dGF0aW9uT2JzZXJ2ZXJ8fHdpbmRvdy5XZWJLaXRNdXRhdGlvbk9ic2VydmVyLGg9Ilt0b3VjaC1hY3Rpb25dIixpPXtzdWJ0cmVlOiEwLGNoaWxkTGlzdDohMCxhdHRyaWJ1dGVzOiEwLGF0dHJpYnV0ZU9sZFZhbHVlOiEwLGF0dHJpYnV0ZUZpbHRlcjpbInRvdWNoLWFjdGlvbiJdfTtiLnByb3RvdHlwZT17d2F0Y2hTdWJ0cmVlOmZ1bmN0aW9uKGIpe2EudGFyZ2V0RmluZGluZy5jYW5UYXJnZXQoYikmJnRoaXMub2JzZXJ2ZXIub2JzZXJ2ZShiLGkpfSxlbmFibGVPblN1YnRyZWU6ZnVuY3Rpb24oYSl7dGhpcy53YXRjaFN1YnRyZWUoYSksYT09PWRvY3VtZW50JiYiY29tcGxldGUiIT09ZG9jdW1lbnQucmVhZHlTdGF0ZT90aGlzLmluc3RhbGxPbkxvYWQoKTp0aGlzLmluc3RhbGxOZXdTdWJ0cmVlKGEpfSxpbnN0YWxsTmV3U3VidHJlZTpmdW5jdGlvbihhKXtjKHRoaXMuZmluZEVsZW1lbnRzKGEpLHRoaXMuYWRkRWxlbWVudCx0aGlzKX0sZmluZEVsZW1lbnRzOmZ1bmN0aW9uKGEpe3JldHVybiBhLnF1ZXJ5U2VsZWN0b3JBbGw/YS5xdWVyeVNlbGVjdG9yQWxsKGgpOltdfSxyZW1vdmVFbGVtZW50OmZ1bmN0aW9uKGEpe3RoaXMucmVtb3ZlQ2FsbGJhY2soYSl9LGFkZEVsZW1lbnQ6ZnVuY3Rpb24oYSl7dGhpcy5hZGRDYWxsYmFjayhhKX0sZWxlbWVudENoYW5nZWQ6ZnVuY3Rpb24oYSxiKXt0aGlzLmNoYW5nZWRDYWxsYmFjayhhLGIpfSxjb25jYXRMaXN0czpmdW5jdGlvbihhLGIpe3JldHVybiBhLmNvbmNhdChlKGIpKX0saW5zdGFsbE9uTG9hZDpmdW5jdGlvbigpe2RvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoIkRPTUNvbnRlbnRMb2FkZWQiLHRoaXMuaW5zdGFsbE5ld1N1YnRyZWUuYmluZCh0aGlzLGRvY3VtZW50KSl9LGlzRWxlbWVudDpmdW5jdGlvbihhKXtyZXR1cm4gYS5ub2RlVHlwZT09PU5vZGUuRUxFTUVOVF9OT0RFfSxmbGF0dGVuTXV0YXRpb25UcmVlOmZ1bmN0aW9uKGEpe3ZhciBiPWQoYSx0aGlzLmZpbmRFbGVtZW50cyx0aGlzKTtyZXR1cm4gYi5wdXNoKGYoYSx0aGlzLmlzRWxlbWVudCkpLGIucmVkdWNlKHRoaXMuY29uY2F0TGlzdHMsW10pfSxtdXRhdGlvbldhdGNoZXI6ZnVuY3Rpb24oYSl7YS5mb3JFYWNoKHRoaXMubXV0YXRpb25IYW5kbGVyLHRoaXMpfSxtdXRhdGlvbkhhbmRsZXI6ZnVuY3Rpb24oYSl7aWYoImNoaWxkTGlzdCI9PT1hLnR5cGUpe3ZhciBiPXRoaXMuZmxhdHRlbk11dGF0aW9uVHJlZShhLmFkZGVkTm9kZXMpO2IuZm9yRWFjaCh0aGlzLmFkZEVsZW1lbnQsdGhpcyk7dmFyIGM9dGhpcy5mbGF0dGVuTXV0YXRpb25UcmVlKGEucmVtb3ZlZE5vZGVzKTtjLmZvckVhY2godGhpcy5yZW1vdmVFbGVtZW50LHRoaXMpfWVsc2UiYXR0cmlidXRlcyI9PT1hLnR5cGUmJnRoaXMuZWxlbWVudENoYW5nZWQoYS50YXJnZXQsYS5vbGRWYWx1ZSl9fSxnfHwoYi5wcm90b3R5cGUud2F0Y2hTdWJ0cmVlPWZ1bmN0aW9uKCl7Y29uc29sZS53YXJuKCJQb2ludGVyRXZlbnRzUG9seWZpbGw6IE11dGF0aW9uT2JzZXJ2ZXJzIG5vdCBmb3VuZCwgdG91Y2gtYWN0aW9uIHdpbGwgbm90IGJlIGR5bmFtaWNhbGx5IGRldGVjdGVkIil9KSxhLkluc3RhbGxlcj1ifSh3aW5kb3cuUG9pbnRlckV2ZW50c1BvbHlmaWxsKSxmdW5jdGlvbihhKXt2YXIgYj1hLmRpc3BhdGNoZXIsYz1iLnBvaW50ZXJtYXAsZD0yNSxlPXtQT0lOVEVSX0lEOjEsUE9JTlRFUl9UWVBFOiJtb3VzZSIsZXZlbnRzOlsibW91c2Vkb3duIiwibW91c2Vtb3ZlIiwibW91c2V1cCIsIm1vdXNlb3ZlciIsIm1vdXNlb3V0Il0scmVnaXN0ZXI6ZnVuY3Rpb24oYSl7Yi5saXN0ZW4oYSx0aGlzLmV2ZW50cyl9LHVucmVnaXN0ZXI6ZnVuY3Rpb24oYSl7Yi51bmxpc3RlbihhLHRoaXMuZXZlbnRzKX0sbGFzdFRvdWNoZXM6W10saXNFdmVudFNpbXVsYXRlZEZyb21Ub3VjaDpmdW5jdGlvbihhKXtmb3IodmFyIGIsYz10aGlzLmxhc3RUb3VjaGVzLGU9YS5jbGllbnRYLGY9YS5jbGllbnRZLGc9MCxoPWMubGVuZ3RoO2g+ZyYmKGI9Y1tnXSk7ZysrKXt2YXIgaT1NYXRoLmFicyhlLWIueCksaj1NYXRoLmFicyhmLWIueSk7aWYoZD49aSYmZD49ailyZXR1cm4hMH19LHByZXBhcmVFdmVudDpmdW5jdGlvbihhKXt2YXIgYz1iLmNsb25lRXZlbnQoYSk7cmV0dXJuIGMucG9pbnRlcklkPXRoaXMuUE9JTlRFUl9JRCxjLmlzUHJpbWFyeT0hMCxjLnBvaW50ZXJUeXBlPXRoaXMuUE9JTlRFUl9UWVBFLGN9LG1vdXNlZG93bjpmdW5jdGlvbihhKXtpZighdGhpcy5pc0V2ZW50U2ltdWxhdGVkRnJvbVRvdWNoKGEpKXt2YXIgZD1jLmhhcyh0aGlzLlBPSU5URVJfSUQpO2QmJnRoaXMuY2FuY2VsKGEpO3ZhciBlPXRoaXMucHJlcGFyZUV2ZW50KGEpO2Muc2V0KHRoaXMuUE9JTlRFUl9JRCxhKSxiLmRvd24oZSl9fSxtb3VzZW1vdmU6ZnVuY3Rpb24oYSl7aWYoIXRoaXMuaXNFdmVudFNpbXVsYXRlZEZyb21Ub3VjaChhKSl7dmFyIGM9dGhpcy5wcmVwYXJlRXZlbnQoYSk7Yi5tb3ZlKGMpfX0sbW91c2V1cDpmdW5jdGlvbihhKXtpZighdGhpcy5pc0V2ZW50U2ltdWxhdGVkRnJvbVRvdWNoKGEpKXt2YXIgZD1jLmdldCh0aGlzLlBPSU5URVJfSUQpO2lmKGQmJmQuYnV0dG9uPT09YS5idXR0b24pe3ZhciBlPXRoaXMucHJlcGFyZUV2ZW50KGEpO2IudXAoZSksdGhpcy5jbGVhbnVwTW91c2UoKX19fSxtb3VzZW92ZXI6ZnVuY3Rpb24oYSl7aWYoIXRoaXMuaXNFdmVudFNpbXVsYXRlZEZyb21Ub3VjaChhKSl7dmFyIGM9dGhpcy5wcmVwYXJlRXZlbnQoYSk7Yi5lbnRlck92ZXIoYyl9fSxtb3VzZW91dDpmdW5jdGlvbihhKXtpZighdGhpcy5pc0V2ZW50U2ltdWxhdGVkRnJvbVRvdWNoKGEpKXt2YXIgYz10aGlzLnByZXBhcmVFdmVudChhKTtiLmxlYXZlT3V0KGMpfX0sY2FuY2VsOmZ1bmN0aW9uKGEpe3ZhciBjPXRoaXMucHJlcGFyZUV2ZW50KGEpO2IuY2FuY2VsKGMpLHRoaXMuY2xlYW51cE1vdXNlKCl9LGNsZWFudXBNb3VzZTpmdW5jdGlvbigpe2MuZGVsZXRlKHRoaXMuUE9JTlRFUl9JRCl9fTthLm1vdXNlRXZlbnRzPWV9KHdpbmRvdy5Qb2ludGVyRXZlbnRzUG9seWZpbGwpLGZ1bmN0aW9uKGEpe3ZhciBiLGM9YS5kaXNwYXRjaGVyLGQ9YS5maW5kVGFyZ2V0LGU9YS50YXJnZXRGaW5kaW5nLmFsbFNoYWRvd3MuYmluZChhLnRhcmdldEZpbmRpbmcpLGY9Yy5wb2ludGVybWFwLGc9QXJyYXkucHJvdG90eXBlLm1hcC5jYWxsLmJpbmQoQXJyYXkucHJvdG90eXBlLm1hcCksaD0yNTAwLGk9InRvdWNoLWFjdGlvbiIsaj0ic3RyaW5nIj09dHlwZW9mIGRvY3VtZW50LmhlYWQuc3R5bGUudG91Y2hBY3Rpb24saz17c2Nyb2xsVHlwZTpuZXcgYS5TaWRlVGFibGUsZXZlbnRzOlsidG91Y2hzdGFydCIsInRvdWNobW92ZSIsInRvdWNoZW5kIiwidG91Y2hjYW5jZWwiXSxyZWdpc3RlcjpmdW5jdGlvbihhKXtqP2MubGlzdGVuKGEsdGhpcy5ldmVudHMpOmIuZW5hYmxlT25TdWJ0cmVlKGEpfSx1bnJlZ2lzdGVyOmZ1bmN0aW9uKGEpe2omJmMudW5saXN0ZW4oYSx0aGlzLmV2ZW50cyl9LGVsZW1lbnRBZGRlZDpmdW5jdGlvbihhKXt2YXIgYj1hLmdldEF0dHJpYnV0ZShpKSxkPXRoaXMudG91Y2hBY3Rpb25Ub1Njcm9sbFR5cGUoYik7ZCYmKHRoaXMuc2Nyb2xsVHlwZS5zZXQoYSxkKSxjLmxpc3RlbihhLHRoaXMuZXZlbnRzKSxlKGEpLmZvckVhY2goZnVuY3Rpb24oYSl7dGhpcy5zY3JvbGxUeXBlLnNldChhLGQpLGMubGlzdGVuKGEsdGhpcy5ldmVudHMpfSx0aGlzKSl9LGVsZW1lbnRSZW1vdmVkOmZ1bmN0aW9uKGEpe3RoaXMuc2Nyb2xsVHlwZS5kZWxldGUoYSksYy51bmxpc3RlbihhLHRoaXMuZXZlbnRzKSxlKGEpLmZvckVhY2goZnVuY3Rpb24oYSl7dGhpcy5zY3JvbGxUeXBlLmRlbGV0ZShhKSxjLnVubGlzdGVuKGEsdGhpcy5ldmVudHMpfSx0aGlzKX0sZWxlbWVudENoYW5nZWQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLmdldEF0dHJpYnV0ZShpKSxkPXRoaXMudG91Y2hBY3Rpb250b1Njcm9sbFR5cGUoYyksZj10aGlzLnRvdWNoQWN0aW9uVG9TY3JvbGxUeXBlKGIpO2QmJmY/KHRoaXMuc2Nyb2xsVHlwZS5zZXQoYSxkKSxlKGEpLmZvckVhY2goZnVuY3Rpb24oYSl7dGhpcy5zY3JvbGxUeXBlLnNldChhLGQpfSx0aGlzKSk6Zj90aGlzLmVsZW1lbnRSZW1vdmVkKGEpOmQmJnRoaXMuZWxlbWVudEFkZGVkKGEpfSxzY3JvbGxUeXBlczp7RU1JVFRFUjoibm9uZSIsWFNDUk9MTEVSOiJwYW4teCIsWVNDUk9MTEVSOiJwYW4teSIsU0NST0xMRVI6L14oPzpwYW4teCBwYW4teSl8KD86cGFuLXkgcGFuLXgpfGF1dG8kL30sdG91Y2hBY3Rpb25Ub1Njcm9sbFR5cGU6ZnVuY3Rpb24oYSl7dmFyIGI9YSxjPXRoaXMuc2Nyb2xsVHlwZXM7cmV0dXJuIm5vbmUiPT09Yj8ibm9uZSI6Yj09PWMuWFNDUk9MTEVSPyJYIjpiPT09Yy5ZU0NST0xMRVI/IlkiOmMuU0NST0xMRVIuZXhlYyhiKT8iWFkiOnZvaWQgMH0sUE9JTlRFUl9UWVBFOiJ0b3VjaCIsZmlyc3RUb3VjaDpudWxsLGlzUHJpbWFyeVRvdWNoOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmZpcnN0VG91Y2g9PT1hLmlkZW50aWZpZXJ9LHNldFByaW1hcnlUb3VjaDpmdW5jdGlvbihhKXtudWxsPT09dGhpcy5maXJzdFRvdWNoJiYodGhpcy5maXJzdFRvdWNoPWEuaWRlbnRpZmllcix0aGlzLmZpcnN0WFk9e1g6YS5jbGllbnRYLFk6YS5jbGllbnRZfSx0aGlzLnNjcm9sbGluZz0hMSl9LHJlbW92ZVByaW1hcnlUb3VjaDpmdW5jdGlvbihhKXt0aGlzLmlzUHJpbWFyeVRvdWNoKGEpJiYodGhpcy5maXJzdFRvdWNoPW51bGwsdGhpcy5maXJzdFhZPW51bGwpfSx0b3VjaFRvUG9pbnRlcjpmdW5jdGlvbihhKXt2YXIgYj1jLmNsb25lRXZlbnQoYSk7cmV0dXJuIGIucG9pbnRlcklkPWEuaWRlbnRpZmllcisyLGIudGFyZ2V0PWQoYiksYi5idWJibGVzPSEwLGIuY2FuY2VsYWJsZT0hMCxiLmJ1dHRvbj0wLGIuYnV0dG9ucz0xLGIud2lkdGg9YS53ZWJraXRSYWRpdXNYfHxhLnJhZGl1c1h8fDAsYi5oZWlnaHQ9YS53ZWJraXRSYWRpdXNZfHxhLnJhZGl1c1l8fDAsYi5wcmVzc3VyZT1hLndlYmtpdEZvcmNlfHxhLmZvcmNlfHwuNSxiLmlzUHJpbWFyeT10aGlzLmlzUHJpbWFyeVRvdWNoKGEpLGIucG9pbnRlclR5cGU9dGhpcy5QT0lOVEVSX1RZUEUsYn0scHJvY2Vzc1RvdWNoZXM6ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLmNoYW5nZWRUb3VjaGVzLGQ9ZyhjLHRoaXMudG91Y2hUb1BvaW50ZXIsdGhpcyk7ZC5mb3JFYWNoKGIsdGhpcyl9LHNob3VsZFNjcm9sbDpmdW5jdGlvbihhKXtpZih0aGlzLmZpcnN0WFkpe3ZhciBiLGM9dGhpcy5zY3JvbGxUeXBlLmdldChhLmN1cnJlbnRUYXJnZXQpO2lmKCJub25lIj09PWMpYj0hMTtlbHNlIGlmKCJYWSI9PT1jKWI9ITA7ZWxzZXt2YXIgZD1hLmNoYW5nZWRUb3VjaGVzWzBdLGU9YyxmPSJZIj09PWM/IlgiOiJZIixnPU1hdGguYWJzKGRbImNsaWVudCIrZV0tdGhpcy5maXJzdFhZW2VdKSxoPU1hdGguYWJzKGRbImNsaWVudCIrZl0tdGhpcy5maXJzdFhZW2ZdKTtiPWc+PWh9cmV0dXJuIHRoaXMuZmlyc3RYWT1udWxsLGJ9fSxmaW5kVG91Y2g6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGMsZD0wLGU9YS5sZW5ndGg7ZT5kJiYoYz1hW2RdKTtkKyspaWYoYy5pZGVudGlmaWVyPT09YilyZXR1cm4hMH0sdmFjdXVtVG91Y2hlczpmdW5jdGlvbihhKXt2YXIgYj1hLnRvdWNoZXM7aWYoZi5zaXplPj1iLmxlbmd0aCl7dmFyIGM9W107Zi5mb3JFYWNoKGZ1bmN0aW9uKGEsZCl7aWYoMSE9PWEmJiF0aGlzLmZpbmRUb3VjaChiLGEtMikpe3ZhciBlPWQub3V0O2MucHVzaCh0aGlzLnRvdWNoVG9Qb2ludGVyKGUpKX19LHRoaXMpLGMuZm9yRWFjaCh0aGlzLmNhbmNlbE91dCx0aGlzKX19LHRvdWNoc3RhcnQ6ZnVuY3Rpb24oYSl7dGhpcy52YWN1dW1Ub3VjaGVzKGEpLHRoaXMuc2V0UHJpbWFyeVRvdWNoKGEuY2hhbmdlZFRvdWNoZXNbMF0pLHRoaXMuZGVkdXBTeW50aE1vdXNlKGEpLHRoaXMuc2Nyb2xsaW5nfHx0aGlzLnByb2Nlc3NUb3VjaGVzKGEsdGhpcy5vdmVyRG93bil9LG92ZXJEb3duOmZ1bmN0aW9uKGEpe2Yuc2V0KGEucG9pbnRlcklkLHt0YXJnZXQ6YS50YXJnZXQsb3V0OmEsb3V0VGFyZ2V0OmEudGFyZ2V0fSksYy5vdmVyKGEpLGMuZG93bihhKX0sdG91Y2htb3ZlOmZ1bmN0aW9uKGEpe3RoaXMuc2Nyb2xsaW5nfHwodGhpcy5zaG91bGRTY3JvbGwoYSk/KHRoaXMuc2Nyb2xsaW5nPSEwLHRoaXMudG91Y2hjYW5jZWwoYSkpOihhLnByZXZlbnREZWZhdWx0KCksdGhpcy5wcm9jZXNzVG91Y2hlcyhhLHRoaXMubW92ZU92ZXJPdXQpKSl9LG1vdmVPdmVyT3V0OmZ1bmN0aW9uKGEpe3ZhciBiPWEsZD1mLmdldChiLnBvaW50ZXJJZCk7aWYoZCl7dmFyIGU9ZC5vdXQsZz1kLm91dFRhcmdldDtjLm1vdmUoYiksZSYmZyE9PWIudGFyZ2V0JiYoZS5yZWxhdGVkVGFyZ2V0PWIudGFyZ2V0LGIucmVsYXRlZFRhcmdldD1nLGUudGFyZ2V0PWcsYi50YXJnZXQ/KGMubGVhdmVPdXQoZSksYy5lbnRlck92ZXIoYikpOihiLnRhcmdldD1nLGIucmVsYXRlZFRhcmdldD1udWxsLHRoaXMuY2FuY2VsT3V0KGIpKSksZC5vdXQ9YixkLm91dFRhcmdldD1iLnRhcmdldH19LHRvdWNoZW5kOmZ1bmN0aW9uKGEpe3RoaXMuZGVkdXBTeW50aE1vdXNlKGEpLHRoaXMucHJvY2Vzc1RvdWNoZXMoYSx0aGlzLnVwT3V0KX0sdXBPdXQ6ZnVuY3Rpb24oYSl7dGhpcy5zY3JvbGxpbmd8fChjLnVwKGEpLGMub3V0KGEpKSx0aGlzLmNsZWFuVXBQb2ludGVyKGEpfSx0b3VjaGNhbmNlbDpmdW5jdGlvbihhKXt0aGlzLnByb2Nlc3NUb3VjaGVzKGEsdGhpcy5jYW5jZWxPdXQpfSxjYW5jZWxPdXQ6ZnVuY3Rpb24oYSl7Yy5jYW5jZWwoYSksYy5vdXQoYSksdGhpcy5jbGVhblVwUG9pbnRlcihhKX0sY2xlYW5VcFBvaW50ZXI6ZnVuY3Rpb24oYSl7Zi5kZWxldGUoYS5wb2ludGVySWQpLHRoaXMucmVtb3ZlUHJpbWFyeVRvdWNoKGEpfSxkZWR1cFN5bnRoTW91c2U6ZnVuY3Rpb24oYil7dmFyIGM9YS5tb3VzZUV2ZW50cy5sYXN0VG91Y2hlcyxkPWIuY2hhbmdlZFRvdWNoZXNbMF07aWYodGhpcy5pc1ByaW1hcnlUb3VjaChkKSl7dmFyIGU9e3g6ZC5jbGllbnRYLHk6ZC5jbGllbnRZfTtjLnB1c2goZSk7dmFyIGY9ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLmluZGV4T2YoYik7Yz4tMSYmYS5zcGxpY2UoYywxKX0uYmluZChudWxsLGMsZSk7c2V0VGltZW91dChmLGgpfX19O2p8fChiPW5ldyBhLkluc3RhbGxlcihrLmVsZW1lbnRBZGRlZCxrLmVsZW1lbnRSZW1vdmVkLGsuZWxlbWVudENoYW5nZWQsaykpLGEudG91Y2hFdmVudHM9a30od2luZG93LlBvaW50ZXJFdmVudHNQb2x5ZmlsbCksZnVuY3Rpb24oYSl7dmFyIGI9YS5kaXNwYXRjaGVyLGM9Yi5wb2ludGVybWFwLGQ9d2luZG93Lk1TUG9pbnRlckV2ZW50JiYibnVtYmVyIj09dHlwZW9mIHdpbmRvdy5NU1BvaW50ZXJFdmVudC5NU1BPSU5URVJfVFlQRV9NT1VTRSxlPXtldmVudHM6WyJNU1BvaW50ZXJEb3duIiwiTVNQb2ludGVyTW92ZSIsIk1TUG9pbnRlclVwIiwiTVNQb2ludGVyT3V0IiwiTVNQb2ludGVyT3ZlciIsIk1TUG9pbnRlckNhbmNlbCIsIk1TR290UG9pbnRlckNhcHR1cmUiLCJNU0xvc3RQb2ludGVyQ2FwdHVyZSJdLHJlZ2lzdGVyOmZ1bmN0aW9uKGEpe2IubGlzdGVuKGEsdGhpcy5ldmVudHMpfSx1bnJlZ2lzdGVyOmZ1bmN0aW9uKGEpe2IudW5saXN0ZW4oYSx0aGlzLmV2ZW50cyl9LFBPSU5URVJfVFlQRVM6WyIiLCJ1bmF2YWlsYWJsZSIsInRvdWNoIiwicGVuIiwibW91c2UiXSxwcmVwYXJlRXZlbnQ6ZnVuY3Rpb24oYSl7dmFyIGM9YTtyZXR1cm4gZCYmKGM9Yi5jbG9uZUV2ZW50KGEpLGMucG9pbnRlclR5cGU9dGhpcy5QT0lOVEVSX1RZUEVTW2EucG9pbnRlclR5cGVdKSxjfSxjbGVhbnVwOmZ1bmN0aW9uKGEpe2MuZGVsZXRlKGEpfSxNU1BvaW50ZXJEb3duOmZ1bmN0aW9uKGEpe2Muc2V0KGEucG9pbnRlcklkLGEpO3ZhciBkPXRoaXMucHJlcGFyZUV2ZW50KGEpO2IuZG93bihkKX0sTVNQb2ludGVyTW92ZTpmdW5jdGlvbihhKXt2YXIgYz10aGlzLnByZXBhcmVFdmVudChhKTtiLm1vdmUoYyl9LE1TUG9pbnRlclVwOmZ1bmN0aW9uKGEpe3ZhciBjPXRoaXMucHJlcGFyZUV2ZW50KGEpO2IudXAoYyksdGhpcy5jbGVhbnVwKGEucG9pbnRlcklkKX0sTVNQb2ludGVyT3V0OmZ1bmN0aW9uKGEpe3ZhciBjPXRoaXMucHJlcGFyZUV2ZW50KGEpO2IubGVhdmVPdXQoYyl9LE1TUG9pbnRlck92ZXI6ZnVuY3Rpb24oYSl7dmFyIGM9dGhpcy5wcmVwYXJlRXZlbnQoYSk7Yi5lbnRlck92ZXIoYyl9LE1TUG9pbnRlckNhbmNlbDpmdW5jdGlvbihhKXt2YXIgYz10aGlzLnByZXBhcmVFdmVudChhKTtiLmNhbmNlbChjKSx0aGlzLmNsZWFudXAoYS5wb2ludGVySWQpfSxNU0xvc3RQb2ludGVyQ2FwdHVyZTpmdW5jdGlvbihhKXt2YXIgYz1iLm1ha2VFdmVudCgibG9zdHBvaW50ZXJjYXB0dXJlIixhKTtiLmRpc3BhdGNoRXZlbnQoYyl9LE1TR290UG9pbnRlckNhcHR1cmU6ZnVuY3Rpb24oYSl7dmFyIGM9Yi5tYWtlRXZlbnQoImdvdHBvaW50ZXJjYXB0dXJlIixhKTtiLmRpc3BhdGNoRXZlbnQoYyl9fTthLm1zRXZlbnRzPWV9KHdpbmRvdy5Qb2ludGVyRXZlbnRzUG9seWZpbGwpLGZ1bmN0aW9uKGEpe3ZhciBiPWEuZGlzcGF0Y2hlcjtpZih2b2lkIDA9PT13aW5kb3cubmF2aWdhdG9yLnBvaW50ZXJFbmFibGVkKXtpZihPYmplY3QuZGVmaW5lUHJvcGVydHkod2luZG93Lm5hdmlnYXRvciwicG9pbnRlckVuYWJsZWQiLHt2YWx1ZTohMCxlbnVtZXJhYmxlOiEwfSksd2luZG93Lm5hdmlnYXRvci5tc1BvaW50ZXJFbmFibGVkKXt2YXIgYz13aW5kb3cubmF2aWdhdG9yLm1zTWF4VG91Y2hQb2ludHM7T2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbmRvdy5uYXZpZ2F0b3IsIm1heFRvdWNoUG9pbnRzIix7dmFsdWU6YyxlbnVtZXJhYmxlOiEwfSksYi5yZWdpc3RlclNvdXJjZSgibXMiLGEubXNFdmVudHMpfWVsc2UgYi5yZWdpc3RlclNvdXJjZSgibW91c2UiLGEubW91c2VFdmVudHMpLHZvaWQgMCE9PXdpbmRvdy5vbnRvdWNoc3RhcnQmJmIucmVnaXN0ZXJTb3VyY2UoInRvdWNoIixhLnRvdWNoRXZlbnRzKTtiLnJlZ2lzdGVyKGRvY3VtZW50KX19KHdpbmRvdy5Qb2ludGVyRXZlbnRzUG9seWZpbGwpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7aWYoIWUucG9pbnRlcm1hcC5oYXMoYSkpdGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkUG9pbnRlcklkIil9dmFyIGMsZCxlPWEuZGlzcGF0Y2hlcixmPXdpbmRvdy5uYXZpZ2F0b3I7Zi5tc1BvaW50ZXJFbmFibGVkPyhjPWZ1bmN0aW9uKGEpe2IoYSksdGhpcy5tc1NldFBvaW50ZXJDYXB0dXJlKGEpfSxkPWZ1bmN0aW9uKGEpe2IoYSksdGhpcy5tc1JlbGVhc2VQb2ludGVyQ2FwdHVyZShhKX0pOihjPWZ1bmN0aW9uKGEpe2IoYSksZS5zZXRDYXB0dXJlKGEsdGhpcyl9LGQ9ZnVuY3Rpb24oYSl7YihhKSxlLnJlbGVhc2VDYXB0dXJlKGEsdGhpcyl9KSxFbGVtZW50LnByb3RvdHlwZS5zZXRQb2ludGVyQ2FwdHVyZXx8T2JqZWN0LmRlZmluZVByb3BlcnRpZXMoRWxlbWVudC5wcm90b3R5cGUse3NldFBvaW50ZXJDYXB0dXJlOnt2YWx1ZTpjfSxyZWxlYXNlUG9pbnRlckNhcHR1cmU6e3ZhbHVlOmR9fSl9KHdpbmRvdy5Qb2ludGVyRXZlbnRzUG9seWZpbGwpLFBvaW50ZXJHZXN0dXJlRXZlbnQucHJvdG90eXBlLnByZXZlbnRUYXA9ZnVuY3Rpb24oKXt0aGlzLnRhcFByZXZlbnRlZD0hMH0sZnVuY3Rpb24oYSl7YT1hfHx7fSxhLnV0aWxzPXtMQ0E6e2ZpbmQ6ZnVuY3Rpb24oYSxiKXtpZihhPT09YilyZXR1cm4gYTtpZihhLmNvbnRhaW5zKXtpZihhLmNvbnRhaW5zKGIpKXJldHVybiBhO2lmKGIuY29udGFpbnMoYSkpcmV0dXJuIGJ9dmFyIGM9dGhpcy5kZXB0aChhKSxkPXRoaXMuZGVwdGgoYiksZT1jLWQ7Zm9yKGU+MD9hPXRoaXMud2FsayhhLGUpOmI9dGhpcy53YWxrKGIsLWUpO2EmJmImJmEhPT1iOylhPXRoaXMud2FsayhhLDEpLGI9dGhpcy53YWxrKGIsMSk7cmV0dXJuIGF9LHdhbGs6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9MDtiPmM7YysrKWE9YS5wYXJlbnROb2RlO3JldHVybiBhfSxkZXB0aDpmdW5jdGlvbihhKXtmb3IodmFyIGI9MDthOyliKyssYT1hLnBhcmVudE5vZGU7cmV0dXJuIGJ9fX0sYS5maW5kTENBPWZ1bmN0aW9uKGIsYyl7cmV0dXJuIGEudXRpbHMuTENBLmZpbmQoYixjKX0sd2luZG93LlBvaW50ZXJHZXN0dXJlcz1hfSh3aW5kb3cuUG9pbnRlckdlc3R1cmVzKSxmdW5jdGlvbihhKXt2YXIgYjtpZigidW5kZWZpbmVkIiE9dHlwZW9mIFdlYWtNYXAmJm5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZigiRmlyZWZveC8iKTwwKWI9V2Vha01hcDtlbHNle3ZhciBjPU9iamVjdC5kZWZpbmVQcm9wZXJ0eSxkPU9iamVjdC5oYXNPd25Qcm9wZXJ0eSxlPShuZXcgRGF0ZSkuZ2V0VGltZSgpJTFlOTtiPWZ1bmN0aW9uKCl7dGhpcy5uYW1lPSJfX3N0IisoMWU5Kk1hdGgucmFuZG9tKCk+Pj4wKSsoZSsrICsiX18iKX0sYi5wcm90b3R5cGU9e3NldDpmdW5jdGlvbihhLGIpe2MoYSx0aGlzLm5hbWUse3ZhbHVlOmIsd3JpdGFibGU6ITB9KX0sZ2V0OmZ1bmN0aW9uKGEpe3JldHVybiBkLmNhbGwoYSx0aGlzLm5hbWUpP2FbdGhpcy5uYW1lXTp2b2lkIDB9LCJkZWxldGUiOmZ1bmN0aW9uKGEpe3RoaXMuc2V0KGEsdm9pZCAwKX19fWEuU2lkZVRhYmxlPWJ9KHdpbmRvdy5Qb2ludGVyR2VzdHVyZXMpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoKXt0aGlzLmlkcz1bXSx0aGlzLnBvaW50ZXJzPVtdfWIucHJvdG90eXBlPXtzZXQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmlkcy5pbmRleE9mKGEpO2M+LTE/dGhpcy5wb2ludGVyc1tjXT1iOih0aGlzLmlkcy5wdXNoKGEpLHRoaXMucG9pbnRlcnMucHVzaChiKSl9LGhhczpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5pZHMuaW5kZXhPZihhKT4tMX0sImRlbGV0ZSI6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5pZHMuaW5kZXhPZihhKTtiPi0xJiYodGhpcy5pZHMuc3BsaWNlKGIsMSksdGhpcy5wb2ludGVycy5zcGxpY2UoYiwxKSl9LGdldDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmlkcy5pbmRleE9mKGEpO3JldHVybiB0aGlzLnBvaW50ZXJzW2JdfSxnZXQgc2l6ZSgpe3JldHVybiB0aGlzLnBvaW50ZXJzLmxlbmd0aH0sY2xlYXI6ZnVuY3Rpb24oKXt0aGlzLmlkcy5sZW5ndGg9MCx0aGlzLnBvaW50ZXJzLmxlbmd0aD0wfX0sd2luZG93Lk1hcCYmKGI9d2luZG93Lk1hcCksYS5Qb2ludGVyTWFwPWJ9KHdpbmRvdy5Qb2ludGVyR2VzdHVyZXMpLGZ1bmN0aW9uKGEpe3ZhciBiPXtoYW5kbGVkRXZlbnRzOm5ldyBhLlNpZGVUYWJsZSx0YXJnZXRzOm5ldyBhLlNpZGVUYWJsZSxoYW5kbGVyczp7fSxyZWNvZ25pemVyczp7fSxldmVudHM6WyJwb2ludGVyZG93biIsInBvaW50ZXJtb3ZlIiwicG9pbnRlcnVwIiwicG9pbnRlcm92ZXIiLCJwb2ludGVyb3V0IiwicG9pbnRlcmNhbmNlbCJdLHJlZ2lzdGVyUmVjb2duaXplcjpmdW5jdGlvbihhLGIpe3ZhciBjPWI7dGhpcy5yZWNvZ25pemVyc1thXT1jLHRoaXMuZXZlbnRzLmZvckVhY2goZnVuY3Rpb24oYSl7aWYoY1thXSl7dmFyIGI9Y1thXS5iaW5kKGMpO3RoaXMuYWRkSGFuZGxlcihhLGIpfX0sdGhpcyl9LGFkZEhhbmRsZXI6ZnVuY3Rpb24oYSxiKXt2YXIgYz1hO3RoaXMuaGFuZGxlcnNbY118fCh0aGlzLmhhbmRsZXJzW2NdPVtdKSx0aGlzLmhhbmRsZXJzW2NdLnB1c2goYil9LHJlZ2lzdGVyVGFyZ2V0OmZ1bmN0aW9uKGEpe3RoaXMubGlzdGVuKHRoaXMuZXZlbnRzLGEpfSx1bnJlZ2lzdGVyVGFyZ2V0OmZ1bmN0aW9uKGEpe3RoaXMudW5saXN0ZW4odGhpcy5ldmVudHMsYSl9LGV2ZW50SGFuZGxlcjpmdW5jdGlvbihhKXtpZighdGhpcy5oYW5kbGVkRXZlbnRzLmdldChhKSl7dmFyIGIsYz1hLnR5cGU7KGI9dGhpcy5oYW5kbGVyc1tjXSkmJnRoaXMubWFrZVF1ZXVlKGIsYSksdGhpcy5oYW5kbGVkRXZlbnRzLnNldChhLCEwKX19LG1ha2VRdWV1ZTpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuY2xvbmVFdmVudChiKTtzZXRUaW1lb3V0KHRoaXMucnVuUXVldWUuYmluZCh0aGlzLGEsYyksMCl9LHJ1blF1ZXVlOmZ1bmN0aW9uKGEsYil7dGhpcy5jdXJyZW50UG9pbnRlcklkPWIucG9pbnRlcklkO2Zvcih2YXIgYyxkPTAsZT1hLmxlbmd0aDtlPmQmJihjPWFbZF0pO2QrKyljKGIpO3RoaXMuY3VycmVudFBvaW50ZXJJZD0wfSxsaXN0ZW46ZnVuY3Rpb24oYSxiKXthLmZvckVhY2goZnVuY3Rpb24oYSl7dGhpcy5hZGRFdmVudChhLHRoaXMuYm91bmRIYW5kbGVyLCExLGIpfSx0aGlzKX0sdW5saXN0ZW46ZnVuY3Rpb24oYSl7YS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3RoaXMucmVtb3ZlRXZlbnQoYSx0aGlzLmJvdW5kSGFuZGxlciwhMSxpblRhcmdldCl9LHRoaXMpfSxhZGRFdmVudDpmdW5jdGlvbihhLGIsYyxkKXtkLmFkZEV2ZW50TGlzdGVuZXIoYSxiLGMpfSxyZW1vdmVFdmVudDpmdW5jdGlvbihhLGIsYyxkKXtkLnJlbW92ZUV2ZW50TGlzdGVuZXIoYSxiLGMpfSxtYWtlRXZlbnQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbmV3IFBvaW50ZXJHZXN0dXJlRXZlbnQoYSxiKX0sY2xvbmVFdmVudDpmdW5jdGlvbihhKXt2YXIgYj17fTtmb3IodmFyIGMgaW4gYSliW2NdPWFbY107cmV0dXJuIGJ9LGRpc3BhdGNoRXZlbnQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz1ifHx0aGlzLnRhcmdldHMuZ2V0KGEpO2MmJihjLmRpc3BhdGNoRXZlbnQoYSksYS50YXBQcmV2ZW50ZWQmJnRoaXMucHJldmVudFRhcCh0aGlzLmN1cnJlbnRQb2ludGVySWQpKX0sYXN5bmNEaXNwYXRjaEV2ZW50OmZ1bmN0aW9uKGEsYil7dmFyIGM9ZnVuY3Rpb24oKXt0aGlzLmRpc3BhdGNoRXZlbnQoYSxiKX0uYmluZCh0aGlzKTtzZXRUaW1lb3V0KGMsMCl9LHByZXZlbnRUYXA6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5yZWNvZ25pemVycy50YXA7YiYmYi5wcmV2ZW50VGFwKGEpfX07Yi5ib3VuZEhhbmRsZXI9Yi5ldmVudEhhbmRsZXIuYmluZChiKSxhLmRpc3BhdGNoZXI9YixhLnJlZ2lzdGVyPWZ1bmN0aW9uKGIpe3ZhciBjPXdpbmRvdy5Qb2ludGVyRXZlbnRzUG9seWZpbGw7YyYmYy5yZWdpc3RlcihiKSxhLmRpc3BhdGNoZXIucmVnaXN0ZXJUYXJnZXQoYil9LGIucmVnaXN0ZXJUYXJnZXQoZG9jdW1lbnQpfSh3aW5kb3cuUG9pbnRlckdlc3R1cmVzKSxmdW5jdGlvbihhKXt2YXIgYj1hLmRpc3BhdGNoZXIsYz17SE9MRF9ERUxBWToyMDAsV0lHR0xFX1RIUkVTSE9MRDoxNixldmVudHM6WyJwb2ludGVyZG93biIsInBvaW50ZXJtb3ZlIiwicG9pbnRlcnVwIiwicG9pbnRlcmNhbmNlbCJdLGhlbGRQb2ludGVyOm51bGwsaG9sZEpvYjpudWxsLHB1bHNlOmZ1bmN0aW9uKCl7dmFyIGE9RGF0ZS5ub3coKS10aGlzLmhlbGRQb2ludGVyLnRpbWVTdGFtcCxiPXRoaXMuaGVsZD8iaG9sZHB1bHNlIjoiaG9sZCI7dGhpcy5maXJlSG9sZChiLGEpLHRoaXMuaGVsZD0hMH0sY2FuY2VsOmZ1bmN0aW9uKCl7Y2xlYXJJbnRlcnZhbCh0aGlzLmhvbGRKb2IpLHRoaXMuaGVsZCYmdGhpcy5maXJlSG9sZCgicmVsZWFzZSIpLHRoaXMuaGVsZD0hMSx0aGlzLmhlbGRQb2ludGVyPW51bGwsdGhpcy50YXJnZXQ9bnVsbCx0aGlzLmhvbGRKb2I9bnVsbH0scG9pbnRlcmRvd246ZnVuY3Rpb24oYSl7YS5pc1ByaW1hcnkmJiF0aGlzLmhlbGRQb2ludGVyJiYodGhpcy5oZWxkUG9pbnRlcj1hLHRoaXMudGFyZ2V0PWEudGFyZ2V0LHRoaXMuaG9sZEpvYj1zZXRJbnRlcnZhbCh0aGlzLnB1bHNlLmJpbmQodGhpcyksdGhpcy5IT0xEX0RFTEFZKSl9LHBvaW50ZXJ1cDpmdW5jdGlvbihhKXt0aGlzLmhlbGRQb2ludGVyJiZ0aGlzLmhlbGRQb2ludGVyLnBvaW50ZXJJZD09PWEucG9pbnRlcklkJiZ0aGlzLmNhbmNlbCgpfSxwb2ludGVyY2FuY2VsOmZ1bmN0aW9uKCl7dGhpcy5jYW5jZWwoKX0scG9pbnRlcm1vdmU6ZnVuY3Rpb24oYSl7aWYodGhpcy5oZWxkUG9pbnRlciYmdGhpcy5oZWxkUG9pbnRlci5wb2ludGVySWQ9PT1hLnBvaW50ZXJJZCl7dmFyIGI9YS5jbGllbnRYLXRoaXMuaGVsZFBvaW50ZXIuY2xpZW50WCxjPWEuY2xpZW50WS10aGlzLmhlbGRQb2ludGVyLmNsaWVudFk7YipiK2MqYz50aGlzLldJR0dMRV9USFJFU0hPTEQmJnRoaXMuY2FuY2VsKCl9fSxmaXJlSG9sZDpmdW5jdGlvbihhLGMpe3ZhciBkPXtwb2ludGVyVHlwZTp0aGlzLmhlbGRQb2ludGVyLnBvaW50ZXJUeXBlfTtjJiYoZC5ob2xkVGltZT1jKTt2YXIgZT1iLm1ha2VFdmVudChhLGQpO2IuZGlzcGF0Y2hFdmVudChlLHRoaXMudGFyZ2V0KSxlLnRhcFByZXZlbnRlZCYmYi5wcmV2ZW50VGFwKHRoaXMuaGVsZFBvaW50ZXIucG9pbnRlcklkKX19O2IucmVnaXN0ZXJSZWNvZ25pemVyKCJob2xkIixjKX0od2luZG93LlBvaW50ZXJHZXN0dXJlcyksZnVuY3Rpb24oYSl7dmFyIGI9YS5kaXNwYXRjaGVyLGM9bmV3IGEuUG9pbnRlck1hcCxkPXtldmVudHM6WyJwb2ludGVyZG93biIsInBvaW50ZXJtb3ZlIiwicG9pbnRlcnVwIiwicG9pbnRlcmNhbmNlbCJdLFdJR0dMRV9USFJFU0hPTEQ6NCxjbGFtcERpcjpmdW5jdGlvbihhKXtyZXR1cm4gYT4wPzE6LTF9LGNhbGNQb3NpdGlvbkRlbHRhOmZ1bmN0aW9uKGEsYil7dmFyIGM9MCxkPTA7cmV0dXJuIGEmJmImJihjPWIucGFnZVgtYS5wYWdlWCxkPWIucGFnZVktYS5wYWdlWSkse3g6Yyx5OmR9fSxmaXJlVHJhY2s6ZnVuY3Rpb24oYSxjLGQpe3ZhciBlPWQsZj10aGlzLmNhbGNQb3NpdGlvbkRlbHRhKGUuZG93bkV2ZW50LGMpLGc9dGhpcy5jYWxjUG9zaXRpb25EZWx0YShlLmxhc3RNb3ZlRXZlbnQsYyk7Zy54JiYoZS54RGlyZWN0aW9uPXRoaXMuY2xhbXBEaXIoZy54KSksZy55JiYoZS55RGlyZWN0aW9uPXRoaXMuY2xhbXBEaXIoZy55KSk7dmFyIGg9e2R4OmYueCxkeTpmLnksZGR4OmcueCxkZHk6Zy55LGNsaWVudFg6Yy5jbGllbnRYLGNsaWVudFk6Yy5jbGllbnRZLHBhZ2VYOmMucGFnZVgscGFnZVk6Yy5wYWdlWSxzY3JlZW5YOmMuc2NyZWVuWCxzY3JlZW5ZOmMuc2NyZWVuWSx4RGlyZWN0aW9uOmUueERpcmVjdGlvbix5RGlyZWN0aW9uOmUueURpcmVjdGlvbix0cmFja0luZm86ZS50cmFja0luZm8scG9pbnRlclR5cGU6Yy5wb2ludGVyVHlwZX07InRyYWNrZW5kIj09PWEmJihoLl9yZWxlYXNlVGFyZ2V0PWMudGFyZ2V0KTt2YXIgaT1iLm1ha2VFdmVudChhLGgpO2UubGFzdE1vdmVFdmVudD1jLGIuZGlzcGF0Y2hFdmVudChpLGUuZG93blRhcmdldCl9LHBvaW50ZXJkb3duOmZ1bmN0aW9uKGEpe2lmKGEuaXNQcmltYXJ5JiYoIm1vdXNlIj09PWEucG9pbnRlclR5cGU/MT09PWEuYnV0dG9uczohMCkpe3ZhciBiPXtkb3duRXZlbnQ6YSxkb3duVGFyZ2V0OmEudGFyZ2V0LHRyYWNrSW5mbzp7fSxsYXN0TW92ZUV2ZW50Om51bGwseERpcmVjdGlvbjowLHlEaXJlY3Rpb246MCx0cmFja2luZzohMX07Yy5zZXQoYS5wb2ludGVySWQsYil9fSxwb2ludGVybW92ZTpmdW5jdGlvbihhKXt2YXIgYj1jLmdldChhLnBvaW50ZXJJZCk7aWYoYilpZihiLnRyYWNraW5nKXRoaXMuZmlyZVRyYWNrKCJ0cmFjayIsYSxiKTtlbHNle3ZhciBkPXRoaXMuY2FsY1Bvc2l0aW9uRGVsdGEoYi5kb3duRXZlbnQsYSksZT1kLngqZC54K2QueSpkLnk7ZT50aGlzLldJR0dMRV9USFJFU0hPTEQmJihiLnRyYWNraW5nPSEwLHRoaXMuZmlyZVRyYWNrKCJ0cmFja3N0YXJ0IixiLmRvd25FdmVudCxiKSx0aGlzLmZpcmVUcmFjaygidHJhY2siLGEsYikpfX0scG9pbnRlcnVwOmZ1bmN0aW9uKGEpe3ZhciBiPWMuZ2V0KGEucG9pbnRlcklkKTtiJiYoYi50cmFja2luZyYmdGhpcy5maXJlVHJhY2soInRyYWNrZW5kIixhLGIpLGMuZGVsZXRlKGEucG9pbnRlcklkKSl9LHBvaW50ZXJjYW5jZWw6ZnVuY3Rpb24oYSl7dGhpcy5wb2ludGVydXAoYSl9fTtiLnJlZ2lzdGVyUmVjb2duaXplcigidHJhY2siLGQpfSh3aW5kb3cuUG9pbnRlckdlc3R1cmVzKSxmdW5jdGlvbihhKXt2YXIgYj1hLmRpc3BhdGNoZXIsYz17TUlOX1ZFTE9DSVRZOi41LE1BWF9RVUVVRTo0LG1vdmVRdWV1ZTpbXSx0YXJnZXQ6bnVsbCxwb2ludGVySWQ6bnVsbCxldmVudHM6WyJwb2ludGVyZG93biIsInBvaW50ZXJtb3ZlIiwicG9pbnRlcnVwIiwicG9pbnRlcmNhbmNlbCJdLHBvaW50ZXJkb3duOmZ1bmN0aW9uKGEpe2EuaXNQcmltYXJ5JiYhdGhpcy5wb2ludGVySWQmJih0aGlzLnBvaW50ZXJJZD1hLnBvaW50ZXJJZCx0aGlzLnRhcmdldD1hLnRhcmdldCx0aGlzLmFkZE1vdmUoYSkpfSxwb2ludGVybW92ZTpmdW5jdGlvbihhKXthLnBvaW50ZXJJZD09PXRoaXMucG9pbnRlcklkJiZ0aGlzLmFkZE1vdmUoYSl9LHBvaW50ZXJ1cDpmdW5jdGlvbihhKXthLnBvaW50ZXJJZD09PXRoaXMucG9pbnRlcklkJiZ0aGlzLmZpcmVGbGljayhhKSx0aGlzLmNsZWFudXAoKX0scG9pbnRlcmNhbmNlbDpmdW5jdGlvbigpe3RoaXMuY2xlYW51cCgpfSxjbGVhbnVwOmZ1bmN0aW9uKCl7dGhpcy5tb3ZlUXVldWU9W10sdGhpcy50YXJnZXQ9bnVsbCx0aGlzLnBvaW50ZXJJZD1udWxsfSxhZGRNb3ZlOmZ1bmN0aW9uKGEpe3RoaXMubW92ZVF1ZXVlLmxlbmd0aD49dGhpcy5NQVhfUVVFVUUmJnRoaXMubW92ZVF1ZXVlLnNoaWZ0KCksdGhpcy5tb3ZlUXVldWUucHVzaChhKX0sZmlyZUZsaWNrOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYyxkLGUsZixnLGgsaSxqPWEsaz10aGlzLm1vdmVRdWV1ZS5sZW5ndGgsbD0wLG09MCxuPTAsbz0wO2s+byYmKGk9dGhpcy5tb3ZlUXVldWVbb10pO28rKyljPWoudGltZVN0YW1wLWkudGltZVN0YW1wLGQ9ai5jbGllbnRYLWkuY2xpZW50WCxlPWouY2xpZW50WS1pLmNsaWVudFksZj1kL2MsZz1lL2MsaD1NYXRoLnNxcnQoZipmK2cqZyksaD5uJiYobD1mLG09ZyxuPWgpO3ZhciBwPU1hdGguYWJzKGwpPk1hdGguYWJzKG0pPyJ4IjoieSIscT10aGlzLmNhbGNBbmdsZShsLG0pO2lmKE1hdGguYWJzKG4pPj10aGlzLk1JTl9WRUxPQ0lUWSl7dmFyIHI9Yi5tYWtlRXZlbnQoImZsaWNrIix7eFZlbG9jaXR5OmwseVZlbG9jaXR5Om0sdmVsb2NpdHk6bixhbmdsZTpxLG1ham9yQXhpczpwLHBvaW50ZXJUeXBlOmEucG9pbnRlclR5cGV9KTtiLmRpc3BhdGNoRXZlbnQocix0aGlzLnRhcmdldCl9fSxjYWxjQW5nbGU6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gMTgwKk1hdGguYXRhbjIoYixhKS9NYXRoLlBJfX07Yi5yZWdpc3RlclJlY29nbml6ZXIoImZsaWNrIixjKX0od2luZG93LlBvaW50ZXJHZXN0dXJlcyksZnVuY3Rpb24oYSl7dmFyIGI9YS5kaXNwYXRjaGVyLGM9bmV3IGEuUG9pbnRlck1hcCxkPXtldmVudHM6WyJwb2ludGVyZG93biIsInBvaW50ZXJtb3ZlIiwicG9pbnRlcnVwIiwicG9pbnRlcmNhbmNlbCJdLHBvaW50ZXJkb3duOmZ1bmN0aW9uKGEpe2EuaXNQcmltYXJ5JiYhYS50YXBQcmV2ZW50ZWQmJmMuc2V0KGEucG9pbnRlcklkLHt0YXJnZXQ6YS50YXJnZXQseDphLmNsaWVudFgseTphLmNsaWVudFl9KX0scG9pbnRlcm1vdmU6ZnVuY3Rpb24oYSl7aWYoYS5pc1ByaW1hcnkpe3ZhciBiPWMuZ2V0KGEucG9pbnRlcklkKTtiJiZhLnRhcFByZXZlbnRlZCYmYy5kZWxldGUoYS5wb2ludGVySWQpfX0scG9pbnRlcnVwOmZ1bmN0aW9uKGQpe3ZhciBlPWMuZ2V0KGQucG9pbnRlcklkKTtpZihlJiYhZC50YXBQcmV2ZW50ZWQpe3ZhciBmPWEuZmluZExDQShlLnRhcmdldCxkLnRhcmdldCk7aWYoZil7dmFyIGc9Yi5tYWtlRXZlbnQoInRhcCIse3g6ZC5jbGllbnRYLHk6ZC5jbGllbnRZLHBvaW50ZXJUeXBlOmQucG9pbnRlclR5cGV9KTtiLmRpc3BhdGNoRXZlbnQoZyxmKX19Yy5kZWxldGUoZC5wb2ludGVySWQpfSxwb2ludGVyY2FuY2VsOmZ1bmN0aW9uKGEpe2MuZGVsZXRlKGEucG9pbnRlcklkKX0scHJldmVudFRhcDpmdW5jdGlvbihhKXtjLmRlbGV0ZShhKX19O2IucmVnaXN0ZXJSZWNvZ25pemVyKCJ0YXAiLGQpfSh3aW5kb3cuUG9pbnRlckdlc3R1cmVzKTsKLyoKLy9AIHNvdXJjZU1hcHBpbmdVUkw9cGxhdGZvcm0ubmF0aXZlLm1pbi5qcy5tYXAKKi8=",
                "headers": {
                    "Accept-Ranges": "bytes",
                    "Last-Modified": "Thu, 06 Nov 2014 23:22:12 GMT",
                    "Content-Length": "94688",
                    "Date": "Thu, 06 Nov 2014 23:22:12 GMT",
                    "Content-Type": "application/javascript"
                },
                "cookies": [],
                "mimeType": "script",
                "host": "localhost",
                "protocol": "http",
                "port": 9999,
                "inScope": false,
                "toolFlag": 16962,
                "referenceID": 0,
                "messageType": "response"
            },
            "messageType": "requestResponse"
        }
    ],
    "inScope": true,
    "messageType": "scanIssue"
}