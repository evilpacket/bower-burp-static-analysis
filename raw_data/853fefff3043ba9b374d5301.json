{
    "url": "http://localhost:9999/joselitojunior/responsive-embed/bower_components/polymer/polymer.js",
    "host": "localhost",
    "port": 9999,
    "protocol": "http",
    "name": "Link manipulation (DOM-based)",
    "issueType": 5246976,
    "severity": "Low",
    "confidence": "Firm",
    "issueBackground": "DOM-based link manipulation vulnerabilities arise when a client-side script within an application's response reads data from a controllable part of the DOM (for example, the URL), and writes this to a navigation target within the current page, such as a clickable link or the submission URL of a form. An attacker may be able to use the vulnerability to construct a URL which, if visited by another application user, will modify the target of links within the response. An attacker may be able to leverage this to perform various attacks, including:<ul><li>Causing the user to redirect to an arbitrary external URL, to facilitate a phishing attack.</li><li>Causing the user to submit sensitive form data to a server controlled by the attacker.</li><li>Causing the user to perform an unintended action within the application, by changing the file or query string associated with a link.</li><li>Bypassing browser anti-XSS defenses by injecting on-site links containing XSS exploits, since browser anti-XSS defenses typically do not operate on on-site links.</li></ul>",
    "remediationBackground": "Static analysis of code to identify vulnerabilities of this kind may lead to false positives that are not actually exploitable. You should review the highlighted code and related execution paths to determine whether the application is indeed vulnerable, or whether mitigations are in place that would prevent exploitation.<br><br>The most effective way to avoid DOM-based link manipulation vulnerabilities is not to dynamically set the target URLs of links or forms using data that originated from any untrusted source. If the desired functionality of the application means that this behavior is unavoidable, then defenses must be implemented within the client-side code to prevent malicious data from introducing an arbitrary URL as a link target. In general, this is best achieved by using a whitelist of URLs that are permitted link targets, and strictly validating the target against this list before setting the link target.",
    "issueDetail": "The application may be vulnerable to DOM-based link manipulation. Data is read from <b>the 'baseURI' property of a DOM element</b> and written to <b>the 'href' property of a DOM element</b> via the following statement:<ul><li>e.href=document.baseURI,d.appendChild(e)</li></ul>",
    "requestResponses": [
        {
            "request": {
                "host": "localhost",
                "port": 9999,
                "protocol": "http",
                "url": "http://localhost:9999/joselitojunior/responsive-embed/bower_components/polymer/polymer.js",
                "path": "/joselitojunior/responsive-embed/bower_components/polymer/polymer.js",
                "httpVersion": "HTTP/1.1",
                "method": "GET",
                "headers": {
                    "Host": "localhost:9999"
                },
                "body": "",
                "raw": "R0VUIC9qb3NlbGl0b2p1bmlvci9yZXNwb25zaXZlLWVtYmVkL2Jvd2VyX2NvbXBvbmVudHMvcG9seW1lci9wb2x5bWVyLmpzIEhUVFAvMS4xDQpIb3N0OiBsb2NhbGhvc3Q6OTk5OQ0KDQo=",
                "inScope": true,
                "toolFlag": 16962,
                "referenceID": 0,
                "messageType": "request"
            },
            "response": {
                "statusCode": 200,
                "raw": "SFRUUC8xLjEgMjAwIE9LDQpDb250ZW50LUxlbmd0aDogMTE0NTg0DQpBY2NlcHQtUmFuZ2VzOiBieXRlcw0KQ29udGVudC1UeXBlOiBhcHBsaWNhdGlvbi9qYXZhc2NyaXB0DQpEYXRlOiBTYXQsIDA4IE5vdiAyMDE0IDAzOjI0OjQ4IEdNVA0KTGFzdC1Nb2RpZmllZDogU2F0LCAwOCBOb3YgMjAxNCAwMzoyNDo0OCBHTVQNCg0KLyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAoYykgMjAxNCBUaGUgUG9seW1lciBQcm9qZWN0IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuCiAqIFRoaXMgY29kZSBtYXkgb25seSBiZSB1c2VkIHVuZGVyIHRoZSBCU0Qgc3R5bGUgbGljZW5zZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vTElDRU5TRS50eHQKICogVGhlIGNvbXBsZXRlIHNldCBvZiBhdXRob3JzIG1heSBiZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQVVUSE9SUy50eHQKICogVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9DT05UUklCVVRPUlMudHh0CiAqIENvZGUgZGlzdHJpYnV0ZWQgYnkgR29vZ2xlIGFzIHBhcnQgb2YgdGhlIHBvbHltZXIgcHJvamVjdCBpcyBhbHNvCiAqIHN1YmplY3QgdG8gYW4gYWRkaXRpb25hbCBJUCByaWdodHMgZ3JhbnQgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL1BBVEVOVFMudHh0CiAqLwovLyBAdmVyc2lvbjogMC40LjAKd2luZG93LlBvbHltZXJHZXN0dXJlcz17fSxmdW5jdGlvbihhKXt2YXIgYj0hMSxjPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIm1ldGEiKTtpZihjLmNyZWF0ZVNoYWRvd1Jvb3Qpe3ZhciBkPWMuY3JlYXRlU2hhZG93Um9vdCgpLGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3BhbiIpO2QuYXBwZW5kQ2hpbGQoZSksYy5hZGRFdmVudExpc3RlbmVyKCJ0ZXN0cGF0aCIsZnVuY3Rpb24oYSl7YS5wYXRoJiYoYj1hLnBhdGhbMF09PT1lKSxhLnN0b3BQcm9wYWdhdGlvbigpfSk7dmFyIGY9bmV3IEN1c3RvbUV2ZW50KCJ0ZXN0cGF0aCIse2J1YmJsZXM6ITB9KTtkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKGMpLGUuZGlzcGF0Y2hFdmVudChmKSxjLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYyksZD1lPW51bGx9Yz1udWxsO3ZhciBnPXtzaGFkb3c6ZnVuY3Rpb24oYSl7cmV0dXJuIGE/YS5zaGFkb3dSb290fHxhLndlYmtpdFNoYWRvd1Jvb3Q6dm9pZCAwfSxjYW5UYXJnZXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGEmJkJvb2xlYW4oYS5lbGVtZW50RnJvbVBvaW50KX0sdGFyZ2V0aW5nU2hhZG93OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuc2hhZG93KGEpO3JldHVybiB0aGlzLmNhblRhcmdldChiKT9iOnZvaWQgMH0sb2xkZXJTaGFkb3c6ZnVuY3Rpb24oYSl7dmFyIGI9YS5vbGRlclNoYWRvd1Jvb3Q7aWYoIWIpe3ZhciBjPWEucXVlcnlTZWxlY3Rvcigic2hhZG93Iik7YyYmKGI9Yy5vbGRlclNoYWRvd1Jvb3QpfXJldHVybiBifSxhbGxTaGFkb3dzOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1bXSxjPXRoaXMuc2hhZG93KGEpO2M7KWIucHVzaChjKSxjPXRoaXMub2xkZXJTaGFkb3coYyk7cmV0dXJuIGJ9LHNlYXJjaFJvb3Q6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGU7cmV0dXJuIGE/KGQ9YS5lbGVtZW50RnJvbVBvaW50KGIsYyksZD9lPXRoaXMudGFyZ2V0aW5nU2hhZG93KGQpOmEhPT1kb2N1bWVudCYmKGU9dGhpcy5vbGRlclNoYWRvdyhhKSksdGhpcy5zZWFyY2hSb290KGUsYixjKXx8ZCk6dm9pZCAwfSxvd25lcjpmdW5jdGlvbihhKXtpZighYSlyZXR1cm4gZG9jdW1lbnQ7Zm9yKHZhciBiPWE7Yi5wYXJlbnROb2RlOyliPWIucGFyZW50Tm9kZTtyZXR1cm4gYi5ub2RlVHlwZSE9Tm9kZS5ET0NVTUVOVF9OT0RFJiZiLm5vZGVUeXBlIT1Ob2RlLkRPQ1VNRU5UX0ZSQUdNRU5UX05PREUmJihiPWRvY3VtZW50KSxifSxmaW5kVGFyZ2V0OmZ1bmN0aW9uKGEpe2lmKGImJmEucGF0aClyZXR1cm4gYS5wYXRoWzBdO3ZhciBjPWEuY2xpZW50WCxkPWEuY2xpZW50WSxlPXRoaXMub3duZXIoYS50YXJnZXQpO3JldHVybiBlLmVsZW1lbnRGcm9tUG9pbnQoYyxkKXx8KGU9ZG9jdW1lbnQpLHRoaXMuc2VhcmNoUm9vdChlLGMsZCl9LGZpbmRUb3VjaEFjdGlvbjpmdW5jdGlvbihhKXt2YXIgYztpZihiJiZhLnBhdGgpe2Zvcih2YXIgZD1hLnBhdGgsZT0wO2U8ZC5sZW5ndGg7ZSsrKWlmKGM9ZFtlXSxjLm5vZGVUeXBlPT09Tm9kZS5FTEVNRU5UX05PREUmJmMuaGFzQXR0cmlidXRlKCJ0b3VjaC1hY3Rpb24iKSlyZXR1cm4gYy5nZXRBdHRyaWJ1dGUoInRvdWNoLWFjdGlvbiIpfWVsc2UgZm9yKGM9YS50YXJnZXQ7Yzspe2lmKGMuaGFzQXR0cmlidXRlKCJ0b3VjaC1hY3Rpb24iKSlyZXR1cm4gYy5nZXRBdHRyaWJ1dGUoInRvdWNoLWFjdGlvbiIpO2M9Yy5wYXJlbnROb2RlfHxjLmhvc3R9cmV0dXJuImF1dG8ifSxMQ0E6ZnVuY3Rpb24oYSxiKXtpZihhPT09YilyZXR1cm4gYTtpZihhJiYhYilyZXR1cm4gYTtpZihiJiYhYSlyZXR1cm4gYjtpZighYiYmIWEpcmV0dXJuIGRvY3VtZW50O2lmKGEuY29udGFpbnMmJmEuY29udGFpbnMoYikpcmV0dXJuIGE7aWYoYi5jb250YWlucyYmYi5jb250YWlucyhhKSlyZXR1cm4gYjt2YXIgYz10aGlzLmRlcHRoKGEpLGQ9dGhpcy5kZXB0aChiKSxlPWMtZDtmb3IoZT49MD9hPXRoaXMud2FsayhhLGUpOmI9dGhpcy53YWxrKGIsLWUpO2EmJmImJmEhPT1iOylhPWEucGFyZW50Tm9kZXx8YS5ob3N0LGI9Yi5wYXJlbnROb2RlfHxiLmhvc3Q7cmV0dXJuIGF9LHdhbGs6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9MDthJiZiPmM7YysrKWE9YS5wYXJlbnROb2RlfHxhLmhvc3Q7cmV0dXJuIGF9LGRlcHRoOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0wO2E7KWIrKyxhPWEucGFyZW50Tm9kZXx8YS5ob3N0O3JldHVybiBifSxkZWVwQ29udGFpbnM6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLkxDQShhLGIpO3JldHVybiBjPT09YX0saW5zaWRlTm9kZTpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9YS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtyZXR1cm4gZC5sZWZ0PD1iJiZiPD1kLnJpZ2h0JiZkLnRvcDw9YyYmYzw9ZC5ib3R0b219fTthLnRhcmdldEZpbmRpbmc9ZyxhLmZpbmRUYXJnZXQ9Zy5maW5kVGFyZ2V0LmJpbmQoZyksYS5kZWVwQ29udGFpbnM9Zy5kZWVwQ29udGFpbnMuYmluZChnKSxhLmluc2lkZU5vZGU9Zy5pbnNpZGVOb2RlfSh3aW5kb3cuUG9seW1lckdlc3R1cmVzKSxmdW5jdGlvbigpe2Z1bmN0aW9uIGEoYSl7cmV0dXJuImh0bWwgL2RlZXAvICIrYihhKX1mdW5jdGlvbiBiKGEpe3JldHVybidbdG91Y2gtYWN0aW9uPSInK2ErJyJdJ31mdW5jdGlvbiBjKGEpe3JldHVybiJ7IC1tcy10b3VjaC1hY3Rpb246ICIrYSsiOyB0b3VjaC1hY3Rpb246ICIrYSsiO30ifXZhciBkPVsibm9uZSIsImF1dG8iLCJwYW4teCIsInBhbi15Iix7cnVsZToicGFuLXggcGFuLXkiLHNlbGVjdG9yczpbInBhbi14IHBhbi15IiwicGFuLXkgcGFuLXgiXX0sIm1hbmlwdWxhdGlvbiJdLGU9IiIsZj0ic3RyaW5nIj09dHlwZW9mIGRvY3VtZW50LmhlYWQuc3R5bGUudG91Y2hBY3Rpb24sZz0hd2luZG93LlNoYWRvd0RPTVBvbHlmaWxsJiZkb2N1bWVudC5oZWFkLmNyZWF0ZVNoYWRvd1Jvb3Q7aWYoZil7ZC5mb3JFYWNoKGZ1bmN0aW9uKGQpe1N0cmluZyhkKT09PWQ/KGUrPWIoZCkrYyhkKSsiXG4iLGcmJihlKz1hKGQpK2MoZCkrIlxuIikpOihlKz1kLnNlbGVjdG9ycy5tYXAoYikrYyhkLnJ1bGUpKyJcbiIsZyYmKGUrPWQuc2VsZWN0b3JzLm1hcChhKStjKGQucnVsZSkrIlxuIikpfSk7dmFyIGg9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3R5bGUiKTtoLnRleHRDb250ZW50PWUsZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChoKX19KCksZnVuY3Rpb24oYSl7dmFyIGI9WyJidWJibGVzIiwiY2FuY2VsYWJsZSIsInZpZXciLCJkZXRhaWwiLCJzY3JlZW5YIiwic2NyZWVuWSIsImNsaWVudFgiLCJjbGllbnRZIiwiY3RybEtleSIsImFsdEtleSIsInNoaWZ0S2V5IiwibWV0YUtleSIsImJ1dHRvbiIsInJlbGF0ZWRUYXJnZXQiLCJwYWdlWCIsInBhZ2VZIl0sYz1bITEsITEsbnVsbCxudWxsLDAsMCwwLDAsITEsITEsITEsITEsMCxudWxsLDAsMF0sZD1mdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbigpe319LGU9e3ByZXZlbnRUYXA6ZCxtYWtlQmFzZUV2ZW50OmZ1bmN0aW9uKGEsYil7dmFyIGM9ZG9jdW1lbnQuY3JlYXRlRXZlbnQoIkV2ZW50Iik7cmV0dXJuIGMuaW5pdEV2ZW50KGEsYi5idWJibGVzfHwhMSxiLmNhbmNlbGFibGV8fCExKSxjLnByZXZlbnRUYXA9ZS5wcmV2ZW50VGFwKGMpLGN9LG1ha2VHZXN0dXJlRXZlbnQ6ZnVuY3Rpb24oYSxiKXtiPWJ8fE9iamVjdC5jcmVhdGUobnVsbCk7Zm9yKHZhciBjLGQ9dGhpcy5tYWtlQmFzZUV2ZW50KGEsYiksZT0wLGY9T2JqZWN0LmtleXMoYik7ZTxmLmxlbmd0aDtlKyspYz1mW2VdLGRbY109YltjXTtyZXR1cm4gZH0sbWFrZVBvaW50ZXJFdmVudDpmdW5jdGlvbihhLGQpe2Q9ZHx8T2JqZWN0LmNyZWF0ZShudWxsKTtmb3IodmFyIGUsZj10aGlzLm1ha2VCYXNlRXZlbnQoYSxkKSxnPTA7ZzxiLmxlbmd0aDtnKyspZT1iW2ddLGZbZV09ZFtlXXx8Y1tnXTtmLmJ1dHRvbnM9ZC5idXR0b25zfHwwO3ZhciBoPTA7cmV0dXJuIGg9ZC5wcmVzc3VyZT9kLnByZXNzdXJlOmYuYnV0dG9ucz8uNTowLGYueD1mLmNsaWVudFgsZi55PWYuY2xpZW50WSxmLnBvaW50ZXJJZD1kLnBvaW50ZXJJZHx8MCxmLndpZHRoPWQud2lkdGh8fDAsZi5oZWlnaHQ9ZC5oZWlnaHR8fDAsZi5wcmVzc3VyZT1oLGYudGlsdFg9ZC50aWx0WHx8MCxmLnRpbHRZPWQudGlsdFl8fDAsZi5wb2ludGVyVHlwZT1kLnBvaW50ZXJUeXBlfHwiIixmLmh3VGltZXN0YW1wPWQuaHdUaW1lc3RhbXB8fDAsZi5pc1ByaW1hcnk9ZC5pc1ByaW1hcnl8fCExLGYuX3NvdXJjZT1kLl9zb3VyY2V8fCIiLGZ9fTthLmV2ZW50RmFjdG9yeT1lfSh3aW5kb3cuUG9seW1lckdlc3R1cmVzKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKCl7aWYoYyl7dmFyIGE9bmV3IE1hcDtyZXR1cm4gYS5wb2ludGVycz1kLGF9dGhpcy5rZXlzPVtdLHRoaXMudmFsdWVzPVtdfXZhciBjPXdpbmRvdy5NYXAmJndpbmRvdy5NYXAucHJvdG90eXBlLmZvckVhY2gsZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnNpemV9O2IucHJvdG90eXBlPXtzZXQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmtleXMuaW5kZXhPZihhKTtjPi0xP3RoaXMudmFsdWVzW2NdPWI6KHRoaXMua2V5cy5wdXNoKGEpLHRoaXMudmFsdWVzLnB1c2goYikpfSxoYXM6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMua2V5cy5pbmRleE9mKGEpPi0xfSwiZGVsZXRlIjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmtleXMuaW5kZXhPZihhKTtiPi0xJiYodGhpcy5rZXlzLnNwbGljZShiLDEpLHRoaXMudmFsdWVzLnNwbGljZShiLDEpKX0sZ2V0OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMua2V5cy5pbmRleE9mKGEpO3JldHVybiB0aGlzLnZhbHVlc1tiXX0sY2xlYXI6ZnVuY3Rpb24oKXt0aGlzLmtleXMubGVuZ3RoPTAsdGhpcy52YWx1ZXMubGVuZ3RoPTB9LGZvckVhY2g6ZnVuY3Rpb24oYSxiKXt0aGlzLnZhbHVlcy5mb3JFYWNoKGZ1bmN0aW9uKGMsZCl7YS5jYWxsKGIsYyx0aGlzLmtleXNbZF0sdGhpcyl9LHRoaXMpfSxwb2ludGVyczpmdW5jdGlvbigpe3JldHVybiB0aGlzLmtleXMubGVuZ3RofX0sYS5Qb2ludGVyTWFwPWJ9KHdpbmRvdy5Qb2x5bWVyR2VzdHVyZXMpLGZ1bmN0aW9uKGEpe3ZhciBiLGM9WyJidWJibGVzIiwiY2FuY2VsYWJsZSIsInZpZXciLCJkZXRhaWwiLCJzY3JlZW5YIiwic2NyZWVuWSIsImNsaWVudFgiLCJjbGllbnRZIiwiY3RybEtleSIsImFsdEtleSIsInNoaWZ0S2V5IiwibWV0YUtleSIsImJ1dHRvbiIsInJlbGF0ZWRUYXJnZXQiLCJidXR0b25zIiwicG9pbnRlcklkIiwid2lkdGgiLCJoZWlnaHQiLCJwcmVzc3VyZSIsInRpbHRYIiwidGlsdFkiLCJwb2ludGVyVHlwZSIsImh3VGltZXN0YW1wIiwiaXNQcmltYXJ5IiwidHlwZSIsInRhcmdldCIsImN1cnJlbnRUYXJnZXQiLCJ3aGljaCIsInBhZ2VYIiwicGFnZVkiLCJ0aW1lU3RhbXAiLCJwcmV2ZW50VGFwIiwidGFwUHJldmVudGVkIiwiX3NvdXJjZSJdLGQ9WyExLCExLG51bGwsbnVsbCwwLDAsMCwwLCExLCExLCExLCExLDAsbnVsbCwwLDAsMCwwLDAsMCwwLCIiLDAsITEsIiIsbnVsbCxudWxsLDAsMCwwLDAsZnVuY3Rpb24oKXt9LCExXSxlPSJ1bmRlZmluZWQiIT10eXBlb2YgU1ZHRWxlbWVudEluc3RhbmNlLGY9YS5ldmVudEZhY3RvcnksZz17cG9pbnRlcm1hcDpuZXcgYS5Qb2ludGVyTWFwLHJlcXVpcmVkR2VzdHVyZXM6bmV3IGEuUG9pbnRlck1hcCxldmVudE1hcDpPYmplY3QuY3JlYXRlKG51bGwpLGV2ZW50U291cmNlczpPYmplY3QuY3JlYXRlKG51bGwpLGV2ZW50U291cmNlTGlzdDpbXSxnZXN0dXJlczpbXSxkZXBlbmRlbmN5TWFwOntkb3duOntsaXN0ZW5lcnM6MCxpbmRleDotMX0sdXA6e2xpc3RlbmVyczowLGluZGV4Oi0xfX0sZ2VzdHVyZVF1ZXVlOltdLHJlZ2lzdGVyU291cmNlOmZ1bmN0aW9uKGEsYil7dmFyIGM9YixkPWMuZXZlbnRzO2QmJihkLmZvckVhY2goZnVuY3Rpb24oYSl7Y1thXSYmKHRoaXMuZXZlbnRNYXBbYV09Y1thXS5iaW5kKGMpKX0sdGhpcyksdGhpcy5ldmVudFNvdXJjZXNbYV09Yyx0aGlzLmV2ZW50U291cmNlTGlzdC5wdXNoKGMpKX0scmVnaXN0ZXJHZXN0dXJlOmZ1bmN0aW9uKGEsYil7dmFyIGM9T2JqZWN0LmNyZWF0ZShudWxsKTtjLmxpc3RlbmVycz0wLGMuaW5kZXg9dGhpcy5nZXN0dXJlcy5sZW5ndGg7Zm9yKHZhciBkLGU9MDtlPGIuZXhwb3Nlcy5sZW5ndGg7ZSsrKWQ9Yi5leHBvc2VzW2VdLnRvTG93ZXJDYXNlKCksdGhpcy5kZXBlbmRlbmN5TWFwW2RdPWM7dGhpcy5nZXN0dXJlcy5wdXNoKGIpfSxyZWdpc3RlcjpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYyxkPXRoaXMuZXZlbnRTb3VyY2VMaXN0Lmxlbmd0aCxlPTA7ZD5lJiYoYz10aGlzLmV2ZW50U291cmNlTGlzdFtlXSk7ZSsrKWMucmVnaXN0ZXIuY2FsbChjLGEsYil9LHVucmVnaXN0ZXI6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiLGM9dGhpcy5ldmVudFNvdXJjZUxpc3QubGVuZ3RoLGQ9MDtjPmQmJihiPXRoaXMuZXZlbnRTb3VyY2VMaXN0W2RdKTtkKyspYi51bnJlZ2lzdGVyLmNhbGwoYixhKX0sZG93bjpmdW5jdGlvbihhKXt0aGlzLnJlcXVpcmVkR2VzdHVyZXMuc2V0KGEucG9pbnRlcklkLGIpLHRoaXMuZmlyZUV2ZW50KCJkb3duIixhKX0sbW92ZTpmdW5jdGlvbihhKXthLnR5cGU9Im1vdmUiLHRoaXMuZmlsbEdlc3R1cmVRdWV1ZShhKX0sdXA6ZnVuY3Rpb24oYSl7dGhpcy5maXJlRXZlbnQoInVwIixhKSx0aGlzLnJlcXVpcmVkR2VzdHVyZXMuZGVsZXRlKGEucG9pbnRlcklkKX0sY2FuY2VsOmZ1bmN0aW9uKGEpe2EudGFwUHJldmVudGVkPSEwLHRoaXMuZmlyZUV2ZW50KCJ1cCIsYSksdGhpcy5yZXF1aXJlZEdlc3R1cmVzLmRlbGV0ZShhLnBvaW50ZXJJZCl9LGV2ZW50SGFuZGxlcjpmdW5jdGlvbihhKXt2YXIgYz1hLnR5cGU7aWYoInRvdWNoc3RhcnQiPT09Y3x8Im1vdXNlZG93biI9PT1jfHwicG9pbnRlcmRvd24iPT09Y3x8Ik1TUG9pbnRlckRvd24iPT09Yyl7YS5faGFuZGxlZEJ5UEd8fChiPXt9KTt2YXIgZD1hLmN1cnJlbnRUYXJnZXQuX3BnRXZlbnRzO2lmKGQpZm9yKHZhciBlLGYsZyxoPU9iamVjdC5rZXlzKGQpLGk9MDtpPGgubGVuZ3RoO2krKylnPWhbaV0sZFtnXT4wJiYoZT10aGlzLmRlcGVuZGVuY3lNYXBbZ10sZj1lP2UuaW5kZXg6LTEsYltmXT0hMCl9aWYoIWEuX2hhbmRsZWRCeVBHKXt2YXIgaj10aGlzLmV2ZW50TWFwJiZ0aGlzLmV2ZW50TWFwW2NdO2omJmooYSksYS5faGFuZGxlZEJ5UEc9ITB9fSxsaXN0ZW46ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGMsZD0wLGU9Yi5sZW5ndGg7ZT5kJiYoYz1iW2RdKTtkKyspdGhpcy5hZGRFdmVudChhLGMpfSx1bmxpc3RlbjpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYyxkPTAsZT1iLmxlbmd0aDtlPmQmJihjPWJbZF0pO2QrKyl0aGlzLnJlbW92ZUV2ZW50KGEsYyl9LGFkZEV2ZW50OmZ1bmN0aW9uKGEsYil7YS5hZGRFdmVudExpc3RlbmVyKGIsdGhpcy5ib3VuZEhhbmRsZXIpfSxyZW1vdmVFdmVudDpmdW5jdGlvbihhLGIpe2EucmVtb3ZlRXZlbnRMaXN0ZW5lcihiLHRoaXMuYm91bmRIYW5kbGVyKX0sbWFrZUV2ZW50OmZ1bmN0aW9uKGEsYil7dmFyIGM9Zi5tYWtlUG9pbnRlckV2ZW50KGEsYik7cmV0dXJuIGMucHJldmVudERlZmF1bHQ9Yi5wcmV2ZW50RGVmYXVsdCxjLnRhcFByZXZlbnRlZD1iLnRhcFByZXZlbnRlZCxjLl90YXJnZXQ9Yy5fdGFyZ2V0fHxiLnRhcmdldCxjfSxmaXJlRXZlbnQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLm1ha2VFdmVudChhLGIpO3JldHVybiB0aGlzLmRpc3BhdGNoRXZlbnQoYyl9LGNsb25lRXZlbnQ6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiLGY9T2JqZWN0LmNyZWF0ZShudWxsKSxnPTA7ZzxjLmxlbmd0aDtnKyspYj1jW2ddLGZbYl09YVtiXXx8ZFtnXSwoInRhcmdldCI9PT1ifHwicmVsYXRlZFRhcmdldCI9PT1iKSYmZSYmZltiXWluc3RhbmNlb2YgU1ZHRWxlbWVudEluc3RhbmNlJiYoZltiXT1mW2JdLmNvcnJlc3BvbmRpbmdVc2VFbGVtZW50KTtyZXR1cm4gZi5wcmV2ZW50RGVmYXVsdD1mdW5jdGlvbigpe2EucHJldmVudERlZmF1bHQoKX0sZn0sZGlzcGF0Y2hFdmVudDpmdW5jdGlvbihhKXt2YXIgYj1hLl90YXJnZXQ7aWYoYil7Yi5kaXNwYXRjaEV2ZW50KGEpO3ZhciBjPXRoaXMuY2xvbmVFdmVudChhKTtjLnRhcmdldD1iLHRoaXMuZmlsbEdlc3R1cmVRdWV1ZShjKX19LGdlc3R1cmVUcmlnZ2VyOmZ1bmN0aW9uKCl7Zm9yKHZhciBhLGIsYz0wO2M8dGhpcy5nZXN0dXJlUXVldWUubGVuZ3RoO2MrKyl7YT10aGlzLmdlc3R1cmVRdWV1ZVtjXSxiPWEuX3JlcXVpcmVkR2VzdHVyZXM7Zm9yKHZhciBkLGUsZj0wO2Y8dGhpcy5nZXN0dXJlcy5sZW5ndGg7ZisrKWJbZl0mJihkPXRoaXMuZ2VzdHVyZXNbZl0sZT1kW2EudHlwZV0sZSYmZS5jYWxsKGQsYSkpfXRoaXMuZ2VzdHVyZVF1ZXVlLmxlbmd0aD0wfSxmaWxsR2VzdHVyZVF1ZXVlOmZ1bmN0aW9uKGEpe3RoaXMuZ2VzdHVyZVF1ZXVlLmxlbmd0aHx8cmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRoaXMuYm91bmRHZXN0dXJlVHJpZ2dlciksYS5fcmVxdWlyZWRHZXN0dXJlcz10aGlzLnJlcXVpcmVkR2VzdHVyZXMuZ2V0KGEucG9pbnRlcklkKSx0aGlzLmdlc3R1cmVRdWV1ZS5wdXNoKGEpfX07Zy5ib3VuZEhhbmRsZXI9Zy5ldmVudEhhbmRsZXIuYmluZChnKSxnLmJvdW5kR2VzdHVyZVRyaWdnZXI9Zy5nZXN0dXJlVHJpZ2dlci5iaW5kKGcpLGEuZGlzcGF0Y2hlcj1nLGEuYWN0aXZhdGVHZXN0dXJlPWZ1bmN0aW9uKGEsYil7dmFyIGM9Yi50b0xvd2VyQ2FzZSgpLGQ9Zy5kZXBlbmRlbmN5TWFwW2NdO2lmKGQpe3ZhciBlPWcuZ2VzdHVyZXNbZC5pbmRleF07aWYoYS5fcGdMaXN0ZW5lcnN8fChnLnJlZ2lzdGVyKGEpLGEuX3BnTGlzdGVuZXJzPTApLGUpe3ZhciBmLGg9ZS5kZWZhdWx0QWN0aW9ucyYmZS5kZWZhdWx0QWN0aW9uc1tjXTtzd2l0Y2goYS5ub2RlVHlwZSl7Y2FzZSBOb2RlLkVMRU1FTlRfTk9ERTpmPWE7YnJlYWs7Y2FzZSBOb2RlLkRPQ1VNRU5UX0ZSQUdNRU5UX05PREU6Zj1hLmhvc3Q7YnJlYWs7ZGVmYXVsdDpmPW51bGx9aCYmZiYmIWYuaGFzQXR0cmlidXRlKCJ0b3VjaC1hY3Rpb24iKSYmZi5zZXRBdHRyaWJ1dGUoInRvdWNoLWFjdGlvbiIsaCl9YS5fcGdFdmVudHN8fChhLl9wZ0V2ZW50cz17fSksYS5fcGdFdmVudHNbY109KGEuX3BnRXZlbnRzW2NdfHwwKSsxLGEuX3BnTGlzdGVuZXJzKyt9cmV0dXJuIEJvb2xlYW4oZCl9LGEuYWRkRXZlbnRMaXN0ZW5lcj1mdW5jdGlvbihiLGMsZCxlKXtkJiYoYS5hY3RpdmF0ZUdlc3R1cmUoYixjKSxiLmFkZEV2ZW50TGlzdGVuZXIoYyxkLGUpKX0sYS5kZWFjdGl2YXRlR2VzdHVyZT1mdW5jdGlvbihhLGIpe3ZhciBjPWIudG9Mb3dlckNhc2UoKSxkPWcuZGVwZW5kZW5jeU1hcFtjXTtyZXR1cm4gZCYmKGEuX3BnTGlzdGVuZXJzPjAmJmEuX3BnTGlzdGVuZXJzLS0sMD09PWEuX3BnTGlzdGVuZXJzJiZnLnVucmVnaXN0ZXIoYSksYS5fcGdFdmVudHMmJihhLl9wZ0V2ZW50c1tjXT4wP2EuX3BnRXZlbnRzW2NdLS06YS5fcGdFdmVudHNbY109MCkpLEJvb2xlYW4oZCl9LGEucmVtb3ZlRXZlbnRMaXN0ZW5lcj1mdW5jdGlvbihiLGMsZCxlKXtkJiYoYS5kZWFjdGl2YXRlR2VzdHVyZShiLGMpLGIucmVtb3ZlRXZlbnRMaXN0ZW5lcihjLGQsZSkpfX0od2luZG93LlBvbHltZXJHZXN0dXJlcyksZnVuY3Rpb24oYSl7dmFyIGI9YS5kaXNwYXRjaGVyLGM9Yi5wb2ludGVybWFwLGQ9MjUsZT1bMCwxLDQsMl0sZj0hMTt0cnl7Zj0xPT09bmV3IE1vdXNlRXZlbnQoInRlc3QiLHtidXR0b25zOjF9KS5idXR0b25zfWNhdGNoKGcpe312YXIgaD17UE9JTlRFUl9JRDoxLFBPSU5URVJfVFlQRToibW91c2UiLGV2ZW50czpbIm1vdXNlZG93biIsIm1vdXNlbW92ZSIsIm1vdXNldXAiXSxleHBvc2VzOlsiZG93biIsInVwIiwibW92ZSJdLHJlZ2lzdGVyOmZ1bmN0aW9uKGEpe2IubGlzdGVuKGEsdGhpcy5ldmVudHMpfSx1bnJlZ2lzdGVyOmZ1bmN0aW9uKGEpe2IudW5saXN0ZW4oYSx0aGlzLmV2ZW50cyl9LGxhc3RUb3VjaGVzOltdLGlzRXZlbnRTaW11bGF0ZWRGcm9tVG91Y2g6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiLGM9dGhpcy5sYXN0VG91Y2hlcyxlPWEuY2xpZW50WCxmPWEuY2xpZW50WSxnPTAsaD1jLmxlbmd0aDtoPmcmJihiPWNbZ10pO2crKyl7dmFyIGk9TWF0aC5hYnMoZS1iLngpLGo9TWF0aC5hYnMoZi1iLnkpO2lmKGQ+PWkmJmQ+PWopcmV0dXJuITB9fSxwcmVwYXJlRXZlbnQ6ZnVuY3Rpb24oYSl7dmFyIGM9Yi5jbG9uZUV2ZW50KGEpO3JldHVybiBjLnBvaW50ZXJJZD10aGlzLlBPSU5URVJfSUQsYy5pc1ByaW1hcnk9ITAsYy5wb2ludGVyVHlwZT10aGlzLlBPSU5URVJfVFlQRSxjLl9zb3VyY2U9Im1vdXNlIixmfHwoYy5idXR0b25zPWVbYy53aGljaF18fDApLGN9LG1vdXNlZG93bjpmdW5jdGlvbihkKXtpZighdGhpcy5pc0V2ZW50U2ltdWxhdGVkRnJvbVRvdWNoKGQpKXt2YXIgZT1jLmhhcyh0aGlzLlBPSU5URVJfSUQpO2UmJnRoaXMubW91c2V1cChkKTt2YXIgZj10aGlzLnByZXBhcmVFdmVudChkKTtmLnRhcmdldD1hLmZpbmRUYXJnZXQoZCksYy5zZXQodGhpcy5QT0lOVEVSX0lELGYudGFyZ2V0KSxiLmRvd24oZil9fSxtb3VzZW1vdmU6ZnVuY3Rpb24oYSl7aWYoIXRoaXMuaXNFdmVudFNpbXVsYXRlZEZyb21Ub3VjaChhKSl7dmFyIGQ9Yy5nZXQodGhpcy5QT0lOVEVSX0lEKTtpZihkKXt2YXIgZT10aGlzLnByZXBhcmVFdmVudChhKTtlLnRhcmdldD1kLDA9PT1lLmJ1dHRvbnM/KGIuY2FuY2VsKGUpLHRoaXMuY2xlYW51cE1vdXNlKCkpOmIubW92ZShlKX19fSxtb3VzZXVwOmZ1bmN0aW9uKGQpe2lmKCF0aGlzLmlzRXZlbnRTaW11bGF0ZWRGcm9tVG91Y2goZCkpe3ZhciBlPXRoaXMucHJlcGFyZUV2ZW50KGQpO2UucmVsYXRlZFRhcmdldD1hLmZpbmRUYXJnZXQoZCksZS50YXJnZXQ9Yy5nZXQodGhpcy5QT0lOVEVSX0lEKSxiLnVwKGUpLHRoaXMuY2xlYW51cE1vdXNlKCl9fSxjbGVhbnVwTW91c2U6ZnVuY3Rpb24oKXtjWyJkZWxldGUiXSh0aGlzLlBPSU5URVJfSUQpfX07YS5tb3VzZUV2ZW50cz1ofSh3aW5kb3cuUG9seW1lckdlc3R1cmVzKSxmdW5jdGlvbihhKXt2YXIgYj1hLmRpc3BhdGNoZXIsYz0oYS50YXJnZXRGaW5kaW5nLmFsbFNoYWRvd3MuYmluZChhLnRhcmdldEZpbmRpbmcpLGIucG9pbnRlcm1hcCksZD0oQXJyYXkucHJvdG90eXBlLm1hcC5jYWxsLmJpbmQoQXJyYXkucHJvdG90eXBlLm1hcCksMjUwMCksZT0yMDAsZj0yMCxnPSExLGg9e2V2ZW50czpbInRvdWNoc3RhcnQiLCJ0b3VjaG1vdmUiLCJ0b3VjaGVuZCIsInRvdWNoY2FuY2VsIl0sZXhwb3NlczpbImRvd24iLCJ1cCIsIm1vdmUiXSxyZWdpc3RlcjpmdW5jdGlvbihhLGMpe2N8fGIubGlzdGVuKGEsdGhpcy5ldmVudHMpfSx1bnJlZ2lzdGVyOmZ1bmN0aW9uKGEpe2IudW5saXN0ZW4oYSx0aGlzLmV2ZW50cyl9LHNjcm9sbFR5cGVzOntFTUlUVEVSOiJub25lIixYU0NST0xMRVI6InBhbi14IixZU0NST0xMRVI6InBhbi15In0sdG91Y2hBY3Rpb25Ub1Njcm9sbFR5cGU6ZnVuY3Rpb24oYSl7dmFyIGI9YSxjPXRoaXMuc2Nyb2xsVHlwZXM7cmV0dXJuIGI9PT1jLkVNSVRURVI/Im5vbmUiOmI9PT1jLlhTQ1JPTExFUj8iWCI6Yj09PWMuWVNDUk9MTEVSPyJZIjoiWFkifSxQT0lOVEVSX1RZUEU6InRvdWNoIixmaXJzdFRvdWNoOm51bGwsaXNQcmltYXJ5VG91Y2g6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZmlyc3RUb3VjaD09PWEuaWRlbnRpZmllcn0sc2V0UHJpbWFyeVRvdWNoOmZ1bmN0aW9uKGEpeygwPT09Yy5wb2ludGVycygpfHwxPT09Yy5wb2ludGVycygpJiZjLmhhcygxKSkmJih0aGlzLmZpcnN0VG91Y2g9YS5pZGVudGlmaWVyLHRoaXMuZmlyc3RYWT17WDphLmNsaWVudFgsWTphLmNsaWVudFl9LHRoaXMuc2Nyb2xsaW5nPW51bGwsdGhpcy5jYW5jZWxSZXNldENsaWNrQ291bnQoKSl9LHJlbW92ZVByaW1hcnlQb2ludGVyOmZ1bmN0aW9uKGEpe2EuaXNQcmltYXJ5JiYodGhpcy5maXJzdFRvdWNoPW51bGwsdGhpcy5maXJzdFhZPW51bGwsdGhpcy5yZXNldENsaWNrQ291bnQoKSl9LGNsaWNrQ291bnQ6MCxyZXNldElkOm51bGwscmVzZXRDbGlja0NvdW50OmZ1bmN0aW9uKCl7dmFyIGE9ZnVuY3Rpb24oKXt0aGlzLmNsaWNrQ291bnQ9MCx0aGlzLnJlc2V0SWQ9bnVsbH0uYmluZCh0aGlzKTt0aGlzLnJlc2V0SWQ9c2V0VGltZW91dChhLGUpfSxjYW5jZWxSZXNldENsaWNrQ291bnQ6ZnVuY3Rpb24oKXt0aGlzLnJlc2V0SWQmJmNsZWFyVGltZW91dCh0aGlzLnJlc2V0SWQpfSx0eXBlVG9CdXR0b25zOmZ1bmN0aW9uKGEpe3ZhciBiPTA7cmV0dXJuKCJ0b3VjaHN0YXJ0Ij09PWF8fCJ0b3VjaG1vdmUiPT09YSkmJihiPTEpLGJ9LGZpbmRUYXJnZXQ6ZnVuY3Rpb24oYixkKXtpZigidG91Y2hzdGFydCI9PT10aGlzLmN1cnJlbnRUb3VjaEV2ZW50LnR5cGUpe2lmKHRoaXMuaXNQcmltYXJ5VG91Y2goYikpe3ZhciBlPXtjbGllbnRYOmIuY2xpZW50WCxjbGllbnRZOmIuY2xpZW50WSxwYXRoOnRoaXMuY3VycmVudFRvdWNoRXZlbnQucGF0aCx0YXJnZXQ6dGhpcy5jdXJyZW50VG91Y2hFdmVudC50YXJnZXR9O3JldHVybiBhLmZpbmRUYXJnZXQoZSl9cmV0dXJuIGEuZmluZFRhcmdldChiKX1yZXR1cm4gYy5nZXQoZCl9LHRvdWNoVG9Qb2ludGVyOmZ1bmN0aW9uKGEpe3ZhciBjPXRoaXMuY3VycmVudFRvdWNoRXZlbnQsZD1iLmNsb25lRXZlbnQoYSksZT1kLnBvaW50ZXJJZD1hLmlkZW50aWZpZXIrMjtkLnRhcmdldD10aGlzLmZpbmRUYXJnZXQoYSxlKSxkLmJ1YmJsZXM9ITAsZC5jYW5jZWxhYmxlPSEwLGQuZGV0YWlsPXRoaXMuY2xpY2tDb3VudCxkLmJ1dHRvbnM9dGhpcy50eXBlVG9CdXR0b25zKGMudHlwZSksZC53aWR0aD1hLndlYmtpdFJhZGl1c1h8fGEucmFkaXVzWHx8MCxkLmhlaWdodD1hLndlYmtpdFJhZGl1c1l8fGEucmFkaXVzWXx8MCxkLnByZXNzdXJlPWEud2Via2l0Rm9yY2V8fGEuZm9yY2V8fC41LGQuaXNQcmltYXJ5PXRoaXMuaXNQcmltYXJ5VG91Y2goYSksZC5wb2ludGVyVHlwZT10aGlzLlBPSU5URVJfVFlQRSxkLl9zb3VyY2U9InRvdWNoIjt2YXIgZj10aGlzO3JldHVybiBkLnByZXZlbnREZWZhdWx0PWZ1bmN0aW9uKCl7Zi5zY3JvbGxpbmc9ITEsZi5maXJzdFhZPW51bGwsYy5wcmV2ZW50RGVmYXVsdCgpfSxkfSxwcm9jZXNzVG91Y2hlczpmdW5jdGlvbihhLGIpe3ZhciBkPWEuY2hhbmdlZFRvdWNoZXM7dGhpcy5jdXJyZW50VG91Y2hFdmVudD1hO2Zvcih2YXIgZSxmLGc9MDtnPGQubGVuZ3RoO2crKyllPWRbZ10sZj10aGlzLnRvdWNoVG9Qb2ludGVyKGUpLCJ0b3VjaHN0YXJ0Ij09PWEudHlwZSYmYy5zZXQoZi5wb2ludGVySWQsZi50YXJnZXQpLGMuaGFzKGYucG9pbnRlcklkKSYmYi5jYWxsKHRoaXMsZiksKCJ0b3VjaGVuZCI9PT1hLnR5cGV8fGEuX2NhbmNlbCkmJnRoaXMuY2xlYW5VcFBvaW50ZXIoZil9LHNob3VsZFNjcm9sbDpmdW5jdGlvbihiKXtpZih0aGlzLmZpcnN0WFkpe3ZhciBjLGQ9YS50YXJnZXRGaW5kaW5nLmZpbmRUb3VjaEFjdGlvbihiKSxlPXRoaXMudG91Y2hBY3Rpb25Ub1Njcm9sbFR5cGUoZCk7aWYoIm5vbmUiPT09ZSljPSExO2Vsc2UgaWYoIlhZIj09PWUpYz0hMDtlbHNle3ZhciBmPWIuY2hhbmdlZFRvdWNoZXNbMF0sZz1lLGg9IlkiPT09ZT8iWCI6IlkiLGk9TWF0aC5hYnMoZlsiY2xpZW50IitnXS10aGlzLmZpcnN0WFlbZ10pLGo9TWF0aC5hYnMoZlsiY2xpZW50IitoXS10aGlzLmZpcnN0WFlbaF0pO2M9aT49an1yZXR1cm4gY319LGZpbmRUb3VjaDpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYyxkPTAsZT1hLmxlbmd0aDtlPmQmJihjPWFbZF0pO2QrKylpZihjLmlkZW50aWZpZXI9PT1iKXJldHVybiEwfSx2YWN1dW1Ub3VjaGVzOmZ1bmN0aW9uKGEpe3ZhciBiPWEudG91Y2hlcztpZihjLnBvaW50ZXJzKCk+PWIubGVuZ3RoKXt2YXIgZD1bXTtjLmZvckVhY2goZnVuY3Rpb24oYSxjKXtpZigxIT09YyYmIXRoaXMuZmluZFRvdWNoKGIsYy0yKSl7dmFyIGU9YTtkLnB1c2goZSl9fSx0aGlzKSxkLmZvckVhY2goZnVuY3Rpb24oYSl7dGhpcy5jYW5jZWwoYSksYy5kZWxldGUoYS5wb2ludGVySWQpfSl9fSx0b3VjaHN0YXJ0OmZ1bmN0aW9uKGEpe3RoaXMudmFjdXVtVG91Y2hlcyhhKSx0aGlzLnNldFByaW1hcnlUb3VjaChhLmNoYW5nZWRUb3VjaGVzWzBdKSx0aGlzLmRlZHVwU3ludGhNb3VzZShhKSx0aGlzLnNjcm9sbGluZ3x8KHRoaXMuY2xpY2tDb3VudCsrLHRoaXMucHJvY2Vzc1RvdWNoZXMoYSx0aGlzLmRvd24pKX0sZG93bjpmdW5jdGlvbihhKXtiLmRvd24oYSl9LHRvdWNobW92ZTpmdW5jdGlvbihhKXtpZihnKWEuY2FuY2VsYWJsZSYmdGhpcy5wcm9jZXNzVG91Y2hlcyhhLHRoaXMubW92ZSk7ZWxzZSBpZih0aGlzLnNjcm9sbGluZyl7aWYodGhpcy5maXJzdFhZKXt2YXIgYj1hLmNoYW5nZWRUb3VjaGVzWzBdLGM9Yi5jbGllbnRYLXRoaXMuZmlyc3RYWS5YLGQ9Yi5jbGllbnRZLXRoaXMuZmlyc3RYWS5ZLGU9TWF0aC5zcXJ0KGMqYytkKmQpO2U+PWYmJih0aGlzLnRvdWNoY2FuY2VsKGEpLHRoaXMuc2Nyb2xsaW5nPSEwLHRoaXMuZmlyc3RYWT1udWxsKX19ZWxzZSBudWxsPT09dGhpcy5zY3JvbGxpbmcmJnRoaXMuc2hvdWxkU2Nyb2xsKGEpP3RoaXMuc2Nyb2xsaW5nPSEwOih0aGlzLnNjcm9sbGluZz0hMSxhLnByZXZlbnREZWZhdWx0KCksdGhpcy5wcm9jZXNzVG91Y2hlcyhhLHRoaXMubW92ZSkpfSxtb3ZlOmZ1bmN0aW9uKGEpe2IubW92ZShhKX0sdG91Y2hlbmQ6ZnVuY3Rpb24oYSl7dGhpcy5kZWR1cFN5bnRoTW91c2UoYSksdGhpcy5wcm9jZXNzVG91Y2hlcyhhLHRoaXMudXApfSx1cDpmdW5jdGlvbihjKXtjLnJlbGF0ZWRUYXJnZXQ9YS5maW5kVGFyZ2V0KGMpLGIudXAoYyl9LGNhbmNlbDpmdW5jdGlvbihhKXtiLmNhbmNlbChhKX0sdG91Y2hjYW5jZWw6ZnVuY3Rpb24oYSl7YS5fY2FuY2VsPSEwLHRoaXMucHJvY2Vzc1RvdWNoZXMoYSx0aGlzLmNhbmNlbCl9LGNsZWFuVXBQb2ludGVyOmZ1bmN0aW9uKGEpe2NbImRlbGV0ZSJdKGEucG9pbnRlcklkKSx0aGlzLnJlbW92ZVByaW1hcnlQb2ludGVyKGEpfSxkZWR1cFN5bnRoTW91c2U6ZnVuY3Rpb24oYil7dmFyIGM9YS5tb3VzZUV2ZW50cy5sYXN0VG91Y2hlcyxlPWIuY2hhbmdlZFRvdWNoZXNbMF07aWYodGhpcy5pc1ByaW1hcnlUb3VjaChlKSl7dmFyIGY9e3g6ZS5jbGllbnRYLHk6ZS5jbGllbnRZfTtjLnB1c2goZik7dmFyIGc9ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLmluZGV4T2YoYik7Yz4tMSYmYS5zcGxpY2UoYywxKX0uYmluZChudWxsLGMsZik7c2V0VGltZW91dChnLGQpfX19O2EudG91Y2hFdmVudHM9aH0od2luZG93LlBvbHltZXJHZXN0dXJlcyksZnVuY3Rpb24oYSl7dmFyIGI9YS5kaXNwYXRjaGVyLGM9Yi5wb2ludGVybWFwLGQ9d2luZG93Lk1TUG9pbnRlckV2ZW50JiYibnVtYmVyIj09dHlwZW9mIHdpbmRvdy5NU1BvaW50ZXJFdmVudC5NU1BPSU5URVJfVFlQRV9NT1VTRSxlPXtldmVudHM6WyJNU1BvaW50ZXJEb3duIiwiTVNQb2ludGVyTW92ZSIsIk1TUG9pbnRlclVwIiwiTVNQb2ludGVyQ2FuY2VsIl0scmVnaXN0ZXI6ZnVuY3Rpb24oYSl7Yi5saXN0ZW4oYSx0aGlzLmV2ZW50cyl9LHVucmVnaXN0ZXI6ZnVuY3Rpb24oYSl7Yi51bmxpc3RlbihhLHRoaXMuZXZlbnRzKX0sUE9JTlRFUl9UWVBFUzpbIiIsInVuYXZhaWxhYmxlIiwidG91Y2giLCJwZW4iLCJtb3VzZSJdLHByZXBhcmVFdmVudDpmdW5jdGlvbihhKXt2YXIgYz1hO3JldHVybiBjPWIuY2xvbmVFdmVudChhKSxkJiYoYy5wb2ludGVyVHlwZT10aGlzLlBPSU5URVJfVFlQRVNbYS5wb2ludGVyVHlwZV0pLGMuX3NvdXJjZT0ibXMiLGN9LGNsZWFudXA6ZnVuY3Rpb24oYSl7Y1siZGVsZXRlIl0oYSl9LE1TUG9pbnRlckRvd246ZnVuY3Rpb24oZCl7dmFyIGU9dGhpcy5wcmVwYXJlRXZlbnQoZCk7ZS50YXJnZXQ9YS5maW5kVGFyZ2V0KGQpLGMuc2V0KGQucG9pbnRlcklkLGUudGFyZ2V0KSxiLmRvd24oZSl9LE1TUG9pbnRlck1vdmU6ZnVuY3Rpb24oYSl7dmFyIGQ9Yy5nZXQoYS5wb2ludGVySWQpO2lmKGQpe3ZhciBlPXRoaXMucHJlcGFyZUV2ZW50KGEpO2UudGFyZ2V0PWQsYi5tb3ZlKGUpfX0sTVNQb2ludGVyVXA6ZnVuY3Rpb24oZCl7dmFyIGU9dGhpcy5wcmVwYXJlRXZlbnQoZCk7ZS5yZWxhdGVkVGFyZ2V0PWEuZmluZFRhcmdldChkKSxlLnRhcmdldD1jLmdldChlLnBvaW50ZXJJZCksYi51cChlKSx0aGlzLmNsZWFudXAoZC5wb2ludGVySWQpfSxNU1BvaW50ZXJDYW5jZWw6ZnVuY3Rpb24oZCl7dmFyIGU9dGhpcy5wcmVwYXJlRXZlbnQoZCk7ZS5yZWxhdGVkVGFyZ2V0PWEuZmluZFRhcmdldChkKSxlLnRhcmdldD1jLmdldChlLnBvaW50ZXJJZCksYi5jYW5jZWwoZSksdGhpcy5jbGVhbnVwKGQucG9pbnRlcklkKX19O2EubXNFdmVudHM9ZX0od2luZG93LlBvbHltZXJHZXN0dXJlcyksZnVuY3Rpb24oYSl7dmFyIGI9YS5kaXNwYXRjaGVyLGM9Yi5wb2ludGVybWFwLGQ9e2V2ZW50czpbInBvaW50ZXJkb3duIiwicG9pbnRlcm1vdmUiLCJwb2ludGVydXAiLCJwb2ludGVyY2FuY2VsIl0scHJlcGFyZUV2ZW50OmZ1bmN0aW9uKGEpe3ZhciBjPWIuY2xvbmVFdmVudChhKTtyZXR1cm4gYy5fc291cmNlPSJwb2ludGVyIixjfSxyZWdpc3RlcjpmdW5jdGlvbihhKXtiLmxpc3RlbihhLHRoaXMuZXZlbnRzKX0sdW5yZWdpc3RlcjpmdW5jdGlvbihhKXtiLnVubGlzdGVuKGEsdGhpcy5ldmVudHMpfSxjbGVhbnVwOmZ1bmN0aW9uKGEpe2NbImRlbGV0ZSJdKGEpfSxwb2ludGVyZG93bjpmdW5jdGlvbihkKXt2YXIgZT10aGlzLnByZXBhcmVFdmVudChkKTtlLnRhcmdldD1hLmZpbmRUYXJnZXQoZCksYy5zZXQoZS5wb2ludGVySWQsZS50YXJnZXQpLGIuZG93bihlKX0scG9pbnRlcm1vdmU6ZnVuY3Rpb24oYSl7dmFyIGQ9Yy5nZXQoYS5wb2ludGVySWQpO2lmKGQpe3ZhciBlPXRoaXMucHJlcGFyZUV2ZW50KGEpO2UudGFyZ2V0PWQsYi5tb3ZlKGUpfX0scG9pbnRlcnVwOmZ1bmN0aW9uKGQpe3ZhciBlPXRoaXMucHJlcGFyZUV2ZW50KGQpO2UucmVsYXRlZFRhcmdldD1hLmZpbmRUYXJnZXQoZCksZS50YXJnZXQ9Yy5nZXQoZS5wb2ludGVySWQpLGIudXAoZSksdGhpcy5jbGVhbnVwKGQucG9pbnRlcklkKX0scG9pbnRlcmNhbmNlbDpmdW5jdGlvbihkKXt2YXIgZT10aGlzLnByZXBhcmVFdmVudChkKTtlLnJlbGF0ZWRUYXJnZXQ9YS5maW5kVGFyZ2V0KGQpLGUudGFyZ2V0PWMuZ2V0KGUucG9pbnRlcklkKSxiLmNhbmNlbChlKSx0aGlzLmNsZWFudXAoZC5wb2ludGVySWQpfX07YS5wb2ludGVyRXZlbnRzPWR9KHdpbmRvdy5Qb2x5bWVyR2VzdHVyZXMpLGZ1bmN0aW9uKGEpe3ZhciBiPWEuZGlzcGF0Y2hlcixjPXdpbmRvdy5uYXZpZ2F0b3I7aWYod2luZG93LlBvaW50ZXJFdmVudCliLnJlZ2lzdGVyU291cmNlKCJwb2ludGVyIixhLnBvaW50ZXJFdmVudHMpO2Vsc2UgaWYoYy5tc1BvaW50ZXJFbmFibGVkKWIucmVnaXN0ZXJTb3VyY2UoIm1zIixhLm1zRXZlbnRzKTtlbHNlIGlmKGIucmVnaXN0ZXJTb3VyY2UoIm1vdXNlIixhLm1vdXNlRXZlbnRzKSx2b2lkIDAhPT13aW5kb3cub250b3VjaHN0YXJ0KXtiLnJlZ2lzdGVyU291cmNlKCJ0b3VjaCIsYS50b3VjaEV2ZW50cyk7dmFyIGQ9Yy51c2VyQWdlbnQubWF0Y2goIlNhZmFyaSIpJiYhYy51c2VyQWdlbnQubWF0Y2goIkNocm9tZSIpO2QmJmRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcigidG91Y2hzdGFydCIsZnVuY3Rpb24oKXt9KX1iLnJlZ2lzdGVyKGRvY3VtZW50LCEwKX0od2luZG93LlBvbHltZXJHZXN0dXJlcyksZnVuY3Rpb24oYSl7dmFyIGI9YS5kaXNwYXRjaGVyLGM9YS5ldmVudEZhY3RvcnksZD1uZXcgYS5Qb2ludGVyTWFwLGU9e2V2ZW50czpbImRvd24iLCJtb3ZlIiwidXAiXSxleHBvc2VzOlsidHJhY2tzdGFydCIsInRyYWNrIiwidHJhY2t4IiwidHJhY2t5IiwidHJhY2tlbmQiXSxkZWZhdWx0QWN0aW9uczp7dHJhY2s6Im5vbmUiLHRyYWNreDoicGFuLXkiLHRyYWNreToicGFuLXgifSxXSUdHTEVfVEhSRVNIT0xEOjQsY2xhbXBEaXI6ZnVuY3Rpb24oYSl7cmV0dXJuIGE+MD8xOi0xfSxjYWxjUG9zaXRpb25EZWx0YTpmdW5jdGlvbihhLGIpe3ZhciBjPTAsZD0wO3JldHVybiBhJiZiJiYoYz1iLnBhZ2VYLWEucGFnZVgsZD1iLnBhZ2VZLWEucGFnZVkpLHt4OmMseTpkfX0sZmlyZVRyYWNrOmZ1bmN0aW9uKGEsYixkKXt2YXIgZT1kLGY9dGhpcy5jYWxjUG9zaXRpb25EZWx0YShlLmRvd25FdmVudCxiKSxnPXRoaXMuY2FsY1Bvc2l0aW9uRGVsdGEoZS5sYXN0TW92ZUV2ZW50LGIpO2lmKGcueCllLnhEaXJlY3Rpb249dGhpcy5jbGFtcERpcihnLngpO2Vsc2UgaWYoInRyYWNreCI9PT1hKXJldHVybjtpZihnLnkpZS55RGlyZWN0aW9uPXRoaXMuY2xhbXBEaXIoZy55KTtlbHNlIGlmKCJ0cmFja3kiPT09YSlyZXR1cm47dmFyIGg9e2J1YmJsZXM6ITAsY2FuY2VsYWJsZTohMCx0cmFja0luZm86ZS50cmFja0luZm8scmVsYXRlZFRhcmdldDpiLnJlbGF0ZWRUYXJnZXQscG9pbnRlclR5cGU6Yi5wb2ludGVyVHlwZSxwb2ludGVySWQ6Yi5wb2ludGVySWQsX3NvdXJjZToidHJhY2sifTsidHJhY2t5IiE9PWEmJihoLng9Yi54LGguZHg9Zi54LGguZGR4PWcueCxoLmNsaWVudFg9Yi5jbGllbnRYLGgucGFnZVg9Yi5wYWdlWCxoLnNjcmVlblg9Yi5zY3JlZW5YLGgueERpcmVjdGlvbj1lLnhEaXJlY3Rpb24pLCJ0cmFja3giIT09YSYmKGguZHk9Zi55LGguZGR5PWcueSxoLnk9Yi55LGguY2xpZW50WT1iLmNsaWVudFksaC5wYWdlWT1iLnBhZ2VZLGguc2NyZWVuWT1iLnNjcmVlblksaC55RGlyZWN0aW9uPWUueURpcmVjdGlvbik7dmFyIGk9Yy5tYWtlR2VzdHVyZUV2ZW50KGEsaCk7ZS5kb3duVGFyZ2V0LmRpc3BhdGNoRXZlbnQoaSl9LGRvd246ZnVuY3Rpb24oYSl7aWYoYS5pc1ByaW1hcnkmJigibW91c2UiPT09YS5wb2ludGVyVHlwZT8xPT09YS5idXR0b25zOiEwKSl7dmFyIGI9e2Rvd25FdmVudDphLGRvd25UYXJnZXQ6YS50YXJnZXQsdHJhY2tJbmZvOnt9LGxhc3RNb3ZlRXZlbnQ6bnVsbCx4RGlyZWN0aW9uOjAseURpcmVjdGlvbjowLHRyYWNraW5nOiExfTtkLnNldChhLnBvaW50ZXJJZCxiKX19LG1vdmU6ZnVuY3Rpb24oYSl7dmFyIGI9ZC5nZXQoYS5wb2ludGVySWQpO2lmKGIpe2lmKCFiLnRyYWNraW5nKXt2YXIgYz10aGlzLmNhbGNQb3NpdGlvbkRlbHRhKGIuZG93bkV2ZW50LGEpLGU9Yy54KmMueCtjLnkqYy55O2U+dGhpcy5XSUdHTEVfVEhSRVNIT0xEJiYoYi50cmFja2luZz0hMCxiLmxhc3RNb3ZlRXZlbnQ9Yi5kb3duRXZlbnQsdGhpcy5maXJlVHJhY2soInRyYWNrc3RhcnQiLGEsYikpfWIudHJhY2tpbmcmJih0aGlzLmZpcmVUcmFjaygidHJhY2siLGEsYiksdGhpcy5maXJlVHJhY2soInRyYWNreCIsYSxiKSx0aGlzLmZpcmVUcmFjaygidHJhY2t5IixhLGIpKSxiLmxhc3RNb3ZlRXZlbnQ9YX19LHVwOmZ1bmN0aW9uKGEpe3ZhciBiPWQuZ2V0KGEucG9pbnRlcklkKTtiJiYoYi50cmFja2luZyYmdGhpcy5maXJlVHJhY2soInRyYWNrZW5kIixhLGIpLGQuZGVsZXRlKGEucG9pbnRlcklkKSl9fTtiLnJlZ2lzdGVyR2VzdHVyZSgidHJhY2siLGUpfSh3aW5kb3cuUG9seW1lckdlc3R1cmVzKSxmdW5jdGlvbihhKXt2YXIgYj1hLmRpc3BhdGNoZXIsYz1hLmV2ZW50RmFjdG9yeSxkPXtIT0xEX0RFTEFZOjIwMCxXSUdHTEVfVEhSRVNIT0xEOjE2LGV2ZW50czpbImRvd24iLCJtb3ZlIiwidXAiXSxleHBvc2VzOlsiaG9sZCIsImhvbGRwdWxzZSIsInJlbGVhc2UiXSxoZWxkUG9pbnRlcjpudWxsLGhvbGRKb2I6bnVsbCxwdWxzZTpmdW5jdGlvbigpe3ZhciBhPURhdGUubm93KCktdGhpcy5oZWxkUG9pbnRlci50aW1lU3RhbXAsYj10aGlzLmhlbGQ/ImhvbGRwdWxzZSI6ImhvbGQiO3RoaXMuZmlyZUhvbGQoYixhKSx0aGlzLmhlbGQ9ITB9LGNhbmNlbDpmdW5jdGlvbigpe2NsZWFySW50ZXJ2YWwodGhpcy5ob2xkSm9iKSx0aGlzLmhlbGQmJnRoaXMuZmlyZUhvbGQoInJlbGVhc2UiKSx0aGlzLmhlbGQ9ITEsdGhpcy5oZWxkUG9pbnRlcj1udWxsLHRoaXMudGFyZ2V0PW51bGwsdGhpcy5ob2xkSm9iPW51bGx9LGRvd246ZnVuY3Rpb24oYSl7YS5pc1ByaW1hcnkmJiF0aGlzLmhlbGRQb2ludGVyJiYodGhpcy5oZWxkUG9pbnRlcj1hLHRoaXMudGFyZ2V0PWEudGFyZ2V0LHRoaXMuaG9sZEpvYj1zZXRJbnRlcnZhbCh0aGlzLnB1bHNlLmJpbmQodGhpcyksdGhpcy5IT0xEX0RFTEFZKSl9LHVwOmZ1bmN0aW9uKGEpe3RoaXMuaGVsZFBvaW50ZXImJnRoaXMuaGVsZFBvaW50ZXIucG9pbnRlcklkPT09YS5wb2ludGVySWQmJnRoaXMuY2FuY2VsKCl9LG1vdmU6ZnVuY3Rpb24oYSl7aWYodGhpcy5oZWxkUG9pbnRlciYmdGhpcy5oZWxkUG9pbnRlci5wb2ludGVySWQ9PT1hLnBvaW50ZXJJZCl7dmFyIGI9YS5jbGllbnRYLXRoaXMuaGVsZFBvaW50ZXIuY2xpZW50WCxjPWEuY2xpZW50WS10aGlzLmhlbGRQb2ludGVyLmNsaWVudFk7YipiK2MqYz50aGlzLldJR0dMRV9USFJFU0hPTEQmJnRoaXMuY2FuY2VsKCl9fSxmaXJlSG9sZDpmdW5jdGlvbihhLGIpe3ZhciBkPXtidWJibGVzOiEwLGNhbmNlbGFibGU6ITAscG9pbnRlclR5cGU6dGhpcy5oZWxkUG9pbnRlci5wb2ludGVyVHlwZSxwb2ludGVySWQ6dGhpcy5oZWxkUG9pbnRlci5wb2ludGVySWQseDp0aGlzLmhlbGRQb2ludGVyLmNsaWVudFgseTp0aGlzLmhlbGRQb2ludGVyLmNsaWVudFksX3NvdXJjZToiaG9sZCJ9O2ImJihkLmhvbGRUaW1lPWIpO3ZhciBlPWMubWFrZUdlc3R1cmVFdmVudChhLGQpO3RoaXMudGFyZ2V0LmRpc3BhdGNoRXZlbnQoZSl9fTtiLnJlZ2lzdGVyR2VzdHVyZSgiaG9sZCIsZCl9KHdpbmRvdy5Qb2x5bWVyR2VzdHVyZXMpLGZ1bmN0aW9uKGEpe3ZhciBiPWEuZGlzcGF0Y2hlcixjPWEuZXZlbnRGYWN0b3J5LGQ9bmV3IGEuUG9pbnRlck1hcCxlPXtldmVudHM6WyJkb3duIiwidXAiXSxleHBvc2VzOlsidGFwIl0sZG93bjpmdW5jdGlvbihhKXthLmlzUHJpbWFyeSYmIWEudGFwUHJldmVudGVkJiZkLnNldChhLnBvaW50ZXJJZCx7dGFyZ2V0OmEudGFyZ2V0LGJ1dHRvbnM6YS5idXR0b25zLHg6YS5jbGllbnRYLHk6YS5jbGllbnRZfSl9LHNob3VsZFRhcDpmdW5jdGlvbihhLGIpe3JldHVybiJtb3VzZSI9PT1hLnBvaW50ZXJUeXBlPzE9PT1iLmJ1dHRvbnM6IWEudGFwUHJldmVudGVkfSx1cDpmdW5jdGlvbihiKXt2YXIgZT1kLmdldChiLnBvaW50ZXJJZCk7aWYoZSYmdGhpcy5zaG91bGRUYXAoYixlKSl7dmFyIGY9YS50YXJnZXRGaW5kaW5nLkxDQShlLnRhcmdldCxiLnJlbGF0ZWRUYXJnZXQpO2lmKGYpe3ZhciBnPWMubWFrZUdlc3R1cmVFdmVudCgidGFwIix7YnViYmxlczohMCxjYW5jZWxhYmxlOiEwLHg6Yi5jbGllbnRYLHk6Yi5jbGllbnRZLGRldGFpbDpiLmRldGFpbCxwb2ludGVyVHlwZTpiLnBvaW50ZXJUeXBlLHBvaW50ZXJJZDpiLnBvaW50ZXJJZCxhbHRLZXk6Yi5hbHRLZXksY3RybEtleTpiLmN0cmxLZXksbWV0YUtleTpiLm1ldGFLZXksc2hpZnRLZXk6Yi5zaGlmdEtleSxfc291cmNlOiJ0YXAifSk7Zi5kaXNwYXRjaEV2ZW50KGcpfX1kLmRlbGV0ZShiLnBvaW50ZXJJZCl9fTtjLnByZXZlbnRUYXA9ZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKCl7YS50YXBQcmV2ZW50ZWQ9ITAsZC5kZWxldGUoYS5wb2ludGVySWQpfX0sYi5yZWdpc3Rlckdlc3R1cmUoInRhcCIsZSl9KHdpbmRvdy5Qb2x5bWVyR2VzdHVyZXMpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEsYil7aWYoIWEpdGhyb3cgbmV3IEVycm9yKCJBU1NFUlQ6ICIrYil9ZnVuY3Rpb24gYyhhKXtyZXR1cm4gYT49NDgmJjU3Pj1hfWZ1bmN0aW9uIGQoYSl7cmV0dXJuIDMyPT09YXx8OT09PWF8fDExPT09YXx8MTI9PT1hfHwxNjA9PT1hfHxhPj01NzYwJiYiXHUxNjgwXHUxODBlXHUyMDAwXHUyMDAxXHUyMDAyXHUyMDAzXHUyMDA0XHUyMDA1XHUyMDA2XHUyMDA3XHUyMDA4XHUyMDA5XHUyMDBhXHUyMDJmXHUyMDVmXHUzMDAwXHVmZWZmIi5pbmRleE9mKFN0cmluZy5mcm9tQ2hhckNvZGUoYSkpPjB9ZnVuY3Rpb24gZShhKXtyZXR1cm4gMTA9PT1hfHwxMz09PWF8fDgyMzI9PT1hfHw4MjMzPT09YX1mdW5jdGlvbiBmKGEpe3JldHVybiAzNj09PWF8fDk1PT09YXx8YT49NjUmJjkwPj1hfHxhPj05NyYmMTIyPj1hfWZ1bmN0aW9uIGcoYSl7cmV0dXJuIDM2PT09YXx8OTU9PT1hfHxhPj02NSYmOTA+PWF8fGE+PTk3JiYxMjI+PWF8fGE+PTQ4JiY1Nz49YX1mdW5jdGlvbiBoKGEpe3JldHVybiJ0aGlzIj09PWF9ZnVuY3Rpb24gaSgpe2Zvcig7WT5YJiZkKFcuY2hhckNvZGVBdChYKSk7KSsrWH1mdW5jdGlvbiBqKCl7dmFyIGEsYjtmb3IoYT1YKys7WT5YJiYoYj1XLmNoYXJDb2RlQXQoWCksZyhiKSk7KSsrWDtyZXR1cm4gVy5zbGljZShhLFgpfWZ1bmN0aW9uIGsoKXt2YXIgYSxiLGM7cmV0dXJuIGE9WCxiPWooKSxjPTE9PT1iLmxlbmd0aD9TLklkZW50aWZpZXI6aChiKT9TLktleXdvcmQ6Im51bGwiPT09Yj9TLk51bGxMaXRlcmFsOiJ0cnVlIj09PWJ8fCJmYWxzZSI9PT1iP1MuQm9vbGVhbkxpdGVyYWw6Uy5JZGVudGlmaWVyLHt0eXBlOmMsdmFsdWU6YixyYW5nZTpbYSxYXX19ZnVuY3Rpb24gbCgpe3ZhciBhLGIsYz1YLGQ9Vy5jaGFyQ29kZUF0KFgpLGU9V1tYXTtzd2l0Y2goZCl7Y2FzZSA0NjpjYXNlIDQwOmNhc2UgNDE6Y2FzZSA1OTpjYXNlIDQ0OmNhc2UgMTIzOmNhc2UgMTI1OmNhc2UgOTE6Y2FzZSA5MzpjYXNlIDU4OmNhc2UgNjM6cmV0dXJuKytYLHt0eXBlOlMuUHVuY3R1YXRvcix2YWx1ZTpTdHJpbmcuZnJvbUNoYXJDb2RlKGQpLHJhbmdlOltjLFhdfTtkZWZhdWx0OmlmKGE9Vy5jaGFyQ29kZUF0KFgrMSksNjE9PT1hKXN3aXRjaChkKXtjYXNlIDM3OmNhc2UgMzg6Y2FzZSA0MjpjYXNlIDQzOmNhc2UgNDU6Y2FzZSA0NzpjYXNlIDYwOmNhc2UgNjI6Y2FzZSAxMjQ6cmV0dXJuIFgrPTIse3R5cGU6Uy5QdW5jdHVhdG9yLHZhbHVlOlN0cmluZy5mcm9tQ2hhckNvZGUoZCkrU3RyaW5nLmZyb21DaGFyQ29kZShhKSxyYW5nZTpbYyxYXX07Y2FzZSAzMzpjYXNlIDYxOnJldHVybiBYKz0yLDYxPT09Vy5jaGFyQ29kZUF0KFgpJiYrK1gse3R5cGU6Uy5QdW5jdHVhdG9yLHZhbHVlOlcuc2xpY2UoYyxYKSxyYW5nZTpbYyxYXX19fXJldHVybiBiPVdbWCsxXSxlPT09YiYmIiZ8Ii5pbmRleE9mKGUpPj0wPyhYKz0yLHt0eXBlOlMuUHVuY3R1YXRvcix2YWx1ZTplK2IscmFuZ2U6W2MsWF19KToiPD49ISstKiUmfF4vIi5pbmRleE9mKGUpPj0wPygrK1gse3R5cGU6Uy5QdW5jdHVhdG9yLHZhbHVlOmUscmFuZ2U6W2MsWF19KTp2b2lkIHMoe30sVi5VbmV4cGVjdGVkVG9rZW4sIklMTEVHQUwiKX1mdW5jdGlvbiBtKCl7dmFyIGEsZCxlO2lmKGU9V1tYXSxiKGMoZS5jaGFyQ29kZUF0KDApKXx8Ii4iPT09ZSwiTnVtZXJpYyBsaXRlcmFsIG11c3Qgc3RhcnQgd2l0aCBhIGRlY2ltYWwgZGlnaXQgb3IgYSBkZWNpbWFsIHBvaW50IiksZD1YLGE9IiIsIi4iIT09ZSl7Zm9yKGE9V1tYKytdLGU9V1tYXSwiMCI9PT1hJiZlJiZjKGUuY2hhckNvZGVBdCgwKSkmJnMoe30sVi5VbmV4cGVjdGVkVG9rZW4sIklMTEVHQUwiKTtjKFcuY2hhckNvZGVBdChYKSk7KWErPVdbWCsrXTtlPVdbWF19aWYoIi4iPT09ZSl7Zm9yKGErPVdbWCsrXTtjKFcuY2hhckNvZGVBdChYKSk7KWErPVdbWCsrXTtlPVdbWF19aWYoImUiPT09ZXx8IkUiPT09ZSlpZihhKz1XW1grK10sZT1XW1hdLCgiKyI9PT1lfHwiLSI9PT1lKSYmKGErPVdbWCsrXSksYyhXLmNoYXJDb2RlQXQoWCkpKWZvcig7YyhXLmNoYXJDb2RlQXQoWCkpOylhKz1XW1grK107ZWxzZSBzKHt9LFYuVW5leHBlY3RlZFRva2VuLCJJTExFR0FMIik7cmV0dXJuIGYoVy5jaGFyQ29kZUF0KFgpKSYmcyh7fSxWLlVuZXhwZWN0ZWRUb2tlbiwiSUxMRUdBTCIpLHt0eXBlOlMuTnVtZXJpY0xpdGVyYWwsdmFsdWU6cGFyc2VGbG9hdChhKSxyYW5nZTpbZCxYXX19ZnVuY3Rpb24gbigpe3ZhciBhLGMsZCxmPSIiLGc9ITE7Zm9yKGE9V1tYXSxiKCInIj09PWF8fCciJz09PWEsIlN0cmluZyBsaXRlcmFsIG11c3Qgc3RhcnRzIHdpdGggYSBxdW90ZSIpLGM9WCwrK1g7WT5YOyl7aWYoZD1XW1grK10sZD09PWEpe2E9IiI7YnJlYWt9aWYoIlxcIj09PWQpaWYoZD1XW1grK10sZCYmZShkLmNoYXJDb2RlQXQoMCkpKSJcciI9PT1kJiYiXG4iPT09V1tYXSYmKytYO2Vsc2Ugc3dpdGNoKGQpe2Nhc2UibiI6Zis9IlxuIjticmVhaztjYXNlInIiOmYrPSJcciI7YnJlYWs7Y2FzZSJ0IjpmKz0iCSI7YnJlYWs7Y2FzZSJiIjpmKz0iXGIiO2JyZWFrO2Nhc2UiZiI6Zis9IlxmIjticmVhaztjYXNlInYiOmYrPSILIjticmVhaztkZWZhdWx0OmYrPWR9ZWxzZXtpZihlKGQuY2hhckNvZGVBdCgwKSkpYnJlYWs7Zis9ZH19cmV0dXJuIiIhPT1hJiZzKHt9LFYuVW5leHBlY3RlZFRva2VuLCJJTExFR0FMIikse3R5cGU6Uy5TdHJpbmdMaXRlcmFsLHZhbHVlOmYsb2N0YWw6ZyxyYW5nZTpbYyxYXX19ZnVuY3Rpb24gbyhhKXtyZXR1cm4gYS50eXBlPT09Uy5JZGVudGlmaWVyfHxhLnR5cGU9PT1TLktleXdvcmR8fGEudHlwZT09PVMuQm9vbGVhbkxpdGVyYWx8fGEudHlwZT09PVMuTnVsbExpdGVyYWx9ZnVuY3Rpb24gcCgpe3ZhciBhO3JldHVybiBpKCksWD49WT97dHlwZTpTLkVPRixyYW5nZTpbWCxYXX06KGE9Vy5jaGFyQ29kZUF0KFgpLDQwPT09YXx8NDE9PT1hfHw1OD09PWE/bCgpOjM5PT09YXx8MzQ9PT1hP24oKTpmKGEpP2soKTo0Nj09PWE/YyhXLmNoYXJDb2RlQXQoWCsxKSk/bSgpOmwoKTpjKGEpP20oKTpsKCkpfWZ1bmN0aW9uIHEoKXt2YXIgYTtyZXR1cm4gYT0kLFg9YS5yYW5nZVsxXSwkPXAoKSxYPWEucmFuZ2VbMV0sYX1mdW5jdGlvbiByKCl7dmFyIGE7YT1YLCQ9cCgpLFg9YX1mdW5jdGlvbiBzKGEsYyl7dmFyIGQsZT1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMiksZj1jLnJlcGxhY2UoLyUoXGQpL2csZnVuY3Rpb24oYSxjKXtyZXR1cm4gYihjPGUubGVuZ3RoLCJNZXNzYWdlIHJlZmVyZW5jZSBtdXN0IGJlIGluIHJhbmdlIiksZVtjXX0pO3Rocm93IGQ9bmV3IEVycm9yKGYpLGQuaW5kZXg9WCxkLmRlc2NyaXB0aW9uPWYsZH1mdW5jdGlvbiB0KGEpe3MoYSxWLlVuZXhwZWN0ZWRUb2tlbixhLnZhbHVlKX1mdW5jdGlvbiB1KGEpe3ZhciBiPXEoKTsoYi50eXBlIT09Uy5QdW5jdHVhdG9yfHxiLnZhbHVlIT09YSkmJnQoYil9ZnVuY3Rpb24gdihhKXtyZXR1cm4gJC50eXBlPT09Uy5QdW5jdHVhdG9yJiYkLnZhbHVlPT09YX1mdW5jdGlvbiB3KGEpe3JldHVybiAkLnR5cGU9PT1TLktleXdvcmQmJiQudmFsdWU9PT1hfWZ1bmN0aW9uIHgoKXt2YXIgYT1bXTtmb3IodSgiWyIpOyF2KCJdIik7KXYoIiwiKT8ocSgpLGEucHVzaChudWxsKSk6KGEucHVzaChiYigpKSx2KCJdIil8fHUoIiwiKSk7cmV0dXJuIHUoIl0iKSxaLmNyZWF0ZUFycmF5RXhwcmVzc2lvbihhKX1mdW5jdGlvbiB5KCl7dmFyIGE7cmV0dXJuIGkoKSxhPXEoKSxhLnR5cGU9PT1TLlN0cmluZ0xpdGVyYWx8fGEudHlwZT09PVMuTnVtZXJpY0xpdGVyYWw/Wi5jcmVhdGVMaXRlcmFsKGEpOlouY3JlYXRlSWRlbnRpZmllcihhLnZhbHVlKX1mdW5jdGlvbiB6KCl7dmFyIGEsYjtyZXR1cm4gYT0kLGkoKSwoYS50eXBlPT09Uy5FT0Z8fGEudHlwZT09PVMuUHVuY3R1YXRvcikmJnQoYSksYj15KCksdSgiOiIpLFouY3JlYXRlUHJvcGVydHkoImluaXQiLGIsYmIoKSl9ZnVuY3Rpb24gQSgpe3ZhciBhPVtdO2Zvcih1KCJ7Iik7IXYoIn0iKTspYS5wdXNoKHooKSksdigifSIpfHx1KCIsIik7cmV0dXJuIHUoIn0iKSxaLmNyZWF0ZU9iamVjdEV4cHJlc3Npb24oYSl9ZnVuY3Rpb24gQigpe3ZhciBhO3JldHVybiB1KCIoIiksYT1iYigpLHUoIikiKSxhfWZ1bmN0aW9uIEMoKXt2YXIgYSxiLGM7cmV0dXJuIHYoIigiKT9CKCk6KGE9JC50eXBlLGE9PT1TLklkZW50aWZpZXI/Yz1aLmNyZWF0ZUlkZW50aWZpZXIocSgpLnZhbHVlKTphPT09Uy5TdHJpbmdMaXRlcmFsfHxhPT09Uy5OdW1lcmljTGl0ZXJhbD9jPVouY3JlYXRlTGl0ZXJhbChxKCkpOmE9PT1TLktleXdvcmQ/dygidGhpcyIpJiYocSgpLGM9Wi5jcmVhdGVUaGlzRXhwcmVzc2lvbigpKTphPT09Uy5Cb29sZWFuTGl0ZXJhbD8oYj1xKCksYi52YWx1ZT0idHJ1ZSI9PT1iLnZhbHVlLGM9Wi5jcmVhdGVMaXRlcmFsKGIpKTphPT09Uy5OdWxsTGl0ZXJhbD8oYj1xKCksYi52YWx1ZT1udWxsLGM9Wi5jcmVhdGVMaXRlcmFsKGIpKTp2KCJbIik/Yz14KCk6digieyIpJiYoYz1BKCkpLGM/Yzp2b2lkIHQocSgpKSl9ZnVuY3Rpb24gRCgpe3ZhciBhPVtdO2lmKHUoIigiKSwhdigiKSIpKWZvcig7WT5YJiYoYS5wdXNoKGJiKCkpLCF2KCIpIikpOyl1KCIsIik7cmV0dXJuIHUoIikiKSxhfWZ1bmN0aW9uIEUoKXt2YXIgYTtyZXR1cm4gYT1xKCksbyhhKXx8dChhKSxaLmNyZWF0ZUlkZW50aWZpZXIoYS52YWx1ZSl9ZnVuY3Rpb24gRigpe3JldHVybiB1KCIuIiksRSgpfWZ1bmN0aW9uIEcoKXt2YXIgYTtyZXR1cm4gdSgiWyIpLGE9YmIoKSx1KCJdIiksYX1mdW5jdGlvbiBIKCl7dmFyIGEsYixjO2ZvcihhPUMoKTs7KWlmKHYoIlsiKSljPUcoKSxhPVouY3JlYXRlTWVtYmVyRXhwcmVzc2lvbigiWyIsYSxjKTtlbHNlIGlmKHYoIi4iKSljPUYoKSxhPVouY3JlYXRlTWVtYmVyRXhwcmVzc2lvbigiLiIsYSxjKTtlbHNle2lmKCF2KCIoIikpYnJlYWs7Yj1EKCksYT1aLmNyZWF0ZUNhbGxFeHByZXNzaW9uKGEsYil9cmV0dXJuIGF9ZnVuY3Rpb24gSSgpe3ZhciBhLGI7cmV0dXJuICQudHlwZSE9PVMuUHVuY3R1YXRvciYmJC50eXBlIT09Uy5LZXl3b3JkP2I9YWIoKTp2KCIrIil8fHYoIi0iKXx8digiISIpPyhhPXEoKSxiPUkoKSxiPVouY3JlYXRlVW5hcnlFeHByZXNzaW9uKGEudmFsdWUsYikpOncoImRlbGV0ZSIpfHx3KCJ2b2lkIil8fHcoInR5cGVvZiIpP3Moe30sVi5VbmV4cGVjdGVkVG9rZW4pOmI9YWIoKSxifWZ1bmN0aW9uIEooYSl7dmFyIGI9MDtpZihhLnR5cGUhPT1TLlB1bmN0dWF0b3ImJmEudHlwZSE9PVMuS2V5d29yZClyZXR1cm4gMDtzd2l0Y2goYS52YWx1ZSl7Y2FzZSJ8fCI6Yj0xO2JyZWFrO2Nhc2UiJiYiOmI9MjticmVhaztjYXNlIj09IjpjYXNlIiE9IjpjYXNlIj09PSI6Y2FzZSIhPT0iOmI9NjticmVhaztjYXNlIjwiOmNhc2UiPiI6Y2FzZSI8PSI6Y2FzZSI+PSI6Y2FzZSJpbnN0YW5jZW9mIjpiPTc7YnJlYWs7Y2FzZSJpbiI6Yj03O2JyZWFrO2Nhc2UiKyI6Y2FzZSItIjpiPTk7YnJlYWs7Y2FzZSIqIjpjYXNlIi8iOmNhc2UiJSI6Yj0xMX1yZXR1cm4gYn1mdW5jdGlvbiBLKCl7dmFyIGEsYixjLGQsZSxmLGcsaDtpZihnPUkoKSxiPSQsYz1KKGIpLDA9PT1jKXJldHVybiBnO2ZvcihiLnByZWM9YyxxKCksZT1JKCksZD1bZyxiLGVdOyhjPUooJCkpPjA7KXtmb3IoO2QubGVuZ3RoPjImJmM8PWRbZC5sZW5ndGgtMl0ucHJlYzspZT1kLnBvcCgpLGY9ZC5wb3AoKS52YWx1ZSxnPWQucG9wKCksYT1aLmNyZWF0ZUJpbmFyeUV4cHJlc3Npb24oZixnLGUpLGQucHVzaChhKTtiPXEoKSxiLnByZWM9YyxkLnB1c2goYiksYT1JKCksZC5wdXNoKGEpfWZvcihoPWQubGVuZ3RoLTEsYT1kW2hdO2g+MTspYT1aLmNyZWF0ZUJpbmFyeUV4cHJlc3Npb24oZFtoLTFdLnZhbHVlLGRbaC0yXSxhKSxoLT0yO3JldHVybiBhfWZ1bmN0aW9uIEwoKXt2YXIgYSxiLGM7cmV0dXJuIGE9SygpLHYoIj8iKSYmKHEoKSxiPUwoKSx1KCI6IiksYz1MKCksYT1aLmNyZWF0ZUNvbmRpdGlvbmFsRXhwcmVzc2lvbihhLGIsYykpLGF9ZnVuY3Rpb24gTSgpe3ZhciBhLGI7cmV0dXJuIGE9cSgpLGEudHlwZSE9PVMuSWRlbnRpZmllciYmdChhKSxiPXYoIigiKT9EKCk6W10sWi5jcmVhdGVGaWx0ZXIoYS52YWx1ZSxiKX1mdW5jdGlvbiBOKCl7Zm9yKDt2KCJ8Iik7KXEoKSxNKCl9ZnVuY3Rpb24gTygpe2koKSxyKCk7dmFyIGE9YmIoKTthJiYoIiwiPT09JC52YWx1ZXx8ImluIj09JC52YWx1ZSYmYS50eXBlPT09VS5JZGVudGlmaWVyP1EoYSk6KE4oKSwiYXMiPT09JC52YWx1ZT9QKGEpOlouY3JlYXRlVG9wTGV2ZWwoYSkpKSwkLnR5cGUhPT1TLkVPRiYmdCgkKX1mdW5jdGlvbiBQKGEpe3EoKTt2YXIgYj1xKCkudmFsdWU7Wi5jcmVhdGVBc0V4cHJlc3Npb24oYSxiKX1mdW5jdGlvbiBRKGEpe3ZhciBiOyIsIj09PSQudmFsdWUmJihxKCksJC50eXBlIT09Uy5JZGVudGlmaWVyJiZ0KCQpLGI9cSgpLnZhbHVlKSxxKCk7dmFyIGM9YmIoKTtOKCksWi5jcmVhdGVJbkV4cHJlc3Npb24oYS5uYW1lLGIsYyl9ZnVuY3Rpb24gUihhLGIpe3JldHVybiBaPWIsVz1hLFg9MCxZPVcubGVuZ3RoLCQ9bnVsbCxfPXtsYWJlbFNldDp7fX0sTygpfXZhciBTLFQsVSxWLFcsWCxZLFosJCxfO1M9e0Jvb2xlYW5MaXRlcmFsOjEsRU9GOjIsSWRlbnRpZmllcjozLEtleXdvcmQ6NCxOdWxsTGl0ZXJhbDo1LE51bWVyaWNMaXRlcmFsOjYsUHVuY3R1YXRvcjo3LFN0cmluZ0xpdGVyYWw6OH0sVD17fSxUW1MuQm9vbGVhbkxpdGVyYWxdPSJCb29sZWFuIixUW1MuRU9GXT0iPGVuZD4iLFRbUy5JZGVudGlmaWVyXT0iSWRlbnRpZmllciIsVFtTLktleXdvcmRdPSJLZXl3b3JkIixUW1MuTnVsbExpdGVyYWxdPSJOdWxsIixUW1MuTnVtZXJpY0xpdGVyYWxdPSJOdW1lcmljIixUW1MuUHVuY3R1YXRvcl09IlB1bmN0dWF0b3IiLFRbUy5TdHJpbmdMaXRlcmFsXT0iU3RyaW5nIixVPXtBcnJheUV4cHJlc3Npb246IkFycmF5RXhwcmVzc2lvbiIsQmluYXJ5RXhwcmVzc2lvbjoiQmluYXJ5RXhwcmVzc2lvbiIsQ2FsbEV4cHJlc3Npb246IkNhbGxFeHByZXNzaW9uIixDb25kaXRpb25hbEV4cHJlc3Npb246IkNvbmRpdGlvbmFsRXhwcmVzc2lvbiIsRW1wdHlTdGF0ZW1lbnQ6IkVtcHR5U3RhdGVtZW50IixFeHByZXNzaW9uU3RhdGVtZW50OiJFeHByZXNzaW9uU3RhdGVtZW50IixJZGVudGlmaWVyOiJJZGVudGlmaWVyIixMaXRlcmFsOiJMaXRlcmFsIixMYWJlbGVkU3RhdGVtZW50OiJMYWJlbGVkU3RhdGVtZW50IixMb2dpY2FsRXhwcmVzc2lvbjoiTG9naWNhbEV4cHJlc3Npb24iLE1lbWJlckV4cHJlc3Npb246Ik1lbWJlckV4cHJlc3Npb24iLE9iamVjdEV4cHJlc3Npb246Ik9iamVjdEV4cHJlc3Npb24iLFByb2dyYW06IlByb2dyYW0iLFByb3BlcnR5OiJQcm9wZXJ0eSIsVGhpc0V4cHJlc3Npb246IlRoaXNFeHByZXNzaW9uIixVbmFyeUV4cHJlc3Npb246IlVuYXJ5RXhwcmVzc2lvbiJ9LFY9e1VuZXhwZWN0ZWRUb2tlbjoiVW5leHBlY3RlZCB0b2tlbiAlMCIsVW5rbm93bkxhYmVsOiJVbmRlZmluZWQgbGFiZWwgJyUwJyIsUmVkZWNsYXJhdGlvbjoiJTAgJyUxJyBoYXMgYWxyZWFkeSBiZWVuIGRlY2xhcmVkIn07dmFyIGFiPUgsYmI9TDthLmVzcHJpbWE9e3BhcnNlOlJ9fSh0aGlzKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhLGIsZCxlKXt2YXIgZjt0cnl7aWYoZj1jKGEpLGYuc2NvcGVJZGVudCYmKGQubm9kZVR5cGUhPT1Ob2RlLkVMRU1FTlRfTk9ERXx8IlRFTVBMQVRFIiE9PWQudGFnTmFtZXx8ImJpbmQiIT09YiYmInJlcGVhdCIhPT1iKSl0aHJvdyBFcnJvcigiYXMgYW5kIGluIGNhbiBvbmx5IGJlIHVzZWQgd2l0aGluIDx0ZW1wbGF0ZSBiaW5kL3JlcGVhdD4iKX1jYXRjaChnKXtyZXR1cm4gdm9pZCBjb25zb2xlLmVycm9yKCJJbnZhbGlkIGV4cHJlc3Npb24gc3ludGF4OiAiK2EsZyl9cmV0dXJuIGZ1bmN0aW9uKGEsYixjKXt2YXIgZD1mLmdldEJpbmRpbmcoYSxlLGMpO3JldHVybiBmLnNjb3BlSWRlbnQmJmQmJihiLnBvbHltZXJFeHByZXNzaW9uU2NvcGVJZGVudF89Zi5zY29wZUlkZW50LGYuaW5kZXhJZGVudCYmKGIucG9seW1lckV4cHJlc3Npb25JbmRleElkZW50Xz1mLmluZGV4SWRlbnQpKSxkfX1mdW5jdGlvbiBjKGEpe3ZhciBiPXFbYV07aWYoIWIpe3ZhciBjPW5ldyBqO2VzcHJpbWEucGFyc2UoYSxjKSxiPW5ldyBsKGMpLHFbYV09Yn1yZXR1cm4gYn1mdW5jdGlvbiBkKGEpe3RoaXMudmFsdWU9YSx0aGlzLnZhbHVlRm5fPXZvaWQgMH1mdW5jdGlvbiBlKGEpe3RoaXMubmFtZT1hLHRoaXMucGF0aD1QYXRoLmdldChhKX1mdW5jdGlvbiBmKGEsYixjKXt0aGlzLmNvbXB1dGVkPSJbIj09Yyx0aGlzLmR5bmFtaWNEZXBzPSJmdW5jdGlvbiI9PXR5cGVvZiBhfHxhLmR5bmFtaWNEZXBzfHx0aGlzLmNvbXB1dGVkJiYhKGIgaW5zdGFuY2VvZiBkKSx0aGlzLnNpbXBsZVBhdGg9IXRoaXMuZHluYW1pY0RlcHMmJihiIGluc3RhbmNlb2YgZXx8YiBpbnN0YW5jZW9mIGQpJiYoYSBpbnN0YW5jZW9mIGZ8fGEgaW5zdGFuY2VvZiBlKSx0aGlzLm9iamVjdD10aGlzLnNpbXBsZVBhdGg/YTppKGEpLHRoaXMucHJvcGVydHk9IXRoaXMuY29tcHV0ZWR8fHRoaXMuc2ltcGxlUGF0aD9iOmkoYil9ZnVuY3Rpb24gZyhhLGIpe3RoaXMubmFtZT1hLHRoaXMuYXJncz1bXTtmb3IodmFyIGM9MDtjPGIubGVuZ3RoO2MrKyl0aGlzLmFyZ3NbY109aShiW2NdKX1mdW5jdGlvbiBoKCl7dGhyb3cgRXJyb3IoIk5vdCBJbXBsZW1lbnRlZCIpfWZ1bmN0aW9uIGkoYSl7cmV0dXJuImZ1bmN0aW9uIj09dHlwZW9mIGE/YTphLnZhbHVlRm4oKX1mdW5jdGlvbiBqKCl7dGhpcy5leHByZXNzaW9uPW51bGwsdGhpcy5maWx0ZXJzPVtdLHRoaXMuZGVwcz17fSx0aGlzLmN1cnJlbnRQYXRoPXZvaWQgMCx0aGlzLnNjb3BlSWRlbnQ9dm9pZCAwLHRoaXMuaW5kZXhJZGVudD12b2lkIDAsdGhpcy5keW5hbWljRGVwcz0hMX1mdW5jdGlvbiBrKGEpe3RoaXMudmFsdWVfPWF9ZnVuY3Rpb24gbChhKXtpZih0aGlzLnNjb3BlSWRlbnQ9YS5zY29wZUlkZW50LHRoaXMuaW5kZXhJZGVudD1hLmluZGV4SWRlbnQsIWEuZXhwcmVzc2lvbil0aHJvdyBFcnJvcigiTm8gZXhwcmVzc2lvbiBmb3VuZC4iKTt0aGlzLmV4cHJlc3Npb249YS5leHByZXNzaW9uLGkodGhpcy5leHByZXNzaW9uKSx0aGlzLmZpbHRlcnM9YS5maWx0ZXJzLHRoaXMuZHluYW1pY0RlcHM9YS5keW5hbWljRGVwc31mdW5jdGlvbiBtKGEpe3JldHVybiBTdHJpbmcoYSkucmVwbGFjZSgvW0EtWl0vZyxmdW5jdGlvbihhKXtyZXR1cm4iLSIrYS50b0xvd2VyQ2FzZSgpfSl9ZnVuY3Rpb24gbihhLGIpe2Zvcig7YVt0XSYmIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChhLGIpOylhPWFbdF07cmV0dXJuIGF9ZnVuY3Rpb24gbyhhKXtzd2l0Y2goYSl7Y2FzZSIiOnJldHVybiExO2Nhc2UiZmFsc2UiOmNhc2UibnVsbCI6Y2FzZSJ0cnVlIjpyZXR1cm4hMH1yZXR1cm4gaXNOYU4oTnVtYmVyKGEpKT8hMTohMH1mdW5jdGlvbiBwKCl7fXZhciBxPU9iamVjdC5jcmVhdGUobnVsbCk7ZC5wcm90b3R5cGU9e3ZhbHVlRm46ZnVuY3Rpb24oKXtpZighdGhpcy52YWx1ZUZuXyl7dmFyIGE9dGhpcy52YWx1ZTt0aGlzLnZhbHVlRm5fPWZ1bmN0aW9uKCl7cmV0dXJuIGF9fXJldHVybiB0aGlzLnZhbHVlRm5ffX0sZS5wcm90b3R5cGU9e3ZhbHVlRm46ZnVuY3Rpb24oKXtpZighdGhpcy52YWx1ZUZuXyl7dmFyIGE9KHRoaXMubmFtZSx0aGlzLnBhdGgpO3RoaXMudmFsdWVGbl89ZnVuY3Rpb24oYixjKXtyZXR1cm4gYyYmYy5hZGRQYXRoKGIsYSksYS5nZXRWYWx1ZUZyb20oYil9fXJldHVybiB0aGlzLnZhbHVlRm5ffSxzZXRWYWx1ZTpmdW5jdGlvbihhLGIpe3JldHVybiAxPT10aGlzLnBhdGgubGVuZ3RoLGE9bihhLHRoaXMucGF0aFswXSksdGhpcy5wYXRoLnNldFZhbHVlRnJvbShhLGIpfX0sZi5wcm90b3R5cGU9e2dldCBmdWxsUGF0aCgpe2lmKCF0aGlzLmZ1bGxQYXRoXyl7dmFyIGE9dGhpcy5vYmplY3QgaW5zdGFuY2VvZiBmP3RoaXMub2JqZWN0LmZ1bGxQYXRoLnNsaWNlKCk6W3RoaXMub2JqZWN0Lm5hbWVdO2EucHVzaCh0aGlzLnByb3BlcnR5IGluc3RhbmNlb2YgZT90aGlzLnByb3BlcnR5Lm5hbWU6dGhpcy5wcm9wZXJ0eS52YWx1ZSksdGhpcy5mdWxsUGF0aF89UGF0aC5nZXQoYSl9cmV0dXJuIHRoaXMuZnVsbFBhdGhffSx2YWx1ZUZuOmZ1bmN0aW9uKCl7aWYoIXRoaXMudmFsdWVGbl8pe3ZhciBhPXRoaXMub2JqZWN0O2lmKHRoaXMuc2ltcGxlUGF0aCl7dmFyIGI9dGhpcy5mdWxsUGF0aDt0aGlzLnZhbHVlRm5fPWZ1bmN0aW9uKGEsYyl7cmV0dXJuIGMmJmMuYWRkUGF0aChhLGIpLGIuZ2V0VmFsdWVGcm9tKGEpfX1lbHNlIGlmKHRoaXMuY29tcHV0ZWQpe3ZhciBjPXRoaXMucHJvcGVydHk7dGhpcy52YWx1ZUZuXz1mdW5jdGlvbihiLGQsZSl7dmFyIGY9YShiLGQsZSksZz1jKGIsZCxlKTsKcmV0dXJuIGQmJmQuYWRkUGF0aChmLFtnXSksZj9mW2ddOnZvaWQgMH19ZWxzZXt2YXIgYj1QYXRoLmdldCh0aGlzLnByb3BlcnR5Lm5hbWUpO3RoaXMudmFsdWVGbl89ZnVuY3Rpb24oYyxkLGUpe3ZhciBmPWEoYyxkLGUpO3JldHVybiBkJiZkLmFkZFBhdGgoZixiKSxiLmdldFZhbHVlRnJvbShmKX19fXJldHVybiB0aGlzLnZhbHVlRm5ffSxzZXRWYWx1ZTpmdW5jdGlvbihhLGIpe2lmKHRoaXMuc2ltcGxlUGF0aClyZXR1cm4gdGhpcy5mdWxsUGF0aC5zZXRWYWx1ZUZyb20oYSxiKSxiO3ZhciBjPXRoaXMub2JqZWN0KGEpLGQ9dGhpcy5wcm9wZXJ0eSBpbnN0YW5jZW9mIGU/dGhpcy5wcm9wZXJ0eS5uYW1lOnRoaXMucHJvcGVydHkoYSk7cmV0dXJuIGNbZF09Yn19LGcucHJvdG90eXBlPXt0cmFuc2Zvcm06ZnVuY3Rpb24oYSxiLGMsZCxlKXt2YXIgZj1jW3RoaXMubmFtZV0sZz1hO2lmKGYpZz12b2lkIDA7ZWxzZSBpZihmPWdbdGhpcy5uYW1lXSwhZilyZXR1cm4gdm9pZCBjb25zb2xlLmVycm9yKCJDYW5ub3QgZmluZCBmdW5jdGlvbiBvciBmaWx0ZXI6ICIrdGhpcy5uYW1lKTtpZihkP2Y9Zi50b01vZGVsOiJmdW5jdGlvbiI9PXR5cGVvZiBmLnRvRE9NJiYoZj1mLnRvRE9NKSwiZnVuY3Rpb24iIT10eXBlb2YgZilyZXR1cm4gdm9pZCBjb25zb2xlLmVycm9yKCJDYW5ub3QgZmluZCBmdW5jdGlvbiBvciBmaWx0ZXI6ICIrdGhpcy5uYW1lKTtmb3IodmFyIGg9ZXx8W10saj0wO2o8dGhpcy5hcmdzLmxlbmd0aDtqKyspaC5wdXNoKGkodGhpcy5hcmdzW2pdKShhLGIsYykpO3JldHVybiBmLmFwcGx5KGcsaCl9fTt2YXIgcj17IisiOmZ1bmN0aW9uKGEpe3JldHVybithfSwiLSI6ZnVuY3Rpb24oYSl7cmV0dXJuLWF9LCIhIjpmdW5jdGlvbihhKXtyZXR1cm4hYX19LHM9eyIrIjpmdW5jdGlvbihhLGIpe3JldHVybiBhK2J9LCItIjpmdW5jdGlvbihhLGIpe3JldHVybiBhLWJ9LCIqIjpmdW5jdGlvbihhLGIpe3JldHVybiBhKmJ9LCIvIjpmdW5jdGlvbihhLGIpe3JldHVybiBhL2J9LCIlIjpmdW5jdGlvbihhLGIpe3JldHVybiBhJWJ9LCI8IjpmdW5jdGlvbihhLGIpe3JldHVybiBiPmF9LCI+IjpmdW5jdGlvbihhLGIpe3JldHVybiBhPmJ9LCI8PSI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYj49YX0sIj49IjpmdW5jdGlvbihhLGIpe3JldHVybiBhPj1ifSwiPT0iOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGE9PWJ9LCIhPSI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYSE9Yn0sIj09PSI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT09PWJ9LCIhPT0iOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGEhPT1ifSwiJiYiOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGEmJmJ9LCJ8fCI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYXx8Yn19O2oucHJvdG90eXBlPXtjcmVhdGVVbmFyeUV4cHJlc3Npb246ZnVuY3Rpb24oYSxiKXtpZighclthXSl0aHJvdyBFcnJvcigiRGlzYWxsb3dlZCBvcGVyYXRvcjogIithKTtyZXR1cm4gYj1pKGIpLGZ1bmN0aW9uKGMsZCxlKXtyZXR1cm4gclthXShiKGMsZCxlKSl9fSxjcmVhdGVCaW5hcnlFeHByZXNzaW9uOmZ1bmN0aW9uKGEsYixjKXtpZighc1thXSl0aHJvdyBFcnJvcigiRGlzYWxsb3dlZCBvcGVyYXRvcjogIithKTtzd2l0Y2goYj1pKGIpLGM9aShjKSxhKXtjYXNlInx8IjpyZXR1cm4gdGhpcy5keW5hbWljRGVwcz0hMCxmdW5jdGlvbihhLGQsZSl7cmV0dXJuIGIoYSxkLGUpfHxjKGEsZCxlKX07Y2FzZSImJiI6cmV0dXJuIHRoaXMuZHluYW1pY0RlcHM9ITAsZnVuY3Rpb24oYSxkLGUpe3JldHVybiBiKGEsZCxlKSYmYyhhLGQsZSl9fXJldHVybiBmdW5jdGlvbihkLGUsZil7cmV0dXJuIHNbYV0oYihkLGUsZiksYyhkLGUsZikpfX0sY3JlYXRlQ29uZGl0aW9uYWxFeHByZXNzaW9uOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gYT1pKGEpLGI9aShiKSxjPWkoYyksdGhpcy5keW5hbWljRGVwcz0hMCxmdW5jdGlvbihkLGUsZil7cmV0dXJuIGEoZCxlLGYpP2IoZCxlLGYpOmMoZCxlLGYpfX0sY3JlYXRlSWRlbnRpZmllcjpmdW5jdGlvbihhKXt2YXIgYj1uZXcgZShhKTtyZXR1cm4gYi50eXBlPSJJZGVudGlmaWVyIixifSxjcmVhdGVNZW1iZXJFeHByZXNzaW9uOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD1uZXcgZihiLGMsYSk7cmV0dXJuIGQuZHluYW1pY0RlcHMmJih0aGlzLmR5bmFtaWNEZXBzPSEwKSxkfSxjcmVhdGVDYWxsRXhwcmVzc2lvbjpmdW5jdGlvbihhLGIpe2lmKCEoYSBpbnN0YW5jZW9mIGUpKXRocm93IEVycm9yKCJPbmx5IGlkZW50aWZpZXIgZnVuY3Rpb24gaW52b2NhdGlvbnMgYXJlIGFsbG93ZWQiKTt2YXIgYz1uZXcgZyhhLm5hbWUsYik7cmV0dXJuIGZ1bmN0aW9uKGEsYixkKXtyZXR1cm4gYy50cmFuc2Zvcm0oYSxiLGQsITEpfX0sY3JlYXRlTGl0ZXJhbDpmdW5jdGlvbihhKXtyZXR1cm4gbmV3IGQoYS52YWx1ZSl9LGNyZWF0ZUFycmF5RXhwcmVzc2lvbjpmdW5jdGlvbihhKXtmb3IodmFyIGI9MDtiPGEubGVuZ3RoO2IrKylhW2JdPWkoYVtiXSk7cmV0dXJuIGZ1bmN0aW9uKGIsYyxkKXtmb3IodmFyIGU9W10sZj0wO2Y8YS5sZW5ndGg7ZisrKWUucHVzaChhW2ZdKGIsYyxkKSk7cmV0dXJuIGV9fSxjcmVhdGVQcm9wZXJ0eTpmdW5jdGlvbihhLGIsYyl7cmV0dXJue2tleTpiIGluc3RhbmNlb2YgZT9iLm5hbWU6Yi52YWx1ZSx2YWx1ZTpjfX0sY3JlYXRlT2JqZWN0RXhwcmVzc2lvbjpmdW5jdGlvbihhKXtmb3IodmFyIGI9MDtiPGEubGVuZ3RoO2IrKylhW2JdLnZhbHVlPWkoYVtiXS52YWx1ZSk7cmV0dXJuIGZ1bmN0aW9uKGIsYyxkKXtmb3IodmFyIGU9e30sZj0wO2Y8YS5sZW5ndGg7ZisrKWVbYVtmXS5rZXldPWFbZl0udmFsdWUoYixjLGQpO3JldHVybiBlfX0sY3JlYXRlRmlsdGVyOmZ1bmN0aW9uKGEsYil7dGhpcy5maWx0ZXJzLnB1c2gobmV3IGcoYSxiKSl9LGNyZWF0ZUFzRXhwcmVzc2lvbjpmdW5jdGlvbihhLGIpe3RoaXMuZXhwcmVzc2lvbj1hLHRoaXMuc2NvcGVJZGVudD1ifSxjcmVhdGVJbkV4cHJlc3Npb246ZnVuY3Rpb24oYSxiLGMpe3RoaXMuZXhwcmVzc2lvbj1jLHRoaXMuc2NvcGVJZGVudD1hLHRoaXMuaW5kZXhJZGVudD1ifSxjcmVhdGVUb3BMZXZlbDpmdW5jdGlvbihhKXt0aGlzLmV4cHJlc3Npb249YX0sY3JlYXRlVGhpc0V4cHJlc3Npb246aH0say5wcm90b3R5cGU9e29wZW46ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy52YWx1ZV99LGRpc2NhcmRDaGFuZ2VzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudmFsdWVffSxkZWxpdmVyOmZ1bmN0aW9uKCl7fSxjbG9zZTpmdW5jdGlvbigpe319LGwucHJvdG90eXBlPXtnZXRCaW5kaW5nOmZ1bmN0aW9uKGEsYixjKXtmdW5jdGlvbiBkKCl7aWYoaClyZXR1cm4gaD0hMSxnO2kuZHluYW1pY0RlcHMmJmYuc3RhcnRSZXNldCgpO3ZhciBjPWkuZ2V0VmFsdWUoYSxpLmR5bmFtaWNEZXBzP2Y6dm9pZCAwLGIpO3JldHVybiBpLmR5bmFtaWNEZXBzJiZmLmZpbmlzaFJlc2V0KCksY31mdW5jdGlvbiBlKGMpe3JldHVybiBpLnNldFZhbHVlKGEsYyxiKSxjfWlmKGMpcmV0dXJuIHRoaXMuZ2V0VmFsdWUoYSx2b2lkIDAsYik7dmFyIGY9bmV3IENvbXBvdW5kT2JzZXJ2ZXIsZz10aGlzLmdldFZhbHVlKGEsZixiKSxoPSEwLGk9dGhpcztyZXR1cm4gbmV3IE9ic2VydmVyVHJhbnNmb3JtKGYsZCxlLCEwKX0sZ2V0VmFsdWU6ZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZD1pKHRoaXMuZXhwcmVzc2lvbikoYSxiLGMpLGU9MDtlPHRoaXMuZmlsdGVycy5sZW5ndGg7ZSsrKWQ9dGhpcy5maWx0ZXJzW2VdLnRyYW5zZm9ybShhLGIsYywhMSxbZF0pO3JldHVybiBkfSxzZXRWYWx1ZTpmdW5jdGlvbihhLGIsYyl7Zm9yKHZhciBkPXRoaXMuZmlsdGVycz90aGlzLmZpbHRlcnMubGVuZ3RoOjA7ZC0tPjA7KWI9dGhpcy5maWx0ZXJzW2RdLnRyYW5zZm9ybShhLHZvaWQgMCxjLCEwLFtiXSk7cmV0dXJuIHRoaXMuZXhwcmVzc2lvbi5zZXRWYWx1ZT90aGlzLmV4cHJlc3Npb24uc2V0VmFsdWUoYSxiKTp2b2lkIDB9fTt2YXIgdD0iQCIrTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc2xpY2UoMik7cC5wcm90b3R5cGU9e3N0eWxlT2JqZWN0OmZ1bmN0aW9uKGEpe3ZhciBiPVtdO2Zvcih2YXIgYyBpbiBhKWIucHVzaChtKGMpKyI6ICIrYVtjXSk7cmV0dXJuIGIuam9pbigiOyAiKX0sdG9rZW5MaXN0OmZ1bmN0aW9uKGEpe3ZhciBiPVtdO2Zvcih2YXIgYyBpbiBhKWFbY10mJmIucHVzaChjKTtyZXR1cm4gYi5qb2luKCIgIil9LHByZXBhcmVJbnN0YW5jZVBvc2l0aW9uQ2hhbmdlZDpmdW5jdGlvbihhKXt2YXIgYj1hLnBvbHltZXJFeHByZXNzaW9uSW5kZXhJZGVudF87aWYoYilyZXR1cm4gZnVuY3Rpb24oYSxjKXthLm1vZGVsW2JdPWN9fSxwcmVwYXJlQmluZGluZzpmdW5jdGlvbihhLGMsZCl7dmFyIGU9UGF0aC5nZXQoYSk7e2lmKG8oYSl8fCFlLnZhbGlkKXJldHVybiBiKGEsYyxkLHRoaXMpO2lmKDE9PWUubGVuZ3RoKXJldHVybiBmdW5jdGlvbihhLGIsYyl7aWYoYylyZXR1cm4gZS5nZXRWYWx1ZUZyb20oYSk7dmFyIGQ9bihhLGVbMF0pO3JldHVybiBuZXcgUGF0aE9ic2VydmVyKGQsZSl9fX0scHJlcGFyZUluc3RhbmNlTW9kZWw6ZnVuY3Rpb24oYSl7dmFyIGI9YS5wb2x5bWVyRXhwcmVzc2lvblNjb3BlSWRlbnRfO2lmKGIpe3ZhciBjPWEudGVtcGxhdGVJbnN0YW5jZT9hLnRlbXBsYXRlSW5zdGFuY2UubW9kZWw6YS5tb2RlbCxkPWEucG9seW1lckV4cHJlc3Npb25JbmRleElkZW50XztyZXR1cm4gZnVuY3Rpb24oYSl7cmV0dXJuIHUoYyxhLGIsZCl9fX19O3ZhciB1PSJfX3Byb3RvX18iaW57fT9mdW5jdGlvbihhLGIsYyxkKXt2YXIgZT17fTtyZXR1cm4gZVtjXT1iLGVbZF09dm9pZCAwLGVbdF09YSxlLl9fcHJvdG9fXz1hLGV9OmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPU9iamVjdC5jcmVhdGUoYSk7cmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLGMse3ZhbHVlOmIsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsZCx7dmFsdWU6dm9pZCAwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLHQse3ZhbHVlOmEsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwfSksZX07YS5Qb2x5bWVyRXhwcmVzc2lvbnM9cCxwLmdldEV4cHJlc3Npb249Y30odGhpcyksUG9seW1lcj17dmVyc2lvbjoiMC40LjAifSwiZnVuY3Rpb24iPT10eXBlb2Ygd2luZG93LlBvbHltZXImJihQb2x5bWVyPXt9KSx3aW5kb3cuUGxhdGZvcm18fChsb2dGbGFncz13aW5kb3cubG9nRmxhZ3N8fHt9LFBsYXRmb3JtPXtmbHVzaDpmdW5jdGlvbigpe319LEN1c3RvbUVsZW1lbnRzPXt1c2VOYXRpdmU6ITAscmVhZHk6ITAsdGFrZVJlY29yZHM6ZnVuY3Rpb24oKXt9LCJpbnN0YW5jZW9mIjpmdW5jdGlvbihhLGIpe3JldHVybiBhIGluc3RhbmNlb2YgYn19LEhUTUxJbXBvcnRzPXt1c2VOYXRpdmU6ITB9LGFkZEV2ZW50TGlzdGVuZXIoIkhUTUxJbXBvcnRzTG9hZGVkIixmdW5jdGlvbigpe2RvY3VtZW50LmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KCJXZWJDb21wb25lbnRzUmVhZHkiLHtidWJibGVzOiEwfSkpfSksU2hhZG93RE9NUG9seWZpbGw9bnVsbCx3cmFwPXVud3JhcD1mdW5jdGlvbihhKXtyZXR1cm4gYX0pLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSxiKXtiPWJ8fG8sZChmdW5jdGlvbigpe2YoYSxiKX0sYil9ZnVuY3Rpb24gYyhhKXtyZXR1cm4iY29tcGxldGUiPT09YS5yZWFkeVN0YXRlfHxhLnJlYWR5U3RhdGU9PT1xfWZ1bmN0aW9uIGQoYSxiKXtpZihjKGIpKWEmJmEoKTtlbHNle3ZhciBlPWZ1bmN0aW9uKCl7KCJjb21wbGV0ZSI9PT1iLnJlYWR5U3RhdGV8fGIucmVhZHlTdGF0ZT09PXEpJiYoYi5yZW1vdmVFdmVudExpc3RlbmVyKHIsZSksZChhLGIpKX07Yi5hZGRFdmVudExpc3RlbmVyKHIsZSl9fWZ1bmN0aW9uIGUoYSl7YS50YXJnZXQuX19sb2FkZWQ9ITB9ZnVuY3Rpb24gZihhLGIpe2Z1bmN0aW9uIGMoKXtoPT1pJiZhJiZhKCl9ZnVuY3Rpb24gZChhKXtlKGEpLGgrKyxjKCl9dmFyIGY9Yi5xdWVyeVNlbGVjdG9yQWxsKCJsaW5rW3JlbD1pbXBvcnRdIiksaD0wLGk9Zi5sZW5ndGg7aWYoaSlmb3IodmFyIGosaz0wO2k+ayYmKGo9ZltrXSk7aysrKWcoaik/ZC5jYWxsKGose3RhcmdldDpqfSk6KGouYWRkRXZlbnRMaXN0ZW5lcigibG9hZCIsZCksai5hZGRFdmVudExpc3RlbmVyKCJlcnJvciIsZCkpO2Vsc2UgYygpfWZ1bmN0aW9uIGcoYSl7cmV0dXJuIGw/YS5fX2xvYWRlZDphLl9faW1wb3J0UGFyc2VkfWZ1bmN0aW9uIGgoYSl7Zm9yKHZhciBiLGM9MCxkPWEubGVuZ3RoO2Q+YyYmKGI9YVtjXSk7YysrKWkoYikmJmooYil9ZnVuY3Rpb24gaShhKXtyZXR1cm4ibGluayI9PT1hLmxvY2FsTmFtZSYmImltcG9ydCI9PT1hLnJlbH1mdW5jdGlvbiBqKGEpe3ZhciBiPWEuaW1wb3J0O2I/ZSh7dGFyZ2V0OmF9KTooYS5hZGRFdmVudExpc3RlbmVyKCJsb2FkIixlKSxhLmFkZEV2ZW50TGlzdGVuZXIoImVycm9yIixlKSl9dmFyIGs9ImltcG9ydCJpbiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJsaW5rIiksbD1rO2lzSUU9L1RyaWRlbnQvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk7dmFyIG09Qm9vbGVhbih3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLG49ZnVuY3Rpb24oYSl7cmV0dXJuIG0/U2hhZG93RE9NUG9seWZpbGwud3JhcElmTmVlZGVkKGEpOmF9LG89bihkb2N1bWVudCkscD17Z2V0OmZ1bmN0aW9uKCl7dmFyIGE9SFRNTEltcG9ydHMuY3VycmVudFNjcmlwdHx8ZG9jdW1lbnQuY3VycmVudFNjcmlwdHx8KCJjb21wbGV0ZSIhPT1kb2N1bWVudC5yZWFkeVN0YXRlP2RvY3VtZW50LnNjcmlwdHNbZG9jdW1lbnQuc2NyaXB0cy5sZW5ndGgtMV06bnVsbCk7cmV0dXJuIG4oYSl9LGNvbmZpZ3VyYWJsZTohMH07T2JqZWN0LmRlZmluZVByb3BlcnR5KGRvY3VtZW50LCJfY3VycmVudFNjcmlwdCIscCksT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIl9jdXJyZW50U2NyaXB0IixwKTt2YXIgcT1pc0lFPyJjb21wbGV0ZSI6ImludGVyYWN0aXZlIixyPSJyZWFkeXN0YXRlY2hhbmdlIjtsJiYobmV3IE11dGF0aW9uT2JzZXJ2ZXIoZnVuY3Rpb24oYSl7Zm9yKHZhciBiLGM9MCxkPWEubGVuZ3RoO2Q+YyYmKGI9YVtjXSk7YysrKWIuYWRkZWROb2RlcyYmaChiLmFkZGVkTm9kZXMpfSkub2JzZXJ2ZShkb2N1bWVudC5oZWFkLHtjaGlsZExpc3Q6ITB9KSxmdW5jdGlvbigpe2lmKCJsb2FkaW5nIj09PWRvY3VtZW50LnJlYWR5U3RhdGUpZm9yKHZhciBhLGI9ZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgibGlua1tyZWw9aW1wb3J0XSIpLGM9MCxkPWIubGVuZ3RoO2Q+YyYmKGE9YltjXSk7YysrKWooYSl9KCkpLGIoZnVuY3Rpb24oKXtIVE1MSW1wb3J0cy5yZWFkeT0hMCxIVE1MSW1wb3J0cy5yZWFkeVRpbWU9KG5ldyBEYXRlKS5nZXRUaW1lKCksby5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgiSFRNTEltcG9ydHNMb2FkZWQiLHtidWJibGVzOiEwfSkpfSksYS51c2VOYXRpdmU9bCxhLmlzSW1wb3J0TG9hZGVkPWcsYS53aGVuUmVhZHk9YixhLmlzSUU9aXNJRSxhLndoZW5JbXBvcnRzUmVhZHk9Yn0od2luZG93LkhUTUxJbXBvcnRzKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEsYil7cmV0dXJuIGI9Ynx8W10sYi5tYXB8fChiPVtiXSksYS5hcHBseSh0aGlzLGIubWFwKGQpKX1mdW5jdGlvbiBjKGEsYyxkKXt2YXIgZTtzd2l0Y2goYXJndW1lbnRzLmxlbmd0aCl7Y2FzZSAwOnJldHVybjtjYXNlIDE6ZT1udWxsO2JyZWFrO2Nhc2UgMjplPWMuYXBwbHkodGhpcyk7YnJlYWs7ZGVmYXVsdDplPWIoZCxjKX1mW2FdPWV9ZnVuY3Rpb24gZChhKXtyZXR1cm4gZlthXX1mdW5jdGlvbiBlKGEsYyl7SFRNTEltcG9ydHMud2hlbkltcG9ydHNSZWFkeShmdW5jdGlvbigpe2IoYyxhKX0pfXZhciBmPXt9O2EubWFyc2hhbD1kLGEubW9kdWxhcml6ZT1jLGEudXNpbmc9ZX0od2luZG93KSxmdW5jdGlvbigpe3ZhciBhPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInN0eWxlIik7YS50ZXh0Q29udGVudD0iYm9keSB7dHJhbnNpdGlvbjogb3BhY2l0eSBlYXNlLWluIDAuMnM7IH0gXG5ib2R5W3VucmVzb2x2ZWRdIHtvcGFjaXR5OiAwOyBkaXNwbGF5OiBibG9jazsgb3ZlcmZsb3c6IGhpZGRlbjsgfSBcbiI7dmFyIGI9ZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiaGVhZCIpO2IuaW5zZXJ0QmVmb3JlKGEsYi5maXJzdENoaWxkKX0oUGxhdGZvcm0pLGZ1bmN0aW9uKGdsb2JhbCl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGRldGVjdE9iamVjdE9ic2VydmUoKXtmdW5jdGlvbiBhKGEpe2I9YX1pZigiZnVuY3Rpb24iIT10eXBlb2YgT2JqZWN0Lm9ic2VydmV8fCJmdW5jdGlvbiIhPXR5cGVvZiBBcnJheS5vYnNlcnZlKXJldHVybiExO3ZhciBiPVtdLGM9e30sZD1bXTtyZXR1cm4gT2JqZWN0Lm9ic2VydmUoYyxhKSxBcnJheS5vYnNlcnZlKGQsYSksYy5pZD0xLGMuaWQ9MixkZWxldGUgYy5pZCxkLnB1c2goMSwyKSxkLmxlbmd0aD0wLE9iamVjdC5kZWxpdmVyQ2hhbmdlUmVjb3JkcyhhKSw1IT09Yi5sZW5ndGg/ITE6ImFkZCIhPWJbMF0udHlwZXx8InVwZGF0ZSIhPWJbMV0udHlwZXx8ImRlbGV0ZSIhPWJbMl0udHlwZXx8InNwbGljZSIhPWJbM10udHlwZXx8InNwbGljZSIhPWJbNF0udHlwZT8hMTooT2JqZWN0LnVub2JzZXJ2ZShjLGEpLEFycmF5LnVub2JzZXJ2ZShkLGEpLCEwKX1mdW5jdGlvbiBkZXRlY3RFdmFsKCl7aWYoInVuZGVmaW5lZCIhPXR5cGVvZiBjaHJvbWUmJmNocm9tZS5hcHAmJmNocm9tZS5hcHAucnVudGltZSlyZXR1cm4hMTtpZihuYXZpZ2F0b3IuZ2V0RGV2aWNlU3RvcmFnZSlyZXR1cm4hMTt0cnl7dmFyIGE9bmV3IEZ1bmN0aW9uKCIiLCJyZXR1cm4gdHJ1ZTsiKTtyZXR1cm4gYSgpfWNhdGNoKGIpe3JldHVybiExfX1mdW5jdGlvbiBpc0luZGV4KGEpe3JldHVybithPT09YT4+PjB9ZnVuY3Rpb24gdG9OdW1iZXIoYSl7cmV0dXJuK2F9ZnVuY3Rpb24gaXNPYmplY3QoYSl7cmV0dXJuIGE9PT1PYmplY3QoYSl9ZnVuY3Rpb24gYXJlU2FtZVZhbHVlKGEsYil7cmV0dXJuIGE9PT1iPzAhPT1hfHwxL2E9PT0xL2I6bnVtYmVySXNOYU4oYSkmJm51bWJlcklzTmFOKGIpPyEwOmEhPT1hJiZiIT09Yn1mdW5jdGlvbiBnZXRQYXRoQ2hhclR5cGUoYSl7aWYodm9pZCAwPT09YSlyZXR1cm4iZW9mIjt2YXIgYj1hLmNoYXJDb2RlQXQoMCk7c3dpdGNoKGIpe2Nhc2UgOTE6Y2FzZSA5MzpjYXNlIDQ2OmNhc2UgMzQ6Y2FzZSAzOTpjYXNlIDQ4OnJldHVybiBhO2Nhc2UgOTU6Y2FzZSAzNjpyZXR1cm4iaWRlbnQiO2Nhc2UgMzI6Y2FzZSA5OmNhc2UgMTA6Y2FzZSAxMzpjYXNlIDE2MDpjYXNlIDY1Mjc5OmNhc2UgODIzMjpjYXNlIDgyMzM6cmV0dXJuIndzIn1yZXR1cm4gYj49OTcmJjEyMj49Ynx8Yj49NjUmJjkwPj1iPyJpZGVudCI6Yj49NDkmJjU3Pj1iPyJudW1iZXIiOiJlbHNlIn1mdW5jdGlvbiBub29wKCl7fWZ1bmN0aW9uIHBhcnNlUGF0aChhKXtmdW5jdGlvbiBiKCl7aWYoIShrPj1hLmxlbmd0aCkpe3ZhciBiPWFbaysxXTtyZXR1cm4iaW5TaW5nbGVRdW90ZSI9PWwmJiInIj09Ynx8ImluRG91YmxlUXVvdGUiPT1sJiYnIic9PWI/KGsrKyxkPWIsbS5hcHBlbmQoKSwhMCk6dm9pZCAwfX1mb3IodmFyIGMsZCxlLGYsZyxoLGksaj1bXSxrPS0xLGw9ImJlZm9yZVBhdGgiLG09e3B1c2g6ZnVuY3Rpb24oKXt2b2lkIDAhPT1lJiYoai5wdXNoKGUpLGU9dm9pZCAwKX0sYXBwZW5kOmZ1bmN0aW9uKCl7dm9pZCAwPT09ZT9lPWQ6ZSs9ZH19O2w7KWlmKGsrKyxjPWFba10sIlxcIiE9Y3x8IWIobCkpe2lmKGY9Z2V0UGF0aENoYXJUeXBlKGMpLGk9cGF0aFN0YXRlTWFjaGluZVtsXSxnPWlbZl18fGlbImVsc2UiXXx8ImVycm9yIiwiZXJyb3IiPT1nKXJldHVybjtpZihsPWdbMF0saD1tW2dbMV1dfHxub29wLGQ9dm9pZCAwPT09Z1syXT9jOmdbMl0saCgpLCJhZnRlclBhdGgiPT09bClyZXR1cm4gan19ZnVuY3Rpb24gaXNJZGVudChhKXtyZXR1cm4gaWRlbnRSZWdFeHAudGVzdChhKX1mdW5jdGlvbiBQYXRoKGEsYil7aWYoYiE9PWNvbnN0cnVjdG9ySXNQcml2YXRlKXRocm93IEVycm9yKCJVc2UgUGF0aC5nZXQgdG8gcmV0cmlldmUgcGF0aCBvYmplY3RzIik7Zm9yKHZhciBjPTA7YzxhLmxlbmd0aDtjKyspdGhpcy5wdXNoKFN0cmluZyhhW2NdKSk7aGFzRXZhbCYmdGhpcy5sZW5ndGgmJih0aGlzLmdldFZhbHVlRnJvbT10aGlzLmNvbXBpbGVkR2V0VmFsdWVGcm9tRm4oKSl9ZnVuY3Rpb24gZ2V0UGF0aChhKXtpZihhIGluc3RhbmNlb2YgUGF0aClyZXR1cm4gYTtpZigobnVsbD09YXx8MD09YS5sZW5ndGgpJiYoYT0iIiksInN0cmluZyIhPXR5cGVvZiBhKXtpZihpc0luZGV4KGEubGVuZ3RoKSlyZXR1cm4gbmV3IFBhdGgoYSxjb25zdHJ1Y3RvcklzUHJpdmF0ZSk7YT1TdHJpbmcoYSl9dmFyIGI9cGF0aENhY2hlW2FdO2lmKGIpcmV0dXJuIGI7dmFyIGM9cGFyc2VQYXRoKGEpO2lmKCFjKXJldHVybiBpbnZhbGlkUGF0aDt2YXIgYj1uZXcgUGF0aChjLGNvbnN0cnVjdG9ySXNQcml2YXRlKTtyZXR1cm4gcGF0aENhY2hlW2FdPWIsYn1mdW5jdGlvbiBmb3JtYXRBY2Nlc3NvcihhKXtyZXR1cm4gaXNJbmRleChhKT8iWyIrYSsiXSI6J1siJythLnJlcGxhY2UoLyIvZywnXFwiJykrJyJdJ31mdW5jdGlvbiBkaXJ0eUNoZWNrKGEpe2Zvcih2YXIgYj0wO01BWF9ESVJUWV9DSEVDS19DWUNMRVM+YiYmYS5jaGVja18oKTspYisrO3JldHVybiB0ZXN0aW5nRXhwb3NlQ3ljbGVDb3VudCYmKGdsb2JhbC5kaXJ0eUNoZWNrQ3ljbGVDb3VudD1iKSxiPjB9ZnVuY3Rpb24gb2JqZWN0SXNFbXB0eShhKXtmb3IodmFyIGIgaW4gYSlyZXR1cm4hMTtyZXR1cm4hMH1mdW5jdGlvbiBkaWZmSXNFbXB0eShhKXtyZXR1cm4gb2JqZWN0SXNFbXB0eShhLmFkZGVkKSYmb2JqZWN0SXNFbXB0eShhLnJlbW92ZWQpJiZvYmplY3RJc0VtcHR5KGEuY2hhbmdlZCl9ZnVuY3Rpb24gZGlmZk9iamVjdEZyb21PbGRPYmplY3QoYSxiKXt2YXIgYz17fSxkPXt9LGU9e307Zm9yKHZhciBmIGluIGIpe3ZhciBnPWFbZl07KHZvaWQgMD09PWd8fGchPT1iW2ZdKSYmKGYgaW4gYT9nIT09YltmXSYmKGVbZl09Zyk6ZFtmXT12b2lkIDApfWZvcih2YXIgZiBpbiBhKWYgaW4gYnx8KGNbZl09YVtmXSk7cmV0dXJuIEFycmF5LmlzQXJyYXkoYSkmJmEubGVuZ3RoIT09Yi5sZW5ndGgmJihlLmxlbmd0aD1hLmxlbmd0aCkse2FkZGVkOmMscmVtb3ZlZDpkLGNoYW5nZWQ6ZX19ZnVuY3Rpb24gcnVuRU9NVGFza3MoKXtpZighZW9tVGFza3MubGVuZ3RoKXJldHVybiExO2Zvcih2YXIgYT0wO2E8ZW9tVGFza3MubGVuZ3RoO2ErKyllb21UYXNrc1thXSgpO3JldHVybiBlb21UYXNrcy5sZW5ndGg9MCwhMH1mdW5jdGlvbiBuZXdPYnNlcnZlZE9iamVjdCgpe2Z1bmN0aW9uIGEoYSl7YiYmYi5zdGF0ZV89PT1PUEVORUQmJiFkJiZiLmNoZWNrXyhhKX12YXIgYixjLGQ9ITEsZT0hMDtyZXR1cm57b3BlbjpmdW5jdGlvbihjKXtpZihiKXRocm93IEVycm9yKCJPYnNlcnZlZE9iamVjdCBpbiB1c2UiKTtlfHxPYmplY3QuZGVsaXZlckNoYW5nZVJlY29yZHMoYSksYj1jLGU9ITF9LG9ic2VydmU6ZnVuY3Rpb24oYixkKXtjPWIsZD9BcnJheS5vYnNlcnZlKGMsYSk6T2JqZWN0Lm9ic2VydmUoYyxhKX0sZGVsaXZlcjpmdW5jdGlvbihiKXtkPWIsT2JqZWN0LmRlbGl2ZXJDaGFuZ2VSZWNvcmRzKGEpLGQ9ITF9LGNsb3NlOmZ1bmN0aW9uKCl7Yj12b2lkIDAsT2JqZWN0LnVub2JzZXJ2ZShjLGEpLG9ic2VydmVkT2JqZWN0Q2FjaGUucHVzaCh0aGlzKX19fWZ1bmN0aW9uIGdldE9ic2VydmVkT2JqZWN0KGEsYixjKXt2YXIgZD1vYnNlcnZlZE9iamVjdENhY2hlLnBvcCgpfHxuZXdPYnNlcnZlZE9iamVjdCgpO3JldHVybiBkLm9wZW4oYSksZC5vYnNlcnZlKGIsYyksZH1mdW5jdGlvbiBuZXdPYnNlcnZlZFNldCgpe2Z1bmN0aW9uIGEoYixmKXtiJiYoYj09PWQmJihlW2ZdPSEwKSxoLmluZGV4T2YoYik8MCYmKGgucHVzaChiKSxPYmplY3Qub2JzZXJ2ZShiLGMpKSxhKE9iamVjdC5nZXRQcm90b3R5cGVPZihiKSxmKSl9ZnVuY3Rpb24gYihhKXtmb3IodmFyIGI9MDtiPGEubGVuZ3RoO2IrKyl7dmFyIGM9YVtiXTtpZihjLm9iamVjdCE9PWR8fGVbYy5uYW1lXXx8InNldFByb3RvdHlwZSI9PT1jLnR5cGUpcmV0dXJuITF9cmV0dXJuITB9ZnVuY3Rpb24gYyhjKXtpZighYihjKSl7Zm9yKHZhciBkLGU9MDtlPGcubGVuZ3RoO2UrKylkPWdbZV0sZC5zdGF0ZV89PU9QRU5FRCYmZC5pdGVyYXRlT2JqZWN0c18oYSk7Zm9yKHZhciBlPTA7ZTxnLmxlbmd0aDtlKyspZD1nW2VdLGQuc3RhdGVfPT1PUEVORUQmJmQuY2hlY2tfKCl9fXZhciBkLGUsZj0wLGc9W10saD1bXSxpPXtvYmplY3Q6dm9pZCAwLG9iamVjdHM6aCxvcGVuOmZ1bmN0aW9uKGIsYyl7ZHx8KGQ9YyxlPXt9KSxnLnB1c2goYiksZisrLGIuaXRlcmF0ZU9iamVjdHNfKGEpfSxjbG9zZTpmdW5jdGlvbigpe2lmKGYtLSwhKGY+MCkpe2Zvcih2YXIgYT0wO2E8aC5sZW5ndGg7YSsrKU9iamVjdC51bm9ic2VydmUoaFthXSxjKSxPYnNlcnZlci51bm9ic2VydmVkQ291bnQrKztnLmxlbmd0aD0wLGgubGVuZ3RoPTAsZD12b2lkIDAsZT12b2lkIDAsb2JzZXJ2ZWRTZXRDYWNoZS5wdXNoKHRoaXMpfX19O3JldHVybiBpfWZ1bmN0aW9uIGdldE9ic2VydmVkU2V0KGEsYil7cmV0dXJuIGxhc3RPYnNlcnZlZFNldCYmbGFzdE9ic2VydmVkU2V0Lm9iamVjdD09PWJ8fChsYXN0T2JzZXJ2ZWRTZXQ9b2JzZXJ2ZWRTZXRDYWNoZS5wb3AoKXx8bmV3T2JzZXJ2ZWRTZXQoKSxsYXN0T2JzZXJ2ZWRTZXQub2JqZWN0PWIpLGxhc3RPYnNlcnZlZFNldC5vcGVuKGEsYiksbGFzdE9ic2VydmVkU2V0fWZ1bmN0aW9uIE9ic2VydmVyKCl7dGhpcy5zdGF0ZV89VU5PUEVORUQsdGhpcy5jYWxsYmFja189dm9pZCAwLHRoaXMudGFyZ2V0Xz12b2lkIDAsdGhpcy5kaXJlY3RPYnNlcnZlcl89dm9pZCAwLHRoaXMudmFsdWVfPXZvaWQgMCx0aGlzLmlkXz1uZXh0T2JzZXJ2ZXJJZCsrfWZ1bmN0aW9uIGFkZFRvQWxsKGEpe09ic2VydmVyLl9hbGxPYnNlcnZlcnNDb3VudCsrLGNvbGxlY3RPYnNlcnZlcnMmJmFsbE9ic2VydmVycy5wdXNoKGEpfWZ1bmN0aW9uIHJlbW92ZUZyb21BbGwoKXtPYnNlcnZlci5fYWxsT2JzZXJ2ZXJzQ291bnQtLX1mdW5jdGlvbiBPYmplY3RPYnNlcnZlcihhKXtPYnNlcnZlci5jYWxsKHRoaXMpLHRoaXMudmFsdWVfPWEsdGhpcy5vbGRPYmplY3RfPXZvaWQgMH1mdW5jdGlvbiBBcnJheU9ic2VydmVyKGEpe2lmKCFBcnJheS5pc0FycmF5KGEpKXRocm93IEVycm9yKCJQcm92aWRlZCBvYmplY3QgaXMgbm90IGFuIEFycmF5Iik7T2JqZWN0T2JzZXJ2ZXIuY2FsbCh0aGlzLGEpfWZ1bmN0aW9uIFBhdGhPYnNlcnZlcihhLGIpe09ic2VydmVyLmNhbGwodGhpcyksdGhpcy5vYmplY3RfPWEsdGhpcy5wYXRoXz1nZXRQYXRoKGIpLHRoaXMuZGlyZWN0T2JzZXJ2ZXJfPXZvaWQgMH1mdW5jdGlvbiBDb21wb3VuZE9ic2VydmVyKGEpe09ic2VydmVyLmNhbGwodGhpcyksdGhpcy5yZXBvcnRDaGFuZ2VzT25PcGVuXz1hLHRoaXMudmFsdWVfPVtdLHRoaXMuZGlyZWN0T2JzZXJ2ZXJfPXZvaWQgMCx0aGlzLm9ic2VydmVkXz1bXX1mdW5jdGlvbiBpZGVudEZuKGEpe3JldHVybiBhfWZ1bmN0aW9uIE9ic2VydmVyVHJhbnNmb3JtKGEsYixjLGQpe3RoaXMuY2FsbGJhY2tfPXZvaWQgMCx0aGlzLnRhcmdldF89dm9pZCAwLHRoaXMudmFsdWVfPXZvaWQgMCx0aGlzLm9ic2VydmFibGVfPWEsdGhpcy5nZXRWYWx1ZUZuXz1ifHxpZGVudEZuLHRoaXMuc2V0VmFsdWVGbl89Y3x8aWRlbnRGbix0aGlzLmRvbnRQYXNzVGhyb3VnaFNldF89ZH1mdW5jdGlvbiBkaWZmT2JqZWN0RnJvbUNoYW5nZVJlY29yZHMoYSxiLGMpe2Zvcih2YXIgZD17fSxlPXt9LGY9MDtmPGIubGVuZ3RoO2YrKyl7dmFyIGc9YltmXTtleHBlY3RlZFJlY29yZFR5cGVzW2cudHlwZV0/KGcubmFtZSBpbiBjfHwoY1tnLm5hbWVdPWcub2xkVmFsdWUpLCJ1cGRhdGUiIT1nLnR5cGUmJigiYWRkIiE9Zy50eXBlP2cubmFtZSBpbiBkPyhkZWxldGUgZFtnLm5hbWVdLGRlbGV0ZSBjW2cubmFtZV0pOmVbZy5uYW1lXT0hMDpnLm5hbWUgaW4gZT9kZWxldGUgZVtnLm5hbWVdOmRbZy5uYW1lXT0hMCkpOihjb25zb2xlLmVycm9yKCJVbmtub3duIGNoYW5nZVJlY29yZCB0eXBlOiAiK2cudHlwZSksY29uc29sZS5lcnJvcihnKSl9Zm9yKHZhciBoIGluIGQpZFtoXT1hW2hdO2Zvcih2YXIgaCBpbiBlKWVbaF09dm9pZCAwO3ZhciBpPXt9O2Zvcih2YXIgaCBpbiBjKWlmKCEoaCBpbiBkfHxoIGluIGUpKXt2YXIgaj1hW2hdO2NbaF0hPT1qJiYoaVtoXT1qKX1yZXR1cm57YWRkZWQ6ZCxyZW1vdmVkOmUsY2hhbmdlZDppfX1mdW5jdGlvbiBuZXdTcGxpY2UoYSxiLGMpe3JldHVybntpbmRleDphLHJlbW92ZWQ6YixhZGRlZENvdW50OmN9fWZ1bmN0aW9uIEFycmF5U3BsaWNlKCl7fWZ1bmN0aW9uIGNhbGNTcGxpY2VzKGEsYixjLGQsZSxmKXtyZXR1cm4gYXJyYXlTcGxpY2UuY2FsY1NwbGljZXMoYSxiLGMsZCxlLGYpfWZ1bmN0aW9uIGludGVyc2VjdChhLGIsYyxkKXtyZXR1cm4gYz5ifHxhPmQ/LTE6Yj09Y3x8ZD09YT8wOmM+YT9kPmI/Yi1jOmQtYzpiPmQ/ZC1hOmItYX1mdW5jdGlvbiBtZXJnZVNwbGljZShhLGIsYyxkKXtmb3IodmFyIGU9bmV3U3BsaWNlKGIsYyxkKSxmPSExLGc9MCxoPTA7aDxhLmxlbmd0aDtoKyspe3ZhciBpPWFbaF07aWYoaS5pbmRleCs9ZywhZil7dmFyIGo9aW50ZXJzZWN0KGUuaW5kZXgsZS5pbmRleCtlLnJlbW92ZWQubGVuZ3RoLGkuaW5kZXgsaS5pbmRleCtpLmFkZGVkQ291bnQpO2lmKGo+PTApe2Euc3BsaWNlKGgsMSksaC0tLGctPWkuYWRkZWRDb3VudC1pLnJlbW92ZWQubGVuZ3RoLGUuYWRkZWRDb3VudCs9aS5hZGRlZENvdW50LWo7dmFyIGs9ZS5yZW1vdmVkLmxlbmd0aCtpLnJlbW92ZWQubGVuZ3RoLWo7aWYoZS5hZGRlZENvdW50fHxrKXt2YXIgYz1pLnJlbW92ZWQ7aWYoZS5pbmRleDxpLmluZGV4KXt2YXIgbD1lLnJlbW92ZWQuc2xpY2UoMCxpLmluZGV4LWUuaW5kZXgpO0FycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KGwsYyksYz1sfWlmKGUuaW5kZXgrZS5yZW1vdmVkLmxlbmd0aD5pLmluZGV4K2kuYWRkZWRDb3VudCl7dmFyIG09ZS5yZW1vdmVkLnNsaWNlKGkuaW5kZXgraS5hZGRlZENvdW50LWUuaW5kZXgpO0FycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KGMsbSl9ZS5yZW1vdmVkPWMsaS5pbmRleDxlLmluZGV4JiYoZS5pbmRleD1pLmluZGV4KX1lbHNlIGY9ITB9ZWxzZSBpZihlLmluZGV4PGkuaW5kZXgpe2Y9ITAsYS5zcGxpY2UoaCwwLGUpLGgrKzt2YXIgbj1lLmFkZGVkQ291bnQtZS5yZW1vdmVkLmxlbmd0aDtpLmluZGV4Kz1uLGcrPW59fX1mfHxhLnB1c2goZSl9ZnVuY3Rpb24gY3JlYXRlSW5pdGlhbFNwbGljZXMoYSxiKXtmb3IodmFyIGM9W10sZD0wO2Q8Yi5sZW5ndGg7ZCsrKXt2YXIgZT1iW2RdO3N3aXRjaChlLnR5cGUpe2Nhc2Uic3BsaWNlIjptZXJnZVNwbGljZShjLGUuaW5kZXgsZS5yZW1vdmVkLnNsaWNlKCksZS5hZGRlZENvdW50KTticmVhaztjYXNlImFkZCI6Y2FzZSJ1cGRhdGUiOmNhc2UiZGVsZXRlIjppZighaXNJbmRleChlLm5hbWUpKWNvbnRpbnVlO3ZhciBmPXRvTnVtYmVyKGUubmFtZSk7aWYoMD5mKWNvbnRpbnVlO21lcmdlU3BsaWNlKGMsZixbZS5vbGRWYWx1ZV0sMSk7YnJlYWs7ZGVmYXVsdDpjb25zb2xlLmVycm9yKCJVbmV4cGVjdGVkIHJlY29yZCB0eXBlOiAiK0pTT04uc3RyaW5naWZ5KGUpKX19cmV0dXJuIGN9ZnVuY3Rpb24gcHJvamVjdEFycmF5U3BsaWNlcyhhLGIpe3ZhciBjPVtdO3JldHVybiBjcmVhdGVJbml0aWFsU3BsaWNlcyhhLGIpLmZvckVhY2goZnVuY3Rpb24oYil7cmV0dXJuIDE9PWIuYWRkZWRDb3VudCYmMT09Yi5yZW1vdmVkLmxlbmd0aD92b2lkKGIucmVtb3ZlZFswXSE9PWFbYi5pbmRleF0mJmMucHVzaChiKSk6dm9pZChjPWMuY29uY2F0KGNhbGNTcGxpY2VzKGEsYi5pbmRleCxiLmluZGV4K2IuYWRkZWRDb3VudCxiLnJlbW92ZWQsMCxiLnJlbW92ZWQubGVuZ3RoKSkpfSksY312YXIgdGVzdGluZ0V4cG9zZUN5Y2xlQ291bnQ9Z2xvYmFsLnRlc3RpbmdFeHBvc2VDeWNsZUNvdW50LGhhc09ic2VydmU9ZGV0ZWN0T2JqZWN0T2JzZXJ2ZSgpLGhhc0V2YWw9ZGV0ZWN0RXZhbCgpLG51bWJlcklzTmFOPWdsb2JhbC5OdW1iZXIuaXNOYU58fGZ1bmN0aW9uKGEpe3JldHVybiJudW1iZXIiPT10eXBlb2YgYSYmZ2xvYmFsLmlzTmFOKGEpfSxjcmVhdGVPYmplY3Q9Il9fcHJvdG9fXyJpbnt9P2Z1bmN0aW9uKGEpe3JldHVybiBhfTpmdW5jdGlvbihhKXt2YXIgYj1hLl9fcHJvdG9fXztpZighYilyZXR1cm4gYTt2YXIgYz1PYmplY3QuY3JlYXRlKGIpO3JldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhhKS5mb3JFYWNoKGZ1bmN0aW9uKGIpe09iamVjdC5kZWZpbmVQcm9wZXJ0eShjLGIsT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihhLGIpKX0pLGN9LGlkZW50U3RhcnQ9IlskX2EtekEtWl0iLGlkZW50UGFydD0iWyRfYS16QS1aMC05XSIsaWRlbnRSZWdFeHA9bmV3IFJlZ0V4cCgiXiIraWRlbnRTdGFydCsiKyIraWRlbnRQYXJ0KyIqJCIpLHBhdGhTdGF0ZU1hY2hpbmU9e2JlZm9yZVBhdGg6e3dzOlsiYmVmb3JlUGF0aCJdLGlkZW50OlsiaW5JZGVudCIsImFwcGVuZCJdLCJbIjpbImJlZm9yZUVsZW1lbnQiXSxlb2Y6WyJhZnRlclBhdGgiXX0saW5QYXRoOnt3czpbImluUGF0aCJdLCIuIjpbImJlZm9yZUlkZW50Il0sIlsiOlsiYmVmb3JlRWxlbWVudCJdLGVvZjpbImFmdGVyUGF0aCJdfSxiZWZvcmVJZGVudDp7d3M6WyJiZWZvcmVJZGVudCJdLGlkZW50OlsiaW5JZGVudCIsImFwcGVuZCJdfSxpbklkZW50OntpZGVudDpbImluSWRlbnQiLCJhcHBlbmQiXSwwOlsiaW5JZGVudCIsImFwcGVuZCJdLG51bWJlcjpbImluSWRlbnQiLCJhcHBlbmQiXSx3czpbImluUGF0aCIsInB1c2giXSwiLiI6WyJiZWZvcmVJZGVudCIsInB1c2giXSwiWyI6WyJiZWZvcmVFbGVtZW50IiwicHVzaCJdLGVvZjpbImFmdGVyUGF0aCIsInB1c2giXX0sYmVmb3JlRWxlbWVudDp7d3M6WyJiZWZvcmVFbGVtZW50Il0sMDpbImFmdGVyWmVybyIsImFwcGVuZCJdLG51bWJlcjpbImluSW5kZXgiLCJhcHBlbmQiXSwiJyI6WyJpblNpbmdsZVF1b3RlIiwiYXBwZW5kIiwiIl0sJyInOlsiaW5Eb3VibGVRdW90ZSIsImFwcGVuZCIsIiJdfSxhZnRlclplcm86e3dzOlsiYWZ0ZXJFbGVtZW50IiwicHVzaCJdLCJdIjpbImluUGF0aCIsInB1c2giXX0saW5JbmRleDp7MDpbImluSW5kZXgiLCJhcHBlbmQiXSxudW1iZXI6WyJpbkluZGV4IiwiYXBwZW5kIl0sd3M6WyJhZnRlckVsZW1lbnQiXSwiXSI6WyJpblBhdGgiLCJwdXNoIl19LGluU2luZ2xlUXVvdGU6eyInIjpbImFmdGVyRWxlbWVudCJdLGVvZjpbImVycm9yIl0sImVsc2UiOlsiaW5TaW5nbGVRdW90ZSIsImFwcGVuZCJdfSxpbkRvdWJsZVF1b3RlOnsnIic6WyJhZnRlckVsZW1lbnQiXSxlb2Y6WyJlcnJvciJdLCJlbHNlIjpbImluRG91YmxlUXVvdGUiLCJhcHBlbmQiXX0sYWZ0ZXJFbGVtZW50Ont3czpbImFmdGVyRWxlbWVudCJdLCJdIjpbImluUGF0aCIsInB1c2giXX19LGNvbnN0cnVjdG9ySXNQcml2YXRlPXt9LHBhdGhDYWNoZT17fTtQYXRoLmdldD1nZXRQYXRoLFBhdGgucHJvdG90eXBlPWNyZWF0ZU9iamVjdCh7X19wcm90b19fOltdLHZhbGlkOiEwLHRvU3RyaW5nOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPSIiLGI9MDtiPHRoaXMubGVuZ3RoO2IrKyl7dmFyIGM9dGhpc1tiXTthKz1pc0lkZW50KGMpP2I/Ii4iK2M6Yzpmb3JtYXRBY2Nlc3NvcihjKX1yZXR1cm4gYX0sZ2V0VmFsdWVGcm9tOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0wO2I8dGhpcy5sZW5ndGg7YisrKXtpZihudWxsPT1hKXJldHVybjthPWFbdGhpc1tiXV19cmV0dXJuIGF9LGl0ZXJhdGVPYmplY3RzOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTA7Yzx0aGlzLmxlbmd0aDtjKyspe2lmKGMmJihhPWFbdGhpc1tjLTFdXSksIWlzT2JqZWN0KGEpKXJldHVybjtiKGEsdGhpc1swXSl9fSxjb21waWxlZEdldFZhbHVlRnJvbUZuOmZ1bmN0aW9uKCl7dmFyIGE9IiIsYj0ib2JqIjthKz0iaWYgKG9iaiAhPSBudWxsIjtmb3IodmFyIGMsZD0wO2Q8dGhpcy5sZW5ndGgtMTtkKyspYz10aGlzW2RdLGIrPWlzSWRlbnQoYyk/Ii4iK2M6Zm9ybWF0QWNjZXNzb3IoYyksYSs9IiAmJlxuICAgICAiK2IrIiAhPSBudWxsIjthKz0iKVxuIjt2YXIgYz10aGlzW2RdO3JldHVybiBiKz1pc0lkZW50KGMpPyIuIitjOmZvcm1hdEFjY2Vzc29yKGMpLGErPSIgIHJldHVybiAiK2IrIjtcbmVsc2VcbiAgcmV0dXJuIHVuZGVmaW5lZDsiLG5ldyBGdW5jdGlvbigib2JqIixhKX0sc2V0VmFsdWVGcm9tOmZ1bmN0aW9uKGEsYil7aWYoIXRoaXMubGVuZ3RoKXJldHVybiExO2Zvcih2YXIgYz0wO2M8dGhpcy5sZW5ndGgtMTtjKyspe2lmKCFpc09iamVjdChhKSlyZXR1cm4hMTthPWFbdGhpc1tjXV19cmV0dXJuIGlzT2JqZWN0KGEpPyhhW3RoaXNbY11dPWIsITApOiExfX0pO3ZhciBpbnZhbGlkUGF0aD1uZXcgUGF0aCgiIixjb25zdHJ1Y3RvcklzUHJpdmF0ZSk7aW52YWxpZFBhdGgudmFsaWQ9ITEsaW52YWxpZFBhdGguZ2V0VmFsdWVGcm9tPWludmFsaWRQYXRoLnNldFZhbHVlRnJvbT1mdW5jdGlvbigpe307dmFyIE1BWF9ESVJUWV9DSEVDS19DWUNMRVM9MWUzLGVvbVRhc2tzPVtdLHJ1bkVPTT1oYXNPYnNlcnZlP2Z1bmN0aW9uKCl7dmFyIGE9e3BpbmdQb25nOiEwfSxiPSExO3JldHVybiBPYmplY3Qub2JzZXJ2ZShhLGZ1bmN0aW9uKCl7cnVuRU9NVGFza3MoKSxiPSExfSksZnVuY3Rpb24oYyl7ZW9tVGFza3MucHVzaChjKSxifHwoYj0hMCxhLnBpbmdQb25nPSFhLnBpbmdQb25nKX19KCk6ZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oYSl7ZW9tVGFza3MucHVzaChhKX19KCksb2JzZXJ2ZWRPYmplY3RDYWNoZT1bXSxvYnNlcnZlZFNldENhY2hlPVtdLGxhc3RPYnNlcnZlZFNldCxVTk9QRU5FRD0wLE9QRU5FRD0xLENMT1NFRD0yLFJFU0VUVElORz0zLG5leHRPYnNlcnZlcklkPTE7T2JzZXJ2ZXIucHJvdG90eXBlPXtvcGVuOmZ1bmN0aW9uKGEsYil7aWYodGhpcy5zdGF0ZV8hPVVOT1BFTkVEKXRocm93IEVycm9yKCJPYnNlcnZlciBoYXMgYWxyZWFkeSBiZWVuIG9wZW5lZC4iKTtyZXR1cm4gYWRkVG9BbGwodGhpcyksdGhpcy5jYWxsYmFja189YSx0aGlzLnRhcmdldF89Yix0aGlzLmNvbm5lY3RfKCksdGhpcy5zdGF0ZV89T1BFTkVELHRoaXMudmFsdWVffSxjbG9zZTpmdW5jdGlvbigpe3RoaXMuc3RhdGVfPT1PUEVORUQmJihyZW1vdmVGcm9tQWxsKHRoaXMpLHRoaXMuZGlzY29ubmVjdF8oKSx0aGlzLnZhbHVlXz12b2lkIDAsdGhpcy5jYWxsYmFja189dm9pZCAwLHRoaXMudGFyZ2V0Xz12b2lkIDAsdGhpcy5zdGF0ZV89Q0xPU0VEKX0sZGVsaXZlcjpmdW5jdGlvbigpe3RoaXMuc3RhdGVfPT1PUEVORUQmJmRpcnR5Q2hlY2sodGhpcyl9LHJlcG9ydF86ZnVuY3Rpb24oYSl7dHJ5e3RoaXMuY2FsbGJhY2tfLmFwcGx5KHRoaXMudGFyZ2V0XyxhKX1jYXRjaChiKXtPYnNlcnZlci5fZXJyb3JUaHJvd25EdXJpbmdDYWxsYmFjaz0hMCxjb25zb2xlLmVycm9yKCJFeGNlcHRpb24gY2F1Z2h0IGR1cmluZyBvYnNlcnZlciBjYWxsYmFjazogIisoYi5zdGFja3x8YikpfX0sZGlzY2FyZENoYW5nZXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jaGVja18odm9pZCAwLCEwKSx0aGlzLnZhbHVlX319O3ZhciBjb2xsZWN0T2JzZXJ2ZXJzPSFoYXNPYnNlcnZlLGFsbE9ic2VydmVycztPYnNlcnZlci5fYWxsT2JzZXJ2ZXJzQ291bnQ9MCxjb2xsZWN0T2JzZXJ2ZXJzJiYoYWxsT2JzZXJ2ZXJzPVtdKTt2YXIgcnVubmluZ01pY3JvdGFza0NoZWNrcG9pbnQ9ITEsaGFzRGVidWdGb3JjZUZ1bGxEZWxpdmVyeT1oYXNPYnNlcnZlJiZoYXNFdmFsJiZmdW5jdGlvbigpe3RyeXtyZXR1cm4gZXZhbCgiJVJ1bk1pY3JvdGFza3MoKSIpLCEwfWNhdGNoKGV4KXtyZXR1cm4hMX19KCk7Z2xvYmFsLlBsYXRmb3JtPWdsb2JhbC5QbGF0Zm9ybXx8e30sZ2xvYmFsLlBsYXRmb3JtLnBlcmZvcm1NaWNyb3Rhc2tDaGVja3BvaW50PWZ1bmN0aW9uKCl7aWYoIXJ1bm5pbmdNaWNyb3Rhc2tDaGVja3BvaW50KXtpZihoYXNEZWJ1Z0ZvcmNlRnVsbERlbGl2ZXJ5KXJldHVybiB2b2lkIGV2YWwoIiVSdW5NaWNyb3Rhc2tzKCkiKTtpZihjb2xsZWN0T2JzZXJ2ZXJzKXtydW5uaW5nTWljcm90YXNrQ2hlY2twb2ludD0hMDt2YXIgY3ljbGVzPTAsYW55Q2hhbmdlZCx0b0NoZWNrO2Rve2N5Y2xlcysrLHRvQ2hlY2s9YWxsT2JzZXJ2ZXJzLGFsbE9ic2VydmVycz1bXSxhbnlDaGFuZ2VkPSExO2Zvcih2YXIgaT0wO2k8dG9DaGVjay5sZW5ndGg7aSsrKXt2YXIgb2JzZXJ2ZXI9dG9DaGVja1tpXTtvYnNlcnZlci5zdGF0ZV89PU9QRU5FRCYmKG9ic2VydmVyLmNoZWNrXygpJiYoYW55Q2hhbmdlZD0hMCksYWxsT2JzZXJ2ZXJzLnB1c2gob2JzZXJ2ZXIpKX1ydW5FT01UYXNrcygpJiYoYW55Q2hhbmdlZD0hMCl9d2hpbGUoTUFYX0RJUlRZX0NIRUNLX0NZQ0xFUz5jeWNsZXMmJmFueUNoYW5nZWQpO3Rlc3RpbmdFeHBvc2VDeWNsZUNvdW50JiYoZ2xvYmFsLmRpcnR5Q2hlY2tDeWNsZUNvdW50PWN5Y2xlcykscnVubmluZ01pY3JvdGFza0NoZWNrcG9pbnQ9ITF9fX0sY29sbGVjdE9ic2VydmVycyYmKGdsb2JhbC5QbGF0Zm9ybS5jbGVhck9ic2VydmVycz1mdW5jdGlvbigpe2FsbE9ic2VydmVycz1bXX0pLE9iamVjdE9ic2VydmVyLnByb3RvdHlwZT1jcmVhdGVPYmplY3Qoe19fcHJvdG9fXzpPYnNlcnZlci5wcm90b3R5cGUsYXJyYXlPYnNlcnZlOiExLGNvbm5lY3RfOmZ1bmN0aW9uKCl7aGFzT2JzZXJ2ZT90aGlzLmRpcmVjdE9ic2VydmVyXz1nZXRPYnNlcnZlZE9iamVjdCh0aGlzLHRoaXMudmFsdWVfLHRoaXMuYXJyYXlPYnNlcnZlKTp0aGlzLm9sZE9iamVjdF89dGhpcy5jb3B5T2JqZWN0KHRoaXMudmFsdWVfKX0sY29weU9iamVjdDpmdW5jdGlvbihhKXt2YXIgYj1BcnJheS5pc0FycmF5KGEpP1tdOnt9O2Zvcih2YXIgYyBpbiBhKWJbY109YVtjXTtyZXR1cm4gQXJyYXkuaXNBcnJheShhKSYmKGIubGVuZ3RoPWEubGVuZ3RoKSxifSxjaGVja186ZnVuY3Rpb24oYSl7dmFyIGIsYztpZihoYXNPYnNlcnZlKXtpZighYSlyZXR1cm4hMTtjPXt9LGI9ZGlmZk9iamVjdEZyb21DaGFuZ2VSZWNvcmRzKHRoaXMudmFsdWVfLGEsYyl9ZWxzZSBjPXRoaXMub2xkT2JqZWN0XyxiPWRpZmZPYmplY3RGcm9tT2xkT2JqZWN0KHRoaXMudmFsdWVfLHRoaXMub2xkT2JqZWN0Xyk7cmV0dXJuIGRpZmZJc0VtcHR5KGIpPyExOihoYXNPYnNlcnZlfHwodGhpcy5vbGRPYmplY3RfPXRoaXMuY29weU9iamVjdCh0aGlzLnZhbHVlXykpLHRoaXMucmVwb3J0XyhbYi5hZGRlZHx8e30sYi5yZW1vdmVkfHx7fSxiLmNoYW5nZWR8fHt9LGZ1bmN0aW9uKGEpe3JldHVybiBjW2FdfV0pLCEwKX0sZGlzY29ubmVjdF86ZnVuY3Rpb24oKXtoYXNPYnNlcnZlPyh0aGlzLmRpcmVjdE9ic2VydmVyXy5jbG9zZSgpLHRoaXMuZGlyZWN0T2JzZXJ2ZXJfPXZvaWQgMCk6dGhpcy5vbGRPYmplY3RfPXZvaWQgMH0sZGVsaXZlcjpmdW5jdGlvbigpe3RoaXMuc3RhdGVfPT1PUEVORUQmJihoYXNPYnNlcnZlP3RoaXMuZGlyZWN0T2JzZXJ2ZXJfLmRlbGl2ZXIoITEpOmRpcnR5Q2hlY2sodGhpcykpfSxkaXNjYXJkQ2hhbmdlczpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRpcmVjdE9ic2VydmVyXz90aGlzLmRpcmVjdE9ic2VydmVyXy5kZWxpdmVyKCEwKTp0aGlzLm9sZE9iamVjdF89dGhpcy5jb3B5T2JqZWN0KHRoaXMudmFsdWVfKSx0aGlzLnZhbHVlX319KSxBcnJheU9ic2VydmVyLnByb3RvdHlwZT1jcmVhdGVPYmplY3Qoe19fcHJvdG9fXzpPYmplY3RPYnNlcnZlci5wcm90b3R5cGUsYXJyYXlPYnNlcnZlOiEwLGNvcHlPYmplY3Q6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuc2xpY2UoKX0sY2hlY2tfOmZ1bmN0aW9uKGEpe3ZhciBiO2lmKGhhc09ic2VydmUpe2lmKCFhKXJldHVybiExO2I9cHJvamVjdEFycmF5U3BsaWNlcyh0aGlzLnZhbHVlXyxhKX1lbHNlIGI9Y2FsY1NwbGljZXModGhpcy52YWx1ZV8sMCx0aGlzLnZhbHVlXy5sZW5ndGgsdGhpcy5vbGRPYmplY3RfLDAsdGhpcy5vbGRPYmplY3RfLmxlbmd0aCk7cmV0dXJuIGImJmIubGVuZ3RoPyhoYXNPYnNlcnZlfHwodGhpcy5vbGRPYmplY3RfPXRoaXMuY29weU9iamVjdCh0aGlzLnZhbHVlXykpLHRoaXMucmVwb3J0XyhbYl0pLCEwKTohMX19KSxBcnJheU9ic2VydmVyLmFwcGx5U3BsaWNlcz1mdW5jdGlvbihhLGIsYyl7Yy5mb3JFYWNoKGZ1bmN0aW9uKGMpe2Zvcih2YXIgZD1bYy5pbmRleCxjLnJlbW92ZWQubGVuZ3RoXSxlPWMuaW5kZXg7ZTxjLmluZGV4K2MuYWRkZWRDb3VudDspZC5wdXNoKGJbZV0pLGUrKztBcnJheS5wcm90b3R5cGUuc3BsaWNlLmFwcGx5KGEsZCl9KX0sUGF0aE9ic2VydmVyLnByb3RvdHlwZT1jcmVhdGVPYmplY3Qoe19fcHJvdG9fXzpPYnNlcnZlci5wcm90b3R5cGUsZ2V0IHBhdGgoKXtyZXR1cm4gdGhpcy5wYXRoX30sY29ubmVjdF86ZnVuY3Rpb24oKXtoYXNPYnNlcnZlJiYodGhpcy5kaXJlY3RPYnNlcnZlcl89Z2V0T2JzZXJ2ZWRTZXQodGhpcyx0aGlzLm9iamVjdF8pKSx0aGlzLmNoZWNrXyh2b2lkIDAsITApfSxkaXNjb25uZWN0XzpmdW5jdGlvbigpe3RoaXMudmFsdWVfPXZvaWQgMCx0aGlzLmRpcmVjdE9ic2VydmVyXyYmKHRoaXMuZGlyZWN0T2JzZXJ2ZXJfLmNsb3NlKHRoaXMpLHRoaXMuZGlyZWN0T2JzZXJ2ZXJfPXZvaWQgMCl9LGl0ZXJhdGVPYmplY3RzXzpmdW5jdGlvbihhKXt0aGlzLnBhdGhfLml0ZXJhdGVPYmplY3RzKHRoaXMub2JqZWN0XyxhKX0sY2hlY2tfOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy52YWx1ZV87cmV0dXJuIHRoaXMudmFsdWVfPXRoaXMucGF0aF8uZ2V0VmFsdWVGcm9tKHRoaXMub2JqZWN0XyksYnx8YXJlU2FtZVZhbHVlKHRoaXMudmFsdWVfLGMpPyExOih0aGlzLnJlcG9ydF8oW3RoaXMudmFsdWVfLGMsdGhpc10pLCEwKX0sc2V0VmFsdWU6ZnVuY3Rpb24oYSl7dGhpcy5wYXRoXyYmdGhpcy5wYXRoXy5zZXRWYWx1ZUZyb20odGhpcy5vYmplY3RfLGEpfX0pO3ZhciBvYnNlcnZlclNlbnRpbmVsPXt9O0NvbXBvdW5kT2JzZXJ2ZXIucHJvdG90eXBlPWNyZWF0ZU9iamVjdCh7X19wcm90b19fOk9ic2VydmVyLnByb3RvdHlwZSxjb25uZWN0XzpmdW5jdGlvbigpe2lmKGhhc09ic2VydmUpe2Zvcih2YXIgYSxiPSExLGM9MDtjPHRoaXMub2JzZXJ2ZWRfLmxlbmd0aDtjKz0yKWlmKGE9dGhpcy5vYnNlcnZlZF9bY10sYSE9PW9ic2VydmVyU2VudGluZWwpe2I9ITA7YnJlYWt9YiYmKHRoaXMuZGlyZWN0T2JzZXJ2ZXJfPWdldE9ic2VydmVkU2V0KHRoaXMsYSkpfXRoaXMuY2hlY2tfKHZvaWQgMCwhdGhpcy5yZXBvcnRDaGFuZ2VzT25PcGVuXyl9LGRpc2Nvbm5lY3RfOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPTA7YTx0aGlzLm9ic2VydmVkXy5sZW5ndGg7YSs9Mil0aGlzLm9ic2VydmVkX1thXT09PW9ic2VydmVyU2VudGluZWwmJnRoaXMub2JzZXJ2ZWRfW2ErMV0uY2xvc2UoKTt0aGlzLm9ic2VydmVkXy5sZW5ndGg9MCx0aGlzLnZhbHVlXy5sZW5ndGg9MCx0aGlzLmRpcmVjdE9ic2VydmVyXyYmKHRoaXMuZGlyZWN0T2JzZXJ2ZXJfLmNsb3NlKHRoaXMpLHRoaXMuZGlyZWN0T2JzZXJ2ZXJfPXZvaWQgMCl9LGFkZFBhdGg6ZnVuY3Rpb24oYSxiKXtpZih0aGlzLnN0YXRlXyE9VU5PUEVORUQmJnRoaXMuc3RhdGVfIT1SRVNFVFRJTkcpdGhyb3cgRXJyb3IoIkNhbm5vdCBhZGQgcGF0aHMgb25jZSBzdGFydGVkLiIpO3ZhciBiPWdldFBhdGgoYik7aWYodGhpcy5vYnNlcnZlZF8ucHVzaChhLGIpLHRoaXMucmVwb3J0Q2hhbmdlc09uT3Blbl8pe3ZhciBjPXRoaXMub2JzZXJ2ZWRfLmxlbmd0aC8yLTE7dGhpcy52YWx1ZV9bY109Yi5nZXRWYWx1ZUZyb20oYSl9fSxhZGRPYnNlcnZlcjpmdW5jdGlvbihhKXtpZih0aGlzLnN0YXRlXyE9VU5PUEVORUQmJnRoaXMuc3RhdGVfIT1SRVNFVFRJTkcpdGhyb3cgRXJyb3IoIkNhbm5vdCBhZGQgb2JzZXJ2ZXJzIG9uY2Ugc3RhcnRlZC4iKTtpZih0aGlzLm9ic2VydmVkXy5wdXNoKG9ic2VydmVyU2VudGluZWwsYSksdGhpcy5yZXBvcnRDaGFuZ2VzT25PcGVuXyl7dmFyIGI9dGhpcy5vYnNlcnZlZF8ubGVuZ3RoLzItMTt0aGlzLnZhbHVlX1tiXT1hLm9wZW4odGhpcy5kZWxpdmVyLHRoaXMpfX0sc3RhcnRSZXNldDpmdW5jdGlvbigpe2lmKHRoaXMuc3RhdGVfIT1PUEVORUQpdGhyb3cgRXJyb3IoIkNhbiBvbmx5IHJlc2V0IHdoaWxlIG9wZW4iKTt0aGlzLnN0YXRlXz1SRVNFVFRJTkcsdGhpcy5kaXNjb25uZWN0XygpfSxmaW5pc2hSZXNldDpmdW5jdGlvbigpe2lmKHRoaXMuc3RhdGVfIT1SRVNFVFRJTkcpdGhyb3cgRXJyb3IoIkNhbiBvbmx5IGZpbmlzaFJlc2V0IGFmdGVyIHN0YXJ0UmVzZXQiKTtyZXR1cm4gdGhpcy5zdGF0ZV89T1BFTkVELHRoaXMuY29ubmVjdF8oKSx0aGlzLnZhbHVlX30saXRlcmF0ZU9iamVjdHNfOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYixjPTA7Yzx0aGlzLm9ic2VydmVkXy5sZW5ndGg7Yys9MiliPXRoaXMub2JzZXJ2ZWRfW2NdLGIhPT1vYnNlcnZlclNlbnRpbmVsJiZ0aGlzLm9ic2VydmVkX1tjKzFdLml0ZXJhdGVPYmplY3RzKGIsYSl9LGNoZWNrXzpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYyxkPTA7ZDx0aGlzLm9ic2VydmVkXy5sZW5ndGg7ZCs9Mil7dmFyIGUsZj10aGlzLm9ic2VydmVkX1tkXSxnPXRoaXMub2JzZXJ2ZWRfW2QrMV07aWYoZj09PW9ic2VydmVyU2VudGluZWwpe3ZhciBoPWc7ZT10aGlzLnN0YXRlXz09PVVOT1BFTkVEP2gub3Blbih0aGlzLmRlbGl2ZXIsdGhpcyk6aC5kaXNjYXJkQ2hhbmdlcygpfWVsc2UgZT1nLmdldFZhbHVlRnJvbShmKTtiP3RoaXMudmFsdWVfW2QvMl09ZTphcmVTYW1lVmFsdWUoZSx0aGlzLnZhbHVlX1tkLzJdKXx8KGM9Y3x8W10sY1tkLzJdPXRoaXMudmFsdWVfW2QvMl0sdGhpcy52YWx1ZV9bZC8yXT1lKX1yZXR1cm4gYz8odGhpcy5yZXBvcnRfKFt0aGlzLnZhbHVlXyxjLHRoaXMub2JzZXJ2ZWRfXSksITApOiExfX0pLE9ic2VydmVyVHJhbnNmb3JtLnByb3RvdHlwZT17b3BlbjpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLmNhbGxiYWNrXz1hLHRoaXMudGFyZ2V0Xz1iLHRoaXMudmFsdWVfPXRoaXMuZ2V0VmFsdWVGbl8odGhpcy5vYnNlcnZhYmxlXy5vcGVuKHRoaXMub2JzZXJ2ZWRDYWxsYmFja18sdGhpcykpLHRoaXMudmFsdWVffSxvYnNlcnZlZENhbGxiYWNrXzpmdW5jdGlvbihhKXtpZihhPXRoaXMuZ2V0VmFsdWVGbl8oYSksIWFyZVNhbWVWYWx1ZShhLHRoaXMudmFsdWVfKSl7dmFyIGI9dGhpcy52YWx1ZV87dGhpcy52YWx1ZV89YSx0aGlzLmNhbGxiYWNrXy5jYWxsKHRoaXMudGFyZ2V0Xyx0aGlzLnZhbHVlXyxiKX19LGRpc2NhcmRDaGFuZ2VzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudmFsdWVfPXRoaXMuZ2V0VmFsdWVGbl8odGhpcy5vYnNlcnZhYmxlXy5kaXNjYXJkQ2hhbmdlcygpKSx0aGlzLnZhbHVlX30sZGVsaXZlcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLm9ic2VydmFibGVfLmRlbGl2ZXIoKX0sc2V0VmFsdWU6ZnVuY3Rpb24oYSl7cmV0dXJuIGE9dGhpcy5zZXRWYWx1ZUZuXyhhKSwhdGhpcy5kb250UGFzc1Rocm91Z2hTZXRfJiZ0aGlzLm9ic2VydmFibGVfLnNldFZhbHVlP3RoaXMub2JzZXJ2YWJsZV8uc2V0VmFsdWUoYSk6dm9pZCAwfSxjbG9zZTpmdW5jdGlvbigpe3RoaXMub2JzZXJ2YWJsZV8mJnRoaXMub2JzZXJ2YWJsZV8uY2xvc2UoKSx0aGlzLmNhbGxiYWNrXz12b2lkIDAsdGhpcy50YXJnZXRfPXZvaWQgMCx0aGlzLm9ic2VydmFibGVfPXZvaWQgMCx0aGlzLnZhbHVlXz12b2lkIDAsdGhpcy5nZXRWYWx1ZUZuXz12b2lkIDAsdGhpcy5zZXRWYWx1ZUZuXz12b2lkIDB9fTt2YXIgZXhwZWN0ZWRSZWNvcmRUeXBlcz17YWRkOiEwLHVwZGF0ZTohMCwiZGVsZXRlIjohMH0sRURJVF9MRUFWRT0wLEVESVRfVVBEQVRFPTEsRURJVF9BREQ9MixFRElUX0RFTEVURT0zO0FycmF5U3BsaWNlLnByb3RvdHlwZT17Y2FsY0VkaXREaXN0YW5jZXM6ZnVuY3Rpb24oYSxiLGMsZCxlLGYpe2Zvcih2YXIgZz1mLWUrMSxoPWMtYisxLGk9bmV3IEFycmF5KGcpLGo9MDtnPmo7aisrKWlbal09bmV3IEFycmF5KGgpLGlbal1bMF09ajtmb3IodmFyIGs9MDtoPms7aysrKWlbMF1ba109aztmb3IodmFyIGo9MTtnPmo7aisrKWZvcih2YXIgaz0xO2g+aztrKyspaWYodGhpcy5lcXVhbHMoYVtiK2stMV0sZFtlK2otMV0pKWlbal1ba109aVtqLTFdW2stMV07ZWxzZXt2YXIgbD1pW2otMV1ba10rMSxtPWlbal1bay0xXSsxO2lbal1ba109bT5sP2w6bX1yZXR1cm4gaX0sc3BsaWNlT3BlcmF0aW9uc0Zyb21FZGl0RGlzdGFuY2VzOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1hLmxlbmd0aC0xLGM9YVswXS5sZW5ndGgtMSxkPWFbYl1bY10sZT1bXTtiPjB8fGM+MDspaWYoMCE9YilpZigwIT1jKXt2YXIgZixnPWFbYi0xXVtjLTFdLGg9YVtiLTFdW2NdLGk9YVtiXVtjLTFdO2Y9aT5oP2c+aD9oOmc6Zz5pP2k6ZyxmPT1nPyhnPT1kP2UucHVzaChFRElUX0xFQVZFKTooZS5wdXNoKEVESVRfVVBEQVRFKSxkPWcpLGItLSxjLS0pOmY9PWg/KGUucHVzaChFRElUX0RFTEVURSksYi0tLGQ9aCk6KGUucHVzaChFRElUX0FERCksYy0tLGQ9aSl9ZWxzZSBlLnB1c2goRURJVF9ERUxFVEUpLGItLTtlbHNlIGUucHVzaChFRElUX0FERCksYy0tO3JldHVybiBlLnJldmVyc2UoKSxlfSxjYWxjU3BsaWNlczpmdW5jdGlvbihhLGIsYyxkLGUsZil7dmFyIGc9MCxoPTAsaT1NYXRoLm1pbihjLWIsZi1lKTtpZigwPT1iJiYwPT1lJiYoZz10aGlzLnNoYXJlZFByZWZpeChhLGQsaSkpLGM9PWEubGVuZ3RoJiZmPT1kLmxlbmd0aCYmKGg9dGhpcy5zaGFyZWRTdWZmaXgoYSxkLGktZykpLGIrPWcsZSs9ZyxjLT1oLGYtPWgsYy1iPT0wJiZmLWU9PTApcmV0dXJuW107aWYoYj09Yyl7Zm9yKHZhciBqPW5ld1NwbGljZShiLFtdLDApO2Y+ZTspai5yZW1vdmVkLnB1c2goZFtlKytdKTtyZXR1cm5bal19aWYoZT09ZilyZXR1cm5bbmV3U3BsaWNlKGIsW10sYy1iKV07Zm9yKHZhciBrPXRoaXMuc3BsaWNlT3BlcmF0aW9uc0Zyb21FZGl0RGlzdGFuY2VzKHRoaXMuY2FsY0VkaXREaXN0YW5jZXMoYSxiLGMsZCxlLGYpKSxqPXZvaWQgMCxsPVtdLG09YixuPWUsbz0wO288ay5sZW5ndGg7bysrKXN3aXRjaChrW29dKXtjYXNlIEVESVRfTEVBVkU6aiYmKGwucHVzaChqKSxqPXZvaWQgMCksbSsrLG4rKzticmVhaztjYXNlIEVESVRfVVBEQVRFOmp8fChqPW5ld1NwbGljZShtLFtdLDApKSxqLmFkZGVkQ291bnQrKyxtKyssai5yZW1vdmVkLnB1c2goZFtuXSksbisrO2JyZWFrO2Nhc2UgRURJVF9BREQ6anx8KGo9bmV3U3BsaWNlKG0sW10sMCkpLGouYWRkZWRDb3VudCsrLG0rKzticmVhaztjYXNlIEVESVRfREVMRVRFOmp8fChqPW5ld1NwbGljZShtLFtdLDApKSxqLnJlbW92ZWQucHVzaChkW25dKSxuKyt9cmV0dXJuIGomJmwucHVzaChqKSxsfSxzaGFyZWRQcmVmaXg6ZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZD0wO2M+ZDtkKyspaWYoIXRoaXMuZXF1YWxzKGFbZF0sYltkXSkpcmV0dXJuIGQ7cmV0dXJuIGN9LHNoYXJlZFN1ZmZpeDpmdW5jdGlvbihhLGIsYyl7Zm9yKHZhciBkPWEubGVuZ3RoLGU9Yi5sZW5ndGgsZj0wO2M+ZiYmdGhpcy5lcXVhbHMoYVstLWRdLGJbLS1lXSk7KWYrKztyZXR1cm4gZn0sY2FsY3VsYXRlU3BsaWNlczpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLmNhbGNTcGxpY2VzKGEsMCxhLmxlbmd0aCxiLDAsYi5sZW5ndGgpfSxlcXVhbHM6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT09PWJ9fTt2YXIgYXJyYXlTcGxpY2U9bmV3IEFycmF5U3BsaWNlO2dsb2JhbC5PYnNlcnZlcj1PYnNlcnZlcixnbG9iYWwuT2JzZXJ2ZXIucnVuRU9NXz1ydW5FT00sZ2xvYmFsLk9ic2VydmVyLm9ic2VydmVyU2VudGluZWxfPW9ic2VydmVyU2VudGluZWwsZ2xvYmFsLk9ic2VydmVyLmhhc09iamVjdE9ic2VydmU9aGFzT2JzZXJ2ZSxnbG9iYWwuQXJyYXlPYnNlcnZlcj1BcnJheU9ic2VydmVyLGdsb2JhbC5BcnJheU9ic2VydmVyLmNhbGN1bGF0ZVNwbGljZXM9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYXJyYXlTcGxpY2UuY2FsY3VsYXRlU3BsaWNlcyhhLGIpfSxnbG9iYWwuQXJyYXlTcGxpY2U9QXJyYXlTcGxpY2UsZ2xvYmFsLk9iamVjdE9ic2VydmVyPU9iamVjdE9ic2VydmVyLGdsb2JhbC5QYXRoT2JzZXJ2ZXI9UGF0aE9ic2VydmVyLGdsb2JhbC5Db21wb3VuZE9ic2VydmVyPUNvbXBvdW5kT2JzZXJ2ZXIsZ2xvYmFsLlBhdGg9UGF0aCxnbG9iYWwuT2JzZXJ2ZXJUcmFuc2Zvcm09T2JzZXJ2ZXJUcmFuc2Zvcm19KCJ1bmRlZmluZWQiIT10eXBlb2YgZ2xvYmFsJiZnbG9iYWwmJiJ1bmRlZmluZWQiIT10eXBlb2YgbW9kdWxlJiZtb2R1bGU/Z2xvYmFsOnRoaXN8fHdpbmRvdyksZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYShhKXtmb3IoO2EucGFyZW50Tm9kZTspYT1hLnBhcmVudE5vZGU7cmV0dXJuImZ1bmN0aW9uIj09dHlwZW9mIGEuZ2V0RWxlbWVudEJ5SWQ/YTpudWxsfWZ1bmN0aW9uIGIoYSxiLGMpe3ZhciBkPWEuYmluZGluZ3NfO3JldHVybiBkfHwoZD1hLmJpbmRpbmdzXz17fSksZFtiXSYmY1tiXS5jbG9zZSgpLGRbYl09Y31mdW5jdGlvbiBjKGEsYixjKXtyZXR1cm4gY31mdW5jdGlvbiBkKGEpe3JldHVybiBudWxsPT1hPyIiOmF9ZnVuY3Rpb24gZShhLGIpe2EuZGF0YT1kKGIpfWZ1bmN0aW9uIGYoYSl7cmV0dXJuIGZ1bmN0aW9uKGIpe3JldHVybiBlKGEsYil9fWZ1bmN0aW9uIGcoYSxiLGMsZSl7cmV0dXJuIGM/dm9pZChlP2Euc2V0QXR0cmlidXRlKGIsIiIpOmEucmVtb3ZlQXR0cmlidXRlKGIpKTp2b2lkIGEuc2V0QXR0cmlidXRlKGIsZChlKSl9ZnVuY3Rpb24gaChhLGIsYyl7cmV0dXJuIGZ1bmN0aW9uKGQpe2coYSxiLGMsZCl9fWZ1bmN0aW9uIGkoYSl7c3dpdGNoKGEudHlwZSl7Y2FzZSJjaGVja2JveCI6cmV0dXJuIHU7Y2FzZSJyYWRpbyI6Y2FzZSJzZWxlY3QtbXVsdGlwbGUiOmNhc2Uic2VsZWN0LW9uZSI6cmV0dXJuImNoYW5nZSI7Y2FzZSJyYW5nZSI6aWYoL1RyaWRlbnR8TVNJRS8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSlyZXR1cm4iY2hhbmdlIjtkZWZhdWx0OnJldHVybiJpbnB1dCJ9fWZ1bmN0aW9uIGooYSxiLGMsZSl7YVtiXT0oZXx8ZCkoYyl9ZnVuY3Rpb24gayhhLGIsYyl7cmV0dXJuIGZ1bmN0aW9uKGQpe3JldHVybiBqKGEsYixkLGMpfX1mdW5jdGlvbiBsKCl7fWZ1bmN0aW9uIG0oYSxiLGMsZCl7ZnVuY3Rpb24gZSgpe2Muc2V0VmFsdWUoYVtiXSksYy5kaXNjYXJkQ2hhbmdlcygpLChkfHxsKShhKSxQbGF0Zm9ybS5wZXJmb3JtTWljcm90YXNrQ2hlY2twb2ludCgpfXZhciBmPWkoYSk7cmV0dXJuIGEuYWRkRXZlbnRMaXN0ZW5lcihmLGUpLHtjbG9zZTpmdW5jdGlvbigpe2EucmVtb3ZlRXZlbnRMaXN0ZW5lcihmLGUpLGMuY2xvc2UoKX0sb2JzZXJ2YWJsZV86Y319ZnVuY3Rpb24gbihhKXtyZXR1cm4gQm9vbGVhbihhKX1mdW5jdGlvbiBvKGIpe2lmKGIuZm9ybSlyZXR1cm4gcyhiLmZvcm0uZWxlbWVudHMsZnVuY3Rpb24oYSl7cmV0dXJuIGEhPWImJiJJTlBVVCI9PWEudGFnTmFtZSYmInJhZGlvIj09YS50eXBlJiZhLm5hbWU9PWIubmFtZX0pO3ZhciBjPWEoYik7aWYoIWMpcmV0dXJuW107dmFyIGQ9Yy5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dFt0eXBlPSJyYWRpbyJdW25hbWU9IicrYi5uYW1lKyciXScpO3JldHVybiBzKGQsZnVuY3Rpb24oYSl7cmV0dXJuIGEhPWImJiFhLmZvcm19KX1mdW5jdGlvbiBwKGEpeyJJTlBVVCI9PT1hLnRhZ05hbWUmJiJyYWRpbyI9PT1hLnR5cGUmJm8oYSkuZm9yRWFjaChmdW5jdGlvbihhKXt2YXIgYj1hLmJpbmRpbmdzXy5jaGVja2VkO2ImJmIub2JzZXJ2YWJsZV8uc2V0VmFsdWUoITEpfSl9ZnVuY3Rpb24gcShhLGIpe3ZhciBjLGUsZixnPWEucGFyZW50Tm9kZTtnIGluc3RhbmNlb2YgSFRNTFNlbGVjdEVsZW1lbnQmJmcuYmluZGluZ3NfJiZnLmJpbmRpbmdzXy52YWx1ZSYmKGM9ZyxlPWMuYmluZGluZ3NfLnZhbHVlLGY9Yy52YWx1ZSksYS52YWx1ZT1kKGIpLGMmJmMudmFsdWUhPWYmJihlLm9ic2VydmFibGVfLnNldFZhbHVlKGMudmFsdWUpLGUub2JzZXJ2YWJsZV8uZGlzY2FyZENoYW5nZXMoKSxQbGF0Zm9ybS5wZXJmb3JtTWljcm90YXNrQ2hlY2twb2ludCgpKX1mdW5jdGlvbiByKGEpe3JldHVybiBmdW5jdGlvbihiKXtxKGEsYil9fXZhciBzPUFycmF5LnByb3RvdHlwZS5maWx0ZXIuY2FsbC5iaW5kKEFycmF5LnByb3RvdHlwZS5maWx0ZXIpO05vZGUucHJvdG90eXBlLmJpbmQ9ZnVuY3Rpb24oYSxiKXtjb25zb2xlLmVycm9yKCJVbmhhbmRsZWQgYmluZGluZyB0byBOb2RlOiAiLHRoaXMsYSxiKX0sTm9kZS5wcm90b3R5cGUuYmluZEZpbmlzaGVkPWZ1bmN0aW9uKCl7fTt2YXIgdD1jO09iamVjdC5kZWZpbmVQcm9wZXJ0eShQbGF0Zm9ybSwiZW5hYmxlQmluZGluZ3NSZWZsZWN0aW9uIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHQ9PT1ifSxzZXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIHQ9YT9iOmMsYX0sY29uZmlndXJhYmxlOiEwfSksVGV4dC5wcm90b3R5cGUuYmluZD1mdW5jdGlvbihhLGIsYyl7aWYoInRleHRDb250ZW50IiE9PWEpcmV0dXJuIE5vZGUucHJvdG90eXBlLmJpbmQuY2FsbCh0aGlzLGEsYixjKTtpZihjKXJldHVybiBlKHRoaXMsYik7dmFyIGQ9YjtyZXR1cm4gZSh0aGlzLGQub3BlbihmKHRoaXMpKSksdCh0aGlzLGEsZCl9LEVsZW1lbnQucHJvdG90eXBlLmJpbmQ9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPSI/Ij09YVthLmxlbmd0aC0xXTtpZihkJiYodGhpcy5yZW1vdmVBdHRyaWJ1dGUoYSksYT1hLnNsaWNlKDAsLTEpKSxjKXJldHVybiBnKHRoaXMsYSxkLGIpO3ZhciBlPWI7cmV0dXJuIGcodGhpcyxhLGQsZS5vcGVuKGgodGhpcyxhLGQpKSksdCh0aGlzLGEsZSl9O3ZhciB1OyFmdW5jdGlvbigpe3ZhciBhPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpLGI9YS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbnB1dCIpKTtiLnNldEF0dHJpYnV0ZSgidHlwZSIsImNoZWNrYm94Iik7dmFyIGMsZD0wO2IuYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLGZ1bmN0aW9uKCl7ZCsrLGM9Y3x8ImNsaWNrIn0pLGIuYWRkRXZlbnRMaXN0ZW5lcigiY2hhbmdlIixmdW5jdGlvbigpe2QrKyxjPWN8fCJjaGFuZ2UifSk7dmFyIGU9ZG9jdW1lbnQuY3JlYXRlRXZlbnQoIk1vdXNlRXZlbnQiKTtlLmluaXRNb3VzZUV2ZW50KCJjbGljayIsITAsITAsd2luZG93LDAsMCwwLDAsMCwhMSwhMSwhMSwhMSwwLG51bGwpLGIuZGlzcGF0Y2hFdmVudChlKSx1PTE9PWQ/ImNoYW5nZSI6Y30oKSxIVE1MSW5wdXRFbGVtZW50LnByb3RvdHlwZS5iaW5kPWZ1bmN0aW9uKGEsYyxlKXtpZigidmFsdWUiIT09YSYmImNoZWNrZWQiIT09YSlyZXR1cm4gSFRNTEVsZW1lbnQucHJvdG90eXBlLmJpbmQuY2FsbCh0aGlzLGEsYyxlKTt0aGlzLnJlbW92ZUF0dHJpYnV0ZShhKTt2YXIgZj0iY2hlY2tlZCI9PWE/bjpkLGc9ImNoZWNrZWQiPT1hP3A6bDtpZihlKXJldHVybiBqKHRoaXMsYSxjLGYpO3ZhciBoPWMsaT1tKHRoaXMsYSxoLGcpO3JldHVybiBqKHRoaXMsYSxoLm9wZW4oayh0aGlzLGEsZikpLGYpLGIodGhpcyxhLGkpfSxIVE1MVGV4dEFyZWFFbGVtZW50LnByb3RvdHlwZS5iaW5kPWZ1bmN0aW9uKGEsYixjKXtpZigidmFsdWUiIT09YSlyZXR1cm4gSFRNTEVsZW1lbnQucHJvdG90eXBlLmJpbmQuY2FsbCh0aGlzLGEsYixjKTtpZih0aGlzLnJlbW92ZUF0dHJpYnV0ZSgidmFsdWUiKSxjKXJldHVybiBqKHRoaXMsInZhbHVlIixiKTt2YXIgZT1iLGY9bSh0aGlzLCJ2YWx1ZSIsZSk7cmV0dXJuIGoodGhpcywidmFsdWUiLGUub3BlbihrKHRoaXMsInZhbHVlIixkKSkpLHQodGhpcyxhLGYpfSxIVE1MT3B0aW9uRWxlbWVudC5wcm90b3R5cGUuYmluZD1mdW5jdGlvbihhLGIsYyl7aWYoInZhbHVlIiE9PWEpcmV0dXJuIEhUTUxFbGVtZW50LnByb3RvdHlwZS5iaW5kLmNhbGwodGhpcyxhLGIsYyk7aWYodGhpcy5yZW1vdmVBdHRyaWJ1dGUoInZhbHVlIiksYylyZXR1cm4gcSh0aGlzLGIpOwp2YXIgZD1iLGU9bSh0aGlzLCJ2YWx1ZSIsZCk7cmV0dXJuIHEodGhpcyxkLm9wZW4ocih0aGlzKSkpLHQodGhpcyxhLGUpfSxIVE1MU2VsZWN0RWxlbWVudC5wcm90b3R5cGUuYmluZD1mdW5jdGlvbihhLGMsZCl7aWYoInNlbGVjdGVkaW5kZXgiPT09YSYmKGE9InNlbGVjdGVkSW5kZXgiKSwic2VsZWN0ZWRJbmRleCIhPT1hJiYidmFsdWUiIT09YSlyZXR1cm4gSFRNTEVsZW1lbnQucHJvdG90eXBlLmJpbmQuY2FsbCh0aGlzLGEsYyxkKTtpZih0aGlzLnJlbW92ZUF0dHJpYnV0ZShhKSxkKXJldHVybiBqKHRoaXMsYSxjKTt2YXIgZT1jLGY9bSh0aGlzLGEsZSk7cmV0dXJuIGoodGhpcyxhLGUub3BlbihrKHRoaXMsYSkpKSxiKHRoaXMsYSxmKX19KHRoaXMpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe2lmKCFhKXRocm93IG5ldyBFcnJvcigiQXNzZXJ0aW9uIGZhaWxlZCIpfWZ1bmN0aW9uIGMoYSl7Zm9yKHZhciBiO2I9YS5wYXJlbnROb2RlOylhPWI7cmV0dXJuIGF9ZnVuY3Rpb24gZChhLGIpe2lmKGIpe2Zvcih2YXIgZCxlPSIjIitiOyFkJiYoYT1jKGEpLGEucHJvdG9Db250ZW50Xz9kPWEucHJvdG9Db250ZW50Xy5xdWVyeVNlbGVjdG9yKGUpOmEuZ2V0RWxlbWVudEJ5SWQmJihkPWEuZ2V0RWxlbWVudEJ5SWQoYikpLCFkJiZhLnRlbXBsYXRlQ3JlYXRvcl8pOylhPWEudGVtcGxhdGVDcmVhdG9yXztyZXR1cm4gZH19ZnVuY3Rpb24gZShhKXtyZXR1cm4idGVtcGxhdGUiPT1hLnRhZ05hbWUmJiJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI9PWEubmFtZXNwYWNlVVJJfWZ1bmN0aW9uIGYoYSl7cmV0dXJuIlRFTVBMQVRFIj09YS50YWdOYW1lJiYiaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCI9PWEubmFtZXNwYWNlVVJJfWZ1bmN0aW9uIGcoYSl7cmV0dXJuIEJvb2xlYW4oTFthLnRhZ05hbWVdJiZhLmhhc0F0dHJpYnV0ZSgidGVtcGxhdGUiKSl9ZnVuY3Rpb24gaChhKXtyZXR1cm4gdm9pZCAwPT09YS5pc1RlbXBsYXRlXyYmKGEuaXNUZW1wbGF0ZV89IlRFTVBMQVRFIj09YS50YWdOYW1lfHxnKGEpKSxhLmlzVGVtcGxhdGVffWZ1bmN0aW9uIGkoYSxiKXt2YXIgYz1hLnF1ZXJ5U2VsZWN0b3JBbGwoTik7aChhKSYmYihhKSxHKGMsYil9ZnVuY3Rpb24gaihhKXtmdW5jdGlvbiBiKGEpe0hUTUxUZW1wbGF0ZUVsZW1lbnQuZGVjb3JhdGUoYSl8fGooYS5jb250ZW50KX1pKGEsYil9ZnVuY3Rpb24gayhhLGIpe09iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGIpLmZvckVhY2goZnVuY3Rpb24oYyl7T2JqZWN0LmRlZmluZVByb3BlcnR5KGEsYyxPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGIsYykpfSl9ZnVuY3Rpb24gbChhKXt2YXIgYj1hLm93bmVyRG9jdW1lbnQ7aWYoIWIuZGVmYXVsdFZpZXcpcmV0dXJuIGI7dmFyIGM9Yi50ZW1wbGF0ZUNvbnRlbnRzT3duZXJfO2lmKCFjKXtmb3IoYz1iLmltcGxlbWVudGF0aW9uLmNyZWF0ZUhUTUxEb2N1bWVudCgiIik7Yy5sYXN0Q2hpbGQ7KWMucmVtb3ZlQ2hpbGQoYy5sYXN0Q2hpbGQpO2IudGVtcGxhdGVDb250ZW50c093bmVyXz1jfXJldHVybiBjfWZ1bmN0aW9uIG0oYSl7aWYoIWEuc3RhZ2luZ0RvY3VtZW50Xyl7dmFyIGI9YS5vd25lckRvY3VtZW50O2lmKCFiLnN0YWdpbmdEb2N1bWVudF8pe2Iuc3RhZ2luZ0RvY3VtZW50Xz1iLmltcGxlbWVudGF0aW9uLmNyZWF0ZUhUTUxEb2N1bWVudCgiIiksYi5zdGFnaW5nRG9jdW1lbnRfLmlzU3RhZ2luZ0RvY3VtZW50PSEwO3ZhciBjPWIuc3RhZ2luZ0RvY3VtZW50Xy5jcmVhdGVFbGVtZW50KCJiYXNlIik7Yy5ocmVmPWRvY3VtZW50LmJhc2VVUkksYi5zdGFnaW5nRG9jdW1lbnRfLmhlYWQuYXBwZW5kQ2hpbGQoYyksYi5zdGFnaW5nRG9jdW1lbnRfLnN0YWdpbmdEb2N1bWVudF89Yi5zdGFnaW5nRG9jdW1lbnRffWEuc3RhZ2luZ0RvY3VtZW50Xz1iLnN0YWdpbmdEb2N1bWVudF99cmV0dXJuIGEuc3RhZ2luZ0RvY3VtZW50X31mdW5jdGlvbiBuKGEpe3ZhciBiPWEub3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0ZW1wbGF0ZSIpO2EucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoYixhKTtmb3IodmFyIGM9YS5hdHRyaWJ1dGVzLGQ9Yy5sZW5ndGg7ZC0tPjA7KXt2YXIgZT1jW2RdO0tbZS5uYW1lXSYmKCJ0ZW1wbGF0ZSIhPT1lLm5hbWUmJmIuc2V0QXR0cmlidXRlKGUubmFtZSxlLnZhbHVlKSxhLnJlbW92ZUF0dHJpYnV0ZShlLm5hbWUpKX1yZXR1cm4gYn1mdW5jdGlvbiBvKGEpe3ZhciBiPWEub3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0ZW1wbGF0ZSIpO2EucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoYixhKTtmb3IodmFyIGM9YS5hdHRyaWJ1dGVzLGQ9Yy5sZW5ndGg7ZC0tPjA7KXt2YXIgZT1jW2RdO2Iuc2V0QXR0cmlidXRlKGUubmFtZSxlLnZhbHVlKSxhLnJlbW92ZUF0dHJpYnV0ZShlLm5hbWUpfXJldHVybiBhLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYSksYn1mdW5jdGlvbiBwKGEsYixjKXt2YXIgZD1hLmNvbnRlbnQ7aWYoYylyZXR1cm4gdm9pZCBkLmFwcGVuZENoaWxkKGIpO2Zvcih2YXIgZTtlPWIuZmlyc3RDaGlsZDspZC5hcHBlbmRDaGlsZChlKX1mdW5jdGlvbiBxKGEpe1A/YS5fX3Byb3RvX189SFRNTFRlbXBsYXRlRWxlbWVudC5wcm90b3R5cGU6ayhhLEhUTUxUZW1wbGF0ZUVsZW1lbnQucHJvdG90eXBlKX1mdW5jdGlvbiByKGEpe2Euc2V0TW9kZWxGbl98fChhLnNldE1vZGVsRm5fPWZ1bmN0aW9uKCl7YS5zZXRNb2RlbEZuU2NoZWR1bGVkXz0hMTt2YXIgYj16KGEsYS5kZWxlZ2F0ZV8mJmEuZGVsZWdhdGVfLnByZXBhcmVCaW5kaW5nKTt3KGEsYixhLm1vZGVsXyl9KSxhLnNldE1vZGVsRm5TY2hlZHVsZWRffHwoYS5zZXRNb2RlbEZuU2NoZWR1bGVkXz0hMCxPYnNlcnZlci5ydW5FT01fKGEuc2V0TW9kZWxGbl8pKX1mdW5jdGlvbiBzKGEsYixjLGQpe2lmKGEmJmEubGVuZ3RoKXtmb3IodmFyIGUsZj1hLmxlbmd0aCxnPTAsaD0wLGk9MCxqPSEwO2Y+aDspe3ZhciBnPWEuaW5kZXhPZigie3siLGgpLGs9YS5pbmRleE9mKCJbWyIsaCksbD0hMSxtPSJ9fSI7aWYoaz49MCYmKDA+Z3x8Zz5rKSYmKGc9ayxsPSEwLG09Il1dIiksaT0wPmc/LTE6YS5pbmRleE9mKG0sZysyKSwwPmkpe2lmKCFlKXJldHVybjtlLnB1c2goYS5zbGljZShoKSk7YnJlYWt9ZT1lfHxbXSxlLnB1c2goYS5zbGljZShoLGcpKTt2YXIgbj1hLnNsaWNlKGcrMixpKS50cmltKCk7ZS5wdXNoKGwpLGo9aiYmbDt2YXIgbz1kJiZkKG4sYixjKTtlLnB1c2gobnVsbD09bz9QYXRoLmdldChuKTpudWxsKSxlLnB1c2gobyksaD1pKzJ9cmV0dXJuIGg9PT1mJiZlLnB1c2goIiIpLGUuaGFzT25lUGF0aD01PT09ZS5sZW5ndGgsZS5pc1NpbXBsZVBhdGg9ZS5oYXNPbmVQYXRoJiYiIj09ZVswXSYmIiI9PWVbNF0sZS5vbmx5T25lVGltZT1qLGUuY29tYmluYXRvcj1mdW5jdGlvbihhKXtmb3IodmFyIGI9ZVswXSxjPTE7YzxlLmxlbmd0aDtjKz00KXt2YXIgZD1lLmhhc09uZVBhdGg/YTphWyhjLTEpLzRdO3ZvaWQgMCE9PWQmJihiKz1kKSxiKz1lW2MrM119cmV0dXJuIGJ9LGV9fWZ1bmN0aW9uIHQoYSxiLGMsZCl7aWYoYi5oYXNPbmVQYXRoKXt2YXIgZT1iWzNdLGY9ZT9lKGQsYywhMCk6YlsyXS5nZXRWYWx1ZUZyb20oZCk7cmV0dXJuIGIuaXNTaW1wbGVQYXRoP2Y6Yi5jb21iaW5hdG9yKGYpfWZvcih2YXIgZz1bXSxoPTE7aDxiLmxlbmd0aDtoKz00KXt2YXIgZT1iW2grMl07Z1soaC0xKS80XT1lP2UoZCxjKTpiW2grMV0uZ2V0VmFsdWVGcm9tKGQpfXJldHVybiBiLmNvbWJpbmF0b3IoZyl9ZnVuY3Rpb24gdShhLGIsYyxkKXt2YXIgZT1iWzNdLGY9ZT9lKGQsYywhMSk6bmV3IFBhdGhPYnNlcnZlcihkLGJbMl0pO3JldHVybiBiLmlzU2ltcGxlUGF0aD9mOm5ldyBPYnNlcnZlclRyYW5zZm9ybShmLGIuY29tYmluYXRvcil9ZnVuY3Rpb24gdihhLGIsYyxkKXtpZihiLm9ubHlPbmVUaW1lKXJldHVybiB0KGEsYixjLGQpO2lmKGIuaGFzT25lUGF0aClyZXR1cm4gdShhLGIsYyxkKTtmb3IodmFyIGU9bmV3IENvbXBvdW5kT2JzZXJ2ZXIsZj0xO2Y8Yi5sZW5ndGg7Zis9NCl7dmFyIGc9YltmXSxoPWJbZisyXTtpZihoKXt2YXIgaT1oKGQsYyxnKTtnP2UuYWRkUGF0aChpKTplLmFkZE9ic2VydmVyKGkpfWVsc2V7dmFyIGo9YltmKzFdO2c/ZS5hZGRQYXRoKGouZ2V0VmFsdWVGcm9tKGQpKTplLmFkZFBhdGgoZCxqKX19cmV0dXJuIG5ldyBPYnNlcnZlclRyYW5zZm9ybShlLGIuY29tYmluYXRvcil9ZnVuY3Rpb24gdyhhLGIsYyxkKXtmb3IodmFyIGU9MDtlPGIubGVuZ3RoO2UrPTIpe3ZhciBmPWJbZV0sZz1iW2UrMV0saD12KGYsZyxhLGMpLGk9YS5iaW5kKGYsaCxnLm9ubHlPbmVUaW1lKTtpJiZkJiZkLnB1c2goaSl9aWYoYS5iaW5kRmluaXNoZWQoKSxiLmlzVGVtcGxhdGUpe2EubW9kZWxfPWM7dmFyIGo9YS5wcm9jZXNzQmluZGluZ0RpcmVjdGl2ZXNfKGIpO2QmJmomJmQucHVzaChqKX19ZnVuY3Rpb24geChhLGIsYyl7dmFyIGQ9YS5nZXRBdHRyaWJ1dGUoYik7cmV0dXJuIHMoIiI9PWQ/Int7fX0iOmQsYixhLGMpfWZ1bmN0aW9uIHkoYSxjKXtiKGEpO2Zvcih2YXIgZD1bXSxlPTA7ZTxhLmF0dHJpYnV0ZXMubGVuZ3RoO2UrKyl7Zm9yKHZhciBmPWEuYXR0cmlidXRlc1tlXSxnPWYubmFtZSxpPWYudmFsdWU7Il8iPT09Z1swXTspZz1nLnN1YnN0cmluZygxKTtpZighaChhKXx8ZyE9PUomJmchPT1IJiZnIT09SSl7dmFyIGo9cyhpLGcsYSxjKTtqJiZkLnB1c2goZyxqKX19cmV0dXJuIGgoYSkmJihkLmlzVGVtcGxhdGU9ITAsZC5pZj14KGEsSixjKSxkLmJpbmQ9eChhLEgsYyksZC5yZXBlYXQ9eChhLEksYyksIWQuaWZ8fGQuYmluZHx8ZC5yZXBlYXR8fChkLmJpbmQ9cygie3t9fSIsSCxhLGMpKSksZH1mdW5jdGlvbiB6KGEsYil7aWYoYS5ub2RlVHlwZT09PU5vZGUuRUxFTUVOVF9OT0RFKXJldHVybiB5KGEsYik7aWYoYS5ub2RlVHlwZT09PU5vZGUuVEVYVF9OT0RFKXt2YXIgYz1zKGEuZGF0YSwidGV4dENvbnRlbnQiLGEsYik7aWYoYylyZXR1cm5bInRleHRDb250ZW50IixjXX1yZXR1cm5bXX1mdW5jdGlvbiBBKGEsYixjLGQsZSxmLGcpe2Zvcih2YXIgaD1iLmFwcGVuZENoaWxkKGMuaW1wb3J0Tm9kZShhLCExKSksaT0wLGo9YS5maXJzdENoaWxkO2o7aj1qLm5leHRTaWJsaW5nKUEoaixoLGMsZC5jaGlsZHJlbltpKytdLGUsZixnKTtyZXR1cm4gZC5pc1RlbXBsYXRlJiYoSFRNTFRlbXBsYXRlRWxlbWVudC5kZWNvcmF0ZShoLGEpLGYmJmguc2V0RGVsZWdhdGVfKGYpKSx3KGgsZCxlLGcpLGh9ZnVuY3Rpb24gQihhLGIpe3ZhciBjPXooYSxiKTtjLmNoaWxkcmVuPXt9O2Zvcih2YXIgZD0wLGU9YS5maXJzdENoaWxkO2U7ZT1lLm5leHRTaWJsaW5nKWMuY2hpbGRyZW5bZCsrXT1CKGUsYik7cmV0dXJuIGN9ZnVuY3Rpb24gQyhhKXt2YXIgYj1hLmlkXztyZXR1cm4gYnx8KGI9YS5pZF89UysrKSxifWZ1bmN0aW9uIEQoYSxiKXt2YXIgYz1DKGEpO2lmKGIpe3ZhciBkPWIuYmluZGluZ01hcHNbY107cmV0dXJuIGR8fChkPWIuYmluZGluZ01hcHNbY109QihhLGIucHJlcGFyZUJpbmRpbmcpfHxbXSksZH12YXIgZD1hLmJpbmRpbmdNYXBfO3JldHVybiBkfHwoZD1hLmJpbmRpbmdNYXBfPUIoYSx2b2lkIDApfHxbXSksZH1mdW5jdGlvbiBFKGEpe3RoaXMuY2xvc2VkPSExLHRoaXMudGVtcGxhdGVFbGVtZW50Xz1hLHRoaXMuaW5zdGFuY2VzPVtdLHRoaXMuZGVwcz12b2lkIDAsdGhpcy5pdGVyYXRlZFZhbHVlPVtdLHRoaXMucHJlc2VudFZhbHVlPXZvaWQgMCx0aGlzLmFycmF5T2JzZXJ2ZXI9dm9pZCAwfXZhciBGLEc9QXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbC5iaW5kKEFycmF5LnByb3RvdHlwZS5mb3JFYWNoKTthLk1hcCYmImZ1bmN0aW9uIj09dHlwZW9mIGEuTWFwLnByb3RvdHlwZS5mb3JFYWNoP0Y9YS5NYXA6KEY9ZnVuY3Rpb24oKXt0aGlzLmtleXM9W10sdGhpcy52YWx1ZXM9W119LEYucHJvdG90eXBlPXtzZXQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmtleXMuaW5kZXhPZihhKTswPmM/KHRoaXMua2V5cy5wdXNoKGEpLHRoaXMudmFsdWVzLnB1c2goYikpOnRoaXMudmFsdWVzW2NdPWJ9LGdldDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmtleXMuaW5kZXhPZihhKTtpZighKDA+YikpcmV0dXJuIHRoaXMudmFsdWVzW2JdfSwiZGVsZXRlIjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmtleXMuaW5kZXhPZihhKTtyZXR1cm4gMD5iPyExOih0aGlzLmtleXMuc3BsaWNlKGIsMSksdGhpcy52YWx1ZXMuc3BsaWNlKGIsMSksITApfSxmb3JFYWNoOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTA7Yzx0aGlzLmtleXMubGVuZ3RoO2MrKylhLmNhbGwoYnx8dGhpcyx0aGlzLnZhbHVlc1tjXSx0aGlzLmtleXNbY10sdGhpcyl9fSk7ImZ1bmN0aW9uIiE9dHlwZW9mIGRvY3VtZW50LmNvbnRhaW5zJiYoRG9jdW1lbnQucHJvdG90eXBlLmNvbnRhaW5zPWZ1bmN0aW9uKGEpe3JldHVybiBhPT09dGhpc3x8YS5wYXJlbnROb2RlPT09dGhpcz8hMDp0aGlzLmRvY3VtZW50RWxlbWVudC5jb250YWlucyhhKX0pO3ZhciBIPSJiaW5kIixJPSJyZXBlYXQiLEo9ImlmIixLPXt0ZW1wbGF0ZTohMCxyZXBlYXQ6ITAsYmluZDohMCxyZWY6ITB9LEw9e1RIRUFEOiEwLFRCT0RZOiEwLFRGT09UOiEwLFRIOiEwLFRSOiEwLFREOiEwLENPTEdST1VQOiEwLENPTDohMCxDQVBUSU9OOiEwLE9QVElPTjohMCxPUFRHUk9VUDohMH0sTT0idW5kZWZpbmVkIiE9dHlwZW9mIEhUTUxUZW1wbGF0ZUVsZW1lbnQ7TSYmIWZ1bmN0aW9uKCl7dmFyIGE9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidGVtcGxhdGUiKSxiPWEuY29udGVudC5vd25lckRvY3VtZW50LGM9Yi5hcHBlbmRDaGlsZChiLmNyZWF0ZUVsZW1lbnQoImh0bWwiKSksZD1jLmFwcGVuZENoaWxkKGIuY3JlYXRlRWxlbWVudCgiaGVhZCIpKSxlPWIuY3JlYXRlRWxlbWVudCgiYmFzZSIpO2UuaHJlZj1kb2N1bWVudC5iYXNlVVJJLGQuYXBwZW5kQ2hpbGQoZSl9KCk7dmFyIE49InRlbXBsYXRlLCAiK09iamVjdC5rZXlzKEwpLm1hcChmdW5jdGlvbihhKXtyZXR1cm4gYS50b0xvd2VyQ2FzZSgpKyJbdGVtcGxhdGVdIn0pLmpvaW4oIiwgIik7ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsZnVuY3Rpb24oKXtqKGRvY3VtZW50KSxQbGF0Zm9ybS5wZXJmb3JtTWljcm90YXNrQ2hlY2twb2ludCgpfSwhMSksTXx8KGEuSFRNTFRlbXBsYXRlRWxlbWVudD1mdW5jdGlvbigpe3Rocm93IFR5cGVFcnJvcigiSWxsZWdhbCBjb25zdHJ1Y3RvciIpfSk7dmFyIE8sUD0iX19wcm90b19fImlue307ImZ1bmN0aW9uIj09dHlwZW9mIE11dGF0aW9uT2JzZXJ2ZXImJihPPW5ldyBNdXRhdGlvbk9ic2VydmVyKGZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0wO2I8YS5sZW5ndGg7YisrKWFbYl0udGFyZ2V0LnJlZkNoYW5nZWRfKCl9KSksSFRNTFRlbXBsYXRlRWxlbWVudC5kZWNvcmF0ZT1mdW5jdGlvbihhLGMpe2lmKGEudGVtcGxhdGVJc0RlY29yYXRlZF8pcmV0dXJuITE7dmFyIGQ9YTtkLnRlbXBsYXRlSXNEZWNvcmF0ZWRfPSEwO3ZhciBoPWYoZCkmJk0saT1oLGs9IWgsbT0hMTtpZihofHwoZyhkKT8oYighYyksZD1uKGEpLGQudGVtcGxhdGVJc0RlY29yYXRlZF89ITAsaD1NLG09ITApOmUoZCkmJihkPW8oYSksZC50ZW1wbGF0ZUlzRGVjb3JhdGVkXz0hMCxoPU0pKSwhaCl7cShkKTt2YXIgcj1sKGQpO2QuY29udGVudF89ci5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCl9cmV0dXJuIGM/ZC5pbnN0YW5jZVJlZl89YzprP3AoZCxhLG0pOmkmJmooZC5jb250ZW50KSwhMH0sSFRNTFRlbXBsYXRlRWxlbWVudC5ib290c3RyYXA9ajt2YXIgUT1hLkhUTUxVbmtub3duRWxlbWVudHx8SFRNTEVsZW1lbnQsUj17Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudF99LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfTtNfHwoSFRNTFRlbXBsYXRlRWxlbWVudC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShRLnByb3RvdHlwZSksT2JqZWN0LmRlZmluZVByb3BlcnR5KEhUTUxUZW1wbGF0ZUVsZW1lbnQucHJvdG90eXBlLCJjb250ZW50IixSKSksayhIVE1MVGVtcGxhdGVFbGVtZW50LnByb3RvdHlwZSx7YmluZDpmdW5jdGlvbihhLGIsYyl7aWYoInJlZiIhPWEpcmV0dXJuIEVsZW1lbnQucHJvdG90eXBlLmJpbmQuY2FsbCh0aGlzLGEsYixjKTt2YXIgZD10aGlzLGU9Yz9iOmIub3BlbihmdW5jdGlvbihhKXtkLnNldEF0dHJpYnV0ZSgicmVmIixhKSxkLnJlZkNoYW5nZWRfKCl9KTtyZXR1cm4gdGhpcy5zZXRBdHRyaWJ1dGUoInJlZiIsZSksdGhpcy5yZWZDaGFuZ2VkXygpLGM/dm9pZCAwOih0aGlzLmJpbmRpbmdzXz90aGlzLmJpbmRpbmdzXy5yZWY9Yjp0aGlzLmJpbmRpbmdzXz17cmVmOmJ9LGIpfSxwcm9jZXNzQmluZGluZ0RpcmVjdGl2ZXNfOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLml0ZXJhdG9yXyYmdGhpcy5pdGVyYXRvcl8uY2xvc2VEZXBzKCksYS5pZnx8YS5iaW5kfHxhLnJlcGVhdD8odGhpcy5pdGVyYXRvcl98fCh0aGlzLml0ZXJhdG9yXz1uZXcgRSh0aGlzKSksdGhpcy5pdGVyYXRvcl8udXBkYXRlRGVwZW5kZW5jaWVzKGEsdGhpcy5tb2RlbF8pLE8mJk8ub2JzZXJ2ZSh0aGlzLHthdHRyaWJ1dGVzOiEwLGF0dHJpYnV0ZUZpbHRlcjpbInJlZiJdfSksdGhpcy5pdGVyYXRvcl8pOnZvaWQodGhpcy5pdGVyYXRvcl8mJih0aGlzLml0ZXJhdG9yXy5jbG9zZSgpLHRoaXMuaXRlcmF0b3JfPXZvaWQgMCkpfSxjcmVhdGVJbnN0YW5jZTpmdW5jdGlvbihhLGIsYyl7Yj9jPXRoaXMubmV3RGVsZWdhdGVfKGIpOmN8fChjPXRoaXMuZGVsZWdhdGVfKSx0aGlzLnJlZkNvbnRlbnRffHwodGhpcy5yZWZDb250ZW50Xz10aGlzLnJlZl8uY29udGVudCk7dmFyIGQ9dGhpcy5yZWZDb250ZW50XztpZihudWxsPT09ZC5maXJzdENoaWxkKXJldHVybiBUO3ZhciBlPUQoZCxjKSxmPW0odGhpcyksZz1mLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtnLnRlbXBsYXRlQ3JlYXRvcl89dGhpcyxnLnByb3RvQ29udGVudF89ZCxnLmJpbmRpbmdzXz1bXSxnLnRlcm1pbmF0b3JfPW51bGw7Zm9yKHZhciBoPWcudGVtcGxhdGVJbnN0YW5jZV89e2ZpcnN0Tm9kZTpudWxsLGxhc3ROb2RlOm51bGwsbW9kZWw6YX0saT0wLGo9ITEsaz1kLmZpcnN0Q2hpbGQ7aztrPWsubmV4dFNpYmxpbmcpe251bGw9PT1rLm5leHRTaWJsaW5nJiYoaj0hMCk7dmFyIGw9QShrLGcsZixlLmNoaWxkcmVuW2krK10sYSxjLGcuYmluZGluZ3NfKTtsLnRlbXBsYXRlSW5zdGFuY2VfPWgsaiYmKGcudGVybWluYXRvcl89bCl9cmV0dXJuIGguZmlyc3ROb2RlPWcuZmlyc3RDaGlsZCxoLmxhc3ROb2RlPWcubGFzdENoaWxkLGcudGVtcGxhdGVDcmVhdG9yXz12b2lkIDAsZy5wcm90b0NvbnRlbnRfPXZvaWQgMCxnfSxnZXQgbW9kZWwoKXtyZXR1cm4gdGhpcy5tb2RlbF99LHNldCBtb2RlbChhKXt0aGlzLm1vZGVsXz1hLHIodGhpcyl9LGdldCBiaW5kaW5nRGVsZWdhdGUoKXtyZXR1cm4gdGhpcy5kZWxlZ2F0ZV8mJnRoaXMuZGVsZWdhdGVfLnJhd30scmVmQ2hhbmdlZF86ZnVuY3Rpb24oKXt0aGlzLml0ZXJhdG9yXyYmdGhpcy5yZWZDb250ZW50XyE9PXRoaXMucmVmXy5jb250ZW50JiYodGhpcy5yZWZDb250ZW50Xz12b2lkIDAsdGhpcy5pdGVyYXRvcl8udmFsdWVDaGFuZ2VkKCksdGhpcy5pdGVyYXRvcl8udXBkYXRlSXRlcmF0ZWRWYWx1ZSh0aGlzLml0ZXJhdG9yXy5nZXRVcGRhdGVkVmFsdWUoKSkpfSxjbGVhcjpmdW5jdGlvbigpe3RoaXMubW9kZWxfPXZvaWQgMCx0aGlzLmRlbGVnYXRlXz12b2lkIDAsdGhpcy5iaW5kaW5nc18mJnRoaXMuYmluZGluZ3NfLnJlZiYmdGhpcy5iaW5kaW5nc18ucmVmLmNsb3NlKCksdGhpcy5yZWZDb250ZW50Xz12b2lkIDAsdGhpcy5pdGVyYXRvcl8mJih0aGlzLml0ZXJhdG9yXy52YWx1ZUNoYW5nZWQoKSx0aGlzLml0ZXJhdG9yXy5jbG9zZSgpLHRoaXMuaXRlcmF0b3JfPXZvaWQgMCl9LHNldERlbGVnYXRlXzpmdW5jdGlvbihhKXt0aGlzLmRlbGVnYXRlXz1hLHRoaXMuYmluZGluZ01hcF89dm9pZCAwLHRoaXMuaXRlcmF0b3JfJiYodGhpcy5pdGVyYXRvcl8uaW5zdGFuY2VQb3NpdGlvbkNoYW5nZWRGbl89dm9pZCAwLHRoaXMuaXRlcmF0b3JfLmluc3RhbmNlTW9kZWxGbl89dm9pZCAwKX0sbmV3RGVsZWdhdGVfOmZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYil7dmFyIGM9YSYmYVtiXTtpZigiZnVuY3Rpb24iPT10eXBlb2YgYylyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gYy5hcHBseShhLGFyZ3VtZW50cyl9fWlmKGEpcmV0dXJue2JpbmRpbmdNYXBzOnt9LHJhdzphLHByZXBhcmVCaW5kaW5nOmIoInByZXBhcmVCaW5kaW5nIikscHJlcGFyZUluc3RhbmNlTW9kZWw6YigicHJlcGFyZUluc3RhbmNlTW9kZWwiKSxwcmVwYXJlSW5zdGFuY2VQb3NpdGlvbkNoYW5nZWQ6YigicHJlcGFyZUluc3RhbmNlUG9zaXRpb25DaGFuZ2VkIil9fSxzZXQgYmluZGluZ0RlbGVnYXRlKGEpe2lmKHRoaXMuZGVsZWdhdGVfKXRocm93IEVycm9yKCJUZW1wbGF0ZSBtdXN0IGJlIGNsZWFyZWQgYmVmb3JlIGEgbmV3IGJpbmRpbmdEZWxlZ2F0ZSBjYW4gYmUgYXNzaWduZWQiKTt0aGlzLnNldERlbGVnYXRlXyh0aGlzLm5ld0RlbGVnYXRlXyhhKSl9LGdldCByZWZfKCl7dmFyIGE9ZCh0aGlzLHRoaXMuZ2V0QXR0cmlidXRlKCJyZWYiKSk7aWYoYXx8KGE9dGhpcy5pbnN0YW5jZVJlZl8pLCFhKXJldHVybiB0aGlzO3ZhciBiPWEucmVmXztyZXR1cm4gYj9iOmF9fSk7dmFyIFM9MTtPYmplY3QuZGVmaW5lUHJvcGVydHkoTm9kZS5wcm90b3R5cGUsInRlbXBsYXRlSW5zdGFuY2UiLHtnZXQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnRlbXBsYXRlSW5zdGFuY2VfO3JldHVybiBhP2E6dGhpcy5wYXJlbnROb2RlP3RoaXMucGFyZW50Tm9kZS50ZW1wbGF0ZUluc3RhbmNlOnZvaWQgMH19KTt2YXIgVD1kb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7VC5iaW5kaW5nc189W10sVC50ZXJtaW5hdG9yXz1udWxsLEUucHJvdG90eXBlPXtjbG9zZURlcHM6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmRlcHM7YSYmKGEuaWZPbmVUaW1lPT09ITEmJmEuaWZWYWx1ZS5jbG9zZSgpLGEub25lVGltZT09PSExJiZhLnZhbHVlLmNsb3NlKCkpfSx1cGRhdGVEZXBlbmRlbmNpZXM6ZnVuY3Rpb24oYSxiKXt0aGlzLmNsb3NlRGVwcygpO3ZhciBjPXRoaXMuZGVwcz17fSxkPXRoaXMudGVtcGxhdGVFbGVtZW50XyxlPSEwO2lmKGEuaWYpe2lmKGMuaGFzSWY9ITAsYy5pZk9uZVRpbWU9YS5pZi5vbmx5T25lVGltZSxjLmlmVmFsdWU9dihKLGEuaWYsZCxiKSxlPWMuaWZWYWx1ZSxjLmlmT25lVGltZSYmIWUpcmV0dXJuIHZvaWQgdGhpcy52YWx1ZUNoYW5nZWQoKTtjLmlmT25lVGltZXx8KGU9ZS5vcGVuKHRoaXMudXBkYXRlSWZWYWx1ZSx0aGlzKSl9YS5yZXBlYXQ/KGMucmVwZWF0PSEwLGMub25lVGltZT1hLnJlcGVhdC5vbmx5T25lVGltZSxjLnZhbHVlPXYoSSxhLnJlcGVhdCxkLGIpKTooYy5yZXBlYXQ9ITEsYy5vbmVUaW1lPWEuYmluZC5vbmx5T25lVGltZSxjLnZhbHVlPXYoSCxhLmJpbmQsZCxiKSk7dmFyIGY9Yy52YWx1ZTtyZXR1cm4gYy5vbmVUaW1lfHwoZj1mLm9wZW4odGhpcy51cGRhdGVJdGVyYXRlZFZhbHVlLHRoaXMpKSxlP3ZvaWQgdGhpcy51cGRhdGVWYWx1ZShmKTp2b2lkIHRoaXMudmFsdWVDaGFuZ2VkKCl9LGdldFVwZGF0ZWRWYWx1ZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZGVwcy52YWx1ZTtyZXR1cm4gdGhpcy5kZXBzLm9uZVRpbWV8fChhPWEuZGlzY2FyZENoYW5nZXMoKSksYX0sdXBkYXRlSWZWYWx1ZTpmdW5jdGlvbihhKXtyZXR1cm4gYT92b2lkIHRoaXMudXBkYXRlVmFsdWUodGhpcy5nZXRVcGRhdGVkVmFsdWUoKSk6dm9pZCB0aGlzLnZhbHVlQ2hhbmdlZCgpfSx1cGRhdGVJdGVyYXRlZFZhbHVlOmZ1bmN0aW9uKGEpe2lmKHRoaXMuZGVwcy5oYXNJZil7dmFyIGI9dGhpcy5kZXBzLmlmVmFsdWU7aWYodGhpcy5kZXBzLmlmT25lVGltZXx8KGI9Yi5kaXNjYXJkQ2hhbmdlcygpKSwhYilyZXR1cm4gdm9pZCB0aGlzLnZhbHVlQ2hhbmdlZCgpfXRoaXMudXBkYXRlVmFsdWUoYSl9LHVwZGF0ZVZhbHVlOmZ1bmN0aW9uKGEpe3RoaXMuZGVwcy5yZXBlYXR8fChhPVthXSk7dmFyIGI9dGhpcy5kZXBzLnJlcGVhdCYmIXRoaXMuZGVwcy5vbmVUaW1lJiZBcnJheS5pc0FycmF5KGEpO3RoaXMudmFsdWVDaGFuZ2VkKGEsYil9LHZhbHVlQ2hhbmdlZDpmdW5jdGlvbihhLGIpe0FycmF5LmlzQXJyYXkoYSl8fChhPVtdKSxhIT09dGhpcy5pdGVyYXRlZFZhbHVlJiYodGhpcy51bm9ic2VydmUoKSx0aGlzLnByZXNlbnRWYWx1ZT1hLGImJih0aGlzLmFycmF5T2JzZXJ2ZXI9bmV3IEFycmF5T2JzZXJ2ZXIodGhpcy5wcmVzZW50VmFsdWUpLHRoaXMuYXJyYXlPYnNlcnZlci5vcGVuKHRoaXMuaGFuZGxlU3BsaWNlcyx0aGlzKSksdGhpcy5oYW5kbGVTcGxpY2VzKEFycmF5T2JzZXJ2ZXIuY2FsY3VsYXRlU3BsaWNlcyh0aGlzLnByZXNlbnRWYWx1ZSx0aGlzLml0ZXJhdGVkVmFsdWUpKSl9LGdldExhc3RJbnN0YW5jZU5vZGU6ZnVuY3Rpb24oYSl7aWYoLTE9PWEpcmV0dXJuIHRoaXMudGVtcGxhdGVFbGVtZW50Xzt2YXIgYj10aGlzLmluc3RhbmNlc1thXSxjPWIudGVybWluYXRvcl87aWYoIWMpcmV0dXJuIHRoaXMuZ2V0TGFzdEluc3RhbmNlTm9kZShhLTEpO2lmKGMubm9kZVR5cGUhPT1Ob2RlLkVMRU1FTlRfTk9ERXx8dGhpcy50ZW1wbGF0ZUVsZW1lbnRfPT09YylyZXR1cm4gYzt2YXIgZD1jLml0ZXJhdG9yXztyZXR1cm4gZD9kLmdldExhc3RUZW1wbGF0ZU5vZGUoKTpjfSxnZXRMYXN0VGVtcGxhdGVOb2RlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0TGFzdEluc3RhbmNlTm9kZSh0aGlzLmluc3RhbmNlcy5sZW5ndGgtMSl9LGluc2VydEluc3RhbmNlQXQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmdldExhc3RJbnN0YW5jZU5vZGUoYS0xKSxkPXRoaXMudGVtcGxhdGVFbGVtZW50Xy5wYXJlbnROb2RlO3RoaXMuaW5zdGFuY2VzLnNwbGljZShhLDAsYiksZC5pbnNlcnRCZWZvcmUoYixjLm5leHRTaWJsaW5nKX0sZXh0cmFjdEluc3RhbmNlQXQ6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPXRoaXMuZ2V0TGFzdEluc3RhbmNlTm9kZShhLTEpLGM9dGhpcy5nZXRMYXN0SW5zdGFuY2VOb2RlKGEpLGQ9dGhpcy50ZW1wbGF0ZUVsZW1lbnRfLnBhcmVudE5vZGUsZT10aGlzLmluc3RhbmNlcy5zcGxpY2UoYSwxKVswXTtjIT09Yjspe3ZhciBmPWIubmV4dFNpYmxpbmc7Zj09YyYmKGM9YiksZS5hcHBlbmRDaGlsZChkLnJlbW92ZUNoaWxkKGYpKX1yZXR1cm4gZX0sZ2V0RGVsZWdhdGVGbjpmdW5jdGlvbihhKXtyZXR1cm4gYT1hJiZhKHRoaXMudGVtcGxhdGVFbGVtZW50XyksImZ1bmN0aW9uIj09dHlwZW9mIGE/YTpudWxsfSxoYW5kbGVTcGxpY2VzOmZ1bmN0aW9uKGEpe2lmKCF0aGlzLmNsb3NlZCYmYS5sZW5ndGgpe3ZhciBiPXRoaXMudGVtcGxhdGVFbGVtZW50XztpZighYi5wYXJlbnROb2RlKXJldHVybiB2b2lkIHRoaXMuY2xvc2UoKTtBcnJheU9ic2VydmVyLmFwcGx5U3BsaWNlcyh0aGlzLml0ZXJhdGVkVmFsdWUsdGhpcy5wcmVzZW50VmFsdWUsYSk7dmFyIGM9Yi5kZWxlZ2F0ZV87dm9pZCAwPT09dGhpcy5pbnN0YW5jZU1vZGVsRm5fJiYodGhpcy5pbnN0YW5jZU1vZGVsRm5fPXRoaXMuZ2V0RGVsZWdhdGVGbihjJiZjLnByZXBhcmVJbnN0YW5jZU1vZGVsKSksdm9pZCAwPT09dGhpcy5pbnN0YW5jZVBvc2l0aW9uQ2hhbmdlZEZuXyYmKHRoaXMuaW5zdGFuY2VQb3NpdGlvbkNoYW5nZWRGbl89dGhpcy5nZXREZWxlZ2F0ZUZuKGMmJmMucHJlcGFyZUluc3RhbmNlUG9zaXRpb25DaGFuZ2VkKSk7Zm9yKHZhciBkPW5ldyBGLGU9MCxmPTA7ZjxhLmxlbmd0aDtmKyspe2Zvcih2YXIgZz1hW2ZdLGg9Zy5yZW1vdmVkLGk9MDtpPGgubGVuZ3RoO2krKyl7dmFyIGo9aFtpXSxrPXRoaXMuZXh0cmFjdEluc3RhbmNlQXQoZy5pbmRleCtlKTtrIT09VCYmZC5zZXQoaixrKX1lLT1nLmFkZGVkQ291bnR9Zm9yKHZhciBmPTA7ZjxhLmxlbmd0aDtmKyspZm9yKHZhciBnPWFbZl0sbD1nLmluZGV4O2w8Zy5pbmRleCtnLmFkZGVkQ291bnQ7bCsrKXt2YXIgaj10aGlzLml0ZXJhdGVkVmFsdWVbbF0saz1kLmdldChqKTtrP2QuZGVsZXRlKGopOih0aGlzLmluc3RhbmNlTW9kZWxGbl8mJihqPXRoaXMuaW5zdGFuY2VNb2RlbEZuXyhqKSksaz12b2lkIDA9PT1qP1Q6Yi5jcmVhdGVJbnN0YW5jZShqLHZvaWQgMCxjKSksdGhpcy5pbnNlcnRJbnN0YW5jZUF0KGwsayl9ZC5mb3JFYWNoKGZ1bmN0aW9uKGEpe3RoaXMuY2xvc2VJbnN0YW5jZUJpbmRpbmdzKGEpfSx0aGlzKSx0aGlzLmluc3RhbmNlUG9zaXRpb25DaGFuZ2VkRm5fJiZ0aGlzLnJlcG9ydEluc3RhbmNlc01vdmVkKGEpfX0scmVwb3J0SW5zdGFuY2VNb3ZlZDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmluc3RhbmNlc1thXTtiIT09VCYmdGhpcy5pbnN0YW5jZVBvc2l0aW9uQ2hhbmdlZEZuXyhiLnRlbXBsYXRlSW5zdGFuY2VfLGEpfSxyZXBvcnRJbnN0YW5jZXNNb3ZlZDpmdW5jdGlvbihhKXtmb3IodmFyIGI9MCxjPTAsZD0wO2Q8YS5sZW5ndGg7ZCsrKXt2YXIgZT1hW2RdO2lmKDAhPWMpZm9yKDtiPGUuaW5kZXg7KXRoaXMucmVwb3J0SW5zdGFuY2VNb3ZlZChiKSxiKys7ZWxzZSBiPWUuaW5kZXg7Zm9yKDtiPGUuaW5kZXgrZS5hZGRlZENvdW50Oyl0aGlzLnJlcG9ydEluc3RhbmNlTW92ZWQoYiksYisrO2MrPWUuYWRkZWRDb3VudC1lLnJlbW92ZWQubGVuZ3RofWlmKDAhPWMpZm9yKHZhciBmPXRoaXMuaW5zdGFuY2VzLmxlbmd0aDtmPmI7KXRoaXMucmVwb3J0SW5zdGFuY2VNb3ZlZChiKSxiKyt9LGNsb3NlSW5zdGFuY2VCaW5kaW5nczpmdW5jdGlvbihhKXtmb3IodmFyIGI9YS5iaW5kaW5nc18sYz0wO2M8Yi5sZW5ndGg7YysrKWJbY10uY2xvc2UoKX0sdW5vYnNlcnZlOmZ1bmN0aW9uKCl7dGhpcy5hcnJheU9ic2VydmVyJiYodGhpcy5hcnJheU9ic2VydmVyLmNsb3NlKCksdGhpcy5hcnJheU9ic2VydmVyPXZvaWQgMCl9LGNsb3NlOmZ1bmN0aW9uKCl7aWYoIXRoaXMuY2xvc2VkKXt0aGlzLnVub2JzZXJ2ZSgpO2Zvcih2YXIgYT0wO2E8dGhpcy5pbnN0YW5jZXMubGVuZ3RoO2ErKyl0aGlzLmNsb3NlSW5zdGFuY2VCaW5kaW5ncyh0aGlzLmluc3RhbmNlc1thXSk7dGhpcy5pbnN0YW5jZXMubGVuZ3RoPTAsdGhpcy5jbG9zZURlcHMoKSx0aGlzLnRlbXBsYXRlRWxlbWVudF8uaXRlcmF0b3JfPXZvaWQgMCx0aGlzLmNsb3NlZD0hMH19fSxIVE1MVGVtcGxhdGVFbGVtZW50LmZvckFsbFRlbXBsYXRlc0Zyb21fPWl9KHRoaXMpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7Zi50ZXh0Q29udGVudD1kKyssZS5wdXNoKGEpfWZ1bmN0aW9uIGMoKXtmb3IoO2UubGVuZ3RoOyllLnNoaWZ0KCkoKX12YXIgZD0wLGU9W10sZj1kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgiIik7bmV3KHdpbmRvdy5NdXRhdGlvbk9ic2VydmVyfHxKc011dGF0aW9uT2JzZXJ2ZXIpKGMpLm9ic2VydmUoZix7Y2hhcmFjdGVyRGF0YTohMH0pLGEuZW5kT2ZNaWNyb3Rhc2s9Yn0oUGxhdGZvcm0pLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoKXtlfHwoZT0hMCxhLmVuZE9mTWljcm90YXNrKGZ1bmN0aW9uKCl7ZT0hMSxsb2dGbGFncy5kYXRhJiZjb25zb2xlLmdyb3VwKCJQbGF0Zm9ybS5mbHVzaCgpIiksYS5wZXJmb3JtTWljcm90YXNrQ2hlY2twb2ludCgpLGxvZ0ZsYWdzLmRhdGEmJmNvbnNvbGUuZ3JvdXBFbmQoKX0pKX12YXIgYz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzdHlsZSIpO2MudGV4dENvbnRlbnQ9InRlbXBsYXRlIHtkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7fSAvKiBpbmplY3RlZCBieSBwbGF0Zm9ybS5qcyAqLyI7dmFyIGQ9ZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiaGVhZCIpO2QuaW5zZXJ0QmVmb3JlKGMsZC5maXJzdENoaWxkKTt2YXIgZTtpZihPYnNlcnZlci5oYXNPYmplY3RPYnNlcnZlKWI9ZnVuY3Rpb24oKXt9O2Vsc2V7dmFyIGY9MTI1O3dpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJXZWJDb21wb25lbnRzUmVhZHkiLGZ1bmN0aW9uKCl7YigpLGEuZmx1c2hQb2xsPXNldEludGVydmFsKGIsZil9KX1pZih3aW5kb3cuQ3VzdG9tRWxlbWVudHMmJiFDdXN0b21FbGVtZW50cy51c2VOYXRpdmUpe3ZhciBnPURvY3VtZW50LnByb3RvdHlwZS5pbXBvcnROb2RlO0RvY3VtZW50LnByb3RvdHlwZS5pbXBvcnROb2RlPWZ1bmN0aW9uKGEsYil7dmFyIGM9Zy5jYWxsKHRoaXMsYSxiKTtyZXR1cm4gQ3VzdG9tRWxlbWVudHMudXBncmFkZUFsbChjKSxjfX1hLmZsdXNoPWJ9KHdpbmRvdy5QbGF0Zm9ybSksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhLGIsZCxlKXtyZXR1cm4gYS5yZXBsYWNlKGUsZnVuY3Rpb24oYSxlLGYsZyl7dmFyIGg9Zi5yZXBsYWNlKC9bIiddL2csIiIpO3JldHVybiBoPWMoYixoLGQpLGUrIiciK2grIiciK2d9KX1mdW5jdGlvbiBjKGEsYixjKXtpZihiJiYiLyI9PT1iWzBdKXJldHVybiBiO3ZhciBlPW5ldyBVUkwoYixhKTtyZXR1cm4gYz9lLmhyZWY6ZChlLmhyZWYpfWZ1bmN0aW9uIGQoYSl7dmFyIGI9bmV3IFVSTChkb2N1bWVudC5iYXNlVVJJKSxjPW5ldyBVUkwoYSxiKTtyZXR1cm4gYy5ob3N0PT09Yi5ob3N0JiZjLnBvcnQ9PT1iLnBvcnQmJmMucHJvdG9jb2w9PT1iLnByb3RvY29sP2UoYixjKTphfWZ1bmN0aW9uIGUoYSxiKXtmb3IodmFyIGM9YS5wYXRobmFtZSxkPWIucGF0aG5hbWUsZT1jLnNwbGl0KCIvIiksZj1kLnNwbGl0KCIvIik7ZS5sZW5ndGgmJmVbMF09PT1mWzBdOyllLnNoaWZ0KCksZi5zaGlmdCgpO2Zvcih2YXIgZz0wLGg9ZS5sZW5ndGgtMTtoPmc7ZysrKWYudW5zaGlmdCgiLi4iKTtyZXR1cm4gZi5qb2luKCIvIikrYi5zZWFyY2grYi5oYXNofXZhciBmPXtyZXNvbHZlRG9tOmZ1bmN0aW9uKGEsYil7Yj1ifHxhLm93bmVyRG9jdW1lbnQuYmFzZVVSSSx0aGlzLnJlc29sdmVBdHRyaWJ1dGVzKGEsYiksdGhpcy5yZXNvbHZlU3R5bGVzKGEsYik7dmFyIGM9YS5xdWVyeVNlbGVjdG9yQWxsKCJ0ZW1wbGF0ZSIpO2lmKGMpZm9yKHZhciBkLGU9MCxmPWMubGVuZ3RoO2Y+ZSYmKGQ9Y1tlXSk7ZSsrKWQuY29udGVudCYmdGhpcy5yZXNvbHZlRG9tKGQuY29udGVudCxiKX0scmVzb2x2ZVRlbXBsYXRlOmZ1bmN0aW9uKGEpe3RoaXMucmVzb2x2ZURvbShhLmNvbnRlbnQsYS5vd25lckRvY3VtZW50LmJhc2VVUkkpfSxyZXNvbHZlU3R5bGVzOmZ1bmN0aW9uKGEsYil7dmFyIGM9YS5xdWVyeVNlbGVjdG9yQWxsKCJzdHlsZSIpO2lmKGMpZm9yKHZhciBkLGU9MCxmPWMubGVuZ3RoO2Y+ZSYmKGQ9Y1tlXSk7ZSsrKXRoaXMucmVzb2x2ZVN0eWxlKGQsYil9LHJlc29sdmVTdHlsZTpmdW5jdGlvbihhLGIpe2I9Ynx8YS5vd25lckRvY3VtZW50LmJhc2VVUkksYS50ZXh0Q29udGVudD10aGlzLnJlc29sdmVDc3NUZXh0KGEudGV4dENvbnRlbnQsYil9LHJlc29sdmVDc3NUZXh0OmZ1bmN0aW9uKGEsYyxkKXtyZXR1cm4gYT1iKGEsYyxkLGcpLGIoYSxjLGQsaCl9LHJlc29sdmVBdHRyaWJ1dGVzOmZ1bmN0aW9uKGEsYil7YS5oYXNBdHRyaWJ1dGVzJiZhLmhhc0F0dHJpYnV0ZXMoKSYmdGhpcy5yZXNvbHZlRWxlbWVudEF0dHJpYnV0ZXMoYSxiKTt2YXIgYz1hJiZhLnF1ZXJ5U2VsZWN0b3JBbGwoaik7aWYoYylmb3IodmFyIGQsZT0wLGY9Yy5sZW5ndGg7Zj5lJiYoZD1jW2VdKTtlKyspdGhpcy5yZXNvbHZlRWxlbWVudEF0dHJpYnV0ZXMoZCxiKX0scmVzb2x2ZUVsZW1lbnRBdHRyaWJ1dGVzOmZ1bmN0aW9uKGEsZCl7ZD1kfHxhLm93bmVyRG9jdW1lbnQuYmFzZVVSSSxpLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIGYsaD1hLmF0dHJpYnV0ZXNbZV0saT1oJiZoLnZhbHVlO2kmJmkuc2VhcmNoKGspPDAmJihmPSJzdHlsZSI9PT1lP2IoaSxkLCExLGcpOmMoZCxpKSxoLnZhbHVlPWYpfSl9fSxnPS8odXJsXCgpKFteKV0qKShcKSkvZyxoPS8oQGltcG9ydFtcc10rKD8hdXJsXCgpKShbXjtdKikoOykvZyxpPVsiaHJlZiIsInNyYyIsImFjdGlvbiIsInN0eWxlIiwidXJsIl0saj0iWyIraS5qb2luKCJdLFsiKSsiXSIsaz0ie3suKn19IjthLnVybFJlc29sdmVyPWZ9KFBvbHltZXIpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7dGhpcy5jYWNoZT1PYmplY3QuY3JlYXRlKG51bGwpLHRoaXMubWFwPU9iamVjdC5jcmVhdGUobnVsbCksdGhpcy5yZXF1ZXN0cz0wLHRoaXMucmVnZXg9YX12YXIgYz1QbGF0Zm9ybS5lbmRPZk1pY3JvdGFzaztiLnByb3RvdHlwZT17ZXh0cmFjdFVybHM6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGMsZCxlPVtdO2M9dGhpcy5yZWdleC5leGVjKGEpOylkPW5ldyBVUkwoY1sxXSxiKSxlLnB1c2goe21hdGNoZWQ6Y1swXSx1cmw6ZC5ocmVmfSk7cmV0dXJuIGV9LHByb2Nlc3M6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXRoaXMuZXh0cmFjdFVybHMoYSxiKSxlPWMuYmluZChudWxsLHRoaXMubWFwKTt0aGlzLmZldGNoKGQsZSl9LGZldGNoOmZ1bmN0aW9uKGEsYil7dmFyIGM9YS5sZW5ndGg7aWYoIWMpcmV0dXJuIGIoKTtmb3IodmFyIGQsZSxmLGc9ZnVuY3Rpb24oKXswPT09LS1jJiZiKCl9LGg9MDtjPmg7aCsrKWQ9YVtoXSxmPWQudXJsLGU9dGhpcy5jYWNoZVtmXSxlfHwoZT10aGlzLnhocihmKSxlLm1hdGNoPWQsdGhpcy5jYWNoZVtmXT1lKSxlLndhaXQoZyl9LGhhbmRsZVhocjpmdW5jdGlvbihhKXt2YXIgYj1hLm1hdGNoLGM9Yi51cmwsZD1hLnJlc3BvbnNlfHxhLnJlc3BvbnNlVGV4dHx8IiI7dGhpcy5tYXBbY109ZCx0aGlzLmZldGNoKHRoaXMuZXh0cmFjdFVybHMoZCxjKSxhLnJlc29sdmUpfSx4aHI6ZnVuY3Rpb24oYSl7dGhpcy5yZXF1ZXN0cysrO3ZhciBiPW5ldyBYTUxIdHRwUmVxdWVzdDtyZXR1cm4gYi5vcGVuKCJHRVQiLGEsITApLGIuc2VuZCgpLGIub25lcnJvcj1iLm9ubG9hZD10aGlzLmhhbmRsZVhoci5iaW5kKHRoaXMsYiksYi5wZW5kaW5nPVtdLGIucmVzb2x2ZT1mdW5jdGlvbigpe2Zvcih2YXIgYT1iLnBlbmRpbmcsYz0wO2M8YS5sZW5ndGg7YysrKWFbY10oKTtiLnBlbmRpbmc9bnVsbH0sYi53YWl0PWZ1bmN0aW9uKGEpe2IucGVuZGluZz9iLnBlbmRpbmcucHVzaChhKTpjKGEpfSxifX0sYS5Mb2FkZXI9Yn0oUG9seW1lciksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYigpe3RoaXMubG9hZGVyPW5ldyBkKHRoaXMucmVnZXgpfXZhciBjPWEudXJsUmVzb2x2ZXIsZD1hLkxvYWRlcjtiLnByb3RvdHlwZT17cmVnZXg6L0BpbXBvcnRccysoPzp1cmwpP1siJ1woXSooW14nIlwpXSopWyciXCldKjsvZyxyZXNvbHZlOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD1mdW5jdGlvbihkKXtjKHRoaXMuZmxhdHRlbihhLGIsZCkpfS5iaW5kKHRoaXMpO3RoaXMubG9hZGVyLnByb2Nlc3MoYSxiLGQpfSxyZXNvbHZlTm9kZTpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9YS50ZXh0Q29udGVudCxlPWZ1bmN0aW9uKGIpe2EudGV4dENvbnRlbnQ9YixjKGEpfTt0aGlzLnJlc29sdmUoZCxiLGUpfSxmbGF0dGVuOmZ1bmN0aW9uKGEsYixkKXtmb3IodmFyIGUsZixnLGg9dGhpcy5sb2FkZXIuZXh0cmFjdFVybHMoYSxiKSxpPTA7aTxoLmxlbmd0aDtpKyspZT1oW2ldLGY9ZS51cmwsZz1jLnJlc29sdmVDc3NUZXh0KGRbZl0sZiwhMCksZz10aGlzLmZsYXR0ZW4oZyxiLGQpLGE9YS5yZXBsYWNlKGUubWF0Y2hlZCxnKTtyZXR1cm4gYX0sbG9hZFN0eWxlczpmdW5jdGlvbihhLGIsYyl7ZnVuY3Rpb24gZCgpe2YrKyxmPT09ZyYmYyYmYygpfWZvcih2YXIgZSxmPTAsZz1hLmxlbmd0aCxoPTA7Zz5oJiYoZT1hW2hdKTtoKyspdGhpcy5yZXNvbHZlTm9kZShlLGIsZCl9fTt2YXIgZT1uZXcgYjthLnN0eWxlUmVzb2x2ZXI9ZX0oUG9seW1lciksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhLGIpe3JldHVybiBhJiZiJiZPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhiKS5mb3JFYWNoKGZ1bmN0aW9uKGMpe3ZhciBkPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoYixjKTtkJiYoT2JqZWN0LmRlZmluZVByb3BlcnR5KGEsYyxkKSwiZnVuY3Rpb24iPT10eXBlb2YgZC52YWx1ZSYmKGQudmFsdWUubm9tPWMpKX0pLGF9ZnVuY3Rpb24gYyhhKXtmb3IodmFyIGI9YXx8e30sYz0xO2M8YXJndW1lbnRzLmxlbmd0aDtjKyspe3ZhciBlPWFyZ3VtZW50c1tjXTt0cnl7Zm9yKHZhciBmIGluIGUpZChmLGUsYil9Y2F0Y2goZyl7fX1yZXR1cm4gYn1mdW5jdGlvbiBkKGEsYixjKXt2YXIgZD1lKGIsYSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGMsYSxkKX1mdW5jdGlvbiBlKGEsYil7aWYoYSl7dmFyIGM9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihhLGIpO3JldHVybiBjfHxlKE9iamVjdC5nZXRQcm90b3R5cGVPZihhKSxiKX19YS5leHRlbmQ9YixhLm1peGluPWMsUGxhdGZvcm0ubWl4aW49Y30oUG9seW1lciksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhLGIsZCl7cmV0dXJuIGE/YS5zdG9wKCk6YT1uZXcgYyh0aGlzKSxhLmdvKGIsZCksYX12YXIgYz1mdW5jdGlvbihhKXt0aGlzLmNvbnRleHQ9YSx0aGlzLmJvdW5kQ29tcGxldGU9dGhpcy5jb21wbGV0ZS5iaW5kKHRoaXMpfTtjLnByb3RvdHlwZT17Z286ZnVuY3Rpb24oYSxiKXt0aGlzLmNhbGxiYWNrPWE7dmFyIGM7Yj8oYz1zZXRUaW1lb3V0KHRoaXMuYm91bmRDb21wbGV0ZSxiKSx0aGlzLmhhbmRsZT1mdW5jdGlvbigpe2NsZWFyVGltZW91dChjKX0pOihjPXJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLmJvdW5kQ29tcGxldGUpLHRoaXMuaGFuZGxlPWZ1bmN0aW9uKCl7Y2FuY2VsQW5pbWF0aW9uRnJhbWUoYyl9KX0sc3RvcDpmdW5jdGlvbigpe3RoaXMuaGFuZGxlJiYodGhpcy5oYW5kbGUoKSx0aGlzLmhhbmRsZT1udWxsKX0sY29tcGxldGU6ZnVuY3Rpb24oKXt0aGlzLmhhbmRsZSYmKHRoaXMuc3RvcCgpLHRoaXMuY2FsbGJhY2suY2FsbCh0aGlzLmNvbnRleHQpKX19LGEuam9iPWJ9KFBvbHltZXIpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSxiLGMpe3ZhciBkPSJzdHJpbmciPT10eXBlb2YgYT9kb2N1bWVudC5jcmVhdGVFbGVtZW50KGEpOmEuY2xvbmVOb2RlKCEwKTtpZihkLmlubmVySFRNTD1iLGMpZm9yKHZhciBlIGluIGMpZC5zZXRBdHRyaWJ1dGUoZSxjW2VdKTtyZXR1cm4gZH12YXIgYz17fTtIVE1MRWxlbWVudC5yZWdpc3Rlcj1mdW5jdGlvbihhLGIpe2NbYV09Yn0sSFRNTEVsZW1lbnQuZ2V0UHJvdG90eXBlRm9yVGFnPWZ1bmN0aW9uKGEpe3ZhciBiPWE/Y1thXTpIVE1MRWxlbWVudC5wcm90b3R5cGU7cmV0dXJuIGJ8fE9iamVjdC5nZXRQcm90b3R5cGVPZihkb2N1bWVudC5jcmVhdGVFbGVtZW50KGEpKX07dmFyIGQ9RXZlbnQucHJvdG90eXBlLnN0b3BQcm9wYWdhdGlvbjtFdmVudC5wcm90b3R5cGUuc3RvcFByb3BhZ2F0aW9uPWZ1bmN0aW9uKCl7dGhpcy5jYW5jZWxCdWJibGU9ITAsZC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9O3ZhciBlPURPTVRva2VuTGlzdC5wcm90b3R5cGUuYWRkLGY9RE9NVG9rZW5MaXN0LnByb3RvdHlwZS5yZW1vdmU7RE9NVG9rZW5MaXN0LnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24oKXtmb3IodmFyIGE9MDthPGFyZ3VtZW50cy5sZW5ndGg7YSsrKWUuY2FsbCh0aGlzLGFyZ3VtZW50c1thXSl9LERPTVRva2VuTGlzdC5wcm90b3R5cGUucmVtb3ZlPWZ1bmN0aW9uKCl7Zm9yKHZhciBhPTA7YTxhcmd1bWVudHMubGVuZ3RoO2ErKylmLmNhbGwodGhpcyxhcmd1bWVudHNbYV0pfSxET01Ub2tlbkxpc3QucHJvdG90eXBlLnRvZ2dsZT1mdW5jdGlvbihhLGIpezE9PWFyZ3VtZW50cy5sZW5ndGgmJihiPSF0aGlzLmNvbnRhaW5zKGEpKSxiP3RoaXMuYWRkKGEpOnRoaXMucmVtb3ZlKGEpfSxET01Ub2tlbkxpc3QucHJvdG90eXBlLnN3aXRjaD1mdW5jdGlvbihhLGIpe2EmJnRoaXMucmVtb3ZlKGEpLGImJnRoaXMuYWRkKGIpfTt2YXIgZz1mdW5jdGlvbigpe3JldHVybiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh0aGlzKX0saD13aW5kb3cuTmFtZWROb2RlTWFwfHx3aW5kb3cuTW96TmFtZWRBdHRyTWFwfHx7fTtOb2RlTGlzdC5wcm90b3R5cGUuYXJyYXk9ZyxoLnByb3RvdHlwZS5hcnJheT1nLEhUTUxDb2xsZWN0aW9uLnByb3RvdHlwZS5hcnJheT1nLGEuY3JlYXRlRE9NPWJ9KFBvbHltZXIpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7dmFyIGU9Yi5jYWxsZXIsZz1lLm5vbSxoPWUuX3N1cGVyO2h8fChnfHwoZz1lLm5vbT1jLmNhbGwodGhpcyxlKSksZ3x8Y29uc29sZS53YXJuKCJjYWxsZWQgc3VwZXIoKSBvbiBhIG1ldGhvZCBub3QgaW5zdGFsbGVkIGRlY2xhcmF0aXZlbHkgKGhhcyBubyAubm9tIHByb3BlcnR5KSIpLGg9ZChlLGcsZih0aGlzKSkpO3ZhciBpPWhbZ107cmV0dXJuIGk/KGkuX3N1cGVyfHxkKGksZyxoKSxpLmFwcGx5KHRoaXMsYXx8W10pKTp2b2lkIDB9ZnVuY3Rpb24gYyhhKXtmb3IodmFyIGI9dGhpcy5fX3Byb3RvX187YiYmYiE9PUhUTUxFbGVtZW50LnByb3RvdHlwZTspe2Zvcih2YXIgYyxkPU9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGIpLGU9MCxmPWQubGVuZ3RoO2Y+ZSYmKGM9ZFtlXSk7ZSsrKXt2YXIgZz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGIsYyk7aWYoImZ1bmN0aW9uIj09dHlwZW9mIGcudmFsdWUmJmcudmFsdWU9PT1hKXJldHVybiBjfWI9Yi5fX3Byb3RvX199fWZ1bmN0aW9uIGQoYSxiLGMpe3ZhciBkPWUoYyxiLGEpO3JldHVybiBkW2JdJiYoZFtiXS5ub209YiksYS5fc3VwZXI9ZH1mdW5jdGlvbiBlKGEsYixjKXtmb3IoO2E7KXtpZihhW2JdIT09YyYmYVtiXSlyZXR1cm4gYTthPWYoYSl9cmV0dXJuIE9iamVjdH1mdW5jdGlvbiBmKGEpe3JldHVybiBhLl9fcHJvdG9fX31hLnN1cGVyPWJ9KFBvbHltZXIpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7cmV0dXJuIGF9ZnVuY3Rpb24gYyhhLGIpe3ZhciBjPXR5cGVvZiBiO3JldHVybiBiIGluc3RhbmNlb2YgRGF0ZSYmKGM9ImRhdGUiKSxkW2NdKGEsYil9dmFyIGQ9e3N0cmluZzpiLHVuZGVmaW5lZDpiLGRhdGU6ZnVuY3Rpb24oYSl7cmV0dXJuIG5ldyBEYXRlKERhdGUucGFyc2UoYSl8fERhdGUubm93KCkpfSwiYm9vbGVhbiI6ZnVuY3Rpb24oYSl7cmV0dXJuIiI9PT1hPyEwOiJmYWxzZSI9PT1hPyExOiEhYX0sbnVtYmVyOmZ1bmN0aW9uKGEpe3ZhciBiPXBhcnNlRmxvYXQoYSk7cmV0dXJuIDA9PT1iJiYoYj1wYXJzZUludChhKSksaXNOYU4oYik/YTpifSxvYmplY3Q6ZnVuY3Rpb24oYSxiKXtpZihudWxsPT09YilyZXR1cm4gYTt0cnl7cmV0dXJuIEpTT04ucGFyc2UoYS5yZXBsYWNlKC8nL2csJyInKSl9Y2F0Y2goYyl7cmV0dXJuIGF9fSwiZnVuY3Rpb24iOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGJ9fTthLmRlc2VyaWFsaXplVmFsdWU9Y30oUG9seW1lciksZnVuY3Rpb24oYSl7dmFyIGI9YS5leHRlbmQsYz17fTtjLmRlY2xhcmF0aW9uPXt9LGMuaW5zdGFuY2U9e30sYy5wdWJsaXNoPWZ1bmN0aW9uKGEsYyl7Zm9yKHZhciBkIGluIGEpYihjLGFbZF0pfSxhLmFwaT1jfShQb2x5bWVyKSxmdW5jdGlvbihhKXt2YXIgYj17YXN5bmM6ZnVuY3Rpb24oYSxiLGMpe1BsYXRmb3JtLmZsdXNoKCksYj1iJiZiLmxlbmd0aD9iOltiXTt2YXIgZD1mdW5jdGlvbigpeyh0aGlzW2FdfHxhKS5hcHBseSh0aGlzLGIpfS5iaW5kKHRoaXMpLGU9Yz9zZXRUaW1lb3V0KGQsYyk6cmVxdWVzdEFuaW1hdGlvbkZyYW1lKGQpO3JldHVybiBjP2U6fmV9LGNhbmNlbEFzeW5jOmZ1bmN0aW9uKGEpezA+YT9jYW5jZWxBbmltYXRpb25GcmFtZSh+YSk6Y2xlYXJUaW1lb3V0KGEpfSxmaXJlOmZ1bmN0aW9uKGEsYixjLGQsZSl7dmFyIGY9Y3x8dGhpcyxiPW51bGw9PT1ifHx2b2lkIDA9PT1iP3t9OmIsZz1uZXcgQ3VzdG9tRXZlbnQoYSx7YnViYmxlczp2b2lkIDAhPT1kP2Q6ITAsY2FuY2VsYWJsZTp2b2lkIDAhPT1lP2U6ITAsZGV0YWlsOmJ9KTtyZXR1cm4gZi5kaXNwYXRjaEV2ZW50KGcpLGd9LGFzeW5jRmlyZTpmdW5jdGlvbigpe3RoaXMuYXN5bmMoImZpcmUiLGFyZ3VtZW50cyl9LGNsYXNzRm9sbG93czpmdW5jdGlvbihhLGIsYyl7YiYmYi5jbGFzc0xpc3QucmVtb3ZlKGMpLGEmJmEuY2xhc3NMaXN0LmFkZChjKX0saW5qZWN0Qm91bmRIVE1MOmZ1bmN0aW9uKGEsYil7dmFyIGM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidGVtcGxhdGUiKTtjLmlubmVySFRNTD1hO3ZhciBkPXRoaXMuaW5zdGFuY2VUZW1wbGF0ZShjKTtyZXR1cm4gYiYmKGIudGV4dENvbnRlbnQ9IiIsYi5hcHBlbmRDaGlsZChkKSksZH19LGM9ZnVuY3Rpb24oKXt9LGQ9e307Yi5hc3luY01ldGhvZD1iLmFzeW5jLGEuYXBpLmluc3RhbmNlLnV0aWxzPWIsYS5ub3A9YyxhLm5vYj1kfShQb2x5bWVyKSxmdW5jdGlvbihhKXt2YXIgYj13aW5kb3cubG9nRmxhZ3N8fHt9LGM9Im9uLSIsZD17RVZFTlRfUFJFRklYOmMsYWRkSG9zdExpc3RlbmVyczpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZXZlbnREZWxlZ2F0ZXM7Yi5ldmVudHMmJk9iamVjdC5rZXlzKGEpLmxlbmd0aD4wJiZjb25zb2xlLmxvZygiWyVzXSBhZGRIb3N0TGlzdGVuZXJzOiIsdGhpcy5sb2NhbE5hbWUsYSk7Zm9yKHZhciBjIGluIGEpe3ZhciBkPWFbY107UG9seW1lckdlc3R1cmVzLmFkZEV2ZW50TGlzdGVuZXIodGhpcyxjLHRoaXMuZWxlbWVudC5nZXRFdmVudEhhbmRsZXIodGhpcyx0aGlzLGQpKX19LGRpc3BhdGNoTWV0aG9kOmZ1bmN0aW9uKGEsYyxkKXtpZihhKXtiLmV2ZW50cyYmY29uc29sZS5ncm91cCgiWyVzXSBkaXNwYXRjaCBbJXNdIixhLmxvY2FsTmFtZSxjKTt2YXIgZT0iZnVuY3Rpb24iPT10eXBlb2YgYz9jOmFbY107ZSYmZVtkPyJhcHBseSI6ImNhbGwiXShhLGQpLGIuZXZlbnRzJiZjb25zb2xlLmdyb3VwRW5kKCksUGxhdGZvcm0uZmx1c2goKX19fTthLmFwaS5pbnN0YW5jZS5ldmVudHM9ZCxhLmFkZEV2ZW50TGlzdGVuZXI9UG9seW1lckdlc3R1cmVzLmFkZEV2ZW50TGlzdGVuZXIsYS5yZW1vdmVFdmVudExpc3RlbmVyPVBvbHltZXJHZXN0dXJlcy5yZW1vdmVFdmVudExpc3RlbmVyfShQb2x5bWVyKSxmdW5jdGlvbihhKXt2YXIgYj17Y29weUluc3RhbmNlQXR0cmlidXRlczpmdW5jdGlvbigpe3ZhciBhPXRoaXMuX2luc3RhbmNlQXR0cmlidXRlcztmb3IodmFyIGIgaW4gYSl0aGlzLmhhc0F0dHJpYnV0ZShiKXx8dGhpcy5zZXRBdHRyaWJ1dGUoYixhW2JdKX0sdGFrZUF0dHJpYnV0ZXM6ZnVuY3Rpb24oKXtpZih0aGlzLl9wdWJsaXNoTEMpZm9yKHZhciBhLGI9MCxjPXRoaXMuYXR0cmlidXRlcyxkPWMubGVuZ3RoOyhhPWNbYl0pJiZkPmI7YisrKXRoaXMuYXR0cmlidXRlVG9Qcm9wZXJ0eShhLm5hbWUsYS52YWx1ZSl9LGF0dHJpYnV0ZVRvUHJvcGVydHk6ZnVuY3Rpb24oYixjKXt2YXIgYj10aGlzLnByb3BlcnR5Rm9yQXR0cmlidXRlKGIpO2lmKGIpe2lmKGMmJmMuc2VhcmNoKGEuYmluZFBhdHRlcm4pPj0wKXJldHVybjt2YXIgZD10aGlzW2JdLGM9dGhpcy5kZXNlcmlhbGl6ZVZhbHVlKGMsZCk7YyE9PWQmJih0aGlzW2JdPWMpfX0scHJvcGVydHlGb3JBdHRyaWJ1dGU6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5fcHVibGlzaExDJiZ0aGlzLl9wdWJsaXNoTENbYV07cmV0dXJuIGJ9LGRlc2VyaWFsaXplVmFsdWU6ZnVuY3Rpb24oYixjKXtyZXR1cm4gYS5kZXNlcmlhbGl6ZVZhbHVlKGIsYyl9LHNlcmlhbGl6ZVZhbHVlOmZ1bmN0aW9uKGEsYil7cmV0dXJuImJvb2xlYW4iPT09Yj9hPyIiOnZvaWQgMDoib2JqZWN0IiE9PWImJiJmdW5jdGlvbiIhPT1iJiZ2b2lkIDAhPT1hP2E6dm9pZCAwfSxyZWZsZWN0UHJvcGVydHlUb0F0dHJpYnV0ZTpmdW5jdGlvbihhKXt2YXIgYj10eXBlb2YgdGhpc1thXSxjPXRoaXMuc2VyaWFsaXplVmFsdWUodGhpc1thXSxiKTt2b2lkIDAhPT1jP3RoaXMuc2V0QXR0cmlidXRlKGEsYyk6ImJvb2xlYW4iPT09YiYmdGhpcy5yZW1vdmVBdHRyaWJ1dGUoYSl9fTthLmFwaS5pbnN0YW5jZS5hdHRyaWJ1dGVzPWJ9KFBvbHltZXIpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSxiKXtyZXR1cm4gYT09PWI/MCE9PWF8fDEvYT09PTEvYjpmKGEpJiZmKGIpPyEwOmEhPT1hJiZiIT09Yn1mdW5jdGlvbiBjKGEsYil7cmV0dXJuIHZvaWQgMD09PWImJm51bGw9PT1hP2I6bnVsbD09PWJ8fHZvaWQgMD09PWI/YTpifXZhciBkPXdpbmRvdy5sb2dGbGFnc3x8e30sZT17b2JqZWN0OnZvaWQgMCx0eXBlOiJ1cGRhdGUiLG5hbWU6dm9pZCAwLG9sZFZhbHVlOnZvaWQgMH0sZj1OdW1iZXIuaXNOYU58fGZ1bmN0aW9uKGEpe3JldHVybiJudW1iZXIiPT10eXBlb2YgYSYmaXNOYU4oYSl9LGc9e2NyZWF0ZVByb3BlcnR5T2JzZXJ2ZXI6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLl9vYnNlcnZlTmFtZXM7aWYoYSYmYS5sZW5ndGgpe3ZhciBiPXRoaXMuX3Byb3BlcnR5T2JzZXJ2ZXI9bmV3IENvbXBvdW5kT2JzZXJ2ZXIoITApO3RoaXMucmVnaXN0ZXJPYnNlcnZlcihiKTtmb3IodmFyIGMsZD0wLGU9YS5sZW5ndGg7ZT5kJiYoYz1hW2RdKTtkKyspYi5hZGRQYXRoKHRoaXMsYyksdGhpcy5vYnNlcnZlQXJyYXlWYWx1ZShjLHRoaXNbY10sbnVsbCl9fSxvcGVuUHJvcGVydHlPYnNlcnZlcjpmdW5jdGlvbigpe3RoaXMuX3Byb3BlcnR5T2JzZXJ2ZXImJnRoaXMuX3Byb3BlcnR5T2JzZXJ2ZXIub3Blbih0aGlzLm5vdGlmeVByb3BlcnR5Q2hhbmdlcyx0aGlzKX0sbm90aWZ5UHJvcGVydHlDaGFuZ2VzOmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGY9e307Zm9yKHZhciBnIGluIGIpaWYoZD1jWzIqZysxXSxlPXRoaXMub2JzZXJ2ZVtkXSl7dmFyIGg9YltnXSxpPWFbZ107dGhpcy5vYnNlcnZlQXJyYXlWYWx1ZShkLGksaCksZltlXXx8KHZvaWQgMCE9PWgmJm51bGwhPT1ofHx2b2lkIDAhPT1pJiZudWxsIT09aSkmJihmW2VdPSEwLHRoaXMuaW52b2tlTWV0aG9kKGUsW2gsaSxhcmd1bWVudHNdKSl9fSxkZWxpdmVyQ2hhbmdlczpmdW5jdGlvbigpe3RoaXMuX3Byb3BlcnR5T2JzZXJ2ZXImJnRoaXMuX3Byb3BlcnR5T2JzZXJ2ZXIuZGVsaXZlcigpfSxwcm9wZXJ0eUNoYW5nZWRfOmZ1bmN0aW9uKGEpe3RoaXMucmVmbGVjdFthXSYmdGhpcy5yZWZsZWN0UHJvcGVydHlUb0F0dHJpYnV0ZShhKX0sb2JzZXJ2ZUFycmF5VmFsdWU6ZnVuY3Rpb24oYSxiLGMpe3ZhciBlPXRoaXMub2JzZXJ2ZVthXTtpZihlJiYoQXJyYXkuaXNBcnJheShjKSYmKGQub2JzZXJ2ZSYmY29uc29sZS5sb2coIlslc10gb2JzZXJ2ZUFycmF5VmFsdWU6IHVucmVnaXN0ZXIgb2JzZXJ2ZXIgWyVzXSIsdGhpcy5sb2NhbE5hbWUsYSksdGhpcy5jbG9zZU5hbWVkT2JzZXJ2ZXIoYSsiX19hcnJheSIpKSxBcnJheS5pc0FycmF5KGIpKSl7ZC5vYnNlcnZlJiZjb25zb2xlLmxvZygiWyVzXSBvYnNlcnZlQXJyYXlWYWx1ZTogcmVnaXN0ZXIgb2JzZXJ2ZXIgWyVzXSIsdGhpcy5sb2NhbE5hbWUsYSxiKTt2YXIgZj1uZXcgQXJyYXlPYnNlcnZlcihiKTtmLm9wZW4oZnVuY3Rpb24oYSl7dGhpcy5pbnZva2VNZXRob2QoZSxbYV0pfSx0aGlzKSx0aGlzLnJlZ2lzdGVyTmFtZWRPYnNlcnZlcihhKyJfX2FycmF5IixmKX19LGVtaXRQcm9wZXJ0eUNoYW5nZVJlY29yZDpmdW5jdGlvbihhLGMsZCl7aWYoIWIoYyxkKSYmKHRoaXMucHJvcGVydHlDaGFuZ2VkXyhhLGMsZCksT2JzZXJ2ZXIuaGFzT2JqZWN0T2JzZXJ2ZSkpe3ZhciBmPXRoaXMubm90aWZpZXJfO2Z8fChmPXRoaXMubm90aWZpZXJfPU9iamVjdC5nZXROb3RpZmllcih0aGlzKSksZS5vYmplY3Q9dGhpcyxlLm5hbWU9YSxlLm9sZFZhbHVlPWQsZi5ub3RpZnkoZSl9fSxiaW5kVG9BY2Nlc3NvcjpmdW5jdGlvbihhLGMsZCl7dmFyIGU9YSsiXyIsZj1hKyJPYnNlcnZhYmxlXyI7dGhpc1tmXT1jO3ZhciBnPXRoaXNbZV0saD10aGlzLGk9Yy5vcGVuKGZ1bmN0aW9uKGIsYyl7aFtlXT1iLGguZW1pdFByb3BlcnR5Q2hhbmdlUmVjb3JkKGEsYixjKX0pO2lmKGQmJiFiKGcsaSkpe3ZhciBqPWQoZyxpKTtiKGksail8fChpPWosYy5zZXRWYWx1ZSYmYy5zZXRWYWx1ZShpKSl9dGhpc1tlXT1pLHRoaXMuZW1pdFByb3BlcnR5Q2hhbmdlUmVjb3JkKGEsaSxnKTt2YXIgaz17Y2xvc2U6ZnVuY3Rpb24oKXtjLmNsb3NlKCksaFtmXT12b2lkIDB9fTtyZXR1cm4gdGhpcy5yZWdpc3Rlck9ic2VydmVyKGspLGt9LGNyZWF0ZUNvbXB1dGVkUHJvcGVydGllczpmdW5jdGlvbigpe2lmKHRoaXMuX2NvbXB1dGVkTmFtZXMpZm9yKHZhciBhPTA7YTx0aGlzLl9jb21wdXRlZE5hbWVzLmxlbmd0aDthKyspe3ZhciBiPXRoaXMuX2NvbXB1dGVkTmFtZXNbYV0sYz10aGlzLmNvbXB1dGVkW2JdO3RyeXt2YXIgZD1Qb2x5bWVyRXhwcmVzc2lvbnMuZ2V0RXhwcmVzc2lvbihjKSxlPWQuZ2V0QmluZGluZyh0aGlzLHRoaXMuZWxlbWVudC5zeW50YXgpO3RoaXMuYmluZFRvQWNjZXNzb3IoYixlKX1jYXRjaChmKXtjb25zb2xlLmVycm9yKCJGYWlsZWQgdG8gY3JlYXRlIGNvbXB1dGVkIHByb3BlcnR5IixmKX19fSxiaW5kUHJvcGVydHk6ZnVuY3Rpb24oYSxiLGQpe3JldHVybiBkP3ZvaWQodGhpc1thXT1iKTp0aGlzLmJpbmRUb0FjY2Vzc29yKGEsYixjKX0saW52b2tlTWV0aG9kOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpc1thXXx8YTsiZnVuY3Rpb24iPT10eXBlb2YgYyYmYy5hcHBseSh0aGlzLGIpfSxyZWdpc3Rlck9ic2VydmVyOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLl9vYnNlcnZlcnM/dm9pZCB0aGlzLl9vYnNlcnZlcnMucHVzaChhKTp2b2lkKHRoaXMuX29ic2VydmVycz1bYV0pfSxjbG9zZU9ic2VydmVyczpmdW5jdGlvbigpe2lmKHRoaXMuX29ic2VydmVycyl7Zm9yKHZhciBhPXRoaXMuX29ic2VydmVycyxiPTA7YjxhLmxlbmd0aDtiKyspe3ZhciBjPWFbYl07YyYmImZ1bmN0aW9uIj09dHlwZW9mIGMuY2xvc2UmJmMuY2xvc2UoKX10aGlzLl9vYnNlcnZlcnM9W119fSxyZWdpc3Rlck5hbWVkT2JzZXJ2ZXI6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLl9uYW1lZE9ic2VydmVyc3x8KHRoaXMuX25hbWVkT2JzZXJ2ZXJzPXt9KTtjW2FdPWJ9LGNsb3NlTmFtZWRPYnNlcnZlcjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLl9uYW1lZE9ic2VydmVycztyZXR1cm4gYiYmYlthXT8oYlthXS5jbG9zZSgpLGJbYV09bnVsbCwhMCk6dm9pZCAwfSxjbG9zZU5hbWVkT2JzZXJ2ZXJzOmZ1bmN0aW9uKCl7aWYodGhpcy5fbmFtZWRPYnNlcnZlcnMpe2Zvcih2YXIgYSBpbiB0aGlzLl9uYW1lZE9ic2VydmVycyl0aGlzLmNsb3NlTmFtZWRPYnNlcnZlcihhKTt0aGlzLl9uYW1lZE9ic2VydmVycz17fX19fTthLmFwaS5pbnN0YW5jZS5wcm9wZXJ0aWVzPWd9KFBvbHltZXIpLGZ1bmN0aW9uKGEpe3ZhciBiPXdpbmRvdy5sb2dGbGFnc3x8MCxjPXtpbnN0YW5jZVRlbXBsYXRlOmZ1bmN0aW9uKGEpe0hUTUxUZW1wbGF0ZUVsZW1lbnQuZGVjb3JhdGUoYSk7Zm9yKHZhciBiPXRoaXMuc3ludGF4fHwhYS5iaW5kaW5nRGVsZWdhdGUmJnRoaXMuZWxlbWVudC5zeW50YXgsYz1hLmNyZWF0ZUluc3RhbmNlKHRoaXMsYiksZD1jLmJpbmRpbmdzXyxlPTA7ZTxkLmxlbmd0aDtlKyspdGhpcy5yZWdpc3Rlck9ic2VydmVyKGRbZV0pO3JldHVybiBjfSxiaW5kOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD10aGlzLnByb3BlcnR5Rm9yQXR0cmlidXRlKGEpO2lmKGQpe3ZhciBlPXRoaXMuYmluZFByb3BlcnR5KGQsYixjKTtyZXR1cm4gUGxhdGZvcm0uZW5hYmxlQmluZGluZ3NSZWZsZWN0aW9uJiZlJiYoZS5wYXRoPWIucGF0aF8sdGhpcy5fcmVjb3JkQmluZGluZyhkLGUpKSx0aGlzLnJlZmxlY3RbZF0mJnRoaXMucmVmbGVjdFByb3BlcnR5VG9BdHRyaWJ1dGUoZCksZX1yZXR1cm4gdGhpcy5taXhpblN1cGVyKGFyZ3VtZW50cyl9LGJpbmRGaW5pc2hlZDpmdW5jdGlvbigpe3RoaXMubWFrZUVsZW1lbnRSZWFkeSgpfSxfcmVjb3JkQmluZGluZzpmdW5jdGlvbihhLGIpe3RoaXMuYmluZGluZ3NfPXRoaXMuYmluZGluZ3NffHx7fSx0aGlzLmJpbmRpbmdzX1thXT1ifSxhc3luY1VuYmluZEFsbDpmdW5jdGlvbigpe3RoaXMuX3VuYm91bmR8fChiLnVuYmluZCYmY29uc29sZS5sb2coIlslc10gYXN5bmNVbmJpbmRBbGwiLHRoaXMubG9jYWxOYW1lKSx0aGlzLl91bmJpbmRBbGxKb2I9dGhpcy5qb2IodGhpcy5fdW5iaW5kQWxsSm9iLHRoaXMudW5iaW5kQWxsLDApKX0sdW5iaW5kQWxsOmZ1bmN0aW9uKCl7dGhpcy5fdW5ib3VuZHx8KHRoaXMuY2xvc2VPYnNlcnZlcnMoKSx0aGlzLmNsb3NlTmFtZWRPYnNlcnZlcnMoKSx0aGlzLl91bmJvdW5kPSEwKX0sY2FuY2VsVW5iaW5kQWxsOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3VuYm91bmQ/dm9pZChiLnVuYmluZCYmY29uc29sZS53YXJuKCJbJXNdIGFscmVhZHkgdW5ib3VuZCwgY2Fubm90IGNhbmNlbCB1bmJpbmRBbGwiLHRoaXMubG9jYWxOYW1lKSk6KGIudW5iaW5kJiZjb25zb2xlLmxvZygiWyVzXSBjYW5jZWxVbmJpbmRBbGwiLHRoaXMubG9jYWxOYW1lKSx2b2lkKHRoaXMuX3VuYmluZEFsbEpvYiYmKHRoaXMuX3VuYmluZEFsbEpvYj10aGlzLl91bmJpbmRBbGxKb2Iuc3RvcCgpKSkpfX0sZD0vXHtceyhbXnt9XSopfX0vO2EuYmluZFBhdHRlcm49ZCxhLmFwaS5pbnN0YW5jZS5tZHY9Y30oUG9seW1lciksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhKXtyZXR1cm4gYS5oYXNPd25Qcm9wZXJ0eSgiUG9seW1lckJhc2UiKX1mdW5jdGlvbiBjKCl7fXZhciBkPXtQb2x5bWVyQmFzZTohMCxqb2I6ZnVuY3Rpb24oYSxiLGMpe2lmKCJzdHJpbmciIT10eXBlb2YgYSlyZXR1cm4gUG9seW1lci5qb2IuY2FsbCh0aGlzLGEsYixjKTt2YXIgZD0iX19fIithO3RoaXNbZF09UG9seW1lci5qb2IuY2FsbCh0aGlzLHRoaXNbZF0sYixjKX0sInN1cGVyIjpQb2x5bWVyLnN1cGVyLGNyZWF0ZWQ6ZnVuY3Rpb24oKXt9LHJlYWR5OmZ1bmN0aW9uKCl7fSxjcmVhdGVkQ2FsbGJhY2s6ZnVuY3Rpb24oKXt0aGlzLnRlbXBsYXRlSW5zdGFuY2UmJnRoaXMudGVtcGxhdGVJbnN0YW5jZS5tb2RlbCYmY29uc29sZS53YXJuKCJBdHRyaWJ1dGVzIG9uICIrdGhpcy5sb2NhbE5hbWUrIiB3ZXJlIGRhdGEgYm91bmQgcHJpb3IgdG8gUG9seW1lciB1cGdyYWRpbmcgdGhlIGVsZW1lbnQuIFRoaXMgbWF5IHJlc3VsdCBpbiBpbmNvcnJlY3QgYmluZGluZyB0eXBlcy4iKSx0aGlzLmNyZWF0ZWQoKSx0aGlzLnByZXBhcmVFbGVtZW50KCksdGhpcy5vd25lckRvY3VtZW50LmlzU3RhZ2luZ0RvY3VtZW50fHx0aGlzLm1ha2VFbGVtZW50UmVhZHkoKX0scHJlcGFyZUVsZW1lbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZWxlbWVudFByZXBhcmVkP3ZvaWQgY29uc29sZS53YXJuKCJFbGVtZW50IGFscmVhZHkgcHJlcGFyZWQiLHRoaXMubG9jYWxOYW1lKToodGhpcy5fZWxlbWVudFByZXBhcmVkPSEwLHRoaXMuc2hhZG93Um9vdHM9e30sdGhpcy5jcmVhdGVQcm9wZXJ0eU9ic2VydmVyKCksdGhpcy5vcGVuUHJvcGVydHlPYnNlcnZlcigpLHRoaXMuY29weUluc3RhbmNlQXR0cmlidXRlcygpLHRoaXMudGFrZUF0dHJpYnV0ZXMoKSx2b2lkIHRoaXMuYWRkSG9zdExpc3RlbmVycygpKX0sbWFrZUVsZW1lbnRSZWFkeTpmdW5jdGlvbigpe3RoaXMuX3JlYWRpZWR8fCh0aGlzLl9yZWFkaWVkPSEwLHRoaXMuY3JlYXRlQ29tcHV0ZWRQcm9wZXJ0aWVzKCksdGhpcy5wYXJzZURlY2xhcmF0aW9ucyh0aGlzLl9fcHJvdG9fXyksdGhpcy5yZW1vdmVBdHRyaWJ1dGUoInVucmVzb2x2ZWQiKSx0aGlzLnJlYWR5KCkpfSxhdHRhY2hlZENhbGxiYWNrOmZ1bmN0aW9uKCl7dGhpcy5jYW5jZWxVbmJpbmRBbGwoKSx0aGlzLmF0dGFjaGVkJiZ0aGlzLmF0dGFjaGVkKCksdGhpcy5lbnRlcmVkVmlldyYmdGhpcy5lbnRlcmVkVmlldygpLHRoaXMuaGFzQmVlbkF0dGFjaGVkfHwodGhpcy5oYXNCZWVuQXR0YWNoZWQ9ITAsdGhpcy5kb21SZWFkeSYmdGhpcy5hc3luYygiZG9tUmVhZHkiKSl9LGRldGFjaGVkQ2FsbGJhY2s6ZnVuY3Rpb24oKXt0aGlzLnByZXZlbnREaXNwb3NlfHx0aGlzLmFzeW5jVW5iaW5kQWxsKCksdGhpcy5kZXRhY2hlZCYmdGhpcy5kZXRhY2hlZCgpLHRoaXMubGVmdFZpZXcmJnRoaXMubGVmdFZpZXcoKX0sZW50ZXJlZFZpZXdDYWxsYmFjazpmdW5jdGlvbigpe3RoaXMuYXR0YWNoZWRDYWxsYmFjaygpfSxsZWZ0Vmlld0NhbGxiYWNrOmZ1bmN0aW9uKCl7dGhpcy5kZXRhY2hlZENhbGxiYWNrKCl9LGVudGVyZWREb2N1bWVudENhbGxiYWNrOmZ1bmN0aW9uKCl7dGhpcy5hdHRhY2hlZENhbGxiYWNrKCkKfSxsZWZ0RG9jdW1lbnRDYWxsYmFjazpmdW5jdGlvbigpe3RoaXMuZGV0YWNoZWRDYWxsYmFjaygpfSxwYXJzZURlY2xhcmF0aW9uczpmdW5jdGlvbihhKXthJiZhLmVsZW1lbnQmJih0aGlzLnBhcnNlRGVjbGFyYXRpb25zKGEuX19wcm90b19fKSxhLnBhcnNlRGVjbGFyYXRpb24uY2FsbCh0aGlzLGEuZWxlbWVudCkpfSxwYXJzZURlY2xhcmF0aW9uOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZmV0Y2hUZW1wbGF0ZShhKTtpZihiKXt2YXIgYz10aGlzLnNoYWRvd0Zyb21UZW1wbGF0ZShiKTt0aGlzLnNoYWRvd1Jvb3RzW2EubmFtZV09Y319LGZldGNoVGVtcGxhdGU6ZnVuY3Rpb24oYSl7cmV0dXJuIGEucXVlcnlTZWxlY3RvcigidGVtcGxhdGUiKX0sc2hhZG93RnJvbVRlbXBsYXRlOmZ1bmN0aW9uKGEpe2lmKGEpe3ZhciBiPXRoaXMuY3JlYXRlU2hhZG93Um9vdCgpLGM9dGhpcy5pbnN0YW5jZVRlbXBsYXRlKGEpO3JldHVybiBiLmFwcGVuZENoaWxkKGMpLHRoaXMuc2hhZG93Um9vdFJlYWR5KGIsYSksYn19LGxpZ2h0RnJvbVRlbXBsYXRlOmZ1bmN0aW9uKGEsYil7aWYoYSl7dGhpcy5ldmVudENvbnRyb2xsZXI9dGhpczt2YXIgYz10aGlzLmluc3RhbmNlVGVtcGxhdGUoYSk7cmV0dXJuIGI/dGhpcy5pbnNlcnRCZWZvcmUoYyxiKTp0aGlzLmFwcGVuZENoaWxkKGMpLHRoaXMuc2hhZG93Um9vdFJlYWR5KHRoaXMpLGN9fSxzaGFkb3dSb290UmVhZHk6ZnVuY3Rpb24oYSl7dGhpcy5tYXJzaGFsTm9kZVJlZmVyZW5jZXMoYSl9LG1hcnNoYWxOb2RlUmVmZXJlbmNlczpmdW5jdGlvbihhKXt2YXIgYj10aGlzLiQ9dGhpcy4kfHx7fTtpZihhKWZvcih2YXIgYyxkPWEucXVlcnlTZWxlY3RvckFsbCgiW2lkXSIpLGU9MCxmPWQubGVuZ3RoO2Y+ZSYmKGM9ZFtlXSk7ZSsrKWJbYy5pZF09Y30sYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrOmZ1bmN0aW9uKGEpeyJjbGFzcyIhPT1hJiYic3R5bGUiIT09YSYmdGhpcy5hdHRyaWJ1dGVUb1Byb3BlcnR5KGEsdGhpcy5nZXRBdHRyaWJ1dGUoYSkpLHRoaXMuYXR0cmlidXRlQ2hhbmdlZCYmdGhpcy5hdHRyaWJ1dGVDaGFuZ2VkLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sb25NdXRhdGlvbjpmdW5jdGlvbihhLGIpe3ZhciBjPW5ldyBNdXRhdGlvbk9ic2VydmVyKGZ1bmN0aW9uKGEpe2IuY2FsbCh0aGlzLGMsYSksYy5kaXNjb25uZWN0KCl9LmJpbmQodGhpcykpO2Mub2JzZXJ2ZShhLHtjaGlsZExpc3Q6ITAsc3VidHJlZTohMH0pfX07Yy5wcm90b3R5cGU9ZCxkLmNvbnN0cnVjdG9yPWMsYS5CYXNlPWMsYS5pc0Jhc2U9YixhLmFwaS5pbnN0YW5jZS5iYXNlPWR9KFBvbHltZXIpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7cmV0dXJuIGEuX19wcm90b19ffWZ1bmN0aW9uIGMoYSxiKXt2YXIgYz0iIixkPSExO2ImJihjPWIubG9jYWxOYW1lLGQ9Yi5oYXNBdHRyaWJ1dGUoImlzIikpO3ZhciBlPVBsYXRmb3JtLlNoYWRvd0NTUy5tYWtlU2NvcGVTZWxlY3RvcihjLGQpO3JldHVybiBQbGF0Zm9ybS5TaGFkb3dDU1Muc2hpbUNzc1RleHQoYSxlKX12YXIgZD0od2luZG93LmxvZ0ZsYWdzfHx7fSx3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGU9ImVsZW1lbnQiLGY9ImNvbnRyb2xsZXIiLGc9e1NUWUxFX1NDT1BFX0FUVFJJQlVURTplLGluc3RhbGxDb250cm9sbGVyU3R5bGVzOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5maW5kU3R5bGVTY29wZSgpO2lmKGEmJiF0aGlzLnNjb3BlSGFzTmFtZWRTdHlsZShhLHRoaXMubG9jYWxOYW1lKSl7Zm9yKHZhciBjPWIodGhpcyksZD0iIjtjJiZjLmVsZW1lbnQ7KWQrPWMuZWxlbWVudC5jc3NUZXh0Rm9yU2NvcGUoZiksYz1iKGMpO2QmJnRoaXMuaW5zdGFsbFNjb3BlQ3NzVGV4dChkLGEpfX0saW5zdGFsbFNjb3BlU3R5bGU6ZnVuY3Rpb24oYSxiLGMpe3ZhciBjPWN8fHRoaXMuZmluZFN0eWxlU2NvcGUoKSxiPWJ8fCIiO2lmKGMmJiF0aGlzLnNjb3BlSGFzTmFtZWRTdHlsZShjLHRoaXMubG9jYWxOYW1lK2IpKXt2YXIgZD0iIjtpZihhIGluc3RhbmNlb2YgQXJyYXkpZm9yKHZhciBlLGY9MCxnPWEubGVuZ3RoO2c+ZiYmKGU9YVtmXSk7ZisrKWQrPWUudGV4dENvbnRlbnQrIlxuXG4iO2Vsc2UgZD1hLnRleHRDb250ZW50O3RoaXMuaW5zdGFsbFNjb3BlQ3NzVGV4dChkLGMsYil9fSxpbnN0YWxsU2NvcGVDc3NUZXh0OmZ1bmN0aW9uKGEsYixlKXtpZihiPWJ8fHRoaXMuZmluZFN0eWxlU2NvcGUoKSxlPWV8fCIiLGIpe2QmJihhPWMoYSxiLmhvc3QpKTt2YXIgZz10aGlzLmVsZW1lbnQuY3NzVGV4dFRvU2NvcGVTdHlsZShhLGYpO1BvbHltZXIuYXBwbHlTdHlsZVRvU2NvcGUoZyxiKSx0aGlzLnN0eWxlQ2FjaGVGb3JTY29wZShiKVt0aGlzLmxvY2FsTmFtZStlXT0hMH19LGZpbmRTdHlsZVNjb3BlOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1hfHx0aGlzO2IucGFyZW50Tm9kZTspYj1iLnBhcmVudE5vZGU7cmV0dXJuIGJ9LHNjb3BlSGFzTmFtZWRTdHlsZTpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuc3R5bGVDYWNoZUZvclNjb3BlKGEpO3JldHVybiBjW2JdfSxzdHlsZUNhY2hlRm9yU2NvcGU6ZnVuY3Rpb24oYSl7aWYoZCl7dmFyIGI9YS5ob3N0P2EuaG9zdC5sb2NhbE5hbWU6YS5sb2NhbE5hbWU7cmV0dXJuIGhbYl18fChoW2JdPXt9KX1yZXR1cm4gYS5fc2NvcGVTdHlsZXM9YS5fc2NvcGVTdHlsZXN8fHt9fX0saD17fTthLmFwaS5pbnN0YW5jZS5zdHlsZXM9Z30oUG9seW1lciksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhLGIpe2lmKCJzdHJpbmciIT10eXBlb2YgYSl7dmFyIGM9Ynx8ZG9jdW1lbnQuX2N1cnJlbnRTY3JpcHQ7aWYoYj1hLGE9YyYmYy5wYXJlbnROb2RlJiZjLnBhcmVudE5vZGUuZ2V0QXR0cmlidXRlP2MucGFyZW50Tm9kZS5nZXRBdHRyaWJ1dGUoIm5hbWUiKToiIiwhYSl0aHJvdyJFbGVtZW50IG5hbWUgY291bGQgbm90IGJlIGluZmVycmVkLiJ9aWYoZlthXSl0aHJvdyJBbHJlYWR5IHJlZ2lzdGVyZWQgKFBvbHltZXIpIHByb3RvdHlwZSBmb3IgZWxlbWVudCAiK2E7ZShhLGIpLGQoYSl9ZnVuY3Rpb24gYyhhLGIpe2hbYV09Yn1mdW5jdGlvbiBkKGEpe2hbYV0mJihoW2FdLnJlZ2lzdGVyV2hlblJlYWR5KCksZGVsZXRlIGhbYV0pfWZ1bmN0aW9uIGUoYSxiKXtyZXR1cm4gaVthXT1ifHx7fX1mdW5jdGlvbiBmKGEpe3JldHVybiBpW2FdfXZhciBnPWEuZXh0ZW5kLGg9KGEuYXBpLHt9KSxpPXt9O2EuZ2V0UmVnaXN0ZXJlZFByb3RvdHlwZT1mLGEud2FpdGluZ0ZvclByb3RvdHlwZT1jLHdpbmRvdy5Qb2x5bWVyPWIsZyhQb2x5bWVyLGEpLFBsYXRmb3JtLmNvbnN1bWVEZWNsYXJhdGlvbnMmJlBsYXRmb3JtLmNvbnN1bWVEZWNsYXJhdGlvbnMoZnVuY3Rpb24oYSl7aWYoYSlmb3IodmFyIGMsZD0wLGU9YS5sZW5ndGg7ZT5kJiYoYz1hW2RdKTtkKyspYi5hcHBseShudWxsLGMpfSl9KFBvbHltZXIpLGZ1bmN0aW9uKGEpe3ZhciBiPXtyZXNvbHZlRWxlbWVudFBhdGhzOmZ1bmN0aW9uKGEpe1BvbHltZXIudXJsUmVzb2x2ZXIucmVzb2x2ZURvbShhKX0sYWRkUmVzb2x2ZVBhdGhBcGk6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmdldEF0dHJpYnV0ZSgiYXNzZXRwYXRoIil8fCIiLGI9bmV3IFVSTChhLHRoaXMub3duZXJEb2N1bWVudC5iYXNlVVJJKTt0aGlzLnByb3RvdHlwZS5yZXNvbHZlUGF0aD1mdW5jdGlvbihhLGMpe3ZhciBkPW5ldyBVUkwoYSxjfHxiKTtyZXR1cm4gZC5ocmVmfX19O2EuYXBpLmRlY2xhcmF0aW9uLnBhdGg9Yn0oUG9seW1lciksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhLGIpe3ZhciBjPW5ldyBVUkwoYS5nZXRBdHRyaWJ1dGUoImhyZWYiKSxiKS5ocmVmO3JldHVybiJAaW1wb3J0ICciK2MrIic7In1mdW5jdGlvbiBjKGEsYil7aWYoYSl7Yj09PWRvY3VtZW50JiYoYj1kb2N1bWVudC5oZWFkKSxpJiYoYj1kb2N1bWVudC5oZWFkKTt2YXIgYz1kKGEudGV4dENvbnRlbnQpLGU9YS5nZXRBdHRyaWJ1dGUoaCk7ZSYmYy5zZXRBdHRyaWJ1dGUoaCxlKTt2YXIgZj1iLmZpcnN0RWxlbWVudENoaWxkO2lmKGI9PT1kb2N1bWVudC5oZWFkKXt2YXIgZz0ic3R5bGVbIitoKyJdIixqPWRvY3VtZW50LmhlYWQucXVlcnlTZWxlY3RvckFsbChnKTtqLmxlbmd0aCYmKGY9altqLmxlbmd0aC0xXS5uZXh0RWxlbWVudFNpYmxpbmcpfWIuaW5zZXJ0QmVmb3JlKGMsZil9fWZ1bmN0aW9uIGQoYSxiKXtiPWJ8fGRvY3VtZW50LGI9Yi5jcmVhdGVFbGVtZW50P2I6Yi5vd25lckRvY3VtZW50O3ZhciBjPWIuY3JlYXRlRWxlbWVudCgic3R5bGUiKTtyZXR1cm4gYy50ZXh0Q29udGVudD1hLGN9ZnVuY3Rpb24gZShhKXtyZXR1cm4gYSYmYS5fX3Jlc291cmNlfHwiIn1mdW5jdGlvbiBmKGEsYil7cmV0dXJuIHE/cS5jYWxsKGEsYik6dm9pZCAwfXZhciBnPSh3aW5kb3cubG9nRmxhZ3N8fHt9LGEuYXBpLmluc3RhbmNlLnN0eWxlcyksaD1nLlNUWUxFX1NDT1BFX0FUVFJJQlVURSxpPXdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCxqPSJzdHlsZSIsaz0iQGltcG9ydCIsbD0ibGlua1tyZWw9c3R5bGVzaGVldF0iLG09Imdsb2JhbCIsbj0icG9seW1lci1zY29wZSIsbz17bG9hZFN0eWxlczpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmZldGNoVGVtcGxhdGUoKSxjPWImJnRoaXMudGVtcGxhdGVDb250ZW50KCk7aWYoYyl7dGhpcy5jb252ZXJ0U2hlZXRzVG9TdHlsZXMoYyk7dmFyIGQ9dGhpcy5maW5kTG9hZGFibGVTdHlsZXMoYyk7aWYoZC5sZW5ndGgpe3ZhciBlPWIub3duZXJEb2N1bWVudC5iYXNlVVJJO3JldHVybiBQb2x5bWVyLnN0eWxlUmVzb2x2ZXIubG9hZFN0eWxlcyhkLGUsYSl9fWEmJmEoKX0sY29udmVydFNoZWV0c1RvU3R5bGVzOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYyxlLGY9YS5xdWVyeVNlbGVjdG9yQWxsKGwpLGc9MCxoPWYubGVuZ3RoO2g+ZyYmKGM9ZltnXSk7ZysrKWU9ZChiKGMsdGhpcy5vd25lckRvY3VtZW50LmJhc2VVUkkpLHRoaXMub3duZXJEb2N1bWVudCksdGhpcy5jb3B5U2hlZXRBdHRyaWJ1dGVzKGUsYyksYy5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChlLGMpfSxjb3B5U2hlZXRBdHRyaWJ1dGVzOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjLGQ9MCxlPWIuYXR0cmlidXRlcyxmPWUubGVuZ3RoOyhjPWVbZF0pJiZmPmQ7ZCsrKSJyZWwiIT09Yy5uYW1lJiYiaHJlZiIhPT1jLm5hbWUmJmEuc2V0QXR0cmlidXRlKGMubmFtZSxjLnZhbHVlKX0sZmluZExvYWRhYmxlU3R5bGVzOmZ1bmN0aW9uKGEpe3ZhciBiPVtdO2lmKGEpZm9yKHZhciBjLGQ9YS5xdWVyeVNlbGVjdG9yQWxsKGopLGU9MCxmPWQubGVuZ3RoO2Y+ZSYmKGM9ZFtlXSk7ZSsrKWMudGV4dENvbnRlbnQubWF0Y2goaykmJmIucHVzaChjKTtyZXR1cm4gYn0saW5zdGFsbFNoZWV0czpmdW5jdGlvbigpe3RoaXMuY2FjaGVTaGVldHMoKSx0aGlzLmNhY2hlU3R5bGVzKCksdGhpcy5pbnN0YWxsTG9jYWxTaGVldHMoKSx0aGlzLmluc3RhbGxHbG9iYWxTdHlsZXMoKX0sY2FjaGVTaGVldHM6ZnVuY3Rpb24oKXt0aGlzLnNoZWV0cz10aGlzLmZpbmROb2RlcyhsKSx0aGlzLnNoZWV0cy5mb3JFYWNoKGZ1bmN0aW9uKGEpe2EucGFyZW50Tm9kZSYmYS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGEpfSl9LGNhY2hlU3R5bGVzOmZ1bmN0aW9uKCl7dGhpcy5zdHlsZXM9dGhpcy5maW5kTm9kZXMoaisiWyIrbisiXSIpLHRoaXMuc3R5bGVzLmZvckVhY2goZnVuY3Rpb24oYSl7YS5wYXJlbnROb2RlJiZhLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYSl9KX0saW5zdGFsbExvY2FsU2hlZXRzOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5zaGVldHMuZmlsdGVyKGZ1bmN0aW9uKGEpe3JldHVybiFhLmhhc0F0dHJpYnV0ZShuKX0pLGI9dGhpcy50ZW1wbGF0ZUNvbnRlbnQoKTtpZihiKXt2YXIgYz0iIjtpZihhLmZvckVhY2goZnVuY3Rpb24oYSl7Yys9ZShhKSsiXG4ifSksYyl7dmFyIGY9ZChjLHRoaXMub3duZXJEb2N1bWVudCk7Yi5pbnNlcnRCZWZvcmUoZixiLmZpcnN0Q2hpbGQpfX19LGZpbmROb2RlczpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMucXVlcnlTZWxlY3RvckFsbChhKS5hcnJheSgpLGQ9dGhpcy50ZW1wbGF0ZUNvbnRlbnQoKTtpZihkKXt2YXIgZT1kLnF1ZXJ5U2VsZWN0b3JBbGwoYSkuYXJyYXkoKTtjPWMuY29uY2F0KGUpfXJldHVybiBiP2MuZmlsdGVyKGIpOmN9LGluc3RhbGxHbG9iYWxTdHlsZXM6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnN0eWxlRm9yU2NvcGUobSk7YyhhLGRvY3VtZW50LmhlYWQpfSxjc3NUZXh0Rm9yU2NvcGU6ZnVuY3Rpb24oYSl7dmFyIGI9IiIsYz0iWyIrbisiPSIrYSsiXSIsZD1mdW5jdGlvbihhKXtyZXR1cm4gZihhLGMpfSxnPXRoaXMuc2hlZXRzLmZpbHRlcihkKTtnLmZvckVhY2goZnVuY3Rpb24oYSl7Yis9ZShhKSsiXG5cbiJ9KTt2YXIgaD10aGlzLnN0eWxlcy5maWx0ZXIoZCk7cmV0dXJuIGguZm9yRWFjaChmdW5jdGlvbihhKXtiKz1hLnRleHRDb250ZW50KyJcblxuIn0pLGJ9LHN0eWxlRm9yU2NvcGU6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jc3NUZXh0Rm9yU2NvcGUoYSk7cmV0dXJuIHRoaXMuY3NzVGV4dFRvU2NvcGVTdHlsZShiLGEpfSxjc3NUZXh0VG9TY29wZVN0eWxlOmZ1bmN0aW9uKGEsYil7aWYoYSl7dmFyIGM9ZChhKTtyZXR1cm4gYy5zZXRBdHRyaWJ1dGUoaCx0aGlzLmdldEF0dHJpYnV0ZSgibmFtZSIpKyItIitiKSxjfX19LHA9SFRNTEVsZW1lbnQucHJvdG90eXBlLHE9cC5tYXRjaGVzfHxwLm1hdGNoZXNTZWxlY3Rvcnx8cC53ZWJraXRNYXRjaGVzU2VsZWN0b3J8fHAubW96TWF0Y2hlc1NlbGVjdG9yO2EuYXBpLmRlY2xhcmF0aW9uLnN0eWxlcz1vLGEuYXBwbHlTdHlsZVRvU2NvcGU9Y30oUG9seW1lciksZnVuY3Rpb24oYSl7dmFyIGI9KHdpbmRvdy5sb2dGbGFnc3x8e30sYS5hcGkuaW5zdGFuY2UuZXZlbnRzKSxjPWIuRVZFTlRfUFJFRklYLGQ9e307WyJ3ZWJraXRBbmltYXRpb25TdGFydCIsIndlYmtpdEFuaW1hdGlvbkVuZCIsIndlYmtpdFRyYW5zaXRpb25FbmQiLCJET01Gb2N1c091dCIsIkRPTUZvY3VzSW4iLCJET01Nb3VzZVNjcm9sbCJdLmZvckVhY2goZnVuY3Rpb24oYSl7ZFthLnRvTG93ZXJDYXNlKCldPWF9KTt2YXIgZT17cGFyc2VIb3N0RXZlbnRzOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5wcm90b3R5cGUuZXZlbnREZWxlZ2F0ZXM7dGhpcy5hZGRBdHRyaWJ1dGVEZWxlZ2F0ZXMoYSl9LGFkZEF0dHJpYnV0ZURlbGVnYXRlczpmdW5jdGlvbihhKXtmb3IodmFyIGIsYz0wO2I9dGhpcy5hdHRyaWJ1dGVzW2NdO2MrKyl0aGlzLmhhc0V2ZW50UHJlZml4KGIubmFtZSkmJihhW3RoaXMucmVtb3ZlRXZlbnRQcmVmaXgoYi5uYW1lKV09Yi52YWx1ZS5yZXBsYWNlKCJ7eyIsIiIpLnJlcGxhY2UoIn19IiwiIikudHJpbSgpKX0saGFzRXZlbnRQcmVmaXg6ZnVuY3Rpb24oYSl7cmV0dXJuIGEmJiJvIj09PWFbMF0mJiJuIj09PWFbMV0mJiItIj09PWFbMl19LHJlbW92ZUV2ZW50UHJlZml4OmZ1bmN0aW9uKGEpe3JldHVybiBhLnNsaWNlKGYpfSxmaW5kQ29udHJvbGxlcjpmdW5jdGlvbihhKXtmb3IoO2EucGFyZW50Tm9kZTspe2lmKGEuZXZlbnRDb250cm9sbGVyKXJldHVybiBhLmV2ZW50Q29udHJvbGxlcjthPWEucGFyZW50Tm9kZX1yZXR1cm4gYS5ob3N0fSxnZXRFdmVudEhhbmRsZXI6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXRoaXM7cmV0dXJuIGZ1bmN0aW9uKGUpe2EmJmEuUG9seW1lckJhc2V8fChhPWQuZmluZENvbnRyb2xsZXIoYikpO3ZhciBmPVtlLGUuZGV0YWlsLGUuY3VycmVudFRhcmdldF07YS5kaXNwYXRjaE1ldGhvZChhLGMsZil9fSxwcmVwYXJlRXZlbnRCaW5kaW5nOmZ1bmN0aW9uKGEsYil7aWYodGhpcy5oYXNFdmVudFByZWZpeChiKSl7dmFyIGM9dGhpcy5yZW1vdmVFdmVudFByZWZpeChiKTtjPWRbY118fGM7dmFyIGU9dGhpcztyZXR1cm4gZnVuY3Rpb24oYixkLGYpe2Z1bmN0aW9uIGcoKXtyZXR1cm4ie3sgIithKyIgfX0ifXZhciBoPWUuZ2V0RXZlbnRIYW5kbGVyKHZvaWQgMCxkLGEpO3JldHVybiBQb2x5bWVyR2VzdHVyZXMuYWRkRXZlbnRMaXN0ZW5lcihkLGMsaCksZj92b2lkIDA6e29wZW46ZyxkaXNjYXJkQ2hhbmdlczpnLGNsb3NlOmZ1bmN0aW9uKCl7UG9seW1lckdlc3R1cmVzLnJlbW92ZUV2ZW50TGlzdGVuZXIoZCxjLGgpfX19fX19LGY9Yy5sZW5ndGg7YS5hcGkuZGVjbGFyYXRpb24uZXZlbnRzPWV9KFBvbHltZXIpLGZ1bmN0aW9uKGEpe3ZhciBiPXtpbmZlck9ic2VydmVyczpmdW5jdGlvbihhKXt2YXIgYixjPWEub2JzZXJ2ZTtmb3IodmFyIGQgaW4gYSkiQ2hhbmdlZCI9PT1kLnNsaWNlKC03KSYmKGN8fChjPWEub2JzZXJ2ZT17fSksYj1kLnNsaWNlKDAsLTcpLGNbYl09Y1tiXXx8ZCl9LGV4cGxvZGVPYnNlcnZlcnM6ZnVuY3Rpb24oYSl7dmFyIGI9YS5vYnNlcnZlO2lmKGIpe3ZhciBjPXt9O2Zvcih2YXIgZCBpbiBiKWZvcih2YXIgZSxmPWQuc3BsaXQoIiAiKSxnPTA7ZT1mW2ddO2crKyljW2VdPWJbZF07YS5vYnNlcnZlPWN9fSxvcHRpbWl6ZVByb3BlcnR5TWFwczpmdW5jdGlvbihhKXtpZihhLm9ic2VydmUpe3ZhciBiPWEuX29ic2VydmVOYW1lcz1bXTtmb3IodmFyIGMgaW4gYS5vYnNlcnZlKWZvcih2YXIgZCxlPWMuc3BsaXQoIiAiKSxmPTA7ZD1lW2ZdO2YrKyliLnB1c2goZCl9aWYoYS5wdWJsaXNoKXt2YXIgYj1hLl9wdWJsaXNoTmFtZXM9W107Zm9yKHZhciBjIGluIGEucHVibGlzaCliLnB1c2goYyl9aWYoYS5jb21wdXRlZCl7dmFyIGI9YS5fY29tcHV0ZWROYW1lcz1bXTtmb3IodmFyIGMgaW4gYS5jb21wdXRlZCliLnB1c2goYyl9fSxwdWJsaXNoUHJvcGVydGllczpmdW5jdGlvbihhLGIpe3ZhciBjPWEucHVibGlzaDtjJiYodGhpcy5yZXF1aXJlUHJvcGVydGllcyhjLGEsYiksYS5fcHVibGlzaExDPXRoaXMubG93ZXJDYXNlTWFwKGMpKX0scmVxdWlyZVByb3BlcnRpZXM6ZnVuY3Rpb24oYSxiKXtiLnJlZmxlY3Q9Yi5yZWZsZWN0fHx7fTtmb3IodmFyIGMgaW4gYSl7dmFyIGQ9YVtjXTtkJiZ2b2lkIDAhPT1kLnJlZmxlY3QmJihiLnJlZmxlY3RbY109Qm9vbGVhbihkLnJlZmxlY3QpLGQ9ZC52YWx1ZSksdm9pZCAwIT09ZCYmKGJbY109ZCl9fSxsb3dlckNhc2VNYXA6ZnVuY3Rpb24oYSl7dmFyIGI9e307Zm9yKHZhciBjIGluIGEpYltjLnRvTG93ZXJDYXNlKCldPWM7cmV0dXJuIGJ9LGNyZWF0ZVByb3BlcnR5QWNjZXNzb3I6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5wcm90b3R5cGUsYz1hKyJfIixkPWErIk9ic2VydmFibGVfIjtiW2NdPWJbYV0sT2JqZWN0LmRlZmluZVByb3BlcnR5KGIsYSx7Z2V0OmZ1bmN0aW9uKCl7dmFyIGE9dGhpc1tkXTtyZXR1cm4gYSYmYS5kZWxpdmVyKCksdGhpc1tjXX0sc2V0OmZ1bmN0aW9uKGIpe3ZhciBlPXRoaXNbZF07aWYoZSlyZXR1cm4gdm9pZCBlLnNldFZhbHVlKGIpO3ZhciBmPXRoaXNbY107cmV0dXJuIHRoaXNbY109Yix0aGlzLmVtaXRQcm9wZXJ0eUNoYW5nZVJlY29yZChhLGIsZiksYn0sY29uZmlndXJhYmxlOiEwfSl9LGNyZWF0ZVByb3BlcnR5QWNjZXNzb3JzOmZ1bmN0aW9uKGEpe3ZhciBiPWEuX3B1Ymxpc2hOYW1lcztpZihiJiZiLmxlbmd0aClmb3IodmFyIGMsZD0wLGU9Yi5sZW5ndGg7ZT5kJiYoYz1iW2RdKTtkKyspdGhpcy5jcmVhdGVQcm9wZXJ0eUFjY2Vzc29yKGMpO3ZhciBiPWEuX2NvbXB1dGVkTmFtZXM7aWYoYiYmYi5sZW5ndGgpZm9yKHZhciBjLGQ9MCxlPWIubGVuZ3RoO2U+ZCYmKGM9YltkXSk7ZCsrKXRoaXMuY3JlYXRlUHJvcGVydHlBY2Nlc3NvcihjKX19O2EuYXBpLmRlY2xhcmF0aW9uLnByb3BlcnRpZXM9Yn0oUG9seW1lciksZnVuY3Rpb24oYSl7dmFyIGI9ImF0dHJpYnV0ZXMiLGM9L1xzfCwvLGQ9e2luaGVyaXRBdHRyaWJ1dGVzT2JqZWN0czpmdW5jdGlvbihhKXt0aGlzLmluaGVyaXRPYmplY3QoYSwicHVibGlzaExDIiksdGhpcy5pbmhlcml0T2JqZWN0KGEsIl9pbnN0YW5jZUF0dHJpYnV0ZXMiKX0scHVibGlzaEF0dHJpYnV0ZXM6ZnVuY3Rpb24oYSl7dmFyIGQ9dGhpcy5nZXRBdHRyaWJ1dGUoYik7aWYoZClmb3IodmFyIGUsZj1hLnB1Ymxpc2h8fChhLnB1Ymxpc2g9e30pLGc9ZC5zcGxpdChjKSxoPTAsaT1nLmxlbmd0aDtpPmg7aCsrKWU9Z1toXS50cmltKCksZSYmdm9pZCAwPT09ZltlXSYmKGZbZV09dm9pZCAwKX0sYWNjdW11bGF0ZUluc3RhbmNlQXR0cmlidXRlczpmdW5jdGlvbigpe2Zvcih2YXIgYSxiPXRoaXMucHJvdG90eXBlLl9pbnN0YW5jZUF0dHJpYnV0ZXMsYz10aGlzLmF0dHJpYnV0ZXMsZD0wLGU9Yy5sZW5ndGg7ZT5kJiYoYT1jW2RdKTtkKyspdGhpcy5pc0luc3RhbmNlQXR0cmlidXRlKGEubmFtZSkmJihiW2EubmFtZV09YS52YWx1ZSl9LGlzSW5zdGFuY2VBdHRyaWJ1dGU6ZnVuY3Rpb24oYSl7cmV0dXJuIXRoaXMuYmxhY2tMaXN0W2FdJiYib24tIiE9PWEuc2xpY2UoMCwzKX0sYmxhY2tMaXN0OntuYW1lOjEsImV4dGVuZHMiOjEsY29uc3RydWN0b3I6MSxub3NjcmlwdDoxLGFzc2V0cGF0aDoxLCJjYWNoZS1jc3N0ZXh0IjoxfX07ZC5ibGFja0xpc3RbYl09MSxhLmFwaS5kZWNsYXJhdGlvbi5hdHRyaWJ1dGVzPWR9KFBvbHltZXIpLGZ1bmN0aW9uKGEpe3ZhciBiPWEuYXBpLmRlY2xhcmF0aW9uLmV2ZW50cyxjPW5ldyBQb2x5bWVyRXhwcmVzc2lvbnMsZD1jLnByZXBhcmVCaW5kaW5nO2MucHJlcGFyZUJpbmRpbmc9ZnVuY3Rpb24oYSxlLGYpe3JldHVybiBiLnByZXBhcmVFdmVudEJpbmRpbmcoYSxlLGYpfHxkLmNhbGwoYyxhLGUsZil9O3ZhciBlPXtzeW50YXg6YyxmZXRjaFRlbXBsYXRlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucXVlcnlTZWxlY3RvcigidGVtcGxhdGUiKX0sdGVtcGxhdGVDb250ZW50OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5mZXRjaFRlbXBsYXRlKCk7cmV0dXJuIGEmJmEuY29udGVudH0saW5zdGFsbEJpbmRpbmdEZWxlZ2F0ZTpmdW5jdGlvbihhKXthJiYoYS5iaW5kaW5nRGVsZWdhdGU9dGhpcy5zeW50YXgpfX07YS5hcGkuZGVjbGFyYXRpb24ubWR2PWV9KFBvbHltZXIpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7aWYoIU9iamVjdC5fX3Byb3RvX18pe3ZhciBiPU9iamVjdC5nZXRQcm90b3R5cGVPZihhKTthLl9fcHJvdG9fXz1iLGQoYikmJihiLl9fcHJvdG9fXz1PYmplY3QuZ2V0UHJvdG90eXBlT2YoYikpfX12YXIgYz1hLmFwaSxkPWEuaXNCYXNlLGU9YS5leHRlbmQsZj13aW5kb3cuU2hhZG93RE9NUG9seWZpbGwsZz17cmVnaXN0ZXI6ZnVuY3Rpb24oYSxiKXt0aGlzLmJ1aWxkUHJvdG90eXBlKGEsYiksdGhpcy5yZWdpc3RlclByb3RvdHlwZShhLGIpLHRoaXMucHVibGlzaENvbnN0cnVjdG9yKCl9LGJ1aWxkUHJvdG90eXBlOmZ1bmN0aW9uKGIsYyl7dmFyIGQ9YS5nZXRSZWdpc3RlcmVkUHJvdG90eXBlKGIpLGU9dGhpcy5nZW5lcmF0ZUJhc2VQcm90b3R5cGUoYyk7dGhpcy5kZXN1Z2FyQmVmb3JlQ2hhaW5pbmcoZCxlKSx0aGlzLnByb3RvdHlwZT10aGlzLmNoYWluUHJvdG90eXBlcyhkLGUpLHRoaXMuZGVzdWdhckFmdGVyQ2hhaW5pbmcoYixjKX0sZGVzdWdhckJlZm9yZUNoYWluaW5nOmZ1bmN0aW9uKGEsYil7YS5lbGVtZW50PXRoaXMsdGhpcy5wdWJsaXNoQXR0cmlidXRlcyhhLGIpLHRoaXMucHVibGlzaFByb3BlcnRpZXMoYSxiKSx0aGlzLmluZmVyT2JzZXJ2ZXJzKGEpLHRoaXMuZXhwbG9kZU9ic2VydmVycyhhKX0sY2hhaW5Qcm90b3R5cGVzOmZ1bmN0aW9uKGEsYyl7dGhpcy5pbmhlcml0TWV0YURhdGEoYSxjKTt2YXIgZD10aGlzLmNoYWluT2JqZWN0KGEsYyk7cmV0dXJuIGIoZCksZH0saW5oZXJpdE1ldGFEYXRhOmZ1bmN0aW9uKGEsYil7dGhpcy5pbmhlcml0T2JqZWN0KCJvYnNlcnZlIixhLGIpLHRoaXMuaW5oZXJpdE9iamVjdCgicHVibGlzaCIsYSxiKSx0aGlzLmluaGVyaXRPYmplY3QoInJlZmxlY3QiLGEsYiksdGhpcy5pbmhlcml0T2JqZWN0KCJfcHVibGlzaExDIixhLGIpLHRoaXMuaW5oZXJpdE9iamVjdCgiX2luc3RhbmNlQXR0cmlidXRlcyIsYSxiKSx0aGlzLmluaGVyaXRPYmplY3QoImV2ZW50RGVsZWdhdGVzIixhLGIpfSxkZXN1Z2FyQWZ0ZXJDaGFpbmluZzpmdW5jdGlvbihhLGIpe3RoaXMub3B0aW1pemVQcm9wZXJ0eU1hcHModGhpcy5wcm90b3R5cGUpLHRoaXMuY3JlYXRlUHJvcGVydHlBY2Nlc3NvcnModGhpcy5wcm90b3R5cGUpLHRoaXMuaW5zdGFsbEJpbmRpbmdEZWxlZ2F0ZSh0aGlzLmZldGNoVGVtcGxhdGUoKSksdGhpcy5pbnN0YWxsU2hlZXRzKCksdGhpcy5yZXNvbHZlRWxlbWVudFBhdGhzKHRoaXMpLHRoaXMuYWNjdW11bGF0ZUluc3RhbmNlQXR0cmlidXRlcygpLHRoaXMucGFyc2VIb3N0RXZlbnRzKCksdGhpcy5hZGRSZXNvbHZlUGF0aEFwaSgpLGYmJlBsYXRmb3JtLlNoYWRvd0NTUy5zaGltU3R5bGluZyh0aGlzLnRlbXBsYXRlQ29udGVudCgpLGEsYiksdGhpcy5wcm90b3R5cGUucmVnaXN0ZXJDYWxsYmFjayYmdGhpcy5wcm90b3R5cGUucmVnaXN0ZXJDYWxsYmFjayh0aGlzKX0scHVibGlzaENvbnN0cnVjdG9yOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5nZXRBdHRyaWJ1dGUoImNvbnN0cnVjdG9yIik7YSYmKHdpbmRvd1thXT10aGlzLmN0b3IpfSxnZW5lcmF0ZUJhc2VQcm90b3R5cGU6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5maW5kQmFzZVByb3RvdHlwZShhKTtpZighYil7dmFyIGI9SFRNTEVsZW1lbnQuZ2V0UHJvdG90eXBlRm9yVGFnKGEpO2I9dGhpcy5lbnN1cmVCYXNlQXBpKGIpLGhbYV09Yn1yZXR1cm4gYn0sZmluZEJhc2VQcm90b3R5cGU6ZnVuY3Rpb24oYSl7cmV0dXJuIGhbYV19LGVuc3VyZUJhc2VBcGk6ZnVuY3Rpb24oYSl7aWYoYS5Qb2x5bWVyQmFzZSlyZXR1cm4gYTt2YXIgYj1PYmplY3QuY3JlYXRlKGEpO3JldHVybiBjLnB1Ymxpc2goYy5pbnN0YW5jZSxiKSx0aGlzLm1peGluTWV0aG9kKGIsYSxjLmluc3RhbmNlLm1kdiwiYmluZCIpLGJ9LG1peGluTWV0aG9kOmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPWZ1bmN0aW9uKGEpe3JldHVybiBiW2RdLmFwcGx5KHRoaXMsYSl9O2FbZF09ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5taXhpblN1cGVyPWUsY1tkXS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fSxpbmhlcml0T2JqZWN0OmZ1bmN0aW9uKGEsYixjKXt2YXIgZD1iW2FdfHx7fTtiW2FdPXRoaXMuY2hhaW5PYmplY3QoZCxjW2FdKX0scmVnaXN0ZXJQcm90b3R5cGU6ZnVuY3Rpb24oYSxiKXt2YXIgYz17cHJvdG90eXBlOnRoaXMucHJvdG90eXBlfSxkPXRoaXMuZmluZFR5cGVFeHRlbnNpb24oYik7ZCYmKGMuZXh0ZW5kcz1kKSxIVE1MRWxlbWVudC5yZWdpc3RlcihhLHRoaXMucHJvdG90eXBlKSx0aGlzLmN0b3I9ZG9jdW1lbnQucmVnaXN0ZXJFbGVtZW50KGEsYyl9LGZpbmRUeXBlRXh0ZW5zaW9uOmZ1bmN0aW9uKGEpe2lmKGEmJmEuaW5kZXhPZigiLSIpPDApcmV0dXJuIGE7dmFyIGI9dGhpcy5maW5kQmFzZVByb3RvdHlwZShhKTtyZXR1cm4gYi5lbGVtZW50P3RoaXMuZmluZFR5cGVFeHRlbnNpb24oYi5lbGVtZW50LmV4dGVuZHMpOnZvaWQgMH19LGg9e307Zy5jaGFpbk9iamVjdD1PYmplY3QuX19wcm90b19fP2Z1bmN0aW9uKGEsYil7cmV0dXJuIGEmJmImJmEhPT1iJiYoYS5fX3Byb3RvX189YiksYX06ZnVuY3Rpb24oYSxiKXtpZihhJiZiJiZhIT09Yil7dmFyIGM9T2JqZWN0LmNyZWF0ZShiKTthPWUoYyxhKX1yZXR1cm4gYX0sYy5kZWNsYXJhdGlvbi5wcm90b3R5cGU9Z30oUG9seW1lciksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhKXtyZXR1cm4gZG9jdW1lbnQuY29udGFpbnMoYSk/aTpofWZ1bmN0aW9uIGMoKXtyZXR1cm4gaC5sZW5ndGg/aFswXTppWzBdfWZ1bmN0aW9uIGQoYSl7ZS53YWl0VG9SZWFkeT0hMCxIVE1MSW1wb3J0cy53aGVuSW1wb3J0c1JlYWR5KGZ1bmN0aW9uKCl7ZS5hZGRSZWFkeUNhbGxiYWNrKGEpLGUud2FpdFRvUmVhZHk9ITEsZS5jaGVjaygpfSl9dmFyIGU9e3dhaXQ6ZnVuY3Rpb24oYSl7YS5fX3F1ZXVlfHwoYS5fX3F1ZXVlPXt9LGYucHVzaChhKSl9LGVucXVldWU6ZnVuY3Rpb24oYSxjLGQpe3ZhciBlPWEuX19xdWV1ZSYmIWEuX19xdWV1ZS5jaGVjaztyZXR1cm4gZSYmKGIoYSkucHVzaChhKSxhLl9fcXVldWUuY2hlY2s9YyxhLl9fcXVldWUuZ289ZCksMCE9PXRoaXMuaW5kZXhPZihhKX0saW5kZXhPZjpmdW5jdGlvbihhKXt2YXIgYz1iKGEpLmluZGV4T2YoYSk7cmV0dXJuIGM+PTAmJmRvY3VtZW50LmNvbnRhaW5zKGEpJiYoYys9SFRNTEltcG9ydHMudXNlTmF0aXZlfHxIVE1MSW1wb3J0cy5yZWFkeT9oLmxlbmd0aDoxZTkpLGN9LGdvOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMucmVtb3ZlKGEpO2ImJihhLl9fcXVldWUuZmx1c2hhYmxlPSEwLHRoaXMuYWRkVG9GbHVzaFF1ZXVlKGIpLHRoaXMuY2hlY2soKSl9LHJlbW92ZTpmdW5jdGlvbihhKXt2YXIgYz10aGlzLmluZGV4T2YoYSk7aWYoMD09PWMpcmV0dXJuIGIoYSkuc2hpZnQoKX0sY2hlY2s6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm5leHRFbGVtZW50KCk7cmV0dXJuIGEmJmEuX19xdWV1ZS5jaGVjay5jYWxsKGEpLHRoaXMuY2FuUmVhZHkoKT8odGhpcy5yZWFkeSgpLCEwKTp2b2lkIDB9LG5leHRFbGVtZW50OmZ1bmN0aW9uKCl7cmV0dXJuIGMoKX0sY2FuUmVhZHk6ZnVuY3Rpb24oKXtyZXR1cm4hdGhpcy53YWl0VG9SZWFkeSYmdGhpcy5pc0VtcHR5KCl9LGlzRW1wdHk6ZnVuY3Rpb24oKXtmb3IodmFyIGEsYj0wLGM9Zi5sZW5ndGg7Yz5iJiYoYT1mW2JdKTtiKyspaWYoYS5fX3F1ZXVlJiYhYS5fX3F1ZXVlLmZsdXNoYWJsZSlyZXR1cm47cmV0dXJuITB9LGFkZFRvRmx1c2hRdWV1ZTpmdW5jdGlvbihhKXtnLnB1c2goYSl9LGZsdXNoOmZ1bmN0aW9uKCl7aWYoIXRoaXMuZmx1c2hpbmcpe3RoaXMuZmx1c2hpbmc9ITA7Zm9yKHZhciBhO2cubGVuZ3RoOylhPWcuc2hpZnQoKSxhLl9fcXVldWUuZ28uY2FsbChhKSxhLl9fcXVldWU9bnVsbDt0aGlzLmZsdXNoaW5nPSExfX0scmVhZHk6ZnVuY3Rpb24oKXt2YXIgYT1DdXN0b21FbGVtZW50cy5yZWFkeTtDdXN0b21FbGVtZW50cy5yZWFkeT0hMSx0aGlzLmZsdXNoKCksQ3VzdG9tRWxlbWVudHMudXNlTmF0aXZlfHxDdXN0b21FbGVtZW50cy51cGdyYWRlRG9jdW1lbnRUcmVlKGRvY3VtZW50KSxDdXN0b21FbGVtZW50cy5yZWFkeT1hLFBsYXRmb3JtLmZsdXNoKCkscmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRoaXMuZmx1c2hSZWFkeUNhbGxiYWNrcyl9LGFkZFJlYWR5Q2FsbGJhY2s6ZnVuY3Rpb24oYSl7YSYmai5wdXNoKGEpfSxmbHVzaFJlYWR5Q2FsbGJhY2tzOmZ1bmN0aW9uKCl7aWYoailmb3IodmFyIGE7ai5sZW5ndGg7KShhPWouc2hpZnQoKSkoKX0sd2FpdFRvUmVhZHk6ITB9LGY9W10sZz1bXSxoPVtdLGk9W10saj1bXTthLmVsZW1lbnRzPWYsYS5xdWV1ZT1lLGEud2hlblJlYWR5PWEud2hlblBvbHltZXJSZWFkeT1kfShQb2x5bWVyKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEpe3JldHVybiBCb29sZWFuKEhUTUxFbGVtZW50LmdldFByb3RvdHlwZUZvclRhZyhhKSl9ZnVuY3Rpb24gYyhhKXtyZXR1cm4gYSYmYS5pbmRleE9mKCItIik+PTB9dmFyIGQ9YS5leHRlbmQsZT1hLmFwaSxmPWEucXVldWUsZz1hLndoZW5SZWFkeSxoPWEuZ2V0UmVnaXN0ZXJlZFByb3RvdHlwZSxpPWEud2FpdGluZ0ZvclByb3RvdHlwZSxqPWQoT2JqZWN0LmNyZWF0ZShIVE1MRWxlbWVudC5wcm90b3R5cGUpLHtjcmVhdGVkQ2FsbGJhY2s6ZnVuY3Rpb24oKXt0aGlzLmdldEF0dHJpYnV0ZSgibmFtZSIpJiZ0aGlzLmluaXQoKX0saW5pdDpmdW5jdGlvbigpe3RoaXMubmFtZT10aGlzLmdldEF0dHJpYnV0ZSgibmFtZSIpLHRoaXMuZXh0ZW5kcz10aGlzLmdldEF0dHJpYnV0ZSgiZXh0ZW5kcyIpLGYud2FpdCh0aGlzKSx0aGlzLmxvYWRSZXNvdXJjZXMoKSx0aGlzLnJlZ2lzdGVyV2hlblJlYWR5KCl9LHJlZ2lzdGVyV2hlblJlYWR5OmZ1bmN0aW9uKCl7dGhpcy5yZWdpc3RlcmVkfHx0aGlzLndhaXRpbmdGb3JQcm90b3R5cGUodGhpcy5uYW1lKXx8dGhpcy53YWl0aW5nRm9yUXVldWUoKXx8dGhpcy53YWl0aW5nRm9yUmVzb3VyY2VzKCl8fGYuZ28odGhpcyl9LF9yZWdpc3RlcjpmdW5jdGlvbigpe2ModGhpcy5leHRlbmRzKSYmIWIodGhpcy5leHRlbmRzKSYmY29uc29sZS53YXJuKCIlcyBpcyBhdHRlbXB0aW5nIHRvIGV4dGVuZCAlcywgYW4gdW5yZWdpc3RlcmVkIGVsZW1lbnQgb3Igb25lIHRoYXQgd2FzIG5vdCByZWdpc3RlcmVkIHdpdGggUG9seW1lci4iLHRoaXMubmFtZSx0aGlzLmV4dGVuZHMpLHRoaXMucmVnaXN0ZXIodGhpcy5uYW1lLHRoaXMuZXh0ZW5kcyksdGhpcy5yZWdpc3RlcmVkPSEwfSx3YWl0aW5nRm9yUHJvdG90eXBlOmZ1bmN0aW9uKGEpe3JldHVybiBoKGEpP3ZvaWQgMDooaShhLHRoaXMpLHRoaXMuaGFuZGxlTm9TY3JpcHQoYSksITApfSxoYW5kbGVOb1NjcmlwdDpmdW5jdGlvbihhKXt0aGlzLmhhc0F0dHJpYnV0ZSgibm9zY3JpcHQiKSYmIXRoaXMubm9zY3JpcHQmJih0aGlzLm5vc2NyaXB0PSEwLFBvbHltZXIoYSkpfSx3YWl0aW5nRm9yUmVzb3VyY2VzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX25lZWRzUmVzb3VyY2VzfSx3YWl0aW5nRm9yUXVldWU6ZnVuY3Rpb24oKXtyZXR1cm4gZi5lbnF1ZXVlKHRoaXMsdGhpcy5yZWdpc3RlcldoZW5SZWFkeSx0aGlzLl9yZWdpc3Rlcil9LGxvYWRSZXNvdXJjZXM6ZnVuY3Rpb24oKXt0aGlzLl9uZWVkc1Jlc291cmNlcz0hMCx0aGlzLmxvYWRTdHlsZXMoZnVuY3Rpb24oKXt0aGlzLl9uZWVkc1Jlc291cmNlcz0hMSx0aGlzLnJlZ2lzdGVyV2hlblJlYWR5KCl9LmJpbmQodGhpcykpfX0pO2UucHVibGlzaChlLmRlY2xhcmF0aW9uLGopLGcoZnVuY3Rpb24oKXtkb2N1bWVudC5ib2R5LnJlbW92ZUF0dHJpYnV0ZSgidW5yZXNvbHZlZCIpLGRvY3VtZW50LmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KCJwb2x5bWVyLXJlYWR5Iix7YnViYmxlczohMH0pKX0pLGRvY3VtZW50LnJlZ2lzdGVyRWxlbWVudCgicG9seW1lci1lbGVtZW50Iix7cHJvdG90eXBlOmp9KX0oUG9seW1lciksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhLGIpe2E/KGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoYSksZChiKSk6YiYmYigpfWZ1bmN0aW9uIGMoYSxjKXtpZihhJiZhLmxlbmd0aCl7Zm9yKHZhciBkLGUsZj1kb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksZz0wLGg9YS5sZW5ndGg7aD5nJiYoZD1hW2ddKTtnKyspZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJsaW5rIiksZS5yZWw9ImltcG9ydCIsZS5ocmVmPWQsZi5hcHBlbmRDaGlsZChlKTtiKGYsYyl9ZWxzZSBjJiZjKCl9dmFyIGQ9YS53aGVuUG9seW1lclJlYWR5O2EuaW1wb3J0PWMsYS5pbXBvcnRFbGVtZW50cz1ifShQb2x5bWVyKSxmdW5jdGlvbigpe3ZhciBhPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInBvbHltZXItZWxlbWVudCIpO2Euc2V0QXR0cmlidXRlKCJuYW1lIiwiYXV0by1iaW5kaW5nIiksYS5zZXRBdHRyaWJ1dGUoImV4dGVuZHMiLCJ0ZW1wbGF0ZSIpLGEuaW5pdCgpLFBvbHltZXIoImF1dG8tYmluZGluZyIse2NyZWF0ZWRDYWxsYmFjazpmdW5jdGlvbigpe3RoaXMuc3ludGF4PXRoaXMuYmluZGluZ0RlbGVnYXRlPXRoaXMubWFrZVN5bnRheCgpLFBvbHltZXIud2hlblBvbHltZXJSZWFkeShmdW5jdGlvbigpe3RoaXMubW9kZWw9dGhpcyx0aGlzLnNldEF0dHJpYnV0ZSgiYmluZCIsIiIpLHRoaXMuYXN5bmMoZnVuY3Rpb24oKXt0aGlzLm1hcnNoYWxOb2RlUmVmZXJlbmNlcyh0aGlzLnBhcmVudE5vZGUpLHRoaXMuZmlyZSgidGVtcGxhdGUtYm91bmQiKX0pfS5iaW5kKHRoaXMpKX0sbWFrZVN5bnRheDpmdW5jdGlvbigpe3ZhciBhPU9iamVjdC5jcmVhdGUoUG9seW1lci5hcGkuZGVjbGFyYXRpb24uZXZlbnRzKSxiPXRoaXM7YS5maW5kQ29udHJvbGxlcj1mdW5jdGlvbigpe3JldHVybiBiLm1vZGVsfTt2YXIgYz1uZXcgUG9seW1lckV4cHJlc3Npb25zLGQ9Yy5wcmVwYXJlQmluZGluZztyZXR1cm4gYy5wcmVwYXJlQmluZGluZz1mdW5jdGlvbihiLGUsZil7cmV0dXJuIGEucHJlcGFyZUV2ZW50QmluZGluZyhiLGUsZil8fGQuY2FsbChjLGIsZSxmKX0sY319KX0oKTsKLy8jIHNvdXJjZU1hcHBpbmdVUkw9cG9seW1lci5qcy5tYXA=",
                "body": "LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAoYykgMjAxNCBUaGUgUG9seW1lciBQcm9qZWN0IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuCiAqIFRoaXMgY29kZSBtYXkgb25seSBiZSB1c2VkIHVuZGVyIHRoZSBCU0Qgc3R5bGUgbGljZW5zZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vTElDRU5TRS50eHQKICogVGhlIGNvbXBsZXRlIHNldCBvZiBhdXRob3JzIG1heSBiZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQVVUSE9SUy50eHQKICogVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9DT05UUklCVVRPUlMudHh0CiAqIENvZGUgZGlzdHJpYnV0ZWQgYnkgR29vZ2xlIGFzIHBhcnQgb2YgdGhlIHBvbHltZXIgcHJvamVjdCBpcyBhbHNvCiAqIHN1YmplY3QgdG8gYW4gYWRkaXRpb25hbCBJUCByaWdodHMgZ3JhbnQgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL1BBVEVOVFMudHh0CiAqLwovLyBAdmVyc2lvbjogMC40LjAKd2luZG93LlBvbHltZXJHZXN0dXJlcz17fSxmdW5jdGlvbihhKXt2YXIgYj0hMSxjPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIm1ldGEiKTtpZihjLmNyZWF0ZVNoYWRvd1Jvb3Qpe3ZhciBkPWMuY3JlYXRlU2hhZG93Um9vdCgpLGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3BhbiIpO2QuYXBwZW5kQ2hpbGQoZSksYy5hZGRFdmVudExpc3RlbmVyKCJ0ZXN0cGF0aCIsZnVuY3Rpb24oYSl7YS5wYXRoJiYoYj1hLnBhdGhbMF09PT1lKSxhLnN0b3BQcm9wYWdhdGlvbigpfSk7dmFyIGY9bmV3IEN1c3RvbUV2ZW50KCJ0ZXN0cGF0aCIse2J1YmJsZXM6ITB9KTtkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKGMpLGUuZGlzcGF0Y2hFdmVudChmKSxjLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYyksZD1lPW51bGx9Yz1udWxsO3ZhciBnPXtzaGFkb3c6ZnVuY3Rpb24oYSl7cmV0dXJuIGE/YS5zaGFkb3dSb290fHxhLndlYmtpdFNoYWRvd1Jvb3Q6dm9pZCAwfSxjYW5UYXJnZXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGEmJkJvb2xlYW4oYS5lbGVtZW50RnJvbVBvaW50KX0sdGFyZ2V0aW5nU2hhZG93OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuc2hhZG93KGEpO3JldHVybiB0aGlzLmNhblRhcmdldChiKT9iOnZvaWQgMH0sb2xkZXJTaGFkb3c6ZnVuY3Rpb24oYSl7dmFyIGI9YS5vbGRlclNoYWRvd1Jvb3Q7aWYoIWIpe3ZhciBjPWEucXVlcnlTZWxlY3Rvcigic2hhZG93Iik7YyYmKGI9Yy5vbGRlclNoYWRvd1Jvb3QpfXJldHVybiBifSxhbGxTaGFkb3dzOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1bXSxjPXRoaXMuc2hhZG93KGEpO2M7KWIucHVzaChjKSxjPXRoaXMub2xkZXJTaGFkb3coYyk7cmV0dXJuIGJ9LHNlYXJjaFJvb3Q6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGU7cmV0dXJuIGE/KGQ9YS5lbGVtZW50RnJvbVBvaW50KGIsYyksZD9lPXRoaXMudGFyZ2V0aW5nU2hhZG93KGQpOmEhPT1kb2N1bWVudCYmKGU9dGhpcy5vbGRlclNoYWRvdyhhKSksdGhpcy5zZWFyY2hSb290KGUsYixjKXx8ZCk6dm9pZCAwfSxvd25lcjpmdW5jdGlvbihhKXtpZighYSlyZXR1cm4gZG9jdW1lbnQ7Zm9yKHZhciBiPWE7Yi5wYXJlbnROb2RlOyliPWIucGFyZW50Tm9kZTtyZXR1cm4gYi5ub2RlVHlwZSE9Tm9kZS5ET0NVTUVOVF9OT0RFJiZiLm5vZGVUeXBlIT1Ob2RlLkRPQ1VNRU5UX0ZSQUdNRU5UX05PREUmJihiPWRvY3VtZW50KSxifSxmaW5kVGFyZ2V0OmZ1bmN0aW9uKGEpe2lmKGImJmEucGF0aClyZXR1cm4gYS5wYXRoWzBdO3ZhciBjPWEuY2xpZW50WCxkPWEuY2xpZW50WSxlPXRoaXMub3duZXIoYS50YXJnZXQpO3JldHVybiBlLmVsZW1lbnRGcm9tUG9pbnQoYyxkKXx8KGU9ZG9jdW1lbnQpLHRoaXMuc2VhcmNoUm9vdChlLGMsZCl9LGZpbmRUb3VjaEFjdGlvbjpmdW5jdGlvbihhKXt2YXIgYztpZihiJiZhLnBhdGgpe2Zvcih2YXIgZD1hLnBhdGgsZT0wO2U8ZC5sZW5ndGg7ZSsrKWlmKGM9ZFtlXSxjLm5vZGVUeXBlPT09Tm9kZS5FTEVNRU5UX05PREUmJmMuaGFzQXR0cmlidXRlKCJ0b3VjaC1hY3Rpb24iKSlyZXR1cm4gYy5nZXRBdHRyaWJ1dGUoInRvdWNoLWFjdGlvbiIpfWVsc2UgZm9yKGM9YS50YXJnZXQ7Yzspe2lmKGMuaGFzQXR0cmlidXRlKCJ0b3VjaC1hY3Rpb24iKSlyZXR1cm4gYy5nZXRBdHRyaWJ1dGUoInRvdWNoLWFjdGlvbiIpO2M9Yy5wYXJlbnROb2RlfHxjLmhvc3R9cmV0dXJuImF1dG8ifSxMQ0E6ZnVuY3Rpb24oYSxiKXtpZihhPT09YilyZXR1cm4gYTtpZihhJiYhYilyZXR1cm4gYTtpZihiJiYhYSlyZXR1cm4gYjtpZighYiYmIWEpcmV0dXJuIGRvY3VtZW50O2lmKGEuY29udGFpbnMmJmEuY29udGFpbnMoYikpcmV0dXJuIGE7aWYoYi5jb250YWlucyYmYi5jb250YWlucyhhKSlyZXR1cm4gYjt2YXIgYz10aGlzLmRlcHRoKGEpLGQ9dGhpcy5kZXB0aChiKSxlPWMtZDtmb3IoZT49MD9hPXRoaXMud2FsayhhLGUpOmI9dGhpcy53YWxrKGIsLWUpO2EmJmImJmEhPT1iOylhPWEucGFyZW50Tm9kZXx8YS5ob3N0LGI9Yi5wYXJlbnROb2RlfHxiLmhvc3Q7cmV0dXJuIGF9LHdhbGs6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9MDthJiZiPmM7YysrKWE9YS5wYXJlbnROb2RlfHxhLmhvc3Q7cmV0dXJuIGF9LGRlcHRoOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0wO2E7KWIrKyxhPWEucGFyZW50Tm9kZXx8YS5ob3N0O3JldHVybiBifSxkZWVwQ29udGFpbnM6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLkxDQShhLGIpO3JldHVybiBjPT09YX0saW5zaWRlTm9kZTpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9YS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtyZXR1cm4gZC5sZWZ0PD1iJiZiPD1kLnJpZ2h0JiZkLnRvcDw9YyYmYzw9ZC5ib3R0b219fTthLnRhcmdldEZpbmRpbmc9ZyxhLmZpbmRUYXJnZXQ9Zy5maW5kVGFyZ2V0LmJpbmQoZyksYS5kZWVwQ29udGFpbnM9Zy5kZWVwQ29udGFpbnMuYmluZChnKSxhLmluc2lkZU5vZGU9Zy5pbnNpZGVOb2RlfSh3aW5kb3cuUG9seW1lckdlc3R1cmVzKSxmdW5jdGlvbigpe2Z1bmN0aW9uIGEoYSl7cmV0dXJuImh0bWwgL2RlZXAvICIrYihhKX1mdW5jdGlvbiBiKGEpe3JldHVybidbdG91Y2gtYWN0aW9uPSInK2ErJyJdJ31mdW5jdGlvbiBjKGEpe3JldHVybiJ7IC1tcy10b3VjaC1hY3Rpb246ICIrYSsiOyB0b3VjaC1hY3Rpb246ICIrYSsiO30ifXZhciBkPVsibm9uZSIsImF1dG8iLCJwYW4teCIsInBhbi15Iix7cnVsZToicGFuLXggcGFuLXkiLHNlbGVjdG9yczpbInBhbi14IHBhbi15IiwicGFuLXkgcGFuLXgiXX0sIm1hbmlwdWxhdGlvbiJdLGU9IiIsZj0ic3RyaW5nIj09dHlwZW9mIGRvY3VtZW50LmhlYWQuc3R5bGUudG91Y2hBY3Rpb24sZz0hd2luZG93LlNoYWRvd0RPTVBvbHlmaWxsJiZkb2N1bWVudC5oZWFkLmNyZWF0ZVNoYWRvd1Jvb3Q7aWYoZil7ZC5mb3JFYWNoKGZ1bmN0aW9uKGQpe1N0cmluZyhkKT09PWQ/KGUrPWIoZCkrYyhkKSsiXG4iLGcmJihlKz1hKGQpK2MoZCkrIlxuIikpOihlKz1kLnNlbGVjdG9ycy5tYXAoYikrYyhkLnJ1bGUpKyJcbiIsZyYmKGUrPWQuc2VsZWN0b3JzLm1hcChhKStjKGQucnVsZSkrIlxuIikpfSk7dmFyIGg9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3R5bGUiKTtoLnRleHRDb250ZW50PWUsZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChoKX19KCksZnVuY3Rpb24oYSl7dmFyIGI9WyJidWJibGVzIiwiY2FuY2VsYWJsZSIsInZpZXciLCJkZXRhaWwiLCJzY3JlZW5YIiwic2NyZWVuWSIsImNsaWVudFgiLCJjbGllbnRZIiwiY3RybEtleSIsImFsdEtleSIsInNoaWZ0S2V5IiwibWV0YUtleSIsImJ1dHRvbiIsInJlbGF0ZWRUYXJnZXQiLCJwYWdlWCIsInBhZ2VZIl0sYz1bITEsITEsbnVsbCxudWxsLDAsMCwwLDAsITEsITEsITEsITEsMCxudWxsLDAsMF0sZD1mdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbigpe319LGU9e3ByZXZlbnRUYXA6ZCxtYWtlQmFzZUV2ZW50OmZ1bmN0aW9uKGEsYil7dmFyIGM9ZG9jdW1lbnQuY3JlYXRlRXZlbnQoIkV2ZW50Iik7cmV0dXJuIGMuaW5pdEV2ZW50KGEsYi5idWJibGVzfHwhMSxiLmNhbmNlbGFibGV8fCExKSxjLnByZXZlbnRUYXA9ZS5wcmV2ZW50VGFwKGMpLGN9LG1ha2VHZXN0dXJlRXZlbnQ6ZnVuY3Rpb24oYSxiKXtiPWJ8fE9iamVjdC5jcmVhdGUobnVsbCk7Zm9yKHZhciBjLGQ9dGhpcy5tYWtlQmFzZUV2ZW50KGEsYiksZT0wLGY9T2JqZWN0LmtleXMoYik7ZTxmLmxlbmd0aDtlKyspYz1mW2VdLGRbY109YltjXTtyZXR1cm4gZH0sbWFrZVBvaW50ZXJFdmVudDpmdW5jdGlvbihhLGQpe2Q9ZHx8T2JqZWN0LmNyZWF0ZShudWxsKTtmb3IodmFyIGUsZj10aGlzLm1ha2VCYXNlRXZlbnQoYSxkKSxnPTA7ZzxiLmxlbmd0aDtnKyspZT1iW2ddLGZbZV09ZFtlXXx8Y1tnXTtmLmJ1dHRvbnM9ZC5idXR0b25zfHwwO3ZhciBoPTA7cmV0dXJuIGg9ZC5wcmVzc3VyZT9kLnByZXNzdXJlOmYuYnV0dG9ucz8uNTowLGYueD1mLmNsaWVudFgsZi55PWYuY2xpZW50WSxmLnBvaW50ZXJJZD1kLnBvaW50ZXJJZHx8MCxmLndpZHRoPWQud2lkdGh8fDAsZi5oZWlnaHQ9ZC5oZWlnaHR8fDAsZi5wcmVzc3VyZT1oLGYudGlsdFg9ZC50aWx0WHx8MCxmLnRpbHRZPWQudGlsdFl8fDAsZi5wb2ludGVyVHlwZT1kLnBvaW50ZXJUeXBlfHwiIixmLmh3VGltZXN0YW1wPWQuaHdUaW1lc3RhbXB8fDAsZi5pc1ByaW1hcnk9ZC5pc1ByaW1hcnl8fCExLGYuX3NvdXJjZT1kLl9zb3VyY2V8fCIiLGZ9fTthLmV2ZW50RmFjdG9yeT1lfSh3aW5kb3cuUG9seW1lckdlc3R1cmVzKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKCl7aWYoYyl7dmFyIGE9bmV3IE1hcDtyZXR1cm4gYS5wb2ludGVycz1kLGF9dGhpcy5rZXlzPVtdLHRoaXMudmFsdWVzPVtdfXZhciBjPXdpbmRvdy5NYXAmJndpbmRvdy5NYXAucHJvdG90eXBlLmZvckVhY2gsZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnNpemV9O2IucHJvdG90eXBlPXtzZXQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmtleXMuaW5kZXhPZihhKTtjPi0xP3RoaXMudmFsdWVzW2NdPWI6KHRoaXMua2V5cy5wdXNoKGEpLHRoaXMudmFsdWVzLnB1c2goYikpfSxoYXM6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMua2V5cy5pbmRleE9mKGEpPi0xfSwiZGVsZXRlIjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmtleXMuaW5kZXhPZihhKTtiPi0xJiYodGhpcy5rZXlzLnNwbGljZShiLDEpLHRoaXMudmFsdWVzLnNwbGljZShiLDEpKX0sZ2V0OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMua2V5cy5pbmRleE9mKGEpO3JldHVybiB0aGlzLnZhbHVlc1tiXX0sY2xlYXI6ZnVuY3Rpb24oKXt0aGlzLmtleXMubGVuZ3RoPTAsdGhpcy52YWx1ZXMubGVuZ3RoPTB9LGZvckVhY2g6ZnVuY3Rpb24oYSxiKXt0aGlzLnZhbHVlcy5mb3JFYWNoKGZ1bmN0aW9uKGMsZCl7YS5jYWxsKGIsYyx0aGlzLmtleXNbZF0sdGhpcyl9LHRoaXMpfSxwb2ludGVyczpmdW5jdGlvbigpe3JldHVybiB0aGlzLmtleXMubGVuZ3RofX0sYS5Qb2ludGVyTWFwPWJ9KHdpbmRvdy5Qb2x5bWVyR2VzdHVyZXMpLGZ1bmN0aW9uKGEpe3ZhciBiLGM9WyJidWJibGVzIiwiY2FuY2VsYWJsZSIsInZpZXciLCJkZXRhaWwiLCJzY3JlZW5YIiwic2NyZWVuWSIsImNsaWVudFgiLCJjbGllbnRZIiwiY3RybEtleSIsImFsdEtleSIsInNoaWZ0S2V5IiwibWV0YUtleSIsImJ1dHRvbiIsInJlbGF0ZWRUYXJnZXQiLCJidXR0b25zIiwicG9pbnRlcklkIiwid2lkdGgiLCJoZWlnaHQiLCJwcmVzc3VyZSIsInRpbHRYIiwidGlsdFkiLCJwb2ludGVyVHlwZSIsImh3VGltZXN0YW1wIiwiaXNQcmltYXJ5IiwidHlwZSIsInRhcmdldCIsImN1cnJlbnRUYXJnZXQiLCJ3aGljaCIsInBhZ2VYIiwicGFnZVkiLCJ0aW1lU3RhbXAiLCJwcmV2ZW50VGFwIiwidGFwUHJldmVudGVkIiwiX3NvdXJjZSJdLGQ9WyExLCExLG51bGwsbnVsbCwwLDAsMCwwLCExLCExLCExLCExLDAsbnVsbCwwLDAsMCwwLDAsMCwwLCIiLDAsITEsIiIsbnVsbCxudWxsLDAsMCwwLDAsZnVuY3Rpb24oKXt9LCExXSxlPSJ1bmRlZmluZWQiIT10eXBlb2YgU1ZHRWxlbWVudEluc3RhbmNlLGY9YS5ldmVudEZhY3RvcnksZz17cG9pbnRlcm1hcDpuZXcgYS5Qb2ludGVyTWFwLHJlcXVpcmVkR2VzdHVyZXM6bmV3IGEuUG9pbnRlck1hcCxldmVudE1hcDpPYmplY3QuY3JlYXRlKG51bGwpLGV2ZW50U291cmNlczpPYmplY3QuY3JlYXRlKG51bGwpLGV2ZW50U291cmNlTGlzdDpbXSxnZXN0dXJlczpbXSxkZXBlbmRlbmN5TWFwOntkb3duOntsaXN0ZW5lcnM6MCxpbmRleDotMX0sdXA6e2xpc3RlbmVyczowLGluZGV4Oi0xfX0sZ2VzdHVyZVF1ZXVlOltdLHJlZ2lzdGVyU291cmNlOmZ1bmN0aW9uKGEsYil7dmFyIGM9YixkPWMuZXZlbnRzO2QmJihkLmZvckVhY2goZnVuY3Rpb24oYSl7Y1thXSYmKHRoaXMuZXZlbnRNYXBbYV09Y1thXS5iaW5kKGMpKX0sdGhpcyksdGhpcy5ldmVudFNvdXJjZXNbYV09Yyx0aGlzLmV2ZW50U291cmNlTGlzdC5wdXNoKGMpKX0scmVnaXN0ZXJHZXN0dXJlOmZ1bmN0aW9uKGEsYil7dmFyIGM9T2JqZWN0LmNyZWF0ZShudWxsKTtjLmxpc3RlbmVycz0wLGMuaW5kZXg9dGhpcy5nZXN0dXJlcy5sZW5ndGg7Zm9yKHZhciBkLGU9MDtlPGIuZXhwb3Nlcy5sZW5ndGg7ZSsrKWQ9Yi5leHBvc2VzW2VdLnRvTG93ZXJDYXNlKCksdGhpcy5kZXBlbmRlbmN5TWFwW2RdPWM7dGhpcy5nZXN0dXJlcy5wdXNoKGIpfSxyZWdpc3RlcjpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYyxkPXRoaXMuZXZlbnRTb3VyY2VMaXN0Lmxlbmd0aCxlPTA7ZD5lJiYoYz10aGlzLmV2ZW50U291cmNlTGlzdFtlXSk7ZSsrKWMucmVnaXN0ZXIuY2FsbChjLGEsYil9LHVucmVnaXN0ZXI6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiLGM9dGhpcy5ldmVudFNvdXJjZUxpc3QubGVuZ3RoLGQ9MDtjPmQmJihiPXRoaXMuZXZlbnRTb3VyY2VMaXN0W2RdKTtkKyspYi51bnJlZ2lzdGVyLmNhbGwoYixhKX0sZG93bjpmdW5jdGlvbihhKXt0aGlzLnJlcXVpcmVkR2VzdHVyZXMuc2V0KGEucG9pbnRlcklkLGIpLHRoaXMuZmlyZUV2ZW50KCJkb3duIixhKX0sbW92ZTpmdW5jdGlvbihhKXthLnR5cGU9Im1vdmUiLHRoaXMuZmlsbEdlc3R1cmVRdWV1ZShhKX0sdXA6ZnVuY3Rpb24oYSl7dGhpcy5maXJlRXZlbnQoInVwIixhKSx0aGlzLnJlcXVpcmVkR2VzdHVyZXMuZGVsZXRlKGEucG9pbnRlcklkKX0sY2FuY2VsOmZ1bmN0aW9uKGEpe2EudGFwUHJldmVudGVkPSEwLHRoaXMuZmlyZUV2ZW50KCJ1cCIsYSksdGhpcy5yZXF1aXJlZEdlc3R1cmVzLmRlbGV0ZShhLnBvaW50ZXJJZCl9LGV2ZW50SGFuZGxlcjpmdW5jdGlvbihhKXt2YXIgYz1hLnR5cGU7aWYoInRvdWNoc3RhcnQiPT09Y3x8Im1vdXNlZG93biI9PT1jfHwicG9pbnRlcmRvd24iPT09Y3x8Ik1TUG9pbnRlckRvd24iPT09Yyl7YS5faGFuZGxlZEJ5UEd8fChiPXt9KTt2YXIgZD1hLmN1cnJlbnRUYXJnZXQuX3BnRXZlbnRzO2lmKGQpZm9yKHZhciBlLGYsZyxoPU9iamVjdC5rZXlzKGQpLGk9MDtpPGgubGVuZ3RoO2krKylnPWhbaV0sZFtnXT4wJiYoZT10aGlzLmRlcGVuZGVuY3lNYXBbZ10sZj1lP2UuaW5kZXg6LTEsYltmXT0hMCl9aWYoIWEuX2hhbmRsZWRCeVBHKXt2YXIgaj10aGlzLmV2ZW50TWFwJiZ0aGlzLmV2ZW50TWFwW2NdO2omJmooYSksYS5faGFuZGxlZEJ5UEc9ITB9fSxsaXN0ZW46ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGMsZD0wLGU9Yi5sZW5ndGg7ZT5kJiYoYz1iW2RdKTtkKyspdGhpcy5hZGRFdmVudChhLGMpfSx1bmxpc3RlbjpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYyxkPTAsZT1iLmxlbmd0aDtlPmQmJihjPWJbZF0pO2QrKyl0aGlzLnJlbW92ZUV2ZW50KGEsYyl9LGFkZEV2ZW50OmZ1bmN0aW9uKGEsYil7YS5hZGRFdmVudExpc3RlbmVyKGIsdGhpcy5ib3VuZEhhbmRsZXIpfSxyZW1vdmVFdmVudDpmdW5jdGlvbihhLGIpe2EucmVtb3ZlRXZlbnRMaXN0ZW5lcihiLHRoaXMuYm91bmRIYW5kbGVyKX0sbWFrZUV2ZW50OmZ1bmN0aW9uKGEsYil7dmFyIGM9Zi5tYWtlUG9pbnRlckV2ZW50KGEsYik7cmV0dXJuIGMucHJldmVudERlZmF1bHQ9Yi5wcmV2ZW50RGVmYXVsdCxjLnRhcFByZXZlbnRlZD1iLnRhcFByZXZlbnRlZCxjLl90YXJnZXQ9Yy5fdGFyZ2V0fHxiLnRhcmdldCxjfSxmaXJlRXZlbnQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLm1ha2VFdmVudChhLGIpO3JldHVybiB0aGlzLmRpc3BhdGNoRXZlbnQoYyl9LGNsb25lRXZlbnQ6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiLGY9T2JqZWN0LmNyZWF0ZShudWxsKSxnPTA7ZzxjLmxlbmd0aDtnKyspYj1jW2ddLGZbYl09YVtiXXx8ZFtnXSwoInRhcmdldCI9PT1ifHwicmVsYXRlZFRhcmdldCI9PT1iKSYmZSYmZltiXWluc3RhbmNlb2YgU1ZHRWxlbWVudEluc3RhbmNlJiYoZltiXT1mW2JdLmNvcnJlc3BvbmRpbmdVc2VFbGVtZW50KTtyZXR1cm4gZi5wcmV2ZW50RGVmYXVsdD1mdW5jdGlvbigpe2EucHJldmVudERlZmF1bHQoKX0sZn0sZGlzcGF0Y2hFdmVudDpmdW5jdGlvbihhKXt2YXIgYj1hLl90YXJnZXQ7aWYoYil7Yi5kaXNwYXRjaEV2ZW50KGEpO3ZhciBjPXRoaXMuY2xvbmVFdmVudChhKTtjLnRhcmdldD1iLHRoaXMuZmlsbEdlc3R1cmVRdWV1ZShjKX19LGdlc3R1cmVUcmlnZ2VyOmZ1bmN0aW9uKCl7Zm9yKHZhciBhLGIsYz0wO2M8dGhpcy5nZXN0dXJlUXVldWUubGVuZ3RoO2MrKyl7YT10aGlzLmdlc3R1cmVRdWV1ZVtjXSxiPWEuX3JlcXVpcmVkR2VzdHVyZXM7Zm9yKHZhciBkLGUsZj0wO2Y8dGhpcy5nZXN0dXJlcy5sZW5ndGg7ZisrKWJbZl0mJihkPXRoaXMuZ2VzdHVyZXNbZl0sZT1kW2EudHlwZV0sZSYmZS5jYWxsKGQsYSkpfXRoaXMuZ2VzdHVyZVF1ZXVlLmxlbmd0aD0wfSxmaWxsR2VzdHVyZVF1ZXVlOmZ1bmN0aW9uKGEpe3RoaXMuZ2VzdHVyZVF1ZXVlLmxlbmd0aHx8cmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRoaXMuYm91bmRHZXN0dXJlVHJpZ2dlciksYS5fcmVxdWlyZWRHZXN0dXJlcz10aGlzLnJlcXVpcmVkR2VzdHVyZXMuZ2V0KGEucG9pbnRlcklkKSx0aGlzLmdlc3R1cmVRdWV1ZS5wdXNoKGEpfX07Zy5ib3VuZEhhbmRsZXI9Zy5ldmVudEhhbmRsZXIuYmluZChnKSxnLmJvdW5kR2VzdHVyZVRyaWdnZXI9Zy5nZXN0dXJlVHJpZ2dlci5iaW5kKGcpLGEuZGlzcGF0Y2hlcj1nLGEuYWN0aXZhdGVHZXN0dXJlPWZ1bmN0aW9uKGEsYil7dmFyIGM9Yi50b0xvd2VyQ2FzZSgpLGQ9Zy5kZXBlbmRlbmN5TWFwW2NdO2lmKGQpe3ZhciBlPWcuZ2VzdHVyZXNbZC5pbmRleF07aWYoYS5fcGdMaXN0ZW5lcnN8fChnLnJlZ2lzdGVyKGEpLGEuX3BnTGlzdGVuZXJzPTApLGUpe3ZhciBmLGg9ZS5kZWZhdWx0QWN0aW9ucyYmZS5kZWZhdWx0QWN0aW9uc1tjXTtzd2l0Y2goYS5ub2RlVHlwZSl7Y2FzZSBOb2RlLkVMRU1FTlRfTk9ERTpmPWE7YnJlYWs7Y2FzZSBOb2RlLkRPQ1VNRU5UX0ZSQUdNRU5UX05PREU6Zj1hLmhvc3Q7YnJlYWs7ZGVmYXVsdDpmPW51bGx9aCYmZiYmIWYuaGFzQXR0cmlidXRlKCJ0b3VjaC1hY3Rpb24iKSYmZi5zZXRBdHRyaWJ1dGUoInRvdWNoLWFjdGlvbiIsaCl9YS5fcGdFdmVudHN8fChhLl9wZ0V2ZW50cz17fSksYS5fcGdFdmVudHNbY109KGEuX3BnRXZlbnRzW2NdfHwwKSsxLGEuX3BnTGlzdGVuZXJzKyt9cmV0dXJuIEJvb2xlYW4oZCl9LGEuYWRkRXZlbnRMaXN0ZW5lcj1mdW5jdGlvbihiLGMsZCxlKXtkJiYoYS5hY3RpdmF0ZUdlc3R1cmUoYixjKSxiLmFkZEV2ZW50TGlzdGVuZXIoYyxkLGUpKX0sYS5kZWFjdGl2YXRlR2VzdHVyZT1mdW5jdGlvbihhLGIpe3ZhciBjPWIudG9Mb3dlckNhc2UoKSxkPWcuZGVwZW5kZW5jeU1hcFtjXTtyZXR1cm4gZCYmKGEuX3BnTGlzdGVuZXJzPjAmJmEuX3BnTGlzdGVuZXJzLS0sMD09PWEuX3BnTGlzdGVuZXJzJiZnLnVucmVnaXN0ZXIoYSksYS5fcGdFdmVudHMmJihhLl9wZ0V2ZW50c1tjXT4wP2EuX3BnRXZlbnRzW2NdLS06YS5fcGdFdmVudHNbY109MCkpLEJvb2xlYW4oZCl9LGEucmVtb3ZlRXZlbnRMaXN0ZW5lcj1mdW5jdGlvbihiLGMsZCxlKXtkJiYoYS5kZWFjdGl2YXRlR2VzdHVyZShiLGMpLGIucmVtb3ZlRXZlbnRMaXN0ZW5lcihjLGQsZSkpfX0od2luZG93LlBvbHltZXJHZXN0dXJlcyksZnVuY3Rpb24oYSl7dmFyIGI9YS5kaXNwYXRjaGVyLGM9Yi5wb2ludGVybWFwLGQ9MjUsZT1bMCwxLDQsMl0sZj0hMTt0cnl7Zj0xPT09bmV3IE1vdXNlRXZlbnQoInRlc3QiLHtidXR0b25zOjF9KS5idXR0b25zfWNhdGNoKGcpe312YXIgaD17UE9JTlRFUl9JRDoxLFBPSU5URVJfVFlQRToibW91c2UiLGV2ZW50czpbIm1vdXNlZG93biIsIm1vdXNlbW92ZSIsIm1vdXNldXAiXSxleHBvc2VzOlsiZG93biIsInVwIiwibW92ZSJdLHJlZ2lzdGVyOmZ1bmN0aW9uKGEpe2IubGlzdGVuKGEsdGhpcy5ldmVudHMpfSx1bnJlZ2lzdGVyOmZ1bmN0aW9uKGEpe2IudW5saXN0ZW4oYSx0aGlzLmV2ZW50cyl9LGxhc3RUb3VjaGVzOltdLGlzRXZlbnRTaW11bGF0ZWRGcm9tVG91Y2g6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiLGM9dGhpcy5sYXN0VG91Y2hlcyxlPWEuY2xpZW50WCxmPWEuY2xpZW50WSxnPTAsaD1jLmxlbmd0aDtoPmcmJihiPWNbZ10pO2crKyl7dmFyIGk9TWF0aC5hYnMoZS1iLngpLGo9TWF0aC5hYnMoZi1iLnkpO2lmKGQ+PWkmJmQ+PWopcmV0dXJuITB9fSxwcmVwYXJlRXZlbnQ6ZnVuY3Rpb24oYSl7dmFyIGM9Yi5jbG9uZUV2ZW50KGEpO3JldHVybiBjLnBvaW50ZXJJZD10aGlzLlBPSU5URVJfSUQsYy5pc1ByaW1hcnk9ITAsYy5wb2ludGVyVHlwZT10aGlzLlBPSU5URVJfVFlQRSxjLl9zb3VyY2U9Im1vdXNlIixmfHwoYy5idXR0b25zPWVbYy53aGljaF18fDApLGN9LG1vdXNlZG93bjpmdW5jdGlvbihkKXtpZighdGhpcy5pc0V2ZW50U2ltdWxhdGVkRnJvbVRvdWNoKGQpKXt2YXIgZT1jLmhhcyh0aGlzLlBPSU5URVJfSUQpO2UmJnRoaXMubW91c2V1cChkKTt2YXIgZj10aGlzLnByZXBhcmVFdmVudChkKTtmLnRhcmdldD1hLmZpbmRUYXJnZXQoZCksYy5zZXQodGhpcy5QT0lOVEVSX0lELGYudGFyZ2V0KSxiLmRvd24oZil9fSxtb3VzZW1vdmU6ZnVuY3Rpb24oYSl7aWYoIXRoaXMuaXNFdmVudFNpbXVsYXRlZEZyb21Ub3VjaChhKSl7dmFyIGQ9Yy5nZXQodGhpcy5QT0lOVEVSX0lEKTtpZihkKXt2YXIgZT10aGlzLnByZXBhcmVFdmVudChhKTtlLnRhcmdldD1kLDA9PT1lLmJ1dHRvbnM/KGIuY2FuY2VsKGUpLHRoaXMuY2xlYW51cE1vdXNlKCkpOmIubW92ZShlKX19fSxtb3VzZXVwOmZ1bmN0aW9uKGQpe2lmKCF0aGlzLmlzRXZlbnRTaW11bGF0ZWRGcm9tVG91Y2goZCkpe3ZhciBlPXRoaXMucHJlcGFyZUV2ZW50KGQpO2UucmVsYXRlZFRhcmdldD1hLmZpbmRUYXJnZXQoZCksZS50YXJnZXQ9Yy5nZXQodGhpcy5QT0lOVEVSX0lEKSxiLnVwKGUpLHRoaXMuY2xlYW51cE1vdXNlKCl9fSxjbGVhbnVwTW91c2U6ZnVuY3Rpb24oKXtjWyJkZWxldGUiXSh0aGlzLlBPSU5URVJfSUQpfX07YS5tb3VzZUV2ZW50cz1ofSh3aW5kb3cuUG9seW1lckdlc3R1cmVzKSxmdW5jdGlvbihhKXt2YXIgYj1hLmRpc3BhdGNoZXIsYz0oYS50YXJnZXRGaW5kaW5nLmFsbFNoYWRvd3MuYmluZChhLnRhcmdldEZpbmRpbmcpLGIucG9pbnRlcm1hcCksZD0oQXJyYXkucHJvdG90eXBlLm1hcC5jYWxsLmJpbmQoQXJyYXkucHJvdG90eXBlLm1hcCksMjUwMCksZT0yMDAsZj0yMCxnPSExLGg9e2V2ZW50czpbInRvdWNoc3RhcnQiLCJ0b3VjaG1vdmUiLCJ0b3VjaGVuZCIsInRvdWNoY2FuY2VsIl0sZXhwb3NlczpbImRvd24iLCJ1cCIsIm1vdmUiXSxyZWdpc3RlcjpmdW5jdGlvbihhLGMpe2N8fGIubGlzdGVuKGEsdGhpcy5ldmVudHMpfSx1bnJlZ2lzdGVyOmZ1bmN0aW9uKGEpe2IudW5saXN0ZW4oYSx0aGlzLmV2ZW50cyl9LHNjcm9sbFR5cGVzOntFTUlUVEVSOiJub25lIixYU0NST0xMRVI6InBhbi14IixZU0NST0xMRVI6InBhbi15In0sdG91Y2hBY3Rpb25Ub1Njcm9sbFR5cGU6ZnVuY3Rpb24oYSl7dmFyIGI9YSxjPXRoaXMuc2Nyb2xsVHlwZXM7cmV0dXJuIGI9PT1jLkVNSVRURVI/Im5vbmUiOmI9PT1jLlhTQ1JPTExFUj8iWCI6Yj09PWMuWVNDUk9MTEVSPyJZIjoiWFkifSxQT0lOVEVSX1RZUEU6InRvdWNoIixmaXJzdFRvdWNoOm51bGwsaXNQcmltYXJ5VG91Y2g6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZmlyc3RUb3VjaD09PWEuaWRlbnRpZmllcn0sc2V0UHJpbWFyeVRvdWNoOmZ1bmN0aW9uKGEpeygwPT09Yy5wb2ludGVycygpfHwxPT09Yy5wb2ludGVycygpJiZjLmhhcygxKSkmJih0aGlzLmZpcnN0VG91Y2g9YS5pZGVudGlmaWVyLHRoaXMuZmlyc3RYWT17WDphLmNsaWVudFgsWTphLmNsaWVudFl9LHRoaXMuc2Nyb2xsaW5nPW51bGwsdGhpcy5jYW5jZWxSZXNldENsaWNrQ291bnQoKSl9LHJlbW92ZVByaW1hcnlQb2ludGVyOmZ1bmN0aW9uKGEpe2EuaXNQcmltYXJ5JiYodGhpcy5maXJzdFRvdWNoPW51bGwsdGhpcy5maXJzdFhZPW51bGwsdGhpcy5yZXNldENsaWNrQ291bnQoKSl9LGNsaWNrQ291bnQ6MCxyZXNldElkOm51bGwscmVzZXRDbGlja0NvdW50OmZ1bmN0aW9uKCl7dmFyIGE9ZnVuY3Rpb24oKXt0aGlzLmNsaWNrQ291bnQ9MCx0aGlzLnJlc2V0SWQ9bnVsbH0uYmluZCh0aGlzKTt0aGlzLnJlc2V0SWQ9c2V0VGltZW91dChhLGUpfSxjYW5jZWxSZXNldENsaWNrQ291bnQ6ZnVuY3Rpb24oKXt0aGlzLnJlc2V0SWQmJmNsZWFyVGltZW91dCh0aGlzLnJlc2V0SWQpfSx0eXBlVG9CdXR0b25zOmZ1bmN0aW9uKGEpe3ZhciBiPTA7cmV0dXJuKCJ0b3VjaHN0YXJ0Ij09PWF8fCJ0b3VjaG1vdmUiPT09YSkmJihiPTEpLGJ9LGZpbmRUYXJnZXQ6ZnVuY3Rpb24oYixkKXtpZigidG91Y2hzdGFydCI9PT10aGlzLmN1cnJlbnRUb3VjaEV2ZW50LnR5cGUpe2lmKHRoaXMuaXNQcmltYXJ5VG91Y2goYikpe3ZhciBlPXtjbGllbnRYOmIuY2xpZW50WCxjbGllbnRZOmIuY2xpZW50WSxwYXRoOnRoaXMuY3VycmVudFRvdWNoRXZlbnQucGF0aCx0YXJnZXQ6dGhpcy5jdXJyZW50VG91Y2hFdmVudC50YXJnZXR9O3JldHVybiBhLmZpbmRUYXJnZXQoZSl9cmV0dXJuIGEuZmluZFRhcmdldChiKX1yZXR1cm4gYy5nZXQoZCl9LHRvdWNoVG9Qb2ludGVyOmZ1bmN0aW9uKGEpe3ZhciBjPXRoaXMuY3VycmVudFRvdWNoRXZlbnQsZD1iLmNsb25lRXZlbnQoYSksZT1kLnBvaW50ZXJJZD1hLmlkZW50aWZpZXIrMjtkLnRhcmdldD10aGlzLmZpbmRUYXJnZXQoYSxlKSxkLmJ1YmJsZXM9ITAsZC5jYW5jZWxhYmxlPSEwLGQuZGV0YWlsPXRoaXMuY2xpY2tDb3VudCxkLmJ1dHRvbnM9dGhpcy50eXBlVG9CdXR0b25zKGMudHlwZSksZC53aWR0aD1hLndlYmtpdFJhZGl1c1h8fGEucmFkaXVzWHx8MCxkLmhlaWdodD1hLndlYmtpdFJhZGl1c1l8fGEucmFkaXVzWXx8MCxkLnByZXNzdXJlPWEud2Via2l0Rm9yY2V8fGEuZm9yY2V8fC41LGQuaXNQcmltYXJ5PXRoaXMuaXNQcmltYXJ5VG91Y2goYSksZC5wb2ludGVyVHlwZT10aGlzLlBPSU5URVJfVFlQRSxkLl9zb3VyY2U9InRvdWNoIjt2YXIgZj10aGlzO3JldHVybiBkLnByZXZlbnREZWZhdWx0PWZ1bmN0aW9uKCl7Zi5zY3JvbGxpbmc9ITEsZi5maXJzdFhZPW51bGwsYy5wcmV2ZW50RGVmYXVsdCgpfSxkfSxwcm9jZXNzVG91Y2hlczpmdW5jdGlvbihhLGIpe3ZhciBkPWEuY2hhbmdlZFRvdWNoZXM7dGhpcy5jdXJyZW50VG91Y2hFdmVudD1hO2Zvcih2YXIgZSxmLGc9MDtnPGQubGVuZ3RoO2crKyllPWRbZ10sZj10aGlzLnRvdWNoVG9Qb2ludGVyKGUpLCJ0b3VjaHN0YXJ0Ij09PWEudHlwZSYmYy5zZXQoZi5wb2ludGVySWQsZi50YXJnZXQpLGMuaGFzKGYucG9pbnRlcklkKSYmYi5jYWxsKHRoaXMsZiksKCJ0b3VjaGVuZCI9PT1hLnR5cGV8fGEuX2NhbmNlbCkmJnRoaXMuY2xlYW5VcFBvaW50ZXIoZil9LHNob3VsZFNjcm9sbDpmdW5jdGlvbihiKXtpZih0aGlzLmZpcnN0WFkpe3ZhciBjLGQ9YS50YXJnZXRGaW5kaW5nLmZpbmRUb3VjaEFjdGlvbihiKSxlPXRoaXMudG91Y2hBY3Rpb25Ub1Njcm9sbFR5cGUoZCk7aWYoIm5vbmUiPT09ZSljPSExO2Vsc2UgaWYoIlhZIj09PWUpYz0hMDtlbHNle3ZhciBmPWIuY2hhbmdlZFRvdWNoZXNbMF0sZz1lLGg9IlkiPT09ZT8iWCI6IlkiLGk9TWF0aC5hYnMoZlsiY2xpZW50IitnXS10aGlzLmZpcnN0WFlbZ10pLGo9TWF0aC5hYnMoZlsiY2xpZW50IitoXS10aGlzLmZpcnN0WFlbaF0pO2M9aT49an1yZXR1cm4gY319LGZpbmRUb3VjaDpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYyxkPTAsZT1hLmxlbmd0aDtlPmQmJihjPWFbZF0pO2QrKylpZihjLmlkZW50aWZpZXI9PT1iKXJldHVybiEwfSx2YWN1dW1Ub3VjaGVzOmZ1bmN0aW9uKGEpe3ZhciBiPWEudG91Y2hlcztpZihjLnBvaW50ZXJzKCk+PWIubGVuZ3RoKXt2YXIgZD1bXTtjLmZvckVhY2goZnVuY3Rpb24oYSxjKXtpZigxIT09YyYmIXRoaXMuZmluZFRvdWNoKGIsYy0yKSl7dmFyIGU9YTtkLnB1c2goZSl9fSx0aGlzKSxkLmZvckVhY2goZnVuY3Rpb24oYSl7dGhpcy5jYW5jZWwoYSksYy5kZWxldGUoYS5wb2ludGVySWQpfSl9fSx0b3VjaHN0YXJ0OmZ1bmN0aW9uKGEpe3RoaXMudmFjdXVtVG91Y2hlcyhhKSx0aGlzLnNldFByaW1hcnlUb3VjaChhLmNoYW5nZWRUb3VjaGVzWzBdKSx0aGlzLmRlZHVwU3ludGhNb3VzZShhKSx0aGlzLnNjcm9sbGluZ3x8KHRoaXMuY2xpY2tDb3VudCsrLHRoaXMucHJvY2Vzc1RvdWNoZXMoYSx0aGlzLmRvd24pKX0sZG93bjpmdW5jdGlvbihhKXtiLmRvd24oYSl9LHRvdWNobW92ZTpmdW5jdGlvbihhKXtpZihnKWEuY2FuY2VsYWJsZSYmdGhpcy5wcm9jZXNzVG91Y2hlcyhhLHRoaXMubW92ZSk7ZWxzZSBpZih0aGlzLnNjcm9sbGluZyl7aWYodGhpcy5maXJzdFhZKXt2YXIgYj1hLmNoYW5nZWRUb3VjaGVzWzBdLGM9Yi5jbGllbnRYLXRoaXMuZmlyc3RYWS5YLGQ9Yi5jbGllbnRZLXRoaXMuZmlyc3RYWS5ZLGU9TWF0aC5zcXJ0KGMqYytkKmQpO2U+PWYmJih0aGlzLnRvdWNoY2FuY2VsKGEpLHRoaXMuc2Nyb2xsaW5nPSEwLHRoaXMuZmlyc3RYWT1udWxsKX19ZWxzZSBudWxsPT09dGhpcy5zY3JvbGxpbmcmJnRoaXMuc2hvdWxkU2Nyb2xsKGEpP3RoaXMuc2Nyb2xsaW5nPSEwOih0aGlzLnNjcm9sbGluZz0hMSxhLnByZXZlbnREZWZhdWx0KCksdGhpcy5wcm9jZXNzVG91Y2hlcyhhLHRoaXMubW92ZSkpfSxtb3ZlOmZ1bmN0aW9uKGEpe2IubW92ZShhKX0sdG91Y2hlbmQ6ZnVuY3Rpb24oYSl7dGhpcy5kZWR1cFN5bnRoTW91c2UoYSksdGhpcy5wcm9jZXNzVG91Y2hlcyhhLHRoaXMudXApfSx1cDpmdW5jdGlvbihjKXtjLnJlbGF0ZWRUYXJnZXQ9YS5maW5kVGFyZ2V0KGMpLGIudXAoYyl9LGNhbmNlbDpmdW5jdGlvbihhKXtiLmNhbmNlbChhKX0sdG91Y2hjYW5jZWw6ZnVuY3Rpb24oYSl7YS5fY2FuY2VsPSEwLHRoaXMucHJvY2Vzc1RvdWNoZXMoYSx0aGlzLmNhbmNlbCl9LGNsZWFuVXBQb2ludGVyOmZ1bmN0aW9uKGEpe2NbImRlbGV0ZSJdKGEucG9pbnRlcklkKSx0aGlzLnJlbW92ZVByaW1hcnlQb2ludGVyKGEpfSxkZWR1cFN5bnRoTW91c2U6ZnVuY3Rpb24oYil7dmFyIGM9YS5tb3VzZUV2ZW50cy5sYXN0VG91Y2hlcyxlPWIuY2hhbmdlZFRvdWNoZXNbMF07aWYodGhpcy5pc1ByaW1hcnlUb3VjaChlKSl7dmFyIGY9e3g6ZS5jbGllbnRYLHk6ZS5jbGllbnRZfTtjLnB1c2goZik7dmFyIGc9ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLmluZGV4T2YoYik7Yz4tMSYmYS5zcGxpY2UoYywxKX0uYmluZChudWxsLGMsZik7c2V0VGltZW91dChnLGQpfX19O2EudG91Y2hFdmVudHM9aH0od2luZG93LlBvbHltZXJHZXN0dXJlcyksZnVuY3Rpb24oYSl7dmFyIGI9YS5kaXNwYXRjaGVyLGM9Yi5wb2ludGVybWFwLGQ9d2luZG93Lk1TUG9pbnRlckV2ZW50JiYibnVtYmVyIj09dHlwZW9mIHdpbmRvdy5NU1BvaW50ZXJFdmVudC5NU1BPSU5URVJfVFlQRV9NT1VTRSxlPXtldmVudHM6WyJNU1BvaW50ZXJEb3duIiwiTVNQb2ludGVyTW92ZSIsIk1TUG9pbnRlclVwIiwiTVNQb2ludGVyQ2FuY2VsIl0scmVnaXN0ZXI6ZnVuY3Rpb24oYSl7Yi5saXN0ZW4oYSx0aGlzLmV2ZW50cyl9LHVucmVnaXN0ZXI6ZnVuY3Rpb24oYSl7Yi51bmxpc3RlbihhLHRoaXMuZXZlbnRzKX0sUE9JTlRFUl9UWVBFUzpbIiIsInVuYXZhaWxhYmxlIiwidG91Y2giLCJwZW4iLCJtb3VzZSJdLHByZXBhcmVFdmVudDpmdW5jdGlvbihhKXt2YXIgYz1hO3JldHVybiBjPWIuY2xvbmVFdmVudChhKSxkJiYoYy5wb2ludGVyVHlwZT10aGlzLlBPSU5URVJfVFlQRVNbYS5wb2ludGVyVHlwZV0pLGMuX3NvdXJjZT0ibXMiLGN9LGNsZWFudXA6ZnVuY3Rpb24oYSl7Y1siZGVsZXRlIl0oYSl9LE1TUG9pbnRlckRvd246ZnVuY3Rpb24oZCl7dmFyIGU9dGhpcy5wcmVwYXJlRXZlbnQoZCk7ZS50YXJnZXQ9YS5maW5kVGFyZ2V0KGQpLGMuc2V0KGQucG9pbnRlcklkLGUudGFyZ2V0KSxiLmRvd24oZSl9LE1TUG9pbnRlck1vdmU6ZnVuY3Rpb24oYSl7dmFyIGQ9Yy5nZXQoYS5wb2ludGVySWQpO2lmKGQpe3ZhciBlPXRoaXMucHJlcGFyZUV2ZW50KGEpO2UudGFyZ2V0PWQsYi5tb3ZlKGUpfX0sTVNQb2ludGVyVXA6ZnVuY3Rpb24oZCl7dmFyIGU9dGhpcy5wcmVwYXJlRXZlbnQoZCk7ZS5yZWxhdGVkVGFyZ2V0PWEuZmluZFRhcmdldChkKSxlLnRhcmdldD1jLmdldChlLnBvaW50ZXJJZCksYi51cChlKSx0aGlzLmNsZWFudXAoZC5wb2ludGVySWQpfSxNU1BvaW50ZXJDYW5jZWw6ZnVuY3Rpb24oZCl7dmFyIGU9dGhpcy5wcmVwYXJlRXZlbnQoZCk7ZS5yZWxhdGVkVGFyZ2V0PWEuZmluZFRhcmdldChkKSxlLnRhcmdldD1jLmdldChlLnBvaW50ZXJJZCksYi5jYW5jZWwoZSksdGhpcy5jbGVhbnVwKGQucG9pbnRlcklkKX19O2EubXNFdmVudHM9ZX0od2luZG93LlBvbHltZXJHZXN0dXJlcyksZnVuY3Rpb24oYSl7dmFyIGI9YS5kaXNwYXRjaGVyLGM9Yi5wb2ludGVybWFwLGQ9e2V2ZW50czpbInBvaW50ZXJkb3duIiwicG9pbnRlcm1vdmUiLCJwb2ludGVydXAiLCJwb2ludGVyY2FuY2VsIl0scHJlcGFyZUV2ZW50OmZ1bmN0aW9uKGEpe3ZhciBjPWIuY2xvbmVFdmVudChhKTtyZXR1cm4gYy5fc291cmNlPSJwb2ludGVyIixjfSxyZWdpc3RlcjpmdW5jdGlvbihhKXtiLmxpc3RlbihhLHRoaXMuZXZlbnRzKX0sdW5yZWdpc3RlcjpmdW5jdGlvbihhKXtiLnVubGlzdGVuKGEsdGhpcy5ldmVudHMpfSxjbGVhbnVwOmZ1bmN0aW9uKGEpe2NbImRlbGV0ZSJdKGEpfSxwb2ludGVyZG93bjpmdW5jdGlvbihkKXt2YXIgZT10aGlzLnByZXBhcmVFdmVudChkKTtlLnRhcmdldD1hLmZpbmRUYXJnZXQoZCksYy5zZXQoZS5wb2ludGVySWQsZS50YXJnZXQpLGIuZG93bihlKX0scG9pbnRlcm1vdmU6ZnVuY3Rpb24oYSl7dmFyIGQ9Yy5nZXQoYS5wb2ludGVySWQpO2lmKGQpe3ZhciBlPXRoaXMucHJlcGFyZUV2ZW50KGEpO2UudGFyZ2V0PWQsYi5tb3ZlKGUpfX0scG9pbnRlcnVwOmZ1bmN0aW9uKGQpe3ZhciBlPXRoaXMucHJlcGFyZUV2ZW50KGQpO2UucmVsYXRlZFRhcmdldD1hLmZpbmRUYXJnZXQoZCksZS50YXJnZXQ9Yy5nZXQoZS5wb2ludGVySWQpLGIudXAoZSksdGhpcy5jbGVhbnVwKGQucG9pbnRlcklkKX0scG9pbnRlcmNhbmNlbDpmdW5jdGlvbihkKXt2YXIgZT10aGlzLnByZXBhcmVFdmVudChkKTtlLnJlbGF0ZWRUYXJnZXQ9YS5maW5kVGFyZ2V0KGQpLGUudGFyZ2V0PWMuZ2V0KGUucG9pbnRlcklkKSxiLmNhbmNlbChlKSx0aGlzLmNsZWFudXAoZC5wb2ludGVySWQpfX07YS5wb2ludGVyRXZlbnRzPWR9KHdpbmRvdy5Qb2x5bWVyR2VzdHVyZXMpLGZ1bmN0aW9uKGEpe3ZhciBiPWEuZGlzcGF0Y2hlcixjPXdpbmRvdy5uYXZpZ2F0b3I7aWYod2luZG93LlBvaW50ZXJFdmVudCliLnJlZ2lzdGVyU291cmNlKCJwb2ludGVyIixhLnBvaW50ZXJFdmVudHMpO2Vsc2UgaWYoYy5tc1BvaW50ZXJFbmFibGVkKWIucmVnaXN0ZXJTb3VyY2UoIm1zIixhLm1zRXZlbnRzKTtlbHNlIGlmKGIucmVnaXN0ZXJTb3VyY2UoIm1vdXNlIixhLm1vdXNlRXZlbnRzKSx2b2lkIDAhPT13aW5kb3cub250b3VjaHN0YXJ0KXtiLnJlZ2lzdGVyU291cmNlKCJ0b3VjaCIsYS50b3VjaEV2ZW50cyk7dmFyIGQ9Yy51c2VyQWdlbnQubWF0Y2goIlNhZmFyaSIpJiYhYy51c2VyQWdlbnQubWF0Y2goIkNocm9tZSIpO2QmJmRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcigidG91Y2hzdGFydCIsZnVuY3Rpb24oKXt9KX1iLnJlZ2lzdGVyKGRvY3VtZW50LCEwKX0od2luZG93LlBvbHltZXJHZXN0dXJlcyksZnVuY3Rpb24oYSl7dmFyIGI9YS5kaXNwYXRjaGVyLGM9YS5ldmVudEZhY3RvcnksZD1uZXcgYS5Qb2ludGVyTWFwLGU9e2V2ZW50czpbImRvd24iLCJtb3ZlIiwidXAiXSxleHBvc2VzOlsidHJhY2tzdGFydCIsInRyYWNrIiwidHJhY2t4IiwidHJhY2t5IiwidHJhY2tlbmQiXSxkZWZhdWx0QWN0aW9uczp7dHJhY2s6Im5vbmUiLHRyYWNreDoicGFuLXkiLHRyYWNreToicGFuLXgifSxXSUdHTEVfVEhSRVNIT0xEOjQsY2xhbXBEaXI6ZnVuY3Rpb24oYSl7cmV0dXJuIGE+MD8xOi0xfSxjYWxjUG9zaXRpb25EZWx0YTpmdW5jdGlvbihhLGIpe3ZhciBjPTAsZD0wO3JldHVybiBhJiZiJiYoYz1iLnBhZ2VYLWEucGFnZVgsZD1iLnBhZ2VZLWEucGFnZVkpLHt4OmMseTpkfX0sZmlyZVRyYWNrOmZ1bmN0aW9uKGEsYixkKXt2YXIgZT1kLGY9dGhpcy5jYWxjUG9zaXRpb25EZWx0YShlLmRvd25FdmVudCxiKSxnPXRoaXMuY2FsY1Bvc2l0aW9uRGVsdGEoZS5sYXN0TW92ZUV2ZW50LGIpO2lmKGcueCllLnhEaXJlY3Rpb249dGhpcy5jbGFtcERpcihnLngpO2Vsc2UgaWYoInRyYWNreCI9PT1hKXJldHVybjtpZihnLnkpZS55RGlyZWN0aW9uPXRoaXMuY2xhbXBEaXIoZy55KTtlbHNlIGlmKCJ0cmFja3kiPT09YSlyZXR1cm47dmFyIGg9e2J1YmJsZXM6ITAsY2FuY2VsYWJsZTohMCx0cmFja0luZm86ZS50cmFja0luZm8scmVsYXRlZFRhcmdldDpiLnJlbGF0ZWRUYXJnZXQscG9pbnRlclR5cGU6Yi5wb2ludGVyVHlwZSxwb2ludGVySWQ6Yi5wb2ludGVySWQsX3NvdXJjZToidHJhY2sifTsidHJhY2t5IiE9PWEmJihoLng9Yi54LGguZHg9Zi54LGguZGR4PWcueCxoLmNsaWVudFg9Yi5jbGllbnRYLGgucGFnZVg9Yi5wYWdlWCxoLnNjcmVlblg9Yi5zY3JlZW5YLGgueERpcmVjdGlvbj1lLnhEaXJlY3Rpb24pLCJ0cmFja3giIT09YSYmKGguZHk9Zi55LGguZGR5PWcueSxoLnk9Yi55LGguY2xpZW50WT1iLmNsaWVudFksaC5wYWdlWT1iLnBhZ2VZLGguc2NyZWVuWT1iLnNjcmVlblksaC55RGlyZWN0aW9uPWUueURpcmVjdGlvbik7dmFyIGk9Yy5tYWtlR2VzdHVyZUV2ZW50KGEsaCk7ZS5kb3duVGFyZ2V0LmRpc3BhdGNoRXZlbnQoaSl9LGRvd246ZnVuY3Rpb24oYSl7aWYoYS5pc1ByaW1hcnkmJigibW91c2UiPT09YS5wb2ludGVyVHlwZT8xPT09YS5idXR0b25zOiEwKSl7dmFyIGI9e2Rvd25FdmVudDphLGRvd25UYXJnZXQ6YS50YXJnZXQsdHJhY2tJbmZvOnt9LGxhc3RNb3ZlRXZlbnQ6bnVsbCx4RGlyZWN0aW9uOjAseURpcmVjdGlvbjowLHRyYWNraW5nOiExfTtkLnNldChhLnBvaW50ZXJJZCxiKX19LG1vdmU6ZnVuY3Rpb24oYSl7dmFyIGI9ZC5nZXQoYS5wb2ludGVySWQpO2lmKGIpe2lmKCFiLnRyYWNraW5nKXt2YXIgYz10aGlzLmNhbGNQb3NpdGlvbkRlbHRhKGIuZG93bkV2ZW50LGEpLGU9Yy54KmMueCtjLnkqYy55O2U+dGhpcy5XSUdHTEVfVEhSRVNIT0xEJiYoYi50cmFja2luZz0hMCxiLmxhc3RNb3ZlRXZlbnQ9Yi5kb3duRXZlbnQsdGhpcy5maXJlVHJhY2soInRyYWNrc3RhcnQiLGEsYikpfWIudHJhY2tpbmcmJih0aGlzLmZpcmVUcmFjaygidHJhY2siLGEsYiksdGhpcy5maXJlVHJhY2soInRyYWNreCIsYSxiKSx0aGlzLmZpcmVUcmFjaygidHJhY2t5IixhLGIpKSxiLmxhc3RNb3ZlRXZlbnQ9YX19LHVwOmZ1bmN0aW9uKGEpe3ZhciBiPWQuZ2V0KGEucG9pbnRlcklkKTtiJiYoYi50cmFja2luZyYmdGhpcy5maXJlVHJhY2soInRyYWNrZW5kIixhLGIpLGQuZGVsZXRlKGEucG9pbnRlcklkKSl9fTtiLnJlZ2lzdGVyR2VzdHVyZSgidHJhY2siLGUpfSh3aW5kb3cuUG9seW1lckdlc3R1cmVzKSxmdW5jdGlvbihhKXt2YXIgYj1hLmRpc3BhdGNoZXIsYz1hLmV2ZW50RmFjdG9yeSxkPXtIT0xEX0RFTEFZOjIwMCxXSUdHTEVfVEhSRVNIT0xEOjE2LGV2ZW50czpbImRvd24iLCJtb3ZlIiwidXAiXSxleHBvc2VzOlsiaG9sZCIsImhvbGRwdWxzZSIsInJlbGVhc2UiXSxoZWxkUG9pbnRlcjpudWxsLGhvbGRKb2I6bnVsbCxwdWxzZTpmdW5jdGlvbigpe3ZhciBhPURhdGUubm93KCktdGhpcy5oZWxkUG9pbnRlci50aW1lU3RhbXAsYj10aGlzLmhlbGQ/ImhvbGRwdWxzZSI6ImhvbGQiO3RoaXMuZmlyZUhvbGQoYixhKSx0aGlzLmhlbGQ9ITB9LGNhbmNlbDpmdW5jdGlvbigpe2NsZWFySW50ZXJ2YWwodGhpcy5ob2xkSm9iKSx0aGlzLmhlbGQmJnRoaXMuZmlyZUhvbGQoInJlbGVhc2UiKSx0aGlzLmhlbGQ9ITEsdGhpcy5oZWxkUG9pbnRlcj1udWxsLHRoaXMudGFyZ2V0PW51bGwsdGhpcy5ob2xkSm9iPW51bGx9LGRvd246ZnVuY3Rpb24oYSl7YS5pc1ByaW1hcnkmJiF0aGlzLmhlbGRQb2ludGVyJiYodGhpcy5oZWxkUG9pbnRlcj1hLHRoaXMudGFyZ2V0PWEudGFyZ2V0LHRoaXMuaG9sZEpvYj1zZXRJbnRlcnZhbCh0aGlzLnB1bHNlLmJpbmQodGhpcyksdGhpcy5IT0xEX0RFTEFZKSl9LHVwOmZ1bmN0aW9uKGEpe3RoaXMuaGVsZFBvaW50ZXImJnRoaXMuaGVsZFBvaW50ZXIucG9pbnRlcklkPT09YS5wb2ludGVySWQmJnRoaXMuY2FuY2VsKCl9LG1vdmU6ZnVuY3Rpb24oYSl7aWYodGhpcy5oZWxkUG9pbnRlciYmdGhpcy5oZWxkUG9pbnRlci5wb2ludGVySWQ9PT1hLnBvaW50ZXJJZCl7dmFyIGI9YS5jbGllbnRYLXRoaXMuaGVsZFBvaW50ZXIuY2xpZW50WCxjPWEuY2xpZW50WS10aGlzLmhlbGRQb2ludGVyLmNsaWVudFk7YipiK2MqYz50aGlzLldJR0dMRV9USFJFU0hPTEQmJnRoaXMuY2FuY2VsKCl9fSxmaXJlSG9sZDpmdW5jdGlvbihhLGIpe3ZhciBkPXtidWJibGVzOiEwLGNhbmNlbGFibGU6ITAscG9pbnRlclR5cGU6dGhpcy5oZWxkUG9pbnRlci5wb2ludGVyVHlwZSxwb2ludGVySWQ6dGhpcy5oZWxkUG9pbnRlci5wb2ludGVySWQseDp0aGlzLmhlbGRQb2ludGVyLmNsaWVudFgseTp0aGlzLmhlbGRQb2ludGVyLmNsaWVudFksX3NvdXJjZToiaG9sZCJ9O2ImJihkLmhvbGRUaW1lPWIpO3ZhciBlPWMubWFrZUdlc3R1cmVFdmVudChhLGQpO3RoaXMudGFyZ2V0LmRpc3BhdGNoRXZlbnQoZSl9fTtiLnJlZ2lzdGVyR2VzdHVyZSgiaG9sZCIsZCl9KHdpbmRvdy5Qb2x5bWVyR2VzdHVyZXMpLGZ1bmN0aW9uKGEpe3ZhciBiPWEuZGlzcGF0Y2hlcixjPWEuZXZlbnRGYWN0b3J5LGQ9bmV3IGEuUG9pbnRlck1hcCxlPXtldmVudHM6WyJkb3duIiwidXAiXSxleHBvc2VzOlsidGFwIl0sZG93bjpmdW5jdGlvbihhKXthLmlzUHJpbWFyeSYmIWEudGFwUHJldmVudGVkJiZkLnNldChhLnBvaW50ZXJJZCx7dGFyZ2V0OmEudGFyZ2V0LGJ1dHRvbnM6YS5idXR0b25zLHg6YS5jbGllbnRYLHk6YS5jbGllbnRZfSl9LHNob3VsZFRhcDpmdW5jdGlvbihhLGIpe3JldHVybiJtb3VzZSI9PT1hLnBvaW50ZXJUeXBlPzE9PT1iLmJ1dHRvbnM6IWEudGFwUHJldmVudGVkfSx1cDpmdW5jdGlvbihiKXt2YXIgZT1kLmdldChiLnBvaW50ZXJJZCk7aWYoZSYmdGhpcy5zaG91bGRUYXAoYixlKSl7dmFyIGY9YS50YXJnZXRGaW5kaW5nLkxDQShlLnRhcmdldCxiLnJlbGF0ZWRUYXJnZXQpO2lmKGYpe3ZhciBnPWMubWFrZUdlc3R1cmVFdmVudCgidGFwIix7YnViYmxlczohMCxjYW5jZWxhYmxlOiEwLHg6Yi5jbGllbnRYLHk6Yi5jbGllbnRZLGRldGFpbDpiLmRldGFpbCxwb2ludGVyVHlwZTpiLnBvaW50ZXJUeXBlLHBvaW50ZXJJZDpiLnBvaW50ZXJJZCxhbHRLZXk6Yi5hbHRLZXksY3RybEtleTpiLmN0cmxLZXksbWV0YUtleTpiLm1ldGFLZXksc2hpZnRLZXk6Yi5zaGlmdEtleSxfc291cmNlOiJ0YXAifSk7Zi5kaXNwYXRjaEV2ZW50KGcpfX1kLmRlbGV0ZShiLnBvaW50ZXJJZCl9fTtjLnByZXZlbnRUYXA9ZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKCl7YS50YXBQcmV2ZW50ZWQ9ITAsZC5kZWxldGUoYS5wb2ludGVySWQpfX0sYi5yZWdpc3Rlckdlc3R1cmUoInRhcCIsZSl9KHdpbmRvdy5Qb2x5bWVyR2VzdHVyZXMpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEsYil7aWYoIWEpdGhyb3cgbmV3IEVycm9yKCJBU1NFUlQ6ICIrYil9ZnVuY3Rpb24gYyhhKXtyZXR1cm4gYT49NDgmJjU3Pj1hfWZ1bmN0aW9uIGQoYSl7cmV0dXJuIDMyPT09YXx8OT09PWF8fDExPT09YXx8MTI9PT1hfHwxNjA9PT1hfHxhPj01NzYwJiYiXHUxNjgwXHUxODBlXHUyMDAwXHUyMDAxXHUyMDAyXHUyMDAzXHUyMDA0XHUyMDA1XHUyMDA2XHUyMDA3XHUyMDA4XHUyMDA5XHUyMDBhXHUyMDJmXHUyMDVmXHUzMDAwXHVmZWZmIi5pbmRleE9mKFN0cmluZy5mcm9tQ2hhckNvZGUoYSkpPjB9ZnVuY3Rpb24gZShhKXtyZXR1cm4gMTA9PT1hfHwxMz09PWF8fDgyMzI9PT1hfHw4MjMzPT09YX1mdW5jdGlvbiBmKGEpe3JldHVybiAzNj09PWF8fDk1PT09YXx8YT49NjUmJjkwPj1hfHxhPj05NyYmMTIyPj1hfWZ1bmN0aW9uIGcoYSl7cmV0dXJuIDM2PT09YXx8OTU9PT1hfHxhPj02NSYmOTA+PWF8fGE+PTk3JiYxMjI+PWF8fGE+PTQ4JiY1Nz49YX1mdW5jdGlvbiBoKGEpe3JldHVybiJ0aGlzIj09PWF9ZnVuY3Rpb24gaSgpe2Zvcig7WT5YJiZkKFcuY2hhckNvZGVBdChYKSk7KSsrWH1mdW5jdGlvbiBqKCl7dmFyIGEsYjtmb3IoYT1YKys7WT5YJiYoYj1XLmNoYXJDb2RlQXQoWCksZyhiKSk7KSsrWDtyZXR1cm4gVy5zbGljZShhLFgpfWZ1bmN0aW9uIGsoKXt2YXIgYSxiLGM7cmV0dXJuIGE9WCxiPWooKSxjPTE9PT1iLmxlbmd0aD9TLklkZW50aWZpZXI6aChiKT9TLktleXdvcmQ6Im51bGwiPT09Yj9TLk51bGxMaXRlcmFsOiJ0cnVlIj09PWJ8fCJmYWxzZSI9PT1iP1MuQm9vbGVhbkxpdGVyYWw6Uy5JZGVudGlmaWVyLHt0eXBlOmMsdmFsdWU6YixyYW5nZTpbYSxYXX19ZnVuY3Rpb24gbCgpe3ZhciBhLGIsYz1YLGQ9Vy5jaGFyQ29kZUF0KFgpLGU9V1tYXTtzd2l0Y2goZCl7Y2FzZSA0NjpjYXNlIDQwOmNhc2UgNDE6Y2FzZSA1OTpjYXNlIDQ0OmNhc2UgMTIzOmNhc2UgMTI1OmNhc2UgOTE6Y2FzZSA5MzpjYXNlIDU4OmNhc2UgNjM6cmV0dXJuKytYLHt0eXBlOlMuUHVuY3R1YXRvcix2YWx1ZTpTdHJpbmcuZnJvbUNoYXJDb2RlKGQpLHJhbmdlOltjLFhdfTtkZWZhdWx0OmlmKGE9Vy5jaGFyQ29kZUF0KFgrMSksNjE9PT1hKXN3aXRjaChkKXtjYXNlIDM3OmNhc2UgMzg6Y2FzZSA0MjpjYXNlIDQzOmNhc2UgNDU6Y2FzZSA0NzpjYXNlIDYwOmNhc2UgNjI6Y2FzZSAxMjQ6cmV0dXJuIFgrPTIse3R5cGU6Uy5QdW5jdHVhdG9yLHZhbHVlOlN0cmluZy5mcm9tQ2hhckNvZGUoZCkrU3RyaW5nLmZyb21DaGFyQ29kZShhKSxyYW5nZTpbYyxYXX07Y2FzZSAzMzpjYXNlIDYxOnJldHVybiBYKz0yLDYxPT09Vy5jaGFyQ29kZUF0KFgpJiYrK1gse3R5cGU6Uy5QdW5jdHVhdG9yLHZhbHVlOlcuc2xpY2UoYyxYKSxyYW5nZTpbYyxYXX19fXJldHVybiBiPVdbWCsxXSxlPT09YiYmIiZ8Ii5pbmRleE9mKGUpPj0wPyhYKz0yLHt0eXBlOlMuUHVuY3R1YXRvcix2YWx1ZTplK2IscmFuZ2U6W2MsWF19KToiPD49ISstKiUmfF4vIi5pbmRleE9mKGUpPj0wPygrK1gse3R5cGU6Uy5QdW5jdHVhdG9yLHZhbHVlOmUscmFuZ2U6W2MsWF19KTp2b2lkIHMoe30sVi5VbmV4cGVjdGVkVG9rZW4sIklMTEVHQUwiKX1mdW5jdGlvbiBtKCl7dmFyIGEsZCxlO2lmKGU9V1tYXSxiKGMoZS5jaGFyQ29kZUF0KDApKXx8Ii4iPT09ZSwiTnVtZXJpYyBsaXRlcmFsIG11c3Qgc3RhcnQgd2l0aCBhIGRlY2ltYWwgZGlnaXQgb3IgYSBkZWNpbWFsIHBvaW50IiksZD1YLGE9IiIsIi4iIT09ZSl7Zm9yKGE9V1tYKytdLGU9V1tYXSwiMCI9PT1hJiZlJiZjKGUuY2hhckNvZGVBdCgwKSkmJnMoe30sVi5VbmV4cGVjdGVkVG9rZW4sIklMTEVHQUwiKTtjKFcuY2hhckNvZGVBdChYKSk7KWErPVdbWCsrXTtlPVdbWF19aWYoIi4iPT09ZSl7Zm9yKGErPVdbWCsrXTtjKFcuY2hhckNvZGVBdChYKSk7KWErPVdbWCsrXTtlPVdbWF19aWYoImUiPT09ZXx8IkUiPT09ZSlpZihhKz1XW1grK10sZT1XW1hdLCgiKyI9PT1lfHwiLSI9PT1lKSYmKGErPVdbWCsrXSksYyhXLmNoYXJDb2RlQXQoWCkpKWZvcig7YyhXLmNoYXJDb2RlQXQoWCkpOylhKz1XW1grK107ZWxzZSBzKHt9LFYuVW5leHBlY3RlZFRva2VuLCJJTExFR0FMIik7cmV0dXJuIGYoVy5jaGFyQ29kZUF0KFgpKSYmcyh7fSxWLlVuZXhwZWN0ZWRUb2tlbiwiSUxMRUdBTCIpLHt0eXBlOlMuTnVtZXJpY0xpdGVyYWwsdmFsdWU6cGFyc2VGbG9hdChhKSxyYW5nZTpbZCxYXX19ZnVuY3Rpb24gbigpe3ZhciBhLGMsZCxmPSIiLGc9ITE7Zm9yKGE9V1tYXSxiKCInIj09PWF8fCciJz09PWEsIlN0cmluZyBsaXRlcmFsIG11c3Qgc3RhcnRzIHdpdGggYSBxdW90ZSIpLGM9WCwrK1g7WT5YOyl7aWYoZD1XW1grK10sZD09PWEpe2E9IiI7YnJlYWt9aWYoIlxcIj09PWQpaWYoZD1XW1grK10sZCYmZShkLmNoYXJDb2RlQXQoMCkpKSJcciI9PT1kJiYiXG4iPT09V1tYXSYmKytYO2Vsc2Ugc3dpdGNoKGQpe2Nhc2UibiI6Zis9IlxuIjticmVhaztjYXNlInIiOmYrPSJcciI7YnJlYWs7Y2FzZSJ0IjpmKz0iCSI7YnJlYWs7Y2FzZSJiIjpmKz0iXGIiO2JyZWFrO2Nhc2UiZiI6Zis9IlxmIjticmVhaztjYXNlInYiOmYrPSILIjticmVhaztkZWZhdWx0OmYrPWR9ZWxzZXtpZihlKGQuY2hhckNvZGVBdCgwKSkpYnJlYWs7Zis9ZH19cmV0dXJuIiIhPT1hJiZzKHt9LFYuVW5leHBlY3RlZFRva2VuLCJJTExFR0FMIikse3R5cGU6Uy5TdHJpbmdMaXRlcmFsLHZhbHVlOmYsb2N0YWw6ZyxyYW5nZTpbYyxYXX19ZnVuY3Rpb24gbyhhKXtyZXR1cm4gYS50eXBlPT09Uy5JZGVudGlmaWVyfHxhLnR5cGU9PT1TLktleXdvcmR8fGEudHlwZT09PVMuQm9vbGVhbkxpdGVyYWx8fGEudHlwZT09PVMuTnVsbExpdGVyYWx9ZnVuY3Rpb24gcCgpe3ZhciBhO3JldHVybiBpKCksWD49WT97dHlwZTpTLkVPRixyYW5nZTpbWCxYXX06KGE9Vy5jaGFyQ29kZUF0KFgpLDQwPT09YXx8NDE9PT1hfHw1OD09PWE/bCgpOjM5PT09YXx8MzQ9PT1hP24oKTpmKGEpP2soKTo0Nj09PWE/YyhXLmNoYXJDb2RlQXQoWCsxKSk/bSgpOmwoKTpjKGEpP20oKTpsKCkpfWZ1bmN0aW9uIHEoKXt2YXIgYTtyZXR1cm4gYT0kLFg9YS5yYW5nZVsxXSwkPXAoKSxYPWEucmFuZ2VbMV0sYX1mdW5jdGlvbiByKCl7dmFyIGE7YT1YLCQ9cCgpLFg9YX1mdW5jdGlvbiBzKGEsYyl7dmFyIGQsZT1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMiksZj1jLnJlcGxhY2UoLyUoXGQpL2csZnVuY3Rpb24oYSxjKXtyZXR1cm4gYihjPGUubGVuZ3RoLCJNZXNzYWdlIHJlZmVyZW5jZSBtdXN0IGJlIGluIHJhbmdlIiksZVtjXX0pO3Rocm93IGQ9bmV3IEVycm9yKGYpLGQuaW5kZXg9WCxkLmRlc2NyaXB0aW9uPWYsZH1mdW5jdGlvbiB0KGEpe3MoYSxWLlVuZXhwZWN0ZWRUb2tlbixhLnZhbHVlKX1mdW5jdGlvbiB1KGEpe3ZhciBiPXEoKTsoYi50eXBlIT09Uy5QdW5jdHVhdG9yfHxiLnZhbHVlIT09YSkmJnQoYil9ZnVuY3Rpb24gdihhKXtyZXR1cm4gJC50eXBlPT09Uy5QdW5jdHVhdG9yJiYkLnZhbHVlPT09YX1mdW5jdGlvbiB3KGEpe3JldHVybiAkLnR5cGU9PT1TLktleXdvcmQmJiQudmFsdWU9PT1hfWZ1bmN0aW9uIHgoKXt2YXIgYT1bXTtmb3IodSgiWyIpOyF2KCJdIik7KXYoIiwiKT8ocSgpLGEucHVzaChudWxsKSk6KGEucHVzaChiYigpKSx2KCJdIil8fHUoIiwiKSk7cmV0dXJuIHUoIl0iKSxaLmNyZWF0ZUFycmF5RXhwcmVzc2lvbihhKX1mdW5jdGlvbiB5KCl7dmFyIGE7cmV0dXJuIGkoKSxhPXEoKSxhLnR5cGU9PT1TLlN0cmluZ0xpdGVyYWx8fGEudHlwZT09PVMuTnVtZXJpY0xpdGVyYWw/Wi5jcmVhdGVMaXRlcmFsKGEpOlouY3JlYXRlSWRlbnRpZmllcihhLnZhbHVlKX1mdW5jdGlvbiB6KCl7dmFyIGEsYjtyZXR1cm4gYT0kLGkoKSwoYS50eXBlPT09Uy5FT0Z8fGEudHlwZT09PVMuUHVuY3R1YXRvcikmJnQoYSksYj15KCksdSgiOiIpLFouY3JlYXRlUHJvcGVydHkoImluaXQiLGIsYmIoKSl9ZnVuY3Rpb24gQSgpe3ZhciBhPVtdO2Zvcih1KCJ7Iik7IXYoIn0iKTspYS5wdXNoKHooKSksdigifSIpfHx1KCIsIik7cmV0dXJuIHUoIn0iKSxaLmNyZWF0ZU9iamVjdEV4cHJlc3Npb24oYSl9ZnVuY3Rpb24gQigpe3ZhciBhO3JldHVybiB1KCIoIiksYT1iYigpLHUoIikiKSxhfWZ1bmN0aW9uIEMoKXt2YXIgYSxiLGM7cmV0dXJuIHYoIigiKT9CKCk6KGE9JC50eXBlLGE9PT1TLklkZW50aWZpZXI/Yz1aLmNyZWF0ZUlkZW50aWZpZXIocSgpLnZhbHVlKTphPT09Uy5TdHJpbmdMaXRlcmFsfHxhPT09Uy5OdW1lcmljTGl0ZXJhbD9jPVouY3JlYXRlTGl0ZXJhbChxKCkpOmE9PT1TLktleXdvcmQ/dygidGhpcyIpJiYocSgpLGM9Wi5jcmVhdGVUaGlzRXhwcmVzc2lvbigpKTphPT09Uy5Cb29sZWFuTGl0ZXJhbD8oYj1xKCksYi52YWx1ZT0idHJ1ZSI9PT1iLnZhbHVlLGM9Wi5jcmVhdGVMaXRlcmFsKGIpKTphPT09Uy5OdWxsTGl0ZXJhbD8oYj1xKCksYi52YWx1ZT1udWxsLGM9Wi5jcmVhdGVMaXRlcmFsKGIpKTp2KCJbIik/Yz14KCk6digieyIpJiYoYz1BKCkpLGM/Yzp2b2lkIHQocSgpKSl9ZnVuY3Rpb24gRCgpe3ZhciBhPVtdO2lmKHUoIigiKSwhdigiKSIpKWZvcig7WT5YJiYoYS5wdXNoKGJiKCkpLCF2KCIpIikpOyl1KCIsIik7cmV0dXJuIHUoIikiKSxhfWZ1bmN0aW9uIEUoKXt2YXIgYTtyZXR1cm4gYT1xKCksbyhhKXx8dChhKSxaLmNyZWF0ZUlkZW50aWZpZXIoYS52YWx1ZSl9ZnVuY3Rpb24gRigpe3JldHVybiB1KCIuIiksRSgpfWZ1bmN0aW9uIEcoKXt2YXIgYTtyZXR1cm4gdSgiWyIpLGE9YmIoKSx1KCJdIiksYX1mdW5jdGlvbiBIKCl7dmFyIGEsYixjO2ZvcihhPUMoKTs7KWlmKHYoIlsiKSljPUcoKSxhPVouY3JlYXRlTWVtYmVyRXhwcmVzc2lvbigiWyIsYSxjKTtlbHNlIGlmKHYoIi4iKSljPUYoKSxhPVouY3JlYXRlTWVtYmVyRXhwcmVzc2lvbigiLiIsYSxjKTtlbHNle2lmKCF2KCIoIikpYnJlYWs7Yj1EKCksYT1aLmNyZWF0ZUNhbGxFeHByZXNzaW9uKGEsYil9cmV0dXJuIGF9ZnVuY3Rpb24gSSgpe3ZhciBhLGI7cmV0dXJuICQudHlwZSE9PVMuUHVuY3R1YXRvciYmJC50eXBlIT09Uy5LZXl3b3JkP2I9YWIoKTp2KCIrIil8fHYoIi0iKXx8digiISIpPyhhPXEoKSxiPUkoKSxiPVouY3JlYXRlVW5hcnlFeHByZXNzaW9uKGEudmFsdWUsYikpOncoImRlbGV0ZSIpfHx3KCJ2b2lkIil8fHcoInR5cGVvZiIpP3Moe30sVi5VbmV4cGVjdGVkVG9rZW4pOmI9YWIoKSxifWZ1bmN0aW9uIEooYSl7dmFyIGI9MDtpZihhLnR5cGUhPT1TLlB1bmN0dWF0b3ImJmEudHlwZSE9PVMuS2V5d29yZClyZXR1cm4gMDtzd2l0Y2goYS52YWx1ZSl7Y2FzZSJ8fCI6Yj0xO2JyZWFrO2Nhc2UiJiYiOmI9MjticmVhaztjYXNlIj09IjpjYXNlIiE9IjpjYXNlIj09PSI6Y2FzZSIhPT0iOmI9NjticmVhaztjYXNlIjwiOmNhc2UiPiI6Y2FzZSI8PSI6Y2FzZSI+PSI6Y2FzZSJpbnN0YW5jZW9mIjpiPTc7YnJlYWs7Y2FzZSJpbiI6Yj03O2JyZWFrO2Nhc2UiKyI6Y2FzZSItIjpiPTk7YnJlYWs7Y2FzZSIqIjpjYXNlIi8iOmNhc2UiJSI6Yj0xMX1yZXR1cm4gYn1mdW5jdGlvbiBLKCl7dmFyIGEsYixjLGQsZSxmLGcsaDtpZihnPUkoKSxiPSQsYz1KKGIpLDA9PT1jKXJldHVybiBnO2ZvcihiLnByZWM9YyxxKCksZT1JKCksZD1bZyxiLGVdOyhjPUooJCkpPjA7KXtmb3IoO2QubGVuZ3RoPjImJmM8PWRbZC5sZW5ndGgtMl0ucHJlYzspZT1kLnBvcCgpLGY9ZC5wb3AoKS52YWx1ZSxnPWQucG9wKCksYT1aLmNyZWF0ZUJpbmFyeUV4cHJlc3Npb24oZixnLGUpLGQucHVzaChhKTtiPXEoKSxiLnByZWM9YyxkLnB1c2goYiksYT1JKCksZC5wdXNoKGEpfWZvcihoPWQubGVuZ3RoLTEsYT1kW2hdO2g+MTspYT1aLmNyZWF0ZUJpbmFyeUV4cHJlc3Npb24oZFtoLTFdLnZhbHVlLGRbaC0yXSxhKSxoLT0yO3JldHVybiBhfWZ1bmN0aW9uIEwoKXt2YXIgYSxiLGM7cmV0dXJuIGE9SygpLHYoIj8iKSYmKHEoKSxiPUwoKSx1KCI6IiksYz1MKCksYT1aLmNyZWF0ZUNvbmRpdGlvbmFsRXhwcmVzc2lvbihhLGIsYykpLGF9ZnVuY3Rpb24gTSgpe3ZhciBhLGI7cmV0dXJuIGE9cSgpLGEudHlwZSE9PVMuSWRlbnRpZmllciYmdChhKSxiPXYoIigiKT9EKCk6W10sWi5jcmVhdGVGaWx0ZXIoYS52YWx1ZSxiKX1mdW5jdGlvbiBOKCl7Zm9yKDt2KCJ8Iik7KXEoKSxNKCl9ZnVuY3Rpb24gTygpe2koKSxyKCk7dmFyIGE9YmIoKTthJiYoIiwiPT09JC52YWx1ZXx8ImluIj09JC52YWx1ZSYmYS50eXBlPT09VS5JZGVudGlmaWVyP1EoYSk6KE4oKSwiYXMiPT09JC52YWx1ZT9QKGEpOlouY3JlYXRlVG9wTGV2ZWwoYSkpKSwkLnR5cGUhPT1TLkVPRiYmdCgkKX1mdW5jdGlvbiBQKGEpe3EoKTt2YXIgYj1xKCkudmFsdWU7Wi5jcmVhdGVBc0V4cHJlc3Npb24oYSxiKX1mdW5jdGlvbiBRKGEpe3ZhciBiOyIsIj09PSQudmFsdWUmJihxKCksJC50eXBlIT09Uy5JZGVudGlmaWVyJiZ0KCQpLGI9cSgpLnZhbHVlKSxxKCk7dmFyIGM9YmIoKTtOKCksWi5jcmVhdGVJbkV4cHJlc3Npb24oYS5uYW1lLGIsYyl9ZnVuY3Rpb24gUihhLGIpe3JldHVybiBaPWIsVz1hLFg9MCxZPVcubGVuZ3RoLCQ9bnVsbCxfPXtsYWJlbFNldDp7fX0sTygpfXZhciBTLFQsVSxWLFcsWCxZLFosJCxfO1M9e0Jvb2xlYW5MaXRlcmFsOjEsRU9GOjIsSWRlbnRpZmllcjozLEtleXdvcmQ6NCxOdWxsTGl0ZXJhbDo1LE51bWVyaWNMaXRlcmFsOjYsUHVuY3R1YXRvcjo3LFN0cmluZ0xpdGVyYWw6OH0sVD17fSxUW1MuQm9vbGVhbkxpdGVyYWxdPSJCb29sZWFuIixUW1MuRU9GXT0iPGVuZD4iLFRbUy5JZGVudGlmaWVyXT0iSWRlbnRpZmllciIsVFtTLktleXdvcmRdPSJLZXl3b3JkIixUW1MuTnVsbExpdGVyYWxdPSJOdWxsIixUW1MuTnVtZXJpY0xpdGVyYWxdPSJOdW1lcmljIixUW1MuUHVuY3R1YXRvcl09IlB1bmN0dWF0b3IiLFRbUy5TdHJpbmdMaXRlcmFsXT0iU3RyaW5nIixVPXtBcnJheUV4cHJlc3Npb246IkFycmF5RXhwcmVzc2lvbiIsQmluYXJ5RXhwcmVzc2lvbjoiQmluYXJ5RXhwcmVzc2lvbiIsQ2FsbEV4cHJlc3Npb246IkNhbGxFeHByZXNzaW9uIixDb25kaXRpb25hbEV4cHJlc3Npb246IkNvbmRpdGlvbmFsRXhwcmVzc2lvbiIsRW1wdHlTdGF0ZW1lbnQ6IkVtcHR5U3RhdGVtZW50IixFeHByZXNzaW9uU3RhdGVtZW50OiJFeHByZXNzaW9uU3RhdGVtZW50IixJZGVudGlmaWVyOiJJZGVudGlmaWVyIixMaXRlcmFsOiJMaXRlcmFsIixMYWJlbGVkU3RhdGVtZW50OiJMYWJlbGVkU3RhdGVtZW50IixMb2dpY2FsRXhwcmVzc2lvbjoiTG9naWNhbEV4cHJlc3Npb24iLE1lbWJlckV4cHJlc3Npb246Ik1lbWJlckV4cHJlc3Npb24iLE9iamVjdEV4cHJlc3Npb246Ik9iamVjdEV4cHJlc3Npb24iLFByb2dyYW06IlByb2dyYW0iLFByb3BlcnR5OiJQcm9wZXJ0eSIsVGhpc0V4cHJlc3Npb246IlRoaXNFeHByZXNzaW9uIixVbmFyeUV4cHJlc3Npb246IlVuYXJ5RXhwcmVzc2lvbiJ9LFY9e1VuZXhwZWN0ZWRUb2tlbjoiVW5leHBlY3RlZCB0b2tlbiAlMCIsVW5rbm93bkxhYmVsOiJVbmRlZmluZWQgbGFiZWwgJyUwJyIsUmVkZWNsYXJhdGlvbjoiJTAgJyUxJyBoYXMgYWxyZWFkeSBiZWVuIGRlY2xhcmVkIn07dmFyIGFiPUgsYmI9TDthLmVzcHJpbWE9e3BhcnNlOlJ9fSh0aGlzKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhLGIsZCxlKXt2YXIgZjt0cnl7aWYoZj1jKGEpLGYuc2NvcGVJZGVudCYmKGQubm9kZVR5cGUhPT1Ob2RlLkVMRU1FTlRfTk9ERXx8IlRFTVBMQVRFIiE9PWQudGFnTmFtZXx8ImJpbmQiIT09YiYmInJlcGVhdCIhPT1iKSl0aHJvdyBFcnJvcigiYXMgYW5kIGluIGNhbiBvbmx5IGJlIHVzZWQgd2l0aGluIDx0ZW1wbGF0ZSBiaW5kL3JlcGVhdD4iKX1jYXRjaChnKXtyZXR1cm4gdm9pZCBjb25zb2xlLmVycm9yKCJJbnZhbGlkIGV4cHJlc3Npb24gc3ludGF4OiAiK2EsZyl9cmV0dXJuIGZ1bmN0aW9uKGEsYixjKXt2YXIgZD1mLmdldEJpbmRpbmcoYSxlLGMpO3JldHVybiBmLnNjb3BlSWRlbnQmJmQmJihiLnBvbHltZXJFeHByZXNzaW9uU2NvcGVJZGVudF89Zi5zY29wZUlkZW50LGYuaW5kZXhJZGVudCYmKGIucG9seW1lckV4cHJlc3Npb25JbmRleElkZW50Xz1mLmluZGV4SWRlbnQpKSxkfX1mdW5jdGlvbiBjKGEpe3ZhciBiPXFbYV07aWYoIWIpe3ZhciBjPW5ldyBqO2VzcHJpbWEucGFyc2UoYSxjKSxiPW5ldyBsKGMpLHFbYV09Yn1yZXR1cm4gYn1mdW5jdGlvbiBkKGEpe3RoaXMudmFsdWU9YSx0aGlzLnZhbHVlRm5fPXZvaWQgMH1mdW5jdGlvbiBlKGEpe3RoaXMubmFtZT1hLHRoaXMucGF0aD1QYXRoLmdldChhKX1mdW5jdGlvbiBmKGEsYixjKXt0aGlzLmNvbXB1dGVkPSJbIj09Yyx0aGlzLmR5bmFtaWNEZXBzPSJmdW5jdGlvbiI9PXR5cGVvZiBhfHxhLmR5bmFtaWNEZXBzfHx0aGlzLmNvbXB1dGVkJiYhKGIgaW5zdGFuY2VvZiBkKSx0aGlzLnNpbXBsZVBhdGg9IXRoaXMuZHluYW1pY0RlcHMmJihiIGluc3RhbmNlb2YgZXx8YiBpbnN0YW5jZW9mIGQpJiYoYSBpbnN0YW5jZW9mIGZ8fGEgaW5zdGFuY2VvZiBlKSx0aGlzLm9iamVjdD10aGlzLnNpbXBsZVBhdGg/YTppKGEpLHRoaXMucHJvcGVydHk9IXRoaXMuY29tcHV0ZWR8fHRoaXMuc2ltcGxlUGF0aD9iOmkoYil9ZnVuY3Rpb24gZyhhLGIpe3RoaXMubmFtZT1hLHRoaXMuYXJncz1bXTtmb3IodmFyIGM9MDtjPGIubGVuZ3RoO2MrKyl0aGlzLmFyZ3NbY109aShiW2NdKX1mdW5jdGlvbiBoKCl7dGhyb3cgRXJyb3IoIk5vdCBJbXBsZW1lbnRlZCIpfWZ1bmN0aW9uIGkoYSl7cmV0dXJuImZ1bmN0aW9uIj09dHlwZW9mIGE/YTphLnZhbHVlRm4oKX1mdW5jdGlvbiBqKCl7dGhpcy5leHByZXNzaW9uPW51bGwsdGhpcy5maWx0ZXJzPVtdLHRoaXMuZGVwcz17fSx0aGlzLmN1cnJlbnRQYXRoPXZvaWQgMCx0aGlzLnNjb3BlSWRlbnQ9dm9pZCAwLHRoaXMuaW5kZXhJZGVudD12b2lkIDAsdGhpcy5keW5hbWljRGVwcz0hMX1mdW5jdGlvbiBrKGEpe3RoaXMudmFsdWVfPWF9ZnVuY3Rpb24gbChhKXtpZih0aGlzLnNjb3BlSWRlbnQ9YS5zY29wZUlkZW50LHRoaXMuaW5kZXhJZGVudD1hLmluZGV4SWRlbnQsIWEuZXhwcmVzc2lvbil0aHJvdyBFcnJvcigiTm8gZXhwcmVzc2lvbiBmb3VuZC4iKTt0aGlzLmV4cHJlc3Npb249YS5leHByZXNzaW9uLGkodGhpcy5leHByZXNzaW9uKSx0aGlzLmZpbHRlcnM9YS5maWx0ZXJzLHRoaXMuZHluYW1pY0RlcHM9YS5keW5hbWljRGVwc31mdW5jdGlvbiBtKGEpe3JldHVybiBTdHJpbmcoYSkucmVwbGFjZSgvW0EtWl0vZyxmdW5jdGlvbihhKXtyZXR1cm4iLSIrYS50b0xvd2VyQ2FzZSgpfSl9ZnVuY3Rpb24gbihhLGIpe2Zvcig7YVt0XSYmIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChhLGIpOylhPWFbdF07cmV0dXJuIGF9ZnVuY3Rpb24gbyhhKXtzd2l0Y2goYSl7Y2FzZSIiOnJldHVybiExO2Nhc2UiZmFsc2UiOmNhc2UibnVsbCI6Y2FzZSJ0cnVlIjpyZXR1cm4hMH1yZXR1cm4gaXNOYU4oTnVtYmVyKGEpKT8hMTohMH1mdW5jdGlvbiBwKCl7fXZhciBxPU9iamVjdC5jcmVhdGUobnVsbCk7ZC5wcm90b3R5cGU9e3ZhbHVlRm46ZnVuY3Rpb24oKXtpZighdGhpcy52YWx1ZUZuXyl7dmFyIGE9dGhpcy52YWx1ZTt0aGlzLnZhbHVlRm5fPWZ1bmN0aW9uKCl7cmV0dXJuIGF9fXJldHVybiB0aGlzLnZhbHVlRm5ffX0sZS5wcm90b3R5cGU9e3ZhbHVlRm46ZnVuY3Rpb24oKXtpZighdGhpcy52YWx1ZUZuXyl7dmFyIGE9KHRoaXMubmFtZSx0aGlzLnBhdGgpO3RoaXMudmFsdWVGbl89ZnVuY3Rpb24oYixjKXtyZXR1cm4gYyYmYy5hZGRQYXRoKGIsYSksYS5nZXRWYWx1ZUZyb20oYil9fXJldHVybiB0aGlzLnZhbHVlRm5ffSxzZXRWYWx1ZTpmdW5jdGlvbihhLGIpe3JldHVybiAxPT10aGlzLnBhdGgubGVuZ3RoLGE9bihhLHRoaXMucGF0aFswXSksdGhpcy5wYXRoLnNldFZhbHVlRnJvbShhLGIpfX0sZi5wcm90b3R5cGU9e2dldCBmdWxsUGF0aCgpe2lmKCF0aGlzLmZ1bGxQYXRoXyl7dmFyIGE9dGhpcy5vYmplY3QgaW5zdGFuY2VvZiBmP3RoaXMub2JqZWN0LmZ1bGxQYXRoLnNsaWNlKCk6W3RoaXMub2JqZWN0Lm5hbWVdO2EucHVzaCh0aGlzLnByb3BlcnR5IGluc3RhbmNlb2YgZT90aGlzLnByb3BlcnR5Lm5hbWU6dGhpcy5wcm9wZXJ0eS52YWx1ZSksdGhpcy5mdWxsUGF0aF89UGF0aC5nZXQoYSl9cmV0dXJuIHRoaXMuZnVsbFBhdGhffSx2YWx1ZUZuOmZ1bmN0aW9uKCl7aWYoIXRoaXMudmFsdWVGbl8pe3ZhciBhPXRoaXMub2JqZWN0O2lmKHRoaXMuc2ltcGxlUGF0aCl7dmFyIGI9dGhpcy5mdWxsUGF0aDt0aGlzLnZhbHVlRm5fPWZ1bmN0aW9uKGEsYyl7cmV0dXJuIGMmJmMuYWRkUGF0aChhLGIpLGIuZ2V0VmFsdWVGcm9tKGEpfX1lbHNlIGlmKHRoaXMuY29tcHV0ZWQpe3ZhciBjPXRoaXMucHJvcGVydHk7dGhpcy52YWx1ZUZuXz1mdW5jdGlvbihiLGQsZSl7dmFyIGY9YShiLGQsZSksZz1jKGIsZCxlKTsKcmV0dXJuIGQmJmQuYWRkUGF0aChmLFtnXSksZj9mW2ddOnZvaWQgMH19ZWxzZXt2YXIgYj1QYXRoLmdldCh0aGlzLnByb3BlcnR5Lm5hbWUpO3RoaXMudmFsdWVGbl89ZnVuY3Rpb24oYyxkLGUpe3ZhciBmPWEoYyxkLGUpO3JldHVybiBkJiZkLmFkZFBhdGgoZixiKSxiLmdldFZhbHVlRnJvbShmKX19fXJldHVybiB0aGlzLnZhbHVlRm5ffSxzZXRWYWx1ZTpmdW5jdGlvbihhLGIpe2lmKHRoaXMuc2ltcGxlUGF0aClyZXR1cm4gdGhpcy5mdWxsUGF0aC5zZXRWYWx1ZUZyb20oYSxiKSxiO3ZhciBjPXRoaXMub2JqZWN0KGEpLGQ9dGhpcy5wcm9wZXJ0eSBpbnN0YW5jZW9mIGU/dGhpcy5wcm9wZXJ0eS5uYW1lOnRoaXMucHJvcGVydHkoYSk7cmV0dXJuIGNbZF09Yn19LGcucHJvdG90eXBlPXt0cmFuc2Zvcm06ZnVuY3Rpb24oYSxiLGMsZCxlKXt2YXIgZj1jW3RoaXMubmFtZV0sZz1hO2lmKGYpZz12b2lkIDA7ZWxzZSBpZihmPWdbdGhpcy5uYW1lXSwhZilyZXR1cm4gdm9pZCBjb25zb2xlLmVycm9yKCJDYW5ub3QgZmluZCBmdW5jdGlvbiBvciBmaWx0ZXI6ICIrdGhpcy5uYW1lKTtpZihkP2Y9Zi50b01vZGVsOiJmdW5jdGlvbiI9PXR5cGVvZiBmLnRvRE9NJiYoZj1mLnRvRE9NKSwiZnVuY3Rpb24iIT10eXBlb2YgZilyZXR1cm4gdm9pZCBjb25zb2xlLmVycm9yKCJDYW5ub3QgZmluZCBmdW5jdGlvbiBvciBmaWx0ZXI6ICIrdGhpcy5uYW1lKTtmb3IodmFyIGg9ZXx8W10saj0wO2o8dGhpcy5hcmdzLmxlbmd0aDtqKyspaC5wdXNoKGkodGhpcy5hcmdzW2pdKShhLGIsYykpO3JldHVybiBmLmFwcGx5KGcsaCl9fTt2YXIgcj17IisiOmZ1bmN0aW9uKGEpe3JldHVybithfSwiLSI6ZnVuY3Rpb24oYSl7cmV0dXJuLWF9LCIhIjpmdW5jdGlvbihhKXtyZXR1cm4hYX19LHM9eyIrIjpmdW5jdGlvbihhLGIpe3JldHVybiBhK2J9LCItIjpmdW5jdGlvbihhLGIpe3JldHVybiBhLWJ9LCIqIjpmdW5jdGlvbihhLGIpe3JldHVybiBhKmJ9LCIvIjpmdW5jdGlvbihhLGIpe3JldHVybiBhL2J9LCIlIjpmdW5jdGlvbihhLGIpe3JldHVybiBhJWJ9LCI8IjpmdW5jdGlvbihhLGIpe3JldHVybiBiPmF9LCI+IjpmdW5jdGlvbihhLGIpe3JldHVybiBhPmJ9LCI8PSI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYj49YX0sIj49IjpmdW5jdGlvbihhLGIpe3JldHVybiBhPj1ifSwiPT0iOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGE9PWJ9LCIhPSI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYSE9Yn0sIj09PSI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT09PWJ9LCIhPT0iOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGEhPT1ifSwiJiYiOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGEmJmJ9LCJ8fCI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYXx8Yn19O2oucHJvdG90eXBlPXtjcmVhdGVVbmFyeUV4cHJlc3Npb246ZnVuY3Rpb24oYSxiKXtpZighclthXSl0aHJvdyBFcnJvcigiRGlzYWxsb3dlZCBvcGVyYXRvcjogIithKTtyZXR1cm4gYj1pKGIpLGZ1bmN0aW9uKGMsZCxlKXtyZXR1cm4gclthXShiKGMsZCxlKSl9fSxjcmVhdGVCaW5hcnlFeHByZXNzaW9uOmZ1bmN0aW9uKGEsYixjKXtpZighc1thXSl0aHJvdyBFcnJvcigiRGlzYWxsb3dlZCBvcGVyYXRvcjogIithKTtzd2l0Y2goYj1pKGIpLGM9aShjKSxhKXtjYXNlInx8IjpyZXR1cm4gdGhpcy5keW5hbWljRGVwcz0hMCxmdW5jdGlvbihhLGQsZSl7cmV0dXJuIGIoYSxkLGUpfHxjKGEsZCxlKX07Y2FzZSImJiI6cmV0dXJuIHRoaXMuZHluYW1pY0RlcHM9ITAsZnVuY3Rpb24oYSxkLGUpe3JldHVybiBiKGEsZCxlKSYmYyhhLGQsZSl9fXJldHVybiBmdW5jdGlvbihkLGUsZil7cmV0dXJuIHNbYV0oYihkLGUsZiksYyhkLGUsZikpfX0sY3JlYXRlQ29uZGl0aW9uYWxFeHByZXNzaW9uOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gYT1pKGEpLGI9aShiKSxjPWkoYyksdGhpcy5keW5hbWljRGVwcz0hMCxmdW5jdGlvbihkLGUsZil7cmV0dXJuIGEoZCxlLGYpP2IoZCxlLGYpOmMoZCxlLGYpfX0sY3JlYXRlSWRlbnRpZmllcjpmdW5jdGlvbihhKXt2YXIgYj1uZXcgZShhKTtyZXR1cm4gYi50eXBlPSJJZGVudGlmaWVyIixifSxjcmVhdGVNZW1iZXJFeHByZXNzaW9uOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD1uZXcgZihiLGMsYSk7cmV0dXJuIGQuZHluYW1pY0RlcHMmJih0aGlzLmR5bmFtaWNEZXBzPSEwKSxkfSxjcmVhdGVDYWxsRXhwcmVzc2lvbjpmdW5jdGlvbihhLGIpe2lmKCEoYSBpbnN0YW5jZW9mIGUpKXRocm93IEVycm9yKCJPbmx5IGlkZW50aWZpZXIgZnVuY3Rpb24gaW52b2NhdGlvbnMgYXJlIGFsbG93ZWQiKTt2YXIgYz1uZXcgZyhhLm5hbWUsYik7cmV0dXJuIGZ1bmN0aW9uKGEsYixkKXtyZXR1cm4gYy50cmFuc2Zvcm0oYSxiLGQsITEpfX0sY3JlYXRlTGl0ZXJhbDpmdW5jdGlvbihhKXtyZXR1cm4gbmV3IGQoYS52YWx1ZSl9LGNyZWF0ZUFycmF5RXhwcmVzc2lvbjpmdW5jdGlvbihhKXtmb3IodmFyIGI9MDtiPGEubGVuZ3RoO2IrKylhW2JdPWkoYVtiXSk7cmV0dXJuIGZ1bmN0aW9uKGIsYyxkKXtmb3IodmFyIGU9W10sZj0wO2Y8YS5sZW5ndGg7ZisrKWUucHVzaChhW2ZdKGIsYyxkKSk7cmV0dXJuIGV9fSxjcmVhdGVQcm9wZXJ0eTpmdW5jdGlvbihhLGIsYyl7cmV0dXJue2tleTpiIGluc3RhbmNlb2YgZT9iLm5hbWU6Yi52YWx1ZSx2YWx1ZTpjfX0sY3JlYXRlT2JqZWN0RXhwcmVzc2lvbjpmdW5jdGlvbihhKXtmb3IodmFyIGI9MDtiPGEubGVuZ3RoO2IrKylhW2JdLnZhbHVlPWkoYVtiXS52YWx1ZSk7cmV0dXJuIGZ1bmN0aW9uKGIsYyxkKXtmb3IodmFyIGU9e30sZj0wO2Y8YS5sZW5ndGg7ZisrKWVbYVtmXS5rZXldPWFbZl0udmFsdWUoYixjLGQpO3JldHVybiBlfX0sY3JlYXRlRmlsdGVyOmZ1bmN0aW9uKGEsYil7dGhpcy5maWx0ZXJzLnB1c2gobmV3IGcoYSxiKSl9LGNyZWF0ZUFzRXhwcmVzc2lvbjpmdW5jdGlvbihhLGIpe3RoaXMuZXhwcmVzc2lvbj1hLHRoaXMuc2NvcGVJZGVudD1ifSxjcmVhdGVJbkV4cHJlc3Npb246ZnVuY3Rpb24oYSxiLGMpe3RoaXMuZXhwcmVzc2lvbj1jLHRoaXMuc2NvcGVJZGVudD1hLHRoaXMuaW5kZXhJZGVudD1ifSxjcmVhdGVUb3BMZXZlbDpmdW5jdGlvbihhKXt0aGlzLmV4cHJlc3Npb249YX0sY3JlYXRlVGhpc0V4cHJlc3Npb246aH0say5wcm90b3R5cGU9e29wZW46ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy52YWx1ZV99LGRpc2NhcmRDaGFuZ2VzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudmFsdWVffSxkZWxpdmVyOmZ1bmN0aW9uKCl7fSxjbG9zZTpmdW5jdGlvbigpe319LGwucHJvdG90eXBlPXtnZXRCaW5kaW5nOmZ1bmN0aW9uKGEsYixjKXtmdW5jdGlvbiBkKCl7aWYoaClyZXR1cm4gaD0hMSxnO2kuZHluYW1pY0RlcHMmJmYuc3RhcnRSZXNldCgpO3ZhciBjPWkuZ2V0VmFsdWUoYSxpLmR5bmFtaWNEZXBzP2Y6dm9pZCAwLGIpO3JldHVybiBpLmR5bmFtaWNEZXBzJiZmLmZpbmlzaFJlc2V0KCksY31mdW5jdGlvbiBlKGMpe3JldHVybiBpLnNldFZhbHVlKGEsYyxiKSxjfWlmKGMpcmV0dXJuIHRoaXMuZ2V0VmFsdWUoYSx2b2lkIDAsYik7dmFyIGY9bmV3IENvbXBvdW5kT2JzZXJ2ZXIsZz10aGlzLmdldFZhbHVlKGEsZixiKSxoPSEwLGk9dGhpcztyZXR1cm4gbmV3IE9ic2VydmVyVHJhbnNmb3JtKGYsZCxlLCEwKX0sZ2V0VmFsdWU6ZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZD1pKHRoaXMuZXhwcmVzc2lvbikoYSxiLGMpLGU9MDtlPHRoaXMuZmlsdGVycy5sZW5ndGg7ZSsrKWQ9dGhpcy5maWx0ZXJzW2VdLnRyYW5zZm9ybShhLGIsYywhMSxbZF0pO3JldHVybiBkfSxzZXRWYWx1ZTpmdW5jdGlvbihhLGIsYyl7Zm9yKHZhciBkPXRoaXMuZmlsdGVycz90aGlzLmZpbHRlcnMubGVuZ3RoOjA7ZC0tPjA7KWI9dGhpcy5maWx0ZXJzW2RdLnRyYW5zZm9ybShhLHZvaWQgMCxjLCEwLFtiXSk7cmV0dXJuIHRoaXMuZXhwcmVzc2lvbi5zZXRWYWx1ZT90aGlzLmV4cHJlc3Npb24uc2V0VmFsdWUoYSxiKTp2b2lkIDB9fTt2YXIgdD0iQCIrTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc2xpY2UoMik7cC5wcm90b3R5cGU9e3N0eWxlT2JqZWN0OmZ1bmN0aW9uKGEpe3ZhciBiPVtdO2Zvcih2YXIgYyBpbiBhKWIucHVzaChtKGMpKyI6ICIrYVtjXSk7cmV0dXJuIGIuam9pbigiOyAiKX0sdG9rZW5MaXN0OmZ1bmN0aW9uKGEpe3ZhciBiPVtdO2Zvcih2YXIgYyBpbiBhKWFbY10mJmIucHVzaChjKTtyZXR1cm4gYi5qb2luKCIgIil9LHByZXBhcmVJbnN0YW5jZVBvc2l0aW9uQ2hhbmdlZDpmdW5jdGlvbihhKXt2YXIgYj1hLnBvbHltZXJFeHByZXNzaW9uSW5kZXhJZGVudF87aWYoYilyZXR1cm4gZnVuY3Rpb24oYSxjKXthLm1vZGVsW2JdPWN9fSxwcmVwYXJlQmluZGluZzpmdW5jdGlvbihhLGMsZCl7dmFyIGU9UGF0aC5nZXQoYSk7e2lmKG8oYSl8fCFlLnZhbGlkKXJldHVybiBiKGEsYyxkLHRoaXMpO2lmKDE9PWUubGVuZ3RoKXJldHVybiBmdW5jdGlvbihhLGIsYyl7aWYoYylyZXR1cm4gZS5nZXRWYWx1ZUZyb20oYSk7dmFyIGQ9bihhLGVbMF0pO3JldHVybiBuZXcgUGF0aE9ic2VydmVyKGQsZSl9fX0scHJlcGFyZUluc3RhbmNlTW9kZWw6ZnVuY3Rpb24oYSl7dmFyIGI9YS5wb2x5bWVyRXhwcmVzc2lvblNjb3BlSWRlbnRfO2lmKGIpe3ZhciBjPWEudGVtcGxhdGVJbnN0YW5jZT9hLnRlbXBsYXRlSW5zdGFuY2UubW9kZWw6YS5tb2RlbCxkPWEucG9seW1lckV4cHJlc3Npb25JbmRleElkZW50XztyZXR1cm4gZnVuY3Rpb24oYSl7cmV0dXJuIHUoYyxhLGIsZCl9fX19O3ZhciB1PSJfX3Byb3RvX18iaW57fT9mdW5jdGlvbihhLGIsYyxkKXt2YXIgZT17fTtyZXR1cm4gZVtjXT1iLGVbZF09dm9pZCAwLGVbdF09YSxlLl9fcHJvdG9fXz1hLGV9OmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPU9iamVjdC5jcmVhdGUoYSk7cmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLGMse3ZhbHVlOmIsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsZCx7dmFsdWU6dm9pZCAwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLHQse3ZhbHVlOmEsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwfSksZX07YS5Qb2x5bWVyRXhwcmVzc2lvbnM9cCxwLmdldEV4cHJlc3Npb249Y30odGhpcyksUG9seW1lcj17dmVyc2lvbjoiMC40LjAifSwiZnVuY3Rpb24iPT10eXBlb2Ygd2luZG93LlBvbHltZXImJihQb2x5bWVyPXt9KSx3aW5kb3cuUGxhdGZvcm18fChsb2dGbGFncz13aW5kb3cubG9nRmxhZ3N8fHt9LFBsYXRmb3JtPXtmbHVzaDpmdW5jdGlvbigpe319LEN1c3RvbUVsZW1lbnRzPXt1c2VOYXRpdmU6ITAscmVhZHk6ITAsdGFrZVJlY29yZHM6ZnVuY3Rpb24oKXt9LCJpbnN0YW5jZW9mIjpmdW5jdGlvbihhLGIpe3JldHVybiBhIGluc3RhbmNlb2YgYn19LEhUTUxJbXBvcnRzPXt1c2VOYXRpdmU6ITB9LGFkZEV2ZW50TGlzdGVuZXIoIkhUTUxJbXBvcnRzTG9hZGVkIixmdW5jdGlvbigpe2RvY3VtZW50LmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KCJXZWJDb21wb25lbnRzUmVhZHkiLHtidWJibGVzOiEwfSkpfSksU2hhZG93RE9NUG9seWZpbGw9bnVsbCx3cmFwPXVud3JhcD1mdW5jdGlvbihhKXtyZXR1cm4gYX0pLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSxiKXtiPWJ8fG8sZChmdW5jdGlvbigpe2YoYSxiKX0sYil9ZnVuY3Rpb24gYyhhKXtyZXR1cm4iY29tcGxldGUiPT09YS5yZWFkeVN0YXRlfHxhLnJlYWR5U3RhdGU9PT1xfWZ1bmN0aW9uIGQoYSxiKXtpZihjKGIpKWEmJmEoKTtlbHNle3ZhciBlPWZ1bmN0aW9uKCl7KCJjb21wbGV0ZSI9PT1iLnJlYWR5U3RhdGV8fGIucmVhZHlTdGF0ZT09PXEpJiYoYi5yZW1vdmVFdmVudExpc3RlbmVyKHIsZSksZChhLGIpKX07Yi5hZGRFdmVudExpc3RlbmVyKHIsZSl9fWZ1bmN0aW9uIGUoYSl7YS50YXJnZXQuX19sb2FkZWQ9ITB9ZnVuY3Rpb24gZihhLGIpe2Z1bmN0aW9uIGMoKXtoPT1pJiZhJiZhKCl9ZnVuY3Rpb24gZChhKXtlKGEpLGgrKyxjKCl9dmFyIGY9Yi5xdWVyeVNlbGVjdG9yQWxsKCJsaW5rW3JlbD1pbXBvcnRdIiksaD0wLGk9Zi5sZW5ndGg7aWYoaSlmb3IodmFyIGosaz0wO2k+ayYmKGo9ZltrXSk7aysrKWcoaik/ZC5jYWxsKGose3RhcmdldDpqfSk6KGouYWRkRXZlbnRMaXN0ZW5lcigibG9hZCIsZCksai5hZGRFdmVudExpc3RlbmVyKCJlcnJvciIsZCkpO2Vsc2UgYygpfWZ1bmN0aW9uIGcoYSl7cmV0dXJuIGw/YS5fX2xvYWRlZDphLl9faW1wb3J0UGFyc2VkfWZ1bmN0aW9uIGgoYSl7Zm9yKHZhciBiLGM9MCxkPWEubGVuZ3RoO2Q+YyYmKGI9YVtjXSk7YysrKWkoYikmJmooYil9ZnVuY3Rpb24gaShhKXtyZXR1cm4ibGluayI9PT1hLmxvY2FsTmFtZSYmImltcG9ydCI9PT1hLnJlbH1mdW5jdGlvbiBqKGEpe3ZhciBiPWEuaW1wb3J0O2I/ZSh7dGFyZ2V0OmF9KTooYS5hZGRFdmVudExpc3RlbmVyKCJsb2FkIixlKSxhLmFkZEV2ZW50TGlzdGVuZXIoImVycm9yIixlKSl9dmFyIGs9ImltcG9ydCJpbiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJsaW5rIiksbD1rO2lzSUU9L1RyaWRlbnQvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk7dmFyIG09Qm9vbGVhbih3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLG49ZnVuY3Rpb24oYSl7cmV0dXJuIG0/U2hhZG93RE9NUG9seWZpbGwud3JhcElmTmVlZGVkKGEpOmF9LG89bihkb2N1bWVudCkscD17Z2V0OmZ1bmN0aW9uKCl7dmFyIGE9SFRNTEltcG9ydHMuY3VycmVudFNjcmlwdHx8ZG9jdW1lbnQuY3VycmVudFNjcmlwdHx8KCJjb21wbGV0ZSIhPT1kb2N1bWVudC5yZWFkeVN0YXRlP2RvY3VtZW50LnNjcmlwdHNbZG9jdW1lbnQuc2NyaXB0cy5sZW5ndGgtMV06bnVsbCk7cmV0dXJuIG4oYSl9LGNvbmZpZ3VyYWJsZTohMH07T2JqZWN0LmRlZmluZVByb3BlcnR5KGRvY3VtZW50LCJfY3VycmVudFNjcmlwdCIscCksT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIl9jdXJyZW50U2NyaXB0IixwKTt2YXIgcT1pc0lFPyJjb21wbGV0ZSI6ImludGVyYWN0aXZlIixyPSJyZWFkeXN0YXRlY2hhbmdlIjtsJiYobmV3IE11dGF0aW9uT2JzZXJ2ZXIoZnVuY3Rpb24oYSl7Zm9yKHZhciBiLGM9MCxkPWEubGVuZ3RoO2Q+YyYmKGI9YVtjXSk7YysrKWIuYWRkZWROb2RlcyYmaChiLmFkZGVkTm9kZXMpfSkub2JzZXJ2ZShkb2N1bWVudC5oZWFkLHtjaGlsZExpc3Q6ITB9KSxmdW5jdGlvbigpe2lmKCJsb2FkaW5nIj09PWRvY3VtZW50LnJlYWR5U3RhdGUpZm9yKHZhciBhLGI9ZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgibGlua1tyZWw9aW1wb3J0XSIpLGM9MCxkPWIubGVuZ3RoO2Q+YyYmKGE9YltjXSk7YysrKWooYSl9KCkpLGIoZnVuY3Rpb24oKXtIVE1MSW1wb3J0cy5yZWFkeT0hMCxIVE1MSW1wb3J0cy5yZWFkeVRpbWU9KG5ldyBEYXRlKS5nZXRUaW1lKCksby5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgiSFRNTEltcG9ydHNMb2FkZWQiLHtidWJibGVzOiEwfSkpfSksYS51c2VOYXRpdmU9bCxhLmlzSW1wb3J0TG9hZGVkPWcsYS53aGVuUmVhZHk9YixhLmlzSUU9aXNJRSxhLndoZW5JbXBvcnRzUmVhZHk9Yn0od2luZG93LkhUTUxJbXBvcnRzKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEsYil7cmV0dXJuIGI9Ynx8W10sYi5tYXB8fChiPVtiXSksYS5hcHBseSh0aGlzLGIubWFwKGQpKX1mdW5jdGlvbiBjKGEsYyxkKXt2YXIgZTtzd2l0Y2goYXJndW1lbnRzLmxlbmd0aCl7Y2FzZSAwOnJldHVybjtjYXNlIDE6ZT1udWxsO2JyZWFrO2Nhc2UgMjplPWMuYXBwbHkodGhpcyk7YnJlYWs7ZGVmYXVsdDplPWIoZCxjKX1mW2FdPWV9ZnVuY3Rpb24gZChhKXtyZXR1cm4gZlthXX1mdW5jdGlvbiBlKGEsYyl7SFRNTEltcG9ydHMud2hlbkltcG9ydHNSZWFkeShmdW5jdGlvbigpe2IoYyxhKX0pfXZhciBmPXt9O2EubWFyc2hhbD1kLGEubW9kdWxhcml6ZT1jLGEudXNpbmc9ZX0od2luZG93KSxmdW5jdGlvbigpe3ZhciBhPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInN0eWxlIik7YS50ZXh0Q29udGVudD0iYm9keSB7dHJhbnNpdGlvbjogb3BhY2l0eSBlYXNlLWluIDAuMnM7IH0gXG5ib2R5W3VucmVzb2x2ZWRdIHtvcGFjaXR5OiAwOyBkaXNwbGF5OiBibG9jazsgb3ZlcmZsb3c6IGhpZGRlbjsgfSBcbiI7dmFyIGI9ZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiaGVhZCIpO2IuaW5zZXJ0QmVmb3JlKGEsYi5maXJzdENoaWxkKX0oUGxhdGZvcm0pLGZ1bmN0aW9uKGdsb2JhbCl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGRldGVjdE9iamVjdE9ic2VydmUoKXtmdW5jdGlvbiBhKGEpe2I9YX1pZigiZnVuY3Rpb24iIT10eXBlb2YgT2JqZWN0Lm9ic2VydmV8fCJmdW5jdGlvbiIhPXR5cGVvZiBBcnJheS5vYnNlcnZlKXJldHVybiExO3ZhciBiPVtdLGM9e30sZD1bXTtyZXR1cm4gT2JqZWN0Lm9ic2VydmUoYyxhKSxBcnJheS5vYnNlcnZlKGQsYSksYy5pZD0xLGMuaWQ9MixkZWxldGUgYy5pZCxkLnB1c2goMSwyKSxkLmxlbmd0aD0wLE9iamVjdC5kZWxpdmVyQ2hhbmdlUmVjb3JkcyhhKSw1IT09Yi5sZW5ndGg/ITE6ImFkZCIhPWJbMF0udHlwZXx8InVwZGF0ZSIhPWJbMV0udHlwZXx8ImRlbGV0ZSIhPWJbMl0udHlwZXx8InNwbGljZSIhPWJbM10udHlwZXx8InNwbGljZSIhPWJbNF0udHlwZT8hMTooT2JqZWN0LnVub2JzZXJ2ZShjLGEpLEFycmF5LnVub2JzZXJ2ZShkLGEpLCEwKX1mdW5jdGlvbiBkZXRlY3RFdmFsKCl7aWYoInVuZGVmaW5lZCIhPXR5cGVvZiBjaHJvbWUmJmNocm9tZS5hcHAmJmNocm9tZS5hcHAucnVudGltZSlyZXR1cm4hMTtpZihuYXZpZ2F0b3IuZ2V0RGV2aWNlU3RvcmFnZSlyZXR1cm4hMTt0cnl7dmFyIGE9bmV3IEZ1bmN0aW9uKCIiLCJyZXR1cm4gdHJ1ZTsiKTtyZXR1cm4gYSgpfWNhdGNoKGIpe3JldHVybiExfX1mdW5jdGlvbiBpc0luZGV4KGEpe3JldHVybithPT09YT4+PjB9ZnVuY3Rpb24gdG9OdW1iZXIoYSl7cmV0dXJuK2F9ZnVuY3Rpb24gaXNPYmplY3QoYSl7cmV0dXJuIGE9PT1PYmplY3QoYSl9ZnVuY3Rpb24gYXJlU2FtZVZhbHVlKGEsYil7cmV0dXJuIGE9PT1iPzAhPT1hfHwxL2E9PT0xL2I6bnVtYmVySXNOYU4oYSkmJm51bWJlcklzTmFOKGIpPyEwOmEhPT1hJiZiIT09Yn1mdW5jdGlvbiBnZXRQYXRoQ2hhclR5cGUoYSl7aWYodm9pZCAwPT09YSlyZXR1cm4iZW9mIjt2YXIgYj1hLmNoYXJDb2RlQXQoMCk7c3dpdGNoKGIpe2Nhc2UgOTE6Y2FzZSA5MzpjYXNlIDQ2OmNhc2UgMzQ6Y2FzZSAzOTpjYXNlIDQ4OnJldHVybiBhO2Nhc2UgOTU6Y2FzZSAzNjpyZXR1cm4iaWRlbnQiO2Nhc2UgMzI6Y2FzZSA5OmNhc2UgMTA6Y2FzZSAxMzpjYXNlIDE2MDpjYXNlIDY1Mjc5OmNhc2UgODIzMjpjYXNlIDgyMzM6cmV0dXJuIndzIn1yZXR1cm4gYj49OTcmJjEyMj49Ynx8Yj49NjUmJjkwPj1iPyJpZGVudCI6Yj49NDkmJjU3Pj1iPyJudW1iZXIiOiJlbHNlIn1mdW5jdGlvbiBub29wKCl7fWZ1bmN0aW9uIHBhcnNlUGF0aChhKXtmdW5jdGlvbiBiKCl7aWYoIShrPj1hLmxlbmd0aCkpe3ZhciBiPWFbaysxXTtyZXR1cm4iaW5TaW5nbGVRdW90ZSI9PWwmJiInIj09Ynx8ImluRG91YmxlUXVvdGUiPT1sJiYnIic9PWI/KGsrKyxkPWIsbS5hcHBlbmQoKSwhMCk6dm9pZCAwfX1mb3IodmFyIGMsZCxlLGYsZyxoLGksaj1bXSxrPS0xLGw9ImJlZm9yZVBhdGgiLG09e3B1c2g6ZnVuY3Rpb24oKXt2b2lkIDAhPT1lJiYoai5wdXNoKGUpLGU9dm9pZCAwKX0sYXBwZW5kOmZ1bmN0aW9uKCl7dm9pZCAwPT09ZT9lPWQ6ZSs9ZH19O2w7KWlmKGsrKyxjPWFba10sIlxcIiE9Y3x8IWIobCkpe2lmKGY9Z2V0UGF0aENoYXJUeXBlKGMpLGk9cGF0aFN0YXRlTWFjaGluZVtsXSxnPWlbZl18fGlbImVsc2UiXXx8ImVycm9yIiwiZXJyb3IiPT1nKXJldHVybjtpZihsPWdbMF0saD1tW2dbMV1dfHxub29wLGQ9dm9pZCAwPT09Z1syXT9jOmdbMl0saCgpLCJhZnRlclBhdGgiPT09bClyZXR1cm4gan19ZnVuY3Rpb24gaXNJZGVudChhKXtyZXR1cm4gaWRlbnRSZWdFeHAudGVzdChhKX1mdW5jdGlvbiBQYXRoKGEsYil7aWYoYiE9PWNvbnN0cnVjdG9ySXNQcml2YXRlKXRocm93IEVycm9yKCJVc2UgUGF0aC5nZXQgdG8gcmV0cmlldmUgcGF0aCBvYmplY3RzIik7Zm9yKHZhciBjPTA7YzxhLmxlbmd0aDtjKyspdGhpcy5wdXNoKFN0cmluZyhhW2NdKSk7aGFzRXZhbCYmdGhpcy5sZW5ndGgmJih0aGlzLmdldFZhbHVlRnJvbT10aGlzLmNvbXBpbGVkR2V0VmFsdWVGcm9tRm4oKSl9ZnVuY3Rpb24gZ2V0UGF0aChhKXtpZihhIGluc3RhbmNlb2YgUGF0aClyZXR1cm4gYTtpZigobnVsbD09YXx8MD09YS5sZW5ndGgpJiYoYT0iIiksInN0cmluZyIhPXR5cGVvZiBhKXtpZihpc0luZGV4KGEubGVuZ3RoKSlyZXR1cm4gbmV3IFBhdGgoYSxjb25zdHJ1Y3RvcklzUHJpdmF0ZSk7YT1TdHJpbmcoYSl9dmFyIGI9cGF0aENhY2hlW2FdO2lmKGIpcmV0dXJuIGI7dmFyIGM9cGFyc2VQYXRoKGEpO2lmKCFjKXJldHVybiBpbnZhbGlkUGF0aDt2YXIgYj1uZXcgUGF0aChjLGNvbnN0cnVjdG9ySXNQcml2YXRlKTtyZXR1cm4gcGF0aENhY2hlW2FdPWIsYn1mdW5jdGlvbiBmb3JtYXRBY2Nlc3NvcihhKXtyZXR1cm4gaXNJbmRleChhKT8iWyIrYSsiXSI6J1siJythLnJlcGxhY2UoLyIvZywnXFwiJykrJyJdJ31mdW5jdGlvbiBkaXJ0eUNoZWNrKGEpe2Zvcih2YXIgYj0wO01BWF9ESVJUWV9DSEVDS19DWUNMRVM+YiYmYS5jaGVja18oKTspYisrO3JldHVybiB0ZXN0aW5nRXhwb3NlQ3ljbGVDb3VudCYmKGdsb2JhbC5kaXJ0eUNoZWNrQ3ljbGVDb3VudD1iKSxiPjB9ZnVuY3Rpb24gb2JqZWN0SXNFbXB0eShhKXtmb3IodmFyIGIgaW4gYSlyZXR1cm4hMTtyZXR1cm4hMH1mdW5jdGlvbiBkaWZmSXNFbXB0eShhKXtyZXR1cm4gb2JqZWN0SXNFbXB0eShhLmFkZGVkKSYmb2JqZWN0SXNFbXB0eShhLnJlbW92ZWQpJiZvYmplY3RJc0VtcHR5KGEuY2hhbmdlZCl9ZnVuY3Rpb24gZGlmZk9iamVjdEZyb21PbGRPYmplY3QoYSxiKXt2YXIgYz17fSxkPXt9LGU9e307Zm9yKHZhciBmIGluIGIpe3ZhciBnPWFbZl07KHZvaWQgMD09PWd8fGchPT1iW2ZdKSYmKGYgaW4gYT9nIT09YltmXSYmKGVbZl09Zyk6ZFtmXT12b2lkIDApfWZvcih2YXIgZiBpbiBhKWYgaW4gYnx8KGNbZl09YVtmXSk7cmV0dXJuIEFycmF5LmlzQXJyYXkoYSkmJmEubGVuZ3RoIT09Yi5sZW5ndGgmJihlLmxlbmd0aD1hLmxlbmd0aCkse2FkZGVkOmMscmVtb3ZlZDpkLGNoYW5nZWQ6ZX19ZnVuY3Rpb24gcnVuRU9NVGFza3MoKXtpZighZW9tVGFza3MubGVuZ3RoKXJldHVybiExO2Zvcih2YXIgYT0wO2E8ZW9tVGFza3MubGVuZ3RoO2ErKyllb21UYXNrc1thXSgpO3JldHVybiBlb21UYXNrcy5sZW5ndGg9MCwhMH1mdW5jdGlvbiBuZXdPYnNlcnZlZE9iamVjdCgpe2Z1bmN0aW9uIGEoYSl7YiYmYi5zdGF0ZV89PT1PUEVORUQmJiFkJiZiLmNoZWNrXyhhKX12YXIgYixjLGQ9ITEsZT0hMDtyZXR1cm57b3BlbjpmdW5jdGlvbihjKXtpZihiKXRocm93IEVycm9yKCJPYnNlcnZlZE9iamVjdCBpbiB1c2UiKTtlfHxPYmplY3QuZGVsaXZlckNoYW5nZVJlY29yZHMoYSksYj1jLGU9ITF9LG9ic2VydmU6ZnVuY3Rpb24oYixkKXtjPWIsZD9BcnJheS5vYnNlcnZlKGMsYSk6T2JqZWN0Lm9ic2VydmUoYyxhKX0sZGVsaXZlcjpmdW5jdGlvbihiKXtkPWIsT2JqZWN0LmRlbGl2ZXJDaGFuZ2VSZWNvcmRzKGEpLGQ9ITF9LGNsb3NlOmZ1bmN0aW9uKCl7Yj12b2lkIDAsT2JqZWN0LnVub2JzZXJ2ZShjLGEpLG9ic2VydmVkT2JqZWN0Q2FjaGUucHVzaCh0aGlzKX19fWZ1bmN0aW9uIGdldE9ic2VydmVkT2JqZWN0KGEsYixjKXt2YXIgZD1vYnNlcnZlZE9iamVjdENhY2hlLnBvcCgpfHxuZXdPYnNlcnZlZE9iamVjdCgpO3JldHVybiBkLm9wZW4oYSksZC5vYnNlcnZlKGIsYyksZH1mdW5jdGlvbiBuZXdPYnNlcnZlZFNldCgpe2Z1bmN0aW9uIGEoYixmKXtiJiYoYj09PWQmJihlW2ZdPSEwKSxoLmluZGV4T2YoYik8MCYmKGgucHVzaChiKSxPYmplY3Qub2JzZXJ2ZShiLGMpKSxhKE9iamVjdC5nZXRQcm90b3R5cGVPZihiKSxmKSl9ZnVuY3Rpb24gYihhKXtmb3IodmFyIGI9MDtiPGEubGVuZ3RoO2IrKyl7dmFyIGM9YVtiXTtpZihjLm9iamVjdCE9PWR8fGVbYy5uYW1lXXx8InNldFByb3RvdHlwZSI9PT1jLnR5cGUpcmV0dXJuITF9cmV0dXJuITB9ZnVuY3Rpb24gYyhjKXtpZighYihjKSl7Zm9yKHZhciBkLGU9MDtlPGcubGVuZ3RoO2UrKylkPWdbZV0sZC5zdGF0ZV89PU9QRU5FRCYmZC5pdGVyYXRlT2JqZWN0c18oYSk7Zm9yKHZhciBlPTA7ZTxnLmxlbmd0aDtlKyspZD1nW2VdLGQuc3RhdGVfPT1PUEVORUQmJmQuY2hlY2tfKCl9fXZhciBkLGUsZj0wLGc9W10saD1bXSxpPXtvYmplY3Q6dm9pZCAwLG9iamVjdHM6aCxvcGVuOmZ1bmN0aW9uKGIsYyl7ZHx8KGQ9YyxlPXt9KSxnLnB1c2goYiksZisrLGIuaXRlcmF0ZU9iamVjdHNfKGEpfSxjbG9zZTpmdW5jdGlvbigpe2lmKGYtLSwhKGY+MCkpe2Zvcih2YXIgYT0wO2E8aC5sZW5ndGg7YSsrKU9iamVjdC51bm9ic2VydmUoaFthXSxjKSxPYnNlcnZlci51bm9ic2VydmVkQ291bnQrKztnLmxlbmd0aD0wLGgubGVuZ3RoPTAsZD12b2lkIDAsZT12b2lkIDAsb2JzZXJ2ZWRTZXRDYWNoZS5wdXNoKHRoaXMpfX19O3JldHVybiBpfWZ1bmN0aW9uIGdldE9ic2VydmVkU2V0KGEsYil7cmV0dXJuIGxhc3RPYnNlcnZlZFNldCYmbGFzdE9ic2VydmVkU2V0Lm9iamVjdD09PWJ8fChsYXN0T2JzZXJ2ZWRTZXQ9b2JzZXJ2ZWRTZXRDYWNoZS5wb3AoKXx8bmV3T2JzZXJ2ZWRTZXQoKSxsYXN0T2JzZXJ2ZWRTZXQub2JqZWN0PWIpLGxhc3RPYnNlcnZlZFNldC5vcGVuKGEsYiksbGFzdE9ic2VydmVkU2V0fWZ1bmN0aW9uIE9ic2VydmVyKCl7dGhpcy5zdGF0ZV89VU5PUEVORUQsdGhpcy5jYWxsYmFja189dm9pZCAwLHRoaXMudGFyZ2V0Xz12b2lkIDAsdGhpcy5kaXJlY3RPYnNlcnZlcl89dm9pZCAwLHRoaXMudmFsdWVfPXZvaWQgMCx0aGlzLmlkXz1uZXh0T2JzZXJ2ZXJJZCsrfWZ1bmN0aW9uIGFkZFRvQWxsKGEpe09ic2VydmVyLl9hbGxPYnNlcnZlcnNDb3VudCsrLGNvbGxlY3RPYnNlcnZlcnMmJmFsbE9ic2VydmVycy5wdXNoKGEpfWZ1bmN0aW9uIHJlbW92ZUZyb21BbGwoKXtPYnNlcnZlci5fYWxsT2JzZXJ2ZXJzQ291bnQtLX1mdW5jdGlvbiBPYmplY3RPYnNlcnZlcihhKXtPYnNlcnZlci5jYWxsKHRoaXMpLHRoaXMudmFsdWVfPWEsdGhpcy5vbGRPYmplY3RfPXZvaWQgMH1mdW5jdGlvbiBBcnJheU9ic2VydmVyKGEpe2lmKCFBcnJheS5pc0FycmF5KGEpKXRocm93IEVycm9yKCJQcm92aWRlZCBvYmplY3QgaXMgbm90IGFuIEFycmF5Iik7T2JqZWN0T2JzZXJ2ZXIuY2FsbCh0aGlzLGEpfWZ1bmN0aW9uIFBhdGhPYnNlcnZlcihhLGIpe09ic2VydmVyLmNhbGwodGhpcyksdGhpcy5vYmplY3RfPWEsdGhpcy5wYXRoXz1nZXRQYXRoKGIpLHRoaXMuZGlyZWN0T2JzZXJ2ZXJfPXZvaWQgMH1mdW5jdGlvbiBDb21wb3VuZE9ic2VydmVyKGEpe09ic2VydmVyLmNhbGwodGhpcyksdGhpcy5yZXBvcnRDaGFuZ2VzT25PcGVuXz1hLHRoaXMudmFsdWVfPVtdLHRoaXMuZGlyZWN0T2JzZXJ2ZXJfPXZvaWQgMCx0aGlzLm9ic2VydmVkXz1bXX1mdW5jdGlvbiBpZGVudEZuKGEpe3JldHVybiBhfWZ1bmN0aW9uIE9ic2VydmVyVHJhbnNmb3JtKGEsYixjLGQpe3RoaXMuY2FsbGJhY2tfPXZvaWQgMCx0aGlzLnRhcmdldF89dm9pZCAwLHRoaXMudmFsdWVfPXZvaWQgMCx0aGlzLm9ic2VydmFibGVfPWEsdGhpcy5nZXRWYWx1ZUZuXz1ifHxpZGVudEZuLHRoaXMuc2V0VmFsdWVGbl89Y3x8aWRlbnRGbix0aGlzLmRvbnRQYXNzVGhyb3VnaFNldF89ZH1mdW5jdGlvbiBkaWZmT2JqZWN0RnJvbUNoYW5nZVJlY29yZHMoYSxiLGMpe2Zvcih2YXIgZD17fSxlPXt9LGY9MDtmPGIubGVuZ3RoO2YrKyl7dmFyIGc9YltmXTtleHBlY3RlZFJlY29yZFR5cGVzW2cudHlwZV0/KGcubmFtZSBpbiBjfHwoY1tnLm5hbWVdPWcub2xkVmFsdWUpLCJ1cGRhdGUiIT1nLnR5cGUmJigiYWRkIiE9Zy50eXBlP2cubmFtZSBpbiBkPyhkZWxldGUgZFtnLm5hbWVdLGRlbGV0ZSBjW2cubmFtZV0pOmVbZy5uYW1lXT0hMDpnLm5hbWUgaW4gZT9kZWxldGUgZVtnLm5hbWVdOmRbZy5uYW1lXT0hMCkpOihjb25zb2xlLmVycm9yKCJVbmtub3duIGNoYW5nZVJlY29yZCB0eXBlOiAiK2cudHlwZSksY29uc29sZS5lcnJvcihnKSl9Zm9yKHZhciBoIGluIGQpZFtoXT1hW2hdO2Zvcih2YXIgaCBpbiBlKWVbaF09dm9pZCAwO3ZhciBpPXt9O2Zvcih2YXIgaCBpbiBjKWlmKCEoaCBpbiBkfHxoIGluIGUpKXt2YXIgaj1hW2hdO2NbaF0hPT1qJiYoaVtoXT1qKX1yZXR1cm57YWRkZWQ6ZCxyZW1vdmVkOmUsY2hhbmdlZDppfX1mdW5jdGlvbiBuZXdTcGxpY2UoYSxiLGMpe3JldHVybntpbmRleDphLHJlbW92ZWQ6YixhZGRlZENvdW50OmN9fWZ1bmN0aW9uIEFycmF5U3BsaWNlKCl7fWZ1bmN0aW9uIGNhbGNTcGxpY2VzKGEsYixjLGQsZSxmKXtyZXR1cm4gYXJyYXlTcGxpY2UuY2FsY1NwbGljZXMoYSxiLGMsZCxlLGYpfWZ1bmN0aW9uIGludGVyc2VjdChhLGIsYyxkKXtyZXR1cm4gYz5ifHxhPmQ/LTE6Yj09Y3x8ZD09YT8wOmM+YT9kPmI/Yi1jOmQtYzpiPmQ/ZC1hOmItYX1mdW5jdGlvbiBtZXJnZVNwbGljZShhLGIsYyxkKXtmb3IodmFyIGU9bmV3U3BsaWNlKGIsYyxkKSxmPSExLGc9MCxoPTA7aDxhLmxlbmd0aDtoKyspe3ZhciBpPWFbaF07aWYoaS5pbmRleCs9ZywhZil7dmFyIGo9aW50ZXJzZWN0KGUuaW5kZXgsZS5pbmRleCtlLnJlbW92ZWQubGVuZ3RoLGkuaW5kZXgsaS5pbmRleCtpLmFkZGVkQ291bnQpO2lmKGo+PTApe2Euc3BsaWNlKGgsMSksaC0tLGctPWkuYWRkZWRDb3VudC1pLnJlbW92ZWQubGVuZ3RoLGUuYWRkZWRDb3VudCs9aS5hZGRlZENvdW50LWo7dmFyIGs9ZS5yZW1vdmVkLmxlbmd0aCtpLnJlbW92ZWQubGVuZ3RoLWo7aWYoZS5hZGRlZENvdW50fHxrKXt2YXIgYz1pLnJlbW92ZWQ7aWYoZS5pbmRleDxpLmluZGV4KXt2YXIgbD1lLnJlbW92ZWQuc2xpY2UoMCxpLmluZGV4LWUuaW5kZXgpO0FycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KGwsYyksYz1sfWlmKGUuaW5kZXgrZS5yZW1vdmVkLmxlbmd0aD5pLmluZGV4K2kuYWRkZWRDb3VudCl7dmFyIG09ZS5yZW1vdmVkLnNsaWNlKGkuaW5kZXgraS5hZGRlZENvdW50LWUuaW5kZXgpO0FycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KGMsbSl9ZS5yZW1vdmVkPWMsaS5pbmRleDxlLmluZGV4JiYoZS5pbmRleD1pLmluZGV4KX1lbHNlIGY9ITB9ZWxzZSBpZihlLmluZGV4PGkuaW5kZXgpe2Y9ITAsYS5zcGxpY2UoaCwwLGUpLGgrKzt2YXIgbj1lLmFkZGVkQ291bnQtZS5yZW1vdmVkLmxlbmd0aDtpLmluZGV4Kz1uLGcrPW59fX1mfHxhLnB1c2goZSl9ZnVuY3Rpb24gY3JlYXRlSW5pdGlhbFNwbGljZXMoYSxiKXtmb3IodmFyIGM9W10sZD0wO2Q8Yi5sZW5ndGg7ZCsrKXt2YXIgZT1iW2RdO3N3aXRjaChlLnR5cGUpe2Nhc2Uic3BsaWNlIjptZXJnZVNwbGljZShjLGUuaW5kZXgsZS5yZW1vdmVkLnNsaWNlKCksZS5hZGRlZENvdW50KTticmVhaztjYXNlImFkZCI6Y2FzZSJ1cGRhdGUiOmNhc2UiZGVsZXRlIjppZighaXNJbmRleChlLm5hbWUpKWNvbnRpbnVlO3ZhciBmPXRvTnVtYmVyKGUubmFtZSk7aWYoMD5mKWNvbnRpbnVlO21lcmdlU3BsaWNlKGMsZixbZS5vbGRWYWx1ZV0sMSk7YnJlYWs7ZGVmYXVsdDpjb25zb2xlLmVycm9yKCJVbmV4cGVjdGVkIHJlY29yZCB0eXBlOiAiK0pTT04uc3RyaW5naWZ5KGUpKX19cmV0dXJuIGN9ZnVuY3Rpb24gcHJvamVjdEFycmF5U3BsaWNlcyhhLGIpe3ZhciBjPVtdO3JldHVybiBjcmVhdGVJbml0aWFsU3BsaWNlcyhhLGIpLmZvckVhY2goZnVuY3Rpb24oYil7cmV0dXJuIDE9PWIuYWRkZWRDb3VudCYmMT09Yi5yZW1vdmVkLmxlbmd0aD92b2lkKGIucmVtb3ZlZFswXSE9PWFbYi5pbmRleF0mJmMucHVzaChiKSk6dm9pZChjPWMuY29uY2F0KGNhbGNTcGxpY2VzKGEsYi5pbmRleCxiLmluZGV4K2IuYWRkZWRDb3VudCxiLnJlbW92ZWQsMCxiLnJlbW92ZWQubGVuZ3RoKSkpfSksY312YXIgdGVzdGluZ0V4cG9zZUN5Y2xlQ291bnQ9Z2xvYmFsLnRlc3RpbmdFeHBvc2VDeWNsZUNvdW50LGhhc09ic2VydmU9ZGV0ZWN0T2JqZWN0T2JzZXJ2ZSgpLGhhc0V2YWw9ZGV0ZWN0RXZhbCgpLG51bWJlcklzTmFOPWdsb2JhbC5OdW1iZXIuaXNOYU58fGZ1bmN0aW9uKGEpe3JldHVybiJudW1iZXIiPT10eXBlb2YgYSYmZ2xvYmFsLmlzTmFOKGEpfSxjcmVhdGVPYmplY3Q9Il9fcHJvdG9fXyJpbnt9P2Z1bmN0aW9uKGEpe3JldHVybiBhfTpmdW5jdGlvbihhKXt2YXIgYj1hLl9fcHJvdG9fXztpZighYilyZXR1cm4gYTt2YXIgYz1PYmplY3QuY3JlYXRlKGIpO3JldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhhKS5mb3JFYWNoKGZ1bmN0aW9uKGIpe09iamVjdC5kZWZpbmVQcm9wZXJ0eShjLGIsT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihhLGIpKX0pLGN9LGlkZW50U3RhcnQ9IlskX2EtekEtWl0iLGlkZW50UGFydD0iWyRfYS16QS1aMC05XSIsaWRlbnRSZWdFeHA9bmV3IFJlZ0V4cCgiXiIraWRlbnRTdGFydCsiKyIraWRlbnRQYXJ0KyIqJCIpLHBhdGhTdGF0ZU1hY2hpbmU9e2JlZm9yZVBhdGg6e3dzOlsiYmVmb3JlUGF0aCJdLGlkZW50OlsiaW5JZGVudCIsImFwcGVuZCJdLCJbIjpbImJlZm9yZUVsZW1lbnQiXSxlb2Y6WyJhZnRlclBhdGgiXX0saW5QYXRoOnt3czpbImluUGF0aCJdLCIuIjpbImJlZm9yZUlkZW50Il0sIlsiOlsiYmVmb3JlRWxlbWVudCJdLGVvZjpbImFmdGVyUGF0aCJdfSxiZWZvcmVJZGVudDp7d3M6WyJiZWZvcmVJZGVudCJdLGlkZW50OlsiaW5JZGVudCIsImFwcGVuZCJdfSxpbklkZW50OntpZGVudDpbImluSWRlbnQiLCJhcHBlbmQiXSwwOlsiaW5JZGVudCIsImFwcGVuZCJdLG51bWJlcjpbImluSWRlbnQiLCJhcHBlbmQiXSx3czpbImluUGF0aCIsInB1c2giXSwiLiI6WyJiZWZvcmVJZGVudCIsInB1c2giXSwiWyI6WyJiZWZvcmVFbGVtZW50IiwicHVzaCJdLGVvZjpbImFmdGVyUGF0aCIsInB1c2giXX0sYmVmb3JlRWxlbWVudDp7d3M6WyJiZWZvcmVFbGVtZW50Il0sMDpbImFmdGVyWmVybyIsImFwcGVuZCJdLG51bWJlcjpbImluSW5kZXgiLCJhcHBlbmQiXSwiJyI6WyJpblNpbmdsZVF1b3RlIiwiYXBwZW5kIiwiIl0sJyInOlsiaW5Eb3VibGVRdW90ZSIsImFwcGVuZCIsIiJdfSxhZnRlclplcm86e3dzOlsiYWZ0ZXJFbGVtZW50IiwicHVzaCJdLCJdIjpbImluUGF0aCIsInB1c2giXX0saW5JbmRleDp7MDpbImluSW5kZXgiLCJhcHBlbmQiXSxudW1iZXI6WyJpbkluZGV4IiwiYXBwZW5kIl0sd3M6WyJhZnRlckVsZW1lbnQiXSwiXSI6WyJpblBhdGgiLCJwdXNoIl19LGluU2luZ2xlUXVvdGU6eyInIjpbImFmdGVyRWxlbWVudCJdLGVvZjpbImVycm9yIl0sImVsc2UiOlsiaW5TaW5nbGVRdW90ZSIsImFwcGVuZCJdfSxpbkRvdWJsZVF1b3RlOnsnIic6WyJhZnRlckVsZW1lbnQiXSxlb2Y6WyJlcnJvciJdLCJlbHNlIjpbImluRG91YmxlUXVvdGUiLCJhcHBlbmQiXX0sYWZ0ZXJFbGVtZW50Ont3czpbImFmdGVyRWxlbWVudCJdLCJdIjpbImluUGF0aCIsInB1c2giXX19LGNvbnN0cnVjdG9ySXNQcml2YXRlPXt9LHBhdGhDYWNoZT17fTtQYXRoLmdldD1nZXRQYXRoLFBhdGgucHJvdG90eXBlPWNyZWF0ZU9iamVjdCh7X19wcm90b19fOltdLHZhbGlkOiEwLHRvU3RyaW5nOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPSIiLGI9MDtiPHRoaXMubGVuZ3RoO2IrKyl7dmFyIGM9dGhpc1tiXTthKz1pc0lkZW50KGMpP2I/Ii4iK2M6Yzpmb3JtYXRBY2Nlc3NvcihjKX1yZXR1cm4gYX0sZ2V0VmFsdWVGcm9tOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0wO2I8dGhpcy5sZW5ndGg7YisrKXtpZihudWxsPT1hKXJldHVybjthPWFbdGhpc1tiXV19cmV0dXJuIGF9LGl0ZXJhdGVPYmplY3RzOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTA7Yzx0aGlzLmxlbmd0aDtjKyspe2lmKGMmJihhPWFbdGhpc1tjLTFdXSksIWlzT2JqZWN0KGEpKXJldHVybjtiKGEsdGhpc1swXSl9fSxjb21waWxlZEdldFZhbHVlRnJvbUZuOmZ1bmN0aW9uKCl7dmFyIGE9IiIsYj0ib2JqIjthKz0iaWYgKG9iaiAhPSBudWxsIjtmb3IodmFyIGMsZD0wO2Q8dGhpcy5sZW5ndGgtMTtkKyspYz10aGlzW2RdLGIrPWlzSWRlbnQoYyk/Ii4iK2M6Zm9ybWF0QWNjZXNzb3IoYyksYSs9IiAmJlxuICAgICAiK2IrIiAhPSBudWxsIjthKz0iKVxuIjt2YXIgYz10aGlzW2RdO3JldHVybiBiKz1pc0lkZW50KGMpPyIuIitjOmZvcm1hdEFjY2Vzc29yKGMpLGErPSIgIHJldHVybiAiK2IrIjtcbmVsc2VcbiAgcmV0dXJuIHVuZGVmaW5lZDsiLG5ldyBGdW5jdGlvbigib2JqIixhKX0sc2V0VmFsdWVGcm9tOmZ1bmN0aW9uKGEsYil7aWYoIXRoaXMubGVuZ3RoKXJldHVybiExO2Zvcih2YXIgYz0wO2M8dGhpcy5sZW5ndGgtMTtjKyspe2lmKCFpc09iamVjdChhKSlyZXR1cm4hMTthPWFbdGhpc1tjXV19cmV0dXJuIGlzT2JqZWN0KGEpPyhhW3RoaXNbY11dPWIsITApOiExfX0pO3ZhciBpbnZhbGlkUGF0aD1uZXcgUGF0aCgiIixjb25zdHJ1Y3RvcklzUHJpdmF0ZSk7aW52YWxpZFBhdGgudmFsaWQ9ITEsaW52YWxpZFBhdGguZ2V0VmFsdWVGcm9tPWludmFsaWRQYXRoLnNldFZhbHVlRnJvbT1mdW5jdGlvbigpe307dmFyIE1BWF9ESVJUWV9DSEVDS19DWUNMRVM9MWUzLGVvbVRhc2tzPVtdLHJ1bkVPTT1oYXNPYnNlcnZlP2Z1bmN0aW9uKCl7dmFyIGE9e3BpbmdQb25nOiEwfSxiPSExO3JldHVybiBPYmplY3Qub2JzZXJ2ZShhLGZ1bmN0aW9uKCl7cnVuRU9NVGFza3MoKSxiPSExfSksZnVuY3Rpb24oYyl7ZW9tVGFza3MucHVzaChjKSxifHwoYj0hMCxhLnBpbmdQb25nPSFhLnBpbmdQb25nKX19KCk6ZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oYSl7ZW9tVGFza3MucHVzaChhKX19KCksb2JzZXJ2ZWRPYmplY3RDYWNoZT1bXSxvYnNlcnZlZFNldENhY2hlPVtdLGxhc3RPYnNlcnZlZFNldCxVTk9QRU5FRD0wLE9QRU5FRD0xLENMT1NFRD0yLFJFU0VUVElORz0zLG5leHRPYnNlcnZlcklkPTE7T2JzZXJ2ZXIucHJvdG90eXBlPXtvcGVuOmZ1bmN0aW9uKGEsYil7aWYodGhpcy5zdGF0ZV8hPVVOT1BFTkVEKXRocm93IEVycm9yKCJPYnNlcnZlciBoYXMgYWxyZWFkeSBiZWVuIG9wZW5lZC4iKTtyZXR1cm4gYWRkVG9BbGwodGhpcyksdGhpcy5jYWxsYmFja189YSx0aGlzLnRhcmdldF89Yix0aGlzLmNvbm5lY3RfKCksdGhpcy5zdGF0ZV89T1BFTkVELHRoaXMudmFsdWVffSxjbG9zZTpmdW5jdGlvbigpe3RoaXMuc3RhdGVfPT1PUEVORUQmJihyZW1vdmVGcm9tQWxsKHRoaXMpLHRoaXMuZGlzY29ubmVjdF8oKSx0aGlzLnZhbHVlXz12b2lkIDAsdGhpcy5jYWxsYmFja189dm9pZCAwLHRoaXMudGFyZ2V0Xz12b2lkIDAsdGhpcy5zdGF0ZV89Q0xPU0VEKX0sZGVsaXZlcjpmdW5jdGlvbigpe3RoaXMuc3RhdGVfPT1PUEVORUQmJmRpcnR5Q2hlY2sodGhpcyl9LHJlcG9ydF86ZnVuY3Rpb24oYSl7dHJ5e3RoaXMuY2FsbGJhY2tfLmFwcGx5KHRoaXMudGFyZ2V0XyxhKX1jYXRjaChiKXtPYnNlcnZlci5fZXJyb3JUaHJvd25EdXJpbmdDYWxsYmFjaz0hMCxjb25zb2xlLmVycm9yKCJFeGNlcHRpb24gY2F1Z2h0IGR1cmluZyBvYnNlcnZlciBjYWxsYmFjazogIisoYi5zdGFja3x8YikpfX0sZGlzY2FyZENoYW5nZXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jaGVja18odm9pZCAwLCEwKSx0aGlzLnZhbHVlX319O3ZhciBjb2xsZWN0T2JzZXJ2ZXJzPSFoYXNPYnNlcnZlLGFsbE9ic2VydmVycztPYnNlcnZlci5fYWxsT2JzZXJ2ZXJzQ291bnQ9MCxjb2xsZWN0T2JzZXJ2ZXJzJiYoYWxsT2JzZXJ2ZXJzPVtdKTt2YXIgcnVubmluZ01pY3JvdGFza0NoZWNrcG9pbnQ9ITEsaGFzRGVidWdGb3JjZUZ1bGxEZWxpdmVyeT1oYXNPYnNlcnZlJiZoYXNFdmFsJiZmdW5jdGlvbigpe3RyeXtyZXR1cm4gZXZhbCgiJVJ1bk1pY3JvdGFza3MoKSIpLCEwfWNhdGNoKGV4KXtyZXR1cm4hMX19KCk7Z2xvYmFsLlBsYXRmb3JtPWdsb2JhbC5QbGF0Zm9ybXx8e30sZ2xvYmFsLlBsYXRmb3JtLnBlcmZvcm1NaWNyb3Rhc2tDaGVja3BvaW50PWZ1bmN0aW9uKCl7aWYoIXJ1bm5pbmdNaWNyb3Rhc2tDaGVja3BvaW50KXtpZihoYXNEZWJ1Z0ZvcmNlRnVsbERlbGl2ZXJ5KXJldHVybiB2b2lkIGV2YWwoIiVSdW5NaWNyb3Rhc2tzKCkiKTtpZihjb2xsZWN0T2JzZXJ2ZXJzKXtydW5uaW5nTWljcm90YXNrQ2hlY2twb2ludD0hMDt2YXIgY3ljbGVzPTAsYW55Q2hhbmdlZCx0b0NoZWNrO2Rve2N5Y2xlcysrLHRvQ2hlY2s9YWxsT2JzZXJ2ZXJzLGFsbE9ic2VydmVycz1bXSxhbnlDaGFuZ2VkPSExO2Zvcih2YXIgaT0wO2k8dG9DaGVjay5sZW5ndGg7aSsrKXt2YXIgb2JzZXJ2ZXI9dG9DaGVja1tpXTtvYnNlcnZlci5zdGF0ZV89PU9QRU5FRCYmKG9ic2VydmVyLmNoZWNrXygpJiYoYW55Q2hhbmdlZD0hMCksYWxsT2JzZXJ2ZXJzLnB1c2gob2JzZXJ2ZXIpKX1ydW5FT01UYXNrcygpJiYoYW55Q2hhbmdlZD0hMCl9d2hpbGUoTUFYX0RJUlRZX0NIRUNLX0NZQ0xFUz5jeWNsZXMmJmFueUNoYW5nZWQpO3Rlc3RpbmdFeHBvc2VDeWNsZUNvdW50JiYoZ2xvYmFsLmRpcnR5Q2hlY2tDeWNsZUNvdW50PWN5Y2xlcykscnVubmluZ01pY3JvdGFza0NoZWNrcG9pbnQ9ITF9fX0sY29sbGVjdE9ic2VydmVycyYmKGdsb2JhbC5QbGF0Zm9ybS5jbGVhck9ic2VydmVycz1mdW5jdGlvbigpe2FsbE9ic2VydmVycz1bXX0pLE9iamVjdE9ic2VydmVyLnByb3RvdHlwZT1jcmVhdGVPYmplY3Qoe19fcHJvdG9fXzpPYnNlcnZlci5wcm90b3R5cGUsYXJyYXlPYnNlcnZlOiExLGNvbm5lY3RfOmZ1bmN0aW9uKCl7aGFzT2JzZXJ2ZT90aGlzLmRpcmVjdE9ic2VydmVyXz1nZXRPYnNlcnZlZE9iamVjdCh0aGlzLHRoaXMudmFsdWVfLHRoaXMuYXJyYXlPYnNlcnZlKTp0aGlzLm9sZE9iamVjdF89dGhpcy5jb3B5T2JqZWN0KHRoaXMudmFsdWVfKX0sY29weU9iamVjdDpmdW5jdGlvbihhKXt2YXIgYj1BcnJheS5pc0FycmF5KGEpP1tdOnt9O2Zvcih2YXIgYyBpbiBhKWJbY109YVtjXTtyZXR1cm4gQXJyYXkuaXNBcnJheShhKSYmKGIubGVuZ3RoPWEubGVuZ3RoKSxifSxjaGVja186ZnVuY3Rpb24oYSl7dmFyIGIsYztpZihoYXNPYnNlcnZlKXtpZighYSlyZXR1cm4hMTtjPXt9LGI9ZGlmZk9iamVjdEZyb21DaGFuZ2VSZWNvcmRzKHRoaXMudmFsdWVfLGEsYyl9ZWxzZSBjPXRoaXMub2xkT2JqZWN0XyxiPWRpZmZPYmplY3RGcm9tT2xkT2JqZWN0KHRoaXMudmFsdWVfLHRoaXMub2xkT2JqZWN0Xyk7cmV0dXJuIGRpZmZJc0VtcHR5KGIpPyExOihoYXNPYnNlcnZlfHwodGhpcy5vbGRPYmplY3RfPXRoaXMuY29weU9iamVjdCh0aGlzLnZhbHVlXykpLHRoaXMucmVwb3J0XyhbYi5hZGRlZHx8e30sYi5yZW1vdmVkfHx7fSxiLmNoYW5nZWR8fHt9LGZ1bmN0aW9uKGEpe3JldHVybiBjW2FdfV0pLCEwKX0sZGlzY29ubmVjdF86ZnVuY3Rpb24oKXtoYXNPYnNlcnZlPyh0aGlzLmRpcmVjdE9ic2VydmVyXy5jbG9zZSgpLHRoaXMuZGlyZWN0T2JzZXJ2ZXJfPXZvaWQgMCk6dGhpcy5vbGRPYmplY3RfPXZvaWQgMH0sZGVsaXZlcjpmdW5jdGlvbigpe3RoaXMuc3RhdGVfPT1PUEVORUQmJihoYXNPYnNlcnZlP3RoaXMuZGlyZWN0T2JzZXJ2ZXJfLmRlbGl2ZXIoITEpOmRpcnR5Q2hlY2sodGhpcykpfSxkaXNjYXJkQ2hhbmdlczpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRpcmVjdE9ic2VydmVyXz90aGlzLmRpcmVjdE9ic2VydmVyXy5kZWxpdmVyKCEwKTp0aGlzLm9sZE9iamVjdF89dGhpcy5jb3B5T2JqZWN0KHRoaXMudmFsdWVfKSx0aGlzLnZhbHVlX319KSxBcnJheU9ic2VydmVyLnByb3RvdHlwZT1jcmVhdGVPYmplY3Qoe19fcHJvdG9fXzpPYmplY3RPYnNlcnZlci5wcm90b3R5cGUsYXJyYXlPYnNlcnZlOiEwLGNvcHlPYmplY3Q6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuc2xpY2UoKX0sY2hlY2tfOmZ1bmN0aW9uKGEpe3ZhciBiO2lmKGhhc09ic2VydmUpe2lmKCFhKXJldHVybiExO2I9cHJvamVjdEFycmF5U3BsaWNlcyh0aGlzLnZhbHVlXyxhKX1lbHNlIGI9Y2FsY1NwbGljZXModGhpcy52YWx1ZV8sMCx0aGlzLnZhbHVlXy5sZW5ndGgsdGhpcy5vbGRPYmplY3RfLDAsdGhpcy5vbGRPYmplY3RfLmxlbmd0aCk7cmV0dXJuIGImJmIubGVuZ3RoPyhoYXNPYnNlcnZlfHwodGhpcy5vbGRPYmplY3RfPXRoaXMuY29weU9iamVjdCh0aGlzLnZhbHVlXykpLHRoaXMucmVwb3J0XyhbYl0pLCEwKTohMX19KSxBcnJheU9ic2VydmVyLmFwcGx5U3BsaWNlcz1mdW5jdGlvbihhLGIsYyl7Yy5mb3JFYWNoKGZ1bmN0aW9uKGMpe2Zvcih2YXIgZD1bYy5pbmRleCxjLnJlbW92ZWQubGVuZ3RoXSxlPWMuaW5kZXg7ZTxjLmluZGV4K2MuYWRkZWRDb3VudDspZC5wdXNoKGJbZV0pLGUrKztBcnJheS5wcm90b3R5cGUuc3BsaWNlLmFwcGx5KGEsZCl9KX0sUGF0aE9ic2VydmVyLnByb3RvdHlwZT1jcmVhdGVPYmplY3Qoe19fcHJvdG9fXzpPYnNlcnZlci5wcm90b3R5cGUsZ2V0IHBhdGgoKXtyZXR1cm4gdGhpcy5wYXRoX30sY29ubmVjdF86ZnVuY3Rpb24oKXtoYXNPYnNlcnZlJiYodGhpcy5kaXJlY3RPYnNlcnZlcl89Z2V0T2JzZXJ2ZWRTZXQodGhpcyx0aGlzLm9iamVjdF8pKSx0aGlzLmNoZWNrXyh2b2lkIDAsITApfSxkaXNjb25uZWN0XzpmdW5jdGlvbigpe3RoaXMudmFsdWVfPXZvaWQgMCx0aGlzLmRpcmVjdE9ic2VydmVyXyYmKHRoaXMuZGlyZWN0T2JzZXJ2ZXJfLmNsb3NlKHRoaXMpLHRoaXMuZGlyZWN0T2JzZXJ2ZXJfPXZvaWQgMCl9LGl0ZXJhdGVPYmplY3RzXzpmdW5jdGlvbihhKXt0aGlzLnBhdGhfLml0ZXJhdGVPYmplY3RzKHRoaXMub2JqZWN0XyxhKX0sY2hlY2tfOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy52YWx1ZV87cmV0dXJuIHRoaXMudmFsdWVfPXRoaXMucGF0aF8uZ2V0VmFsdWVGcm9tKHRoaXMub2JqZWN0XyksYnx8YXJlU2FtZVZhbHVlKHRoaXMudmFsdWVfLGMpPyExOih0aGlzLnJlcG9ydF8oW3RoaXMudmFsdWVfLGMsdGhpc10pLCEwKX0sc2V0VmFsdWU6ZnVuY3Rpb24oYSl7dGhpcy5wYXRoXyYmdGhpcy5wYXRoXy5zZXRWYWx1ZUZyb20odGhpcy5vYmplY3RfLGEpfX0pO3ZhciBvYnNlcnZlclNlbnRpbmVsPXt9O0NvbXBvdW5kT2JzZXJ2ZXIucHJvdG90eXBlPWNyZWF0ZU9iamVjdCh7X19wcm90b19fOk9ic2VydmVyLnByb3RvdHlwZSxjb25uZWN0XzpmdW5jdGlvbigpe2lmKGhhc09ic2VydmUpe2Zvcih2YXIgYSxiPSExLGM9MDtjPHRoaXMub2JzZXJ2ZWRfLmxlbmd0aDtjKz0yKWlmKGE9dGhpcy5vYnNlcnZlZF9bY10sYSE9PW9ic2VydmVyU2VudGluZWwpe2I9ITA7YnJlYWt9YiYmKHRoaXMuZGlyZWN0T2JzZXJ2ZXJfPWdldE9ic2VydmVkU2V0KHRoaXMsYSkpfXRoaXMuY2hlY2tfKHZvaWQgMCwhdGhpcy5yZXBvcnRDaGFuZ2VzT25PcGVuXyl9LGRpc2Nvbm5lY3RfOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPTA7YTx0aGlzLm9ic2VydmVkXy5sZW5ndGg7YSs9Mil0aGlzLm9ic2VydmVkX1thXT09PW9ic2VydmVyU2VudGluZWwmJnRoaXMub2JzZXJ2ZWRfW2ErMV0uY2xvc2UoKTt0aGlzLm9ic2VydmVkXy5sZW5ndGg9MCx0aGlzLnZhbHVlXy5sZW5ndGg9MCx0aGlzLmRpcmVjdE9ic2VydmVyXyYmKHRoaXMuZGlyZWN0T2JzZXJ2ZXJfLmNsb3NlKHRoaXMpLHRoaXMuZGlyZWN0T2JzZXJ2ZXJfPXZvaWQgMCl9LGFkZFBhdGg6ZnVuY3Rpb24oYSxiKXtpZih0aGlzLnN0YXRlXyE9VU5PUEVORUQmJnRoaXMuc3RhdGVfIT1SRVNFVFRJTkcpdGhyb3cgRXJyb3IoIkNhbm5vdCBhZGQgcGF0aHMgb25jZSBzdGFydGVkLiIpO3ZhciBiPWdldFBhdGgoYik7aWYodGhpcy5vYnNlcnZlZF8ucHVzaChhLGIpLHRoaXMucmVwb3J0Q2hhbmdlc09uT3Blbl8pe3ZhciBjPXRoaXMub2JzZXJ2ZWRfLmxlbmd0aC8yLTE7dGhpcy52YWx1ZV9bY109Yi5nZXRWYWx1ZUZyb20oYSl9fSxhZGRPYnNlcnZlcjpmdW5jdGlvbihhKXtpZih0aGlzLnN0YXRlXyE9VU5PUEVORUQmJnRoaXMuc3RhdGVfIT1SRVNFVFRJTkcpdGhyb3cgRXJyb3IoIkNhbm5vdCBhZGQgb2JzZXJ2ZXJzIG9uY2Ugc3RhcnRlZC4iKTtpZih0aGlzLm9ic2VydmVkXy5wdXNoKG9ic2VydmVyU2VudGluZWwsYSksdGhpcy5yZXBvcnRDaGFuZ2VzT25PcGVuXyl7dmFyIGI9dGhpcy5vYnNlcnZlZF8ubGVuZ3RoLzItMTt0aGlzLnZhbHVlX1tiXT1hLm9wZW4odGhpcy5kZWxpdmVyLHRoaXMpfX0sc3RhcnRSZXNldDpmdW5jdGlvbigpe2lmKHRoaXMuc3RhdGVfIT1PUEVORUQpdGhyb3cgRXJyb3IoIkNhbiBvbmx5IHJlc2V0IHdoaWxlIG9wZW4iKTt0aGlzLnN0YXRlXz1SRVNFVFRJTkcsdGhpcy5kaXNjb25uZWN0XygpfSxmaW5pc2hSZXNldDpmdW5jdGlvbigpe2lmKHRoaXMuc3RhdGVfIT1SRVNFVFRJTkcpdGhyb3cgRXJyb3IoIkNhbiBvbmx5IGZpbmlzaFJlc2V0IGFmdGVyIHN0YXJ0UmVzZXQiKTtyZXR1cm4gdGhpcy5zdGF0ZV89T1BFTkVELHRoaXMuY29ubmVjdF8oKSx0aGlzLnZhbHVlX30saXRlcmF0ZU9iamVjdHNfOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYixjPTA7Yzx0aGlzLm9ic2VydmVkXy5sZW5ndGg7Yys9MiliPXRoaXMub2JzZXJ2ZWRfW2NdLGIhPT1vYnNlcnZlclNlbnRpbmVsJiZ0aGlzLm9ic2VydmVkX1tjKzFdLml0ZXJhdGVPYmplY3RzKGIsYSl9LGNoZWNrXzpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYyxkPTA7ZDx0aGlzLm9ic2VydmVkXy5sZW5ndGg7ZCs9Mil7dmFyIGUsZj10aGlzLm9ic2VydmVkX1tkXSxnPXRoaXMub2JzZXJ2ZWRfW2QrMV07aWYoZj09PW9ic2VydmVyU2VudGluZWwpe3ZhciBoPWc7ZT10aGlzLnN0YXRlXz09PVVOT1BFTkVEP2gub3Blbih0aGlzLmRlbGl2ZXIsdGhpcyk6aC5kaXNjYXJkQ2hhbmdlcygpfWVsc2UgZT1nLmdldFZhbHVlRnJvbShmKTtiP3RoaXMudmFsdWVfW2QvMl09ZTphcmVTYW1lVmFsdWUoZSx0aGlzLnZhbHVlX1tkLzJdKXx8KGM9Y3x8W10sY1tkLzJdPXRoaXMudmFsdWVfW2QvMl0sdGhpcy52YWx1ZV9bZC8yXT1lKX1yZXR1cm4gYz8odGhpcy5yZXBvcnRfKFt0aGlzLnZhbHVlXyxjLHRoaXMub2JzZXJ2ZWRfXSksITApOiExfX0pLE9ic2VydmVyVHJhbnNmb3JtLnByb3RvdHlwZT17b3BlbjpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLmNhbGxiYWNrXz1hLHRoaXMudGFyZ2V0Xz1iLHRoaXMudmFsdWVfPXRoaXMuZ2V0VmFsdWVGbl8odGhpcy5vYnNlcnZhYmxlXy5vcGVuKHRoaXMub2JzZXJ2ZWRDYWxsYmFja18sdGhpcykpLHRoaXMudmFsdWVffSxvYnNlcnZlZENhbGxiYWNrXzpmdW5jdGlvbihhKXtpZihhPXRoaXMuZ2V0VmFsdWVGbl8oYSksIWFyZVNhbWVWYWx1ZShhLHRoaXMudmFsdWVfKSl7dmFyIGI9dGhpcy52YWx1ZV87dGhpcy52YWx1ZV89YSx0aGlzLmNhbGxiYWNrXy5jYWxsKHRoaXMudGFyZ2V0Xyx0aGlzLnZhbHVlXyxiKX19LGRpc2NhcmRDaGFuZ2VzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudmFsdWVfPXRoaXMuZ2V0VmFsdWVGbl8odGhpcy5vYnNlcnZhYmxlXy5kaXNjYXJkQ2hhbmdlcygpKSx0aGlzLnZhbHVlX30sZGVsaXZlcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLm9ic2VydmFibGVfLmRlbGl2ZXIoKX0sc2V0VmFsdWU6ZnVuY3Rpb24oYSl7cmV0dXJuIGE9dGhpcy5zZXRWYWx1ZUZuXyhhKSwhdGhpcy5kb250UGFzc1Rocm91Z2hTZXRfJiZ0aGlzLm9ic2VydmFibGVfLnNldFZhbHVlP3RoaXMub2JzZXJ2YWJsZV8uc2V0VmFsdWUoYSk6dm9pZCAwfSxjbG9zZTpmdW5jdGlvbigpe3RoaXMub2JzZXJ2YWJsZV8mJnRoaXMub2JzZXJ2YWJsZV8uY2xvc2UoKSx0aGlzLmNhbGxiYWNrXz12b2lkIDAsdGhpcy50YXJnZXRfPXZvaWQgMCx0aGlzLm9ic2VydmFibGVfPXZvaWQgMCx0aGlzLnZhbHVlXz12b2lkIDAsdGhpcy5nZXRWYWx1ZUZuXz12b2lkIDAsdGhpcy5zZXRWYWx1ZUZuXz12b2lkIDB9fTt2YXIgZXhwZWN0ZWRSZWNvcmRUeXBlcz17YWRkOiEwLHVwZGF0ZTohMCwiZGVsZXRlIjohMH0sRURJVF9MRUFWRT0wLEVESVRfVVBEQVRFPTEsRURJVF9BREQ9MixFRElUX0RFTEVURT0zO0FycmF5U3BsaWNlLnByb3RvdHlwZT17Y2FsY0VkaXREaXN0YW5jZXM6ZnVuY3Rpb24oYSxiLGMsZCxlLGYpe2Zvcih2YXIgZz1mLWUrMSxoPWMtYisxLGk9bmV3IEFycmF5KGcpLGo9MDtnPmo7aisrKWlbal09bmV3IEFycmF5KGgpLGlbal1bMF09ajtmb3IodmFyIGs9MDtoPms7aysrKWlbMF1ba109aztmb3IodmFyIGo9MTtnPmo7aisrKWZvcih2YXIgaz0xO2g+aztrKyspaWYodGhpcy5lcXVhbHMoYVtiK2stMV0sZFtlK2otMV0pKWlbal1ba109aVtqLTFdW2stMV07ZWxzZXt2YXIgbD1pW2otMV1ba10rMSxtPWlbal1bay0xXSsxO2lbal1ba109bT5sP2w6bX1yZXR1cm4gaX0sc3BsaWNlT3BlcmF0aW9uc0Zyb21FZGl0RGlzdGFuY2VzOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1hLmxlbmd0aC0xLGM9YVswXS5sZW5ndGgtMSxkPWFbYl1bY10sZT1bXTtiPjB8fGM+MDspaWYoMCE9YilpZigwIT1jKXt2YXIgZixnPWFbYi0xXVtjLTFdLGg9YVtiLTFdW2NdLGk9YVtiXVtjLTFdO2Y9aT5oP2c+aD9oOmc6Zz5pP2k6ZyxmPT1nPyhnPT1kP2UucHVzaChFRElUX0xFQVZFKTooZS5wdXNoKEVESVRfVVBEQVRFKSxkPWcpLGItLSxjLS0pOmY9PWg/KGUucHVzaChFRElUX0RFTEVURSksYi0tLGQ9aCk6KGUucHVzaChFRElUX0FERCksYy0tLGQ9aSl9ZWxzZSBlLnB1c2goRURJVF9ERUxFVEUpLGItLTtlbHNlIGUucHVzaChFRElUX0FERCksYy0tO3JldHVybiBlLnJldmVyc2UoKSxlfSxjYWxjU3BsaWNlczpmdW5jdGlvbihhLGIsYyxkLGUsZil7dmFyIGc9MCxoPTAsaT1NYXRoLm1pbihjLWIsZi1lKTtpZigwPT1iJiYwPT1lJiYoZz10aGlzLnNoYXJlZFByZWZpeChhLGQsaSkpLGM9PWEubGVuZ3RoJiZmPT1kLmxlbmd0aCYmKGg9dGhpcy5zaGFyZWRTdWZmaXgoYSxkLGktZykpLGIrPWcsZSs9ZyxjLT1oLGYtPWgsYy1iPT0wJiZmLWU9PTApcmV0dXJuW107aWYoYj09Yyl7Zm9yKHZhciBqPW5ld1NwbGljZShiLFtdLDApO2Y+ZTspai5yZW1vdmVkLnB1c2goZFtlKytdKTtyZXR1cm5bal19aWYoZT09ZilyZXR1cm5bbmV3U3BsaWNlKGIsW10sYy1iKV07Zm9yKHZhciBrPXRoaXMuc3BsaWNlT3BlcmF0aW9uc0Zyb21FZGl0RGlzdGFuY2VzKHRoaXMuY2FsY0VkaXREaXN0YW5jZXMoYSxiLGMsZCxlLGYpKSxqPXZvaWQgMCxsPVtdLG09YixuPWUsbz0wO288ay5sZW5ndGg7bysrKXN3aXRjaChrW29dKXtjYXNlIEVESVRfTEVBVkU6aiYmKGwucHVzaChqKSxqPXZvaWQgMCksbSsrLG4rKzticmVhaztjYXNlIEVESVRfVVBEQVRFOmp8fChqPW5ld1NwbGljZShtLFtdLDApKSxqLmFkZGVkQ291bnQrKyxtKyssai5yZW1vdmVkLnB1c2goZFtuXSksbisrO2JyZWFrO2Nhc2UgRURJVF9BREQ6anx8KGo9bmV3U3BsaWNlKG0sW10sMCkpLGouYWRkZWRDb3VudCsrLG0rKzticmVhaztjYXNlIEVESVRfREVMRVRFOmp8fChqPW5ld1NwbGljZShtLFtdLDApKSxqLnJlbW92ZWQucHVzaChkW25dKSxuKyt9cmV0dXJuIGomJmwucHVzaChqKSxsfSxzaGFyZWRQcmVmaXg6ZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZD0wO2M+ZDtkKyspaWYoIXRoaXMuZXF1YWxzKGFbZF0sYltkXSkpcmV0dXJuIGQ7cmV0dXJuIGN9LHNoYXJlZFN1ZmZpeDpmdW5jdGlvbihhLGIsYyl7Zm9yKHZhciBkPWEubGVuZ3RoLGU9Yi5sZW5ndGgsZj0wO2M+ZiYmdGhpcy5lcXVhbHMoYVstLWRdLGJbLS1lXSk7KWYrKztyZXR1cm4gZn0sY2FsY3VsYXRlU3BsaWNlczpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLmNhbGNTcGxpY2VzKGEsMCxhLmxlbmd0aCxiLDAsYi5sZW5ndGgpfSxlcXVhbHM6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT09PWJ9fTt2YXIgYXJyYXlTcGxpY2U9bmV3IEFycmF5U3BsaWNlO2dsb2JhbC5PYnNlcnZlcj1PYnNlcnZlcixnbG9iYWwuT2JzZXJ2ZXIucnVuRU9NXz1ydW5FT00sZ2xvYmFsLk9ic2VydmVyLm9ic2VydmVyU2VudGluZWxfPW9ic2VydmVyU2VudGluZWwsZ2xvYmFsLk9ic2VydmVyLmhhc09iamVjdE9ic2VydmU9aGFzT2JzZXJ2ZSxnbG9iYWwuQXJyYXlPYnNlcnZlcj1BcnJheU9ic2VydmVyLGdsb2JhbC5BcnJheU9ic2VydmVyLmNhbGN1bGF0ZVNwbGljZXM9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYXJyYXlTcGxpY2UuY2FsY3VsYXRlU3BsaWNlcyhhLGIpfSxnbG9iYWwuQXJyYXlTcGxpY2U9QXJyYXlTcGxpY2UsZ2xvYmFsLk9iamVjdE9ic2VydmVyPU9iamVjdE9ic2VydmVyLGdsb2JhbC5QYXRoT2JzZXJ2ZXI9UGF0aE9ic2VydmVyLGdsb2JhbC5Db21wb3VuZE9ic2VydmVyPUNvbXBvdW5kT2JzZXJ2ZXIsZ2xvYmFsLlBhdGg9UGF0aCxnbG9iYWwuT2JzZXJ2ZXJUcmFuc2Zvcm09T2JzZXJ2ZXJUcmFuc2Zvcm19KCJ1bmRlZmluZWQiIT10eXBlb2YgZ2xvYmFsJiZnbG9iYWwmJiJ1bmRlZmluZWQiIT10eXBlb2YgbW9kdWxlJiZtb2R1bGU/Z2xvYmFsOnRoaXN8fHdpbmRvdyksZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYShhKXtmb3IoO2EucGFyZW50Tm9kZTspYT1hLnBhcmVudE5vZGU7cmV0dXJuImZ1bmN0aW9uIj09dHlwZW9mIGEuZ2V0RWxlbWVudEJ5SWQ/YTpudWxsfWZ1bmN0aW9uIGIoYSxiLGMpe3ZhciBkPWEuYmluZGluZ3NfO3JldHVybiBkfHwoZD1hLmJpbmRpbmdzXz17fSksZFtiXSYmY1tiXS5jbG9zZSgpLGRbYl09Y31mdW5jdGlvbiBjKGEsYixjKXtyZXR1cm4gY31mdW5jdGlvbiBkKGEpe3JldHVybiBudWxsPT1hPyIiOmF9ZnVuY3Rpb24gZShhLGIpe2EuZGF0YT1kKGIpfWZ1bmN0aW9uIGYoYSl7cmV0dXJuIGZ1bmN0aW9uKGIpe3JldHVybiBlKGEsYil9fWZ1bmN0aW9uIGcoYSxiLGMsZSl7cmV0dXJuIGM/dm9pZChlP2Euc2V0QXR0cmlidXRlKGIsIiIpOmEucmVtb3ZlQXR0cmlidXRlKGIpKTp2b2lkIGEuc2V0QXR0cmlidXRlKGIsZChlKSl9ZnVuY3Rpb24gaChhLGIsYyl7cmV0dXJuIGZ1bmN0aW9uKGQpe2coYSxiLGMsZCl9fWZ1bmN0aW9uIGkoYSl7c3dpdGNoKGEudHlwZSl7Y2FzZSJjaGVja2JveCI6cmV0dXJuIHU7Y2FzZSJyYWRpbyI6Y2FzZSJzZWxlY3QtbXVsdGlwbGUiOmNhc2Uic2VsZWN0LW9uZSI6cmV0dXJuImNoYW5nZSI7Y2FzZSJyYW5nZSI6aWYoL1RyaWRlbnR8TVNJRS8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSlyZXR1cm4iY2hhbmdlIjtkZWZhdWx0OnJldHVybiJpbnB1dCJ9fWZ1bmN0aW9uIGooYSxiLGMsZSl7YVtiXT0oZXx8ZCkoYyl9ZnVuY3Rpb24gayhhLGIsYyl7cmV0dXJuIGZ1bmN0aW9uKGQpe3JldHVybiBqKGEsYixkLGMpfX1mdW5jdGlvbiBsKCl7fWZ1bmN0aW9uIG0oYSxiLGMsZCl7ZnVuY3Rpb24gZSgpe2Muc2V0VmFsdWUoYVtiXSksYy5kaXNjYXJkQ2hhbmdlcygpLChkfHxsKShhKSxQbGF0Zm9ybS5wZXJmb3JtTWljcm90YXNrQ2hlY2twb2ludCgpfXZhciBmPWkoYSk7cmV0dXJuIGEuYWRkRXZlbnRMaXN0ZW5lcihmLGUpLHtjbG9zZTpmdW5jdGlvbigpe2EucmVtb3ZlRXZlbnRMaXN0ZW5lcihmLGUpLGMuY2xvc2UoKX0sb2JzZXJ2YWJsZV86Y319ZnVuY3Rpb24gbihhKXtyZXR1cm4gQm9vbGVhbihhKX1mdW5jdGlvbiBvKGIpe2lmKGIuZm9ybSlyZXR1cm4gcyhiLmZvcm0uZWxlbWVudHMsZnVuY3Rpb24oYSl7cmV0dXJuIGEhPWImJiJJTlBVVCI9PWEudGFnTmFtZSYmInJhZGlvIj09YS50eXBlJiZhLm5hbWU9PWIubmFtZX0pO3ZhciBjPWEoYik7aWYoIWMpcmV0dXJuW107dmFyIGQ9Yy5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dFt0eXBlPSJyYWRpbyJdW25hbWU9IicrYi5uYW1lKyciXScpO3JldHVybiBzKGQsZnVuY3Rpb24oYSl7cmV0dXJuIGEhPWImJiFhLmZvcm19KX1mdW5jdGlvbiBwKGEpeyJJTlBVVCI9PT1hLnRhZ05hbWUmJiJyYWRpbyI9PT1hLnR5cGUmJm8oYSkuZm9yRWFjaChmdW5jdGlvbihhKXt2YXIgYj1hLmJpbmRpbmdzXy5jaGVja2VkO2ImJmIub2JzZXJ2YWJsZV8uc2V0VmFsdWUoITEpfSl9ZnVuY3Rpb24gcShhLGIpe3ZhciBjLGUsZixnPWEucGFyZW50Tm9kZTtnIGluc3RhbmNlb2YgSFRNTFNlbGVjdEVsZW1lbnQmJmcuYmluZGluZ3NfJiZnLmJpbmRpbmdzXy52YWx1ZSYmKGM9ZyxlPWMuYmluZGluZ3NfLnZhbHVlLGY9Yy52YWx1ZSksYS52YWx1ZT1kKGIpLGMmJmMudmFsdWUhPWYmJihlLm9ic2VydmFibGVfLnNldFZhbHVlKGMudmFsdWUpLGUub2JzZXJ2YWJsZV8uZGlzY2FyZENoYW5nZXMoKSxQbGF0Zm9ybS5wZXJmb3JtTWljcm90YXNrQ2hlY2twb2ludCgpKX1mdW5jdGlvbiByKGEpe3JldHVybiBmdW5jdGlvbihiKXtxKGEsYil9fXZhciBzPUFycmF5LnByb3RvdHlwZS5maWx0ZXIuY2FsbC5iaW5kKEFycmF5LnByb3RvdHlwZS5maWx0ZXIpO05vZGUucHJvdG90eXBlLmJpbmQ9ZnVuY3Rpb24oYSxiKXtjb25zb2xlLmVycm9yKCJVbmhhbmRsZWQgYmluZGluZyB0byBOb2RlOiAiLHRoaXMsYSxiKX0sTm9kZS5wcm90b3R5cGUuYmluZEZpbmlzaGVkPWZ1bmN0aW9uKCl7fTt2YXIgdD1jO09iamVjdC5kZWZpbmVQcm9wZXJ0eShQbGF0Zm9ybSwiZW5hYmxlQmluZGluZ3NSZWZsZWN0aW9uIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHQ9PT1ifSxzZXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIHQ9YT9iOmMsYX0sY29uZmlndXJhYmxlOiEwfSksVGV4dC5wcm90b3R5cGUuYmluZD1mdW5jdGlvbihhLGIsYyl7aWYoInRleHRDb250ZW50IiE9PWEpcmV0dXJuIE5vZGUucHJvdG90eXBlLmJpbmQuY2FsbCh0aGlzLGEsYixjKTtpZihjKXJldHVybiBlKHRoaXMsYik7dmFyIGQ9YjtyZXR1cm4gZSh0aGlzLGQub3BlbihmKHRoaXMpKSksdCh0aGlzLGEsZCl9LEVsZW1lbnQucHJvdG90eXBlLmJpbmQ9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPSI/Ij09YVthLmxlbmd0aC0xXTtpZihkJiYodGhpcy5yZW1vdmVBdHRyaWJ1dGUoYSksYT1hLnNsaWNlKDAsLTEpKSxjKXJldHVybiBnKHRoaXMsYSxkLGIpO3ZhciBlPWI7cmV0dXJuIGcodGhpcyxhLGQsZS5vcGVuKGgodGhpcyxhLGQpKSksdCh0aGlzLGEsZSl9O3ZhciB1OyFmdW5jdGlvbigpe3ZhciBhPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpLGI9YS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbnB1dCIpKTtiLnNldEF0dHJpYnV0ZSgidHlwZSIsImNoZWNrYm94Iik7dmFyIGMsZD0wO2IuYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLGZ1bmN0aW9uKCl7ZCsrLGM9Y3x8ImNsaWNrIn0pLGIuYWRkRXZlbnRMaXN0ZW5lcigiY2hhbmdlIixmdW5jdGlvbigpe2QrKyxjPWN8fCJjaGFuZ2UifSk7dmFyIGU9ZG9jdW1lbnQuY3JlYXRlRXZlbnQoIk1vdXNlRXZlbnQiKTtlLmluaXRNb3VzZUV2ZW50KCJjbGljayIsITAsITAsd2luZG93LDAsMCwwLDAsMCwhMSwhMSwhMSwhMSwwLG51bGwpLGIuZGlzcGF0Y2hFdmVudChlKSx1PTE9PWQ/ImNoYW5nZSI6Y30oKSxIVE1MSW5wdXRFbGVtZW50LnByb3RvdHlwZS5iaW5kPWZ1bmN0aW9uKGEsYyxlKXtpZigidmFsdWUiIT09YSYmImNoZWNrZWQiIT09YSlyZXR1cm4gSFRNTEVsZW1lbnQucHJvdG90eXBlLmJpbmQuY2FsbCh0aGlzLGEsYyxlKTt0aGlzLnJlbW92ZUF0dHJpYnV0ZShhKTt2YXIgZj0iY2hlY2tlZCI9PWE/bjpkLGc9ImNoZWNrZWQiPT1hP3A6bDtpZihlKXJldHVybiBqKHRoaXMsYSxjLGYpO3ZhciBoPWMsaT1tKHRoaXMsYSxoLGcpO3JldHVybiBqKHRoaXMsYSxoLm9wZW4oayh0aGlzLGEsZikpLGYpLGIodGhpcyxhLGkpfSxIVE1MVGV4dEFyZWFFbGVtZW50LnByb3RvdHlwZS5iaW5kPWZ1bmN0aW9uKGEsYixjKXtpZigidmFsdWUiIT09YSlyZXR1cm4gSFRNTEVsZW1lbnQucHJvdG90eXBlLmJpbmQuY2FsbCh0aGlzLGEsYixjKTtpZih0aGlzLnJlbW92ZUF0dHJpYnV0ZSgidmFsdWUiKSxjKXJldHVybiBqKHRoaXMsInZhbHVlIixiKTt2YXIgZT1iLGY9bSh0aGlzLCJ2YWx1ZSIsZSk7cmV0dXJuIGoodGhpcywidmFsdWUiLGUub3BlbihrKHRoaXMsInZhbHVlIixkKSkpLHQodGhpcyxhLGYpfSxIVE1MT3B0aW9uRWxlbWVudC5wcm90b3R5cGUuYmluZD1mdW5jdGlvbihhLGIsYyl7aWYoInZhbHVlIiE9PWEpcmV0dXJuIEhUTUxFbGVtZW50LnByb3RvdHlwZS5iaW5kLmNhbGwodGhpcyxhLGIsYyk7aWYodGhpcy5yZW1vdmVBdHRyaWJ1dGUoInZhbHVlIiksYylyZXR1cm4gcSh0aGlzLGIpOwp2YXIgZD1iLGU9bSh0aGlzLCJ2YWx1ZSIsZCk7cmV0dXJuIHEodGhpcyxkLm9wZW4ocih0aGlzKSkpLHQodGhpcyxhLGUpfSxIVE1MU2VsZWN0RWxlbWVudC5wcm90b3R5cGUuYmluZD1mdW5jdGlvbihhLGMsZCl7aWYoInNlbGVjdGVkaW5kZXgiPT09YSYmKGE9InNlbGVjdGVkSW5kZXgiKSwic2VsZWN0ZWRJbmRleCIhPT1hJiYidmFsdWUiIT09YSlyZXR1cm4gSFRNTEVsZW1lbnQucHJvdG90eXBlLmJpbmQuY2FsbCh0aGlzLGEsYyxkKTtpZih0aGlzLnJlbW92ZUF0dHJpYnV0ZShhKSxkKXJldHVybiBqKHRoaXMsYSxjKTt2YXIgZT1jLGY9bSh0aGlzLGEsZSk7cmV0dXJuIGoodGhpcyxhLGUub3BlbihrKHRoaXMsYSkpKSxiKHRoaXMsYSxmKX19KHRoaXMpLGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBiKGEpe2lmKCFhKXRocm93IG5ldyBFcnJvcigiQXNzZXJ0aW9uIGZhaWxlZCIpfWZ1bmN0aW9uIGMoYSl7Zm9yKHZhciBiO2I9YS5wYXJlbnROb2RlOylhPWI7cmV0dXJuIGF9ZnVuY3Rpb24gZChhLGIpe2lmKGIpe2Zvcih2YXIgZCxlPSIjIitiOyFkJiYoYT1jKGEpLGEucHJvdG9Db250ZW50Xz9kPWEucHJvdG9Db250ZW50Xy5xdWVyeVNlbGVjdG9yKGUpOmEuZ2V0RWxlbWVudEJ5SWQmJihkPWEuZ2V0RWxlbWVudEJ5SWQoYikpLCFkJiZhLnRlbXBsYXRlQ3JlYXRvcl8pOylhPWEudGVtcGxhdGVDcmVhdG9yXztyZXR1cm4gZH19ZnVuY3Rpb24gZShhKXtyZXR1cm4idGVtcGxhdGUiPT1hLnRhZ05hbWUmJiJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI9PWEubmFtZXNwYWNlVVJJfWZ1bmN0aW9uIGYoYSl7cmV0dXJuIlRFTVBMQVRFIj09YS50YWdOYW1lJiYiaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCI9PWEubmFtZXNwYWNlVVJJfWZ1bmN0aW9uIGcoYSl7cmV0dXJuIEJvb2xlYW4oTFthLnRhZ05hbWVdJiZhLmhhc0F0dHJpYnV0ZSgidGVtcGxhdGUiKSl9ZnVuY3Rpb24gaChhKXtyZXR1cm4gdm9pZCAwPT09YS5pc1RlbXBsYXRlXyYmKGEuaXNUZW1wbGF0ZV89IlRFTVBMQVRFIj09YS50YWdOYW1lfHxnKGEpKSxhLmlzVGVtcGxhdGVffWZ1bmN0aW9uIGkoYSxiKXt2YXIgYz1hLnF1ZXJ5U2VsZWN0b3JBbGwoTik7aChhKSYmYihhKSxHKGMsYil9ZnVuY3Rpb24gaihhKXtmdW5jdGlvbiBiKGEpe0hUTUxUZW1wbGF0ZUVsZW1lbnQuZGVjb3JhdGUoYSl8fGooYS5jb250ZW50KX1pKGEsYil9ZnVuY3Rpb24gayhhLGIpe09iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGIpLmZvckVhY2goZnVuY3Rpb24oYyl7T2JqZWN0LmRlZmluZVByb3BlcnR5KGEsYyxPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGIsYykpfSl9ZnVuY3Rpb24gbChhKXt2YXIgYj1hLm93bmVyRG9jdW1lbnQ7aWYoIWIuZGVmYXVsdFZpZXcpcmV0dXJuIGI7dmFyIGM9Yi50ZW1wbGF0ZUNvbnRlbnRzT3duZXJfO2lmKCFjKXtmb3IoYz1iLmltcGxlbWVudGF0aW9uLmNyZWF0ZUhUTUxEb2N1bWVudCgiIik7Yy5sYXN0Q2hpbGQ7KWMucmVtb3ZlQ2hpbGQoYy5sYXN0Q2hpbGQpO2IudGVtcGxhdGVDb250ZW50c093bmVyXz1jfXJldHVybiBjfWZ1bmN0aW9uIG0oYSl7aWYoIWEuc3RhZ2luZ0RvY3VtZW50Xyl7dmFyIGI9YS5vd25lckRvY3VtZW50O2lmKCFiLnN0YWdpbmdEb2N1bWVudF8pe2Iuc3RhZ2luZ0RvY3VtZW50Xz1iLmltcGxlbWVudGF0aW9uLmNyZWF0ZUhUTUxEb2N1bWVudCgiIiksYi5zdGFnaW5nRG9jdW1lbnRfLmlzU3RhZ2luZ0RvY3VtZW50PSEwO3ZhciBjPWIuc3RhZ2luZ0RvY3VtZW50Xy5jcmVhdGVFbGVtZW50KCJiYXNlIik7Yy5ocmVmPWRvY3VtZW50LmJhc2VVUkksYi5zdGFnaW5nRG9jdW1lbnRfLmhlYWQuYXBwZW5kQ2hpbGQoYyksYi5zdGFnaW5nRG9jdW1lbnRfLnN0YWdpbmdEb2N1bWVudF89Yi5zdGFnaW5nRG9jdW1lbnRffWEuc3RhZ2luZ0RvY3VtZW50Xz1iLnN0YWdpbmdEb2N1bWVudF99cmV0dXJuIGEuc3RhZ2luZ0RvY3VtZW50X31mdW5jdGlvbiBuKGEpe3ZhciBiPWEub3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0ZW1wbGF0ZSIpO2EucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoYixhKTtmb3IodmFyIGM9YS5hdHRyaWJ1dGVzLGQ9Yy5sZW5ndGg7ZC0tPjA7KXt2YXIgZT1jW2RdO0tbZS5uYW1lXSYmKCJ0ZW1wbGF0ZSIhPT1lLm5hbWUmJmIuc2V0QXR0cmlidXRlKGUubmFtZSxlLnZhbHVlKSxhLnJlbW92ZUF0dHJpYnV0ZShlLm5hbWUpKX1yZXR1cm4gYn1mdW5jdGlvbiBvKGEpe3ZhciBiPWEub3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0ZW1wbGF0ZSIpO2EucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoYixhKTtmb3IodmFyIGM9YS5hdHRyaWJ1dGVzLGQ9Yy5sZW5ndGg7ZC0tPjA7KXt2YXIgZT1jW2RdO2Iuc2V0QXR0cmlidXRlKGUubmFtZSxlLnZhbHVlKSxhLnJlbW92ZUF0dHJpYnV0ZShlLm5hbWUpfXJldHVybiBhLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYSksYn1mdW5jdGlvbiBwKGEsYixjKXt2YXIgZD1hLmNvbnRlbnQ7aWYoYylyZXR1cm4gdm9pZCBkLmFwcGVuZENoaWxkKGIpO2Zvcih2YXIgZTtlPWIuZmlyc3RDaGlsZDspZC5hcHBlbmRDaGlsZChlKX1mdW5jdGlvbiBxKGEpe1A/YS5fX3Byb3RvX189SFRNTFRlbXBsYXRlRWxlbWVudC5wcm90b3R5cGU6ayhhLEhUTUxUZW1wbGF0ZUVsZW1lbnQucHJvdG90eXBlKX1mdW5jdGlvbiByKGEpe2Euc2V0TW9kZWxGbl98fChhLnNldE1vZGVsRm5fPWZ1bmN0aW9uKCl7YS5zZXRNb2RlbEZuU2NoZWR1bGVkXz0hMTt2YXIgYj16KGEsYS5kZWxlZ2F0ZV8mJmEuZGVsZWdhdGVfLnByZXBhcmVCaW5kaW5nKTt3KGEsYixhLm1vZGVsXyl9KSxhLnNldE1vZGVsRm5TY2hlZHVsZWRffHwoYS5zZXRNb2RlbEZuU2NoZWR1bGVkXz0hMCxPYnNlcnZlci5ydW5FT01fKGEuc2V0TW9kZWxGbl8pKX1mdW5jdGlvbiBzKGEsYixjLGQpe2lmKGEmJmEubGVuZ3RoKXtmb3IodmFyIGUsZj1hLmxlbmd0aCxnPTAsaD0wLGk9MCxqPSEwO2Y+aDspe3ZhciBnPWEuaW5kZXhPZigie3siLGgpLGs9YS5pbmRleE9mKCJbWyIsaCksbD0hMSxtPSJ9fSI7aWYoaz49MCYmKDA+Z3x8Zz5rKSYmKGc9ayxsPSEwLG09Il1dIiksaT0wPmc/LTE6YS5pbmRleE9mKG0sZysyKSwwPmkpe2lmKCFlKXJldHVybjtlLnB1c2goYS5zbGljZShoKSk7YnJlYWt9ZT1lfHxbXSxlLnB1c2goYS5zbGljZShoLGcpKTt2YXIgbj1hLnNsaWNlKGcrMixpKS50cmltKCk7ZS5wdXNoKGwpLGo9aiYmbDt2YXIgbz1kJiZkKG4sYixjKTtlLnB1c2gobnVsbD09bz9QYXRoLmdldChuKTpudWxsKSxlLnB1c2gobyksaD1pKzJ9cmV0dXJuIGg9PT1mJiZlLnB1c2goIiIpLGUuaGFzT25lUGF0aD01PT09ZS5sZW5ndGgsZS5pc1NpbXBsZVBhdGg9ZS5oYXNPbmVQYXRoJiYiIj09ZVswXSYmIiI9PWVbNF0sZS5vbmx5T25lVGltZT1qLGUuY29tYmluYXRvcj1mdW5jdGlvbihhKXtmb3IodmFyIGI9ZVswXSxjPTE7YzxlLmxlbmd0aDtjKz00KXt2YXIgZD1lLmhhc09uZVBhdGg/YTphWyhjLTEpLzRdO3ZvaWQgMCE9PWQmJihiKz1kKSxiKz1lW2MrM119cmV0dXJuIGJ9LGV9fWZ1bmN0aW9uIHQoYSxiLGMsZCl7aWYoYi5oYXNPbmVQYXRoKXt2YXIgZT1iWzNdLGY9ZT9lKGQsYywhMCk6YlsyXS5nZXRWYWx1ZUZyb20oZCk7cmV0dXJuIGIuaXNTaW1wbGVQYXRoP2Y6Yi5jb21iaW5hdG9yKGYpfWZvcih2YXIgZz1bXSxoPTE7aDxiLmxlbmd0aDtoKz00KXt2YXIgZT1iW2grMl07Z1soaC0xKS80XT1lP2UoZCxjKTpiW2grMV0uZ2V0VmFsdWVGcm9tKGQpfXJldHVybiBiLmNvbWJpbmF0b3IoZyl9ZnVuY3Rpb24gdShhLGIsYyxkKXt2YXIgZT1iWzNdLGY9ZT9lKGQsYywhMSk6bmV3IFBhdGhPYnNlcnZlcihkLGJbMl0pO3JldHVybiBiLmlzU2ltcGxlUGF0aD9mOm5ldyBPYnNlcnZlclRyYW5zZm9ybShmLGIuY29tYmluYXRvcil9ZnVuY3Rpb24gdihhLGIsYyxkKXtpZihiLm9ubHlPbmVUaW1lKXJldHVybiB0KGEsYixjLGQpO2lmKGIuaGFzT25lUGF0aClyZXR1cm4gdShhLGIsYyxkKTtmb3IodmFyIGU9bmV3IENvbXBvdW5kT2JzZXJ2ZXIsZj0xO2Y8Yi5sZW5ndGg7Zis9NCl7dmFyIGc9YltmXSxoPWJbZisyXTtpZihoKXt2YXIgaT1oKGQsYyxnKTtnP2UuYWRkUGF0aChpKTplLmFkZE9ic2VydmVyKGkpfWVsc2V7dmFyIGo9YltmKzFdO2c/ZS5hZGRQYXRoKGouZ2V0VmFsdWVGcm9tKGQpKTplLmFkZFBhdGgoZCxqKX19cmV0dXJuIG5ldyBPYnNlcnZlclRyYW5zZm9ybShlLGIuY29tYmluYXRvcil9ZnVuY3Rpb24gdyhhLGIsYyxkKXtmb3IodmFyIGU9MDtlPGIubGVuZ3RoO2UrPTIpe3ZhciBmPWJbZV0sZz1iW2UrMV0saD12KGYsZyxhLGMpLGk9YS5iaW5kKGYsaCxnLm9ubHlPbmVUaW1lKTtpJiZkJiZkLnB1c2goaSl9aWYoYS5iaW5kRmluaXNoZWQoKSxiLmlzVGVtcGxhdGUpe2EubW9kZWxfPWM7dmFyIGo9YS5wcm9jZXNzQmluZGluZ0RpcmVjdGl2ZXNfKGIpO2QmJmomJmQucHVzaChqKX19ZnVuY3Rpb24geChhLGIsYyl7dmFyIGQ9YS5nZXRBdHRyaWJ1dGUoYik7cmV0dXJuIHMoIiI9PWQ/Int7fX0iOmQsYixhLGMpfWZ1bmN0aW9uIHkoYSxjKXtiKGEpO2Zvcih2YXIgZD1bXSxlPTA7ZTxhLmF0dHJpYnV0ZXMubGVuZ3RoO2UrKyl7Zm9yKHZhciBmPWEuYXR0cmlidXRlc1tlXSxnPWYubmFtZSxpPWYudmFsdWU7Il8iPT09Z1swXTspZz1nLnN1YnN0cmluZygxKTtpZighaChhKXx8ZyE9PUomJmchPT1IJiZnIT09SSl7dmFyIGo9cyhpLGcsYSxjKTtqJiZkLnB1c2goZyxqKX19cmV0dXJuIGgoYSkmJihkLmlzVGVtcGxhdGU9ITAsZC5pZj14KGEsSixjKSxkLmJpbmQ9eChhLEgsYyksZC5yZXBlYXQ9eChhLEksYyksIWQuaWZ8fGQuYmluZHx8ZC5yZXBlYXR8fChkLmJpbmQ9cygie3t9fSIsSCxhLGMpKSksZH1mdW5jdGlvbiB6KGEsYil7aWYoYS5ub2RlVHlwZT09PU5vZGUuRUxFTUVOVF9OT0RFKXJldHVybiB5KGEsYik7aWYoYS5ub2RlVHlwZT09PU5vZGUuVEVYVF9OT0RFKXt2YXIgYz1zKGEuZGF0YSwidGV4dENvbnRlbnQiLGEsYik7aWYoYylyZXR1cm5bInRleHRDb250ZW50IixjXX1yZXR1cm5bXX1mdW5jdGlvbiBBKGEsYixjLGQsZSxmLGcpe2Zvcih2YXIgaD1iLmFwcGVuZENoaWxkKGMuaW1wb3J0Tm9kZShhLCExKSksaT0wLGo9YS5maXJzdENoaWxkO2o7aj1qLm5leHRTaWJsaW5nKUEoaixoLGMsZC5jaGlsZHJlbltpKytdLGUsZixnKTtyZXR1cm4gZC5pc1RlbXBsYXRlJiYoSFRNTFRlbXBsYXRlRWxlbWVudC5kZWNvcmF0ZShoLGEpLGYmJmguc2V0RGVsZWdhdGVfKGYpKSx3KGgsZCxlLGcpLGh9ZnVuY3Rpb24gQihhLGIpe3ZhciBjPXooYSxiKTtjLmNoaWxkcmVuPXt9O2Zvcih2YXIgZD0wLGU9YS5maXJzdENoaWxkO2U7ZT1lLm5leHRTaWJsaW5nKWMuY2hpbGRyZW5bZCsrXT1CKGUsYik7cmV0dXJuIGN9ZnVuY3Rpb24gQyhhKXt2YXIgYj1hLmlkXztyZXR1cm4gYnx8KGI9YS5pZF89UysrKSxifWZ1bmN0aW9uIEQoYSxiKXt2YXIgYz1DKGEpO2lmKGIpe3ZhciBkPWIuYmluZGluZ01hcHNbY107cmV0dXJuIGR8fChkPWIuYmluZGluZ01hcHNbY109QihhLGIucHJlcGFyZUJpbmRpbmcpfHxbXSksZH12YXIgZD1hLmJpbmRpbmdNYXBfO3JldHVybiBkfHwoZD1hLmJpbmRpbmdNYXBfPUIoYSx2b2lkIDApfHxbXSksZH1mdW5jdGlvbiBFKGEpe3RoaXMuY2xvc2VkPSExLHRoaXMudGVtcGxhdGVFbGVtZW50Xz1hLHRoaXMuaW5zdGFuY2VzPVtdLHRoaXMuZGVwcz12b2lkIDAsdGhpcy5pdGVyYXRlZFZhbHVlPVtdLHRoaXMucHJlc2VudFZhbHVlPXZvaWQgMCx0aGlzLmFycmF5T2JzZXJ2ZXI9dm9pZCAwfXZhciBGLEc9QXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbC5iaW5kKEFycmF5LnByb3RvdHlwZS5mb3JFYWNoKTthLk1hcCYmImZ1bmN0aW9uIj09dHlwZW9mIGEuTWFwLnByb3RvdHlwZS5mb3JFYWNoP0Y9YS5NYXA6KEY9ZnVuY3Rpb24oKXt0aGlzLmtleXM9W10sdGhpcy52YWx1ZXM9W119LEYucHJvdG90eXBlPXtzZXQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmtleXMuaW5kZXhPZihhKTswPmM/KHRoaXMua2V5cy5wdXNoKGEpLHRoaXMudmFsdWVzLnB1c2goYikpOnRoaXMudmFsdWVzW2NdPWJ9LGdldDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmtleXMuaW5kZXhPZihhKTtpZighKDA+YikpcmV0dXJuIHRoaXMudmFsdWVzW2JdfSwiZGVsZXRlIjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmtleXMuaW5kZXhPZihhKTtyZXR1cm4gMD5iPyExOih0aGlzLmtleXMuc3BsaWNlKGIsMSksdGhpcy52YWx1ZXMuc3BsaWNlKGIsMSksITApfSxmb3JFYWNoOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTA7Yzx0aGlzLmtleXMubGVuZ3RoO2MrKylhLmNhbGwoYnx8dGhpcyx0aGlzLnZhbHVlc1tjXSx0aGlzLmtleXNbY10sdGhpcyl9fSk7ImZ1bmN0aW9uIiE9dHlwZW9mIGRvY3VtZW50LmNvbnRhaW5zJiYoRG9jdW1lbnQucHJvdG90eXBlLmNvbnRhaW5zPWZ1bmN0aW9uKGEpe3JldHVybiBhPT09dGhpc3x8YS5wYXJlbnROb2RlPT09dGhpcz8hMDp0aGlzLmRvY3VtZW50RWxlbWVudC5jb250YWlucyhhKX0pO3ZhciBIPSJiaW5kIixJPSJyZXBlYXQiLEo9ImlmIixLPXt0ZW1wbGF0ZTohMCxyZXBlYXQ6ITAsYmluZDohMCxyZWY6ITB9LEw9e1RIRUFEOiEwLFRCT0RZOiEwLFRGT09UOiEwLFRIOiEwLFRSOiEwLFREOiEwLENPTEdST1VQOiEwLENPTDohMCxDQVBUSU9OOiEwLE9QVElPTjohMCxPUFRHUk9VUDohMH0sTT0idW5kZWZpbmVkIiE9dHlwZW9mIEhUTUxUZW1wbGF0ZUVsZW1lbnQ7TSYmIWZ1bmN0aW9uKCl7dmFyIGE9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidGVtcGxhdGUiKSxiPWEuY29udGVudC5vd25lckRvY3VtZW50LGM9Yi5hcHBlbmRDaGlsZChiLmNyZWF0ZUVsZW1lbnQoImh0bWwiKSksZD1jLmFwcGVuZENoaWxkKGIuY3JlYXRlRWxlbWVudCgiaGVhZCIpKSxlPWIuY3JlYXRlRWxlbWVudCgiYmFzZSIpO2UuaHJlZj1kb2N1bWVudC5iYXNlVVJJLGQuYXBwZW5kQ2hpbGQoZSl9KCk7dmFyIE49InRlbXBsYXRlLCAiK09iamVjdC5rZXlzKEwpLm1hcChmdW5jdGlvbihhKXtyZXR1cm4gYS50b0xvd2VyQ2FzZSgpKyJbdGVtcGxhdGVdIn0pLmpvaW4oIiwgIik7ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsZnVuY3Rpb24oKXtqKGRvY3VtZW50KSxQbGF0Zm9ybS5wZXJmb3JtTWljcm90YXNrQ2hlY2twb2ludCgpfSwhMSksTXx8KGEuSFRNTFRlbXBsYXRlRWxlbWVudD1mdW5jdGlvbigpe3Rocm93IFR5cGVFcnJvcigiSWxsZWdhbCBjb25zdHJ1Y3RvciIpfSk7dmFyIE8sUD0iX19wcm90b19fImlue307ImZ1bmN0aW9uIj09dHlwZW9mIE11dGF0aW9uT2JzZXJ2ZXImJihPPW5ldyBNdXRhdGlvbk9ic2VydmVyKGZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0wO2I8YS5sZW5ndGg7YisrKWFbYl0udGFyZ2V0LnJlZkNoYW5nZWRfKCl9KSksSFRNTFRlbXBsYXRlRWxlbWVudC5kZWNvcmF0ZT1mdW5jdGlvbihhLGMpe2lmKGEudGVtcGxhdGVJc0RlY29yYXRlZF8pcmV0dXJuITE7dmFyIGQ9YTtkLnRlbXBsYXRlSXNEZWNvcmF0ZWRfPSEwO3ZhciBoPWYoZCkmJk0saT1oLGs9IWgsbT0hMTtpZihofHwoZyhkKT8oYighYyksZD1uKGEpLGQudGVtcGxhdGVJc0RlY29yYXRlZF89ITAsaD1NLG09ITApOmUoZCkmJihkPW8oYSksZC50ZW1wbGF0ZUlzRGVjb3JhdGVkXz0hMCxoPU0pKSwhaCl7cShkKTt2YXIgcj1sKGQpO2QuY29udGVudF89ci5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCl9cmV0dXJuIGM/ZC5pbnN0YW5jZVJlZl89YzprP3AoZCxhLG0pOmkmJmooZC5jb250ZW50KSwhMH0sSFRNTFRlbXBsYXRlRWxlbWVudC5ib290c3RyYXA9ajt2YXIgUT1hLkhUTUxVbmtub3duRWxlbWVudHx8SFRNTEVsZW1lbnQsUj17Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudF99LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfTtNfHwoSFRNTFRlbXBsYXRlRWxlbWVudC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShRLnByb3RvdHlwZSksT2JqZWN0LmRlZmluZVByb3BlcnR5KEhUTUxUZW1wbGF0ZUVsZW1lbnQucHJvdG90eXBlLCJjb250ZW50IixSKSksayhIVE1MVGVtcGxhdGVFbGVtZW50LnByb3RvdHlwZSx7YmluZDpmdW5jdGlvbihhLGIsYyl7aWYoInJlZiIhPWEpcmV0dXJuIEVsZW1lbnQucHJvdG90eXBlLmJpbmQuY2FsbCh0aGlzLGEsYixjKTt2YXIgZD10aGlzLGU9Yz9iOmIub3BlbihmdW5jdGlvbihhKXtkLnNldEF0dHJpYnV0ZSgicmVmIixhKSxkLnJlZkNoYW5nZWRfKCl9KTtyZXR1cm4gdGhpcy5zZXRBdHRyaWJ1dGUoInJlZiIsZSksdGhpcy5yZWZDaGFuZ2VkXygpLGM/dm9pZCAwOih0aGlzLmJpbmRpbmdzXz90aGlzLmJpbmRpbmdzXy5yZWY9Yjp0aGlzLmJpbmRpbmdzXz17cmVmOmJ9LGIpfSxwcm9jZXNzQmluZGluZ0RpcmVjdGl2ZXNfOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLml0ZXJhdG9yXyYmdGhpcy5pdGVyYXRvcl8uY2xvc2VEZXBzKCksYS5pZnx8YS5iaW5kfHxhLnJlcGVhdD8odGhpcy5pdGVyYXRvcl98fCh0aGlzLml0ZXJhdG9yXz1uZXcgRSh0aGlzKSksdGhpcy5pdGVyYXRvcl8udXBkYXRlRGVwZW5kZW5jaWVzKGEsdGhpcy5tb2RlbF8pLE8mJk8ub2JzZXJ2ZSh0aGlzLHthdHRyaWJ1dGVzOiEwLGF0dHJpYnV0ZUZpbHRlcjpbInJlZiJdfSksdGhpcy5pdGVyYXRvcl8pOnZvaWQodGhpcy5pdGVyYXRvcl8mJih0aGlzLml0ZXJhdG9yXy5jbG9zZSgpLHRoaXMuaXRlcmF0b3JfPXZvaWQgMCkpfSxjcmVhdGVJbnN0YW5jZTpmdW5jdGlvbihhLGIsYyl7Yj9jPXRoaXMubmV3RGVsZWdhdGVfKGIpOmN8fChjPXRoaXMuZGVsZWdhdGVfKSx0aGlzLnJlZkNvbnRlbnRffHwodGhpcy5yZWZDb250ZW50Xz10aGlzLnJlZl8uY29udGVudCk7dmFyIGQ9dGhpcy5yZWZDb250ZW50XztpZihudWxsPT09ZC5maXJzdENoaWxkKXJldHVybiBUO3ZhciBlPUQoZCxjKSxmPW0odGhpcyksZz1mLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtnLnRlbXBsYXRlQ3JlYXRvcl89dGhpcyxnLnByb3RvQ29udGVudF89ZCxnLmJpbmRpbmdzXz1bXSxnLnRlcm1pbmF0b3JfPW51bGw7Zm9yKHZhciBoPWcudGVtcGxhdGVJbnN0YW5jZV89e2ZpcnN0Tm9kZTpudWxsLGxhc3ROb2RlOm51bGwsbW9kZWw6YX0saT0wLGo9ITEsaz1kLmZpcnN0Q2hpbGQ7aztrPWsubmV4dFNpYmxpbmcpe251bGw9PT1rLm5leHRTaWJsaW5nJiYoaj0hMCk7dmFyIGw9QShrLGcsZixlLmNoaWxkcmVuW2krK10sYSxjLGcuYmluZGluZ3NfKTtsLnRlbXBsYXRlSW5zdGFuY2VfPWgsaiYmKGcudGVybWluYXRvcl89bCl9cmV0dXJuIGguZmlyc3ROb2RlPWcuZmlyc3RDaGlsZCxoLmxhc3ROb2RlPWcubGFzdENoaWxkLGcudGVtcGxhdGVDcmVhdG9yXz12b2lkIDAsZy5wcm90b0NvbnRlbnRfPXZvaWQgMCxnfSxnZXQgbW9kZWwoKXtyZXR1cm4gdGhpcy5tb2RlbF99LHNldCBtb2RlbChhKXt0aGlzLm1vZGVsXz1hLHIodGhpcyl9LGdldCBiaW5kaW5nRGVsZWdhdGUoKXtyZXR1cm4gdGhpcy5kZWxlZ2F0ZV8mJnRoaXMuZGVsZWdhdGVfLnJhd30scmVmQ2hhbmdlZF86ZnVuY3Rpb24oKXt0aGlzLml0ZXJhdG9yXyYmdGhpcy5yZWZDb250ZW50XyE9PXRoaXMucmVmXy5jb250ZW50JiYodGhpcy5yZWZDb250ZW50Xz12b2lkIDAsdGhpcy5pdGVyYXRvcl8udmFsdWVDaGFuZ2VkKCksdGhpcy5pdGVyYXRvcl8udXBkYXRlSXRlcmF0ZWRWYWx1ZSh0aGlzLml0ZXJhdG9yXy5nZXRVcGRhdGVkVmFsdWUoKSkpfSxjbGVhcjpmdW5jdGlvbigpe3RoaXMubW9kZWxfPXZvaWQgMCx0aGlzLmRlbGVnYXRlXz12b2lkIDAsdGhpcy5iaW5kaW5nc18mJnRoaXMuYmluZGluZ3NfLnJlZiYmdGhpcy5iaW5kaW5nc18ucmVmLmNsb3NlKCksdGhpcy5yZWZDb250ZW50Xz12b2lkIDAsdGhpcy5pdGVyYXRvcl8mJih0aGlzLml0ZXJhdG9yXy52YWx1ZUNoYW5nZWQoKSx0aGlzLml0ZXJhdG9yXy5jbG9zZSgpLHRoaXMuaXRlcmF0b3JfPXZvaWQgMCl9LHNldERlbGVnYXRlXzpmdW5jdGlvbihhKXt0aGlzLmRlbGVnYXRlXz1hLHRoaXMuYmluZGluZ01hcF89dm9pZCAwLHRoaXMuaXRlcmF0b3JfJiYodGhpcy5pdGVyYXRvcl8uaW5zdGFuY2VQb3NpdGlvbkNoYW5nZWRGbl89dm9pZCAwLHRoaXMuaXRlcmF0b3JfLmluc3RhbmNlTW9kZWxGbl89dm9pZCAwKX0sbmV3RGVsZWdhdGVfOmZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYil7dmFyIGM9YSYmYVtiXTtpZigiZnVuY3Rpb24iPT10eXBlb2YgYylyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gYy5hcHBseShhLGFyZ3VtZW50cyl9fWlmKGEpcmV0dXJue2JpbmRpbmdNYXBzOnt9LHJhdzphLHByZXBhcmVCaW5kaW5nOmIoInByZXBhcmVCaW5kaW5nIikscHJlcGFyZUluc3RhbmNlTW9kZWw6YigicHJlcGFyZUluc3RhbmNlTW9kZWwiKSxwcmVwYXJlSW5zdGFuY2VQb3NpdGlvbkNoYW5nZWQ6YigicHJlcGFyZUluc3RhbmNlUG9zaXRpb25DaGFuZ2VkIil9fSxzZXQgYmluZGluZ0RlbGVnYXRlKGEpe2lmKHRoaXMuZGVsZWdhdGVfKXRocm93IEVycm9yKCJUZW1wbGF0ZSBtdXN0IGJlIGNsZWFyZWQgYmVmb3JlIGEgbmV3IGJpbmRpbmdEZWxlZ2F0ZSBjYW4gYmUgYXNzaWduZWQiKTt0aGlzLnNldERlbGVnYXRlXyh0aGlzLm5ld0RlbGVnYXRlXyhhKSl9LGdldCByZWZfKCl7dmFyIGE9ZCh0aGlzLHRoaXMuZ2V0QXR0cmlidXRlKCJyZWYiKSk7aWYoYXx8KGE9dGhpcy5pbnN0YW5jZVJlZl8pLCFhKXJldHVybiB0aGlzO3ZhciBiPWEucmVmXztyZXR1cm4gYj9iOmF9fSk7dmFyIFM9MTtPYmplY3QuZGVmaW5lUHJvcGVydHkoTm9kZS5wcm90b3R5cGUsInRlbXBsYXRlSW5zdGFuY2UiLHtnZXQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnRlbXBsYXRlSW5zdGFuY2VfO3JldHVybiBhP2E6dGhpcy5wYXJlbnROb2RlP3RoaXMucGFyZW50Tm9kZS50ZW1wbGF0ZUluc3RhbmNlOnZvaWQgMH19KTt2YXIgVD1kb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7VC5iaW5kaW5nc189W10sVC50ZXJtaW5hdG9yXz1udWxsLEUucHJvdG90eXBlPXtjbG9zZURlcHM6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmRlcHM7YSYmKGEuaWZPbmVUaW1lPT09ITEmJmEuaWZWYWx1ZS5jbG9zZSgpLGEub25lVGltZT09PSExJiZhLnZhbHVlLmNsb3NlKCkpfSx1cGRhdGVEZXBlbmRlbmNpZXM6ZnVuY3Rpb24oYSxiKXt0aGlzLmNsb3NlRGVwcygpO3ZhciBjPXRoaXMuZGVwcz17fSxkPXRoaXMudGVtcGxhdGVFbGVtZW50XyxlPSEwO2lmKGEuaWYpe2lmKGMuaGFzSWY9ITAsYy5pZk9uZVRpbWU9YS5pZi5vbmx5T25lVGltZSxjLmlmVmFsdWU9dihKLGEuaWYsZCxiKSxlPWMuaWZWYWx1ZSxjLmlmT25lVGltZSYmIWUpcmV0dXJuIHZvaWQgdGhpcy52YWx1ZUNoYW5nZWQoKTtjLmlmT25lVGltZXx8KGU9ZS5vcGVuKHRoaXMudXBkYXRlSWZWYWx1ZSx0aGlzKSl9YS5yZXBlYXQ/KGMucmVwZWF0PSEwLGMub25lVGltZT1hLnJlcGVhdC5vbmx5T25lVGltZSxjLnZhbHVlPXYoSSxhLnJlcGVhdCxkLGIpKTooYy5yZXBlYXQ9ITEsYy5vbmVUaW1lPWEuYmluZC5vbmx5T25lVGltZSxjLnZhbHVlPXYoSCxhLmJpbmQsZCxiKSk7dmFyIGY9Yy52YWx1ZTtyZXR1cm4gYy5vbmVUaW1lfHwoZj1mLm9wZW4odGhpcy51cGRhdGVJdGVyYXRlZFZhbHVlLHRoaXMpKSxlP3ZvaWQgdGhpcy51cGRhdGVWYWx1ZShmKTp2b2lkIHRoaXMudmFsdWVDaGFuZ2VkKCl9LGdldFVwZGF0ZWRWYWx1ZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZGVwcy52YWx1ZTtyZXR1cm4gdGhpcy5kZXBzLm9uZVRpbWV8fChhPWEuZGlzY2FyZENoYW5nZXMoKSksYX0sdXBkYXRlSWZWYWx1ZTpmdW5jdGlvbihhKXtyZXR1cm4gYT92b2lkIHRoaXMudXBkYXRlVmFsdWUodGhpcy5nZXRVcGRhdGVkVmFsdWUoKSk6dm9pZCB0aGlzLnZhbHVlQ2hhbmdlZCgpfSx1cGRhdGVJdGVyYXRlZFZhbHVlOmZ1bmN0aW9uKGEpe2lmKHRoaXMuZGVwcy5oYXNJZil7dmFyIGI9dGhpcy5kZXBzLmlmVmFsdWU7aWYodGhpcy5kZXBzLmlmT25lVGltZXx8KGI9Yi5kaXNjYXJkQ2hhbmdlcygpKSwhYilyZXR1cm4gdm9pZCB0aGlzLnZhbHVlQ2hhbmdlZCgpfXRoaXMudXBkYXRlVmFsdWUoYSl9LHVwZGF0ZVZhbHVlOmZ1bmN0aW9uKGEpe3RoaXMuZGVwcy5yZXBlYXR8fChhPVthXSk7dmFyIGI9dGhpcy5kZXBzLnJlcGVhdCYmIXRoaXMuZGVwcy5vbmVUaW1lJiZBcnJheS5pc0FycmF5KGEpO3RoaXMudmFsdWVDaGFuZ2VkKGEsYil9LHZhbHVlQ2hhbmdlZDpmdW5jdGlvbihhLGIpe0FycmF5LmlzQXJyYXkoYSl8fChhPVtdKSxhIT09dGhpcy5pdGVyYXRlZFZhbHVlJiYodGhpcy51bm9ic2VydmUoKSx0aGlzLnByZXNlbnRWYWx1ZT1hLGImJih0aGlzLmFycmF5T2JzZXJ2ZXI9bmV3IEFycmF5T2JzZXJ2ZXIodGhpcy5wcmVzZW50VmFsdWUpLHRoaXMuYXJyYXlPYnNlcnZlci5vcGVuKHRoaXMuaGFuZGxlU3BsaWNlcyx0aGlzKSksdGhpcy5oYW5kbGVTcGxpY2VzKEFycmF5T2JzZXJ2ZXIuY2FsY3VsYXRlU3BsaWNlcyh0aGlzLnByZXNlbnRWYWx1ZSx0aGlzLml0ZXJhdGVkVmFsdWUpKSl9LGdldExhc3RJbnN0YW5jZU5vZGU6ZnVuY3Rpb24oYSl7aWYoLTE9PWEpcmV0dXJuIHRoaXMudGVtcGxhdGVFbGVtZW50Xzt2YXIgYj10aGlzLmluc3RhbmNlc1thXSxjPWIudGVybWluYXRvcl87aWYoIWMpcmV0dXJuIHRoaXMuZ2V0TGFzdEluc3RhbmNlTm9kZShhLTEpO2lmKGMubm9kZVR5cGUhPT1Ob2RlLkVMRU1FTlRfTk9ERXx8dGhpcy50ZW1wbGF0ZUVsZW1lbnRfPT09YylyZXR1cm4gYzt2YXIgZD1jLml0ZXJhdG9yXztyZXR1cm4gZD9kLmdldExhc3RUZW1wbGF0ZU5vZGUoKTpjfSxnZXRMYXN0VGVtcGxhdGVOb2RlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0TGFzdEluc3RhbmNlTm9kZSh0aGlzLmluc3RhbmNlcy5sZW5ndGgtMSl9LGluc2VydEluc3RhbmNlQXQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmdldExhc3RJbnN0YW5jZU5vZGUoYS0xKSxkPXRoaXMudGVtcGxhdGVFbGVtZW50Xy5wYXJlbnROb2RlO3RoaXMuaW5zdGFuY2VzLnNwbGljZShhLDAsYiksZC5pbnNlcnRCZWZvcmUoYixjLm5leHRTaWJsaW5nKX0sZXh0cmFjdEluc3RhbmNlQXQ6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPXRoaXMuZ2V0TGFzdEluc3RhbmNlTm9kZShhLTEpLGM9dGhpcy5nZXRMYXN0SW5zdGFuY2VOb2RlKGEpLGQ9dGhpcy50ZW1wbGF0ZUVsZW1lbnRfLnBhcmVudE5vZGUsZT10aGlzLmluc3RhbmNlcy5zcGxpY2UoYSwxKVswXTtjIT09Yjspe3ZhciBmPWIubmV4dFNpYmxpbmc7Zj09YyYmKGM9YiksZS5hcHBlbmRDaGlsZChkLnJlbW92ZUNoaWxkKGYpKX1yZXR1cm4gZX0sZ2V0RGVsZWdhdGVGbjpmdW5jdGlvbihhKXtyZXR1cm4gYT1hJiZhKHRoaXMudGVtcGxhdGVFbGVtZW50XyksImZ1bmN0aW9uIj09dHlwZW9mIGE/YTpudWxsfSxoYW5kbGVTcGxpY2VzOmZ1bmN0aW9uKGEpe2lmKCF0aGlzLmNsb3NlZCYmYS5sZW5ndGgpe3ZhciBiPXRoaXMudGVtcGxhdGVFbGVtZW50XztpZighYi5wYXJlbnROb2RlKXJldHVybiB2b2lkIHRoaXMuY2xvc2UoKTtBcnJheU9ic2VydmVyLmFwcGx5U3BsaWNlcyh0aGlzLml0ZXJhdGVkVmFsdWUsdGhpcy5wcmVzZW50VmFsdWUsYSk7dmFyIGM9Yi5kZWxlZ2F0ZV87dm9pZCAwPT09dGhpcy5pbnN0YW5jZU1vZGVsRm5fJiYodGhpcy5pbnN0YW5jZU1vZGVsRm5fPXRoaXMuZ2V0RGVsZWdhdGVGbihjJiZjLnByZXBhcmVJbnN0YW5jZU1vZGVsKSksdm9pZCAwPT09dGhpcy5pbnN0YW5jZVBvc2l0aW9uQ2hhbmdlZEZuXyYmKHRoaXMuaW5zdGFuY2VQb3NpdGlvbkNoYW5nZWRGbl89dGhpcy5nZXREZWxlZ2F0ZUZuKGMmJmMucHJlcGFyZUluc3RhbmNlUG9zaXRpb25DaGFuZ2VkKSk7Zm9yKHZhciBkPW5ldyBGLGU9MCxmPTA7ZjxhLmxlbmd0aDtmKyspe2Zvcih2YXIgZz1hW2ZdLGg9Zy5yZW1vdmVkLGk9MDtpPGgubGVuZ3RoO2krKyl7dmFyIGo9aFtpXSxrPXRoaXMuZXh0cmFjdEluc3RhbmNlQXQoZy5pbmRleCtlKTtrIT09VCYmZC5zZXQoaixrKX1lLT1nLmFkZGVkQ291bnR9Zm9yKHZhciBmPTA7ZjxhLmxlbmd0aDtmKyspZm9yKHZhciBnPWFbZl0sbD1nLmluZGV4O2w8Zy5pbmRleCtnLmFkZGVkQ291bnQ7bCsrKXt2YXIgaj10aGlzLml0ZXJhdGVkVmFsdWVbbF0saz1kLmdldChqKTtrP2QuZGVsZXRlKGopOih0aGlzLmluc3RhbmNlTW9kZWxGbl8mJihqPXRoaXMuaW5zdGFuY2VNb2RlbEZuXyhqKSksaz12b2lkIDA9PT1qP1Q6Yi5jcmVhdGVJbnN0YW5jZShqLHZvaWQgMCxjKSksdGhpcy5pbnNlcnRJbnN0YW5jZUF0KGwsayl9ZC5mb3JFYWNoKGZ1bmN0aW9uKGEpe3RoaXMuY2xvc2VJbnN0YW5jZUJpbmRpbmdzKGEpfSx0aGlzKSx0aGlzLmluc3RhbmNlUG9zaXRpb25DaGFuZ2VkRm5fJiZ0aGlzLnJlcG9ydEluc3RhbmNlc01vdmVkKGEpfX0scmVwb3J0SW5zdGFuY2VNb3ZlZDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmluc3RhbmNlc1thXTtiIT09VCYmdGhpcy5pbnN0YW5jZVBvc2l0aW9uQ2hhbmdlZEZuXyhiLnRlbXBsYXRlSW5zdGFuY2VfLGEpfSxyZXBvcnRJbnN0YW5jZXNNb3ZlZDpmdW5jdGlvbihhKXtmb3IodmFyIGI9MCxjPTAsZD0wO2Q8YS5sZW5ndGg7ZCsrKXt2YXIgZT1hW2RdO2lmKDAhPWMpZm9yKDtiPGUuaW5kZXg7KXRoaXMucmVwb3J0SW5zdGFuY2VNb3ZlZChiKSxiKys7ZWxzZSBiPWUuaW5kZXg7Zm9yKDtiPGUuaW5kZXgrZS5hZGRlZENvdW50Oyl0aGlzLnJlcG9ydEluc3RhbmNlTW92ZWQoYiksYisrO2MrPWUuYWRkZWRDb3VudC1lLnJlbW92ZWQubGVuZ3RofWlmKDAhPWMpZm9yKHZhciBmPXRoaXMuaW5zdGFuY2VzLmxlbmd0aDtmPmI7KXRoaXMucmVwb3J0SW5zdGFuY2VNb3ZlZChiKSxiKyt9LGNsb3NlSW5zdGFuY2VCaW5kaW5nczpmdW5jdGlvbihhKXtmb3IodmFyIGI9YS5iaW5kaW5nc18sYz0wO2M8Yi5sZW5ndGg7YysrKWJbY10uY2xvc2UoKX0sdW5vYnNlcnZlOmZ1bmN0aW9uKCl7dGhpcy5hcnJheU9ic2VydmVyJiYodGhpcy5hcnJheU9ic2VydmVyLmNsb3NlKCksdGhpcy5hcnJheU9ic2VydmVyPXZvaWQgMCl9LGNsb3NlOmZ1bmN0aW9uKCl7aWYoIXRoaXMuY2xvc2VkKXt0aGlzLnVub2JzZXJ2ZSgpO2Zvcih2YXIgYT0wO2E8dGhpcy5pbnN0YW5jZXMubGVuZ3RoO2ErKyl0aGlzLmNsb3NlSW5zdGFuY2VCaW5kaW5ncyh0aGlzLmluc3RhbmNlc1thXSk7dGhpcy5pbnN0YW5jZXMubGVuZ3RoPTAsdGhpcy5jbG9zZURlcHMoKSx0aGlzLnRlbXBsYXRlRWxlbWVudF8uaXRlcmF0b3JfPXZvaWQgMCx0aGlzLmNsb3NlZD0hMH19fSxIVE1MVGVtcGxhdGVFbGVtZW50LmZvckFsbFRlbXBsYXRlc0Zyb21fPWl9KHRoaXMpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7Zi50ZXh0Q29udGVudD1kKyssZS5wdXNoKGEpfWZ1bmN0aW9uIGMoKXtmb3IoO2UubGVuZ3RoOyllLnNoaWZ0KCkoKX12YXIgZD0wLGU9W10sZj1kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgiIik7bmV3KHdpbmRvdy5NdXRhdGlvbk9ic2VydmVyfHxKc011dGF0aW9uT2JzZXJ2ZXIpKGMpLm9ic2VydmUoZix7Y2hhcmFjdGVyRGF0YTohMH0pLGEuZW5kT2ZNaWNyb3Rhc2s9Yn0oUGxhdGZvcm0pLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoKXtlfHwoZT0hMCxhLmVuZE9mTWljcm90YXNrKGZ1bmN0aW9uKCl7ZT0hMSxsb2dGbGFncy5kYXRhJiZjb25zb2xlLmdyb3VwKCJQbGF0Zm9ybS5mbHVzaCgpIiksYS5wZXJmb3JtTWljcm90YXNrQ2hlY2twb2ludCgpLGxvZ0ZsYWdzLmRhdGEmJmNvbnNvbGUuZ3JvdXBFbmQoKX0pKX12YXIgYz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzdHlsZSIpO2MudGV4dENvbnRlbnQ9InRlbXBsYXRlIHtkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7fSAvKiBpbmplY3RlZCBieSBwbGF0Zm9ybS5qcyAqLyI7dmFyIGQ9ZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiaGVhZCIpO2QuaW5zZXJ0QmVmb3JlKGMsZC5maXJzdENoaWxkKTt2YXIgZTtpZihPYnNlcnZlci5oYXNPYmplY3RPYnNlcnZlKWI9ZnVuY3Rpb24oKXt9O2Vsc2V7dmFyIGY9MTI1O3dpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJXZWJDb21wb25lbnRzUmVhZHkiLGZ1bmN0aW9uKCl7YigpLGEuZmx1c2hQb2xsPXNldEludGVydmFsKGIsZil9KX1pZih3aW5kb3cuQ3VzdG9tRWxlbWVudHMmJiFDdXN0b21FbGVtZW50cy51c2VOYXRpdmUpe3ZhciBnPURvY3VtZW50LnByb3RvdHlwZS5pbXBvcnROb2RlO0RvY3VtZW50LnByb3RvdHlwZS5pbXBvcnROb2RlPWZ1bmN0aW9uKGEsYil7dmFyIGM9Zy5jYWxsKHRoaXMsYSxiKTtyZXR1cm4gQ3VzdG9tRWxlbWVudHMudXBncmFkZUFsbChjKSxjfX1hLmZsdXNoPWJ9KHdpbmRvdy5QbGF0Zm9ybSksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhLGIsZCxlKXtyZXR1cm4gYS5yZXBsYWNlKGUsZnVuY3Rpb24oYSxlLGYsZyl7dmFyIGg9Zi5yZXBsYWNlKC9bIiddL2csIiIpO3JldHVybiBoPWMoYixoLGQpLGUrIiciK2grIiciK2d9KX1mdW5jdGlvbiBjKGEsYixjKXtpZihiJiYiLyI9PT1iWzBdKXJldHVybiBiO3ZhciBlPW5ldyBVUkwoYixhKTtyZXR1cm4gYz9lLmhyZWY6ZChlLmhyZWYpfWZ1bmN0aW9uIGQoYSl7dmFyIGI9bmV3IFVSTChkb2N1bWVudC5iYXNlVVJJKSxjPW5ldyBVUkwoYSxiKTtyZXR1cm4gYy5ob3N0PT09Yi5ob3N0JiZjLnBvcnQ9PT1iLnBvcnQmJmMucHJvdG9jb2w9PT1iLnByb3RvY29sP2UoYixjKTphfWZ1bmN0aW9uIGUoYSxiKXtmb3IodmFyIGM9YS5wYXRobmFtZSxkPWIucGF0aG5hbWUsZT1jLnNwbGl0KCIvIiksZj1kLnNwbGl0KCIvIik7ZS5sZW5ndGgmJmVbMF09PT1mWzBdOyllLnNoaWZ0KCksZi5zaGlmdCgpO2Zvcih2YXIgZz0wLGg9ZS5sZW5ndGgtMTtoPmc7ZysrKWYudW5zaGlmdCgiLi4iKTtyZXR1cm4gZi5qb2luKCIvIikrYi5zZWFyY2grYi5oYXNofXZhciBmPXtyZXNvbHZlRG9tOmZ1bmN0aW9uKGEsYil7Yj1ifHxhLm93bmVyRG9jdW1lbnQuYmFzZVVSSSx0aGlzLnJlc29sdmVBdHRyaWJ1dGVzKGEsYiksdGhpcy5yZXNvbHZlU3R5bGVzKGEsYik7dmFyIGM9YS5xdWVyeVNlbGVjdG9yQWxsKCJ0ZW1wbGF0ZSIpO2lmKGMpZm9yKHZhciBkLGU9MCxmPWMubGVuZ3RoO2Y+ZSYmKGQ9Y1tlXSk7ZSsrKWQuY29udGVudCYmdGhpcy5yZXNvbHZlRG9tKGQuY29udGVudCxiKX0scmVzb2x2ZVRlbXBsYXRlOmZ1bmN0aW9uKGEpe3RoaXMucmVzb2x2ZURvbShhLmNvbnRlbnQsYS5vd25lckRvY3VtZW50LmJhc2VVUkkpfSxyZXNvbHZlU3R5bGVzOmZ1bmN0aW9uKGEsYil7dmFyIGM9YS5xdWVyeVNlbGVjdG9yQWxsKCJzdHlsZSIpO2lmKGMpZm9yKHZhciBkLGU9MCxmPWMubGVuZ3RoO2Y+ZSYmKGQ9Y1tlXSk7ZSsrKXRoaXMucmVzb2x2ZVN0eWxlKGQsYil9LHJlc29sdmVTdHlsZTpmdW5jdGlvbihhLGIpe2I9Ynx8YS5vd25lckRvY3VtZW50LmJhc2VVUkksYS50ZXh0Q29udGVudD10aGlzLnJlc29sdmVDc3NUZXh0KGEudGV4dENvbnRlbnQsYil9LHJlc29sdmVDc3NUZXh0OmZ1bmN0aW9uKGEsYyxkKXtyZXR1cm4gYT1iKGEsYyxkLGcpLGIoYSxjLGQsaCl9LHJlc29sdmVBdHRyaWJ1dGVzOmZ1bmN0aW9uKGEsYil7YS5oYXNBdHRyaWJ1dGVzJiZhLmhhc0F0dHJpYnV0ZXMoKSYmdGhpcy5yZXNvbHZlRWxlbWVudEF0dHJpYnV0ZXMoYSxiKTt2YXIgYz1hJiZhLnF1ZXJ5U2VsZWN0b3JBbGwoaik7aWYoYylmb3IodmFyIGQsZT0wLGY9Yy5sZW5ndGg7Zj5lJiYoZD1jW2VdKTtlKyspdGhpcy5yZXNvbHZlRWxlbWVudEF0dHJpYnV0ZXMoZCxiKX0scmVzb2x2ZUVsZW1lbnRBdHRyaWJ1dGVzOmZ1bmN0aW9uKGEsZCl7ZD1kfHxhLm93bmVyRG9jdW1lbnQuYmFzZVVSSSxpLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIGYsaD1hLmF0dHJpYnV0ZXNbZV0saT1oJiZoLnZhbHVlO2kmJmkuc2VhcmNoKGspPDAmJihmPSJzdHlsZSI9PT1lP2IoaSxkLCExLGcpOmMoZCxpKSxoLnZhbHVlPWYpfSl9fSxnPS8odXJsXCgpKFteKV0qKShcKSkvZyxoPS8oQGltcG9ydFtcc10rKD8hdXJsXCgpKShbXjtdKikoOykvZyxpPVsiaHJlZiIsInNyYyIsImFjdGlvbiIsInN0eWxlIiwidXJsIl0saj0iWyIraS5qb2luKCJdLFsiKSsiXSIsaz0ie3suKn19IjthLnVybFJlc29sdmVyPWZ9KFBvbHltZXIpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7dGhpcy5jYWNoZT1PYmplY3QuY3JlYXRlKG51bGwpLHRoaXMubWFwPU9iamVjdC5jcmVhdGUobnVsbCksdGhpcy5yZXF1ZXN0cz0wLHRoaXMucmVnZXg9YX12YXIgYz1QbGF0Zm9ybS5lbmRPZk1pY3JvdGFzaztiLnByb3RvdHlwZT17ZXh0cmFjdFVybHM6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGMsZCxlPVtdO2M9dGhpcy5yZWdleC5leGVjKGEpOylkPW5ldyBVUkwoY1sxXSxiKSxlLnB1c2goe21hdGNoZWQ6Y1swXSx1cmw6ZC5ocmVmfSk7cmV0dXJuIGV9LHByb2Nlc3M6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXRoaXMuZXh0cmFjdFVybHMoYSxiKSxlPWMuYmluZChudWxsLHRoaXMubWFwKTt0aGlzLmZldGNoKGQsZSl9LGZldGNoOmZ1bmN0aW9uKGEsYil7dmFyIGM9YS5sZW5ndGg7aWYoIWMpcmV0dXJuIGIoKTtmb3IodmFyIGQsZSxmLGc9ZnVuY3Rpb24oKXswPT09LS1jJiZiKCl9LGg9MDtjPmg7aCsrKWQ9YVtoXSxmPWQudXJsLGU9dGhpcy5jYWNoZVtmXSxlfHwoZT10aGlzLnhocihmKSxlLm1hdGNoPWQsdGhpcy5jYWNoZVtmXT1lKSxlLndhaXQoZyl9LGhhbmRsZVhocjpmdW5jdGlvbihhKXt2YXIgYj1hLm1hdGNoLGM9Yi51cmwsZD1hLnJlc3BvbnNlfHxhLnJlc3BvbnNlVGV4dHx8IiI7dGhpcy5tYXBbY109ZCx0aGlzLmZldGNoKHRoaXMuZXh0cmFjdFVybHMoZCxjKSxhLnJlc29sdmUpfSx4aHI6ZnVuY3Rpb24oYSl7dGhpcy5yZXF1ZXN0cysrO3ZhciBiPW5ldyBYTUxIdHRwUmVxdWVzdDtyZXR1cm4gYi5vcGVuKCJHRVQiLGEsITApLGIuc2VuZCgpLGIub25lcnJvcj1iLm9ubG9hZD10aGlzLmhhbmRsZVhoci5iaW5kKHRoaXMsYiksYi5wZW5kaW5nPVtdLGIucmVzb2x2ZT1mdW5jdGlvbigpe2Zvcih2YXIgYT1iLnBlbmRpbmcsYz0wO2M8YS5sZW5ndGg7YysrKWFbY10oKTtiLnBlbmRpbmc9bnVsbH0sYi53YWl0PWZ1bmN0aW9uKGEpe2IucGVuZGluZz9iLnBlbmRpbmcucHVzaChhKTpjKGEpfSxifX0sYS5Mb2FkZXI9Yn0oUG9seW1lciksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYigpe3RoaXMubG9hZGVyPW5ldyBkKHRoaXMucmVnZXgpfXZhciBjPWEudXJsUmVzb2x2ZXIsZD1hLkxvYWRlcjtiLnByb3RvdHlwZT17cmVnZXg6L0BpbXBvcnRccysoPzp1cmwpP1siJ1woXSooW14nIlwpXSopWyciXCldKjsvZyxyZXNvbHZlOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD1mdW5jdGlvbihkKXtjKHRoaXMuZmxhdHRlbihhLGIsZCkpfS5iaW5kKHRoaXMpO3RoaXMubG9hZGVyLnByb2Nlc3MoYSxiLGQpfSxyZXNvbHZlTm9kZTpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9YS50ZXh0Q29udGVudCxlPWZ1bmN0aW9uKGIpe2EudGV4dENvbnRlbnQ9YixjKGEpfTt0aGlzLnJlc29sdmUoZCxiLGUpfSxmbGF0dGVuOmZ1bmN0aW9uKGEsYixkKXtmb3IodmFyIGUsZixnLGg9dGhpcy5sb2FkZXIuZXh0cmFjdFVybHMoYSxiKSxpPTA7aTxoLmxlbmd0aDtpKyspZT1oW2ldLGY9ZS51cmwsZz1jLnJlc29sdmVDc3NUZXh0KGRbZl0sZiwhMCksZz10aGlzLmZsYXR0ZW4oZyxiLGQpLGE9YS5yZXBsYWNlKGUubWF0Y2hlZCxnKTtyZXR1cm4gYX0sbG9hZFN0eWxlczpmdW5jdGlvbihhLGIsYyl7ZnVuY3Rpb24gZCgpe2YrKyxmPT09ZyYmYyYmYygpfWZvcih2YXIgZSxmPTAsZz1hLmxlbmd0aCxoPTA7Zz5oJiYoZT1hW2hdKTtoKyspdGhpcy5yZXNvbHZlTm9kZShlLGIsZCl9fTt2YXIgZT1uZXcgYjthLnN0eWxlUmVzb2x2ZXI9ZX0oUG9seW1lciksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhLGIpe3JldHVybiBhJiZiJiZPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhiKS5mb3JFYWNoKGZ1bmN0aW9uKGMpe3ZhciBkPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoYixjKTtkJiYoT2JqZWN0LmRlZmluZVByb3BlcnR5KGEsYyxkKSwiZnVuY3Rpb24iPT10eXBlb2YgZC52YWx1ZSYmKGQudmFsdWUubm9tPWMpKX0pLGF9ZnVuY3Rpb24gYyhhKXtmb3IodmFyIGI9YXx8e30sYz0xO2M8YXJndW1lbnRzLmxlbmd0aDtjKyspe3ZhciBlPWFyZ3VtZW50c1tjXTt0cnl7Zm9yKHZhciBmIGluIGUpZChmLGUsYil9Y2F0Y2goZyl7fX1yZXR1cm4gYn1mdW5jdGlvbiBkKGEsYixjKXt2YXIgZD1lKGIsYSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGMsYSxkKX1mdW5jdGlvbiBlKGEsYil7aWYoYSl7dmFyIGM9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihhLGIpO3JldHVybiBjfHxlKE9iamVjdC5nZXRQcm90b3R5cGVPZihhKSxiKX19YS5leHRlbmQ9YixhLm1peGluPWMsUGxhdGZvcm0ubWl4aW49Y30oUG9seW1lciksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhLGIsZCl7cmV0dXJuIGE/YS5zdG9wKCk6YT1uZXcgYyh0aGlzKSxhLmdvKGIsZCksYX12YXIgYz1mdW5jdGlvbihhKXt0aGlzLmNvbnRleHQ9YSx0aGlzLmJvdW5kQ29tcGxldGU9dGhpcy5jb21wbGV0ZS5iaW5kKHRoaXMpfTtjLnByb3RvdHlwZT17Z286ZnVuY3Rpb24oYSxiKXt0aGlzLmNhbGxiYWNrPWE7dmFyIGM7Yj8oYz1zZXRUaW1lb3V0KHRoaXMuYm91bmRDb21wbGV0ZSxiKSx0aGlzLmhhbmRsZT1mdW5jdGlvbigpe2NsZWFyVGltZW91dChjKX0pOihjPXJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLmJvdW5kQ29tcGxldGUpLHRoaXMuaGFuZGxlPWZ1bmN0aW9uKCl7Y2FuY2VsQW5pbWF0aW9uRnJhbWUoYyl9KX0sc3RvcDpmdW5jdGlvbigpe3RoaXMuaGFuZGxlJiYodGhpcy5oYW5kbGUoKSx0aGlzLmhhbmRsZT1udWxsKX0sY29tcGxldGU6ZnVuY3Rpb24oKXt0aGlzLmhhbmRsZSYmKHRoaXMuc3RvcCgpLHRoaXMuY2FsbGJhY2suY2FsbCh0aGlzLmNvbnRleHQpKX19LGEuam9iPWJ9KFBvbHltZXIpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSxiLGMpe3ZhciBkPSJzdHJpbmciPT10eXBlb2YgYT9kb2N1bWVudC5jcmVhdGVFbGVtZW50KGEpOmEuY2xvbmVOb2RlKCEwKTtpZihkLmlubmVySFRNTD1iLGMpZm9yKHZhciBlIGluIGMpZC5zZXRBdHRyaWJ1dGUoZSxjW2VdKTtyZXR1cm4gZH12YXIgYz17fTtIVE1MRWxlbWVudC5yZWdpc3Rlcj1mdW5jdGlvbihhLGIpe2NbYV09Yn0sSFRNTEVsZW1lbnQuZ2V0UHJvdG90eXBlRm9yVGFnPWZ1bmN0aW9uKGEpe3ZhciBiPWE/Y1thXTpIVE1MRWxlbWVudC5wcm90b3R5cGU7cmV0dXJuIGJ8fE9iamVjdC5nZXRQcm90b3R5cGVPZihkb2N1bWVudC5jcmVhdGVFbGVtZW50KGEpKX07dmFyIGQ9RXZlbnQucHJvdG90eXBlLnN0b3BQcm9wYWdhdGlvbjtFdmVudC5wcm90b3R5cGUuc3RvcFByb3BhZ2F0aW9uPWZ1bmN0aW9uKCl7dGhpcy5jYW5jZWxCdWJibGU9ITAsZC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9O3ZhciBlPURPTVRva2VuTGlzdC5wcm90b3R5cGUuYWRkLGY9RE9NVG9rZW5MaXN0LnByb3RvdHlwZS5yZW1vdmU7RE9NVG9rZW5MaXN0LnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24oKXtmb3IodmFyIGE9MDthPGFyZ3VtZW50cy5sZW5ndGg7YSsrKWUuY2FsbCh0aGlzLGFyZ3VtZW50c1thXSl9LERPTVRva2VuTGlzdC5wcm90b3R5cGUucmVtb3ZlPWZ1bmN0aW9uKCl7Zm9yKHZhciBhPTA7YTxhcmd1bWVudHMubGVuZ3RoO2ErKylmLmNhbGwodGhpcyxhcmd1bWVudHNbYV0pfSxET01Ub2tlbkxpc3QucHJvdG90eXBlLnRvZ2dsZT1mdW5jdGlvbihhLGIpezE9PWFyZ3VtZW50cy5sZW5ndGgmJihiPSF0aGlzLmNvbnRhaW5zKGEpKSxiP3RoaXMuYWRkKGEpOnRoaXMucmVtb3ZlKGEpfSxET01Ub2tlbkxpc3QucHJvdG90eXBlLnN3aXRjaD1mdW5jdGlvbihhLGIpe2EmJnRoaXMucmVtb3ZlKGEpLGImJnRoaXMuYWRkKGIpfTt2YXIgZz1mdW5jdGlvbigpe3JldHVybiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh0aGlzKX0saD13aW5kb3cuTmFtZWROb2RlTWFwfHx3aW5kb3cuTW96TmFtZWRBdHRyTWFwfHx7fTtOb2RlTGlzdC5wcm90b3R5cGUuYXJyYXk9ZyxoLnByb3RvdHlwZS5hcnJheT1nLEhUTUxDb2xsZWN0aW9uLnByb3RvdHlwZS5hcnJheT1nLGEuY3JlYXRlRE9NPWJ9KFBvbHltZXIpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7dmFyIGU9Yi5jYWxsZXIsZz1lLm5vbSxoPWUuX3N1cGVyO2h8fChnfHwoZz1lLm5vbT1jLmNhbGwodGhpcyxlKSksZ3x8Y29uc29sZS53YXJuKCJjYWxsZWQgc3VwZXIoKSBvbiBhIG1ldGhvZCBub3QgaW5zdGFsbGVkIGRlY2xhcmF0aXZlbHkgKGhhcyBubyAubm9tIHByb3BlcnR5KSIpLGg9ZChlLGcsZih0aGlzKSkpO3ZhciBpPWhbZ107cmV0dXJuIGk/KGkuX3N1cGVyfHxkKGksZyxoKSxpLmFwcGx5KHRoaXMsYXx8W10pKTp2b2lkIDB9ZnVuY3Rpb24gYyhhKXtmb3IodmFyIGI9dGhpcy5fX3Byb3RvX187YiYmYiE9PUhUTUxFbGVtZW50LnByb3RvdHlwZTspe2Zvcih2YXIgYyxkPU9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGIpLGU9MCxmPWQubGVuZ3RoO2Y+ZSYmKGM9ZFtlXSk7ZSsrKXt2YXIgZz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGIsYyk7aWYoImZ1bmN0aW9uIj09dHlwZW9mIGcudmFsdWUmJmcudmFsdWU9PT1hKXJldHVybiBjfWI9Yi5fX3Byb3RvX199fWZ1bmN0aW9uIGQoYSxiLGMpe3ZhciBkPWUoYyxiLGEpO3JldHVybiBkW2JdJiYoZFtiXS5ub209YiksYS5fc3VwZXI9ZH1mdW5jdGlvbiBlKGEsYixjKXtmb3IoO2E7KXtpZihhW2JdIT09YyYmYVtiXSlyZXR1cm4gYTthPWYoYSl9cmV0dXJuIE9iamVjdH1mdW5jdGlvbiBmKGEpe3JldHVybiBhLl9fcHJvdG9fX31hLnN1cGVyPWJ9KFBvbHltZXIpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7cmV0dXJuIGF9ZnVuY3Rpb24gYyhhLGIpe3ZhciBjPXR5cGVvZiBiO3JldHVybiBiIGluc3RhbmNlb2YgRGF0ZSYmKGM9ImRhdGUiKSxkW2NdKGEsYil9dmFyIGQ9e3N0cmluZzpiLHVuZGVmaW5lZDpiLGRhdGU6ZnVuY3Rpb24oYSl7cmV0dXJuIG5ldyBEYXRlKERhdGUucGFyc2UoYSl8fERhdGUubm93KCkpfSwiYm9vbGVhbiI6ZnVuY3Rpb24oYSl7cmV0dXJuIiI9PT1hPyEwOiJmYWxzZSI9PT1hPyExOiEhYX0sbnVtYmVyOmZ1bmN0aW9uKGEpe3ZhciBiPXBhcnNlRmxvYXQoYSk7cmV0dXJuIDA9PT1iJiYoYj1wYXJzZUludChhKSksaXNOYU4oYik/YTpifSxvYmplY3Q6ZnVuY3Rpb24oYSxiKXtpZihudWxsPT09YilyZXR1cm4gYTt0cnl7cmV0dXJuIEpTT04ucGFyc2UoYS5yZXBsYWNlKC8nL2csJyInKSl9Y2F0Y2goYyl7cmV0dXJuIGF9fSwiZnVuY3Rpb24iOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGJ9fTthLmRlc2VyaWFsaXplVmFsdWU9Y30oUG9seW1lciksZnVuY3Rpb24oYSl7dmFyIGI9YS5leHRlbmQsYz17fTtjLmRlY2xhcmF0aW9uPXt9LGMuaW5zdGFuY2U9e30sYy5wdWJsaXNoPWZ1bmN0aW9uKGEsYyl7Zm9yKHZhciBkIGluIGEpYihjLGFbZF0pfSxhLmFwaT1jfShQb2x5bWVyKSxmdW5jdGlvbihhKXt2YXIgYj17YXN5bmM6ZnVuY3Rpb24oYSxiLGMpe1BsYXRmb3JtLmZsdXNoKCksYj1iJiZiLmxlbmd0aD9iOltiXTt2YXIgZD1mdW5jdGlvbigpeyh0aGlzW2FdfHxhKS5hcHBseSh0aGlzLGIpfS5iaW5kKHRoaXMpLGU9Yz9zZXRUaW1lb3V0KGQsYyk6cmVxdWVzdEFuaW1hdGlvbkZyYW1lKGQpO3JldHVybiBjP2U6fmV9LGNhbmNlbEFzeW5jOmZ1bmN0aW9uKGEpezA+YT9jYW5jZWxBbmltYXRpb25GcmFtZSh+YSk6Y2xlYXJUaW1lb3V0KGEpfSxmaXJlOmZ1bmN0aW9uKGEsYixjLGQsZSl7dmFyIGY9Y3x8dGhpcyxiPW51bGw9PT1ifHx2b2lkIDA9PT1iP3t9OmIsZz1uZXcgQ3VzdG9tRXZlbnQoYSx7YnViYmxlczp2b2lkIDAhPT1kP2Q6ITAsY2FuY2VsYWJsZTp2b2lkIDAhPT1lP2U6ITAsZGV0YWlsOmJ9KTtyZXR1cm4gZi5kaXNwYXRjaEV2ZW50KGcpLGd9LGFzeW5jRmlyZTpmdW5jdGlvbigpe3RoaXMuYXN5bmMoImZpcmUiLGFyZ3VtZW50cyl9LGNsYXNzRm9sbG93czpmdW5jdGlvbihhLGIsYyl7YiYmYi5jbGFzc0xpc3QucmVtb3ZlKGMpLGEmJmEuY2xhc3NMaXN0LmFkZChjKX0saW5qZWN0Qm91bmRIVE1MOmZ1bmN0aW9uKGEsYil7dmFyIGM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidGVtcGxhdGUiKTtjLmlubmVySFRNTD1hO3ZhciBkPXRoaXMuaW5zdGFuY2VUZW1wbGF0ZShjKTtyZXR1cm4gYiYmKGIudGV4dENvbnRlbnQ9IiIsYi5hcHBlbmRDaGlsZChkKSksZH19LGM9ZnVuY3Rpb24oKXt9LGQ9e307Yi5hc3luY01ldGhvZD1iLmFzeW5jLGEuYXBpLmluc3RhbmNlLnV0aWxzPWIsYS5ub3A9YyxhLm5vYj1kfShQb2x5bWVyKSxmdW5jdGlvbihhKXt2YXIgYj13aW5kb3cubG9nRmxhZ3N8fHt9LGM9Im9uLSIsZD17RVZFTlRfUFJFRklYOmMsYWRkSG9zdExpc3RlbmVyczpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZXZlbnREZWxlZ2F0ZXM7Yi5ldmVudHMmJk9iamVjdC5rZXlzKGEpLmxlbmd0aD4wJiZjb25zb2xlLmxvZygiWyVzXSBhZGRIb3N0TGlzdGVuZXJzOiIsdGhpcy5sb2NhbE5hbWUsYSk7Zm9yKHZhciBjIGluIGEpe3ZhciBkPWFbY107UG9seW1lckdlc3R1cmVzLmFkZEV2ZW50TGlzdGVuZXIodGhpcyxjLHRoaXMuZWxlbWVudC5nZXRFdmVudEhhbmRsZXIodGhpcyx0aGlzLGQpKX19LGRpc3BhdGNoTWV0aG9kOmZ1bmN0aW9uKGEsYyxkKXtpZihhKXtiLmV2ZW50cyYmY29uc29sZS5ncm91cCgiWyVzXSBkaXNwYXRjaCBbJXNdIixhLmxvY2FsTmFtZSxjKTt2YXIgZT0iZnVuY3Rpb24iPT10eXBlb2YgYz9jOmFbY107ZSYmZVtkPyJhcHBseSI6ImNhbGwiXShhLGQpLGIuZXZlbnRzJiZjb25zb2xlLmdyb3VwRW5kKCksUGxhdGZvcm0uZmx1c2goKX19fTthLmFwaS5pbnN0YW5jZS5ldmVudHM9ZCxhLmFkZEV2ZW50TGlzdGVuZXI9UG9seW1lckdlc3R1cmVzLmFkZEV2ZW50TGlzdGVuZXIsYS5yZW1vdmVFdmVudExpc3RlbmVyPVBvbHltZXJHZXN0dXJlcy5yZW1vdmVFdmVudExpc3RlbmVyfShQb2x5bWVyKSxmdW5jdGlvbihhKXt2YXIgYj17Y29weUluc3RhbmNlQXR0cmlidXRlczpmdW5jdGlvbigpe3ZhciBhPXRoaXMuX2luc3RhbmNlQXR0cmlidXRlcztmb3IodmFyIGIgaW4gYSl0aGlzLmhhc0F0dHJpYnV0ZShiKXx8dGhpcy5zZXRBdHRyaWJ1dGUoYixhW2JdKX0sdGFrZUF0dHJpYnV0ZXM6ZnVuY3Rpb24oKXtpZih0aGlzLl9wdWJsaXNoTEMpZm9yKHZhciBhLGI9MCxjPXRoaXMuYXR0cmlidXRlcyxkPWMubGVuZ3RoOyhhPWNbYl0pJiZkPmI7YisrKXRoaXMuYXR0cmlidXRlVG9Qcm9wZXJ0eShhLm5hbWUsYS52YWx1ZSl9LGF0dHJpYnV0ZVRvUHJvcGVydHk6ZnVuY3Rpb24oYixjKXt2YXIgYj10aGlzLnByb3BlcnR5Rm9yQXR0cmlidXRlKGIpO2lmKGIpe2lmKGMmJmMuc2VhcmNoKGEuYmluZFBhdHRlcm4pPj0wKXJldHVybjt2YXIgZD10aGlzW2JdLGM9dGhpcy5kZXNlcmlhbGl6ZVZhbHVlKGMsZCk7YyE9PWQmJih0aGlzW2JdPWMpfX0scHJvcGVydHlGb3JBdHRyaWJ1dGU6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5fcHVibGlzaExDJiZ0aGlzLl9wdWJsaXNoTENbYV07cmV0dXJuIGJ9LGRlc2VyaWFsaXplVmFsdWU6ZnVuY3Rpb24oYixjKXtyZXR1cm4gYS5kZXNlcmlhbGl6ZVZhbHVlKGIsYyl9LHNlcmlhbGl6ZVZhbHVlOmZ1bmN0aW9uKGEsYil7cmV0dXJuImJvb2xlYW4iPT09Yj9hPyIiOnZvaWQgMDoib2JqZWN0IiE9PWImJiJmdW5jdGlvbiIhPT1iJiZ2b2lkIDAhPT1hP2E6dm9pZCAwfSxyZWZsZWN0UHJvcGVydHlUb0F0dHJpYnV0ZTpmdW5jdGlvbihhKXt2YXIgYj10eXBlb2YgdGhpc1thXSxjPXRoaXMuc2VyaWFsaXplVmFsdWUodGhpc1thXSxiKTt2b2lkIDAhPT1jP3RoaXMuc2V0QXR0cmlidXRlKGEsYyk6ImJvb2xlYW4iPT09YiYmdGhpcy5yZW1vdmVBdHRyaWJ1dGUoYSl9fTthLmFwaS5pbnN0YW5jZS5hdHRyaWJ1dGVzPWJ9KFBvbHltZXIpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSxiKXtyZXR1cm4gYT09PWI/MCE9PWF8fDEvYT09PTEvYjpmKGEpJiZmKGIpPyEwOmEhPT1hJiZiIT09Yn1mdW5jdGlvbiBjKGEsYil7cmV0dXJuIHZvaWQgMD09PWImJm51bGw9PT1hP2I6bnVsbD09PWJ8fHZvaWQgMD09PWI/YTpifXZhciBkPXdpbmRvdy5sb2dGbGFnc3x8e30sZT17b2JqZWN0OnZvaWQgMCx0eXBlOiJ1cGRhdGUiLG5hbWU6dm9pZCAwLG9sZFZhbHVlOnZvaWQgMH0sZj1OdW1iZXIuaXNOYU58fGZ1bmN0aW9uKGEpe3JldHVybiJudW1iZXIiPT10eXBlb2YgYSYmaXNOYU4oYSl9LGc9e2NyZWF0ZVByb3BlcnR5T2JzZXJ2ZXI6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLl9vYnNlcnZlTmFtZXM7aWYoYSYmYS5sZW5ndGgpe3ZhciBiPXRoaXMuX3Byb3BlcnR5T2JzZXJ2ZXI9bmV3IENvbXBvdW5kT2JzZXJ2ZXIoITApO3RoaXMucmVnaXN0ZXJPYnNlcnZlcihiKTtmb3IodmFyIGMsZD0wLGU9YS5sZW5ndGg7ZT5kJiYoYz1hW2RdKTtkKyspYi5hZGRQYXRoKHRoaXMsYyksdGhpcy5vYnNlcnZlQXJyYXlWYWx1ZShjLHRoaXNbY10sbnVsbCl9fSxvcGVuUHJvcGVydHlPYnNlcnZlcjpmdW5jdGlvbigpe3RoaXMuX3Byb3BlcnR5T2JzZXJ2ZXImJnRoaXMuX3Byb3BlcnR5T2JzZXJ2ZXIub3Blbih0aGlzLm5vdGlmeVByb3BlcnR5Q2hhbmdlcyx0aGlzKX0sbm90aWZ5UHJvcGVydHlDaGFuZ2VzOmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGY9e307Zm9yKHZhciBnIGluIGIpaWYoZD1jWzIqZysxXSxlPXRoaXMub2JzZXJ2ZVtkXSl7dmFyIGg9YltnXSxpPWFbZ107dGhpcy5vYnNlcnZlQXJyYXlWYWx1ZShkLGksaCksZltlXXx8KHZvaWQgMCE9PWgmJm51bGwhPT1ofHx2b2lkIDAhPT1pJiZudWxsIT09aSkmJihmW2VdPSEwLHRoaXMuaW52b2tlTWV0aG9kKGUsW2gsaSxhcmd1bWVudHNdKSl9fSxkZWxpdmVyQ2hhbmdlczpmdW5jdGlvbigpe3RoaXMuX3Byb3BlcnR5T2JzZXJ2ZXImJnRoaXMuX3Byb3BlcnR5T2JzZXJ2ZXIuZGVsaXZlcigpfSxwcm9wZXJ0eUNoYW5nZWRfOmZ1bmN0aW9uKGEpe3RoaXMucmVmbGVjdFthXSYmdGhpcy5yZWZsZWN0UHJvcGVydHlUb0F0dHJpYnV0ZShhKX0sb2JzZXJ2ZUFycmF5VmFsdWU6ZnVuY3Rpb24oYSxiLGMpe3ZhciBlPXRoaXMub2JzZXJ2ZVthXTtpZihlJiYoQXJyYXkuaXNBcnJheShjKSYmKGQub2JzZXJ2ZSYmY29uc29sZS5sb2coIlslc10gb2JzZXJ2ZUFycmF5VmFsdWU6IHVucmVnaXN0ZXIgb2JzZXJ2ZXIgWyVzXSIsdGhpcy5sb2NhbE5hbWUsYSksdGhpcy5jbG9zZU5hbWVkT2JzZXJ2ZXIoYSsiX19hcnJheSIpKSxBcnJheS5pc0FycmF5KGIpKSl7ZC5vYnNlcnZlJiZjb25zb2xlLmxvZygiWyVzXSBvYnNlcnZlQXJyYXlWYWx1ZTogcmVnaXN0ZXIgb2JzZXJ2ZXIgWyVzXSIsdGhpcy5sb2NhbE5hbWUsYSxiKTt2YXIgZj1uZXcgQXJyYXlPYnNlcnZlcihiKTtmLm9wZW4oZnVuY3Rpb24oYSl7dGhpcy5pbnZva2VNZXRob2QoZSxbYV0pfSx0aGlzKSx0aGlzLnJlZ2lzdGVyTmFtZWRPYnNlcnZlcihhKyJfX2FycmF5IixmKX19LGVtaXRQcm9wZXJ0eUNoYW5nZVJlY29yZDpmdW5jdGlvbihhLGMsZCl7aWYoIWIoYyxkKSYmKHRoaXMucHJvcGVydHlDaGFuZ2VkXyhhLGMsZCksT2JzZXJ2ZXIuaGFzT2JqZWN0T2JzZXJ2ZSkpe3ZhciBmPXRoaXMubm90aWZpZXJfO2Z8fChmPXRoaXMubm90aWZpZXJfPU9iamVjdC5nZXROb3RpZmllcih0aGlzKSksZS5vYmplY3Q9dGhpcyxlLm5hbWU9YSxlLm9sZFZhbHVlPWQsZi5ub3RpZnkoZSl9fSxiaW5kVG9BY2Nlc3NvcjpmdW5jdGlvbihhLGMsZCl7dmFyIGU9YSsiXyIsZj1hKyJPYnNlcnZhYmxlXyI7dGhpc1tmXT1jO3ZhciBnPXRoaXNbZV0saD10aGlzLGk9Yy5vcGVuKGZ1bmN0aW9uKGIsYyl7aFtlXT1iLGguZW1pdFByb3BlcnR5Q2hhbmdlUmVjb3JkKGEsYixjKX0pO2lmKGQmJiFiKGcsaSkpe3ZhciBqPWQoZyxpKTtiKGksail8fChpPWosYy5zZXRWYWx1ZSYmYy5zZXRWYWx1ZShpKSl9dGhpc1tlXT1pLHRoaXMuZW1pdFByb3BlcnR5Q2hhbmdlUmVjb3JkKGEsaSxnKTt2YXIgaz17Y2xvc2U6ZnVuY3Rpb24oKXtjLmNsb3NlKCksaFtmXT12b2lkIDB9fTtyZXR1cm4gdGhpcy5yZWdpc3Rlck9ic2VydmVyKGspLGt9LGNyZWF0ZUNvbXB1dGVkUHJvcGVydGllczpmdW5jdGlvbigpe2lmKHRoaXMuX2NvbXB1dGVkTmFtZXMpZm9yKHZhciBhPTA7YTx0aGlzLl9jb21wdXRlZE5hbWVzLmxlbmd0aDthKyspe3ZhciBiPXRoaXMuX2NvbXB1dGVkTmFtZXNbYV0sYz10aGlzLmNvbXB1dGVkW2JdO3RyeXt2YXIgZD1Qb2x5bWVyRXhwcmVzc2lvbnMuZ2V0RXhwcmVzc2lvbihjKSxlPWQuZ2V0QmluZGluZyh0aGlzLHRoaXMuZWxlbWVudC5zeW50YXgpO3RoaXMuYmluZFRvQWNjZXNzb3IoYixlKX1jYXRjaChmKXtjb25zb2xlLmVycm9yKCJGYWlsZWQgdG8gY3JlYXRlIGNvbXB1dGVkIHByb3BlcnR5IixmKX19fSxiaW5kUHJvcGVydHk6ZnVuY3Rpb24oYSxiLGQpe3JldHVybiBkP3ZvaWQodGhpc1thXT1iKTp0aGlzLmJpbmRUb0FjY2Vzc29yKGEsYixjKX0saW52b2tlTWV0aG9kOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpc1thXXx8YTsiZnVuY3Rpb24iPT10eXBlb2YgYyYmYy5hcHBseSh0aGlzLGIpfSxyZWdpc3Rlck9ic2VydmVyOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLl9vYnNlcnZlcnM/dm9pZCB0aGlzLl9vYnNlcnZlcnMucHVzaChhKTp2b2lkKHRoaXMuX29ic2VydmVycz1bYV0pfSxjbG9zZU9ic2VydmVyczpmdW5jdGlvbigpe2lmKHRoaXMuX29ic2VydmVycyl7Zm9yKHZhciBhPXRoaXMuX29ic2VydmVycyxiPTA7YjxhLmxlbmd0aDtiKyspe3ZhciBjPWFbYl07YyYmImZ1bmN0aW9uIj09dHlwZW9mIGMuY2xvc2UmJmMuY2xvc2UoKX10aGlzLl9vYnNlcnZlcnM9W119fSxyZWdpc3Rlck5hbWVkT2JzZXJ2ZXI6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLl9uYW1lZE9ic2VydmVyc3x8KHRoaXMuX25hbWVkT2JzZXJ2ZXJzPXt9KTtjW2FdPWJ9LGNsb3NlTmFtZWRPYnNlcnZlcjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLl9uYW1lZE9ic2VydmVycztyZXR1cm4gYiYmYlthXT8oYlthXS5jbG9zZSgpLGJbYV09bnVsbCwhMCk6dm9pZCAwfSxjbG9zZU5hbWVkT2JzZXJ2ZXJzOmZ1bmN0aW9uKCl7aWYodGhpcy5fbmFtZWRPYnNlcnZlcnMpe2Zvcih2YXIgYSBpbiB0aGlzLl9uYW1lZE9ic2VydmVycyl0aGlzLmNsb3NlTmFtZWRPYnNlcnZlcihhKTt0aGlzLl9uYW1lZE9ic2VydmVycz17fX19fTthLmFwaS5pbnN0YW5jZS5wcm9wZXJ0aWVzPWd9KFBvbHltZXIpLGZ1bmN0aW9uKGEpe3ZhciBiPXdpbmRvdy5sb2dGbGFnc3x8MCxjPXtpbnN0YW5jZVRlbXBsYXRlOmZ1bmN0aW9uKGEpe0hUTUxUZW1wbGF0ZUVsZW1lbnQuZGVjb3JhdGUoYSk7Zm9yKHZhciBiPXRoaXMuc3ludGF4fHwhYS5iaW5kaW5nRGVsZWdhdGUmJnRoaXMuZWxlbWVudC5zeW50YXgsYz1hLmNyZWF0ZUluc3RhbmNlKHRoaXMsYiksZD1jLmJpbmRpbmdzXyxlPTA7ZTxkLmxlbmd0aDtlKyspdGhpcy5yZWdpc3Rlck9ic2VydmVyKGRbZV0pO3JldHVybiBjfSxiaW5kOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD10aGlzLnByb3BlcnR5Rm9yQXR0cmlidXRlKGEpO2lmKGQpe3ZhciBlPXRoaXMuYmluZFByb3BlcnR5KGQsYixjKTtyZXR1cm4gUGxhdGZvcm0uZW5hYmxlQmluZGluZ3NSZWZsZWN0aW9uJiZlJiYoZS5wYXRoPWIucGF0aF8sdGhpcy5fcmVjb3JkQmluZGluZyhkLGUpKSx0aGlzLnJlZmxlY3RbZF0mJnRoaXMucmVmbGVjdFByb3BlcnR5VG9BdHRyaWJ1dGUoZCksZX1yZXR1cm4gdGhpcy5taXhpblN1cGVyKGFyZ3VtZW50cyl9LGJpbmRGaW5pc2hlZDpmdW5jdGlvbigpe3RoaXMubWFrZUVsZW1lbnRSZWFkeSgpfSxfcmVjb3JkQmluZGluZzpmdW5jdGlvbihhLGIpe3RoaXMuYmluZGluZ3NfPXRoaXMuYmluZGluZ3NffHx7fSx0aGlzLmJpbmRpbmdzX1thXT1ifSxhc3luY1VuYmluZEFsbDpmdW5jdGlvbigpe3RoaXMuX3VuYm91bmR8fChiLnVuYmluZCYmY29uc29sZS5sb2coIlslc10gYXN5bmNVbmJpbmRBbGwiLHRoaXMubG9jYWxOYW1lKSx0aGlzLl91bmJpbmRBbGxKb2I9dGhpcy5qb2IodGhpcy5fdW5iaW5kQWxsSm9iLHRoaXMudW5iaW5kQWxsLDApKX0sdW5iaW5kQWxsOmZ1bmN0aW9uKCl7dGhpcy5fdW5ib3VuZHx8KHRoaXMuY2xvc2VPYnNlcnZlcnMoKSx0aGlzLmNsb3NlTmFtZWRPYnNlcnZlcnMoKSx0aGlzLl91bmJvdW5kPSEwKX0sY2FuY2VsVW5iaW5kQWxsOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3VuYm91bmQ/dm9pZChiLnVuYmluZCYmY29uc29sZS53YXJuKCJbJXNdIGFscmVhZHkgdW5ib3VuZCwgY2Fubm90IGNhbmNlbCB1bmJpbmRBbGwiLHRoaXMubG9jYWxOYW1lKSk6KGIudW5iaW5kJiZjb25zb2xlLmxvZygiWyVzXSBjYW5jZWxVbmJpbmRBbGwiLHRoaXMubG9jYWxOYW1lKSx2b2lkKHRoaXMuX3VuYmluZEFsbEpvYiYmKHRoaXMuX3VuYmluZEFsbEpvYj10aGlzLl91bmJpbmRBbGxKb2Iuc3RvcCgpKSkpfX0sZD0vXHtceyhbXnt9XSopfX0vO2EuYmluZFBhdHRlcm49ZCxhLmFwaS5pbnN0YW5jZS5tZHY9Y30oUG9seW1lciksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhKXtyZXR1cm4gYS5oYXNPd25Qcm9wZXJ0eSgiUG9seW1lckJhc2UiKX1mdW5jdGlvbiBjKCl7fXZhciBkPXtQb2x5bWVyQmFzZTohMCxqb2I6ZnVuY3Rpb24oYSxiLGMpe2lmKCJzdHJpbmciIT10eXBlb2YgYSlyZXR1cm4gUG9seW1lci5qb2IuY2FsbCh0aGlzLGEsYixjKTt2YXIgZD0iX19fIithO3RoaXNbZF09UG9seW1lci5qb2IuY2FsbCh0aGlzLHRoaXNbZF0sYixjKX0sInN1cGVyIjpQb2x5bWVyLnN1cGVyLGNyZWF0ZWQ6ZnVuY3Rpb24oKXt9LHJlYWR5OmZ1bmN0aW9uKCl7fSxjcmVhdGVkQ2FsbGJhY2s6ZnVuY3Rpb24oKXt0aGlzLnRlbXBsYXRlSW5zdGFuY2UmJnRoaXMudGVtcGxhdGVJbnN0YW5jZS5tb2RlbCYmY29uc29sZS53YXJuKCJBdHRyaWJ1dGVzIG9uICIrdGhpcy5sb2NhbE5hbWUrIiB3ZXJlIGRhdGEgYm91bmQgcHJpb3IgdG8gUG9seW1lciB1cGdyYWRpbmcgdGhlIGVsZW1lbnQuIFRoaXMgbWF5IHJlc3VsdCBpbiBpbmNvcnJlY3QgYmluZGluZyB0eXBlcy4iKSx0aGlzLmNyZWF0ZWQoKSx0aGlzLnByZXBhcmVFbGVtZW50KCksdGhpcy5vd25lckRvY3VtZW50LmlzU3RhZ2luZ0RvY3VtZW50fHx0aGlzLm1ha2VFbGVtZW50UmVhZHkoKX0scHJlcGFyZUVsZW1lbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZWxlbWVudFByZXBhcmVkP3ZvaWQgY29uc29sZS53YXJuKCJFbGVtZW50IGFscmVhZHkgcHJlcGFyZWQiLHRoaXMubG9jYWxOYW1lKToodGhpcy5fZWxlbWVudFByZXBhcmVkPSEwLHRoaXMuc2hhZG93Um9vdHM9e30sdGhpcy5jcmVhdGVQcm9wZXJ0eU9ic2VydmVyKCksdGhpcy5vcGVuUHJvcGVydHlPYnNlcnZlcigpLHRoaXMuY29weUluc3RhbmNlQXR0cmlidXRlcygpLHRoaXMudGFrZUF0dHJpYnV0ZXMoKSx2b2lkIHRoaXMuYWRkSG9zdExpc3RlbmVycygpKX0sbWFrZUVsZW1lbnRSZWFkeTpmdW5jdGlvbigpe3RoaXMuX3JlYWRpZWR8fCh0aGlzLl9yZWFkaWVkPSEwLHRoaXMuY3JlYXRlQ29tcHV0ZWRQcm9wZXJ0aWVzKCksdGhpcy5wYXJzZURlY2xhcmF0aW9ucyh0aGlzLl9fcHJvdG9fXyksdGhpcy5yZW1vdmVBdHRyaWJ1dGUoInVucmVzb2x2ZWQiKSx0aGlzLnJlYWR5KCkpfSxhdHRhY2hlZENhbGxiYWNrOmZ1bmN0aW9uKCl7dGhpcy5jYW5jZWxVbmJpbmRBbGwoKSx0aGlzLmF0dGFjaGVkJiZ0aGlzLmF0dGFjaGVkKCksdGhpcy5lbnRlcmVkVmlldyYmdGhpcy5lbnRlcmVkVmlldygpLHRoaXMuaGFzQmVlbkF0dGFjaGVkfHwodGhpcy5oYXNCZWVuQXR0YWNoZWQ9ITAsdGhpcy5kb21SZWFkeSYmdGhpcy5hc3luYygiZG9tUmVhZHkiKSl9LGRldGFjaGVkQ2FsbGJhY2s6ZnVuY3Rpb24oKXt0aGlzLnByZXZlbnREaXNwb3NlfHx0aGlzLmFzeW5jVW5iaW5kQWxsKCksdGhpcy5kZXRhY2hlZCYmdGhpcy5kZXRhY2hlZCgpLHRoaXMubGVmdFZpZXcmJnRoaXMubGVmdFZpZXcoKX0sZW50ZXJlZFZpZXdDYWxsYmFjazpmdW5jdGlvbigpe3RoaXMuYXR0YWNoZWRDYWxsYmFjaygpfSxsZWZ0Vmlld0NhbGxiYWNrOmZ1bmN0aW9uKCl7dGhpcy5kZXRhY2hlZENhbGxiYWNrKCl9LGVudGVyZWREb2N1bWVudENhbGxiYWNrOmZ1bmN0aW9uKCl7dGhpcy5hdHRhY2hlZENhbGxiYWNrKCkKfSxsZWZ0RG9jdW1lbnRDYWxsYmFjazpmdW5jdGlvbigpe3RoaXMuZGV0YWNoZWRDYWxsYmFjaygpfSxwYXJzZURlY2xhcmF0aW9uczpmdW5jdGlvbihhKXthJiZhLmVsZW1lbnQmJih0aGlzLnBhcnNlRGVjbGFyYXRpb25zKGEuX19wcm90b19fKSxhLnBhcnNlRGVjbGFyYXRpb24uY2FsbCh0aGlzLGEuZWxlbWVudCkpfSxwYXJzZURlY2xhcmF0aW9uOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZmV0Y2hUZW1wbGF0ZShhKTtpZihiKXt2YXIgYz10aGlzLnNoYWRvd0Zyb21UZW1wbGF0ZShiKTt0aGlzLnNoYWRvd1Jvb3RzW2EubmFtZV09Y319LGZldGNoVGVtcGxhdGU6ZnVuY3Rpb24oYSl7cmV0dXJuIGEucXVlcnlTZWxlY3RvcigidGVtcGxhdGUiKX0sc2hhZG93RnJvbVRlbXBsYXRlOmZ1bmN0aW9uKGEpe2lmKGEpe3ZhciBiPXRoaXMuY3JlYXRlU2hhZG93Um9vdCgpLGM9dGhpcy5pbnN0YW5jZVRlbXBsYXRlKGEpO3JldHVybiBiLmFwcGVuZENoaWxkKGMpLHRoaXMuc2hhZG93Um9vdFJlYWR5KGIsYSksYn19LGxpZ2h0RnJvbVRlbXBsYXRlOmZ1bmN0aW9uKGEsYil7aWYoYSl7dGhpcy5ldmVudENvbnRyb2xsZXI9dGhpczt2YXIgYz10aGlzLmluc3RhbmNlVGVtcGxhdGUoYSk7cmV0dXJuIGI/dGhpcy5pbnNlcnRCZWZvcmUoYyxiKTp0aGlzLmFwcGVuZENoaWxkKGMpLHRoaXMuc2hhZG93Um9vdFJlYWR5KHRoaXMpLGN9fSxzaGFkb3dSb290UmVhZHk6ZnVuY3Rpb24oYSl7dGhpcy5tYXJzaGFsTm9kZVJlZmVyZW5jZXMoYSl9LG1hcnNoYWxOb2RlUmVmZXJlbmNlczpmdW5jdGlvbihhKXt2YXIgYj10aGlzLiQ9dGhpcy4kfHx7fTtpZihhKWZvcih2YXIgYyxkPWEucXVlcnlTZWxlY3RvckFsbCgiW2lkXSIpLGU9MCxmPWQubGVuZ3RoO2Y+ZSYmKGM9ZFtlXSk7ZSsrKWJbYy5pZF09Y30sYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrOmZ1bmN0aW9uKGEpeyJjbGFzcyIhPT1hJiYic3R5bGUiIT09YSYmdGhpcy5hdHRyaWJ1dGVUb1Byb3BlcnR5KGEsdGhpcy5nZXRBdHRyaWJ1dGUoYSkpLHRoaXMuYXR0cmlidXRlQ2hhbmdlZCYmdGhpcy5hdHRyaWJ1dGVDaGFuZ2VkLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sb25NdXRhdGlvbjpmdW5jdGlvbihhLGIpe3ZhciBjPW5ldyBNdXRhdGlvbk9ic2VydmVyKGZ1bmN0aW9uKGEpe2IuY2FsbCh0aGlzLGMsYSksYy5kaXNjb25uZWN0KCl9LmJpbmQodGhpcykpO2Mub2JzZXJ2ZShhLHtjaGlsZExpc3Q6ITAsc3VidHJlZTohMH0pfX07Yy5wcm90b3R5cGU9ZCxkLmNvbnN0cnVjdG9yPWMsYS5CYXNlPWMsYS5pc0Jhc2U9YixhLmFwaS5pbnN0YW5jZS5iYXNlPWR9KFBvbHltZXIpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7cmV0dXJuIGEuX19wcm90b19ffWZ1bmN0aW9uIGMoYSxiKXt2YXIgYz0iIixkPSExO2ImJihjPWIubG9jYWxOYW1lLGQ9Yi5oYXNBdHRyaWJ1dGUoImlzIikpO3ZhciBlPVBsYXRmb3JtLlNoYWRvd0NTUy5tYWtlU2NvcGVTZWxlY3RvcihjLGQpO3JldHVybiBQbGF0Zm9ybS5TaGFkb3dDU1Muc2hpbUNzc1RleHQoYSxlKX12YXIgZD0od2luZG93LmxvZ0ZsYWdzfHx7fSx3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGU9ImVsZW1lbnQiLGY9ImNvbnRyb2xsZXIiLGc9e1NUWUxFX1NDT1BFX0FUVFJJQlVURTplLGluc3RhbGxDb250cm9sbGVyU3R5bGVzOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5maW5kU3R5bGVTY29wZSgpO2lmKGEmJiF0aGlzLnNjb3BlSGFzTmFtZWRTdHlsZShhLHRoaXMubG9jYWxOYW1lKSl7Zm9yKHZhciBjPWIodGhpcyksZD0iIjtjJiZjLmVsZW1lbnQ7KWQrPWMuZWxlbWVudC5jc3NUZXh0Rm9yU2NvcGUoZiksYz1iKGMpO2QmJnRoaXMuaW5zdGFsbFNjb3BlQ3NzVGV4dChkLGEpfX0saW5zdGFsbFNjb3BlU3R5bGU6ZnVuY3Rpb24oYSxiLGMpe3ZhciBjPWN8fHRoaXMuZmluZFN0eWxlU2NvcGUoKSxiPWJ8fCIiO2lmKGMmJiF0aGlzLnNjb3BlSGFzTmFtZWRTdHlsZShjLHRoaXMubG9jYWxOYW1lK2IpKXt2YXIgZD0iIjtpZihhIGluc3RhbmNlb2YgQXJyYXkpZm9yKHZhciBlLGY9MCxnPWEubGVuZ3RoO2c+ZiYmKGU9YVtmXSk7ZisrKWQrPWUudGV4dENvbnRlbnQrIlxuXG4iO2Vsc2UgZD1hLnRleHRDb250ZW50O3RoaXMuaW5zdGFsbFNjb3BlQ3NzVGV4dChkLGMsYil9fSxpbnN0YWxsU2NvcGVDc3NUZXh0OmZ1bmN0aW9uKGEsYixlKXtpZihiPWJ8fHRoaXMuZmluZFN0eWxlU2NvcGUoKSxlPWV8fCIiLGIpe2QmJihhPWMoYSxiLmhvc3QpKTt2YXIgZz10aGlzLmVsZW1lbnQuY3NzVGV4dFRvU2NvcGVTdHlsZShhLGYpO1BvbHltZXIuYXBwbHlTdHlsZVRvU2NvcGUoZyxiKSx0aGlzLnN0eWxlQ2FjaGVGb3JTY29wZShiKVt0aGlzLmxvY2FsTmFtZStlXT0hMH19LGZpbmRTdHlsZVNjb3BlOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1hfHx0aGlzO2IucGFyZW50Tm9kZTspYj1iLnBhcmVudE5vZGU7cmV0dXJuIGJ9LHNjb3BlSGFzTmFtZWRTdHlsZTpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuc3R5bGVDYWNoZUZvclNjb3BlKGEpO3JldHVybiBjW2JdfSxzdHlsZUNhY2hlRm9yU2NvcGU6ZnVuY3Rpb24oYSl7aWYoZCl7dmFyIGI9YS5ob3N0P2EuaG9zdC5sb2NhbE5hbWU6YS5sb2NhbE5hbWU7cmV0dXJuIGhbYl18fChoW2JdPXt9KX1yZXR1cm4gYS5fc2NvcGVTdHlsZXM9YS5fc2NvcGVTdHlsZXN8fHt9fX0saD17fTthLmFwaS5pbnN0YW5jZS5zdHlsZXM9Z30oUG9seW1lciksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhLGIpe2lmKCJzdHJpbmciIT10eXBlb2YgYSl7dmFyIGM9Ynx8ZG9jdW1lbnQuX2N1cnJlbnRTY3JpcHQ7aWYoYj1hLGE9YyYmYy5wYXJlbnROb2RlJiZjLnBhcmVudE5vZGUuZ2V0QXR0cmlidXRlP2MucGFyZW50Tm9kZS5nZXRBdHRyaWJ1dGUoIm5hbWUiKToiIiwhYSl0aHJvdyJFbGVtZW50IG5hbWUgY291bGQgbm90IGJlIGluZmVycmVkLiJ9aWYoZlthXSl0aHJvdyJBbHJlYWR5IHJlZ2lzdGVyZWQgKFBvbHltZXIpIHByb3RvdHlwZSBmb3IgZWxlbWVudCAiK2E7ZShhLGIpLGQoYSl9ZnVuY3Rpb24gYyhhLGIpe2hbYV09Yn1mdW5jdGlvbiBkKGEpe2hbYV0mJihoW2FdLnJlZ2lzdGVyV2hlblJlYWR5KCksZGVsZXRlIGhbYV0pfWZ1bmN0aW9uIGUoYSxiKXtyZXR1cm4gaVthXT1ifHx7fX1mdW5jdGlvbiBmKGEpe3JldHVybiBpW2FdfXZhciBnPWEuZXh0ZW5kLGg9KGEuYXBpLHt9KSxpPXt9O2EuZ2V0UmVnaXN0ZXJlZFByb3RvdHlwZT1mLGEud2FpdGluZ0ZvclByb3RvdHlwZT1jLHdpbmRvdy5Qb2x5bWVyPWIsZyhQb2x5bWVyLGEpLFBsYXRmb3JtLmNvbnN1bWVEZWNsYXJhdGlvbnMmJlBsYXRmb3JtLmNvbnN1bWVEZWNsYXJhdGlvbnMoZnVuY3Rpb24oYSl7aWYoYSlmb3IodmFyIGMsZD0wLGU9YS5sZW5ndGg7ZT5kJiYoYz1hW2RdKTtkKyspYi5hcHBseShudWxsLGMpfSl9KFBvbHltZXIpLGZ1bmN0aW9uKGEpe3ZhciBiPXtyZXNvbHZlRWxlbWVudFBhdGhzOmZ1bmN0aW9uKGEpe1BvbHltZXIudXJsUmVzb2x2ZXIucmVzb2x2ZURvbShhKX0sYWRkUmVzb2x2ZVBhdGhBcGk6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmdldEF0dHJpYnV0ZSgiYXNzZXRwYXRoIil8fCIiLGI9bmV3IFVSTChhLHRoaXMub3duZXJEb2N1bWVudC5iYXNlVVJJKTt0aGlzLnByb3RvdHlwZS5yZXNvbHZlUGF0aD1mdW5jdGlvbihhLGMpe3ZhciBkPW5ldyBVUkwoYSxjfHxiKTtyZXR1cm4gZC5ocmVmfX19O2EuYXBpLmRlY2xhcmF0aW9uLnBhdGg9Yn0oUG9seW1lciksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhLGIpe3ZhciBjPW5ldyBVUkwoYS5nZXRBdHRyaWJ1dGUoImhyZWYiKSxiKS5ocmVmO3JldHVybiJAaW1wb3J0ICciK2MrIic7In1mdW5jdGlvbiBjKGEsYil7aWYoYSl7Yj09PWRvY3VtZW50JiYoYj1kb2N1bWVudC5oZWFkKSxpJiYoYj1kb2N1bWVudC5oZWFkKTt2YXIgYz1kKGEudGV4dENvbnRlbnQpLGU9YS5nZXRBdHRyaWJ1dGUoaCk7ZSYmYy5zZXRBdHRyaWJ1dGUoaCxlKTt2YXIgZj1iLmZpcnN0RWxlbWVudENoaWxkO2lmKGI9PT1kb2N1bWVudC5oZWFkKXt2YXIgZz0ic3R5bGVbIitoKyJdIixqPWRvY3VtZW50LmhlYWQucXVlcnlTZWxlY3RvckFsbChnKTtqLmxlbmd0aCYmKGY9altqLmxlbmd0aC0xXS5uZXh0RWxlbWVudFNpYmxpbmcpfWIuaW5zZXJ0QmVmb3JlKGMsZil9fWZ1bmN0aW9uIGQoYSxiKXtiPWJ8fGRvY3VtZW50LGI9Yi5jcmVhdGVFbGVtZW50P2I6Yi5vd25lckRvY3VtZW50O3ZhciBjPWIuY3JlYXRlRWxlbWVudCgic3R5bGUiKTtyZXR1cm4gYy50ZXh0Q29udGVudD1hLGN9ZnVuY3Rpb24gZShhKXtyZXR1cm4gYSYmYS5fX3Jlc291cmNlfHwiIn1mdW5jdGlvbiBmKGEsYil7cmV0dXJuIHE/cS5jYWxsKGEsYik6dm9pZCAwfXZhciBnPSh3aW5kb3cubG9nRmxhZ3N8fHt9LGEuYXBpLmluc3RhbmNlLnN0eWxlcyksaD1nLlNUWUxFX1NDT1BFX0FUVFJJQlVURSxpPXdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCxqPSJzdHlsZSIsaz0iQGltcG9ydCIsbD0ibGlua1tyZWw9c3R5bGVzaGVldF0iLG09Imdsb2JhbCIsbj0icG9seW1lci1zY29wZSIsbz17bG9hZFN0eWxlczpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmZldGNoVGVtcGxhdGUoKSxjPWImJnRoaXMudGVtcGxhdGVDb250ZW50KCk7aWYoYyl7dGhpcy5jb252ZXJ0U2hlZXRzVG9TdHlsZXMoYyk7dmFyIGQ9dGhpcy5maW5kTG9hZGFibGVTdHlsZXMoYyk7aWYoZC5sZW5ndGgpe3ZhciBlPWIub3duZXJEb2N1bWVudC5iYXNlVVJJO3JldHVybiBQb2x5bWVyLnN0eWxlUmVzb2x2ZXIubG9hZFN0eWxlcyhkLGUsYSl9fWEmJmEoKX0sY29udmVydFNoZWV0c1RvU3R5bGVzOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYyxlLGY9YS5xdWVyeVNlbGVjdG9yQWxsKGwpLGc9MCxoPWYubGVuZ3RoO2g+ZyYmKGM9ZltnXSk7ZysrKWU9ZChiKGMsdGhpcy5vd25lckRvY3VtZW50LmJhc2VVUkkpLHRoaXMub3duZXJEb2N1bWVudCksdGhpcy5jb3B5U2hlZXRBdHRyaWJ1dGVzKGUsYyksYy5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChlLGMpfSxjb3B5U2hlZXRBdHRyaWJ1dGVzOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjLGQ9MCxlPWIuYXR0cmlidXRlcyxmPWUubGVuZ3RoOyhjPWVbZF0pJiZmPmQ7ZCsrKSJyZWwiIT09Yy5uYW1lJiYiaHJlZiIhPT1jLm5hbWUmJmEuc2V0QXR0cmlidXRlKGMubmFtZSxjLnZhbHVlKX0sZmluZExvYWRhYmxlU3R5bGVzOmZ1bmN0aW9uKGEpe3ZhciBiPVtdO2lmKGEpZm9yKHZhciBjLGQ9YS5xdWVyeVNlbGVjdG9yQWxsKGopLGU9MCxmPWQubGVuZ3RoO2Y+ZSYmKGM9ZFtlXSk7ZSsrKWMudGV4dENvbnRlbnQubWF0Y2goaykmJmIucHVzaChjKTtyZXR1cm4gYn0saW5zdGFsbFNoZWV0czpmdW5jdGlvbigpe3RoaXMuY2FjaGVTaGVldHMoKSx0aGlzLmNhY2hlU3R5bGVzKCksdGhpcy5pbnN0YWxsTG9jYWxTaGVldHMoKSx0aGlzLmluc3RhbGxHbG9iYWxTdHlsZXMoKX0sY2FjaGVTaGVldHM6ZnVuY3Rpb24oKXt0aGlzLnNoZWV0cz10aGlzLmZpbmROb2RlcyhsKSx0aGlzLnNoZWV0cy5mb3JFYWNoKGZ1bmN0aW9uKGEpe2EucGFyZW50Tm9kZSYmYS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGEpfSl9LGNhY2hlU3R5bGVzOmZ1bmN0aW9uKCl7dGhpcy5zdHlsZXM9dGhpcy5maW5kTm9kZXMoaisiWyIrbisiXSIpLHRoaXMuc3R5bGVzLmZvckVhY2goZnVuY3Rpb24oYSl7YS5wYXJlbnROb2RlJiZhLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYSl9KX0saW5zdGFsbExvY2FsU2hlZXRzOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5zaGVldHMuZmlsdGVyKGZ1bmN0aW9uKGEpe3JldHVybiFhLmhhc0F0dHJpYnV0ZShuKX0pLGI9dGhpcy50ZW1wbGF0ZUNvbnRlbnQoKTtpZihiKXt2YXIgYz0iIjtpZihhLmZvckVhY2goZnVuY3Rpb24oYSl7Yys9ZShhKSsiXG4ifSksYyl7dmFyIGY9ZChjLHRoaXMub3duZXJEb2N1bWVudCk7Yi5pbnNlcnRCZWZvcmUoZixiLmZpcnN0Q2hpbGQpfX19LGZpbmROb2RlczpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMucXVlcnlTZWxlY3RvckFsbChhKS5hcnJheSgpLGQ9dGhpcy50ZW1wbGF0ZUNvbnRlbnQoKTtpZihkKXt2YXIgZT1kLnF1ZXJ5U2VsZWN0b3JBbGwoYSkuYXJyYXkoKTtjPWMuY29uY2F0KGUpfXJldHVybiBiP2MuZmlsdGVyKGIpOmN9LGluc3RhbGxHbG9iYWxTdHlsZXM6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnN0eWxlRm9yU2NvcGUobSk7YyhhLGRvY3VtZW50LmhlYWQpfSxjc3NUZXh0Rm9yU2NvcGU6ZnVuY3Rpb24oYSl7dmFyIGI9IiIsYz0iWyIrbisiPSIrYSsiXSIsZD1mdW5jdGlvbihhKXtyZXR1cm4gZihhLGMpfSxnPXRoaXMuc2hlZXRzLmZpbHRlcihkKTtnLmZvckVhY2goZnVuY3Rpb24oYSl7Yis9ZShhKSsiXG5cbiJ9KTt2YXIgaD10aGlzLnN0eWxlcy5maWx0ZXIoZCk7cmV0dXJuIGguZm9yRWFjaChmdW5jdGlvbihhKXtiKz1hLnRleHRDb250ZW50KyJcblxuIn0pLGJ9LHN0eWxlRm9yU2NvcGU6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jc3NUZXh0Rm9yU2NvcGUoYSk7cmV0dXJuIHRoaXMuY3NzVGV4dFRvU2NvcGVTdHlsZShiLGEpfSxjc3NUZXh0VG9TY29wZVN0eWxlOmZ1bmN0aW9uKGEsYil7aWYoYSl7dmFyIGM9ZChhKTtyZXR1cm4gYy5zZXRBdHRyaWJ1dGUoaCx0aGlzLmdldEF0dHJpYnV0ZSgibmFtZSIpKyItIitiKSxjfX19LHA9SFRNTEVsZW1lbnQucHJvdG90eXBlLHE9cC5tYXRjaGVzfHxwLm1hdGNoZXNTZWxlY3Rvcnx8cC53ZWJraXRNYXRjaGVzU2VsZWN0b3J8fHAubW96TWF0Y2hlc1NlbGVjdG9yO2EuYXBpLmRlY2xhcmF0aW9uLnN0eWxlcz1vLGEuYXBwbHlTdHlsZVRvU2NvcGU9Y30oUG9seW1lciksZnVuY3Rpb24oYSl7dmFyIGI9KHdpbmRvdy5sb2dGbGFnc3x8e30sYS5hcGkuaW5zdGFuY2UuZXZlbnRzKSxjPWIuRVZFTlRfUFJFRklYLGQ9e307WyJ3ZWJraXRBbmltYXRpb25TdGFydCIsIndlYmtpdEFuaW1hdGlvbkVuZCIsIndlYmtpdFRyYW5zaXRpb25FbmQiLCJET01Gb2N1c091dCIsIkRPTUZvY3VzSW4iLCJET01Nb3VzZVNjcm9sbCJdLmZvckVhY2goZnVuY3Rpb24oYSl7ZFthLnRvTG93ZXJDYXNlKCldPWF9KTt2YXIgZT17cGFyc2VIb3N0RXZlbnRzOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5wcm90b3R5cGUuZXZlbnREZWxlZ2F0ZXM7dGhpcy5hZGRBdHRyaWJ1dGVEZWxlZ2F0ZXMoYSl9LGFkZEF0dHJpYnV0ZURlbGVnYXRlczpmdW5jdGlvbihhKXtmb3IodmFyIGIsYz0wO2I9dGhpcy5hdHRyaWJ1dGVzW2NdO2MrKyl0aGlzLmhhc0V2ZW50UHJlZml4KGIubmFtZSkmJihhW3RoaXMucmVtb3ZlRXZlbnRQcmVmaXgoYi5uYW1lKV09Yi52YWx1ZS5yZXBsYWNlKCJ7eyIsIiIpLnJlcGxhY2UoIn19IiwiIikudHJpbSgpKX0saGFzRXZlbnRQcmVmaXg6ZnVuY3Rpb24oYSl7cmV0dXJuIGEmJiJvIj09PWFbMF0mJiJuIj09PWFbMV0mJiItIj09PWFbMl19LHJlbW92ZUV2ZW50UHJlZml4OmZ1bmN0aW9uKGEpe3JldHVybiBhLnNsaWNlKGYpfSxmaW5kQ29udHJvbGxlcjpmdW5jdGlvbihhKXtmb3IoO2EucGFyZW50Tm9kZTspe2lmKGEuZXZlbnRDb250cm9sbGVyKXJldHVybiBhLmV2ZW50Q29udHJvbGxlcjthPWEucGFyZW50Tm9kZX1yZXR1cm4gYS5ob3N0fSxnZXRFdmVudEhhbmRsZXI6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXRoaXM7cmV0dXJuIGZ1bmN0aW9uKGUpe2EmJmEuUG9seW1lckJhc2V8fChhPWQuZmluZENvbnRyb2xsZXIoYikpO3ZhciBmPVtlLGUuZGV0YWlsLGUuY3VycmVudFRhcmdldF07YS5kaXNwYXRjaE1ldGhvZChhLGMsZil9fSxwcmVwYXJlRXZlbnRCaW5kaW5nOmZ1bmN0aW9uKGEsYil7aWYodGhpcy5oYXNFdmVudFByZWZpeChiKSl7dmFyIGM9dGhpcy5yZW1vdmVFdmVudFByZWZpeChiKTtjPWRbY118fGM7dmFyIGU9dGhpcztyZXR1cm4gZnVuY3Rpb24oYixkLGYpe2Z1bmN0aW9uIGcoKXtyZXR1cm4ie3sgIithKyIgfX0ifXZhciBoPWUuZ2V0RXZlbnRIYW5kbGVyKHZvaWQgMCxkLGEpO3JldHVybiBQb2x5bWVyR2VzdHVyZXMuYWRkRXZlbnRMaXN0ZW5lcihkLGMsaCksZj92b2lkIDA6e29wZW46ZyxkaXNjYXJkQ2hhbmdlczpnLGNsb3NlOmZ1bmN0aW9uKCl7UG9seW1lckdlc3R1cmVzLnJlbW92ZUV2ZW50TGlzdGVuZXIoZCxjLGgpfX19fX19LGY9Yy5sZW5ndGg7YS5hcGkuZGVjbGFyYXRpb24uZXZlbnRzPWV9KFBvbHltZXIpLGZ1bmN0aW9uKGEpe3ZhciBiPXtpbmZlck9ic2VydmVyczpmdW5jdGlvbihhKXt2YXIgYixjPWEub2JzZXJ2ZTtmb3IodmFyIGQgaW4gYSkiQ2hhbmdlZCI9PT1kLnNsaWNlKC03KSYmKGN8fChjPWEub2JzZXJ2ZT17fSksYj1kLnNsaWNlKDAsLTcpLGNbYl09Y1tiXXx8ZCl9LGV4cGxvZGVPYnNlcnZlcnM6ZnVuY3Rpb24oYSl7dmFyIGI9YS5vYnNlcnZlO2lmKGIpe3ZhciBjPXt9O2Zvcih2YXIgZCBpbiBiKWZvcih2YXIgZSxmPWQuc3BsaXQoIiAiKSxnPTA7ZT1mW2ddO2crKyljW2VdPWJbZF07YS5vYnNlcnZlPWN9fSxvcHRpbWl6ZVByb3BlcnR5TWFwczpmdW5jdGlvbihhKXtpZihhLm9ic2VydmUpe3ZhciBiPWEuX29ic2VydmVOYW1lcz1bXTtmb3IodmFyIGMgaW4gYS5vYnNlcnZlKWZvcih2YXIgZCxlPWMuc3BsaXQoIiAiKSxmPTA7ZD1lW2ZdO2YrKyliLnB1c2goZCl9aWYoYS5wdWJsaXNoKXt2YXIgYj1hLl9wdWJsaXNoTmFtZXM9W107Zm9yKHZhciBjIGluIGEucHVibGlzaCliLnB1c2goYyl9aWYoYS5jb21wdXRlZCl7dmFyIGI9YS5fY29tcHV0ZWROYW1lcz1bXTtmb3IodmFyIGMgaW4gYS5jb21wdXRlZCliLnB1c2goYyl9fSxwdWJsaXNoUHJvcGVydGllczpmdW5jdGlvbihhLGIpe3ZhciBjPWEucHVibGlzaDtjJiYodGhpcy5yZXF1aXJlUHJvcGVydGllcyhjLGEsYiksYS5fcHVibGlzaExDPXRoaXMubG93ZXJDYXNlTWFwKGMpKX0scmVxdWlyZVByb3BlcnRpZXM6ZnVuY3Rpb24oYSxiKXtiLnJlZmxlY3Q9Yi5yZWZsZWN0fHx7fTtmb3IodmFyIGMgaW4gYSl7dmFyIGQ9YVtjXTtkJiZ2b2lkIDAhPT1kLnJlZmxlY3QmJihiLnJlZmxlY3RbY109Qm9vbGVhbihkLnJlZmxlY3QpLGQ9ZC52YWx1ZSksdm9pZCAwIT09ZCYmKGJbY109ZCl9fSxsb3dlckNhc2VNYXA6ZnVuY3Rpb24oYSl7dmFyIGI9e307Zm9yKHZhciBjIGluIGEpYltjLnRvTG93ZXJDYXNlKCldPWM7cmV0dXJuIGJ9LGNyZWF0ZVByb3BlcnR5QWNjZXNzb3I6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5wcm90b3R5cGUsYz1hKyJfIixkPWErIk9ic2VydmFibGVfIjtiW2NdPWJbYV0sT2JqZWN0LmRlZmluZVByb3BlcnR5KGIsYSx7Z2V0OmZ1bmN0aW9uKCl7dmFyIGE9dGhpc1tkXTtyZXR1cm4gYSYmYS5kZWxpdmVyKCksdGhpc1tjXX0sc2V0OmZ1bmN0aW9uKGIpe3ZhciBlPXRoaXNbZF07aWYoZSlyZXR1cm4gdm9pZCBlLnNldFZhbHVlKGIpO3ZhciBmPXRoaXNbY107cmV0dXJuIHRoaXNbY109Yix0aGlzLmVtaXRQcm9wZXJ0eUNoYW5nZVJlY29yZChhLGIsZiksYn0sY29uZmlndXJhYmxlOiEwfSl9LGNyZWF0ZVByb3BlcnR5QWNjZXNzb3JzOmZ1bmN0aW9uKGEpe3ZhciBiPWEuX3B1Ymxpc2hOYW1lcztpZihiJiZiLmxlbmd0aClmb3IodmFyIGMsZD0wLGU9Yi5sZW5ndGg7ZT5kJiYoYz1iW2RdKTtkKyspdGhpcy5jcmVhdGVQcm9wZXJ0eUFjY2Vzc29yKGMpO3ZhciBiPWEuX2NvbXB1dGVkTmFtZXM7aWYoYiYmYi5sZW5ndGgpZm9yKHZhciBjLGQ9MCxlPWIubGVuZ3RoO2U+ZCYmKGM9YltkXSk7ZCsrKXRoaXMuY3JlYXRlUHJvcGVydHlBY2Nlc3NvcihjKX19O2EuYXBpLmRlY2xhcmF0aW9uLnByb3BlcnRpZXM9Yn0oUG9seW1lciksZnVuY3Rpb24oYSl7dmFyIGI9ImF0dHJpYnV0ZXMiLGM9L1xzfCwvLGQ9e2luaGVyaXRBdHRyaWJ1dGVzT2JqZWN0czpmdW5jdGlvbihhKXt0aGlzLmluaGVyaXRPYmplY3QoYSwicHVibGlzaExDIiksdGhpcy5pbmhlcml0T2JqZWN0KGEsIl9pbnN0YW5jZUF0dHJpYnV0ZXMiKX0scHVibGlzaEF0dHJpYnV0ZXM6ZnVuY3Rpb24oYSl7dmFyIGQ9dGhpcy5nZXRBdHRyaWJ1dGUoYik7aWYoZClmb3IodmFyIGUsZj1hLnB1Ymxpc2h8fChhLnB1Ymxpc2g9e30pLGc9ZC5zcGxpdChjKSxoPTAsaT1nLmxlbmd0aDtpPmg7aCsrKWU9Z1toXS50cmltKCksZSYmdm9pZCAwPT09ZltlXSYmKGZbZV09dm9pZCAwKX0sYWNjdW11bGF0ZUluc3RhbmNlQXR0cmlidXRlczpmdW5jdGlvbigpe2Zvcih2YXIgYSxiPXRoaXMucHJvdG90eXBlLl9pbnN0YW5jZUF0dHJpYnV0ZXMsYz10aGlzLmF0dHJpYnV0ZXMsZD0wLGU9Yy5sZW5ndGg7ZT5kJiYoYT1jW2RdKTtkKyspdGhpcy5pc0luc3RhbmNlQXR0cmlidXRlKGEubmFtZSkmJihiW2EubmFtZV09YS52YWx1ZSl9LGlzSW5zdGFuY2VBdHRyaWJ1dGU6ZnVuY3Rpb24oYSl7cmV0dXJuIXRoaXMuYmxhY2tMaXN0W2FdJiYib24tIiE9PWEuc2xpY2UoMCwzKX0sYmxhY2tMaXN0OntuYW1lOjEsImV4dGVuZHMiOjEsY29uc3RydWN0b3I6MSxub3NjcmlwdDoxLGFzc2V0cGF0aDoxLCJjYWNoZS1jc3N0ZXh0IjoxfX07ZC5ibGFja0xpc3RbYl09MSxhLmFwaS5kZWNsYXJhdGlvbi5hdHRyaWJ1dGVzPWR9KFBvbHltZXIpLGZ1bmN0aW9uKGEpe3ZhciBiPWEuYXBpLmRlY2xhcmF0aW9uLmV2ZW50cyxjPW5ldyBQb2x5bWVyRXhwcmVzc2lvbnMsZD1jLnByZXBhcmVCaW5kaW5nO2MucHJlcGFyZUJpbmRpbmc9ZnVuY3Rpb24oYSxlLGYpe3JldHVybiBiLnByZXBhcmVFdmVudEJpbmRpbmcoYSxlLGYpfHxkLmNhbGwoYyxhLGUsZil9O3ZhciBlPXtzeW50YXg6YyxmZXRjaFRlbXBsYXRlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucXVlcnlTZWxlY3RvcigidGVtcGxhdGUiKX0sdGVtcGxhdGVDb250ZW50OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5mZXRjaFRlbXBsYXRlKCk7cmV0dXJuIGEmJmEuY29udGVudH0saW5zdGFsbEJpbmRpbmdEZWxlZ2F0ZTpmdW5jdGlvbihhKXthJiYoYS5iaW5kaW5nRGVsZWdhdGU9dGhpcy5zeW50YXgpfX07YS5hcGkuZGVjbGFyYXRpb24ubWR2PWV9KFBvbHltZXIpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7aWYoIU9iamVjdC5fX3Byb3RvX18pe3ZhciBiPU9iamVjdC5nZXRQcm90b3R5cGVPZihhKTthLl9fcHJvdG9fXz1iLGQoYikmJihiLl9fcHJvdG9fXz1PYmplY3QuZ2V0UHJvdG90eXBlT2YoYikpfX12YXIgYz1hLmFwaSxkPWEuaXNCYXNlLGU9YS5leHRlbmQsZj13aW5kb3cuU2hhZG93RE9NUG9seWZpbGwsZz17cmVnaXN0ZXI6ZnVuY3Rpb24oYSxiKXt0aGlzLmJ1aWxkUHJvdG90eXBlKGEsYiksdGhpcy5yZWdpc3RlclByb3RvdHlwZShhLGIpLHRoaXMucHVibGlzaENvbnN0cnVjdG9yKCl9LGJ1aWxkUHJvdG90eXBlOmZ1bmN0aW9uKGIsYyl7dmFyIGQ9YS5nZXRSZWdpc3RlcmVkUHJvdG90eXBlKGIpLGU9dGhpcy5nZW5lcmF0ZUJhc2VQcm90b3R5cGUoYyk7dGhpcy5kZXN1Z2FyQmVmb3JlQ2hhaW5pbmcoZCxlKSx0aGlzLnByb3RvdHlwZT10aGlzLmNoYWluUHJvdG90eXBlcyhkLGUpLHRoaXMuZGVzdWdhckFmdGVyQ2hhaW5pbmcoYixjKX0sZGVzdWdhckJlZm9yZUNoYWluaW5nOmZ1bmN0aW9uKGEsYil7YS5lbGVtZW50PXRoaXMsdGhpcy5wdWJsaXNoQXR0cmlidXRlcyhhLGIpLHRoaXMucHVibGlzaFByb3BlcnRpZXMoYSxiKSx0aGlzLmluZmVyT2JzZXJ2ZXJzKGEpLHRoaXMuZXhwbG9kZU9ic2VydmVycyhhKX0sY2hhaW5Qcm90b3R5cGVzOmZ1bmN0aW9uKGEsYyl7dGhpcy5pbmhlcml0TWV0YURhdGEoYSxjKTt2YXIgZD10aGlzLmNoYWluT2JqZWN0KGEsYyk7cmV0dXJuIGIoZCksZH0saW5oZXJpdE1ldGFEYXRhOmZ1bmN0aW9uKGEsYil7dGhpcy5pbmhlcml0T2JqZWN0KCJvYnNlcnZlIixhLGIpLHRoaXMuaW5oZXJpdE9iamVjdCgicHVibGlzaCIsYSxiKSx0aGlzLmluaGVyaXRPYmplY3QoInJlZmxlY3QiLGEsYiksdGhpcy5pbmhlcml0T2JqZWN0KCJfcHVibGlzaExDIixhLGIpLHRoaXMuaW5oZXJpdE9iamVjdCgiX2luc3RhbmNlQXR0cmlidXRlcyIsYSxiKSx0aGlzLmluaGVyaXRPYmplY3QoImV2ZW50RGVsZWdhdGVzIixhLGIpfSxkZXN1Z2FyQWZ0ZXJDaGFpbmluZzpmdW5jdGlvbihhLGIpe3RoaXMub3B0aW1pemVQcm9wZXJ0eU1hcHModGhpcy5wcm90b3R5cGUpLHRoaXMuY3JlYXRlUHJvcGVydHlBY2Nlc3NvcnModGhpcy5wcm90b3R5cGUpLHRoaXMuaW5zdGFsbEJpbmRpbmdEZWxlZ2F0ZSh0aGlzLmZldGNoVGVtcGxhdGUoKSksdGhpcy5pbnN0YWxsU2hlZXRzKCksdGhpcy5yZXNvbHZlRWxlbWVudFBhdGhzKHRoaXMpLHRoaXMuYWNjdW11bGF0ZUluc3RhbmNlQXR0cmlidXRlcygpLHRoaXMucGFyc2VIb3N0RXZlbnRzKCksdGhpcy5hZGRSZXNvbHZlUGF0aEFwaSgpLGYmJlBsYXRmb3JtLlNoYWRvd0NTUy5zaGltU3R5bGluZyh0aGlzLnRlbXBsYXRlQ29udGVudCgpLGEsYiksdGhpcy5wcm90b3R5cGUucmVnaXN0ZXJDYWxsYmFjayYmdGhpcy5wcm90b3R5cGUucmVnaXN0ZXJDYWxsYmFjayh0aGlzKX0scHVibGlzaENvbnN0cnVjdG9yOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5nZXRBdHRyaWJ1dGUoImNvbnN0cnVjdG9yIik7YSYmKHdpbmRvd1thXT10aGlzLmN0b3IpfSxnZW5lcmF0ZUJhc2VQcm90b3R5cGU6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5maW5kQmFzZVByb3RvdHlwZShhKTtpZighYil7dmFyIGI9SFRNTEVsZW1lbnQuZ2V0UHJvdG90eXBlRm9yVGFnKGEpO2I9dGhpcy5lbnN1cmVCYXNlQXBpKGIpLGhbYV09Yn1yZXR1cm4gYn0sZmluZEJhc2VQcm90b3R5cGU6ZnVuY3Rpb24oYSl7cmV0dXJuIGhbYV19LGVuc3VyZUJhc2VBcGk6ZnVuY3Rpb24oYSl7aWYoYS5Qb2x5bWVyQmFzZSlyZXR1cm4gYTt2YXIgYj1PYmplY3QuY3JlYXRlKGEpO3JldHVybiBjLnB1Ymxpc2goYy5pbnN0YW5jZSxiKSx0aGlzLm1peGluTWV0aG9kKGIsYSxjLmluc3RhbmNlLm1kdiwiYmluZCIpLGJ9LG1peGluTWV0aG9kOmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPWZ1bmN0aW9uKGEpe3JldHVybiBiW2RdLmFwcGx5KHRoaXMsYSl9O2FbZF09ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5taXhpblN1cGVyPWUsY1tkXS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fSxpbmhlcml0T2JqZWN0OmZ1bmN0aW9uKGEsYixjKXt2YXIgZD1iW2FdfHx7fTtiW2FdPXRoaXMuY2hhaW5PYmplY3QoZCxjW2FdKX0scmVnaXN0ZXJQcm90b3R5cGU6ZnVuY3Rpb24oYSxiKXt2YXIgYz17cHJvdG90eXBlOnRoaXMucHJvdG90eXBlfSxkPXRoaXMuZmluZFR5cGVFeHRlbnNpb24oYik7ZCYmKGMuZXh0ZW5kcz1kKSxIVE1MRWxlbWVudC5yZWdpc3RlcihhLHRoaXMucHJvdG90eXBlKSx0aGlzLmN0b3I9ZG9jdW1lbnQucmVnaXN0ZXJFbGVtZW50KGEsYyl9LGZpbmRUeXBlRXh0ZW5zaW9uOmZ1bmN0aW9uKGEpe2lmKGEmJmEuaW5kZXhPZigiLSIpPDApcmV0dXJuIGE7dmFyIGI9dGhpcy5maW5kQmFzZVByb3RvdHlwZShhKTtyZXR1cm4gYi5lbGVtZW50P3RoaXMuZmluZFR5cGVFeHRlbnNpb24oYi5lbGVtZW50LmV4dGVuZHMpOnZvaWQgMH19LGg9e307Zy5jaGFpbk9iamVjdD1PYmplY3QuX19wcm90b19fP2Z1bmN0aW9uKGEsYil7cmV0dXJuIGEmJmImJmEhPT1iJiYoYS5fX3Byb3RvX189YiksYX06ZnVuY3Rpb24oYSxiKXtpZihhJiZiJiZhIT09Yil7dmFyIGM9T2JqZWN0LmNyZWF0ZShiKTthPWUoYyxhKX1yZXR1cm4gYX0sYy5kZWNsYXJhdGlvbi5wcm90b3R5cGU9Z30oUG9seW1lciksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhKXtyZXR1cm4gZG9jdW1lbnQuY29udGFpbnMoYSk/aTpofWZ1bmN0aW9uIGMoKXtyZXR1cm4gaC5sZW5ndGg/aFswXTppWzBdfWZ1bmN0aW9uIGQoYSl7ZS53YWl0VG9SZWFkeT0hMCxIVE1MSW1wb3J0cy53aGVuSW1wb3J0c1JlYWR5KGZ1bmN0aW9uKCl7ZS5hZGRSZWFkeUNhbGxiYWNrKGEpLGUud2FpdFRvUmVhZHk9ITEsZS5jaGVjaygpfSl9dmFyIGU9e3dhaXQ6ZnVuY3Rpb24oYSl7YS5fX3F1ZXVlfHwoYS5fX3F1ZXVlPXt9LGYucHVzaChhKSl9LGVucXVldWU6ZnVuY3Rpb24oYSxjLGQpe3ZhciBlPWEuX19xdWV1ZSYmIWEuX19xdWV1ZS5jaGVjaztyZXR1cm4gZSYmKGIoYSkucHVzaChhKSxhLl9fcXVldWUuY2hlY2s9YyxhLl9fcXVldWUuZ289ZCksMCE9PXRoaXMuaW5kZXhPZihhKX0saW5kZXhPZjpmdW5jdGlvbihhKXt2YXIgYz1iKGEpLmluZGV4T2YoYSk7cmV0dXJuIGM+PTAmJmRvY3VtZW50LmNvbnRhaW5zKGEpJiYoYys9SFRNTEltcG9ydHMudXNlTmF0aXZlfHxIVE1MSW1wb3J0cy5yZWFkeT9oLmxlbmd0aDoxZTkpLGN9LGdvOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMucmVtb3ZlKGEpO2ImJihhLl9fcXVldWUuZmx1c2hhYmxlPSEwLHRoaXMuYWRkVG9GbHVzaFF1ZXVlKGIpLHRoaXMuY2hlY2soKSl9LHJlbW92ZTpmdW5jdGlvbihhKXt2YXIgYz10aGlzLmluZGV4T2YoYSk7aWYoMD09PWMpcmV0dXJuIGIoYSkuc2hpZnQoKX0sY2hlY2s6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm5leHRFbGVtZW50KCk7cmV0dXJuIGEmJmEuX19xdWV1ZS5jaGVjay5jYWxsKGEpLHRoaXMuY2FuUmVhZHkoKT8odGhpcy5yZWFkeSgpLCEwKTp2b2lkIDB9LG5leHRFbGVtZW50OmZ1bmN0aW9uKCl7cmV0dXJuIGMoKX0sY2FuUmVhZHk6ZnVuY3Rpb24oKXtyZXR1cm4hdGhpcy53YWl0VG9SZWFkeSYmdGhpcy5pc0VtcHR5KCl9LGlzRW1wdHk6ZnVuY3Rpb24oKXtmb3IodmFyIGEsYj0wLGM9Zi5sZW5ndGg7Yz5iJiYoYT1mW2JdKTtiKyspaWYoYS5fX3F1ZXVlJiYhYS5fX3F1ZXVlLmZsdXNoYWJsZSlyZXR1cm47cmV0dXJuITB9LGFkZFRvRmx1c2hRdWV1ZTpmdW5jdGlvbihhKXtnLnB1c2goYSl9LGZsdXNoOmZ1bmN0aW9uKCl7aWYoIXRoaXMuZmx1c2hpbmcpe3RoaXMuZmx1c2hpbmc9ITA7Zm9yKHZhciBhO2cubGVuZ3RoOylhPWcuc2hpZnQoKSxhLl9fcXVldWUuZ28uY2FsbChhKSxhLl9fcXVldWU9bnVsbDt0aGlzLmZsdXNoaW5nPSExfX0scmVhZHk6ZnVuY3Rpb24oKXt2YXIgYT1DdXN0b21FbGVtZW50cy5yZWFkeTtDdXN0b21FbGVtZW50cy5yZWFkeT0hMSx0aGlzLmZsdXNoKCksQ3VzdG9tRWxlbWVudHMudXNlTmF0aXZlfHxDdXN0b21FbGVtZW50cy51cGdyYWRlRG9jdW1lbnRUcmVlKGRvY3VtZW50KSxDdXN0b21FbGVtZW50cy5yZWFkeT1hLFBsYXRmb3JtLmZsdXNoKCkscmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRoaXMuZmx1c2hSZWFkeUNhbGxiYWNrcyl9LGFkZFJlYWR5Q2FsbGJhY2s6ZnVuY3Rpb24oYSl7YSYmai5wdXNoKGEpfSxmbHVzaFJlYWR5Q2FsbGJhY2tzOmZ1bmN0aW9uKCl7aWYoailmb3IodmFyIGE7ai5sZW5ndGg7KShhPWouc2hpZnQoKSkoKX0sd2FpdFRvUmVhZHk6ITB9LGY9W10sZz1bXSxoPVtdLGk9W10saj1bXTthLmVsZW1lbnRzPWYsYS5xdWV1ZT1lLGEud2hlblJlYWR5PWEud2hlblBvbHltZXJSZWFkeT1kfShQb2x5bWVyKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEpe3JldHVybiBCb29sZWFuKEhUTUxFbGVtZW50LmdldFByb3RvdHlwZUZvclRhZyhhKSl9ZnVuY3Rpb24gYyhhKXtyZXR1cm4gYSYmYS5pbmRleE9mKCItIik+PTB9dmFyIGQ9YS5leHRlbmQsZT1hLmFwaSxmPWEucXVldWUsZz1hLndoZW5SZWFkeSxoPWEuZ2V0UmVnaXN0ZXJlZFByb3RvdHlwZSxpPWEud2FpdGluZ0ZvclByb3RvdHlwZSxqPWQoT2JqZWN0LmNyZWF0ZShIVE1MRWxlbWVudC5wcm90b3R5cGUpLHtjcmVhdGVkQ2FsbGJhY2s6ZnVuY3Rpb24oKXt0aGlzLmdldEF0dHJpYnV0ZSgibmFtZSIpJiZ0aGlzLmluaXQoKX0saW5pdDpmdW5jdGlvbigpe3RoaXMubmFtZT10aGlzLmdldEF0dHJpYnV0ZSgibmFtZSIpLHRoaXMuZXh0ZW5kcz10aGlzLmdldEF0dHJpYnV0ZSgiZXh0ZW5kcyIpLGYud2FpdCh0aGlzKSx0aGlzLmxvYWRSZXNvdXJjZXMoKSx0aGlzLnJlZ2lzdGVyV2hlblJlYWR5KCl9LHJlZ2lzdGVyV2hlblJlYWR5OmZ1bmN0aW9uKCl7dGhpcy5yZWdpc3RlcmVkfHx0aGlzLndhaXRpbmdGb3JQcm90b3R5cGUodGhpcy5uYW1lKXx8dGhpcy53YWl0aW5nRm9yUXVldWUoKXx8dGhpcy53YWl0aW5nRm9yUmVzb3VyY2VzKCl8fGYuZ28odGhpcyl9LF9yZWdpc3RlcjpmdW5jdGlvbigpe2ModGhpcy5leHRlbmRzKSYmIWIodGhpcy5leHRlbmRzKSYmY29uc29sZS53YXJuKCIlcyBpcyBhdHRlbXB0aW5nIHRvIGV4dGVuZCAlcywgYW4gdW5yZWdpc3RlcmVkIGVsZW1lbnQgb3Igb25lIHRoYXQgd2FzIG5vdCByZWdpc3RlcmVkIHdpdGggUG9seW1lci4iLHRoaXMubmFtZSx0aGlzLmV4dGVuZHMpLHRoaXMucmVnaXN0ZXIodGhpcy5uYW1lLHRoaXMuZXh0ZW5kcyksdGhpcy5yZWdpc3RlcmVkPSEwfSx3YWl0aW5nRm9yUHJvdG90eXBlOmZ1bmN0aW9uKGEpe3JldHVybiBoKGEpP3ZvaWQgMDooaShhLHRoaXMpLHRoaXMuaGFuZGxlTm9TY3JpcHQoYSksITApfSxoYW5kbGVOb1NjcmlwdDpmdW5jdGlvbihhKXt0aGlzLmhhc0F0dHJpYnV0ZSgibm9zY3JpcHQiKSYmIXRoaXMubm9zY3JpcHQmJih0aGlzLm5vc2NyaXB0PSEwLFBvbHltZXIoYSkpfSx3YWl0aW5nRm9yUmVzb3VyY2VzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX25lZWRzUmVzb3VyY2VzfSx3YWl0aW5nRm9yUXVldWU6ZnVuY3Rpb24oKXtyZXR1cm4gZi5lbnF1ZXVlKHRoaXMsdGhpcy5yZWdpc3RlcldoZW5SZWFkeSx0aGlzLl9yZWdpc3Rlcil9LGxvYWRSZXNvdXJjZXM6ZnVuY3Rpb24oKXt0aGlzLl9uZWVkc1Jlc291cmNlcz0hMCx0aGlzLmxvYWRTdHlsZXMoZnVuY3Rpb24oKXt0aGlzLl9uZWVkc1Jlc291cmNlcz0hMSx0aGlzLnJlZ2lzdGVyV2hlblJlYWR5KCl9LmJpbmQodGhpcykpfX0pO2UucHVibGlzaChlLmRlY2xhcmF0aW9uLGopLGcoZnVuY3Rpb24oKXtkb2N1bWVudC5ib2R5LnJlbW92ZUF0dHJpYnV0ZSgidW5yZXNvbHZlZCIpLGRvY3VtZW50LmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KCJwb2x5bWVyLXJlYWR5Iix7YnViYmxlczohMH0pKX0pLGRvY3VtZW50LnJlZ2lzdGVyRWxlbWVudCgicG9seW1lci1lbGVtZW50Iix7cHJvdG90eXBlOmp9KX0oUG9seW1lciksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhLGIpe2E/KGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoYSksZChiKSk6YiYmYigpfWZ1bmN0aW9uIGMoYSxjKXtpZihhJiZhLmxlbmd0aCl7Zm9yKHZhciBkLGUsZj1kb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksZz0wLGg9YS5sZW5ndGg7aD5nJiYoZD1hW2ddKTtnKyspZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJsaW5rIiksZS5yZWw9ImltcG9ydCIsZS5ocmVmPWQsZi5hcHBlbmRDaGlsZChlKTtiKGYsYyl9ZWxzZSBjJiZjKCl9dmFyIGQ9YS53aGVuUG9seW1lclJlYWR5O2EuaW1wb3J0PWMsYS5pbXBvcnRFbGVtZW50cz1ifShQb2x5bWVyKSxmdW5jdGlvbigpe3ZhciBhPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInBvbHltZXItZWxlbWVudCIpO2Euc2V0QXR0cmlidXRlKCJuYW1lIiwiYXV0by1iaW5kaW5nIiksYS5zZXRBdHRyaWJ1dGUoImV4dGVuZHMiLCJ0ZW1wbGF0ZSIpLGEuaW5pdCgpLFBvbHltZXIoImF1dG8tYmluZGluZyIse2NyZWF0ZWRDYWxsYmFjazpmdW5jdGlvbigpe3RoaXMuc3ludGF4PXRoaXMuYmluZGluZ0RlbGVnYXRlPXRoaXMubWFrZVN5bnRheCgpLFBvbHltZXIud2hlblBvbHltZXJSZWFkeShmdW5jdGlvbigpe3RoaXMubW9kZWw9dGhpcyx0aGlzLnNldEF0dHJpYnV0ZSgiYmluZCIsIiIpLHRoaXMuYXN5bmMoZnVuY3Rpb24oKXt0aGlzLm1hcnNoYWxOb2RlUmVmZXJlbmNlcyh0aGlzLnBhcmVudE5vZGUpLHRoaXMuZmlyZSgidGVtcGxhdGUtYm91bmQiKX0pfS5iaW5kKHRoaXMpKX0sbWFrZVN5bnRheDpmdW5jdGlvbigpe3ZhciBhPU9iamVjdC5jcmVhdGUoUG9seW1lci5hcGkuZGVjbGFyYXRpb24uZXZlbnRzKSxiPXRoaXM7YS5maW5kQ29udHJvbGxlcj1mdW5jdGlvbigpe3JldHVybiBiLm1vZGVsfTt2YXIgYz1uZXcgUG9seW1lckV4cHJlc3Npb25zLGQ9Yy5wcmVwYXJlQmluZGluZztyZXR1cm4gYy5wcmVwYXJlQmluZGluZz1mdW5jdGlvbihiLGUsZil7cmV0dXJuIGEucHJlcGFyZUV2ZW50QmluZGluZyhiLGUsZil8fGQuY2FsbChjLGIsZSxmKX0sY319KX0oKTsKLy8jIHNvdXJjZU1hcHBpbmdVUkw9cG9seW1lci5qcy5tYXA=",
                "headers": {
                    "Accept-Ranges": "bytes",
                    "Last-Modified": "Sat, 08 Nov 2014 03:24:48 GMT",
                    "Content-Length": "114584",
                    "Date": "Sat, 08 Nov 2014 03:24:48 GMT",
                    "Content-Type": "application/javascript"
                },
                "cookies": [],
                "mimeType": "script",
                "host": "localhost",
                "protocol": "http",
                "port": 9999,
                "inScope": false,
                "toolFlag": 16962,
                "referenceID": 0,
                "messageType": "response"
            },
            "messageType": "requestResponse"
        }
    ],
    "inScope": true,
    "messageType": "scanIssue"
}