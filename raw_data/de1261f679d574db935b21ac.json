{
    "url": "http://localhost:9999/cair/panel/dist/js/cair.js",
    "host": "localhost",
    "port": 9999,
    "protocol": "http",
    "name": "DOM data manipulation (DOM-based)",
    "issueType": 5247488,
    "severity": "Information",
    "confidence": "Firm",
    "issueBackground": "DOM-based DOM data manipulation vulnerabilities arise when a client-side script within an application's response reads data from a controllable part of the DOM (for example, the URL), and writes this to a data field within the DOM that is used within the visible UI or client-side application logic. An attacker may be able to use the vulnerability to construct a URL which, if visited by another application user, will modify the appearance or behavior of the client-side UI. An attacker may be able to leverage this to perform virtual defacement of the application, or possibly to induce the user to perform unintended actions.",
    "remediationBackground": "Static analysis of code to identify vulnerabilities of this kind may lead to false positives that are not actually exploitable. You should review the highlighted code and related execution paths to determine whether the application is indeed vulnerable, or whether mitigations are in place that would prevent exploitation.<br><br>The most effective way to avoid DOM-based DOM data manipulation vulnerabilities is not to dynamically write to DOM data fields any data that originated from any untrusted source. If the desired functionality of the application means that this behavior is unavoidable, then defenses must be implemented within the client-side code to prevent malicious data from being stored. In general, this is best achieved by using a whitelist of permitted values.",
    "issueDetail": "The application may be vulnerable to DOM-based DOM data manipulation. Data is read from <b>window.name</b> and written to <b>the 'name' property of a DOM element</b> via the following statement:<ul><li>window.name=window.name.replace(NG_DEFER_BOOTSTRAP,'');</li></ul><b>Note:</b> The name of the current window is a valid attack vector for DOM-based vulnerabilities. An attacker can directly control the name of the targeted application's window by using code on their own domain to load the targeted page using either window.open() or an iframe tag, and specifying the desired window name. ",
    "requestResponses": [
        {
            "request": {
                "host": "localhost",
                "port": 9999,
                "protocol": "http",
                "url": "http://localhost:9999/cair/panel/dist/js/cair.js",
                "path": "/cair/panel/dist/js/cair.js",
                "httpVersion": "HTTP/1.1",
                "method": "GET",
                "headers": {
                    "Host": "localhost:9999"
                },
                "body": "",
                "raw": "R0VUIC9jYWlyL3BhbmVsL2Rpc3QvanMvY2Fpci5qcyBIVFRQLzEuMQ0KSG9zdDogbG9jYWxob3N0Ojk5OTkNCg0K",
                "inScope": true,
                "toolFlag": 16962,
                "referenceID": 0,
                "messageType": "request"
            },
            "response": {
                "statusCode": 200,
                "raw": "SFRUUC8xLjEgMjAwIE9LDQpDb250ZW50LUxlbmd0aDogMjc1NjExDQpBY2NlcHQtUmFuZ2VzOiBieXRlcw0KQ29udGVudC1UeXBlOiBhcHBsaWNhdGlvbi9qYXZhc2NyaXB0DQpEYXRlOiBUaHUsIDA2IE5vdiAyMDE0IDE0OjMxOjI0IEdNVA0KTGFzdC1Nb2RpZmllZDogVGh1LCAwNiBOb3YgMjAxNCAxNDozMToyMSBHTVQNCg0KCihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09ImZ1bmN0aW9uIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3Rocm93IG5ldyBFcnJvcigiQ2Fubm90IGZpbmQgbW9kdWxlICciK28rIiciKX12YXIgZj1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwoZi5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxmLGYuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT0iZnVuY3Rpb24iJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSh7MTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7KGZ1bmN0aW9uKHByb2Nlc3MsZ2xvYmFsLEJ1ZmZlcixfX2FyZ3VtZW50MCxfX2FyZ3VtZW50MSxfX2FyZ3VtZW50MixfX2FyZ3VtZW50MyxfX2ZpbGVuYW1lLF9fZGlybmFtZSl7aWYodHlwZW9mIG1vZHVsZSE9PSJ1bmRlZmluZWQiJiZ0eXBlb2YgZXhwb3J0cyE9PSJ1bmRlZmluZWQiJiZtb2R1bGUuZXhwb3J0cz09PWV4cG9ydHMpe21vZHVsZS5leHBvcnRzPSd1aS5yb3V0ZXInO30KKGZ1bmN0aW9uKHdpbmRvdyxhbmd1bGFyLHVuZGVmaW5lZCl7J3VzZSBzdHJpY3QnO3ZhciBpc0RlZmluZWQ9YW5ndWxhci5pc0RlZmluZWQsaXNGdW5jdGlvbj1hbmd1bGFyLmlzRnVuY3Rpb24saXNTdHJpbmc9YW5ndWxhci5pc1N0cmluZyxpc09iamVjdD1hbmd1bGFyLmlzT2JqZWN0LGlzQXJyYXk9YW5ndWxhci5pc0FycmF5LGZvckVhY2g9YW5ndWxhci5mb3JFYWNoLGV4dGVuZD1hbmd1bGFyLmV4dGVuZCxjb3B5PWFuZ3VsYXIuY29weTtmdW5jdGlvbiBpbmhlcml0KHBhcmVudCxleHRyYSl7cmV0dXJuIGV4dGVuZChuZXcoZXh0ZW5kKGZ1bmN0aW9uKCl7fSx7cHJvdG90eXBlOnBhcmVudH0pKSgpLGV4dHJhKTt9CmZ1bmN0aW9uIG1lcmdlKGRzdCl7Zm9yRWFjaChhcmd1bWVudHMsZnVuY3Rpb24ob2JqKXtpZihvYmohPT1kc3Qpe2ZvckVhY2gob2JqLGZ1bmN0aW9uKHZhbHVlLGtleSl7aWYoIWRzdC5oYXNPd25Qcm9wZXJ0eShrZXkpKWRzdFtrZXldPXZhbHVlO30pO319KTtyZXR1cm4gZHN0O30KZnVuY3Rpb24gYW5jZXN0b3JzKGZpcnN0LHNlY29uZCl7dmFyIHBhdGg9W107Zm9yKHZhciBuIGluIGZpcnN0LnBhdGgpe2lmKGZpcnN0LnBhdGhbbl0hPT1zZWNvbmQucGF0aFtuXSlicmVhaztwYXRoLnB1c2goZmlyc3QucGF0aFtuXSk7fQpyZXR1cm4gcGF0aDt9CmZ1bmN0aW9uIGtleXMob2JqZWN0KXtpZihPYmplY3Qua2V5cyl7cmV0dXJuIE9iamVjdC5rZXlzKG9iamVjdCk7fQp2YXIgcmVzdWx0PVtdO2FuZ3VsYXIuZm9yRWFjaChvYmplY3QsZnVuY3Rpb24odmFsLGtleSl7cmVzdWx0LnB1c2goa2V5KTt9KTtyZXR1cm4gcmVzdWx0O30KZnVuY3Rpb24gYXJyYXlTZWFyY2goYXJyYXksdmFsdWUpe2lmKEFycmF5LnByb3RvdHlwZS5pbmRleE9mKXtyZXR1cm4gYXJyYXkuaW5kZXhPZih2YWx1ZSxOdW1iZXIoYXJndW1lbnRzWzJdKXx8MCk7fQp2YXIgbGVuPWFycmF5Lmxlbmd0aD4+PjAsZnJvbT1OdW1iZXIoYXJndW1lbnRzWzJdKXx8MDtmcm9tPShmcm9tPDApP01hdGguY2VpbChmcm9tKTpNYXRoLmZsb29yKGZyb20pO2lmKGZyb208MClmcm9tKz1sZW47Zm9yKDtmcm9tPGxlbjtmcm9tKyspe2lmKGZyb20gaW4gYXJyYXkmJmFycmF5W2Zyb21dPT09dmFsdWUpcmV0dXJuIGZyb207fQpyZXR1cm4tMTt9CmZ1bmN0aW9uIGluaGVyaXRQYXJhbXMoY3VycmVudFBhcmFtcyxuZXdQYXJhbXMsJGN1cnJlbnQsJHRvKXt2YXIgcGFyZW50cz1hbmNlc3RvcnMoJGN1cnJlbnQsJHRvKSxwYXJlbnRQYXJhbXMsaW5oZXJpdGVkPXt9LGluaGVyaXRMaXN0PVtdO2Zvcih2YXIgaSBpbiBwYXJlbnRzKXtpZighcGFyZW50c1tpXS5wYXJhbXN8fCFwYXJlbnRzW2ldLnBhcmFtcy5sZW5ndGgpY29udGludWU7cGFyZW50UGFyYW1zPXBhcmVudHNbaV0ucGFyYW1zO2Zvcih2YXIgaiBpbiBwYXJlbnRQYXJhbXMpe2lmKGFycmF5U2VhcmNoKGluaGVyaXRMaXN0LHBhcmVudFBhcmFtc1tqXSk+PTApY29udGludWU7aW5oZXJpdExpc3QucHVzaChwYXJlbnRQYXJhbXNbal0pO2luaGVyaXRlZFtwYXJlbnRQYXJhbXNbal1dPWN1cnJlbnRQYXJhbXNbcGFyZW50UGFyYW1zW2pdXTt9fQpyZXR1cm4gZXh0ZW5kKHt9LGluaGVyaXRlZCxuZXdQYXJhbXMpO30KZnVuY3Rpb24gbm9ybWFsaXplKGtleXMsdmFsdWVzKXt2YXIgbm9ybWFsaXplZD17fTtmb3JFYWNoKGtleXMsZnVuY3Rpb24obmFtZSl7dmFyIHZhbHVlPXZhbHVlc1tuYW1lXTtub3JtYWxpemVkW25hbWVdPSh2YWx1ZSE9bnVsbCk/U3RyaW5nKHZhbHVlKTpudWxsO30pO3JldHVybiBub3JtYWxpemVkO30KZnVuY3Rpb24gZXF1YWxGb3JLZXlzKGEsYixrZXlzKXtpZigha2V5cyl7a2V5cz1bXTtmb3IodmFyIG4gaW4gYSlrZXlzLnB1c2gobik7fQpmb3IodmFyIGk9MDtpPGtleXMubGVuZ3RoO2krKyl7dmFyIGs9a2V5c1tpXTtpZihhW2tdIT1iW2tdKXJldHVybiBmYWxzZTt9CnJldHVybiB0cnVlO30KZnVuY3Rpb24gZmlsdGVyQnlLZXlzKGtleXMsdmFsdWVzKXt2YXIgZmlsdGVyZWQ9e307Zm9yRWFjaChrZXlzLGZ1bmN0aW9uKG5hbWUpe2ZpbHRlcmVkW25hbWVdPXZhbHVlc1tuYW1lXTt9KTtyZXR1cm4gZmlsdGVyZWQ7fQphbmd1bGFyLm1vZHVsZSgndWkucm91dGVyLnV0aWwnLFsnbmcnXSk7YW5ndWxhci5tb2R1bGUoJ3VpLnJvdXRlci5yb3V0ZXInLFsndWkucm91dGVyLnV0aWwnXSk7YW5ndWxhci5tb2R1bGUoJ3VpLnJvdXRlci5zdGF0ZScsWyd1aS5yb3V0ZXIucm91dGVyJywndWkucm91dGVyLnV0aWwnXSk7YW5ndWxhci5tb2R1bGUoJ3VpLnJvdXRlcicsWyd1aS5yb3V0ZXIuc3RhdGUnXSk7YW5ndWxhci5tb2R1bGUoJ3VpLnJvdXRlci5jb21wYXQnLFsndWkucm91dGVyJ10pOyRSZXNvbHZlLiRpbmplY3Q9WyckcScsJyRpbmplY3RvciddO2Z1bmN0aW9uICRSZXNvbHZlKCRxLCRpbmplY3Rvcil7dmFyIFZJU0lUX0lOX1BST0dSRVNTPTEsVklTSVRfRE9ORT0yLE5PVEhJTkc9e30sTk9fREVQRU5ERU5DSUVTPVtdLE5PX0xPQ0FMUz1OT1RISU5HLE5PX1BBUkVOVD1leHRlbmQoJHEud2hlbihOT1RISU5HKSx7JCRwcm9taXNlczpOT1RISU5HLCQkdmFsdWVzOk5PVEhJTkd9KTt0aGlzLnN0dWR5PWZ1bmN0aW9uKGludm9jYWJsZXMpe2lmKCFpc09iamVjdChpbnZvY2FibGVzKSl0aHJvdyBuZXcgRXJyb3IoIidpbnZvY2FibGVzJyBtdXN0IGJlIGFuIG9iamVjdCIpO3ZhciBwbGFuPVtdLGN5Y2xlPVtdLHZpc2l0ZWQ9e307ZnVuY3Rpb24gdmlzaXQodmFsdWUsa2V5KXtpZih2aXNpdGVkW2tleV09PT1WSVNJVF9ET05FKXJldHVybjtjeWNsZS5wdXNoKGtleSk7aWYodmlzaXRlZFtrZXldPT09VklTSVRfSU5fUFJPR1JFU1Mpe2N5Y2xlLnNwbGljZSgwLGN5Y2xlLmluZGV4T2Yoa2V5KSk7dGhyb3cgbmV3IEVycm9yKCJDeWNsaWMgZGVwZW5kZW5jeTogIitjeWNsZS5qb2luKCIgLT4gIikpO30KdmlzaXRlZFtrZXldPVZJU0lUX0lOX1BST0dSRVNTO2lmKGlzU3RyaW5nKHZhbHVlKSl7cGxhbi5wdXNoKGtleSxbZnVuY3Rpb24oKXtyZXR1cm4gJGluamVjdG9yLmdldCh2YWx1ZSk7fV0sTk9fREVQRU5ERU5DSUVTKTt9ZWxzZXt2YXIgcGFyYW1zPSRpbmplY3Rvci5hbm5vdGF0ZSh2YWx1ZSk7Zm9yRWFjaChwYXJhbXMsZnVuY3Rpb24ocGFyYW0pe2lmKHBhcmFtIT09a2V5JiZpbnZvY2FibGVzLmhhc093blByb3BlcnR5KHBhcmFtKSl2aXNpdChpbnZvY2FibGVzW3BhcmFtXSxwYXJhbSk7fSk7cGxhbi5wdXNoKGtleSx2YWx1ZSxwYXJhbXMpO30KY3ljbGUucG9wKCk7dmlzaXRlZFtrZXldPVZJU0lUX0RPTkU7fQpmb3JFYWNoKGludm9jYWJsZXMsdmlzaXQpO2ludm9jYWJsZXM9Y3ljbGU9dmlzaXRlZD1udWxsO2Z1bmN0aW9uIGlzUmVzb2x2ZSh2YWx1ZSl7cmV0dXJuIGlzT2JqZWN0KHZhbHVlKSYmdmFsdWUudGhlbiYmdmFsdWUuJCRwcm9taXNlczt9CnJldHVybiBmdW5jdGlvbihsb2NhbHMscGFyZW50LHNlbGYpe2lmKGlzUmVzb2x2ZShsb2NhbHMpJiZzZWxmPT09dW5kZWZpbmVkKXtzZWxmPXBhcmVudDtwYXJlbnQ9bG9jYWxzO2xvY2Fscz1udWxsO30KaWYoIWxvY2Fscylsb2NhbHM9Tk9fTE9DQUxTO2Vsc2UgaWYoIWlzT2JqZWN0KGxvY2Fscykpe3Rocm93IG5ldyBFcnJvcigiJ2xvY2FscycgbXVzdCBiZSBhbiBvYmplY3QiKTt9CmlmKCFwYXJlbnQpcGFyZW50PU5PX1BBUkVOVDtlbHNlIGlmKCFpc1Jlc29sdmUocGFyZW50KSl7dGhyb3cgbmV3IEVycm9yKCIncGFyZW50JyBtdXN0IGJlIGEgcHJvbWlzZSByZXR1cm5lZCBieSAkcmVzb2x2ZS5yZXNvbHZlKCkiKTt9CnZhciByZXNvbHV0aW9uPSRxLmRlZmVyKCkscmVzdWx0PXJlc29sdXRpb24ucHJvbWlzZSxwcm9taXNlcz1yZXN1bHQuJCRwcm9taXNlcz17fSx2YWx1ZXM9ZXh0ZW5kKHt9LGxvY2Fscyksd2FpdD0xK3BsYW4ubGVuZ3RoLzMsbWVyZ2VkPWZhbHNlO2Z1bmN0aW9uIGRvbmUoKXtpZighLS13YWl0KXtpZighbWVyZ2VkKW1lcmdlKHZhbHVlcyxwYXJlbnQuJCR2YWx1ZXMpO3Jlc3VsdC4kJHZhbHVlcz12YWx1ZXM7cmVzdWx0LiQkcHJvbWlzZXM9dHJ1ZTtyZXNvbHV0aW9uLnJlc29sdmUodmFsdWVzKTt9fQpmdW5jdGlvbiBmYWlsKHJlYXNvbil7cmVzdWx0LiQkZmFpbHVyZT1yZWFzb247cmVzb2x1dGlvbi5yZWplY3QocmVhc29uKTt9CmlmKGlzRGVmaW5lZChwYXJlbnQuJCRmYWlsdXJlKSl7ZmFpbChwYXJlbnQuJCRmYWlsdXJlKTtyZXR1cm4gcmVzdWx0O30KaWYocGFyZW50LiQkdmFsdWVzKXttZXJnZWQ9bWVyZ2UodmFsdWVzLHBhcmVudC4kJHZhbHVlcyk7ZG9uZSgpO31lbHNle2V4dGVuZChwcm9taXNlcyxwYXJlbnQuJCRwcm9taXNlcyk7cGFyZW50LnRoZW4oZG9uZSxmYWlsKTt9CmZvcih2YXIgaT0wLGlpPXBsYW4ubGVuZ3RoO2k8aWk7aSs9Myl7aWYobG9jYWxzLmhhc093blByb3BlcnR5KHBsYW5baV0pKWRvbmUoKTtlbHNlIGludm9rZShwbGFuW2ldLHBsYW5baSsxXSxwbGFuW2krMl0pO30KZnVuY3Rpb24gaW52b2tlKGtleSxpbnZvY2FibGUscGFyYW1zKXt2YXIgaW52b2NhdGlvbj0kcS5kZWZlcigpLHdhaXRQYXJhbXM9MDtmdW5jdGlvbiBvbmZhaWx1cmUocmVhc29uKXtpbnZvY2F0aW9uLnJlamVjdChyZWFzb24pO2ZhaWwocmVhc29uKTt9CmZvckVhY2gocGFyYW1zLGZ1bmN0aW9uKGRlcCl7aWYocHJvbWlzZXMuaGFzT3duUHJvcGVydHkoZGVwKSYmIWxvY2Fscy5oYXNPd25Qcm9wZXJ0eShkZXApKXt3YWl0UGFyYW1zKys7cHJvbWlzZXNbZGVwXS50aGVuKGZ1bmN0aW9uKHJlc3VsdCl7dmFsdWVzW2RlcF09cmVzdWx0O2lmKCEoLS13YWl0UGFyYW1zKSlwcm9jZWVkKCk7fSxvbmZhaWx1cmUpO319KTtpZighd2FpdFBhcmFtcylwcm9jZWVkKCk7ZnVuY3Rpb24gcHJvY2VlZCgpe2lmKGlzRGVmaW5lZChyZXN1bHQuJCRmYWlsdXJlKSlyZXR1cm47dHJ5e2ludm9jYXRpb24ucmVzb2x2ZSgkaW5qZWN0b3IuaW52b2tlKGludm9jYWJsZSxzZWxmLHZhbHVlcykpO2ludm9jYXRpb24ucHJvbWlzZS50aGVuKGZ1bmN0aW9uKHJlc3VsdCl7dmFsdWVzW2tleV09cmVzdWx0O2RvbmUoKTt9LG9uZmFpbHVyZSk7fWNhdGNoKGUpe29uZmFpbHVyZShlKTt9fQpwcm9taXNlc1trZXldPWludm9jYXRpb24ucHJvbWlzZTt9CnJldHVybiByZXN1bHQ7fTt9O3RoaXMucmVzb2x2ZT1mdW5jdGlvbihpbnZvY2FibGVzLGxvY2FscyxwYXJlbnQsc2VsZil7cmV0dXJuIHRoaXMuc3R1ZHkoaW52b2NhYmxlcykobG9jYWxzLHBhcmVudCxzZWxmKTt9O30KYW5ndWxhci5tb2R1bGUoJ3VpLnJvdXRlci51dGlsJykuc2VydmljZSgnJHJlc29sdmUnLCRSZXNvbHZlKTskVGVtcGxhdGVGYWN0b3J5LiRpbmplY3Q9WyckaHR0cCcsJyR0ZW1wbGF0ZUNhY2hlJywnJGluamVjdG9yJ107ZnVuY3Rpb24gJFRlbXBsYXRlRmFjdG9yeSgkaHR0cCwkdGVtcGxhdGVDYWNoZSwkaW5qZWN0b3Ipe3RoaXMuZnJvbUNvbmZpZz1mdW5jdGlvbihjb25maWcscGFyYW1zLGxvY2Fscyl7cmV0dXJuKGlzRGVmaW5lZChjb25maWcudGVtcGxhdGUpP3RoaXMuZnJvbVN0cmluZyhjb25maWcudGVtcGxhdGUscGFyYW1zKTppc0RlZmluZWQoY29uZmlnLnRlbXBsYXRlVXJsKT90aGlzLmZyb21VcmwoY29uZmlnLnRlbXBsYXRlVXJsLHBhcmFtcyk6aXNEZWZpbmVkKGNvbmZpZy50ZW1wbGF0ZVByb3ZpZGVyKT90aGlzLmZyb21Qcm92aWRlcihjb25maWcudGVtcGxhdGVQcm92aWRlcixwYXJhbXMsbG9jYWxzKTpudWxsKTt9O3RoaXMuZnJvbVN0cmluZz1mdW5jdGlvbih0ZW1wbGF0ZSxwYXJhbXMpe3JldHVybiBpc0Z1bmN0aW9uKHRlbXBsYXRlKT90ZW1wbGF0ZShwYXJhbXMpOnRlbXBsYXRlO307dGhpcy5mcm9tVXJsPWZ1bmN0aW9uKHVybCxwYXJhbXMpe2lmKGlzRnVuY3Rpb24odXJsKSl1cmw9dXJsKHBhcmFtcyk7aWYodXJsPT1udWxsKXJldHVybiBudWxsO2Vsc2UgcmV0dXJuICRodHRwLmdldCh1cmwse2NhY2hlOiR0ZW1wbGF0ZUNhY2hlfSkudGhlbihmdW5jdGlvbihyZXNwb25zZSl7cmV0dXJuIHJlc3BvbnNlLmRhdGE7fSk7fTt0aGlzLmZyb21Qcm92aWRlcj1mdW5jdGlvbihwcm92aWRlcixwYXJhbXMsbG9jYWxzKXtyZXR1cm4gJGluamVjdG9yLmludm9rZShwcm92aWRlcixudWxsLGxvY2Fsc3x8e3BhcmFtczpwYXJhbXN9KTt9O30KYW5ndWxhci5tb2R1bGUoJ3VpLnJvdXRlci51dGlsJykuc2VydmljZSgnJHRlbXBsYXRlRmFjdG9yeScsJFRlbXBsYXRlRmFjdG9yeSk7ZnVuY3Rpb24gVXJsTWF0Y2hlcihwYXR0ZXJuKXt2YXIgcGxhY2Vob2xkZXI9LyhbOipdKShcdyspfFx7KFx3KykoPzpcOigoPzpbXnt9XFxdK3xcXC58XHsoPzpbXnt9XFxdK3xcXC4pKlx9KSspKT9cfS9nLG5hbWVzPXt9LGNvbXBpbGVkPSdeJyxsYXN0PTAsbSxzZWdtZW50cz10aGlzLnNlZ21lbnRzPVtdLHBhcmFtcz10aGlzLnBhcmFtcz1bXTtmdW5jdGlvbiBhZGRQYXJhbWV0ZXIoaWQpe2lmKCEvXlx3KygtK1x3KykqJC8udGVzdChpZCkpdGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkIHBhcmFtZXRlciBuYW1lICciK2lkKyInIGluIHBhdHRlcm4gJyIrcGF0dGVybisiJyIpO2lmKG5hbWVzW2lkXSl0aHJvdyBuZXcgRXJyb3IoIkR1cGxpY2F0ZSBwYXJhbWV0ZXIgbmFtZSAnIitpZCsiJyBpbiBwYXR0ZXJuICciK3BhdHRlcm4rIiciKTtuYW1lc1tpZF09dHJ1ZTtwYXJhbXMucHVzaChpZCk7fQpmdW5jdGlvbiBxdW90ZVJlZ0V4cChzdHJpbmcpe3JldHVybiBzdHJpbmcucmVwbGFjZSgvW1xcXFtcXVxeJCorPy4oKXx7fV0vZywiXFwkJiIpO30KdGhpcy5zb3VyY2U9cGF0dGVybjt2YXIgaWQscmVnZXhwLHNlZ21lbnQ7d2hpbGUoKG09cGxhY2Vob2xkZXIuZXhlYyhwYXR0ZXJuKSkpe2lkPW1bMl18fG1bM107cmVnZXhwPW1bNF18fChtWzFdPT0nKic/Jy4qJzonW14vXSonKTtzZWdtZW50PXBhdHRlcm4uc3Vic3RyaW5nKGxhc3QsbS5pbmRleCk7aWYoc2VnbWVudC5pbmRleE9mKCc/Jyk+PTApYnJlYWs7Y29tcGlsZWQrPXF1b3RlUmVnRXhwKHNlZ21lbnQpKycoJytyZWdleHArJyknO2FkZFBhcmFtZXRlcihpZCk7c2VnbWVudHMucHVzaChzZWdtZW50KTtsYXN0PXBsYWNlaG9sZGVyLmxhc3RJbmRleDt9CnNlZ21lbnQ9cGF0dGVybi5zdWJzdHJpbmcobGFzdCk7dmFyIGk9c2VnbWVudC5pbmRleE9mKCc/Jyk7aWYoaT49MCl7dmFyIHNlYXJjaD10aGlzLnNvdXJjZVNlYXJjaD1zZWdtZW50LnN1YnN0cmluZyhpKTtzZWdtZW50PXNlZ21lbnQuc3Vic3RyaW5nKDAsaSk7dGhpcy5zb3VyY2VQYXRoPXBhdHRlcm4uc3Vic3RyaW5nKDAsbGFzdCtpKTtmb3JFYWNoKHNlYXJjaC5zdWJzdHJpbmcoMSkuc3BsaXQoL1smP10vKSxhZGRQYXJhbWV0ZXIpO31lbHNle3RoaXMuc291cmNlUGF0aD1wYXR0ZXJuO3RoaXMuc291cmNlU2VhcmNoPScnO30KY29tcGlsZWQrPXF1b3RlUmVnRXhwKHNlZ21lbnQpKyckJztzZWdtZW50cy5wdXNoKHNlZ21lbnQpO3RoaXMucmVnZXhwPW5ldyBSZWdFeHAoY29tcGlsZWQpO3RoaXMucHJlZml4PXNlZ21lbnRzWzBdO30KVXJsTWF0Y2hlci5wcm90b3R5cGUuY29uY2F0PWZ1bmN0aW9uKHBhdHRlcm4pe3JldHVybiBuZXcgVXJsTWF0Y2hlcih0aGlzLnNvdXJjZVBhdGgrcGF0dGVybit0aGlzLnNvdXJjZVNlYXJjaCk7fTtVcmxNYXRjaGVyLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLnNvdXJjZTt9O1VybE1hdGNoZXIucHJvdG90eXBlLmV4ZWM9ZnVuY3Rpb24ocGF0aCxzZWFyY2hQYXJhbXMpe3ZhciBtPXRoaXMucmVnZXhwLmV4ZWMocGF0aCk7aWYoIW0pcmV0dXJuIG51bGw7dmFyIHBhcmFtcz10aGlzLnBhcmFtcyxuVG90YWw9cGFyYW1zLmxlbmd0aCxuUGF0aD10aGlzLnNlZ21lbnRzLmxlbmd0aC0xLHZhbHVlcz17fSxpO2lmKG5QYXRoIT09bS5sZW5ndGgtMSl0aHJvdyBuZXcgRXJyb3IoIlVuYmFsYW5jZWQgY2FwdHVyZSBncm91cCBpbiByb3V0ZSAnIit0aGlzLnNvdXJjZSsiJyIpO2ZvcihpPTA7aTxuUGF0aDtpKyspdmFsdWVzW3BhcmFtc1tpXV09bVtpKzFdO2Zvcig7aTxuVG90YWw7aSsrKXZhbHVlc1twYXJhbXNbaV1dPXNlYXJjaFBhcmFtc1twYXJhbXNbaV1dO3JldHVybiB2YWx1ZXM7fTtVcmxNYXRjaGVyLnByb3RvdHlwZS5wYXJhbWV0ZXJzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucGFyYW1zO307VXJsTWF0Y2hlci5wcm90b3R5cGUuZm9ybWF0PWZ1bmN0aW9uKHZhbHVlcyl7dmFyIHNlZ21lbnRzPXRoaXMuc2VnbWVudHMscGFyYW1zPXRoaXMucGFyYW1zO2lmKCF2YWx1ZXMpcmV0dXJuIHNlZ21lbnRzLmpvaW4oJycpO3ZhciBuUGF0aD1zZWdtZW50cy5sZW5ndGgtMSxuVG90YWw9cGFyYW1zLmxlbmd0aCxyZXN1bHQ9c2VnbWVudHNbMF0saSxzZWFyY2gsdmFsdWU7Zm9yKGk9MDtpPG5QYXRoO2krKyl7dmFsdWU9dmFsdWVzW3BhcmFtc1tpXV07aWYodmFsdWUhPW51bGwpcmVzdWx0Kz1lbmNvZGVVUklDb21wb25lbnQodmFsdWUpO3Jlc3VsdCs9c2VnbWVudHNbaSsxXTt9CmZvcig7aTxuVG90YWw7aSsrKXt2YWx1ZT12YWx1ZXNbcGFyYW1zW2ldXTtpZih2YWx1ZSE9bnVsbCl7cmVzdWx0Kz0oc2VhcmNoPycmJzonPycpK3BhcmFtc1tpXSsnPScrZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlKTtzZWFyY2g9dHJ1ZTt9fQpyZXR1cm4gcmVzdWx0O307ZnVuY3Rpb24gJFVybE1hdGNoZXJGYWN0b3J5KCl7dGhpcy5jb21waWxlPWZ1bmN0aW9uKHBhdHRlcm4pe3JldHVybiBuZXcgVXJsTWF0Y2hlcihwYXR0ZXJuKTt9O3RoaXMuaXNNYXRjaGVyPWZ1bmN0aW9uKG8pe3JldHVybiBpc09iamVjdChvKSYmaXNGdW5jdGlvbihvLmV4ZWMpJiZpc0Z1bmN0aW9uKG8uZm9ybWF0KSYmaXNGdW5jdGlvbihvLmNvbmNhdCk7fTt0aGlzLiRnZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpczt9O30KYW5ndWxhci5tb2R1bGUoJ3VpLnJvdXRlci51dGlsJykucHJvdmlkZXIoJyR1cmxNYXRjaGVyRmFjdG9yeScsJFVybE1hdGNoZXJGYWN0b3J5KTskVXJsUm91dGVyUHJvdmlkZXIuJGluamVjdD1bJyR1cmxNYXRjaGVyRmFjdG9yeVByb3ZpZGVyJ107ZnVuY3Rpb24gJFVybFJvdXRlclByb3ZpZGVyKCR1cmxNYXRjaGVyRmFjdG9yeSl7dmFyIHJ1bGVzPVtdLG90aGVyd2lzZT1udWxsO2Z1bmN0aW9uIHJlZ0V4cFByZWZpeChyZSl7dmFyIHByZWZpeD0vXlxeKCg/OlxcW15hLXpBLVowLTldfFteXFxcW1xdXF4kKis/LigpfHt9XSspKikvLmV4ZWMocmUuc291cmNlKTtyZXR1cm4ocHJlZml4IT1udWxsKT9wcmVmaXhbMV0ucmVwbGFjZSgvXFwoLikvZywiJDEiKTonJzt9CmZ1bmN0aW9uIGludGVycG9sYXRlKHBhdHRlcm4sbWF0Y2gpe3JldHVybiBwYXR0ZXJuLnJlcGxhY2UoL1wkKFwkfFxkezEsMn0pLyxmdW5jdGlvbihtLHdoYXQpe3JldHVybiBtYXRjaFt3aGF0PT09JyQnPzA6TnVtYmVyKHdoYXQpXTt9KTt9CnRoaXMucnVsZT1mdW5jdGlvbihydWxlKXtpZighaXNGdW5jdGlvbihydWxlKSl0aHJvdyBuZXcgRXJyb3IoIidydWxlJyBtdXN0IGJlIGEgZnVuY3Rpb24iKTtydWxlcy5wdXNoKHJ1bGUpO3JldHVybiB0aGlzO307dGhpcy5vdGhlcndpc2U9ZnVuY3Rpb24ocnVsZSl7aWYoaXNTdHJpbmcocnVsZSkpe3ZhciByZWRpcmVjdD1ydWxlO3J1bGU9ZnVuY3Rpb24oKXtyZXR1cm4gcmVkaXJlY3Q7fTt9CmVsc2UgaWYoIWlzRnVuY3Rpb24ocnVsZSkpdGhyb3cgbmV3IEVycm9yKCIncnVsZScgbXVzdCBiZSBhIGZ1bmN0aW9uIik7b3RoZXJ3aXNlPXJ1bGU7cmV0dXJuIHRoaXM7fTtmdW5jdGlvbiBoYW5kbGVJZk1hdGNoKCRpbmplY3RvcixoYW5kbGVyLG1hdGNoKXtpZighbWF0Y2gpcmV0dXJuIGZhbHNlO3ZhciByZXN1bHQ9JGluamVjdG9yLmludm9rZShoYW5kbGVyLGhhbmRsZXIseyRtYXRjaDptYXRjaH0pO3JldHVybiBpc0RlZmluZWQocmVzdWx0KT9yZXN1bHQ6dHJ1ZTt9CnRoaXMud2hlbj1mdW5jdGlvbih3aGF0LGhhbmRsZXIpe3ZhciByZWRpcmVjdCxoYW5kbGVySXNTdHJpbmc9aXNTdHJpbmcoaGFuZGxlcik7aWYoaXNTdHJpbmcod2hhdCkpd2hhdD0kdXJsTWF0Y2hlckZhY3RvcnkuY29tcGlsZSh3aGF0KTtpZighaGFuZGxlcklzU3RyaW5nJiYhaXNGdW5jdGlvbihoYW5kbGVyKSYmIWlzQXJyYXkoaGFuZGxlcikpCnRocm93IG5ldyBFcnJvcigiaW52YWxpZCAnaGFuZGxlcicgaW4gd2hlbigpIik7dmFyIHN0cmF0ZWdpZXM9e21hdGNoZXI6ZnVuY3Rpb24od2hhdCxoYW5kbGVyKXtpZihoYW5kbGVySXNTdHJpbmcpe3JlZGlyZWN0PSR1cmxNYXRjaGVyRmFjdG9yeS5jb21waWxlKGhhbmRsZXIpO2hhbmRsZXI9WyckbWF0Y2gnLGZ1bmN0aW9uKCRtYXRjaCl7cmV0dXJuIHJlZGlyZWN0LmZvcm1hdCgkbWF0Y2gpO31dO30KcmV0dXJuIGV4dGVuZChmdW5jdGlvbigkaW5qZWN0b3IsJGxvY2F0aW9uKXtyZXR1cm4gaGFuZGxlSWZNYXRjaCgkaW5qZWN0b3IsaGFuZGxlcix3aGF0LmV4ZWMoJGxvY2F0aW9uLnBhdGgoKSwkbG9jYXRpb24uc2VhcmNoKCkpKTt9LHtwcmVmaXg6aXNTdHJpbmcod2hhdC5wcmVmaXgpP3doYXQucHJlZml4OicnfSk7fSxyZWdleDpmdW5jdGlvbih3aGF0LGhhbmRsZXIpe2lmKHdoYXQuZ2xvYmFsfHx3aGF0LnN0aWNreSl0aHJvdyBuZXcgRXJyb3IoIndoZW4oKSBSZWdFeHAgbXVzdCBub3QgYmUgZ2xvYmFsIG9yIHN0aWNreSIpO2lmKGhhbmRsZXJJc1N0cmluZyl7cmVkaXJlY3Q9aGFuZGxlcjtoYW5kbGVyPVsnJG1hdGNoJyxmdW5jdGlvbigkbWF0Y2gpe3JldHVybiBpbnRlcnBvbGF0ZShyZWRpcmVjdCwkbWF0Y2gpO31dO30KcmV0dXJuIGV4dGVuZChmdW5jdGlvbigkaW5qZWN0b3IsJGxvY2F0aW9uKXtyZXR1cm4gaGFuZGxlSWZNYXRjaCgkaW5qZWN0b3IsaGFuZGxlcix3aGF0LmV4ZWMoJGxvY2F0aW9uLnBhdGgoKSkpO30se3ByZWZpeDpyZWdFeHBQcmVmaXgod2hhdCl9KTt9fTt2YXIgY2hlY2s9e21hdGNoZXI6JHVybE1hdGNoZXJGYWN0b3J5LmlzTWF0Y2hlcih3aGF0KSxyZWdleDp3aGF0IGluc3RhbmNlb2YgUmVnRXhwfTtmb3IodmFyIG4gaW4gY2hlY2spe2lmKGNoZWNrW25dKXtyZXR1cm4gdGhpcy5ydWxlKHN0cmF0ZWdpZXNbbl0od2hhdCxoYW5kbGVyKSk7fX0KdGhyb3cgbmV3IEVycm9yKCJpbnZhbGlkICd3aGF0JyBpbiB3aGVuKCkiKTt9O3RoaXMuJGdldD1bJyRsb2NhdGlvbicsJyRyb290U2NvcGUnLCckaW5qZWN0b3InLGZ1bmN0aW9uKCRsb2NhdGlvbiwkcm9vdFNjb3BlLCRpbmplY3Rvcil7ZnVuY3Rpb24gdXBkYXRlKGV2dCl7aWYoZXZ0JiZldnQuZGVmYXVsdFByZXZlbnRlZClyZXR1cm47ZnVuY3Rpb24gY2hlY2socnVsZSl7dmFyIGhhbmRsZWQ9cnVsZSgkaW5qZWN0b3IsJGxvY2F0aW9uKTtpZihoYW5kbGVkKXtpZihpc1N0cmluZyhoYW5kbGVkKSkkbG9jYXRpb24ucmVwbGFjZSgpLnVybChoYW5kbGVkKTtyZXR1cm4gdHJ1ZTt9CnJldHVybiBmYWxzZTt9CnZhciBuPXJ1bGVzLmxlbmd0aCxpO2ZvcihpPTA7aTxuO2krKyl7aWYoY2hlY2socnVsZXNbaV0pKXJldHVybjt9CmlmKG90aGVyd2lzZSljaGVjayhvdGhlcndpc2UpO30KJHJvb3RTY29wZS4kb24oJyRsb2NhdGlvbkNoYW5nZVN1Y2Nlc3MnLHVwZGF0ZSk7cmV0dXJue3N5bmM6ZnVuY3Rpb24oKXt1cGRhdGUoKTt9fTt9XTt9CmFuZ3VsYXIubW9kdWxlKCd1aS5yb3V0ZXIucm91dGVyJykucHJvdmlkZXIoJyR1cmxSb3V0ZXInLCRVcmxSb3V0ZXJQcm92aWRlcik7JFN0YXRlUHJvdmlkZXIuJGluamVjdD1bJyR1cmxSb3V0ZXJQcm92aWRlcicsJyR1cmxNYXRjaGVyRmFjdG9yeVByb3ZpZGVyJywnJGxvY2F0aW9uUHJvdmlkZXInXTtmdW5jdGlvbiAkU3RhdGVQcm92aWRlcigkdXJsUm91dGVyUHJvdmlkZXIsJHVybE1hdGNoZXJGYWN0b3J5LCRsb2NhdGlvblByb3ZpZGVyKXt2YXIgcm9vdCxzdGF0ZXM9e30sJHN0YXRlLHF1ZXVlPXt9LGFic3RyYWN0S2V5PSdhYnN0cmFjdCc7dmFyIHN0YXRlQnVpbGRlcj17cGFyZW50OmZ1bmN0aW9uKHN0YXRlKXtpZihpc0RlZmluZWQoc3RhdGUucGFyZW50KSYmc3RhdGUucGFyZW50KXJldHVybiBmaW5kU3RhdGUoc3RhdGUucGFyZW50KTt2YXIgY29tcG9zaXRlTmFtZT0vXiguKylcLlteLl0rJC8uZXhlYyhzdGF0ZS5uYW1lKTtyZXR1cm4gY29tcG9zaXRlTmFtZT9maW5kU3RhdGUoY29tcG9zaXRlTmFtZVsxXSk6cm9vdDt9LGRhdGE6ZnVuY3Rpb24oc3RhdGUpe2lmKHN0YXRlLnBhcmVudCYmc3RhdGUucGFyZW50LmRhdGEpe3N0YXRlLmRhdGE9c3RhdGUuc2VsZi5kYXRhPWV4dGVuZCh7fSxzdGF0ZS5wYXJlbnQuZGF0YSxzdGF0ZS5kYXRhKTt9CnJldHVybiBzdGF0ZS5kYXRhO30sdXJsOmZ1bmN0aW9uKHN0YXRlKXt2YXIgdXJsPXN0YXRlLnVybDtpZihpc1N0cmluZyh1cmwpKXtpZih1cmwuY2hhckF0KDApPT0nXicpe3JldHVybiAkdXJsTWF0Y2hlckZhY3RvcnkuY29tcGlsZSh1cmwuc3Vic3RyaW5nKDEpKTt9CnJldHVybihzdGF0ZS5wYXJlbnQubmF2aWdhYmxlfHxyb290KS51cmwuY29uY2F0KHVybCk7fQppZigkdXJsTWF0Y2hlckZhY3RvcnkuaXNNYXRjaGVyKHVybCl8fHVybD09bnVsbCl7cmV0dXJuIHVybDt9CnRocm93IG5ldyBFcnJvcigiSW52YWxpZCB1cmwgJyIrdXJsKyInIGluIHN0YXRlICciK3N0YXRlKyInIik7fSxuYXZpZ2FibGU6ZnVuY3Rpb24oc3RhdGUpe3JldHVybiBzdGF0ZS51cmw/c3RhdGU6KHN0YXRlLnBhcmVudD9zdGF0ZS5wYXJlbnQubmF2aWdhYmxlOm51bGwpO30scGFyYW1zOmZ1bmN0aW9uKHN0YXRlKXtpZighc3RhdGUucGFyYW1zKXtyZXR1cm4gc3RhdGUudXJsP3N0YXRlLnVybC5wYXJhbWV0ZXJzKCk6c3RhdGUucGFyZW50LnBhcmFtczt9CmlmKCFpc0FycmF5KHN0YXRlLnBhcmFtcykpdGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkIHBhcmFtcyBpbiBzdGF0ZSAnIitzdGF0ZSsiJyIpO2lmKHN0YXRlLnVybCl0aHJvdyBuZXcgRXJyb3IoIkJvdGggcGFyYW1zIGFuZCB1cmwgc3BlY2ljaWZpZWQgaW4gc3RhdGUgJyIrc3RhdGUrIiciKTtyZXR1cm4gc3RhdGUucGFyYW1zO30sdmlld3M6ZnVuY3Rpb24oc3RhdGUpe3ZhciB2aWV3cz17fTtmb3JFYWNoKGlzRGVmaW5lZChzdGF0ZS52aWV3cyk/c3RhdGUudmlld3M6eycnOnN0YXRlfSxmdW5jdGlvbih2aWV3LG5hbWUpe2lmKG5hbWUuaW5kZXhPZignQCcpPDApbmFtZSs9J0AnK3N0YXRlLnBhcmVudC5uYW1lO3ZpZXdzW25hbWVdPXZpZXc7fSk7cmV0dXJuIHZpZXdzO30sb3duUGFyYW1zOmZ1bmN0aW9uKHN0YXRlKXtpZighc3RhdGUucGFyZW50KXtyZXR1cm4gc3RhdGUucGFyYW1zO30KdmFyIHBhcmFtTmFtZXM9e307Zm9yRWFjaChzdGF0ZS5wYXJhbXMsZnVuY3Rpb24ocCl7cGFyYW1OYW1lc1twXT10cnVlO30pO2ZvckVhY2goc3RhdGUucGFyZW50LnBhcmFtcyxmdW5jdGlvbihwKXtpZighcGFyYW1OYW1lc1twXSl7dGhyb3cgbmV3IEVycm9yKCJNaXNzaW5nIHJlcXVpcmVkIHBhcmFtZXRlciAnIitwKyInIGluIHN0YXRlICciK3N0YXRlLm5hbWUrIiciKTt9CnBhcmFtTmFtZXNbcF09ZmFsc2U7fSk7dmFyIG93blBhcmFtcz1bXTtmb3JFYWNoKHBhcmFtTmFtZXMsZnVuY3Rpb24ob3duLHApe2lmKG93bilvd25QYXJhbXMucHVzaChwKTt9KTtyZXR1cm4gb3duUGFyYW1zO30scGF0aDpmdW5jdGlvbihzdGF0ZSl7cmV0dXJuIHN0YXRlLnBhcmVudD9zdGF0ZS5wYXJlbnQucGF0aC5jb25jYXQoc3RhdGUpOltdO30saW5jbHVkZXM6ZnVuY3Rpb24oc3RhdGUpe3ZhciBpbmNsdWRlcz1zdGF0ZS5wYXJlbnQ/ZXh0ZW5kKHt9LHN0YXRlLnBhcmVudC5pbmNsdWRlcyk6e307aW5jbHVkZXNbc3RhdGUubmFtZV09dHJ1ZTtyZXR1cm4gaW5jbHVkZXM7fSwkZGVsZWdhdGVzOnt9fTtmdW5jdGlvbiBpc1JlbGF0aXZlKHN0YXRlTmFtZSl7cmV0dXJuIHN0YXRlTmFtZS5pbmRleE9mKCIuIik9PT0wfHxzdGF0ZU5hbWUuaW5kZXhPZigiXiIpPT09MDt9CmZ1bmN0aW9uIGZpbmRTdGF0ZShzdGF0ZU9yTmFtZSxiYXNlKXt2YXIgaXNTdHI9aXNTdHJpbmcoc3RhdGVPck5hbWUpLG5hbWU9aXNTdHI/c3RhdGVPck5hbWU6c3RhdGVPck5hbWUubmFtZSxwYXRoPWlzUmVsYXRpdmUobmFtZSk7aWYocGF0aCl7aWYoIWJhc2UpdGhyb3cgbmV3IEVycm9yKCJObyByZWZlcmVuY2UgcG9pbnQgZ2l2ZW4gZm9yIHBhdGggJyIrbmFtZSsiJyIpO3ZhciByZWw9bmFtZS5zcGxpdCgiLiIpLGk9MCxwYXRoTGVuZ3RoPXJlbC5sZW5ndGgsY3VycmVudD1iYXNlO2Zvcig7aTxwYXRoTGVuZ3RoO2krKyl7aWYocmVsW2ldPT09IiImJmk9PT0wKXtjdXJyZW50PWJhc2U7Y29udGludWU7fQppZihyZWxbaV09PT0iXiIpe2lmKCFjdXJyZW50LnBhcmVudCl0aHJvdyBuZXcgRXJyb3IoIlBhdGggJyIrbmFtZSsiJyBub3QgdmFsaWQgZm9yIHN0YXRlICciK2Jhc2UubmFtZSsiJyIpO2N1cnJlbnQ9Y3VycmVudC5wYXJlbnQ7Y29udGludWU7fQpicmVhazt9CnJlbD1yZWwuc2xpY2UoaSkuam9pbigiLiIpO25hbWU9Y3VycmVudC5uYW1lKyhjdXJyZW50Lm5hbWUmJnJlbD8iLiI6IiIpK3JlbDt9CnZhciBzdGF0ZT1zdGF0ZXNbbmFtZV07aWYoc3RhdGUmJihpc1N0cnx8KCFpc1N0ciYmKHN0YXRlPT09c3RhdGVPck5hbWV8fHN0YXRlLnNlbGY9PT1zdGF0ZU9yTmFtZSkpKSl7cmV0dXJuIHN0YXRlO30KcmV0dXJuIHVuZGVmaW5lZDt9CmZ1bmN0aW9uIHF1ZXVlU3RhdGUocGFyZW50TmFtZSxzdGF0ZSl7aWYoIXF1ZXVlW3BhcmVudE5hbWVdKXtxdWV1ZVtwYXJlbnROYW1lXT1bXTt9CnF1ZXVlW3BhcmVudE5hbWVdLnB1c2goc3RhdGUpO30KZnVuY3Rpb24gcmVnaXN0ZXJTdGF0ZShzdGF0ZSl7c3RhdGU9aW5oZXJpdChzdGF0ZSx7c2VsZjpzdGF0ZSxyZXNvbHZlOnN0YXRlLnJlc29sdmV8fHt9LHRvU3RyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubmFtZTt9fSk7dmFyIG5hbWU9c3RhdGUubmFtZTtpZighaXNTdHJpbmcobmFtZSl8fG5hbWUuaW5kZXhPZignQCcpPj0wKXRocm93IG5ldyBFcnJvcigiU3RhdGUgbXVzdCBoYXZlIGEgdmFsaWQgbmFtZSIpO2lmKHN0YXRlcy5oYXNPd25Qcm9wZXJ0eShuYW1lKSl0aHJvdyBuZXcgRXJyb3IoIlN0YXRlICciK25hbWUrIicnIGlzIGFscmVhZHkgZGVmaW5lZCIpO3ZhciBwYXJlbnROYW1lPShuYW1lLmluZGV4T2YoJy4nKSE9PS0xKT9uYW1lLnN1YnN0cmluZygwLG5hbWUubGFzdEluZGV4T2YoJy4nKSk6KGlzU3RyaW5nKHN0YXRlLnBhcmVudCkpP3N0YXRlLnBhcmVudDonJztpZihwYXJlbnROYW1lJiYhc3RhdGVzW3BhcmVudE5hbWVdKXtyZXR1cm4gcXVldWVTdGF0ZShwYXJlbnROYW1lLHN0YXRlLnNlbGYpO30KZm9yKHZhciBrZXkgaW4gc3RhdGVCdWlsZGVyKXtpZihpc0Z1bmN0aW9uKHN0YXRlQnVpbGRlcltrZXldKSlzdGF0ZVtrZXldPXN0YXRlQnVpbGRlcltrZXldKHN0YXRlLHN0YXRlQnVpbGRlci4kZGVsZWdhdGVzW2tleV0pO30Kc3RhdGVzW25hbWVdPXN0YXRlO2lmKCFzdGF0ZVthYnN0cmFjdEtleV0mJnN0YXRlLnVybCl7JHVybFJvdXRlclByb3ZpZGVyLndoZW4oc3RhdGUudXJsLFsnJG1hdGNoJywnJHN0YXRlUGFyYW1zJyxmdW5jdGlvbigkbWF0Y2gsJHN0YXRlUGFyYW1zKXtpZigkc3RhdGUuJGN1cnJlbnQubmF2aWdhYmxlIT1zdGF0ZXx8IWVxdWFsRm9yS2V5cygkbWF0Y2gsJHN0YXRlUGFyYW1zKSl7JHN0YXRlLnRyYW5zaXRpb25UbyhzdGF0ZSwkbWF0Y2gse2xvY2F0aW9uOmZhbHNlfSk7fX1dKTt9CmlmKHF1ZXVlW25hbWVdKXtmb3IodmFyIGk9MDtpPHF1ZXVlW25hbWVdLmxlbmd0aDtpKyspe3JlZ2lzdGVyU3RhdGUocXVldWVbbmFtZV1baV0pO319CnJldHVybiBzdGF0ZTt9CmZ1bmN0aW9uIGlzR2xvYih0ZXh0KXtyZXR1cm4gdGV4dC5pbmRleE9mKCcqJyk+LTE7fQpmdW5jdGlvbiBkb2VzU3RhdGVNYXRjaEdsb2IoZ2xvYil7dmFyIGdsb2JTZWdtZW50cz1nbG9iLnNwbGl0KCcuJyksc2VnbWVudHM9JHN0YXRlLiRjdXJyZW50Lm5hbWUuc3BsaXQoJy4nKTtpZihnbG9iU2VnbWVudHNbMF09PT0nKionKXtzZWdtZW50cz1zZWdtZW50cy5zbGljZShzZWdtZW50cy5pbmRleE9mKGdsb2JTZWdtZW50c1sxXSkpO3NlZ21lbnRzLnVuc2hpZnQoJyoqJyk7fQppZihnbG9iU2VnbWVudHNbZ2xvYlNlZ21lbnRzLmxlbmd0aC0xXT09PScqKicpe3NlZ21lbnRzLnNwbGljZShzZWdtZW50cy5pbmRleE9mKGdsb2JTZWdtZW50c1tnbG9iU2VnbWVudHMubGVuZ3RoLTJdKSsxLE51bWJlci5NQVhfVkFMVUUpO3NlZ21lbnRzLnB1c2goJyoqJyk7fQppZihnbG9iU2VnbWVudHMubGVuZ3RoIT1zZWdtZW50cy5sZW5ndGgpe3JldHVybiBmYWxzZTt9CmZvcih2YXIgaT0wLGw9Z2xvYlNlZ21lbnRzLmxlbmd0aDtpPGw7aSsrKXtpZihnbG9iU2VnbWVudHNbaV09PT0nKicpe3NlZ21lbnRzW2ldPScqJzt9fQpyZXR1cm4gc2VnbWVudHMuam9pbignJyk9PT1nbG9iU2VnbWVudHMuam9pbignJyk7fQpyb290PXJlZ2lzdGVyU3RhdGUoe25hbWU6JycsdXJsOideJyx2aWV3czpudWxsLCdhYnN0cmFjdCc6dHJ1ZX0pO3Jvb3QubmF2aWdhYmxlPW51bGw7dGhpcy5kZWNvcmF0b3I9ZGVjb3JhdG9yO2Z1bmN0aW9uIGRlY29yYXRvcihuYW1lLGZ1bmMpe2lmKGlzU3RyaW5nKG5hbWUpJiYhaXNEZWZpbmVkKGZ1bmMpKXtyZXR1cm4gc3RhdGVCdWlsZGVyW25hbWVdO30KaWYoIWlzRnVuY3Rpb24oZnVuYyl8fCFpc1N0cmluZyhuYW1lKSl7cmV0dXJuIHRoaXM7fQppZihzdGF0ZUJ1aWxkZXJbbmFtZV0mJiFzdGF0ZUJ1aWxkZXIuJGRlbGVnYXRlc1tuYW1lXSl7c3RhdGVCdWlsZGVyLiRkZWxlZ2F0ZXNbbmFtZV09c3RhdGVCdWlsZGVyW25hbWVdO30Kc3RhdGVCdWlsZGVyW25hbWVdPWZ1bmM7cmV0dXJuIHRoaXM7fQp0aGlzLnN0YXRlPXN0YXRlO2Z1bmN0aW9uIHN0YXRlKG5hbWUsZGVmaW5pdGlvbil7aWYoaXNPYmplY3QobmFtZSkpZGVmaW5pdGlvbj1uYW1lO2Vsc2UgZGVmaW5pdGlvbi5uYW1lPW5hbWU7cmVnaXN0ZXJTdGF0ZShkZWZpbml0aW9uKTtyZXR1cm4gdGhpczt9CnRoaXMuJGdldD0kZ2V0OyRnZXQuJGluamVjdD1bJyRyb290U2NvcGUnLCckcScsJyR2aWV3JywnJGluamVjdG9yJywnJHJlc29sdmUnLCckc3RhdGVQYXJhbXMnLCckbG9jYXRpb24nLCckdXJsUm91dGVyJywnJGJyb3dzZXInXTtmdW5jdGlvbiAkZ2V0KCRyb290U2NvcGUsJHEsJHZpZXcsJGluamVjdG9yLCRyZXNvbHZlLCRzdGF0ZVBhcmFtcywkbG9jYXRpb24sJHVybFJvdXRlciwkYnJvd3Nlcil7dmFyIFRyYW5zaXRpb25TdXBlcnNlZGVkPSRxLnJlamVjdChuZXcgRXJyb3IoJ3RyYW5zaXRpb24gc3VwZXJzZWRlZCcpKTt2YXIgVHJhbnNpdGlvblByZXZlbnRlZD0kcS5yZWplY3QobmV3IEVycm9yKCd0cmFuc2l0aW9uIHByZXZlbnRlZCcpKTt2YXIgVHJhbnNpdGlvbkFib3J0ZWQ9JHEucmVqZWN0KG5ldyBFcnJvcigndHJhbnNpdGlvbiBhYm9ydGVkJykpO3ZhciBUcmFuc2l0aW9uRmFpbGVkPSRxLnJlamVjdChuZXcgRXJyb3IoJ3RyYW5zaXRpb24gZmFpbGVkJykpO3ZhciBjdXJyZW50TG9jYXRpb249JGxvY2F0aW9uLnVybCgpO3ZhciBiYXNlSHJlZj0kYnJvd3Nlci5iYXNlSHJlZigpO2Z1bmN0aW9uIHN5bmNVcmwoKXtpZigkbG9jYXRpb24udXJsKCkhPT1jdXJyZW50TG9jYXRpb24peyRsb2NhdGlvbi51cmwoY3VycmVudExvY2F0aW9uKTskbG9jYXRpb24ucmVwbGFjZSgpO319CnJvb3QubG9jYWxzPXtyZXNvbHZlOm51bGwsZ2xvYmFsczp7JHN0YXRlUGFyYW1zOnt9fX07JHN0YXRlPXtwYXJhbXM6e30sY3VycmVudDpyb290LnNlbGYsJGN1cnJlbnQ6cm9vdCx0cmFuc2l0aW9uOm51bGx9OyRzdGF0ZS5yZWxvYWQ9ZnVuY3Rpb24gcmVsb2FkKCl7JHN0YXRlLnRyYW5zaXRpb25Ubygkc3RhdGUuY3VycmVudCwkc3RhdGVQYXJhbXMse3JlbG9hZDp0cnVlLGluaGVyaXQ6ZmFsc2Usbm90aWZ5OmZhbHNlfSk7fTskc3RhdGUuZ289ZnVuY3Rpb24gZ28odG8scGFyYW1zLG9wdGlvbnMpe3JldHVybiB0aGlzLnRyYW5zaXRpb25Ubyh0byxwYXJhbXMsZXh0ZW5kKHtpbmhlcml0OnRydWUscmVsYXRpdmU6JHN0YXRlLiRjdXJyZW50fSxvcHRpb25zKSk7fTskc3RhdGUudHJhbnNpdGlvblRvPWZ1bmN0aW9uIHRyYW5zaXRpb25Ubyh0byx0b1BhcmFtcyxvcHRpb25zKXt0b1BhcmFtcz10b1BhcmFtc3x8e307b3B0aW9ucz1leHRlbmQoe2xvY2F0aW9uOnRydWUsaW5oZXJpdDpmYWxzZSxyZWxhdGl2ZTpudWxsLG5vdGlmeTp0cnVlLHJlbG9hZDpmYWxzZSwkcmV0cnk6ZmFsc2V9LG9wdGlvbnN8fHt9KTt2YXIgZnJvbT0kc3RhdGUuJGN1cnJlbnQsZnJvbVBhcmFtcz0kc3RhdGUucGFyYW1zLGZyb21QYXRoPWZyb20ucGF0aDt2YXIgZXZ0LHRvU3RhdGU9ZmluZFN0YXRlKHRvLG9wdGlvbnMucmVsYXRpdmUpO2lmKCFpc0RlZmluZWQodG9TdGF0ZSkpe3ZhciByZWRpcmVjdD17dG86dG8sdG9QYXJhbXM6dG9QYXJhbXMsb3B0aW9uczpvcHRpb25zfTtldnQ9JHJvb3RTY29wZS4kYnJvYWRjYXN0KCckc3RhdGVOb3RGb3VuZCcscmVkaXJlY3QsZnJvbS5zZWxmLGZyb21QYXJhbXMpO2lmKGV2dC5kZWZhdWx0UHJldmVudGVkKXtzeW5jVXJsKCk7cmV0dXJuIFRyYW5zaXRpb25BYm9ydGVkO30KaWYoZXZ0LnJldHJ5KXtpZihvcHRpb25zLiRyZXRyeSl7c3luY1VybCgpO3JldHVybiBUcmFuc2l0aW9uRmFpbGVkO30KdmFyIHJldHJ5VHJhbnNpdGlvbj0kc3RhdGUudHJhbnNpdGlvbj0kcS53aGVuKGV2dC5yZXRyeSk7cmV0cnlUcmFuc2l0aW9uLnRoZW4oZnVuY3Rpb24oKXtpZihyZXRyeVRyYW5zaXRpb24hPT0kc3RhdGUudHJhbnNpdGlvbilyZXR1cm4gVHJhbnNpdGlvblN1cGVyc2VkZWQ7cmVkaXJlY3Qub3B0aW9ucy4kcmV0cnk9dHJ1ZTtyZXR1cm4gJHN0YXRlLnRyYW5zaXRpb25UbyhyZWRpcmVjdC50byxyZWRpcmVjdC50b1BhcmFtcyxyZWRpcmVjdC5vcHRpb25zKTt9LGZ1bmN0aW9uKCl7cmV0dXJuIFRyYW5zaXRpb25BYm9ydGVkO30pO3N5bmNVcmwoKTtyZXR1cm4gcmV0cnlUcmFuc2l0aW9uO30KdG89cmVkaXJlY3QudG87dG9QYXJhbXM9cmVkaXJlY3QudG9QYXJhbXM7b3B0aW9ucz1yZWRpcmVjdC5vcHRpb25zO3RvU3RhdGU9ZmluZFN0YXRlKHRvLG9wdGlvbnMucmVsYXRpdmUpO2lmKCFpc0RlZmluZWQodG9TdGF0ZSkpe2lmKG9wdGlvbnMucmVsYXRpdmUpdGhyb3cgbmV3IEVycm9yKCJDb3VsZCBub3QgcmVzb2x2ZSAnIit0bysiJyBmcm9tIHN0YXRlICciK29wdGlvbnMucmVsYXRpdmUrIiciKTt0aHJvdyBuZXcgRXJyb3IoIk5vIHN1Y2ggc3RhdGUgJyIrdG8rIiciKTt9fQppZih0b1N0YXRlW2Fic3RyYWN0S2V5XSl0aHJvdyBuZXcgRXJyb3IoIkNhbm5vdCB0cmFuc2l0aW9uIHRvIGFic3RyYWN0IHN0YXRlICciK3RvKyInIik7aWYob3B0aW9ucy5pbmhlcml0KXRvUGFyYW1zPWluaGVyaXRQYXJhbXMoJHN0YXRlUGFyYW1zLHRvUGFyYW1zfHx7fSwkc3RhdGUuJGN1cnJlbnQsdG9TdGF0ZSk7dG89dG9TdGF0ZTt2YXIgdG9QYXRoPXRvLnBhdGg7dmFyIGtlZXAsc3RhdGUsbG9jYWxzPXJvb3QubG9jYWxzLHRvTG9jYWxzPVtdO2ZvcihrZWVwPTAsc3RhdGU9dG9QYXRoW2tlZXBdO3N0YXRlJiZzdGF0ZT09PWZyb21QYXRoW2tlZXBdJiZlcXVhbEZvcktleXModG9QYXJhbXMsZnJvbVBhcmFtcyxzdGF0ZS5vd25QYXJhbXMpJiYhb3B0aW9ucy5yZWxvYWQ7a2VlcCsrLHN0YXRlPXRvUGF0aFtrZWVwXSl7bG9jYWxzPXRvTG9jYWxzW2tlZXBdPXN0YXRlLmxvY2Fsczt9CmlmKHNob3VsZFRyaWdnZXJSZWxvYWQodG8sZnJvbSxsb2NhbHMsb3B0aW9ucykpe2lmKHRvLnNlbGYucmVsb2FkT25TZWFyY2ghPT1mYWxzZSkKc3luY1VybCgpOyRzdGF0ZS50cmFuc2l0aW9uPW51bGw7cmV0dXJuICRxLndoZW4oJHN0YXRlLmN1cnJlbnQpO30KdG9QYXJhbXM9bm9ybWFsaXplKHRvLnBhcmFtcyx0b1BhcmFtc3x8e30pO2lmKG9wdGlvbnMubm90aWZ5KXtldnQ9JHJvb3RTY29wZS4kYnJvYWRjYXN0KCckc3RhdGVDaGFuZ2VTdGFydCcsdG8uc2VsZix0b1BhcmFtcyxmcm9tLnNlbGYsZnJvbVBhcmFtcyk7aWYoZXZ0LmRlZmF1bHRQcmV2ZW50ZWQpe3N5bmNVcmwoKTtyZXR1cm4gVHJhbnNpdGlvblByZXZlbnRlZDt9fQp2YXIgcmVzb2x2ZWQ9JHEud2hlbihsb2NhbHMpO2Zvcih2YXIgbD1rZWVwO2w8dG9QYXRoLmxlbmd0aDtsKyssc3RhdGU9dG9QYXRoW2xdKXtsb2NhbHM9dG9Mb2NhbHNbbF09aW5oZXJpdChsb2NhbHMpO3Jlc29sdmVkPXJlc29sdmVTdGF0ZShzdGF0ZSx0b1BhcmFtcyxzdGF0ZT09PXRvLHJlc29sdmVkLGxvY2Fscyk7fQp2YXIgdHJhbnNpdGlvbj0kc3RhdGUudHJhbnNpdGlvbj1yZXNvbHZlZC50aGVuKGZ1bmN0aW9uKCl7dmFyIGwsZW50ZXJpbmcsZXhpdGluZztpZigkc3RhdGUudHJhbnNpdGlvbiE9PXRyYW5zaXRpb24pcmV0dXJuIFRyYW5zaXRpb25TdXBlcnNlZGVkO2ZvcihsPWZyb21QYXRoLmxlbmd0aC0xO2w+PWtlZXA7bC0tKXtleGl0aW5nPWZyb21QYXRoW2xdO2lmKGV4aXRpbmcuc2VsZi5vbkV4aXQpeyRpbmplY3Rvci5pbnZva2UoZXhpdGluZy5zZWxmLm9uRXhpdCxleGl0aW5nLnNlbGYsZXhpdGluZy5sb2NhbHMuZ2xvYmFscyk7fQpleGl0aW5nLmxvY2Fscz1udWxsO30KZm9yKGw9a2VlcDtsPHRvUGF0aC5sZW5ndGg7bCsrKXtlbnRlcmluZz10b1BhdGhbbF07ZW50ZXJpbmcubG9jYWxzPXRvTG9jYWxzW2xdO2lmKGVudGVyaW5nLnNlbGYub25FbnRlcil7JGluamVjdG9yLmludm9rZShlbnRlcmluZy5zZWxmLm9uRW50ZXIsZW50ZXJpbmcuc2VsZixlbnRlcmluZy5sb2NhbHMuZ2xvYmFscyk7fX0KaWYoJHN0YXRlLnRyYW5zaXRpb24hPT10cmFuc2l0aW9uKXJldHVybiBUcmFuc2l0aW9uU3VwZXJzZWRlZDskc3RhdGUuJGN1cnJlbnQ9dG87JHN0YXRlLmN1cnJlbnQ9dG8uc2VsZjskc3RhdGUucGFyYW1zPXRvUGFyYW1zO2NvcHkoJHN0YXRlLnBhcmFtcywkc3RhdGVQYXJhbXMpOyRzdGF0ZS50cmFuc2l0aW9uPW51bGw7dmFyIHRvTmF2PXRvLm5hdmlnYWJsZTtpZihvcHRpb25zLmxvY2F0aW9uJiZ0b05hdil7JGxvY2F0aW9uLnVybCh0b05hdi51cmwuZm9ybWF0KHRvTmF2LmxvY2Fscy5nbG9iYWxzLiRzdGF0ZVBhcmFtcykpO2lmKG9wdGlvbnMubG9jYXRpb249PT0ncmVwbGFjZScpeyRsb2NhdGlvbi5yZXBsYWNlKCk7fX0KaWYob3B0aW9ucy5ub3RpZnkpeyRyb290U2NvcGUuJGJyb2FkY2FzdCgnJHN0YXRlQ2hhbmdlU3VjY2VzcycsdG8uc2VsZix0b1BhcmFtcyxmcm9tLnNlbGYsZnJvbVBhcmFtcyk7fQpjdXJyZW50TG9jYXRpb249JGxvY2F0aW9uLnVybCgpO3JldHVybiAkc3RhdGUuY3VycmVudDt9LGZ1bmN0aW9uKGVycm9yKXtpZigkc3RhdGUudHJhbnNpdGlvbiE9PXRyYW5zaXRpb24pcmV0dXJuIFRyYW5zaXRpb25TdXBlcnNlZGVkOyRzdGF0ZS50cmFuc2l0aW9uPW51bGw7JHJvb3RTY29wZS4kYnJvYWRjYXN0KCckc3RhdGVDaGFuZ2VFcnJvcicsdG8uc2VsZix0b1BhcmFtcyxmcm9tLnNlbGYsZnJvbVBhcmFtcyxlcnJvcik7c3luY1VybCgpO3JldHVybiAkcS5yZWplY3QoZXJyb3IpO30pO3JldHVybiB0cmFuc2l0aW9uO307JHN0YXRlLmlzPWZ1bmN0aW9uIGlzKHN0YXRlT3JOYW1lLHBhcmFtcyl7dmFyIHN0YXRlPWZpbmRTdGF0ZShzdGF0ZU9yTmFtZSk7aWYoIWlzRGVmaW5lZChzdGF0ZSkpe3JldHVybiB1bmRlZmluZWQ7fQppZigkc3RhdGUuJGN1cnJlbnQhPT1zdGF0ZSl7cmV0dXJuIGZhbHNlO30KcmV0dXJuIGlzRGVmaW5lZChwYXJhbXMpJiZwYXJhbXMhPT1udWxsP2FuZ3VsYXIuZXF1YWxzKCRzdGF0ZVBhcmFtcyxwYXJhbXMpOnRydWU7fTskc3RhdGUuaW5jbHVkZXM9ZnVuY3Rpb24gaW5jbHVkZXMoc3RhdGVPck5hbWUscGFyYW1zKXtpZihpc1N0cmluZyhzdGF0ZU9yTmFtZSkmJmlzR2xvYihzdGF0ZU9yTmFtZSkpe2lmKGRvZXNTdGF0ZU1hdGNoR2xvYihzdGF0ZU9yTmFtZSkpe3N0YXRlT3JOYW1lPSRzdGF0ZS4kY3VycmVudC5uYW1lO31lbHNle3JldHVybiBmYWxzZTt9fQp2YXIgc3RhdGU9ZmluZFN0YXRlKHN0YXRlT3JOYW1lKTtpZighaXNEZWZpbmVkKHN0YXRlKSl7cmV0dXJuIHVuZGVmaW5lZDt9CmlmKCFpc0RlZmluZWQoJHN0YXRlLiRjdXJyZW50LmluY2x1ZGVzW3N0YXRlLm5hbWVdKSl7cmV0dXJuIGZhbHNlO30KdmFyIHZhbGlkUGFyYW1zPXRydWU7YW5ndWxhci5mb3JFYWNoKHBhcmFtcyxmdW5jdGlvbih2YWx1ZSxrZXkpe2lmKCFpc0RlZmluZWQoJHN0YXRlUGFyYW1zW2tleV0pfHwkc3RhdGVQYXJhbXNba2V5XSE9PXZhbHVlKXt2YWxpZFBhcmFtcz1mYWxzZTt9fSk7cmV0dXJuIHZhbGlkUGFyYW1zO307JHN0YXRlLmhyZWY9ZnVuY3Rpb24gaHJlZihzdGF0ZU9yTmFtZSxwYXJhbXMsb3B0aW9ucyl7b3B0aW9ucz1leHRlbmQoe2xvc3N5OnRydWUsaW5oZXJpdDpmYWxzZSxhYnNvbHV0ZTpmYWxzZSxyZWxhdGl2ZTokc3RhdGUuJGN1cnJlbnR9LG9wdGlvbnN8fHt9KTt2YXIgc3RhdGU9ZmluZFN0YXRlKHN0YXRlT3JOYW1lLG9wdGlvbnMucmVsYXRpdmUpO2lmKCFpc0RlZmluZWQoc3RhdGUpKXJldHVybiBudWxsO3BhcmFtcz1pbmhlcml0UGFyYW1zKCRzdGF0ZVBhcmFtcyxwYXJhbXN8fHt9LCRzdGF0ZS4kY3VycmVudCxzdGF0ZSk7dmFyIG5hdj0oc3RhdGUmJm9wdGlvbnMubG9zc3kpP3N0YXRlLm5hdmlnYWJsZTpzdGF0ZTt2YXIgdXJsPShuYXYmJm5hdi51cmwpP25hdi51cmwuZm9ybWF0KG5vcm1hbGl6ZShzdGF0ZS5wYXJhbXMscGFyYW1zfHx7fSkpOm51bGw7aWYoISRsb2NhdGlvblByb3ZpZGVyLmh0bWw1TW9kZSgpJiZ1cmwpe3VybD0iIyIrJGxvY2F0aW9uUHJvdmlkZXIuaGFzaFByZWZpeCgpK3VybDt9CmlmKGJhc2VIcmVmIT09Jy8nKXtpZigkbG9jYXRpb25Qcm92aWRlci5odG1sNU1vZGUoKSl7dXJsPWJhc2VIcmVmLnNsaWNlKDAsLTEpK3VybDt9ZWxzZSBpZihvcHRpb25zLmFic29sdXRlKXt1cmw9YmFzZUhyZWYuc2xpY2UoMSkrdXJsO319CmlmKG9wdGlvbnMuYWJzb2x1dGUmJnVybCl7dXJsPSRsb2NhdGlvbi5wcm90b2NvbCgpKyc6Ly8nKwokbG9jYXRpb24uaG9zdCgpKwooJGxvY2F0aW9uLnBvcnQoKT09ODB8fCRsb2NhdGlvbi5wb3J0KCk9PTQ0Mz8nJzonOicrJGxvY2F0aW9uLnBvcnQoKSkrCighJGxvY2F0aW9uUHJvdmlkZXIuaHRtbDVNb2RlKCkmJnVybD8nLyc6JycpKwp1cmw7fQpyZXR1cm4gdXJsO307JHN0YXRlLmdldD1mdW5jdGlvbihzdGF0ZU9yTmFtZSxjb250ZXh0KXtpZighaXNEZWZpbmVkKHN0YXRlT3JOYW1lKSl7dmFyIGxpc3Q9W107Zm9yRWFjaChzdGF0ZXMsZnVuY3Rpb24oc3RhdGUpe2xpc3QucHVzaChzdGF0ZS5zZWxmKTt9KTtyZXR1cm4gbGlzdDt9CnZhciBzdGF0ZT1maW5kU3RhdGUoc3RhdGVPck5hbWUsY29udGV4dCk7cmV0dXJuKHN0YXRlJiZzdGF0ZS5zZWxmKT9zdGF0ZS5zZWxmOm51bGw7fTtmdW5jdGlvbiByZXNvbHZlU3RhdGUoc3RhdGUscGFyYW1zLHBhcmFtc0FyZUZpbHRlcmVkLGluaGVyaXRlZCxkc3Qpe3ZhciAkc3RhdGVQYXJhbXM9KHBhcmFtc0FyZUZpbHRlcmVkKT9wYXJhbXM6ZmlsdGVyQnlLZXlzKHN0YXRlLnBhcmFtcyxwYXJhbXMpO3ZhciBsb2NhbHM9eyRzdGF0ZVBhcmFtczokc3RhdGVQYXJhbXN9O2RzdC5yZXNvbHZlPSRyZXNvbHZlLnJlc29sdmUoc3RhdGUucmVzb2x2ZSxsb2NhbHMsZHN0LnJlc29sdmUsc3RhdGUpO3ZhciBwcm9taXNlcz1bZHN0LnJlc29sdmUudGhlbihmdW5jdGlvbihnbG9iYWxzKXtkc3QuZ2xvYmFscz1nbG9iYWxzO30pXTtpZihpbmhlcml0ZWQpcHJvbWlzZXMucHVzaChpbmhlcml0ZWQpO2ZvckVhY2goc3RhdGUudmlld3MsZnVuY3Rpb24odmlldyxuYW1lKXt2YXIgaW5qZWN0YWJsZXM9KHZpZXcucmVzb2x2ZSYmdmlldy5yZXNvbHZlIT09c3RhdGUucmVzb2x2ZT92aWV3LnJlc29sdmU6e30pO2luamVjdGFibGVzLiR0ZW1wbGF0ZT1bZnVuY3Rpb24oKXtyZXR1cm4gJHZpZXcubG9hZChuYW1lLHt2aWV3OnZpZXcsbG9jYWxzOmxvY2FscyxwYXJhbXM6JHN0YXRlUGFyYW1zLG5vdGlmeTpmYWxzZX0pfHwnJzt9XTtwcm9taXNlcy5wdXNoKCRyZXNvbHZlLnJlc29sdmUoaW5qZWN0YWJsZXMsbG9jYWxzLGRzdC5yZXNvbHZlLHN0YXRlKS50aGVuKGZ1bmN0aW9uKHJlc3VsdCl7aWYoaXNGdW5jdGlvbih2aWV3LmNvbnRyb2xsZXJQcm92aWRlcil8fGlzQXJyYXkodmlldy5jb250cm9sbGVyUHJvdmlkZXIpKXt2YXIgaW5qZWN0TG9jYWxzPWFuZ3VsYXIuZXh0ZW5kKHt9LGluamVjdGFibGVzLGxvY2Fscyk7cmVzdWx0LiQkY29udHJvbGxlcj0kaW5qZWN0b3IuaW52b2tlKHZpZXcuY29udHJvbGxlclByb3ZpZGVyLG51bGwsaW5qZWN0TG9jYWxzKTt9ZWxzZXtyZXN1bHQuJCRjb250cm9sbGVyPXZpZXcuY29udHJvbGxlcjt9CnJlc3VsdC4kJHN0YXRlPXN0YXRlO3Jlc3VsdC4kJGNvbnRyb2xsZXJBcz12aWV3LmNvbnRyb2xsZXJBcztkc3RbbmFtZV09cmVzdWx0O30pKTt9KTtyZXR1cm4gJHEuYWxsKHByb21pc2VzKS50aGVuKGZ1bmN0aW9uKHZhbHVlcyl7cmV0dXJuIGRzdDt9KTt9CnJldHVybiAkc3RhdGU7fQpmdW5jdGlvbiBzaG91bGRUcmlnZ2VyUmVsb2FkKHRvLGZyb20sbG9jYWxzLG9wdGlvbnMpe2lmKHRvPT09ZnJvbSYmKChsb2NhbHM9PT1mcm9tLmxvY2FscyYmIW9wdGlvbnMucmVsb2FkKXx8KHRvLnNlbGYucmVsb2FkT25TZWFyY2g9PT1mYWxzZSkpKXtyZXR1cm4gdHJ1ZTt9fX0KYW5ndWxhci5tb2R1bGUoJ3VpLnJvdXRlci5zdGF0ZScpLnZhbHVlKCckc3RhdGVQYXJhbXMnLHt9KS5wcm92aWRlcignJHN0YXRlJywkU3RhdGVQcm92aWRlcik7JFZpZXdQcm92aWRlci4kaW5qZWN0PVtdO2Z1bmN0aW9uICRWaWV3UHJvdmlkZXIoKXt0aGlzLiRnZXQ9JGdldDskZ2V0LiRpbmplY3Q9Wyckcm9vdFNjb3BlJywnJHRlbXBsYXRlRmFjdG9yeSddO2Z1bmN0aW9uICRnZXQoJHJvb3RTY29wZSwkdGVtcGxhdGVGYWN0b3J5KXtyZXR1cm57bG9hZDpmdW5jdGlvbiBsb2FkKG5hbWUsb3B0aW9ucyl7dmFyIHJlc3VsdCxkZWZhdWx0cz17dGVtcGxhdGU6bnVsbCxjb250cm9sbGVyOm51bGwsdmlldzpudWxsLGxvY2FsczpudWxsLG5vdGlmeTp0cnVlLGFzeW5jOnRydWUscGFyYW1zOnt9fTtvcHRpb25zPWV4dGVuZChkZWZhdWx0cyxvcHRpb25zKTtpZihvcHRpb25zLnZpZXcpe3Jlc3VsdD0kdGVtcGxhdGVGYWN0b3J5LmZyb21Db25maWcob3B0aW9ucy52aWV3LG9wdGlvbnMucGFyYW1zLG9wdGlvbnMubG9jYWxzKTt9CmlmKHJlc3VsdCYmb3B0aW9ucy5ub3RpZnkpeyRyb290U2NvcGUuJGJyb2FkY2FzdCgnJHZpZXdDb250ZW50TG9hZGluZycsb3B0aW9ucyk7fQpyZXR1cm4gcmVzdWx0O319O319CmFuZ3VsYXIubW9kdWxlKCd1aS5yb3V0ZXIuc3RhdGUnKS5wcm92aWRlcignJHZpZXcnLCRWaWV3UHJvdmlkZXIpO2Z1bmN0aW9uICRWaWV3U2Nyb2xsUHJvdmlkZXIoKXt2YXIgdXNlQW5jaG9yU2Nyb2xsPWZhbHNlO3RoaXMudXNlQW5jaG9yU2Nyb2xsPWZ1bmN0aW9uKCl7dXNlQW5jaG9yU2Nyb2xsPXRydWU7fTt0aGlzLiRnZXQ9WyckYW5jaG9yU2Nyb2xsJywnJHRpbWVvdXQnLGZ1bmN0aW9uKCRhbmNob3JTY3JvbGwsJHRpbWVvdXQpe2lmKHVzZUFuY2hvclNjcm9sbCl7cmV0dXJuICRhbmNob3JTY3JvbGw7fQpyZXR1cm4gZnVuY3Rpb24oJGVsZW1lbnQpeyR0aW1lb3V0KGZ1bmN0aW9uKCl7JGVsZW1lbnRbMF0uc2Nyb2xsSW50b1ZpZXcoKTt9LDAsZmFsc2UpO307fV07fQphbmd1bGFyLm1vZHVsZSgndWkucm91dGVyLnN0YXRlJykucHJvdmlkZXIoJyR1aVZpZXdTY3JvbGwnLCRWaWV3U2Nyb2xsUHJvdmlkZXIpOyRWaWV3RGlyZWN0aXZlLiRpbmplY3Q9Wyckc3RhdGUnLCckaW5qZWN0b3InLCckdWlWaWV3U2Nyb2xsJ107ZnVuY3Rpb24gJFZpZXdEaXJlY3RpdmUoJHN0YXRlLCRpbmplY3RvciwkdWlWaWV3U2Nyb2xsKXtmdW5jdGlvbiBnZXRTZXJ2aWNlKCl7cmV0dXJuKCRpbmplY3Rvci5oYXMpP2Z1bmN0aW9uKHNlcnZpY2Upe3JldHVybiAkaW5qZWN0b3IuaGFzKHNlcnZpY2UpPyRpbmplY3Rvci5nZXQoc2VydmljZSk6bnVsbDt9OmZ1bmN0aW9uKHNlcnZpY2Upe3RyeXtyZXR1cm4gJGluamVjdG9yLmdldChzZXJ2aWNlKTt9Y2F0Y2goZSl7cmV0dXJuIG51bGw7fX07fQp2YXIgc2VydmljZT1nZXRTZXJ2aWNlKCksJGFuaW1hdG9yPXNlcnZpY2UoJyRhbmltYXRvcicpLCRhbmltYXRlPXNlcnZpY2UoJyRhbmltYXRlJyk7ZnVuY3Rpb24gZ2V0UmVuZGVyZXIoYXR0cnMsc2NvcGUpe3ZhciBzdGF0aWNzPWZ1bmN0aW9uKCl7cmV0dXJue2VudGVyOmZ1bmN0aW9uKGVsZW1lbnQsdGFyZ2V0LGNiKXt0YXJnZXQuYWZ0ZXIoZWxlbWVudCk7Y2IoKTt9LGxlYXZlOmZ1bmN0aW9uKGVsZW1lbnQsY2Ipe2VsZW1lbnQucmVtb3ZlKCk7Y2IoKTt9fTt9O2lmKCRhbmltYXRlKXtyZXR1cm57ZW50ZXI6ZnVuY3Rpb24oZWxlbWVudCx0YXJnZXQsY2IpeyRhbmltYXRlLmVudGVyKGVsZW1lbnQsbnVsbCx0YXJnZXQsY2IpO30sbGVhdmU6ZnVuY3Rpb24oZWxlbWVudCxjYil7JGFuaW1hdGUubGVhdmUoZWxlbWVudCxjYik7fX07fQppZigkYW5pbWF0b3Ipe3ZhciBhbmltYXRlPSRhbmltYXRvciYmJGFuaW1hdG9yKHNjb3BlLGF0dHJzKTtyZXR1cm57ZW50ZXI6ZnVuY3Rpb24oZWxlbWVudCx0YXJnZXQsY2Ipe2FuaW1hdGUuZW50ZXIoZWxlbWVudCxudWxsLHRhcmdldCk7Y2IoKTt9LGxlYXZlOmZ1bmN0aW9uKGVsZW1lbnQsY2Ipe2FuaW1hdGUubGVhdmUoZWxlbWVudCk7Y2IoKTt9fTt9CnJldHVybiBzdGF0aWNzKCk7fQp2YXIgZGlyZWN0aXZlPXtyZXN0cmljdDonRUNBJyx0ZXJtaW5hbDp0cnVlLHByaW9yaXR5OjQwMCx0cmFuc2NsdWRlOidlbGVtZW50Jyxjb21waWxlOmZ1bmN0aW9uKHRFbGVtZW50LHRBdHRycywkdHJhbnNjbHVkZSl7cmV0dXJuIGZ1bmN0aW9uKHNjb3BlLCRlbGVtZW50LGF0dHJzKXt2YXIgcHJldmlvdXNFbCxjdXJyZW50RWwsY3VycmVudFNjb3BlLGxhdGVzdExvY2FscyxvbmxvYWRFeHA9YXR0cnMub25sb2FkfHwnJyxhdXRvU2Nyb2xsRXhwPWF0dHJzLmF1dG9zY3JvbGwscmVuZGVyZXI9Z2V0UmVuZGVyZXIoYXR0cnMsc2NvcGUpO3Njb3BlLiRvbignJHN0YXRlQ2hhbmdlU3VjY2VzcycsZnVuY3Rpb24oKXt1cGRhdGVWaWV3KGZhbHNlKTt9KTtzY29wZS4kb24oJyR2aWV3Q29udGVudExvYWRpbmcnLGZ1bmN0aW9uKCl7dXBkYXRlVmlldyhmYWxzZSk7fSk7dXBkYXRlVmlldyh0cnVlKTtmdW5jdGlvbiBjbGVhbnVwTGFzdFZpZXcoKXtpZihwcmV2aW91c0VsKXtwcmV2aW91c0VsLnJlbW92ZSgpO3ByZXZpb3VzRWw9bnVsbDt9CmlmKGN1cnJlbnRTY29wZSl7Y3VycmVudFNjb3BlLiRkZXN0cm95KCk7Y3VycmVudFNjb3BlPW51bGw7fQppZihjdXJyZW50RWwpe3JlbmRlcmVyLmxlYXZlKGN1cnJlbnRFbCxmdW5jdGlvbigpe3ByZXZpb3VzRWw9bnVsbDt9KTtwcmV2aW91c0VsPWN1cnJlbnRFbDtjdXJyZW50RWw9bnVsbDt9fQpmdW5jdGlvbiB1cGRhdGVWaWV3KGZpcnN0VGltZSl7dmFyIG5ld1Njb3BlPXNjb3BlLiRuZXcoKSxuYW1lPWN1cnJlbnRFbCYmY3VycmVudEVsLmRhdGEoJyR1aVZpZXdOYW1lJykscHJldmlvdXNMb2NhbHM9bmFtZSYmJHN0YXRlLiRjdXJyZW50JiYkc3RhdGUuJGN1cnJlbnQubG9jYWxzW25hbWVdO2lmKCFmaXJzdFRpbWUmJnByZXZpb3VzTG9jYWxzPT09bGF0ZXN0TG9jYWxzKXJldHVybjt2YXIgY2xvbmU9JHRyYW5zY2x1ZGUobmV3U2NvcGUsZnVuY3Rpb24oY2xvbmUpe3JlbmRlcmVyLmVudGVyKGNsb25lLCRlbGVtZW50LGZ1bmN0aW9uIG9uVWlWaWV3RW50ZXIoKXtpZihhbmd1bGFyLmlzRGVmaW5lZChhdXRvU2Nyb2xsRXhwKSYmIWF1dG9TY3JvbGxFeHB8fHNjb3BlLiRldmFsKGF1dG9TY3JvbGxFeHApKXskdWlWaWV3U2Nyb2xsKGNsb25lKTt9fSk7Y2xlYW51cExhc3RWaWV3KCk7fSk7bGF0ZXN0TG9jYWxzPSRzdGF0ZS4kY3VycmVudC5sb2NhbHNbY2xvbmUuZGF0YSgnJHVpVmlld05hbWUnKV07Y3VycmVudEVsPWNsb25lO2N1cnJlbnRTY29wZT1uZXdTY29wZTtjdXJyZW50U2NvcGUuJGVtaXQoJyR2aWV3Q29udGVudExvYWRlZCcpO2N1cnJlbnRTY29wZS4kZXZhbChvbmxvYWRFeHApO319O319O3JldHVybiBkaXJlY3RpdmU7fQokVmlld0RpcmVjdGl2ZUZpbGwuJGluamVjdD1bJyRjb21waWxlJywnJGNvbnRyb2xsZXInLCckc3RhdGUnXTtmdW5jdGlvbiAkVmlld0RpcmVjdGl2ZUZpbGwoJGNvbXBpbGUsJGNvbnRyb2xsZXIsJHN0YXRlKXtyZXR1cm57cmVzdHJpY3Q6J0VDQScscHJpb3JpdHk6LTQwMCxjb21waWxlOmZ1bmN0aW9uKHRFbGVtZW50KXt2YXIgaW5pdGlhbD10RWxlbWVudC5odG1sKCk7cmV0dXJuIGZ1bmN0aW9uKHNjb3BlLCRlbGVtZW50LGF0dHJzKXt2YXIgbmFtZT1hdHRycy51aVZpZXd8fGF0dHJzLm5hbWV8fCcnLGluaGVyaXRlZD0kZWxlbWVudC5pbmhlcml0ZWREYXRhKCckdWlWaWV3Jyk7aWYobmFtZS5pbmRleE9mKCdAJyk8MCl7bmFtZT1uYW1lKydAJysoaW5oZXJpdGVkP2luaGVyaXRlZC5zdGF0ZS5uYW1lOicnKTt9CiRlbGVtZW50LmRhdGEoJyR1aVZpZXdOYW1lJyxuYW1lKTt2YXIgY3VycmVudD0kc3RhdGUuJGN1cnJlbnQsbG9jYWxzPWN1cnJlbnQmJmN1cnJlbnQubG9jYWxzW25hbWVdO2lmKCFsb2NhbHMpe3JldHVybjt9CiRlbGVtZW50LmRhdGEoJyR1aVZpZXcnLHtuYW1lOm5hbWUsc3RhdGU6bG9jYWxzLiQkc3RhdGV9KTskZWxlbWVudC5odG1sKGxvY2Fscy4kdGVtcGxhdGU/bG9jYWxzLiR0ZW1wbGF0ZTppbml0aWFsKTt2YXIgbGluaz0kY29tcGlsZSgkZWxlbWVudC5jb250ZW50cygpKTtpZihsb2NhbHMuJCRjb250cm9sbGVyKXtsb2NhbHMuJHNjb3BlPXNjb3BlO3ZhciBjb250cm9sbGVyPSRjb250cm9sbGVyKGxvY2Fscy4kJGNvbnRyb2xsZXIsbG9jYWxzKTtpZihsb2NhbHMuJCRjb250cm9sbGVyQXMpe3Njb3BlW2xvY2Fscy4kJGNvbnRyb2xsZXJBc109Y29udHJvbGxlcjt9CiRlbGVtZW50LmRhdGEoJyRuZ0NvbnRyb2xsZXJDb250cm9sbGVyJyxjb250cm9sbGVyKTskZWxlbWVudC5jaGlsZHJlbigpLmRhdGEoJyRuZ0NvbnRyb2xsZXJDb250cm9sbGVyJyxjb250cm9sbGVyKTt9Cmxpbmsoc2NvcGUpO307fX07fQphbmd1bGFyLm1vZHVsZSgndWkucm91dGVyLnN0YXRlJykuZGlyZWN0aXZlKCd1aVZpZXcnLCRWaWV3RGlyZWN0aXZlKTthbmd1bGFyLm1vZHVsZSgndWkucm91dGVyLnN0YXRlJykuZGlyZWN0aXZlKCd1aVZpZXcnLCRWaWV3RGlyZWN0aXZlRmlsbCk7ZnVuY3Rpb24gcGFyc2VTdGF0ZVJlZihyZWYpe3ZhciBwYXJzZWQ9cmVmLnJlcGxhY2UoL1xuL2csIiAiKS5tYXRjaCgvXihbXihdKz8pXHMqKFwoKC4qKVwpKT8kLyk7aWYoIXBhcnNlZHx8cGFyc2VkLmxlbmd0aCE9PTQpdGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkIHN0YXRlIHJlZiAnIityZWYrIiciKTtyZXR1cm57c3RhdGU6cGFyc2VkWzFdLHBhcmFtRXhwcjpwYXJzZWRbM118fG51bGx9O30KZnVuY3Rpb24gc3RhdGVDb250ZXh0KGVsKXt2YXIgc3RhdGVEYXRhPWVsLnBhcmVudCgpLmluaGVyaXRlZERhdGEoJyR1aVZpZXcnKTtpZihzdGF0ZURhdGEmJnN0YXRlRGF0YS5zdGF0ZSYmc3RhdGVEYXRhLnN0YXRlLm5hbWUpe3JldHVybiBzdGF0ZURhdGEuc3RhdGU7fX0KJFN0YXRlUmVmRGlyZWN0aXZlLiRpbmplY3Q9Wyckc3RhdGUnLCckdGltZW91dCddO2Z1bmN0aW9uICRTdGF0ZVJlZkRpcmVjdGl2ZSgkc3RhdGUsJHRpbWVvdXQpe3ZhciBhbGxvd2VkT3B0aW9ucz1bJ2xvY2F0aW9uJywnaW5oZXJpdCcsJ3JlbG9hZCddO3JldHVybntyZXN0cmljdDonQScscmVxdWlyZTonP151aVNyZWZBY3RpdmUnLGxpbms6ZnVuY3Rpb24oc2NvcGUsZWxlbWVudCxhdHRycyx1aVNyZWZBY3RpdmUpe3ZhciByZWY9cGFyc2VTdGF0ZVJlZihhdHRycy51aVNyZWYpO3ZhciBwYXJhbXM9bnVsbCx1cmw9bnVsbCxiYXNlPXN0YXRlQ29udGV4dChlbGVtZW50KXx8JHN0YXRlLiRjdXJyZW50O3ZhciBpc0Zvcm09ZWxlbWVudFswXS5ub2RlTmFtZT09PSJGT1JNIjt2YXIgYXR0cj1pc0Zvcm0/ImFjdGlvbiI6ImhyZWYiLG5hdj10cnVlO3ZhciBvcHRpb25zPXtyZWxhdGl2ZTpiYXNlfTt2YXIgb3B0aW9uc092ZXJyaWRlPXNjb3BlLiRldmFsKGF0dHJzLnVpU3JlZk9wdHMpfHx7fTthbmd1bGFyLmZvckVhY2goYWxsb3dlZE9wdGlvbnMsZnVuY3Rpb24ob3B0aW9uKXtpZihvcHRpb24gaW4gb3B0aW9uc092ZXJyaWRlKXtvcHRpb25zW29wdGlvbl09b3B0aW9uc092ZXJyaWRlW29wdGlvbl07fX0pO3ZhciB1cGRhdGU9ZnVuY3Rpb24obmV3VmFsKXtpZihuZXdWYWwpcGFyYW1zPW5ld1ZhbDtpZighbmF2KXJldHVybjt2YXIgbmV3SHJlZj0kc3RhdGUuaHJlZihyZWYuc3RhdGUscGFyYW1zLG9wdGlvbnMpO2lmKHVpU3JlZkFjdGl2ZSl7dWlTcmVmQWN0aXZlLiQkc2V0U3RhdGVJbmZvKHJlZi5zdGF0ZSxwYXJhbXMpO30KaWYoIW5ld0hyZWYpe25hdj1mYWxzZTtyZXR1cm4gZmFsc2U7fQplbGVtZW50WzBdW2F0dHJdPW5ld0hyZWY7fTtpZihyZWYucGFyYW1FeHByKXtzY29wZS4kd2F0Y2gocmVmLnBhcmFtRXhwcixmdW5jdGlvbihuZXdWYWwsb2xkVmFsKXtpZihuZXdWYWwhPT1wYXJhbXMpdXBkYXRlKG5ld1ZhbCk7fSx0cnVlKTtwYXJhbXM9c2NvcGUuJGV2YWwocmVmLnBhcmFtRXhwcik7fQp1cGRhdGUoKTtpZihpc0Zvcm0pcmV0dXJuO2VsZW1lbnQuYmluZCgiY2xpY2siLGZ1bmN0aW9uKGUpe3ZhciBidXR0b249ZS53aGljaHx8ZS5idXR0b247aWYoIShidXR0b24+MXx8ZS5jdHJsS2V5fHxlLm1ldGFLZXl8fGUuc2hpZnRLZXl8fGVsZW1lbnQuYXR0cigndGFyZ2V0JykpKXskdGltZW91dChmdW5jdGlvbigpeyRzdGF0ZS5nbyhyZWYuc3RhdGUscGFyYW1zLG9wdGlvbnMpO30pO2UucHJldmVudERlZmF1bHQoKTt9fSk7fX07fQokU3RhdGVBY3RpdmVEaXJlY3RpdmUuJGluamVjdD1bJyRzdGF0ZScsJyRzdGF0ZVBhcmFtcycsJyRpbnRlcnBvbGF0ZSddO2Z1bmN0aW9uICRTdGF0ZUFjdGl2ZURpcmVjdGl2ZSgkc3RhdGUsJHN0YXRlUGFyYW1zLCRpbnRlcnBvbGF0ZSl7cmV0dXJue3Jlc3RyaWN0OiJBIixjb250cm9sbGVyOlsnJHNjb3BlJywnJGVsZW1lbnQnLCckYXR0cnMnLGZ1bmN0aW9uKCRzY29wZSwkZWxlbWVudCwkYXR0cnMpe3ZhciBzdGF0ZSxwYXJhbXMsYWN0aXZlQ2xhc3M7YWN0aXZlQ2xhc3M9JGludGVycG9sYXRlKCRhdHRycy51aVNyZWZBY3RpdmV8fCcnLGZhbHNlKSgkc2NvcGUpO3RoaXMuJCRzZXRTdGF0ZUluZm89ZnVuY3Rpb24obmV3U3RhdGUsbmV3UGFyYW1zKXtzdGF0ZT0kc3RhdGUuZ2V0KG5ld1N0YXRlLHN0YXRlQ29udGV4dCgkZWxlbWVudCkpO3BhcmFtcz1uZXdQYXJhbXM7dXBkYXRlKCk7fTskc2NvcGUuJG9uKCckc3RhdGVDaGFuZ2VTdWNjZXNzJyx1cGRhdGUpO2Z1bmN0aW9uIHVwZGF0ZSgpe2lmKCRzdGF0ZS4kY3VycmVudC5zZWxmPT09c3RhdGUmJm1hdGNoZXNQYXJhbXMoKSl7JGVsZW1lbnQuYWRkQ2xhc3MoYWN0aXZlQ2xhc3MpO31lbHNleyRlbGVtZW50LnJlbW92ZUNsYXNzKGFjdGl2ZUNsYXNzKTt9fQpmdW5jdGlvbiBtYXRjaGVzUGFyYW1zKCl7cmV0dXJuIXBhcmFtc3x8ZXF1YWxGb3JLZXlzKHBhcmFtcywkc3RhdGVQYXJhbXMpO319XX07fQphbmd1bGFyLm1vZHVsZSgndWkucm91dGVyLnN0YXRlJykuZGlyZWN0aXZlKCd1aVNyZWYnLCRTdGF0ZVJlZkRpcmVjdGl2ZSkuZGlyZWN0aXZlKCd1aVNyZWZBY3RpdmUnLCRTdGF0ZUFjdGl2ZURpcmVjdGl2ZSk7JElzU3RhdGVGaWx0ZXIuJGluamVjdD1bJyRzdGF0ZSddO2Z1bmN0aW9uICRJc1N0YXRlRmlsdGVyKCRzdGF0ZSl7cmV0dXJuIGZ1bmN0aW9uKHN0YXRlKXtyZXR1cm4gJHN0YXRlLmlzKHN0YXRlKTt9O30KJEluY2x1ZGVkQnlTdGF0ZUZpbHRlci4kaW5qZWN0PVsnJHN0YXRlJ107ZnVuY3Rpb24gJEluY2x1ZGVkQnlTdGF0ZUZpbHRlcigkc3RhdGUpe3JldHVybiBmdW5jdGlvbihzdGF0ZSl7cmV0dXJuICRzdGF0ZS5pbmNsdWRlcyhzdGF0ZSk7fTt9CmFuZ3VsYXIubW9kdWxlKCd1aS5yb3V0ZXIuc3RhdGUnKS5maWx0ZXIoJ2lzU3RhdGUnLCRJc1N0YXRlRmlsdGVyKS5maWx0ZXIoJ2luY2x1ZGVkQnlTdGF0ZScsJEluY2x1ZGVkQnlTdGF0ZUZpbHRlcik7JFJvdXRlUHJvdmlkZXIuJGluamVjdD1bJyRzdGF0ZVByb3ZpZGVyJywnJHVybFJvdXRlclByb3ZpZGVyJ107ZnVuY3Rpb24gJFJvdXRlUHJvdmlkZXIoJHN0YXRlUHJvdmlkZXIsJHVybFJvdXRlclByb3ZpZGVyKXt2YXIgcm91dGVzPVtdO29uRW50ZXJSb3V0ZS4kaW5qZWN0PVsnJCRzdGF0ZSddO2Z1bmN0aW9uIG9uRW50ZXJSb3V0ZSgkJHN0YXRlKXt0aGlzLmxvY2Fscz0kJHN0YXRlLmxvY2Fscy5nbG9iYWxzO3RoaXMucGFyYW1zPXRoaXMubG9jYWxzLiRzdGF0ZVBhcmFtczt9CmZ1bmN0aW9uIG9uRXhpdFJvdXRlKCl7dGhpcy5sb2NhbHM9bnVsbDt0aGlzLnBhcmFtcz1udWxsO30KdGhpcy53aGVuPXdoZW47ZnVuY3Rpb24gd2hlbih1cmwscm91dGUpe2lmKHJvdXRlLnJlZGlyZWN0VG8hPW51bGwpe3ZhciByZWRpcmVjdD1yb3V0ZS5yZWRpcmVjdFRvLGhhbmRsZXI7aWYoaXNTdHJpbmcocmVkaXJlY3QpKXtoYW5kbGVyPXJlZGlyZWN0O31lbHNlIGlmKGlzRnVuY3Rpb24ocmVkaXJlY3QpKXtoYW5kbGVyPWZ1bmN0aW9uKHBhcmFtcywkbG9jYXRpb24pe3JldHVybiByZWRpcmVjdChwYXJhbXMsJGxvY2F0aW9uLnBhdGgoKSwkbG9jYXRpb24uc2VhcmNoKCkpO307fWVsc2V7dGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkICdyZWRpcmVjdFRvJyBpbiB3aGVuKCkiKTt9CiR1cmxSb3V0ZXJQcm92aWRlci53aGVuKHVybCxoYW5kbGVyKTt9ZWxzZXskc3RhdGVQcm92aWRlci5zdGF0ZShpbmhlcml0KHJvdXRlLHtwYXJlbnQ6bnVsbCxuYW1lOidyb3V0ZTonK2VuY29kZVVSSUNvbXBvbmVudCh1cmwpLHVybDp1cmwsb25FbnRlcjpvbkVudGVyUm91dGUsb25FeGl0Om9uRXhpdFJvdXRlfSkpO30Kcm91dGVzLnB1c2gocm91dGUpO3JldHVybiB0aGlzO30KdGhpcy4kZ2V0PSRnZXQ7JGdldC4kaW5qZWN0PVsnJHN0YXRlJywnJHJvb3RTY29wZScsJyRyb3V0ZVBhcmFtcyddO2Z1bmN0aW9uICRnZXQoJHN0YXRlLCRyb290U2NvcGUsJHJvdXRlUGFyYW1zKXt2YXIgJHJvdXRlPXtyb3V0ZXM6cm91dGVzLHBhcmFtczokcm91dGVQYXJhbXMsY3VycmVudDp1bmRlZmluZWR9O2Z1bmN0aW9uIHN0YXRlQXNSb3V0ZShzdGF0ZSl7cmV0dXJuKHN0YXRlLm5hbWUhPT0nJyk/c3RhdGU6dW5kZWZpbmVkO30KJHJvb3RTY29wZS4kb24oJyRzdGF0ZUNoYW5nZVN0YXJ0JyxmdW5jdGlvbihldix0byx0b1BhcmFtcyxmcm9tLGZyb21QYXJhbXMpeyRyb290U2NvcGUuJGJyb2FkY2FzdCgnJHJvdXRlQ2hhbmdlU3RhcnQnLHN0YXRlQXNSb3V0ZSh0byksc3RhdGVBc1JvdXRlKGZyb20pKTt9KTskcm9vdFNjb3BlLiRvbignJHN0YXRlQ2hhbmdlU3VjY2VzcycsZnVuY3Rpb24oZXYsdG8sdG9QYXJhbXMsZnJvbSxmcm9tUGFyYW1zKXskcm91dGUuY3VycmVudD1zdGF0ZUFzUm91dGUodG8pOyRyb290U2NvcGUuJGJyb2FkY2FzdCgnJHJvdXRlQ2hhbmdlU3VjY2Vzcycsc3RhdGVBc1JvdXRlKHRvKSxzdGF0ZUFzUm91dGUoZnJvbSkpO2NvcHkodG9QYXJhbXMsJHJvdXRlLnBhcmFtcyk7fSk7JHJvb3RTY29wZS4kb24oJyRzdGF0ZUNoYW5nZUVycm9yJyxmdW5jdGlvbihldix0byx0b1BhcmFtcyxmcm9tLGZyb21QYXJhbXMsZXJyb3IpeyRyb290U2NvcGUuJGJyb2FkY2FzdCgnJHJvdXRlQ2hhbmdlRXJyb3InLHN0YXRlQXNSb3V0ZSh0byksc3RhdGVBc1JvdXRlKGZyb20pLGVycm9yKTt9KTtyZXR1cm4gJHJvdXRlO319CmFuZ3VsYXIubW9kdWxlKCd1aS5yb3V0ZXIuY29tcGF0JykucHJvdmlkZXIoJyRyb3V0ZScsJFJvdXRlUHJvdmlkZXIpLmRpcmVjdGl2ZSgnbmdWaWV3JywkVmlld0RpcmVjdGl2ZSk7fSkod2luZG93LHdpbmRvdy5hbmd1bGFyKTt9KS5jYWxsKHRoaXMscmVxdWlyZSgib01mcEFuIiksdHlwZW9mIHNlbGYhPT0idW5kZWZpbmVkIj9zZWxmOnR5cGVvZiB3aW5kb3chPT0idW5kZWZpbmVkIj93aW5kb3c6e30scmVxdWlyZSgiYnVmZmVyIikuQnVmZmVyLGFyZ3VtZW50c1szXSxhcmd1bWVudHNbNF0sYXJndW1lbnRzWzVdLGFyZ3VtZW50c1s2XSwiLy4uLy4uL25vZGVfbW9kdWxlcy9hbmd1bGFyLXVpLXJvdXRlci9yZWxlYXNlL2FuZ3VsYXItdWktcm91dGVyLmpzIiwiLy4uLy4uL25vZGVfbW9kdWxlcy9hbmd1bGFyLXVpLXJvdXRlci9yZWxlYXNlIil9LHsiYnVmZmVyIjo0LCJvTWZwQW4iOjd9XSwyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsoZnVuY3Rpb24ocHJvY2VzcyxnbG9iYWwsQnVmZmVyLF9fYXJndW1lbnQwLF9fYXJndW1lbnQxLF9fYXJndW1lbnQyLF9fYXJndW1lbnQzLF9fZmlsZW5hbWUsX19kaXJuYW1lKXtyZXF1aXJlKCcuL2xpYi9hbmd1bGFyLmpzJyk7bW9kdWxlLmV4cG9ydHM9YW5ndWxhcjt9KS5jYWxsKHRoaXMscmVxdWlyZSgib01mcEFuIiksdHlwZW9mIHNlbGYhPT0idW5kZWZpbmVkIj9zZWxmOnR5cGVvZiB3aW5kb3chPT0idW5kZWZpbmVkIj93aW5kb3c6e30scmVxdWlyZSgiYnVmZmVyIikuQnVmZmVyLGFyZ3VtZW50c1szXSxhcmd1bWVudHNbNF0sYXJndW1lbnRzWzVdLGFyZ3VtZW50c1s2XSwiLy4uLy4uL25vZGVfbW9kdWxlcy9hbmd1bGFyL2luZGV4LWJyb3dzZXJpZnkuanMiLCIvLi4vLi4vbm9kZV9tb2R1bGVzL2FuZ3VsYXIiKX0seyIuL2xpYi9hbmd1bGFyLmpzIjozLCJidWZmZXIiOjQsIm9NZnBBbiI6N31dLDM6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpeyhmdW5jdGlvbihwcm9jZXNzLGdsb2JhbCxCdWZmZXIsX19hcmd1bWVudDAsX19hcmd1bWVudDEsX19hcmd1bWVudDIsX19hcmd1bWVudDMsX19maWxlbmFtZSxfX2Rpcm5hbWUpeyhmdW5jdGlvbih3aW5kb3csZG9jdW1lbnQsdW5kZWZpbmVkKXsndXNlIHN0cmljdCc7ZnVuY3Rpb24gbWluRXJyKG1vZHVsZSl7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGNvZGU9YXJndW1lbnRzWzBdLHByZWZpeD0nWycrKG1vZHVsZT9tb2R1bGUrJzonOicnKStjb2RlKyddICcsdGVtcGxhdGU9YXJndW1lbnRzWzFdLHRlbXBsYXRlQXJncz1hcmd1bWVudHMsc3RyaW5naWZ5PWZ1bmN0aW9uKG9iail7aWYodHlwZW9mIG9iaj09PSdmdW5jdGlvbicpe3JldHVybiBvYmoudG9TdHJpbmcoKS5yZXBsYWNlKC8gXHtbXHNcU10qJC8sJycpO31lbHNlIGlmKHR5cGVvZiBvYmo9PT0ndW5kZWZpbmVkJyl7cmV0dXJuJ3VuZGVmaW5lZCc7fWVsc2UgaWYodHlwZW9mIG9iaiE9PSdzdHJpbmcnKXtyZXR1cm4gSlNPTi5zdHJpbmdpZnkob2JqKTt9CnJldHVybiBvYmo7fSxtZXNzYWdlLGk7bWVzc2FnZT1wcmVmaXgrdGVtcGxhdGUucmVwbGFjZSgvXHtcZCtcfS9nLGZ1bmN0aW9uKG1hdGNoKXt2YXIgaW5kZXg9K21hdGNoLnNsaWNlKDEsLTEpLGFyZztpZihpbmRleCsyPHRlbXBsYXRlQXJncy5sZW5ndGgpe2FyZz10ZW1wbGF0ZUFyZ3NbaW5kZXgrMl07aWYodHlwZW9mIGFyZz09PSdmdW5jdGlvbicpe3JldHVybiBhcmcudG9TdHJpbmcoKS5yZXBsYWNlKC8gP1x7W1xzXFNdKiQvLCcnKTt9ZWxzZSBpZih0eXBlb2YgYXJnPT09J3VuZGVmaW5lZCcpe3JldHVybid1bmRlZmluZWQnO31lbHNlIGlmKHR5cGVvZiBhcmchPT0nc3RyaW5nJyl7cmV0dXJuIHRvSnNvbihhcmcpO30KcmV0dXJuIGFyZzt9CnJldHVybiBtYXRjaDt9KTttZXNzYWdlPW1lc3NhZ2UrJ1xuaHR0cDovL2Vycm9ycy5hbmd1bGFyanMub3JnLzEuMi4xOS8nKwoobW9kdWxlP21vZHVsZSsnLyc6JycpK2NvZGU7Zm9yKGk9MjtpPGFyZ3VtZW50cy5sZW5ndGg7aSsrKXttZXNzYWdlPW1lc3NhZ2UrKGk9PTI/Jz8nOicmJykrJ3AnKyhpLTIpKyc9JysKZW5jb2RlVVJJQ29tcG9uZW50KHN0cmluZ2lmeShhcmd1bWVudHNbaV0pKTt9CnJldHVybiBuZXcgRXJyb3IobWVzc2FnZSk7fTt9CnZhciBWQUxJRElUWV9TVEFURV9QUk9QRVJUWT0ndmFsaWRpdHknO3ZhciBsb3dlcmNhc2U9ZnVuY3Rpb24oc3RyaW5nKXtyZXR1cm4gaXNTdHJpbmcoc3RyaW5nKT9zdHJpbmcudG9Mb3dlckNhc2UoKTpzdHJpbmc7fTt2YXIgaGFzT3duUHJvcGVydHk9T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTt2YXIgdXBwZXJjYXNlPWZ1bmN0aW9uKHN0cmluZyl7cmV0dXJuIGlzU3RyaW5nKHN0cmluZyk/c3RyaW5nLnRvVXBwZXJDYXNlKCk6c3RyaW5nO307dmFyIG1hbnVhbExvd2VyY2FzZT1mdW5jdGlvbihzKXtyZXR1cm4gaXNTdHJpbmcocyk/cy5yZXBsYWNlKC9bQS1aXS9nLGZ1bmN0aW9uKGNoKXtyZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZShjaC5jaGFyQ29kZUF0KDApfDMyKTt9KTpzO307dmFyIG1hbnVhbFVwcGVyY2FzZT1mdW5jdGlvbihzKXtyZXR1cm4gaXNTdHJpbmcocyk/cy5yZXBsYWNlKC9bYS16XS9nLGZ1bmN0aW9uKGNoKXtyZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZShjaC5jaGFyQ29kZUF0KDApJn4zMik7fSk6czt9O2lmKCdpJyE9PSdJJy50b0xvd2VyQ2FzZSgpKXtsb3dlcmNhc2U9bWFudWFsTG93ZXJjYXNlO3VwcGVyY2FzZT1tYW51YWxVcHBlcmNhc2U7fQp2YXIKbXNpZSxqcUxpdGUsalF1ZXJ5LHNsaWNlPVtdLnNsaWNlLHB1c2g9W10ucHVzaCx0b1N0cmluZz1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLG5nTWluRXJyPW1pbkVycignbmcnKSxhbmd1bGFyPXdpbmRvdy5hbmd1bGFyfHwod2luZG93LmFuZ3VsYXI9e30pLGFuZ3VsYXJNb2R1bGUsbm9kZU5hbWVfLHVpZD1bJzAnLCcwJywnMCddO21zaWU9aW50KCgvbXNpZSAoXGQrKS8uZXhlYyhsb3dlcmNhc2UobmF2aWdhdG9yLnVzZXJBZ2VudCkpfHxbXSlbMV0pO2lmKGlzTmFOKG1zaWUpKXttc2llPWludCgoL3RyaWRlbnRcLy4qOyBydjooXGQrKS8uZXhlYyhsb3dlcmNhc2UobmF2aWdhdG9yLnVzZXJBZ2VudCkpfHxbXSlbMV0pO30KZnVuY3Rpb24gaXNBcnJheUxpa2Uob2JqKXtpZihvYmo9PW51bGx8fGlzV2luZG93KG9iaikpe3JldHVybiBmYWxzZTt9CnZhciBsZW5ndGg9b2JqLmxlbmd0aDtpZihvYmoubm9kZVR5cGU9PT0xJiZsZW5ndGgpe3JldHVybiB0cnVlO30KcmV0dXJuIGlzU3RyaW5nKG9iail8fGlzQXJyYXkob2JqKXx8bGVuZ3RoPT09MHx8dHlwZW9mIGxlbmd0aD09PSdudW1iZXInJiZsZW5ndGg+MCYmKGxlbmd0aC0xKWluIG9iajt9CmZ1bmN0aW9uIGZvckVhY2gob2JqLGl0ZXJhdG9yLGNvbnRleHQpe3ZhciBrZXk7aWYob2JqKXtpZihpc0Z1bmN0aW9uKG9iaikpe2ZvcihrZXkgaW4gb2JqKXtpZihrZXkhPSdwcm90b3R5cGUnJiZrZXkhPSdsZW5ndGgnJiZrZXkhPSduYW1lJyYmKCFvYmouaGFzT3duUHJvcGVydHl8fG9iai5oYXNPd25Qcm9wZXJ0eShrZXkpKSl7aXRlcmF0b3IuY2FsbChjb250ZXh0LG9ialtrZXldLGtleSk7fX19ZWxzZSBpZihvYmouZm9yRWFjaCYmb2JqLmZvckVhY2ghPT1mb3JFYWNoKXtvYmouZm9yRWFjaChpdGVyYXRvcixjb250ZXh0KTt9ZWxzZSBpZihpc0FycmF5TGlrZShvYmopKXtmb3Ioa2V5PTA7a2V5PG9iai5sZW5ndGg7a2V5KyspCml0ZXJhdG9yLmNhbGwoY29udGV4dCxvYmpba2V5XSxrZXkpO31lbHNle2ZvcihrZXkgaW4gb2JqKXtpZihvYmouaGFzT3duUHJvcGVydHkoa2V5KSl7aXRlcmF0b3IuY2FsbChjb250ZXh0LG9ialtrZXldLGtleSk7fX19fQpyZXR1cm4gb2JqO30KZnVuY3Rpb24gc29ydGVkS2V5cyhvYmope3ZhciBrZXlzPVtdO2Zvcih2YXIga2V5IGluIG9iail7aWYob2JqLmhhc093blByb3BlcnR5KGtleSkpe2tleXMucHVzaChrZXkpO319CnJldHVybiBrZXlzLnNvcnQoKTt9CmZ1bmN0aW9uIGZvckVhY2hTb3J0ZWQob2JqLGl0ZXJhdG9yLGNvbnRleHQpe3ZhciBrZXlzPXNvcnRlZEtleXMob2JqKTtmb3IodmFyIGk9MDtpPGtleXMubGVuZ3RoO2krKyl7aXRlcmF0b3IuY2FsbChjb250ZXh0LG9ialtrZXlzW2ldXSxrZXlzW2ldKTt9CnJldHVybiBrZXlzO30KZnVuY3Rpb24gcmV2ZXJzZVBhcmFtcyhpdGVyYXRvckZuKXtyZXR1cm4gZnVuY3Rpb24odmFsdWUsa2V5KXtpdGVyYXRvckZuKGtleSx2YWx1ZSk7fTt9CmZ1bmN0aW9uIG5leHRVaWQoKXt2YXIgaW5kZXg9dWlkLmxlbmd0aDt2YXIgZGlnaXQ7d2hpbGUoaW5kZXgpe2luZGV4LS07ZGlnaXQ9dWlkW2luZGV4XS5jaGFyQ29kZUF0KDApO2lmKGRpZ2l0PT01Nyl7dWlkW2luZGV4XT0nQSc7cmV0dXJuIHVpZC5qb2luKCcnKTt9CmlmKGRpZ2l0PT05MCl7dWlkW2luZGV4XT0nMCc7fWVsc2V7dWlkW2luZGV4XT1TdHJpbmcuZnJvbUNoYXJDb2RlKGRpZ2l0KzEpO3JldHVybiB1aWQuam9pbignJyk7fX0KdWlkLnVuc2hpZnQoJzAnKTtyZXR1cm4gdWlkLmpvaW4oJycpO30KZnVuY3Rpb24gc2V0SGFzaEtleShvYmosaCl7aWYoaCl7b2JqLiQkaGFzaEtleT1oO30KZWxzZXtkZWxldGUgb2JqLiQkaGFzaEtleTt9fQpmdW5jdGlvbiBleHRlbmQoZHN0KXt2YXIgaD1kc3QuJCRoYXNoS2V5O2ZvckVhY2goYXJndW1lbnRzLGZ1bmN0aW9uKG9iail7aWYob2JqIT09ZHN0KXtmb3JFYWNoKG9iaixmdW5jdGlvbih2YWx1ZSxrZXkpe2RzdFtrZXldPXZhbHVlO30pO319KTtzZXRIYXNoS2V5KGRzdCxoKTtyZXR1cm4gZHN0O30KZnVuY3Rpb24gaW50KHN0cil7cmV0dXJuIHBhcnNlSW50KHN0ciwxMCk7fQpmdW5jdGlvbiBpbmhlcml0KHBhcmVudCxleHRyYSl7cmV0dXJuIGV4dGVuZChuZXcoZXh0ZW5kKGZ1bmN0aW9uKCl7fSx7cHJvdG90eXBlOnBhcmVudH0pKSgpLGV4dHJhKTt9CmZ1bmN0aW9uIG5vb3AoKXt9Cm5vb3AuJGluamVjdD1bXTtmdW5jdGlvbiBpZGVudGl0eSgkKXtyZXR1cm4gJDt9CmlkZW50aXR5LiRpbmplY3Q9W107ZnVuY3Rpb24gdmFsdWVGbih2YWx1ZSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHZhbHVlO307fQpmdW5jdGlvbiBpc1VuZGVmaW5lZCh2YWx1ZSl7cmV0dXJuIHR5cGVvZiB2YWx1ZT09PSd1bmRlZmluZWQnO30KZnVuY3Rpb24gaXNEZWZpbmVkKHZhbHVlKXtyZXR1cm4gdHlwZW9mIHZhbHVlIT09J3VuZGVmaW5lZCc7fQpmdW5jdGlvbiBpc09iamVjdCh2YWx1ZSl7cmV0dXJuIHZhbHVlIT1udWxsJiZ0eXBlb2YgdmFsdWU9PT0nb2JqZWN0Jzt9CmZ1bmN0aW9uIGlzU3RyaW5nKHZhbHVlKXtyZXR1cm4gdHlwZW9mIHZhbHVlPT09J3N0cmluZyc7fQpmdW5jdGlvbiBpc051bWJlcih2YWx1ZSl7cmV0dXJuIHR5cGVvZiB2YWx1ZT09PSdudW1iZXInO30KZnVuY3Rpb24gaXNEYXRlKHZhbHVlKXtyZXR1cm4gdG9TdHJpbmcuY2FsbCh2YWx1ZSk9PT0nW29iamVjdCBEYXRlXSc7fQp2YXIgaXNBcnJheT0oZnVuY3Rpb24oKXtpZighaXNGdW5jdGlvbihBcnJheS5pc0FycmF5KSl7cmV0dXJuIGZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4gdG9TdHJpbmcuY2FsbCh2YWx1ZSk9PT0nW29iamVjdCBBcnJheV0nO307fQpyZXR1cm4gQXJyYXkuaXNBcnJheTt9KSgpO2Z1bmN0aW9uIGlzRnVuY3Rpb24odmFsdWUpe3JldHVybiB0eXBlb2YgdmFsdWU9PT0nZnVuY3Rpb24nO30KZnVuY3Rpb24gaXNSZWdFeHAodmFsdWUpe3JldHVybiB0b1N0cmluZy5jYWxsKHZhbHVlKT09PSdbb2JqZWN0IFJlZ0V4cF0nO30KZnVuY3Rpb24gaXNXaW5kb3cob2JqKXtyZXR1cm4gb2JqJiZvYmouZG9jdW1lbnQmJm9iai5sb2NhdGlvbiYmb2JqLmFsZXJ0JiZvYmouc2V0SW50ZXJ2YWw7fQpmdW5jdGlvbiBpc1Njb3BlKG9iail7cmV0dXJuIG9iaiYmb2JqLiRldmFsQXN5bmMmJm9iai4kd2F0Y2g7fQpmdW5jdGlvbiBpc0ZpbGUob2JqKXtyZXR1cm4gdG9TdHJpbmcuY2FsbChvYmopPT09J1tvYmplY3QgRmlsZV0nO30KZnVuY3Rpb24gaXNCbG9iKG9iail7cmV0dXJuIHRvU3RyaW5nLmNhbGwob2JqKT09PSdbb2JqZWN0IEJsb2JdJzt9CmZ1bmN0aW9uIGlzQm9vbGVhbih2YWx1ZSl7cmV0dXJuIHR5cGVvZiB2YWx1ZT09PSdib29sZWFuJzt9CnZhciB0cmltPShmdW5jdGlvbigpe2lmKCFTdHJpbmcucHJvdG90eXBlLnRyaW0pe3JldHVybiBmdW5jdGlvbih2YWx1ZSl7cmV0dXJuIGlzU3RyaW5nKHZhbHVlKT92YWx1ZS5yZXBsYWNlKC9eXHNccyovLCcnKS5yZXBsYWNlKC9cc1xzKiQvLCcnKTp2YWx1ZTt9O30KcmV0dXJuIGZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4gaXNTdHJpbmcodmFsdWUpP3ZhbHVlLnRyaW0oKTp2YWx1ZTt9O30pKCk7ZnVuY3Rpb24gaXNFbGVtZW50KG5vZGUpe3JldHVybiEhKG5vZGUmJihub2RlLm5vZGVOYW1lfHwobm9kZS5wcm9wJiZub2RlLmF0dHImJm5vZGUuZmluZCkpKTt9CmZ1bmN0aW9uIG1ha2VNYXAoc3RyKXt2YXIgb2JqPXt9LGl0ZW1zPXN0ci5zcGxpdCgiLCIpLGk7Zm9yKGk9MDtpPGl0ZW1zLmxlbmd0aDtpKyspCm9ialtpdGVtc1tpXV09dHJ1ZTtyZXR1cm4gb2JqO30KaWYobXNpZTw5KXtub2RlTmFtZV89ZnVuY3Rpb24oZWxlbWVudCl7ZWxlbWVudD1lbGVtZW50Lm5vZGVOYW1lP2VsZW1lbnQ6ZWxlbWVudFswXTtyZXR1cm4oZWxlbWVudC5zY29wZU5hbWUmJmVsZW1lbnQuc2NvcGVOYW1lIT0nSFRNTCcpP3VwcGVyY2FzZShlbGVtZW50LnNjb3BlTmFtZSsnOicrZWxlbWVudC5ub2RlTmFtZSk6ZWxlbWVudC5ub2RlTmFtZTt9O31lbHNle25vZGVOYW1lXz1mdW5jdGlvbihlbGVtZW50KXtyZXR1cm4gZWxlbWVudC5ub2RlTmFtZT9lbGVtZW50Lm5vZGVOYW1lOmVsZW1lbnRbMF0ubm9kZU5hbWU7fTt9CmZ1bmN0aW9uIG1hcChvYmosaXRlcmF0b3IsY29udGV4dCl7dmFyIHJlc3VsdHM9W107Zm9yRWFjaChvYmosZnVuY3Rpb24odmFsdWUsaW5kZXgsbGlzdCl7cmVzdWx0cy5wdXNoKGl0ZXJhdG9yLmNhbGwoY29udGV4dCx2YWx1ZSxpbmRleCxsaXN0KSk7fSk7cmV0dXJuIHJlc3VsdHM7fQpmdW5jdGlvbiBzaXplKG9iaixvd25Qcm9wc09ubHkpe3ZhciBjb3VudD0wLGtleTtpZihpc0FycmF5KG9iail8fGlzU3RyaW5nKG9iaikpe3JldHVybiBvYmoubGVuZ3RoO31lbHNlIGlmKGlzT2JqZWN0KG9iaikpe2ZvcihrZXkgaW4gb2JqKQppZighb3duUHJvcHNPbmx5fHxvYmouaGFzT3duUHJvcGVydHkoa2V5KSkKY291bnQrKzt9CnJldHVybiBjb3VudDt9CmZ1bmN0aW9uIGluY2x1ZGVzKGFycmF5LG9iail7cmV0dXJuIGluZGV4T2YoYXJyYXksb2JqKSE9LTE7fQpmdW5jdGlvbiBpbmRleE9mKGFycmF5LG9iail7aWYoYXJyYXkuaW5kZXhPZilyZXR1cm4gYXJyYXkuaW5kZXhPZihvYmopO2Zvcih2YXIgaT0wO2k8YXJyYXkubGVuZ3RoO2krKyl7aWYob2JqPT09YXJyYXlbaV0pcmV0dXJuIGk7fQpyZXR1cm4tMTt9CmZ1bmN0aW9uIGFycmF5UmVtb3ZlKGFycmF5LHZhbHVlKXt2YXIgaW5kZXg9aW5kZXhPZihhcnJheSx2YWx1ZSk7aWYoaW5kZXg+PTApCmFycmF5LnNwbGljZShpbmRleCwxKTtyZXR1cm4gdmFsdWU7fQpmdW5jdGlvbiBpc0xlYWZOb2RlKG5vZGUpe2lmKG5vZGUpe3N3aXRjaChub2RlLm5vZGVOYW1lKXtjYXNlIk9QVElPTiI6Y2FzZSJQUkUiOmNhc2UiVElUTEUiOnJldHVybiB0cnVlO319CnJldHVybiBmYWxzZTt9CmZ1bmN0aW9uIGNvcHkoc291cmNlLGRlc3RpbmF0aW9uLHN0YWNrU291cmNlLHN0YWNrRGVzdCl7aWYoaXNXaW5kb3coc291cmNlKXx8aXNTY29wZShzb3VyY2UpKXt0aHJvdyBuZ01pbkVycignY3B3cycsIkNhbid0IGNvcHkhIE1ha2luZyBjb3BpZXMgb2YgV2luZG93IG9yIFNjb3BlIGluc3RhbmNlcyBpcyBub3Qgc3VwcG9ydGVkLiIpO30KaWYoIWRlc3RpbmF0aW9uKXtkZXN0aW5hdGlvbj1zb3VyY2U7aWYoc291cmNlKXtpZihpc0FycmF5KHNvdXJjZSkpe2Rlc3RpbmF0aW9uPWNvcHkoc291cmNlLFtdLHN0YWNrU291cmNlLHN0YWNrRGVzdCk7fWVsc2UgaWYoaXNEYXRlKHNvdXJjZSkpe2Rlc3RpbmF0aW9uPW5ldyBEYXRlKHNvdXJjZS5nZXRUaW1lKCkpO31lbHNlIGlmKGlzUmVnRXhwKHNvdXJjZSkpe2Rlc3RpbmF0aW9uPW5ldyBSZWdFeHAoc291cmNlLnNvdXJjZSk7fWVsc2UgaWYoaXNPYmplY3Qoc291cmNlKSl7ZGVzdGluYXRpb249Y29weShzb3VyY2Use30sc3RhY2tTb3VyY2Usc3RhY2tEZXN0KTt9fX1lbHNle2lmKHNvdXJjZT09PWRlc3RpbmF0aW9uKXRocm93IG5nTWluRXJyKCdjcGknLCJDYW4ndCBjb3B5ISBTb3VyY2UgYW5kIGRlc3RpbmF0aW9uIGFyZSBpZGVudGljYWwuIik7c3RhY2tTb3VyY2U9c3RhY2tTb3VyY2V8fFtdO3N0YWNrRGVzdD1zdGFja0Rlc3R8fFtdO2lmKGlzT2JqZWN0KHNvdXJjZSkpe3ZhciBpbmRleD1pbmRleE9mKHN0YWNrU291cmNlLHNvdXJjZSk7aWYoaW5kZXghPT0tMSlyZXR1cm4gc3RhY2tEZXN0W2luZGV4XTtzdGFja1NvdXJjZS5wdXNoKHNvdXJjZSk7c3RhY2tEZXN0LnB1c2goZGVzdGluYXRpb24pO30KdmFyIHJlc3VsdDtpZihpc0FycmF5KHNvdXJjZSkpe2Rlc3RpbmF0aW9uLmxlbmd0aD0wO2Zvcih2YXIgaT0wO2k8c291cmNlLmxlbmd0aDtpKyspe3Jlc3VsdD1jb3B5KHNvdXJjZVtpXSxudWxsLHN0YWNrU291cmNlLHN0YWNrRGVzdCk7aWYoaXNPYmplY3Qoc291cmNlW2ldKSl7c3RhY2tTb3VyY2UucHVzaChzb3VyY2VbaV0pO3N0YWNrRGVzdC5wdXNoKHJlc3VsdCk7fQpkZXN0aW5hdGlvbi5wdXNoKHJlc3VsdCk7fX1lbHNle3ZhciBoPWRlc3RpbmF0aW9uLiQkaGFzaEtleTtmb3JFYWNoKGRlc3RpbmF0aW9uLGZ1bmN0aW9uKHZhbHVlLGtleSl7ZGVsZXRlIGRlc3RpbmF0aW9uW2tleV07fSk7Zm9yKHZhciBrZXkgaW4gc291cmNlKXtyZXN1bHQ9Y29weShzb3VyY2Vba2V5XSxudWxsLHN0YWNrU291cmNlLHN0YWNrRGVzdCk7aWYoaXNPYmplY3Qoc291cmNlW2tleV0pKXtzdGFja1NvdXJjZS5wdXNoKHNvdXJjZVtrZXldKTtzdGFja0Rlc3QucHVzaChyZXN1bHQpO30KZGVzdGluYXRpb25ba2V5XT1yZXN1bHQ7fQpzZXRIYXNoS2V5KGRlc3RpbmF0aW9uLGgpO319CnJldHVybiBkZXN0aW5hdGlvbjt9CmZ1bmN0aW9uIHNoYWxsb3dDb3B5KHNyYyxkc3Qpe2lmKGlzQXJyYXkoc3JjKSl7ZHN0PWRzdHx8W107Zm9yKHZhciBpPTA7aTxzcmMubGVuZ3RoO2krKyl7ZHN0W2ldPXNyY1tpXTt9fWVsc2UgaWYoaXNPYmplY3Qoc3JjKSl7ZHN0PWRzdHx8e307Zm9yKHZhciBrZXkgaW4gc3JjKXtpZihoYXNPd25Qcm9wZXJ0eS5jYWxsKHNyYyxrZXkpJiYhKGtleS5jaGFyQXQoMCk9PT0nJCcmJmtleS5jaGFyQXQoMSk9PT0nJCcpKXtkc3Rba2V5XT1zcmNba2V5XTt9fX0KcmV0dXJuIGRzdHx8c3JjO30KZnVuY3Rpb24gZXF1YWxzKG8xLG8yKXtpZihvMT09PW8yKXJldHVybiB0cnVlO2lmKG8xPT09bnVsbHx8bzI9PT1udWxsKXJldHVybiBmYWxzZTtpZihvMSE9PW8xJiZvMiE9PW8yKXJldHVybiB0cnVlO3ZhciB0MT10eXBlb2YgbzEsdDI9dHlwZW9mIG8yLGxlbmd0aCxrZXksa2V5U2V0O2lmKHQxPT10Mil7aWYodDE9PSdvYmplY3QnKXtpZihpc0FycmF5KG8xKSl7aWYoIWlzQXJyYXkobzIpKXJldHVybiBmYWxzZTtpZigobGVuZ3RoPW8xLmxlbmd0aCk9PW8yLmxlbmd0aCl7Zm9yKGtleT0wO2tleTxsZW5ndGg7a2V5Kyspe2lmKCFlcXVhbHMobzFba2V5XSxvMltrZXldKSlyZXR1cm4gZmFsc2U7fQpyZXR1cm4gdHJ1ZTt9fWVsc2UgaWYoaXNEYXRlKG8xKSl7cmV0dXJuIGlzRGF0ZShvMikmJm8xLmdldFRpbWUoKT09bzIuZ2V0VGltZSgpO31lbHNlIGlmKGlzUmVnRXhwKG8xKSYmaXNSZWdFeHAobzIpKXtyZXR1cm4gbzEudG9TdHJpbmcoKT09bzIudG9TdHJpbmcoKTt9ZWxzZXtpZihpc1Njb3BlKG8xKXx8aXNTY29wZShvMil8fGlzV2luZG93KG8xKXx8aXNXaW5kb3cobzIpfHxpc0FycmF5KG8yKSlyZXR1cm4gZmFsc2U7a2V5U2V0PXt9O2ZvcihrZXkgaW4gbzEpe2lmKGtleS5jaGFyQXQoMCk9PT0nJCd8fGlzRnVuY3Rpb24obzFba2V5XSkpY29udGludWU7aWYoIWVxdWFscyhvMVtrZXldLG8yW2tleV0pKXJldHVybiBmYWxzZTtrZXlTZXRba2V5XT10cnVlO30KZm9yKGtleSBpbiBvMil7aWYoIWtleVNldC5oYXNPd25Qcm9wZXJ0eShrZXkpJiZrZXkuY2hhckF0KDApIT09JyQnJiZvMltrZXldIT09dW5kZWZpbmVkJiYhaXNGdW5jdGlvbihvMltrZXldKSlyZXR1cm4gZmFsc2U7fQpyZXR1cm4gdHJ1ZTt9fX0KcmV0dXJuIGZhbHNlO30KZnVuY3Rpb24gY3NwKCl7cmV0dXJuKGRvY3VtZW50LnNlY3VyaXR5UG9saWN5JiZkb2N1bWVudC5zZWN1cml0eVBvbGljeS5pc0FjdGl2ZSl8fChkb2N1bWVudC5xdWVyeVNlbGVjdG9yJiYhIShkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbbmctY3NwXScpfHxkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1uZy1jc3BdJykpKTt9CmZ1bmN0aW9uIGNvbmNhdChhcnJheTEsYXJyYXkyLGluZGV4KXtyZXR1cm4gYXJyYXkxLmNvbmNhdChzbGljZS5jYWxsKGFycmF5MixpbmRleCkpO30KZnVuY3Rpb24gc2xpY2VBcmdzKGFyZ3Msc3RhcnRJbmRleCl7cmV0dXJuIHNsaWNlLmNhbGwoYXJncyxzdGFydEluZGV4fHwwKTt9CmZ1bmN0aW9uIGJpbmQoc2VsZixmbil7dmFyIGN1cnJ5QXJncz1hcmd1bWVudHMubGVuZ3RoPjI/c2xpY2VBcmdzKGFyZ3VtZW50cywyKTpbXTtpZihpc0Z1bmN0aW9uKGZuKSYmIShmbiBpbnN0YW5jZW9mIFJlZ0V4cCkpe3JldHVybiBjdXJyeUFyZ3MubGVuZ3RoP2Z1bmN0aW9uKCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/Zm4uYXBwbHkoc2VsZixjdXJyeUFyZ3MuY29uY2F0KHNsaWNlLmNhbGwoYXJndW1lbnRzLDApKSk6Zm4uYXBwbHkoc2VsZixjdXJyeUFyZ3MpO306ZnVuY3Rpb24oKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD9mbi5hcHBseShzZWxmLGFyZ3VtZW50cyk6Zm4uY2FsbChzZWxmKTt9O31lbHNle3JldHVybiBmbjt9fQpmdW5jdGlvbiB0b0pzb25SZXBsYWNlcihrZXksdmFsdWUpe3ZhciB2YWw9dmFsdWU7aWYodHlwZW9mIGtleT09PSdzdHJpbmcnJiZrZXkuY2hhckF0KDApPT09JyQnKXt2YWw9dW5kZWZpbmVkO31lbHNlIGlmKGlzV2luZG93KHZhbHVlKSl7dmFsPSckV0lORE9XJzt9ZWxzZSBpZih2YWx1ZSYmZG9jdW1lbnQ9PT12YWx1ZSl7dmFsPSckRE9DVU1FTlQnO31lbHNlIGlmKGlzU2NvcGUodmFsdWUpKXt2YWw9JyRTQ09QRSc7fQpyZXR1cm4gdmFsO30KZnVuY3Rpb24gdG9Kc29uKG9iaixwcmV0dHkpe2lmKHR5cGVvZiBvYmo9PT0ndW5kZWZpbmVkJylyZXR1cm4gdW5kZWZpbmVkO3JldHVybiBKU09OLnN0cmluZ2lmeShvYmosdG9Kc29uUmVwbGFjZXIscHJldHR5PycgICc6bnVsbCk7fQpmdW5jdGlvbiBmcm9tSnNvbihqc29uKXtyZXR1cm4gaXNTdHJpbmcoanNvbik/SlNPTi5wYXJzZShqc29uKTpqc29uO30KZnVuY3Rpb24gdG9Cb29sZWFuKHZhbHVlKXtpZih0eXBlb2YgdmFsdWU9PT0nZnVuY3Rpb24nKXt2YWx1ZT10cnVlO31lbHNlIGlmKHZhbHVlJiZ2YWx1ZS5sZW5ndGghPT0wKXt2YXIgdj1sb3dlcmNhc2UoIiIrdmFsdWUpO3ZhbHVlPSEodj09J2YnfHx2PT0nMCd8fHY9PSdmYWxzZSd8fHY9PSdubyd8fHY9PSduJ3x8dj09J1tdJyk7fWVsc2V7dmFsdWU9ZmFsc2U7fQpyZXR1cm4gdmFsdWU7fQpmdW5jdGlvbiBzdGFydGluZ1RhZyhlbGVtZW50KXtlbGVtZW50PWpxTGl0ZShlbGVtZW50KS5jbG9uZSgpO3RyeXtlbGVtZW50LmVtcHR5KCk7fWNhdGNoKGUpe30KdmFyIFRFWFRfTk9ERT0zO3ZhciBlbGVtSHRtbD1qcUxpdGUoJzxkaXY+JykuYXBwZW5kKGVsZW1lbnQpLmh0bWwoKTt0cnl7cmV0dXJuIGVsZW1lbnRbMF0ubm9kZVR5cGU9PT1URVhUX05PREU/bG93ZXJjYXNlKGVsZW1IdG1sKTplbGVtSHRtbC5tYXRjaCgvXig8W14+XSs+KS8pWzFdLnJlcGxhY2UoL148KFtcd1wtXSspLyxmdW5jdGlvbihtYXRjaCxub2RlTmFtZSl7cmV0dXJuJzwnK2xvd2VyY2FzZShub2RlTmFtZSk7fSk7fWNhdGNoKGUpe3JldHVybiBsb3dlcmNhc2UoZWxlbUh0bWwpO319CmZ1bmN0aW9uIHRyeURlY29kZVVSSUNvbXBvbmVudCh2YWx1ZSl7dHJ5e3JldHVybiBkZWNvZGVVUklDb21wb25lbnQodmFsdWUpO31jYXRjaChlKXt9fQpmdW5jdGlvbiBwYXJzZUtleVZhbHVlKGtleVZhbHVlKXt2YXIgb2JqPXt9LGtleV92YWx1ZSxrZXk7Zm9yRWFjaCgoa2V5VmFsdWV8fCIiKS5zcGxpdCgnJicpLGZ1bmN0aW9uKGtleVZhbHVlKXtpZihrZXlWYWx1ZSl7a2V5X3ZhbHVlPWtleVZhbHVlLnNwbGl0KCc9Jyk7a2V5PXRyeURlY29kZVVSSUNvbXBvbmVudChrZXlfdmFsdWVbMF0pO2lmKGlzRGVmaW5lZChrZXkpKXt2YXIgdmFsPWlzRGVmaW5lZChrZXlfdmFsdWVbMV0pP3RyeURlY29kZVVSSUNvbXBvbmVudChrZXlfdmFsdWVbMV0pOnRydWU7aWYoIW9ialtrZXldKXtvYmpba2V5XT12YWw7fWVsc2UgaWYoaXNBcnJheShvYmpba2V5XSkpe29ialtrZXldLnB1c2godmFsKTt9ZWxzZXtvYmpba2V5XT1bb2JqW2tleV0sdmFsXTt9fX19KTtyZXR1cm4gb2JqO30KZnVuY3Rpb24gdG9LZXlWYWx1ZShvYmope3ZhciBwYXJ0cz1bXTtmb3JFYWNoKG9iaixmdW5jdGlvbih2YWx1ZSxrZXkpe2lmKGlzQXJyYXkodmFsdWUpKXtmb3JFYWNoKHZhbHVlLGZ1bmN0aW9uKGFycmF5VmFsdWUpe3BhcnRzLnB1c2goZW5jb2RlVXJpUXVlcnkoa2V5LHRydWUpKwooYXJyYXlWYWx1ZT09PXRydWU/Jyc6Jz0nK2VuY29kZVVyaVF1ZXJ5KGFycmF5VmFsdWUsdHJ1ZSkpKTt9KTt9ZWxzZXtwYXJ0cy5wdXNoKGVuY29kZVVyaVF1ZXJ5KGtleSx0cnVlKSsKKHZhbHVlPT09dHJ1ZT8nJzonPScrZW5jb2RlVXJpUXVlcnkodmFsdWUsdHJ1ZSkpKTt9fSk7cmV0dXJuIHBhcnRzLmxlbmd0aD9wYXJ0cy5qb2luKCcmJyk6Jyc7fQpmdW5jdGlvbiBlbmNvZGVVcmlTZWdtZW50KHZhbCl7cmV0dXJuIGVuY29kZVVyaVF1ZXJ5KHZhbCx0cnVlKS5yZXBsYWNlKC8lMjYvZ2ksJyYnKS5yZXBsYWNlKC8lM0QvZ2ksJz0nKS5yZXBsYWNlKC8lMkIvZ2ksJysnKTt9CmZ1bmN0aW9uIGVuY29kZVVyaVF1ZXJ5KHZhbCxwY3RFbmNvZGVTcGFjZXMpe3JldHVybiBlbmNvZGVVUklDb21wb25lbnQodmFsKS5yZXBsYWNlKC8lNDAvZ2ksJ0AnKS5yZXBsYWNlKC8lM0EvZ2ksJzonKS5yZXBsYWNlKC8lMjQvZywnJCcpLnJlcGxhY2UoLyUyQy9naSwnLCcpLnJlcGxhY2UoLyUyMC9nLChwY3RFbmNvZGVTcGFjZXM/JyUyMCc6JysnKSk7fQpmdW5jdGlvbiBhbmd1bGFySW5pdChlbGVtZW50LGJvb3RzdHJhcCl7dmFyIGVsZW1lbnRzPVtlbGVtZW50XSxhcHBFbGVtZW50LG1vZHVsZSxuYW1lcz1bJ25nOmFwcCcsJ25nLWFwcCcsJ3gtbmctYXBwJywnZGF0YS1uZy1hcHAnXSxOR19BUFBfQ0xBU1NfUkVHRVhQPS9cc25nWzpcLV1hcHAoOlxzKihbXHdcZF9dKyk7Pyk/XHMvO2Z1bmN0aW9uIGFwcGVuZChlbGVtZW50KXtlbGVtZW50JiZlbGVtZW50cy5wdXNoKGVsZW1lbnQpO30KZm9yRWFjaChuYW1lcyxmdW5jdGlvbihuYW1lKXtuYW1lc1tuYW1lXT10cnVlO2FwcGVuZChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChuYW1lKSk7bmFtZT1uYW1lLnJlcGxhY2UoJzonLCdcXDonKTtpZihlbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwpe2ZvckVhY2goZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuJytuYW1lKSxhcHBlbmQpO2ZvckVhY2goZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuJytuYW1lKydcXDonKSxhcHBlbmQpO2ZvckVhY2goZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbJytuYW1lKyddJyksYXBwZW5kKTt9fSk7Zm9yRWFjaChlbGVtZW50cyxmdW5jdGlvbihlbGVtZW50KXtpZighYXBwRWxlbWVudCl7dmFyIGNsYXNzTmFtZT0nICcrZWxlbWVudC5jbGFzc05hbWUrJyAnO3ZhciBtYXRjaD1OR19BUFBfQ0xBU1NfUkVHRVhQLmV4ZWMoY2xhc3NOYW1lKTtpZihtYXRjaCl7YXBwRWxlbWVudD1lbGVtZW50O21vZHVsZT0obWF0Y2hbMl18fCcnKS5yZXBsYWNlKC9ccysvZywnLCcpO31lbHNle2ZvckVhY2goZWxlbWVudC5hdHRyaWJ1dGVzLGZ1bmN0aW9uKGF0dHIpe2lmKCFhcHBFbGVtZW50JiZuYW1lc1thdHRyLm5hbWVdKXthcHBFbGVtZW50PWVsZW1lbnQ7bW9kdWxlPWF0dHIudmFsdWU7fX0pO319fSk7aWYoYXBwRWxlbWVudCl7Ym9vdHN0cmFwKGFwcEVsZW1lbnQsbW9kdWxlP1ttb2R1bGVdOltdKTt9fQpmdW5jdGlvbiBib290c3RyYXAoZWxlbWVudCxtb2R1bGVzKXt2YXIgZG9Cb290c3RyYXA9ZnVuY3Rpb24oKXtlbGVtZW50PWpxTGl0ZShlbGVtZW50KTtpZihlbGVtZW50LmluamVjdG9yKCkpe3ZhciB0YWc9KGVsZW1lbnRbMF09PT1kb2N1bWVudCk/J2RvY3VtZW50JzpzdGFydGluZ1RhZyhlbGVtZW50KTt0aHJvdyBuZ01pbkVycignYnRzdHJwZCcsIkFwcCBBbHJlYWR5IEJvb3RzdHJhcHBlZCB3aXRoIHRoaXMgRWxlbWVudCAnezB9JyIsdGFnKTt9Cm1vZHVsZXM9bW9kdWxlc3x8W107bW9kdWxlcy51bnNoaWZ0KFsnJHByb3ZpZGUnLGZ1bmN0aW9uKCRwcm92aWRlKXskcHJvdmlkZS52YWx1ZSgnJHJvb3RFbGVtZW50JyxlbGVtZW50KTt9XSk7bW9kdWxlcy51bnNoaWZ0KCduZycpO3ZhciBpbmplY3Rvcj1jcmVhdGVJbmplY3Rvcihtb2R1bGVzKTtpbmplY3Rvci5pbnZva2UoWyckcm9vdFNjb3BlJywnJHJvb3RFbGVtZW50JywnJGNvbXBpbGUnLCckaW5qZWN0b3InLCckYW5pbWF0ZScsZnVuY3Rpb24oc2NvcGUsZWxlbWVudCxjb21waWxlLGluamVjdG9yLGFuaW1hdGUpe3Njb3BlLiRhcHBseShmdW5jdGlvbigpe2VsZW1lbnQuZGF0YSgnJGluamVjdG9yJyxpbmplY3Rvcik7Y29tcGlsZShlbGVtZW50KShzY29wZSk7fSk7fV0pO3JldHVybiBpbmplY3Rvcjt9O3ZhciBOR19ERUZFUl9CT09UU1RSQVA9L15OR19ERUZFUl9CT09UU1RSQVAhLztpZih3aW5kb3cmJiFOR19ERUZFUl9CT09UU1RSQVAudGVzdCh3aW5kb3cubmFtZSkpe3JldHVybiBkb0Jvb3RzdHJhcCgpO30Kd2luZG93Lm5hbWU9d2luZG93Lm5hbWUucmVwbGFjZShOR19ERUZFUl9CT09UU1RSQVAsJycpO2FuZ3VsYXIucmVzdW1lQm9vdHN0cmFwPWZ1bmN0aW9uKGV4dHJhTW9kdWxlcyl7Zm9yRWFjaChleHRyYU1vZHVsZXMsZnVuY3Rpb24obW9kdWxlKXttb2R1bGVzLnB1c2gobW9kdWxlKTt9KTtkb0Jvb3RzdHJhcCgpO307fQp2YXIgU05BS0VfQ0FTRV9SRUdFWFA9L1tBLVpdL2c7ZnVuY3Rpb24gc25ha2VfY2FzZShuYW1lLHNlcGFyYXRvcil7c2VwYXJhdG9yPXNlcGFyYXRvcnx8J18nO3JldHVybiBuYW1lLnJlcGxhY2UoU05BS0VfQ0FTRV9SRUdFWFAsZnVuY3Rpb24obGV0dGVyLHBvcyl7cmV0dXJuKHBvcz9zZXBhcmF0b3I6JycpK2xldHRlci50b0xvd2VyQ2FzZSgpO30pO30KZnVuY3Rpb24gYmluZEpRdWVyeSgpe2pRdWVyeT13aW5kb3cualF1ZXJ5O2lmKGpRdWVyeSYmalF1ZXJ5LmZuLm9uKXtqcUxpdGU9alF1ZXJ5O2V4dGVuZChqUXVlcnkuZm4se3Njb3BlOkpRTGl0ZVByb3RvdHlwZS5zY29wZSxpc29sYXRlU2NvcGU6SlFMaXRlUHJvdG90eXBlLmlzb2xhdGVTY29wZSxjb250cm9sbGVyOkpRTGl0ZVByb3RvdHlwZS5jb250cm9sbGVyLGluamVjdG9yOkpRTGl0ZVByb3RvdHlwZS5pbmplY3Rvcixpbmhlcml0ZWREYXRhOkpRTGl0ZVByb3RvdHlwZS5pbmhlcml0ZWREYXRhfSk7anFMaXRlUGF0Y2hKUXVlcnlSZW1vdmUoJ3JlbW92ZScsdHJ1ZSx0cnVlLGZhbHNlKTtqcUxpdGVQYXRjaEpRdWVyeVJlbW92ZSgnZW1wdHknLGZhbHNlLGZhbHNlLGZhbHNlKTtqcUxpdGVQYXRjaEpRdWVyeVJlbW92ZSgnaHRtbCcsZmFsc2UsZmFsc2UsdHJ1ZSk7fWVsc2V7anFMaXRlPUpRTGl0ZTt9CmFuZ3VsYXIuZWxlbWVudD1qcUxpdGU7fQpmdW5jdGlvbiBhc3NlcnRBcmcoYXJnLG5hbWUscmVhc29uKXtpZighYXJnKXt0aHJvdyBuZ01pbkVycignYXJlcScsIkFyZ3VtZW50ICd7MH0nIGlzIHsxfSIsKG5hbWV8fCc/JyksKHJlYXNvbnx8InJlcXVpcmVkIikpO30KcmV0dXJuIGFyZzt9CmZ1bmN0aW9uIGFzc2VydEFyZ0ZuKGFyZyxuYW1lLGFjY2VwdEFycmF5QW5ub3RhdGlvbil7aWYoYWNjZXB0QXJyYXlBbm5vdGF0aW9uJiZpc0FycmF5KGFyZykpe2FyZz1hcmdbYXJnLmxlbmd0aC0xXTt9CmFzc2VydEFyZyhpc0Z1bmN0aW9uKGFyZyksbmFtZSwnbm90IGEgZnVuY3Rpb24sIGdvdCAnKwooYXJnJiZ0eXBlb2YgYXJnPT09J29iamVjdCc/YXJnLmNvbnN0cnVjdG9yLm5hbWV8fCdPYmplY3QnOnR5cGVvZiBhcmcpKTtyZXR1cm4gYXJnO30KZnVuY3Rpb24gYXNzZXJ0Tm90SGFzT3duUHJvcGVydHkobmFtZSxjb250ZXh0KXtpZihuYW1lPT09J2hhc093blByb3BlcnR5Jyl7dGhyb3cgbmdNaW5FcnIoJ2JhZG5hbWUnLCJoYXNPd25Qcm9wZXJ0eSBpcyBub3QgYSB2YWxpZCB7MH0gbmFtZSIsY29udGV4dCk7fX0KZnVuY3Rpb24gZ2V0dGVyKG9iaixwYXRoLGJpbmRGblRvU2NvcGUpe2lmKCFwYXRoKXJldHVybiBvYmo7dmFyIGtleXM9cGF0aC5zcGxpdCgnLicpO3ZhciBrZXk7dmFyIGxhc3RJbnN0YW5jZT1vYmo7dmFyIGxlbj1rZXlzLmxlbmd0aDtmb3IodmFyIGk9MDtpPGxlbjtpKyspe2tleT1rZXlzW2ldO2lmKG9iail7b2JqPShsYXN0SW5zdGFuY2U9b2JqKVtrZXldO319CmlmKCFiaW5kRm5Ub1Njb3BlJiZpc0Z1bmN0aW9uKG9iaikpe3JldHVybiBiaW5kKGxhc3RJbnN0YW5jZSxvYmopO30KcmV0dXJuIG9iajt9CmZ1bmN0aW9uIGdldEJsb2NrRWxlbWVudHMobm9kZXMpe3ZhciBzdGFydE5vZGU9bm9kZXNbMF0sZW5kTm9kZT1ub2Rlc1tub2Rlcy5sZW5ndGgtMV07aWYoc3RhcnROb2RlPT09ZW5kTm9kZSl7cmV0dXJuIGpxTGl0ZShzdGFydE5vZGUpO30KdmFyIGVsZW1lbnQ9c3RhcnROb2RlO3ZhciBlbGVtZW50cz1bZWxlbWVudF07ZG97ZWxlbWVudD1lbGVtZW50Lm5leHRTaWJsaW5nO2lmKCFlbGVtZW50KWJyZWFrO2VsZW1lbnRzLnB1c2goZWxlbWVudCk7fXdoaWxlKGVsZW1lbnQhPT1lbmROb2RlKTtyZXR1cm4ganFMaXRlKGVsZW1lbnRzKTt9CmZ1bmN0aW9uIHNldHVwTW9kdWxlTG9hZGVyKHdpbmRvdyl7dmFyICRpbmplY3Rvck1pbkVycj1taW5FcnIoJyRpbmplY3RvcicpO3ZhciBuZ01pbkVycj1taW5FcnIoJ25nJyk7ZnVuY3Rpb24gZW5zdXJlKG9iaixuYW1lLGZhY3Rvcnkpe3JldHVybiBvYmpbbmFtZV18fChvYmpbbmFtZV09ZmFjdG9yeSgpKTt9CnZhciBhbmd1bGFyPWVuc3VyZSh3aW5kb3csJ2FuZ3VsYXInLE9iamVjdCk7YW5ndWxhci4kJG1pbkVycj1hbmd1bGFyLiQkbWluRXJyfHxtaW5FcnI7cmV0dXJuIGVuc3VyZShhbmd1bGFyLCdtb2R1bGUnLGZ1bmN0aW9uKCl7dmFyIG1vZHVsZXM9e307cmV0dXJuIGZ1bmN0aW9uIG1vZHVsZShuYW1lLHJlcXVpcmVzLGNvbmZpZ0ZuKXt2YXIgYXNzZXJ0Tm90SGFzT3duUHJvcGVydHk9ZnVuY3Rpb24obmFtZSxjb250ZXh0KXtpZihuYW1lPT09J2hhc093blByb3BlcnR5Jyl7dGhyb3cgbmdNaW5FcnIoJ2JhZG5hbWUnLCdoYXNPd25Qcm9wZXJ0eSBpcyBub3QgYSB2YWxpZCB7MH0gbmFtZScsY29udGV4dCk7fX07YXNzZXJ0Tm90SGFzT3duUHJvcGVydHkobmFtZSwnbW9kdWxlJyk7aWYocmVxdWlyZXMmJm1vZHVsZXMuaGFzT3duUHJvcGVydHkobmFtZSkpe21vZHVsZXNbbmFtZV09bnVsbDt9CnJldHVybiBlbnN1cmUobW9kdWxlcyxuYW1lLGZ1bmN0aW9uKCl7aWYoIXJlcXVpcmVzKXt0aHJvdyAkaW5qZWN0b3JNaW5FcnIoJ25vbW9kJywiTW9kdWxlICd7MH0nIGlzIG5vdCBhdmFpbGFibGUhIFlvdSBlaXRoZXIgbWlzc3BlbGxlZCAiKyJ0aGUgbW9kdWxlIG5hbWUgb3IgZm9yZ290IHRvIGxvYWQgaXQuIElmIHJlZ2lzdGVyaW5nIGEgbW9kdWxlIGVuc3VyZSB0aGF0IHlvdSAiKyJzcGVjaWZ5IHRoZSBkZXBlbmRlbmNpZXMgYXMgdGhlIHNlY29uZCBhcmd1bWVudC4iLG5hbWUpO30KdmFyIGludm9rZVF1ZXVlPVtdO3ZhciBydW5CbG9ja3M9W107dmFyIGNvbmZpZz1pbnZva2VMYXRlcignJGluamVjdG9yJywnaW52b2tlJyk7dmFyIG1vZHVsZUluc3RhbmNlPXtfaW52b2tlUXVldWU6aW52b2tlUXVldWUsX3J1bkJsb2NrczpydW5CbG9ja3MscmVxdWlyZXM6cmVxdWlyZXMsbmFtZTpuYW1lLHByb3ZpZGVyOmludm9rZUxhdGVyKCckcHJvdmlkZScsJ3Byb3ZpZGVyJyksZmFjdG9yeTppbnZva2VMYXRlcignJHByb3ZpZGUnLCdmYWN0b3J5Jyksc2VydmljZTppbnZva2VMYXRlcignJHByb3ZpZGUnLCdzZXJ2aWNlJyksdmFsdWU6aW52b2tlTGF0ZXIoJyRwcm92aWRlJywndmFsdWUnKSxjb25zdGFudDppbnZva2VMYXRlcignJHByb3ZpZGUnLCdjb25zdGFudCcsJ3Vuc2hpZnQnKSxhbmltYXRpb246aW52b2tlTGF0ZXIoJyRhbmltYXRlUHJvdmlkZXInLCdyZWdpc3RlcicpLGZpbHRlcjppbnZva2VMYXRlcignJGZpbHRlclByb3ZpZGVyJywncmVnaXN0ZXInKSxjb250cm9sbGVyOmludm9rZUxhdGVyKCckY29udHJvbGxlclByb3ZpZGVyJywncmVnaXN0ZXInKSxkaXJlY3RpdmU6aW52b2tlTGF0ZXIoJyRjb21waWxlUHJvdmlkZXInLCdkaXJlY3RpdmUnKSxjb25maWc6Y29uZmlnLHJ1bjpmdW5jdGlvbihibG9jayl7cnVuQmxvY2tzLnB1c2goYmxvY2spO3JldHVybiB0aGlzO319O2lmKGNvbmZpZ0ZuKXtjb25maWcoY29uZmlnRm4pO30KcmV0dXJuIG1vZHVsZUluc3RhbmNlO2Z1bmN0aW9uIGludm9rZUxhdGVyKHByb3ZpZGVyLG1ldGhvZCxpbnNlcnRNZXRob2Qpe3JldHVybiBmdW5jdGlvbigpe2ludm9rZVF1ZXVlW2luc2VydE1ldGhvZHx8J3B1c2gnXShbcHJvdmlkZXIsbWV0aG9kLGFyZ3VtZW50c10pO3JldHVybiBtb2R1bGVJbnN0YW5jZTt9O319KTt9O30pO30KdmFyIHZlcnNpb249e2Z1bGw6JzEuMi4xOScsbWFqb3I6MSxtaW5vcjoyLGRvdDoxOSxjb2RlTmFtZToncHJlY29nbml0aXZlLWZsYXNoYmFja3MnfTtmdW5jdGlvbiBwdWJsaXNoRXh0ZXJuYWxBUEkoYW5ndWxhcil7ZXh0ZW5kKGFuZ3VsYXIseydib290c3RyYXAnOmJvb3RzdHJhcCwnY29weSc6Y29weSwnZXh0ZW5kJzpleHRlbmQsJ2VxdWFscyc6ZXF1YWxzLCdlbGVtZW50JzpqcUxpdGUsJ2ZvckVhY2gnOmZvckVhY2gsJ2luamVjdG9yJzpjcmVhdGVJbmplY3Rvciwnbm9vcCc6bm9vcCwnYmluZCc6YmluZCwndG9Kc29uJzp0b0pzb24sJ2Zyb21Kc29uJzpmcm9tSnNvbiwnaWRlbnRpdHknOmlkZW50aXR5LCdpc1VuZGVmaW5lZCc6aXNVbmRlZmluZWQsJ2lzRGVmaW5lZCc6aXNEZWZpbmVkLCdpc1N0cmluZyc6aXNTdHJpbmcsJ2lzRnVuY3Rpb24nOmlzRnVuY3Rpb24sJ2lzT2JqZWN0Jzppc09iamVjdCwnaXNOdW1iZXInOmlzTnVtYmVyLCdpc0VsZW1lbnQnOmlzRWxlbWVudCwnaXNBcnJheSc6aXNBcnJheSwndmVyc2lvbic6dmVyc2lvbiwnaXNEYXRlJzppc0RhdGUsJ2xvd2VyY2FzZSc6bG93ZXJjYXNlLCd1cHBlcmNhc2UnOnVwcGVyY2FzZSwnY2FsbGJhY2tzJzp7Y291bnRlcjowfSwnJCRtaW5FcnInOm1pbkVyciwnJCRjc3AnOmNzcH0pO2FuZ3VsYXJNb2R1bGU9c2V0dXBNb2R1bGVMb2FkZXIod2luZG93KTt0cnl7YW5ndWxhck1vZHVsZSgnbmdMb2NhbGUnKTt9Y2F0Y2goZSl7YW5ndWxhck1vZHVsZSgnbmdMb2NhbGUnLFtdKS5wcm92aWRlcignJGxvY2FsZScsJExvY2FsZVByb3ZpZGVyKTt9CmFuZ3VsYXJNb2R1bGUoJ25nJyxbJ25nTG9jYWxlJ10sWyckcHJvdmlkZScsZnVuY3Rpb24gbmdNb2R1bGUoJHByb3ZpZGUpeyRwcm92aWRlLnByb3ZpZGVyKHskJHNhbml0aXplVXJpOiQkU2FuaXRpemVVcmlQcm92aWRlcn0pOyRwcm92aWRlLnByb3ZpZGVyKCckY29tcGlsZScsJENvbXBpbGVQcm92aWRlcikuZGlyZWN0aXZlKHthOmh0bWxBbmNob3JEaXJlY3RpdmUsaW5wdXQ6aW5wdXREaXJlY3RpdmUsdGV4dGFyZWE6aW5wdXREaXJlY3RpdmUsZm9ybTpmb3JtRGlyZWN0aXZlLHNjcmlwdDpzY3JpcHREaXJlY3RpdmUsc2VsZWN0OnNlbGVjdERpcmVjdGl2ZSxzdHlsZTpzdHlsZURpcmVjdGl2ZSxvcHRpb246b3B0aW9uRGlyZWN0aXZlLG5nQmluZDpuZ0JpbmREaXJlY3RpdmUsbmdCaW5kSHRtbDpuZ0JpbmRIdG1sRGlyZWN0aXZlLG5nQmluZFRlbXBsYXRlOm5nQmluZFRlbXBsYXRlRGlyZWN0aXZlLG5nQ2xhc3M6bmdDbGFzc0RpcmVjdGl2ZSxuZ0NsYXNzRXZlbjpuZ0NsYXNzRXZlbkRpcmVjdGl2ZSxuZ0NsYXNzT2RkOm5nQ2xhc3NPZGREaXJlY3RpdmUsbmdDbG9hazpuZ0Nsb2FrRGlyZWN0aXZlLG5nQ29udHJvbGxlcjpuZ0NvbnRyb2xsZXJEaXJlY3RpdmUsbmdGb3JtOm5nRm9ybURpcmVjdGl2ZSxuZ0hpZGU6bmdIaWRlRGlyZWN0aXZlLG5nSWY6bmdJZkRpcmVjdGl2ZSxuZ0luY2x1ZGU6bmdJbmNsdWRlRGlyZWN0aXZlLG5nSW5pdDpuZ0luaXREaXJlY3RpdmUsbmdOb25CaW5kYWJsZTpuZ05vbkJpbmRhYmxlRGlyZWN0aXZlLG5nUGx1cmFsaXplOm5nUGx1cmFsaXplRGlyZWN0aXZlLG5nUmVwZWF0Om5nUmVwZWF0RGlyZWN0aXZlLG5nU2hvdzpuZ1Nob3dEaXJlY3RpdmUsbmdTdHlsZTpuZ1N0eWxlRGlyZWN0aXZlLG5nU3dpdGNoOm5nU3dpdGNoRGlyZWN0aXZlLG5nU3dpdGNoV2hlbjpuZ1N3aXRjaFdoZW5EaXJlY3RpdmUsbmdTd2l0Y2hEZWZhdWx0Om5nU3dpdGNoRGVmYXVsdERpcmVjdGl2ZSxuZ09wdGlvbnM6bmdPcHRpb25zRGlyZWN0aXZlLG5nVHJhbnNjbHVkZTpuZ1RyYW5zY2x1ZGVEaXJlY3RpdmUsbmdNb2RlbDpuZ01vZGVsRGlyZWN0aXZlLG5nTGlzdDpuZ0xpc3REaXJlY3RpdmUsbmdDaGFuZ2U6bmdDaGFuZ2VEaXJlY3RpdmUscmVxdWlyZWQ6cmVxdWlyZWREaXJlY3RpdmUsbmdSZXF1aXJlZDpyZXF1aXJlZERpcmVjdGl2ZSxuZ1ZhbHVlOm5nVmFsdWVEaXJlY3RpdmV9KS5kaXJlY3RpdmUoe25nSW5jbHVkZTpuZ0luY2x1ZGVGaWxsQ29udGVudERpcmVjdGl2ZX0pLmRpcmVjdGl2ZShuZ0F0dHJpYnV0ZUFsaWFzRGlyZWN0aXZlcykuZGlyZWN0aXZlKG5nRXZlbnREaXJlY3RpdmVzKTskcHJvdmlkZS5wcm92aWRlcih7JGFuY2hvclNjcm9sbDokQW5jaG9yU2Nyb2xsUHJvdmlkZXIsJGFuaW1hdGU6JEFuaW1hdGVQcm92aWRlciwkYnJvd3NlcjokQnJvd3NlclByb3ZpZGVyLCRjYWNoZUZhY3Rvcnk6JENhY2hlRmFjdG9yeVByb3ZpZGVyLCRjb250cm9sbGVyOiRDb250cm9sbGVyUHJvdmlkZXIsJGRvY3VtZW50OiREb2N1bWVudFByb3ZpZGVyLCRleGNlcHRpb25IYW5kbGVyOiRFeGNlcHRpb25IYW5kbGVyUHJvdmlkZXIsJGZpbHRlcjokRmlsdGVyUHJvdmlkZXIsJGludGVycG9sYXRlOiRJbnRlcnBvbGF0ZVByb3ZpZGVyLCRpbnRlcnZhbDokSW50ZXJ2YWxQcm92aWRlciwkaHR0cDokSHR0cFByb3ZpZGVyLCRodHRwQmFja2VuZDokSHR0cEJhY2tlbmRQcm92aWRlciwkbG9jYXRpb246JExvY2F0aW9uUHJvdmlkZXIsJGxvZzokTG9nUHJvdmlkZXIsJHBhcnNlOiRQYXJzZVByb3ZpZGVyLCRyb290U2NvcGU6JFJvb3RTY29wZVByb3ZpZGVyLCRxOiRRUHJvdmlkZXIsJHNjZTokU2NlUHJvdmlkZXIsJHNjZURlbGVnYXRlOiRTY2VEZWxlZ2F0ZVByb3ZpZGVyLCRzbmlmZmVyOiRTbmlmZmVyUHJvdmlkZXIsJHRlbXBsYXRlQ2FjaGU6JFRlbXBsYXRlQ2FjaGVQcm92aWRlciwkdGltZW91dDokVGltZW91dFByb3ZpZGVyLCR3aW5kb3c6JFdpbmRvd1Byb3ZpZGVyLCQkckFGOiQkUkFGUHJvdmlkZXIsJCRhc3luY0NhbGxiYWNrOiQkQXN5bmNDYWxsYmFja1Byb3ZpZGVyfSk7fV0pO30KSlFMaXRlLmV4cGFuZG89J25nMzM5Jzt2YXIganFDYWNoZT1KUUxpdGUuY2FjaGU9e30sanFJZD0xLGFkZEV2ZW50TGlzdGVuZXJGbj0od2luZG93LmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXI/ZnVuY3Rpb24oZWxlbWVudCx0eXBlLGZuKXtlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIodHlwZSxmbixmYWxzZSk7fTpmdW5jdGlvbihlbGVtZW50LHR5cGUsZm4pe2VsZW1lbnQuYXR0YWNoRXZlbnQoJ29uJyt0eXBlLGZuKTt9KSxyZW1vdmVFdmVudExpc3RlbmVyRm49KHdpbmRvdy5kb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyP2Z1bmN0aW9uKGVsZW1lbnQsdHlwZSxmbil7ZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKHR5cGUsZm4sZmFsc2UpO306ZnVuY3Rpb24oZWxlbWVudCx0eXBlLGZuKXtlbGVtZW50LmRldGFjaEV2ZW50KCdvbicrdHlwZSxmbik7fSk7dmFyIGpxRGF0YT1KUUxpdGUuX2RhdGE9ZnVuY3Rpb24obm9kZSl7cmV0dXJuIHRoaXMuY2FjaGVbbm9kZVt0aGlzLmV4cGFuZG9dXXx8e307fTtmdW5jdGlvbiBqcU5leHRJZCgpe3JldHVybisranFJZDt9CnZhciBTUEVDSUFMX0NIQVJTX1JFR0VYUD0vKFtcOlwtXF9dKyguKSkvZzt2YXIgTU9aX0hBQ0tfUkVHRVhQPS9ebW96KFtBLVpdKS87dmFyIGpxTGl0ZU1pbkVycj1taW5FcnIoJ2pxTGl0ZScpO2Z1bmN0aW9uIGNhbWVsQ2FzZShuYW1lKXtyZXR1cm4gbmFtZS5yZXBsYWNlKFNQRUNJQUxfQ0hBUlNfUkVHRVhQLGZ1bmN0aW9uKF8sc2VwYXJhdG9yLGxldHRlcixvZmZzZXQpe3JldHVybiBvZmZzZXQ/bGV0dGVyLnRvVXBwZXJDYXNlKCk6bGV0dGVyO30pLnJlcGxhY2UoTU9aX0hBQ0tfUkVHRVhQLCdNb3okMScpO30KZnVuY3Rpb24ganFMaXRlUGF0Y2hKUXVlcnlSZW1vdmUobmFtZSxkaXNwYXRjaFRoaXMsZmlsdGVyRWxlbXMsZ2V0dGVySWZOb0FyZ3VtZW50cyl7dmFyIG9yaWdpbmFsSnFGbj1qUXVlcnkuZm5bbmFtZV07b3JpZ2luYWxKcUZuPW9yaWdpbmFsSnFGbi4kb3JpZ2luYWx8fG9yaWdpbmFsSnFGbjtyZW1vdmVQYXRjaC4kb3JpZ2luYWw9b3JpZ2luYWxKcUZuO2pRdWVyeS5mbltuYW1lXT1yZW1vdmVQYXRjaDtmdW5jdGlvbiByZW1vdmVQYXRjaChwYXJhbSl7dmFyIGxpc3Q9ZmlsdGVyRWxlbXMmJnBhcmFtP1t0aGlzLmZpbHRlcihwYXJhbSldOlt0aGlzXSxmaXJlRXZlbnQ9ZGlzcGF0Y2hUaGlzLHNldCxzZXRJbmRleCxzZXRMZW5ndGgsZWxlbWVudCxjaGlsZEluZGV4LGNoaWxkTGVuZ3RoLGNoaWxkcmVuO2lmKCFnZXR0ZXJJZk5vQXJndW1lbnRzfHxwYXJhbSE9bnVsbCl7d2hpbGUobGlzdC5sZW5ndGgpe3NldD1saXN0LnNoaWZ0KCk7Zm9yKHNldEluZGV4PTAsc2V0TGVuZ3RoPXNldC5sZW5ndGg7c2V0SW5kZXg8c2V0TGVuZ3RoO3NldEluZGV4Kyspe2VsZW1lbnQ9anFMaXRlKHNldFtzZXRJbmRleF0pO2lmKGZpcmVFdmVudCl7ZWxlbWVudC50cmlnZ2VySGFuZGxlcignJGRlc3Ryb3knKTt9ZWxzZXtmaXJlRXZlbnQ9IWZpcmVFdmVudDt9CmZvcihjaGlsZEluZGV4PTAsY2hpbGRMZW5ndGg9KGNoaWxkcmVuPWVsZW1lbnQuY2hpbGRyZW4oKSkubGVuZ3RoO2NoaWxkSW5kZXg8Y2hpbGRMZW5ndGg7Y2hpbGRJbmRleCsrKXtsaXN0LnB1c2goalF1ZXJ5KGNoaWxkcmVuW2NoaWxkSW5kZXhdKSk7fX19fQpyZXR1cm4gb3JpZ2luYWxKcUZuLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt9fQp2YXIgU0lOR0xFX1RBR19SRUdFWFA9L148KFx3KylccypcLz8+KD86PFwvXDE+fCkkLzt2YXIgSFRNTF9SRUdFWFA9Lzx8JiM/XHcrOy87dmFyIFRBR19OQU1FX1JFR0VYUD0vPChbXHc6XSspLzt2YXIgWEhUTUxfVEFHX1JFR0VYUD0vPCg/IWFyZWF8YnJ8Y29sfGVtYmVkfGhyfGltZ3xpbnB1dHxsaW5rfG1ldGF8cGFyYW0pKChbXHc6XSspW14+XSopXC8+L2dpO3ZhciB3cmFwTWFwPXsnb3B0aW9uJzpbMSwnPHNlbGVjdCBtdWx0aXBsZT0ibXVsdGlwbGUiPicsJzwvc2VsZWN0PiddLCd0aGVhZCc6WzEsJzx0YWJsZT4nLCc8L3RhYmxlPiddLCdjb2wnOlsyLCc8dGFibGU+PGNvbGdyb3VwPicsJzwvY29sZ3JvdXA+PC90YWJsZT4nXSwndHInOlsyLCc8dGFibGU+PHRib2R5PicsJzwvdGJvZHk+PC90YWJsZT4nXSwndGQnOlszLCc8dGFibGU+PHRib2R5Pjx0cj4nLCc8L3RyPjwvdGJvZHk+PC90YWJsZT4nXSwnX2RlZmF1bHQnOlswLCIiLCIiXX07d3JhcE1hcC5vcHRncm91cD13cmFwTWFwLm9wdGlvbjt3cmFwTWFwLnRib2R5PXdyYXBNYXAudGZvb3Q9d3JhcE1hcC5jb2xncm91cD13cmFwTWFwLmNhcHRpb249d3JhcE1hcC50aGVhZDt3cmFwTWFwLnRoPXdyYXBNYXAudGQ7ZnVuY3Rpb24ganFMaXRlSXNUZXh0Tm9kZShodG1sKXtyZXR1cm4hSFRNTF9SRUdFWFAudGVzdChodG1sKTt9CmZ1bmN0aW9uIGpxTGl0ZUJ1aWxkRnJhZ21lbnQoaHRtbCxjb250ZXh0KXt2YXIgZWxlbSx0bXAsdGFnLHdyYXAsZnJhZ21lbnQ9Y29udGV4dC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksbm9kZXM9W10saSxqLGpqO2lmKGpxTGl0ZUlzVGV4dE5vZGUoaHRtbCkpe25vZGVzLnB1c2goY29udGV4dC5jcmVhdGVUZXh0Tm9kZShodG1sKSk7fWVsc2V7dG1wPWZyYWdtZW50LmFwcGVuZENoaWxkKGNvbnRleHQuY3JlYXRlRWxlbWVudCgnZGl2JykpO3RhZz0oVEFHX05BTUVfUkVHRVhQLmV4ZWMoaHRtbCl8fFsiIiwiIl0pWzFdLnRvTG93ZXJDYXNlKCk7d3JhcD13cmFwTWFwW3RhZ118fHdyYXBNYXAuX2RlZmF1bHQ7dG1wLmlubmVySFRNTD0nPGRpdj4mIzE2MDs8L2Rpdj4nKwp3cmFwWzFdK2h0bWwucmVwbGFjZShYSFRNTF9UQUdfUkVHRVhQLCI8JDE+PC8kMj4iKSt3cmFwWzJdO3RtcC5yZW1vdmVDaGlsZCh0bXAuZmlyc3RDaGlsZCk7aT13cmFwWzBdO3doaWxlKGktLSl7dG1wPXRtcC5sYXN0Q2hpbGQ7fQpmb3Ioaj0wLGpqPXRtcC5jaGlsZE5vZGVzLmxlbmd0aDtqPGpqOysrailub2Rlcy5wdXNoKHRtcC5jaGlsZE5vZGVzW2pdKTt0bXA9ZnJhZ21lbnQuZmlyc3RDaGlsZDt0bXAudGV4dENvbnRlbnQ9IiI7fQpmcmFnbWVudC50ZXh0Q29udGVudD0iIjtmcmFnbWVudC5pbm5lckhUTUw9IiI7cmV0dXJuIG5vZGVzO30KZnVuY3Rpb24ganFMaXRlUGFyc2VIVE1MKGh0bWwsY29udGV4dCl7Y29udGV4dD1jb250ZXh0fHxkb2N1bWVudDt2YXIgcGFyc2VkO2lmKChwYXJzZWQ9U0lOR0xFX1RBR19SRUdFWFAuZXhlYyhodG1sKSkpe3JldHVybltjb250ZXh0LmNyZWF0ZUVsZW1lbnQocGFyc2VkWzFdKV07fQpyZXR1cm4ganFMaXRlQnVpbGRGcmFnbWVudChodG1sLGNvbnRleHQpO30KZnVuY3Rpb24gSlFMaXRlKGVsZW1lbnQpe2lmKGVsZW1lbnQgaW5zdGFuY2VvZiBKUUxpdGUpe3JldHVybiBlbGVtZW50O30KaWYoaXNTdHJpbmcoZWxlbWVudCkpe2VsZW1lbnQ9dHJpbShlbGVtZW50KTt9CmlmKCEodGhpcyBpbnN0YW5jZW9mIEpRTGl0ZSkpe2lmKGlzU3RyaW5nKGVsZW1lbnQpJiZlbGVtZW50LmNoYXJBdCgwKSE9JzwnKXt0aHJvdyBqcUxpdGVNaW5FcnIoJ25vc2VsJywnTG9va2luZyB1cCBlbGVtZW50cyB2aWEgc2VsZWN0b3JzIGlzIG5vdCBzdXBwb3J0ZWQgYnkganFMaXRlISBTZWU6IGh0dHA6Ly9kb2NzLmFuZ3VsYXJqcy5vcmcvYXBpL2FuZ3VsYXIuZWxlbWVudCcpO30KcmV0dXJuIG5ldyBKUUxpdGUoZWxlbWVudCk7fQppZihpc1N0cmluZyhlbGVtZW50KSl7anFMaXRlQWRkTm9kZXModGhpcyxqcUxpdGVQYXJzZUhUTUwoZWxlbWVudCkpO3ZhciBmcmFnbWVudD1qcUxpdGUoZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpKTtmcmFnbWVudC5hcHBlbmQodGhpcyk7fWVsc2V7anFMaXRlQWRkTm9kZXModGhpcyxlbGVtZW50KTt9fQpmdW5jdGlvbiBqcUxpdGVDbG9uZShlbGVtZW50KXtyZXR1cm4gZWxlbWVudC5jbG9uZU5vZGUodHJ1ZSk7fQpmdW5jdGlvbiBqcUxpdGVEZWFsb2MoZWxlbWVudCl7anFMaXRlUmVtb3ZlRGF0YShlbGVtZW50KTtmb3IodmFyIGk9MCxjaGlsZHJlbj1lbGVtZW50LmNoaWxkTm9kZXN8fFtdO2k8Y2hpbGRyZW4ubGVuZ3RoO2krKyl7anFMaXRlRGVhbG9jKGNoaWxkcmVuW2ldKTt9fQpmdW5jdGlvbiBqcUxpdGVPZmYoZWxlbWVudCx0eXBlLGZuLHVuc3VwcG9ydGVkKXtpZihpc0RlZmluZWQodW5zdXBwb3J0ZWQpKXRocm93IGpxTGl0ZU1pbkVycignb2ZmYXJncycsJ2pxTGl0ZSNvZmYoKSBkb2VzIG5vdCBzdXBwb3J0IHRoZSBgc2VsZWN0b3JgIGFyZ3VtZW50Jyk7dmFyIGV2ZW50cz1qcUxpdGVFeHBhbmRvU3RvcmUoZWxlbWVudCwnZXZlbnRzJyksaGFuZGxlPWpxTGl0ZUV4cGFuZG9TdG9yZShlbGVtZW50LCdoYW5kbGUnKTtpZighaGFuZGxlKXJldHVybjtpZihpc1VuZGVmaW5lZCh0eXBlKSl7Zm9yRWFjaChldmVudHMsZnVuY3Rpb24oZXZlbnRIYW5kbGVyLHR5cGUpe3JlbW92ZUV2ZW50TGlzdGVuZXJGbihlbGVtZW50LHR5cGUsZXZlbnRIYW5kbGVyKTtkZWxldGUgZXZlbnRzW3R5cGVdO30pO31lbHNle2ZvckVhY2godHlwZS5zcGxpdCgnICcpLGZ1bmN0aW9uKHR5cGUpe2lmKGlzVW5kZWZpbmVkKGZuKSl7cmVtb3ZlRXZlbnRMaXN0ZW5lckZuKGVsZW1lbnQsdHlwZSxldmVudHNbdHlwZV0pO2RlbGV0ZSBldmVudHNbdHlwZV07fWVsc2V7YXJyYXlSZW1vdmUoZXZlbnRzW3R5cGVdfHxbXSxmbik7fX0pO319CmZ1bmN0aW9uIGpxTGl0ZVJlbW92ZURhdGEoZWxlbWVudCxuYW1lKXt2YXIgZXhwYW5kb0lkPWVsZW1lbnQubmczMzksZXhwYW5kb1N0b3JlPWpxQ2FjaGVbZXhwYW5kb0lkXTtpZihleHBhbmRvU3RvcmUpe2lmKG5hbWUpe2RlbGV0ZSBqcUNhY2hlW2V4cGFuZG9JZF0uZGF0YVtuYW1lXTtyZXR1cm47fQppZihleHBhbmRvU3RvcmUuaGFuZGxlKXtleHBhbmRvU3RvcmUuZXZlbnRzLiRkZXN0cm95JiZleHBhbmRvU3RvcmUuaGFuZGxlKHt9LCckZGVzdHJveScpO2pxTGl0ZU9mZihlbGVtZW50KTt9CmRlbGV0ZSBqcUNhY2hlW2V4cGFuZG9JZF07ZWxlbWVudC5uZzMzOT11bmRlZmluZWQ7fX0KZnVuY3Rpb24ganFMaXRlRXhwYW5kb1N0b3JlKGVsZW1lbnQsa2V5LHZhbHVlKXt2YXIgZXhwYW5kb0lkPWVsZW1lbnQubmczMzksZXhwYW5kb1N0b3JlPWpxQ2FjaGVbZXhwYW5kb0lkfHwtMV07aWYoaXNEZWZpbmVkKHZhbHVlKSl7aWYoIWV4cGFuZG9TdG9yZSl7ZWxlbWVudC5uZzMzOT1leHBhbmRvSWQ9anFOZXh0SWQoKTtleHBhbmRvU3RvcmU9anFDYWNoZVtleHBhbmRvSWRdPXt9O30KZXhwYW5kb1N0b3JlW2tleV09dmFsdWU7fWVsc2V7cmV0dXJuIGV4cGFuZG9TdG9yZSYmZXhwYW5kb1N0b3JlW2tleV07fX0KZnVuY3Rpb24ganFMaXRlRGF0YShlbGVtZW50LGtleSx2YWx1ZSl7dmFyIGRhdGE9anFMaXRlRXhwYW5kb1N0b3JlKGVsZW1lbnQsJ2RhdGEnKSxpc1NldHRlcj1pc0RlZmluZWQodmFsdWUpLGtleURlZmluZWQ9IWlzU2V0dGVyJiZpc0RlZmluZWQoa2V5KSxpc1NpbXBsZUdldHRlcj1rZXlEZWZpbmVkJiYhaXNPYmplY3Qoa2V5KTtpZighZGF0YSYmIWlzU2ltcGxlR2V0dGVyKXtqcUxpdGVFeHBhbmRvU3RvcmUoZWxlbWVudCwnZGF0YScsZGF0YT17fSk7fQppZihpc1NldHRlcil7ZGF0YVtrZXldPXZhbHVlO31lbHNle2lmKGtleURlZmluZWQpe2lmKGlzU2ltcGxlR2V0dGVyKXtyZXR1cm4gZGF0YSYmZGF0YVtrZXldO31lbHNle2V4dGVuZChkYXRhLGtleSk7fX1lbHNle3JldHVybiBkYXRhO319fQpmdW5jdGlvbiBqcUxpdGVIYXNDbGFzcyhlbGVtZW50LHNlbGVjdG9yKXtpZighZWxlbWVudC5nZXRBdHRyaWJ1dGUpcmV0dXJuIGZhbHNlO3JldHVybigoIiAiKyhlbGVtZW50LmdldEF0dHJpYnV0ZSgnY2xhc3MnKXx8JycpKyIgIikucmVwbGFjZSgvW1xuXHRdL2csIiAiKS5pbmRleE9mKCIgIitzZWxlY3RvcisiICIpPi0xKTt9CmZ1bmN0aW9uIGpxTGl0ZVJlbW92ZUNsYXNzKGVsZW1lbnQsY3NzQ2xhc3Nlcyl7aWYoY3NzQ2xhc3NlcyYmZWxlbWVudC5zZXRBdHRyaWJ1dGUpe2ZvckVhY2goY3NzQ2xhc3Nlcy5zcGxpdCgnICcpLGZ1bmN0aW9uKGNzc0NsYXNzKXtlbGVtZW50LnNldEF0dHJpYnV0ZSgnY2xhc3MnLHRyaW0oKCIgIisoZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2NsYXNzJyl8fCcnKSsiICIpLnJlcGxhY2UoL1tcblx0XS9nLCIgIikucmVwbGFjZSgiICIrdHJpbShjc3NDbGFzcykrIiAiLCIgIikpKTt9KTt9fQpmdW5jdGlvbiBqcUxpdGVBZGRDbGFzcyhlbGVtZW50LGNzc0NsYXNzZXMpe2lmKGNzc0NsYXNzZXMmJmVsZW1lbnQuc2V0QXR0cmlidXRlKXt2YXIgZXhpc3RpbmdDbGFzc2VzPSgnICcrKGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdjbGFzcycpfHwnJykrJyAnKS5yZXBsYWNlKC9bXG5cdF0vZywiICIpO2ZvckVhY2goY3NzQ2xhc3Nlcy5zcGxpdCgnICcpLGZ1bmN0aW9uKGNzc0NsYXNzKXtjc3NDbGFzcz10cmltKGNzc0NsYXNzKTtpZihleGlzdGluZ0NsYXNzZXMuaW5kZXhPZignICcrY3NzQ2xhc3MrJyAnKT09PS0xKXtleGlzdGluZ0NsYXNzZXMrPWNzc0NsYXNzKycgJzt9fSk7ZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2NsYXNzJyx0cmltKGV4aXN0aW5nQ2xhc3NlcykpO319CmZ1bmN0aW9uIGpxTGl0ZUFkZE5vZGVzKHJvb3QsZWxlbWVudHMpe2lmKGVsZW1lbnRzKXtlbGVtZW50cz0oIWVsZW1lbnRzLm5vZGVOYW1lJiZpc0RlZmluZWQoZWxlbWVudHMubGVuZ3RoKSYmIWlzV2luZG93KGVsZW1lbnRzKSk/ZWxlbWVudHM6W2VsZW1lbnRzXTtmb3IodmFyIGk9MDtpPGVsZW1lbnRzLmxlbmd0aDtpKyspe3Jvb3QucHVzaChlbGVtZW50c1tpXSk7fX19CmZ1bmN0aW9uIGpxTGl0ZUNvbnRyb2xsZXIoZWxlbWVudCxuYW1lKXtyZXR1cm4ganFMaXRlSW5oZXJpdGVkRGF0YShlbGVtZW50LCckJysobmFtZXx8J25nQ29udHJvbGxlcicpKydDb250cm9sbGVyJyk7fQpmdW5jdGlvbiBqcUxpdGVJbmhlcml0ZWREYXRhKGVsZW1lbnQsbmFtZSx2YWx1ZSl7ZWxlbWVudD1qcUxpdGUoZWxlbWVudCk7aWYoZWxlbWVudFswXS5ub2RlVHlwZT09OSl7ZWxlbWVudD1lbGVtZW50LmZpbmQoJ2h0bWwnKTt9CnZhciBuYW1lcz1pc0FycmF5KG5hbWUpP25hbWU6W25hbWVdO3doaWxlKGVsZW1lbnQubGVuZ3RoKXt2YXIgbm9kZT1lbGVtZW50WzBdO2Zvcih2YXIgaT0wLGlpPW5hbWVzLmxlbmd0aDtpPGlpO2krKyl7aWYoKHZhbHVlPWVsZW1lbnQuZGF0YShuYW1lc1tpXSkpIT09dW5kZWZpbmVkKXJldHVybiB2YWx1ZTt9CmVsZW1lbnQ9anFMaXRlKG5vZGUucGFyZW50Tm9kZXx8KG5vZGUubm9kZVR5cGU9PT0xMSYmbm9kZS5ob3N0KSk7fX0KZnVuY3Rpb24ganFMaXRlRW1wdHkoZWxlbWVudCl7Zm9yKHZhciBpPTAsY2hpbGROb2Rlcz1lbGVtZW50LmNoaWxkTm9kZXM7aTxjaGlsZE5vZGVzLmxlbmd0aDtpKyspe2pxTGl0ZURlYWxvYyhjaGlsZE5vZGVzW2ldKTt9CndoaWxlKGVsZW1lbnQuZmlyc3RDaGlsZCl7ZWxlbWVudC5yZW1vdmVDaGlsZChlbGVtZW50LmZpcnN0Q2hpbGQpO319CnZhciBKUUxpdGVQcm90b3R5cGU9SlFMaXRlLnByb3RvdHlwZT17cmVhZHk6ZnVuY3Rpb24oZm4pe3ZhciBmaXJlZD1mYWxzZTtmdW5jdGlvbiB0cmlnZ2VyKCl7aWYoZmlyZWQpcmV0dXJuO2ZpcmVkPXRydWU7Zm4oKTt9CmlmKGRvY3VtZW50LnJlYWR5U3RhdGU9PT0nY29tcGxldGUnKXtzZXRUaW1lb3V0KHRyaWdnZXIpO31lbHNle3RoaXMub24oJ0RPTUNvbnRlbnRMb2FkZWQnLHRyaWdnZXIpO0pRTGl0ZSh3aW5kb3cpLm9uKCdsb2FkJyx0cmlnZ2VyKTt9fSx0b1N0cmluZzpmdW5jdGlvbigpe3ZhciB2YWx1ZT1bXTtmb3JFYWNoKHRoaXMsZnVuY3Rpb24oZSl7dmFsdWUucHVzaCgnJytlKTt9KTtyZXR1cm4nWycrdmFsdWUuam9pbignLCAnKSsnXSc7fSxlcTpmdW5jdGlvbihpbmRleCl7cmV0dXJuKGluZGV4Pj0wKT9qcUxpdGUodGhpc1tpbmRleF0pOmpxTGl0ZSh0aGlzW3RoaXMubGVuZ3RoK2luZGV4XSk7fSxsZW5ndGg6MCxwdXNoOnB1c2gsc29ydDpbXS5zb3J0LHNwbGljZTpbXS5zcGxpY2V9O3ZhciBCT09MRUFOX0FUVFI9e307Zm9yRWFjaCgnbXVsdGlwbGUsc2VsZWN0ZWQsY2hlY2tlZCxkaXNhYmxlZCxyZWFkT25seSxyZXF1aXJlZCxvcGVuJy5zcGxpdCgnLCcpLGZ1bmN0aW9uKHZhbHVlKXtCT09MRUFOX0FUVFJbbG93ZXJjYXNlKHZhbHVlKV09dmFsdWU7fSk7dmFyIEJPT0xFQU5fRUxFTUVOVFM9e307Zm9yRWFjaCgnaW5wdXQsc2VsZWN0LG9wdGlvbix0ZXh0YXJlYSxidXR0b24sZm9ybSxkZXRhaWxzJy5zcGxpdCgnLCcpLGZ1bmN0aW9uKHZhbHVlKXtCT09MRUFOX0VMRU1FTlRTW3VwcGVyY2FzZSh2YWx1ZSldPXRydWU7fSk7ZnVuY3Rpb24gZ2V0Qm9vbGVhbkF0dHJOYW1lKGVsZW1lbnQsbmFtZSl7dmFyIGJvb2xlYW5BdHRyPUJPT0xFQU5fQVRUUltuYW1lLnRvTG93ZXJDYXNlKCldO3JldHVybiBib29sZWFuQXR0ciYmQk9PTEVBTl9FTEVNRU5UU1tlbGVtZW50Lm5vZGVOYW1lXSYmYm9vbGVhbkF0dHI7fQpmb3JFYWNoKHtkYXRhOmpxTGl0ZURhdGEsaW5oZXJpdGVkRGF0YTpqcUxpdGVJbmhlcml0ZWREYXRhLHNjb3BlOmZ1bmN0aW9uKGVsZW1lbnQpe3JldHVybiBqcUxpdGUoZWxlbWVudCkuZGF0YSgnJHNjb3BlJyl8fGpxTGl0ZUluaGVyaXRlZERhdGEoZWxlbWVudC5wYXJlbnROb2RlfHxlbGVtZW50LFsnJGlzb2xhdGVTY29wZScsJyRzY29wZSddKTt9LGlzb2xhdGVTY29wZTpmdW5jdGlvbihlbGVtZW50KXtyZXR1cm4ganFMaXRlKGVsZW1lbnQpLmRhdGEoJyRpc29sYXRlU2NvcGUnKXx8anFMaXRlKGVsZW1lbnQpLmRhdGEoJyRpc29sYXRlU2NvcGVOb1RlbXBsYXRlJyk7fSxjb250cm9sbGVyOmpxTGl0ZUNvbnRyb2xsZXIsaW5qZWN0b3I6ZnVuY3Rpb24oZWxlbWVudCl7cmV0dXJuIGpxTGl0ZUluaGVyaXRlZERhdGEoZWxlbWVudCwnJGluamVjdG9yJyk7fSxyZW1vdmVBdHRyOmZ1bmN0aW9uKGVsZW1lbnQsbmFtZSl7ZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUobmFtZSk7fSxoYXNDbGFzczpqcUxpdGVIYXNDbGFzcyxjc3M6ZnVuY3Rpb24oZWxlbWVudCxuYW1lLHZhbHVlKXtuYW1lPWNhbWVsQ2FzZShuYW1lKTtpZihpc0RlZmluZWQodmFsdWUpKXtlbGVtZW50LnN0eWxlW25hbWVdPXZhbHVlO31lbHNle3ZhciB2YWw7aWYobXNpZTw9OCl7dmFsPWVsZW1lbnQuY3VycmVudFN0eWxlJiZlbGVtZW50LmN1cnJlbnRTdHlsZVtuYW1lXTtpZih2YWw9PT0nJyl2YWw9J2F1dG8nO30KdmFsPXZhbHx8ZWxlbWVudC5zdHlsZVtuYW1lXTtpZihtc2llPD04KXt2YWw9KHZhbD09PScnKT91bmRlZmluZWQ6dmFsO30KcmV0dXJuIHZhbDt9fSxhdHRyOmZ1bmN0aW9uKGVsZW1lbnQsbmFtZSx2YWx1ZSl7dmFyIGxvd2VyY2FzZWROYW1lPWxvd2VyY2FzZShuYW1lKTtpZihCT09MRUFOX0FUVFJbbG93ZXJjYXNlZE5hbWVdKXtpZihpc0RlZmluZWQodmFsdWUpKXtpZighIXZhbHVlKXtlbGVtZW50W25hbWVdPXRydWU7ZWxlbWVudC5zZXRBdHRyaWJ1dGUobmFtZSxsb3dlcmNhc2VkTmFtZSk7fWVsc2V7ZWxlbWVudFtuYW1lXT1mYWxzZTtlbGVtZW50LnJlbW92ZUF0dHJpYnV0ZShsb3dlcmNhc2VkTmFtZSk7fX1lbHNle3JldHVybihlbGVtZW50W25hbWVdfHwoZWxlbWVudC5hdHRyaWJ1dGVzLmdldE5hbWVkSXRlbShuYW1lKXx8bm9vcCkuc3BlY2lmaWVkKT9sb3dlcmNhc2VkTmFtZTp1bmRlZmluZWQ7fX1lbHNlIGlmKGlzRGVmaW5lZCh2YWx1ZSkpe2VsZW1lbnQuc2V0QXR0cmlidXRlKG5hbWUsdmFsdWUpO31lbHNlIGlmKGVsZW1lbnQuZ2V0QXR0cmlidXRlKXt2YXIgcmV0PWVsZW1lbnQuZ2V0QXR0cmlidXRlKG5hbWUsMik7cmV0dXJuIHJldD09PW51bGw/dW5kZWZpbmVkOnJldDt9fSxwcm9wOmZ1bmN0aW9uKGVsZW1lbnQsbmFtZSx2YWx1ZSl7aWYoaXNEZWZpbmVkKHZhbHVlKSl7ZWxlbWVudFtuYW1lXT12YWx1ZTt9ZWxzZXtyZXR1cm4gZWxlbWVudFtuYW1lXTt9fSx0ZXh0OihmdW5jdGlvbigpe3ZhciBOT0RFX1RZUEVfVEVYVF9QUk9QRVJUWT1bXTtpZihtc2llPDkpe05PREVfVFlQRV9URVhUX1BST1BFUlRZWzFdPSdpbm5lclRleHQnO05PREVfVFlQRV9URVhUX1BST1BFUlRZWzNdPSdub2RlVmFsdWUnO31lbHNle05PREVfVFlQRV9URVhUX1BST1BFUlRZWzFdPU5PREVfVFlQRV9URVhUX1BST1BFUlRZWzNdPSd0ZXh0Q29udGVudCc7fQpnZXRUZXh0LiRkdj0nJztyZXR1cm4gZ2V0VGV4dDtmdW5jdGlvbiBnZXRUZXh0KGVsZW1lbnQsdmFsdWUpe3ZhciB0ZXh0UHJvcD1OT0RFX1RZUEVfVEVYVF9QUk9QRVJUWVtlbGVtZW50Lm5vZGVUeXBlXTtpZihpc1VuZGVmaW5lZCh2YWx1ZSkpe3JldHVybiB0ZXh0UHJvcD9lbGVtZW50W3RleHRQcm9wXTonJzt9CmVsZW1lbnRbdGV4dFByb3BdPXZhbHVlO319KSgpLHZhbDpmdW5jdGlvbihlbGVtZW50LHZhbHVlKXtpZihpc1VuZGVmaW5lZCh2YWx1ZSkpe2lmKG5vZGVOYW1lXyhlbGVtZW50KT09PSdTRUxFQ1QnJiZlbGVtZW50Lm11bHRpcGxlKXt2YXIgcmVzdWx0PVtdO2ZvckVhY2goZWxlbWVudC5vcHRpb25zLGZ1bmN0aW9uKG9wdGlvbil7aWYob3B0aW9uLnNlbGVjdGVkKXtyZXN1bHQucHVzaChvcHRpb24udmFsdWV8fG9wdGlvbi50ZXh0KTt9fSk7cmV0dXJuIHJlc3VsdC5sZW5ndGg9PT0wP251bGw6cmVzdWx0O30KcmV0dXJuIGVsZW1lbnQudmFsdWU7fQplbGVtZW50LnZhbHVlPXZhbHVlO30saHRtbDpmdW5jdGlvbihlbGVtZW50LHZhbHVlKXtpZihpc1VuZGVmaW5lZCh2YWx1ZSkpe3JldHVybiBlbGVtZW50LmlubmVySFRNTDt9CmZvcih2YXIgaT0wLGNoaWxkTm9kZXM9ZWxlbWVudC5jaGlsZE5vZGVzO2k8Y2hpbGROb2Rlcy5sZW5ndGg7aSsrKXtqcUxpdGVEZWFsb2MoY2hpbGROb2Rlc1tpXSk7fQplbGVtZW50LmlubmVySFRNTD12YWx1ZTt9LGVtcHR5OmpxTGl0ZUVtcHR5fSxmdW5jdGlvbihmbixuYW1lKXtKUUxpdGUucHJvdG90eXBlW25hbWVdPWZ1bmN0aW9uKGFyZzEsYXJnMil7dmFyIGksa2V5O3ZhciBub2RlQ291bnQ9dGhpcy5sZW5ndGg7aWYoZm4hPT1qcUxpdGVFbXB0eSYmKCgoZm4ubGVuZ3RoPT0yJiYoZm4hPT1qcUxpdGVIYXNDbGFzcyYmZm4hPT1qcUxpdGVDb250cm9sbGVyKSk/YXJnMTphcmcyKT09PXVuZGVmaW5lZCkpe2lmKGlzT2JqZWN0KGFyZzEpKXtmb3IoaT0wO2k8bm9kZUNvdW50O2krKyl7aWYoZm49PT1qcUxpdGVEYXRhKXtmbih0aGlzW2ldLGFyZzEpO31lbHNle2ZvcihrZXkgaW4gYXJnMSl7Zm4odGhpc1tpXSxrZXksYXJnMVtrZXldKTt9fX0KcmV0dXJuIHRoaXM7fWVsc2V7dmFyIHZhbHVlPWZuLiRkdjt2YXIgamo9KHZhbHVlPT09dW5kZWZpbmVkKT9NYXRoLm1pbihub2RlQ291bnQsMSk6bm9kZUNvdW50O2Zvcih2YXIgaj0wO2o8amo7aisrKXt2YXIgbm9kZVZhbHVlPWZuKHRoaXNbal0sYXJnMSxhcmcyKTt2YWx1ZT12YWx1ZT92YWx1ZStub2RlVmFsdWU6bm9kZVZhbHVlO30KcmV0dXJuIHZhbHVlO319ZWxzZXtmb3IoaT0wO2k8bm9kZUNvdW50O2krKyl7Zm4odGhpc1tpXSxhcmcxLGFyZzIpO30KcmV0dXJuIHRoaXM7fX07fSk7ZnVuY3Rpb24gY3JlYXRlRXZlbnRIYW5kbGVyKGVsZW1lbnQsZXZlbnRzKXt2YXIgZXZlbnRIYW5kbGVyPWZ1bmN0aW9uKGV2ZW50LHR5cGUpe2lmKCFldmVudC5wcmV2ZW50RGVmYXVsdCl7ZXZlbnQucHJldmVudERlZmF1bHQ9ZnVuY3Rpb24oKXtldmVudC5yZXR1cm5WYWx1ZT1mYWxzZTt9O30KaWYoIWV2ZW50LnN0b3BQcm9wYWdhdGlvbil7ZXZlbnQuc3RvcFByb3BhZ2F0aW9uPWZ1bmN0aW9uKCl7ZXZlbnQuY2FuY2VsQnViYmxlPXRydWU7fTt9CmlmKCFldmVudC50YXJnZXQpe2V2ZW50LnRhcmdldD1ldmVudC5zcmNFbGVtZW50fHxkb2N1bWVudDt9CmlmKGlzVW5kZWZpbmVkKGV2ZW50LmRlZmF1bHRQcmV2ZW50ZWQpKXt2YXIgcHJldmVudD1ldmVudC5wcmV2ZW50RGVmYXVsdDtldmVudC5wcmV2ZW50RGVmYXVsdD1mdW5jdGlvbigpe2V2ZW50LmRlZmF1bHRQcmV2ZW50ZWQ9dHJ1ZTtwcmV2ZW50LmNhbGwoZXZlbnQpO307ZXZlbnQuZGVmYXVsdFByZXZlbnRlZD1mYWxzZTt9CmV2ZW50LmlzRGVmYXVsdFByZXZlbnRlZD1mdW5jdGlvbigpe3JldHVybiBldmVudC5kZWZhdWx0UHJldmVudGVkfHxldmVudC5yZXR1cm5WYWx1ZT09PWZhbHNlO307dmFyIGV2ZW50SGFuZGxlcnNDb3B5PXNoYWxsb3dDb3B5KGV2ZW50c1t0eXBlfHxldmVudC50eXBlXXx8W10pO2ZvckVhY2goZXZlbnRIYW5kbGVyc0NvcHksZnVuY3Rpb24oZm4pe2ZuLmNhbGwoZWxlbWVudCxldmVudCk7fSk7aWYobXNpZTw9OCl7ZXZlbnQucHJldmVudERlZmF1bHQ9bnVsbDtldmVudC5zdG9wUHJvcGFnYXRpb249bnVsbDtldmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQ9bnVsbDt9ZWxzZXtkZWxldGUgZXZlbnQucHJldmVudERlZmF1bHQ7ZGVsZXRlIGV2ZW50LnN0b3BQcm9wYWdhdGlvbjtkZWxldGUgZXZlbnQuaXNEZWZhdWx0UHJldmVudGVkO319O2V2ZW50SGFuZGxlci5lbGVtPWVsZW1lbnQ7cmV0dXJuIGV2ZW50SGFuZGxlcjt9CmZvckVhY2goe3JlbW92ZURhdGE6anFMaXRlUmVtb3ZlRGF0YSxkZWFsb2M6anFMaXRlRGVhbG9jLG9uOmZ1bmN0aW9uIG9uRm4oZWxlbWVudCx0eXBlLGZuLHVuc3VwcG9ydGVkKXtpZihpc0RlZmluZWQodW5zdXBwb3J0ZWQpKXRocm93IGpxTGl0ZU1pbkVycignb25hcmdzJywnanFMaXRlI29uKCkgZG9lcyBub3Qgc3VwcG9ydCB0aGUgYHNlbGVjdG9yYCBvciBgZXZlbnREYXRhYCBwYXJhbWV0ZXJzJyk7dmFyIGV2ZW50cz1qcUxpdGVFeHBhbmRvU3RvcmUoZWxlbWVudCwnZXZlbnRzJyksaGFuZGxlPWpxTGl0ZUV4cGFuZG9TdG9yZShlbGVtZW50LCdoYW5kbGUnKTtpZighZXZlbnRzKWpxTGl0ZUV4cGFuZG9TdG9yZShlbGVtZW50LCdldmVudHMnLGV2ZW50cz17fSk7aWYoIWhhbmRsZSlqcUxpdGVFeHBhbmRvU3RvcmUoZWxlbWVudCwnaGFuZGxlJyxoYW5kbGU9Y3JlYXRlRXZlbnRIYW5kbGVyKGVsZW1lbnQsZXZlbnRzKSk7Zm9yRWFjaCh0eXBlLnNwbGl0KCcgJyksZnVuY3Rpb24odHlwZSl7dmFyIGV2ZW50Rm5zPWV2ZW50c1t0eXBlXTtpZighZXZlbnRGbnMpe2lmKHR5cGU9PSdtb3VzZWVudGVyJ3x8dHlwZT09J21vdXNlbGVhdmUnKXt2YXIgY29udGFpbnM9ZG9jdW1lbnQuYm9keS5jb250YWluc3x8ZG9jdW1lbnQuYm9keS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbj9mdW5jdGlvbihhLGIpe3ZhciBhZG93bj1hLm5vZGVUeXBlPT09OT9hLmRvY3VtZW50RWxlbWVudDphLGJ1cD1iJiZiLnBhcmVudE5vZGU7cmV0dXJuIGE9PT1idXB8fCEhKGJ1cCYmYnVwLm5vZGVUeXBlPT09MSYmKGFkb3duLmNvbnRhaW5zP2Fkb3duLmNvbnRhaW5zKGJ1cCk6YS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiYmYS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihidXApJjE2KSk7fTpmdW5jdGlvbihhLGIpe2lmKGIpe3doaWxlKChiPWIucGFyZW50Tm9kZSkpe2lmKGI9PT1hKXtyZXR1cm4gdHJ1ZTt9fX0KcmV0dXJuIGZhbHNlO307ZXZlbnRzW3R5cGVdPVtdO3ZhciBldmVudG1hcD17bW91c2VsZWF2ZToibW91c2VvdXQiLG1vdXNlZW50ZXI6Im1vdXNlb3ZlciJ9O29uRm4oZWxlbWVudCxldmVudG1hcFt0eXBlXSxmdW5jdGlvbihldmVudCl7dmFyIHRhcmdldD10aGlzLHJlbGF0ZWQ9ZXZlbnQucmVsYXRlZFRhcmdldDtpZighcmVsYXRlZHx8KHJlbGF0ZWQhPT10YXJnZXQmJiFjb250YWlucyh0YXJnZXQscmVsYXRlZCkpKXtoYW5kbGUoZXZlbnQsdHlwZSk7fX0pO31lbHNle2FkZEV2ZW50TGlzdGVuZXJGbihlbGVtZW50LHR5cGUsaGFuZGxlKTtldmVudHNbdHlwZV09W107fQpldmVudEZucz1ldmVudHNbdHlwZV07fQpldmVudEZucy5wdXNoKGZuKTt9KTt9LG9mZjpqcUxpdGVPZmYsb25lOmZ1bmN0aW9uKGVsZW1lbnQsdHlwZSxmbil7ZWxlbWVudD1qcUxpdGUoZWxlbWVudCk7ZWxlbWVudC5vbih0eXBlLGZ1bmN0aW9uIG9uRm4oKXtlbGVtZW50Lm9mZih0eXBlLGZuKTtlbGVtZW50Lm9mZih0eXBlLG9uRm4pO30pO2VsZW1lbnQub24odHlwZSxmbik7fSxyZXBsYWNlV2l0aDpmdW5jdGlvbihlbGVtZW50LHJlcGxhY2VOb2RlKXt2YXIgaW5kZXgscGFyZW50PWVsZW1lbnQucGFyZW50Tm9kZTtqcUxpdGVEZWFsb2MoZWxlbWVudCk7Zm9yRWFjaChuZXcgSlFMaXRlKHJlcGxhY2VOb2RlKSxmdW5jdGlvbihub2RlKXtpZihpbmRleCl7cGFyZW50Lmluc2VydEJlZm9yZShub2RlLGluZGV4Lm5leHRTaWJsaW5nKTt9ZWxzZXtwYXJlbnQucmVwbGFjZUNoaWxkKG5vZGUsZWxlbWVudCk7fQppbmRleD1ub2RlO30pO30sY2hpbGRyZW46ZnVuY3Rpb24oZWxlbWVudCl7dmFyIGNoaWxkcmVuPVtdO2ZvckVhY2goZWxlbWVudC5jaGlsZE5vZGVzLGZ1bmN0aW9uKGVsZW1lbnQpe2lmKGVsZW1lbnQubm9kZVR5cGU9PT0xKQpjaGlsZHJlbi5wdXNoKGVsZW1lbnQpO30pO3JldHVybiBjaGlsZHJlbjt9LGNvbnRlbnRzOmZ1bmN0aW9uKGVsZW1lbnQpe3JldHVybiBlbGVtZW50LmNvbnRlbnREb2N1bWVudHx8ZWxlbWVudC5jaGlsZE5vZGVzfHxbXTt9LGFwcGVuZDpmdW5jdGlvbihlbGVtZW50LG5vZGUpe2ZvckVhY2gobmV3IEpRTGl0ZShub2RlKSxmdW5jdGlvbihjaGlsZCl7aWYoZWxlbWVudC5ub2RlVHlwZT09PTF8fGVsZW1lbnQubm9kZVR5cGU9PT0xMSl7ZWxlbWVudC5hcHBlbmRDaGlsZChjaGlsZCk7fX0pO30scHJlcGVuZDpmdW5jdGlvbihlbGVtZW50LG5vZGUpe2lmKGVsZW1lbnQubm9kZVR5cGU9PT0xKXt2YXIgaW5kZXg9ZWxlbWVudC5maXJzdENoaWxkO2ZvckVhY2gobmV3IEpRTGl0ZShub2RlKSxmdW5jdGlvbihjaGlsZCl7ZWxlbWVudC5pbnNlcnRCZWZvcmUoY2hpbGQsaW5kZXgpO30pO319LHdyYXA6ZnVuY3Rpb24oZWxlbWVudCx3cmFwTm9kZSl7d3JhcE5vZGU9anFMaXRlKHdyYXBOb2RlKVswXTt2YXIgcGFyZW50PWVsZW1lbnQucGFyZW50Tm9kZTtpZihwYXJlbnQpe3BhcmVudC5yZXBsYWNlQ2hpbGQod3JhcE5vZGUsZWxlbWVudCk7fQp3cmFwTm9kZS5hcHBlbmRDaGlsZChlbGVtZW50KTt9LHJlbW92ZTpmdW5jdGlvbihlbGVtZW50KXtqcUxpdGVEZWFsb2MoZWxlbWVudCk7dmFyIHBhcmVudD1lbGVtZW50LnBhcmVudE5vZGU7aWYocGFyZW50KXBhcmVudC5yZW1vdmVDaGlsZChlbGVtZW50KTt9LGFmdGVyOmZ1bmN0aW9uKGVsZW1lbnQsbmV3RWxlbWVudCl7dmFyIGluZGV4PWVsZW1lbnQscGFyZW50PWVsZW1lbnQucGFyZW50Tm9kZTtmb3JFYWNoKG5ldyBKUUxpdGUobmV3RWxlbWVudCksZnVuY3Rpb24obm9kZSl7cGFyZW50Lmluc2VydEJlZm9yZShub2RlLGluZGV4Lm5leHRTaWJsaW5nKTtpbmRleD1ub2RlO30pO30sYWRkQ2xhc3M6anFMaXRlQWRkQ2xhc3MscmVtb3ZlQ2xhc3M6anFMaXRlUmVtb3ZlQ2xhc3MsdG9nZ2xlQ2xhc3M6ZnVuY3Rpb24oZWxlbWVudCxzZWxlY3Rvcixjb25kaXRpb24pe2lmKHNlbGVjdG9yKXtmb3JFYWNoKHNlbGVjdG9yLnNwbGl0KCcgJyksZnVuY3Rpb24oY2xhc3NOYW1lKXt2YXIgY2xhc3NDb25kaXRpb249Y29uZGl0aW9uO2lmKGlzVW5kZWZpbmVkKGNsYXNzQ29uZGl0aW9uKSl7Y2xhc3NDb25kaXRpb249IWpxTGl0ZUhhc0NsYXNzKGVsZW1lbnQsY2xhc3NOYW1lKTt9CihjbGFzc0NvbmRpdGlvbj9qcUxpdGVBZGRDbGFzczpqcUxpdGVSZW1vdmVDbGFzcykoZWxlbWVudCxjbGFzc05hbWUpO30pO319LHBhcmVudDpmdW5jdGlvbihlbGVtZW50KXt2YXIgcGFyZW50PWVsZW1lbnQucGFyZW50Tm9kZTtyZXR1cm4gcGFyZW50JiZwYXJlbnQubm9kZVR5cGUhPT0xMT9wYXJlbnQ6bnVsbDt9LG5leHQ6ZnVuY3Rpb24oZWxlbWVudCl7aWYoZWxlbWVudC5uZXh0RWxlbWVudFNpYmxpbmcpe3JldHVybiBlbGVtZW50Lm5leHRFbGVtZW50U2libGluZzt9CnZhciBlbG09ZWxlbWVudC5uZXh0U2libGluZzt3aGlsZShlbG0hPW51bGwmJmVsbS5ub2RlVHlwZSE9PTEpe2VsbT1lbG0ubmV4dFNpYmxpbmc7fQpyZXR1cm4gZWxtO30sZmluZDpmdW5jdGlvbihlbGVtZW50LHNlbGVjdG9yKXtpZihlbGVtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKXtyZXR1cm4gZWxlbWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShzZWxlY3Rvcik7fWVsc2V7cmV0dXJuW107fX0sY2xvbmU6anFMaXRlQ2xvbmUsdHJpZ2dlckhhbmRsZXI6ZnVuY3Rpb24oZWxlbWVudCxldmVudE5hbWUsZXZlbnREYXRhKXt2YXIgZXZlbnRGbnM9KGpxTGl0ZUV4cGFuZG9TdG9yZShlbGVtZW50LCdldmVudHMnKXx8e30pW2V2ZW50TmFtZV07ZXZlbnREYXRhPWV2ZW50RGF0YXx8W107dmFyIGV2ZW50PVt7cHJldmVudERlZmF1bHQ6bm9vcCxzdG9wUHJvcGFnYXRpb246bm9vcH1dO2ZvckVhY2goZXZlbnRGbnMsZnVuY3Rpb24oZm4pe2ZuLmFwcGx5KGVsZW1lbnQsZXZlbnQuY29uY2F0KGV2ZW50RGF0YSkpO30pO319LGZ1bmN0aW9uKGZuLG5hbWUpe0pRTGl0ZS5wcm90b3R5cGVbbmFtZV09ZnVuY3Rpb24oYXJnMSxhcmcyLGFyZzMpe3ZhciB2YWx1ZTtmb3IodmFyIGk9MDtpPHRoaXMubGVuZ3RoO2krKyl7aWYoaXNVbmRlZmluZWQodmFsdWUpKXt2YWx1ZT1mbih0aGlzW2ldLGFyZzEsYXJnMixhcmczKTtpZihpc0RlZmluZWQodmFsdWUpKXt2YWx1ZT1qcUxpdGUodmFsdWUpO319ZWxzZXtqcUxpdGVBZGROb2Rlcyh2YWx1ZSxmbih0aGlzW2ldLGFyZzEsYXJnMixhcmczKSk7fX0KcmV0dXJuIGlzRGVmaW5lZCh2YWx1ZSk/dmFsdWU6dGhpczt9O0pRTGl0ZS5wcm90b3R5cGUuYmluZD1KUUxpdGUucHJvdG90eXBlLm9uO0pRTGl0ZS5wcm90b3R5cGUudW5iaW5kPUpRTGl0ZS5wcm90b3R5cGUub2ZmO30pO2Z1bmN0aW9uIGhhc2hLZXkob2JqLG5leHRVaWRGbil7dmFyIG9ialR5cGU9dHlwZW9mIG9iaixrZXk7aWYob2JqVHlwZT09J2Z1bmN0aW9uJ3x8KG9ialR5cGU9PSdvYmplY3QnJiZvYmohPT1udWxsKSl7aWYodHlwZW9mKGtleT1vYmouJCRoYXNoS2V5KT09J2Z1bmN0aW9uJyl7a2V5PW9iai4kJGhhc2hLZXkoKTt9ZWxzZSBpZihrZXk9PT11bmRlZmluZWQpe2tleT1vYmouJCRoYXNoS2V5PShuZXh0VWlkRm58fG5leHRVaWQpKCk7fX1lbHNle2tleT1vYmo7fQpyZXR1cm4gb2JqVHlwZSsnOicra2V5O30KZnVuY3Rpb24gSGFzaE1hcChhcnJheSxpc29sYXRlZFVpZCl7aWYoaXNvbGF0ZWRVaWQpe3ZhciB1aWQ9MDt0aGlzLm5leHRVaWQ9ZnVuY3Rpb24oKXtyZXR1cm4rK3VpZDt9O30KZm9yRWFjaChhcnJheSx0aGlzLnB1dCx0aGlzKTt9Ckhhc2hNYXAucHJvdG90eXBlPXtwdXQ6ZnVuY3Rpb24oa2V5LHZhbHVlKXt0aGlzW2hhc2hLZXkoa2V5LHRoaXMubmV4dFVpZCldPXZhbHVlO30sZ2V0OmZ1bmN0aW9uKGtleSl7cmV0dXJuIHRoaXNbaGFzaEtleShrZXksdGhpcy5uZXh0VWlkKV07fSxyZW1vdmU6ZnVuY3Rpb24oa2V5KXt2YXIgdmFsdWU9dGhpc1trZXk9aGFzaEtleShrZXksdGhpcy5uZXh0VWlkKV07ZGVsZXRlIHRoaXNba2V5XTtyZXR1cm4gdmFsdWU7fX07dmFyIEZOX0FSR1M9L15mdW5jdGlvblxzKlteXChdKlwoXHMqKFteXCldKilcKS9tO3ZhciBGTl9BUkdfU1BMSVQ9LywvO3ZhciBGTl9BUkc9L15ccyooXz8pKFxTKz8pXDFccyokLzt2YXIgU1RSSVBfQ09NTUVOVFM9LygoXC9cLy4qJCl8KFwvXCpbXHNcU10qP1wqXC8pKS9tZzt2YXIgJGluamVjdG9yTWluRXJyPW1pbkVycignJGluamVjdG9yJyk7ZnVuY3Rpb24gYW5ub3RhdGUoZm4pe3ZhciAkaW5qZWN0LGZuVGV4dCxhcmdEZWNsLGxhc3Q7aWYodHlwZW9mIGZuPT09J2Z1bmN0aW9uJyl7aWYoISgkaW5qZWN0PWZuLiRpbmplY3QpKXskaW5qZWN0PVtdO2lmKGZuLmxlbmd0aCl7Zm5UZXh0PWZuLnRvU3RyaW5nKCkucmVwbGFjZShTVFJJUF9DT01NRU5UUywnJyk7YXJnRGVjbD1mblRleHQubWF0Y2goRk5fQVJHUyk7Zm9yRWFjaChhcmdEZWNsWzFdLnNwbGl0KEZOX0FSR19TUExJVCksZnVuY3Rpb24oYXJnKXthcmcucmVwbGFjZShGTl9BUkcsZnVuY3Rpb24oYWxsLHVuZGVyc2NvcmUsbmFtZSl7JGluamVjdC5wdXNoKG5hbWUpO30pO30pO30KZm4uJGluamVjdD0kaW5qZWN0O319ZWxzZSBpZihpc0FycmF5KGZuKSl7bGFzdD1mbi5sZW5ndGgtMTthc3NlcnRBcmdGbihmbltsYXN0XSwnZm4nKTskaW5qZWN0PWZuLnNsaWNlKDAsbGFzdCk7fWVsc2V7YXNzZXJ0QXJnRm4oZm4sJ2ZuJyx0cnVlKTt9CnJldHVybiAkaW5qZWN0O30KZnVuY3Rpb24gY3JlYXRlSW5qZWN0b3IobW9kdWxlc1RvTG9hZCl7dmFyIElOU1RBTlRJQVRJTkc9e30scHJvdmlkZXJTdWZmaXg9J1Byb3ZpZGVyJyxwYXRoPVtdLGxvYWRlZE1vZHVsZXM9bmV3IEhhc2hNYXAoW10sdHJ1ZSkscHJvdmlkZXJDYWNoZT17JHByb3ZpZGU6e3Byb3ZpZGVyOnN1cHBvcnRPYmplY3QocHJvdmlkZXIpLGZhY3Rvcnk6c3VwcG9ydE9iamVjdChmYWN0b3J5KSxzZXJ2aWNlOnN1cHBvcnRPYmplY3Qoc2VydmljZSksdmFsdWU6c3VwcG9ydE9iamVjdCh2YWx1ZSksY29uc3RhbnQ6c3VwcG9ydE9iamVjdChjb25zdGFudCksZGVjb3JhdG9yOmRlY29yYXRvcn19LHByb3ZpZGVySW5qZWN0b3I9KHByb3ZpZGVyQ2FjaGUuJGluamVjdG9yPWNyZWF0ZUludGVybmFsSW5qZWN0b3IocHJvdmlkZXJDYWNoZSxmdW5jdGlvbigpe3Rocm93ICRpbmplY3Rvck1pbkVycigndW5wcicsIlVua25vd24gcHJvdmlkZXI6IHswfSIscGF0aC5qb2luKCcgPC0gJykpO30pKSxpbnN0YW5jZUNhY2hlPXt9LGluc3RhbmNlSW5qZWN0b3I9KGluc3RhbmNlQ2FjaGUuJGluamVjdG9yPWNyZWF0ZUludGVybmFsSW5qZWN0b3IoaW5zdGFuY2VDYWNoZSxmdW5jdGlvbihzZXJ2aWNlbmFtZSl7dmFyIHByb3ZpZGVyPXByb3ZpZGVySW5qZWN0b3IuZ2V0KHNlcnZpY2VuYW1lK3Byb3ZpZGVyU3VmZml4KTtyZXR1cm4gaW5zdGFuY2VJbmplY3Rvci5pbnZva2UocHJvdmlkZXIuJGdldCxwcm92aWRlcik7fSkpO2ZvckVhY2gobG9hZE1vZHVsZXMobW9kdWxlc1RvTG9hZCksZnVuY3Rpb24oZm4pe2luc3RhbmNlSW5qZWN0b3IuaW52b2tlKGZufHxub29wKTt9KTtyZXR1cm4gaW5zdGFuY2VJbmplY3RvcjtmdW5jdGlvbiBzdXBwb3J0T2JqZWN0KGRlbGVnYXRlKXtyZXR1cm4gZnVuY3Rpb24oa2V5LHZhbHVlKXtpZihpc09iamVjdChrZXkpKXtmb3JFYWNoKGtleSxyZXZlcnNlUGFyYW1zKGRlbGVnYXRlKSk7fWVsc2V7cmV0dXJuIGRlbGVnYXRlKGtleSx2YWx1ZSk7fX07fQpmdW5jdGlvbiBwcm92aWRlcihuYW1lLHByb3ZpZGVyXyl7YXNzZXJ0Tm90SGFzT3duUHJvcGVydHkobmFtZSwnc2VydmljZScpO2lmKGlzRnVuY3Rpb24ocHJvdmlkZXJfKXx8aXNBcnJheShwcm92aWRlcl8pKXtwcm92aWRlcl89cHJvdmlkZXJJbmplY3Rvci5pbnN0YW50aWF0ZShwcm92aWRlcl8pO30KaWYoIXByb3ZpZGVyXy4kZ2V0KXt0aHJvdyAkaW5qZWN0b3JNaW5FcnIoJ3BnZXQnLCJQcm92aWRlciAnezB9JyBtdXN0IGRlZmluZSAkZ2V0IGZhY3RvcnkgbWV0aG9kLiIsbmFtZSk7fQpyZXR1cm4gcHJvdmlkZXJDYWNoZVtuYW1lK3Byb3ZpZGVyU3VmZml4XT1wcm92aWRlcl87fQpmdW5jdGlvbiBmYWN0b3J5KG5hbWUsZmFjdG9yeUZuKXtyZXR1cm4gcHJvdmlkZXIobmFtZSx7JGdldDpmYWN0b3J5Rm59KTt9CmZ1bmN0aW9uIHNlcnZpY2UobmFtZSxjb25zdHJ1Y3Rvcil7cmV0dXJuIGZhY3RvcnkobmFtZSxbJyRpbmplY3RvcicsZnVuY3Rpb24oJGluamVjdG9yKXtyZXR1cm4gJGluamVjdG9yLmluc3RhbnRpYXRlKGNvbnN0cnVjdG9yKTt9XSk7fQpmdW5jdGlvbiB2YWx1ZShuYW1lLHZhbCl7cmV0dXJuIGZhY3RvcnkobmFtZSx2YWx1ZUZuKHZhbCkpO30KZnVuY3Rpb24gY29uc3RhbnQobmFtZSx2YWx1ZSl7YXNzZXJ0Tm90SGFzT3duUHJvcGVydHkobmFtZSwnY29uc3RhbnQnKTtwcm92aWRlckNhY2hlW25hbWVdPXZhbHVlO2luc3RhbmNlQ2FjaGVbbmFtZV09dmFsdWU7fQpmdW5jdGlvbiBkZWNvcmF0b3Ioc2VydmljZU5hbWUsZGVjb3JGbil7dmFyIG9yaWdQcm92aWRlcj1wcm92aWRlckluamVjdG9yLmdldChzZXJ2aWNlTmFtZStwcm92aWRlclN1ZmZpeCksb3JpZyRnZXQ9b3JpZ1Byb3ZpZGVyLiRnZXQ7b3JpZ1Byb3ZpZGVyLiRnZXQ9ZnVuY3Rpb24oKXt2YXIgb3JpZ0luc3RhbmNlPWluc3RhbmNlSW5qZWN0b3IuaW52b2tlKG9yaWckZ2V0LG9yaWdQcm92aWRlcik7cmV0dXJuIGluc3RhbmNlSW5qZWN0b3IuaW52b2tlKGRlY29yRm4sbnVsbCx7JGRlbGVnYXRlOm9yaWdJbnN0YW5jZX0pO307fQpmdW5jdGlvbiBsb2FkTW9kdWxlcyhtb2R1bGVzVG9Mb2FkKXt2YXIgcnVuQmxvY2tzPVtdLG1vZHVsZUZuLGludm9rZVF1ZXVlLGksaWk7Zm9yRWFjaChtb2R1bGVzVG9Mb2FkLGZ1bmN0aW9uKG1vZHVsZSl7aWYobG9hZGVkTW9kdWxlcy5nZXQobW9kdWxlKSlyZXR1cm47bG9hZGVkTW9kdWxlcy5wdXQobW9kdWxlLHRydWUpO3RyeXtpZihpc1N0cmluZyhtb2R1bGUpKXttb2R1bGVGbj1hbmd1bGFyTW9kdWxlKG1vZHVsZSk7cnVuQmxvY2tzPXJ1bkJsb2Nrcy5jb25jYXQobG9hZE1vZHVsZXMobW9kdWxlRm4ucmVxdWlyZXMpKS5jb25jYXQobW9kdWxlRm4uX3J1bkJsb2Nrcyk7Zm9yKGludm9rZVF1ZXVlPW1vZHVsZUZuLl9pbnZva2VRdWV1ZSxpPTAsaWk9aW52b2tlUXVldWUubGVuZ3RoO2k8aWk7aSsrKXt2YXIgaW52b2tlQXJncz1pbnZva2VRdWV1ZVtpXSxwcm92aWRlcj1wcm92aWRlckluamVjdG9yLmdldChpbnZva2VBcmdzWzBdKTtwcm92aWRlcltpbnZva2VBcmdzWzFdXS5hcHBseShwcm92aWRlcixpbnZva2VBcmdzWzJdKTt9fWVsc2UgaWYoaXNGdW5jdGlvbihtb2R1bGUpKXtydW5CbG9ja3MucHVzaChwcm92aWRlckluamVjdG9yLmludm9rZShtb2R1bGUpKTt9ZWxzZSBpZihpc0FycmF5KG1vZHVsZSkpe3J1bkJsb2Nrcy5wdXNoKHByb3ZpZGVySW5qZWN0b3IuaW52b2tlKG1vZHVsZSkpO31lbHNle2Fzc2VydEFyZ0ZuKG1vZHVsZSwnbW9kdWxlJyk7fX1jYXRjaChlKXtpZihpc0FycmF5KG1vZHVsZSkpe21vZHVsZT1tb2R1bGVbbW9kdWxlLmxlbmd0aC0xXTt9CmlmKGUubWVzc2FnZSYmZS5zdGFjayYmZS5zdGFjay5pbmRleE9mKGUubWVzc2FnZSk9PS0xKXtlPWUubWVzc2FnZSsnXG4nK2Uuc3RhY2s7fQp0aHJvdyAkaW5qZWN0b3JNaW5FcnIoJ21vZHVsZXJyJywiRmFpbGVkIHRvIGluc3RhbnRpYXRlIG1vZHVsZSB7MH0gZHVlIHRvOlxuezF9Iixtb2R1bGUsZS5zdGFja3x8ZS5tZXNzYWdlfHxlKTt9fSk7cmV0dXJuIHJ1bkJsb2Nrczt9CmZ1bmN0aW9uIGNyZWF0ZUludGVybmFsSW5qZWN0b3IoY2FjaGUsZmFjdG9yeSl7ZnVuY3Rpb24gZ2V0U2VydmljZShzZXJ2aWNlTmFtZSl7aWYoY2FjaGUuaGFzT3duUHJvcGVydHkoc2VydmljZU5hbWUpKXtpZihjYWNoZVtzZXJ2aWNlTmFtZV09PT1JTlNUQU5USUFUSU5HKXt0aHJvdyAkaW5qZWN0b3JNaW5FcnIoJ2NkZXAnLCdDaXJjdWxhciBkZXBlbmRlbmN5IGZvdW5kOiB7MH0nLHNlcnZpY2VOYW1lKycgPC0gJytwYXRoLmpvaW4oJyA8LSAnKSk7fQpyZXR1cm4gY2FjaGVbc2VydmljZU5hbWVdO31lbHNle3RyeXtwYXRoLnVuc2hpZnQoc2VydmljZU5hbWUpO2NhY2hlW3NlcnZpY2VOYW1lXT1JTlNUQU5USUFUSU5HO3JldHVybiBjYWNoZVtzZXJ2aWNlTmFtZV09ZmFjdG9yeShzZXJ2aWNlTmFtZSk7fWNhdGNoKGVycil7aWYoY2FjaGVbc2VydmljZU5hbWVdPT09SU5TVEFOVElBVElORyl7ZGVsZXRlIGNhY2hlW3NlcnZpY2VOYW1lXTt9CnRocm93IGVycjt9ZmluYWxseXtwYXRoLnNoaWZ0KCk7fX19CmZ1bmN0aW9uIGludm9rZShmbixzZWxmLGxvY2Fscyl7dmFyIGFyZ3M9W10sJGluamVjdD1hbm5vdGF0ZShmbiksbGVuZ3RoLGksa2V5O2ZvcihpPTAsbGVuZ3RoPSRpbmplY3QubGVuZ3RoO2k8bGVuZ3RoO2krKyl7a2V5PSRpbmplY3RbaV07aWYodHlwZW9mIGtleSE9PSdzdHJpbmcnKXt0aHJvdyAkaW5qZWN0b3JNaW5FcnIoJ2l0a24nLCdJbmNvcnJlY3QgaW5qZWN0aW9uIHRva2VuISBFeHBlY3RlZCBzZXJ2aWNlIG5hbWUgYXMgc3RyaW5nLCBnb3QgezB9JyxrZXkpO30KYXJncy5wdXNoKGxvY2FscyYmbG9jYWxzLmhhc093blByb3BlcnR5KGtleSk/bG9jYWxzW2tleV06Z2V0U2VydmljZShrZXkpKTt9CmlmKGlzQXJyYXkoZm4pKXtmbj1mbltsZW5ndGhdO30KcmV0dXJuIGZuLmFwcGx5KHNlbGYsYXJncyk7fQpmdW5jdGlvbiBpbnN0YW50aWF0ZShUeXBlLGxvY2Fscyl7dmFyIENvbnN0cnVjdG9yPWZ1bmN0aW9uKCl7fSxpbnN0YW5jZSxyZXR1cm5lZFZhbHVlO0NvbnN0cnVjdG9yLnByb3RvdHlwZT0oaXNBcnJheShUeXBlKT9UeXBlW1R5cGUubGVuZ3RoLTFdOlR5cGUpLnByb3RvdHlwZTtpbnN0YW5jZT1uZXcgQ29uc3RydWN0b3IoKTtyZXR1cm5lZFZhbHVlPWludm9rZShUeXBlLGluc3RhbmNlLGxvY2Fscyk7cmV0dXJuIGlzT2JqZWN0KHJldHVybmVkVmFsdWUpfHxpc0Z1bmN0aW9uKHJldHVybmVkVmFsdWUpP3JldHVybmVkVmFsdWU6aW5zdGFuY2U7fQpyZXR1cm57aW52b2tlOmludm9rZSxpbnN0YW50aWF0ZTppbnN0YW50aWF0ZSxnZXQ6Z2V0U2VydmljZSxhbm5vdGF0ZTphbm5vdGF0ZSxoYXM6ZnVuY3Rpb24obmFtZSl7cmV0dXJuIHByb3ZpZGVyQ2FjaGUuaGFzT3duUHJvcGVydHkobmFtZStwcm92aWRlclN1ZmZpeCl8fGNhY2hlLmhhc093blByb3BlcnR5KG5hbWUpO319O319CmZ1bmN0aW9uICRBbmNob3JTY3JvbGxQcm92aWRlcigpe3ZhciBhdXRvU2Nyb2xsaW5nRW5hYmxlZD10cnVlO3RoaXMuZGlzYWJsZUF1dG9TY3JvbGxpbmc9ZnVuY3Rpb24oKXthdXRvU2Nyb2xsaW5nRW5hYmxlZD1mYWxzZTt9O3RoaXMuJGdldD1bJyR3aW5kb3cnLCckbG9jYXRpb24nLCckcm9vdFNjb3BlJyxmdW5jdGlvbigkd2luZG93LCRsb2NhdGlvbiwkcm9vdFNjb3BlKXt2YXIgZG9jdW1lbnQ9JHdpbmRvdy5kb2N1bWVudDtmdW5jdGlvbiBnZXRGaXJzdEFuY2hvcihsaXN0KXt2YXIgcmVzdWx0PW51bGw7Zm9yRWFjaChsaXN0LGZ1bmN0aW9uKGVsZW1lbnQpe2lmKCFyZXN1bHQmJmxvd2VyY2FzZShlbGVtZW50Lm5vZGVOYW1lKT09PSdhJylyZXN1bHQ9ZWxlbWVudDt9KTtyZXR1cm4gcmVzdWx0O30KZnVuY3Rpb24gc2Nyb2xsKCl7dmFyIGhhc2g9JGxvY2F0aW9uLmhhc2goKSxlbG07aWYoIWhhc2gpJHdpbmRvdy5zY3JvbGxUbygwLDApO2Vsc2UgaWYoKGVsbT1kb2N1bWVudC5nZXRFbGVtZW50QnlJZChoYXNoKSkpZWxtLnNjcm9sbEludG9WaWV3KCk7ZWxzZSBpZigoZWxtPWdldEZpcnN0QW5jaG9yKGRvY3VtZW50LmdldEVsZW1lbnRzQnlOYW1lKGhhc2gpKSkpZWxtLnNjcm9sbEludG9WaWV3KCk7ZWxzZSBpZihoYXNoPT09J3RvcCcpJHdpbmRvdy5zY3JvbGxUbygwLDApO30KaWYoYXV0b1Njcm9sbGluZ0VuYWJsZWQpeyRyb290U2NvcGUuJHdhdGNoKGZ1bmN0aW9uIGF1dG9TY3JvbGxXYXRjaCgpe3JldHVybiAkbG9jYXRpb24uaGFzaCgpO30sZnVuY3Rpb24gYXV0b1Njcm9sbFdhdGNoQWN0aW9uKCl7JHJvb3RTY29wZS4kZXZhbEFzeW5jKHNjcm9sbCk7fSk7fQpyZXR1cm4gc2Nyb2xsO31dO30KdmFyICRhbmltYXRlTWluRXJyPW1pbkVycignJGFuaW1hdGUnKTt2YXIgJEFuaW1hdGVQcm92aWRlcj1bJyRwcm92aWRlJyxmdW5jdGlvbigkcHJvdmlkZSl7dGhpcy4kJHNlbGVjdG9ycz17fTt0aGlzLnJlZ2lzdGVyPWZ1bmN0aW9uKG5hbWUsZmFjdG9yeSl7dmFyIGtleT1uYW1lKyctYW5pbWF0aW9uJztpZihuYW1lJiZuYW1lLmNoYXJBdCgwKSE9Jy4nKXRocm93ICRhbmltYXRlTWluRXJyKCdub3Rjc2VsJywiRXhwZWN0aW5nIGNsYXNzIHNlbGVjdG9yIHN0YXJ0aW5nIHdpdGggJy4nIGdvdCAnezB9Jy4iLG5hbWUpO3RoaXMuJCRzZWxlY3RvcnNbbmFtZS5zdWJzdHIoMSldPWtleTskcHJvdmlkZS5mYWN0b3J5KGtleSxmYWN0b3J5KTt9O3RoaXMuY2xhc3NOYW1lRmlsdGVyPWZ1bmN0aW9uKGV4cHJlc3Npb24pe2lmKGFyZ3VtZW50cy5sZW5ndGg9PT0xKXt0aGlzLiQkY2xhc3NOYW1lRmlsdGVyPShleHByZXNzaW9uIGluc3RhbmNlb2YgUmVnRXhwKT9leHByZXNzaW9uOm51bGw7fQpyZXR1cm4gdGhpcy4kJGNsYXNzTmFtZUZpbHRlcjt9O3RoaXMuJGdldD1bJyR0aW1lb3V0JywnJCRhc3luY0NhbGxiYWNrJyxmdW5jdGlvbigkdGltZW91dCwkJGFzeW5jQ2FsbGJhY2spe2Z1bmN0aW9uIGFzeW5jKGZuKXtmbiYmJCRhc3luY0NhbGxiYWNrKGZuKTt9CnJldHVybntlbnRlcjpmdW5jdGlvbihlbGVtZW50LHBhcmVudCxhZnRlcixkb25lKXtpZihhZnRlcil7YWZ0ZXIuYWZ0ZXIoZWxlbWVudCk7fWVsc2V7aWYoIXBhcmVudHx8IXBhcmVudFswXSl7cGFyZW50PWFmdGVyLnBhcmVudCgpO30KcGFyZW50LmFwcGVuZChlbGVtZW50KTt9CmFzeW5jKGRvbmUpO30sbGVhdmU6ZnVuY3Rpb24oZWxlbWVudCxkb25lKXtlbGVtZW50LnJlbW92ZSgpO2FzeW5jKGRvbmUpO30sbW92ZTpmdW5jdGlvbihlbGVtZW50LHBhcmVudCxhZnRlcixkb25lKXt0aGlzLmVudGVyKGVsZW1lbnQscGFyZW50LGFmdGVyLGRvbmUpO30sYWRkQ2xhc3M6ZnVuY3Rpb24oZWxlbWVudCxjbGFzc05hbWUsZG9uZSl7Y2xhc3NOYW1lPWlzU3RyaW5nKGNsYXNzTmFtZSk/Y2xhc3NOYW1lOmlzQXJyYXkoY2xhc3NOYW1lKT9jbGFzc05hbWUuam9pbignICcpOicnO2ZvckVhY2goZWxlbWVudCxmdW5jdGlvbihlbGVtZW50KXtqcUxpdGVBZGRDbGFzcyhlbGVtZW50LGNsYXNzTmFtZSk7fSk7YXN5bmMoZG9uZSk7fSxyZW1vdmVDbGFzczpmdW5jdGlvbihlbGVtZW50LGNsYXNzTmFtZSxkb25lKXtjbGFzc05hbWU9aXNTdHJpbmcoY2xhc3NOYW1lKT9jbGFzc05hbWU6aXNBcnJheShjbGFzc05hbWUpP2NsYXNzTmFtZS5qb2luKCcgJyk6Jyc7Zm9yRWFjaChlbGVtZW50LGZ1bmN0aW9uKGVsZW1lbnQpe2pxTGl0ZVJlbW92ZUNsYXNzKGVsZW1lbnQsY2xhc3NOYW1lKTt9KTthc3luYyhkb25lKTt9LHNldENsYXNzOmZ1bmN0aW9uKGVsZW1lbnQsYWRkLHJlbW92ZSxkb25lKXtmb3JFYWNoKGVsZW1lbnQsZnVuY3Rpb24oZWxlbWVudCl7anFMaXRlQWRkQ2xhc3MoZWxlbWVudCxhZGQpO2pxTGl0ZVJlbW92ZUNsYXNzKGVsZW1lbnQscmVtb3ZlKTt9KTthc3luYyhkb25lKTt9LGVuYWJsZWQ6bm9vcH07fV07fV07ZnVuY3Rpb24gJCRBc3luY0NhbGxiYWNrUHJvdmlkZXIoKXt0aGlzLiRnZXQ9WyckJHJBRicsJyR0aW1lb3V0JyxmdW5jdGlvbigkJHJBRiwkdGltZW91dCl7cmV0dXJuICQkckFGLnN1cHBvcnRlZD9mdW5jdGlvbihmbil7cmV0dXJuICQkckFGKGZuKTt9OmZ1bmN0aW9uKGZuKXtyZXR1cm4gJHRpbWVvdXQoZm4sMCxmYWxzZSk7fTt9XTt9CmZ1bmN0aW9uIEJyb3dzZXIod2luZG93LGRvY3VtZW50LCRsb2csJHNuaWZmZXIpe3ZhciBzZWxmPXRoaXMscmF3RG9jdW1lbnQ9ZG9jdW1lbnRbMF0sbG9jYXRpb249d2luZG93LmxvY2F0aW9uLGhpc3Rvcnk9d2luZG93Lmhpc3Rvcnksc2V0VGltZW91dD13aW5kb3cuc2V0VGltZW91dCxjbGVhclRpbWVvdXQ9d2luZG93LmNsZWFyVGltZW91dCxwZW5kaW5nRGVmZXJJZHM9e307c2VsZi5pc01vY2s9ZmFsc2U7dmFyIG91dHN0YW5kaW5nUmVxdWVzdENvdW50PTA7dmFyIG91dHN0YW5kaW5nUmVxdWVzdENhbGxiYWNrcz1bXTtzZWxmLiQkY29tcGxldGVPdXRzdGFuZGluZ1JlcXVlc3Q9Y29tcGxldGVPdXRzdGFuZGluZ1JlcXVlc3Q7c2VsZi4kJGluY091dHN0YW5kaW5nUmVxdWVzdENvdW50PWZ1bmN0aW9uKCl7b3V0c3RhbmRpbmdSZXF1ZXN0Q291bnQrKzt9O2Z1bmN0aW9uIGNvbXBsZXRlT3V0c3RhbmRpbmdSZXF1ZXN0KGZuKXt0cnl7Zm4uYXBwbHkobnVsbCxzbGljZUFyZ3MoYXJndW1lbnRzLDEpKTt9ZmluYWxseXtvdXRzdGFuZGluZ1JlcXVlc3RDb3VudC0tO2lmKG91dHN0YW5kaW5nUmVxdWVzdENvdW50PT09MCl7d2hpbGUob3V0c3RhbmRpbmdSZXF1ZXN0Q2FsbGJhY2tzLmxlbmd0aCl7dHJ5e291dHN0YW5kaW5nUmVxdWVzdENhbGxiYWNrcy5wb3AoKSgpO31jYXRjaChlKXskbG9nLmVycm9yKGUpO319fX19CnNlbGYubm90aWZ5V2hlbk5vT3V0c3RhbmRpbmdSZXF1ZXN0cz1mdW5jdGlvbihjYWxsYmFjayl7Zm9yRWFjaChwb2xsRm5zLGZ1bmN0aW9uKHBvbGxGbil7cG9sbEZuKCk7fSk7aWYob3V0c3RhbmRpbmdSZXF1ZXN0Q291bnQ9PT0wKXtjYWxsYmFjaygpO31lbHNle291dHN0YW5kaW5nUmVxdWVzdENhbGxiYWNrcy5wdXNoKGNhbGxiYWNrKTt9fTt2YXIgcG9sbEZucz1bXSxwb2xsVGltZW91dDtzZWxmLmFkZFBvbGxGbj1mdW5jdGlvbihmbil7aWYoaXNVbmRlZmluZWQocG9sbFRpbWVvdXQpKXN0YXJ0UG9sbGVyKDEwMCxzZXRUaW1lb3V0KTtwb2xsRm5zLnB1c2goZm4pO3JldHVybiBmbjt9O2Z1bmN0aW9uIHN0YXJ0UG9sbGVyKGludGVydmFsLHNldFRpbWVvdXQpeyhmdW5jdGlvbiBjaGVjaygpe2ZvckVhY2gocG9sbEZucyxmdW5jdGlvbihwb2xsRm4pe3BvbGxGbigpO30pO3BvbGxUaW1lb3V0PXNldFRpbWVvdXQoY2hlY2ssaW50ZXJ2YWwpO30pKCk7fQp2YXIgbGFzdEJyb3dzZXJVcmw9bG9jYXRpb24uaHJlZixiYXNlRWxlbWVudD1kb2N1bWVudC5maW5kKCdiYXNlJyksbmV3TG9jYXRpb249bnVsbDtzZWxmLnVybD1mdW5jdGlvbih1cmwscmVwbGFjZSl7aWYobG9jYXRpb24hPT13aW5kb3cubG9jYXRpb24pbG9jYXRpb249d2luZG93LmxvY2F0aW9uO2lmKGhpc3RvcnkhPT13aW5kb3cuaGlzdG9yeSloaXN0b3J5PXdpbmRvdy5oaXN0b3J5O2lmKHVybCl7aWYobGFzdEJyb3dzZXJVcmw9PXVybClyZXR1cm47bGFzdEJyb3dzZXJVcmw9dXJsO2lmKCRzbmlmZmVyLmhpc3Rvcnkpe2lmKHJlcGxhY2UpaGlzdG9yeS5yZXBsYWNlU3RhdGUobnVsbCwnJyx1cmwpO2Vsc2V7aGlzdG9yeS5wdXNoU3RhdGUobnVsbCwnJyx1cmwpO2Jhc2VFbGVtZW50LmF0dHIoJ2hyZWYnLGJhc2VFbGVtZW50LmF0dHIoJ2hyZWYnKSk7fX1lbHNle25ld0xvY2F0aW9uPXVybDtpZihyZXBsYWNlKXtsb2NhdGlvbi5yZXBsYWNlKHVybCk7fWVsc2V7bG9jYXRpb24uaHJlZj11cmw7fX0KcmV0dXJuIHNlbGY7fWVsc2V7cmV0dXJuIG5ld0xvY2F0aW9ufHxsb2NhdGlvbi5ocmVmLnJlcGxhY2UoLyUyNy9nLCInIik7fX07dmFyIHVybENoYW5nZUxpc3RlbmVycz1bXSx1cmxDaGFuZ2VJbml0PWZhbHNlO2Z1bmN0aW9uIGZpcmVVcmxDaGFuZ2UoKXtuZXdMb2NhdGlvbj1udWxsO2lmKGxhc3RCcm93c2VyVXJsPT1zZWxmLnVybCgpKXJldHVybjtsYXN0QnJvd3NlclVybD1zZWxmLnVybCgpO2ZvckVhY2godXJsQ2hhbmdlTGlzdGVuZXJzLGZ1bmN0aW9uKGxpc3RlbmVyKXtsaXN0ZW5lcihzZWxmLnVybCgpKTt9KTt9CnNlbGYub25VcmxDaGFuZ2U9ZnVuY3Rpb24oY2FsbGJhY2spe2lmKCF1cmxDaGFuZ2VJbml0KXtpZigkc25pZmZlci5oaXN0b3J5KWpxTGl0ZSh3aW5kb3cpLm9uKCdwb3BzdGF0ZScsZmlyZVVybENoYW5nZSk7aWYoJHNuaWZmZXIuaGFzaGNoYW5nZSlqcUxpdGUod2luZG93KS5vbignaGFzaGNoYW5nZScsZmlyZVVybENoYW5nZSk7ZWxzZSBzZWxmLmFkZFBvbGxGbihmaXJlVXJsQ2hhbmdlKTt1cmxDaGFuZ2VJbml0PXRydWU7fQp1cmxDaGFuZ2VMaXN0ZW5lcnMucHVzaChjYWxsYmFjayk7cmV0dXJuIGNhbGxiYWNrO307c2VsZi5iYXNlSHJlZj1mdW5jdGlvbigpe3ZhciBocmVmPWJhc2VFbGVtZW50LmF0dHIoJ2hyZWYnKTtyZXR1cm4gaHJlZj9ocmVmLnJlcGxhY2UoL14oaHR0cHM/XDopP1wvXC9bXlwvXSovLCcnKTonJzt9O3ZhciBsYXN0Q29va2llcz17fTt2YXIgbGFzdENvb2tpZVN0cmluZz0nJzt2YXIgY29va2llUGF0aD1zZWxmLmJhc2VIcmVmKCk7c2VsZi5jb29raWVzPWZ1bmN0aW9uKG5hbWUsdmFsdWUpe3ZhciBjb29raWVMZW5ndGgsY29va2llQXJyYXksY29va2llLGksaW5kZXg7aWYobmFtZSl7aWYodmFsdWU9PT11bmRlZmluZWQpe3Jhd0RvY3VtZW50LmNvb2tpZT1lc2NhcGUobmFtZSkrIj07cGF0aD0iK2Nvb2tpZVBhdGgrIjtleHBpcmVzPVRodSwgMDEgSmFuIDE5NzAgMDA6MDA6MDAgR01UIjt9ZWxzZXtpZihpc1N0cmluZyh2YWx1ZSkpe2Nvb2tpZUxlbmd0aD0ocmF3RG9jdW1lbnQuY29va2llPWVzY2FwZShuYW1lKSsnPScrZXNjYXBlKHZhbHVlKSsnO3BhdGg9Jytjb29raWVQYXRoKS5sZW5ndGgrMTtpZihjb29raWVMZW5ndGg+NDA5Nil7JGxvZy53YXJuKCJDb29raWUgJyIrbmFtZSsiJyBwb3NzaWJseSBub3Qgc2V0IG9yIG92ZXJmbG93ZWQgYmVjYXVzZSBpdCB3YXMgdG9vIGxhcmdlICgiKwpjb29raWVMZW5ndGgrIiA+IDQwOTYgYnl0ZXMpISIpO319fX1lbHNle2lmKHJhd0RvY3VtZW50LmNvb2tpZSE9PWxhc3RDb29raWVTdHJpbmcpe2xhc3RDb29raWVTdHJpbmc9cmF3RG9jdW1lbnQuY29va2llO2Nvb2tpZUFycmF5PWxhc3RDb29raWVTdHJpbmcuc3BsaXQoIjsgIik7bGFzdENvb2tpZXM9e307Zm9yKGk9MDtpPGNvb2tpZUFycmF5Lmxlbmd0aDtpKyspe2Nvb2tpZT1jb29raWVBcnJheVtpXTtpbmRleD1jb29raWUuaW5kZXhPZignPScpO2lmKGluZGV4PjApe25hbWU9dW5lc2NhcGUoY29va2llLnN1YnN0cmluZygwLGluZGV4KSk7aWYobGFzdENvb2tpZXNbbmFtZV09PT11bmRlZmluZWQpe2xhc3RDb29raWVzW25hbWVdPXVuZXNjYXBlKGNvb2tpZS5zdWJzdHJpbmcoaW5kZXgrMSkpO319fX0KcmV0dXJuIGxhc3RDb29raWVzO319O3NlbGYuZGVmZXI9ZnVuY3Rpb24oZm4sZGVsYXkpe3ZhciB0aW1lb3V0SWQ7b3V0c3RhbmRpbmdSZXF1ZXN0Q291bnQrKzt0aW1lb3V0SWQ9c2V0VGltZW91dChmdW5jdGlvbigpe2RlbGV0ZSBwZW5kaW5nRGVmZXJJZHNbdGltZW91dElkXTtjb21wbGV0ZU91dHN0YW5kaW5nUmVxdWVzdChmbik7fSxkZWxheXx8MCk7cGVuZGluZ0RlZmVySWRzW3RpbWVvdXRJZF09dHJ1ZTtyZXR1cm4gdGltZW91dElkO307c2VsZi5kZWZlci5jYW5jZWw9ZnVuY3Rpb24oZGVmZXJJZCl7aWYocGVuZGluZ0RlZmVySWRzW2RlZmVySWRdKXtkZWxldGUgcGVuZGluZ0RlZmVySWRzW2RlZmVySWRdO2NsZWFyVGltZW91dChkZWZlcklkKTtjb21wbGV0ZU91dHN0YW5kaW5nUmVxdWVzdChub29wKTtyZXR1cm4gdHJ1ZTt9CnJldHVybiBmYWxzZTt9O30KZnVuY3Rpb24gJEJyb3dzZXJQcm92aWRlcigpe3RoaXMuJGdldD1bJyR3aW5kb3cnLCckbG9nJywnJHNuaWZmZXInLCckZG9jdW1lbnQnLGZ1bmN0aW9uKCR3aW5kb3csJGxvZywkc25pZmZlciwkZG9jdW1lbnQpe3JldHVybiBuZXcgQnJvd3Nlcigkd2luZG93LCRkb2N1bWVudCwkbG9nLCRzbmlmZmVyKTt9XTt9CmZ1bmN0aW9uICRDYWNoZUZhY3RvcnlQcm92aWRlcigpe3RoaXMuJGdldD1mdW5jdGlvbigpe3ZhciBjYWNoZXM9e307ZnVuY3Rpb24gY2FjaGVGYWN0b3J5KGNhY2hlSWQsb3B0aW9ucyl7aWYoY2FjaGVJZCBpbiBjYWNoZXMpe3Rocm93IG1pbkVycignJGNhY2hlRmFjdG9yeScpKCdpaWQnLCJDYWNoZUlkICd7MH0nIGlzIGFscmVhZHkgdGFrZW4hIixjYWNoZUlkKTt9CnZhciBzaXplPTAsc3RhdHM9ZXh0ZW5kKHt9LG9wdGlvbnMse2lkOmNhY2hlSWR9KSxkYXRhPXt9LGNhcGFjaXR5PShvcHRpb25zJiZvcHRpb25zLmNhcGFjaXR5KXx8TnVtYmVyLk1BWF9WQUxVRSxscnVIYXNoPXt9LGZyZXNoRW5kPW51bGwsc3RhbGVFbmQ9bnVsbDtyZXR1cm4gY2FjaGVzW2NhY2hlSWRdPXtwdXQ6ZnVuY3Rpb24oa2V5LHZhbHVlKXtpZihjYXBhY2l0eTxOdW1iZXIuTUFYX1ZBTFVFKXt2YXIgbHJ1RW50cnk9bHJ1SGFzaFtrZXldfHwobHJ1SGFzaFtrZXldPXtrZXk6a2V5fSk7cmVmcmVzaChscnVFbnRyeSk7fQppZihpc1VuZGVmaW5lZCh2YWx1ZSkpcmV0dXJuO2lmKCEoa2V5IGluIGRhdGEpKXNpemUrKztkYXRhW2tleV09dmFsdWU7aWYoc2l6ZT5jYXBhY2l0eSl7dGhpcy5yZW1vdmUoc3RhbGVFbmQua2V5KTt9CnJldHVybiB2YWx1ZTt9LGdldDpmdW5jdGlvbihrZXkpe2lmKGNhcGFjaXR5PE51bWJlci5NQVhfVkFMVUUpe3ZhciBscnVFbnRyeT1scnVIYXNoW2tleV07aWYoIWxydUVudHJ5KXJldHVybjtyZWZyZXNoKGxydUVudHJ5KTt9CnJldHVybiBkYXRhW2tleV07fSxyZW1vdmU6ZnVuY3Rpb24oa2V5KXtpZihjYXBhY2l0eTxOdW1iZXIuTUFYX1ZBTFVFKXt2YXIgbHJ1RW50cnk9bHJ1SGFzaFtrZXldO2lmKCFscnVFbnRyeSlyZXR1cm47aWYobHJ1RW50cnk9PWZyZXNoRW5kKWZyZXNoRW5kPWxydUVudHJ5LnA7aWYobHJ1RW50cnk9PXN0YWxlRW5kKXN0YWxlRW5kPWxydUVudHJ5Lm47bGluayhscnVFbnRyeS5uLGxydUVudHJ5LnApO2RlbGV0ZSBscnVIYXNoW2tleV07fQpkZWxldGUgZGF0YVtrZXldO3NpemUtLTt9LHJlbW92ZUFsbDpmdW5jdGlvbigpe2RhdGE9e307c2l6ZT0wO2xydUhhc2g9e307ZnJlc2hFbmQ9c3RhbGVFbmQ9bnVsbDt9LGRlc3Ryb3k6ZnVuY3Rpb24oKXtkYXRhPW51bGw7c3RhdHM9bnVsbDtscnVIYXNoPW51bGw7ZGVsZXRlIGNhY2hlc1tjYWNoZUlkXTt9LGluZm86ZnVuY3Rpb24oKXtyZXR1cm4gZXh0ZW5kKHt9LHN0YXRzLHtzaXplOnNpemV9KTt9fTtmdW5jdGlvbiByZWZyZXNoKGVudHJ5KXtpZihlbnRyeSE9ZnJlc2hFbmQpe2lmKCFzdGFsZUVuZCl7c3RhbGVFbmQ9ZW50cnk7fWVsc2UgaWYoc3RhbGVFbmQ9PWVudHJ5KXtzdGFsZUVuZD1lbnRyeS5uO30KbGluayhlbnRyeS5uLGVudHJ5LnApO2xpbmsoZW50cnksZnJlc2hFbmQpO2ZyZXNoRW5kPWVudHJ5O2ZyZXNoRW5kLm49bnVsbDt9fQpmdW5jdGlvbiBsaW5rKG5leHRFbnRyeSxwcmV2RW50cnkpe2lmKG5leHRFbnRyeSE9cHJldkVudHJ5KXtpZihuZXh0RW50cnkpbmV4dEVudHJ5LnA9cHJldkVudHJ5O2lmKHByZXZFbnRyeSlwcmV2RW50cnkubj1uZXh0RW50cnk7fX19CmNhY2hlRmFjdG9yeS5pbmZvPWZ1bmN0aW9uKCl7dmFyIGluZm89e307Zm9yRWFjaChjYWNoZXMsZnVuY3Rpb24oY2FjaGUsY2FjaGVJZCl7aW5mb1tjYWNoZUlkXT1jYWNoZS5pbmZvKCk7fSk7cmV0dXJuIGluZm87fTtjYWNoZUZhY3RvcnkuZ2V0PWZ1bmN0aW9uKGNhY2hlSWQpe3JldHVybiBjYWNoZXNbY2FjaGVJZF07fTtyZXR1cm4gY2FjaGVGYWN0b3J5O307fQpmdW5jdGlvbiAkVGVtcGxhdGVDYWNoZVByb3ZpZGVyKCl7dGhpcy4kZ2V0PVsnJGNhY2hlRmFjdG9yeScsZnVuY3Rpb24oJGNhY2hlRmFjdG9yeSl7cmV0dXJuICRjYWNoZUZhY3RvcnkoJ3RlbXBsYXRlcycpO31dO30KdmFyICRjb21waWxlTWluRXJyPW1pbkVycignJGNvbXBpbGUnKTskQ29tcGlsZVByb3ZpZGVyLiRpbmplY3Q9WyckcHJvdmlkZScsJyQkc2FuaXRpemVVcmlQcm92aWRlciddO2Z1bmN0aW9uICRDb21waWxlUHJvdmlkZXIoJHByb3ZpZGUsJCRzYW5pdGl6ZVVyaVByb3ZpZGVyKXt2YXIgaGFzRGlyZWN0aXZlcz17fSxTdWZmaXg9J0RpcmVjdGl2ZScsQ09NTUVOVF9ESVJFQ1RJVkVfUkVHRVhQPS9eXHMqZGlyZWN0aXZlXDpccyooW1xkXHdfXC1dKylccysoLiopJC8sQ0xBU1NfRElSRUNUSVZFX1JFR0VYUD0vKChbXGRcd19cLV0rKSg/Olw6KFteO10rKSk/Oz8pLzt2YXIgRVZFTlRfSEFORExFUl9BVFRSX1JFR0VYUD0vXihvblthLXpdK3xmb3JtYWN0aW9uKSQvO3RoaXMuZGlyZWN0aXZlPWZ1bmN0aW9uIHJlZ2lzdGVyRGlyZWN0aXZlKG5hbWUsZGlyZWN0aXZlRmFjdG9yeSl7YXNzZXJ0Tm90SGFzT3duUHJvcGVydHkobmFtZSwnZGlyZWN0aXZlJyk7aWYoaXNTdHJpbmcobmFtZSkpe2Fzc2VydEFyZyhkaXJlY3RpdmVGYWN0b3J5LCdkaXJlY3RpdmVGYWN0b3J5Jyk7aWYoIWhhc0RpcmVjdGl2ZXMuaGFzT3duUHJvcGVydHkobmFtZSkpe2hhc0RpcmVjdGl2ZXNbbmFtZV09W107JHByb3ZpZGUuZmFjdG9yeShuYW1lK1N1ZmZpeCxbJyRpbmplY3RvcicsJyRleGNlcHRpb25IYW5kbGVyJyxmdW5jdGlvbigkaW5qZWN0b3IsJGV4Y2VwdGlvbkhhbmRsZXIpe3ZhciBkaXJlY3RpdmVzPVtdO2ZvckVhY2goaGFzRGlyZWN0aXZlc1tuYW1lXSxmdW5jdGlvbihkaXJlY3RpdmVGYWN0b3J5LGluZGV4KXt0cnl7dmFyIGRpcmVjdGl2ZT0kaW5qZWN0b3IuaW52b2tlKGRpcmVjdGl2ZUZhY3RvcnkpO2lmKGlzRnVuY3Rpb24oZGlyZWN0aXZlKSl7ZGlyZWN0aXZlPXtjb21waWxlOnZhbHVlRm4oZGlyZWN0aXZlKX07fWVsc2UgaWYoIWRpcmVjdGl2ZS5jb21waWxlJiZkaXJlY3RpdmUubGluayl7ZGlyZWN0aXZlLmNvbXBpbGU9dmFsdWVGbihkaXJlY3RpdmUubGluayk7fQpkaXJlY3RpdmUucHJpb3JpdHk9ZGlyZWN0aXZlLnByaW9yaXR5fHwwO2RpcmVjdGl2ZS5pbmRleD1pbmRleDtkaXJlY3RpdmUubmFtZT1kaXJlY3RpdmUubmFtZXx8bmFtZTtkaXJlY3RpdmUucmVxdWlyZT1kaXJlY3RpdmUucmVxdWlyZXx8KGRpcmVjdGl2ZS5jb250cm9sbGVyJiZkaXJlY3RpdmUubmFtZSk7ZGlyZWN0aXZlLnJlc3RyaWN0PWRpcmVjdGl2ZS5yZXN0cmljdHx8J0EnO2RpcmVjdGl2ZXMucHVzaChkaXJlY3RpdmUpO31jYXRjaChlKXskZXhjZXB0aW9uSGFuZGxlcihlKTt9fSk7cmV0dXJuIGRpcmVjdGl2ZXM7fV0pO30KaGFzRGlyZWN0aXZlc1tuYW1lXS5wdXNoKGRpcmVjdGl2ZUZhY3RvcnkpO31lbHNle2ZvckVhY2gobmFtZSxyZXZlcnNlUGFyYW1zKHJlZ2lzdGVyRGlyZWN0aXZlKSk7fQpyZXR1cm4gdGhpczt9O3RoaXMuYUhyZWZTYW5pdGl6YXRpb25XaGl0ZWxpc3Q9ZnVuY3Rpb24ocmVnZXhwKXtpZihpc0RlZmluZWQocmVnZXhwKSl7JCRzYW5pdGl6ZVVyaVByb3ZpZGVyLmFIcmVmU2FuaXRpemF0aW9uV2hpdGVsaXN0KHJlZ2V4cCk7cmV0dXJuIHRoaXM7fWVsc2V7cmV0dXJuICQkc2FuaXRpemVVcmlQcm92aWRlci5hSHJlZlNhbml0aXphdGlvbldoaXRlbGlzdCgpO319O3RoaXMuaW1nU3JjU2FuaXRpemF0aW9uV2hpdGVsaXN0PWZ1bmN0aW9uKHJlZ2V4cCl7aWYoaXNEZWZpbmVkKHJlZ2V4cCkpeyQkc2FuaXRpemVVcmlQcm92aWRlci5pbWdTcmNTYW5pdGl6YXRpb25XaGl0ZWxpc3QocmVnZXhwKTtyZXR1cm4gdGhpczt9ZWxzZXtyZXR1cm4gJCRzYW5pdGl6ZVVyaVByb3ZpZGVyLmltZ1NyY1Nhbml0aXphdGlvbldoaXRlbGlzdCgpO319O3RoaXMuJGdldD1bJyRpbmplY3RvcicsJyRpbnRlcnBvbGF0ZScsJyRleGNlcHRpb25IYW5kbGVyJywnJGh0dHAnLCckdGVtcGxhdGVDYWNoZScsJyRwYXJzZScsJyRjb250cm9sbGVyJywnJHJvb3RTY29wZScsJyRkb2N1bWVudCcsJyRzY2UnLCckYW5pbWF0ZScsJyQkc2FuaXRpemVVcmknLGZ1bmN0aW9uKCRpbmplY3RvciwkaW50ZXJwb2xhdGUsJGV4Y2VwdGlvbkhhbmRsZXIsJGh0dHAsJHRlbXBsYXRlQ2FjaGUsJHBhcnNlLCRjb250cm9sbGVyLCRyb290U2NvcGUsJGRvY3VtZW50LCRzY2UsJGFuaW1hdGUsJCRzYW5pdGl6ZVVyaSl7dmFyIEF0dHJpYnV0ZXM9ZnVuY3Rpb24oZWxlbWVudCxhdHRyKXt0aGlzLiQkZWxlbWVudD1lbGVtZW50O3RoaXMuJGF0dHI9YXR0cnx8e307fTtBdHRyaWJ1dGVzLnByb3RvdHlwZT17JG5vcm1hbGl6ZTpkaXJlY3RpdmVOb3JtYWxpemUsJGFkZENsYXNzOmZ1bmN0aW9uKGNsYXNzVmFsKXtpZihjbGFzc1ZhbCYmY2xhc3NWYWwubGVuZ3RoPjApeyRhbmltYXRlLmFkZENsYXNzKHRoaXMuJCRlbGVtZW50LGNsYXNzVmFsKTt9fSwkcmVtb3ZlQ2xhc3M6ZnVuY3Rpb24oY2xhc3NWYWwpe2lmKGNsYXNzVmFsJiZjbGFzc1ZhbC5sZW5ndGg+MCl7JGFuaW1hdGUucmVtb3ZlQ2xhc3ModGhpcy4kJGVsZW1lbnQsY2xhc3NWYWwpO319LCR1cGRhdGVDbGFzczpmdW5jdGlvbihuZXdDbGFzc2VzLG9sZENsYXNzZXMpe3ZhciB0b0FkZD10b2tlbkRpZmZlcmVuY2UobmV3Q2xhc3NlcyxvbGRDbGFzc2VzKTt2YXIgdG9SZW1vdmU9dG9rZW5EaWZmZXJlbmNlKG9sZENsYXNzZXMsbmV3Q2xhc3Nlcyk7aWYodG9BZGQubGVuZ3RoPT09MCl7JGFuaW1hdGUucmVtb3ZlQ2xhc3ModGhpcy4kJGVsZW1lbnQsdG9SZW1vdmUpO31lbHNlIGlmKHRvUmVtb3ZlLmxlbmd0aD09PTApeyRhbmltYXRlLmFkZENsYXNzKHRoaXMuJCRlbGVtZW50LHRvQWRkKTt9ZWxzZXskYW5pbWF0ZS5zZXRDbGFzcyh0aGlzLiQkZWxlbWVudCx0b0FkZCx0b1JlbW92ZSk7fX0sJHNldDpmdW5jdGlvbihrZXksdmFsdWUsd3JpdGVBdHRyLGF0dHJOYW1lKXt2YXIgYm9vbGVhbktleT1nZXRCb29sZWFuQXR0ck5hbWUodGhpcy4kJGVsZW1lbnRbMF0sa2V5KSxub3JtYWxpemVkVmFsLG5vZGVOYW1lO2lmKGJvb2xlYW5LZXkpe3RoaXMuJCRlbGVtZW50LnByb3Aoa2V5LHZhbHVlKTthdHRyTmFtZT1ib29sZWFuS2V5O30KdGhpc1trZXldPXZhbHVlO2lmKGF0dHJOYW1lKXt0aGlzLiRhdHRyW2tleV09YXR0ck5hbWU7fWVsc2V7YXR0ck5hbWU9dGhpcy4kYXR0cltrZXldO2lmKCFhdHRyTmFtZSl7dGhpcy4kYXR0cltrZXldPWF0dHJOYW1lPXNuYWtlX2Nhc2Uoa2V5LCctJyk7fX0Kbm9kZU5hbWU9bm9kZU5hbWVfKHRoaXMuJCRlbGVtZW50KTtpZigobm9kZU5hbWU9PT0nQScmJmtleT09PSdocmVmJyl8fChub2RlTmFtZT09PSdJTUcnJiZrZXk9PT0nc3JjJykpe3RoaXNba2V5XT12YWx1ZT0kJHNhbml0aXplVXJpKHZhbHVlLGtleT09PSdzcmMnKTt9CmlmKHdyaXRlQXR0ciE9PWZhbHNlKXtpZih2YWx1ZT09PW51bGx8fHZhbHVlPT09dW5kZWZpbmVkKXt0aGlzLiQkZWxlbWVudC5yZW1vdmVBdHRyKGF0dHJOYW1lKTt9ZWxzZXt0aGlzLiQkZWxlbWVudC5hdHRyKGF0dHJOYW1lLHZhbHVlKTt9fQp2YXIgJCRvYnNlcnZlcnM9dGhpcy4kJG9ic2VydmVyczskJG9ic2VydmVycyYmZm9yRWFjaCgkJG9ic2VydmVyc1trZXldLGZ1bmN0aW9uKGZuKXt0cnl7Zm4odmFsdWUpO31jYXRjaChlKXskZXhjZXB0aW9uSGFuZGxlcihlKTt9fSk7fSwkb2JzZXJ2ZTpmdW5jdGlvbihrZXksZm4pe3ZhciBhdHRycz10aGlzLCQkb2JzZXJ2ZXJzPShhdHRycy4kJG9ic2VydmVyc3x8KGF0dHJzLiQkb2JzZXJ2ZXJzPXt9KSksbGlzdGVuZXJzPSgkJG9ic2VydmVyc1trZXldfHwoJCRvYnNlcnZlcnNba2V5XT1bXSkpO2xpc3RlbmVycy5wdXNoKGZuKTskcm9vdFNjb3BlLiRldmFsQXN5bmMoZnVuY3Rpb24oKXtpZighbGlzdGVuZXJzLiQkaW50ZXIpe2ZuKGF0dHJzW2tleV0pO319KTtyZXR1cm4gZm47fX07dmFyIHN0YXJ0U3ltYm9sPSRpbnRlcnBvbGF0ZS5zdGFydFN5bWJvbCgpLGVuZFN5bWJvbD0kaW50ZXJwb2xhdGUuZW5kU3ltYm9sKCksZGVub3JtYWxpemVUZW1wbGF0ZT0oc3RhcnRTeW1ib2w9PSd7eyd8fGVuZFN5bWJvbD09J319Jyk/aWRlbnRpdHk6ZnVuY3Rpb24gZGVub3JtYWxpemVUZW1wbGF0ZSh0ZW1wbGF0ZSl7cmV0dXJuIHRlbXBsYXRlLnJlcGxhY2UoL1x7XHsvZyxzdGFydFN5bWJvbCkucmVwbGFjZSgvfX0vZyxlbmRTeW1ib2wpO30sTkdfQVRUUl9CSU5ESU5HPS9ebmdBdHRyW0EtWl0vO3JldHVybiBjb21waWxlO2Z1bmN0aW9uIGNvbXBpbGUoJGNvbXBpbGVOb2Rlcyx0cmFuc2NsdWRlRm4sbWF4UHJpb3JpdHksaWdub3JlRGlyZWN0aXZlLHByZXZpb3VzQ29tcGlsZUNvbnRleHQpe2lmKCEoJGNvbXBpbGVOb2RlcyBpbnN0YW5jZW9mIGpxTGl0ZSkpeyRjb21waWxlTm9kZXM9anFMaXRlKCRjb21waWxlTm9kZXMpO30KZm9yRWFjaCgkY29tcGlsZU5vZGVzLGZ1bmN0aW9uKG5vZGUsaW5kZXgpe2lmKG5vZGUubm9kZVR5cGU9PTMmJm5vZGUubm9kZVZhbHVlLm1hdGNoKC9cUysvKSl7JGNvbXBpbGVOb2Rlc1tpbmRleF09bm9kZT1qcUxpdGUobm9kZSkud3JhcCgnPHNwYW4+PC9zcGFuPicpLnBhcmVudCgpWzBdO319KTt2YXIgY29tcG9zaXRlTGlua0ZuPWNvbXBpbGVOb2RlcygkY29tcGlsZU5vZGVzLHRyYW5zY2x1ZGVGbiwkY29tcGlsZU5vZGVzLG1heFByaW9yaXR5LGlnbm9yZURpcmVjdGl2ZSxwcmV2aW91c0NvbXBpbGVDb250ZXh0KTtzYWZlQWRkQ2xhc3MoJGNvbXBpbGVOb2Rlcywnbmctc2NvcGUnKTtyZXR1cm4gZnVuY3Rpb24gcHVibGljTGlua0ZuKHNjb3BlLGNsb25lQ29ubmVjdEZuLHRyYW5zY2x1ZGVDb250cm9sbGVycyxwYXJlbnRCb3VuZFRyYW5zY2x1ZGVGbil7YXNzZXJ0QXJnKHNjb3BlLCdzY29wZScpO3ZhciAkbGlua05vZGU9Y2xvbmVDb25uZWN0Rm4/SlFMaXRlUHJvdG90eXBlLmNsb25lLmNhbGwoJGNvbXBpbGVOb2Rlcyk6JGNvbXBpbGVOb2Rlcztmb3JFYWNoKHRyYW5zY2x1ZGVDb250cm9sbGVycyxmdW5jdGlvbihpbnN0YW5jZSxuYW1lKXskbGlua05vZGUuZGF0YSgnJCcrbmFtZSsnQ29udHJvbGxlcicsaW5zdGFuY2UpO30pO2Zvcih2YXIgaT0wLGlpPSRsaW5rTm9kZS5sZW5ndGg7aTxpaTtpKyspe3ZhciBub2RlPSRsaW5rTm9kZVtpXSxub2RlVHlwZT1ub2RlLm5vZGVUeXBlO2lmKG5vZGVUeXBlPT09MXx8bm9kZVR5cGU9PT05KXskbGlua05vZGUuZXEoaSkuZGF0YSgnJHNjb3BlJyxzY29wZSk7fX0KaWYoY2xvbmVDb25uZWN0Rm4pY2xvbmVDb25uZWN0Rm4oJGxpbmtOb2RlLHNjb3BlKTtpZihjb21wb3NpdGVMaW5rRm4pY29tcG9zaXRlTGlua0ZuKHNjb3BlLCRsaW5rTm9kZSwkbGlua05vZGUscGFyZW50Qm91bmRUcmFuc2NsdWRlRm4pO3JldHVybiAkbGlua05vZGU7fTt9CmZ1bmN0aW9uIHNhZmVBZGRDbGFzcygkZWxlbWVudCxjbGFzc05hbWUpe3RyeXskZWxlbWVudC5hZGRDbGFzcyhjbGFzc05hbWUpO31jYXRjaChlKXt9fQpmdW5jdGlvbiBjb21waWxlTm9kZXMobm9kZUxpc3QsdHJhbnNjbHVkZUZuLCRyb290RWxlbWVudCxtYXhQcmlvcml0eSxpZ25vcmVEaXJlY3RpdmUscHJldmlvdXNDb21waWxlQ29udGV4dCl7dmFyIGxpbmtGbnM9W10sYXR0cnMsZGlyZWN0aXZlcyxub2RlTGlua0ZuLGNoaWxkTm9kZXMsY2hpbGRMaW5rRm4sbGlua0ZuRm91bmQ7Zm9yKHZhciBpPTA7aTxub2RlTGlzdC5sZW5ndGg7aSsrKXthdHRycz1uZXcgQXR0cmlidXRlcygpO2RpcmVjdGl2ZXM9Y29sbGVjdERpcmVjdGl2ZXMobm9kZUxpc3RbaV0sW10sYXR0cnMsaT09PTA/bWF4UHJpb3JpdHk6dW5kZWZpbmVkLGlnbm9yZURpcmVjdGl2ZSk7bm9kZUxpbmtGbj0oZGlyZWN0aXZlcy5sZW5ndGgpP2FwcGx5RGlyZWN0aXZlc1RvTm9kZShkaXJlY3RpdmVzLG5vZGVMaXN0W2ldLGF0dHJzLHRyYW5zY2x1ZGVGbiwkcm9vdEVsZW1lbnQsbnVsbCxbXSxbXSxwcmV2aW91c0NvbXBpbGVDb250ZXh0KTpudWxsO2lmKG5vZGVMaW5rRm4mJm5vZGVMaW5rRm4uc2NvcGUpe3NhZmVBZGRDbGFzcyhqcUxpdGUobm9kZUxpc3RbaV0pLCduZy1zY29wZScpO30KY2hpbGRMaW5rRm49KG5vZGVMaW5rRm4mJm5vZGVMaW5rRm4udGVybWluYWx8fCEoY2hpbGROb2Rlcz1ub2RlTGlzdFtpXS5jaGlsZE5vZGVzKXx8IWNoaWxkTm9kZXMubGVuZ3RoKT9udWxsOmNvbXBpbGVOb2RlcyhjaGlsZE5vZGVzLG5vZGVMaW5rRm4/KChub2RlTGlua0ZuLnRyYW5zY2x1ZGVPblRoaXNFbGVtZW50fHwhbm9kZUxpbmtGbi50ZW1wbGF0ZU9uVGhpc0VsZW1lbnQpJiZub2RlTGlua0ZuLnRyYW5zY2x1ZGUpOnRyYW5zY2x1ZGVGbik7bGlua0Zucy5wdXNoKG5vZGVMaW5rRm4sY2hpbGRMaW5rRm4pO2xpbmtGbkZvdW5kPWxpbmtGbkZvdW5kfHxub2RlTGlua0ZufHxjaGlsZExpbmtGbjtwcmV2aW91c0NvbXBpbGVDb250ZXh0PW51bGw7fQpyZXR1cm4gbGlua0ZuRm91bmQ/Y29tcG9zaXRlTGlua0ZuOm51bGw7ZnVuY3Rpb24gY29tcG9zaXRlTGlua0ZuKHNjb3BlLG5vZGVMaXN0LCRyb290RWxlbWVudCxwYXJlbnRCb3VuZFRyYW5zY2x1ZGVGbil7dmFyIG5vZGVMaW5rRm4sY2hpbGRMaW5rRm4sbm9kZSwkbm9kZSxjaGlsZFNjb3BlLGksaWksbixjaGlsZEJvdW5kVHJhbnNjbHVkZUZuO3ZhciBub2RlTGlzdExlbmd0aD1ub2RlTGlzdC5sZW5ndGgsc3RhYmxlTm9kZUxpc3Q9bmV3IEFycmF5KG5vZGVMaXN0TGVuZ3RoKTtmb3IoaT0wO2k8bm9kZUxpc3RMZW5ndGg7aSsrKXtzdGFibGVOb2RlTGlzdFtpXT1ub2RlTGlzdFtpXTt9CmZvcihpPTAsbj0wLGlpPWxpbmtGbnMubGVuZ3RoO2k8aWk7bisrKXtub2RlPXN0YWJsZU5vZGVMaXN0W25dO25vZGVMaW5rRm49bGlua0Zuc1tpKytdO2NoaWxkTGlua0ZuPWxpbmtGbnNbaSsrXTskbm9kZT1qcUxpdGUobm9kZSk7aWYobm9kZUxpbmtGbil7aWYobm9kZUxpbmtGbi5zY29wZSl7Y2hpbGRTY29wZT1zY29wZS4kbmV3KCk7JG5vZGUuZGF0YSgnJHNjb3BlJyxjaGlsZFNjb3BlKTt9ZWxzZXtjaGlsZFNjb3BlPXNjb3BlO30KaWYobm9kZUxpbmtGbi50cmFuc2NsdWRlT25UaGlzRWxlbWVudCl7Y2hpbGRCb3VuZFRyYW5zY2x1ZGVGbj1jcmVhdGVCb3VuZFRyYW5zY2x1ZGVGbihzY29wZSxub2RlTGlua0ZuLnRyYW5zY2x1ZGUscGFyZW50Qm91bmRUcmFuc2NsdWRlRm4pO31lbHNlIGlmKCFub2RlTGlua0ZuLnRlbXBsYXRlT25UaGlzRWxlbWVudCYmcGFyZW50Qm91bmRUcmFuc2NsdWRlRm4pe2NoaWxkQm91bmRUcmFuc2NsdWRlRm49cGFyZW50Qm91bmRUcmFuc2NsdWRlRm47fWVsc2UgaWYoIXBhcmVudEJvdW5kVHJhbnNjbHVkZUZuJiZ0cmFuc2NsdWRlRm4pe2NoaWxkQm91bmRUcmFuc2NsdWRlRm49Y3JlYXRlQm91bmRUcmFuc2NsdWRlRm4oc2NvcGUsdHJhbnNjbHVkZUZuKTt9ZWxzZXtjaGlsZEJvdW5kVHJhbnNjbHVkZUZuPW51bGw7fQpub2RlTGlua0ZuKGNoaWxkTGlua0ZuLGNoaWxkU2NvcGUsbm9kZSwkcm9vdEVsZW1lbnQsY2hpbGRCb3VuZFRyYW5zY2x1ZGVGbik7fWVsc2UgaWYoY2hpbGRMaW5rRm4pe2NoaWxkTGlua0ZuKHNjb3BlLG5vZGUuY2hpbGROb2Rlcyx1bmRlZmluZWQscGFyZW50Qm91bmRUcmFuc2NsdWRlRm4pO319fX0KZnVuY3Rpb24gY3JlYXRlQm91bmRUcmFuc2NsdWRlRm4oc2NvcGUsdHJhbnNjbHVkZUZuLHByZXZpb3VzQm91bmRUcmFuc2NsdWRlRm4pe3ZhciBib3VuZFRyYW5zY2x1ZGVGbj1mdW5jdGlvbih0cmFuc2NsdWRlZFNjb3BlLGNsb25lRm4sY29udHJvbGxlcnMpe3ZhciBzY29wZUNyZWF0ZWQ9ZmFsc2U7aWYoIXRyYW5zY2x1ZGVkU2NvcGUpe3RyYW5zY2x1ZGVkU2NvcGU9c2NvcGUuJG5ldygpO3RyYW5zY2x1ZGVkU2NvcGUuJCR0cmFuc2NsdWRlZD10cnVlO3Njb3BlQ3JlYXRlZD10cnVlO30KdmFyIGNsb25lPXRyYW5zY2x1ZGVGbih0cmFuc2NsdWRlZFNjb3BlLGNsb25lRm4sY29udHJvbGxlcnMscHJldmlvdXNCb3VuZFRyYW5zY2x1ZGVGbik7aWYoc2NvcGVDcmVhdGVkKXtjbG9uZS5vbignJGRlc3Ryb3knLGZ1bmN0aW9uKCl7dHJhbnNjbHVkZWRTY29wZS4kZGVzdHJveSgpO30pO30KcmV0dXJuIGNsb25lO307cmV0dXJuIGJvdW5kVHJhbnNjbHVkZUZuO30KZnVuY3Rpb24gY29sbGVjdERpcmVjdGl2ZXMobm9kZSxkaXJlY3RpdmVzLGF0dHJzLG1heFByaW9yaXR5LGlnbm9yZURpcmVjdGl2ZSl7dmFyIG5vZGVUeXBlPW5vZGUubm9kZVR5cGUsYXR0cnNNYXA9YXR0cnMuJGF0dHIsbWF0Y2gsY2xhc3NOYW1lO3N3aXRjaChub2RlVHlwZSl7Y2FzZSAxOmFkZERpcmVjdGl2ZShkaXJlY3RpdmVzLGRpcmVjdGl2ZU5vcm1hbGl6ZShub2RlTmFtZV8obm9kZSkudG9Mb3dlckNhc2UoKSksJ0UnLG1heFByaW9yaXR5LGlnbm9yZURpcmVjdGl2ZSk7Zm9yKHZhciBhdHRyLG5hbWUsbk5hbWUsbmdBdHRyTmFtZSx2YWx1ZSxpc05nQXR0cixuQXR0cnM9bm9kZS5hdHRyaWJ1dGVzLGo9MCxqaj1uQXR0cnMmJm5BdHRycy5sZW5ndGg7ajxqajtqKyspe3ZhciBhdHRyU3RhcnROYW1lPWZhbHNlO3ZhciBhdHRyRW5kTmFtZT1mYWxzZTthdHRyPW5BdHRyc1tqXTtpZighbXNpZXx8bXNpZT49OHx8YXR0ci5zcGVjaWZpZWQpe25hbWU9YXR0ci5uYW1lO3ZhbHVlPXRyaW0oYXR0ci52YWx1ZSk7bmdBdHRyTmFtZT1kaXJlY3RpdmVOb3JtYWxpemUobmFtZSk7aWYoaXNOZ0F0dHI9TkdfQVRUUl9CSU5ESU5HLnRlc3QobmdBdHRyTmFtZSkpe25hbWU9c25ha2VfY2FzZShuZ0F0dHJOYW1lLnN1YnN0cig2KSwnLScpO30KdmFyIGRpcmVjdGl2ZU5OYW1lPW5nQXR0ck5hbWUucmVwbGFjZSgvKFN0YXJ0fEVuZCkkLywnJyk7aWYobmdBdHRyTmFtZT09PWRpcmVjdGl2ZU5OYW1lKydTdGFydCcpe2F0dHJTdGFydE5hbWU9bmFtZTthdHRyRW5kTmFtZT1uYW1lLnN1YnN0cigwLG5hbWUubGVuZ3RoLTUpKydlbmQnO25hbWU9bmFtZS5zdWJzdHIoMCxuYW1lLmxlbmd0aC02KTt9Cm5OYW1lPWRpcmVjdGl2ZU5vcm1hbGl6ZShuYW1lLnRvTG93ZXJDYXNlKCkpO2F0dHJzTWFwW25OYW1lXT1uYW1lO2lmKGlzTmdBdHRyfHwhYXR0cnMuaGFzT3duUHJvcGVydHkobk5hbWUpKXthdHRyc1tuTmFtZV09dmFsdWU7aWYoZ2V0Qm9vbGVhbkF0dHJOYW1lKG5vZGUsbk5hbWUpKXthdHRyc1tuTmFtZV09dHJ1ZTt9fQphZGRBdHRySW50ZXJwb2xhdGVEaXJlY3RpdmUobm9kZSxkaXJlY3RpdmVzLHZhbHVlLG5OYW1lKTthZGREaXJlY3RpdmUoZGlyZWN0aXZlcyxuTmFtZSwnQScsbWF4UHJpb3JpdHksaWdub3JlRGlyZWN0aXZlLGF0dHJTdGFydE5hbWUsYXR0ckVuZE5hbWUpO319CmNsYXNzTmFtZT1ub2RlLmNsYXNzTmFtZTtpZihpc1N0cmluZyhjbGFzc05hbWUpJiZjbGFzc05hbWUhPT0nJyl7d2hpbGUobWF0Y2g9Q0xBU1NfRElSRUNUSVZFX1JFR0VYUC5leGVjKGNsYXNzTmFtZSkpe25OYW1lPWRpcmVjdGl2ZU5vcm1hbGl6ZShtYXRjaFsyXSk7aWYoYWRkRGlyZWN0aXZlKGRpcmVjdGl2ZXMsbk5hbWUsJ0MnLG1heFByaW9yaXR5LGlnbm9yZURpcmVjdGl2ZSkpe2F0dHJzW25OYW1lXT10cmltKG1hdGNoWzNdKTt9CmNsYXNzTmFtZT1jbGFzc05hbWUuc3Vic3RyKG1hdGNoLmluZGV4K21hdGNoWzBdLmxlbmd0aCk7fX0KYnJlYWs7Y2FzZSAzOmFkZFRleHRJbnRlcnBvbGF0ZURpcmVjdGl2ZShkaXJlY3RpdmVzLG5vZGUubm9kZVZhbHVlKTticmVhaztjYXNlIDg6dHJ5e21hdGNoPUNPTU1FTlRfRElSRUNUSVZFX1JFR0VYUC5leGVjKG5vZGUubm9kZVZhbHVlKTtpZihtYXRjaCl7bk5hbWU9ZGlyZWN0aXZlTm9ybWFsaXplKG1hdGNoWzFdKTtpZihhZGREaXJlY3RpdmUoZGlyZWN0aXZlcyxuTmFtZSwnTScsbWF4UHJpb3JpdHksaWdub3JlRGlyZWN0aXZlKSl7YXR0cnNbbk5hbWVdPXRyaW0obWF0Y2hbMl0pO319fWNhdGNoKGUpe30KYnJlYWs7fQpkaXJlY3RpdmVzLnNvcnQoYnlQcmlvcml0eSk7cmV0dXJuIGRpcmVjdGl2ZXM7fQpmdW5jdGlvbiBncm91cFNjYW4obm9kZSxhdHRyU3RhcnQsYXR0ckVuZCl7dmFyIG5vZGVzPVtdO3ZhciBkZXB0aD0wO2lmKGF0dHJTdGFydCYmbm9kZS5oYXNBdHRyaWJ1dGUmJm5vZGUuaGFzQXR0cmlidXRlKGF0dHJTdGFydCkpe3ZhciBzdGFydE5vZGU9bm9kZTtkb3tpZighbm9kZSl7dGhyb3cgJGNvbXBpbGVNaW5FcnIoJ3V0ZXJkaXInLCJVbnRlcm1pbmF0ZWQgYXR0cmlidXRlLCBmb3VuZCAnezB9JyBidXQgbm8gbWF0Y2hpbmcgJ3sxfScgZm91bmQuIixhdHRyU3RhcnQsYXR0ckVuZCk7fQppZihub2RlLm5vZGVUeXBlPT0xKXtpZihub2RlLmhhc0F0dHJpYnV0ZShhdHRyU3RhcnQpKWRlcHRoKys7aWYobm9kZS5oYXNBdHRyaWJ1dGUoYXR0ckVuZCkpZGVwdGgtLTt9Cm5vZGVzLnB1c2gobm9kZSk7bm9kZT1ub2RlLm5leHRTaWJsaW5nO313aGlsZShkZXB0aD4wKTt9ZWxzZXtub2Rlcy5wdXNoKG5vZGUpO30KcmV0dXJuIGpxTGl0ZShub2Rlcyk7fQpmdW5jdGlvbiBncm91cEVsZW1lbnRzTGlua0ZuV3JhcHBlcihsaW5rRm4sYXR0clN0YXJ0LGF0dHJFbmQpe3JldHVybiBmdW5jdGlvbihzY29wZSxlbGVtZW50LGF0dHJzLGNvbnRyb2xsZXJzLHRyYW5zY2x1ZGVGbil7ZWxlbWVudD1ncm91cFNjYW4oZWxlbWVudFswXSxhdHRyU3RhcnQsYXR0ckVuZCk7cmV0dXJuIGxpbmtGbihzY29wZSxlbGVtZW50LGF0dHJzLGNvbnRyb2xsZXJzLHRyYW5zY2x1ZGVGbik7fTt9CmZ1bmN0aW9uIGFwcGx5RGlyZWN0aXZlc1RvTm9kZShkaXJlY3RpdmVzLGNvbXBpbGVOb2RlLHRlbXBsYXRlQXR0cnMsdHJhbnNjbHVkZUZuLGpxQ29sbGVjdGlvbixvcmlnaW5hbFJlcGxhY2VEaXJlY3RpdmUscHJlTGlua0Zucyxwb3N0TGlua0ZucyxwcmV2aW91c0NvbXBpbGVDb250ZXh0KXtwcmV2aW91c0NvbXBpbGVDb250ZXh0PXByZXZpb3VzQ29tcGlsZUNvbnRleHR8fHt9O3ZhciB0ZXJtaW5hbFByaW9yaXR5PS1OdW1iZXIuTUFYX1ZBTFVFLG5ld1Njb3BlRGlyZWN0aXZlLGNvbnRyb2xsZXJEaXJlY3RpdmVzPXByZXZpb3VzQ29tcGlsZUNvbnRleHQuY29udHJvbGxlckRpcmVjdGl2ZXMsbmV3SXNvbGF0ZVNjb3BlRGlyZWN0aXZlPXByZXZpb3VzQ29tcGlsZUNvbnRleHQubmV3SXNvbGF0ZVNjb3BlRGlyZWN0aXZlLHRlbXBsYXRlRGlyZWN0aXZlPXByZXZpb3VzQ29tcGlsZUNvbnRleHQudGVtcGxhdGVEaXJlY3RpdmUsbm9uVGxiVHJhbnNjbHVkZURpcmVjdGl2ZT1wcmV2aW91c0NvbXBpbGVDb250ZXh0Lm5vblRsYlRyYW5zY2x1ZGVEaXJlY3RpdmUsaGFzVHJhbnNjbHVkZURpcmVjdGl2ZT1mYWxzZSxoYXNUZW1wbGF0ZT1mYWxzZSxoYXNFbGVtZW50VHJhbnNjbHVkZURpcmVjdGl2ZT1wcmV2aW91c0NvbXBpbGVDb250ZXh0Lmhhc0VsZW1lbnRUcmFuc2NsdWRlRGlyZWN0aXZlLCRjb21waWxlTm9kZT10ZW1wbGF0ZUF0dHJzLiQkZWxlbWVudD1qcUxpdGUoY29tcGlsZU5vZGUpLGRpcmVjdGl2ZSxkaXJlY3RpdmVOYW1lLCR0ZW1wbGF0ZSxyZXBsYWNlRGlyZWN0aXZlPW9yaWdpbmFsUmVwbGFjZURpcmVjdGl2ZSxjaGlsZFRyYW5zY2x1ZGVGbj10cmFuc2NsdWRlRm4sbGlua0ZuLGRpcmVjdGl2ZVZhbHVlO2Zvcih2YXIgaT0wLGlpPWRpcmVjdGl2ZXMubGVuZ3RoO2k8aWk7aSsrKXtkaXJlY3RpdmU9ZGlyZWN0aXZlc1tpXTt2YXIgYXR0clN0YXJ0PWRpcmVjdGl2ZS4kJHN0YXJ0O3ZhciBhdHRyRW5kPWRpcmVjdGl2ZS4kJGVuZDtpZihhdHRyU3RhcnQpeyRjb21waWxlTm9kZT1ncm91cFNjYW4oY29tcGlsZU5vZGUsYXR0clN0YXJ0LGF0dHJFbmQpO30KJHRlbXBsYXRlPXVuZGVmaW5lZDtpZih0ZXJtaW5hbFByaW9yaXR5PmRpcmVjdGl2ZS5wcmlvcml0eSl7YnJlYWs7fQppZihkaXJlY3RpdmVWYWx1ZT1kaXJlY3RpdmUuc2NvcGUpe25ld1Njb3BlRGlyZWN0aXZlPW5ld1Njb3BlRGlyZWN0aXZlfHxkaXJlY3RpdmU7aWYoIWRpcmVjdGl2ZS50ZW1wbGF0ZVVybCl7YXNzZXJ0Tm9EdXBsaWNhdGUoJ25ldy9pc29sYXRlZCBzY29wZScsbmV3SXNvbGF0ZVNjb3BlRGlyZWN0aXZlLGRpcmVjdGl2ZSwkY29tcGlsZU5vZGUpO2lmKGlzT2JqZWN0KGRpcmVjdGl2ZVZhbHVlKSl7bmV3SXNvbGF0ZVNjb3BlRGlyZWN0aXZlPWRpcmVjdGl2ZTt9fX0KZGlyZWN0aXZlTmFtZT1kaXJlY3RpdmUubmFtZTtpZighZGlyZWN0aXZlLnRlbXBsYXRlVXJsJiZkaXJlY3RpdmUuY29udHJvbGxlcil7ZGlyZWN0aXZlVmFsdWU9ZGlyZWN0aXZlLmNvbnRyb2xsZXI7Y29udHJvbGxlckRpcmVjdGl2ZXM9Y29udHJvbGxlckRpcmVjdGl2ZXN8fHt9O2Fzc2VydE5vRHVwbGljYXRlKCInIitkaXJlY3RpdmVOYW1lKyInIGNvbnRyb2xsZXIiLGNvbnRyb2xsZXJEaXJlY3RpdmVzW2RpcmVjdGl2ZU5hbWVdLGRpcmVjdGl2ZSwkY29tcGlsZU5vZGUpO2NvbnRyb2xsZXJEaXJlY3RpdmVzW2RpcmVjdGl2ZU5hbWVdPWRpcmVjdGl2ZTt9CmlmKGRpcmVjdGl2ZVZhbHVlPWRpcmVjdGl2ZS50cmFuc2NsdWRlKXtoYXNUcmFuc2NsdWRlRGlyZWN0aXZlPXRydWU7aWYoIWRpcmVjdGl2ZS4kJHRsYil7YXNzZXJ0Tm9EdXBsaWNhdGUoJ3RyYW5zY2x1c2lvbicsbm9uVGxiVHJhbnNjbHVkZURpcmVjdGl2ZSxkaXJlY3RpdmUsJGNvbXBpbGVOb2RlKTtub25UbGJUcmFuc2NsdWRlRGlyZWN0aXZlPWRpcmVjdGl2ZTt9CmlmKGRpcmVjdGl2ZVZhbHVlPT0nZWxlbWVudCcpe2hhc0VsZW1lbnRUcmFuc2NsdWRlRGlyZWN0aXZlPXRydWU7dGVybWluYWxQcmlvcml0eT1kaXJlY3RpdmUucHJpb3JpdHk7JHRlbXBsYXRlPWdyb3VwU2Nhbihjb21waWxlTm9kZSxhdHRyU3RhcnQsYXR0ckVuZCk7JGNvbXBpbGVOb2RlPXRlbXBsYXRlQXR0cnMuJCRlbGVtZW50PWpxTGl0ZShkb2N1bWVudC5jcmVhdGVDb21tZW50KCcgJytkaXJlY3RpdmVOYW1lKyc6ICcrCnRlbXBsYXRlQXR0cnNbZGlyZWN0aXZlTmFtZV0rJyAnKSk7Y29tcGlsZU5vZGU9JGNvbXBpbGVOb2RlWzBdO3JlcGxhY2VXaXRoKGpxQ29sbGVjdGlvbixqcUxpdGUoc2xpY2VBcmdzKCR0ZW1wbGF0ZSkpLGNvbXBpbGVOb2RlKTtjaGlsZFRyYW5zY2x1ZGVGbj1jb21waWxlKCR0ZW1wbGF0ZSx0cmFuc2NsdWRlRm4sdGVybWluYWxQcmlvcml0eSxyZXBsYWNlRGlyZWN0aXZlJiZyZXBsYWNlRGlyZWN0aXZlLm5hbWUse25vblRsYlRyYW5zY2x1ZGVEaXJlY3RpdmU6bm9uVGxiVHJhbnNjbHVkZURpcmVjdGl2ZX0pO31lbHNleyR0ZW1wbGF0ZT1qcUxpdGUoanFMaXRlQ2xvbmUoY29tcGlsZU5vZGUpKS5jb250ZW50cygpOyRjb21waWxlTm9kZS5lbXB0eSgpO2NoaWxkVHJhbnNjbHVkZUZuPWNvbXBpbGUoJHRlbXBsYXRlLHRyYW5zY2x1ZGVGbik7fX0KaWYoZGlyZWN0aXZlLnRlbXBsYXRlKXtoYXNUZW1wbGF0ZT10cnVlO2Fzc2VydE5vRHVwbGljYXRlKCd0ZW1wbGF0ZScsdGVtcGxhdGVEaXJlY3RpdmUsZGlyZWN0aXZlLCRjb21waWxlTm9kZSk7dGVtcGxhdGVEaXJlY3RpdmU9ZGlyZWN0aXZlO2RpcmVjdGl2ZVZhbHVlPShpc0Z1bmN0aW9uKGRpcmVjdGl2ZS50ZW1wbGF0ZSkpP2RpcmVjdGl2ZS50ZW1wbGF0ZSgkY29tcGlsZU5vZGUsdGVtcGxhdGVBdHRycyk6ZGlyZWN0aXZlLnRlbXBsYXRlO2RpcmVjdGl2ZVZhbHVlPWRlbm9ybWFsaXplVGVtcGxhdGUoZGlyZWN0aXZlVmFsdWUpO2lmKGRpcmVjdGl2ZS5yZXBsYWNlKXtyZXBsYWNlRGlyZWN0aXZlPWRpcmVjdGl2ZTtpZihqcUxpdGVJc1RleHROb2RlKGRpcmVjdGl2ZVZhbHVlKSl7JHRlbXBsYXRlPVtdO31lbHNleyR0ZW1wbGF0ZT1qcUxpdGUodHJpbShkaXJlY3RpdmVWYWx1ZSkpO30KY29tcGlsZU5vZGU9JHRlbXBsYXRlWzBdO2lmKCR0ZW1wbGF0ZS5sZW5ndGghPTF8fGNvbXBpbGVOb2RlLm5vZGVUeXBlIT09MSl7dGhyb3cgJGNvbXBpbGVNaW5FcnIoJ3RwbHJ0JywiVGVtcGxhdGUgZm9yIGRpcmVjdGl2ZSAnezB9JyBtdXN0IGhhdmUgZXhhY3RseSBvbmUgcm9vdCBlbGVtZW50LiB7MX0iLGRpcmVjdGl2ZU5hbWUsJycpO30KcmVwbGFjZVdpdGgoanFDb2xsZWN0aW9uLCRjb21waWxlTm9kZSxjb21waWxlTm9kZSk7dmFyIG5ld1RlbXBsYXRlQXR0cnM9eyRhdHRyOnt9fTt2YXIgdGVtcGxhdGVEaXJlY3RpdmVzPWNvbGxlY3REaXJlY3RpdmVzKGNvbXBpbGVOb2RlLFtdLG5ld1RlbXBsYXRlQXR0cnMpO3ZhciB1bnByb2Nlc3NlZERpcmVjdGl2ZXM9ZGlyZWN0aXZlcy5zcGxpY2UoaSsxLGRpcmVjdGl2ZXMubGVuZ3RoLShpKzEpKTtpZihuZXdJc29sYXRlU2NvcGVEaXJlY3RpdmUpe21hcmtEaXJlY3RpdmVzQXNJc29sYXRlKHRlbXBsYXRlRGlyZWN0aXZlcyk7fQpkaXJlY3RpdmVzPWRpcmVjdGl2ZXMuY29uY2F0KHRlbXBsYXRlRGlyZWN0aXZlcykuY29uY2F0KHVucHJvY2Vzc2VkRGlyZWN0aXZlcyk7bWVyZ2VUZW1wbGF0ZUF0dHJpYnV0ZXModGVtcGxhdGVBdHRycyxuZXdUZW1wbGF0ZUF0dHJzKTtpaT1kaXJlY3RpdmVzLmxlbmd0aDt9ZWxzZXskY29tcGlsZU5vZGUuaHRtbChkaXJlY3RpdmVWYWx1ZSk7fX0KaWYoZGlyZWN0aXZlLnRlbXBsYXRlVXJsKXtoYXNUZW1wbGF0ZT10cnVlO2Fzc2VydE5vRHVwbGljYXRlKCd0ZW1wbGF0ZScsdGVtcGxhdGVEaXJlY3RpdmUsZGlyZWN0aXZlLCRjb21waWxlTm9kZSk7dGVtcGxhdGVEaXJlY3RpdmU9ZGlyZWN0aXZlO2lmKGRpcmVjdGl2ZS5yZXBsYWNlKXtyZXBsYWNlRGlyZWN0aXZlPWRpcmVjdGl2ZTt9Cm5vZGVMaW5rRm49Y29tcGlsZVRlbXBsYXRlVXJsKGRpcmVjdGl2ZXMuc3BsaWNlKGksZGlyZWN0aXZlcy5sZW5ndGgtaSksJGNvbXBpbGVOb2RlLHRlbXBsYXRlQXR0cnMsanFDb2xsZWN0aW9uLGhhc1RyYW5zY2x1ZGVEaXJlY3RpdmUmJmNoaWxkVHJhbnNjbHVkZUZuLHByZUxpbmtGbnMscG9zdExpbmtGbnMse2NvbnRyb2xsZXJEaXJlY3RpdmVzOmNvbnRyb2xsZXJEaXJlY3RpdmVzLG5ld0lzb2xhdGVTY29wZURpcmVjdGl2ZTpuZXdJc29sYXRlU2NvcGVEaXJlY3RpdmUsdGVtcGxhdGVEaXJlY3RpdmU6dGVtcGxhdGVEaXJlY3RpdmUsbm9uVGxiVHJhbnNjbHVkZURpcmVjdGl2ZTpub25UbGJUcmFuc2NsdWRlRGlyZWN0aXZlfSk7aWk9ZGlyZWN0aXZlcy5sZW5ndGg7fWVsc2UgaWYoZGlyZWN0aXZlLmNvbXBpbGUpe3RyeXtsaW5rRm49ZGlyZWN0aXZlLmNvbXBpbGUoJGNvbXBpbGVOb2RlLHRlbXBsYXRlQXR0cnMsY2hpbGRUcmFuc2NsdWRlRm4pO2lmKGlzRnVuY3Rpb24obGlua0ZuKSl7YWRkTGlua0ZucyhudWxsLGxpbmtGbixhdHRyU3RhcnQsYXR0ckVuZCk7fWVsc2UgaWYobGlua0ZuKXthZGRMaW5rRm5zKGxpbmtGbi5wcmUsbGlua0ZuLnBvc3QsYXR0clN0YXJ0LGF0dHJFbmQpO319Y2F0Y2goZSl7JGV4Y2VwdGlvbkhhbmRsZXIoZSxzdGFydGluZ1RhZygkY29tcGlsZU5vZGUpKTt9fQppZihkaXJlY3RpdmUudGVybWluYWwpe25vZGVMaW5rRm4udGVybWluYWw9dHJ1ZTt0ZXJtaW5hbFByaW9yaXR5PU1hdGgubWF4KHRlcm1pbmFsUHJpb3JpdHksZGlyZWN0aXZlLnByaW9yaXR5KTt9fQpub2RlTGlua0ZuLnNjb3BlPW5ld1Njb3BlRGlyZWN0aXZlJiZuZXdTY29wZURpcmVjdGl2ZS5zY29wZT09PXRydWU7bm9kZUxpbmtGbi50cmFuc2NsdWRlT25UaGlzRWxlbWVudD1oYXNUcmFuc2NsdWRlRGlyZWN0aXZlO25vZGVMaW5rRm4udGVtcGxhdGVPblRoaXNFbGVtZW50PWhhc1RlbXBsYXRlO25vZGVMaW5rRm4udHJhbnNjbHVkZT1jaGlsZFRyYW5zY2x1ZGVGbjtwcmV2aW91c0NvbXBpbGVDb250ZXh0Lmhhc0VsZW1lbnRUcmFuc2NsdWRlRGlyZWN0aXZlPWhhc0VsZW1lbnRUcmFuc2NsdWRlRGlyZWN0aXZlO3JldHVybiBub2RlTGlua0ZuO2Z1bmN0aW9uIGFkZExpbmtGbnMocHJlLHBvc3QsYXR0clN0YXJ0LGF0dHJFbmQpe2lmKHByZSl7aWYoYXR0clN0YXJ0KXByZT1ncm91cEVsZW1lbnRzTGlua0ZuV3JhcHBlcihwcmUsYXR0clN0YXJ0LGF0dHJFbmQpO3ByZS5yZXF1aXJlPWRpcmVjdGl2ZS5yZXF1aXJlO3ByZS5kaXJlY3RpdmVOYW1lPWRpcmVjdGl2ZU5hbWU7aWYobmV3SXNvbGF0ZVNjb3BlRGlyZWN0aXZlPT09ZGlyZWN0aXZlfHxkaXJlY3RpdmUuJCRpc29sYXRlU2NvcGUpe3ByZT1jbG9uZUFuZEFubm90YXRlRm4ocHJlLHtpc29sYXRlU2NvcGU6dHJ1ZX0pO30KcHJlTGlua0Zucy5wdXNoKHByZSk7fQppZihwb3N0KXtpZihhdHRyU3RhcnQpcG9zdD1ncm91cEVsZW1lbnRzTGlua0ZuV3JhcHBlcihwb3N0LGF0dHJTdGFydCxhdHRyRW5kKTtwb3N0LnJlcXVpcmU9ZGlyZWN0aXZlLnJlcXVpcmU7cG9zdC5kaXJlY3RpdmVOYW1lPWRpcmVjdGl2ZU5hbWU7aWYobmV3SXNvbGF0ZVNjb3BlRGlyZWN0aXZlPT09ZGlyZWN0aXZlfHxkaXJlY3RpdmUuJCRpc29sYXRlU2NvcGUpe3Bvc3Q9Y2xvbmVBbmRBbm5vdGF0ZUZuKHBvc3Qse2lzb2xhdGVTY29wZTp0cnVlfSk7fQpwb3N0TGlua0Zucy5wdXNoKHBvc3QpO319CmZ1bmN0aW9uIGdldENvbnRyb2xsZXJzKGRpcmVjdGl2ZU5hbWUscmVxdWlyZSwkZWxlbWVudCxlbGVtZW50Q29udHJvbGxlcnMpe3ZhciB2YWx1ZSxyZXRyaWV2YWxNZXRob2Q9J2RhdGEnLG9wdGlvbmFsPWZhbHNlO2lmKGlzU3RyaW5nKHJlcXVpcmUpKXt3aGlsZSgodmFsdWU9cmVxdWlyZS5jaGFyQXQoMCkpPT0nXid8fHZhbHVlPT0nPycpe3JlcXVpcmU9cmVxdWlyZS5zdWJzdHIoMSk7aWYodmFsdWU9PSdeJyl7cmV0cmlldmFsTWV0aG9kPSdpbmhlcml0ZWREYXRhJzt9Cm9wdGlvbmFsPW9wdGlvbmFsfHx2YWx1ZT09Jz8nO30KdmFsdWU9bnVsbDtpZihlbGVtZW50Q29udHJvbGxlcnMmJnJldHJpZXZhbE1ldGhvZD09PSdkYXRhJyl7dmFsdWU9ZWxlbWVudENvbnRyb2xsZXJzW3JlcXVpcmVdO30KdmFsdWU9dmFsdWV8fCRlbGVtZW50W3JldHJpZXZhbE1ldGhvZF0oJyQnK3JlcXVpcmUrJ0NvbnRyb2xsZXInKTtpZighdmFsdWUmJiFvcHRpb25hbCl7dGhyb3cgJGNvbXBpbGVNaW5FcnIoJ2N0cmVxJywiQ29udHJvbGxlciAnezB9JywgcmVxdWlyZWQgYnkgZGlyZWN0aXZlICd7MX0nLCBjYW4ndCBiZSBmb3VuZCEiLHJlcXVpcmUsZGlyZWN0aXZlTmFtZSk7fQpyZXR1cm4gdmFsdWU7fWVsc2UgaWYoaXNBcnJheShyZXF1aXJlKSl7dmFsdWU9W107Zm9yRWFjaChyZXF1aXJlLGZ1bmN0aW9uKHJlcXVpcmUpe3ZhbHVlLnB1c2goZ2V0Q29udHJvbGxlcnMoZGlyZWN0aXZlTmFtZSxyZXF1aXJlLCRlbGVtZW50LGVsZW1lbnRDb250cm9sbGVycykpO30pO30KcmV0dXJuIHZhbHVlO30KZnVuY3Rpb24gbm9kZUxpbmtGbihjaGlsZExpbmtGbixzY29wZSxsaW5rTm9kZSwkcm9vdEVsZW1lbnQsYm91bmRUcmFuc2NsdWRlRm4pe3ZhciBhdHRycywkZWxlbWVudCxpLGlpLGxpbmtGbixjb250cm9sbGVyLGlzb2xhdGVTY29wZSxlbGVtZW50Q29udHJvbGxlcnM9e30sdHJhbnNjbHVkZUZuO2lmKGNvbXBpbGVOb2RlPT09bGlua05vZGUpe2F0dHJzPXRlbXBsYXRlQXR0cnM7fWVsc2V7YXR0cnM9c2hhbGxvd0NvcHkodGVtcGxhdGVBdHRycyxuZXcgQXR0cmlidXRlcyhqcUxpdGUobGlua05vZGUpLHRlbXBsYXRlQXR0cnMuJGF0dHIpKTt9CiRlbGVtZW50PWF0dHJzLiQkZWxlbWVudDtpZihuZXdJc29sYXRlU2NvcGVEaXJlY3RpdmUpe3ZhciBMT0NBTF9SRUdFWFA9L15ccyooW0A9Jl0pKFw/PylccyooXHcqKVxzKiQvO3ZhciAkbGlua05vZGU9anFMaXRlKGxpbmtOb2RlKTtpc29sYXRlU2NvcGU9c2NvcGUuJG5ldyh0cnVlKTtpZih0ZW1wbGF0ZURpcmVjdGl2ZSYmKHRlbXBsYXRlRGlyZWN0aXZlPT09bmV3SXNvbGF0ZVNjb3BlRGlyZWN0aXZlfHx0ZW1wbGF0ZURpcmVjdGl2ZT09PW5ld0lzb2xhdGVTY29wZURpcmVjdGl2ZS4kJG9yaWdpbmFsRGlyZWN0aXZlKSl7JGxpbmtOb2RlLmRhdGEoJyRpc29sYXRlU2NvcGUnLGlzb2xhdGVTY29wZSk7fWVsc2V7JGxpbmtOb2RlLmRhdGEoJyRpc29sYXRlU2NvcGVOb1RlbXBsYXRlJyxpc29sYXRlU2NvcGUpO30Kc2FmZUFkZENsYXNzKCRsaW5rTm9kZSwnbmctaXNvbGF0ZS1zY29wZScpO2ZvckVhY2gobmV3SXNvbGF0ZVNjb3BlRGlyZWN0aXZlLnNjb3BlLGZ1bmN0aW9uKGRlZmluaXRpb24sc2NvcGVOYW1lKXt2YXIgbWF0Y2g9ZGVmaW5pdGlvbi5tYXRjaChMT0NBTF9SRUdFWFApfHxbXSxhdHRyTmFtZT1tYXRjaFszXXx8c2NvcGVOYW1lLG9wdGlvbmFsPShtYXRjaFsyXT09Jz8nKSxtb2RlPW1hdGNoWzFdLGxhc3RWYWx1ZSxwYXJlbnRHZXQscGFyZW50U2V0LGNvbXBhcmU7aXNvbGF0ZVNjb3BlLiQkaXNvbGF0ZUJpbmRpbmdzW3Njb3BlTmFtZV09bW9kZSthdHRyTmFtZTtzd2l0Y2gobW9kZSl7Y2FzZSdAJzphdHRycy4kb2JzZXJ2ZShhdHRyTmFtZSxmdW5jdGlvbih2YWx1ZSl7aXNvbGF0ZVNjb3BlW3Njb3BlTmFtZV09dmFsdWU7fSk7YXR0cnMuJCRvYnNlcnZlcnNbYXR0ck5hbWVdLiQkc2NvcGU9c2NvcGU7aWYoYXR0cnNbYXR0ck5hbWVdKXtpc29sYXRlU2NvcGVbc2NvcGVOYW1lXT0kaW50ZXJwb2xhdGUoYXR0cnNbYXR0ck5hbWVdKShzY29wZSk7fQpicmVhaztjYXNlJz0nOmlmKG9wdGlvbmFsJiYhYXR0cnNbYXR0ck5hbWVdKXtyZXR1cm47fQpwYXJlbnRHZXQ9JHBhcnNlKGF0dHJzW2F0dHJOYW1lXSk7aWYocGFyZW50R2V0LmxpdGVyYWwpe2NvbXBhcmU9ZXF1YWxzO31lbHNle2NvbXBhcmU9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT09PWI7fTt9CnBhcmVudFNldD1wYXJlbnRHZXQuYXNzaWdufHxmdW5jdGlvbigpe2xhc3RWYWx1ZT1pc29sYXRlU2NvcGVbc2NvcGVOYW1lXT1wYXJlbnRHZXQoc2NvcGUpO3Rocm93ICRjb21waWxlTWluRXJyKCdub25hc3NpZ24nLCJFeHByZXNzaW9uICd7MH0nIHVzZWQgd2l0aCBkaXJlY3RpdmUgJ3sxfScgaXMgbm9uLWFzc2lnbmFibGUhIixhdHRyc1thdHRyTmFtZV0sbmV3SXNvbGF0ZVNjb3BlRGlyZWN0aXZlLm5hbWUpO307bGFzdFZhbHVlPWlzb2xhdGVTY29wZVtzY29wZU5hbWVdPXBhcmVudEdldChzY29wZSk7aXNvbGF0ZVNjb3BlLiR3YXRjaChmdW5jdGlvbiBwYXJlbnRWYWx1ZVdhdGNoKCl7dmFyIHBhcmVudFZhbHVlPXBhcmVudEdldChzY29wZSk7aWYoIWNvbXBhcmUocGFyZW50VmFsdWUsaXNvbGF0ZVNjb3BlW3Njb3BlTmFtZV0pKXtpZighY29tcGFyZShwYXJlbnRWYWx1ZSxsYXN0VmFsdWUpKXtpc29sYXRlU2NvcGVbc2NvcGVOYW1lXT1wYXJlbnRWYWx1ZTt9ZWxzZXtwYXJlbnRTZXQoc2NvcGUscGFyZW50VmFsdWU9aXNvbGF0ZVNjb3BlW3Njb3BlTmFtZV0pO319CnJldHVybiBsYXN0VmFsdWU9cGFyZW50VmFsdWU7fSxudWxsLHBhcmVudEdldC5saXRlcmFsKTticmVhaztjYXNlJyYnOnBhcmVudEdldD0kcGFyc2UoYXR0cnNbYXR0ck5hbWVdKTtpc29sYXRlU2NvcGVbc2NvcGVOYW1lXT1mdW5jdGlvbihsb2NhbHMpe3JldHVybiBwYXJlbnRHZXQoc2NvcGUsbG9jYWxzKTt9O2JyZWFrO2RlZmF1bHQ6dGhyb3cgJGNvbXBpbGVNaW5FcnIoJ2lzY3AnLCJJbnZhbGlkIGlzb2xhdGUgc2NvcGUgZGVmaW5pdGlvbiBmb3IgZGlyZWN0aXZlICd7MH0nLiIrIiBEZWZpbml0aW9uOiB7Li4uIHsxfTogJ3syfScgLi4ufSIsbmV3SXNvbGF0ZVNjb3BlRGlyZWN0aXZlLm5hbWUsc2NvcGVOYW1lLGRlZmluaXRpb24pO319KTt9CnRyYW5zY2x1ZGVGbj1ib3VuZFRyYW5zY2x1ZGVGbiYmY29udHJvbGxlcnNCb3VuZFRyYW5zY2x1ZGU7aWYoY29udHJvbGxlckRpcmVjdGl2ZXMpe2ZvckVhY2goY29udHJvbGxlckRpcmVjdGl2ZXMsZnVuY3Rpb24oZGlyZWN0aXZlKXt2YXIgbG9jYWxzPXskc2NvcGU6ZGlyZWN0aXZlPT09bmV3SXNvbGF0ZVNjb3BlRGlyZWN0aXZlfHxkaXJlY3RpdmUuJCRpc29sYXRlU2NvcGU/aXNvbGF0ZVNjb3BlOnNjb3BlLCRlbGVtZW50OiRlbGVtZW50LCRhdHRyczphdHRycywkdHJhbnNjbHVkZTp0cmFuc2NsdWRlRm59LGNvbnRyb2xsZXJJbnN0YW5jZTtjb250cm9sbGVyPWRpcmVjdGl2ZS5jb250cm9sbGVyO2lmKGNvbnRyb2xsZXI9PSdAJyl7Y29udHJvbGxlcj1hdHRyc1tkaXJlY3RpdmUubmFtZV07fQpjb250cm9sbGVySW5zdGFuY2U9JGNvbnRyb2xsZXIoY29udHJvbGxlcixsb2NhbHMpO2VsZW1lbnRDb250cm9sbGVyc1tkaXJlY3RpdmUubmFtZV09Y29udHJvbGxlckluc3RhbmNlO2lmKCFoYXNFbGVtZW50VHJhbnNjbHVkZURpcmVjdGl2ZSl7JGVsZW1lbnQuZGF0YSgnJCcrZGlyZWN0aXZlLm5hbWUrJ0NvbnRyb2xsZXInLGNvbnRyb2xsZXJJbnN0YW5jZSk7fQppZihkaXJlY3RpdmUuY29udHJvbGxlckFzKXtsb2NhbHMuJHNjb3BlW2RpcmVjdGl2ZS5jb250cm9sbGVyQXNdPWNvbnRyb2xsZXJJbnN0YW5jZTt9fSk7fQpmb3IoaT0wLGlpPXByZUxpbmtGbnMubGVuZ3RoO2k8aWk7aSsrKXt0cnl7bGlua0ZuPXByZUxpbmtGbnNbaV07bGlua0ZuKGxpbmtGbi5pc29sYXRlU2NvcGU/aXNvbGF0ZVNjb3BlOnNjb3BlLCRlbGVtZW50LGF0dHJzLGxpbmtGbi5yZXF1aXJlJiZnZXRDb250cm9sbGVycyhsaW5rRm4uZGlyZWN0aXZlTmFtZSxsaW5rRm4ucmVxdWlyZSwkZWxlbWVudCxlbGVtZW50Q29udHJvbGxlcnMpLHRyYW5zY2x1ZGVGbik7fWNhdGNoKGUpeyRleGNlcHRpb25IYW5kbGVyKGUsc3RhcnRpbmdUYWcoJGVsZW1lbnQpKTt9fQp2YXIgc2NvcGVUb0NoaWxkPXNjb3BlO2lmKG5ld0lzb2xhdGVTY29wZURpcmVjdGl2ZSYmKG5ld0lzb2xhdGVTY29wZURpcmVjdGl2ZS50ZW1wbGF0ZXx8bmV3SXNvbGF0ZVNjb3BlRGlyZWN0aXZlLnRlbXBsYXRlVXJsPT09bnVsbCkpe3Njb3BlVG9DaGlsZD1pc29sYXRlU2NvcGU7fQpjaGlsZExpbmtGbiYmY2hpbGRMaW5rRm4oc2NvcGVUb0NoaWxkLGxpbmtOb2RlLmNoaWxkTm9kZXMsdW5kZWZpbmVkLGJvdW5kVHJhbnNjbHVkZUZuKTtmb3IoaT1wb3N0TGlua0Zucy5sZW5ndGgtMTtpPj0wO2ktLSl7dHJ5e2xpbmtGbj1wb3N0TGlua0Zuc1tpXTtsaW5rRm4obGlua0ZuLmlzb2xhdGVTY29wZT9pc29sYXRlU2NvcGU6c2NvcGUsJGVsZW1lbnQsYXR0cnMsbGlua0ZuLnJlcXVpcmUmJmdldENvbnRyb2xsZXJzKGxpbmtGbi5kaXJlY3RpdmVOYW1lLGxpbmtGbi5yZXF1aXJlLCRlbGVtZW50LGVsZW1lbnRDb250cm9sbGVycyksdHJhbnNjbHVkZUZuKTt9Y2F0Y2goZSl7JGV4Y2VwdGlvbkhhbmRsZXIoZSxzdGFydGluZ1RhZygkZWxlbWVudCkpO319CmZ1bmN0aW9uIGNvbnRyb2xsZXJzQm91bmRUcmFuc2NsdWRlKHNjb3BlLGNsb25lQXR0YWNoRm4pe3ZhciB0cmFuc2NsdWRlQ29udHJvbGxlcnM7aWYoYXJndW1lbnRzLmxlbmd0aDwyKXtjbG9uZUF0dGFjaEZuPXNjb3BlO3Njb3BlPXVuZGVmaW5lZDt9CmlmKGhhc0VsZW1lbnRUcmFuc2NsdWRlRGlyZWN0aXZlKXt0cmFuc2NsdWRlQ29udHJvbGxlcnM9ZWxlbWVudENvbnRyb2xsZXJzO30KcmV0dXJuIGJvdW5kVHJhbnNjbHVkZUZuKHNjb3BlLGNsb25lQXR0YWNoRm4sdHJhbnNjbHVkZUNvbnRyb2xsZXJzKTt9fX0KZnVuY3Rpb24gbWFya0RpcmVjdGl2ZXNBc0lzb2xhdGUoZGlyZWN0aXZlcyl7Zm9yKHZhciBqPTAsamo9ZGlyZWN0aXZlcy5sZW5ndGg7ajxqajtqKyspe2RpcmVjdGl2ZXNbal09aW5oZXJpdChkaXJlY3RpdmVzW2pdLHskJGlzb2xhdGVTY29wZTp0cnVlfSk7fX0KZnVuY3Rpb24gYWRkRGlyZWN0aXZlKHREaXJlY3RpdmVzLG5hbWUsbG9jYXRpb24sbWF4UHJpb3JpdHksaWdub3JlRGlyZWN0aXZlLHN0YXJ0QXR0ck5hbWUsZW5kQXR0ck5hbWUpe2lmKG5hbWU9PT1pZ25vcmVEaXJlY3RpdmUpcmV0dXJuIG51bGw7dmFyIG1hdGNoPW51bGw7aWYoaGFzRGlyZWN0aXZlcy5oYXNPd25Qcm9wZXJ0eShuYW1lKSl7Zm9yKHZhciBkaXJlY3RpdmUsZGlyZWN0aXZlcz0kaW5qZWN0b3IuZ2V0KG5hbWUrU3VmZml4KSxpPTAsaWk9ZGlyZWN0aXZlcy5sZW5ndGg7aTxpaTtpKyspe3RyeXtkaXJlY3RpdmU9ZGlyZWN0aXZlc1tpXTtpZigobWF4UHJpb3JpdHk9PT11bmRlZmluZWR8fG1heFByaW9yaXR5PmRpcmVjdGl2ZS5wcmlvcml0eSkmJmRpcmVjdGl2ZS5yZXN0cmljdC5pbmRleE9mKGxvY2F0aW9uKSE9LTEpe2lmKHN0YXJ0QXR0ck5hbWUpe2RpcmVjdGl2ZT1pbmhlcml0KGRpcmVjdGl2ZSx7JCRzdGFydDpzdGFydEF0dHJOYW1lLCQkZW5kOmVuZEF0dHJOYW1lfSk7fQp0RGlyZWN0aXZlcy5wdXNoKGRpcmVjdGl2ZSk7bWF0Y2g9ZGlyZWN0aXZlO319Y2F0Y2goZSl7JGV4Y2VwdGlvbkhhbmRsZXIoZSk7fX19CnJldHVybiBtYXRjaDt9CmZ1bmN0aW9uIG1lcmdlVGVtcGxhdGVBdHRyaWJ1dGVzKGRzdCxzcmMpe3ZhciBzcmNBdHRyPXNyYy4kYXR0cixkc3RBdHRyPWRzdC4kYXR0ciwkZWxlbWVudD1kc3QuJCRlbGVtZW50O2ZvckVhY2goZHN0LGZ1bmN0aW9uKHZhbHVlLGtleSl7aWYoa2V5LmNoYXJBdCgwKSE9JyQnKXtpZihzcmNba2V5XSYmc3JjW2tleV0hPT12YWx1ZSl7dmFsdWUrPShrZXk9PT0nc3R5bGUnPyc7JzonICcpK3NyY1trZXldO30KZHN0LiRzZXQoa2V5LHZhbHVlLHRydWUsc3JjQXR0cltrZXldKTt9fSk7Zm9yRWFjaChzcmMsZnVuY3Rpb24odmFsdWUsa2V5KXtpZihrZXk9PSdjbGFzcycpe3NhZmVBZGRDbGFzcygkZWxlbWVudCx2YWx1ZSk7ZHN0WydjbGFzcyddPShkc3RbJ2NsYXNzJ10/ZHN0WydjbGFzcyddKycgJzonJykrdmFsdWU7fWVsc2UgaWYoa2V5PT0nc3R5bGUnKXskZWxlbWVudC5hdHRyKCdzdHlsZScsJGVsZW1lbnQuYXR0cignc3R5bGUnKSsnOycrdmFsdWUpO2RzdFsnc3R5bGUnXT0oZHN0WydzdHlsZSddP2RzdFsnc3R5bGUnXSsnOyc6JycpK3ZhbHVlO31lbHNlIGlmKGtleS5jaGFyQXQoMCkhPSckJyYmIWRzdC5oYXNPd25Qcm9wZXJ0eShrZXkpKXtkc3Rba2V5XT12YWx1ZTtkc3RBdHRyW2tleV09c3JjQXR0cltrZXldO319KTt9CmZ1bmN0aW9uIGNvbXBpbGVUZW1wbGF0ZVVybChkaXJlY3RpdmVzLCRjb21waWxlTm9kZSx0QXR0cnMsJHJvb3RFbGVtZW50LGNoaWxkVHJhbnNjbHVkZUZuLHByZUxpbmtGbnMscG9zdExpbmtGbnMscHJldmlvdXNDb21waWxlQ29udGV4dCl7dmFyIGxpbmtRdWV1ZT1bXSxhZnRlclRlbXBsYXRlTm9kZUxpbmtGbixhZnRlclRlbXBsYXRlQ2hpbGRMaW5rRm4sYmVmb3JlVGVtcGxhdGVDb21waWxlTm9kZT0kY29tcGlsZU5vZGVbMF0sb3JpZ0FzeW5jRGlyZWN0aXZlPWRpcmVjdGl2ZXMuc2hpZnQoKSxkZXJpdmVkU3luY0RpcmVjdGl2ZT1leHRlbmQoe30sb3JpZ0FzeW5jRGlyZWN0aXZlLHt0ZW1wbGF0ZVVybDpudWxsLHRyYW5zY2x1ZGU6bnVsbCxyZXBsYWNlOm51bGwsJCRvcmlnaW5hbERpcmVjdGl2ZTpvcmlnQXN5bmNEaXJlY3RpdmV9KSx0ZW1wbGF0ZVVybD0oaXNGdW5jdGlvbihvcmlnQXN5bmNEaXJlY3RpdmUudGVtcGxhdGVVcmwpKT9vcmlnQXN5bmNEaXJlY3RpdmUudGVtcGxhdGVVcmwoJGNvbXBpbGVOb2RlLHRBdHRycyk6b3JpZ0FzeW5jRGlyZWN0aXZlLnRlbXBsYXRlVXJsOyRjb21waWxlTm9kZS5lbXB0eSgpOyRodHRwLmdldCgkc2NlLmdldFRydXN0ZWRSZXNvdXJjZVVybCh0ZW1wbGF0ZVVybCkse2NhY2hlOiR0ZW1wbGF0ZUNhY2hlfSkuc3VjY2VzcyhmdW5jdGlvbihjb250ZW50KXt2YXIgY29tcGlsZU5vZGUsdGVtcFRlbXBsYXRlQXR0cnMsJHRlbXBsYXRlLGNoaWxkQm91bmRUcmFuc2NsdWRlRm47Y29udGVudD1kZW5vcm1hbGl6ZVRlbXBsYXRlKGNvbnRlbnQpO2lmKG9yaWdBc3luY0RpcmVjdGl2ZS5yZXBsYWNlKXtpZihqcUxpdGVJc1RleHROb2RlKGNvbnRlbnQpKXskdGVtcGxhdGU9W107fWVsc2V7JHRlbXBsYXRlPWpxTGl0ZSh0cmltKGNvbnRlbnQpKTt9CmNvbXBpbGVOb2RlPSR0ZW1wbGF0ZVswXTtpZigkdGVtcGxhdGUubGVuZ3RoIT0xfHxjb21waWxlTm9kZS5ub2RlVHlwZSE9PTEpe3Rocm93ICRjb21waWxlTWluRXJyKCd0cGxydCcsIlRlbXBsYXRlIGZvciBkaXJlY3RpdmUgJ3swfScgbXVzdCBoYXZlIGV4YWN0bHkgb25lIHJvb3QgZWxlbWVudC4gezF9IixvcmlnQXN5bmNEaXJlY3RpdmUubmFtZSx0ZW1wbGF0ZVVybCk7fQp0ZW1wVGVtcGxhdGVBdHRycz17JGF0dHI6e319O3JlcGxhY2VXaXRoKCRyb290RWxlbWVudCwkY29tcGlsZU5vZGUsY29tcGlsZU5vZGUpO3ZhciB0ZW1wbGF0ZURpcmVjdGl2ZXM9Y29sbGVjdERpcmVjdGl2ZXMoY29tcGlsZU5vZGUsW10sdGVtcFRlbXBsYXRlQXR0cnMpO2lmKGlzT2JqZWN0KG9yaWdBc3luY0RpcmVjdGl2ZS5zY29wZSkpe21hcmtEaXJlY3RpdmVzQXNJc29sYXRlKHRlbXBsYXRlRGlyZWN0aXZlcyk7fQpkaXJlY3RpdmVzPXRlbXBsYXRlRGlyZWN0aXZlcy5jb25jYXQoZGlyZWN0aXZlcyk7bWVyZ2VUZW1wbGF0ZUF0dHJpYnV0ZXModEF0dHJzLHRlbXBUZW1wbGF0ZUF0dHJzKTt9ZWxzZXtjb21waWxlTm9kZT1iZWZvcmVUZW1wbGF0ZUNvbXBpbGVOb2RlOyRjb21waWxlTm9kZS5odG1sKGNvbnRlbnQpO30KZGlyZWN0aXZlcy51bnNoaWZ0KGRlcml2ZWRTeW5jRGlyZWN0aXZlKTthZnRlclRlbXBsYXRlTm9kZUxpbmtGbj1hcHBseURpcmVjdGl2ZXNUb05vZGUoZGlyZWN0aXZlcyxjb21waWxlTm9kZSx0QXR0cnMsY2hpbGRUcmFuc2NsdWRlRm4sJGNvbXBpbGVOb2RlLG9yaWdBc3luY0RpcmVjdGl2ZSxwcmVMaW5rRm5zLHBvc3RMaW5rRm5zLHByZXZpb3VzQ29tcGlsZUNvbnRleHQpO2ZvckVhY2goJHJvb3RFbGVtZW50LGZ1bmN0aW9uKG5vZGUsaSl7aWYobm9kZT09Y29tcGlsZU5vZGUpeyRyb290RWxlbWVudFtpXT0kY29tcGlsZU5vZGVbMF07fX0pO2FmdGVyVGVtcGxhdGVDaGlsZExpbmtGbj1jb21waWxlTm9kZXMoJGNvbXBpbGVOb2RlWzBdLmNoaWxkTm9kZXMsY2hpbGRUcmFuc2NsdWRlRm4pO3doaWxlKGxpbmtRdWV1ZS5sZW5ndGgpe3ZhciBzY29wZT1saW5rUXVldWUuc2hpZnQoKSxiZWZvcmVUZW1wbGF0ZUxpbmtOb2RlPWxpbmtRdWV1ZS5zaGlmdCgpLGxpbmtSb290RWxlbWVudD1saW5rUXVldWUuc2hpZnQoKSxib3VuZFRyYW5zY2x1ZGVGbj1saW5rUXVldWUuc2hpZnQoKSxsaW5rTm9kZT0kY29tcGlsZU5vZGVbMF07aWYoYmVmb3JlVGVtcGxhdGVMaW5rTm9kZSE9PWJlZm9yZVRlbXBsYXRlQ29tcGlsZU5vZGUpe3ZhciBvbGRDbGFzc2VzPWJlZm9yZVRlbXBsYXRlTGlua05vZGUuY2xhc3NOYW1lO2lmKCEocHJldmlvdXNDb21waWxlQ29udGV4dC5oYXNFbGVtZW50VHJhbnNjbHVkZURpcmVjdGl2ZSYmb3JpZ0FzeW5jRGlyZWN0aXZlLnJlcGxhY2UpKXtsaW5rTm9kZT1qcUxpdGVDbG9uZShjb21waWxlTm9kZSk7fQpyZXBsYWNlV2l0aChsaW5rUm9vdEVsZW1lbnQsanFMaXRlKGJlZm9yZVRlbXBsYXRlTGlua05vZGUpLGxpbmtOb2RlKTtzYWZlQWRkQ2xhc3MoanFMaXRlKGxpbmtOb2RlKSxvbGRDbGFzc2VzKTt9CmlmKGFmdGVyVGVtcGxhdGVOb2RlTGlua0ZuLnRyYW5zY2x1ZGVPblRoaXNFbGVtZW50KXtjaGlsZEJvdW5kVHJhbnNjbHVkZUZuPWNyZWF0ZUJvdW5kVHJhbnNjbHVkZUZuKHNjb3BlLGFmdGVyVGVtcGxhdGVOb2RlTGlua0ZuLnRyYW5zY2x1ZGUsYm91bmRUcmFuc2NsdWRlRm4pO31lbHNle2NoaWxkQm91bmRUcmFuc2NsdWRlRm49Ym91bmRUcmFuc2NsdWRlRm47fQphZnRlclRlbXBsYXRlTm9kZUxpbmtGbihhZnRlclRlbXBsYXRlQ2hpbGRMaW5rRm4sc2NvcGUsbGlua05vZGUsJHJvb3RFbGVtZW50LGNoaWxkQm91bmRUcmFuc2NsdWRlRm4pO30KbGlua1F1ZXVlPW51bGw7fSkuZXJyb3IoZnVuY3Rpb24ocmVzcG9uc2UsY29kZSxoZWFkZXJzLGNvbmZpZyl7dGhyb3cgJGNvbXBpbGVNaW5FcnIoJ3RwbG9hZCcsJ0ZhaWxlZCB0byBsb2FkIHRlbXBsYXRlOiB7MH0nLGNvbmZpZy51cmwpO30pO3JldHVybiBmdW5jdGlvbiBkZWxheWVkTm9kZUxpbmtGbihpZ25vcmVDaGlsZExpbmtGbixzY29wZSxub2RlLHJvb3RFbGVtZW50LGJvdW5kVHJhbnNjbHVkZUZuKXt2YXIgY2hpbGRCb3VuZFRyYW5zY2x1ZGVGbj1ib3VuZFRyYW5zY2x1ZGVGbjtpZihsaW5rUXVldWUpe2xpbmtRdWV1ZS5wdXNoKHNjb3BlKTtsaW5rUXVldWUucHVzaChub2RlKTtsaW5rUXVldWUucHVzaChyb290RWxlbWVudCk7bGlua1F1ZXVlLnB1c2goY2hpbGRCb3VuZFRyYW5zY2x1ZGVGbik7fWVsc2V7aWYoYWZ0ZXJUZW1wbGF0ZU5vZGVMaW5rRm4udHJhbnNjbHVkZU9uVGhpc0VsZW1lbnQpe2NoaWxkQm91bmRUcmFuc2NsdWRlRm49Y3JlYXRlQm91bmRUcmFuc2NsdWRlRm4oc2NvcGUsYWZ0ZXJUZW1wbGF0ZU5vZGVMaW5rRm4udHJhbnNjbHVkZSxib3VuZFRyYW5zY2x1ZGVGbik7fQphZnRlclRlbXBsYXRlTm9kZUxpbmtGbihhZnRlclRlbXBsYXRlQ2hpbGRMaW5rRm4sc2NvcGUsbm9kZSxyb290RWxlbWVudCxjaGlsZEJvdW5kVHJhbnNjbHVkZUZuKTt9fTt9CmZ1bmN0aW9uIGJ5UHJpb3JpdHkoYSxiKXt2YXIgZGlmZj1iLnByaW9yaXR5LWEucHJpb3JpdHk7aWYoZGlmZiE9PTApcmV0dXJuIGRpZmY7aWYoYS5uYW1lIT09Yi5uYW1lKXJldHVybihhLm5hbWU8Yi5uYW1lKT8tMToxO3JldHVybiBhLmluZGV4LWIuaW5kZXg7fQpmdW5jdGlvbiBhc3NlcnROb0R1cGxpY2F0ZSh3aGF0LHByZXZpb3VzRGlyZWN0aXZlLGRpcmVjdGl2ZSxlbGVtZW50KXtpZihwcmV2aW91c0RpcmVjdGl2ZSl7dGhyb3cgJGNvbXBpbGVNaW5FcnIoJ211bHRpZGlyJywnTXVsdGlwbGUgZGlyZWN0aXZlcyBbezB9LCB7MX1dIGFza2luZyBmb3IgezJ9IG9uOiB7M30nLHByZXZpb3VzRGlyZWN0aXZlLm5hbWUsZGlyZWN0aXZlLm5hbWUsd2hhdCxzdGFydGluZ1RhZyhlbGVtZW50KSk7fX0KZnVuY3Rpb24gYWRkVGV4dEludGVycG9sYXRlRGlyZWN0aXZlKGRpcmVjdGl2ZXMsdGV4dCl7dmFyIGludGVycG9sYXRlRm49JGludGVycG9sYXRlKHRleHQsdHJ1ZSk7aWYoaW50ZXJwb2xhdGVGbil7ZGlyZWN0aXZlcy5wdXNoKHtwcmlvcml0eTowLGNvbXBpbGU6ZnVuY3Rpb24gdGV4dEludGVycG9sYXRlQ29tcGlsZUZuKHRlbXBsYXRlTm9kZSl7dmFyIHBhcmVudD10ZW1wbGF0ZU5vZGUucGFyZW50KCksaGFzQ29tcGlsZVBhcmVudD1wYXJlbnQubGVuZ3RoO2lmKGhhc0NvbXBpbGVQYXJlbnQpc2FmZUFkZENsYXNzKHRlbXBsYXRlTm9kZS5wYXJlbnQoKSwnbmctYmluZGluZycpO3JldHVybiBmdW5jdGlvbiB0ZXh0SW50ZXJwb2xhdGVMaW5rRm4oc2NvcGUsbm9kZSl7dmFyIHBhcmVudD1ub2RlLnBhcmVudCgpLGJpbmRpbmdzPXBhcmVudC5kYXRhKCckYmluZGluZycpfHxbXTtiaW5kaW5ncy5wdXNoKGludGVycG9sYXRlRm4pO3BhcmVudC5kYXRhKCckYmluZGluZycsYmluZGluZ3MpO2lmKCFoYXNDb21waWxlUGFyZW50KXNhZmVBZGRDbGFzcyhwYXJlbnQsJ25nLWJpbmRpbmcnKTtzY29wZS4kd2F0Y2goaW50ZXJwb2xhdGVGbixmdW5jdGlvbiBpbnRlcnBvbGF0ZUZuV2F0Y2hBY3Rpb24odmFsdWUpe25vZGVbMF0ubm9kZVZhbHVlPXZhbHVlO30pO307fX0pO319CmZ1bmN0aW9uIGdldFRydXN0ZWRDb250ZXh0KG5vZGUsYXR0ck5vcm1hbGl6ZWROYW1lKXtpZihhdHRyTm9ybWFsaXplZE5hbWU9PSJzcmNkb2MiKXtyZXR1cm4gJHNjZS5IVE1MO30KdmFyIHRhZz1ub2RlTmFtZV8obm9kZSk7aWYoYXR0ck5vcm1hbGl6ZWROYW1lPT0ieGxpbmtIcmVmInx8KHRhZz09IkZPUk0iJiZhdHRyTm9ybWFsaXplZE5hbWU9PSJhY3Rpb24iKXx8KHRhZyE9IklNRyImJihhdHRyTm9ybWFsaXplZE5hbWU9PSJzcmMifHxhdHRyTm9ybWFsaXplZE5hbWU9PSJuZ1NyYyIpKSl7cmV0dXJuICRzY2UuUkVTT1VSQ0VfVVJMO319CmZ1bmN0aW9uIGFkZEF0dHJJbnRlcnBvbGF0ZURpcmVjdGl2ZShub2RlLGRpcmVjdGl2ZXMsdmFsdWUsbmFtZSl7dmFyIGludGVycG9sYXRlRm49JGludGVycG9sYXRlKHZhbHVlLHRydWUpO2lmKCFpbnRlcnBvbGF0ZUZuKXJldHVybjtpZihuYW1lPT09Im11bHRpcGxlIiYmbm9kZU5hbWVfKG5vZGUpPT09IlNFTEVDVCIpe3Rocm93ICRjb21waWxlTWluRXJyKCJzZWxtdWx0aSIsIkJpbmRpbmcgdG8gdGhlICdtdWx0aXBsZScgYXR0cmlidXRlIGlzIG5vdCBzdXBwb3J0ZWQuIEVsZW1lbnQ6IHswfSIsc3RhcnRpbmdUYWcobm9kZSkpO30KZGlyZWN0aXZlcy5wdXNoKHtwcmlvcml0eToxMDAsY29tcGlsZTpmdW5jdGlvbigpe3JldHVybntwcmU6ZnVuY3Rpb24gYXR0ckludGVycG9sYXRlUHJlTGlua0ZuKHNjb3BlLGVsZW1lbnQsYXR0cil7dmFyICQkb2JzZXJ2ZXJzPShhdHRyLiQkb2JzZXJ2ZXJzfHwoYXR0ci4kJG9ic2VydmVycz17fSkpO2lmKEVWRU5UX0hBTkRMRVJfQVRUUl9SRUdFWFAudGVzdChuYW1lKSl7dGhyb3cgJGNvbXBpbGVNaW5FcnIoJ25vZG9tZXZlbnRzJywiSW50ZXJwb2xhdGlvbnMgZm9yIEhUTUwgRE9NIGV2ZW50IGF0dHJpYnV0ZXMgYXJlIGRpc2FsbG93ZWQuICBQbGVhc2UgdXNlIHRoZSAiKyJuZy0gdmVyc2lvbnMgKHN1Y2ggYXMgbmctY2xpY2sgaW5zdGVhZCBvZiBvbmNsaWNrKSBpbnN0ZWFkLiIpO30KaW50ZXJwb2xhdGVGbj0kaW50ZXJwb2xhdGUoYXR0cltuYW1lXSx0cnVlLGdldFRydXN0ZWRDb250ZXh0KG5vZGUsbmFtZSkpO2lmKCFpbnRlcnBvbGF0ZUZuKXJldHVybjthdHRyW25hbWVdPWludGVycG9sYXRlRm4oc2NvcGUpOygkJG9ic2VydmVyc1tuYW1lXXx8KCQkb2JzZXJ2ZXJzW25hbWVdPVtdKSkuJCRpbnRlcj10cnVlOyhhdHRyLiQkb2JzZXJ2ZXJzJiZhdHRyLiQkb2JzZXJ2ZXJzW25hbWVdLiQkc2NvcGV8fHNjb3BlKS4kd2F0Y2goaW50ZXJwb2xhdGVGbixmdW5jdGlvbiBpbnRlcnBvbGF0ZUZuV2F0Y2hBY3Rpb24obmV3VmFsdWUsb2xkVmFsdWUpe2lmKG5hbWU9PT0nY2xhc3MnJiZuZXdWYWx1ZSE9b2xkVmFsdWUpe2F0dHIuJHVwZGF0ZUNsYXNzKG5ld1ZhbHVlLG9sZFZhbHVlKTt9ZWxzZXthdHRyLiRzZXQobmFtZSxuZXdWYWx1ZSk7fX0pO319O319KTt9CmZ1bmN0aW9uIHJlcGxhY2VXaXRoKCRyb290RWxlbWVudCxlbGVtZW50c1RvUmVtb3ZlLG5ld05vZGUpe3ZhciBmaXJzdEVsZW1lbnRUb1JlbW92ZT1lbGVtZW50c1RvUmVtb3ZlWzBdLHJlbW92ZUNvdW50PWVsZW1lbnRzVG9SZW1vdmUubGVuZ3RoLHBhcmVudD1maXJzdEVsZW1lbnRUb1JlbW92ZS5wYXJlbnROb2RlLGksaWk7aWYoJHJvb3RFbGVtZW50KXtmb3IoaT0wLGlpPSRyb290RWxlbWVudC5sZW5ndGg7aTxpaTtpKyspe2lmKCRyb290RWxlbWVudFtpXT09Zmlyc3RFbGVtZW50VG9SZW1vdmUpeyRyb290RWxlbWVudFtpKytdPW5ld05vZGU7Zm9yKHZhciBqPWksajI9aityZW1vdmVDb3VudC0xLGpqPSRyb290RWxlbWVudC5sZW5ndGg7ajxqajtqKyssajIrKyl7aWYoajI8amopeyRyb290RWxlbWVudFtqXT0kcm9vdEVsZW1lbnRbajJdO31lbHNle2RlbGV0ZSAkcm9vdEVsZW1lbnRbal07fX0KJHJvb3RFbGVtZW50Lmxlbmd0aC09cmVtb3ZlQ291bnQtMTticmVhazt9fX0KaWYocGFyZW50KXtwYXJlbnQucmVwbGFjZUNoaWxkKG5ld05vZGUsZmlyc3RFbGVtZW50VG9SZW1vdmUpO30KdmFyIGZyYWdtZW50PWRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtmcmFnbWVudC5hcHBlbmRDaGlsZChmaXJzdEVsZW1lbnRUb1JlbW92ZSk7bmV3Tm9kZVtqcUxpdGUuZXhwYW5kb109Zmlyc3RFbGVtZW50VG9SZW1vdmVbanFMaXRlLmV4cGFuZG9dO2Zvcih2YXIgaz0xLGtrPWVsZW1lbnRzVG9SZW1vdmUubGVuZ3RoO2s8a2s7aysrKXt2YXIgZWxlbWVudD1lbGVtZW50c1RvUmVtb3ZlW2tdO2pxTGl0ZShlbGVtZW50KS5yZW1vdmUoKTtmcmFnbWVudC5hcHBlbmRDaGlsZChlbGVtZW50KTtkZWxldGUgZWxlbWVudHNUb1JlbW92ZVtrXTt9CmVsZW1lbnRzVG9SZW1vdmVbMF09bmV3Tm9kZTtlbGVtZW50c1RvUmVtb3ZlLmxlbmd0aD0xO30KZnVuY3Rpb24gY2xvbmVBbmRBbm5vdGF0ZUZuKGZuLGFubm90YXRpb24pe3JldHVybiBleHRlbmQoZnVuY3Rpb24oKXtyZXR1cm4gZm4uYXBwbHkobnVsbCxhcmd1bWVudHMpO30sZm4sYW5ub3RhdGlvbik7fX1dO30KdmFyIFBSRUZJWF9SRUdFWFA9L14oeFtcOlwtX118ZGF0YVtcOlwtX10pL2k7ZnVuY3Rpb24gZGlyZWN0aXZlTm9ybWFsaXplKG5hbWUpe3JldHVybiBjYW1lbENhc2UobmFtZS5yZXBsYWNlKFBSRUZJWF9SRUdFWFAsJycpKTt9CmZ1bmN0aW9uIG5vZGVzZXRMaW5raW5nRm4oc2NvcGUsbm9kZUxpc3Qscm9vdEVsZW1lbnQsYm91bmRUcmFuc2NsdWRlRm4pe30KZnVuY3Rpb24gZGlyZWN0aXZlTGlua2luZ0ZuKG5vZGVzZXRMaW5raW5nRm4sc2NvcGUsbm9kZSxyb290RWxlbWVudCxib3VuZFRyYW5zY2x1ZGVGbil7fQpmdW5jdGlvbiB0b2tlbkRpZmZlcmVuY2Uoc3RyMSxzdHIyKXt2YXIgdmFsdWVzPScnLHRva2VuczE9c3RyMS5zcGxpdCgvXHMrLyksdG9rZW5zMj1zdHIyLnNwbGl0KC9ccysvKTtvdXRlcjpmb3IodmFyIGk9MDtpPHRva2VuczEubGVuZ3RoO2krKyl7dmFyIHRva2VuPXRva2VuczFbaV07Zm9yKHZhciBqPTA7ajx0b2tlbnMyLmxlbmd0aDtqKyspe2lmKHRva2VuPT10b2tlbnMyW2pdKWNvbnRpbnVlIG91dGVyO30KdmFsdWVzKz0odmFsdWVzLmxlbmd0aD4wPycgJzonJykrdG9rZW47fQpyZXR1cm4gdmFsdWVzO30KZnVuY3Rpb24gJENvbnRyb2xsZXJQcm92aWRlcigpe3ZhciBjb250cm9sbGVycz17fSxDTlRSTF9SRUc9L14oXFMrKShccythc1xzKyhcdyspKT8kLzt0aGlzLnJlZ2lzdGVyPWZ1bmN0aW9uKG5hbWUsY29uc3RydWN0b3Ipe2Fzc2VydE5vdEhhc093blByb3BlcnR5KG5hbWUsJ2NvbnRyb2xsZXInKTtpZihpc09iamVjdChuYW1lKSl7ZXh0ZW5kKGNvbnRyb2xsZXJzLG5hbWUpO31lbHNle2NvbnRyb2xsZXJzW25hbWVdPWNvbnN0cnVjdG9yO319O3RoaXMuJGdldD1bJyRpbmplY3RvcicsJyR3aW5kb3cnLGZ1bmN0aW9uKCRpbmplY3Rvciwkd2luZG93KXtyZXR1cm4gZnVuY3Rpb24oZXhwcmVzc2lvbixsb2NhbHMpe3ZhciBpbnN0YW5jZSxtYXRjaCxjb25zdHJ1Y3RvcixpZGVudGlmaWVyO2lmKGlzU3RyaW5nKGV4cHJlc3Npb24pKXttYXRjaD1leHByZXNzaW9uLm1hdGNoKENOVFJMX1JFRyksY29uc3RydWN0b3I9bWF0Y2hbMV0saWRlbnRpZmllcj1tYXRjaFszXTtleHByZXNzaW9uPWNvbnRyb2xsZXJzLmhhc093blByb3BlcnR5KGNvbnN0cnVjdG9yKT9jb250cm9sbGVyc1tjb25zdHJ1Y3Rvcl06Z2V0dGVyKGxvY2Fscy4kc2NvcGUsY29uc3RydWN0b3IsdHJ1ZSl8fGdldHRlcigkd2luZG93LGNvbnN0cnVjdG9yLHRydWUpO2Fzc2VydEFyZ0ZuKGV4cHJlc3Npb24sY29uc3RydWN0b3IsdHJ1ZSk7fQppbnN0YW5jZT0kaW5qZWN0b3IuaW5zdGFudGlhdGUoZXhwcmVzc2lvbixsb2NhbHMpO2lmKGlkZW50aWZpZXIpe2lmKCEobG9jYWxzJiZ0eXBlb2YgbG9jYWxzLiRzY29wZT09PSdvYmplY3QnKSl7dGhyb3cgbWluRXJyKCckY29udHJvbGxlcicpKCdub3NjcCcsIkNhbm5vdCBleHBvcnQgY29udHJvbGxlciAnezB9JyBhcyAnezF9JyEgTm8gJHNjb3BlIG9iamVjdCBwcm92aWRlZCB2aWEgYGxvY2Fsc2AuIixjb25zdHJ1Y3Rvcnx8ZXhwcmVzc2lvbi5uYW1lLGlkZW50aWZpZXIpO30KbG9jYWxzLiRzY29wZVtpZGVudGlmaWVyXT1pbnN0YW5jZTt9CnJldHVybiBpbnN0YW5jZTt9O31dO30KZnVuY3Rpb24gJERvY3VtZW50UHJvdmlkZXIoKXt0aGlzLiRnZXQ9Wyckd2luZG93JyxmdW5jdGlvbih3aW5kb3cpe3JldHVybiBqcUxpdGUod2luZG93LmRvY3VtZW50KTt9XTt9CmZ1bmN0aW9uICRFeGNlcHRpb25IYW5kbGVyUHJvdmlkZXIoKXt0aGlzLiRnZXQ9WyckbG9nJyxmdW5jdGlvbigkbG9nKXtyZXR1cm4gZnVuY3Rpb24oZXhjZXB0aW9uLGNhdXNlKXskbG9nLmVycm9yLmFwcGx5KCRsb2csYXJndW1lbnRzKTt9O31dO30KZnVuY3Rpb24gcGFyc2VIZWFkZXJzKGhlYWRlcnMpe3ZhciBwYXJzZWQ9e30sa2V5LHZhbCxpO2lmKCFoZWFkZXJzKXJldHVybiBwYXJzZWQ7Zm9yRWFjaChoZWFkZXJzLnNwbGl0KCdcbicpLGZ1bmN0aW9uKGxpbmUpe2k9bGluZS5pbmRleE9mKCc6Jyk7a2V5PWxvd2VyY2FzZSh0cmltKGxpbmUuc3Vic3RyKDAsaSkpKTt2YWw9dHJpbShsaW5lLnN1YnN0cihpKzEpKTtpZihrZXkpe2lmKHBhcnNlZFtrZXldKXtwYXJzZWRba2V5XSs9JywgJyt2YWw7fWVsc2V7cGFyc2VkW2tleV09dmFsO319fSk7cmV0dXJuIHBhcnNlZDt9CmZ1bmN0aW9uIGhlYWRlcnNHZXR0ZXIoaGVhZGVycyl7dmFyIGhlYWRlcnNPYmo9aXNPYmplY3QoaGVhZGVycyk/aGVhZGVyczp1bmRlZmluZWQ7cmV0dXJuIGZ1bmN0aW9uKG5hbWUpe2lmKCFoZWFkZXJzT2JqKWhlYWRlcnNPYmo9cGFyc2VIZWFkZXJzKGhlYWRlcnMpO2lmKG5hbWUpe3JldHVybiBoZWFkZXJzT2JqW2xvd2VyY2FzZShuYW1lKV18fG51bGw7fQpyZXR1cm4gaGVhZGVyc09iajt9O30KZnVuY3Rpb24gdHJhbnNmb3JtRGF0YShkYXRhLGhlYWRlcnMsZm5zKXtpZihpc0Z1bmN0aW9uKGZucykpCnJldHVybiBmbnMoZGF0YSxoZWFkZXJzKTtmb3JFYWNoKGZucyxmdW5jdGlvbihmbil7ZGF0YT1mbihkYXRhLGhlYWRlcnMpO30pO3JldHVybiBkYXRhO30KZnVuY3Rpb24gaXNTdWNjZXNzKHN0YXR1cyl7cmV0dXJuIDIwMDw9c3RhdHVzJiZzdGF0dXM8MzAwO30KZnVuY3Rpb24gJEh0dHBQcm92aWRlcigpe3ZhciBKU09OX1NUQVJUPS9eXHMqKFxbfFx7W15ce10pLyxKU09OX0VORD0vW1x9XF1dXHMqJC8sUFJPVEVDVElPTl9QUkVGSVg9L15cKVxdXH0nLD9cbi8sQ09OVEVOVF9UWVBFX0FQUExJQ0FUSU9OX0pTT049eydDb250ZW50LVR5cGUnOidhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTgnfTt2YXIgZGVmYXVsdHM9dGhpcy5kZWZhdWx0cz17dHJhbnNmb3JtUmVzcG9uc2U6W2Z1bmN0aW9uKGRhdGEpe2lmKGlzU3RyaW5nKGRhdGEpKXtkYXRhPWRhdGEucmVwbGFjZShQUk9URUNUSU9OX1BSRUZJWCwnJyk7aWYoSlNPTl9TVEFSVC50ZXN0KGRhdGEpJiZKU09OX0VORC50ZXN0KGRhdGEpKQpkYXRhPWZyb21Kc29uKGRhdGEpO30KcmV0dXJuIGRhdGE7fV0sdHJhbnNmb3JtUmVxdWVzdDpbZnVuY3Rpb24oZCl7cmV0dXJuIGlzT2JqZWN0KGQpJiYhaXNGaWxlKGQpJiYhaXNCbG9iKGQpP3RvSnNvbihkKTpkO31dLGhlYWRlcnM6e2NvbW1vbjp7J0FjY2VwdCc6J2FwcGxpY2F0aW9uL2pzb24sIHRleHQvcGxhaW4sICovKid9LHBvc3Q6c2hhbGxvd0NvcHkoQ09OVEVOVF9UWVBFX0FQUExJQ0FUSU9OX0pTT04pLHB1dDpzaGFsbG93Q29weShDT05URU5UX1RZUEVfQVBQTElDQVRJT05fSlNPTikscGF0Y2g6c2hhbGxvd0NvcHkoQ09OVEVOVF9UWVBFX0FQUExJQ0FUSU9OX0pTT04pfSx4c3JmQ29va2llTmFtZTonWFNSRi1UT0tFTicseHNyZkhlYWRlck5hbWU6J1gtWFNSRi1UT0tFTid9O3ZhciBpbnRlcmNlcHRvckZhY3Rvcmllcz10aGlzLmludGVyY2VwdG9ycz1bXTt2YXIgcmVzcG9uc2VJbnRlcmNlcHRvckZhY3Rvcmllcz10aGlzLnJlc3BvbnNlSW50ZXJjZXB0b3JzPVtdO3RoaXMuJGdldD1bJyRodHRwQmFja2VuZCcsJyRicm93c2VyJywnJGNhY2hlRmFjdG9yeScsJyRyb290U2NvcGUnLCckcScsJyRpbmplY3RvcicsZnVuY3Rpb24oJGh0dHBCYWNrZW5kLCRicm93c2VyLCRjYWNoZUZhY3RvcnksJHJvb3RTY29wZSwkcSwkaW5qZWN0b3Ipe3ZhciBkZWZhdWx0Q2FjaGU9JGNhY2hlRmFjdG9yeSgnJGh0dHAnKTt2YXIgcmV2ZXJzZWRJbnRlcmNlcHRvcnM9W107Zm9yRWFjaChpbnRlcmNlcHRvckZhY3RvcmllcyxmdW5jdGlvbihpbnRlcmNlcHRvckZhY3Rvcnkpe3JldmVyc2VkSW50ZXJjZXB0b3JzLnVuc2hpZnQoaXNTdHJpbmcoaW50ZXJjZXB0b3JGYWN0b3J5KT8kaW5qZWN0b3IuZ2V0KGludGVyY2VwdG9yRmFjdG9yeSk6JGluamVjdG9yLmludm9rZShpbnRlcmNlcHRvckZhY3RvcnkpKTt9KTtmb3JFYWNoKHJlc3BvbnNlSW50ZXJjZXB0b3JGYWN0b3JpZXMsZnVuY3Rpb24oaW50ZXJjZXB0b3JGYWN0b3J5LGluZGV4KXt2YXIgcmVzcG9uc2VGbj1pc1N0cmluZyhpbnRlcmNlcHRvckZhY3RvcnkpPyRpbmplY3Rvci5nZXQoaW50ZXJjZXB0b3JGYWN0b3J5KTokaW5qZWN0b3IuaW52b2tlKGludGVyY2VwdG9yRmFjdG9yeSk7cmV2ZXJzZWRJbnRlcmNlcHRvcnMuc3BsaWNlKGluZGV4LDAse3Jlc3BvbnNlOmZ1bmN0aW9uKHJlc3BvbnNlKXtyZXR1cm4gcmVzcG9uc2VGbigkcS53aGVuKHJlc3BvbnNlKSk7fSxyZXNwb25zZUVycm9yOmZ1bmN0aW9uKHJlc3BvbnNlKXtyZXR1cm4gcmVzcG9uc2VGbigkcS5yZWplY3QocmVzcG9uc2UpKTt9fSk7fSk7ZnVuY3Rpb24gJGh0dHAocmVxdWVzdENvbmZpZyl7dmFyIGNvbmZpZz17bWV0aG9kOidnZXQnLHRyYW5zZm9ybVJlcXVlc3Q6ZGVmYXVsdHMudHJhbnNmb3JtUmVxdWVzdCx0cmFuc2Zvcm1SZXNwb25zZTpkZWZhdWx0cy50cmFuc2Zvcm1SZXNwb25zZX07dmFyIGhlYWRlcnM9bWVyZ2VIZWFkZXJzKHJlcXVlc3RDb25maWcpO2V4dGVuZChjb25maWcscmVxdWVzdENvbmZpZyk7Y29uZmlnLmhlYWRlcnM9aGVhZGVycztjb25maWcubWV0aG9kPXVwcGVyY2FzZShjb25maWcubWV0aG9kKTt2YXIgc2VydmVyUmVxdWVzdD1mdW5jdGlvbihjb25maWcpe2hlYWRlcnM9Y29uZmlnLmhlYWRlcnM7dmFyIHJlcURhdGE9dHJhbnNmb3JtRGF0YShjb25maWcuZGF0YSxoZWFkZXJzR2V0dGVyKGhlYWRlcnMpLGNvbmZpZy50cmFuc2Zvcm1SZXF1ZXN0KTtpZihpc1VuZGVmaW5lZChjb25maWcuZGF0YSkpe2ZvckVhY2goaGVhZGVycyxmdW5jdGlvbih2YWx1ZSxoZWFkZXIpe2lmKGxvd2VyY2FzZShoZWFkZXIpPT09J2NvbnRlbnQtdHlwZScpe2RlbGV0ZSBoZWFkZXJzW2hlYWRlcl07fX0pO30KaWYoaXNVbmRlZmluZWQoY29uZmlnLndpdGhDcmVkZW50aWFscykmJiFpc1VuZGVmaW5lZChkZWZhdWx0cy53aXRoQ3JlZGVudGlhbHMpKXtjb25maWcud2l0aENyZWRlbnRpYWxzPWRlZmF1bHRzLndpdGhDcmVkZW50aWFsczt9CnJldHVybiBzZW5kUmVxKGNvbmZpZyxyZXFEYXRhLGhlYWRlcnMpLnRoZW4odHJhbnNmb3JtUmVzcG9uc2UsdHJhbnNmb3JtUmVzcG9uc2UpO307dmFyIGNoYWluPVtzZXJ2ZXJSZXF1ZXN0LHVuZGVmaW5lZF07dmFyIHByb21pc2U9JHEud2hlbihjb25maWcpO2ZvckVhY2gocmV2ZXJzZWRJbnRlcmNlcHRvcnMsZnVuY3Rpb24oaW50ZXJjZXB0b3Ipe2lmKGludGVyY2VwdG9yLnJlcXVlc3R8fGludGVyY2VwdG9yLnJlcXVlc3RFcnJvcil7Y2hhaW4udW5zaGlmdChpbnRlcmNlcHRvci5yZXF1ZXN0LGludGVyY2VwdG9yLnJlcXVlc3RFcnJvcik7fQppZihpbnRlcmNlcHRvci5yZXNwb25zZXx8aW50ZXJjZXB0b3IucmVzcG9uc2VFcnJvcil7Y2hhaW4ucHVzaChpbnRlcmNlcHRvci5yZXNwb25zZSxpbnRlcmNlcHRvci5yZXNwb25zZUVycm9yKTt9fSk7d2hpbGUoY2hhaW4ubGVuZ3RoKXt2YXIgdGhlbkZuPWNoYWluLnNoaWZ0KCk7dmFyIHJlamVjdEZuPWNoYWluLnNoaWZ0KCk7cHJvbWlzZT1wcm9taXNlLnRoZW4odGhlbkZuLHJlamVjdEZuKTt9CnByb21pc2Uuc3VjY2Vzcz1mdW5jdGlvbihmbil7cHJvbWlzZS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKXtmbihyZXNwb25zZS5kYXRhLHJlc3BvbnNlLnN0YXR1cyxyZXNwb25zZS5oZWFkZXJzLGNvbmZpZyk7fSk7cmV0dXJuIHByb21pc2U7fTtwcm9taXNlLmVycm9yPWZ1bmN0aW9uKGZuKXtwcm9taXNlLnRoZW4obnVsbCxmdW5jdGlvbihyZXNwb25zZSl7Zm4ocmVzcG9uc2UuZGF0YSxyZXNwb25zZS5zdGF0dXMscmVzcG9uc2UuaGVhZGVycyxjb25maWcpO30pO3JldHVybiBwcm9taXNlO307cmV0dXJuIHByb21pc2U7ZnVuY3Rpb24gdHJhbnNmb3JtUmVzcG9uc2UocmVzcG9uc2Upe3ZhciByZXNwPWV4dGVuZCh7fSxyZXNwb25zZSx7ZGF0YTp0cmFuc2Zvcm1EYXRhKHJlc3BvbnNlLmRhdGEscmVzcG9uc2UuaGVhZGVycyxjb25maWcudHJhbnNmb3JtUmVzcG9uc2UpfSk7cmV0dXJuKGlzU3VjY2VzcyhyZXNwb25zZS5zdGF0dXMpKT9yZXNwOiRxLnJlamVjdChyZXNwKTt9CmZ1bmN0aW9uIG1lcmdlSGVhZGVycyhjb25maWcpe3ZhciBkZWZIZWFkZXJzPWRlZmF1bHRzLmhlYWRlcnMscmVxSGVhZGVycz1leHRlbmQoe30sY29uZmlnLmhlYWRlcnMpLGRlZkhlYWRlck5hbWUsbG93ZXJjYXNlRGVmSGVhZGVyTmFtZSxyZXFIZWFkZXJOYW1lO2RlZkhlYWRlcnM9ZXh0ZW5kKHt9LGRlZkhlYWRlcnMuY29tbW9uLGRlZkhlYWRlcnNbbG93ZXJjYXNlKGNvbmZpZy5tZXRob2QpXSk7ZXhlY0hlYWRlcnMoZGVmSGVhZGVycyk7ZXhlY0hlYWRlcnMocmVxSGVhZGVycyk7ZGVmYXVsdEhlYWRlcnNJdGVyYXRpb246Zm9yKGRlZkhlYWRlck5hbWUgaW4gZGVmSGVhZGVycyl7bG93ZXJjYXNlRGVmSGVhZGVyTmFtZT1sb3dlcmNhc2UoZGVmSGVhZGVyTmFtZSk7Zm9yKHJlcUhlYWRlck5hbWUgaW4gcmVxSGVhZGVycyl7aWYobG93ZXJjYXNlKHJlcUhlYWRlck5hbWUpPT09bG93ZXJjYXNlRGVmSGVhZGVyTmFtZSl7Y29udGludWUgZGVmYXVsdEhlYWRlcnNJdGVyYXRpb247fX0KcmVxSGVhZGVyc1tkZWZIZWFkZXJOYW1lXT1kZWZIZWFkZXJzW2RlZkhlYWRlck5hbWVdO30KcmV0dXJuIHJlcUhlYWRlcnM7ZnVuY3Rpb24gZXhlY0hlYWRlcnMoaGVhZGVycyl7dmFyIGhlYWRlckNvbnRlbnQ7Zm9yRWFjaChoZWFkZXJzLGZ1bmN0aW9uKGhlYWRlckZuLGhlYWRlcil7aWYoaXNGdW5jdGlvbihoZWFkZXJGbikpe2hlYWRlckNvbnRlbnQ9aGVhZGVyRm4oKTtpZihoZWFkZXJDb250ZW50IT1udWxsKXtoZWFkZXJzW2hlYWRlcl09aGVhZGVyQ29udGVudDt9ZWxzZXtkZWxldGUgaGVhZGVyc1toZWFkZXJdO319fSk7fX19CiRodHRwLnBlbmRpbmdSZXF1ZXN0cz1bXTtjcmVhdGVTaG9ydE1ldGhvZHMoJ2dldCcsJ2RlbGV0ZScsJ2hlYWQnLCdqc29ucCcpO2NyZWF0ZVNob3J0TWV0aG9kc1dpdGhEYXRhKCdwb3N0JywncHV0Jyk7JGh0dHAuZGVmYXVsdHM9ZGVmYXVsdHM7cmV0dXJuICRodHRwO2Z1bmN0aW9uIGNyZWF0ZVNob3J0TWV0aG9kcyhuYW1lcyl7Zm9yRWFjaChhcmd1bWVudHMsZnVuY3Rpb24obmFtZSl7JGh0dHBbbmFtZV09ZnVuY3Rpb24odXJsLGNvbmZpZyl7cmV0dXJuICRodHRwKGV4dGVuZChjb25maWd8fHt9LHttZXRob2Q6bmFtZSx1cmw6dXJsfSkpO307fSk7fQpmdW5jdGlvbiBjcmVhdGVTaG9ydE1ldGhvZHNXaXRoRGF0YShuYW1lKXtmb3JFYWNoKGFyZ3VtZW50cyxmdW5jdGlvbihuYW1lKXskaHR0cFtuYW1lXT1mdW5jdGlvbih1cmwsZGF0YSxjb25maWcpe3JldHVybiAkaHR0cChleHRlbmQoY29uZmlnfHx7fSx7bWV0aG9kOm5hbWUsdXJsOnVybCxkYXRhOmRhdGF9KSk7fTt9KTt9CmZ1bmN0aW9uIHNlbmRSZXEoY29uZmlnLHJlcURhdGEscmVxSGVhZGVycyl7dmFyIGRlZmVycmVkPSRxLmRlZmVyKCkscHJvbWlzZT1kZWZlcnJlZC5wcm9taXNlLGNhY2hlLGNhY2hlZFJlc3AsdXJsPWJ1aWxkVXJsKGNvbmZpZy51cmwsY29uZmlnLnBhcmFtcyk7JGh0dHAucGVuZGluZ1JlcXVlc3RzLnB1c2goY29uZmlnKTtwcm9taXNlLnRoZW4ocmVtb3ZlUGVuZGluZ1JlcSxyZW1vdmVQZW5kaW5nUmVxKTtpZigoY29uZmlnLmNhY2hlfHxkZWZhdWx0cy5jYWNoZSkmJmNvbmZpZy5jYWNoZSE9PWZhbHNlJiZjb25maWcubWV0aG9kPT0nR0VUJyl7Y2FjaGU9aXNPYmplY3QoY29uZmlnLmNhY2hlKT9jb25maWcuY2FjaGU6aXNPYmplY3QoZGVmYXVsdHMuY2FjaGUpP2RlZmF1bHRzLmNhY2hlOmRlZmF1bHRDYWNoZTt9CmlmKGNhY2hlKXtjYWNoZWRSZXNwPWNhY2hlLmdldCh1cmwpO2lmKGlzRGVmaW5lZChjYWNoZWRSZXNwKSl7aWYoY2FjaGVkUmVzcC50aGVuKXtjYWNoZWRSZXNwLnRoZW4ocmVtb3ZlUGVuZGluZ1JlcSxyZW1vdmVQZW5kaW5nUmVxKTtyZXR1cm4gY2FjaGVkUmVzcDt9ZWxzZXtpZihpc0FycmF5KGNhY2hlZFJlc3ApKXtyZXNvbHZlUHJvbWlzZShjYWNoZWRSZXNwWzFdLGNhY2hlZFJlc3BbMF0sc2hhbGxvd0NvcHkoY2FjaGVkUmVzcFsyXSksY2FjaGVkUmVzcFszXSk7fWVsc2V7cmVzb2x2ZVByb21pc2UoY2FjaGVkUmVzcCwyMDAse30sJ09LJyk7fX19ZWxzZXtjYWNoZS5wdXQodXJsLHByb21pc2UpO319CmlmKGlzVW5kZWZpbmVkKGNhY2hlZFJlc3ApKXt2YXIgeHNyZlZhbHVlPXVybElzU2FtZU9yaWdpbihjb25maWcudXJsKT8kYnJvd3Nlci5jb29raWVzKClbY29uZmlnLnhzcmZDb29raWVOYW1lfHxkZWZhdWx0cy54c3JmQ29va2llTmFtZV06dW5kZWZpbmVkO2lmKHhzcmZWYWx1ZSl7cmVxSGVhZGVyc1soY29uZmlnLnhzcmZIZWFkZXJOYW1lfHxkZWZhdWx0cy54c3JmSGVhZGVyTmFtZSldPXhzcmZWYWx1ZTt9CiRodHRwQmFja2VuZChjb25maWcubWV0aG9kLHVybCxyZXFEYXRhLGRvbmUscmVxSGVhZGVycyxjb25maWcudGltZW91dCxjb25maWcud2l0aENyZWRlbnRpYWxzLGNvbmZpZy5yZXNwb25zZVR5cGUpO30KcmV0dXJuIHByb21pc2U7ZnVuY3Rpb24gZG9uZShzdGF0dXMscmVzcG9uc2UsaGVhZGVyc1N0cmluZyxzdGF0dXNUZXh0KXtpZihjYWNoZSl7aWYoaXNTdWNjZXNzKHN0YXR1cykpe2NhY2hlLnB1dCh1cmwsW3N0YXR1cyxyZXNwb25zZSxwYXJzZUhlYWRlcnMoaGVhZGVyc1N0cmluZyksc3RhdHVzVGV4dF0pO31lbHNle2NhY2hlLnJlbW92ZSh1cmwpO319CnJlc29sdmVQcm9taXNlKHJlc3BvbnNlLHN0YXR1cyxoZWFkZXJzU3RyaW5nLHN0YXR1c1RleHQpO2lmKCEkcm9vdFNjb3BlLiQkcGhhc2UpJHJvb3RTY29wZS4kYXBwbHkoKTt9CmZ1bmN0aW9uIHJlc29sdmVQcm9taXNlKHJlc3BvbnNlLHN0YXR1cyxoZWFkZXJzLHN0YXR1c1RleHQpe3N0YXR1cz1NYXRoLm1heChzdGF0dXMsMCk7KGlzU3VjY2VzcyhzdGF0dXMpP2RlZmVycmVkLnJlc29sdmU6ZGVmZXJyZWQucmVqZWN0KSh7ZGF0YTpyZXNwb25zZSxzdGF0dXM6c3RhdHVzLGhlYWRlcnM6aGVhZGVyc0dldHRlcihoZWFkZXJzKSxjb25maWc6Y29uZmlnLHN0YXR1c1RleHQ6c3RhdHVzVGV4dH0pO30KZnVuY3Rpb24gcmVtb3ZlUGVuZGluZ1JlcSgpe3ZhciBpZHg9aW5kZXhPZigkaHR0cC5wZW5kaW5nUmVxdWVzdHMsY29uZmlnKTtpZihpZHghPT0tMSkkaHR0cC5wZW5kaW5nUmVxdWVzdHMuc3BsaWNlKGlkeCwxKTt9fQpmdW5jdGlvbiBidWlsZFVybCh1cmwscGFyYW1zKXtpZighcGFyYW1zKXJldHVybiB1cmw7dmFyIHBhcnRzPVtdO2ZvckVhY2hTb3J0ZWQocGFyYW1zLGZ1bmN0aW9uKHZhbHVlLGtleSl7aWYodmFsdWU9PT1udWxsfHxpc1VuZGVmaW5lZCh2YWx1ZSkpcmV0dXJuO2lmKCFpc0FycmF5KHZhbHVlKSl2YWx1ZT1bdmFsdWVdO2ZvckVhY2godmFsdWUsZnVuY3Rpb24odil7aWYoaXNPYmplY3Qodikpe3Y9dG9Kc29uKHYpO30KcGFydHMucHVzaChlbmNvZGVVcmlRdWVyeShrZXkpKyc9JysKZW5jb2RlVXJpUXVlcnkodikpO30pO30pO2lmKHBhcnRzLmxlbmd0aD4wKXt1cmwrPSgodXJsLmluZGV4T2YoJz8nKT09LTEpPyc/JzonJicpK3BhcnRzLmpvaW4oJyYnKTt9CnJldHVybiB1cmw7fX1dO30KZnVuY3Rpb24gY3JlYXRlWGhyKG1ldGhvZCl7aWYobXNpZTw9OCYmKCFtZXRob2QubWF0Y2goL14oZ2V0fHBvc3R8aGVhZHxwdXR8ZGVsZXRlfG9wdGlvbnMpJC9pKXx8IXdpbmRvdy5YTUxIdHRwUmVxdWVzdCkpe3JldHVybiBuZXcgd2luZG93LkFjdGl2ZVhPYmplY3QoIk1pY3Jvc29mdC5YTUxIVFRQIik7fWVsc2UgaWYod2luZG93LlhNTEh0dHBSZXF1ZXN0KXtyZXR1cm4gbmV3IHdpbmRvdy5YTUxIdHRwUmVxdWVzdCgpO30KdGhyb3cgbWluRXJyKCckaHR0cEJhY2tlbmQnKSgnbm94aHInLCJUaGlzIGJyb3dzZXIgZG9lcyBub3Qgc3VwcG9ydCBYTUxIdHRwUmVxdWVzdC4iKTt9CmZ1bmN0aW9uICRIdHRwQmFja2VuZFByb3ZpZGVyKCl7dGhpcy4kZ2V0PVsnJGJyb3dzZXInLCckd2luZG93JywnJGRvY3VtZW50JyxmdW5jdGlvbigkYnJvd3Nlciwkd2luZG93LCRkb2N1bWVudCl7cmV0dXJuIGNyZWF0ZUh0dHBCYWNrZW5kKCRicm93c2VyLGNyZWF0ZVhociwkYnJvd3Nlci5kZWZlciwkd2luZG93LmFuZ3VsYXIuY2FsbGJhY2tzLCRkb2N1bWVudFswXSk7fV07fQpmdW5jdGlvbiBjcmVhdGVIdHRwQmFja2VuZCgkYnJvd3NlcixjcmVhdGVYaHIsJGJyb3dzZXJEZWZlcixjYWxsYmFja3MscmF3RG9jdW1lbnQpe3ZhciBBQk9SVEVEPS0xO3JldHVybiBmdW5jdGlvbihtZXRob2QsdXJsLHBvc3QsY2FsbGJhY2ssaGVhZGVycyx0aW1lb3V0LHdpdGhDcmVkZW50aWFscyxyZXNwb25zZVR5cGUpe3ZhciBzdGF0dXM7JGJyb3dzZXIuJCRpbmNPdXRzdGFuZGluZ1JlcXVlc3RDb3VudCgpO3VybD11cmx8fCRicm93c2VyLnVybCgpO2lmKGxvd2VyY2FzZShtZXRob2QpPT0nanNvbnAnKXt2YXIgY2FsbGJhY2tJZD0nXycrKGNhbGxiYWNrcy5jb3VudGVyKyspLnRvU3RyaW5nKDM2KTtjYWxsYmFja3NbY2FsbGJhY2tJZF09ZnVuY3Rpb24oZGF0YSl7Y2FsbGJhY2tzW2NhbGxiYWNrSWRdLmRhdGE9ZGF0YTtjYWxsYmFja3NbY2FsbGJhY2tJZF0uY2FsbGVkPXRydWU7fTt2YXIganNvbnBEb25lPWpzb25wUmVxKHVybC5yZXBsYWNlKCdKU09OX0NBTExCQUNLJywnYW5ndWxhci5jYWxsYmFja3MuJytjYWxsYmFja0lkKSxjYWxsYmFja0lkLGZ1bmN0aW9uKHN0YXR1cyx0ZXh0KXtjb21wbGV0ZVJlcXVlc3QoY2FsbGJhY2ssc3RhdHVzLGNhbGxiYWNrc1tjYWxsYmFja0lkXS5kYXRhLCIiLHRleHQpO2NhbGxiYWNrc1tjYWxsYmFja0lkXT1ub29wO30pO31lbHNle3ZhciB4aHI9Y3JlYXRlWGhyKG1ldGhvZCk7eGhyLm9wZW4obWV0aG9kLHVybCx0cnVlKTtmb3JFYWNoKGhlYWRlcnMsZnVuY3Rpb24odmFsdWUsa2V5KXtpZihpc0RlZmluZWQodmFsdWUpKXt4aHIuc2V0UmVxdWVzdEhlYWRlcihrZXksdmFsdWUpO319KTt4aHIub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7aWYoeGhyJiZ4aHIucmVhZHlTdGF0ZT09NCl7dmFyIHJlc3BvbnNlSGVhZGVycz1udWxsLHJlc3BvbnNlPW51bGwsc3RhdHVzVGV4dD0nJztpZihzdGF0dXMhPT1BQk9SVEVEKXtyZXNwb25zZUhlYWRlcnM9eGhyLmdldEFsbFJlc3BvbnNlSGVhZGVycygpO3Jlc3BvbnNlPSgncmVzcG9uc2UnaW4geGhyKT94aHIucmVzcG9uc2U6eGhyLnJlc3BvbnNlVGV4dDt9CmlmKCEoc3RhdHVzPT09QUJPUlRFRCYmbXNpZTwxMCkpe3N0YXR1c1RleHQ9eGhyLnN0YXR1c1RleHQ7fQpjb21wbGV0ZVJlcXVlc3QoY2FsbGJhY2ssc3RhdHVzfHx4aHIuc3RhdHVzLHJlc3BvbnNlLHJlc3BvbnNlSGVhZGVycyxzdGF0dXNUZXh0KTt9fTtpZih3aXRoQ3JlZGVudGlhbHMpe3hoci53aXRoQ3JlZGVudGlhbHM9dHJ1ZTt9CmlmKHJlc3BvbnNlVHlwZSl7dHJ5e3hoci5yZXNwb25zZVR5cGU9cmVzcG9uc2VUeXBlO31jYXRjaChlKXtpZihyZXNwb25zZVR5cGUhPT0nanNvbicpe3Rocm93IGU7fX19Cnhoci5zZW5kKHBvc3R8fG51bGwpO30KaWYodGltZW91dD4wKXt2YXIgdGltZW91dElkPSRicm93c2VyRGVmZXIodGltZW91dFJlcXVlc3QsdGltZW91dCk7fWVsc2UgaWYodGltZW91dCYmdGltZW91dC50aGVuKXt0aW1lb3V0LnRoZW4odGltZW91dFJlcXVlc3QpO30KZnVuY3Rpb24gdGltZW91dFJlcXVlc3QoKXtzdGF0dXM9QUJPUlRFRDtqc29ucERvbmUmJmpzb25wRG9uZSgpO3hociYmeGhyLmFib3J0KCk7fQpmdW5jdGlvbiBjb21wbGV0ZVJlcXVlc3QoY2FsbGJhY2ssc3RhdHVzLHJlc3BvbnNlLGhlYWRlcnNTdHJpbmcsc3RhdHVzVGV4dCl7dGltZW91dElkJiYkYnJvd3NlckRlZmVyLmNhbmNlbCh0aW1lb3V0SWQpO2pzb25wRG9uZT14aHI9bnVsbDtpZihzdGF0dXM9PT0wKXtzdGF0dXM9cmVzcG9uc2U/MjAwOnVybFJlc29sdmUodXJsKS5wcm90b2NvbD09J2ZpbGUnPzQwNDowO30Kc3RhdHVzPXN0YXR1cz09PTEyMjM/MjA0OnN0YXR1cztzdGF0dXNUZXh0PXN0YXR1c1RleHR8fCcnO2NhbGxiYWNrKHN0YXR1cyxyZXNwb25zZSxoZWFkZXJzU3RyaW5nLHN0YXR1c1RleHQpOyRicm93c2VyLiQkY29tcGxldGVPdXRzdGFuZGluZ1JlcXVlc3Qobm9vcCk7fX07ZnVuY3Rpb24ganNvbnBSZXEodXJsLGNhbGxiYWNrSWQsZG9uZSl7dmFyIHNjcmlwdD1yYXdEb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKSxjYWxsYmFjaz1udWxsO3NjcmlwdC50eXBlPSJ0ZXh0L2phdmFzY3JpcHQiO3NjcmlwdC5zcmM9dXJsO3NjcmlwdC5hc3luYz10cnVlO2NhbGxiYWNrPWZ1bmN0aW9uKGV2ZW50KXtyZW1vdmVFdmVudExpc3RlbmVyRm4oc2NyaXB0LCJsb2FkIixjYWxsYmFjayk7cmVtb3ZlRXZlbnRMaXN0ZW5lckZuKHNjcmlwdCwiZXJyb3IiLGNhbGxiYWNrKTtyYXdEb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKHNjcmlwdCk7c2NyaXB0PW51bGw7dmFyIHN0YXR1cz0tMTt2YXIgdGV4dD0idW5rbm93biI7aWYoZXZlbnQpe2lmKGV2ZW50LnR5cGU9PT0ibG9hZCImJiFjYWxsYmFja3NbY2FsbGJhY2tJZF0uY2FsbGVkKXtldmVudD17dHlwZToiZXJyb3IifTt9CnRleHQ9ZXZlbnQudHlwZTtzdGF0dXM9ZXZlbnQudHlwZT09PSJlcnJvciI/NDA0OjIwMDt9CmlmKGRvbmUpe2RvbmUoc3RhdHVzLHRleHQpO319O2FkZEV2ZW50TGlzdGVuZXJGbihzY3JpcHQsImxvYWQiLGNhbGxiYWNrKTthZGRFdmVudExpc3RlbmVyRm4oc2NyaXB0LCJlcnJvciIsY2FsbGJhY2spO2lmKG1zaWU8PTgpe3NjcmlwdC5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKXtpZihpc1N0cmluZyhzY3JpcHQucmVhZHlTdGF0ZSkmJi9sb2FkZWR8Y29tcGxldGUvLnRlc3Qoc2NyaXB0LnJlYWR5U3RhdGUpKXtzY3JpcHQub25yZWFkeXN0YXRlY2hhbmdlPW51bGw7Y2FsbGJhY2soe3R5cGU6J2xvYWQnfSk7fX07fQpyYXdEb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHNjcmlwdCk7cmV0dXJuIGNhbGxiYWNrO319CnZhciAkaW50ZXJwb2xhdGVNaW5FcnI9bWluRXJyKCckaW50ZXJwb2xhdGUnKTtmdW5jdGlvbiAkSW50ZXJwb2xhdGVQcm92aWRlcigpe3ZhciBzdGFydFN5bWJvbD0ne3snO3ZhciBlbmRTeW1ib2w9J319Jzt0aGlzLnN0YXJ0U3ltYm9sPWZ1bmN0aW9uKHZhbHVlKXtpZih2YWx1ZSl7c3RhcnRTeW1ib2w9dmFsdWU7cmV0dXJuIHRoaXM7fWVsc2V7cmV0dXJuIHN0YXJ0U3ltYm9sO319O3RoaXMuZW5kU3ltYm9sPWZ1bmN0aW9uKHZhbHVlKXtpZih2YWx1ZSl7ZW5kU3ltYm9sPXZhbHVlO3JldHVybiB0aGlzO31lbHNle3JldHVybiBlbmRTeW1ib2w7fX07dGhpcy4kZ2V0PVsnJHBhcnNlJywnJGV4Y2VwdGlvbkhhbmRsZXInLCckc2NlJyxmdW5jdGlvbigkcGFyc2UsJGV4Y2VwdGlvbkhhbmRsZXIsJHNjZSl7dmFyIHN0YXJ0U3ltYm9sTGVuZ3RoPXN0YXJ0U3ltYm9sLmxlbmd0aCxlbmRTeW1ib2xMZW5ndGg9ZW5kU3ltYm9sLmxlbmd0aDtmdW5jdGlvbiAkaW50ZXJwb2xhdGUodGV4dCxtdXN0SGF2ZUV4cHJlc3Npb24sdHJ1c3RlZENvbnRleHQpe3ZhciBzdGFydEluZGV4LGVuZEluZGV4LGluZGV4PTAscGFydHM9W10sbGVuZ3RoPXRleHQubGVuZ3RoLGhhc0ludGVycG9sYXRpb249ZmFsc2UsZm4sZXhwLGNvbmNhdD1bXTt3aGlsZShpbmRleDxsZW5ndGgpe2lmKCgoc3RhcnRJbmRleD10ZXh0LmluZGV4T2Yoc3RhcnRTeW1ib2wsaW5kZXgpKSE9LTEpJiYoKGVuZEluZGV4PXRleHQuaW5kZXhPZihlbmRTeW1ib2wsc3RhcnRJbmRleCtzdGFydFN5bWJvbExlbmd0aCkpIT0tMSkpeyhpbmRleCE9c3RhcnRJbmRleCkmJnBhcnRzLnB1c2godGV4dC5zdWJzdHJpbmcoaW5kZXgsc3RhcnRJbmRleCkpO3BhcnRzLnB1c2goZm49JHBhcnNlKGV4cD10ZXh0LnN1YnN0cmluZyhzdGFydEluZGV4K3N0YXJ0U3ltYm9sTGVuZ3RoLGVuZEluZGV4KSkpO2ZuLmV4cD1leHA7aW5kZXg9ZW5kSW5kZXgrZW5kU3ltYm9sTGVuZ3RoO2hhc0ludGVycG9sYXRpb249dHJ1ZTt9ZWxzZXsoaW5kZXghPWxlbmd0aCkmJnBhcnRzLnB1c2godGV4dC5zdWJzdHJpbmcoaW5kZXgpKTtpbmRleD1sZW5ndGg7fX0KaWYoIShsZW5ndGg9cGFydHMubGVuZ3RoKSl7cGFydHMucHVzaCgnJyk7bGVuZ3RoPTE7fQppZih0cnVzdGVkQ29udGV4dCYmcGFydHMubGVuZ3RoPjEpe3Rocm93ICRpbnRlcnBvbGF0ZU1pbkVycignbm9jb25jYXQnLCJFcnJvciB3aGlsZSBpbnRlcnBvbGF0aW5nOiB7MH1cblN0cmljdCBDb250ZXh0dWFsIEVzY2FwaW5nIGRpc2FsbG93cyAiKyJpbnRlcnBvbGF0aW9ucyB0aGF0IGNvbmNhdGVuYXRlIG11bHRpcGxlIGV4cHJlc3Npb25zIHdoZW4gYSB0cnVzdGVkIHZhbHVlIGlzICIrInJlcXVpcmVkLiAgU2VlIGh0dHA6Ly9kb2NzLmFuZ3VsYXJqcy5vcmcvYXBpL25nLiRzY2UiLHRleHQpO30KaWYoIW11c3RIYXZlRXhwcmVzc2lvbnx8aGFzSW50ZXJwb2xhdGlvbil7Y29uY2F0Lmxlbmd0aD1sZW5ndGg7Zm49ZnVuY3Rpb24oY29udGV4dCl7dHJ5e2Zvcih2YXIgaT0wLGlpPWxlbmd0aCxwYXJ0O2k8aWk7aSsrKXtpZih0eXBlb2YocGFydD1wYXJ0c1tpXSk9PSdmdW5jdGlvbicpe3BhcnQ9cGFydChjb250ZXh0KTtpZih0cnVzdGVkQ29udGV4dCl7cGFydD0kc2NlLmdldFRydXN0ZWQodHJ1c3RlZENvbnRleHQscGFydCk7fWVsc2V7cGFydD0kc2NlLnZhbHVlT2YocGFydCk7fQppZihwYXJ0PT1udWxsKXtwYXJ0PScnO31lbHNle3N3aXRjaCh0eXBlb2YgcGFydCl7Y2FzZSdzdHJpbmcnOnticmVhazt9CmNhc2UnbnVtYmVyJzp7cGFydD0nJytwYXJ0O2JyZWFrO30KZGVmYXVsdDp7cGFydD10b0pzb24ocGFydCk7fX19fQpjb25jYXRbaV09cGFydDt9CnJldHVybiBjb25jYXQuam9pbignJyk7fQpjYXRjaChlcnIpe3ZhciBuZXdFcnI9JGludGVycG9sYXRlTWluRXJyKCdpbnRlcnInLCJDYW4ndCBpbnRlcnBvbGF0ZTogezB9XG57MX0iLHRleHQsZXJyLnRvU3RyaW5nKCkpOyRleGNlcHRpb25IYW5kbGVyKG5ld0Vycik7fX07Zm4uZXhwPXRleHQ7Zm4ucGFydHM9cGFydHM7cmV0dXJuIGZuO319CiRpbnRlcnBvbGF0ZS5zdGFydFN5bWJvbD1mdW5jdGlvbigpe3JldHVybiBzdGFydFN5bWJvbDt9OyRpbnRlcnBvbGF0ZS5lbmRTeW1ib2w9ZnVuY3Rpb24oKXtyZXR1cm4gZW5kU3ltYm9sO307cmV0dXJuICRpbnRlcnBvbGF0ZTt9XTt9CmZ1bmN0aW9uICRJbnRlcnZhbFByb3ZpZGVyKCl7dGhpcy4kZ2V0PVsnJHJvb3RTY29wZScsJyR3aW5kb3cnLCckcScsZnVuY3Rpb24oJHJvb3RTY29wZSwkd2luZG93LCRxKXt2YXIgaW50ZXJ2YWxzPXt9O2Z1bmN0aW9uIGludGVydmFsKGZuLGRlbGF5LGNvdW50LGludm9rZUFwcGx5KXt2YXIgc2V0SW50ZXJ2YWw9JHdpbmRvdy5zZXRJbnRlcnZhbCxjbGVhckludGVydmFsPSR3aW5kb3cuY2xlYXJJbnRlcnZhbCxkZWZlcnJlZD0kcS5kZWZlcigpLHByb21pc2U9ZGVmZXJyZWQucHJvbWlzZSxpdGVyYXRpb249MCxza2lwQXBwbHk9KGlzRGVmaW5lZChpbnZva2VBcHBseSkmJiFpbnZva2VBcHBseSk7Y291bnQ9aXNEZWZpbmVkKGNvdW50KT9jb3VudDowO3Byb21pc2UudGhlbihudWxsLG51bGwsZm4pO3Byb21pc2UuJCRpbnRlcnZhbElkPXNldEludGVydmFsKGZ1bmN0aW9uIHRpY2soKXtkZWZlcnJlZC5ub3RpZnkoaXRlcmF0aW9uKyspO2lmKGNvdW50PjAmJml0ZXJhdGlvbj49Y291bnQpe2RlZmVycmVkLnJlc29sdmUoaXRlcmF0aW9uKTtjbGVhckludGVydmFsKHByb21pc2UuJCRpbnRlcnZhbElkKTtkZWxldGUgaW50ZXJ2YWxzW3Byb21pc2UuJCRpbnRlcnZhbElkXTt9CmlmKCFza2lwQXBwbHkpJHJvb3RTY29wZS4kYXBwbHkoKTt9LGRlbGF5KTtpbnRlcnZhbHNbcHJvbWlzZS4kJGludGVydmFsSWRdPWRlZmVycmVkO3JldHVybiBwcm9taXNlO30KaW50ZXJ2YWwuY2FuY2VsPWZ1bmN0aW9uKHByb21pc2Upe2lmKHByb21pc2UmJnByb21pc2UuJCRpbnRlcnZhbElkIGluIGludGVydmFscyl7aW50ZXJ2YWxzW3Byb21pc2UuJCRpbnRlcnZhbElkXS5yZWplY3QoJ2NhbmNlbGVkJyk7JHdpbmRvdy5jbGVhckludGVydmFsKHByb21pc2UuJCRpbnRlcnZhbElkKTtkZWxldGUgaW50ZXJ2YWxzW3Byb21pc2UuJCRpbnRlcnZhbElkXTtyZXR1cm4gdHJ1ZTt9CnJldHVybiBmYWxzZTt9O3JldHVybiBpbnRlcnZhbDt9XTt9CmZ1bmN0aW9uICRMb2NhbGVQcm92aWRlcigpe3RoaXMuJGdldD1mdW5jdGlvbigpe3JldHVybntpZDonZW4tdXMnLE5VTUJFUl9GT1JNQVRTOntERUNJTUFMX1NFUDonLicsR1JPVVBfU0VQOicsJyxQQVRURVJOUzpbe21pbkludDoxLG1pbkZyYWM6MCxtYXhGcmFjOjMscG9zUHJlOicnLHBvc1N1ZjonJyxuZWdQcmU6Jy0nLG5lZ1N1ZjonJyxnU2l6ZTozLGxnU2l6ZTozfSx7bWluSW50OjEsbWluRnJhYzoyLG1heEZyYWM6Mixwb3NQcmU6J1x1MDBBNCcscG9zU3VmOicnLG5lZ1ByZTonKFx1MDBBNCcsbmVnU3VmOicpJyxnU2l6ZTozLGxnU2l6ZTozfV0sQ1VSUkVOQ1lfU1lNOickJ30sREFURVRJTUVfRk9STUFUUzp7TU9OVEg6J0phbnVhcnksRmVicnVhcnksTWFyY2gsQXByaWwsTWF5LEp1bmUsSnVseSxBdWd1c3QsU2VwdGVtYmVyLE9jdG9iZXIsTm92ZW1iZXIsRGVjZW1iZXInLnNwbGl0KCcsJyksU0hPUlRNT05USDonSmFuLEZlYixNYXIsQXByLE1heSxKdW4sSnVsLEF1ZyxTZXAsT2N0LE5vdixEZWMnLnNwbGl0KCcsJyksREFZOidTdW5kYXksTW9uZGF5LFR1ZXNkYXksV2VkbmVzZGF5LFRodXJzZGF5LEZyaWRheSxTYXR1cmRheScuc3BsaXQoJywnKSxTSE9SVERBWTonU3VuLE1vbixUdWUsV2VkLFRodSxGcmksU2F0Jy5zcGxpdCgnLCcpLEFNUE1TOlsnQU0nLCdQTSddLG1lZGl1bTonTU1NIGQsIHkgaDptbTpzcyBhJyxzaG9ydDonTS9kL3l5IGg6bW0gYScsZnVsbERhdGU6J0VFRUUsIE1NTU0gZCwgeScsbG9uZ0RhdGU6J01NTU0gZCwgeScsbWVkaXVtRGF0ZTonTU1NIGQsIHknLHNob3J0RGF0ZTonTS9kL3l5JyxtZWRpdW1UaW1lOidoOm1tOnNzIGEnLHNob3J0VGltZTonaDptbSBhJ30scGx1cmFsQ2F0OmZ1bmN0aW9uKG51bSl7aWYobnVtPT09MSl7cmV0dXJuJ29uZSc7fQpyZXR1cm4nb3RoZXInO319O307fQp2YXIgUEFUSF9NQVRDSD0vXihbXlw/I10qKShcPyhbXiNdKikpPygjKC4qKSk/JC8sREVGQVVMVF9QT1JUUz17J2h0dHAnOjgwLCdodHRwcyc6NDQzLCdmdHAnOjIxfTt2YXIgJGxvY2F0aW9uTWluRXJyPW1pbkVycignJGxvY2F0aW9uJyk7ZnVuY3Rpb24gZW5jb2RlUGF0aChwYXRoKXt2YXIgc2VnbWVudHM9cGF0aC5zcGxpdCgnLycpLGk9c2VnbWVudHMubGVuZ3RoO3doaWxlKGktLSl7c2VnbWVudHNbaV09ZW5jb2RlVXJpU2VnbWVudChzZWdtZW50c1tpXSk7fQpyZXR1cm4gc2VnbWVudHMuam9pbignLycpO30KZnVuY3Rpb24gcGFyc2VBYnNvbHV0ZVVybChhYnNvbHV0ZVVybCxsb2NhdGlvbk9iaixhcHBCYXNlKXt2YXIgcGFyc2VkVXJsPXVybFJlc29sdmUoYWJzb2x1dGVVcmwsYXBwQmFzZSk7bG9jYXRpb25PYmouJCRwcm90b2NvbD1wYXJzZWRVcmwucHJvdG9jb2w7bG9jYXRpb25PYmouJCRob3N0PXBhcnNlZFVybC5ob3N0bmFtZTtsb2NhdGlvbk9iai4kJHBvcnQ9aW50KHBhcnNlZFVybC5wb3J0KXx8REVGQVVMVF9QT1JUU1twYXJzZWRVcmwucHJvdG9jb2xdfHxudWxsO30KZnVuY3Rpb24gcGFyc2VBcHBVcmwocmVsYXRpdmVVcmwsbG9jYXRpb25PYmosYXBwQmFzZSl7dmFyIHByZWZpeGVkPShyZWxhdGl2ZVVybC5jaGFyQXQoMCkhPT0nLycpO2lmKHByZWZpeGVkKXtyZWxhdGl2ZVVybD0nLycrcmVsYXRpdmVVcmw7fQp2YXIgbWF0Y2g9dXJsUmVzb2x2ZShyZWxhdGl2ZVVybCxhcHBCYXNlKTtsb2NhdGlvbk9iai4kJHBhdGg9ZGVjb2RlVVJJQ29tcG9uZW50KHByZWZpeGVkJiZtYXRjaC5wYXRobmFtZS5jaGFyQXQoMCk9PT0nLyc/bWF0Y2gucGF0aG5hbWUuc3Vic3RyaW5nKDEpOm1hdGNoLnBhdGhuYW1lKTtsb2NhdGlvbk9iai4kJHNlYXJjaD1wYXJzZUtleVZhbHVlKG1hdGNoLnNlYXJjaCk7bG9jYXRpb25PYmouJCRoYXNoPWRlY29kZVVSSUNvbXBvbmVudChtYXRjaC5oYXNoKTtpZihsb2NhdGlvbk9iai4kJHBhdGgmJmxvY2F0aW9uT2JqLiQkcGF0aC5jaGFyQXQoMCkhPScvJyl7bG9jYXRpb25PYmouJCRwYXRoPScvJytsb2NhdGlvbk9iai4kJHBhdGg7fX0KZnVuY3Rpb24gYmVnaW5zV2l0aChiZWdpbix3aG9sZSl7aWYod2hvbGUuaW5kZXhPZihiZWdpbik9PT0wKXtyZXR1cm4gd2hvbGUuc3Vic3RyKGJlZ2luLmxlbmd0aCk7fX0KZnVuY3Rpb24gc3RyaXBIYXNoKHVybCl7dmFyIGluZGV4PXVybC5pbmRleE9mKCcjJyk7cmV0dXJuIGluZGV4PT0tMT91cmw6dXJsLnN1YnN0cigwLGluZGV4KTt9CmZ1bmN0aW9uIHN0cmlwRmlsZSh1cmwpe3JldHVybiB1cmwuc3Vic3RyKDAsc3RyaXBIYXNoKHVybCkubGFzdEluZGV4T2YoJy8nKSsxKTt9CmZ1bmN0aW9uIHNlcnZlckJhc2UodXJsKXtyZXR1cm4gdXJsLnN1YnN0cmluZygwLHVybC5pbmRleE9mKCcvJyx1cmwuaW5kZXhPZignLy8nKSsyKSk7fQpmdW5jdGlvbiBMb2NhdGlvbkh0bWw1VXJsKGFwcEJhc2UsYmFzZVByZWZpeCl7dGhpcy4kJGh0bWw1PXRydWU7YmFzZVByZWZpeD1iYXNlUHJlZml4fHwnJzt2YXIgYXBwQmFzZU5vRmlsZT1zdHJpcEZpbGUoYXBwQmFzZSk7cGFyc2VBYnNvbHV0ZVVybChhcHBCYXNlLHRoaXMsYXBwQmFzZSk7dGhpcy4kJHBhcnNlPWZ1bmN0aW9uKHVybCl7dmFyIHBhdGhVcmw9YmVnaW5zV2l0aChhcHBCYXNlTm9GaWxlLHVybCk7aWYoIWlzU3RyaW5nKHBhdGhVcmwpKXt0aHJvdyAkbG9jYXRpb25NaW5FcnIoJ2lwdGhwcmZ4JywnSW52YWxpZCB1cmwgInswfSIsIG1pc3NpbmcgcGF0aCBwcmVmaXggInsxfSIuJyx1cmwsYXBwQmFzZU5vRmlsZSk7fQpwYXJzZUFwcFVybChwYXRoVXJsLHRoaXMsYXBwQmFzZSk7aWYoIXRoaXMuJCRwYXRoKXt0aGlzLiQkcGF0aD0nLyc7fQp0aGlzLiQkY29tcG9zZSgpO307dGhpcy4kJGNvbXBvc2U9ZnVuY3Rpb24oKXt2YXIgc2VhcmNoPXRvS2V5VmFsdWUodGhpcy4kJHNlYXJjaCksaGFzaD10aGlzLiQkaGFzaD8nIycrZW5jb2RlVXJpU2VnbWVudCh0aGlzLiQkaGFzaCk6Jyc7dGhpcy4kJHVybD1lbmNvZGVQYXRoKHRoaXMuJCRwYXRoKSsoc2VhcmNoPyc/JytzZWFyY2g6JycpK2hhc2g7dGhpcy4kJGFic1VybD1hcHBCYXNlTm9GaWxlK3RoaXMuJCR1cmwuc3Vic3RyKDEpO307dGhpcy4kJHJld3JpdGU9ZnVuY3Rpb24odXJsKXt2YXIgYXBwVXJsLHByZXZBcHBVcmw7aWYoKGFwcFVybD1iZWdpbnNXaXRoKGFwcEJhc2UsdXJsKSkhPT11bmRlZmluZWQpe3ByZXZBcHBVcmw9YXBwVXJsO2lmKChhcHBVcmw9YmVnaW5zV2l0aChiYXNlUHJlZml4LGFwcFVybCkpIT09dW5kZWZpbmVkKXtyZXR1cm4gYXBwQmFzZU5vRmlsZSsoYmVnaW5zV2l0aCgnLycsYXBwVXJsKXx8YXBwVXJsKTt9ZWxzZXtyZXR1cm4gYXBwQmFzZStwcmV2QXBwVXJsO319ZWxzZSBpZigoYXBwVXJsPWJlZ2luc1dpdGgoYXBwQmFzZU5vRmlsZSx1cmwpKSE9PXVuZGVmaW5lZCl7cmV0dXJuIGFwcEJhc2VOb0ZpbGUrYXBwVXJsO31lbHNlIGlmKGFwcEJhc2VOb0ZpbGU9PXVybCsnLycpe3JldHVybiBhcHBCYXNlTm9GaWxlO319O30KZnVuY3Rpb24gTG9jYXRpb25IYXNoYmFuZ1VybChhcHBCYXNlLGhhc2hQcmVmaXgpe3ZhciBhcHBCYXNlTm9GaWxlPXN0cmlwRmlsZShhcHBCYXNlKTtwYXJzZUFic29sdXRlVXJsKGFwcEJhc2UsdGhpcyxhcHBCYXNlKTt0aGlzLiQkcGFyc2U9ZnVuY3Rpb24odXJsKXt2YXIgd2l0aG91dEJhc2VVcmw9YmVnaW5zV2l0aChhcHBCYXNlLHVybCl8fGJlZ2luc1dpdGgoYXBwQmFzZU5vRmlsZSx1cmwpO3ZhciB3aXRob3V0SGFzaFVybD13aXRob3V0QmFzZVVybC5jaGFyQXQoMCk9PScjJz9iZWdpbnNXaXRoKGhhc2hQcmVmaXgsd2l0aG91dEJhc2VVcmwpOih0aGlzLiQkaHRtbDUpP3dpdGhvdXRCYXNlVXJsOicnO2lmKCFpc1N0cmluZyh3aXRob3V0SGFzaFVybCkpe3Rocm93ICRsb2NhdGlvbk1pbkVycignaWhzaHByZngnLCdJbnZhbGlkIHVybCAiezB9IiwgbWlzc2luZyBoYXNoIHByZWZpeCAiezF9Ii4nLHVybCxoYXNoUHJlZml4KTt9CnBhcnNlQXBwVXJsKHdpdGhvdXRIYXNoVXJsLHRoaXMsYXBwQmFzZSk7dGhpcy4kJHBhdGg9cmVtb3ZlV2luZG93c0RyaXZlTmFtZSh0aGlzLiQkcGF0aCx3aXRob3V0SGFzaFVybCxhcHBCYXNlKTt0aGlzLiQkY29tcG9zZSgpO2Z1bmN0aW9uIHJlbW92ZVdpbmRvd3NEcml2ZU5hbWUocGF0aCx1cmwsYmFzZSl7dmFyIHdpbmRvd3NGaWxlUGF0aEV4cD0vXlwvW0EtWl06KFwvLiopLzt2YXIgZmlyc3RQYXRoU2VnbWVudE1hdGNoO2lmKHVybC5pbmRleE9mKGJhc2UpPT09MCl7dXJsPXVybC5yZXBsYWNlKGJhc2UsJycpO30KaWYod2luZG93c0ZpbGVQYXRoRXhwLmV4ZWModXJsKSl7cmV0dXJuIHBhdGg7fQpmaXJzdFBhdGhTZWdtZW50TWF0Y2g9d2luZG93c0ZpbGVQYXRoRXhwLmV4ZWMocGF0aCk7cmV0dXJuIGZpcnN0UGF0aFNlZ21lbnRNYXRjaD9maXJzdFBhdGhTZWdtZW50TWF0Y2hbMV06cGF0aDt9fTt0aGlzLiQkY29tcG9zZT1mdW5jdGlvbigpe3ZhciBzZWFyY2g9dG9LZXlWYWx1ZSh0aGlzLiQkc2VhcmNoKSxoYXNoPXRoaXMuJCRoYXNoPycjJytlbmNvZGVVcmlTZWdtZW50KHRoaXMuJCRoYXNoKTonJzt0aGlzLiQkdXJsPWVuY29kZVBhdGgodGhpcy4kJHBhdGgpKyhzZWFyY2g/Jz8nK3NlYXJjaDonJykraGFzaDt0aGlzLiQkYWJzVXJsPWFwcEJhc2UrKHRoaXMuJCR1cmw/aGFzaFByZWZpeCt0aGlzLiQkdXJsOicnKTt9O3RoaXMuJCRyZXdyaXRlPWZ1bmN0aW9uKHVybCl7aWYoc3RyaXBIYXNoKGFwcEJhc2UpPT1zdHJpcEhhc2godXJsKSl7cmV0dXJuIHVybDt9fTt9CmZ1bmN0aW9uIExvY2F0aW9uSGFzaGJhbmdJbkh0bWw1VXJsKGFwcEJhc2UsaGFzaFByZWZpeCl7dGhpcy4kJGh0bWw1PXRydWU7TG9jYXRpb25IYXNoYmFuZ1VybC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dmFyIGFwcEJhc2VOb0ZpbGU9c3RyaXBGaWxlKGFwcEJhc2UpO3RoaXMuJCRyZXdyaXRlPWZ1bmN0aW9uKHVybCl7dmFyIGFwcFVybDtpZihhcHBCYXNlPT1zdHJpcEhhc2godXJsKSl7cmV0dXJuIHVybDt9ZWxzZSBpZigoYXBwVXJsPWJlZ2luc1dpdGgoYXBwQmFzZU5vRmlsZSx1cmwpKSl7cmV0dXJuIGFwcEJhc2UraGFzaFByZWZpeCthcHBVcmw7fWVsc2UgaWYoYXBwQmFzZU5vRmlsZT09PXVybCsnLycpe3JldHVybiBhcHBCYXNlTm9GaWxlO319O3RoaXMuJCRjb21wb3NlPWZ1bmN0aW9uKCl7dmFyIHNlYXJjaD10b0tleVZhbHVlKHRoaXMuJCRzZWFyY2gpLGhhc2g9dGhpcy4kJGhhc2g/JyMnK2VuY29kZVVyaVNlZ21lbnQodGhpcy4kJGhhc2gpOicnO3RoaXMuJCR1cmw9ZW5jb2RlUGF0aCh0aGlzLiQkcGF0aCkrKHNlYXJjaD8nPycrc2VhcmNoOicnKStoYXNoO3RoaXMuJCRhYnNVcmw9YXBwQmFzZStoYXNoUHJlZml4K3RoaXMuJCR1cmw7fTt9CkxvY2F0aW9uSGFzaGJhbmdJbkh0bWw1VXJsLnByb3RvdHlwZT1Mb2NhdGlvbkhhc2hiYW5nVXJsLnByb3RvdHlwZT1Mb2NhdGlvbkh0bWw1VXJsLnByb3RvdHlwZT17JCRodG1sNTpmYWxzZSwkJHJlcGxhY2U6ZmFsc2UsYWJzVXJsOmxvY2F0aW9uR2V0dGVyKCckJGFic1VybCcpLHVybDpmdW5jdGlvbih1cmwscmVwbGFjZSl7aWYoaXNVbmRlZmluZWQodXJsKSkKcmV0dXJuIHRoaXMuJCR1cmw7dmFyIG1hdGNoPVBBVEhfTUFUQ0guZXhlYyh1cmwpO2lmKG1hdGNoWzFdKXRoaXMucGF0aChkZWNvZGVVUklDb21wb25lbnQobWF0Y2hbMV0pKTtpZihtYXRjaFsyXXx8bWF0Y2hbMV0pdGhpcy5zZWFyY2gobWF0Y2hbM118fCcnKTt0aGlzLmhhc2gobWF0Y2hbNV18fCcnLHJlcGxhY2UpO3JldHVybiB0aGlzO30scHJvdG9jb2w6bG9jYXRpb25HZXR0ZXIoJyQkcHJvdG9jb2wnKSxob3N0OmxvY2F0aW9uR2V0dGVyKCckJGhvc3QnKSxwb3J0OmxvY2F0aW9uR2V0dGVyKCckJHBvcnQnKSxwYXRoOmxvY2F0aW9uR2V0dGVyU2V0dGVyKCckJHBhdGgnLGZ1bmN0aW9uKHBhdGgpe3JldHVybiBwYXRoLmNoYXJBdCgwKT09Jy8nP3BhdGg6Jy8nK3BhdGg7fSksc2VhcmNoOmZ1bmN0aW9uKHNlYXJjaCxwYXJhbVZhbHVlKXtzd2l0Y2goYXJndW1lbnRzLmxlbmd0aCl7Y2FzZSAwOnJldHVybiB0aGlzLiQkc2VhcmNoO2Nhc2UgMTppZihpc1N0cmluZyhzZWFyY2gpKXt0aGlzLiQkc2VhcmNoPXBhcnNlS2V5VmFsdWUoc2VhcmNoKTt9ZWxzZSBpZihpc09iamVjdChzZWFyY2gpKXt0aGlzLiQkc2VhcmNoPXNlYXJjaDt9ZWxzZXt0aHJvdyAkbG9jYXRpb25NaW5FcnIoJ2lzcmNoYXJnJywnVGhlIGZpcnN0IGFyZ3VtZW50IG9mIHRoZSBgJGxvY2F0aW9uI3NlYXJjaCgpYCBjYWxsIG11c3QgYmUgYSBzdHJpbmcgb3IgYW4gb2JqZWN0LicpO30KYnJlYWs7ZGVmYXVsdDppZihpc1VuZGVmaW5lZChwYXJhbVZhbHVlKXx8cGFyYW1WYWx1ZT09PW51bGwpe2RlbGV0ZSB0aGlzLiQkc2VhcmNoW3NlYXJjaF07fWVsc2V7dGhpcy4kJHNlYXJjaFtzZWFyY2hdPXBhcmFtVmFsdWU7fX0KdGhpcy4kJGNvbXBvc2UoKTtyZXR1cm4gdGhpczt9LGhhc2g6bG9jYXRpb25HZXR0ZXJTZXR0ZXIoJyQkaGFzaCcsaWRlbnRpdHkpLHJlcGxhY2U6ZnVuY3Rpb24oKXt0aGlzLiQkcmVwbGFjZT10cnVlO3JldHVybiB0aGlzO319O2Z1bmN0aW9uIGxvY2F0aW9uR2V0dGVyKHByb3BlcnR5KXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gdGhpc1twcm9wZXJ0eV07fTt9CmZ1bmN0aW9uIGxvY2F0aW9uR2V0dGVyU2V0dGVyKHByb3BlcnR5LHByZXByb2Nlc3Mpe3JldHVybiBmdW5jdGlvbih2YWx1ZSl7aWYoaXNVbmRlZmluZWQodmFsdWUpKQpyZXR1cm4gdGhpc1twcm9wZXJ0eV07dGhpc1twcm9wZXJ0eV09cHJlcHJvY2Vzcyh2YWx1ZSk7dGhpcy4kJGNvbXBvc2UoKTtyZXR1cm4gdGhpczt9O30KZnVuY3Rpb24gJExvY2F0aW9uUHJvdmlkZXIoKXt2YXIgaGFzaFByZWZpeD0nJyxodG1sNU1vZGU9ZmFsc2U7dGhpcy5oYXNoUHJlZml4PWZ1bmN0aW9uKHByZWZpeCl7aWYoaXNEZWZpbmVkKHByZWZpeCkpe2hhc2hQcmVmaXg9cHJlZml4O3JldHVybiB0aGlzO31lbHNle3JldHVybiBoYXNoUHJlZml4O319O3RoaXMuaHRtbDVNb2RlPWZ1bmN0aW9uKG1vZGUpe2lmKGlzRGVmaW5lZChtb2RlKSl7aHRtbDVNb2RlPW1vZGU7cmV0dXJuIHRoaXM7fWVsc2V7cmV0dXJuIGh0bWw1TW9kZTt9fTt0aGlzLiRnZXQ9Wyckcm9vdFNjb3BlJywnJGJyb3dzZXInLCckc25pZmZlcicsJyRyb290RWxlbWVudCcsZnVuY3Rpb24oJHJvb3RTY29wZSwkYnJvd3Nlciwkc25pZmZlciwkcm9vdEVsZW1lbnQpe3ZhciAkbG9jYXRpb24sTG9jYXRpb25Nb2RlLGJhc2VIcmVmPSRicm93c2VyLmJhc2VIcmVmKCksaW5pdGlhbFVybD0kYnJvd3Nlci51cmwoKSxhcHBCYXNlO2lmKGh0bWw1TW9kZSl7YXBwQmFzZT1zZXJ2ZXJCYXNlKGluaXRpYWxVcmwpKyhiYXNlSHJlZnx8Jy8nKTtMb2NhdGlvbk1vZGU9JHNuaWZmZXIuaGlzdG9yeT9Mb2NhdGlvbkh0bWw1VXJsOkxvY2F0aW9uSGFzaGJhbmdJbkh0bWw1VXJsO31lbHNle2FwcEJhc2U9c3RyaXBIYXNoKGluaXRpYWxVcmwpO0xvY2F0aW9uTW9kZT1Mb2NhdGlvbkhhc2hiYW5nVXJsO30KJGxvY2F0aW9uPW5ldyBMb2NhdGlvbk1vZGUoYXBwQmFzZSwnIycraGFzaFByZWZpeCk7JGxvY2F0aW9uLiQkcGFyc2UoJGxvY2F0aW9uLiQkcmV3cml0ZShpbml0aWFsVXJsKSk7JHJvb3RFbGVtZW50Lm9uKCdjbGljaycsZnVuY3Rpb24oZXZlbnQpe2lmKGV2ZW50LmN0cmxLZXl8fGV2ZW50Lm1ldGFLZXl8fGV2ZW50LndoaWNoPT0yKXJldHVybjt2YXIgZWxtPWpxTGl0ZShldmVudC50YXJnZXQpO3doaWxlKGxvd2VyY2FzZShlbG1bMF0ubm9kZU5hbWUpIT09J2EnKXtpZihlbG1bMF09PT0kcm9vdEVsZW1lbnRbMF18fCEoZWxtPWVsbS5wYXJlbnQoKSlbMF0pcmV0dXJuO30KdmFyIGFic0hyZWY9ZWxtLnByb3AoJ2hyZWYnKTtpZihpc09iamVjdChhYnNIcmVmKSYmYWJzSHJlZi50b1N0cmluZygpPT09J1tvYmplY3QgU1ZHQW5pbWF0ZWRTdHJpbmddJyl7YWJzSHJlZj11cmxSZXNvbHZlKGFic0hyZWYuYW5pbVZhbCkuaHJlZjt9CmlmKExvY2F0aW9uTW9kZT09PUxvY2F0aW9uSGFzaGJhbmdJbkh0bWw1VXJsKXt2YXIgaHJlZj1lbG0uYXR0cignaHJlZicpfHxlbG0uYXR0cigneGxpbms6aHJlZicpO2lmKGhyZWYuaW5kZXhPZignOi8vJyk8MCl7dmFyIHByZWZpeD0nIycraGFzaFByZWZpeDtpZihocmVmWzBdPT0nLycpe2Fic0hyZWY9YXBwQmFzZStwcmVmaXgraHJlZjt9ZWxzZSBpZihocmVmWzBdPT0nIycpe2Fic0hyZWY9YXBwQmFzZStwcmVmaXgrKCRsb2NhdGlvbi5wYXRoKCl8fCcvJykraHJlZjt9ZWxzZXt2YXIgc3RhY2s9JGxvY2F0aW9uLnBhdGgoKS5zcGxpdCgiLyIpLHBhcnRzPWhyZWYuc3BsaXQoIi8iKTtmb3IodmFyIGk9MDtpPHBhcnRzLmxlbmd0aDtpKyspe2lmKHBhcnRzW2ldPT0iLiIpCmNvbnRpbnVlO2Vsc2UgaWYocGFydHNbaV09PSIuLiIpCnN0YWNrLnBvcCgpO2Vsc2UgaWYocGFydHNbaV0ubGVuZ3RoKQpzdGFjay5wdXNoKHBhcnRzW2ldKTt9CmFic0hyZWY9YXBwQmFzZStwcmVmaXgrc3RhY2suam9pbignLycpO319fQp2YXIgcmV3cml0dGVuVXJsPSRsb2NhdGlvbi4kJHJld3JpdGUoYWJzSHJlZik7aWYoYWJzSHJlZiYmIWVsbS5hdHRyKCd0YXJnZXQnKSYmcmV3cml0dGVuVXJsJiYhZXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkpe2V2ZW50LnByZXZlbnREZWZhdWx0KCk7aWYocmV3cml0dGVuVXJsIT0kYnJvd3Nlci51cmwoKSl7JGxvY2F0aW9uLiQkcGFyc2UocmV3cml0dGVuVXJsKTskcm9vdFNjb3BlLiRhcHBseSgpO3dpbmRvdy5hbmd1bGFyWydmZi02ODQyMDgtcHJldmVudERlZmF1bHQnXT10cnVlO319fSk7aWYoJGxvY2F0aW9uLmFic1VybCgpIT1pbml0aWFsVXJsKXskYnJvd3Nlci51cmwoJGxvY2F0aW9uLmFic1VybCgpLHRydWUpO30KJGJyb3dzZXIub25VcmxDaGFuZ2UoZnVuY3Rpb24obmV3VXJsKXtpZigkbG9jYXRpb24uYWJzVXJsKCkhPW5ld1VybCl7JHJvb3RTY29wZS4kZXZhbEFzeW5jKGZ1bmN0aW9uKCl7dmFyIG9sZFVybD0kbG9jYXRpb24uYWJzVXJsKCk7JGxvY2F0aW9uLiQkcGFyc2UobmV3VXJsKTtpZigkcm9vdFNjb3BlLiRicm9hZGNhc3QoJyRsb2NhdGlvbkNoYW5nZVN0YXJ0JyxuZXdVcmwsb2xkVXJsKS5kZWZhdWx0UHJldmVudGVkKXskbG9jYXRpb24uJCRwYXJzZShvbGRVcmwpOyRicm93c2VyLnVybChvbGRVcmwpO31lbHNle2FmdGVyTG9jYXRpb25DaGFuZ2Uob2xkVXJsKTt9fSk7aWYoISRyb290U2NvcGUuJCRwaGFzZSkkcm9vdFNjb3BlLiRkaWdlc3QoKTt9fSk7dmFyIGNoYW5nZUNvdW50ZXI9MDskcm9vdFNjb3BlLiR3YXRjaChmdW5jdGlvbiAkbG9jYXRpb25XYXRjaCgpe3ZhciBvbGRVcmw9JGJyb3dzZXIudXJsKCk7dmFyIGN1cnJlbnRSZXBsYWNlPSRsb2NhdGlvbi4kJHJlcGxhY2U7aWYoIWNoYW5nZUNvdW50ZXJ8fG9sZFVybCE9JGxvY2F0aW9uLmFic1VybCgpKXtjaGFuZ2VDb3VudGVyKys7JHJvb3RTY29wZS4kZXZhbEFzeW5jKGZ1bmN0aW9uKCl7aWYoJHJvb3RTY29wZS4kYnJvYWRjYXN0KCckbG9jYXRpb25DaGFuZ2VTdGFydCcsJGxvY2F0aW9uLmFic1VybCgpLG9sZFVybCkuZGVmYXVsdFByZXZlbnRlZCl7JGxvY2F0aW9uLiQkcGFyc2Uob2xkVXJsKTt9ZWxzZXskYnJvd3Nlci51cmwoJGxvY2F0aW9uLmFic1VybCgpLGN1cnJlbnRSZXBsYWNlKTthZnRlckxvY2F0aW9uQ2hhbmdlKG9sZFVybCk7fX0pO30KJGxvY2F0aW9uLiQkcmVwbGFjZT1mYWxzZTtyZXR1cm4gY2hhbmdlQ291bnRlcjt9KTtyZXR1cm4gJGxvY2F0aW9uO2Z1bmN0aW9uIGFmdGVyTG9jYXRpb25DaGFuZ2Uob2xkVXJsKXskcm9vdFNjb3BlLiRicm9hZGNhc3QoJyRsb2NhdGlvbkNoYW5nZVN1Y2Nlc3MnLCRsb2NhdGlvbi5hYnNVcmwoKSxvbGRVcmwpO319XTt9CmZ1bmN0aW9uICRMb2dQcm92aWRlcigpe3ZhciBkZWJ1Zz10cnVlLHNlbGY9dGhpczt0aGlzLmRlYnVnRW5hYmxlZD1mdW5jdGlvbihmbGFnKXtpZihpc0RlZmluZWQoZmxhZykpe2RlYnVnPWZsYWc7cmV0dXJuIHRoaXM7fWVsc2V7cmV0dXJuIGRlYnVnO319O3RoaXMuJGdldD1bJyR3aW5kb3cnLGZ1bmN0aW9uKCR3aW5kb3cpe3JldHVybntsb2c6Y29uc29sZUxvZygnbG9nJyksaW5mbzpjb25zb2xlTG9nKCdpbmZvJyksd2Fybjpjb25zb2xlTG9nKCd3YXJuJyksZXJyb3I6Y29uc29sZUxvZygnZXJyb3InKSxkZWJ1ZzooZnVuY3Rpb24oKXt2YXIgZm49Y29uc29sZUxvZygnZGVidWcnKTtyZXR1cm4gZnVuY3Rpb24oKXtpZihkZWJ1Zyl7Zm4uYXBwbHkoc2VsZixhcmd1bWVudHMpO319O30oKSl9O2Z1bmN0aW9uIGZvcm1hdEVycm9yKGFyZyl7aWYoYXJnIGluc3RhbmNlb2YgRXJyb3Ipe2lmKGFyZy5zdGFjayl7YXJnPShhcmcubWVzc2FnZSYmYXJnLnN0YWNrLmluZGV4T2YoYXJnLm1lc3NhZ2UpPT09LTEpPydFcnJvcjogJythcmcubWVzc2FnZSsnXG4nK2FyZy5zdGFjazphcmcuc3RhY2s7fWVsc2UgaWYoYXJnLnNvdXJjZVVSTCl7YXJnPWFyZy5tZXNzYWdlKydcbicrYXJnLnNvdXJjZVVSTCsnOicrYXJnLmxpbmU7fX0KcmV0dXJuIGFyZzt9CmZ1bmN0aW9uIGNvbnNvbGVMb2codHlwZSl7dmFyIGNvbnNvbGU9JHdpbmRvdy5jb25zb2xlfHx7fSxsb2dGbj1jb25zb2xlW3R5cGVdfHxjb25zb2xlLmxvZ3x8bm9vcCxoYXNBcHBseT1mYWxzZTt0cnl7aGFzQXBwbHk9ISFsb2dGbi5hcHBseTt9Y2F0Y2goZSl7fQppZihoYXNBcHBseSl7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGFyZ3M9W107Zm9yRWFjaChhcmd1bWVudHMsZnVuY3Rpb24oYXJnKXthcmdzLnB1c2goZm9ybWF0RXJyb3IoYXJnKSk7fSk7cmV0dXJuIGxvZ0ZuLmFwcGx5KGNvbnNvbGUsYXJncyk7fTt9CnJldHVybiBmdW5jdGlvbihhcmcxLGFyZzIpe2xvZ0ZuKGFyZzEsYXJnMj09bnVsbD8nJzphcmcyKTt9O319XTt9CnZhciAkcGFyc2VNaW5FcnI9bWluRXJyKCckcGFyc2UnKTt2YXIgcHJvbWlzZVdhcm5pbmdDYWNoZT17fTt2YXIgcHJvbWlzZVdhcm5pbmc7ZnVuY3Rpb24gZW5zdXJlU2FmZU1lbWJlck5hbWUobmFtZSxmdWxsRXhwcmVzc2lvbil7aWYobmFtZT09PSJfX2RlZmluZUdldHRlcl9fInx8bmFtZT09PSJfX2RlZmluZVNldHRlcl9fInx8bmFtZT09PSJfX2xvb2t1cEdldHRlcl9fInx8bmFtZT09PSJfX2xvb2t1cFNldHRlcl9fInx8bmFtZT09PSJfX3Byb3RvX18iKXt0aHJvdyAkcGFyc2VNaW5FcnIoJ2lzZWNmbGQnLCdBdHRlbXB0aW5nIHRvIGFjY2VzcyBhIGRpc2FsbG93ZWQgZmllbGQgaW4gQW5ndWxhciBleHByZXNzaW9ucyEgJworJ0V4cHJlc3Npb246IHswfScsZnVsbEV4cHJlc3Npb24pO30KcmV0dXJuIG5hbWU7fQpmdW5jdGlvbiBlbnN1cmVTYWZlT2JqZWN0KG9iaixmdWxsRXhwcmVzc2lvbil7aWYob2JqKXtpZihvYmouY29uc3RydWN0b3I9PT1vYmope3Rocm93ICRwYXJzZU1pbkVycignaXNlY2ZuJywnUmVmZXJlbmNpbmcgRnVuY3Rpb24gaW4gQW5ndWxhciBleHByZXNzaW9ucyBpcyBkaXNhbGxvd2VkISBFeHByZXNzaW9uOiB7MH0nLGZ1bGxFeHByZXNzaW9uKTt9ZWxzZSBpZihvYmouZG9jdW1lbnQmJm9iai5sb2NhdGlvbiYmb2JqLmFsZXJ0JiZvYmouc2V0SW50ZXJ2YWwpe3Rocm93ICRwYXJzZU1pbkVycignaXNlY3dpbmRvdycsJ1JlZmVyZW5jaW5nIHRoZSBXaW5kb3cgaW4gQW5ndWxhciBleHByZXNzaW9ucyBpcyBkaXNhbGxvd2VkISBFeHByZXNzaW9uOiB7MH0nLGZ1bGxFeHByZXNzaW9uKTt9ZWxzZSBpZihvYmouY2hpbGRyZW4mJihvYmoubm9kZU5hbWV8fChvYmoucHJvcCYmb2JqLmF0dHImJm9iai5maW5kKSkpe3Rocm93ICRwYXJzZU1pbkVycignaXNlY2RvbScsJ1JlZmVyZW5jaW5nIERPTSBub2RlcyBpbiBBbmd1bGFyIGV4cHJlc3Npb25zIGlzIGRpc2FsbG93ZWQhIEV4cHJlc3Npb246IHswfScsZnVsbEV4cHJlc3Npb24pO31lbHNlIGlmKG9iaj09PU9iamVjdCl7dGhyb3cgJHBhcnNlTWluRXJyKCdpc2Vjb2JqJywnUmVmZXJlbmNpbmcgT2JqZWN0IGluIEFuZ3VsYXIgZXhwcmVzc2lvbnMgaXMgZGlzYWxsb3dlZCEgRXhwcmVzc2lvbjogezB9JyxmdWxsRXhwcmVzc2lvbik7fX0KcmV0dXJuIG9iajt9CnZhciBDQUxMPUZ1bmN0aW9uLnByb3RvdHlwZS5jYWxsO3ZhciBBUFBMWT1GdW5jdGlvbi5wcm90b3R5cGUuYXBwbHk7dmFyIEJJTkQ9RnVuY3Rpb24ucHJvdG90eXBlLmJpbmQ7ZnVuY3Rpb24gZW5zdXJlU2FmZUZ1bmN0aW9uKG9iaixmdWxsRXhwcmVzc2lvbil7aWYob2JqKXtpZihvYmouY29uc3RydWN0b3I9PT1vYmope3Rocm93ICRwYXJzZU1pbkVycignaXNlY2ZuJywnUmVmZXJlbmNpbmcgRnVuY3Rpb24gaW4gQW5ndWxhciBleHByZXNzaW9ucyBpcyBkaXNhbGxvd2VkISBFeHByZXNzaW9uOiB7MH0nLGZ1bGxFeHByZXNzaW9uKTt9ZWxzZSBpZihvYmo9PT1DQUxMfHxvYmo9PT1BUFBMWXx8KEJJTkQmJm9iaj09PUJJTkQpKXt0aHJvdyAkcGFyc2VNaW5FcnIoJ2lzZWNmZicsJ1JlZmVyZW5jaW5nIGNhbGwsIGFwcGx5IG9yIGJpbmQgaW4gQW5ndWxhciBleHByZXNzaW9ucyBpcyBkaXNhbGxvd2VkISBFeHByZXNzaW9uOiB7MH0nLGZ1bGxFeHByZXNzaW9uKTt9fX0KdmFyIE9QRVJBVE9SUz17J251bGwnOmZ1bmN0aW9uKCl7cmV0dXJuIG51bGw7fSwndHJ1ZSc6ZnVuY3Rpb24oKXtyZXR1cm4gdHJ1ZTt9LCdmYWxzZSc6ZnVuY3Rpb24oKXtyZXR1cm4gZmFsc2U7fSx1bmRlZmluZWQ6bm9vcCwnKyc6ZnVuY3Rpb24oc2VsZixsb2NhbHMsYSxiKXthPWEoc2VsZixsb2NhbHMpO2I9YihzZWxmLGxvY2Fscyk7aWYoaXNEZWZpbmVkKGEpKXtpZihpc0RlZmluZWQoYikpe3JldHVybiBhK2I7fQpyZXR1cm4gYTt9CnJldHVybiBpc0RlZmluZWQoYik/Yjp1bmRlZmluZWQ7fSwnLSc6ZnVuY3Rpb24oc2VsZixsb2NhbHMsYSxiKXthPWEoc2VsZixsb2NhbHMpO2I9YihzZWxmLGxvY2Fscyk7cmV0dXJuKGlzRGVmaW5lZChhKT9hOjApLShpc0RlZmluZWQoYik/YjowKTt9LCcqJzpmdW5jdGlvbihzZWxmLGxvY2FscyxhLGIpe3JldHVybiBhKHNlbGYsbG9jYWxzKSpiKHNlbGYsbG9jYWxzKTt9LCcvJzpmdW5jdGlvbihzZWxmLGxvY2FscyxhLGIpe3JldHVybiBhKHNlbGYsbG9jYWxzKS9iKHNlbGYsbG9jYWxzKTt9LCclJzpmdW5jdGlvbihzZWxmLGxvY2FscyxhLGIpe3JldHVybiBhKHNlbGYsbG9jYWxzKSViKHNlbGYsbG9jYWxzKTt9LCdeJzpmdW5jdGlvbihzZWxmLGxvY2FscyxhLGIpe3JldHVybiBhKHNlbGYsbG9jYWxzKV5iKHNlbGYsbG9jYWxzKTt9LCc9Jzpub29wLCc9PT0nOmZ1bmN0aW9uKHNlbGYsbG9jYWxzLGEsYil7cmV0dXJuIGEoc2VsZixsb2NhbHMpPT09YihzZWxmLGxvY2Fscyk7fSwnIT09JzpmdW5jdGlvbihzZWxmLGxvY2FscyxhLGIpe3JldHVybiBhKHNlbGYsbG9jYWxzKSE9PWIoc2VsZixsb2NhbHMpO30sJz09JzpmdW5jdGlvbihzZWxmLGxvY2FscyxhLGIpe3JldHVybiBhKHNlbGYsbG9jYWxzKT09YihzZWxmLGxvY2Fscyk7fSwnIT0nOmZ1bmN0aW9uKHNlbGYsbG9jYWxzLGEsYil7cmV0dXJuIGEoc2VsZixsb2NhbHMpIT1iKHNlbGYsbG9jYWxzKTt9LCc8JzpmdW5jdGlvbihzZWxmLGxvY2FscyxhLGIpe3JldHVybiBhKHNlbGYsbG9jYWxzKTxiKHNlbGYsbG9jYWxzKTt9LCc+JzpmdW5jdGlvbihzZWxmLGxvY2FscyxhLGIpe3JldHVybiBhKHNlbGYsbG9jYWxzKT5iKHNlbGYsbG9jYWxzKTt9LCc8PSc6ZnVuY3Rpb24oc2VsZixsb2NhbHMsYSxiKXtyZXR1cm4gYShzZWxmLGxvY2Fscyk8PWIoc2VsZixsb2NhbHMpO30sJz49JzpmdW5jdGlvbihzZWxmLGxvY2FscyxhLGIpe3JldHVybiBhKHNlbGYsbG9jYWxzKT49YihzZWxmLGxvY2Fscyk7fSwnJiYnOmZ1bmN0aW9uKHNlbGYsbG9jYWxzLGEsYil7cmV0dXJuIGEoc2VsZixsb2NhbHMpJiZiKHNlbGYsbG9jYWxzKTt9LCd8fCc6ZnVuY3Rpb24oc2VsZixsb2NhbHMsYSxiKXtyZXR1cm4gYShzZWxmLGxvY2Fscyl8fGIoc2VsZixsb2NhbHMpO30sJyYnOmZ1bmN0aW9uKHNlbGYsbG9jYWxzLGEsYil7cmV0dXJuIGEoc2VsZixsb2NhbHMpJmIoc2VsZixsb2NhbHMpO30sJ3wnOmZ1bmN0aW9uKHNlbGYsbG9jYWxzLGEsYil7cmV0dXJuIGIoc2VsZixsb2NhbHMpKHNlbGYsbG9jYWxzLGEoc2VsZixsb2NhbHMpKTt9LCchJzpmdW5jdGlvbihzZWxmLGxvY2FscyxhKXtyZXR1cm4hYShzZWxmLGxvY2Fscyk7fX07dmFyIEVTQ0FQRT17Im4iOiJcbiIsImYiOiJcZiIsInIiOiJcciIsInQiOiJcdCIsInYiOiJcdiIsIiciOiInIiwnIic6JyInfTt2YXIgTGV4ZXI9ZnVuY3Rpb24ob3B0aW9ucyl7dGhpcy5vcHRpb25zPW9wdGlvbnM7fTtMZXhlci5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOkxleGVyLGxleDpmdW5jdGlvbih0ZXh0KXt0aGlzLnRleHQ9dGV4dDt0aGlzLmluZGV4PTA7dGhpcy5jaD11bmRlZmluZWQ7dGhpcy5sYXN0Q2g9JzonO3RoaXMudG9rZW5zPVtdO3doaWxlKHRoaXMuaW5kZXg8dGhpcy50ZXh0Lmxlbmd0aCl7dGhpcy5jaD10aGlzLnRleHQuY2hhckF0KHRoaXMuaW5kZXgpO2lmKHRoaXMuaXMoJyJcJycpKXt0aGlzLnJlYWRTdHJpbmcodGhpcy5jaCk7fWVsc2UgaWYodGhpcy5pc051bWJlcih0aGlzLmNoKXx8dGhpcy5pcygnLicpJiZ0aGlzLmlzTnVtYmVyKHRoaXMucGVlaygpKSl7dGhpcy5yZWFkTnVtYmVyKCk7fWVsc2UgaWYodGhpcy5pc0lkZW50KHRoaXMuY2gpKXt0aGlzLnJlYWRJZGVudCgpO31lbHNlIGlmKHRoaXMuaXMoJygpe31bXS4sOzo/Jykpe3RoaXMudG9rZW5zLnB1c2goe2luZGV4OnRoaXMuaW5kZXgsdGV4dDp0aGlzLmNofSk7dGhpcy5pbmRleCsrO31lbHNlIGlmKHRoaXMuaXNXaGl0ZXNwYWNlKHRoaXMuY2gpKXt0aGlzLmluZGV4Kys7Y29udGludWU7fWVsc2V7dmFyIGNoMj10aGlzLmNoK3RoaXMucGVlaygpO3ZhciBjaDM9Y2gyK3RoaXMucGVlaygyKTt2YXIgZm49T1BFUkFUT1JTW3RoaXMuY2hdO3ZhciBmbjI9T1BFUkFUT1JTW2NoMl07dmFyIGZuMz1PUEVSQVRPUlNbY2gzXTtpZihmbjMpe3RoaXMudG9rZW5zLnB1c2goe2luZGV4OnRoaXMuaW5kZXgsdGV4dDpjaDMsZm46Zm4zfSk7dGhpcy5pbmRleCs9Mzt9ZWxzZSBpZihmbjIpe3RoaXMudG9rZW5zLnB1c2goe2luZGV4OnRoaXMuaW5kZXgsdGV4dDpjaDIsZm46Zm4yfSk7dGhpcy5pbmRleCs9Mjt9ZWxzZSBpZihmbil7dGhpcy50b2tlbnMucHVzaCh7aW5kZXg6dGhpcy5pbmRleCx0ZXh0OnRoaXMuY2gsZm46Zm59KTt0aGlzLmluZGV4Kz0xO31lbHNle3RoaXMudGhyb3dFcnJvcignVW5leHBlY3RlZCBuZXh0IGNoYXJhY3RlciAnLHRoaXMuaW5kZXgsdGhpcy5pbmRleCsxKTt9fQp0aGlzLmxhc3RDaD10aGlzLmNoO30KcmV0dXJuIHRoaXMudG9rZW5zO30saXM6ZnVuY3Rpb24oY2hhcnMpe3JldHVybiBjaGFycy5pbmRleE9mKHRoaXMuY2gpIT09LTE7fSx3YXM6ZnVuY3Rpb24oY2hhcnMpe3JldHVybiBjaGFycy5pbmRleE9mKHRoaXMubGFzdENoKSE9PS0xO30scGVlazpmdW5jdGlvbihpKXt2YXIgbnVtPWl8fDE7cmV0dXJuKHRoaXMuaW5kZXgrbnVtPHRoaXMudGV4dC5sZW5ndGgpP3RoaXMudGV4dC5jaGFyQXQodGhpcy5pbmRleCtudW0pOmZhbHNlO30saXNOdW1iZXI6ZnVuY3Rpb24oY2gpe3JldHVybignMCc8PWNoJiZjaDw9JzknKTt9LGlzV2hpdGVzcGFjZTpmdW5jdGlvbihjaCl7cmV0dXJuKGNoPT09JyAnfHxjaD09PSdccid8fGNoPT09J1x0J3x8Y2g9PT0nXG4nfHxjaD09PSdcdid8fGNoPT09J1x1MDBBMCcpO30saXNJZGVudDpmdW5jdGlvbihjaCl7cmV0dXJuKCdhJzw9Y2gmJmNoPD0neid8fCdBJzw9Y2gmJmNoPD0nWid8fCdfJz09PWNofHxjaD09PSckJyk7fSxpc0V4cE9wZXJhdG9yOmZ1bmN0aW9uKGNoKXtyZXR1cm4oY2g9PT0nLSd8fGNoPT09JysnfHx0aGlzLmlzTnVtYmVyKGNoKSk7fSx0aHJvd0Vycm9yOmZ1bmN0aW9uKGVycm9yLHN0YXJ0LGVuZCl7ZW5kPWVuZHx8dGhpcy5pbmRleDt2YXIgY29sU3RyPShpc0RlZmluZWQoc3RhcnQpPydzICcrc3RhcnQrJy0nK3RoaXMuaW5kZXgrJyBbJyt0aGlzLnRleHQuc3Vic3RyaW5nKHN0YXJ0LGVuZCkrJ10nOicgJytlbmQpO3Rocm93ICRwYXJzZU1pbkVycignbGV4ZXJyJywnTGV4ZXIgRXJyb3I6IHswfSBhdCBjb2x1bW57MX0gaW4gZXhwcmVzc2lvbiBbezJ9XS4nLGVycm9yLGNvbFN0cix0aGlzLnRleHQpO30scmVhZE51bWJlcjpmdW5jdGlvbigpe3ZhciBudW1iZXI9Jyc7dmFyIHN0YXJ0PXRoaXMuaW5kZXg7d2hpbGUodGhpcy5pbmRleDx0aGlzLnRleHQubGVuZ3RoKXt2YXIgY2g9bG93ZXJjYXNlKHRoaXMudGV4dC5jaGFyQXQodGhpcy5pbmRleCkpO2lmKGNoPT0nLid8fHRoaXMuaXNOdW1iZXIoY2gpKXtudW1iZXIrPWNoO31lbHNle3ZhciBwZWVrQ2g9dGhpcy5wZWVrKCk7aWYoY2g9PSdlJyYmdGhpcy5pc0V4cE9wZXJhdG9yKHBlZWtDaCkpe251bWJlcis9Y2g7fWVsc2UgaWYodGhpcy5pc0V4cE9wZXJhdG9yKGNoKSYmcGVla0NoJiZ0aGlzLmlzTnVtYmVyKHBlZWtDaCkmJm51bWJlci5jaGFyQXQobnVtYmVyLmxlbmd0aC0xKT09J2UnKXtudW1iZXIrPWNoO31lbHNlIGlmKHRoaXMuaXNFeHBPcGVyYXRvcihjaCkmJighcGVla0NofHwhdGhpcy5pc051bWJlcihwZWVrQ2gpKSYmbnVtYmVyLmNoYXJBdChudW1iZXIubGVuZ3RoLTEpPT0nZScpe3RoaXMudGhyb3dFcnJvcignSW52YWxpZCBleHBvbmVudCcpO31lbHNle2JyZWFrO319CnRoaXMuaW5kZXgrKzt9Cm51bWJlcj0xKm51bWJlcjt0aGlzLnRva2Vucy5wdXNoKHtpbmRleDpzdGFydCx0ZXh0Om51bWJlcixsaXRlcmFsOnRydWUsY29uc3RhbnQ6dHJ1ZSxmbjpmdW5jdGlvbigpe3JldHVybiBudW1iZXI7fX0pO30scmVhZElkZW50OmZ1bmN0aW9uKCl7dmFyIHBhcnNlcj10aGlzO3ZhciBpZGVudD0nJzt2YXIgc3RhcnQ9dGhpcy5pbmRleDt2YXIgbGFzdERvdCxwZWVrSW5kZXgsbWV0aG9kTmFtZSxjaDt3aGlsZSh0aGlzLmluZGV4PHRoaXMudGV4dC5sZW5ndGgpe2NoPXRoaXMudGV4dC5jaGFyQXQodGhpcy5pbmRleCk7aWYoY2g9PT0nLid8fHRoaXMuaXNJZGVudChjaCl8fHRoaXMuaXNOdW1iZXIoY2gpKXtpZihjaD09PScuJylsYXN0RG90PXRoaXMuaW5kZXg7aWRlbnQrPWNoO31lbHNle2JyZWFrO30KdGhpcy5pbmRleCsrO30KaWYobGFzdERvdCl7cGVla0luZGV4PXRoaXMuaW5kZXg7d2hpbGUocGVla0luZGV4PHRoaXMudGV4dC5sZW5ndGgpe2NoPXRoaXMudGV4dC5jaGFyQXQocGVla0luZGV4KTtpZihjaD09PScoJyl7bWV0aG9kTmFtZT1pZGVudC5zdWJzdHIobGFzdERvdC1zdGFydCsxKTtpZGVudD1pZGVudC5zdWJzdHIoMCxsYXN0RG90LXN0YXJ0KTt0aGlzLmluZGV4PXBlZWtJbmRleDticmVhazt9CmlmKHRoaXMuaXNXaGl0ZXNwYWNlKGNoKSl7cGVla0luZGV4Kys7fWVsc2V7YnJlYWs7fX19CnZhciB0b2tlbj17aW5kZXg6c3RhcnQsdGV4dDppZGVudH07aWYoT1BFUkFUT1JTLmhhc093blByb3BlcnR5KGlkZW50KSl7dG9rZW4uZm49T1BFUkFUT1JTW2lkZW50XTt0b2tlbi5saXRlcmFsPXRydWU7dG9rZW4uY29uc3RhbnQ9dHJ1ZTt9ZWxzZXt2YXIgZ2V0dGVyPWdldHRlckZuKGlkZW50LHRoaXMub3B0aW9ucyx0aGlzLnRleHQpO3Rva2VuLmZuPWV4dGVuZChmdW5jdGlvbihzZWxmLGxvY2Fscyl7cmV0dXJuKGdldHRlcihzZWxmLGxvY2FscykpO30se2Fzc2lnbjpmdW5jdGlvbihzZWxmLHZhbHVlKXtyZXR1cm4gc2V0dGVyKHNlbGYsaWRlbnQsdmFsdWUscGFyc2VyLnRleHQscGFyc2VyLm9wdGlvbnMpO319KTt9CnRoaXMudG9rZW5zLnB1c2godG9rZW4pO2lmKG1ldGhvZE5hbWUpe3RoaXMudG9rZW5zLnB1c2goe2luZGV4Omxhc3REb3QsdGV4dDonLid9KTt0aGlzLnRva2Vucy5wdXNoKHtpbmRleDpsYXN0RG90KzEsdGV4dDptZXRob2ROYW1lfSk7fX0scmVhZFN0cmluZzpmdW5jdGlvbihxdW90ZSl7dmFyIHN0YXJ0PXRoaXMuaW5kZXg7dGhpcy5pbmRleCsrO3ZhciBzdHJpbmc9Jyc7dmFyIHJhd1N0cmluZz1xdW90ZTt2YXIgZXNjYXBlPWZhbHNlO3doaWxlKHRoaXMuaW5kZXg8dGhpcy50ZXh0Lmxlbmd0aCl7dmFyIGNoPXRoaXMudGV4dC5jaGFyQXQodGhpcy5pbmRleCk7cmF3U3RyaW5nKz1jaDtpZihlc2NhcGUpe2lmKGNoPT09J3UnKXt2YXIgaGV4PXRoaXMudGV4dC5zdWJzdHJpbmcodGhpcy5pbmRleCsxLHRoaXMuaW5kZXgrNSk7aWYoIWhleC5tYXRjaCgvW1xkYS1mXXs0fS9pKSkKdGhpcy50aHJvd0Vycm9yKCdJbnZhbGlkIHVuaWNvZGUgZXNjYXBlIFtcXHUnK2hleCsnXScpO3RoaXMuaW5kZXgrPTQ7c3RyaW5nKz1TdHJpbmcuZnJvbUNoYXJDb2RlKHBhcnNlSW50KGhleCwxNikpO31lbHNle3ZhciByZXA9RVNDQVBFW2NoXTtpZihyZXApe3N0cmluZys9cmVwO31lbHNle3N0cmluZys9Y2g7fX0KZXNjYXBlPWZhbHNlO31lbHNlIGlmKGNoPT09J1xcJyl7ZXNjYXBlPXRydWU7fWVsc2UgaWYoY2g9PT1xdW90ZSl7dGhpcy5pbmRleCsrO3RoaXMudG9rZW5zLnB1c2goe2luZGV4OnN0YXJ0LHRleHQ6cmF3U3RyaW5nLHN0cmluZzpzdHJpbmcsbGl0ZXJhbDp0cnVlLGNvbnN0YW50OnRydWUsZm46ZnVuY3Rpb24oKXtyZXR1cm4gc3RyaW5nO319KTtyZXR1cm47fWVsc2V7c3RyaW5nKz1jaDt9CnRoaXMuaW5kZXgrKzt9CnRoaXMudGhyb3dFcnJvcignVW50ZXJtaW5hdGVkIHF1b3RlJyxzdGFydCk7fX07dmFyIFBhcnNlcj1mdW5jdGlvbihsZXhlciwkZmlsdGVyLG9wdGlvbnMpe3RoaXMubGV4ZXI9bGV4ZXI7dGhpcy4kZmlsdGVyPSRmaWx0ZXI7dGhpcy5vcHRpb25zPW9wdGlvbnM7fTtQYXJzZXIuWkVSTz1leHRlbmQoZnVuY3Rpb24oKXtyZXR1cm4gMDt9LHtjb25zdGFudDp0cnVlfSk7UGFyc2VyLnByb3RvdHlwZT17Y29uc3RydWN0b3I6UGFyc2VyLHBhcnNlOmZ1bmN0aW9uKHRleHQpe3RoaXMudGV4dD10ZXh0O3RoaXMudG9rZW5zPXRoaXMubGV4ZXIubGV4KHRleHQpO3ZhciB2YWx1ZT10aGlzLnN0YXRlbWVudHMoKTtpZih0aGlzLnRva2Vucy5sZW5ndGghPT0wKXt0aGlzLnRocm93RXJyb3IoJ2lzIGFuIHVuZXhwZWN0ZWQgdG9rZW4nLHRoaXMudG9rZW5zWzBdKTt9CnZhbHVlLmxpdGVyYWw9ISF2YWx1ZS5saXRlcmFsO3ZhbHVlLmNvbnN0YW50PSEhdmFsdWUuY29uc3RhbnQ7cmV0dXJuIHZhbHVlO30scHJpbWFyeTpmdW5jdGlvbigpe3ZhciBwcmltYXJ5O2lmKHRoaXMuZXhwZWN0KCcoJykpe3ByaW1hcnk9dGhpcy5maWx0ZXJDaGFpbigpO3RoaXMuY29uc3VtZSgnKScpO31lbHNlIGlmKHRoaXMuZXhwZWN0KCdbJykpe3ByaW1hcnk9dGhpcy5hcnJheURlY2xhcmF0aW9uKCk7fWVsc2UgaWYodGhpcy5leHBlY3QoJ3snKSl7cHJpbWFyeT10aGlzLm9iamVjdCgpO31lbHNle3ZhciB0b2tlbj10aGlzLmV4cGVjdCgpO3ByaW1hcnk9dG9rZW4uZm47aWYoIXByaW1hcnkpe3RoaXMudGhyb3dFcnJvcignbm90IGEgcHJpbWFyeSBleHByZXNzaW9uJyx0b2tlbik7fQpwcmltYXJ5LmxpdGVyYWw9ISF0b2tlbi5saXRlcmFsO3ByaW1hcnkuY29uc3RhbnQ9ISF0b2tlbi5jb25zdGFudDt9CnZhciBuZXh0LGNvbnRleHQ7d2hpbGUoKG5leHQ9dGhpcy5leHBlY3QoJygnLCdbJywnLicpKSl7aWYobmV4dC50ZXh0PT09JygnKXtwcmltYXJ5PXRoaXMuZnVuY3Rpb25DYWxsKHByaW1hcnksY29udGV4dCk7Y29udGV4dD1udWxsO31lbHNlIGlmKG5leHQudGV4dD09PSdbJyl7Y29udGV4dD1wcmltYXJ5O3ByaW1hcnk9dGhpcy5vYmplY3RJbmRleChwcmltYXJ5KTt9ZWxzZSBpZihuZXh0LnRleHQ9PT0nLicpe2NvbnRleHQ9cHJpbWFyeTtwcmltYXJ5PXRoaXMuZmllbGRBY2Nlc3MocHJpbWFyeSk7fWVsc2V7dGhpcy50aHJvd0Vycm9yKCdJTVBPU1NJQkxFJyk7fX0KcmV0dXJuIHByaW1hcnk7fSx0aHJvd0Vycm9yOmZ1bmN0aW9uKG1zZyx0b2tlbil7dGhyb3cgJHBhcnNlTWluRXJyKCdzeW50YXgnLCdTeW50YXggRXJyb3I6IFRva2VuIFwnezB9XCcgezF9IGF0IGNvbHVtbiB7Mn0gb2YgdGhlIGV4cHJlc3Npb24gW3szfV0gc3RhcnRpbmcgYXQgW3s0fV0uJyx0b2tlbi50ZXh0LG1zZywodG9rZW4uaW5kZXgrMSksdGhpcy50ZXh0LHRoaXMudGV4dC5zdWJzdHJpbmcodG9rZW4uaW5kZXgpKTt9LHBlZWtUb2tlbjpmdW5jdGlvbigpe2lmKHRoaXMudG9rZW5zLmxlbmd0aD09PTApCnRocm93ICRwYXJzZU1pbkVycigndWVvZScsJ1VuZXhwZWN0ZWQgZW5kIG9mIGV4cHJlc3Npb246IHswfScsdGhpcy50ZXh0KTtyZXR1cm4gdGhpcy50b2tlbnNbMF07fSxwZWVrOmZ1bmN0aW9uKGUxLGUyLGUzLGU0KXtpZih0aGlzLnRva2Vucy5sZW5ndGg+MCl7dmFyIHRva2VuPXRoaXMudG9rZW5zWzBdO3ZhciB0PXRva2VuLnRleHQ7aWYodD09PWUxfHx0PT09ZTJ8fHQ9PT1lM3x8dD09PWU0fHwoIWUxJiYhZTImJiFlMyYmIWU0KSl7cmV0dXJuIHRva2VuO319CnJldHVybiBmYWxzZTt9LGV4cGVjdDpmdW5jdGlvbihlMSxlMixlMyxlNCl7dmFyIHRva2VuPXRoaXMucGVlayhlMSxlMixlMyxlNCk7aWYodG9rZW4pe3RoaXMudG9rZW5zLnNoaWZ0KCk7cmV0dXJuIHRva2VuO30KcmV0dXJuIGZhbHNlO30sY29uc3VtZTpmdW5jdGlvbihlMSl7aWYoIXRoaXMuZXhwZWN0KGUxKSl7dGhpcy50aHJvd0Vycm9yKCdpcyB1bmV4cGVjdGVkLCBleHBlY3RpbmcgWycrZTErJ10nLHRoaXMucGVlaygpKTt9fSx1bmFyeUZuOmZ1bmN0aW9uKGZuLHJpZ2h0KXtyZXR1cm4gZXh0ZW5kKGZ1bmN0aW9uKHNlbGYsbG9jYWxzKXtyZXR1cm4gZm4oc2VsZixsb2NhbHMscmlnaHQpO30se2NvbnN0YW50OnJpZ2h0LmNvbnN0YW50fSk7fSx0ZXJuYXJ5Rm46ZnVuY3Rpb24obGVmdCxtaWRkbGUscmlnaHQpe3JldHVybiBleHRlbmQoZnVuY3Rpb24oc2VsZixsb2NhbHMpe3JldHVybiBsZWZ0KHNlbGYsbG9jYWxzKT9taWRkbGUoc2VsZixsb2NhbHMpOnJpZ2h0KHNlbGYsbG9jYWxzKTt9LHtjb25zdGFudDpsZWZ0LmNvbnN0YW50JiZtaWRkbGUuY29uc3RhbnQmJnJpZ2h0LmNvbnN0YW50fSk7fSxiaW5hcnlGbjpmdW5jdGlvbihsZWZ0LGZuLHJpZ2h0KXtyZXR1cm4gZXh0ZW5kKGZ1bmN0aW9uKHNlbGYsbG9jYWxzKXtyZXR1cm4gZm4oc2VsZixsb2NhbHMsbGVmdCxyaWdodCk7fSx7Y29uc3RhbnQ6bGVmdC5jb25zdGFudCYmcmlnaHQuY29uc3RhbnR9KTt9LHN0YXRlbWVudHM6ZnVuY3Rpb24oKXt2YXIgc3RhdGVtZW50cz1bXTt3aGlsZSh0cnVlKXtpZih0aGlzLnRva2Vucy5sZW5ndGg+MCYmIXRoaXMucGVlaygnfScsJyknLCc7JywnXScpKQpzdGF0ZW1lbnRzLnB1c2godGhpcy5maWx0ZXJDaGFpbigpKTtpZighdGhpcy5leHBlY3QoJzsnKSl7cmV0dXJuKHN0YXRlbWVudHMubGVuZ3RoPT09MSk/c3RhdGVtZW50c1swXTpmdW5jdGlvbihzZWxmLGxvY2Fscyl7dmFyIHZhbHVlO2Zvcih2YXIgaT0wO2k8c3RhdGVtZW50cy5sZW5ndGg7aSsrKXt2YXIgc3RhdGVtZW50PXN0YXRlbWVudHNbaV07aWYoc3RhdGVtZW50KXt2YWx1ZT1zdGF0ZW1lbnQoc2VsZixsb2NhbHMpO319CnJldHVybiB2YWx1ZTt9O319fSxmaWx0ZXJDaGFpbjpmdW5jdGlvbigpe3ZhciBsZWZ0PXRoaXMuZXhwcmVzc2lvbigpO3ZhciB0b2tlbjt3aGlsZSh0cnVlKXtpZigodG9rZW49dGhpcy5leHBlY3QoJ3wnKSkpe2xlZnQ9dGhpcy5iaW5hcnlGbihsZWZ0LHRva2VuLmZuLHRoaXMuZmlsdGVyKCkpO31lbHNle3JldHVybiBsZWZ0O319fSxmaWx0ZXI6ZnVuY3Rpb24oKXt2YXIgdG9rZW49dGhpcy5leHBlY3QoKTt2YXIgZm49dGhpcy4kZmlsdGVyKHRva2VuLnRleHQpO3ZhciBhcmdzRm49W107d2hpbGUodHJ1ZSl7aWYoKHRva2VuPXRoaXMuZXhwZWN0KCc6JykpKXthcmdzRm4ucHVzaCh0aGlzLmV4cHJlc3Npb24oKSk7fWVsc2V7dmFyIGZuSW52b2tlPWZ1bmN0aW9uKHNlbGYsbG9jYWxzLGlucHV0KXt2YXIgYXJncz1baW5wdXRdO2Zvcih2YXIgaT0wO2k8YXJnc0ZuLmxlbmd0aDtpKyspe2FyZ3MucHVzaChhcmdzRm5baV0oc2VsZixsb2NhbHMpKTt9CnJldHVybiBmbi5hcHBseShzZWxmLGFyZ3MpO307cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGZuSW52b2tlO307fX19LGV4cHJlc3Npb246ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hc3NpZ25tZW50KCk7fSxhc3NpZ25tZW50OmZ1bmN0aW9uKCl7dmFyIGxlZnQ9dGhpcy50ZXJuYXJ5KCk7dmFyIHJpZ2h0O3ZhciB0b2tlbjtpZigodG9rZW49dGhpcy5leHBlY3QoJz0nKSkpe2lmKCFsZWZ0LmFzc2lnbil7dGhpcy50aHJvd0Vycm9yKCdpbXBsaWVzIGFzc2lnbm1lbnQgYnV0IFsnKwp0aGlzLnRleHQuc3Vic3RyaW5nKDAsdG9rZW4uaW5kZXgpKyddIGNhbiBub3QgYmUgYXNzaWduZWQgdG8nLHRva2VuKTt9CnJpZ2h0PXRoaXMudGVybmFyeSgpO3JldHVybiBmdW5jdGlvbihzY29wZSxsb2NhbHMpe3JldHVybiBsZWZ0LmFzc2lnbihzY29wZSxyaWdodChzY29wZSxsb2NhbHMpLGxvY2Fscyk7fTt9CnJldHVybiBsZWZ0O30sdGVybmFyeTpmdW5jdGlvbigpe3ZhciBsZWZ0PXRoaXMubG9naWNhbE9SKCk7dmFyIG1pZGRsZTt2YXIgdG9rZW47aWYoKHRva2VuPXRoaXMuZXhwZWN0KCc/JykpKXttaWRkbGU9dGhpcy50ZXJuYXJ5KCk7aWYoKHRva2VuPXRoaXMuZXhwZWN0KCc6JykpKXtyZXR1cm4gdGhpcy50ZXJuYXJ5Rm4obGVmdCxtaWRkbGUsdGhpcy50ZXJuYXJ5KCkpO31lbHNle3RoaXMudGhyb3dFcnJvcignZXhwZWN0ZWQgOicsdG9rZW4pO319ZWxzZXtyZXR1cm4gbGVmdDt9fSxsb2dpY2FsT1I6ZnVuY3Rpb24oKXt2YXIgbGVmdD10aGlzLmxvZ2ljYWxBTkQoKTt2YXIgdG9rZW47d2hpbGUodHJ1ZSl7aWYoKHRva2VuPXRoaXMuZXhwZWN0KCd8fCcpKSl7bGVmdD10aGlzLmJpbmFyeUZuKGxlZnQsdG9rZW4uZm4sdGhpcy5sb2dpY2FsQU5EKCkpO31lbHNle3JldHVybiBsZWZ0O319fSxsb2dpY2FsQU5EOmZ1bmN0aW9uKCl7dmFyIGxlZnQ9dGhpcy5lcXVhbGl0eSgpO3ZhciB0b2tlbjtpZigodG9rZW49dGhpcy5leHBlY3QoJyYmJykpKXtsZWZ0PXRoaXMuYmluYXJ5Rm4obGVmdCx0b2tlbi5mbix0aGlzLmxvZ2ljYWxBTkQoKSk7fQpyZXR1cm4gbGVmdDt9LGVxdWFsaXR5OmZ1bmN0aW9uKCl7dmFyIGxlZnQ9dGhpcy5yZWxhdGlvbmFsKCk7dmFyIHRva2VuO2lmKCh0b2tlbj10aGlzLmV4cGVjdCgnPT0nLCchPScsJz09PScsJyE9PScpKSl7bGVmdD10aGlzLmJpbmFyeUZuKGxlZnQsdG9rZW4uZm4sdGhpcy5lcXVhbGl0eSgpKTt9CnJldHVybiBsZWZ0O30scmVsYXRpb25hbDpmdW5jdGlvbigpe3ZhciBsZWZ0PXRoaXMuYWRkaXRpdmUoKTt2YXIgdG9rZW47aWYoKHRva2VuPXRoaXMuZXhwZWN0KCc8JywnPicsJzw9JywnPj0nKSkpe2xlZnQ9dGhpcy5iaW5hcnlGbihsZWZ0LHRva2VuLmZuLHRoaXMucmVsYXRpb25hbCgpKTt9CnJldHVybiBsZWZ0O30sYWRkaXRpdmU6ZnVuY3Rpb24oKXt2YXIgbGVmdD10aGlzLm11bHRpcGxpY2F0aXZlKCk7dmFyIHRva2VuO3doaWxlKCh0b2tlbj10aGlzLmV4cGVjdCgnKycsJy0nKSkpe2xlZnQ9dGhpcy5iaW5hcnlGbihsZWZ0LHRva2VuLmZuLHRoaXMubXVsdGlwbGljYXRpdmUoKSk7fQpyZXR1cm4gbGVmdDt9LG11bHRpcGxpY2F0aXZlOmZ1bmN0aW9uKCl7dmFyIGxlZnQ9dGhpcy51bmFyeSgpO3ZhciB0b2tlbjt3aGlsZSgodG9rZW49dGhpcy5leHBlY3QoJyonLCcvJywnJScpKSl7bGVmdD10aGlzLmJpbmFyeUZuKGxlZnQsdG9rZW4uZm4sdGhpcy51bmFyeSgpKTt9CnJldHVybiBsZWZ0O30sdW5hcnk6ZnVuY3Rpb24oKXt2YXIgdG9rZW47aWYodGhpcy5leHBlY3QoJysnKSl7cmV0dXJuIHRoaXMucHJpbWFyeSgpO31lbHNlIGlmKCh0b2tlbj10aGlzLmV4cGVjdCgnLScpKSl7cmV0dXJuIHRoaXMuYmluYXJ5Rm4oUGFyc2VyLlpFUk8sdG9rZW4uZm4sdGhpcy51bmFyeSgpKTt9ZWxzZSBpZigodG9rZW49dGhpcy5leHBlY3QoJyEnKSkpe3JldHVybiB0aGlzLnVuYXJ5Rm4odG9rZW4uZm4sdGhpcy51bmFyeSgpKTt9ZWxzZXtyZXR1cm4gdGhpcy5wcmltYXJ5KCk7fX0sZmllbGRBY2Nlc3M6ZnVuY3Rpb24ob2JqZWN0KXt2YXIgcGFyc2VyPXRoaXM7dmFyIGZpZWxkPXRoaXMuZXhwZWN0KCkudGV4dDt2YXIgZ2V0dGVyPWdldHRlckZuKGZpZWxkLHRoaXMub3B0aW9ucyx0aGlzLnRleHQpO3JldHVybiBleHRlbmQoZnVuY3Rpb24oc2NvcGUsbG9jYWxzLHNlbGYpe3JldHVybiBnZXR0ZXIoc2VsZnx8b2JqZWN0KHNjb3BlLGxvY2FscykpO30se2Fzc2lnbjpmdW5jdGlvbihzY29wZSx2YWx1ZSxsb2NhbHMpe3JldHVybiBzZXR0ZXIob2JqZWN0KHNjb3BlLGxvY2FscyksZmllbGQsdmFsdWUscGFyc2VyLnRleHQscGFyc2VyLm9wdGlvbnMpO319KTt9LG9iamVjdEluZGV4OmZ1bmN0aW9uKG9iail7dmFyIHBhcnNlcj10aGlzO3ZhciBpbmRleEZuPXRoaXMuZXhwcmVzc2lvbigpO3RoaXMuY29uc3VtZSgnXScpO3JldHVybiBleHRlbmQoZnVuY3Rpb24oc2VsZixsb2NhbHMpe3ZhciBvPW9iaihzZWxmLGxvY2FscyksaT1pbmRleEZuKHNlbGYsbG9jYWxzKSx2LHA7ZW5zdXJlU2FmZU1lbWJlck5hbWUoaSxwYXJzZXIudGV4dCk7aWYoIW8pcmV0dXJuIHVuZGVmaW5lZDt2PWVuc3VyZVNhZmVPYmplY3Qob1tpXSxwYXJzZXIudGV4dCk7aWYodiYmdi50aGVuJiZwYXJzZXIub3B0aW9ucy51bndyYXBQcm9taXNlcyl7cD12O2lmKCEoJyQkdidpbiB2KSl7cC4kJHY9dW5kZWZpbmVkO3AudGhlbihmdW5jdGlvbih2YWwpe3AuJCR2PXZhbDt9KTt9CnY9di4kJHY7fQpyZXR1cm4gdjt9LHthc3NpZ246ZnVuY3Rpb24oc2VsZix2YWx1ZSxsb2NhbHMpe3ZhciBrZXk9aW5kZXhGbihzZWxmLGxvY2Fscyk7dmFyIHNhZmU9ZW5zdXJlU2FmZU9iamVjdChvYmooc2VsZixsb2NhbHMpLHBhcnNlci50ZXh0KTtyZXR1cm4gc2FmZVtrZXldPXZhbHVlO319KTt9LGZ1bmN0aW9uQ2FsbDpmdW5jdGlvbihmbixjb250ZXh0R2V0dGVyKXt2YXIgYXJnc0ZuPVtdO2lmKHRoaXMucGVla1Rva2VuKCkudGV4dCE9PScpJyl7ZG97YXJnc0ZuLnB1c2godGhpcy5leHByZXNzaW9uKCkpO313aGlsZSh0aGlzLmV4cGVjdCgnLCcpKTt9CnRoaXMuY29uc3VtZSgnKScpO3ZhciBwYXJzZXI9dGhpcztyZXR1cm4gZnVuY3Rpb24oc2NvcGUsbG9jYWxzKXt2YXIgYXJncz1bXTt2YXIgY29udGV4dD1jb250ZXh0R2V0dGVyP2NvbnRleHRHZXR0ZXIoc2NvcGUsbG9jYWxzKTpzY29wZTtmb3IodmFyIGk9MDtpPGFyZ3NGbi5sZW5ndGg7aSsrKXthcmdzLnB1c2goYXJnc0ZuW2ldKHNjb3BlLGxvY2FscykpO30KdmFyIGZuUHRyPWZuKHNjb3BlLGxvY2Fscyxjb250ZXh0KXx8bm9vcDtlbnN1cmVTYWZlT2JqZWN0KGNvbnRleHQscGFyc2VyLnRleHQpO2Vuc3VyZVNhZmVGdW5jdGlvbihmblB0cixwYXJzZXIudGV4dCk7dmFyIHY9Zm5QdHIuYXBwbHk/Zm5QdHIuYXBwbHkoY29udGV4dCxhcmdzKTpmblB0cihhcmdzWzBdLGFyZ3NbMV0sYXJnc1syXSxhcmdzWzNdLGFyZ3NbNF0pO3JldHVybiBlbnN1cmVTYWZlT2JqZWN0KHYscGFyc2VyLnRleHQpO307fSxhcnJheURlY2xhcmF0aW9uOmZ1bmN0aW9uKCl7dmFyIGVsZW1lbnRGbnM9W107dmFyIGFsbENvbnN0YW50PXRydWU7aWYodGhpcy5wZWVrVG9rZW4oKS50ZXh0IT09J10nKXtkb3tpZih0aGlzLnBlZWsoJ10nKSl7YnJlYWs7fQp2YXIgZWxlbWVudEZuPXRoaXMuZXhwcmVzc2lvbigpO2VsZW1lbnRGbnMucHVzaChlbGVtZW50Rm4pO2lmKCFlbGVtZW50Rm4uY29uc3RhbnQpe2FsbENvbnN0YW50PWZhbHNlO319d2hpbGUodGhpcy5leHBlY3QoJywnKSk7fQp0aGlzLmNvbnN1bWUoJ10nKTtyZXR1cm4gZXh0ZW5kKGZ1bmN0aW9uKHNlbGYsbG9jYWxzKXt2YXIgYXJyYXk9W107Zm9yKHZhciBpPTA7aTxlbGVtZW50Rm5zLmxlbmd0aDtpKyspe2FycmF5LnB1c2goZWxlbWVudEZuc1tpXShzZWxmLGxvY2FscykpO30KcmV0dXJuIGFycmF5O30se2xpdGVyYWw6dHJ1ZSxjb25zdGFudDphbGxDb25zdGFudH0pO30sb2JqZWN0OmZ1bmN0aW9uKCl7dmFyIGtleVZhbHVlcz1bXTt2YXIgYWxsQ29uc3RhbnQ9dHJ1ZTtpZih0aGlzLnBlZWtUb2tlbigpLnRleHQhPT0nfScpe2Rve2lmKHRoaXMucGVlaygnfScpKXticmVhazt9CnZhciB0b2tlbj10aGlzLmV4cGVjdCgpLGtleT10b2tlbi5zdHJpbmd8fHRva2VuLnRleHQ7dGhpcy5jb25zdW1lKCc6Jyk7dmFyIHZhbHVlPXRoaXMuZXhwcmVzc2lvbigpO2tleVZhbHVlcy5wdXNoKHtrZXk6a2V5LHZhbHVlOnZhbHVlfSk7aWYoIXZhbHVlLmNvbnN0YW50KXthbGxDb25zdGFudD1mYWxzZTt9fXdoaWxlKHRoaXMuZXhwZWN0KCcsJykpO30KdGhpcy5jb25zdW1lKCd9Jyk7cmV0dXJuIGV4dGVuZChmdW5jdGlvbihzZWxmLGxvY2Fscyl7dmFyIG9iamVjdD17fTtmb3IodmFyIGk9MDtpPGtleVZhbHVlcy5sZW5ndGg7aSsrKXt2YXIga2V5VmFsdWU9a2V5VmFsdWVzW2ldO29iamVjdFtrZXlWYWx1ZS5rZXldPWtleVZhbHVlLnZhbHVlKHNlbGYsbG9jYWxzKTt9CnJldHVybiBvYmplY3Q7fSx7bGl0ZXJhbDp0cnVlLGNvbnN0YW50OmFsbENvbnN0YW50fSk7fX07ZnVuY3Rpb24gc2V0dGVyKG9iaixwYXRoLHNldFZhbHVlLGZ1bGxFeHAsb3B0aW9ucyl7b3B0aW9ucz1vcHRpb25zfHx7fTt2YXIgZWxlbWVudD1wYXRoLnNwbGl0KCcuJyksa2V5O2Zvcih2YXIgaT0wO2VsZW1lbnQubGVuZ3RoPjE7aSsrKXtrZXk9ZW5zdXJlU2FmZU1lbWJlck5hbWUoZWxlbWVudC5zaGlmdCgpLGZ1bGxFeHApO3ZhciBwcm9wZXJ0eU9iaj1vYmpba2V5XTtpZighcHJvcGVydHlPYmope3Byb3BlcnR5T2JqPXt9O29ialtrZXldPXByb3BlcnR5T2JqO30Kb2JqPXByb3BlcnR5T2JqO2lmKG9iai50aGVuJiZvcHRpb25zLnVud3JhcFByb21pc2VzKXtwcm9taXNlV2FybmluZyhmdWxsRXhwKTtpZighKCIkJHYiaW4gb2JqKSl7KGZ1bmN0aW9uKHByb21pc2Upe3Byb21pc2UudGhlbihmdW5jdGlvbih2YWwpe3Byb21pc2UuJCR2PXZhbDt9KTt9KShvYmopO30KaWYob2JqLiQkdj09PXVuZGVmaW5lZCl7b2JqLiQkdj17fTt9Cm9iaj1vYmouJCR2O319CmtleT1lbnN1cmVTYWZlTWVtYmVyTmFtZShlbGVtZW50LnNoaWZ0KCksZnVsbEV4cCk7ZW5zdXJlU2FmZU9iamVjdChvYmosZnVsbEV4cCk7ZW5zdXJlU2FmZU9iamVjdChvYmpba2V5XSxmdWxsRXhwKTtvYmpba2V5XT1zZXRWYWx1ZTtyZXR1cm4gc2V0VmFsdWU7fQp2YXIgZ2V0dGVyRm5DYWNoZT17fTtmdW5jdGlvbiBjc3BTYWZlR2V0dGVyRm4oa2V5MCxrZXkxLGtleTIsa2V5MyxrZXk0LGZ1bGxFeHAsb3B0aW9ucyl7ZW5zdXJlU2FmZU1lbWJlck5hbWUoa2V5MCxmdWxsRXhwKTtlbnN1cmVTYWZlTWVtYmVyTmFtZShrZXkxLGZ1bGxFeHApO2Vuc3VyZVNhZmVNZW1iZXJOYW1lKGtleTIsZnVsbEV4cCk7ZW5zdXJlU2FmZU1lbWJlck5hbWUoa2V5MyxmdWxsRXhwKTtlbnN1cmVTYWZlTWVtYmVyTmFtZShrZXk0LGZ1bGxFeHApO3JldHVybiFvcHRpb25zLnVud3JhcFByb21pc2VzP2Z1bmN0aW9uIGNzcFNhZmVHZXR0ZXIoc2NvcGUsbG9jYWxzKXt2YXIgcGF0aFZhbD0obG9jYWxzJiZsb2NhbHMuaGFzT3duUHJvcGVydHkoa2V5MCkpP2xvY2FsczpzY29wZTtpZihwYXRoVmFsPT1udWxsKXJldHVybiBwYXRoVmFsO3BhdGhWYWw9cGF0aFZhbFtrZXkwXTtpZigha2V5MSlyZXR1cm4gcGF0aFZhbDtpZihwYXRoVmFsPT1udWxsKXJldHVybiB1bmRlZmluZWQ7cGF0aFZhbD1wYXRoVmFsW2tleTFdO2lmKCFrZXkyKXJldHVybiBwYXRoVmFsO2lmKHBhdGhWYWw9PW51bGwpcmV0dXJuIHVuZGVmaW5lZDtwYXRoVmFsPXBhdGhWYWxba2V5Ml07aWYoIWtleTMpcmV0dXJuIHBhdGhWYWw7aWYocGF0aFZhbD09bnVsbClyZXR1cm4gdW5kZWZpbmVkO3BhdGhWYWw9cGF0aFZhbFtrZXkzXTtpZigha2V5NClyZXR1cm4gcGF0aFZhbDtpZihwYXRoVmFsPT1udWxsKXJldHVybiB1bmRlZmluZWQ7cGF0aFZhbD1wYXRoVmFsW2tleTRdO3JldHVybiBwYXRoVmFsO306ZnVuY3Rpb24gY3NwU2FmZVByb21pc2VFbmFibGVkR2V0dGVyKHNjb3BlLGxvY2Fscyl7dmFyIHBhdGhWYWw9KGxvY2FscyYmbG9jYWxzLmhhc093blByb3BlcnR5KGtleTApKT9sb2NhbHM6c2NvcGUscHJvbWlzZTtpZihwYXRoVmFsPT1udWxsKXJldHVybiBwYXRoVmFsO3BhdGhWYWw9cGF0aFZhbFtrZXkwXTtpZihwYXRoVmFsJiZwYXRoVmFsLnRoZW4pe3Byb21pc2VXYXJuaW5nKGZ1bGxFeHApO2lmKCEoIiQkdiJpbiBwYXRoVmFsKSl7cHJvbWlzZT1wYXRoVmFsO3Byb21pc2UuJCR2PXVuZGVmaW5lZDtwcm9taXNlLnRoZW4oZnVuY3Rpb24odmFsKXtwcm9taXNlLiQkdj12YWw7fSk7fQpwYXRoVmFsPXBhdGhWYWwuJCR2O30KaWYoIWtleTEpcmV0dXJuIHBhdGhWYWw7aWYocGF0aFZhbD09bnVsbClyZXR1cm4gdW5kZWZpbmVkO3BhdGhWYWw9cGF0aFZhbFtrZXkxXTtpZihwYXRoVmFsJiZwYXRoVmFsLnRoZW4pe3Byb21pc2VXYXJuaW5nKGZ1bGxFeHApO2lmKCEoIiQkdiJpbiBwYXRoVmFsKSl7cHJvbWlzZT1wYXRoVmFsO3Byb21pc2UuJCR2PXVuZGVmaW5lZDtwcm9taXNlLnRoZW4oZnVuY3Rpb24odmFsKXtwcm9taXNlLiQkdj12YWw7fSk7fQpwYXRoVmFsPXBhdGhWYWwuJCR2O30KaWYoIWtleTIpcmV0dXJuIHBhdGhWYWw7aWYocGF0aFZhbD09bnVsbClyZXR1cm4gdW5kZWZpbmVkO3BhdGhWYWw9cGF0aFZhbFtrZXkyXTtpZihwYXRoVmFsJiZwYXRoVmFsLnRoZW4pe3Byb21pc2VXYXJuaW5nKGZ1bGxFeHApO2lmKCEoIiQkdiJpbiBwYXRoVmFsKSl7cHJvbWlzZT1wYXRoVmFsO3Byb21pc2UuJCR2PXVuZGVmaW5lZDtwcm9taXNlLnRoZW4oZnVuY3Rpb24odmFsKXtwcm9taXNlLiQkdj12YWw7fSk7fQpwYXRoVmFsPXBhdGhWYWwuJCR2O30KaWYoIWtleTMpcmV0dXJuIHBhdGhWYWw7aWYocGF0aFZhbD09bnVsbClyZXR1cm4gdW5kZWZpbmVkO3BhdGhWYWw9cGF0aFZhbFtrZXkzXTtpZihwYXRoVmFsJiZwYXRoVmFsLnRoZW4pe3Byb21pc2VXYXJuaW5nKGZ1bGxFeHApO2lmKCEoIiQkdiJpbiBwYXRoVmFsKSl7cHJvbWlzZT1wYXRoVmFsO3Byb21pc2UuJCR2PXVuZGVmaW5lZDtwcm9taXNlLnRoZW4oZnVuY3Rpb24odmFsKXtwcm9taXNlLiQkdj12YWw7fSk7fQpwYXRoVmFsPXBhdGhWYWwuJCR2O30KaWYoIWtleTQpcmV0dXJuIHBhdGhWYWw7aWYocGF0aFZhbD09bnVsbClyZXR1cm4gdW5kZWZpbmVkO3BhdGhWYWw9cGF0aFZhbFtrZXk0XTtpZihwYXRoVmFsJiZwYXRoVmFsLnRoZW4pe3Byb21pc2VXYXJuaW5nKGZ1bGxFeHApO2lmKCEoIiQkdiJpbiBwYXRoVmFsKSl7cHJvbWlzZT1wYXRoVmFsO3Byb21pc2UuJCR2PXVuZGVmaW5lZDtwcm9taXNlLnRoZW4oZnVuY3Rpb24odmFsKXtwcm9taXNlLiQkdj12YWw7fSk7fQpwYXRoVmFsPXBhdGhWYWwuJCR2O30KcmV0dXJuIHBhdGhWYWw7fTt9CmZ1bmN0aW9uIHNpbXBsZUdldHRlckZuMShrZXkwLGZ1bGxFeHApe2Vuc3VyZVNhZmVNZW1iZXJOYW1lKGtleTAsZnVsbEV4cCk7cmV0dXJuIGZ1bmN0aW9uIHNpbXBsZUdldHRlckZuMShzY29wZSxsb2NhbHMpe2lmKHNjb3BlPT1udWxsKXJldHVybiB1bmRlZmluZWQ7cmV0dXJuKChsb2NhbHMmJmxvY2Fscy5oYXNPd25Qcm9wZXJ0eShrZXkwKSk/bG9jYWxzOnNjb3BlKVtrZXkwXTt9O30KZnVuY3Rpb24gc2ltcGxlR2V0dGVyRm4yKGtleTAsa2V5MSxmdWxsRXhwKXtlbnN1cmVTYWZlTWVtYmVyTmFtZShrZXkwLGZ1bGxFeHApO2Vuc3VyZVNhZmVNZW1iZXJOYW1lKGtleTEsZnVsbEV4cCk7cmV0dXJuIGZ1bmN0aW9uIHNpbXBsZUdldHRlckZuMihzY29wZSxsb2NhbHMpe2lmKHNjb3BlPT1udWxsKXJldHVybiB1bmRlZmluZWQ7c2NvcGU9KChsb2NhbHMmJmxvY2Fscy5oYXNPd25Qcm9wZXJ0eShrZXkwKSk/bG9jYWxzOnNjb3BlKVtrZXkwXTtyZXR1cm4gc2NvcGU9PW51bGw/dW5kZWZpbmVkOnNjb3BlW2tleTFdO307fQpmdW5jdGlvbiBnZXR0ZXJGbihwYXRoLG9wdGlvbnMsZnVsbEV4cCl7aWYoZ2V0dGVyRm5DYWNoZS5oYXNPd25Qcm9wZXJ0eShwYXRoKSl7cmV0dXJuIGdldHRlckZuQ2FjaGVbcGF0aF07fQp2YXIgcGF0aEtleXM9cGF0aC5zcGxpdCgnLicpLHBhdGhLZXlzTGVuZ3RoPXBhdGhLZXlzLmxlbmd0aCxmbjtpZighb3B0aW9ucy51bndyYXBQcm9taXNlcyYmcGF0aEtleXNMZW5ndGg9PT0xKXtmbj1zaW1wbGVHZXR0ZXJGbjEocGF0aEtleXNbMF0sZnVsbEV4cCk7fWVsc2UgaWYoIW9wdGlvbnMudW53cmFwUHJvbWlzZXMmJnBhdGhLZXlzTGVuZ3RoPT09Mil7Zm49c2ltcGxlR2V0dGVyRm4yKHBhdGhLZXlzWzBdLHBhdGhLZXlzWzFdLGZ1bGxFeHApO31lbHNlIGlmKG9wdGlvbnMuY3NwKXtpZihwYXRoS2V5c0xlbmd0aDw2KXtmbj1jc3BTYWZlR2V0dGVyRm4ocGF0aEtleXNbMF0scGF0aEtleXNbMV0scGF0aEtleXNbMl0scGF0aEtleXNbM10scGF0aEtleXNbNF0sZnVsbEV4cCxvcHRpb25zKTt9ZWxzZXtmbj1mdW5jdGlvbihzY29wZSxsb2NhbHMpe3ZhciBpPTAsdmFsO2Rve3ZhbD1jc3BTYWZlR2V0dGVyRm4ocGF0aEtleXNbaSsrXSxwYXRoS2V5c1tpKytdLHBhdGhLZXlzW2krK10scGF0aEtleXNbaSsrXSxwYXRoS2V5c1tpKytdLGZ1bGxFeHAsb3B0aW9ucykoc2NvcGUsbG9jYWxzKTtsb2NhbHM9dW5kZWZpbmVkO3Njb3BlPXZhbDt9d2hpbGUoaTxwYXRoS2V5c0xlbmd0aCk7cmV0dXJuIHZhbDt9O319ZWxzZXt2YXIgY29kZT0ndmFyIHA7XG4nO2ZvckVhY2gocGF0aEtleXMsZnVuY3Rpb24oa2V5LGluZGV4KXtlbnN1cmVTYWZlTWVtYmVyTmFtZShrZXksZnVsbEV4cCk7Y29kZSs9J2lmKHMgPT0gbnVsbCkgcmV0dXJuIHVuZGVmaW5lZDtcbicrJ3M9JysoaW5kZXg/J3MnOicoKGsmJmsuaGFzT3duUHJvcGVydHkoIicra2V5KyciKSk/azpzKScpKydbIicra2V5KyciXScrJztcbicrCihvcHRpb25zLnVud3JhcFByb21pc2VzPydpZiAocyAmJiBzLnRoZW4pIHtcbicrJyBwdygiJytmdWxsRXhwLnJlcGxhY2UoLyhbIlxyXG5dKS9nLCdcXCQxJykrJyIpO1xuJysnIGlmICghKCIkJHYiIGluIHMpKSB7XG4nKycgcD1zO1xuJysnIHAuJCR2ID0gdW5kZWZpbmVkO1xuJysnIHAudGhlbihmdW5jdGlvbih2KSB7cC4kJHY9djt9KTtcbicrJ31cbicrJyBzPXMuJCR2XG4nKyd9XG4nOicnKTt9KTtjb2RlKz0ncmV0dXJuIHM7Jzt2YXIgZXZhbGVkRm5HZXR0ZXI9bmV3IEZ1bmN0aW9uKCdzJywnaycsJ3B3Jyxjb2RlKTtldmFsZWRGbkdldHRlci50b1N0cmluZz12YWx1ZUZuKGNvZGUpO2ZuPW9wdGlvbnMudW53cmFwUHJvbWlzZXM/ZnVuY3Rpb24oc2NvcGUsbG9jYWxzKXtyZXR1cm4gZXZhbGVkRm5HZXR0ZXIoc2NvcGUsbG9jYWxzLHByb21pc2VXYXJuaW5nKTt9OmV2YWxlZEZuR2V0dGVyO30KaWYocGF0aCE9PSdoYXNPd25Qcm9wZXJ0eScpe2dldHRlckZuQ2FjaGVbcGF0aF09Zm47fQpyZXR1cm4gZm47fQpmdW5jdGlvbiAkUGFyc2VQcm92aWRlcigpe3ZhciBjYWNoZT17fTt2YXIgJHBhcnNlT3B0aW9ucz17Y3NwOmZhbHNlLHVud3JhcFByb21pc2VzOmZhbHNlLGxvZ1Byb21pc2VXYXJuaW5nczp0cnVlfTt0aGlzLnVud3JhcFByb21pc2VzPWZ1bmN0aW9uKHZhbHVlKXtpZihpc0RlZmluZWQodmFsdWUpKXskcGFyc2VPcHRpb25zLnVud3JhcFByb21pc2VzPSEhdmFsdWU7cmV0dXJuIHRoaXM7fWVsc2V7cmV0dXJuICRwYXJzZU9wdGlvbnMudW53cmFwUHJvbWlzZXM7fX07dGhpcy5sb2dQcm9taXNlV2FybmluZ3M9ZnVuY3Rpb24odmFsdWUpe2lmKGlzRGVmaW5lZCh2YWx1ZSkpeyRwYXJzZU9wdGlvbnMubG9nUHJvbWlzZVdhcm5pbmdzPXZhbHVlO3JldHVybiB0aGlzO31lbHNle3JldHVybiAkcGFyc2VPcHRpb25zLmxvZ1Byb21pc2VXYXJuaW5nczt9fTt0aGlzLiRnZXQ9WyckZmlsdGVyJywnJHNuaWZmZXInLCckbG9nJyxmdW5jdGlvbigkZmlsdGVyLCRzbmlmZmVyLCRsb2cpeyRwYXJzZU9wdGlvbnMuY3NwPSRzbmlmZmVyLmNzcDtwcm9taXNlV2FybmluZz1mdW5jdGlvbiBwcm9taXNlV2FybmluZ0ZuKGZ1bGxFeHApe2lmKCEkcGFyc2VPcHRpb25zLmxvZ1Byb21pc2VXYXJuaW5nc3x8cHJvbWlzZVdhcm5pbmdDYWNoZS5oYXNPd25Qcm9wZXJ0eShmdWxsRXhwKSlyZXR1cm47cHJvbWlzZVdhcm5pbmdDYWNoZVtmdWxsRXhwXT10cnVlOyRsb2cud2FybignWyRwYXJzZV0gUHJvbWlzZSBmb3VuZCBpbiB0aGUgZXhwcmVzc2lvbiBgJytmdWxsRXhwKydgLiAnKydBdXRvbWF0aWMgdW53cmFwcGluZyBvZiBwcm9taXNlcyBpbiBBbmd1bGFyIGV4cHJlc3Npb25zIGlzIGRlcHJlY2F0ZWQuJyk7fTtyZXR1cm4gZnVuY3Rpb24oZXhwKXt2YXIgcGFyc2VkRXhwcmVzc2lvbjtzd2l0Y2godHlwZW9mIGV4cCl7Y2FzZSdzdHJpbmcnOmlmKGNhY2hlLmhhc093blByb3BlcnR5KGV4cCkpe3JldHVybiBjYWNoZVtleHBdO30KdmFyIGxleGVyPW5ldyBMZXhlcigkcGFyc2VPcHRpb25zKTt2YXIgcGFyc2VyPW5ldyBQYXJzZXIobGV4ZXIsJGZpbHRlciwkcGFyc2VPcHRpb25zKTtwYXJzZWRFeHByZXNzaW9uPXBhcnNlci5wYXJzZShleHApO2lmKGV4cCE9PSdoYXNPd25Qcm9wZXJ0eScpe2NhY2hlW2V4cF09cGFyc2VkRXhwcmVzc2lvbjt9CnJldHVybiBwYXJzZWRFeHByZXNzaW9uO2Nhc2UnZnVuY3Rpb24nOnJldHVybiBleHA7ZGVmYXVsdDpyZXR1cm4gbm9vcDt9fTt9XTt9CmZ1bmN0aW9uICRRUHJvdmlkZXIoKXt0aGlzLiRnZXQ9Wyckcm9vdFNjb3BlJywnJGV4Y2VwdGlvbkhhbmRsZXInLGZ1bmN0aW9uKCRyb290U2NvcGUsJGV4Y2VwdGlvbkhhbmRsZXIpe3JldHVybiBxRmFjdG9yeShmdW5jdGlvbihjYWxsYmFjayl7JHJvb3RTY29wZS4kZXZhbEFzeW5jKGNhbGxiYWNrKTt9LCRleGNlcHRpb25IYW5kbGVyKTt9XTt9CmZ1bmN0aW9uIHFGYWN0b3J5KG5leHRUaWNrLGV4Y2VwdGlvbkhhbmRsZXIpe3ZhciBkZWZlcj1mdW5jdGlvbigpe3ZhciBwZW5kaW5nPVtdLHZhbHVlLGRlZmVycmVkO2RlZmVycmVkPXtyZXNvbHZlOmZ1bmN0aW9uKHZhbCl7aWYocGVuZGluZyl7dmFyIGNhbGxiYWNrcz1wZW5kaW5nO3BlbmRpbmc9dW5kZWZpbmVkO3ZhbHVlPXJlZih2YWwpO2lmKGNhbGxiYWNrcy5sZW5ndGgpe25leHRUaWNrKGZ1bmN0aW9uKCl7dmFyIGNhbGxiYWNrO2Zvcih2YXIgaT0wLGlpPWNhbGxiYWNrcy5sZW5ndGg7aTxpaTtpKyspe2NhbGxiYWNrPWNhbGxiYWNrc1tpXTt2YWx1ZS50aGVuKGNhbGxiYWNrWzBdLGNhbGxiYWNrWzFdLGNhbGxiYWNrWzJdKTt9fSk7fX19LHJlamVjdDpmdW5jdGlvbihyZWFzb24pe2RlZmVycmVkLnJlc29sdmUoY3JlYXRlSW50ZXJuYWxSZWplY3RlZFByb21pc2UocmVhc29uKSk7fSxub3RpZnk6ZnVuY3Rpb24ocHJvZ3Jlc3Mpe2lmKHBlbmRpbmcpe3ZhciBjYWxsYmFja3M9cGVuZGluZztpZihwZW5kaW5nLmxlbmd0aCl7bmV4dFRpY2soZnVuY3Rpb24oKXt2YXIgY2FsbGJhY2s7Zm9yKHZhciBpPTAsaWk9Y2FsbGJhY2tzLmxlbmd0aDtpPGlpO2krKyl7Y2FsbGJhY2s9Y2FsbGJhY2tzW2ldO2NhbGxiYWNrWzJdKHByb2dyZXNzKTt9fSk7fX19LHByb21pc2U6e3RoZW46ZnVuY3Rpb24oY2FsbGJhY2ssZXJyYmFjayxwcm9ncmVzc2JhY2spe3ZhciByZXN1bHQ9ZGVmZXIoKTt2YXIgd3JhcHBlZENhbGxiYWNrPWZ1bmN0aW9uKHZhbHVlKXt0cnl7cmVzdWx0LnJlc29sdmUoKGlzRnVuY3Rpb24oY2FsbGJhY2spP2NhbGxiYWNrOmRlZmF1bHRDYWxsYmFjaykodmFsdWUpKTt9Y2F0Y2goZSl7cmVzdWx0LnJlamVjdChlKTtleGNlcHRpb25IYW5kbGVyKGUpO319O3ZhciB3cmFwcGVkRXJyYmFjaz1mdW5jdGlvbihyZWFzb24pe3RyeXtyZXN1bHQucmVzb2x2ZSgoaXNGdW5jdGlvbihlcnJiYWNrKT9lcnJiYWNrOmRlZmF1bHRFcnJiYWNrKShyZWFzb24pKTt9Y2F0Y2goZSl7cmVzdWx0LnJlamVjdChlKTtleGNlcHRpb25IYW5kbGVyKGUpO319O3ZhciB3cmFwcGVkUHJvZ3Jlc3NiYWNrPWZ1bmN0aW9uKHByb2dyZXNzKXt0cnl7cmVzdWx0Lm5vdGlmeSgoaXNGdW5jdGlvbihwcm9ncmVzc2JhY2spP3Byb2dyZXNzYmFjazpkZWZhdWx0Q2FsbGJhY2spKHByb2dyZXNzKSk7fWNhdGNoKGUpe2V4Y2VwdGlvbkhhbmRsZXIoZSk7fX07aWYocGVuZGluZyl7cGVuZGluZy5wdXNoKFt3cmFwcGVkQ2FsbGJhY2ssd3JhcHBlZEVycmJhY2ssd3JhcHBlZFByb2dyZXNzYmFja10pO31lbHNle3ZhbHVlLnRoZW4od3JhcHBlZENhbGxiYWNrLHdyYXBwZWRFcnJiYWNrLHdyYXBwZWRQcm9ncmVzc2JhY2spO30KcmV0dXJuIHJlc3VsdC5wcm9taXNlO30sImNhdGNoIjpmdW5jdGlvbihjYWxsYmFjayl7cmV0dXJuIHRoaXMudGhlbihudWxsLGNhbGxiYWNrKTt9LCJmaW5hbGx5IjpmdW5jdGlvbihjYWxsYmFjayl7ZnVuY3Rpb24gbWFrZVByb21pc2UodmFsdWUscmVzb2x2ZWQpe3ZhciByZXN1bHQ9ZGVmZXIoKTtpZihyZXNvbHZlZCl7cmVzdWx0LnJlc29sdmUodmFsdWUpO31lbHNle3Jlc3VsdC5yZWplY3QodmFsdWUpO30KcmV0dXJuIHJlc3VsdC5wcm9taXNlO30KZnVuY3Rpb24gaGFuZGxlQ2FsbGJhY2sodmFsdWUsaXNSZXNvbHZlZCl7dmFyIGNhbGxiYWNrT3V0cHV0PW51bGw7dHJ5e2NhbGxiYWNrT3V0cHV0PShjYWxsYmFja3x8ZGVmYXVsdENhbGxiYWNrKSgpO31jYXRjaChlKXtyZXR1cm4gbWFrZVByb21pc2UoZSxmYWxzZSk7fQppZihjYWxsYmFja091dHB1dCYmaXNGdW5jdGlvbihjYWxsYmFja091dHB1dC50aGVuKSl7cmV0dXJuIGNhbGxiYWNrT3V0cHV0LnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gbWFrZVByb21pc2UodmFsdWUsaXNSZXNvbHZlZCk7fSxmdW5jdGlvbihlcnJvcil7cmV0dXJuIG1ha2VQcm9taXNlKGVycm9yLGZhbHNlKTt9KTt9ZWxzZXtyZXR1cm4gbWFrZVByb21pc2UodmFsdWUsaXNSZXNvbHZlZCk7fX0KcmV0dXJuIHRoaXMudGhlbihmdW5jdGlvbih2YWx1ZSl7cmV0dXJuIGhhbmRsZUNhbGxiYWNrKHZhbHVlLHRydWUpO30sZnVuY3Rpb24oZXJyb3Ipe3JldHVybiBoYW5kbGVDYWxsYmFjayhlcnJvcixmYWxzZSk7fSk7fX19O3JldHVybiBkZWZlcnJlZDt9O3ZhciByZWY9ZnVuY3Rpb24odmFsdWUpe2lmKHZhbHVlJiZpc0Z1bmN0aW9uKHZhbHVlLnRoZW4pKXJldHVybiB2YWx1ZTtyZXR1cm57dGhlbjpmdW5jdGlvbihjYWxsYmFjayl7dmFyIHJlc3VsdD1kZWZlcigpO25leHRUaWNrKGZ1bmN0aW9uKCl7cmVzdWx0LnJlc29sdmUoY2FsbGJhY2sodmFsdWUpKTt9KTtyZXR1cm4gcmVzdWx0LnByb21pc2U7fX07fTt2YXIgcmVqZWN0PWZ1bmN0aW9uKHJlYXNvbil7dmFyIHJlc3VsdD1kZWZlcigpO3Jlc3VsdC5yZWplY3QocmVhc29uKTtyZXR1cm4gcmVzdWx0LnByb21pc2U7fTt2YXIgY3JlYXRlSW50ZXJuYWxSZWplY3RlZFByb21pc2U9ZnVuY3Rpb24ocmVhc29uKXtyZXR1cm57dGhlbjpmdW5jdGlvbihjYWxsYmFjayxlcnJiYWNrKXt2YXIgcmVzdWx0PWRlZmVyKCk7bmV4dFRpY2soZnVuY3Rpb24oKXt0cnl7cmVzdWx0LnJlc29sdmUoKGlzRnVuY3Rpb24oZXJyYmFjayk/ZXJyYmFjazpkZWZhdWx0RXJyYmFjaykocmVhc29uKSk7fWNhdGNoKGUpe3Jlc3VsdC5yZWplY3QoZSk7ZXhjZXB0aW9uSGFuZGxlcihlKTt9fSk7cmV0dXJuIHJlc3VsdC5wcm9taXNlO319O307dmFyIHdoZW49ZnVuY3Rpb24odmFsdWUsY2FsbGJhY2ssZXJyYmFjayxwcm9ncmVzc2JhY2spe3ZhciByZXN1bHQ9ZGVmZXIoKSxkb25lO3ZhciB3cmFwcGVkQ2FsbGJhY2s9ZnVuY3Rpb24odmFsdWUpe3RyeXtyZXR1cm4oaXNGdW5jdGlvbihjYWxsYmFjayk/Y2FsbGJhY2s6ZGVmYXVsdENhbGxiYWNrKSh2YWx1ZSk7fWNhdGNoKGUpe2V4Y2VwdGlvbkhhbmRsZXIoZSk7cmV0dXJuIHJlamVjdChlKTt9fTt2YXIgd3JhcHBlZEVycmJhY2s9ZnVuY3Rpb24ocmVhc29uKXt0cnl7cmV0dXJuKGlzRnVuY3Rpb24oZXJyYmFjayk/ZXJyYmFjazpkZWZhdWx0RXJyYmFjaykocmVhc29uKTt9Y2F0Y2goZSl7ZXhjZXB0aW9uSGFuZGxlcihlKTtyZXR1cm4gcmVqZWN0KGUpO319O3ZhciB3cmFwcGVkUHJvZ3Jlc3NiYWNrPWZ1bmN0aW9uKHByb2dyZXNzKXt0cnl7cmV0dXJuKGlzRnVuY3Rpb24ocHJvZ3Jlc3NiYWNrKT9wcm9ncmVzc2JhY2s6ZGVmYXVsdENhbGxiYWNrKShwcm9ncmVzcyk7fWNhdGNoKGUpe2V4Y2VwdGlvbkhhbmRsZXIoZSk7fX07bmV4dFRpY2soZnVuY3Rpb24oKXtyZWYodmFsdWUpLnRoZW4oZnVuY3Rpb24odmFsdWUpe2lmKGRvbmUpcmV0dXJuO2RvbmU9dHJ1ZTtyZXN1bHQucmVzb2x2ZShyZWYodmFsdWUpLnRoZW4od3JhcHBlZENhbGxiYWNrLHdyYXBwZWRFcnJiYWNrLHdyYXBwZWRQcm9ncmVzc2JhY2spKTt9LGZ1bmN0aW9uKHJlYXNvbil7aWYoZG9uZSlyZXR1cm47ZG9uZT10cnVlO3Jlc3VsdC5yZXNvbHZlKHdyYXBwZWRFcnJiYWNrKHJlYXNvbikpO30sZnVuY3Rpb24ocHJvZ3Jlc3Mpe2lmKGRvbmUpcmV0dXJuO3Jlc3VsdC5ub3RpZnkod3JhcHBlZFByb2dyZXNzYmFjayhwcm9ncmVzcykpO30pO30pO3JldHVybiByZXN1bHQucHJvbWlzZTt9O2Z1bmN0aW9uIGRlZmF1bHRDYWxsYmFjayh2YWx1ZSl7cmV0dXJuIHZhbHVlO30KZnVuY3Rpb24gZGVmYXVsdEVycmJhY2socmVhc29uKXtyZXR1cm4gcmVqZWN0KHJlYXNvbik7fQpmdW5jdGlvbiBhbGwocHJvbWlzZXMpe3ZhciBkZWZlcnJlZD1kZWZlcigpLGNvdW50ZXI9MCxyZXN1bHRzPWlzQXJyYXkocHJvbWlzZXMpP1tdOnt9O2ZvckVhY2gocHJvbWlzZXMsZnVuY3Rpb24ocHJvbWlzZSxrZXkpe2NvdW50ZXIrKztyZWYocHJvbWlzZSkudGhlbihmdW5jdGlvbih2YWx1ZSl7aWYocmVzdWx0cy5oYXNPd25Qcm9wZXJ0eShrZXkpKXJldHVybjtyZXN1bHRzW2tleV09dmFsdWU7aWYoISgtLWNvdW50ZXIpKWRlZmVycmVkLnJlc29sdmUocmVzdWx0cyk7fSxmdW5jdGlvbihyZWFzb24pe2lmKHJlc3VsdHMuaGFzT3duUHJvcGVydHkoa2V5KSlyZXR1cm47ZGVmZXJyZWQucmVqZWN0KHJlYXNvbik7fSk7fSk7aWYoY291bnRlcj09PTApe2RlZmVycmVkLnJlc29sdmUocmVzdWx0cyk7fQpyZXR1cm4gZGVmZXJyZWQucHJvbWlzZTt9CnJldHVybntkZWZlcjpkZWZlcixyZWplY3Q6cmVqZWN0LHdoZW46d2hlbixhbGw6YWxsfTt9CmZ1bmN0aW9uICQkUkFGUHJvdmlkZXIoKXt0aGlzLiRnZXQ9Wyckd2luZG93JywnJHRpbWVvdXQnLGZ1bmN0aW9uKCR3aW5kb3csJHRpbWVvdXQpe3ZhciByZXF1ZXN0QW5pbWF0aW9uRnJhbWU9JHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fCR3aW5kb3cud2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lfHwkd2luZG93Lm1velJlcXVlc3RBbmltYXRpb25GcmFtZTt2YXIgY2FuY2VsQW5pbWF0aW9uRnJhbWU9JHdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZXx8JHdpbmRvdy53ZWJraXRDYW5jZWxBbmltYXRpb25GcmFtZXx8JHdpbmRvdy5tb3pDYW5jZWxBbmltYXRpb25GcmFtZXx8JHdpbmRvdy53ZWJraXRDYW5jZWxSZXF1ZXN0QW5pbWF0aW9uRnJhbWU7dmFyIHJhZlN1cHBvcnRlZD0hIXJlcXVlc3RBbmltYXRpb25GcmFtZTt2YXIgcmFmPXJhZlN1cHBvcnRlZD9mdW5jdGlvbihmbil7dmFyIGlkPXJlcXVlc3RBbmltYXRpb25GcmFtZShmbik7cmV0dXJuIGZ1bmN0aW9uKCl7Y2FuY2VsQW5pbWF0aW9uRnJhbWUoaWQpO307fTpmdW5jdGlvbihmbil7dmFyIHRpbWVyPSR0aW1lb3V0KGZuLDE2LjY2LGZhbHNlKTtyZXR1cm4gZnVuY3Rpb24oKXskdGltZW91dC5jYW5jZWwodGltZXIpO307fTtyYWYuc3VwcG9ydGVkPXJhZlN1cHBvcnRlZDtyZXR1cm4gcmFmO31dO30KZnVuY3Rpb24gJFJvb3RTY29wZVByb3ZpZGVyKCl7dmFyIFRUTD0xMDt2YXIgJHJvb3RTY29wZU1pbkVycj1taW5FcnIoJyRyb290U2NvcGUnKTt2YXIgbGFzdERpcnR5V2F0Y2g9bnVsbDt0aGlzLmRpZ2VzdFR0bD1mdW5jdGlvbih2YWx1ZSl7aWYoYXJndW1lbnRzLmxlbmd0aCl7VFRMPXZhbHVlO30KcmV0dXJuIFRUTDt9O3RoaXMuJGdldD1bJyRpbmplY3RvcicsJyRleGNlcHRpb25IYW5kbGVyJywnJHBhcnNlJywnJGJyb3dzZXInLGZ1bmN0aW9uKCRpbmplY3RvciwkZXhjZXB0aW9uSGFuZGxlciwkcGFyc2UsJGJyb3dzZXIpe2Z1bmN0aW9uIFNjb3BlKCl7dGhpcy4kaWQ9bmV4dFVpZCgpO3RoaXMuJCRwaGFzZT10aGlzLiRwYXJlbnQ9dGhpcy4kJHdhdGNoZXJzPXRoaXMuJCRuZXh0U2libGluZz10aGlzLiQkcHJldlNpYmxpbmc9dGhpcy4kJGNoaWxkSGVhZD10aGlzLiQkY2hpbGRUYWlsPW51bGw7dGhpc1sndGhpcyddPXRoaXMuJHJvb3Q9dGhpczt0aGlzLiQkZGVzdHJveWVkPWZhbHNlO3RoaXMuJCRhc3luY1F1ZXVlPVtdO3RoaXMuJCRwb3N0RGlnZXN0UXVldWU9W107dGhpcy4kJGxpc3RlbmVycz17fTt0aGlzLiQkbGlzdGVuZXJDb3VudD17fTt0aGlzLiQkaXNvbGF0ZUJpbmRpbmdzPXt9O30KU2NvcGUucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpTY29wZSwkbmV3OmZ1bmN0aW9uKGlzb2xhdGUpe3ZhciBDaGlsZFNjb3BlLGNoaWxkO2lmKGlzb2xhdGUpe2NoaWxkPW5ldyBTY29wZSgpO2NoaWxkLiRyb290PXRoaXMuJHJvb3Q7Y2hpbGQuJCRhc3luY1F1ZXVlPXRoaXMuJCRhc3luY1F1ZXVlO2NoaWxkLiQkcG9zdERpZ2VzdFF1ZXVlPXRoaXMuJCRwb3N0RGlnZXN0UXVldWU7fWVsc2V7aWYoIXRoaXMuJCRjaGlsZFNjb3BlQ2xhc3Mpe3RoaXMuJCRjaGlsZFNjb3BlQ2xhc3M9ZnVuY3Rpb24oKXt0aGlzLiQkd2F0Y2hlcnM9dGhpcy4kJG5leHRTaWJsaW5nPXRoaXMuJCRjaGlsZEhlYWQ9dGhpcy4kJGNoaWxkVGFpbD1udWxsO3RoaXMuJCRsaXN0ZW5lcnM9e307dGhpcy4kJGxpc3RlbmVyQ291bnQ9e307dGhpcy4kaWQ9bmV4dFVpZCgpO3RoaXMuJCRjaGlsZFNjb3BlQ2xhc3M9bnVsbDt9O3RoaXMuJCRjaGlsZFNjb3BlQ2xhc3MucHJvdG90eXBlPXRoaXM7fQpjaGlsZD1uZXcgdGhpcy4kJGNoaWxkU2NvcGVDbGFzcygpO30KY2hpbGRbJ3RoaXMnXT1jaGlsZDtjaGlsZC4kcGFyZW50PXRoaXM7Y2hpbGQuJCRwcmV2U2libGluZz10aGlzLiQkY2hpbGRUYWlsO2lmKHRoaXMuJCRjaGlsZEhlYWQpe3RoaXMuJCRjaGlsZFRhaWwuJCRuZXh0U2libGluZz1jaGlsZDt0aGlzLiQkY2hpbGRUYWlsPWNoaWxkO31lbHNle3RoaXMuJCRjaGlsZEhlYWQ9dGhpcy4kJGNoaWxkVGFpbD1jaGlsZDt9CnJldHVybiBjaGlsZDt9LCR3YXRjaDpmdW5jdGlvbih3YXRjaEV4cCxsaXN0ZW5lcixvYmplY3RFcXVhbGl0eSl7dmFyIHNjb3BlPXRoaXMsZ2V0PWNvbXBpbGVUb0ZuKHdhdGNoRXhwLCd3YXRjaCcpLGFycmF5PXNjb3BlLiQkd2F0Y2hlcnMsd2F0Y2hlcj17Zm46bGlzdGVuZXIsbGFzdDppbml0V2F0Y2hWYWwsZ2V0OmdldCxleHA6d2F0Y2hFeHAsZXE6ISFvYmplY3RFcXVhbGl0eX07bGFzdERpcnR5V2F0Y2g9bnVsbDtpZighaXNGdW5jdGlvbihsaXN0ZW5lcikpe3ZhciBsaXN0ZW5Gbj1jb21waWxlVG9GbihsaXN0ZW5lcnx8bm9vcCwnbGlzdGVuZXInKTt3YXRjaGVyLmZuPWZ1bmN0aW9uKG5ld1ZhbCxvbGRWYWwsc2NvcGUpe2xpc3RlbkZuKHNjb3BlKTt9O30KaWYodHlwZW9mIHdhdGNoRXhwPT0nc3RyaW5nJyYmZ2V0LmNvbnN0YW50KXt2YXIgb3JpZ2luYWxGbj13YXRjaGVyLmZuO3dhdGNoZXIuZm49ZnVuY3Rpb24obmV3VmFsLG9sZFZhbCxzY29wZSl7b3JpZ2luYWxGbi5jYWxsKHRoaXMsbmV3VmFsLG9sZFZhbCxzY29wZSk7YXJyYXlSZW1vdmUoYXJyYXksd2F0Y2hlcik7fTt9CmlmKCFhcnJheSl7YXJyYXk9c2NvcGUuJCR3YXRjaGVycz1bXTt9CmFycmF5LnVuc2hpZnQod2F0Y2hlcik7cmV0dXJuIGZ1bmN0aW9uIGRlcmVnaXN0ZXJXYXRjaCgpe2FycmF5UmVtb3ZlKGFycmF5LHdhdGNoZXIpO2xhc3REaXJ0eVdhdGNoPW51bGw7fTt9LCR3YXRjaENvbGxlY3Rpb246ZnVuY3Rpb24ob2JqLGxpc3RlbmVyKXt2YXIgc2VsZj10aGlzO3ZhciBuZXdWYWx1ZTt2YXIgb2xkVmFsdWU7dmFyIHZlcnlPbGRWYWx1ZTt2YXIgdHJhY2tWZXJ5T2xkVmFsdWU9KGxpc3RlbmVyLmxlbmd0aD4xKTt2YXIgY2hhbmdlRGV0ZWN0ZWQ9MDt2YXIgb2JqR2V0dGVyPSRwYXJzZShvYmopO3ZhciBpbnRlcm5hbEFycmF5PVtdO3ZhciBpbnRlcm5hbE9iamVjdD17fTt2YXIgaW5pdFJ1bj10cnVlO3ZhciBvbGRMZW5ndGg9MDtmdW5jdGlvbiAkd2F0Y2hDb2xsZWN0aW9uV2F0Y2goKXtuZXdWYWx1ZT1vYmpHZXR0ZXIoc2VsZik7dmFyIG5ld0xlbmd0aCxrZXk7aWYoIWlzT2JqZWN0KG5ld1ZhbHVlKSl7aWYob2xkVmFsdWUhPT1uZXdWYWx1ZSl7b2xkVmFsdWU9bmV3VmFsdWU7Y2hhbmdlRGV0ZWN0ZWQrKzt9fWVsc2UgaWYoaXNBcnJheUxpa2UobmV3VmFsdWUpKXtpZihvbGRWYWx1ZSE9PWludGVybmFsQXJyYXkpe29sZFZhbHVlPWludGVybmFsQXJyYXk7b2xkTGVuZ3RoPW9sZFZhbHVlLmxlbmd0aD0wO2NoYW5nZURldGVjdGVkKys7fQpuZXdMZW5ndGg9bmV3VmFsdWUubGVuZ3RoO2lmKG9sZExlbmd0aCE9PW5ld0xlbmd0aCl7Y2hhbmdlRGV0ZWN0ZWQrKztvbGRWYWx1ZS5sZW5ndGg9b2xkTGVuZ3RoPW5ld0xlbmd0aDt9CmZvcih2YXIgaT0wO2k8bmV3TGVuZ3RoO2krKyl7dmFyIGJvdGhOYU49KG9sZFZhbHVlW2ldIT09b2xkVmFsdWVbaV0pJiYobmV3VmFsdWVbaV0hPT1uZXdWYWx1ZVtpXSk7aWYoIWJvdGhOYU4mJihvbGRWYWx1ZVtpXSE9PW5ld1ZhbHVlW2ldKSl7Y2hhbmdlRGV0ZWN0ZWQrKztvbGRWYWx1ZVtpXT1uZXdWYWx1ZVtpXTt9fX1lbHNle2lmKG9sZFZhbHVlIT09aW50ZXJuYWxPYmplY3Qpe29sZFZhbHVlPWludGVybmFsT2JqZWN0PXt9O29sZExlbmd0aD0wO2NoYW5nZURldGVjdGVkKys7fQpuZXdMZW5ndGg9MDtmb3Ioa2V5IGluIG5ld1ZhbHVlKXtpZihuZXdWYWx1ZS5oYXNPd25Qcm9wZXJ0eShrZXkpKXtuZXdMZW5ndGgrKztpZihvbGRWYWx1ZS5oYXNPd25Qcm9wZXJ0eShrZXkpKXtpZihvbGRWYWx1ZVtrZXldIT09bmV3VmFsdWVba2V5XSl7Y2hhbmdlRGV0ZWN0ZWQrKztvbGRWYWx1ZVtrZXldPW5ld1ZhbHVlW2tleV07fX1lbHNle29sZExlbmd0aCsrO29sZFZhbHVlW2tleV09bmV3VmFsdWVba2V5XTtjaGFuZ2VEZXRlY3RlZCsrO319fQppZihvbGRMZW5ndGg+bmV3TGVuZ3RoKXtjaGFuZ2VEZXRlY3RlZCsrO2ZvcihrZXkgaW4gb2xkVmFsdWUpe2lmKG9sZFZhbHVlLmhhc093blByb3BlcnR5KGtleSkmJiFuZXdWYWx1ZS5oYXNPd25Qcm9wZXJ0eShrZXkpKXtvbGRMZW5ndGgtLTtkZWxldGUgb2xkVmFsdWVba2V5XTt9fX19CnJldHVybiBjaGFuZ2VEZXRlY3RlZDt9CmZ1bmN0aW9uICR3YXRjaENvbGxlY3Rpb25BY3Rpb24oKXtpZihpbml0UnVuKXtpbml0UnVuPWZhbHNlO2xpc3RlbmVyKG5ld1ZhbHVlLG5ld1ZhbHVlLHNlbGYpO31lbHNle2xpc3RlbmVyKG5ld1ZhbHVlLHZlcnlPbGRWYWx1ZSxzZWxmKTt9CmlmKHRyYWNrVmVyeU9sZFZhbHVlKXtpZighaXNPYmplY3QobmV3VmFsdWUpKXt2ZXJ5T2xkVmFsdWU9bmV3VmFsdWU7fWVsc2UgaWYoaXNBcnJheUxpa2UobmV3VmFsdWUpKXt2ZXJ5T2xkVmFsdWU9bmV3IEFycmF5KG5ld1ZhbHVlLmxlbmd0aCk7Zm9yKHZhciBpPTA7aTxuZXdWYWx1ZS5sZW5ndGg7aSsrKXt2ZXJ5T2xkVmFsdWVbaV09bmV3VmFsdWVbaV07fX1lbHNle3ZlcnlPbGRWYWx1ZT17fTtmb3IodmFyIGtleSBpbiBuZXdWYWx1ZSl7aWYoaGFzT3duUHJvcGVydHkuY2FsbChuZXdWYWx1ZSxrZXkpKXt2ZXJ5T2xkVmFsdWVba2V5XT1uZXdWYWx1ZVtrZXldO319fX19CnJldHVybiB0aGlzLiR3YXRjaCgkd2F0Y2hDb2xsZWN0aW9uV2F0Y2gsJHdhdGNoQ29sbGVjdGlvbkFjdGlvbik7fSwkZGlnZXN0OmZ1bmN0aW9uKCl7dmFyIHdhdGNoLHZhbHVlLGxhc3Qsd2F0Y2hlcnMsYXN5bmNRdWV1ZT10aGlzLiQkYXN5bmNRdWV1ZSxwb3N0RGlnZXN0UXVldWU9dGhpcy4kJHBvc3REaWdlc3RRdWV1ZSxsZW5ndGgsZGlydHksdHRsPVRUTCxuZXh0LGN1cnJlbnQsdGFyZ2V0PXRoaXMsd2F0Y2hMb2c9W10sbG9nSWR4LGxvZ01zZyxhc3luY1Rhc2s7YmVnaW5QaGFzZSgnJGRpZ2VzdCcpO2xhc3REaXJ0eVdhdGNoPW51bGw7ZG97ZGlydHk9ZmFsc2U7Y3VycmVudD10YXJnZXQ7d2hpbGUoYXN5bmNRdWV1ZS5sZW5ndGgpe3RyeXthc3luY1Rhc2s9YXN5bmNRdWV1ZS5zaGlmdCgpO2FzeW5jVGFzay5zY29wZS4kZXZhbChhc3luY1Rhc2suZXhwcmVzc2lvbik7fWNhdGNoKGUpe2NsZWFyUGhhc2UoKTskZXhjZXB0aW9uSGFuZGxlcihlKTt9Cmxhc3REaXJ0eVdhdGNoPW51bGw7fQp0cmF2ZXJzZVNjb3Blc0xvb3A6ZG97aWYoKHdhdGNoZXJzPWN1cnJlbnQuJCR3YXRjaGVycykpe2xlbmd0aD13YXRjaGVycy5sZW5ndGg7d2hpbGUobGVuZ3RoLS0pe3RyeXt3YXRjaD13YXRjaGVyc1tsZW5ndGhdO2lmKHdhdGNoKXtpZigodmFsdWU9d2F0Y2guZ2V0KGN1cnJlbnQpKSE9PShsYXN0PXdhdGNoLmxhc3QpJiYhKHdhdGNoLmVxP2VxdWFscyh2YWx1ZSxsYXN0KToodHlwZW9mIHZhbHVlPT09J251bWJlcicmJnR5cGVvZiBsYXN0PT09J251bWJlcicmJmlzTmFOKHZhbHVlKSYmaXNOYU4obGFzdCkpKSl7ZGlydHk9dHJ1ZTtsYXN0RGlydHlXYXRjaD13YXRjaDt3YXRjaC5sYXN0PXdhdGNoLmVxP2NvcHkodmFsdWUsbnVsbCk6dmFsdWU7d2F0Y2guZm4odmFsdWUsKChsYXN0PT09aW5pdFdhdGNoVmFsKT92YWx1ZTpsYXN0KSxjdXJyZW50KTtpZih0dGw8NSl7bG9nSWR4PTQtdHRsO2lmKCF3YXRjaExvZ1tsb2dJZHhdKXdhdGNoTG9nW2xvZ0lkeF09W107bG9nTXNnPShpc0Z1bmN0aW9uKHdhdGNoLmV4cCkpPydmbjogJysod2F0Y2guZXhwLm5hbWV8fHdhdGNoLmV4cC50b1N0cmluZygpKTp3YXRjaC5leHA7bG9nTXNnKz0nOyBuZXdWYWw6ICcrdG9Kc29uKHZhbHVlKSsnOyBvbGRWYWw6ICcrdG9Kc29uKGxhc3QpO3dhdGNoTG9nW2xvZ0lkeF0ucHVzaChsb2dNc2cpO319ZWxzZSBpZih3YXRjaD09PWxhc3REaXJ0eVdhdGNoKXtkaXJ0eT1mYWxzZTticmVhayB0cmF2ZXJzZVNjb3Blc0xvb3A7fX19Y2F0Y2goZSl7Y2xlYXJQaGFzZSgpOyRleGNlcHRpb25IYW5kbGVyKGUpO319fQppZighKG5leHQ9KGN1cnJlbnQuJCRjaGlsZEhlYWR8fChjdXJyZW50IT09dGFyZ2V0JiZjdXJyZW50LiQkbmV4dFNpYmxpbmcpKSkpe3doaWxlKGN1cnJlbnQhPT10YXJnZXQmJiEobmV4dD1jdXJyZW50LiQkbmV4dFNpYmxpbmcpKXtjdXJyZW50PWN1cnJlbnQuJHBhcmVudDt9fX13aGlsZSgoY3VycmVudD1uZXh0KSk7aWYoKGRpcnR5fHxhc3luY1F1ZXVlLmxlbmd0aCkmJiEodHRsLS0pKXtjbGVhclBoYXNlKCk7dGhyb3cgJHJvb3RTY29wZU1pbkVycignaW5mZGlnJywnezB9ICRkaWdlc3QoKSBpdGVyYXRpb25zIHJlYWNoZWQuIEFib3J0aW5nIVxuJysnV2F0Y2hlcnMgZmlyZWQgaW4gdGhlIGxhc3QgNSBpdGVyYXRpb25zOiB7MX0nLFRUTCx0b0pzb24od2F0Y2hMb2cpKTt9fXdoaWxlKGRpcnR5fHxhc3luY1F1ZXVlLmxlbmd0aCk7Y2xlYXJQaGFzZSgpO3doaWxlKHBvc3REaWdlc3RRdWV1ZS5sZW5ndGgpe3RyeXtwb3N0RGlnZXN0UXVldWUuc2hpZnQoKSgpO31jYXRjaChlKXskZXhjZXB0aW9uSGFuZGxlcihlKTt9fX0sJGRlc3Ryb3k6ZnVuY3Rpb24oKXtpZih0aGlzLiQkZGVzdHJveWVkKXJldHVybjt2YXIgcGFyZW50PXRoaXMuJHBhcmVudDt0aGlzLiRicm9hZGNhc3QoJyRkZXN0cm95Jyk7dGhpcy4kJGRlc3Ryb3llZD10cnVlO2lmKHRoaXM9PT0kcm9vdFNjb3BlKXJldHVybjtmb3JFYWNoKHRoaXMuJCRsaXN0ZW5lckNvdW50LGJpbmQobnVsbCxkZWNyZW1lbnRMaXN0ZW5lckNvdW50LHRoaXMpKTtpZihwYXJlbnQuJCRjaGlsZEhlYWQ9PXRoaXMpcGFyZW50LiQkY2hpbGRIZWFkPXRoaXMuJCRuZXh0U2libGluZztpZihwYXJlbnQuJCRjaGlsZFRhaWw9PXRoaXMpcGFyZW50LiQkY2hpbGRUYWlsPXRoaXMuJCRwcmV2U2libGluZztpZih0aGlzLiQkcHJldlNpYmxpbmcpdGhpcy4kJHByZXZTaWJsaW5nLiQkbmV4dFNpYmxpbmc9dGhpcy4kJG5leHRTaWJsaW5nO2lmKHRoaXMuJCRuZXh0U2libGluZyl0aGlzLiQkbmV4dFNpYmxpbmcuJCRwcmV2U2libGluZz10aGlzLiQkcHJldlNpYmxpbmc7dGhpcy4kcGFyZW50PXRoaXMuJCRuZXh0U2libGluZz10aGlzLiQkcHJldlNpYmxpbmc9dGhpcy4kJGNoaWxkSGVhZD10aGlzLiQkY2hpbGRUYWlsPXRoaXMuJHJvb3Q9bnVsbDt0aGlzLiQkbGlzdGVuZXJzPXt9O3RoaXMuJCR3YXRjaGVycz10aGlzLiQkYXN5bmNRdWV1ZT10aGlzLiQkcG9zdERpZ2VzdFF1ZXVlPVtdO3RoaXMuJGRlc3Ryb3k9dGhpcy4kZGlnZXN0PXRoaXMuJGFwcGx5PW5vb3A7dGhpcy4kb249dGhpcy4kd2F0Y2g9ZnVuY3Rpb24oKXtyZXR1cm4gbm9vcDt9O30sJGV2YWw6ZnVuY3Rpb24oZXhwcixsb2NhbHMpe3JldHVybiAkcGFyc2UoZXhwcikodGhpcyxsb2NhbHMpO30sJGV2YWxBc3luYzpmdW5jdGlvbihleHByKXtpZighJHJvb3RTY29wZS4kJHBoYXNlJiYhJHJvb3RTY29wZS4kJGFzeW5jUXVldWUubGVuZ3RoKXskYnJvd3Nlci5kZWZlcihmdW5jdGlvbigpe2lmKCRyb290U2NvcGUuJCRhc3luY1F1ZXVlLmxlbmd0aCl7JHJvb3RTY29wZS4kZGlnZXN0KCk7fX0pO30KdGhpcy4kJGFzeW5jUXVldWUucHVzaCh7c2NvcGU6dGhpcyxleHByZXNzaW9uOmV4cHJ9KTt9LCQkcG9zdERpZ2VzdDpmdW5jdGlvbihmbil7dGhpcy4kJHBvc3REaWdlc3RRdWV1ZS5wdXNoKGZuKTt9LCRhcHBseTpmdW5jdGlvbihleHByKXt0cnl7YmVnaW5QaGFzZSgnJGFwcGx5Jyk7cmV0dXJuIHRoaXMuJGV2YWwoZXhwcik7fWNhdGNoKGUpeyRleGNlcHRpb25IYW5kbGVyKGUpO31maW5hbGx5e2NsZWFyUGhhc2UoKTt0cnl7JHJvb3RTY29wZS4kZGlnZXN0KCk7fWNhdGNoKGUpeyRleGNlcHRpb25IYW5kbGVyKGUpO3Rocm93IGU7fX19LCRvbjpmdW5jdGlvbihuYW1lLGxpc3RlbmVyKXt2YXIgbmFtZWRMaXN0ZW5lcnM9dGhpcy4kJGxpc3RlbmVyc1tuYW1lXTtpZighbmFtZWRMaXN0ZW5lcnMpe3RoaXMuJCRsaXN0ZW5lcnNbbmFtZV09bmFtZWRMaXN0ZW5lcnM9W107fQpuYW1lZExpc3RlbmVycy5wdXNoKGxpc3RlbmVyKTt2YXIgY3VycmVudD10aGlzO2Rve2lmKCFjdXJyZW50LiQkbGlzdGVuZXJDb3VudFtuYW1lXSl7Y3VycmVudC4kJGxpc3RlbmVyQ291bnRbbmFtZV09MDt9CmN1cnJlbnQuJCRsaXN0ZW5lckNvdW50W25hbWVdKys7fXdoaWxlKChjdXJyZW50PWN1cnJlbnQuJHBhcmVudCkpO3ZhciBzZWxmPXRoaXM7cmV0dXJuIGZ1bmN0aW9uKCl7bmFtZWRMaXN0ZW5lcnNbaW5kZXhPZihuYW1lZExpc3RlbmVycyxsaXN0ZW5lcildPW51bGw7ZGVjcmVtZW50TGlzdGVuZXJDb3VudChzZWxmLDEsbmFtZSk7fTt9LCRlbWl0OmZ1bmN0aW9uKG5hbWUsYXJncyl7dmFyIGVtcHR5PVtdLG5hbWVkTGlzdGVuZXJzLHNjb3BlPXRoaXMsc3RvcFByb3BhZ2F0aW9uPWZhbHNlLGV2ZW50PXtuYW1lOm5hbWUsdGFyZ2V0U2NvcGU6c2NvcGUsc3RvcFByb3BhZ2F0aW9uOmZ1bmN0aW9uKCl7c3RvcFByb3BhZ2F0aW9uPXRydWU7fSxwcmV2ZW50RGVmYXVsdDpmdW5jdGlvbigpe2V2ZW50LmRlZmF1bHRQcmV2ZW50ZWQ9dHJ1ZTt9LGRlZmF1bHRQcmV2ZW50ZWQ6ZmFsc2V9LGxpc3RlbmVyQXJncz1jb25jYXQoW2V2ZW50XSxhcmd1bWVudHMsMSksaSxsZW5ndGg7ZG97bmFtZWRMaXN0ZW5lcnM9c2NvcGUuJCRsaXN0ZW5lcnNbbmFtZV18fGVtcHR5O2V2ZW50LmN1cnJlbnRTY29wZT1zY29wZTtmb3IoaT0wLGxlbmd0aD1uYW1lZExpc3RlbmVycy5sZW5ndGg7aTxsZW5ndGg7aSsrKXtpZighbmFtZWRMaXN0ZW5lcnNbaV0pe25hbWVkTGlzdGVuZXJzLnNwbGljZShpLDEpO2ktLTtsZW5ndGgtLTtjb250aW51ZTt9CnRyeXtuYW1lZExpc3RlbmVyc1tpXS5hcHBseShudWxsLGxpc3RlbmVyQXJncyk7fWNhdGNoKGUpeyRleGNlcHRpb25IYW5kbGVyKGUpO319CmlmKHN0b3BQcm9wYWdhdGlvbilyZXR1cm4gZXZlbnQ7c2NvcGU9c2NvcGUuJHBhcmVudDt9d2hpbGUoc2NvcGUpO3JldHVybiBldmVudDt9LCRicm9hZGNhc3Q6ZnVuY3Rpb24obmFtZSxhcmdzKXt2YXIgdGFyZ2V0PXRoaXMsY3VycmVudD10YXJnZXQsbmV4dD10YXJnZXQsZXZlbnQ9e25hbWU6bmFtZSx0YXJnZXRTY29wZTp0YXJnZXQscHJldmVudERlZmF1bHQ6ZnVuY3Rpb24oKXtldmVudC5kZWZhdWx0UHJldmVudGVkPXRydWU7fSxkZWZhdWx0UHJldmVudGVkOmZhbHNlfSxsaXN0ZW5lckFyZ3M9Y29uY2F0KFtldmVudF0sYXJndW1lbnRzLDEpLGxpc3RlbmVycyxpLGxlbmd0aDt3aGlsZSgoY3VycmVudD1uZXh0KSl7ZXZlbnQuY3VycmVudFNjb3BlPWN1cnJlbnQ7bGlzdGVuZXJzPWN1cnJlbnQuJCRsaXN0ZW5lcnNbbmFtZV18fFtdO2ZvcihpPTAsbGVuZ3RoPWxpc3RlbmVycy5sZW5ndGg7aTxsZW5ndGg7aSsrKXtpZighbGlzdGVuZXJzW2ldKXtsaXN0ZW5lcnMuc3BsaWNlKGksMSk7aS0tO2xlbmd0aC0tO2NvbnRpbnVlO30KdHJ5e2xpc3RlbmVyc1tpXS5hcHBseShudWxsLGxpc3RlbmVyQXJncyk7fWNhdGNoKGUpeyRleGNlcHRpb25IYW5kbGVyKGUpO319CmlmKCEobmV4dD0oKGN1cnJlbnQuJCRsaXN0ZW5lckNvdW50W25hbWVdJiZjdXJyZW50LiQkY2hpbGRIZWFkKXx8KGN1cnJlbnQhPT10YXJnZXQmJmN1cnJlbnQuJCRuZXh0U2libGluZykpKSl7d2hpbGUoY3VycmVudCE9PXRhcmdldCYmIShuZXh0PWN1cnJlbnQuJCRuZXh0U2libGluZykpe2N1cnJlbnQ9Y3VycmVudC4kcGFyZW50O319fQpyZXR1cm4gZXZlbnQ7fX07dmFyICRyb290U2NvcGU9bmV3IFNjb3BlKCk7cmV0dXJuICRyb290U2NvcGU7ZnVuY3Rpb24gYmVnaW5QaGFzZShwaGFzZSl7aWYoJHJvb3RTY29wZS4kJHBoYXNlKXt0aHJvdyAkcm9vdFNjb3BlTWluRXJyKCdpbnByb2cnLCd7MH0gYWxyZWFkeSBpbiBwcm9ncmVzcycsJHJvb3RTY29wZS4kJHBoYXNlKTt9CiRyb290U2NvcGUuJCRwaGFzZT1waGFzZTt9CmZ1bmN0aW9uIGNsZWFyUGhhc2UoKXskcm9vdFNjb3BlLiQkcGhhc2U9bnVsbDt9CmZ1bmN0aW9uIGNvbXBpbGVUb0ZuKGV4cCxuYW1lKXt2YXIgZm49JHBhcnNlKGV4cCk7YXNzZXJ0QXJnRm4oZm4sbmFtZSk7cmV0dXJuIGZuO30KZnVuY3Rpb24gZGVjcmVtZW50TGlzdGVuZXJDb3VudChjdXJyZW50LGNvdW50LG5hbWUpe2Rve2N1cnJlbnQuJCRsaXN0ZW5lckNvdW50W25hbWVdLT1jb3VudDtpZihjdXJyZW50LiQkbGlzdGVuZXJDb3VudFtuYW1lXT09PTApe2RlbGV0ZSBjdXJyZW50LiQkbGlzdGVuZXJDb3VudFtuYW1lXTt9fXdoaWxlKChjdXJyZW50PWN1cnJlbnQuJHBhcmVudCkpO30KZnVuY3Rpb24gaW5pdFdhdGNoVmFsKCl7fX1dO30KZnVuY3Rpb24gJCRTYW5pdGl6ZVVyaVByb3ZpZGVyKCl7dmFyIGFIcmVmU2FuaXRpemF0aW9uV2hpdGVsaXN0PS9eXHMqKGh0dHBzP3xmdHB8bWFpbHRvfHRlbHxmaWxlKTovLGltZ1NyY1Nhbml0aXphdGlvbldoaXRlbGlzdD0vXlxzKihodHRwcz98ZnRwfGZpbGUpOnxkYXRhOmltYWdlXC8vO3RoaXMuYUhyZWZTYW5pdGl6YXRpb25XaGl0ZWxpc3Q9ZnVuY3Rpb24ocmVnZXhwKXtpZihpc0RlZmluZWQocmVnZXhwKSl7YUhyZWZTYW5pdGl6YXRpb25XaGl0ZWxpc3Q9cmVnZXhwO3JldHVybiB0aGlzO30KcmV0dXJuIGFIcmVmU2FuaXRpemF0aW9uV2hpdGVsaXN0O307dGhpcy5pbWdTcmNTYW5pdGl6YXRpb25XaGl0ZWxpc3Q9ZnVuY3Rpb24ocmVnZXhwKXtpZihpc0RlZmluZWQocmVnZXhwKSl7aW1nU3JjU2FuaXRpemF0aW9uV2hpdGVsaXN0PXJlZ2V4cDtyZXR1cm4gdGhpczt9CnJldHVybiBpbWdTcmNTYW5pdGl6YXRpb25XaGl0ZWxpc3Q7fTt0aGlzLiRnZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24gc2FuaXRpemVVcmkodXJpLGlzSW1hZ2Upe3ZhciByZWdleD1pc0ltYWdlP2ltZ1NyY1Nhbml0aXphdGlvbldoaXRlbGlzdDphSHJlZlNhbml0aXphdGlvbldoaXRlbGlzdDt2YXIgbm9ybWFsaXplZFZhbDtpZighbXNpZXx8bXNpZT49OCl7bm9ybWFsaXplZFZhbD11cmxSZXNvbHZlKHVyaSkuaHJlZjtpZihub3JtYWxpemVkVmFsIT09JycmJiFub3JtYWxpemVkVmFsLm1hdGNoKHJlZ2V4KSl7cmV0dXJuJ3Vuc2FmZTonK25vcm1hbGl6ZWRWYWw7fX0KcmV0dXJuIHVyaTt9O307fQp2YXIgJHNjZU1pbkVycj1taW5FcnIoJyRzY2UnKTt2YXIgU0NFX0NPTlRFWFRTPXtIVE1MOidodG1sJyxDU1M6J2NzcycsVVJMOid1cmwnLFJFU09VUkNFX1VSTDoncmVzb3VyY2VVcmwnLEpTOidqcyd9O2Z1bmN0aW9uIGVzY2FwZUZvclJlZ2V4cChzKXtyZXR1cm4gcy5yZXBsYWNlKC8oWy0oKVxbXF17fSs/Ki4kXF58LDojPCFcXF0pL2csJ1xcJDEnKS5yZXBsYWNlKC9ceDA4L2csJ1xceDA4Jyk7fQpmdW5jdGlvbiBhZGp1c3RNYXRjaGVyKG1hdGNoZXIpe2lmKG1hdGNoZXI9PT0nc2VsZicpe3JldHVybiBtYXRjaGVyO31lbHNlIGlmKGlzU3RyaW5nKG1hdGNoZXIpKXtpZihtYXRjaGVyLmluZGV4T2YoJyoqKicpPi0xKXt0aHJvdyAkc2NlTWluRXJyKCdpd2NhcmQnLCdJbGxlZ2FsIHNlcXVlbmNlICoqKiBpbiBzdHJpbmcgbWF0Y2hlci4gIFN0cmluZzogezB9JyxtYXRjaGVyKTt9Cm1hdGNoZXI9ZXNjYXBlRm9yUmVnZXhwKG1hdGNoZXIpLnJlcGxhY2UoJ1xcKlxcKicsJy4qJykucmVwbGFjZSgnXFwqJywnW146Ly4/JjtdKicpO3JldHVybiBuZXcgUmVnRXhwKCdeJyttYXRjaGVyKyckJyk7fWVsc2UgaWYoaXNSZWdFeHAobWF0Y2hlcikpe3JldHVybiBuZXcgUmVnRXhwKCdeJyttYXRjaGVyLnNvdXJjZSsnJCcpO31lbHNle3Rocm93ICRzY2VNaW5FcnIoJ2ltYXRjaGVyJywnTWF0Y2hlcnMgbWF5IG9ubHkgYmUgInNlbGYiLCBzdHJpbmcgcGF0dGVybnMgb3IgUmVnRXhwIG9iamVjdHMnKTt9fQpmdW5jdGlvbiBhZGp1c3RNYXRjaGVycyhtYXRjaGVycyl7dmFyIGFkanVzdGVkTWF0Y2hlcnM9W107aWYoaXNEZWZpbmVkKG1hdGNoZXJzKSl7Zm9yRWFjaChtYXRjaGVycyxmdW5jdGlvbihtYXRjaGVyKXthZGp1c3RlZE1hdGNoZXJzLnB1c2goYWRqdXN0TWF0Y2hlcihtYXRjaGVyKSk7fSk7fQpyZXR1cm4gYWRqdXN0ZWRNYXRjaGVyczt9CmZ1bmN0aW9uICRTY2VEZWxlZ2F0ZVByb3ZpZGVyKCl7dGhpcy5TQ0VfQ09OVEVYVFM9U0NFX0NPTlRFWFRTO3ZhciByZXNvdXJjZVVybFdoaXRlbGlzdD1bJ3NlbGYnXSxyZXNvdXJjZVVybEJsYWNrbGlzdD1bXTt0aGlzLnJlc291cmNlVXJsV2hpdGVsaXN0PWZ1bmN0aW9uKHZhbHVlKXtpZihhcmd1bWVudHMubGVuZ3RoKXtyZXNvdXJjZVVybFdoaXRlbGlzdD1hZGp1c3RNYXRjaGVycyh2YWx1ZSk7fQpyZXR1cm4gcmVzb3VyY2VVcmxXaGl0ZWxpc3Q7fTt0aGlzLnJlc291cmNlVXJsQmxhY2tsaXN0PWZ1bmN0aW9uKHZhbHVlKXtpZihhcmd1bWVudHMubGVuZ3RoKXtyZXNvdXJjZVVybEJsYWNrbGlzdD1hZGp1c3RNYXRjaGVycyh2YWx1ZSk7fQpyZXR1cm4gcmVzb3VyY2VVcmxCbGFja2xpc3Q7fTt0aGlzLiRnZXQ9WyckaW5qZWN0b3InLGZ1bmN0aW9uKCRpbmplY3Rvcil7dmFyIGh0bWxTYW5pdGl6ZXI9ZnVuY3Rpb24gaHRtbFNhbml0aXplcihodG1sKXt0aHJvdyAkc2NlTWluRXJyKCd1bnNhZmUnLCdBdHRlbXB0aW5nIHRvIHVzZSBhbiB1bnNhZmUgdmFsdWUgaW4gYSBzYWZlIGNvbnRleHQuJyk7fTtpZigkaW5qZWN0b3IuaGFzKCckc2FuaXRpemUnKSl7aHRtbFNhbml0aXplcj0kaW5qZWN0b3IuZ2V0KCckc2FuaXRpemUnKTt9CmZ1bmN0aW9uIG1hdGNoVXJsKG1hdGNoZXIscGFyc2VkVXJsKXtpZihtYXRjaGVyPT09J3NlbGYnKXtyZXR1cm4gdXJsSXNTYW1lT3JpZ2luKHBhcnNlZFVybCk7fWVsc2V7cmV0dXJuISFtYXRjaGVyLmV4ZWMocGFyc2VkVXJsLmhyZWYpO319CmZ1bmN0aW9uIGlzUmVzb3VyY2VVcmxBbGxvd2VkQnlQb2xpY3kodXJsKXt2YXIgcGFyc2VkVXJsPXVybFJlc29sdmUodXJsLnRvU3RyaW5nKCkpO3ZhciBpLG4sYWxsb3dlZD1mYWxzZTtmb3IoaT0wLG49cmVzb3VyY2VVcmxXaGl0ZWxpc3QubGVuZ3RoO2k8bjtpKyspe2lmKG1hdGNoVXJsKHJlc291cmNlVXJsV2hpdGVsaXN0W2ldLHBhcnNlZFVybCkpe2FsbG93ZWQ9dHJ1ZTticmVhazt9fQppZihhbGxvd2VkKXtmb3IoaT0wLG49cmVzb3VyY2VVcmxCbGFja2xpc3QubGVuZ3RoO2k8bjtpKyspe2lmKG1hdGNoVXJsKHJlc291cmNlVXJsQmxhY2tsaXN0W2ldLHBhcnNlZFVybCkpe2FsbG93ZWQ9ZmFsc2U7YnJlYWs7fX19CnJldHVybiBhbGxvd2VkO30KZnVuY3Rpb24gZ2VuZXJhdGVIb2xkZXJUeXBlKEJhc2Upe3ZhciBob2xkZXJUeXBlPWZ1bmN0aW9uIFRydXN0ZWRWYWx1ZUhvbGRlclR5cGUodHJ1c3RlZFZhbHVlKXt0aGlzLiQkdW53cmFwVHJ1c3RlZFZhbHVlPWZ1bmN0aW9uKCl7cmV0dXJuIHRydXN0ZWRWYWx1ZTt9O307aWYoQmFzZSl7aG9sZGVyVHlwZS5wcm90b3R5cGU9bmV3IEJhc2UoKTt9CmhvbGRlclR5cGUucHJvdG90eXBlLnZhbHVlT2Y9ZnVuY3Rpb24gc2NlVmFsdWVPZigpe3JldHVybiB0aGlzLiQkdW53cmFwVHJ1c3RlZFZhbHVlKCk7fTtob2xkZXJUeXBlLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbiBzY2VUb1N0cmluZygpe3JldHVybiB0aGlzLiQkdW53cmFwVHJ1c3RlZFZhbHVlKCkudG9TdHJpbmcoKTt9O3JldHVybiBob2xkZXJUeXBlO30KdmFyIHRydXN0ZWRWYWx1ZUhvbGRlckJhc2U9Z2VuZXJhdGVIb2xkZXJUeXBlKCksYnlUeXBlPXt9O2J5VHlwZVtTQ0VfQ09OVEVYVFMuSFRNTF09Z2VuZXJhdGVIb2xkZXJUeXBlKHRydXN0ZWRWYWx1ZUhvbGRlckJhc2UpO2J5VHlwZVtTQ0VfQ09OVEVYVFMuQ1NTXT1nZW5lcmF0ZUhvbGRlclR5cGUodHJ1c3RlZFZhbHVlSG9sZGVyQmFzZSk7YnlUeXBlW1NDRV9DT05URVhUUy5VUkxdPWdlbmVyYXRlSG9sZGVyVHlwZSh0cnVzdGVkVmFsdWVIb2xkZXJCYXNlKTtieVR5cGVbU0NFX0NPTlRFWFRTLkpTXT1nZW5lcmF0ZUhvbGRlclR5cGUodHJ1c3RlZFZhbHVlSG9sZGVyQmFzZSk7YnlUeXBlW1NDRV9DT05URVhUUy5SRVNPVVJDRV9VUkxdPWdlbmVyYXRlSG9sZGVyVHlwZShieVR5cGVbU0NFX0NPTlRFWFRTLlVSTF0pO2Z1bmN0aW9uIHRydXN0QXModHlwZSx0cnVzdGVkVmFsdWUpe3ZhciBDb25zdHJ1Y3Rvcj0oYnlUeXBlLmhhc093blByb3BlcnR5KHR5cGUpP2J5VHlwZVt0eXBlXTpudWxsKTtpZighQ29uc3RydWN0b3Ipe3Rocm93ICRzY2VNaW5FcnIoJ2ljb250ZXh0JywnQXR0ZW1wdGVkIHRvIHRydXN0IGEgdmFsdWUgaW4gaW52YWxpZCBjb250ZXh0LiBDb250ZXh0OiB7MH07IFZhbHVlOiB7MX0nLHR5cGUsdHJ1c3RlZFZhbHVlKTt9CmlmKHRydXN0ZWRWYWx1ZT09PW51bGx8fHRydXN0ZWRWYWx1ZT09PXVuZGVmaW5lZHx8dHJ1c3RlZFZhbHVlPT09Jycpe3JldHVybiB0cnVzdGVkVmFsdWU7fQppZih0eXBlb2YgdHJ1c3RlZFZhbHVlIT09J3N0cmluZycpe3Rocm93ICRzY2VNaW5FcnIoJ2l0eXBlJywnQXR0ZW1wdGVkIHRvIHRydXN0IGEgbm9uLXN0cmluZyB2YWx1ZSBpbiBhIGNvbnRlbnQgcmVxdWlyaW5nIGEgc3RyaW5nOiBDb250ZXh0OiB7MH0nLHR5cGUpO30KcmV0dXJuIG5ldyBDb25zdHJ1Y3Rvcih0cnVzdGVkVmFsdWUpO30KZnVuY3Rpb24gdmFsdWVPZihtYXliZVRydXN0ZWQpe2lmKG1heWJlVHJ1c3RlZCBpbnN0YW5jZW9mIHRydXN0ZWRWYWx1ZUhvbGRlckJhc2Upe3JldHVybiBtYXliZVRydXN0ZWQuJCR1bndyYXBUcnVzdGVkVmFsdWUoKTt9ZWxzZXtyZXR1cm4gbWF5YmVUcnVzdGVkO319CmZ1bmN0aW9uIGdldFRydXN0ZWQodHlwZSxtYXliZVRydXN0ZWQpe2lmKG1heWJlVHJ1c3RlZD09PW51bGx8fG1heWJlVHJ1c3RlZD09PXVuZGVmaW5lZHx8bWF5YmVUcnVzdGVkPT09Jycpe3JldHVybiBtYXliZVRydXN0ZWQ7fQp2YXIgY29uc3RydWN0b3I9KGJ5VHlwZS5oYXNPd25Qcm9wZXJ0eSh0eXBlKT9ieVR5cGVbdHlwZV06bnVsbCk7aWYoY29uc3RydWN0b3ImJm1heWJlVHJ1c3RlZCBpbnN0YW5jZW9mIGNvbnN0cnVjdG9yKXtyZXR1cm4gbWF5YmVUcnVzdGVkLiQkdW53cmFwVHJ1c3RlZFZhbHVlKCk7fQppZih0eXBlPT09U0NFX0NPTlRFWFRTLlJFU09VUkNFX1VSTCl7aWYoaXNSZXNvdXJjZVVybEFsbG93ZWRCeVBvbGljeShtYXliZVRydXN0ZWQpKXtyZXR1cm4gbWF5YmVUcnVzdGVkO31lbHNle3Rocm93ICRzY2VNaW5FcnIoJ2luc2VjdXJsJywnQmxvY2tlZCBsb2FkaW5nIHJlc291cmNlIGZyb20gdXJsIG5vdCBhbGxvd2VkIGJ5ICRzY2VEZWxlZ2F0ZSBwb2xpY3kuICBVUkw6IHswfScsbWF5YmVUcnVzdGVkLnRvU3RyaW5nKCkpO319ZWxzZSBpZih0eXBlPT09U0NFX0NPTlRFWFRTLkhUTUwpe3JldHVybiBodG1sU2FuaXRpemVyKG1heWJlVHJ1c3RlZCk7fQp0aHJvdyAkc2NlTWluRXJyKCd1bnNhZmUnLCdBdHRlbXB0aW5nIHRvIHVzZSBhbiB1bnNhZmUgdmFsdWUgaW4gYSBzYWZlIGNvbnRleHQuJyk7fQpyZXR1cm57dHJ1c3RBczp0cnVzdEFzLGdldFRydXN0ZWQ6Z2V0VHJ1c3RlZCx2YWx1ZU9mOnZhbHVlT2Z9O31dO30KZnVuY3Rpb24gJFNjZVByb3ZpZGVyKCl7dmFyIGVuYWJsZWQ9dHJ1ZTt0aGlzLmVuYWJsZWQ9ZnVuY3Rpb24odmFsdWUpe2lmKGFyZ3VtZW50cy5sZW5ndGgpe2VuYWJsZWQ9ISF2YWx1ZTt9CnJldHVybiBlbmFibGVkO307dGhpcy4kZ2V0PVsnJHBhcnNlJywnJHNuaWZmZXInLCckc2NlRGVsZWdhdGUnLGZ1bmN0aW9uKCRwYXJzZSwkc25pZmZlciwkc2NlRGVsZWdhdGUpe2lmKGVuYWJsZWQmJiRzbmlmZmVyLm1zaWUmJiRzbmlmZmVyLm1zaWVEb2N1bWVudE1vZGU8OCl7dGhyb3cgJHNjZU1pbkVycignaWVxdWlya3MnLCdTdHJpY3QgQ29udGV4dHVhbCBFc2NhcGluZyBkb2VzIG5vdCBzdXBwb3J0IEludGVybmV0IEV4cGxvcmVyIHZlcnNpb24gPCA5IGluIHF1aXJrcyAnKydtb2RlLiAgWW91IGNhbiBmaXggdGhpcyBieSBhZGRpbmcgdGhlIHRleHQgPCFkb2N0eXBlIGh0bWw+IHRvIHRoZSB0b3Agb2YgeW91ciBIVE1MICcrJ2RvY3VtZW50LiAgU2VlIGh0dHA6Ly9kb2NzLmFuZ3VsYXJqcy5vcmcvYXBpL25nLiRzY2UgZm9yIG1vcmUgaW5mb3JtYXRpb24uJyk7fQp2YXIgc2NlPXNoYWxsb3dDb3B5KFNDRV9DT05URVhUUyk7c2NlLmlzRW5hYmxlZD1mdW5jdGlvbigpe3JldHVybiBlbmFibGVkO307c2NlLnRydXN0QXM9JHNjZURlbGVnYXRlLnRydXN0QXM7c2NlLmdldFRydXN0ZWQ9JHNjZURlbGVnYXRlLmdldFRydXN0ZWQ7c2NlLnZhbHVlT2Y9JHNjZURlbGVnYXRlLnZhbHVlT2Y7aWYoIWVuYWJsZWQpe3NjZS50cnVzdEFzPXNjZS5nZXRUcnVzdGVkPWZ1bmN0aW9uKHR5cGUsdmFsdWUpe3JldHVybiB2YWx1ZTt9O3NjZS52YWx1ZU9mPWlkZW50aXR5O30Kc2NlLnBhcnNlQXM9ZnVuY3Rpb24gc2NlUGFyc2VBcyh0eXBlLGV4cHIpe3ZhciBwYXJzZWQ9JHBhcnNlKGV4cHIpO2lmKHBhcnNlZC5saXRlcmFsJiZwYXJzZWQuY29uc3RhbnQpe3JldHVybiBwYXJzZWQ7fWVsc2V7cmV0dXJuIGZ1bmN0aW9uIHNjZVBhcnNlQXNUcnVzdGVkKHNlbGYsbG9jYWxzKXtyZXR1cm4gc2NlLmdldFRydXN0ZWQodHlwZSxwYXJzZWQoc2VsZixsb2NhbHMpKTt9O319O3ZhciBwYXJzZT1zY2UucGFyc2VBcyxnZXRUcnVzdGVkPXNjZS5nZXRUcnVzdGVkLHRydXN0QXM9c2NlLnRydXN0QXM7Zm9yRWFjaChTQ0VfQ09OVEVYVFMsZnVuY3Rpb24oZW51bVZhbHVlLG5hbWUpe3ZhciBsTmFtZT1sb3dlcmNhc2UobmFtZSk7c2NlW2NhbWVsQ2FzZSgicGFyc2VfYXNfIitsTmFtZSldPWZ1bmN0aW9uKGV4cHIpe3JldHVybiBwYXJzZShlbnVtVmFsdWUsZXhwcik7fTtzY2VbY2FtZWxDYXNlKCJnZXRfdHJ1c3RlZF8iK2xOYW1lKV09ZnVuY3Rpb24odmFsdWUpe3JldHVybiBnZXRUcnVzdGVkKGVudW1WYWx1ZSx2YWx1ZSk7fTtzY2VbY2FtZWxDYXNlKCJ0cnVzdF9hc18iK2xOYW1lKV09ZnVuY3Rpb24odmFsdWUpe3JldHVybiB0cnVzdEFzKGVudW1WYWx1ZSx2YWx1ZSk7fTt9KTtyZXR1cm4gc2NlO31dO30KZnVuY3Rpb24gJFNuaWZmZXJQcm92aWRlcigpe3RoaXMuJGdldD1bJyR3aW5kb3cnLCckZG9jdW1lbnQnLGZ1bmN0aW9uKCR3aW5kb3csJGRvY3VtZW50KXt2YXIgZXZlbnRTdXBwb3J0PXt9LGFuZHJvaWQ9aW50KCgvYW5kcm9pZCAoXGQrKS8uZXhlYyhsb3dlcmNhc2UoKCR3aW5kb3cubmF2aWdhdG9yfHx7fSkudXNlckFnZW50KSl8fFtdKVsxXSksYm94ZWU9L0JveGVlL2kudGVzdCgoJHdpbmRvdy5uYXZpZ2F0b3J8fHt9KS51c2VyQWdlbnQpLGRvY3VtZW50PSRkb2N1bWVudFswXXx8e30sZG9jdW1lbnRNb2RlPWRvY3VtZW50LmRvY3VtZW50TW9kZSx2ZW5kb3JQcmVmaXgsdmVuZG9yUmVnZXg9L14oTW96fHdlYmtpdHxPfG1zKSg/PVtBLVpdKS8sYm9keVN0eWxlPWRvY3VtZW50LmJvZHkmJmRvY3VtZW50LmJvZHkuc3R5bGUsdHJhbnNpdGlvbnM9ZmFsc2UsYW5pbWF0aW9ucz1mYWxzZSxtYXRjaDtpZihib2R5U3R5bGUpe2Zvcih2YXIgcHJvcCBpbiBib2R5U3R5bGUpe2lmKG1hdGNoPXZlbmRvclJlZ2V4LmV4ZWMocHJvcCkpe3ZlbmRvclByZWZpeD1tYXRjaFswXTt2ZW5kb3JQcmVmaXg9dmVuZG9yUHJlZml4LnN1YnN0cigwLDEpLnRvVXBwZXJDYXNlKCkrdmVuZG9yUHJlZml4LnN1YnN0cigxKTticmVhazt9fQppZighdmVuZG9yUHJlZml4KXt2ZW5kb3JQcmVmaXg9KCdXZWJraXRPcGFjaXR5J2luIGJvZHlTdHlsZSkmJid3ZWJraXQnO30KdHJhbnNpdGlvbnM9ISEoKCd0cmFuc2l0aW9uJ2luIGJvZHlTdHlsZSl8fCh2ZW5kb3JQcmVmaXgrJ1RyYW5zaXRpb24naW4gYm9keVN0eWxlKSk7YW5pbWF0aW9ucz0hISgoJ2FuaW1hdGlvbidpbiBib2R5U3R5bGUpfHwodmVuZG9yUHJlZml4KydBbmltYXRpb24naW4gYm9keVN0eWxlKSk7aWYoYW5kcm9pZCYmKCF0cmFuc2l0aW9uc3x8IWFuaW1hdGlvbnMpKXt0cmFuc2l0aW9ucz1pc1N0cmluZyhkb2N1bWVudC5ib2R5LnN0eWxlLndlYmtpdFRyYW5zaXRpb24pO2FuaW1hdGlvbnM9aXNTdHJpbmcoZG9jdW1lbnQuYm9keS5zdHlsZS53ZWJraXRBbmltYXRpb24pO319CnJldHVybntoaXN0b3J5OiEhKCR3aW5kb3cuaGlzdG9yeSYmJHdpbmRvdy5oaXN0b3J5LnB1c2hTdGF0ZSYmIShhbmRyb2lkPDQpJiYhYm94ZWUpLGhhc2hjaGFuZ2U6J29uaGFzaGNoYW5nZSdpbiAkd2luZG93JiYoIWRvY3VtZW50TW9kZXx8ZG9jdW1lbnRNb2RlPjcpLGhhc0V2ZW50OmZ1bmN0aW9uKGV2ZW50KXtpZihldmVudD09J2lucHV0JyYmbXNpZT09OSlyZXR1cm4gZmFsc2U7aWYoaXNVbmRlZmluZWQoZXZlbnRTdXBwb3J0W2V2ZW50XSkpe3ZhciBkaXZFbG09ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7ZXZlbnRTdXBwb3J0W2V2ZW50XT0nb24nK2V2ZW50IGluIGRpdkVsbTt9CnJldHVybiBldmVudFN1cHBvcnRbZXZlbnRdO30sY3NwOmNzcCgpLHZlbmRvclByZWZpeDp2ZW5kb3JQcmVmaXgsdHJhbnNpdGlvbnM6dHJhbnNpdGlvbnMsYW5pbWF0aW9uczphbmltYXRpb25zLGFuZHJvaWQ6YW5kcm9pZCxtc2llOm1zaWUsbXNpZURvY3VtZW50TW9kZTpkb2N1bWVudE1vZGV9O31dO30KZnVuY3Rpb24gJFRpbWVvdXRQcm92aWRlcigpe3RoaXMuJGdldD1bJyRyb290U2NvcGUnLCckYnJvd3NlcicsJyRxJywnJGV4Y2VwdGlvbkhhbmRsZXInLGZ1bmN0aW9uKCRyb290U2NvcGUsJGJyb3dzZXIsJHEsJGV4Y2VwdGlvbkhhbmRsZXIpe3ZhciBkZWZlcnJlZHM9e307ZnVuY3Rpb24gdGltZW91dChmbixkZWxheSxpbnZva2VBcHBseSl7dmFyIGRlZmVycmVkPSRxLmRlZmVyKCkscHJvbWlzZT1kZWZlcnJlZC5wcm9taXNlLHNraXBBcHBseT0oaXNEZWZpbmVkKGludm9rZUFwcGx5KSYmIWludm9rZUFwcGx5KSx0aW1lb3V0SWQ7dGltZW91dElkPSRicm93c2VyLmRlZmVyKGZ1bmN0aW9uKCl7dHJ5e2RlZmVycmVkLnJlc29sdmUoZm4oKSk7fWNhdGNoKGUpe2RlZmVycmVkLnJlamVjdChlKTskZXhjZXB0aW9uSGFuZGxlcihlKTt9CmZpbmFsbHl7ZGVsZXRlIGRlZmVycmVkc1twcm9taXNlLiQkdGltZW91dElkXTt9CmlmKCFza2lwQXBwbHkpJHJvb3RTY29wZS4kYXBwbHkoKTt9LGRlbGF5KTtwcm9taXNlLiQkdGltZW91dElkPXRpbWVvdXRJZDtkZWZlcnJlZHNbdGltZW91dElkXT1kZWZlcnJlZDtyZXR1cm4gcHJvbWlzZTt9CnRpbWVvdXQuY2FuY2VsPWZ1bmN0aW9uKHByb21pc2Upe2lmKHByb21pc2UmJnByb21pc2UuJCR0aW1lb3V0SWQgaW4gZGVmZXJyZWRzKXtkZWZlcnJlZHNbcHJvbWlzZS4kJHRpbWVvdXRJZF0ucmVqZWN0KCdjYW5jZWxlZCcpO2RlbGV0ZSBkZWZlcnJlZHNbcHJvbWlzZS4kJHRpbWVvdXRJZF07cmV0dXJuICRicm93c2VyLmRlZmVyLmNhbmNlbChwcm9taXNlLiQkdGltZW91dElkKTt9CnJldHVybiBmYWxzZTt9O3JldHVybiB0aW1lb3V0O31dO30KdmFyIHVybFBhcnNpbmdOb2RlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImEiKTt2YXIgb3JpZ2luVXJsPXVybFJlc29sdmUod2luZG93LmxvY2F0aW9uLmhyZWYsdHJ1ZSk7ZnVuY3Rpb24gdXJsUmVzb2x2ZSh1cmwsYmFzZSl7dmFyIGhyZWY9dXJsO2lmKG1zaWUpe3VybFBhcnNpbmdOb2RlLnNldEF0dHJpYnV0ZSgiaHJlZiIsaHJlZik7aHJlZj11cmxQYXJzaW5nTm9kZS5ocmVmO30KdXJsUGFyc2luZ05vZGUuc2V0QXR0cmlidXRlKCdocmVmJyxocmVmKTtyZXR1cm57aHJlZjp1cmxQYXJzaW5nTm9kZS5ocmVmLHByb3RvY29sOnVybFBhcnNpbmdOb2RlLnByb3RvY29sP3VybFBhcnNpbmdOb2RlLnByb3RvY29sLnJlcGxhY2UoLzokLywnJyk6JycsaG9zdDp1cmxQYXJzaW5nTm9kZS5ob3N0LHNlYXJjaDp1cmxQYXJzaW5nTm9kZS5zZWFyY2g/dXJsUGFyc2luZ05vZGUuc2VhcmNoLnJlcGxhY2UoL15cPy8sJycpOicnLGhhc2g6dXJsUGFyc2luZ05vZGUuaGFzaD91cmxQYXJzaW5nTm9kZS5oYXNoLnJlcGxhY2UoL14jLywnJyk6JycsaG9zdG5hbWU6dXJsUGFyc2luZ05vZGUuaG9zdG5hbWUscG9ydDp1cmxQYXJzaW5nTm9kZS5wb3J0LHBhdGhuYW1lOih1cmxQYXJzaW5nTm9kZS5wYXRobmFtZS5jaGFyQXQoMCk9PT0nLycpP3VybFBhcnNpbmdOb2RlLnBhdGhuYW1lOicvJyt1cmxQYXJzaW5nTm9kZS5wYXRobmFtZX07fQpmdW5jdGlvbiB1cmxJc1NhbWVPcmlnaW4ocmVxdWVzdFVybCl7dmFyIHBhcnNlZD0oaXNTdHJpbmcocmVxdWVzdFVybCkpP3VybFJlc29sdmUocmVxdWVzdFVybCk6cmVxdWVzdFVybDtyZXR1cm4ocGFyc2VkLnByb3RvY29sPT09b3JpZ2luVXJsLnByb3RvY29sJiZwYXJzZWQuaG9zdD09PW9yaWdpblVybC5ob3N0KTt9CmZ1bmN0aW9uICRXaW5kb3dQcm92aWRlcigpe3RoaXMuJGdldD12YWx1ZUZuKHdpbmRvdyk7fQokRmlsdGVyUHJvdmlkZXIuJGluamVjdD1bJyRwcm92aWRlJ107ZnVuY3Rpb24gJEZpbHRlclByb3ZpZGVyKCRwcm92aWRlKXt2YXIgc3VmZml4PSdGaWx0ZXInO2Z1bmN0aW9uIHJlZ2lzdGVyKG5hbWUsZmFjdG9yeSl7aWYoaXNPYmplY3QobmFtZSkpe3ZhciBmaWx0ZXJzPXt9O2ZvckVhY2gobmFtZSxmdW5jdGlvbihmaWx0ZXIsa2V5KXtmaWx0ZXJzW2tleV09cmVnaXN0ZXIoa2V5LGZpbHRlcik7fSk7cmV0dXJuIGZpbHRlcnM7fWVsc2V7cmV0dXJuICRwcm92aWRlLmZhY3RvcnkobmFtZStzdWZmaXgsZmFjdG9yeSk7fX0KdGhpcy5yZWdpc3Rlcj1yZWdpc3Rlcjt0aGlzLiRnZXQ9WyckaW5qZWN0b3InLGZ1bmN0aW9uKCRpbmplY3Rvcil7cmV0dXJuIGZ1bmN0aW9uKG5hbWUpe3JldHVybiAkaW5qZWN0b3IuZ2V0KG5hbWUrc3VmZml4KTt9O31dO3JlZ2lzdGVyKCdjdXJyZW5jeScsY3VycmVuY3lGaWx0ZXIpO3JlZ2lzdGVyKCdkYXRlJyxkYXRlRmlsdGVyKTtyZWdpc3RlcignZmlsdGVyJyxmaWx0ZXJGaWx0ZXIpO3JlZ2lzdGVyKCdqc29uJyxqc29uRmlsdGVyKTtyZWdpc3RlcignbGltaXRUbycsbGltaXRUb0ZpbHRlcik7cmVnaXN0ZXIoJ2xvd2VyY2FzZScsbG93ZXJjYXNlRmlsdGVyKTtyZWdpc3RlcignbnVtYmVyJyxudW1iZXJGaWx0ZXIpO3JlZ2lzdGVyKCdvcmRlckJ5JyxvcmRlckJ5RmlsdGVyKTtyZWdpc3RlcigndXBwZXJjYXNlJyx1cHBlcmNhc2VGaWx0ZXIpO30KZnVuY3Rpb24gZmlsdGVyRmlsdGVyKCl7cmV0dXJuIGZ1bmN0aW9uKGFycmF5LGV4cHJlc3Npb24sY29tcGFyYXRvcil7aWYoIWlzQXJyYXkoYXJyYXkpKXJldHVybiBhcnJheTt2YXIgY29tcGFyYXRvclR5cGU9dHlwZW9mKGNvbXBhcmF0b3IpLHByZWRpY2F0ZXM9W107cHJlZGljYXRlcy5jaGVjaz1mdW5jdGlvbih2YWx1ZSl7Zm9yKHZhciBqPTA7ajxwcmVkaWNhdGVzLmxlbmd0aDtqKyspe2lmKCFwcmVkaWNhdGVzW2pdKHZhbHVlKSl7cmV0dXJuIGZhbHNlO319CnJldHVybiB0cnVlO307aWYoY29tcGFyYXRvclR5cGUhPT0nZnVuY3Rpb24nKXtpZihjb21wYXJhdG9yVHlwZT09PSdib29sZWFuJyYmY29tcGFyYXRvcil7Y29tcGFyYXRvcj1mdW5jdGlvbihvYmosdGV4dCl7cmV0dXJuIGFuZ3VsYXIuZXF1YWxzKG9iaix0ZXh0KTt9O31lbHNle2NvbXBhcmF0b3I9ZnVuY3Rpb24ob2JqLHRleHQpe2lmKG9iaiYmdGV4dCYmdHlwZW9mIG9iaj09PSdvYmplY3QnJiZ0eXBlb2YgdGV4dD09PSdvYmplY3QnKXtmb3IodmFyIG9iaktleSBpbiBvYmope2lmKG9iaktleS5jaGFyQXQoMCkhPT0nJCcmJmhhc093blByb3BlcnR5LmNhbGwob2JqLG9iaktleSkmJmNvbXBhcmF0b3Iob2JqW29iaktleV0sdGV4dFtvYmpLZXldKSl7cmV0dXJuIHRydWU7fX0KcmV0dXJuIGZhbHNlO30KdGV4dD0oJycrdGV4dCkudG9Mb3dlckNhc2UoKTtyZXR1cm4oJycrb2JqKS50b0xvd2VyQ2FzZSgpLmluZGV4T2YodGV4dCk+LTE7fTt9fQp2YXIgc2VhcmNoPWZ1bmN0aW9uKG9iaix0ZXh0KXtpZih0eXBlb2YgdGV4dD09J3N0cmluZycmJnRleHQuY2hhckF0KDApPT09JyEnKXtyZXR1cm4hc2VhcmNoKG9iaix0ZXh0LnN1YnN0cigxKSk7fQpzd2l0Y2godHlwZW9mIG9iail7Y2FzZSJib29sZWFuIjpjYXNlIm51bWJlciI6Y2FzZSJzdHJpbmciOnJldHVybiBjb21wYXJhdG9yKG9iaix0ZXh0KTtjYXNlIm9iamVjdCI6c3dpdGNoKHR5cGVvZiB0ZXh0KXtjYXNlIm9iamVjdCI6cmV0dXJuIGNvbXBhcmF0b3Iob2JqLHRleHQpO2RlZmF1bHQ6Zm9yKHZhciBvYmpLZXkgaW4gb2JqKXtpZihvYmpLZXkuY2hhckF0KDApIT09JyQnJiZzZWFyY2gob2JqW29iaktleV0sdGV4dCkpe3JldHVybiB0cnVlO319CmJyZWFrO30KcmV0dXJuIGZhbHNlO2Nhc2UiYXJyYXkiOmZvcih2YXIgaT0wO2k8b2JqLmxlbmd0aDtpKyspe2lmKHNlYXJjaChvYmpbaV0sdGV4dCkpe3JldHVybiB0cnVlO319CnJldHVybiBmYWxzZTtkZWZhdWx0OnJldHVybiBmYWxzZTt9fTtzd2l0Y2godHlwZW9mIGV4cHJlc3Npb24pe2Nhc2UiYm9vbGVhbiI6Y2FzZSJudW1iZXIiOmNhc2Uic3RyaW5nIjpleHByZXNzaW9uPXskOmV4cHJlc3Npb259O2Nhc2Uib2JqZWN0Ijpmb3IodmFyIGtleSBpbiBleHByZXNzaW9uKXsoZnVuY3Rpb24ocGF0aCl7aWYodHlwZW9mIGV4cHJlc3Npb25bcGF0aF09PT0ndW5kZWZpbmVkJylyZXR1cm47cHJlZGljYXRlcy5wdXNoKGZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4gc2VhcmNoKHBhdGg9PSckJz92YWx1ZToodmFsdWUmJnZhbHVlW3BhdGhdKSxleHByZXNzaW9uW3BhdGhdKTt9KTt9KShrZXkpO30KYnJlYWs7Y2FzZSdmdW5jdGlvbic6cHJlZGljYXRlcy5wdXNoKGV4cHJlc3Npb24pO2JyZWFrO2RlZmF1bHQ6cmV0dXJuIGFycmF5O30KdmFyIGZpbHRlcmVkPVtdO2Zvcih2YXIgaj0wO2o8YXJyYXkubGVuZ3RoO2orKyl7dmFyIHZhbHVlPWFycmF5W2pdO2lmKHByZWRpY2F0ZXMuY2hlY2sodmFsdWUpKXtmaWx0ZXJlZC5wdXNoKHZhbHVlKTt9fQpyZXR1cm4gZmlsdGVyZWQ7fTt9CmN1cnJlbmN5RmlsdGVyLiRpbmplY3Q9WyckbG9jYWxlJ107ZnVuY3Rpb24gY3VycmVuY3lGaWx0ZXIoJGxvY2FsZSl7dmFyIGZvcm1hdHM9JGxvY2FsZS5OVU1CRVJfRk9STUFUUztyZXR1cm4gZnVuY3Rpb24oYW1vdW50LGN1cnJlbmN5U3ltYm9sKXtpZihpc1VuZGVmaW5lZChjdXJyZW5jeVN5bWJvbCkpY3VycmVuY3lTeW1ib2w9Zm9ybWF0cy5DVVJSRU5DWV9TWU07cmV0dXJuIGZvcm1hdE51bWJlcihhbW91bnQsZm9ybWF0cy5QQVRURVJOU1sxXSxmb3JtYXRzLkdST1VQX1NFUCxmb3JtYXRzLkRFQ0lNQUxfU0VQLDIpLnJlcGxhY2UoL1x1MDBBNC9nLGN1cnJlbmN5U3ltYm9sKTt9O30KbnVtYmVyRmlsdGVyLiRpbmplY3Q9WyckbG9jYWxlJ107ZnVuY3Rpb24gbnVtYmVyRmlsdGVyKCRsb2NhbGUpe3ZhciBmb3JtYXRzPSRsb2NhbGUuTlVNQkVSX0ZPUk1BVFM7cmV0dXJuIGZ1bmN0aW9uKG51bWJlcixmcmFjdGlvblNpemUpe3JldHVybiBmb3JtYXROdW1iZXIobnVtYmVyLGZvcm1hdHMuUEFUVEVSTlNbMF0sZm9ybWF0cy5HUk9VUF9TRVAsZm9ybWF0cy5ERUNJTUFMX1NFUCxmcmFjdGlvblNpemUpO307fQp2YXIgREVDSU1BTF9TRVA9Jy4nO2Z1bmN0aW9uIGZvcm1hdE51bWJlcihudW1iZXIscGF0dGVybixncm91cFNlcCxkZWNpbWFsU2VwLGZyYWN0aW9uU2l6ZSl7aWYobnVtYmVyPT1udWxsfHwhaXNGaW5pdGUobnVtYmVyKXx8aXNPYmplY3QobnVtYmVyKSlyZXR1cm4nJzt2YXIgaXNOZWdhdGl2ZT1udW1iZXI8MDtudW1iZXI9TWF0aC5hYnMobnVtYmVyKTt2YXIgbnVtU3RyPW51bWJlcisnJyxmb3JtYXRlZFRleHQ9JycscGFydHM9W107dmFyIGhhc0V4cG9uZW50PWZhbHNlO2lmKG51bVN0ci5pbmRleE9mKCdlJykhPT0tMSl7dmFyIG1hdGNoPW51bVN0ci5tYXRjaCgvKFtcZFwuXSspZSgtPykoXGQrKS8pO2lmKG1hdGNoJiZtYXRjaFsyXT09Jy0nJiZtYXRjaFszXT5mcmFjdGlvblNpemUrMSl7bnVtU3RyPScwJztudW1iZXI9MDt9ZWxzZXtmb3JtYXRlZFRleHQ9bnVtU3RyO2hhc0V4cG9uZW50PXRydWU7fX0KaWYoIWhhc0V4cG9uZW50KXt2YXIgZnJhY3Rpb25MZW49KG51bVN0ci5zcGxpdChERUNJTUFMX1NFUClbMV18fCcnKS5sZW5ndGg7aWYoaXNVbmRlZmluZWQoZnJhY3Rpb25TaXplKSl7ZnJhY3Rpb25TaXplPU1hdGgubWluKE1hdGgubWF4KHBhdHRlcm4ubWluRnJhYyxmcmFjdGlvbkxlbikscGF0dGVybi5tYXhGcmFjKTt9Cm51bWJlcj0rKE1hdGgucm91bmQoKyhudW1iZXIudG9TdHJpbmcoKSsnZScrZnJhY3Rpb25TaXplKSkudG9TdHJpbmcoKSsnZScrLWZyYWN0aW9uU2l6ZSk7dmFyIGZyYWN0aW9uPSgnJytudW1iZXIpLnNwbGl0KERFQ0lNQUxfU0VQKTt2YXIgd2hvbGU9ZnJhY3Rpb25bMF07ZnJhY3Rpb249ZnJhY3Rpb25bMV18fCcnO3ZhciBpLHBvcz0wLGxncm91cD1wYXR0ZXJuLmxnU2l6ZSxncm91cD1wYXR0ZXJuLmdTaXplO2lmKHdob2xlLmxlbmd0aD49KGxncm91cCtncm91cCkpe3Bvcz13aG9sZS5sZW5ndGgtbGdyb3VwO2ZvcihpPTA7aTxwb3M7aSsrKXtpZigocG9zLWkpJWdyb3VwPT09MCYmaSE9PTApe2Zvcm1hdGVkVGV4dCs9Z3JvdXBTZXA7fQpmb3JtYXRlZFRleHQrPXdob2xlLmNoYXJBdChpKTt9fQpmb3IoaT1wb3M7aTx3aG9sZS5sZW5ndGg7aSsrKXtpZigod2hvbGUubGVuZ3RoLWkpJWxncm91cD09PTAmJmkhPT0wKXtmb3JtYXRlZFRleHQrPWdyb3VwU2VwO30KZm9ybWF0ZWRUZXh0Kz13aG9sZS5jaGFyQXQoaSk7fQp3aGlsZShmcmFjdGlvbi5sZW5ndGg8ZnJhY3Rpb25TaXplKXtmcmFjdGlvbis9JzAnO30KaWYoZnJhY3Rpb25TaXplJiZmcmFjdGlvblNpemUhPT0iMCIpZm9ybWF0ZWRUZXh0Kz1kZWNpbWFsU2VwK2ZyYWN0aW9uLnN1YnN0cigwLGZyYWN0aW9uU2l6ZSk7fWVsc2V7aWYoZnJhY3Rpb25TaXplPjAmJm51bWJlcj4tMSYmbnVtYmVyPDEpe2Zvcm1hdGVkVGV4dD1udW1iZXIudG9GaXhlZChmcmFjdGlvblNpemUpO319CnBhcnRzLnB1c2goaXNOZWdhdGl2ZT9wYXR0ZXJuLm5lZ1ByZTpwYXR0ZXJuLnBvc1ByZSk7cGFydHMucHVzaChmb3JtYXRlZFRleHQpO3BhcnRzLnB1c2goaXNOZWdhdGl2ZT9wYXR0ZXJuLm5lZ1N1ZjpwYXR0ZXJuLnBvc1N1Zik7cmV0dXJuIHBhcnRzLmpvaW4oJycpO30KZnVuY3Rpb24gcGFkTnVtYmVyKG51bSxkaWdpdHMsdHJpbSl7dmFyIG5lZz0nJztpZihudW08MCl7bmVnPSctJztudW09LW51bTt9Cm51bT0nJytudW07d2hpbGUobnVtLmxlbmd0aDxkaWdpdHMpbnVtPScwJytudW07aWYodHJpbSkKbnVtPW51bS5zdWJzdHIobnVtLmxlbmd0aC1kaWdpdHMpO3JldHVybiBuZWcrbnVtO30KZnVuY3Rpb24gZGF0ZUdldHRlcihuYW1lLHNpemUsb2Zmc2V0LHRyaW0pe29mZnNldD1vZmZzZXR8fDA7cmV0dXJuIGZ1bmN0aW9uKGRhdGUpe3ZhciB2YWx1ZT1kYXRlWydnZXQnK25hbWVdKCk7aWYob2Zmc2V0PjB8fHZhbHVlPi1vZmZzZXQpCnZhbHVlKz1vZmZzZXQ7aWYodmFsdWU9PT0wJiZvZmZzZXQ9PS0xMil2YWx1ZT0xMjtyZXR1cm4gcGFkTnVtYmVyKHZhbHVlLHNpemUsdHJpbSk7fTt9CmZ1bmN0aW9uIGRhdGVTdHJHZXR0ZXIobmFtZSxzaG9ydEZvcm0pe3JldHVybiBmdW5jdGlvbihkYXRlLGZvcm1hdHMpe3ZhciB2YWx1ZT1kYXRlWydnZXQnK25hbWVdKCk7dmFyIGdldD11cHBlcmNhc2Uoc2hvcnRGb3JtPygnU0hPUlQnK25hbWUpOm5hbWUpO3JldHVybiBmb3JtYXRzW2dldF1bdmFsdWVdO307fQpmdW5jdGlvbiB0aW1lWm9uZUdldHRlcihkYXRlKXt2YXIgem9uZT0tMSpkYXRlLmdldFRpbWV6b25lT2Zmc2V0KCk7dmFyIHBhZGRlZFpvbmU9KHpvbmU+PTApPyIrIjoiIjtwYWRkZWRab25lKz1wYWROdW1iZXIoTWF0aFt6b25lPjA/J2Zsb29yJzonY2VpbCddKHpvbmUvNjApLDIpKwpwYWROdW1iZXIoTWF0aC5hYnMoem9uZSU2MCksMik7cmV0dXJuIHBhZGRlZFpvbmU7fQpmdW5jdGlvbiBhbXBtR2V0dGVyKGRhdGUsZm9ybWF0cyl7cmV0dXJuIGRhdGUuZ2V0SG91cnMoKTwxMj9mb3JtYXRzLkFNUE1TWzBdOmZvcm1hdHMuQU1QTVNbMV07fQp2YXIgREFURV9GT1JNQVRTPXt5eXl5OmRhdGVHZXR0ZXIoJ0Z1bGxZZWFyJyw0KSx5eTpkYXRlR2V0dGVyKCdGdWxsWWVhcicsMiwwLHRydWUpLHk6ZGF0ZUdldHRlcignRnVsbFllYXInLDEpLE1NTU06ZGF0ZVN0ckdldHRlcignTW9udGgnKSxNTU06ZGF0ZVN0ckdldHRlcignTW9udGgnLHRydWUpLE1NOmRhdGVHZXR0ZXIoJ01vbnRoJywyLDEpLE06ZGF0ZUdldHRlcignTW9udGgnLDEsMSksZGQ6ZGF0ZUdldHRlcignRGF0ZScsMiksZDpkYXRlR2V0dGVyKCdEYXRlJywxKSxISDpkYXRlR2V0dGVyKCdIb3VycycsMiksSDpkYXRlR2V0dGVyKCdIb3VycycsMSksaGg6ZGF0ZUdldHRlcignSG91cnMnLDIsLTEyKSxoOmRhdGVHZXR0ZXIoJ0hvdXJzJywxLC0xMiksbW06ZGF0ZUdldHRlcignTWludXRlcycsMiksbTpkYXRlR2V0dGVyKCdNaW51dGVzJywxKSxzczpkYXRlR2V0dGVyKCdTZWNvbmRzJywyKSxzOmRhdGVHZXR0ZXIoJ1NlY29uZHMnLDEpLHNzczpkYXRlR2V0dGVyKCdNaWxsaXNlY29uZHMnLDMpLEVFRUU6ZGF0ZVN0ckdldHRlcignRGF5JyksRUVFOmRhdGVTdHJHZXR0ZXIoJ0RheScsdHJ1ZSksYTphbXBtR2V0dGVyLFo6dGltZVpvbmVHZXR0ZXJ9O3ZhciBEQVRFX0ZPUk1BVFNfU1BMSVQ9LygoPzpbXnlNZEhobXNhWkUnXSspfCg/OicoPzpbXiddfCcnKSonKXwoPzpFK3x5K3xNK3xkK3xIK3xoK3xtK3xzK3xhfFopKSguKikvLE5VTUJFUl9TVFJJTkc9L15cLT9cZCskLztkYXRlRmlsdGVyLiRpbmplY3Q9WyckbG9jYWxlJ107ZnVuY3Rpb24gZGF0ZUZpbHRlcigkbG9jYWxlKXt2YXIgUl9JU084NjAxX1NUUj0vXihcZHs0fSktPyhcZFxkKS0/KFxkXGQpKD86VChcZFxkKSg/Ojo/KFxkXGQpKD86Oj8oXGRcZCkoPzpcLihcZCspKT8pPyk/KFp8KFsrLV0pKFxkXGQpOj8oXGRcZCkpPyk/JC87ZnVuY3Rpb24ganNvblN0cmluZ1RvRGF0ZShzdHJpbmcpe3ZhciBtYXRjaDtpZihtYXRjaD1zdHJpbmcubWF0Y2goUl9JU084NjAxX1NUUikpe3ZhciBkYXRlPW5ldyBEYXRlKDApLHR6SG91cj0wLHR6TWluPTAsZGF0ZVNldHRlcj1tYXRjaFs4XT9kYXRlLnNldFVUQ0Z1bGxZZWFyOmRhdGUuc2V0RnVsbFllYXIsdGltZVNldHRlcj1tYXRjaFs4XT9kYXRlLnNldFVUQ0hvdXJzOmRhdGUuc2V0SG91cnM7aWYobWF0Y2hbOV0pe3R6SG91cj1pbnQobWF0Y2hbOV0rbWF0Y2hbMTBdKTt0ek1pbj1pbnQobWF0Y2hbOV0rbWF0Y2hbMTFdKTt9CmRhdGVTZXR0ZXIuY2FsbChkYXRlLGludChtYXRjaFsxXSksaW50KG1hdGNoWzJdKS0xLGludChtYXRjaFszXSkpO3ZhciBoPWludChtYXRjaFs0XXx8MCktdHpIb3VyO3ZhciBtPWludChtYXRjaFs1XXx8MCktdHpNaW47dmFyIHM9aW50KG1hdGNoWzZdfHwwKTt2YXIgbXM9TWF0aC5yb3VuZChwYXJzZUZsb2F0KCcwLicrKG1hdGNoWzddfHwwKSkqMTAwMCk7dGltZVNldHRlci5jYWxsKGRhdGUsaCxtLHMsbXMpO3JldHVybiBkYXRlO30KcmV0dXJuIHN0cmluZzt9CnJldHVybiBmdW5jdGlvbihkYXRlLGZvcm1hdCl7dmFyIHRleHQ9JycscGFydHM9W10sZm4sbWF0Y2g7Zm9ybWF0PWZvcm1hdHx8J21lZGl1bURhdGUnO2Zvcm1hdD0kbG9jYWxlLkRBVEVUSU1FX0ZPUk1BVFNbZm9ybWF0XXx8Zm9ybWF0O2lmKGlzU3RyaW5nKGRhdGUpKXtpZihOVU1CRVJfU1RSSU5HLnRlc3QoZGF0ZSkpe2RhdGU9aW50KGRhdGUpO31lbHNle2RhdGU9anNvblN0cmluZ1RvRGF0ZShkYXRlKTt9fQppZihpc051bWJlcihkYXRlKSl7ZGF0ZT1uZXcgRGF0ZShkYXRlKTt9CmlmKCFpc0RhdGUoZGF0ZSkpe3JldHVybiBkYXRlO30Kd2hpbGUoZm9ybWF0KXttYXRjaD1EQVRFX0ZPUk1BVFNfU1BMSVQuZXhlYyhmb3JtYXQpO2lmKG1hdGNoKXtwYXJ0cz1jb25jYXQocGFydHMsbWF0Y2gsMSk7Zm9ybWF0PXBhcnRzLnBvcCgpO31lbHNle3BhcnRzLnB1c2goZm9ybWF0KTtmb3JtYXQ9bnVsbDt9fQpmb3JFYWNoKHBhcnRzLGZ1bmN0aW9uKHZhbHVlKXtmbj1EQVRFX0ZPUk1BVFNbdmFsdWVdO3RleHQrPWZuP2ZuKGRhdGUsJGxvY2FsZS5EQVRFVElNRV9GT1JNQVRTKTp2YWx1ZS5yZXBsYWNlKC8oXid8JyQpL2csJycpLnJlcGxhY2UoLycnL2csIiciKTt9KTtyZXR1cm4gdGV4dDt9O30KZnVuY3Rpb24ganNvbkZpbHRlcigpe3JldHVybiBmdW5jdGlvbihvYmplY3Qpe3JldHVybiB0b0pzb24ob2JqZWN0LHRydWUpO307fQp2YXIgbG93ZXJjYXNlRmlsdGVyPXZhbHVlRm4obG93ZXJjYXNlKTt2YXIgdXBwZXJjYXNlRmlsdGVyPXZhbHVlRm4odXBwZXJjYXNlKTtmdW5jdGlvbiBsaW1pdFRvRmlsdGVyKCl7cmV0dXJuIGZ1bmN0aW9uKGlucHV0LGxpbWl0KXtpZighaXNBcnJheShpbnB1dCkmJiFpc1N0cmluZyhpbnB1dCkpcmV0dXJuIGlucHV0O2lmKE1hdGguYWJzKE51bWJlcihsaW1pdCkpPT09SW5maW5pdHkpe2xpbWl0PU51bWJlcihsaW1pdCk7fWVsc2V7bGltaXQ9aW50KGxpbWl0KTt9CmlmKGlzU3RyaW5nKGlucHV0KSl7aWYobGltaXQpe3JldHVybiBsaW1pdD49MD9pbnB1dC5zbGljZSgwLGxpbWl0KTppbnB1dC5zbGljZShsaW1pdCxpbnB1dC5sZW5ndGgpO31lbHNle3JldHVybiIiO319CnZhciBvdXQ9W10saSxuO2lmKGxpbWl0PmlucHV0Lmxlbmd0aCkKbGltaXQ9aW5wdXQubGVuZ3RoO2Vsc2UgaWYobGltaXQ8LWlucHV0Lmxlbmd0aCkKbGltaXQ9LWlucHV0Lmxlbmd0aDtpZihsaW1pdD4wKXtpPTA7bj1saW1pdDt9ZWxzZXtpPWlucHV0Lmxlbmd0aCtsaW1pdDtuPWlucHV0Lmxlbmd0aDt9CmZvcig7aTxuO2krKyl7b3V0LnB1c2goaW5wdXRbaV0pO30KcmV0dXJuIG91dDt9O30Kb3JkZXJCeUZpbHRlci4kaW5qZWN0PVsnJHBhcnNlJ107ZnVuY3Rpb24gb3JkZXJCeUZpbHRlcigkcGFyc2Upe3JldHVybiBmdW5jdGlvbihhcnJheSxzb3J0UHJlZGljYXRlLHJldmVyc2VPcmRlcil7aWYoIWlzQXJyYXkoYXJyYXkpKXJldHVybiBhcnJheTtpZighc29ydFByZWRpY2F0ZSlyZXR1cm4gYXJyYXk7c29ydFByZWRpY2F0ZT1pc0FycmF5KHNvcnRQcmVkaWNhdGUpP3NvcnRQcmVkaWNhdGU6W3NvcnRQcmVkaWNhdGVdO3NvcnRQcmVkaWNhdGU9bWFwKHNvcnRQcmVkaWNhdGUsZnVuY3Rpb24ocHJlZGljYXRlKXt2YXIgZGVzY2VuZGluZz1mYWxzZSxnZXQ9cHJlZGljYXRlfHxpZGVudGl0eTtpZihpc1N0cmluZyhwcmVkaWNhdGUpKXtpZigocHJlZGljYXRlLmNoYXJBdCgwKT09JysnfHxwcmVkaWNhdGUuY2hhckF0KDApPT0nLScpKXtkZXNjZW5kaW5nPXByZWRpY2F0ZS5jaGFyQXQoMCk9PSctJztwcmVkaWNhdGU9cHJlZGljYXRlLnN1YnN0cmluZygxKTt9CmdldD0kcGFyc2UocHJlZGljYXRlKTtpZihnZXQuY29uc3RhbnQpe3ZhciBrZXk9Z2V0KCk7cmV0dXJuIHJldmVyc2VDb21wYXJhdG9yKGZ1bmN0aW9uKGEsYil7cmV0dXJuIGNvbXBhcmUoYVtrZXldLGJba2V5XSk7fSxkZXNjZW5kaW5nKTt9fQpyZXR1cm4gcmV2ZXJzZUNvbXBhcmF0b3IoZnVuY3Rpb24oYSxiKXtyZXR1cm4gY29tcGFyZShnZXQoYSksZ2V0KGIpKTt9LGRlc2NlbmRpbmcpO30pO3ZhciBhcnJheUNvcHk9W107Zm9yKHZhciBpPTA7aTxhcnJheS5sZW5ndGg7aSsrKXthcnJheUNvcHkucHVzaChhcnJheVtpXSk7fQpyZXR1cm4gYXJyYXlDb3B5LnNvcnQocmV2ZXJzZUNvbXBhcmF0b3IoY29tcGFyYXRvcixyZXZlcnNlT3JkZXIpKTtmdW5jdGlvbiBjb21wYXJhdG9yKG8xLG8yKXtmb3IodmFyIGk9MDtpPHNvcnRQcmVkaWNhdGUubGVuZ3RoO2krKyl7dmFyIGNvbXA9c29ydFByZWRpY2F0ZVtpXShvMSxvMik7aWYoY29tcCE9PTApcmV0dXJuIGNvbXA7fQpyZXR1cm4gMDt9CmZ1bmN0aW9uIHJldmVyc2VDb21wYXJhdG9yKGNvbXAsZGVzY2VuZGluZyl7cmV0dXJuIHRvQm9vbGVhbihkZXNjZW5kaW5nKT9mdW5jdGlvbihhLGIpe3JldHVybiBjb21wKGIsYSk7fTpjb21wO30KZnVuY3Rpb24gY29tcGFyZSh2MSx2Mil7dmFyIHQxPXR5cGVvZiB2MTt2YXIgdDI9dHlwZW9mIHYyO2lmKHQxPT10Mil7aWYodDE9PSJzdHJpbmciKXt2MT12MS50b0xvd2VyQ2FzZSgpO3YyPXYyLnRvTG93ZXJDYXNlKCk7fQppZih2MT09PXYyKXJldHVybiAwO3JldHVybiB2MTx2Mj8tMToxO31lbHNle3JldHVybiB0MTx0Mj8tMToxO319fTt9CmZ1bmN0aW9uIG5nRGlyZWN0aXZlKGRpcmVjdGl2ZSl7aWYoaXNGdW5jdGlvbihkaXJlY3RpdmUpKXtkaXJlY3RpdmU9e2xpbms6ZGlyZWN0aXZlfTt9CmRpcmVjdGl2ZS5yZXN0cmljdD1kaXJlY3RpdmUucmVzdHJpY3R8fCdBQyc7cmV0dXJuIHZhbHVlRm4oZGlyZWN0aXZlKTt9CnZhciBodG1sQW5jaG9yRGlyZWN0aXZlPXZhbHVlRm4oe3Jlc3RyaWN0OidFJyxjb21waWxlOmZ1bmN0aW9uKGVsZW1lbnQsYXR0cil7aWYobXNpZTw9OCl7aWYoIWF0dHIuaHJlZiYmIWF0dHIubmFtZSl7YXR0ci4kc2V0KCdocmVmJywnJyk7fQplbGVtZW50LmFwcGVuZChkb2N1bWVudC5jcmVhdGVDb21tZW50KCdJRSBmaXgnKSk7fQppZighYXR0ci5ocmVmJiYhYXR0ci54bGlua0hyZWYmJiFhdHRyLm5hbWUpe3JldHVybiBmdW5jdGlvbihzY29wZSxlbGVtZW50KXt2YXIgaHJlZj10b1N0cmluZy5jYWxsKGVsZW1lbnQucHJvcCgnaHJlZicpKT09PSdbb2JqZWN0IFNWR0FuaW1hdGVkU3RyaW5nXSc/J3hsaW5rOmhyZWYnOidocmVmJztlbGVtZW50Lm9uKCdjbGljaycsZnVuY3Rpb24oZXZlbnQpe2lmKCFlbGVtZW50LmF0dHIoaHJlZikpe2V2ZW50LnByZXZlbnREZWZhdWx0KCk7fX0pO307fX19KTt2YXIgbmdBdHRyaWJ1dGVBbGlhc0RpcmVjdGl2ZXM9e307Zm9yRWFjaChCT09MRUFOX0FUVFIsZnVuY3Rpb24ocHJvcE5hbWUsYXR0ck5hbWUpe2lmKHByb3BOYW1lPT0ibXVsdGlwbGUiKXJldHVybjt2YXIgbm9ybWFsaXplZD1kaXJlY3RpdmVOb3JtYWxpemUoJ25nLScrYXR0ck5hbWUpO25nQXR0cmlidXRlQWxpYXNEaXJlY3RpdmVzW25vcm1hbGl6ZWRdPWZ1bmN0aW9uKCl7cmV0dXJue3ByaW9yaXR5OjEwMCxsaW5rOmZ1bmN0aW9uKHNjb3BlLGVsZW1lbnQsYXR0cil7c2NvcGUuJHdhdGNoKGF0dHJbbm9ybWFsaXplZF0sZnVuY3Rpb24gbmdCb29sZWFuQXR0cldhdGNoQWN0aW9uKHZhbHVlKXthdHRyLiRzZXQoYXR0ck5hbWUsISF2YWx1ZSk7fSk7fX07fTt9KTtmb3JFYWNoKFsnc3JjJywnc3Jjc2V0JywnaHJlZiddLGZ1bmN0aW9uKGF0dHJOYW1lKXt2YXIgbm9ybWFsaXplZD1kaXJlY3RpdmVOb3JtYWxpemUoJ25nLScrYXR0ck5hbWUpO25nQXR0cmlidXRlQWxpYXNEaXJlY3RpdmVzW25vcm1hbGl6ZWRdPWZ1bmN0aW9uKCl7cmV0dXJue3ByaW9yaXR5Ojk5LGxpbms6ZnVuY3Rpb24oc2NvcGUsZWxlbWVudCxhdHRyKXt2YXIgcHJvcE5hbWU9YXR0ck5hbWUsbmFtZT1hdHRyTmFtZTtpZihhdHRyTmFtZT09PSdocmVmJyYmdG9TdHJpbmcuY2FsbChlbGVtZW50LnByb3AoJ2hyZWYnKSk9PT0nW29iamVjdCBTVkdBbmltYXRlZFN0cmluZ10nKXtuYW1lPSd4bGlua0hyZWYnO2F0dHIuJGF0dHJbbmFtZV09J3hsaW5rOmhyZWYnO3Byb3BOYW1lPW51bGw7fQphdHRyLiRvYnNlcnZlKG5vcm1hbGl6ZWQsZnVuY3Rpb24odmFsdWUpe2lmKCF2YWx1ZSkKcmV0dXJuO2F0dHIuJHNldChuYW1lLHZhbHVlKTtpZihtc2llJiZwcm9wTmFtZSllbGVtZW50LnByb3AocHJvcE5hbWUsYXR0cltuYW1lXSk7fSk7fX07fTt9KTt2YXIgbnVsbEZvcm1DdHJsPXskYWRkQ29udHJvbDpub29wLCRyZW1vdmVDb250cm9sOm5vb3AsJHNldFZhbGlkaXR5Om5vb3AsJHNldERpcnR5Om5vb3AsJHNldFByaXN0aW5lOm5vb3B9O0Zvcm1Db250cm9sbGVyLiRpbmplY3Q9WyckZWxlbWVudCcsJyRhdHRycycsJyRzY29wZScsJyRhbmltYXRlJ107ZnVuY3Rpb24gRm9ybUNvbnRyb2xsZXIoZWxlbWVudCxhdHRycywkc2NvcGUsJGFuaW1hdGUpe3ZhciBmb3JtPXRoaXMscGFyZW50Rm9ybT1lbGVtZW50LnBhcmVudCgpLmNvbnRyb2xsZXIoJ2Zvcm0nKXx8bnVsbEZvcm1DdHJsLGludmFsaWRDb3VudD0wLGVycm9ycz1mb3JtLiRlcnJvcj17fSxjb250cm9scz1bXTtmb3JtLiRuYW1lPWF0dHJzLm5hbWV8fGF0dHJzLm5nRm9ybTtmb3JtLiRkaXJ0eT1mYWxzZTtmb3JtLiRwcmlzdGluZT10cnVlO2Zvcm0uJHZhbGlkPXRydWU7Zm9ybS4kaW52YWxpZD1mYWxzZTtwYXJlbnRGb3JtLiRhZGRDb250cm9sKGZvcm0pO2VsZW1lbnQuYWRkQ2xhc3MoUFJJU1RJTkVfQ0xBU1MpO3RvZ2dsZVZhbGlkQ3NzKHRydWUpO2Z1bmN0aW9uIHRvZ2dsZVZhbGlkQ3NzKGlzVmFsaWQsdmFsaWRhdGlvbkVycm9yS2V5KXt2YWxpZGF0aW9uRXJyb3JLZXk9dmFsaWRhdGlvbkVycm9yS2V5PyctJytzbmFrZV9jYXNlKHZhbGlkYXRpb25FcnJvcktleSwnLScpOicnOyRhbmltYXRlLnJlbW92ZUNsYXNzKGVsZW1lbnQsKGlzVmFsaWQ/SU5WQUxJRF9DTEFTUzpWQUxJRF9DTEFTUykrdmFsaWRhdGlvbkVycm9yS2V5KTskYW5pbWF0ZS5hZGRDbGFzcyhlbGVtZW50LChpc1ZhbGlkP1ZBTElEX0NMQVNTOklOVkFMSURfQ0xBU1MpK3ZhbGlkYXRpb25FcnJvcktleSk7fQpmb3JtLiRhZGRDb250cm9sPWZ1bmN0aW9uKGNvbnRyb2wpe2Fzc2VydE5vdEhhc093blByb3BlcnR5KGNvbnRyb2wuJG5hbWUsJ2lucHV0Jyk7Y29udHJvbHMucHVzaChjb250cm9sKTtpZihjb250cm9sLiRuYW1lKXtmb3JtW2NvbnRyb2wuJG5hbWVdPWNvbnRyb2w7fX07Zm9ybS4kcmVtb3ZlQ29udHJvbD1mdW5jdGlvbihjb250cm9sKXtpZihjb250cm9sLiRuYW1lJiZmb3JtW2NvbnRyb2wuJG5hbWVdPT09Y29udHJvbCl7ZGVsZXRlIGZvcm1bY29udHJvbC4kbmFtZV07fQpmb3JFYWNoKGVycm9ycyxmdW5jdGlvbihxdWV1ZSx2YWxpZGF0aW9uVG9rZW4pe2Zvcm0uJHNldFZhbGlkaXR5KHZhbGlkYXRpb25Ub2tlbix0cnVlLGNvbnRyb2wpO30pO2FycmF5UmVtb3ZlKGNvbnRyb2xzLGNvbnRyb2wpO307Zm9ybS4kc2V0VmFsaWRpdHk9ZnVuY3Rpb24odmFsaWRhdGlvblRva2VuLGlzVmFsaWQsY29udHJvbCl7dmFyIHF1ZXVlPWVycm9yc1t2YWxpZGF0aW9uVG9rZW5dO2lmKGlzVmFsaWQpe2lmKHF1ZXVlKXthcnJheVJlbW92ZShxdWV1ZSxjb250cm9sKTtpZighcXVldWUubGVuZ3RoKXtpbnZhbGlkQ291bnQtLTtpZighaW52YWxpZENvdW50KXt0b2dnbGVWYWxpZENzcyhpc1ZhbGlkKTtmb3JtLiR2YWxpZD10cnVlO2Zvcm0uJGludmFsaWQ9ZmFsc2U7fQplcnJvcnNbdmFsaWRhdGlvblRva2VuXT1mYWxzZTt0b2dnbGVWYWxpZENzcyh0cnVlLHZhbGlkYXRpb25Ub2tlbik7cGFyZW50Rm9ybS4kc2V0VmFsaWRpdHkodmFsaWRhdGlvblRva2VuLHRydWUsZm9ybSk7fX19ZWxzZXtpZighaW52YWxpZENvdW50KXt0b2dnbGVWYWxpZENzcyhpc1ZhbGlkKTt9CmlmKHF1ZXVlKXtpZihpbmNsdWRlcyhxdWV1ZSxjb250cm9sKSlyZXR1cm47fWVsc2V7ZXJyb3JzW3ZhbGlkYXRpb25Ub2tlbl09cXVldWU9W107aW52YWxpZENvdW50Kys7dG9nZ2xlVmFsaWRDc3MoZmFsc2UsdmFsaWRhdGlvblRva2VuKTtwYXJlbnRGb3JtLiRzZXRWYWxpZGl0eSh2YWxpZGF0aW9uVG9rZW4sZmFsc2UsZm9ybSk7fQpxdWV1ZS5wdXNoKGNvbnRyb2wpO2Zvcm0uJHZhbGlkPWZhbHNlO2Zvcm0uJGludmFsaWQ9dHJ1ZTt9fTtmb3JtLiRzZXREaXJ0eT1mdW5jdGlvbigpeyRhbmltYXRlLnJlbW92ZUNsYXNzKGVsZW1lbnQsUFJJU1RJTkVfQ0xBU1MpOyRhbmltYXRlLmFkZENsYXNzKGVsZW1lbnQsRElSVFlfQ0xBU1MpO2Zvcm0uJGRpcnR5PXRydWU7Zm9ybS4kcHJpc3RpbmU9ZmFsc2U7cGFyZW50Rm9ybS4kc2V0RGlydHkoKTt9O2Zvcm0uJHNldFByaXN0aW5lPWZ1bmN0aW9uKCl7JGFuaW1hdGUucmVtb3ZlQ2xhc3MoZWxlbWVudCxESVJUWV9DTEFTUyk7JGFuaW1hdGUuYWRkQ2xhc3MoZWxlbWVudCxQUklTVElORV9DTEFTUyk7Zm9ybS4kZGlydHk9ZmFsc2U7Zm9ybS4kcHJpc3RpbmU9dHJ1ZTtmb3JFYWNoKGNvbnRyb2xzLGZ1bmN0aW9uKGNvbnRyb2wpe2NvbnRyb2wuJHNldFByaXN0aW5lKCk7fSk7fTt9CnZhciBmb3JtRGlyZWN0aXZlRmFjdG9yeT1mdW5jdGlvbihpc05nRm9ybSl7cmV0dXJuWyckdGltZW91dCcsZnVuY3Rpb24oJHRpbWVvdXQpe3ZhciBmb3JtRGlyZWN0aXZlPXtuYW1lOidmb3JtJyxyZXN0cmljdDppc05nRm9ybT8nRUFDJzonRScsY29udHJvbGxlcjpGb3JtQ29udHJvbGxlcixjb21waWxlOmZ1bmN0aW9uKCl7cmV0dXJue3ByZTpmdW5jdGlvbihzY29wZSxmb3JtRWxlbWVudCxhdHRyLGNvbnRyb2xsZXIpe2lmKCFhdHRyLmFjdGlvbil7dmFyIHByZXZlbnREZWZhdWx0TGlzdGVuZXI9ZnVuY3Rpb24oZXZlbnQpe2V2ZW50LnByZXZlbnREZWZhdWx0P2V2ZW50LnByZXZlbnREZWZhdWx0KCk6ZXZlbnQucmV0dXJuVmFsdWU9ZmFsc2U7fTthZGRFdmVudExpc3RlbmVyRm4oZm9ybUVsZW1lbnRbMF0sJ3N1Ym1pdCcscHJldmVudERlZmF1bHRMaXN0ZW5lcik7Zm9ybUVsZW1lbnQub24oJyRkZXN0cm95JyxmdW5jdGlvbigpeyR0aW1lb3V0KGZ1bmN0aW9uKCl7cmVtb3ZlRXZlbnRMaXN0ZW5lckZuKGZvcm1FbGVtZW50WzBdLCdzdWJtaXQnLHByZXZlbnREZWZhdWx0TGlzdGVuZXIpO30sMCxmYWxzZSk7fSk7fQp2YXIgcGFyZW50Rm9ybUN0cmw9Zm9ybUVsZW1lbnQucGFyZW50KCkuY29udHJvbGxlcignZm9ybScpLGFsaWFzPWF0dHIubmFtZXx8YXR0ci5uZ0Zvcm07aWYoYWxpYXMpe3NldHRlcihzY29wZSxhbGlhcyxjb250cm9sbGVyLGFsaWFzKTt9CmlmKHBhcmVudEZvcm1DdHJsKXtmb3JtRWxlbWVudC5vbignJGRlc3Ryb3knLGZ1bmN0aW9uKCl7cGFyZW50Rm9ybUN0cmwuJHJlbW92ZUNvbnRyb2woY29udHJvbGxlcik7aWYoYWxpYXMpe3NldHRlcihzY29wZSxhbGlhcyx1bmRlZmluZWQsYWxpYXMpO30KZXh0ZW5kKGNvbnRyb2xsZXIsbnVsbEZvcm1DdHJsKTt9KTt9fX07fX07cmV0dXJuIGZvcm1EaXJlY3RpdmU7fV07fTt2YXIgZm9ybURpcmVjdGl2ZT1mb3JtRGlyZWN0aXZlRmFjdG9yeSgpO3ZhciBuZ0Zvcm1EaXJlY3RpdmU9Zm9ybURpcmVjdGl2ZUZhY3RvcnkodHJ1ZSk7dmFyIFVSTF9SRUdFWFA9L14oZnRwfGh0dHB8aHR0cHMpOlwvXC8oXHcrOnswLDF9XHcqQCk/KFxTKykoOlswLTldKyk/KFwvfFwvKFtcdyMhOi4/Kz0mJUAhXC1cL10pKT8kLzt2YXIgRU1BSUxfUkVHRVhQPS9eW2EtejAtOSEjJCUmJyorXC89P15fYHt8fX4uLV0rQFthLXowLTktXSsoXC5bYS16MC05LV0rKSokL2k7dmFyIE5VTUJFUl9SRUdFWFA9L15ccyooXC18XCspPyhcZCt8KFxkKihcLlxkKikpKVxzKiQvO3ZhciBpbnB1dFR5cGU9eyd0ZXh0Jzp0ZXh0SW5wdXRUeXBlLCdudW1iZXInOm51bWJlcklucHV0VHlwZSwndXJsJzp1cmxJbnB1dFR5cGUsJ2VtYWlsJzplbWFpbElucHV0VHlwZSwncmFkaW8nOnJhZGlvSW5wdXRUeXBlLCdjaGVja2JveCc6Y2hlY2tib3hJbnB1dFR5cGUsJ2hpZGRlbic6bm9vcCwnYnV0dG9uJzpub29wLCdzdWJtaXQnOm5vb3AsJ3Jlc2V0Jzpub29wLCdmaWxlJzpub29wfTtmdW5jdGlvbiB2YWxpZGF0ZShjdHJsLHZhbGlkYXRvck5hbWUsdmFsaWRpdHksdmFsdWUpe2N0cmwuJHNldFZhbGlkaXR5KHZhbGlkYXRvck5hbWUsdmFsaWRpdHkpO3JldHVybiB2YWxpZGl0eT92YWx1ZTp1bmRlZmluZWQ7fQpmdW5jdGlvbiB0ZXN0RmxhZ3ModmFsaWRpdHksZmxhZ3Mpe3ZhciBpLGZsYWc7aWYoZmxhZ3Mpe2ZvcihpPTA7aTxmbGFncy5sZW5ndGg7KytpKXtmbGFnPWZsYWdzW2ldO2lmKHZhbGlkaXR5W2ZsYWddKXtyZXR1cm4gdHJ1ZTt9fX0KcmV0dXJuIGZhbHNlO30KZnVuY3Rpb24gYWRkTmF0aXZlSHRtbDVWYWxpZGF0b3JzKGN0cmwsdmFsaWRhdG9yTmFtZSxiYWRGbGFncyxpZ25vcmVGbGFncyx2YWxpZGl0eSl7aWYoaXNPYmplY3QodmFsaWRpdHkpKXtjdHJsLiQkaGFzTmF0aXZlVmFsaWRhdG9ycz10cnVlO3ZhciB2YWxpZGF0b3I9ZnVuY3Rpb24odmFsdWUpe2lmKCFjdHJsLiRlcnJvclt2YWxpZGF0b3JOYW1lXSYmIXRlc3RGbGFncyh2YWxpZGl0eSxpZ25vcmVGbGFncykmJnRlc3RGbGFncyh2YWxpZGl0eSxiYWRGbGFncykpe2N0cmwuJHNldFZhbGlkaXR5KHZhbGlkYXRvck5hbWUsZmFsc2UpO3JldHVybjt9CnJldHVybiB2YWx1ZTt9O2N0cmwuJHBhcnNlcnMucHVzaCh2YWxpZGF0b3IpO319CmZ1bmN0aW9uIHRleHRJbnB1dFR5cGUoc2NvcGUsZWxlbWVudCxhdHRyLGN0cmwsJHNuaWZmZXIsJGJyb3dzZXIpe3ZhciB2YWxpZGl0eT1lbGVtZW50LnByb3AoVkFMSURJVFlfU1RBVEVfUFJPUEVSVFkpO3ZhciBwbGFjZWhvbGRlcj1lbGVtZW50WzBdLnBsYWNlaG9sZGVyLG5vZXZlbnQ9e307Y3RybC4kJHZhbGlkaXR5U3RhdGU9dmFsaWRpdHk7aWYoISRzbmlmZmVyLmFuZHJvaWQpe3ZhciBjb21wb3Npbmc9ZmFsc2U7ZWxlbWVudC5vbignY29tcG9zaXRpb25zdGFydCcsZnVuY3Rpb24oZGF0YSl7Y29tcG9zaW5nPXRydWU7fSk7ZWxlbWVudC5vbignY29tcG9zaXRpb25lbmQnLGZ1bmN0aW9uKCl7Y29tcG9zaW5nPWZhbHNlO2xpc3RlbmVyKCk7fSk7fQp2YXIgbGlzdGVuZXI9ZnVuY3Rpb24oZXYpe2lmKGNvbXBvc2luZylyZXR1cm47dmFyIHZhbHVlPWVsZW1lbnQudmFsKCk7aWYobXNpZSYmKGV2fHxub2V2ZW50KS50eXBlPT09J2lucHV0JyYmZWxlbWVudFswXS5wbGFjZWhvbGRlciE9PXBsYWNlaG9sZGVyKXtwbGFjZWhvbGRlcj1lbGVtZW50WzBdLnBsYWNlaG9sZGVyO3JldHVybjt9CmlmKHRvQm9vbGVhbihhdHRyLm5nVHJpbXx8J1QnKSl7dmFsdWU9dHJpbSh2YWx1ZSk7fQp2YXIgcmV2YWxpZGF0ZT12YWxpZGl0eSYmY3RybC4kJGhhc05hdGl2ZVZhbGlkYXRvcnM7aWYoY3RybC4kdmlld1ZhbHVlIT09dmFsdWV8fCh2YWx1ZT09PScnJiZyZXZhbGlkYXRlKSl7aWYoc2NvcGUuJCRwaGFzZSl7Y3RybC4kc2V0Vmlld1ZhbHVlKHZhbHVlKTt9ZWxzZXtzY29wZS4kYXBwbHkoZnVuY3Rpb24oKXtjdHJsLiRzZXRWaWV3VmFsdWUodmFsdWUpO30pO319fTtpZigkc25pZmZlci5oYXNFdmVudCgnaW5wdXQnKSl7ZWxlbWVudC5vbignaW5wdXQnLGxpc3RlbmVyKTt9ZWxzZXt2YXIgdGltZW91dDt2YXIgZGVmZXJMaXN0ZW5lcj1mdW5jdGlvbigpe2lmKCF0aW1lb3V0KXt0aW1lb3V0PSRicm93c2VyLmRlZmVyKGZ1bmN0aW9uKCl7bGlzdGVuZXIoKTt0aW1lb3V0PW51bGw7fSk7fX07ZWxlbWVudC5vbigna2V5ZG93bicsZnVuY3Rpb24oZXZlbnQpe3ZhciBrZXk9ZXZlbnQua2V5Q29kZTtpZihrZXk9PT05MXx8KDE1PGtleSYma2V5PDE5KXx8KDM3PD1rZXkmJmtleTw9NDApKXJldHVybjtkZWZlckxpc3RlbmVyKCk7fSk7aWYoJHNuaWZmZXIuaGFzRXZlbnQoJ3Bhc3RlJykpe2VsZW1lbnQub24oJ3Bhc3RlIGN1dCcsZGVmZXJMaXN0ZW5lcik7fX0KZWxlbWVudC5vbignY2hhbmdlJyxsaXN0ZW5lcik7Y3RybC4kcmVuZGVyPWZ1bmN0aW9uKCl7ZWxlbWVudC52YWwoY3RybC4kaXNFbXB0eShjdHJsLiR2aWV3VmFsdWUpPycnOmN0cmwuJHZpZXdWYWx1ZSk7fTt2YXIgcGF0dGVybj1hdHRyLm5nUGF0dGVybixwYXR0ZXJuVmFsaWRhdG9yLG1hdGNoO2lmKHBhdHRlcm4pe3ZhciB2YWxpZGF0ZVJlZ2V4PWZ1bmN0aW9uKHJlZ2V4cCx2YWx1ZSl7cmV0dXJuIHZhbGlkYXRlKGN0cmwsJ3BhdHRlcm4nLGN0cmwuJGlzRW1wdHkodmFsdWUpfHxyZWdleHAudGVzdCh2YWx1ZSksdmFsdWUpO307bWF0Y2g9cGF0dGVybi5tYXRjaCgvXlwvKC4qKVwvKFtnaW1dKikkLyk7aWYobWF0Y2gpe3BhdHRlcm49bmV3IFJlZ0V4cChtYXRjaFsxXSxtYXRjaFsyXSk7cGF0dGVyblZhbGlkYXRvcj1mdW5jdGlvbih2YWx1ZSl7cmV0dXJuIHZhbGlkYXRlUmVnZXgocGF0dGVybix2YWx1ZSk7fTt9ZWxzZXtwYXR0ZXJuVmFsaWRhdG9yPWZ1bmN0aW9uKHZhbHVlKXt2YXIgcGF0dGVybk9iaj1zY29wZS4kZXZhbChwYXR0ZXJuKTtpZighcGF0dGVybk9ianx8IXBhdHRlcm5PYmoudGVzdCl7dGhyb3cgbWluRXJyKCduZ1BhdHRlcm4nKSgnbm9yZWdleHAnLCdFeHBlY3RlZCB7MH0gdG8gYmUgYSBSZWdFeHAgYnV0IHdhcyB7MX0uIEVsZW1lbnQ6IHsyfScscGF0dGVybixwYXR0ZXJuT2JqLHN0YXJ0aW5nVGFnKGVsZW1lbnQpKTt9CnJldHVybiB2YWxpZGF0ZVJlZ2V4KHBhdHRlcm5PYmosdmFsdWUpO307fQpjdHJsLiRmb3JtYXR0ZXJzLnB1c2gocGF0dGVyblZhbGlkYXRvcik7Y3RybC4kcGFyc2Vycy5wdXNoKHBhdHRlcm5WYWxpZGF0b3IpO30KaWYoYXR0ci5uZ01pbmxlbmd0aCl7dmFyIG1pbmxlbmd0aD1pbnQoYXR0ci5uZ01pbmxlbmd0aCk7dmFyIG1pbkxlbmd0aFZhbGlkYXRvcj1mdW5jdGlvbih2YWx1ZSl7cmV0dXJuIHZhbGlkYXRlKGN0cmwsJ21pbmxlbmd0aCcsY3RybC4kaXNFbXB0eSh2YWx1ZSl8fHZhbHVlLmxlbmd0aD49bWlubGVuZ3RoLHZhbHVlKTt9O2N0cmwuJHBhcnNlcnMucHVzaChtaW5MZW5ndGhWYWxpZGF0b3IpO2N0cmwuJGZvcm1hdHRlcnMucHVzaChtaW5MZW5ndGhWYWxpZGF0b3IpO30KaWYoYXR0ci5uZ01heGxlbmd0aCl7dmFyIG1heGxlbmd0aD1pbnQoYXR0ci5uZ01heGxlbmd0aCk7dmFyIG1heExlbmd0aFZhbGlkYXRvcj1mdW5jdGlvbih2YWx1ZSl7cmV0dXJuIHZhbGlkYXRlKGN0cmwsJ21heGxlbmd0aCcsY3RybC4kaXNFbXB0eSh2YWx1ZSl8fHZhbHVlLmxlbmd0aDw9bWF4bGVuZ3RoLHZhbHVlKTt9O2N0cmwuJHBhcnNlcnMucHVzaChtYXhMZW5ndGhWYWxpZGF0b3IpO2N0cmwuJGZvcm1hdHRlcnMucHVzaChtYXhMZW5ndGhWYWxpZGF0b3IpO319CnZhciBudW1iZXJCYWRGbGFncz1bJ2JhZElucHV0J107ZnVuY3Rpb24gbnVtYmVySW5wdXRUeXBlKHNjb3BlLGVsZW1lbnQsYXR0cixjdHJsLCRzbmlmZmVyLCRicm93c2VyKXt0ZXh0SW5wdXRUeXBlKHNjb3BlLGVsZW1lbnQsYXR0cixjdHJsLCRzbmlmZmVyLCRicm93c2VyKTtjdHJsLiRwYXJzZXJzLnB1c2goZnVuY3Rpb24odmFsdWUpe3ZhciBlbXB0eT1jdHJsLiRpc0VtcHR5KHZhbHVlKTtpZihlbXB0eXx8TlVNQkVSX1JFR0VYUC50ZXN0KHZhbHVlKSl7Y3RybC4kc2V0VmFsaWRpdHkoJ251bWJlcicsdHJ1ZSk7cmV0dXJuIHZhbHVlPT09Jyc/bnVsbDooZW1wdHk/dmFsdWU6cGFyc2VGbG9hdCh2YWx1ZSkpO31lbHNle2N0cmwuJHNldFZhbGlkaXR5KCdudW1iZXInLGZhbHNlKTtyZXR1cm4gdW5kZWZpbmVkO319KTthZGROYXRpdmVIdG1sNVZhbGlkYXRvcnMoY3RybCwnbnVtYmVyJyxudW1iZXJCYWRGbGFncyxudWxsLGN0cmwuJCR2YWxpZGl0eVN0YXRlKTtjdHJsLiRmb3JtYXR0ZXJzLnB1c2goZnVuY3Rpb24odmFsdWUpe3JldHVybiBjdHJsLiRpc0VtcHR5KHZhbHVlKT8nJzonJyt2YWx1ZTt9KTtpZihhdHRyLm1pbil7dmFyIG1pblZhbGlkYXRvcj1mdW5jdGlvbih2YWx1ZSl7dmFyIG1pbj1wYXJzZUZsb2F0KGF0dHIubWluKTtyZXR1cm4gdmFsaWRhdGUoY3RybCwnbWluJyxjdHJsLiRpc0VtcHR5KHZhbHVlKXx8dmFsdWU+PW1pbix2YWx1ZSk7fTtjdHJsLiRwYXJzZXJzLnB1c2gobWluVmFsaWRhdG9yKTtjdHJsLiRmb3JtYXR0ZXJzLnB1c2gobWluVmFsaWRhdG9yKTt9CmlmKGF0dHIubWF4KXt2YXIgbWF4VmFsaWRhdG9yPWZ1bmN0aW9uKHZhbHVlKXt2YXIgbWF4PXBhcnNlRmxvYXQoYXR0ci5tYXgpO3JldHVybiB2YWxpZGF0ZShjdHJsLCdtYXgnLGN0cmwuJGlzRW1wdHkodmFsdWUpfHx2YWx1ZTw9bWF4LHZhbHVlKTt9O2N0cmwuJHBhcnNlcnMucHVzaChtYXhWYWxpZGF0b3IpO2N0cmwuJGZvcm1hdHRlcnMucHVzaChtYXhWYWxpZGF0b3IpO30KY3RybC4kZm9ybWF0dGVycy5wdXNoKGZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4gdmFsaWRhdGUoY3RybCwnbnVtYmVyJyxjdHJsLiRpc0VtcHR5KHZhbHVlKXx8aXNOdW1iZXIodmFsdWUpLHZhbHVlKTt9KTt9CmZ1bmN0aW9uIHVybElucHV0VHlwZShzY29wZSxlbGVtZW50LGF0dHIsY3RybCwkc25pZmZlciwkYnJvd3Nlcil7dGV4dElucHV0VHlwZShzY29wZSxlbGVtZW50LGF0dHIsY3RybCwkc25pZmZlciwkYnJvd3Nlcik7dmFyIHVybFZhbGlkYXRvcj1mdW5jdGlvbih2YWx1ZSl7cmV0dXJuIHZhbGlkYXRlKGN0cmwsJ3VybCcsY3RybC4kaXNFbXB0eSh2YWx1ZSl8fFVSTF9SRUdFWFAudGVzdCh2YWx1ZSksdmFsdWUpO307Y3RybC4kZm9ybWF0dGVycy5wdXNoKHVybFZhbGlkYXRvcik7Y3RybC4kcGFyc2Vycy5wdXNoKHVybFZhbGlkYXRvcik7fQpmdW5jdGlvbiBlbWFpbElucHV0VHlwZShzY29wZSxlbGVtZW50LGF0dHIsY3RybCwkc25pZmZlciwkYnJvd3Nlcil7dGV4dElucHV0VHlwZShzY29wZSxlbGVtZW50LGF0dHIsY3RybCwkc25pZmZlciwkYnJvd3Nlcik7dmFyIGVtYWlsVmFsaWRhdG9yPWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4gdmFsaWRhdGUoY3RybCwnZW1haWwnLGN0cmwuJGlzRW1wdHkodmFsdWUpfHxFTUFJTF9SRUdFWFAudGVzdCh2YWx1ZSksdmFsdWUpO307Y3RybC4kZm9ybWF0dGVycy5wdXNoKGVtYWlsVmFsaWRhdG9yKTtjdHJsLiRwYXJzZXJzLnB1c2goZW1haWxWYWxpZGF0b3IpO30KZnVuY3Rpb24gcmFkaW9JbnB1dFR5cGUoc2NvcGUsZWxlbWVudCxhdHRyLGN0cmwpe2lmKGlzVW5kZWZpbmVkKGF0dHIubmFtZSkpe2VsZW1lbnQuYXR0cignbmFtZScsbmV4dFVpZCgpKTt9CmVsZW1lbnQub24oJ2NsaWNrJyxmdW5jdGlvbigpe2lmKGVsZW1lbnRbMF0uY2hlY2tlZCl7c2NvcGUuJGFwcGx5KGZ1bmN0aW9uKCl7Y3RybC4kc2V0Vmlld1ZhbHVlKGF0dHIudmFsdWUpO30pO319KTtjdHJsLiRyZW5kZXI9ZnVuY3Rpb24oKXt2YXIgdmFsdWU9YXR0ci52YWx1ZTtlbGVtZW50WzBdLmNoZWNrZWQ9KHZhbHVlPT1jdHJsLiR2aWV3VmFsdWUpO307YXR0ci4kb2JzZXJ2ZSgndmFsdWUnLGN0cmwuJHJlbmRlcik7fQpmdW5jdGlvbiBjaGVja2JveElucHV0VHlwZShzY29wZSxlbGVtZW50LGF0dHIsY3RybCl7dmFyIHRydWVWYWx1ZT1hdHRyLm5nVHJ1ZVZhbHVlLGZhbHNlVmFsdWU9YXR0ci5uZ0ZhbHNlVmFsdWU7aWYoIWlzU3RyaW5nKHRydWVWYWx1ZSkpdHJ1ZVZhbHVlPXRydWU7aWYoIWlzU3RyaW5nKGZhbHNlVmFsdWUpKWZhbHNlVmFsdWU9ZmFsc2U7ZWxlbWVudC5vbignY2xpY2snLGZ1bmN0aW9uKCl7c2NvcGUuJGFwcGx5KGZ1bmN0aW9uKCl7Y3RybC4kc2V0Vmlld1ZhbHVlKGVsZW1lbnRbMF0uY2hlY2tlZCk7fSk7fSk7Y3RybC4kcmVuZGVyPWZ1bmN0aW9uKCl7ZWxlbWVudFswXS5jaGVja2VkPWN0cmwuJHZpZXdWYWx1ZTt9O2N0cmwuJGlzRW1wdHk9ZnVuY3Rpb24odmFsdWUpe3JldHVybiB2YWx1ZSE9PXRydWVWYWx1ZTt9O2N0cmwuJGZvcm1hdHRlcnMucHVzaChmdW5jdGlvbih2YWx1ZSl7cmV0dXJuIHZhbHVlPT09dHJ1ZVZhbHVlO30pO2N0cmwuJHBhcnNlcnMucHVzaChmdW5jdGlvbih2YWx1ZSl7cmV0dXJuIHZhbHVlP3RydWVWYWx1ZTpmYWxzZVZhbHVlO30pO30KdmFyIGlucHV0RGlyZWN0aXZlPVsnJGJyb3dzZXInLCckc25pZmZlcicsZnVuY3Rpb24oJGJyb3dzZXIsJHNuaWZmZXIpe3JldHVybntyZXN0cmljdDonRScscmVxdWlyZTonP25nTW9kZWwnLGxpbms6ZnVuY3Rpb24oc2NvcGUsZWxlbWVudCxhdHRyLGN0cmwpe2lmKGN0cmwpeyhpbnB1dFR5cGVbbG93ZXJjYXNlKGF0dHIudHlwZSldfHxpbnB1dFR5cGUudGV4dCkoc2NvcGUsZWxlbWVudCxhdHRyLGN0cmwsJHNuaWZmZXIsJGJyb3dzZXIpO319fTt9XTt2YXIgVkFMSURfQ0xBU1M9J25nLXZhbGlkJyxJTlZBTElEX0NMQVNTPSduZy1pbnZhbGlkJyxQUklTVElORV9DTEFTUz0nbmctcHJpc3RpbmUnLERJUlRZX0NMQVNTPSduZy1kaXJ0eSc7dmFyIE5nTW9kZWxDb250cm9sbGVyPVsnJHNjb3BlJywnJGV4Y2VwdGlvbkhhbmRsZXInLCckYXR0cnMnLCckZWxlbWVudCcsJyRwYXJzZScsJyRhbmltYXRlJyxmdW5jdGlvbigkc2NvcGUsJGV4Y2VwdGlvbkhhbmRsZXIsJGF0dHIsJGVsZW1lbnQsJHBhcnNlLCRhbmltYXRlKXt0aGlzLiR2aWV3VmFsdWU9TnVtYmVyLk5hTjt0aGlzLiRtb2RlbFZhbHVlPU51bWJlci5OYU47dGhpcy4kcGFyc2Vycz1bXTt0aGlzLiRmb3JtYXR0ZXJzPVtdO3RoaXMuJHZpZXdDaGFuZ2VMaXN0ZW5lcnM9W107dGhpcy4kcHJpc3RpbmU9dHJ1ZTt0aGlzLiRkaXJ0eT1mYWxzZTt0aGlzLiR2YWxpZD10cnVlO3RoaXMuJGludmFsaWQ9ZmFsc2U7dGhpcy4kbmFtZT0kYXR0ci5uYW1lO3ZhciBuZ01vZGVsR2V0PSRwYXJzZSgkYXR0ci5uZ01vZGVsKSxuZ01vZGVsU2V0PW5nTW9kZWxHZXQuYXNzaWduO2lmKCFuZ01vZGVsU2V0KXt0aHJvdyBtaW5FcnIoJ25nTW9kZWwnKSgnbm9uYXNzaWduJywiRXhwcmVzc2lvbiAnezB9JyBpcyBub24tYXNzaWduYWJsZS4gRWxlbWVudDogezF9IiwkYXR0ci5uZ01vZGVsLHN0YXJ0aW5nVGFnKCRlbGVtZW50KSk7fQp0aGlzLiRyZW5kZXI9bm9vcDt0aGlzLiRpc0VtcHR5PWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4gaXNVbmRlZmluZWQodmFsdWUpfHx2YWx1ZT09PScnfHx2YWx1ZT09PW51bGx8fHZhbHVlIT09dmFsdWU7fTt2YXIgcGFyZW50Rm9ybT0kZWxlbWVudC5pbmhlcml0ZWREYXRhKCckZm9ybUNvbnRyb2xsZXInKXx8bnVsbEZvcm1DdHJsLGludmFsaWRDb3VudD0wLCRlcnJvcj10aGlzLiRlcnJvcj17fTskZWxlbWVudC5hZGRDbGFzcyhQUklTVElORV9DTEFTUyk7dG9nZ2xlVmFsaWRDc3ModHJ1ZSk7ZnVuY3Rpb24gdG9nZ2xlVmFsaWRDc3MoaXNWYWxpZCx2YWxpZGF0aW9uRXJyb3JLZXkpe3ZhbGlkYXRpb25FcnJvcktleT12YWxpZGF0aW9uRXJyb3JLZXk/Jy0nK3NuYWtlX2Nhc2UodmFsaWRhdGlvbkVycm9yS2V5LCctJyk6Jyc7JGFuaW1hdGUucmVtb3ZlQ2xhc3MoJGVsZW1lbnQsKGlzVmFsaWQ/SU5WQUxJRF9DTEFTUzpWQUxJRF9DTEFTUykrdmFsaWRhdGlvbkVycm9yS2V5KTskYW5pbWF0ZS5hZGRDbGFzcygkZWxlbWVudCwoaXNWYWxpZD9WQUxJRF9DTEFTUzpJTlZBTElEX0NMQVNTKSt2YWxpZGF0aW9uRXJyb3JLZXkpO30KdGhpcy4kc2V0VmFsaWRpdHk9ZnVuY3Rpb24odmFsaWRhdGlvbkVycm9yS2V5LGlzVmFsaWQpe2lmKCRlcnJvclt2YWxpZGF0aW9uRXJyb3JLZXldPT09IWlzVmFsaWQpcmV0dXJuO2lmKGlzVmFsaWQpe2lmKCRlcnJvclt2YWxpZGF0aW9uRXJyb3JLZXldKWludmFsaWRDb3VudC0tO2lmKCFpbnZhbGlkQ291bnQpe3RvZ2dsZVZhbGlkQ3NzKHRydWUpO3RoaXMuJHZhbGlkPXRydWU7dGhpcy4kaW52YWxpZD1mYWxzZTt9fWVsc2V7dG9nZ2xlVmFsaWRDc3MoZmFsc2UpO3RoaXMuJGludmFsaWQ9dHJ1ZTt0aGlzLiR2YWxpZD1mYWxzZTtpbnZhbGlkQ291bnQrKzt9CiRlcnJvclt2YWxpZGF0aW9uRXJyb3JLZXldPSFpc1ZhbGlkO3RvZ2dsZVZhbGlkQ3NzKGlzVmFsaWQsdmFsaWRhdGlvbkVycm9yS2V5KTtwYXJlbnRGb3JtLiRzZXRWYWxpZGl0eSh2YWxpZGF0aW9uRXJyb3JLZXksaXNWYWxpZCx0aGlzKTt9O3RoaXMuJHNldFByaXN0aW5lPWZ1bmN0aW9uKCl7dGhpcy4kZGlydHk9ZmFsc2U7dGhpcy4kcHJpc3RpbmU9dHJ1ZTskYW5pbWF0ZS5yZW1vdmVDbGFzcygkZWxlbWVudCxESVJUWV9DTEFTUyk7JGFuaW1hdGUuYWRkQ2xhc3MoJGVsZW1lbnQsUFJJU1RJTkVfQ0xBU1MpO307dGhpcy4kc2V0Vmlld1ZhbHVlPWZ1bmN0aW9uKHZhbHVlKXt0aGlzLiR2aWV3VmFsdWU9dmFsdWU7aWYodGhpcy4kcHJpc3RpbmUpe3RoaXMuJGRpcnR5PXRydWU7dGhpcy4kcHJpc3RpbmU9ZmFsc2U7JGFuaW1hdGUucmVtb3ZlQ2xhc3MoJGVsZW1lbnQsUFJJU1RJTkVfQ0xBU1MpOyRhbmltYXRlLmFkZENsYXNzKCRlbGVtZW50LERJUlRZX0NMQVNTKTtwYXJlbnRGb3JtLiRzZXREaXJ0eSgpO30KZm9yRWFjaCh0aGlzLiRwYXJzZXJzLGZ1bmN0aW9uKGZuKXt2YWx1ZT1mbih2YWx1ZSk7fSk7aWYodGhpcy4kbW9kZWxWYWx1ZSE9PXZhbHVlKXt0aGlzLiRtb2RlbFZhbHVlPXZhbHVlO25nTW9kZWxTZXQoJHNjb3BlLHZhbHVlKTtmb3JFYWNoKHRoaXMuJHZpZXdDaGFuZ2VMaXN0ZW5lcnMsZnVuY3Rpb24obGlzdGVuZXIpe3RyeXtsaXN0ZW5lcigpO31jYXRjaChlKXskZXhjZXB0aW9uSGFuZGxlcihlKTt9fSk7fX07dmFyIGN0cmw9dGhpczskc2NvcGUuJHdhdGNoKGZ1bmN0aW9uIG5nTW9kZWxXYXRjaCgpe3ZhciB2YWx1ZT1uZ01vZGVsR2V0KCRzY29wZSk7aWYoY3RybC4kbW9kZWxWYWx1ZSE9PXZhbHVlKXt2YXIgZm9ybWF0dGVycz1jdHJsLiRmb3JtYXR0ZXJzLGlkeD1mb3JtYXR0ZXJzLmxlbmd0aDtjdHJsLiRtb2RlbFZhbHVlPXZhbHVlO3doaWxlKGlkeC0tKXt2YWx1ZT1mb3JtYXR0ZXJzW2lkeF0odmFsdWUpO30KaWYoY3RybC4kdmlld1ZhbHVlIT09dmFsdWUpe2N0cmwuJHZpZXdWYWx1ZT12YWx1ZTtjdHJsLiRyZW5kZXIoKTt9fQpyZXR1cm4gdmFsdWU7fSk7fV07dmFyIG5nTW9kZWxEaXJlY3RpdmU9ZnVuY3Rpb24oKXtyZXR1cm57cmVxdWlyZTpbJ25nTW9kZWwnLCdeP2Zvcm0nXSxjb250cm9sbGVyOk5nTW9kZWxDb250cm9sbGVyLGxpbms6ZnVuY3Rpb24oc2NvcGUsZWxlbWVudCxhdHRyLGN0cmxzKXt2YXIgbW9kZWxDdHJsPWN0cmxzWzBdLGZvcm1DdHJsPWN0cmxzWzFdfHxudWxsRm9ybUN0cmw7Zm9ybUN0cmwuJGFkZENvbnRyb2wobW9kZWxDdHJsKTtzY29wZS4kb24oJyRkZXN0cm95JyxmdW5jdGlvbigpe2Zvcm1DdHJsLiRyZW1vdmVDb250cm9sKG1vZGVsQ3RybCk7fSk7fX07fTt2YXIgbmdDaGFuZ2VEaXJlY3RpdmU9dmFsdWVGbih7cmVxdWlyZTonbmdNb2RlbCcsbGluazpmdW5jdGlvbihzY29wZSxlbGVtZW50LGF0dHIsY3RybCl7Y3RybC4kdmlld0NoYW5nZUxpc3RlbmVycy5wdXNoKGZ1bmN0aW9uKCl7c2NvcGUuJGV2YWwoYXR0ci5uZ0NoYW5nZSk7fSk7fX0pO3ZhciByZXF1aXJlZERpcmVjdGl2ZT1mdW5jdGlvbigpe3JldHVybntyZXF1aXJlOic/bmdNb2RlbCcsbGluazpmdW5jdGlvbihzY29wZSxlbG0sYXR0cixjdHJsKXtpZighY3RybClyZXR1cm47YXR0ci5yZXF1aXJlZD10cnVlO3ZhciB2YWxpZGF0b3I9ZnVuY3Rpb24odmFsdWUpe2lmKGF0dHIucmVxdWlyZWQmJmN0cmwuJGlzRW1wdHkodmFsdWUpKXtjdHJsLiRzZXRWYWxpZGl0eSgncmVxdWlyZWQnLGZhbHNlKTtyZXR1cm47fWVsc2V7Y3RybC4kc2V0VmFsaWRpdHkoJ3JlcXVpcmVkJyx0cnVlKTtyZXR1cm4gdmFsdWU7fX07Y3RybC4kZm9ybWF0dGVycy5wdXNoKHZhbGlkYXRvcik7Y3RybC4kcGFyc2Vycy51bnNoaWZ0KHZhbGlkYXRvcik7YXR0ci4kb2JzZXJ2ZSgncmVxdWlyZWQnLGZ1bmN0aW9uKCl7dmFsaWRhdG9yKGN0cmwuJHZpZXdWYWx1ZSk7fSk7fX07fTt2YXIgbmdMaXN0RGlyZWN0aXZlPWZ1bmN0aW9uKCl7cmV0dXJue3JlcXVpcmU6J25nTW9kZWwnLGxpbms6ZnVuY3Rpb24oc2NvcGUsZWxlbWVudCxhdHRyLGN0cmwpe3ZhciBtYXRjaD0vXC8oLiopXC8vLmV4ZWMoYXR0ci5uZ0xpc3QpLHNlcGFyYXRvcj1tYXRjaCYmbmV3IFJlZ0V4cChtYXRjaFsxXSl8fGF0dHIubmdMaXN0fHwnLCc7dmFyIHBhcnNlPWZ1bmN0aW9uKHZpZXdWYWx1ZSl7aWYoaXNVbmRlZmluZWQodmlld1ZhbHVlKSlyZXR1cm47dmFyIGxpc3Q9W107aWYodmlld1ZhbHVlKXtmb3JFYWNoKHZpZXdWYWx1ZS5zcGxpdChzZXBhcmF0b3IpLGZ1bmN0aW9uKHZhbHVlKXtpZih2YWx1ZSlsaXN0LnB1c2godHJpbSh2YWx1ZSkpO30pO30KcmV0dXJuIGxpc3Q7fTtjdHJsLiRwYXJzZXJzLnB1c2gocGFyc2UpO2N0cmwuJGZvcm1hdHRlcnMucHVzaChmdW5jdGlvbih2YWx1ZSl7aWYoaXNBcnJheSh2YWx1ZSkpe3JldHVybiB2YWx1ZS5qb2luKCcsICcpO30KcmV0dXJuIHVuZGVmaW5lZDt9KTtjdHJsLiRpc0VtcHR5PWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4hdmFsdWV8fCF2YWx1ZS5sZW5ndGg7fTt9fTt9O3ZhciBDT05TVEFOVF9WQUxVRV9SRUdFWFA9L14odHJ1ZXxmYWxzZXxcZCspJC87dmFyIG5nVmFsdWVEaXJlY3RpdmU9ZnVuY3Rpb24oKXtyZXR1cm57cHJpb3JpdHk6MTAwLGNvbXBpbGU6ZnVuY3Rpb24odHBsLHRwbEF0dHIpe2lmKENPTlNUQU5UX1ZBTFVFX1JFR0VYUC50ZXN0KHRwbEF0dHIubmdWYWx1ZSkpe3JldHVybiBmdW5jdGlvbiBuZ1ZhbHVlQ29uc3RhbnRMaW5rKHNjb3BlLGVsbSxhdHRyKXthdHRyLiRzZXQoJ3ZhbHVlJyxzY29wZS4kZXZhbChhdHRyLm5nVmFsdWUpKTt9O31lbHNle3JldHVybiBmdW5jdGlvbiBuZ1ZhbHVlTGluayhzY29wZSxlbG0sYXR0cil7c2NvcGUuJHdhdGNoKGF0dHIubmdWYWx1ZSxmdW5jdGlvbiB2YWx1ZVdhdGNoQWN0aW9uKHZhbHVlKXthdHRyLiRzZXQoJ3ZhbHVlJyx2YWx1ZSk7fSk7fTt9fX07fTt2YXIgbmdCaW5kRGlyZWN0aXZlPW5nRGlyZWN0aXZlKHtjb21waWxlOmZ1bmN0aW9uKHRlbXBsYXRlRWxlbWVudCl7dGVtcGxhdGVFbGVtZW50LmFkZENsYXNzKCduZy1iaW5kaW5nJyk7cmV0dXJuIGZ1bmN0aW9uKHNjb3BlLGVsZW1lbnQsYXR0cil7ZWxlbWVudC5kYXRhKCckYmluZGluZycsYXR0ci5uZ0JpbmQpO3Njb3BlLiR3YXRjaChhdHRyLm5nQmluZCxmdW5jdGlvbiBuZ0JpbmRXYXRjaEFjdGlvbih2YWx1ZSl7ZWxlbWVudC50ZXh0KHZhbHVlPT11bmRlZmluZWQ/Jyc6dmFsdWUpO30pO307fX0pO3ZhciBuZ0JpbmRUZW1wbGF0ZURpcmVjdGl2ZT1bJyRpbnRlcnBvbGF0ZScsZnVuY3Rpb24oJGludGVycG9sYXRlKXtyZXR1cm4gZnVuY3Rpb24oc2NvcGUsZWxlbWVudCxhdHRyKXt2YXIgaW50ZXJwb2xhdGVGbj0kaW50ZXJwb2xhdGUoZWxlbWVudC5hdHRyKGF0dHIuJGF0dHIubmdCaW5kVGVtcGxhdGUpKTtlbGVtZW50LmFkZENsYXNzKCduZy1iaW5kaW5nJykuZGF0YSgnJGJpbmRpbmcnLGludGVycG9sYXRlRm4pO2F0dHIuJG9ic2VydmUoJ25nQmluZFRlbXBsYXRlJyxmdW5jdGlvbih2YWx1ZSl7ZWxlbWVudC50ZXh0KHZhbHVlKTt9KTt9O31dO3ZhciBuZ0JpbmRIdG1sRGlyZWN0aXZlPVsnJHNjZScsJyRwYXJzZScsZnVuY3Rpb24oJHNjZSwkcGFyc2Upe3JldHVybiBmdW5jdGlvbihzY29wZSxlbGVtZW50LGF0dHIpe2VsZW1lbnQuYWRkQ2xhc3MoJ25nLWJpbmRpbmcnKS5kYXRhKCckYmluZGluZycsYXR0ci5uZ0JpbmRIdG1sKTt2YXIgcGFyc2VkPSRwYXJzZShhdHRyLm5nQmluZEh0bWwpO2Z1bmN0aW9uIGdldFN0cmluZ1ZhbHVlKCl7cmV0dXJuKHBhcnNlZChzY29wZSl8fCcnKS50b1N0cmluZygpO30Kc2NvcGUuJHdhdGNoKGdldFN0cmluZ1ZhbHVlLGZ1bmN0aW9uIG5nQmluZEh0bWxXYXRjaEFjdGlvbih2YWx1ZSl7ZWxlbWVudC5odG1sKCRzY2UuZ2V0VHJ1c3RlZEh0bWwocGFyc2VkKHNjb3BlKSl8fCcnKTt9KTt9O31dO2Z1bmN0aW9uIGNsYXNzRGlyZWN0aXZlKG5hbWUsc2VsZWN0b3Ipe25hbWU9J25nQ2xhc3MnK25hbWU7cmV0dXJuWyckYW5pbWF0ZScsZnVuY3Rpb24oJGFuaW1hdGUpe3JldHVybntyZXN0cmljdDonQUMnLGxpbms6ZnVuY3Rpb24oc2NvcGUsZWxlbWVudCxhdHRyKXt2YXIgb2xkVmFsO3Njb3BlLiR3YXRjaChhdHRyW25hbWVdLG5nQ2xhc3NXYXRjaEFjdGlvbix0cnVlKTthdHRyLiRvYnNlcnZlKCdjbGFzcycsZnVuY3Rpb24odmFsdWUpe25nQ2xhc3NXYXRjaEFjdGlvbihzY29wZS4kZXZhbChhdHRyW25hbWVdKSk7fSk7aWYobmFtZSE9PSduZ0NsYXNzJyl7c2NvcGUuJHdhdGNoKCckaW5kZXgnLGZ1bmN0aW9uKCRpbmRleCxvbGQkaW5kZXgpe3ZhciBtb2Q9JGluZGV4JjE7aWYobW9kIT09KG9sZCRpbmRleCYxKSl7dmFyIGNsYXNzZXM9YXJyYXlDbGFzc2VzKHNjb3BlLiRldmFsKGF0dHJbbmFtZV0pKTttb2Q9PT1zZWxlY3Rvcj9hZGRDbGFzc2VzKGNsYXNzZXMpOnJlbW92ZUNsYXNzZXMoY2xhc3Nlcyk7fX0pO30KZnVuY3Rpb24gYWRkQ2xhc3NlcyhjbGFzc2VzKXt2YXIgbmV3Q2xhc3Nlcz1kaWdlc3RDbGFzc0NvdW50cyhjbGFzc2VzLDEpO2F0dHIuJGFkZENsYXNzKG5ld0NsYXNzZXMpO30KZnVuY3Rpb24gcmVtb3ZlQ2xhc3NlcyhjbGFzc2VzKXt2YXIgbmV3Q2xhc3Nlcz1kaWdlc3RDbGFzc0NvdW50cyhjbGFzc2VzLC0xKTthdHRyLiRyZW1vdmVDbGFzcyhuZXdDbGFzc2VzKTt9CmZ1bmN0aW9uIGRpZ2VzdENsYXNzQ291bnRzKGNsYXNzZXMsY291bnQpe3ZhciBjbGFzc0NvdW50cz1lbGVtZW50LmRhdGEoJyRjbGFzc0NvdW50cycpfHx7fTt2YXIgY2xhc3Nlc1RvVXBkYXRlPVtdO2ZvckVhY2goY2xhc3NlcyxmdW5jdGlvbihjbGFzc05hbWUpe2lmKGNvdW50PjB8fGNsYXNzQ291bnRzW2NsYXNzTmFtZV0pe2NsYXNzQ291bnRzW2NsYXNzTmFtZV09KGNsYXNzQ291bnRzW2NsYXNzTmFtZV18fDApK2NvdW50O2lmKGNsYXNzQ291bnRzW2NsYXNzTmFtZV09PT0rKGNvdW50PjApKXtjbGFzc2VzVG9VcGRhdGUucHVzaChjbGFzc05hbWUpO319fSk7ZWxlbWVudC5kYXRhKCckY2xhc3NDb3VudHMnLGNsYXNzQ291bnRzKTtyZXR1cm4gY2xhc3Nlc1RvVXBkYXRlLmpvaW4oJyAnKTt9CmZ1bmN0aW9uIHVwZGF0ZUNsYXNzZXMob2xkQ2xhc3NlcyxuZXdDbGFzc2VzKXt2YXIgdG9BZGQ9YXJyYXlEaWZmZXJlbmNlKG5ld0NsYXNzZXMsb2xkQ2xhc3Nlcyk7dmFyIHRvUmVtb3ZlPWFycmF5RGlmZmVyZW5jZShvbGRDbGFzc2VzLG5ld0NsYXNzZXMpO3RvUmVtb3ZlPWRpZ2VzdENsYXNzQ291bnRzKHRvUmVtb3ZlLC0xKTt0b0FkZD1kaWdlc3RDbGFzc0NvdW50cyh0b0FkZCwxKTtpZih0b0FkZC5sZW5ndGg9PT0wKXskYW5pbWF0ZS5yZW1vdmVDbGFzcyhlbGVtZW50LHRvUmVtb3ZlKTt9ZWxzZSBpZih0b1JlbW92ZS5sZW5ndGg9PT0wKXskYW5pbWF0ZS5hZGRDbGFzcyhlbGVtZW50LHRvQWRkKTt9ZWxzZXskYW5pbWF0ZS5zZXRDbGFzcyhlbGVtZW50LHRvQWRkLHRvUmVtb3ZlKTt9fQpmdW5jdGlvbiBuZ0NsYXNzV2F0Y2hBY3Rpb24obmV3VmFsKXtpZihzZWxlY3Rvcj09PXRydWV8fHNjb3BlLiRpbmRleCUyPT09c2VsZWN0b3Ipe3ZhciBuZXdDbGFzc2VzPWFycmF5Q2xhc3NlcyhuZXdWYWx8fFtdKTtpZighb2xkVmFsKXthZGRDbGFzc2VzKG5ld0NsYXNzZXMpO31lbHNlIGlmKCFlcXVhbHMobmV3VmFsLG9sZFZhbCkpe3ZhciBvbGRDbGFzc2VzPWFycmF5Q2xhc3NlcyhvbGRWYWwpO3VwZGF0ZUNsYXNzZXMob2xkQ2xhc3NlcyxuZXdDbGFzc2VzKTt9fQpvbGRWYWw9c2hhbGxvd0NvcHkobmV3VmFsKTt9fX07ZnVuY3Rpb24gYXJyYXlEaWZmZXJlbmNlKHRva2VuczEsdG9rZW5zMil7dmFyIHZhbHVlcz1bXTtvdXRlcjpmb3IodmFyIGk9MDtpPHRva2VuczEubGVuZ3RoO2krKyl7dmFyIHRva2VuPXRva2VuczFbaV07Zm9yKHZhciBqPTA7ajx0b2tlbnMyLmxlbmd0aDtqKyspe2lmKHRva2VuPT10b2tlbnMyW2pdKWNvbnRpbnVlIG91dGVyO30KdmFsdWVzLnB1c2godG9rZW4pO30KcmV0dXJuIHZhbHVlczt9CmZ1bmN0aW9uIGFycmF5Q2xhc3NlcyhjbGFzc1ZhbCl7aWYoaXNBcnJheShjbGFzc1ZhbCkpe3JldHVybiBjbGFzc1ZhbDt9ZWxzZSBpZihpc1N0cmluZyhjbGFzc1ZhbCkpe3JldHVybiBjbGFzc1ZhbC5zcGxpdCgnICcpO31lbHNlIGlmKGlzT2JqZWN0KGNsYXNzVmFsKSl7dmFyIGNsYXNzZXM9W10saT0wO2ZvckVhY2goY2xhc3NWYWwsZnVuY3Rpb24odixrKXtpZih2KXtjbGFzc2VzPWNsYXNzZXMuY29uY2F0KGsuc3BsaXQoJyAnKSk7fX0pO3JldHVybiBjbGFzc2VzO30KcmV0dXJuIGNsYXNzVmFsO319XTt9CnZhciBuZ0NsYXNzRGlyZWN0aXZlPWNsYXNzRGlyZWN0aXZlKCcnLHRydWUpO3ZhciBuZ0NsYXNzT2RkRGlyZWN0aXZlPWNsYXNzRGlyZWN0aXZlKCdPZGQnLDApO3ZhciBuZ0NsYXNzRXZlbkRpcmVjdGl2ZT1jbGFzc0RpcmVjdGl2ZSgnRXZlbicsMSk7dmFyIG5nQ2xvYWtEaXJlY3RpdmU9bmdEaXJlY3RpdmUoe2NvbXBpbGU6ZnVuY3Rpb24oZWxlbWVudCxhdHRyKXthdHRyLiRzZXQoJ25nQ2xvYWsnLHVuZGVmaW5lZCk7ZWxlbWVudC5yZW1vdmVDbGFzcygnbmctY2xvYWsnKTt9fSk7dmFyIG5nQ29udHJvbGxlckRpcmVjdGl2ZT1bZnVuY3Rpb24oKXtyZXR1cm57c2NvcGU6dHJ1ZSxjb250cm9sbGVyOidAJyxwcmlvcml0eTo1MDB9O31dO3ZhciBuZ0V2ZW50RGlyZWN0aXZlcz17fTtmb3JFYWNoKCdjbGljayBkYmxjbGljayBtb3VzZWRvd24gbW91c2V1cCBtb3VzZW92ZXIgbW91c2VvdXQgbW91c2Vtb3ZlIG1vdXNlZW50ZXIgbW91c2VsZWF2ZSBrZXlkb3duIGtleXVwIGtleXByZXNzIHN1Ym1pdCBmb2N1cyBibHVyIGNvcHkgY3V0IHBhc3RlJy5zcGxpdCgnICcpLGZ1bmN0aW9uKG5hbWUpe3ZhciBkaXJlY3RpdmVOYW1lPWRpcmVjdGl2ZU5vcm1hbGl6ZSgnbmctJytuYW1lKTtuZ0V2ZW50RGlyZWN0aXZlc1tkaXJlY3RpdmVOYW1lXT1bJyRwYXJzZScsZnVuY3Rpb24oJHBhcnNlKXtyZXR1cm57Y29tcGlsZTpmdW5jdGlvbigkZWxlbWVudCxhdHRyKXt2YXIgZm49JHBhcnNlKGF0dHJbZGlyZWN0aXZlTmFtZV0pO3JldHVybiBmdW5jdGlvbiBuZ0V2ZW50SGFuZGxlcihzY29wZSxlbGVtZW50KXtlbGVtZW50Lm9uKGxvd2VyY2FzZShuYW1lKSxmdW5jdGlvbihldmVudCl7c2NvcGUuJGFwcGx5KGZ1bmN0aW9uKCl7Zm4oc2NvcGUseyRldmVudDpldmVudH0pO30pO30pO307fX07fV07fSk7dmFyIG5nSWZEaXJlY3RpdmU9WyckYW5pbWF0ZScsZnVuY3Rpb24oJGFuaW1hdGUpe3JldHVybnt0cmFuc2NsdWRlOidlbGVtZW50Jyxwcmlvcml0eTo2MDAsdGVybWluYWw6dHJ1ZSxyZXN0cmljdDonQScsJCR0bGI6dHJ1ZSxsaW5rOmZ1bmN0aW9uKCRzY29wZSwkZWxlbWVudCwkYXR0cixjdHJsLCR0cmFuc2NsdWRlKXt2YXIgYmxvY2ssY2hpbGRTY29wZSxwcmV2aW91c0VsZW1lbnRzOyRzY29wZS4kd2F0Y2goJGF0dHIubmdJZixmdW5jdGlvbiBuZ0lmV2F0Y2hBY3Rpb24odmFsdWUpe2lmKHRvQm9vbGVhbih2YWx1ZSkpe2lmKCFjaGlsZFNjb3BlKXtjaGlsZFNjb3BlPSRzY29wZS4kbmV3KCk7JHRyYW5zY2x1ZGUoY2hpbGRTY29wZSxmdW5jdGlvbihjbG9uZSl7Y2xvbmVbY2xvbmUubGVuZ3RoKytdPWRvY3VtZW50LmNyZWF0ZUNvbW1lbnQoJyBlbmQgbmdJZjogJyskYXR0ci5uZ0lmKycgJyk7YmxvY2s9e2Nsb25lOmNsb25lfTskYW5pbWF0ZS5lbnRlcihjbG9uZSwkZWxlbWVudC5wYXJlbnQoKSwkZWxlbWVudCk7fSk7fX1lbHNle2lmKHByZXZpb3VzRWxlbWVudHMpe3ByZXZpb3VzRWxlbWVudHMucmVtb3ZlKCk7cHJldmlvdXNFbGVtZW50cz1udWxsO30KaWYoY2hpbGRTY29wZSl7Y2hpbGRTY29wZS4kZGVzdHJveSgpO2NoaWxkU2NvcGU9bnVsbDt9CmlmKGJsb2NrKXtwcmV2aW91c0VsZW1lbnRzPWdldEJsb2NrRWxlbWVudHMoYmxvY2suY2xvbmUpOyRhbmltYXRlLmxlYXZlKHByZXZpb3VzRWxlbWVudHMsZnVuY3Rpb24oKXtwcmV2aW91c0VsZW1lbnRzPW51bGw7fSk7YmxvY2s9bnVsbDt9fX0pO319O31dO3ZhciBuZ0luY2x1ZGVEaXJlY3RpdmU9WyckaHR0cCcsJyR0ZW1wbGF0ZUNhY2hlJywnJGFuY2hvclNjcm9sbCcsJyRhbmltYXRlJywnJHNjZScsZnVuY3Rpb24oJGh0dHAsJHRlbXBsYXRlQ2FjaGUsJGFuY2hvclNjcm9sbCwkYW5pbWF0ZSwkc2NlKXtyZXR1cm57cmVzdHJpY3Q6J0VDQScscHJpb3JpdHk6NDAwLHRlcm1pbmFsOnRydWUsdHJhbnNjbHVkZTonZWxlbWVudCcsY29udHJvbGxlcjphbmd1bGFyLm5vb3AsY29tcGlsZTpmdW5jdGlvbihlbGVtZW50LGF0dHIpe3ZhciBzcmNFeHA9YXR0ci5uZ0luY2x1ZGV8fGF0dHIuc3JjLG9ubG9hZEV4cD1hdHRyLm9ubG9hZHx8JycsYXV0b1Njcm9sbEV4cD1hdHRyLmF1dG9zY3JvbGw7cmV0dXJuIGZ1bmN0aW9uKHNjb3BlLCRlbGVtZW50LCRhdHRyLGN0cmwsJHRyYW5zY2x1ZGUpe3ZhciBjaGFuZ2VDb3VudGVyPTAsY3VycmVudFNjb3BlLHByZXZpb3VzRWxlbWVudCxjdXJyZW50RWxlbWVudDt2YXIgY2xlYW51cExhc3RJbmNsdWRlQ29udGVudD1mdW5jdGlvbigpe2lmKHByZXZpb3VzRWxlbWVudCl7cHJldmlvdXNFbGVtZW50LnJlbW92ZSgpO3ByZXZpb3VzRWxlbWVudD1udWxsO30KaWYoY3VycmVudFNjb3BlKXtjdXJyZW50U2NvcGUuJGRlc3Ryb3koKTtjdXJyZW50U2NvcGU9bnVsbDt9CmlmKGN1cnJlbnRFbGVtZW50KXskYW5pbWF0ZS5sZWF2ZShjdXJyZW50RWxlbWVudCxmdW5jdGlvbigpe3ByZXZpb3VzRWxlbWVudD1udWxsO30pO3ByZXZpb3VzRWxlbWVudD1jdXJyZW50RWxlbWVudDtjdXJyZW50RWxlbWVudD1udWxsO319O3Njb3BlLiR3YXRjaCgkc2NlLnBhcnNlQXNSZXNvdXJjZVVybChzcmNFeHApLGZ1bmN0aW9uIG5nSW5jbHVkZVdhdGNoQWN0aW9uKHNyYyl7dmFyIGFmdGVyQW5pbWF0aW9uPWZ1bmN0aW9uKCl7aWYoaXNEZWZpbmVkKGF1dG9TY3JvbGxFeHApJiYoIWF1dG9TY3JvbGxFeHB8fHNjb3BlLiRldmFsKGF1dG9TY3JvbGxFeHApKSl7JGFuY2hvclNjcm9sbCgpO319O3ZhciB0aGlzQ2hhbmdlSWQ9KytjaGFuZ2VDb3VudGVyO2lmKHNyYyl7JGh0dHAuZ2V0KHNyYyx7Y2FjaGU6JHRlbXBsYXRlQ2FjaGV9KS5zdWNjZXNzKGZ1bmN0aW9uKHJlc3BvbnNlKXtpZih0aGlzQ2hhbmdlSWQhPT1jaGFuZ2VDb3VudGVyKXJldHVybjt2YXIgbmV3U2NvcGU9c2NvcGUuJG5ldygpO2N0cmwudGVtcGxhdGU9cmVzcG9uc2U7dmFyIGNsb25lPSR0cmFuc2NsdWRlKG5ld1Njb3BlLGZ1bmN0aW9uKGNsb25lKXtjbGVhbnVwTGFzdEluY2x1ZGVDb250ZW50KCk7JGFuaW1hdGUuZW50ZXIoY2xvbmUsbnVsbCwkZWxlbWVudCxhZnRlckFuaW1hdGlvbik7fSk7Y3VycmVudFNjb3BlPW5ld1Njb3BlO2N1cnJlbnRFbGVtZW50PWNsb25lO2N1cnJlbnRTY29wZS4kZW1pdCgnJGluY2x1ZGVDb250ZW50TG9hZGVkJyk7c2NvcGUuJGV2YWwob25sb2FkRXhwKTt9KS5lcnJvcihmdW5jdGlvbigpe2lmKHRoaXNDaGFuZ2VJZD09PWNoYW5nZUNvdW50ZXIpY2xlYW51cExhc3RJbmNsdWRlQ29udGVudCgpO30pO3Njb3BlLiRlbWl0KCckaW5jbHVkZUNvbnRlbnRSZXF1ZXN0ZWQnKTt9ZWxzZXtjbGVhbnVwTGFzdEluY2x1ZGVDb250ZW50KCk7Y3RybC50ZW1wbGF0ZT1udWxsO319KTt9O319O31dO3ZhciBuZ0luY2x1ZGVGaWxsQ29udGVudERpcmVjdGl2ZT1bJyRjb21waWxlJyxmdW5jdGlvbigkY29tcGlsZSl7cmV0dXJue3Jlc3RyaWN0OidFQ0EnLHByaW9yaXR5Oi00MDAscmVxdWlyZTonbmdJbmNsdWRlJyxsaW5rOmZ1bmN0aW9uKHNjb3BlLCRlbGVtZW50LCRhdHRyLGN0cmwpeyRlbGVtZW50Lmh0bWwoY3RybC50ZW1wbGF0ZSk7JGNvbXBpbGUoJGVsZW1lbnQuY29udGVudHMoKSkoc2NvcGUpO319O31dO3ZhciBuZ0luaXREaXJlY3RpdmU9bmdEaXJlY3RpdmUoe3ByaW9yaXR5OjQ1MCxjb21waWxlOmZ1bmN0aW9uKCl7cmV0dXJue3ByZTpmdW5jdGlvbihzY29wZSxlbGVtZW50LGF0dHJzKXtzY29wZS4kZXZhbChhdHRycy5uZ0luaXQpO319O319KTt2YXIgbmdOb25CaW5kYWJsZURpcmVjdGl2ZT1uZ0RpcmVjdGl2ZSh7dGVybWluYWw6dHJ1ZSxwcmlvcml0eToxMDAwfSk7dmFyIG5nUGx1cmFsaXplRGlyZWN0aXZlPVsnJGxvY2FsZScsJyRpbnRlcnBvbGF0ZScsZnVuY3Rpb24oJGxvY2FsZSwkaW50ZXJwb2xhdGUpe3ZhciBCUkFDRT0ve30vZztyZXR1cm57cmVzdHJpY3Q6J0VBJyxsaW5rOmZ1bmN0aW9uKHNjb3BlLGVsZW1lbnQsYXR0cil7dmFyIG51bWJlckV4cD1hdHRyLmNvdW50LHdoZW5FeHA9YXR0ci4kYXR0ci53aGVuJiZlbGVtZW50LmF0dHIoYXR0ci4kYXR0ci53aGVuKSxvZmZzZXQ9YXR0ci5vZmZzZXR8fDAsd2hlbnM9c2NvcGUuJGV2YWwod2hlbkV4cCl8fHt9LHdoZW5zRXhwRm5zPXt9LHN0YXJ0U3ltYm9sPSRpbnRlcnBvbGF0ZS5zdGFydFN5bWJvbCgpLGVuZFN5bWJvbD0kaW50ZXJwb2xhdGUuZW5kU3ltYm9sKCksaXNXaGVuPS9ed2hlbihNaW51cyk/KC4rKSQvO2ZvckVhY2goYXR0cixmdW5jdGlvbihleHByZXNzaW9uLGF0dHJpYnV0ZU5hbWUpe2lmKGlzV2hlbi50ZXN0KGF0dHJpYnV0ZU5hbWUpKXt3aGVuc1tsb3dlcmNhc2UoYXR0cmlidXRlTmFtZS5yZXBsYWNlKCd3aGVuJywnJykucmVwbGFjZSgnTWludXMnLCctJykpXT1lbGVtZW50LmF0dHIoYXR0ci4kYXR0clthdHRyaWJ1dGVOYW1lXSk7fX0pO2ZvckVhY2god2hlbnMsZnVuY3Rpb24oZXhwcmVzc2lvbixrZXkpe3doZW5zRXhwRm5zW2tleV09JGludGVycG9sYXRlKGV4cHJlc3Npb24ucmVwbGFjZShCUkFDRSxzdGFydFN5bWJvbCtudW1iZXJFeHArJy0nKwpvZmZzZXQrZW5kU3ltYm9sKSk7fSk7c2NvcGUuJHdhdGNoKGZ1bmN0aW9uIG5nUGx1cmFsaXplV2F0Y2goKXt2YXIgdmFsdWU9cGFyc2VGbG9hdChzY29wZS4kZXZhbChudW1iZXJFeHApKTtpZighaXNOYU4odmFsdWUpKXtpZighKHZhbHVlIGluIHdoZW5zKSl2YWx1ZT0kbG9jYWxlLnBsdXJhbENhdCh2YWx1ZS1vZmZzZXQpO3JldHVybiB3aGVuc0V4cEZuc1t2YWx1ZV0oc2NvcGUsZWxlbWVudCx0cnVlKTt9ZWxzZXtyZXR1cm4nJzt9fSxmdW5jdGlvbiBuZ1BsdXJhbGl6ZVdhdGNoQWN0aW9uKG5ld1ZhbCl7ZWxlbWVudC50ZXh0KG5ld1ZhbCk7fSk7fX07fV07dmFyIG5nUmVwZWF0RGlyZWN0aXZlPVsnJHBhcnNlJywnJGFuaW1hdGUnLGZ1bmN0aW9uKCRwYXJzZSwkYW5pbWF0ZSl7dmFyIE5HX1JFTU9WRUQ9JyQkTkdfUkVNT1ZFRCc7dmFyIG5nUmVwZWF0TWluRXJyPW1pbkVycignbmdSZXBlYXQnKTtyZXR1cm57dHJhbnNjbHVkZTonZWxlbWVudCcscHJpb3JpdHk6MTAwMCx0ZXJtaW5hbDp0cnVlLCQkdGxiOnRydWUsbGluazpmdW5jdGlvbigkc2NvcGUsJGVsZW1lbnQsJGF0dHIsY3RybCwkdHJhbnNjbHVkZSl7dmFyIGV4cHJlc3Npb249JGF0dHIubmdSZXBlYXQ7dmFyIG1hdGNoPWV4cHJlc3Npb24ubWF0Y2goL15ccyooW1xzXFNdKz8pXHMraW5ccysoW1xzXFNdKz8pKD86XHMrdHJhY2tccytieVxzKyhbXHNcU10rPykpP1xzKiQvKSx0cmFja0J5RXhwLHRyYWNrQnlFeHBHZXR0ZXIsdHJhY2tCeUlkRXhwRm4sdHJhY2tCeUlkQXJyYXlGbix0cmFja0J5SWRPYmpGbixsaHMscmhzLHZhbHVlSWRlbnRpZmllcixrZXlJZGVudGlmaWVyLGhhc2hGbkxvY2Fscz17JGlkOmhhc2hLZXl9O2lmKCFtYXRjaCl7dGhyb3cgbmdSZXBlYXRNaW5FcnIoJ2lleHAnLCJFeHBlY3RlZCBleHByZXNzaW9uIGluIGZvcm0gb2YgJ19pdGVtXyBpbiBfY29sbGVjdGlvbl9bIHRyYWNrIGJ5IF9pZF9dJyBidXQgZ290ICd7MH0nLiIsZXhwcmVzc2lvbik7fQpsaHM9bWF0Y2hbMV07cmhzPW1hdGNoWzJdO3RyYWNrQnlFeHA9bWF0Y2hbM107aWYodHJhY2tCeUV4cCl7dHJhY2tCeUV4cEdldHRlcj0kcGFyc2UodHJhY2tCeUV4cCk7dHJhY2tCeUlkRXhwRm49ZnVuY3Rpb24oa2V5LHZhbHVlLGluZGV4KXtpZihrZXlJZGVudGlmaWVyKWhhc2hGbkxvY2Fsc1trZXlJZGVudGlmaWVyXT1rZXk7aGFzaEZuTG9jYWxzW3ZhbHVlSWRlbnRpZmllcl09dmFsdWU7aGFzaEZuTG9jYWxzLiRpbmRleD1pbmRleDtyZXR1cm4gdHJhY2tCeUV4cEdldHRlcigkc2NvcGUsaGFzaEZuTG9jYWxzKTt9O31lbHNle3RyYWNrQnlJZEFycmF5Rm49ZnVuY3Rpb24oa2V5LHZhbHVlKXtyZXR1cm4gaGFzaEtleSh2YWx1ZSk7fTt0cmFja0J5SWRPYmpGbj1mdW5jdGlvbihrZXkpe3JldHVybiBrZXk7fTt9Cm1hdGNoPWxocy5tYXRjaCgvXig/OihbXCRcd10rKXxcKChbXCRcd10rKVxzKixccyooW1wkXHddKylcKSkkLyk7aWYoIW1hdGNoKXt0aHJvdyBuZ1JlcGVhdE1pbkVycignaWlkZXhwJywiJ19pdGVtXycgaW4gJ19pdGVtXyBpbiBfY29sbGVjdGlvbl8nIHNob3VsZCBiZSBhbiBpZGVudGlmaWVyIG9yICcoX2tleV8sIF92YWx1ZV8pJyBleHByZXNzaW9uLCBidXQgZ290ICd7MH0nLiIsbGhzKTt9CnZhbHVlSWRlbnRpZmllcj1tYXRjaFszXXx8bWF0Y2hbMV07a2V5SWRlbnRpZmllcj1tYXRjaFsyXTt2YXIgbGFzdEJsb2NrTWFwPXt9OyRzY29wZS4kd2F0Y2hDb2xsZWN0aW9uKHJocyxmdW5jdGlvbiBuZ1JlcGVhdEFjdGlvbihjb2xsZWN0aW9uKXt2YXIgaW5kZXgsbGVuZ3RoLHByZXZpb3VzTm9kZT0kZWxlbWVudFswXSxuZXh0Tm9kZSxuZXh0QmxvY2tNYXA9e30sYXJyYXlMZW5ndGgsY2hpbGRTY29wZSxrZXksdmFsdWUsdHJhY2tCeUlkLHRyYWNrQnlJZEZuLGNvbGxlY3Rpb25LZXlzLGJsb2NrLG5leHRCbG9ja09yZGVyPVtdLGVsZW1lbnRzVG9SZW1vdmU7aWYoaXNBcnJheUxpa2UoY29sbGVjdGlvbikpe2NvbGxlY3Rpb25LZXlzPWNvbGxlY3Rpb247dHJhY2tCeUlkRm49dHJhY2tCeUlkRXhwRm58fHRyYWNrQnlJZEFycmF5Rm47fWVsc2V7dHJhY2tCeUlkRm49dHJhY2tCeUlkRXhwRm58fHRyYWNrQnlJZE9iakZuO2NvbGxlY3Rpb25LZXlzPVtdO2ZvcihrZXkgaW4gY29sbGVjdGlvbil7aWYoY29sbGVjdGlvbi5oYXNPd25Qcm9wZXJ0eShrZXkpJiZrZXkuY2hhckF0KDApIT0nJCcpe2NvbGxlY3Rpb25LZXlzLnB1c2goa2V5KTt9fQpjb2xsZWN0aW9uS2V5cy5zb3J0KCk7fQphcnJheUxlbmd0aD1jb2xsZWN0aW9uS2V5cy5sZW5ndGg7bGVuZ3RoPW5leHRCbG9ja09yZGVyLmxlbmd0aD1jb2xsZWN0aW9uS2V5cy5sZW5ndGg7Zm9yKGluZGV4PTA7aW5kZXg8bGVuZ3RoO2luZGV4Kyspe2tleT0oY29sbGVjdGlvbj09PWNvbGxlY3Rpb25LZXlzKT9pbmRleDpjb2xsZWN0aW9uS2V5c1tpbmRleF07dmFsdWU9Y29sbGVjdGlvbltrZXldO3RyYWNrQnlJZD10cmFja0J5SWRGbihrZXksdmFsdWUsaW5kZXgpO2Fzc2VydE5vdEhhc093blByb3BlcnR5KHRyYWNrQnlJZCwnYHRyYWNrIGJ5YCBpZCcpO2lmKGxhc3RCbG9ja01hcC5oYXNPd25Qcm9wZXJ0eSh0cmFja0J5SWQpKXtibG9jaz1sYXN0QmxvY2tNYXBbdHJhY2tCeUlkXTtkZWxldGUgbGFzdEJsb2NrTWFwW3RyYWNrQnlJZF07bmV4dEJsb2NrTWFwW3RyYWNrQnlJZF09YmxvY2s7bmV4dEJsb2NrT3JkZXJbaW5kZXhdPWJsb2NrO31lbHNlIGlmKG5leHRCbG9ja01hcC5oYXNPd25Qcm9wZXJ0eSh0cmFja0J5SWQpKXtmb3JFYWNoKG5leHRCbG9ja09yZGVyLGZ1bmN0aW9uKGJsb2NrKXtpZihibG9jayYmYmxvY2suc2NvcGUpbGFzdEJsb2NrTWFwW2Jsb2NrLmlkXT1ibG9jazt9KTt0aHJvdyBuZ1JlcGVhdE1pbkVycignZHVwZXMnLCJEdXBsaWNhdGVzIGluIGEgcmVwZWF0ZXIgYXJlIG5vdCBhbGxvd2VkLiBVc2UgJ3RyYWNrIGJ5JyBleHByZXNzaW9uIHRvIHNwZWNpZnkgdW5pcXVlIGtleXMuIFJlcGVhdGVyOiB7MH0sIER1cGxpY2F0ZSBrZXk6IHsxfSIsZXhwcmVzc2lvbix0cmFja0J5SWQpO31lbHNle25leHRCbG9ja09yZGVyW2luZGV4XT17aWQ6dHJhY2tCeUlkfTtuZXh0QmxvY2tNYXBbdHJhY2tCeUlkXT1mYWxzZTt9fQpmb3Ioa2V5IGluIGxhc3RCbG9ja01hcCl7aWYobGFzdEJsb2NrTWFwLmhhc093blByb3BlcnR5KGtleSkpe2Jsb2NrPWxhc3RCbG9ja01hcFtrZXldO2VsZW1lbnRzVG9SZW1vdmU9Z2V0QmxvY2tFbGVtZW50cyhibG9jay5jbG9uZSk7JGFuaW1hdGUubGVhdmUoZWxlbWVudHNUb1JlbW92ZSk7Zm9yRWFjaChlbGVtZW50c1RvUmVtb3ZlLGZ1bmN0aW9uKGVsZW1lbnQpe2VsZW1lbnRbTkdfUkVNT1ZFRF09dHJ1ZTt9KTtibG9jay5zY29wZS4kZGVzdHJveSgpO319CmZvcihpbmRleD0wLGxlbmd0aD1jb2xsZWN0aW9uS2V5cy5sZW5ndGg7aW5kZXg8bGVuZ3RoO2luZGV4Kyspe2tleT0oY29sbGVjdGlvbj09PWNvbGxlY3Rpb25LZXlzKT9pbmRleDpjb2xsZWN0aW9uS2V5c1tpbmRleF07dmFsdWU9Y29sbGVjdGlvbltrZXldO2Jsb2NrPW5leHRCbG9ja09yZGVyW2luZGV4XTtpZihuZXh0QmxvY2tPcmRlcltpbmRleC0xXSlwcmV2aW91c05vZGU9Z2V0QmxvY2tFbmQobmV4dEJsb2NrT3JkZXJbaW5kZXgtMV0pO2lmKGJsb2NrLnNjb3BlKXtjaGlsZFNjb3BlPWJsb2NrLnNjb3BlO25leHROb2RlPXByZXZpb3VzTm9kZTtkb3tuZXh0Tm9kZT1uZXh0Tm9kZS5uZXh0U2libGluZzt9d2hpbGUobmV4dE5vZGUmJm5leHROb2RlW05HX1JFTU9WRURdKTtpZihnZXRCbG9ja1N0YXJ0KGJsb2NrKSE9bmV4dE5vZGUpeyRhbmltYXRlLm1vdmUoZ2V0QmxvY2tFbGVtZW50cyhibG9jay5jbG9uZSksbnVsbCxqcUxpdGUocHJldmlvdXNOb2RlKSk7fQpwcmV2aW91c05vZGU9Z2V0QmxvY2tFbmQoYmxvY2spO31lbHNle2NoaWxkU2NvcGU9JHNjb3BlLiRuZXcoKTt9CmNoaWxkU2NvcGVbdmFsdWVJZGVudGlmaWVyXT12YWx1ZTtpZihrZXlJZGVudGlmaWVyKWNoaWxkU2NvcGVba2V5SWRlbnRpZmllcl09a2V5O2NoaWxkU2NvcGUuJGluZGV4PWluZGV4O2NoaWxkU2NvcGUuJGZpcnN0PShpbmRleD09PTApO2NoaWxkU2NvcGUuJGxhc3Q9KGluZGV4PT09KGFycmF5TGVuZ3RoLTEpKTtjaGlsZFNjb3BlLiRtaWRkbGU9IShjaGlsZFNjb3BlLiRmaXJzdHx8Y2hpbGRTY29wZS4kbGFzdCk7Y2hpbGRTY29wZS4kb2RkPSEoY2hpbGRTY29wZS4kZXZlbj0oaW5kZXgmMSk9PT0wKTtpZighYmxvY2suc2NvcGUpeyR0cmFuc2NsdWRlKGNoaWxkU2NvcGUsZnVuY3Rpb24oY2xvbmUpe2Nsb25lW2Nsb25lLmxlbmd0aCsrXT1kb2N1bWVudC5jcmVhdGVDb21tZW50KCcgZW5kIG5nUmVwZWF0OiAnK2V4cHJlc3Npb24rJyAnKTskYW5pbWF0ZS5lbnRlcihjbG9uZSxudWxsLGpxTGl0ZShwcmV2aW91c05vZGUpKTtwcmV2aW91c05vZGU9Y2xvbmU7YmxvY2suc2NvcGU9Y2hpbGRTY29wZTtibG9jay5jbG9uZT1jbG9uZTtuZXh0QmxvY2tNYXBbYmxvY2suaWRdPWJsb2NrO30pO319Cmxhc3RCbG9ja01hcD1uZXh0QmxvY2tNYXA7fSk7fX07ZnVuY3Rpb24gZ2V0QmxvY2tTdGFydChibG9jayl7cmV0dXJuIGJsb2NrLmNsb25lWzBdO30KZnVuY3Rpb24gZ2V0QmxvY2tFbmQoYmxvY2spe3JldHVybiBibG9jay5jbG9uZVtibG9jay5jbG9uZS5sZW5ndGgtMV07fX1dO3ZhciBuZ1Nob3dEaXJlY3RpdmU9WyckYW5pbWF0ZScsZnVuY3Rpb24oJGFuaW1hdGUpe3JldHVybiBmdW5jdGlvbihzY29wZSxlbGVtZW50LGF0dHIpe3Njb3BlLiR3YXRjaChhdHRyLm5nU2hvdyxmdW5jdGlvbiBuZ1Nob3dXYXRjaEFjdGlvbih2YWx1ZSl7JGFuaW1hdGVbdG9Cb29sZWFuKHZhbHVlKT8ncmVtb3ZlQ2xhc3MnOidhZGRDbGFzcyddKGVsZW1lbnQsJ25nLWhpZGUnKTt9KTt9O31dO3ZhciBuZ0hpZGVEaXJlY3RpdmU9WyckYW5pbWF0ZScsZnVuY3Rpb24oJGFuaW1hdGUpe3JldHVybiBmdW5jdGlvbihzY29wZSxlbGVtZW50LGF0dHIpe3Njb3BlLiR3YXRjaChhdHRyLm5nSGlkZSxmdW5jdGlvbiBuZ0hpZGVXYXRjaEFjdGlvbih2YWx1ZSl7JGFuaW1hdGVbdG9Cb29sZWFuKHZhbHVlKT8nYWRkQ2xhc3MnOidyZW1vdmVDbGFzcyddKGVsZW1lbnQsJ25nLWhpZGUnKTt9KTt9O31dO3ZhciBuZ1N0eWxlRGlyZWN0aXZlPW5nRGlyZWN0aXZlKGZ1bmN0aW9uKHNjb3BlLGVsZW1lbnQsYXR0cil7c2NvcGUuJHdhdGNoKGF0dHIubmdTdHlsZSxmdW5jdGlvbiBuZ1N0eWxlV2F0Y2hBY3Rpb24obmV3U3R5bGVzLG9sZFN0eWxlcyl7aWYob2xkU3R5bGVzJiYobmV3U3R5bGVzIT09b2xkU3R5bGVzKSl7Zm9yRWFjaChvbGRTdHlsZXMsZnVuY3Rpb24odmFsLHN0eWxlKXtlbGVtZW50LmNzcyhzdHlsZSwnJyk7fSk7fQppZihuZXdTdHlsZXMpZWxlbWVudC5jc3MobmV3U3R5bGVzKTt9LHRydWUpO30pO3ZhciBuZ1N3aXRjaERpcmVjdGl2ZT1bJyRhbmltYXRlJyxmdW5jdGlvbigkYW5pbWF0ZSl7cmV0dXJue3Jlc3RyaWN0OidFQScscmVxdWlyZTonbmdTd2l0Y2gnLGNvbnRyb2xsZXI6Wyckc2NvcGUnLGZ1bmN0aW9uIG5nU3dpdGNoQ29udHJvbGxlcigpe3RoaXMuY2FzZXM9e307fV0sbGluazpmdW5jdGlvbihzY29wZSxlbGVtZW50LGF0dHIsbmdTd2l0Y2hDb250cm9sbGVyKXt2YXIgd2F0Y2hFeHByPWF0dHIubmdTd2l0Y2h8fGF0dHIub24sc2VsZWN0ZWRUcmFuc2NsdWRlcz1bXSxzZWxlY3RlZEVsZW1lbnRzPVtdLHByZXZpb3VzRWxlbWVudHM9W10sc2VsZWN0ZWRTY29wZXM9W107c2NvcGUuJHdhdGNoKHdhdGNoRXhwcixmdW5jdGlvbiBuZ1N3aXRjaFdhdGNoQWN0aW9uKHZhbHVlKXt2YXIgaSxpaTtmb3IoaT0wLGlpPXByZXZpb3VzRWxlbWVudHMubGVuZ3RoO2k8aWk7KytpKXtwcmV2aW91c0VsZW1lbnRzW2ldLnJlbW92ZSgpO30KcHJldmlvdXNFbGVtZW50cy5sZW5ndGg9MDtmb3IoaT0wLGlpPXNlbGVjdGVkU2NvcGVzLmxlbmd0aDtpPGlpOysraSl7dmFyIHNlbGVjdGVkPXNlbGVjdGVkRWxlbWVudHNbaV07c2VsZWN0ZWRTY29wZXNbaV0uJGRlc3Ryb3koKTtwcmV2aW91c0VsZW1lbnRzW2ldPXNlbGVjdGVkOyRhbmltYXRlLmxlYXZlKHNlbGVjdGVkLGZ1bmN0aW9uKCl7cHJldmlvdXNFbGVtZW50cy5zcGxpY2UoaSwxKTt9KTt9CnNlbGVjdGVkRWxlbWVudHMubGVuZ3RoPTA7c2VsZWN0ZWRTY29wZXMubGVuZ3RoPTA7aWYoKHNlbGVjdGVkVHJhbnNjbHVkZXM9bmdTd2l0Y2hDb250cm9sbGVyLmNhc2VzWychJyt2YWx1ZV18fG5nU3dpdGNoQ29udHJvbGxlci5jYXNlc1snPyddKSl7c2NvcGUuJGV2YWwoYXR0ci5jaGFuZ2UpO2ZvckVhY2goc2VsZWN0ZWRUcmFuc2NsdWRlcyxmdW5jdGlvbihzZWxlY3RlZFRyYW5zY2x1ZGUpe3ZhciBzZWxlY3RlZFNjb3BlPXNjb3BlLiRuZXcoKTtzZWxlY3RlZFNjb3Blcy5wdXNoKHNlbGVjdGVkU2NvcGUpO3NlbGVjdGVkVHJhbnNjbHVkZS50cmFuc2NsdWRlKHNlbGVjdGVkU2NvcGUsZnVuY3Rpb24oY2FzZUVsZW1lbnQpe3ZhciBhbmNob3I9c2VsZWN0ZWRUcmFuc2NsdWRlLmVsZW1lbnQ7c2VsZWN0ZWRFbGVtZW50cy5wdXNoKGNhc2VFbGVtZW50KTskYW5pbWF0ZS5lbnRlcihjYXNlRWxlbWVudCxhbmNob3IucGFyZW50KCksYW5jaG9yKTt9KTt9KTt9fSk7fX07fV07dmFyIG5nU3dpdGNoV2hlbkRpcmVjdGl2ZT1uZ0RpcmVjdGl2ZSh7dHJhbnNjbHVkZTonZWxlbWVudCcscHJpb3JpdHk6ODAwLHJlcXVpcmU6J15uZ1N3aXRjaCcsbGluazpmdW5jdGlvbihzY29wZSxlbGVtZW50LGF0dHJzLGN0cmwsJHRyYW5zY2x1ZGUpe2N0cmwuY2FzZXNbJyEnK2F0dHJzLm5nU3dpdGNoV2hlbl09KGN0cmwuY2FzZXNbJyEnK2F0dHJzLm5nU3dpdGNoV2hlbl18fFtdKTtjdHJsLmNhc2VzWychJythdHRycy5uZ1N3aXRjaFdoZW5dLnB1c2goe3RyYW5zY2x1ZGU6JHRyYW5zY2x1ZGUsZWxlbWVudDplbGVtZW50fSk7fX0pO3ZhciBuZ1N3aXRjaERlZmF1bHREaXJlY3RpdmU9bmdEaXJlY3RpdmUoe3RyYW5zY2x1ZGU6J2VsZW1lbnQnLHByaW9yaXR5OjgwMCxyZXF1aXJlOidebmdTd2l0Y2gnLGxpbms6ZnVuY3Rpb24oc2NvcGUsZWxlbWVudCxhdHRyLGN0cmwsJHRyYW5zY2x1ZGUpe2N0cmwuY2FzZXNbJz8nXT0oY3RybC5jYXNlc1snPyddfHxbXSk7Y3RybC5jYXNlc1snPyddLnB1c2goe3RyYW5zY2x1ZGU6JHRyYW5zY2x1ZGUsZWxlbWVudDplbGVtZW50fSk7fX0pO3ZhciBuZ1RyYW5zY2x1ZGVEaXJlY3RpdmU9bmdEaXJlY3RpdmUoe2xpbms6ZnVuY3Rpb24oJHNjb3BlLCRlbGVtZW50LCRhdHRycyxjb250cm9sbGVyLCR0cmFuc2NsdWRlKXtpZighJHRyYW5zY2x1ZGUpe3Rocm93IG1pbkVycignbmdUcmFuc2NsdWRlJykoJ29ycGhhbicsJ0lsbGVnYWwgdXNlIG9mIG5nVHJhbnNjbHVkZSBkaXJlY3RpdmUgaW4gdGhlIHRlbXBsYXRlISAnKydObyBwYXJlbnQgZGlyZWN0aXZlIHRoYXQgcmVxdWlyZXMgYSB0cmFuc2NsdXNpb24gZm91bmQuICcrJ0VsZW1lbnQ6IHswfScsc3RhcnRpbmdUYWcoJGVsZW1lbnQpKTt9CiR0cmFuc2NsdWRlKGZ1bmN0aW9uKGNsb25lKXskZWxlbWVudC5lbXB0eSgpOyRlbGVtZW50LmFwcGVuZChjbG9uZSk7fSk7fX0pO3ZhciBzY3JpcHREaXJlY3RpdmU9WyckdGVtcGxhdGVDYWNoZScsZnVuY3Rpb24oJHRlbXBsYXRlQ2FjaGUpe3JldHVybntyZXN0cmljdDonRScsdGVybWluYWw6dHJ1ZSxjb21waWxlOmZ1bmN0aW9uKGVsZW1lbnQsYXR0cil7aWYoYXR0ci50eXBlPT0ndGV4dC9uZy10ZW1wbGF0ZScpe3ZhciB0ZW1wbGF0ZVVybD1hdHRyLmlkLHRleHQ9ZWxlbWVudFswXS50ZXh0OyR0ZW1wbGF0ZUNhY2hlLnB1dCh0ZW1wbGF0ZVVybCx0ZXh0KTt9fX07fV07dmFyIG5nT3B0aW9uc01pbkVycj1taW5FcnIoJ25nT3B0aW9ucycpO3ZhciBuZ09wdGlvbnNEaXJlY3RpdmU9dmFsdWVGbih7dGVybWluYWw6dHJ1ZX0pO3ZhciBzZWxlY3REaXJlY3RpdmU9WyckY29tcGlsZScsJyRwYXJzZScsZnVuY3Rpb24oJGNvbXBpbGUsJHBhcnNlKXt2YXIgTkdfT1BUSU9OU19SRUdFWFA9L15ccyooW1xzXFNdKz8pKD86XHMrYXNccysoW1xzXFNdKz8pKT8oPzpccytncm91cFxzK2J5XHMrKFtcc1xTXSs/KSk/XHMrZm9yXHMrKD86KFtcJFx3XVtcJFx3XSopfCg/OlwoXHMqKFtcJFx3XVtcJFx3XSopXHMqLFxzKihbXCRcd11bXCRcd10qKVxzKlwpKSlccytpblxzKyhbXHNcU10rPykoPzpccyt0cmFja1xzK2J5XHMrKFtcc1xTXSs/KSk/JC8sbnVsbE1vZGVsQ3RybD17JHNldFZpZXdWYWx1ZTpub29wfTtyZXR1cm57cmVzdHJpY3Q6J0UnLHJlcXVpcmU6WydzZWxlY3QnLCc/bmdNb2RlbCddLGNvbnRyb2xsZXI6WyckZWxlbWVudCcsJyRzY29wZScsJyRhdHRycycsZnVuY3Rpb24oJGVsZW1lbnQsJHNjb3BlLCRhdHRycyl7dmFyIHNlbGY9dGhpcyxvcHRpb25zTWFwPXt9LG5nTW9kZWxDdHJsPW51bGxNb2RlbEN0cmwsbnVsbE9wdGlvbix1bmtub3duT3B0aW9uO3NlbGYuZGF0YWJvdW5kPSRhdHRycy5uZ01vZGVsO3NlbGYuaW5pdD1mdW5jdGlvbihuZ01vZGVsQ3RybF8sbnVsbE9wdGlvbl8sdW5rbm93bk9wdGlvbl8pe25nTW9kZWxDdHJsPW5nTW9kZWxDdHJsXztudWxsT3B0aW9uPW51bGxPcHRpb25fO3Vua25vd25PcHRpb249dW5rbm93bk9wdGlvbl87fTtzZWxmLmFkZE9wdGlvbj1mdW5jdGlvbih2YWx1ZSl7YXNzZXJ0Tm90SGFzT3duUHJvcGVydHkodmFsdWUsJyJvcHRpb24gdmFsdWUiJyk7b3B0aW9uc01hcFt2YWx1ZV09dHJ1ZTtpZihuZ01vZGVsQ3RybC4kdmlld1ZhbHVlPT12YWx1ZSl7JGVsZW1lbnQudmFsKHZhbHVlKTtpZih1bmtub3duT3B0aW9uLnBhcmVudCgpKXVua25vd25PcHRpb24ucmVtb3ZlKCk7fX07c2VsZi5yZW1vdmVPcHRpb249ZnVuY3Rpb24odmFsdWUpe2lmKHRoaXMuaGFzT3B0aW9uKHZhbHVlKSl7ZGVsZXRlIG9wdGlvbnNNYXBbdmFsdWVdO2lmKG5nTW9kZWxDdHJsLiR2aWV3VmFsdWU9PXZhbHVlKXt0aGlzLnJlbmRlclVua25vd25PcHRpb24odmFsdWUpO319fTtzZWxmLnJlbmRlclVua25vd25PcHRpb249ZnVuY3Rpb24odmFsKXt2YXIgdW5rbm93blZhbD0nPyAnK2hhc2hLZXkodmFsKSsnID8nO3Vua25vd25PcHRpb24udmFsKHVua25vd25WYWwpOyRlbGVtZW50LnByZXBlbmQodW5rbm93bk9wdGlvbik7JGVsZW1lbnQudmFsKHVua25vd25WYWwpO3Vua25vd25PcHRpb24ucHJvcCgnc2VsZWN0ZWQnLHRydWUpO307c2VsZi5oYXNPcHRpb249ZnVuY3Rpb24odmFsdWUpe3JldHVybiBvcHRpb25zTWFwLmhhc093blByb3BlcnR5KHZhbHVlKTt9OyRzY29wZS4kb24oJyRkZXN0cm95JyxmdW5jdGlvbigpe3NlbGYucmVuZGVyVW5rbm93bk9wdGlvbj1ub29wO30pO31dLGxpbms6ZnVuY3Rpb24oc2NvcGUsZWxlbWVudCxhdHRyLGN0cmxzKXtpZighY3RybHNbMV0pcmV0dXJuO3ZhciBzZWxlY3RDdHJsPWN0cmxzWzBdLG5nTW9kZWxDdHJsPWN0cmxzWzFdLG11bHRpcGxlPWF0dHIubXVsdGlwbGUsb3B0aW9uc0V4cD1hdHRyLm5nT3B0aW9ucyxudWxsT3B0aW9uPWZhbHNlLGVtcHR5T3B0aW9uLG9wdGlvblRlbXBsYXRlPWpxTGl0ZShkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKSksb3B0R3JvdXBUZW1wbGF0ZT1qcUxpdGUoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0Z3JvdXAnKSksdW5rbm93bk9wdGlvbj1vcHRpb25UZW1wbGF0ZS5jbG9uZSgpO2Zvcih2YXIgaT0wLGNoaWxkcmVuPWVsZW1lbnQuY2hpbGRyZW4oKSxpaT1jaGlsZHJlbi5sZW5ndGg7aTxpaTtpKyspe2lmKGNoaWxkcmVuW2ldLnZhbHVlPT09Jycpe2VtcHR5T3B0aW9uPW51bGxPcHRpb249Y2hpbGRyZW4uZXEoaSk7YnJlYWs7fX0Kc2VsZWN0Q3RybC5pbml0KG5nTW9kZWxDdHJsLG51bGxPcHRpb24sdW5rbm93bk9wdGlvbik7aWYobXVsdGlwbGUpe25nTW9kZWxDdHJsLiRpc0VtcHR5PWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4hdmFsdWV8fHZhbHVlLmxlbmd0aD09PTA7fTt9CmlmKG9wdGlvbnNFeHApc2V0dXBBc09wdGlvbnMoc2NvcGUsZWxlbWVudCxuZ01vZGVsQ3RybCk7ZWxzZSBpZihtdWx0aXBsZSlzZXR1cEFzTXVsdGlwbGUoc2NvcGUsZWxlbWVudCxuZ01vZGVsQ3RybCk7ZWxzZSBzZXR1cEFzU2luZ2xlKHNjb3BlLGVsZW1lbnQsbmdNb2RlbEN0cmwsc2VsZWN0Q3RybCk7ZnVuY3Rpb24gc2V0dXBBc1NpbmdsZShzY29wZSxzZWxlY3RFbGVtZW50LG5nTW9kZWxDdHJsLHNlbGVjdEN0cmwpe25nTW9kZWxDdHJsLiRyZW5kZXI9ZnVuY3Rpb24oKXt2YXIgdmlld1ZhbHVlPW5nTW9kZWxDdHJsLiR2aWV3VmFsdWU7aWYoc2VsZWN0Q3RybC5oYXNPcHRpb24odmlld1ZhbHVlKSl7aWYodW5rbm93bk9wdGlvbi5wYXJlbnQoKSl1bmtub3duT3B0aW9uLnJlbW92ZSgpO3NlbGVjdEVsZW1lbnQudmFsKHZpZXdWYWx1ZSk7aWYodmlld1ZhbHVlPT09JycpZW1wdHlPcHRpb24ucHJvcCgnc2VsZWN0ZWQnLHRydWUpO31lbHNle2lmKGlzVW5kZWZpbmVkKHZpZXdWYWx1ZSkmJmVtcHR5T3B0aW9uKXtzZWxlY3RFbGVtZW50LnZhbCgnJyk7fWVsc2V7c2VsZWN0Q3RybC5yZW5kZXJVbmtub3duT3B0aW9uKHZpZXdWYWx1ZSk7fX19O3NlbGVjdEVsZW1lbnQub24oJ2NoYW5nZScsZnVuY3Rpb24oKXtzY29wZS4kYXBwbHkoZnVuY3Rpb24oKXtpZih1bmtub3duT3B0aW9uLnBhcmVudCgpKXVua25vd25PcHRpb24ucmVtb3ZlKCk7bmdNb2RlbEN0cmwuJHNldFZpZXdWYWx1ZShzZWxlY3RFbGVtZW50LnZhbCgpKTt9KTt9KTt9CmZ1bmN0aW9uIHNldHVwQXNNdWx0aXBsZShzY29wZSxzZWxlY3RFbGVtZW50LGN0cmwpe3ZhciBsYXN0VmlldztjdHJsLiRyZW5kZXI9ZnVuY3Rpb24oKXt2YXIgaXRlbXM9bmV3IEhhc2hNYXAoY3RybC4kdmlld1ZhbHVlKTtmb3JFYWNoKHNlbGVjdEVsZW1lbnQuZmluZCgnb3B0aW9uJyksZnVuY3Rpb24ob3B0aW9uKXtvcHRpb24uc2VsZWN0ZWQ9aXNEZWZpbmVkKGl0ZW1zLmdldChvcHRpb24udmFsdWUpKTt9KTt9O3Njb3BlLiR3YXRjaChmdW5jdGlvbiBzZWxlY3RNdWx0aXBsZVdhdGNoKCl7aWYoIWVxdWFscyhsYXN0VmlldyxjdHJsLiR2aWV3VmFsdWUpKXtsYXN0Vmlldz1zaGFsbG93Q29weShjdHJsLiR2aWV3VmFsdWUpO2N0cmwuJHJlbmRlcigpO319KTtzZWxlY3RFbGVtZW50Lm9uKCdjaGFuZ2UnLGZ1bmN0aW9uKCl7c2NvcGUuJGFwcGx5KGZ1bmN0aW9uKCl7dmFyIGFycmF5PVtdO2ZvckVhY2goc2VsZWN0RWxlbWVudC5maW5kKCdvcHRpb24nKSxmdW5jdGlvbihvcHRpb24pe2lmKG9wdGlvbi5zZWxlY3RlZCl7YXJyYXkucHVzaChvcHRpb24udmFsdWUpO319KTtjdHJsLiRzZXRWaWV3VmFsdWUoYXJyYXkpO30pO30pO30KZnVuY3Rpb24gc2V0dXBBc09wdGlvbnMoc2NvcGUsc2VsZWN0RWxlbWVudCxjdHJsKXt2YXIgbWF0Y2g7aWYoIShtYXRjaD1vcHRpb25zRXhwLm1hdGNoKE5HX09QVElPTlNfUkVHRVhQKSkpe3Rocm93IG5nT3B0aW9uc01pbkVycignaWV4cCcsIkV4cGVjdGVkIGV4cHJlc3Npb24gaW4gZm9ybSBvZiAiKyInX3NlbGVjdF8gKGFzIF9sYWJlbF8pPyBmb3IgKF9rZXlfLCk/X3ZhbHVlXyBpbiBfY29sbGVjdGlvbl8nIisiIGJ1dCBnb3QgJ3swfScuIEVsZW1lbnQ6IHsxfSIsb3B0aW9uc0V4cCxzdGFydGluZ1RhZyhzZWxlY3RFbGVtZW50KSk7fQp2YXIgZGlzcGxheUZuPSRwYXJzZShtYXRjaFsyXXx8bWF0Y2hbMV0pLHZhbHVlTmFtZT1tYXRjaFs0XXx8bWF0Y2hbNl0sa2V5TmFtZT1tYXRjaFs1XSxncm91cEJ5Rm49JHBhcnNlKG1hdGNoWzNdfHwnJyksdmFsdWVGbj0kcGFyc2UobWF0Y2hbMl0/bWF0Y2hbMV06dmFsdWVOYW1lKSx2YWx1ZXNGbj0kcGFyc2UobWF0Y2hbN10pLHRyYWNrPW1hdGNoWzhdLHRyYWNrRm49dHJhY2s/JHBhcnNlKG1hdGNoWzhdKTpudWxsLG9wdGlvbkdyb3Vwc0NhY2hlPVtbe2VsZW1lbnQ6c2VsZWN0RWxlbWVudCxsYWJlbDonJ31dXTtpZihudWxsT3B0aW9uKXskY29tcGlsZShudWxsT3B0aW9uKShzY29wZSk7bnVsbE9wdGlvbi5yZW1vdmVDbGFzcygnbmctc2NvcGUnKTtudWxsT3B0aW9uLnJlbW92ZSgpO30Kc2VsZWN0RWxlbWVudC5lbXB0eSgpO3NlbGVjdEVsZW1lbnQub24oJ2NoYW5nZScsZnVuY3Rpb24oKXtzY29wZS4kYXBwbHkoZnVuY3Rpb24oKXt2YXIgb3B0aW9uR3JvdXAsY29sbGVjdGlvbj12YWx1ZXNGbihzY29wZSl8fFtdLGxvY2Fscz17fSxrZXksdmFsdWUsb3B0aW9uRWxlbWVudCxpbmRleCxncm91cEluZGV4LGxlbmd0aCxncm91cExlbmd0aCx0cmFja0luZGV4O2lmKG11bHRpcGxlKXt2YWx1ZT1bXTtmb3IoZ3JvdXBJbmRleD0wLGdyb3VwTGVuZ3RoPW9wdGlvbkdyb3Vwc0NhY2hlLmxlbmd0aDtncm91cEluZGV4PGdyb3VwTGVuZ3RoO2dyb3VwSW5kZXgrKyl7b3B0aW9uR3JvdXA9b3B0aW9uR3JvdXBzQ2FjaGVbZ3JvdXBJbmRleF07Zm9yKGluZGV4PTEsbGVuZ3RoPW9wdGlvbkdyb3VwLmxlbmd0aDtpbmRleDxsZW5ndGg7aW5kZXgrKyl7aWYoKG9wdGlvbkVsZW1lbnQ9b3B0aW9uR3JvdXBbaW5kZXhdLmVsZW1lbnQpWzBdLnNlbGVjdGVkKXtrZXk9b3B0aW9uRWxlbWVudC52YWwoKTtpZihrZXlOYW1lKWxvY2Fsc1trZXlOYW1lXT1rZXk7aWYodHJhY2tGbil7Zm9yKHRyYWNrSW5kZXg9MDt0cmFja0luZGV4PGNvbGxlY3Rpb24ubGVuZ3RoO3RyYWNrSW5kZXgrKyl7bG9jYWxzW3ZhbHVlTmFtZV09Y29sbGVjdGlvblt0cmFja0luZGV4XTtpZih0cmFja0ZuKHNjb3BlLGxvY2Fscyk9PWtleSlicmVhazt9fWVsc2V7bG9jYWxzW3ZhbHVlTmFtZV09Y29sbGVjdGlvbltrZXldO30KdmFsdWUucHVzaCh2YWx1ZUZuKHNjb3BlLGxvY2FscykpO319fX1lbHNle2tleT1zZWxlY3RFbGVtZW50LnZhbCgpO2lmKGtleT09Jz8nKXt2YWx1ZT11bmRlZmluZWQ7fWVsc2UgaWYoa2V5PT09Jycpe3ZhbHVlPW51bGw7fWVsc2V7aWYodHJhY2tGbil7Zm9yKHRyYWNrSW5kZXg9MDt0cmFja0luZGV4PGNvbGxlY3Rpb24ubGVuZ3RoO3RyYWNrSW5kZXgrKyl7bG9jYWxzW3ZhbHVlTmFtZV09Y29sbGVjdGlvblt0cmFja0luZGV4XTtpZih0cmFja0ZuKHNjb3BlLGxvY2Fscyk9PWtleSl7dmFsdWU9dmFsdWVGbihzY29wZSxsb2NhbHMpO2JyZWFrO319fWVsc2V7bG9jYWxzW3ZhbHVlTmFtZV09Y29sbGVjdGlvbltrZXldO2lmKGtleU5hbWUpbG9jYWxzW2tleU5hbWVdPWtleTt2YWx1ZT12YWx1ZUZuKHNjb3BlLGxvY2Fscyk7fX0KaWYob3B0aW9uR3JvdXBzQ2FjaGVbMF0ubGVuZ3RoPjEpe2lmKG9wdGlvbkdyb3Vwc0NhY2hlWzBdWzFdLmlkIT09a2V5KXtvcHRpb25Hcm91cHNDYWNoZVswXVsxXS5zZWxlY3RlZD1mYWxzZTt9fX0KY3RybC4kc2V0Vmlld1ZhbHVlKHZhbHVlKTt9KTt9KTtjdHJsLiRyZW5kZXI9cmVuZGVyO3Njb3BlLiR3YXRjaChyZW5kZXIpO2Z1bmN0aW9uIHJlbmRlcigpe3ZhciBvcHRpb25Hcm91cHM9eycnOltdfSxvcHRpb25Hcm91cE5hbWVzPVsnJ10sb3B0aW9uR3JvdXBOYW1lLG9wdGlvbkdyb3VwLG9wdGlvbixleGlzdGluZ1BhcmVudCxleGlzdGluZ09wdGlvbnMsZXhpc3RpbmdPcHRpb24sbW9kZWxWYWx1ZT1jdHJsLiRtb2RlbFZhbHVlLHZhbHVlcz12YWx1ZXNGbihzY29wZSl8fFtdLGtleXM9a2V5TmFtZT9zb3J0ZWRLZXlzKHZhbHVlcyk6dmFsdWVzLGtleSxncm91cExlbmd0aCxsZW5ndGgsZ3JvdXBJbmRleCxpbmRleCxsb2NhbHM9e30sc2VsZWN0ZWQsc2VsZWN0ZWRTZXQ9ZmFsc2UsbGFzdEVsZW1lbnQsZWxlbWVudCxsYWJlbDtpZihtdWx0aXBsZSl7aWYodHJhY2tGbiYmaXNBcnJheShtb2RlbFZhbHVlKSl7c2VsZWN0ZWRTZXQ9bmV3IEhhc2hNYXAoW10pO2Zvcih2YXIgdHJhY2tJbmRleD0wO3RyYWNrSW5kZXg8bW9kZWxWYWx1ZS5sZW5ndGg7dHJhY2tJbmRleCsrKXtsb2NhbHNbdmFsdWVOYW1lXT1tb2RlbFZhbHVlW3RyYWNrSW5kZXhdO3NlbGVjdGVkU2V0LnB1dCh0cmFja0ZuKHNjb3BlLGxvY2FscyksbW9kZWxWYWx1ZVt0cmFja0luZGV4XSk7fX1lbHNle3NlbGVjdGVkU2V0PW5ldyBIYXNoTWFwKG1vZGVsVmFsdWUpO319CmZvcihpbmRleD0wO2xlbmd0aD1rZXlzLmxlbmd0aCxpbmRleDxsZW5ndGg7aW5kZXgrKyl7a2V5PWluZGV4O2lmKGtleU5hbWUpe2tleT1rZXlzW2luZGV4XTtpZihrZXkuY2hhckF0KDApPT09JyQnKWNvbnRpbnVlO2xvY2Fsc1trZXlOYW1lXT1rZXk7fQpsb2NhbHNbdmFsdWVOYW1lXT12YWx1ZXNba2V5XTtvcHRpb25Hcm91cE5hbWU9Z3JvdXBCeUZuKHNjb3BlLGxvY2Fscyl8fCcnO2lmKCEob3B0aW9uR3JvdXA9b3B0aW9uR3JvdXBzW29wdGlvbkdyb3VwTmFtZV0pKXtvcHRpb25Hcm91cD1vcHRpb25Hcm91cHNbb3B0aW9uR3JvdXBOYW1lXT1bXTtvcHRpb25Hcm91cE5hbWVzLnB1c2gob3B0aW9uR3JvdXBOYW1lKTt9CmlmKG11bHRpcGxlKXtzZWxlY3RlZD1pc0RlZmluZWQoc2VsZWN0ZWRTZXQucmVtb3ZlKHRyYWNrRm4/dHJhY2tGbihzY29wZSxsb2NhbHMpOnZhbHVlRm4oc2NvcGUsbG9jYWxzKSkpO31lbHNle2lmKHRyYWNrRm4pe3ZhciBtb2RlbENhc3Q9e307bW9kZWxDYXN0W3ZhbHVlTmFtZV09bW9kZWxWYWx1ZTtzZWxlY3RlZD10cmFja0ZuKHNjb3BlLG1vZGVsQ2FzdCk9PT10cmFja0ZuKHNjb3BlLGxvY2Fscyk7fWVsc2V7c2VsZWN0ZWQ9bW9kZWxWYWx1ZT09PXZhbHVlRm4oc2NvcGUsbG9jYWxzKTt9CnNlbGVjdGVkU2V0PXNlbGVjdGVkU2V0fHxzZWxlY3RlZDt9CmxhYmVsPWRpc3BsYXlGbihzY29wZSxsb2NhbHMpO2xhYmVsPWlzRGVmaW5lZChsYWJlbCk/bGFiZWw6Jyc7b3B0aW9uR3JvdXAucHVzaCh7aWQ6dHJhY2tGbj90cmFja0ZuKHNjb3BlLGxvY2Fscyk6KGtleU5hbWU/a2V5c1tpbmRleF06aW5kZXgpLGxhYmVsOmxhYmVsLHNlbGVjdGVkOnNlbGVjdGVkfSk7fQppZighbXVsdGlwbGUpe2lmKG51bGxPcHRpb258fG1vZGVsVmFsdWU9PT1udWxsKXtvcHRpb25Hcm91cHNbJyddLnVuc2hpZnQoe2lkOicnLGxhYmVsOicnLHNlbGVjdGVkOiFzZWxlY3RlZFNldH0pO31lbHNlIGlmKCFzZWxlY3RlZFNldCl7b3B0aW9uR3JvdXBzWycnXS51bnNoaWZ0KHtpZDonPycsbGFiZWw6Jycsc2VsZWN0ZWQ6dHJ1ZX0pO319CmZvcihncm91cEluZGV4PTAsZ3JvdXBMZW5ndGg9b3B0aW9uR3JvdXBOYW1lcy5sZW5ndGg7Z3JvdXBJbmRleDxncm91cExlbmd0aDtncm91cEluZGV4Kyspe29wdGlvbkdyb3VwTmFtZT1vcHRpb25Hcm91cE5hbWVzW2dyb3VwSW5kZXhdO29wdGlvbkdyb3VwPW9wdGlvbkdyb3Vwc1tvcHRpb25Hcm91cE5hbWVdO2lmKG9wdGlvbkdyb3Vwc0NhY2hlLmxlbmd0aDw9Z3JvdXBJbmRleCl7ZXhpc3RpbmdQYXJlbnQ9e2VsZW1lbnQ6b3B0R3JvdXBUZW1wbGF0ZS5jbG9uZSgpLmF0dHIoJ2xhYmVsJyxvcHRpb25Hcm91cE5hbWUpLGxhYmVsOm9wdGlvbkdyb3VwLmxhYmVsfTtleGlzdGluZ09wdGlvbnM9W2V4aXN0aW5nUGFyZW50XTtvcHRpb25Hcm91cHNDYWNoZS5wdXNoKGV4aXN0aW5nT3B0aW9ucyk7c2VsZWN0RWxlbWVudC5hcHBlbmQoZXhpc3RpbmdQYXJlbnQuZWxlbWVudCk7fWVsc2V7ZXhpc3RpbmdPcHRpb25zPW9wdGlvbkdyb3Vwc0NhY2hlW2dyb3VwSW5kZXhdO2V4aXN0aW5nUGFyZW50PWV4aXN0aW5nT3B0aW9uc1swXTtpZihleGlzdGluZ1BhcmVudC5sYWJlbCE9b3B0aW9uR3JvdXBOYW1lKXtleGlzdGluZ1BhcmVudC5lbGVtZW50LmF0dHIoJ2xhYmVsJyxleGlzdGluZ1BhcmVudC5sYWJlbD1vcHRpb25Hcm91cE5hbWUpO319Cmxhc3RFbGVtZW50PW51bGw7Zm9yKGluZGV4PTAsbGVuZ3RoPW9wdGlvbkdyb3VwLmxlbmd0aDtpbmRleDxsZW5ndGg7aW5kZXgrKyl7b3B0aW9uPW9wdGlvbkdyb3VwW2luZGV4XTtpZigoZXhpc3RpbmdPcHRpb249ZXhpc3RpbmdPcHRpb25zW2luZGV4KzFdKSl7bGFzdEVsZW1lbnQ9ZXhpc3RpbmdPcHRpb24uZWxlbWVudDtpZihleGlzdGluZ09wdGlvbi5sYWJlbCE9PW9wdGlvbi5sYWJlbCl7bGFzdEVsZW1lbnQudGV4dChleGlzdGluZ09wdGlvbi5sYWJlbD1vcHRpb24ubGFiZWwpO30KaWYoZXhpc3RpbmdPcHRpb24uaWQhPT1vcHRpb24uaWQpe2xhc3RFbGVtZW50LnZhbChleGlzdGluZ09wdGlvbi5pZD1vcHRpb24uaWQpO30KaWYoZXhpc3RpbmdPcHRpb24uc2VsZWN0ZWQhPT1vcHRpb24uc2VsZWN0ZWQpe2xhc3RFbGVtZW50LnByb3AoJ3NlbGVjdGVkJywoZXhpc3RpbmdPcHRpb24uc2VsZWN0ZWQ9b3B0aW9uLnNlbGVjdGVkKSk7fX1lbHNle2lmKG9wdGlvbi5pZD09PScnJiZudWxsT3B0aW9uKXtlbGVtZW50PW51bGxPcHRpb247fWVsc2V7KGVsZW1lbnQ9b3B0aW9uVGVtcGxhdGUuY2xvbmUoKSkudmFsKG9wdGlvbi5pZCkucHJvcCgnc2VsZWN0ZWQnLG9wdGlvbi5zZWxlY3RlZCkudGV4dChvcHRpb24ubGFiZWwpO30KZXhpc3RpbmdPcHRpb25zLnB1c2goZXhpc3RpbmdPcHRpb249e2VsZW1lbnQ6ZWxlbWVudCxsYWJlbDpvcHRpb24ubGFiZWwsaWQ6b3B0aW9uLmlkLHNlbGVjdGVkOm9wdGlvbi5zZWxlY3RlZH0pO2lmKGxhc3RFbGVtZW50KXtsYXN0RWxlbWVudC5hZnRlcihlbGVtZW50KTt9ZWxzZXtleGlzdGluZ1BhcmVudC5lbGVtZW50LmFwcGVuZChlbGVtZW50KTt9Cmxhc3RFbGVtZW50PWVsZW1lbnQ7fX0KaW5kZXgrKzt3aGlsZShleGlzdGluZ09wdGlvbnMubGVuZ3RoPmluZGV4KXtleGlzdGluZ09wdGlvbnMucG9wKCkuZWxlbWVudC5yZW1vdmUoKTt9fQp3aGlsZShvcHRpb25Hcm91cHNDYWNoZS5sZW5ndGg+Z3JvdXBJbmRleCl7b3B0aW9uR3JvdXBzQ2FjaGUucG9wKClbMF0uZWxlbWVudC5yZW1vdmUoKTt9fX19fTt9XTt2YXIgb3B0aW9uRGlyZWN0aXZlPVsnJGludGVycG9sYXRlJyxmdW5jdGlvbigkaW50ZXJwb2xhdGUpe3ZhciBudWxsU2VsZWN0Q3RybD17YWRkT3B0aW9uOm5vb3AscmVtb3ZlT3B0aW9uOm5vb3B9O3JldHVybntyZXN0cmljdDonRScscHJpb3JpdHk6MTAwLGNvbXBpbGU6ZnVuY3Rpb24oZWxlbWVudCxhdHRyKXtpZihpc1VuZGVmaW5lZChhdHRyLnZhbHVlKSl7dmFyIGludGVycG9sYXRlRm49JGludGVycG9sYXRlKGVsZW1lbnQudGV4dCgpLHRydWUpO2lmKCFpbnRlcnBvbGF0ZUZuKXthdHRyLiRzZXQoJ3ZhbHVlJyxlbGVtZW50LnRleHQoKSk7fX0KcmV0dXJuIGZ1bmN0aW9uKHNjb3BlLGVsZW1lbnQsYXR0cil7dmFyIHNlbGVjdEN0cmxOYW1lPSckc2VsZWN0Q29udHJvbGxlcicscGFyZW50PWVsZW1lbnQucGFyZW50KCksc2VsZWN0Q3RybD1wYXJlbnQuZGF0YShzZWxlY3RDdHJsTmFtZSl8fHBhcmVudC5wYXJlbnQoKS5kYXRhKHNlbGVjdEN0cmxOYW1lKTtpZihzZWxlY3RDdHJsJiZzZWxlY3RDdHJsLmRhdGFib3VuZCl7ZWxlbWVudC5wcm9wKCdzZWxlY3RlZCcsZmFsc2UpO31lbHNle3NlbGVjdEN0cmw9bnVsbFNlbGVjdEN0cmw7fQppZihpbnRlcnBvbGF0ZUZuKXtzY29wZS4kd2F0Y2goaW50ZXJwb2xhdGVGbixmdW5jdGlvbiBpbnRlcnBvbGF0ZVdhdGNoQWN0aW9uKG5ld1ZhbCxvbGRWYWwpe2F0dHIuJHNldCgndmFsdWUnLG5ld1ZhbCk7aWYobmV3VmFsIT09b2xkVmFsKXNlbGVjdEN0cmwucmVtb3ZlT3B0aW9uKG9sZFZhbCk7c2VsZWN0Q3RybC5hZGRPcHRpb24obmV3VmFsKTt9KTt9ZWxzZXtzZWxlY3RDdHJsLmFkZE9wdGlvbihhdHRyLnZhbHVlKTt9CmVsZW1lbnQub24oJyRkZXN0cm95JyxmdW5jdGlvbigpe3NlbGVjdEN0cmwucmVtb3ZlT3B0aW9uKGF0dHIudmFsdWUpO30pO307fX07fV07dmFyIHN0eWxlRGlyZWN0aXZlPXZhbHVlRm4oe3Jlc3RyaWN0OidFJyx0ZXJtaW5hbDp0cnVlfSk7aWYod2luZG93LmFuZ3VsYXIuYm9vdHN0cmFwKXtjb25zb2xlLmxvZygnV0FSTklORzogVHJpZWQgdG8gbG9hZCBhbmd1bGFyIG1vcmUgdGhhbiBvbmNlLicpO3JldHVybjt9CmJpbmRKUXVlcnkoKTtwdWJsaXNoRXh0ZXJuYWxBUEkoYW5ndWxhcik7anFMaXRlKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpe2FuZ3VsYXJJbml0KGRvY3VtZW50LGJvb3RzdHJhcCk7fSk7fSkod2luZG93LGRvY3VtZW50KTshd2luZG93LmFuZ3VsYXIuJCRjc3AoKSYmd2luZG93LmFuZ3VsYXIuZWxlbWVudChkb2N1bWVudCkuZmluZCgnaGVhZCcpLnByZXBlbmQoJzxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+QGNoYXJzZXQgIlVURi04IjtbbmdcXDpjbG9ha10sW25nLWNsb2FrXSxbZGF0YS1uZy1jbG9ha10sW3gtbmctY2xvYWtdLC5uZy1jbG9haywueC1uZy1jbG9haywubmctaGlkZXtkaXNwbGF5Om5vbmUgIWltcG9ydGFudDt9bmdcXDpmb3Jte2Rpc3BsYXk6YmxvY2s7fS5uZy1hbmltYXRlLWJsb2NrLXRyYW5zaXRpb25ze3RyYW5zaXRpb246MHMgYWxsIWltcG9ydGFudDstd2Via2l0LXRyYW5zaXRpb246MHMgYWxsIWltcG9ydGFudDt9Lm5nLWhpZGUtYWRkLWFjdGl2ZSwubmctaGlkZS1yZW1vdmV7ZGlzcGxheTpibG9jayFpbXBvcnRhbnQ7fTwvc3R5bGU+Jyk7fSkuY2FsbCh0aGlzLHJlcXVpcmUoIm9NZnBBbiIpLHR5cGVvZiBzZWxmIT09InVuZGVmaW5lZCI/c2VsZjp0eXBlb2Ygd2luZG93IT09InVuZGVmaW5lZCI/d2luZG93Ont9LHJlcXVpcmUoImJ1ZmZlciIpLkJ1ZmZlcixhcmd1bWVudHNbM10sYXJndW1lbnRzWzRdLGFyZ3VtZW50c1s1XSxhcmd1bWVudHNbNl0sIi8uLi8uLi9ub2RlX21vZHVsZXMvYW5ndWxhci9saWIvYW5ndWxhci5qcyIsIi8uLi8uLi9ub2RlX21vZHVsZXMvYW5ndWxhci9saWIiKX0seyJidWZmZXIiOjQsIm9NZnBBbiI6N31dLDQ6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpeyhmdW5jdGlvbihwcm9jZXNzLGdsb2JhbCxCdWZmZXIsX19hcmd1bWVudDAsX19hcmd1bWVudDEsX19hcmd1bWVudDIsX19hcmd1bWVudDMsX19maWxlbmFtZSxfX2Rpcm5hbWUpe3ZhciBiYXNlNjQ9cmVxdWlyZSgnYmFzZTY0LWpzJykKdmFyIGllZWU3NTQ9cmVxdWlyZSgnaWVlZTc1NCcpCmV4cG9ydHMuQnVmZmVyPUJ1ZmZlcgpleHBvcnRzLlNsb3dCdWZmZXI9QnVmZmVyCmV4cG9ydHMuSU5TUEVDVF9NQVhfQllURVM9NTAKQnVmZmVyLnBvb2xTaXplPTgxOTIKQnVmZmVyLl91c2VUeXBlZEFycmF5cz0oZnVuY3Rpb24oKXt0cnl7dmFyIGJ1Zj1uZXcgQXJyYXlCdWZmZXIoMCkKdmFyIGFycj1uZXcgVWludDhBcnJheShidWYpCmFyci5mb289ZnVuY3Rpb24oKXtyZXR1cm4gNDJ9CnJldHVybiA0Mj09PWFyci5mb28oKSYmdHlwZW9mIGFyci5zdWJhcnJheT09PSdmdW5jdGlvbid9Y2F0Y2goZSl7cmV0dXJuIGZhbHNlfX0pKCkKZnVuY3Rpb24gQnVmZmVyKHN1YmplY3QsZW5jb2Rpbmcsbm9aZXJvKXtpZighKHRoaXMgaW5zdGFuY2VvZiBCdWZmZXIpKQpyZXR1cm4gbmV3IEJ1ZmZlcihzdWJqZWN0LGVuY29kaW5nLG5vWmVybykKdmFyIHR5cGU9dHlwZW9mIHN1YmplY3QKaWYoZW5jb2Rpbmc9PT0nYmFzZTY0JyYmdHlwZT09PSdzdHJpbmcnKXtzdWJqZWN0PXN0cmluZ3RyaW0oc3ViamVjdCkKd2hpbGUoc3ViamVjdC5sZW5ndGglNCE9PTApe3N1YmplY3Q9c3ViamVjdCsnPSd9fQp2YXIgbGVuZ3RoCmlmKHR5cGU9PT0nbnVtYmVyJykKbGVuZ3RoPWNvZXJjZShzdWJqZWN0KQplbHNlIGlmKHR5cGU9PT0nc3RyaW5nJykKbGVuZ3RoPUJ1ZmZlci5ieXRlTGVuZ3RoKHN1YmplY3QsZW5jb2RpbmcpCmVsc2UgaWYodHlwZT09PSdvYmplY3QnKQpsZW5ndGg9Y29lcmNlKHN1YmplY3QubGVuZ3RoKQplbHNlCnRocm93IG5ldyBFcnJvcignRmlyc3QgYXJndW1lbnQgbmVlZHMgdG8gYmUgYSBudW1iZXIsIGFycmF5IG9yIHN0cmluZy4nKQp2YXIgYnVmCmlmKEJ1ZmZlci5fdXNlVHlwZWRBcnJheXMpe2J1Zj1CdWZmZXIuX2F1Z21lbnQobmV3IFVpbnQ4QXJyYXkobGVuZ3RoKSl9ZWxzZXtidWY9dGhpcwpidWYubGVuZ3RoPWxlbmd0aApidWYuX2lzQnVmZmVyPXRydWV9CnZhciBpCmlmKEJ1ZmZlci5fdXNlVHlwZWRBcnJheXMmJnR5cGVvZiBzdWJqZWN0LmJ5dGVMZW5ndGg9PT0nbnVtYmVyJyl7YnVmLl9zZXQoc3ViamVjdCl9ZWxzZSBpZihpc0FycmF5aXNoKHN1YmplY3QpKXtmb3IoaT0wO2k8bGVuZ3RoO2krKyl7aWYoQnVmZmVyLmlzQnVmZmVyKHN1YmplY3QpKQpidWZbaV09c3ViamVjdC5yZWFkVUludDgoaSkKZWxzZQpidWZbaV09c3ViamVjdFtpXX19ZWxzZSBpZih0eXBlPT09J3N0cmluZycpe2J1Zi53cml0ZShzdWJqZWN0LDAsZW5jb2RpbmcpfWVsc2UgaWYodHlwZT09PSdudW1iZXInJiYhQnVmZmVyLl91c2VUeXBlZEFycmF5cyYmIW5vWmVybyl7Zm9yKGk9MDtpPGxlbmd0aDtpKyspe2J1ZltpXT0wfX0KcmV0dXJuIGJ1Zn0KQnVmZmVyLmlzRW5jb2Rpbmc9ZnVuY3Rpb24oZW5jb2Rpbmcpe3N3aXRjaChTdHJpbmcoZW5jb2RpbmcpLnRvTG93ZXJDYXNlKCkpe2Nhc2UnaGV4JzpjYXNlJ3V0ZjgnOmNhc2UndXRmLTgnOmNhc2UnYXNjaWknOmNhc2UnYmluYXJ5JzpjYXNlJ2Jhc2U2NCc6Y2FzZSdyYXcnOmNhc2UndWNzMic6Y2FzZSd1Y3MtMic6Y2FzZSd1dGYxNmxlJzpjYXNlJ3V0Zi0xNmxlJzpyZXR1cm4gdHJ1ZQpkZWZhdWx0OnJldHVybiBmYWxzZX19CkJ1ZmZlci5pc0J1ZmZlcj1mdW5jdGlvbihiKXtyZXR1cm4hIShiIT09bnVsbCYmYiE9PXVuZGVmaW5lZCYmYi5faXNCdWZmZXIpfQpCdWZmZXIuYnl0ZUxlbmd0aD1mdW5jdGlvbihzdHIsZW5jb2Rpbmcpe3ZhciByZXQKc3RyPXN0cisnJwpzd2l0Y2goZW5jb2Rpbmd8fCd1dGY4Jyl7Y2FzZSdoZXgnOnJldD1zdHIubGVuZ3RoLzIKYnJlYWsKY2FzZSd1dGY4JzpjYXNlJ3V0Zi04JzpyZXQ9dXRmOFRvQnl0ZXMoc3RyKS5sZW5ndGgKYnJlYWsKY2FzZSdhc2NpaSc6Y2FzZSdiaW5hcnknOmNhc2UncmF3JzpyZXQ9c3RyLmxlbmd0aApicmVhawpjYXNlJ2Jhc2U2NCc6cmV0PWJhc2U2NFRvQnl0ZXMoc3RyKS5sZW5ndGgKYnJlYWsKY2FzZSd1Y3MyJzpjYXNlJ3Vjcy0yJzpjYXNlJ3V0ZjE2bGUnOmNhc2UndXRmLTE2bGUnOnJldD1zdHIubGVuZ3RoKjIKYnJlYWsKZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoJ1Vua25vd24gZW5jb2RpbmcnKX0KcmV0dXJuIHJldH0KQnVmZmVyLmNvbmNhdD1mdW5jdGlvbihsaXN0LHRvdGFsTGVuZ3RoKXthc3NlcnQoaXNBcnJheShsaXN0KSwnVXNhZ2U6IEJ1ZmZlci5jb25jYXQobGlzdCwgW3RvdGFsTGVuZ3RoXSlcbicrJ2xpc3Qgc2hvdWxkIGJlIGFuIEFycmF5LicpCmlmKGxpc3QubGVuZ3RoPT09MCl7cmV0dXJuIG5ldyBCdWZmZXIoMCl9ZWxzZSBpZihsaXN0Lmxlbmd0aD09PTEpe3JldHVybiBsaXN0WzBdfQp2YXIgaQppZih0eXBlb2YgdG90YWxMZW5ndGghPT0nbnVtYmVyJyl7dG90YWxMZW5ndGg9MApmb3IoaT0wO2k8bGlzdC5sZW5ndGg7aSsrKXt0b3RhbExlbmd0aCs9bGlzdFtpXS5sZW5ndGh9fQp2YXIgYnVmPW5ldyBCdWZmZXIodG90YWxMZW5ndGgpCnZhciBwb3M9MApmb3IoaT0wO2k8bGlzdC5sZW5ndGg7aSsrKXt2YXIgaXRlbT1saXN0W2ldCml0ZW0uY29weShidWYscG9zKQpwb3MrPWl0ZW0ubGVuZ3RofQpyZXR1cm4gYnVmfQpmdW5jdGlvbiBfaGV4V3JpdGUoYnVmLHN0cmluZyxvZmZzZXQsbGVuZ3RoKXtvZmZzZXQ9TnVtYmVyKG9mZnNldCl8fDAKdmFyIHJlbWFpbmluZz1idWYubGVuZ3RoLW9mZnNldAppZighbGVuZ3RoKXtsZW5ndGg9cmVtYWluaW5nfWVsc2V7bGVuZ3RoPU51bWJlcihsZW5ndGgpCmlmKGxlbmd0aD5yZW1haW5pbmcpe2xlbmd0aD1yZW1haW5pbmd9fQp2YXIgc3RyTGVuPXN0cmluZy5sZW5ndGgKYXNzZXJ0KHN0ckxlbiUyPT09MCwnSW52YWxpZCBoZXggc3RyaW5nJykKaWYobGVuZ3RoPnN0ckxlbi8yKXtsZW5ndGg9c3RyTGVuLzJ9CmZvcih2YXIgaT0wO2k8bGVuZ3RoO2krKyl7dmFyIGJ5dGU9cGFyc2VJbnQoc3RyaW5nLnN1YnN0cihpKjIsMiksMTYpCmFzc2VydCghaXNOYU4oYnl0ZSksJ0ludmFsaWQgaGV4IHN0cmluZycpCmJ1ZltvZmZzZXQraV09Ynl0ZX0KQnVmZmVyLl9jaGFyc1dyaXR0ZW49aSoyCnJldHVybiBpfQpmdW5jdGlvbiBfdXRmOFdyaXRlKGJ1ZixzdHJpbmcsb2Zmc2V0LGxlbmd0aCl7dmFyIGNoYXJzV3JpdHRlbj1CdWZmZXIuX2NoYXJzV3JpdHRlbj1ibGl0QnVmZmVyKHV0ZjhUb0J5dGVzKHN0cmluZyksYnVmLG9mZnNldCxsZW5ndGgpCnJldHVybiBjaGFyc1dyaXR0ZW59CmZ1bmN0aW9uIF9hc2NpaVdyaXRlKGJ1ZixzdHJpbmcsb2Zmc2V0LGxlbmd0aCl7dmFyIGNoYXJzV3JpdHRlbj1CdWZmZXIuX2NoYXJzV3JpdHRlbj1ibGl0QnVmZmVyKGFzY2lpVG9CeXRlcyhzdHJpbmcpLGJ1ZixvZmZzZXQsbGVuZ3RoKQpyZXR1cm4gY2hhcnNXcml0dGVufQpmdW5jdGlvbiBfYmluYXJ5V3JpdGUoYnVmLHN0cmluZyxvZmZzZXQsbGVuZ3RoKXtyZXR1cm4gX2FzY2lpV3JpdGUoYnVmLHN0cmluZyxvZmZzZXQsbGVuZ3RoKX0KZnVuY3Rpb24gX2Jhc2U2NFdyaXRlKGJ1ZixzdHJpbmcsb2Zmc2V0LGxlbmd0aCl7dmFyIGNoYXJzV3JpdHRlbj1CdWZmZXIuX2NoYXJzV3JpdHRlbj1ibGl0QnVmZmVyKGJhc2U2NFRvQnl0ZXMoc3RyaW5nKSxidWYsb2Zmc2V0LGxlbmd0aCkKcmV0dXJuIGNoYXJzV3JpdHRlbn0KZnVuY3Rpb24gX3V0ZjE2bGVXcml0ZShidWYsc3RyaW5nLG9mZnNldCxsZW5ndGgpe3ZhciBjaGFyc1dyaXR0ZW49QnVmZmVyLl9jaGFyc1dyaXR0ZW49YmxpdEJ1ZmZlcih1dGYxNmxlVG9CeXRlcyhzdHJpbmcpLGJ1ZixvZmZzZXQsbGVuZ3RoKQpyZXR1cm4gY2hhcnNXcml0dGVufQpCdWZmZXIucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKHN0cmluZyxvZmZzZXQsbGVuZ3RoLGVuY29kaW5nKXtpZihpc0Zpbml0ZShvZmZzZXQpKXtpZighaXNGaW5pdGUobGVuZ3RoKSl7ZW5jb2Rpbmc9bGVuZ3RoCmxlbmd0aD11bmRlZmluZWR9fWVsc2V7dmFyIHN3YXA9ZW5jb2RpbmcKZW5jb2Rpbmc9b2Zmc2V0Cm9mZnNldD1sZW5ndGgKbGVuZ3RoPXN3YXB9Cm9mZnNldD1OdW1iZXIob2Zmc2V0KXx8MAp2YXIgcmVtYWluaW5nPXRoaXMubGVuZ3RoLW9mZnNldAppZighbGVuZ3RoKXtsZW5ndGg9cmVtYWluaW5nfWVsc2V7bGVuZ3RoPU51bWJlcihsZW5ndGgpCmlmKGxlbmd0aD5yZW1haW5pbmcpe2xlbmd0aD1yZW1haW5pbmd9fQplbmNvZGluZz1TdHJpbmcoZW5jb2Rpbmd8fCd1dGY4JykudG9Mb3dlckNhc2UoKQp2YXIgcmV0CnN3aXRjaChlbmNvZGluZyl7Y2FzZSdoZXgnOnJldD1faGV4V3JpdGUodGhpcyxzdHJpbmcsb2Zmc2V0LGxlbmd0aCkKYnJlYWsKY2FzZSd1dGY4JzpjYXNlJ3V0Zi04JzpyZXQ9X3V0ZjhXcml0ZSh0aGlzLHN0cmluZyxvZmZzZXQsbGVuZ3RoKQpicmVhawpjYXNlJ2FzY2lpJzpyZXQ9X2FzY2lpV3JpdGUodGhpcyxzdHJpbmcsb2Zmc2V0LGxlbmd0aCkKYnJlYWsKY2FzZSdiaW5hcnknOnJldD1fYmluYXJ5V3JpdGUodGhpcyxzdHJpbmcsb2Zmc2V0LGxlbmd0aCkKYnJlYWsKY2FzZSdiYXNlNjQnOnJldD1fYmFzZTY0V3JpdGUodGhpcyxzdHJpbmcsb2Zmc2V0LGxlbmd0aCkKYnJlYWsKY2FzZSd1Y3MyJzpjYXNlJ3Vjcy0yJzpjYXNlJ3V0ZjE2bGUnOmNhc2UndXRmLTE2bGUnOnJldD1fdXRmMTZsZVdyaXRlKHRoaXMsc3RyaW5nLG9mZnNldCxsZW5ndGgpCmJyZWFrCmRlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKCdVbmtub3duIGVuY29kaW5nJyl9CnJldHVybiByZXR9CkJ1ZmZlci5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oZW5jb2Rpbmcsc3RhcnQsZW5kKXt2YXIgc2VsZj10aGlzCmVuY29kaW5nPVN0cmluZyhlbmNvZGluZ3x8J3V0ZjgnKS50b0xvd2VyQ2FzZSgpCnN0YXJ0PU51bWJlcihzdGFydCl8fDAKZW5kPShlbmQhPT11bmRlZmluZWQpP051bWJlcihlbmQpOmVuZD1zZWxmLmxlbmd0aAppZihlbmQ9PT1zdGFydCkKcmV0dXJuJycKdmFyIHJldApzd2l0Y2goZW5jb2Rpbmcpe2Nhc2UnaGV4JzpyZXQ9X2hleFNsaWNlKHNlbGYsc3RhcnQsZW5kKQpicmVhawpjYXNlJ3V0ZjgnOmNhc2UndXRmLTgnOnJldD1fdXRmOFNsaWNlKHNlbGYsc3RhcnQsZW5kKQpicmVhawpjYXNlJ2FzY2lpJzpyZXQ9X2FzY2lpU2xpY2Uoc2VsZixzdGFydCxlbmQpCmJyZWFrCmNhc2UnYmluYXJ5JzpyZXQ9X2JpbmFyeVNsaWNlKHNlbGYsc3RhcnQsZW5kKQpicmVhawpjYXNlJ2Jhc2U2NCc6cmV0PV9iYXNlNjRTbGljZShzZWxmLHN0YXJ0LGVuZCkKYnJlYWsKY2FzZSd1Y3MyJzpjYXNlJ3Vjcy0yJzpjYXNlJ3V0ZjE2bGUnOmNhc2UndXRmLTE2bGUnOnJldD1fdXRmMTZsZVNsaWNlKHNlbGYsc3RhcnQsZW5kKQpicmVhawpkZWZhdWx0OnRocm93IG5ldyBFcnJvcignVW5rbm93biBlbmNvZGluZycpfQpyZXR1cm4gcmV0fQpCdWZmZXIucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybnt0eXBlOidCdWZmZXInLGRhdGE6QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwodGhpcy5fYXJyfHx0aGlzLDApfX0KQnVmZmVyLnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKHRhcmdldCx0YXJnZXRfc3RhcnQsc3RhcnQsZW5kKXt2YXIgc291cmNlPXRoaXMKaWYoIXN0YXJ0KXN0YXJ0PTAKaWYoIWVuZCYmZW5kIT09MCllbmQ9dGhpcy5sZW5ndGgKaWYoIXRhcmdldF9zdGFydCl0YXJnZXRfc3RhcnQ9MAppZihlbmQ9PT1zdGFydClyZXR1cm4KaWYodGFyZ2V0Lmxlbmd0aD09PTB8fHNvdXJjZS5sZW5ndGg9PT0wKXJldHVybgphc3NlcnQoZW5kPj1zdGFydCwnc291cmNlRW5kIDwgc291cmNlU3RhcnQnKQphc3NlcnQodGFyZ2V0X3N0YXJ0Pj0wJiZ0YXJnZXRfc3RhcnQ8dGFyZ2V0Lmxlbmd0aCwndGFyZ2V0U3RhcnQgb3V0IG9mIGJvdW5kcycpCmFzc2VydChzdGFydD49MCYmc3RhcnQ8c291cmNlLmxlbmd0aCwnc291cmNlU3RhcnQgb3V0IG9mIGJvdW5kcycpCmFzc2VydChlbmQ+PTAmJmVuZDw9c291cmNlLmxlbmd0aCwnc291cmNlRW5kIG91dCBvZiBib3VuZHMnKQppZihlbmQ+dGhpcy5sZW5ndGgpCmVuZD10aGlzLmxlbmd0aAppZih0YXJnZXQubGVuZ3RoLXRhcmdldF9zdGFydDxlbmQtc3RhcnQpCmVuZD10YXJnZXQubGVuZ3RoLXRhcmdldF9zdGFydCtzdGFydAp2YXIgbGVuPWVuZC1zdGFydAppZihsZW48MTAwfHwhQnVmZmVyLl91c2VUeXBlZEFycmF5cyl7Zm9yKHZhciBpPTA7aTxsZW47aSsrKQp0YXJnZXRbaSt0YXJnZXRfc3RhcnRdPXRoaXNbaStzdGFydF19ZWxzZXt0YXJnZXQuX3NldCh0aGlzLnN1YmFycmF5KHN0YXJ0LHN0YXJ0K2xlbiksdGFyZ2V0X3N0YXJ0KX19CmZ1bmN0aW9uIF9iYXNlNjRTbGljZShidWYsc3RhcnQsZW5kKXtpZihzdGFydD09PTAmJmVuZD09PWJ1Zi5sZW5ndGgpe3JldHVybiBiYXNlNjQuZnJvbUJ5dGVBcnJheShidWYpfWVsc2V7cmV0dXJuIGJhc2U2NC5mcm9tQnl0ZUFycmF5KGJ1Zi5zbGljZShzdGFydCxlbmQpKX19CmZ1bmN0aW9uIF91dGY4U2xpY2UoYnVmLHN0YXJ0LGVuZCl7dmFyIHJlcz0nJwp2YXIgdG1wPScnCmVuZD1NYXRoLm1pbihidWYubGVuZ3RoLGVuZCkKZm9yKHZhciBpPXN0YXJ0O2k8ZW5kO2krKyl7aWYoYnVmW2ldPD0weDdGKXtyZXMrPWRlY29kZVV0ZjhDaGFyKHRtcCkrU3RyaW5nLmZyb21DaGFyQ29kZShidWZbaV0pCnRtcD0nJ31lbHNle3RtcCs9JyUnK2J1ZltpXS50b1N0cmluZygxNil9fQpyZXR1cm4gcmVzK2RlY29kZVV0ZjhDaGFyKHRtcCl9CmZ1bmN0aW9uIF9hc2NpaVNsaWNlKGJ1ZixzdGFydCxlbmQpe3ZhciByZXQ9JycKZW5kPU1hdGgubWluKGJ1Zi5sZW5ndGgsZW5kKQpmb3IodmFyIGk9c3RhcnQ7aTxlbmQ7aSsrKQpyZXQrPVN0cmluZy5mcm9tQ2hhckNvZGUoYnVmW2ldKQpyZXR1cm4gcmV0fQpmdW5jdGlvbiBfYmluYXJ5U2xpY2UoYnVmLHN0YXJ0LGVuZCl7cmV0dXJuIF9hc2NpaVNsaWNlKGJ1ZixzdGFydCxlbmQpfQpmdW5jdGlvbiBfaGV4U2xpY2UoYnVmLHN0YXJ0LGVuZCl7dmFyIGxlbj1idWYubGVuZ3RoCmlmKCFzdGFydHx8c3RhcnQ8MClzdGFydD0wCmlmKCFlbmR8fGVuZDwwfHxlbmQ+bGVuKWVuZD1sZW4KdmFyIG91dD0nJwpmb3IodmFyIGk9c3RhcnQ7aTxlbmQ7aSsrKXtvdXQrPXRvSGV4KGJ1ZltpXSl9CnJldHVybiBvdXR9CmZ1bmN0aW9uIF91dGYxNmxlU2xpY2UoYnVmLHN0YXJ0LGVuZCl7dmFyIGJ5dGVzPWJ1Zi5zbGljZShzdGFydCxlbmQpCnZhciByZXM9JycKZm9yKHZhciBpPTA7aTxieXRlcy5sZW5ndGg7aSs9Mil7cmVzKz1TdHJpbmcuZnJvbUNoYXJDb2RlKGJ5dGVzW2ldK2J5dGVzW2krMV0qMjU2KX0KcmV0dXJuIHJlc30KQnVmZmVyLnByb3RvdHlwZS5zbGljZT1mdW5jdGlvbihzdGFydCxlbmQpe3ZhciBsZW49dGhpcy5sZW5ndGgKc3RhcnQ9Y2xhbXAoc3RhcnQsbGVuLDApCmVuZD1jbGFtcChlbmQsbGVuLGxlbikKaWYoQnVmZmVyLl91c2VUeXBlZEFycmF5cyl7cmV0dXJuIEJ1ZmZlci5fYXVnbWVudCh0aGlzLnN1YmFycmF5KHN0YXJ0LGVuZCkpfWVsc2V7dmFyIHNsaWNlTGVuPWVuZC1zdGFydAp2YXIgbmV3QnVmPW5ldyBCdWZmZXIoc2xpY2VMZW4sdW5kZWZpbmVkLHRydWUpCmZvcih2YXIgaT0wO2k8c2xpY2VMZW47aSsrKXtuZXdCdWZbaV09dGhpc1tpK3N0YXJ0XX0KcmV0dXJuIG5ld0J1Zn19CkJ1ZmZlci5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKG9mZnNldCl7Y29uc29sZS5sb2coJy5nZXQoKSBpcyBkZXByZWNhdGVkLiBBY2Nlc3MgdXNpbmcgYXJyYXkgaW5kZXhlcyBpbnN0ZWFkLicpCnJldHVybiB0aGlzLnJlYWRVSW50OChvZmZzZXQpfQpCdWZmZXIucHJvdG90eXBlLnNldD1mdW5jdGlvbih2LG9mZnNldCl7Y29uc29sZS5sb2coJy5zZXQoKSBpcyBkZXByZWNhdGVkLiBBY2Nlc3MgdXNpbmcgYXJyYXkgaW5kZXhlcyBpbnN0ZWFkLicpCnJldHVybiB0aGlzLndyaXRlVUludDgodixvZmZzZXQpfQpCdWZmZXIucHJvdG90eXBlLnJlYWRVSW50OD1mdW5jdGlvbihvZmZzZXQsbm9Bc3NlcnQpe2lmKCFub0Fzc2VydCl7YXNzZXJ0KG9mZnNldCE9PXVuZGVmaW5lZCYmb2Zmc2V0IT09bnVsbCwnbWlzc2luZyBvZmZzZXQnKQphc3NlcnQob2Zmc2V0PHRoaXMubGVuZ3RoLCdUcnlpbmcgdG8gcmVhZCBiZXlvbmQgYnVmZmVyIGxlbmd0aCcpfQppZihvZmZzZXQ+PXRoaXMubGVuZ3RoKQpyZXR1cm4KcmV0dXJuIHRoaXNbb2Zmc2V0XX0KZnVuY3Rpb24gX3JlYWRVSW50MTYoYnVmLG9mZnNldCxsaXR0bGVFbmRpYW4sbm9Bc3NlcnQpe2lmKCFub0Fzc2VydCl7YXNzZXJ0KHR5cGVvZiBsaXR0bGVFbmRpYW49PT0nYm9vbGVhbicsJ21pc3Npbmcgb3IgaW52YWxpZCBlbmRpYW4nKQphc3NlcnQob2Zmc2V0IT09dW5kZWZpbmVkJiZvZmZzZXQhPT1udWxsLCdtaXNzaW5nIG9mZnNldCcpCmFzc2VydChvZmZzZXQrMTxidWYubGVuZ3RoLCdUcnlpbmcgdG8gcmVhZCBiZXlvbmQgYnVmZmVyIGxlbmd0aCcpfQp2YXIgbGVuPWJ1Zi5sZW5ndGgKaWYob2Zmc2V0Pj1sZW4pCnJldHVybgp2YXIgdmFsCmlmKGxpdHRsZUVuZGlhbil7dmFsPWJ1ZltvZmZzZXRdCmlmKG9mZnNldCsxPGxlbikKdmFsfD1idWZbb2Zmc2V0KzFdPDw4fWVsc2V7dmFsPWJ1ZltvZmZzZXRdPDw4CmlmKG9mZnNldCsxPGxlbikKdmFsfD1idWZbb2Zmc2V0KzFdfQpyZXR1cm4gdmFsfQpCdWZmZXIucHJvdG90eXBlLnJlYWRVSW50MTZMRT1mdW5jdGlvbihvZmZzZXQsbm9Bc3NlcnQpe3JldHVybiBfcmVhZFVJbnQxNih0aGlzLG9mZnNldCx0cnVlLG5vQXNzZXJ0KX0KQnVmZmVyLnByb3RvdHlwZS5yZWFkVUludDE2QkU9ZnVuY3Rpb24ob2Zmc2V0LG5vQXNzZXJ0KXtyZXR1cm4gX3JlYWRVSW50MTYodGhpcyxvZmZzZXQsZmFsc2Usbm9Bc3NlcnQpfQpmdW5jdGlvbiBfcmVhZFVJbnQzMihidWYsb2Zmc2V0LGxpdHRsZUVuZGlhbixub0Fzc2VydCl7aWYoIW5vQXNzZXJ0KXthc3NlcnQodHlwZW9mIGxpdHRsZUVuZGlhbj09PSdib29sZWFuJywnbWlzc2luZyBvciBpbnZhbGlkIGVuZGlhbicpCmFzc2VydChvZmZzZXQhPT11bmRlZmluZWQmJm9mZnNldCE9PW51bGwsJ21pc3Npbmcgb2Zmc2V0JykKYXNzZXJ0KG9mZnNldCszPGJ1Zi5sZW5ndGgsJ1RyeWluZyB0byByZWFkIGJleW9uZCBidWZmZXIgbGVuZ3RoJyl9CnZhciBsZW49YnVmLmxlbmd0aAppZihvZmZzZXQ+PWxlbikKcmV0dXJuCnZhciB2YWwKaWYobGl0dGxlRW5kaWFuKXtpZihvZmZzZXQrMjxsZW4pCnZhbD1idWZbb2Zmc2V0KzJdPDwxNgppZihvZmZzZXQrMTxsZW4pCnZhbHw9YnVmW29mZnNldCsxXTw8OAp2YWx8PWJ1ZltvZmZzZXRdCmlmKG9mZnNldCszPGxlbikKdmFsPXZhbCsoYnVmW29mZnNldCszXTw8MjQ+Pj4wKX1lbHNle2lmKG9mZnNldCsxPGxlbikKdmFsPWJ1ZltvZmZzZXQrMV08PDE2CmlmKG9mZnNldCsyPGxlbikKdmFsfD1idWZbb2Zmc2V0KzJdPDw4CmlmKG9mZnNldCszPGxlbikKdmFsfD1idWZbb2Zmc2V0KzNdCnZhbD12YWwrKGJ1ZltvZmZzZXRdPDwyND4+PjApfQpyZXR1cm4gdmFsfQpCdWZmZXIucHJvdG90eXBlLnJlYWRVSW50MzJMRT1mdW5jdGlvbihvZmZzZXQsbm9Bc3NlcnQpe3JldHVybiBfcmVhZFVJbnQzMih0aGlzLG9mZnNldCx0cnVlLG5vQXNzZXJ0KX0KQnVmZmVyLnByb3RvdHlwZS5yZWFkVUludDMyQkU9ZnVuY3Rpb24ob2Zmc2V0LG5vQXNzZXJ0KXtyZXR1cm4gX3JlYWRVSW50MzIodGhpcyxvZmZzZXQsZmFsc2Usbm9Bc3NlcnQpfQpCdWZmZXIucHJvdG90eXBlLnJlYWRJbnQ4PWZ1bmN0aW9uKG9mZnNldCxub0Fzc2VydCl7aWYoIW5vQXNzZXJ0KXthc3NlcnQob2Zmc2V0IT09dW5kZWZpbmVkJiZvZmZzZXQhPT1udWxsLCdtaXNzaW5nIG9mZnNldCcpCmFzc2VydChvZmZzZXQ8dGhpcy5sZW5ndGgsJ1RyeWluZyB0byByZWFkIGJleW9uZCBidWZmZXIgbGVuZ3RoJyl9CmlmKG9mZnNldD49dGhpcy5sZW5ndGgpCnJldHVybgp2YXIgbmVnPXRoaXNbb2Zmc2V0XSYweDgwCmlmKG5lZykKcmV0dXJuKDB4ZmYtdGhpc1tvZmZzZXRdKzEpKi0xCmVsc2UKcmV0dXJuIHRoaXNbb2Zmc2V0XX0KZnVuY3Rpb24gX3JlYWRJbnQxNihidWYsb2Zmc2V0LGxpdHRsZUVuZGlhbixub0Fzc2VydCl7aWYoIW5vQXNzZXJ0KXthc3NlcnQodHlwZW9mIGxpdHRsZUVuZGlhbj09PSdib29sZWFuJywnbWlzc2luZyBvciBpbnZhbGlkIGVuZGlhbicpCmFzc2VydChvZmZzZXQhPT11bmRlZmluZWQmJm9mZnNldCE9PW51bGwsJ21pc3Npbmcgb2Zmc2V0JykKYXNzZXJ0KG9mZnNldCsxPGJ1Zi5sZW5ndGgsJ1RyeWluZyB0byByZWFkIGJleW9uZCBidWZmZXIgbGVuZ3RoJyl9CnZhciBsZW49YnVmLmxlbmd0aAppZihvZmZzZXQ+PWxlbikKcmV0dXJuCnZhciB2YWw9X3JlYWRVSW50MTYoYnVmLG9mZnNldCxsaXR0bGVFbmRpYW4sdHJ1ZSkKdmFyIG5lZz12YWwmMHg4MDAwCmlmKG5lZykKcmV0dXJuKDB4ZmZmZi12YWwrMSkqLTEKZWxzZQpyZXR1cm4gdmFsfQpCdWZmZXIucHJvdG90eXBlLnJlYWRJbnQxNkxFPWZ1bmN0aW9uKG9mZnNldCxub0Fzc2VydCl7cmV0dXJuIF9yZWFkSW50MTYodGhpcyxvZmZzZXQsdHJ1ZSxub0Fzc2VydCl9CkJ1ZmZlci5wcm90b3R5cGUucmVhZEludDE2QkU9ZnVuY3Rpb24ob2Zmc2V0LG5vQXNzZXJ0KXtyZXR1cm4gX3JlYWRJbnQxNih0aGlzLG9mZnNldCxmYWxzZSxub0Fzc2VydCl9CmZ1bmN0aW9uIF9yZWFkSW50MzIoYnVmLG9mZnNldCxsaXR0bGVFbmRpYW4sbm9Bc3NlcnQpe2lmKCFub0Fzc2VydCl7YXNzZXJ0KHR5cGVvZiBsaXR0bGVFbmRpYW49PT0nYm9vbGVhbicsJ21pc3Npbmcgb3IgaW52YWxpZCBlbmRpYW4nKQphc3NlcnQob2Zmc2V0IT09dW5kZWZpbmVkJiZvZmZzZXQhPT1udWxsLCdtaXNzaW5nIG9mZnNldCcpCmFzc2VydChvZmZzZXQrMzxidWYubGVuZ3RoLCdUcnlpbmcgdG8gcmVhZCBiZXlvbmQgYnVmZmVyIGxlbmd0aCcpfQp2YXIgbGVuPWJ1Zi5sZW5ndGgKaWYob2Zmc2V0Pj1sZW4pCnJldHVybgp2YXIgdmFsPV9yZWFkVUludDMyKGJ1ZixvZmZzZXQsbGl0dGxlRW5kaWFuLHRydWUpCnZhciBuZWc9dmFsJjB4ODAwMDAwMDAKaWYobmVnKQpyZXR1cm4oMHhmZmZmZmZmZi12YWwrMSkqLTEKZWxzZQpyZXR1cm4gdmFsfQpCdWZmZXIucHJvdG90eXBlLnJlYWRJbnQzMkxFPWZ1bmN0aW9uKG9mZnNldCxub0Fzc2VydCl7cmV0dXJuIF9yZWFkSW50MzIodGhpcyxvZmZzZXQsdHJ1ZSxub0Fzc2VydCl9CkJ1ZmZlci5wcm90b3R5cGUucmVhZEludDMyQkU9ZnVuY3Rpb24ob2Zmc2V0LG5vQXNzZXJ0KXtyZXR1cm4gX3JlYWRJbnQzMih0aGlzLG9mZnNldCxmYWxzZSxub0Fzc2VydCl9CmZ1bmN0aW9uIF9yZWFkRmxvYXQoYnVmLG9mZnNldCxsaXR0bGVFbmRpYW4sbm9Bc3NlcnQpe2lmKCFub0Fzc2VydCl7YXNzZXJ0KHR5cGVvZiBsaXR0bGVFbmRpYW49PT0nYm9vbGVhbicsJ21pc3Npbmcgb3IgaW52YWxpZCBlbmRpYW4nKQphc3NlcnQob2Zmc2V0KzM8YnVmLmxlbmd0aCwnVHJ5aW5nIHRvIHJlYWQgYmV5b25kIGJ1ZmZlciBsZW5ndGgnKX0KcmV0dXJuIGllZWU3NTQucmVhZChidWYsb2Zmc2V0LGxpdHRsZUVuZGlhbiwyMyw0KX0KQnVmZmVyLnByb3RvdHlwZS5yZWFkRmxvYXRMRT1mdW5jdGlvbihvZmZzZXQsbm9Bc3NlcnQpe3JldHVybiBfcmVhZEZsb2F0KHRoaXMsb2Zmc2V0LHRydWUsbm9Bc3NlcnQpfQpCdWZmZXIucHJvdG90eXBlLnJlYWRGbG9hdEJFPWZ1bmN0aW9uKG9mZnNldCxub0Fzc2VydCl7cmV0dXJuIF9yZWFkRmxvYXQodGhpcyxvZmZzZXQsZmFsc2Usbm9Bc3NlcnQpfQpmdW5jdGlvbiBfcmVhZERvdWJsZShidWYsb2Zmc2V0LGxpdHRsZUVuZGlhbixub0Fzc2VydCl7aWYoIW5vQXNzZXJ0KXthc3NlcnQodHlwZW9mIGxpdHRsZUVuZGlhbj09PSdib29sZWFuJywnbWlzc2luZyBvciBpbnZhbGlkIGVuZGlhbicpCmFzc2VydChvZmZzZXQrNzxidWYubGVuZ3RoLCdUcnlpbmcgdG8gcmVhZCBiZXlvbmQgYnVmZmVyIGxlbmd0aCcpfQpyZXR1cm4gaWVlZTc1NC5yZWFkKGJ1ZixvZmZzZXQsbGl0dGxlRW5kaWFuLDUyLDgpfQpCdWZmZXIucHJvdG90eXBlLnJlYWREb3VibGVMRT1mdW5jdGlvbihvZmZzZXQsbm9Bc3NlcnQpe3JldHVybiBfcmVhZERvdWJsZSh0aGlzLG9mZnNldCx0cnVlLG5vQXNzZXJ0KX0KQnVmZmVyLnByb3RvdHlwZS5yZWFkRG91YmxlQkU9ZnVuY3Rpb24ob2Zmc2V0LG5vQXNzZXJ0KXtyZXR1cm4gX3JlYWREb3VibGUodGhpcyxvZmZzZXQsZmFsc2Usbm9Bc3NlcnQpfQpCdWZmZXIucHJvdG90eXBlLndyaXRlVUludDg9ZnVuY3Rpb24odmFsdWUsb2Zmc2V0LG5vQXNzZXJ0KXtpZighbm9Bc3NlcnQpe2Fzc2VydCh2YWx1ZSE9PXVuZGVmaW5lZCYmdmFsdWUhPT1udWxsLCdtaXNzaW5nIHZhbHVlJykKYXNzZXJ0KG9mZnNldCE9PXVuZGVmaW5lZCYmb2Zmc2V0IT09bnVsbCwnbWlzc2luZyBvZmZzZXQnKQphc3NlcnQob2Zmc2V0PHRoaXMubGVuZ3RoLCd0cnlpbmcgdG8gd3JpdGUgYmV5b25kIGJ1ZmZlciBsZW5ndGgnKQp2ZXJpZnVpbnQodmFsdWUsMHhmZil9CmlmKG9mZnNldD49dGhpcy5sZW5ndGgpcmV0dXJuCnRoaXNbb2Zmc2V0XT12YWx1ZX0KZnVuY3Rpb24gX3dyaXRlVUludDE2KGJ1Zix2YWx1ZSxvZmZzZXQsbGl0dGxlRW5kaWFuLG5vQXNzZXJ0KXtpZighbm9Bc3NlcnQpe2Fzc2VydCh2YWx1ZSE9PXVuZGVmaW5lZCYmdmFsdWUhPT1udWxsLCdtaXNzaW5nIHZhbHVlJykKYXNzZXJ0KHR5cGVvZiBsaXR0bGVFbmRpYW49PT0nYm9vbGVhbicsJ21pc3Npbmcgb3IgaW52YWxpZCBlbmRpYW4nKQphc3NlcnQob2Zmc2V0IT09dW5kZWZpbmVkJiZvZmZzZXQhPT1udWxsLCdtaXNzaW5nIG9mZnNldCcpCmFzc2VydChvZmZzZXQrMTxidWYubGVuZ3RoLCd0cnlpbmcgdG8gd3JpdGUgYmV5b25kIGJ1ZmZlciBsZW5ndGgnKQp2ZXJpZnVpbnQodmFsdWUsMHhmZmZmKX0KdmFyIGxlbj1idWYubGVuZ3RoCmlmKG9mZnNldD49bGVuKQpyZXR1cm4KZm9yKHZhciBpPTAsaj1NYXRoLm1pbihsZW4tb2Zmc2V0LDIpO2k8ajtpKyspe2J1ZltvZmZzZXQraV09KHZhbHVlJigweGZmPDwoOCoobGl0dGxlRW5kaWFuP2k6MS1pKSkpKT4+PihsaXR0bGVFbmRpYW4/aToxLWkpKjh9fQpCdWZmZXIucHJvdG90eXBlLndyaXRlVUludDE2TEU9ZnVuY3Rpb24odmFsdWUsb2Zmc2V0LG5vQXNzZXJ0KXtfd3JpdGVVSW50MTYodGhpcyx2YWx1ZSxvZmZzZXQsdHJ1ZSxub0Fzc2VydCl9CkJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50MTZCRT1mdW5jdGlvbih2YWx1ZSxvZmZzZXQsbm9Bc3NlcnQpe193cml0ZVVJbnQxNih0aGlzLHZhbHVlLG9mZnNldCxmYWxzZSxub0Fzc2VydCl9CmZ1bmN0aW9uIF93cml0ZVVJbnQzMihidWYsdmFsdWUsb2Zmc2V0LGxpdHRsZUVuZGlhbixub0Fzc2VydCl7aWYoIW5vQXNzZXJ0KXthc3NlcnQodmFsdWUhPT11bmRlZmluZWQmJnZhbHVlIT09bnVsbCwnbWlzc2luZyB2YWx1ZScpCmFzc2VydCh0eXBlb2YgbGl0dGxlRW5kaWFuPT09J2Jvb2xlYW4nLCdtaXNzaW5nIG9yIGludmFsaWQgZW5kaWFuJykKYXNzZXJ0KG9mZnNldCE9PXVuZGVmaW5lZCYmb2Zmc2V0IT09bnVsbCwnbWlzc2luZyBvZmZzZXQnKQphc3NlcnQob2Zmc2V0KzM8YnVmLmxlbmd0aCwndHJ5aW5nIHRvIHdyaXRlIGJleW9uZCBidWZmZXIgbGVuZ3RoJykKdmVyaWZ1aW50KHZhbHVlLDB4ZmZmZmZmZmYpfQp2YXIgbGVuPWJ1Zi5sZW5ndGgKaWYob2Zmc2V0Pj1sZW4pCnJldHVybgpmb3IodmFyIGk9MCxqPU1hdGgubWluKGxlbi1vZmZzZXQsNCk7aTxqO2krKyl7YnVmW29mZnNldCtpXT0odmFsdWU+Pj4obGl0dGxlRW5kaWFuP2k6My1pKSo4KSYweGZmfX0KQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnQzMkxFPWZ1bmN0aW9uKHZhbHVlLG9mZnNldCxub0Fzc2VydCl7X3dyaXRlVUludDMyKHRoaXMsdmFsdWUsb2Zmc2V0LHRydWUsbm9Bc3NlcnQpfQpCdWZmZXIucHJvdG90eXBlLndyaXRlVUludDMyQkU9ZnVuY3Rpb24odmFsdWUsb2Zmc2V0LG5vQXNzZXJ0KXtfd3JpdGVVSW50MzIodGhpcyx2YWx1ZSxvZmZzZXQsZmFsc2Usbm9Bc3NlcnQpfQpCdWZmZXIucHJvdG90eXBlLndyaXRlSW50OD1mdW5jdGlvbih2YWx1ZSxvZmZzZXQsbm9Bc3NlcnQpe2lmKCFub0Fzc2VydCl7YXNzZXJ0KHZhbHVlIT09dW5kZWZpbmVkJiZ2YWx1ZSE9PW51bGwsJ21pc3NpbmcgdmFsdWUnKQphc3NlcnQob2Zmc2V0IT09dW5kZWZpbmVkJiZvZmZzZXQhPT1udWxsLCdtaXNzaW5nIG9mZnNldCcpCmFzc2VydChvZmZzZXQ8dGhpcy5sZW5ndGgsJ1RyeWluZyB0byB3cml0ZSBiZXlvbmQgYnVmZmVyIGxlbmd0aCcpCnZlcmlmc2ludCh2YWx1ZSwweDdmLC0weDgwKX0KaWYob2Zmc2V0Pj10aGlzLmxlbmd0aCkKcmV0dXJuCmlmKHZhbHVlPj0wKQp0aGlzLndyaXRlVUludDgodmFsdWUsb2Zmc2V0LG5vQXNzZXJ0KQplbHNlCnRoaXMud3JpdGVVSW50OCgweGZmK3ZhbHVlKzEsb2Zmc2V0LG5vQXNzZXJ0KX0KZnVuY3Rpb24gX3dyaXRlSW50MTYoYnVmLHZhbHVlLG9mZnNldCxsaXR0bGVFbmRpYW4sbm9Bc3NlcnQpe2lmKCFub0Fzc2VydCl7YXNzZXJ0KHZhbHVlIT09dW5kZWZpbmVkJiZ2YWx1ZSE9PW51bGwsJ21pc3NpbmcgdmFsdWUnKQphc3NlcnQodHlwZW9mIGxpdHRsZUVuZGlhbj09PSdib29sZWFuJywnbWlzc2luZyBvciBpbnZhbGlkIGVuZGlhbicpCmFzc2VydChvZmZzZXQhPT11bmRlZmluZWQmJm9mZnNldCE9PW51bGwsJ21pc3Npbmcgb2Zmc2V0JykKYXNzZXJ0KG9mZnNldCsxPGJ1Zi5sZW5ndGgsJ1RyeWluZyB0byB3cml0ZSBiZXlvbmQgYnVmZmVyIGxlbmd0aCcpCnZlcmlmc2ludCh2YWx1ZSwweDdmZmYsLTB4ODAwMCl9CnZhciBsZW49YnVmLmxlbmd0aAppZihvZmZzZXQ+PWxlbikKcmV0dXJuCmlmKHZhbHVlPj0wKQpfd3JpdGVVSW50MTYoYnVmLHZhbHVlLG9mZnNldCxsaXR0bGVFbmRpYW4sbm9Bc3NlcnQpCmVsc2UKX3dyaXRlVUludDE2KGJ1ZiwweGZmZmYrdmFsdWUrMSxvZmZzZXQsbGl0dGxlRW5kaWFuLG5vQXNzZXJ0KX0KQnVmZmVyLnByb3RvdHlwZS53cml0ZUludDE2TEU9ZnVuY3Rpb24odmFsdWUsb2Zmc2V0LG5vQXNzZXJ0KXtfd3JpdGVJbnQxNih0aGlzLHZhbHVlLG9mZnNldCx0cnVlLG5vQXNzZXJ0KX0KQnVmZmVyLnByb3RvdHlwZS53cml0ZUludDE2QkU9ZnVuY3Rpb24odmFsdWUsb2Zmc2V0LG5vQXNzZXJ0KXtfd3JpdGVJbnQxNih0aGlzLHZhbHVlLG9mZnNldCxmYWxzZSxub0Fzc2VydCl9CmZ1bmN0aW9uIF93cml0ZUludDMyKGJ1Zix2YWx1ZSxvZmZzZXQsbGl0dGxlRW5kaWFuLG5vQXNzZXJ0KXtpZighbm9Bc3NlcnQpe2Fzc2VydCh2YWx1ZSE9PXVuZGVmaW5lZCYmdmFsdWUhPT1udWxsLCdtaXNzaW5nIHZhbHVlJykKYXNzZXJ0KHR5cGVvZiBsaXR0bGVFbmRpYW49PT0nYm9vbGVhbicsJ21pc3Npbmcgb3IgaW52YWxpZCBlbmRpYW4nKQphc3NlcnQob2Zmc2V0IT09dW5kZWZpbmVkJiZvZmZzZXQhPT1udWxsLCdtaXNzaW5nIG9mZnNldCcpCmFzc2VydChvZmZzZXQrMzxidWYubGVuZ3RoLCdUcnlpbmcgdG8gd3JpdGUgYmV5b25kIGJ1ZmZlciBsZW5ndGgnKQp2ZXJpZnNpbnQodmFsdWUsMHg3ZmZmZmZmZiwtMHg4MDAwMDAwMCl9CnZhciBsZW49YnVmLmxlbmd0aAppZihvZmZzZXQ+PWxlbikKcmV0dXJuCmlmKHZhbHVlPj0wKQpfd3JpdGVVSW50MzIoYnVmLHZhbHVlLG9mZnNldCxsaXR0bGVFbmRpYW4sbm9Bc3NlcnQpCmVsc2UKX3dyaXRlVUludDMyKGJ1ZiwweGZmZmZmZmZmK3ZhbHVlKzEsb2Zmc2V0LGxpdHRsZUVuZGlhbixub0Fzc2VydCl9CkJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnQzMkxFPWZ1bmN0aW9uKHZhbHVlLG9mZnNldCxub0Fzc2VydCl7X3dyaXRlSW50MzIodGhpcyx2YWx1ZSxvZmZzZXQsdHJ1ZSxub0Fzc2VydCl9CkJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnQzMkJFPWZ1bmN0aW9uKHZhbHVlLG9mZnNldCxub0Fzc2VydCl7X3dyaXRlSW50MzIodGhpcyx2YWx1ZSxvZmZzZXQsZmFsc2Usbm9Bc3NlcnQpfQpmdW5jdGlvbiBfd3JpdGVGbG9hdChidWYsdmFsdWUsb2Zmc2V0LGxpdHRsZUVuZGlhbixub0Fzc2VydCl7aWYoIW5vQXNzZXJ0KXthc3NlcnQodmFsdWUhPT11bmRlZmluZWQmJnZhbHVlIT09bnVsbCwnbWlzc2luZyB2YWx1ZScpCmFzc2VydCh0eXBlb2YgbGl0dGxlRW5kaWFuPT09J2Jvb2xlYW4nLCdtaXNzaW5nIG9yIGludmFsaWQgZW5kaWFuJykKYXNzZXJ0KG9mZnNldCE9PXVuZGVmaW5lZCYmb2Zmc2V0IT09bnVsbCwnbWlzc2luZyBvZmZzZXQnKQphc3NlcnQob2Zmc2V0KzM8YnVmLmxlbmd0aCwnVHJ5aW5nIHRvIHdyaXRlIGJleW9uZCBidWZmZXIgbGVuZ3RoJykKdmVyaWZJRUVFNzU0KHZhbHVlLDMuNDAyODIzNDY2Mzg1Mjg4NmUrMzgsLTMuNDAyODIzNDY2Mzg1Mjg4NmUrMzgpfQp2YXIgbGVuPWJ1Zi5sZW5ndGgKaWYob2Zmc2V0Pj1sZW4pCnJldHVybgppZWVlNzU0LndyaXRlKGJ1Zix2YWx1ZSxvZmZzZXQsbGl0dGxlRW5kaWFuLDIzLDQpfQpCdWZmZXIucHJvdG90eXBlLndyaXRlRmxvYXRMRT1mdW5jdGlvbih2YWx1ZSxvZmZzZXQsbm9Bc3NlcnQpe193cml0ZUZsb2F0KHRoaXMsdmFsdWUsb2Zmc2V0LHRydWUsbm9Bc3NlcnQpfQpCdWZmZXIucHJvdG90eXBlLndyaXRlRmxvYXRCRT1mdW5jdGlvbih2YWx1ZSxvZmZzZXQsbm9Bc3NlcnQpe193cml0ZUZsb2F0KHRoaXMsdmFsdWUsb2Zmc2V0LGZhbHNlLG5vQXNzZXJ0KX0KZnVuY3Rpb24gX3dyaXRlRG91YmxlKGJ1Zix2YWx1ZSxvZmZzZXQsbGl0dGxlRW5kaWFuLG5vQXNzZXJ0KXtpZighbm9Bc3NlcnQpe2Fzc2VydCh2YWx1ZSE9PXVuZGVmaW5lZCYmdmFsdWUhPT1udWxsLCdtaXNzaW5nIHZhbHVlJykKYXNzZXJ0KHR5cGVvZiBsaXR0bGVFbmRpYW49PT0nYm9vbGVhbicsJ21pc3Npbmcgb3IgaW52YWxpZCBlbmRpYW4nKQphc3NlcnQob2Zmc2V0IT09dW5kZWZpbmVkJiZvZmZzZXQhPT1udWxsLCdtaXNzaW5nIG9mZnNldCcpCmFzc2VydChvZmZzZXQrNzxidWYubGVuZ3RoLCdUcnlpbmcgdG8gd3JpdGUgYmV5b25kIGJ1ZmZlciBsZW5ndGgnKQp2ZXJpZklFRUU3NTQodmFsdWUsMS43OTc2OTMxMzQ4NjIzMTU3RSszMDgsLTEuNzk3NjkzMTM0ODYyMzE1N0UrMzA4KX0KdmFyIGxlbj1idWYubGVuZ3RoCmlmKG9mZnNldD49bGVuKQpyZXR1cm4KaWVlZTc1NC53cml0ZShidWYsdmFsdWUsb2Zmc2V0LGxpdHRsZUVuZGlhbiw1Miw4KX0KQnVmZmVyLnByb3RvdHlwZS53cml0ZURvdWJsZUxFPWZ1bmN0aW9uKHZhbHVlLG9mZnNldCxub0Fzc2VydCl7X3dyaXRlRG91YmxlKHRoaXMsdmFsdWUsb2Zmc2V0LHRydWUsbm9Bc3NlcnQpfQpCdWZmZXIucHJvdG90eXBlLndyaXRlRG91YmxlQkU9ZnVuY3Rpb24odmFsdWUsb2Zmc2V0LG5vQXNzZXJ0KXtfd3JpdGVEb3VibGUodGhpcyx2YWx1ZSxvZmZzZXQsZmFsc2Usbm9Bc3NlcnQpfQpCdWZmZXIucHJvdG90eXBlLmZpbGw9ZnVuY3Rpb24odmFsdWUsc3RhcnQsZW5kKXtpZighdmFsdWUpdmFsdWU9MAppZighc3RhcnQpc3RhcnQ9MAppZighZW5kKWVuZD10aGlzLmxlbmd0aAppZih0eXBlb2YgdmFsdWU9PT0nc3RyaW5nJyl7dmFsdWU9dmFsdWUuY2hhckNvZGVBdCgwKX0KYXNzZXJ0KHR5cGVvZiB2YWx1ZT09PSdudW1iZXInJiYhaXNOYU4odmFsdWUpLCd2YWx1ZSBpcyBub3QgYSBudW1iZXInKQphc3NlcnQoZW5kPj1zdGFydCwnZW5kIDwgc3RhcnQnKQppZihlbmQ9PT1zdGFydClyZXR1cm4KaWYodGhpcy5sZW5ndGg9PT0wKXJldHVybgphc3NlcnQoc3RhcnQ+PTAmJnN0YXJ0PHRoaXMubGVuZ3RoLCdzdGFydCBvdXQgb2YgYm91bmRzJykKYXNzZXJ0KGVuZD49MCYmZW5kPD10aGlzLmxlbmd0aCwnZW5kIG91dCBvZiBib3VuZHMnKQpmb3IodmFyIGk9c3RhcnQ7aTxlbmQ7aSsrKXt0aGlzW2ldPXZhbHVlfX0KQnVmZmVyLnByb3RvdHlwZS5pbnNwZWN0PWZ1bmN0aW9uKCl7dmFyIG91dD1bXQp2YXIgbGVuPXRoaXMubGVuZ3RoCmZvcih2YXIgaT0wO2k8bGVuO2krKyl7b3V0W2ldPXRvSGV4KHRoaXNbaV0pCmlmKGk9PT1leHBvcnRzLklOU1BFQ1RfTUFYX0JZVEVTKXtvdXRbaSsxXT0nLi4uJwpicmVha319CnJldHVybic8QnVmZmVyICcrb3V0LmpvaW4oJyAnKSsnPid9CkJ1ZmZlci5wcm90b3R5cGUudG9BcnJheUJ1ZmZlcj1mdW5jdGlvbigpe2lmKHR5cGVvZiBVaW50OEFycmF5IT09J3VuZGVmaW5lZCcpe2lmKEJ1ZmZlci5fdXNlVHlwZWRBcnJheXMpe3JldHVybihuZXcgQnVmZmVyKHRoaXMpKS5idWZmZXJ9ZWxzZXt2YXIgYnVmPW5ldyBVaW50OEFycmF5KHRoaXMubGVuZ3RoKQpmb3IodmFyIGk9MCxsZW49YnVmLmxlbmd0aDtpPGxlbjtpKz0xKQpidWZbaV09dGhpc1tpXQpyZXR1cm4gYnVmLmJ1ZmZlcn19ZWxzZXt0aHJvdyBuZXcgRXJyb3IoJ0J1ZmZlci50b0FycmF5QnVmZmVyIG5vdCBzdXBwb3J0ZWQgaW4gdGhpcyBicm93c2VyJyl9fQpmdW5jdGlvbiBzdHJpbmd0cmltKHN0cil7aWYoc3RyLnRyaW0pcmV0dXJuIHN0ci50cmltKCkKcmV0dXJuIHN0ci5yZXBsYWNlKC9eXHMrfFxzKyQvZywnJyl9CnZhciBCUD1CdWZmZXIucHJvdG90eXBlCkJ1ZmZlci5fYXVnbWVudD1mdW5jdGlvbihhcnIpe2Fyci5faXNCdWZmZXI9dHJ1ZQphcnIuX2dldD1hcnIuZ2V0CmFyci5fc2V0PWFyci5zZXQKYXJyLmdldD1CUC5nZXQKYXJyLnNldD1CUC5zZXQKYXJyLndyaXRlPUJQLndyaXRlCmFyci50b1N0cmluZz1CUC50b1N0cmluZwphcnIudG9Mb2NhbGVTdHJpbmc9QlAudG9TdHJpbmcKYXJyLnRvSlNPTj1CUC50b0pTT04KYXJyLmNvcHk9QlAuY29weQphcnIuc2xpY2U9QlAuc2xpY2UKYXJyLnJlYWRVSW50OD1CUC5yZWFkVUludDgKYXJyLnJlYWRVSW50MTZMRT1CUC5yZWFkVUludDE2TEUKYXJyLnJlYWRVSW50MTZCRT1CUC5yZWFkVUludDE2QkUKYXJyLnJlYWRVSW50MzJMRT1CUC5yZWFkVUludDMyTEUKYXJyLnJlYWRVSW50MzJCRT1CUC5yZWFkVUludDMyQkUKYXJyLnJlYWRJbnQ4PUJQLnJlYWRJbnQ4CmFyci5yZWFkSW50MTZMRT1CUC5yZWFkSW50MTZMRQphcnIucmVhZEludDE2QkU9QlAucmVhZEludDE2QkUKYXJyLnJlYWRJbnQzMkxFPUJQLnJlYWRJbnQzMkxFCmFyci5yZWFkSW50MzJCRT1CUC5yZWFkSW50MzJCRQphcnIucmVhZEZsb2F0TEU9QlAucmVhZEZsb2F0TEUKYXJyLnJlYWRGbG9hdEJFPUJQLnJlYWRGbG9hdEJFCmFyci5yZWFkRG91YmxlTEU9QlAucmVhZERvdWJsZUxFCmFyci5yZWFkRG91YmxlQkU9QlAucmVhZERvdWJsZUJFCmFyci53cml0ZVVJbnQ4PUJQLndyaXRlVUludDgKYXJyLndyaXRlVUludDE2TEU9QlAud3JpdGVVSW50MTZMRQphcnIud3JpdGVVSW50MTZCRT1CUC53cml0ZVVJbnQxNkJFCmFyci53cml0ZVVJbnQzMkxFPUJQLndyaXRlVUludDMyTEUKYXJyLndyaXRlVUludDMyQkU9QlAud3JpdGVVSW50MzJCRQphcnIud3JpdGVJbnQ4PUJQLndyaXRlSW50OAphcnIud3JpdGVJbnQxNkxFPUJQLndyaXRlSW50MTZMRQphcnIud3JpdGVJbnQxNkJFPUJQLndyaXRlSW50MTZCRQphcnIud3JpdGVJbnQzMkxFPUJQLndyaXRlSW50MzJMRQphcnIud3JpdGVJbnQzMkJFPUJQLndyaXRlSW50MzJCRQphcnIud3JpdGVGbG9hdExFPUJQLndyaXRlRmxvYXRMRQphcnIud3JpdGVGbG9hdEJFPUJQLndyaXRlRmxvYXRCRQphcnIud3JpdGVEb3VibGVMRT1CUC53cml0ZURvdWJsZUxFCmFyci53cml0ZURvdWJsZUJFPUJQLndyaXRlRG91YmxlQkUKYXJyLmZpbGw9QlAuZmlsbAphcnIuaW5zcGVjdD1CUC5pbnNwZWN0CmFyci50b0FycmF5QnVmZmVyPUJQLnRvQXJyYXlCdWZmZXIKcmV0dXJuIGFycn0KZnVuY3Rpb24gY2xhbXAoaW5kZXgsbGVuLGRlZmF1bHRWYWx1ZSl7aWYodHlwZW9mIGluZGV4IT09J251bWJlcicpcmV0dXJuIGRlZmF1bHRWYWx1ZQppbmRleD1+fmluZGV4O2lmKGluZGV4Pj1sZW4pcmV0dXJuIGxlbgppZihpbmRleD49MClyZXR1cm4gaW5kZXgKaW5kZXgrPWxlbgppZihpbmRleD49MClyZXR1cm4gaW5kZXgKcmV0dXJuIDB9CmZ1bmN0aW9uIGNvZXJjZShsZW5ndGgpe2xlbmd0aD1+fk1hdGguY2VpbCgrbGVuZ3RoKQpyZXR1cm4gbGVuZ3RoPDA/MDpsZW5ndGh9CmZ1bmN0aW9uIGlzQXJyYXkoc3ViamVjdCl7cmV0dXJuKEFycmF5LmlzQXJyYXl8fGZ1bmN0aW9uKHN1YmplY3Qpe3JldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoc3ViamVjdCk9PT0nW29iamVjdCBBcnJheV0nfSkoc3ViamVjdCl9CmZ1bmN0aW9uIGlzQXJyYXlpc2goc3ViamVjdCl7cmV0dXJuIGlzQXJyYXkoc3ViamVjdCl8fEJ1ZmZlci5pc0J1ZmZlcihzdWJqZWN0KXx8c3ViamVjdCYmdHlwZW9mIHN1YmplY3Q9PT0nb2JqZWN0JyYmdHlwZW9mIHN1YmplY3QubGVuZ3RoPT09J251bWJlcid9CmZ1bmN0aW9uIHRvSGV4KG4pe2lmKG48MTYpcmV0dXJuJzAnK24udG9TdHJpbmcoMTYpCnJldHVybiBuLnRvU3RyaW5nKDE2KX0KZnVuY3Rpb24gdXRmOFRvQnl0ZXMoc3RyKXt2YXIgYnl0ZUFycmF5PVtdCmZvcih2YXIgaT0wO2k8c3RyLmxlbmd0aDtpKyspe3ZhciBiPXN0ci5jaGFyQ29kZUF0KGkpCmlmKGI8PTB4N0YpCmJ5dGVBcnJheS5wdXNoKHN0ci5jaGFyQ29kZUF0KGkpKQplbHNle3ZhciBzdGFydD1pCmlmKGI+PTB4RDgwMCYmYjw9MHhERkZGKWkrKwp2YXIgaD1lbmNvZGVVUklDb21wb25lbnQoc3RyLnNsaWNlKHN0YXJ0LGkrMSkpLnN1YnN0cigxKS5zcGxpdCgnJScpCmZvcih2YXIgaj0wO2o8aC5sZW5ndGg7aisrKQpieXRlQXJyYXkucHVzaChwYXJzZUludChoW2pdLDE2KSl9fQpyZXR1cm4gYnl0ZUFycmF5fQpmdW5jdGlvbiBhc2NpaVRvQnl0ZXMoc3RyKXt2YXIgYnl0ZUFycmF5PVtdCmZvcih2YXIgaT0wO2k8c3RyLmxlbmd0aDtpKyspe2J5dGVBcnJheS5wdXNoKHN0ci5jaGFyQ29kZUF0KGkpJjB4RkYpfQpyZXR1cm4gYnl0ZUFycmF5fQpmdW5jdGlvbiB1dGYxNmxlVG9CeXRlcyhzdHIpe3ZhciBjLGhpLGxvCnZhciBieXRlQXJyYXk9W10KZm9yKHZhciBpPTA7aTxzdHIubGVuZ3RoO2krKyl7Yz1zdHIuY2hhckNvZGVBdChpKQpoaT1jPj44CmxvPWMlMjU2CmJ5dGVBcnJheS5wdXNoKGxvKQpieXRlQXJyYXkucHVzaChoaSl9CnJldHVybiBieXRlQXJyYXl9CmZ1bmN0aW9uIGJhc2U2NFRvQnl0ZXMoc3RyKXtyZXR1cm4gYmFzZTY0LnRvQnl0ZUFycmF5KHN0cil9CmZ1bmN0aW9uIGJsaXRCdWZmZXIoc3JjLGRzdCxvZmZzZXQsbGVuZ3RoKXt2YXIgcG9zCmZvcih2YXIgaT0wO2k8bGVuZ3RoO2krKyl7aWYoKGkrb2Zmc2V0Pj1kc3QubGVuZ3RoKXx8KGk+PXNyYy5sZW5ndGgpKQpicmVhawpkc3RbaStvZmZzZXRdPXNyY1tpXX0KcmV0dXJuIGl9CmZ1bmN0aW9uIGRlY29kZVV0ZjhDaGFyKHN0cil7dHJ5e3JldHVybiBkZWNvZGVVUklDb21wb25lbnQoc3RyKX1jYXRjaChlcnIpe3JldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlKDB4RkZGRCl9fQpmdW5jdGlvbiB2ZXJpZnVpbnQodmFsdWUsbWF4KXthc3NlcnQodHlwZW9mIHZhbHVlPT09J251bWJlcicsJ2Nhbm5vdCB3cml0ZSBhIG5vbi1udW1iZXIgYXMgYSBudW1iZXInKQphc3NlcnQodmFsdWU+PTAsJ3NwZWNpZmllZCBhIG5lZ2F0aXZlIHZhbHVlIGZvciB3cml0aW5nIGFuIHVuc2lnbmVkIHZhbHVlJykKYXNzZXJ0KHZhbHVlPD1tYXgsJ3ZhbHVlIGlzIGxhcmdlciB0aGFuIG1heGltdW0gdmFsdWUgZm9yIHR5cGUnKQphc3NlcnQoTWF0aC5mbG9vcih2YWx1ZSk9PT12YWx1ZSwndmFsdWUgaGFzIGEgZnJhY3Rpb25hbCBjb21wb25lbnQnKX0KZnVuY3Rpb24gdmVyaWZzaW50KHZhbHVlLG1heCxtaW4pe2Fzc2VydCh0eXBlb2YgdmFsdWU9PT0nbnVtYmVyJywnY2Fubm90IHdyaXRlIGEgbm9uLW51bWJlciBhcyBhIG51bWJlcicpCmFzc2VydCh2YWx1ZTw9bWF4LCd2YWx1ZSBsYXJnZXIgdGhhbiBtYXhpbXVtIGFsbG93ZWQgdmFsdWUnKQphc3NlcnQodmFsdWU+PW1pbiwndmFsdWUgc21hbGxlciB0aGFuIG1pbmltdW0gYWxsb3dlZCB2YWx1ZScpCmFzc2VydChNYXRoLmZsb29yKHZhbHVlKT09PXZhbHVlLCd2YWx1ZSBoYXMgYSBmcmFjdGlvbmFsIGNvbXBvbmVudCcpfQpmdW5jdGlvbiB2ZXJpZklFRUU3NTQodmFsdWUsbWF4LG1pbil7YXNzZXJ0KHR5cGVvZiB2YWx1ZT09PSdudW1iZXInLCdjYW5ub3Qgd3JpdGUgYSBub24tbnVtYmVyIGFzIGEgbnVtYmVyJykKYXNzZXJ0KHZhbHVlPD1tYXgsJ3ZhbHVlIGxhcmdlciB0aGFuIG1heGltdW0gYWxsb3dlZCB2YWx1ZScpCmFzc2VydCh2YWx1ZT49bWluLCd2YWx1ZSBzbWFsbGVyIHRoYW4gbWluaW11bSBhbGxvd2VkIHZhbHVlJyl9CmZ1bmN0aW9uIGFzc2VydCh0ZXN0LG1lc3NhZ2Upe2lmKCF0ZXN0KXRocm93IG5ldyBFcnJvcihtZXNzYWdlfHwnRmFpbGVkIGFzc2VydGlvbicpfX0pLmNhbGwodGhpcyxyZXF1aXJlKCJvTWZwQW4iKSx0eXBlb2Ygc2VsZiE9PSJ1bmRlZmluZWQiP3NlbGY6dHlwZW9mIHdpbmRvdyE9PSJ1bmRlZmluZWQiP3dpbmRvdzp7fSxyZXF1aXJlKCJidWZmZXIiKS5CdWZmZXIsYXJndW1lbnRzWzNdLGFyZ3VtZW50c1s0XSxhcmd1bWVudHNbNV0sYXJndW1lbnRzWzZdLCIvLi4vLi4vbm9kZV9tb2R1bGVzL2d1bHAtYnJvd3NlcmlmeS9ub2RlX21vZHVsZXMvYnJvd3NlcmlmeS9ub2RlX21vZHVsZXMvYnVmZmVyL2luZGV4LmpzIiwiLy4uLy4uL25vZGVfbW9kdWxlcy9ndWxwLWJyb3dzZXJpZnkvbm9kZV9tb2R1bGVzL2Jyb3dzZXJpZnkvbm9kZV9tb2R1bGVzL2J1ZmZlciIpfSx7ImJhc2U2NC1qcyI6NSwiYnVmZmVyIjo0LCJpZWVlNzU0Ijo2LCJvTWZwQW4iOjd9XSw1OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsoZnVuY3Rpb24ocHJvY2VzcyxnbG9iYWwsQnVmZmVyLF9fYXJndW1lbnQwLF9fYXJndW1lbnQxLF9fYXJndW1lbnQyLF9fYXJndW1lbnQzLF9fZmlsZW5hbWUsX19kaXJuYW1lKXt2YXIgbG9va3VwPSdBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvJzs7KGZ1bmN0aW9uKGV4cG9ydHMpeyd1c2Ugc3RyaWN0Jzt2YXIgQXJyPSh0eXBlb2YgVWludDhBcnJheSE9PSd1bmRlZmluZWQnKT9VaW50OEFycmF5OkFycmF5CnZhciBQTFVTPScrJy5jaGFyQ29kZUF0KDApCnZhciBTTEFTSD0nLycuY2hhckNvZGVBdCgwKQp2YXIgTlVNQkVSPScwJy5jaGFyQ29kZUF0KDApCnZhciBMT1dFUj0nYScuY2hhckNvZGVBdCgwKQp2YXIgVVBQRVI9J0EnLmNoYXJDb2RlQXQoMCkKZnVuY3Rpb24gZGVjb2RlKGVsdCl7dmFyIGNvZGU9ZWx0LmNoYXJDb2RlQXQoMCkKaWYoY29kZT09PVBMVVMpCnJldHVybiA2MgppZihjb2RlPT09U0xBU0gpCnJldHVybiA2MwppZihjb2RlPE5VTUJFUikKcmV0dXJuLTEKaWYoY29kZTxOVU1CRVIrMTApCnJldHVybiBjb2RlLU5VTUJFUisyNisyNgppZihjb2RlPFVQUEVSKzI2KQpyZXR1cm4gY29kZS1VUFBFUgppZihjb2RlPExPV0VSKzI2KQpyZXR1cm4gY29kZS1MT1dFUisyNn0KZnVuY3Rpb24gYjY0VG9CeXRlQXJyYXkoYjY0KXt2YXIgaSxqLGwsdG1wLHBsYWNlSG9sZGVycyxhcnIKaWYoYjY0Lmxlbmd0aCU0PjApe3Rocm93IG5ldyBFcnJvcignSW52YWxpZCBzdHJpbmcuIExlbmd0aCBtdXN0IGJlIGEgbXVsdGlwbGUgb2YgNCcpfQp2YXIgbGVuPWI2NC5sZW5ndGgKcGxhY2VIb2xkZXJzPSc9Jz09PWI2NC5jaGFyQXQobGVuLTIpPzI6Jz0nPT09YjY0LmNoYXJBdChsZW4tMSk/MTowCmFycj1uZXcgQXJyKGI2NC5sZW5ndGgqMy80LXBsYWNlSG9sZGVycykKbD1wbGFjZUhvbGRlcnM+MD9iNjQubGVuZ3RoLTQ6YjY0Lmxlbmd0aAp2YXIgTD0wCmZ1bmN0aW9uIHB1c2godil7YXJyW0wrK109dn0KZm9yKGk9MCxqPTA7aTxsO2krPTQsais9Myl7dG1wPShkZWNvZGUoYjY0LmNoYXJBdChpKSk8PDE4KXwoZGVjb2RlKGI2NC5jaGFyQXQoaSsxKSk8PDEyKXwoZGVjb2RlKGI2NC5jaGFyQXQoaSsyKSk8PDYpfGRlY29kZShiNjQuY2hhckF0KGkrMykpCnB1c2goKHRtcCYweEZGMDAwMCk+PjE2KQpwdXNoKCh0bXAmMHhGRjAwKT4+OCkKcHVzaCh0bXAmMHhGRil9CmlmKHBsYWNlSG9sZGVycz09PTIpe3RtcD0oZGVjb2RlKGI2NC5jaGFyQXQoaSkpPDwyKXwoZGVjb2RlKGI2NC5jaGFyQXQoaSsxKSk+PjQpCnB1c2godG1wJjB4RkYpfWVsc2UgaWYocGxhY2VIb2xkZXJzPT09MSl7dG1wPShkZWNvZGUoYjY0LmNoYXJBdChpKSk8PDEwKXwoZGVjb2RlKGI2NC5jaGFyQXQoaSsxKSk8PDQpfChkZWNvZGUoYjY0LmNoYXJBdChpKzIpKT4+MikKcHVzaCgodG1wPj44KSYweEZGKQpwdXNoKHRtcCYweEZGKX0KcmV0dXJuIGFycn0KZnVuY3Rpb24gdWludDhUb0Jhc2U2NCh1aW50OCl7dmFyIGksZXh0cmFCeXRlcz11aW50OC5sZW5ndGglMyxvdXRwdXQ9IiIsdGVtcCxsZW5ndGgKZnVuY3Rpb24gZW5jb2RlKG51bSl7cmV0dXJuIGxvb2t1cC5jaGFyQXQobnVtKX0KZnVuY3Rpb24gdHJpcGxldFRvQmFzZTY0KG51bSl7cmV0dXJuIGVuY29kZShudW0+PjE4JjB4M0YpK2VuY29kZShudW0+PjEyJjB4M0YpK2VuY29kZShudW0+PjYmMHgzRikrZW5jb2RlKG51bSYweDNGKX0KZm9yKGk9MCxsZW5ndGg9dWludDgubGVuZ3RoLWV4dHJhQnl0ZXM7aTxsZW5ndGg7aSs9Myl7dGVtcD0odWludDhbaV08PDE2KSsodWludDhbaSsxXTw8OCkrKHVpbnQ4W2krMl0pCm91dHB1dCs9dHJpcGxldFRvQmFzZTY0KHRlbXApfQpzd2l0Y2goZXh0cmFCeXRlcyl7Y2FzZSAxOnRlbXA9dWludDhbdWludDgubGVuZ3RoLTFdCm91dHB1dCs9ZW5jb2RlKHRlbXA+PjIpCm91dHB1dCs9ZW5jb2RlKCh0ZW1wPDw0KSYweDNGKQpvdXRwdXQrPSc9PScKYnJlYWsKY2FzZSAyOnRlbXA9KHVpbnQ4W3VpbnQ4Lmxlbmd0aC0yXTw8OCkrKHVpbnQ4W3VpbnQ4Lmxlbmd0aC0xXSkKb3V0cHV0Kz1lbmNvZGUodGVtcD4+MTApCm91dHB1dCs9ZW5jb2RlKCh0ZW1wPj40KSYweDNGKQpvdXRwdXQrPWVuY29kZSgodGVtcDw8MikmMHgzRikKb3V0cHV0Kz0nPScKYnJlYWt9CnJldHVybiBvdXRwdXR9CmV4cG9ydHMudG9CeXRlQXJyYXk9YjY0VG9CeXRlQXJyYXkKZXhwb3J0cy5mcm9tQnl0ZUFycmF5PXVpbnQ4VG9CYXNlNjR9KHR5cGVvZiBleHBvcnRzPT09J3VuZGVmaW5lZCc/KHRoaXMuYmFzZTY0anM9e30pOmV4cG9ydHMpKX0pLmNhbGwodGhpcyxyZXF1aXJlKCJvTWZwQW4iKSx0eXBlb2Ygc2VsZiE9PSJ1bmRlZmluZWQiP3NlbGY6dHlwZW9mIHdpbmRvdyE9PSJ1bmRlZmluZWQiP3dpbmRvdzp7fSxyZXF1aXJlKCJidWZmZXIiKS5CdWZmZXIsYXJndW1lbnRzWzNdLGFyZ3VtZW50c1s0XSxhcmd1bWVudHNbNV0sYXJndW1lbnRzWzZdLCIvLi4vLi4vbm9kZV9tb2R1bGVzL2d1bHAtYnJvd3NlcmlmeS9ub2RlX21vZHVsZXMvYnJvd3NlcmlmeS9ub2RlX21vZHVsZXMvYnVmZmVyL25vZGVfbW9kdWxlcy9iYXNlNjQtanMvbGliL2I2NC5qcyIsIi8uLi8uLi9ub2RlX21vZHVsZXMvZ3VscC1icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9idWZmZXIvbm9kZV9tb2R1bGVzL2Jhc2U2NC1qcy9saWIiKX0seyJidWZmZXIiOjQsIm9NZnBBbiI6N31dLDY6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpeyhmdW5jdGlvbihwcm9jZXNzLGdsb2JhbCxCdWZmZXIsX19hcmd1bWVudDAsX19hcmd1bWVudDEsX19hcmd1bWVudDIsX19hcmd1bWVudDMsX19maWxlbmFtZSxfX2Rpcm5hbWUpe2V4cG9ydHMucmVhZD1mdW5jdGlvbihidWZmZXIsb2Zmc2V0LGlzTEUsbUxlbixuQnl0ZXMpe3ZhciBlLG0sZUxlbj1uQnl0ZXMqOC1tTGVuLTEsZU1heD0oMTw8ZUxlbiktMSxlQmlhcz1lTWF4Pj4xLG5CaXRzPS03LGk9aXNMRT8obkJ5dGVzLTEpOjAsZD1pc0xFPy0xOjEscz1idWZmZXJbb2Zmc2V0K2ldO2krPWQ7ZT1zJigoMTw8KC1uQml0cykpLTEpO3M+Pj0oLW5CaXRzKTtuQml0cys9ZUxlbjtmb3IoO25CaXRzPjA7ZT1lKjI1NitidWZmZXJbb2Zmc2V0K2ldLGkrPWQsbkJpdHMtPTgpO209ZSYoKDE8PCgtbkJpdHMpKS0xKTtlPj49KC1uQml0cyk7bkJpdHMrPW1MZW47Zm9yKDtuQml0cz4wO209bSoyNTYrYnVmZmVyW29mZnNldCtpXSxpKz1kLG5CaXRzLT04KTtpZihlPT09MCl7ZT0xLWVCaWFzO31lbHNlIGlmKGU9PT1lTWF4KXtyZXR1cm4gbT9OYU46KChzPy0xOjEpKkluZmluaXR5KTt9ZWxzZXttPW0rTWF0aC5wb3coMixtTGVuKTtlPWUtZUJpYXM7fQpyZXR1cm4ocz8tMToxKSptKk1hdGgucG93KDIsZS1tTGVuKTt9O2V4cG9ydHMud3JpdGU9ZnVuY3Rpb24oYnVmZmVyLHZhbHVlLG9mZnNldCxpc0xFLG1MZW4sbkJ5dGVzKXt2YXIgZSxtLGMsZUxlbj1uQnl0ZXMqOC1tTGVuLTEsZU1heD0oMTw8ZUxlbiktMSxlQmlhcz1lTWF4Pj4xLHJ0PShtTGVuPT09MjM/TWF0aC5wb3coMiwtMjQpLU1hdGgucG93KDIsLTc3KTowKSxpPWlzTEU/MDoobkJ5dGVzLTEpLGQ9aXNMRT8xOi0xLHM9dmFsdWU8MHx8KHZhbHVlPT09MCYmMS92YWx1ZTwwKT8xOjA7dmFsdWU9TWF0aC5hYnModmFsdWUpO2lmKGlzTmFOKHZhbHVlKXx8dmFsdWU9PT1JbmZpbml0eSl7bT1pc05hTih2YWx1ZSk/MTowO2U9ZU1heDt9ZWxzZXtlPU1hdGguZmxvb3IoTWF0aC5sb2codmFsdWUpL01hdGguTE4yKTtpZih2YWx1ZSooYz1NYXRoLnBvdygyLC1lKSk8MSl7ZS0tO2MqPTI7fQppZihlK2VCaWFzPj0xKXt2YWx1ZSs9cnQvYzt9ZWxzZXt2YWx1ZSs9cnQqTWF0aC5wb3coMiwxLWVCaWFzKTt9CmlmKHZhbHVlKmM+PTIpe2UrKztjLz0yO30KaWYoZStlQmlhcz49ZU1heCl7bT0wO2U9ZU1heDt9ZWxzZSBpZihlK2VCaWFzPj0xKXttPSh2YWx1ZSpjLTEpKk1hdGgucG93KDIsbUxlbik7ZT1lK2VCaWFzO31lbHNle209dmFsdWUqTWF0aC5wb3coMixlQmlhcy0xKSpNYXRoLnBvdygyLG1MZW4pO2U9MDt9fQpmb3IoO21MZW4+PTg7YnVmZmVyW29mZnNldCtpXT1tJjB4ZmYsaSs9ZCxtLz0yNTYsbUxlbi09OCk7ZT0oZTw8bUxlbil8bTtlTGVuKz1tTGVuO2Zvcig7ZUxlbj4wO2J1ZmZlcltvZmZzZXQraV09ZSYweGZmLGkrPWQsZS89MjU2LGVMZW4tPTgpO2J1ZmZlcltvZmZzZXQraS1kXXw9cyoxMjg7fTt9KS5jYWxsKHRoaXMscmVxdWlyZSgib01mcEFuIiksdHlwZW9mIHNlbGYhPT0idW5kZWZpbmVkIj9zZWxmOnR5cGVvZiB3aW5kb3chPT0idW5kZWZpbmVkIj93aW5kb3c6e30scmVxdWlyZSgiYnVmZmVyIikuQnVmZmVyLGFyZ3VtZW50c1szXSxhcmd1bWVudHNbNF0sYXJndW1lbnRzWzVdLGFyZ3VtZW50c1s2XSwiLy4uLy4uL25vZGVfbW9kdWxlcy9ndWxwLWJyb3dzZXJpZnkvbm9kZV9tb2R1bGVzL2Jyb3dzZXJpZnkvbm9kZV9tb2R1bGVzL2J1ZmZlci9ub2RlX21vZHVsZXMvaWVlZTc1NC9pbmRleC5qcyIsIi8uLi8uLi9ub2RlX21vZHVsZXMvZ3VscC1icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9idWZmZXIvbm9kZV9tb2R1bGVzL2llZWU3NTQiKX0seyJidWZmZXIiOjQsIm9NZnBBbiI6N31dLDc6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpeyhmdW5jdGlvbihwcm9jZXNzLGdsb2JhbCxCdWZmZXIsX19hcmd1bWVudDAsX19hcmd1bWVudDEsX19hcmd1bWVudDIsX19hcmd1bWVudDMsX19maWxlbmFtZSxfX2Rpcm5hbWUpe3ZhciBwcm9jZXNzPW1vZHVsZS5leHBvcnRzPXt9O3Byb2Nlc3MubmV4dFRpY2s9KGZ1bmN0aW9uKCl7dmFyIGNhblNldEltbWVkaWF0ZT10eXBlb2Ygd2luZG93IT09J3VuZGVmaW5lZCcmJndpbmRvdy5zZXRJbW1lZGlhdGU7dmFyIGNhblBvc3Q9dHlwZW9mIHdpbmRvdyE9PSd1bmRlZmluZWQnJiZ3aW5kb3cucG9zdE1lc3NhZ2UmJndpbmRvdy5hZGRFdmVudExpc3RlbmVyO2lmKGNhblNldEltbWVkaWF0ZSl7cmV0dXJuIGZ1bmN0aW9uKGYpe3JldHVybiB3aW5kb3cuc2V0SW1tZWRpYXRlKGYpfTt9CmlmKGNhblBvc3Qpe3ZhciBxdWV1ZT1bXTt3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsZnVuY3Rpb24oZXYpe3ZhciBzb3VyY2U9ZXYuc291cmNlO2lmKChzb3VyY2U9PT13aW5kb3d8fHNvdXJjZT09PW51bGwpJiZldi5kYXRhPT09J3Byb2Nlc3MtdGljaycpe2V2LnN0b3BQcm9wYWdhdGlvbigpO2lmKHF1ZXVlLmxlbmd0aD4wKXt2YXIgZm49cXVldWUuc2hpZnQoKTtmbigpO319fSx0cnVlKTtyZXR1cm4gZnVuY3Rpb24gbmV4dFRpY2soZm4pe3F1ZXVlLnB1c2goZm4pO3dpbmRvdy5wb3N0TWVzc2FnZSgncHJvY2Vzcy10aWNrJywnKicpO307fQpyZXR1cm4gZnVuY3Rpb24gbmV4dFRpY2soZm4pe3NldFRpbWVvdXQoZm4sMCk7fTt9KSgpO3Byb2Nlc3MudGl0bGU9J2Jyb3dzZXInO3Byb2Nlc3MuYnJvd3Nlcj10cnVlO3Byb2Nlc3MuZW52PXt9O3Byb2Nlc3MuYXJndj1bXTtmdW5jdGlvbiBub29wKCl7fQpwcm9jZXNzLm9uPW5vb3A7cHJvY2Vzcy5hZGRMaXN0ZW5lcj1ub29wO3Byb2Nlc3Mub25jZT1ub29wO3Byb2Nlc3Mub2ZmPW5vb3A7cHJvY2Vzcy5yZW1vdmVMaXN0ZW5lcj1ub29wO3Byb2Nlc3MucmVtb3ZlQWxsTGlzdGVuZXJzPW5vb3A7cHJvY2Vzcy5lbWl0PW5vb3A7cHJvY2Vzcy5iaW5kaW5nPWZ1bmN0aW9uKG5hbWUpe3Rocm93IG5ldyBFcnJvcigncHJvY2Vzcy5iaW5kaW5nIGlzIG5vdCBzdXBwb3J0ZWQnKTt9CnByb2Nlc3MuY3dkPWZ1bmN0aW9uKCl7cmV0dXJuJy8nfTtwcm9jZXNzLmNoZGlyPWZ1bmN0aW9uKGRpcil7dGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmNoZGlyIGlzIG5vdCBzdXBwb3J0ZWQnKTt9O30pLmNhbGwodGhpcyxyZXF1aXJlKCJvTWZwQW4iKSx0eXBlb2Ygc2VsZiE9PSJ1bmRlZmluZWQiP3NlbGY6dHlwZW9mIHdpbmRvdyE9PSJ1bmRlZmluZWQiP3dpbmRvdzp7fSxyZXF1aXJlKCJidWZmZXIiKS5CdWZmZXIsYXJndW1lbnRzWzNdLGFyZ3VtZW50c1s0XSxhcmd1bWVudHNbNV0sYXJndW1lbnRzWzZdLCIvLi4vLi4vbm9kZV9tb2R1bGVzL2d1bHAtYnJvd3NlcmlmeS9ub2RlX21vZHVsZXMvYnJvd3NlcmlmeS9ub2RlX21vZHVsZXMvcHJvY2Vzcy9icm93c2VyLmpzIiwiLy4uLy4uL25vZGVfbW9kdWxlcy9ndWxwLWJyb3dzZXJpZnkvbm9kZV9tb2R1bGVzL2Jyb3dzZXJpZnkvbm9kZV9tb2R1bGVzL3Byb2Nlc3MiKX0seyJidWZmZXIiOjQsIm9NZnBBbiI6N31dLDg6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpeyhmdW5jdGlvbihwcm9jZXNzLGdsb2JhbCxCdWZmZXIsX19hcmd1bWVudDAsX19hcmd1bWVudDEsX19hcmd1bWVudDIsX19hcmd1bWVudDMsX19maWxlbmFtZSxfX2Rpcm5hbWUpe21vZHVsZS5leHBvcnRzPVsnJHNjb3BlJywnJHN0YXRlUGFyYW1zJywnJGh0dHAnLCdyZXNvdXJjZURlZicsZnVuY3Rpb24oJHNjb3BlLCRzdGF0ZVBhcmFtcywkaHR0cCxyZXNvdXJjZURlZil7dmFyIGNvbGxlY3Rpb249JHN0YXRlUGFyYW1zLmNvbGxlY3Rpb247JHNjb3BlLmNvbGxlY3Rpb249Y29sbGVjdGlvbjskc2NvcGUuYXR0cmlidXRlcz1bXTskc2NvcGUuaXRlbXM9W107JHNjb3BlLmRlbGV0ZT1mdW5jdGlvbigkaW5kZXgpe3ZhciBpdGVtPSRzY29wZS5pdGVtc1skaW5kZXhdOyRodHRwLmRlbGV0ZSgnL2FwaS8nK2NvbGxlY3Rpb24rJy8nK2l0ZW0uaWQpLnN1Y2Nlc3MoZnVuY3Rpb24ocmVzcG9uc2UpeyRzY29wZS5pdGVtcy5zcGxpY2UoJGluZGV4LDEpfSk7fTtyZXNvdXJjZURlZi5nZXQoKS50aGVuKGZ1bmN0aW9uKCl7JHNjb3BlLmF0dHJpYnV0ZXM9cmVzb3VyY2VEZWYucmVzb3VyY2UoY29sbGVjdGlvbikuYXR0cmlidXRlczt9KTskaHR0cC5nZXQoJy9hcGkvJytjb2xsZWN0aW9uKS5zdWNjZXNzKGZ1bmN0aW9uKHJlc3BvbnNlKXskc2NvcGUuaXRlbXM9cmVzcG9uc2VbY29sbGVjdGlvbl07fSk7fV07fSkuY2FsbCh0aGlzLHJlcXVpcmUoIm9NZnBBbiIpLHR5cGVvZiBzZWxmIT09InVuZGVmaW5lZCI/c2VsZjp0eXBlb2Ygd2luZG93IT09InVuZGVmaW5lZCI/d2luZG93Ont9LHJlcXVpcmUoImJ1ZmZlciIpLkJ1ZmZlcixhcmd1bWVudHNbM10sYXJndW1lbnRzWzRdLGFyZ3VtZW50c1s1XSxhcmd1bWVudHNbNl0sIi9jb250cm9sbGVycy9jb2xsZWN0aW9uLmpzIiwiL2NvbnRyb2xsZXJzIil9LHsiYnVmZmVyIjo0LCJvTWZwQW4iOjd9XSw5OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsoZnVuY3Rpb24ocHJvY2VzcyxnbG9iYWwsQnVmZmVyLF9fYXJndW1lbnQwLF9fYXJndW1lbnQxLF9fYXJndW1lbnQyLF9fYXJndW1lbnQzLF9fZmlsZW5hbWUsX19kaXJuYW1lKXttb2R1bGUuZXhwb3J0cz1bJyRzY29wZScsJyRzdGF0ZVBhcmFtcycsJyRodHRwJywnJGxvY2F0aW9uJywncmVzb3VyY2VEZWYnLGZ1bmN0aW9uKCRzY29wZSwkc3RhdGVQYXJhbXMsJGh0dHAsJGxvY2F0aW9uLHJlc291cmNlRGVmKXt2YXIgY29sbGVjdGlvbj0kc3RhdGVQYXJhbXMuY29sbGVjdGlvbjskc2NvcGUuY29sbGVjdGlvbj1jb2xsZWN0aW9uOyRzY29wZS5pdGVtPXt9OyRzY29wZS5hdHRyaWJ1dGVzPVtdO3Jlc291cmNlRGVmLmdldCgpLnRoZW4oZnVuY3Rpb24oKXskc2NvcGUuZGVmaW5pdGlvbj1yZXNvdXJjZURlZi5yZXNvdXJjZShjb2xsZWN0aW9uKTt9KTskc2NvcGUucHVibGlzaD1mdW5jdGlvbigpeyRodHRwLnBvc3QoJy9hcGkvJytjb2xsZWN0aW9uLCRzY29wZS5pdGVtKS5zdWNjZXNzKGZ1bmN0aW9uKHJlc3BvbnNlKXskbG9jYXRpb24ucGF0aCgnLycrY29sbGVjdGlvbisnLycrcmVzcG9uc2VbY29sbGVjdGlvbl0uaWQpO30pO307dmFyIGVycm9ycz17fTtlcnJvcnMudGl0bGU9dHJ1ZTskc2NvcGUuZ2V0RXJyb3I9ZnVuY3Rpb24oYXR0cmlidXRlKXtpZihlcnJvcnMuaGFzT3duUHJvcGVydHkoYXR0cmlidXRlKSYmZXJyb3JzW2F0dHJpYnV0ZV09PT10cnVlKXtyZXR1cm4naGFzLWVycm9yJzt9fX1dO30pLmNhbGwodGhpcyxyZXF1aXJlKCJvTWZwQW4iKSx0eXBlb2Ygc2VsZiE9PSJ1bmRlZmluZWQiP3NlbGY6dHlwZW9mIHdpbmRvdyE9PSJ1bmRlZmluZWQiP3dpbmRvdzp7fSxyZXF1aXJlKCJidWZmZXIiKS5CdWZmZXIsYXJndW1lbnRzWzNdLGFyZ3VtZW50c1s0XSxhcmd1bWVudHNbNV0sYXJndW1lbnRzWzZdLCIvY29udHJvbGxlcnMvY3JlYXRlLmpzIiwiL2NvbnRyb2xsZXJzIil9LHsiYnVmZmVyIjo0LCJvTWZwQW4iOjd9XSwxMDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7KGZ1bmN0aW9uKHByb2Nlc3MsZ2xvYmFsLEJ1ZmZlcixfX2FyZ3VtZW50MCxfX2FyZ3VtZW50MSxfX2FyZ3VtZW50MixfX2FyZ3VtZW50MyxfX2ZpbGVuYW1lLF9fZGlybmFtZSl7bW9kdWxlLmV4cG9ydHM9Wyckc2NvcGUnLCdyZXNvdXJjZURlZicsZnVuY3Rpb24oJHNjb3BlLHJlc291cmNlRGVmKXskc2NvcGUucmVzb3VyY2VzPVtdO3Jlc291cmNlRGVmLmdldCgpLnRoZW4oZnVuY3Rpb24oKXskc2NvcGUucmVzb3VyY2VzPXJlc291cmNlRGVmLnJlc291cmNlcygpO30pO31dO30pLmNhbGwodGhpcyxyZXF1aXJlKCJvTWZwQW4iKSx0eXBlb2Ygc2VsZiE9PSJ1bmRlZmluZWQiP3NlbGY6dHlwZW9mIHdpbmRvdyE9PSJ1bmRlZmluZWQiP3dpbmRvdzp7fSxyZXF1aXJlKCJidWZmZXIiKS5CdWZmZXIsYXJndW1lbnRzWzNdLGFyZ3VtZW50c1s0XSxhcmd1bWVudHNbNV0sYXJndW1lbnRzWzZdLCIvY29udHJvbGxlcnMvaG9tZS5qcyIsIi9jb250cm9sbGVycyIpfSx7ImJ1ZmZlciI6NCwib01mcEFuIjo3fV0sMTE6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpeyhmdW5jdGlvbihwcm9jZXNzLGdsb2JhbCxCdWZmZXIsX19hcmd1bWVudDAsX19hcmd1bWVudDEsX19hcmd1bWVudDIsX19hcmd1bWVudDMsX19maWxlbmFtZSxfX2Rpcm5hbWUpe21vZHVsZS5leHBvcnRzPVsnJHNjb3BlJywnJHN0YXRlUGFyYW1zJywnJGh0dHAnLCdyZXNvdXJjZURlZicsJyR0aW1lb3V0JywnJHNjZScsZnVuY3Rpb24oJHNjb3BlLCRzdGF0ZVBhcmFtcywkaHR0cCxyZXNvdXJjZURlZiwkdGltZW91dCwkc2NlKXt2YXIgY29sbGVjdGlvbj0kc3RhdGVQYXJhbXMuY29sbGVjdGlvbixpdGVtPSRzdGF0ZVBhcmFtcy5pdGVtOyRzY29wZS5jb2xsZWN0aW9uPWNvbGxlY3Rpb247JHNjb3BlLml0ZW09e307JHNjb3BlLmxvYWRpbmc9ZmFsc2U7JHNjb3BlLnN1Y2Nlc3M9ZmFsc2U7JHNjb3BlLmJ0blRleHQ9JHNjZS50cnVzdEFzSHRtbCgnVXBkYXRlJyk7JHNjb3BlLmF0dHJpYnV0ZXM9W107JGh0dHAuZ2V0KCcvYXBpLycrY29sbGVjdGlvbisnLycraXRlbSkuc3VjY2VzcyhmdW5jdGlvbihyZXNwb25zZSl7JHNjb3BlLml0ZW09cmVzcG9uc2VbY29sbGVjdGlvbl07fSk7cmVzb3VyY2VEZWYuZ2V0KCkudGhlbihmdW5jdGlvbigpeyRzY29wZS5kZWZpbml0aW9uPXJlc291cmNlRGVmLnJlc291cmNlKGNvbGxlY3Rpb24pO30pOyRzY29wZS5jaGFuZ2U9ZnVuY3Rpb24oKXskc2NvcGUuYnRuVGV4dD0kc2NlLnRydXN0QXNIdG1sKCdVcGRhdGUnKTskc2NvcGUuc3VjY2Vzcz1mYWxzZTt9OyRzY29wZS5zdWJtaXQ9ZnVuY3Rpb24oKXskc2NvcGUubG9hZGluZz10cnVlOyRzY29wZS5idG5UZXh0PSRzY2UudHJ1c3RBc0h0bWwoJzxzcGFuIGNsYXNzPSJnbHlwaGljb24gZ2x5cGhpY29uLXJlZnJlc2giPjwvc3Bhbj4nKTskaHR0cC5wdXQoJy9hcGkvJytjb2xsZWN0aW9uKycvJytpdGVtLCRzY29wZS5pdGVtKS5zdWNjZXNzKGZ1bmN0aW9uKCl7fSk7JHRpbWVvdXQoZnVuY3Rpb24oKXskc2NvcGUubG9hZGluZz1mYWxzZTskc2NvcGUuc3VjY2Vzcz10cnVlOyRzY29wZS5idG5UZXh0PSRzY2UudHJ1c3RBc0h0bWwoJ1N1Y2Nlc3MgPHNwYW4gY2xhc3M9ImdseXBoaWNvbiBnbHlwaGljb24tY2hlY2siPjwvc3Bhbj4nKTt9LDgwMCk7fTt9XTt9KS5jYWxsKHRoaXMscmVxdWlyZSgib01mcEFuIiksdHlwZW9mIHNlbGYhPT0idW5kZWZpbmVkIj9zZWxmOnR5cGVvZiB3aW5kb3chPT0idW5kZWZpbmVkIj93aW5kb3c6e30scmVxdWlyZSgiYnVmZmVyIikuQnVmZmVyLGFyZ3VtZW50c1szXSxhcmd1bWVudHNbNF0sYXJndW1lbnRzWzVdLGFyZ3VtZW50c1s2XSwiL2NvbnRyb2xsZXJzL2l0ZW0uanMiLCIvY29udHJvbGxlcnMiKX0seyJidWZmZXIiOjQsIm9NZnBBbiI6N31dLDEyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsoZnVuY3Rpb24ocHJvY2VzcyxnbG9iYWwsQnVmZmVyLF9fYXJndW1lbnQwLF9fYXJndW1lbnQxLF9fYXJndW1lbnQyLF9fYXJndW1lbnQzLF9fZmlsZW5hbWUsX19kaXJuYW1lKXtyZXF1aXJlKCdhbmd1bGFyJyk7dmFyIHJvdXRlcj1yZXF1aXJlKCdhbmd1bGFyLXVpLXJvdXRlcicpO3ZhciBhcHA9YW5ndWxhci5tb2R1bGUoJ2FwcCcsW3JvdXRlcl0pO3ZhciBjb25maWc9e25hbWVzcGFjZTonL2FwaScsdmlld3M6e2hvbWU6J2hvbWUuaHRtbCcscmVzb3VyY2U6J2NvbGxlY3Rpb24uaHRtbCcsY3JlYXRlOidjcmVhdGUuaHRtbCcsaXRlbTonaXRlbS5odG1sJ319O2FwcC5jb25maWcoZnVuY3Rpb24oJHVybFJvdXRlclByb3ZpZGVyLCRzdGF0ZVByb3ZpZGVyKXskdXJsUm91dGVyUHJvdmlkZXIub3RoZXJ3aXNlKCIvIik7JHN0YXRlUHJvdmlkZXIuc3RhdGUoJ2hvbWUnLHt1cmw6Jy8nLHRlbXBsYXRlVXJsOmNvbmZpZy52aWV3cy5ob21lLGNvbnRyb2xsZXI6cmVxdWlyZSgnLi9jb250cm9sbGVycy9ob21lJyl9KS5zdGF0ZSgnY29sbGVjdGlvbicse3VybDonLzpjb2xsZWN0aW9uJyx0ZW1wbGF0ZVVybDpjb25maWcudmlld3MucmVzb3VyY2UsY29udHJvbGxlcjpyZXF1aXJlKCcuL2NvbnRyb2xsZXJzL2NvbGxlY3Rpb24nKX0pLnN0YXRlKCdjcmVhdGUnLHt1cmw6Jy86Y29sbGVjdGlvbi9jcmVhdGUnLHRlbXBsYXRlVXJsOmNvbmZpZy52aWV3cy5jcmVhdGUsY29udHJvbGxlcjpyZXF1aXJlKCcuL2NvbnRyb2xsZXJzL2NyZWF0ZScpfSkuc3RhdGUoJ2l0ZW0nLHt1cmw6Jy86Y29sbGVjdGlvbi86aXRlbScsdGVtcGxhdGVVcmw6Y29uZmlnLnZpZXdzLml0ZW0sY29udHJvbGxlcjpyZXF1aXJlKCcuL2NvbnRyb2xsZXJzL2l0ZW0nKX0pfSk7YXBwLnNlcnZpY2UoJ3Jlc291cmNlRGVmJyxbJyRodHRwJywnJHEnLGZ1bmN0aW9uKCRodHRwLCRxKXt2YXIgZGVmZmVyZWQ9JHEuZGVmZXIoKTt2YXIgcmVzb3VyY2VzPXt9O3ZhciByZXNvdXJjZURlZj17fTt2YXIgX2lzRW1wdHk9ZnVuY3Rpb24ob2JqKXtmb3IodmFyIHByb3AgaW4gb2JqKXtyZXR1cm4gZmFsc2U7fQpyZXR1cm4gdHJ1ZTt9O3Jlc291cmNlRGVmLmdldD1mdW5jdGlvbigpe3ZhciBwcm9taXNlPXJlc291cmNlRGVmLl9nZXQoKTtpZighX2lzRW1wdHkocmVzb3VyY2VzKSl7c2V0VGltZW91dChmdW5jdGlvbigpe2RlZmZlcmVkLnJlc29sdmUoKTt9LDEpO30KcmV0dXJuIHByb21pc2U7fTtyZXNvdXJjZURlZi5fZ2V0PWZ1bmN0aW9uKCl7aWYoX2lzRW1wdHkocmVzb3VyY2VzKSl7JGh0dHAuZ2V0KGNvbmZpZy5uYW1lc3BhY2UpLnN1Y2Nlc3MoZnVuY3Rpb24ocmVzcG9uc2Upe3Jlc291cmNlcz1yZXNwb25zZS5yZXNvdXJjZXM7ZGVmZmVyZWQucmVzb2x2ZSgpO30pO30KcmV0dXJuIGRlZmZlcmVkLnByb21pc2U7fTtyZXNvdXJjZURlZi5yZXNvdXJjZXM9ZnVuY3Rpb24oKXtyZXR1cm4gT2JqZWN0LmtleXMocmVzb3VyY2VzKTt9O3Jlc291cmNlRGVmLnJlc291cmNlPWZ1bmN0aW9uKHJlc291cmNlKXtyZXR1cm4gcmVzb3VyY2VzW3Jlc291cmNlXTt9O3JldHVybiByZXNvdXJjZURlZjt9XSk7fSkuY2FsbCh0aGlzLHJlcXVpcmUoIm9NZnBBbiIpLHR5cGVvZiBzZWxmIT09InVuZGVmaW5lZCI/c2VsZjp0eXBlb2Ygd2luZG93IT09InVuZGVmaW5lZCI/d2luZG93Ont9LHJlcXVpcmUoImJ1ZmZlciIpLkJ1ZmZlcixhcmd1bWVudHNbM10sYXJndW1lbnRzWzRdLGFyZ3VtZW50c1s1XSxhcmd1bWVudHNbNl0sIi9mYWtlX2Y2NjEwYzY4LmpzIiwiLyIpfSx7Ii4vY29udHJvbGxlcnMvY29sbGVjdGlvbiI6OCwiLi9jb250cm9sbGVycy9jcmVhdGUiOjksIi4vY29udHJvbGxlcnMvaG9tZSI6MTAsIi4vY29udHJvbGxlcnMvaXRlbSI6MTEsImFuZ3VsYXIiOjIsImFuZ3VsYXItdWktcm91dGVyIjoxLCJidWZmZXIiOjQsIm9NZnBBbiI6N31dfSx7fSxbMTJdKQ==",
                "body": "CihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09ImZ1bmN0aW9uIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3Rocm93IG5ldyBFcnJvcigiQ2Fubm90IGZpbmQgbW9kdWxlICciK28rIiciKX12YXIgZj1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwoZi5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxmLGYuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT0iZnVuY3Rpb24iJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSh7MTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7KGZ1bmN0aW9uKHByb2Nlc3MsZ2xvYmFsLEJ1ZmZlcixfX2FyZ3VtZW50MCxfX2FyZ3VtZW50MSxfX2FyZ3VtZW50MixfX2FyZ3VtZW50MyxfX2ZpbGVuYW1lLF9fZGlybmFtZSl7aWYodHlwZW9mIG1vZHVsZSE9PSJ1bmRlZmluZWQiJiZ0eXBlb2YgZXhwb3J0cyE9PSJ1bmRlZmluZWQiJiZtb2R1bGUuZXhwb3J0cz09PWV4cG9ydHMpe21vZHVsZS5leHBvcnRzPSd1aS5yb3V0ZXInO30KKGZ1bmN0aW9uKHdpbmRvdyxhbmd1bGFyLHVuZGVmaW5lZCl7J3VzZSBzdHJpY3QnO3ZhciBpc0RlZmluZWQ9YW5ndWxhci5pc0RlZmluZWQsaXNGdW5jdGlvbj1hbmd1bGFyLmlzRnVuY3Rpb24saXNTdHJpbmc9YW5ndWxhci5pc1N0cmluZyxpc09iamVjdD1hbmd1bGFyLmlzT2JqZWN0LGlzQXJyYXk9YW5ndWxhci5pc0FycmF5LGZvckVhY2g9YW5ndWxhci5mb3JFYWNoLGV4dGVuZD1hbmd1bGFyLmV4dGVuZCxjb3B5PWFuZ3VsYXIuY29weTtmdW5jdGlvbiBpbmhlcml0KHBhcmVudCxleHRyYSl7cmV0dXJuIGV4dGVuZChuZXcoZXh0ZW5kKGZ1bmN0aW9uKCl7fSx7cHJvdG90eXBlOnBhcmVudH0pKSgpLGV4dHJhKTt9CmZ1bmN0aW9uIG1lcmdlKGRzdCl7Zm9yRWFjaChhcmd1bWVudHMsZnVuY3Rpb24ob2JqKXtpZihvYmohPT1kc3Qpe2ZvckVhY2gob2JqLGZ1bmN0aW9uKHZhbHVlLGtleSl7aWYoIWRzdC5oYXNPd25Qcm9wZXJ0eShrZXkpKWRzdFtrZXldPXZhbHVlO30pO319KTtyZXR1cm4gZHN0O30KZnVuY3Rpb24gYW5jZXN0b3JzKGZpcnN0LHNlY29uZCl7dmFyIHBhdGg9W107Zm9yKHZhciBuIGluIGZpcnN0LnBhdGgpe2lmKGZpcnN0LnBhdGhbbl0hPT1zZWNvbmQucGF0aFtuXSlicmVhaztwYXRoLnB1c2goZmlyc3QucGF0aFtuXSk7fQpyZXR1cm4gcGF0aDt9CmZ1bmN0aW9uIGtleXMob2JqZWN0KXtpZihPYmplY3Qua2V5cyl7cmV0dXJuIE9iamVjdC5rZXlzKG9iamVjdCk7fQp2YXIgcmVzdWx0PVtdO2FuZ3VsYXIuZm9yRWFjaChvYmplY3QsZnVuY3Rpb24odmFsLGtleSl7cmVzdWx0LnB1c2goa2V5KTt9KTtyZXR1cm4gcmVzdWx0O30KZnVuY3Rpb24gYXJyYXlTZWFyY2goYXJyYXksdmFsdWUpe2lmKEFycmF5LnByb3RvdHlwZS5pbmRleE9mKXtyZXR1cm4gYXJyYXkuaW5kZXhPZih2YWx1ZSxOdW1iZXIoYXJndW1lbnRzWzJdKXx8MCk7fQp2YXIgbGVuPWFycmF5Lmxlbmd0aD4+PjAsZnJvbT1OdW1iZXIoYXJndW1lbnRzWzJdKXx8MDtmcm9tPShmcm9tPDApP01hdGguY2VpbChmcm9tKTpNYXRoLmZsb29yKGZyb20pO2lmKGZyb208MClmcm9tKz1sZW47Zm9yKDtmcm9tPGxlbjtmcm9tKyspe2lmKGZyb20gaW4gYXJyYXkmJmFycmF5W2Zyb21dPT09dmFsdWUpcmV0dXJuIGZyb207fQpyZXR1cm4tMTt9CmZ1bmN0aW9uIGluaGVyaXRQYXJhbXMoY3VycmVudFBhcmFtcyxuZXdQYXJhbXMsJGN1cnJlbnQsJHRvKXt2YXIgcGFyZW50cz1hbmNlc3RvcnMoJGN1cnJlbnQsJHRvKSxwYXJlbnRQYXJhbXMsaW5oZXJpdGVkPXt9LGluaGVyaXRMaXN0PVtdO2Zvcih2YXIgaSBpbiBwYXJlbnRzKXtpZighcGFyZW50c1tpXS5wYXJhbXN8fCFwYXJlbnRzW2ldLnBhcmFtcy5sZW5ndGgpY29udGludWU7cGFyZW50UGFyYW1zPXBhcmVudHNbaV0ucGFyYW1zO2Zvcih2YXIgaiBpbiBwYXJlbnRQYXJhbXMpe2lmKGFycmF5U2VhcmNoKGluaGVyaXRMaXN0LHBhcmVudFBhcmFtc1tqXSk+PTApY29udGludWU7aW5oZXJpdExpc3QucHVzaChwYXJlbnRQYXJhbXNbal0pO2luaGVyaXRlZFtwYXJlbnRQYXJhbXNbal1dPWN1cnJlbnRQYXJhbXNbcGFyZW50UGFyYW1zW2pdXTt9fQpyZXR1cm4gZXh0ZW5kKHt9LGluaGVyaXRlZCxuZXdQYXJhbXMpO30KZnVuY3Rpb24gbm9ybWFsaXplKGtleXMsdmFsdWVzKXt2YXIgbm9ybWFsaXplZD17fTtmb3JFYWNoKGtleXMsZnVuY3Rpb24obmFtZSl7dmFyIHZhbHVlPXZhbHVlc1tuYW1lXTtub3JtYWxpemVkW25hbWVdPSh2YWx1ZSE9bnVsbCk/U3RyaW5nKHZhbHVlKTpudWxsO30pO3JldHVybiBub3JtYWxpemVkO30KZnVuY3Rpb24gZXF1YWxGb3JLZXlzKGEsYixrZXlzKXtpZigha2V5cyl7a2V5cz1bXTtmb3IodmFyIG4gaW4gYSlrZXlzLnB1c2gobik7fQpmb3IodmFyIGk9MDtpPGtleXMubGVuZ3RoO2krKyl7dmFyIGs9a2V5c1tpXTtpZihhW2tdIT1iW2tdKXJldHVybiBmYWxzZTt9CnJldHVybiB0cnVlO30KZnVuY3Rpb24gZmlsdGVyQnlLZXlzKGtleXMsdmFsdWVzKXt2YXIgZmlsdGVyZWQ9e307Zm9yRWFjaChrZXlzLGZ1bmN0aW9uKG5hbWUpe2ZpbHRlcmVkW25hbWVdPXZhbHVlc1tuYW1lXTt9KTtyZXR1cm4gZmlsdGVyZWQ7fQphbmd1bGFyLm1vZHVsZSgndWkucm91dGVyLnV0aWwnLFsnbmcnXSk7YW5ndWxhci5tb2R1bGUoJ3VpLnJvdXRlci5yb3V0ZXInLFsndWkucm91dGVyLnV0aWwnXSk7YW5ndWxhci5tb2R1bGUoJ3VpLnJvdXRlci5zdGF0ZScsWyd1aS5yb3V0ZXIucm91dGVyJywndWkucm91dGVyLnV0aWwnXSk7YW5ndWxhci5tb2R1bGUoJ3VpLnJvdXRlcicsWyd1aS5yb3V0ZXIuc3RhdGUnXSk7YW5ndWxhci5tb2R1bGUoJ3VpLnJvdXRlci5jb21wYXQnLFsndWkucm91dGVyJ10pOyRSZXNvbHZlLiRpbmplY3Q9WyckcScsJyRpbmplY3RvciddO2Z1bmN0aW9uICRSZXNvbHZlKCRxLCRpbmplY3Rvcil7dmFyIFZJU0lUX0lOX1BST0dSRVNTPTEsVklTSVRfRE9ORT0yLE5PVEhJTkc9e30sTk9fREVQRU5ERU5DSUVTPVtdLE5PX0xPQ0FMUz1OT1RISU5HLE5PX1BBUkVOVD1leHRlbmQoJHEud2hlbihOT1RISU5HKSx7JCRwcm9taXNlczpOT1RISU5HLCQkdmFsdWVzOk5PVEhJTkd9KTt0aGlzLnN0dWR5PWZ1bmN0aW9uKGludm9jYWJsZXMpe2lmKCFpc09iamVjdChpbnZvY2FibGVzKSl0aHJvdyBuZXcgRXJyb3IoIidpbnZvY2FibGVzJyBtdXN0IGJlIGFuIG9iamVjdCIpO3ZhciBwbGFuPVtdLGN5Y2xlPVtdLHZpc2l0ZWQ9e307ZnVuY3Rpb24gdmlzaXQodmFsdWUsa2V5KXtpZih2aXNpdGVkW2tleV09PT1WSVNJVF9ET05FKXJldHVybjtjeWNsZS5wdXNoKGtleSk7aWYodmlzaXRlZFtrZXldPT09VklTSVRfSU5fUFJPR1JFU1Mpe2N5Y2xlLnNwbGljZSgwLGN5Y2xlLmluZGV4T2Yoa2V5KSk7dGhyb3cgbmV3IEVycm9yKCJDeWNsaWMgZGVwZW5kZW5jeTogIitjeWNsZS5qb2luKCIgLT4gIikpO30KdmlzaXRlZFtrZXldPVZJU0lUX0lOX1BST0dSRVNTO2lmKGlzU3RyaW5nKHZhbHVlKSl7cGxhbi5wdXNoKGtleSxbZnVuY3Rpb24oKXtyZXR1cm4gJGluamVjdG9yLmdldCh2YWx1ZSk7fV0sTk9fREVQRU5ERU5DSUVTKTt9ZWxzZXt2YXIgcGFyYW1zPSRpbmplY3Rvci5hbm5vdGF0ZSh2YWx1ZSk7Zm9yRWFjaChwYXJhbXMsZnVuY3Rpb24ocGFyYW0pe2lmKHBhcmFtIT09a2V5JiZpbnZvY2FibGVzLmhhc093blByb3BlcnR5KHBhcmFtKSl2aXNpdChpbnZvY2FibGVzW3BhcmFtXSxwYXJhbSk7fSk7cGxhbi5wdXNoKGtleSx2YWx1ZSxwYXJhbXMpO30KY3ljbGUucG9wKCk7dmlzaXRlZFtrZXldPVZJU0lUX0RPTkU7fQpmb3JFYWNoKGludm9jYWJsZXMsdmlzaXQpO2ludm9jYWJsZXM9Y3ljbGU9dmlzaXRlZD1udWxsO2Z1bmN0aW9uIGlzUmVzb2x2ZSh2YWx1ZSl7cmV0dXJuIGlzT2JqZWN0KHZhbHVlKSYmdmFsdWUudGhlbiYmdmFsdWUuJCRwcm9taXNlczt9CnJldHVybiBmdW5jdGlvbihsb2NhbHMscGFyZW50LHNlbGYpe2lmKGlzUmVzb2x2ZShsb2NhbHMpJiZzZWxmPT09dW5kZWZpbmVkKXtzZWxmPXBhcmVudDtwYXJlbnQ9bG9jYWxzO2xvY2Fscz1udWxsO30KaWYoIWxvY2Fscylsb2NhbHM9Tk9fTE9DQUxTO2Vsc2UgaWYoIWlzT2JqZWN0KGxvY2Fscykpe3Rocm93IG5ldyBFcnJvcigiJ2xvY2FscycgbXVzdCBiZSBhbiBvYmplY3QiKTt9CmlmKCFwYXJlbnQpcGFyZW50PU5PX1BBUkVOVDtlbHNlIGlmKCFpc1Jlc29sdmUocGFyZW50KSl7dGhyb3cgbmV3IEVycm9yKCIncGFyZW50JyBtdXN0IGJlIGEgcHJvbWlzZSByZXR1cm5lZCBieSAkcmVzb2x2ZS5yZXNvbHZlKCkiKTt9CnZhciByZXNvbHV0aW9uPSRxLmRlZmVyKCkscmVzdWx0PXJlc29sdXRpb24ucHJvbWlzZSxwcm9taXNlcz1yZXN1bHQuJCRwcm9taXNlcz17fSx2YWx1ZXM9ZXh0ZW5kKHt9LGxvY2Fscyksd2FpdD0xK3BsYW4ubGVuZ3RoLzMsbWVyZ2VkPWZhbHNlO2Z1bmN0aW9uIGRvbmUoKXtpZighLS13YWl0KXtpZighbWVyZ2VkKW1lcmdlKHZhbHVlcyxwYXJlbnQuJCR2YWx1ZXMpO3Jlc3VsdC4kJHZhbHVlcz12YWx1ZXM7cmVzdWx0LiQkcHJvbWlzZXM9dHJ1ZTtyZXNvbHV0aW9uLnJlc29sdmUodmFsdWVzKTt9fQpmdW5jdGlvbiBmYWlsKHJlYXNvbil7cmVzdWx0LiQkZmFpbHVyZT1yZWFzb247cmVzb2x1dGlvbi5yZWplY3QocmVhc29uKTt9CmlmKGlzRGVmaW5lZChwYXJlbnQuJCRmYWlsdXJlKSl7ZmFpbChwYXJlbnQuJCRmYWlsdXJlKTtyZXR1cm4gcmVzdWx0O30KaWYocGFyZW50LiQkdmFsdWVzKXttZXJnZWQ9bWVyZ2UodmFsdWVzLHBhcmVudC4kJHZhbHVlcyk7ZG9uZSgpO31lbHNle2V4dGVuZChwcm9taXNlcyxwYXJlbnQuJCRwcm9taXNlcyk7cGFyZW50LnRoZW4oZG9uZSxmYWlsKTt9CmZvcih2YXIgaT0wLGlpPXBsYW4ubGVuZ3RoO2k8aWk7aSs9Myl7aWYobG9jYWxzLmhhc093blByb3BlcnR5KHBsYW5baV0pKWRvbmUoKTtlbHNlIGludm9rZShwbGFuW2ldLHBsYW5baSsxXSxwbGFuW2krMl0pO30KZnVuY3Rpb24gaW52b2tlKGtleSxpbnZvY2FibGUscGFyYW1zKXt2YXIgaW52b2NhdGlvbj0kcS5kZWZlcigpLHdhaXRQYXJhbXM9MDtmdW5jdGlvbiBvbmZhaWx1cmUocmVhc29uKXtpbnZvY2F0aW9uLnJlamVjdChyZWFzb24pO2ZhaWwocmVhc29uKTt9CmZvckVhY2gocGFyYW1zLGZ1bmN0aW9uKGRlcCl7aWYocHJvbWlzZXMuaGFzT3duUHJvcGVydHkoZGVwKSYmIWxvY2Fscy5oYXNPd25Qcm9wZXJ0eShkZXApKXt3YWl0UGFyYW1zKys7cHJvbWlzZXNbZGVwXS50aGVuKGZ1bmN0aW9uKHJlc3VsdCl7dmFsdWVzW2RlcF09cmVzdWx0O2lmKCEoLS13YWl0UGFyYW1zKSlwcm9jZWVkKCk7fSxvbmZhaWx1cmUpO319KTtpZighd2FpdFBhcmFtcylwcm9jZWVkKCk7ZnVuY3Rpb24gcHJvY2VlZCgpe2lmKGlzRGVmaW5lZChyZXN1bHQuJCRmYWlsdXJlKSlyZXR1cm47dHJ5e2ludm9jYXRpb24ucmVzb2x2ZSgkaW5qZWN0b3IuaW52b2tlKGludm9jYWJsZSxzZWxmLHZhbHVlcykpO2ludm9jYXRpb24ucHJvbWlzZS50aGVuKGZ1bmN0aW9uKHJlc3VsdCl7dmFsdWVzW2tleV09cmVzdWx0O2RvbmUoKTt9LG9uZmFpbHVyZSk7fWNhdGNoKGUpe29uZmFpbHVyZShlKTt9fQpwcm9taXNlc1trZXldPWludm9jYXRpb24ucHJvbWlzZTt9CnJldHVybiByZXN1bHQ7fTt9O3RoaXMucmVzb2x2ZT1mdW5jdGlvbihpbnZvY2FibGVzLGxvY2FscyxwYXJlbnQsc2VsZil7cmV0dXJuIHRoaXMuc3R1ZHkoaW52b2NhYmxlcykobG9jYWxzLHBhcmVudCxzZWxmKTt9O30KYW5ndWxhci5tb2R1bGUoJ3VpLnJvdXRlci51dGlsJykuc2VydmljZSgnJHJlc29sdmUnLCRSZXNvbHZlKTskVGVtcGxhdGVGYWN0b3J5LiRpbmplY3Q9WyckaHR0cCcsJyR0ZW1wbGF0ZUNhY2hlJywnJGluamVjdG9yJ107ZnVuY3Rpb24gJFRlbXBsYXRlRmFjdG9yeSgkaHR0cCwkdGVtcGxhdGVDYWNoZSwkaW5qZWN0b3Ipe3RoaXMuZnJvbUNvbmZpZz1mdW5jdGlvbihjb25maWcscGFyYW1zLGxvY2Fscyl7cmV0dXJuKGlzRGVmaW5lZChjb25maWcudGVtcGxhdGUpP3RoaXMuZnJvbVN0cmluZyhjb25maWcudGVtcGxhdGUscGFyYW1zKTppc0RlZmluZWQoY29uZmlnLnRlbXBsYXRlVXJsKT90aGlzLmZyb21VcmwoY29uZmlnLnRlbXBsYXRlVXJsLHBhcmFtcyk6aXNEZWZpbmVkKGNvbmZpZy50ZW1wbGF0ZVByb3ZpZGVyKT90aGlzLmZyb21Qcm92aWRlcihjb25maWcudGVtcGxhdGVQcm92aWRlcixwYXJhbXMsbG9jYWxzKTpudWxsKTt9O3RoaXMuZnJvbVN0cmluZz1mdW5jdGlvbih0ZW1wbGF0ZSxwYXJhbXMpe3JldHVybiBpc0Z1bmN0aW9uKHRlbXBsYXRlKT90ZW1wbGF0ZShwYXJhbXMpOnRlbXBsYXRlO307dGhpcy5mcm9tVXJsPWZ1bmN0aW9uKHVybCxwYXJhbXMpe2lmKGlzRnVuY3Rpb24odXJsKSl1cmw9dXJsKHBhcmFtcyk7aWYodXJsPT1udWxsKXJldHVybiBudWxsO2Vsc2UgcmV0dXJuICRodHRwLmdldCh1cmwse2NhY2hlOiR0ZW1wbGF0ZUNhY2hlfSkudGhlbihmdW5jdGlvbihyZXNwb25zZSl7cmV0dXJuIHJlc3BvbnNlLmRhdGE7fSk7fTt0aGlzLmZyb21Qcm92aWRlcj1mdW5jdGlvbihwcm92aWRlcixwYXJhbXMsbG9jYWxzKXtyZXR1cm4gJGluamVjdG9yLmludm9rZShwcm92aWRlcixudWxsLGxvY2Fsc3x8e3BhcmFtczpwYXJhbXN9KTt9O30KYW5ndWxhci5tb2R1bGUoJ3VpLnJvdXRlci51dGlsJykuc2VydmljZSgnJHRlbXBsYXRlRmFjdG9yeScsJFRlbXBsYXRlRmFjdG9yeSk7ZnVuY3Rpb24gVXJsTWF0Y2hlcihwYXR0ZXJuKXt2YXIgcGxhY2Vob2xkZXI9LyhbOipdKShcdyspfFx7KFx3KykoPzpcOigoPzpbXnt9XFxdK3xcXC58XHsoPzpbXnt9XFxdK3xcXC4pKlx9KSspKT9cfS9nLG5hbWVzPXt9LGNvbXBpbGVkPSdeJyxsYXN0PTAsbSxzZWdtZW50cz10aGlzLnNlZ21lbnRzPVtdLHBhcmFtcz10aGlzLnBhcmFtcz1bXTtmdW5jdGlvbiBhZGRQYXJhbWV0ZXIoaWQpe2lmKCEvXlx3KygtK1x3KykqJC8udGVzdChpZCkpdGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkIHBhcmFtZXRlciBuYW1lICciK2lkKyInIGluIHBhdHRlcm4gJyIrcGF0dGVybisiJyIpO2lmKG5hbWVzW2lkXSl0aHJvdyBuZXcgRXJyb3IoIkR1cGxpY2F0ZSBwYXJhbWV0ZXIgbmFtZSAnIitpZCsiJyBpbiBwYXR0ZXJuICciK3BhdHRlcm4rIiciKTtuYW1lc1tpZF09dHJ1ZTtwYXJhbXMucHVzaChpZCk7fQpmdW5jdGlvbiBxdW90ZVJlZ0V4cChzdHJpbmcpe3JldHVybiBzdHJpbmcucmVwbGFjZSgvW1xcXFtcXVxeJCorPy4oKXx7fV0vZywiXFwkJiIpO30KdGhpcy5zb3VyY2U9cGF0dGVybjt2YXIgaWQscmVnZXhwLHNlZ21lbnQ7d2hpbGUoKG09cGxhY2Vob2xkZXIuZXhlYyhwYXR0ZXJuKSkpe2lkPW1bMl18fG1bM107cmVnZXhwPW1bNF18fChtWzFdPT0nKic/Jy4qJzonW14vXSonKTtzZWdtZW50PXBhdHRlcm4uc3Vic3RyaW5nKGxhc3QsbS5pbmRleCk7aWYoc2VnbWVudC5pbmRleE9mKCc/Jyk+PTApYnJlYWs7Y29tcGlsZWQrPXF1b3RlUmVnRXhwKHNlZ21lbnQpKycoJytyZWdleHArJyknO2FkZFBhcmFtZXRlcihpZCk7c2VnbWVudHMucHVzaChzZWdtZW50KTtsYXN0PXBsYWNlaG9sZGVyLmxhc3RJbmRleDt9CnNlZ21lbnQ9cGF0dGVybi5zdWJzdHJpbmcobGFzdCk7dmFyIGk9c2VnbWVudC5pbmRleE9mKCc/Jyk7aWYoaT49MCl7dmFyIHNlYXJjaD10aGlzLnNvdXJjZVNlYXJjaD1zZWdtZW50LnN1YnN0cmluZyhpKTtzZWdtZW50PXNlZ21lbnQuc3Vic3RyaW5nKDAsaSk7dGhpcy5zb3VyY2VQYXRoPXBhdHRlcm4uc3Vic3RyaW5nKDAsbGFzdCtpKTtmb3JFYWNoKHNlYXJjaC5zdWJzdHJpbmcoMSkuc3BsaXQoL1smP10vKSxhZGRQYXJhbWV0ZXIpO31lbHNle3RoaXMuc291cmNlUGF0aD1wYXR0ZXJuO3RoaXMuc291cmNlU2VhcmNoPScnO30KY29tcGlsZWQrPXF1b3RlUmVnRXhwKHNlZ21lbnQpKyckJztzZWdtZW50cy5wdXNoKHNlZ21lbnQpO3RoaXMucmVnZXhwPW5ldyBSZWdFeHAoY29tcGlsZWQpO3RoaXMucHJlZml4PXNlZ21lbnRzWzBdO30KVXJsTWF0Y2hlci5wcm90b3R5cGUuY29uY2F0PWZ1bmN0aW9uKHBhdHRlcm4pe3JldHVybiBuZXcgVXJsTWF0Y2hlcih0aGlzLnNvdXJjZVBhdGgrcGF0dGVybit0aGlzLnNvdXJjZVNlYXJjaCk7fTtVcmxNYXRjaGVyLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLnNvdXJjZTt9O1VybE1hdGNoZXIucHJvdG90eXBlLmV4ZWM9ZnVuY3Rpb24ocGF0aCxzZWFyY2hQYXJhbXMpe3ZhciBtPXRoaXMucmVnZXhwLmV4ZWMocGF0aCk7aWYoIW0pcmV0dXJuIG51bGw7dmFyIHBhcmFtcz10aGlzLnBhcmFtcyxuVG90YWw9cGFyYW1zLmxlbmd0aCxuUGF0aD10aGlzLnNlZ21lbnRzLmxlbmd0aC0xLHZhbHVlcz17fSxpO2lmKG5QYXRoIT09bS5sZW5ndGgtMSl0aHJvdyBuZXcgRXJyb3IoIlVuYmFsYW5jZWQgY2FwdHVyZSBncm91cCBpbiByb3V0ZSAnIit0aGlzLnNvdXJjZSsiJyIpO2ZvcihpPTA7aTxuUGF0aDtpKyspdmFsdWVzW3BhcmFtc1tpXV09bVtpKzFdO2Zvcig7aTxuVG90YWw7aSsrKXZhbHVlc1twYXJhbXNbaV1dPXNlYXJjaFBhcmFtc1twYXJhbXNbaV1dO3JldHVybiB2YWx1ZXM7fTtVcmxNYXRjaGVyLnByb3RvdHlwZS5wYXJhbWV0ZXJzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucGFyYW1zO307VXJsTWF0Y2hlci5wcm90b3R5cGUuZm9ybWF0PWZ1bmN0aW9uKHZhbHVlcyl7dmFyIHNlZ21lbnRzPXRoaXMuc2VnbWVudHMscGFyYW1zPXRoaXMucGFyYW1zO2lmKCF2YWx1ZXMpcmV0dXJuIHNlZ21lbnRzLmpvaW4oJycpO3ZhciBuUGF0aD1zZWdtZW50cy5sZW5ndGgtMSxuVG90YWw9cGFyYW1zLmxlbmd0aCxyZXN1bHQ9c2VnbWVudHNbMF0saSxzZWFyY2gsdmFsdWU7Zm9yKGk9MDtpPG5QYXRoO2krKyl7dmFsdWU9dmFsdWVzW3BhcmFtc1tpXV07aWYodmFsdWUhPW51bGwpcmVzdWx0Kz1lbmNvZGVVUklDb21wb25lbnQodmFsdWUpO3Jlc3VsdCs9c2VnbWVudHNbaSsxXTt9CmZvcig7aTxuVG90YWw7aSsrKXt2YWx1ZT12YWx1ZXNbcGFyYW1zW2ldXTtpZih2YWx1ZSE9bnVsbCl7cmVzdWx0Kz0oc2VhcmNoPycmJzonPycpK3BhcmFtc1tpXSsnPScrZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlKTtzZWFyY2g9dHJ1ZTt9fQpyZXR1cm4gcmVzdWx0O307ZnVuY3Rpb24gJFVybE1hdGNoZXJGYWN0b3J5KCl7dGhpcy5jb21waWxlPWZ1bmN0aW9uKHBhdHRlcm4pe3JldHVybiBuZXcgVXJsTWF0Y2hlcihwYXR0ZXJuKTt9O3RoaXMuaXNNYXRjaGVyPWZ1bmN0aW9uKG8pe3JldHVybiBpc09iamVjdChvKSYmaXNGdW5jdGlvbihvLmV4ZWMpJiZpc0Z1bmN0aW9uKG8uZm9ybWF0KSYmaXNGdW5jdGlvbihvLmNvbmNhdCk7fTt0aGlzLiRnZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpczt9O30KYW5ndWxhci5tb2R1bGUoJ3VpLnJvdXRlci51dGlsJykucHJvdmlkZXIoJyR1cmxNYXRjaGVyRmFjdG9yeScsJFVybE1hdGNoZXJGYWN0b3J5KTskVXJsUm91dGVyUHJvdmlkZXIuJGluamVjdD1bJyR1cmxNYXRjaGVyRmFjdG9yeVByb3ZpZGVyJ107ZnVuY3Rpb24gJFVybFJvdXRlclByb3ZpZGVyKCR1cmxNYXRjaGVyRmFjdG9yeSl7dmFyIHJ1bGVzPVtdLG90aGVyd2lzZT1udWxsO2Z1bmN0aW9uIHJlZ0V4cFByZWZpeChyZSl7dmFyIHByZWZpeD0vXlxeKCg/OlxcW15hLXpBLVowLTldfFteXFxcW1xdXF4kKis/LigpfHt9XSspKikvLmV4ZWMocmUuc291cmNlKTtyZXR1cm4ocHJlZml4IT1udWxsKT9wcmVmaXhbMV0ucmVwbGFjZSgvXFwoLikvZywiJDEiKTonJzt9CmZ1bmN0aW9uIGludGVycG9sYXRlKHBhdHRlcm4sbWF0Y2gpe3JldHVybiBwYXR0ZXJuLnJlcGxhY2UoL1wkKFwkfFxkezEsMn0pLyxmdW5jdGlvbihtLHdoYXQpe3JldHVybiBtYXRjaFt3aGF0PT09JyQnPzA6TnVtYmVyKHdoYXQpXTt9KTt9CnRoaXMucnVsZT1mdW5jdGlvbihydWxlKXtpZighaXNGdW5jdGlvbihydWxlKSl0aHJvdyBuZXcgRXJyb3IoIidydWxlJyBtdXN0IGJlIGEgZnVuY3Rpb24iKTtydWxlcy5wdXNoKHJ1bGUpO3JldHVybiB0aGlzO307dGhpcy5vdGhlcndpc2U9ZnVuY3Rpb24ocnVsZSl7aWYoaXNTdHJpbmcocnVsZSkpe3ZhciByZWRpcmVjdD1ydWxlO3J1bGU9ZnVuY3Rpb24oKXtyZXR1cm4gcmVkaXJlY3Q7fTt9CmVsc2UgaWYoIWlzRnVuY3Rpb24ocnVsZSkpdGhyb3cgbmV3IEVycm9yKCIncnVsZScgbXVzdCBiZSBhIGZ1bmN0aW9uIik7b3RoZXJ3aXNlPXJ1bGU7cmV0dXJuIHRoaXM7fTtmdW5jdGlvbiBoYW5kbGVJZk1hdGNoKCRpbmplY3RvcixoYW5kbGVyLG1hdGNoKXtpZighbWF0Y2gpcmV0dXJuIGZhbHNlO3ZhciByZXN1bHQ9JGluamVjdG9yLmludm9rZShoYW5kbGVyLGhhbmRsZXIseyRtYXRjaDptYXRjaH0pO3JldHVybiBpc0RlZmluZWQocmVzdWx0KT9yZXN1bHQ6dHJ1ZTt9CnRoaXMud2hlbj1mdW5jdGlvbih3aGF0LGhhbmRsZXIpe3ZhciByZWRpcmVjdCxoYW5kbGVySXNTdHJpbmc9aXNTdHJpbmcoaGFuZGxlcik7aWYoaXNTdHJpbmcod2hhdCkpd2hhdD0kdXJsTWF0Y2hlckZhY3RvcnkuY29tcGlsZSh3aGF0KTtpZighaGFuZGxlcklzU3RyaW5nJiYhaXNGdW5jdGlvbihoYW5kbGVyKSYmIWlzQXJyYXkoaGFuZGxlcikpCnRocm93IG5ldyBFcnJvcigiaW52YWxpZCAnaGFuZGxlcicgaW4gd2hlbigpIik7dmFyIHN0cmF0ZWdpZXM9e21hdGNoZXI6ZnVuY3Rpb24od2hhdCxoYW5kbGVyKXtpZihoYW5kbGVySXNTdHJpbmcpe3JlZGlyZWN0PSR1cmxNYXRjaGVyRmFjdG9yeS5jb21waWxlKGhhbmRsZXIpO2hhbmRsZXI9WyckbWF0Y2gnLGZ1bmN0aW9uKCRtYXRjaCl7cmV0dXJuIHJlZGlyZWN0LmZvcm1hdCgkbWF0Y2gpO31dO30KcmV0dXJuIGV4dGVuZChmdW5jdGlvbigkaW5qZWN0b3IsJGxvY2F0aW9uKXtyZXR1cm4gaGFuZGxlSWZNYXRjaCgkaW5qZWN0b3IsaGFuZGxlcix3aGF0LmV4ZWMoJGxvY2F0aW9uLnBhdGgoKSwkbG9jYXRpb24uc2VhcmNoKCkpKTt9LHtwcmVmaXg6aXNTdHJpbmcod2hhdC5wcmVmaXgpP3doYXQucHJlZml4OicnfSk7fSxyZWdleDpmdW5jdGlvbih3aGF0LGhhbmRsZXIpe2lmKHdoYXQuZ2xvYmFsfHx3aGF0LnN0aWNreSl0aHJvdyBuZXcgRXJyb3IoIndoZW4oKSBSZWdFeHAgbXVzdCBub3QgYmUgZ2xvYmFsIG9yIHN0aWNreSIpO2lmKGhhbmRsZXJJc1N0cmluZyl7cmVkaXJlY3Q9aGFuZGxlcjtoYW5kbGVyPVsnJG1hdGNoJyxmdW5jdGlvbigkbWF0Y2gpe3JldHVybiBpbnRlcnBvbGF0ZShyZWRpcmVjdCwkbWF0Y2gpO31dO30KcmV0dXJuIGV4dGVuZChmdW5jdGlvbigkaW5qZWN0b3IsJGxvY2F0aW9uKXtyZXR1cm4gaGFuZGxlSWZNYXRjaCgkaW5qZWN0b3IsaGFuZGxlcix3aGF0LmV4ZWMoJGxvY2F0aW9uLnBhdGgoKSkpO30se3ByZWZpeDpyZWdFeHBQcmVmaXgod2hhdCl9KTt9fTt2YXIgY2hlY2s9e21hdGNoZXI6JHVybE1hdGNoZXJGYWN0b3J5LmlzTWF0Y2hlcih3aGF0KSxyZWdleDp3aGF0IGluc3RhbmNlb2YgUmVnRXhwfTtmb3IodmFyIG4gaW4gY2hlY2spe2lmKGNoZWNrW25dKXtyZXR1cm4gdGhpcy5ydWxlKHN0cmF0ZWdpZXNbbl0od2hhdCxoYW5kbGVyKSk7fX0KdGhyb3cgbmV3IEVycm9yKCJpbnZhbGlkICd3aGF0JyBpbiB3aGVuKCkiKTt9O3RoaXMuJGdldD1bJyRsb2NhdGlvbicsJyRyb290U2NvcGUnLCckaW5qZWN0b3InLGZ1bmN0aW9uKCRsb2NhdGlvbiwkcm9vdFNjb3BlLCRpbmplY3Rvcil7ZnVuY3Rpb24gdXBkYXRlKGV2dCl7aWYoZXZ0JiZldnQuZGVmYXVsdFByZXZlbnRlZClyZXR1cm47ZnVuY3Rpb24gY2hlY2socnVsZSl7dmFyIGhhbmRsZWQ9cnVsZSgkaW5qZWN0b3IsJGxvY2F0aW9uKTtpZihoYW5kbGVkKXtpZihpc1N0cmluZyhoYW5kbGVkKSkkbG9jYXRpb24ucmVwbGFjZSgpLnVybChoYW5kbGVkKTtyZXR1cm4gdHJ1ZTt9CnJldHVybiBmYWxzZTt9CnZhciBuPXJ1bGVzLmxlbmd0aCxpO2ZvcihpPTA7aTxuO2krKyl7aWYoY2hlY2socnVsZXNbaV0pKXJldHVybjt9CmlmKG90aGVyd2lzZSljaGVjayhvdGhlcndpc2UpO30KJHJvb3RTY29wZS4kb24oJyRsb2NhdGlvbkNoYW5nZVN1Y2Nlc3MnLHVwZGF0ZSk7cmV0dXJue3N5bmM6ZnVuY3Rpb24oKXt1cGRhdGUoKTt9fTt9XTt9CmFuZ3VsYXIubW9kdWxlKCd1aS5yb3V0ZXIucm91dGVyJykucHJvdmlkZXIoJyR1cmxSb3V0ZXInLCRVcmxSb3V0ZXJQcm92aWRlcik7JFN0YXRlUHJvdmlkZXIuJGluamVjdD1bJyR1cmxSb3V0ZXJQcm92aWRlcicsJyR1cmxNYXRjaGVyRmFjdG9yeVByb3ZpZGVyJywnJGxvY2F0aW9uUHJvdmlkZXInXTtmdW5jdGlvbiAkU3RhdGVQcm92aWRlcigkdXJsUm91dGVyUHJvdmlkZXIsJHVybE1hdGNoZXJGYWN0b3J5LCRsb2NhdGlvblByb3ZpZGVyKXt2YXIgcm9vdCxzdGF0ZXM9e30sJHN0YXRlLHF1ZXVlPXt9LGFic3RyYWN0S2V5PSdhYnN0cmFjdCc7dmFyIHN0YXRlQnVpbGRlcj17cGFyZW50OmZ1bmN0aW9uKHN0YXRlKXtpZihpc0RlZmluZWQoc3RhdGUucGFyZW50KSYmc3RhdGUucGFyZW50KXJldHVybiBmaW5kU3RhdGUoc3RhdGUucGFyZW50KTt2YXIgY29tcG9zaXRlTmFtZT0vXiguKylcLlteLl0rJC8uZXhlYyhzdGF0ZS5uYW1lKTtyZXR1cm4gY29tcG9zaXRlTmFtZT9maW5kU3RhdGUoY29tcG9zaXRlTmFtZVsxXSk6cm9vdDt9LGRhdGE6ZnVuY3Rpb24oc3RhdGUpe2lmKHN0YXRlLnBhcmVudCYmc3RhdGUucGFyZW50LmRhdGEpe3N0YXRlLmRhdGE9c3RhdGUuc2VsZi5kYXRhPWV4dGVuZCh7fSxzdGF0ZS5wYXJlbnQuZGF0YSxzdGF0ZS5kYXRhKTt9CnJldHVybiBzdGF0ZS5kYXRhO30sdXJsOmZ1bmN0aW9uKHN0YXRlKXt2YXIgdXJsPXN0YXRlLnVybDtpZihpc1N0cmluZyh1cmwpKXtpZih1cmwuY2hhckF0KDApPT0nXicpe3JldHVybiAkdXJsTWF0Y2hlckZhY3RvcnkuY29tcGlsZSh1cmwuc3Vic3RyaW5nKDEpKTt9CnJldHVybihzdGF0ZS5wYXJlbnQubmF2aWdhYmxlfHxyb290KS51cmwuY29uY2F0KHVybCk7fQppZigkdXJsTWF0Y2hlckZhY3RvcnkuaXNNYXRjaGVyKHVybCl8fHVybD09bnVsbCl7cmV0dXJuIHVybDt9CnRocm93IG5ldyBFcnJvcigiSW52YWxpZCB1cmwgJyIrdXJsKyInIGluIHN0YXRlICciK3N0YXRlKyInIik7fSxuYXZpZ2FibGU6ZnVuY3Rpb24oc3RhdGUpe3JldHVybiBzdGF0ZS51cmw/c3RhdGU6KHN0YXRlLnBhcmVudD9zdGF0ZS5wYXJlbnQubmF2aWdhYmxlOm51bGwpO30scGFyYW1zOmZ1bmN0aW9uKHN0YXRlKXtpZighc3RhdGUucGFyYW1zKXtyZXR1cm4gc3RhdGUudXJsP3N0YXRlLnVybC5wYXJhbWV0ZXJzKCk6c3RhdGUucGFyZW50LnBhcmFtczt9CmlmKCFpc0FycmF5KHN0YXRlLnBhcmFtcykpdGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkIHBhcmFtcyBpbiBzdGF0ZSAnIitzdGF0ZSsiJyIpO2lmKHN0YXRlLnVybCl0aHJvdyBuZXcgRXJyb3IoIkJvdGggcGFyYW1zIGFuZCB1cmwgc3BlY2ljaWZpZWQgaW4gc3RhdGUgJyIrc3RhdGUrIiciKTtyZXR1cm4gc3RhdGUucGFyYW1zO30sdmlld3M6ZnVuY3Rpb24oc3RhdGUpe3ZhciB2aWV3cz17fTtmb3JFYWNoKGlzRGVmaW5lZChzdGF0ZS52aWV3cyk/c3RhdGUudmlld3M6eycnOnN0YXRlfSxmdW5jdGlvbih2aWV3LG5hbWUpe2lmKG5hbWUuaW5kZXhPZignQCcpPDApbmFtZSs9J0AnK3N0YXRlLnBhcmVudC5uYW1lO3ZpZXdzW25hbWVdPXZpZXc7fSk7cmV0dXJuIHZpZXdzO30sb3duUGFyYW1zOmZ1bmN0aW9uKHN0YXRlKXtpZighc3RhdGUucGFyZW50KXtyZXR1cm4gc3RhdGUucGFyYW1zO30KdmFyIHBhcmFtTmFtZXM9e307Zm9yRWFjaChzdGF0ZS5wYXJhbXMsZnVuY3Rpb24ocCl7cGFyYW1OYW1lc1twXT10cnVlO30pO2ZvckVhY2goc3RhdGUucGFyZW50LnBhcmFtcyxmdW5jdGlvbihwKXtpZighcGFyYW1OYW1lc1twXSl7dGhyb3cgbmV3IEVycm9yKCJNaXNzaW5nIHJlcXVpcmVkIHBhcmFtZXRlciAnIitwKyInIGluIHN0YXRlICciK3N0YXRlLm5hbWUrIiciKTt9CnBhcmFtTmFtZXNbcF09ZmFsc2U7fSk7dmFyIG93blBhcmFtcz1bXTtmb3JFYWNoKHBhcmFtTmFtZXMsZnVuY3Rpb24ob3duLHApe2lmKG93bilvd25QYXJhbXMucHVzaChwKTt9KTtyZXR1cm4gb3duUGFyYW1zO30scGF0aDpmdW5jdGlvbihzdGF0ZSl7cmV0dXJuIHN0YXRlLnBhcmVudD9zdGF0ZS5wYXJlbnQucGF0aC5jb25jYXQoc3RhdGUpOltdO30saW5jbHVkZXM6ZnVuY3Rpb24oc3RhdGUpe3ZhciBpbmNsdWRlcz1zdGF0ZS5wYXJlbnQ/ZXh0ZW5kKHt9LHN0YXRlLnBhcmVudC5pbmNsdWRlcyk6e307aW5jbHVkZXNbc3RhdGUubmFtZV09dHJ1ZTtyZXR1cm4gaW5jbHVkZXM7fSwkZGVsZWdhdGVzOnt9fTtmdW5jdGlvbiBpc1JlbGF0aXZlKHN0YXRlTmFtZSl7cmV0dXJuIHN0YXRlTmFtZS5pbmRleE9mKCIuIik9PT0wfHxzdGF0ZU5hbWUuaW5kZXhPZigiXiIpPT09MDt9CmZ1bmN0aW9uIGZpbmRTdGF0ZShzdGF0ZU9yTmFtZSxiYXNlKXt2YXIgaXNTdHI9aXNTdHJpbmcoc3RhdGVPck5hbWUpLG5hbWU9aXNTdHI/c3RhdGVPck5hbWU6c3RhdGVPck5hbWUubmFtZSxwYXRoPWlzUmVsYXRpdmUobmFtZSk7aWYocGF0aCl7aWYoIWJhc2UpdGhyb3cgbmV3IEVycm9yKCJObyByZWZlcmVuY2UgcG9pbnQgZ2l2ZW4gZm9yIHBhdGggJyIrbmFtZSsiJyIpO3ZhciByZWw9bmFtZS5zcGxpdCgiLiIpLGk9MCxwYXRoTGVuZ3RoPXJlbC5sZW5ndGgsY3VycmVudD1iYXNlO2Zvcig7aTxwYXRoTGVuZ3RoO2krKyl7aWYocmVsW2ldPT09IiImJmk9PT0wKXtjdXJyZW50PWJhc2U7Y29udGludWU7fQppZihyZWxbaV09PT0iXiIpe2lmKCFjdXJyZW50LnBhcmVudCl0aHJvdyBuZXcgRXJyb3IoIlBhdGggJyIrbmFtZSsiJyBub3QgdmFsaWQgZm9yIHN0YXRlICciK2Jhc2UubmFtZSsiJyIpO2N1cnJlbnQ9Y3VycmVudC5wYXJlbnQ7Y29udGludWU7fQpicmVhazt9CnJlbD1yZWwuc2xpY2UoaSkuam9pbigiLiIpO25hbWU9Y3VycmVudC5uYW1lKyhjdXJyZW50Lm5hbWUmJnJlbD8iLiI6IiIpK3JlbDt9CnZhciBzdGF0ZT1zdGF0ZXNbbmFtZV07aWYoc3RhdGUmJihpc1N0cnx8KCFpc1N0ciYmKHN0YXRlPT09c3RhdGVPck5hbWV8fHN0YXRlLnNlbGY9PT1zdGF0ZU9yTmFtZSkpKSl7cmV0dXJuIHN0YXRlO30KcmV0dXJuIHVuZGVmaW5lZDt9CmZ1bmN0aW9uIHF1ZXVlU3RhdGUocGFyZW50TmFtZSxzdGF0ZSl7aWYoIXF1ZXVlW3BhcmVudE5hbWVdKXtxdWV1ZVtwYXJlbnROYW1lXT1bXTt9CnF1ZXVlW3BhcmVudE5hbWVdLnB1c2goc3RhdGUpO30KZnVuY3Rpb24gcmVnaXN0ZXJTdGF0ZShzdGF0ZSl7c3RhdGU9aW5oZXJpdChzdGF0ZSx7c2VsZjpzdGF0ZSxyZXNvbHZlOnN0YXRlLnJlc29sdmV8fHt9LHRvU3RyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubmFtZTt9fSk7dmFyIG5hbWU9c3RhdGUubmFtZTtpZighaXNTdHJpbmcobmFtZSl8fG5hbWUuaW5kZXhPZignQCcpPj0wKXRocm93IG5ldyBFcnJvcigiU3RhdGUgbXVzdCBoYXZlIGEgdmFsaWQgbmFtZSIpO2lmKHN0YXRlcy5oYXNPd25Qcm9wZXJ0eShuYW1lKSl0aHJvdyBuZXcgRXJyb3IoIlN0YXRlICciK25hbWUrIicnIGlzIGFscmVhZHkgZGVmaW5lZCIpO3ZhciBwYXJlbnROYW1lPShuYW1lLmluZGV4T2YoJy4nKSE9PS0xKT9uYW1lLnN1YnN0cmluZygwLG5hbWUubGFzdEluZGV4T2YoJy4nKSk6KGlzU3RyaW5nKHN0YXRlLnBhcmVudCkpP3N0YXRlLnBhcmVudDonJztpZihwYXJlbnROYW1lJiYhc3RhdGVzW3BhcmVudE5hbWVdKXtyZXR1cm4gcXVldWVTdGF0ZShwYXJlbnROYW1lLHN0YXRlLnNlbGYpO30KZm9yKHZhciBrZXkgaW4gc3RhdGVCdWlsZGVyKXtpZihpc0Z1bmN0aW9uKHN0YXRlQnVpbGRlcltrZXldKSlzdGF0ZVtrZXldPXN0YXRlQnVpbGRlcltrZXldKHN0YXRlLHN0YXRlQnVpbGRlci4kZGVsZWdhdGVzW2tleV0pO30Kc3RhdGVzW25hbWVdPXN0YXRlO2lmKCFzdGF0ZVthYnN0cmFjdEtleV0mJnN0YXRlLnVybCl7JHVybFJvdXRlclByb3ZpZGVyLndoZW4oc3RhdGUudXJsLFsnJG1hdGNoJywnJHN0YXRlUGFyYW1zJyxmdW5jdGlvbigkbWF0Y2gsJHN0YXRlUGFyYW1zKXtpZigkc3RhdGUuJGN1cnJlbnQubmF2aWdhYmxlIT1zdGF0ZXx8IWVxdWFsRm9yS2V5cygkbWF0Y2gsJHN0YXRlUGFyYW1zKSl7JHN0YXRlLnRyYW5zaXRpb25UbyhzdGF0ZSwkbWF0Y2gse2xvY2F0aW9uOmZhbHNlfSk7fX1dKTt9CmlmKHF1ZXVlW25hbWVdKXtmb3IodmFyIGk9MDtpPHF1ZXVlW25hbWVdLmxlbmd0aDtpKyspe3JlZ2lzdGVyU3RhdGUocXVldWVbbmFtZV1baV0pO319CnJldHVybiBzdGF0ZTt9CmZ1bmN0aW9uIGlzR2xvYih0ZXh0KXtyZXR1cm4gdGV4dC5pbmRleE9mKCcqJyk+LTE7fQpmdW5jdGlvbiBkb2VzU3RhdGVNYXRjaEdsb2IoZ2xvYil7dmFyIGdsb2JTZWdtZW50cz1nbG9iLnNwbGl0KCcuJyksc2VnbWVudHM9JHN0YXRlLiRjdXJyZW50Lm5hbWUuc3BsaXQoJy4nKTtpZihnbG9iU2VnbWVudHNbMF09PT0nKionKXtzZWdtZW50cz1zZWdtZW50cy5zbGljZShzZWdtZW50cy5pbmRleE9mKGdsb2JTZWdtZW50c1sxXSkpO3NlZ21lbnRzLnVuc2hpZnQoJyoqJyk7fQppZihnbG9iU2VnbWVudHNbZ2xvYlNlZ21lbnRzLmxlbmd0aC0xXT09PScqKicpe3NlZ21lbnRzLnNwbGljZShzZWdtZW50cy5pbmRleE9mKGdsb2JTZWdtZW50c1tnbG9iU2VnbWVudHMubGVuZ3RoLTJdKSsxLE51bWJlci5NQVhfVkFMVUUpO3NlZ21lbnRzLnB1c2goJyoqJyk7fQppZihnbG9iU2VnbWVudHMubGVuZ3RoIT1zZWdtZW50cy5sZW5ndGgpe3JldHVybiBmYWxzZTt9CmZvcih2YXIgaT0wLGw9Z2xvYlNlZ21lbnRzLmxlbmd0aDtpPGw7aSsrKXtpZihnbG9iU2VnbWVudHNbaV09PT0nKicpe3NlZ21lbnRzW2ldPScqJzt9fQpyZXR1cm4gc2VnbWVudHMuam9pbignJyk9PT1nbG9iU2VnbWVudHMuam9pbignJyk7fQpyb290PXJlZ2lzdGVyU3RhdGUoe25hbWU6JycsdXJsOideJyx2aWV3czpudWxsLCdhYnN0cmFjdCc6dHJ1ZX0pO3Jvb3QubmF2aWdhYmxlPW51bGw7dGhpcy5kZWNvcmF0b3I9ZGVjb3JhdG9yO2Z1bmN0aW9uIGRlY29yYXRvcihuYW1lLGZ1bmMpe2lmKGlzU3RyaW5nKG5hbWUpJiYhaXNEZWZpbmVkKGZ1bmMpKXtyZXR1cm4gc3RhdGVCdWlsZGVyW25hbWVdO30KaWYoIWlzRnVuY3Rpb24oZnVuYyl8fCFpc1N0cmluZyhuYW1lKSl7cmV0dXJuIHRoaXM7fQppZihzdGF0ZUJ1aWxkZXJbbmFtZV0mJiFzdGF0ZUJ1aWxkZXIuJGRlbGVnYXRlc1tuYW1lXSl7c3RhdGVCdWlsZGVyLiRkZWxlZ2F0ZXNbbmFtZV09c3RhdGVCdWlsZGVyW25hbWVdO30Kc3RhdGVCdWlsZGVyW25hbWVdPWZ1bmM7cmV0dXJuIHRoaXM7fQp0aGlzLnN0YXRlPXN0YXRlO2Z1bmN0aW9uIHN0YXRlKG5hbWUsZGVmaW5pdGlvbil7aWYoaXNPYmplY3QobmFtZSkpZGVmaW5pdGlvbj1uYW1lO2Vsc2UgZGVmaW5pdGlvbi5uYW1lPW5hbWU7cmVnaXN0ZXJTdGF0ZShkZWZpbml0aW9uKTtyZXR1cm4gdGhpczt9CnRoaXMuJGdldD0kZ2V0OyRnZXQuJGluamVjdD1bJyRyb290U2NvcGUnLCckcScsJyR2aWV3JywnJGluamVjdG9yJywnJHJlc29sdmUnLCckc3RhdGVQYXJhbXMnLCckbG9jYXRpb24nLCckdXJsUm91dGVyJywnJGJyb3dzZXInXTtmdW5jdGlvbiAkZ2V0KCRyb290U2NvcGUsJHEsJHZpZXcsJGluamVjdG9yLCRyZXNvbHZlLCRzdGF0ZVBhcmFtcywkbG9jYXRpb24sJHVybFJvdXRlciwkYnJvd3Nlcil7dmFyIFRyYW5zaXRpb25TdXBlcnNlZGVkPSRxLnJlamVjdChuZXcgRXJyb3IoJ3RyYW5zaXRpb24gc3VwZXJzZWRlZCcpKTt2YXIgVHJhbnNpdGlvblByZXZlbnRlZD0kcS5yZWplY3QobmV3IEVycm9yKCd0cmFuc2l0aW9uIHByZXZlbnRlZCcpKTt2YXIgVHJhbnNpdGlvbkFib3J0ZWQ9JHEucmVqZWN0KG5ldyBFcnJvcigndHJhbnNpdGlvbiBhYm9ydGVkJykpO3ZhciBUcmFuc2l0aW9uRmFpbGVkPSRxLnJlamVjdChuZXcgRXJyb3IoJ3RyYW5zaXRpb24gZmFpbGVkJykpO3ZhciBjdXJyZW50TG9jYXRpb249JGxvY2F0aW9uLnVybCgpO3ZhciBiYXNlSHJlZj0kYnJvd3Nlci5iYXNlSHJlZigpO2Z1bmN0aW9uIHN5bmNVcmwoKXtpZigkbG9jYXRpb24udXJsKCkhPT1jdXJyZW50TG9jYXRpb24peyRsb2NhdGlvbi51cmwoY3VycmVudExvY2F0aW9uKTskbG9jYXRpb24ucmVwbGFjZSgpO319CnJvb3QubG9jYWxzPXtyZXNvbHZlOm51bGwsZ2xvYmFsczp7JHN0YXRlUGFyYW1zOnt9fX07JHN0YXRlPXtwYXJhbXM6e30sY3VycmVudDpyb290LnNlbGYsJGN1cnJlbnQ6cm9vdCx0cmFuc2l0aW9uOm51bGx9OyRzdGF0ZS5yZWxvYWQ9ZnVuY3Rpb24gcmVsb2FkKCl7JHN0YXRlLnRyYW5zaXRpb25Ubygkc3RhdGUuY3VycmVudCwkc3RhdGVQYXJhbXMse3JlbG9hZDp0cnVlLGluaGVyaXQ6ZmFsc2Usbm90aWZ5OmZhbHNlfSk7fTskc3RhdGUuZ289ZnVuY3Rpb24gZ28odG8scGFyYW1zLG9wdGlvbnMpe3JldHVybiB0aGlzLnRyYW5zaXRpb25Ubyh0byxwYXJhbXMsZXh0ZW5kKHtpbmhlcml0OnRydWUscmVsYXRpdmU6JHN0YXRlLiRjdXJyZW50fSxvcHRpb25zKSk7fTskc3RhdGUudHJhbnNpdGlvblRvPWZ1bmN0aW9uIHRyYW5zaXRpb25Ubyh0byx0b1BhcmFtcyxvcHRpb25zKXt0b1BhcmFtcz10b1BhcmFtc3x8e307b3B0aW9ucz1leHRlbmQoe2xvY2F0aW9uOnRydWUsaW5oZXJpdDpmYWxzZSxyZWxhdGl2ZTpudWxsLG5vdGlmeTp0cnVlLHJlbG9hZDpmYWxzZSwkcmV0cnk6ZmFsc2V9LG9wdGlvbnN8fHt9KTt2YXIgZnJvbT0kc3RhdGUuJGN1cnJlbnQsZnJvbVBhcmFtcz0kc3RhdGUucGFyYW1zLGZyb21QYXRoPWZyb20ucGF0aDt2YXIgZXZ0LHRvU3RhdGU9ZmluZFN0YXRlKHRvLG9wdGlvbnMucmVsYXRpdmUpO2lmKCFpc0RlZmluZWQodG9TdGF0ZSkpe3ZhciByZWRpcmVjdD17dG86dG8sdG9QYXJhbXM6dG9QYXJhbXMsb3B0aW9uczpvcHRpb25zfTtldnQ9JHJvb3RTY29wZS4kYnJvYWRjYXN0KCckc3RhdGVOb3RGb3VuZCcscmVkaXJlY3QsZnJvbS5zZWxmLGZyb21QYXJhbXMpO2lmKGV2dC5kZWZhdWx0UHJldmVudGVkKXtzeW5jVXJsKCk7cmV0dXJuIFRyYW5zaXRpb25BYm9ydGVkO30KaWYoZXZ0LnJldHJ5KXtpZihvcHRpb25zLiRyZXRyeSl7c3luY1VybCgpO3JldHVybiBUcmFuc2l0aW9uRmFpbGVkO30KdmFyIHJldHJ5VHJhbnNpdGlvbj0kc3RhdGUudHJhbnNpdGlvbj0kcS53aGVuKGV2dC5yZXRyeSk7cmV0cnlUcmFuc2l0aW9uLnRoZW4oZnVuY3Rpb24oKXtpZihyZXRyeVRyYW5zaXRpb24hPT0kc3RhdGUudHJhbnNpdGlvbilyZXR1cm4gVHJhbnNpdGlvblN1cGVyc2VkZWQ7cmVkaXJlY3Qub3B0aW9ucy4kcmV0cnk9dHJ1ZTtyZXR1cm4gJHN0YXRlLnRyYW5zaXRpb25UbyhyZWRpcmVjdC50byxyZWRpcmVjdC50b1BhcmFtcyxyZWRpcmVjdC5vcHRpb25zKTt9LGZ1bmN0aW9uKCl7cmV0dXJuIFRyYW5zaXRpb25BYm9ydGVkO30pO3N5bmNVcmwoKTtyZXR1cm4gcmV0cnlUcmFuc2l0aW9uO30KdG89cmVkaXJlY3QudG87dG9QYXJhbXM9cmVkaXJlY3QudG9QYXJhbXM7b3B0aW9ucz1yZWRpcmVjdC5vcHRpb25zO3RvU3RhdGU9ZmluZFN0YXRlKHRvLG9wdGlvbnMucmVsYXRpdmUpO2lmKCFpc0RlZmluZWQodG9TdGF0ZSkpe2lmKG9wdGlvbnMucmVsYXRpdmUpdGhyb3cgbmV3IEVycm9yKCJDb3VsZCBub3QgcmVzb2x2ZSAnIit0bysiJyBmcm9tIHN0YXRlICciK29wdGlvbnMucmVsYXRpdmUrIiciKTt0aHJvdyBuZXcgRXJyb3IoIk5vIHN1Y2ggc3RhdGUgJyIrdG8rIiciKTt9fQppZih0b1N0YXRlW2Fic3RyYWN0S2V5XSl0aHJvdyBuZXcgRXJyb3IoIkNhbm5vdCB0cmFuc2l0aW9uIHRvIGFic3RyYWN0IHN0YXRlICciK3RvKyInIik7aWYob3B0aW9ucy5pbmhlcml0KXRvUGFyYW1zPWluaGVyaXRQYXJhbXMoJHN0YXRlUGFyYW1zLHRvUGFyYW1zfHx7fSwkc3RhdGUuJGN1cnJlbnQsdG9TdGF0ZSk7dG89dG9TdGF0ZTt2YXIgdG9QYXRoPXRvLnBhdGg7dmFyIGtlZXAsc3RhdGUsbG9jYWxzPXJvb3QubG9jYWxzLHRvTG9jYWxzPVtdO2ZvcihrZWVwPTAsc3RhdGU9dG9QYXRoW2tlZXBdO3N0YXRlJiZzdGF0ZT09PWZyb21QYXRoW2tlZXBdJiZlcXVhbEZvcktleXModG9QYXJhbXMsZnJvbVBhcmFtcyxzdGF0ZS5vd25QYXJhbXMpJiYhb3B0aW9ucy5yZWxvYWQ7a2VlcCsrLHN0YXRlPXRvUGF0aFtrZWVwXSl7bG9jYWxzPXRvTG9jYWxzW2tlZXBdPXN0YXRlLmxvY2Fsczt9CmlmKHNob3VsZFRyaWdnZXJSZWxvYWQodG8sZnJvbSxsb2NhbHMsb3B0aW9ucykpe2lmKHRvLnNlbGYucmVsb2FkT25TZWFyY2ghPT1mYWxzZSkKc3luY1VybCgpOyRzdGF0ZS50cmFuc2l0aW9uPW51bGw7cmV0dXJuICRxLndoZW4oJHN0YXRlLmN1cnJlbnQpO30KdG9QYXJhbXM9bm9ybWFsaXplKHRvLnBhcmFtcyx0b1BhcmFtc3x8e30pO2lmKG9wdGlvbnMubm90aWZ5KXtldnQ9JHJvb3RTY29wZS4kYnJvYWRjYXN0KCckc3RhdGVDaGFuZ2VTdGFydCcsdG8uc2VsZix0b1BhcmFtcyxmcm9tLnNlbGYsZnJvbVBhcmFtcyk7aWYoZXZ0LmRlZmF1bHRQcmV2ZW50ZWQpe3N5bmNVcmwoKTtyZXR1cm4gVHJhbnNpdGlvblByZXZlbnRlZDt9fQp2YXIgcmVzb2x2ZWQ9JHEud2hlbihsb2NhbHMpO2Zvcih2YXIgbD1rZWVwO2w8dG9QYXRoLmxlbmd0aDtsKyssc3RhdGU9dG9QYXRoW2xdKXtsb2NhbHM9dG9Mb2NhbHNbbF09aW5oZXJpdChsb2NhbHMpO3Jlc29sdmVkPXJlc29sdmVTdGF0ZShzdGF0ZSx0b1BhcmFtcyxzdGF0ZT09PXRvLHJlc29sdmVkLGxvY2Fscyk7fQp2YXIgdHJhbnNpdGlvbj0kc3RhdGUudHJhbnNpdGlvbj1yZXNvbHZlZC50aGVuKGZ1bmN0aW9uKCl7dmFyIGwsZW50ZXJpbmcsZXhpdGluZztpZigkc3RhdGUudHJhbnNpdGlvbiE9PXRyYW5zaXRpb24pcmV0dXJuIFRyYW5zaXRpb25TdXBlcnNlZGVkO2ZvcihsPWZyb21QYXRoLmxlbmd0aC0xO2w+PWtlZXA7bC0tKXtleGl0aW5nPWZyb21QYXRoW2xdO2lmKGV4aXRpbmcuc2VsZi5vbkV4aXQpeyRpbmplY3Rvci5pbnZva2UoZXhpdGluZy5zZWxmLm9uRXhpdCxleGl0aW5nLnNlbGYsZXhpdGluZy5sb2NhbHMuZ2xvYmFscyk7fQpleGl0aW5nLmxvY2Fscz1udWxsO30KZm9yKGw9a2VlcDtsPHRvUGF0aC5sZW5ndGg7bCsrKXtlbnRlcmluZz10b1BhdGhbbF07ZW50ZXJpbmcubG9jYWxzPXRvTG9jYWxzW2xdO2lmKGVudGVyaW5nLnNlbGYub25FbnRlcil7JGluamVjdG9yLmludm9rZShlbnRlcmluZy5zZWxmLm9uRW50ZXIsZW50ZXJpbmcuc2VsZixlbnRlcmluZy5sb2NhbHMuZ2xvYmFscyk7fX0KaWYoJHN0YXRlLnRyYW5zaXRpb24hPT10cmFuc2l0aW9uKXJldHVybiBUcmFuc2l0aW9uU3VwZXJzZWRlZDskc3RhdGUuJGN1cnJlbnQ9dG87JHN0YXRlLmN1cnJlbnQ9dG8uc2VsZjskc3RhdGUucGFyYW1zPXRvUGFyYW1zO2NvcHkoJHN0YXRlLnBhcmFtcywkc3RhdGVQYXJhbXMpOyRzdGF0ZS50cmFuc2l0aW9uPW51bGw7dmFyIHRvTmF2PXRvLm5hdmlnYWJsZTtpZihvcHRpb25zLmxvY2F0aW9uJiZ0b05hdil7JGxvY2F0aW9uLnVybCh0b05hdi51cmwuZm9ybWF0KHRvTmF2LmxvY2Fscy5nbG9iYWxzLiRzdGF0ZVBhcmFtcykpO2lmKG9wdGlvbnMubG9jYXRpb249PT0ncmVwbGFjZScpeyRsb2NhdGlvbi5yZXBsYWNlKCk7fX0KaWYob3B0aW9ucy5ub3RpZnkpeyRyb290U2NvcGUuJGJyb2FkY2FzdCgnJHN0YXRlQ2hhbmdlU3VjY2VzcycsdG8uc2VsZix0b1BhcmFtcyxmcm9tLnNlbGYsZnJvbVBhcmFtcyk7fQpjdXJyZW50TG9jYXRpb249JGxvY2F0aW9uLnVybCgpO3JldHVybiAkc3RhdGUuY3VycmVudDt9LGZ1bmN0aW9uKGVycm9yKXtpZigkc3RhdGUudHJhbnNpdGlvbiE9PXRyYW5zaXRpb24pcmV0dXJuIFRyYW5zaXRpb25TdXBlcnNlZGVkOyRzdGF0ZS50cmFuc2l0aW9uPW51bGw7JHJvb3RTY29wZS4kYnJvYWRjYXN0KCckc3RhdGVDaGFuZ2VFcnJvcicsdG8uc2VsZix0b1BhcmFtcyxmcm9tLnNlbGYsZnJvbVBhcmFtcyxlcnJvcik7c3luY1VybCgpO3JldHVybiAkcS5yZWplY3QoZXJyb3IpO30pO3JldHVybiB0cmFuc2l0aW9uO307JHN0YXRlLmlzPWZ1bmN0aW9uIGlzKHN0YXRlT3JOYW1lLHBhcmFtcyl7dmFyIHN0YXRlPWZpbmRTdGF0ZShzdGF0ZU9yTmFtZSk7aWYoIWlzRGVmaW5lZChzdGF0ZSkpe3JldHVybiB1bmRlZmluZWQ7fQppZigkc3RhdGUuJGN1cnJlbnQhPT1zdGF0ZSl7cmV0dXJuIGZhbHNlO30KcmV0dXJuIGlzRGVmaW5lZChwYXJhbXMpJiZwYXJhbXMhPT1udWxsP2FuZ3VsYXIuZXF1YWxzKCRzdGF0ZVBhcmFtcyxwYXJhbXMpOnRydWU7fTskc3RhdGUuaW5jbHVkZXM9ZnVuY3Rpb24gaW5jbHVkZXMoc3RhdGVPck5hbWUscGFyYW1zKXtpZihpc1N0cmluZyhzdGF0ZU9yTmFtZSkmJmlzR2xvYihzdGF0ZU9yTmFtZSkpe2lmKGRvZXNTdGF0ZU1hdGNoR2xvYihzdGF0ZU9yTmFtZSkpe3N0YXRlT3JOYW1lPSRzdGF0ZS4kY3VycmVudC5uYW1lO31lbHNle3JldHVybiBmYWxzZTt9fQp2YXIgc3RhdGU9ZmluZFN0YXRlKHN0YXRlT3JOYW1lKTtpZighaXNEZWZpbmVkKHN0YXRlKSl7cmV0dXJuIHVuZGVmaW5lZDt9CmlmKCFpc0RlZmluZWQoJHN0YXRlLiRjdXJyZW50LmluY2x1ZGVzW3N0YXRlLm5hbWVdKSl7cmV0dXJuIGZhbHNlO30KdmFyIHZhbGlkUGFyYW1zPXRydWU7YW5ndWxhci5mb3JFYWNoKHBhcmFtcyxmdW5jdGlvbih2YWx1ZSxrZXkpe2lmKCFpc0RlZmluZWQoJHN0YXRlUGFyYW1zW2tleV0pfHwkc3RhdGVQYXJhbXNba2V5XSE9PXZhbHVlKXt2YWxpZFBhcmFtcz1mYWxzZTt9fSk7cmV0dXJuIHZhbGlkUGFyYW1zO307JHN0YXRlLmhyZWY9ZnVuY3Rpb24gaHJlZihzdGF0ZU9yTmFtZSxwYXJhbXMsb3B0aW9ucyl7b3B0aW9ucz1leHRlbmQoe2xvc3N5OnRydWUsaW5oZXJpdDpmYWxzZSxhYnNvbHV0ZTpmYWxzZSxyZWxhdGl2ZTokc3RhdGUuJGN1cnJlbnR9LG9wdGlvbnN8fHt9KTt2YXIgc3RhdGU9ZmluZFN0YXRlKHN0YXRlT3JOYW1lLG9wdGlvbnMucmVsYXRpdmUpO2lmKCFpc0RlZmluZWQoc3RhdGUpKXJldHVybiBudWxsO3BhcmFtcz1pbmhlcml0UGFyYW1zKCRzdGF0ZVBhcmFtcyxwYXJhbXN8fHt9LCRzdGF0ZS4kY3VycmVudCxzdGF0ZSk7dmFyIG5hdj0oc3RhdGUmJm9wdGlvbnMubG9zc3kpP3N0YXRlLm5hdmlnYWJsZTpzdGF0ZTt2YXIgdXJsPShuYXYmJm5hdi51cmwpP25hdi51cmwuZm9ybWF0KG5vcm1hbGl6ZShzdGF0ZS5wYXJhbXMscGFyYW1zfHx7fSkpOm51bGw7aWYoISRsb2NhdGlvblByb3ZpZGVyLmh0bWw1TW9kZSgpJiZ1cmwpe3VybD0iIyIrJGxvY2F0aW9uUHJvdmlkZXIuaGFzaFByZWZpeCgpK3VybDt9CmlmKGJhc2VIcmVmIT09Jy8nKXtpZigkbG9jYXRpb25Qcm92aWRlci5odG1sNU1vZGUoKSl7dXJsPWJhc2VIcmVmLnNsaWNlKDAsLTEpK3VybDt9ZWxzZSBpZihvcHRpb25zLmFic29sdXRlKXt1cmw9YmFzZUhyZWYuc2xpY2UoMSkrdXJsO319CmlmKG9wdGlvbnMuYWJzb2x1dGUmJnVybCl7dXJsPSRsb2NhdGlvbi5wcm90b2NvbCgpKyc6Ly8nKwokbG9jYXRpb24uaG9zdCgpKwooJGxvY2F0aW9uLnBvcnQoKT09ODB8fCRsb2NhdGlvbi5wb3J0KCk9PTQ0Mz8nJzonOicrJGxvY2F0aW9uLnBvcnQoKSkrCighJGxvY2F0aW9uUHJvdmlkZXIuaHRtbDVNb2RlKCkmJnVybD8nLyc6JycpKwp1cmw7fQpyZXR1cm4gdXJsO307JHN0YXRlLmdldD1mdW5jdGlvbihzdGF0ZU9yTmFtZSxjb250ZXh0KXtpZighaXNEZWZpbmVkKHN0YXRlT3JOYW1lKSl7dmFyIGxpc3Q9W107Zm9yRWFjaChzdGF0ZXMsZnVuY3Rpb24oc3RhdGUpe2xpc3QucHVzaChzdGF0ZS5zZWxmKTt9KTtyZXR1cm4gbGlzdDt9CnZhciBzdGF0ZT1maW5kU3RhdGUoc3RhdGVPck5hbWUsY29udGV4dCk7cmV0dXJuKHN0YXRlJiZzdGF0ZS5zZWxmKT9zdGF0ZS5zZWxmOm51bGw7fTtmdW5jdGlvbiByZXNvbHZlU3RhdGUoc3RhdGUscGFyYW1zLHBhcmFtc0FyZUZpbHRlcmVkLGluaGVyaXRlZCxkc3Qpe3ZhciAkc3RhdGVQYXJhbXM9KHBhcmFtc0FyZUZpbHRlcmVkKT9wYXJhbXM6ZmlsdGVyQnlLZXlzKHN0YXRlLnBhcmFtcyxwYXJhbXMpO3ZhciBsb2NhbHM9eyRzdGF0ZVBhcmFtczokc3RhdGVQYXJhbXN9O2RzdC5yZXNvbHZlPSRyZXNvbHZlLnJlc29sdmUoc3RhdGUucmVzb2x2ZSxsb2NhbHMsZHN0LnJlc29sdmUsc3RhdGUpO3ZhciBwcm9taXNlcz1bZHN0LnJlc29sdmUudGhlbihmdW5jdGlvbihnbG9iYWxzKXtkc3QuZ2xvYmFscz1nbG9iYWxzO30pXTtpZihpbmhlcml0ZWQpcHJvbWlzZXMucHVzaChpbmhlcml0ZWQpO2ZvckVhY2goc3RhdGUudmlld3MsZnVuY3Rpb24odmlldyxuYW1lKXt2YXIgaW5qZWN0YWJsZXM9KHZpZXcucmVzb2x2ZSYmdmlldy5yZXNvbHZlIT09c3RhdGUucmVzb2x2ZT92aWV3LnJlc29sdmU6e30pO2luamVjdGFibGVzLiR0ZW1wbGF0ZT1bZnVuY3Rpb24oKXtyZXR1cm4gJHZpZXcubG9hZChuYW1lLHt2aWV3OnZpZXcsbG9jYWxzOmxvY2FscyxwYXJhbXM6JHN0YXRlUGFyYW1zLG5vdGlmeTpmYWxzZX0pfHwnJzt9XTtwcm9taXNlcy5wdXNoKCRyZXNvbHZlLnJlc29sdmUoaW5qZWN0YWJsZXMsbG9jYWxzLGRzdC5yZXNvbHZlLHN0YXRlKS50aGVuKGZ1bmN0aW9uKHJlc3VsdCl7aWYoaXNGdW5jdGlvbih2aWV3LmNvbnRyb2xsZXJQcm92aWRlcil8fGlzQXJyYXkodmlldy5jb250cm9sbGVyUHJvdmlkZXIpKXt2YXIgaW5qZWN0TG9jYWxzPWFuZ3VsYXIuZXh0ZW5kKHt9LGluamVjdGFibGVzLGxvY2Fscyk7cmVzdWx0LiQkY29udHJvbGxlcj0kaW5qZWN0b3IuaW52b2tlKHZpZXcuY29udHJvbGxlclByb3ZpZGVyLG51bGwsaW5qZWN0TG9jYWxzKTt9ZWxzZXtyZXN1bHQuJCRjb250cm9sbGVyPXZpZXcuY29udHJvbGxlcjt9CnJlc3VsdC4kJHN0YXRlPXN0YXRlO3Jlc3VsdC4kJGNvbnRyb2xsZXJBcz12aWV3LmNvbnRyb2xsZXJBcztkc3RbbmFtZV09cmVzdWx0O30pKTt9KTtyZXR1cm4gJHEuYWxsKHByb21pc2VzKS50aGVuKGZ1bmN0aW9uKHZhbHVlcyl7cmV0dXJuIGRzdDt9KTt9CnJldHVybiAkc3RhdGU7fQpmdW5jdGlvbiBzaG91bGRUcmlnZ2VyUmVsb2FkKHRvLGZyb20sbG9jYWxzLG9wdGlvbnMpe2lmKHRvPT09ZnJvbSYmKChsb2NhbHM9PT1mcm9tLmxvY2FscyYmIW9wdGlvbnMucmVsb2FkKXx8KHRvLnNlbGYucmVsb2FkT25TZWFyY2g9PT1mYWxzZSkpKXtyZXR1cm4gdHJ1ZTt9fX0KYW5ndWxhci5tb2R1bGUoJ3VpLnJvdXRlci5zdGF0ZScpLnZhbHVlKCckc3RhdGVQYXJhbXMnLHt9KS5wcm92aWRlcignJHN0YXRlJywkU3RhdGVQcm92aWRlcik7JFZpZXdQcm92aWRlci4kaW5qZWN0PVtdO2Z1bmN0aW9uICRWaWV3UHJvdmlkZXIoKXt0aGlzLiRnZXQ9JGdldDskZ2V0LiRpbmplY3Q9Wyckcm9vdFNjb3BlJywnJHRlbXBsYXRlRmFjdG9yeSddO2Z1bmN0aW9uICRnZXQoJHJvb3RTY29wZSwkdGVtcGxhdGVGYWN0b3J5KXtyZXR1cm57bG9hZDpmdW5jdGlvbiBsb2FkKG5hbWUsb3B0aW9ucyl7dmFyIHJlc3VsdCxkZWZhdWx0cz17dGVtcGxhdGU6bnVsbCxjb250cm9sbGVyOm51bGwsdmlldzpudWxsLGxvY2FsczpudWxsLG5vdGlmeTp0cnVlLGFzeW5jOnRydWUscGFyYW1zOnt9fTtvcHRpb25zPWV4dGVuZChkZWZhdWx0cyxvcHRpb25zKTtpZihvcHRpb25zLnZpZXcpe3Jlc3VsdD0kdGVtcGxhdGVGYWN0b3J5LmZyb21Db25maWcob3B0aW9ucy52aWV3LG9wdGlvbnMucGFyYW1zLG9wdGlvbnMubG9jYWxzKTt9CmlmKHJlc3VsdCYmb3B0aW9ucy5ub3RpZnkpeyRyb290U2NvcGUuJGJyb2FkY2FzdCgnJHZpZXdDb250ZW50TG9hZGluZycsb3B0aW9ucyk7fQpyZXR1cm4gcmVzdWx0O319O319CmFuZ3VsYXIubW9kdWxlKCd1aS5yb3V0ZXIuc3RhdGUnKS5wcm92aWRlcignJHZpZXcnLCRWaWV3UHJvdmlkZXIpO2Z1bmN0aW9uICRWaWV3U2Nyb2xsUHJvdmlkZXIoKXt2YXIgdXNlQW5jaG9yU2Nyb2xsPWZhbHNlO3RoaXMudXNlQW5jaG9yU2Nyb2xsPWZ1bmN0aW9uKCl7dXNlQW5jaG9yU2Nyb2xsPXRydWU7fTt0aGlzLiRnZXQ9WyckYW5jaG9yU2Nyb2xsJywnJHRpbWVvdXQnLGZ1bmN0aW9uKCRhbmNob3JTY3JvbGwsJHRpbWVvdXQpe2lmKHVzZUFuY2hvclNjcm9sbCl7cmV0dXJuICRhbmNob3JTY3JvbGw7fQpyZXR1cm4gZnVuY3Rpb24oJGVsZW1lbnQpeyR0aW1lb3V0KGZ1bmN0aW9uKCl7JGVsZW1lbnRbMF0uc2Nyb2xsSW50b1ZpZXcoKTt9LDAsZmFsc2UpO307fV07fQphbmd1bGFyLm1vZHVsZSgndWkucm91dGVyLnN0YXRlJykucHJvdmlkZXIoJyR1aVZpZXdTY3JvbGwnLCRWaWV3U2Nyb2xsUHJvdmlkZXIpOyRWaWV3RGlyZWN0aXZlLiRpbmplY3Q9Wyckc3RhdGUnLCckaW5qZWN0b3InLCckdWlWaWV3U2Nyb2xsJ107ZnVuY3Rpb24gJFZpZXdEaXJlY3RpdmUoJHN0YXRlLCRpbmplY3RvciwkdWlWaWV3U2Nyb2xsKXtmdW5jdGlvbiBnZXRTZXJ2aWNlKCl7cmV0dXJuKCRpbmplY3Rvci5oYXMpP2Z1bmN0aW9uKHNlcnZpY2Upe3JldHVybiAkaW5qZWN0b3IuaGFzKHNlcnZpY2UpPyRpbmplY3Rvci5nZXQoc2VydmljZSk6bnVsbDt9OmZ1bmN0aW9uKHNlcnZpY2Upe3RyeXtyZXR1cm4gJGluamVjdG9yLmdldChzZXJ2aWNlKTt9Y2F0Y2goZSl7cmV0dXJuIG51bGw7fX07fQp2YXIgc2VydmljZT1nZXRTZXJ2aWNlKCksJGFuaW1hdG9yPXNlcnZpY2UoJyRhbmltYXRvcicpLCRhbmltYXRlPXNlcnZpY2UoJyRhbmltYXRlJyk7ZnVuY3Rpb24gZ2V0UmVuZGVyZXIoYXR0cnMsc2NvcGUpe3ZhciBzdGF0aWNzPWZ1bmN0aW9uKCl7cmV0dXJue2VudGVyOmZ1bmN0aW9uKGVsZW1lbnQsdGFyZ2V0LGNiKXt0YXJnZXQuYWZ0ZXIoZWxlbWVudCk7Y2IoKTt9LGxlYXZlOmZ1bmN0aW9uKGVsZW1lbnQsY2Ipe2VsZW1lbnQucmVtb3ZlKCk7Y2IoKTt9fTt9O2lmKCRhbmltYXRlKXtyZXR1cm57ZW50ZXI6ZnVuY3Rpb24oZWxlbWVudCx0YXJnZXQsY2IpeyRhbmltYXRlLmVudGVyKGVsZW1lbnQsbnVsbCx0YXJnZXQsY2IpO30sbGVhdmU6ZnVuY3Rpb24oZWxlbWVudCxjYil7JGFuaW1hdGUubGVhdmUoZWxlbWVudCxjYik7fX07fQppZigkYW5pbWF0b3Ipe3ZhciBhbmltYXRlPSRhbmltYXRvciYmJGFuaW1hdG9yKHNjb3BlLGF0dHJzKTtyZXR1cm57ZW50ZXI6ZnVuY3Rpb24oZWxlbWVudCx0YXJnZXQsY2Ipe2FuaW1hdGUuZW50ZXIoZWxlbWVudCxudWxsLHRhcmdldCk7Y2IoKTt9LGxlYXZlOmZ1bmN0aW9uKGVsZW1lbnQsY2Ipe2FuaW1hdGUubGVhdmUoZWxlbWVudCk7Y2IoKTt9fTt9CnJldHVybiBzdGF0aWNzKCk7fQp2YXIgZGlyZWN0aXZlPXtyZXN0cmljdDonRUNBJyx0ZXJtaW5hbDp0cnVlLHByaW9yaXR5OjQwMCx0cmFuc2NsdWRlOidlbGVtZW50Jyxjb21waWxlOmZ1bmN0aW9uKHRFbGVtZW50LHRBdHRycywkdHJhbnNjbHVkZSl7cmV0dXJuIGZ1bmN0aW9uKHNjb3BlLCRlbGVtZW50LGF0dHJzKXt2YXIgcHJldmlvdXNFbCxjdXJyZW50RWwsY3VycmVudFNjb3BlLGxhdGVzdExvY2FscyxvbmxvYWRFeHA9YXR0cnMub25sb2FkfHwnJyxhdXRvU2Nyb2xsRXhwPWF0dHJzLmF1dG9zY3JvbGwscmVuZGVyZXI9Z2V0UmVuZGVyZXIoYXR0cnMsc2NvcGUpO3Njb3BlLiRvbignJHN0YXRlQ2hhbmdlU3VjY2VzcycsZnVuY3Rpb24oKXt1cGRhdGVWaWV3KGZhbHNlKTt9KTtzY29wZS4kb24oJyR2aWV3Q29udGVudExvYWRpbmcnLGZ1bmN0aW9uKCl7dXBkYXRlVmlldyhmYWxzZSk7fSk7dXBkYXRlVmlldyh0cnVlKTtmdW5jdGlvbiBjbGVhbnVwTGFzdFZpZXcoKXtpZihwcmV2aW91c0VsKXtwcmV2aW91c0VsLnJlbW92ZSgpO3ByZXZpb3VzRWw9bnVsbDt9CmlmKGN1cnJlbnRTY29wZSl7Y3VycmVudFNjb3BlLiRkZXN0cm95KCk7Y3VycmVudFNjb3BlPW51bGw7fQppZihjdXJyZW50RWwpe3JlbmRlcmVyLmxlYXZlKGN1cnJlbnRFbCxmdW5jdGlvbigpe3ByZXZpb3VzRWw9bnVsbDt9KTtwcmV2aW91c0VsPWN1cnJlbnRFbDtjdXJyZW50RWw9bnVsbDt9fQpmdW5jdGlvbiB1cGRhdGVWaWV3KGZpcnN0VGltZSl7dmFyIG5ld1Njb3BlPXNjb3BlLiRuZXcoKSxuYW1lPWN1cnJlbnRFbCYmY3VycmVudEVsLmRhdGEoJyR1aVZpZXdOYW1lJykscHJldmlvdXNMb2NhbHM9bmFtZSYmJHN0YXRlLiRjdXJyZW50JiYkc3RhdGUuJGN1cnJlbnQubG9jYWxzW25hbWVdO2lmKCFmaXJzdFRpbWUmJnByZXZpb3VzTG9jYWxzPT09bGF0ZXN0TG9jYWxzKXJldHVybjt2YXIgY2xvbmU9JHRyYW5zY2x1ZGUobmV3U2NvcGUsZnVuY3Rpb24oY2xvbmUpe3JlbmRlcmVyLmVudGVyKGNsb25lLCRlbGVtZW50LGZ1bmN0aW9uIG9uVWlWaWV3RW50ZXIoKXtpZihhbmd1bGFyLmlzRGVmaW5lZChhdXRvU2Nyb2xsRXhwKSYmIWF1dG9TY3JvbGxFeHB8fHNjb3BlLiRldmFsKGF1dG9TY3JvbGxFeHApKXskdWlWaWV3U2Nyb2xsKGNsb25lKTt9fSk7Y2xlYW51cExhc3RWaWV3KCk7fSk7bGF0ZXN0TG9jYWxzPSRzdGF0ZS4kY3VycmVudC5sb2NhbHNbY2xvbmUuZGF0YSgnJHVpVmlld05hbWUnKV07Y3VycmVudEVsPWNsb25lO2N1cnJlbnRTY29wZT1uZXdTY29wZTtjdXJyZW50U2NvcGUuJGVtaXQoJyR2aWV3Q29udGVudExvYWRlZCcpO2N1cnJlbnRTY29wZS4kZXZhbChvbmxvYWRFeHApO319O319O3JldHVybiBkaXJlY3RpdmU7fQokVmlld0RpcmVjdGl2ZUZpbGwuJGluamVjdD1bJyRjb21waWxlJywnJGNvbnRyb2xsZXInLCckc3RhdGUnXTtmdW5jdGlvbiAkVmlld0RpcmVjdGl2ZUZpbGwoJGNvbXBpbGUsJGNvbnRyb2xsZXIsJHN0YXRlKXtyZXR1cm57cmVzdHJpY3Q6J0VDQScscHJpb3JpdHk6LTQwMCxjb21waWxlOmZ1bmN0aW9uKHRFbGVtZW50KXt2YXIgaW5pdGlhbD10RWxlbWVudC5odG1sKCk7cmV0dXJuIGZ1bmN0aW9uKHNjb3BlLCRlbGVtZW50LGF0dHJzKXt2YXIgbmFtZT1hdHRycy51aVZpZXd8fGF0dHJzLm5hbWV8fCcnLGluaGVyaXRlZD0kZWxlbWVudC5pbmhlcml0ZWREYXRhKCckdWlWaWV3Jyk7aWYobmFtZS5pbmRleE9mKCdAJyk8MCl7bmFtZT1uYW1lKydAJysoaW5oZXJpdGVkP2luaGVyaXRlZC5zdGF0ZS5uYW1lOicnKTt9CiRlbGVtZW50LmRhdGEoJyR1aVZpZXdOYW1lJyxuYW1lKTt2YXIgY3VycmVudD0kc3RhdGUuJGN1cnJlbnQsbG9jYWxzPWN1cnJlbnQmJmN1cnJlbnQubG9jYWxzW25hbWVdO2lmKCFsb2NhbHMpe3JldHVybjt9CiRlbGVtZW50LmRhdGEoJyR1aVZpZXcnLHtuYW1lOm5hbWUsc3RhdGU6bG9jYWxzLiQkc3RhdGV9KTskZWxlbWVudC5odG1sKGxvY2Fscy4kdGVtcGxhdGU/bG9jYWxzLiR0ZW1wbGF0ZTppbml0aWFsKTt2YXIgbGluaz0kY29tcGlsZSgkZWxlbWVudC5jb250ZW50cygpKTtpZihsb2NhbHMuJCRjb250cm9sbGVyKXtsb2NhbHMuJHNjb3BlPXNjb3BlO3ZhciBjb250cm9sbGVyPSRjb250cm9sbGVyKGxvY2Fscy4kJGNvbnRyb2xsZXIsbG9jYWxzKTtpZihsb2NhbHMuJCRjb250cm9sbGVyQXMpe3Njb3BlW2xvY2Fscy4kJGNvbnRyb2xsZXJBc109Y29udHJvbGxlcjt9CiRlbGVtZW50LmRhdGEoJyRuZ0NvbnRyb2xsZXJDb250cm9sbGVyJyxjb250cm9sbGVyKTskZWxlbWVudC5jaGlsZHJlbigpLmRhdGEoJyRuZ0NvbnRyb2xsZXJDb250cm9sbGVyJyxjb250cm9sbGVyKTt9Cmxpbmsoc2NvcGUpO307fX07fQphbmd1bGFyLm1vZHVsZSgndWkucm91dGVyLnN0YXRlJykuZGlyZWN0aXZlKCd1aVZpZXcnLCRWaWV3RGlyZWN0aXZlKTthbmd1bGFyLm1vZHVsZSgndWkucm91dGVyLnN0YXRlJykuZGlyZWN0aXZlKCd1aVZpZXcnLCRWaWV3RGlyZWN0aXZlRmlsbCk7ZnVuY3Rpb24gcGFyc2VTdGF0ZVJlZihyZWYpe3ZhciBwYXJzZWQ9cmVmLnJlcGxhY2UoL1xuL2csIiAiKS5tYXRjaCgvXihbXihdKz8pXHMqKFwoKC4qKVwpKT8kLyk7aWYoIXBhcnNlZHx8cGFyc2VkLmxlbmd0aCE9PTQpdGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkIHN0YXRlIHJlZiAnIityZWYrIiciKTtyZXR1cm57c3RhdGU6cGFyc2VkWzFdLHBhcmFtRXhwcjpwYXJzZWRbM118fG51bGx9O30KZnVuY3Rpb24gc3RhdGVDb250ZXh0KGVsKXt2YXIgc3RhdGVEYXRhPWVsLnBhcmVudCgpLmluaGVyaXRlZERhdGEoJyR1aVZpZXcnKTtpZihzdGF0ZURhdGEmJnN0YXRlRGF0YS5zdGF0ZSYmc3RhdGVEYXRhLnN0YXRlLm5hbWUpe3JldHVybiBzdGF0ZURhdGEuc3RhdGU7fX0KJFN0YXRlUmVmRGlyZWN0aXZlLiRpbmplY3Q9Wyckc3RhdGUnLCckdGltZW91dCddO2Z1bmN0aW9uICRTdGF0ZVJlZkRpcmVjdGl2ZSgkc3RhdGUsJHRpbWVvdXQpe3ZhciBhbGxvd2VkT3B0aW9ucz1bJ2xvY2F0aW9uJywnaW5oZXJpdCcsJ3JlbG9hZCddO3JldHVybntyZXN0cmljdDonQScscmVxdWlyZTonP151aVNyZWZBY3RpdmUnLGxpbms6ZnVuY3Rpb24oc2NvcGUsZWxlbWVudCxhdHRycyx1aVNyZWZBY3RpdmUpe3ZhciByZWY9cGFyc2VTdGF0ZVJlZihhdHRycy51aVNyZWYpO3ZhciBwYXJhbXM9bnVsbCx1cmw9bnVsbCxiYXNlPXN0YXRlQ29udGV4dChlbGVtZW50KXx8JHN0YXRlLiRjdXJyZW50O3ZhciBpc0Zvcm09ZWxlbWVudFswXS5ub2RlTmFtZT09PSJGT1JNIjt2YXIgYXR0cj1pc0Zvcm0/ImFjdGlvbiI6ImhyZWYiLG5hdj10cnVlO3ZhciBvcHRpb25zPXtyZWxhdGl2ZTpiYXNlfTt2YXIgb3B0aW9uc092ZXJyaWRlPXNjb3BlLiRldmFsKGF0dHJzLnVpU3JlZk9wdHMpfHx7fTthbmd1bGFyLmZvckVhY2goYWxsb3dlZE9wdGlvbnMsZnVuY3Rpb24ob3B0aW9uKXtpZihvcHRpb24gaW4gb3B0aW9uc092ZXJyaWRlKXtvcHRpb25zW29wdGlvbl09b3B0aW9uc092ZXJyaWRlW29wdGlvbl07fX0pO3ZhciB1cGRhdGU9ZnVuY3Rpb24obmV3VmFsKXtpZihuZXdWYWwpcGFyYW1zPW5ld1ZhbDtpZighbmF2KXJldHVybjt2YXIgbmV3SHJlZj0kc3RhdGUuaHJlZihyZWYuc3RhdGUscGFyYW1zLG9wdGlvbnMpO2lmKHVpU3JlZkFjdGl2ZSl7dWlTcmVmQWN0aXZlLiQkc2V0U3RhdGVJbmZvKHJlZi5zdGF0ZSxwYXJhbXMpO30KaWYoIW5ld0hyZWYpe25hdj1mYWxzZTtyZXR1cm4gZmFsc2U7fQplbGVtZW50WzBdW2F0dHJdPW5ld0hyZWY7fTtpZihyZWYucGFyYW1FeHByKXtzY29wZS4kd2F0Y2gocmVmLnBhcmFtRXhwcixmdW5jdGlvbihuZXdWYWwsb2xkVmFsKXtpZihuZXdWYWwhPT1wYXJhbXMpdXBkYXRlKG5ld1ZhbCk7fSx0cnVlKTtwYXJhbXM9c2NvcGUuJGV2YWwocmVmLnBhcmFtRXhwcik7fQp1cGRhdGUoKTtpZihpc0Zvcm0pcmV0dXJuO2VsZW1lbnQuYmluZCgiY2xpY2siLGZ1bmN0aW9uKGUpe3ZhciBidXR0b249ZS53aGljaHx8ZS5idXR0b247aWYoIShidXR0b24+MXx8ZS5jdHJsS2V5fHxlLm1ldGFLZXl8fGUuc2hpZnRLZXl8fGVsZW1lbnQuYXR0cigndGFyZ2V0JykpKXskdGltZW91dChmdW5jdGlvbigpeyRzdGF0ZS5nbyhyZWYuc3RhdGUscGFyYW1zLG9wdGlvbnMpO30pO2UucHJldmVudERlZmF1bHQoKTt9fSk7fX07fQokU3RhdGVBY3RpdmVEaXJlY3RpdmUuJGluamVjdD1bJyRzdGF0ZScsJyRzdGF0ZVBhcmFtcycsJyRpbnRlcnBvbGF0ZSddO2Z1bmN0aW9uICRTdGF0ZUFjdGl2ZURpcmVjdGl2ZSgkc3RhdGUsJHN0YXRlUGFyYW1zLCRpbnRlcnBvbGF0ZSl7cmV0dXJue3Jlc3RyaWN0OiJBIixjb250cm9sbGVyOlsnJHNjb3BlJywnJGVsZW1lbnQnLCckYXR0cnMnLGZ1bmN0aW9uKCRzY29wZSwkZWxlbWVudCwkYXR0cnMpe3ZhciBzdGF0ZSxwYXJhbXMsYWN0aXZlQ2xhc3M7YWN0aXZlQ2xhc3M9JGludGVycG9sYXRlKCRhdHRycy51aVNyZWZBY3RpdmV8fCcnLGZhbHNlKSgkc2NvcGUpO3RoaXMuJCRzZXRTdGF0ZUluZm89ZnVuY3Rpb24obmV3U3RhdGUsbmV3UGFyYW1zKXtzdGF0ZT0kc3RhdGUuZ2V0KG5ld1N0YXRlLHN0YXRlQ29udGV4dCgkZWxlbWVudCkpO3BhcmFtcz1uZXdQYXJhbXM7dXBkYXRlKCk7fTskc2NvcGUuJG9uKCckc3RhdGVDaGFuZ2VTdWNjZXNzJyx1cGRhdGUpO2Z1bmN0aW9uIHVwZGF0ZSgpe2lmKCRzdGF0ZS4kY3VycmVudC5zZWxmPT09c3RhdGUmJm1hdGNoZXNQYXJhbXMoKSl7JGVsZW1lbnQuYWRkQ2xhc3MoYWN0aXZlQ2xhc3MpO31lbHNleyRlbGVtZW50LnJlbW92ZUNsYXNzKGFjdGl2ZUNsYXNzKTt9fQpmdW5jdGlvbiBtYXRjaGVzUGFyYW1zKCl7cmV0dXJuIXBhcmFtc3x8ZXF1YWxGb3JLZXlzKHBhcmFtcywkc3RhdGVQYXJhbXMpO319XX07fQphbmd1bGFyLm1vZHVsZSgndWkucm91dGVyLnN0YXRlJykuZGlyZWN0aXZlKCd1aVNyZWYnLCRTdGF0ZVJlZkRpcmVjdGl2ZSkuZGlyZWN0aXZlKCd1aVNyZWZBY3RpdmUnLCRTdGF0ZUFjdGl2ZURpcmVjdGl2ZSk7JElzU3RhdGVGaWx0ZXIuJGluamVjdD1bJyRzdGF0ZSddO2Z1bmN0aW9uICRJc1N0YXRlRmlsdGVyKCRzdGF0ZSl7cmV0dXJuIGZ1bmN0aW9uKHN0YXRlKXtyZXR1cm4gJHN0YXRlLmlzKHN0YXRlKTt9O30KJEluY2x1ZGVkQnlTdGF0ZUZpbHRlci4kaW5qZWN0PVsnJHN0YXRlJ107ZnVuY3Rpb24gJEluY2x1ZGVkQnlTdGF0ZUZpbHRlcigkc3RhdGUpe3JldHVybiBmdW5jdGlvbihzdGF0ZSl7cmV0dXJuICRzdGF0ZS5pbmNsdWRlcyhzdGF0ZSk7fTt9CmFuZ3VsYXIubW9kdWxlKCd1aS5yb3V0ZXIuc3RhdGUnKS5maWx0ZXIoJ2lzU3RhdGUnLCRJc1N0YXRlRmlsdGVyKS5maWx0ZXIoJ2luY2x1ZGVkQnlTdGF0ZScsJEluY2x1ZGVkQnlTdGF0ZUZpbHRlcik7JFJvdXRlUHJvdmlkZXIuJGluamVjdD1bJyRzdGF0ZVByb3ZpZGVyJywnJHVybFJvdXRlclByb3ZpZGVyJ107ZnVuY3Rpb24gJFJvdXRlUHJvdmlkZXIoJHN0YXRlUHJvdmlkZXIsJHVybFJvdXRlclByb3ZpZGVyKXt2YXIgcm91dGVzPVtdO29uRW50ZXJSb3V0ZS4kaW5qZWN0PVsnJCRzdGF0ZSddO2Z1bmN0aW9uIG9uRW50ZXJSb3V0ZSgkJHN0YXRlKXt0aGlzLmxvY2Fscz0kJHN0YXRlLmxvY2Fscy5nbG9iYWxzO3RoaXMucGFyYW1zPXRoaXMubG9jYWxzLiRzdGF0ZVBhcmFtczt9CmZ1bmN0aW9uIG9uRXhpdFJvdXRlKCl7dGhpcy5sb2NhbHM9bnVsbDt0aGlzLnBhcmFtcz1udWxsO30KdGhpcy53aGVuPXdoZW47ZnVuY3Rpb24gd2hlbih1cmwscm91dGUpe2lmKHJvdXRlLnJlZGlyZWN0VG8hPW51bGwpe3ZhciByZWRpcmVjdD1yb3V0ZS5yZWRpcmVjdFRvLGhhbmRsZXI7aWYoaXNTdHJpbmcocmVkaXJlY3QpKXtoYW5kbGVyPXJlZGlyZWN0O31lbHNlIGlmKGlzRnVuY3Rpb24ocmVkaXJlY3QpKXtoYW5kbGVyPWZ1bmN0aW9uKHBhcmFtcywkbG9jYXRpb24pe3JldHVybiByZWRpcmVjdChwYXJhbXMsJGxvY2F0aW9uLnBhdGgoKSwkbG9jYXRpb24uc2VhcmNoKCkpO307fWVsc2V7dGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkICdyZWRpcmVjdFRvJyBpbiB3aGVuKCkiKTt9CiR1cmxSb3V0ZXJQcm92aWRlci53aGVuKHVybCxoYW5kbGVyKTt9ZWxzZXskc3RhdGVQcm92aWRlci5zdGF0ZShpbmhlcml0KHJvdXRlLHtwYXJlbnQ6bnVsbCxuYW1lOidyb3V0ZTonK2VuY29kZVVSSUNvbXBvbmVudCh1cmwpLHVybDp1cmwsb25FbnRlcjpvbkVudGVyUm91dGUsb25FeGl0Om9uRXhpdFJvdXRlfSkpO30Kcm91dGVzLnB1c2gocm91dGUpO3JldHVybiB0aGlzO30KdGhpcy4kZ2V0PSRnZXQ7JGdldC4kaW5qZWN0PVsnJHN0YXRlJywnJHJvb3RTY29wZScsJyRyb3V0ZVBhcmFtcyddO2Z1bmN0aW9uICRnZXQoJHN0YXRlLCRyb290U2NvcGUsJHJvdXRlUGFyYW1zKXt2YXIgJHJvdXRlPXtyb3V0ZXM6cm91dGVzLHBhcmFtczokcm91dGVQYXJhbXMsY3VycmVudDp1bmRlZmluZWR9O2Z1bmN0aW9uIHN0YXRlQXNSb3V0ZShzdGF0ZSl7cmV0dXJuKHN0YXRlLm5hbWUhPT0nJyk/c3RhdGU6dW5kZWZpbmVkO30KJHJvb3RTY29wZS4kb24oJyRzdGF0ZUNoYW5nZVN0YXJ0JyxmdW5jdGlvbihldix0byx0b1BhcmFtcyxmcm9tLGZyb21QYXJhbXMpeyRyb290U2NvcGUuJGJyb2FkY2FzdCgnJHJvdXRlQ2hhbmdlU3RhcnQnLHN0YXRlQXNSb3V0ZSh0byksc3RhdGVBc1JvdXRlKGZyb20pKTt9KTskcm9vdFNjb3BlLiRvbignJHN0YXRlQ2hhbmdlU3VjY2VzcycsZnVuY3Rpb24oZXYsdG8sdG9QYXJhbXMsZnJvbSxmcm9tUGFyYW1zKXskcm91dGUuY3VycmVudD1zdGF0ZUFzUm91dGUodG8pOyRyb290U2NvcGUuJGJyb2FkY2FzdCgnJHJvdXRlQ2hhbmdlU3VjY2Vzcycsc3RhdGVBc1JvdXRlKHRvKSxzdGF0ZUFzUm91dGUoZnJvbSkpO2NvcHkodG9QYXJhbXMsJHJvdXRlLnBhcmFtcyk7fSk7JHJvb3RTY29wZS4kb24oJyRzdGF0ZUNoYW5nZUVycm9yJyxmdW5jdGlvbihldix0byx0b1BhcmFtcyxmcm9tLGZyb21QYXJhbXMsZXJyb3IpeyRyb290U2NvcGUuJGJyb2FkY2FzdCgnJHJvdXRlQ2hhbmdlRXJyb3InLHN0YXRlQXNSb3V0ZSh0byksc3RhdGVBc1JvdXRlKGZyb20pLGVycm9yKTt9KTtyZXR1cm4gJHJvdXRlO319CmFuZ3VsYXIubW9kdWxlKCd1aS5yb3V0ZXIuY29tcGF0JykucHJvdmlkZXIoJyRyb3V0ZScsJFJvdXRlUHJvdmlkZXIpLmRpcmVjdGl2ZSgnbmdWaWV3JywkVmlld0RpcmVjdGl2ZSk7fSkod2luZG93LHdpbmRvdy5hbmd1bGFyKTt9KS5jYWxsKHRoaXMscmVxdWlyZSgib01mcEFuIiksdHlwZW9mIHNlbGYhPT0idW5kZWZpbmVkIj9zZWxmOnR5cGVvZiB3aW5kb3chPT0idW5kZWZpbmVkIj93aW5kb3c6e30scmVxdWlyZSgiYnVmZmVyIikuQnVmZmVyLGFyZ3VtZW50c1szXSxhcmd1bWVudHNbNF0sYXJndW1lbnRzWzVdLGFyZ3VtZW50c1s2XSwiLy4uLy4uL25vZGVfbW9kdWxlcy9hbmd1bGFyLXVpLXJvdXRlci9yZWxlYXNlL2FuZ3VsYXItdWktcm91dGVyLmpzIiwiLy4uLy4uL25vZGVfbW9kdWxlcy9hbmd1bGFyLXVpLXJvdXRlci9yZWxlYXNlIil9LHsiYnVmZmVyIjo0LCJvTWZwQW4iOjd9XSwyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsoZnVuY3Rpb24ocHJvY2VzcyxnbG9iYWwsQnVmZmVyLF9fYXJndW1lbnQwLF9fYXJndW1lbnQxLF9fYXJndW1lbnQyLF9fYXJndW1lbnQzLF9fZmlsZW5hbWUsX19kaXJuYW1lKXtyZXF1aXJlKCcuL2xpYi9hbmd1bGFyLmpzJyk7bW9kdWxlLmV4cG9ydHM9YW5ndWxhcjt9KS5jYWxsKHRoaXMscmVxdWlyZSgib01mcEFuIiksdHlwZW9mIHNlbGYhPT0idW5kZWZpbmVkIj9zZWxmOnR5cGVvZiB3aW5kb3chPT0idW5kZWZpbmVkIj93aW5kb3c6e30scmVxdWlyZSgiYnVmZmVyIikuQnVmZmVyLGFyZ3VtZW50c1szXSxhcmd1bWVudHNbNF0sYXJndW1lbnRzWzVdLGFyZ3VtZW50c1s2XSwiLy4uLy4uL25vZGVfbW9kdWxlcy9hbmd1bGFyL2luZGV4LWJyb3dzZXJpZnkuanMiLCIvLi4vLi4vbm9kZV9tb2R1bGVzL2FuZ3VsYXIiKX0seyIuL2xpYi9hbmd1bGFyLmpzIjozLCJidWZmZXIiOjQsIm9NZnBBbiI6N31dLDM6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpeyhmdW5jdGlvbihwcm9jZXNzLGdsb2JhbCxCdWZmZXIsX19hcmd1bWVudDAsX19hcmd1bWVudDEsX19hcmd1bWVudDIsX19hcmd1bWVudDMsX19maWxlbmFtZSxfX2Rpcm5hbWUpeyhmdW5jdGlvbih3aW5kb3csZG9jdW1lbnQsdW5kZWZpbmVkKXsndXNlIHN0cmljdCc7ZnVuY3Rpb24gbWluRXJyKG1vZHVsZSl7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGNvZGU9YXJndW1lbnRzWzBdLHByZWZpeD0nWycrKG1vZHVsZT9tb2R1bGUrJzonOicnKStjb2RlKyddICcsdGVtcGxhdGU9YXJndW1lbnRzWzFdLHRlbXBsYXRlQXJncz1hcmd1bWVudHMsc3RyaW5naWZ5PWZ1bmN0aW9uKG9iail7aWYodHlwZW9mIG9iaj09PSdmdW5jdGlvbicpe3JldHVybiBvYmoudG9TdHJpbmcoKS5yZXBsYWNlKC8gXHtbXHNcU10qJC8sJycpO31lbHNlIGlmKHR5cGVvZiBvYmo9PT0ndW5kZWZpbmVkJyl7cmV0dXJuJ3VuZGVmaW5lZCc7fWVsc2UgaWYodHlwZW9mIG9iaiE9PSdzdHJpbmcnKXtyZXR1cm4gSlNPTi5zdHJpbmdpZnkob2JqKTt9CnJldHVybiBvYmo7fSxtZXNzYWdlLGk7bWVzc2FnZT1wcmVmaXgrdGVtcGxhdGUucmVwbGFjZSgvXHtcZCtcfS9nLGZ1bmN0aW9uKG1hdGNoKXt2YXIgaW5kZXg9K21hdGNoLnNsaWNlKDEsLTEpLGFyZztpZihpbmRleCsyPHRlbXBsYXRlQXJncy5sZW5ndGgpe2FyZz10ZW1wbGF0ZUFyZ3NbaW5kZXgrMl07aWYodHlwZW9mIGFyZz09PSdmdW5jdGlvbicpe3JldHVybiBhcmcudG9TdHJpbmcoKS5yZXBsYWNlKC8gP1x7W1xzXFNdKiQvLCcnKTt9ZWxzZSBpZih0eXBlb2YgYXJnPT09J3VuZGVmaW5lZCcpe3JldHVybid1bmRlZmluZWQnO31lbHNlIGlmKHR5cGVvZiBhcmchPT0nc3RyaW5nJyl7cmV0dXJuIHRvSnNvbihhcmcpO30KcmV0dXJuIGFyZzt9CnJldHVybiBtYXRjaDt9KTttZXNzYWdlPW1lc3NhZ2UrJ1xuaHR0cDovL2Vycm9ycy5hbmd1bGFyanMub3JnLzEuMi4xOS8nKwoobW9kdWxlP21vZHVsZSsnLyc6JycpK2NvZGU7Zm9yKGk9MjtpPGFyZ3VtZW50cy5sZW5ndGg7aSsrKXttZXNzYWdlPW1lc3NhZ2UrKGk9PTI/Jz8nOicmJykrJ3AnKyhpLTIpKyc9JysKZW5jb2RlVVJJQ29tcG9uZW50KHN0cmluZ2lmeShhcmd1bWVudHNbaV0pKTt9CnJldHVybiBuZXcgRXJyb3IobWVzc2FnZSk7fTt9CnZhciBWQUxJRElUWV9TVEFURV9QUk9QRVJUWT0ndmFsaWRpdHknO3ZhciBsb3dlcmNhc2U9ZnVuY3Rpb24oc3RyaW5nKXtyZXR1cm4gaXNTdHJpbmcoc3RyaW5nKT9zdHJpbmcudG9Mb3dlckNhc2UoKTpzdHJpbmc7fTt2YXIgaGFzT3duUHJvcGVydHk9T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTt2YXIgdXBwZXJjYXNlPWZ1bmN0aW9uKHN0cmluZyl7cmV0dXJuIGlzU3RyaW5nKHN0cmluZyk/c3RyaW5nLnRvVXBwZXJDYXNlKCk6c3RyaW5nO307dmFyIG1hbnVhbExvd2VyY2FzZT1mdW5jdGlvbihzKXtyZXR1cm4gaXNTdHJpbmcocyk/cy5yZXBsYWNlKC9bQS1aXS9nLGZ1bmN0aW9uKGNoKXtyZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZShjaC5jaGFyQ29kZUF0KDApfDMyKTt9KTpzO307dmFyIG1hbnVhbFVwcGVyY2FzZT1mdW5jdGlvbihzKXtyZXR1cm4gaXNTdHJpbmcocyk/cy5yZXBsYWNlKC9bYS16XS9nLGZ1bmN0aW9uKGNoKXtyZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZShjaC5jaGFyQ29kZUF0KDApJn4zMik7fSk6czt9O2lmKCdpJyE9PSdJJy50b0xvd2VyQ2FzZSgpKXtsb3dlcmNhc2U9bWFudWFsTG93ZXJjYXNlO3VwcGVyY2FzZT1tYW51YWxVcHBlcmNhc2U7fQp2YXIKbXNpZSxqcUxpdGUsalF1ZXJ5LHNsaWNlPVtdLnNsaWNlLHB1c2g9W10ucHVzaCx0b1N0cmluZz1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLG5nTWluRXJyPW1pbkVycignbmcnKSxhbmd1bGFyPXdpbmRvdy5hbmd1bGFyfHwod2luZG93LmFuZ3VsYXI9e30pLGFuZ3VsYXJNb2R1bGUsbm9kZU5hbWVfLHVpZD1bJzAnLCcwJywnMCddO21zaWU9aW50KCgvbXNpZSAoXGQrKS8uZXhlYyhsb3dlcmNhc2UobmF2aWdhdG9yLnVzZXJBZ2VudCkpfHxbXSlbMV0pO2lmKGlzTmFOKG1zaWUpKXttc2llPWludCgoL3RyaWRlbnRcLy4qOyBydjooXGQrKS8uZXhlYyhsb3dlcmNhc2UobmF2aWdhdG9yLnVzZXJBZ2VudCkpfHxbXSlbMV0pO30KZnVuY3Rpb24gaXNBcnJheUxpa2Uob2JqKXtpZihvYmo9PW51bGx8fGlzV2luZG93KG9iaikpe3JldHVybiBmYWxzZTt9CnZhciBsZW5ndGg9b2JqLmxlbmd0aDtpZihvYmoubm9kZVR5cGU9PT0xJiZsZW5ndGgpe3JldHVybiB0cnVlO30KcmV0dXJuIGlzU3RyaW5nKG9iail8fGlzQXJyYXkob2JqKXx8bGVuZ3RoPT09MHx8dHlwZW9mIGxlbmd0aD09PSdudW1iZXInJiZsZW5ndGg+MCYmKGxlbmd0aC0xKWluIG9iajt9CmZ1bmN0aW9uIGZvckVhY2gob2JqLGl0ZXJhdG9yLGNvbnRleHQpe3ZhciBrZXk7aWYob2JqKXtpZihpc0Z1bmN0aW9uKG9iaikpe2ZvcihrZXkgaW4gb2JqKXtpZihrZXkhPSdwcm90b3R5cGUnJiZrZXkhPSdsZW5ndGgnJiZrZXkhPSduYW1lJyYmKCFvYmouaGFzT3duUHJvcGVydHl8fG9iai5oYXNPd25Qcm9wZXJ0eShrZXkpKSl7aXRlcmF0b3IuY2FsbChjb250ZXh0LG9ialtrZXldLGtleSk7fX19ZWxzZSBpZihvYmouZm9yRWFjaCYmb2JqLmZvckVhY2ghPT1mb3JFYWNoKXtvYmouZm9yRWFjaChpdGVyYXRvcixjb250ZXh0KTt9ZWxzZSBpZihpc0FycmF5TGlrZShvYmopKXtmb3Ioa2V5PTA7a2V5PG9iai5sZW5ndGg7a2V5KyspCml0ZXJhdG9yLmNhbGwoY29udGV4dCxvYmpba2V5XSxrZXkpO31lbHNle2ZvcihrZXkgaW4gb2JqKXtpZihvYmouaGFzT3duUHJvcGVydHkoa2V5KSl7aXRlcmF0b3IuY2FsbChjb250ZXh0LG9ialtrZXldLGtleSk7fX19fQpyZXR1cm4gb2JqO30KZnVuY3Rpb24gc29ydGVkS2V5cyhvYmope3ZhciBrZXlzPVtdO2Zvcih2YXIga2V5IGluIG9iail7aWYob2JqLmhhc093blByb3BlcnR5KGtleSkpe2tleXMucHVzaChrZXkpO319CnJldHVybiBrZXlzLnNvcnQoKTt9CmZ1bmN0aW9uIGZvckVhY2hTb3J0ZWQob2JqLGl0ZXJhdG9yLGNvbnRleHQpe3ZhciBrZXlzPXNvcnRlZEtleXMob2JqKTtmb3IodmFyIGk9MDtpPGtleXMubGVuZ3RoO2krKyl7aXRlcmF0b3IuY2FsbChjb250ZXh0LG9ialtrZXlzW2ldXSxrZXlzW2ldKTt9CnJldHVybiBrZXlzO30KZnVuY3Rpb24gcmV2ZXJzZVBhcmFtcyhpdGVyYXRvckZuKXtyZXR1cm4gZnVuY3Rpb24odmFsdWUsa2V5KXtpdGVyYXRvckZuKGtleSx2YWx1ZSk7fTt9CmZ1bmN0aW9uIG5leHRVaWQoKXt2YXIgaW5kZXg9dWlkLmxlbmd0aDt2YXIgZGlnaXQ7d2hpbGUoaW5kZXgpe2luZGV4LS07ZGlnaXQ9dWlkW2luZGV4XS5jaGFyQ29kZUF0KDApO2lmKGRpZ2l0PT01Nyl7dWlkW2luZGV4XT0nQSc7cmV0dXJuIHVpZC5qb2luKCcnKTt9CmlmKGRpZ2l0PT05MCl7dWlkW2luZGV4XT0nMCc7fWVsc2V7dWlkW2luZGV4XT1TdHJpbmcuZnJvbUNoYXJDb2RlKGRpZ2l0KzEpO3JldHVybiB1aWQuam9pbignJyk7fX0KdWlkLnVuc2hpZnQoJzAnKTtyZXR1cm4gdWlkLmpvaW4oJycpO30KZnVuY3Rpb24gc2V0SGFzaEtleShvYmosaCl7aWYoaCl7b2JqLiQkaGFzaEtleT1oO30KZWxzZXtkZWxldGUgb2JqLiQkaGFzaEtleTt9fQpmdW5jdGlvbiBleHRlbmQoZHN0KXt2YXIgaD1kc3QuJCRoYXNoS2V5O2ZvckVhY2goYXJndW1lbnRzLGZ1bmN0aW9uKG9iail7aWYob2JqIT09ZHN0KXtmb3JFYWNoKG9iaixmdW5jdGlvbih2YWx1ZSxrZXkpe2RzdFtrZXldPXZhbHVlO30pO319KTtzZXRIYXNoS2V5KGRzdCxoKTtyZXR1cm4gZHN0O30KZnVuY3Rpb24gaW50KHN0cil7cmV0dXJuIHBhcnNlSW50KHN0ciwxMCk7fQpmdW5jdGlvbiBpbmhlcml0KHBhcmVudCxleHRyYSl7cmV0dXJuIGV4dGVuZChuZXcoZXh0ZW5kKGZ1bmN0aW9uKCl7fSx7cHJvdG90eXBlOnBhcmVudH0pKSgpLGV4dHJhKTt9CmZ1bmN0aW9uIG5vb3AoKXt9Cm5vb3AuJGluamVjdD1bXTtmdW5jdGlvbiBpZGVudGl0eSgkKXtyZXR1cm4gJDt9CmlkZW50aXR5LiRpbmplY3Q9W107ZnVuY3Rpb24gdmFsdWVGbih2YWx1ZSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHZhbHVlO307fQpmdW5jdGlvbiBpc1VuZGVmaW5lZCh2YWx1ZSl7cmV0dXJuIHR5cGVvZiB2YWx1ZT09PSd1bmRlZmluZWQnO30KZnVuY3Rpb24gaXNEZWZpbmVkKHZhbHVlKXtyZXR1cm4gdHlwZW9mIHZhbHVlIT09J3VuZGVmaW5lZCc7fQpmdW5jdGlvbiBpc09iamVjdCh2YWx1ZSl7cmV0dXJuIHZhbHVlIT1udWxsJiZ0eXBlb2YgdmFsdWU9PT0nb2JqZWN0Jzt9CmZ1bmN0aW9uIGlzU3RyaW5nKHZhbHVlKXtyZXR1cm4gdHlwZW9mIHZhbHVlPT09J3N0cmluZyc7fQpmdW5jdGlvbiBpc051bWJlcih2YWx1ZSl7cmV0dXJuIHR5cGVvZiB2YWx1ZT09PSdudW1iZXInO30KZnVuY3Rpb24gaXNEYXRlKHZhbHVlKXtyZXR1cm4gdG9TdHJpbmcuY2FsbCh2YWx1ZSk9PT0nW29iamVjdCBEYXRlXSc7fQp2YXIgaXNBcnJheT0oZnVuY3Rpb24oKXtpZighaXNGdW5jdGlvbihBcnJheS5pc0FycmF5KSl7cmV0dXJuIGZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4gdG9TdHJpbmcuY2FsbCh2YWx1ZSk9PT0nW29iamVjdCBBcnJheV0nO307fQpyZXR1cm4gQXJyYXkuaXNBcnJheTt9KSgpO2Z1bmN0aW9uIGlzRnVuY3Rpb24odmFsdWUpe3JldHVybiB0eXBlb2YgdmFsdWU9PT0nZnVuY3Rpb24nO30KZnVuY3Rpb24gaXNSZWdFeHAodmFsdWUpe3JldHVybiB0b1N0cmluZy5jYWxsKHZhbHVlKT09PSdbb2JqZWN0IFJlZ0V4cF0nO30KZnVuY3Rpb24gaXNXaW5kb3cob2JqKXtyZXR1cm4gb2JqJiZvYmouZG9jdW1lbnQmJm9iai5sb2NhdGlvbiYmb2JqLmFsZXJ0JiZvYmouc2V0SW50ZXJ2YWw7fQpmdW5jdGlvbiBpc1Njb3BlKG9iail7cmV0dXJuIG9iaiYmb2JqLiRldmFsQXN5bmMmJm9iai4kd2F0Y2g7fQpmdW5jdGlvbiBpc0ZpbGUob2JqKXtyZXR1cm4gdG9TdHJpbmcuY2FsbChvYmopPT09J1tvYmplY3QgRmlsZV0nO30KZnVuY3Rpb24gaXNCbG9iKG9iail7cmV0dXJuIHRvU3RyaW5nLmNhbGwob2JqKT09PSdbb2JqZWN0IEJsb2JdJzt9CmZ1bmN0aW9uIGlzQm9vbGVhbih2YWx1ZSl7cmV0dXJuIHR5cGVvZiB2YWx1ZT09PSdib29sZWFuJzt9CnZhciB0cmltPShmdW5jdGlvbigpe2lmKCFTdHJpbmcucHJvdG90eXBlLnRyaW0pe3JldHVybiBmdW5jdGlvbih2YWx1ZSl7cmV0dXJuIGlzU3RyaW5nKHZhbHVlKT92YWx1ZS5yZXBsYWNlKC9eXHNccyovLCcnKS5yZXBsYWNlKC9cc1xzKiQvLCcnKTp2YWx1ZTt9O30KcmV0dXJuIGZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4gaXNTdHJpbmcodmFsdWUpP3ZhbHVlLnRyaW0oKTp2YWx1ZTt9O30pKCk7ZnVuY3Rpb24gaXNFbGVtZW50KG5vZGUpe3JldHVybiEhKG5vZGUmJihub2RlLm5vZGVOYW1lfHwobm9kZS5wcm9wJiZub2RlLmF0dHImJm5vZGUuZmluZCkpKTt9CmZ1bmN0aW9uIG1ha2VNYXAoc3RyKXt2YXIgb2JqPXt9LGl0ZW1zPXN0ci5zcGxpdCgiLCIpLGk7Zm9yKGk9MDtpPGl0ZW1zLmxlbmd0aDtpKyspCm9ialtpdGVtc1tpXV09dHJ1ZTtyZXR1cm4gb2JqO30KaWYobXNpZTw5KXtub2RlTmFtZV89ZnVuY3Rpb24oZWxlbWVudCl7ZWxlbWVudD1lbGVtZW50Lm5vZGVOYW1lP2VsZW1lbnQ6ZWxlbWVudFswXTtyZXR1cm4oZWxlbWVudC5zY29wZU5hbWUmJmVsZW1lbnQuc2NvcGVOYW1lIT0nSFRNTCcpP3VwcGVyY2FzZShlbGVtZW50LnNjb3BlTmFtZSsnOicrZWxlbWVudC5ub2RlTmFtZSk6ZWxlbWVudC5ub2RlTmFtZTt9O31lbHNle25vZGVOYW1lXz1mdW5jdGlvbihlbGVtZW50KXtyZXR1cm4gZWxlbWVudC5ub2RlTmFtZT9lbGVtZW50Lm5vZGVOYW1lOmVsZW1lbnRbMF0ubm9kZU5hbWU7fTt9CmZ1bmN0aW9uIG1hcChvYmosaXRlcmF0b3IsY29udGV4dCl7dmFyIHJlc3VsdHM9W107Zm9yRWFjaChvYmosZnVuY3Rpb24odmFsdWUsaW5kZXgsbGlzdCl7cmVzdWx0cy5wdXNoKGl0ZXJhdG9yLmNhbGwoY29udGV4dCx2YWx1ZSxpbmRleCxsaXN0KSk7fSk7cmV0dXJuIHJlc3VsdHM7fQpmdW5jdGlvbiBzaXplKG9iaixvd25Qcm9wc09ubHkpe3ZhciBjb3VudD0wLGtleTtpZihpc0FycmF5KG9iail8fGlzU3RyaW5nKG9iaikpe3JldHVybiBvYmoubGVuZ3RoO31lbHNlIGlmKGlzT2JqZWN0KG9iaikpe2ZvcihrZXkgaW4gb2JqKQppZighb3duUHJvcHNPbmx5fHxvYmouaGFzT3duUHJvcGVydHkoa2V5KSkKY291bnQrKzt9CnJldHVybiBjb3VudDt9CmZ1bmN0aW9uIGluY2x1ZGVzKGFycmF5LG9iail7cmV0dXJuIGluZGV4T2YoYXJyYXksb2JqKSE9LTE7fQpmdW5jdGlvbiBpbmRleE9mKGFycmF5LG9iail7aWYoYXJyYXkuaW5kZXhPZilyZXR1cm4gYXJyYXkuaW5kZXhPZihvYmopO2Zvcih2YXIgaT0wO2k8YXJyYXkubGVuZ3RoO2krKyl7aWYob2JqPT09YXJyYXlbaV0pcmV0dXJuIGk7fQpyZXR1cm4tMTt9CmZ1bmN0aW9uIGFycmF5UmVtb3ZlKGFycmF5LHZhbHVlKXt2YXIgaW5kZXg9aW5kZXhPZihhcnJheSx2YWx1ZSk7aWYoaW5kZXg+PTApCmFycmF5LnNwbGljZShpbmRleCwxKTtyZXR1cm4gdmFsdWU7fQpmdW5jdGlvbiBpc0xlYWZOb2RlKG5vZGUpe2lmKG5vZGUpe3N3aXRjaChub2RlLm5vZGVOYW1lKXtjYXNlIk9QVElPTiI6Y2FzZSJQUkUiOmNhc2UiVElUTEUiOnJldHVybiB0cnVlO319CnJldHVybiBmYWxzZTt9CmZ1bmN0aW9uIGNvcHkoc291cmNlLGRlc3RpbmF0aW9uLHN0YWNrU291cmNlLHN0YWNrRGVzdCl7aWYoaXNXaW5kb3coc291cmNlKXx8aXNTY29wZShzb3VyY2UpKXt0aHJvdyBuZ01pbkVycignY3B3cycsIkNhbid0IGNvcHkhIE1ha2luZyBjb3BpZXMgb2YgV2luZG93IG9yIFNjb3BlIGluc3RhbmNlcyBpcyBub3Qgc3VwcG9ydGVkLiIpO30KaWYoIWRlc3RpbmF0aW9uKXtkZXN0aW5hdGlvbj1zb3VyY2U7aWYoc291cmNlKXtpZihpc0FycmF5KHNvdXJjZSkpe2Rlc3RpbmF0aW9uPWNvcHkoc291cmNlLFtdLHN0YWNrU291cmNlLHN0YWNrRGVzdCk7fWVsc2UgaWYoaXNEYXRlKHNvdXJjZSkpe2Rlc3RpbmF0aW9uPW5ldyBEYXRlKHNvdXJjZS5nZXRUaW1lKCkpO31lbHNlIGlmKGlzUmVnRXhwKHNvdXJjZSkpe2Rlc3RpbmF0aW9uPW5ldyBSZWdFeHAoc291cmNlLnNvdXJjZSk7fWVsc2UgaWYoaXNPYmplY3Qoc291cmNlKSl7ZGVzdGluYXRpb249Y29weShzb3VyY2Use30sc3RhY2tTb3VyY2Usc3RhY2tEZXN0KTt9fX1lbHNle2lmKHNvdXJjZT09PWRlc3RpbmF0aW9uKXRocm93IG5nTWluRXJyKCdjcGknLCJDYW4ndCBjb3B5ISBTb3VyY2UgYW5kIGRlc3RpbmF0aW9uIGFyZSBpZGVudGljYWwuIik7c3RhY2tTb3VyY2U9c3RhY2tTb3VyY2V8fFtdO3N0YWNrRGVzdD1zdGFja0Rlc3R8fFtdO2lmKGlzT2JqZWN0KHNvdXJjZSkpe3ZhciBpbmRleD1pbmRleE9mKHN0YWNrU291cmNlLHNvdXJjZSk7aWYoaW5kZXghPT0tMSlyZXR1cm4gc3RhY2tEZXN0W2luZGV4XTtzdGFja1NvdXJjZS5wdXNoKHNvdXJjZSk7c3RhY2tEZXN0LnB1c2goZGVzdGluYXRpb24pO30KdmFyIHJlc3VsdDtpZihpc0FycmF5KHNvdXJjZSkpe2Rlc3RpbmF0aW9uLmxlbmd0aD0wO2Zvcih2YXIgaT0wO2k8c291cmNlLmxlbmd0aDtpKyspe3Jlc3VsdD1jb3B5KHNvdXJjZVtpXSxudWxsLHN0YWNrU291cmNlLHN0YWNrRGVzdCk7aWYoaXNPYmplY3Qoc291cmNlW2ldKSl7c3RhY2tTb3VyY2UucHVzaChzb3VyY2VbaV0pO3N0YWNrRGVzdC5wdXNoKHJlc3VsdCk7fQpkZXN0aW5hdGlvbi5wdXNoKHJlc3VsdCk7fX1lbHNle3ZhciBoPWRlc3RpbmF0aW9uLiQkaGFzaEtleTtmb3JFYWNoKGRlc3RpbmF0aW9uLGZ1bmN0aW9uKHZhbHVlLGtleSl7ZGVsZXRlIGRlc3RpbmF0aW9uW2tleV07fSk7Zm9yKHZhciBrZXkgaW4gc291cmNlKXtyZXN1bHQ9Y29weShzb3VyY2Vba2V5XSxudWxsLHN0YWNrU291cmNlLHN0YWNrRGVzdCk7aWYoaXNPYmplY3Qoc291cmNlW2tleV0pKXtzdGFja1NvdXJjZS5wdXNoKHNvdXJjZVtrZXldKTtzdGFja0Rlc3QucHVzaChyZXN1bHQpO30KZGVzdGluYXRpb25ba2V5XT1yZXN1bHQ7fQpzZXRIYXNoS2V5KGRlc3RpbmF0aW9uLGgpO319CnJldHVybiBkZXN0aW5hdGlvbjt9CmZ1bmN0aW9uIHNoYWxsb3dDb3B5KHNyYyxkc3Qpe2lmKGlzQXJyYXkoc3JjKSl7ZHN0PWRzdHx8W107Zm9yKHZhciBpPTA7aTxzcmMubGVuZ3RoO2krKyl7ZHN0W2ldPXNyY1tpXTt9fWVsc2UgaWYoaXNPYmplY3Qoc3JjKSl7ZHN0PWRzdHx8e307Zm9yKHZhciBrZXkgaW4gc3JjKXtpZihoYXNPd25Qcm9wZXJ0eS5jYWxsKHNyYyxrZXkpJiYhKGtleS5jaGFyQXQoMCk9PT0nJCcmJmtleS5jaGFyQXQoMSk9PT0nJCcpKXtkc3Rba2V5XT1zcmNba2V5XTt9fX0KcmV0dXJuIGRzdHx8c3JjO30KZnVuY3Rpb24gZXF1YWxzKG8xLG8yKXtpZihvMT09PW8yKXJldHVybiB0cnVlO2lmKG8xPT09bnVsbHx8bzI9PT1udWxsKXJldHVybiBmYWxzZTtpZihvMSE9PW8xJiZvMiE9PW8yKXJldHVybiB0cnVlO3ZhciB0MT10eXBlb2YgbzEsdDI9dHlwZW9mIG8yLGxlbmd0aCxrZXksa2V5U2V0O2lmKHQxPT10Mil7aWYodDE9PSdvYmplY3QnKXtpZihpc0FycmF5KG8xKSl7aWYoIWlzQXJyYXkobzIpKXJldHVybiBmYWxzZTtpZigobGVuZ3RoPW8xLmxlbmd0aCk9PW8yLmxlbmd0aCl7Zm9yKGtleT0wO2tleTxsZW5ndGg7a2V5Kyspe2lmKCFlcXVhbHMobzFba2V5XSxvMltrZXldKSlyZXR1cm4gZmFsc2U7fQpyZXR1cm4gdHJ1ZTt9fWVsc2UgaWYoaXNEYXRlKG8xKSl7cmV0dXJuIGlzRGF0ZShvMikmJm8xLmdldFRpbWUoKT09bzIuZ2V0VGltZSgpO31lbHNlIGlmKGlzUmVnRXhwKG8xKSYmaXNSZWdFeHAobzIpKXtyZXR1cm4gbzEudG9TdHJpbmcoKT09bzIudG9TdHJpbmcoKTt9ZWxzZXtpZihpc1Njb3BlKG8xKXx8aXNTY29wZShvMil8fGlzV2luZG93KG8xKXx8aXNXaW5kb3cobzIpfHxpc0FycmF5KG8yKSlyZXR1cm4gZmFsc2U7a2V5U2V0PXt9O2ZvcihrZXkgaW4gbzEpe2lmKGtleS5jaGFyQXQoMCk9PT0nJCd8fGlzRnVuY3Rpb24obzFba2V5XSkpY29udGludWU7aWYoIWVxdWFscyhvMVtrZXldLG8yW2tleV0pKXJldHVybiBmYWxzZTtrZXlTZXRba2V5XT10cnVlO30KZm9yKGtleSBpbiBvMil7aWYoIWtleVNldC5oYXNPd25Qcm9wZXJ0eShrZXkpJiZrZXkuY2hhckF0KDApIT09JyQnJiZvMltrZXldIT09dW5kZWZpbmVkJiYhaXNGdW5jdGlvbihvMltrZXldKSlyZXR1cm4gZmFsc2U7fQpyZXR1cm4gdHJ1ZTt9fX0KcmV0dXJuIGZhbHNlO30KZnVuY3Rpb24gY3NwKCl7cmV0dXJuKGRvY3VtZW50LnNlY3VyaXR5UG9saWN5JiZkb2N1bWVudC5zZWN1cml0eVBvbGljeS5pc0FjdGl2ZSl8fChkb2N1bWVudC5xdWVyeVNlbGVjdG9yJiYhIShkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbbmctY3NwXScpfHxkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1uZy1jc3BdJykpKTt9CmZ1bmN0aW9uIGNvbmNhdChhcnJheTEsYXJyYXkyLGluZGV4KXtyZXR1cm4gYXJyYXkxLmNvbmNhdChzbGljZS5jYWxsKGFycmF5MixpbmRleCkpO30KZnVuY3Rpb24gc2xpY2VBcmdzKGFyZ3Msc3RhcnRJbmRleCl7cmV0dXJuIHNsaWNlLmNhbGwoYXJncyxzdGFydEluZGV4fHwwKTt9CmZ1bmN0aW9uIGJpbmQoc2VsZixmbil7dmFyIGN1cnJ5QXJncz1hcmd1bWVudHMubGVuZ3RoPjI/c2xpY2VBcmdzKGFyZ3VtZW50cywyKTpbXTtpZihpc0Z1bmN0aW9uKGZuKSYmIShmbiBpbnN0YW5jZW9mIFJlZ0V4cCkpe3JldHVybiBjdXJyeUFyZ3MubGVuZ3RoP2Z1bmN0aW9uKCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/Zm4uYXBwbHkoc2VsZixjdXJyeUFyZ3MuY29uY2F0KHNsaWNlLmNhbGwoYXJndW1lbnRzLDApKSk6Zm4uYXBwbHkoc2VsZixjdXJyeUFyZ3MpO306ZnVuY3Rpb24oKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD9mbi5hcHBseShzZWxmLGFyZ3VtZW50cyk6Zm4uY2FsbChzZWxmKTt9O31lbHNle3JldHVybiBmbjt9fQpmdW5jdGlvbiB0b0pzb25SZXBsYWNlcihrZXksdmFsdWUpe3ZhciB2YWw9dmFsdWU7aWYodHlwZW9mIGtleT09PSdzdHJpbmcnJiZrZXkuY2hhckF0KDApPT09JyQnKXt2YWw9dW5kZWZpbmVkO31lbHNlIGlmKGlzV2luZG93KHZhbHVlKSl7dmFsPSckV0lORE9XJzt9ZWxzZSBpZih2YWx1ZSYmZG9jdW1lbnQ9PT12YWx1ZSl7dmFsPSckRE9DVU1FTlQnO31lbHNlIGlmKGlzU2NvcGUodmFsdWUpKXt2YWw9JyRTQ09QRSc7fQpyZXR1cm4gdmFsO30KZnVuY3Rpb24gdG9Kc29uKG9iaixwcmV0dHkpe2lmKHR5cGVvZiBvYmo9PT0ndW5kZWZpbmVkJylyZXR1cm4gdW5kZWZpbmVkO3JldHVybiBKU09OLnN0cmluZ2lmeShvYmosdG9Kc29uUmVwbGFjZXIscHJldHR5PycgICc6bnVsbCk7fQpmdW5jdGlvbiBmcm9tSnNvbihqc29uKXtyZXR1cm4gaXNTdHJpbmcoanNvbik/SlNPTi5wYXJzZShqc29uKTpqc29uO30KZnVuY3Rpb24gdG9Cb29sZWFuKHZhbHVlKXtpZih0eXBlb2YgdmFsdWU9PT0nZnVuY3Rpb24nKXt2YWx1ZT10cnVlO31lbHNlIGlmKHZhbHVlJiZ2YWx1ZS5sZW5ndGghPT0wKXt2YXIgdj1sb3dlcmNhc2UoIiIrdmFsdWUpO3ZhbHVlPSEodj09J2YnfHx2PT0nMCd8fHY9PSdmYWxzZSd8fHY9PSdubyd8fHY9PSduJ3x8dj09J1tdJyk7fWVsc2V7dmFsdWU9ZmFsc2U7fQpyZXR1cm4gdmFsdWU7fQpmdW5jdGlvbiBzdGFydGluZ1RhZyhlbGVtZW50KXtlbGVtZW50PWpxTGl0ZShlbGVtZW50KS5jbG9uZSgpO3RyeXtlbGVtZW50LmVtcHR5KCk7fWNhdGNoKGUpe30KdmFyIFRFWFRfTk9ERT0zO3ZhciBlbGVtSHRtbD1qcUxpdGUoJzxkaXY+JykuYXBwZW5kKGVsZW1lbnQpLmh0bWwoKTt0cnl7cmV0dXJuIGVsZW1lbnRbMF0ubm9kZVR5cGU9PT1URVhUX05PREU/bG93ZXJjYXNlKGVsZW1IdG1sKTplbGVtSHRtbC5tYXRjaCgvXig8W14+XSs+KS8pWzFdLnJlcGxhY2UoL148KFtcd1wtXSspLyxmdW5jdGlvbihtYXRjaCxub2RlTmFtZSl7cmV0dXJuJzwnK2xvd2VyY2FzZShub2RlTmFtZSk7fSk7fWNhdGNoKGUpe3JldHVybiBsb3dlcmNhc2UoZWxlbUh0bWwpO319CmZ1bmN0aW9uIHRyeURlY29kZVVSSUNvbXBvbmVudCh2YWx1ZSl7dHJ5e3JldHVybiBkZWNvZGVVUklDb21wb25lbnQodmFsdWUpO31jYXRjaChlKXt9fQpmdW5jdGlvbiBwYXJzZUtleVZhbHVlKGtleVZhbHVlKXt2YXIgb2JqPXt9LGtleV92YWx1ZSxrZXk7Zm9yRWFjaCgoa2V5VmFsdWV8fCIiKS5zcGxpdCgnJicpLGZ1bmN0aW9uKGtleVZhbHVlKXtpZihrZXlWYWx1ZSl7a2V5X3ZhbHVlPWtleVZhbHVlLnNwbGl0KCc9Jyk7a2V5PXRyeURlY29kZVVSSUNvbXBvbmVudChrZXlfdmFsdWVbMF0pO2lmKGlzRGVmaW5lZChrZXkpKXt2YXIgdmFsPWlzRGVmaW5lZChrZXlfdmFsdWVbMV0pP3RyeURlY29kZVVSSUNvbXBvbmVudChrZXlfdmFsdWVbMV0pOnRydWU7aWYoIW9ialtrZXldKXtvYmpba2V5XT12YWw7fWVsc2UgaWYoaXNBcnJheShvYmpba2V5XSkpe29ialtrZXldLnB1c2godmFsKTt9ZWxzZXtvYmpba2V5XT1bb2JqW2tleV0sdmFsXTt9fX19KTtyZXR1cm4gb2JqO30KZnVuY3Rpb24gdG9LZXlWYWx1ZShvYmope3ZhciBwYXJ0cz1bXTtmb3JFYWNoKG9iaixmdW5jdGlvbih2YWx1ZSxrZXkpe2lmKGlzQXJyYXkodmFsdWUpKXtmb3JFYWNoKHZhbHVlLGZ1bmN0aW9uKGFycmF5VmFsdWUpe3BhcnRzLnB1c2goZW5jb2RlVXJpUXVlcnkoa2V5LHRydWUpKwooYXJyYXlWYWx1ZT09PXRydWU/Jyc6Jz0nK2VuY29kZVVyaVF1ZXJ5KGFycmF5VmFsdWUsdHJ1ZSkpKTt9KTt9ZWxzZXtwYXJ0cy5wdXNoKGVuY29kZVVyaVF1ZXJ5KGtleSx0cnVlKSsKKHZhbHVlPT09dHJ1ZT8nJzonPScrZW5jb2RlVXJpUXVlcnkodmFsdWUsdHJ1ZSkpKTt9fSk7cmV0dXJuIHBhcnRzLmxlbmd0aD9wYXJ0cy5qb2luKCcmJyk6Jyc7fQpmdW5jdGlvbiBlbmNvZGVVcmlTZWdtZW50KHZhbCl7cmV0dXJuIGVuY29kZVVyaVF1ZXJ5KHZhbCx0cnVlKS5yZXBsYWNlKC8lMjYvZ2ksJyYnKS5yZXBsYWNlKC8lM0QvZ2ksJz0nKS5yZXBsYWNlKC8lMkIvZ2ksJysnKTt9CmZ1bmN0aW9uIGVuY29kZVVyaVF1ZXJ5KHZhbCxwY3RFbmNvZGVTcGFjZXMpe3JldHVybiBlbmNvZGVVUklDb21wb25lbnQodmFsKS5yZXBsYWNlKC8lNDAvZ2ksJ0AnKS5yZXBsYWNlKC8lM0EvZ2ksJzonKS5yZXBsYWNlKC8lMjQvZywnJCcpLnJlcGxhY2UoLyUyQy9naSwnLCcpLnJlcGxhY2UoLyUyMC9nLChwY3RFbmNvZGVTcGFjZXM/JyUyMCc6JysnKSk7fQpmdW5jdGlvbiBhbmd1bGFySW5pdChlbGVtZW50LGJvb3RzdHJhcCl7dmFyIGVsZW1lbnRzPVtlbGVtZW50XSxhcHBFbGVtZW50LG1vZHVsZSxuYW1lcz1bJ25nOmFwcCcsJ25nLWFwcCcsJ3gtbmctYXBwJywnZGF0YS1uZy1hcHAnXSxOR19BUFBfQ0xBU1NfUkVHRVhQPS9cc25nWzpcLV1hcHAoOlxzKihbXHdcZF9dKyk7Pyk/XHMvO2Z1bmN0aW9uIGFwcGVuZChlbGVtZW50KXtlbGVtZW50JiZlbGVtZW50cy5wdXNoKGVsZW1lbnQpO30KZm9yRWFjaChuYW1lcyxmdW5jdGlvbihuYW1lKXtuYW1lc1tuYW1lXT10cnVlO2FwcGVuZChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChuYW1lKSk7bmFtZT1uYW1lLnJlcGxhY2UoJzonLCdcXDonKTtpZihlbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwpe2ZvckVhY2goZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuJytuYW1lKSxhcHBlbmQpO2ZvckVhY2goZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuJytuYW1lKydcXDonKSxhcHBlbmQpO2ZvckVhY2goZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbJytuYW1lKyddJyksYXBwZW5kKTt9fSk7Zm9yRWFjaChlbGVtZW50cyxmdW5jdGlvbihlbGVtZW50KXtpZighYXBwRWxlbWVudCl7dmFyIGNsYXNzTmFtZT0nICcrZWxlbWVudC5jbGFzc05hbWUrJyAnO3ZhciBtYXRjaD1OR19BUFBfQ0xBU1NfUkVHRVhQLmV4ZWMoY2xhc3NOYW1lKTtpZihtYXRjaCl7YXBwRWxlbWVudD1lbGVtZW50O21vZHVsZT0obWF0Y2hbMl18fCcnKS5yZXBsYWNlKC9ccysvZywnLCcpO31lbHNle2ZvckVhY2goZWxlbWVudC5hdHRyaWJ1dGVzLGZ1bmN0aW9uKGF0dHIpe2lmKCFhcHBFbGVtZW50JiZuYW1lc1thdHRyLm5hbWVdKXthcHBFbGVtZW50PWVsZW1lbnQ7bW9kdWxlPWF0dHIudmFsdWU7fX0pO319fSk7aWYoYXBwRWxlbWVudCl7Ym9vdHN0cmFwKGFwcEVsZW1lbnQsbW9kdWxlP1ttb2R1bGVdOltdKTt9fQpmdW5jdGlvbiBib290c3RyYXAoZWxlbWVudCxtb2R1bGVzKXt2YXIgZG9Cb290c3RyYXA9ZnVuY3Rpb24oKXtlbGVtZW50PWpxTGl0ZShlbGVtZW50KTtpZihlbGVtZW50LmluamVjdG9yKCkpe3ZhciB0YWc9KGVsZW1lbnRbMF09PT1kb2N1bWVudCk/J2RvY3VtZW50JzpzdGFydGluZ1RhZyhlbGVtZW50KTt0aHJvdyBuZ01pbkVycignYnRzdHJwZCcsIkFwcCBBbHJlYWR5IEJvb3RzdHJhcHBlZCB3aXRoIHRoaXMgRWxlbWVudCAnezB9JyIsdGFnKTt9Cm1vZHVsZXM9bW9kdWxlc3x8W107bW9kdWxlcy51bnNoaWZ0KFsnJHByb3ZpZGUnLGZ1bmN0aW9uKCRwcm92aWRlKXskcHJvdmlkZS52YWx1ZSgnJHJvb3RFbGVtZW50JyxlbGVtZW50KTt9XSk7bW9kdWxlcy51bnNoaWZ0KCduZycpO3ZhciBpbmplY3Rvcj1jcmVhdGVJbmplY3Rvcihtb2R1bGVzKTtpbmplY3Rvci5pbnZva2UoWyckcm9vdFNjb3BlJywnJHJvb3RFbGVtZW50JywnJGNvbXBpbGUnLCckaW5qZWN0b3InLCckYW5pbWF0ZScsZnVuY3Rpb24oc2NvcGUsZWxlbWVudCxjb21waWxlLGluamVjdG9yLGFuaW1hdGUpe3Njb3BlLiRhcHBseShmdW5jdGlvbigpe2VsZW1lbnQuZGF0YSgnJGluamVjdG9yJyxpbmplY3Rvcik7Y29tcGlsZShlbGVtZW50KShzY29wZSk7fSk7fV0pO3JldHVybiBpbmplY3Rvcjt9O3ZhciBOR19ERUZFUl9CT09UU1RSQVA9L15OR19ERUZFUl9CT09UU1RSQVAhLztpZih3aW5kb3cmJiFOR19ERUZFUl9CT09UU1RSQVAudGVzdCh3aW5kb3cubmFtZSkpe3JldHVybiBkb0Jvb3RzdHJhcCgpO30Kd2luZG93Lm5hbWU9d2luZG93Lm5hbWUucmVwbGFjZShOR19ERUZFUl9CT09UU1RSQVAsJycpO2FuZ3VsYXIucmVzdW1lQm9vdHN0cmFwPWZ1bmN0aW9uKGV4dHJhTW9kdWxlcyl7Zm9yRWFjaChleHRyYU1vZHVsZXMsZnVuY3Rpb24obW9kdWxlKXttb2R1bGVzLnB1c2gobW9kdWxlKTt9KTtkb0Jvb3RzdHJhcCgpO307fQp2YXIgU05BS0VfQ0FTRV9SRUdFWFA9L1tBLVpdL2c7ZnVuY3Rpb24gc25ha2VfY2FzZShuYW1lLHNlcGFyYXRvcil7c2VwYXJhdG9yPXNlcGFyYXRvcnx8J18nO3JldHVybiBuYW1lLnJlcGxhY2UoU05BS0VfQ0FTRV9SRUdFWFAsZnVuY3Rpb24obGV0dGVyLHBvcyl7cmV0dXJuKHBvcz9zZXBhcmF0b3I6JycpK2xldHRlci50b0xvd2VyQ2FzZSgpO30pO30KZnVuY3Rpb24gYmluZEpRdWVyeSgpe2pRdWVyeT13aW5kb3cualF1ZXJ5O2lmKGpRdWVyeSYmalF1ZXJ5LmZuLm9uKXtqcUxpdGU9alF1ZXJ5O2V4dGVuZChqUXVlcnkuZm4se3Njb3BlOkpRTGl0ZVByb3RvdHlwZS5zY29wZSxpc29sYXRlU2NvcGU6SlFMaXRlUHJvdG90eXBlLmlzb2xhdGVTY29wZSxjb250cm9sbGVyOkpRTGl0ZVByb3RvdHlwZS5jb250cm9sbGVyLGluamVjdG9yOkpRTGl0ZVByb3RvdHlwZS5pbmplY3Rvcixpbmhlcml0ZWREYXRhOkpRTGl0ZVByb3RvdHlwZS5pbmhlcml0ZWREYXRhfSk7anFMaXRlUGF0Y2hKUXVlcnlSZW1vdmUoJ3JlbW92ZScsdHJ1ZSx0cnVlLGZhbHNlKTtqcUxpdGVQYXRjaEpRdWVyeVJlbW92ZSgnZW1wdHknLGZhbHNlLGZhbHNlLGZhbHNlKTtqcUxpdGVQYXRjaEpRdWVyeVJlbW92ZSgnaHRtbCcsZmFsc2UsZmFsc2UsdHJ1ZSk7fWVsc2V7anFMaXRlPUpRTGl0ZTt9CmFuZ3VsYXIuZWxlbWVudD1qcUxpdGU7fQpmdW5jdGlvbiBhc3NlcnRBcmcoYXJnLG5hbWUscmVhc29uKXtpZighYXJnKXt0aHJvdyBuZ01pbkVycignYXJlcScsIkFyZ3VtZW50ICd7MH0nIGlzIHsxfSIsKG5hbWV8fCc/JyksKHJlYXNvbnx8InJlcXVpcmVkIikpO30KcmV0dXJuIGFyZzt9CmZ1bmN0aW9uIGFzc2VydEFyZ0ZuKGFyZyxuYW1lLGFjY2VwdEFycmF5QW5ub3RhdGlvbil7aWYoYWNjZXB0QXJyYXlBbm5vdGF0aW9uJiZpc0FycmF5KGFyZykpe2FyZz1hcmdbYXJnLmxlbmd0aC0xXTt9CmFzc2VydEFyZyhpc0Z1bmN0aW9uKGFyZyksbmFtZSwnbm90IGEgZnVuY3Rpb24sIGdvdCAnKwooYXJnJiZ0eXBlb2YgYXJnPT09J29iamVjdCc/YXJnLmNvbnN0cnVjdG9yLm5hbWV8fCdPYmplY3QnOnR5cGVvZiBhcmcpKTtyZXR1cm4gYXJnO30KZnVuY3Rpb24gYXNzZXJ0Tm90SGFzT3duUHJvcGVydHkobmFtZSxjb250ZXh0KXtpZihuYW1lPT09J2hhc093blByb3BlcnR5Jyl7dGhyb3cgbmdNaW5FcnIoJ2JhZG5hbWUnLCJoYXNPd25Qcm9wZXJ0eSBpcyBub3QgYSB2YWxpZCB7MH0gbmFtZSIsY29udGV4dCk7fX0KZnVuY3Rpb24gZ2V0dGVyKG9iaixwYXRoLGJpbmRGblRvU2NvcGUpe2lmKCFwYXRoKXJldHVybiBvYmo7dmFyIGtleXM9cGF0aC5zcGxpdCgnLicpO3ZhciBrZXk7dmFyIGxhc3RJbnN0YW5jZT1vYmo7dmFyIGxlbj1rZXlzLmxlbmd0aDtmb3IodmFyIGk9MDtpPGxlbjtpKyspe2tleT1rZXlzW2ldO2lmKG9iail7b2JqPShsYXN0SW5zdGFuY2U9b2JqKVtrZXldO319CmlmKCFiaW5kRm5Ub1Njb3BlJiZpc0Z1bmN0aW9uKG9iaikpe3JldHVybiBiaW5kKGxhc3RJbnN0YW5jZSxvYmopO30KcmV0dXJuIG9iajt9CmZ1bmN0aW9uIGdldEJsb2NrRWxlbWVudHMobm9kZXMpe3ZhciBzdGFydE5vZGU9bm9kZXNbMF0sZW5kTm9kZT1ub2Rlc1tub2Rlcy5sZW5ndGgtMV07aWYoc3RhcnROb2RlPT09ZW5kTm9kZSl7cmV0dXJuIGpxTGl0ZShzdGFydE5vZGUpO30KdmFyIGVsZW1lbnQ9c3RhcnROb2RlO3ZhciBlbGVtZW50cz1bZWxlbWVudF07ZG97ZWxlbWVudD1lbGVtZW50Lm5leHRTaWJsaW5nO2lmKCFlbGVtZW50KWJyZWFrO2VsZW1lbnRzLnB1c2goZWxlbWVudCk7fXdoaWxlKGVsZW1lbnQhPT1lbmROb2RlKTtyZXR1cm4ganFMaXRlKGVsZW1lbnRzKTt9CmZ1bmN0aW9uIHNldHVwTW9kdWxlTG9hZGVyKHdpbmRvdyl7dmFyICRpbmplY3Rvck1pbkVycj1taW5FcnIoJyRpbmplY3RvcicpO3ZhciBuZ01pbkVycj1taW5FcnIoJ25nJyk7ZnVuY3Rpb24gZW5zdXJlKG9iaixuYW1lLGZhY3Rvcnkpe3JldHVybiBvYmpbbmFtZV18fChvYmpbbmFtZV09ZmFjdG9yeSgpKTt9CnZhciBhbmd1bGFyPWVuc3VyZSh3aW5kb3csJ2FuZ3VsYXInLE9iamVjdCk7YW5ndWxhci4kJG1pbkVycj1hbmd1bGFyLiQkbWluRXJyfHxtaW5FcnI7cmV0dXJuIGVuc3VyZShhbmd1bGFyLCdtb2R1bGUnLGZ1bmN0aW9uKCl7dmFyIG1vZHVsZXM9e307cmV0dXJuIGZ1bmN0aW9uIG1vZHVsZShuYW1lLHJlcXVpcmVzLGNvbmZpZ0ZuKXt2YXIgYXNzZXJ0Tm90SGFzT3duUHJvcGVydHk9ZnVuY3Rpb24obmFtZSxjb250ZXh0KXtpZihuYW1lPT09J2hhc093blByb3BlcnR5Jyl7dGhyb3cgbmdNaW5FcnIoJ2JhZG5hbWUnLCdoYXNPd25Qcm9wZXJ0eSBpcyBub3QgYSB2YWxpZCB7MH0gbmFtZScsY29udGV4dCk7fX07YXNzZXJ0Tm90SGFzT3duUHJvcGVydHkobmFtZSwnbW9kdWxlJyk7aWYocmVxdWlyZXMmJm1vZHVsZXMuaGFzT3duUHJvcGVydHkobmFtZSkpe21vZHVsZXNbbmFtZV09bnVsbDt9CnJldHVybiBlbnN1cmUobW9kdWxlcyxuYW1lLGZ1bmN0aW9uKCl7aWYoIXJlcXVpcmVzKXt0aHJvdyAkaW5qZWN0b3JNaW5FcnIoJ25vbW9kJywiTW9kdWxlICd7MH0nIGlzIG5vdCBhdmFpbGFibGUhIFlvdSBlaXRoZXIgbWlzc3BlbGxlZCAiKyJ0aGUgbW9kdWxlIG5hbWUgb3IgZm9yZ290IHRvIGxvYWQgaXQuIElmIHJlZ2lzdGVyaW5nIGEgbW9kdWxlIGVuc3VyZSB0aGF0IHlvdSAiKyJzcGVjaWZ5IHRoZSBkZXBlbmRlbmNpZXMgYXMgdGhlIHNlY29uZCBhcmd1bWVudC4iLG5hbWUpO30KdmFyIGludm9rZVF1ZXVlPVtdO3ZhciBydW5CbG9ja3M9W107dmFyIGNvbmZpZz1pbnZva2VMYXRlcignJGluamVjdG9yJywnaW52b2tlJyk7dmFyIG1vZHVsZUluc3RhbmNlPXtfaW52b2tlUXVldWU6aW52b2tlUXVldWUsX3J1bkJsb2NrczpydW5CbG9ja3MscmVxdWlyZXM6cmVxdWlyZXMsbmFtZTpuYW1lLHByb3ZpZGVyOmludm9rZUxhdGVyKCckcHJvdmlkZScsJ3Byb3ZpZGVyJyksZmFjdG9yeTppbnZva2VMYXRlcignJHByb3ZpZGUnLCdmYWN0b3J5Jyksc2VydmljZTppbnZva2VMYXRlcignJHByb3ZpZGUnLCdzZXJ2aWNlJyksdmFsdWU6aW52b2tlTGF0ZXIoJyRwcm92aWRlJywndmFsdWUnKSxjb25zdGFudDppbnZva2VMYXRlcignJHByb3ZpZGUnLCdjb25zdGFudCcsJ3Vuc2hpZnQnKSxhbmltYXRpb246aW52b2tlTGF0ZXIoJyRhbmltYXRlUHJvdmlkZXInLCdyZWdpc3RlcicpLGZpbHRlcjppbnZva2VMYXRlcignJGZpbHRlclByb3ZpZGVyJywncmVnaXN0ZXInKSxjb250cm9sbGVyOmludm9rZUxhdGVyKCckY29udHJvbGxlclByb3ZpZGVyJywncmVnaXN0ZXInKSxkaXJlY3RpdmU6aW52b2tlTGF0ZXIoJyRjb21waWxlUHJvdmlkZXInLCdkaXJlY3RpdmUnKSxjb25maWc6Y29uZmlnLHJ1bjpmdW5jdGlvbihibG9jayl7cnVuQmxvY2tzLnB1c2goYmxvY2spO3JldHVybiB0aGlzO319O2lmKGNvbmZpZ0ZuKXtjb25maWcoY29uZmlnRm4pO30KcmV0dXJuIG1vZHVsZUluc3RhbmNlO2Z1bmN0aW9uIGludm9rZUxhdGVyKHByb3ZpZGVyLG1ldGhvZCxpbnNlcnRNZXRob2Qpe3JldHVybiBmdW5jdGlvbigpe2ludm9rZVF1ZXVlW2luc2VydE1ldGhvZHx8J3B1c2gnXShbcHJvdmlkZXIsbWV0aG9kLGFyZ3VtZW50c10pO3JldHVybiBtb2R1bGVJbnN0YW5jZTt9O319KTt9O30pO30KdmFyIHZlcnNpb249e2Z1bGw6JzEuMi4xOScsbWFqb3I6MSxtaW5vcjoyLGRvdDoxOSxjb2RlTmFtZToncHJlY29nbml0aXZlLWZsYXNoYmFja3MnfTtmdW5jdGlvbiBwdWJsaXNoRXh0ZXJuYWxBUEkoYW5ndWxhcil7ZXh0ZW5kKGFuZ3VsYXIseydib290c3RyYXAnOmJvb3RzdHJhcCwnY29weSc6Y29weSwnZXh0ZW5kJzpleHRlbmQsJ2VxdWFscyc6ZXF1YWxzLCdlbGVtZW50JzpqcUxpdGUsJ2ZvckVhY2gnOmZvckVhY2gsJ2luamVjdG9yJzpjcmVhdGVJbmplY3Rvciwnbm9vcCc6bm9vcCwnYmluZCc6YmluZCwndG9Kc29uJzp0b0pzb24sJ2Zyb21Kc29uJzpmcm9tSnNvbiwnaWRlbnRpdHknOmlkZW50aXR5LCdpc1VuZGVmaW5lZCc6aXNVbmRlZmluZWQsJ2lzRGVmaW5lZCc6aXNEZWZpbmVkLCdpc1N0cmluZyc6aXNTdHJpbmcsJ2lzRnVuY3Rpb24nOmlzRnVuY3Rpb24sJ2lzT2JqZWN0Jzppc09iamVjdCwnaXNOdW1iZXInOmlzTnVtYmVyLCdpc0VsZW1lbnQnOmlzRWxlbWVudCwnaXNBcnJheSc6aXNBcnJheSwndmVyc2lvbic6dmVyc2lvbiwnaXNEYXRlJzppc0RhdGUsJ2xvd2VyY2FzZSc6bG93ZXJjYXNlLCd1cHBlcmNhc2UnOnVwcGVyY2FzZSwnY2FsbGJhY2tzJzp7Y291bnRlcjowfSwnJCRtaW5FcnInOm1pbkVyciwnJCRjc3AnOmNzcH0pO2FuZ3VsYXJNb2R1bGU9c2V0dXBNb2R1bGVMb2FkZXIod2luZG93KTt0cnl7YW5ndWxhck1vZHVsZSgnbmdMb2NhbGUnKTt9Y2F0Y2goZSl7YW5ndWxhck1vZHVsZSgnbmdMb2NhbGUnLFtdKS5wcm92aWRlcignJGxvY2FsZScsJExvY2FsZVByb3ZpZGVyKTt9CmFuZ3VsYXJNb2R1bGUoJ25nJyxbJ25nTG9jYWxlJ10sWyckcHJvdmlkZScsZnVuY3Rpb24gbmdNb2R1bGUoJHByb3ZpZGUpeyRwcm92aWRlLnByb3ZpZGVyKHskJHNhbml0aXplVXJpOiQkU2FuaXRpemVVcmlQcm92aWRlcn0pOyRwcm92aWRlLnByb3ZpZGVyKCckY29tcGlsZScsJENvbXBpbGVQcm92aWRlcikuZGlyZWN0aXZlKHthOmh0bWxBbmNob3JEaXJlY3RpdmUsaW5wdXQ6aW5wdXREaXJlY3RpdmUsdGV4dGFyZWE6aW5wdXREaXJlY3RpdmUsZm9ybTpmb3JtRGlyZWN0aXZlLHNjcmlwdDpzY3JpcHREaXJlY3RpdmUsc2VsZWN0OnNlbGVjdERpcmVjdGl2ZSxzdHlsZTpzdHlsZURpcmVjdGl2ZSxvcHRpb246b3B0aW9uRGlyZWN0aXZlLG5nQmluZDpuZ0JpbmREaXJlY3RpdmUsbmdCaW5kSHRtbDpuZ0JpbmRIdG1sRGlyZWN0aXZlLG5nQmluZFRlbXBsYXRlOm5nQmluZFRlbXBsYXRlRGlyZWN0aXZlLG5nQ2xhc3M6bmdDbGFzc0RpcmVjdGl2ZSxuZ0NsYXNzRXZlbjpuZ0NsYXNzRXZlbkRpcmVjdGl2ZSxuZ0NsYXNzT2RkOm5nQ2xhc3NPZGREaXJlY3RpdmUsbmdDbG9hazpuZ0Nsb2FrRGlyZWN0aXZlLG5nQ29udHJvbGxlcjpuZ0NvbnRyb2xsZXJEaXJlY3RpdmUsbmdGb3JtOm5nRm9ybURpcmVjdGl2ZSxuZ0hpZGU6bmdIaWRlRGlyZWN0aXZlLG5nSWY6bmdJZkRpcmVjdGl2ZSxuZ0luY2x1ZGU6bmdJbmNsdWRlRGlyZWN0aXZlLG5nSW5pdDpuZ0luaXREaXJlY3RpdmUsbmdOb25CaW5kYWJsZTpuZ05vbkJpbmRhYmxlRGlyZWN0aXZlLG5nUGx1cmFsaXplOm5nUGx1cmFsaXplRGlyZWN0aXZlLG5nUmVwZWF0Om5nUmVwZWF0RGlyZWN0aXZlLG5nU2hvdzpuZ1Nob3dEaXJlY3RpdmUsbmdTdHlsZTpuZ1N0eWxlRGlyZWN0aXZlLG5nU3dpdGNoOm5nU3dpdGNoRGlyZWN0aXZlLG5nU3dpdGNoV2hlbjpuZ1N3aXRjaFdoZW5EaXJlY3RpdmUsbmdTd2l0Y2hEZWZhdWx0Om5nU3dpdGNoRGVmYXVsdERpcmVjdGl2ZSxuZ09wdGlvbnM6bmdPcHRpb25zRGlyZWN0aXZlLG5nVHJhbnNjbHVkZTpuZ1RyYW5zY2x1ZGVEaXJlY3RpdmUsbmdNb2RlbDpuZ01vZGVsRGlyZWN0aXZlLG5nTGlzdDpuZ0xpc3REaXJlY3RpdmUsbmdDaGFuZ2U6bmdDaGFuZ2VEaXJlY3RpdmUscmVxdWlyZWQ6cmVxdWlyZWREaXJlY3RpdmUsbmdSZXF1aXJlZDpyZXF1aXJlZERpcmVjdGl2ZSxuZ1ZhbHVlOm5nVmFsdWVEaXJlY3RpdmV9KS5kaXJlY3RpdmUoe25nSW5jbHVkZTpuZ0luY2x1ZGVGaWxsQ29udGVudERpcmVjdGl2ZX0pLmRpcmVjdGl2ZShuZ0F0dHJpYnV0ZUFsaWFzRGlyZWN0aXZlcykuZGlyZWN0aXZlKG5nRXZlbnREaXJlY3RpdmVzKTskcHJvdmlkZS5wcm92aWRlcih7JGFuY2hvclNjcm9sbDokQW5jaG9yU2Nyb2xsUHJvdmlkZXIsJGFuaW1hdGU6JEFuaW1hdGVQcm92aWRlciwkYnJvd3NlcjokQnJvd3NlclByb3ZpZGVyLCRjYWNoZUZhY3Rvcnk6JENhY2hlRmFjdG9yeVByb3ZpZGVyLCRjb250cm9sbGVyOiRDb250cm9sbGVyUHJvdmlkZXIsJGRvY3VtZW50OiREb2N1bWVudFByb3ZpZGVyLCRleGNlcHRpb25IYW5kbGVyOiRFeGNlcHRpb25IYW5kbGVyUHJvdmlkZXIsJGZpbHRlcjokRmlsdGVyUHJvdmlkZXIsJGludGVycG9sYXRlOiRJbnRlcnBvbGF0ZVByb3ZpZGVyLCRpbnRlcnZhbDokSW50ZXJ2YWxQcm92aWRlciwkaHR0cDokSHR0cFByb3ZpZGVyLCRodHRwQmFja2VuZDokSHR0cEJhY2tlbmRQcm92aWRlciwkbG9jYXRpb246JExvY2F0aW9uUHJvdmlkZXIsJGxvZzokTG9nUHJvdmlkZXIsJHBhcnNlOiRQYXJzZVByb3ZpZGVyLCRyb290U2NvcGU6JFJvb3RTY29wZVByb3ZpZGVyLCRxOiRRUHJvdmlkZXIsJHNjZTokU2NlUHJvdmlkZXIsJHNjZURlbGVnYXRlOiRTY2VEZWxlZ2F0ZVByb3ZpZGVyLCRzbmlmZmVyOiRTbmlmZmVyUHJvdmlkZXIsJHRlbXBsYXRlQ2FjaGU6JFRlbXBsYXRlQ2FjaGVQcm92aWRlciwkdGltZW91dDokVGltZW91dFByb3ZpZGVyLCR3aW5kb3c6JFdpbmRvd1Byb3ZpZGVyLCQkckFGOiQkUkFGUHJvdmlkZXIsJCRhc3luY0NhbGxiYWNrOiQkQXN5bmNDYWxsYmFja1Byb3ZpZGVyfSk7fV0pO30KSlFMaXRlLmV4cGFuZG89J25nMzM5Jzt2YXIganFDYWNoZT1KUUxpdGUuY2FjaGU9e30sanFJZD0xLGFkZEV2ZW50TGlzdGVuZXJGbj0od2luZG93LmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXI/ZnVuY3Rpb24oZWxlbWVudCx0eXBlLGZuKXtlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIodHlwZSxmbixmYWxzZSk7fTpmdW5jdGlvbihlbGVtZW50LHR5cGUsZm4pe2VsZW1lbnQuYXR0YWNoRXZlbnQoJ29uJyt0eXBlLGZuKTt9KSxyZW1vdmVFdmVudExpc3RlbmVyRm49KHdpbmRvdy5kb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyP2Z1bmN0aW9uKGVsZW1lbnQsdHlwZSxmbil7ZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKHR5cGUsZm4sZmFsc2UpO306ZnVuY3Rpb24oZWxlbWVudCx0eXBlLGZuKXtlbGVtZW50LmRldGFjaEV2ZW50KCdvbicrdHlwZSxmbik7fSk7dmFyIGpxRGF0YT1KUUxpdGUuX2RhdGE9ZnVuY3Rpb24obm9kZSl7cmV0dXJuIHRoaXMuY2FjaGVbbm9kZVt0aGlzLmV4cGFuZG9dXXx8e307fTtmdW5jdGlvbiBqcU5leHRJZCgpe3JldHVybisranFJZDt9CnZhciBTUEVDSUFMX0NIQVJTX1JFR0VYUD0vKFtcOlwtXF9dKyguKSkvZzt2YXIgTU9aX0hBQ0tfUkVHRVhQPS9ebW96KFtBLVpdKS87dmFyIGpxTGl0ZU1pbkVycj1taW5FcnIoJ2pxTGl0ZScpO2Z1bmN0aW9uIGNhbWVsQ2FzZShuYW1lKXtyZXR1cm4gbmFtZS5yZXBsYWNlKFNQRUNJQUxfQ0hBUlNfUkVHRVhQLGZ1bmN0aW9uKF8sc2VwYXJhdG9yLGxldHRlcixvZmZzZXQpe3JldHVybiBvZmZzZXQ/bGV0dGVyLnRvVXBwZXJDYXNlKCk6bGV0dGVyO30pLnJlcGxhY2UoTU9aX0hBQ0tfUkVHRVhQLCdNb3okMScpO30KZnVuY3Rpb24ganFMaXRlUGF0Y2hKUXVlcnlSZW1vdmUobmFtZSxkaXNwYXRjaFRoaXMsZmlsdGVyRWxlbXMsZ2V0dGVySWZOb0FyZ3VtZW50cyl7dmFyIG9yaWdpbmFsSnFGbj1qUXVlcnkuZm5bbmFtZV07b3JpZ2luYWxKcUZuPW9yaWdpbmFsSnFGbi4kb3JpZ2luYWx8fG9yaWdpbmFsSnFGbjtyZW1vdmVQYXRjaC4kb3JpZ2luYWw9b3JpZ2luYWxKcUZuO2pRdWVyeS5mbltuYW1lXT1yZW1vdmVQYXRjaDtmdW5jdGlvbiByZW1vdmVQYXRjaChwYXJhbSl7dmFyIGxpc3Q9ZmlsdGVyRWxlbXMmJnBhcmFtP1t0aGlzLmZpbHRlcihwYXJhbSldOlt0aGlzXSxmaXJlRXZlbnQ9ZGlzcGF0Y2hUaGlzLHNldCxzZXRJbmRleCxzZXRMZW5ndGgsZWxlbWVudCxjaGlsZEluZGV4LGNoaWxkTGVuZ3RoLGNoaWxkcmVuO2lmKCFnZXR0ZXJJZk5vQXJndW1lbnRzfHxwYXJhbSE9bnVsbCl7d2hpbGUobGlzdC5sZW5ndGgpe3NldD1saXN0LnNoaWZ0KCk7Zm9yKHNldEluZGV4PTAsc2V0TGVuZ3RoPXNldC5sZW5ndGg7c2V0SW5kZXg8c2V0TGVuZ3RoO3NldEluZGV4Kyspe2VsZW1lbnQ9anFMaXRlKHNldFtzZXRJbmRleF0pO2lmKGZpcmVFdmVudCl7ZWxlbWVudC50cmlnZ2VySGFuZGxlcignJGRlc3Ryb3knKTt9ZWxzZXtmaXJlRXZlbnQ9IWZpcmVFdmVudDt9CmZvcihjaGlsZEluZGV4PTAsY2hpbGRMZW5ndGg9KGNoaWxkcmVuPWVsZW1lbnQuY2hpbGRyZW4oKSkubGVuZ3RoO2NoaWxkSW5kZXg8Y2hpbGRMZW5ndGg7Y2hpbGRJbmRleCsrKXtsaXN0LnB1c2goalF1ZXJ5KGNoaWxkcmVuW2NoaWxkSW5kZXhdKSk7fX19fQpyZXR1cm4gb3JpZ2luYWxKcUZuLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt9fQp2YXIgU0lOR0xFX1RBR19SRUdFWFA9L148KFx3KylccypcLz8+KD86PFwvXDE+fCkkLzt2YXIgSFRNTF9SRUdFWFA9Lzx8JiM/XHcrOy87dmFyIFRBR19OQU1FX1JFR0VYUD0vPChbXHc6XSspLzt2YXIgWEhUTUxfVEFHX1JFR0VYUD0vPCg/IWFyZWF8YnJ8Y29sfGVtYmVkfGhyfGltZ3xpbnB1dHxsaW5rfG1ldGF8cGFyYW0pKChbXHc6XSspW14+XSopXC8+L2dpO3ZhciB3cmFwTWFwPXsnb3B0aW9uJzpbMSwnPHNlbGVjdCBtdWx0aXBsZT0ibXVsdGlwbGUiPicsJzwvc2VsZWN0PiddLCd0aGVhZCc6WzEsJzx0YWJsZT4nLCc8L3RhYmxlPiddLCdjb2wnOlsyLCc8dGFibGU+PGNvbGdyb3VwPicsJzwvY29sZ3JvdXA+PC90YWJsZT4nXSwndHInOlsyLCc8dGFibGU+PHRib2R5PicsJzwvdGJvZHk+PC90YWJsZT4nXSwndGQnOlszLCc8dGFibGU+PHRib2R5Pjx0cj4nLCc8L3RyPjwvdGJvZHk+PC90YWJsZT4nXSwnX2RlZmF1bHQnOlswLCIiLCIiXX07d3JhcE1hcC5vcHRncm91cD13cmFwTWFwLm9wdGlvbjt3cmFwTWFwLnRib2R5PXdyYXBNYXAudGZvb3Q9d3JhcE1hcC5jb2xncm91cD13cmFwTWFwLmNhcHRpb249d3JhcE1hcC50aGVhZDt3cmFwTWFwLnRoPXdyYXBNYXAudGQ7ZnVuY3Rpb24ganFMaXRlSXNUZXh0Tm9kZShodG1sKXtyZXR1cm4hSFRNTF9SRUdFWFAudGVzdChodG1sKTt9CmZ1bmN0aW9uIGpxTGl0ZUJ1aWxkRnJhZ21lbnQoaHRtbCxjb250ZXh0KXt2YXIgZWxlbSx0bXAsdGFnLHdyYXAsZnJhZ21lbnQ9Y29udGV4dC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksbm9kZXM9W10saSxqLGpqO2lmKGpxTGl0ZUlzVGV4dE5vZGUoaHRtbCkpe25vZGVzLnB1c2goY29udGV4dC5jcmVhdGVUZXh0Tm9kZShodG1sKSk7fWVsc2V7dG1wPWZyYWdtZW50LmFwcGVuZENoaWxkKGNvbnRleHQuY3JlYXRlRWxlbWVudCgnZGl2JykpO3RhZz0oVEFHX05BTUVfUkVHRVhQLmV4ZWMoaHRtbCl8fFsiIiwiIl0pWzFdLnRvTG93ZXJDYXNlKCk7d3JhcD13cmFwTWFwW3RhZ118fHdyYXBNYXAuX2RlZmF1bHQ7dG1wLmlubmVySFRNTD0nPGRpdj4mIzE2MDs8L2Rpdj4nKwp3cmFwWzFdK2h0bWwucmVwbGFjZShYSFRNTF9UQUdfUkVHRVhQLCI8JDE+PC8kMj4iKSt3cmFwWzJdO3RtcC5yZW1vdmVDaGlsZCh0bXAuZmlyc3RDaGlsZCk7aT13cmFwWzBdO3doaWxlKGktLSl7dG1wPXRtcC5sYXN0Q2hpbGQ7fQpmb3Ioaj0wLGpqPXRtcC5jaGlsZE5vZGVzLmxlbmd0aDtqPGpqOysrailub2Rlcy5wdXNoKHRtcC5jaGlsZE5vZGVzW2pdKTt0bXA9ZnJhZ21lbnQuZmlyc3RDaGlsZDt0bXAudGV4dENvbnRlbnQ9IiI7fQpmcmFnbWVudC50ZXh0Q29udGVudD0iIjtmcmFnbWVudC5pbm5lckhUTUw9IiI7cmV0dXJuIG5vZGVzO30KZnVuY3Rpb24ganFMaXRlUGFyc2VIVE1MKGh0bWwsY29udGV4dCl7Y29udGV4dD1jb250ZXh0fHxkb2N1bWVudDt2YXIgcGFyc2VkO2lmKChwYXJzZWQ9U0lOR0xFX1RBR19SRUdFWFAuZXhlYyhodG1sKSkpe3JldHVybltjb250ZXh0LmNyZWF0ZUVsZW1lbnQocGFyc2VkWzFdKV07fQpyZXR1cm4ganFMaXRlQnVpbGRGcmFnbWVudChodG1sLGNvbnRleHQpO30KZnVuY3Rpb24gSlFMaXRlKGVsZW1lbnQpe2lmKGVsZW1lbnQgaW5zdGFuY2VvZiBKUUxpdGUpe3JldHVybiBlbGVtZW50O30KaWYoaXNTdHJpbmcoZWxlbWVudCkpe2VsZW1lbnQ9dHJpbShlbGVtZW50KTt9CmlmKCEodGhpcyBpbnN0YW5jZW9mIEpRTGl0ZSkpe2lmKGlzU3RyaW5nKGVsZW1lbnQpJiZlbGVtZW50LmNoYXJBdCgwKSE9JzwnKXt0aHJvdyBqcUxpdGVNaW5FcnIoJ25vc2VsJywnTG9va2luZyB1cCBlbGVtZW50cyB2aWEgc2VsZWN0b3JzIGlzIG5vdCBzdXBwb3J0ZWQgYnkganFMaXRlISBTZWU6IGh0dHA6Ly9kb2NzLmFuZ3VsYXJqcy5vcmcvYXBpL2FuZ3VsYXIuZWxlbWVudCcpO30KcmV0dXJuIG5ldyBKUUxpdGUoZWxlbWVudCk7fQppZihpc1N0cmluZyhlbGVtZW50KSl7anFMaXRlQWRkTm9kZXModGhpcyxqcUxpdGVQYXJzZUhUTUwoZWxlbWVudCkpO3ZhciBmcmFnbWVudD1qcUxpdGUoZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpKTtmcmFnbWVudC5hcHBlbmQodGhpcyk7fWVsc2V7anFMaXRlQWRkTm9kZXModGhpcyxlbGVtZW50KTt9fQpmdW5jdGlvbiBqcUxpdGVDbG9uZShlbGVtZW50KXtyZXR1cm4gZWxlbWVudC5jbG9uZU5vZGUodHJ1ZSk7fQpmdW5jdGlvbiBqcUxpdGVEZWFsb2MoZWxlbWVudCl7anFMaXRlUmVtb3ZlRGF0YShlbGVtZW50KTtmb3IodmFyIGk9MCxjaGlsZHJlbj1lbGVtZW50LmNoaWxkTm9kZXN8fFtdO2k8Y2hpbGRyZW4ubGVuZ3RoO2krKyl7anFMaXRlRGVhbG9jKGNoaWxkcmVuW2ldKTt9fQpmdW5jdGlvbiBqcUxpdGVPZmYoZWxlbWVudCx0eXBlLGZuLHVuc3VwcG9ydGVkKXtpZihpc0RlZmluZWQodW5zdXBwb3J0ZWQpKXRocm93IGpxTGl0ZU1pbkVycignb2ZmYXJncycsJ2pxTGl0ZSNvZmYoKSBkb2VzIG5vdCBzdXBwb3J0IHRoZSBgc2VsZWN0b3JgIGFyZ3VtZW50Jyk7dmFyIGV2ZW50cz1qcUxpdGVFeHBhbmRvU3RvcmUoZWxlbWVudCwnZXZlbnRzJyksaGFuZGxlPWpxTGl0ZUV4cGFuZG9TdG9yZShlbGVtZW50LCdoYW5kbGUnKTtpZighaGFuZGxlKXJldHVybjtpZihpc1VuZGVmaW5lZCh0eXBlKSl7Zm9yRWFjaChldmVudHMsZnVuY3Rpb24oZXZlbnRIYW5kbGVyLHR5cGUpe3JlbW92ZUV2ZW50TGlzdGVuZXJGbihlbGVtZW50LHR5cGUsZXZlbnRIYW5kbGVyKTtkZWxldGUgZXZlbnRzW3R5cGVdO30pO31lbHNle2ZvckVhY2godHlwZS5zcGxpdCgnICcpLGZ1bmN0aW9uKHR5cGUpe2lmKGlzVW5kZWZpbmVkKGZuKSl7cmVtb3ZlRXZlbnRMaXN0ZW5lckZuKGVsZW1lbnQsdHlwZSxldmVudHNbdHlwZV0pO2RlbGV0ZSBldmVudHNbdHlwZV07fWVsc2V7YXJyYXlSZW1vdmUoZXZlbnRzW3R5cGVdfHxbXSxmbik7fX0pO319CmZ1bmN0aW9uIGpxTGl0ZVJlbW92ZURhdGEoZWxlbWVudCxuYW1lKXt2YXIgZXhwYW5kb0lkPWVsZW1lbnQubmczMzksZXhwYW5kb1N0b3JlPWpxQ2FjaGVbZXhwYW5kb0lkXTtpZihleHBhbmRvU3RvcmUpe2lmKG5hbWUpe2RlbGV0ZSBqcUNhY2hlW2V4cGFuZG9JZF0uZGF0YVtuYW1lXTtyZXR1cm47fQppZihleHBhbmRvU3RvcmUuaGFuZGxlKXtleHBhbmRvU3RvcmUuZXZlbnRzLiRkZXN0cm95JiZleHBhbmRvU3RvcmUuaGFuZGxlKHt9LCckZGVzdHJveScpO2pxTGl0ZU9mZihlbGVtZW50KTt9CmRlbGV0ZSBqcUNhY2hlW2V4cGFuZG9JZF07ZWxlbWVudC5uZzMzOT11bmRlZmluZWQ7fX0KZnVuY3Rpb24ganFMaXRlRXhwYW5kb1N0b3JlKGVsZW1lbnQsa2V5LHZhbHVlKXt2YXIgZXhwYW5kb0lkPWVsZW1lbnQubmczMzksZXhwYW5kb1N0b3JlPWpxQ2FjaGVbZXhwYW5kb0lkfHwtMV07aWYoaXNEZWZpbmVkKHZhbHVlKSl7aWYoIWV4cGFuZG9TdG9yZSl7ZWxlbWVudC5uZzMzOT1leHBhbmRvSWQ9anFOZXh0SWQoKTtleHBhbmRvU3RvcmU9anFDYWNoZVtleHBhbmRvSWRdPXt9O30KZXhwYW5kb1N0b3JlW2tleV09dmFsdWU7fWVsc2V7cmV0dXJuIGV4cGFuZG9TdG9yZSYmZXhwYW5kb1N0b3JlW2tleV07fX0KZnVuY3Rpb24ganFMaXRlRGF0YShlbGVtZW50LGtleSx2YWx1ZSl7dmFyIGRhdGE9anFMaXRlRXhwYW5kb1N0b3JlKGVsZW1lbnQsJ2RhdGEnKSxpc1NldHRlcj1pc0RlZmluZWQodmFsdWUpLGtleURlZmluZWQ9IWlzU2V0dGVyJiZpc0RlZmluZWQoa2V5KSxpc1NpbXBsZUdldHRlcj1rZXlEZWZpbmVkJiYhaXNPYmplY3Qoa2V5KTtpZighZGF0YSYmIWlzU2ltcGxlR2V0dGVyKXtqcUxpdGVFeHBhbmRvU3RvcmUoZWxlbWVudCwnZGF0YScsZGF0YT17fSk7fQppZihpc1NldHRlcil7ZGF0YVtrZXldPXZhbHVlO31lbHNle2lmKGtleURlZmluZWQpe2lmKGlzU2ltcGxlR2V0dGVyKXtyZXR1cm4gZGF0YSYmZGF0YVtrZXldO31lbHNle2V4dGVuZChkYXRhLGtleSk7fX1lbHNle3JldHVybiBkYXRhO319fQpmdW5jdGlvbiBqcUxpdGVIYXNDbGFzcyhlbGVtZW50LHNlbGVjdG9yKXtpZighZWxlbWVudC5nZXRBdHRyaWJ1dGUpcmV0dXJuIGZhbHNlO3JldHVybigoIiAiKyhlbGVtZW50LmdldEF0dHJpYnV0ZSgnY2xhc3MnKXx8JycpKyIgIikucmVwbGFjZSgvW1xuXHRdL2csIiAiKS5pbmRleE9mKCIgIitzZWxlY3RvcisiICIpPi0xKTt9CmZ1bmN0aW9uIGpxTGl0ZVJlbW92ZUNsYXNzKGVsZW1lbnQsY3NzQ2xhc3Nlcyl7aWYoY3NzQ2xhc3NlcyYmZWxlbWVudC5zZXRBdHRyaWJ1dGUpe2ZvckVhY2goY3NzQ2xhc3Nlcy5zcGxpdCgnICcpLGZ1bmN0aW9uKGNzc0NsYXNzKXtlbGVtZW50LnNldEF0dHJpYnV0ZSgnY2xhc3MnLHRyaW0oKCIgIisoZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2NsYXNzJyl8fCcnKSsiICIpLnJlcGxhY2UoL1tcblx0XS9nLCIgIikucmVwbGFjZSgiICIrdHJpbShjc3NDbGFzcykrIiAiLCIgIikpKTt9KTt9fQpmdW5jdGlvbiBqcUxpdGVBZGRDbGFzcyhlbGVtZW50LGNzc0NsYXNzZXMpe2lmKGNzc0NsYXNzZXMmJmVsZW1lbnQuc2V0QXR0cmlidXRlKXt2YXIgZXhpc3RpbmdDbGFzc2VzPSgnICcrKGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdjbGFzcycpfHwnJykrJyAnKS5yZXBsYWNlKC9bXG5cdF0vZywiICIpO2ZvckVhY2goY3NzQ2xhc3Nlcy5zcGxpdCgnICcpLGZ1bmN0aW9uKGNzc0NsYXNzKXtjc3NDbGFzcz10cmltKGNzc0NsYXNzKTtpZihleGlzdGluZ0NsYXNzZXMuaW5kZXhPZignICcrY3NzQ2xhc3MrJyAnKT09PS0xKXtleGlzdGluZ0NsYXNzZXMrPWNzc0NsYXNzKycgJzt9fSk7ZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2NsYXNzJyx0cmltKGV4aXN0aW5nQ2xhc3NlcykpO319CmZ1bmN0aW9uIGpxTGl0ZUFkZE5vZGVzKHJvb3QsZWxlbWVudHMpe2lmKGVsZW1lbnRzKXtlbGVtZW50cz0oIWVsZW1lbnRzLm5vZGVOYW1lJiZpc0RlZmluZWQoZWxlbWVudHMubGVuZ3RoKSYmIWlzV2luZG93KGVsZW1lbnRzKSk/ZWxlbWVudHM6W2VsZW1lbnRzXTtmb3IodmFyIGk9MDtpPGVsZW1lbnRzLmxlbmd0aDtpKyspe3Jvb3QucHVzaChlbGVtZW50c1tpXSk7fX19CmZ1bmN0aW9uIGpxTGl0ZUNvbnRyb2xsZXIoZWxlbWVudCxuYW1lKXtyZXR1cm4ganFMaXRlSW5oZXJpdGVkRGF0YShlbGVtZW50LCckJysobmFtZXx8J25nQ29udHJvbGxlcicpKydDb250cm9sbGVyJyk7fQpmdW5jdGlvbiBqcUxpdGVJbmhlcml0ZWREYXRhKGVsZW1lbnQsbmFtZSx2YWx1ZSl7ZWxlbWVudD1qcUxpdGUoZWxlbWVudCk7aWYoZWxlbWVudFswXS5ub2RlVHlwZT09OSl7ZWxlbWVudD1lbGVtZW50LmZpbmQoJ2h0bWwnKTt9CnZhciBuYW1lcz1pc0FycmF5KG5hbWUpP25hbWU6W25hbWVdO3doaWxlKGVsZW1lbnQubGVuZ3RoKXt2YXIgbm9kZT1lbGVtZW50WzBdO2Zvcih2YXIgaT0wLGlpPW5hbWVzLmxlbmd0aDtpPGlpO2krKyl7aWYoKHZhbHVlPWVsZW1lbnQuZGF0YShuYW1lc1tpXSkpIT09dW5kZWZpbmVkKXJldHVybiB2YWx1ZTt9CmVsZW1lbnQ9anFMaXRlKG5vZGUucGFyZW50Tm9kZXx8KG5vZGUubm9kZVR5cGU9PT0xMSYmbm9kZS5ob3N0KSk7fX0KZnVuY3Rpb24ganFMaXRlRW1wdHkoZWxlbWVudCl7Zm9yKHZhciBpPTAsY2hpbGROb2Rlcz1lbGVtZW50LmNoaWxkTm9kZXM7aTxjaGlsZE5vZGVzLmxlbmd0aDtpKyspe2pxTGl0ZURlYWxvYyhjaGlsZE5vZGVzW2ldKTt9CndoaWxlKGVsZW1lbnQuZmlyc3RDaGlsZCl7ZWxlbWVudC5yZW1vdmVDaGlsZChlbGVtZW50LmZpcnN0Q2hpbGQpO319CnZhciBKUUxpdGVQcm90b3R5cGU9SlFMaXRlLnByb3RvdHlwZT17cmVhZHk6ZnVuY3Rpb24oZm4pe3ZhciBmaXJlZD1mYWxzZTtmdW5jdGlvbiB0cmlnZ2VyKCl7aWYoZmlyZWQpcmV0dXJuO2ZpcmVkPXRydWU7Zm4oKTt9CmlmKGRvY3VtZW50LnJlYWR5U3RhdGU9PT0nY29tcGxldGUnKXtzZXRUaW1lb3V0KHRyaWdnZXIpO31lbHNle3RoaXMub24oJ0RPTUNvbnRlbnRMb2FkZWQnLHRyaWdnZXIpO0pRTGl0ZSh3aW5kb3cpLm9uKCdsb2FkJyx0cmlnZ2VyKTt9fSx0b1N0cmluZzpmdW5jdGlvbigpe3ZhciB2YWx1ZT1bXTtmb3JFYWNoKHRoaXMsZnVuY3Rpb24oZSl7dmFsdWUucHVzaCgnJytlKTt9KTtyZXR1cm4nWycrdmFsdWUuam9pbignLCAnKSsnXSc7fSxlcTpmdW5jdGlvbihpbmRleCl7cmV0dXJuKGluZGV4Pj0wKT9qcUxpdGUodGhpc1tpbmRleF0pOmpxTGl0ZSh0aGlzW3RoaXMubGVuZ3RoK2luZGV4XSk7fSxsZW5ndGg6MCxwdXNoOnB1c2gsc29ydDpbXS5zb3J0LHNwbGljZTpbXS5zcGxpY2V9O3ZhciBCT09MRUFOX0FUVFI9e307Zm9yRWFjaCgnbXVsdGlwbGUsc2VsZWN0ZWQsY2hlY2tlZCxkaXNhYmxlZCxyZWFkT25seSxyZXF1aXJlZCxvcGVuJy5zcGxpdCgnLCcpLGZ1bmN0aW9uKHZhbHVlKXtCT09MRUFOX0FUVFJbbG93ZXJjYXNlKHZhbHVlKV09dmFsdWU7fSk7dmFyIEJPT0xFQU5fRUxFTUVOVFM9e307Zm9yRWFjaCgnaW5wdXQsc2VsZWN0LG9wdGlvbix0ZXh0YXJlYSxidXR0b24sZm9ybSxkZXRhaWxzJy5zcGxpdCgnLCcpLGZ1bmN0aW9uKHZhbHVlKXtCT09MRUFOX0VMRU1FTlRTW3VwcGVyY2FzZSh2YWx1ZSldPXRydWU7fSk7ZnVuY3Rpb24gZ2V0Qm9vbGVhbkF0dHJOYW1lKGVsZW1lbnQsbmFtZSl7dmFyIGJvb2xlYW5BdHRyPUJPT0xFQU5fQVRUUltuYW1lLnRvTG93ZXJDYXNlKCldO3JldHVybiBib29sZWFuQXR0ciYmQk9PTEVBTl9FTEVNRU5UU1tlbGVtZW50Lm5vZGVOYW1lXSYmYm9vbGVhbkF0dHI7fQpmb3JFYWNoKHtkYXRhOmpxTGl0ZURhdGEsaW5oZXJpdGVkRGF0YTpqcUxpdGVJbmhlcml0ZWREYXRhLHNjb3BlOmZ1bmN0aW9uKGVsZW1lbnQpe3JldHVybiBqcUxpdGUoZWxlbWVudCkuZGF0YSgnJHNjb3BlJyl8fGpxTGl0ZUluaGVyaXRlZERhdGEoZWxlbWVudC5wYXJlbnROb2RlfHxlbGVtZW50LFsnJGlzb2xhdGVTY29wZScsJyRzY29wZSddKTt9LGlzb2xhdGVTY29wZTpmdW5jdGlvbihlbGVtZW50KXtyZXR1cm4ganFMaXRlKGVsZW1lbnQpLmRhdGEoJyRpc29sYXRlU2NvcGUnKXx8anFMaXRlKGVsZW1lbnQpLmRhdGEoJyRpc29sYXRlU2NvcGVOb1RlbXBsYXRlJyk7fSxjb250cm9sbGVyOmpxTGl0ZUNvbnRyb2xsZXIsaW5qZWN0b3I6ZnVuY3Rpb24oZWxlbWVudCl7cmV0dXJuIGpxTGl0ZUluaGVyaXRlZERhdGEoZWxlbWVudCwnJGluamVjdG9yJyk7fSxyZW1vdmVBdHRyOmZ1bmN0aW9uKGVsZW1lbnQsbmFtZSl7ZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUobmFtZSk7fSxoYXNDbGFzczpqcUxpdGVIYXNDbGFzcyxjc3M6ZnVuY3Rpb24oZWxlbWVudCxuYW1lLHZhbHVlKXtuYW1lPWNhbWVsQ2FzZShuYW1lKTtpZihpc0RlZmluZWQodmFsdWUpKXtlbGVtZW50LnN0eWxlW25hbWVdPXZhbHVlO31lbHNle3ZhciB2YWw7aWYobXNpZTw9OCl7dmFsPWVsZW1lbnQuY3VycmVudFN0eWxlJiZlbGVtZW50LmN1cnJlbnRTdHlsZVtuYW1lXTtpZih2YWw9PT0nJyl2YWw9J2F1dG8nO30KdmFsPXZhbHx8ZWxlbWVudC5zdHlsZVtuYW1lXTtpZihtc2llPD04KXt2YWw9KHZhbD09PScnKT91bmRlZmluZWQ6dmFsO30KcmV0dXJuIHZhbDt9fSxhdHRyOmZ1bmN0aW9uKGVsZW1lbnQsbmFtZSx2YWx1ZSl7dmFyIGxvd2VyY2FzZWROYW1lPWxvd2VyY2FzZShuYW1lKTtpZihCT09MRUFOX0FUVFJbbG93ZXJjYXNlZE5hbWVdKXtpZihpc0RlZmluZWQodmFsdWUpKXtpZighIXZhbHVlKXtlbGVtZW50W25hbWVdPXRydWU7ZWxlbWVudC5zZXRBdHRyaWJ1dGUobmFtZSxsb3dlcmNhc2VkTmFtZSk7fWVsc2V7ZWxlbWVudFtuYW1lXT1mYWxzZTtlbGVtZW50LnJlbW92ZUF0dHJpYnV0ZShsb3dlcmNhc2VkTmFtZSk7fX1lbHNle3JldHVybihlbGVtZW50W25hbWVdfHwoZWxlbWVudC5hdHRyaWJ1dGVzLmdldE5hbWVkSXRlbShuYW1lKXx8bm9vcCkuc3BlY2lmaWVkKT9sb3dlcmNhc2VkTmFtZTp1bmRlZmluZWQ7fX1lbHNlIGlmKGlzRGVmaW5lZCh2YWx1ZSkpe2VsZW1lbnQuc2V0QXR0cmlidXRlKG5hbWUsdmFsdWUpO31lbHNlIGlmKGVsZW1lbnQuZ2V0QXR0cmlidXRlKXt2YXIgcmV0PWVsZW1lbnQuZ2V0QXR0cmlidXRlKG5hbWUsMik7cmV0dXJuIHJldD09PW51bGw/dW5kZWZpbmVkOnJldDt9fSxwcm9wOmZ1bmN0aW9uKGVsZW1lbnQsbmFtZSx2YWx1ZSl7aWYoaXNEZWZpbmVkKHZhbHVlKSl7ZWxlbWVudFtuYW1lXT12YWx1ZTt9ZWxzZXtyZXR1cm4gZWxlbWVudFtuYW1lXTt9fSx0ZXh0OihmdW5jdGlvbigpe3ZhciBOT0RFX1RZUEVfVEVYVF9QUk9QRVJUWT1bXTtpZihtc2llPDkpe05PREVfVFlQRV9URVhUX1BST1BFUlRZWzFdPSdpbm5lclRleHQnO05PREVfVFlQRV9URVhUX1BST1BFUlRZWzNdPSdub2RlVmFsdWUnO31lbHNle05PREVfVFlQRV9URVhUX1BST1BFUlRZWzFdPU5PREVfVFlQRV9URVhUX1BST1BFUlRZWzNdPSd0ZXh0Q29udGVudCc7fQpnZXRUZXh0LiRkdj0nJztyZXR1cm4gZ2V0VGV4dDtmdW5jdGlvbiBnZXRUZXh0KGVsZW1lbnQsdmFsdWUpe3ZhciB0ZXh0UHJvcD1OT0RFX1RZUEVfVEVYVF9QUk9QRVJUWVtlbGVtZW50Lm5vZGVUeXBlXTtpZihpc1VuZGVmaW5lZCh2YWx1ZSkpe3JldHVybiB0ZXh0UHJvcD9lbGVtZW50W3RleHRQcm9wXTonJzt9CmVsZW1lbnRbdGV4dFByb3BdPXZhbHVlO319KSgpLHZhbDpmdW5jdGlvbihlbGVtZW50LHZhbHVlKXtpZihpc1VuZGVmaW5lZCh2YWx1ZSkpe2lmKG5vZGVOYW1lXyhlbGVtZW50KT09PSdTRUxFQ1QnJiZlbGVtZW50Lm11bHRpcGxlKXt2YXIgcmVzdWx0PVtdO2ZvckVhY2goZWxlbWVudC5vcHRpb25zLGZ1bmN0aW9uKG9wdGlvbil7aWYob3B0aW9uLnNlbGVjdGVkKXtyZXN1bHQucHVzaChvcHRpb24udmFsdWV8fG9wdGlvbi50ZXh0KTt9fSk7cmV0dXJuIHJlc3VsdC5sZW5ndGg9PT0wP251bGw6cmVzdWx0O30KcmV0dXJuIGVsZW1lbnQudmFsdWU7fQplbGVtZW50LnZhbHVlPXZhbHVlO30saHRtbDpmdW5jdGlvbihlbGVtZW50LHZhbHVlKXtpZihpc1VuZGVmaW5lZCh2YWx1ZSkpe3JldHVybiBlbGVtZW50LmlubmVySFRNTDt9CmZvcih2YXIgaT0wLGNoaWxkTm9kZXM9ZWxlbWVudC5jaGlsZE5vZGVzO2k8Y2hpbGROb2Rlcy5sZW5ndGg7aSsrKXtqcUxpdGVEZWFsb2MoY2hpbGROb2Rlc1tpXSk7fQplbGVtZW50LmlubmVySFRNTD12YWx1ZTt9LGVtcHR5OmpxTGl0ZUVtcHR5fSxmdW5jdGlvbihmbixuYW1lKXtKUUxpdGUucHJvdG90eXBlW25hbWVdPWZ1bmN0aW9uKGFyZzEsYXJnMil7dmFyIGksa2V5O3ZhciBub2RlQ291bnQ9dGhpcy5sZW5ndGg7aWYoZm4hPT1qcUxpdGVFbXB0eSYmKCgoZm4ubGVuZ3RoPT0yJiYoZm4hPT1qcUxpdGVIYXNDbGFzcyYmZm4hPT1qcUxpdGVDb250cm9sbGVyKSk/YXJnMTphcmcyKT09PXVuZGVmaW5lZCkpe2lmKGlzT2JqZWN0KGFyZzEpKXtmb3IoaT0wO2k8bm9kZUNvdW50O2krKyl7aWYoZm49PT1qcUxpdGVEYXRhKXtmbih0aGlzW2ldLGFyZzEpO31lbHNle2ZvcihrZXkgaW4gYXJnMSl7Zm4odGhpc1tpXSxrZXksYXJnMVtrZXldKTt9fX0KcmV0dXJuIHRoaXM7fWVsc2V7dmFyIHZhbHVlPWZuLiRkdjt2YXIgamo9KHZhbHVlPT09dW5kZWZpbmVkKT9NYXRoLm1pbihub2RlQ291bnQsMSk6bm9kZUNvdW50O2Zvcih2YXIgaj0wO2o8amo7aisrKXt2YXIgbm9kZVZhbHVlPWZuKHRoaXNbal0sYXJnMSxhcmcyKTt2YWx1ZT12YWx1ZT92YWx1ZStub2RlVmFsdWU6bm9kZVZhbHVlO30KcmV0dXJuIHZhbHVlO319ZWxzZXtmb3IoaT0wO2k8bm9kZUNvdW50O2krKyl7Zm4odGhpc1tpXSxhcmcxLGFyZzIpO30KcmV0dXJuIHRoaXM7fX07fSk7ZnVuY3Rpb24gY3JlYXRlRXZlbnRIYW5kbGVyKGVsZW1lbnQsZXZlbnRzKXt2YXIgZXZlbnRIYW5kbGVyPWZ1bmN0aW9uKGV2ZW50LHR5cGUpe2lmKCFldmVudC5wcmV2ZW50RGVmYXVsdCl7ZXZlbnQucHJldmVudERlZmF1bHQ9ZnVuY3Rpb24oKXtldmVudC5yZXR1cm5WYWx1ZT1mYWxzZTt9O30KaWYoIWV2ZW50LnN0b3BQcm9wYWdhdGlvbil7ZXZlbnQuc3RvcFByb3BhZ2F0aW9uPWZ1bmN0aW9uKCl7ZXZlbnQuY2FuY2VsQnViYmxlPXRydWU7fTt9CmlmKCFldmVudC50YXJnZXQpe2V2ZW50LnRhcmdldD1ldmVudC5zcmNFbGVtZW50fHxkb2N1bWVudDt9CmlmKGlzVW5kZWZpbmVkKGV2ZW50LmRlZmF1bHRQcmV2ZW50ZWQpKXt2YXIgcHJldmVudD1ldmVudC5wcmV2ZW50RGVmYXVsdDtldmVudC5wcmV2ZW50RGVmYXVsdD1mdW5jdGlvbigpe2V2ZW50LmRlZmF1bHRQcmV2ZW50ZWQ9dHJ1ZTtwcmV2ZW50LmNhbGwoZXZlbnQpO307ZXZlbnQuZGVmYXVsdFByZXZlbnRlZD1mYWxzZTt9CmV2ZW50LmlzRGVmYXVsdFByZXZlbnRlZD1mdW5jdGlvbigpe3JldHVybiBldmVudC5kZWZhdWx0UHJldmVudGVkfHxldmVudC5yZXR1cm5WYWx1ZT09PWZhbHNlO307dmFyIGV2ZW50SGFuZGxlcnNDb3B5PXNoYWxsb3dDb3B5KGV2ZW50c1t0eXBlfHxldmVudC50eXBlXXx8W10pO2ZvckVhY2goZXZlbnRIYW5kbGVyc0NvcHksZnVuY3Rpb24oZm4pe2ZuLmNhbGwoZWxlbWVudCxldmVudCk7fSk7aWYobXNpZTw9OCl7ZXZlbnQucHJldmVudERlZmF1bHQ9bnVsbDtldmVudC5zdG9wUHJvcGFnYXRpb249bnVsbDtldmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQ9bnVsbDt9ZWxzZXtkZWxldGUgZXZlbnQucHJldmVudERlZmF1bHQ7ZGVsZXRlIGV2ZW50LnN0b3BQcm9wYWdhdGlvbjtkZWxldGUgZXZlbnQuaXNEZWZhdWx0UHJldmVudGVkO319O2V2ZW50SGFuZGxlci5lbGVtPWVsZW1lbnQ7cmV0dXJuIGV2ZW50SGFuZGxlcjt9CmZvckVhY2goe3JlbW92ZURhdGE6anFMaXRlUmVtb3ZlRGF0YSxkZWFsb2M6anFMaXRlRGVhbG9jLG9uOmZ1bmN0aW9uIG9uRm4oZWxlbWVudCx0eXBlLGZuLHVuc3VwcG9ydGVkKXtpZihpc0RlZmluZWQodW5zdXBwb3J0ZWQpKXRocm93IGpxTGl0ZU1pbkVycignb25hcmdzJywnanFMaXRlI29uKCkgZG9lcyBub3Qgc3VwcG9ydCB0aGUgYHNlbGVjdG9yYCBvciBgZXZlbnREYXRhYCBwYXJhbWV0ZXJzJyk7dmFyIGV2ZW50cz1qcUxpdGVFeHBhbmRvU3RvcmUoZWxlbWVudCwnZXZlbnRzJyksaGFuZGxlPWpxTGl0ZUV4cGFuZG9TdG9yZShlbGVtZW50LCdoYW5kbGUnKTtpZighZXZlbnRzKWpxTGl0ZUV4cGFuZG9TdG9yZShlbGVtZW50LCdldmVudHMnLGV2ZW50cz17fSk7aWYoIWhhbmRsZSlqcUxpdGVFeHBhbmRvU3RvcmUoZWxlbWVudCwnaGFuZGxlJyxoYW5kbGU9Y3JlYXRlRXZlbnRIYW5kbGVyKGVsZW1lbnQsZXZlbnRzKSk7Zm9yRWFjaCh0eXBlLnNwbGl0KCcgJyksZnVuY3Rpb24odHlwZSl7dmFyIGV2ZW50Rm5zPWV2ZW50c1t0eXBlXTtpZighZXZlbnRGbnMpe2lmKHR5cGU9PSdtb3VzZWVudGVyJ3x8dHlwZT09J21vdXNlbGVhdmUnKXt2YXIgY29udGFpbnM9ZG9jdW1lbnQuYm9keS5jb250YWluc3x8ZG9jdW1lbnQuYm9keS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbj9mdW5jdGlvbihhLGIpe3ZhciBhZG93bj1hLm5vZGVUeXBlPT09OT9hLmRvY3VtZW50RWxlbWVudDphLGJ1cD1iJiZiLnBhcmVudE5vZGU7cmV0dXJuIGE9PT1idXB8fCEhKGJ1cCYmYnVwLm5vZGVUeXBlPT09MSYmKGFkb3duLmNvbnRhaW5zP2Fkb3duLmNvbnRhaW5zKGJ1cCk6YS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiYmYS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihidXApJjE2KSk7fTpmdW5jdGlvbihhLGIpe2lmKGIpe3doaWxlKChiPWIucGFyZW50Tm9kZSkpe2lmKGI9PT1hKXtyZXR1cm4gdHJ1ZTt9fX0KcmV0dXJuIGZhbHNlO307ZXZlbnRzW3R5cGVdPVtdO3ZhciBldmVudG1hcD17bW91c2VsZWF2ZToibW91c2VvdXQiLG1vdXNlZW50ZXI6Im1vdXNlb3ZlciJ9O29uRm4oZWxlbWVudCxldmVudG1hcFt0eXBlXSxmdW5jdGlvbihldmVudCl7dmFyIHRhcmdldD10aGlzLHJlbGF0ZWQ9ZXZlbnQucmVsYXRlZFRhcmdldDtpZighcmVsYXRlZHx8KHJlbGF0ZWQhPT10YXJnZXQmJiFjb250YWlucyh0YXJnZXQscmVsYXRlZCkpKXtoYW5kbGUoZXZlbnQsdHlwZSk7fX0pO31lbHNle2FkZEV2ZW50TGlzdGVuZXJGbihlbGVtZW50LHR5cGUsaGFuZGxlKTtldmVudHNbdHlwZV09W107fQpldmVudEZucz1ldmVudHNbdHlwZV07fQpldmVudEZucy5wdXNoKGZuKTt9KTt9LG9mZjpqcUxpdGVPZmYsb25lOmZ1bmN0aW9uKGVsZW1lbnQsdHlwZSxmbil7ZWxlbWVudD1qcUxpdGUoZWxlbWVudCk7ZWxlbWVudC5vbih0eXBlLGZ1bmN0aW9uIG9uRm4oKXtlbGVtZW50Lm9mZih0eXBlLGZuKTtlbGVtZW50Lm9mZih0eXBlLG9uRm4pO30pO2VsZW1lbnQub24odHlwZSxmbik7fSxyZXBsYWNlV2l0aDpmdW5jdGlvbihlbGVtZW50LHJlcGxhY2VOb2RlKXt2YXIgaW5kZXgscGFyZW50PWVsZW1lbnQucGFyZW50Tm9kZTtqcUxpdGVEZWFsb2MoZWxlbWVudCk7Zm9yRWFjaChuZXcgSlFMaXRlKHJlcGxhY2VOb2RlKSxmdW5jdGlvbihub2RlKXtpZihpbmRleCl7cGFyZW50Lmluc2VydEJlZm9yZShub2RlLGluZGV4Lm5leHRTaWJsaW5nKTt9ZWxzZXtwYXJlbnQucmVwbGFjZUNoaWxkKG5vZGUsZWxlbWVudCk7fQppbmRleD1ub2RlO30pO30sY2hpbGRyZW46ZnVuY3Rpb24oZWxlbWVudCl7dmFyIGNoaWxkcmVuPVtdO2ZvckVhY2goZWxlbWVudC5jaGlsZE5vZGVzLGZ1bmN0aW9uKGVsZW1lbnQpe2lmKGVsZW1lbnQubm9kZVR5cGU9PT0xKQpjaGlsZHJlbi5wdXNoKGVsZW1lbnQpO30pO3JldHVybiBjaGlsZHJlbjt9LGNvbnRlbnRzOmZ1bmN0aW9uKGVsZW1lbnQpe3JldHVybiBlbGVtZW50LmNvbnRlbnREb2N1bWVudHx8ZWxlbWVudC5jaGlsZE5vZGVzfHxbXTt9LGFwcGVuZDpmdW5jdGlvbihlbGVtZW50LG5vZGUpe2ZvckVhY2gobmV3IEpRTGl0ZShub2RlKSxmdW5jdGlvbihjaGlsZCl7aWYoZWxlbWVudC5ub2RlVHlwZT09PTF8fGVsZW1lbnQubm9kZVR5cGU9PT0xMSl7ZWxlbWVudC5hcHBlbmRDaGlsZChjaGlsZCk7fX0pO30scHJlcGVuZDpmdW5jdGlvbihlbGVtZW50LG5vZGUpe2lmKGVsZW1lbnQubm9kZVR5cGU9PT0xKXt2YXIgaW5kZXg9ZWxlbWVudC5maXJzdENoaWxkO2ZvckVhY2gobmV3IEpRTGl0ZShub2RlKSxmdW5jdGlvbihjaGlsZCl7ZWxlbWVudC5pbnNlcnRCZWZvcmUoY2hpbGQsaW5kZXgpO30pO319LHdyYXA6ZnVuY3Rpb24oZWxlbWVudCx3cmFwTm9kZSl7d3JhcE5vZGU9anFMaXRlKHdyYXBOb2RlKVswXTt2YXIgcGFyZW50PWVsZW1lbnQucGFyZW50Tm9kZTtpZihwYXJlbnQpe3BhcmVudC5yZXBsYWNlQ2hpbGQod3JhcE5vZGUsZWxlbWVudCk7fQp3cmFwTm9kZS5hcHBlbmRDaGlsZChlbGVtZW50KTt9LHJlbW92ZTpmdW5jdGlvbihlbGVtZW50KXtqcUxpdGVEZWFsb2MoZWxlbWVudCk7dmFyIHBhcmVudD1lbGVtZW50LnBhcmVudE5vZGU7aWYocGFyZW50KXBhcmVudC5yZW1vdmVDaGlsZChlbGVtZW50KTt9LGFmdGVyOmZ1bmN0aW9uKGVsZW1lbnQsbmV3RWxlbWVudCl7dmFyIGluZGV4PWVsZW1lbnQscGFyZW50PWVsZW1lbnQucGFyZW50Tm9kZTtmb3JFYWNoKG5ldyBKUUxpdGUobmV3RWxlbWVudCksZnVuY3Rpb24obm9kZSl7cGFyZW50Lmluc2VydEJlZm9yZShub2RlLGluZGV4Lm5leHRTaWJsaW5nKTtpbmRleD1ub2RlO30pO30sYWRkQ2xhc3M6anFMaXRlQWRkQ2xhc3MscmVtb3ZlQ2xhc3M6anFMaXRlUmVtb3ZlQ2xhc3MsdG9nZ2xlQ2xhc3M6ZnVuY3Rpb24oZWxlbWVudCxzZWxlY3Rvcixjb25kaXRpb24pe2lmKHNlbGVjdG9yKXtmb3JFYWNoKHNlbGVjdG9yLnNwbGl0KCcgJyksZnVuY3Rpb24oY2xhc3NOYW1lKXt2YXIgY2xhc3NDb25kaXRpb249Y29uZGl0aW9uO2lmKGlzVW5kZWZpbmVkKGNsYXNzQ29uZGl0aW9uKSl7Y2xhc3NDb25kaXRpb249IWpxTGl0ZUhhc0NsYXNzKGVsZW1lbnQsY2xhc3NOYW1lKTt9CihjbGFzc0NvbmRpdGlvbj9qcUxpdGVBZGRDbGFzczpqcUxpdGVSZW1vdmVDbGFzcykoZWxlbWVudCxjbGFzc05hbWUpO30pO319LHBhcmVudDpmdW5jdGlvbihlbGVtZW50KXt2YXIgcGFyZW50PWVsZW1lbnQucGFyZW50Tm9kZTtyZXR1cm4gcGFyZW50JiZwYXJlbnQubm9kZVR5cGUhPT0xMT9wYXJlbnQ6bnVsbDt9LG5leHQ6ZnVuY3Rpb24oZWxlbWVudCl7aWYoZWxlbWVudC5uZXh0RWxlbWVudFNpYmxpbmcpe3JldHVybiBlbGVtZW50Lm5leHRFbGVtZW50U2libGluZzt9CnZhciBlbG09ZWxlbWVudC5uZXh0U2libGluZzt3aGlsZShlbG0hPW51bGwmJmVsbS5ub2RlVHlwZSE9PTEpe2VsbT1lbG0ubmV4dFNpYmxpbmc7fQpyZXR1cm4gZWxtO30sZmluZDpmdW5jdGlvbihlbGVtZW50LHNlbGVjdG9yKXtpZihlbGVtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKXtyZXR1cm4gZWxlbWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShzZWxlY3Rvcik7fWVsc2V7cmV0dXJuW107fX0sY2xvbmU6anFMaXRlQ2xvbmUsdHJpZ2dlckhhbmRsZXI6ZnVuY3Rpb24oZWxlbWVudCxldmVudE5hbWUsZXZlbnREYXRhKXt2YXIgZXZlbnRGbnM9KGpxTGl0ZUV4cGFuZG9TdG9yZShlbGVtZW50LCdldmVudHMnKXx8e30pW2V2ZW50TmFtZV07ZXZlbnREYXRhPWV2ZW50RGF0YXx8W107dmFyIGV2ZW50PVt7cHJldmVudERlZmF1bHQ6bm9vcCxzdG9wUHJvcGFnYXRpb246bm9vcH1dO2ZvckVhY2goZXZlbnRGbnMsZnVuY3Rpb24oZm4pe2ZuLmFwcGx5KGVsZW1lbnQsZXZlbnQuY29uY2F0KGV2ZW50RGF0YSkpO30pO319LGZ1bmN0aW9uKGZuLG5hbWUpe0pRTGl0ZS5wcm90b3R5cGVbbmFtZV09ZnVuY3Rpb24oYXJnMSxhcmcyLGFyZzMpe3ZhciB2YWx1ZTtmb3IodmFyIGk9MDtpPHRoaXMubGVuZ3RoO2krKyl7aWYoaXNVbmRlZmluZWQodmFsdWUpKXt2YWx1ZT1mbih0aGlzW2ldLGFyZzEsYXJnMixhcmczKTtpZihpc0RlZmluZWQodmFsdWUpKXt2YWx1ZT1qcUxpdGUodmFsdWUpO319ZWxzZXtqcUxpdGVBZGROb2Rlcyh2YWx1ZSxmbih0aGlzW2ldLGFyZzEsYXJnMixhcmczKSk7fX0KcmV0dXJuIGlzRGVmaW5lZCh2YWx1ZSk/dmFsdWU6dGhpczt9O0pRTGl0ZS5wcm90b3R5cGUuYmluZD1KUUxpdGUucHJvdG90eXBlLm9uO0pRTGl0ZS5wcm90b3R5cGUudW5iaW5kPUpRTGl0ZS5wcm90b3R5cGUub2ZmO30pO2Z1bmN0aW9uIGhhc2hLZXkob2JqLG5leHRVaWRGbil7dmFyIG9ialR5cGU9dHlwZW9mIG9iaixrZXk7aWYob2JqVHlwZT09J2Z1bmN0aW9uJ3x8KG9ialR5cGU9PSdvYmplY3QnJiZvYmohPT1udWxsKSl7aWYodHlwZW9mKGtleT1vYmouJCRoYXNoS2V5KT09J2Z1bmN0aW9uJyl7a2V5PW9iai4kJGhhc2hLZXkoKTt9ZWxzZSBpZihrZXk9PT11bmRlZmluZWQpe2tleT1vYmouJCRoYXNoS2V5PShuZXh0VWlkRm58fG5leHRVaWQpKCk7fX1lbHNle2tleT1vYmo7fQpyZXR1cm4gb2JqVHlwZSsnOicra2V5O30KZnVuY3Rpb24gSGFzaE1hcChhcnJheSxpc29sYXRlZFVpZCl7aWYoaXNvbGF0ZWRVaWQpe3ZhciB1aWQ9MDt0aGlzLm5leHRVaWQ9ZnVuY3Rpb24oKXtyZXR1cm4rK3VpZDt9O30KZm9yRWFjaChhcnJheSx0aGlzLnB1dCx0aGlzKTt9Ckhhc2hNYXAucHJvdG90eXBlPXtwdXQ6ZnVuY3Rpb24oa2V5LHZhbHVlKXt0aGlzW2hhc2hLZXkoa2V5LHRoaXMubmV4dFVpZCldPXZhbHVlO30sZ2V0OmZ1bmN0aW9uKGtleSl7cmV0dXJuIHRoaXNbaGFzaEtleShrZXksdGhpcy5uZXh0VWlkKV07fSxyZW1vdmU6ZnVuY3Rpb24oa2V5KXt2YXIgdmFsdWU9dGhpc1trZXk9aGFzaEtleShrZXksdGhpcy5uZXh0VWlkKV07ZGVsZXRlIHRoaXNba2V5XTtyZXR1cm4gdmFsdWU7fX07dmFyIEZOX0FSR1M9L15mdW5jdGlvblxzKlteXChdKlwoXHMqKFteXCldKilcKS9tO3ZhciBGTl9BUkdfU1BMSVQ9LywvO3ZhciBGTl9BUkc9L15ccyooXz8pKFxTKz8pXDFccyokLzt2YXIgU1RSSVBfQ09NTUVOVFM9LygoXC9cLy4qJCl8KFwvXCpbXHNcU10qP1wqXC8pKS9tZzt2YXIgJGluamVjdG9yTWluRXJyPW1pbkVycignJGluamVjdG9yJyk7ZnVuY3Rpb24gYW5ub3RhdGUoZm4pe3ZhciAkaW5qZWN0LGZuVGV4dCxhcmdEZWNsLGxhc3Q7aWYodHlwZW9mIGZuPT09J2Z1bmN0aW9uJyl7aWYoISgkaW5qZWN0PWZuLiRpbmplY3QpKXskaW5qZWN0PVtdO2lmKGZuLmxlbmd0aCl7Zm5UZXh0PWZuLnRvU3RyaW5nKCkucmVwbGFjZShTVFJJUF9DT01NRU5UUywnJyk7YXJnRGVjbD1mblRleHQubWF0Y2goRk5fQVJHUyk7Zm9yRWFjaChhcmdEZWNsWzFdLnNwbGl0KEZOX0FSR19TUExJVCksZnVuY3Rpb24oYXJnKXthcmcucmVwbGFjZShGTl9BUkcsZnVuY3Rpb24oYWxsLHVuZGVyc2NvcmUsbmFtZSl7JGluamVjdC5wdXNoKG5hbWUpO30pO30pO30KZm4uJGluamVjdD0kaW5qZWN0O319ZWxzZSBpZihpc0FycmF5KGZuKSl7bGFzdD1mbi5sZW5ndGgtMTthc3NlcnRBcmdGbihmbltsYXN0XSwnZm4nKTskaW5qZWN0PWZuLnNsaWNlKDAsbGFzdCk7fWVsc2V7YXNzZXJ0QXJnRm4oZm4sJ2ZuJyx0cnVlKTt9CnJldHVybiAkaW5qZWN0O30KZnVuY3Rpb24gY3JlYXRlSW5qZWN0b3IobW9kdWxlc1RvTG9hZCl7dmFyIElOU1RBTlRJQVRJTkc9e30scHJvdmlkZXJTdWZmaXg9J1Byb3ZpZGVyJyxwYXRoPVtdLGxvYWRlZE1vZHVsZXM9bmV3IEhhc2hNYXAoW10sdHJ1ZSkscHJvdmlkZXJDYWNoZT17JHByb3ZpZGU6e3Byb3ZpZGVyOnN1cHBvcnRPYmplY3QocHJvdmlkZXIpLGZhY3Rvcnk6c3VwcG9ydE9iamVjdChmYWN0b3J5KSxzZXJ2aWNlOnN1cHBvcnRPYmplY3Qoc2VydmljZSksdmFsdWU6c3VwcG9ydE9iamVjdCh2YWx1ZSksY29uc3RhbnQ6c3VwcG9ydE9iamVjdChjb25zdGFudCksZGVjb3JhdG9yOmRlY29yYXRvcn19LHByb3ZpZGVySW5qZWN0b3I9KHByb3ZpZGVyQ2FjaGUuJGluamVjdG9yPWNyZWF0ZUludGVybmFsSW5qZWN0b3IocHJvdmlkZXJDYWNoZSxmdW5jdGlvbigpe3Rocm93ICRpbmplY3Rvck1pbkVycigndW5wcicsIlVua25vd24gcHJvdmlkZXI6IHswfSIscGF0aC5qb2luKCcgPC0gJykpO30pKSxpbnN0YW5jZUNhY2hlPXt9LGluc3RhbmNlSW5qZWN0b3I9KGluc3RhbmNlQ2FjaGUuJGluamVjdG9yPWNyZWF0ZUludGVybmFsSW5qZWN0b3IoaW5zdGFuY2VDYWNoZSxmdW5jdGlvbihzZXJ2aWNlbmFtZSl7dmFyIHByb3ZpZGVyPXByb3ZpZGVySW5qZWN0b3IuZ2V0KHNlcnZpY2VuYW1lK3Byb3ZpZGVyU3VmZml4KTtyZXR1cm4gaW5zdGFuY2VJbmplY3Rvci5pbnZva2UocHJvdmlkZXIuJGdldCxwcm92aWRlcik7fSkpO2ZvckVhY2gobG9hZE1vZHVsZXMobW9kdWxlc1RvTG9hZCksZnVuY3Rpb24oZm4pe2luc3RhbmNlSW5qZWN0b3IuaW52b2tlKGZufHxub29wKTt9KTtyZXR1cm4gaW5zdGFuY2VJbmplY3RvcjtmdW5jdGlvbiBzdXBwb3J0T2JqZWN0KGRlbGVnYXRlKXtyZXR1cm4gZnVuY3Rpb24oa2V5LHZhbHVlKXtpZihpc09iamVjdChrZXkpKXtmb3JFYWNoKGtleSxyZXZlcnNlUGFyYW1zKGRlbGVnYXRlKSk7fWVsc2V7cmV0dXJuIGRlbGVnYXRlKGtleSx2YWx1ZSk7fX07fQpmdW5jdGlvbiBwcm92aWRlcihuYW1lLHByb3ZpZGVyXyl7YXNzZXJ0Tm90SGFzT3duUHJvcGVydHkobmFtZSwnc2VydmljZScpO2lmKGlzRnVuY3Rpb24ocHJvdmlkZXJfKXx8aXNBcnJheShwcm92aWRlcl8pKXtwcm92aWRlcl89cHJvdmlkZXJJbmplY3Rvci5pbnN0YW50aWF0ZShwcm92aWRlcl8pO30KaWYoIXByb3ZpZGVyXy4kZ2V0KXt0aHJvdyAkaW5qZWN0b3JNaW5FcnIoJ3BnZXQnLCJQcm92aWRlciAnezB9JyBtdXN0IGRlZmluZSAkZ2V0IGZhY3RvcnkgbWV0aG9kLiIsbmFtZSk7fQpyZXR1cm4gcHJvdmlkZXJDYWNoZVtuYW1lK3Byb3ZpZGVyU3VmZml4XT1wcm92aWRlcl87fQpmdW5jdGlvbiBmYWN0b3J5KG5hbWUsZmFjdG9yeUZuKXtyZXR1cm4gcHJvdmlkZXIobmFtZSx7JGdldDpmYWN0b3J5Rm59KTt9CmZ1bmN0aW9uIHNlcnZpY2UobmFtZSxjb25zdHJ1Y3Rvcil7cmV0dXJuIGZhY3RvcnkobmFtZSxbJyRpbmplY3RvcicsZnVuY3Rpb24oJGluamVjdG9yKXtyZXR1cm4gJGluamVjdG9yLmluc3RhbnRpYXRlKGNvbnN0cnVjdG9yKTt9XSk7fQpmdW5jdGlvbiB2YWx1ZShuYW1lLHZhbCl7cmV0dXJuIGZhY3RvcnkobmFtZSx2YWx1ZUZuKHZhbCkpO30KZnVuY3Rpb24gY29uc3RhbnQobmFtZSx2YWx1ZSl7YXNzZXJ0Tm90SGFzT3duUHJvcGVydHkobmFtZSwnY29uc3RhbnQnKTtwcm92aWRlckNhY2hlW25hbWVdPXZhbHVlO2luc3RhbmNlQ2FjaGVbbmFtZV09dmFsdWU7fQpmdW5jdGlvbiBkZWNvcmF0b3Ioc2VydmljZU5hbWUsZGVjb3JGbil7dmFyIG9yaWdQcm92aWRlcj1wcm92aWRlckluamVjdG9yLmdldChzZXJ2aWNlTmFtZStwcm92aWRlclN1ZmZpeCksb3JpZyRnZXQ9b3JpZ1Byb3ZpZGVyLiRnZXQ7b3JpZ1Byb3ZpZGVyLiRnZXQ9ZnVuY3Rpb24oKXt2YXIgb3JpZ0luc3RhbmNlPWluc3RhbmNlSW5qZWN0b3IuaW52b2tlKG9yaWckZ2V0LG9yaWdQcm92aWRlcik7cmV0dXJuIGluc3RhbmNlSW5qZWN0b3IuaW52b2tlKGRlY29yRm4sbnVsbCx7JGRlbGVnYXRlOm9yaWdJbnN0YW5jZX0pO307fQpmdW5jdGlvbiBsb2FkTW9kdWxlcyhtb2R1bGVzVG9Mb2FkKXt2YXIgcnVuQmxvY2tzPVtdLG1vZHVsZUZuLGludm9rZVF1ZXVlLGksaWk7Zm9yRWFjaChtb2R1bGVzVG9Mb2FkLGZ1bmN0aW9uKG1vZHVsZSl7aWYobG9hZGVkTW9kdWxlcy5nZXQobW9kdWxlKSlyZXR1cm47bG9hZGVkTW9kdWxlcy5wdXQobW9kdWxlLHRydWUpO3RyeXtpZihpc1N0cmluZyhtb2R1bGUpKXttb2R1bGVGbj1hbmd1bGFyTW9kdWxlKG1vZHVsZSk7cnVuQmxvY2tzPXJ1bkJsb2Nrcy5jb25jYXQobG9hZE1vZHVsZXMobW9kdWxlRm4ucmVxdWlyZXMpKS5jb25jYXQobW9kdWxlRm4uX3J1bkJsb2Nrcyk7Zm9yKGludm9rZVF1ZXVlPW1vZHVsZUZuLl9pbnZva2VRdWV1ZSxpPTAsaWk9aW52b2tlUXVldWUubGVuZ3RoO2k8aWk7aSsrKXt2YXIgaW52b2tlQXJncz1pbnZva2VRdWV1ZVtpXSxwcm92aWRlcj1wcm92aWRlckluamVjdG9yLmdldChpbnZva2VBcmdzWzBdKTtwcm92aWRlcltpbnZva2VBcmdzWzFdXS5hcHBseShwcm92aWRlcixpbnZva2VBcmdzWzJdKTt9fWVsc2UgaWYoaXNGdW5jdGlvbihtb2R1bGUpKXtydW5CbG9ja3MucHVzaChwcm92aWRlckluamVjdG9yLmludm9rZShtb2R1bGUpKTt9ZWxzZSBpZihpc0FycmF5KG1vZHVsZSkpe3J1bkJsb2Nrcy5wdXNoKHByb3ZpZGVySW5qZWN0b3IuaW52b2tlKG1vZHVsZSkpO31lbHNle2Fzc2VydEFyZ0ZuKG1vZHVsZSwnbW9kdWxlJyk7fX1jYXRjaChlKXtpZihpc0FycmF5KG1vZHVsZSkpe21vZHVsZT1tb2R1bGVbbW9kdWxlLmxlbmd0aC0xXTt9CmlmKGUubWVzc2FnZSYmZS5zdGFjayYmZS5zdGFjay5pbmRleE9mKGUubWVzc2FnZSk9PS0xKXtlPWUubWVzc2FnZSsnXG4nK2Uuc3RhY2s7fQp0aHJvdyAkaW5qZWN0b3JNaW5FcnIoJ21vZHVsZXJyJywiRmFpbGVkIHRvIGluc3RhbnRpYXRlIG1vZHVsZSB7MH0gZHVlIHRvOlxuezF9Iixtb2R1bGUsZS5zdGFja3x8ZS5tZXNzYWdlfHxlKTt9fSk7cmV0dXJuIHJ1bkJsb2Nrczt9CmZ1bmN0aW9uIGNyZWF0ZUludGVybmFsSW5qZWN0b3IoY2FjaGUsZmFjdG9yeSl7ZnVuY3Rpb24gZ2V0U2VydmljZShzZXJ2aWNlTmFtZSl7aWYoY2FjaGUuaGFzT3duUHJvcGVydHkoc2VydmljZU5hbWUpKXtpZihjYWNoZVtzZXJ2aWNlTmFtZV09PT1JTlNUQU5USUFUSU5HKXt0aHJvdyAkaW5qZWN0b3JNaW5FcnIoJ2NkZXAnLCdDaXJjdWxhciBkZXBlbmRlbmN5IGZvdW5kOiB7MH0nLHNlcnZpY2VOYW1lKycgPC0gJytwYXRoLmpvaW4oJyA8LSAnKSk7fQpyZXR1cm4gY2FjaGVbc2VydmljZU5hbWVdO31lbHNle3RyeXtwYXRoLnVuc2hpZnQoc2VydmljZU5hbWUpO2NhY2hlW3NlcnZpY2VOYW1lXT1JTlNUQU5USUFUSU5HO3JldHVybiBjYWNoZVtzZXJ2aWNlTmFtZV09ZmFjdG9yeShzZXJ2aWNlTmFtZSk7fWNhdGNoKGVycil7aWYoY2FjaGVbc2VydmljZU5hbWVdPT09SU5TVEFOVElBVElORyl7ZGVsZXRlIGNhY2hlW3NlcnZpY2VOYW1lXTt9CnRocm93IGVycjt9ZmluYWxseXtwYXRoLnNoaWZ0KCk7fX19CmZ1bmN0aW9uIGludm9rZShmbixzZWxmLGxvY2Fscyl7dmFyIGFyZ3M9W10sJGluamVjdD1hbm5vdGF0ZShmbiksbGVuZ3RoLGksa2V5O2ZvcihpPTAsbGVuZ3RoPSRpbmplY3QubGVuZ3RoO2k8bGVuZ3RoO2krKyl7a2V5PSRpbmplY3RbaV07aWYodHlwZW9mIGtleSE9PSdzdHJpbmcnKXt0aHJvdyAkaW5qZWN0b3JNaW5FcnIoJ2l0a24nLCdJbmNvcnJlY3QgaW5qZWN0aW9uIHRva2VuISBFeHBlY3RlZCBzZXJ2aWNlIG5hbWUgYXMgc3RyaW5nLCBnb3QgezB9JyxrZXkpO30KYXJncy5wdXNoKGxvY2FscyYmbG9jYWxzLmhhc093blByb3BlcnR5KGtleSk/bG9jYWxzW2tleV06Z2V0U2VydmljZShrZXkpKTt9CmlmKGlzQXJyYXkoZm4pKXtmbj1mbltsZW5ndGhdO30KcmV0dXJuIGZuLmFwcGx5KHNlbGYsYXJncyk7fQpmdW5jdGlvbiBpbnN0YW50aWF0ZShUeXBlLGxvY2Fscyl7dmFyIENvbnN0cnVjdG9yPWZ1bmN0aW9uKCl7fSxpbnN0YW5jZSxyZXR1cm5lZFZhbHVlO0NvbnN0cnVjdG9yLnByb3RvdHlwZT0oaXNBcnJheShUeXBlKT9UeXBlW1R5cGUubGVuZ3RoLTFdOlR5cGUpLnByb3RvdHlwZTtpbnN0YW5jZT1uZXcgQ29uc3RydWN0b3IoKTtyZXR1cm5lZFZhbHVlPWludm9rZShUeXBlLGluc3RhbmNlLGxvY2Fscyk7cmV0dXJuIGlzT2JqZWN0KHJldHVybmVkVmFsdWUpfHxpc0Z1bmN0aW9uKHJldHVybmVkVmFsdWUpP3JldHVybmVkVmFsdWU6aW5zdGFuY2U7fQpyZXR1cm57aW52b2tlOmludm9rZSxpbnN0YW50aWF0ZTppbnN0YW50aWF0ZSxnZXQ6Z2V0U2VydmljZSxhbm5vdGF0ZTphbm5vdGF0ZSxoYXM6ZnVuY3Rpb24obmFtZSl7cmV0dXJuIHByb3ZpZGVyQ2FjaGUuaGFzT3duUHJvcGVydHkobmFtZStwcm92aWRlclN1ZmZpeCl8fGNhY2hlLmhhc093blByb3BlcnR5KG5hbWUpO319O319CmZ1bmN0aW9uICRBbmNob3JTY3JvbGxQcm92aWRlcigpe3ZhciBhdXRvU2Nyb2xsaW5nRW5hYmxlZD10cnVlO3RoaXMuZGlzYWJsZUF1dG9TY3JvbGxpbmc9ZnVuY3Rpb24oKXthdXRvU2Nyb2xsaW5nRW5hYmxlZD1mYWxzZTt9O3RoaXMuJGdldD1bJyR3aW5kb3cnLCckbG9jYXRpb24nLCckcm9vdFNjb3BlJyxmdW5jdGlvbigkd2luZG93LCRsb2NhdGlvbiwkcm9vdFNjb3BlKXt2YXIgZG9jdW1lbnQ9JHdpbmRvdy5kb2N1bWVudDtmdW5jdGlvbiBnZXRGaXJzdEFuY2hvcihsaXN0KXt2YXIgcmVzdWx0PW51bGw7Zm9yRWFjaChsaXN0LGZ1bmN0aW9uKGVsZW1lbnQpe2lmKCFyZXN1bHQmJmxvd2VyY2FzZShlbGVtZW50Lm5vZGVOYW1lKT09PSdhJylyZXN1bHQ9ZWxlbWVudDt9KTtyZXR1cm4gcmVzdWx0O30KZnVuY3Rpb24gc2Nyb2xsKCl7dmFyIGhhc2g9JGxvY2F0aW9uLmhhc2goKSxlbG07aWYoIWhhc2gpJHdpbmRvdy5zY3JvbGxUbygwLDApO2Vsc2UgaWYoKGVsbT1kb2N1bWVudC5nZXRFbGVtZW50QnlJZChoYXNoKSkpZWxtLnNjcm9sbEludG9WaWV3KCk7ZWxzZSBpZigoZWxtPWdldEZpcnN0QW5jaG9yKGRvY3VtZW50LmdldEVsZW1lbnRzQnlOYW1lKGhhc2gpKSkpZWxtLnNjcm9sbEludG9WaWV3KCk7ZWxzZSBpZihoYXNoPT09J3RvcCcpJHdpbmRvdy5zY3JvbGxUbygwLDApO30KaWYoYXV0b1Njcm9sbGluZ0VuYWJsZWQpeyRyb290U2NvcGUuJHdhdGNoKGZ1bmN0aW9uIGF1dG9TY3JvbGxXYXRjaCgpe3JldHVybiAkbG9jYXRpb24uaGFzaCgpO30sZnVuY3Rpb24gYXV0b1Njcm9sbFdhdGNoQWN0aW9uKCl7JHJvb3RTY29wZS4kZXZhbEFzeW5jKHNjcm9sbCk7fSk7fQpyZXR1cm4gc2Nyb2xsO31dO30KdmFyICRhbmltYXRlTWluRXJyPW1pbkVycignJGFuaW1hdGUnKTt2YXIgJEFuaW1hdGVQcm92aWRlcj1bJyRwcm92aWRlJyxmdW5jdGlvbigkcHJvdmlkZSl7dGhpcy4kJHNlbGVjdG9ycz17fTt0aGlzLnJlZ2lzdGVyPWZ1bmN0aW9uKG5hbWUsZmFjdG9yeSl7dmFyIGtleT1uYW1lKyctYW5pbWF0aW9uJztpZihuYW1lJiZuYW1lLmNoYXJBdCgwKSE9Jy4nKXRocm93ICRhbmltYXRlTWluRXJyKCdub3Rjc2VsJywiRXhwZWN0aW5nIGNsYXNzIHNlbGVjdG9yIHN0YXJ0aW5nIHdpdGggJy4nIGdvdCAnezB9Jy4iLG5hbWUpO3RoaXMuJCRzZWxlY3RvcnNbbmFtZS5zdWJzdHIoMSldPWtleTskcHJvdmlkZS5mYWN0b3J5KGtleSxmYWN0b3J5KTt9O3RoaXMuY2xhc3NOYW1lRmlsdGVyPWZ1bmN0aW9uKGV4cHJlc3Npb24pe2lmKGFyZ3VtZW50cy5sZW5ndGg9PT0xKXt0aGlzLiQkY2xhc3NOYW1lRmlsdGVyPShleHByZXNzaW9uIGluc3RhbmNlb2YgUmVnRXhwKT9leHByZXNzaW9uOm51bGw7fQpyZXR1cm4gdGhpcy4kJGNsYXNzTmFtZUZpbHRlcjt9O3RoaXMuJGdldD1bJyR0aW1lb3V0JywnJCRhc3luY0NhbGxiYWNrJyxmdW5jdGlvbigkdGltZW91dCwkJGFzeW5jQ2FsbGJhY2spe2Z1bmN0aW9uIGFzeW5jKGZuKXtmbiYmJCRhc3luY0NhbGxiYWNrKGZuKTt9CnJldHVybntlbnRlcjpmdW5jdGlvbihlbGVtZW50LHBhcmVudCxhZnRlcixkb25lKXtpZihhZnRlcil7YWZ0ZXIuYWZ0ZXIoZWxlbWVudCk7fWVsc2V7aWYoIXBhcmVudHx8IXBhcmVudFswXSl7cGFyZW50PWFmdGVyLnBhcmVudCgpO30KcGFyZW50LmFwcGVuZChlbGVtZW50KTt9CmFzeW5jKGRvbmUpO30sbGVhdmU6ZnVuY3Rpb24oZWxlbWVudCxkb25lKXtlbGVtZW50LnJlbW92ZSgpO2FzeW5jKGRvbmUpO30sbW92ZTpmdW5jdGlvbihlbGVtZW50LHBhcmVudCxhZnRlcixkb25lKXt0aGlzLmVudGVyKGVsZW1lbnQscGFyZW50LGFmdGVyLGRvbmUpO30sYWRkQ2xhc3M6ZnVuY3Rpb24oZWxlbWVudCxjbGFzc05hbWUsZG9uZSl7Y2xhc3NOYW1lPWlzU3RyaW5nKGNsYXNzTmFtZSk/Y2xhc3NOYW1lOmlzQXJyYXkoY2xhc3NOYW1lKT9jbGFzc05hbWUuam9pbignICcpOicnO2ZvckVhY2goZWxlbWVudCxmdW5jdGlvbihlbGVtZW50KXtqcUxpdGVBZGRDbGFzcyhlbGVtZW50LGNsYXNzTmFtZSk7fSk7YXN5bmMoZG9uZSk7fSxyZW1vdmVDbGFzczpmdW5jdGlvbihlbGVtZW50LGNsYXNzTmFtZSxkb25lKXtjbGFzc05hbWU9aXNTdHJpbmcoY2xhc3NOYW1lKT9jbGFzc05hbWU6aXNBcnJheShjbGFzc05hbWUpP2NsYXNzTmFtZS5qb2luKCcgJyk6Jyc7Zm9yRWFjaChlbGVtZW50LGZ1bmN0aW9uKGVsZW1lbnQpe2pxTGl0ZVJlbW92ZUNsYXNzKGVsZW1lbnQsY2xhc3NOYW1lKTt9KTthc3luYyhkb25lKTt9LHNldENsYXNzOmZ1bmN0aW9uKGVsZW1lbnQsYWRkLHJlbW92ZSxkb25lKXtmb3JFYWNoKGVsZW1lbnQsZnVuY3Rpb24oZWxlbWVudCl7anFMaXRlQWRkQ2xhc3MoZWxlbWVudCxhZGQpO2pxTGl0ZVJlbW92ZUNsYXNzKGVsZW1lbnQscmVtb3ZlKTt9KTthc3luYyhkb25lKTt9LGVuYWJsZWQ6bm9vcH07fV07fV07ZnVuY3Rpb24gJCRBc3luY0NhbGxiYWNrUHJvdmlkZXIoKXt0aGlzLiRnZXQ9WyckJHJBRicsJyR0aW1lb3V0JyxmdW5jdGlvbigkJHJBRiwkdGltZW91dCl7cmV0dXJuICQkckFGLnN1cHBvcnRlZD9mdW5jdGlvbihmbil7cmV0dXJuICQkckFGKGZuKTt9OmZ1bmN0aW9uKGZuKXtyZXR1cm4gJHRpbWVvdXQoZm4sMCxmYWxzZSk7fTt9XTt9CmZ1bmN0aW9uIEJyb3dzZXIod2luZG93LGRvY3VtZW50LCRsb2csJHNuaWZmZXIpe3ZhciBzZWxmPXRoaXMscmF3RG9jdW1lbnQ9ZG9jdW1lbnRbMF0sbG9jYXRpb249d2luZG93LmxvY2F0aW9uLGhpc3Rvcnk9d2luZG93Lmhpc3Rvcnksc2V0VGltZW91dD13aW5kb3cuc2V0VGltZW91dCxjbGVhclRpbWVvdXQ9d2luZG93LmNsZWFyVGltZW91dCxwZW5kaW5nRGVmZXJJZHM9e307c2VsZi5pc01vY2s9ZmFsc2U7dmFyIG91dHN0YW5kaW5nUmVxdWVzdENvdW50PTA7dmFyIG91dHN0YW5kaW5nUmVxdWVzdENhbGxiYWNrcz1bXTtzZWxmLiQkY29tcGxldGVPdXRzdGFuZGluZ1JlcXVlc3Q9Y29tcGxldGVPdXRzdGFuZGluZ1JlcXVlc3Q7c2VsZi4kJGluY091dHN0YW5kaW5nUmVxdWVzdENvdW50PWZ1bmN0aW9uKCl7b3V0c3RhbmRpbmdSZXF1ZXN0Q291bnQrKzt9O2Z1bmN0aW9uIGNvbXBsZXRlT3V0c3RhbmRpbmdSZXF1ZXN0KGZuKXt0cnl7Zm4uYXBwbHkobnVsbCxzbGljZUFyZ3MoYXJndW1lbnRzLDEpKTt9ZmluYWxseXtvdXRzdGFuZGluZ1JlcXVlc3RDb3VudC0tO2lmKG91dHN0YW5kaW5nUmVxdWVzdENvdW50PT09MCl7d2hpbGUob3V0c3RhbmRpbmdSZXF1ZXN0Q2FsbGJhY2tzLmxlbmd0aCl7dHJ5e291dHN0YW5kaW5nUmVxdWVzdENhbGxiYWNrcy5wb3AoKSgpO31jYXRjaChlKXskbG9nLmVycm9yKGUpO319fX19CnNlbGYubm90aWZ5V2hlbk5vT3V0c3RhbmRpbmdSZXF1ZXN0cz1mdW5jdGlvbihjYWxsYmFjayl7Zm9yRWFjaChwb2xsRm5zLGZ1bmN0aW9uKHBvbGxGbil7cG9sbEZuKCk7fSk7aWYob3V0c3RhbmRpbmdSZXF1ZXN0Q291bnQ9PT0wKXtjYWxsYmFjaygpO31lbHNle291dHN0YW5kaW5nUmVxdWVzdENhbGxiYWNrcy5wdXNoKGNhbGxiYWNrKTt9fTt2YXIgcG9sbEZucz1bXSxwb2xsVGltZW91dDtzZWxmLmFkZFBvbGxGbj1mdW5jdGlvbihmbil7aWYoaXNVbmRlZmluZWQocG9sbFRpbWVvdXQpKXN0YXJ0UG9sbGVyKDEwMCxzZXRUaW1lb3V0KTtwb2xsRm5zLnB1c2goZm4pO3JldHVybiBmbjt9O2Z1bmN0aW9uIHN0YXJ0UG9sbGVyKGludGVydmFsLHNldFRpbWVvdXQpeyhmdW5jdGlvbiBjaGVjaygpe2ZvckVhY2gocG9sbEZucyxmdW5jdGlvbihwb2xsRm4pe3BvbGxGbigpO30pO3BvbGxUaW1lb3V0PXNldFRpbWVvdXQoY2hlY2ssaW50ZXJ2YWwpO30pKCk7fQp2YXIgbGFzdEJyb3dzZXJVcmw9bG9jYXRpb24uaHJlZixiYXNlRWxlbWVudD1kb2N1bWVudC5maW5kKCdiYXNlJyksbmV3TG9jYXRpb249bnVsbDtzZWxmLnVybD1mdW5jdGlvbih1cmwscmVwbGFjZSl7aWYobG9jYXRpb24hPT13aW5kb3cubG9jYXRpb24pbG9jYXRpb249d2luZG93LmxvY2F0aW9uO2lmKGhpc3RvcnkhPT13aW5kb3cuaGlzdG9yeSloaXN0b3J5PXdpbmRvdy5oaXN0b3J5O2lmKHVybCl7aWYobGFzdEJyb3dzZXJVcmw9PXVybClyZXR1cm47bGFzdEJyb3dzZXJVcmw9dXJsO2lmKCRzbmlmZmVyLmhpc3Rvcnkpe2lmKHJlcGxhY2UpaGlzdG9yeS5yZXBsYWNlU3RhdGUobnVsbCwnJyx1cmwpO2Vsc2V7aGlzdG9yeS5wdXNoU3RhdGUobnVsbCwnJyx1cmwpO2Jhc2VFbGVtZW50LmF0dHIoJ2hyZWYnLGJhc2VFbGVtZW50LmF0dHIoJ2hyZWYnKSk7fX1lbHNle25ld0xvY2F0aW9uPXVybDtpZihyZXBsYWNlKXtsb2NhdGlvbi5yZXBsYWNlKHVybCk7fWVsc2V7bG9jYXRpb24uaHJlZj11cmw7fX0KcmV0dXJuIHNlbGY7fWVsc2V7cmV0dXJuIG5ld0xvY2F0aW9ufHxsb2NhdGlvbi5ocmVmLnJlcGxhY2UoLyUyNy9nLCInIik7fX07dmFyIHVybENoYW5nZUxpc3RlbmVycz1bXSx1cmxDaGFuZ2VJbml0PWZhbHNlO2Z1bmN0aW9uIGZpcmVVcmxDaGFuZ2UoKXtuZXdMb2NhdGlvbj1udWxsO2lmKGxhc3RCcm93c2VyVXJsPT1zZWxmLnVybCgpKXJldHVybjtsYXN0QnJvd3NlclVybD1zZWxmLnVybCgpO2ZvckVhY2godXJsQ2hhbmdlTGlzdGVuZXJzLGZ1bmN0aW9uKGxpc3RlbmVyKXtsaXN0ZW5lcihzZWxmLnVybCgpKTt9KTt9CnNlbGYub25VcmxDaGFuZ2U9ZnVuY3Rpb24oY2FsbGJhY2spe2lmKCF1cmxDaGFuZ2VJbml0KXtpZigkc25pZmZlci5oaXN0b3J5KWpxTGl0ZSh3aW5kb3cpLm9uKCdwb3BzdGF0ZScsZmlyZVVybENoYW5nZSk7aWYoJHNuaWZmZXIuaGFzaGNoYW5nZSlqcUxpdGUod2luZG93KS5vbignaGFzaGNoYW5nZScsZmlyZVVybENoYW5nZSk7ZWxzZSBzZWxmLmFkZFBvbGxGbihmaXJlVXJsQ2hhbmdlKTt1cmxDaGFuZ2VJbml0PXRydWU7fQp1cmxDaGFuZ2VMaXN0ZW5lcnMucHVzaChjYWxsYmFjayk7cmV0dXJuIGNhbGxiYWNrO307c2VsZi5iYXNlSHJlZj1mdW5jdGlvbigpe3ZhciBocmVmPWJhc2VFbGVtZW50LmF0dHIoJ2hyZWYnKTtyZXR1cm4gaHJlZj9ocmVmLnJlcGxhY2UoL14oaHR0cHM/XDopP1wvXC9bXlwvXSovLCcnKTonJzt9O3ZhciBsYXN0Q29va2llcz17fTt2YXIgbGFzdENvb2tpZVN0cmluZz0nJzt2YXIgY29va2llUGF0aD1zZWxmLmJhc2VIcmVmKCk7c2VsZi5jb29raWVzPWZ1bmN0aW9uKG5hbWUsdmFsdWUpe3ZhciBjb29raWVMZW5ndGgsY29va2llQXJyYXksY29va2llLGksaW5kZXg7aWYobmFtZSl7aWYodmFsdWU9PT11bmRlZmluZWQpe3Jhd0RvY3VtZW50LmNvb2tpZT1lc2NhcGUobmFtZSkrIj07cGF0aD0iK2Nvb2tpZVBhdGgrIjtleHBpcmVzPVRodSwgMDEgSmFuIDE5NzAgMDA6MDA6MDAgR01UIjt9ZWxzZXtpZihpc1N0cmluZyh2YWx1ZSkpe2Nvb2tpZUxlbmd0aD0ocmF3RG9jdW1lbnQuY29va2llPWVzY2FwZShuYW1lKSsnPScrZXNjYXBlKHZhbHVlKSsnO3BhdGg9Jytjb29raWVQYXRoKS5sZW5ndGgrMTtpZihjb29raWVMZW5ndGg+NDA5Nil7JGxvZy53YXJuKCJDb29raWUgJyIrbmFtZSsiJyBwb3NzaWJseSBub3Qgc2V0IG9yIG92ZXJmbG93ZWQgYmVjYXVzZSBpdCB3YXMgdG9vIGxhcmdlICgiKwpjb29raWVMZW5ndGgrIiA+IDQwOTYgYnl0ZXMpISIpO319fX1lbHNle2lmKHJhd0RvY3VtZW50LmNvb2tpZSE9PWxhc3RDb29raWVTdHJpbmcpe2xhc3RDb29raWVTdHJpbmc9cmF3RG9jdW1lbnQuY29va2llO2Nvb2tpZUFycmF5PWxhc3RDb29raWVTdHJpbmcuc3BsaXQoIjsgIik7bGFzdENvb2tpZXM9e307Zm9yKGk9MDtpPGNvb2tpZUFycmF5Lmxlbmd0aDtpKyspe2Nvb2tpZT1jb29raWVBcnJheVtpXTtpbmRleD1jb29raWUuaW5kZXhPZignPScpO2lmKGluZGV4PjApe25hbWU9dW5lc2NhcGUoY29va2llLnN1YnN0cmluZygwLGluZGV4KSk7aWYobGFzdENvb2tpZXNbbmFtZV09PT11bmRlZmluZWQpe2xhc3RDb29raWVzW25hbWVdPXVuZXNjYXBlKGNvb2tpZS5zdWJzdHJpbmcoaW5kZXgrMSkpO319fX0KcmV0dXJuIGxhc3RDb29raWVzO319O3NlbGYuZGVmZXI9ZnVuY3Rpb24oZm4sZGVsYXkpe3ZhciB0aW1lb3V0SWQ7b3V0c3RhbmRpbmdSZXF1ZXN0Q291bnQrKzt0aW1lb3V0SWQ9c2V0VGltZW91dChmdW5jdGlvbigpe2RlbGV0ZSBwZW5kaW5nRGVmZXJJZHNbdGltZW91dElkXTtjb21wbGV0ZU91dHN0YW5kaW5nUmVxdWVzdChmbik7fSxkZWxheXx8MCk7cGVuZGluZ0RlZmVySWRzW3RpbWVvdXRJZF09dHJ1ZTtyZXR1cm4gdGltZW91dElkO307c2VsZi5kZWZlci5jYW5jZWw9ZnVuY3Rpb24oZGVmZXJJZCl7aWYocGVuZGluZ0RlZmVySWRzW2RlZmVySWRdKXtkZWxldGUgcGVuZGluZ0RlZmVySWRzW2RlZmVySWRdO2NsZWFyVGltZW91dChkZWZlcklkKTtjb21wbGV0ZU91dHN0YW5kaW5nUmVxdWVzdChub29wKTtyZXR1cm4gdHJ1ZTt9CnJldHVybiBmYWxzZTt9O30KZnVuY3Rpb24gJEJyb3dzZXJQcm92aWRlcigpe3RoaXMuJGdldD1bJyR3aW5kb3cnLCckbG9nJywnJHNuaWZmZXInLCckZG9jdW1lbnQnLGZ1bmN0aW9uKCR3aW5kb3csJGxvZywkc25pZmZlciwkZG9jdW1lbnQpe3JldHVybiBuZXcgQnJvd3Nlcigkd2luZG93LCRkb2N1bWVudCwkbG9nLCRzbmlmZmVyKTt9XTt9CmZ1bmN0aW9uICRDYWNoZUZhY3RvcnlQcm92aWRlcigpe3RoaXMuJGdldD1mdW5jdGlvbigpe3ZhciBjYWNoZXM9e307ZnVuY3Rpb24gY2FjaGVGYWN0b3J5KGNhY2hlSWQsb3B0aW9ucyl7aWYoY2FjaGVJZCBpbiBjYWNoZXMpe3Rocm93IG1pbkVycignJGNhY2hlRmFjdG9yeScpKCdpaWQnLCJDYWNoZUlkICd7MH0nIGlzIGFscmVhZHkgdGFrZW4hIixjYWNoZUlkKTt9CnZhciBzaXplPTAsc3RhdHM9ZXh0ZW5kKHt9LG9wdGlvbnMse2lkOmNhY2hlSWR9KSxkYXRhPXt9LGNhcGFjaXR5PShvcHRpb25zJiZvcHRpb25zLmNhcGFjaXR5KXx8TnVtYmVyLk1BWF9WQUxVRSxscnVIYXNoPXt9LGZyZXNoRW5kPW51bGwsc3RhbGVFbmQ9bnVsbDtyZXR1cm4gY2FjaGVzW2NhY2hlSWRdPXtwdXQ6ZnVuY3Rpb24oa2V5LHZhbHVlKXtpZihjYXBhY2l0eTxOdW1iZXIuTUFYX1ZBTFVFKXt2YXIgbHJ1RW50cnk9bHJ1SGFzaFtrZXldfHwobHJ1SGFzaFtrZXldPXtrZXk6a2V5fSk7cmVmcmVzaChscnVFbnRyeSk7fQppZihpc1VuZGVmaW5lZCh2YWx1ZSkpcmV0dXJuO2lmKCEoa2V5IGluIGRhdGEpKXNpemUrKztkYXRhW2tleV09dmFsdWU7aWYoc2l6ZT5jYXBhY2l0eSl7dGhpcy5yZW1vdmUoc3RhbGVFbmQua2V5KTt9CnJldHVybiB2YWx1ZTt9LGdldDpmdW5jdGlvbihrZXkpe2lmKGNhcGFjaXR5PE51bWJlci5NQVhfVkFMVUUpe3ZhciBscnVFbnRyeT1scnVIYXNoW2tleV07aWYoIWxydUVudHJ5KXJldHVybjtyZWZyZXNoKGxydUVudHJ5KTt9CnJldHVybiBkYXRhW2tleV07fSxyZW1vdmU6ZnVuY3Rpb24oa2V5KXtpZihjYXBhY2l0eTxOdW1iZXIuTUFYX1ZBTFVFKXt2YXIgbHJ1RW50cnk9bHJ1SGFzaFtrZXldO2lmKCFscnVFbnRyeSlyZXR1cm47aWYobHJ1RW50cnk9PWZyZXNoRW5kKWZyZXNoRW5kPWxydUVudHJ5LnA7aWYobHJ1RW50cnk9PXN0YWxlRW5kKXN0YWxlRW5kPWxydUVudHJ5Lm47bGluayhscnVFbnRyeS5uLGxydUVudHJ5LnApO2RlbGV0ZSBscnVIYXNoW2tleV07fQpkZWxldGUgZGF0YVtrZXldO3NpemUtLTt9LHJlbW92ZUFsbDpmdW5jdGlvbigpe2RhdGE9e307c2l6ZT0wO2xydUhhc2g9e307ZnJlc2hFbmQ9c3RhbGVFbmQ9bnVsbDt9LGRlc3Ryb3k6ZnVuY3Rpb24oKXtkYXRhPW51bGw7c3RhdHM9bnVsbDtscnVIYXNoPW51bGw7ZGVsZXRlIGNhY2hlc1tjYWNoZUlkXTt9LGluZm86ZnVuY3Rpb24oKXtyZXR1cm4gZXh0ZW5kKHt9LHN0YXRzLHtzaXplOnNpemV9KTt9fTtmdW5jdGlvbiByZWZyZXNoKGVudHJ5KXtpZihlbnRyeSE9ZnJlc2hFbmQpe2lmKCFzdGFsZUVuZCl7c3RhbGVFbmQ9ZW50cnk7fWVsc2UgaWYoc3RhbGVFbmQ9PWVudHJ5KXtzdGFsZUVuZD1lbnRyeS5uO30KbGluayhlbnRyeS5uLGVudHJ5LnApO2xpbmsoZW50cnksZnJlc2hFbmQpO2ZyZXNoRW5kPWVudHJ5O2ZyZXNoRW5kLm49bnVsbDt9fQpmdW5jdGlvbiBsaW5rKG5leHRFbnRyeSxwcmV2RW50cnkpe2lmKG5leHRFbnRyeSE9cHJldkVudHJ5KXtpZihuZXh0RW50cnkpbmV4dEVudHJ5LnA9cHJldkVudHJ5O2lmKHByZXZFbnRyeSlwcmV2RW50cnkubj1uZXh0RW50cnk7fX19CmNhY2hlRmFjdG9yeS5pbmZvPWZ1bmN0aW9uKCl7dmFyIGluZm89e307Zm9yRWFjaChjYWNoZXMsZnVuY3Rpb24oY2FjaGUsY2FjaGVJZCl7aW5mb1tjYWNoZUlkXT1jYWNoZS5pbmZvKCk7fSk7cmV0dXJuIGluZm87fTtjYWNoZUZhY3RvcnkuZ2V0PWZ1bmN0aW9uKGNhY2hlSWQpe3JldHVybiBjYWNoZXNbY2FjaGVJZF07fTtyZXR1cm4gY2FjaGVGYWN0b3J5O307fQpmdW5jdGlvbiAkVGVtcGxhdGVDYWNoZVByb3ZpZGVyKCl7dGhpcy4kZ2V0PVsnJGNhY2hlRmFjdG9yeScsZnVuY3Rpb24oJGNhY2hlRmFjdG9yeSl7cmV0dXJuICRjYWNoZUZhY3RvcnkoJ3RlbXBsYXRlcycpO31dO30KdmFyICRjb21waWxlTWluRXJyPW1pbkVycignJGNvbXBpbGUnKTskQ29tcGlsZVByb3ZpZGVyLiRpbmplY3Q9WyckcHJvdmlkZScsJyQkc2FuaXRpemVVcmlQcm92aWRlciddO2Z1bmN0aW9uICRDb21waWxlUHJvdmlkZXIoJHByb3ZpZGUsJCRzYW5pdGl6ZVVyaVByb3ZpZGVyKXt2YXIgaGFzRGlyZWN0aXZlcz17fSxTdWZmaXg9J0RpcmVjdGl2ZScsQ09NTUVOVF9ESVJFQ1RJVkVfUkVHRVhQPS9eXHMqZGlyZWN0aXZlXDpccyooW1xkXHdfXC1dKylccysoLiopJC8sQ0xBU1NfRElSRUNUSVZFX1JFR0VYUD0vKChbXGRcd19cLV0rKSg/Olw6KFteO10rKSk/Oz8pLzt2YXIgRVZFTlRfSEFORExFUl9BVFRSX1JFR0VYUD0vXihvblthLXpdK3xmb3JtYWN0aW9uKSQvO3RoaXMuZGlyZWN0aXZlPWZ1bmN0aW9uIHJlZ2lzdGVyRGlyZWN0aXZlKG5hbWUsZGlyZWN0aXZlRmFjdG9yeSl7YXNzZXJ0Tm90SGFzT3duUHJvcGVydHkobmFtZSwnZGlyZWN0aXZlJyk7aWYoaXNTdHJpbmcobmFtZSkpe2Fzc2VydEFyZyhkaXJlY3RpdmVGYWN0b3J5LCdkaXJlY3RpdmVGYWN0b3J5Jyk7aWYoIWhhc0RpcmVjdGl2ZXMuaGFzT3duUHJvcGVydHkobmFtZSkpe2hhc0RpcmVjdGl2ZXNbbmFtZV09W107JHByb3ZpZGUuZmFjdG9yeShuYW1lK1N1ZmZpeCxbJyRpbmplY3RvcicsJyRleGNlcHRpb25IYW5kbGVyJyxmdW5jdGlvbigkaW5qZWN0b3IsJGV4Y2VwdGlvbkhhbmRsZXIpe3ZhciBkaXJlY3RpdmVzPVtdO2ZvckVhY2goaGFzRGlyZWN0aXZlc1tuYW1lXSxmdW5jdGlvbihkaXJlY3RpdmVGYWN0b3J5LGluZGV4KXt0cnl7dmFyIGRpcmVjdGl2ZT0kaW5qZWN0b3IuaW52b2tlKGRpcmVjdGl2ZUZhY3RvcnkpO2lmKGlzRnVuY3Rpb24oZGlyZWN0aXZlKSl7ZGlyZWN0aXZlPXtjb21waWxlOnZhbHVlRm4oZGlyZWN0aXZlKX07fWVsc2UgaWYoIWRpcmVjdGl2ZS5jb21waWxlJiZkaXJlY3RpdmUubGluayl7ZGlyZWN0aXZlLmNvbXBpbGU9dmFsdWVGbihkaXJlY3RpdmUubGluayk7fQpkaXJlY3RpdmUucHJpb3JpdHk9ZGlyZWN0aXZlLnByaW9yaXR5fHwwO2RpcmVjdGl2ZS5pbmRleD1pbmRleDtkaXJlY3RpdmUubmFtZT1kaXJlY3RpdmUubmFtZXx8bmFtZTtkaXJlY3RpdmUucmVxdWlyZT1kaXJlY3RpdmUucmVxdWlyZXx8KGRpcmVjdGl2ZS5jb250cm9sbGVyJiZkaXJlY3RpdmUubmFtZSk7ZGlyZWN0aXZlLnJlc3RyaWN0PWRpcmVjdGl2ZS5yZXN0cmljdHx8J0EnO2RpcmVjdGl2ZXMucHVzaChkaXJlY3RpdmUpO31jYXRjaChlKXskZXhjZXB0aW9uSGFuZGxlcihlKTt9fSk7cmV0dXJuIGRpcmVjdGl2ZXM7fV0pO30KaGFzRGlyZWN0aXZlc1tuYW1lXS5wdXNoKGRpcmVjdGl2ZUZhY3RvcnkpO31lbHNle2ZvckVhY2gobmFtZSxyZXZlcnNlUGFyYW1zKHJlZ2lzdGVyRGlyZWN0aXZlKSk7fQpyZXR1cm4gdGhpczt9O3RoaXMuYUhyZWZTYW5pdGl6YXRpb25XaGl0ZWxpc3Q9ZnVuY3Rpb24ocmVnZXhwKXtpZihpc0RlZmluZWQocmVnZXhwKSl7JCRzYW5pdGl6ZVVyaVByb3ZpZGVyLmFIcmVmU2FuaXRpemF0aW9uV2hpdGVsaXN0KHJlZ2V4cCk7cmV0dXJuIHRoaXM7fWVsc2V7cmV0dXJuICQkc2FuaXRpemVVcmlQcm92aWRlci5hSHJlZlNhbml0aXphdGlvbldoaXRlbGlzdCgpO319O3RoaXMuaW1nU3JjU2FuaXRpemF0aW9uV2hpdGVsaXN0PWZ1bmN0aW9uKHJlZ2V4cCl7aWYoaXNEZWZpbmVkKHJlZ2V4cCkpeyQkc2FuaXRpemVVcmlQcm92aWRlci5pbWdTcmNTYW5pdGl6YXRpb25XaGl0ZWxpc3QocmVnZXhwKTtyZXR1cm4gdGhpczt9ZWxzZXtyZXR1cm4gJCRzYW5pdGl6ZVVyaVByb3ZpZGVyLmltZ1NyY1Nhbml0aXphdGlvbldoaXRlbGlzdCgpO319O3RoaXMuJGdldD1bJyRpbmplY3RvcicsJyRpbnRlcnBvbGF0ZScsJyRleGNlcHRpb25IYW5kbGVyJywnJGh0dHAnLCckdGVtcGxhdGVDYWNoZScsJyRwYXJzZScsJyRjb250cm9sbGVyJywnJHJvb3RTY29wZScsJyRkb2N1bWVudCcsJyRzY2UnLCckYW5pbWF0ZScsJyQkc2FuaXRpemVVcmknLGZ1bmN0aW9uKCRpbmplY3RvciwkaW50ZXJwb2xhdGUsJGV4Y2VwdGlvbkhhbmRsZXIsJGh0dHAsJHRlbXBsYXRlQ2FjaGUsJHBhcnNlLCRjb250cm9sbGVyLCRyb290U2NvcGUsJGRvY3VtZW50LCRzY2UsJGFuaW1hdGUsJCRzYW5pdGl6ZVVyaSl7dmFyIEF0dHJpYnV0ZXM9ZnVuY3Rpb24oZWxlbWVudCxhdHRyKXt0aGlzLiQkZWxlbWVudD1lbGVtZW50O3RoaXMuJGF0dHI9YXR0cnx8e307fTtBdHRyaWJ1dGVzLnByb3RvdHlwZT17JG5vcm1hbGl6ZTpkaXJlY3RpdmVOb3JtYWxpemUsJGFkZENsYXNzOmZ1bmN0aW9uKGNsYXNzVmFsKXtpZihjbGFzc1ZhbCYmY2xhc3NWYWwubGVuZ3RoPjApeyRhbmltYXRlLmFkZENsYXNzKHRoaXMuJCRlbGVtZW50LGNsYXNzVmFsKTt9fSwkcmVtb3ZlQ2xhc3M6ZnVuY3Rpb24oY2xhc3NWYWwpe2lmKGNsYXNzVmFsJiZjbGFzc1ZhbC5sZW5ndGg+MCl7JGFuaW1hdGUucmVtb3ZlQ2xhc3ModGhpcy4kJGVsZW1lbnQsY2xhc3NWYWwpO319LCR1cGRhdGVDbGFzczpmdW5jdGlvbihuZXdDbGFzc2VzLG9sZENsYXNzZXMpe3ZhciB0b0FkZD10b2tlbkRpZmZlcmVuY2UobmV3Q2xhc3NlcyxvbGRDbGFzc2VzKTt2YXIgdG9SZW1vdmU9dG9rZW5EaWZmZXJlbmNlKG9sZENsYXNzZXMsbmV3Q2xhc3Nlcyk7aWYodG9BZGQubGVuZ3RoPT09MCl7JGFuaW1hdGUucmVtb3ZlQ2xhc3ModGhpcy4kJGVsZW1lbnQsdG9SZW1vdmUpO31lbHNlIGlmKHRvUmVtb3ZlLmxlbmd0aD09PTApeyRhbmltYXRlLmFkZENsYXNzKHRoaXMuJCRlbGVtZW50LHRvQWRkKTt9ZWxzZXskYW5pbWF0ZS5zZXRDbGFzcyh0aGlzLiQkZWxlbWVudCx0b0FkZCx0b1JlbW92ZSk7fX0sJHNldDpmdW5jdGlvbihrZXksdmFsdWUsd3JpdGVBdHRyLGF0dHJOYW1lKXt2YXIgYm9vbGVhbktleT1nZXRCb29sZWFuQXR0ck5hbWUodGhpcy4kJGVsZW1lbnRbMF0sa2V5KSxub3JtYWxpemVkVmFsLG5vZGVOYW1lO2lmKGJvb2xlYW5LZXkpe3RoaXMuJCRlbGVtZW50LnByb3Aoa2V5LHZhbHVlKTthdHRyTmFtZT1ib29sZWFuS2V5O30KdGhpc1trZXldPXZhbHVlO2lmKGF0dHJOYW1lKXt0aGlzLiRhdHRyW2tleV09YXR0ck5hbWU7fWVsc2V7YXR0ck5hbWU9dGhpcy4kYXR0cltrZXldO2lmKCFhdHRyTmFtZSl7dGhpcy4kYXR0cltrZXldPWF0dHJOYW1lPXNuYWtlX2Nhc2Uoa2V5LCctJyk7fX0Kbm9kZU5hbWU9bm9kZU5hbWVfKHRoaXMuJCRlbGVtZW50KTtpZigobm9kZU5hbWU9PT0nQScmJmtleT09PSdocmVmJyl8fChub2RlTmFtZT09PSdJTUcnJiZrZXk9PT0nc3JjJykpe3RoaXNba2V5XT12YWx1ZT0kJHNhbml0aXplVXJpKHZhbHVlLGtleT09PSdzcmMnKTt9CmlmKHdyaXRlQXR0ciE9PWZhbHNlKXtpZih2YWx1ZT09PW51bGx8fHZhbHVlPT09dW5kZWZpbmVkKXt0aGlzLiQkZWxlbWVudC5yZW1vdmVBdHRyKGF0dHJOYW1lKTt9ZWxzZXt0aGlzLiQkZWxlbWVudC5hdHRyKGF0dHJOYW1lLHZhbHVlKTt9fQp2YXIgJCRvYnNlcnZlcnM9dGhpcy4kJG9ic2VydmVyczskJG9ic2VydmVycyYmZm9yRWFjaCgkJG9ic2VydmVyc1trZXldLGZ1bmN0aW9uKGZuKXt0cnl7Zm4odmFsdWUpO31jYXRjaChlKXskZXhjZXB0aW9uSGFuZGxlcihlKTt9fSk7fSwkb2JzZXJ2ZTpmdW5jdGlvbihrZXksZm4pe3ZhciBhdHRycz10aGlzLCQkb2JzZXJ2ZXJzPShhdHRycy4kJG9ic2VydmVyc3x8KGF0dHJzLiQkb2JzZXJ2ZXJzPXt9KSksbGlzdGVuZXJzPSgkJG9ic2VydmVyc1trZXldfHwoJCRvYnNlcnZlcnNba2V5XT1bXSkpO2xpc3RlbmVycy5wdXNoKGZuKTskcm9vdFNjb3BlLiRldmFsQXN5bmMoZnVuY3Rpb24oKXtpZighbGlzdGVuZXJzLiQkaW50ZXIpe2ZuKGF0dHJzW2tleV0pO319KTtyZXR1cm4gZm47fX07dmFyIHN0YXJ0U3ltYm9sPSRpbnRlcnBvbGF0ZS5zdGFydFN5bWJvbCgpLGVuZFN5bWJvbD0kaW50ZXJwb2xhdGUuZW5kU3ltYm9sKCksZGVub3JtYWxpemVUZW1wbGF0ZT0oc3RhcnRTeW1ib2w9PSd7eyd8fGVuZFN5bWJvbD09J319Jyk/aWRlbnRpdHk6ZnVuY3Rpb24gZGVub3JtYWxpemVUZW1wbGF0ZSh0ZW1wbGF0ZSl7cmV0dXJuIHRlbXBsYXRlLnJlcGxhY2UoL1x7XHsvZyxzdGFydFN5bWJvbCkucmVwbGFjZSgvfX0vZyxlbmRTeW1ib2wpO30sTkdfQVRUUl9CSU5ESU5HPS9ebmdBdHRyW0EtWl0vO3JldHVybiBjb21waWxlO2Z1bmN0aW9uIGNvbXBpbGUoJGNvbXBpbGVOb2Rlcyx0cmFuc2NsdWRlRm4sbWF4UHJpb3JpdHksaWdub3JlRGlyZWN0aXZlLHByZXZpb3VzQ29tcGlsZUNvbnRleHQpe2lmKCEoJGNvbXBpbGVOb2RlcyBpbnN0YW5jZW9mIGpxTGl0ZSkpeyRjb21waWxlTm9kZXM9anFMaXRlKCRjb21waWxlTm9kZXMpO30KZm9yRWFjaCgkY29tcGlsZU5vZGVzLGZ1bmN0aW9uKG5vZGUsaW5kZXgpe2lmKG5vZGUubm9kZVR5cGU9PTMmJm5vZGUubm9kZVZhbHVlLm1hdGNoKC9cUysvKSl7JGNvbXBpbGVOb2Rlc1tpbmRleF09bm9kZT1qcUxpdGUobm9kZSkud3JhcCgnPHNwYW4+PC9zcGFuPicpLnBhcmVudCgpWzBdO319KTt2YXIgY29tcG9zaXRlTGlua0ZuPWNvbXBpbGVOb2RlcygkY29tcGlsZU5vZGVzLHRyYW5zY2x1ZGVGbiwkY29tcGlsZU5vZGVzLG1heFByaW9yaXR5LGlnbm9yZURpcmVjdGl2ZSxwcmV2aW91c0NvbXBpbGVDb250ZXh0KTtzYWZlQWRkQ2xhc3MoJGNvbXBpbGVOb2Rlcywnbmctc2NvcGUnKTtyZXR1cm4gZnVuY3Rpb24gcHVibGljTGlua0ZuKHNjb3BlLGNsb25lQ29ubmVjdEZuLHRyYW5zY2x1ZGVDb250cm9sbGVycyxwYXJlbnRCb3VuZFRyYW5zY2x1ZGVGbil7YXNzZXJ0QXJnKHNjb3BlLCdzY29wZScpO3ZhciAkbGlua05vZGU9Y2xvbmVDb25uZWN0Rm4/SlFMaXRlUHJvdG90eXBlLmNsb25lLmNhbGwoJGNvbXBpbGVOb2Rlcyk6JGNvbXBpbGVOb2Rlcztmb3JFYWNoKHRyYW5zY2x1ZGVDb250cm9sbGVycyxmdW5jdGlvbihpbnN0YW5jZSxuYW1lKXskbGlua05vZGUuZGF0YSgnJCcrbmFtZSsnQ29udHJvbGxlcicsaW5zdGFuY2UpO30pO2Zvcih2YXIgaT0wLGlpPSRsaW5rTm9kZS5sZW5ndGg7aTxpaTtpKyspe3ZhciBub2RlPSRsaW5rTm9kZVtpXSxub2RlVHlwZT1ub2RlLm5vZGVUeXBlO2lmKG5vZGVUeXBlPT09MXx8bm9kZVR5cGU9PT05KXskbGlua05vZGUuZXEoaSkuZGF0YSgnJHNjb3BlJyxzY29wZSk7fX0KaWYoY2xvbmVDb25uZWN0Rm4pY2xvbmVDb25uZWN0Rm4oJGxpbmtOb2RlLHNjb3BlKTtpZihjb21wb3NpdGVMaW5rRm4pY29tcG9zaXRlTGlua0ZuKHNjb3BlLCRsaW5rTm9kZSwkbGlua05vZGUscGFyZW50Qm91bmRUcmFuc2NsdWRlRm4pO3JldHVybiAkbGlua05vZGU7fTt9CmZ1bmN0aW9uIHNhZmVBZGRDbGFzcygkZWxlbWVudCxjbGFzc05hbWUpe3RyeXskZWxlbWVudC5hZGRDbGFzcyhjbGFzc05hbWUpO31jYXRjaChlKXt9fQpmdW5jdGlvbiBjb21waWxlTm9kZXMobm9kZUxpc3QsdHJhbnNjbHVkZUZuLCRyb290RWxlbWVudCxtYXhQcmlvcml0eSxpZ25vcmVEaXJlY3RpdmUscHJldmlvdXNDb21waWxlQ29udGV4dCl7dmFyIGxpbmtGbnM9W10sYXR0cnMsZGlyZWN0aXZlcyxub2RlTGlua0ZuLGNoaWxkTm9kZXMsY2hpbGRMaW5rRm4sbGlua0ZuRm91bmQ7Zm9yKHZhciBpPTA7aTxub2RlTGlzdC5sZW5ndGg7aSsrKXthdHRycz1uZXcgQXR0cmlidXRlcygpO2RpcmVjdGl2ZXM9Y29sbGVjdERpcmVjdGl2ZXMobm9kZUxpc3RbaV0sW10sYXR0cnMsaT09PTA/bWF4UHJpb3JpdHk6dW5kZWZpbmVkLGlnbm9yZURpcmVjdGl2ZSk7bm9kZUxpbmtGbj0oZGlyZWN0aXZlcy5sZW5ndGgpP2FwcGx5RGlyZWN0aXZlc1RvTm9kZShkaXJlY3RpdmVzLG5vZGVMaXN0W2ldLGF0dHJzLHRyYW5zY2x1ZGVGbiwkcm9vdEVsZW1lbnQsbnVsbCxbXSxbXSxwcmV2aW91c0NvbXBpbGVDb250ZXh0KTpudWxsO2lmKG5vZGVMaW5rRm4mJm5vZGVMaW5rRm4uc2NvcGUpe3NhZmVBZGRDbGFzcyhqcUxpdGUobm9kZUxpc3RbaV0pLCduZy1zY29wZScpO30KY2hpbGRMaW5rRm49KG5vZGVMaW5rRm4mJm5vZGVMaW5rRm4udGVybWluYWx8fCEoY2hpbGROb2Rlcz1ub2RlTGlzdFtpXS5jaGlsZE5vZGVzKXx8IWNoaWxkTm9kZXMubGVuZ3RoKT9udWxsOmNvbXBpbGVOb2RlcyhjaGlsZE5vZGVzLG5vZGVMaW5rRm4/KChub2RlTGlua0ZuLnRyYW5zY2x1ZGVPblRoaXNFbGVtZW50fHwhbm9kZUxpbmtGbi50ZW1wbGF0ZU9uVGhpc0VsZW1lbnQpJiZub2RlTGlua0ZuLnRyYW5zY2x1ZGUpOnRyYW5zY2x1ZGVGbik7bGlua0Zucy5wdXNoKG5vZGVMaW5rRm4sY2hpbGRMaW5rRm4pO2xpbmtGbkZvdW5kPWxpbmtGbkZvdW5kfHxub2RlTGlua0ZufHxjaGlsZExpbmtGbjtwcmV2aW91c0NvbXBpbGVDb250ZXh0PW51bGw7fQpyZXR1cm4gbGlua0ZuRm91bmQ/Y29tcG9zaXRlTGlua0ZuOm51bGw7ZnVuY3Rpb24gY29tcG9zaXRlTGlua0ZuKHNjb3BlLG5vZGVMaXN0LCRyb290RWxlbWVudCxwYXJlbnRCb3VuZFRyYW5zY2x1ZGVGbil7dmFyIG5vZGVMaW5rRm4sY2hpbGRMaW5rRm4sbm9kZSwkbm9kZSxjaGlsZFNjb3BlLGksaWksbixjaGlsZEJvdW5kVHJhbnNjbHVkZUZuO3ZhciBub2RlTGlzdExlbmd0aD1ub2RlTGlzdC5sZW5ndGgsc3RhYmxlTm9kZUxpc3Q9bmV3IEFycmF5KG5vZGVMaXN0TGVuZ3RoKTtmb3IoaT0wO2k8bm9kZUxpc3RMZW5ndGg7aSsrKXtzdGFibGVOb2RlTGlzdFtpXT1ub2RlTGlzdFtpXTt9CmZvcihpPTAsbj0wLGlpPWxpbmtGbnMubGVuZ3RoO2k8aWk7bisrKXtub2RlPXN0YWJsZU5vZGVMaXN0W25dO25vZGVMaW5rRm49bGlua0Zuc1tpKytdO2NoaWxkTGlua0ZuPWxpbmtGbnNbaSsrXTskbm9kZT1qcUxpdGUobm9kZSk7aWYobm9kZUxpbmtGbil7aWYobm9kZUxpbmtGbi5zY29wZSl7Y2hpbGRTY29wZT1zY29wZS4kbmV3KCk7JG5vZGUuZGF0YSgnJHNjb3BlJyxjaGlsZFNjb3BlKTt9ZWxzZXtjaGlsZFNjb3BlPXNjb3BlO30KaWYobm9kZUxpbmtGbi50cmFuc2NsdWRlT25UaGlzRWxlbWVudCl7Y2hpbGRCb3VuZFRyYW5zY2x1ZGVGbj1jcmVhdGVCb3VuZFRyYW5zY2x1ZGVGbihzY29wZSxub2RlTGlua0ZuLnRyYW5zY2x1ZGUscGFyZW50Qm91bmRUcmFuc2NsdWRlRm4pO31lbHNlIGlmKCFub2RlTGlua0ZuLnRlbXBsYXRlT25UaGlzRWxlbWVudCYmcGFyZW50Qm91bmRUcmFuc2NsdWRlRm4pe2NoaWxkQm91bmRUcmFuc2NsdWRlRm49cGFyZW50Qm91bmRUcmFuc2NsdWRlRm47fWVsc2UgaWYoIXBhcmVudEJvdW5kVHJhbnNjbHVkZUZuJiZ0cmFuc2NsdWRlRm4pe2NoaWxkQm91bmRUcmFuc2NsdWRlRm49Y3JlYXRlQm91bmRUcmFuc2NsdWRlRm4oc2NvcGUsdHJhbnNjbHVkZUZuKTt9ZWxzZXtjaGlsZEJvdW5kVHJhbnNjbHVkZUZuPW51bGw7fQpub2RlTGlua0ZuKGNoaWxkTGlua0ZuLGNoaWxkU2NvcGUsbm9kZSwkcm9vdEVsZW1lbnQsY2hpbGRCb3VuZFRyYW5zY2x1ZGVGbik7fWVsc2UgaWYoY2hpbGRMaW5rRm4pe2NoaWxkTGlua0ZuKHNjb3BlLG5vZGUuY2hpbGROb2Rlcyx1bmRlZmluZWQscGFyZW50Qm91bmRUcmFuc2NsdWRlRm4pO319fX0KZnVuY3Rpb24gY3JlYXRlQm91bmRUcmFuc2NsdWRlRm4oc2NvcGUsdHJhbnNjbHVkZUZuLHByZXZpb3VzQm91bmRUcmFuc2NsdWRlRm4pe3ZhciBib3VuZFRyYW5zY2x1ZGVGbj1mdW5jdGlvbih0cmFuc2NsdWRlZFNjb3BlLGNsb25lRm4sY29udHJvbGxlcnMpe3ZhciBzY29wZUNyZWF0ZWQ9ZmFsc2U7aWYoIXRyYW5zY2x1ZGVkU2NvcGUpe3RyYW5zY2x1ZGVkU2NvcGU9c2NvcGUuJG5ldygpO3RyYW5zY2x1ZGVkU2NvcGUuJCR0cmFuc2NsdWRlZD10cnVlO3Njb3BlQ3JlYXRlZD10cnVlO30KdmFyIGNsb25lPXRyYW5zY2x1ZGVGbih0cmFuc2NsdWRlZFNjb3BlLGNsb25lRm4sY29udHJvbGxlcnMscHJldmlvdXNCb3VuZFRyYW5zY2x1ZGVGbik7aWYoc2NvcGVDcmVhdGVkKXtjbG9uZS5vbignJGRlc3Ryb3knLGZ1bmN0aW9uKCl7dHJhbnNjbHVkZWRTY29wZS4kZGVzdHJveSgpO30pO30KcmV0dXJuIGNsb25lO307cmV0dXJuIGJvdW5kVHJhbnNjbHVkZUZuO30KZnVuY3Rpb24gY29sbGVjdERpcmVjdGl2ZXMobm9kZSxkaXJlY3RpdmVzLGF0dHJzLG1heFByaW9yaXR5LGlnbm9yZURpcmVjdGl2ZSl7dmFyIG5vZGVUeXBlPW5vZGUubm9kZVR5cGUsYXR0cnNNYXA9YXR0cnMuJGF0dHIsbWF0Y2gsY2xhc3NOYW1lO3N3aXRjaChub2RlVHlwZSl7Y2FzZSAxOmFkZERpcmVjdGl2ZShkaXJlY3RpdmVzLGRpcmVjdGl2ZU5vcm1hbGl6ZShub2RlTmFtZV8obm9kZSkudG9Mb3dlckNhc2UoKSksJ0UnLG1heFByaW9yaXR5LGlnbm9yZURpcmVjdGl2ZSk7Zm9yKHZhciBhdHRyLG5hbWUsbk5hbWUsbmdBdHRyTmFtZSx2YWx1ZSxpc05nQXR0cixuQXR0cnM9bm9kZS5hdHRyaWJ1dGVzLGo9MCxqaj1uQXR0cnMmJm5BdHRycy5sZW5ndGg7ajxqajtqKyspe3ZhciBhdHRyU3RhcnROYW1lPWZhbHNlO3ZhciBhdHRyRW5kTmFtZT1mYWxzZTthdHRyPW5BdHRyc1tqXTtpZighbXNpZXx8bXNpZT49OHx8YXR0ci5zcGVjaWZpZWQpe25hbWU9YXR0ci5uYW1lO3ZhbHVlPXRyaW0oYXR0ci52YWx1ZSk7bmdBdHRyTmFtZT1kaXJlY3RpdmVOb3JtYWxpemUobmFtZSk7aWYoaXNOZ0F0dHI9TkdfQVRUUl9CSU5ESU5HLnRlc3QobmdBdHRyTmFtZSkpe25hbWU9c25ha2VfY2FzZShuZ0F0dHJOYW1lLnN1YnN0cig2KSwnLScpO30KdmFyIGRpcmVjdGl2ZU5OYW1lPW5nQXR0ck5hbWUucmVwbGFjZSgvKFN0YXJ0fEVuZCkkLywnJyk7aWYobmdBdHRyTmFtZT09PWRpcmVjdGl2ZU5OYW1lKydTdGFydCcpe2F0dHJTdGFydE5hbWU9bmFtZTthdHRyRW5kTmFtZT1uYW1lLnN1YnN0cigwLG5hbWUubGVuZ3RoLTUpKydlbmQnO25hbWU9bmFtZS5zdWJzdHIoMCxuYW1lLmxlbmd0aC02KTt9Cm5OYW1lPWRpcmVjdGl2ZU5vcm1hbGl6ZShuYW1lLnRvTG93ZXJDYXNlKCkpO2F0dHJzTWFwW25OYW1lXT1uYW1lO2lmKGlzTmdBdHRyfHwhYXR0cnMuaGFzT3duUHJvcGVydHkobk5hbWUpKXthdHRyc1tuTmFtZV09dmFsdWU7aWYoZ2V0Qm9vbGVhbkF0dHJOYW1lKG5vZGUsbk5hbWUpKXthdHRyc1tuTmFtZV09dHJ1ZTt9fQphZGRBdHRySW50ZXJwb2xhdGVEaXJlY3RpdmUobm9kZSxkaXJlY3RpdmVzLHZhbHVlLG5OYW1lKTthZGREaXJlY3RpdmUoZGlyZWN0aXZlcyxuTmFtZSwnQScsbWF4UHJpb3JpdHksaWdub3JlRGlyZWN0aXZlLGF0dHJTdGFydE5hbWUsYXR0ckVuZE5hbWUpO319CmNsYXNzTmFtZT1ub2RlLmNsYXNzTmFtZTtpZihpc1N0cmluZyhjbGFzc05hbWUpJiZjbGFzc05hbWUhPT0nJyl7d2hpbGUobWF0Y2g9Q0xBU1NfRElSRUNUSVZFX1JFR0VYUC5leGVjKGNsYXNzTmFtZSkpe25OYW1lPWRpcmVjdGl2ZU5vcm1hbGl6ZShtYXRjaFsyXSk7aWYoYWRkRGlyZWN0aXZlKGRpcmVjdGl2ZXMsbk5hbWUsJ0MnLG1heFByaW9yaXR5LGlnbm9yZURpcmVjdGl2ZSkpe2F0dHJzW25OYW1lXT10cmltKG1hdGNoWzNdKTt9CmNsYXNzTmFtZT1jbGFzc05hbWUuc3Vic3RyKG1hdGNoLmluZGV4K21hdGNoWzBdLmxlbmd0aCk7fX0KYnJlYWs7Y2FzZSAzOmFkZFRleHRJbnRlcnBvbGF0ZURpcmVjdGl2ZShkaXJlY3RpdmVzLG5vZGUubm9kZVZhbHVlKTticmVhaztjYXNlIDg6dHJ5e21hdGNoPUNPTU1FTlRfRElSRUNUSVZFX1JFR0VYUC5leGVjKG5vZGUubm9kZVZhbHVlKTtpZihtYXRjaCl7bk5hbWU9ZGlyZWN0aXZlTm9ybWFsaXplKG1hdGNoWzFdKTtpZihhZGREaXJlY3RpdmUoZGlyZWN0aXZlcyxuTmFtZSwnTScsbWF4UHJpb3JpdHksaWdub3JlRGlyZWN0aXZlKSl7YXR0cnNbbk5hbWVdPXRyaW0obWF0Y2hbMl0pO319fWNhdGNoKGUpe30KYnJlYWs7fQpkaXJlY3RpdmVzLnNvcnQoYnlQcmlvcml0eSk7cmV0dXJuIGRpcmVjdGl2ZXM7fQpmdW5jdGlvbiBncm91cFNjYW4obm9kZSxhdHRyU3RhcnQsYXR0ckVuZCl7dmFyIG5vZGVzPVtdO3ZhciBkZXB0aD0wO2lmKGF0dHJTdGFydCYmbm9kZS5oYXNBdHRyaWJ1dGUmJm5vZGUuaGFzQXR0cmlidXRlKGF0dHJTdGFydCkpe3ZhciBzdGFydE5vZGU9bm9kZTtkb3tpZighbm9kZSl7dGhyb3cgJGNvbXBpbGVNaW5FcnIoJ3V0ZXJkaXInLCJVbnRlcm1pbmF0ZWQgYXR0cmlidXRlLCBmb3VuZCAnezB9JyBidXQgbm8gbWF0Y2hpbmcgJ3sxfScgZm91bmQuIixhdHRyU3RhcnQsYXR0ckVuZCk7fQppZihub2RlLm5vZGVUeXBlPT0xKXtpZihub2RlLmhhc0F0dHJpYnV0ZShhdHRyU3RhcnQpKWRlcHRoKys7aWYobm9kZS5oYXNBdHRyaWJ1dGUoYXR0ckVuZCkpZGVwdGgtLTt9Cm5vZGVzLnB1c2gobm9kZSk7bm9kZT1ub2RlLm5leHRTaWJsaW5nO313aGlsZShkZXB0aD4wKTt9ZWxzZXtub2Rlcy5wdXNoKG5vZGUpO30KcmV0dXJuIGpxTGl0ZShub2Rlcyk7fQpmdW5jdGlvbiBncm91cEVsZW1lbnRzTGlua0ZuV3JhcHBlcihsaW5rRm4sYXR0clN0YXJ0LGF0dHJFbmQpe3JldHVybiBmdW5jdGlvbihzY29wZSxlbGVtZW50LGF0dHJzLGNvbnRyb2xsZXJzLHRyYW5zY2x1ZGVGbil7ZWxlbWVudD1ncm91cFNjYW4oZWxlbWVudFswXSxhdHRyU3RhcnQsYXR0ckVuZCk7cmV0dXJuIGxpbmtGbihzY29wZSxlbGVtZW50LGF0dHJzLGNvbnRyb2xsZXJzLHRyYW5zY2x1ZGVGbik7fTt9CmZ1bmN0aW9uIGFwcGx5RGlyZWN0aXZlc1RvTm9kZShkaXJlY3RpdmVzLGNvbXBpbGVOb2RlLHRlbXBsYXRlQXR0cnMsdHJhbnNjbHVkZUZuLGpxQ29sbGVjdGlvbixvcmlnaW5hbFJlcGxhY2VEaXJlY3RpdmUscHJlTGlua0Zucyxwb3N0TGlua0ZucyxwcmV2aW91c0NvbXBpbGVDb250ZXh0KXtwcmV2aW91c0NvbXBpbGVDb250ZXh0PXByZXZpb3VzQ29tcGlsZUNvbnRleHR8fHt9O3ZhciB0ZXJtaW5hbFByaW9yaXR5PS1OdW1iZXIuTUFYX1ZBTFVFLG5ld1Njb3BlRGlyZWN0aXZlLGNvbnRyb2xsZXJEaXJlY3RpdmVzPXByZXZpb3VzQ29tcGlsZUNvbnRleHQuY29udHJvbGxlckRpcmVjdGl2ZXMsbmV3SXNvbGF0ZVNjb3BlRGlyZWN0aXZlPXByZXZpb3VzQ29tcGlsZUNvbnRleHQubmV3SXNvbGF0ZVNjb3BlRGlyZWN0aXZlLHRlbXBsYXRlRGlyZWN0aXZlPXByZXZpb3VzQ29tcGlsZUNvbnRleHQudGVtcGxhdGVEaXJlY3RpdmUsbm9uVGxiVHJhbnNjbHVkZURpcmVjdGl2ZT1wcmV2aW91c0NvbXBpbGVDb250ZXh0Lm5vblRsYlRyYW5zY2x1ZGVEaXJlY3RpdmUsaGFzVHJhbnNjbHVkZURpcmVjdGl2ZT1mYWxzZSxoYXNUZW1wbGF0ZT1mYWxzZSxoYXNFbGVtZW50VHJhbnNjbHVkZURpcmVjdGl2ZT1wcmV2aW91c0NvbXBpbGVDb250ZXh0Lmhhc0VsZW1lbnRUcmFuc2NsdWRlRGlyZWN0aXZlLCRjb21waWxlTm9kZT10ZW1wbGF0ZUF0dHJzLiQkZWxlbWVudD1qcUxpdGUoY29tcGlsZU5vZGUpLGRpcmVjdGl2ZSxkaXJlY3RpdmVOYW1lLCR0ZW1wbGF0ZSxyZXBsYWNlRGlyZWN0aXZlPW9yaWdpbmFsUmVwbGFjZURpcmVjdGl2ZSxjaGlsZFRyYW5zY2x1ZGVGbj10cmFuc2NsdWRlRm4sbGlua0ZuLGRpcmVjdGl2ZVZhbHVlO2Zvcih2YXIgaT0wLGlpPWRpcmVjdGl2ZXMubGVuZ3RoO2k8aWk7aSsrKXtkaXJlY3RpdmU9ZGlyZWN0aXZlc1tpXTt2YXIgYXR0clN0YXJ0PWRpcmVjdGl2ZS4kJHN0YXJ0O3ZhciBhdHRyRW5kPWRpcmVjdGl2ZS4kJGVuZDtpZihhdHRyU3RhcnQpeyRjb21waWxlTm9kZT1ncm91cFNjYW4oY29tcGlsZU5vZGUsYXR0clN0YXJ0LGF0dHJFbmQpO30KJHRlbXBsYXRlPXVuZGVmaW5lZDtpZih0ZXJtaW5hbFByaW9yaXR5PmRpcmVjdGl2ZS5wcmlvcml0eSl7YnJlYWs7fQppZihkaXJlY3RpdmVWYWx1ZT1kaXJlY3RpdmUuc2NvcGUpe25ld1Njb3BlRGlyZWN0aXZlPW5ld1Njb3BlRGlyZWN0aXZlfHxkaXJlY3RpdmU7aWYoIWRpcmVjdGl2ZS50ZW1wbGF0ZVVybCl7YXNzZXJ0Tm9EdXBsaWNhdGUoJ25ldy9pc29sYXRlZCBzY29wZScsbmV3SXNvbGF0ZVNjb3BlRGlyZWN0aXZlLGRpcmVjdGl2ZSwkY29tcGlsZU5vZGUpO2lmKGlzT2JqZWN0KGRpcmVjdGl2ZVZhbHVlKSl7bmV3SXNvbGF0ZVNjb3BlRGlyZWN0aXZlPWRpcmVjdGl2ZTt9fX0KZGlyZWN0aXZlTmFtZT1kaXJlY3RpdmUubmFtZTtpZighZGlyZWN0aXZlLnRlbXBsYXRlVXJsJiZkaXJlY3RpdmUuY29udHJvbGxlcil7ZGlyZWN0aXZlVmFsdWU9ZGlyZWN0aXZlLmNvbnRyb2xsZXI7Y29udHJvbGxlckRpcmVjdGl2ZXM9Y29udHJvbGxlckRpcmVjdGl2ZXN8fHt9O2Fzc2VydE5vRHVwbGljYXRlKCInIitkaXJlY3RpdmVOYW1lKyInIGNvbnRyb2xsZXIiLGNvbnRyb2xsZXJEaXJlY3RpdmVzW2RpcmVjdGl2ZU5hbWVdLGRpcmVjdGl2ZSwkY29tcGlsZU5vZGUpO2NvbnRyb2xsZXJEaXJlY3RpdmVzW2RpcmVjdGl2ZU5hbWVdPWRpcmVjdGl2ZTt9CmlmKGRpcmVjdGl2ZVZhbHVlPWRpcmVjdGl2ZS50cmFuc2NsdWRlKXtoYXNUcmFuc2NsdWRlRGlyZWN0aXZlPXRydWU7aWYoIWRpcmVjdGl2ZS4kJHRsYil7YXNzZXJ0Tm9EdXBsaWNhdGUoJ3RyYW5zY2x1c2lvbicsbm9uVGxiVHJhbnNjbHVkZURpcmVjdGl2ZSxkaXJlY3RpdmUsJGNvbXBpbGVOb2RlKTtub25UbGJUcmFuc2NsdWRlRGlyZWN0aXZlPWRpcmVjdGl2ZTt9CmlmKGRpcmVjdGl2ZVZhbHVlPT0nZWxlbWVudCcpe2hhc0VsZW1lbnRUcmFuc2NsdWRlRGlyZWN0aXZlPXRydWU7dGVybWluYWxQcmlvcml0eT1kaXJlY3RpdmUucHJpb3JpdHk7JHRlbXBsYXRlPWdyb3VwU2Nhbihjb21waWxlTm9kZSxhdHRyU3RhcnQsYXR0ckVuZCk7JGNvbXBpbGVOb2RlPXRlbXBsYXRlQXR0cnMuJCRlbGVtZW50PWpxTGl0ZShkb2N1bWVudC5jcmVhdGVDb21tZW50KCcgJytkaXJlY3RpdmVOYW1lKyc6ICcrCnRlbXBsYXRlQXR0cnNbZGlyZWN0aXZlTmFtZV0rJyAnKSk7Y29tcGlsZU5vZGU9JGNvbXBpbGVOb2RlWzBdO3JlcGxhY2VXaXRoKGpxQ29sbGVjdGlvbixqcUxpdGUoc2xpY2VBcmdzKCR0ZW1wbGF0ZSkpLGNvbXBpbGVOb2RlKTtjaGlsZFRyYW5zY2x1ZGVGbj1jb21waWxlKCR0ZW1wbGF0ZSx0cmFuc2NsdWRlRm4sdGVybWluYWxQcmlvcml0eSxyZXBsYWNlRGlyZWN0aXZlJiZyZXBsYWNlRGlyZWN0aXZlLm5hbWUse25vblRsYlRyYW5zY2x1ZGVEaXJlY3RpdmU6bm9uVGxiVHJhbnNjbHVkZURpcmVjdGl2ZX0pO31lbHNleyR0ZW1wbGF0ZT1qcUxpdGUoanFMaXRlQ2xvbmUoY29tcGlsZU5vZGUpKS5jb250ZW50cygpOyRjb21waWxlTm9kZS5lbXB0eSgpO2NoaWxkVHJhbnNjbHVkZUZuPWNvbXBpbGUoJHRlbXBsYXRlLHRyYW5zY2x1ZGVGbik7fX0KaWYoZGlyZWN0aXZlLnRlbXBsYXRlKXtoYXNUZW1wbGF0ZT10cnVlO2Fzc2VydE5vRHVwbGljYXRlKCd0ZW1wbGF0ZScsdGVtcGxhdGVEaXJlY3RpdmUsZGlyZWN0aXZlLCRjb21waWxlTm9kZSk7dGVtcGxhdGVEaXJlY3RpdmU9ZGlyZWN0aXZlO2RpcmVjdGl2ZVZhbHVlPShpc0Z1bmN0aW9uKGRpcmVjdGl2ZS50ZW1wbGF0ZSkpP2RpcmVjdGl2ZS50ZW1wbGF0ZSgkY29tcGlsZU5vZGUsdGVtcGxhdGVBdHRycyk6ZGlyZWN0aXZlLnRlbXBsYXRlO2RpcmVjdGl2ZVZhbHVlPWRlbm9ybWFsaXplVGVtcGxhdGUoZGlyZWN0aXZlVmFsdWUpO2lmKGRpcmVjdGl2ZS5yZXBsYWNlKXtyZXBsYWNlRGlyZWN0aXZlPWRpcmVjdGl2ZTtpZihqcUxpdGVJc1RleHROb2RlKGRpcmVjdGl2ZVZhbHVlKSl7JHRlbXBsYXRlPVtdO31lbHNleyR0ZW1wbGF0ZT1qcUxpdGUodHJpbShkaXJlY3RpdmVWYWx1ZSkpO30KY29tcGlsZU5vZGU9JHRlbXBsYXRlWzBdO2lmKCR0ZW1wbGF0ZS5sZW5ndGghPTF8fGNvbXBpbGVOb2RlLm5vZGVUeXBlIT09MSl7dGhyb3cgJGNvbXBpbGVNaW5FcnIoJ3RwbHJ0JywiVGVtcGxhdGUgZm9yIGRpcmVjdGl2ZSAnezB9JyBtdXN0IGhhdmUgZXhhY3RseSBvbmUgcm9vdCBlbGVtZW50LiB7MX0iLGRpcmVjdGl2ZU5hbWUsJycpO30KcmVwbGFjZVdpdGgoanFDb2xsZWN0aW9uLCRjb21waWxlTm9kZSxjb21waWxlTm9kZSk7dmFyIG5ld1RlbXBsYXRlQXR0cnM9eyRhdHRyOnt9fTt2YXIgdGVtcGxhdGVEaXJlY3RpdmVzPWNvbGxlY3REaXJlY3RpdmVzKGNvbXBpbGVOb2RlLFtdLG5ld1RlbXBsYXRlQXR0cnMpO3ZhciB1bnByb2Nlc3NlZERpcmVjdGl2ZXM9ZGlyZWN0aXZlcy5zcGxpY2UoaSsxLGRpcmVjdGl2ZXMubGVuZ3RoLShpKzEpKTtpZihuZXdJc29sYXRlU2NvcGVEaXJlY3RpdmUpe21hcmtEaXJlY3RpdmVzQXNJc29sYXRlKHRlbXBsYXRlRGlyZWN0aXZlcyk7fQpkaXJlY3RpdmVzPWRpcmVjdGl2ZXMuY29uY2F0KHRlbXBsYXRlRGlyZWN0aXZlcykuY29uY2F0KHVucHJvY2Vzc2VkRGlyZWN0aXZlcyk7bWVyZ2VUZW1wbGF0ZUF0dHJpYnV0ZXModGVtcGxhdGVBdHRycyxuZXdUZW1wbGF0ZUF0dHJzKTtpaT1kaXJlY3RpdmVzLmxlbmd0aDt9ZWxzZXskY29tcGlsZU5vZGUuaHRtbChkaXJlY3RpdmVWYWx1ZSk7fX0KaWYoZGlyZWN0aXZlLnRlbXBsYXRlVXJsKXtoYXNUZW1wbGF0ZT10cnVlO2Fzc2VydE5vRHVwbGljYXRlKCd0ZW1wbGF0ZScsdGVtcGxhdGVEaXJlY3RpdmUsZGlyZWN0aXZlLCRjb21waWxlTm9kZSk7dGVtcGxhdGVEaXJlY3RpdmU9ZGlyZWN0aXZlO2lmKGRpcmVjdGl2ZS5yZXBsYWNlKXtyZXBsYWNlRGlyZWN0aXZlPWRpcmVjdGl2ZTt9Cm5vZGVMaW5rRm49Y29tcGlsZVRlbXBsYXRlVXJsKGRpcmVjdGl2ZXMuc3BsaWNlKGksZGlyZWN0aXZlcy5sZW5ndGgtaSksJGNvbXBpbGVOb2RlLHRlbXBsYXRlQXR0cnMsanFDb2xsZWN0aW9uLGhhc1RyYW5zY2x1ZGVEaXJlY3RpdmUmJmNoaWxkVHJhbnNjbHVkZUZuLHByZUxpbmtGbnMscG9zdExpbmtGbnMse2NvbnRyb2xsZXJEaXJlY3RpdmVzOmNvbnRyb2xsZXJEaXJlY3RpdmVzLG5ld0lzb2xhdGVTY29wZURpcmVjdGl2ZTpuZXdJc29sYXRlU2NvcGVEaXJlY3RpdmUsdGVtcGxhdGVEaXJlY3RpdmU6dGVtcGxhdGVEaXJlY3RpdmUsbm9uVGxiVHJhbnNjbHVkZURpcmVjdGl2ZTpub25UbGJUcmFuc2NsdWRlRGlyZWN0aXZlfSk7aWk9ZGlyZWN0aXZlcy5sZW5ndGg7fWVsc2UgaWYoZGlyZWN0aXZlLmNvbXBpbGUpe3RyeXtsaW5rRm49ZGlyZWN0aXZlLmNvbXBpbGUoJGNvbXBpbGVOb2RlLHRlbXBsYXRlQXR0cnMsY2hpbGRUcmFuc2NsdWRlRm4pO2lmKGlzRnVuY3Rpb24obGlua0ZuKSl7YWRkTGlua0ZucyhudWxsLGxpbmtGbixhdHRyU3RhcnQsYXR0ckVuZCk7fWVsc2UgaWYobGlua0ZuKXthZGRMaW5rRm5zKGxpbmtGbi5wcmUsbGlua0ZuLnBvc3QsYXR0clN0YXJ0LGF0dHJFbmQpO319Y2F0Y2goZSl7JGV4Y2VwdGlvbkhhbmRsZXIoZSxzdGFydGluZ1RhZygkY29tcGlsZU5vZGUpKTt9fQppZihkaXJlY3RpdmUudGVybWluYWwpe25vZGVMaW5rRm4udGVybWluYWw9dHJ1ZTt0ZXJtaW5hbFByaW9yaXR5PU1hdGgubWF4KHRlcm1pbmFsUHJpb3JpdHksZGlyZWN0aXZlLnByaW9yaXR5KTt9fQpub2RlTGlua0ZuLnNjb3BlPW5ld1Njb3BlRGlyZWN0aXZlJiZuZXdTY29wZURpcmVjdGl2ZS5zY29wZT09PXRydWU7bm9kZUxpbmtGbi50cmFuc2NsdWRlT25UaGlzRWxlbWVudD1oYXNUcmFuc2NsdWRlRGlyZWN0aXZlO25vZGVMaW5rRm4udGVtcGxhdGVPblRoaXNFbGVtZW50PWhhc1RlbXBsYXRlO25vZGVMaW5rRm4udHJhbnNjbHVkZT1jaGlsZFRyYW5zY2x1ZGVGbjtwcmV2aW91c0NvbXBpbGVDb250ZXh0Lmhhc0VsZW1lbnRUcmFuc2NsdWRlRGlyZWN0aXZlPWhhc0VsZW1lbnRUcmFuc2NsdWRlRGlyZWN0aXZlO3JldHVybiBub2RlTGlua0ZuO2Z1bmN0aW9uIGFkZExpbmtGbnMocHJlLHBvc3QsYXR0clN0YXJ0LGF0dHJFbmQpe2lmKHByZSl7aWYoYXR0clN0YXJ0KXByZT1ncm91cEVsZW1lbnRzTGlua0ZuV3JhcHBlcihwcmUsYXR0clN0YXJ0LGF0dHJFbmQpO3ByZS5yZXF1aXJlPWRpcmVjdGl2ZS5yZXF1aXJlO3ByZS5kaXJlY3RpdmVOYW1lPWRpcmVjdGl2ZU5hbWU7aWYobmV3SXNvbGF0ZVNjb3BlRGlyZWN0aXZlPT09ZGlyZWN0aXZlfHxkaXJlY3RpdmUuJCRpc29sYXRlU2NvcGUpe3ByZT1jbG9uZUFuZEFubm90YXRlRm4ocHJlLHtpc29sYXRlU2NvcGU6dHJ1ZX0pO30KcHJlTGlua0Zucy5wdXNoKHByZSk7fQppZihwb3N0KXtpZihhdHRyU3RhcnQpcG9zdD1ncm91cEVsZW1lbnRzTGlua0ZuV3JhcHBlcihwb3N0LGF0dHJTdGFydCxhdHRyRW5kKTtwb3N0LnJlcXVpcmU9ZGlyZWN0aXZlLnJlcXVpcmU7cG9zdC5kaXJlY3RpdmVOYW1lPWRpcmVjdGl2ZU5hbWU7aWYobmV3SXNvbGF0ZVNjb3BlRGlyZWN0aXZlPT09ZGlyZWN0aXZlfHxkaXJlY3RpdmUuJCRpc29sYXRlU2NvcGUpe3Bvc3Q9Y2xvbmVBbmRBbm5vdGF0ZUZuKHBvc3Qse2lzb2xhdGVTY29wZTp0cnVlfSk7fQpwb3N0TGlua0Zucy5wdXNoKHBvc3QpO319CmZ1bmN0aW9uIGdldENvbnRyb2xsZXJzKGRpcmVjdGl2ZU5hbWUscmVxdWlyZSwkZWxlbWVudCxlbGVtZW50Q29udHJvbGxlcnMpe3ZhciB2YWx1ZSxyZXRyaWV2YWxNZXRob2Q9J2RhdGEnLG9wdGlvbmFsPWZhbHNlO2lmKGlzU3RyaW5nKHJlcXVpcmUpKXt3aGlsZSgodmFsdWU9cmVxdWlyZS5jaGFyQXQoMCkpPT0nXid8fHZhbHVlPT0nPycpe3JlcXVpcmU9cmVxdWlyZS5zdWJzdHIoMSk7aWYodmFsdWU9PSdeJyl7cmV0cmlldmFsTWV0aG9kPSdpbmhlcml0ZWREYXRhJzt9Cm9wdGlvbmFsPW9wdGlvbmFsfHx2YWx1ZT09Jz8nO30KdmFsdWU9bnVsbDtpZihlbGVtZW50Q29udHJvbGxlcnMmJnJldHJpZXZhbE1ldGhvZD09PSdkYXRhJyl7dmFsdWU9ZWxlbWVudENvbnRyb2xsZXJzW3JlcXVpcmVdO30KdmFsdWU9dmFsdWV8fCRlbGVtZW50W3JldHJpZXZhbE1ldGhvZF0oJyQnK3JlcXVpcmUrJ0NvbnRyb2xsZXInKTtpZighdmFsdWUmJiFvcHRpb25hbCl7dGhyb3cgJGNvbXBpbGVNaW5FcnIoJ2N0cmVxJywiQ29udHJvbGxlciAnezB9JywgcmVxdWlyZWQgYnkgZGlyZWN0aXZlICd7MX0nLCBjYW4ndCBiZSBmb3VuZCEiLHJlcXVpcmUsZGlyZWN0aXZlTmFtZSk7fQpyZXR1cm4gdmFsdWU7fWVsc2UgaWYoaXNBcnJheShyZXF1aXJlKSl7dmFsdWU9W107Zm9yRWFjaChyZXF1aXJlLGZ1bmN0aW9uKHJlcXVpcmUpe3ZhbHVlLnB1c2goZ2V0Q29udHJvbGxlcnMoZGlyZWN0aXZlTmFtZSxyZXF1aXJlLCRlbGVtZW50LGVsZW1lbnRDb250cm9sbGVycykpO30pO30KcmV0dXJuIHZhbHVlO30KZnVuY3Rpb24gbm9kZUxpbmtGbihjaGlsZExpbmtGbixzY29wZSxsaW5rTm9kZSwkcm9vdEVsZW1lbnQsYm91bmRUcmFuc2NsdWRlRm4pe3ZhciBhdHRycywkZWxlbWVudCxpLGlpLGxpbmtGbixjb250cm9sbGVyLGlzb2xhdGVTY29wZSxlbGVtZW50Q29udHJvbGxlcnM9e30sdHJhbnNjbHVkZUZuO2lmKGNvbXBpbGVOb2RlPT09bGlua05vZGUpe2F0dHJzPXRlbXBsYXRlQXR0cnM7fWVsc2V7YXR0cnM9c2hhbGxvd0NvcHkodGVtcGxhdGVBdHRycyxuZXcgQXR0cmlidXRlcyhqcUxpdGUobGlua05vZGUpLHRlbXBsYXRlQXR0cnMuJGF0dHIpKTt9CiRlbGVtZW50PWF0dHJzLiQkZWxlbWVudDtpZihuZXdJc29sYXRlU2NvcGVEaXJlY3RpdmUpe3ZhciBMT0NBTF9SRUdFWFA9L15ccyooW0A9Jl0pKFw/PylccyooXHcqKVxzKiQvO3ZhciAkbGlua05vZGU9anFMaXRlKGxpbmtOb2RlKTtpc29sYXRlU2NvcGU9c2NvcGUuJG5ldyh0cnVlKTtpZih0ZW1wbGF0ZURpcmVjdGl2ZSYmKHRlbXBsYXRlRGlyZWN0aXZlPT09bmV3SXNvbGF0ZVNjb3BlRGlyZWN0aXZlfHx0ZW1wbGF0ZURpcmVjdGl2ZT09PW5ld0lzb2xhdGVTY29wZURpcmVjdGl2ZS4kJG9yaWdpbmFsRGlyZWN0aXZlKSl7JGxpbmtOb2RlLmRhdGEoJyRpc29sYXRlU2NvcGUnLGlzb2xhdGVTY29wZSk7fWVsc2V7JGxpbmtOb2RlLmRhdGEoJyRpc29sYXRlU2NvcGVOb1RlbXBsYXRlJyxpc29sYXRlU2NvcGUpO30Kc2FmZUFkZENsYXNzKCRsaW5rTm9kZSwnbmctaXNvbGF0ZS1zY29wZScpO2ZvckVhY2gobmV3SXNvbGF0ZVNjb3BlRGlyZWN0aXZlLnNjb3BlLGZ1bmN0aW9uKGRlZmluaXRpb24sc2NvcGVOYW1lKXt2YXIgbWF0Y2g9ZGVmaW5pdGlvbi5tYXRjaChMT0NBTF9SRUdFWFApfHxbXSxhdHRyTmFtZT1tYXRjaFszXXx8c2NvcGVOYW1lLG9wdGlvbmFsPShtYXRjaFsyXT09Jz8nKSxtb2RlPW1hdGNoWzFdLGxhc3RWYWx1ZSxwYXJlbnRHZXQscGFyZW50U2V0LGNvbXBhcmU7aXNvbGF0ZVNjb3BlLiQkaXNvbGF0ZUJpbmRpbmdzW3Njb3BlTmFtZV09bW9kZSthdHRyTmFtZTtzd2l0Y2gobW9kZSl7Y2FzZSdAJzphdHRycy4kb2JzZXJ2ZShhdHRyTmFtZSxmdW5jdGlvbih2YWx1ZSl7aXNvbGF0ZVNjb3BlW3Njb3BlTmFtZV09dmFsdWU7fSk7YXR0cnMuJCRvYnNlcnZlcnNbYXR0ck5hbWVdLiQkc2NvcGU9c2NvcGU7aWYoYXR0cnNbYXR0ck5hbWVdKXtpc29sYXRlU2NvcGVbc2NvcGVOYW1lXT0kaW50ZXJwb2xhdGUoYXR0cnNbYXR0ck5hbWVdKShzY29wZSk7fQpicmVhaztjYXNlJz0nOmlmKG9wdGlvbmFsJiYhYXR0cnNbYXR0ck5hbWVdKXtyZXR1cm47fQpwYXJlbnRHZXQ9JHBhcnNlKGF0dHJzW2F0dHJOYW1lXSk7aWYocGFyZW50R2V0LmxpdGVyYWwpe2NvbXBhcmU9ZXF1YWxzO31lbHNle2NvbXBhcmU9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT09PWI7fTt9CnBhcmVudFNldD1wYXJlbnRHZXQuYXNzaWdufHxmdW5jdGlvbigpe2xhc3RWYWx1ZT1pc29sYXRlU2NvcGVbc2NvcGVOYW1lXT1wYXJlbnRHZXQoc2NvcGUpO3Rocm93ICRjb21waWxlTWluRXJyKCdub25hc3NpZ24nLCJFeHByZXNzaW9uICd7MH0nIHVzZWQgd2l0aCBkaXJlY3RpdmUgJ3sxfScgaXMgbm9uLWFzc2lnbmFibGUhIixhdHRyc1thdHRyTmFtZV0sbmV3SXNvbGF0ZVNjb3BlRGlyZWN0aXZlLm5hbWUpO307bGFzdFZhbHVlPWlzb2xhdGVTY29wZVtzY29wZU5hbWVdPXBhcmVudEdldChzY29wZSk7aXNvbGF0ZVNjb3BlLiR3YXRjaChmdW5jdGlvbiBwYXJlbnRWYWx1ZVdhdGNoKCl7dmFyIHBhcmVudFZhbHVlPXBhcmVudEdldChzY29wZSk7aWYoIWNvbXBhcmUocGFyZW50VmFsdWUsaXNvbGF0ZVNjb3BlW3Njb3BlTmFtZV0pKXtpZighY29tcGFyZShwYXJlbnRWYWx1ZSxsYXN0VmFsdWUpKXtpc29sYXRlU2NvcGVbc2NvcGVOYW1lXT1wYXJlbnRWYWx1ZTt9ZWxzZXtwYXJlbnRTZXQoc2NvcGUscGFyZW50VmFsdWU9aXNvbGF0ZVNjb3BlW3Njb3BlTmFtZV0pO319CnJldHVybiBsYXN0VmFsdWU9cGFyZW50VmFsdWU7fSxudWxsLHBhcmVudEdldC5saXRlcmFsKTticmVhaztjYXNlJyYnOnBhcmVudEdldD0kcGFyc2UoYXR0cnNbYXR0ck5hbWVdKTtpc29sYXRlU2NvcGVbc2NvcGVOYW1lXT1mdW5jdGlvbihsb2NhbHMpe3JldHVybiBwYXJlbnRHZXQoc2NvcGUsbG9jYWxzKTt9O2JyZWFrO2RlZmF1bHQ6dGhyb3cgJGNvbXBpbGVNaW5FcnIoJ2lzY3AnLCJJbnZhbGlkIGlzb2xhdGUgc2NvcGUgZGVmaW5pdGlvbiBmb3IgZGlyZWN0aXZlICd7MH0nLiIrIiBEZWZpbml0aW9uOiB7Li4uIHsxfTogJ3syfScgLi4ufSIsbmV3SXNvbGF0ZVNjb3BlRGlyZWN0aXZlLm5hbWUsc2NvcGVOYW1lLGRlZmluaXRpb24pO319KTt9CnRyYW5zY2x1ZGVGbj1ib3VuZFRyYW5zY2x1ZGVGbiYmY29udHJvbGxlcnNCb3VuZFRyYW5zY2x1ZGU7aWYoY29udHJvbGxlckRpcmVjdGl2ZXMpe2ZvckVhY2goY29udHJvbGxlckRpcmVjdGl2ZXMsZnVuY3Rpb24oZGlyZWN0aXZlKXt2YXIgbG9jYWxzPXskc2NvcGU6ZGlyZWN0aXZlPT09bmV3SXNvbGF0ZVNjb3BlRGlyZWN0aXZlfHxkaXJlY3RpdmUuJCRpc29sYXRlU2NvcGU/aXNvbGF0ZVNjb3BlOnNjb3BlLCRlbGVtZW50OiRlbGVtZW50LCRhdHRyczphdHRycywkdHJhbnNjbHVkZTp0cmFuc2NsdWRlRm59LGNvbnRyb2xsZXJJbnN0YW5jZTtjb250cm9sbGVyPWRpcmVjdGl2ZS5jb250cm9sbGVyO2lmKGNvbnRyb2xsZXI9PSdAJyl7Y29udHJvbGxlcj1hdHRyc1tkaXJlY3RpdmUubmFtZV07fQpjb250cm9sbGVySW5zdGFuY2U9JGNvbnRyb2xsZXIoY29udHJvbGxlcixsb2NhbHMpO2VsZW1lbnRDb250cm9sbGVyc1tkaXJlY3RpdmUubmFtZV09Y29udHJvbGxlckluc3RhbmNlO2lmKCFoYXNFbGVtZW50VHJhbnNjbHVkZURpcmVjdGl2ZSl7JGVsZW1lbnQuZGF0YSgnJCcrZGlyZWN0aXZlLm5hbWUrJ0NvbnRyb2xsZXInLGNvbnRyb2xsZXJJbnN0YW5jZSk7fQppZihkaXJlY3RpdmUuY29udHJvbGxlckFzKXtsb2NhbHMuJHNjb3BlW2RpcmVjdGl2ZS5jb250cm9sbGVyQXNdPWNvbnRyb2xsZXJJbnN0YW5jZTt9fSk7fQpmb3IoaT0wLGlpPXByZUxpbmtGbnMubGVuZ3RoO2k8aWk7aSsrKXt0cnl7bGlua0ZuPXByZUxpbmtGbnNbaV07bGlua0ZuKGxpbmtGbi5pc29sYXRlU2NvcGU/aXNvbGF0ZVNjb3BlOnNjb3BlLCRlbGVtZW50LGF0dHJzLGxpbmtGbi5yZXF1aXJlJiZnZXRDb250cm9sbGVycyhsaW5rRm4uZGlyZWN0aXZlTmFtZSxsaW5rRm4ucmVxdWlyZSwkZWxlbWVudCxlbGVtZW50Q29udHJvbGxlcnMpLHRyYW5zY2x1ZGVGbik7fWNhdGNoKGUpeyRleGNlcHRpb25IYW5kbGVyKGUsc3RhcnRpbmdUYWcoJGVsZW1lbnQpKTt9fQp2YXIgc2NvcGVUb0NoaWxkPXNjb3BlO2lmKG5ld0lzb2xhdGVTY29wZURpcmVjdGl2ZSYmKG5ld0lzb2xhdGVTY29wZURpcmVjdGl2ZS50ZW1wbGF0ZXx8bmV3SXNvbGF0ZVNjb3BlRGlyZWN0aXZlLnRlbXBsYXRlVXJsPT09bnVsbCkpe3Njb3BlVG9DaGlsZD1pc29sYXRlU2NvcGU7fQpjaGlsZExpbmtGbiYmY2hpbGRMaW5rRm4oc2NvcGVUb0NoaWxkLGxpbmtOb2RlLmNoaWxkTm9kZXMsdW5kZWZpbmVkLGJvdW5kVHJhbnNjbHVkZUZuKTtmb3IoaT1wb3N0TGlua0Zucy5sZW5ndGgtMTtpPj0wO2ktLSl7dHJ5e2xpbmtGbj1wb3N0TGlua0Zuc1tpXTtsaW5rRm4obGlua0ZuLmlzb2xhdGVTY29wZT9pc29sYXRlU2NvcGU6c2NvcGUsJGVsZW1lbnQsYXR0cnMsbGlua0ZuLnJlcXVpcmUmJmdldENvbnRyb2xsZXJzKGxpbmtGbi5kaXJlY3RpdmVOYW1lLGxpbmtGbi5yZXF1aXJlLCRlbGVtZW50LGVsZW1lbnRDb250cm9sbGVycyksdHJhbnNjbHVkZUZuKTt9Y2F0Y2goZSl7JGV4Y2VwdGlvbkhhbmRsZXIoZSxzdGFydGluZ1RhZygkZWxlbWVudCkpO319CmZ1bmN0aW9uIGNvbnRyb2xsZXJzQm91bmRUcmFuc2NsdWRlKHNjb3BlLGNsb25lQXR0YWNoRm4pe3ZhciB0cmFuc2NsdWRlQ29udHJvbGxlcnM7aWYoYXJndW1lbnRzLmxlbmd0aDwyKXtjbG9uZUF0dGFjaEZuPXNjb3BlO3Njb3BlPXVuZGVmaW5lZDt9CmlmKGhhc0VsZW1lbnRUcmFuc2NsdWRlRGlyZWN0aXZlKXt0cmFuc2NsdWRlQ29udHJvbGxlcnM9ZWxlbWVudENvbnRyb2xsZXJzO30KcmV0dXJuIGJvdW5kVHJhbnNjbHVkZUZuKHNjb3BlLGNsb25lQXR0YWNoRm4sdHJhbnNjbHVkZUNvbnRyb2xsZXJzKTt9fX0KZnVuY3Rpb24gbWFya0RpcmVjdGl2ZXNBc0lzb2xhdGUoZGlyZWN0aXZlcyl7Zm9yKHZhciBqPTAsamo9ZGlyZWN0aXZlcy5sZW5ndGg7ajxqajtqKyspe2RpcmVjdGl2ZXNbal09aW5oZXJpdChkaXJlY3RpdmVzW2pdLHskJGlzb2xhdGVTY29wZTp0cnVlfSk7fX0KZnVuY3Rpb24gYWRkRGlyZWN0aXZlKHREaXJlY3RpdmVzLG5hbWUsbG9jYXRpb24sbWF4UHJpb3JpdHksaWdub3JlRGlyZWN0aXZlLHN0YXJ0QXR0ck5hbWUsZW5kQXR0ck5hbWUpe2lmKG5hbWU9PT1pZ25vcmVEaXJlY3RpdmUpcmV0dXJuIG51bGw7dmFyIG1hdGNoPW51bGw7aWYoaGFzRGlyZWN0aXZlcy5oYXNPd25Qcm9wZXJ0eShuYW1lKSl7Zm9yKHZhciBkaXJlY3RpdmUsZGlyZWN0aXZlcz0kaW5qZWN0b3IuZ2V0KG5hbWUrU3VmZml4KSxpPTAsaWk9ZGlyZWN0aXZlcy5sZW5ndGg7aTxpaTtpKyspe3RyeXtkaXJlY3RpdmU9ZGlyZWN0aXZlc1tpXTtpZigobWF4UHJpb3JpdHk9PT11bmRlZmluZWR8fG1heFByaW9yaXR5PmRpcmVjdGl2ZS5wcmlvcml0eSkmJmRpcmVjdGl2ZS5yZXN0cmljdC5pbmRleE9mKGxvY2F0aW9uKSE9LTEpe2lmKHN0YXJ0QXR0ck5hbWUpe2RpcmVjdGl2ZT1pbmhlcml0KGRpcmVjdGl2ZSx7JCRzdGFydDpzdGFydEF0dHJOYW1lLCQkZW5kOmVuZEF0dHJOYW1lfSk7fQp0RGlyZWN0aXZlcy5wdXNoKGRpcmVjdGl2ZSk7bWF0Y2g9ZGlyZWN0aXZlO319Y2F0Y2goZSl7JGV4Y2VwdGlvbkhhbmRsZXIoZSk7fX19CnJldHVybiBtYXRjaDt9CmZ1bmN0aW9uIG1lcmdlVGVtcGxhdGVBdHRyaWJ1dGVzKGRzdCxzcmMpe3ZhciBzcmNBdHRyPXNyYy4kYXR0cixkc3RBdHRyPWRzdC4kYXR0ciwkZWxlbWVudD1kc3QuJCRlbGVtZW50O2ZvckVhY2goZHN0LGZ1bmN0aW9uKHZhbHVlLGtleSl7aWYoa2V5LmNoYXJBdCgwKSE9JyQnKXtpZihzcmNba2V5XSYmc3JjW2tleV0hPT12YWx1ZSl7dmFsdWUrPShrZXk9PT0nc3R5bGUnPyc7JzonICcpK3NyY1trZXldO30KZHN0LiRzZXQoa2V5LHZhbHVlLHRydWUsc3JjQXR0cltrZXldKTt9fSk7Zm9yRWFjaChzcmMsZnVuY3Rpb24odmFsdWUsa2V5KXtpZihrZXk9PSdjbGFzcycpe3NhZmVBZGRDbGFzcygkZWxlbWVudCx2YWx1ZSk7ZHN0WydjbGFzcyddPShkc3RbJ2NsYXNzJ10/ZHN0WydjbGFzcyddKycgJzonJykrdmFsdWU7fWVsc2UgaWYoa2V5PT0nc3R5bGUnKXskZWxlbWVudC5hdHRyKCdzdHlsZScsJGVsZW1lbnQuYXR0cignc3R5bGUnKSsnOycrdmFsdWUpO2RzdFsnc3R5bGUnXT0oZHN0WydzdHlsZSddP2RzdFsnc3R5bGUnXSsnOyc6JycpK3ZhbHVlO31lbHNlIGlmKGtleS5jaGFyQXQoMCkhPSckJyYmIWRzdC5oYXNPd25Qcm9wZXJ0eShrZXkpKXtkc3Rba2V5XT12YWx1ZTtkc3RBdHRyW2tleV09c3JjQXR0cltrZXldO319KTt9CmZ1bmN0aW9uIGNvbXBpbGVUZW1wbGF0ZVVybChkaXJlY3RpdmVzLCRjb21waWxlTm9kZSx0QXR0cnMsJHJvb3RFbGVtZW50LGNoaWxkVHJhbnNjbHVkZUZuLHByZUxpbmtGbnMscG9zdExpbmtGbnMscHJldmlvdXNDb21waWxlQ29udGV4dCl7dmFyIGxpbmtRdWV1ZT1bXSxhZnRlclRlbXBsYXRlTm9kZUxpbmtGbixhZnRlclRlbXBsYXRlQ2hpbGRMaW5rRm4sYmVmb3JlVGVtcGxhdGVDb21waWxlTm9kZT0kY29tcGlsZU5vZGVbMF0sb3JpZ0FzeW5jRGlyZWN0aXZlPWRpcmVjdGl2ZXMuc2hpZnQoKSxkZXJpdmVkU3luY0RpcmVjdGl2ZT1leHRlbmQoe30sb3JpZ0FzeW5jRGlyZWN0aXZlLHt0ZW1wbGF0ZVVybDpudWxsLHRyYW5zY2x1ZGU6bnVsbCxyZXBsYWNlOm51bGwsJCRvcmlnaW5hbERpcmVjdGl2ZTpvcmlnQXN5bmNEaXJlY3RpdmV9KSx0ZW1wbGF0ZVVybD0oaXNGdW5jdGlvbihvcmlnQXN5bmNEaXJlY3RpdmUudGVtcGxhdGVVcmwpKT9vcmlnQXN5bmNEaXJlY3RpdmUudGVtcGxhdGVVcmwoJGNvbXBpbGVOb2RlLHRBdHRycyk6b3JpZ0FzeW5jRGlyZWN0aXZlLnRlbXBsYXRlVXJsOyRjb21waWxlTm9kZS5lbXB0eSgpOyRodHRwLmdldCgkc2NlLmdldFRydXN0ZWRSZXNvdXJjZVVybCh0ZW1wbGF0ZVVybCkse2NhY2hlOiR0ZW1wbGF0ZUNhY2hlfSkuc3VjY2VzcyhmdW5jdGlvbihjb250ZW50KXt2YXIgY29tcGlsZU5vZGUsdGVtcFRlbXBsYXRlQXR0cnMsJHRlbXBsYXRlLGNoaWxkQm91bmRUcmFuc2NsdWRlRm47Y29udGVudD1kZW5vcm1hbGl6ZVRlbXBsYXRlKGNvbnRlbnQpO2lmKG9yaWdBc3luY0RpcmVjdGl2ZS5yZXBsYWNlKXtpZihqcUxpdGVJc1RleHROb2RlKGNvbnRlbnQpKXskdGVtcGxhdGU9W107fWVsc2V7JHRlbXBsYXRlPWpxTGl0ZSh0cmltKGNvbnRlbnQpKTt9CmNvbXBpbGVOb2RlPSR0ZW1wbGF0ZVswXTtpZigkdGVtcGxhdGUubGVuZ3RoIT0xfHxjb21waWxlTm9kZS5ub2RlVHlwZSE9PTEpe3Rocm93ICRjb21waWxlTWluRXJyKCd0cGxydCcsIlRlbXBsYXRlIGZvciBkaXJlY3RpdmUgJ3swfScgbXVzdCBoYXZlIGV4YWN0bHkgb25lIHJvb3QgZWxlbWVudC4gezF9IixvcmlnQXN5bmNEaXJlY3RpdmUubmFtZSx0ZW1wbGF0ZVVybCk7fQp0ZW1wVGVtcGxhdGVBdHRycz17JGF0dHI6e319O3JlcGxhY2VXaXRoKCRyb290RWxlbWVudCwkY29tcGlsZU5vZGUsY29tcGlsZU5vZGUpO3ZhciB0ZW1wbGF0ZURpcmVjdGl2ZXM9Y29sbGVjdERpcmVjdGl2ZXMoY29tcGlsZU5vZGUsW10sdGVtcFRlbXBsYXRlQXR0cnMpO2lmKGlzT2JqZWN0KG9yaWdBc3luY0RpcmVjdGl2ZS5zY29wZSkpe21hcmtEaXJlY3RpdmVzQXNJc29sYXRlKHRlbXBsYXRlRGlyZWN0aXZlcyk7fQpkaXJlY3RpdmVzPXRlbXBsYXRlRGlyZWN0aXZlcy5jb25jYXQoZGlyZWN0aXZlcyk7bWVyZ2VUZW1wbGF0ZUF0dHJpYnV0ZXModEF0dHJzLHRlbXBUZW1wbGF0ZUF0dHJzKTt9ZWxzZXtjb21waWxlTm9kZT1iZWZvcmVUZW1wbGF0ZUNvbXBpbGVOb2RlOyRjb21waWxlTm9kZS5odG1sKGNvbnRlbnQpO30KZGlyZWN0aXZlcy51bnNoaWZ0KGRlcml2ZWRTeW5jRGlyZWN0aXZlKTthZnRlclRlbXBsYXRlTm9kZUxpbmtGbj1hcHBseURpcmVjdGl2ZXNUb05vZGUoZGlyZWN0aXZlcyxjb21waWxlTm9kZSx0QXR0cnMsY2hpbGRUcmFuc2NsdWRlRm4sJGNvbXBpbGVOb2RlLG9yaWdBc3luY0RpcmVjdGl2ZSxwcmVMaW5rRm5zLHBvc3RMaW5rRm5zLHByZXZpb3VzQ29tcGlsZUNvbnRleHQpO2ZvckVhY2goJHJvb3RFbGVtZW50LGZ1bmN0aW9uKG5vZGUsaSl7aWYobm9kZT09Y29tcGlsZU5vZGUpeyRyb290RWxlbWVudFtpXT0kY29tcGlsZU5vZGVbMF07fX0pO2FmdGVyVGVtcGxhdGVDaGlsZExpbmtGbj1jb21waWxlTm9kZXMoJGNvbXBpbGVOb2RlWzBdLmNoaWxkTm9kZXMsY2hpbGRUcmFuc2NsdWRlRm4pO3doaWxlKGxpbmtRdWV1ZS5sZW5ndGgpe3ZhciBzY29wZT1saW5rUXVldWUuc2hpZnQoKSxiZWZvcmVUZW1wbGF0ZUxpbmtOb2RlPWxpbmtRdWV1ZS5zaGlmdCgpLGxpbmtSb290RWxlbWVudD1saW5rUXVldWUuc2hpZnQoKSxib3VuZFRyYW5zY2x1ZGVGbj1saW5rUXVldWUuc2hpZnQoKSxsaW5rTm9kZT0kY29tcGlsZU5vZGVbMF07aWYoYmVmb3JlVGVtcGxhdGVMaW5rTm9kZSE9PWJlZm9yZVRlbXBsYXRlQ29tcGlsZU5vZGUpe3ZhciBvbGRDbGFzc2VzPWJlZm9yZVRlbXBsYXRlTGlua05vZGUuY2xhc3NOYW1lO2lmKCEocHJldmlvdXNDb21waWxlQ29udGV4dC5oYXNFbGVtZW50VHJhbnNjbHVkZURpcmVjdGl2ZSYmb3JpZ0FzeW5jRGlyZWN0aXZlLnJlcGxhY2UpKXtsaW5rTm9kZT1qcUxpdGVDbG9uZShjb21waWxlTm9kZSk7fQpyZXBsYWNlV2l0aChsaW5rUm9vdEVsZW1lbnQsanFMaXRlKGJlZm9yZVRlbXBsYXRlTGlua05vZGUpLGxpbmtOb2RlKTtzYWZlQWRkQ2xhc3MoanFMaXRlKGxpbmtOb2RlKSxvbGRDbGFzc2VzKTt9CmlmKGFmdGVyVGVtcGxhdGVOb2RlTGlua0ZuLnRyYW5zY2x1ZGVPblRoaXNFbGVtZW50KXtjaGlsZEJvdW5kVHJhbnNjbHVkZUZuPWNyZWF0ZUJvdW5kVHJhbnNjbHVkZUZuKHNjb3BlLGFmdGVyVGVtcGxhdGVOb2RlTGlua0ZuLnRyYW5zY2x1ZGUsYm91bmRUcmFuc2NsdWRlRm4pO31lbHNle2NoaWxkQm91bmRUcmFuc2NsdWRlRm49Ym91bmRUcmFuc2NsdWRlRm47fQphZnRlclRlbXBsYXRlTm9kZUxpbmtGbihhZnRlclRlbXBsYXRlQ2hpbGRMaW5rRm4sc2NvcGUsbGlua05vZGUsJHJvb3RFbGVtZW50LGNoaWxkQm91bmRUcmFuc2NsdWRlRm4pO30KbGlua1F1ZXVlPW51bGw7fSkuZXJyb3IoZnVuY3Rpb24ocmVzcG9uc2UsY29kZSxoZWFkZXJzLGNvbmZpZyl7dGhyb3cgJGNvbXBpbGVNaW5FcnIoJ3RwbG9hZCcsJ0ZhaWxlZCB0byBsb2FkIHRlbXBsYXRlOiB7MH0nLGNvbmZpZy51cmwpO30pO3JldHVybiBmdW5jdGlvbiBkZWxheWVkTm9kZUxpbmtGbihpZ25vcmVDaGlsZExpbmtGbixzY29wZSxub2RlLHJvb3RFbGVtZW50LGJvdW5kVHJhbnNjbHVkZUZuKXt2YXIgY2hpbGRCb3VuZFRyYW5zY2x1ZGVGbj1ib3VuZFRyYW5zY2x1ZGVGbjtpZihsaW5rUXVldWUpe2xpbmtRdWV1ZS5wdXNoKHNjb3BlKTtsaW5rUXVldWUucHVzaChub2RlKTtsaW5rUXVldWUucHVzaChyb290RWxlbWVudCk7bGlua1F1ZXVlLnB1c2goY2hpbGRCb3VuZFRyYW5zY2x1ZGVGbik7fWVsc2V7aWYoYWZ0ZXJUZW1wbGF0ZU5vZGVMaW5rRm4udHJhbnNjbHVkZU9uVGhpc0VsZW1lbnQpe2NoaWxkQm91bmRUcmFuc2NsdWRlRm49Y3JlYXRlQm91bmRUcmFuc2NsdWRlRm4oc2NvcGUsYWZ0ZXJUZW1wbGF0ZU5vZGVMaW5rRm4udHJhbnNjbHVkZSxib3VuZFRyYW5zY2x1ZGVGbik7fQphZnRlclRlbXBsYXRlTm9kZUxpbmtGbihhZnRlclRlbXBsYXRlQ2hpbGRMaW5rRm4sc2NvcGUsbm9kZSxyb290RWxlbWVudCxjaGlsZEJvdW5kVHJhbnNjbHVkZUZuKTt9fTt9CmZ1bmN0aW9uIGJ5UHJpb3JpdHkoYSxiKXt2YXIgZGlmZj1iLnByaW9yaXR5LWEucHJpb3JpdHk7aWYoZGlmZiE9PTApcmV0dXJuIGRpZmY7aWYoYS5uYW1lIT09Yi5uYW1lKXJldHVybihhLm5hbWU8Yi5uYW1lKT8tMToxO3JldHVybiBhLmluZGV4LWIuaW5kZXg7fQpmdW5jdGlvbiBhc3NlcnROb0R1cGxpY2F0ZSh3aGF0LHByZXZpb3VzRGlyZWN0aXZlLGRpcmVjdGl2ZSxlbGVtZW50KXtpZihwcmV2aW91c0RpcmVjdGl2ZSl7dGhyb3cgJGNvbXBpbGVNaW5FcnIoJ211bHRpZGlyJywnTXVsdGlwbGUgZGlyZWN0aXZlcyBbezB9LCB7MX1dIGFza2luZyBmb3IgezJ9IG9uOiB7M30nLHByZXZpb3VzRGlyZWN0aXZlLm5hbWUsZGlyZWN0aXZlLm5hbWUsd2hhdCxzdGFydGluZ1RhZyhlbGVtZW50KSk7fX0KZnVuY3Rpb24gYWRkVGV4dEludGVycG9sYXRlRGlyZWN0aXZlKGRpcmVjdGl2ZXMsdGV4dCl7dmFyIGludGVycG9sYXRlRm49JGludGVycG9sYXRlKHRleHQsdHJ1ZSk7aWYoaW50ZXJwb2xhdGVGbil7ZGlyZWN0aXZlcy5wdXNoKHtwcmlvcml0eTowLGNvbXBpbGU6ZnVuY3Rpb24gdGV4dEludGVycG9sYXRlQ29tcGlsZUZuKHRlbXBsYXRlTm9kZSl7dmFyIHBhcmVudD10ZW1wbGF0ZU5vZGUucGFyZW50KCksaGFzQ29tcGlsZVBhcmVudD1wYXJlbnQubGVuZ3RoO2lmKGhhc0NvbXBpbGVQYXJlbnQpc2FmZUFkZENsYXNzKHRlbXBsYXRlTm9kZS5wYXJlbnQoKSwnbmctYmluZGluZycpO3JldHVybiBmdW5jdGlvbiB0ZXh0SW50ZXJwb2xhdGVMaW5rRm4oc2NvcGUsbm9kZSl7dmFyIHBhcmVudD1ub2RlLnBhcmVudCgpLGJpbmRpbmdzPXBhcmVudC5kYXRhKCckYmluZGluZycpfHxbXTtiaW5kaW5ncy5wdXNoKGludGVycG9sYXRlRm4pO3BhcmVudC5kYXRhKCckYmluZGluZycsYmluZGluZ3MpO2lmKCFoYXNDb21waWxlUGFyZW50KXNhZmVBZGRDbGFzcyhwYXJlbnQsJ25nLWJpbmRpbmcnKTtzY29wZS4kd2F0Y2goaW50ZXJwb2xhdGVGbixmdW5jdGlvbiBpbnRlcnBvbGF0ZUZuV2F0Y2hBY3Rpb24odmFsdWUpe25vZGVbMF0ubm9kZVZhbHVlPXZhbHVlO30pO307fX0pO319CmZ1bmN0aW9uIGdldFRydXN0ZWRDb250ZXh0KG5vZGUsYXR0ck5vcm1hbGl6ZWROYW1lKXtpZihhdHRyTm9ybWFsaXplZE5hbWU9PSJzcmNkb2MiKXtyZXR1cm4gJHNjZS5IVE1MO30KdmFyIHRhZz1ub2RlTmFtZV8obm9kZSk7aWYoYXR0ck5vcm1hbGl6ZWROYW1lPT0ieGxpbmtIcmVmInx8KHRhZz09IkZPUk0iJiZhdHRyTm9ybWFsaXplZE5hbWU9PSJhY3Rpb24iKXx8KHRhZyE9IklNRyImJihhdHRyTm9ybWFsaXplZE5hbWU9PSJzcmMifHxhdHRyTm9ybWFsaXplZE5hbWU9PSJuZ1NyYyIpKSl7cmV0dXJuICRzY2UuUkVTT1VSQ0VfVVJMO319CmZ1bmN0aW9uIGFkZEF0dHJJbnRlcnBvbGF0ZURpcmVjdGl2ZShub2RlLGRpcmVjdGl2ZXMsdmFsdWUsbmFtZSl7dmFyIGludGVycG9sYXRlRm49JGludGVycG9sYXRlKHZhbHVlLHRydWUpO2lmKCFpbnRlcnBvbGF0ZUZuKXJldHVybjtpZihuYW1lPT09Im11bHRpcGxlIiYmbm9kZU5hbWVfKG5vZGUpPT09IlNFTEVDVCIpe3Rocm93ICRjb21waWxlTWluRXJyKCJzZWxtdWx0aSIsIkJpbmRpbmcgdG8gdGhlICdtdWx0aXBsZScgYXR0cmlidXRlIGlzIG5vdCBzdXBwb3J0ZWQuIEVsZW1lbnQ6IHswfSIsc3RhcnRpbmdUYWcobm9kZSkpO30KZGlyZWN0aXZlcy5wdXNoKHtwcmlvcml0eToxMDAsY29tcGlsZTpmdW5jdGlvbigpe3JldHVybntwcmU6ZnVuY3Rpb24gYXR0ckludGVycG9sYXRlUHJlTGlua0ZuKHNjb3BlLGVsZW1lbnQsYXR0cil7dmFyICQkb2JzZXJ2ZXJzPShhdHRyLiQkb2JzZXJ2ZXJzfHwoYXR0ci4kJG9ic2VydmVycz17fSkpO2lmKEVWRU5UX0hBTkRMRVJfQVRUUl9SRUdFWFAudGVzdChuYW1lKSl7dGhyb3cgJGNvbXBpbGVNaW5FcnIoJ25vZG9tZXZlbnRzJywiSW50ZXJwb2xhdGlvbnMgZm9yIEhUTUwgRE9NIGV2ZW50IGF0dHJpYnV0ZXMgYXJlIGRpc2FsbG93ZWQuICBQbGVhc2UgdXNlIHRoZSAiKyJuZy0gdmVyc2lvbnMgKHN1Y2ggYXMgbmctY2xpY2sgaW5zdGVhZCBvZiBvbmNsaWNrKSBpbnN0ZWFkLiIpO30KaW50ZXJwb2xhdGVGbj0kaW50ZXJwb2xhdGUoYXR0cltuYW1lXSx0cnVlLGdldFRydXN0ZWRDb250ZXh0KG5vZGUsbmFtZSkpO2lmKCFpbnRlcnBvbGF0ZUZuKXJldHVybjthdHRyW25hbWVdPWludGVycG9sYXRlRm4oc2NvcGUpOygkJG9ic2VydmVyc1tuYW1lXXx8KCQkb2JzZXJ2ZXJzW25hbWVdPVtdKSkuJCRpbnRlcj10cnVlOyhhdHRyLiQkb2JzZXJ2ZXJzJiZhdHRyLiQkb2JzZXJ2ZXJzW25hbWVdLiQkc2NvcGV8fHNjb3BlKS4kd2F0Y2goaW50ZXJwb2xhdGVGbixmdW5jdGlvbiBpbnRlcnBvbGF0ZUZuV2F0Y2hBY3Rpb24obmV3VmFsdWUsb2xkVmFsdWUpe2lmKG5hbWU9PT0nY2xhc3MnJiZuZXdWYWx1ZSE9b2xkVmFsdWUpe2F0dHIuJHVwZGF0ZUNsYXNzKG5ld1ZhbHVlLG9sZFZhbHVlKTt9ZWxzZXthdHRyLiRzZXQobmFtZSxuZXdWYWx1ZSk7fX0pO319O319KTt9CmZ1bmN0aW9uIHJlcGxhY2VXaXRoKCRyb290RWxlbWVudCxlbGVtZW50c1RvUmVtb3ZlLG5ld05vZGUpe3ZhciBmaXJzdEVsZW1lbnRUb1JlbW92ZT1lbGVtZW50c1RvUmVtb3ZlWzBdLHJlbW92ZUNvdW50PWVsZW1lbnRzVG9SZW1vdmUubGVuZ3RoLHBhcmVudD1maXJzdEVsZW1lbnRUb1JlbW92ZS5wYXJlbnROb2RlLGksaWk7aWYoJHJvb3RFbGVtZW50KXtmb3IoaT0wLGlpPSRyb290RWxlbWVudC5sZW5ndGg7aTxpaTtpKyspe2lmKCRyb290RWxlbWVudFtpXT09Zmlyc3RFbGVtZW50VG9SZW1vdmUpeyRyb290RWxlbWVudFtpKytdPW5ld05vZGU7Zm9yKHZhciBqPWksajI9aityZW1vdmVDb3VudC0xLGpqPSRyb290RWxlbWVudC5sZW5ndGg7ajxqajtqKyssajIrKyl7aWYoajI8amopeyRyb290RWxlbWVudFtqXT0kcm9vdEVsZW1lbnRbajJdO31lbHNle2RlbGV0ZSAkcm9vdEVsZW1lbnRbal07fX0KJHJvb3RFbGVtZW50Lmxlbmd0aC09cmVtb3ZlQ291bnQtMTticmVhazt9fX0KaWYocGFyZW50KXtwYXJlbnQucmVwbGFjZUNoaWxkKG5ld05vZGUsZmlyc3RFbGVtZW50VG9SZW1vdmUpO30KdmFyIGZyYWdtZW50PWRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtmcmFnbWVudC5hcHBlbmRDaGlsZChmaXJzdEVsZW1lbnRUb1JlbW92ZSk7bmV3Tm9kZVtqcUxpdGUuZXhwYW5kb109Zmlyc3RFbGVtZW50VG9SZW1vdmVbanFMaXRlLmV4cGFuZG9dO2Zvcih2YXIgaz0xLGtrPWVsZW1lbnRzVG9SZW1vdmUubGVuZ3RoO2s8a2s7aysrKXt2YXIgZWxlbWVudD1lbGVtZW50c1RvUmVtb3ZlW2tdO2pxTGl0ZShlbGVtZW50KS5yZW1vdmUoKTtmcmFnbWVudC5hcHBlbmRDaGlsZChlbGVtZW50KTtkZWxldGUgZWxlbWVudHNUb1JlbW92ZVtrXTt9CmVsZW1lbnRzVG9SZW1vdmVbMF09bmV3Tm9kZTtlbGVtZW50c1RvUmVtb3ZlLmxlbmd0aD0xO30KZnVuY3Rpb24gY2xvbmVBbmRBbm5vdGF0ZUZuKGZuLGFubm90YXRpb24pe3JldHVybiBleHRlbmQoZnVuY3Rpb24oKXtyZXR1cm4gZm4uYXBwbHkobnVsbCxhcmd1bWVudHMpO30sZm4sYW5ub3RhdGlvbik7fX1dO30KdmFyIFBSRUZJWF9SRUdFWFA9L14oeFtcOlwtX118ZGF0YVtcOlwtX10pL2k7ZnVuY3Rpb24gZGlyZWN0aXZlTm9ybWFsaXplKG5hbWUpe3JldHVybiBjYW1lbENhc2UobmFtZS5yZXBsYWNlKFBSRUZJWF9SRUdFWFAsJycpKTt9CmZ1bmN0aW9uIG5vZGVzZXRMaW5raW5nRm4oc2NvcGUsbm9kZUxpc3Qscm9vdEVsZW1lbnQsYm91bmRUcmFuc2NsdWRlRm4pe30KZnVuY3Rpb24gZGlyZWN0aXZlTGlua2luZ0ZuKG5vZGVzZXRMaW5raW5nRm4sc2NvcGUsbm9kZSxyb290RWxlbWVudCxib3VuZFRyYW5zY2x1ZGVGbil7fQpmdW5jdGlvbiB0b2tlbkRpZmZlcmVuY2Uoc3RyMSxzdHIyKXt2YXIgdmFsdWVzPScnLHRva2VuczE9c3RyMS5zcGxpdCgvXHMrLyksdG9rZW5zMj1zdHIyLnNwbGl0KC9ccysvKTtvdXRlcjpmb3IodmFyIGk9MDtpPHRva2VuczEubGVuZ3RoO2krKyl7dmFyIHRva2VuPXRva2VuczFbaV07Zm9yKHZhciBqPTA7ajx0b2tlbnMyLmxlbmd0aDtqKyspe2lmKHRva2VuPT10b2tlbnMyW2pdKWNvbnRpbnVlIG91dGVyO30KdmFsdWVzKz0odmFsdWVzLmxlbmd0aD4wPycgJzonJykrdG9rZW47fQpyZXR1cm4gdmFsdWVzO30KZnVuY3Rpb24gJENvbnRyb2xsZXJQcm92aWRlcigpe3ZhciBjb250cm9sbGVycz17fSxDTlRSTF9SRUc9L14oXFMrKShccythc1xzKyhcdyspKT8kLzt0aGlzLnJlZ2lzdGVyPWZ1bmN0aW9uKG5hbWUsY29uc3RydWN0b3Ipe2Fzc2VydE5vdEhhc093blByb3BlcnR5KG5hbWUsJ2NvbnRyb2xsZXInKTtpZihpc09iamVjdChuYW1lKSl7ZXh0ZW5kKGNvbnRyb2xsZXJzLG5hbWUpO31lbHNle2NvbnRyb2xsZXJzW25hbWVdPWNvbnN0cnVjdG9yO319O3RoaXMuJGdldD1bJyRpbmplY3RvcicsJyR3aW5kb3cnLGZ1bmN0aW9uKCRpbmplY3Rvciwkd2luZG93KXtyZXR1cm4gZnVuY3Rpb24oZXhwcmVzc2lvbixsb2NhbHMpe3ZhciBpbnN0YW5jZSxtYXRjaCxjb25zdHJ1Y3RvcixpZGVudGlmaWVyO2lmKGlzU3RyaW5nKGV4cHJlc3Npb24pKXttYXRjaD1leHByZXNzaW9uLm1hdGNoKENOVFJMX1JFRyksY29uc3RydWN0b3I9bWF0Y2hbMV0saWRlbnRpZmllcj1tYXRjaFszXTtleHByZXNzaW9uPWNvbnRyb2xsZXJzLmhhc093blByb3BlcnR5KGNvbnN0cnVjdG9yKT9jb250cm9sbGVyc1tjb25zdHJ1Y3Rvcl06Z2V0dGVyKGxvY2Fscy4kc2NvcGUsY29uc3RydWN0b3IsdHJ1ZSl8fGdldHRlcigkd2luZG93LGNvbnN0cnVjdG9yLHRydWUpO2Fzc2VydEFyZ0ZuKGV4cHJlc3Npb24sY29uc3RydWN0b3IsdHJ1ZSk7fQppbnN0YW5jZT0kaW5qZWN0b3IuaW5zdGFudGlhdGUoZXhwcmVzc2lvbixsb2NhbHMpO2lmKGlkZW50aWZpZXIpe2lmKCEobG9jYWxzJiZ0eXBlb2YgbG9jYWxzLiRzY29wZT09PSdvYmplY3QnKSl7dGhyb3cgbWluRXJyKCckY29udHJvbGxlcicpKCdub3NjcCcsIkNhbm5vdCBleHBvcnQgY29udHJvbGxlciAnezB9JyBhcyAnezF9JyEgTm8gJHNjb3BlIG9iamVjdCBwcm92aWRlZCB2aWEgYGxvY2Fsc2AuIixjb25zdHJ1Y3Rvcnx8ZXhwcmVzc2lvbi5uYW1lLGlkZW50aWZpZXIpO30KbG9jYWxzLiRzY29wZVtpZGVudGlmaWVyXT1pbnN0YW5jZTt9CnJldHVybiBpbnN0YW5jZTt9O31dO30KZnVuY3Rpb24gJERvY3VtZW50UHJvdmlkZXIoKXt0aGlzLiRnZXQ9Wyckd2luZG93JyxmdW5jdGlvbih3aW5kb3cpe3JldHVybiBqcUxpdGUod2luZG93LmRvY3VtZW50KTt9XTt9CmZ1bmN0aW9uICRFeGNlcHRpb25IYW5kbGVyUHJvdmlkZXIoKXt0aGlzLiRnZXQ9WyckbG9nJyxmdW5jdGlvbigkbG9nKXtyZXR1cm4gZnVuY3Rpb24oZXhjZXB0aW9uLGNhdXNlKXskbG9nLmVycm9yLmFwcGx5KCRsb2csYXJndW1lbnRzKTt9O31dO30KZnVuY3Rpb24gcGFyc2VIZWFkZXJzKGhlYWRlcnMpe3ZhciBwYXJzZWQ9e30sa2V5LHZhbCxpO2lmKCFoZWFkZXJzKXJldHVybiBwYXJzZWQ7Zm9yRWFjaChoZWFkZXJzLnNwbGl0KCdcbicpLGZ1bmN0aW9uKGxpbmUpe2k9bGluZS5pbmRleE9mKCc6Jyk7a2V5PWxvd2VyY2FzZSh0cmltKGxpbmUuc3Vic3RyKDAsaSkpKTt2YWw9dHJpbShsaW5lLnN1YnN0cihpKzEpKTtpZihrZXkpe2lmKHBhcnNlZFtrZXldKXtwYXJzZWRba2V5XSs9JywgJyt2YWw7fWVsc2V7cGFyc2VkW2tleV09dmFsO319fSk7cmV0dXJuIHBhcnNlZDt9CmZ1bmN0aW9uIGhlYWRlcnNHZXR0ZXIoaGVhZGVycyl7dmFyIGhlYWRlcnNPYmo9aXNPYmplY3QoaGVhZGVycyk/aGVhZGVyczp1bmRlZmluZWQ7cmV0dXJuIGZ1bmN0aW9uKG5hbWUpe2lmKCFoZWFkZXJzT2JqKWhlYWRlcnNPYmo9cGFyc2VIZWFkZXJzKGhlYWRlcnMpO2lmKG5hbWUpe3JldHVybiBoZWFkZXJzT2JqW2xvd2VyY2FzZShuYW1lKV18fG51bGw7fQpyZXR1cm4gaGVhZGVyc09iajt9O30KZnVuY3Rpb24gdHJhbnNmb3JtRGF0YShkYXRhLGhlYWRlcnMsZm5zKXtpZihpc0Z1bmN0aW9uKGZucykpCnJldHVybiBmbnMoZGF0YSxoZWFkZXJzKTtmb3JFYWNoKGZucyxmdW5jdGlvbihmbil7ZGF0YT1mbihkYXRhLGhlYWRlcnMpO30pO3JldHVybiBkYXRhO30KZnVuY3Rpb24gaXNTdWNjZXNzKHN0YXR1cyl7cmV0dXJuIDIwMDw9c3RhdHVzJiZzdGF0dXM8MzAwO30KZnVuY3Rpb24gJEh0dHBQcm92aWRlcigpe3ZhciBKU09OX1NUQVJUPS9eXHMqKFxbfFx7W15ce10pLyxKU09OX0VORD0vW1x9XF1dXHMqJC8sUFJPVEVDVElPTl9QUkVGSVg9L15cKVxdXH0nLD9cbi8sQ09OVEVOVF9UWVBFX0FQUExJQ0FUSU9OX0pTT049eydDb250ZW50LVR5cGUnOidhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTgnfTt2YXIgZGVmYXVsdHM9dGhpcy5kZWZhdWx0cz17dHJhbnNmb3JtUmVzcG9uc2U6W2Z1bmN0aW9uKGRhdGEpe2lmKGlzU3RyaW5nKGRhdGEpKXtkYXRhPWRhdGEucmVwbGFjZShQUk9URUNUSU9OX1BSRUZJWCwnJyk7aWYoSlNPTl9TVEFSVC50ZXN0KGRhdGEpJiZKU09OX0VORC50ZXN0KGRhdGEpKQpkYXRhPWZyb21Kc29uKGRhdGEpO30KcmV0dXJuIGRhdGE7fV0sdHJhbnNmb3JtUmVxdWVzdDpbZnVuY3Rpb24oZCl7cmV0dXJuIGlzT2JqZWN0KGQpJiYhaXNGaWxlKGQpJiYhaXNCbG9iKGQpP3RvSnNvbihkKTpkO31dLGhlYWRlcnM6e2NvbW1vbjp7J0FjY2VwdCc6J2FwcGxpY2F0aW9uL2pzb24sIHRleHQvcGxhaW4sICovKid9LHBvc3Q6c2hhbGxvd0NvcHkoQ09OVEVOVF9UWVBFX0FQUExJQ0FUSU9OX0pTT04pLHB1dDpzaGFsbG93Q29weShDT05URU5UX1RZUEVfQVBQTElDQVRJT05fSlNPTikscGF0Y2g6c2hhbGxvd0NvcHkoQ09OVEVOVF9UWVBFX0FQUExJQ0FUSU9OX0pTT04pfSx4c3JmQ29va2llTmFtZTonWFNSRi1UT0tFTicseHNyZkhlYWRlck5hbWU6J1gtWFNSRi1UT0tFTid9O3ZhciBpbnRlcmNlcHRvckZhY3Rvcmllcz10aGlzLmludGVyY2VwdG9ycz1bXTt2YXIgcmVzcG9uc2VJbnRlcmNlcHRvckZhY3Rvcmllcz10aGlzLnJlc3BvbnNlSW50ZXJjZXB0b3JzPVtdO3RoaXMuJGdldD1bJyRodHRwQmFja2VuZCcsJyRicm93c2VyJywnJGNhY2hlRmFjdG9yeScsJyRyb290U2NvcGUnLCckcScsJyRpbmplY3RvcicsZnVuY3Rpb24oJGh0dHBCYWNrZW5kLCRicm93c2VyLCRjYWNoZUZhY3RvcnksJHJvb3RTY29wZSwkcSwkaW5qZWN0b3Ipe3ZhciBkZWZhdWx0Q2FjaGU9JGNhY2hlRmFjdG9yeSgnJGh0dHAnKTt2YXIgcmV2ZXJzZWRJbnRlcmNlcHRvcnM9W107Zm9yRWFjaChpbnRlcmNlcHRvckZhY3RvcmllcyxmdW5jdGlvbihpbnRlcmNlcHRvckZhY3Rvcnkpe3JldmVyc2VkSW50ZXJjZXB0b3JzLnVuc2hpZnQoaXNTdHJpbmcoaW50ZXJjZXB0b3JGYWN0b3J5KT8kaW5qZWN0b3IuZ2V0KGludGVyY2VwdG9yRmFjdG9yeSk6JGluamVjdG9yLmludm9rZShpbnRlcmNlcHRvckZhY3RvcnkpKTt9KTtmb3JFYWNoKHJlc3BvbnNlSW50ZXJjZXB0b3JGYWN0b3JpZXMsZnVuY3Rpb24oaW50ZXJjZXB0b3JGYWN0b3J5LGluZGV4KXt2YXIgcmVzcG9uc2VGbj1pc1N0cmluZyhpbnRlcmNlcHRvckZhY3RvcnkpPyRpbmplY3Rvci5nZXQoaW50ZXJjZXB0b3JGYWN0b3J5KTokaW5qZWN0b3IuaW52b2tlKGludGVyY2VwdG9yRmFjdG9yeSk7cmV2ZXJzZWRJbnRlcmNlcHRvcnMuc3BsaWNlKGluZGV4LDAse3Jlc3BvbnNlOmZ1bmN0aW9uKHJlc3BvbnNlKXtyZXR1cm4gcmVzcG9uc2VGbigkcS53aGVuKHJlc3BvbnNlKSk7fSxyZXNwb25zZUVycm9yOmZ1bmN0aW9uKHJlc3BvbnNlKXtyZXR1cm4gcmVzcG9uc2VGbigkcS5yZWplY3QocmVzcG9uc2UpKTt9fSk7fSk7ZnVuY3Rpb24gJGh0dHAocmVxdWVzdENvbmZpZyl7dmFyIGNvbmZpZz17bWV0aG9kOidnZXQnLHRyYW5zZm9ybVJlcXVlc3Q6ZGVmYXVsdHMudHJhbnNmb3JtUmVxdWVzdCx0cmFuc2Zvcm1SZXNwb25zZTpkZWZhdWx0cy50cmFuc2Zvcm1SZXNwb25zZX07dmFyIGhlYWRlcnM9bWVyZ2VIZWFkZXJzKHJlcXVlc3RDb25maWcpO2V4dGVuZChjb25maWcscmVxdWVzdENvbmZpZyk7Y29uZmlnLmhlYWRlcnM9aGVhZGVycztjb25maWcubWV0aG9kPXVwcGVyY2FzZShjb25maWcubWV0aG9kKTt2YXIgc2VydmVyUmVxdWVzdD1mdW5jdGlvbihjb25maWcpe2hlYWRlcnM9Y29uZmlnLmhlYWRlcnM7dmFyIHJlcURhdGE9dHJhbnNmb3JtRGF0YShjb25maWcuZGF0YSxoZWFkZXJzR2V0dGVyKGhlYWRlcnMpLGNvbmZpZy50cmFuc2Zvcm1SZXF1ZXN0KTtpZihpc1VuZGVmaW5lZChjb25maWcuZGF0YSkpe2ZvckVhY2goaGVhZGVycyxmdW5jdGlvbih2YWx1ZSxoZWFkZXIpe2lmKGxvd2VyY2FzZShoZWFkZXIpPT09J2NvbnRlbnQtdHlwZScpe2RlbGV0ZSBoZWFkZXJzW2hlYWRlcl07fX0pO30KaWYoaXNVbmRlZmluZWQoY29uZmlnLndpdGhDcmVkZW50aWFscykmJiFpc1VuZGVmaW5lZChkZWZhdWx0cy53aXRoQ3JlZGVudGlhbHMpKXtjb25maWcud2l0aENyZWRlbnRpYWxzPWRlZmF1bHRzLndpdGhDcmVkZW50aWFsczt9CnJldHVybiBzZW5kUmVxKGNvbmZpZyxyZXFEYXRhLGhlYWRlcnMpLnRoZW4odHJhbnNmb3JtUmVzcG9uc2UsdHJhbnNmb3JtUmVzcG9uc2UpO307dmFyIGNoYWluPVtzZXJ2ZXJSZXF1ZXN0LHVuZGVmaW5lZF07dmFyIHByb21pc2U9JHEud2hlbihjb25maWcpO2ZvckVhY2gocmV2ZXJzZWRJbnRlcmNlcHRvcnMsZnVuY3Rpb24oaW50ZXJjZXB0b3Ipe2lmKGludGVyY2VwdG9yLnJlcXVlc3R8fGludGVyY2VwdG9yLnJlcXVlc3RFcnJvcil7Y2hhaW4udW5zaGlmdChpbnRlcmNlcHRvci5yZXF1ZXN0LGludGVyY2VwdG9yLnJlcXVlc3RFcnJvcik7fQppZihpbnRlcmNlcHRvci5yZXNwb25zZXx8aW50ZXJjZXB0b3IucmVzcG9uc2VFcnJvcil7Y2hhaW4ucHVzaChpbnRlcmNlcHRvci5yZXNwb25zZSxpbnRlcmNlcHRvci5yZXNwb25zZUVycm9yKTt9fSk7d2hpbGUoY2hhaW4ubGVuZ3RoKXt2YXIgdGhlbkZuPWNoYWluLnNoaWZ0KCk7dmFyIHJlamVjdEZuPWNoYWluLnNoaWZ0KCk7cHJvbWlzZT1wcm9taXNlLnRoZW4odGhlbkZuLHJlamVjdEZuKTt9CnByb21pc2Uuc3VjY2Vzcz1mdW5jdGlvbihmbil7cHJvbWlzZS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKXtmbihyZXNwb25zZS5kYXRhLHJlc3BvbnNlLnN0YXR1cyxyZXNwb25zZS5oZWFkZXJzLGNvbmZpZyk7fSk7cmV0dXJuIHByb21pc2U7fTtwcm9taXNlLmVycm9yPWZ1bmN0aW9uKGZuKXtwcm9taXNlLnRoZW4obnVsbCxmdW5jdGlvbihyZXNwb25zZSl7Zm4ocmVzcG9uc2UuZGF0YSxyZXNwb25zZS5zdGF0dXMscmVzcG9uc2UuaGVhZGVycyxjb25maWcpO30pO3JldHVybiBwcm9taXNlO307cmV0dXJuIHByb21pc2U7ZnVuY3Rpb24gdHJhbnNmb3JtUmVzcG9uc2UocmVzcG9uc2Upe3ZhciByZXNwPWV4dGVuZCh7fSxyZXNwb25zZSx7ZGF0YTp0cmFuc2Zvcm1EYXRhKHJlc3BvbnNlLmRhdGEscmVzcG9uc2UuaGVhZGVycyxjb25maWcudHJhbnNmb3JtUmVzcG9uc2UpfSk7cmV0dXJuKGlzU3VjY2VzcyhyZXNwb25zZS5zdGF0dXMpKT9yZXNwOiRxLnJlamVjdChyZXNwKTt9CmZ1bmN0aW9uIG1lcmdlSGVhZGVycyhjb25maWcpe3ZhciBkZWZIZWFkZXJzPWRlZmF1bHRzLmhlYWRlcnMscmVxSGVhZGVycz1leHRlbmQoe30sY29uZmlnLmhlYWRlcnMpLGRlZkhlYWRlck5hbWUsbG93ZXJjYXNlRGVmSGVhZGVyTmFtZSxyZXFIZWFkZXJOYW1lO2RlZkhlYWRlcnM9ZXh0ZW5kKHt9LGRlZkhlYWRlcnMuY29tbW9uLGRlZkhlYWRlcnNbbG93ZXJjYXNlKGNvbmZpZy5tZXRob2QpXSk7ZXhlY0hlYWRlcnMoZGVmSGVhZGVycyk7ZXhlY0hlYWRlcnMocmVxSGVhZGVycyk7ZGVmYXVsdEhlYWRlcnNJdGVyYXRpb246Zm9yKGRlZkhlYWRlck5hbWUgaW4gZGVmSGVhZGVycyl7bG93ZXJjYXNlRGVmSGVhZGVyTmFtZT1sb3dlcmNhc2UoZGVmSGVhZGVyTmFtZSk7Zm9yKHJlcUhlYWRlck5hbWUgaW4gcmVxSGVhZGVycyl7aWYobG93ZXJjYXNlKHJlcUhlYWRlck5hbWUpPT09bG93ZXJjYXNlRGVmSGVhZGVyTmFtZSl7Y29udGludWUgZGVmYXVsdEhlYWRlcnNJdGVyYXRpb247fX0KcmVxSGVhZGVyc1tkZWZIZWFkZXJOYW1lXT1kZWZIZWFkZXJzW2RlZkhlYWRlck5hbWVdO30KcmV0dXJuIHJlcUhlYWRlcnM7ZnVuY3Rpb24gZXhlY0hlYWRlcnMoaGVhZGVycyl7dmFyIGhlYWRlckNvbnRlbnQ7Zm9yRWFjaChoZWFkZXJzLGZ1bmN0aW9uKGhlYWRlckZuLGhlYWRlcil7aWYoaXNGdW5jdGlvbihoZWFkZXJGbikpe2hlYWRlckNvbnRlbnQ9aGVhZGVyRm4oKTtpZihoZWFkZXJDb250ZW50IT1udWxsKXtoZWFkZXJzW2hlYWRlcl09aGVhZGVyQ29udGVudDt9ZWxzZXtkZWxldGUgaGVhZGVyc1toZWFkZXJdO319fSk7fX19CiRodHRwLnBlbmRpbmdSZXF1ZXN0cz1bXTtjcmVhdGVTaG9ydE1ldGhvZHMoJ2dldCcsJ2RlbGV0ZScsJ2hlYWQnLCdqc29ucCcpO2NyZWF0ZVNob3J0TWV0aG9kc1dpdGhEYXRhKCdwb3N0JywncHV0Jyk7JGh0dHAuZGVmYXVsdHM9ZGVmYXVsdHM7cmV0dXJuICRodHRwO2Z1bmN0aW9uIGNyZWF0ZVNob3J0TWV0aG9kcyhuYW1lcyl7Zm9yRWFjaChhcmd1bWVudHMsZnVuY3Rpb24obmFtZSl7JGh0dHBbbmFtZV09ZnVuY3Rpb24odXJsLGNvbmZpZyl7cmV0dXJuICRodHRwKGV4dGVuZChjb25maWd8fHt9LHttZXRob2Q6bmFtZSx1cmw6dXJsfSkpO307fSk7fQpmdW5jdGlvbiBjcmVhdGVTaG9ydE1ldGhvZHNXaXRoRGF0YShuYW1lKXtmb3JFYWNoKGFyZ3VtZW50cyxmdW5jdGlvbihuYW1lKXskaHR0cFtuYW1lXT1mdW5jdGlvbih1cmwsZGF0YSxjb25maWcpe3JldHVybiAkaHR0cChleHRlbmQoY29uZmlnfHx7fSx7bWV0aG9kOm5hbWUsdXJsOnVybCxkYXRhOmRhdGF9KSk7fTt9KTt9CmZ1bmN0aW9uIHNlbmRSZXEoY29uZmlnLHJlcURhdGEscmVxSGVhZGVycyl7dmFyIGRlZmVycmVkPSRxLmRlZmVyKCkscHJvbWlzZT1kZWZlcnJlZC5wcm9taXNlLGNhY2hlLGNhY2hlZFJlc3AsdXJsPWJ1aWxkVXJsKGNvbmZpZy51cmwsY29uZmlnLnBhcmFtcyk7JGh0dHAucGVuZGluZ1JlcXVlc3RzLnB1c2goY29uZmlnKTtwcm9taXNlLnRoZW4ocmVtb3ZlUGVuZGluZ1JlcSxyZW1vdmVQZW5kaW5nUmVxKTtpZigoY29uZmlnLmNhY2hlfHxkZWZhdWx0cy5jYWNoZSkmJmNvbmZpZy5jYWNoZSE9PWZhbHNlJiZjb25maWcubWV0aG9kPT0nR0VUJyl7Y2FjaGU9aXNPYmplY3QoY29uZmlnLmNhY2hlKT9jb25maWcuY2FjaGU6aXNPYmplY3QoZGVmYXVsdHMuY2FjaGUpP2RlZmF1bHRzLmNhY2hlOmRlZmF1bHRDYWNoZTt9CmlmKGNhY2hlKXtjYWNoZWRSZXNwPWNhY2hlLmdldCh1cmwpO2lmKGlzRGVmaW5lZChjYWNoZWRSZXNwKSl7aWYoY2FjaGVkUmVzcC50aGVuKXtjYWNoZWRSZXNwLnRoZW4ocmVtb3ZlUGVuZGluZ1JlcSxyZW1vdmVQZW5kaW5nUmVxKTtyZXR1cm4gY2FjaGVkUmVzcDt9ZWxzZXtpZihpc0FycmF5KGNhY2hlZFJlc3ApKXtyZXNvbHZlUHJvbWlzZShjYWNoZWRSZXNwWzFdLGNhY2hlZFJlc3BbMF0sc2hhbGxvd0NvcHkoY2FjaGVkUmVzcFsyXSksY2FjaGVkUmVzcFszXSk7fWVsc2V7cmVzb2x2ZVByb21pc2UoY2FjaGVkUmVzcCwyMDAse30sJ09LJyk7fX19ZWxzZXtjYWNoZS5wdXQodXJsLHByb21pc2UpO319CmlmKGlzVW5kZWZpbmVkKGNhY2hlZFJlc3ApKXt2YXIgeHNyZlZhbHVlPXVybElzU2FtZU9yaWdpbihjb25maWcudXJsKT8kYnJvd3Nlci5jb29raWVzKClbY29uZmlnLnhzcmZDb29raWVOYW1lfHxkZWZhdWx0cy54c3JmQ29va2llTmFtZV06dW5kZWZpbmVkO2lmKHhzcmZWYWx1ZSl7cmVxSGVhZGVyc1soY29uZmlnLnhzcmZIZWFkZXJOYW1lfHxkZWZhdWx0cy54c3JmSGVhZGVyTmFtZSldPXhzcmZWYWx1ZTt9CiRodHRwQmFja2VuZChjb25maWcubWV0aG9kLHVybCxyZXFEYXRhLGRvbmUscmVxSGVhZGVycyxjb25maWcudGltZW91dCxjb25maWcud2l0aENyZWRlbnRpYWxzLGNvbmZpZy5yZXNwb25zZVR5cGUpO30KcmV0dXJuIHByb21pc2U7ZnVuY3Rpb24gZG9uZShzdGF0dXMscmVzcG9uc2UsaGVhZGVyc1N0cmluZyxzdGF0dXNUZXh0KXtpZihjYWNoZSl7aWYoaXNTdWNjZXNzKHN0YXR1cykpe2NhY2hlLnB1dCh1cmwsW3N0YXR1cyxyZXNwb25zZSxwYXJzZUhlYWRlcnMoaGVhZGVyc1N0cmluZyksc3RhdHVzVGV4dF0pO31lbHNle2NhY2hlLnJlbW92ZSh1cmwpO319CnJlc29sdmVQcm9taXNlKHJlc3BvbnNlLHN0YXR1cyxoZWFkZXJzU3RyaW5nLHN0YXR1c1RleHQpO2lmKCEkcm9vdFNjb3BlLiQkcGhhc2UpJHJvb3RTY29wZS4kYXBwbHkoKTt9CmZ1bmN0aW9uIHJlc29sdmVQcm9taXNlKHJlc3BvbnNlLHN0YXR1cyxoZWFkZXJzLHN0YXR1c1RleHQpe3N0YXR1cz1NYXRoLm1heChzdGF0dXMsMCk7KGlzU3VjY2VzcyhzdGF0dXMpP2RlZmVycmVkLnJlc29sdmU6ZGVmZXJyZWQucmVqZWN0KSh7ZGF0YTpyZXNwb25zZSxzdGF0dXM6c3RhdHVzLGhlYWRlcnM6aGVhZGVyc0dldHRlcihoZWFkZXJzKSxjb25maWc6Y29uZmlnLHN0YXR1c1RleHQ6c3RhdHVzVGV4dH0pO30KZnVuY3Rpb24gcmVtb3ZlUGVuZGluZ1JlcSgpe3ZhciBpZHg9aW5kZXhPZigkaHR0cC5wZW5kaW5nUmVxdWVzdHMsY29uZmlnKTtpZihpZHghPT0tMSkkaHR0cC5wZW5kaW5nUmVxdWVzdHMuc3BsaWNlKGlkeCwxKTt9fQpmdW5jdGlvbiBidWlsZFVybCh1cmwscGFyYW1zKXtpZighcGFyYW1zKXJldHVybiB1cmw7dmFyIHBhcnRzPVtdO2ZvckVhY2hTb3J0ZWQocGFyYW1zLGZ1bmN0aW9uKHZhbHVlLGtleSl7aWYodmFsdWU9PT1udWxsfHxpc1VuZGVmaW5lZCh2YWx1ZSkpcmV0dXJuO2lmKCFpc0FycmF5KHZhbHVlKSl2YWx1ZT1bdmFsdWVdO2ZvckVhY2godmFsdWUsZnVuY3Rpb24odil7aWYoaXNPYmplY3Qodikpe3Y9dG9Kc29uKHYpO30KcGFydHMucHVzaChlbmNvZGVVcmlRdWVyeShrZXkpKyc9JysKZW5jb2RlVXJpUXVlcnkodikpO30pO30pO2lmKHBhcnRzLmxlbmd0aD4wKXt1cmwrPSgodXJsLmluZGV4T2YoJz8nKT09LTEpPyc/JzonJicpK3BhcnRzLmpvaW4oJyYnKTt9CnJldHVybiB1cmw7fX1dO30KZnVuY3Rpb24gY3JlYXRlWGhyKG1ldGhvZCl7aWYobXNpZTw9OCYmKCFtZXRob2QubWF0Y2goL14oZ2V0fHBvc3R8aGVhZHxwdXR8ZGVsZXRlfG9wdGlvbnMpJC9pKXx8IXdpbmRvdy5YTUxIdHRwUmVxdWVzdCkpe3JldHVybiBuZXcgd2luZG93LkFjdGl2ZVhPYmplY3QoIk1pY3Jvc29mdC5YTUxIVFRQIik7fWVsc2UgaWYod2luZG93LlhNTEh0dHBSZXF1ZXN0KXtyZXR1cm4gbmV3IHdpbmRvdy5YTUxIdHRwUmVxdWVzdCgpO30KdGhyb3cgbWluRXJyKCckaHR0cEJhY2tlbmQnKSgnbm94aHInLCJUaGlzIGJyb3dzZXIgZG9lcyBub3Qgc3VwcG9ydCBYTUxIdHRwUmVxdWVzdC4iKTt9CmZ1bmN0aW9uICRIdHRwQmFja2VuZFByb3ZpZGVyKCl7dGhpcy4kZ2V0PVsnJGJyb3dzZXInLCckd2luZG93JywnJGRvY3VtZW50JyxmdW5jdGlvbigkYnJvd3Nlciwkd2luZG93LCRkb2N1bWVudCl7cmV0dXJuIGNyZWF0ZUh0dHBCYWNrZW5kKCRicm93c2VyLGNyZWF0ZVhociwkYnJvd3Nlci5kZWZlciwkd2luZG93LmFuZ3VsYXIuY2FsbGJhY2tzLCRkb2N1bWVudFswXSk7fV07fQpmdW5jdGlvbiBjcmVhdGVIdHRwQmFja2VuZCgkYnJvd3NlcixjcmVhdGVYaHIsJGJyb3dzZXJEZWZlcixjYWxsYmFja3MscmF3RG9jdW1lbnQpe3ZhciBBQk9SVEVEPS0xO3JldHVybiBmdW5jdGlvbihtZXRob2QsdXJsLHBvc3QsY2FsbGJhY2ssaGVhZGVycyx0aW1lb3V0LHdpdGhDcmVkZW50aWFscyxyZXNwb25zZVR5cGUpe3ZhciBzdGF0dXM7JGJyb3dzZXIuJCRpbmNPdXRzdGFuZGluZ1JlcXVlc3RDb3VudCgpO3VybD11cmx8fCRicm93c2VyLnVybCgpO2lmKGxvd2VyY2FzZShtZXRob2QpPT0nanNvbnAnKXt2YXIgY2FsbGJhY2tJZD0nXycrKGNhbGxiYWNrcy5jb3VudGVyKyspLnRvU3RyaW5nKDM2KTtjYWxsYmFja3NbY2FsbGJhY2tJZF09ZnVuY3Rpb24oZGF0YSl7Y2FsbGJhY2tzW2NhbGxiYWNrSWRdLmRhdGE9ZGF0YTtjYWxsYmFja3NbY2FsbGJhY2tJZF0uY2FsbGVkPXRydWU7fTt2YXIganNvbnBEb25lPWpzb25wUmVxKHVybC5yZXBsYWNlKCdKU09OX0NBTExCQUNLJywnYW5ndWxhci5jYWxsYmFja3MuJytjYWxsYmFja0lkKSxjYWxsYmFja0lkLGZ1bmN0aW9uKHN0YXR1cyx0ZXh0KXtjb21wbGV0ZVJlcXVlc3QoY2FsbGJhY2ssc3RhdHVzLGNhbGxiYWNrc1tjYWxsYmFja0lkXS5kYXRhLCIiLHRleHQpO2NhbGxiYWNrc1tjYWxsYmFja0lkXT1ub29wO30pO31lbHNle3ZhciB4aHI9Y3JlYXRlWGhyKG1ldGhvZCk7eGhyLm9wZW4obWV0aG9kLHVybCx0cnVlKTtmb3JFYWNoKGhlYWRlcnMsZnVuY3Rpb24odmFsdWUsa2V5KXtpZihpc0RlZmluZWQodmFsdWUpKXt4aHIuc2V0UmVxdWVzdEhlYWRlcihrZXksdmFsdWUpO319KTt4aHIub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7aWYoeGhyJiZ4aHIucmVhZHlTdGF0ZT09NCl7dmFyIHJlc3BvbnNlSGVhZGVycz1udWxsLHJlc3BvbnNlPW51bGwsc3RhdHVzVGV4dD0nJztpZihzdGF0dXMhPT1BQk9SVEVEKXtyZXNwb25zZUhlYWRlcnM9eGhyLmdldEFsbFJlc3BvbnNlSGVhZGVycygpO3Jlc3BvbnNlPSgncmVzcG9uc2UnaW4geGhyKT94aHIucmVzcG9uc2U6eGhyLnJlc3BvbnNlVGV4dDt9CmlmKCEoc3RhdHVzPT09QUJPUlRFRCYmbXNpZTwxMCkpe3N0YXR1c1RleHQ9eGhyLnN0YXR1c1RleHQ7fQpjb21wbGV0ZVJlcXVlc3QoY2FsbGJhY2ssc3RhdHVzfHx4aHIuc3RhdHVzLHJlc3BvbnNlLHJlc3BvbnNlSGVhZGVycyxzdGF0dXNUZXh0KTt9fTtpZih3aXRoQ3JlZGVudGlhbHMpe3hoci53aXRoQ3JlZGVudGlhbHM9dHJ1ZTt9CmlmKHJlc3BvbnNlVHlwZSl7dHJ5e3hoci5yZXNwb25zZVR5cGU9cmVzcG9uc2VUeXBlO31jYXRjaChlKXtpZihyZXNwb25zZVR5cGUhPT0nanNvbicpe3Rocm93IGU7fX19Cnhoci5zZW5kKHBvc3R8fG51bGwpO30KaWYodGltZW91dD4wKXt2YXIgdGltZW91dElkPSRicm93c2VyRGVmZXIodGltZW91dFJlcXVlc3QsdGltZW91dCk7fWVsc2UgaWYodGltZW91dCYmdGltZW91dC50aGVuKXt0aW1lb3V0LnRoZW4odGltZW91dFJlcXVlc3QpO30KZnVuY3Rpb24gdGltZW91dFJlcXVlc3QoKXtzdGF0dXM9QUJPUlRFRDtqc29ucERvbmUmJmpzb25wRG9uZSgpO3hociYmeGhyLmFib3J0KCk7fQpmdW5jdGlvbiBjb21wbGV0ZVJlcXVlc3QoY2FsbGJhY2ssc3RhdHVzLHJlc3BvbnNlLGhlYWRlcnNTdHJpbmcsc3RhdHVzVGV4dCl7dGltZW91dElkJiYkYnJvd3NlckRlZmVyLmNhbmNlbCh0aW1lb3V0SWQpO2pzb25wRG9uZT14aHI9bnVsbDtpZihzdGF0dXM9PT0wKXtzdGF0dXM9cmVzcG9uc2U/MjAwOnVybFJlc29sdmUodXJsKS5wcm90b2NvbD09J2ZpbGUnPzQwNDowO30Kc3RhdHVzPXN0YXR1cz09PTEyMjM/MjA0OnN0YXR1cztzdGF0dXNUZXh0PXN0YXR1c1RleHR8fCcnO2NhbGxiYWNrKHN0YXR1cyxyZXNwb25zZSxoZWFkZXJzU3RyaW5nLHN0YXR1c1RleHQpOyRicm93c2VyLiQkY29tcGxldGVPdXRzdGFuZGluZ1JlcXVlc3Qobm9vcCk7fX07ZnVuY3Rpb24ganNvbnBSZXEodXJsLGNhbGxiYWNrSWQsZG9uZSl7dmFyIHNjcmlwdD1yYXdEb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKSxjYWxsYmFjaz1udWxsO3NjcmlwdC50eXBlPSJ0ZXh0L2phdmFzY3JpcHQiO3NjcmlwdC5zcmM9dXJsO3NjcmlwdC5hc3luYz10cnVlO2NhbGxiYWNrPWZ1bmN0aW9uKGV2ZW50KXtyZW1vdmVFdmVudExpc3RlbmVyRm4oc2NyaXB0LCJsb2FkIixjYWxsYmFjayk7cmVtb3ZlRXZlbnRMaXN0ZW5lckZuKHNjcmlwdCwiZXJyb3IiLGNhbGxiYWNrKTtyYXdEb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKHNjcmlwdCk7c2NyaXB0PW51bGw7dmFyIHN0YXR1cz0tMTt2YXIgdGV4dD0idW5rbm93biI7aWYoZXZlbnQpe2lmKGV2ZW50LnR5cGU9PT0ibG9hZCImJiFjYWxsYmFja3NbY2FsbGJhY2tJZF0uY2FsbGVkKXtldmVudD17dHlwZToiZXJyb3IifTt9CnRleHQ9ZXZlbnQudHlwZTtzdGF0dXM9ZXZlbnQudHlwZT09PSJlcnJvciI/NDA0OjIwMDt9CmlmKGRvbmUpe2RvbmUoc3RhdHVzLHRleHQpO319O2FkZEV2ZW50TGlzdGVuZXJGbihzY3JpcHQsImxvYWQiLGNhbGxiYWNrKTthZGRFdmVudExpc3RlbmVyRm4oc2NyaXB0LCJlcnJvciIsY2FsbGJhY2spO2lmKG1zaWU8PTgpe3NjcmlwdC5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKXtpZihpc1N0cmluZyhzY3JpcHQucmVhZHlTdGF0ZSkmJi9sb2FkZWR8Y29tcGxldGUvLnRlc3Qoc2NyaXB0LnJlYWR5U3RhdGUpKXtzY3JpcHQub25yZWFkeXN0YXRlY2hhbmdlPW51bGw7Y2FsbGJhY2soe3R5cGU6J2xvYWQnfSk7fX07fQpyYXdEb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHNjcmlwdCk7cmV0dXJuIGNhbGxiYWNrO319CnZhciAkaW50ZXJwb2xhdGVNaW5FcnI9bWluRXJyKCckaW50ZXJwb2xhdGUnKTtmdW5jdGlvbiAkSW50ZXJwb2xhdGVQcm92aWRlcigpe3ZhciBzdGFydFN5bWJvbD0ne3snO3ZhciBlbmRTeW1ib2w9J319Jzt0aGlzLnN0YXJ0U3ltYm9sPWZ1bmN0aW9uKHZhbHVlKXtpZih2YWx1ZSl7c3RhcnRTeW1ib2w9dmFsdWU7cmV0dXJuIHRoaXM7fWVsc2V7cmV0dXJuIHN0YXJ0U3ltYm9sO319O3RoaXMuZW5kU3ltYm9sPWZ1bmN0aW9uKHZhbHVlKXtpZih2YWx1ZSl7ZW5kU3ltYm9sPXZhbHVlO3JldHVybiB0aGlzO31lbHNle3JldHVybiBlbmRTeW1ib2w7fX07dGhpcy4kZ2V0PVsnJHBhcnNlJywnJGV4Y2VwdGlvbkhhbmRsZXInLCckc2NlJyxmdW5jdGlvbigkcGFyc2UsJGV4Y2VwdGlvbkhhbmRsZXIsJHNjZSl7dmFyIHN0YXJ0U3ltYm9sTGVuZ3RoPXN0YXJ0U3ltYm9sLmxlbmd0aCxlbmRTeW1ib2xMZW5ndGg9ZW5kU3ltYm9sLmxlbmd0aDtmdW5jdGlvbiAkaW50ZXJwb2xhdGUodGV4dCxtdXN0SGF2ZUV4cHJlc3Npb24sdHJ1c3RlZENvbnRleHQpe3ZhciBzdGFydEluZGV4LGVuZEluZGV4LGluZGV4PTAscGFydHM9W10sbGVuZ3RoPXRleHQubGVuZ3RoLGhhc0ludGVycG9sYXRpb249ZmFsc2UsZm4sZXhwLGNvbmNhdD1bXTt3aGlsZShpbmRleDxsZW5ndGgpe2lmKCgoc3RhcnRJbmRleD10ZXh0LmluZGV4T2Yoc3RhcnRTeW1ib2wsaW5kZXgpKSE9LTEpJiYoKGVuZEluZGV4PXRleHQuaW5kZXhPZihlbmRTeW1ib2wsc3RhcnRJbmRleCtzdGFydFN5bWJvbExlbmd0aCkpIT0tMSkpeyhpbmRleCE9c3RhcnRJbmRleCkmJnBhcnRzLnB1c2godGV4dC5zdWJzdHJpbmcoaW5kZXgsc3RhcnRJbmRleCkpO3BhcnRzLnB1c2goZm49JHBhcnNlKGV4cD10ZXh0LnN1YnN0cmluZyhzdGFydEluZGV4K3N0YXJ0U3ltYm9sTGVuZ3RoLGVuZEluZGV4KSkpO2ZuLmV4cD1leHA7aW5kZXg9ZW5kSW5kZXgrZW5kU3ltYm9sTGVuZ3RoO2hhc0ludGVycG9sYXRpb249dHJ1ZTt9ZWxzZXsoaW5kZXghPWxlbmd0aCkmJnBhcnRzLnB1c2godGV4dC5zdWJzdHJpbmcoaW5kZXgpKTtpbmRleD1sZW5ndGg7fX0KaWYoIShsZW5ndGg9cGFydHMubGVuZ3RoKSl7cGFydHMucHVzaCgnJyk7bGVuZ3RoPTE7fQppZih0cnVzdGVkQ29udGV4dCYmcGFydHMubGVuZ3RoPjEpe3Rocm93ICRpbnRlcnBvbGF0ZU1pbkVycignbm9jb25jYXQnLCJFcnJvciB3aGlsZSBpbnRlcnBvbGF0aW5nOiB7MH1cblN0cmljdCBDb250ZXh0dWFsIEVzY2FwaW5nIGRpc2FsbG93cyAiKyJpbnRlcnBvbGF0aW9ucyB0aGF0IGNvbmNhdGVuYXRlIG11bHRpcGxlIGV4cHJlc3Npb25zIHdoZW4gYSB0cnVzdGVkIHZhbHVlIGlzICIrInJlcXVpcmVkLiAgU2VlIGh0dHA6Ly9kb2NzLmFuZ3VsYXJqcy5vcmcvYXBpL25nLiRzY2UiLHRleHQpO30KaWYoIW11c3RIYXZlRXhwcmVzc2lvbnx8aGFzSW50ZXJwb2xhdGlvbil7Y29uY2F0Lmxlbmd0aD1sZW5ndGg7Zm49ZnVuY3Rpb24oY29udGV4dCl7dHJ5e2Zvcih2YXIgaT0wLGlpPWxlbmd0aCxwYXJ0O2k8aWk7aSsrKXtpZih0eXBlb2YocGFydD1wYXJ0c1tpXSk9PSdmdW5jdGlvbicpe3BhcnQ9cGFydChjb250ZXh0KTtpZih0cnVzdGVkQ29udGV4dCl7cGFydD0kc2NlLmdldFRydXN0ZWQodHJ1c3RlZENvbnRleHQscGFydCk7fWVsc2V7cGFydD0kc2NlLnZhbHVlT2YocGFydCk7fQppZihwYXJ0PT1udWxsKXtwYXJ0PScnO31lbHNle3N3aXRjaCh0eXBlb2YgcGFydCl7Y2FzZSdzdHJpbmcnOnticmVhazt9CmNhc2UnbnVtYmVyJzp7cGFydD0nJytwYXJ0O2JyZWFrO30KZGVmYXVsdDp7cGFydD10b0pzb24ocGFydCk7fX19fQpjb25jYXRbaV09cGFydDt9CnJldHVybiBjb25jYXQuam9pbignJyk7fQpjYXRjaChlcnIpe3ZhciBuZXdFcnI9JGludGVycG9sYXRlTWluRXJyKCdpbnRlcnInLCJDYW4ndCBpbnRlcnBvbGF0ZTogezB9XG57MX0iLHRleHQsZXJyLnRvU3RyaW5nKCkpOyRleGNlcHRpb25IYW5kbGVyKG5ld0Vycik7fX07Zm4uZXhwPXRleHQ7Zm4ucGFydHM9cGFydHM7cmV0dXJuIGZuO319CiRpbnRlcnBvbGF0ZS5zdGFydFN5bWJvbD1mdW5jdGlvbigpe3JldHVybiBzdGFydFN5bWJvbDt9OyRpbnRlcnBvbGF0ZS5lbmRTeW1ib2w9ZnVuY3Rpb24oKXtyZXR1cm4gZW5kU3ltYm9sO307cmV0dXJuICRpbnRlcnBvbGF0ZTt9XTt9CmZ1bmN0aW9uICRJbnRlcnZhbFByb3ZpZGVyKCl7dGhpcy4kZ2V0PVsnJHJvb3RTY29wZScsJyR3aW5kb3cnLCckcScsZnVuY3Rpb24oJHJvb3RTY29wZSwkd2luZG93LCRxKXt2YXIgaW50ZXJ2YWxzPXt9O2Z1bmN0aW9uIGludGVydmFsKGZuLGRlbGF5LGNvdW50LGludm9rZUFwcGx5KXt2YXIgc2V0SW50ZXJ2YWw9JHdpbmRvdy5zZXRJbnRlcnZhbCxjbGVhckludGVydmFsPSR3aW5kb3cuY2xlYXJJbnRlcnZhbCxkZWZlcnJlZD0kcS5kZWZlcigpLHByb21pc2U9ZGVmZXJyZWQucHJvbWlzZSxpdGVyYXRpb249MCxza2lwQXBwbHk9KGlzRGVmaW5lZChpbnZva2VBcHBseSkmJiFpbnZva2VBcHBseSk7Y291bnQ9aXNEZWZpbmVkKGNvdW50KT9jb3VudDowO3Byb21pc2UudGhlbihudWxsLG51bGwsZm4pO3Byb21pc2UuJCRpbnRlcnZhbElkPXNldEludGVydmFsKGZ1bmN0aW9uIHRpY2soKXtkZWZlcnJlZC5ub3RpZnkoaXRlcmF0aW9uKyspO2lmKGNvdW50PjAmJml0ZXJhdGlvbj49Y291bnQpe2RlZmVycmVkLnJlc29sdmUoaXRlcmF0aW9uKTtjbGVhckludGVydmFsKHByb21pc2UuJCRpbnRlcnZhbElkKTtkZWxldGUgaW50ZXJ2YWxzW3Byb21pc2UuJCRpbnRlcnZhbElkXTt9CmlmKCFza2lwQXBwbHkpJHJvb3RTY29wZS4kYXBwbHkoKTt9LGRlbGF5KTtpbnRlcnZhbHNbcHJvbWlzZS4kJGludGVydmFsSWRdPWRlZmVycmVkO3JldHVybiBwcm9taXNlO30KaW50ZXJ2YWwuY2FuY2VsPWZ1bmN0aW9uKHByb21pc2Upe2lmKHByb21pc2UmJnByb21pc2UuJCRpbnRlcnZhbElkIGluIGludGVydmFscyl7aW50ZXJ2YWxzW3Byb21pc2UuJCRpbnRlcnZhbElkXS5yZWplY3QoJ2NhbmNlbGVkJyk7JHdpbmRvdy5jbGVhckludGVydmFsKHByb21pc2UuJCRpbnRlcnZhbElkKTtkZWxldGUgaW50ZXJ2YWxzW3Byb21pc2UuJCRpbnRlcnZhbElkXTtyZXR1cm4gdHJ1ZTt9CnJldHVybiBmYWxzZTt9O3JldHVybiBpbnRlcnZhbDt9XTt9CmZ1bmN0aW9uICRMb2NhbGVQcm92aWRlcigpe3RoaXMuJGdldD1mdW5jdGlvbigpe3JldHVybntpZDonZW4tdXMnLE5VTUJFUl9GT1JNQVRTOntERUNJTUFMX1NFUDonLicsR1JPVVBfU0VQOicsJyxQQVRURVJOUzpbe21pbkludDoxLG1pbkZyYWM6MCxtYXhGcmFjOjMscG9zUHJlOicnLHBvc1N1ZjonJyxuZWdQcmU6Jy0nLG5lZ1N1ZjonJyxnU2l6ZTozLGxnU2l6ZTozfSx7bWluSW50OjEsbWluRnJhYzoyLG1heEZyYWM6Mixwb3NQcmU6J1x1MDBBNCcscG9zU3VmOicnLG5lZ1ByZTonKFx1MDBBNCcsbmVnU3VmOicpJyxnU2l6ZTozLGxnU2l6ZTozfV0sQ1VSUkVOQ1lfU1lNOickJ30sREFURVRJTUVfRk9STUFUUzp7TU9OVEg6J0phbnVhcnksRmVicnVhcnksTWFyY2gsQXByaWwsTWF5LEp1bmUsSnVseSxBdWd1c3QsU2VwdGVtYmVyLE9jdG9iZXIsTm92ZW1iZXIsRGVjZW1iZXInLnNwbGl0KCcsJyksU0hPUlRNT05USDonSmFuLEZlYixNYXIsQXByLE1heSxKdW4sSnVsLEF1ZyxTZXAsT2N0LE5vdixEZWMnLnNwbGl0KCcsJyksREFZOidTdW5kYXksTW9uZGF5LFR1ZXNkYXksV2VkbmVzZGF5LFRodXJzZGF5LEZyaWRheSxTYXR1cmRheScuc3BsaXQoJywnKSxTSE9SVERBWTonU3VuLE1vbixUdWUsV2VkLFRodSxGcmksU2F0Jy5zcGxpdCgnLCcpLEFNUE1TOlsnQU0nLCdQTSddLG1lZGl1bTonTU1NIGQsIHkgaDptbTpzcyBhJyxzaG9ydDonTS9kL3l5IGg6bW0gYScsZnVsbERhdGU6J0VFRUUsIE1NTU0gZCwgeScsbG9uZ0RhdGU6J01NTU0gZCwgeScsbWVkaXVtRGF0ZTonTU1NIGQsIHknLHNob3J0RGF0ZTonTS9kL3l5JyxtZWRpdW1UaW1lOidoOm1tOnNzIGEnLHNob3J0VGltZTonaDptbSBhJ30scGx1cmFsQ2F0OmZ1bmN0aW9uKG51bSl7aWYobnVtPT09MSl7cmV0dXJuJ29uZSc7fQpyZXR1cm4nb3RoZXInO319O307fQp2YXIgUEFUSF9NQVRDSD0vXihbXlw/I10qKShcPyhbXiNdKikpPygjKC4qKSk/JC8sREVGQVVMVF9QT1JUUz17J2h0dHAnOjgwLCdodHRwcyc6NDQzLCdmdHAnOjIxfTt2YXIgJGxvY2F0aW9uTWluRXJyPW1pbkVycignJGxvY2F0aW9uJyk7ZnVuY3Rpb24gZW5jb2RlUGF0aChwYXRoKXt2YXIgc2VnbWVudHM9cGF0aC5zcGxpdCgnLycpLGk9c2VnbWVudHMubGVuZ3RoO3doaWxlKGktLSl7c2VnbWVudHNbaV09ZW5jb2RlVXJpU2VnbWVudChzZWdtZW50c1tpXSk7fQpyZXR1cm4gc2VnbWVudHMuam9pbignLycpO30KZnVuY3Rpb24gcGFyc2VBYnNvbHV0ZVVybChhYnNvbHV0ZVVybCxsb2NhdGlvbk9iaixhcHBCYXNlKXt2YXIgcGFyc2VkVXJsPXVybFJlc29sdmUoYWJzb2x1dGVVcmwsYXBwQmFzZSk7bG9jYXRpb25PYmouJCRwcm90b2NvbD1wYXJzZWRVcmwucHJvdG9jb2w7bG9jYXRpb25PYmouJCRob3N0PXBhcnNlZFVybC5ob3N0bmFtZTtsb2NhdGlvbk9iai4kJHBvcnQ9aW50KHBhcnNlZFVybC5wb3J0KXx8REVGQVVMVF9QT1JUU1twYXJzZWRVcmwucHJvdG9jb2xdfHxudWxsO30KZnVuY3Rpb24gcGFyc2VBcHBVcmwocmVsYXRpdmVVcmwsbG9jYXRpb25PYmosYXBwQmFzZSl7dmFyIHByZWZpeGVkPShyZWxhdGl2ZVVybC5jaGFyQXQoMCkhPT0nLycpO2lmKHByZWZpeGVkKXtyZWxhdGl2ZVVybD0nLycrcmVsYXRpdmVVcmw7fQp2YXIgbWF0Y2g9dXJsUmVzb2x2ZShyZWxhdGl2ZVVybCxhcHBCYXNlKTtsb2NhdGlvbk9iai4kJHBhdGg9ZGVjb2RlVVJJQ29tcG9uZW50KHByZWZpeGVkJiZtYXRjaC5wYXRobmFtZS5jaGFyQXQoMCk9PT0nLyc/bWF0Y2gucGF0aG5hbWUuc3Vic3RyaW5nKDEpOm1hdGNoLnBhdGhuYW1lKTtsb2NhdGlvbk9iai4kJHNlYXJjaD1wYXJzZUtleVZhbHVlKG1hdGNoLnNlYXJjaCk7bG9jYXRpb25PYmouJCRoYXNoPWRlY29kZVVSSUNvbXBvbmVudChtYXRjaC5oYXNoKTtpZihsb2NhdGlvbk9iai4kJHBhdGgmJmxvY2F0aW9uT2JqLiQkcGF0aC5jaGFyQXQoMCkhPScvJyl7bG9jYXRpb25PYmouJCRwYXRoPScvJytsb2NhdGlvbk9iai4kJHBhdGg7fX0KZnVuY3Rpb24gYmVnaW5zV2l0aChiZWdpbix3aG9sZSl7aWYod2hvbGUuaW5kZXhPZihiZWdpbik9PT0wKXtyZXR1cm4gd2hvbGUuc3Vic3RyKGJlZ2luLmxlbmd0aCk7fX0KZnVuY3Rpb24gc3RyaXBIYXNoKHVybCl7dmFyIGluZGV4PXVybC5pbmRleE9mKCcjJyk7cmV0dXJuIGluZGV4PT0tMT91cmw6dXJsLnN1YnN0cigwLGluZGV4KTt9CmZ1bmN0aW9uIHN0cmlwRmlsZSh1cmwpe3JldHVybiB1cmwuc3Vic3RyKDAsc3RyaXBIYXNoKHVybCkubGFzdEluZGV4T2YoJy8nKSsxKTt9CmZ1bmN0aW9uIHNlcnZlckJhc2UodXJsKXtyZXR1cm4gdXJsLnN1YnN0cmluZygwLHVybC5pbmRleE9mKCcvJyx1cmwuaW5kZXhPZignLy8nKSsyKSk7fQpmdW5jdGlvbiBMb2NhdGlvbkh0bWw1VXJsKGFwcEJhc2UsYmFzZVByZWZpeCl7dGhpcy4kJGh0bWw1PXRydWU7YmFzZVByZWZpeD1iYXNlUHJlZml4fHwnJzt2YXIgYXBwQmFzZU5vRmlsZT1zdHJpcEZpbGUoYXBwQmFzZSk7cGFyc2VBYnNvbHV0ZVVybChhcHBCYXNlLHRoaXMsYXBwQmFzZSk7dGhpcy4kJHBhcnNlPWZ1bmN0aW9uKHVybCl7dmFyIHBhdGhVcmw9YmVnaW5zV2l0aChhcHBCYXNlTm9GaWxlLHVybCk7aWYoIWlzU3RyaW5nKHBhdGhVcmwpKXt0aHJvdyAkbG9jYXRpb25NaW5FcnIoJ2lwdGhwcmZ4JywnSW52YWxpZCB1cmwgInswfSIsIG1pc3NpbmcgcGF0aCBwcmVmaXggInsxfSIuJyx1cmwsYXBwQmFzZU5vRmlsZSk7fQpwYXJzZUFwcFVybChwYXRoVXJsLHRoaXMsYXBwQmFzZSk7aWYoIXRoaXMuJCRwYXRoKXt0aGlzLiQkcGF0aD0nLyc7fQp0aGlzLiQkY29tcG9zZSgpO307dGhpcy4kJGNvbXBvc2U9ZnVuY3Rpb24oKXt2YXIgc2VhcmNoPXRvS2V5VmFsdWUodGhpcy4kJHNlYXJjaCksaGFzaD10aGlzLiQkaGFzaD8nIycrZW5jb2RlVXJpU2VnbWVudCh0aGlzLiQkaGFzaCk6Jyc7dGhpcy4kJHVybD1lbmNvZGVQYXRoKHRoaXMuJCRwYXRoKSsoc2VhcmNoPyc/JytzZWFyY2g6JycpK2hhc2g7dGhpcy4kJGFic1VybD1hcHBCYXNlTm9GaWxlK3RoaXMuJCR1cmwuc3Vic3RyKDEpO307dGhpcy4kJHJld3JpdGU9ZnVuY3Rpb24odXJsKXt2YXIgYXBwVXJsLHByZXZBcHBVcmw7aWYoKGFwcFVybD1iZWdpbnNXaXRoKGFwcEJhc2UsdXJsKSkhPT11bmRlZmluZWQpe3ByZXZBcHBVcmw9YXBwVXJsO2lmKChhcHBVcmw9YmVnaW5zV2l0aChiYXNlUHJlZml4LGFwcFVybCkpIT09dW5kZWZpbmVkKXtyZXR1cm4gYXBwQmFzZU5vRmlsZSsoYmVnaW5zV2l0aCgnLycsYXBwVXJsKXx8YXBwVXJsKTt9ZWxzZXtyZXR1cm4gYXBwQmFzZStwcmV2QXBwVXJsO319ZWxzZSBpZigoYXBwVXJsPWJlZ2luc1dpdGgoYXBwQmFzZU5vRmlsZSx1cmwpKSE9PXVuZGVmaW5lZCl7cmV0dXJuIGFwcEJhc2VOb0ZpbGUrYXBwVXJsO31lbHNlIGlmKGFwcEJhc2VOb0ZpbGU9PXVybCsnLycpe3JldHVybiBhcHBCYXNlTm9GaWxlO319O30KZnVuY3Rpb24gTG9jYXRpb25IYXNoYmFuZ1VybChhcHBCYXNlLGhhc2hQcmVmaXgpe3ZhciBhcHBCYXNlTm9GaWxlPXN0cmlwRmlsZShhcHBCYXNlKTtwYXJzZUFic29sdXRlVXJsKGFwcEJhc2UsdGhpcyxhcHBCYXNlKTt0aGlzLiQkcGFyc2U9ZnVuY3Rpb24odXJsKXt2YXIgd2l0aG91dEJhc2VVcmw9YmVnaW5zV2l0aChhcHBCYXNlLHVybCl8fGJlZ2luc1dpdGgoYXBwQmFzZU5vRmlsZSx1cmwpO3ZhciB3aXRob3V0SGFzaFVybD13aXRob3V0QmFzZVVybC5jaGFyQXQoMCk9PScjJz9iZWdpbnNXaXRoKGhhc2hQcmVmaXgsd2l0aG91dEJhc2VVcmwpOih0aGlzLiQkaHRtbDUpP3dpdGhvdXRCYXNlVXJsOicnO2lmKCFpc1N0cmluZyh3aXRob3V0SGFzaFVybCkpe3Rocm93ICRsb2NhdGlvbk1pbkVycignaWhzaHByZngnLCdJbnZhbGlkIHVybCAiezB9IiwgbWlzc2luZyBoYXNoIHByZWZpeCAiezF9Ii4nLHVybCxoYXNoUHJlZml4KTt9CnBhcnNlQXBwVXJsKHdpdGhvdXRIYXNoVXJsLHRoaXMsYXBwQmFzZSk7dGhpcy4kJHBhdGg9cmVtb3ZlV2luZG93c0RyaXZlTmFtZSh0aGlzLiQkcGF0aCx3aXRob3V0SGFzaFVybCxhcHBCYXNlKTt0aGlzLiQkY29tcG9zZSgpO2Z1bmN0aW9uIHJlbW92ZVdpbmRvd3NEcml2ZU5hbWUocGF0aCx1cmwsYmFzZSl7dmFyIHdpbmRvd3NGaWxlUGF0aEV4cD0vXlwvW0EtWl06KFwvLiopLzt2YXIgZmlyc3RQYXRoU2VnbWVudE1hdGNoO2lmKHVybC5pbmRleE9mKGJhc2UpPT09MCl7dXJsPXVybC5yZXBsYWNlKGJhc2UsJycpO30KaWYod2luZG93c0ZpbGVQYXRoRXhwLmV4ZWModXJsKSl7cmV0dXJuIHBhdGg7fQpmaXJzdFBhdGhTZWdtZW50TWF0Y2g9d2luZG93c0ZpbGVQYXRoRXhwLmV4ZWMocGF0aCk7cmV0dXJuIGZpcnN0UGF0aFNlZ21lbnRNYXRjaD9maXJzdFBhdGhTZWdtZW50TWF0Y2hbMV06cGF0aDt9fTt0aGlzLiQkY29tcG9zZT1mdW5jdGlvbigpe3ZhciBzZWFyY2g9dG9LZXlWYWx1ZSh0aGlzLiQkc2VhcmNoKSxoYXNoPXRoaXMuJCRoYXNoPycjJytlbmNvZGVVcmlTZWdtZW50KHRoaXMuJCRoYXNoKTonJzt0aGlzLiQkdXJsPWVuY29kZVBhdGgodGhpcy4kJHBhdGgpKyhzZWFyY2g/Jz8nK3NlYXJjaDonJykraGFzaDt0aGlzLiQkYWJzVXJsPWFwcEJhc2UrKHRoaXMuJCR1cmw/aGFzaFByZWZpeCt0aGlzLiQkdXJsOicnKTt9O3RoaXMuJCRyZXdyaXRlPWZ1bmN0aW9uKHVybCl7aWYoc3RyaXBIYXNoKGFwcEJhc2UpPT1zdHJpcEhhc2godXJsKSl7cmV0dXJuIHVybDt9fTt9CmZ1bmN0aW9uIExvY2F0aW9uSGFzaGJhbmdJbkh0bWw1VXJsKGFwcEJhc2UsaGFzaFByZWZpeCl7dGhpcy4kJGh0bWw1PXRydWU7TG9jYXRpb25IYXNoYmFuZ1VybC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dmFyIGFwcEJhc2VOb0ZpbGU9c3RyaXBGaWxlKGFwcEJhc2UpO3RoaXMuJCRyZXdyaXRlPWZ1bmN0aW9uKHVybCl7dmFyIGFwcFVybDtpZihhcHBCYXNlPT1zdHJpcEhhc2godXJsKSl7cmV0dXJuIHVybDt9ZWxzZSBpZigoYXBwVXJsPWJlZ2luc1dpdGgoYXBwQmFzZU5vRmlsZSx1cmwpKSl7cmV0dXJuIGFwcEJhc2UraGFzaFByZWZpeCthcHBVcmw7fWVsc2UgaWYoYXBwQmFzZU5vRmlsZT09PXVybCsnLycpe3JldHVybiBhcHBCYXNlTm9GaWxlO319O3RoaXMuJCRjb21wb3NlPWZ1bmN0aW9uKCl7dmFyIHNlYXJjaD10b0tleVZhbHVlKHRoaXMuJCRzZWFyY2gpLGhhc2g9dGhpcy4kJGhhc2g/JyMnK2VuY29kZVVyaVNlZ21lbnQodGhpcy4kJGhhc2gpOicnO3RoaXMuJCR1cmw9ZW5jb2RlUGF0aCh0aGlzLiQkcGF0aCkrKHNlYXJjaD8nPycrc2VhcmNoOicnKStoYXNoO3RoaXMuJCRhYnNVcmw9YXBwQmFzZStoYXNoUHJlZml4K3RoaXMuJCR1cmw7fTt9CkxvY2F0aW9uSGFzaGJhbmdJbkh0bWw1VXJsLnByb3RvdHlwZT1Mb2NhdGlvbkhhc2hiYW5nVXJsLnByb3RvdHlwZT1Mb2NhdGlvbkh0bWw1VXJsLnByb3RvdHlwZT17JCRodG1sNTpmYWxzZSwkJHJlcGxhY2U6ZmFsc2UsYWJzVXJsOmxvY2F0aW9uR2V0dGVyKCckJGFic1VybCcpLHVybDpmdW5jdGlvbih1cmwscmVwbGFjZSl7aWYoaXNVbmRlZmluZWQodXJsKSkKcmV0dXJuIHRoaXMuJCR1cmw7dmFyIG1hdGNoPVBBVEhfTUFUQ0guZXhlYyh1cmwpO2lmKG1hdGNoWzFdKXRoaXMucGF0aChkZWNvZGVVUklDb21wb25lbnQobWF0Y2hbMV0pKTtpZihtYXRjaFsyXXx8bWF0Y2hbMV0pdGhpcy5zZWFyY2gobWF0Y2hbM118fCcnKTt0aGlzLmhhc2gobWF0Y2hbNV18fCcnLHJlcGxhY2UpO3JldHVybiB0aGlzO30scHJvdG9jb2w6bG9jYXRpb25HZXR0ZXIoJyQkcHJvdG9jb2wnKSxob3N0OmxvY2F0aW9uR2V0dGVyKCckJGhvc3QnKSxwb3J0OmxvY2F0aW9uR2V0dGVyKCckJHBvcnQnKSxwYXRoOmxvY2F0aW9uR2V0dGVyU2V0dGVyKCckJHBhdGgnLGZ1bmN0aW9uKHBhdGgpe3JldHVybiBwYXRoLmNoYXJBdCgwKT09Jy8nP3BhdGg6Jy8nK3BhdGg7fSksc2VhcmNoOmZ1bmN0aW9uKHNlYXJjaCxwYXJhbVZhbHVlKXtzd2l0Y2goYXJndW1lbnRzLmxlbmd0aCl7Y2FzZSAwOnJldHVybiB0aGlzLiQkc2VhcmNoO2Nhc2UgMTppZihpc1N0cmluZyhzZWFyY2gpKXt0aGlzLiQkc2VhcmNoPXBhcnNlS2V5VmFsdWUoc2VhcmNoKTt9ZWxzZSBpZihpc09iamVjdChzZWFyY2gpKXt0aGlzLiQkc2VhcmNoPXNlYXJjaDt9ZWxzZXt0aHJvdyAkbG9jYXRpb25NaW5FcnIoJ2lzcmNoYXJnJywnVGhlIGZpcnN0IGFyZ3VtZW50IG9mIHRoZSBgJGxvY2F0aW9uI3NlYXJjaCgpYCBjYWxsIG11c3QgYmUgYSBzdHJpbmcgb3IgYW4gb2JqZWN0LicpO30KYnJlYWs7ZGVmYXVsdDppZihpc1VuZGVmaW5lZChwYXJhbVZhbHVlKXx8cGFyYW1WYWx1ZT09PW51bGwpe2RlbGV0ZSB0aGlzLiQkc2VhcmNoW3NlYXJjaF07fWVsc2V7dGhpcy4kJHNlYXJjaFtzZWFyY2hdPXBhcmFtVmFsdWU7fX0KdGhpcy4kJGNvbXBvc2UoKTtyZXR1cm4gdGhpczt9LGhhc2g6bG9jYXRpb25HZXR0ZXJTZXR0ZXIoJyQkaGFzaCcsaWRlbnRpdHkpLHJlcGxhY2U6ZnVuY3Rpb24oKXt0aGlzLiQkcmVwbGFjZT10cnVlO3JldHVybiB0aGlzO319O2Z1bmN0aW9uIGxvY2F0aW9uR2V0dGVyKHByb3BlcnR5KXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gdGhpc1twcm9wZXJ0eV07fTt9CmZ1bmN0aW9uIGxvY2F0aW9uR2V0dGVyU2V0dGVyKHByb3BlcnR5LHByZXByb2Nlc3Mpe3JldHVybiBmdW5jdGlvbih2YWx1ZSl7aWYoaXNVbmRlZmluZWQodmFsdWUpKQpyZXR1cm4gdGhpc1twcm9wZXJ0eV07dGhpc1twcm9wZXJ0eV09cHJlcHJvY2Vzcyh2YWx1ZSk7dGhpcy4kJGNvbXBvc2UoKTtyZXR1cm4gdGhpczt9O30KZnVuY3Rpb24gJExvY2F0aW9uUHJvdmlkZXIoKXt2YXIgaGFzaFByZWZpeD0nJyxodG1sNU1vZGU9ZmFsc2U7dGhpcy5oYXNoUHJlZml4PWZ1bmN0aW9uKHByZWZpeCl7aWYoaXNEZWZpbmVkKHByZWZpeCkpe2hhc2hQcmVmaXg9cHJlZml4O3JldHVybiB0aGlzO31lbHNle3JldHVybiBoYXNoUHJlZml4O319O3RoaXMuaHRtbDVNb2RlPWZ1bmN0aW9uKG1vZGUpe2lmKGlzRGVmaW5lZChtb2RlKSl7aHRtbDVNb2RlPW1vZGU7cmV0dXJuIHRoaXM7fWVsc2V7cmV0dXJuIGh0bWw1TW9kZTt9fTt0aGlzLiRnZXQ9Wyckcm9vdFNjb3BlJywnJGJyb3dzZXInLCckc25pZmZlcicsJyRyb290RWxlbWVudCcsZnVuY3Rpb24oJHJvb3RTY29wZSwkYnJvd3Nlciwkc25pZmZlciwkcm9vdEVsZW1lbnQpe3ZhciAkbG9jYXRpb24sTG9jYXRpb25Nb2RlLGJhc2VIcmVmPSRicm93c2VyLmJhc2VIcmVmKCksaW5pdGlhbFVybD0kYnJvd3Nlci51cmwoKSxhcHBCYXNlO2lmKGh0bWw1TW9kZSl7YXBwQmFzZT1zZXJ2ZXJCYXNlKGluaXRpYWxVcmwpKyhiYXNlSHJlZnx8Jy8nKTtMb2NhdGlvbk1vZGU9JHNuaWZmZXIuaGlzdG9yeT9Mb2NhdGlvbkh0bWw1VXJsOkxvY2F0aW9uSGFzaGJhbmdJbkh0bWw1VXJsO31lbHNle2FwcEJhc2U9c3RyaXBIYXNoKGluaXRpYWxVcmwpO0xvY2F0aW9uTW9kZT1Mb2NhdGlvbkhhc2hiYW5nVXJsO30KJGxvY2F0aW9uPW5ldyBMb2NhdGlvbk1vZGUoYXBwQmFzZSwnIycraGFzaFByZWZpeCk7JGxvY2F0aW9uLiQkcGFyc2UoJGxvY2F0aW9uLiQkcmV3cml0ZShpbml0aWFsVXJsKSk7JHJvb3RFbGVtZW50Lm9uKCdjbGljaycsZnVuY3Rpb24oZXZlbnQpe2lmKGV2ZW50LmN0cmxLZXl8fGV2ZW50Lm1ldGFLZXl8fGV2ZW50LndoaWNoPT0yKXJldHVybjt2YXIgZWxtPWpxTGl0ZShldmVudC50YXJnZXQpO3doaWxlKGxvd2VyY2FzZShlbG1bMF0ubm9kZU5hbWUpIT09J2EnKXtpZihlbG1bMF09PT0kcm9vdEVsZW1lbnRbMF18fCEoZWxtPWVsbS5wYXJlbnQoKSlbMF0pcmV0dXJuO30KdmFyIGFic0hyZWY9ZWxtLnByb3AoJ2hyZWYnKTtpZihpc09iamVjdChhYnNIcmVmKSYmYWJzSHJlZi50b1N0cmluZygpPT09J1tvYmplY3QgU1ZHQW5pbWF0ZWRTdHJpbmddJyl7YWJzSHJlZj11cmxSZXNvbHZlKGFic0hyZWYuYW5pbVZhbCkuaHJlZjt9CmlmKExvY2F0aW9uTW9kZT09PUxvY2F0aW9uSGFzaGJhbmdJbkh0bWw1VXJsKXt2YXIgaHJlZj1lbG0uYXR0cignaHJlZicpfHxlbG0uYXR0cigneGxpbms6aHJlZicpO2lmKGhyZWYuaW5kZXhPZignOi8vJyk8MCl7dmFyIHByZWZpeD0nIycraGFzaFByZWZpeDtpZihocmVmWzBdPT0nLycpe2Fic0hyZWY9YXBwQmFzZStwcmVmaXgraHJlZjt9ZWxzZSBpZihocmVmWzBdPT0nIycpe2Fic0hyZWY9YXBwQmFzZStwcmVmaXgrKCRsb2NhdGlvbi5wYXRoKCl8fCcvJykraHJlZjt9ZWxzZXt2YXIgc3RhY2s9JGxvY2F0aW9uLnBhdGgoKS5zcGxpdCgiLyIpLHBhcnRzPWhyZWYuc3BsaXQoIi8iKTtmb3IodmFyIGk9MDtpPHBhcnRzLmxlbmd0aDtpKyspe2lmKHBhcnRzW2ldPT0iLiIpCmNvbnRpbnVlO2Vsc2UgaWYocGFydHNbaV09PSIuLiIpCnN0YWNrLnBvcCgpO2Vsc2UgaWYocGFydHNbaV0ubGVuZ3RoKQpzdGFjay5wdXNoKHBhcnRzW2ldKTt9CmFic0hyZWY9YXBwQmFzZStwcmVmaXgrc3RhY2suam9pbignLycpO319fQp2YXIgcmV3cml0dGVuVXJsPSRsb2NhdGlvbi4kJHJld3JpdGUoYWJzSHJlZik7aWYoYWJzSHJlZiYmIWVsbS5hdHRyKCd0YXJnZXQnKSYmcmV3cml0dGVuVXJsJiYhZXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkpe2V2ZW50LnByZXZlbnREZWZhdWx0KCk7aWYocmV3cml0dGVuVXJsIT0kYnJvd3Nlci51cmwoKSl7JGxvY2F0aW9uLiQkcGFyc2UocmV3cml0dGVuVXJsKTskcm9vdFNjb3BlLiRhcHBseSgpO3dpbmRvdy5hbmd1bGFyWydmZi02ODQyMDgtcHJldmVudERlZmF1bHQnXT10cnVlO319fSk7aWYoJGxvY2F0aW9uLmFic1VybCgpIT1pbml0aWFsVXJsKXskYnJvd3Nlci51cmwoJGxvY2F0aW9uLmFic1VybCgpLHRydWUpO30KJGJyb3dzZXIub25VcmxDaGFuZ2UoZnVuY3Rpb24obmV3VXJsKXtpZigkbG9jYXRpb24uYWJzVXJsKCkhPW5ld1VybCl7JHJvb3RTY29wZS4kZXZhbEFzeW5jKGZ1bmN0aW9uKCl7dmFyIG9sZFVybD0kbG9jYXRpb24uYWJzVXJsKCk7JGxvY2F0aW9uLiQkcGFyc2UobmV3VXJsKTtpZigkcm9vdFNjb3BlLiRicm9hZGNhc3QoJyRsb2NhdGlvbkNoYW5nZVN0YXJ0JyxuZXdVcmwsb2xkVXJsKS5kZWZhdWx0UHJldmVudGVkKXskbG9jYXRpb24uJCRwYXJzZShvbGRVcmwpOyRicm93c2VyLnVybChvbGRVcmwpO31lbHNle2FmdGVyTG9jYXRpb25DaGFuZ2Uob2xkVXJsKTt9fSk7aWYoISRyb290U2NvcGUuJCRwaGFzZSkkcm9vdFNjb3BlLiRkaWdlc3QoKTt9fSk7dmFyIGNoYW5nZUNvdW50ZXI9MDskcm9vdFNjb3BlLiR3YXRjaChmdW5jdGlvbiAkbG9jYXRpb25XYXRjaCgpe3ZhciBvbGRVcmw9JGJyb3dzZXIudXJsKCk7dmFyIGN1cnJlbnRSZXBsYWNlPSRsb2NhdGlvbi4kJHJlcGxhY2U7aWYoIWNoYW5nZUNvdW50ZXJ8fG9sZFVybCE9JGxvY2F0aW9uLmFic1VybCgpKXtjaGFuZ2VDb3VudGVyKys7JHJvb3RTY29wZS4kZXZhbEFzeW5jKGZ1bmN0aW9uKCl7aWYoJHJvb3RTY29wZS4kYnJvYWRjYXN0KCckbG9jYXRpb25DaGFuZ2VTdGFydCcsJGxvY2F0aW9uLmFic1VybCgpLG9sZFVybCkuZGVmYXVsdFByZXZlbnRlZCl7JGxvY2F0aW9uLiQkcGFyc2Uob2xkVXJsKTt9ZWxzZXskYnJvd3Nlci51cmwoJGxvY2F0aW9uLmFic1VybCgpLGN1cnJlbnRSZXBsYWNlKTthZnRlckxvY2F0aW9uQ2hhbmdlKG9sZFVybCk7fX0pO30KJGxvY2F0aW9uLiQkcmVwbGFjZT1mYWxzZTtyZXR1cm4gY2hhbmdlQ291bnRlcjt9KTtyZXR1cm4gJGxvY2F0aW9uO2Z1bmN0aW9uIGFmdGVyTG9jYXRpb25DaGFuZ2Uob2xkVXJsKXskcm9vdFNjb3BlLiRicm9hZGNhc3QoJyRsb2NhdGlvbkNoYW5nZVN1Y2Nlc3MnLCRsb2NhdGlvbi5hYnNVcmwoKSxvbGRVcmwpO319XTt9CmZ1bmN0aW9uICRMb2dQcm92aWRlcigpe3ZhciBkZWJ1Zz10cnVlLHNlbGY9dGhpczt0aGlzLmRlYnVnRW5hYmxlZD1mdW5jdGlvbihmbGFnKXtpZihpc0RlZmluZWQoZmxhZykpe2RlYnVnPWZsYWc7cmV0dXJuIHRoaXM7fWVsc2V7cmV0dXJuIGRlYnVnO319O3RoaXMuJGdldD1bJyR3aW5kb3cnLGZ1bmN0aW9uKCR3aW5kb3cpe3JldHVybntsb2c6Y29uc29sZUxvZygnbG9nJyksaW5mbzpjb25zb2xlTG9nKCdpbmZvJyksd2Fybjpjb25zb2xlTG9nKCd3YXJuJyksZXJyb3I6Y29uc29sZUxvZygnZXJyb3InKSxkZWJ1ZzooZnVuY3Rpb24oKXt2YXIgZm49Y29uc29sZUxvZygnZGVidWcnKTtyZXR1cm4gZnVuY3Rpb24oKXtpZihkZWJ1Zyl7Zm4uYXBwbHkoc2VsZixhcmd1bWVudHMpO319O30oKSl9O2Z1bmN0aW9uIGZvcm1hdEVycm9yKGFyZyl7aWYoYXJnIGluc3RhbmNlb2YgRXJyb3Ipe2lmKGFyZy5zdGFjayl7YXJnPShhcmcubWVzc2FnZSYmYXJnLnN0YWNrLmluZGV4T2YoYXJnLm1lc3NhZ2UpPT09LTEpPydFcnJvcjogJythcmcubWVzc2FnZSsnXG4nK2FyZy5zdGFjazphcmcuc3RhY2s7fWVsc2UgaWYoYXJnLnNvdXJjZVVSTCl7YXJnPWFyZy5tZXNzYWdlKydcbicrYXJnLnNvdXJjZVVSTCsnOicrYXJnLmxpbmU7fX0KcmV0dXJuIGFyZzt9CmZ1bmN0aW9uIGNvbnNvbGVMb2codHlwZSl7dmFyIGNvbnNvbGU9JHdpbmRvdy5jb25zb2xlfHx7fSxsb2dGbj1jb25zb2xlW3R5cGVdfHxjb25zb2xlLmxvZ3x8bm9vcCxoYXNBcHBseT1mYWxzZTt0cnl7aGFzQXBwbHk9ISFsb2dGbi5hcHBseTt9Y2F0Y2goZSl7fQppZihoYXNBcHBseSl7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGFyZ3M9W107Zm9yRWFjaChhcmd1bWVudHMsZnVuY3Rpb24oYXJnKXthcmdzLnB1c2goZm9ybWF0RXJyb3IoYXJnKSk7fSk7cmV0dXJuIGxvZ0ZuLmFwcGx5KGNvbnNvbGUsYXJncyk7fTt9CnJldHVybiBmdW5jdGlvbihhcmcxLGFyZzIpe2xvZ0ZuKGFyZzEsYXJnMj09bnVsbD8nJzphcmcyKTt9O319XTt9CnZhciAkcGFyc2VNaW5FcnI9bWluRXJyKCckcGFyc2UnKTt2YXIgcHJvbWlzZVdhcm5pbmdDYWNoZT17fTt2YXIgcHJvbWlzZVdhcm5pbmc7ZnVuY3Rpb24gZW5zdXJlU2FmZU1lbWJlck5hbWUobmFtZSxmdWxsRXhwcmVzc2lvbil7aWYobmFtZT09PSJfX2RlZmluZUdldHRlcl9fInx8bmFtZT09PSJfX2RlZmluZVNldHRlcl9fInx8bmFtZT09PSJfX2xvb2t1cEdldHRlcl9fInx8bmFtZT09PSJfX2xvb2t1cFNldHRlcl9fInx8bmFtZT09PSJfX3Byb3RvX18iKXt0aHJvdyAkcGFyc2VNaW5FcnIoJ2lzZWNmbGQnLCdBdHRlbXB0aW5nIHRvIGFjY2VzcyBhIGRpc2FsbG93ZWQgZmllbGQgaW4gQW5ndWxhciBleHByZXNzaW9ucyEgJworJ0V4cHJlc3Npb246IHswfScsZnVsbEV4cHJlc3Npb24pO30KcmV0dXJuIG5hbWU7fQpmdW5jdGlvbiBlbnN1cmVTYWZlT2JqZWN0KG9iaixmdWxsRXhwcmVzc2lvbil7aWYob2JqKXtpZihvYmouY29uc3RydWN0b3I9PT1vYmope3Rocm93ICRwYXJzZU1pbkVycignaXNlY2ZuJywnUmVmZXJlbmNpbmcgRnVuY3Rpb24gaW4gQW5ndWxhciBleHByZXNzaW9ucyBpcyBkaXNhbGxvd2VkISBFeHByZXNzaW9uOiB7MH0nLGZ1bGxFeHByZXNzaW9uKTt9ZWxzZSBpZihvYmouZG9jdW1lbnQmJm9iai5sb2NhdGlvbiYmb2JqLmFsZXJ0JiZvYmouc2V0SW50ZXJ2YWwpe3Rocm93ICRwYXJzZU1pbkVycignaXNlY3dpbmRvdycsJ1JlZmVyZW5jaW5nIHRoZSBXaW5kb3cgaW4gQW5ndWxhciBleHByZXNzaW9ucyBpcyBkaXNhbGxvd2VkISBFeHByZXNzaW9uOiB7MH0nLGZ1bGxFeHByZXNzaW9uKTt9ZWxzZSBpZihvYmouY2hpbGRyZW4mJihvYmoubm9kZU5hbWV8fChvYmoucHJvcCYmb2JqLmF0dHImJm9iai5maW5kKSkpe3Rocm93ICRwYXJzZU1pbkVycignaXNlY2RvbScsJ1JlZmVyZW5jaW5nIERPTSBub2RlcyBpbiBBbmd1bGFyIGV4cHJlc3Npb25zIGlzIGRpc2FsbG93ZWQhIEV4cHJlc3Npb246IHswfScsZnVsbEV4cHJlc3Npb24pO31lbHNlIGlmKG9iaj09PU9iamVjdCl7dGhyb3cgJHBhcnNlTWluRXJyKCdpc2Vjb2JqJywnUmVmZXJlbmNpbmcgT2JqZWN0IGluIEFuZ3VsYXIgZXhwcmVzc2lvbnMgaXMgZGlzYWxsb3dlZCEgRXhwcmVzc2lvbjogezB9JyxmdWxsRXhwcmVzc2lvbik7fX0KcmV0dXJuIG9iajt9CnZhciBDQUxMPUZ1bmN0aW9uLnByb3RvdHlwZS5jYWxsO3ZhciBBUFBMWT1GdW5jdGlvbi5wcm90b3R5cGUuYXBwbHk7dmFyIEJJTkQ9RnVuY3Rpb24ucHJvdG90eXBlLmJpbmQ7ZnVuY3Rpb24gZW5zdXJlU2FmZUZ1bmN0aW9uKG9iaixmdWxsRXhwcmVzc2lvbil7aWYob2JqKXtpZihvYmouY29uc3RydWN0b3I9PT1vYmope3Rocm93ICRwYXJzZU1pbkVycignaXNlY2ZuJywnUmVmZXJlbmNpbmcgRnVuY3Rpb24gaW4gQW5ndWxhciBleHByZXNzaW9ucyBpcyBkaXNhbGxvd2VkISBFeHByZXNzaW9uOiB7MH0nLGZ1bGxFeHByZXNzaW9uKTt9ZWxzZSBpZihvYmo9PT1DQUxMfHxvYmo9PT1BUFBMWXx8KEJJTkQmJm9iaj09PUJJTkQpKXt0aHJvdyAkcGFyc2VNaW5FcnIoJ2lzZWNmZicsJ1JlZmVyZW5jaW5nIGNhbGwsIGFwcGx5IG9yIGJpbmQgaW4gQW5ndWxhciBleHByZXNzaW9ucyBpcyBkaXNhbGxvd2VkISBFeHByZXNzaW9uOiB7MH0nLGZ1bGxFeHByZXNzaW9uKTt9fX0KdmFyIE9QRVJBVE9SUz17J251bGwnOmZ1bmN0aW9uKCl7cmV0dXJuIG51bGw7fSwndHJ1ZSc6ZnVuY3Rpb24oKXtyZXR1cm4gdHJ1ZTt9LCdmYWxzZSc6ZnVuY3Rpb24oKXtyZXR1cm4gZmFsc2U7fSx1bmRlZmluZWQ6bm9vcCwnKyc6ZnVuY3Rpb24oc2VsZixsb2NhbHMsYSxiKXthPWEoc2VsZixsb2NhbHMpO2I9YihzZWxmLGxvY2Fscyk7aWYoaXNEZWZpbmVkKGEpKXtpZihpc0RlZmluZWQoYikpe3JldHVybiBhK2I7fQpyZXR1cm4gYTt9CnJldHVybiBpc0RlZmluZWQoYik/Yjp1bmRlZmluZWQ7fSwnLSc6ZnVuY3Rpb24oc2VsZixsb2NhbHMsYSxiKXthPWEoc2VsZixsb2NhbHMpO2I9YihzZWxmLGxvY2Fscyk7cmV0dXJuKGlzRGVmaW5lZChhKT9hOjApLShpc0RlZmluZWQoYik/YjowKTt9LCcqJzpmdW5jdGlvbihzZWxmLGxvY2FscyxhLGIpe3JldHVybiBhKHNlbGYsbG9jYWxzKSpiKHNlbGYsbG9jYWxzKTt9LCcvJzpmdW5jdGlvbihzZWxmLGxvY2FscyxhLGIpe3JldHVybiBhKHNlbGYsbG9jYWxzKS9iKHNlbGYsbG9jYWxzKTt9LCclJzpmdW5jdGlvbihzZWxmLGxvY2FscyxhLGIpe3JldHVybiBhKHNlbGYsbG9jYWxzKSViKHNlbGYsbG9jYWxzKTt9LCdeJzpmdW5jdGlvbihzZWxmLGxvY2FscyxhLGIpe3JldHVybiBhKHNlbGYsbG9jYWxzKV5iKHNlbGYsbG9jYWxzKTt9LCc9Jzpub29wLCc9PT0nOmZ1bmN0aW9uKHNlbGYsbG9jYWxzLGEsYil7cmV0dXJuIGEoc2VsZixsb2NhbHMpPT09YihzZWxmLGxvY2Fscyk7fSwnIT09JzpmdW5jdGlvbihzZWxmLGxvY2FscyxhLGIpe3JldHVybiBhKHNlbGYsbG9jYWxzKSE9PWIoc2VsZixsb2NhbHMpO30sJz09JzpmdW5jdGlvbihzZWxmLGxvY2FscyxhLGIpe3JldHVybiBhKHNlbGYsbG9jYWxzKT09YihzZWxmLGxvY2Fscyk7fSwnIT0nOmZ1bmN0aW9uKHNlbGYsbG9jYWxzLGEsYil7cmV0dXJuIGEoc2VsZixsb2NhbHMpIT1iKHNlbGYsbG9jYWxzKTt9LCc8JzpmdW5jdGlvbihzZWxmLGxvY2FscyxhLGIpe3JldHVybiBhKHNlbGYsbG9jYWxzKTxiKHNlbGYsbG9jYWxzKTt9LCc+JzpmdW5jdGlvbihzZWxmLGxvY2FscyxhLGIpe3JldHVybiBhKHNlbGYsbG9jYWxzKT5iKHNlbGYsbG9jYWxzKTt9LCc8PSc6ZnVuY3Rpb24oc2VsZixsb2NhbHMsYSxiKXtyZXR1cm4gYShzZWxmLGxvY2Fscyk8PWIoc2VsZixsb2NhbHMpO30sJz49JzpmdW5jdGlvbihzZWxmLGxvY2FscyxhLGIpe3JldHVybiBhKHNlbGYsbG9jYWxzKT49YihzZWxmLGxvY2Fscyk7fSwnJiYnOmZ1bmN0aW9uKHNlbGYsbG9jYWxzLGEsYil7cmV0dXJuIGEoc2VsZixsb2NhbHMpJiZiKHNlbGYsbG9jYWxzKTt9LCd8fCc6ZnVuY3Rpb24oc2VsZixsb2NhbHMsYSxiKXtyZXR1cm4gYShzZWxmLGxvY2Fscyl8fGIoc2VsZixsb2NhbHMpO30sJyYnOmZ1bmN0aW9uKHNlbGYsbG9jYWxzLGEsYil7cmV0dXJuIGEoc2VsZixsb2NhbHMpJmIoc2VsZixsb2NhbHMpO30sJ3wnOmZ1bmN0aW9uKHNlbGYsbG9jYWxzLGEsYil7cmV0dXJuIGIoc2VsZixsb2NhbHMpKHNlbGYsbG9jYWxzLGEoc2VsZixsb2NhbHMpKTt9LCchJzpmdW5jdGlvbihzZWxmLGxvY2FscyxhKXtyZXR1cm4hYShzZWxmLGxvY2Fscyk7fX07dmFyIEVTQ0FQRT17Im4iOiJcbiIsImYiOiJcZiIsInIiOiJcciIsInQiOiJcdCIsInYiOiJcdiIsIiciOiInIiwnIic6JyInfTt2YXIgTGV4ZXI9ZnVuY3Rpb24ob3B0aW9ucyl7dGhpcy5vcHRpb25zPW9wdGlvbnM7fTtMZXhlci5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOkxleGVyLGxleDpmdW5jdGlvbih0ZXh0KXt0aGlzLnRleHQ9dGV4dDt0aGlzLmluZGV4PTA7dGhpcy5jaD11bmRlZmluZWQ7dGhpcy5sYXN0Q2g9JzonO3RoaXMudG9rZW5zPVtdO3doaWxlKHRoaXMuaW5kZXg8dGhpcy50ZXh0Lmxlbmd0aCl7dGhpcy5jaD10aGlzLnRleHQuY2hhckF0KHRoaXMuaW5kZXgpO2lmKHRoaXMuaXMoJyJcJycpKXt0aGlzLnJlYWRTdHJpbmcodGhpcy5jaCk7fWVsc2UgaWYodGhpcy5pc051bWJlcih0aGlzLmNoKXx8dGhpcy5pcygnLicpJiZ0aGlzLmlzTnVtYmVyKHRoaXMucGVlaygpKSl7dGhpcy5yZWFkTnVtYmVyKCk7fWVsc2UgaWYodGhpcy5pc0lkZW50KHRoaXMuY2gpKXt0aGlzLnJlYWRJZGVudCgpO31lbHNlIGlmKHRoaXMuaXMoJygpe31bXS4sOzo/Jykpe3RoaXMudG9rZW5zLnB1c2goe2luZGV4OnRoaXMuaW5kZXgsdGV4dDp0aGlzLmNofSk7dGhpcy5pbmRleCsrO31lbHNlIGlmKHRoaXMuaXNXaGl0ZXNwYWNlKHRoaXMuY2gpKXt0aGlzLmluZGV4Kys7Y29udGludWU7fWVsc2V7dmFyIGNoMj10aGlzLmNoK3RoaXMucGVlaygpO3ZhciBjaDM9Y2gyK3RoaXMucGVlaygyKTt2YXIgZm49T1BFUkFUT1JTW3RoaXMuY2hdO3ZhciBmbjI9T1BFUkFUT1JTW2NoMl07dmFyIGZuMz1PUEVSQVRPUlNbY2gzXTtpZihmbjMpe3RoaXMudG9rZW5zLnB1c2goe2luZGV4OnRoaXMuaW5kZXgsdGV4dDpjaDMsZm46Zm4zfSk7dGhpcy5pbmRleCs9Mzt9ZWxzZSBpZihmbjIpe3RoaXMudG9rZW5zLnB1c2goe2luZGV4OnRoaXMuaW5kZXgsdGV4dDpjaDIsZm46Zm4yfSk7dGhpcy5pbmRleCs9Mjt9ZWxzZSBpZihmbil7dGhpcy50b2tlbnMucHVzaCh7aW5kZXg6dGhpcy5pbmRleCx0ZXh0OnRoaXMuY2gsZm46Zm59KTt0aGlzLmluZGV4Kz0xO31lbHNle3RoaXMudGhyb3dFcnJvcignVW5leHBlY3RlZCBuZXh0IGNoYXJhY3RlciAnLHRoaXMuaW5kZXgsdGhpcy5pbmRleCsxKTt9fQp0aGlzLmxhc3RDaD10aGlzLmNoO30KcmV0dXJuIHRoaXMudG9rZW5zO30saXM6ZnVuY3Rpb24oY2hhcnMpe3JldHVybiBjaGFycy5pbmRleE9mKHRoaXMuY2gpIT09LTE7fSx3YXM6ZnVuY3Rpb24oY2hhcnMpe3JldHVybiBjaGFycy5pbmRleE9mKHRoaXMubGFzdENoKSE9PS0xO30scGVlazpmdW5jdGlvbihpKXt2YXIgbnVtPWl8fDE7cmV0dXJuKHRoaXMuaW5kZXgrbnVtPHRoaXMudGV4dC5sZW5ndGgpP3RoaXMudGV4dC5jaGFyQXQodGhpcy5pbmRleCtudW0pOmZhbHNlO30saXNOdW1iZXI6ZnVuY3Rpb24oY2gpe3JldHVybignMCc8PWNoJiZjaDw9JzknKTt9LGlzV2hpdGVzcGFjZTpmdW5jdGlvbihjaCl7cmV0dXJuKGNoPT09JyAnfHxjaD09PSdccid8fGNoPT09J1x0J3x8Y2g9PT0nXG4nfHxjaD09PSdcdid8fGNoPT09J1x1MDBBMCcpO30saXNJZGVudDpmdW5jdGlvbihjaCl7cmV0dXJuKCdhJzw9Y2gmJmNoPD0neid8fCdBJzw9Y2gmJmNoPD0nWid8fCdfJz09PWNofHxjaD09PSckJyk7fSxpc0V4cE9wZXJhdG9yOmZ1bmN0aW9uKGNoKXtyZXR1cm4oY2g9PT0nLSd8fGNoPT09JysnfHx0aGlzLmlzTnVtYmVyKGNoKSk7fSx0aHJvd0Vycm9yOmZ1bmN0aW9uKGVycm9yLHN0YXJ0LGVuZCl7ZW5kPWVuZHx8dGhpcy5pbmRleDt2YXIgY29sU3RyPShpc0RlZmluZWQoc3RhcnQpPydzICcrc3RhcnQrJy0nK3RoaXMuaW5kZXgrJyBbJyt0aGlzLnRleHQuc3Vic3RyaW5nKHN0YXJ0LGVuZCkrJ10nOicgJytlbmQpO3Rocm93ICRwYXJzZU1pbkVycignbGV4ZXJyJywnTGV4ZXIgRXJyb3I6IHswfSBhdCBjb2x1bW57MX0gaW4gZXhwcmVzc2lvbiBbezJ9XS4nLGVycm9yLGNvbFN0cix0aGlzLnRleHQpO30scmVhZE51bWJlcjpmdW5jdGlvbigpe3ZhciBudW1iZXI9Jyc7dmFyIHN0YXJ0PXRoaXMuaW5kZXg7d2hpbGUodGhpcy5pbmRleDx0aGlzLnRleHQubGVuZ3RoKXt2YXIgY2g9bG93ZXJjYXNlKHRoaXMudGV4dC5jaGFyQXQodGhpcy5pbmRleCkpO2lmKGNoPT0nLid8fHRoaXMuaXNOdW1iZXIoY2gpKXtudW1iZXIrPWNoO31lbHNle3ZhciBwZWVrQ2g9dGhpcy5wZWVrKCk7aWYoY2g9PSdlJyYmdGhpcy5pc0V4cE9wZXJhdG9yKHBlZWtDaCkpe251bWJlcis9Y2g7fWVsc2UgaWYodGhpcy5pc0V4cE9wZXJhdG9yKGNoKSYmcGVla0NoJiZ0aGlzLmlzTnVtYmVyKHBlZWtDaCkmJm51bWJlci5jaGFyQXQobnVtYmVyLmxlbmd0aC0xKT09J2UnKXtudW1iZXIrPWNoO31lbHNlIGlmKHRoaXMuaXNFeHBPcGVyYXRvcihjaCkmJighcGVla0NofHwhdGhpcy5pc051bWJlcihwZWVrQ2gpKSYmbnVtYmVyLmNoYXJBdChudW1iZXIubGVuZ3RoLTEpPT0nZScpe3RoaXMudGhyb3dFcnJvcignSW52YWxpZCBleHBvbmVudCcpO31lbHNle2JyZWFrO319CnRoaXMuaW5kZXgrKzt9Cm51bWJlcj0xKm51bWJlcjt0aGlzLnRva2Vucy5wdXNoKHtpbmRleDpzdGFydCx0ZXh0Om51bWJlcixsaXRlcmFsOnRydWUsY29uc3RhbnQ6dHJ1ZSxmbjpmdW5jdGlvbigpe3JldHVybiBudW1iZXI7fX0pO30scmVhZElkZW50OmZ1bmN0aW9uKCl7dmFyIHBhcnNlcj10aGlzO3ZhciBpZGVudD0nJzt2YXIgc3RhcnQ9dGhpcy5pbmRleDt2YXIgbGFzdERvdCxwZWVrSW5kZXgsbWV0aG9kTmFtZSxjaDt3aGlsZSh0aGlzLmluZGV4PHRoaXMudGV4dC5sZW5ndGgpe2NoPXRoaXMudGV4dC5jaGFyQXQodGhpcy5pbmRleCk7aWYoY2g9PT0nLid8fHRoaXMuaXNJZGVudChjaCl8fHRoaXMuaXNOdW1iZXIoY2gpKXtpZihjaD09PScuJylsYXN0RG90PXRoaXMuaW5kZXg7aWRlbnQrPWNoO31lbHNle2JyZWFrO30KdGhpcy5pbmRleCsrO30KaWYobGFzdERvdCl7cGVla0luZGV4PXRoaXMuaW5kZXg7d2hpbGUocGVla0luZGV4PHRoaXMudGV4dC5sZW5ndGgpe2NoPXRoaXMudGV4dC5jaGFyQXQocGVla0luZGV4KTtpZihjaD09PScoJyl7bWV0aG9kTmFtZT1pZGVudC5zdWJzdHIobGFzdERvdC1zdGFydCsxKTtpZGVudD1pZGVudC5zdWJzdHIoMCxsYXN0RG90LXN0YXJ0KTt0aGlzLmluZGV4PXBlZWtJbmRleDticmVhazt9CmlmKHRoaXMuaXNXaGl0ZXNwYWNlKGNoKSl7cGVla0luZGV4Kys7fWVsc2V7YnJlYWs7fX19CnZhciB0b2tlbj17aW5kZXg6c3RhcnQsdGV4dDppZGVudH07aWYoT1BFUkFUT1JTLmhhc093blByb3BlcnR5KGlkZW50KSl7dG9rZW4uZm49T1BFUkFUT1JTW2lkZW50XTt0b2tlbi5saXRlcmFsPXRydWU7dG9rZW4uY29uc3RhbnQ9dHJ1ZTt9ZWxzZXt2YXIgZ2V0dGVyPWdldHRlckZuKGlkZW50LHRoaXMub3B0aW9ucyx0aGlzLnRleHQpO3Rva2VuLmZuPWV4dGVuZChmdW5jdGlvbihzZWxmLGxvY2Fscyl7cmV0dXJuKGdldHRlcihzZWxmLGxvY2FscykpO30se2Fzc2lnbjpmdW5jdGlvbihzZWxmLHZhbHVlKXtyZXR1cm4gc2V0dGVyKHNlbGYsaWRlbnQsdmFsdWUscGFyc2VyLnRleHQscGFyc2VyLm9wdGlvbnMpO319KTt9CnRoaXMudG9rZW5zLnB1c2godG9rZW4pO2lmKG1ldGhvZE5hbWUpe3RoaXMudG9rZW5zLnB1c2goe2luZGV4Omxhc3REb3QsdGV4dDonLid9KTt0aGlzLnRva2Vucy5wdXNoKHtpbmRleDpsYXN0RG90KzEsdGV4dDptZXRob2ROYW1lfSk7fX0scmVhZFN0cmluZzpmdW5jdGlvbihxdW90ZSl7dmFyIHN0YXJ0PXRoaXMuaW5kZXg7dGhpcy5pbmRleCsrO3ZhciBzdHJpbmc9Jyc7dmFyIHJhd1N0cmluZz1xdW90ZTt2YXIgZXNjYXBlPWZhbHNlO3doaWxlKHRoaXMuaW5kZXg8dGhpcy50ZXh0Lmxlbmd0aCl7dmFyIGNoPXRoaXMudGV4dC5jaGFyQXQodGhpcy5pbmRleCk7cmF3U3RyaW5nKz1jaDtpZihlc2NhcGUpe2lmKGNoPT09J3UnKXt2YXIgaGV4PXRoaXMudGV4dC5zdWJzdHJpbmcodGhpcy5pbmRleCsxLHRoaXMuaW5kZXgrNSk7aWYoIWhleC5tYXRjaCgvW1xkYS1mXXs0fS9pKSkKdGhpcy50aHJvd0Vycm9yKCdJbnZhbGlkIHVuaWNvZGUgZXNjYXBlIFtcXHUnK2hleCsnXScpO3RoaXMuaW5kZXgrPTQ7c3RyaW5nKz1TdHJpbmcuZnJvbUNoYXJDb2RlKHBhcnNlSW50KGhleCwxNikpO31lbHNle3ZhciByZXA9RVNDQVBFW2NoXTtpZihyZXApe3N0cmluZys9cmVwO31lbHNle3N0cmluZys9Y2g7fX0KZXNjYXBlPWZhbHNlO31lbHNlIGlmKGNoPT09J1xcJyl7ZXNjYXBlPXRydWU7fWVsc2UgaWYoY2g9PT1xdW90ZSl7dGhpcy5pbmRleCsrO3RoaXMudG9rZW5zLnB1c2goe2luZGV4OnN0YXJ0LHRleHQ6cmF3U3RyaW5nLHN0cmluZzpzdHJpbmcsbGl0ZXJhbDp0cnVlLGNvbnN0YW50OnRydWUsZm46ZnVuY3Rpb24oKXtyZXR1cm4gc3RyaW5nO319KTtyZXR1cm47fWVsc2V7c3RyaW5nKz1jaDt9CnRoaXMuaW5kZXgrKzt9CnRoaXMudGhyb3dFcnJvcignVW50ZXJtaW5hdGVkIHF1b3RlJyxzdGFydCk7fX07dmFyIFBhcnNlcj1mdW5jdGlvbihsZXhlciwkZmlsdGVyLG9wdGlvbnMpe3RoaXMubGV4ZXI9bGV4ZXI7dGhpcy4kZmlsdGVyPSRmaWx0ZXI7dGhpcy5vcHRpb25zPW9wdGlvbnM7fTtQYXJzZXIuWkVSTz1leHRlbmQoZnVuY3Rpb24oKXtyZXR1cm4gMDt9LHtjb25zdGFudDp0cnVlfSk7UGFyc2VyLnByb3RvdHlwZT17Y29uc3RydWN0b3I6UGFyc2VyLHBhcnNlOmZ1bmN0aW9uKHRleHQpe3RoaXMudGV4dD10ZXh0O3RoaXMudG9rZW5zPXRoaXMubGV4ZXIubGV4KHRleHQpO3ZhciB2YWx1ZT10aGlzLnN0YXRlbWVudHMoKTtpZih0aGlzLnRva2Vucy5sZW5ndGghPT0wKXt0aGlzLnRocm93RXJyb3IoJ2lzIGFuIHVuZXhwZWN0ZWQgdG9rZW4nLHRoaXMudG9rZW5zWzBdKTt9CnZhbHVlLmxpdGVyYWw9ISF2YWx1ZS5saXRlcmFsO3ZhbHVlLmNvbnN0YW50PSEhdmFsdWUuY29uc3RhbnQ7cmV0dXJuIHZhbHVlO30scHJpbWFyeTpmdW5jdGlvbigpe3ZhciBwcmltYXJ5O2lmKHRoaXMuZXhwZWN0KCcoJykpe3ByaW1hcnk9dGhpcy5maWx0ZXJDaGFpbigpO3RoaXMuY29uc3VtZSgnKScpO31lbHNlIGlmKHRoaXMuZXhwZWN0KCdbJykpe3ByaW1hcnk9dGhpcy5hcnJheURlY2xhcmF0aW9uKCk7fWVsc2UgaWYodGhpcy5leHBlY3QoJ3snKSl7cHJpbWFyeT10aGlzLm9iamVjdCgpO31lbHNle3ZhciB0b2tlbj10aGlzLmV4cGVjdCgpO3ByaW1hcnk9dG9rZW4uZm47aWYoIXByaW1hcnkpe3RoaXMudGhyb3dFcnJvcignbm90IGEgcHJpbWFyeSBleHByZXNzaW9uJyx0b2tlbik7fQpwcmltYXJ5LmxpdGVyYWw9ISF0b2tlbi5saXRlcmFsO3ByaW1hcnkuY29uc3RhbnQ9ISF0b2tlbi5jb25zdGFudDt9CnZhciBuZXh0LGNvbnRleHQ7d2hpbGUoKG5leHQ9dGhpcy5leHBlY3QoJygnLCdbJywnLicpKSl7aWYobmV4dC50ZXh0PT09JygnKXtwcmltYXJ5PXRoaXMuZnVuY3Rpb25DYWxsKHByaW1hcnksY29udGV4dCk7Y29udGV4dD1udWxsO31lbHNlIGlmKG5leHQudGV4dD09PSdbJyl7Y29udGV4dD1wcmltYXJ5O3ByaW1hcnk9dGhpcy5vYmplY3RJbmRleChwcmltYXJ5KTt9ZWxzZSBpZihuZXh0LnRleHQ9PT0nLicpe2NvbnRleHQ9cHJpbWFyeTtwcmltYXJ5PXRoaXMuZmllbGRBY2Nlc3MocHJpbWFyeSk7fWVsc2V7dGhpcy50aHJvd0Vycm9yKCdJTVBPU1NJQkxFJyk7fX0KcmV0dXJuIHByaW1hcnk7fSx0aHJvd0Vycm9yOmZ1bmN0aW9uKG1zZyx0b2tlbil7dGhyb3cgJHBhcnNlTWluRXJyKCdzeW50YXgnLCdTeW50YXggRXJyb3I6IFRva2VuIFwnezB9XCcgezF9IGF0IGNvbHVtbiB7Mn0gb2YgdGhlIGV4cHJlc3Npb24gW3szfV0gc3RhcnRpbmcgYXQgW3s0fV0uJyx0b2tlbi50ZXh0LG1zZywodG9rZW4uaW5kZXgrMSksdGhpcy50ZXh0LHRoaXMudGV4dC5zdWJzdHJpbmcodG9rZW4uaW5kZXgpKTt9LHBlZWtUb2tlbjpmdW5jdGlvbigpe2lmKHRoaXMudG9rZW5zLmxlbmd0aD09PTApCnRocm93ICRwYXJzZU1pbkVycigndWVvZScsJ1VuZXhwZWN0ZWQgZW5kIG9mIGV4cHJlc3Npb246IHswfScsdGhpcy50ZXh0KTtyZXR1cm4gdGhpcy50b2tlbnNbMF07fSxwZWVrOmZ1bmN0aW9uKGUxLGUyLGUzLGU0KXtpZih0aGlzLnRva2Vucy5sZW5ndGg+MCl7dmFyIHRva2VuPXRoaXMudG9rZW5zWzBdO3ZhciB0PXRva2VuLnRleHQ7aWYodD09PWUxfHx0PT09ZTJ8fHQ9PT1lM3x8dD09PWU0fHwoIWUxJiYhZTImJiFlMyYmIWU0KSl7cmV0dXJuIHRva2VuO319CnJldHVybiBmYWxzZTt9LGV4cGVjdDpmdW5jdGlvbihlMSxlMixlMyxlNCl7dmFyIHRva2VuPXRoaXMucGVlayhlMSxlMixlMyxlNCk7aWYodG9rZW4pe3RoaXMudG9rZW5zLnNoaWZ0KCk7cmV0dXJuIHRva2VuO30KcmV0dXJuIGZhbHNlO30sY29uc3VtZTpmdW5jdGlvbihlMSl7aWYoIXRoaXMuZXhwZWN0KGUxKSl7dGhpcy50aHJvd0Vycm9yKCdpcyB1bmV4cGVjdGVkLCBleHBlY3RpbmcgWycrZTErJ10nLHRoaXMucGVlaygpKTt9fSx1bmFyeUZuOmZ1bmN0aW9uKGZuLHJpZ2h0KXtyZXR1cm4gZXh0ZW5kKGZ1bmN0aW9uKHNlbGYsbG9jYWxzKXtyZXR1cm4gZm4oc2VsZixsb2NhbHMscmlnaHQpO30se2NvbnN0YW50OnJpZ2h0LmNvbnN0YW50fSk7fSx0ZXJuYXJ5Rm46ZnVuY3Rpb24obGVmdCxtaWRkbGUscmlnaHQpe3JldHVybiBleHRlbmQoZnVuY3Rpb24oc2VsZixsb2NhbHMpe3JldHVybiBsZWZ0KHNlbGYsbG9jYWxzKT9taWRkbGUoc2VsZixsb2NhbHMpOnJpZ2h0KHNlbGYsbG9jYWxzKTt9LHtjb25zdGFudDpsZWZ0LmNvbnN0YW50JiZtaWRkbGUuY29uc3RhbnQmJnJpZ2h0LmNvbnN0YW50fSk7fSxiaW5hcnlGbjpmdW5jdGlvbihsZWZ0LGZuLHJpZ2h0KXtyZXR1cm4gZXh0ZW5kKGZ1bmN0aW9uKHNlbGYsbG9jYWxzKXtyZXR1cm4gZm4oc2VsZixsb2NhbHMsbGVmdCxyaWdodCk7fSx7Y29uc3RhbnQ6bGVmdC5jb25zdGFudCYmcmlnaHQuY29uc3RhbnR9KTt9LHN0YXRlbWVudHM6ZnVuY3Rpb24oKXt2YXIgc3RhdGVtZW50cz1bXTt3aGlsZSh0cnVlKXtpZih0aGlzLnRva2Vucy5sZW5ndGg+MCYmIXRoaXMucGVlaygnfScsJyknLCc7JywnXScpKQpzdGF0ZW1lbnRzLnB1c2godGhpcy5maWx0ZXJDaGFpbigpKTtpZighdGhpcy5leHBlY3QoJzsnKSl7cmV0dXJuKHN0YXRlbWVudHMubGVuZ3RoPT09MSk/c3RhdGVtZW50c1swXTpmdW5jdGlvbihzZWxmLGxvY2Fscyl7dmFyIHZhbHVlO2Zvcih2YXIgaT0wO2k8c3RhdGVtZW50cy5sZW5ndGg7aSsrKXt2YXIgc3RhdGVtZW50PXN0YXRlbWVudHNbaV07aWYoc3RhdGVtZW50KXt2YWx1ZT1zdGF0ZW1lbnQoc2VsZixsb2NhbHMpO319CnJldHVybiB2YWx1ZTt9O319fSxmaWx0ZXJDaGFpbjpmdW5jdGlvbigpe3ZhciBsZWZ0PXRoaXMuZXhwcmVzc2lvbigpO3ZhciB0b2tlbjt3aGlsZSh0cnVlKXtpZigodG9rZW49dGhpcy5leHBlY3QoJ3wnKSkpe2xlZnQ9dGhpcy5iaW5hcnlGbihsZWZ0LHRva2VuLmZuLHRoaXMuZmlsdGVyKCkpO31lbHNle3JldHVybiBsZWZ0O319fSxmaWx0ZXI6ZnVuY3Rpb24oKXt2YXIgdG9rZW49dGhpcy5leHBlY3QoKTt2YXIgZm49dGhpcy4kZmlsdGVyKHRva2VuLnRleHQpO3ZhciBhcmdzRm49W107d2hpbGUodHJ1ZSl7aWYoKHRva2VuPXRoaXMuZXhwZWN0KCc6JykpKXthcmdzRm4ucHVzaCh0aGlzLmV4cHJlc3Npb24oKSk7fWVsc2V7dmFyIGZuSW52b2tlPWZ1bmN0aW9uKHNlbGYsbG9jYWxzLGlucHV0KXt2YXIgYXJncz1baW5wdXRdO2Zvcih2YXIgaT0wO2k8YXJnc0ZuLmxlbmd0aDtpKyspe2FyZ3MucHVzaChhcmdzRm5baV0oc2VsZixsb2NhbHMpKTt9CnJldHVybiBmbi5hcHBseShzZWxmLGFyZ3MpO307cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGZuSW52b2tlO307fX19LGV4cHJlc3Npb246ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hc3NpZ25tZW50KCk7fSxhc3NpZ25tZW50OmZ1bmN0aW9uKCl7dmFyIGxlZnQ9dGhpcy50ZXJuYXJ5KCk7dmFyIHJpZ2h0O3ZhciB0b2tlbjtpZigodG9rZW49dGhpcy5leHBlY3QoJz0nKSkpe2lmKCFsZWZ0LmFzc2lnbil7dGhpcy50aHJvd0Vycm9yKCdpbXBsaWVzIGFzc2lnbm1lbnQgYnV0IFsnKwp0aGlzLnRleHQuc3Vic3RyaW5nKDAsdG9rZW4uaW5kZXgpKyddIGNhbiBub3QgYmUgYXNzaWduZWQgdG8nLHRva2VuKTt9CnJpZ2h0PXRoaXMudGVybmFyeSgpO3JldHVybiBmdW5jdGlvbihzY29wZSxsb2NhbHMpe3JldHVybiBsZWZ0LmFzc2lnbihzY29wZSxyaWdodChzY29wZSxsb2NhbHMpLGxvY2Fscyk7fTt9CnJldHVybiBsZWZ0O30sdGVybmFyeTpmdW5jdGlvbigpe3ZhciBsZWZ0PXRoaXMubG9naWNhbE9SKCk7dmFyIG1pZGRsZTt2YXIgdG9rZW47aWYoKHRva2VuPXRoaXMuZXhwZWN0KCc/JykpKXttaWRkbGU9dGhpcy50ZXJuYXJ5KCk7aWYoKHRva2VuPXRoaXMuZXhwZWN0KCc6JykpKXtyZXR1cm4gdGhpcy50ZXJuYXJ5Rm4obGVmdCxtaWRkbGUsdGhpcy50ZXJuYXJ5KCkpO31lbHNle3RoaXMudGhyb3dFcnJvcignZXhwZWN0ZWQgOicsdG9rZW4pO319ZWxzZXtyZXR1cm4gbGVmdDt9fSxsb2dpY2FsT1I6ZnVuY3Rpb24oKXt2YXIgbGVmdD10aGlzLmxvZ2ljYWxBTkQoKTt2YXIgdG9rZW47d2hpbGUodHJ1ZSl7aWYoKHRva2VuPXRoaXMuZXhwZWN0KCd8fCcpKSl7bGVmdD10aGlzLmJpbmFyeUZuKGxlZnQsdG9rZW4uZm4sdGhpcy5sb2dpY2FsQU5EKCkpO31lbHNle3JldHVybiBsZWZ0O319fSxsb2dpY2FsQU5EOmZ1bmN0aW9uKCl7dmFyIGxlZnQ9dGhpcy5lcXVhbGl0eSgpO3ZhciB0b2tlbjtpZigodG9rZW49dGhpcy5leHBlY3QoJyYmJykpKXtsZWZ0PXRoaXMuYmluYXJ5Rm4obGVmdCx0b2tlbi5mbix0aGlzLmxvZ2ljYWxBTkQoKSk7fQpyZXR1cm4gbGVmdDt9LGVxdWFsaXR5OmZ1bmN0aW9uKCl7dmFyIGxlZnQ9dGhpcy5yZWxhdGlvbmFsKCk7dmFyIHRva2VuO2lmKCh0b2tlbj10aGlzLmV4cGVjdCgnPT0nLCchPScsJz09PScsJyE9PScpKSl7bGVmdD10aGlzLmJpbmFyeUZuKGxlZnQsdG9rZW4uZm4sdGhpcy5lcXVhbGl0eSgpKTt9CnJldHVybiBsZWZ0O30scmVsYXRpb25hbDpmdW5jdGlvbigpe3ZhciBsZWZ0PXRoaXMuYWRkaXRpdmUoKTt2YXIgdG9rZW47aWYoKHRva2VuPXRoaXMuZXhwZWN0KCc8JywnPicsJzw9JywnPj0nKSkpe2xlZnQ9dGhpcy5iaW5hcnlGbihsZWZ0LHRva2VuLmZuLHRoaXMucmVsYXRpb25hbCgpKTt9CnJldHVybiBsZWZ0O30sYWRkaXRpdmU6ZnVuY3Rpb24oKXt2YXIgbGVmdD10aGlzLm11bHRpcGxpY2F0aXZlKCk7dmFyIHRva2VuO3doaWxlKCh0b2tlbj10aGlzLmV4cGVjdCgnKycsJy0nKSkpe2xlZnQ9dGhpcy5iaW5hcnlGbihsZWZ0LHRva2VuLmZuLHRoaXMubXVsdGlwbGljYXRpdmUoKSk7fQpyZXR1cm4gbGVmdDt9LG11bHRpcGxpY2F0aXZlOmZ1bmN0aW9uKCl7dmFyIGxlZnQ9dGhpcy51bmFyeSgpO3ZhciB0b2tlbjt3aGlsZSgodG9rZW49dGhpcy5leHBlY3QoJyonLCcvJywnJScpKSl7bGVmdD10aGlzLmJpbmFyeUZuKGxlZnQsdG9rZW4uZm4sdGhpcy51bmFyeSgpKTt9CnJldHVybiBsZWZ0O30sdW5hcnk6ZnVuY3Rpb24oKXt2YXIgdG9rZW47aWYodGhpcy5leHBlY3QoJysnKSl7cmV0dXJuIHRoaXMucHJpbWFyeSgpO31lbHNlIGlmKCh0b2tlbj10aGlzLmV4cGVjdCgnLScpKSl7cmV0dXJuIHRoaXMuYmluYXJ5Rm4oUGFyc2VyLlpFUk8sdG9rZW4uZm4sdGhpcy51bmFyeSgpKTt9ZWxzZSBpZigodG9rZW49dGhpcy5leHBlY3QoJyEnKSkpe3JldHVybiB0aGlzLnVuYXJ5Rm4odG9rZW4uZm4sdGhpcy51bmFyeSgpKTt9ZWxzZXtyZXR1cm4gdGhpcy5wcmltYXJ5KCk7fX0sZmllbGRBY2Nlc3M6ZnVuY3Rpb24ob2JqZWN0KXt2YXIgcGFyc2VyPXRoaXM7dmFyIGZpZWxkPXRoaXMuZXhwZWN0KCkudGV4dDt2YXIgZ2V0dGVyPWdldHRlckZuKGZpZWxkLHRoaXMub3B0aW9ucyx0aGlzLnRleHQpO3JldHVybiBleHRlbmQoZnVuY3Rpb24oc2NvcGUsbG9jYWxzLHNlbGYpe3JldHVybiBnZXR0ZXIoc2VsZnx8b2JqZWN0KHNjb3BlLGxvY2FscykpO30se2Fzc2lnbjpmdW5jdGlvbihzY29wZSx2YWx1ZSxsb2NhbHMpe3JldHVybiBzZXR0ZXIob2JqZWN0KHNjb3BlLGxvY2FscyksZmllbGQsdmFsdWUscGFyc2VyLnRleHQscGFyc2VyLm9wdGlvbnMpO319KTt9LG9iamVjdEluZGV4OmZ1bmN0aW9uKG9iail7dmFyIHBhcnNlcj10aGlzO3ZhciBpbmRleEZuPXRoaXMuZXhwcmVzc2lvbigpO3RoaXMuY29uc3VtZSgnXScpO3JldHVybiBleHRlbmQoZnVuY3Rpb24oc2VsZixsb2NhbHMpe3ZhciBvPW9iaihzZWxmLGxvY2FscyksaT1pbmRleEZuKHNlbGYsbG9jYWxzKSx2LHA7ZW5zdXJlU2FmZU1lbWJlck5hbWUoaSxwYXJzZXIudGV4dCk7aWYoIW8pcmV0dXJuIHVuZGVmaW5lZDt2PWVuc3VyZVNhZmVPYmplY3Qob1tpXSxwYXJzZXIudGV4dCk7aWYodiYmdi50aGVuJiZwYXJzZXIub3B0aW9ucy51bndyYXBQcm9taXNlcyl7cD12O2lmKCEoJyQkdidpbiB2KSl7cC4kJHY9dW5kZWZpbmVkO3AudGhlbihmdW5jdGlvbih2YWwpe3AuJCR2PXZhbDt9KTt9CnY9di4kJHY7fQpyZXR1cm4gdjt9LHthc3NpZ246ZnVuY3Rpb24oc2VsZix2YWx1ZSxsb2NhbHMpe3ZhciBrZXk9aW5kZXhGbihzZWxmLGxvY2Fscyk7dmFyIHNhZmU9ZW5zdXJlU2FmZU9iamVjdChvYmooc2VsZixsb2NhbHMpLHBhcnNlci50ZXh0KTtyZXR1cm4gc2FmZVtrZXldPXZhbHVlO319KTt9LGZ1bmN0aW9uQ2FsbDpmdW5jdGlvbihmbixjb250ZXh0R2V0dGVyKXt2YXIgYXJnc0ZuPVtdO2lmKHRoaXMucGVla1Rva2VuKCkudGV4dCE9PScpJyl7ZG97YXJnc0ZuLnB1c2godGhpcy5leHByZXNzaW9uKCkpO313aGlsZSh0aGlzLmV4cGVjdCgnLCcpKTt9CnRoaXMuY29uc3VtZSgnKScpO3ZhciBwYXJzZXI9dGhpcztyZXR1cm4gZnVuY3Rpb24oc2NvcGUsbG9jYWxzKXt2YXIgYXJncz1bXTt2YXIgY29udGV4dD1jb250ZXh0R2V0dGVyP2NvbnRleHRHZXR0ZXIoc2NvcGUsbG9jYWxzKTpzY29wZTtmb3IodmFyIGk9MDtpPGFyZ3NGbi5sZW5ndGg7aSsrKXthcmdzLnB1c2goYXJnc0ZuW2ldKHNjb3BlLGxvY2FscykpO30KdmFyIGZuUHRyPWZuKHNjb3BlLGxvY2Fscyxjb250ZXh0KXx8bm9vcDtlbnN1cmVTYWZlT2JqZWN0KGNvbnRleHQscGFyc2VyLnRleHQpO2Vuc3VyZVNhZmVGdW5jdGlvbihmblB0cixwYXJzZXIudGV4dCk7dmFyIHY9Zm5QdHIuYXBwbHk/Zm5QdHIuYXBwbHkoY29udGV4dCxhcmdzKTpmblB0cihhcmdzWzBdLGFyZ3NbMV0sYXJnc1syXSxhcmdzWzNdLGFyZ3NbNF0pO3JldHVybiBlbnN1cmVTYWZlT2JqZWN0KHYscGFyc2VyLnRleHQpO307fSxhcnJheURlY2xhcmF0aW9uOmZ1bmN0aW9uKCl7dmFyIGVsZW1lbnRGbnM9W107dmFyIGFsbENvbnN0YW50PXRydWU7aWYodGhpcy5wZWVrVG9rZW4oKS50ZXh0IT09J10nKXtkb3tpZih0aGlzLnBlZWsoJ10nKSl7YnJlYWs7fQp2YXIgZWxlbWVudEZuPXRoaXMuZXhwcmVzc2lvbigpO2VsZW1lbnRGbnMucHVzaChlbGVtZW50Rm4pO2lmKCFlbGVtZW50Rm4uY29uc3RhbnQpe2FsbENvbnN0YW50PWZhbHNlO319d2hpbGUodGhpcy5leHBlY3QoJywnKSk7fQp0aGlzLmNvbnN1bWUoJ10nKTtyZXR1cm4gZXh0ZW5kKGZ1bmN0aW9uKHNlbGYsbG9jYWxzKXt2YXIgYXJyYXk9W107Zm9yKHZhciBpPTA7aTxlbGVtZW50Rm5zLmxlbmd0aDtpKyspe2FycmF5LnB1c2goZWxlbWVudEZuc1tpXShzZWxmLGxvY2FscykpO30KcmV0dXJuIGFycmF5O30se2xpdGVyYWw6dHJ1ZSxjb25zdGFudDphbGxDb25zdGFudH0pO30sb2JqZWN0OmZ1bmN0aW9uKCl7dmFyIGtleVZhbHVlcz1bXTt2YXIgYWxsQ29uc3RhbnQ9dHJ1ZTtpZih0aGlzLnBlZWtUb2tlbigpLnRleHQhPT0nfScpe2Rve2lmKHRoaXMucGVlaygnfScpKXticmVhazt9CnZhciB0b2tlbj10aGlzLmV4cGVjdCgpLGtleT10b2tlbi5zdHJpbmd8fHRva2VuLnRleHQ7dGhpcy5jb25zdW1lKCc6Jyk7dmFyIHZhbHVlPXRoaXMuZXhwcmVzc2lvbigpO2tleVZhbHVlcy5wdXNoKHtrZXk6a2V5LHZhbHVlOnZhbHVlfSk7aWYoIXZhbHVlLmNvbnN0YW50KXthbGxDb25zdGFudD1mYWxzZTt9fXdoaWxlKHRoaXMuZXhwZWN0KCcsJykpO30KdGhpcy5jb25zdW1lKCd9Jyk7cmV0dXJuIGV4dGVuZChmdW5jdGlvbihzZWxmLGxvY2Fscyl7dmFyIG9iamVjdD17fTtmb3IodmFyIGk9MDtpPGtleVZhbHVlcy5sZW5ndGg7aSsrKXt2YXIga2V5VmFsdWU9a2V5VmFsdWVzW2ldO29iamVjdFtrZXlWYWx1ZS5rZXldPWtleVZhbHVlLnZhbHVlKHNlbGYsbG9jYWxzKTt9CnJldHVybiBvYmplY3Q7fSx7bGl0ZXJhbDp0cnVlLGNvbnN0YW50OmFsbENvbnN0YW50fSk7fX07ZnVuY3Rpb24gc2V0dGVyKG9iaixwYXRoLHNldFZhbHVlLGZ1bGxFeHAsb3B0aW9ucyl7b3B0aW9ucz1vcHRpb25zfHx7fTt2YXIgZWxlbWVudD1wYXRoLnNwbGl0KCcuJyksa2V5O2Zvcih2YXIgaT0wO2VsZW1lbnQubGVuZ3RoPjE7aSsrKXtrZXk9ZW5zdXJlU2FmZU1lbWJlck5hbWUoZWxlbWVudC5zaGlmdCgpLGZ1bGxFeHApO3ZhciBwcm9wZXJ0eU9iaj1vYmpba2V5XTtpZighcHJvcGVydHlPYmope3Byb3BlcnR5T2JqPXt9O29ialtrZXldPXByb3BlcnR5T2JqO30Kb2JqPXByb3BlcnR5T2JqO2lmKG9iai50aGVuJiZvcHRpb25zLnVud3JhcFByb21pc2VzKXtwcm9taXNlV2FybmluZyhmdWxsRXhwKTtpZighKCIkJHYiaW4gb2JqKSl7KGZ1bmN0aW9uKHByb21pc2Upe3Byb21pc2UudGhlbihmdW5jdGlvbih2YWwpe3Byb21pc2UuJCR2PXZhbDt9KTt9KShvYmopO30KaWYob2JqLiQkdj09PXVuZGVmaW5lZCl7b2JqLiQkdj17fTt9Cm9iaj1vYmouJCR2O319CmtleT1lbnN1cmVTYWZlTWVtYmVyTmFtZShlbGVtZW50LnNoaWZ0KCksZnVsbEV4cCk7ZW5zdXJlU2FmZU9iamVjdChvYmosZnVsbEV4cCk7ZW5zdXJlU2FmZU9iamVjdChvYmpba2V5XSxmdWxsRXhwKTtvYmpba2V5XT1zZXRWYWx1ZTtyZXR1cm4gc2V0VmFsdWU7fQp2YXIgZ2V0dGVyRm5DYWNoZT17fTtmdW5jdGlvbiBjc3BTYWZlR2V0dGVyRm4oa2V5MCxrZXkxLGtleTIsa2V5MyxrZXk0LGZ1bGxFeHAsb3B0aW9ucyl7ZW5zdXJlU2FmZU1lbWJlck5hbWUoa2V5MCxmdWxsRXhwKTtlbnN1cmVTYWZlTWVtYmVyTmFtZShrZXkxLGZ1bGxFeHApO2Vuc3VyZVNhZmVNZW1iZXJOYW1lKGtleTIsZnVsbEV4cCk7ZW5zdXJlU2FmZU1lbWJlck5hbWUoa2V5MyxmdWxsRXhwKTtlbnN1cmVTYWZlTWVtYmVyTmFtZShrZXk0LGZ1bGxFeHApO3JldHVybiFvcHRpb25zLnVud3JhcFByb21pc2VzP2Z1bmN0aW9uIGNzcFNhZmVHZXR0ZXIoc2NvcGUsbG9jYWxzKXt2YXIgcGF0aFZhbD0obG9jYWxzJiZsb2NhbHMuaGFzT3duUHJvcGVydHkoa2V5MCkpP2xvY2FsczpzY29wZTtpZihwYXRoVmFsPT1udWxsKXJldHVybiBwYXRoVmFsO3BhdGhWYWw9cGF0aFZhbFtrZXkwXTtpZigha2V5MSlyZXR1cm4gcGF0aFZhbDtpZihwYXRoVmFsPT1udWxsKXJldHVybiB1bmRlZmluZWQ7cGF0aFZhbD1wYXRoVmFsW2tleTFdO2lmKCFrZXkyKXJldHVybiBwYXRoVmFsO2lmKHBhdGhWYWw9PW51bGwpcmV0dXJuIHVuZGVmaW5lZDtwYXRoVmFsPXBhdGhWYWxba2V5Ml07aWYoIWtleTMpcmV0dXJuIHBhdGhWYWw7aWYocGF0aFZhbD09bnVsbClyZXR1cm4gdW5kZWZpbmVkO3BhdGhWYWw9cGF0aFZhbFtrZXkzXTtpZigha2V5NClyZXR1cm4gcGF0aFZhbDtpZihwYXRoVmFsPT1udWxsKXJldHVybiB1bmRlZmluZWQ7cGF0aFZhbD1wYXRoVmFsW2tleTRdO3JldHVybiBwYXRoVmFsO306ZnVuY3Rpb24gY3NwU2FmZVByb21pc2VFbmFibGVkR2V0dGVyKHNjb3BlLGxvY2Fscyl7dmFyIHBhdGhWYWw9KGxvY2FscyYmbG9jYWxzLmhhc093blByb3BlcnR5KGtleTApKT9sb2NhbHM6c2NvcGUscHJvbWlzZTtpZihwYXRoVmFsPT1udWxsKXJldHVybiBwYXRoVmFsO3BhdGhWYWw9cGF0aFZhbFtrZXkwXTtpZihwYXRoVmFsJiZwYXRoVmFsLnRoZW4pe3Byb21pc2VXYXJuaW5nKGZ1bGxFeHApO2lmKCEoIiQkdiJpbiBwYXRoVmFsKSl7cHJvbWlzZT1wYXRoVmFsO3Byb21pc2UuJCR2PXVuZGVmaW5lZDtwcm9taXNlLnRoZW4oZnVuY3Rpb24odmFsKXtwcm9taXNlLiQkdj12YWw7fSk7fQpwYXRoVmFsPXBhdGhWYWwuJCR2O30KaWYoIWtleTEpcmV0dXJuIHBhdGhWYWw7aWYocGF0aFZhbD09bnVsbClyZXR1cm4gdW5kZWZpbmVkO3BhdGhWYWw9cGF0aFZhbFtrZXkxXTtpZihwYXRoVmFsJiZwYXRoVmFsLnRoZW4pe3Byb21pc2VXYXJuaW5nKGZ1bGxFeHApO2lmKCEoIiQkdiJpbiBwYXRoVmFsKSl7cHJvbWlzZT1wYXRoVmFsO3Byb21pc2UuJCR2PXVuZGVmaW5lZDtwcm9taXNlLnRoZW4oZnVuY3Rpb24odmFsKXtwcm9taXNlLiQkdj12YWw7fSk7fQpwYXRoVmFsPXBhdGhWYWwuJCR2O30KaWYoIWtleTIpcmV0dXJuIHBhdGhWYWw7aWYocGF0aFZhbD09bnVsbClyZXR1cm4gdW5kZWZpbmVkO3BhdGhWYWw9cGF0aFZhbFtrZXkyXTtpZihwYXRoVmFsJiZwYXRoVmFsLnRoZW4pe3Byb21pc2VXYXJuaW5nKGZ1bGxFeHApO2lmKCEoIiQkdiJpbiBwYXRoVmFsKSl7cHJvbWlzZT1wYXRoVmFsO3Byb21pc2UuJCR2PXVuZGVmaW5lZDtwcm9taXNlLnRoZW4oZnVuY3Rpb24odmFsKXtwcm9taXNlLiQkdj12YWw7fSk7fQpwYXRoVmFsPXBhdGhWYWwuJCR2O30KaWYoIWtleTMpcmV0dXJuIHBhdGhWYWw7aWYocGF0aFZhbD09bnVsbClyZXR1cm4gdW5kZWZpbmVkO3BhdGhWYWw9cGF0aFZhbFtrZXkzXTtpZihwYXRoVmFsJiZwYXRoVmFsLnRoZW4pe3Byb21pc2VXYXJuaW5nKGZ1bGxFeHApO2lmKCEoIiQkdiJpbiBwYXRoVmFsKSl7cHJvbWlzZT1wYXRoVmFsO3Byb21pc2UuJCR2PXVuZGVmaW5lZDtwcm9taXNlLnRoZW4oZnVuY3Rpb24odmFsKXtwcm9taXNlLiQkdj12YWw7fSk7fQpwYXRoVmFsPXBhdGhWYWwuJCR2O30KaWYoIWtleTQpcmV0dXJuIHBhdGhWYWw7aWYocGF0aFZhbD09bnVsbClyZXR1cm4gdW5kZWZpbmVkO3BhdGhWYWw9cGF0aFZhbFtrZXk0XTtpZihwYXRoVmFsJiZwYXRoVmFsLnRoZW4pe3Byb21pc2VXYXJuaW5nKGZ1bGxFeHApO2lmKCEoIiQkdiJpbiBwYXRoVmFsKSl7cHJvbWlzZT1wYXRoVmFsO3Byb21pc2UuJCR2PXVuZGVmaW5lZDtwcm9taXNlLnRoZW4oZnVuY3Rpb24odmFsKXtwcm9taXNlLiQkdj12YWw7fSk7fQpwYXRoVmFsPXBhdGhWYWwuJCR2O30KcmV0dXJuIHBhdGhWYWw7fTt9CmZ1bmN0aW9uIHNpbXBsZUdldHRlckZuMShrZXkwLGZ1bGxFeHApe2Vuc3VyZVNhZmVNZW1iZXJOYW1lKGtleTAsZnVsbEV4cCk7cmV0dXJuIGZ1bmN0aW9uIHNpbXBsZUdldHRlckZuMShzY29wZSxsb2NhbHMpe2lmKHNjb3BlPT1udWxsKXJldHVybiB1bmRlZmluZWQ7cmV0dXJuKChsb2NhbHMmJmxvY2Fscy5oYXNPd25Qcm9wZXJ0eShrZXkwKSk/bG9jYWxzOnNjb3BlKVtrZXkwXTt9O30KZnVuY3Rpb24gc2ltcGxlR2V0dGVyRm4yKGtleTAsa2V5MSxmdWxsRXhwKXtlbnN1cmVTYWZlTWVtYmVyTmFtZShrZXkwLGZ1bGxFeHApO2Vuc3VyZVNhZmVNZW1iZXJOYW1lKGtleTEsZnVsbEV4cCk7cmV0dXJuIGZ1bmN0aW9uIHNpbXBsZUdldHRlckZuMihzY29wZSxsb2NhbHMpe2lmKHNjb3BlPT1udWxsKXJldHVybiB1bmRlZmluZWQ7c2NvcGU9KChsb2NhbHMmJmxvY2Fscy5oYXNPd25Qcm9wZXJ0eShrZXkwKSk/bG9jYWxzOnNjb3BlKVtrZXkwXTtyZXR1cm4gc2NvcGU9PW51bGw/dW5kZWZpbmVkOnNjb3BlW2tleTFdO307fQpmdW5jdGlvbiBnZXR0ZXJGbihwYXRoLG9wdGlvbnMsZnVsbEV4cCl7aWYoZ2V0dGVyRm5DYWNoZS5oYXNPd25Qcm9wZXJ0eShwYXRoKSl7cmV0dXJuIGdldHRlckZuQ2FjaGVbcGF0aF07fQp2YXIgcGF0aEtleXM9cGF0aC5zcGxpdCgnLicpLHBhdGhLZXlzTGVuZ3RoPXBhdGhLZXlzLmxlbmd0aCxmbjtpZighb3B0aW9ucy51bndyYXBQcm9taXNlcyYmcGF0aEtleXNMZW5ndGg9PT0xKXtmbj1zaW1wbGVHZXR0ZXJGbjEocGF0aEtleXNbMF0sZnVsbEV4cCk7fWVsc2UgaWYoIW9wdGlvbnMudW53cmFwUHJvbWlzZXMmJnBhdGhLZXlzTGVuZ3RoPT09Mil7Zm49c2ltcGxlR2V0dGVyRm4yKHBhdGhLZXlzWzBdLHBhdGhLZXlzWzFdLGZ1bGxFeHApO31lbHNlIGlmKG9wdGlvbnMuY3NwKXtpZihwYXRoS2V5c0xlbmd0aDw2KXtmbj1jc3BTYWZlR2V0dGVyRm4ocGF0aEtleXNbMF0scGF0aEtleXNbMV0scGF0aEtleXNbMl0scGF0aEtleXNbM10scGF0aEtleXNbNF0sZnVsbEV4cCxvcHRpb25zKTt9ZWxzZXtmbj1mdW5jdGlvbihzY29wZSxsb2NhbHMpe3ZhciBpPTAsdmFsO2Rve3ZhbD1jc3BTYWZlR2V0dGVyRm4ocGF0aEtleXNbaSsrXSxwYXRoS2V5c1tpKytdLHBhdGhLZXlzW2krK10scGF0aEtleXNbaSsrXSxwYXRoS2V5c1tpKytdLGZ1bGxFeHAsb3B0aW9ucykoc2NvcGUsbG9jYWxzKTtsb2NhbHM9dW5kZWZpbmVkO3Njb3BlPXZhbDt9d2hpbGUoaTxwYXRoS2V5c0xlbmd0aCk7cmV0dXJuIHZhbDt9O319ZWxzZXt2YXIgY29kZT0ndmFyIHA7XG4nO2ZvckVhY2gocGF0aEtleXMsZnVuY3Rpb24oa2V5LGluZGV4KXtlbnN1cmVTYWZlTWVtYmVyTmFtZShrZXksZnVsbEV4cCk7Y29kZSs9J2lmKHMgPT0gbnVsbCkgcmV0dXJuIHVuZGVmaW5lZDtcbicrJ3M9JysoaW5kZXg/J3MnOicoKGsmJmsuaGFzT3duUHJvcGVydHkoIicra2V5KyciKSk/azpzKScpKydbIicra2V5KyciXScrJztcbicrCihvcHRpb25zLnVud3JhcFByb21pc2VzPydpZiAocyAmJiBzLnRoZW4pIHtcbicrJyBwdygiJytmdWxsRXhwLnJlcGxhY2UoLyhbIlxyXG5dKS9nLCdcXCQxJykrJyIpO1xuJysnIGlmICghKCIkJHYiIGluIHMpKSB7XG4nKycgcD1zO1xuJysnIHAuJCR2ID0gdW5kZWZpbmVkO1xuJysnIHAudGhlbihmdW5jdGlvbih2KSB7cC4kJHY9djt9KTtcbicrJ31cbicrJyBzPXMuJCR2XG4nKyd9XG4nOicnKTt9KTtjb2RlKz0ncmV0dXJuIHM7Jzt2YXIgZXZhbGVkRm5HZXR0ZXI9bmV3IEZ1bmN0aW9uKCdzJywnaycsJ3B3Jyxjb2RlKTtldmFsZWRGbkdldHRlci50b1N0cmluZz12YWx1ZUZuKGNvZGUpO2ZuPW9wdGlvbnMudW53cmFwUHJvbWlzZXM/ZnVuY3Rpb24oc2NvcGUsbG9jYWxzKXtyZXR1cm4gZXZhbGVkRm5HZXR0ZXIoc2NvcGUsbG9jYWxzLHByb21pc2VXYXJuaW5nKTt9OmV2YWxlZEZuR2V0dGVyO30KaWYocGF0aCE9PSdoYXNPd25Qcm9wZXJ0eScpe2dldHRlckZuQ2FjaGVbcGF0aF09Zm47fQpyZXR1cm4gZm47fQpmdW5jdGlvbiAkUGFyc2VQcm92aWRlcigpe3ZhciBjYWNoZT17fTt2YXIgJHBhcnNlT3B0aW9ucz17Y3NwOmZhbHNlLHVud3JhcFByb21pc2VzOmZhbHNlLGxvZ1Byb21pc2VXYXJuaW5nczp0cnVlfTt0aGlzLnVud3JhcFByb21pc2VzPWZ1bmN0aW9uKHZhbHVlKXtpZihpc0RlZmluZWQodmFsdWUpKXskcGFyc2VPcHRpb25zLnVud3JhcFByb21pc2VzPSEhdmFsdWU7cmV0dXJuIHRoaXM7fWVsc2V7cmV0dXJuICRwYXJzZU9wdGlvbnMudW53cmFwUHJvbWlzZXM7fX07dGhpcy5sb2dQcm9taXNlV2FybmluZ3M9ZnVuY3Rpb24odmFsdWUpe2lmKGlzRGVmaW5lZCh2YWx1ZSkpeyRwYXJzZU9wdGlvbnMubG9nUHJvbWlzZVdhcm5pbmdzPXZhbHVlO3JldHVybiB0aGlzO31lbHNle3JldHVybiAkcGFyc2VPcHRpb25zLmxvZ1Byb21pc2VXYXJuaW5nczt9fTt0aGlzLiRnZXQ9WyckZmlsdGVyJywnJHNuaWZmZXInLCckbG9nJyxmdW5jdGlvbigkZmlsdGVyLCRzbmlmZmVyLCRsb2cpeyRwYXJzZU9wdGlvbnMuY3NwPSRzbmlmZmVyLmNzcDtwcm9taXNlV2FybmluZz1mdW5jdGlvbiBwcm9taXNlV2FybmluZ0ZuKGZ1bGxFeHApe2lmKCEkcGFyc2VPcHRpb25zLmxvZ1Byb21pc2VXYXJuaW5nc3x8cHJvbWlzZVdhcm5pbmdDYWNoZS5oYXNPd25Qcm9wZXJ0eShmdWxsRXhwKSlyZXR1cm47cHJvbWlzZVdhcm5pbmdDYWNoZVtmdWxsRXhwXT10cnVlOyRsb2cud2FybignWyRwYXJzZV0gUHJvbWlzZSBmb3VuZCBpbiB0aGUgZXhwcmVzc2lvbiBgJytmdWxsRXhwKydgLiAnKydBdXRvbWF0aWMgdW53cmFwcGluZyBvZiBwcm9taXNlcyBpbiBBbmd1bGFyIGV4cHJlc3Npb25zIGlzIGRlcHJlY2F0ZWQuJyk7fTtyZXR1cm4gZnVuY3Rpb24oZXhwKXt2YXIgcGFyc2VkRXhwcmVzc2lvbjtzd2l0Y2godHlwZW9mIGV4cCl7Y2FzZSdzdHJpbmcnOmlmKGNhY2hlLmhhc093blByb3BlcnR5KGV4cCkpe3JldHVybiBjYWNoZVtleHBdO30KdmFyIGxleGVyPW5ldyBMZXhlcigkcGFyc2VPcHRpb25zKTt2YXIgcGFyc2VyPW5ldyBQYXJzZXIobGV4ZXIsJGZpbHRlciwkcGFyc2VPcHRpb25zKTtwYXJzZWRFeHByZXNzaW9uPXBhcnNlci5wYXJzZShleHApO2lmKGV4cCE9PSdoYXNPd25Qcm9wZXJ0eScpe2NhY2hlW2V4cF09cGFyc2VkRXhwcmVzc2lvbjt9CnJldHVybiBwYXJzZWRFeHByZXNzaW9uO2Nhc2UnZnVuY3Rpb24nOnJldHVybiBleHA7ZGVmYXVsdDpyZXR1cm4gbm9vcDt9fTt9XTt9CmZ1bmN0aW9uICRRUHJvdmlkZXIoKXt0aGlzLiRnZXQ9Wyckcm9vdFNjb3BlJywnJGV4Y2VwdGlvbkhhbmRsZXInLGZ1bmN0aW9uKCRyb290U2NvcGUsJGV4Y2VwdGlvbkhhbmRsZXIpe3JldHVybiBxRmFjdG9yeShmdW5jdGlvbihjYWxsYmFjayl7JHJvb3RTY29wZS4kZXZhbEFzeW5jKGNhbGxiYWNrKTt9LCRleGNlcHRpb25IYW5kbGVyKTt9XTt9CmZ1bmN0aW9uIHFGYWN0b3J5KG5leHRUaWNrLGV4Y2VwdGlvbkhhbmRsZXIpe3ZhciBkZWZlcj1mdW5jdGlvbigpe3ZhciBwZW5kaW5nPVtdLHZhbHVlLGRlZmVycmVkO2RlZmVycmVkPXtyZXNvbHZlOmZ1bmN0aW9uKHZhbCl7aWYocGVuZGluZyl7dmFyIGNhbGxiYWNrcz1wZW5kaW5nO3BlbmRpbmc9dW5kZWZpbmVkO3ZhbHVlPXJlZih2YWwpO2lmKGNhbGxiYWNrcy5sZW5ndGgpe25leHRUaWNrKGZ1bmN0aW9uKCl7dmFyIGNhbGxiYWNrO2Zvcih2YXIgaT0wLGlpPWNhbGxiYWNrcy5sZW5ndGg7aTxpaTtpKyspe2NhbGxiYWNrPWNhbGxiYWNrc1tpXTt2YWx1ZS50aGVuKGNhbGxiYWNrWzBdLGNhbGxiYWNrWzFdLGNhbGxiYWNrWzJdKTt9fSk7fX19LHJlamVjdDpmdW5jdGlvbihyZWFzb24pe2RlZmVycmVkLnJlc29sdmUoY3JlYXRlSW50ZXJuYWxSZWplY3RlZFByb21pc2UocmVhc29uKSk7fSxub3RpZnk6ZnVuY3Rpb24ocHJvZ3Jlc3Mpe2lmKHBlbmRpbmcpe3ZhciBjYWxsYmFja3M9cGVuZGluZztpZihwZW5kaW5nLmxlbmd0aCl7bmV4dFRpY2soZnVuY3Rpb24oKXt2YXIgY2FsbGJhY2s7Zm9yKHZhciBpPTAsaWk9Y2FsbGJhY2tzLmxlbmd0aDtpPGlpO2krKyl7Y2FsbGJhY2s9Y2FsbGJhY2tzW2ldO2NhbGxiYWNrWzJdKHByb2dyZXNzKTt9fSk7fX19LHByb21pc2U6e3RoZW46ZnVuY3Rpb24oY2FsbGJhY2ssZXJyYmFjayxwcm9ncmVzc2JhY2spe3ZhciByZXN1bHQ9ZGVmZXIoKTt2YXIgd3JhcHBlZENhbGxiYWNrPWZ1bmN0aW9uKHZhbHVlKXt0cnl7cmVzdWx0LnJlc29sdmUoKGlzRnVuY3Rpb24oY2FsbGJhY2spP2NhbGxiYWNrOmRlZmF1bHRDYWxsYmFjaykodmFsdWUpKTt9Y2F0Y2goZSl7cmVzdWx0LnJlamVjdChlKTtleGNlcHRpb25IYW5kbGVyKGUpO319O3ZhciB3cmFwcGVkRXJyYmFjaz1mdW5jdGlvbihyZWFzb24pe3RyeXtyZXN1bHQucmVzb2x2ZSgoaXNGdW5jdGlvbihlcnJiYWNrKT9lcnJiYWNrOmRlZmF1bHRFcnJiYWNrKShyZWFzb24pKTt9Y2F0Y2goZSl7cmVzdWx0LnJlamVjdChlKTtleGNlcHRpb25IYW5kbGVyKGUpO319O3ZhciB3cmFwcGVkUHJvZ3Jlc3NiYWNrPWZ1bmN0aW9uKHByb2dyZXNzKXt0cnl7cmVzdWx0Lm5vdGlmeSgoaXNGdW5jdGlvbihwcm9ncmVzc2JhY2spP3Byb2dyZXNzYmFjazpkZWZhdWx0Q2FsbGJhY2spKHByb2dyZXNzKSk7fWNhdGNoKGUpe2V4Y2VwdGlvbkhhbmRsZXIoZSk7fX07aWYocGVuZGluZyl7cGVuZGluZy5wdXNoKFt3cmFwcGVkQ2FsbGJhY2ssd3JhcHBlZEVycmJhY2ssd3JhcHBlZFByb2dyZXNzYmFja10pO31lbHNle3ZhbHVlLnRoZW4od3JhcHBlZENhbGxiYWNrLHdyYXBwZWRFcnJiYWNrLHdyYXBwZWRQcm9ncmVzc2JhY2spO30KcmV0dXJuIHJlc3VsdC5wcm9taXNlO30sImNhdGNoIjpmdW5jdGlvbihjYWxsYmFjayl7cmV0dXJuIHRoaXMudGhlbihudWxsLGNhbGxiYWNrKTt9LCJmaW5hbGx5IjpmdW5jdGlvbihjYWxsYmFjayl7ZnVuY3Rpb24gbWFrZVByb21pc2UodmFsdWUscmVzb2x2ZWQpe3ZhciByZXN1bHQ9ZGVmZXIoKTtpZihyZXNvbHZlZCl7cmVzdWx0LnJlc29sdmUodmFsdWUpO31lbHNle3Jlc3VsdC5yZWplY3QodmFsdWUpO30KcmV0dXJuIHJlc3VsdC5wcm9taXNlO30KZnVuY3Rpb24gaGFuZGxlQ2FsbGJhY2sodmFsdWUsaXNSZXNvbHZlZCl7dmFyIGNhbGxiYWNrT3V0cHV0PW51bGw7dHJ5e2NhbGxiYWNrT3V0cHV0PShjYWxsYmFja3x8ZGVmYXVsdENhbGxiYWNrKSgpO31jYXRjaChlKXtyZXR1cm4gbWFrZVByb21pc2UoZSxmYWxzZSk7fQppZihjYWxsYmFja091dHB1dCYmaXNGdW5jdGlvbihjYWxsYmFja091dHB1dC50aGVuKSl7cmV0dXJuIGNhbGxiYWNrT3V0cHV0LnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gbWFrZVByb21pc2UodmFsdWUsaXNSZXNvbHZlZCk7fSxmdW5jdGlvbihlcnJvcil7cmV0dXJuIG1ha2VQcm9taXNlKGVycm9yLGZhbHNlKTt9KTt9ZWxzZXtyZXR1cm4gbWFrZVByb21pc2UodmFsdWUsaXNSZXNvbHZlZCk7fX0KcmV0dXJuIHRoaXMudGhlbihmdW5jdGlvbih2YWx1ZSl7cmV0dXJuIGhhbmRsZUNhbGxiYWNrKHZhbHVlLHRydWUpO30sZnVuY3Rpb24oZXJyb3Ipe3JldHVybiBoYW5kbGVDYWxsYmFjayhlcnJvcixmYWxzZSk7fSk7fX19O3JldHVybiBkZWZlcnJlZDt9O3ZhciByZWY9ZnVuY3Rpb24odmFsdWUpe2lmKHZhbHVlJiZpc0Z1bmN0aW9uKHZhbHVlLnRoZW4pKXJldHVybiB2YWx1ZTtyZXR1cm57dGhlbjpmdW5jdGlvbihjYWxsYmFjayl7dmFyIHJlc3VsdD1kZWZlcigpO25leHRUaWNrKGZ1bmN0aW9uKCl7cmVzdWx0LnJlc29sdmUoY2FsbGJhY2sodmFsdWUpKTt9KTtyZXR1cm4gcmVzdWx0LnByb21pc2U7fX07fTt2YXIgcmVqZWN0PWZ1bmN0aW9uKHJlYXNvbil7dmFyIHJlc3VsdD1kZWZlcigpO3Jlc3VsdC5yZWplY3QocmVhc29uKTtyZXR1cm4gcmVzdWx0LnByb21pc2U7fTt2YXIgY3JlYXRlSW50ZXJuYWxSZWplY3RlZFByb21pc2U9ZnVuY3Rpb24ocmVhc29uKXtyZXR1cm57dGhlbjpmdW5jdGlvbihjYWxsYmFjayxlcnJiYWNrKXt2YXIgcmVzdWx0PWRlZmVyKCk7bmV4dFRpY2soZnVuY3Rpb24oKXt0cnl7cmVzdWx0LnJlc29sdmUoKGlzRnVuY3Rpb24oZXJyYmFjayk/ZXJyYmFjazpkZWZhdWx0RXJyYmFjaykocmVhc29uKSk7fWNhdGNoKGUpe3Jlc3VsdC5yZWplY3QoZSk7ZXhjZXB0aW9uSGFuZGxlcihlKTt9fSk7cmV0dXJuIHJlc3VsdC5wcm9taXNlO319O307dmFyIHdoZW49ZnVuY3Rpb24odmFsdWUsY2FsbGJhY2ssZXJyYmFjayxwcm9ncmVzc2JhY2spe3ZhciByZXN1bHQ9ZGVmZXIoKSxkb25lO3ZhciB3cmFwcGVkQ2FsbGJhY2s9ZnVuY3Rpb24odmFsdWUpe3RyeXtyZXR1cm4oaXNGdW5jdGlvbihjYWxsYmFjayk/Y2FsbGJhY2s6ZGVmYXVsdENhbGxiYWNrKSh2YWx1ZSk7fWNhdGNoKGUpe2V4Y2VwdGlvbkhhbmRsZXIoZSk7cmV0dXJuIHJlamVjdChlKTt9fTt2YXIgd3JhcHBlZEVycmJhY2s9ZnVuY3Rpb24ocmVhc29uKXt0cnl7cmV0dXJuKGlzRnVuY3Rpb24oZXJyYmFjayk/ZXJyYmFjazpkZWZhdWx0RXJyYmFjaykocmVhc29uKTt9Y2F0Y2goZSl7ZXhjZXB0aW9uSGFuZGxlcihlKTtyZXR1cm4gcmVqZWN0KGUpO319O3ZhciB3cmFwcGVkUHJvZ3Jlc3NiYWNrPWZ1bmN0aW9uKHByb2dyZXNzKXt0cnl7cmV0dXJuKGlzRnVuY3Rpb24ocHJvZ3Jlc3NiYWNrKT9wcm9ncmVzc2JhY2s6ZGVmYXVsdENhbGxiYWNrKShwcm9ncmVzcyk7fWNhdGNoKGUpe2V4Y2VwdGlvbkhhbmRsZXIoZSk7fX07bmV4dFRpY2soZnVuY3Rpb24oKXtyZWYodmFsdWUpLnRoZW4oZnVuY3Rpb24odmFsdWUpe2lmKGRvbmUpcmV0dXJuO2RvbmU9dHJ1ZTtyZXN1bHQucmVzb2x2ZShyZWYodmFsdWUpLnRoZW4od3JhcHBlZENhbGxiYWNrLHdyYXBwZWRFcnJiYWNrLHdyYXBwZWRQcm9ncmVzc2JhY2spKTt9LGZ1bmN0aW9uKHJlYXNvbil7aWYoZG9uZSlyZXR1cm47ZG9uZT10cnVlO3Jlc3VsdC5yZXNvbHZlKHdyYXBwZWRFcnJiYWNrKHJlYXNvbikpO30sZnVuY3Rpb24ocHJvZ3Jlc3Mpe2lmKGRvbmUpcmV0dXJuO3Jlc3VsdC5ub3RpZnkod3JhcHBlZFByb2dyZXNzYmFjayhwcm9ncmVzcykpO30pO30pO3JldHVybiByZXN1bHQucHJvbWlzZTt9O2Z1bmN0aW9uIGRlZmF1bHRDYWxsYmFjayh2YWx1ZSl7cmV0dXJuIHZhbHVlO30KZnVuY3Rpb24gZGVmYXVsdEVycmJhY2socmVhc29uKXtyZXR1cm4gcmVqZWN0KHJlYXNvbik7fQpmdW5jdGlvbiBhbGwocHJvbWlzZXMpe3ZhciBkZWZlcnJlZD1kZWZlcigpLGNvdW50ZXI9MCxyZXN1bHRzPWlzQXJyYXkocHJvbWlzZXMpP1tdOnt9O2ZvckVhY2gocHJvbWlzZXMsZnVuY3Rpb24ocHJvbWlzZSxrZXkpe2NvdW50ZXIrKztyZWYocHJvbWlzZSkudGhlbihmdW5jdGlvbih2YWx1ZSl7aWYocmVzdWx0cy5oYXNPd25Qcm9wZXJ0eShrZXkpKXJldHVybjtyZXN1bHRzW2tleV09dmFsdWU7aWYoISgtLWNvdW50ZXIpKWRlZmVycmVkLnJlc29sdmUocmVzdWx0cyk7fSxmdW5jdGlvbihyZWFzb24pe2lmKHJlc3VsdHMuaGFzT3duUHJvcGVydHkoa2V5KSlyZXR1cm47ZGVmZXJyZWQucmVqZWN0KHJlYXNvbik7fSk7fSk7aWYoY291bnRlcj09PTApe2RlZmVycmVkLnJlc29sdmUocmVzdWx0cyk7fQpyZXR1cm4gZGVmZXJyZWQucHJvbWlzZTt9CnJldHVybntkZWZlcjpkZWZlcixyZWplY3Q6cmVqZWN0LHdoZW46d2hlbixhbGw6YWxsfTt9CmZ1bmN0aW9uICQkUkFGUHJvdmlkZXIoKXt0aGlzLiRnZXQ9Wyckd2luZG93JywnJHRpbWVvdXQnLGZ1bmN0aW9uKCR3aW5kb3csJHRpbWVvdXQpe3ZhciByZXF1ZXN0QW5pbWF0aW9uRnJhbWU9JHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fCR3aW5kb3cud2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lfHwkd2luZG93Lm1velJlcXVlc3RBbmltYXRpb25GcmFtZTt2YXIgY2FuY2VsQW5pbWF0aW9uRnJhbWU9JHdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZXx8JHdpbmRvdy53ZWJraXRDYW5jZWxBbmltYXRpb25GcmFtZXx8JHdpbmRvdy5tb3pDYW5jZWxBbmltYXRpb25GcmFtZXx8JHdpbmRvdy53ZWJraXRDYW5jZWxSZXF1ZXN0QW5pbWF0aW9uRnJhbWU7dmFyIHJhZlN1cHBvcnRlZD0hIXJlcXVlc3RBbmltYXRpb25GcmFtZTt2YXIgcmFmPXJhZlN1cHBvcnRlZD9mdW5jdGlvbihmbil7dmFyIGlkPXJlcXVlc3RBbmltYXRpb25GcmFtZShmbik7cmV0dXJuIGZ1bmN0aW9uKCl7Y2FuY2VsQW5pbWF0aW9uRnJhbWUoaWQpO307fTpmdW5jdGlvbihmbil7dmFyIHRpbWVyPSR0aW1lb3V0KGZuLDE2LjY2LGZhbHNlKTtyZXR1cm4gZnVuY3Rpb24oKXskdGltZW91dC5jYW5jZWwodGltZXIpO307fTtyYWYuc3VwcG9ydGVkPXJhZlN1cHBvcnRlZDtyZXR1cm4gcmFmO31dO30KZnVuY3Rpb24gJFJvb3RTY29wZVByb3ZpZGVyKCl7dmFyIFRUTD0xMDt2YXIgJHJvb3RTY29wZU1pbkVycj1taW5FcnIoJyRyb290U2NvcGUnKTt2YXIgbGFzdERpcnR5V2F0Y2g9bnVsbDt0aGlzLmRpZ2VzdFR0bD1mdW5jdGlvbih2YWx1ZSl7aWYoYXJndW1lbnRzLmxlbmd0aCl7VFRMPXZhbHVlO30KcmV0dXJuIFRUTDt9O3RoaXMuJGdldD1bJyRpbmplY3RvcicsJyRleGNlcHRpb25IYW5kbGVyJywnJHBhcnNlJywnJGJyb3dzZXInLGZ1bmN0aW9uKCRpbmplY3RvciwkZXhjZXB0aW9uSGFuZGxlciwkcGFyc2UsJGJyb3dzZXIpe2Z1bmN0aW9uIFNjb3BlKCl7dGhpcy4kaWQ9bmV4dFVpZCgpO3RoaXMuJCRwaGFzZT10aGlzLiRwYXJlbnQ9dGhpcy4kJHdhdGNoZXJzPXRoaXMuJCRuZXh0U2libGluZz10aGlzLiQkcHJldlNpYmxpbmc9dGhpcy4kJGNoaWxkSGVhZD10aGlzLiQkY2hpbGRUYWlsPW51bGw7dGhpc1sndGhpcyddPXRoaXMuJHJvb3Q9dGhpczt0aGlzLiQkZGVzdHJveWVkPWZhbHNlO3RoaXMuJCRhc3luY1F1ZXVlPVtdO3RoaXMuJCRwb3N0RGlnZXN0UXVldWU9W107dGhpcy4kJGxpc3RlbmVycz17fTt0aGlzLiQkbGlzdGVuZXJDb3VudD17fTt0aGlzLiQkaXNvbGF0ZUJpbmRpbmdzPXt9O30KU2NvcGUucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpTY29wZSwkbmV3OmZ1bmN0aW9uKGlzb2xhdGUpe3ZhciBDaGlsZFNjb3BlLGNoaWxkO2lmKGlzb2xhdGUpe2NoaWxkPW5ldyBTY29wZSgpO2NoaWxkLiRyb290PXRoaXMuJHJvb3Q7Y2hpbGQuJCRhc3luY1F1ZXVlPXRoaXMuJCRhc3luY1F1ZXVlO2NoaWxkLiQkcG9zdERpZ2VzdFF1ZXVlPXRoaXMuJCRwb3N0RGlnZXN0UXVldWU7fWVsc2V7aWYoIXRoaXMuJCRjaGlsZFNjb3BlQ2xhc3Mpe3RoaXMuJCRjaGlsZFNjb3BlQ2xhc3M9ZnVuY3Rpb24oKXt0aGlzLiQkd2F0Y2hlcnM9dGhpcy4kJG5leHRTaWJsaW5nPXRoaXMuJCRjaGlsZEhlYWQ9dGhpcy4kJGNoaWxkVGFpbD1udWxsO3RoaXMuJCRsaXN0ZW5lcnM9e307dGhpcy4kJGxpc3RlbmVyQ291bnQ9e307dGhpcy4kaWQ9bmV4dFVpZCgpO3RoaXMuJCRjaGlsZFNjb3BlQ2xhc3M9bnVsbDt9O3RoaXMuJCRjaGlsZFNjb3BlQ2xhc3MucHJvdG90eXBlPXRoaXM7fQpjaGlsZD1uZXcgdGhpcy4kJGNoaWxkU2NvcGVDbGFzcygpO30KY2hpbGRbJ3RoaXMnXT1jaGlsZDtjaGlsZC4kcGFyZW50PXRoaXM7Y2hpbGQuJCRwcmV2U2libGluZz10aGlzLiQkY2hpbGRUYWlsO2lmKHRoaXMuJCRjaGlsZEhlYWQpe3RoaXMuJCRjaGlsZFRhaWwuJCRuZXh0U2libGluZz1jaGlsZDt0aGlzLiQkY2hpbGRUYWlsPWNoaWxkO31lbHNle3RoaXMuJCRjaGlsZEhlYWQ9dGhpcy4kJGNoaWxkVGFpbD1jaGlsZDt9CnJldHVybiBjaGlsZDt9LCR3YXRjaDpmdW5jdGlvbih3YXRjaEV4cCxsaXN0ZW5lcixvYmplY3RFcXVhbGl0eSl7dmFyIHNjb3BlPXRoaXMsZ2V0PWNvbXBpbGVUb0ZuKHdhdGNoRXhwLCd3YXRjaCcpLGFycmF5PXNjb3BlLiQkd2F0Y2hlcnMsd2F0Y2hlcj17Zm46bGlzdGVuZXIsbGFzdDppbml0V2F0Y2hWYWwsZ2V0OmdldCxleHA6d2F0Y2hFeHAsZXE6ISFvYmplY3RFcXVhbGl0eX07bGFzdERpcnR5V2F0Y2g9bnVsbDtpZighaXNGdW5jdGlvbihsaXN0ZW5lcikpe3ZhciBsaXN0ZW5Gbj1jb21waWxlVG9GbihsaXN0ZW5lcnx8bm9vcCwnbGlzdGVuZXInKTt3YXRjaGVyLmZuPWZ1bmN0aW9uKG5ld1ZhbCxvbGRWYWwsc2NvcGUpe2xpc3RlbkZuKHNjb3BlKTt9O30KaWYodHlwZW9mIHdhdGNoRXhwPT0nc3RyaW5nJyYmZ2V0LmNvbnN0YW50KXt2YXIgb3JpZ2luYWxGbj13YXRjaGVyLmZuO3dhdGNoZXIuZm49ZnVuY3Rpb24obmV3VmFsLG9sZFZhbCxzY29wZSl7b3JpZ2luYWxGbi5jYWxsKHRoaXMsbmV3VmFsLG9sZFZhbCxzY29wZSk7YXJyYXlSZW1vdmUoYXJyYXksd2F0Y2hlcik7fTt9CmlmKCFhcnJheSl7YXJyYXk9c2NvcGUuJCR3YXRjaGVycz1bXTt9CmFycmF5LnVuc2hpZnQod2F0Y2hlcik7cmV0dXJuIGZ1bmN0aW9uIGRlcmVnaXN0ZXJXYXRjaCgpe2FycmF5UmVtb3ZlKGFycmF5LHdhdGNoZXIpO2xhc3REaXJ0eVdhdGNoPW51bGw7fTt9LCR3YXRjaENvbGxlY3Rpb246ZnVuY3Rpb24ob2JqLGxpc3RlbmVyKXt2YXIgc2VsZj10aGlzO3ZhciBuZXdWYWx1ZTt2YXIgb2xkVmFsdWU7dmFyIHZlcnlPbGRWYWx1ZTt2YXIgdHJhY2tWZXJ5T2xkVmFsdWU9KGxpc3RlbmVyLmxlbmd0aD4xKTt2YXIgY2hhbmdlRGV0ZWN0ZWQ9MDt2YXIgb2JqR2V0dGVyPSRwYXJzZShvYmopO3ZhciBpbnRlcm5hbEFycmF5PVtdO3ZhciBpbnRlcm5hbE9iamVjdD17fTt2YXIgaW5pdFJ1bj10cnVlO3ZhciBvbGRMZW5ndGg9MDtmdW5jdGlvbiAkd2F0Y2hDb2xsZWN0aW9uV2F0Y2goKXtuZXdWYWx1ZT1vYmpHZXR0ZXIoc2VsZik7dmFyIG5ld0xlbmd0aCxrZXk7aWYoIWlzT2JqZWN0KG5ld1ZhbHVlKSl7aWYob2xkVmFsdWUhPT1uZXdWYWx1ZSl7b2xkVmFsdWU9bmV3VmFsdWU7Y2hhbmdlRGV0ZWN0ZWQrKzt9fWVsc2UgaWYoaXNBcnJheUxpa2UobmV3VmFsdWUpKXtpZihvbGRWYWx1ZSE9PWludGVybmFsQXJyYXkpe29sZFZhbHVlPWludGVybmFsQXJyYXk7b2xkTGVuZ3RoPW9sZFZhbHVlLmxlbmd0aD0wO2NoYW5nZURldGVjdGVkKys7fQpuZXdMZW5ndGg9bmV3VmFsdWUubGVuZ3RoO2lmKG9sZExlbmd0aCE9PW5ld0xlbmd0aCl7Y2hhbmdlRGV0ZWN0ZWQrKztvbGRWYWx1ZS5sZW5ndGg9b2xkTGVuZ3RoPW5ld0xlbmd0aDt9CmZvcih2YXIgaT0wO2k8bmV3TGVuZ3RoO2krKyl7dmFyIGJvdGhOYU49KG9sZFZhbHVlW2ldIT09b2xkVmFsdWVbaV0pJiYobmV3VmFsdWVbaV0hPT1uZXdWYWx1ZVtpXSk7aWYoIWJvdGhOYU4mJihvbGRWYWx1ZVtpXSE9PW5ld1ZhbHVlW2ldKSl7Y2hhbmdlRGV0ZWN0ZWQrKztvbGRWYWx1ZVtpXT1uZXdWYWx1ZVtpXTt9fX1lbHNle2lmKG9sZFZhbHVlIT09aW50ZXJuYWxPYmplY3Qpe29sZFZhbHVlPWludGVybmFsT2JqZWN0PXt9O29sZExlbmd0aD0wO2NoYW5nZURldGVjdGVkKys7fQpuZXdMZW5ndGg9MDtmb3Ioa2V5IGluIG5ld1ZhbHVlKXtpZihuZXdWYWx1ZS5oYXNPd25Qcm9wZXJ0eShrZXkpKXtuZXdMZW5ndGgrKztpZihvbGRWYWx1ZS5oYXNPd25Qcm9wZXJ0eShrZXkpKXtpZihvbGRWYWx1ZVtrZXldIT09bmV3VmFsdWVba2V5XSl7Y2hhbmdlRGV0ZWN0ZWQrKztvbGRWYWx1ZVtrZXldPW5ld1ZhbHVlW2tleV07fX1lbHNle29sZExlbmd0aCsrO29sZFZhbHVlW2tleV09bmV3VmFsdWVba2V5XTtjaGFuZ2VEZXRlY3RlZCsrO319fQppZihvbGRMZW5ndGg+bmV3TGVuZ3RoKXtjaGFuZ2VEZXRlY3RlZCsrO2ZvcihrZXkgaW4gb2xkVmFsdWUpe2lmKG9sZFZhbHVlLmhhc093blByb3BlcnR5KGtleSkmJiFuZXdWYWx1ZS5oYXNPd25Qcm9wZXJ0eShrZXkpKXtvbGRMZW5ndGgtLTtkZWxldGUgb2xkVmFsdWVba2V5XTt9fX19CnJldHVybiBjaGFuZ2VEZXRlY3RlZDt9CmZ1bmN0aW9uICR3YXRjaENvbGxlY3Rpb25BY3Rpb24oKXtpZihpbml0UnVuKXtpbml0UnVuPWZhbHNlO2xpc3RlbmVyKG5ld1ZhbHVlLG5ld1ZhbHVlLHNlbGYpO31lbHNle2xpc3RlbmVyKG5ld1ZhbHVlLHZlcnlPbGRWYWx1ZSxzZWxmKTt9CmlmKHRyYWNrVmVyeU9sZFZhbHVlKXtpZighaXNPYmplY3QobmV3VmFsdWUpKXt2ZXJ5T2xkVmFsdWU9bmV3VmFsdWU7fWVsc2UgaWYoaXNBcnJheUxpa2UobmV3VmFsdWUpKXt2ZXJ5T2xkVmFsdWU9bmV3IEFycmF5KG5ld1ZhbHVlLmxlbmd0aCk7Zm9yKHZhciBpPTA7aTxuZXdWYWx1ZS5sZW5ndGg7aSsrKXt2ZXJ5T2xkVmFsdWVbaV09bmV3VmFsdWVbaV07fX1lbHNle3ZlcnlPbGRWYWx1ZT17fTtmb3IodmFyIGtleSBpbiBuZXdWYWx1ZSl7aWYoaGFzT3duUHJvcGVydHkuY2FsbChuZXdWYWx1ZSxrZXkpKXt2ZXJ5T2xkVmFsdWVba2V5XT1uZXdWYWx1ZVtrZXldO319fX19CnJldHVybiB0aGlzLiR3YXRjaCgkd2F0Y2hDb2xsZWN0aW9uV2F0Y2gsJHdhdGNoQ29sbGVjdGlvbkFjdGlvbik7fSwkZGlnZXN0OmZ1bmN0aW9uKCl7dmFyIHdhdGNoLHZhbHVlLGxhc3Qsd2F0Y2hlcnMsYXN5bmNRdWV1ZT10aGlzLiQkYXN5bmNRdWV1ZSxwb3N0RGlnZXN0UXVldWU9dGhpcy4kJHBvc3REaWdlc3RRdWV1ZSxsZW5ndGgsZGlydHksdHRsPVRUTCxuZXh0LGN1cnJlbnQsdGFyZ2V0PXRoaXMsd2F0Y2hMb2c9W10sbG9nSWR4LGxvZ01zZyxhc3luY1Rhc2s7YmVnaW5QaGFzZSgnJGRpZ2VzdCcpO2xhc3REaXJ0eVdhdGNoPW51bGw7ZG97ZGlydHk9ZmFsc2U7Y3VycmVudD10YXJnZXQ7d2hpbGUoYXN5bmNRdWV1ZS5sZW5ndGgpe3RyeXthc3luY1Rhc2s9YXN5bmNRdWV1ZS5zaGlmdCgpO2FzeW5jVGFzay5zY29wZS4kZXZhbChhc3luY1Rhc2suZXhwcmVzc2lvbik7fWNhdGNoKGUpe2NsZWFyUGhhc2UoKTskZXhjZXB0aW9uSGFuZGxlcihlKTt9Cmxhc3REaXJ0eVdhdGNoPW51bGw7fQp0cmF2ZXJzZVNjb3Blc0xvb3A6ZG97aWYoKHdhdGNoZXJzPWN1cnJlbnQuJCR3YXRjaGVycykpe2xlbmd0aD13YXRjaGVycy5sZW5ndGg7d2hpbGUobGVuZ3RoLS0pe3RyeXt3YXRjaD13YXRjaGVyc1tsZW5ndGhdO2lmKHdhdGNoKXtpZigodmFsdWU9d2F0Y2guZ2V0KGN1cnJlbnQpKSE9PShsYXN0PXdhdGNoLmxhc3QpJiYhKHdhdGNoLmVxP2VxdWFscyh2YWx1ZSxsYXN0KToodHlwZW9mIHZhbHVlPT09J251bWJlcicmJnR5cGVvZiBsYXN0PT09J251bWJlcicmJmlzTmFOKHZhbHVlKSYmaXNOYU4obGFzdCkpKSl7ZGlydHk9dHJ1ZTtsYXN0RGlydHlXYXRjaD13YXRjaDt3YXRjaC5sYXN0PXdhdGNoLmVxP2NvcHkodmFsdWUsbnVsbCk6dmFsdWU7d2F0Y2guZm4odmFsdWUsKChsYXN0PT09aW5pdFdhdGNoVmFsKT92YWx1ZTpsYXN0KSxjdXJyZW50KTtpZih0dGw8NSl7bG9nSWR4PTQtdHRsO2lmKCF3YXRjaExvZ1tsb2dJZHhdKXdhdGNoTG9nW2xvZ0lkeF09W107bG9nTXNnPShpc0Z1bmN0aW9uKHdhdGNoLmV4cCkpPydmbjogJysod2F0Y2guZXhwLm5hbWV8fHdhdGNoLmV4cC50b1N0cmluZygpKTp3YXRjaC5leHA7bG9nTXNnKz0nOyBuZXdWYWw6ICcrdG9Kc29uKHZhbHVlKSsnOyBvbGRWYWw6ICcrdG9Kc29uKGxhc3QpO3dhdGNoTG9nW2xvZ0lkeF0ucHVzaChsb2dNc2cpO319ZWxzZSBpZih3YXRjaD09PWxhc3REaXJ0eVdhdGNoKXtkaXJ0eT1mYWxzZTticmVhayB0cmF2ZXJzZVNjb3Blc0xvb3A7fX19Y2F0Y2goZSl7Y2xlYXJQaGFzZSgpOyRleGNlcHRpb25IYW5kbGVyKGUpO319fQppZighKG5leHQ9KGN1cnJlbnQuJCRjaGlsZEhlYWR8fChjdXJyZW50IT09dGFyZ2V0JiZjdXJyZW50LiQkbmV4dFNpYmxpbmcpKSkpe3doaWxlKGN1cnJlbnQhPT10YXJnZXQmJiEobmV4dD1jdXJyZW50LiQkbmV4dFNpYmxpbmcpKXtjdXJyZW50PWN1cnJlbnQuJHBhcmVudDt9fX13aGlsZSgoY3VycmVudD1uZXh0KSk7aWYoKGRpcnR5fHxhc3luY1F1ZXVlLmxlbmd0aCkmJiEodHRsLS0pKXtjbGVhclBoYXNlKCk7dGhyb3cgJHJvb3RTY29wZU1pbkVycignaW5mZGlnJywnezB9ICRkaWdlc3QoKSBpdGVyYXRpb25zIHJlYWNoZWQuIEFib3J0aW5nIVxuJysnV2F0Y2hlcnMgZmlyZWQgaW4gdGhlIGxhc3QgNSBpdGVyYXRpb25zOiB7MX0nLFRUTCx0b0pzb24od2F0Y2hMb2cpKTt9fXdoaWxlKGRpcnR5fHxhc3luY1F1ZXVlLmxlbmd0aCk7Y2xlYXJQaGFzZSgpO3doaWxlKHBvc3REaWdlc3RRdWV1ZS5sZW5ndGgpe3RyeXtwb3N0RGlnZXN0UXVldWUuc2hpZnQoKSgpO31jYXRjaChlKXskZXhjZXB0aW9uSGFuZGxlcihlKTt9fX0sJGRlc3Ryb3k6ZnVuY3Rpb24oKXtpZih0aGlzLiQkZGVzdHJveWVkKXJldHVybjt2YXIgcGFyZW50PXRoaXMuJHBhcmVudDt0aGlzLiRicm9hZGNhc3QoJyRkZXN0cm95Jyk7dGhpcy4kJGRlc3Ryb3llZD10cnVlO2lmKHRoaXM9PT0kcm9vdFNjb3BlKXJldHVybjtmb3JFYWNoKHRoaXMuJCRsaXN0ZW5lckNvdW50LGJpbmQobnVsbCxkZWNyZW1lbnRMaXN0ZW5lckNvdW50LHRoaXMpKTtpZihwYXJlbnQuJCRjaGlsZEhlYWQ9PXRoaXMpcGFyZW50LiQkY2hpbGRIZWFkPXRoaXMuJCRuZXh0U2libGluZztpZihwYXJlbnQuJCRjaGlsZFRhaWw9PXRoaXMpcGFyZW50LiQkY2hpbGRUYWlsPXRoaXMuJCRwcmV2U2libGluZztpZih0aGlzLiQkcHJldlNpYmxpbmcpdGhpcy4kJHByZXZTaWJsaW5nLiQkbmV4dFNpYmxpbmc9dGhpcy4kJG5leHRTaWJsaW5nO2lmKHRoaXMuJCRuZXh0U2libGluZyl0aGlzLiQkbmV4dFNpYmxpbmcuJCRwcmV2U2libGluZz10aGlzLiQkcHJldlNpYmxpbmc7dGhpcy4kcGFyZW50PXRoaXMuJCRuZXh0U2libGluZz10aGlzLiQkcHJldlNpYmxpbmc9dGhpcy4kJGNoaWxkSGVhZD10aGlzLiQkY2hpbGRUYWlsPXRoaXMuJHJvb3Q9bnVsbDt0aGlzLiQkbGlzdGVuZXJzPXt9O3RoaXMuJCR3YXRjaGVycz10aGlzLiQkYXN5bmNRdWV1ZT10aGlzLiQkcG9zdERpZ2VzdFF1ZXVlPVtdO3RoaXMuJGRlc3Ryb3k9dGhpcy4kZGlnZXN0PXRoaXMuJGFwcGx5PW5vb3A7dGhpcy4kb249dGhpcy4kd2F0Y2g9ZnVuY3Rpb24oKXtyZXR1cm4gbm9vcDt9O30sJGV2YWw6ZnVuY3Rpb24oZXhwcixsb2NhbHMpe3JldHVybiAkcGFyc2UoZXhwcikodGhpcyxsb2NhbHMpO30sJGV2YWxBc3luYzpmdW5jdGlvbihleHByKXtpZighJHJvb3RTY29wZS4kJHBoYXNlJiYhJHJvb3RTY29wZS4kJGFzeW5jUXVldWUubGVuZ3RoKXskYnJvd3Nlci5kZWZlcihmdW5jdGlvbigpe2lmKCRyb290U2NvcGUuJCRhc3luY1F1ZXVlLmxlbmd0aCl7JHJvb3RTY29wZS4kZGlnZXN0KCk7fX0pO30KdGhpcy4kJGFzeW5jUXVldWUucHVzaCh7c2NvcGU6dGhpcyxleHByZXNzaW9uOmV4cHJ9KTt9LCQkcG9zdERpZ2VzdDpmdW5jdGlvbihmbil7dGhpcy4kJHBvc3REaWdlc3RRdWV1ZS5wdXNoKGZuKTt9LCRhcHBseTpmdW5jdGlvbihleHByKXt0cnl7YmVnaW5QaGFzZSgnJGFwcGx5Jyk7cmV0dXJuIHRoaXMuJGV2YWwoZXhwcik7fWNhdGNoKGUpeyRleGNlcHRpb25IYW5kbGVyKGUpO31maW5hbGx5e2NsZWFyUGhhc2UoKTt0cnl7JHJvb3RTY29wZS4kZGlnZXN0KCk7fWNhdGNoKGUpeyRleGNlcHRpb25IYW5kbGVyKGUpO3Rocm93IGU7fX19LCRvbjpmdW5jdGlvbihuYW1lLGxpc3RlbmVyKXt2YXIgbmFtZWRMaXN0ZW5lcnM9dGhpcy4kJGxpc3RlbmVyc1tuYW1lXTtpZighbmFtZWRMaXN0ZW5lcnMpe3RoaXMuJCRsaXN0ZW5lcnNbbmFtZV09bmFtZWRMaXN0ZW5lcnM9W107fQpuYW1lZExpc3RlbmVycy5wdXNoKGxpc3RlbmVyKTt2YXIgY3VycmVudD10aGlzO2Rve2lmKCFjdXJyZW50LiQkbGlzdGVuZXJDb3VudFtuYW1lXSl7Y3VycmVudC4kJGxpc3RlbmVyQ291bnRbbmFtZV09MDt9CmN1cnJlbnQuJCRsaXN0ZW5lckNvdW50W25hbWVdKys7fXdoaWxlKChjdXJyZW50PWN1cnJlbnQuJHBhcmVudCkpO3ZhciBzZWxmPXRoaXM7cmV0dXJuIGZ1bmN0aW9uKCl7bmFtZWRMaXN0ZW5lcnNbaW5kZXhPZihuYW1lZExpc3RlbmVycyxsaXN0ZW5lcildPW51bGw7ZGVjcmVtZW50TGlzdGVuZXJDb3VudChzZWxmLDEsbmFtZSk7fTt9LCRlbWl0OmZ1bmN0aW9uKG5hbWUsYXJncyl7dmFyIGVtcHR5PVtdLG5hbWVkTGlzdGVuZXJzLHNjb3BlPXRoaXMsc3RvcFByb3BhZ2F0aW9uPWZhbHNlLGV2ZW50PXtuYW1lOm5hbWUsdGFyZ2V0U2NvcGU6c2NvcGUsc3RvcFByb3BhZ2F0aW9uOmZ1bmN0aW9uKCl7c3RvcFByb3BhZ2F0aW9uPXRydWU7fSxwcmV2ZW50RGVmYXVsdDpmdW5jdGlvbigpe2V2ZW50LmRlZmF1bHRQcmV2ZW50ZWQ9dHJ1ZTt9LGRlZmF1bHRQcmV2ZW50ZWQ6ZmFsc2V9LGxpc3RlbmVyQXJncz1jb25jYXQoW2V2ZW50XSxhcmd1bWVudHMsMSksaSxsZW5ndGg7ZG97bmFtZWRMaXN0ZW5lcnM9c2NvcGUuJCRsaXN0ZW5lcnNbbmFtZV18fGVtcHR5O2V2ZW50LmN1cnJlbnRTY29wZT1zY29wZTtmb3IoaT0wLGxlbmd0aD1uYW1lZExpc3RlbmVycy5sZW5ndGg7aTxsZW5ndGg7aSsrKXtpZighbmFtZWRMaXN0ZW5lcnNbaV0pe25hbWVkTGlzdGVuZXJzLnNwbGljZShpLDEpO2ktLTtsZW5ndGgtLTtjb250aW51ZTt9CnRyeXtuYW1lZExpc3RlbmVyc1tpXS5hcHBseShudWxsLGxpc3RlbmVyQXJncyk7fWNhdGNoKGUpeyRleGNlcHRpb25IYW5kbGVyKGUpO319CmlmKHN0b3BQcm9wYWdhdGlvbilyZXR1cm4gZXZlbnQ7c2NvcGU9c2NvcGUuJHBhcmVudDt9d2hpbGUoc2NvcGUpO3JldHVybiBldmVudDt9LCRicm9hZGNhc3Q6ZnVuY3Rpb24obmFtZSxhcmdzKXt2YXIgdGFyZ2V0PXRoaXMsY3VycmVudD10YXJnZXQsbmV4dD10YXJnZXQsZXZlbnQ9e25hbWU6bmFtZSx0YXJnZXRTY29wZTp0YXJnZXQscHJldmVudERlZmF1bHQ6ZnVuY3Rpb24oKXtldmVudC5kZWZhdWx0UHJldmVudGVkPXRydWU7fSxkZWZhdWx0UHJldmVudGVkOmZhbHNlfSxsaXN0ZW5lckFyZ3M9Y29uY2F0KFtldmVudF0sYXJndW1lbnRzLDEpLGxpc3RlbmVycyxpLGxlbmd0aDt3aGlsZSgoY3VycmVudD1uZXh0KSl7ZXZlbnQuY3VycmVudFNjb3BlPWN1cnJlbnQ7bGlzdGVuZXJzPWN1cnJlbnQuJCRsaXN0ZW5lcnNbbmFtZV18fFtdO2ZvcihpPTAsbGVuZ3RoPWxpc3RlbmVycy5sZW5ndGg7aTxsZW5ndGg7aSsrKXtpZighbGlzdGVuZXJzW2ldKXtsaXN0ZW5lcnMuc3BsaWNlKGksMSk7aS0tO2xlbmd0aC0tO2NvbnRpbnVlO30KdHJ5e2xpc3RlbmVyc1tpXS5hcHBseShudWxsLGxpc3RlbmVyQXJncyk7fWNhdGNoKGUpeyRleGNlcHRpb25IYW5kbGVyKGUpO319CmlmKCEobmV4dD0oKGN1cnJlbnQuJCRsaXN0ZW5lckNvdW50W25hbWVdJiZjdXJyZW50LiQkY2hpbGRIZWFkKXx8KGN1cnJlbnQhPT10YXJnZXQmJmN1cnJlbnQuJCRuZXh0U2libGluZykpKSl7d2hpbGUoY3VycmVudCE9PXRhcmdldCYmIShuZXh0PWN1cnJlbnQuJCRuZXh0U2libGluZykpe2N1cnJlbnQ9Y3VycmVudC4kcGFyZW50O319fQpyZXR1cm4gZXZlbnQ7fX07dmFyICRyb290U2NvcGU9bmV3IFNjb3BlKCk7cmV0dXJuICRyb290U2NvcGU7ZnVuY3Rpb24gYmVnaW5QaGFzZShwaGFzZSl7aWYoJHJvb3RTY29wZS4kJHBoYXNlKXt0aHJvdyAkcm9vdFNjb3BlTWluRXJyKCdpbnByb2cnLCd7MH0gYWxyZWFkeSBpbiBwcm9ncmVzcycsJHJvb3RTY29wZS4kJHBoYXNlKTt9CiRyb290U2NvcGUuJCRwaGFzZT1waGFzZTt9CmZ1bmN0aW9uIGNsZWFyUGhhc2UoKXskcm9vdFNjb3BlLiQkcGhhc2U9bnVsbDt9CmZ1bmN0aW9uIGNvbXBpbGVUb0ZuKGV4cCxuYW1lKXt2YXIgZm49JHBhcnNlKGV4cCk7YXNzZXJ0QXJnRm4oZm4sbmFtZSk7cmV0dXJuIGZuO30KZnVuY3Rpb24gZGVjcmVtZW50TGlzdGVuZXJDb3VudChjdXJyZW50LGNvdW50LG5hbWUpe2Rve2N1cnJlbnQuJCRsaXN0ZW5lckNvdW50W25hbWVdLT1jb3VudDtpZihjdXJyZW50LiQkbGlzdGVuZXJDb3VudFtuYW1lXT09PTApe2RlbGV0ZSBjdXJyZW50LiQkbGlzdGVuZXJDb3VudFtuYW1lXTt9fXdoaWxlKChjdXJyZW50PWN1cnJlbnQuJHBhcmVudCkpO30KZnVuY3Rpb24gaW5pdFdhdGNoVmFsKCl7fX1dO30KZnVuY3Rpb24gJCRTYW5pdGl6ZVVyaVByb3ZpZGVyKCl7dmFyIGFIcmVmU2FuaXRpemF0aW9uV2hpdGVsaXN0PS9eXHMqKGh0dHBzP3xmdHB8bWFpbHRvfHRlbHxmaWxlKTovLGltZ1NyY1Nhbml0aXphdGlvbldoaXRlbGlzdD0vXlxzKihodHRwcz98ZnRwfGZpbGUpOnxkYXRhOmltYWdlXC8vO3RoaXMuYUhyZWZTYW5pdGl6YXRpb25XaGl0ZWxpc3Q9ZnVuY3Rpb24ocmVnZXhwKXtpZihpc0RlZmluZWQocmVnZXhwKSl7YUhyZWZTYW5pdGl6YXRpb25XaGl0ZWxpc3Q9cmVnZXhwO3JldHVybiB0aGlzO30KcmV0dXJuIGFIcmVmU2FuaXRpemF0aW9uV2hpdGVsaXN0O307dGhpcy5pbWdTcmNTYW5pdGl6YXRpb25XaGl0ZWxpc3Q9ZnVuY3Rpb24ocmVnZXhwKXtpZihpc0RlZmluZWQocmVnZXhwKSl7aW1nU3JjU2FuaXRpemF0aW9uV2hpdGVsaXN0PXJlZ2V4cDtyZXR1cm4gdGhpczt9CnJldHVybiBpbWdTcmNTYW5pdGl6YXRpb25XaGl0ZWxpc3Q7fTt0aGlzLiRnZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24gc2FuaXRpemVVcmkodXJpLGlzSW1hZ2Upe3ZhciByZWdleD1pc0ltYWdlP2ltZ1NyY1Nhbml0aXphdGlvbldoaXRlbGlzdDphSHJlZlNhbml0aXphdGlvbldoaXRlbGlzdDt2YXIgbm9ybWFsaXplZFZhbDtpZighbXNpZXx8bXNpZT49OCl7bm9ybWFsaXplZFZhbD11cmxSZXNvbHZlKHVyaSkuaHJlZjtpZihub3JtYWxpemVkVmFsIT09JycmJiFub3JtYWxpemVkVmFsLm1hdGNoKHJlZ2V4KSl7cmV0dXJuJ3Vuc2FmZTonK25vcm1hbGl6ZWRWYWw7fX0KcmV0dXJuIHVyaTt9O307fQp2YXIgJHNjZU1pbkVycj1taW5FcnIoJyRzY2UnKTt2YXIgU0NFX0NPTlRFWFRTPXtIVE1MOidodG1sJyxDU1M6J2NzcycsVVJMOid1cmwnLFJFU09VUkNFX1VSTDoncmVzb3VyY2VVcmwnLEpTOidqcyd9O2Z1bmN0aW9uIGVzY2FwZUZvclJlZ2V4cChzKXtyZXR1cm4gcy5yZXBsYWNlKC8oWy0oKVxbXF17fSs/Ki4kXF58LDojPCFcXF0pL2csJ1xcJDEnKS5yZXBsYWNlKC9ceDA4L2csJ1xceDA4Jyk7fQpmdW5jdGlvbiBhZGp1c3RNYXRjaGVyKG1hdGNoZXIpe2lmKG1hdGNoZXI9PT0nc2VsZicpe3JldHVybiBtYXRjaGVyO31lbHNlIGlmKGlzU3RyaW5nKG1hdGNoZXIpKXtpZihtYXRjaGVyLmluZGV4T2YoJyoqKicpPi0xKXt0aHJvdyAkc2NlTWluRXJyKCdpd2NhcmQnLCdJbGxlZ2FsIHNlcXVlbmNlICoqKiBpbiBzdHJpbmcgbWF0Y2hlci4gIFN0cmluZzogezB9JyxtYXRjaGVyKTt9Cm1hdGNoZXI9ZXNjYXBlRm9yUmVnZXhwKG1hdGNoZXIpLnJlcGxhY2UoJ1xcKlxcKicsJy4qJykucmVwbGFjZSgnXFwqJywnW146Ly4/JjtdKicpO3JldHVybiBuZXcgUmVnRXhwKCdeJyttYXRjaGVyKyckJyk7fWVsc2UgaWYoaXNSZWdFeHAobWF0Y2hlcikpe3JldHVybiBuZXcgUmVnRXhwKCdeJyttYXRjaGVyLnNvdXJjZSsnJCcpO31lbHNle3Rocm93ICRzY2VNaW5FcnIoJ2ltYXRjaGVyJywnTWF0Y2hlcnMgbWF5IG9ubHkgYmUgInNlbGYiLCBzdHJpbmcgcGF0dGVybnMgb3IgUmVnRXhwIG9iamVjdHMnKTt9fQpmdW5jdGlvbiBhZGp1c3RNYXRjaGVycyhtYXRjaGVycyl7dmFyIGFkanVzdGVkTWF0Y2hlcnM9W107aWYoaXNEZWZpbmVkKG1hdGNoZXJzKSl7Zm9yRWFjaChtYXRjaGVycyxmdW5jdGlvbihtYXRjaGVyKXthZGp1c3RlZE1hdGNoZXJzLnB1c2goYWRqdXN0TWF0Y2hlcihtYXRjaGVyKSk7fSk7fQpyZXR1cm4gYWRqdXN0ZWRNYXRjaGVyczt9CmZ1bmN0aW9uICRTY2VEZWxlZ2F0ZVByb3ZpZGVyKCl7dGhpcy5TQ0VfQ09OVEVYVFM9U0NFX0NPTlRFWFRTO3ZhciByZXNvdXJjZVVybFdoaXRlbGlzdD1bJ3NlbGYnXSxyZXNvdXJjZVVybEJsYWNrbGlzdD1bXTt0aGlzLnJlc291cmNlVXJsV2hpdGVsaXN0PWZ1bmN0aW9uKHZhbHVlKXtpZihhcmd1bWVudHMubGVuZ3RoKXtyZXNvdXJjZVVybFdoaXRlbGlzdD1hZGp1c3RNYXRjaGVycyh2YWx1ZSk7fQpyZXR1cm4gcmVzb3VyY2VVcmxXaGl0ZWxpc3Q7fTt0aGlzLnJlc291cmNlVXJsQmxhY2tsaXN0PWZ1bmN0aW9uKHZhbHVlKXtpZihhcmd1bWVudHMubGVuZ3RoKXtyZXNvdXJjZVVybEJsYWNrbGlzdD1hZGp1c3RNYXRjaGVycyh2YWx1ZSk7fQpyZXR1cm4gcmVzb3VyY2VVcmxCbGFja2xpc3Q7fTt0aGlzLiRnZXQ9WyckaW5qZWN0b3InLGZ1bmN0aW9uKCRpbmplY3Rvcil7dmFyIGh0bWxTYW5pdGl6ZXI9ZnVuY3Rpb24gaHRtbFNhbml0aXplcihodG1sKXt0aHJvdyAkc2NlTWluRXJyKCd1bnNhZmUnLCdBdHRlbXB0aW5nIHRvIHVzZSBhbiB1bnNhZmUgdmFsdWUgaW4gYSBzYWZlIGNvbnRleHQuJyk7fTtpZigkaW5qZWN0b3IuaGFzKCckc2FuaXRpemUnKSl7aHRtbFNhbml0aXplcj0kaW5qZWN0b3IuZ2V0KCckc2FuaXRpemUnKTt9CmZ1bmN0aW9uIG1hdGNoVXJsKG1hdGNoZXIscGFyc2VkVXJsKXtpZihtYXRjaGVyPT09J3NlbGYnKXtyZXR1cm4gdXJsSXNTYW1lT3JpZ2luKHBhcnNlZFVybCk7fWVsc2V7cmV0dXJuISFtYXRjaGVyLmV4ZWMocGFyc2VkVXJsLmhyZWYpO319CmZ1bmN0aW9uIGlzUmVzb3VyY2VVcmxBbGxvd2VkQnlQb2xpY3kodXJsKXt2YXIgcGFyc2VkVXJsPXVybFJlc29sdmUodXJsLnRvU3RyaW5nKCkpO3ZhciBpLG4sYWxsb3dlZD1mYWxzZTtmb3IoaT0wLG49cmVzb3VyY2VVcmxXaGl0ZWxpc3QubGVuZ3RoO2k8bjtpKyspe2lmKG1hdGNoVXJsKHJlc291cmNlVXJsV2hpdGVsaXN0W2ldLHBhcnNlZFVybCkpe2FsbG93ZWQ9dHJ1ZTticmVhazt9fQppZihhbGxvd2VkKXtmb3IoaT0wLG49cmVzb3VyY2VVcmxCbGFja2xpc3QubGVuZ3RoO2k8bjtpKyspe2lmKG1hdGNoVXJsKHJlc291cmNlVXJsQmxhY2tsaXN0W2ldLHBhcnNlZFVybCkpe2FsbG93ZWQ9ZmFsc2U7YnJlYWs7fX19CnJldHVybiBhbGxvd2VkO30KZnVuY3Rpb24gZ2VuZXJhdGVIb2xkZXJUeXBlKEJhc2Upe3ZhciBob2xkZXJUeXBlPWZ1bmN0aW9uIFRydXN0ZWRWYWx1ZUhvbGRlclR5cGUodHJ1c3RlZFZhbHVlKXt0aGlzLiQkdW53cmFwVHJ1c3RlZFZhbHVlPWZ1bmN0aW9uKCl7cmV0dXJuIHRydXN0ZWRWYWx1ZTt9O307aWYoQmFzZSl7aG9sZGVyVHlwZS5wcm90b3R5cGU9bmV3IEJhc2UoKTt9CmhvbGRlclR5cGUucHJvdG90eXBlLnZhbHVlT2Y9ZnVuY3Rpb24gc2NlVmFsdWVPZigpe3JldHVybiB0aGlzLiQkdW53cmFwVHJ1c3RlZFZhbHVlKCk7fTtob2xkZXJUeXBlLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbiBzY2VUb1N0cmluZygpe3JldHVybiB0aGlzLiQkdW53cmFwVHJ1c3RlZFZhbHVlKCkudG9TdHJpbmcoKTt9O3JldHVybiBob2xkZXJUeXBlO30KdmFyIHRydXN0ZWRWYWx1ZUhvbGRlckJhc2U9Z2VuZXJhdGVIb2xkZXJUeXBlKCksYnlUeXBlPXt9O2J5VHlwZVtTQ0VfQ09OVEVYVFMuSFRNTF09Z2VuZXJhdGVIb2xkZXJUeXBlKHRydXN0ZWRWYWx1ZUhvbGRlckJhc2UpO2J5VHlwZVtTQ0VfQ09OVEVYVFMuQ1NTXT1nZW5lcmF0ZUhvbGRlclR5cGUodHJ1c3RlZFZhbHVlSG9sZGVyQmFzZSk7YnlUeXBlW1NDRV9DT05URVhUUy5VUkxdPWdlbmVyYXRlSG9sZGVyVHlwZSh0cnVzdGVkVmFsdWVIb2xkZXJCYXNlKTtieVR5cGVbU0NFX0NPTlRFWFRTLkpTXT1nZW5lcmF0ZUhvbGRlclR5cGUodHJ1c3RlZFZhbHVlSG9sZGVyQmFzZSk7YnlUeXBlW1NDRV9DT05URVhUUy5SRVNPVVJDRV9VUkxdPWdlbmVyYXRlSG9sZGVyVHlwZShieVR5cGVbU0NFX0NPTlRFWFRTLlVSTF0pO2Z1bmN0aW9uIHRydXN0QXModHlwZSx0cnVzdGVkVmFsdWUpe3ZhciBDb25zdHJ1Y3Rvcj0oYnlUeXBlLmhhc093blByb3BlcnR5KHR5cGUpP2J5VHlwZVt0eXBlXTpudWxsKTtpZighQ29uc3RydWN0b3Ipe3Rocm93ICRzY2VNaW5FcnIoJ2ljb250ZXh0JywnQXR0ZW1wdGVkIHRvIHRydXN0IGEgdmFsdWUgaW4gaW52YWxpZCBjb250ZXh0LiBDb250ZXh0OiB7MH07IFZhbHVlOiB7MX0nLHR5cGUsdHJ1c3RlZFZhbHVlKTt9CmlmKHRydXN0ZWRWYWx1ZT09PW51bGx8fHRydXN0ZWRWYWx1ZT09PXVuZGVmaW5lZHx8dHJ1c3RlZFZhbHVlPT09Jycpe3JldHVybiB0cnVzdGVkVmFsdWU7fQppZih0eXBlb2YgdHJ1c3RlZFZhbHVlIT09J3N0cmluZycpe3Rocm93ICRzY2VNaW5FcnIoJ2l0eXBlJywnQXR0ZW1wdGVkIHRvIHRydXN0IGEgbm9uLXN0cmluZyB2YWx1ZSBpbiBhIGNvbnRlbnQgcmVxdWlyaW5nIGEgc3RyaW5nOiBDb250ZXh0OiB7MH0nLHR5cGUpO30KcmV0dXJuIG5ldyBDb25zdHJ1Y3Rvcih0cnVzdGVkVmFsdWUpO30KZnVuY3Rpb24gdmFsdWVPZihtYXliZVRydXN0ZWQpe2lmKG1heWJlVHJ1c3RlZCBpbnN0YW5jZW9mIHRydXN0ZWRWYWx1ZUhvbGRlckJhc2Upe3JldHVybiBtYXliZVRydXN0ZWQuJCR1bndyYXBUcnVzdGVkVmFsdWUoKTt9ZWxzZXtyZXR1cm4gbWF5YmVUcnVzdGVkO319CmZ1bmN0aW9uIGdldFRydXN0ZWQodHlwZSxtYXliZVRydXN0ZWQpe2lmKG1heWJlVHJ1c3RlZD09PW51bGx8fG1heWJlVHJ1c3RlZD09PXVuZGVmaW5lZHx8bWF5YmVUcnVzdGVkPT09Jycpe3JldHVybiBtYXliZVRydXN0ZWQ7fQp2YXIgY29uc3RydWN0b3I9KGJ5VHlwZS5oYXNPd25Qcm9wZXJ0eSh0eXBlKT9ieVR5cGVbdHlwZV06bnVsbCk7aWYoY29uc3RydWN0b3ImJm1heWJlVHJ1c3RlZCBpbnN0YW5jZW9mIGNvbnN0cnVjdG9yKXtyZXR1cm4gbWF5YmVUcnVzdGVkLiQkdW53cmFwVHJ1c3RlZFZhbHVlKCk7fQppZih0eXBlPT09U0NFX0NPTlRFWFRTLlJFU09VUkNFX1VSTCl7aWYoaXNSZXNvdXJjZVVybEFsbG93ZWRCeVBvbGljeShtYXliZVRydXN0ZWQpKXtyZXR1cm4gbWF5YmVUcnVzdGVkO31lbHNle3Rocm93ICRzY2VNaW5FcnIoJ2luc2VjdXJsJywnQmxvY2tlZCBsb2FkaW5nIHJlc291cmNlIGZyb20gdXJsIG5vdCBhbGxvd2VkIGJ5ICRzY2VEZWxlZ2F0ZSBwb2xpY3kuICBVUkw6IHswfScsbWF5YmVUcnVzdGVkLnRvU3RyaW5nKCkpO319ZWxzZSBpZih0eXBlPT09U0NFX0NPTlRFWFRTLkhUTUwpe3JldHVybiBodG1sU2FuaXRpemVyKG1heWJlVHJ1c3RlZCk7fQp0aHJvdyAkc2NlTWluRXJyKCd1bnNhZmUnLCdBdHRlbXB0aW5nIHRvIHVzZSBhbiB1bnNhZmUgdmFsdWUgaW4gYSBzYWZlIGNvbnRleHQuJyk7fQpyZXR1cm57dHJ1c3RBczp0cnVzdEFzLGdldFRydXN0ZWQ6Z2V0VHJ1c3RlZCx2YWx1ZU9mOnZhbHVlT2Z9O31dO30KZnVuY3Rpb24gJFNjZVByb3ZpZGVyKCl7dmFyIGVuYWJsZWQ9dHJ1ZTt0aGlzLmVuYWJsZWQ9ZnVuY3Rpb24odmFsdWUpe2lmKGFyZ3VtZW50cy5sZW5ndGgpe2VuYWJsZWQ9ISF2YWx1ZTt9CnJldHVybiBlbmFibGVkO307dGhpcy4kZ2V0PVsnJHBhcnNlJywnJHNuaWZmZXInLCckc2NlRGVsZWdhdGUnLGZ1bmN0aW9uKCRwYXJzZSwkc25pZmZlciwkc2NlRGVsZWdhdGUpe2lmKGVuYWJsZWQmJiRzbmlmZmVyLm1zaWUmJiRzbmlmZmVyLm1zaWVEb2N1bWVudE1vZGU8OCl7dGhyb3cgJHNjZU1pbkVycignaWVxdWlya3MnLCdTdHJpY3QgQ29udGV4dHVhbCBFc2NhcGluZyBkb2VzIG5vdCBzdXBwb3J0IEludGVybmV0IEV4cGxvcmVyIHZlcnNpb24gPCA5IGluIHF1aXJrcyAnKydtb2RlLiAgWW91IGNhbiBmaXggdGhpcyBieSBhZGRpbmcgdGhlIHRleHQgPCFkb2N0eXBlIGh0bWw+IHRvIHRoZSB0b3Agb2YgeW91ciBIVE1MICcrJ2RvY3VtZW50LiAgU2VlIGh0dHA6Ly9kb2NzLmFuZ3VsYXJqcy5vcmcvYXBpL25nLiRzY2UgZm9yIG1vcmUgaW5mb3JtYXRpb24uJyk7fQp2YXIgc2NlPXNoYWxsb3dDb3B5KFNDRV9DT05URVhUUyk7c2NlLmlzRW5hYmxlZD1mdW5jdGlvbigpe3JldHVybiBlbmFibGVkO307c2NlLnRydXN0QXM9JHNjZURlbGVnYXRlLnRydXN0QXM7c2NlLmdldFRydXN0ZWQ9JHNjZURlbGVnYXRlLmdldFRydXN0ZWQ7c2NlLnZhbHVlT2Y9JHNjZURlbGVnYXRlLnZhbHVlT2Y7aWYoIWVuYWJsZWQpe3NjZS50cnVzdEFzPXNjZS5nZXRUcnVzdGVkPWZ1bmN0aW9uKHR5cGUsdmFsdWUpe3JldHVybiB2YWx1ZTt9O3NjZS52YWx1ZU9mPWlkZW50aXR5O30Kc2NlLnBhcnNlQXM9ZnVuY3Rpb24gc2NlUGFyc2VBcyh0eXBlLGV4cHIpe3ZhciBwYXJzZWQ9JHBhcnNlKGV4cHIpO2lmKHBhcnNlZC5saXRlcmFsJiZwYXJzZWQuY29uc3RhbnQpe3JldHVybiBwYXJzZWQ7fWVsc2V7cmV0dXJuIGZ1bmN0aW9uIHNjZVBhcnNlQXNUcnVzdGVkKHNlbGYsbG9jYWxzKXtyZXR1cm4gc2NlLmdldFRydXN0ZWQodHlwZSxwYXJzZWQoc2VsZixsb2NhbHMpKTt9O319O3ZhciBwYXJzZT1zY2UucGFyc2VBcyxnZXRUcnVzdGVkPXNjZS5nZXRUcnVzdGVkLHRydXN0QXM9c2NlLnRydXN0QXM7Zm9yRWFjaChTQ0VfQ09OVEVYVFMsZnVuY3Rpb24oZW51bVZhbHVlLG5hbWUpe3ZhciBsTmFtZT1sb3dlcmNhc2UobmFtZSk7c2NlW2NhbWVsQ2FzZSgicGFyc2VfYXNfIitsTmFtZSldPWZ1bmN0aW9uKGV4cHIpe3JldHVybiBwYXJzZShlbnVtVmFsdWUsZXhwcik7fTtzY2VbY2FtZWxDYXNlKCJnZXRfdHJ1c3RlZF8iK2xOYW1lKV09ZnVuY3Rpb24odmFsdWUpe3JldHVybiBnZXRUcnVzdGVkKGVudW1WYWx1ZSx2YWx1ZSk7fTtzY2VbY2FtZWxDYXNlKCJ0cnVzdF9hc18iK2xOYW1lKV09ZnVuY3Rpb24odmFsdWUpe3JldHVybiB0cnVzdEFzKGVudW1WYWx1ZSx2YWx1ZSk7fTt9KTtyZXR1cm4gc2NlO31dO30KZnVuY3Rpb24gJFNuaWZmZXJQcm92aWRlcigpe3RoaXMuJGdldD1bJyR3aW5kb3cnLCckZG9jdW1lbnQnLGZ1bmN0aW9uKCR3aW5kb3csJGRvY3VtZW50KXt2YXIgZXZlbnRTdXBwb3J0PXt9LGFuZHJvaWQ9aW50KCgvYW5kcm9pZCAoXGQrKS8uZXhlYyhsb3dlcmNhc2UoKCR3aW5kb3cubmF2aWdhdG9yfHx7fSkudXNlckFnZW50KSl8fFtdKVsxXSksYm94ZWU9L0JveGVlL2kudGVzdCgoJHdpbmRvdy5uYXZpZ2F0b3J8fHt9KS51c2VyQWdlbnQpLGRvY3VtZW50PSRkb2N1bWVudFswXXx8e30sZG9jdW1lbnRNb2RlPWRvY3VtZW50LmRvY3VtZW50TW9kZSx2ZW5kb3JQcmVmaXgsdmVuZG9yUmVnZXg9L14oTW96fHdlYmtpdHxPfG1zKSg/PVtBLVpdKS8sYm9keVN0eWxlPWRvY3VtZW50LmJvZHkmJmRvY3VtZW50LmJvZHkuc3R5bGUsdHJhbnNpdGlvbnM9ZmFsc2UsYW5pbWF0aW9ucz1mYWxzZSxtYXRjaDtpZihib2R5U3R5bGUpe2Zvcih2YXIgcHJvcCBpbiBib2R5U3R5bGUpe2lmKG1hdGNoPXZlbmRvclJlZ2V4LmV4ZWMocHJvcCkpe3ZlbmRvclByZWZpeD1tYXRjaFswXTt2ZW5kb3JQcmVmaXg9dmVuZG9yUHJlZml4LnN1YnN0cigwLDEpLnRvVXBwZXJDYXNlKCkrdmVuZG9yUHJlZml4LnN1YnN0cigxKTticmVhazt9fQppZighdmVuZG9yUHJlZml4KXt2ZW5kb3JQcmVmaXg9KCdXZWJraXRPcGFjaXR5J2luIGJvZHlTdHlsZSkmJid3ZWJraXQnO30KdHJhbnNpdGlvbnM9ISEoKCd0cmFuc2l0aW9uJ2luIGJvZHlTdHlsZSl8fCh2ZW5kb3JQcmVmaXgrJ1RyYW5zaXRpb24naW4gYm9keVN0eWxlKSk7YW5pbWF0aW9ucz0hISgoJ2FuaW1hdGlvbidpbiBib2R5U3R5bGUpfHwodmVuZG9yUHJlZml4KydBbmltYXRpb24naW4gYm9keVN0eWxlKSk7aWYoYW5kcm9pZCYmKCF0cmFuc2l0aW9uc3x8IWFuaW1hdGlvbnMpKXt0cmFuc2l0aW9ucz1pc1N0cmluZyhkb2N1bWVudC5ib2R5LnN0eWxlLndlYmtpdFRyYW5zaXRpb24pO2FuaW1hdGlvbnM9aXNTdHJpbmcoZG9jdW1lbnQuYm9keS5zdHlsZS53ZWJraXRBbmltYXRpb24pO319CnJldHVybntoaXN0b3J5OiEhKCR3aW5kb3cuaGlzdG9yeSYmJHdpbmRvdy5oaXN0b3J5LnB1c2hTdGF0ZSYmIShhbmRyb2lkPDQpJiYhYm94ZWUpLGhhc2hjaGFuZ2U6J29uaGFzaGNoYW5nZSdpbiAkd2luZG93JiYoIWRvY3VtZW50TW9kZXx8ZG9jdW1lbnRNb2RlPjcpLGhhc0V2ZW50OmZ1bmN0aW9uKGV2ZW50KXtpZihldmVudD09J2lucHV0JyYmbXNpZT09OSlyZXR1cm4gZmFsc2U7aWYoaXNVbmRlZmluZWQoZXZlbnRTdXBwb3J0W2V2ZW50XSkpe3ZhciBkaXZFbG09ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7ZXZlbnRTdXBwb3J0W2V2ZW50XT0nb24nK2V2ZW50IGluIGRpdkVsbTt9CnJldHVybiBldmVudFN1cHBvcnRbZXZlbnRdO30sY3NwOmNzcCgpLHZlbmRvclByZWZpeDp2ZW5kb3JQcmVmaXgsdHJhbnNpdGlvbnM6dHJhbnNpdGlvbnMsYW5pbWF0aW9uczphbmltYXRpb25zLGFuZHJvaWQ6YW5kcm9pZCxtc2llOm1zaWUsbXNpZURvY3VtZW50TW9kZTpkb2N1bWVudE1vZGV9O31dO30KZnVuY3Rpb24gJFRpbWVvdXRQcm92aWRlcigpe3RoaXMuJGdldD1bJyRyb290U2NvcGUnLCckYnJvd3NlcicsJyRxJywnJGV4Y2VwdGlvbkhhbmRsZXInLGZ1bmN0aW9uKCRyb290U2NvcGUsJGJyb3dzZXIsJHEsJGV4Y2VwdGlvbkhhbmRsZXIpe3ZhciBkZWZlcnJlZHM9e307ZnVuY3Rpb24gdGltZW91dChmbixkZWxheSxpbnZva2VBcHBseSl7dmFyIGRlZmVycmVkPSRxLmRlZmVyKCkscHJvbWlzZT1kZWZlcnJlZC5wcm9taXNlLHNraXBBcHBseT0oaXNEZWZpbmVkKGludm9rZUFwcGx5KSYmIWludm9rZUFwcGx5KSx0aW1lb3V0SWQ7dGltZW91dElkPSRicm93c2VyLmRlZmVyKGZ1bmN0aW9uKCl7dHJ5e2RlZmVycmVkLnJlc29sdmUoZm4oKSk7fWNhdGNoKGUpe2RlZmVycmVkLnJlamVjdChlKTskZXhjZXB0aW9uSGFuZGxlcihlKTt9CmZpbmFsbHl7ZGVsZXRlIGRlZmVycmVkc1twcm9taXNlLiQkdGltZW91dElkXTt9CmlmKCFza2lwQXBwbHkpJHJvb3RTY29wZS4kYXBwbHkoKTt9LGRlbGF5KTtwcm9taXNlLiQkdGltZW91dElkPXRpbWVvdXRJZDtkZWZlcnJlZHNbdGltZW91dElkXT1kZWZlcnJlZDtyZXR1cm4gcHJvbWlzZTt9CnRpbWVvdXQuY2FuY2VsPWZ1bmN0aW9uKHByb21pc2Upe2lmKHByb21pc2UmJnByb21pc2UuJCR0aW1lb3V0SWQgaW4gZGVmZXJyZWRzKXtkZWZlcnJlZHNbcHJvbWlzZS4kJHRpbWVvdXRJZF0ucmVqZWN0KCdjYW5jZWxlZCcpO2RlbGV0ZSBkZWZlcnJlZHNbcHJvbWlzZS4kJHRpbWVvdXRJZF07cmV0dXJuICRicm93c2VyLmRlZmVyLmNhbmNlbChwcm9taXNlLiQkdGltZW91dElkKTt9CnJldHVybiBmYWxzZTt9O3JldHVybiB0aW1lb3V0O31dO30KdmFyIHVybFBhcnNpbmdOb2RlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImEiKTt2YXIgb3JpZ2luVXJsPXVybFJlc29sdmUod2luZG93LmxvY2F0aW9uLmhyZWYsdHJ1ZSk7ZnVuY3Rpb24gdXJsUmVzb2x2ZSh1cmwsYmFzZSl7dmFyIGhyZWY9dXJsO2lmKG1zaWUpe3VybFBhcnNpbmdOb2RlLnNldEF0dHJpYnV0ZSgiaHJlZiIsaHJlZik7aHJlZj11cmxQYXJzaW5nTm9kZS5ocmVmO30KdXJsUGFyc2luZ05vZGUuc2V0QXR0cmlidXRlKCdocmVmJyxocmVmKTtyZXR1cm57aHJlZjp1cmxQYXJzaW5nTm9kZS5ocmVmLHByb3RvY29sOnVybFBhcnNpbmdOb2RlLnByb3RvY29sP3VybFBhcnNpbmdOb2RlLnByb3RvY29sLnJlcGxhY2UoLzokLywnJyk6JycsaG9zdDp1cmxQYXJzaW5nTm9kZS5ob3N0LHNlYXJjaDp1cmxQYXJzaW5nTm9kZS5zZWFyY2g/dXJsUGFyc2luZ05vZGUuc2VhcmNoLnJlcGxhY2UoL15cPy8sJycpOicnLGhhc2g6dXJsUGFyc2luZ05vZGUuaGFzaD91cmxQYXJzaW5nTm9kZS5oYXNoLnJlcGxhY2UoL14jLywnJyk6JycsaG9zdG5hbWU6dXJsUGFyc2luZ05vZGUuaG9zdG5hbWUscG9ydDp1cmxQYXJzaW5nTm9kZS5wb3J0LHBhdGhuYW1lOih1cmxQYXJzaW5nTm9kZS5wYXRobmFtZS5jaGFyQXQoMCk9PT0nLycpP3VybFBhcnNpbmdOb2RlLnBhdGhuYW1lOicvJyt1cmxQYXJzaW5nTm9kZS5wYXRobmFtZX07fQpmdW5jdGlvbiB1cmxJc1NhbWVPcmlnaW4ocmVxdWVzdFVybCl7dmFyIHBhcnNlZD0oaXNTdHJpbmcocmVxdWVzdFVybCkpP3VybFJlc29sdmUocmVxdWVzdFVybCk6cmVxdWVzdFVybDtyZXR1cm4ocGFyc2VkLnByb3RvY29sPT09b3JpZ2luVXJsLnByb3RvY29sJiZwYXJzZWQuaG9zdD09PW9yaWdpblVybC5ob3N0KTt9CmZ1bmN0aW9uICRXaW5kb3dQcm92aWRlcigpe3RoaXMuJGdldD12YWx1ZUZuKHdpbmRvdyk7fQokRmlsdGVyUHJvdmlkZXIuJGluamVjdD1bJyRwcm92aWRlJ107ZnVuY3Rpb24gJEZpbHRlclByb3ZpZGVyKCRwcm92aWRlKXt2YXIgc3VmZml4PSdGaWx0ZXInO2Z1bmN0aW9uIHJlZ2lzdGVyKG5hbWUsZmFjdG9yeSl7aWYoaXNPYmplY3QobmFtZSkpe3ZhciBmaWx0ZXJzPXt9O2ZvckVhY2gobmFtZSxmdW5jdGlvbihmaWx0ZXIsa2V5KXtmaWx0ZXJzW2tleV09cmVnaXN0ZXIoa2V5LGZpbHRlcik7fSk7cmV0dXJuIGZpbHRlcnM7fWVsc2V7cmV0dXJuICRwcm92aWRlLmZhY3RvcnkobmFtZStzdWZmaXgsZmFjdG9yeSk7fX0KdGhpcy5yZWdpc3Rlcj1yZWdpc3Rlcjt0aGlzLiRnZXQ9WyckaW5qZWN0b3InLGZ1bmN0aW9uKCRpbmplY3Rvcil7cmV0dXJuIGZ1bmN0aW9uKG5hbWUpe3JldHVybiAkaW5qZWN0b3IuZ2V0KG5hbWUrc3VmZml4KTt9O31dO3JlZ2lzdGVyKCdjdXJyZW5jeScsY3VycmVuY3lGaWx0ZXIpO3JlZ2lzdGVyKCdkYXRlJyxkYXRlRmlsdGVyKTtyZWdpc3RlcignZmlsdGVyJyxmaWx0ZXJGaWx0ZXIpO3JlZ2lzdGVyKCdqc29uJyxqc29uRmlsdGVyKTtyZWdpc3RlcignbGltaXRUbycsbGltaXRUb0ZpbHRlcik7cmVnaXN0ZXIoJ2xvd2VyY2FzZScsbG93ZXJjYXNlRmlsdGVyKTtyZWdpc3RlcignbnVtYmVyJyxudW1iZXJGaWx0ZXIpO3JlZ2lzdGVyKCdvcmRlckJ5JyxvcmRlckJ5RmlsdGVyKTtyZWdpc3RlcigndXBwZXJjYXNlJyx1cHBlcmNhc2VGaWx0ZXIpO30KZnVuY3Rpb24gZmlsdGVyRmlsdGVyKCl7cmV0dXJuIGZ1bmN0aW9uKGFycmF5LGV4cHJlc3Npb24sY29tcGFyYXRvcil7aWYoIWlzQXJyYXkoYXJyYXkpKXJldHVybiBhcnJheTt2YXIgY29tcGFyYXRvclR5cGU9dHlwZW9mKGNvbXBhcmF0b3IpLHByZWRpY2F0ZXM9W107cHJlZGljYXRlcy5jaGVjaz1mdW5jdGlvbih2YWx1ZSl7Zm9yKHZhciBqPTA7ajxwcmVkaWNhdGVzLmxlbmd0aDtqKyspe2lmKCFwcmVkaWNhdGVzW2pdKHZhbHVlKSl7cmV0dXJuIGZhbHNlO319CnJldHVybiB0cnVlO307aWYoY29tcGFyYXRvclR5cGUhPT0nZnVuY3Rpb24nKXtpZihjb21wYXJhdG9yVHlwZT09PSdib29sZWFuJyYmY29tcGFyYXRvcil7Y29tcGFyYXRvcj1mdW5jdGlvbihvYmosdGV4dCl7cmV0dXJuIGFuZ3VsYXIuZXF1YWxzKG9iaix0ZXh0KTt9O31lbHNle2NvbXBhcmF0b3I9ZnVuY3Rpb24ob2JqLHRleHQpe2lmKG9iaiYmdGV4dCYmdHlwZW9mIG9iaj09PSdvYmplY3QnJiZ0eXBlb2YgdGV4dD09PSdvYmplY3QnKXtmb3IodmFyIG9iaktleSBpbiBvYmope2lmKG9iaktleS5jaGFyQXQoMCkhPT0nJCcmJmhhc093blByb3BlcnR5LmNhbGwob2JqLG9iaktleSkmJmNvbXBhcmF0b3Iob2JqW29iaktleV0sdGV4dFtvYmpLZXldKSl7cmV0dXJuIHRydWU7fX0KcmV0dXJuIGZhbHNlO30KdGV4dD0oJycrdGV4dCkudG9Mb3dlckNhc2UoKTtyZXR1cm4oJycrb2JqKS50b0xvd2VyQ2FzZSgpLmluZGV4T2YodGV4dCk+LTE7fTt9fQp2YXIgc2VhcmNoPWZ1bmN0aW9uKG9iaix0ZXh0KXtpZih0eXBlb2YgdGV4dD09J3N0cmluZycmJnRleHQuY2hhckF0KDApPT09JyEnKXtyZXR1cm4hc2VhcmNoKG9iaix0ZXh0LnN1YnN0cigxKSk7fQpzd2l0Y2godHlwZW9mIG9iail7Y2FzZSJib29sZWFuIjpjYXNlIm51bWJlciI6Y2FzZSJzdHJpbmciOnJldHVybiBjb21wYXJhdG9yKG9iaix0ZXh0KTtjYXNlIm9iamVjdCI6c3dpdGNoKHR5cGVvZiB0ZXh0KXtjYXNlIm9iamVjdCI6cmV0dXJuIGNvbXBhcmF0b3Iob2JqLHRleHQpO2RlZmF1bHQ6Zm9yKHZhciBvYmpLZXkgaW4gb2JqKXtpZihvYmpLZXkuY2hhckF0KDApIT09JyQnJiZzZWFyY2gob2JqW29iaktleV0sdGV4dCkpe3JldHVybiB0cnVlO319CmJyZWFrO30KcmV0dXJuIGZhbHNlO2Nhc2UiYXJyYXkiOmZvcih2YXIgaT0wO2k8b2JqLmxlbmd0aDtpKyspe2lmKHNlYXJjaChvYmpbaV0sdGV4dCkpe3JldHVybiB0cnVlO319CnJldHVybiBmYWxzZTtkZWZhdWx0OnJldHVybiBmYWxzZTt9fTtzd2l0Y2godHlwZW9mIGV4cHJlc3Npb24pe2Nhc2UiYm9vbGVhbiI6Y2FzZSJudW1iZXIiOmNhc2Uic3RyaW5nIjpleHByZXNzaW9uPXskOmV4cHJlc3Npb259O2Nhc2Uib2JqZWN0Ijpmb3IodmFyIGtleSBpbiBleHByZXNzaW9uKXsoZnVuY3Rpb24ocGF0aCl7aWYodHlwZW9mIGV4cHJlc3Npb25bcGF0aF09PT0ndW5kZWZpbmVkJylyZXR1cm47cHJlZGljYXRlcy5wdXNoKGZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4gc2VhcmNoKHBhdGg9PSckJz92YWx1ZToodmFsdWUmJnZhbHVlW3BhdGhdKSxleHByZXNzaW9uW3BhdGhdKTt9KTt9KShrZXkpO30KYnJlYWs7Y2FzZSdmdW5jdGlvbic6cHJlZGljYXRlcy5wdXNoKGV4cHJlc3Npb24pO2JyZWFrO2RlZmF1bHQ6cmV0dXJuIGFycmF5O30KdmFyIGZpbHRlcmVkPVtdO2Zvcih2YXIgaj0wO2o8YXJyYXkubGVuZ3RoO2orKyl7dmFyIHZhbHVlPWFycmF5W2pdO2lmKHByZWRpY2F0ZXMuY2hlY2sodmFsdWUpKXtmaWx0ZXJlZC5wdXNoKHZhbHVlKTt9fQpyZXR1cm4gZmlsdGVyZWQ7fTt9CmN1cnJlbmN5RmlsdGVyLiRpbmplY3Q9WyckbG9jYWxlJ107ZnVuY3Rpb24gY3VycmVuY3lGaWx0ZXIoJGxvY2FsZSl7dmFyIGZvcm1hdHM9JGxvY2FsZS5OVU1CRVJfRk9STUFUUztyZXR1cm4gZnVuY3Rpb24oYW1vdW50LGN1cnJlbmN5U3ltYm9sKXtpZihpc1VuZGVmaW5lZChjdXJyZW5jeVN5bWJvbCkpY3VycmVuY3lTeW1ib2w9Zm9ybWF0cy5DVVJSRU5DWV9TWU07cmV0dXJuIGZvcm1hdE51bWJlcihhbW91bnQsZm9ybWF0cy5QQVRURVJOU1sxXSxmb3JtYXRzLkdST1VQX1NFUCxmb3JtYXRzLkRFQ0lNQUxfU0VQLDIpLnJlcGxhY2UoL1x1MDBBNC9nLGN1cnJlbmN5U3ltYm9sKTt9O30KbnVtYmVyRmlsdGVyLiRpbmplY3Q9WyckbG9jYWxlJ107ZnVuY3Rpb24gbnVtYmVyRmlsdGVyKCRsb2NhbGUpe3ZhciBmb3JtYXRzPSRsb2NhbGUuTlVNQkVSX0ZPUk1BVFM7cmV0dXJuIGZ1bmN0aW9uKG51bWJlcixmcmFjdGlvblNpemUpe3JldHVybiBmb3JtYXROdW1iZXIobnVtYmVyLGZvcm1hdHMuUEFUVEVSTlNbMF0sZm9ybWF0cy5HUk9VUF9TRVAsZm9ybWF0cy5ERUNJTUFMX1NFUCxmcmFjdGlvblNpemUpO307fQp2YXIgREVDSU1BTF9TRVA9Jy4nO2Z1bmN0aW9uIGZvcm1hdE51bWJlcihudW1iZXIscGF0dGVybixncm91cFNlcCxkZWNpbWFsU2VwLGZyYWN0aW9uU2l6ZSl7aWYobnVtYmVyPT1udWxsfHwhaXNGaW5pdGUobnVtYmVyKXx8aXNPYmplY3QobnVtYmVyKSlyZXR1cm4nJzt2YXIgaXNOZWdhdGl2ZT1udW1iZXI8MDtudW1iZXI9TWF0aC5hYnMobnVtYmVyKTt2YXIgbnVtU3RyPW51bWJlcisnJyxmb3JtYXRlZFRleHQ9JycscGFydHM9W107dmFyIGhhc0V4cG9uZW50PWZhbHNlO2lmKG51bVN0ci5pbmRleE9mKCdlJykhPT0tMSl7dmFyIG1hdGNoPW51bVN0ci5tYXRjaCgvKFtcZFwuXSspZSgtPykoXGQrKS8pO2lmKG1hdGNoJiZtYXRjaFsyXT09Jy0nJiZtYXRjaFszXT5mcmFjdGlvblNpemUrMSl7bnVtU3RyPScwJztudW1iZXI9MDt9ZWxzZXtmb3JtYXRlZFRleHQ9bnVtU3RyO2hhc0V4cG9uZW50PXRydWU7fX0KaWYoIWhhc0V4cG9uZW50KXt2YXIgZnJhY3Rpb25MZW49KG51bVN0ci5zcGxpdChERUNJTUFMX1NFUClbMV18fCcnKS5sZW5ndGg7aWYoaXNVbmRlZmluZWQoZnJhY3Rpb25TaXplKSl7ZnJhY3Rpb25TaXplPU1hdGgubWluKE1hdGgubWF4KHBhdHRlcm4ubWluRnJhYyxmcmFjdGlvbkxlbikscGF0dGVybi5tYXhGcmFjKTt9Cm51bWJlcj0rKE1hdGgucm91bmQoKyhudW1iZXIudG9TdHJpbmcoKSsnZScrZnJhY3Rpb25TaXplKSkudG9TdHJpbmcoKSsnZScrLWZyYWN0aW9uU2l6ZSk7dmFyIGZyYWN0aW9uPSgnJytudW1iZXIpLnNwbGl0KERFQ0lNQUxfU0VQKTt2YXIgd2hvbGU9ZnJhY3Rpb25bMF07ZnJhY3Rpb249ZnJhY3Rpb25bMV18fCcnO3ZhciBpLHBvcz0wLGxncm91cD1wYXR0ZXJuLmxnU2l6ZSxncm91cD1wYXR0ZXJuLmdTaXplO2lmKHdob2xlLmxlbmd0aD49KGxncm91cCtncm91cCkpe3Bvcz13aG9sZS5sZW5ndGgtbGdyb3VwO2ZvcihpPTA7aTxwb3M7aSsrKXtpZigocG9zLWkpJWdyb3VwPT09MCYmaSE9PTApe2Zvcm1hdGVkVGV4dCs9Z3JvdXBTZXA7fQpmb3JtYXRlZFRleHQrPXdob2xlLmNoYXJBdChpKTt9fQpmb3IoaT1wb3M7aTx3aG9sZS5sZW5ndGg7aSsrKXtpZigod2hvbGUubGVuZ3RoLWkpJWxncm91cD09PTAmJmkhPT0wKXtmb3JtYXRlZFRleHQrPWdyb3VwU2VwO30KZm9ybWF0ZWRUZXh0Kz13aG9sZS5jaGFyQXQoaSk7fQp3aGlsZShmcmFjdGlvbi5sZW5ndGg8ZnJhY3Rpb25TaXplKXtmcmFjdGlvbis9JzAnO30KaWYoZnJhY3Rpb25TaXplJiZmcmFjdGlvblNpemUhPT0iMCIpZm9ybWF0ZWRUZXh0Kz1kZWNpbWFsU2VwK2ZyYWN0aW9uLnN1YnN0cigwLGZyYWN0aW9uU2l6ZSk7fWVsc2V7aWYoZnJhY3Rpb25TaXplPjAmJm51bWJlcj4tMSYmbnVtYmVyPDEpe2Zvcm1hdGVkVGV4dD1udW1iZXIudG9GaXhlZChmcmFjdGlvblNpemUpO319CnBhcnRzLnB1c2goaXNOZWdhdGl2ZT9wYXR0ZXJuLm5lZ1ByZTpwYXR0ZXJuLnBvc1ByZSk7cGFydHMucHVzaChmb3JtYXRlZFRleHQpO3BhcnRzLnB1c2goaXNOZWdhdGl2ZT9wYXR0ZXJuLm5lZ1N1ZjpwYXR0ZXJuLnBvc1N1Zik7cmV0dXJuIHBhcnRzLmpvaW4oJycpO30KZnVuY3Rpb24gcGFkTnVtYmVyKG51bSxkaWdpdHMsdHJpbSl7dmFyIG5lZz0nJztpZihudW08MCl7bmVnPSctJztudW09LW51bTt9Cm51bT0nJytudW07d2hpbGUobnVtLmxlbmd0aDxkaWdpdHMpbnVtPScwJytudW07aWYodHJpbSkKbnVtPW51bS5zdWJzdHIobnVtLmxlbmd0aC1kaWdpdHMpO3JldHVybiBuZWcrbnVtO30KZnVuY3Rpb24gZGF0ZUdldHRlcihuYW1lLHNpemUsb2Zmc2V0LHRyaW0pe29mZnNldD1vZmZzZXR8fDA7cmV0dXJuIGZ1bmN0aW9uKGRhdGUpe3ZhciB2YWx1ZT1kYXRlWydnZXQnK25hbWVdKCk7aWYob2Zmc2V0PjB8fHZhbHVlPi1vZmZzZXQpCnZhbHVlKz1vZmZzZXQ7aWYodmFsdWU9PT0wJiZvZmZzZXQ9PS0xMil2YWx1ZT0xMjtyZXR1cm4gcGFkTnVtYmVyKHZhbHVlLHNpemUsdHJpbSk7fTt9CmZ1bmN0aW9uIGRhdGVTdHJHZXR0ZXIobmFtZSxzaG9ydEZvcm0pe3JldHVybiBmdW5jdGlvbihkYXRlLGZvcm1hdHMpe3ZhciB2YWx1ZT1kYXRlWydnZXQnK25hbWVdKCk7dmFyIGdldD11cHBlcmNhc2Uoc2hvcnRGb3JtPygnU0hPUlQnK25hbWUpOm5hbWUpO3JldHVybiBmb3JtYXRzW2dldF1bdmFsdWVdO307fQpmdW5jdGlvbiB0aW1lWm9uZUdldHRlcihkYXRlKXt2YXIgem9uZT0tMSpkYXRlLmdldFRpbWV6b25lT2Zmc2V0KCk7dmFyIHBhZGRlZFpvbmU9KHpvbmU+PTApPyIrIjoiIjtwYWRkZWRab25lKz1wYWROdW1iZXIoTWF0aFt6b25lPjA/J2Zsb29yJzonY2VpbCddKHpvbmUvNjApLDIpKwpwYWROdW1iZXIoTWF0aC5hYnMoem9uZSU2MCksMik7cmV0dXJuIHBhZGRlZFpvbmU7fQpmdW5jdGlvbiBhbXBtR2V0dGVyKGRhdGUsZm9ybWF0cyl7cmV0dXJuIGRhdGUuZ2V0SG91cnMoKTwxMj9mb3JtYXRzLkFNUE1TWzBdOmZvcm1hdHMuQU1QTVNbMV07fQp2YXIgREFURV9GT1JNQVRTPXt5eXl5OmRhdGVHZXR0ZXIoJ0Z1bGxZZWFyJyw0KSx5eTpkYXRlR2V0dGVyKCdGdWxsWWVhcicsMiwwLHRydWUpLHk6ZGF0ZUdldHRlcignRnVsbFllYXInLDEpLE1NTU06ZGF0ZVN0ckdldHRlcignTW9udGgnKSxNTU06ZGF0ZVN0ckdldHRlcignTW9udGgnLHRydWUpLE1NOmRhdGVHZXR0ZXIoJ01vbnRoJywyLDEpLE06ZGF0ZUdldHRlcignTW9udGgnLDEsMSksZGQ6ZGF0ZUdldHRlcignRGF0ZScsMiksZDpkYXRlR2V0dGVyKCdEYXRlJywxKSxISDpkYXRlR2V0dGVyKCdIb3VycycsMiksSDpkYXRlR2V0dGVyKCdIb3VycycsMSksaGg6ZGF0ZUdldHRlcignSG91cnMnLDIsLTEyKSxoOmRhdGVHZXR0ZXIoJ0hvdXJzJywxLC0xMiksbW06ZGF0ZUdldHRlcignTWludXRlcycsMiksbTpkYXRlR2V0dGVyKCdNaW51dGVzJywxKSxzczpkYXRlR2V0dGVyKCdTZWNvbmRzJywyKSxzOmRhdGVHZXR0ZXIoJ1NlY29uZHMnLDEpLHNzczpkYXRlR2V0dGVyKCdNaWxsaXNlY29uZHMnLDMpLEVFRUU6ZGF0ZVN0ckdldHRlcignRGF5JyksRUVFOmRhdGVTdHJHZXR0ZXIoJ0RheScsdHJ1ZSksYTphbXBtR2V0dGVyLFo6dGltZVpvbmVHZXR0ZXJ9O3ZhciBEQVRFX0ZPUk1BVFNfU1BMSVQ9LygoPzpbXnlNZEhobXNhWkUnXSspfCg/OicoPzpbXiddfCcnKSonKXwoPzpFK3x5K3xNK3xkK3xIK3xoK3xtK3xzK3xhfFopKSguKikvLE5VTUJFUl9TVFJJTkc9L15cLT9cZCskLztkYXRlRmlsdGVyLiRpbmplY3Q9WyckbG9jYWxlJ107ZnVuY3Rpb24gZGF0ZUZpbHRlcigkbG9jYWxlKXt2YXIgUl9JU084NjAxX1NUUj0vXihcZHs0fSktPyhcZFxkKS0/KFxkXGQpKD86VChcZFxkKSg/Ojo/KFxkXGQpKD86Oj8oXGRcZCkoPzpcLihcZCspKT8pPyk/KFp8KFsrLV0pKFxkXGQpOj8oXGRcZCkpPyk/JC87ZnVuY3Rpb24ganNvblN0cmluZ1RvRGF0ZShzdHJpbmcpe3ZhciBtYXRjaDtpZihtYXRjaD1zdHJpbmcubWF0Y2goUl9JU084NjAxX1NUUikpe3ZhciBkYXRlPW5ldyBEYXRlKDApLHR6SG91cj0wLHR6TWluPTAsZGF0ZVNldHRlcj1tYXRjaFs4XT9kYXRlLnNldFVUQ0Z1bGxZZWFyOmRhdGUuc2V0RnVsbFllYXIsdGltZVNldHRlcj1tYXRjaFs4XT9kYXRlLnNldFVUQ0hvdXJzOmRhdGUuc2V0SG91cnM7aWYobWF0Y2hbOV0pe3R6SG91cj1pbnQobWF0Y2hbOV0rbWF0Y2hbMTBdKTt0ek1pbj1pbnQobWF0Y2hbOV0rbWF0Y2hbMTFdKTt9CmRhdGVTZXR0ZXIuY2FsbChkYXRlLGludChtYXRjaFsxXSksaW50KG1hdGNoWzJdKS0xLGludChtYXRjaFszXSkpO3ZhciBoPWludChtYXRjaFs0XXx8MCktdHpIb3VyO3ZhciBtPWludChtYXRjaFs1XXx8MCktdHpNaW47dmFyIHM9aW50KG1hdGNoWzZdfHwwKTt2YXIgbXM9TWF0aC5yb3VuZChwYXJzZUZsb2F0KCcwLicrKG1hdGNoWzddfHwwKSkqMTAwMCk7dGltZVNldHRlci5jYWxsKGRhdGUsaCxtLHMsbXMpO3JldHVybiBkYXRlO30KcmV0dXJuIHN0cmluZzt9CnJldHVybiBmdW5jdGlvbihkYXRlLGZvcm1hdCl7dmFyIHRleHQ9JycscGFydHM9W10sZm4sbWF0Y2g7Zm9ybWF0PWZvcm1hdHx8J21lZGl1bURhdGUnO2Zvcm1hdD0kbG9jYWxlLkRBVEVUSU1FX0ZPUk1BVFNbZm9ybWF0XXx8Zm9ybWF0O2lmKGlzU3RyaW5nKGRhdGUpKXtpZihOVU1CRVJfU1RSSU5HLnRlc3QoZGF0ZSkpe2RhdGU9aW50KGRhdGUpO31lbHNle2RhdGU9anNvblN0cmluZ1RvRGF0ZShkYXRlKTt9fQppZihpc051bWJlcihkYXRlKSl7ZGF0ZT1uZXcgRGF0ZShkYXRlKTt9CmlmKCFpc0RhdGUoZGF0ZSkpe3JldHVybiBkYXRlO30Kd2hpbGUoZm9ybWF0KXttYXRjaD1EQVRFX0ZPUk1BVFNfU1BMSVQuZXhlYyhmb3JtYXQpO2lmKG1hdGNoKXtwYXJ0cz1jb25jYXQocGFydHMsbWF0Y2gsMSk7Zm9ybWF0PXBhcnRzLnBvcCgpO31lbHNle3BhcnRzLnB1c2goZm9ybWF0KTtmb3JtYXQ9bnVsbDt9fQpmb3JFYWNoKHBhcnRzLGZ1bmN0aW9uKHZhbHVlKXtmbj1EQVRFX0ZPUk1BVFNbdmFsdWVdO3RleHQrPWZuP2ZuKGRhdGUsJGxvY2FsZS5EQVRFVElNRV9GT1JNQVRTKTp2YWx1ZS5yZXBsYWNlKC8oXid8JyQpL2csJycpLnJlcGxhY2UoLycnL2csIiciKTt9KTtyZXR1cm4gdGV4dDt9O30KZnVuY3Rpb24ganNvbkZpbHRlcigpe3JldHVybiBmdW5jdGlvbihvYmplY3Qpe3JldHVybiB0b0pzb24ob2JqZWN0LHRydWUpO307fQp2YXIgbG93ZXJjYXNlRmlsdGVyPXZhbHVlRm4obG93ZXJjYXNlKTt2YXIgdXBwZXJjYXNlRmlsdGVyPXZhbHVlRm4odXBwZXJjYXNlKTtmdW5jdGlvbiBsaW1pdFRvRmlsdGVyKCl7cmV0dXJuIGZ1bmN0aW9uKGlucHV0LGxpbWl0KXtpZighaXNBcnJheShpbnB1dCkmJiFpc1N0cmluZyhpbnB1dCkpcmV0dXJuIGlucHV0O2lmKE1hdGguYWJzKE51bWJlcihsaW1pdCkpPT09SW5maW5pdHkpe2xpbWl0PU51bWJlcihsaW1pdCk7fWVsc2V7bGltaXQ9aW50KGxpbWl0KTt9CmlmKGlzU3RyaW5nKGlucHV0KSl7aWYobGltaXQpe3JldHVybiBsaW1pdD49MD9pbnB1dC5zbGljZSgwLGxpbWl0KTppbnB1dC5zbGljZShsaW1pdCxpbnB1dC5sZW5ndGgpO31lbHNle3JldHVybiIiO319CnZhciBvdXQ9W10saSxuO2lmKGxpbWl0PmlucHV0Lmxlbmd0aCkKbGltaXQ9aW5wdXQubGVuZ3RoO2Vsc2UgaWYobGltaXQ8LWlucHV0Lmxlbmd0aCkKbGltaXQ9LWlucHV0Lmxlbmd0aDtpZihsaW1pdD4wKXtpPTA7bj1saW1pdDt9ZWxzZXtpPWlucHV0Lmxlbmd0aCtsaW1pdDtuPWlucHV0Lmxlbmd0aDt9CmZvcig7aTxuO2krKyl7b3V0LnB1c2goaW5wdXRbaV0pO30KcmV0dXJuIG91dDt9O30Kb3JkZXJCeUZpbHRlci4kaW5qZWN0PVsnJHBhcnNlJ107ZnVuY3Rpb24gb3JkZXJCeUZpbHRlcigkcGFyc2Upe3JldHVybiBmdW5jdGlvbihhcnJheSxzb3J0UHJlZGljYXRlLHJldmVyc2VPcmRlcil7aWYoIWlzQXJyYXkoYXJyYXkpKXJldHVybiBhcnJheTtpZighc29ydFByZWRpY2F0ZSlyZXR1cm4gYXJyYXk7c29ydFByZWRpY2F0ZT1pc0FycmF5KHNvcnRQcmVkaWNhdGUpP3NvcnRQcmVkaWNhdGU6W3NvcnRQcmVkaWNhdGVdO3NvcnRQcmVkaWNhdGU9bWFwKHNvcnRQcmVkaWNhdGUsZnVuY3Rpb24ocHJlZGljYXRlKXt2YXIgZGVzY2VuZGluZz1mYWxzZSxnZXQ9cHJlZGljYXRlfHxpZGVudGl0eTtpZihpc1N0cmluZyhwcmVkaWNhdGUpKXtpZigocHJlZGljYXRlLmNoYXJBdCgwKT09JysnfHxwcmVkaWNhdGUuY2hhckF0KDApPT0nLScpKXtkZXNjZW5kaW5nPXByZWRpY2F0ZS5jaGFyQXQoMCk9PSctJztwcmVkaWNhdGU9cHJlZGljYXRlLnN1YnN0cmluZygxKTt9CmdldD0kcGFyc2UocHJlZGljYXRlKTtpZihnZXQuY29uc3RhbnQpe3ZhciBrZXk9Z2V0KCk7cmV0dXJuIHJldmVyc2VDb21wYXJhdG9yKGZ1bmN0aW9uKGEsYil7cmV0dXJuIGNvbXBhcmUoYVtrZXldLGJba2V5XSk7fSxkZXNjZW5kaW5nKTt9fQpyZXR1cm4gcmV2ZXJzZUNvbXBhcmF0b3IoZnVuY3Rpb24oYSxiKXtyZXR1cm4gY29tcGFyZShnZXQoYSksZ2V0KGIpKTt9LGRlc2NlbmRpbmcpO30pO3ZhciBhcnJheUNvcHk9W107Zm9yKHZhciBpPTA7aTxhcnJheS5sZW5ndGg7aSsrKXthcnJheUNvcHkucHVzaChhcnJheVtpXSk7fQpyZXR1cm4gYXJyYXlDb3B5LnNvcnQocmV2ZXJzZUNvbXBhcmF0b3IoY29tcGFyYXRvcixyZXZlcnNlT3JkZXIpKTtmdW5jdGlvbiBjb21wYXJhdG9yKG8xLG8yKXtmb3IodmFyIGk9MDtpPHNvcnRQcmVkaWNhdGUubGVuZ3RoO2krKyl7dmFyIGNvbXA9c29ydFByZWRpY2F0ZVtpXShvMSxvMik7aWYoY29tcCE9PTApcmV0dXJuIGNvbXA7fQpyZXR1cm4gMDt9CmZ1bmN0aW9uIHJldmVyc2VDb21wYXJhdG9yKGNvbXAsZGVzY2VuZGluZyl7cmV0dXJuIHRvQm9vbGVhbihkZXNjZW5kaW5nKT9mdW5jdGlvbihhLGIpe3JldHVybiBjb21wKGIsYSk7fTpjb21wO30KZnVuY3Rpb24gY29tcGFyZSh2MSx2Mil7dmFyIHQxPXR5cGVvZiB2MTt2YXIgdDI9dHlwZW9mIHYyO2lmKHQxPT10Mil7aWYodDE9PSJzdHJpbmciKXt2MT12MS50b0xvd2VyQ2FzZSgpO3YyPXYyLnRvTG93ZXJDYXNlKCk7fQppZih2MT09PXYyKXJldHVybiAwO3JldHVybiB2MTx2Mj8tMToxO31lbHNle3JldHVybiB0MTx0Mj8tMToxO319fTt9CmZ1bmN0aW9uIG5nRGlyZWN0aXZlKGRpcmVjdGl2ZSl7aWYoaXNGdW5jdGlvbihkaXJlY3RpdmUpKXtkaXJlY3RpdmU9e2xpbms6ZGlyZWN0aXZlfTt9CmRpcmVjdGl2ZS5yZXN0cmljdD1kaXJlY3RpdmUucmVzdHJpY3R8fCdBQyc7cmV0dXJuIHZhbHVlRm4oZGlyZWN0aXZlKTt9CnZhciBodG1sQW5jaG9yRGlyZWN0aXZlPXZhbHVlRm4oe3Jlc3RyaWN0OidFJyxjb21waWxlOmZ1bmN0aW9uKGVsZW1lbnQsYXR0cil7aWYobXNpZTw9OCl7aWYoIWF0dHIuaHJlZiYmIWF0dHIubmFtZSl7YXR0ci4kc2V0KCdocmVmJywnJyk7fQplbGVtZW50LmFwcGVuZChkb2N1bWVudC5jcmVhdGVDb21tZW50KCdJRSBmaXgnKSk7fQppZighYXR0ci5ocmVmJiYhYXR0ci54bGlua0hyZWYmJiFhdHRyLm5hbWUpe3JldHVybiBmdW5jdGlvbihzY29wZSxlbGVtZW50KXt2YXIgaHJlZj10b1N0cmluZy5jYWxsKGVsZW1lbnQucHJvcCgnaHJlZicpKT09PSdbb2JqZWN0IFNWR0FuaW1hdGVkU3RyaW5nXSc/J3hsaW5rOmhyZWYnOidocmVmJztlbGVtZW50Lm9uKCdjbGljaycsZnVuY3Rpb24oZXZlbnQpe2lmKCFlbGVtZW50LmF0dHIoaHJlZikpe2V2ZW50LnByZXZlbnREZWZhdWx0KCk7fX0pO307fX19KTt2YXIgbmdBdHRyaWJ1dGVBbGlhc0RpcmVjdGl2ZXM9e307Zm9yRWFjaChCT09MRUFOX0FUVFIsZnVuY3Rpb24ocHJvcE5hbWUsYXR0ck5hbWUpe2lmKHByb3BOYW1lPT0ibXVsdGlwbGUiKXJldHVybjt2YXIgbm9ybWFsaXplZD1kaXJlY3RpdmVOb3JtYWxpemUoJ25nLScrYXR0ck5hbWUpO25nQXR0cmlidXRlQWxpYXNEaXJlY3RpdmVzW25vcm1hbGl6ZWRdPWZ1bmN0aW9uKCl7cmV0dXJue3ByaW9yaXR5OjEwMCxsaW5rOmZ1bmN0aW9uKHNjb3BlLGVsZW1lbnQsYXR0cil7c2NvcGUuJHdhdGNoKGF0dHJbbm9ybWFsaXplZF0sZnVuY3Rpb24gbmdCb29sZWFuQXR0cldhdGNoQWN0aW9uKHZhbHVlKXthdHRyLiRzZXQoYXR0ck5hbWUsISF2YWx1ZSk7fSk7fX07fTt9KTtmb3JFYWNoKFsnc3JjJywnc3Jjc2V0JywnaHJlZiddLGZ1bmN0aW9uKGF0dHJOYW1lKXt2YXIgbm9ybWFsaXplZD1kaXJlY3RpdmVOb3JtYWxpemUoJ25nLScrYXR0ck5hbWUpO25nQXR0cmlidXRlQWxpYXNEaXJlY3RpdmVzW25vcm1hbGl6ZWRdPWZ1bmN0aW9uKCl7cmV0dXJue3ByaW9yaXR5Ojk5LGxpbms6ZnVuY3Rpb24oc2NvcGUsZWxlbWVudCxhdHRyKXt2YXIgcHJvcE5hbWU9YXR0ck5hbWUsbmFtZT1hdHRyTmFtZTtpZihhdHRyTmFtZT09PSdocmVmJyYmdG9TdHJpbmcuY2FsbChlbGVtZW50LnByb3AoJ2hyZWYnKSk9PT0nW29iamVjdCBTVkdBbmltYXRlZFN0cmluZ10nKXtuYW1lPSd4bGlua0hyZWYnO2F0dHIuJGF0dHJbbmFtZV09J3hsaW5rOmhyZWYnO3Byb3BOYW1lPW51bGw7fQphdHRyLiRvYnNlcnZlKG5vcm1hbGl6ZWQsZnVuY3Rpb24odmFsdWUpe2lmKCF2YWx1ZSkKcmV0dXJuO2F0dHIuJHNldChuYW1lLHZhbHVlKTtpZihtc2llJiZwcm9wTmFtZSllbGVtZW50LnByb3AocHJvcE5hbWUsYXR0cltuYW1lXSk7fSk7fX07fTt9KTt2YXIgbnVsbEZvcm1DdHJsPXskYWRkQ29udHJvbDpub29wLCRyZW1vdmVDb250cm9sOm5vb3AsJHNldFZhbGlkaXR5Om5vb3AsJHNldERpcnR5Om5vb3AsJHNldFByaXN0aW5lOm5vb3B9O0Zvcm1Db250cm9sbGVyLiRpbmplY3Q9WyckZWxlbWVudCcsJyRhdHRycycsJyRzY29wZScsJyRhbmltYXRlJ107ZnVuY3Rpb24gRm9ybUNvbnRyb2xsZXIoZWxlbWVudCxhdHRycywkc2NvcGUsJGFuaW1hdGUpe3ZhciBmb3JtPXRoaXMscGFyZW50Rm9ybT1lbGVtZW50LnBhcmVudCgpLmNvbnRyb2xsZXIoJ2Zvcm0nKXx8bnVsbEZvcm1DdHJsLGludmFsaWRDb3VudD0wLGVycm9ycz1mb3JtLiRlcnJvcj17fSxjb250cm9scz1bXTtmb3JtLiRuYW1lPWF0dHJzLm5hbWV8fGF0dHJzLm5nRm9ybTtmb3JtLiRkaXJ0eT1mYWxzZTtmb3JtLiRwcmlzdGluZT10cnVlO2Zvcm0uJHZhbGlkPXRydWU7Zm9ybS4kaW52YWxpZD1mYWxzZTtwYXJlbnRGb3JtLiRhZGRDb250cm9sKGZvcm0pO2VsZW1lbnQuYWRkQ2xhc3MoUFJJU1RJTkVfQ0xBU1MpO3RvZ2dsZVZhbGlkQ3NzKHRydWUpO2Z1bmN0aW9uIHRvZ2dsZVZhbGlkQ3NzKGlzVmFsaWQsdmFsaWRhdGlvbkVycm9yS2V5KXt2YWxpZGF0aW9uRXJyb3JLZXk9dmFsaWRhdGlvbkVycm9yS2V5PyctJytzbmFrZV9jYXNlKHZhbGlkYXRpb25FcnJvcktleSwnLScpOicnOyRhbmltYXRlLnJlbW92ZUNsYXNzKGVsZW1lbnQsKGlzVmFsaWQ/SU5WQUxJRF9DTEFTUzpWQUxJRF9DTEFTUykrdmFsaWRhdGlvbkVycm9yS2V5KTskYW5pbWF0ZS5hZGRDbGFzcyhlbGVtZW50LChpc1ZhbGlkP1ZBTElEX0NMQVNTOklOVkFMSURfQ0xBU1MpK3ZhbGlkYXRpb25FcnJvcktleSk7fQpmb3JtLiRhZGRDb250cm9sPWZ1bmN0aW9uKGNvbnRyb2wpe2Fzc2VydE5vdEhhc093blByb3BlcnR5KGNvbnRyb2wuJG5hbWUsJ2lucHV0Jyk7Y29udHJvbHMucHVzaChjb250cm9sKTtpZihjb250cm9sLiRuYW1lKXtmb3JtW2NvbnRyb2wuJG5hbWVdPWNvbnRyb2w7fX07Zm9ybS4kcmVtb3ZlQ29udHJvbD1mdW5jdGlvbihjb250cm9sKXtpZihjb250cm9sLiRuYW1lJiZmb3JtW2NvbnRyb2wuJG5hbWVdPT09Y29udHJvbCl7ZGVsZXRlIGZvcm1bY29udHJvbC4kbmFtZV07fQpmb3JFYWNoKGVycm9ycyxmdW5jdGlvbihxdWV1ZSx2YWxpZGF0aW9uVG9rZW4pe2Zvcm0uJHNldFZhbGlkaXR5KHZhbGlkYXRpb25Ub2tlbix0cnVlLGNvbnRyb2wpO30pO2FycmF5UmVtb3ZlKGNvbnRyb2xzLGNvbnRyb2wpO307Zm9ybS4kc2V0VmFsaWRpdHk9ZnVuY3Rpb24odmFsaWRhdGlvblRva2VuLGlzVmFsaWQsY29udHJvbCl7dmFyIHF1ZXVlPWVycm9yc1t2YWxpZGF0aW9uVG9rZW5dO2lmKGlzVmFsaWQpe2lmKHF1ZXVlKXthcnJheVJlbW92ZShxdWV1ZSxjb250cm9sKTtpZighcXVldWUubGVuZ3RoKXtpbnZhbGlkQ291bnQtLTtpZighaW52YWxpZENvdW50KXt0b2dnbGVWYWxpZENzcyhpc1ZhbGlkKTtmb3JtLiR2YWxpZD10cnVlO2Zvcm0uJGludmFsaWQ9ZmFsc2U7fQplcnJvcnNbdmFsaWRhdGlvblRva2VuXT1mYWxzZTt0b2dnbGVWYWxpZENzcyh0cnVlLHZhbGlkYXRpb25Ub2tlbik7cGFyZW50Rm9ybS4kc2V0VmFsaWRpdHkodmFsaWRhdGlvblRva2VuLHRydWUsZm9ybSk7fX19ZWxzZXtpZighaW52YWxpZENvdW50KXt0b2dnbGVWYWxpZENzcyhpc1ZhbGlkKTt9CmlmKHF1ZXVlKXtpZihpbmNsdWRlcyhxdWV1ZSxjb250cm9sKSlyZXR1cm47fWVsc2V7ZXJyb3JzW3ZhbGlkYXRpb25Ub2tlbl09cXVldWU9W107aW52YWxpZENvdW50Kys7dG9nZ2xlVmFsaWRDc3MoZmFsc2UsdmFsaWRhdGlvblRva2VuKTtwYXJlbnRGb3JtLiRzZXRWYWxpZGl0eSh2YWxpZGF0aW9uVG9rZW4sZmFsc2UsZm9ybSk7fQpxdWV1ZS5wdXNoKGNvbnRyb2wpO2Zvcm0uJHZhbGlkPWZhbHNlO2Zvcm0uJGludmFsaWQ9dHJ1ZTt9fTtmb3JtLiRzZXREaXJ0eT1mdW5jdGlvbigpeyRhbmltYXRlLnJlbW92ZUNsYXNzKGVsZW1lbnQsUFJJU1RJTkVfQ0xBU1MpOyRhbmltYXRlLmFkZENsYXNzKGVsZW1lbnQsRElSVFlfQ0xBU1MpO2Zvcm0uJGRpcnR5PXRydWU7Zm9ybS4kcHJpc3RpbmU9ZmFsc2U7cGFyZW50Rm9ybS4kc2V0RGlydHkoKTt9O2Zvcm0uJHNldFByaXN0aW5lPWZ1bmN0aW9uKCl7JGFuaW1hdGUucmVtb3ZlQ2xhc3MoZWxlbWVudCxESVJUWV9DTEFTUyk7JGFuaW1hdGUuYWRkQ2xhc3MoZWxlbWVudCxQUklTVElORV9DTEFTUyk7Zm9ybS4kZGlydHk9ZmFsc2U7Zm9ybS4kcHJpc3RpbmU9dHJ1ZTtmb3JFYWNoKGNvbnRyb2xzLGZ1bmN0aW9uKGNvbnRyb2wpe2NvbnRyb2wuJHNldFByaXN0aW5lKCk7fSk7fTt9CnZhciBmb3JtRGlyZWN0aXZlRmFjdG9yeT1mdW5jdGlvbihpc05nRm9ybSl7cmV0dXJuWyckdGltZW91dCcsZnVuY3Rpb24oJHRpbWVvdXQpe3ZhciBmb3JtRGlyZWN0aXZlPXtuYW1lOidmb3JtJyxyZXN0cmljdDppc05nRm9ybT8nRUFDJzonRScsY29udHJvbGxlcjpGb3JtQ29udHJvbGxlcixjb21waWxlOmZ1bmN0aW9uKCl7cmV0dXJue3ByZTpmdW5jdGlvbihzY29wZSxmb3JtRWxlbWVudCxhdHRyLGNvbnRyb2xsZXIpe2lmKCFhdHRyLmFjdGlvbil7dmFyIHByZXZlbnREZWZhdWx0TGlzdGVuZXI9ZnVuY3Rpb24oZXZlbnQpe2V2ZW50LnByZXZlbnREZWZhdWx0P2V2ZW50LnByZXZlbnREZWZhdWx0KCk6ZXZlbnQucmV0dXJuVmFsdWU9ZmFsc2U7fTthZGRFdmVudExpc3RlbmVyRm4oZm9ybUVsZW1lbnRbMF0sJ3N1Ym1pdCcscHJldmVudERlZmF1bHRMaXN0ZW5lcik7Zm9ybUVsZW1lbnQub24oJyRkZXN0cm95JyxmdW5jdGlvbigpeyR0aW1lb3V0KGZ1bmN0aW9uKCl7cmVtb3ZlRXZlbnRMaXN0ZW5lckZuKGZvcm1FbGVtZW50WzBdLCdzdWJtaXQnLHByZXZlbnREZWZhdWx0TGlzdGVuZXIpO30sMCxmYWxzZSk7fSk7fQp2YXIgcGFyZW50Rm9ybUN0cmw9Zm9ybUVsZW1lbnQucGFyZW50KCkuY29udHJvbGxlcignZm9ybScpLGFsaWFzPWF0dHIubmFtZXx8YXR0ci5uZ0Zvcm07aWYoYWxpYXMpe3NldHRlcihzY29wZSxhbGlhcyxjb250cm9sbGVyLGFsaWFzKTt9CmlmKHBhcmVudEZvcm1DdHJsKXtmb3JtRWxlbWVudC5vbignJGRlc3Ryb3knLGZ1bmN0aW9uKCl7cGFyZW50Rm9ybUN0cmwuJHJlbW92ZUNvbnRyb2woY29udHJvbGxlcik7aWYoYWxpYXMpe3NldHRlcihzY29wZSxhbGlhcyx1bmRlZmluZWQsYWxpYXMpO30KZXh0ZW5kKGNvbnRyb2xsZXIsbnVsbEZvcm1DdHJsKTt9KTt9fX07fX07cmV0dXJuIGZvcm1EaXJlY3RpdmU7fV07fTt2YXIgZm9ybURpcmVjdGl2ZT1mb3JtRGlyZWN0aXZlRmFjdG9yeSgpO3ZhciBuZ0Zvcm1EaXJlY3RpdmU9Zm9ybURpcmVjdGl2ZUZhY3RvcnkodHJ1ZSk7dmFyIFVSTF9SRUdFWFA9L14oZnRwfGh0dHB8aHR0cHMpOlwvXC8oXHcrOnswLDF9XHcqQCk/KFxTKykoOlswLTldKyk/KFwvfFwvKFtcdyMhOi4/Kz0mJUAhXC1cL10pKT8kLzt2YXIgRU1BSUxfUkVHRVhQPS9eW2EtejAtOSEjJCUmJyorXC89P15fYHt8fX4uLV0rQFthLXowLTktXSsoXC5bYS16MC05LV0rKSokL2k7dmFyIE5VTUJFUl9SRUdFWFA9L15ccyooXC18XCspPyhcZCt8KFxkKihcLlxkKikpKVxzKiQvO3ZhciBpbnB1dFR5cGU9eyd0ZXh0Jzp0ZXh0SW5wdXRUeXBlLCdudW1iZXInOm51bWJlcklucHV0VHlwZSwndXJsJzp1cmxJbnB1dFR5cGUsJ2VtYWlsJzplbWFpbElucHV0VHlwZSwncmFkaW8nOnJhZGlvSW5wdXRUeXBlLCdjaGVja2JveCc6Y2hlY2tib3hJbnB1dFR5cGUsJ2hpZGRlbic6bm9vcCwnYnV0dG9uJzpub29wLCdzdWJtaXQnOm5vb3AsJ3Jlc2V0Jzpub29wLCdmaWxlJzpub29wfTtmdW5jdGlvbiB2YWxpZGF0ZShjdHJsLHZhbGlkYXRvck5hbWUsdmFsaWRpdHksdmFsdWUpe2N0cmwuJHNldFZhbGlkaXR5KHZhbGlkYXRvck5hbWUsdmFsaWRpdHkpO3JldHVybiB2YWxpZGl0eT92YWx1ZTp1bmRlZmluZWQ7fQpmdW5jdGlvbiB0ZXN0RmxhZ3ModmFsaWRpdHksZmxhZ3Mpe3ZhciBpLGZsYWc7aWYoZmxhZ3Mpe2ZvcihpPTA7aTxmbGFncy5sZW5ndGg7KytpKXtmbGFnPWZsYWdzW2ldO2lmKHZhbGlkaXR5W2ZsYWddKXtyZXR1cm4gdHJ1ZTt9fX0KcmV0dXJuIGZhbHNlO30KZnVuY3Rpb24gYWRkTmF0aXZlSHRtbDVWYWxpZGF0b3JzKGN0cmwsdmFsaWRhdG9yTmFtZSxiYWRGbGFncyxpZ25vcmVGbGFncyx2YWxpZGl0eSl7aWYoaXNPYmplY3QodmFsaWRpdHkpKXtjdHJsLiQkaGFzTmF0aXZlVmFsaWRhdG9ycz10cnVlO3ZhciB2YWxpZGF0b3I9ZnVuY3Rpb24odmFsdWUpe2lmKCFjdHJsLiRlcnJvclt2YWxpZGF0b3JOYW1lXSYmIXRlc3RGbGFncyh2YWxpZGl0eSxpZ25vcmVGbGFncykmJnRlc3RGbGFncyh2YWxpZGl0eSxiYWRGbGFncykpe2N0cmwuJHNldFZhbGlkaXR5KHZhbGlkYXRvck5hbWUsZmFsc2UpO3JldHVybjt9CnJldHVybiB2YWx1ZTt9O2N0cmwuJHBhcnNlcnMucHVzaCh2YWxpZGF0b3IpO319CmZ1bmN0aW9uIHRleHRJbnB1dFR5cGUoc2NvcGUsZWxlbWVudCxhdHRyLGN0cmwsJHNuaWZmZXIsJGJyb3dzZXIpe3ZhciB2YWxpZGl0eT1lbGVtZW50LnByb3AoVkFMSURJVFlfU1RBVEVfUFJPUEVSVFkpO3ZhciBwbGFjZWhvbGRlcj1lbGVtZW50WzBdLnBsYWNlaG9sZGVyLG5vZXZlbnQ9e307Y3RybC4kJHZhbGlkaXR5U3RhdGU9dmFsaWRpdHk7aWYoISRzbmlmZmVyLmFuZHJvaWQpe3ZhciBjb21wb3Npbmc9ZmFsc2U7ZWxlbWVudC5vbignY29tcG9zaXRpb25zdGFydCcsZnVuY3Rpb24oZGF0YSl7Y29tcG9zaW5nPXRydWU7fSk7ZWxlbWVudC5vbignY29tcG9zaXRpb25lbmQnLGZ1bmN0aW9uKCl7Y29tcG9zaW5nPWZhbHNlO2xpc3RlbmVyKCk7fSk7fQp2YXIgbGlzdGVuZXI9ZnVuY3Rpb24oZXYpe2lmKGNvbXBvc2luZylyZXR1cm47dmFyIHZhbHVlPWVsZW1lbnQudmFsKCk7aWYobXNpZSYmKGV2fHxub2V2ZW50KS50eXBlPT09J2lucHV0JyYmZWxlbWVudFswXS5wbGFjZWhvbGRlciE9PXBsYWNlaG9sZGVyKXtwbGFjZWhvbGRlcj1lbGVtZW50WzBdLnBsYWNlaG9sZGVyO3JldHVybjt9CmlmKHRvQm9vbGVhbihhdHRyLm5nVHJpbXx8J1QnKSl7dmFsdWU9dHJpbSh2YWx1ZSk7fQp2YXIgcmV2YWxpZGF0ZT12YWxpZGl0eSYmY3RybC4kJGhhc05hdGl2ZVZhbGlkYXRvcnM7aWYoY3RybC4kdmlld1ZhbHVlIT09dmFsdWV8fCh2YWx1ZT09PScnJiZyZXZhbGlkYXRlKSl7aWYoc2NvcGUuJCRwaGFzZSl7Y3RybC4kc2V0Vmlld1ZhbHVlKHZhbHVlKTt9ZWxzZXtzY29wZS4kYXBwbHkoZnVuY3Rpb24oKXtjdHJsLiRzZXRWaWV3VmFsdWUodmFsdWUpO30pO319fTtpZigkc25pZmZlci5oYXNFdmVudCgnaW5wdXQnKSl7ZWxlbWVudC5vbignaW5wdXQnLGxpc3RlbmVyKTt9ZWxzZXt2YXIgdGltZW91dDt2YXIgZGVmZXJMaXN0ZW5lcj1mdW5jdGlvbigpe2lmKCF0aW1lb3V0KXt0aW1lb3V0PSRicm93c2VyLmRlZmVyKGZ1bmN0aW9uKCl7bGlzdGVuZXIoKTt0aW1lb3V0PW51bGw7fSk7fX07ZWxlbWVudC5vbigna2V5ZG93bicsZnVuY3Rpb24oZXZlbnQpe3ZhciBrZXk9ZXZlbnQua2V5Q29kZTtpZihrZXk9PT05MXx8KDE1PGtleSYma2V5PDE5KXx8KDM3PD1rZXkmJmtleTw9NDApKXJldHVybjtkZWZlckxpc3RlbmVyKCk7fSk7aWYoJHNuaWZmZXIuaGFzRXZlbnQoJ3Bhc3RlJykpe2VsZW1lbnQub24oJ3Bhc3RlIGN1dCcsZGVmZXJMaXN0ZW5lcik7fX0KZWxlbWVudC5vbignY2hhbmdlJyxsaXN0ZW5lcik7Y3RybC4kcmVuZGVyPWZ1bmN0aW9uKCl7ZWxlbWVudC52YWwoY3RybC4kaXNFbXB0eShjdHJsLiR2aWV3VmFsdWUpPycnOmN0cmwuJHZpZXdWYWx1ZSk7fTt2YXIgcGF0dGVybj1hdHRyLm5nUGF0dGVybixwYXR0ZXJuVmFsaWRhdG9yLG1hdGNoO2lmKHBhdHRlcm4pe3ZhciB2YWxpZGF0ZVJlZ2V4PWZ1bmN0aW9uKHJlZ2V4cCx2YWx1ZSl7cmV0dXJuIHZhbGlkYXRlKGN0cmwsJ3BhdHRlcm4nLGN0cmwuJGlzRW1wdHkodmFsdWUpfHxyZWdleHAudGVzdCh2YWx1ZSksdmFsdWUpO307bWF0Y2g9cGF0dGVybi5tYXRjaCgvXlwvKC4qKVwvKFtnaW1dKikkLyk7aWYobWF0Y2gpe3BhdHRlcm49bmV3IFJlZ0V4cChtYXRjaFsxXSxtYXRjaFsyXSk7cGF0dGVyblZhbGlkYXRvcj1mdW5jdGlvbih2YWx1ZSl7cmV0dXJuIHZhbGlkYXRlUmVnZXgocGF0dGVybix2YWx1ZSk7fTt9ZWxzZXtwYXR0ZXJuVmFsaWRhdG9yPWZ1bmN0aW9uKHZhbHVlKXt2YXIgcGF0dGVybk9iaj1zY29wZS4kZXZhbChwYXR0ZXJuKTtpZighcGF0dGVybk9ianx8IXBhdHRlcm5PYmoudGVzdCl7dGhyb3cgbWluRXJyKCduZ1BhdHRlcm4nKSgnbm9yZWdleHAnLCdFeHBlY3RlZCB7MH0gdG8gYmUgYSBSZWdFeHAgYnV0IHdhcyB7MX0uIEVsZW1lbnQ6IHsyfScscGF0dGVybixwYXR0ZXJuT2JqLHN0YXJ0aW5nVGFnKGVsZW1lbnQpKTt9CnJldHVybiB2YWxpZGF0ZVJlZ2V4KHBhdHRlcm5PYmosdmFsdWUpO307fQpjdHJsLiRmb3JtYXR0ZXJzLnB1c2gocGF0dGVyblZhbGlkYXRvcik7Y3RybC4kcGFyc2Vycy5wdXNoKHBhdHRlcm5WYWxpZGF0b3IpO30KaWYoYXR0ci5uZ01pbmxlbmd0aCl7dmFyIG1pbmxlbmd0aD1pbnQoYXR0ci5uZ01pbmxlbmd0aCk7dmFyIG1pbkxlbmd0aFZhbGlkYXRvcj1mdW5jdGlvbih2YWx1ZSl7cmV0dXJuIHZhbGlkYXRlKGN0cmwsJ21pbmxlbmd0aCcsY3RybC4kaXNFbXB0eSh2YWx1ZSl8fHZhbHVlLmxlbmd0aD49bWlubGVuZ3RoLHZhbHVlKTt9O2N0cmwuJHBhcnNlcnMucHVzaChtaW5MZW5ndGhWYWxpZGF0b3IpO2N0cmwuJGZvcm1hdHRlcnMucHVzaChtaW5MZW5ndGhWYWxpZGF0b3IpO30KaWYoYXR0ci5uZ01heGxlbmd0aCl7dmFyIG1heGxlbmd0aD1pbnQoYXR0ci5uZ01heGxlbmd0aCk7dmFyIG1heExlbmd0aFZhbGlkYXRvcj1mdW5jdGlvbih2YWx1ZSl7cmV0dXJuIHZhbGlkYXRlKGN0cmwsJ21heGxlbmd0aCcsY3RybC4kaXNFbXB0eSh2YWx1ZSl8fHZhbHVlLmxlbmd0aDw9bWF4bGVuZ3RoLHZhbHVlKTt9O2N0cmwuJHBhcnNlcnMucHVzaChtYXhMZW5ndGhWYWxpZGF0b3IpO2N0cmwuJGZvcm1hdHRlcnMucHVzaChtYXhMZW5ndGhWYWxpZGF0b3IpO319CnZhciBudW1iZXJCYWRGbGFncz1bJ2JhZElucHV0J107ZnVuY3Rpb24gbnVtYmVySW5wdXRUeXBlKHNjb3BlLGVsZW1lbnQsYXR0cixjdHJsLCRzbmlmZmVyLCRicm93c2VyKXt0ZXh0SW5wdXRUeXBlKHNjb3BlLGVsZW1lbnQsYXR0cixjdHJsLCRzbmlmZmVyLCRicm93c2VyKTtjdHJsLiRwYXJzZXJzLnB1c2goZnVuY3Rpb24odmFsdWUpe3ZhciBlbXB0eT1jdHJsLiRpc0VtcHR5KHZhbHVlKTtpZihlbXB0eXx8TlVNQkVSX1JFR0VYUC50ZXN0KHZhbHVlKSl7Y3RybC4kc2V0VmFsaWRpdHkoJ251bWJlcicsdHJ1ZSk7cmV0dXJuIHZhbHVlPT09Jyc/bnVsbDooZW1wdHk/dmFsdWU6cGFyc2VGbG9hdCh2YWx1ZSkpO31lbHNle2N0cmwuJHNldFZhbGlkaXR5KCdudW1iZXInLGZhbHNlKTtyZXR1cm4gdW5kZWZpbmVkO319KTthZGROYXRpdmVIdG1sNVZhbGlkYXRvcnMoY3RybCwnbnVtYmVyJyxudW1iZXJCYWRGbGFncyxudWxsLGN0cmwuJCR2YWxpZGl0eVN0YXRlKTtjdHJsLiRmb3JtYXR0ZXJzLnB1c2goZnVuY3Rpb24odmFsdWUpe3JldHVybiBjdHJsLiRpc0VtcHR5KHZhbHVlKT8nJzonJyt2YWx1ZTt9KTtpZihhdHRyLm1pbil7dmFyIG1pblZhbGlkYXRvcj1mdW5jdGlvbih2YWx1ZSl7dmFyIG1pbj1wYXJzZUZsb2F0KGF0dHIubWluKTtyZXR1cm4gdmFsaWRhdGUoY3RybCwnbWluJyxjdHJsLiRpc0VtcHR5KHZhbHVlKXx8dmFsdWU+PW1pbix2YWx1ZSk7fTtjdHJsLiRwYXJzZXJzLnB1c2gobWluVmFsaWRhdG9yKTtjdHJsLiRmb3JtYXR0ZXJzLnB1c2gobWluVmFsaWRhdG9yKTt9CmlmKGF0dHIubWF4KXt2YXIgbWF4VmFsaWRhdG9yPWZ1bmN0aW9uKHZhbHVlKXt2YXIgbWF4PXBhcnNlRmxvYXQoYXR0ci5tYXgpO3JldHVybiB2YWxpZGF0ZShjdHJsLCdtYXgnLGN0cmwuJGlzRW1wdHkodmFsdWUpfHx2YWx1ZTw9bWF4LHZhbHVlKTt9O2N0cmwuJHBhcnNlcnMucHVzaChtYXhWYWxpZGF0b3IpO2N0cmwuJGZvcm1hdHRlcnMucHVzaChtYXhWYWxpZGF0b3IpO30KY3RybC4kZm9ybWF0dGVycy5wdXNoKGZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4gdmFsaWRhdGUoY3RybCwnbnVtYmVyJyxjdHJsLiRpc0VtcHR5KHZhbHVlKXx8aXNOdW1iZXIodmFsdWUpLHZhbHVlKTt9KTt9CmZ1bmN0aW9uIHVybElucHV0VHlwZShzY29wZSxlbGVtZW50LGF0dHIsY3RybCwkc25pZmZlciwkYnJvd3Nlcil7dGV4dElucHV0VHlwZShzY29wZSxlbGVtZW50LGF0dHIsY3RybCwkc25pZmZlciwkYnJvd3Nlcik7dmFyIHVybFZhbGlkYXRvcj1mdW5jdGlvbih2YWx1ZSl7cmV0dXJuIHZhbGlkYXRlKGN0cmwsJ3VybCcsY3RybC4kaXNFbXB0eSh2YWx1ZSl8fFVSTF9SRUdFWFAudGVzdCh2YWx1ZSksdmFsdWUpO307Y3RybC4kZm9ybWF0dGVycy5wdXNoKHVybFZhbGlkYXRvcik7Y3RybC4kcGFyc2Vycy5wdXNoKHVybFZhbGlkYXRvcik7fQpmdW5jdGlvbiBlbWFpbElucHV0VHlwZShzY29wZSxlbGVtZW50LGF0dHIsY3RybCwkc25pZmZlciwkYnJvd3Nlcil7dGV4dElucHV0VHlwZShzY29wZSxlbGVtZW50LGF0dHIsY3RybCwkc25pZmZlciwkYnJvd3Nlcik7dmFyIGVtYWlsVmFsaWRhdG9yPWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4gdmFsaWRhdGUoY3RybCwnZW1haWwnLGN0cmwuJGlzRW1wdHkodmFsdWUpfHxFTUFJTF9SRUdFWFAudGVzdCh2YWx1ZSksdmFsdWUpO307Y3RybC4kZm9ybWF0dGVycy5wdXNoKGVtYWlsVmFsaWRhdG9yKTtjdHJsLiRwYXJzZXJzLnB1c2goZW1haWxWYWxpZGF0b3IpO30KZnVuY3Rpb24gcmFkaW9JbnB1dFR5cGUoc2NvcGUsZWxlbWVudCxhdHRyLGN0cmwpe2lmKGlzVW5kZWZpbmVkKGF0dHIubmFtZSkpe2VsZW1lbnQuYXR0cignbmFtZScsbmV4dFVpZCgpKTt9CmVsZW1lbnQub24oJ2NsaWNrJyxmdW5jdGlvbigpe2lmKGVsZW1lbnRbMF0uY2hlY2tlZCl7c2NvcGUuJGFwcGx5KGZ1bmN0aW9uKCl7Y3RybC4kc2V0Vmlld1ZhbHVlKGF0dHIudmFsdWUpO30pO319KTtjdHJsLiRyZW5kZXI9ZnVuY3Rpb24oKXt2YXIgdmFsdWU9YXR0ci52YWx1ZTtlbGVtZW50WzBdLmNoZWNrZWQ9KHZhbHVlPT1jdHJsLiR2aWV3VmFsdWUpO307YXR0ci4kb2JzZXJ2ZSgndmFsdWUnLGN0cmwuJHJlbmRlcik7fQpmdW5jdGlvbiBjaGVja2JveElucHV0VHlwZShzY29wZSxlbGVtZW50LGF0dHIsY3RybCl7dmFyIHRydWVWYWx1ZT1hdHRyLm5nVHJ1ZVZhbHVlLGZhbHNlVmFsdWU9YXR0ci5uZ0ZhbHNlVmFsdWU7aWYoIWlzU3RyaW5nKHRydWVWYWx1ZSkpdHJ1ZVZhbHVlPXRydWU7aWYoIWlzU3RyaW5nKGZhbHNlVmFsdWUpKWZhbHNlVmFsdWU9ZmFsc2U7ZWxlbWVudC5vbignY2xpY2snLGZ1bmN0aW9uKCl7c2NvcGUuJGFwcGx5KGZ1bmN0aW9uKCl7Y3RybC4kc2V0Vmlld1ZhbHVlKGVsZW1lbnRbMF0uY2hlY2tlZCk7fSk7fSk7Y3RybC4kcmVuZGVyPWZ1bmN0aW9uKCl7ZWxlbWVudFswXS5jaGVja2VkPWN0cmwuJHZpZXdWYWx1ZTt9O2N0cmwuJGlzRW1wdHk9ZnVuY3Rpb24odmFsdWUpe3JldHVybiB2YWx1ZSE9PXRydWVWYWx1ZTt9O2N0cmwuJGZvcm1hdHRlcnMucHVzaChmdW5jdGlvbih2YWx1ZSl7cmV0dXJuIHZhbHVlPT09dHJ1ZVZhbHVlO30pO2N0cmwuJHBhcnNlcnMucHVzaChmdW5jdGlvbih2YWx1ZSl7cmV0dXJuIHZhbHVlP3RydWVWYWx1ZTpmYWxzZVZhbHVlO30pO30KdmFyIGlucHV0RGlyZWN0aXZlPVsnJGJyb3dzZXInLCckc25pZmZlcicsZnVuY3Rpb24oJGJyb3dzZXIsJHNuaWZmZXIpe3JldHVybntyZXN0cmljdDonRScscmVxdWlyZTonP25nTW9kZWwnLGxpbms6ZnVuY3Rpb24oc2NvcGUsZWxlbWVudCxhdHRyLGN0cmwpe2lmKGN0cmwpeyhpbnB1dFR5cGVbbG93ZXJjYXNlKGF0dHIudHlwZSldfHxpbnB1dFR5cGUudGV4dCkoc2NvcGUsZWxlbWVudCxhdHRyLGN0cmwsJHNuaWZmZXIsJGJyb3dzZXIpO319fTt9XTt2YXIgVkFMSURfQ0xBU1M9J25nLXZhbGlkJyxJTlZBTElEX0NMQVNTPSduZy1pbnZhbGlkJyxQUklTVElORV9DTEFTUz0nbmctcHJpc3RpbmUnLERJUlRZX0NMQVNTPSduZy1kaXJ0eSc7dmFyIE5nTW9kZWxDb250cm9sbGVyPVsnJHNjb3BlJywnJGV4Y2VwdGlvbkhhbmRsZXInLCckYXR0cnMnLCckZWxlbWVudCcsJyRwYXJzZScsJyRhbmltYXRlJyxmdW5jdGlvbigkc2NvcGUsJGV4Y2VwdGlvbkhhbmRsZXIsJGF0dHIsJGVsZW1lbnQsJHBhcnNlLCRhbmltYXRlKXt0aGlzLiR2aWV3VmFsdWU9TnVtYmVyLk5hTjt0aGlzLiRtb2RlbFZhbHVlPU51bWJlci5OYU47dGhpcy4kcGFyc2Vycz1bXTt0aGlzLiRmb3JtYXR0ZXJzPVtdO3RoaXMuJHZpZXdDaGFuZ2VMaXN0ZW5lcnM9W107dGhpcy4kcHJpc3RpbmU9dHJ1ZTt0aGlzLiRkaXJ0eT1mYWxzZTt0aGlzLiR2YWxpZD10cnVlO3RoaXMuJGludmFsaWQ9ZmFsc2U7dGhpcy4kbmFtZT0kYXR0ci5uYW1lO3ZhciBuZ01vZGVsR2V0PSRwYXJzZSgkYXR0ci5uZ01vZGVsKSxuZ01vZGVsU2V0PW5nTW9kZWxHZXQuYXNzaWduO2lmKCFuZ01vZGVsU2V0KXt0aHJvdyBtaW5FcnIoJ25nTW9kZWwnKSgnbm9uYXNzaWduJywiRXhwcmVzc2lvbiAnezB9JyBpcyBub24tYXNzaWduYWJsZS4gRWxlbWVudDogezF9IiwkYXR0ci5uZ01vZGVsLHN0YXJ0aW5nVGFnKCRlbGVtZW50KSk7fQp0aGlzLiRyZW5kZXI9bm9vcDt0aGlzLiRpc0VtcHR5PWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4gaXNVbmRlZmluZWQodmFsdWUpfHx2YWx1ZT09PScnfHx2YWx1ZT09PW51bGx8fHZhbHVlIT09dmFsdWU7fTt2YXIgcGFyZW50Rm9ybT0kZWxlbWVudC5pbmhlcml0ZWREYXRhKCckZm9ybUNvbnRyb2xsZXInKXx8bnVsbEZvcm1DdHJsLGludmFsaWRDb3VudD0wLCRlcnJvcj10aGlzLiRlcnJvcj17fTskZWxlbWVudC5hZGRDbGFzcyhQUklTVElORV9DTEFTUyk7dG9nZ2xlVmFsaWRDc3ModHJ1ZSk7ZnVuY3Rpb24gdG9nZ2xlVmFsaWRDc3MoaXNWYWxpZCx2YWxpZGF0aW9uRXJyb3JLZXkpe3ZhbGlkYXRpb25FcnJvcktleT12YWxpZGF0aW9uRXJyb3JLZXk/Jy0nK3NuYWtlX2Nhc2UodmFsaWRhdGlvbkVycm9yS2V5LCctJyk6Jyc7JGFuaW1hdGUucmVtb3ZlQ2xhc3MoJGVsZW1lbnQsKGlzVmFsaWQ/SU5WQUxJRF9DTEFTUzpWQUxJRF9DTEFTUykrdmFsaWRhdGlvbkVycm9yS2V5KTskYW5pbWF0ZS5hZGRDbGFzcygkZWxlbWVudCwoaXNWYWxpZD9WQUxJRF9DTEFTUzpJTlZBTElEX0NMQVNTKSt2YWxpZGF0aW9uRXJyb3JLZXkpO30KdGhpcy4kc2V0VmFsaWRpdHk9ZnVuY3Rpb24odmFsaWRhdGlvbkVycm9yS2V5LGlzVmFsaWQpe2lmKCRlcnJvclt2YWxpZGF0aW9uRXJyb3JLZXldPT09IWlzVmFsaWQpcmV0dXJuO2lmKGlzVmFsaWQpe2lmKCRlcnJvclt2YWxpZGF0aW9uRXJyb3JLZXldKWludmFsaWRDb3VudC0tO2lmKCFpbnZhbGlkQ291bnQpe3RvZ2dsZVZhbGlkQ3NzKHRydWUpO3RoaXMuJHZhbGlkPXRydWU7dGhpcy4kaW52YWxpZD1mYWxzZTt9fWVsc2V7dG9nZ2xlVmFsaWRDc3MoZmFsc2UpO3RoaXMuJGludmFsaWQ9dHJ1ZTt0aGlzLiR2YWxpZD1mYWxzZTtpbnZhbGlkQ291bnQrKzt9CiRlcnJvclt2YWxpZGF0aW9uRXJyb3JLZXldPSFpc1ZhbGlkO3RvZ2dsZVZhbGlkQ3NzKGlzVmFsaWQsdmFsaWRhdGlvbkVycm9yS2V5KTtwYXJlbnRGb3JtLiRzZXRWYWxpZGl0eSh2YWxpZGF0aW9uRXJyb3JLZXksaXNWYWxpZCx0aGlzKTt9O3RoaXMuJHNldFByaXN0aW5lPWZ1bmN0aW9uKCl7dGhpcy4kZGlydHk9ZmFsc2U7dGhpcy4kcHJpc3RpbmU9dHJ1ZTskYW5pbWF0ZS5yZW1vdmVDbGFzcygkZWxlbWVudCxESVJUWV9DTEFTUyk7JGFuaW1hdGUuYWRkQ2xhc3MoJGVsZW1lbnQsUFJJU1RJTkVfQ0xBU1MpO307dGhpcy4kc2V0Vmlld1ZhbHVlPWZ1bmN0aW9uKHZhbHVlKXt0aGlzLiR2aWV3VmFsdWU9dmFsdWU7aWYodGhpcy4kcHJpc3RpbmUpe3RoaXMuJGRpcnR5PXRydWU7dGhpcy4kcHJpc3RpbmU9ZmFsc2U7JGFuaW1hdGUucmVtb3ZlQ2xhc3MoJGVsZW1lbnQsUFJJU1RJTkVfQ0xBU1MpOyRhbmltYXRlLmFkZENsYXNzKCRlbGVtZW50LERJUlRZX0NMQVNTKTtwYXJlbnRGb3JtLiRzZXREaXJ0eSgpO30KZm9yRWFjaCh0aGlzLiRwYXJzZXJzLGZ1bmN0aW9uKGZuKXt2YWx1ZT1mbih2YWx1ZSk7fSk7aWYodGhpcy4kbW9kZWxWYWx1ZSE9PXZhbHVlKXt0aGlzLiRtb2RlbFZhbHVlPXZhbHVlO25nTW9kZWxTZXQoJHNjb3BlLHZhbHVlKTtmb3JFYWNoKHRoaXMuJHZpZXdDaGFuZ2VMaXN0ZW5lcnMsZnVuY3Rpb24obGlzdGVuZXIpe3RyeXtsaXN0ZW5lcigpO31jYXRjaChlKXskZXhjZXB0aW9uSGFuZGxlcihlKTt9fSk7fX07dmFyIGN0cmw9dGhpczskc2NvcGUuJHdhdGNoKGZ1bmN0aW9uIG5nTW9kZWxXYXRjaCgpe3ZhciB2YWx1ZT1uZ01vZGVsR2V0KCRzY29wZSk7aWYoY3RybC4kbW9kZWxWYWx1ZSE9PXZhbHVlKXt2YXIgZm9ybWF0dGVycz1jdHJsLiRmb3JtYXR0ZXJzLGlkeD1mb3JtYXR0ZXJzLmxlbmd0aDtjdHJsLiRtb2RlbFZhbHVlPXZhbHVlO3doaWxlKGlkeC0tKXt2YWx1ZT1mb3JtYXR0ZXJzW2lkeF0odmFsdWUpO30KaWYoY3RybC4kdmlld1ZhbHVlIT09dmFsdWUpe2N0cmwuJHZpZXdWYWx1ZT12YWx1ZTtjdHJsLiRyZW5kZXIoKTt9fQpyZXR1cm4gdmFsdWU7fSk7fV07dmFyIG5nTW9kZWxEaXJlY3RpdmU9ZnVuY3Rpb24oKXtyZXR1cm57cmVxdWlyZTpbJ25nTW9kZWwnLCdeP2Zvcm0nXSxjb250cm9sbGVyOk5nTW9kZWxDb250cm9sbGVyLGxpbms6ZnVuY3Rpb24oc2NvcGUsZWxlbWVudCxhdHRyLGN0cmxzKXt2YXIgbW9kZWxDdHJsPWN0cmxzWzBdLGZvcm1DdHJsPWN0cmxzWzFdfHxudWxsRm9ybUN0cmw7Zm9ybUN0cmwuJGFkZENvbnRyb2wobW9kZWxDdHJsKTtzY29wZS4kb24oJyRkZXN0cm95JyxmdW5jdGlvbigpe2Zvcm1DdHJsLiRyZW1vdmVDb250cm9sKG1vZGVsQ3RybCk7fSk7fX07fTt2YXIgbmdDaGFuZ2VEaXJlY3RpdmU9dmFsdWVGbih7cmVxdWlyZTonbmdNb2RlbCcsbGluazpmdW5jdGlvbihzY29wZSxlbGVtZW50LGF0dHIsY3RybCl7Y3RybC4kdmlld0NoYW5nZUxpc3RlbmVycy5wdXNoKGZ1bmN0aW9uKCl7c2NvcGUuJGV2YWwoYXR0ci5uZ0NoYW5nZSk7fSk7fX0pO3ZhciByZXF1aXJlZERpcmVjdGl2ZT1mdW5jdGlvbigpe3JldHVybntyZXF1aXJlOic/bmdNb2RlbCcsbGluazpmdW5jdGlvbihzY29wZSxlbG0sYXR0cixjdHJsKXtpZighY3RybClyZXR1cm47YXR0ci5yZXF1aXJlZD10cnVlO3ZhciB2YWxpZGF0b3I9ZnVuY3Rpb24odmFsdWUpe2lmKGF0dHIucmVxdWlyZWQmJmN0cmwuJGlzRW1wdHkodmFsdWUpKXtjdHJsLiRzZXRWYWxpZGl0eSgncmVxdWlyZWQnLGZhbHNlKTtyZXR1cm47fWVsc2V7Y3RybC4kc2V0VmFsaWRpdHkoJ3JlcXVpcmVkJyx0cnVlKTtyZXR1cm4gdmFsdWU7fX07Y3RybC4kZm9ybWF0dGVycy5wdXNoKHZhbGlkYXRvcik7Y3RybC4kcGFyc2Vycy51bnNoaWZ0KHZhbGlkYXRvcik7YXR0ci4kb2JzZXJ2ZSgncmVxdWlyZWQnLGZ1bmN0aW9uKCl7dmFsaWRhdG9yKGN0cmwuJHZpZXdWYWx1ZSk7fSk7fX07fTt2YXIgbmdMaXN0RGlyZWN0aXZlPWZ1bmN0aW9uKCl7cmV0dXJue3JlcXVpcmU6J25nTW9kZWwnLGxpbms6ZnVuY3Rpb24oc2NvcGUsZWxlbWVudCxhdHRyLGN0cmwpe3ZhciBtYXRjaD0vXC8oLiopXC8vLmV4ZWMoYXR0ci5uZ0xpc3QpLHNlcGFyYXRvcj1tYXRjaCYmbmV3IFJlZ0V4cChtYXRjaFsxXSl8fGF0dHIubmdMaXN0fHwnLCc7dmFyIHBhcnNlPWZ1bmN0aW9uKHZpZXdWYWx1ZSl7aWYoaXNVbmRlZmluZWQodmlld1ZhbHVlKSlyZXR1cm47dmFyIGxpc3Q9W107aWYodmlld1ZhbHVlKXtmb3JFYWNoKHZpZXdWYWx1ZS5zcGxpdChzZXBhcmF0b3IpLGZ1bmN0aW9uKHZhbHVlKXtpZih2YWx1ZSlsaXN0LnB1c2godHJpbSh2YWx1ZSkpO30pO30KcmV0dXJuIGxpc3Q7fTtjdHJsLiRwYXJzZXJzLnB1c2gocGFyc2UpO2N0cmwuJGZvcm1hdHRlcnMucHVzaChmdW5jdGlvbih2YWx1ZSl7aWYoaXNBcnJheSh2YWx1ZSkpe3JldHVybiB2YWx1ZS5qb2luKCcsICcpO30KcmV0dXJuIHVuZGVmaW5lZDt9KTtjdHJsLiRpc0VtcHR5PWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4hdmFsdWV8fCF2YWx1ZS5sZW5ndGg7fTt9fTt9O3ZhciBDT05TVEFOVF9WQUxVRV9SRUdFWFA9L14odHJ1ZXxmYWxzZXxcZCspJC87dmFyIG5nVmFsdWVEaXJlY3RpdmU9ZnVuY3Rpb24oKXtyZXR1cm57cHJpb3JpdHk6MTAwLGNvbXBpbGU6ZnVuY3Rpb24odHBsLHRwbEF0dHIpe2lmKENPTlNUQU5UX1ZBTFVFX1JFR0VYUC50ZXN0KHRwbEF0dHIubmdWYWx1ZSkpe3JldHVybiBmdW5jdGlvbiBuZ1ZhbHVlQ29uc3RhbnRMaW5rKHNjb3BlLGVsbSxhdHRyKXthdHRyLiRzZXQoJ3ZhbHVlJyxzY29wZS4kZXZhbChhdHRyLm5nVmFsdWUpKTt9O31lbHNle3JldHVybiBmdW5jdGlvbiBuZ1ZhbHVlTGluayhzY29wZSxlbG0sYXR0cil7c2NvcGUuJHdhdGNoKGF0dHIubmdWYWx1ZSxmdW5jdGlvbiB2YWx1ZVdhdGNoQWN0aW9uKHZhbHVlKXthdHRyLiRzZXQoJ3ZhbHVlJyx2YWx1ZSk7fSk7fTt9fX07fTt2YXIgbmdCaW5kRGlyZWN0aXZlPW5nRGlyZWN0aXZlKHtjb21waWxlOmZ1bmN0aW9uKHRlbXBsYXRlRWxlbWVudCl7dGVtcGxhdGVFbGVtZW50LmFkZENsYXNzKCduZy1iaW5kaW5nJyk7cmV0dXJuIGZ1bmN0aW9uKHNjb3BlLGVsZW1lbnQsYXR0cil7ZWxlbWVudC5kYXRhKCckYmluZGluZycsYXR0ci5uZ0JpbmQpO3Njb3BlLiR3YXRjaChhdHRyLm5nQmluZCxmdW5jdGlvbiBuZ0JpbmRXYXRjaEFjdGlvbih2YWx1ZSl7ZWxlbWVudC50ZXh0KHZhbHVlPT11bmRlZmluZWQ/Jyc6dmFsdWUpO30pO307fX0pO3ZhciBuZ0JpbmRUZW1wbGF0ZURpcmVjdGl2ZT1bJyRpbnRlcnBvbGF0ZScsZnVuY3Rpb24oJGludGVycG9sYXRlKXtyZXR1cm4gZnVuY3Rpb24oc2NvcGUsZWxlbWVudCxhdHRyKXt2YXIgaW50ZXJwb2xhdGVGbj0kaW50ZXJwb2xhdGUoZWxlbWVudC5hdHRyKGF0dHIuJGF0dHIubmdCaW5kVGVtcGxhdGUpKTtlbGVtZW50LmFkZENsYXNzKCduZy1iaW5kaW5nJykuZGF0YSgnJGJpbmRpbmcnLGludGVycG9sYXRlRm4pO2F0dHIuJG9ic2VydmUoJ25nQmluZFRlbXBsYXRlJyxmdW5jdGlvbih2YWx1ZSl7ZWxlbWVudC50ZXh0KHZhbHVlKTt9KTt9O31dO3ZhciBuZ0JpbmRIdG1sRGlyZWN0aXZlPVsnJHNjZScsJyRwYXJzZScsZnVuY3Rpb24oJHNjZSwkcGFyc2Upe3JldHVybiBmdW5jdGlvbihzY29wZSxlbGVtZW50LGF0dHIpe2VsZW1lbnQuYWRkQ2xhc3MoJ25nLWJpbmRpbmcnKS5kYXRhKCckYmluZGluZycsYXR0ci5uZ0JpbmRIdG1sKTt2YXIgcGFyc2VkPSRwYXJzZShhdHRyLm5nQmluZEh0bWwpO2Z1bmN0aW9uIGdldFN0cmluZ1ZhbHVlKCl7cmV0dXJuKHBhcnNlZChzY29wZSl8fCcnKS50b1N0cmluZygpO30Kc2NvcGUuJHdhdGNoKGdldFN0cmluZ1ZhbHVlLGZ1bmN0aW9uIG5nQmluZEh0bWxXYXRjaEFjdGlvbih2YWx1ZSl7ZWxlbWVudC5odG1sKCRzY2UuZ2V0VHJ1c3RlZEh0bWwocGFyc2VkKHNjb3BlKSl8fCcnKTt9KTt9O31dO2Z1bmN0aW9uIGNsYXNzRGlyZWN0aXZlKG5hbWUsc2VsZWN0b3Ipe25hbWU9J25nQ2xhc3MnK25hbWU7cmV0dXJuWyckYW5pbWF0ZScsZnVuY3Rpb24oJGFuaW1hdGUpe3JldHVybntyZXN0cmljdDonQUMnLGxpbms6ZnVuY3Rpb24oc2NvcGUsZWxlbWVudCxhdHRyKXt2YXIgb2xkVmFsO3Njb3BlLiR3YXRjaChhdHRyW25hbWVdLG5nQ2xhc3NXYXRjaEFjdGlvbix0cnVlKTthdHRyLiRvYnNlcnZlKCdjbGFzcycsZnVuY3Rpb24odmFsdWUpe25nQ2xhc3NXYXRjaEFjdGlvbihzY29wZS4kZXZhbChhdHRyW25hbWVdKSk7fSk7aWYobmFtZSE9PSduZ0NsYXNzJyl7c2NvcGUuJHdhdGNoKCckaW5kZXgnLGZ1bmN0aW9uKCRpbmRleCxvbGQkaW5kZXgpe3ZhciBtb2Q9JGluZGV4JjE7aWYobW9kIT09KG9sZCRpbmRleCYxKSl7dmFyIGNsYXNzZXM9YXJyYXlDbGFzc2VzKHNjb3BlLiRldmFsKGF0dHJbbmFtZV0pKTttb2Q9PT1zZWxlY3Rvcj9hZGRDbGFzc2VzKGNsYXNzZXMpOnJlbW92ZUNsYXNzZXMoY2xhc3Nlcyk7fX0pO30KZnVuY3Rpb24gYWRkQ2xhc3NlcyhjbGFzc2VzKXt2YXIgbmV3Q2xhc3Nlcz1kaWdlc3RDbGFzc0NvdW50cyhjbGFzc2VzLDEpO2F0dHIuJGFkZENsYXNzKG5ld0NsYXNzZXMpO30KZnVuY3Rpb24gcmVtb3ZlQ2xhc3NlcyhjbGFzc2VzKXt2YXIgbmV3Q2xhc3Nlcz1kaWdlc3RDbGFzc0NvdW50cyhjbGFzc2VzLC0xKTthdHRyLiRyZW1vdmVDbGFzcyhuZXdDbGFzc2VzKTt9CmZ1bmN0aW9uIGRpZ2VzdENsYXNzQ291bnRzKGNsYXNzZXMsY291bnQpe3ZhciBjbGFzc0NvdW50cz1lbGVtZW50LmRhdGEoJyRjbGFzc0NvdW50cycpfHx7fTt2YXIgY2xhc3Nlc1RvVXBkYXRlPVtdO2ZvckVhY2goY2xhc3NlcyxmdW5jdGlvbihjbGFzc05hbWUpe2lmKGNvdW50PjB8fGNsYXNzQ291bnRzW2NsYXNzTmFtZV0pe2NsYXNzQ291bnRzW2NsYXNzTmFtZV09KGNsYXNzQ291bnRzW2NsYXNzTmFtZV18fDApK2NvdW50O2lmKGNsYXNzQ291bnRzW2NsYXNzTmFtZV09PT0rKGNvdW50PjApKXtjbGFzc2VzVG9VcGRhdGUucHVzaChjbGFzc05hbWUpO319fSk7ZWxlbWVudC5kYXRhKCckY2xhc3NDb3VudHMnLGNsYXNzQ291bnRzKTtyZXR1cm4gY2xhc3Nlc1RvVXBkYXRlLmpvaW4oJyAnKTt9CmZ1bmN0aW9uIHVwZGF0ZUNsYXNzZXMob2xkQ2xhc3NlcyxuZXdDbGFzc2VzKXt2YXIgdG9BZGQ9YXJyYXlEaWZmZXJlbmNlKG5ld0NsYXNzZXMsb2xkQ2xhc3Nlcyk7dmFyIHRvUmVtb3ZlPWFycmF5RGlmZmVyZW5jZShvbGRDbGFzc2VzLG5ld0NsYXNzZXMpO3RvUmVtb3ZlPWRpZ2VzdENsYXNzQ291bnRzKHRvUmVtb3ZlLC0xKTt0b0FkZD1kaWdlc3RDbGFzc0NvdW50cyh0b0FkZCwxKTtpZih0b0FkZC5sZW5ndGg9PT0wKXskYW5pbWF0ZS5yZW1vdmVDbGFzcyhlbGVtZW50LHRvUmVtb3ZlKTt9ZWxzZSBpZih0b1JlbW92ZS5sZW5ndGg9PT0wKXskYW5pbWF0ZS5hZGRDbGFzcyhlbGVtZW50LHRvQWRkKTt9ZWxzZXskYW5pbWF0ZS5zZXRDbGFzcyhlbGVtZW50LHRvQWRkLHRvUmVtb3ZlKTt9fQpmdW5jdGlvbiBuZ0NsYXNzV2F0Y2hBY3Rpb24obmV3VmFsKXtpZihzZWxlY3Rvcj09PXRydWV8fHNjb3BlLiRpbmRleCUyPT09c2VsZWN0b3Ipe3ZhciBuZXdDbGFzc2VzPWFycmF5Q2xhc3NlcyhuZXdWYWx8fFtdKTtpZighb2xkVmFsKXthZGRDbGFzc2VzKG5ld0NsYXNzZXMpO31lbHNlIGlmKCFlcXVhbHMobmV3VmFsLG9sZFZhbCkpe3ZhciBvbGRDbGFzc2VzPWFycmF5Q2xhc3NlcyhvbGRWYWwpO3VwZGF0ZUNsYXNzZXMob2xkQ2xhc3NlcyxuZXdDbGFzc2VzKTt9fQpvbGRWYWw9c2hhbGxvd0NvcHkobmV3VmFsKTt9fX07ZnVuY3Rpb24gYXJyYXlEaWZmZXJlbmNlKHRva2VuczEsdG9rZW5zMil7dmFyIHZhbHVlcz1bXTtvdXRlcjpmb3IodmFyIGk9MDtpPHRva2VuczEubGVuZ3RoO2krKyl7dmFyIHRva2VuPXRva2VuczFbaV07Zm9yKHZhciBqPTA7ajx0b2tlbnMyLmxlbmd0aDtqKyspe2lmKHRva2VuPT10b2tlbnMyW2pdKWNvbnRpbnVlIG91dGVyO30KdmFsdWVzLnB1c2godG9rZW4pO30KcmV0dXJuIHZhbHVlczt9CmZ1bmN0aW9uIGFycmF5Q2xhc3NlcyhjbGFzc1ZhbCl7aWYoaXNBcnJheShjbGFzc1ZhbCkpe3JldHVybiBjbGFzc1ZhbDt9ZWxzZSBpZihpc1N0cmluZyhjbGFzc1ZhbCkpe3JldHVybiBjbGFzc1ZhbC5zcGxpdCgnICcpO31lbHNlIGlmKGlzT2JqZWN0KGNsYXNzVmFsKSl7dmFyIGNsYXNzZXM9W10saT0wO2ZvckVhY2goY2xhc3NWYWwsZnVuY3Rpb24odixrKXtpZih2KXtjbGFzc2VzPWNsYXNzZXMuY29uY2F0KGsuc3BsaXQoJyAnKSk7fX0pO3JldHVybiBjbGFzc2VzO30KcmV0dXJuIGNsYXNzVmFsO319XTt9CnZhciBuZ0NsYXNzRGlyZWN0aXZlPWNsYXNzRGlyZWN0aXZlKCcnLHRydWUpO3ZhciBuZ0NsYXNzT2RkRGlyZWN0aXZlPWNsYXNzRGlyZWN0aXZlKCdPZGQnLDApO3ZhciBuZ0NsYXNzRXZlbkRpcmVjdGl2ZT1jbGFzc0RpcmVjdGl2ZSgnRXZlbicsMSk7dmFyIG5nQ2xvYWtEaXJlY3RpdmU9bmdEaXJlY3RpdmUoe2NvbXBpbGU6ZnVuY3Rpb24oZWxlbWVudCxhdHRyKXthdHRyLiRzZXQoJ25nQ2xvYWsnLHVuZGVmaW5lZCk7ZWxlbWVudC5yZW1vdmVDbGFzcygnbmctY2xvYWsnKTt9fSk7dmFyIG5nQ29udHJvbGxlckRpcmVjdGl2ZT1bZnVuY3Rpb24oKXtyZXR1cm57c2NvcGU6dHJ1ZSxjb250cm9sbGVyOidAJyxwcmlvcml0eTo1MDB9O31dO3ZhciBuZ0V2ZW50RGlyZWN0aXZlcz17fTtmb3JFYWNoKCdjbGljayBkYmxjbGljayBtb3VzZWRvd24gbW91c2V1cCBtb3VzZW92ZXIgbW91c2VvdXQgbW91c2Vtb3ZlIG1vdXNlZW50ZXIgbW91c2VsZWF2ZSBrZXlkb3duIGtleXVwIGtleXByZXNzIHN1Ym1pdCBmb2N1cyBibHVyIGNvcHkgY3V0IHBhc3RlJy5zcGxpdCgnICcpLGZ1bmN0aW9uKG5hbWUpe3ZhciBkaXJlY3RpdmVOYW1lPWRpcmVjdGl2ZU5vcm1hbGl6ZSgnbmctJytuYW1lKTtuZ0V2ZW50RGlyZWN0aXZlc1tkaXJlY3RpdmVOYW1lXT1bJyRwYXJzZScsZnVuY3Rpb24oJHBhcnNlKXtyZXR1cm57Y29tcGlsZTpmdW5jdGlvbigkZWxlbWVudCxhdHRyKXt2YXIgZm49JHBhcnNlKGF0dHJbZGlyZWN0aXZlTmFtZV0pO3JldHVybiBmdW5jdGlvbiBuZ0V2ZW50SGFuZGxlcihzY29wZSxlbGVtZW50KXtlbGVtZW50Lm9uKGxvd2VyY2FzZShuYW1lKSxmdW5jdGlvbihldmVudCl7c2NvcGUuJGFwcGx5KGZ1bmN0aW9uKCl7Zm4oc2NvcGUseyRldmVudDpldmVudH0pO30pO30pO307fX07fV07fSk7dmFyIG5nSWZEaXJlY3RpdmU9WyckYW5pbWF0ZScsZnVuY3Rpb24oJGFuaW1hdGUpe3JldHVybnt0cmFuc2NsdWRlOidlbGVtZW50Jyxwcmlvcml0eTo2MDAsdGVybWluYWw6dHJ1ZSxyZXN0cmljdDonQScsJCR0bGI6dHJ1ZSxsaW5rOmZ1bmN0aW9uKCRzY29wZSwkZWxlbWVudCwkYXR0cixjdHJsLCR0cmFuc2NsdWRlKXt2YXIgYmxvY2ssY2hpbGRTY29wZSxwcmV2aW91c0VsZW1lbnRzOyRzY29wZS4kd2F0Y2goJGF0dHIubmdJZixmdW5jdGlvbiBuZ0lmV2F0Y2hBY3Rpb24odmFsdWUpe2lmKHRvQm9vbGVhbih2YWx1ZSkpe2lmKCFjaGlsZFNjb3BlKXtjaGlsZFNjb3BlPSRzY29wZS4kbmV3KCk7JHRyYW5zY2x1ZGUoY2hpbGRTY29wZSxmdW5jdGlvbihjbG9uZSl7Y2xvbmVbY2xvbmUubGVuZ3RoKytdPWRvY3VtZW50LmNyZWF0ZUNvbW1lbnQoJyBlbmQgbmdJZjogJyskYXR0ci5uZ0lmKycgJyk7YmxvY2s9e2Nsb25lOmNsb25lfTskYW5pbWF0ZS5lbnRlcihjbG9uZSwkZWxlbWVudC5wYXJlbnQoKSwkZWxlbWVudCk7fSk7fX1lbHNle2lmKHByZXZpb3VzRWxlbWVudHMpe3ByZXZpb3VzRWxlbWVudHMucmVtb3ZlKCk7cHJldmlvdXNFbGVtZW50cz1udWxsO30KaWYoY2hpbGRTY29wZSl7Y2hpbGRTY29wZS4kZGVzdHJveSgpO2NoaWxkU2NvcGU9bnVsbDt9CmlmKGJsb2NrKXtwcmV2aW91c0VsZW1lbnRzPWdldEJsb2NrRWxlbWVudHMoYmxvY2suY2xvbmUpOyRhbmltYXRlLmxlYXZlKHByZXZpb3VzRWxlbWVudHMsZnVuY3Rpb24oKXtwcmV2aW91c0VsZW1lbnRzPW51bGw7fSk7YmxvY2s9bnVsbDt9fX0pO319O31dO3ZhciBuZ0luY2x1ZGVEaXJlY3RpdmU9WyckaHR0cCcsJyR0ZW1wbGF0ZUNhY2hlJywnJGFuY2hvclNjcm9sbCcsJyRhbmltYXRlJywnJHNjZScsZnVuY3Rpb24oJGh0dHAsJHRlbXBsYXRlQ2FjaGUsJGFuY2hvclNjcm9sbCwkYW5pbWF0ZSwkc2NlKXtyZXR1cm57cmVzdHJpY3Q6J0VDQScscHJpb3JpdHk6NDAwLHRlcm1pbmFsOnRydWUsdHJhbnNjbHVkZTonZWxlbWVudCcsY29udHJvbGxlcjphbmd1bGFyLm5vb3AsY29tcGlsZTpmdW5jdGlvbihlbGVtZW50LGF0dHIpe3ZhciBzcmNFeHA9YXR0ci5uZ0luY2x1ZGV8fGF0dHIuc3JjLG9ubG9hZEV4cD1hdHRyLm9ubG9hZHx8JycsYXV0b1Njcm9sbEV4cD1hdHRyLmF1dG9zY3JvbGw7cmV0dXJuIGZ1bmN0aW9uKHNjb3BlLCRlbGVtZW50LCRhdHRyLGN0cmwsJHRyYW5zY2x1ZGUpe3ZhciBjaGFuZ2VDb3VudGVyPTAsY3VycmVudFNjb3BlLHByZXZpb3VzRWxlbWVudCxjdXJyZW50RWxlbWVudDt2YXIgY2xlYW51cExhc3RJbmNsdWRlQ29udGVudD1mdW5jdGlvbigpe2lmKHByZXZpb3VzRWxlbWVudCl7cHJldmlvdXNFbGVtZW50LnJlbW92ZSgpO3ByZXZpb3VzRWxlbWVudD1udWxsO30KaWYoY3VycmVudFNjb3BlKXtjdXJyZW50U2NvcGUuJGRlc3Ryb3koKTtjdXJyZW50U2NvcGU9bnVsbDt9CmlmKGN1cnJlbnRFbGVtZW50KXskYW5pbWF0ZS5sZWF2ZShjdXJyZW50RWxlbWVudCxmdW5jdGlvbigpe3ByZXZpb3VzRWxlbWVudD1udWxsO30pO3ByZXZpb3VzRWxlbWVudD1jdXJyZW50RWxlbWVudDtjdXJyZW50RWxlbWVudD1udWxsO319O3Njb3BlLiR3YXRjaCgkc2NlLnBhcnNlQXNSZXNvdXJjZVVybChzcmNFeHApLGZ1bmN0aW9uIG5nSW5jbHVkZVdhdGNoQWN0aW9uKHNyYyl7dmFyIGFmdGVyQW5pbWF0aW9uPWZ1bmN0aW9uKCl7aWYoaXNEZWZpbmVkKGF1dG9TY3JvbGxFeHApJiYoIWF1dG9TY3JvbGxFeHB8fHNjb3BlLiRldmFsKGF1dG9TY3JvbGxFeHApKSl7JGFuY2hvclNjcm9sbCgpO319O3ZhciB0aGlzQ2hhbmdlSWQ9KytjaGFuZ2VDb3VudGVyO2lmKHNyYyl7JGh0dHAuZ2V0KHNyYyx7Y2FjaGU6JHRlbXBsYXRlQ2FjaGV9KS5zdWNjZXNzKGZ1bmN0aW9uKHJlc3BvbnNlKXtpZih0aGlzQ2hhbmdlSWQhPT1jaGFuZ2VDb3VudGVyKXJldHVybjt2YXIgbmV3U2NvcGU9c2NvcGUuJG5ldygpO2N0cmwudGVtcGxhdGU9cmVzcG9uc2U7dmFyIGNsb25lPSR0cmFuc2NsdWRlKG5ld1Njb3BlLGZ1bmN0aW9uKGNsb25lKXtjbGVhbnVwTGFzdEluY2x1ZGVDb250ZW50KCk7JGFuaW1hdGUuZW50ZXIoY2xvbmUsbnVsbCwkZWxlbWVudCxhZnRlckFuaW1hdGlvbik7fSk7Y3VycmVudFNjb3BlPW5ld1Njb3BlO2N1cnJlbnRFbGVtZW50PWNsb25lO2N1cnJlbnRTY29wZS4kZW1pdCgnJGluY2x1ZGVDb250ZW50TG9hZGVkJyk7c2NvcGUuJGV2YWwob25sb2FkRXhwKTt9KS5lcnJvcihmdW5jdGlvbigpe2lmKHRoaXNDaGFuZ2VJZD09PWNoYW5nZUNvdW50ZXIpY2xlYW51cExhc3RJbmNsdWRlQ29udGVudCgpO30pO3Njb3BlLiRlbWl0KCckaW5jbHVkZUNvbnRlbnRSZXF1ZXN0ZWQnKTt9ZWxzZXtjbGVhbnVwTGFzdEluY2x1ZGVDb250ZW50KCk7Y3RybC50ZW1wbGF0ZT1udWxsO319KTt9O319O31dO3ZhciBuZ0luY2x1ZGVGaWxsQ29udGVudERpcmVjdGl2ZT1bJyRjb21waWxlJyxmdW5jdGlvbigkY29tcGlsZSl7cmV0dXJue3Jlc3RyaWN0OidFQ0EnLHByaW9yaXR5Oi00MDAscmVxdWlyZTonbmdJbmNsdWRlJyxsaW5rOmZ1bmN0aW9uKHNjb3BlLCRlbGVtZW50LCRhdHRyLGN0cmwpeyRlbGVtZW50Lmh0bWwoY3RybC50ZW1wbGF0ZSk7JGNvbXBpbGUoJGVsZW1lbnQuY29udGVudHMoKSkoc2NvcGUpO319O31dO3ZhciBuZ0luaXREaXJlY3RpdmU9bmdEaXJlY3RpdmUoe3ByaW9yaXR5OjQ1MCxjb21waWxlOmZ1bmN0aW9uKCl7cmV0dXJue3ByZTpmdW5jdGlvbihzY29wZSxlbGVtZW50LGF0dHJzKXtzY29wZS4kZXZhbChhdHRycy5uZ0luaXQpO319O319KTt2YXIgbmdOb25CaW5kYWJsZURpcmVjdGl2ZT1uZ0RpcmVjdGl2ZSh7dGVybWluYWw6dHJ1ZSxwcmlvcml0eToxMDAwfSk7dmFyIG5nUGx1cmFsaXplRGlyZWN0aXZlPVsnJGxvY2FsZScsJyRpbnRlcnBvbGF0ZScsZnVuY3Rpb24oJGxvY2FsZSwkaW50ZXJwb2xhdGUpe3ZhciBCUkFDRT0ve30vZztyZXR1cm57cmVzdHJpY3Q6J0VBJyxsaW5rOmZ1bmN0aW9uKHNjb3BlLGVsZW1lbnQsYXR0cil7dmFyIG51bWJlckV4cD1hdHRyLmNvdW50LHdoZW5FeHA9YXR0ci4kYXR0ci53aGVuJiZlbGVtZW50LmF0dHIoYXR0ci4kYXR0ci53aGVuKSxvZmZzZXQ9YXR0ci5vZmZzZXR8fDAsd2hlbnM9c2NvcGUuJGV2YWwod2hlbkV4cCl8fHt9LHdoZW5zRXhwRm5zPXt9LHN0YXJ0U3ltYm9sPSRpbnRlcnBvbGF0ZS5zdGFydFN5bWJvbCgpLGVuZFN5bWJvbD0kaW50ZXJwb2xhdGUuZW5kU3ltYm9sKCksaXNXaGVuPS9ed2hlbihNaW51cyk/KC4rKSQvO2ZvckVhY2goYXR0cixmdW5jdGlvbihleHByZXNzaW9uLGF0dHJpYnV0ZU5hbWUpe2lmKGlzV2hlbi50ZXN0KGF0dHJpYnV0ZU5hbWUpKXt3aGVuc1tsb3dlcmNhc2UoYXR0cmlidXRlTmFtZS5yZXBsYWNlKCd3aGVuJywnJykucmVwbGFjZSgnTWludXMnLCctJykpXT1lbGVtZW50LmF0dHIoYXR0ci4kYXR0clthdHRyaWJ1dGVOYW1lXSk7fX0pO2ZvckVhY2god2hlbnMsZnVuY3Rpb24oZXhwcmVzc2lvbixrZXkpe3doZW5zRXhwRm5zW2tleV09JGludGVycG9sYXRlKGV4cHJlc3Npb24ucmVwbGFjZShCUkFDRSxzdGFydFN5bWJvbCtudW1iZXJFeHArJy0nKwpvZmZzZXQrZW5kU3ltYm9sKSk7fSk7c2NvcGUuJHdhdGNoKGZ1bmN0aW9uIG5nUGx1cmFsaXplV2F0Y2goKXt2YXIgdmFsdWU9cGFyc2VGbG9hdChzY29wZS4kZXZhbChudW1iZXJFeHApKTtpZighaXNOYU4odmFsdWUpKXtpZighKHZhbHVlIGluIHdoZW5zKSl2YWx1ZT0kbG9jYWxlLnBsdXJhbENhdCh2YWx1ZS1vZmZzZXQpO3JldHVybiB3aGVuc0V4cEZuc1t2YWx1ZV0oc2NvcGUsZWxlbWVudCx0cnVlKTt9ZWxzZXtyZXR1cm4nJzt9fSxmdW5jdGlvbiBuZ1BsdXJhbGl6ZVdhdGNoQWN0aW9uKG5ld1ZhbCl7ZWxlbWVudC50ZXh0KG5ld1ZhbCk7fSk7fX07fV07dmFyIG5nUmVwZWF0RGlyZWN0aXZlPVsnJHBhcnNlJywnJGFuaW1hdGUnLGZ1bmN0aW9uKCRwYXJzZSwkYW5pbWF0ZSl7dmFyIE5HX1JFTU9WRUQ9JyQkTkdfUkVNT1ZFRCc7dmFyIG5nUmVwZWF0TWluRXJyPW1pbkVycignbmdSZXBlYXQnKTtyZXR1cm57dHJhbnNjbHVkZTonZWxlbWVudCcscHJpb3JpdHk6MTAwMCx0ZXJtaW5hbDp0cnVlLCQkdGxiOnRydWUsbGluazpmdW5jdGlvbigkc2NvcGUsJGVsZW1lbnQsJGF0dHIsY3RybCwkdHJhbnNjbHVkZSl7dmFyIGV4cHJlc3Npb249JGF0dHIubmdSZXBlYXQ7dmFyIG1hdGNoPWV4cHJlc3Npb24ubWF0Y2goL15ccyooW1xzXFNdKz8pXHMraW5ccysoW1xzXFNdKz8pKD86XHMrdHJhY2tccytieVxzKyhbXHNcU10rPykpP1xzKiQvKSx0cmFja0J5RXhwLHRyYWNrQnlFeHBHZXR0ZXIsdHJhY2tCeUlkRXhwRm4sdHJhY2tCeUlkQXJyYXlGbix0cmFja0J5SWRPYmpGbixsaHMscmhzLHZhbHVlSWRlbnRpZmllcixrZXlJZGVudGlmaWVyLGhhc2hGbkxvY2Fscz17JGlkOmhhc2hLZXl9O2lmKCFtYXRjaCl7dGhyb3cgbmdSZXBlYXRNaW5FcnIoJ2lleHAnLCJFeHBlY3RlZCBleHByZXNzaW9uIGluIGZvcm0gb2YgJ19pdGVtXyBpbiBfY29sbGVjdGlvbl9bIHRyYWNrIGJ5IF9pZF9dJyBidXQgZ290ICd7MH0nLiIsZXhwcmVzc2lvbik7fQpsaHM9bWF0Y2hbMV07cmhzPW1hdGNoWzJdO3RyYWNrQnlFeHA9bWF0Y2hbM107aWYodHJhY2tCeUV4cCl7dHJhY2tCeUV4cEdldHRlcj0kcGFyc2UodHJhY2tCeUV4cCk7dHJhY2tCeUlkRXhwRm49ZnVuY3Rpb24oa2V5LHZhbHVlLGluZGV4KXtpZihrZXlJZGVudGlmaWVyKWhhc2hGbkxvY2Fsc1trZXlJZGVudGlmaWVyXT1rZXk7aGFzaEZuTG9jYWxzW3ZhbHVlSWRlbnRpZmllcl09dmFsdWU7aGFzaEZuTG9jYWxzLiRpbmRleD1pbmRleDtyZXR1cm4gdHJhY2tCeUV4cEdldHRlcigkc2NvcGUsaGFzaEZuTG9jYWxzKTt9O31lbHNle3RyYWNrQnlJZEFycmF5Rm49ZnVuY3Rpb24oa2V5LHZhbHVlKXtyZXR1cm4gaGFzaEtleSh2YWx1ZSk7fTt0cmFja0J5SWRPYmpGbj1mdW5jdGlvbihrZXkpe3JldHVybiBrZXk7fTt9Cm1hdGNoPWxocy5tYXRjaCgvXig/OihbXCRcd10rKXxcKChbXCRcd10rKVxzKixccyooW1wkXHddKylcKSkkLyk7aWYoIW1hdGNoKXt0aHJvdyBuZ1JlcGVhdE1pbkVycignaWlkZXhwJywiJ19pdGVtXycgaW4gJ19pdGVtXyBpbiBfY29sbGVjdGlvbl8nIHNob3VsZCBiZSBhbiBpZGVudGlmaWVyIG9yICcoX2tleV8sIF92YWx1ZV8pJyBleHByZXNzaW9uLCBidXQgZ290ICd7MH0nLiIsbGhzKTt9CnZhbHVlSWRlbnRpZmllcj1tYXRjaFszXXx8bWF0Y2hbMV07a2V5SWRlbnRpZmllcj1tYXRjaFsyXTt2YXIgbGFzdEJsb2NrTWFwPXt9OyRzY29wZS4kd2F0Y2hDb2xsZWN0aW9uKHJocyxmdW5jdGlvbiBuZ1JlcGVhdEFjdGlvbihjb2xsZWN0aW9uKXt2YXIgaW5kZXgsbGVuZ3RoLHByZXZpb3VzTm9kZT0kZWxlbWVudFswXSxuZXh0Tm9kZSxuZXh0QmxvY2tNYXA9e30sYXJyYXlMZW5ndGgsY2hpbGRTY29wZSxrZXksdmFsdWUsdHJhY2tCeUlkLHRyYWNrQnlJZEZuLGNvbGxlY3Rpb25LZXlzLGJsb2NrLG5leHRCbG9ja09yZGVyPVtdLGVsZW1lbnRzVG9SZW1vdmU7aWYoaXNBcnJheUxpa2UoY29sbGVjdGlvbikpe2NvbGxlY3Rpb25LZXlzPWNvbGxlY3Rpb247dHJhY2tCeUlkRm49dHJhY2tCeUlkRXhwRm58fHRyYWNrQnlJZEFycmF5Rm47fWVsc2V7dHJhY2tCeUlkRm49dHJhY2tCeUlkRXhwRm58fHRyYWNrQnlJZE9iakZuO2NvbGxlY3Rpb25LZXlzPVtdO2ZvcihrZXkgaW4gY29sbGVjdGlvbil7aWYoY29sbGVjdGlvbi5oYXNPd25Qcm9wZXJ0eShrZXkpJiZrZXkuY2hhckF0KDApIT0nJCcpe2NvbGxlY3Rpb25LZXlzLnB1c2goa2V5KTt9fQpjb2xsZWN0aW9uS2V5cy5zb3J0KCk7fQphcnJheUxlbmd0aD1jb2xsZWN0aW9uS2V5cy5sZW5ndGg7bGVuZ3RoPW5leHRCbG9ja09yZGVyLmxlbmd0aD1jb2xsZWN0aW9uS2V5cy5sZW5ndGg7Zm9yKGluZGV4PTA7aW5kZXg8bGVuZ3RoO2luZGV4Kyspe2tleT0oY29sbGVjdGlvbj09PWNvbGxlY3Rpb25LZXlzKT9pbmRleDpjb2xsZWN0aW9uS2V5c1tpbmRleF07dmFsdWU9Y29sbGVjdGlvbltrZXldO3RyYWNrQnlJZD10cmFja0J5SWRGbihrZXksdmFsdWUsaW5kZXgpO2Fzc2VydE5vdEhhc093blByb3BlcnR5KHRyYWNrQnlJZCwnYHRyYWNrIGJ5YCBpZCcpO2lmKGxhc3RCbG9ja01hcC5oYXNPd25Qcm9wZXJ0eSh0cmFja0J5SWQpKXtibG9jaz1sYXN0QmxvY2tNYXBbdHJhY2tCeUlkXTtkZWxldGUgbGFzdEJsb2NrTWFwW3RyYWNrQnlJZF07bmV4dEJsb2NrTWFwW3RyYWNrQnlJZF09YmxvY2s7bmV4dEJsb2NrT3JkZXJbaW5kZXhdPWJsb2NrO31lbHNlIGlmKG5leHRCbG9ja01hcC5oYXNPd25Qcm9wZXJ0eSh0cmFja0J5SWQpKXtmb3JFYWNoKG5leHRCbG9ja09yZGVyLGZ1bmN0aW9uKGJsb2NrKXtpZihibG9jayYmYmxvY2suc2NvcGUpbGFzdEJsb2NrTWFwW2Jsb2NrLmlkXT1ibG9jazt9KTt0aHJvdyBuZ1JlcGVhdE1pbkVycignZHVwZXMnLCJEdXBsaWNhdGVzIGluIGEgcmVwZWF0ZXIgYXJlIG5vdCBhbGxvd2VkLiBVc2UgJ3RyYWNrIGJ5JyBleHByZXNzaW9uIHRvIHNwZWNpZnkgdW5pcXVlIGtleXMuIFJlcGVhdGVyOiB7MH0sIER1cGxpY2F0ZSBrZXk6IHsxfSIsZXhwcmVzc2lvbix0cmFja0J5SWQpO31lbHNle25leHRCbG9ja09yZGVyW2luZGV4XT17aWQ6dHJhY2tCeUlkfTtuZXh0QmxvY2tNYXBbdHJhY2tCeUlkXT1mYWxzZTt9fQpmb3Ioa2V5IGluIGxhc3RCbG9ja01hcCl7aWYobGFzdEJsb2NrTWFwLmhhc093blByb3BlcnR5KGtleSkpe2Jsb2NrPWxhc3RCbG9ja01hcFtrZXldO2VsZW1lbnRzVG9SZW1vdmU9Z2V0QmxvY2tFbGVtZW50cyhibG9jay5jbG9uZSk7JGFuaW1hdGUubGVhdmUoZWxlbWVudHNUb1JlbW92ZSk7Zm9yRWFjaChlbGVtZW50c1RvUmVtb3ZlLGZ1bmN0aW9uKGVsZW1lbnQpe2VsZW1lbnRbTkdfUkVNT1ZFRF09dHJ1ZTt9KTtibG9jay5zY29wZS4kZGVzdHJveSgpO319CmZvcihpbmRleD0wLGxlbmd0aD1jb2xsZWN0aW9uS2V5cy5sZW5ndGg7aW5kZXg8bGVuZ3RoO2luZGV4Kyspe2tleT0oY29sbGVjdGlvbj09PWNvbGxlY3Rpb25LZXlzKT9pbmRleDpjb2xsZWN0aW9uS2V5c1tpbmRleF07dmFsdWU9Y29sbGVjdGlvbltrZXldO2Jsb2NrPW5leHRCbG9ja09yZGVyW2luZGV4XTtpZihuZXh0QmxvY2tPcmRlcltpbmRleC0xXSlwcmV2aW91c05vZGU9Z2V0QmxvY2tFbmQobmV4dEJsb2NrT3JkZXJbaW5kZXgtMV0pO2lmKGJsb2NrLnNjb3BlKXtjaGlsZFNjb3BlPWJsb2NrLnNjb3BlO25leHROb2RlPXByZXZpb3VzTm9kZTtkb3tuZXh0Tm9kZT1uZXh0Tm9kZS5uZXh0U2libGluZzt9d2hpbGUobmV4dE5vZGUmJm5leHROb2RlW05HX1JFTU9WRURdKTtpZihnZXRCbG9ja1N0YXJ0KGJsb2NrKSE9bmV4dE5vZGUpeyRhbmltYXRlLm1vdmUoZ2V0QmxvY2tFbGVtZW50cyhibG9jay5jbG9uZSksbnVsbCxqcUxpdGUocHJldmlvdXNOb2RlKSk7fQpwcmV2aW91c05vZGU9Z2V0QmxvY2tFbmQoYmxvY2spO31lbHNle2NoaWxkU2NvcGU9JHNjb3BlLiRuZXcoKTt9CmNoaWxkU2NvcGVbdmFsdWVJZGVudGlmaWVyXT12YWx1ZTtpZihrZXlJZGVudGlmaWVyKWNoaWxkU2NvcGVba2V5SWRlbnRpZmllcl09a2V5O2NoaWxkU2NvcGUuJGluZGV4PWluZGV4O2NoaWxkU2NvcGUuJGZpcnN0PShpbmRleD09PTApO2NoaWxkU2NvcGUuJGxhc3Q9KGluZGV4PT09KGFycmF5TGVuZ3RoLTEpKTtjaGlsZFNjb3BlLiRtaWRkbGU9IShjaGlsZFNjb3BlLiRmaXJzdHx8Y2hpbGRTY29wZS4kbGFzdCk7Y2hpbGRTY29wZS4kb2RkPSEoY2hpbGRTY29wZS4kZXZlbj0oaW5kZXgmMSk9PT0wKTtpZighYmxvY2suc2NvcGUpeyR0cmFuc2NsdWRlKGNoaWxkU2NvcGUsZnVuY3Rpb24oY2xvbmUpe2Nsb25lW2Nsb25lLmxlbmd0aCsrXT1kb2N1bWVudC5jcmVhdGVDb21tZW50KCcgZW5kIG5nUmVwZWF0OiAnK2V4cHJlc3Npb24rJyAnKTskYW5pbWF0ZS5lbnRlcihjbG9uZSxudWxsLGpxTGl0ZShwcmV2aW91c05vZGUpKTtwcmV2aW91c05vZGU9Y2xvbmU7YmxvY2suc2NvcGU9Y2hpbGRTY29wZTtibG9jay5jbG9uZT1jbG9uZTtuZXh0QmxvY2tNYXBbYmxvY2suaWRdPWJsb2NrO30pO319Cmxhc3RCbG9ja01hcD1uZXh0QmxvY2tNYXA7fSk7fX07ZnVuY3Rpb24gZ2V0QmxvY2tTdGFydChibG9jayl7cmV0dXJuIGJsb2NrLmNsb25lWzBdO30KZnVuY3Rpb24gZ2V0QmxvY2tFbmQoYmxvY2spe3JldHVybiBibG9jay5jbG9uZVtibG9jay5jbG9uZS5sZW5ndGgtMV07fX1dO3ZhciBuZ1Nob3dEaXJlY3RpdmU9WyckYW5pbWF0ZScsZnVuY3Rpb24oJGFuaW1hdGUpe3JldHVybiBmdW5jdGlvbihzY29wZSxlbGVtZW50LGF0dHIpe3Njb3BlLiR3YXRjaChhdHRyLm5nU2hvdyxmdW5jdGlvbiBuZ1Nob3dXYXRjaEFjdGlvbih2YWx1ZSl7JGFuaW1hdGVbdG9Cb29sZWFuKHZhbHVlKT8ncmVtb3ZlQ2xhc3MnOidhZGRDbGFzcyddKGVsZW1lbnQsJ25nLWhpZGUnKTt9KTt9O31dO3ZhciBuZ0hpZGVEaXJlY3RpdmU9WyckYW5pbWF0ZScsZnVuY3Rpb24oJGFuaW1hdGUpe3JldHVybiBmdW5jdGlvbihzY29wZSxlbGVtZW50LGF0dHIpe3Njb3BlLiR3YXRjaChhdHRyLm5nSGlkZSxmdW5jdGlvbiBuZ0hpZGVXYXRjaEFjdGlvbih2YWx1ZSl7JGFuaW1hdGVbdG9Cb29sZWFuKHZhbHVlKT8nYWRkQ2xhc3MnOidyZW1vdmVDbGFzcyddKGVsZW1lbnQsJ25nLWhpZGUnKTt9KTt9O31dO3ZhciBuZ1N0eWxlRGlyZWN0aXZlPW5nRGlyZWN0aXZlKGZ1bmN0aW9uKHNjb3BlLGVsZW1lbnQsYXR0cil7c2NvcGUuJHdhdGNoKGF0dHIubmdTdHlsZSxmdW5jdGlvbiBuZ1N0eWxlV2F0Y2hBY3Rpb24obmV3U3R5bGVzLG9sZFN0eWxlcyl7aWYob2xkU3R5bGVzJiYobmV3U3R5bGVzIT09b2xkU3R5bGVzKSl7Zm9yRWFjaChvbGRTdHlsZXMsZnVuY3Rpb24odmFsLHN0eWxlKXtlbGVtZW50LmNzcyhzdHlsZSwnJyk7fSk7fQppZihuZXdTdHlsZXMpZWxlbWVudC5jc3MobmV3U3R5bGVzKTt9LHRydWUpO30pO3ZhciBuZ1N3aXRjaERpcmVjdGl2ZT1bJyRhbmltYXRlJyxmdW5jdGlvbigkYW5pbWF0ZSl7cmV0dXJue3Jlc3RyaWN0OidFQScscmVxdWlyZTonbmdTd2l0Y2gnLGNvbnRyb2xsZXI6Wyckc2NvcGUnLGZ1bmN0aW9uIG5nU3dpdGNoQ29udHJvbGxlcigpe3RoaXMuY2FzZXM9e307fV0sbGluazpmdW5jdGlvbihzY29wZSxlbGVtZW50LGF0dHIsbmdTd2l0Y2hDb250cm9sbGVyKXt2YXIgd2F0Y2hFeHByPWF0dHIubmdTd2l0Y2h8fGF0dHIub24sc2VsZWN0ZWRUcmFuc2NsdWRlcz1bXSxzZWxlY3RlZEVsZW1lbnRzPVtdLHByZXZpb3VzRWxlbWVudHM9W10sc2VsZWN0ZWRTY29wZXM9W107c2NvcGUuJHdhdGNoKHdhdGNoRXhwcixmdW5jdGlvbiBuZ1N3aXRjaFdhdGNoQWN0aW9uKHZhbHVlKXt2YXIgaSxpaTtmb3IoaT0wLGlpPXByZXZpb3VzRWxlbWVudHMubGVuZ3RoO2k8aWk7KytpKXtwcmV2aW91c0VsZW1lbnRzW2ldLnJlbW92ZSgpO30KcHJldmlvdXNFbGVtZW50cy5sZW5ndGg9MDtmb3IoaT0wLGlpPXNlbGVjdGVkU2NvcGVzLmxlbmd0aDtpPGlpOysraSl7dmFyIHNlbGVjdGVkPXNlbGVjdGVkRWxlbWVudHNbaV07c2VsZWN0ZWRTY29wZXNbaV0uJGRlc3Ryb3koKTtwcmV2aW91c0VsZW1lbnRzW2ldPXNlbGVjdGVkOyRhbmltYXRlLmxlYXZlKHNlbGVjdGVkLGZ1bmN0aW9uKCl7cHJldmlvdXNFbGVtZW50cy5zcGxpY2UoaSwxKTt9KTt9CnNlbGVjdGVkRWxlbWVudHMubGVuZ3RoPTA7c2VsZWN0ZWRTY29wZXMubGVuZ3RoPTA7aWYoKHNlbGVjdGVkVHJhbnNjbHVkZXM9bmdTd2l0Y2hDb250cm9sbGVyLmNhc2VzWychJyt2YWx1ZV18fG5nU3dpdGNoQ29udHJvbGxlci5jYXNlc1snPyddKSl7c2NvcGUuJGV2YWwoYXR0ci5jaGFuZ2UpO2ZvckVhY2goc2VsZWN0ZWRUcmFuc2NsdWRlcyxmdW5jdGlvbihzZWxlY3RlZFRyYW5zY2x1ZGUpe3ZhciBzZWxlY3RlZFNjb3BlPXNjb3BlLiRuZXcoKTtzZWxlY3RlZFNjb3Blcy5wdXNoKHNlbGVjdGVkU2NvcGUpO3NlbGVjdGVkVHJhbnNjbHVkZS50cmFuc2NsdWRlKHNlbGVjdGVkU2NvcGUsZnVuY3Rpb24oY2FzZUVsZW1lbnQpe3ZhciBhbmNob3I9c2VsZWN0ZWRUcmFuc2NsdWRlLmVsZW1lbnQ7c2VsZWN0ZWRFbGVtZW50cy5wdXNoKGNhc2VFbGVtZW50KTskYW5pbWF0ZS5lbnRlcihjYXNlRWxlbWVudCxhbmNob3IucGFyZW50KCksYW5jaG9yKTt9KTt9KTt9fSk7fX07fV07dmFyIG5nU3dpdGNoV2hlbkRpcmVjdGl2ZT1uZ0RpcmVjdGl2ZSh7dHJhbnNjbHVkZTonZWxlbWVudCcscHJpb3JpdHk6ODAwLHJlcXVpcmU6J15uZ1N3aXRjaCcsbGluazpmdW5jdGlvbihzY29wZSxlbGVtZW50LGF0dHJzLGN0cmwsJHRyYW5zY2x1ZGUpe2N0cmwuY2FzZXNbJyEnK2F0dHJzLm5nU3dpdGNoV2hlbl09KGN0cmwuY2FzZXNbJyEnK2F0dHJzLm5nU3dpdGNoV2hlbl18fFtdKTtjdHJsLmNhc2VzWychJythdHRycy5uZ1N3aXRjaFdoZW5dLnB1c2goe3RyYW5zY2x1ZGU6JHRyYW5zY2x1ZGUsZWxlbWVudDplbGVtZW50fSk7fX0pO3ZhciBuZ1N3aXRjaERlZmF1bHREaXJlY3RpdmU9bmdEaXJlY3RpdmUoe3RyYW5zY2x1ZGU6J2VsZW1lbnQnLHByaW9yaXR5OjgwMCxyZXF1aXJlOidebmdTd2l0Y2gnLGxpbms6ZnVuY3Rpb24oc2NvcGUsZWxlbWVudCxhdHRyLGN0cmwsJHRyYW5zY2x1ZGUpe2N0cmwuY2FzZXNbJz8nXT0oY3RybC5jYXNlc1snPyddfHxbXSk7Y3RybC5jYXNlc1snPyddLnB1c2goe3RyYW5zY2x1ZGU6JHRyYW5zY2x1ZGUsZWxlbWVudDplbGVtZW50fSk7fX0pO3ZhciBuZ1RyYW5zY2x1ZGVEaXJlY3RpdmU9bmdEaXJlY3RpdmUoe2xpbms6ZnVuY3Rpb24oJHNjb3BlLCRlbGVtZW50LCRhdHRycyxjb250cm9sbGVyLCR0cmFuc2NsdWRlKXtpZighJHRyYW5zY2x1ZGUpe3Rocm93IG1pbkVycignbmdUcmFuc2NsdWRlJykoJ29ycGhhbicsJ0lsbGVnYWwgdXNlIG9mIG5nVHJhbnNjbHVkZSBkaXJlY3RpdmUgaW4gdGhlIHRlbXBsYXRlISAnKydObyBwYXJlbnQgZGlyZWN0aXZlIHRoYXQgcmVxdWlyZXMgYSB0cmFuc2NsdXNpb24gZm91bmQuICcrJ0VsZW1lbnQ6IHswfScsc3RhcnRpbmdUYWcoJGVsZW1lbnQpKTt9CiR0cmFuc2NsdWRlKGZ1bmN0aW9uKGNsb25lKXskZWxlbWVudC5lbXB0eSgpOyRlbGVtZW50LmFwcGVuZChjbG9uZSk7fSk7fX0pO3ZhciBzY3JpcHREaXJlY3RpdmU9WyckdGVtcGxhdGVDYWNoZScsZnVuY3Rpb24oJHRlbXBsYXRlQ2FjaGUpe3JldHVybntyZXN0cmljdDonRScsdGVybWluYWw6dHJ1ZSxjb21waWxlOmZ1bmN0aW9uKGVsZW1lbnQsYXR0cil7aWYoYXR0ci50eXBlPT0ndGV4dC9uZy10ZW1wbGF0ZScpe3ZhciB0ZW1wbGF0ZVVybD1hdHRyLmlkLHRleHQ9ZWxlbWVudFswXS50ZXh0OyR0ZW1wbGF0ZUNhY2hlLnB1dCh0ZW1wbGF0ZVVybCx0ZXh0KTt9fX07fV07dmFyIG5nT3B0aW9uc01pbkVycj1taW5FcnIoJ25nT3B0aW9ucycpO3ZhciBuZ09wdGlvbnNEaXJlY3RpdmU9dmFsdWVGbih7dGVybWluYWw6dHJ1ZX0pO3ZhciBzZWxlY3REaXJlY3RpdmU9WyckY29tcGlsZScsJyRwYXJzZScsZnVuY3Rpb24oJGNvbXBpbGUsJHBhcnNlKXt2YXIgTkdfT1BUSU9OU19SRUdFWFA9L15ccyooW1xzXFNdKz8pKD86XHMrYXNccysoW1xzXFNdKz8pKT8oPzpccytncm91cFxzK2J5XHMrKFtcc1xTXSs/KSk/XHMrZm9yXHMrKD86KFtcJFx3XVtcJFx3XSopfCg/OlwoXHMqKFtcJFx3XVtcJFx3XSopXHMqLFxzKihbXCRcd11bXCRcd10qKVxzKlwpKSlccytpblxzKyhbXHNcU10rPykoPzpccyt0cmFja1xzK2J5XHMrKFtcc1xTXSs/KSk/JC8sbnVsbE1vZGVsQ3RybD17JHNldFZpZXdWYWx1ZTpub29wfTtyZXR1cm57cmVzdHJpY3Q6J0UnLHJlcXVpcmU6WydzZWxlY3QnLCc/bmdNb2RlbCddLGNvbnRyb2xsZXI6WyckZWxlbWVudCcsJyRzY29wZScsJyRhdHRycycsZnVuY3Rpb24oJGVsZW1lbnQsJHNjb3BlLCRhdHRycyl7dmFyIHNlbGY9dGhpcyxvcHRpb25zTWFwPXt9LG5nTW9kZWxDdHJsPW51bGxNb2RlbEN0cmwsbnVsbE9wdGlvbix1bmtub3duT3B0aW9uO3NlbGYuZGF0YWJvdW5kPSRhdHRycy5uZ01vZGVsO3NlbGYuaW5pdD1mdW5jdGlvbihuZ01vZGVsQ3RybF8sbnVsbE9wdGlvbl8sdW5rbm93bk9wdGlvbl8pe25nTW9kZWxDdHJsPW5nTW9kZWxDdHJsXztudWxsT3B0aW9uPW51bGxPcHRpb25fO3Vua25vd25PcHRpb249dW5rbm93bk9wdGlvbl87fTtzZWxmLmFkZE9wdGlvbj1mdW5jdGlvbih2YWx1ZSl7YXNzZXJ0Tm90SGFzT3duUHJvcGVydHkodmFsdWUsJyJvcHRpb24gdmFsdWUiJyk7b3B0aW9uc01hcFt2YWx1ZV09dHJ1ZTtpZihuZ01vZGVsQ3RybC4kdmlld1ZhbHVlPT12YWx1ZSl7JGVsZW1lbnQudmFsKHZhbHVlKTtpZih1bmtub3duT3B0aW9uLnBhcmVudCgpKXVua25vd25PcHRpb24ucmVtb3ZlKCk7fX07c2VsZi5yZW1vdmVPcHRpb249ZnVuY3Rpb24odmFsdWUpe2lmKHRoaXMuaGFzT3B0aW9uKHZhbHVlKSl7ZGVsZXRlIG9wdGlvbnNNYXBbdmFsdWVdO2lmKG5nTW9kZWxDdHJsLiR2aWV3VmFsdWU9PXZhbHVlKXt0aGlzLnJlbmRlclVua25vd25PcHRpb24odmFsdWUpO319fTtzZWxmLnJlbmRlclVua25vd25PcHRpb249ZnVuY3Rpb24odmFsKXt2YXIgdW5rbm93blZhbD0nPyAnK2hhc2hLZXkodmFsKSsnID8nO3Vua25vd25PcHRpb24udmFsKHVua25vd25WYWwpOyRlbGVtZW50LnByZXBlbmQodW5rbm93bk9wdGlvbik7JGVsZW1lbnQudmFsKHVua25vd25WYWwpO3Vua25vd25PcHRpb24ucHJvcCgnc2VsZWN0ZWQnLHRydWUpO307c2VsZi5oYXNPcHRpb249ZnVuY3Rpb24odmFsdWUpe3JldHVybiBvcHRpb25zTWFwLmhhc093blByb3BlcnR5KHZhbHVlKTt9OyRzY29wZS4kb24oJyRkZXN0cm95JyxmdW5jdGlvbigpe3NlbGYucmVuZGVyVW5rbm93bk9wdGlvbj1ub29wO30pO31dLGxpbms6ZnVuY3Rpb24oc2NvcGUsZWxlbWVudCxhdHRyLGN0cmxzKXtpZighY3RybHNbMV0pcmV0dXJuO3ZhciBzZWxlY3RDdHJsPWN0cmxzWzBdLG5nTW9kZWxDdHJsPWN0cmxzWzFdLG11bHRpcGxlPWF0dHIubXVsdGlwbGUsb3B0aW9uc0V4cD1hdHRyLm5nT3B0aW9ucyxudWxsT3B0aW9uPWZhbHNlLGVtcHR5T3B0aW9uLG9wdGlvblRlbXBsYXRlPWpxTGl0ZShkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKSksb3B0R3JvdXBUZW1wbGF0ZT1qcUxpdGUoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0Z3JvdXAnKSksdW5rbm93bk9wdGlvbj1vcHRpb25UZW1wbGF0ZS5jbG9uZSgpO2Zvcih2YXIgaT0wLGNoaWxkcmVuPWVsZW1lbnQuY2hpbGRyZW4oKSxpaT1jaGlsZHJlbi5sZW5ndGg7aTxpaTtpKyspe2lmKGNoaWxkcmVuW2ldLnZhbHVlPT09Jycpe2VtcHR5T3B0aW9uPW51bGxPcHRpb249Y2hpbGRyZW4uZXEoaSk7YnJlYWs7fX0Kc2VsZWN0Q3RybC5pbml0KG5nTW9kZWxDdHJsLG51bGxPcHRpb24sdW5rbm93bk9wdGlvbik7aWYobXVsdGlwbGUpe25nTW9kZWxDdHJsLiRpc0VtcHR5PWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4hdmFsdWV8fHZhbHVlLmxlbmd0aD09PTA7fTt9CmlmKG9wdGlvbnNFeHApc2V0dXBBc09wdGlvbnMoc2NvcGUsZWxlbWVudCxuZ01vZGVsQ3RybCk7ZWxzZSBpZihtdWx0aXBsZSlzZXR1cEFzTXVsdGlwbGUoc2NvcGUsZWxlbWVudCxuZ01vZGVsQ3RybCk7ZWxzZSBzZXR1cEFzU2luZ2xlKHNjb3BlLGVsZW1lbnQsbmdNb2RlbEN0cmwsc2VsZWN0Q3RybCk7ZnVuY3Rpb24gc2V0dXBBc1NpbmdsZShzY29wZSxzZWxlY3RFbGVtZW50LG5nTW9kZWxDdHJsLHNlbGVjdEN0cmwpe25nTW9kZWxDdHJsLiRyZW5kZXI9ZnVuY3Rpb24oKXt2YXIgdmlld1ZhbHVlPW5nTW9kZWxDdHJsLiR2aWV3VmFsdWU7aWYoc2VsZWN0Q3RybC5oYXNPcHRpb24odmlld1ZhbHVlKSl7aWYodW5rbm93bk9wdGlvbi5wYXJlbnQoKSl1bmtub3duT3B0aW9uLnJlbW92ZSgpO3NlbGVjdEVsZW1lbnQudmFsKHZpZXdWYWx1ZSk7aWYodmlld1ZhbHVlPT09JycpZW1wdHlPcHRpb24ucHJvcCgnc2VsZWN0ZWQnLHRydWUpO31lbHNle2lmKGlzVW5kZWZpbmVkKHZpZXdWYWx1ZSkmJmVtcHR5T3B0aW9uKXtzZWxlY3RFbGVtZW50LnZhbCgnJyk7fWVsc2V7c2VsZWN0Q3RybC5yZW5kZXJVbmtub3duT3B0aW9uKHZpZXdWYWx1ZSk7fX19O3NlbGVjdEVsZW1lbnQub24oJ2NoYW5nZScsZnVuY3Rpb24oKXtzY29wZS4kYXBwbHkoZnVuY3Rpb24oKXtpZih1bmtub3duT3B0aW9uLnBhcmVudCgpKXVua25vd25PcHRpb24ucmVtb3ZlKCk7bmdNb2RlbEN0cmwuJHNldFZpZXdWYWx1ZShzZWxlY3RFbGVtZW50LnZhbCgpKTt9KTt9KTt9CmZ1bmN0aW9uIHNldHVwQXNNdWx0aXBsZShzY29wZSxzZWxlY3RFbGVtZW50LGN0cmwpe3ZhciBsYXN0VmlldztjdHJsLiRyZW5kZXI9ZnVuY3Rpb24oKXt2YXIgaXRlbXM9bmV3IEhhc2hNYXAoY3RybC4kdmlld1ZhbHVlKTtmb3JFYWNoKHNlbGVjdEVsZW1lbnQuZmluZCgnb3B0aW9uJyksZnVuY3Rpb24ob3B0aW9uKXtvcHRpb24uc2VsZWN0ZWQ9aXNEZWZpbmVkKGl0ZW1zLmdldChvcHRpb24udmFsdWUpKTt9KTt9O3Njb3BlLiR3YXRjaChmdW5jdGlvbiBzZWxlY3RNdWx0aXBsZVdhdGNoKCl7aWYoIWVxdWFscyhsYXN0VmlldyxjdHJsLiR2aWV3VmFsdWUpKXtsYXN0Vmlldz1zaGFsbG93Q29weShjdHJsLiR2aWV3VmFsdWUpO2N0cmwuJHJlbmRlcigpO319KTtzZWxlY3RFbGVtZW50Lm9uKCdjaGFuZ2UnLGZ1bmN0aW9uKCl7c2NvcGUuJGFwcGx5KGZ1bmN0aW9uKCl7dmFyIGFycmF5PVtdO2ZvckVhY2goc2VsZWN0RWxlbWVudC5maW5kKCdvcHRpb24nKSxmdW5jdGlvbihvcHRpb24pe2lmKG9wdGlvbi5zZWxlY3RlZCl7YXJyYXkucHVzaChvcHRpb24udmFsdWUpO319KTtjdHJsLiRzZXRWaWV3VmFsdWUoYXJyYXkpO30pO30pO30KZnVuY3Rpb24gc2V0dXBBc09wdGlvbnMoc2NvcGUsc2VsZWN0RWxlbWVudCxjdHJsKXt2YXIgbWF0Y2g7aWYoIShtYXRjaD1vcHRpb25zRXhwLm1hdGNoKE5HX09QVElPTlNfUkVHRVhQKSkpe3Rocm93IG5nT3B0aW9uc01pbkVycignaWV4cCcsIkV4cGVjdGVkIGV4cHJlc3Npb24gaW4gZm9ybSBvZiAiKyInX3NlbGVjdF8gKGFzIF9sYWJlbF8pPyBmb3IgKF9rZXlfLCk/X3ZhbHVlXyBpbiBfY29sbGVjdGlvbl8nIisiIGJ1dCBnb3QgJ3swfScuIEVsZW1lbnQ6IHsxfSIsb3B0aW9uc0V4cCxzdGFydGluZ1RhZyhzZWxlY3RFbGVtZW50KSk7fQp2YXIgZGlzcGxheUZuPSRwYXJzZShtYXRjaFsyXXx8bWF0Y2hbMV0pLHZhbHVlTmFtZT1tYXRjaFs0XXx8bWF0Y2hbNl0sa2V5TmFtZT1tYXRjaFs1XSxncm91cEJ5Rm49JHBhcnNlKG1hdGNoWzNdfHwnJyksdmFsdWVGbj0kcGFyc2UobWF0Y2hbMl0/bWF0Y2hbMV06dmFsdWVOYW1lKSx2YWx1ZXNGbj0kcGFyc2UobWF0Y2hbN10pLHRyYWNrPW1hdGNoWzhdLHRyYWNrRm49dHJhY2s/JHBhcnNlKG1hdGNoWzhdKTpudWxsLG9wdGlvbkdyb3Vwc0NhY2hlPVtbe2VsZW1lbnQ6c2VsZWN0RWxlbWVudCxsYWJlbDonJ31dXTtpZihudWxsT3B0aW9uKXskY29tcGlsZShudWxsT3B0aW9uKShzY29wZSk7bnVsbE9wdGlvbi5yZW1vdmVDbGFzcygnbmctc2NvcGUnKTtudWxsT3B0aW9uLnJlbW92ZSgpO30Kc2VsZWN0RWxlbWVudC5lbXB0eSgpO3NlbGVjdEVsZW1lbnQub24oJ2NoYW5nZScsZnVuY3Rpb24oKXtzY29wZS4kYXBwbHkoZnVuY3Rpb24oKXt2YXIgb3B0aW9uR3JvdXAsY29sbGVjdGlvbj12YWx1ZXNGbihzY29wZSl8fFtdLGxvY2Fscz17fSxrZXksdmFsdWUsb3B0aW9uRWxlbWVudCxpbmRleCxncm91cEluZGV4LGxlbmd0aCxncm91cExlbmd0aCx0cmFja0luZGV4O2lmKG11bHRpcGxlKXt2YWx1ZT1bXTtmb3IoZ3JvdXBJbmRleD0wLGdyb3VwTGVuZ3RoPW9wdGlvbkdyb3Vwc0NhY2hlLmxlbmd0aDtncm91cEluZGV4PGdyb3VwTGVuZ3RoO2dyb3VwSW5kZXgrKyl7b3B0aW9uR3JvdXA9b3B0aW9uR3JvdXBzQ2FjaGVbZ3JvdXBJbmRleF07Zm9yKGluZGV4PTEsbGVuZ3RoPW9wdGlvbkdyb3VwLmxlbmd0aDtpbmRleDxsZW5ndGg7aW5kZXgrKyl7aWYoKG9wdGlvbkVsZW1lbnQ9b3B0aW9uR3JvdXBbaW5kZXhdLmVsZW1lbnQpWzBdLnNlbGVjdGVkKXtrZXk9b3B0aW9uRWxlbWVudC52YWwoKTtpZihrZXlOYW1lKWxvY2Fsc1trZXlOYW1lXT1rZXk7aWYodHJhY2tGbil7Zm9yKHRyYWNrSW5kZXg9MDt0cmFja0luZGV4PGNvbGxlY3Rpb24ubGVuZ3RoO3RyYWNrSW5kZXgrKyl7bG9jYWxzW3ZhbHVlTmFtZV09Y29sbGVjdGlvblt0cmFja0luZGV4XTtpZih0cmFja0ZuKHNjb3BlLGxvY2Fscyk9PWtleSlicmVhazt9fWVsc2V7bG9jYWxzW3ZhbHVlTmFtZV09Y29sbGVjdGlvbltrZXldO30KdmFsdWUucHVzaCh2YWx1ZUZuKHNjb3BlLGxvY2FscykpO319fX1lbHNle2tleT1zZWxlY3RFbGVtZW50LnZhbCgpO2lmKGtleT09Jz8nKXt2YWx1ZT11bmRlZmluZWQ7fWVsc2UgaWYoa2V5PT09Jycpe3ZhbHVlPW51bGw7fWVsc2V7aWYodHJhY2tGbil7Zm9yKHRyYWNrSW5kZXg9MDt0cmFja0luZGV4PGNvbGxlY3Rpb24ubGVuZ3RoO3RyYWNrSW5kZXgrKyl7bG9jYWxzW3ZhbHVlTmFtZV09Y29sbGVjdGlvblt0cmFja0luZGV4XTtpZih0cmFja0ZuKHNjb3BlLGxvY2Fscyk9PWtleSl7dmFsdWU9dmFsdWVGbihzY29wZSxsb2NhbHMpO2JyZWFrO319fWVsc2V7bG9jYWxzW3ZhbHVlTmFtZV09Y29sbGVjdGlvbltrZXldO2lmKGtleU5hbWUpbG9jYWxzW2tleU5hbWVdPWtleTt2YWx1ZT12YWx1ZUZuKHNjb3BlLGxvY2Fscyk7fX0KaWYob3B0aW9uR3JvdXBzQ2FjaGVbMF0ubGVuZ3RoPjEpe2lmKG9wdGlvbkdyb3Vwc0NhY2hlWzBdWzFdLmlkIT09a2V5KXtvcHRpb25Hcm91cHNDYWNoZVswXVsxXS5zZWxlY3RlZD1mYWxzZTt9fX0KY3RybC4kc2V0Vmlld1ZhbHVlKHZhbHVlKTt9KTt9KTtjdHJsLiRyZW5kZXI9cmVuZGVyO3Njb3BlLiR3YXRjaChyZW5kZXIpO2Z1bmN0aW9uIHJlbmRlcigpe3ZhciBvcHRpb25Hcm91cHM9eycnOltdfSxvcHRpb25Hcm91cE5hbWVzPVsnJ10sb3B0aW9uR3JvdXBOYW1lLG9wdGlvbkdyb3VwLG9wdGlvbixleGlzdGluZ1BhcmVudCxleGlzdGluZ09wdGlvbnMsZXhpc3RpbmdPcHRpb24sbW9kZWxWYWx1ZT1jdHJsLiRtb2RlbFZhbHVlLHZhbHVlcz12YWx1ZXNGbihzY29wZSl8fFtdLGtleXM9a2V5TmFtZT9zb3J0ZWRLZXlzKHZhbHVlcyk6dmFsdWVzLGtleSxncm91cExlbmd0aCxsZW5ndGgsZ3JvdXBJbmRleCxpbmRleCxsb2NhbHM9e30sc2VsZWN0ZWQsc2VsZWN0ZWRTZXQ9ZmFsc2UsbGFzdEVsZW1lbnQsZWxlbWVudCxsYWJlbDtpZihtdWx0aXBsZSl7aWYodHJhY2tGbiYmaXNBcnJheShtb2RlbFZhbHVlKSl7c2VsZWN0ZWRTZXQ9bmV3IEhhc2hNYXAoW10pO2Zvcih2YXIgdHJhY2tJbmRleD0wO3RyYWNrSW5kZXg8bW9kZWxWYWx1ZS5sZW5ndGg7dHJhY2tJbmRleCsrKXtsb2NhbHNbdmFsdWVOYW1lXT1tb2RlbFZhbHVlW3RyYWNrSW5kZXhdO3NlbGVjdGVkU2V0LnB1dCh0cmFja0ZuKHNjb3BlLGxvY2FscyksbW9kZWxWYWx1ZVt0cmFja0luZGV4XSk7fX1lbHNle3NlbGVjdGVkU2V0PW5ldyBIYXNoTWFwKG1vZGVsVmFsdWUpO319CmZvcihpbmRleD0wO2xlbmd0aD1rZXlzLmxlbmd0aCxpbmRleDxsZW5ndGg7aW5kZXgrKyl7a2V5PWluZGV4O2lmKGtleU5hbWUpe2tleT1rZXlzW2luZGV4XTtpZihrZXkuY2hhckF0KDApPT09JyQnKWNvbnRpbnVlO2xvY2Fsc1trZXlOYW1lXT1rZXk7fQpsb2NhbHNbdmFsdWVOYW1lXT12YWx1ZXNba2V5XTtvcHRpb25Hcm91cE5hbWU9Z3JvdXBCeUZuKHNjb3BlLGxvY2Fscyl8fCcnO2lmKCEob3B0aW9uR3JvdXA9b3B0aW9uR3JvdXBzW29wdGlvbkdyb3VwTmFtZV0pKXtvcHRpb25Hcm91cD1vcHRpb25Hcm91cHNbb3B0aW9uR3JvdXBOYW1lXT1bXTtvcHRpb25Hcm91cE5hbWVzLnB1c2gob3B0aW9uR3JvdXBOYW1lKTt9CmlmKG11bHRpcGxlKXtzZWxlY3RlZD1pc0RlZmluZWQoc2VsZWN0ZWRTZXQucmVtb3ZlKHRyYWNrRm4/dHJhY2tGbihzY29wZSxsb2NhbHMpOnZhbHVlRm4oc2NvcGUsbG9jYWxzKSkpO31lbHNle2lmKHRyYWNrRm4pe3ZhciBtb2RlbENhc3Q9e307bW9kZWxDYXN0W3ZhbHVlTmFtZV09bW9kZWxWYWx1ZTtzZWxlY3RlZD10cmFja0ZuKHNjb3BlLG1vZGVsQ2FzdCk9PT10cmFja0ZuKHNjb3BlLGxvY2Fscyk7fWVsc2V7c2VsZWN0ZWQ9bW9kZWxWYWx1ZT09PXZhbHVlRm4oc2NvcGUsbG9jYWxzKTt9CnNlbGVjdGVkU2V0PXNlbGVjdGVkU2V0fHxzZWxlY3RlZDt9CmxhYmVsPWRpc3BsYXlGbihzY29wZSxsb2NhbHMpO2xhYmVsPWlzRGVmaW5lZChsYWJlbCk/bGFiZWw6Jyc7b3B0aW9uR3JvdXAucHVzaCh7aWQ6dHJhY2tGbj90cmFja0ZuKHNjb3BlLGxvY2Fscyk6KGtleU5hbWU/a2V5c1tpbmRleF06aW5kZXgpLGxhYmVsOmxhYmVsLHNlbGVjdGVkOnNlbGVjdGVkfSk7fQppZighbXVsdGlwbGUpe2lmKG51bGxPcHRpb258fG1vZGVsVmFsdWU9PT1udWxsKXtvcHRpb25Hcm91cHNbJyddLnVuc2hpZnQoe2lkOicnLGxhYmVsOicnLHNlbGVjdGVkOiFzZWxlY3RlZFNldH0pO31lbHNlIGlmKCFzZWxlY3RlZFNldCl7b3B0aW9uR3JvdXBzWycnXS51bnNoaWZ0KHtpZDonPycsbGFiZWw6Jycsc2VsZWN0ZWQ6dHJ1ZX0pO319CmZvcihncm91cEluZGV4PTAsZ3JvdXBMZW5ndGg9b3B0aW9uR3JvdXBOYW1lcy5sZW5ndGg7Z3JvdXBJbmRleDxncm91cExlbmd0aDtncm91cEluZGV4Kyspe29wdGlvbkdyb3VwTmFtZT1vcHRpb25Hcm91cE5hbWVzW2dyb3VwSW5kZXhdO29wdGlvbkdyb3VwPW9wdGlvbkdyb3Vwc1tvcHRpb25Hcm91cE5hbWVdO2lmKG9wdGlvbkdyb3Vwc0NhY2hlLmxlbmd0aDw9Z3JvdXBJbmRleCl7ZXhpc3RpbmdQYXJlbnQ9e2VsZW1lbnQ6b3B0R3JvdXBUZW1wbGF0ZS5jbG9uZSgpLmF0dHIoJ2xhYmVsJyxvcHRpb25Hcm91cE5hbWUpLGxhYmVsOm9wdGlvbkdyb3VwLmxhYmVsfTtleGlzdGluZ09wdGlvbnM9W2V4aXN0aW5nUGFyZW50XTtvcHRpb25Hcm91cHNDYWNoZS5wdXNoKGV4aXN0aW5nT3B0aW9ucyk7c2VsZWN0RWxlbWVudC5hcHBlbmQoZXhpc3RpbmdQYXJlbnQuZWxlbWVudCk7fWVsc2V7ZXhpc3RpbmdPcHRpb25zPW9wdGlvbkdyb3Vwc0NhY2hlW2dyb3VwSW5kZXhdO2V4aXN0aW5nUGFyZW50PWV4aXN0aW5nT3B0aW9uc1swXTtpZihleGlzdGluZ1BhcmVudC5sYWJlbCE9b3B0aW9uR3JvdXBOYW1lKXtleGlzdGluZ1BhcmVudC5lbGVtZW50LmF0dHIoJ2xhYmVsJyxleGlzdGluZ1BhcmVudC5sYWJlbD1vcHRpb25Hcm91cE5hbWUpO319Cmxhc3RFbGVtZW50PW51bGw7Zm9yKGluZGV4PTAsbGVuZ3RoPW9wdGlvbkdyb3VwLmxlbmd0aDtpbmRleDxsZW5ndGg7aW5kZXgrKyl7b3B0aW9uPW9wdGlvbkdyb3VwW2luZGV4XTtpZigoZXhpc3RpbmdPcHRpb249ZXhpc3RpbmdPcHRpb25zW2luZGV4KzFdKSl7bGFzdEVsZW1lbnQ9ZXhpc3RpbmdPcHRpb24uZWxlbWVudDtpZihleGlzdGluZ09wdGlvbi5sYWJlbCE9PW9wdGlvbi5sYWJlbCl7bGFzdEVsZW1lbnQudGV4dChleGlzdGluZ09wdGlvbi5sYWJlbD1vcHRpb24ubGFiZWwpO30KaWYoZXhpc3RpbmdPcHRpb24uaWQhPT1vcHRpb24uaWQpe2xhc3RFbGVtZW50LnZhbChleGlzdGluZ09wdGlvbi5pZD1vcHRpb24uaWQpO30KaWYoZXhpc3RpbmdPcHRpb24uc2VsZWN0ZWQhPT1vcHRpb24uc2VsZWN0ZWQpe2xhc3RFbGVtZW50LnByb3AoJ3NlbGVjdGVkJywoZXhpc3RpbmdPcHRpb24uc2VsZWN0ZWQ9b3B0aW9uLnNlbGVjdGVkKSk7fX1lbHNle2lmKG9wdGlvbi5pZD09PScnJiZudWxsT3B0aW9uKXtlbGVtZW50PW51bGxPcHRpb247fWVsc2V7KGVsZW1lbnQ9b3B0aW9uVGVtcGxhdGUuY2xvbmUoKSkudmFsKG9wdGlvbi5pZCkucHJvcCgnc2VsZWN0ZWQnLG9wdGlvbi5zZWxlY3RlZCkudGV4dChvcHRpb24ubGFiZWwpO30KZXhpc3RpbmdPcHRpb25zLnB1c2goZXhpc3RpbmdPcHRpb249e2VsZW1lbnQ6ZWxlbWVudCxsYWJlbDpvcHRpb24ubGFiZWwsaWQ6b3B0aW9uLmlkLHNlbGVjdGVkOm9wdGlvbi5zZWxlY3RlZH0pO2lmKGxhc3RFbGVtZW50KXtsYXN0RWxlbWVudC5hZnRlcihlbGVtZW50KTt9ZWxzZXtleGlzdGluZ1BhcmVudC5lbGVtZW50LmFwcGVuZChlbGVtZW50KTt9Cmxhc3RFbGVtZW50PWVsZW1lbnQ7fX0KaW5kZXgrKzt3aGlsZShleGlzdGluZ09wdGlvbnMubGVuZ3RoPmluZGV4KXtleGlzdGluZ09wdGlvbnMucG9wKCkuZWxlbWVudC5yZW1vdmUoKTt9fQp3aGlsZShvcHRpb25Hcm91cHNDYWNoZS5sZW5ndGg+Z3JvdXBJbmRleCl7b3B0aW9uR3JvdXBzQ2FjaGUucG9wKClbMF0uZWxlbWVudC5yZW1vdmUoKTt9fX19fTt9XTt2YXIgb3B0aW9uRGlyZWN0aXZlPVsnJGludGVycG9sYXRlJyxmdW5jdGlvbigkaW50ZXJwb2xhdGUpe3ZhciBudWxsU2VsZWN0Q3RybD17YWRkT3B0aW9uOm5vb3AscmVtb3ZlT3B0aW9uOm5vb3B9O3JldHVybntyZXN0cmljdDonRScscHJpb3JpdHk6MTAwLGNvbXBpbGU6ZnVuY3Rpb24oZWxlbWVudCxhdHRyKXtpZihpc1VuZGVmaW5lZChhdHRyLnZhbHVlKSl7dmFyIGludGVycG9sYXRlRm49JGludGVycG9sYXRlKGVsZW1lbnQudGV4dCgpLHRydWUpO2lmKCFpbnRlcnBvbGF0ZUZuKXthdHRyLiRzZXQoJ3ZhbHVlJyxlbGVtZW50LnRleHQoKSk7fX0KcmV0dXJuIGZ1bmN0aW9uKHNjb3BlLGVsZW1lbnQsYXR0cil7dmFyIHNlbGVjdEN0cmxOYW1lPSckc2VsZWN0Q29udHJvbGxlcicscGFyZW50PWVsZW1lbnQucGFyZW50KCksc2VsZWN0Q3RybD1wYXJlbnQuZGF0YShzZWxlY3RDdHJsTmFtZSl8fHBhcmVudC5wYXJlbnQoKS5kYXRhKHNlbGVjdEN0cmxOYW1lKTtpZihzZWxlY3RDdHJsJiZzZWxlY3RDdHJsLmRhdGFib3VuZCl7ZWxlbWVudC5wcm9wKCdzZWxlY3RlZCcsZmFsc2UpO31lbHNle3NlbGVjdEN0cmw9bnVsbFNlbGVjdEN0cmw7fQppZihpbnRlcnBvbGF0ZUZuKXtzY29wZS4kd2F0Y2goaW50ZXJwb2xhdGVGbixmdW5jdGlvbiBpbnRlcnBvbGF0ZVdhdGNoQWN0aW9uKG5ld1ZhbCxvbGRWYWwpe2F0dHIuJHNldCgndmFsdWUnLG5ld1ZhbCk7aWYobmV3VmFsIT09b2xkVmFsKXNlbGVjdEN0cmwucmVtb3ZlT3B0aW9uKG9sZFZhbCk7c2VsZWN0Q3RybC5hZGRPcHRpb24obmV3VmFsKTt9KTt9ZWxzZXtzZWxlY3RDdHJsLmFkZE9wdGlvbihhdHRyLnZhbHVlKTt9CmVsZW1lbnQub24oJyRkZXN0cm95JyxmdW5jdGlvbigpe3NlbGVjdEN0cmwucmVtb3ZlT3B0aW9uKGF0dHIudmFsdWUpO30pO307fX07fV07dmFyIHN0eWxlRGlyZWN0aXZlPXZhbHVlRm4oe3Jlc3RyaWN0OidFJyx0ZXJtaW5hbDp0cnVlfSk7aWYod2luZG93LmFuZ3VsYXIuYm9vdHN0cmFwKXtjb25zb2xlLmxvZygnV0FSTklORzogVHJpZWQgdG8gbG9hZCBhbmd1bGFyIG1vcmUgdGhhbiBvbmNlLicpO3JldHVybjt9CmJpbmRKUXVlcnkoKTtwdWJsaXNoRXh0ZXJuYWxBUEkoYW5ndWxhcik7anFMaXRlKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpe2FuZ3VsYXJJbml0KGRvY3VtZW50LGJvb3RzdHJhcCk7fSk7fSkod2luZG93LGRvY3VtZW50KTshd2luZG93LmFuZ3VsYXIuJCRjc3AoKSYmd2luZG93LmFuZ3VsYXIuZWxlbWVudChkb2N1bWVudCkuZmluZCgnaGVhZCcpLnByZXBlbmQoJzxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+QGNoYXJzZXQgIlVURi04IjtbbmdcXDpjbG9ha10sW25nLWNsb2FrXSxbZGF0YS1uZy1jbG9ha10sW3gtbmctY2xvYWtdLC5uZy1jbG9haywueC1uZy1jbG9haywubmctaGlkZXtkaXNwbGF5Om5vbmUgIWltcG9ydGFudDt9bmdcXDpmb3Jte2Rpc3BsYXk6YmxvY2s7fS5uZy1hbmltYXRlLWJsb2NrLXRyYW5zaXRpb25ze3RyYW5zaXRpb246MHMgYWxsIWltcG9ydGFudDstd2Via2l0LXRyYW5zaXRpb246MHMgYWxsIWltcG9ydGFudDt9Lm5nLWhpZGUtYWRkLWFjdGl2ZSwubmctaGlkZS1yZW1vdmV7ZGlzcGxheTpibG9jayFpbXBvcnRhbnQ7fTwvc3R5bGU+Jyk7fSkuY2FsbCh0aGlzLHJlcXVpcmUoIm9NZnBBbiIpLHR5cGVvZiBzZWxmIT09InVuZGVmaW5lZCI/c2VsZjp0eXBlb2Ygd2luZG93IT09InVuZGVmaW5lZCI/d2luZG93Ont9LHJlcXVpcmUoImJ1ZmZlciIpLkJ1ZmZlcixhcmd1bWVudHNbM10sYXJndW1lbnRzWzRdLGFyZ3VtZW50c1s1XSxhcmd1bWVudHNbNl0sIi8uLi8uLi9ub2RlX21vZHVsZXMvYW5ndWxhci9saWIvYW5ndWxhci5qcyIsIi8uLi8uLi9ub2RlX21vZHVsZXMvYW5ndWxhci9saWIiKX0seyJidWZmZXIiOjQsIm9NZnBBbiI6N31dLDQ6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpeyhmdW5jdGlvbihwcm9jZXNzLGdsb2JhbCxCdWZmZXIsX19hcmd1bWVudDAsX19hcmd1bWVudDEsX19hcmd1bWVudDIsX19hcmd1bWVudDMsX19maWxlbmFtZSxfX2Rpcm5hbWUpe3ZhciBiYXNlNjQ9cmVxdWlyZSgnYmFzZTY0LWpzJykKdmFyIGllZWU3NTQ9cmVxdWlyZSgnaWVlZTc1NCcpCmV4cG9ydHMuQnVmZmVyPUJ1ZmZlcgpleHBvcnRzLlNsb3dCdWZmZXI9QnVmZmVyCmV4cG9ydHMuSU5TUEVDVF9NQVhfQllURVM9NTAKQnVmZmVyLnBvb2xTaXplPTgxOTIKQnVmZmVyLl91c2VUeXBlZEFycmF5cz0oZnVuY3Rpb24oKXt0cnl7dmFyIGJ1Zj1uZXcgQXJyYXlCdWZmZXIoMCkKdmFyIGFycj1uZXcgVWludDhBcnJheShidWYpCmFyci5mb289ZnVuY3Rpb24oKXtyZXR1cm4gNDJ9CnJldHVybiA0Mj09PWFyci5mb28oKSYmdHlwZW9mIGFyci5zdWJhcnJheT09PSdmdW5jdGlvbid9Y2F0Y2goZSl7cmV0dXJuIGZhbHNlfX0pKCkKZnVuY3Rpb24gQnVmZmVyKHN1YmplY3QsZW5jb2Rpbmcsbm9aZXJvKXtpZighKHRoaXMgaW5zdGFuY2VvZiBCdWZmZXIpKQpyZXR1cm4gbmV3IEJ1ZmZlcihzdWJqZWN0LGVuY29kaW5nLG5vWmVybykKdmFyIHR5cGU9dHlwZW9mIHN1YmplY3QKaWYoZW5jb2Rpbmc9PT0nYmFzZTY0JyYmdHlwZT09PSdzdHJpbmcnKXtzdWJqZWN0PXN0cmluZ3RyaW0oc3ViamVjdCkKd2hpbGUoc3ViamVjdC5sZW5ndGglNCE9PTApe3N1YmplY3Q9c3ViamVjdCsnPSd9fQp2YXIgbGVuZ3RoCmlmKHR5cGU9PT0nbnVtYmVyJykKbGVuZ3RoPWNvZXJjZShzdWJqZWN0KQplbHNlIGlmKHR5cGU9PT0nc3RyaW5nJykKbGVuZ3RoPUJ1ZmZlci5ieXRlTGVuZ3RoKHN1YmplY3QsZW5jb2RpbmcpCmVsc2UgaWYodHlwZT09PSdvYmplY3QnKQpsZW5ndGg9Y29lcmNlKHN1YmplY3QubGVuZ3RoKQplbHNlCnRocm93IG5ldyBFcnJvcignRmlyc3QgYXJndW1lbnQgbmVlZHMgdG8gYmUgYSBudW1iZXIsIGFycmF5IG9yIHN0cmluZy4nKQp2YXIgYnVmCmlmKEJ1ZmZlci5fdXNlVHlwZWRBcnJheXMpe2J1Zj1CdWZmZXIuX2F1Z21lbnQobmV3IFVpbnQ4QXJyYXkobGVuZ3RoKSl9ZWxzZXtidWY9dGhpcwpidWYubGVuZ3RoPWxlbmd0aApidWYuX2lzQnVmZmVyPXRydWV9CnZhciBpCmlmKEJ1ZmZlci5fdXNlVHlwZWRBcnJheXMmJnR5cGVvZiBzdWJqZWN0LmJ5dGVMZW5ndGg9PT0nbnVtYmVyJyl7YnVmLl9zZXQoc3ViamVjdCl9ZWxzZSBpZihpc0FycmF5aXNoKHN1YmplY3QpKXtmb3IoaT0wO2k8bGVuZ3RoO2krKyl7aWYoQnVmZmVyLmlzQnVmZmVyKHN1YmplY3QpKQpidWZbaV09c3ViamVjdC5yZWFkVUludDgoaSkKZWxzZQpidWZbaV09c3ViamVjdFtpXX19ZWxzZSBpZih0eXBlPT09J3N0cmluZycpe2J1Zi53cml0ZShzdWJqZWN0LDAsZW5jb2RpbmcpfWVsc2UgaWYodHlwZT09PSdudW1iZXInJiYhQnVmZmVyLl91c2VUeXBlZEFycmF5cyYmIW5vWmVybyl7Zm9yKGk9MDtpPGxlbmd0aDtpKyspe2J1ZltpXT0wfX0KcmV0dXJuIGJ1Zn0KQnVmZmVyLmlzRW5jb2Rpbmc9ZnVuY3Rpb24oZW5jb2Rpbmcpe3N3aXRjaChTdHJpbmcoZW5jb2RpbmcpLnRvTG93ZXJDYXNlKCkpe2Nhc2UnaGV4JzpjYXNlJ3V0ZjgnOmNhc2UndXRmLTgnOmNhc2UnYXNjaWknOmNhc2UnYmluYXJ5JzpjYXNlJ2Jhc2U2NCc6Y2FzZSdyYXcnOmNhc2UndWNzMic6Y2FzZSd1Y3MtMic6Y2FzZSd1dGYxNmxlJzpjYXNlJ3V0Zi0xNmxlJzpyZXR1cm4gdHJ1ZQpkZWZhdWx0OnJldHVybiBmYWxzZX19CkJ1ZmZlci5pc0J1ZmZlcj1mdW5jdGlvbihiKXtyZXR1cm4hIShiIT09bnVsbCYmYiE9PXVuZGVmaW5lZCYmYi5faXNCdWZmZXIpfQpCdWZmZXIuYnl0ZUxlbmd0aD1mdW5jdGlvbihzdHIsZW5jb2Rpbmcpe3ZhciByZXQKc3RyPXN0cisnJwpzd2l0Y2goZW5jb2Rpbmd8fCd1dGY4Jyl7Y2FzZSdoZXgnOnJldD1zdHIubGVuZ3RoLzIKYnJlYWsKY2FzZSd1dGY4JzpjYXNlJ3V0Zi04JzpyZXQ9dXRmOFRvQnl0ZXMoc3RyKS5sZW5ndGgKYnJlYWsKY2FzZSdhc2NpaSc6Y2FzZSdiaW5hcnknOmNhc2UncmF3JzpyZXQ9c3RyLmxlbmd0aApicmVhawpjYXNlJ2Jhc2U2NCc6cmV0PWJhc2U2NFRvQnl0ZXMoc3RyKS5sZW5ndGgKYnJlYWsKY2FzZSd1Y3MyJzpjYXNlJ3Vjcy0yJzpjYXNlJ3V0ZjE2bGUnOmNhc2UndXRmLTE2bGUnOnJldD1zdHIubGVuZ3RoKjIKYnJlYWsKZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoJ1Vua25vd24gZW5jb2RpbmcnKX0KcmV0dXJuIHJldH0KQnVmZmVyLmNvbmNhdD1mdW5jdGlvbihsaXN0LHRvdGFsTGVuZ3RoKXthc3NlcnQoaXNBcnJheShsaXN0KSwnVXNhZ2U6IEJ1ZmZlci5jb25jYXQobGlzdCwgW3RvdGFsTGVuZ3RoXSlcbicrJ2xpc3Qgc2hvdWxkIGJlIGFuIEFycmF5LicpCmlmKGxpc3QubGVuZ3RoPT09MCl7cmV0dXJuIG5ldyBCdWZmZXIoMCl9ZWxzZSBpZihsaXN0Lmxlbmd0aD09PTEpe3JldHVybiBsaXN0WzBdfQp2YXIgaQppZih0eXBlb2YgdG90YWxMZW5ndGghPT0nbnVtYmVyJyl7dG90YWxMZW5ndGg9MApmb3IoaT0wO2k8bGlzdC5sZW5ndGg7aSsrKXt0b3RhbExlbmd0aCs9bGlzdFtpXS5sZW5ndGh9fQp2YXIgYnVmPW5ldyBCdWZmZXIodG90YWxMZW5ndGgpCnZhciBwb3M9MApmb3IoaT0wO2k8bGlzdC5sZW5ndGg7aSsrKXt2YXIgaXRlbT1saXN0W2ldCml0ZW0uY29weShidWYscG9zKQpwb3MrPWl0ZW0ubGVuZ3RofQpyZXR1cm4gYnVmfQpmdW5jdGlvbiBfaGV4V3JpdGUoYnVmLHN0cmluZyxvZmZzZXQsbGVuZ3RoKXtvZmZzZXQ9TnVtYmVyKG9mZnNldCl8fDAKdmFyIHJlbWFpbmluZz1idWYubGVuZ3RoLW9mZnNldAppZighbGVuZ3RoKXtsZW5ndGg9cmVtYWluaW5nfWVsc2V7bGVuZ3RoPU51bWJlcihsZW5ndGgpCmlmKGxlbmd0aD5yZW1haW5pbmcpe2xlbmd0aD1yZW1haW5pbmd9fQp2YXIgc3RyTGVuPXN0cmluZy5sZW5ndGgKYXNzZXJ0KHN0ckxlbiUyPT09MCwnSW52YWxpZCBoZXggc3RyaW5nJykKaWYobGVuZ3RoPnN0ckxlbi8yKXtsZW5ndGg9c3RyTGVuLzJ9CmZvcih2YXIgaT0wO2k8bGVuZ3RoO2krKyl7dmFyIGJ5dGU9cGFyc2VJbnQoc3RyaW5nLnN1YnN0cihpKjIsMiksMTYpCmFzc2VydCghaXNOYU4oYnl0ZSksJ0ludmFsaWQgaGV4IHN0cmluZycpCmJ1ZltvZmZzZXQraV09Ynl0ZX0KQnVmZmVyLl9jaGFyc1dyaXR0ZW49aSoyCnJldHVybiBpfQpmdW5jdGlvbiBfdXRmOFdyaXRlKGJ1ZixzdHJpbmcsb2Zmc2V0LGxlbmd0aCl7dmFyIGNoYXJzV3JpdHRlbj1CdWZmZXIuX2NoYXJzV3JpdHRlbj1ibGl0QnVmZmVyKHV0ZjhUb0J5dGVzKHN0cmluZyksYnVmLG9mZnNldCxsZW5ndGgpCnJldHVybiBjaGFyc1dyaXR0ZW59CmZ1bmN0aW9uIF9hc2NpaVdyaXRlKGJ1ZixzdHJpbmcsb2Zmc2V0LGxlbmd0aCl7dmFyIGNoYXJzV3JpdHRlbj1CdWZmZXIuX2NoYXJzV3JpdHRlbj1ibGl0QnVmZmVyKGFzY2lpVG9CeXRlcyhzdHJpbmcpLGJ1ZixvZmZzZXQsbGVuZ3RoKQpyZXR1cm4gY2hhcnNXcml0dGVufQpmdW5jdGlvbiBfYmluYXJ5V3JpdGUoYnVmLHN0cmluZyxvZmZzZXQsbGVuZ3RoKXtyZXR1cm4gX2FzY2lpV3JpdGUoYnVmLHN0cmluZyxvZmZzZXQsbGVuZ3RoKX0KZnVuY3Rpb24gX2Jhc2U2NFdyaXRlKGJ1ZixzdHJpbmcsb2Zmc2V0LGxlbmd0aCl7dmFyIGNoYXJzV3JpdHRlbj1CdWZmZXIuX2NoYXJzV3JpdHRlbj1ibGl0QnVmZmVyKGJhc2U2NFRvQnl0ZXMoc3RyaW5nKSxidWYsb2Zmc2V0LGxlbmd0aCkKcmV0dXJuIGNoYXJzV3JpdHRlbn0KZnVuY3Rpb24gX3V0ZjE2bGVXcml0ZShidWYsc3RyaW5nLG9mZnNldCxsZW5ndGgpe3ZhciBjaGFyc1dyaXR0ZW49QnVmZmVyLl9jaGFyc1dyaXR0ZW49YmxpdEJ1ZmZlcih1dGYxNmxlVG9CeXRlcyhzdHJpbmcpLGJ1ZixvZmZzZXQsbGVuZ3RoKQpyZXR1cm4gY2hhcnNXcml0dGVufQpCdWZmZXIucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKHN0cmluZyxvZmZzZXQsbGVuZ3RoLGVuY29kaW5nKXtpZihpc0Zpbml0ZShvZmZzZXQpKXtpZighaXNGaW5pdGUobGVuZ3RoKSl7ZW5jb2Rpbmc9bGVuZ3RoCmxlbmd0aD11bmRlZmluZWR9fWVsc2V7dmFyIHN3YXA9ZW5jb2RpbmcKZW5jb2Rpbmc9b2Zmc2V0Cm9mZnNldD1sZW5ndGgKbGVuZ3RoPXN3YXB9Cm9mZnNldD1OdW1iZXIob2Zmc2V0KXx8MAp2YXIgcmVtYWluaW5nPXRoaXMubGVuZ3RoLW9mZnNldAppZighbGVuZ3RoKXtsZW5ndGg9cmVtYWluaW5nfWVsc2V7bGVuZ3RoPU51bWJlcihsZW5ndGgpCmlmKGxlbmd0aD5yZW1haW5pbmcpe2xlbmd0aD1yZW1haW5pbmd9fQplbmNvZGluZz1TdHJpbmcoZW5jb2Rpbmd8fCd1dGY4JykudG9Mb3dlckNhc2UoKQp2YXIgcmV0CnN3aXRjaChlbmNvZGluZyl7Y2FzZSdoZXgnOnJldD1faGV4V3JpdGUodGhpcyxzdHJpbmcsb2Zmc2V0LGxlbmd0aCkKYnJlYWsKY2FzZSd1dGY4JzpjYXNlJ3V0Zi04JzpyZXQ9X3V0ZjhXcml0ZSh0aGlzLHN0cmluZyxvZmZzZXQsbGVuZ3RoKQpicmVhawpjYXNlJ2FzY2lpJzpyZXQ9X2FzY2lpV3JpdGUodGhpcyxzdHJpbmcsb2Zmc2V0LGxlbmd0aCkKYnJlYWsKY2FzZSdiaW5hcnknOnJldD1fYmluYXJ5V3JpdGUodGhpcyxzdHJpbmcsb2Zmc2V0LGxlbmd0aCkKYnJlYWsKY2FzZSdiYXNlNjQnOnJldD1fYmFzZTY0V3JpdGUodGhpcyxzdHJpbmcsb2Zmc2V0LGxlbmd0aCkKYnJlYWsKY2FzZSd1Y3MyJzpjYXNlJ3Vjcy0yJzpjYXNlJ3V0ZjE2bGUnOmNhc2UndXRmLTE2bGUnOnJldD1fdXRmMTZsZVdyaXRlKHRoaXMsc3RyaW5nLG9mZnNldCxsZW5ndGgpCmJyZWFrCmRlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKCdVbmtub3duIGVuY29kaW5nJyl9CnJldHVybiByZXR9CkJ1ZmZlci5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oZW5jb2Rpbmcsc3RhcnQsZW5kKXt2YXIgc2VsZj10aGlzCmVuY29kaW5nPVN0cmluZyhlbmNvZGluZ3x8J3V0ZjgnKS50b0xvd2VyQ2FzZSgpCnN0YXJ0PU51bWJlcihzdGFydCl8fDAKZW5kPShlbmQhPT11bmRlZmluZWQpP051bWJlcihlbmQpOmVuZD1zZWxmLmxlbmd0aAppZihlbmQ9PT1zdGFydCkKcmV0dXJuJycKdmFyIHJldApzd2l0Y2goZW5jb2Rpbmcpe2Nhc2UnaGV4JzpyZXQ9X2hleFNsaWNlKHNlbGYsc3RhcnQsZW5kKQpicmVhawpjYXNlJ3V0ZjgnOmNhc2UndXRmLTgnOnJldD1fdXRmOFNsaWNlKHNlbGYsc3RhcnQsZW5kKQpicmVhawpjYXNlJ2FzY2lpJzpyZXQ9X2FzY2lpU2xpY2Uoc2VsZixzdGFydCxlbmQpCmJyZWFrCmNhc2UnYmluYXJ5JzpyZXQ9X2JpbmFyeVNsaWNlKHNlbGYsc3RhcnQsZW5kKQpicmVhawpjYXNlJ2Jhc2U2NCc6cmV0PV9iYXNlNjRTbGljZShzZWxmLHN0YXJ0LGVuZCkKYnJlYWsKY2FzZSd1Y3MyJzpjYXNlJ3Vjcy0yJzpjYXNlJ3V0ZjE2bGUnOmNhc2UndXRmLTE2bGUnOnJldD1fdXRmMTZsZVNsaWNlKHNlbGYsc3RhcnQsZW5kKQpicmVhawpkZWZhdWx0OnRocm93IG5ldyBFcnJvcignVW5rbm93biBlbmNvZGluZycpfQpyZXR1cm4gcmV0fQpCdWZmZXIucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybnt0eXBlOidCdWZmZXInLGRhdGE6QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwodGhpcy5fYXJyfHx0aGlzLDApfX0KQnVmZmVyLnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKHRhcmdldCx0YXJnZXRfc3RhcnQsc3RhcnQsZW5kKXt2YXIgc291cmNlPXRoaXMKaWYoIXN0YXJ0KXN0YXJ0PTAKaWYoIWVuZCYmZW5kIT09MCllbmQ9dGhpcy5sZW5ndGgKaWYoIXRhcmdldF9zdGFydCl0YXJnZXRfc3RhcnQ9MAppZihlbmQ9PT1zdGFydClyZXR1cm4KaWYodGFyZ2V0Lmxlbmd0aD09PTB8fHNvdXJjZS5sZW5ndGg9PT0wKXJldHVybgphc3NlcnQoZW5kPj1zdGFydCwnc291cmNlRW5kIDwgc291cmNlU3RhcnQnKQphc3NlcnQodGFyZ2V0X3N0YXJ0Pj0wJiZ0YXJnZXRfc3RhcnQ8dGFyZ2V0Lmxlbmd0aCwndGFyZ2V0U3RhcnQgb3V0IG9mIGJvdW5kcycpCmFzc2VydChzdGFydD49MCYmc3RhcnQ8c291cmNlLmxlbmd0aCwnc291cmNlU3RhcnQgb3V0IG9mIGJvdW5kcycpCmFzc2VydChlbmQ+PTAmJmVuZDw9c291cmNlLmxlbmd0aCwnc291cmNlRW5kIG91dCBvZiBib3VuZHMnKQppZihlbmQ+dGhpcy5sZW5ndGgpCmVuZD10aGlzLmxlbmd0aAppZih0YXJnZXQubGVuZ3RoLXRhcmdldF9zdGFydDxlbmQtc3RhcnQpCmVuZD10YXJnZXQubGVuZ3RoLXRhcmdldF9zdGFydCtzdGFydAp2YXIgbGVuPWVuZC1zdGFydAppZihsZW48MTAwfHwhQnVmZmVyLl91c2VUeXBlZEFycmF5cyl7Zm9yKHZhciBpPTA7aTxsZW47aSsrKQp0YXJnZXRbaSt0YXJnZXRfc3RhcnRdPXRoaXNbaStzdGFydF19ZWxzZXt0YXJnZXQuX3NldCh0aGlzLnN1YmFycmF5KHN0YXJ0LHN0YXJ0K2xlbiksdGFyZ2V0X3N0YXJ0KX19CmZ1bmN0aW9uIF9iYXNlNjRTbGljZShidWYsc3RhcnQsZW5kKXtpZihzdGFydD09PTAmJmVuZD09PWJ1Zi5sZW5ndGgpe3JldHVybiBiYXNlNjQuZnJvbUJ5dGVBcnJheShidWYpfWVsc2V7cmV0dXJuIGJhc2U2NC5mcm9tQnl0ZUFycmF5KGJ1Zi5zbGljZShzdGFydCxlbmQpKX19CmZ1bmN0aW9uIF91dGY4U2xpY2UoYnVmLHN0YXJ0LGVuZCl7dmFyIHJlcz0nJwp2YXIgdG1wPScnCmVuZD1NYXRoLm1pbihidWYubGVuZ3RoLGVuZCkKZm9yKHZhciBpPXN0YXJ0O2k8ZW5kO2krKyl7aWYoYnVmW2ldPD0weDdGKXtyZXMrPWRlY29kZVV0ZjhDaGFyKHRtcCkrU3RyaW5nLmZyb21DaGFyQ29kZShidWZbaV0pCnRtcD0nJ31lbHNle3RtcCs9JyUnK2J1ZltpXS50b1N0cmluZygxNil9fQpyZXR1cm4gcmVzK2RlY29kZVV0ZjhDaGFyKHRtcCl9CmZ1bmN0aW9uIF9hc2NpaVNsaWNlKGJ1ZixzdGFydCxlbmQpe3ZhciByZXQ9JycKZW5kPU1hdGgubWluKGJ1Zi5sZW5ndGgsZW5kKQpmb3IodmFyIGk9c3RhcnQ7aTxlbmQ7aSsrKQpyZXQrPVN0cmluZy5mcm9tQ2hhckNvZGUoYnVmW2ldKQpyZXR1cm4gcmV0fQpmdW5jdGlvbiBfYmluYXJ5U2xpY2UoYnVmLHN0YXJ0LGVuZCl7cmV0dXJuIF9hc2NpaVNsaWNlKGJ1ZixzdGFydCxlbmQpfQpmdW5jdGlvbiBfaGV4U2xpY2UoYnVmLHN0YXJ0LGVuZCl7dmFyIGxlbj1idWYubGVuZ3RoCmlmKCFzdGFydHx8c3RhcnQ8MClzdGFydD0wCmlmKCFlbmR8fGVuZDwwfHxlbmQ+bGVuKWVuZD1sZW4KdmFyIG91dD0nJwpmb3IodmFyIGk9c3RhcnQ7aTxlbmQ7aSsrKXtvdXQrPXRvSGV4KGJ1ZltpXSl9CnJldHVybiBvdXR9CmZ1bmN0aW9uIF91dGYxNmxlU2xpY2UoYnVmLHN0YXJ0LGVuZCl7dmFyIGJ5dGVzPWJ1Zi5zbGljZShzdGFydCxlbmQpCnZhciByZXM9JycKZm9yKHZhciBpPTA7aTxieXRlcy5sZW5ndGg7aSs9Mil7cmVzKz1TdHJpbmcuZnJvbUNoYXJDb2RlKGJ5dGVzW2ldK2J5dGVzW2krMV0qMjU2KX0KcmV0dXJuIHJlc30KQnVmZmVyLnByb3RvdHlwZS5zbGljZT1mdW5jdGlvbihzdGFydCxlbmQpe3ZhciBsZW49dGhpcy5sZW5ndGgKc3RhcnQ9Y2xhbXAoc3RhcnQsbGVuLDApCmVuZD1jbGFtcChlbmQsbGVuLGxlbikKaWYoQnVmZmVyLl91c2VUeXBlZEFycmF5cyl7cmV0dXJuIEJ1ZmZlci5fYXVnbWVudCh0aGlzLnN1YmFycmF5KHN0YXJ0LGVuZCkpfWVsc2V7dmFyIHNsaWNlTGVuPWVuZC1zdGFydAp2YXIgbmV3QnVmPW5ldyBCdWZmZXIoc2xpY2VMZW4sdW5kZWZpbmVkLHRydWUpCmZvcih2YXIgaT0wO2k8c2xpY2VMZW47aSsrKXtuZXdCdWZbaV09dGhpc1tpK3N0YXJ0XX0KcmV0dXJuIG5ld0J1Zn19CkJ1ZmZlci5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKG9mZnNldCl7Y29uc29sZS5sb2coJy5nZXQoKSBpcyBkZXByZWNhdGVkLiBBY2Nlc3MgdXNpbmcgYXJyYXkgaW5kZXhlcyBpbnN0ZWFkLicpCnJldHVybiB0aGlzLnJlYWRVSW50OChvZmZzZXQpfQpCdWZmZXIucHJvdG90eXBlLnNldD1mdW5jdGlvbih2LG9mZnNldCl7Y29uc29sZS5sb2coJy5zZXQoKSBpcyBkZXByZWNhdGVkLiBBY2Nlc3MgdXNpbmcgYXJyYXkgaW5kZXhlcyBpbnN0ZWFkLicpCnJldHVybiB0aGlzLndyaXRlVUludDgodixvZmZzZXQpfQpCdWZmZXIucHJvdG90eXBlLnJlYWRVSW50OD1mdW5jdGlvbihvZmZzZXQsbm9Bc3NlcnQpe2lmKCFub0Fzc2VydCl7YXNzZXJ0KG9mZnNldCE9PXVuZGVmaW5lZCYmb2Zmc2V0IT09bnVsbCwnbWlzc2luZyBvZmZzZXQnKQphc3NlcnQob2Zmc2V0PHRoaXMubGVuZ3RoLCdUcnlpbmcgdG8gcmVhZCBiZXlvbmQgYnVmZmVyIGxlbmd0aCcpfQppZihvZmZzZXQ+PXRoaXMubGVuZ3RoKQpyZXR1cm4KcmV0dXJuIHRoaXNbb2Zmc2V0XX0KZnVuY3Rpb24gX3JlYWRVSW50MTYoYnVmLG9mZnNldCxsaXR0bGVFbmRpYW4sbm9Bc3NlcnQpe2lmKCFub0Fzc2VydCl7YXNzZXJ0KHR5cGVvZiBsaXR0bGVFbmRpYW49PT0nYm9vbGVhbicsJ21pc3Npbmcgb3IgaW52YWxpZCBlbmRpYW4nKQphc3NlcnQob2Zmc2V0IT09dW5kZWZpbmVkJiZvZmZzZXQhPT1udWxsLCdtaXNzaW5nIG9mZnNldCcpCmFzc2VydChvZmZzZXQrMTxidWYubGVuZ3RoLCdUcnlpbmcgdG8gcmVhZCBiZXlvbmQgYnVmZmVyIGxlbmd0aCcpfQp2YXIgbGVuPWJ1Zi5sZW5ndGgKaWYob2Zmc2V0Pj1sZW4pCnJldHVybgp2YXIgdmFsCmlmKGxpdHRsZUVuZGlhbil7dmFsPWJ1ZltvZmZzZXRdCmlmKG9mZnNldCsxPGxlbikKdmFsfD1idWZbb2Zmc2V0KzFdPDw4fWVsc2V7dmFsPWJ1ZltvZmZzZXRdPDw4CmlmKG9mZnNldCsxPGxlbikKdmFsfD1idWZbb2Zmc2V0KzFdfQpyZXR1cm4gdmFsfQpCdWZmZXIucHJvdG90eXBlLnJlYWRVSW50MTZMRT1mdW5jdGlvbihvZmZzZXQsbm9Bc3NlcnQpe3JldHVybiBfcmVhZFVJbnQxNih0aGlzLG9mZnNldCx0cnVlLG5vQXNzZXJ0KX0KQnVmZmVyLnByb3RvdHlwZS5yZWFkVUludDE2QkU9ZnVuY3Rpb24ob2Zmc2V0LG5vQXNzZXJ0KXtyZXR1cm4gX3JlYWRVSW50MTYodGhpcyxvZmZzZXQsZmFsc2Usbm9Bc3NlcnQpfQpmdW5jdGlvbiBfcmVhZFVJbnQzMihidWYsb2Zmc2V0LGxpdHRsZUVuZGlhbixub0Fzc2VydCl7aWYoIW5vQXNzZXJ0KXthc3NlcnQodHlwZW9mIGxpdHRsZUVuZGlhbj09PSdib29sZWFuJywnbWlzc2luZyBvciBpbnZhbGlkIGVuZGlhbicpCmFzc2VydChvZmZzZXQhPT11bmRlZmluZWQmJm9mZnNldCE9PW51bGwsJ21pc3Npbmcgb2Zmc2V0JykKYXNzZXJ0KG9mZnNldCszPGJ1Zi5sZW5ndGgsJ1RyeWluZyB0byByZWFkIGJleW9uZCBidWZmZXIgbGVuZ3RoJyl9CnZhciBsZW49YnVmLmxlbmd0aAppZihvZmZzZXQ+PWxlbikKcmV0dXJuCnZhciB2YWwKaWYobGl0dGxlRW5kaWFuKXtpZihvZmZzZXQrMjxsZW4pCnZhbD1idWZbb2Zmc2V0KzJdPDwxNgppZihvZmZzZXQrMTxsZW4pCnZhbHw9YnVmW29mZnNldCsxXTw8OAp2YWx8PWJ1ZltvZmZzZXRdCmlmKG9mZnNldCszPGxlbikKdmFsPXZhbCsoYnVmW29mZnNldCszXTw8MjQ+Pj4wKX1lbHNle2lmKG9mZnNldCsxPGxlbikKdmFsPWJ1ZltvZmZzZXQrMV08PDE2CmlmKG9mZnNldCsyPGxlbikKdmFsfD1idWZbb2Zmc2V0KzJdPDw4CmlmKG9mZnNldCszPGxlbikKdmFsfD1idWZbb2Zmc2V0KzNdCnZhbD12YWwrKGJ1ZltvZmZzZXRdPDwyND4+PjApfQpyZXR1cm4gdmFsfQpCdWZmZXIucHJvdG90eXBlLnJlYWRVSW50MzJMRT1mdW5jdGlvbihvZmZzZXQsbm9Bc3NlcnQpe3JldHVybiBfcmVhZFVJbnQzMih0aGlzLG9mZnNldCx0cnVlLG5vQXNzZXJ0KX0KQnVmZmVyLnByb3RvdHlwZS5yZWFkVUludDMyQkU9ZnVuY3Rpb24ob2Zmc2V0LG5vQXNzZXJ0KXtyZXR1cm4gX3JlYWRVSW50MzIodGhpcyxvZmZzZXQsZmFsc2Usbm9Bc3NlcnQpfQpCdWZmZXIucHJvdG90eXBlLnJlYWRJbnQ4PWZ1bmN0aW9uKG9mZnNldCxub0Fzc2VydCl7aWYoIW5vQXNzZXJ0KXthc3NlcnQob2Zmc2V0IT09dW5kZWZpbmVkJiZvZmZzZXQhPT1udWxsLCdtaXNzaW5nIG9mZnNldCcpCmFzc2VydChvZmZzZXQ8dGhpcy5sZW5ndGgsJ1RyeWluZyB0byByZWFkIGJleW9uZCBidWZmZXIgbGVuZ3RoJyl9CmlmKG9mZnNldD49dGhpcy5sZW5ndGgpCnJldHVybgp2YXIgbmVnPXRoaXNbb2Zmc2V0XSYweDgwCmlmKG5lZykKcmV0dXJuKDB4ZmYtdGhpc1tvZmZzZXRdKzEpKi0xCmVsc2UKcmV0dXJuIHRoaXNbb2Zmc2V0XX0KZnVuY3Rpb24gX3JlYWRJbnQxNihidWYsb2Zmc2V0LGxpdHRsZUVuZGlhbixub0Fzc2VydCl7aWYoIW5vQXNzZXJ0KXthc3NlcnQodHlwZW9mIGxpdHRsZUVuZGlhbj09PSdib29sZWFuJywnbWlzc2luZyBvciBpbnZhbGlkIGVuZGlhbicpCmFzc2VydChvZmZzZXQhPT11bmRlZmluZWQmJm9mZnNldCE9PW51bGwsJ21pc3Npbmcgb2Zmc2V0JykKYXNzZXJ0KG9mZnNldCsxPGJ1Zi5sZW5ndGgsJ1RyeWluZyB0byByZWFkIGJleW9uZCBidWZmZXIgbGVuZ3RoJyl9CnZhciBsZW49YnVmLmxlbmd0aAppZihvZmZzZXQ+PWxlbikKcmV0dXJuCnZhciB2YWw9X3JlYWRVSW50MTYoYnVmLG9mZnNldCxsaXR0bGVFbmRpYW4sdHJ1ZSkKdmFyIG5lZz12YWwmMHg4MDAwCmlmKG5lZykKcmV0dXJuKDB4ZmZmZi12YWwrMSkqLTEKZWxzZQpyZXR1cm4gdmFsfQpCdWZmZXIucHJvdG90eXBlLnJlYWRJbnQxNkxFPWZ1bmN0aW9uKG9mZnNldCxub0Fzc2VydCl7cmV0dXJuIF9yZWFkSW50MTYodGhpcyxvZmZzZXQsdHJ1ZSxub0Fzc2VydCl9CkJ1ZmZlci5wcm90b3R5cGUucmVhZEludDE2QkU9ZnVuY3Rpb24ob2Zmc2V0LG5vQXNzZXJ0KXtyZXR1cm4gX3JlYWRJbnQxNih0aGlzLG9mZnNldCxmYWxzZSxub0Fzc2VydCl9CmZ1bmN0aW9uIF9yZWFkSW50MzIoYnVmLG9mZnNldCxsaXR0bGVFbmRpYW4sbm9Bc3NlcnQpe2lmKCFub0Fzc2VydCl7YXNzZXJ0KHR5cGVvZiBsaXR0bGVFbmRpYW49PT0nYm9vbGVhbicsJ21pc3Npbmcgb3IgaW52YWxpZCBlbmRpYW4nKQphc3NlcnQob2Zmc2V0IT09dW5kZWZpbmVkJiZvZmZzZXQhPT1udWxsLCdtaXNzaW5nIG9mZnNldCcpCmFzc2VydChvZmZzZXQrMzxidWYubGVuZ3RoLCdUcnlpbmcgdG8gcmVhZCBiZXlvbmQgYnVmZmVyIGxlbmd0aCcpfQp2YXIgbGVuPWJ1Zi5sZW5ndGgKaWYob2Zmc2V0Pj1sZW4pCnJldHVybgp2YXIgdmFsPV9yZWFkVUludDMyKGJ1ZixvZmZzZXQsbGl0dGxlRW5kaWFuLHRydWUpCnZhciBuZWc9dmFsJjB4ODAwMDAwMDAKaWYobmVnKQpyZXR1cm4oMHhmZmZmZmZmZi12YWwrMSkqLTEKZWxzZQpyZXR1cm4gdmFsfQpCdWZmZXIucHJvdG90eXBlLnJlYWRJbnQzMkxFPWZ1bmN0aW9uKG9mZnNldCxub0Fzc2VydCl7cmV0dXJuIF9yZWFkSW50MzIodGhpcyxvZmZzZXQsdHJ1ZSxub0Fzc2VydCl9CkJ1ZmZlci5wcm90b3R5cGUucmVhZEludDMyQkU9ZnVuY3Rpb24ob2Zmc2V0LG5vQXNzZXJ0KXtyZXR1cm4gX3JlYWRJbnQzMih0aGlzLG9mZnNldCxmYWxzZSxub0Fzc2VydCl9CmZ1bmN0aW9uIF9yZWFkRmxvYXQoYnVmLG9mZnNldCxsaXR0bGVFbmRpYW4sbm9Bc3NlcnQpe2lmKCFub0Fzc2VydCl7YXNzZXJ0KHR5cGVvZiBsaXR0bGVFbmRpYW49PT0nYm9vbGVhbicsJ21pc3Npbmcgb3IgaW52YWxpZCBlbmRpYW4nKQphc3NlcnQob2Zmc2V0KzM8YnVmLmxlbmd0aCwnVHJ5aW5nIHRvIHJlYWQgYmV5b25kIGJ1ZmZlciBsZW5ndGgnKX0KcmV0dXJuIGllZWU3NTQucmVhZChidWYsb2Zmc2V0LGxpdHRsZUVuZGlhbiwyMyw0KX0KQnVmZmVyLnByb3RvdHlwZS5yZWFkRmxvYXRMRT1mdW5jdGlvbihvZmZzZXQsbm9Bc3NlcnQpe3JldHVybiBfcmVhZEZsb2F0KHRoaXMsb2Zmc2V0LHRydWUsbm9Bc3NlcnQpfQpCdWZmZXIucHJvdG90eXBlLnJlYWRGbG9hdEJFPWZ1bmN0aW9uKG9mZnNldCxub0Fzc2VydCl7cmV0dXJuIF9yZWFkRmxvYXQodGhpcyxvZmZzZXQsZmFsc2Usbm9Bc3NlcnQpfQpmdW5jdGlvbiBfcmVhZERvdWJsZShidWYsb2Zmc2V0LGxpdHRsZUVuZGlhbixub0Fzc2VydCl7aWYoIW5vQXNzZXJ0KXthc3NlcnQodHlwZW9mIGxpdHRsZUVuZGlhbj09PSdib29sZWFuJywnbWlzc2luZyBvciBpbnZhbGlkIGVuZGlhbicpCmFzc2VydChvZmZzZXQrNzxidWYubGVuZ3RoLCdUcnlpbmcgdG8gcmVhZCBiZXlvbmQgYnVmZmVyIGxlbmd0aCcpfQpyZXR1cm4gaWVlZTc1NC5yZWFkKGJ1ZixvZmZzZXQsbGl0dGxlRW5kaWFuLDUyLDgpfQpCdWZmZXIucHJvdG90eXBlLnJlYWREb3VibGVMRT1mdW5jdGlvbihvZmZzZXQsbm9Bc3NlcnQpe3JldHVybiBfcmVhZERvdWJsZSh0aGlzLG9mZnNldCx0cnVlLG5vQXNzZXJ0KX0KQnVmZmVyLnByb3RvdHlwZS5yZWFkRG91YmxlQkU9ZnVuY3Rpb24ob2Zmc2V0LG5vQXNzZXJ0KXtyZXR1cm4gX3JlYWREb3VibGUodGhpcyxvZmZzZXQsZmFsc2Usbm9Bc3NlcnQpfQpCdWZmZXIucHJvdG90eXBlLndyaXRlVUludDg9ZnVuY3Rpb24odmFsdWUsb2Zmc2V0LG5vQXNzZXJ0KXtpZighbm9Bc3NlcnQpe2Fzc2VydCh2YWx1ZSE9PXVuZGVmaW5lZCYmdmFsdWUhPT1udWxsLCdtaXNzaW5nIHZhbHVlJykKYXNzZXJ0KG9mZnNldCE9PXVuZGVmaW5lZCYmb2Zmc2V0IT09bnVsbCwnbWlzc2luZyBvZmZzZXQnKQphc3NlcnQob2Zmc2V0PHRoaXMubGVuZ3RoLCd0cnlpbmcgdG8gd3JpdGUgYmV5b25kIGJ1ZmZlciBsZW5ndGgnKQp2ZXJpZnVpbnQodmFsdWUsMHhmZil9CmlmKG9mZnNldD49dGhpcy5sZW5ndGgpcmV0dXJuCnRoaXNbb2Zmc2V0XT12YWx1ZX0KZnVuY3Rpb24gX3dyaXRlVUludDE2KGJ1Zix2YWx1ZSxvZmZzZXQsbGl0dGxlRW5kaWFuLG5vQXNzZXJ0KXtpZighbm9Bc3NlcnQpe2Fzc2VydCh2YWx1ZSE9PXVuZGVmaW5lZCYmdmFsdWUhPT1udWxsLCdtaXNzaW5nIHZhbHVlJykKYXNzZXJ0KHR5cGVvZiBsaXR0bGVFbmRpYW49PT0nYm9vbGVhbicsJ21pc3Npbmcgb3IgaW52YWxpZCBlbmRpYW4nKQphc3NlcnQob2Zmc2V0IT09dW5kZWZpbmVkJiZvZmZzZXQhPT1udWxsLCdtaXNzaW5nIG9mZnNldCcpCmFzc2VydChvZmZzZXQrMTxidWYubGVuZ3RoLCd0cnlpbmcgdG8gd3JpdGUgYmV5b25kIGJ1ZmZlciBsZW5ndGgnKQp2ZXJpZnVpbnQodmFsdWUsMHhmZmZmKX0KdmFyIGxlbj1idWYubGVuZ3RoCmlmKG9mZnNldD49bGVuKQpyZXR1cm4KZm9yKHZhciBpPTAsaj1NYXRoLm1pbihsZW4tb2Zmc2V0LDIpO2k8ajtpKyspe2J1ZltvZmZzZXQraV09KHZhbHVlJigweGZmPDwoOCoobGl0dGxlRW5kaWFuP2k6MS1pKSkpKT4+PihsaXR0bGVFbmRpYW4/aToxLWkpKjh9fQpCdWZmZXIucHJvdG90eXBlLndyaXRlVUludDE2TEU9ZnVuY3Rpb24odmFsdWUsb2Zmc2V0LG5vQXNzZXJ0KXtfd3JpdGVVSW50MTYodGhpcyx2YWx1ZSxvZmZzZXQsdHJ1ZSxub0Fzc2VydCl9CkJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50MTZCRT1mdW5jdGlvbih2YWx1ZSxvZmZzZXQsbm9Bc3NlcnQpe193cml0ZVVJbnQxNih0aGlzLHZhbHVlLG9mZnNldCxmYWxzZSxub0Fzc2VydCl9CmZ1bmN0aW9uIF93cml0ZVVJbnQzMihidWYsdmFsdWUsb2Zmc2V0LGxpdHRsZUVuZGlhbixub0Fzc2VydCl7aWYoIW5vQXNzZXJ0KXthc3NlcnQodmFsdWUhPT11bmRlZmluZWQmJnZhbHVlIT09bnVsbCwnbWlzc2luZyB2YWx1ZScpCmFzc2VydCh0eXBlb2YgbGl0dGxlRW5kaWFuPT09J2Jvb2xlYW4nLCdtaXNzaW5nIG9yIGludmFsaWQgZW5kaWFuJykKYXNzZXJ0KG9mZnNldCE9PXVuZGVmaW5lZCYmb2Zmc2V0IT09bnVsbCwnbWlzc2luZyBvZmZzZXQnKQphc3NlcnQob2Zmc2V0KzM8YnVmLmxlbmd0aCwndHJ5aW5nIHRvIHdyaXRlIGJleW9uZCBidWZmZXIgbGVuZ3RoJykKdmVyaWZ1aW50KHZhbHVlLDB4ZmZmZmZmZmYpfQp2YXIgbGVuPWJ1Zi5sZW5ndGgKaWYob2Zmc2V0Pj1sZW4pCnJldHVybgpmb3IodmFyIGk9MCxqPU1hdGgubWluKGxlbi1vZmZzZXQsNCk7aTxqO2krKyl7YnVmW29mZnNldCtpXT0odmFsdWU+Pj4obGl0dGxlRW5kaWFuP2k6My1pKSo4KSYweGZmfX0KQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnQzMkxFPWZ1bmN0aW9uKHZhbHVlLG9mZnNldCxub0Fzc2VydCl7X3dyaXRlVUludDMyKHRoaXMsdmFsdWUsb2Zmc2V0LHRydWUsbm9Bc3NlcnQpfQpCdWZmZXIucHJvdG90eXBlLndyaXRlVUludDMyQkU9ZnVuY3Rpb24odmFsdWUsb2Zmc2V0LG5vQXNzZXJ0KXtfd3JpdGVVSW50MzIodGhpcyx2YWx1ZSxvZmZzZXQsZmFsc2Usbm9Bc3NlcnQpfQpCdWZmZXIucHJvdG90eXBlLndyaXRlSW50OD1mdW5jdGlvbih2YWx1ZSxvZmZzZXQsbm9Bc3NlcnQpe2lmKCFub0Fzc2VydCl7YXNzZXJ0KHZhbHVlIT09dW5kZWZpbmVkJiZ2YWx1ZSE9PW51bGwsJ21pc3NpbmcgdmFsdWUnKQphc3NlcnQob2Zmc2V0IT09dW5kZWZpbmVkJiZvZmZzZXQhPT1udWxsLCdtaXNzaW5nIG9mZnNldCcpCmFzc2VydChvZmZzZXQ8dGhpcy5sZW5ndGgsJ1RyeWluZyB0byB3cml0ZSBiZXlvbmQgYnVmZmVyIGxlbmd0aCcpCnZlcmlmc2ludCh2YWx1ZSwweDdmLC0weDgwKX0KaWYob2Zmc2V0Pj10aGlzLmxlbmd0aCkKcmV0dXJuCmlmKHZhbHVlPj0wKQp0aGlzLndyaXRlVUludDgodmFsdWUsb2Zmc2V0LG5vQXNzZXJ0KQplbHNlCnRoaXMud3JpdGVVSW50OCgweGZmK3ZhbHVlKzEsb2Zmc2V0LG5vQXNzZXJ0KX0KZnVuY3Rpb24gX3dyaXRlSW50MTYoYnVmLHZhbHVlLG9mZnNldCxsaXR0bGVFbmRpYW4sbm9Bc3NlcnQpe2lmKCFub0Fzc2VydCl7YXNzZXJ0KHZhbHVlIT09dW5kZWZpbmVkJiZ2YWx1ZSE9PW51bGwsJ21pc3NpbmcgdmFsdWUnKQphc3NlcnQodHlwZW9mIGxpdHRsZUVuZGlhbj09PSdib29sZWFuJywnbWlzc2luZyBvciBpbnZhbGlkIGVuZGlhbicpCmFzc2VydChvZmZzZXQhPT11bmRlZmluZWQmJm9mZnNldCE9PW51bGwsJ21pc3Npbmcgb2Zmc2V0JykKYXNzZXJ0KG9mZnNldCsxPGJ1Zi5sZW5ndGgsJ1RyeWluZyB0byB3cml0ZSBiZXlvbmQgYnVmZmVyIGxlbmd0aCcpCnZlcmlmc2ludCh2YWx1ZSwweDdmZmYsLTB4ODAwMCl9CnZhciBsZW49YnVmLmxlbmd0aAppZihvZmZzZXQ+PWxlbikKcmV0dXJuCmlmKHZhbHVlPj0wKQpfd3JpdGVVSW50MTYoYnVmLHZhbHVlLG9mZnNldCxsaXR0bGVFbmRpYW4sbm9Bc3NlcnQpCmVsc2UKX3dyaXRlVUludDE2KGJ1ZiwweGZmZmYrdmFsdWUrMSxvZmZzZXQsbGl0dGxlRW5kaWFuLG5vQXNzZXJ0KX0KQnVmZmVyLnByb3RvdHlwZS53cml0ZUludDE2TEU9ZnVuY3Rpb24odmFsdWUsb2Zmc2V0LG5vQXNzZXJ0KXtfd3JpdGVJbnQxNih0aGlzLHZhbHVlLG9mZnNldCx0cnVlLG5vQXNzZXJ0KX0KQnVmZmVyLnByb3RvdHlwZS53cml0ZUludDE2QkU9ZnVuY3Rpb24odmFsdWUsb2Zmc2V0LG5vQXNzZXJ0KXtfd3JpdGVJbnQxNih0aGlzLHZhbHVlLG9mZnNldCxmYWxzZSxub0Fzc2VydCl9CmZ1bmN0aW9uIF93cml0ZUludDMyKGJ1Zix2YWx1ZSxvZmZzZXQsbGl0dGxlRW5kaWFuLG5vQXNzZXJ0KXtpZighbm9Bc3NlcnQpe2Fzc2VydCh2YWx1ZSE9PXVuZGVmaW5lZCYmdmFsdWUhPT1udWxsLCdtaXNzaW5nIHZhbHVlJykKYXNzZXJ0KHR5cGVvZiBsaXR0bGVFbmRpYW49PT0nYm9vbGVhbicsJ21pc3Npbmcgb3IgaW52YWxpZCBlbmRpYW4nKQphc3NlcnQob2Zmc2V0IT09dW5kZWZpbmVkJiZvZmZzZXQhPT1udWxsLCdtaXNzaW5nIG9mZnNldCcpCmFzc2VydChvZmZzZXQrMzxidWYubGVuZ3RoLCdUcnlpbmcgdG8gd3JpdGUgYmV5b25kIGJ1ZmZlciBsZW5ndGgnKQp2ZXJpZnNpbnQodmFsdWUsMHg3ZmZmZmZmZiwtMHg4MDAwMDAwMCl9CnZhciBsZW49YnVmLmxlbmd0aAppZihvZmZzZXQ+PWxlbikKcmV0dXJuCmlmKHZhbHVlPj0wKQpfd3JpdGVVSW50MzIoYnVmLHZhbHVlLG9mZnNldCxsaXR0bGVFbmRpYW4sbm9Bc3NlcnQpCmVsc2UKX3dyaXRlVUludDMyKGJ1ZiwweGZmZmZmZmZmK3ZhbHVlKzEsb2Zmc2V0LGxpdHRsZUVuZGlhbixub0Fzc2VydCl9CkJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnQzMkxFPWZ1bmN0aW9uKHZhbHVlLG9mZnNldCxub0Fzc2VydCl7X3dyaXRlSW50MzIodGhpcyx2YWx1ZSxvZmZzZXQsdHJ1ZSxub0Fzc2VydCl9CkJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnQzMkJFPWZ1bmN0aW9uKHZhbHVlLG9mZnNldCxub0Fzc2VydCl7X3dyaXRlSW50MzIodGhpcyx2YWx1ZSxvZmZzZXQsZmFsc2Usbm9Bc3NlcnQpfQpmdW5jdGlvbiBfd3JpdGVGbG9hdChidWYsdmFsdWUsb2Zmc2V0LGxpdHRsZUVuZGlhbixub0Fzc2VydCl7aWYoIW5vQXNzZXJ0KXthc3NlcnQodmFsdWUhPT11bmRlZmluZWQmJnZhbHVlIT09bnVsbCwnbWlzc2luZyB2YWx1ZScpCmFzc2VydCh0eXBlb2YgbGl0dGxlRW5kaWFuPT09J2Jvb2xlYW4nLCdtaXNzaW5nIG9yIGludmFsaWQgZW5kaWFuJykKYXNzZXJ0KG9mZnNldCE9PXVuZGVmaW5lZCYmb2Zmc2V0IT09bnVsbCwnbWlzc2luZyBvZmZzZXQnKQphc3NlcnQob2Zmc2V0KzM8YnVmLmxlbmd0aCwnVHJ5aW5nIHRvIHdyaXRlIGJleW9uZCBidWZmZXIgbGVuZ3RoJykKdmVyaWZJRUVFNzU0KHZhbHVlLDMuNDAyODIzNDY2Mzg1Mjg4NmUrMzgsLTMuNDAyODIzNDY2Mzg1Mjg4NmUrMzgpfQp2YXIgbGVuPWJ1Zi5sZW5ndGgKaWYob2Zmc2V0Pj1sZW4pCnJldHVybgppZWVlNzU0LndyaXRlKGJ1Zix2YWx1ZSxvZmZzZXQsbGl0dGxlRW5kaWFuLDIzLDQpfQpCdWZmZXIucHJvdG90eXBlLndyaXRlRmxvYXRMRT1mdW5jdGlvbih2YWx1ZSxvZmZzZXQsbm9Bc3NlcnQpe193cml0ZUZsb2F0KHRoaXMsdmFsdWUsb2Zmc2V0LHRydWUsbm9Bc3NlcnQpfQpCdWZmZXIucHJvdG90eXBlLndyaXRlRmxvYXRCRT1mdW5jdGlvbih2YWx1ZSxvZmZzZXQsbm9Bc3NlcnQpe193cml0ZUZsb2F0KHRoaXMsdmFsdWUsb2Zmc2V0LGZhbHNlLG5vQXNzZXJ0KX0KZnVuY3Rpb24gX3dyaXRlRG91YmxlKGJ1Zix2YWx1ZSxvZmZzZXQsbGl0dGxlRW5kaWFuLG5vQXNzZXJ0KXtpZighbm9Bc3NlcnQpe2Fzc2VydCh2YWx1ZSE9PXVuZGVmaW5lZCYmdmFsdWUhPT1udWxsLCdtaXNzaW5nIHZhbHVlJykKYXNzZXJ0KHR5cGVvZiBsaXR0bGVFbmRpYW49PT0nYm9vbGVhbicsJ21pc3Npbmcgb3IgaW52YWxpZCBlbmRpYW4nKQphc3NlcnQob2Zmc2V0IT09dW5kZWZpbmVkJiZvZmZzZXQhPT1udWxsLCdtaXNzaW5nIG9mZnNldCcpCmFzc2VydChvZmZzZXQrNzxidWYubGVuZ3RoLCdUcnlpbmcgdG8gd3JpdGUgYmV5b25kIGJ1ZmZlciBsZW5ndGgnKQp2ZXJpZklFRUU3NTQodmFsdWUsMS43OTc2OTMxMzQ4NjIzMTU3RSszMDgsLTEuNzk3NjkzMTM0ODYyMzE1N0UrMzA4KX0KdmFyIGxlbj1idWYubGVuZ3RoCmlmKG9mZnNldD49bGVuKQpyZXR1cm4KaWVlZTc1NC53cml0ZShidWYsdmFsdWUsb2Zmc2V0LGxpdHRsZUVuZGlhbiw1Miw4KX0KQnVmZmVyLnByb3RvdHlwZS53cml0ZURvdWJsZUxFPWZ1bmN0aW9uKHZhbHVlLG9mZnNldCxub0Fzc2VydCl7X3dyaXRlRG91YmxlKHRoaXMsdmFsdWUsb2Zmc2V0LHRydWUsbm9Bc3NlcnQpfQpCdWZmZXIucHJvdG90eXBlLndyaXRlRG91YmxlQkU9ZnVuY3Rpb24odmFsdWUsb2Zmc2V0LG5vQXNzZXJ0KXtfd3JpdGVEb3VibGUodGhpcyx2YWx1ZSxvZmZzZXQsZmFsc2Usbm9Bc3NlcnQpfQpCdWZmZXIucHJvdG90eXBlLmZpbGw9ZnVuY3Rpb24odmFsdWUsc3RhcnQsZW5kKXtpZighdmFsdWUpdmFsdWU9MAppZighc3RhcnQpc3RhcnQ9MAppZighZW5kKWVuZD10aGlzLmxlbmd0aAppZih0eXBlb2YgdmFsdWU9PT0nc3RyaW5nJyl7dmFsdWU9dmFsdWUuY2hhckNvZGVBdCgwKX0KYXNzZXJ0KHR5cGVvZiB2YWx1ZT09PSdudW1iZXInJiYhaXNOYU4odmFsdWUpLCd2YWx1ZSBpcyBub3QgYSBudW1iZXInKQphc3NlcnQoZW5kPj1zdGFydCwnZW5kIDwgc3RhcnQnKQppZihlbmQ9PT1zdGFydClyZXR1cm4KaWYodGhpcy5sZW5ndGg9PT0wKXJldHVybgphc3NlcnQoc3RhcnQ+PTAmJnN0YXJ0PHRoaXMubGVuZ3RoLCdzdGFydCBvdXQgb2YgYm91bmRzJykKYXNzZXJ0KGVuZD49MCYmZW5kPD10aGlzLmxlbmd0aCwnZW5kIG91dCBvZiBib3VuZHMnKQpmb3IodmFyIGk9c3RhcnQ7aTxlbmQ7aSsrKXt0aGlzW2ldPXZhbHVlfX0KQnVmZmVyLnByb3RvdHlwZS5pbnNwZWN0PWZ1bmN0aW9uKCl7dmFyIG91dD1bXQp2YXIgbGVuPXRoaXMubGVuZ3RoCmZvcih2YXIgaT0wO2k8bGVuO2krKyl7b3V0W2ldPXRvSGV4KHRoaXNbaV0pCmlmKGk9PT1leHBvcnRzLklOU1BFQ1RfTUFYX0JZVEVTKXtvdXRbaSsxXT0nLi4uJwpicmVha319CnJldHVybic8QnVmZmVyICcrb3V0LmpvaW4oJyAnKSsnPid9CkJ1ZmZlci5wcm90b3R5cGUudG9BcnJheUJ1ZmZlcj1mdW5jdGlvbigpe2lmKHR5cGVvZiBVaW50OEFycmF5IT09J3VuZGVmaW5lZCcpe2lmKEJ1ZmZlci5fdXNlVHlwZWRBcnJheXMpe3JldHVybihuZXcgQnVmZmVyKHRoaXMpKS5idWZmZXJ9ZWxzZXt2YXIgYnVmPW5ldyBVaW50OEFycmF5KHRoaXMubGVuZ3RoKQpmb3IodmFyIGk9MCxsZW49YnVmLmxlbmd0aDtpPGxlbjtpKz0xKQpidWZbaV09dGhpc1tpXQpyZXR1cm4gYnVmLmJ1ZmZlcn19ZWxzZXt0aHJvdyBuZXcgRXJyb3IoJ0J1ZmZlci50b0FycmF5QnVmZmVyIG5vdCBzdXBwb3J0ZWQgaW4gdGhpcyBicm93c2VyJyl9fQpmdW5jdGlvbiBzdHJpbmd0cmltKHN0cil7aWYoc3RyLnRyaW0pcmV0dXJuIHN0ci50cmltKCkKcmV0dXJuIHN0ci5yZXBsYWNlKC9eXHMrfFxzKyQvZywnJyl9CnZhciBCUD1CdWZmZXIucHJvdG90eXBlCkJ1ZmZlci5fYXVnbWVudD1mdW5jdGlvbihhcnIpe2Fyci5faXNCdWZmZXI9dHJ1ZQphcnIuX2dldD1hcnIuZ2V0CmFyci5fc2V0PWFyci5zZXQKYXJyLmdldD1CUC5nZXQKYXJyLnNldD1CUC5zZXQKYXJyLndyaXRlPUJQLndyaXRlCmFyci50b1N0cmluZz1CUC50b1N0cmluZwphcnIudG9Mb2NhbGVTdHJpbmc9QlAudG9TdHJpbmcKYXJyLnRvSlNPTj1CUC50b0pTT04KYXJyLmNvcHk9QlAuY29weQphcnIuc2xpY2U9QlAuc2xpY2UKYXJyLnJlYWRVSW50OD1CUC5yZWFkVUludDgKYXJyLnJlYWRVSW50MTZMRT1CUC5yZWFkVUludDE2TEUKYXJyLnJlYWRVSW50MTZCRT1CUC5yZWFkVUludDE2QkUKYXJyLnJlYWRVSW50MzJMRT1CUC5yZWFkVUludDMyTEUKYXJyLnJlYWRVSW50MzJCRT1CUC5yZWFkVUludDMyQkUKYXJyLnJlYWRJbnQ4PUJQLnJlYWRJbnQ4CmFyci5yZWFkSW50MTZMRT1CUC5yZWFkSW50MTZMRQphcnIucmVhZEludDE2QkU9QlAucmVhZEludDE2QkUKYXJyLnJlYWRJbnQzMkxFPUJQLnJlYWRJbnQzMkxFCmFyci5yZWFkSW50MzJCRT1CUC5yZWFkSW50MzJCRQphcnIucmVhZEZsb2F0TEU9QlAucmVhZEZsb2F0TEUKYXJyLnJlYWRGbG9hdEJFPUJQLnJlYWRGbG9hdEJFCmFyci5yZWFkRG91YmxlTEU9QlAucmVhZERvdWJsZUxFCmFyci5yZWFkRG91YmxlQkU9QlAucmVhZERvdWJsZUJFCmFyci53cml0ZVVJbnQ4PUJQLndyaXRlVUludDgKYXJyLndyaXRlVUludDE2TEU9QlAud3JpdGVVSW50MTZMRQphcnIud3JpdGVVSW50MTZCRT1CUC53cml0ZVVJbnQxNkJFCmFyci53cml0ZVVJbnQzMkxFPUJQLndyaXRlVUludDMyTEUKYXJyLndyaXRlVUludDMyQkU9QlAud3JpdGVVSW50MzJCRQphcnIud3JpdGVJbnQ4PUJQLndyaXRlSW50OAphcnIud3JpdGVJbnQxNkxFPUJQLndyaXRlSW50MTZMRQphcnIud3JpdGVJbnQxNkJFPUJQLndyaXRlSW50MTZCRQphcnIud3JpdGVJbnQzMkxFPUJQLndyaXRlSW50MzJMRQphcnIud3JpdGVJbnQzMkJFPUJQLndyaXRlSW50MzJCRQphcnIud3JpdGVGbG9hdExFPUJQLndyaXRlRmxvYXRMRQphcnIud3JpdGVGbG9hdEJFPUJQLndyaXRlRmxvYXRCRQphcnIud3JpdGVEb3VibGVMRT1CUC53cml0ZURvdWJsZUxFCmFyci53cml0ZURvdWJsZUJFPUJQLndyaXRlRG91YmxlQkUKYXJyLmZpbGw9QlAuZmlsbAphcnIuaW5zcGVjdD1CUC5pbnNwZWN0CmFyci50b0FycmF5QnVmZmVyPUJQLnRvQXJyYXlCdWZmZXIKcmV0dXJuIGFycn0KZnVuY3Rpb24gY2xhbXAoaW5kZXgsbGVuLGRlZmF1bHRWYWx1ZSl7aWYodHlwZW9mIGluZGV4IT09J251bWJlcicpcmV0dXJuIGRlZmF1bHRWYWx1ZQppbmRleD1+fmluZGV4O2lmKGluZGV4Pj1sZW4pcmV0dXJuIGxlbgppZihpbmRleD49MClyZXR1cm4gaW5kZXgKaW5kZXgrPWxlbgppZihpbmRleD49MClyZXR1cm4gaW5kZXgKcmV0dXJuIDB9CmZ1bmN0aW9uIGNvZXJjZShsZW5ndGgpe2xlbmd0aD1+fk1hdGguY2VpbCgrbGVuZ3RoKQpyZXR1cm4gbGVuZ3RoPDA/MDpsZW5ndGh9CmZ1bmN0aW9uIGlzQXJyYXkoc3ViamVjdCl7cmV0dXJuKEFycmF5LmlzQXJyYXl8fGZ1bmN0aW9uKHN1YmplY3Qpe3JldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoc3ViamVjdCk9PT0nW29iamVjdCBBcnJheV0nfSkoc3ViamVjdCl9CmZ1bmN0aW9uIGlzQXJyYXlpc2goc3ViamVjdCl7cmV0dXJuIGlzQXJyYXkoc3ViamVjdCl8fEJ1ZmZlci5pc0J1ZmZlcihzdWJqZWN0KXx8c3ViamVjdCYmdHlwZW9mIHN1YmplY3Q9PT0nb2JqZWN0JyYmdHlwZW9mIHN1YmplY3QubGVuZ3RoPT09J251bWJlcid9CmZ1bmN0aW9uIHRvSGV4KG4pe2lmKG48MTYpcmV0dXJuJzAnK24udG9TdHJpbmcoMTYpCnJldHVybiBuLnRvU3RyaW5nKDE2KX0KZnVuY3Rpb24gdXRmOFRvQnl0ZXMoc3RyKXt2YXIgYnl0ZUFycmF5PVtdCmZvcih2YXIgaT0wO2k8c3RyLmxlbmd0aDtpKyspe3ZhciBiPXN0ci5jaGFyQ29kZUF0KGkpCmlmKGI8PTB4N0YpCmJ5dGVBcnJheS5wdXNoKHN0ci5jaGFyQ29kZUF0KGkpKQplbHNle3ZhciBzdGFydD1pCmlmKGI+PTB4RDgwMCYmYjw9MHhERkZGKWkrKwp2YXIgaD1lbmNvZGVVUklDb21wb25lbnQoc3RyLnNsaWNlKHN0YXJ0LGkrMSkpLnN1YnN0cigxKS5zcGxpdCgnJScpCmZvcih2YXIgaj0wO2o8aC5sZW5ndGg7aisrKQpieXRlQXJyYXkucHVzaChwYXJzZUludChoW2pdLDE2KSl9fQpyZXR1cm4gYnl0ZUFycmF5fQpmdW5jdGlvbiBhc2NpaVRvQnl0ZXMoc3RyKXt2YXIgYnl0ZUFycmF5PVtdCmZvcih2YXIgaT0wO2k8c3RyLmxlbmd0aDtpKyspe2J5dGVBcnJheS5wdXNoKHN0ci5jaGFyQ29kZUF0KGkpJjB4RkYpfQpyZXR1cm4gYnl0ZUFycmF5fQpmdW5jdGlvbiB1dGYxNmxlVG9CeXRlcyhzdHIpe3ZhciBjLGhpLGxvCnZhciBieXRlQXJyYXk9W10KZm9yKHZhciBpPTA7aTxzdHIubGVuZ3RoO2krKyl7Yz1zdHIuY2hhckNvZGVBdChpKQpoaT1jPj44CmxvPWMlMjU2CmJ5dGVBcnJheS5wdXNoKGxvKQpieXRlQXJyYXkucHVzaChoaSl9CnJldHVybiBieXRlQXJyYXl9CmZ1bmN0aW9uIGJhc2U2NFRvQnl0ZXMoc3RyKXtyZXR1cm4gYmFzZTY0LnRvQnl0ZUFycmF5KHN0cil9CmZ1bmN0aW9uIGJsaXRCdWZmZXIoc3JjLGRzdCxvZmZzZXQsbGVuZ3RoKXt2YXIgcG9zCmZvcih2YXIgaT0wO2k8bGVuZ3RoO2krKyl7aWYoKGkrb2Zmc2V0Pj1kc3QubGVuZ3RoKXx8KGk+PXNyYy5sZW5ndGgpKQpicmVhawpkc3RbaStvZmZzZXRdPXNyY1tpXX0KcmV0dXJuIGl9CmZ1bmN0aW9uIGRlY29kZVV0ZjhDaGFyKHN0cil7dHJ5e3JldHVybiBkZWNvZGVVUklDb21wb25lbnQoc3RyKX1jYXRjaChlcnIpe3JldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlKDB4RkZGRCl9fQpmdW5jdGlvbiB2ZXJpZnVpbnQodmFsdWUsbWF4KXthc3NlcnQodHlwZW9mIHZhbHVlPT09J251bWJlcicsJ2Nhbm5vdCB3cml0ZSBhIG5vbi1udW1iZXIgYXMgYSBudW1iZXInKQphc3NlcnQodmFsdWU+PTAsJ3NwZWNpZmllZCBhIG5lZ2F0aXZlIHZhbHVlIGZvciB3cml0aW5nIGFuIHVuc2lnbmVkIHZhbHVlJykKYXNzZXJ0KHZhbHVlPD1tYXgsJ3ZhbHVlIGlzIGxhcmdlciB0aGFuIG1heGltdW0gdmFsdWUgZm9yIHR5cGUnKQphc3NlcnQoTWF0aC5mbG9vcih2YWx1ZSk9PT12YWx1ZSwndmFsdWUgaGFzIGEgZnJhY3Rpb25hbCBjb21wb25lbnQnKX0KZnVuY3Rpb24gdmVyaWZzaW50KHZhbHVlLG1heCxtaW4pe2Fzc2VydCh0eXBlb2YgdmFsdWU9PT0nbnVtYmVyJywnY2Fubm90IHdyaXRlIGEgbm9uLW51bWJlciBhcyBhIG51bWJlcicpCmFzc2VydCh2YWx1ZTw9bWF4LCd2YWx1ZSBsYXJnZXIgdGhhbiBtYXhpbXVtIGFsbG93ZWQgdmFsdWUnKQphc3NlcnQodmFsdWU+PW1pbiwndmFsdWUgc21hbGxlciB0aGFuIG1pbmltdW0gYWxsb3dlZCB2YWx1ZScpCmFzc2VydChNYXRoLmZsb29yKHZhbHVlKT09PXZhbHVlLCd2YWx1ZSBoYXMgYSBmcmFjdGlvbmFsIGNvbXBvbmVudCcpfQpmdW5jdGlvbiB2ZXJpZklFRUU3NTQodmFsdWUsbWF4LG1pbil7YXNzZXJ0KHR5cGVvZiB2YWx1ZT09PSdudW1iZXInLCdjYW5ub3Qgd3JpdGUgYSBub24tbnVtYmVyIGFzIGEgbnVtYmVyJykKYXNzZXJ0KHZhbHVlPD1tYXgsJ3ZhbHVlIGxhcmdlciB0aGFuIG1heGltdW0gYWxsb3dlZCB2YWx1ZScpCmFzc2VydCh2YWx1ZT49bWluLCd2YWx1ZSBzbWFsbGVyIHRoYW4gbWluaW11bSBhbGxvd2VkIHZhbHVlJyl9CmZ1bmN0aW9uIGFzc2VydCh0ZXN0LG1lc3NhZ2Upe2lmKCF0ZXN0KXRocm93IG5ldyBFcnJvcihtZXNzYWdlfHwnRmFpbGVkIGFzc2VydGlvbicpfX0pLmNhbGwodGhpcyxyZXF1aXJlKCJvTWZwQW4iKSx0eXBlb2Ygc2VsZiE9PSJ1bmRlZmluZWQiP3NlbGY6dHlwZW9mIHdpbmRvdyE9PSJ1bmRlZmluZWQiP3dpbmRvdzp7fSxyZXF1aXJlKCJidWZmZXIiKS5CdWZmZXIsYXJndW1lbnRzWzNdLGFyZ3VtZW50c1s0XSxhcmd1bWVudHNbNV0sYXJndW1lbnRzWzZdLCIvLi4vLi4vbm9kZV9tb2R1bGVzL2d1bHAtYnJvd3NlcmlmeS9ub2RlX21vZHVsZXMvYnJvd3NlcmlmeS9ub2RlX21vZHVsZXMvYnVmZmVyL2luZGV4LmpzIiwiLy4uLy4uL25vZGVfbW9kdWxlcy9ndWxwLWJyb3dzZXJpZnkvbm9kZV9tb2R1bGVzL2Jyb3dzZXJpZnkvbm9kZV9tb2R1bGVzL2J1ZmZlciIpfSx7ImJhc2U2NC1qcyI6NSwiYnVmZmVyIjo0LCJpZWVlNzU0Ijo2LCJvTWZwQW4iOjd9XSw1OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsoZnVuY3Rpb24ocHJvY2VzcyxnbG9iYWwsQnVmZmVyLF9fYXJndW1lbnQwLF9fYXJndW1lbnQxLF9fYXJndW1lbnQyLF9fYXJndW1lbnQzLF9fZmlsZW5hbWUsX19kaXJuYW1lKXt2YXIgbG9va3VwPSdBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvJzs7KGZ1bmN0aW9uKGV4cG9ydHMpeyd1c2Ugc3RyaWN0Jzt2YXIgQXJyPSh0eXBlb2YgVWludDhBcnJheSE9PSd1bmRlZmluZWQnKT9VaW50OEFycmF5OkFycmF5CnZhciBQTFVTPScrJy5jaGFyQ29kZUF0KDApCnZhciBTTEFTSD0nLycuY2hhckNvZGVBdCgwKQp2YXIgTlVNQkVSPScwJy5jaGFyQ29kZUF0KDApCnZhciBMT1dFUj0nYScuY2hhckNvZGVBdCgwKQp2YXIgVVBQRVI9J0EnLmNoYXJDb2RlQXQoMCkKZnVuY3Rpb24gZGVjb2RlKGVsdCl7dmFyIGNvZGU9ZWx0LmNoYXJDb2RlQXQoMCkKaWYoY29kZT09PVBMVVMpCnJldHVybiA2MgppZihjb2RlPT09U0xBU0gpCnJldHVybiA2MwppZihjb2RlPE5VTUJFUikKcmV0dXJuLTEKaWYoY29kZTxOVU1CRVIrMTApCnJldHVybiBjb2RlLU5VTUJFUisyNisyNgppZihjb2RlPFVQUEVSKzI2KQpyZXR1cm4gY29kZS1VUFBFUgppZihjb2RlPExPV0VSKzI2KQpyZXR1cm4gY29kZS1MT1dFUisyNn0KZnVuY3Rpb24gYjY0VG9CeXRlQXJyYXkoYjY0KXt2YXIgaSxqLGwsdG1wLHBsYWNlSG9sZGVycyxhcnIKaWYoYjY0Lmxlbmd0aCU0PjApe3Rocm93IG5ldyBFcnJvcignSW52YWxpZCBzdHJpbmcuIExlbmd0aCBtdXN0IGJlIGEgbXVsdGlwbGUgb2YgNCcpfQp2YXIgbGVuPWI2NC5sZW5ndGgKcGxhY2VIb2xkZXJzPSc9Jz09PWI2NC5jaGFyQXQobGVuLTIpPzI6Jz0nPT09YjY0LmNoYXJBdChsZW4tMSk/MTowCmFycj1uZXcgQXJyKGI2NC5sZW5ndGgqMy80LXBsYWNlSG9sZGVycykKbD1wbGFjZUhvbGRlcnM+MD9iNjQubGVuZ3RoLTQ6YjY0Lmxlbmd0aAp2YXIgTD0wCmZ1bmN0aW9uIHB1c2godil7YXJyW0wrK109dn0KZm9yKGk9MCxqPTA7aTxsO2krPTQsais9Myl7dG1wPShkZWNvZGUoYjY0LmNoYXJBdChpKSk8PDE4KXwoZGVjb2RlKGI2NC5jaGFyQXQoaSsxKSk8PDEyKXwoZGVjb2RlKGI2NC5jaGFyQXQoaSsyKSk8PDYpfGRlY29kZShiNjQuY2hhckF0KGkrMykpCnB1c2goKHRtcCYweEZGMDAwMCk+PjE2KQpwdXNoKCh0bXAmMHhGRjAwKT4+OCkKcHVzaCh0bXAmMHhGRil9CmlmKHBsYWNlSG9sZGVycz09PTIpe3RtcD0oZGVjb2RlKGI2NC5jaGFyQXQoaSkpPDwyKXwoZGVjb2RlKGI2NC5jaGFyQXQoaSsxKSk+PjQpCnB1c2godG1wJjB4RkYpfWVsc2UgaWYocGxhY2VIb2xkZXJzPT09MSl7dG1wPShkZWNvZGUoYjY0LmNoYXJBdChpKSk8PDEwKXwoZGVjb2RlKGI2NC5jaGFyQXQoaSsxKSk8PDQpfChkZWNvZGUoYjY0LmNoYXJBdChpKzIpKT4+MikKcHVzaCgodG1wPj44KSYweEZGKQpwdXNoKHRtcCYweEZGKX0KcmV0dXJuIGFycn0KZnVuY3Rpb24gdWludDhUb0Jhc2U2NCh1aW50OCl7dmFyIGksZXh0cmFCeXRlcz11aW50OC5sZW5ndGglMyxvdXRwdXQ9IiIsdGVtcCxsZW5ndGgKZnVuY3Rpb24gZW5jb2RlKG51bSl7cmV0dXJuIGxvb2t1cC5jaGFyQXQobnVtKX0KZnVuY3Rpb24gdHJpcGxldFRvQmFzZTY0KG51bSl7cmV0dXJuIGVuY29kZShudW0+PjE4JjB4M0YpK2VuY29kZShudW0+PjEyJjB4M0YpK2VuY29kZShudW0+PjYmMHgzRikrZW5jb2RlKG51bSYweDNGKX0KZm9yKGk9MCxsZW5ndGg9dWludDgubGVuZ3RoLWV4dHJhQnl0ZXM7aTxsZW5ndGg7aSs9Myl7dGVtcD0odWludDhbaV08PDE2KSsodWludDhbaSsxXTw8OCkrKHVpbnQ4W2krMl0pCm91dHB1dCs9dHJpcGxldFRvQmFzZTY0KHRlbXApfQpzd2l0Y2goZXh0cmFCeXRlcyl7Y2FzZSAxOnRlbXA9dWludDhbdWludDgubGVuZ3RoLTFdCm91dHB1dCs9ZW5jb2RlKHRlbXA+PjIpCm91dHB1dCs9ZW5jb2RlKCh0ZW1wPDw0KSYweDNGKQpvdXRwdXQrPSc9PScKYnJlYWsKY2FzZSAyOnRlbXA9KHVpbnQ4W3VpbnQ4Lmxlbmd0aC0yXTw8OCkrKHVpbnQ4W3VpbnQ4Lmxlbmd0aC0xXSkKb3V0cHV0Kz1lbmNvZGUodGVtcD4+MTApCm91dHB1dCs9ZW5jb2RlKCh0ZW1wPj40KSYweDNGKQpvdXRwdXQrPWVuY29kZSgodGVtcDw8MikmMHgzRikKb3V0cHV0Kz0nPScKYnJlYWt9CnJldHVybiBvdXRwdXR9CmV4cG9ydHMudG9CeXRlQXJyYXk9YjY0VG9CeXRlQXJyYXkKZXhwb3J0cy5mcm9tQnl0ZUFycmF5PXVpbnQ4VG9CYXNlNjR9KHR5cGVvZiBleHBvcnRzPT09J3VuZGVmaW5lZCc/KHRoaXMuYmFzZTY0anM9e30pOmV4cG9ydHMpKX0pLmNhbGwodGhpcyxyZXF1aXJlKCJvTWZwQW4iKSx0eXBlb2Ygc2VsZiE9PSJ1bmRlZmluZWQiP3NlbGY6dHlwZW9mIHdpbmRvdyE9PSJ1bmRlZmluZWQiP3dpbmRvdzp7fSxyZXF1aXJlKCJidWZmZXIiKS5CdWZmZXIsYXJndW1lbnRzWzNdLGFyZ3VtZW50c1s0XSxhcmd1bWVudHNbNV0sYXJndW1lbnRzWzZdLCIvLi4vLi4vbm9kZV9tb2R1bGVzL2d1bHAtYnJvd3NlcmlmeS9ub2RlX21vZHVsZXMvYnJvd3NlcmlmeS9ub2RlX21vZHVsZXMvYnVmZmVyL25vZGVfbW9kdWxlcy9iYXNlNjQtanMvbGliL2I2NC5qcyIsIi8uLi8uLi9ub2RlX21vZHVsZXMvZ3VscC1icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9idWZmZXIvbm9kZV9tb2R1bGVzL2Jhc2U2NC1qcy9saWIiKX0seyJidWZmZXIiOjQsIm9NZnBBbiI6N31dLDY6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpeyhmdW5jdGlvbihwcm9jZXNzLGdsb2JhbCxCdWZmZXIsX19hcmd1bWVudDAsX19hcmd1bWVudDEsX19hcmd1bWVudDIsX19hcmd1bWVudDMsX19maWxlbmFtZSxfX2Rpcm5hbWUpe2V4cG9ydHMucmVhZD1mdW5jdGlvbihidWZmZXIsb2Zmc2V0LGlzTEUsbUxlbixuQnl0ZXMpe3ZhciBlLG0sZUxlbj1uQnl0ZXMqOC1tTGVuLTEsZU1heD0oMTw8ZUxlbiktMSxlQmlhcz1lTWF4Pj4xLG5CaXRzPS03LGk9aXNMRT8obkJ5dGVzLTEpOjAsZD1pc0xFPy0xOjEscz1idWZmZXJbb2Zmc2V0K2ldO2krPWQ7ZT1zJigoMTw8KC1uQml0cykpLTEpO3M+Pj0oLW5CaXRzKTtuQml0cys9ZUxlbjtmb3IoO25CaXRzPjA7ZT1lKjI1NitidWZmZXJbb2Zmc2V0K2ldLGkrPWQsbkJpdHMtPTgpO209ZSYoKDE8PCgtbkJpdHMpKS0xKTtlPj49KC1uQml0cyk7bkJpdHMrPW1MZW47Zm9yKDtuQml0cz4wO209bSoyNTYrYnVmZmVyW29mZnNldCtpXSxpKz1kLG5CaXRzLT04KTtpZihlPT09MCl7ZT0xLWVCaWFzO31lbHNlIGlmKGU9PT1lTWF4KXtyZXR1cm4gbT9OYU46KChzPy0xOjEpKkluZmluaXR5KTt9ZWxzZXttPW0rTWF0aC5wb3coMixtTGVuKTtlPWUtZUJpYXM7fQpyZXR1cm4ocz8tMToxKSptKk1hdGgucG93KDIsZS1tTGVuKTt9O2V4cG9ydHMud3JpdGU9ZnVuY3Rpb24oYnVmZmVyLHZhbHVlLG9mZnNldCxpc0xFLG1MZW4sbkJ5dGVzKXt2YXIgZSxtLGMsZUxlbj1uQnl0ZXMqOC1tTGVuLTEsZU1heD0oMTw8ZUxlbiktMSxlQmlhcz1lTWF4Pj4xLHJ0PShtTGVuPT09MjM/TWF0aC5wb3coMiwtMjQpLU1hdGgucG93KDIsLTc3KTowKSxpPWlzTEU/MDoobkJ5dGVzLTEpLGQ9aXNMRT8xOi0xLHM9dmFsdWU8MHx8KHZhbHVlPT09MCYmMS92YWx1ZTwwKT8xOjA7dmFsdWU9TWF0aC5hYnModmFsdWUpO2lmKGlzTmFOKHZhbHVlKXx8dmFsdWU9PT1JbmZpbml0eSl7bT1pc05hTih2YWx1ZSk/MTowO2U9ZU1heDt9ZWxzZXtlPU1hdGguZmxvb3IoTWF0aC5sb2codmFsdWUpL01hdGguTE4yKTtpZih2YWx1ZSooYz1NYXRoLnBvdygyLC1lKSk8MSl7ZS0tO2MqPTI7fQppZihlK2VCaWFzPj0xKXt2YWx1ZSs9cnQvYzt9ZWxzZXt2YWx1ZSs9cnQqTWF0aC5wb3coMiwxLWVCaWFzKTt9CmlmKHZhbHVlKmM+PTIpe2UrKztjLz0yO30KaWYoZStlQmlhcz49ZU1heCl7bT0wO2U9ZU1heDt9ZWxzZSBpZihlK2VCaWFzPj0xKXttPSh2YWx1ZSpjLTEpKk1hdGgucG93KDIsbUxlbik7ZT1lK2VCaWFzO31lbHNle209dmFsdWUqTWF0aC5wb3coMixlQmlhcy0xKSpNYXRoLnBvdygyLG1MZW4pO2U9MDt9fQpmb3IoO21MZW4+PTg7YnVmZmVyW29mZnNldCtpXT1tJjB4ZmYsaSs9ZCxtLz0yNTYsbUxlbi09OCk7ZT0oZTw8bUxlbil8bTtlTGVuKz1tTGVuO2Zvcig7ZUxlbj4wO2J1ZmZlcltvZmZzZXQraV09ZSYweGZmLGkrPWQsZS89MjU2LGVMZW4tPTgpO2J1ZmZlcltvZmZzZXQraS1kXXw9cyoxMjg7fTt9KS5jYWxsKHRoaXMscmVxdWlyZSgib01mcEFuIiksdHlwZW9mIHNlbGYhPT0idW5kZWZpbmVkIj9zZWxmOnR5cGVvZiB3aW5kb3chPT0idW5kZWZpbmVkIj93aW5kb3c6e30scmVxdWlyZSgiYnVmZmVyIikuQnVmZmVyLGFyZ3VtZW50c1szXSxhcmd1bWVudHNbNF0sYXJndW1lbnRzWzVdLGFyZ3VtZW50c1s2XSwiLy4uLy4uL25vZGVfbW9kdWxlcy9ndWxwLWJyb3dzZXJpZnkvbm9kZV9tb2R1bGVzL2Jyb3dzZXJpZnkvbm9kZV9tb2R1bGVzL2J1ZmZlci9ub2RlX21vZHVsZXMvaWVlZTc1NC9pbmRleC5qcyIsIi8uLi8uLi9ub2RlX21vZHVsZXMvZ3VscC1icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9idWZmZXIvbm9kZV9tb2R1bGVzL2llZWU3NTQiKX0seyJidWZmZXIiOjQsIm9NZnBBbiI6N31dLDc6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpeyhmdW5jdGlvbihwcm9jZXNzLGdsb2JhbCxCdWZmZXIsX19hcmd1bWVudDAsX19hcmd1bWVudDEsX19hcmd1bWVudDIsX19hcmd1bWVudDMsX19maWxlbmFtZSxfX2Rpcm5hbWUpe3ZhciBwcm9jZXNzPW1vZHVsZS5leHBvcnRzPXt9O3Byb2Nlc3MubmV4dFRpY2s9KGZ1bmN0aW9uKCl7dmFyIGNhblNldEltbWVkaWF0ZT10eXBlb2Ygd2luZG93IT09J3VuZGVmaW5lZCcmJndpbmRvdy5zZXRJbW1lZGlhdGU7dmFyIGNhblBvc3Q9dHlwZW9mIHdpbmRvdyE9PSd1bmRlZmluZWQnJiZ3aW5kb3cucG9zdE1lc3NhZ2UmJndpbmRvdy5hZGRFdmVudExpc3RlbmVyO2lmKGNhblNldEltbWVkaWF0ZSl7cmV0dXJuIGZ1bmN0aW9uKGYpe3JldHVybiB3aW5kb3cuc2V0SW1tZWRpYXRlKGYpfTt9CmlmKGNhblBvc3Qpe3ZhciBxdWV1ZT1bXTt3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsZnVuY3Rpb24oZXYpe3ZhciBzb3VyY2U9ZXYuc291cmNlO2lmKChzb3VyY2U9PT13aW5kb3d8fHNvdXJjZT09PW51bGwpJiZldi5kYXRhPT09J3Byb2Nlc3MtdGljaycpe2V2LnN0b3BQcm9wYWdhdGlvbigpO2lmKHF1ZXVlLmxlbmd0aD4wKXt2YXIgZm49cXVldWUuc2hpZnQoKTtmbigpO319fSx0cnVlKTtyZXR1cm4gZnVuY3Rpb24gbmV4dFRpY2soZm4pe3F1ZXVlLnB1c2goZm4pO3dpbmRvdy5wb3N0TWVzc2FnZSgncHJvY2Vzcy10aWNrJywnKicpO307fQpyZXR1cm4gZnVuY3Rpb24gbmV4dFRpY2soZm4pe3NldFRpbWVvdXQoZm4sMCk7fTt9KSgpO3Byb2Nlc3MudGl0bGU9J2Jyb3dzZXInO3Byb2Nlc3MuYnJvd3Nlcj10cnVlO3Byb2Nlc3MuZW52PXt9O3Byb2Nlc3MuYXJndj1bXTtmdW5jdGlvbiBub29wKCl7fQpwcm9jZXNzLm9uPW5vb3A7cHJvY2Vzcy5hZGRMaXN0ZW5lcj1ub29wO3Byb2Nlc3Mub25jZT1ub29wO3Byb2Nlc3Mub2ZmPW5vb3A7cHJvY2Vzcy5yZW1vdmVMaXN0ZW5lcj1ub29wO3Byb2Nlc3MucmVtb3ZlQWxsTGlzdGVuZXJzPW5vb3A7cHJvY2Vzcy5lbWl0PW5vb3A7cHJvY2Vzcy5iaW5kaW5nPWZ1bmN0aW9uKG5hbWUpe3Rocm93IG5ldyBFcnJvcigncHJvY2Vzcy5iaW5kaW5nIGlzIG5vdCBzdXBwb3J0ZWQnKTt9CnByb2Nlc3MuY3dkPWZ1bmN0aW9uKCl7cmV0dXJuJy8nfTtwcm9jZXNzLmNoZGlyPWZ1bmN0aW9uKGRpcil7dGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmNoZGlyIGlzIG5vdCBzdXBwb3J0ZWQnKTt9O30pLmNhbGwodGhpcyxyZXF1aXJlKCJvTWZwQW4iKSx0eXBlb2Ygc2VsZiE9PSJ1bmRlZmluZWQiP3NlbGY6dHlwZW9mIHdpbmRvdyE9PSJ1bmRlZmluZWQiP3dpbmRvdzp7fSxyZXF1aXJlKCJidWZmZXIiKS5CdWZmZXIsYXJndW1lbnRzWzNdLGFyZ3VtZW50c1s0XSxhcmd1bWVudHNbNV0sYXJndW1lbnRzWzZdLCIvLi4vLi4vbm9kZV9tb2R1bGVzL2d1bHAtYnJvd3NlcmlmeS9ub2RlX21vZHVsZXMvYnJvd3NlcmlmeS9ub2RlX21vZHVsZXMvcHJvY2Vzcy9icm93c2VyLmpzIiwiLy4uLy4uL25vZGVfbW9kdWxlcy9ndWxwLWJyb3dzZXJpZnkvbm9kZV9tb2R1bGVzL2Jyb3dzZXJpZnkvbm9kZV9tb2R1bGVzL3Byb2Nlc3MiKX0seyJidWZmZXIiOjQsIm9NZnBBbiI6N31dLDg6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpeyhmdW5jdGlvbihwcm9jZXNzLGdsb2JhbCxCdWZmZXIsX19hcmd1bWVudDAsX19hcmd1bWVudDEsX19hcmd1bWVudDIsX19hcmd1bWVudDMsX19maWxlbmFtZSxfX2Rpcm5hbWUpe21vZHVsZS5leHBvcnRzPVsnJHNjb3BlJywnJHN0YXRlUGFyYW1zJywnJGh0dHAnLCdyZXNvdXJjZURlZicsZnVuY3Rpb24oJHNjb3BlLCRzdGF0ZVBhcmFtcywkaHR0cCxyZXNvdXJjZURlZil7dmFyIGNvbGxlY3Rpb249JHN0YXRlUGFyYW1zLmNvbGxlY3Rpb247JHNjb3BlLmNvbGxlY3Rpb249Y29sbGVjdGlvbjskc2NvcGUuYXR0cmlidXRlcz1bXTskc2NvcGUuaXRlbXM9W107JHNjb3BlLmRlbGV0ZT1mdW5jdGlvbigkaW5kZXgpe3ZhciBpdGVtPSRzY29wZS5pdGVtc1skaW5kZXhdOyRodHRwLmRlbGV0ZSgnL2FwaS8nK2NvbGxlY3Rpb24rJy8nK2l0ZW0uaWQpLnN1Y2Nlc3MoZnVuY3Rpb24ocmVzcG9uc2UpeyRzY29wZS5pdGVtcy5zcGxpY2UoJGluZGV4LDEpfSk7fTtyZXNvdXJjZURlZi5nZXQoKS50aGVuKGZ1bmN0aW9uKCl7JHNjb3BlLmF0dHJpYnV0ZXM9cmVzb3VyY2VEZWYucmVzb3VyY2UoY29sbGVjdGlvbikuYXR0cmlidXRlczt9KTskaHR0cC5nZXQoJy9hcGkvJytjb2xsZWN0aW9uKS5zdWNjZXNzKGZ1bmN0aW9uKHJlc3BvbnNlKXskc2NvcGUuaXRlbXM9cmVzcG9uc2VbY29sbGVjdGlvbl07fSk7fV07fSkuY2FsbCh0aGlzLHJlcXVpcmUoIm9NZnBBbiIpLHR5cGVvZiBzZWxmIT09InVuZGVmaW5lZCI/c2VsZjp0eXBlb2Ygd2luZG93IT09InVuZGVmaW5lZCI/d2luZG93Ont9LHJlcXVpcmUoImJ1ZmZlciIpLkJ1ZmZlcixhcmd1bWVudHNbM10sYXJndW1lbnRzWzRdLGFyZ3VtZW50c1s1XSxhcmd1bWVudHNbNl0sIi9jb250cm9sbGVycy9jb2xsZWN0aW9uLmpzIiwiL2NvbnRyb2xsZXJzIil9LHsiYnVmZmVyIjo0LCJvTWZwQW4iOjd9XSw5OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsoZnVuY3Rpb24ocHJvY2VzcyxnbG9iYWwsQnVmZmVyLF9fYXJndW1lbnQwLF9fYXJndW1lbnQxLF9fYXJndW1lbnQyLF9fYXJndW1lbnQzLF9fZmlsZW5hbWUsX19kaXJuYW1lKXttb2R1bGUuZXhwb3J0cz1bJyRzY29wZScsJyRzdGF0ZVBhcmFtcycsJyRodHRwJywnJGxvY2F0aW9uJywncmVzb3VyY2VEZWYnLGZ1bmN0aW9uKCRzY29wZSwkc3RhdGVQYXJhbXMsJGh0dHAsJGxvY2F0aW9uLHJlc291cmNlRGVmKXt2YXIgY29sbGVjdGlvbj0kc3RhdGVQYXJhbXMuY29sbGVjdGlvbjskc2NvcGUuY29sbGVjdGlvbj1jb2xsZWN0aW9uOyRzY29wZS5pdGVtPXt9OyRzY29wZS5hdHRyaWJ1dGVzPVtdO3Jlc291cmNlRGVmLmdldCgpLnRoZW4oZnVuY3Rpb24oKXskc2NvcGUuZGVmaW5pdGlvbj1yZXNvdXJjZURlZi5yZXNvdXJjZShjb2xsZWN0aW9uKTt9KTskc2NvcGUucHVibGlzaD1mdW5jdGlvbigpeyRodHRwLnBvc3QoJy9hcGkvJytjb2xsZWN0aW9uLCRzY29wZS5pdGVtKS5zdWNjZXNzKGZ1bmN0aW9uKHJlc3BvbnNlKXskbG9jYXRpb24ucGF0aCgnLycrY29sbGVjdGlvbisnLycrcmVzcG9uc2VbY29sbGVjdGlvbl0uaWQpO30pO307dmFyIGVycm9ycz17fTtlcnJvcnMudGl0bGU9dHJ1ZTskc2NvcGUuZ2V0RXJyb3I9ZnVuY3Rpb24oYXR0cmlidXRlKXtpZihlcnJvcnMuaGFzT3duUHJvcGVydHkoYXR0cmlidXRlKSYmZXJyb3JzW2F0dHJpYnV0ZV09PT10cnVlKXtyZXR1cm4naGFzLWVycm9yJzt9fX1dO30pLmNhbGwodGhpcyxyZXF1aXJlKCJvTWZwQW4iKSx0eXBlb2Ygc2VsZiE9PSJ1bmRlZmluZWQiP3NlbGY6dHlwZW9mIHdpbmRvdyE9PSJ1bmRlZmluZWQiP3dpbmRvdzp7fSxyZXF1aXJlKCJidWZmZXIiKS5CdWZmZXIsYXJndW1lbnRzWzNdLGFyZ3VtZW50c1s0XSxhcmd1bWVudHNbNV0sYXJndW1lbnRzWzZdLCIvY29udHJvbGxlcnMvY3JlYXRlLmpzIiwiL2NvbnRyb2xsZXJzIil9LHsiYnVmZmVyIjo0LCJvTWZwQW4iOjd9XSwxMDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7KGZ1bmN0aW9uKHByb2Nlc3MsZ2xvYmFsLEJ1ZmZlcixfX2FyZ3VtZW50MCxfX2FyZ3VtZW50MSxfX2FyZ3VtZW50MixfX2FyZ3VtZW50MyxfX2ZpbGVuYW1lLF9fZGlybmFtZSl7bW9kdWxlLmV4cG9ydHM9Wyckc2NvcGUnLCdyZXNvdXJjZURlZicsZnVuY3Rpb24oJHNjb3BlLHJlc291cmNlRGVmKXskc2NvcGUucmVzb3VyY2VzPVtdO3Jlc291cmNlRGVmLmdldCgpLnRoZW4oZnVuY3Rpb24oKXskc2NvcGUucmVzb3VyY2VzPXJlc291cmNlRGVmLnJlc291cmNlcygpO30pO31dO30pLmNhbGwodGhpcyxyZXF1aXJlKCJvTWZwQW4iKSx0eXBlb2Ygc2VsZiE9PSJ1bmRlZmluZWQiP3NlbGY6dHlwZW9mIHdpbmRvdyE9PSJ1bmRlZmluZWQiP3dpbmRvdzp7fSxyZXF1aXJlKCJidWZmZXIiKS5CdWZmZXIsYXJndW1lbnRzWzNdLGFyZ3VtZW50c1s0XSxhcmd1bWVudHNbNV0sYXJndW1lbnRzWzZdLCIvY29udHJvbGxlcnMvaG9tZS5qcyIsIi9jb250cm9sbGVycyIpfSx7ImJ1ZmZlciI6NCwib01mcEFuIjo3fV0sMTE6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpeyhmdW5jdGlvbihwcm9jZXNzLGdsb2JhbCxCdWZmZXIsX19hcmd1bWVudDAsX19hcmd1bWVudDEsX19hcmd1bWVudDIsX19hcmd1bWVudDMsX19maWxlbmFtZSxfX2Rpcm5hbWUpe21vZHVsZS5leHBvcnRzPVsnJHNjb3BlJywnJHN0YXRlUGFyYW1zJywnJGh0dHAnLCdyZXNvdXJjZURlZicsJyR0aW1lb3V0JywnJHNjZScsZnVuY3Rpb24oJHNjb3BlLCRzdGF0ZVBhcmFtcywkaHR0cCxyZXNvdXJjZURlZiwkdGltZW91dCwkc2NlKXt2YXIgY29sbGVjdGlvbj0kc3RhdGVQYXJhbXMuY29sbGVjdGlvbixpdGVtPSRzdGF0ZVBhcmFtcy5pdGVtOyRzY29wZS5jb2xsZWN0aW9uPWNvbGxlY3Rpb247JHNjb3BlLml0ZW09e307JHNjb3BlLmxvYWRpbmc9ZmFsc2U7JHNjb3BlLnN1Y2Nlc3M9ZmFsc2U7JHNjb3BlLmJ0blRleHQ9JHNjZS50cnVzdEFzSHRtbCgnVXBkYXRlJyk7JHNjb3BlLmF0dHJpYnV0ZXM9W107JGh0dHAuZ2V0KCcvYXBpLycrY29sbGVjdGlvbisnLycraXRlbSkuc3VjY2VzcyhmdW5jdGlvbihyZXNwb25zZSl7JHNjb3BlLml0ZW09cmVzcG9uc2VbY29sbGVjdGlvbl07fSk7cmVzb3VyY2VEZWYuZ2V0KCkudGhlbihmdW5jdGlvbigpeyRzY29wZS5kZWZpbml0aW9uPXJlc291cmNlRGVmLnJlc291cmNlKGNvbGxlY3Rpb24pO30pOyRzY29wZS5jaGFuZ2U9ZnVuY3Rpb24oKXskc2NvcGUuYnRuVGV4dD0kc2NlLnRydXN0QXNIdG1sKCdVcGRhdGUnKTskc2NvcGUuc3VjY2Vzcz1mYWxzZTt9OyRzY29wZS5zdWJtaXQ9ZnVuY3Rpb24oKXskc2NvcGUubG9hZGluZz10cnVlOyRzY29wZS5idG5UZXh0PSRzY2UudHJ1c3RBc0h0bWwoJzxzcGFuIGNsYXNzPSJnbHlwaGljb24gZ2x5cGhpY29uLXJlZnJlc2giPjwvc3Bhbj4nKTskaHR0cC5wdXQoJy9hcGkvJytjb2xsZWN0aW9uKycvJytpdGVtLCRzY29wZS5pdGVtKS5zdWNjZXNzKGZ1bmN0aW9uKCl7fSk7JHRpbWVvdXQoZnVuY3Rpb24oKXskc2NvcGUubG9hZGluZz1mYWxzZTskc2NvcGUuc3VjY2Vzcz10cnVlOyRzY29wZS5idG5UZXh0PSRzY2UudHJ1c3RBc0h0bWwoJ1N1Y2Nlc3MgPHNwYW4gY2xhc3M9ImdseXBoaWNvbiBnbHlwaGljb24tY2hlY2siPjwvc3Bhbj4nKTt9LDgwMCk7fTt9XTt9KS5jYWxsKHRoaXMscmVxdWlyZSgib01mcEFuIiksdHlwZW9mIHNlbGYhPT0idW5kZWZpbmVkIj9zZWxmOnR5cGVvZiB3aW5kb3chPT0idW5kZWZpbmVkIj93aW5kb3c6e30scmVxdWlyZSgiYnVmZmVyIikuQnVmZmVyLGFyZ3VtZW50c1szXSxhcmd1bWVudHNbNF0sYXJndW1lbnRzWzVdLGFyZ3VtZW50c1s2XSwiL2NvbnRyb2xsZXJzL2l0ZW0uanMiLCIvY29udHJvbGxlcnMiKX0seyJidWZmZXIiOjQsIm9NZnBBbiI6N31dLDEyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsoZnVuY3Rpb24ocHJvY2VzcyxnbG9iYWwsQnVmZmVyLF9fYXJndW1lbnQwLF9fYXJndW1lbnQxLF9fYXJndW1lbnQyLF9fYXJndW1lbnQzLF9fZmlsZW5hbWUsX19kaXJuYW1lKXtyZXF1aXJlKCdhbmd1bGFyJyk7dmFyIHJvdXRlcj1yZXF1aXJlKCdhbmd1bGFyLXVpLXJvdXRlcicpO3ZhciBhcHA9YW5ndWxhci5tb2R1bGUoJ2FwcCcsW3JvdXRlcl0pO3ZhciBjb25maWc9e25hbWVzcGFjZTonL2FwaScsdmlld3M6e2hvbWU6J2hvbWUuaHRtbCcscmVzb3VyY2U6J2NvbGxlY3Rpb24uaHRtbCcsY3JlYXRlOidjcmVhdGUuaHRtbCcsaXRlbTonaXRlbS5odG1sJ319O2FwcC5jb25maWcoZnVuY3Rpb24oJHVybFJvdXRlclByb3ZpZGVyLCRzdGF0ZVByb3ZpZGVyKXskdXJsUm91dGVyUHJvdmlkZXIub3RoZXJ3aXNlKCIvIik7JHN0YXRlUHJvdmlkZXIuc3RhdGUoJ2hvbWUnLHt1cmw6Jy8nLHRlbXBsYXRlVXJsOmNvbmZpZy52aWV3cy5ob21lLGNvbnRyb2xsZXI6cmVxdWlyZSgnLi9jb250cm9sbGVycy9ob21lJyl9KS5zdGF0ZSgnY29sbGVjdGlvbicse3VybDonLzpjb2xsZWN0aW9uJyx0ZW1wbGF0ZVVybDpjb25maWcudmlld3MucmVzb3VyY2UsY29udHJvbGxlcjpyZXF1aXJlKCcuL2NvbnRyb2xsZXJzL2NvbGxlY3Rpb24nKX0pLnN0YXRlKCdjcmVhdGUnLHt1cmw6Jy86Y29sbGVjdGlvbi9jcmVhdGUnLHRlbXBsYXRlVXJsOmNvbmZpZy52aWV3cy5jcmVhdGUsY29udHJvbGxlcjpyZXF1aXJlKCcuL2NvbnRyb2xsZXJzL2NyZWF0ZScpfSkuc3RhdGUoJ2l0ZW0nLHt1cmw6Jy86Y29sbGVjdGlvbi86aXRlbScsdGVtcGxhdGVVcmw6Y29uZmlnLnZpZXdzLml0ZW0sY29udHJvbGxlcjpyZXF1aXJlKCcuL2NvbnRyb2xsZXJzL2l0ZW0nKX0pfSk7YXBwLnNlcnZpY2UoJ3Jlc291cmNlRGVmJyxbJyRodHRwJywnJHEnLGZ1bmN0aW9uKCRodHRwLCRxKXt2YXIgZGVmZmVyZWQ9JHEuZGVmZXIoKTt2YXIgcmVzb3VyY2VzPXt9O3ZhciByZXNvdXJjZURlZj17fTt2YXIgX2lzRW1wdHk9ZnVuY3Rpb24ob2JqKXtmb3IodmFyIHByb3AgaW4gb2JqKXtyZXR1cm4gZmFsc2U7fQpyZXR1cm4gdHJ1ZTt9O3Jlc291cmNlRGVmLmdldD1mdW5jdGlvbigpe3ZhciBwcm9taXNlPXJlc291cmNlRGVmLl9nZXQoKTtpZighX2lzRW1wdHkocmVzb3VyY2VzKSl7c2V0VGltZW91dChmdW5jdGlvbigpe2RlZmZlcmVkLnJlc29sdmUoKTt9LDEpO30KcmV0dXJuIHByb21pc2U7fTtyZXNvdXJjZURlZi5fZ2V0PWZ1bmN0aW9uKCl7aWYoX2lzRW1wdHkocmVzb3VyY2VzKSl7JGh0dHAuZ2V0KGNvbmZpZy5uYW1lc3BhY2UpLnN1Y2Nlc3MoZnVuY3Rpb24ocmVzcG9uc2Upe3Jlc291cmNlcz1yZXNwb25zZS5yZXNvdXJjZXM7ZGVmZmVyZWQucmVzb2x2ZSgpO30pO30KcmV0dXJuIGRlZmZlcmVkLnByb21pc2U7fTtyZXNvdXJjZURlZi5yZXNvdXJjZXM9ZnVuY3Rpb24oKXtyZXR1cm4gT2JqZWN0LmtleXMocmVzb3VyY2VzKTt9O3Jlc291cmNlRGVmLnJlc291cmNlPWZ1bmN0aW9uKHJlc291cmNlKXtyZXR1cm4gcmVzb3VyY2VzW3Jlc291cmNlXTt9O3JldHVybiByZXNvdXJjZURlZjt9XSk7fSkuY2FsbCh0aGlzLHJlcXVpcmUoIm9NZnBBbiIpLHR5cGVvZiBzZWxmIT09InVuZGVmaW5lZCI/c2VsZjp0eXBlb2Ygd2luZG93IT09InVuZGVmaW5lZCI/d2luZG93Ont9LHJlcXVpcmUoImJ1ZmZlciIpLkJ1ZmZlcixhcmd1bWVudHNbM10sYXJndW1lbnRzWzRdLGFyZ3VtZW50c1s1XSxhcmd1bWVudHNbNl0sIi9mYWtlX2Y2NjEwYzY4LmpzIiwiLyIpfSx7Ii4vY29udHJvbGxlcnMvY29sbGVjdGlvbiI6OCwiLi9jb250cm9sbGVycy9jcmVhdGUiOjksIi4vY29udHJvbGxlcnMvaG9tZSI6MTAsIi4vY29udHJvbGxlcnMvaXRlbSI6MTEsImFuZ3VsYXIiOjIsImFuZ3VsYXItdWktcm91dGVyIjoxLCJidWZmZXIiOjQsIm9NZnBBbiI6N31dfSx7fSxbMTJdKQ==",
                "headers": {
                    "Accept-Ranges": "bytes",
                    "Last-Modified": "Thu, 06 Nov 2014 14:31:21 GMT",
                    "Content-Length": "275611",
                    "Date": "Thu, 06 Nov 2014 14:31:24 GMT",
                    "Content-Type": "application/javascript"
                },
                "cookies": [],
                "mimeType": "script",
                "host": "localhost",
                "protocol": "http",
                "port": 9999,
                "inScope": false,
                "toolFlag": 16962,
                "referenceID": 0,
                "messageType": "response"
            },
            "messageType": "requestResponse"
        }
    ],
    "inScope": true,
    "messageType": "scanIssue"
}