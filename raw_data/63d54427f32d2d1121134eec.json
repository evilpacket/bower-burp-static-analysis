{
    "url": "http://localhost:9999/maplayers/ol2-bower/OpenLayers.light.js",
    "host": "localhost",
    "port": 9999,
    "protocol": "http",
    "name": "Link manipulation (DOM-based)",
    "issueType": 5246976,
    "severity": "Low",
    "confidence": "Firm",
    "issueBackground": "DOM-based link manipulation vulnerabilities arise when a client-side script within an application's response reads data from a controllable part of the DOM (for example, the URL), and writes this to a navigation target within the current page, such as a clickable link or the submission URL of a form. An attacker may be able to use the vulnerability to construct a URL which, if visited by another application user, will modify the target of links within the response. An attacker may be able to leverage this to perform various attacks, including:<ul><li>Causing the user to redirect to an arbitrary external URL, to facilitate a phishing attack.</li><li>Causing the user to submit sensitive form data to a server controlled by the attacker.</li><li>Causing the user to perform an unintended action within the application, by changing the file or query string associated with a link.</li><li>Bypassing browser anti-XSS defenses by injecting on-site links containing XSS exploits, since browser anti-XSS defenses typically do not operate on on-site links.</li></ul>",
    "remediationBackground": "Static analysis of code to identify vulnerabilities of this kind may lead to false positives that are not actually exploitable. You should review the highlighted code and related execution paths to determine whether the application is indeed vulnerable, or whether mitigations are in place that would prevent exploitation.<br><br>The most effective way to avoid DOM-based link manipulation vulnerabilities is not to dynamically set the target URLs of links or forms using data that originated from any untrusted source. If the desired functionality of the application means that this behavior is unavoidable, then defenses must be implemented within the client-side code to prevent malicious data from introducing an arbitrary URL as a link target. In general, this is best achieved by using a whitelist of URLs that are permitted link targets, and strictly validating the target against this list before setting the link target.",
    "issueDetail": "The application may be vulnerable to DOM-based link manipulation. Data is read from <b>window.location</b> and written to <b>the 'href' property of a DOM element</b> via the following statements:<ul><li>var c=window.location,d=c.port?\":\"+c.port:\"\",d=c.protocol+\"//\"+c.host.split(\":\").shift()+d;</li><li>0===a.indexOf(\"/\")?a=d+a:(c=c.pathname.split(\"/\"),c.pop(),a=d+c.join(\"/\")+\"/\"+a)</li><li>b.ignoreCase&amp;&amp;(a=a.toLowerCase());</li><li>c.href=a;</li></ul>",
    "requestResponses": [
        {
            "request": {
                "host": "localhost",
                "port": 9999,
                "protocol": "http",
                "url": "http://localhost:9999/maplayers/ol2-bower/OpenLayers.light.js",
                "path": "/maplayers/ol2-bower/OpenLayers.light.js",
                "httpVersion": "HTTP/1.1",
                "method": "GET",
                "headers": {
                    "Host": "localhost:9999"
                },
                "body": "",
                "raw": "R0VUIC9tYXBsYXllcnMvb2wyLWJvd2VyL09wZW5MYXllcnMubGlnaHQuanMgSFRUUC8xLjENCkhvc3Q6IGxvY2FsaG9zdDo5OTk5DQoNCg==",
                "inScope": true,
                "toolFlag": 16962,
                "referenceID": 0,
                "messageType": "request"
            },
            "response": {
                "statusCode": 200,
                "raw": "SFRUUC8xLjEgMjAwIE9LDQpDb250ZW50LUxlbmd0aDogMjkyNTM2DQpBY2NlcHQtUmFuZ2VzOiBieXRlcw0KQ29udGVudC1UeXBlOiBhcHBsaWNhdGlvbi9qYXZhc2NyaXB0DQpEYXRlOiBGcmksIDA3IE5vdiAyMDE0IDIxOjE5OjQ5IEdNVA0KTGFzdC1Nb2RpZmllZDogRnJpLCAwNyBOb3YgMjAxNCAyMToxOTo0OSBHTVQNCg0KLyoKCiAgT3BlbkxheWVycy5qcyAtLSBPcGVuTGF5ZXJzIE1hcCBWaWV3ZXIgTGlicmFyeQoKICBDb3B5cmlnaHQgKGMpIDIwMDYtMjAxMyBieSBPcGVuTGF5ZXJzIENvbnRyaWJ1dG9ycwogIFB1Ymxpc2hlZCB1bmRlciB0aGUgMi1jbGF1c2UgQlNEIGxpY2Vuc2UuCiAgU2VlIGh0dHA6Ly9vcGVubGF5ZXJzLm9yZy9kZXYvbGljZW5zZS50eHQgZm9yIHRoZSBmdWxsIHRleHQgb2YgdGhlIGxpY2Vuc2UsIGFuZCBodHRwOi8vb3BlbmxheWVycy5vcmcvZGV2L2F1dGhvcnMudHh0IGZvciBmdWxsIGxpc3Qgb2YgY29udHJpYnV0b3JzLgoKICBJbmNsdWRlcyBjb21wcmVzc2VkIGNvZGUgdW5kZXIgdGhlIGZvbGxvd2luZyBsaWNlbnNlczoKCiAgKEZvciB1bmNvbXByZXNzZWQgdmVyc2lvbnMgb2YgdGhlIGNvZGUgdXNlZCwgcGxlYXNlIHNlZSB0aGUKICBPcGVuTGF5ZXJzIEdpdGh1YiByZXBvc2l0b3J5OiA8aHR0cHM6Ly9naXRodWIuY29tL29wZW5sYXllcnMvb3BlbmxheWVycz4pCgoqLwoKLyoqCiAqIENvbnRhaW5zIFhNTEh0dHBSZXF1ZXN0LmpzIDxodHRwOi8vY29kZS5nb29nbGUuY29tL3AveG1saHR0cHJlcXVlc3QvPgogKiBDb3B5cmlnaHQgMjAwNyBTZXJnZXkgSWxpbnNreSAoaHR0cDovL3d3dy5pbGluc2t5LmNvbSkKICoKICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKi8KCi8qKgogKiBPcGVuTGF5ZXJzLlV0aWwucGFnZVBvc2l0aW9uIGlzIGJhc2VkIG9uIFlhaG9vJ3MgZ2V0WFkgbWV0aG9kLCB3aGljaCBpcwogKiBDb3B5cmlnaHQgKGMpIDIwMDYsIFlhaG9vISBJbmMuCiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuCiAqIAogKiBSZWRpc3RyaWJ1dGlvbiBhbmQgdXNlIG9mIHRoaXMgc29mdHdhcmUgaW4gc291cmNlIGFuZCBiaW5hcnkgZm9ybXMsIHdpdGggb3IKICogd2l0aG91dCBtb2RpZmljYXRpb24sIGFyZSBwZXJtaXR0ZWQgcHJvdmlkZWQgdGhhdCB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnMKICogYXJlIG1ldDoKICogCiAqICogUmVkaXN0cmlidXRpb25zIG9mIHNvdXJjZSBjb2RlIG11c3QgcmV0YWluIHRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlLAogKiAgIHRoaXMgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIuCiAqIAogKiAqIFJlZGlzdHJpYnV0aW9ucyBpbiBiaW5hcnkgZm9ybSBtdXN0IHJlcHJvZHVjZSB0aGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSwKICogICB0aGlzIGxpc3Qgb2YgY29uZGl0aW9ucyBhbmQgdGhlIGZvbGxvd2luZyBkaXNjbGFpbWVyIGluIHRoZSBkb2N1bWVudGF0aW9uCiAqICAgYW5kL29yIG90aGVyIG1hdGVyaWFscyBwcm92aWRlZCB3aXRoIHRoZSBkaXN0cmlidXRpb24uCiAqIAogKiAqIE5laXRoZXIgdGhlIG5hbWUgb2YgWWFob28hIEluYy4gbm9yIHRoZSBuYW1lcyBvZiBpdHMgY29udHJpYnV0b3JzIG1heSBiZQogKiAgIHVzZWQgdG8gZW5kb3JzZSBvciBwcm9tb3RlIHByb2R1Y3RzIGRlcml2ZWQgZnJvbSB0aGlzIHNvZnR3YXJlIHdpdGhvdXQKICogICBzcGVjaWZpYyBwcmlvciB3cml0dGVuIHBlcm1pc3Npb24gb2YgWWFob28hIEluYy4KICogCiAqIFRISVMgU09GVFdBUkUgSVMgUFJPVklERUQgQlkgVEhFIENPUFlSSUdIVCBIT0xERVJTIEFORCBDT05UUklCVVRPUlMgIkFTIElTIgogKiBBTkQgQU5ZIEVYUFJFU1MgT1IgSU1QTElFRCBXQVJSQU5USUVTLCBJTkNMVURJTkcsIEJVVCBOT1QgTElNSVRFRCBUTywgVEhFCiAqIElNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFkgQU5EIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFCiAqIEFSRSBESVNDTEFJTUVELiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQ09QWVJJR0hUIE9XTkVSIE9SIENPTlRSSUJVVE9SUyBCRQogKiBMSUFCTEUgRk9SIEFOWSBESVJFQ1QsIElORElSRUNULCBJTkNJREVOVEFMLCBTUEVDSUFMLCBFWEVNUExBUlksIE9SCiAqIENPTlNFUVVFTlRJQUwgREFNQUdFUyAoSU5DTFVESU5HLCBCVVQgTk9UIExJTUlURUQgVE8sIFBST0NVUkVNRU5UIE9GCiAqIFNVQlNUSVRVVEUgR09PRFMgT1IgU0VSVklDRVM7IExPU1MgT0YgVVNFLCBEQVRBLCBPUiBQUk9GSVRTOyBPUiBCVVNJTkVTUwogKiBJTlRFUlJVUFRJT04pIEhPV0VWRVIgQ0FVU0VEIEFORCBPTiBBTlkgVEhFT1JZIE9GIExJQUJJTElUWSwgV0hFVEhFUiBJTgogKiBDT05UUkFDVCwgU1RSSUNUIExJQUJJTElUWSwgT1IgVE9SVCAoSU5DTFVESU5HIE5FR0xJR0VOQ0UgT1IgT1RIRVJXSVNFKQogKiBBUklTSU5HIElOIEFOWSBXQVkgT1VUIE9GIFRIRSBVU0UgT0YgVEhJUyBTT0ZUV0FSRSwgRVZFTiBJRiBBRFZJU0VEIE9GIFRIRSAKICogUE9TU0lCSUxJVFkgT0YgU1VDSCBEQU1BR0UuCiAqLwp2YXIgT3BlbkxheWVycz17VkVSU0lPTl9OVU1CRVI6IlJlbGVhc2UgMi4xMy4xIixzaW5nbGVGaWxlOiEwLF9nZXRTY3JpcHRMb2NhdGlvbjpmdW5jdGlvbigpe2Zvcih2YXIgYT0vKF58KC4qP1wvKSkoT3BlbkxheWVyc1teXC9dKj9cLmpzKShcP3wkKS8sYj1kb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgic2NyaXB0IiksYyxkPSIiLGU9MCxmPWIubGVuZ3RoO2U8ZjtlKyspaWYoYz1iW2VdLmdldEF0dHJpYnV0ZSgic3JjIikpaWYoYz1jLm1hdGNoKGEpKXtkPWNbMV07YnJlYWt9cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGR9fSgpLEltZ1BhdGg6IiJ9O09wZW5MYXllcnMuU3RyaW5nPXtzdGFydHNXaXRoOmZ1bmN0aW9uKGEsYil7cmV0dXJuIDA9PWEuaW5kZXhPZihiKX0sY29udGFpbnM6ZnVuY3Rpb24oYSxiKXtyZXR1cm4tMSE9YS5pbmRleE9mKGIpfSx0cmltOmZ1bmN0aW9uKGEpe3JldHVybiBhLnJlcGxhY2UoL15cc1xzKi8sIiIpLnJlcGxhY2UoL1xzXHMqJC8sIiIpfSxjYW1lbGl6ZTpmdW5jdGlvbihhKXthPWEuc3BsaXQoIi0iKTtmb3IodmFyIGI9YVswXSxjPTEsZD1hLmxlbmd0aDtjPGQ7YysrKXZhciBlPWFbY10sYj1iKyhlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpK2Uuc3Vic3RyaW5nKDEpKTtyZXR1cm4gYn0sZm9ybWF0OmZ1bmN0aW9uKGEsYixjKXtifHwoYj13aW5kb3cpO3JldHVybiBhLnJlcGxhY2UoT3BlbkxheWVycy5TdHJpbmcudG9rZW5SZWdFeCxmdW5jdGlvbihhLGUpe2Zvcih2YXIgZixnPWUuc3BsaXQoL1wuKy8pLGg9MDtoPGcubGVuZ3RoO2grKyl7MD09aCYmKGY9Yik7aWYodm9pZCAwPT09ZilicmVhazsKZj1mW2dbaF1dfSJmdW5jdGlvbiI9PXR5cGVvZiBmJiYoZj1jP2YuYXBwbHkobnVsbCxjKTpmKCkpO3JldHVybiJ1bmRlZmluZWQiPT10eXBlb2YgZj8idW5kZWZpbmVkIjpmfSl9LHRva2VuUmVnRXg6L1wkXHsoW1x3Ll0rPylcfS9nLG51bWJlclJlZ0V4Oi9eKFsrLV0/KSg/PVxkfFwuXGQpXGQqKFwuXGQqKT8oW0VlXShbKy1dP1xkKykpPyQvLGlzTnVtZXJpYzpmdW5jdGlvbihhKXtyZXR1cm4gT3BlbkxheWVycy5TdHJpbmcubnVtYmVyUmVnRXgudGVzdChhKX0sbnVtZXJpY0lmOmZ1bmN0aW9uKGEsYil7dmFyIGM9YTshMD09PWImJihudWxsIT1hJiZhLnJlcGxhY2UpJiYoYT1hLnJlcGxhY2UoL15ccyp8XHMqJC9nLCIiKSk7cmV0dXJuIE9wZW5MYXllcnMuU3RyaW5nLmlzTnVtZXJpYyhhKT9wYXJzZUZsb2F0KGEpOmN9fTsKT3BlbkxheWVycy5OdW1iZXI9e2RlY2ltYWxTZXBhcmF0b3I6Ii4iLHRob3VzYW5kc1NlcGFyYXRvcjoiLCIsbGltaXRTaWdEaWdzOmZ1bmN0aW9uKGEsYil7dmFyIGM9MDswPGImJihjPXBhcnNlRmxvYXQoYS50b1ByZWNpc2lvbihiKSkpO3JldHVybiBjfSxmb3JtYXQ6ZnVuY3Rpb24oYSxiLGMsZCl7Yj0idW5kZWZpbmVkIiE9dHlwZW9mIGI/YjowO2M9InVuZGVmaW5lZCIhPXR5cGVvZiBjP2M6T3BlbkxheWVycy5OdW1iZXIudGhvdXNhbmRzU2VwYXJhdG9yO2Q9InVuZGVmaW5lZCIhPXR5cGVvZiBkP2Q6T3BlbkxheWVycy5OdW1iZXIuZGVjaW1hbFNlcGFyYXRvcjtudWxsIT1iJiYoYT1wYXJzZUZsb2F0KGEudG9GaXhlZChiKSkpO3ZhciBlPWEudG9TdHJpbmcoKS5zcGxpdCgiLiIpOzE9PWUubGVuZ3RoJiZudWxsPT1iJiYoYj0wKTthPWVbMF07aWYoYylmb3IodmFyIGY9LygtP1swLTldKykoWzAtOV17M30pLztmLnRlc3QoYSk7KWE9YS5yZXBsYWNlKGYsIiQxIitjKyIkMiIpOwowPT1iP2I9YTooYz0xPGUubGVuZ3RoP2VbMV06IjAiLG51bGwhPWImJihjKz1BcnJheShiLWMubGVuZ3RoKzEpLmpvaW4oIjAiKSksYj1hK2QrYyk7cmV0dXJuIGJ9LHplcm9QYWQ6ZnVuY3Rpb24oYSxiLGMpe2ZvcihhPWEudG9TdHJpbmcoY3x8MTApO2EubGVuZ3RoPGI7KWE9IjAiK2E7cmV0dXJuIGF9fTsKT3BlbkxheWVycy5GdW5jdGlvbj17YmluZDpmdW5jdGlvbihhLGIpe3ZhciBjPUFycmF5LnByb3RvdHlwZS5zbGljZS5hcHBseShhcmd1bWVudHMsWzJdKTtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgZD1jLmNvbmNhdChBcnJheS5wcm90b3R5cGUuc2xpY2UuYXBwbHkoYXJndW1lbnRzLFswXSkpO3JldHVybiBhLmFwcGx5KGIsZCl9fSxiaW5kQXNFdmVudExpc3RlbmVyOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGZ1bmN0aW9uKGMpe3JldHVybiBhLmNhbGwoYixjfHx3aW5kb3cuZXZlbnQpfX0sRmFsc2U6ZnVuY3Rpb24oKXtyZXR1cm4hMX0sVHJ1ZTpmdW5jdGlvbigpe3JldHVybiEwfSxWb2lkOmZ1bmN0aW9uKCl7fX07Ck9wZW5MYXllcnMuQXJyYXk9e2ZpbHRlcjpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9W107aWYoQXJyYXkucHJvdG90eXBlLmZpbHRlcilkPWEuZmlsdGVyKGIsYyk7ZWxzZXt2YXIgZT1hLmxlbmd0aDtpZigiZnVuY3Rpb24iIT10eXBlb2YgYil0aHJvdyBuZXcgVHlwZUVycm9yO2Zvcih2YXIgZj0wO2Y8ZTtmKyspaWYoZiBpbiBhKXt2YXIgZz1hW2ZdO2IuY2FsbChjLGcsZixhKSYmZC5wdXNoKGcpfX1yZXR1cm4gZH19O09wZW5MYXllcnMuQ2xhc3M9ZnVuY3Rpb24oKXt2YXIgYT1hcmd1bWVudHMubGVuZ3RoLGI9YXJndW1lbnRzWzBdLGM9YXJndW1lbnRzW2EtMV0sZD0iZnVuY3Rpb24iPT10eXBlb2YgYy5pbml0aWFsaXplP2MuaW5pdGlhbGl6ZTpmdW5jdGlvbigpe2IucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxhcmd1bWVudHMpfTsxPGE/KGE9W2QsYl0uY29uY2F0KEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cykuc2xpY2UoMSxhLTEpLGMpLE9wZW5MYXllcnMuaW5oZXJpdC5hcHBseShudWxsLGEpKTpkLnByb3RvdHlwZT1jO3JldHVybiBkfTsKT3BlbkxheWVycy5pbmhlcml0PWZ1bmN0aW9uKGEsYil7dmFyIGM9ZnVuY3Rpb24oKXt9O2MucHJvdG90eXBlPWIucHJvdG90eXBlO2EucHJvdG90eXBlPW5ldyBjO3ZhciBkLGUsYz0yO2ZvcihkPWFyZ3VtZW50cy5sZW5ndGg7YzxkO2MrKyllPWFyZ3VtZW50c1tjXSwiZnVuY3Rpb24iPT09dHlwZW9mIGUmJihlPWUucHJvdG90eXBlKSxPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKGEucHJvdG90eXBlLGUpfTtPcGVuTGF5ZXJzLlV0aWw9T3BlbkxheWVycy5VdGlsfHx7fTtPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kPWZ1bmN0aW9uKGEsYil7YT1hfHx7fTtpZihiKXtmb3IodmFyIGMgaW4gYil7dmFyIGQ9YltjXTt2b2lkIDAhPT1kJiYoYVtjXT1kKX0iZnVuY3Rpb24iPT10eXBlb2Ygd2luZG93LkV2ZW50JiZiIGluc3RhbmNlb2Ygd2luZG93LkV2ZW50fHwoIWIuaGFzT3duUHJvcGVydHl8fCFiLmhhc093blByb3BlcnR5KCJ0b1N0cmluZyIpKXx8KGEudG9TdHJpbmc9Yi50b1N0cmluZyl9cmV0dXJuIGF9O09wZW5MYXllcnMuQm91bmRzPU9wZW5MYXllcnMuQ2xhc3Moe2xlZnQ6bnVsbCxib3R0b206bnVsbCxyaWdodDpudWxsLHRvcDpudWxsLGNlbnRlckxvbkxhdDpudWxsLGluaXRpYWxpemU6ZnVuY3Rpb24oYSxiLGMsZCl7T3BlbkxheWVycy5VdGlsLmlzQXJyYXkoYSkmJihkPWFbM10sYz1hWzJdLGI9YVsxXSxhPWFbMF0pO251bGwhPWEmJih0aGlzLmxlZnQ9T3BlbkxheWVycy5VdGlsLnRvRmxvYXQoYSkpO251bGwhPWImJih0aGlzLmJvdHRvbT1PcGVuTGF5ZXJzLlV0aWwudG9GbG9hdChiKSk7bnVsbCE9YyYmKHRoaXMucmlnaHQ9T3BlbkxheWVycy5VdGlsLnRvRmxvYXQoYykpO251bGwhPWQmJih0aGlzLnRvcD1PcGVuTGF5ZXJzLlV0aWwudG9GbG9hdChkKSl9LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLkJvdW5kcyh0aGlzLmxlZnQsdGhpcy5ib3R0b20sdGhpcy5yaWdodCx0aGlzLnRvcCl9LGVxdWFsczpmdW5jdGlvbihhKXt2YXIgYj0hMTtudWxsIT0KYSYmKGI9dGhpcy5sZWZ0PT1hLmxlZnQmJnRoaXMucmlnaHQ9PWEucmlnaHQmJnRoaXMudG9wPT1hLnRvcCYmdGhpcy5ib3R0b209PWEuYm90dG9tKTtyZXR1cm4gYn0sdG9TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm5bdGhpcy5sZWZ0LHRoaXMuYm90dG9tLHRoaXMucmlnaHQsdGhpcy50b3BdLmpvaW4oKX0sdG9BcnJheTpmdW5jdGlvbihhKXtyZXR1cm4hMD09PWE/W3RoaXMuYm90dG9tLHRoaXMubGVmdCx0aGlzLnRvcCx0aGlzLnJpZ2h0XTpbdGhpcy5sZWZ0LHRoaXMuYm90dG9tLHRoaXMucmlnaHQsdGhpcy50b3BdfSx0b0JCT1g6ZnVuY3Rpb24oYSxiKXtudWxsPT1hJiYoYT02KTt2YXIgYz1NYXRoLnBvdygxMCxhKSxkPU1hdGgucm91bmQodGhpcy5sZWZ0KmMpL2MsZT1NYXRoLnJvdW5kKHRoaXMuYm90dG9tKmMpL2MsZj1NYXRoLnJvdW5kKHRoaXMucmlnaHQqYykvYyxjPU1hdGgucm91bmQodGhpcy50b3AqYykvYztyZXR1cm4hMD09PWI/ZSsiLCIrZCsiLCIrYysiLCIrZjpkKwoiLCIrZSsiLCIrZisiLCIrY30sdG9HZW9tZXRyeTpmdW5jdGlvbigpe3JldHVybiBuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2x5Z29uKFtuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5MaW5lYXJSaW5nKFtuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludCh0aGlzLmxlZnQsdGhpcy5ib3R0b20pLG5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KHRoaXMucmlnaHQsdGhpcy5ib3R0b20pLG5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KHRoaXMucmlnaHQsdGhpcy50b3ApLG5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KHRoaXMubGVmdCx0aGlzLnRvcCldKV0pfSxnZXRXaWR0aDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnJpZ2h0LXRoaXMubGVmdH0sZ2V0SGVpZ2h0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudG9wLXRoaXMuYm90dG9tfSxnZXRTaXplOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLlNpemUodGhpcy5nZXRXaWR0aCgpLHRoaXMuZ2V0SGVpZ2h0KCkpfSwKZ2V0Q2VudGVyUGl4ZWw6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IE9wZW5MYXllcnMuUGl4ZWwoKHRoaXMubGVmdCt0aGlzLnJpZ2h0KS8yLCh0aGlzLmJvdHRvbSt0aGlzLnRvcCkvMil9LGdldENlbnRlckxvbkxhdDpmdW5jdGlvbigpe3RoaXMuY2VudGVyTG9uTGF0fHwodGhpcy5jZW50ZXJMb25MYXQ9bmV3IE9wZW5MYXllcnMuTG9uTGF0KCh0aGlzLmxlZnQrdGhpcy5yaWdodCkvMiwodGhpcy5ib3R0b20rdGhpcy50b3ApLzIpKTtyZXR1cm4gdGhpcy5jZW50ZXJMb25MYXR9LHNjYWxlOmZ1bmN0aW9uKGEsYil7bnVsbD09YiYmKGI9dGhpcy5nZXRDZW50ZXJMb25MYXQoKSk7dmFyIGMsZDsiT3BlbkxheWVycy5Mb25MYXQiPT1iLkNMQVNTX05BTUU/KGM9Yi5sb24sZD1iLmxhdCk6KGM9Yi54LGQ9Yi55KTtyZXR1cm4gbmV3IE9wZW5MYXllcnMuQm91bmRzKCh0aGlzLmxlZnQtYykqYStjLCh0aGlzLmJvdHRvbS1kKSphK2QsKHRoaXMucmlnaHQtYykqYStjLCh0aGlzLnRvcC1kKSphKwpkKX0sYWRkOmZ1bmN0aW9uKGEsYil7aWYobnVsbD09YXx8bnVsbD09Yil0aHJvdyBuZXcgVHlwZUVycm9yKCJCb3VuZHMuYWRkIGNhbm5vdCByZWNlaXZlIG51bGwgdmFsdWVzIik7cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLkJvdW5kcyh0aGlzLmxlZnQrYSx0aGlzLmJvdHRvbStiLHRoaXMucmlnaHQrYSx0aGlzLnRvcCtiKX0sZXh0ZW5kOmZ1bmN0aW9uKGEpe2lmKGEpc3dpdGNoKGEuQ0xBU1NfTkFNRSl7Y2FzZSAiT3BlbkxheWVycy5Mb25MYXQiOnRoaXMuZXh0ZW5kWFkoYS5sb24sYS5sYXQpO2JyZWFrO2Nhc2UgIk9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQiOnRoaXMuZXh0ZW5kWFkoYS54LGEueSk7YnJlYWs7Y2FzZSAiT3BlbkxheWVycy5Cb3VuZHMiOnRoaXMuY2VudGVyTG9uTGF0PW51bGw7aWYobnVsbD09dGhpcy5sZWZ0fHxhLmxlZnQ8dGhpcy5sZWZ0KXRoaXMubGVmdD1hLmxlZnQ7aWYobnVsbD09dGhpcy5ib3R0b218fGEuYm90dG9tPHRoaXMuYm90dG9tKXRoaXMuYm90dG9tPQphLmJvdHRvbTtpZihudWxsPT10aGlzLnJpZ2h0fHxhLnJpZ2h0PnRoaXMucmlnaHQpdGhpcy5yaWdodD1hLnJpZ2h0O2lmKG51bGw9PXRoaXMudG9wfHxhLnRvcD50aGlzLnRvcCl0aGlzLnRvcD1hLnRvcH19LGV4dGVuZFhZOmZ1bmN0aW9uKGEsYil7dGhpcy5jZW50ZXJMb25MYXQ9bnVsbDtpZihudWxsPT10aGlzLmxlZnR8fGE8dGhpcy5sZWZ0KXRoaXMubGVmdD1hO2lmKG51bGw9PXRoaXMuYm90dG9tfHxiPHRoaXMuYm90dG9tKXRoaXMuYm90dG9tPWI7aWYobnVsbD09dGhpcy5yaWdodHx8YT50aGlzLnJpZ2h0KXRoaXMucmlnaHQ9YTtpZihudWxsPT10aGlzLnRvcHx8Yj50aGlzLnRvcCl0aGlzLnRvcD1ifSxjb250YWluc0xvbkxhdDpmdW5jdGlvbihhLGIpeyJib29sZWFuIj09PXR5cGVvZiBiJiYoYj17aW5jbHVzaXZlOmJ9KTtiPWJ8fHt9O3ZhciBjPXRoaXMuY29udGFpbnMoYS5sb24sYS5sYXQsYi5pbmNsdXNpdmUpLGQ9Yi53b3JsZEJvdW5kcztkJiYhYyYmKGM9ZC5nZXRXaWR0aCgpLApkPU1hdGgucm91bmQoKGEubG9uLShkLmxlZnQrZC5yaWdodCkvMikvYyksYz10aGlzLmNvbnRhaW5zTG9uTGF0KHtsb246YS5sb24tZCpjLGxhdDphLmxhdH0se2luY2x1c2l2ZTpiLmluY2x1c2l2ZX0pKTtyZXR1cm4gY30sY29udGFpbnNQaXhlbDpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLmNvbnRhaW5zKGEueCxhLnksYil9LGNvbnRhaW5zOmZ1bmN0aW9uKGEsYixjKXtudWxsPT1jJiYoYz0hMCk7aWYobnVsbD09YXx8bnVsbD09YilyZXR1cm4hMTthPU9wZW5MYXllcnMuVXRpbC50b0Zsb2F0KGEpO2I9T3BlbkxheWVycy5VdGlsLnRvRmxvYXQoYik7dmFyIGQ9ITE7cmV0dXJuIGQ9Yz9hPj10aGlzLmxlZnQmJmE8PXRoaXMucmlnaHQmJmI+PXRoaXMuYm90dG9tJiZiPD10aGlzLnRvcDphPnRoaXMubGVmdCYmYTx0aGlzLnJpZ2h0JiZiPnRoaXMuYm90dG9tJiZiPHRoaXMudG9wfSxpbnRlcnNlY3RzQm91bmRzOmZ1bmN0aW9uKGEsYil7ImJvb2xlYW4iPT09dHlwZW9mIGImJihiPQp7aW5jbHVzaXZlOmJ9KTtiPWJ8fHt9O2lmKGIud29ybGRCb3VuZHMpe3ZhciBjPXRoaXMud3JhcERhdGVMaW5lKGIud29ybGRCb3VuZHMpO2E9YS53cmFwRGF0ZUxpbmUoYi53b3JsZEJvdW5kcyl9ZWxzZSBjPXRoaXM7bnVsbD09Yi5pbmNsdXNpdmUmJihiLmluY2x1c2l2ZT0hMCk7dmFyIGQ9ITEsZT1jLmxlZnQ9PWEucmlnaHR8fGMucmlnaHQ9PWEubGVmdHx8Yy50b3A9PWEuYm90dG9tfHxjLmJvdHRvbT09YS50b3A7aWYoYi5pbmNsdXNpdmV8fCFlKXZhciBkPWEudG9wPj1jLmJvdHRvbSYmYS50b3A8PWMudG9wfHxjLnRvcD5hLmJvdHRvbSYmYy50b3A8YS50b3AsZT1hLmxlZnQ+PWMubGVmdCYmYS5sZWZ0PD1jLnJpZ2h0fHxjLmxlZnQ+PWEubGVmdCYmYy5sZWZ0PD1hLnJpZ2h0LGY9YS5yaWdodD49Yy5sZWZ0JiZhLnJpZ2h0PD1jLnJpZ2h0fHxjLnJpZ2h0Pj1hLmxlZnQmJmMucmlnaHQ8PWEucmlnaHQsZD0oYS5ib3R0b20+PWMuYm90dG9tJiZhLmJvdHRvbTw9Yy50b3B8fGMuYm90dG9tPj0KYS5ib3R0b20mJmMuYm90dG9tPD1hLnRvcHx8ZCkmJihlfHxmKTtpZihiLndvcmxkQm91bmRzJiYhZCl7dmFyIGc9Yi53b3JsZEJvdW5kcyxlPWcuZ2V0V2lkdGgoKSxmPSFnLmNvbnRhaW5zQm91bmRzKGMpLGc9IWcuY29udGFpbnNCb3VuZHMoYSk7ZiYmIWc/KGE9YS5hZGQoLWUsMCksZD1jLmludGVyc2VjdHNCb3VuZHMoYSx7aW5jbHVzaXZlOmIuaW5jbHVzaXZlfSkpOmcmJiFmJiYoYz1jLmFkZCgtZSwwKSxkPWEuaW50ZXJzZWN0c0JvdW5kcyhjLHtpbmNsdXNpdmU6Yi5pbmNsdXNpdmV9KSl9cmV0dXJuIGR9LGNvbnRhaW5zQm91bmRzOmZ1bmN0aW9uKGEsYixjKXtudWxsPT1iJiYoYj0hMSk7bnVsbD09YyYmKGM9ITApO3ZhciBkPXRoaXMuY29udGFpbnMoYS5sZWZ0LGEuYm90dG9tLGMpLGU9dGhpcy5jb250YWlucyhhLnJpZ2h0LGEuYm90dG9tLGMpLGY9dGhpcy5jb250YWlucyhhLmxlZnQsYS50b3AsYyk7YT10aGlzLmNvbnRhaW5zKGEucmlnaHQsYS50b3AsYyk7cmV0dXJuIGI/CmR8fGV8fGZ8fGE6ZCYmZSYmZiYmYX0sZGV0ZXJtaW5lUXVhZHJhbnQ6ZnVuY3Rpb24oYSl7dmFyIGI9IiIsYz10aGlzLmdldENlbnRlckxvbkxhdCgpLGI9YisoYS5sYXQ8Yy5sYXQ/ImIiOiJ0Iik7cmV0dXJuIGIrPWEubG9uPGMubG9uPyJsIjoiciJ9LHRyYW5zZm9ybTpmdW5jdGlvbihhLGIpe3RoaXMuY2VudGVyTG9uTGF0PW51bGw7dmFyIGM9T3BlbkxheWVycy5Qcm9qZWN0aW9uLnRyYW5zZm9ybSh7eDp0aGlzLmxlZnQseTp0aGlzLmJvdHRvbX0sYSxiKSxkPU9wZW5MYXllcnMuUHJvamVjdGlvbi50cmFuc2Zvcm0oe3g6dGhpcy5yaWdodCx5OnRoaXMuYm90dG9tfSxhLGIpLGU9T3BlbkxheWVycy5Qcm9qZWN0aW9uLnRyYW5zZm9ybSh7eDp0aGlzLmxlZnQseTp0aGlzLnRvcH0sYSxiKSxmPU9wZW5MYXllcnMuUHJvamVjdGlvbi50cmFuc2Zvcm0oe3g6dGhpcy5yaWdodCx5OnRoaXMudG9wfSxhLGIpO3RoaXMubGVmdD1NYXRoLm1pbihjLngsZS54KTt0aGlzLmJvdHRvbT1NYXRoLm1pbihjLnksCmQueSk7dGhpcy5yaWdodD1NYXRoLm1heChkLngsZi54KTt0aGlzLnRvcD1NYXRoLm1heChlLnksZi55KTtyZXR1cm4gdGhpc30sd3JhcERhdGVMaW5lOmZ1bmN0aW9uKGEsYil7Yj1ifHx7fTt2YXIgYz1iLmxlZnRUb2xlcmFuY2V8fDAsZD1iLnJpZ2h0VG9sZXJhbmNlfHwwLGU9dGhpcy5jbG9uZSgpO2lmKGEpe2Zvcih2YXIgZj1hLmdldFdpZHRoKCk7ZS5sZWZ0PGEubGVmdCYmZS5yaWdodC1kPD1hLmxlZnQ7KWU9ZS5hZGQoZiwwKTtmb3IoO2UubGVmdCtjPj1hLnJpZ2h0JiZlLnJpZ2h0PmEucmlnaHQ7KWU9ZS5hZGQoLWYsMCk7Yz1lLmxlZnQrYztjPGEucmlnaHQmJihjPmEubGVmdCYmZS5yaWdodC1kPmEucmlnaHQpJiYoZT1lLmFkZCgtZiwwKSl9cmV0dXJuIGV9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuQm91bmRzIn0pOwpPcGVuTGF5ZXJzLkJvdW5kcy5mcm9tU3RyaW5nPWZ1bmN0aW9uKGEsYil7dmFyIGM9YS5zcGxpdCgiLCIpO3JldHVybiBPcGVuTGF5ZXJzLkJvdW5kcy5mcm9tQXJyYXkoYyxiKX07T3BlbkxheWVycy5Cb3VuZHMuZnJvbUFycmF5PWZ1bmN0aW9uKGEsYil7cmV0dXJuITA9PT1iP25ldyBPcGVuTGF5ZXJzLkJvdW5kcyhhWzFdLGFbMF0sYVszXSxhWzJdKTpuZXcgT3BlbkxheWVycy5Cb3VuZHMoYVswXSxhWzFdLGFbMl0sYVszXSl9O09wZW5MYXllcnMuQm91bmRzLmZyb21TaXplPWZ1bmN0aW9uKGEpe3JldHVybiBuZXcgT3BlbkxheWVycy5Cb3VuZHMoMCxhLmgsYS53LDApfTtPcGVuTGF5ZXJzLkJvdW5kcy5vcHBvc2l0ZVF1YWRyYW50PWZ1bmN0aW9uKGEpe3ZhciBiO2I9IiIrKCJ0Ij09YS5jaGFyQXQoMCk/ImIiOiJ0Iik7cmV0dXJuIGIrPSJsIj09YS5jaGFyQXQoMSk/InIiOiJsIn07T3BlbkxheWVycy5FbGVtZW50PXt2aXNpYmxlOmZ1bmN0aW9uKGEpe3JldHVybiJub25lIiE9T3BlbkxheWVycy5VdGlsLmdldEVsZW1lbnQoYSkuc3R5bGUuZGlzcGxheX0sdG9nZ2xlOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPTAsYj1hcmd1bWVudHMubGVuZ3RoO2E8YjthKyspe3ZhciBjPU9wZW5MYXllcnMuVXRpbC5nZXRFbGVtZW50KGFyZ3VtZW50c1thXSksZD1PcGVuTGF5ZXJzLkVsZW1lbnQudmlzaWJsZShjKT8ibm9uZSI6IiI7Yy5zdHlsZS5kaXNwbGF5PWR9fSxyZW1vdmU6ZnVuY3Rpb24oYSl7YT1PcGVuTGF5ZXJzLlV0aWwuZ2V0RWxlbWVudChhKTthLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYSl9LGdldEhlaWdodDpmdW5jdGlvbihhKXthPU9wZW5MYXllcnMuVXRpbC5nZXRFbGVtZW50KGEpO3JldHVybiBhLm9mZnNldEhlaWdodH0saGFzQ2xhc3M6ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLmNsYXNzTmFtZTtyZXR1cm4hIWMmJlJlZ0V4cCgiKF58XFxzKSIrYisiKFxcc3wkKSIpLnRlc3QoYyl9LAphZGRDbGFzczpmdW5jdGlvbihhLGIpe09wZW5MYXllcnMuRWxlbWVudC5oYXNDbGFzcyhhLGIpfHwoYS5jbGFzc05hbWUrPShhLmNsYXNzTmFtZT8iICI6IiIpK2IpO3JldHVybiBhfSxyZW1vdmVDbGFzczpmdW5jdGlvbihhLGIpe3ZhciBjPWEuY2xhc3NOYW1lO2MmJihhLmNsYXNzTmFtZT1PcGVuTGF5ZXJzLlN0cmluZy50cmltKGMucmVwbGFjZShSZWdFeHAoIihefFxccyspIitiKyIoXFxzK3wkKSIpLCIgIikpKTtyZXR1cm4gYX0sdG9nZ2xlQ2xhc3M6ZnVuY3Rpb24oYSxiKXtPcGVuTGF5ZXJzLkVsZW1lbnQuaGFzQ2xhc3MoYSxiKT9PcGVuTGF5ZXJzLkVsZW1lbnQucmVtb3ZlQ2xhc3MoYSxiKTpPcGVuTGF5ZXJzLkVsZW1lbnQuYWRkQ2xhc3MoYSxiKTtyZXR1cm4gYX0sZ2V0U3R5bGU6ZnVuY3Rpb24oYSxiKXthPU9wZW5MYXllcnMuVXRpbC5nZXRFbGVtZW50KGEpO3ZhciBjPW51bGw7aWYoYSYmYS5zdHlsZSl7Yz1hLnN0eWxlW09wZW5MYXllcnMuU3RyaW5nLmNhbWVsaXplKGIpXTsKY3x8KGRvY3VtZW50LmRlZmF1bHRWaWV3JiZkb2N1bWVudC5kZWZhdWx0Vmlldy5nZXRDb21wdXRlZFN0eWxlP2M9KGM9ZG9jdW1lbnQuZGVmYXVsdFZpZXcuZ2V0Q29tcHV0ZWRTdHlsZShhLG51bGwpKT9jLmdldFByb3BlcnR5VmFsdWUoYik6bnVsbDphLmN1cnJlbnRTdHlsZSYmKGM9YS5jdXJyZW50U3R5bGVbT3BlbkxheWVycy5TdHJpbmcuY2FtZWxpemUoYildKSk7dmFyIGQ9WyJsZWZ0IiwidG9wIiwicmlnaHQiLCJib3R0b20iXTt3aW5kb3cub3BlcmEmJigtMSE9T3BlbkxheWVycy5VdGlsLmluZGV4T2YoZCxiKSYmInN0YXRpYyI9PU9wZW5MYXllcnMuRWxlbWVudC5nZXRTdHlsZShhLCJwb3NpdGlvbiIpKSYmKGM9ImF1dG8iKX1yZXR1cm4iYXV0byI9PWM/bnVsbDpjfX07T3BlbkxheWVycy5Mb25MYXQ9T3BlbkxheWVycy5DbGFzcyh7bG9uOjAsbGF0OjAsaW5pdGlhbGl6ZTpmdW5jdGlvbihhLGIpe09wZW5MYXllcnMuVXRpbC5pc0FycmF5KGEpJiYoYj1hWzFdLGE9YVswXSk7dGhpcy5sb249T3BlbkxheWVycy5VdGlsLnRvRmxvYXQoYSk7dGhpcy5sYXQ9T3BlbkxheWVycy5VdGlsLnRvRmxvYXQoYil9LHRvU3RyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuImxvbj0iK3RoaXMubG9uKyIsbGF0PSIrdGhpcy5sYXR9LHRvU2hvcnRTdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sb24rIiwgIit0aGlzLmxhdH0sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IE9wZW5MYXllcnMuTG9uTGF0KHRoaXMubG9uLHRoaXMubGF0KX0sYWRkOmZ1bmN0aW9uKGEsYil7aWYobnVsbD09YXx8bnVsbD09Yil0aHJvdyBuZXcgVHlwZUVycm9yKCJMb25MYXQuYWRkIGNhbm5vdCByZWNlaXZlIG51bGwgdmFsdWVzIik7cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLkxvbkxhdCh0aGlzLmxvbisKT3BlbkxheWVycy5VdGlsLnRvRmxvYXQoYSksdGhpcy5sYXQrT3BlbkxheWVycy5VdGlsLnRvRmxvYXQoYikpfSxlcXVhbHM6ZnVuY3Rpb24oYSl7dmFyIGI9ITE7bnVsbCE9YSYmKGI9dGhpcy5sb249PWEubG9uJiZ0aGlzLmxhdD09YS5sYXR8fGlzTmFOKHRoaXMubG9uKSYmaXNOYU4odGhpcy5sYXQpJiZpc05hTihhLmxvbikmJmlzTmFOKGEubGF0KSk7cmV0dXJuIGJ9LHRyYW5zZm9ybTpmdW5jdGlvbihhLGIpe3ZhciBjPU9wZW5MYXllcnMuUHJvamVjdGlvbi50cmFuc2Zvcm0oe3g6dGhpcy5sb24seTp0aGlzLmxhdH0sYSxiKTt0aGlzLmxvbj1jLng7dGhpcy5sYXQ9Yy55O3JldHVybiB0aGlzfSx3cmFwRGF0ZUxpbmU6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jbG9uZSgpO2lmKGEpe2Zvcig7Yi5sb248YS5sZWZ0OyliLmxvbis9YS5nZXRXaWR0aCgpO2Zvcig7Yi5sb24+YS5yaWdodDspYi5sb24tPWEuZ2V0V2lkdGgoKX1yZXR1cm4gYn0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Mb25MYXQifSk7Ck9wZW5MYXllcnMuTG9uTGF0LmZyb21TdHJpbmc9ZnVuY3Rpb24oYSl7YT1hLnNwbGl0KCIsIik7cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLkxvbkxhdChhWzBdLGFbMV0pfTtPcGVuTGF5ZXJzLkxvbkxhdC5mcm9tQXJyYXk9ZnVuY3Rpb24oYSl7dmFyIGI9T3BlbkxheWVycy5VdGlsLmlzQXJyYXkoYSk7cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLkxvbkxhdChiJiZhWzBdLGImJmFbMV0pfTtPcGVuTGF5ZXJzLlBpeGVsPU9wZW5MYXllcnMuQ2xhc3Moe3g6MCx5OjAsaW5pdGlhbGl6ZTpmdW5jdGlvbihhLGIpe3RoaXMueD1wYXJzZUZsb2F0KGEpO3RoaXMueT1wYXJzZUZsb2F0KGIpfSx0b1N0cmluZzpmdW5jdGlvbigpe3JldHVybiJ4PSIrdGhpcy54KyIseT0iK3RoaXMueX0sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IE9wZW5MYXllcnMuUGl4ZWwodGhpcy54LHRoaXMueSl9LGVxdWFsczpmdW5jdGlvbihhKXt2YXIgYj0hMTtudWxsIT1hJiYoYj10aGlzLng9PWEueCYmdGhpcy55PT1hLnl8fGlzTmFOKHRoaXMueCkmJmlzTmFOKHRoaXMueSkmJmlzTmFOKGEueCkmJmlzTmFOKGEueSkpO3JldHVybiBifSxkaXN0YW5jZVRvOmZ1bmN0aW9uKGEpe3JldHVybiBNYXRoLnNxcnQoTWF0aC5wb3codGhpcy54LWEueCwyKStNYXRoLnBvdyh0aGlzLnktYS55LDIpKX0sYWRkOmZ1bmN0aW9uKGEsYil7aWYobnVsbD09YXx8bnVsbD09Yil0aHJvdyBuZXcgVHlwZUVycm9yKCJQaXhlbC5hZGQgY2Fubm90IHJlY2VpdmUgbnVsbCB2YWx1ZXMiKTsKcmV0dXJuIG5ldyBPcGVuTGF5ZXJzLlBpeGVsKHRoaXMueCthLHRoaXMueStiKX0sb2Zmc2V0OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY2xvbmUoKTthJiYoYj10aGlzLmFkZChhLngsYS55KSk7cmV0dXJuIGJ9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuUGl4ZWwifSk7T3BlbkxheWVycy5TaXplPU9wZW5MYXllcnMuQ2xhc3Moe3c6MCxoOjAsaW5pdGlhbGl6ZTpmdW5jdGlvbihhLGIpe3RoaXMudz1wYXJzZUZsb2F0KGEpO3RoaXMuaD1wYXJzZUZsb2F0KGIpfSx0b1N0cmluZzpmdW5jdGlvbigpe3JldHVybiJ3PSIrdGhpcy53KyIsaD0iK3RoaXMuaH0sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IE9wZW5MYXllcnMuU2l6ZSh0aGlzLncsdGhpcy5oKX0sZXF1YWxzOmZ1bmN0aW9uKGEpe3ZhciBiPSExO251bGwhPWEmJihiPXRoaXMudz09YS53JiZ0aGlzLmg9PWEuaHx8aXNOYU4odGhpcy53KSYmaXNOYU4odGhpcy5oKSYmaXNOYU4oYS53KSYmaXNOYU4oYS5oKSk7cmV0dXJuIGJ9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuU2l6ZSJ9KTtPcGVuTGF5ZXJzLkNvbnNvbGU9e2xvZzpmdW5jdGlvbigpe30sZGVidWc6ZnVuY3Rpb24oKXt9LGluZm86ZnVuY3Rpb24oKXt9LHdhcm46ZnVuY3Rpb24oKXt9LGVycm9yOmZ1bmN0aW9uKCl7fSx1c2VyRXJyb3I6ZnVuY3Rpb24oYSl7YWxlcnQoYSl9LGFzc2VydDpmdW5jdGlvbigpe30sZGlyOmZ1bmN0aW9uKCl7fSxkaXJ4bWw6ZnVuY3Rpb24oKXt9LHRyYWNlOmZ1bmN0aW9uKCl7fSxncm91cDpmdW5jdGlvbigpe30sZ3JvdXBFbmQ6ZnVuY3Rpb24oKXt9LHRpbWU6ZnVuY3Rpb24oKXt9LHRpbWVFbmQ6ZnVuY3Rpb24oKXt9LHByb2ZpbGU6ZnVuY3Rpb24oKXt9LHByb2ZpbGVFbmQ6ZnVuY3Rpb24oKXt9LGNvdW50OmZ1bmN0aW9uKCl7fSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkNvbnNvbGUifTsKKGZ1bmN0aW9uKCl7Zm9yKHZhciBhPWRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJzY3JpcHQiKSxiPTAsYz1hLmxlbmd0aDtiPGM7KytiKWlmKC0xIT1hW2JdLnNyYy5pbmRleE9mKCJmaXJlYnVnLmpzIikmJmNvbnNvbGUpe09wZW5MYXllcnMuVXRpbC5leHRlbmQoT3BlbkxheWVycy5Db25zb2xlLGNvbnNvbGUpO2JyZWFrfX0pKCk7T3BlbkxheWVycy5MYW5nPXtjb2RlOm51bGwsZGVmYXVsdENvZGU6ImVuIixnZXRDb2RlOmZ1bmN0aW9uKCl7T3BlbkxheWVycy5MYW5nLmNvZGV8fE9wZW5MYXllcnMuTGFuZy5zZXRDb2RlKCk7cmV0dXJuIE9wZW5MYXllcnMuTGFuZy5jb2RlfSxzZXRDb2RlOmZ1bmN0aW9uKGEpe3ZhciBiO2F8fChhPSJtc2llIj09T3BlbkxheWVycy5CUk9XU0VSX05BTUU/bmF2aWdhdG9yLnVzZXJMYW5ndWFnZTpuYXZpZ2F0b3IubGFuZ3VhZ2UpO2E9YS5zcGxpdCgiLSIpO2FbMF09YVswXS50b0xvd2VyQ2FzZSgpOyJvYmplY3QiPT10eXBlb2YgT3BlbkxheWVycy5MYW5nW2FbMF1dJiYoYj1hWzBdKTtpZihhWzFdKXt2YXIgYz1hWzBdKyItIithWzFdLnRvVXBwZXJDYXNlKCk7Im9iamVjdCI9PXR5cGVvZiBPcGVuTGF5ZXJzLkxhbmdbY10mJihiPWMpfWJ8fChPcGVuTGF5ZXJzLkNvbnNvbGUud2FybigiRmFpbGVkIHRvIGZpbmQgT3BlbkxheWVycy5MYW5nLiIrYS5qb2luKCItIikrIiBkaWN0aW9uYXJ5LCBmYWxsaW5nIGJhY2sgdG8gZGVmYXVsdCBsYW5ndWFnZSIpLApiPU9wZW5MYXllcnMuTGFuZy5kZWZhdWx0Q29kZSk7T3BlbkxheWVycy5MYW5nLmNvZGU9Yn0sdHJhbnNsYXRlOmZ1bmN0aW9uKGEsYil7dmFyIGM9T3BlbkxheWVycy5MYW5nW09wZW5MYXllcnMuTGFuZy5nZXRDb2RlKCldOyhjPWMmJmNbYV0pfHwoYz1hKTtiJiYoYz1PcGVuTGF5ZXJzLlN0cmluZy5mb3JtYXQoYyxiKSk7cmV0dXJuIGN9fTtPcGVuTGF5ZXJzLmkxOG49T3BlbkxheWVycy5MYW5nLnRyYW5zbGF0ZTtPcGVuTGF5ZXJzLlV0aWw9T3BlbkxheWVycy5VdGlsfHx7fTtPcGVuTGF5ZXJzLlV0aWwuZ2V0RWxlbWVudD1mdW5jdGlvbigpe2Zvcih2YXIgYT1bXSxiPTAsYz1hcmd1bWVudHMubGVuZ3RoO2I8YztiKyspe3ZhciBkPWFyZ3VtZW50c1tiXTsic3RyaW5nIj09dHlwZW9mIGQmJihkPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGQpKTtpZigxPT1hcmd1bWVudHMubGVuZ3RoKXJldHVybiBkO2EucHVzaChkKX1yZXR1cm4gYX07T3BlbkxheWVycy5VdGlsLmlzRWxlbWVudD1mdW5jdGlvbihhKXtyZXR1cm4hKCFhfHwxIT09YS5ub2RlVHlwZSl9O09wZW5MYXllcnMuVXRpbC5pc0FycmF5PWZ1bmN0aW9uKGEpe3JldHVybiJbb2JqZWN0IEFycmF5XSI9PT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoYSl9O09wZW5MYXllcnMuVXRpbC5yZW1vdmVJdGVtPWZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPWEubGVuZ3RoLTE7MDw9YztjLS0pYVtjXT09YiYmYS5zcGxpY2UoYywxKTtyZXR1cm4gYX07Ck9wZW5MYXllcnMuVXRpbC5pbmRleE9mPWZ1bmN0aW9uKGEsYil7aWYoImZ1bmN0aW9uIj09dHlwZW9mIGEuaW5kZXhPZilyZXR1cm4gYS5pbmRleE9mKGIpO2Zvcih2YXIgYz0wLGQ9YS5sZW5ndGg7YzxkO2MrKylpZihhW2NdPT1iKXJldHVybiBjO3JldHVybi0xfTtPcGVuTGF5ZXJzLlV0aWwuZG90bGVzcz0vXC4vZzsKT3BlbkxheWVycy5VdGlsLm1vZGlmeURPTUVsZW1lbnQ9ZnVuY3Rpb24oYSxiLGMsZCxlLGYsZyxoKXtiJiYoYS5pZD1iLnJlcGxhY2UoT3BlbkxheWVycy5VdGlsLmRvdGxlc3MsIl8iKSk7YyYmKGEuc3R5bGUubGVmdD1jLngrInB4IixhLnN0eWxlLnRvcD1jLnkrInB4Iik7ZCYmKGEuc3R5bGUud2lkdGg9ZC53KyJweCIsYS5zdHlsZS5oZWlnaHQ9ZC5oKyJweCIpO2UmJihhLnN0eWxlLnBvc2l0aW9uPWUpO2YmJihhLnN0eWxlLmJvcmRlcj1mKTtnJiYoYS5zdHlsZS5vdmVyZmxvdz1nKTswPD1wYXJzZUZsb2F0KGgpJiYxPnBhcnNlRmxvYXQoaCk/KGEuc3R5bGUuZmlsdGVyPSJhbHBoYShvcGFjaXR5PSIrMTAwKmgrIikiLGEuc3R5bGUub3BhY2l0eT1oKToxPT1wYXJzZUZsb2F0KGgpJiYoYS5zdHlsZS5maWx0ZXI9IiIsYS5zdHlsZS5vcGFjaXR5PSIiKX07Ck9wZW5MYXllcnMuVXRpbC5jcmVhdGVEaXY9ZnVuY3Rpb24oYSxiLGMsZCxlLGYsZyxoKXt2YXIgaz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTtkJiYoay5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2U9InVybCgiK2QrIikiKTthfHwoYT1PcGVuTGF5ZXJzLlV0aWwuY3JlYXRlVW5pcXVlSUQoIk9wZW5MYXllcnNEaXYiKSk7ZXx8KGU9ImFic29sdXRlIik7T3BlbkxheWVycy5VdGlsLm1vZGlmeURPTUVsZW1lbnQoayxhLGIsYyxlLGYsZyxoKTtyZXR1cm4ga307Ck9wZW5MYXllcnMuVXRpbC5jcmVhdGVJbWFnZT1mdW5jdGlvbihhLGIsYyxkLGUsZixnLGgpe3ZhciBrPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImltZyIpO2F8fChhPU9wZW5MYXllcnMuVXRpbC5jcmVhdGVVbmlxdWVJRCgiT3BlbkxheWVyc0RpdiIpKTtlfHwoZT0icmVsYXRpdmUiKTtPcGVuTGF5ZXJzLlV0aWwubW9kaWZ5RE9NRWxlbWVudChrLGEsYixjLGUsZixudWxsLGcpO2gmJihrLnN0eWxlLmRpc3BsYXk9Im5vbmUiLGI9ZnVuY3Rpb24oKXtrLnN0eWxlLmRpc3BsYXk9IiI7T3BlbkxheWVycy5FdmVudC5zdG9wT2JzZXJ2aW5nRWxlbWVudChrKX0sT3BlbkxheWVycy5FdmVudC5vYnNlcnZlKGssImxvYWQiLGIpLE9wZW5MYXllcnMuRXZlbnQub2JzZXJ2ZShrLCJlcnJvciIsYikpO2suc3R5bGUuYWx0PWE7ay5nYWxsZXJ5SW1nPSJubyI7ZCYmKGsuc3JjPWQpO3JldHVybiBrfTtPcGVuTGF5ZXJzLklNQUdFX1JFTE9BRF9BVFRFTVBUUz0wOwpPcGVuTGF5ZXJzLlV0aWwuYWxwaGFIYWNrTmVlZGVkPW51bGw7T3BlbkxheWVycy5VdGlsLmFscGhhSGFjaz1mdW5jdGlvbigpe2lmKG51bGw9PU9wZW5MYXllcnMuVXRpbC5hbHBoYUhhY2tOZWVkZWQpe3ZhciBhPW5hdmlnYXRvci5hcHBWZXJzaW9uLnNwbGl0KCJNU0lFIiksYT1wYXJzZUZsb2F0KGFbMV0pLGI9ITE7dHJ5e2I9ISFkb2N1bWVudC5ib2R5LmZpbHRlcnN9Y2F0Y2goYyl7fU9wZW5MYXllcnMuVXRpbC5hbHBoYUhhY2tOZWVkZWQ9YiYmNS41PD1hJiY3PmF9cmV0dXJuIE9wZW5MYXllcnMuVXRpbC5hbHBoYUhhY2tOZWVkZWR9OwpPcGVuTGF5ZXJzLlV0aWwubW9kaWZ5QWxwaGFJbWFnZURpdj1mdW5jdGlvbihhLGIsYyxkLGUsZixnLGgsayl7T3BlbkxheWVycy5VdGlsLm1vZGlmeURPTUVsZW1lbnQoYSxiLGMsZCxmLG51bGwsbnVsbCxrKTtiPWEuY2hpbGROb2Rlc1swXTtlJiYoYi5zcmM9ZSk7T3BlbkxheWVycy5VdGlsLm1vZGlmeURPTUVsZW1lbnQoYixhLmlkKyJfaW5uZXJJbWFnZSIsbnVsbCxkLCJyZWxhdGl2ZSIsZyk7T3BlbkxheWVycy5VdGlsLmFscGhhSGFjaygpJiYoIm5vbmUiIT1hLnN0eWxlLmRpc3BsYXkmJihhLnN0eWxlLmRpc3BsYXk9ImlubGluZS1ibG9jayIpLG51bGw9PWgmJihoPSJzY2FsZSIpLGEuc3R5bGUuZmlsdGVyPSJwcm9naWQ6RFhJbWFnZVRyYW5zZm9ybS5NaWNyb3NvZnQuQWxwaGFJbWFnZUxvYWRlcihzcmM9JyIrYi5zcmMrIicsIHNpemluZ01ldGhvZD0nIitoKyInKSIsMDw9cGFyc2VGbG9hdChhLnN0eWxlLm9wYWNpdHkpJiYxPnBhcnNlRmxvYXQoYS5zdHlsZS5vcGFjaXR5KSYmCihhLnN0eWxlLmZpbHRlcis9IiBhbHBoYShvcGFjaXR5PSIrMTAwKmEuc3R5bGUub3BhY2l0eSsiKSIpLGIuc3R5bGUuZmlsdGVyPSJhbHBoYShvcGFjaXR5PTApIil9O09wZW5MYXllcnMuVXRpbC5jcmVhdGVBbHBoYUltYWdlRGl2PWZ1bmN0aW9uKGEsYixjLGQsZSxmLGcsaCxrKXt2YXIgbD1PcGVuTGF5ZXJzLlV0aWwuY3JlYXRlRGl2KCk7az1PcGVuTGF5ZXJzLlV0aWwuY3JlYXRlSW1hZ2UobnVsbCxudWxsLG51bGwsbnVsbCxudWxsLG51bGwsbnVsbCxrKTtrLmNsYXNzTmFtZT0ib2xBbHBoYUltZyI7bC5hcHBlbmRDaGlsZChrKTtPcGVuTGF5ZXJzLlV0aWwubW9kaWZ5QWxwaGFJbWFnZURpdihsLGEsYixjLGQsZSxmLGcsaCk7cmV0dXJuIGx9O09wZW5MYXllcnMuVXRpbC51cHBlckNhc2VPYmplY3Q9ZnVuY3Rpb24oYSl7dmFyIGI9e30sYztmb3IoYyBpbiBhKWJbYy50b1VwcGVyQ2FzZSgpXT1hW2NdO3JldHVybiBifTsKT3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHM9ZnVuY3Rpb24oYSxiKXthPWF8fHt9O3ZhciBjPSJmdW5jdGlvbiI9PXR5cGVvZiB3aW5kb3cuRXZlbnQmJmIgaW5zdGFuY2VvZiB3aW5kb3cuRXZlbnQsZDtmb3IoZCBpbiBiKWlmKHZvaWQgMD09PWFbZF18fCFjJiZiLmhhc093blByb3BlcnR5JiZiLmhhc093blByb3BlcnR5KGQpJiYhYS5oYXNPd25Qcm9wZXJ0eShkKSlhW2RdPWJbZF07IWMmJihiJiZiLmhhc093blByb3BlcnR5JiZiLmhhc093blByb3BlcnR5KCJ0b1N0cmluZyIpJiYhYS5oYXNPd25Qcm9wZXJ0eSgidG9TdHJpbmciKSkmJihhLnRvU3RyaW5nPWIudG9TdHJpbmcpO3JldHVybiBhfTsKT3BlbkxheWVycy5VdGlsLmdldFBhcmFtZXRlclN0cmluZz1mdW5jdGlvbihhKXt2YXIgYj1bXSxjO2ZvcihjIGluIGEpe3ZhciBkPWFbY107aWYobnVsbCE9ZCYmImZ1bmN0aW9uIiE9dHlwZW9mIGQpe2lmKCJvYmplY3QiPT10eXBlb2YgZCYmZC5jb25zdHJ1Y3Rvcj09QXJyYXkpe2Zvcih2YXIgZT1bXSxmLGc9MCxoPWQubGVuZ3RoO2c8aDtnKyspZj1kW2ddLGUucHVzaChlbmNvZGVVUklDb21wb25lbnQobnVsbD09PWZ8fHZvaWQgMD09PWY/IiI6ZikpO2Q9ZS5qb2luKCIsIil9ZWxzZSBkPWVuY29kZVVSSUNvbXBvbmVudChkKTtiLnB1c2goZW5jb2RlVVJJQ29tcG9uZW50KGMpKyI9IitkKX19cmV0dXJuIGIuam9pbigiJiIpfTtPcGVuTGF5ZXJzLlV0aWwudXJsQXBwZW5kPWZ1bmN0aW9uKGEsYil7dmFyIGM9YTtpZihiKXZhciBkPShhKyIgIikuc3BsaXQoL1s/Jl0vKSxjPWMrKCIgIj09PWQucG9wKCk/YjpkLmxlbmd0aD8iJiIrYjoiPyIrYik7cmV0dXJuIGN9OwpPcGVuTGF5ZXJzLlV0aWwuZ2V0SW1hZ2VzTG9jYXRpb249ZnVuY3Rpb24oKXtyZXR1cm4gT3BlbkxheWVycy5JbWdQYXRofHxPcGVuTGF5ZXJzLl9nZXRTY3JpcHRMb2NhdGlvbigpKyJpbWcvIn07T3BlbkxheWVycy5VdGlsLmdldEltYWdlTG9jYXRpb249ZnVuY3Rpb24oYSl7cmV0dXJuIE9wZW5MYXllcnMuVXRpbC5nZXRJbWFnZXNMb2NhdGlvbigpK2F9O09wZW5MYXllcnMuVXRpbC5Ucnk9ZnVuY3Rpb24oKXtmb3IodmFyIGE9bnVsbCxiPTAsYz1hcmd1bWVudHMubGVuZ3RoO2I8YztiKyspe3ZhciBkPWFyZ3VtZW50c1tiXTt0cnl7YT1kKCk7YnJlYWt9Y2F0Y2goZSl7fX1yZXR1cm4gYX07Ck9wZW5MYXllcnMuVXRpbC5nZXRYbWxOb2RlVmFsdWU9ZnVuY3Rpb24oYSl7dmFyIGI9bnVsbDtPcGVuTGF5ZXJzLlV0aWwuVHJ5KGZ1bmN0aW9uKCl7Yj1hLnRleHQ7Ynx8KGI9YS50ZXh0Q29udGVudCk7Ynx8KGI9YS5maXJzdENoaWxkLm5vZGVWYWx1ZSl9LGZ1bmN0aW9uKCl7Yj1hLnRleHRDb250ZW50fSk7cmV0dXJuIGJ9O09wZW5MYXllcnMuVXRpbC5tb3VzZUxlZnQ9ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9YS5yZWxhdGVkVGFyZ2V0P2EucmVsYXRlZFRhcmdldDphLnRvRWxlbWVudDtjIT1iJiZudWxsIT1jOyljPWMucGFyZW50Tm9kZTtyZXR1cm4gYyE9Yn07T3BlbkxheWVycy5VdGlsLkRFRkFVTFRfUFJFQ0lTSU9OPTE0O09wZW5MYXllcnMuVXRpbC50b0Zsb2F0PWZ1bmN0aW9uKGEsYil7bnVsbD09YiYmKGI9T3BlbkxheWVycy5VdGlsLkRFRkFVTFRfUFJFQ0lTSU9OKTsibnVtYmVyIiE9PXR5cGVvZiBhJiYoYT1wYXJzZUZsb2F0KGEpKTtyZXR1cm4gMD09PWI/YTpwYXJzZUZsb2F0KGEudG9QcmVjaXNpb24oYikpfTsKT3BlbkxheWVycy5VdGlsLnJhZD1mdW5jdGlvbihhKXtyZXR1cm4gYSpNYXRoLlBJLzE4MH07T3BlbkxheWVycy5VdGlsLmRlZz1mdW5jdGlvbihhKXtyZXR1cm4gMTgwKmEvTWF0aC5QSX07T3BlbkxheWVycy5VdGlsLlZpbmNlbnR5Q29uc3RhbnRzPXthOjYzNzgxMzcsYjo2MzU2NzUyLjMxNDIsZjoxLzI5OC4yNTcyMjM1NjN9OwpPcGVuTGF5ZXJzLlV0aWwuZGlzdFZpbmNlbnR5PWZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPU9wZW5MYXllcnMuVXRpbC5WaW5jZW50eUNvbnN0YW50cyxkPWMuYSxlPWMuYixjPWMuZixmPU9wZW5MYXllcnMuVXRpbC5yYWQoYi5sb24tYS5sb24pLGc9TWF0aC5hdGFuKCgxLWMpKk1hdGgudGFuKE9wZW5MYXllcnMuVXRpbC5yYWQoYS5sYXQpKSksaD1NYXRoLmF0YW4oKDEtYykqTWF0aC50YW4oT3BlbkxheWVycy5VdGlsLnJhZChiLmxhdCkpKSxrPU1hdGguc2luKGcpLGc9TWF0aC5jb3MoZyksbD1NYXRoLnNpbihoKSxoPU1hdGguY29zKGgpLG09ZixyPTIqTWF0aC5QSSxwPTIwOzFFLTEyPE1hdGguYWJzKG0tcikmJjA8LS1wOyl7dmFyIG49TWF0aC5zaW4obSkscT1NYXRoLmNvcyhtKSxzPU1hdGguc3FydChoKm4qaCpuKyhnKmwtaypoKnEpKihnKmwtaypoKnEpKTtpZigwPT1zKXJldHVybiAwO3ZhciBxPWsqbCtnKmgqcSx0PU1hdGguYXRhbjIocyxxKSx1PU1hdGguYXNpbihnKmgqCm4vcyksdj1NYXRoLmNvcyh1KSpNYXRoLmNvcyh1KSxuPXEtMiprKmwvdix3PWMvMTYqdiooNCtjKig0LTMqdikpLHI9bSxtPWYrKDEtdykqYypNYXRoLnNpbih1KSoodCt3KnMqKG4rdypxKigtMSsyKm4qbikpKX1pZigwPT1wKXJldHVybiBOYU47ZD12KihkKmQtZSplKS8oZSplKTtjPWQvMTAyNCooMjU2K2QqKC0xMjgrZCooNzQtNDcqZCkpKTtyZXR1cm4oZSooMStkLzE2Mzg0Kig0MDk2K2QqKC03NjgrZCooMzIwLTE3NSpkKSkpKSoodC1jKnMqKG4rYy80KihxKigtMSsyKm4qbiktYy82Km4qKC0zKzQqcypzKSooLTMrNCpuKm4pKSkpKS50b0ZpeGVkKDMpLzFFM307Ck9wZW5MYXllcnMuVXRpbC5kZXN0aW5hdGlvblZpbmNlbnR5PWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1PcGVuTGF5ZXJzLlV0aWwsZT1kLlZpbmNlbnR5Q29uc3RhbnRzLGY9ZS5hLGc9ZS5iLGg9ZS5mLGU9YS5sb247YT1hLmxhdDt2YXIgaz1kLnJhZChiKTtiPU1hdGguc2luKGspO2s9TWF0aC5jb3Moayk7YT0oMS1oKSpNYXRoLnRhbihkLnJhZChhKSk7dmFyIGw9MS9NYXRoLnNxcnQoMSthKmEpLG09YSpsLHI9TWF0aC5hdGFuMihhLGspO2E9bCpiO2Zvcih2YXIgcD0xLWEqYSxmPXAqKGYqZi1nKmcpLyhnKmcpLG49MStmLzE2Mzg0Kig0MDk2K2YqKC03NjgrZiooMzIwLTE3NSpmKSkpLHE9Zi8xMDI0KigyNTYrZiooLTEyOCtmKig3NC00NypmKSkpLGY9Yy8oZypuKSxzPTIqTWF0aC5QSTsxRS0xMjxNYXRoLmFicyhmLXMpOyl2YXIgdD1NYXRoLmNvcygyKnIrZiksdT1NYXRoLnNpbihmKSx2PU1hdGguY29zKGYpLHc9cSp1Kih0K3EvNCoodiooLTErMip0KnQpLXEvNip0KigtMys0Kgp1KnUpKigtMys0KnQqdCkpKSxzPWYsZj1jLyhnKm4pK3c7Yz1tKnUtbCp2Kms7Zz1NYXRoLmF0YW4yKG0qditsKnUqaywoMS1oKSpNYXRoLnNxcnQoYSphK2MqYykpO2I9TWF0aC5hdGFuMih1KmIsbCp2LW0qdSprKTtrPWgvMTYqcCooNCtoKig0LTMqcCkpO3Q9Yi0oMS1rKSpoKmEqKGYrayp1Kih0K2sqdiooLTErMip0KnQpKSk7TWF0aC5hdGFuMihhLC1jKTtyZXR1cm4gbmV3IE9wZW5MYXllcnMuTG9uTGF0KGUrZC5kZWcodCksZC5kZWcoZykpfTsKT3BlbkxheWVycy5VdGlsLmdldFBhcmFtZXRlcnM9ZnVuY3Rpb24oYSxiKXtiPWJ8fHt9O2E9bnVsbD09PWF8fHZvaWQgMD09PWE/d2luZG93LmxvY2F0aW9uLmhyZWY6YTt2YXIgYz0iIjtpZihPcGVuTGF5ZXJzLlN0cmluZy5jb250YWlucyhhLCI/IikpdmFyIGQ9YS5pbmRleE9mKCI/IikrMSxjPU9wZW5MYXllcnMuU3RyaW5nLmNvbnRhaW5zKGEsIiMiKT9hLmluZGV4T2YoIiMiKTphLmxlbmd0aCxjPWEuc3Vic3RyaW5nKGQsYyk7Zm9yKHZhciBkPXt9LGM9Yy5zcGxpdCgvWyY7XS8pLGU9MCxmPWMubGVuZ3RoO2U8ZjsrK2Upe3ZhciBnPWNbZV0uc3BsaXQoIj0iKTtpZihnWzBdKXt2YXIgaD1nWzBdO3RyeXtoPWRlY29kZVVSSUNvbXBvbmVudChoKX1jYXRjaChrKXtoPXVuZXNjYXBlKGgpfWc9KGdbMV18fCIiKS5yZXBsYWNlKC9cKy9nLCIgIik7dHJ5e2c9ZGVjb2RlVVJJQ29tcG9uZW50KGcpfWNhdGNoKGwpe2c9dW5lc2NhcGUoZyl9ITEhPT1iLnNwbGl0QXJncyYmKGc9Zy5zcGxpdCgiLCIpKTsKMT09Zy5sZW5ndGgmJihnPWdbMF0pO2RbaF09Z319cmV0dXJuIGR9O09wZW5MYXllcnMuVXRpbC5sYXN0U2VxSUQ9MDtPcGVuTGF5ZXJzLlV0aWwuY3JlYXRlVW5pcXVlSUQ9ZnVuY3Rpb24oYSl7YT1udWxsPT1hPyJpZF8iOmEucmVwbGFjZShPcGVuTGF5ZXJzLlV0aWwuZG90bGVzcywiXyIpO09wZW5MYXllcnMuVXRpbC5sYXN0U2VxSUQrPTE7cmV0dXJuIGErT3BlbkxheWVycy5VdGlsLmxhc3RTZXFJRH07T3BlbkxheWVycy5JTkNIRVNfUEVSX1VOSVQ9e2luY2hlczoxLGZ0OjEyLG1pOjYzMzYwLG06MzkuMzcsa206MzkzNzAsZGQ6NDM3NDc1NCx5ZDozNn07T3BlbkxheWVycy5JTkNIRVNfUEVSX1VOSVRbImluIl09T3BlbkxheWVycy5JTkNIRVNfUEVSX1VOSVQuaW5jaGVzO09wZW5MYXllcnMuSU5DSEVTX1BFUl9VTklULmRlZ3JlZXM9T3BlbkxheWVycy5JTkNIRVNfUEVSX1VOSVQuZGQ7T3BlbkxheWVycy5JTkNIRVNfUEVSX1VOSVQubm1pPTE4NTIqT3BlbkxheWVycy5JTkNIRVNfUEVSX1VOSVQubTsKT3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0g9MC4wMjU0MDAwNTA4MDAxMDE2OwpPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKE9wZW5MYXllcnMuSU5DSEVTX1BFUl9VTklULHtJbmNoOk9wZW5MYXllcnMuSU5DSEVTX1BFUl9VTklULmluY2hlcyxNZXRlcjoxL09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILEZvb3Q6MC4zMDQ4MDA2MDk2MDEyMTkyL09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILElGb290OjAuMzA0OC9PcGVuTGF5ZXJzLk1FVEVSU19QRVJfSU5DSCxDbGFya2VGb290OjAuMzA0Nzk3MjY1MTE1MS9PcGVuTGF5ZXJzLk1FVEVSU19QRVJfSU5DSCxTZWFyc0Zvb3Q6MC4zMDQ3OTk0NzE1Mzg2NzYyNi9PcGVuTGF5ZXJzLk1FVEVSU19QRVJfSU5DSCxHb2xkQ29hc3RGb290OjAuMzA0Nzk5NzEwMTgxNTA4OC9PcGVuTGF5ZXJzLk1FVEVSU19QRVJfSU5DSCxJSW5jaDowLjAyNTQvT3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0gsTWljcm9JbmNoOjIuNTRFLTUvT3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0gsTWlsOjIuNTRFLTgvT3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0gsCkNlbnRpbWV0ZXI6MC4wMS9PcGVuTGF5ZXJzLk1FVEVSU19QRVJfSU5DSCxLaWxvbWV0ZXI6MUUzL09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILFlhcmQ6MC45MTQ0MDE4Mjg4MDM2NTc2L09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILFNlYXJzWWFyZDowLjkxNDM5ODQxNDYxNjAyOS9PcGVuTGF5ZXJzLk1FVEVSU19QRVJfSU5DSCxJbmRpYW5ZYXJkOjAuOTE0Mzk4NTMwNzQ0NDQwOC9PcGVuTGF5ZXJzLk1FVEVSU19QRVJfSU5DSCxJbmRpYW5ZZDM3OjAuOTE0Mzk1MjMvT3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0gsSW5kaWFuWWQ2MjowLjkxNDM5ODgvT3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0gsSW5kaWFuWWQ3NTowLjkxNDM5ODUvT3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0gsSW5kaWFuRm9vdDowLjMwNDc5OTUxL09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILEluZGlhbkZ0Mzc6MC4zMDQ3OTg0MS9PcGVuTGF5ZXJzLk1FVEVSU19QRVJfSU5DSCxJbmRpYW5GdDYyOjAuMzA0Nzk5Ni8KT3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0gsSW5kaWFuRnQ3NTowLjMwNDc5OTUvT3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0gsTWlsZToxNjA5LjM0NzIxODY5NDQzNzMvT3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0gsSVlhcmQ6MC45MTQ0L09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILElNaWxlOjE2MDkuMzQ0L09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILE5hdXRNOjE4NTIvT3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0gsIkxhdC02NiI6MTEwOTQzLjMxNjQ4ODkzMjczL09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILCJMYXQtODMiOjExMDk0Ni4yNTczNjg3MjIzNS9PcGVuTGF5ZXJzLk1FVEVSU19QRVJfSU5DSCxEZWNpbWV0ZXI6MC4xL09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILE1pbGxpbWV0ZXI6MC4wMDEvT3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0gsRGVrYW1ldGVyOjEwL09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILERlY2FtZXRlcjoxMC9PcGVuTGF5ZXJzLk1FVEVSU19QRVJfSU5DSCwKSGVjdG9tZXRlcjoxMDAvT3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0gsR2VybWFuTWV0ZXI6MS4wMDAwMTM1OTY1L09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILENhR3JpZDowLjk5OTczOC9PcGVuTGF5ZXJzLk1FVEVSU19QRVJfSU5DSCxDbGFya2VDaGFpbjoyMC4xMTY2MTk0OTc2L09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILEd1bnRlckNoYWluOjIwLjExNjg0MDIzMzY4MDQ3L09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILEJlbm9pdENoYWluOjIwLjExNjc4MjQ5NDM3NTg3Mi9PcGVuTGF5ZXJzLk1FVEVSU19QRVJfSU5DSCxTZWFyc0NoYWluOjIwLjExNjc2NTEyMTU1L09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILENsYXJrZUxpbms6MC4yMDExNjYxOTQ5NzYvT3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0gsR3VudGVyTGluazowLjIwMTE2ODQwMjMzNjgwNDcvT3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0gsQmVub2l0TGluazowLjIwMTE2NzgyNDk0Mzc1ODczL09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILApTZWFyc0xpbms6MC4yMDExNjc2NTEyMTU1L09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILFJvZDo1LjAyOTIxMDA1ODQyMDEyL09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILEludG5sQ2hhaW46MjAuMTE2OC9PcGVuTGF5ZXJzLk1FVEVSU19QRVJfSU5DSCxJbnRubExpbms6MC4yMDExNjgvT3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0gsUGVyY2g6NS4wMjkyMTAwNTg0MjAxMi9PcGVuTGF5ZXJzLk1FVEVSU19QRVJfSU5DSCxQb2xlOjUuMDI5MjEwMDU4NDIwMTIvT3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0gsRnVybG9uZzoyMDEuMTY4NDAyMzM2ODA0Ni9PcGVuTGF5ZXJzLk1FVEVSU19QRVJfSU5DSCxSb29kOjMuNzc4MjY2ODk4L09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILENhcGVGb290OjAuMzA0Nzk3MjYxNS9PcGVuTGF5ZXJzLk1FVEVSU19QRVJfSU5DSCxCcmVhbGV5OjM3NS9PcGVuTGF5ZXJzLk1FVEVSU19QRVJfSU5DSCxNb2RBbUZ0OjAuMzA0ODEyMjUyOTg0NTA2LwpPcGVuTGF5ZXJzLk1FVEVSU19QRVJfSU5DSCxGYXRob206MS44Mjg4L09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILCJOYXV0TS1VSyI6MTg1My4xODQvT3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0gsIjUwa2lsb21ldGVycyI6NUU0L09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILCIxNTBraWxvbWV0ZXJzIjoxNUU0L09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNIfSk7Ck9wZW5MYXllcnMuVXRpbC5leHRlbmQoT3BlbkxheWVycy5JTkNIRVNfUEVSX1VOSVQse21tOk9wZW5MYXllcnMuSU5DSEVTX1BFUl9VTklULk1ldGVyLzFFMyxjbTpPcGVuTGF5ZXJzLklOQ0hFU19QRVJfVU5JVC5NZXRlci8xMDAsZG06MTAwKk9wZW5MYXllcnMuSU5DSEVTX1BFUl9VTklULk1ldGVyLGttOjFFMypPcGVuTGF5ZXJzLklOQ0hFU19QRVJfVU5JVC5NZXRlcixrbWk6T3BlbkxheWVycy5JTkNIRVNfUEVSX1VOSVQubm1pLGZhdGg6T3BlbkxheWVycy5JTkNIRVNfUEVSX1VOSVQuRmF0aG9tLGNoOk9wZW5MYXllcnMuSU5DSEVTX1BFUl9VTklULkludG5sQ2hhaW4sbGluazpPcGVuTGF5ZXJzLklOQ0hFU19QRVJfVU5JVC5JbnRubExpbmssInVzLWluIjpPcGVuTGF5ZXJzLklOQ0hFU19QRVJfVU5JVC5pbmNoZXMsInVzLWZ0IjpPcGVuTGF5ZXJzLklOQ0hFU19QRVJfVU5JVC5Gb290LCJ1cy15ZCI6T3BlbkxheWVycy5JTkNIRVNfUEVSX1VOSVQuWWFyZCwidXMtY2giOk9wZW5MYXllcnMuSU5DSEVTX1BFUl9VTklULkd1bnRlckNoYWluLAoidXMtbWkiOk9wZW5MYXllcnMuSU5DSEVTX1BFUl9VTklULk1pbGUsImluZC15ZCI6T3BlbkxheWVycy5JTkNIRVNfUEVSX1VOSVQuSW5kaWFuWWQzNywiaW5kLWZ0IjpPcGVuTGF5ZXJzLklOQ0hFU19QRVJfVU5JVC5JbmRpYW5GdDM3LCJpbmQtY2giOjIwLjExNjY5NTA2L09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNIfSk7T3BlbkxheWVycy5ET1RTX1BFUl9JTkNIPTcyO09wZW5MYXllcnMuVXRpbC5ub3JtYWxpemVTY2FsZT1mdW5jdGlvbihhKXtyZXR1cm4gMTxhPzEvYTphfTtPcGVuTGF5ZXJzLlV0aWwuZ2V0UmVzb2x1dGlvbkZyb21TY2FsZT1mdW5jdGlvbihhLGIpe3ZhciBjO2EmJihudWxsPT1iJiYoYj0iZGVncmVlcyIpLGM9MS8oT3BlbkxheWVycy5VdGlsLm5vcm1hbGl6ZVNjYWxlKGEpKk9wZW5MYXllcnMuSU5DSEVTX1BFUl9VTklUW2JdKk9wZW5MYXllcnMuRE9UU19QRVJfSU5DSCkpO3JldHVybiBjfTsKT3BlbkxheWVycy5VdGlsLmdldFNjYWxlRnJvbVJlc29sdXRpb249ZnVuY3Rpb24oYSxiKXtudWxsPT1iJiYoYj0iZGVncmVlcyIpO3JldHVybiBhKk9wZW5MYXllcnMuSU5DSEVTX1BFUl9VTklUW2JdKk9wZW5MYXllcnMuRE9UU19QRVJfSU5DSH07Ck9wZW5MYXllcnMuVXRpbC5wYWdlUG9zaXRpb249ZnVuY3Rpb24oYSl7dmFyIGI9WzAsMF0sYz1PcGVuTGF5ZXJzLlV0aWwuZ2V0Vmlld3BvcnRFbGVtZW50KCk7aWYoIWF8fGE9PXdpbmRvd3x8YT09YylyZXR1cm4gYjt2YXIgZD1PcGVuTGF5ZXJzLklTX0dFQ0tPJiZkb2N1bWVudC5nZXRCb3hPYmplY3RGb3ImJiJhYnNvbHV0ZSI9PU9wZW5MYXllcnMuRWxlbWVudC5nZXRTdHlsZShhLCJwb3NpdGlvbiIpJiYoIiI9PWEuc3R5bGUudG9wfHwiIj09YS5zdHlsZS5sZWZ0KSxlPW51bGw7aWYoYS5nZXRCb3VuZGluZ0NsaWVudFJlY3QpYT1hLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLGU9d2luZG93LnBhZ2VZT2Zmc2V0fHxjLnNjcm9sbFRvcCxiWzBdPWEubGVmdCsod2luZG93LnBhZ2VYT2Zmc2V0fHxjLnNjcm9sbExlZnQpLGJbMV09YS50b3ArZTtlbHNlIGlmKGRvY3VtZW50LmdldEJveE9iamVjdEZvciYmIWQpYT1kb2N1bWVudC5nZXRCb3hPYmplY3RGb3IoYSksYz1kb2N1bWVudC5nZXRCb3hPYmplY3RGb3IoYyksCmJbMF09YS5zY3JlZW5YLWMuc2NyZWVuWCxiWzFdPWEuc2NyZWVuWS1jLnNjcmVlblk7ZWxzZXtiWzBdPWEub2Zmc2V0TGVmdDtiWzFdPWEub2Zmc2V0VG9wO2U9YS5vZmZzZXRQYXJlbnQ7aWYoZSE9YSlmb3IoO2U7KWJbMF0rPWUub2Zmc2V0TGVmdCxiWzFdKz1lLm9mZnNldFRvcCxlPWUub2Zmc2V0UGFyZW50O2M9T3BlbkxheWVycy5CUk9XU0VSX05BTUU7aWYoIm9wZXJhIj09Y3x8InNhZmFyaSI9PWMmJiJhYnNvbHV0ZSI9PU9wZW5MYXllcnMuRWxlbWVudC5nZXRTdHlsZShhLCJwb3NpdGlvbiIpKWJbMV0tPWRvY3VtZW50LmJvZHkub2Zmc2V0VG9wO2ZvcihlPWEub2Zmc2V0UGFyZW50O2UmJmUhPWRvY3VtZW50LmJvZHk7KXtiWzBdLT1lLnNjcm9sbExlZnQ7aWYoIm9wZXJhIiE9Y3x8IlRSIiE9ZS50YWdOYW1lKWJbMV0tPWUuc2Nyb2xsVG9wO2U9ZS5vZmZzZXRQYXJlbnR9fXJldHVybiBifTsKT3BlbkxheWVycy5VdGlsLmdldFZpZXdwb3J0RWxlbWVudD1mdW5jdGlvbigpe3ZhciBhPWFyZ3VtZW50cy5jYWxsZWUudmlld3BvcnRFbGVtZW50O3ZvaWQgMD09YSYmKGE9Im1zaWUiPT1PcGVuTGF5ZXJzLkJST1dTRVJfTkFNRSYmIkNTUzFDb21wYXQiIT1kb2N1bWVudC5jb21wYXRNb2RlP2RvY3VtZW50LmJvZHk6ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LGFyZ3VtZW50cy5jYWxsZWUudmlld3BvcnRFbGVtZW50PWEpO3JldHVybiBhfTsKT3BlbkxheWVycy5VdGlsLmlzRXF1aXZhbGVudFVybD1mdW5jdGlvbihhLGIsYyl7Yz1jfHx7fTtPcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyhjLHtpZ25vcmVDYXNlOiEwLGlnbm9yZVBvcnQ4MDohMCxpZ25vcmVIYXNoOiEwLHNwbGl0QXJnczohMX0pO2E9T3BlbkxheWVycy5VdGlsLmNyZWF0ZVVybE9iamVjdChhLGMpO2I9T3BlbkxheWVycy5VdGlsLmNyZWF0ZVVybE9iamVjdChiLGMpO2Zvcih2YXIgZCBpbiBhKWlmKCJhcmdzIiE9PWQmJmFbZF0hPWJbZF0pcmV0dXJuITE7Zm9yKGQgaW4gYS5hcmdzKXtpZihhLmFyZ3NbZF0hPWIuYXJnc1tkXSlyZXR1cm4hMTtkZWxldGUgYi5hcmdzW2RdfWZvcihkIGluIGIuYXJncylyZXR1cm4hMTtyZXR1cm4hMH07Ck9wZW5MYXllcnMuVXRpbC5jcmVhdGVVcmxPYmplY3Q9ZnVuY3Rpb24oYSxiKXtiPWJ8fHt9O2lmKCEvXlx3KzpcL1wvLy50ZXN0KGEpKXt2YXIgYz13aW5kb3cubG9jYXRpb24sZD1jLnBvcnQ/IjoiK2MucG9ydDoiIixkPWMucHJvdG9jb2wrIi8vIitjLmhvc3Quc3BsaXQoIjoiKS5zaGlmdCgpK2Q7MD09PWEuaW5kZXhPZigiLyIpP2E9ZCthOihjPWMucGF0aG5hbWUuc3BsaXQoIi8iKSxjLnBvcCgpLGE9ZCtjLmpvaW4oIi8iKSsiLyIrYSl9Yi5pZ25vcmVDYXNlJiYoYT1hLnRvTG93ZXJDYXNlKCkpO2M9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYSIpO2MuaHJlZj1hO2Q9e307ZC5ob3N0PWMuaG9zdC5zcGxpdCgiOiIpLnNoaWZ0KCk7ZC5wcm90b2NvbD1jLnByb3RvY29sO2QucG9ydD1iLmlnbm9yZVBvcnQ4MD8iODAiPT1jLnBvcnR8fCIwIj09Yy5wb3J0PyIiOmMucG9ydDoiIj09Yy5wb3J0fHwiMCI9PWMucG9ydD8iODAiOmMucG9ydDtkLmhhc2g9Yi5pZ25vcmVIYXNofHwiIyI9PT0KYy5oYXNoPyIiOmMuaGFzaDt2YXIgZT1jLnNlYXJjaDtlfHwoZT1hLmluZGV4T2YoIj8iKSxlPS0xIT1lP2Euc3Vic3RyKGUpOiIiKTtkLmFyZ3M9T3BlbkxheWVycy5VdGlsLmdldFBhcmFtZXRlcnMoZSx7c3BsaXRBcmdzOmIuc3BsaXRBcmdzfSk7ZC5wYXRobmFtZT0iLyI9PWMucGF0aG5hbWUuY2hhckF0KDApP2MucGF0aG5hbWU6Ii8iK2MucGF0aG5hbWU7cmV0dXJuIGR9O09wZW5MYXllcnMuVXRpbC5yZW1vdmVUYWlsPWZ1bmN0aW9uKGEpe3ZhciBiPW51bGwsYj1hLmluZGV4T2YoIj8iKSxjPWEuaW5kZXhPZigiIyIpO3JldHVybiBiPS0xPT1iPy0xIT1jP2Euc3Vic3RyKDAsYyk6YTotMSE9Yz9hLnN1YnN0cigwLE1hdGgubWluKGIsYykpOmEuc3Vic3RyKDAsYil9O09wZW5MYXllcnMuSVNfR0VDS089ZnVuY3Rpb24oKXt2YXIgYT1uYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCk7cmV0dXJuLTE9PWEuaW5kZXhPZigid2Via2l0IikmJi0xIT1hLmluZGV4T2YoImdlY2tvIil9KCk7Ck9wZW5MYXllcnMuQ0FOVkFTX1NVUFBPUlRFRD1mdW5jdGlvbigpe3ZhciBhPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImNhbnZhcyIpO3JldHVybiEoIWEuZ2V0Q29udGV4dHx8IWEuZ2V0Q29udGV4dCgiMmQiKSl9KCk7T3BlbkxheWVycy5CUk9XU0VSX05BTUU9ZnVuY3Rpb24oKXt2YXIgYT0iIixiPW5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKTstMSE9Yi5pbmRleE9mKCJvcGVyYSIpP2E9Im9wZXJhIjotMSE9Yi5pbmRleE9mKCJtc2llIik/YT0ibXNpZSI6LTEhPWIuaW5kZXhPZigic2FmYXJpIik/YT0ic2FmYXJpIjotMSE9Yi5pbmRleE9mKCJtb3ppbGxhIikmJihhPS0xIT1iLmluZGV4T2YoImZpcmVmb3giKT8iZmlyZWZveCI6Im1vemlsbGEiKTtyZXR1cm4gYX0oKTtPcGVuTGF5ZXJzLlV0aWwuZ2V0QnJvd3Nlck5hbWU9ZnVuY3Rpb24oKXtyZXR1cm4gT3BlbkxheWVycy5CUk9XU0VSX05BTUV9OwpPcGVuTGF5ZXJzLlV0aWwuZ2V0UmVuZGVyZWREaW1lbnNpb25zPWZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGY9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7Zi5zdHlsZS52aXNpYmlsaXR5PSJoaWRkZW4iO2Zvcih2YXIgZz1jJiZjLmNvbnRhaW5lckVsZW1lbnQ/Yy5jb250YWluZXJFbGVtZW50OmRvY3VtZW50LmJvZHksaD0hMSxrPW51bGwsbD1nO2wmJiJib2R5IiE9bC50YWdOYW1lLnRvTG93ZXJDYXNlKCk7KXt2YXIgbT1PcGVuTGF5ZXJzLkVsZW1lbnQuZ2V0U3R5bGUobCwicG9zaXRpb24iKTtpZigiYWJzb2x1dGUiPT1tKXtoPSEwO2JyZWFrfWVsc2UgaWYobSYmInN0YXRpYyIhPW0pYnJlYWs7bD1sLnBhcmVudE5vZGV9IWh8fDAhPT1nLmNsaWVudEhlaWdodCYmMCE9PWcuY2xpZW50V2lkdGh8fChrPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpLGsuc3R5bGUudmlzaWJpbGl0eT0iaGlkZGVuIixrLnN0eWxlLnBvc2l0aW9uPSJhYnNvbHV0ZSIsay5zdHlsZS5vdmVyZmxvdz0KInZpc2libGUiLGsuc3R5bGUud2lkdGg9ZG9jdW1lbnQuYm9keS5jbGllbnRXaWR0aCsicHgiLGsuc3R5bGUuaGVpZ2h0PWRvY3VtZW50LmJvZHkuY2xpZW50SGVpZ2h0KyJweCIsay5hcHBlbmRDaGlsZChmKSk7Zi5zdHlsZS5wb3NpdGlvbj0iYWJzb2x1dGUiO2ImJihiLnc/KGQ9Yi53LGYuc3R5bGUud2lkdGg9ZCsicHgiKTpiLmgmJihlPWIuaCxmLnN0eWxlLmhlaWdodD1lKyJweCIpKTtjJiZjLmRpc3BsYXlDbGFzcyYmKGYuY2xhc3NOYW1lPWMuZGlzcGxheUNsYXNzKTtiPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO2IuaW5uZXJIVE1MPWE7Yi5zdHlsZS5vdmVyZmxvdz0idmlzaWJsZSI7aWYoYi5jaGlsZE5vZGVzKWZvcihhPTAsYz1iLmNoaWxkTm9kZXMubGVuZ3RoO2E8YzthKyspYi5jaGlsZE5vZGVzW2FdLnN0eWxlJiYoYi5jaGlsZE5vZGVzW2FdLnN0eWxlLm92ZXJmbG93PSJ2aXNpYmxlIik7Zi5hcHBlbmRDaGlsZChiKTtrP2cuYXBwZW5kQ2hpbGQoayk6Zy5hcHBlbmRDaGlsZChmKTsKZHx8KGQ9cGFyc2VJbnQoYi5zY3JvbGxXaWR0aCksZi5zdHlsZS53aWR0aD1kKyJweCIpO2V8fChlPXBhcnNlSW50KGIuc2Nyb2xsSGVpZ2h0KSk7Zi5yZW1vdmVDaGlsZChiKTtrPyhrLnJlbW92ZUNoaWxkKGYpLGcucmVtb3ZlQ2hpbGQoaykpOmcucmVtb3ZlQ2hpbGQoZik7cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLlNpemUoZCxlKX07Ck9wZW5MYXllcnMuVXRpbC5nZXRTY3JvbGxiYXJXaWR0aD1mdW5jdGlvbigpe3ZhciBhPU9wZW5MYXllcnMuVXRpbC5fc2Nyb2xsYmFyV2lkdGg7aWYobnVsbD09YSl7dmFyIGI9bnVsbCxjPW51bGwsYj1hPTAsYj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTtiLnN0eWxlLnBvc2l0aW9uPSJhYnNvbHV0ZSI7Yi5zdHlsZS50b3A9Ii0xMDAwcHgiO2Iuc3R5bGUubGVmdD0iLTEwMDBweCI7Yi5zdHlsZS53aWR0aD0iMTAwcHgiO2Iuc3R5bGUuaGVpZ2h0PSI1MHB4IjtiLnN0eWxlLm92ZXJmbG93PSJoaWRkZW4iO2M9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7Yy5zdHlsZS53aWR0aD0iMTAwJSI7Yy5zdHlsZS5oZWlnaHQ9IjIwMHB4IjtiLmFwcGVuZENoaWxkKGMpO2RvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYik7YT1jLm9mZnNldFdpZHRoO2Iuc3R5bGUub3ZlcmZsb3c9InNjcm9sbCI7Yj1jLm9mZnNldFdpZHRoO2RvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoZG9jdW1lbnQuYm9keS5sYXN0Q2hpbGQpOwpPcGVuTGF5ZXJzLlV0aWwuX3Njcm9sbGJhcldpZHRoPWEtYjthPU9wZW5MYXllcnMuVXRpbC5fc2Nyb2xsYmFyV2lkdGh9cmV0dXJuIGF9OwpPcGVuTGF5ZXJzLlV0aWwuZ2V0Rm9ybWF0dGVkTG9uTGF0PWZ1bmN0aW9uKGEsYixjKXtjfHwoYz0iZG1zIik7YT0oYSs1NDApJTM2MC0xODA7dmFyIGQ9TWF0aC5hYnMoYSksZT1NYXRoLmZsb29yKGQpLGY9ZD0oZC1lKS8oMS82MCksZD1NYXRoLmZsb29yKGQpLGY9TWF0aC5yb3VuZCgxMCooKGYtZCkvKDEvNjApKSksZj1mLzEwOzYwPD1mJiYoZi09NjAsZCs9MSw2MDw9ZCYmKGQtPTYwLGUrPTEpKTsxMD5lJiYoZT0iMCIrZSk7ZSs9Ilx1MDBiMCI7MDw9Yy5pbmRleE9mKCJkbSIpJiYoMTA+ZCYmKGQ9IjAiK2QpLGUrPWQrIiciLDA8PWMuaW5kZXhPZigiZG1zIikmJigxMD5mJiYoZj0iMCIrZiksZSs9ZisnIicpKTtyZXR1cm4gZT0ibG9uIj09Yj9lKygwPmE/T3BlbkxheWVycy5pMThuKCJXIik6T3BlbkxheWVycy5pMThuKCJFIikpOmUrKDA+YT9PcGVuTGF5ZXJzLmkxOG4oIlMiKTpPcGVuTGF5ZXJzLmkxOG4oIk4iKSl9O09wZW5MYXllcnMuRXZlbnQ9e29ic2VydmVyczohMSxLRVlfU1BBQ0U6MzIsS0VZX0JBQ0tTUEFDRTo4LEtFWV9UQUI6OSxLRVlfUkVUVVJOOjEzLEtFWV9FU0M6MjcsS0VZX0xFRlQ6MzcsS0VZX1VQOjM4LEtFWV9SSUdIVDozOSxLRVlfRE9XTjo0MCxLRVlfREVMRVRFOjQ2LGVsZW1lbnQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGEudGFyZ2V0fHxhLnNyY0VsZW1lbnR9LGlzU2luZ2xlVG91Y2g6ZnVuY3Rpb24oYSl7cmV0dXJuIGEudG91Y2hlcyYmMT09YS50b3VjaGVzLmxlbmd0aH0saXNNdWx0aVRvdWNoOmZ1bmN0aW9uKGEpe3JldHVybiBhLnRvdWNoZXMmJjE8YS50b3VjaGVzLmxlbmd0aH0saXNMZWZ0Q2xpY2s6ZnVuY3Rpb24oYSl7cmV0dXJuIGEud2hpY2gmJjE9PWEud2hpY2h8fGEuYnV0dG9uJiYxPT1hLmJ1dHRvbn0saXNSaWdodENsaWNrOmZ1bmN0aW9uKGEpe3JldHVybiBhLndoaWNoJiYzPT1hLndoaWNofHxhLmJ1dHRvbiYmMj09YS5idXR0b259LHN0b3A6ZnVuY3Rpb24oYSwKYil7Ynx8T3BlbkxheWVycy5FdmVudC5wcmV2ZW50RGVmYXVsdChhKTthLnN0b3BQcm9wYWdhdGlvbj9hLnN0b3BQcm9wYWdhdGlvbigpOmEuY2FuY2VsQnViYmxlPSEwfSxwcmV2ZW50RGVmYXVsdDpmdW5jdGlvbihhKXthLnByZXZlbnREZWZhdWx0P2EucHJldmVudERlZmF1bHQoKTphLnJldHVyblZhbHVlPSExfSxmaW5kRWxlbWVudDpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz1PcGVuTGF5ZXJzLkV2ZW50LmVsZW1lbnQoYSk7Yy5wYXJlbnROb2RlJiYoIWMudGFnTmFtZXx8Yy50YWdOYW1lLnRvVXBwZXJDYXNlKCkhPWIudG9VcHBlckNhc2UoKSk7KWM9Yy5wYXJlbnROb2RlO3JldHVybiBjfSxvYnNlcnZlOmZ1bmN0aW9uKGEsYixjLGQpe2E9T3BlbkxheWVycy5VdGlsLmdldEVsZW1lbnQoYSk7ZD1kfHwhMTsia2V5cHJlc3MiPT1iJiYobmF2aWdhdG9yLmFwcFZlcnNpb24ubWF0Y2goL0tvbnF1ZXJvcnxTYWZhcml8S0hUTUwvKXx8YS5hdHRhY2hFdmVudCkmJihiPSJrZXlkb3duIik7CnRoaXMub2JzZXJ2ZXJzfHwodGhpcy5vYnNlcnZlcnM9e30pO2lmKCFhLl9ldmVudENhY2hlSUQpe3ZhciBlPSJldmVudENhY2hlSURfIjthLmlkJiYoZT1hLmlkKyJfIitlKTthLl9ldmVudENhY2hlSUQ9T3BlbkxheWVycy5VdGlsLmNyZWF0ZVVuaXF1ZUlEKGUpfWU9YS5fZXZlbnRDYWNoZUlEO3RoaXMub2JzZXJ2ZXJzW2VdfHwodGhpcy5vYnNlcnZlcnNbZV09W10pO3RoaXMub2JzZXJ2ZXJzW2VdLnB1c2goe2VsZW1lbnQ6YSxuYW1lOmIsb2JzZXJ2ZXI6Yyx1c2VDYXB0dXJlOmR9KTthLmFkZEV2ZW50TGlzdGVuZXI/YS5hZGRFdmVudExpc3RlbmVyKGIsYyxkKTphLmF0dGFjaEV2ZW50JiZhLmF0dGFjaEV2ZW50KCJvbiIrYixjKX0sc3RvcE9ic2VydmluZ0VsZW1lbnQ6ZnVuY3Rpb24oYSl7YT1PcGVuTGF5ZXJzLlV0aWwuZ2V0RWxlbWVudChhKS5fZXZlbnRDYWNoZUlEO3RoaXMuX3JlbW92ZUVsZW1lbnRPYnNlcnZlcnMoT3BlbkxheWVycy5FdmVudC5vYnNlcnZlcnNbYV0pfSwKX3JlbW92ZUVsZW1lbnRPYnNlcnZlcnM6ZnVuY3Rpb24oYSl7aWYoYSlmb3IodmFyIGI9YS5sZW5ndGgtMTswPD1iO2ItLSl7dmFyIGM9YVtiXTtPcGVuTGF5ZXJzLkV2ZW50LnN0b3BPYnNlcnZpbmcuYXBwbHkodGhpcyxbYy5lbGVtZW50LGMubmFtZSxjLm9ic2VydmVyLGMudXNlQ2FwdHVyZV0pfX0sc3RvcE9ic2VydmluZzpmdW5jdGlvbihhLGIsYyxkKXtkPWR8fCExO2E9T3BlbkxheWVycy5VdGlsLmdldEVsZW1lbnQoYSk7dmFyIGU9YS5fZXZlbnRDYWNoZUlEOyJrZXlwcmVzcyI9PWImJihuYXZpZ2F0b3IuYXBwVmVyc2lvbi5tYXRjaCgvS29ucXVlcm9yfFNhZmFyaXxLSFRNTC8pfHxhLmRldGFjaEV2ZW50KSYmKGI9ImtleWRvd24iKTt2YXIgZj0hMSxnPU9wZW5MYXllcnMuRXZlbnQub2JzZXJ2ZXJzW2VdO2lmKGcpZm9yKHZhciBoPTA7IWYmJmg8Zy5sZW5ndGg7KXt2YXIgaz1nW2hdO2lmKGsubmFtZT09YiYmay5vYnNlcnZlcj09YyYmay51c2VDYXB0dXJlPT1kKXtnLnNwbGljZShoLAoxKTswPT1nLmxlbmd0aCYmZGVsZXRlIE9wZW5MYXllcnMuRXZlbnQub2JzZXJ2ZXJzW2VdO2Y9ITA7YnJlYWt9aCsrfWYmJihhLnJlbW92ZUV2ZW50TGlzdGVuZXI/YS5yZW1vdmVFdmVudExpc3RlbmVyKGIsYyxkKTphJiZhLmRldGFjaEV2ZW50JiZhLmRldGFjaEV2ZW50KCJvbiIrYixjKSk7cmV0dXJuIGZ9LHVubG9hZENhY2hlOmZ1bmN0aW9uKCl7aWYoT3BlbkxheWVycy5FdmVudCYmT3BlbkxheWVycy5FdmVudC5vYnNlcnZlcnMpe2Zvcih2YXIgYSBpbiBPcGVuTGF5ZXJzLkV2ZW50Lm9ic2VydmVycylPcGVuTGF5ZXJzLkV2ZW50Ll9yZW1vdmVFbGVtZW50T2JzZXJ2ZXJzLmFwcGx5KHRoaXMsW09wZW5MYXllcnMuRXZlbnQub2JzZXJ2ZXJzW2FdXSk7T3BlbkxheWVycy5FdmVudC5vYnNlcnZlcnM9ITF9fSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkV2ZW50In07Ck9wZW5MYXllcnMuRXZlbnQub2JzZXJ2ZSh3aW5kb3csInVubG9hZCIsT3BlbkxheWVycy5FdmVudC51bmxvYWRDYWNoZSwhMSk7Ck9wZW5MYXllcnMuRXZlbnRzPU9wZW5MYXllcnMuQ2xhc3Moe0JST1dTRVJfRVZFTlRTOiJtb3VzZW92ZXIgbW91c2VvdXQgbW91c2Vkb3duIG1vdXNldXAgbW91c2Vtb3ZlIGNsaWNrIGRibGNsaWNrIHJpZ2h0Y2xpY2sgZGJscmlnaHRjbGljayByZXNpemUgZm9jdXMgYmx1ciB0b3VjaHN0YXJ0IHRvdWNobW92ZSB0b3VjaGVuZCBrZXlkb3duIi5zcGxpdCgiICIpLGxpc3RlbmVyczpudWxsLG9iamVjdDpudWxsLGVsZW1lbnQ6bnVsbCxldmVudEhhbmRsZXI6bnVsbCxmYWxsVGhyb3VnaDpudWxsLGluY2x1ZGVYWTohMSxleHRlbnNpb25zOm51bGwsZXh0ZW5zaW9uQ291bnQ6bnVsbCxjbGVhck1vdXNlTGlzdGVuZXI6bnVsbCxpbml0aWFsaXplOmZ1bmN0aW9uKGEsYixjLGQsZSl7T3BlbkxheWVycy5VdGlsLmV4dGVuZCh0aGlzLGUpO3RoaXMub2JqZWN0PWE7dGhpcy5mYWxsVGhyb3VnaD1kO3RoaXMubGlzdGVuZXJzPXt9O3RoaXMuZXh0ZW5zaW9ucz17fTt0aGlzLmV4dGVuc2lvbkNvdW50PQp7fTt0aGlzLl9tc1RvdWNoZXM9W107bnVsbCE9YiYmdGhpcy5hdHRhY2hUb0VsZW1lbnQoYil9LGRlc3Ryb3k6ZnVuY3Rpb24oKXtmb3IodmFyIGEgaW4gdGhpcy5leHRlbnNpb25zKSJib29sZWFuIiE9PXR5cGVvZiB0aGlzLmV4dGVuc2lvbnNbYV0mJnRoaXMuZXh0ZW5zaW9uc1thXS5kZXN0cm95KCk7dGhpcy5leHRlbnNpb25zPW51bGw7dGhpcy5lbGVtZW50JiYoT3BlbkxheWVycy5FdmVudC5zdG9wT2JzZXJ2aW5nRWxlbWVudCh0aGlzLmVsZW1lbnQpLHRoaXMuZWxlbWVudC5oYXNTY3JvbGxFdmVudCYmT3BlbkxheWVycy5FdmVudC5zdG9wT2JzZXJ2aW5nKHdpbmRvdywic2Nyb2xsIix0aGlzLmNsZWFyTW91c2VMaXN0ZW5lcikpO3RoaXMuZXZlbnRIYW5kbGVyPXRoaXMuZmFsbFRocm91Z2g9dGhpcy5vYmplY3Q9dGhpcy5saXN0ZW5lcnM9dGhpcy5lbGVtZW50PW51bGx9LGFkZEV2ZW50VHlwZTpmdW5jdGlvbihhKXt9LGF0dGFjaFRvRWxlbWVudDpmdW5jdGlvbihhKXt0aGlzLmVsZW1lbnQ/Ck9wZW5MYXllcnMuRXZlbnQuc3RvcE9ic2VydmluZ0VsZW1lbnQodGhpcy5lbGVtZW50KToodGhpcy5ldmVudEhhbmRsZXI9T3BlbkxheWVycy5GdW5jdGlvbi5iaW5kQXNFdmVudExpc3RlbmVyKHRoaXMuaGFuZGxlQnJvd3NlckV2ZW50LHRoaXMpLHRoaXMuY2xlYXJNb3VzZUxpc3RlbmVyPU9wZW5MYXllcnMuRnVuY3Rpb24uYmluZCh0aGlzLmNsZWFyTW91c2VDYWNoZSx0aGlzKSk7dGhpcy5lbGVtZW50PWE7Zm9yKHZhciBiPSEhd2luZG93Lm5hdmlnYXRvci5tc01heFRvdWNoUG9pbnRzLGMsZD0wLGU9dGhpcy5CUk9XU0VSX0VWRU5UUy5sZW5ndGg7ZDxlO2QrKyljPXRoaXMuQlJPV1NFUl9FVkVOVFNbZF0sT3BlbkxheWVycy5FdmVudC5vYnNlcnZlKGEsYyx0aGlzLmV2ZW50SGFuZGxlciksYiYmMD09PWMuaW5kZXhPZigidG91Y2giKSYmdGhpcy5hZGRNc1RvdWNoTGlzdGVuZXIoYSxjLHRoaXMuZXZlbnRIYW5kbGVyKTtPcGVuTGF5ZXJzLkV2ZW50Lm9ic2VydmUoYSwiZHJhZ3N0YXJ0IiwKT3BlbkxheWVycy5FdmVudC5zdG9wKX0sb246ZnVuY3Rpb24oYSl7Zm9yKHZhciBiIGluIGEpInNjb3BlIiE9YiYmYS5oYXNPd25Qcm9wZXJ0eShiKSYmdGhpcy5yZWdpc3RlcihiLGEuc2NvcGUsYVtiXSl9LHJlZ2lzdGVyOmZ1bmN0aW9uKGEsYixjLGQpe2EgaW4gT3BlbkxheWVycy5FdmVudHMmJiF0aGlzLmV4dGVuc2lvbnNbYV0mJih0aGlzLmV4dGVuc2lvbnNbYV09bmV3IE9wZW5MYXllcnMuRXZlbnRzW2FdKHRoaXMpKTtpZihudWxsIT1jKXtudWxsPT1iJiYoYj10aGlzLm9iamVjdCk7dmFyIGU9dGhpcy5saXN0ZW5lcnNbYV07ZXx8KGU9W10sdGhpcy5saXN0ZW5lcnNbYV09ZSx0aGlzLmV4dGVuc2lvbkNvdW50W2FdPTApO2I9e29iajpiLGZ1bmM6Y307ZD8oZS5zcGxpY2UodGhpcy5leHRlbnNpb25Db3VudFthXSwwLGIpLCJvYmplY3QiPT09dHlwZW9mIGQmJmQuZXh0ZW5zaW9uJiZ0aGlzLmV4dGVuc2lvbkNvdW50W2FdKyspOmUucHVzaChiKX19LHJlZ2lzdGVyUHJpb3JpdHk6ZnVuY3Rpb24oYSwKYixjKXt0aGlzLnJlZ2lzdGVyKGEsYixjLCEwKX0sdW46ZnVuY3Rpb24oYSl7Zm9yKHZhciBiIGluIGEpInNjb3BlIiE9YiYmYS5oYXNPd25Qcm9wZXJ0eShiKSYmdGhpcy51bnJlZ2lzdGVyKGIsYS5zY29wZSxhW2JdKX0sdW5yZWdpc3RlcjpmdW5jdGlvbihhLGIsYyl7bnVsbD09YiYmKGI9dGhpcy5vYmplY3QpO2E9dGhpcy5saXN0ZW5lcnNbYV07aWYobnVsbCE9YSlmb3IodmFyIGQ9MCxlPWEubGVuZ3RoO2Q8ZTtkKyspaWYoYVtkXS5vYmo9PWImJmFbZF0uZnVuYz09Yyl7YS5zcGxpY2UoZCwxKTticmVha319LHJlbW92ZTpmdW5jdGlvbihhKXtudWxsIT10aGlzLmxpc3RlbmVyc1thXSYmKHRoaXMubGlzdGVuZXJzW2FdPVtdKX0sdHJpZ2dlckV2ZW50OmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5saXN0ZW5lcnNbYV07aWYoYyYmMCE9Yy5sZW5ndGgpe251bGw9PWImJihiPXt9KTtiLm9iamVjdD10aGlzLm9iamVjdDtiLmVsZW1lbnQ9dGhpcy5lbGVtZW50O2IudHlwZXx8KGIudHlwZT0KYSk7Zm9yKHZhciBjPWMuc2xpY2UoKSxkLGU9MCxmPWMubGVuZ3RoO2U8ZiYmKGQ9Y1tlXSxkPWQuZnVuYy5hcHBseShkLm9iaixbYl0pLHZvaWQgMD09ZHx8ITEhPWQpO2UrKyk7dGhpcy5mYWxsVGhyb3VnaHx8T3BlbkxheWVycy5FdmVudC5zdG9wKGIsITApO3JldHVybiBkfX0saGFuZGxlQnJvd3NlckV2ZW50OmZ1bmN0aW9uKGEpe3ZhciBiPWEudHlwZSxjPXRoaXMubGlzdGVuZXJzW2JdO2lmKGMmJjAhPWMubGVuZ3RoKXtpZigoYz1hLnRvdWNoZXMpJiZjWzBdKXtmb3IodmFyIGQ9MCxlPTAsZj1jLmxlbmd0aCxnLGg9MDtoPGY7KytoKWc9dGhpcy5nZXRUb3VjaENsaWVudFhZKGNbaF0pLGQrPWcuY2xpZW50WCxlKz1nLmNsaWVudFk7YS5jbGllbnRYPWQvZjthLmNsaWVudFk9ZS9mfXRoaXMuaW5jbHVkZVhZJiYoYS54eT10aGlzLmdldE1vdXNlUG9zaXRpb24oYSkpO3RoaXMudHJpZ2dlckV2ZW50KGIsYSl9fSxnZXRUb3VjaENsaWVudFhZOmZ1bmN0aW9uKGEpe3ZhciBiPXdpbmRvdy5vbE1vY2tXaW58fAp3aW5kb3csYz1iLnBhZ2VYT2Zmc2V0LGI9Yi5wYWdlWU9mZnNldCxkPWEuY2xpZW50WCxlPWEuY2xpZW50WTtpZigwPT09YS5wYWdlWSYmTWF0aC5mbG9vcihlKT5NYXRoLmZsb29yKGEucGFnZVkpfHwwPT09YS5wYWdlWCYmTWF0aC5mbG9vcihkKT5NYXRoLmZsb29yKGEucGFnZVgpKWQtPWMsZS09YjtlbHNlIGlmKGU8YS5wYWdlWS1ifHxkPGEucGFnZVgtYylkPWEucGFnZVgtYyxlPWEucGFnZVktYjthLm9sQ2xpZW50WD1kO2Eub2xDbGllbnRZPWU7cmV0dXJue2NsaWVudFg6ZCxjbGllbnRZOmV9fSxjbGVhck1vdXNlQ2FjaGU6ZnVuY3Rpb24oKXt0aGlzLmVsZW1lbnQuc2Nyb2xscz1udWxsO3RoaXMuZWxlbWVudC5sZWZ0dG9wPW51bGw7dGhpcy5lbGVtZW50Lm9mZnNldHM9bnVsbH0sZ2V0TW91c2VQb3NpdGlvbjpmdW5jdGlvbihhKXt0aGlzLmluY2x1ZGVYWT90aGlzLmVsZW1lbnQuaGFzU2Nyb2xsRXZlbnR8fChPcGVuTGF5ZXJzLkV2ZW50Lm9ic2VydmUod2luZG93LCJzY3JvbGwiLAp0aGlzLmNsZWFyTW91c2VMaXN0ZW5lciksdGhpcy5lbGVtZW50Lmhhc1Njcm9sbEV2ZW50PSEwKTp0aGlzLmNsZWFyTW91c2VDYWNoZSgpO2lmKCF0aGlzLmVsZW1lbnQuc2Nyb2xscyl7dmFyIGI9T3BlbkxheWVycy5VdGlsLmdldFZpZXdwb3J0RWxlbWVudCgpO3RoaXMuZWxlbWVudC5zY3JvbGxzPVt3aW5kb3cucGFnZVhPZmZzZXR8fGIuc2Nyb2xsTGVmdCx3aW5kb3cucGFnZVlPZmZzZXR8fGIuc2Nyb2xsVG9wXX10aGlzLmVsZW1lbnQubGVmdHRvcHx8KHRoaXMuZWxlbWVudC5sZWZ0dG9wPVtkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50TGVmdHx8MCxkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50VG9wfHwwXSk7dGhpcy5lbGVtZW50Lm9mZnNldHN8fCh0aGlzLmVsZW1lbnQub2Zmc2V0cz1PcGVuTGF5ZXJzLlV0aWwucGFnZVBvc2l0aW9uKHRoaXMuZWxlbWVudCkpO3JldHVybiBuZXcgT3BlbkxheWVycy5QaXhlbChhLmNsaWVudFgrdGhpcy5lbGVtZW50LnNjcm9sbHNbMF0tCnRoaXMuZWxlbWVudC5vZmZzZXRzWzBdLXRoaXMuZWxlbWVudC5sZWZ0dG9wWzBdLGEuY2xpZW50WSt0aGlzLmVsZW1lbnQuc2Nyb2xsc1sxXS10aGlzLmVsZW1lbnQub2Zmc2V0c1sxXS10aGlzLmVsZW1lbnQubGVmdHRvcFsxXSl9LGFkZE1zVG91Y2hMaXN0ZW5lcjpmdW5jdGlvbihhLGIsYyl7ZnVuY3Rpb24gZChhKXtjKE9wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKHtzdG9wUHJvcGFnYXRpb246ZnVuY3Rpb24oKXtmb3IodmFyIGE9ZS5sZW5ndGgtMTswPD1hOy0tYSllW2FdLnN0b3BQcm9wYWdhdGlvbigpfSxwcmV2ZW50RGVmYXVsdDpmdW5jdGlvbigpe2Zvcih2YXIgYT1lLmxlbmd0aC0xOzA8PWE7LS1hKWVbYV0ucHJldmVudERlZmF1bHQoKX0sdHlwZTpifSxhKSl9dmFyIGU9dGhpcy5fbXNUb3VjaGVzO3N3aXRjaChiKXtjYXNlICJ0b3VjaHN0YXJ0IjpyZXR1cm4gdGhpcy5hZGRNc1RvdWNoTGlzdGVuZXJTdGFydChhLGIsZCk7Y2FzZSAidG91Y2hlbmQiOnJldHVybiB0aGlzLmFkZE1zVG91Y2hMaXN0ZW5lckVuZChhLApiLGQpO2Nhc2UgInRvdWNobW92ZSI6cmV0dXJuIHRoaXMuYWRkTXNUb3VjaExpc3RlbmVyTW92ZShhLGIsZCk7ZGVmYXVsdDp0aHJvdyJVbmtub3duIHRvdWNoIGV2ZW50IHR5cGUiO319LGFkZE1zVG91Y2hMaXN0ZW5lclN0YXJ0OmZ1bmN0aW9uKGEsYixjKXt2YXIgZD10aGlzLl9tc1RvdWNoZXM7T3BlbkxheWVycy5FdmVudC5vYnNlcnZlKGEsIk1TUG9pbnRlckRvd24iLGZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0hMSxnPTAsaD1kLmxlbmd0aDtnPGg7KytnKWlmKGRbZ10ucG9pbnRlcklkPT1hLnBvaW50ZXJJZCl7Yj0hMDticmVha31ifHxkLnB1c2goYSk7YS50b3VjaGVzPWQuc2xpY2UoKTtjKGEpfSk7T3BlbkxheWVycy5FdmVudC5vYnNlcnZlKGEsIk1TUG9pbnRlclVwIixmdW5jdGlvbihhKXtmb3IodmFyIGI9MCxjPWQubGVuZ3RoO2I8YzsrK2IpaWYoZFtiXS5wb2ludGVySWQ9PWEucG9pbnRlcklkKXtkLnNwbGljZShiLDEpO2JyZWFrfX0pfSxhZGRNc1RvdWNoTGlzdGVuZXJNb3ZlOmZ1bmN0aW9uKGEsCmIsYyl7dmFyIGQ9dGhpcy5fbXNUb3VjaGVzO09wZW5MYXllcnMuRXZlbnQub2JzZXJ2ZShhLCJNU1BvaW50ZXJNb3ZlIixmdW5jdGlvbihhKXtpZihhLnBvaW50ZXJUeXBlIT1hLk1TUE9JTlRFUl9UWVBFX01PVVNFfHwwIT1hLmJ1dHRvbnMpaWYoMSE9ZC5sZW5ndGh8fGRbMF0ucGFnZVghPWEucGFnZVh8fGRbMF0ucGFnZVkhPWEucGFnZVkpe2Zvcih2YXIgYj0wLGc9ZC5sZW5ndGg7YjxnOysrYilpZihkW2JdLnBvaW50ZXJJZD09YS5wb2ludGVySWQpe2RbYl09YTticmVha31hLnRvdWNoZXM9ZC5zbGljZSgpO2MoYSl9fSl9LGFkZE1zVG91Y2hMaXN0ZW5lckVuZDpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9dGhpcy5fbXNUb3VjaGVzO09wZW5MYXllcnMuRXZlbnQub2JzZXJ2ZShhLCJNU1BvaW50ZXJVcCIsZnVuY3Rpb24oYSl7Zm9yKHZhciBiPTAsZz1kLmxlbmd0aDtiPGc7KytiKWlmKGRbYl0ucG9pbnRlcklkPT1hLnBvaW50ZXJJZCl7ZC5zcGxpY2UoYiwxKTticmVha31hLnRvdWNoZXM9CmQuc2xpY2UoKTtjKGEpfSl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuRXZlbnRzIn0pO09wZW5MYXllcnMuRXZlbnRzLmJ1dHRvbmNsaWNrPU9wZW5MYXllcnMuQ2xhc3Moe3RhcmdldDpudWxsLGV2ZW50czoibW91c2Vkb3duIG1vdXNldXAgY2xpY2sgZGJsY2xpY2sgdG91Y2hzdGFydCB0b3VjaG1vdmUgdG91Y2hlbmQga2V5ZG93biIuc3BsaXQoIiAiKSxzdGFydFJlZ0V4Oi9ebW91c2Vkb3dufHRvdWNoc3RhcnQkLyxjYW5jZWxSZWdFeDovXnRvdWNobW92ZSQvLGNvbXBsZXRlUmVnRXg6L15tb3VzZXVwfHRvdWNoZW5kJC8saW5pdGlhbGl6ZTpmdW5jdGlvbihhKXt0aGlzLnRhcmdldD1hO2ZvcihhPXRoaXMuZXZlbnRzLmxlbmd0aC0xOzA8PWE7LS1hKXRoaXMudGFyZ2V0LnJlZ2lzdGVyKHRoaXMuZXZlbnRzW2FdLHRoaXMsdGhpcy5idXR0b25DbGljayx7ZXh0ZW5zaW9uOiEwfSl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXtmb3IodmFyIGE9dGhpcy5ldmVudHMubGVuZ3RoLTE7MDw9YTstLWEpdGhpcy50YXJnZXQudW5yZWdpc3Rlcih0aGlzLmV2ZW50c1thXSx0aGlzLHRoaXMuYnV0dG9uQ2xpY2spOwpkZWxldGUgdGhpcy50YXJnZXR9LGdldFByZXNzZWRCdXR0b246ZnVuY3Rpb24oYSl7dmFyIGI9MyxjO2Rve2lmKE9wZW5MYXllcnMuRWxlbWVudC5oYXNDbGFzcyhhLCJvbEJ1dHRvbiIpKXtjPWE7YnJlYWt9YT1hLnBhcmVudE5vZGV9d2hpbGUoMDwtLWImJmEpO3JldHVybiBjfSxpZ25vcmU6ZnVuY3Rpb24oYSl7dmFyIGI9MyxjPSExO2Rve2lmKCJhIj09PWEubm9kZU5hbWUudG9Mb3dlckNhc2UoKSl7Yz0hMDticmVha31hPWEucGFyZW50Tm9kZX13aGlsZSgwPC0tYiYmYSk7cmV0dXJuIGN9LGJ1dHRvbkNsaWNrOmZ1bmN0aW9uKGEpe3ZhciBiPSEwLGM9T3BlbkxheWVycy5FdmVudC5lbGVtZW50KGEpO2lmKGMmJihPcGVuTGF5ZXJzLkV2ZW50LmlzTGVmdENsaWNrKGEpfHwhfmEudHlwZS5pbmRleE9mKCJtb3VzZSIpKSlpZihjPXRoaXMuZ2V0UHJlc3NlZEJ1dHRvbihjKSl7aWYoImtleWRvd24iPT09YS50eXBlKXN3aXRjaChhLmtleUNvZGUpe2Nhc2UgT3BlbkxheWVycy5FdmVudC5LRVlfUkVUVVJOOmNhc2UgT3BlbkxheWVycy5FdmVudC5LRVlfU1BBQ0U6dGhpcy50YXJnZXQudHJpZ2dlckV2ZW50KCJidXR0b25jbGljayIsCntidXR0b25FbGVtZW50OmN9KSxPcGVuTGF5ZXJzLkV2ZW50LnN0b3AoYSksYj0hMX1lbHNlIGlmKHRoaXMuc3RhcnRFdnQpe2lmKHRoaXMuY29tcGxldGVSZWdFeC50ZXN0KGEudHlwZSkpe3ZhciBiPU9wZW5MYXllcnMuVXRpbC5wYWdlUG9zaXRpb24oYyksZD1PcGVuTGF5ZXJzLlV0aWwuZ2V0Vmlld3BvcnRFbGVtZW50KCksZT13aW5kb3cucGFnZVlPZmZzZXR8fGQuc2Nyb2xsVG9wO2JbMF0tPXdpbmRvdy5wYWdlWE9mZnNldHx8ZC5zY3JvbGxMZWZ0O2JbMV0tPWU7dGhpcy50YXJnZXQudHJpZ2dlckV2ZW50KCJidXR0b25jbGljayIse2J1dHRvbkVsZW1lbnQ6YyxidXR0b25YWTp7eDp0aGlzLnN0YXJ0RXZ0LmNsaWVudFgtYlswXSx5OnRoaXMuc3RhcnRFdnQuY2xpZW50WS1iWzFdfX0pfXRoaXMuY2FuY2VsUmVnRXgudGVzdChhLnR5cGUpJiZkZWxldGUgdGhpcy5zdGFydEV2dDtPcGVuTGF5ZXJzLkV2ZW50LnN0b3AoYSk7Yj0hMX10aGlzLnN0YXJ0UmVnRXgudGVzdChhLnR5cGUpJiYKKHRoaXMuc3RhcnRFdnQ9YSxPcGVuTGF5ZXJzLkV2ZW50LnN0b3AoYSksYj0hMSl9ZWxzZSBiPSF0aGlzLmlnbm9yZShPcGVuTGF5ZXJzLkV2ZW50LmVsZW1lbnQoYSkpLGRlbGV0ZSB0aGlzLnN0YXJ0RXZ0O3JldHVybiBifX0pO09wZW5MYXllcnMuVXRpbD1PcGVuTGF5ZXJzLlV0aWx8fHt9OwpPcGVuTGF5ZXJzLlV0aWwudmVuZG9yUHJlZml4PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhKXtyZXR1cm4gYT9hLnJlcGxhY2UoLyhbQS1aXSkvZyxmdW5jdGlvbihhKXtyZXR1cm4iLSIrYS50b0xvd2VyQ2FzZSgpfSkucmVwbGFjZSgvXm1zLS8sIi1tcy0iKTpudWxsfWZ1bmN0aW9uIGIoYSxiKXtpZih2b2lkIDA9PT1nW2JdKXt2YXIgYyxlPTAsZj1kLmxlbmd0aCxwPSJ1bmRlZmluZWQiIT09dHlwZW9mIGEuY3NzVGV4dDtmb3IoZ1tiXT1udWxsO2U8ZjtlKyspaWYoKGM9ZFtlXSk/KHB8fChjPWMudG9Mb3dlckNhc2UoKSksYz1jK2IuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrYi5zbGljZSgxKSk6Yz1iLHZvaWQgMCE9PWFbY10pe2dbYl09YzticmVha319cmV0dXJuIGdbYl19ZnVuY3Rpb24gYyhhKXtyZXR1cm4gYihlLGEpfXZhciBkPVsiIiwiTyIsIm1zIiwiTW96IiwiV2Via2l0Il0sZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKS5zdHlsZSxmPXt9LGc9e307cmV0dXJue2NzczpmdW5jdGlvbihiKXtpZih2b2lkIDA9PT0KZltiXSl7dmFyIGQ9Yi5yZXBsYWNlKC8oLVtcc1xTXSkvZyxmdW5jdGlvbihhKXtyZXR1cm4gYS5jaGFyQXQoMSkudG9VcHBlckNhc2UoKX0pLGQ9YyhkKTtmW2JdPWEoZCl9cmV0dXJuIGZbYl19LGpzOmIsc3R5bGU6Yyxjc3NDYWNoZTpmLGpzQ2FjaGU6Z319KCk7T3BlbkxheWVycy5BbmltYXRpb249ZnVuY3Rpb24oYSl7dmFyIGI9T3BlbkxheWVycy5VdGlsLnZlbmRvclByZWZpeC5qcyhhLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiKSxjPSEhYixkPWZ1bmN0aW9uKCl7dmFyIGM9YVtiXXx8ZnVuY3Rpb24oYixjKXthLnNldFRpbWVvdXQoYiwxNil9O3JldHVybiBmdW5jdGlvbihiLGQpe2MuYXBwbHkoYSxbYixkXSl9fSgpLGU9MCxmPXt9O3JldHVybntpc05hdGl2ZTpjLHJlcXVlc3RGcmFtZTpkLHN0YXJ0OmZ1bmN0aW9uKGEsYixjKXtiPTA8Yj9iOk51bWJlci5QT1NJVElWRV9JTkZJTklUWTt2YXIgbD0rK2UsbT0rbmV3IERhdGU7ZltsXT1mdW5jdGlvbigpe2ZbbF0mJituZXcgRGF0ZS1tPD1iPyhhKCksZltsXSYmZChmW2xdLGMpKTpkZWxldGUgZltsXX07ZChmW2xdLGMpO3JldHVybiBsfSxzdG9wOmZ1bmN0aW9uKGEpe2RlbGV0ZSBmW2FdfX19KHdpbmRvdyk7T3BlbkxheWVycy5Ud2Vlbj1PcGVuTGF5ZXJzLkNsYXNzKHtlYXNpbmc6bnVsbCxiZWdpbjpudWxsLGZpbmlzaDpudWxsLGR1cmF0aW9uOm51bGwsY2FsbGJhY2tzOm51bGwsdGltZTpudWxsLG1pbkZyYW1lUmF0ZTpudWxsLHN0YXJ0VGltZTpudWxsLGFuaW1hdGlvbklkOm51bGwscGxheWluZzohMSxpbml0aWFsaXplOmZ1bmN0aW9uKGEpe3RoaXMuZWFzaW5nPWE/YTpPcGVuTGF5ZXJzLkVhc2luZy5FeHBvLmVhc2VPdXR9LHN0YXJ0OmZ1bmN0aW9uKGEsYixjLGQpe3RoaXMucGxheWluZz0hMDt0aGlzLmJlZ2luPWE7dGhpcy5maW5pc2g9Yjt0aGlzLmR1cmF0aW9uPWM7dGhpcy5jYWxsYmFja3M9ZC5jYWxsYmFja3M7dGhpcy5taW5GcmFtZVJhdGU9ZC5taW5GcmFtZVJhdGV8fDMwO3RoaXMudGltZT0wO3RoaXMuc3RhcnRUaW1lPShuZXcgRGF0ZSkuZ2V0VGltZSgpO09wZW5MYXllcnMuQW5pbWF0aW9uLnN0b3AodGhpcy5hbmltYXRpb25JZCk7dGhpcy5hbmltYXRpb25JZD1udWxsOwp0aGlzLmNhbGxiYWNrcyYmdGhpcy5jYWxsYmFja3Muc3RhcnQmJnRoaXMuY2FsbGJhY2tzLnN0YXJ0LmNhbGwodGhpcyx0aGlzLmJlZ2luKTt0aGlzLmFuaW1hdGlvbklkPU9wZW5MYXllcnMuQW5pbWF0aW9uLnN0YXJ0KE9wZW5MYXllcnMuRnVuY3Rpb24uYmluZCh0aGlzLnBsYXksdGhpcykpfSxzdG9wOmZ1bmN0aW9uKCl7dGhpcy5wbGF5aW5nJiYodGhpcy5jYWxsYmFja3MmJnRoaXMuY2FsbGJhY2tzLmRvbmUmJnRoaXMuY2FsbGJhY2tzLmRvbmUuY2FsbCh0aGlzLHRoaXMuZmluaXNoKSxPcGVuTGF5ZXJzLkFuaW1hdGlvbi5zdG9wKHRoaXMuYW5pbWF0aW9uSWQpLHRoaXMuYW5pbWF0aW9uSWQ9bnVsbCx0aGlzLnBsYXlpbmc9ITEpfSxwbGF5OmZ1bmN0aW9uKCl7dmFyIGE9e30sYjtmb3IoYiBpbiB0aGlzLmJlZ2luKXt2YXIgYz10aGlzLmJlZ2luW2JdLGQ9dGhpcy5maW5pc2hbYl07aWYobnVsbD09Y3x8bnVsbD09ZHx8aXNOYU4oYyl8fGlzTmFOKGQpKXRocm93IG5ldyBUeXBlRXJyb3IoImludmFsaWQgdmFsdWUgZm9yIFR3ZWVuIik7CmFbYl09dGhpcy5lYXNpbmcuYXBwbHkodGhpcyxbdGhpcy50aW1lLGMsZC1jLHRoaXMuZHVyYXRpb25dKX10aGlzLnRpbWUrKzt0aGlzLmNhbGxiYWNrcyYmdGhpcy5jYWxsYmFja3MuZWFjaFN0ZXAmJigobmV3IERhdGUpLmdldFRpbWUoKS10aGlzLnN0YXJ0VGltZSkvdGhpcy50aW1lPD0xRTMvdGhpcy5taW5GcmFtZVJhdGUmJnRoaXMuY2FsbGJhY2tzLmVhY2hTdGVwLmNhbGwodGhpcyxhKTt0aGlzLnRpbWU+dGhpcy5kdXJhdGlvbiYmdGhpcy5zdG9wKCl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuVHdlZW4ifSk7T3BlbkxheWVycy5FYXNpbmc9e0NMQVNTX05BTUU6Ik9wZW5MYXllcnMuRWFzaW5nIn07T3BlbkxheWVycy5FYXNpbmcuTGluZWFyPXtlYXNlSW46ZnVuY3Rpb24oYSxiLGMsZCl7cmV0dXJuIGMqYS9kK2J9LGVhc2VPdXQ6ZnVuY3Rpb24oYSxiLGMsZCl7cmV0dXJuIGMqYS9kK2J9LGVhc2VJbk91dDpmdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gYyphL2QrYn0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5FYXNpbmcuTGluZWFyIn07Ck9wZW5MYXllcnMuRWFzaW5nLkV4cG89e2Vhc2VJbjpmdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gMD09YT9iOmMqTWF0aC5wb3coMiwxMCooYS9kLTEpKStifSxlYXNlT3V0OmZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiBhPT1kP2IrYzpjKigtTWF0aC5wb3coMiwtMTAqYS9kKSsxKStifSxlYXNlSW5PdXQ6ZnVuY3Rpb24oYSxiLGMsZCl7cmV0dXJuIDA9PWE/YjphPT1kP2IrYzoxPihhLz1kLzIpP2MvMipNYXRoLnBvdygyLDEwKihhLTEpKStiOmMvMiooLU1hdGgucG93KDIsLTEwKi0tYSkrMikrYn0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5FYXNpbmcuRXhwbyJ9OwpPcGVuTGF5ZXJzLkVhc2luZy5RdWFkPXtlYXNlSW46ZnVuY3Rpb24oYSxiLGMsZCl7cmV0dXJuIGMqKGEvPWQpKmErYn0sZWFzZU91dDpmdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4tYyooYS89ZCkqKGEtMikrYn0sZWFzZUluT3V0OmZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiAxPihhLz1kLzIpP2MvMiphKmErYjotYy8yKigtLWEqKGEtMiktMSkrYn0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5FYXNpbmcuUXVhZCJ9O09wZW5MYXllcnMuUHJvamVjdGlvbj1PcGVuTGF5ZXJzLkNsYXNzKHtwcm9qOm51bGwscHJvakNvZGU6bnVsbCx0aXRsZVJlZ0V4Oi9cK3RpdGxlPVteXCtdKi8saW5pdGlhbGl6ZTpmdW5jdGlvbihhLGIpe09wZW5MYXllcnMuVXRpbC5leHRlbmQodGhpcyxiKTt0aGlzLnByb2pDb2RlPWE7Im9iamVjdCI9PXR5cGVvZiBQcm9qNGpzJiYodGhpcy5wcm9qPW5ldyBQcm9qNGpzLlByb2ooYSkpfSxnZXRDb2RlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHJvaj90aGlzLnByb2ouc3JzQ29kZTp0aGlzLnByb2pDb2RlfSxnZXRVbml0czpmdW5jdGlvbigpe3JldHVybiB0aGlzLnByb2o/dGhpcy5wcm9qLnVuaXRzOm51bGx9LHRvU3RyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0Q29kZSgpfSxlcXVhbHM6ZnVuY3Rpb24oYSl7dmFyIGI9ITE7YSYmKGEgaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLlByb2plY3Rpb258fChhPW5ldyBPcGVuTGF5ZXJzLlByb2plY3Rpb24oYSkpLCJvYmplY3QiPT0KdHlwZW9mIFByb2o0anMmJnRoaXMucHJvai5kZWZEYXRhJiZhLnByb2ouZGVmRGF0YT9iPXRoaXMucHJvai5kZWZEYXRhLnJlcGxhY2UodGhpcy50aXRsZVJlZ0V4LCIiKT09YS5wcm9qLmRlZkRhdGEucmVwbGFjZSh0aGlzLnRpdGxlUmVnRXgsIiIpOmEuZ2V0Q29kZSYmKGI9dGhpcy5nZXRDb2RlKCksYT1hLmdldENvZGUoKSxiPWI9PWF8fCEhT3BlbkxheWVycy5Qcm9qZWN0aW9uLnRyYW5zZm9ybXNbYl0mJk9wZW5MYXllcnMuUHJvamVjdGlvbi50cmFuc2Zvcm1zW2JdW2FdPT09T3BlbkxheWVycy5Qcm9qZWN0aW9uLm51bGxUcmFuc2Zvcm0pKTtyZXR1cm4gYn0sZGVzdHJveTpmdW5jdGlvbigpe2RlbGV0ZSB0aGlzLnByb2o7ZGVsZXRlIHRoaXMucHJvakNvZGV9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuUHJvamVjdGlvbiJ9KTtPcGVuTGF5ZXJzLlByb2plY3Rpb24udHJhbnNmb3Jtcz17fTsKT3BlbkxheWVycy5Qcm9qZWN0aW9uLmRlZmF1bHRzPXsiRVBTRzo0MzI2Ijp7dW5pdHM6ImRlZ3JlZXMiLG1heEV4dGVudDpbLTE4MCwtOTAsMTgwLDkwXSx5eDohMH0sIkNSUzo4NCI6e3VuaXRzOiJkZWdyZWVzIixtYXhFeHRlbnQ6Wy0xODAsLTkwLDE4MCw5MF19LCJFUFNHOjkwMDkxMyI6e3VuaXRzOiJtIixtYXhFeHRlbnQ6Wy0yLjAwMzc1MDgzNEU3LC0yLjAwMzc1MDgzNEU3LDIuMDAzNzUwODM0RTcsMi4wMDM3NTA4MzRFN119fTsKT3BlbkxheWVycy5Qcm9qZWN0aW9uLmFkZFRyYW5zZm9ybT1mdW5jdGlvbihhLGIsYyl7aWYoYz09PU9wZW5MYXllcnMuUHJvamVjdGlvbi5udWxsVHJhbnNmb3JtKXt2YXIgZD1PcGVuTGF5ZXJzLlByb2plY3Rpb24uZGVmYXVsdHNbYV07ZCYmIU9wZW5MYXllcnMuUHJvamVjdGlvbi5kZWZhdWx0c1tiXSYmKE9wZW5MYXllcnMuUHJvamVjdGlvbi5kZWZhdWx0c1tiXT1kKX1PcGVuTGF5ZXJzLlByb2plY3Rpb24udHJhbnNmb3Jtc1thXXx8KE9wZW5MYXllcnMuUHJvamVjdGlvbi50cmFuc2Zvcm1zW2FdPXt9KTtPcGVuTGF5ZXJzLlByb2plY3Rpb24udHJhbnNmb3Jtc1thXVtiXT1jfTsKT3BlbkxheWVycy5Qcm9qZWN0aW9uLnRyYW5zZm9ybT1mdW5jdGlvbihhLGIsYyl7aWYoYiYmYylpZihiIGluc3RhbmNlb2YgT3BlbkxheWVycy5Qcm9qZWN0aW9ufHwoYj1uZXcgT3BlbkxheWVycy5Qcm9qZWN0aW9uKGIpKSxjIGluc3RhbmNlb2YgT3BlbkxheWVycy5Qcm9qZWN0aW9ufHwoYz1uZXcgT3BlbkxheWVycy5Qcm9qZWN0aW9uKGMpKSxiLnByb2omJmMucHJvailhPVByb2o0anMudHJhbnNmb3JtKGIucHJvaixjLnByb2osYSk7ZWxzZXtiPWIuZ2V0Q29kZSgpO2M9Yy5nZXRDb2RlKCk7dmFyIGQ9T3BlbkxheWVycy5Qcm9qZWN0aW9uLnRyYW5zZm9ybXM7aWYoZFtiXSYmZFtiXVtjXSlkW2JdW2NdKGEpfXJldHVybiBhfTtPcGVuTGF5ZXJzLlByb2plY3Rpb24ubnVsbFRyYW5zZm9ybT1mdW5jdGlvbihhKXtyZXR1cm4gYX07CihmdW5jdGlvbigpe2Z1bmN0aW9uIGEoYSl7YS54PTE4MCphLngvZDthLnk9MTgwL01hdGguUEkqKDIqTWF0aC5hdGFuKE1hdGguZXhwKGEueS9kKk1hdGguUEkpKS1NYXRoLlBJLzIpO3JldHVybiBhfWZ1bmN0aW9uIGIoYSl7YS54PWEueCpkLzE4MDt2YXIgYj1NYXRoLmxvZyhNYXRoLnRhbigoOTArYS55KSpNYXRoLlBJLzM2MCkpL01hdGguUEkqZDthLnk9TWF0aC5tYXgoLTIuMDAzNzUwODM0RTcsTWF0aC5taW4oYiwyLjAwMzc1MDgzNEU3KSk7cmV0dXJuIGF9ZnVuY3Rpb24gYyhjLGQpe3ZhciBlPU9wZW5MYXllcnMuUHJvamVjdGlvbi5hZGRUcmFuc2Zvcm0sZj1PcGVuTGF5ZXJzLlByb2plY3Rpb24ubnVsbFRyYW5zZm9ybSxnLHAsbixxLHM7Zz0wO2ZvcihwPWQubGVuZ3RoO2c8cDsrK2cpZm9yKG49ZFtnXSxlKGMsbixiKSxlKG4sYyxhKSxzPWcrMTtzPHA7KytzKXE9ZFtzXSxlKG4scSxmKSxlKHEsbixmKX12YXIgZD0yLjAwMzc1MDgzNEU3LGU9WyJFUFNHOjkwMDkxMyIsIkVQU0c6Mzg1NyIsCiJFUFNHOjEwMjExMyIsIkVQU0c6MTAyMTAwIl0sZj1bIkNSUzo4NCIsInVybjpvZ2M6ZGVmOmNyczpFUFNHOjYuNjo0MzI2IiwiRVBTRzo0MzI2Il0sZztmb3IoZz1lLmxlbmd0aC0xOzA8PWc7LS1nKWMoZVtnXSxmKTtmb3IoZz1mLmxlbmd0aC0xOzA8PWc7LS1nKWMoZltnXSxlKX0pKCk7T3BlbkxheWVycy5NYXA9T3BlbkxheWVycy5DbGFzcyh7Wl9JTkRFWF9CQVNFOntCYXNlTGF5ZXI6MTAwLE92ZXJsYXk6MzI1LEZlYXR1cmU6NzI1LFBvcHVwOjc1MCxDb250cm9sOjFFM30saWQ6bnVsbCxmcmFjdGlvbmFsWm9vbTohMSxldmVudHM6bnVsbCxhbGxPdmVybGF5czohMSxkaXY6bnVsbCxkcmFnZ2luZzohMSxzaXplOm51bGwsdmlld1BvcnREaXY6bnVsbCxsYXllckNvbnRhaW5lck9yaWdpbjpudWxsLGxheWVyQ29udGFpbmVyRGl2Om51bGwsbGF5ZXJzOm51bGwsY29udHJvbHM6bnVsbCxwb3B1cHM6bnVsbCxiYXNlTGF5ZXI6bnVsbCxjZW50ZXI6bnVsbCxyZXNvbHV0aW9uOm51bGwsem9vbTowLHBhblJhdGlvOjEuNSxvcHRpb25zOm51bGwsdGlsZVNpemU6bnVsbCxwcm9qZWN0aW9uOiJFUFNHOjQzMjYiLHVuaXRzOm51bGwscmVzb2x1dGlvbnM6bnVsbCxtYXhSZXNvbHV0aW9uOm51bGwsbWluUmVzb2x1dGlvbjpudWxsLG1heFNjYWxlOm51bGwsbWluU2NhbGU6bnVsbCwKbWF4RXh0ZW50Om51bGwsbWluRXh0ZW50Om51bGwscmVzdHJpY3RlZEV4dGVudDpudWxsLG51bVpvb21MZXZlbHM6MTYsdGhlbWU6bnVsbCxkaXNwbGF5UHJvamVjdGlvbjpudWxsLGZhbGxUaHJvdWdoOiExLGF1dG9VcGRhdGVTaXplOiEwLGV2ZW50TGlzdGVuZXJzOm51bGwscGFuVHdlZW46bnVsbCxwYW5NZXRob2Q6T3BlbkxheWVycy5FYXNpbmcuRXhwby5lYXNlT3V0LHBhbkR1cmF0aW9uOjUwLHpvb21Ud2VlbjpudWxsLHpvb21NZXRob2Q6T3BlbkxheWVycy5FYXNpbmcuUXVhZC5lYXNlT3V0LHpvb21EdXJhdGlvbjoyMCxwYWRkaW5nRm9yUG9wdXBzOm51bGwsbGF5ZXJDb250YWluZXJPcmlnaW5QeDpudWxsLG1pblB4Om51bGwsbWF4UHg6bnVsbCxpbml0aWFsaXplOmZ1bmN0aW9uKGEsYil7MT09PWFyZ3VtZW50cy5sZW5ndGgmJiJvYmplY3QiPT09dHlwZW9mIGEmJihhPShiPWEpJiZiLmRpdik7dGhpcy50aWxlU2l6ZT1uZXcgT3BlbkxheWVycy5TaXplKE9wZW5MYXllcnMuTWFwLlRJTEVfV0lEVEgsCk9wZW5MYXllcnMuTWFwLlRJTEVfSEVJR0hUKTt0aGlzLnBhZGRpbmdGb3JQb3B1cHM9bmV3IE9wZW5MYXllcnMuQm91bmRzKDE1LDE1LDE1LDE1KTt0aGlzLnRoZW1lPU9wZW5MYXllcnMuX2dldFNjcmlwdExvY2F0aW9uKCkrInRoZW1lL2RlZmF1bHQvc3R5bGUuY3NzIjt0aGlzLm9wdGlvbnM9T3BlbkxheWVycy5VdGlsLmV4dGVuZCh7fSxiKTtPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHRoaXMsYik7T3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHModGhpcyxPcGVuTGF5ZXJzLlByb2plY3Rpb24uZGVmYXVsdHNbdGhpcy5wcm9qZWN0aW9uIGluc3RhbmNlb2YgT3BlbkxheWVycy5Qcm9qZWN0aW9uP3RoaXMucHJvamVjdGlvbi5wcm9qQ29kZTp0aGlzLnByb2plY3Rpb25dKTshdGhpcy5tYXhFeHRlbnR8fHRoaXMubWF4RXh0ZW50IGluc3RhbmNlb2YgT3BlbkxheWVycy5Cb3VuZHN8fCh0aGlzLm1heEV4dGVudD1uZXcgT3BlbkxheWVycy5Cb3VuZHModGhpcy5tYXhFeHRlbnQpKTsKIXRoaXMubWluRXh0ZW50fHx0aGlzLm1pbkV4dGVudCBpbnN0YW5jZW9mIE9wZW5MYXllcnMuQm91bmRzfHwodGhpcy5taW5FeHRlbnQ9bmV3IE9wZW5MYXllcnMuQm91bmRzKHRoaXMubWluRXh0ZW50KSk7IXRoaXMucmVzdHJpY3RlZEV4dGVudHx8dGhpcy5yZXN0cmljdGVkRXh0ZW50IGluc3RhbmNlb2YgT3BlbkxheWVycy5Cb3VuZHN8fCh0aGlzLnJlc3RyaWN0ZWRFeHRlbnQ9bmV3IE9wZW5MYXllcnMuQm91bmRzKHRoaXMucmVzdHJpY3RlZEV4dGVudCkpOyF0aGlzLmNlbnRlcnx8dGhpcy5jZW50ZXIgaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLkxvbkxhdHx8KHRoaXMuY2VudGVyPW5ldyBPcGVuTGF5ZXJzLkxvbkxhdCh0aGlzLmNlbnRlcikpO3RoaXMubGF5ZXJzPVtdO3RoaXMuaWQ9T3BlbkxheWVycy5VdGlsLmNyZWF0ZVVuaXF1ZUlEKCJPcGVuTGF5ZXJzLk1hcF8iKTt0aGlzLmRpdj1PcGVuTGF5ZXJzLlV0aWwuZ2V0RWxlbWVudChhKTt0aGlzLmRpdnx8KHRoaXMuZGl2PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpLAp0aGlzLmRpdi5zdHlsZS5oZWlnaHQ9IjFweCIsdGhpcy5kaXYuc3R5bGUud2lkdGg9IjFweCIpO09wZW5MYXllcnMuRWxlbWVudC5hZGRDbGFzcyh0aGlzLmRpdiwib2xNYXAiKTt2YXIgYz10aGlzLmlkKyJfT3BlbkxheWVyc19WaWV3UG9ydCI7dGhpcy52aWV3UG9ydERpdj1PcGVuTGF5ZXJzLlV0aWwuY3JlYXRlRGl2KGMsbnVsbCxudWxsLG51bGwsInJlbGF0aXZlIixudWxsLCJoaWRkZW4iKTt0aGlzLnZpZXdQb3J0RGl2LnN0eWxlLndpZHRoPSIxMDAlIjt0aGlzLnZpZXdQb3J0RGl2LnN0eWxlLmhlaWdodD0iMTAwJSI7dGhpcy52aWV3UG9ydERpdi5jbGFzc05hbWU9Im9sTWFwVmlld3BvcnQiO3RoaXMuZGl2LmFwcGVuZENoaWxkKHRoaXMudmlld1BvcnREaXYpO3RoaXMuZXZlbnRzPW5ldyBPcGVuTGF5ZXJzLkV2ZW50cyh0aGlzLHRoaXMudmlld1BvcnREaXYsbnVsbCx0aGlzLmZhbGxUaHJvdWdoLHtpbmNsdWRlWFk6ITB9KTtPcGVuTGF5ZXJzLlRpbGVNYW5hZ2VyJiZudWxsIT09CnRoaXMudGlsZU1hbmFnZXImJih0aGlzLnRpbGVNYW5hZ2VyIGluc3RhbmNlb2YgT3BlbkxheWVycy5UaWxlTWFuYWdlcnx8KHRoaXMudGlsZU1hbmFnZXI9bmV3IE9wZW5MYXllcnMuVGlsZU1hbmFnZXIodGhpcy50aWxlTWFuYWdlcikpLHRoaXMudGlsZU1hbmFnZXIuYWRkTWFwKHRoaXMpKTtjPXRoaXMuaWQrIl9PcGVuTGF5ZXJzX0NvbnRhaW5lciI7dGhpcy5sYXllckNvbnRhaW5lckRpdj1PcGVuTGF5ZXJzLlV0aWwuY3JlYXRlRGl2KGMpO3RoaXMubGF5ZXJDb250YWluZXJEaXYuc3R5bGUuekluZGV4PXRoaXMuWl9JTkRFWF9CQVNFLlBvcHVwLTE7dGhpcy5sYXllckNvbnRhaW5lck9yaWdpblB4PXt4OjAseTowfTt0aGlzLmFwcGx5VHJhbnNmb3JtKCk7dGhpcy52aWV3UG9ydERpdi5hcHBlbmRDaGlsZCh0aGlzLmxheWVyQ29udGFpbmVyRGl2KTt0aGlzLnVwZGF0ZVNpemUoKTtpZih0aGlzLmV2ZW50TGlzdGVuZXJzIGluc3RhbmNlb2YgT2JqZWN0KXRoaXMuZXZlbnRzLm9uKHRoaXMuZXZlbnRMaXN0ZW5lcnMpOwohMD09PXRoaXMuYXV0b1VwZGF0ZVNpemUmJih0aGlzLnVwZGF0ZVNpemVEZXN0cm95PU9wZW5MYXllcnMuRnVuY3Rpb24uYmluZCh0aGlzLnVwZGF0ZVNpemUsdGhpcyksT3BlbkxheWVycy5FdmVudC5vYnNlcnZlKHdpbmRvdywicmVzaXplIix0aGlzLnVwZGF0ZVNpemVEZXN0cm95KSk7aWYodGhpcy50aGVtZSl7Zm9yKHZhciBjPSEwLGQ9ZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImxpbmsiKSxlPTAsZj1kLmxlbmd0aDtlPGY7KytlKWlmKE9wZW5MYXllcnMuVXRpbC5pc0VxdWl2YWxlbnRVcmwoZC5pdGVtKGUpLmhyZWYsdGhpcy50aGVtZSkpe2M9ITE7YnJlYWt9YyYmKGM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgibGluayIpLGMuc2V0QXR0cmlidXRlKCJyZWwiLCJzdHlsZXNoZWV0IiksYy5zZXRBdHRyaWJ1dGUoInR5cGUiLCJ0ZXh0L2NzcyIpLGMuc2V0QXR0cmlidXRlKCJocmVmIix0aGlzLnRoZW1lKSxkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgiaGVhZCIpWzBdLmFwcGVuZENoaWxkKGMpKX1udWxsPT0KdGhpcy5jb250cm9scyYmKHRoaXMuY29udHJvbHM9W10sbnVsbCE9T3BlbkxheWVycy5Db250cm9sJiYoT3BlbkxheWVycy5Db250cm9sLk5hdmlnYXRpb24/dGhpcy5jb250cm9scy5wdXNoKG5ldyBPcGVuTGF5ZXJzLkNvbnRyb2wuTmF2aWdhdGlvbik6T3BlbkxheWVycy5Db250cm9sLlRvdWNoTmF2aWdhdGlvbiYmdGhpcy5jb250cm9scy5wdXNoKG5ldyBPcGVuTGF5ZXJzLkNvbnRyb2wuVG91Y2hOYXZpZ2F0aW9uKSxPcGVuTGF5ZXJzLkNvbnRyb2wuWm9vbT90aGlzLmNvbnRyb2xzLnB1c2gobmV3IE9wZW5MYXllcnMuQ29udHJvbC5ab29tKTpPcGVuTGF5ZXJzLkNvbnRyb2wuUGFuWm9vbSYmdGhpcy5jb250cm9scy5wdXNoKG5ldyBPcGVuTGF5ZXJzLkNvbnRyb2wuUGFuWm9vbSksT3BlbkxheWVycy5Db250cm9sLkFyZ1BhcnNlciYmdGhpcy5jb250cm9scy5wdXNoKG5ldyBPcGVuTGF5ZXJzLkNvbnRyb2wuQXJnUGFyc2VyKSxPcGVuTGF5ZXJzLkNvbnRyb2wuQXR0cmlidXRpb24mJgp0aGlzLmNvbnRyb2xzLnB1c2gobmV3IE9wZW5MYXllcnMuQ29udHJvbC5BdHRyaWJ1dGlvbikpKTtlPTA7Zm9yKGY9dGhpcy5jb250cm9scy5sZW5ndGg7ZTxmO2UrKyl0aGlzLmFkZENvbnRyb2xUb01hcCh0aGlzLmNvbnRyb2xzW2VdKTt0aGlzLnBvcHVwcz1bXTt0aGlzLnVubG9hZERlc3Ryb3k9T3BlbkxheWVycy5GdW5jdGlvbi5iaW5kKHRoaXMuZGVzdHJveSx0aGlzKTtPcGVuTGF5ZXJzLkV2ZW50Lm9ic2VydmUod2luZG93LCJ1bmxvYWQiLHRoaXMudW5sb2FkRGVzdHJveSk7YiYmYi5sYXllcnMmJihkZWxldGUgdGhpcy5jZW50ZXIsZGVsZXRlIHRoaXMuem9vbSx0aGlzLmFkZExheWVycyhiLmxheWVycyksYi5jZW50ZXImJiF0aGlzLmdldENlbnRlcigpJiZ0aGlzLnNldENlbnRlcihiLmNlbnRlcixiLnpvb20pKTt0aGlzLnBhbk1ldGhvZCYmKHRoaXMucGFuVHdlZW49bmV3IE9wZW5MYXllcnMuVHdlZW4odGhpcy5wYW5NZXRob2QpKTt0aGlzLnpvb21NZXRob2QmJnRoaXMuYXBwbHlUcmFuc2Zvcm0udHJhbnNmb3JtJiYKKHRoaXMuem9vbVR3ZWVuPW5ldyBPcGVuTGF5ZXJzLlR3ZWVuKHRoaXMuem9vbU1ldGhvZCkpfSxnZXRWaWV3cG9ydDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnZpZXdQb3J0RGl2fSxyZW5kZXI6ZnVuY3Rpb24oYSl7dGhpcy5kaXY9T3BlbkxheWVycy5VdGlsLmdldEVsZW1lbnQoYSk7T3BlbkxheWVycy5FbGVtZW50LmFkZENsYXNzKHRoaXMuZGl2LCJvbE1hcCIpO3RoaXMudmlld1BvcnREaXYucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLnZpZXdQb3J0RGl2KTt0aGlzLmRpdi5hcHBlbmRDaGlsZCh0aGlzLnZpZXdQb3J0RGl2KTt0aGlzLnVwZGF0ZVNpemUoKX0sdW5sb2FkRGVzdHJveTpudWxsLHVwZGF0ZVNpemVEZXN0cm95Om51bGwsZGVzdHJveTpmdW5jdGlvbigpe2lmKCF0aGlzLnVubG9hZERlc3Ryb3kpcmV0dXJuITE7dGhpcy5wYW5Ud2VlbiYmKHRoaXMucGFuVHdlZW4uc3RvcCgpLHRoaXMucGFuVHdlZW49bnVsbCk7dGhpcy56b29tVHdlZW4mJih0aGlzLnpvb21Ud2Vlbi5zdG9wKCksCnRoaXMuem9vbVR3ZWVuPW51bGwpO09wZW5MYXllcnMuRXZlbnQuc3RvcE9ic2VydmluZyh3aW5kb3csInVubG9hZCIsdGhpcy51bmxvYWREZXN0cm95KTt0aGlzLnVubG9hZERlc3Ryb3k9bnVsbDt0aGlzLnVwZGF0ZVNpemVEZXN0cm95JiZPcGVuTGF5ZXJzLkV2ZW50LnN0b3BPYnNlcnZpbmcod2luZG93LCJyZXNpemUiLHRoaXMudXBkYXRlU2l6ZURlc3Ryb3kpO3RoaXMucGFkZGluZ0ZvclBvcHVwcz1udWxsO2lmKG51bGwhPXRoaXMuY29udHJvbHMpe2Zvcih2YXIgYT10aGlzLmNvbnRyb2xzLmxlbmd0aC0xOzA8PWE7LS1hKXRoaXMuY29udHJvbHNbYV0uZGVzdHJveSgpO3RoaXMuY29udHJvbHM9bnVsbH1pZihudWxsIT10aGlzLmxheWVycyl7Zm9yKGE9dGhpcy5sYXllcnMubGVuZ3RoLTE7MDw9YTstLWEpdGhpcy5sYXllcnNbYV0uZGVzdHJveSghMSk7dGhpcy5sYXllcnM9bnVsbH10aGlzLnZpZXdQb3J0RGl2JiZ0aGlzLnZpZXdQb3J0RGl2LnBhcmVudE5vZGUmJnRoaXMudmlld1BvcnREaXYucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLnZpZXdQb3J0RGl2KTsKdGhpcy52aWV3UG9ydERpdj1udWxsO3RoaXMudGlsZU1hbmFnZXImJih0aGlzLnRpbGVNYW5hZ2VyLnJlbW92ZU1hcCh0aGlzKSx0aGlzLnRpbGVNYW5hZ2VyPW51bGwpO3RoaXMuZXZlbnRMaXN0ZW5lcnMmJih0aGlzLmV2ZW50cy51bih0aGlzLmV2ZW50TGlzdGVuZXJzKSx0aGlzLmV2ZW50TGlzdGVuZXJzPW51bGwpO3RoaXMuZXZlbnRzLmRlc3Ryb3koKTt0aGlzLm9wdGlvbnM9dGhpcy5ldmVudHM9bnVsbH0sc2V0T3B0aW9uczpmdW5jdGlvbihhKXt2YXIgYj10aGlzLm1pblB4JiZhLnJlc3RyaWN0ZWRFeHRlbnQhPXRoaXMucmVzdHJpY3RlZEV4dGVudDtPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHRoaXMsYSk7YiYmdGhpcy5tb3ZlVG8odGhpcy5nZXRDYWNoZWRDZW50ZXIoKSx0aGlzLnpvb20se2ZvcmNlWm9vbUNoYW5nZTohMH0pfSxnZXRUaWxlU2l6ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnRpbGVTaXplfSxnZXRCeTpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9ImZ1bmN0aW9uIj09CnR5cGVvZiBjLnRlc3Q7cmV0dXJuIE9wZW5MYXllcnMuQXJyYXkuZmlsdGVyKHRoaXNbYV0sZnVuY3Rpb24oYSl7cmV0dXJuIGFbYl09PWN8fGQmJmMudGVzdChhW2JdKX0pfSxnZXRMYXllcnNCeTpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLmdldEJ5KCJsYXllcnMiLGEsYil9LGdldExheWVyc0J5TmFtZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5nZXRMYXllcnNCeSgibmFtZSIsYSl9LGdldExheWVyc0J5Q2xhc3M6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZ2V0TGF5ZXJzQnkoIkNMQVNTX05BTUUiLGEpfSxnZXRDb250cm9sc0J5OmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuZ2V0QnkoImNvbnRyb2xzIixhLGIpfSxnZXRDb250cm9sc0J5Q2xhc3M6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZ2V0Q29udHJvbHNCeSgiQ0xBU1NfTkFNRSIsYSl9LGdldExheWVyOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1udWxsLGM9MCxkPXRoaXMubGF5ZXJzLmxlbmd0aDtjPGQ7YysrKXt2YXIgZT0KdGhpcy5sYXllcnNbY107aWYoZS5pZD09YSl7Yj1lO2JyZWFrfX1yZXR1cm4gYn0sc2V0TGF5ZXJaSW5kZXg6ZnVuY3Rpb24oYSxiKXthLnNldFpJbmRleCh0aGlzLlpfSU5ERVhfQkFTRVthLmlzQmFzZUxheWVyPyJCYXNlTGF5ZXIiOiJPdmVybGF5Il0rNSpiKX0scmVzZXRMYXllcnNaSW5kZXg6ZnVuY3Rpb24oKXtmb3IodmFyIGE9MCxiPXRoaXMubGF5ZXJzLmxlbmd0aDthPGI7YSsrKXRoaXMuc2V0TGF5ZXJaSW5kZXgodGhpcy5sYXllcnNbYV0sYSl9LGFkZExheWVyOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0wLGM9dGhpcy5sYXllcnMubGVuZ3RoO2I8YztiKyspaWYodGhpcy5sYXllcnNbYl09PWEpcmV0dXJuITE7aWYoITE9PT10aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoInByZWFkZGxheWVyIix7bGF5ZXI6YX0pKXJldHVybiExO3RoaXMuYWxsT3ZlcmxheXMmJihhLmlzQmFzZUxheWVyPSExKTthLmRpdi5jbGFzc05hbWU9Im9sTGF5ZXJEaXYiO2EuZGl2LnN0eWxlLm92ZXJmbG93PQoiIjt0aGlzLnNldExheWVyWkluZGV4KGEsdGhpcy5sYXllcnMubGVuZ3RoKTthLmlzRml4ZWQ/dGhpcy52aWV3UG9ydERpdi5hcHBlbmRDaGlsZChhLmRpdik6dGhpcy5sYXllckNvbnRhaW5lckRpdi5hcHBlbmRDaGlsZChhLmRpdik7dGhpcy5sYXllcnMucHVzaChhKTthLnNldE1hcCh0aGlzKTthLmlzQmFzZUxheWVyfHx0aGlzLmFsbE92ZXJsYXlzJiYhdGhpcy5iYXNlTGF5ZXI/bnVsbD09dGhpcy5iYXNlTGF5ZXI/dGhpcy5zZXRCYXNlTGF5ZXIoYSk6YS5zZXRWaXNpYmlsaXR5KCExKTphLnJlZHJhdygpO3RoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgiYWRkbGF5ZXIiLHtsYXllcjphfSk7YS5ldmVudHMudHJpZ2dlckV2ZW50KCJhZGRlZCIse21hcDp0aGlzLGxheWVyOmF9KTthLmFmdGVyQWRkKCk7cmV0dXJuITB9LGFkZExheWVyczpmdW5jdGlvbihhKXtmb3IodmFyIGI9MCxjPWEubGVuZ3RoO2I8YztiKyspdGhpcy5hZGRMYXllcihhW2JdKX0scmVtb3ZlTGF5ZXI6ZnVuY3Rpb24oYSwKYil7aWYoITEhPT10aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoInByZXJlbW92ZWxheWVyIix7bGF5ZXI6YX0pKXtudWxsPT1iJiYoYj0hMCk7YS5pc0ZpeGVkP3RoaXMudmlld1BvcnREaXYucmVtb3ZlQ2hpbGQoYS5kaXYpOnRoaXMubGF5ZXJDb250YWluZXJEaXYucmVtb3ZlQ2hpbGQoYS5kaXYpO09wZW5MYXllcnMuVXRpbC5yZW1vdmVJdGVtKHRoaXMubGF5ZXJzLGEpO2EucmVtb3ZlTWFwKHRoaXMpO2EubWFwPW51bGw7aWYodGhpcy5iYXNlTGF5ZXI9PWEmJih0aGlzLmJhc2VMYXllcj1udWxsLGIpKWZvcih2YXIgYz0wLGQ9dGhpcy5sYXllcnMubGVuZ3RoO2M8ZDtjKyspe3ZhciBlPXRoaXMubGF5ZXJzW2NdO2lmKGUuaXNCYXNlTGF5ZXJ8fHRoaXMuYWxsT3ZlcmxheXMpe3RoaXMuc2V0QmFzZUxheWVyKGUpO2JyZWFrfX10aGlzLnJlc2V0TGF5ZXJzWkluZGV4KCk7dGhpcy5ldmVudHMudHJpZ2dlckV2ZW50KCJyZW1vdmVsYXllciIse2xheWVyOmF9KTthLmV2ZW50cy50cmlnZ2VyRXZlbnQoInJlbW92ZWQiLAp7bWFwOnRoaXMsbGF5ZXI6YX0pfX0sZ2V0TnVtTGF5ZXJzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubGF5ZXJzLmxlbmd0aH0sZ2V0TGF5ZXJJbmRleDpmdW5jdGlvbihhKXtyZXR1cm4gT3BlbkxheWVycy5VdGlsLmluZGV4T2YodGhpcy5sYXllcnMsYSl9LHNldExheWVySW5kZXg6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmdldExheWVySW5kZXgoYSk7MD5iP2I9MDpiPnRoaXMubGF5ZXJzLmxlbmd0aCYmKGI9dGhpcy5sYXllcnMubGVuZ3RoKTtpZihjIT1iKXt0aGlzLmxheWVycy5zcGxpY2UoYywxKTt0aGlzLmxheWVycy5zcGxpY2UoYiwwLGEpO2Zvcih2YXIgYz0wLGQ9dGhpcy5sYXllcnMubGVuZ3RoO2M8ZDtjKyspdGhpcy5zZXRMYXllclpJbmRleCh0aGlzLmxheWVyc1tjXSxjKTt0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoImNoYW5nZWxheWVyIix7bGF5ZXI6YSxwcm9wZXJ0eToib3JkZXIifSk7dGhpcy5hbGxPdmVybGF5cyYmKDA9PT1iP3RoaXMuc2V0QmFzZUxheWVyKGEpOgp0aGlzLmJhc2VMYXllciE9PXRoaXMubGF5ZXJzWzBdJiZ0aGlzLnNldEJhc2VMYXllcih0aGlzLmxheWVyc1swXSkpfX0scmFpc2VMYXllcjpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuZ2V0TGF5ZXJJbmRleChhKStiO3RoaXMuc2V0TGF5ZXJJbmRleChhLGMpfSxzZXRCYXNlTGF5ZXI6ZnVuY3Rpb24oYSl7aWYoYSE9dGhpcy5iYXNlTGF5ZXImJi0xIT1PcGVuTGF5ZXJzLlV0aWwuaW5kZXhPZih0aGlzLmxheWVycyxhKSl7dmFyIGI9dGhpcy5nZXRDYWNoZWRDZW50ZXIoKSxjPU9wZW5MYXllcnMuVXRpbC5nZXRSZXNvbHV0aW9uRnJvbVNjYWxlKHRoaXMuZ2V0U2NhbGUoKSxhLnVuaXRzKTtudWxsPT10aGlzLmJhc2VMYXllcnx8dGhpcy5hbGxPdmVybGF5c3x8dGhpcy5iYXNlTGF5ZXIuc2V0VmlzaWJpbGl0eSghMSk7dGhpcy5iYXNlTGF5ZXI9YTtpZighdGhpcy5hbGxPdmVybGF5c3x8dGhpcy5iYXNlTGF5ZXIudmlzaWJpbGl0eSl0aGlzLmJhc2VMYXllci5zZXRWaXNpYmlsaXR5KCEwKSwKITE9PT10aGlzLmJhc2VMYXllci5pblJhbmdlJiZ0aGlzLmJhc2VMYXllci5yZWRyYXcoKTtudWxsIT1iJiYoYT10aGlzLmdldFpvb21Gb3JSZXNvbHV0aW9uKGN8fHRoaXMucmVzb2x1dGlvbiwhMCksdGhpcy5zZXRDZW50ZXIoYixhLCExLCEwKSk7dGhpcy5ldmVudHMudHJpZ2dlckV2ZW50KCJjaGFuZ2ViYXNlbGF5ZXIiLHtsYXllcjp0aGlzLmJhc2VMYXllcn0pfX0sYWRkQ29udHJvbDpmdW5jdGlvbihhLGIpe3RoaXMuY29udHJvbHMucHVzaChhKTt0aGlzLmFkZENvbnRyb2xUb01hcChhLGIpfSxhZGRDb250cm9sczpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz0xPT09YXJndW1lbnRzLmxlbmd0aD9bXTpiLGQ9MCxlPWEubGVuZ3RoO2Q8ZTtkKyspdGhpcy5hZGRDb250cm9sKGFbZF0sY1tkXT9jW2RdOm51bGwpfSxhZGRDb250cm9sVG9NYXA6ZnVuY3Rpb24oYSxiKXthLm91dHNpZGVWaWV3cG9ydD1udWxsIT1hLmRpdjt0aGlzLmRpc3BsYXlQcm9qZWN0aW9uJiYhYS5kaXNwbGF5UHJvamVjdGlvbiYmCihhLmRpc3BsYXlQcm9qZWN0aW9uPXRoaXMuZGlzcGxheVByb2plY3Rpb24pO2Euc2V0TWFwKHRoaXMpO3ZhciBjPWEuZHJhdyhiKTtjJiYhYS5vdXRzaWRlVmlld3BvcnQmJihjLnN0eWxlLnpJbmRleD10aGlzLlpfSU5ERVhfQkFTRS5Db250cm9sK3RoaXMuY29udHJvbHMubGVuZ3RoLHRoaXMudmlld1BvcnREaXYuYXBwZW5kQ2hpbGQoYykpO2EuYXV0b0FjdGl2YXRlJiZhLmFjdGl2YXRlKCl9LGdldENvbnRyb2w6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPW51bGwsYz0wLGQ9dGhpcy5jb250cm9scy5sZW5ndGg7YzxkO2MrKyl7dmFyIGU9dGhpcy5jb250cm9sc1tjXTtpZihlLmlkPT1hKXtiPWU7YnJlYWt9fXJldHVybiBifSxyZW1vdmVDb250cm9sOmZ1bmN0aW9uKGEpe2EmJmE9PXRoaXMuZ2V0Q29udHJvbChhLmlkKSYmKGEuZGl2JiZhLmRpdi5wYXJlbnROb2RlPT10aGlzLnZpZXdQb3J0RGl2JiZ0aGlzLnZpZXdQb3J0RGl2LnJlbW92ZUNoaWxkKGEuZGl2KSxPcGVuTGF5ZXJzLlV0aWwucmVtb3ZlSXRlbSh0aGlzLmNvbnRyb2xzLAphKSl9LGFkZFBvcHVwOmZ1bmN0aW9uKGEsYil7aWYoYilmb3IodmFyIGM9dGhpcy5wb3B1cHMubGVuZ3RoLTE7MDw9YzstLWMpdGhpcy5yZW1vdmVQb3B1cCh0aGlzLnBvcHVwc1tjXSk7YS5tYXA9dGhpczt0aGlzLnBvcHVwcy5wdXNoKGEpO2lmKGM9YS5kcmF3KCkpYy5zdHlsZS56SW5kZXg9dGhpcy5aX0lOREVYX0JBU0UuUG9wdXArdGhpcy5wb3B1cHMubGVuZ3RoLHRoaXMubGF5ZXJDb250YWluZXJEaXYuYXBwZW5kQ2hpbGQoYyl9LHJlbW92ZVBvcHVwOmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuVXRpbC5yZW1vdmVJdGVtKHRoaXMucG9wdXBzLGEpO2lmKGEuZGl2KXRyeXt0aGlzLmxheWVyQ29udGFpbmVyRGl2LnJlbW92ZUNoaWxkKGEuZGl2KX1jYXRjaChiKXt9YS5tYXA9bnVsbH0sZ2V0U2l6ZTpmdW5jdGlvbigpe3ZhciBhPW51bGw7bnVsbCE9dGhpcy5zaXplJiYoYT10aGlzLnNpemUuY2xvbmUoKSk7cmV0dXJuIGF9LHVwZGF0ZVNpemU6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmdldEN1cnJlbnRTaXplKCk7CmlmKGEmJiFpc05hTihhLmgpJiYhaXNOYU4oYS53KSl7dGhpcy5ldmVudHMuY2xlYXJNb3VzZUNhY2hlKCk7dmFyIGI9dGhpcy5nZXRTaXplKCk7bnVsbD09YiYmKHRoaXMuc2l6ZT1iPWEpO2lmKCFhLmVxdWFscyhiKSl7dGhpcy5zaXplPWE7YT0wO2ZvcihiPXRoaXMubGF5ZXJzLmxlbmd0aDthPGI7YSsrKXRoaXMubGF5ZXJzW2FdLm9uTWFwUmVzaXplKCk7YT10aGlzLmdldENhY2hlZENlbnRlcigpO251bGwhPXRoaXMuYmFzZUxheWVyJiZudWxsIT1hJiYoYj10aGlzLmdldFpvb20oKSx0aGlzLnpvb209bnVsbCx0aGlzLnNldENlbnRlcihhLGIpKX19dGhpcy5ldmVudHMudHJpZ2dlckV2ZW50KCJ1cGRhdGVzaXplIil9LGdldEN1cnJlbnRTaXplOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IE9wZW5MYXllcnMuU2l6ZSh0aGlzLmRpdi5jbGllbnRXaWR0aCx0aGlzLmRpdi5jbGllbnRIZWlnaHQpO2lmKDA9PWEudyYmMD09YS5ofHxpc05hTihhLncpJiZpc05hTihhLmgpKWEudz10aGlzLmRpdi5vZmZzZXRXaWR0aCwKYS5oPXRoaXMuZGl2Lm9mZnNldEhlaWdodDtpZigwPT1hLncmJjA9PWEuaHx8aXNOYU4oYS53KSYmaXNOYU4oYS5oKSlhLnc9cGFyc2VJbnQodGhpcy5kaXYuc3R5bGUud2lkdGgpLGEuaD1wYXJzZUludCh0aGlzLmRpdi5zdHlsZS5oZWlnaHQpO3JldHVybiBhfSxjYWxjdWxhdGVCb3VuZHM6ZnVuY3Rpb24oYSxiKXt2YXIgYz1udWxsO251bGw9PWEmJihhPXRoaXMuZ2V0Q2FjaGVkQ2VudGVyKCkpO251bGw9PWImJihiPXRoaXMuZ2V0UmVzb2x1dGlvbigpKTtpZihudWxsIT1hJiZudWxsIT1iKXZhciBjPXRoaXMuc2l6ZS53KmIvMixkPXRoaXMuc2l6ZS5oKmIvMixjPW5ldyBPcGVuTGF5ZXJzLkJvdW5kcyhhLmxvbi1jLGEubGF0LWQsYS5sb24rYyxhLmxhdCtkKTtyZXR1cm4gY30sZ2V0Q2VudGVyOmZ1bmN0aW9uKCl7dmFyIGE9bnVsbCxiPXRoaXMuZ2V0Q2FjaGVkQ2VudGVyKCk7YiYmKGE9Yi5jbG9uZSgpKTtyZXR1cm4gYX0sZ2V0Q2FjaGVkQ2VudGVyOmZ1bmN0aW9uKCl7IXRoaXMuY2VudGVyJiYKdGhpcy5zaXplJiYodGhpcy5jZW50ZXI9dGhpcy5nZXRMb25MYXRGcm9tVmlld1BvcnRQeCh7eDp0aGlzLnNpemUudy8yLHk6dGhpcy5zaXplLmgvMn0pKTtyZXR1cm4gdGhpcy5jZW50ZXJ9LGdldFpvb206ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy56b29tfSxwYW46ZnVuY3Rpb24oYSxiLGMpe2M9T3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoYyx7YW5pbWF0ZTohMCxkcmFnZ2luZzohMX0pO2lmKGMuZHJhZ2dpbmcpMD09YSYmMD09Ynx8dGhpcy5tb3ZlQnlQeChhLGIpO2Vsc2V7dmFyIGQ9dGhpcy5nZXRWaWV3UG9ydFB4RnJvbUxvbkxhdCh0aGlzLmdldENhY2hlZENlbnRlcigpKTthPWQuYWRkKGEsYik7aWYodGhpcy5kcmFnZ2luZ3x8IWEuZXF1YWxzKGQpKWQ9dGhpcy5nZXRMb25MYXRGcm9tVmlld1BvcnRQeChhKSxjLmFuaW1hdGU/dGhpcy5wYW5UbyhkKToodGhpcy5tb3ZlVG8oZCksdGhpcy5kcmFnZ2luZyYmKHRoaXMuZHJhZ2dpbmc9ITEsdGhpcy5ldmVudHMudHJpZ2dlckV2ZW50KCJtb3ZlZW5kIikpKX19LApwYW5UbzpmdW5jdGlvbihhKXtpZih0aGlzLnBhblR3ZWVuJiZ0aGlzLmdldEV4dGVudCgpLnNjYWxlKHRoaXMucGFuUmF0aW8pLmNvbnRhaW5zTG9uTGF0KGEpKXt2YXIgYj10aGlzLmdldENhY2hlZENlbnRlcigpO2lmKCFhLmVxdWFscyhiKSl7dmFyIGI9dGhpcy5nZXRQaXhlbEZyb21Mb25MYXQoYiksYz10aGlzLmdldFBpeGVsRnJvbUxvbkxhdChhKSxkPTAsZT0wO3RoaXMucGFuVHdlZW4uc3RhcnQoe3g6MCx5OjB9LHt4OmMueC1iLngseTpjLnktYi55fSx0aGlzLnBhbkR1cmF0aW9uLHtjYWxsYmFja3M6e2VhY2hTdGVwOk9wZW5MYXllcnMuRnVuY3Rpb24uYmluZChmdW5jdGlvbihhKXt0aGlzLm1vdmVCeVB4KGEueC1kLGEueS1lKTtkPU1hdGgucm91bmQoYS54KTtlPU1hdGgucm91bmQoYS55KX0sdGhpcyksZG9uZTpPcGVuTGF5ZXJzLkZ1bmN0aW9uLmJpbmQoZnVuY3Rpb24oYil7dGhpcy5tb3ZlVG8oYSk7dGhpcy5kcmFnZ2luZz0hMTt0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoIm1vdmVlbmQiKX0sCnRoaXMpfX0pfX1lbHNlIHRoaXMuc2V0Q2VudGVyKGEpfSxzZXRDZW50ZXI6ZnVuY3Rpb24oYSxiLGMsZCl7dGhpcy5wYW5Ud2VlbiYmdGhpcy5wYW5Ud2Vlbi5zdG9wKCk7dGhpcy56b29tVHdlZW4mJnRoaXMuem9vbVR3ZWVuLnN0b3AoKTt0aGlzLm1vdmVUbyhhLGIse2RyYWdnaW5nOmMsZm9yY2Vab29tQ2hhbmdlOmR9KX0sbW92ZUJ5UHg6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLnNpemUudy8yLGQ9dGhpcy5zaXplLmgvMixlPWMrYSxmPWQrYixnPXRoaXMuYmFzZUxheWVyLndyYXBEYXRlTGluZSxoPTAsaz0wO3RoaXMucmVzdHJpY3RlZEV4dGVudCYmKGg9YyxrPWQsZz0hMSk7YT1nfHxlPD10aGlzLm1heFB4LngtaCYmZT49dGhpcy5taW5QeC54K2g/TWF0aC5yb3VuZChhKTowO2I9Zjw9dGhpcy5tYXhQeC55LWsmJmY+PXRoaXMubWluUHgueStrP01hdGgucm91bmQoYik6MDtpZihhfHxiKXt0aGlzLmRyYWdnaW5nfHwodGhpcy5kcmFnZ2luZz0hMCx0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoIm1vdmVzdGFydCIpKTsKdGhpcy5jZW50ZXI9bnVsbDthJiYodGhpcy5sYXllckNvbnRhaW5lck9yaWdpblB4LngtPWEsdGhpcy5taW5QeC54LT1hLHRoaXMubWF4UHgueC09YSk7YiYmKHRoaXMubGF5ZXJDb250YWluZXJPcmlnaW5QeC55LT1iLHRoaXMubWluUHgueS09Yix0aGlzLm1heFB4LnktPWIpO3RoaXMuYXBwbHlUcmFuc2Zvcm0oKTtkPTA7Zm9yKGU9dGhpcy5sYXllcnMubGVuZ3RoO2Q8ZTsrK2QpYz10aGlzLmxheWVyc1tkXSxjLnZpc2liaWxpdHkmJihjPT09dGhpcy5iYXNlTGF5ZXJ8fGMuaW5SYW5nZSkmJihjLm1vdmVCeVB4KGEsYiksYy5ldmVudHMudHJpZ2dlckV2ZW50KCJtb3ZlIikpO3RoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgibW92ZSIpfX0sYWRqdXN0Wm9vbTpmdW5jdGlvbihhKXtpZih0aGlzLmJhc2VMYXllciYmdGhpcy5iYXNlTGF5ZXIud3JhcERhdGVMaW5lKXt2YXIgYj10aGlzLmJhc2VMYXllci5yZXNvbHV0aW9ucyxjPXRoaXMuZ2V0TWF4RXh0ZW50KCkuZ2V0V2lkdGgoKS90aGlzLnNpemUudzsKaWYodGhpcy5nZXRSZXNvbHV0aW9uRm9yWm9vbShhKT5jKWlmKHRoaXMuZnJhY3Rpb25hbFpvb20pYT10aGlzLmdldFpvb21Gb3JSZXNvbHV0aW9uKGMpO2Vsc2UgZm9yKHZhciBkPWF8MCxlPWIubGVuZ3RoO2Q8ZTsrK2QpaWYoYltkXTw9Yyl7YT1kO2JyZWFrfX1yZXR1cm4gYX0sZ2V0TWluWm9vbTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmFkanVzdFpvb20oMCl9LG1vdmVUbzpmdW5jdGlvbihhLGIsYyl7bnVsbD09YXx8YSBpbnN0YW5jZW9mIE9wZW5MYXllcnMuTG9uTGF0fHwoYT1uZXcgT3BlbkxheWVycy5Mb25MYXQoYSkpO2N8fChjPXt9KTtudWxsIT1iJiYoYj1wYXJzZUZsb2F0KGIpLHRoaXMuZnJhY3Rpb25hbFpvb218fChiPU1hdGgucm91bmQoYikpKTt2YXIgZD1iO2I9dGhpcy5hZGp1c3Rab29tKGIpO2IhPT1kJiYoYT10aGlzLmdldENlbnRlcigpKTt2YXIgZD1jLmRyYWdnaW5nfHx0aGlzLmRyYWdnaW5nLGU9Yy5mb3JjZVpvb21DaGFuZ2U7dGhpcy5nZXRDYWNoZWRDZW50ZXIoKXx8CnRoaXMuaXNWYWxpZExvbkxhdChhKXx8KGE9dGhpcy5tYXhFeHRlbnQuZ2V0Q2VudGVyTG9uTGF0KCksdGhpcy5jZW50ZXI9YS5jbG9uZSgpKTtpZihudWxsIT10aGlzLnJlc3RyaWN0ZWRFeHRlbnQpe251bGw9PWEmJihhPXRoaXMuY2VudGVyKTtudWxsPT1iJiYoYj10aGlzLmdldFpvb20oKSk7dmFyIGY9dGhpcy5nZXRSZXNvbHV0aW9uRm9yWm9vbShiKSxmPXRoaXMuY2FsY3VsYXRlQm91bmRzKGEsZik7aWYoIXRoaXMucmVzdHJpY3RlZEV4dGVudC5jb250YWluc0JvdW5kcyhmKSl7dmFyIGc9dGhpcy5yZXN0cmljdGVkRXh0ZW50LmdldENlbnRlckxvbkxhdCgpO2YuZ2V0V2lkdGgoKT50aGlzLnJlc3RyaWN0ZWRFeHRlbnQuZ2V0V2lkdGgoKT9hPW5ldyBPcGVuTGF5ZXJzLkxvbkxhdChnLmxvbixhLmxhdCk6Zi5sZWZ0PHRoaXMucmVzdHJpY3RlZEV4dGVudC5sZWZ0P2E9YS5hZGQodGhpcy5yZXN0cmljdGVkRXh0ZW50LmxlZnQtZi5sZWZ0LDApOmYucmlnaHQ+dGhpcy5yZXN0cmljdGVkRXh0ZW50LnJpZ2h0JiYKKGE9YS5hZGQodGhpcy5yZXN0cmljdGVkRXh0ZW50LnJpZ2h0LWYucmlnaHQsMCkpO2YuZ2V0SGVpZ2h0KCk+dGhpcy5yZXN0cmljdGVkRXh0ZW50LmdldEhlaWdodCgpP2E9bmV3IE9wZW5MYXllcnMuTG9uTGF0KGEubG9uLGcubGF0KTpmLmJvdHRvbTx0aGlzLnJlc3RyaWN0ZWRFeHRlbnQuYm90dG9tP2E9YS5hZGQoMCx0aGlzLnJlc3RyaWN0ZWRFeHRlbnQuYm90dG9tLWYuYm90dG9tKTpmLnRvcD50aGlzLnJlc3RyaWN0ZWRFeHRlbnQudG9wJiYoYT1hLmFkZCgwLHRoaXMucmVzdHJpY3RlZEV4dGVudC50b3AtZi50b3ApKX19ZT1lfHx0aGlzLmlzVmFsaWRab29tTGV2ZWwoYikmJmIhPXRoaXMuZ2V0Wm9vbSgpO2Y9dGhpcy5pc1ZhbGlkTG9uTGF0KGEpJiYhYS5lcXVhbHModGhpcy5jZW50ZXIpO2lmKGV8fGZ8fGQpe2R8fHRoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgibW92ZXN0YXJ0Iix7em9vbUNoYW5nZWQ6ZX0pO2YmJighZSYmdGhpcy5jZW50ZXImJnRoaXMuY2VudGVyTGF5ZXJDb250YWluZXIoYSksCnRoaXMuY2VudGVyPWEuY2xvbmUoKSk7YT1lP3RoaXMuZ2V0UmVzb2x1dGlvbkZvclpvb20oYik6dGhpcy5nZXRSZXNvbHV0aW9uKCk7aWYoZXx8bnVsbD09dGhpcy5sYXllckNvbnRhaW5lck9yaWdpbil7dGhpcy5sYXllckNvbnRhaW5lck9yaWdpbj10aGlzLmdldENhY2hlZENlbnRlcigpO3RoaXMubGF5ZXJDb250YWluZXJPcmlnaW5QeC54PTA7dGhpcy5sYXllckNvbnRhaW5lck9yaWdpblB4Lnk9MDt0aGlzLmFwcGx5VHJhbnNmb3JtKCk7dmFyIGY9dGhpcy5nZXRNYXhFeHRlbnQoe3Jlc3RyaWN0ZWQ6ITB9KSxoPWYuZ2V0Q2VudGVyTG9uTGF0KCksZz10aGlzLmNlbnRlci5sb24taC5sb24saD1oLmxhdC10aGlzLmNlbnRlci5sYXQsaz1NYXRoLnJvdW5kKGYuZ2V0V2lkdGgoKS9hKSxsPU1hdGgucm91bmQoZi5nZXRIZWlnaHQoKS9hKTt0aGlzLm1pblB4PXt4Oih0aGlzLnNpemUudy1rKS8yLWcvYSx5Oih0aGlzLnNpemUuaC1sKS8yLWgvYX07dGhpcy5tYXhQeD17eDp0aGlzLm1pblB4LngrCk1hdGgucm91bmQoZi5nZXRXaWR0aCgpL2EpLHk6dGhpcy5taW5QeC55K01hdGgucm91bmQoZi5nZXRIZWlnaHQoKS9hKX19ZSYmKHRoaXMuem9vbT1iLHRoaXMucmVzb2x1dGlvbj1hKTthPXRoaXMuZ2V0RXh0ZW50KCk7dGhpcy5iYXNlTGF5ZXIudmlzaWJpbGl0eSYmKHRoaXMuYmFzZUxheWVyLm1vdmVUbyhhLGUsYy5kcmFnZ2luZyksYy5kcmFnZ2luZ3x8dGhpcy5iYXNlTGF5ZXIuZXZlbnRzLnRyaWdnZXJFdmVudCgibW92ZWVuZCIse3pvb21DaGFuZ2VkOmV9KSk7YT10aGlzLmJhc2VMYXllci5nZXRFeHRlbnQoKTtmb3IoYj10aGlzLmxheWVycy5sZW5ndGgtMTswPD1iOy0tYilmPXRoaXMubGF5ZXJzW2JdLGY9PT10aGlzLmJhc2VMYXllcnx8Zi5pc0Jhc2VMYXllcnx8KGc9Zi5jYWxjdWxhdGVJblJhbmdlKCksZi5pblJhbmdlIT1nJiYoKGYuaW5SYW5nZT1nKXx8Zi5kaXNwbGF5KCExKSx0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoImNoYW5nZWxheWVyIix7bGF5ZXI6Zixwcm9wZXJ0eToidmlzaWJpbGl0eSJ9KSksCmcmJmYudmlzaWJpbGl0eSYmKGYubW92ZVRvKGEsZSxjLmRyYWdnaW5nKSxjLmRyYWdnaW5nfHxmLmV2ZW50cy50cmlnZ2VyRXZlbnQoIm1vdmVlbmQiLHt6b29tQ2hhbmdlZDplfSkpKTt0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoIm1vdmUiKTtkfHx0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoIm1vdmVlbmQiKTtpZihlKXtiPTA7Zm9yKGM9dGhpcy5wb3B1cHMubGVuZ3RoO2I8YztiKyspdGhpcy5wb3B1cHNbYl0udXBkYXRlUG9zaXRpb24oKTt0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoInpvb21lbmQiKX19fSxjZW50ZXJMYXllckNvbnRhaW5lcjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmdldFZpZXdQb3J0UHhGcm9tTG9uTGF0KHRoaXMubGF5ZXJDb250YWluZXJPcmlnaW4pLGM9dGhpcy5nZXRWaWV3UG9ydFB4RnJvbUxvbkxhdChhKTtpZihudWxsIT1iJiZudWxsIT1jKXt2YXIgZD10aGlzLmxheWVyQ29udGFpbmVyT3JpZ2luUHgueDthPXRoaXMubGF5ZXJDb250YWluZXJPcmlnaW5QeC55Owp2YXIgZT1NYXRoLnJvdW5kKGIueC1jLngpLGI9TWF0aC5yb3VuZChiLnktYy55KTt0aGlzLmFwcGx5VHJhbnNmb3JtKHRoaXMubGF5ZXJDb250YWluZXJPcmlnaW5QeC54PWUsdGhpcy5sYXllckNvbnRhaW5lck9yaWdpblB4Lnk9Yik7ZC09ZTthLT1iO3RoaXMubWluUHgueC09ZDt0aGlzLm1heFB4LngtPWQ7dGhpcy5taW5QeC55LT1hO3RoaXMubWF4UHgueS09YX19LGlzVmFsaWRab29tTGV2ZWw6ZnVuY3Rpb24oYSl7cmV0dXJuIG51bGwhPWEmJjA8PWEmJmE8dGhpcy5nZXROdW1ab29tTGV2ZWxzKCl9LGlzVmFsaWRMb25MYXQ6ZnVuY3Rpb24oYSl7dmFyIGI9ITE7bnVsbCE9YSYmKGI9dGhpcy5nZXRNYXhFeHRlbnQoKSxiPWIuY29udGFpbnNMb25MYXQoYSx7d29ybGRCb3VuZHM6dGhpcy5iYXNlTGF5ZXIud3JhcERhdGVMaW5lJiZifSkpO3JldHVybiBifSxnZXRQcm9qZWN0aW9uOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5nZXRQcm9qZWN0aW9uT2JqZWN0KCk7cmV0dXJuIGE/YS5nZXRDb2RlKCk6Cm51bGx9LGdldFByb2plY3Rpb25PYmplY3Q6ZnVuY3Rpb24oKXt2YXIgYT1udWxsO251bGwhPXRoaXMuYmFzZUxheWVyJiYoYT10aGlzLmJhc2VMYXllci5wcm9qZWN0aW9uKTtyZXR1cm4gYX0sZ2V0TWF4UmVzb2x1dGlvbjpmdW5jdGlvbigpe3ZhciBhPW51bGw7bnVsbCE9dGhpcy5iYXNlTGF5ZXImJihhPXRoaXMuYmFzZUxheWVyLm1heFJlc29sdXRpb24pO3JldHVybiBhfSxnZXRNYXhFeHRlbnQ6ZnVuY3Rpb24oYSl7dmFyIGI9bnVsbDthJiZhLnJlc3RyaWN0ZWQmJnRoaXMucmVzdHJpY3RlZEV4dGVudD9iPXRoaXMucmVzdHJpY3RlZEV4dGVudDpudWxsIT10aGlzLmJhc2VMYXllciYmKGI9dGhpcy5iYXNlTGF5ZXIubWF4RXh0ZW50KTtyZXR1cm4gYn0sZ2V0TnVtWm9vbUxldmVsczpmdW5jdGlvbigpe3ZhciBhPW51bGw7bnVsbCE9dGhpcy5iYXNlTGF5ZXImJihhPXRoaXMuYmFzZUxheWVyLm51bVpvb21MZXZlbHMpO3JldHVybiBhfSxnZXRFeHRlbnQ6ZnVuY3Rpb24oKXt2YXIgYT0KbnVsbDtudWxsIT10aGlzLmJhc2VMYXllciYmKGE9dGhpcy5iYXNlTGF5ZXIuZ2V0RXh0ZW50KCkpO3JldHVybiBhfSxnZXRSZXNvbHV0aW9uOmZ1bmN0aW9uKCl7dmFyIGE9bnVsbDtudWxsIT10aGlzLmJhc2VMYXllcj9hPXRoaXMuYmFzZUxheWVyLmdldFJlc29sdXRpb24oKTohMD09PXRoaXMuYWxsT3ZlcmxheXMmJjA8dGhpcy5sYXllcnMubGVuZ3RoJiYoYT10aGlzLmxheWVyc1swXS5nZXRSZXNvbHV0aW9uKCkpO3JldHVybiBhfSxnZXRVbml0czpmdW5jdGlvbigpe3ZhciBhPW51bGw7bnVsbCE9dGhpcy5iYXNlTGF5ZXImJihhPXRoaXMuYmFzZUxheWVyLnVuaXRzKTtyZXR1cm4gYX0sZ2V0U2NhbGU6ZnVuY3Rpb24oKXt2YXIgYT1udWxsO251bGwhPXRoaXMuYmFzZUxheWVyJiYoYT10aGlzLmdldFJlc29sdXRpb24oKSxhPU9wZW5MYXllcnMuVXRpbC5nZXRTY2FsZUZyb21SZXNvbHV0aW9uKGEsdGhpcy5iYXNlTGF5ZXIudW5pdHMpKTtyZXR1cm4gYX0sZ2V0Wm9vbUZvckV4dGVudDpmdW5jdGlvbihhLApiKXt2YXIgYz1udWxsO251bGwhPXRoaXMuYmFzZUxheWVyJiYoYz10aGlzLmJhc2VMYXllci5nZXRab29tRm9yRXh0ZW50KGEsYikpO3JldHVybiBjfSxnZXRSZXNvbHV0aW9uRm9yWm9vbTpmdW5jdGlvbihhKXt2YXIgYj1udWxsO3RoaXMuYmFzZUxheWVyJiYoYj10aGlzLmJhc2VMYXllci5nZXRSZXNvbHV0aW9uRm9yWm9vbShhKSk7cmV0dXJuIGJ9LGdldFpvb21Gb3JSZXNvbHV0aW9uOmZ1bmN0aW9uKGEsYil7dmFyIGM9bnVsbDtudWxsIT10aGlzLmJhc2VMYXllciYmKGM9dGhpcy5iYXNlTGF5ZXIuZ2V0Wm9vbUZvclJlc29sdXRpb24oYSxiKSk7cmV0dXJuIGN9LHpvb21UbzpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXM7aWYoYy5pc1ZhbGlkWm9vbUxldmVsKGEpKWlmKGMuYmFzZUxheWVyLndyYXBEYXRlTGluZSYmKGE9Yy5hZGp1c3Rab29tKGEpKSxjLnpvb21Ud2Vlbil7dmFyIGQ9Yy5nZXRSZXNvbHV0aW9uKCksZT1jLmdldFJlc29sdXRpb25Gb3Jab29tKGEpLGY9e3NjYWxlOjF9LApkPXtzY2FsZTpkL2V9O2Muem9vbVR3ZWVuLnBsYXlpbmcmJmMuem9vbVR3ZWVuLmR1cmF0aW9uPDMqYy56b29tRHVyYXRpb24/Yy56b29tVHdlZW4uZmluaXNoPXtzY2FsZTpjLnpvb21Ud2Vlbi5maW5pc2guc2NhbGUqZC5zY2FsZX06KGJ8fChlPWMuZ2V0U2l6ZSgpLGI9e3g6ZS53LzIseTplLmgvMn0pLGMuem9vbVR3ZWVuLnN0YXJ0KGYsZCxjLnpvb21EdXJhdGlvbix7bWluRnJhbWVSYXRlOjUwLGNhbGxiYWNrczp7ZWFjaFN0ZXA6ZnVuY3Rpb24oYSl7dmFyIGQ9Yy5sYXllckNvbnRhaW5lck9yaWdpblB4O2E9YS5zY2FsZTtjLmFwcGx5VHJhbnNmb3JtKGQueCsoKGEtMSkqKGQueC1iLngpfDApLGQueSsoKGEtMSkqKGQueS1iLnkpfDApLGEpfSxkb25lOmZ1bmN0aW9uKGEpe2MuYXBwbHlUcmFuc2Zvcm0oKTthPWMuZ2V0UmVzb2x1dGlvbigpL2Euc2NhbGU7dmFyIGQ9Yy5nZXRab29tRm9yUmVzb2x1dGlvbihhLCEwKTtjLm1vdmVUbyhjLmdldFpvb21UYXJnZXRDZW50ZXIoYiwKYSksZCwhMCl9fX0pKX1lbHNlIGY9Yj9jLmdldFpvb21UYXJnZXRDZW50ZXIoYixjLmdldFJlc29sdXRpb25Gb3Jab29tKGEpKTpudWxsLGMuc2V0Q2VudGVyKGYsYSl9LHpvb21JbjpmdW5jdGlvbigpe3RoaXMuem9vbVRvKHRoaXMuZ2V0Wm9vbSgpKzEpfSx6b29tT3V0OmZ1bmN0aW9uKCl7dGhpcy56b29tVG8odGhpcy5nZXRab29tKCktMSl9LHpvb21Ub0V4dGVudDpmdW5jdGlvbihhLGIpe2EgaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLkJvdW5kc3x8KGE9bmV3IE9wZW5MYXllcnMuQm91bmRzKGEpKTt2YXIgYz1hLmdldENlbnRlckxvbkxhdCgpO2lmKHRoaXMuYmFzZUxheWVyLndyYXBEYXRlTGluZSl7Yz10aGlzLmdldE1heEV4dGVudCgpO2ZvcihhPWEuY2xvbmUoKTthLnJpZ2h0PGEubGVmdDspYS5yaWdodCs9Yy5nZXRXaWR0aCgpO2M9YS5nZXRDZW50ZXJMb25MYXQoKS53cmFwRGF0ZUxpbmUoYyl9dGhpcy5zZXRDZW50ZXIoYyx0aGlzLmdldFpvb21Gb3JFeHRlbnQoYSxiKSl9LAp6b29tVG9NYXhFeHRlbnQ6ZnVuY3Rpb24oYSl7YT10aGlzLmdldE1heEV4dGVudCh7cmVzdHJpY3RlZDphP2EucmVzdHJpY3RlZDohMH0pO3RoaXMuem9vbVRvRXh0ZW50KGEpfSx6b29tVG9TY2FsZTpmdW5jdGlvbihhLGIpe3ZhciBjPU9wZW5MYXllcnMuVXRpbC5nZXRSZXNvbHV0aW9uRnJvbVNjYWxlKGEsdGhpcy5iYXNlTGF5ZXIudW5pdHMpLGQ9dGhpcy5zaXplLncqYy8yLGM9dGhpcy5zaXplLmgqYy8yLGU9dGhpcy5nZXRDYWNoZWRDZW50ZXIoKSxkPW5ldyBPcGVuTGF5ZXJzLkJvdW5kcyhlLmxvbi1kLGUubGF0LWMsZS5sb24rZCxlLmxhdCtjKTt0aGlzLnpvb21Ub0V4dGVudChkLGIpfSxnZXRMb25MYXRGcm9tVmlld1BvcnRQeDpmdW5jdGlvbihhKXt2YXIgYj1udWxsO251bGwhPXRoaXMuYmFzZUxheWVyJiYoYj10aGlzLmJhc2VMYXllci5nZXRMb25MYXRGcm9tVmlld1BvcnRQeChhKSk7cmV0dXJuIGJ9LGdldFZpZXdQb3J0UHhGcm9tTG9uTGF0OmZ1bmN0aW9uKGEpe3ZhciBiPQpudWxsO251bGwhPXRoaXMuYmFzZUxheWVyJiYoYj10aGlzLmJhc2VMYXllci5nZXRWaWV3UG9ydFB4RnJvbUxvbkxhdChhKSk7cmV0dXJuIGJ9LGdldFpvb21UYXJnZXRDZW50ZXI6ZnVuY3Rpb24oYSxiKXt2YXIgYz1udWxsLGQ9dGhpcy5nZXRTaXplKCksZT1kLncvMi1hLngsZD1hLnktZC5oLzIsZj10aGlzLmdldExvbkxhdEZyb21QaXhlbChhKTtmJiYoYz1uZXcgT3BlbkxheWVycy5Mb25MYXQoZi5sb24rZSpiLGYubGF0K2QqYikpO3JldHVybiBjfSxnZXRMb25MYXRGcm9tUGl4ZWw6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZ2V0TG9uTGF0RnJvbVZpZXdQb3J0UHgoYSl9LGdldFBpeGVsRnJvbUxvbkxhdDpmdW5jdGlvbihhKXthPXRoaXMuZ2V0Vmlld1BvcnRQeEZyb21Mb25MYXQoYSk7YS54PU1hdGgucm91bmQoYS54KTthLnk9TWF0aC5yb3VuZChhLnkpO3JldHVybiBhfSxnZXRHZW9kZXNpY1BpeGVsU2l6ZTpmdW5jdGlvbihhKXt2YXIgYj1hP3RoaXMuZ2V0TG9uTGF0RnJvbVBpeGVsKGEpOgp0aGlzLmdldENhY2hlZENlbnRlcigpfHxuZXcgT3BlbkxheWVycy5Mb25MYXQoMCwwKSxjPXRoaXMuZ2V0UmVzb2x1dGlvbigpO2E9Yi5hZGQoLWMvMiwwKTt2YXIgZD1iLmFkZChjLzIsMCksZT1iLmFkZCgwLC1jLzIpLGI9Yi5hZGQoMCxjLzIpLGM9bmV3IE9wZW5MYXllcnMuUHJvamVjdGlvbigiRVBTRzo0MzI2IiksZj10aGlzLmdldFByb2plY3Rpb25PYmplY3QoKXx8YztmLmVxdWFscyhjKXx8KGEudHJhbnNmb3JtKGYsYyksZC50cmFuc2Zvcm0oZixjKSxlLnRyYW5zZm9ybShmLGMpLGIudHJhbnNmb3JtKGYsYykpO3JldHVybiBuZXcgT3BlbkxheWVycy5TaXplKE9wZW5MYXllcnMuVXRpbC5kaXN0VmluY2VudHkoYSxkKSxPcGVuTGF5ZXJzLlV0aWwuZGlzdFZpbmNlbnR5KGUsYikpfSxnZXRWaWV3UG9ydFB4RnJvbUxheWVyUHg6ZnVuY3Rpb24oYSl7dmFyIGI9bnVsbDtudWxsIT1hJiYoYj1hLmFkZCh0aGlzLmxheWVyQ29udGFpbmVyT3JpZ2luUHgueCx0aGlzLmxheWVyQ29udGFpbmVyT3JpZ2luUHgueSkpOwpyZXR1cm4gYn0sZ2V0TGF5ZXJQeEZyb21WaWV3UG9ydFB4OmZ1bmN0aW9uKGEpe3ZhciBiPW51bGw7bnVsbCE9YSYmKGI9YS5hZGQoLXRoaXMubGF5ZXJDb250YWluZXJPcmlnaW5QeC54LC10aGlzLmxheWVyQ29udGFpbmVyT3JpZ2luUHgueSksaXNOYU4oYi54KXx8aXNOYU4oYi55KSkmJihiPW51bGwpO3JldHVybiBifSxnZXRMb25MYXRGcm9tTGF5ZXJQeDpmdW5jdGlvbihhKXthPXRoaXMuZ2V0Vmlld1BvcnRQeEZyb21MYXllclB4KGEpO3JldHVybiB0aGlzLmdldExvbkxhdEZyb21WaWV3UG9ydFB4KGEpfSxnZXRMYXllclB4RnJvbUxvbkxhdDpmdW5jdGlvbihhKXthPXRoaXMuZ2V0UGl4ZWxGcm9tTG9uTGF0KGEpO3JldHVybiB0aGlzLmdldExheWVyUHhGcm9tVmlld1BvcnRQeChhKX0sYXBwbHlUcmFuc2Zvcm06ZnVuY3Rpb24oYSxiLGMpe2M9Y3x8MTt2YXIgZD10aGlzLmxheWVyQ29udGFpbmVyT3JpZ2luUHgsZT0xIT09YzthPWF8fGQueDtiPWJ8fGQueTt2YXIgZj10aGlzLmxheWVyQ29udGFpbmVyRGl2LnN0eWxlLApnPXRoaXMuYXBwbHlUcmFuc2Zvcm0udHJhbnNmb3JtLGg9dGhpcy5hcHBseVRyYW5zZm9ybS50ZW1wbGF0ZTtpZih2b2lkIDA9PT1nJiYoZz1PcGVuTGF5ZXJzLlV0aWwudmVuZG9yUHJlZml4LnN0eWxlKCJ0cmFuc2Zvcm0iKSx0aGlzLmFwcGx5VHJhbnNmb3JtLnRyYW5zZm9ybT1nKSl7dmFyIGs9T3BlbkxheWVycy5FbGVtZW50LmdldFN0eWxlKHRoaXMudmlld1BvcnREaXYsT3BlbkxheWVycy5VdGlsLnZlbmRvclByZWZpeC5jc3MoInRyYW5zZm9ybSIpKTtrJiYibm9uZSI9PT1rfHwoaD1bInRyYW5zbGF0ZTNkKCIsIiwwKSAiLCJzY2FsZTNkKCIsIiwxKSJdLGZbZ109W2hbMF0sIjAsMCIsaFsxXV0uam9pbigiIikpO2gmJn5mW2ddLmluZGV4T2YoaFswXSl8fChoPVsidHJhbnNsYXRlKCIsIikgIiwic2NhbGUoIiwiKSJdKTt0aGlzLmFwcGx5VHJhbnNmb3JtLnRlbXBsYXRlPWh9bnVsbD09PWd8fCJ0cmFuc2xhdGUzZCgiIT09aFswXSYmITAhPT1lPyhmLmxlZnQ9YSsicHgiLGYudG9wPQpiKyJweCIsbnVsbCE9PWcmJihmW2ddPSIiKSk6KCEwPT09ZSYmInRyYW5zbGF0ZSgiPT09aFswXSYmKGEtPWQueCxiLT1kLnksZi5sZWZ0PWQueCsicHgiLGYudG9wPWQueSsicHgiKSxmW2ddPVtoWzBdLGEsInB4LCIsYiwicHgiLGhbMV0saFsyXSxjLCIsIixjLGhbM11dLmpvaW4oIiIpKX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5NYXAifSk7T3BlbkxheWVycy5NYXAuVElMRV9XSURUSD0yNTY7T3BlbkxheWVycy5NYXAuVElMRV9IRUlHSFQ9MjU2O09wZW5MYXllcnMuTGF5ZXI9T3BlbkxheWVycy5DbGFzcyh7aWQ6bnVsbCxuYW1lOm51bGwsZGl2Om51bGwsb3BhY2l0eToxLGFsd2F5c0luUmFuZ2U6bnVsbCxSRVNPTFVUSU9OX1BST1BFUlRJRVM6InNjYWxlcyByZXNvbHV0aW9ucyBtYXhTY2FsZSBtaW5TY2FsZSBtYXhSZXNvbHV0aW9uIG1pblJlc29sdXRpb24gbnVtWm9vbUxldmVscyBtYXhab29tTGV2ZWwiLnNwbGl0KCIgIiksZXZlbnRzOm51bGwsbWFwOm51bGwsaXNCYXNlTGF5ZXI6ITEsYWxwaGE6ITEsZGlzcGxheUluTGF5ZXJTd2l0Y2hlcjohMCx2aXNpYmlsaXR5OiEwLGF0dHJpYnV0aW9uOm51bGwsaW5SYW5nZTohMSxpbWFnZVNpemU6bnVsbCxvcHRpb25zOm51bGwsZXZlbnRMaXN0ZW5lcnM6bnVsbCxndXR0ZXI6MCxwcm9qZWN0aW9uOm51bGwsdW5pdHM6bnVsbCxzY2FsZXM6bnVsbCxyZXNvbHV0aW9uczpudWxsLG1heEV4dGVudDpudWxsLG1pbkV4dGVudDpudWxsLG1heFJlc29sdXRpb246bnVsbCxtaW5SZXNvbHV0aW9uOm51bGwsCm51bVpvb21MZXZlbHM6bnVsbCxtaW5TY2FsZTpudWxsLG1heFNjYWxlOm51bGwsZGlzcGxheU91dHNpZGVNYXhFeHRlbnQ6ITEsd3JhcERhdGVMaW5lOiExLG1ldGFkYXRhOm51bGwsaW5pdGlhbGl6ZTpmdW5jdGlvbihhLGIpe3RoaXMubWV0YWRhdGE9e307Yj1PcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHt9LGIpO251bGwhPXRoaXMuYWx3YXlzSW5SYW5nZSYmKGIuYWx3YXlzSW5SYW5nZT10aGlzLmFsd2F5c0luUmFuZ2UpO3RoaXMuYWRkT3B0aW9ucyhiKTt0aGlzLm5hbWU9YTtpZihudWxsPT10aGlzLmlkJiYodGhpcy5pZD1PcGVuTGF5ZXJzLlV0aWwuY3JlYXRlVW5pcXVlSUQodGhpcy5DTEFTU19OQU1FKyJfIiksdGhpcy5kaXY9T3BlbkxheWVycy5VdGlsLmNyZWF0ZURpdih0aGlzLmlkKSx0aGlzLmRpdi5zdHlsZS53aWR0aD0iMTAwJSIsdGhpcy5kaXYuc3R5bGUuaGVpZ2h0PSIxMDAlIix0aGlzLmRpdi5kaXI9Imx0ciIsdGhpcy5ldmVudHM9bmV3IE9wZW5MYXllcnMuRXZlbnRzKHRoaXMsCnRoaXMuZGl2KSx0aGlzLmV2ZW50TGlzdGVuZXJzIGluc3RhbmNlb2YgT2JqZWN0KSl0aGlzLmV2ZW50cy5vbih0aGlzLmV2ZW50TGlzdGVuZXJzKX0sZGVzdHJveTpmdW5jdGlvbihhKXtudWxsPT1hJiYoYT0hMCk7bnVsbCE9dGhpcy5tYXAmJnRoaXMubWFwLnJlbW92ZUxheWVyKHRoaXMsYSk7dGhpcy5vcHRpb25zPXRoaXMuZGl2PXRoaXMubmFtZT10aGlzLm1hcD10aGlzLnByb2plY3Rpb249bnVsbDt0aGlzLmV2ZW50cyYmKHRoaXMuZXZlbnRMaXN0ZW5lcnMmJnRoaXMuZXZlbnRzLnVuKHRoaXMuZXZlbnRMaXN0ZW5lcnMpLHRoaXMuZXZlbnRzLmRlc3Ryb3koKSk7dGhpcy5ldmVudHM9dGhpcy5ldmVudExpc3RlbmVycz1udWxsfSxjbG9uZTpmdW5jdGlvbihhKXtudWxsPT1hJiYoYT1uZXcgT3BlbkxheWVycy5MYXllcih0aGlzLm5hbWUsdGhpcy5nZXRPcHRpb25zKCkpKTtPcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyhhLHRoaXMpO2EubWFwPW51bGw7cmV0dXJuIGF9LApnZXRPcHRpb25zOmZ1bmN0aW9uKCl7dmFyIGE9e30sYjtmb3IoYiBpbiB0aGlzLm9wdGlvbnMpYVtiXT10aGlzW2JdO3JldHVybiBhfSxzZXROYW1lOmZ1bmN0aW9uKGEpe2EhPXRoaXMubmFtZSYmKHRoaXMubmFtZT1hLG51bGwhPXRoaXMubWFwJiZ0aGlzLm1hcC5ldmVudHMudHJpZ2dlckV2ZW50KCJjaGFuZ2VsYXllciIse2xheWVyOnRoaXMscHJvcGVydHk6Im5hbWUifSkpfSxhZGRPcHRpb25zOmZ1bmN0aW9uKGEsYil7bnVsbD09dGhpcy5vcHRpb25zJiYodGhpcy5vcHRpb25zPXt9KTthJiYoInN0cmluZyI9PXR5cGVvZiBhLnByb2plY3Rpb24mJihhLnByb2plY3Rpb249bmV3IE9wZW5MYXllcnMuUHJvamVjdGlvbihhLnByb2plY3Rpb24pKSxhLnByb2plY3Rpb24mJk9wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKGEsT3BlbkxheWVycy5Qcm9qZWN0aW9uLmRlZmF1bHRzW2EucHJvamVjdGlvbi5nZXRDb2RlKCldKSwhYS5tYXhFeHRlbnR8fGEubWF4RXh0ZW50IGluc3RhbmNlb2YKT3BlbkxheWVycy5Cb3VuZHN8fChhLm1heEV4dGVudD1uZXcgT3BlbkxheWVycy5Cb3VuZHMoYS5tYXhFeHRlbnQpKSwhYS5taW5FeHRlbnR8fGEubWluRXh0ZW50IGluc3RhbmNlb2YgT3BlbkxheWVycy5Cb3VuZHN8fChhLm1pbkV4dGVudD1uZXcgT3BlbkxheWVycy5Cb3VuZHMoYS5taW5FeHRlbnQpKSk7T3BlbkxheWVycy5VdGlsLmV4dGVuZCh0aGlzLm9wdGlvbnMsYSk7T3BlbkxheWVycy5VdGlsLmV4dGVuZCh0aGlzLGEpO3RoaXMucHJvamVjdGlvbiYmdGhpcy5wcm9qZWN0aW9uLmdldFVuaXRzKCkmJih0aGlzLnVuaXRzPXRoaXMucHJvamVjdGlvbi5nZXRVbml0cygpKTtpZih0aGlzLm1hcCl7dmFyIGM9dGhpcy5tYXAuZ2V0UmVzb2x1dGlvbigpLGQ9dGhpcy5SRVNPTFVUSU9OX1BST1BFUlRJRVMuY29uY2F0KFsicHJvamVjdGlvbiIsInVuaXRzIiwibWluRXh0ZW50IiwibWF4RXh0ZW50Il0pLGU7Zm9yKGUgaW4gYSlpZihhLmhhc093blByb3BlcnR5KGUpJiYwPD1PcGVuTGF5ZXJzLlV0aWwuaW5kZXhPZihkLAplKSl7dGhpcy5pbml0UmVzb2x1dGlvbnMoKTtiJiZ0aGlzLm1hcC5iYXNlTGF5ZXI9PT10aGlzJiYodGhpcy5tYXAuc2V0Q2VudGVyKHRoaXMubWFwLmdldENlbnRlcigpLHRoaXMubWFwLmdldFpvb21Gb3JSZXNvbHV0aW9uKGMpLCExLCEwKSx0aGlzLm1hcC5ldmVudHMudHJpZ2dlckV2ZW50KCJjaGFuZ2ViYXNlbGF5ZXIiLHtsYXllcjp0aGlzfSkpO2JyZWFrfX19LG9uTWFwUmVzaXplOmZ1bmN0aW9uKCl7fSxyZWRyYXc6ZnVuY3Rpb24oKXt2YXIgYT0hMTtpZih0aGlzLm1hcCl7dGhpcy5pblJhbmdlPXRoaXMuY2FsY3VsYXRlSW5SYW5nZSgpO3ZhciBiPXRoaXMuZ2V0RXh0ZW50KCk7YiYmKHRoaXMuaW5SYW5nZSYmdGhpcy52aXNpYmlsaXR5KSYmKHRoaXMubW92ZVRvKGIsITAsITEpLHRoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgibW92ZWVuZCIse3pvb21DaGFuZ2VkOiEwfSksYT0hMCl9cmV0dXJuIGF9LG1vdmVUbzpmdW5jdGlvbihhLGIsYyl7YT10aGlzLnZpc2liaWxpdHk7CnRoaXMuaXNCYXNlTGF5ZXJ8fChhPWEmJnRoaXMuaW5SYW5nZSk7dGhpcy5kaXNwbGF5KGEpfSxtb3ZlQnlQeDpmdW5jdGlvbihhLGIpe30sc2V0TWFwOmZ1bmN0aW9uKGEpe251bGw9PXRoaXMubWFwJiYodGhpcy5tYXA9YSx0aGlzLm1heEV4dGVudD10aGlzLm1heEV4dGVudHx8dGhpcy5tYXAubWF4RXh0ZW50LHRoaXMubWluRXh0ZW50PXRoaXMubWluRXh0ZW50fHx0aGlzLm1hcC5taW5FeHRlbnQsdGhpcy5wcm9qZWN0aW9uPXRoaXMucHJvamVjdGlvbnx8dGhpcy5tYXAucHJvamVjdGlvbiwic3RyaW5nIj09dHlwZW9mIHRoaXMucHJvamVjdGlvbiYmKHRoaXMucHJvamVjdGlvbj1uZXcgT3BlbkxheWVycy5Qcm9qZWN0aW9uKHRoaXMucHJvamVjdGlvbikpLHRoaXMudW5pdHM9dGhpcy5wcm9qZWN0aW9uLmdldFVuaXRzKCl8fHRoaXMudW5pdHN8fHRoaXMubWFwLnVuaXRzLHRoaXMuaW5pdFJlc29sdXRpb25zKCksdGhpcy5pc0Jhc2VMYXllcnx8KHRoaXMuaW5SYW5nZT10aGlzLmNhbGN1bGF0ZUluUmFuZ2UoKSwKdGhpcy5kaXYuc3R5bGUuZGlzcGxheT10aGlzLnZpc2liaWxpdHkmJnRoaXMuaW5SYW5nZT8iIjoibm9uZSIpLHRoaXMuc2V0VGlsZVNpemUoKSl9LGFmdGVyQWRkOmZ1bmN0aW9uKCl7fSxyZW1vdmVNYXA6ZnVuY3Rpb24oYSl7fSxnZXRJbWFnZVNpemU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuaW1hZ2VTaXplfHx0aGlzLnRpbGVTaXplfSxzZXRUaWxlU2l6ZTpmdW5jdGlvbihhKXt0aGlzLnRpbGVTaXplPWE9YT9hOnRoaXMudGlsZVNpemU/dGhpcy50aWxlU2l6ZTp0aGlzLm1hcC5nZXRUaWxlU2l6ZSgpO3RoaXMuZ3V0dGVyJiYodGhpcy5pbWFnZVNpemU9bmV3IE9wZW5MYXllcnMuU2l6ZShhLncrMip0aGlzLmd1dHRlcixhLmgrMip0aGlzLmd1dHRlcikpfSxnZXRWaXNpYmlsaXR5OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudmlzaWJpbGl0eX0sc2V0VmlzaWJpbGl0eTpmdW5jdGlvbihhKXthIT10aGlzLnZpc2liaWxpdHkmJih0aGlzLnZpc2liaWxpdHk9YSx0aGlzLmRpc3BsYXkoYSksCnRoaXMucmVkcmF3KCksbnVsbCE9dGhpcy5tYXAmJnRoaXMubWFwLmV2ZW50cy50cmlnZ2VyRXZlbnQoImNoYW5nZWxheWVyIix7bGF5ZXI6dGhpcyxwcm9wZXJ0eToidmlzaWJpbGl0eSJ9KSx0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoInZpc2liaWxpdHljaGFuZ2VkIikpfSxkaXNwbGF5OmZ1bmN0aW9uKGEpe2EhPSgibm9uZSIhPXRoaXMuZGl2LnN0eWxlLmRpc3BsYXkpJiYodGhpcy5kaXYuc3R5bGUuZGlzcGxheT1hJiZ0aGlzLmNhbGN1bGF0ZUluUmFuZ2UoKT8iYmxvY2siOiJub25lIil9LGNhbGN1bGF0ZUluUmFuZ2U6ZnVuY3Rpb24oKXt2YXIgYT0hMTt0aGlzLmFsd2F5c0luUmFuZ2U/YT0hMDp0aGlzLm1hcCYmKGE9dGhpcy5tYXAuZ2V0UmVzb2x1dGlvbigpLGE9YT49dGhpcy5taW5SZXNvbHV0aW9uJiZhPD10aGlzLm1heFJlc29sdXRpb24pO3JldHVybiBhfSxzZXRJc0Jhc2VMYXllcjpmdW5jdGlvbihhKXthIT10aGlzLmlzQmFzZUxheWVyJiYodGhpcy5pc0Jhc2VMYXllcj0KYSxudWxsIT10aGlzLm1hcCYmdGhpcy5tYXAuZXZlbnRzLnRyaWdnZXJFdmVudCgiY2hhbmdlYmFzZWxheWVyIix7bGF5ZXI6dGhpc30pKX0saW5pdFJlc29sdXRpb25zOmZ1bmN0aW9uKCl7dmFyIGEsYixjLGQ9e30sZT0hMDthPTA7Zm9yKGI9dGhpcy5SRVNPTFVUSU9OX1BST1BFUlRJRVMubGVuZ3RoO2E8YjthKyspYz10aGlzLlJFU09MVVRJT05fUFJPUEVSVElFU1thXSxkW2NdPXRoaXMub3B0aW9uc1tjXSxlJiZ0aGlzLm9wdGlvbnNbY10mJihlPSExKTtudWxsPT10aGlzLm9wdGlvbnMuYWx3YXlzSW5SYW5nZSYmKHRoaXMuYWx3YXlzSW5SYW5nZT1lKTtudWxsPT1kLnJlc29sdXRpb25zJiYoZC5yZXNvbHV0aW9ucz10aGlzLnJlc29sdXRpb25zRnJvbVNjYWxlcyhkLnNjYWxlcykpO251bGw9PWQucmVzb2x1dGlvbnMmJihkLnJlc29sdXRpb25zPXRoaXMuY2FsY3VsYXRlUmVzb2x1dGlvbnMoZCkpO2lmKG51bGw9PWQucmVzb2x1dGlvbnMpe2E9MDtmb3IoYj10aGlzLlJFU09MVVRJT05fUFJPUEVSVElFUy5sZW5ndGg7YTwKYjthKyspYz10aGlzLlJFU09MVVRJT05fUFJPUEVSVElFU1thXSxkW2NdPW51bGwhPXRoaXMub3B0aW9uc1tjXT90aGlzLm9wdGlvbnNbY106dGhpcy5tYXBbY107bnVsbD09ZC5yZXNvbHV0aW9ucyYmKGQucmVzb2x1dGlvbnM9dGhpcy5yZXNvbHV0aW9uc0Zyb21TY2FsZXMoZC5zY2FsZXMpKTtudWxsPT1kLnJlc29sdXRpb25zJiYoZC5yZXNvbHV0aW9ucz10aGlzLmNhbGN1bGF0ZVJlc29sdXRpb25zKGQpKX12YXIgZjt0aGlzLm9wdGlvbnMubWF4UmVzb2x1dGlvbiYmImF1dG8iIT09dGhpcy5vcHRpb25zLm1heFJlc29sdXRpb24mJihmPXRoaXMub3B0aW9ucy5tYXhSZXNvbHV0aW9uKTt0aGlzLm9wdGlvbnMubWluU2NhbGUmJihmPU9wZW5MYXllcnMuVXRpbC5nZXRSZXNvbHV0aW9uRnJvbVNjYWxlKHRoaXMub3B0aW9ucy5taW5TY2FsZSx0aGlzLnVuaXRzKSk7dmFyIGc7dGhpcy5vcHRpb25zLm1pblJlc29sdXRpb24mJiJhdXRvIiE9PXRoaXMub3B0aW9ucy5taW5SZXNvbHV0aW9uJiYKKGc9dGhpcy5vcHRpb25zLm1pblJlc29sdXRpb24pO3RoaXMub3B0aW9ucy5tYXhTY2FsZSYmKGc9T3BlbkxheWVycy5VdGlsLmdldFJlc29sdXRpb25Gcm9tU2NhbGUodGhpcy5vcHRpb25zLm1heFNjYWxlLHRoaXMudW5pdHMpKTtkLnJlc29sdXRpb25zJiYoZC5yZXNvbHV0aW9ucy5zb3J0KGZ1bmN0aW9uKGEsYil7cmV0dXJuIGItYX0pLGZ8fChmPWQucmVzb2x1dGlvbnNbMF0pLGd8fChnPWQucmVzb2x1dGlvbnNbZC5yZXNvbHV0aW9ucy5sZW5ndGgtMV0pKTtpZih0aGlzLnJlc29sdXRpb25zPWQucmVzb2x1dGlvbnMpe2I9dGhpcy5yZXNvbHV0aW9ucy5sZW5ndGg7dGhpcy5zY2FsZXM9QXJyYXkoYik7Zm9yKGE9MDthPGI7YSsrKXRoaXMuc2NhbGVzW2FdPU9wZW5MYXllcnMuVXRpbC5nZXRTY2FsZUZyb21SZXNvbHV0aW9uKHRoaXMucmVzb2x1dGlvbnNbYV0sdGhpcy51bml0cyk7dGhpcy5udW1ab29tTGV2ZWxzPWJ9aWYodGhpcy5taW5SZXNvbHV0aW9uPWcpdGhpcy5tYXhTY2FsZT0KT3BlbkxheWVycy5VdGlsLmdldFNjYWxlRnJvbVJlc29sdXRpb24oZyx0aGlzLnVuaXRzKTtpZih0aGlzLm1heFJlc29sdXRpb249Zil0aGlzLm1pblNjYWxlPU9wZW5MYXllcnMuVXRpbC5nZXRTY2FsZUZyb21SZXNvbHV0aW9uKGYsdGhpcy51bml0cyl9LHJlc29sdXRpb25zRnJvbVNjYWxlczpmdW5jdGlvbihhKXtpZihudWxsIT1hKXt2YXIgYixjLGQ7ZD1hLmxlbmd0aDtiPUFycmF5KGQpO2ZvcihjPTA7YzxkO2MrKyliW2NdPU9wZW5MYXllcnMuVXRpbC5nZXRSZXNvbHV0aW9uRnJvbVNjYWxlKGFbY10sdGhpcy51bml0cyk7cmV0dXJuIGJ9fSxjYWxjdWxhdGVSZXNvbHV0aW9uczpmdW5jdGlvbihhKXt2YXIgYixjLGQ9YS5tYXhSZXNvbHV0aW9uO251bGwhPWEubWluU2NhbGU/ZD1PcGVuTGF5ZXJzLlV0aWwuZ2V0UmVzb2x1dGlvbkZyb21TY2FsZShhLm1pblNjYWxlLHRoaXMudW5pdHMpOiJhdXRvIj09ZCYmbnVsbCE9dGhpcy5tYXhFeHRlbnQmJihiPXRoaXMubWFwLmdldFNpemUoKSwKYz10aGlzLm1heEV4dGVudC5nZXRXaWR0aCgpL2IudyxiPXRoaXMubWF4RXh0ZW50LmdldEhlaWdodCgpL2IuaCxkPU1hdGgubWF4KGMsYikpO2M9YS5taW5SZXNvbHV0aW9uO251bGwhPWEubWF4U2NhbGU/Yz1PcGVuTGF5ZXJzLlV0aWwuZ2V0UmVzb2x1dGlvbkZyb21TY2FsZShhLm1heFNjYWxlLHRoaXMudW5pdHMpOiJhdXRvIj09YS5taW5SZXNvbHV0aW9uJiZudWxsIT10aGlzLm1pbkV4dGVudCYmKGI9dGhpcy5tYXAuZ2V0U2l6ZSgpLGM9dGhpcy5taW5FeHRlbnQuZ2V0V2lkdGgoKS9iLncsYj10aGlzLm1pbkV4dGVudC5nZXRIZWlnaHQoKS9iLmgsYz1NYXRoLm1heChjLGIpKTsibnVtYmVyIiE9PXR5cGVvZiBkJiYoIm51bWJlciIhPT10eXBlb2YgYyYmbnVsbCE9dGhpcy5tYXhFeHRlbnQpJiYoZD10aGlzLm1hcC5nZXRUaWxlU2l6ZSgpLGQ9TWF0aC5tYXgodGhpcy5tYXhFeHRlbnQuZ2V0V2lkdGgoKS9kLncsdGhpcy5tYXhFeHRlbnQuZ2V0SGVpZ2h0KCkvZC5oKSk7Yj1hLm1heFpvb21MZXZlbDsKYT1hLm51bVpvb21MZXZlbHM7Im51bWJlciI9PT10eXBlb2YgYyYmIm51bWJlciI9PT10eXBlb2YgZCYmdm9pZCAwPT09YT9hPU1hdGguZmxvb3IoTWF0aC5sb2coZC9jKS9NYXRoLmxvZygyKSkrMTp2b2lkIDA9PT1hJiZudWxsIT1iJiYoYT1iKzEpO2lmKCEoIm51bWJlciIhPT10eXBlb2YgYXx8MD49YXx8Im51bWJlciIhPT10eXBlb2YgZCYmIm51bWJlciIhPT10eXBlb2YgYykpe2I9QXJyYXkoYSk7dmFyIGU9MjsibnVtYmVyIj09dHlwZW9mIGMmJiJudW1iZXIiPT10eXBlb2YgZCYmKGU9TWF0aC5wb3coZC9jLDEvKGEtMSkpKTt2YXIgZjtpZigibnVtYmVyIj09PXR5cGVvZiBkKWZvcihmPTA7ZjxhO2YrKyliW2ZdPWQvTWF0aC5wb3coZSxmKTtlbHNlIGZvcihmPTA7ZjxhO2YrKyliW2EtMS1mXT1jKk1hdGgucG93KGUsZik7cmV0dXJuIGJ9fSxnZXRSZXNvbHV0aW9uOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5tYXAuZ2V0Wm9vbSgpO3JldHVybiB0aGlzLmdldFJlc29sdXRpb25Gb3Jab29tKGEpfSwKZ2V0RXh0ZW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWFwLmNhbGN1bGF0ZUJvdW5kcygpfSxnZXRab29tRm9yRXh0ZW50OmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5tYXAuZ2V0U2l6ZSgpLGM9TWF0aC5tYXgoYS5nZXRXaWR0aCgpL2MudyxhLmdldEhlaWdodCgpL2MuaCk7cmV0dXJuIHRoaXMuZ2V0Wm9vbUZvclJlc29sdXRpb24oYyxiKX0sZ2V0RGF0YUV4dGVudDpmdW5jdGlvbigpe30sZ2V0UmVzb2x1dGlvbkZvclpvb206ZnVuY3Rpb24oYSl7YT1NYXRoLm1heCgwLE1hdGgubWluKGEsdGhpcy5yZXNvbHV0aW9ucy5sZW5ndGgtMSkpO2lmKHRoaXMubWFwLmZyYWN0aW9uYWxab29tKXt2YXIgYj1NYXRoLmZsb29yKGEpLGM9TWF0aC5jZWlsKGEpO2E9dGhpcy5yZXNvbHV0aW9uc1tiXS0oYS1iKSoodGhpcy5yZXNvbHV0aW9uc1tiXS10aGlzLnJlc29sdXRpb25zW2NdKX1lbHNlIGE9dGhpcy5yZXNvbHV0aW9uc1tNYXRoLnJvdW5kKGEpXTtyZXR1cm4gYX0sZ2V0Wm9vbUZvclJlc29sdXRpb246ZnVuY3Rpb24oYSwKYil7dmFyIGMsZDtpZih0aGlzLm1hcC5mcmFjdGlvbmFsWm9vbSl7dmFyIGU9MCxmPXRoaXMucmVzb2x1dGlvbnNbZV0sZz10aGlzLnJlc29sdXRpb25zW3RoaXMucmVzb2x1dGlvbnMubGVuZ3RoLTFdLGg7Yz0wO2ZvcihkPXRoaXMucmVzb2x1dGlvbnMubGVuZ3RoO2M8ZDsrK2MpaWYoaD10aGlzLnJlc29sdXRpb25zW2NdLGg+PWEmJihmPWgsZT1jKSxoPD1hKXtnPWg7YnJlYWt9Yz1mLWc7Yz0wPGM/ZSsoZi1hKS9jOmV9ZWxzZXtmPU51bWJlci5QT1NJVElWRV9JTkZJTklUWTtjPTA7Zm9yKGQ9dGhpcy5yZXNvbHV0aW9ucy5sZW5ndGg7YzxkO2MrKylpZihiKXtlPU1hdGguYWJzKHRoaXMucmVzb2x1dGlvbnNbY10tYSk7aWYoZT5mKWJyZWFrO2Y9ZX1lbHNlIGlmKHRoaXMucmVzb2x1dGlvbnNbY108YSlicmVhaztjPU1hdGgubWF4KDAsYy0xKX1yZXR1cm4gY30sZ2V0TG9uTGF0RnJvbVZpZXdQb3J0UHg6ZnVuY3Rpb24oYSl7dmFyIGI9bnVsbCxjPXRoaXMubWFwO2lmKG51bGwhPQphJiZjLm1pblB4KXt2YXIgYj1jLmdldFJlc29sdXRpb24oKSxkPWMuZ2V0TWF4RXh0ZW50KHtyZXN0cmljdGVkOiEwfSksYj1uZXcgT3BlbkxheWVycy5Mb25MYXQoKGEueC1jLm1pblB4LngpKmIrZC5sZWZ0LChjLm1pblB4LnktYS55KSpiK2QudG9wKTt0aGlzLndyYXBEYXRlTGluZSYmKGI9Yi53cmFwRGF0ZUxpbmUodGhpcy5tYXhFeHRlbnQpKX1yZXR1cm4gYn0sZ2V0Vmlld1BvcnRQeEZyb21Mb25MYXQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz1udWxsO251bGwhPWEmJihiPWJ8fHRoaXMubWFwLmdldFJlc29sdXRpb24oKSxjPXRoaXMubWFwLmNhbGN1bGF0ZUJvdW5kcyhudWxsLGIpLGM9bmV3IE9wZW5MYXllcnMuUGl4ZWwoMS9iKihhLmxvbi1jLmxlZnQpLDEvYiooYy50b3AtYS5sYXQpKSk7cmV0dXJuIGN9LHNldE9wYWNpdHk6ZnVuY3Rpb24oYSl7aWYoYSE9dGhpcy5vcGFjaXR5KXt0aGlzLm9wYWNpdHk9YTtmb3IodmFyIGI9dGhpcy5kaXYuY2hpbGROb2RlcyxjPTAsZD1iLmxlbmd0aDtjPApkOysrYyl7dmFyIGU9YltjXS5maXJzdENoaWxkfHxiW2NdLGY9YltjXS5sYXN0Q2hpbGQ7ZiYmImlmcmFtZSI9PT1mLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkmJihlPWYucGFyZW50Tm9kZSk7T3BlbkxheWVycy5VdGlsLm1vZGlmeURPTUVsZW1lbnQoZSxudWxsLG51bGwsbnVsbCxudWxsLG51bGwsbnVsbCxhKX1udWxsIT10aGlzLm1hcCYmdGhpcy5tYXAuZXZlbnRzLnRyaWdnZXJFdmVudCgiY2hhbmdlbGF5ZXIiLHtsYXllcjp0aGlzLHByb3BlcnR5OiJvcGFjaXR5In0pfX0sZ2V0WkluZGV4OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGl2LnN0eWxlLnpJbmRleH0sc2V0WkluZGV4OmZ1bmN0aW9uKGEpe3RoaXMuZGl2LnN0eWxlLnpJbmRleD1hfSxhZGp1c3RCb3VuZHM6ZnVuY3Rpb24oYSl7aWYodGhpcy5ndXR0ZXIpe3ZhciBiPXRoaXMuZ3V0dGVyKnRoaXMubWFwLmdldFJlc29sdXRpb24oKTthPW5ldyBPcGVuTGF5ZXJzLkJvdW5kcyhhLmxlZnQtYixhLmJvdHRvbS1iLGEucmlnaHQrCmIsYS50b3ArYil9dGhpcy53cmFwRGF0ZUxpbmUmJihiPXtyaWdodFRvbGVyYW5jZTp0aGlzLmdldFJlc29sdXRpb24oKSxsZWZ0VG9sZXJhbmNlOnRoaXMuZ2V0UmVzb2x1dGlvbigpfSxhPWEud3JhcERhdGVMaW5lKHRoaXMubWF4RXh0ZW50LGIpKTtyZXR1cm4gYX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5MYXllciJ9KTtPcGVuTGF5ZXJzLkxheWVyLlNwaGVyaWNhbE1lcmNhdG9yPXtnZXRFeHRlbnQ6ZnVuY3Rpb24oKXt2YXIgYT1udWxsO3JldHVybiBhPXRoaXMuc3BoZXJpY2FsTWVyY2F0b3I/dGhpcy5tYXAuY2FsY3VsYXRlQm91bmRzKCk6T3BlbkxheWVycy5MYXllci5GaXhlZFpvb21MZXZlbHMucHJvdG90eXBlLmdldEV4dGVudC5hcHBseSh0aGlzKX0sZ2V0TG9uTGF0RnJvbVZpZXdQb3J0UHg6ZnVuY3Rpb24oYSl7cmV0dXJuIE9wZW5MYXllcnMuTGF5ZXIucHJvdG90eXBlLmdldExvbkxhdEZyb21WaWV3UG9ydFB4LmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sZ2V0Vmlld1BvcnRQeEZyb21Mb25MYXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIE9wZW5MYXllcnMuTGF5ZXIucHJvdG90eXBlLmdldFZpZXdQb3J0UHhGcm9tTG9uTGF0LmFwcGx5KHRoaXMsYXJndW1lbnRzKX0saW5pdE1lcmNhdG9yUGFyYW1ldGVyczpmdW5jdGlvbigpe3RoaXMuUkVTT0xVVElPTlM9W107Zm9yKHZhciBhPTA7YTw9dGhpcy5NQVhfWk9PTV9MRVZFTDsrK2EpdGhpcy5SRVNPTFVUSU9OU1thXT0KMTU2NTQzLjAzMzkwNjI1L01hdGgucG93KDIsYSk7dGhpcy51bml0cz0ibSI7dGhpcy5wcm9qZWN0aW9uPXRoaXMucHJvamVjdGlvbnx8IkVQU0c6OTAwOTEzIn0sZm9yd2FyZE1lcmNhdG9yOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IE9wZW5MYXllcnMuUHJvamVjdGlvbigiRVBTRzo0MzI2IiksYj1uZXcgT3BlbkxheWVycy5Qcm9qZWN0aW9uKCJFUFNHOjkwMDkxMyIpO3JldHVybiBmdW5jdGlvbihjLGQpe3ZhciBlPU9wZW5MYXllcnMuUHJvamVjdGlvbi50cmFuc2Zvcm0oe3g6Yyx5OmR9LGEsYik7cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLkxvbkxhdChlLngsZS55KX19KCksaW52ZXJzZU1lcmNhdG9yOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IE9wZW5MYXllcnMuUHJvamVjdGlvbigiRVBTRzo0MzI2IiksYj1uZXcgT3BlbkxheWVycy5Qcm9qZWN0aW9uKCJFUFNHOjkwMDkxMyIpO3JldHVybiBmdW5jdGlvbihjLGQpe3ZhciBlPU9wZW5MYXllcnMuUHJvamVjdGlvbi50cmFuc2Zvcm0oe3g6YywKeTpkfSxiLGEpO3JldHVybiBuZXcgT3BlbkxheWVycy5Mb25MYXQoZS54LGUueSl9fSgpfTtPcGVuTGF5ZXJzLkxheWVyLkV2ZW50UGFuZT1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuTGF5ZXIse3Ntb290aERyYWdQYW46ITAsaXNCYXNlTGF5ZXI6ITAsaXNGaXhlZDohMCxwYW5lOm51bGwsbWFwT2JqZWN0Om51bGwsaW5pdGlhbGl6ZTpmdW5jdGlvbihhLGIpe09wZW5MYXllcnMuTGF5ZXIucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxhcmd1bWVudHMpO251bGw9PXRoaXMucGFuZSYmKHRoaXMucGFuZT1PcGVuTGF5ZXJzLlV0aWwuY3JlYXRlRGl2KHRoaXMuZGl2LmlkKyJfRXZlbnRQYW5lIikpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5wYW5lPXRoaXMubWFwT2JqZWN0PW51bGw7T3BlbkxheWVycy5MYXllci5wcm90b3R5cGUuZGVzdHJveS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LHNldE1hcDpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLkxheWVyLnByb3RvdHlwZS5zZXRNYXAuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMucGFuZS5zdHlsZS56SW5kZXg9CnBhcnNlSW50KHRoaXMuZGl2LnN0eWxlLnpJbmRleCkrMTt0aGlzLnBhbmUuc3R5bGUuZGlzcGxheT10aGlzLmRpdi5zdHlsZS5kaXNwbGF5O3RoaXMucGFuZS5zdHlsZS53aWR0aD0iMTAwJSI7dGhpcy5wYW5lLnN0eWxlLmhlaWdodD0iMTAwJSI7Im1zaWUiPT1PcGVuTGF5ZXJzLkJST1dTRVJfTkFNRSYmKHRoaXMucGFuZS5zdHlsZS5iYWNrZ3JvdW5kPSJ1cmwoIitPcGVuTGF5ZXJzLlV0aWwuZ2V0SW1hZ2VMb2NhdGlvbigiYmxhbmsuZ2lmIikrIikiKTt0aGlzLmlzRml4ZWQ/dGhpcy5tYXAudmlld1BvcnREaXYuYXBwZW5kQ2hpbGQodGhpcy5wYW5lKTp0aGlzLm1hcC5sYXllckNvbnRhaW5lckRpdi5hcHBlbmRDaGlsZCh0aGlzLnBhbmUpO3RoaXMubG9hZE1hcE9iamVjdCgpO251bGw9PXRoaXMubWFwT2JqZWN0JiZ0aGlzLmxvYWRXYXJuaW5nTWVzc2FnZSgpfSxyZW1vdmVNYXA6ZnVuY3Rpb24oYSl7dGhpcy5wYW5lJiZ0aGlzLnBhbmUucGFyZW50Tm9kZSYmdGhpcy5wYW5lLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5wYW5lKTsKT3BlbkxheWVycy5MYXllci5wcm90b3R5cGUucmVtb3ZlTWFwLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sbG9hZFdhcm5pbmdNZXNzYWdlOmZ1bmN0aW9uKCl7dGhpcy5kaXYuc3R5bGUuYmFja2dyb3VuZENvbG9yPSJkYXJrYmx1ZSI7dmFyIGE9dGhpcy5tYXAuZ2V0U2l6ZSgpLGI9TWF0aC5taW4oYS53LDMwMCksYz1NYXRoLm1pbihhLmgsMjAwKSxiPW5ldyBPcGVuTGF5ZXJzLlNpemUoYixjKSxhPShuZXcgT3BlbkxheWVycy5QaXhlbChhLncvMixhLmgvMikpLmFkZCgtYi53LzIsLWIuaC8yKSxhPU9wZW5MYXllcnMuVXRpbC5jcmVhdGVEaXYodGhpcy5uYW1lKyJfd2FybmluZyIsYSxiLG51bGwsbnVsbCxudWxsLCJhdXRvIik7YS5zdHlsZS5wYWRkaW5nPSI3cHgiO2Euc3R5bGUuYmFja2dyb3VuZENvbG9yPSJ5ZWxsb3ciO2EuaW5uZXJIVE1MPXRoaXMuZ2V0V2FybmluZ0hUTUwoKTt0aGlzLmRpdi5hcHBlbmRDaGlsZChhKX0sZ2V0V2FybmluZ0hUTUw6ZnVuY3Rpb24oKXtyZXR1cm4iIn0sCmRpc3BsYXk6ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5MYXllci5wcm90b3R5cGUuZGlzcGxheS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5wYW5lLnN0eWxlLmRpc3BsYXk9dGhpcy5kaXYuc3R5bGUuZGlzcGxheX0sc2V0WkluZGV4OmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuTGF5ZXIucHJvdG90eXBlLnNldFpJbmRleC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5wYW5lLnN0eWxlLnpJbmRleD1wYXJzZUludCh0aGlzLmRpdi5zdHlsZS56SW5kZXgpKzF9LG1vdmVCeVB4OmZ1bmN0aW9uKGEsYil7T3BlbkxheWVycy5MYXllci5wcm90b3R5cGUubW92ZUJ5UHguYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMuZHJhZ1Bhbk1hcE9iamVjdD90aGlzLmRyYWdQYW5NYXBPYmplY3QoYSwtYik6dGhpcy5tb3ZlVG8odGhpcy5tYXAuZ2V0Q2FjaGVkQ2VudGVyKCkpfSxtb3ZlVG86ZnVuY3Rpb24oYSxiLGMpe09wZW5MYXllcnMuTGF5ZXIucHJvdG90eXBlLm1vdmVUby5hcHBseSh0aGlzLAphcmd1bWVudHMpO2lmKG51bGwhPXRoaXMubWFwT2JqZWN0KXt2YXIgZD10aGlzLm1hcC5nZXRDZW50ZXIoKSxlPXRoaXMubWFwLmdldFpvb20oKTtpZihudWxsIT1kKXt2YXIgZj10aGlzLmdldE1hcE9iamVjdENlbnRlcigpLGY9dGhpcy5nZXRPTExvbkxhdEZyb21NYXBPYmplY3RMb25MYXQoZiksZz10aGlzLmdldE1hcE9iamVjdFpvb20oKSxnPXRoaXMuZ2V0T0xab29tRnJvbU1hcE9iamVjdFpvb20oZyk7ZC5lcXVhbHMoZikmJmU9PWd8fCghYiYmZiYmdGhpcy5kcmFnUGFuTWFwT2JqZWN0JiZ0aGlzLnNtb290aERyYWdQYW4/KGU9dGhpcy5tYXAuZ2V0Vmlld1BvcnRQeEZyb21Mb25MYXQoZiksZD10aGlzLm1hcC5nZXRWaWV3UG9ydFB4RnJvbUxvbkxhdChkKSx0aGlzLmRyYWdQYW5NYXBPYmplY3QoZC54LWUueCxlLnktZC55KSk6KGQ9dGhpcy5nZXRNYXBPYmplY3RMb25MYXRGcm9tT0xMb25MYXQoZCksZT10aGlzLmdldE1hcE9iamVjdFpvb21Gcm9tT0xab29tKGUpLHRoaXMuc2V0TWFwT2JqZWN0Q2VudGVyKGQsCmUsYykpKX19fSxnZXRMb25MYXRGcm9tVmlld1BvcnRQeDpmdW5jdGlvbihhKXt2YXIgYj1udWxsO251bGwhPXRoaXMubWFwT2JqZWN0JiZudWxsIT10aGlzLmdldE1hcE9iamVjdENlbnRlcigpJiYoYT10aGlzLmdldE1hcE9iamVjdFBpeGVsRnJvbU9MUGl4ZWwoYSksYT10aGlzLmdldE1hcE9iamVjdExvbkxhdEZyb21NYXBPYmplY3RQaXhlbChhKSxiPXRoaXMuZ2V0T0xMb25MYXRGcm9tTWFwT2JqZWN0TG9uTGF0KGEpKTtyZXR1cm4gYn0sZ2V0Vmlld1BvcnRQeEZyb21Mb25MYXQ6ZnVuY3Rpb24oYSl7dmFyIGI9bnVsbDtudWxsIT10aGlzLm1hcE9iamVjdCYmbnVsbCE9dGhpcy5nZXRNYXBPYmplY3RDZW50ZXIoKSYmKGE9dGhpcy5nZXRNYXBPYmplY3RMb25MYXRGcm9tT0xMb25MYXQoYSksYT10aGlzLmdldE1hcE9iamVjdFBpeGVsRnJvbU1hcE9iamVjdExvbkxhdChhKSxiPXRoaXMuZ2V0T0xQaXhlbEZyb21NYXBPYmplY3RQaXhlbChhKSk7cmV0dXJuIGJ9LGdldE9MTG9uTGF0RnJvbU1hcE9iamVjdExvbkxhdDpmdW5jdGlvbihhKXt2YXIgYj0KbnVsbDtudWxsIT1hJiYoYj10aGlzLmdldExvbmdpdHVkZUZyb21NYXBPYmplY3RMb25MYXQoYSksYT10aGlzLmdldExhdGl0dWRlRnJvbU1hcE9iamVjdExvbkxhdChhKSxiPW5ldyBPcGVuTGF5ZXJzLkxvbkxhdChiLGEpKTtyZXR1cm4gYn0sZ2V0TWFwT2JqZWN0TG9uTGF0RnJvbU9MTG9uTGF0OmZ1bmN0aW9uKGEpe3ZhciBiPW51bGw7bnVsbCE9YSYmKGI9dGhpcy5nZXRNYXBPYmplY3RMb25MYXRGcm9tTG9uTGF0KGEubG9uLGEubGF0KSk7cmV0dXJuIGJ9LGdldE9MUGl4ZWxGcm9tTWFwT2JqZWN0UGl4ZWw6ZnVuY3Rpb24oYSl7dmFyIGI9bnVsbDtudWxsIT1hJiYoYj10aGlzLmdldFhGcm9tTWFwT2JqZWN0UGl4ZWwoYSksYT10aGlzLmdldFlGcm9tTWFwT2JqZWN0UGl4ZWwoYSksYj1uZXcgT3BlbkxheWVycy5QaXhlbChiLGEpKTtyZXR1cm4gYn0sZ2V0TWFwT2JqZWN0UGl4ZWxGcm9tT0xQaXhlbDpmdW5jdGlvbihhKXt2YXIgYj1udWxsO251bGwhPWEmJihiPXRoaXMuZ2V0TWFwT2JqZWN0UGl4ZWxGcm9tWFkoYS54LAphLnkpKTtyZXR1cm4gYn0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5MYXllci5FdmVudFBhbmUifSk7T3BlbkxheWVycy5MYXllci5GaXhlZFpvb21MZXZlbHM9T3BlbkxheWVycy5DbGFzcyh7aW5pdGlhbGl6ZTpmdW5jdGlvbigpe30saW5pdFJlc29sdXRpb25zOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPVsibWluWm9vbUxldmVsIiwibWF4Wm9vbUxldmVsIiwibnVtWm9vbUxldmVscyJdLGI9MCxjPWEubGVuZ3RoO2I8YztiKyspe3ZhciBkPWFbYl07dGhpc1tkXT1udWxsIT10aGlzLm9wdGlvbnNbZF0/dGhpcy5vcHRpb25zW2RdOnRoaXMubWFwW2RdfWlmKG51bGw9PXRoaXMubWluWm9vbUxldmVsfHx0aGlzLm1pblpvb21MZXZlbDx0aGlzLk1JTl9aT09NX0xFVkVMKXRoaXMubWluWm9vbUxldmVsPXRoaXMuTUlOX1pPT01fTEVWRUw7YT10aGlzLk1BWF9aT09NX0xFVkVMLXRoaXMubWluWm9vbUxldmVsKzE7Yj1udWxsPT10aGlzLm9wdGlvbnMubnVtWm9vbUxldmVscyYmbnVsbCE9dGhpcy5vcHRpb25zLm1heFpvb21MZXZlbHx8bnVsbD09dGhpcy5udW1ab29tTGV2ZWxzJiZudWxsIT10aGlzLm1heFpvb21MZXZlbD8KdGhpcy5tYXhab29tTGV2ZWwtdGhpcy5taW5ab29tTGV2ZWwrMTp0aGlzLm51bVpvb21MZXZlbHM7dGhpcy5udW1ab29tTGV2ZWxzPW51bGwhPWI/TWF0aC5taW4oYixhKTphO3RoaXMubWF4Wm9vbUxldmVsPXRoaXMubWluWm9vbUxldmVsK3RoaXMubnVtWm9vbUxldmVscy0xO2lmKG51bGwhPXRoaXMuUkVTT0xVVElPTlMpe2E9MDt0aGlzLnJlc29sdXRpb25zPVtdO2ZvcihiPXRoaXMubWluWm9vbUxldmVsO2I8PXRoaXMubWF4Wm9vbUxldmVsO2IrKyl0aGlzLnJlc29sdXRpb25zW2ErK109dGhpcy5SRVNPTFVUSU9OU1tiXTt0aGlzLm1heFJlc29sdXRpb249dGhpcy5yZXNvbHV0aW9uc1swXTt0aGlzLm1pblJlc29sdXRpb249dGhpcy5yZXNvbHV0aW9uc1t0aGlzLnJlc29sdXRpb25zLmxlbmd0aC0xXX19LGdldFJlc29sdXRpb246ZnVuY3Rpb24oKXtpZihudWxsIT10aGlzLnJlc29sdXRpb25zKXJldHVybiBPcGVuTGF5ZXJzLkxheWVyLnByb3RvdHlwZS5nZXRSZXNvbHV0aW9uLmFwcGx5KHRoaXMsCmFyZ3VtZW50cyk7dmFyIGE9bnVsbCxiPXRoaXMubWFwLmdldFNpemUoKSxjPXRoaXMuZ2V0RXh0ZW50KCk7bnVsbCE9YiYmbnVsbCE9YyYmKGE9TWF0aC5tYXgoYy5nZXRXaWR0aCgpL2IudyxjLmdldEhlaWdodCgpL2IuaCkpO3JldHVybiBhfSxnZXRFeHRlbnQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm1hcC5nZXRTaXplKCksYj10aGlzLmdldExvbkxhdEZyb21WaWV3UG9ydFB4KHt4OjAseTowfSksYT10aGlzLmdldExvbkxhdEZyb21WaWV3UG9ydFB4KHt4OmEudyx5OmEuaH0pO3JldHVybiBudWxsIT1iJiZudWxsIT1hP25ldyBPcGVuTGF5ZXJzLkJvdW5kcyhiLmxvbixhLmxhdCxhLmxvbixiLmxhdCk6bnVsbH0sZ2V0Wm9vbUZvclJlc29sdXRpb246ZnVuY3Rpb24oYSl7aWYobnVsbCE9dGhpcy5yZXNvbHV0aW9ucylyZXR1cm4gT3BlbkxheWVycy5MYXllci5wcm90b3R5cGUuZ2V0Wm9vbUZvclJlc29sdXRpb24uYXBwbHkodGhpcyxhcmd1bWVudHMpO3ZhciBiPU9wZW5MYXllcnMuTGF5ZXIucHJvdG90eXBlLmdldEV4dGVudC5hcHBseSh0aGlzLApbXSk7cmV0dXJuIHRoaXMuZ2V0Wm9vbUZvckV4dGVudChiKX0sZ2V0T0xab29tRnJvbU1hcE9iamVjdFpvb206ZnVuY3Rpb24oYSl7dmFyIGI9bnVsbDtudWxsIT1hJiYoYj1hLXRoaXMubWluWm9vbUxldmVsLHRoaXMubWFwLmJhc2VMYXllciE9PXRoaXMmJihiPXRoaXMubWFwLmJhc2VMYXllci5nZXRab29tRm9yUmVzb2x1dGlvbih0aGlzLmdldFJlc29sdXRpb25Gb3Jab29tKGIpKSkpO3JldHVybiBifSxnZXRNYXBPYmplY3Rab29tRnJvbU9MWm9vbTpmdW5jdGlvbihhKXt2YXIgYj1udWxsO251bGwhPWEmJihiPWErdGhpcy5taW5ab29tTGV2ZWwsdGhpcy5tYXAuYmFzZUxheWVyIT09dGhpcyYmKGI9dGhpcy5nZXRab29tRm9yUmVzb2x1dGlvbih0aGlzLm1hcC5iYXNlTGF5ZXIuZ2V0UmVzb2x1dGlvbkZvclpvb20oYikpKSk7cmV0dXJuIGJ9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuTGF5ZXIuRml4ZWRab29tTGV2ZWxzIn0pO09wZW5MYXllcnMuTGF5ZXIuR29vZ2xlPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5MYXllci5FdmVudFBhbmUsT3BlbkxheWVycy5MYXllci5GaXhlZFpvb21MZXZlbHMse01JTl9aT09NX0xFVkVMOjAsTUFYX1pPT01fTEVWRUw6MjEsUkVTT0xVVElPTlM6WzEuNDA2MjUsMC43MDMxMjUsMC4zNTE1NjI1LDAuMTc1NzgxMjUsMC4wODc4OTA2MjUsMC4wNDM5NDUzMTI1LDAuMDIxOTcyNjU2MjUsMC4wMTA5ODYzMjgxMjUsMC4wMDU0OTMxNjQwNjI1LDAuMDAyNzQ2NTgyMDMxMjUsMC4wMDEzNzMyOTEwMTU2MjUsNi44NjY0NTUwNzgxMjVFLTQsMy40MzMyMjc1MzkwNjI1RS00LDEuNzE2NjEzNzY5NTMxMjVFLTQsOC41ODMwNjg4NDc2NTYyNUUtNSw0LjI5MTUzNDQyMzgyODEyNUUtNSwyLjE0NTc2NzIxMTkxNDA2MkUtNSwxLjA3Mjg4MzYwNTk1NzAzMUUtNSw1LjM2NDQxODAyOTc4NTE1RS02LDIuNjgyMjA5MDE0ODkyNTdFLTYsMS4zNDExMDQ1MDc0NDYyODlFLTYsNi43MDU1MjI1MzcyMzE0NDVFLTddLAp0eXBlOm51bGwsd3JhcERhdGVMaW5lOiEwLHNwaGVyaWNhbE1lcmNhdG9yOiExLHZlcnNpb246bnVsbCxpbml0aWFsaXplOmZ1bmN0aW9uKGEsYil7Yj1ifHx7fTtiLnZlcnNpb258fChiLnZlcnNpb249ImZ1bmN0aW9uIj09PXR5cGVvZiBHTWFwMj8iMiI6IjMiKTt2YXIgYz1PcGVuTGF5ZXJzLkxheWVyLkdvb2dsZVsidiIrYi52ZXJzaW9uLnJlcGxhY2UoL1wuL2csIl8iKV07aWYoYylPcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyhiLGMpO2Vsc2UgdGhyb3ciVW5zdXBwb3J0ZWQgR29vZ2xlIE1hcHMgQVBJIHZlcnNpb246ICIrYi52ZXJzaW9uO09wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKGIsYy5ERUZBVUxUUyk7Yi5tYXhFeHRlbnQmJihiLm1heEV4dGVudD1iLm1heEV4dGVudC5jbG9uZSgpKTtPcGVuTGF5ZXJzLkxheWVyLkV2ZW50UGFuZS5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLFthLGJdKTtPcGVuTGF5ZXJzLkxheWVyLkZpeGVkWm9vbUxldmVscy5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLApbYSxiXSk7dGhpcy5zcGhlcmljYWxNZXJjYXRvciYmKE9wZW5MYXllcnMuVXRpbC5leHRlbmQodGhpcyxPcGVuTGF5ZXJzLkxheWVyLlNwaGVyaWNhbE1lcmNhdG9yKSx0aGlzLmluaXRNZXJjYXRvclBhcmFtZXRlcnMoKSl9LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLkxheWVyLkdvb2dsZSh0aGlzLm5hbWUsdGhpcy5nZXRPcHRpb25zKCkpfSxzZXRWaXNpYmlsaXR5OmZ1bmN0aW9uKGEpe3ZhciBiPW51bGw9PXRoaXMub3BhY2l0eT8xOnRoaXMub3BhY2l0eTtPcGVuTGF5ZXJzLkxheWVyLkV2ZW50UGFuZS5wcm90b3R5cGUuc2V0VmlzaWJpbGl0eS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5zZXRPcGFjaXR5KGIpfSxkaXNwbGF5OmZ1bmN0aW9uKGEpe3RoaXMuX2RyYWdnaW5nfHx0aGlzLnNldEdNYXBWaXNpYmlsaXR5KGEpO09wZW5MYXllcnMuTGF5ZXIuRXZlbnRQYW5lLnByb3RvdHlwZS5kaXNwbGF5LmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sbW92ZVRvOmZ1bmN0aW9uKGEsCmIsYyl7dGhpcy5fZHJhZ2dpbmc9YztPcGVuTGF5ZXJzLkxheWVyLkV2ZW50UGFuZS5wcm90b3R5cGUubW92ZVRvLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtkZWxldGUgdGhpcy5fZHJhZ2dpbmd9LHNldE9wYWNpdHk6ZnVuY3Rpb24oYSl7YSE9PXRoaXMub3BhY2l0eSYmKG51bGwhPXRoaXMubWFwJiZ0aGlzLm1hcC5ldmVudHMudHJpZ2dlckV2ZW50KCJjaGFuZ2VsYXllciIse2xheWVyOnRoaXMscHJvcGVydHk6Im9wYWNpdHkifSksdGhpcy5vcGFjaXR5PWEpO2lmKHRoaXMuZ2V0VmlzaWJpbGl0eSgpKXt2YXIgYj10aGlzLmdldE1hcENvbnRhaW5lcigpO09wZW5MYXllcnMuVXRpbC5tb2RpZnlET01FbGVtZW50KGIsbnVsbCxudWxsLG51bGwsbnVsbCxudWxsLG51bGwsYSl9fSxkZXN0cm95OmZ1bmN0aW9uKCl7aWYodGhpcy5tYXApe3RoaXMuc2V0R01hcFZpc2liaWxpdHkoITEpO3ZhciBhPU9wZW5MYXllcnMuTGF5ZXIuR29vZ2xlLmNhY2hlW3RoaXMubWFwLmlkXTthJiYxPj1hLmNvdW50JiYKdGhpcy5yZW1vdmVHTWFwRWxlbWVudHMoKX1PcGVuTGF5ZXJzLkxheWVyLkV2ZW50UGFuZS5wcm90b3R5cGUuZGVzdHJveS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LHJlbW92ZUdNYXBFbGVtZW50czpmdW5jdGlvbigpe3ZhciBhPU9wZW5MYXllcnMuTGF5ZXIuR29vZ2xlLmNhY2hlW3RoaXMubWFwLmlkXTtpZihhKXt2YXIgYj10aGlzLm1hcE9iamVjdCYmdGhpcy5nZXRNYXBDb250YWluZXIoKTtiJiZiLnBhcmVudE5vZGUmJmIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChiKTsoYj1hLnRlcm1zT2ZVc2UpJiZiLnBhcmVudE5vZGUmJmIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChiKTsoYT1hLnBvd2VyZWRCeSkmJmEucGFyZW50Tm9kZSYmYS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGEpO3RoaXMubWFwT2JqZWN0JiYod2luZG93Lmdvb2dsZSYmZ29vZ2xlLm1hcHMmJmdvb2dsZS5tYXBzLmV2ZW50JiZnb29nbGUubWFwcy5ldmVudC5jbGVhckxpc3RlbmVycykmJmdvb2dsZS5tYXBzLmV2ZW50LmNsZWFyTGlzdGVuZXJzKHRoaXMubWFwT2JqZWN0LAoidGlsZXNsb2FkZWQiKX19LHJlbW92ZU1hcDpmdW5jdGlvbihhKXt0aGlzLnZpc2liaWxpdHkmJnRoaXMubWFwT2JqZWN0JiZ0aGlzLnNldEdNYXBWaXNpYmlsaXR5KCExKTt2YXIgYj1PcGVuTGF5ZXJzLkxheWVyLkdvb2dsZS5jYWNoZVthLmlkXTtiJiYoMT49Yi5jb3VudD8odGhpcy5yZW1vdmVHTWFwRWxlbWVudHMoKSxkZWxldGUgT3BlbkxheWVycy5MYXllci5Hb29nbGUuY2FjaGVbYS5pZF0pOi0tYi5jb3VudCk7ZGVsZXRlIHRoaXMudGVybXNPZlVzZTtkZWxldGUgdGhpcy5wb3dlcmVkQnk7ZGVsZXRlIHRoaXMubWFwT2JqZWN0O2RlbGV0ZSB0aGlzLmRyYWdPYmplY3Q7T3BlbkxheWVycy5MYXllci5FdmVudFBhbmUucHJvdG90eXBlLnJlbW92ZU1hcC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGdldE9MQm91bmRzRnJvbU1hcE9iamVjdEJvdW5kczpmdW5jdGlvbihhKXt2YXIgYj1udWxsO251bGwhPWEmJihiPWEuZ2V0U291dGhXZXN0KCksYT1hLmdldE5vcnRoRWFzdCgpLHRoaXMuc3BoZXJpY2FsTWVyY2F0b3I/CihiPXRoaXMuZm9yd2FyZE1lcmNhdG9yKGIubG5nKCksYi5sYXQoKSksYT10aGlzLmZvcndhcmRNZXJjYXRvcihhLmxuZygpLGEubGF0KCkpKTooYj1uZXcgT3BlbkxheWVycy5Mb25MYXQoYi5sbmcoKSxiLmxhdCgpKSxhPW5ldyBPcGVuTGF5ZXJzLkxvbkxhdChhLmxuZygpLGEubGF0KCkpKSxiPW5ldyBPcGVuTGF5ZXJzLkJvdW5kcyhiLmxvbixiLmxhdCxhLmxvbixhLmxhdCkpO3JldHVybiBifSxnZXRXYXJuaW5nSFRNTDpmdW5jdGlvbigpe3JldHVybiBPcGVuTGF5ZXJzLmkxOG4oImdvb2dsZVdhcm5pbmciKX0sZ2V0TWFwT2JqZWN0Q2VudGVyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWFwT2JqZWN0LmdldENlbnRlcigpfSxnZXRNYXBPYmplY3Rab29tOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWFwT2JqZWN0LmdldFpvb20oKX0sZ2V0TG9uZ2l0dWRlRnJvbU1hcE9iamVjdExvbkxhdDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5zcGhlcmljYWxNZXJjYXRvcj90aGlzLmZvcndhcmRNZXJjYXRvcihhLmxuZygpLAphLmxhdCgpKS5sb246YS5sbmcoKX0sZ2V0TGF0aXR1ZGVGcm9tTWFwT2JqZWN0TG9uTGF0OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnNwaGVyaWNhbE1lcmNhdG9yP3RoaXMuZm9yd2FyZE1lcmNhdG9yKGEubG5nKCksYS5sYXQoKSkubGF0OmEubGF0KCl9LGdldFhGcm9tTWFwT2JqZWN0UGl4ZWw6ZnVuY3Rpb24oYSl7cmV0dXJuIGEueH0sZ2V0WUZyb21NYXBPYmplY3RQaXhlbDpmdW5jdGlvbihhKXtyZXR1cm4gYS55fSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkxheWVyLkdvb2dsZSJ9KTtPcGVuTGF5ZXJzLkxheWVyLkdvb2dsZS5jYWNoZT17fTsKT3BlbkxheWVycy5MYXllci5Hb29nbGUudjI9e3Rlcm1zT2ZVc2U6bnVsbCxwb3dlcmVkQnk6bnVsbCxkcmFnT2JqZWN0Om51bGwsbG9hZE1hcE9iamVjdDpmdW5jdGlvbigpe3RoaXMudHlwZXx8KHRoaXMudHlwZT1HX05PUk1BTF9NQVApO3ZhciBhLGIsYyxkPU9wZW5MYXllcnMuTGF5ZXIuR29vZ2xlLmNhY2hlW3RoaXMubWFwLmlkXTtpZihkKWE9ZC5tYXBPYmplY3QsYj1kLnRlcm1zT2ZVc2UsYz1kLnBvd2VyZWRCeSwrK2QuY291bnQ7ZWxzZXt2YXIgZD10aGlzLm1hcC52aWV3UG9ydERpdixlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO2UuaWQ9dGhpcy5tYXAuaWQrIl9HTWFwMkNvbnRhaW5lciI7ZS5zdHlsZS5wb3NpdGlvbj0iYWJzb2x1dGUiO2Uuc3R5bGUud2lkdGg9IjEwMCUiO2Uuc3R5bGUuaGVpZ2h0PSIxMDAlIjtkLmFwcGVuZENoaWxkKGUpO3RyeXthPW5ldyBHTWFwMihlKSxiPWUubGFzdENoaWxkLGQuYXBwZW5kQ2hpbGQoYiksYi5zdHlsZS56SW5kZXg9CiIxMTAwIixiLnN0eWxlLnJpZ2h0PSIiLGIuc3R5bGUuYm90dG9tPSIiLGIuY2xhc3NOYW1lPSJvbExheWVyR29vZ2xlQ29weXJpZ2h0IixjPWUubGFzdENoaWxkLGQuYXBwZW5kQ2hpbGQoYyksYy5zdHlsZS56SW5kZXg9IjExMDAiLGMuc3R5bGUucmlnaHQ9IiIsYy5zdHlsZS5ib3R0b209IiIsYy5jbGFzc05hbWU9Im9sTGF5ZXJHb29nbGVQb3dlcmVkQnkgZ21ub3ByaW50In1jYXRjaChmKXt0aHJvdyBmO31PcGVuTGF5ZXJzLkxheWVyLkdvb2dsZS5jYWNoZVt0aGlzLm1hcC5pZF09e21hcE9iamVjdDphLHRlcm1zT2ZVc2U6Yixwb3dlcmVkQnk6Yyxjb3VudDoxfX10aGlzLm1hcE9iamVjdD1hO3RoaXMudGVybXNPZlVzZT1iO3RoaXMucG93ZXJlZEJ5PWM7LTE9PT1PcGVuTGF5ZXJzLlV0aWwuaW5kZXhPZih0aGlzLm1hcE9iamVjdC5nZXRNYXBUeXBlcygpLHRoaXMudHlwZSkmJnRoaXMubWFwT2JqZWN0LmFkZE1hcFR5cGUodGhpcy50eXBlKTsiZnVuY3Rpb24iPT10eXBlb2YgYS5nZXREcmFnT2JqZWN0Pwp0aGlzLmRyYWdPYmplY3Q9YS5nZXREcmFnT2JqZWN0KCk6dGhpcy5kcmFnUGFuTWFwT2JqZWN0PW51bGw7ITE9PT10aGlzLmlzQmFzZUxheWVyJiZ0aGlzLnNldEdNYXBWaXNpYmlsaXR5KCJub25lIiE9PXRoaXMuZGl2LnN0eWxlLmRpc3BsYXkpfSxvbk1hcFJlc2l6ZTpmdW5jdGlvbigpe2lmKHRoaXMudmlzaWJpbGl0eSYmdGhpcy5tYXBPYmplY3QuaXNMb2FkZWQoKSl0aGlzLm1hcE9iamVjdC5jaGVja1Jlc2l6ZSgpO2Vsc2V7aWYoIXRoaXMuX3Jlc2l6ZWQpdmFyIGE9dGhpcyxiPUdFdmVudC5hZGRMaXN0ZW5lcih0aGlzLm1hcE9iamVjdCwibG9hZCIsZnVuY3Rpb24oKXtHRXZlbnQucmVtb3ZlTGlzdGVuZXIoYik7ZGVsZXRlIGEuX3Jlc2l6ZWQ7YS5tYXBPYmplY3QuY2hlY2tSZXNpemUoKTthLm1vdmVUbyhhLm1hcC5nZXRDZW50ZXIoKSxhLm1hcC5nZXRab29tKCkpfSk7dGhpcy5fcmVzaXplZD0hMH19LHNldEdNYXBWaXNpYmlsaXR5OmZ1bmN0aW9uKGEpe3ZhciBiPU9wZW5MYXllcnMuTGF5ZXIuR29vZ2xlLmNhY2hlW3RoaXMubWFwLmlkXTsKaWYoYil7dmFyIGM9dGhpcy5tYXBPYmplY3QuZ2V0Q29udGFpbmVyKCk7ITA9PT1hPyh0aGlzLm1hcE9iamVjdC5zZXRNYXBUeXBlKHRoaXMudHlwZSksYy5zdHlsZS5kaXNwbGF5PSIiLHRoaXMudGVybXNPZlVzZS5zdHlsZS5sZWZ0PSIiLHRoaXMudGVybXNPZlVzZS5zdHlsZS5kaXNwbGF5PSIiLHRoaXMucG93ZXJlZEJ5LnN0eWxlLmRpc3BsYXk9IiIsYi5kaXNwbGF5ZWQ9dGhpcy5pZCk6KGIuZGlzcGxheWVkPT09dGhpcy5pZCYmZGVsZXRlIGIuZGlzcGxheWVkLGIuZGlzcGxheWVkfHwoYy5zdHlsZS5kaXNwbGF5PSJub25lIix0aGlzLnRlcm1zT2ZVc2Uuc3R5bGUuZGlzcGxheT0ibm9uZSIsdGhpcy50ZXJtc09mVXNlLnN0eWxlLmxlZnQ9Ii05OTk5cHgiLHRoaXMucG93ZXJlZEJ5LnN0eWxlLmRpc3BsYXk9Im5vbmUiKSl9fSxnZXRNYXBDb250YWluZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tYXBPYmplY3QuZ2V0Q29udGFpbmVyKCl9LGdldE1hcE9iamVjdEJvdW5kc0Zyb21PTEJvdW5kczpmdW5jdGlvbihhKXt2YXIgYj0KbnVsbDtudWxsIT1hJiYoYj10aGlzLnNwaGVyaWNhbE1lcmNhdG9yP3RoaXMuaW52ZXJzZU1lcmNhdG9yKGEuYm90dG9tLGEubGVmdCk6bmV3IE9wZW5MYXllcnMuTG9uTGF0KGEuYm90dG9tLGEubGVmdCksYT10aGlzLnNwaGVyaWNhbE1lcmNhdG9yP3RoaXMuaW52ZXJzZU1lcmNhdG9yKGEudG9wLGEucmlnaHQpOm5ldyBPcGVuTGF5ZXJzLkxvbkxhdChhLnRvcCxhLnJpZ2h0KSxiPW5ldyBHTGF0TG5nQm91bmRzKG5ldyBHTGF0TG5nKGIubGF0LGIubG9uKSxuZXcgR0xhdExuZyhhLmxhdCxhLmxvbikpKTtyZXR1cm4gYn0sc2V0TWFwT2JqZWN0Q2VudGVyOmZ1bmN0aW9uKGEsYil7dGhpcy5tYXBPYmplY3Quc2V0Q2VudGVyKGEsYil9LGRyYWdQYW5NYXBPYmplY3Q6ZnVuY3Rpb24oYSxiKXt0aGlzLmRyYWdPYmplY3QubW92ZUJ5KG5ldyBHU2l6ZSgtYSxiKSl9LGdldE1hcE9iamVjdExvbkxhdEZyb21NYXBPYmplY3RQaXhlbDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5tYXBPYmplY3QuZnJvbUNvbnRhaW5lclBpeGVsVG9MYXRMbmcoYSl9LApnZXRNYXBPYmplY3RQaXhlbEZyb21NYXBPYmplY3RMb25MYXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMubWFwT2JqZWN0LmZyb21MYXRMbmdUb0NvbnRhaW5lclBpeGVsKGEpfSxnZXRNYXBPYmplY3Rab29tRnJvbU1hcE9iamVjdEJvdW5kczpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5tYXBPYmplY3QuZ2V0Qm91bmRzWm9vbUxldmVsKGEpfSxnZXRNYXBPYmplY3RMb25MYXRGcm9tTG9uTGF0OmZ1bmN0aW9uKGEsYil7dmFyIGM7dGhpcy5zcGhlcmljYWxNZXJjYXRvcj8oYz10aGlzLmludmVyc2VNZXJjYXRvcihhLGIpLGM9bmV3IEdMYXRMbmcoYy5sYXQsYy5sb24pKTpjPW5ldyBHTGF0TG5nKGIsYSk7cmV0dXJuIGN9LGdldE1hcE9iamVjdFBpeGVsRnJvbVhZOmZ1bmN0aW9uKGEsYil7cmV0dXJuIG5ldyBHUG9pbnQoYSxiKX19O09wZW5MYXllcnMuR2VvbWV0cnk9T3BlbkxheWVycy5DbGFzcyh7aWQ6bnVsbCxwYXJlbnQ6bnVsbCxib3VuZHM6bnVsbCxpbml0aWFsaXplOmZ1bmN0aW9uKCl7dGhpcy5pZD1PcGVuTGF5ZXJzLlV0aWwuY3JlYXRlVW5pcXVlSUQodGhpcy5DTEFTU19OQU1FKyJfIil9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmJvdW5kcz10aGlzLmlkPW51bGx9LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5fSxzZXRCb3VuZHM6ZnVuY3Rpb24oYSl7YSYmKHRoaXMuYm91bmRzPWEuY2xvbmUoKSl9LGNsZWFyQm91bmRzOmZ1bmN0aW9uKCl7dGhpcy5ib3VuZHM9bnVsbDt0aGlzLnBhcmVudCYmdGhpcy5wYXJlbnQuY2xlYXJCb3VuZHMoKX0sZXh0ZW5kQm91bmRzOmZ1bmN0aW9uKGEpe3RoaXMuZ2V0Qm91bmRzKCk/dGhpcy5ib3VuZHMuZXh0ZW5kKGEpOnRoaXMuc2V0Qm91bmRzKGEpfSxnZXRCb3VuZHM6ZnVuY3Rpb24oKXtudWxsPT10aGlzLmJvdW5kcyYmdGhpcy5jYWxjdWxhdGVCb3VuZHMoKTsKcmV0dXJuIHRoaXMuYm91bmRzfSxjYWxjdWxhdGVCb3VuZHM6ZnVuY3Rpb24oKXt9LGRpc3RhbmNlVG86ZnVuY3Rpb24oYSxiKXt9LGdldFZlcnRpY2VzOmZ1bmN0aW9uKGEpe30sYXRQb2ludDpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9ITE7bnVsbCE9dGhpcy5nZXRCb3VuZHMoKSYmbnVsbCE9YSYmKGI9bnVsbCE9Yj9iOjAsYz1udWxsIT1jP2M6MCxkPShuZXcgT3BlbkxheWVycy5Cb3VuZHModGhpcy5ib3VuZHMubGVmdC1iLHRoaXMuYm91bmRzLmJvdHRvbS1jLHRoaXMuYm91bmRzLnJpZ2h0K2IsdGhpcy5ib3VuZHMudG9wK2MpKS5jb250YWluc0xvbkxhdChhKSk7cmV0dXJuIGR9LGdldExlbmd0aDpmdW5jdGlvbigpe3JldHVybiAwfSxnZXRBcmVhOmZ1bmN0aW9uKCl7cmV0dXJuIDB9LGdldENlbnRyb2lkOmZ1bmN0aW9uKCl7cmV0dXJuIG51bGx9LHRvU3RyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIE9wZW5MYXllcnMuRm9ybWF0JiZPcGVuTGF5ZXJzLkZvcm1hdC5XS1Q/T3BlbkxheWVycy5Gb3JtYXQuV0tULnByb3RvdHlwZS53cml0ZShuZXcgT3BlbkxheWVycy5GZWF0dXJlLlZlY3Rvcih0aGlzKSk6Ck9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0aGlzKX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5HZW9tZXRyeSJ9KTtPcGVuTGF5ZXJzLkdlb21ldHJ5LmZyb21XS1Q9ZnVuY3Rpb24oYSl7dmFyIGI7aWYoT3BlbkxheWVycy5Gb3JtYXQmJk9wZW5MYXllcnMuRm9ybWF0LldLVCl7dmFyIGM9T3BlbkxheWVycy5HZW9tZXRyeS5mcm9tV0tULmZvcm1hdDtjfHwoYz1uZXcgT3BlbkxheWVycy5Gb3JtYXQuV0tULE9wZW5MYXllcnMuR2VvbWV0cnkuZnJvbVdLVC5mb3JtYXQ9Yyk7YT1jLnJlYWQoYSk7aWYoYSBpbnN0YW5jZW9mIE9wZW5MYXllcnMuRmVhdHVyZS5WZWN0b3IpYj1hLmdlb21ldHJ5O2Vsc2UgaWYoT3BlbkxheWVycy5VdGlsLmlzQXJyYXkoYSkpe2I9YS5sZW5ndGg7Zm9yKHZhciBjPUFycmF5KGIpLGQ9MDtkPGI7KytkKWNbZF09YVtkXS5nZW9tZXRyeTtiPW5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LkNvbGxlY3Rpb24oYyl9fXJldHVybiBifTsKT3BlbkxheWVycy5HZW9tZXRyeS5zZWdtZW50c0ludGVyc2VjdD1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9YyYmYy5wb2ludDtjPWMmJmMudG9sZXJhbmNlO3ZhciBlPSExLGY9YS54MS1iLngxLGc9YS55MS1iLnkxLGg9YS54Mi1hLngxLGs9YS55Mi1hLnkxLGw9Yi55Mi1iLnkxLG09Yi54Mi1iLngxLHI9bCpoLW0qayxsPW0qZy1sKmYsZz1oKmctaypmOzA9PXI/MD09bCYmMD09ZyYmKGU9ITApOihmPWwvcixyPWcvciwwPD1mJiYoMT49ZiYmMDw9ciYmMT49cikmJihkPyhoPWEueDErZipoLHI9YS55MStmKmssZT1uZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludChoLHIpKTplPSEwKSk7aWYoYylpZihlKXtpZihkKWE6Zm9yKGE9W2EsYl0sYj0wOzI+YjsrK2IpZm9yKGY9YVtiXSxrPTE7Mz5rOysraylpZihoPWZbIngiK2tdLHI9ZlsieSIra10sZD1NYXRoLnNxcnQoTWF0aC5wb3coaC1lLngsMikrTWF0aC5wb3coci1lLnksMikpLGQ8Yyl7ZS54PWg7ZS55PXI7YnJlYWsgYX19ZWxzZSBhOmZvcihhPQpbYSxiXSxiPTA7Mj5iOysrYilmb3IoaD1hW2JdLHI9YVsoYisxKSUyXSxrPTE7Mz5rOysraylpZihmPXt4OmhbIngiK2tdLHk6aFsieSIra119LGc9T3BlbkxheWVycy5HZW9tZXRyeS5kaXN0YW5jZVRvU2VnbWVudChmLHIpLGcuZGlzdGFuY2U8Yyl7ZT1kP25ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KGYueCxmLnkpOiEwO2JyZWFrIGF9cmV0dXJuIGV9O09wZW5MYXllcnMuR2VvbWV0cnkuZGlzdGFuY2VUb1NlZ21lbnQ9ZnVuY3Rpb24oYSxiKXt2YXIgYz1PcGVuTGF5ZXJzLkdlb21ldHJ5LmRpc3RhbmNlU3F1YXJlZFRvU2VnbWVudChhLGIpO2MuZGlzdGFuY2U9TWF0aC5zcXJ0KGMuZGlzdGFuY2UpO3JldHVybiBjfTsKT3BlbkxheWVycy5HZW9tZXRyeS5kaXN0YW5jZVNxdWFyZWRUb1NlZ21lbnQ9ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLngsZD1hLnksZT1iLngxLGY9Yi55MSxnPWIueDIsaD1iLnkyLGs9Zy1lLGw9aC1mLG09KGsqKGMtZSkrbCooZC1mKSkvKE1hdGgucG93KGssMikrTWF0aC5wb3cobCwyKSk7MD49bXx8KDE8PW0/KGU9ZyxmPWgpOihlKz1tKmssZis9bSpsKSk7cmV0dXJue2Rpc3RhbmNlOk1hdGgucG93KGUtYywyKStNYXRoLnBvdyhmLWQsMikseDplLHk6ZixhbG9uZzptfX07T3BlbkxheWVycy5HZW9tZXRyeS5Db2xsZWN0aW9uPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5HZW9tZXRyeSx7Y29tcG9uZW50czpudWxsLGNvbXBvbmVudFR5cGVzOm51bGwsaW5pdGlhbGl6ZTpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLkdlb21ldHJ5LnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLmNvbXBvbmVudHM9W107bnVsbCE9YSYmdGhpcy5hZGRDb21wb25lbnRzKGEpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5jb21wb25lbnRzLmxlbmd0aD0wO3RoaXMuY29tcG9uZW50cz1udWxsO09wZW5MYXllcnMuR2VvbWV0cnkucHJvdG90eXBlLmRlc3Ryb3kuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxjbG9uZTpmdW5jdGlvbigpe2Zvcih2YXIgYT1ldmFsKCJuZXcgIit0aGlzLkNMQVNTX05BTUUrIigpIiksYj0wLGM9dGhpcy5jb21wb25lbnRzLmxlbmd0aDtiPGM7YisrKWEuYWRkQ29tcG9uZW50KHRoaXMuY29tcG9uZW50c1tiXS5jbG9uZSgpKTsKT3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoYSx0aGlzKTtyZXR1cm4gYX0sZ2V0Q29tcG9uZW50c1N0cmluZzpmdW5jdGlvbigpe2Zvcih2YXIgYT1bXSxiPTAsYz10aGlzLmNvbXBvbmVudHMubGVuZ3RoO2I8YztiKyspYS5wdXNoKHRoaXMuY29tcG9uZW50c1tiXS50b1Nob3J0U3RyaW5nKCkpO3JldHVybiBhLmpvaW4oIiwiKX0sY2FsY3VsYXRlQm91bmRzOmZ1bmN0aW9uKCl7dGhpcy5ib3VuZHM9bnVsbDt2YXIgYT1uZXcgT3BlbkxheWVycy5Cb3VuZHMsYj10aGlzLmNvbXBvbmVudHM7aWYoYilmb3IodmFyIGM9MCxkPWIubGVuZ3RoO2M8ZDtjKyspYS5leHRlbmQoYltjXS5nZXRCb3VuZHMoKSk7bnVsbCE9YS5sZWZ0JiYobnVsbCE9YS5ib3R0b20mJm51bGwhPWEucmlnaHQmJm51bGwhPWEudG9wKSYmdGhpcy5zZXRCb3VuZHMoYSl9LGFkZENvbXBvbmVudHM6ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5VdGlsLmlzQXJyYXkoYSl8fChhPVthXSk7Zm9yKHZhciBiPTAsYz1hLmxlbmd0aDtiPApjO2IrKyl0aGlzLmFkZENvbXBvbmVudChhW2JdKX0sYWRkQ29tcG9uZW50OmZ1bmN0aW9uKGEsYil7dmFyIGM9ITE7aWYoYSYmKG51bGw9PXRoaXMuY29tcG9uZW50VHlwZXN8fC0xPE9wZW5MYXllcnMuVXRpbC5pbmRleE9mKHRoaXMuY29tcG9uZW50VHlwZXMsYS5DTEFTU19OQU1FKSkpe2lmKG51bGwhPWImJmI8dGhpcy5jb21wb25lbnRzLmxlbmd0aCl7dmFyIGM9dGhpcy5jb21wb25lbnRzLnNsaWNlKDAsYiksZD10aGlzLmNvbXBvbmVudHMuc2xpY2UoYix0aGlzLmNvbXBvbmVudHMubGVuZ3RoKTtjLnB1c2goYSk7dGhpcy5jb21wb25lbnRzPWMuY29uY2F0KGQpfWVsc2UgdGhpcy5jb21wb25lbnRzLnB1c2goYSk7YS5wYXJlbnQ9dGhpczt0aGlzLmNsZWFyQm91bmRzKCk7Yz0hMH1yZXR1cm4gY30scmVtb3ZlQ29tcG9uZW50czpmdW5jdGlvbihhKXt2YXIgYj0hMTtPcGVuTGF5ZXJzLlV0aWwuaXNBcnJheShhKXx8KGE9W2FdKTtmb3IodmFyIGM9YS5sZW5ndGgtMTswPD1jOy0tYyliPQp0aGlzLnJlbW92ZUNvbXBvbmVudChhW2NdKXx8YjtyZXR1cm4gYn0scmVtb3ZlQ29tcG9uZW50OmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuVXRpbC5yZW1vdmVJdGVtKHRoaXMuY29tcG9uZW50cyxhKTt0aGlzLmNsZWFyQm91bmRzKCk7cmV0dXJuITB9LGdldExlbmd0aDpmdW5jdGlvbigpe2Zvcih2YXIgYT0wLGI9MCxjPXRoaXMuY29tcG9uZW50cy5sZW5ndGg7YjxjO2IrKylhKz10aGlzLmNvbXBvbmVudHNbYl0uZ2V0TGVuZ3RoKCk7cmV0dXJuIGF9LGdldEFyZWE6ZnVuY3Rpb24oKXtmb3IodmFyIGE9MCxiPTAsYz10aGlzLmNvbXBvbmVudHMubGVuZ3RoO2I8YztiKyspYSs9dGhpcy5jb21wb25lbnRzW2JdLmdldEFyZWEoKTtyZXR1cm4gYX0sZ2V0R2VvZGVzaWNBcmVhOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0wLGM9MCxkPXRoaXMuY29tcG9uZW50cy5sZW5ndGg7YzxkO2MrKyliKz10aGlzLmNvbXBvbmVudHNbY10uZ2V0R2VvZGVzaWNBcmVhKGEpO3JldHVybiBifSxnZXRDZW50cm9pZDpmdW5jdGlvbihhKXtpZighYSlyZXR1cm4gdGhpcy5jb21wb25lbnRzLmxlbmd0aCYmCnRoaXMuY29tcG9uZW50c1swXS5nZXRDZW50cm9pZCgpO2E9dGhpcy5jb21wb25lbnRzLmxlbmd0aDtpZighYSlyZXR1cm4hMTtmb3IodmFyIGI9W10sYz1bXSxkPTAsZT1OdW1iZXIuTUFYX1ZBTFVFLGYsZz0wO2c8YTsrK2cpe2Y9dGhpcy5jb21wb25lbnRzW2ddO3ZhciBoPWYuZ2V0QXJlYSgpO2Y9Zi5nZXRDZW50cm9pZCghMCk7aXNOYU4oaCl8fChpc05hTihmLngpfHxpc05hTihmLnkpKXx8KGIucHVzaChoKSxkKz1oLGU9aDxlJiYwPGg/aDplLGMucHVzaChmKSl9YT1iLmxlbmd0aDtpZigwPT09ZCl7Zm9yKGc9MDtnPGE7KytnKWJbZ109MTtkPWIubGVuZ3RofWVsc2V7Zm9yKGc9MDtnPGE7KytnKWJbZ10vPWU7ZC89ZX1mb3IodmFyIGs9ZT0wLGc9MDtnPGE7KytnKWY9Y1tnXSxoPWJbZ10sZSs9Zi54Kmgsays9Zi55Kmg7cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KGUvZCxrL2QpfSxnZXRHZW9kZXNpY0xlbmd0aDpmdW5jdGlvbihhKXtmb3IodmFyIGI9MCwKYz0wLGQ9dGhpcy5jb21wb25lbnRzLmxlbmd0aDtjPGQ7YysrKWIrPXRoaXMuY29tcG9uZW50c1tjXS5nZXRHZW9kZXNpY0xlbmd0aChhKTtyZXR1cm4gYn0sbW92ZTpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz0wLGQ9dGhpcy5jb21wb25lbnRzLmxlbmd0aDtjPGQ7YysrKXRoaXMuY29tcG9uZW50c1tjXS5tb3ZlKGEsYil9LHJvdGF0ZTpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz0wLGQ9dGhpcy5jb21wb25lbnRzLmxlbmd0aDtjPGQ7KytjKXRoaXMuY29tcG9uZW50c1tjXS5yb3RhdGUoYSxiKX0scmVzaXplOmZ1bmN0aW9uKGEsYixjKXtmb3IodmFyIGQ9MDtkPHRoaXMuY29tcG9uZW50cy5sZW5ndGg7KytkKXRoaXMuY29tcG9uZW50c1tkXS5yZXNpemUoYSxiLGMpO3JldHVybiB0aGlzfSxkaXN0YW5jZVRvOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPSEoYiYmITE9PT1iLmVkZ2UpJiZiJiZiLmRldGFpbHMsZCxlLGYsZz1OdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFksaD0wLGs9dGhpcy5jb21wb25lbnRzLmxlbmd0aDtoPAprJiYhKGQ9dGhpcy5jb21wb25lbnRzW2hdLmRpc3RhbmNlVG8oYSxiKSxmPWM/ZC5kaXN0YW5jZTpkLGY8ZyYmKGc9ZixlPWQsMD09ZykpOysraCk7cmV0dXJuIGV9LGVxdWFsczpmdW5jdGlvbihhKXt2YXIgYj0hMDtpZihhJiZhLkNMQVNTX05BTUUmJnRoaXMuQ0xBU1NfTkFNRT09YS5DTEFTU19OQU1FKWlmKE9wZW5MYXllcnMuVXRpbC5pc0FycmF5KGEuY29tcG9uZW50cykmJmEuY29tcG9uZW50cy5sZW5ndGg9PXRoaXMuY29tcG9uZW50cy5sZW5ndGgpZm9yKHZhciBjPTAsZD10aGlzLmNvbXBvbmVudHMubGVuZ3RoO2M8ZDsrK2Mpe2lmKCF0aGlzLmNvbXBvbmVudHNbY10uZXF1YWxzKGEuY29tcG9uZW50c1tjXSkpe2I9ITE7YnJlYWt9fWVsc2UgYj0hMTtlbHNlIGI9ITE7cmV0dXJuIGJ9LHRyYW5zZm9ybTpmdW5jdGlvbihhLGIpe2lmKGEmJmIpe2Zvcih2YXIgYz0wLGQ9dGhpcy5jb21wb25lbnRzLmxlbmd0aDtjPGQ7YysrKXRoaXMuY29tcG9uZW50c1tjXS50cmFuc2Zvcm0oYSwKYik7dGhpcy5ib3VuZHM9bnVsbH1yZXR1cm4gdGhpc30saW50ZXJzZWN0czpmdW5jdGlvbihhKXtmb3IodmFyIGI9ITEsYz0wLGQ9dGhpcy5jb21wb25lbnRzLmxlbmd0aDtjPGQmJiEoYj1hLmludGVyc2VjdHModGhpcy5jb21wb25lbnRzW2NdKSk7KytjKTtyZXR1cm4gYn0sZ2V0VmVydGljZXM6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPVtdLGM9MCxkPXRoaXMuY29tcG9uZW50cy5sZW5ndGg7YzxkOysrYylBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShiLHRoaXMuY29tcG9uZW50c1tjXS5nZXRWZXJ0aWNlcyhhKSk7cmV0dXJuIGJ9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuR2VvbWV0cnkuQ29sbGVjdGlvbiJ9KTtPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50PU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5HZW9tZXRyeSx7eDpudWxsLHk6bnVsbCxpbml0aWFsaXplOmZ1bmN0aW9uKGEsYil7T3BlbkxheWVycy5HZW9tZXRyeS5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy54PXBhcnNlRmxvYXQoYSk7dGhpcy55PXBhcnNlRmxvYXQoYil9LGNsb25lOmZ1bmN0aW9uKGEpe251bGw9PWEmJihhPW5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KHRoaXMueCx0aGlzLnkpKTtPcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyhhLHRoaXMpO3JldHVybiBhfSxjYWxjdWxhdGVCb3VuZHM6ZnVuY3Rpb24oKXt0aGlzLmJvdW5kcz1uZXcgT3BlbkxheWVycy5Cb3VuZHModGhpcy54LHRoaXMueSx0aGlzLngsdGhpcy55KX0sZGlzdGFuY2VUbzpmdW5jdGlvbihhLGIpe3ZhciBjPSEoYiYmITE9PT1iLmVkZ2UpJiZiJiZiLmRldGFpbHMsZCxlLGYsZyxoO2EgaW5zdGFuY2VvZgpPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50PyhlPXRoaXMueCxmPXRoaXMueSxnPWEueCxoPWEueSxkPU1hdGguc3FydChNYXRoLnBvdyhlLWcsMikrTWF0aC5wb3coZi1oLDIpKSxkPWM/e3gwOmUseTA6Zix4MTpnLHkxOmgsZGlzdGFuY2U6ZH06ZCk6KGQ9YS5kaXN0YW5jZVRvKHRoaXMsYiksYyYmKGQ9e3gwOmQueDEseTA6ZC55MSx4MTpkLngwLHkxOmQueTAsZGlzdGFuY2U6ZC5kaXN0YW5jZX0pKTtyZXR1cm4gZH0sZXF1YWxzOmZ1bmN0aW9uKGEpe3ZhciBiPSExO251bGwhPWEmJihiPXRoaXMueD09YS54JiZ0aGlzLnk9PWEueXx8aXNOYU4odGhpcy54KSYmaXNOYU4odGhpcy55KSYmaXNOYU4oYS54KSYmaXNOYU4oYS55KSk7cmV0dXJuIGJ9LHRvU2hvcnRTdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy54KyIsICIrdGhpcy55fSxtb3ZlOmZ1bmN0aW9uKGEsYil7dGhpcy54Kz1hO3RoaXMueSs9Yjt0aGlzLmNsZWFyQm91bmRzKCl9LHJvdGF0ZTpmdW5jdGlvbihhLGIpe2EqPQpNYXRoLlBJLzE4MDt2YXIgYz10aGlzLmRpc3RhbmNlVG8oYiksZD1hK01hdGguYXRhbjIodGhpcy55LWIueSx0aGlzLngtYi54KTt0aGlzLng9Yi54K2MqTWF0aC5jb3MoZCk7dGhpcy55PWIueStjKk1hdGguc2luKGQpO3RoaXMuY2xlYXJCb3VuZHMoKX0sZ2V0Q2VudHJvaWQ6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQodGhpcy54LHRoaXMueSl9LHJlc2l6ZTpmdW5jdGlvbihhLGIsYyl7dGhpcy54PWIueCthKih2b2lkIDA9PWM/MTpjKSoodGhpcy54LWIueCk7dGhpcy55PWIueSthKih0aGlzLnktYi55KTt0aGlzLmNsZWFyQm91bmRzKCk7cmV0dXJuIHRoaXN9LGludGVyc2VjdHM6ZnVuY3Rpb24oYSl7dmFyIGI9ITE7cmV0dXJuIGI9Ik9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQiPT1hLkNMQVNTX05BTUU/dGhpcy5lcXVhbHMoYSk6YS5pbnRlcnNlY3RzKHRoaXMpfSx0cmFuc2Zvcm06ZnVuY3Rpb24oYSxiKXthJiZiJiYoT3BlbkxheWVycy5Qcm9qZWN0aW9uLnRyYW5zZm9ybSh0aGlzLAphLGIpLHRoaXMuYm91bmRzPW51bGwpO3JldHVybiB0aGlzfSxnZXRWZXJ0aWNlczpmdW5jdGlvbihhKXtyZXR1cm5bdGhpc119LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQifSk7T3BlbkxheWVycy5HZW9tZXRyeS5NdWx0aVBvaW50PU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5HZW9tZXRyeS5Db2xsZWN0aW9uLHtjb21wb25lbnRUeXBlczpbIk9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQiXSxhZGRQb2ludDpmdW5jdGlvbihhLGIpe3RoaXMuYWRkQ29tcG9uZW50KGEsYil9LHJlbW92ZVBvaW50OmZ1bmN0aW9uKGEpe3RoaXMucmVtb3ZlQ29tcG9uZW50KGEpfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkdlb21ldHJ5Lk11bHRpUG9pbnQifSk7T3BlbkxheWVycy5HZW9tZXRyeS5DdXJ2ZT1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuR2VvbWV0cnkuTXVsdGlQb2ludCx7Y29tcG9uZW50VHlwZXM6WyJPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50Il0sZ2V0TGVuZ3RoOmZ1bmN0aW9uKCl7dmFyIGE9MDtpZih0aGlzLmNvbXBvbmVudHMmJjE8dGhpcy5jb21wb25lbnRzLmxlbmd0aClmb3IodmFyIGI9MSxjPXRoaXMuY29tcG9uZW50cy5sZW5ndGg7YjxjO2IrKylhKz10aGlzLmNvbXBvbmVudHNbYi0xXS5kaXN0YW5jZVRvKHRoaXMuY29tcG9uZW50c1tiXSk7cmV0dXJuIGF9LGdldEdlb2Rlc2ljTGVuZ3RoOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXM7aWYoYSl7dmFyIGM9bmV3IE9wZW5MYXllcnMuUHJvamVjdGlvbigiRVBTRzo0MzI2Iik7Yy5lcXVhbHMoYSl8fChiPXRoaXMuY2xvbmUoKS50cmFuc2Zvcm0oYSxjKSl9YT0wO2lmKGIuY29tcG9uZW50cyYmMTxiLmNvbXBvbmVudHMubGVuZ3RoKWZvcih2YXIgZCxlPTEsZj1iLmNvbXBvbmVudHMubGVuZ3RoO2U8CmY7ZSsrKWM9Yi5jb21wb25lbnRzW2UtMV0sZD1iLmNvbXBvbmVudHNbZV0sYSs9T3BlbkxheWVycy5VdGlsLmRpc3RWaW5jZW50eSh7bG9uOmMueCxsYXQ6Yy55fSx7bG9uOmQueCxsYXQ6ZC55fSk7cmV0dXJuIDFFMyphfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkdlb21ldHJ5LkN1cnZlIn0pO09wZW5MYXllcnMuR2VvbWV0cnkuTGluZVN0cmluZz1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuR2VvbWV0cnkuQ3VydmUse3JlbW92ZUNvbXBvbmVudDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNvbXBvbmVudHMmJjI8dGhpcy5jb21wb25lbnRzLmxlbmd0aDtiJiZPcGVuTGF5ZXJzLkdlb21ldHJ5LkNvbGxlY3Rpb24ucHJvdG90eXBlLnJlbW92ZUNvbXBvbmVudC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7cmV0dXJuIGJ9LGludGVyc2VjdHM6ZnVuY3Rpb24oYSl7dmFyIGI9ITEsYz1hLkNMQVNTX05BTUU7aWYoIk9wZW5MYXllcnMuR2VvbWV0cnkuTGluZVN0cmluZyI9PWN8fCJPcGVuTGF5ZXJzLkdlb21ldHJ5LkxpbmVhclJpbmciPT1jfHwiT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludCI9PWMpe3ZhciBkPXRoaXMuZ2V0U29ydGVkU2VnbWVudHMoKTthPSJPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50Ij09Yz9be3gxOmEueCx5MTphLnkseDI6YS54LHkyOmEueX1dOmEuZ2V0U29ydGVkU2VnbWVudHMoKTsKdmFyIGUsZixnLGgsayxsLG0scj0wLHA9ZC5sZW5ndGg7YTpmb3IoO3I8cDsrK3Ipe2M9ZFtyXTtlPWMueDE7Zj1jLngyO2c9Yy55MTtoPWMueTI7dmFyIG49MCxxPWEubGVuZ3RoO2Zvcig7bjxxOysrbil7az1hW25dO2lmKGsueDE+ZilicmVhaztpZighKGsueDI8ZXx8KGw9ay55MSxtPWsueTIsTWF0aC5taW4obCxtKT5NYXRoLm1heChnLGgpfHxNYXRoLm1heChsLG0pPE1hdGgubWluKGcsaCl8fCFPcGVuTGF5ZXJzLkdlb21ldHJ5LnNlZ21lbnRzSW50ZXJzZWN0KGMsaykpKSl7Yj0hMDticmVhayBhfX19fWVsc2UgYj1hLmludGVyc2VjdHModGhpcyk7cmV0dXJuIGJ9LGdldFNvcnRlZFNlZ21lbnRzOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPXRoaXMuY29tcG9uZW50cy5sZW5ndGgtMSxiPUFycmF5KGEpLGMsZCxlPTA7ZTxhOysrZSljPXRoaXMuY29tcG9uZW50c1tlXSxkPXRoaXMuY29tcG9uZW50c1tlKzFdLGJbZV09Yy54PGQueD97eDE6Yy54LHkxOmMueSx4MjpkLngseTI6ZC55fToKe3gxOmQueCx5MTpkLnkseDI6Yy54LHkyOmMueX07cmV0dXJuIGIuc29ydChmdW5jdGlvbihhLGIpe3JldHVybiBhLngxLWIueDF9KX0sc3BsaXRXaXRoU2VnbWVudDpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz0hKGImJiExPT09Yi5lZGdlKSxkPWImJmIudG9sZXJhbmNlLGU9W10sZj10aGlzLmdldFZlcnRpY2VzKCksZz1bXSxoPVtdLGs9ITEsbCxtLHIscD17cG9pbnQ6ITAsdG9sZXJhbmNlOmR9LG49bnVsbCxxPTAscz1mLmxlbmd0aC0yO3E8PXM7KytxKWlmKGQ9ZltxXSxnLnB1c2goZC5jbG9uZSgpKSxsPWZbcSsxXSxtPXt4MTpkLngseTE6ZC55LHgyOmwueCx5MjpsLnl9LG09T3BlbkxheWVycy5HZW9tZXRyeS5zZWdtZW50c0ludGVyc2VjdChhLG0scCksbSBpbnN0YW5jZW9mIE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQmJigocj1tLng9PT1hLngxJiZtLnk9PT1hLnkxfHxtLng9PT1hLngyJiZtLnk9PT1hLnkyfHxtLmVxdWFscyhkKXx8bS5lcXVhbHMobCk/ITA6ITEpfHxjKSltLmVxdWFscyhoW2gubGVuZ3RoLQoxXSl8fGgucHVzaChtLmNsb25lKCkpLDA9PT1xJiZtLmVxdWFscyhkKXx8bS5lcXVhbHMobCl8fChrPSEwLG0uZXF1YWxzKGQpfHxnLnB1c2gobSksZS5wdXNoKG5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LkxpbmVTdHJpbmcoZykpLGc9W20uY2xvbmUoKV0pO2smJihnLnB1c2gobC5jbG9uZSgpKSxlLnB1c2gobmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuTGluZVN0cmluZyhnKSkpO2lmKDA8aC5sZW5ndGgpdmFyIHQ9YS54MTxhLngyPzE6LTEsdT1hLnkxPGEueTI/MTotMSxuPXtsaW5lczplLHBvaW50czpoLnNvcnQoZnVuY3Rpb24oYSxiKXtyZXR1cm4gdCphLngtdCpiLnh8fHUqYS55LXUqYi55fSl9O3JldHVybiBufSxzcGxpdDpmdW5jdGlvbihhLGIpe3ZhciBjPW51bGwsZD1iJiZiLm11dHVhbCxlLGYsZyxoO2lmKGEgaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLkdlb21ldHJ5LkxpbmVTdHJpbmcpe3ZhciBrPXRoaXMuZ2V0VmVydGljZXMoKSxsLG0scixwLG4scT1bXTtnPVtdO2Zvcih2YXIgcz0KMCx0PWsubGVuZ3RoLTI7czw9dDsrK3Mpe2w9a1tzXTttPWtbcysxXTtyPXt4MTpsLngseTE6bC55LHgyOm0ueCx5MjptLnl9O2g9aHx8W2FdO2QmJnEucHVzaChsLmNsb25lKCkpO2Zvcih2YXIgdT0wO3U8aC5sZW5ndGg7Kyt1KWlmKHA9aFt1XS5zcGxpdFdpdGhTZWdtZW50KHIsYikpaWYobj1wLmxpbmVzLDA8bi5sZW5ndGgmJihuLnVuc2hpZnQodSwxKSxBcnJheS5wcm90b3R5cGUuc3BsaWNlLmFwcGx5KGgsbiksdSs9bi5sZW5ndGgtMiksZClmb3IodmFyIHY9MCx3PXAucG9pbnRzLmxlbmd0aDt2PHc7Kyt2KW49cC5wb2ludHNbdl0sbi5lcXVhbHMobCl8fChxLnB1c2gobiksZy5wdXNoKG5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LkxpbmVTdHJpbmcocSkpLHE9bi5lcXVhbHMobSk/W106W24uY2xvbmUoKV0pfWQmJigwPGcubGVuZ3RoJiYwPHEubGVuZ3RoKSYmKHEucHVzaChtLmNsb25lKCkpLGcucHVzaChuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5MaW5lU3RyaW5nKHEpKSl9ZWxzZSBjPQphLnNwbGl0V2l0aCh0aGlzLGIpO2gmJjE8aC5sZW5ndGg/Zj0hMDpoPVtdO2cmJjE8Zy5sZW5ndGg/ZT0hMDpnPVtdO2lmKGZ8fGUpYz1kP1tnLGhdOmg7cmV0dXJuIGN9LHNwbGl0V2l0aDpmdW5jdGlvbihhLGIpe3JldHVybiBhLnNwbGl0KHRoaXMsYil9LGdldFZlcnRpY2VzOmZ1bmN0aW9uKGEpe3JldHVybiEwPT09YT9bdGhpcy5jb21wb25lbnRzWzBdLHRoaXMuY29tcG9uZW50c1t0aGlzLmNvbXBvbmVudHMubGVuZ3RoLTFdXTohMT09PWE/dGhpcy5jb21wb25lbnRzLnNsaWNlKDEsdGhpcy5jb21wb25lbnRzLmxlbmd0aC0xKTp0aGlzLmNvbXBvbmVudHMuc2xpY2UoKX0sZGlzdGFuY2VUbzpmdW5jdGlvbihhLGIpe3ZhciBjPSEoYiYmITE9PT1iLmVkZ2UpJiZiJiZiLmRldGFpbHMsZCxlPXt9LGY9TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZO2lmKGEgaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KXtmb3IodmFyIGc9dGhpcy5nZXRTb3J0ZWRTZWdtZW50cygpLApoPWEueCxrPWEueSxsLG09MCxyPWcubGVuZ3RoO208cjsrK20paWYobD1nW21dLGQ9T3BlbkxheWVycy5HZW9tZXRyeS5kaXN0YW5jZVRvU2VnbWVudChhLGwpLGQuZGlzdGFuY2U8Zil7aWYoZj1kLmRpc3RhbmNlLGU9ZCwwPT09ZilicmVha31lbHNlIGlmKGwueDI+aCYmKGs+bC55MSYmazxsLnkyfHxrPGwueTEmJms+bC55MikpYnJlYWs7ZT1jP3tkaXN0YW5jZTplLmRpc3RhbmNlLHgwOmUueCx5MDplLnkseDE6aCx5MTprfTplLmRpc3RhbmNlfWVsc2UgaWYoYSBpbnN0YW5jZW9mIE9wZW5MYXllcnMuR2VvbWV0cnkuTGluZVN0cmluZyl7dmFyIGc9dGhpcy5nZXRTb3J0ZWRTZWdtZW50cygpLGg9YS5nZXRTb3J0ZWRTZWdtZW50cygpLHAsbixxPWgubGVuZ3RoLHM9e3BvaW50OiEwfSxtPTAscj1nLmxlbmd0aDthOmZvcig7bTxyOysrbSl7az1nW21dO2w9ay54MTtuPWsueTE7Zm9yKHZhciB0PTA7dDxxOysrdClpZihkPWhbdF0scD1PcGVuTGF5ZXJzLkdlb21ldHJ5LnNlZ21lbnRzSW50ZXJzZWN0KGssCmQscykpe2Y9MDtlPXtkaXN0YW5jZTowLHgwOnAueCx5MDpwLnkseDE6cC54LHkxOnAueX07YnJlYWsgYX1lbHNlIGQ9T3BlbkxheWVycy5HZW9tZXRyeS5kaXN0YW5jZVRvU2VnbWVudCh7eDpsLHk6bn0sZCksZC5kaXN0YW5jZTxmJiYoZj1kLmRpc3RhbmNlLGU9e2Rpc3RhbmNlOmYseDA6bCx5MDpuLHgxOmQueCx5MTpkLnl9KX1jfHwoZT1lLmRpc3RhbmNlKTswIT09ZiYmayYmKGQ9YS5kaXN0YW5jZVRvKG5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KGsueDIsay55MiksYiksbT1jP2QuZGlzdGFuY2U6ZCxtPGYmJihlPWM/e2Rpc3RhbmNlOmYseDA6ZC54MSx5MDpkLnkxLHgxOmQueDAseTE6ZC55MH06bSkpfWVsc2UgZT1hLmRpc3RhbmNlVG8odGhpcyxiKSxjJiYoZT17ZGlzdGFuY2U6ZS5kaXN0YW5jZSx4MDplLngxLHkwOmUueTEseDE6ZS54MCx5MTplLnkwfSk7cmV0dXJuIGV9LHNpbXBsaWZ5OmZ1bmN0aW9uKGEpe2lmKHRoaXMmJm51bGwhPT10aGlzKXt2YXIgYj10aGlzLmdldFZlcnRpY2VzKCk7CmlmKDM+Yi5sZW5ndGgpcmV0dXJuIHRoaXM7dmFyIGM9ZnVuY3Rpb24oYSxiLGQsayl7Zm9yKHZhciBsPTAsbT0wLHI9YixwO3I8ZDtyKyspe3A9YVtiXTt2YXIgbj1hW2RdLHE9YVtyXSxxPU1hdGguYWJzKDAuNSoocC54Km4ueStuLngqcS55K3EueCpwLnktbi54KnAueS1xLngqbi55LXAueCpxLnkpKTtwPU1hdGguc3FydChNYXRoLnBvdyhwLngtbi54LDIpK01hdGgucG93KHAueS1uLnksMikpO3A9MioocS9wKTtwPmwmJihsPXAsbT1yKX1sPmsmJm0hPWImJihlLnB1c2gobSksYyhhLGIsbSxrKSxjKGEsbSxkLGspKX0sZD1iLmxlbmd0aC0xLGU9W107ZS5wdXNoKDApO2ZvcihlLnB1c2goZCk7YlswXS5lcXVhbHMoYltkXSk7KWQtLSxlLnB1c2goZCk7YyhiLDAsZCxhKTthPVtdO2Uuc29ydChmdW5jdGlvbihhLGIpe3JldHVybiBhLWJ9KTtmb3IoZD0wO2Q8ZS5sZW5ndGg7ZCsrKWEucHVzaChiW2VbZF1dKTtyZXR1cm4gbmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuTGluZVN0cmluZyhhKX1yZXR1cm4gdGhpc30sCkNMQVNTX05BTUU6Ik9wZW5MYXllcnMuR2VvbWV0cnkuTGluZVN0cmluZyJ9KTtPcGVuTGF5ZXJzLkdlb21ldHJ5LkxpbmVhclJpbmc9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkdlb21ldHJ5LkxpbmVTdHJpbmcse2NvbXBvbmVudFR5cGVzOlsiT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludCJdLGFkZENvbXBvbmVudDpmdW5jdGlvbihhLGIpe3ZhciBjPSExLGQ9dGhpcy5jb21wb25lbnRzLnBvcCgpO251bGw9PWImJmEuZXF1YWxzKGQpfHwoYz1PcGVuTGF5ZXJzLkdlb21ldHJ5LkNvbGxlY3Rpb24ucHJvdG90eXBlLmFkZENvbXBvbmVudC5hcHBseSh0aGlzLGFyZ3VtZW50cykpO09wZW5MYXllcnMuR2VvbWV0cnkuQ29sbGVjdGlvbi5wcm90b3R5cGUuYWRkQ29tcG9uZW50LmFwcGx5KHRoaXMsW3RoaXMuY29tcG9uZW50c1swXV0pO3JldHVybiBjfSxyZW1vdmVDb21wb25lbnQ6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jb21wb25lbnRzJiYzPHRoaXMuY29tcG9uZW50cy5sZW5ndGg7YiYmKHRoaXMuY29tcG9uZW50cy5wb3AoKSxPcGVuTGF5ZXJzLkdlb21ldHJ5LkNvbGxlY3Rpb24ucHJvdG90eXBlLnJlbW92ZUNvbXBvbmVudC5hcHBseSh0aGlzLAphcmd1bWVudHMpLE9wZW5MYXllcnMuR2VvbWV0cnkuQ29sbGVjdGlvbi5wcm90b3R5cGUuYWRkQ29tcG9uZW50LmFwcGx5KHRoaXMsW3RoaXMuY29tcG9uZW50c1swXV0pKTtyZXR1cm4gYn0sbW92ZTpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz0wLGQ9dGhpcy5jb21wb25lbnRzLmxlbmd0aDtjPGQtMTtjKyspdGhpcy5jb21wb25lbnRzW2NdLm1vdmUoYSxiKX0scm90YXRlOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTAsZD10aGlzLmNvbXBvbmVudHMubGVuZ3RoO2M8ZC0xOysrYyl0aGlzLmNvbXBvbmVudHNbY10ucm90YXRlKGEsYil9LHJlc2l6ZTpmdW5jdGlvbihhLGIsYyl7Zm9yKHZhciBkPTAsZT10aGlzLmNvbXBvbmVudHMubGVuZ3RoO2Q8ZS0xOysrZCl0aGlzLmNvbXBvbmVudHNbZF0ucmVzaXplKGEsYixjKTtyZXR1cm4gdGhpc30sdHJhbnNmb3JtOmZ1bmN0aW9uKGEsYil7aWYoYSYmYil7Zm9yKHZhciBjPTAsZD10aGlzLmNvbXBvbmVudHMubGVuZ3RoO2M8ZC0xO2MrKyl0aGlzLmNvbXBvbmVudHNbY10udHJhbnNmb3JtKGEsCmIpO3RoaXMuYm91bmRzPW51bGx9cmV0dXJuIHRoaXN9LGdldENlbnRyb2lkOmZ1bmN0aW9uKCl7aWYodGhpcy5jb21wb25lbnRzKXt2YXIgYT10aGlzLmNvbXBvbmVudHMubGVuZ3RoO2lmKDA8YSYmMj49YSlyZXR1cm4gdGhpcy5jb21wb25lbnRzWzBdLmNsb25lKCk7aWYoMjxhKXt2YXIgYj0wLGM9MCxkPXRoaXMuY29tcG9uZW50c1swXS54LGU9dGhpcy5jb21wb25lbnRzWzBdLnksZj0tMSp0aGlzLmdldEFyZWEoKTtpZigwIT1mKXtmb3IodmFyIGc9MDtnPGEtMTtnKyspdmFyIGg9dGhpcy5jb21wb25lbnRzW2ddLGs9dGhpcy5jb21wb25lbnRzW2crMV0sYj1iKyhoLngray54LTIqZCkqKChoLngtZCkqKGsueS1lKS0oay54LWQpKihoLnktZSkpLGM9YysoaC55K2sueS0yKmUpKigoaC54LWQpKihrLnktZSktKGsueC1kKSooaC55LWUpKTtiPWQrYi8oNipmKTthPWUrYy8oNipmKX1lbHNle2ZvcihnPTA7ZzxhLTE7ZysrKWIrPXRoaXMuY29tcG9uZW50c1tnXS54LGMrPXRoaXMuY29tcG9uZW50c1tnXS55OwpiLz1hLTE7YT1jLyhhLTEpfXJldHVybiBuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludChiLGEpfXJldHVybiBudWxsfX0sZ2V0QXJlYTpmdW5jdGlvbigpe3ZhciBhPTA7aWYodGhpcy5jb21wb25lbnRzJiYyPHRoaXMuY29tcG9uZW50cy5sZW5ndGgpe2Zvcih2YXIgYj1hPTAsYz10aGlzLmNvbXBvbmVudHMubGVuZ3RoO2I8Yy0xO2IrKyl2YXIgZD10aGlzLmNvbXBvbmVudHNbYl0sZT10aGlzLmNvbXBvbmVudHNbYisxXSxhPWErKGQueCtlLngpKihlLnktZC55KTthPS1hLzJ9cmV0dXJuIGF9LGdldEdlb2Rlc2ljQXJlYTpmdW5jdGlvbihhKXt2YXIgYj10aGlzO2lmKGEpe3ZhciBjPW5ldyBPcGVuTGF5ZXJzLlByb2plY3Rpb24oIkVQU0c6NDMyNiIpO2MuZXF1YWxzKGEpfHwoYj10aGlzLmNsb25lKCkudHJhbnNmb3JtKGEsYykpfWE9MDtjPWIuY29tcG9uZW50cyYmYi5jb21wb25lbnRzLmxlbmd0aDtpZigyPGMpe2Zvcih2YXIgZCxlLGY9MDtmPGMtMTtmKyspZD1iLmNvbXBvbmVudHNbZl0sCmU9Yi5jb21wb25lbnRzW2YrMV0sYSs9T3BlbkxheWVycy5VdGlsLnJhZChlLngtZC54KSooMitNYXRoLnNpbihPcGVuTGF5ZXJzLlV0aWwucmFkKGQueSkpK01hdGguc2luKE9wZW5MYXllcnMuVXRpbC5yYWQoZS55KSkpO2E9NDA2ODA2MzE1OTA3NjkqYS8yfXJldHVybiBhfSxjb250YWluc1BvaW50OmZ1bmN0aW9uKGEpe3ZhciBiPU9wZW5MYXllcnMuTnVtYmVyLmxpbWl0U2lnRGlncyxjPWIoYS54LDE0KTthPWIoYS55LDE0KTtmb3IodmFyIGQ9dGhpcy5jb21wb25lbnRzLmxlbmd0aC0xLGUsZixnLGgsayxsPTAsbT0wO208ZDsrK20paWYoZT10aGlzLmNvbXBvbmVudHNbbV0sZz1iKGUueCwxNCksZT1iKGUueSwxNCksZj10aGlzLmNvbXBvbmVudHNbbSsxXSxoPWIoZi54LDE0KSxmPWIoZi55LDE0KSxlPT1mKXtpZihhPT1lJiYoZzw9aCYmYz49ZyYmYzw9aHx8Zz49aCYmYzw9ZyYmYz49aCkpe2w9LTE7YnJlYWt9fWVsc2V7az1iKChhLWYpKigoaC1nKS8oZi1lKSkraCwxNCk7aWYoaz09CmMmJihlPGYmJmE+PWUmJmE8PWZ8fGU+ZiYmYTw9ZSYmYT49Zikpe2w9LTE7YnJlYWt9azw9Y3x8ZyE9aCYmKGs8TWF0aC5taW4oZyxoKXx8az5NYXRoLm1heChnLGgpKXx8KGU8ZiYmYT49ZSYmYTxmfHxlPmYmJmE8ZSYmYT49ZikmJisrbH1yZXR1cm4tMT09bD8xOiEhKGwmMSl9LGludGVyc2VjdHM6ZnVuY3Rpb24oYSl7dmFyIGI9ITE7aWYoIk9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQiPT1hLkNMQVNTX05BTUUpYj10aGlzLmNvbnRhaW5zUG9pbnQoYSk7ZWxzZSBpZigiT3BlbkxheWVycy5HZW9tZXRyeS5MaW5lU3RyaW5nIj09YS5DTEFTU19OQU1FKWI9YS5pbnRlcnNlY3RzKHRoaXMpO2Vsc2UgaWYoIk9wZW5MYXllcnMuR2VvbWV0cnkuTGluZWFyUmluZyI9PWEuQ0xBU1NfTkFNRSliPU9wZW5MYXllcnMuR2VvbWV0cnkuTGluZVN0cmluZy5wcm90b3R5cGUuaW50ZXJzZWN0cy5hcHBseSh0aGlzLFthXSk7ZWxzZSBmb3IodmFyIGM9MCxkPWEuY29tcG9uZW50cy5sZW5ndGg7YzwKZCYmIShiPWEuY29tcG9uZW50c1tjXS5pbnRlcnNlY3RzKHRoaXMpKTsrK2MpO3JldHVybiBifSxnZXRWZXJ0aWNlczpmdW5jdGlvbihhKXtyZXR1cm4hMD09PWE/W106dGhpcy5jb21wb25lbnRzLnNsaWNlKDAsdGhpcy5jb21wb25lbnRzLmxlbmd0aC0xKX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5HZW9tZXRyeS5MaW5lYXJSaW5nIn0pO09wZW5MYXllcnMuTGF5ZXIuSFRUUFJlcXVlc3Q9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkxheWVyLHtVUkxfSEFTSF9GQUNUT1I6KE1hdGguc3FydCg1KS0xKS8yLHVybDpudWxsLHBhcmFtczpudWxsLHJlcHJvamVjdDohMSxpbml0aWFsaXplOmZ1bmN0aW9uKGEsYixjLGQpe09wZW5MYXllcnMuTGF5ZXIucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxbYSxkXSk7dGhpcy51cmw9Yjt0aGlzLnBhcmFtc3x8KHRoaXMucGFyYW1zPU9wZW5MYXllcnMuVXRpbC5leHRlbmQoe30sYykpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5wYXJhbXM9dGhpcy51cmw9bnVsbDtPcGVuTGF5ZXJzLkxheWVyLnByb3RvdHlwZS5kZXN0cm95LmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sY2xvbmU6ZnVuY3Rpb24oYSl7bnVsbD09YSYmKGE9bmV3IE9wZW5MYXllcnMuTGF5ZXIuSFRUUFJlcXVlc3QodGhpcy5uYW1lLHRoaXMudXJsLHRoaXMucGFyYW1zLHRoaXMuZ2V0T3B0aW9ucygpKSk7CnJldHVybiBhPU9wZW5MYXllcnMuTGF5ZXIucHJvdG90eXBlLmNsb25lLmFwcGx5KHRoaXMsW2FdKX0sc2V0VXJsOmZ1bmN0aW9uKGEpe3RoaXMudXJsPWF9LG1lcmdlTmV3UGFyYW1zOmZ1bmN0aW9uKGEpe3RoaXMucGFyYW1zPU9wZW5MYXllcnMuVXRpbC5leHRlbmQodGhpcy5wYXJhbXMsYSk7YT10aGlzLnJlZHJhdygpO251bGwhPXRoaXMubWFwJiZ0aGlzLm1hcC5ldmVudHMudHJpZ2dlckV2ZW50KCJjaGFuZ2VsYXllciIse2xheWVyOnRoaXMscHJvcGVydHk6InBhcmFtcyJ9KTtyZXR1cm4gYX0scmVkcmF3OmZ1bmN0aW9uKGEpe3JldHVybiBhP3RoaXMubWVyZ2VOZXdQYXJhbXMoe19vbFNhbHQ6TWF0aC5yYW5kb20oKX0pOk9wZW5MYXllcnMuTGF5ZXIucHJvdG90eXBlLnJlZHJhdy5hcHBseSh0aGlzLFtdKX0sc2VsZWN0VXJsOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTEsZD0wLGU9YS5sZW5ndGg7ZDxlO2QrKyljKj1hLmNoYXJDb2RlQXQoZCkqdGhpcy5VUkxfSEFTSF9GQUNUT1IsCmMtPU1hdGguZmxvb3IoYyk7cmV0dXJuIGJbTWF0aC5mbG9vcihjKmIubGVuZ3RoKV19LGdldEZ1bGxSZXF1ZXN0U3RyaW5nOmZ1bmN0aW9uKGEsYil7dmFyIGM9Ynx8dGhpcy51cmwsZD1PcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHt9LHRoaXMucGFyYW1zKSxkPU9wZW5MYXllcnMuVXRpbC5leHRlbmQoZCxhKSxlPU9wZW5MYXllcnMuVXRpbC5nZXRQYXJhbWV0ZXJTdHJpbmcoZCk7T3BlbkxheWVycy5VdGlsLmlzQXJyYXkoYykmJihjPXRoaXMuc2VsZWN0VXJsKGUsYykpO3ZhciBlPU9wZW5MYXllcnMuVXRpbC51cHBlckNhc2VPYmplY3QoT3BlbkxheWVycy5VdGlsLmdldFBhcmFtZXRlcnMoYykpLGY7Zm9yKGYgaW4gZClmLnRvVXBwZXJDYXNlKClpbiBlJiZkZWxldGUgZFtmXTtlPU9wZW5MYXllcnMuVXRpbC5nZXRQYXJhbWV0ZXJTdHJpbmcoZCk7cmV0dXJuIE9wZW5MYXllcnMuVXRpbC51cmxBcHBlbmQoYyxlKX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5MYXllci5IVFRQUmVxdWVzdCJ9KTtPcGVuTGF5ZXJzLlRpbGU9T3BlbkxheWVycy5DbGFzcyh7ZXZlbnRzOm51bGwsZXZlbnRMaXN0ZW5lcnM6bnVsbCxpZDpudWxsLGxheWVyOm51bGwsdXJsOm51bGwsYm91bmRzOm51bGwsc2l6ZTpudWxsLHBvc2l0aW9uOm51bGwsaXNMb2FkaW5nOiExLGluaXRpYWxpemU6ZnVuY3Rpb24oYSxiLGMsZCxlLGYpe3RoaXMubGF5ZXI9YTt0aGlzLnBvc2l0aW9uPWIuY2xvbmUoKTt0aGlzLnNldEJvdW5kcyhjKTt0aGlzLnVybD1kO2UmJih0aGlzLnNpemU9ZS5jbG9uZSgpKTt0aGlzLmlkPU9wZW5MYXllcnMuVXRpbC5jcmVhdGVVbmlxdWVJRCgiVGlsZV8iKTtPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHRoaXMsZik7dGhpcy5ldmVudHM9bmV3IE9wZW5MYXllcnMuRXZlbnRzKHRoaXMpO2lmKHRoaXMuZXZlbnRMaXN0ZW5lcnMgaW5zdGFuY2VvZiBPYmplY3QpdGhpcy5ldmVudHMub24odGhpcy5ldmVudExpc3RlbmVycyl9LHVubG9hZDpmdW5jdGlvbigpe3RoaXMuaXNMb2FkaW5nJiYodGhpcy5pc0xvYWRpbmc9CiExLHRoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgidW5sb2FkIikpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5wb3NpdGlvbj10aGlzLnNpemU9dGhpcy5ib3VuZHM9dGhpcy5sYXllcj1udWxsO3RoaXMuZXZlbnRMaXN0ZW5lcnMmJnRoaXMuZXZlbnRzLnVuKHRoaXMuZXZlbnRMaXN0ZW5lcnMpO3RoaXMuZXZlbnRzLmRlc3Ryb3koKTt0aGlzLmV2ZW50cz10aGlzLmV2ZW50TGlzdGVuZXJzPW51bGx9LGRyYXc6ZnVuY3Rpb24oYSl7YXx8dGhpcy5jbGVhcigpO3ZhciBiPXRoaXMuc2hvdWxkRHJhdygpO2ImJighYSYmITE9PT10aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoImJlZm9yZWRyYXciKSkmJihiPW51bGwpO3JldHVybiBifSxzaG91bGREcmF3OmZ1bmN0aW9uKCl7dmFyIGE9ITEsYj10aGlzLmxheWVyLm1heEV4dGVudDtpZihiKXt2YXIgYz10aGlzLmxheWVyLm1hcCxjPWMuYmFzZUxheWVyLndyYXBEYXRlTGluZSYmYy5nZXRNYXhFeHRlbnQoKTt0aGlzLmJvdW5kcy5pbnRlcnNlY3RzQm91bmRzKGIsCntpbmNsdXNpdmU6ITEsd29ybGRCb3VuZHM6Y30pJiYoYT0hMCl9cmV0dXJuIGF8fHRoaXMubGF5ZXIuZGlzcGxheU91dHNpZGVNYXhFeHRlbnR9LHNldEJvdW5kczpmdW5jdGlvbihhKXthPWEuY2xvbmUoKTtpZih0aGlzLmxheWVyLm1hcC5iYXNlTGF5ZXIud3JhcERhdGVMaW5lKXt2YXIgYj10aGlzLmxheWVyLm1hcC5nZXRNYXhFeHRlbnQoKSxjPXRoaXMubGF5ZXIubWFwLmdldFJlc29sdXRpb24oKTthPWEud3JhcERhdGVMaW5lKGIse2xlZnRUb2xlcmFuY2U6YyxyaWdodFRvbGVyYW5jZTpjfSl9dGhpcy5ib3VuZHM9YX0sbW92ZVRvOmZ1bmN0aW9uKGEsYixjKXtudWxsPT1jJiYoYz0hMCk7dGhpcy5zZXRCb3VuZHMoYSk7dGhpcy5wb3NpdGlvbj1iLmNsb25lKCk7YyYmdGhpcy5kcmF3KCl9LGNsZWFyOmZ1bmN0aW9uKGEpe30sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5UaWxlIn0pO09wZW5MYXllcnMuVGlsZS5JbWFnZT1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuVGlsZSx7dXJsOm51bGwsaW1nRGl2Om51bGwsZnJhbWU6bnVsbCxpbWFnZVJlbG9hZEF0dGVtcHRzOm51bGwsbGF5ZXJBbHBoYUhhY2s6bnVsbCxhc3luY1JlcXVlc3RJZDpudWxsLG1heEdldFVybExlbmd0aDpudWxsLGNhbnZhc0NvbnRleHQ6bnVsbCxjcm9zc09yaWdpbktleXdvcmQ6bnVsbCxpbml0aWFsaXplOmZ1bmN0aW9uKGEsYixjLGQsZSxmKXtPcGVuTGF5ZXJzLlRpbGUucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMudXJsPWQ7dGhpcy5sYXllckFscGhhSGFjaz10aGlzLmxheWVyLmFscGhhJiZPcGVuTGF5ZXJzLlV0aWwuYWxwaGFIYWNrKCk7aWYobnVsbCE9dGhpcy5tYXhHZXRVcmxMZW5ndGh8fHRoaXMubGF5ZXIuZ3V0dGVyfHx0aGlzLmxheWVyQWxwaGFIYWNrKXRoaXMuZnJhbWU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2IiksdGhpcy5mcmFtZS5zdHlsZS5wb3NpdGlvbj0KImFic29sdXRlIix0aGlzLmZyYW1lLnN0eWxlLm92ZXJmbG93PSJoaWRkZW4iO251bGwhPXRoaXMubWF4R2V0VXJsTGVuZ3RoJiZPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHRoaXMsT3BlbkxheWVycy5UaWxlLkltYWdlLklGcmFtZSl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmltZ0RpdiYmKHRoaXMuY2xlYXIoKSx0aGlzLmZyYW1lPXRoaXMuaW1nRGl2PW51bGwpO3RoaXMuYXN5bmNSZXF1ZXN0SWQ9bnVsbDtPcGVuTGF5ZXJzLlRpbGUucHJvdG90eXBlLmRlc3Ryb3kuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxkcmF3OmZ1bmN0aW9uKCl7dmFyIGE9T3BlbkxheWVycy5UaWxlLnByb3RvdHlwZS5kcmF3LmFwcGx5KHRoaXMsYXJndW1lbnRzKTthPyh0aGlzLmxheWVyIT10aGlzLmxheWVyLm1hcC5iYXNlTGF5ZXImJnRoaXMubGF5ZXIucmVwcm9qZWN0JiYodGhpcy5ib3VuZHM9dGhpcy5nZXRCb3VuZHNGcm9tQmFzZUxheWVyKHRoaXMucG9zaXRpb24pKSx0aGlzLmlzTG9hZGluZz90aGlzLl9sb2FkRXZlbnQ9CiJyZWxvYWQiOih0aGlzLmlzTG9hZGluZz0hMCx0aGlzLl9sb2FkRXZlbnQ9ImxvYWRzdGFydCIpLHRoaXMucmVuZGVyVGlsZSgpLHRoaXMucG9zaXRpb25UaWxlKCkpOiExPT09YSYmdGhpcy51bmxvYWQoKTtyZXR1cm4gYX0scmVuZGVyVGlsZTpmdW5jdGlvbigpe2lmKHRoaXMubGF5ZXIuYXN5bmMpe3ZhciBhPXRoaXMuYXN5bmNSZXF1ZXN0SWQ9KHRoaXMuYXN5bmNSZXF1ZXN0SWR8fDApKzE7dGhpcy5sYXllci5nZXRVUkxhc3luYyh0aGlzLmJvdW5kcyxmdW5jdGlvbihiKXthPT10aGlzLmFzeW5jUmVxdWVzdElkJiYodGhpcy51cmw9Yix0aGlzLmluaXRJbWFnZSgpKX0sdGhpcyl9ZWxzZSB0aGlzLnVybD10aGlzLmxheWVyLmdldFVSTCh0aGlzLmJvdW5kcyksdGhpcy5pbml0SW1hZ2UoKX0scG9zaXRpb25UaWxlOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5nZXRUaWxlKCkuc3R5bGUsYj10aGlzLmZyYW1lP3RoaXMuc2l6ZTp0aGlzLmxheWVyLmdldEltYWdlU2l6ZSh0aGlzLmJvdW5kcyksCmM9MTt0aGlzLmxheWVyIGluc3RhbmNlb2YgT3BlbkxheWVycy5MYXllci5HcmlkJiYoYz10aGlzLmxheWVyLmdldFNlcnZlclJlc29sdXRpb24oKS90aGlzLmxheWVyLm1hcC5nZXRSZXNvbHV0aW9uKCkpO2EubGVmdD10aGlzLnBvc2l0aW9uLngrInB4IjthLnRvcD10aGlzLnBvc2l0aW9uLnkrInB4IjthLndpZHRoPU1hdGgucm91bmQoYypiLncpKyJweCI7YS5oZWlnaHQ9TWF0aC5yb3VuZChjKmIuaCkrInB4In0sY2xlYXI6ZnVuY3Rpb24oKXtPcGVuTGF5ZXJzLlRpbGUucHJvdG90eXBlLmNsZWFyLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt2YXIgYT10aGlzLmltZ0RpdjtpZihhKXt2YXIgYj10aGlzLmdldFRpbGUoKTtiLnBhcmVudE5vZGU9PT10aGlzLmxheWVyLmRpdiYmdGhpcy5sYXllci5kaXYucmVtb3ZlQ2hpbGQoYik7dGhpcy5zZXRJbWdTcmMoKTshMD09PXRoaXMubGF5ZXJBbHBoYUhhY2smJihhLnN0eWxlLmZpbHRlcj0iIik7T3BlbkxheWVycy5FbGVtZW50LnJlbW92ZUNsYXNzKGEsCiJvbEltYWdlTG9hZEVycm9yIil9dGhpcy5jYW52YXNDb250ZXh0PW51bGx9LGdldEltYWdlOmZ1bmN0aW9uKCl7aWYoIXRoaXMuaW1nRGl2KXt0aGlzLmltZ0Rpdj1PcGVuTGF5ZXJzLlRpbGUuSW1hZ2UuSU1BR0UuY2xvbmVOb2RlKCExKTt2YXIgYT10aGlzLmltZ0Rpdi5zdHlsZTtpZih0aGlzLmZyYW1lKXt2YXIgYj0wLGM9MDt0aGlzLmxheWVyLmd1dHRlciYmKGI9MTAwKih0aGlzLmxheWVyLmd1dHRlci90aGlzLmxheWVyLnRpbGVTaXplLncpLGM9MTAwKih0aGlzLmxheWVyLmd1dHRlci90aGlzLmxheWVyLnRpbGVTaXplLmgpKTthLmxlZnQ9LWIrIiUiO2EudG9wPS1jKyIlIjthLndpZHRoPTIqYisxMDArIiUiO2EuaGVpZ2h0PTIqYysxMDArIiUifWEudmlzaWJpbGl0eT0iaGlkZGVuIjthLm9wYWNpdHk9MDsxPnRoaXMubGF5ZXIub3BhY2l0eSYmKGEuZmlsdGVyPSJhbHBoYShvcGFjaXR5PSIrMTAwKnRoaXMubGF5ZXIub3BhY2l0eSsiKSIpO2EucG9zaXRpb249ImFic29sdXRlIjsKdGhpcy5sYXllckFscGhhSGFjayYmKGEucGFkZGluZ1RvcD1hLmhlaWdodCxhLmhlaWdodD0iMCIsYS53aWR0aD0iMTAwJSIpO3RoaXMuZnJhbWUmJnRoaXMuZnJhbWUuYXBwZW5kQ2hpbGQodGhpcy5pbWdEaXYpfXJldHVybiB0aGlzLmltZ0Rpdn0sc2V0SW1hZ2U6ZnVuY3Rpb24oYSl7dGhpcy5pbWdEaXY9YX0saW5pdEltYWdlOmZ1bmN0aW9uKCl7aWYodGhpcy51cmx8fHRoaXMuaW1nRGl2KXt0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoImJlZm9yZWxvYWQiKTt0aGlzLmxheWVyLmRpdi5hcHBlbmRDaGlsZCh0aGlzLmdldFRpbGUoKSk7dGhpcy5ldmVudHMudHJpZ2dlckV2ZW50KHRoaXMuX2xvYWRFdmVudCk7dmFyIGE9dGhpcy5nZXRJbWFnZSgpLGI9YS5nZXRBdHRyaWJ1dGUoInNyYyIpfHwiIjt0aGlzLnVybCYmT3BlbkxheWVycy5VdGlsLmlzRXF1aXZhbGVudFVybChiLHRoaXMudXJsKT90aGlzLl9sb2FkVGltZW91dD13aW5kb3cuc2V0VGltZW91dChPcGVuTGF5ZXJzLkZ1bmN0aW9uLmJpbmQodGhpcy5vbkltYWdlTG9hZCwKdGhpcyksMCk6KHRoaXMuc3RvcExvYWRpbmcoKSx0aGlzLmNyb3NzT3JpZ2luS2V5d29yZCYmYS5yZW1vdmVBdHRyaWJ1dGUoImNyb3Nzb3JpZ2luIiksT3BlbkxheWVycy5FdmVudC5vYnNlcnZlKGEsImxvYWQiLE9wZW5MYXllcnMuRnVuY3Rpb24uYmluZCh0aGlzLm9uSW1hZ2VMb2FkLHRoaXMpKSxPcGVuTGF5ZXJzLkV2ZW50Lm9ic2VydmUoYSwiZXJyb3IiLE9wZW5MYXllcnMuRnVuY3Rpb24uYmluZCh0aGlzLm9uSW1hZ2VFcnJvcix0aGlzKSksdGhpcy5pbWFnZVJlbG9hZEF0dGVtcHRzPTAsdGhpcy5zZXRJbWdTcmModGhpcy51cmwpKX1lbHNlIHRoaXMuaXNMb2FkaW5nPSExfSxzZXRJbWdTcmM6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5pbWdEaXY7YT8oYi5zdHlsZS52aXNpYmlsaXR5PSJoaWRkZW4iLGIuc3R5bGUub3BhY2l0eT0wLHRoaXMuY3Jvc3NPcmlnaW5LZXl3b3JkJiYoImRhdGE6IiE9PWEuc3Vic3RyKDAsNSk/Yi5zZXRBdHRyaWJ1dGUoImNyb3Nzb3JpZ2luIix0aGlzLmNyb3NzT3JpZ2luS2V5d29yZCk6CmIucmVtb3ZlQXR0cmlidXRlKCJjcm9zc29yaWdpbiIpKSxiLnNyYz1hKToodGhpcy5zdG9wTG9hZGluZygpLHRoaXMuaW1nRGl2PW51bGwsYi5wYXJlbnROb2RlJiZiLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYikpfSxnZXRUaWxlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZnJhbWU/dGhpcy5mcmFtZTp0aGlzLmdldEltYWdlKCl9LGNyZWF0ZUJhY2tCdWZmZXI6ZnVuY3Rpb24oKXtpZih0aGlzLmltZ0RpdiYmIXRoaXMuaXNMb2FkaW5nKXt2YXIgYTt0aGlzLmZyYW1lPyhhPXRoaXMuZnJhbWUuY2xvbmVOb2RlKCExKSxhLmFwcGVuZENoaWxkKHRoaXMuaW1nRGl2KSk6YT10aGlzLmltZ0Rpdjt0aGlzLmltZ0Rpdj1udWxsO3JldHVybiBhfX0sb25JbWFnZUxvYWQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmltZ0Rpdjt0aGlzLnN0b3BMb2FkaW5nKCk7YS5zdHlsZS52aXNpYmlsaXR5PSJpbmhlcml0IjthLnN0eWxlLm9wYWNpdHk9dGhpcy5sYXllci5vcGFjaXR5O3RoaXMuaXNMb2FkaW5nPQohMTt0aGlzLmNhbnZhc0NvbnRleHQ9bnVsbDt0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoImxvYWRlbmQiKTshMD09PXRoaXMubGF5ZXJBbHBoYUhhY2smJihhLnN0eWxlLmZpbHRlcj0icHJvZ2lkOkRYSW1hZ2VUcmFuc2Zvcm0uTWljcm9zb2Z0LkFscGhhSW1hZ2VMb2FkZXIoc3JjPSciK2Euc3JjKyInLCBzaXppbmdNZXRob2Q9J3NjYWxlJykiKX0sb25JbWFnZUVycm9yOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5pbWdEaXY7bnVsbCE9YS5zcmMmJih0aGlzLmltYWdlUmVsb2FkQXR0ZW1wdHMrKyx0aGlzLmltYWdlUmVsb2FkQXR0ZW1wdHM8PU9wZW5MYXllcnMuSU1BR0VfUkVMT0FEX0FUVEVNUFRTP3RoaXMuc2V0SW1nU3JjKHRoaXMubGF5ZXIuZ2V0VVJMKHRoaXMuYm91bmRzKSk6KE9wZW5MYXllcnMuRWxlbWVudC5hZGRDbGFzcyhhLCJvbEltYWdlTG9hZEVycm9yIiksdGhpcy5ldmVudHMudHJpZ2dlckV2ZW50KCJsb2FkZXJyb3IiKSx0aGlzLm9uSW1hZ2VMb2FkKCkpKX0sc3RvcExvYWRpbmc6ZnVuY3Rpb24oKXtPcGVuTGF5ZXJzLkV2ZW50LnN0b3BPYnNlcnZpbmdFbGVtZW50KHRoaXMuaW1nRGl2KTsKd2luZG93LmNsZWFyVGltZW91dCh0aGlzLl9sb2FkVGltZW91dCk7ZGVsZXRlIHRoaXMuX2xvYWRUaW1lb3V0fSxnZXRDYW52YXNDb250ZXh0OmZ1bmN0aW9uKCl7aWYoT3BlbkxheWVycy5DQU5WQVNfU1VQUE9SVEVEJiZ0aGlzLmltZ0RpdiYmIXRoaXMuaXNMb2FkaW5nKXtpZighdGhpcy5jYW52YXNDb250ZXh0KXt2YXIgYT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJjYW52YXMiKTthLndpZHRoPXRoaXMuc2l6ZS53O2EuaGVpZ2h0PXRoaXMuc2l6ZS5oO3RoaXMuY2FudmFzQ29udGV4dD1hLmdldENvbnRleHQoIjJkIik7dGhpcy5jYW52YXNDb250ZXh0LmRyYXdJbWFnZSh0aGlzLmltZ0RpdiwwLDApfXJldHVybiB0aGlzLmNhbnZhc0NvbnRleHR9fSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLlRpbGUuSW1hZ2UifSk7Ck9wZW5MYXllcnMuVGlsZS5JbWFnZS5JTUFHRT1mdW5jdGlvbigpe3ZhciBhPW5ldyBJbWFnZTthLmNsYXNzTmFtZT0ib2xUaWxlSW1hZ2UiO2EuZ2FsbGVyeUltZz0ibm8iO3JldHVybiBhfSgpO09wZW5MYXllcnMuTGF5ZXIuR3JpZD1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuTGF5ZXIuSFRUUFJlcXVlc3Qse3RpbGVTaXplOm51bGwsdGlsZU9yaWdpbkNvcm5lcjoiYmwiLHRpbGVPcmlnaW46bnVsbCx0aWxlT3B0aW9uczpudWxsLHRpbGVDbGFzczpPcGVuTGF5ZXJzLlRpbGUuSW1hZ2UsZ3JpZDpudWxsLHNpbmdsZVRpbGU6ITEscmF0aW86MS41LGJ1ZmZlcjowLHRyYW5zaXRpb25FZmZlY3Q6InJlc2l6ZSIsbnVtTG9hZGluZ1RpbGVzOjAsc2VydmVyUmVzb2x1dGlvbnM6bnVsbCxsb2FkaW5nOiExLGJhY2tCdWZmZXI6bnVsbCxncmlkUmVzb2x1dGlvbjpudWxsLGJhY2tCdWZmZXJSZXNvbHV0aW9uOm51bGwsYmFja0J1ZmZlckxvbkxhdDpudWxsLGJhY2tCdWZmZXJUaW1lcklkOm51bGwscmVtb3ZlQmFja0J1ZmZlckRlbGF5Om51bGwsY2xhc3NOYW1lOm51bGwsZ3JpZExheW91dDpudWxsLHJvd1NpZ246bnVsbCx0cmFuc2l0aW9uZW5kRXZlbnRzOlsidHJhbnNpdGlvbmVuZCIsCiJ3ZWJraXRUcmFuc2l0aW9uRW5kIiwib3RyYW5zaXRpb25lbmQiLCJvVHJhbnNpdGlvbkVuZCJdLGluaXRpYWxpemU6ZnVuY3Rpb24oYSxiLGMsZCl7T3BlbkxheWVycy5MYXllci5IVFRQUmVxdWVzdC5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5ncmlkPVtdO3RoaXMuX3JlbW92ZUJhY2tCdWZmZXI9T3BlbkxheWVycy5GdW5jdGlvbi5iaW5kKHRoaXMucmVtb3ZlQmFja0J1ZmZlcix0aGlzKTt0aGlzLmluaXRQcm9wZXJ0aWVzKCk7dGhpcy5yb3dTaWduPSJ0Ij09PXRoaXMudGlsZU9yaWdpbkNvcm5lci5zdWJzdHIoMCwxKT8xOi0xfSxpbml0UHJvcGVydGllczpmdW5jdGlvbigpe3ZvaWQgMD09PXRoaXMub3B0aW9ucy5yZW1vdmVCYWNrQnVmZmVyRGVsYXkmJih0aGlzLnJlbW92ZUJhY2tCdWZmZXJEZWxheT10aGlzLnNpbmdsZVRpbGU/MDoyNTAwKTt2b2lkIDA9PT10aGlzLm9wdGlvbnMuY2xhc3NOYW1lJiYodGhpcy5jbGFzc05hbWU9dGhpcy5zaW5nbGVUaWxlPwoib2xMYXllckdyaWRTaW5nbGVUaWxlIjoib2xMYXllckdyaWQiKX0sc2V0TWFwOmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuTGF5ZXIuSFRUUFJlcXVlc3QucHJvdG90eXBlLnNldE1hcC5jYWxsKHRoaXMsYSk7T3BlbkxheWVycy5FbGVtZW50LmFkZENsYXNzKHRoaXMuZGl2LHRoaXMuY2xhc3NOYW1lKX0scmVtb3ZlTWFwOmZ1bmN0aW9uKGEpe3RoaXMucmVtb3ZlQmFja0J1ZmZlcigpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5yZW1vdmVCYWNrQnVmZmVyKCk7dGhpcy5jbGVhckdyaWQoKTt0aGlzLnRpbGVTaXplPXRoaXMuZ3JpZD1udWxsO09wZW5MYXllcnMuTGF5ZXIuSFRUUFJlcXVlc3QucHJvdG90eXBlLmRlc3Ryb3kuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxjbGVhckdyaWQ6ZnVuY3Rpb24oKXtpZih0aGlzLmdyaWQpe2Zvcih2YXIgYT0wLGI9dGhpcy5ncmlkLmxlbmd0aDthPGI7YSsrKWZvcih2YXIgYz10aGlzLmdyaWRbYV0sZD0wLGU9Yy5sZW5ndGg7ZDxlO2QrKyl0aGlzLmRlc3Ryb3lUaWxlKGNbZF0pOwp0aGlzLmdyaWQ9W107dGhpcy5ncmlkTGF5b3V0PXRoaXMuZ3JpZFJlc29sdXRpb249bnVsbH19LGFkZE9wdGlvbnM6ZnVuY3Rpb24oYSxiKXt2YXIgYz12b2lkIDAhPT1hLnNpbmdsZVRpbGUmJmEuc2luZ2xlVGlsZSE9PXRoaXMuc2luZ2xlVGlsZTtPcGVuTGF5ZXJzLkxheWVyLkhUVFBSZXF1ZXN0LnByb3RvdHlwZS5hZGRPcHRpb25zLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLm1hcCYmYyYmKHRoaXMuaW5pdFByb3BlcnRpZXMoKSx0aGlzLmNsZWFyR3JpZCgpLHRoaXMudGlsZVNpemU9dGhpcy5vcHRpb25zLnRpbGVTaXplLHRoaXMuc2V0VGlsZVNpemUoKSx0aGlzLm1vdmVUbyhudWxsLCEwKSl9LGNsb25lOmZ1bmN0aW9uKGEpe251bGw9PWEmJihhPW5ldyBPcGVuTGF5ZXJzLkxheWVyLkdyaWQodGhpcy5uYW1lLHRoaXMudXJsLHRoaXMucGFyYW1zLHRoaXMuZ2V0T3B0aW9ucygpKSk7YT1PcGVuTGF5ZXJzLkxheWVyLkhUVFBSZXF1ZXN0LnByb3RvdHlwZS5jbG9uZS5hcHBseSh0aGlzLApbYV0pO251bGwhPXRoaXMudGlsZVNpemUmJihhLnRpbGVTaXplPXRoaXMudGlsZVNpemUuY2xvbmUoKSk7YS5ncmlkPVtdO2EuZ3JpZFJlc29sdXRpb249bnVsbDthLmJhY2tCdWZmZXI9bnVsbDthLmJhY2tCdWZmZXJUaW1lcklkPW51bGw7YS5sb2FkaW5nPSExO2EubnVtTG9hZGluZ1RpbGVzPTA7cmV0dXJuIGF9LG1vdmVUbzpmdW5jdGlvbihhLGIsYyl7T3BlbkxheWVycy5MYXllci5IVFRQUmVxdWVzdC5wcm90b3R5cGUubW92ZVRvLmFwcGx5KHRoaXMsYXJndW1lbnRzKTthPWF8fHRoaXMubWFwLmdldEV4dGVudCgpO2lmKG51bGwhPWEpe3ZhciBkPSF0aGlzLmdyaWQubGVuZ3RofHxiLGU9dGhpcy5nZXRUaWxlc0JvdW5kcygpLGY9dGhpcy5tYXAuZ2V0UmVzb2x1dGlvbigpO3RoaXMuZ2V0U2VydmVyUmVzb2x1dGlvbihmKTtpZih0aGlzLnNpbmdsZVRpbGUpe2lmKGR8fCFjJiYhZS5jb250YWluc0JvdW5kcyhhKSliJiYicmVzaXplIiE9PXRoaXMudHJhbnNpdGlvbkVmZmVjdCYmCnRoaXMucmVtb3ZlQmFja0J1ZmZlcigpLGImJiJyZXNpemUiIT09dGhpcy50cmFuc2l0aW9uRWZmZWN0fHx0aGlzLmFwcGx5QmFja0J1ZmZlcihmKSx0aGlzLmluaXRTaW5nbGVUaWxlKGEpfWVsc2UoZD1kfHwhZS5pbnRlcnNlY3RzQm91bmRzKGEse3dvcmxkQm91bmRzOnRoaXMubWFwLmJhc2VMYXllci53cmFwRGF0ZUxpbmUmJnRoaXMubWFwLmdldE1heEV4dGVudCgpfSkpPyghYnx8InJlc2l6ZSIhPT10aGlzLnRyYW5zaXRpb25FZmZlY3QmJnRoaXMuZ3JpZFJlc29sdXRpb24hPT1mfHx0aGlzLmFwcGx5QmFja0J1ZmZlcihmKSx0aGlzLmluaXRHcmlkZGVkVGlsZXMoYSkpOnRoaXMubW92ZUdyaWRkZWRUaWxlcygpfX0sZ2V0VGlsZURhdGE6ZnVuY3Rpb24oYSl7dmFyIGI9bnVsbCxjPWEubG9uLGQ9YS5sYXQsZT10aGlzLmdyaWQubGVuZ3RoO2lmKHRoaXMubWFwJiZlKXt2YXIgZj10aGlzLm1hcC5nZXRSZXNvbHV0aW9uKCk7YT10aGlzLnRpbGVTaXplLnc7dmFyIGc9dGhpcy50aWxlU2l6ZS5oLApoPXRoaXMuZ3JpZFswXVswXS5ib3VuZHMsaz1oLmxlZnQsaD1oLnRvcDtpZihjPGsmJnRoaXMubWFwLmJhc2VMYXllci53cmFwRGF0ZUxpbmUpdmFyIGw9dGhpcy5tYXAuZ2V0TWF4RXh0ZW50KCkuZ2V0V2lkdGgoKSxtPU1hdGguY2VpbCgoay1jKS9sKSxjPWMrbCptO2M9KGMtaykvKGYqYSk7ZD0oaC1kKS8oZipnKTtmPU1hdGguZmxvb3IoYyk7az1NYXRoLmZsb29yKGQpOzA8PWsmJms8ZSYmKGU9dGhpcy5ncmlkW2tdW2ZdKSYmKGI9e3RpbGU6ZSxpOk1hdGguZmxvb3IoKGMtZikqYSksajpNYXRoLmZsb29yKChkLWspKmcpfSl9cmV0dXJuIGJ9LGRlc3Ryb3lUaWxlOmZ1bmN0aW9uKGEpe3RoaXMucmVtb3ZlVGlsZU1vbml0b3JpbmdIb29rcyhhKTthLmRlc3Ryb3koKX0sZ2V0U2VydmVyUmVzb2x1dGlvbjpmdW5jdGlvbihhKXt2YXIgYj1OdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk7YT1hfHx0aGlzLm1hcC5nZXRSZXNvbHV0aW9uKCk7aWYodGhpcy5zZXJ2ZXJSZXNvbHV0aW9ucyYmCi0xPT09T3BlbkxheWVycy5VdGlsLmluZGV4T2YodGhpcy5zZXJ2ZXJSZXNvbHV0aW9ucyxhKSl7dmFyIGMsZCxlLGY7Zm9yKGM9dGhpcy5zZXJ2ZXJSZXNvbHV0aW9ucy5sZW5ndGgtMTswPD1jO2MtLSl7ZT10aGlzLnNlcnZlclJlc29sdXRpb25zW2NdO2Q9TWF0aC5hYnMoZS1hKTtpZihkPmIpYnJlYWs7Yj1kO2Y9ZX1hPWZ9cmV0dXJuIGF9LGdldFNlcnZlclpvb206ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmdldFNlcnZlclJlc29sdXRpb24oKTtyZXR1cm4gdGhpcy5zZXJ2ZXJSZXNvbHV0aW9ucz9PcGVuTGF5ZXJzLlV0aWwuaW5kZXhPZih0aGlzLnNlcnZlclJlc29sdXRpb25zLGEpOnRoaXMubWFwLmdldFpvb21Gb3JSZXNvbHV0aW9uKGEpKyh0aGlzLnpvb21PZmZzZXR8fDApfSxhcHBseUJhY2tCdWZmZXI6ZnVuY3Rpb24oYSl7bnVsbCE9PXRoaXMuYmFja0J1ZmZlclRpbWVySWQmJnRoaXMucmVtb3ZlQmFja0J1ZmZlcigpO3ZhciBiPXRoaXMuYmFja0J1ZmZlcjtpZighYil7Yj0KdGhpcy5jcmVhdGVCYWNrQnVmZmVyKCk7aWYoIWIpcmV0dXJuO2E9PT10aGlzLmdyaWRSZXNvbHV0aW9uP3RoaXMuZGl2Lmluc2VydEJlZm9yZShiLHRoaXMuZGl2LmZpcnN0Q2hpbGQpOnRoaXMubWFwLmJhc2VMYXllci5kaXYucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoYix0aGlzLm1hcC5iYXNlTGF5ZXIuZGl2KTt0aGlzLmJhY2tCdWZmZXI9Yjt2YXIgYz10aGlzLmdyaWRbMF1bMF0uYm91bmRzO3RoaXMuYmFja0J1ZmZlckxvbkxhdD17bG9uOmMubGVmdCxsYXQ6Yy50b3B9O3RoaXMuYmFja0J1ZmZlclJlc29sdXRpb249dGhpcy5ncmlkUmVzb2x1dGlvbn1mb3IodmFyIGM9dGhpcy5iYWNrQnVmZmVyUmVzb2x1dGlvbi9hLGQ9Yi5jaGlsZE5vZGVzLGUsZj1kLmxlbmd0aC0xOzA8PWY7LS1mKWU9ZFtmXSxlLnN0eWxlLnRvcD0oYyplLl9pKmUuX2h8MCkrInB4IixlLnN0eWxlLmxlZnQ9KGMqZS5faiplLl93fDApKyJweCIsZS5zdHlsZS53aWR0aD1NYXRoLnJvdW5kKGMqZS5fdykrCiJweCIsZS5zdHlsZS5oZWlnaHQ9TWF0aC5yb3VuZChjKmUuX2gpKyJweCI7YT10aGlzLmdldFZpZXdQb3J0UHhGcm9tTG9uTGF0KHRoaXMuYmFja0J1ZmZlckxvbkxhdCxhKTtjPXRoaXMubWFwLmxheWVyQ29udGFpbmVyT3JpZ2luUHgueTtiLnN0eWxlLmxlZnQ9TWF0aC5yb3VuZChhLngtdGhpcy5tYXAubGF5ZXJDb250YWluZXJPcmlnaW5QeC54KSsicHgiO2Iuc3R5bGUudG9wPU1hdGgucm91bmQoYS55LWMpKyJweCJ9LGNyZWF0ZUJhY2tCdWZmZXI6ZnVuY3Rpb24oKXt2YXIgYTtpZigwPHRoaXMuZ3JpZC5sZW5ndGgpe2E9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7YS5pZD10aGlzLmRpdi5pZCsiX2JiIjthLmNsYXNzTmFtZT0ib2xCYWNrQnVmZmVyIjthLnN0eWxlLnBvc2l0aW9uPSJhYnNvbHV0ZSI7dmFyIGI9dGhpcy5tYXA7YS5zdHlsZS56SW5kZXg9InJlc2l6ZSI9PT10aGlzLnRyYW5zaXRpb25FZmZlY3Q/dGhpcy5nZXRaSW5kZXgoKS0xOmIuWl9JTkRFWF9CQVNFLkJhc2VMYXllci0KKGIuZ2V0TnVtTGF5ZXJzKCktYi5nZXRMYXllckluZGV4KHRoaXMpKTtmb3IodmFyIGI9MCxjPXRoaXMuZ3JpZC5sZW5ndGg7YjxjO2IrKylmb3IodmFyIGQ9MCxlPXRoaXMuZ3JpZFtiXS5sZW5ndGg7ZDxlO2QrKyl7dmFyIGY9dGhpcy5ncmlkW2JdW2RdLGc9dGhpcy5ncmlkW2JdW2RdLmNyZWF0ZUJhY2tCdWZmZXIoKTtnJiYoZy5faT1iLGcuX2o9ZCxnLl93PWYuc2l6ZS53LGcuX2g9Zi5zaXplLmgsZy5pZD1mLmlkKyJfYmIiLGEuYXBwZW5kQ2hpbGQoZykpfX1yZXR1cm4gYX0scmVtb3ZlQmFja0J1ZmZlcjpmdW5jdGlvbigpe2lmKHRoaXMuX3RyYW5zaXRpb25FbGVtZW50KXtmb3IodmFyIGE9dGhpcy50cmFuc2l0aW9uZW5kRXZlbnRzLmxlbmd0aC0xOzA8PWE7LS1hKU9wZW5MYXllcnMuRXZlbnQuc3RvcE9ic2VydmluZyh0aGlzLl90cmFuc2l0aW9uRWxlbWVudCx0aGlzLnRyYW5zaXRpb25lbmRFdmVudHNbYV0sdGhpcy5fcmVtb3ZlQmFja0J1ZmZlcik7ZGVsZXRlIHRoaXMuX3RyYW5zaXRpb25FbGVtZW50fXRoaXMuYmFja0J1ZmZlciYmCih0aGlzLmJhY2tCdWZmZXIucGFyZW50Tm9kZSYmdGhpcy5iYWNrQnVmZmVyLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5iYWNrQnVmZmVyKSx0aGlzLmJhY2tCdWZmZXJSZXNvbHV0aW9uPXRoaXMuYmFja0J1ZmZlcj1udWxsLG51bGwhPT10aGlzLmJhY2tCdWZmZXJUaW1lcklkJiYod2luZG93LmNsZWFyVGltZW91dCh0aGlzLmJhY2tCdWZmZXJUaW1lcklkKSx0aGlzLmJhY2tCdWZmZXJUaW1lcklkPW51bGwpKX0sbW92ZUJ5UHg6ZnVuY3Rpb24oYSxiKXt0aGlzLnNpbmdsZVRpbGV8fHRoaXMubW92ZUdyaWRkZWRUaWxlcygpfSxzZXRUaWxlU2l6ZTpmdW5jdGlvbihhKXt0aGlzLnNpbmdsZVRpbGUmJihhPXRoaXMubWFwLmdldFNpemUoKSxhLmg9cGFyc2VJbnQoYS5oKnRoaXMucmF0aW8sMTApLGEudz1wYXJzZUludChhLncqdGhpcy5yYXRpbywxMCkpO09wZW5MYXllcnMuTGF5ZXIuSFRUUFJlcXVlc3QucHJvdG90eXBlLnNldFRpbGVTaXplLmFwcGx5KHRoaXMsW2FdKX0sZ2V0VGlsZXNCb3VuZHM6ZnVuY3Rpb24oKXt2YXIgYT0KbnVsbCxiPXRoaXMuZ3JpZC5sZW5ndGg7aWYoYil2YXIgYT10aGlzLmdyaWRbYi0xXVswXS5ib3VuZHMsYj10aGlzLmdyaWRbMF0ubGVuZ3RoKmEuZ2V0V2lkdGgoKSxjPXRoaXMuZ3JpZC5sZW5ndGgqYS5nZXRIZWlnaHQoKSxhPW5ldyBPcGVuTGF5ZXJzLkJvdW5kcyhhLmxlZnQsYS5ib3R0b20sYS5sZWZ0K2IsYS5ib3R0b20rYyk7cmV0dXJuIGF9LGluaXRTaW5nbGVUaWxlOmZ1bmN0aW9uKGEpe3RoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgicmV0aWxlIik7dmFyIGI9YS5nZXRDZW50ZXJMb25MYXQoKSxjPWEuZ2V0V2lkdGgoKSp0aGlzLnJhdGlvO2E9YS5nZXRIZWlnaHQoKSp0aGlzLnJhdGlvO2I9bmV3IE9wZW5MYXllcnMuQm91bmRzKGIubG9uLWMvMixiLmxhdC1hLzIsYi5sb24rYy8yLGIubGF0K2EvMik7Yz10aGlzLm1hcC5nZXRMYXllclB4RnJvbUxvbkxhdCh7bG9uOmIubGVmdCxsYXQ6Yi50b3B9KTt0aGlzLmdyaWQubGVuZ3RofHwodGhpcy5ncmlkWzBdPVtdKTsoYT10aGlzLmdyaWRbMF1bMF0pPwphLm1vdmVUbyhiLGMpOihhPXRoaXMuYWRkVGlsZShiLGMpLHRoaXMuYWRkVGlsZU1vbml0b3JpbmdIb29rcyhhKSxhLmRyYXcoKSx0aGlzLmdyaWRbMF1bMF09YSk7dGhpcy5yZW1vdmVFeGNlc3NUaWxlcygxLDEpO3RoaXMuZ3JpZFJlc29sdXRpb249dGhpcy5nZXRTZXJ2ZXJSZXNvbHV0aW9uKCl9LGNhbGN1bGF0ZUdyaWRMYXlvdXQ6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWMqdGhpcy50aWxlU2l6ZS53O2MqPXRoaXMudGlsZVNpemUuaDt2YXIgZT1NYXRoLmZsb29yKChhLmxlZnQtYi5sb24pL2QpLXRoaXMuYnVmZmVyLGY9dGhpcy5yb3dTaWduO2E9TWF0aFt+Zj8iZmxvb3IiOiJjZWlsIl0oZiooYi5sYXQtYS50b3ArYykvYyktdGhpcy5idWZmZXIqZjtyZXR1cm57dGlsZWxvbjpkLHRpbGVsYXQ6YyxzdGFydGNvbDplLHN0YXJ0cm93OmF9fSxnZXRUaWxlT3JpZ2luOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy50aWxlT3JpZ2luO2lmKCFhKXZhciBhPXRoaXMuZ2V0TWF4RXh0ZW50KCksCmI9e3RsOlsibGVmdCIsInRvcCJdLHRyOlsicmlnaHQiLCJ0b3AiXSxibDpbImxlZnQiLCJib3R0b20iXSxicjpbInJpZ2h0IiwiYm90dG9tIl19W3RoaXMudGlsZU9yaWdpbkNvcm5lcl0sYT1uZXcgT3BlbkxheWVycy5Mb25MYXQoYVtiWzBdXSxhW2JbMV1dKTtyZXR1cm4gYX0sZ2V0VGlsZUJvdW5kc0ZvckdyaWRJbmRleDpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuZ2V0VGlsZU9yaWdpbigpLGQ9dGhpcy5ncmlkTGF5b3V0LGU9ZC50aWxlbG9uLGY9ZC50aWxlbGF0LGc9ZC5zdGFydGNvbCxkPWQuc3RhcnRyb3csaD10aGlzLnJvd1NpZ247cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLkJvdW5kcyhjLmxvbisoZytiKSplLGMubGF0LShkK2EqaCkqZipoLGMubG9uKyhnK2IrMSkqZSxjLmxhdC0oZCsoYS0xKSpoKSpmKmgpfSxpbml0R3JpZGRlZFRpbGVzOmZ1bmN0aW9uKGEpe3RoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgicmV0aWxlIik7dmFyIGI9dGhpcy5tYXAuZ2V0U2l6ZSgpLGM9dGhpcy5nZXRUaWxlT3JpZ2luKCksCmQ9dGhpcy5tYXAuZ2V0UmVzb2x1dGlvbigpLGU9dGhpcy5nZXRTZXJ2ZXJSZXNvbHV0aW9uKCksZj1kL2UsZD10aGlzLnRpbGVTaXplLncvZixmPXRoaXMudGlsZVNpemUuaC9mLGc9TWF0aC5jZWlsKGIuaC9mKSsyKnRoaXMuYnVmZmVyKzEsYj1NYXRoLmNlaWwoYi53L2QpKzIqdGhpcy5idWZmZXIrMTt0aGlzLmdyaWRMYXlvdXQ9ZT10aGlzLmNhbGN1bGF0ZUdyaWRMYXlvdXQoYSxjLGUpO3ZhciBjPWUudGlsZWxvbixoPWUudGlsZWxhdCxlPXRoaXMubWFwLmxheWVyQ29udGFpbmVyT3JpZ2luUHgueCxrPXRoaXMubWFwLmxheWVyQ29udGFpbmVyT3JpZ2luUHgueSxsPXRoaXMuZ2V0VGlsZUJvdW5kc0ZvckdyaWRJbmRleCgwLDApLG09dGhpcy5tYXAuZ2V0Vmlld1BvcnRQeEZyb21Mb25MYXQobmV3IE9wZW5MYXllcnMuTG9uTGF0KGwubGVmdCxsLnRvcCkpO20ueD1NYXRoLnJvdW5kKG0ueCktZTttLnk9TWF0aC5yb3VuZChtLnkpLWs7dmFyIGU9W10saz10aGlzLm1hcC5nZXRDZW50ZXIoKSwKcj0wO2Rve3ZhciBwPXRoaXMuZ3JpZFtyXTtwfHwocD1bXSx0aGlzLmdyaWQucHVzaChwKSk7dmFyIG49MDtkb3t2YXIgbD10aGlzLmdldFRpbGVCb3VuZHNGb3JHcmlkSW5kZXgocixuKSxxPW0uY2xvbmUoKTtxLngrPW4qTWF0aC5yb3VuZChkKTtxLnkrPXIqTWF0aC5yb3VuZChmKTt2YXIgcz1wW25dO3M/cy5tb3ZlVG8obCxxLCExKToocz10aGlzLmFkZFRpbGUobCxxKSx0aGlzLmFkZFRpbGVNb25pdG9yaW5nSG9va3MocykscC5wdXNoKHMpKTtxPWwuZ2V0Q2VudGVyTG9uTGF0KCk7ZS5wdXNoKHt0aWxlOnMsZGlzdGFuY2U6TWF0aC5wb3cocS5sb24tay5sb24sMikrTWF0aC5wb3cocS5sYXQtay5sYXQsMil9KTtuKz0xfXdoaWxlKGwucmlnaHQ8PWEucmlnaHQrYyp0aGlzLmJ1ZmZlcnx8bjxiKTtyKz0xfXdoaWxlKGwuYm90dG9tPj1hLmJvdHRvbS1oKnRoaXMuYnVmZmVyfHxyPGcpO3RoaXMucmVtb3ZlRXhjZXNzVGlsZXMocixuKTt0aGlzLmdyaWRSZXNvbHV0aW9uPWQ9dGhpcy5nZXRTZXJ2ZXJSZXNvbHV0aW9uKCk7CmUuc29ydChmdW5jdGlvbihhLGIpe3JldHVybiBhLmRpc3RhbmNlLWIuZGlzdGFuY2V9KTthPTA7Zm9yKGQ9ZS5sZW5ndGg7YTxkOysrYSllW2FdLnRpbGUuZHJhdygpfSxnZXRNYXhFeHRlbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tYXhFeHRlbnR9LGFkZFRpbGU6ZnVuY3Rpb24oYSxiKXt2YXIgYz1uZXcgdGhpcy50aWxlQ2xhc3ModGhpcyxiLGEsbnVsbCx0aGlzLnRpbGVTaXplLHRoaXMudGlsZU9wdGlvbnMpO3RoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgiYWRkdGlsZSIse3RpbGU6Y30pO3JldHVybiBjfSxhZGRUaWxlTW9uaXRvcmluZ0hvb2tzOmZ1bmN0aW9uKGEpe2Eub25Mb2FkU3RhcnQ9ZnVuY3Rpb24oKXshMT09PXRoaXMubG9hZGluZyYmKHRoaXMubG9hZGluZz0hMCx0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoImxvYWRzdGFydCIpKTt0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoInRpbGVsb2Fkc3RhcnQiLHt0aWxlOmF9KTt0aGlzLm51bUxvYWRpbmdUaWxlcysrOwohdGhpcy5zaW5nbGVUaWxlJiYodGhpcy5iYWNrQnVmZmVyJiZ0aGlzLmdyaWRSZXNvbHV0aW9uPT09dGhpcy5iYWNrQnVmZmVyUmVzb2x1dGlvbikmJk9wZW5MYXllcnMuRWxlbWVudC5hZGRDbGFzcyhhLmdldFRpbGUoKSwib2xUaWxlUmVwbGFjaW5nIil9O2Eub25Mb2FkRW5kPWZ1bmN0aW9uKGIpe3RoaXMubnVtTG9hZGluZ1RpbGVzLS07Yj0idW5sb2FkIj09PWIudHlwZTt0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoInRpbGVsb2FkZWQiLHt0aWxlOmEsYWJvcnRlZDpifSk7aWYoIXRoaXMuc2luZ2xlVGlsZSYmIWImJnRoaXMuYmFja0J1ZmZlciYmdGhpcy5ncmlkUmVzb2x1dGlvbj09PXRoaXMuYmFja0J1ZmZlclJlc29sdXRpb24pe3ZhciBjPWEuZ2V0VGlsZSgpO2lmKCJub25lIj09PU9wZW5MYXllcnMuRWxlbWVudC5nZXRTdHlsZShjLCJkaXNwbGF5Iikpe3ZhciBkPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGEuaWQrIl9iYiIpO2QmJmQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChkKX1PcGVuTGF5ZXJzLkVsZW1lbnQucmVtb3ZlQ2xhc3MoYywKIm9sVGlsZVJlcGxhY2luZyIpfWlmKDA9PT10aGlzLm51bUxvYWRpbmdUaWxlcyl7aWYodGhpcy5iYWNrQnVmZmVyKWlmKDA9PT10aGlzLmJhY2tCdWZmZXIuY2hpbGROb2Rlcy5sZW5ndGgpdGhpcy5yZW1vdmVCYWNrQnVmZmVyKCk7ZWxzZXt0aGlzLl90cmFuc2l0aW9uRWxlbWVudD1iP3RoaXMuZGl2Lmxhc3RDaGlsZDphLmltZ0RpdjtiPXRoaXMudHJhbnNpdGlvbmVuZEV2ZW50cztmb3IoYz1iLmxlbmd0aC0xOzA8PWM7LS1jKU9wZW5MYXllcnMuRXZlbnQub2JzZXJ2ZSh0aGlzLl90cmFuc2l0aW9uRWxlbWVudCxiW2NdLHRoaXMuX3JlbW92ZUJhY2tCdWZmZXIpO3RoaXMuYmFja0J1ZmZlclRpbWVySWQ9d2luZG93LnNldFRpbWVvdXQodGhpcy5fcmVtb3ZlQmFja0J1ZmZlcix0aGlzLnJlbW92ZUJhY2tCdWZmZXJEZWxheSl9dGhpcy5sb2FkaW5nPSExO3RoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgibG9hZGVuZCIpfX07YS5vbkxvYWRFcnJvcj1mdW5jdGlvbigpe3RoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgidGlsZWVycm9yIiwKe3RpbGU6YX0pfTthLmV2ZW50cy5vbih7bG9hZHN0YXJ0OmEub25Mb2FkU3RhcnQsbG9hZGVuZDphLm9uTG9hZEVuZCx1bmxvYWQ6YS5vbkxvYWRFbmQsbG9hZGVycm9yOmEub25Mb2FkRXJyb3Isc2NvcGU6dGhpc30pfSxyZW1vdmVUaWxlTW9uaXRvcmluZ0hvb2tzOmZ1bmN0aW9uKGEpe2EudW5sb2FkKCk7YS5ldmVudHMudW4oe2xvYWRzdGFydDphLm9uTG9hZFN0YXJ0LGxvYWRlbmQ6YS5vbkxvYWRFbmQsdW5sb2FkOmEub25Mb2FkRW5kLGxvYWRlcnJvcjphLm9uTG9hZEVycm9yLHNjb3BlOnRoaXN9KX0sbW92ZUdyaWRkZWRUaWxlczpmdW5jdGlvbigpe2Zvcih2YXIgYT10aGlzLmJ1ZmZlcisxOzspe3ZhciBiPXRoaXMuZ3JpZFswXVswXSxjPWIucG9zaXRpb24ueCt0aGlzLm1hcC5sYXllckNvbnRhaW5lck9yaWdpblB4LngsYj1iLnBvc2l0aW9uLnkrdGhpcy5tYXAubGF5ZXJDb250YWluZXJPcmlnaW5QeC55LGQ9dGhpcy5nZXRTZXJ2ZXJSZXNvbHV0aW9uKCkvdGhpcy5tYXAuZ2V0UmVzb2x1dGlvbigpLApkPXt3Ok1hdGgucm91bmQodGhpcy50aWxlU2l6ZS53KmQpLGg6TWF0aC5yb3VuZCh0aGlzLnRpbGVTaXplLmgqZCl9O2lmKGM+LWQudyooYS0xKSl0aGlzLnNoaWZ0Q29sdW1uKCEwLGQpO2Vsc2UgaWYoYzwtZC53KmEpdGhpcy5zaGlmdENvbHVtbighMSxkKTtlbHNlIGlmKGI+LWQuaCooYS0xKSl0aGlzLnNoaWZ0Um93KCEwLGQpO2Vsc2UgaWYoYjwtZC5oKmEpdGhpcy5zaGlmdFJvdyghMSxkKTtlbHNlIGJyZWFrfX0sc2hpZnRSb3c6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmdyaWQsZD1hPzA6Yy5sZW5ndGgtMSxlPWE/LTE6MTt0aGlzLmdyaWRMYXlvdXQuc3RhcnRyb3crPWUqdGhpcy5yb3dTaWduO2Zvcih2YXIgZj1jW2RdLGc9Y1thPyJwb3AiOiJzaGlmdCJdKCksaD0wLGs9Zy5sZW5ndGg7aDxrO2grKyl7dmFyIGw9Z1toXSxtPWZbaF0ucG9zaXRpb24uY2xvbmUoKTttLnkrPWIuaCplO2wubW92ZVRvKHRoaXMuZ2V0VGlsZUJvdW5kc0ZvckdyaWRJbmRleChkLGgpLG0pfWNbYT8KInVuc2hpZnQiOiJwdXNoIl0oZyl9LHNoaWZ0Q29sdW1uOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5ncmlkLGQ9YT8wOmNbMF0ubGVuZ3RoLTEsZT1hPy0xOjE7dGhpcy5ncmlkTGF5b3V0LnN0YXJ0Y29sKz1lO2Zvcih2YXIgZj0wLGc9Yy5sZW5ndGg7ZjxnO2YrKyl7dmFyIGg9Y1tmXSxrPWhbZF0ucG9zaXRpb24uY2xvbmUoKSxsPWhbYT8icG9wIjoic2hpZnQiXSgpO2sueCs9Yi53KmU7bC5tb3ZlVG8odGhpcy5nZXRUaWxlQm91bmRzRm9yR3JpZEluZGV4KGYsZCksayk7aFthPyJ1bnNoaWZ0IjoicHVzaCJdKGwpfX0scmVtb3ZlRXhjZXNzVGlsZXM6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGMsZDt0aGlzLmdyaWQubGVuZ3RoPmE7KXt2YXIgZT10aGlzLmdyaWQucG9wKCk7Yz0wO2ZvcihkPWUubGVuZ3RoO2M8ZDtjKyspe3ZhciBmPWVbY107dGhpcy5kZXN0cm95VGlsZShmKX19Yz0wO2ZvcihkPXRoaXMuZ3JpZC5sZW5ndGg7YzxkO2MrKylmb3IoO3RoaXMuZ3JpZFtjXS5sZW5ndGg+CmI7KWU9dGhpcy5ncmlkW2NdLGY9ZS5wb3AoKSx0aGlzLmRlc3Ryb3lUaWxlKGYpfSxvbk1hcFJlc2l6ZTpmdW5jdGlvbigpe3RoaXMuc2luZ2xlVGlsZSYmKHRoaXMuY2xlYXJHcmlkKCksdGhpcy5zZXRUaWxlU2l6ZSgpKX0sZ2V0VGlsZUJvdW5kczpmdW5jdGlvbihhKXt2YXIgYj10aGlzLm1heEV4dGVudCxjPXRoaXMuZ2V0UmVzb2x1dGlvbigpLGQ9Yyp0aGlzLnRpbGVTaXplLncsYz1jKnRoaXMudGlsZVNpemUuaCxlPXRoaXMuZ2V0TG9uTGF0RnJvbVZpZXdQb3J0UHgoYSk7YT1iLmxlZnQrZCpNYXRoLmZsb29yKChlLmxvbi1iLmxlZnQpL2QpO2I9Yi5ib3R0b20rYypNYXRoLmZsb29yKChlLmxhdC1iLmJvdHRvbSkvYyk7cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLkJvdW5kcyhhLGIsYStkLGIrYyl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuTGF5ZXIuR3JpZCJ9KTtPcGVuTGF5ZXJzLkxheWVyLlhZWj1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuTGF5ZXIuR3JpZCx7aXNCYXNlTGF5ZXI6ITAsc3BoZXJpY2FsTWVyY2F0b3I6ITEsem9vbU9mZnNldDowLHNlcnZlclJlc29sdXRpb25zOm51bGwsaW5pdGlhbGl6ZTpmdW5jdGlvbihhLGIsYyl7aWYoYyYmYy5zcGhlcmljYWxNZXJjYXRvcnx8dGhpcy5zcGhlcmljYWxNZXJjYXRvciljPU9wZW5MYXllcnMuVXRpbC5leHRlbmQoe3Byb2plY3Rpb246IkVQU0c6OTAwOTEzIixudW1ab29tTGV2ZWxzOjE5fSxjKTtPcGVuTGF5ZXJzLkxheWVyLkdyaWQucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxbYXx8dGhpcy5uYW1lLGJ8fHRoaXMudXJsLHt9LGNdKX0sY2xvbmU6ZnVuY3Rpb24oYSl7bnVsbD09YSYmKGE9bmV3IE9wZW5MYXllcnMuTGF5ZXIuWFlaKHRoaXMubmFtZSx0aGlzLnVybCx0aGlzLmdldE9wdGlvbnMoKSkpO3JldHVybiBhPU9wZW5MYXllcnMuTGF5ZXIuR3JpZC5wcm90b3R5cGUuY2xvbmUuYXBwbHkodGhpcywKW2FdKX0sZ2V0VVJMOmZ1bmN0aW9uKGEpe2E9dGhpcy5nZXRYWVooYSk7dmFyIGI9dGhpcy51cmw7T3BlbkxheWVycy5VdGlsLmlzQXJyYXkoYikmJihiPXRoaXMuc2VsZWN0VXJsKCIiK2EueCthLnkrYS56LGIpKTtyZXR1cm4gT3BlbkxheWVycy5TdHJpbmcuZm9ybWF0KGIsYSl9LGdldFhZWjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmdldFNlcnZlclJlc29sdXRpb24oKSxjPU1hdGgucm91bmQoKGEubGVmdC10aGlzLm1heEV4dGVudC5sZWZ0KS8oYip0aGlzLnRpbGVTaXplLncpKTthPU1hdGgucm91bmQoKHRoaXMubWF4RXh0ZW50LnRvcC1hLnRvcCkvKGIqdGhpcy50aWxlU2l6ZS5oKSk7Yj10aGlzLmdldFNlcnZlclpvb20oKTtpZih0aGlzLndyYXBEYXRlTGluZSl2YXIgZD1NYXRoLnBvdygyLGIpLGM9KGMlZCtkKSVkO3JldHVybnt4OmMseTphLHo6Yn19LHNldE1hcDpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLkxheWVyLkdyaWQucHJvdG90eXBlLnNldE1hcC5hcHBseSh0aGlzLAphcmd1bWVudHMpO3RoaXMudGlsZU9yaWdpbnx8KHRoaXMudGlsZU9yaWdpbj1uZXcgT3BlbkxheWVycy5Mb25MYXQodGhpcy5tYXhFeHRlbnQubGVmdCx0aGlzLm1heEV4dGVudC5ib3R0b20pKX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5MYXllci5YWVoifSk7T3BlbkxheWVycy5MYXllci5PU009T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkxheWVyLlhZWix7bmFtZToiT3BlblN0cmVldE1hcCIsdXJsOlsiaHR0cDovL2EudGlsZS5vcGVuc3RyZWV0bWFwLm9yZy8ke3p9LyR7eH0vJHt5fS5wbmciLCJodHRwOi8vYi50aWxlLm9wZW5zdHJlZXRtYXAub3JnLyR7en0vJHt4fS8ke3l9LnBuZyIsImh0dHA6Ly9jLnRpbGUub3BlbnN0cmVldG1hcC5vcmcvJHt6fS8ke3h9LyR7eX0ucG5nIl0sYXR0cmlidXRpb246IiZjb3B5OyA8YSBocmVmPSdodHRwOi8vd3d3Lm9wZW5zdHJlZXRtYXAub3JnL2NvcHlyaWdodCc+T3BlblN0cmVldE1hcDwvYT4gY29udHJpYnV0b3JzIixzcGhlcmljYWxNZXJjYXRvcjohMCx3cmFwRGF0ZUxpbmU6ITAsdGlsZU9wdGlvbnM6bnVsbCxpbml0aWFsaXplOmZ1bmN0aW9uKGEsYixjKXtPcGVuTGF5ZXJzLkxheWVyLlhZWi5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy50aWxlT3B0aW9ucz0KT3BlbkxheWVycy5VdGlsLmV4dGVuZCh7Y3Jvc3NPcmlnaW5LZXl3b3JkOiJhbm9ueW1vdXMifSx0aGlzLm9wdGlvbnMmJnRoaXMub3B0aW9ucy50aWxlT3B0aW9ucyl9LGNsb25lOmZ1bmN0aW9uKGEpe251bGw9PWEmJihhPW5ldyBPcGVuTGF5ZXJzLkxheWVyLk9TTSh0aGlzLm5hbWUsdGhpcy51cmwsdGhpcy5nZXRPcHRpb25zKCkpKTtyZXR1cm4gYT1PcGVuTGF5ZXJzLkxheWVyLlhZWi5wcm90b3R5cGUuY2xvbmUuYXBwbHkodGhpcyxbYV0pfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkxheWVyLk9TTSJ9KTtPcGVuTGF5ZXJzLkxheWVyLkJpbmc9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkxheWVyLlhZWix7a2V5Om51bGwsc2VydmVyUmVzb2x1dGlvbnM6WzE1NjU0My4wMzM5MDYyNSw3ODI3MS41MTY5NTMxMjUsMzkxMzUuNzU4NDc2NTYyNSwxOTU2Ny44NzkyMzgyODEyNSw5NzgzLjkzOTYxOTE0MDYyNSw0ODkxLjk2OTgwOTU3MDMxMjUsMjQ0NS45ODQ5MDQ3ODUxNTYyLDEyMjIuOTkyNDUyMzkyNTc4MSw2MTEuNDk2MjI2MTk2Mjg5MSwzMDUuNzQ4MTEzMDk4MTQ0NTMsMTUyLjg3NDA1NjU0OTA3MjI2LDc2LjQzNzAyODI3NDUzNjEzLDM4LjIxODUxNDEzNzI2ODA2NiwxOS4xMDkyNTcwNjg2MzQwMzMsOS41NTQ2Mjg1MzQzMTcwMTcsNC43NzczMTQyNjcxNTg1MDgsMi4zODg2NTcxMzM1NzkyNTQsMS4xOTQzMjg1NjY3ODk2MjcsMC41OTcxNjQyODMzOTQ4MTM1LDAuMjk4NTgyMTQxNjk3NDA2NzcsMC4xNDkyOTEwNzA4NDg3MDMzOCwwLjA3NDY0NTUzNTQyNDM1MTY5XSxhdHRyaWJ1dGlvblRlbXBsYXRlOic8c3BhbiBjbGFzcz0ib2xCaW5nQXR0cmlidXRpb24gJHt0eXBlfSI+PGRpdj48YSB0YXJnZXQ9Il9ibGFuayIgaHJlZj0iaHR0cDovL3d3dy5iaW5nLmNvbS9tYXBzLyI+PGltZyBzcmM9IiR7bG9nb30iIC8+PC9hPjwvZGl2PiR7Y29weXJpZ2h0c308YSBzdHlsZT0id2hpdGUtc3BhY2U6IG5vd3JhcCIgdGFyZ2V0PSJfYmxhbmsiIGhyZWY9Imh0dHA6Ly93d3cubWljcm9zb2Z0LmNvbS9tYXBzL3Byb2R1Y3QvdGVybXMuaHRtbCI+VGVybXMgb2YgVXNlPC9hPjwvc3Bhbj4nLAptZXRhZGF0YTpudWxsLHByb3RvY29sUmVnZXg6L15odHRwOi9pLHR5cGU6IlJvYWQiLGN1bHR1cmU6ImVuLVVTIixtZXRhZGF0YVBhcmFtczpudWxsLHRpbGVPcHRpb25zOm51bGwscHJvdG9jb2w6fndpbmRvdy5sb2NhdGlvbi5ocmVmLmluZGV4T2YoImh0dHAiKT8iIjoiaHR0cDoiLGluaXRpYWxpemU6ZnVuY3Rpb24oYSl7YT1PcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyh7c3BoZXJpY2FsTWVyY2F0b3I6ITB9LGEpO09wZW5MYXllcnMuTGF5ZXIuWFlaLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsW2EubmFtZXx8IkJpbmcgIisoYS50eXBlfHx0aGlzLnR5cGUpLG51bGwsYV0pO3RoaXMudGlsZU9wdGlvbnM9T3BlbkxheWVycy5VdGlsLmV4dGVuZCh7Y3Jvc3NPcmlnaW5LZXl3b3JkOiJhbm9ueW1vdXMifSx0aGlzLm9wdGlvbnMudGlsZU9wdGlvbnMpO3RoaXMubG9hZE1ldGFkYXRhKCl9LGxvYWRNZXRhZGF0YTpmdW5jdGlvbigpe3RoaXMuX2NhbGxiYWNrSWQ9CiJfY2FsbGJhY2tfIit0aGlzLmlkLnJlcGxhY2UoL1wuL2csIl8iKTt3aW5kb3dbdGhpcy5fY2FsbGJhY2tJZF09T3BlbkxheWVycy5GdW5jdGlvbi5iaW5kKE9wZW5MYXllcnMuTGF5ZXIuQmluZy5wcm9jZXNzTWV0YWRhdGEsdGhpcyk7dmFyIGE9T3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoe2tleTp0aGlzLmtleSxqc29ucDp0aGlzLl9jYWxsYmFja0lkLGluY2x1ZGU6IkltYWdlcnlQcm92aWRlcnMifSx0aGlzLm1ldGFkYXRhUGFyYW1zKSxhPXRoaXMucHJvdG9jb2wrIi8vZGV2LnZpcnR1YWxlYXJ0aC5uZXQvUkVTVC92MS9JbWFnZXJ5L01ldGFkYXRhLyIrdGhpcy50eXBlKyI/IitPcGVuTGF5ZXJzLlV0aWwuZ2V0UGFyYW1ldGVyU3RyaW5nKGEpLGI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic2NyaXB0Iik7Yi50eXBlPSJ0ZXh0L2phdmFzY3JpcHQiO2Iuc3JjPWE7Yi5pZD10aGlzLl9jYWxsYmFja0lkO2RvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJoZWFkIilbMF0uYXBwZW5kQ2hpbGQoYil9LAppbml0TGF5ZXI6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm1ldGFkYXRhLnJlc291cmNlU2V0c1swXS5yZXNvdXJjZXNbMF0sYj1hLmltYWdlVXJsLnJlcGxhY2UoIntxdWFka2V5fSIsIiR7cXVhZGtleX0iKSxiPWIucmVwbGFjZSgie2N1bHR1cmV9Iix0aGlzLmN1bHR1cmUpLGI9Yi5yZXBsYWNlKHRoaXMucHJvdG9jb2xSZWdleCx0aGlzLnByb3RvY29sKTt0aGlzLnVybD1bXTtmb3IodmFyIGM9MDtjPGEuaW1hZ2VVcmxTdWJkb21haW5zLmxlbmd0aDsrK2MpdGhpcy51cmwucHVzaChiLnJlcGxhY2UoIntzdWJkb21haW59IixhLmltYWdlVXJsU3ViZG9tYWluc1tjXSkpO3RoaXMuYWRkT3B0aW9ucyh7bWF4UmVzb2x1dGlvbjpNYXRoLm1pbih0aGlzLnNlcnZlclJlc29sdXRpb25zW2Euem9vbU1pbl0sdGhpcy5tYXhSZXNvbHV0aW9ufHxOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkpLG51bVpvb21MZXZlbHM6TWF0aC5taW4oYS56b29tTWF4KzEtYS56b29tTWluLHRoaXMubnVtWm9vbUxldmVscyl9LAohMCk7dGhpcy5pc0Jhc2VMYXllcnx8dGhpcy5yZWRyYXcoKTt0aGlzLnVwZGF0ZUF0dHJpYnV0aW9uKCl9LGdldFVSTDpmdW5jdGlvbihhKXtpZih0aGlzLnVybCl7dmFyIGI9dGhpcy5nZXRYWVooYSk7YT1iLng7Zm9yKHZhciBjPWIueSxiPWIueixkPVtdLGU9YjswPGU7LS1lKXt2YXIgZj0iMCIsZz0xPDxlLTE7MCE9KGEmZykmJmYrKzswIT0oYyZnKSYmKGYrKyxmKyspO2QucHVzaChmKX1kPWQuam9pbigiIik7YT10aGlzLnNlbGVjdFVybCgiIithK2MrYix0aGlzLnVybCk7cmV0dXJuIE9wZW5MYXllcnMuU3RyaW5nLmZvcm1hdChhLHtxdWFka2V5OmR9KX19LHVwZGF0ZUF0dHJpYnV0aW9uOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5tZXRhZGF0YTtpZihhLnJlc291cmNlU2V0cyYmdGhpcy5tYXAmJnRoaXMubWFwLmNlbnRlcil7dmFyIGI9YS5yZXNvdXJjZVNldHNbMF0ucmVzb3VyY2VzWzBdLGM9dGhpcy5tYXAuZ2V0RXh0ZW50KCkudHJhbnNmb3JtKHRoaXMubWFwLmdldFByb2plY3Rpb25PYmplY3QoKSwKbmV3IE9wZW5MYXllcnMuUHJvamVjdGlvbigiRVBTRzo0MzI2IikpLGQ9Yi5pbWFnZXJ5UHJvdmlkZXJzfHxbXSxlPU9wZW5MYXllcnMuVXRpbC5pbmRleE9mKHRoaXMuc2VydmVyUmVzb2x1dGlvbnMsdGhpcy5nZXRTZXJ2ZXJSZXNvbHV0aW9uKCkpLGI9IiIsZixnLGgsayxsLG0scjtnPTA7Zm9yKGg9ZC5sZW5ndGg7ZzxoOysrZylmb3IoZj1kW2ddLGs9MCxsPWYuY292ZXJhZ2VBcmVhcy5sZW5ndGg7azxsOysraylyPWYuY292ZXJhZ2VBcmVhc1trXSxtPU9wZW5MYXllcnMuQm91bmRzLmZyb21BcnJheShyLmJib3gsITApLGMuaW50ZXJzZWN0c0JvdW5kcyhtKSYmKGU8PXIuem9vbU1heCYmZT49ci56b29tTWluKSYmKGIrPWYuYXR0cmlidXRpb24rIiAiKTthPWEuYnJhbmRMb2dvVXJpLnJlcGxhY2UodGhpcy5wcm90b2NvbFJlZ2V4LHRoaXMucHJvdG9jb2wpO3RoaXMuYXR0cmlidXRpb249T3BlbkxheWVycy5TdHJpbmcuZm9ybWF0KHRoaXMuYXR0cmlidXRpb25UZW1wbGF0ZSx7dHlwZTp0aGlzLnR5cGUudG9Mb3dlckNhc2UoKSwKbG9nbzphLGNvcHlyaWdodHM6Yn0pO3RoaXMubWFwJiZ0aGlzLm1hcC5ldmVudHMudHJpZ2dlckV2ZW50KCJjaGFuZ2VsYXllciIse2xheWVyOnRoaXMscHJvcGVydHk6ImF0dHJpYnV0aW9uIn0pfX0sc2V0TWFwOmZ1bmN0aW9uKCl7T3BlbkxheWVycy5MYXllci5YWVoucHJvdG90eXBlLnNldE1hcC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5tYXAuZXZlbnRzLnJlZ2lzdGVyKCJtb3ZlZW5kIix0aGlzLHRoaXMudXBkYXRlQXR0cmlidXRpb24pfSxjbG9uZTpmdW5jdGlvbihhKXtudWxsPT1hJiYoYT1uZXcgT3BlbkxheWVycy5MYXllci5CaW5nKHRoaXMub3B0aW9ucykpO3JldHVybiBhPU9wZW5MYXllcnMuTGF5ZXIuWFlaLnByb3RvdHlwZS5jbG9uZS5hcHBseSh0aGlzLFthXSl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLm1hcCYmdGhpcy5tYXAuZXZlbnRzLnVucmVnaXN0ZXIoIm1vdmVlbmQiLHRoaXMsdGhpcy51cGRhdGVBdHRyaWJ1dGlvbik7T3BlbkxheWVycy5MYXllci5YWVoucHJvdG90eXBlLmRlc3Ryb3kuYXBwbHkodGhpcywKYXJndW1lbnRzKX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5MYXllci5CaW5nIn0pO09wZW5MYXllcnMuTGF5ZXIuQmluZy5wcm9jZXNzTWV0YWRhdGE9ZnVuY3Rpb24oYSl7dGhpcy5tZXRhZGF0YT1hO3RoaXMuaW5pdExheWVyKCk7YT1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLl9jYWxsYmFja0lkKTthLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYSk7d2luZG93W3RoaXMuX2NhbGxiYWNrSWRdPXZvaWQgMDtkZWxldGUgdGhpcy5fY2FsbGJhY2tJZH07T3BlbkxheWVycy5IYW5kbGVyPU9wZW5MYXllcnMuQ2xhc3Moe2lkOm51bGwsY29udHJvbDpudWxsLG1hcDpudWxsLGtleU1hc2s6bnVsbCxhY3RpdmU6ITEsZXZ0Om51bGwsdG91Y2g6ITEsaW5pdGlhbGl6ZTpmdW5jdGlvbihhLGIsYyl7T3BlbkxheWVycy5VdGlsLmV4dGVuZCh0aGlzLGMpO3RoaXMuY29udHJvbD1hO3RoaXMuY2FsbGJhY2tzPWI7KGE9dGhpcy5tYXB8fGEubWFwKSYmdGhpcy5zZXRNYXAoYSk7dGhpcy5pZD1PcGVuTGF5ZXJzLlV0aWwuY3JlYXRlVW5pcXVlSUQodGhpcy5DTEFTU19OQU1FKyJfIil9LHNldE1hcDpmdW5jdGlvbihhKXt0aGlzLm1hcD1hfSxjaGVja01vZGlmaWVyczpmdW5jdGlvbihhKXtyZXR1cm4gbnVsbD09dGhpcy5rZXlNYXNrPyEwOigoYS5zaGlmdEtleT9PcGVuTGF5ZXJzLkhhbmRsZXIuTU9EX1NISUZUOjApfChhLmN0cmxLZXk/T3BlbkxheWVycy5IYW5kbGVyLk1PRF9DVFJMOjApfChhLmFsdEtleT9PcGVuTGF5ZXJzLkhhbmRsZXIuTU9EX0FMVDoKMCl8KGEubWV0YUtleT9PcGVuTGF5ZXJzLkhhbmRsZXIuTU9EX01FVEE6MCkpPT10aGlzLmtleU1hc2t9LGFjdGl2YXRlOmZ1bmN0aW9uKCl7aWYodGhpcy5hY3RpdmUpcmV0dXJuITE7Zm9yKHZhciBhPU9wZW5MYXllcnMuRXZlbnRzLnByb3RvdHlwZS5CUk9XU0VSX0VWRU5UUyxiPTAsYz1hLmxlbmd0aDtiPGM7YisrKXRoaXNbYVtiXV0mJnRoaXMucmVnaXN0ZXIoYVtiXSx0aGlzW2FbYl1dKTtyZXR1cm4gdGhpcy5hY3RpdmU9ITB9LGRlYWN0aXZhdGU6ZnVuY3Rpb24oKXtpZighdGhpcy5hY3RpdmUpcmV0dXJuITE7Zm9yKHZhciBhPU9wZW5MYXllcnMuRXZlbnRzLnByb3RvdHlwZS5CUk9XU0VSX0VWRU5UUyxiPTAsYz1hLmxlbmd0aDtiPGM7YisrKXRoaXNbYVtiXV0mJnRoaXMudW5yZWdpc3RlcihhW2JdLHRoaXNbYVtiXV0pO3RoaXMuYWN0aXZlPXRoaXMudG91Y2g9ITE7cmV0dXJuITB9LHN0YXJ0VG91Y2g6ZnVuY3Rpb24oKXtpZighdGhpcy50b3VjaCl7dGhpcy50b3VjaD0hMDsKZm9yKHZhciBhPSJtb3VzZWRvd24gbW91c2V1cCBtb3VzZW1vdmUgY2xpY2sgZGJsY2xpY2sgbW91c2VvdXQiLnNwbGl0KCIgIiksYj0wLGM9YS5sZW5ndGg7YjxjO2IrKyl0aGlzW2FbYl1dJiZ0aGlzLnVucmVnaXN0ZXIoYVtiXSx0aGlzW2FbYl1dKX19LGNhbGxiYWNrOmZ1bmN0aW9uKGEsYil7YSYmdGhpcy5jYWxsYmFja3NbYV0mJnRoaXMuY2FsbGJhY2tzW2FdLmFwcGx5KHRoaXMuY29udHJvbCxiKX0scmVnaXN0ZXI6ZnVuY3Rpb24oYSxiKXt0aGlzLm1hcC5ldmVudHMucmVnaXN0ZXJQcmlvcml0eShhLHRoaXMsYik7dGhpcy5tYXAuZXZlbnRzLnJlZ2lzdGVyUHJpb3JpdHkoYSx0aGlzLHRoaXMuc2V0RXZlbnQpfSx1bnJlZ2lzdGVyOmZ1bmN0aW9uKGEsYil7dGhpcy5tYXAuZXZlbnRzLnVucmVnaXN0ZXIoYSx0aGlzLGIpO3RoaXMubWFwLmV2ZW50cy51bnJlZ2lzdGVyKGEsdGhpcyx0aGlzLnNldEV2ZW50KX0sc2V0RXZlbnQ6ZnVuY3Rpb24oYSl7dGhpcy5ldnQ9YTtyZXR1cm4hMH0sCmRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmRlYWN0aXZhdGUoKTt0aGlzLmNvbnRyb2w9dGhpcy5tYXA9bnVsbH0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5IYW5kbGVyIn0pO09wZW5MYXllcnMuSGFuZGxlci5NT0RfTk9ORT0wO09wZW5MYXllcnMuSGFuZGxlci5NT0RfU0hJRlQ9MTtPcGVuTGF5ZXJzLkhhbmRsZXIuTU9EX0NUUkw9MjtPcGVuTGF5ZXJzLkhhbmRsZXIuTU9EX0FMVD00O09wZW5MYXllcnMuSGFuZGxlci5NT0RfTUVUQT04O09wZW5MYXllcnMuSGFuZGxlci5Nb3VzZVdoZWVsPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5IYW5kbGVyLHt3aGVlbExpc3RlbmVyOm51bGwsaW50ZXJ2YWw6MCxtYXhEZWx0YTpOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFksZGVsdGE6MCxjdW11bGF0aXZlOiEwLGluaXRpYWxpemU6ZnVuY3Rpb24oYSxiLGMpe09wZW5MYXllcnMuSGFuZGxlci5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy53aGVlbExpc3RlbmVyPU9wZW5MYXllcnMuRnVuY3Rpb24uYmluZEFzRXZlbnRMaXN0ZW5lcih0aGlzLm9uV2hlZWxFdmVudCx0aGlzKX0sZGVzdHJveTpmdW5jdGlvbigpe09wZW5MYXllcnMuSGFuZGxlci5wcm90b3R5cGUuZGVzdHJveS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy53aGVlbExpc3RlbmVyPW51bGx9LG9uV2hlZWxFdmVudDpmdW5jdGlvbihhKXtpZih0aGlzLm1hcCYmdGhpcy5jaGVja01vZGlmaWVycyhhKSl7Zm9yKHZhciBiPQohMSxjPSExLGQ9ITEsZT1PcGVuTGF5ZXJzLkV2ZW50LmVsZW1lbnQoYSk7bnVsbCE9ZSYmIWQmJiFiOyl7aWYoIWIpdHJ5e3ZhciBmLGI9KGY9ZS5jdXJyZW50U3R5bGU/ZS5jdXJyZW50U3R5bGUub3ZlcmZsb3c6ZG9jdW1lbnQuZGVmYXVsdFZpZXcuZ2V0Q29tcHV0ZWRTdHlsZShlLG51bGwpLmdldFByb3BlcnR5VmFsdWUoIm92ZXJmbG93IikpJiYiYXV0byI9PWZ8fCJzY3JvbGwiPT1mfWNhdGNoKGcpe31pZighYyYmKGM9T3BlbkxheWVycy5FbGVtZW50Lmhhc0NsYXNzKGUsIm9sU2Nyb2xsYWJsZSIpLCFjKSlmb3IodmFyIGQ9MCxoPXRoaXMubWFwLmxheWVycy5sZW5ndGg7ZDxoO2QrKyl7dmFyIGs9dGhpcy5tYXAubGF5ZXJzW2RdO2lmKGU9PWsuZGl2fHxlPT1rLnBhbmUpe2M9ITA7YnJlYWt9fWQ9ZT09dGhpcy5tYXAuZGl2O2U9ZS5wYXJlbnROb2RlfWlmKCFiJiZkKXtpZihjKWlmKGI9MCxhLndoZWVsRGVsdGE/KGI9YS53aGVlbERlbHRhLDA9PT1iJTE2MCYmKGIqPTAuNzUpLApiLz0xMjApOmEuZGV0YWlsJiYoYj0tKGEuZGV0YWlsL01hdGguYWJzKGEuZGV0YWlsKSkpLHRoaXMuZGVsdGErPWIsd2luZG93LmNsZWFyVGltZW91dCh0aGlzLl90aW1lb3V0SWQpLHRoaXMuaW50ZXJ2YWwmJk1hdGguYWJzKHRoaXMuZGVsdGEpPHRoaXMubWF4RGVsdGEpe3ZhciBsPU9wZW5MYXllcnMuVXRpbC5leHRlbmQoe30sYSk7dGhpcy5fdGltZW91dElkPXdpbmRvdy5zZXRUaW1lb3V0KE9wZW5MYXllcnMuRnVuY3Rpb24uYmluZChmdW5jdGlvbigpe3RoaXMud2hlZWxab29tKGwpfSx0aGlzKSx0aGlzLmludGVydmFsKX1lbHNlIHRoaXMud2hlZWxab29tKGEpO09wZW5MYXllcnMuRXZlbnQuc3RvcChhKX19fSx3aGVlbFpvb206ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5kZWx0YTt0aGlzLmRlbHRhPTA7YiYmKGEueHk9dGhpcy5tYXAuZXZlbnRzLmdldE1vdXNlUG9zaXRpb24oYSksMD5iP3RoaXMuY2FsbGJhY2soImRvd24iLFthLHRoaXMuY3VtdWxhdGl2ZT9NYXRoLm1heCgtdGhpcy5tYXhEZWx0YSwKYik6LTFdKTp0aGlzLmNhbGxiYWNrKCJ1cCIsW2EsdGhpcy5jdW11bGF0aXZlP01hdGgubWluKHRoaXMubWF4RGVsdGEsYik6MV0pKX0sYWN0aXZhdGU6ZnVuY3Rpb24oYSl7aWYoT3BlbkxheWVycy5IYW5kbGVyLnByb3RvdHlwZS5hY3RpdmF0ZS5hcHBseSh0aGlzLGFyZ3VtZW50cykpe3ZhciBiPXRoaXMud2hlZWxMaXN0ZW5lcjtPcGVuTGF5ZXJzLkV2ZW50Lm9ic2VydmUod2luZG93LCJET01Nb3VzZVNjcm9sbCIsYik7T3BlbkxheWVycy5FdmVudC5vYnNlcnZlKHdpbmRvdywibW91c2V3aGVlbCIsYik7T3BlbkxheWVycy5FdmVudC5vYnNlcnZlKGRvY3VtZW50LCJtb3VzZXdoZWVsIixiKTtyZXR1cm4hMH1yZXR1cm4hMX0sZGVhY3RpdmF0ZTpmdW5jdGlvbihhKXtpZihPcGVuTGF5ZXJzLkhhbmRsZXIucHJvdG90eXBlLmRlYWN0aXZhdGUuYXBwbHkodGhpcyxhcmd1bWVudHMpKXt2YXIgYj10aGlzLndoZWVsTGlzdGVuZXI7T3BlbkxheWVycy5FdmVudC5zdG9wT2JzZXJ2aW5nKHdpbmRvdywKIkRPTU1vdXNlU2Nyb2xsIixiKTtPcGVuTGF5ZXJzLkV2ZW50LnN0b3BPYnNlcnZpbmcod2luZG93LCJtb3VzZXdoZWVsIixiKTtPcGVuTGF5ZXJzLkV2ZW50LnN0b3BPYnNlcnZpbmcoZG9jdW1lbnQsIm1vdXNld2hlZWwiLGIpO3JldHVybiEwfXJldHVybiExfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkhhbmRsZXIuTW91c2VXaGVlbCJ9KTtPcGVuTGF5ZXJzLkdlb21ldHJ5Lk11bHRpTGluZVN0cmluZz1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuR2VvbWV0cnkuQ29sbGVjdGlvbix7Y29tcG9uZW50VHlwZXM6WyJPcGVuTGF5ZXJzLkdlb21ldHJ5LkxpbmVTdHJpbmciXSxzcGxpdDpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz1udWxsLGQ9YiYmYi5tdXR1YWwsZSxmLGcsaCxrPVtdLGw9W2FdLG09MCxyPXRoaXMuY29tcG9uZW50cy5sZW5ndGg7bTxyOysrbSl7Zj10aGlzLmNvbXBvbmVudHNbbV07Zz0hMTtmb3IodmFyIHA9MDtwPGwubGVuZ3RoOysrcClpZihlPWYuc3BsaXQobFtwXSxiKSl7aWYoZCl7Zz1lWzBdO2Zvcih2YXIgbj0wLHE9Zy5sZW5ndGg7bjxxOysrbikwPT09biYmay5sZW5ndGg/a1trLmxlbmd0aC0xXS5hZGRDb21wb25lbnQoZ1tuXSk6ay5wdXNoKG5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5Lk11bHRpTGluZVN0cmluZyhbZ1tuXV0pKTtnPSEwO2U9ZVsxXX1pZihlLmxlbmd0aCl7ZS51bnNoaWZ0KHAsCjEpO0FycmF5LnByb3RvdHlwZS5zcGxpY2UuYXBwbHkobCxlKTticmVha319Z3x8KGsubGVuZ3RoP2tbay5sZW5ndGgtMV0uYWRkQ29tcG9uZW50KGYuY2xvbmUoKSk6az1bbmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuTXVsdGlMaW5lU3RyaW5nKGYuY2xvbmUoKSldKX1rJiYxPGsubGVuZ3RoP2c9ITA6az1bXTtsJiYxPGwubGVuZ3RoP2g9ITA6bD1bXTtpZihnfHxoKWM9ZD9bayxsXTpsO3JldHVybiBjfSxzcGxpdFdpdGg6ZnVuY3Rpb24oYSxiKXt2YXIgYz1udWxsLGQ9YiYmYi5tdXR1YWwsZSxmLGcsaCxrLGw7aWYoYSBpbnN0YW5jZW9mIE9wZW5MYXllcnMuR2VvbWV0cnkuTGluZVN0cmluZyl7bD1bXTtrPVthXTtmb3IodmFyIG09MCxyPXRoaXMuY29tcG9uZW50cy5sZW5ndGg7bTxyOysrbSl7Zz0hMTtmPXRoaXMuY29tcG9uZW50c1ttXTtmb3IodmFyIHA9MDtwPGsubGVuZ3RoOysrcClpZihlPWtbcF0uc3BsaXQoZixiKSl7ZCYmKGc9ZVswXSxnLmxlbmd0aCYmKGcudW5zaGlmdChwLAoxKSxBcnJheS5wcm90b3R5cGUuc3BsaWNlLmFwcGx5KGssZykscCs9Zy5sZW5ndGgtMiksZT1lWzFdLDA9PT1lLmxlbmd0aCYmKGU9W2YuY2xvbmUoKV0pKTtnPTA7Zm9yKHZhciBuPWUubGVuZ3RoO2c8bjsrK2cpMD09PWcmJmwubGVuZ3RoP2xbbC5sZW5ndGgtMV0uYWRkQ29tcG9uZW50KGVbZ10pOmwucHVzaChuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5NdWx0aUxpbmVTdHJpbmcoW2VbZ11dKSk7Zz0hMH1nfHwobC5sZW5ndGg/bFtsLmxlbmd0aC0xXS5hZGRDb21wb25lbnQoZi5jbG9uZSgpKTpsPVtuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5NdWx0aUxpbmVTdHJpbmcoW2YuY2xvbmUoKV0pXSl9fWVsc2UgYz1hLnNwbGl0KHRoaXMpO2smJjE8ay5sZW5ndGg/aD0hMDprPVtdO2wmJjE8bC5sZW5ndGg/Zz0hMDpsPVtdO2lmKGh8fGcpYz1kP1trLGxdOmw7cmV0dXJuIGN9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuR2VvbWV0cnkuTXVsdGlMaW5lU3RyaW5nIn0pO09wZW5MYXllcnMuUmVuZGVyZXI9T3BlbkxheWVycy5DbGFzcyh7Y29udGFpbmVyOm51bGwscm9vdDpudWxsLGV4dGVudDpudWxsLGxvY2tlZDohMSxzaXplOm51bGwscmVzb2x1dGlvbjpudWxsLG1hcDpudWxsLGZlYXR1cmVEeDowLGluaXRpYWxpemU6ZnVuY3Rpb24oYSxiKXt0aGlzLmNvbnRhaW5lcj1PcGVuTGF5ZXJzLlV0aWwuZ2V0RWxlbWVudChhKTtPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHRoaXMsYil9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLm1hcD10aGlzLnJlc29sdXRpb249dGhpcy5zaXplPXRoaXMuZXh0ZW50PXRoaXMuY29udGFpbmVyPW51bGx9LHN1cHBvcnRlZDpmdW5jdGlvbigpe3JldHVybiExfSxzZXRFeHRlbnQ6ZnVuY3Rpb24oYSxiKXt0aGlzLmV4dGVudD1hLmNsb25lKCk7aWYodGhpcy5tYXAuYmFzZUxheWVyJiZ0aGlzLm1hcC5iYXNlTGF5ZXIud3JhcERhdGVMaW5lKXt2YXIgYz1hLmdldFdpZHRoKCkvdGhpcy5tYXAuZ2V0RXh0ZW50KCkuZ2V0V2lkdGgoKTsKYT1hLnNjYWxlKDEvYyk7dGhpcy5leHRlbnQ9YS53cmFwRGF0ZUxpbmUodGhpcy5tYXAuZ2V0TWF4RXh0ZW50KCkpLnNjYWxlKGMpfWImJih0aGlzLnJlc29sdXRpb249bnVsbCk7cmV0dXJuITB9LHNldFNpemU6ZnVuY3Rpb24oYSl7dGhpcy5zaXplPWEuY2xvbmUoKTt0aGlzLnJlc29sdXRpb249bnVsbH0sZ2V0UmVzb2x1dGlvbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLnJlc29sdXRpb249dGhpcy5yZXNvbHV0aW9ufHx0aGlzLm1hcC5nZXRSZXNvbHV0aW9uKCl9LGRyYXdGZWF0dXJlOmZ1bmN0aW9uKGEsYil7bnVsbD09YiYmKGI9YS5zdHlsZSk7aWYoYS5nZW9tZXRyeSl7dmFyIGM9YS5nZW9tZXRyeS5nZXRCb3VuZHMoKTtpZihjKXt2YXIgZDt0aGlzLm1hcC5iYXNlTGF5ZXImJnRoaXMubWFwLmJhc2VMYXllci53cmFwRGF0ZUxpbmUmJihkPXRoaXMubWFwLmdldE1heEV4dGVudCgpKTtjLmludGVyc2VjdHNCb3VuZHModGhpcy5leHRlbnQse3dvcmxkQm91bmRzOmR9KT90aGlzLmNhbGN1bGF0ZUZlYXR1cmVEeChjLApkKTpiPXtkaXNwbGF5OiJub25lIn07Yz10aGlzLmRyYXdHZW9tZXRyeShhLmdlb21ldHJ5LGIsYS5pZCk7aWYoIm5vbmUiIT1iLmRpc3BsYXkmJmIubGFiZWwmJiExIT09Yyl7ZD1hLmdlb21ldHJ5LmdldENlbnRyb2lkKCk7aWYoYi5sYWJlbFhPZmZzZXR8fGIubGFiZWxZT2Zmc2V0KXt2YXIgZT1pc05hTihiLmxhYmVsWE9mZnNldCk/MDpiLmxhYmVsWE9mZnNldCxmPWlzTmFOKGIubGFiZWxZT2Zmc2V0KT8wOmIubGFiZWxZT2Zmc2V0LGc9dGhpcy5nZXRSZXNvbHV0aW9uKCk7ZC5tb3ZlKGUqZyxmKmcpfXRoaXMuZHJhd1RleHQoYS5pZCxiLGQpfWVsc2UgdGhpcy5yZW1vdmVUZXh0KGEuaWQpO3JldHVybiBjfX19LGNhbGN1bGF0ZUZlYXR1cmVEeDpmdW5jdGlvbihhLGIpe3RoaXMuZmVhdHVyZUR4PTA7aWYoYil7dmFyIGM9Yi5nZXRXaWR0aCgpO3RoaXMuZmVhdHVyZUR4PU1hdGgucm91bmQoKChhLmxlZnQrYS5yaWdodCkvMi0odGhpcy5leHRlbnQubGVmdCt0aGlzLmV4dGVudC5yaWdodCkvCjIpL2MpKmN9fSxkcmF3R2VvbWV0cnk6ZnVuY3Rpb24oYSxiLGMpe30sZHJhd1RleHQ6ZnVuY3Rpb24oYSxiLGMpe30scmVtb3ZlVGV4dDpmdW5jdGlvbihhKXt9LGNsZWFyOmZ1bmN0aW9uKCl7fSxnZXRGZWF0dXJlSWRGcm9tRXZlbnQ6ZnVuY3Rpb24oYSl7fSxlcmFzZUZlYXR1cmVzOmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuVXRpbC5pc0FycmF5KGEpfHwoYT1bYV0pO2Zvcih2YXIgYj0wLGM9YS5sZW5ndGg7YjxjOysrYil7dmFyIGQ9YVtiXTt0aGlzLmVyYXNlR2VvbWV0cnkoZC5nZW9tZXRyeSxkLmlkKTt0aGlzLnJlbW92ZVRleHQoZC5pZCl9fSxlcmFzZUdlb21ldHJ5OmZ1bmN0aW9uKGEsYil7fSxtb3ZlUm9vdDpmdW5jdGlvbihhKXt9LGdldFJlbmRlckxheWVySWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250YWluZXIuaWR9LGFwcGx5RGVmYXVsdFN5bWJvbGl6ZXI6ZnVuY3Rpb24oYSl7dmFyIGI9T3BlbkxheWVycy5VdGlsLmV4dGVuZCh7fSxPcGVuTGF5ZXJzLlJlbmRlcmVyLmRlZmF1bHRTeW1ib2xpemVyKTsKITE9PT1hLnN0cm9rZSYmKGRlbGV0ZSBiLnN0cm9rZVdpZHRoLGRlbGV0ZSBiLnN0cm9rZUNvbG9yKTshMT09PWEuZmlsbCYmZGVsZXRlIGIuZmlsbENvbG9yO09wZW5MYXllcnMuVXRpbC5leHRlbmQoYixhKTtyZXR1cm4gYn0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5SZW5kZXJlciJ9KTtPcGVuTGF5ZXJzLlJlbmRlcmVyLmRlZmF1bHRTeW1ib2xpemVyPXtmaWxsQ29sb3I6IiMwMDAwMDAiLHN0cm9rZUNvbG9yOiIjMDAwMDAwIixzdHJva2VXaWR0aDoyLGZpbGxPcGFjaXR5OjEsc3Ryb2tlT3BhY2l0eToxLHBvaW50UmFkaXVzOjAsbGFiZWxBbGlnbjoiY20ifTsKT3BlbkxheWVycy5SZW5kZXJlci5zeW1ib2w9e3N0YXI6WzM1MCw3NSwzNzksMTYxLDQ2OSwxNjEsMzk3LDIxNSw0MjMsMzAxLDM1MCwyNTAsMjc3LDMwMSwzMDMsMjE1LDIzMSwxNjEsMzIxLDE2MSwzNTAsNzVdLGNyb3NzOls0LDAsNiwwLDYsNCwxMCw0LDEwLDYsNiw2LDYsMTAsNCwxMCw0LDYsMCw2LDAsNCw0LDQsNCwwXSx4OlswLDAsMjUsMCw1MCwzNSw3NSwwLDEwMCwwLDY1LDUwLDEwMCwxMDAsNzUsMTAwLDUwLDY1LDI1LDEwMCwwLDEwMCwzNSw1MCwwLDBdLHNxdWFyZTpbMCwwLDAsMSwxLDEsMSwwLDAsMF0sdHJpYW5nbGU6WzAsMTAsMTAsMTAsNSwwLDAsMTBdfTtPcGVuTGF5ZXJzLkVsZW1lbnRzSW5kZXhlcj1PcGVuTGF5ZXJzLkNsYXNzKHttYXhaSW5kZXg6bnVsbCxvcmRlcjpudWxsLGluZGljZXM6bnVsbCxjb21wYXJlOm51bGwsaW5pdGlhbGl6ZTpmdW5jdGlvbihhKXt0aGlzLmNvbXBhcmU9YT9PcGVuTGF5ZXJzLkVsZW1lbnRzSW5kZXhlci5JbmRleGluZ01ldGhvZHMuWl9PUkRFUl9ZX09SREVSOk9wZW5MYXllcnMuRWxlbWVudHNJbmRleGVyLkluZGV4aW5nTWV0aG9kcy5aX09SREVSX0RSQVdJTkdfT1JERVI7dGhpcy5jbGVhcigpfSxpbnNlcnQ6ZnVuY3Rpb24oYSl7dGhpcy5leGlzdHMoYSkmJnRoaXMucmVtb3ZlKGEpO3ZhciBiPWEuaWQ7dGhpcy5kZXRlcm1pbmVaSW5kZXgoYSk7Zm9yKHZhciBjPS0xLGQ9dGhpcy5vcmRlci5sZW5ndGgsZTsxPGQtYzspZT1wYXJzZUludCgoYytkKS8yKSwwPHRoaXMuY29tcGFyZSh0aGlzLGEsT3BlbkxheWVycy5VdGlsLmdldEVsZW1lbnQodGhpcy5vcmRlcltlXSkpP2M9ZTpkPWU7dGhpcy5vcmRlci5zcGxpY2UoZCwKMCxiKTt0aGlzLmluZGljZXNbYl09dGhpcy5nZXRaSW5kZXgoYSk7cmV0dXJuIHRoaXMuZ2V0TmV4dEVsZW1lbnQoZCl9LHJlbW92ZTpmdW5jdGlvbihhKXthPWEuaWQ7dmFyIGI9T3BlbkxheWVycy5VdGlsLmluZGV4T2YodGhpcy5vcmRlcixhKTswPD1iJiYodGhpcy5vcmRlci5zcGxpY2UoYiwxKSxkZWxldGUgdGhpcy5pbmRpY2VzW2FdLHRoaXMubWF4WkluZGV4PTA8dGhpcy5vcmRlci5sZW5ndGg/dGhpcy5pbmRpY2VzW3RoaXMub3JkZXJbdGhpcy5vcmRlci5sZW5ndGgtMV1dOjApfSxjbGVhcjpmdW5jdGlvbigpe3RoaXMub3JkZXI9W107dGhpcy5pbmRpY2VzPXt9O3RoaXMubWF4WkluZGV4PTB9LGV4aXN0czpmdW5jdGlvbihhKXtyZXR1cm4gbnVsbCE9dGhpcy5pbmRpY2VzW2EuaWRdfSxnZXRaSW5kZXg6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuX3N0eWxlLmdyYXBoaWNaSW5kZXh9LGRldGVybWluZVpJbmRleDpmdW5jdGlvbihhKXt2YXIgYj1hLl9zdHlsZS5ncmFwaGljWkluZGV4OwpudWxsPT1iPyhiPXRoaXMubWF4WkluZGV4LGEuX3N0eWxlLmdyYXBoaWNaSW5kZXg9Yik6Yj50aGlzLm1heFpJbmRleCYmKHRoaXMubWF4WkluZGV4PWIpfSxnZXROZXh0RWxlbWVudDpmdW5jdGlvbihhKXthKz0xO2lmKGE8dGhpcy5vcmRlci5sZW5ndGgpe3ZhciBiPU9wZW5MYXllcnMuVXRpbC5nZXRFbGVtZW50KHRoaXMub3JkZXJbYV0pO3ZvaWQgMD09YiYmKGI9dGhpcy5nZXROZXh0RWxlbWVudChhKSk7cmV0dXJuIGJ9cmV0dXJuIG51bGx9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuRWxlbWVudHNJbmRleGVyIn0pOwpPcGVuTGF5ZXJzLkVsZW1lbnRzSW5kZXhlci5JbmRleGluZ01ldGhvZHM9e1pfT1JERVI6ZnVuY3Rpb24oYSxiLGMpe2I9YS5nZXRaSW5kZXgoYik7dmFyIGQ9MDtjJiYoYT1hLmdldFpJbmRleChjKSxkPWItYSk7cmV0dXJuIGR9LFpfT1JERVJfRFJBV0lOR19PUkRFUjpmdW5jdGlvbihhLGIsYyl7YT1PcGVuTGF5ZXJzLkVsZW1lbnRzSW5kZXhlci5JbmRleGluZ01ldGhvZHMuWl9PUkRFUihhLGIsYyk7YyYmMD09YSYmKGE9MSk7cmV0dXJuIGF9LFpfT1JERVJfWV9PUkRFUjpmdW5jdGlvbihhLGIsYyl7YT1PcGVuTGF5ZXJzLkVsZW1lbnRzSW5kZXhlci5JbmRleGluZ01ldGhvZHMuWl9PUkRFUihhLGIsYyk7YyYmMD09PWEmJihiPWMuX2JvdW5kc0JvdHRvbS1iLl9ib3VuZHNCb3R0b20sYT0wPT09Yj8xOmIpO3JldHVybiBhfX07Ck9wZW5MYXllcnMuUmVuZGVyZXIuRWxlbWVudHM9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLlJlbmRlcmVyLHtyZW5kZXJlclJvb3Q6bnVsbCxyb290Om51bGwsdmVjdG9yUm9vdDpudWxsLHRleHRSb290Om51bGwseG1sbnM6bnVsbCx4T2Zmc2V0OjAsaW5kZXhlcjpudWxsLEJBQ0tHUk9VTkRfSURfU1VGRklYOiJfYmFja2dyb3VuZCIsTEFCRUxfSURfU1VGRklYOiJfbGFiZWwiLExBQkVMX09VVExJTkVfU1VGRklYOiJfb3V0bGluZSIsaW5pdGlhbGl6ZTpmdW5jdGlvbihhLGIpe09wZW5MYXllcnMuUmVuZGVyZXIucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMucmVuZGVyZXJSb290PXRoaXMuY3JlYXRlUmVuZGVyUm9vdCgpO3RoaXMucm9vdD10aGlzLmNyZWF0ZVJvb3QoIl9yb290Iik7dGhpcy52ZWN0b3JSb290PXRoaXMuY3JlYXRlUm9vdCgiX3Zyb290Iik7dGhpcy50ZXh0Um9vdD10aGlzLmNyZWF0ZVJvb3QoIl90cm9vdCIpO3RoaXMucm9vdC5hcHBlbmRDaGlsZCh0aGlzLnZlY3RvclJvb3QpOwp0aGlzLnJvb3QuYXBwZW5kQ2hpbGQodGhpcy50ZXh0Um9vdCk7dGhpcy5yZW5kZXJlclJvb3QuYXBwZW5kQ2hpbGQodGhpcy5yb290KTt0aGlzLmNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLnJlbmRlcmVyUm9vdCk7YiYmKGIuekluZGV4aW5nfHxiLnlPcmRlcmluZykmJih0aGlzLmluZGV4ZXI9bmV3IE9wZW5MYXllcnMuRWxlbWVudHNJbmRleGVyKGIueU9yZGVyaW5nKSl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmNsZWFyKCk7dGhpcy54bWxucz10aGlzLnJvb3Q9dGhpcy5yZW5kZXJlclJvb3Q9bnVsbDtPcGVuTGF5ZXJzLlJlbmRlcmVyLnByb3RvdHlwZS5kZXN0cm95LmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sY2xlYXI6ZnVuY3Rpb24oKXt2YXIgYSxiPXRoaXMudmVjdG9yUm9vdDtpZihiKWZvcig7YT1iLmZpcnN0Q2hpbGQ7KWIucmVtb3ZlQ2hpbGQoYSk7aWYoYj10aGlzLnRleHRSb290KWZvcig7YT1iLmZpcnN0Q2hpbGQ7KWIucmVtb3ZlQ2hpbGQoYSk7dGhpcy5pbmRleGVyJiYKdGhpcy5pbmRleGVyLmNsZWFyKCl9LHNldEV4dGVudDpmdW5jdGlvbihhLGIpe3ZhciBjPU9wZW5MYXllcnMuUmVuZGVyZXIucHJvdG90eXBlLnNldEV4dGVudC5hcHBseSh0aGlzLGFyZ3VtZW50cyksZD10aGlzLmdldFJlc29sdXRpb24oKTtpZih0aGlzLm1hcC5iYXNlTGF5ZXImJnRoaXMubWFwLmJhc2VMYXllci53cmFwRGF0ZUxpbmUpe3ZhciBlLGY9YS5nZXRXaWR0aCgpL3RoaXMubWFwLmdldEV4dGVudCgpLmdldFdpZHRoKCk7YT1hLnNjYWxlKDEvZik7Zj10aGlzLm1hcC5nZXRNYXhFeHRlbnQoKTtmLnJpZ2h0PmEubGVmdCYmZi5yaWdodDxhLnJpZ2h0P2U9ITA6Zi5sZWZ0PmEubGVmdCYmZi5sZWZ0PGEucmlnaHQmJihlPSExKTtpZihlIT09dGhpcy5yaWdodE9mRGF0ZUxpbmV8fGIpYz0hMSx0aGlzLnhPZmZzZXQ9ITA9PT1lP2YuZ2V0V2lkdGgoKS9kOjA7dGhpcy5yaWdodE9mRGF0ZUxpbmU9ZX1yZXR1cm4gY30sZ2V0Tm9kZVR5cGU6ZnVuY3Rpb24oYSxiKXt9LGRyYXdHZW9tZXRyeTpmdW5jdGlvbihhLApiLGMpe3ZhciBkPWEuQ0xBU1NfTkFNRSxlPSEwO2lmKCJPcGVuTGF5ZXJzLkdlb21ldHJ5LkNvbGxlY3Rpb24iPT1kfHwiT3BlbkxheWVycy5HZW9tZXRyeS5NdWx0aVBvaW50Ij09ZHx8Ik9wZW5MYXllcnMuR2VvbWV0cnkuTXVsdGlMaW5lU3RyaW5nIj09ZHx8Ik9wZW5MYXllcnMuR2VvbWV0cnkuTXVsdGlQb2x5Z29uIj09ZCl7Zm9yKHZhciBkPTAsZj1hLmNvbXBvbmVudHMubGVuZ3RoO2Q8ZjtkKyspZT10aGlzLmRyYXdHZW9tZXRyeShhLmNvbXBvbmVudHNbZF0sYixjKSYmZTtyZXR1cm4gZX1kPWU9ITE7Im5vbmUiIT1iLmRpc3BsYXkmJihiLmJhY2tncm91bmRHcmFwaGljP3RoaXMucmVkcmF3QmFja2dyb3VuZE5vZGUoYS5pZCxhLGIsYyk6ZD0hMCxlPXRoaXMucmVkcmF3Tm9kZShhLmlkLGEsYixjKSk7ITE9PWUmJihiPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGEuaWQpKSYmKGIuX3N0eWxlLmJhY2tncm91bmRHcmFwaGljJiYoZD0hMCksYi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGIpKTsKZCYmKGI9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYS5pZCt0aGlzLkJBQ0tHUk9VTkRfSURfU1VGRklYKSkmJmIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChiKTtyZXR1cm4gZX0scmVkcmF3Tm9kZTpmdW5jdGlvbihhLGIsYyxkKXtjPXRoaXMuYXBwbHlEZWZhdWx0U3ltYm9saXplcihjKTthPXRoaXMubm9kZUZhY3RvcnkoYSx0aGlzLmdldE5vZGVUeXBlKGIsYykpO2EuX2ZlYXR1cmVJZD1kO2EuX2JvdW5kc0JvdHRvbT1iLmdldEJvdW5kcygpLmJvdHRvbTthLl9nZW9tZXRyeUNsYXNzPWIuQ0xBU1NfTkFNRTthLl9zdHlsZT1jO2I9dGhpcy5kcmF3R2VvbWV0cnlOb2RlKGEsYixjKTtpZighMT09PWIpcmV0dXJuITE7YT1iLm5vZGU7dGhpcy5pbmRleGVyPyhjPXRoaXMuaW5kZXhlci5pbnNlcnQoYSkpP3RoaXMudmVjdG9yUm9vdC5pbnNlcnRCZWZvcmUoYSxjKTp0aGlzLnZlY3RvclJvb3QuYXBwZW5kQ2hpbGQoYSk6YS5wYXJlbnROb2RlIT09dGhpcy52ZWN0b3JSb290JiZ0aGlzLnZlY3RvclJvb3QuYXBwZW5kQ2hpbGQoYSk7CnRoaXMucG9zdERyYXcoYSk7cmV0dXJuIGIuY29tcGxldGV9LHJlZHJhd0JhY2tncm91bmROb2RlOmZ1bmN0aW9uKGEsYixjLGQpe2M9T3BlbkxheWVycy5VdGlsLmV4dGVuZCh7fSxjKTtjLmV4dGVybmFsR3JhcGhpYz1jLmJhY2tncm91bmRHcmFwaGljO2MuZ3JhcGhpY1hPZmZzZXQ9Yy5iYWNrZ3JvdW5kWE9mZnNldDtjLmdyYXBoaWNZT2Zmc2V0PWMuYmFja2dyb3VuZFlPZmZzZXQ7Yy5ncmFwaGljWkluZGV4PWMuYmFja2dyb3VuZEdyYXBoaWNaSW5kZXg7Yy5ncmFwaGljV2lkdGg9Yy5iYWNrZ3JvdW5kV2lkdGh8fGMuZ3JhcGhpY1dpZHRoO2MuZ3JhcGhpY0hlaWdodD1jLmJhY2tncm91bmRIZWlnaHR8fGMuZ3JhcGhpY0hlaWdodDtjLmJhY2tncm91bmRHcmFwaGljPW51bGw7Yy5iYWNrZ3JvdW5kWE9mZnNldD1udWxsO2MuYmFja2dyb3VuZFlPZmZzZXQ9bnVsbDtjLmJhY2tncm91bmRHcmFwaGljWkluZGV4PW51bGw7cmV0dXJuIHRoaXMucmVkcmF3Tm9kZShhK3RoaXMuQkFDS0dST1VORF9JRF9TVUZGSVgsCmIsYyxudWxsKX0sZHJhd0dlb21ldHJ5Tm9kZTpmdW5jdGlvbihhLGIsYyl7Yz1jfHxhLl9zdHlsZTt2YXIgZD17aXNGaWxsZWQ6dm9pZCAwPT09Yy5maWxsPyEwOmMuZmlsbCxpc1N0cm9rZWQ6dm9pZCAwPT09Yy5zdHJva2U/ISFjLnN0cm9rZVdpZHRoOmMuc3Ryb2tlfSxlO3N3aXRjaChiLkNMQVNTX05BTUUpe2Nhc2UgIk9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQiOiExPT09Yy5ncmFwaGljJiYoZC5pc0ZpbGxlZD0hMSxkLmlzU3Ryb2tlZD0hMSk7ZT10aGlzLmRyYXdQb2ludChhLGIpO2JyZWFrO2Nhc2UgIk9wZW5MYXllcnMuR2VvbWV0cnkuTGluZVN0cmluZyI6ZC5pc0ZpbGxlZD0hMTtlPXRoaXMuZHJhd0xpbmVTdHJpbmcoYSxiKTticmVhaztjYXNlICJPcGVuTGF5ZXJzLkdlb21ldHJ5LkxpbmVhclJpbmciOmU9dGhpcy5kcmF3TGluZWFyUmluZyhhLGIpO2JyZWFrO2Nhc2UgIk9wZW5MYXllcnMuR2VvbWV0cnkuUG9seWdvbiI6ZT10aGlzLmRyYXdQb2x5Z29uKGEsYik7YnJlYWs7CmNhc2UgIk9wZW5MYXllcnMuR2VvbWV0cnkuUmVjdGFuZ2xlIjplPXRoaXMuZHJhd1JlY3RhbmdsZShhLGIpfWEuX29wdGlvbnM9ZDtyZXR1cm4hMSE9ZT97bm9kZTp0aGlzLnNldFN0eWxlKGEsYyxkLGIpLGNvbXBsZXRlOmV9OiExfSxwb3N0RHJhdzpmdW5jdGlvbihhKXt9LGRyYXdQb2ludDpmdW5jdGlvbihhLGIpe30sZHJhd0xpbmVTdHJpbmc6ZnVuY3Rpb24oYSxiKXt9LGRyYXdMaW5lYXJSaW5nOmZ1bmN0aW9uKGEsYil7fSxkcmF3UG9seWdvbjpmdW5jdGlvbihhLGIpe30sZHJhd1JlY3RhbmdsZTpmdW5jdGlvbihhLGIpe30sZHJhd0NpcmNsZTpmdW5jdGlvbihhLGIpe30scmVtb3ZlVGV4dDpmdW5jdGlvbihhKXt2YXIgYj1kb2N1bWVudC5nZXRFbGVtZW50QnlJZChhK3RoaXMuTEFCRUxfSURfU1VGRklYKTtiJiZ0aGlzLnRleHRSb290LnJlbW92ZUNoaWxkKGIpOyhhPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGErdGhpcy5MQUJFTF9PVVRMSU5FX1NVRkZJWCkpJiZ0aGlzLnRleHRSb290LnJlbW92ZUNoaWxkKGEpfSwKZ2V0RmVhdHVyZUlkRnJvbUV2ZW50OmZ1bmN0aW9uKGEpe3ZhciBiPWEudGFyZ2V0LGM9YiYmYi5jb3JyZXNwb25kaW5nVXNlRWxlbWVudDtyZXR1cm4oYz9jOmJ8fGEuc3JjRWxlbWVudCkuX2ZlYXR1cmVJZH0sZXJhc2VHZW9tZXRyeTpmdW5jdGlvbihhLGIpe2lmKCJPcGVuTGF5ZXJzLkdlb21ldHJ5Lk11bHRpUG9pbnQiPT1hLkNMQVNTX05BTUV8fCJPcGVuTGF5ZXJzLkdlb21ldHJ5Lk11bHRpTGluZVN0cmluZyI9PWEuQ0xBU1NfTkFNRXx8Ik9wZW5MYXllcnMuR2VvbWV0cnkuTXVsdGlQb2x5Z29uIj09YS5DTEFTU19OQU1FfHwiT3BlbkxheWVycy5HZW9tZXRyeS5Db2xsZWN0aW9uIj09YS5DTEFTU19OQU1FKWZvcih2YXIgYz0wLGQ9YS5jb21wb25lbnRzLmxlbmd0aDtjPGQ7YysrKXRoaXMuZXJhc2VHZW9tZXRyeShhLmNvbXBvbmVudHNbY10sYik7ZWxzZShjPU9wZW5MYXllcnMuVXRpbC5nZXRFbGVtZW50KGEuaWQpKSYmYy5wYXJlbnROb2RlJiYoYy5nZW9tZXRyeSYmKGMuZ2VvbWV0cnkuZGVzdHJveSgpLApjLmdlb21ldHJ5PW51bGwpLGMucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChjKSx0aGlzLmluZGV4ZXImJnRoaXMuaW5kZXhlci5yZW1vdmUoYyksYy5fc3R5bGUuYmFja2dyb3VuZEdyYXBoaWMmJihjPU9wZW5MYXllcnMuVXRpbC5nZXRFbGVtZW50KGEuaWQrdGhpcy5CQUNLR1JPVU5EX0lEX1NVRkZJWCkpJiZjLnBhcmVudE5vZGUmJmMucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChjKSl9LG5vZGVGYWN0b3J5OmZ1bmN0aW9uKGEsYil7dmFyIGM9T3BlbkxheWVycy5VdGlsLmdldEVsZW1lbnQoYSk7Yz90aGlzLm5vZGVUeXBlQ29tcGFyZShjLGIpfHwoYy5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGMpLGM9dGhpcy5ub2RlRmFjdG9yeShhLGIpKTpjPXRoaXMuY3JlYXRlTm9kZShiLGEpO3JldHVybiBjfSxub2RlVHlwZUNvbXBhcmU6ZnVuY3Rpb24oYSxiKXt9LGNyZWF0ZU5vZGU6ZnVuY3Rpb24oYSxiKXt9LG1vdmVSb290OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMucm9vdDthLnJvb3QucGFyZW50Tm9kZT09CnRoaXMucmVuZGVyZXJSb290JiYoYj1hLnJvb3QpO2IucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChiKTthLnJlbmRlcmVyUm9vdC5hcHBlbmRDaGlsZChiKX0sZ2V0UmVuZGVyTGF5ZXJJZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnJvb3QucGFyZW50Tm9kZS5wYXJlbnROb2RlLmlkfSxpc0NvbXBsZXhTeW1ib2w6ZnVuY3Rpb24oYSl7cmV0dXJuImNpcmNsZSIhPWEmJiEhYX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5SZW5kZXJlci5FbGVtZW50cyJ9KTtPcGVuTGF5ZXJzLkNvbnRyb2w9T3BlbkxheWVycy5DbGFzcyh7aWQ6bnVsbCxtYXA6bnVsbCxkaXY6bnVsbCx0eXBlOm51bGwsYWxsb3dTZWxlY3Rpb246ITEsZGlzcGxheUNsYXNzOiIiLHRpdGxlOiIiLGF1dG9BY3RpdmF0ZTohMSxhY3RpdmU6bnVsbCxoYW5kbGVyT3B0aW9uczpudWxsLGhhbmRsZXI6bnVsbCxldmVudExpc3RlbmVyczpudWxsLGV2ZW50czpudWxsLGluaXRpYWxpemU6ZnVuY3Rpb24oYSl7dGhpcy5kaXNwbGF5Q2xhc3M9dGhpcy5DTEFTU19OQU1FLnJlcGxhY2UoIk9wZW5MYXllcnMuIiwib2wiKS5yZXBsYWNlKC9cLi9nLCIiKTtPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHRoaXMsYSk7dGhpcy5ldmVudHM9bmV3IE9wZW5MYXllcnMuRXZlbnRzKHRoaXMpO2lmKHRoaXMuZXZlbnRMaXN0ZW5lcnMgaW5zdGFuY2VvZiBPYmplY3QpdGhpcy5ldmVudHMub24odGhpcy5ldmVudExpc3RlbmVycyk7bnVsbD09dGhpcy5pZCYmKHRoaXMuaWQ9T3BlbkxheWVycy5VdGlsLmNyZWF0ZVVuaXF1ZUlEKHRoaXMuQ0xBU1NfTkFNRSsKIl8iKSl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmV2ZW50cyYmKHRoaXMuZXZlbnRMaXN0ZW5lcnMmJnRoaXMuZXZlbnRzLnVuKHRoaXMuZXZlbnRMaXN0ZW5lcnMpLHRoaXMuZXZlbnRzLmRlc3Ryb3koKSx0aGlzLmV2ZW50cz1udWxsKTt0aGlzLmV2ZW50TGlzdGVuZXJzPW51bGw7dGhpcy5oYW5kbGVyJiYodGhpcy5oYW5kbGVyLmRlc3Ryb3koKSx0aGlzLmhhbmRsZXI9bnVsbCk7aWYodGhpcy5oYW5kbGVycyl7Zm9yKHZhciBhIGluIHRoaXMuaGFuZGxlcnMpdGhpcy5oYW5kbGVycy5oYXNPd25Qcm9wZXJ0eShhKSYmImZ1bmN0aW9uIj09dHlwZW9mIHRoaXMuaGFuZGxlcnNbYV0uZGVzdHJveSYmdGhpcy5oYW5kbGVyc1thXS5kZXN0cm95KCk7dGhpcy5oYW5kbGVycz1udWxsfXRoaXMubWFwJiYodGhpcy5tYXAucmVtb3ZlQ29udHJvbCh0aGlzKSx0aGlzLm1hcD1udWxsKTt0aGlzLmRpdj1udWxsfSxzZXRNYXA6ZnVuY3Rpb24oYSl7dGhpcy5tYXA9YTt0aGlzLmhhbmRsZXImJgp0aGlzLmhhbmRsZXIuc2V0TWFwKGEpfSxkcmF3OmZ1bmN0aW9uKGEpe251bGw9PXRoaXMuZGl2JiYodGhpcy5kaXY9T3BlbkxheWVycy5VdGlsLmNyZWF0ZURpdih0aGlzLmlkKSx0aGlzLmRpdi5jbGFzc05hbWU9dGhpcy5kaXNwbGF5Q2xhc3MsdGhpcy5hbGxvd1NlbGVjdGlvbnx8KHRoaXMuZGl2LmNsYXNzTmFtZSs9IiBvbENvbnRyb2xOb1NlbGVjdCIsdGhpcy5kaXYuc2V0QXR0cmlidXRlKCJ1bnNlbGVjdGFibGUiLCJvbiIsMCksdGhpcy5kaXYub25zZWxlY3RzdGFydD1PcGVuTGF5ZXJzLkZ1bmN0aW9uLkZhbHNlKSwiIiE9dGhpcy50aXRsZSYmKHRoaXMuZGl2LnRpdGxlPXRoaXMudGl0bGUpKTtudWxsIT1hJiYodGhpcy5wb3NpdGlvbj1hLmNsb25lKCkpO3RoaXMubW92ZVRvKHRoaXMucG9zaXRpb24pO3JldHVybiB0aGlzLmRpdn0sbW92ZVRvOmZ1bmN0aW9uKGEpe251bGwhPWEmJm51bGwhPXRoaXMuZGl2JiYodGhpcy5kaXYuc3R5bGUubGVmdD1hLngrInB4Iix0aGlzLmRpdi5zdHlsZS50b3A9CmEueSsicHgiKX0sYWN0aXZhdGU6ZnVuY3Rpb24oKXtpZih0aGlzLmFjdGl2ZSlyZXR1cm4hMTt0aGlzLmhhbmRsZXImJnRoaXMuaGFuZGxlci5hY3RpdmF0ZSgpO3RoaXMuYWN0aXZlPSEwO3RoaXMubWFwJiZPcGVuTGF5ZXJzLkVsZW1lbnQuYWRkQ2xhc3ModGhpcy5tYXAudmlld1BvcnREaXYsdGhpcy5kaXNwbGF5Q2xhc3MucmVwbGFjZSgvIC9nLCIiKSsiQWN0aXZlIik7dGhpcy5ldmVudHMudHJpZ2dlckV2ZW50KCJhY3RpdmF0ZSIpO3JldHVybiEwfSxkZWFjdGl2YXRlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYWN0aXZlPyh0aGlzLmhhbmRsZXImJnRoaXMuaGFuZGxlci5kZWFjdGl2YXRlKCksdGhpcy5hY3RpdmU9ITEsdGhpcy5tYXAmJk9wZW5MYXllcnMuRWxlbWVudC5yZW1vdmVDbGFzcyh0aGlzLm1hcC52aWV3UG9ydERpdix0aGlzLmRpc3BsYXlDbGFzcy5yZXBsYWNlKC8gL2csIiIpKyJBY3RpdmUiKSx0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoImRlYWN0aXZhdGUiKSwKITApOiExfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkNvbnRyb2wifSk7T3BlbkxheWVycy5Db250cm9sLlRZUEVfQlVUVE9OPTE7T3BlbkxheWVycy5Db250cm9sLlRZUEVfVE9HR0xFPTI7T3BlbkxheWVycy5Db250cm9sLlRZUEVfVE9PTD0zO09wZW5MYXllcnMuQ29udHJvbC5QYW5lbD1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuQ29udHJvbCx7Y29udHJvbHM6bnVsbCxhdXRvQWN0aXZhdGU6ITAsZGVmYXVsdENvbnRyb2w6bnVsbCxzYXZlU3RhdGU6ITEsYWxsb3dEZXByZXNzOiExLGFjdGl2ZVN0YXRlOm51bGwsaW5pdGlhbGl6ZTpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLkNvbnRyb2wucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxbYV0pO3RoaXMuY29udHJvbHM9W107dGhpcy5hY3RpdmVTdGF0ZT17fX0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMubWFwJiZ0aGlzLm1hcC5ldmVudHMudW5yZWdpc3RlcigiYnV0dG9uY2xpY2siLHRoaXMsdGhpcy5vbkJ1dHRvbkNsaWNrKTtPcGVuTGF5ZXJzLkNvbnRyb2wucHJvdG90eXBlLmRlc3Ryb3kuYXBwbHkodGhpcyxhcmd1bWVudHMpO2Zvcih2YXIgYSxiPXRoaXMuY29udHJvbHMubGVuZ3RoLTE7MDw9YjtiLS0pYT10aGlzLmNvbnRyb2xzW2JdLGEuZXZlbnRzJiYKYS5ldmVudHMudW4oe2FjdGl2YXRlOnRoaXMuaWNvbk9uLGRlYWN0aXZhdGU6dGhpcy5pY29uT2ZmfSksYS5wYW5lbF9kaXY9bnVsbDt0aGlzLmFjdGl2ZVN0YXRlPW51bGx9LGFjdGl2YXRlOmZ1bmN0aW9uKCl7aWYoT3BlbkxheWVycy5Db250cm9sLnByb3RvdHlwZS5hY3RpdmF0ZS5hcHBseSh0aGlzLGFyZ3VtZW50cykpe2Zvcih2YXIgYSxiPTAsYz10aGlzLmNvbnRyb2xzLmxlbmd0aDtiPGM7YisrKWE9dGhpcy5jb250cm9sc1tiXSwoYT09PXRoaXMuZGVmYXVsdENvbnRyb2x8fHRoaXMuc2F2ZVN0YXRlJiZ0aGlzLmFjdGl2ZVN0YXRlW2EuaWRdKSYmYS5hY3RpdmF0ZSgpOyEwPT09dGhpcy5zYXZlU3RhdGUmJih0aGlzLmRlZmF1bHRDb250cm9sPW51bGwpO3RoaXMucmVkcmF3KCk7cmV0dXJuITB9cmV0dXJuITF9LGRlYWN0aXZhdGU6ZnVuY3Rpb24oKXtpZihPcGVuTGF5ZXJzLkNvbnRyb2wucHJvdG90eXBlLmRlYWN0aXZhdGUuYXBwbHkodGhpcyxhcmd1bWVudHMpKXtmb3IodmFyIGEsCmI9MCxjPXRoaXMuY29udHJvbHMubGVuZ3RoO2I8YztiKyspYT10aGlzLmNvbnRyb2xzW2JdLHRoaXMuYWN0aXZlU3RhdGVbYS5pZF09YS5kZWFjdGl2YXRlKCk7dGhpcy5yZWRyYXcoKTtyZXR1cm4hMH1yZXR1cm4hMX0sZHJhdzpmdW5jdGlvbigpe09wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuZHJhdy5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5vdXRzaWRlVmlld3BvcnQ/KHRoaXMuZXZlbnRzLmF0dGFjaFRvRWxlbWVudCh0aGlzLmRpdiksdGhpcy5ldmVudHMucmVnaXN0ZXIoImJ1dHRvbmNsaWNrIix0aGlzLHRoaXMub25CdXR0b25DbGljaykpOnRoaXMubWFwLmV2ZW50cy5yZWdpc3RlcigiYnV0dG9uY2xpY2siLHRoaXMsdGhpcy5vbkJ1dHRvbkNsaWNrKTt0aGlzLmFkZENvbnRyb2xzVG9NYXAodGhpcy5jb250cm9scyk7cmV0dXJuIHRoaXMuZGl2fSxyZWRyYXc6ZnVuY3Rpb24oKXtmb3IodmFyIGE9dGhpcy5kaXYuY2hpbGROb2Rlcy5sZW5ndGgtMTswPD1hO2EtLSl0aGlzLmRpdi5yZW1vdmVDaGlsZCh0aGlzLmRpdi5jaGlsZE5vZGVzW2FdKTsKdGhpcy5kaXYuaW5uZXJIVE1MPSIiO2lmKHRoaXMuYWN0aXZlKWZvcih2YXIgYT0wLGI9dGhpcy5jb250cm9scy5sZW5ndGg7YTxiO2ErKyl0aGlzLmRpdi5hcHBlbmRDaGlsZCh0aGlzLmNvbnRyb2xzW2FdLnBhbmVsX2Rpdil9LGFjdGl2YXRlQ29udHJvbDpmdW5jdGlvbihhKXtpZighdGhpcy5hY3RpdmUpcmV0dXJuITE7aWYoYS50eXBlPT1PcGVuTGF5ZXJzLkNvbnRyb2wuVFlQRV9CVVRUT04pYS50cmlnZ2VyKCk7ZWxzZSBpZihhLnR5cGU9PU9wZW5MYXllcnMuQ29udHJvbC5UWVBFX1RPR0dMRSlhLmFjdGl2ZT9hLmRlYWN0aXZhdGUoKTphLmFjdGl2YXRlKCk7ZWxzZSBpZih0aGlzLmFsbG93RGVwcmVzcyYmYS5hY3RpdmUpYS5kZWFjdGl2YXRlKCk7ZWxzZXtmb3IodmFyIGIsYz0wLGQ9dGhpcy5jb250cm9scy5sZW5ndGg7YzxkO2MrKyliPXRoaXMuY29udHJvbHNbY10sYj09YXx8Yi50eXBlIT09T3BlbkxheWVycy5Db250cm9sLlRZUEVfVE9PTCYmbnVsbCE9Yi50eXBlfHxiLmRlYWN0aXZhdGUoKTsKYS5hY3RpdmF0ZSgpfX0sYWRkQ29udHJvbHM6ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5VdGlsLmlzQXJyYXkoYSl8fChhPVthXSk7dGhpcy5jb250cm9scz10aGlzLmNvbnRyb2xzLmNvbmNhdChhKTtmb3IodmFyIGI9MCxjPWEubGVuZ3RoO2I8YztiKyspe3ZhciBkPWFbYl0sZT10aGlzLmNyZWF0ZUNvbnRyb2xNYXJrdXAoZCk7T3BlbkxheWVycy5FbGVtZW50LmFkZENsYXNzKGUsZC5kaXNwbGF5Q2xhc3MrIkl0ZW1JbmFjdGl2ZSIpO09wZW5MYXllcnMuRWxlbWVudC5hZGRDbGFzcyhlLCJvbEJ1dHRvbiIpOyIiPT1kLnRpdGxlfHxlLnRpdGxlfHwoZS50aXRsZT1kLnRpdGxlKTtkLnBhbmVsX2Rpdj1lfXRoaXMubWFwJiYodGhpcy5hZGRDb250cm9sc1RvTWFwKGEpLHRoaXMucmVkcmF3KCkpfSxjcmVhdGVDb250cm9sTWFya3VwOmZ1bmN0aW9uKGEpe3JldHVybiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKX0sYWRkQ29udHJvbHNUb01hcDpmdW5jdGlvbihhKXtmb3IodmFyIGIsCmM9MCxkPWEubGVuZ3RoO2M8ZDtjKyspYj1hW2NdLCEwPT09Yi5hdXRvQWN0aXZhdGU/KGIuYXV0b0FjdGl2YXRlPSExLHRoaXMubWFwLmFkZENvbnRyb2woYiksYi5hdXRvQWN0aXZhdGU9ITApOih0aGlzLm1hcC5hZGRDb250cm9sKGIpLGIuZGVhY3RpdmF0ZSgpKSxiLmV2ZW50cy5vbih7YWN0aXZhdGU6dGhpcy5pY29uT24sZGVhY3RpdmF0ZTp0aGlzLmljb25PZmZ9KX0saWNvbk9uOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5wYW5lbF9kaXY7YS5jbGFzc05hbWU9YS5jbGFzc05hbWUucmVwbGFjZShSZWdFeHAoIlxcYigiK3RoaXMuZGlzcGxheUNsYXNzKyJJdGVtKUluYWN0aXZlXFxiIiksIiQxQWN0aXZlIil9LGljb25PZmY6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnBhbmVsX2RpdjthLmNsYXNzTmFtZT1hLmNsYXNzTmFtZS5yZXBsYWNlKFJlZ0V4cCgiXFxiKCIrdGhpcy5kaXNwbGF5Q2xhc3MrIkl0ZW0pQWN0aXZlXFxiIiksIiQxSW5hY3RpdmUiKX0sb25CdXR0b25DbGljazpmdW5jdGlvbihhKXt2YXIgYj0KdGhpcy5jb250cm9sczthPWEuYnV0dG9uRWxlbWVudDtmb3IodmFyIGM9Yi5sZW5ndGgtMTswPD1jOy0tYylpZihiW2NdLnBhbmVsX2Rpdj09PWEpe3RoaXMuYWN0aXZhdGVDb250cm9sKGJbY10pO2JyZWFrfX0sZ2V0Q29udHJvbHNCeTpmdW5jdGlvbihhLGIpe3ZhciBjPSJmdW5jdGlvbiI9PXR5cGVvZiBiLnRlc3Q7cmV0dXJuIE9wZW5MYXllcnMuQXJyYXkuZmlsdGVyKHRoaXMuY29udHJvbHMsZnVuY3Rpb24oZCl7cmV0dXJuIGRbYV09PWJ8fGMmJmIudGVzdChkW2FdKX0pfSxnZXRDb250cm9sc0J5TmFtZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5nZXRDb250cm9sc0J5KCJuYW1lIixhKX0sZ2V0Q29udHJvbHNCeUNsYXNzOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmdldENvbnRyb2xzQnkoIkNMQVNTX05BTUUiLGEpfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkNvbnRyb2wuUGFuZWwifSk7T3BlbkxheWVycy5TdHJhdGVneT1PcGVuTGF5ZXJzLkNsYXNzKHtsYXllcjpudWxsLG9wdGlvbnM6bnVsbCxhY3RpdmU6bnVsbCxhdXRvQWN0aXZhdGU6ITAsYXV0b0Rlc3Ryb3k6ITAsaW5pdGlhbGl6ZTpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHRoaXMsYSk7dGhpcy5vcHRpb25zPWE7dGhpcy5hY3RpdmU9ITF9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmRlYWN0aXZhdGUoKTt0aGlzLm9wdGlvbnM9dGhpcy5sYXllcj1udWxsfSxzZXRMYXllcjpmdW5jdGlvbihhKXt0aGlzLmxheWVyPWF9LGFjdGl2YXRlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYWN0aXZlPyExOnRoaXMuYWN0aXZlPSEwfSxkZWFjdGl2YXRlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYWN0aXZlPyh0aGlzLmFjdGl2ZT0hMSwhMCk6ITF9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuU3RyYXRlZ3kifSk7T3BlbkxheWVycy5TdHJhdGVneS5GaXhlZD1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuU3RyYXRlZ3kse3ByZWxvYWQ6ITEsYWN0aXZhdGU6ZnVuY3Rpb24oKXt2YXIgYT1PcGVuTGF5ZXJzLlN0cmF0ZWd5LnByb3RvdHlwZS5hY3RpdmF0ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7aWYoYSlpZih0aGlzLmxheWVyLmV2ZW50cy5vbih7cmVmcmVzaDp0aGlzLmxvYWQsc2NvcGU6dGhpc30pLCEwPT10aGlzLmxheWVyLnZpc2liaWxpdHl8fHRoaXMucHJlbG9hZCl0aGlzLmxvYWQoKTtlbHNlIHRoaXMubGF5ZXIuZXZlbnRzLm9uKHt2aXNpYmlsaXR5Y2hhbmdlZDp0aGlzLmxvYWQsc2NvcGU6dGhpc30pO3JldHVybiBhfSxkZWFjdGl2YXRlOmZ1bmN0aW9uKCl7dmFyIGE9T3BlbkxheWVycy5TdHJhdGVneS5wcm90b3R5cGUuZGVhY3RpdmF0ZS5jYWxsKHRoaXMpO2EmJnRoaXMubGF5ZXIuZXZlbnRzLnVuKHtyZWZyZXNoOnRoaXMubG9hZCx2aXNpYmlsaXR5Y2hhbmdlZDp0aGlzLmxvYWQsCnNjb3BlOnRoaXN9KTtyZXR1cm4gYX0sbG9hZDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmxheWVyO2IuZXZlbnRzLnRyaWdnZXJFdmVudCgibG9hZHN0YXJ0Iix7ZmlsdGVyOmIuZmlsdGVyfSk7Yi5wcm90b2NvbC5yZWFkKE9wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKHtjYWxsYmFjazp0aGlzLm1lcmdlLGZpbHRlcjpiLmZpbHRlcixzY29wZTp0aGlzfSxhKSk7Yi5ldmVudHMudW4oe3Zpc2liaWxpdHljaGFuZ2VkOnRoaXMubG9hZCxzY29wZTp0aGlzfSl9LG1lcmdlOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMubGF5ZXI7Yi5kZXN0cm95RmVhdHVyZXMoKTt2YXIgYz1hLmZlYXR1cmVzO2lmKGMmJjA8Yy5sZW5ndGgpe3ZhciBkPWIucHJvamVjdGlvbixlPWIubWFwLmdldFByb2plY3Rpb25PYmplY3QoKTtpZighZS5lcXVhbHMoZCkpZm9yKHZhciBmLGc9MCxoPWMubGVuZ3RoO2c8aDsrK2cpKGY9Y1tnXS5nZW9tZXRyeSkmJmYudHJhbnNmb3JtKGQsZSk7Yi5hZGRGZWF0dXJlcyhjKX1iLmV2ZW50cy50cmlnZ2VyRXZlbnQoImxvYWRlbmQiLAp7cmVzcG9uc2U6YX0pfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLlN0cmF0ZWd5LkZpeGVkIn0pO09wZW5MYXllcnMuQ29udHJvbC5ab29tPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Db250cm9sLHt6b29tSW5UZXh0OiIrIix6b29tSW5JZDoib2xab29tSW5MaW5rIix6b29tT3V0VGV4dDoiXHUyMjEyIix6b29tT3V0SWQ6Im9sWm9vbU91dExpbmsiLGRyYXc6ZnVuY3Rpb24oKXt2YXIgYT1PcGVuTGF5ZXJzLkNvbnRyb2wucHJvdG90eXBlLmRyYXcuYXBwbHkodGhpcyksYj10aGlzLmdldE9yQ3JlYXRlTGlua3MoYSksYz1iLnpvb21JbixiPWIuem9vbU91dCxkPXRoaXMubWFwLmV2ZW50cztiLnBhcmVudE5vZGUhPT1hJiYoZD10aGlzLmV2ZW50cyxkLmF0dGFjaFRvRWxlbWVudChiLnBhcmVudE5vZGUpKTtkLnJlZ2lzdGVyKCJidXR0b25jbGljayIsdGhpcyx0aGlzLm9uWm9vbUNsaWNrKTt0aGlzLnpvb21Jbkxpbms9Yzt0aGlzLnpvb21PdXRMaW5rPWI7cmV0dXJuIGF9LGdldE9yQ3JlYXRlTGlua3M6ZnVuY3Rpb24oYSl7dmFyIGI9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy56b29tSW5JZCksCmM9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy56b29tT3V0SWQpO2J8fChiPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImEiKSxiLmhyZWY9IiN6b29tSW4iLGIuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodGhpcy56b29tSW5UZXh0KSksYi5jbGFzc05hbWU9Im9sQ29udHJvbFpvb21JbiIsYS5hcHBlbmRDaGlsZChiKSk7T3BlbkxheWVycy5FbGVtZW50LmFkZENsYXNzKGIsIm9sQnV0dG9uIik7Y3x8KGM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYSIpLGMuaHJlZj0iI3pvb21PdXQiLGMuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodGhpcy56b29tT3V0VGV4dCkpLGMuY2xhc3NOYW1lPSJvbENvbnRyb2xab29tT3V0IixhLmFwcGVuZENoaWxkKGMpKTtPcGVuTGF5ZXJzLkVsZW1lbnQuYWRkQ2xhc3MoYywib2xCdXR0b24iKTtyZXR1cm57em9vbUluOmIsem9vbU91dDpjfX0sb25ab29tQ2xpY2s6ZnVuY3Rpb24oYSl7YT1hLmJ1dHRvbkVsZW1lbnQ7CmE9PT10aGlzLnpvb21Jbkxpbms/dGhpcy5tYXAuem9vbUluKCk6YT09PXRoaXMuem9vbU91dExpbmsmJnRoaXMubWFwLnpvb21PdXQoKX0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMubWFwJiZ0aGlzLm1hcC5ldmVudHMudW5yZWdpc3RlcigiYnV0dG9uY2xpY2siLHRoaXMsdGhpcy5vblpvb21DbGljayk7ZGVsZXRlIHRoaXMuem9vbUluTGluaztkZWxldGUgdGhpcy56b29tT3V0TGluaztPcGVuTGF5ZXJzLkNvbnRyb2wucHJvdG90eXBlLmRlc3Ryb3kuYXBwbHkodGhpcyl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuQ29udHJvbC5ab29tIn0pO09wZW5MYXllcnMuR2VvbWV0cnkuUG9seWdvbj1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuR2VvbWV0cnkuQ29sbGVjdGlvbix7Y29tcG9uZW50VHlwZXM6WyJPcGVuTGF5ZXJzLkdlb21ldHJ5LkxpbmVhclJpbmciXSxnZXRBcmVhOmZ1bmN0aW9uKCl7dmFyIGE9MDtpZih0aGlzLmNvbXBvbmVudHMmJjA8dGhpcy5jb21wb25lbnRzLmxlbmd0aClmb3IodmFyIGE9YStNYXRoLmFicyh0aGlzLmNvbXBvbmVudHNbMF0uZ2V0QXJlYSgpKSxiPTEsYz10aGlzLmNvbXBvbmVudHMubGVuZ3RoO2I8YztiKyspYS09TWF0aC5hYnModGhpcy5jb21wb25lbnRzW2JdLmdldEFyZWEoKSk7cmV0dXJuIGF9LGdldEdlb2Rlc2ljQXJlYTpmdW5jdGlvbihhKXt2YXIgYj0wO2lmKHRoaXMuY29tcG9uZW50cyYmMDx0aGlzLmNvbXBvbmVudHMubGVuZ3RoKWZvcih2YXIgYj1iK01hdGguYWJzKHRoaXMuY29tcG9uZW50c1swXS5nZXRHZW9kZXNpY0FyZWEoYSkpLGM9MSxkPXRoaXMuY29tcG9uZW50cy5sZW5ndGg7YzwKZDtjKyspYi09TWF0aC5hYnModGhpcy5jb21wb25lbnRzW2NdLmdldEdlb2Rlc2ljQXJlYShhKSk7cmV0dXJuIGJ9LGNvbnRhaW5zUG9pbnQ6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jb21wb25lbnRzLmxlbmd0aCxjPSExO2lmKDA8YiYmKGM9dGhpcy5jb21wb25lbnRzWzBdLmNvbnRhaW5zUG9pbnQoYSksMSE9PWMmJmMmJjE8YikpZm9yKHZhciBkLGU9MTtlPGI7KytlKWlmKGQ9dGhpcy5jb21wb25lbnRzW2VdLmNvbnRhaW5zUG9pbnQoYSkpe2M9MT09PWQ/MTohMTticmVha31yZXR1cm4gY30saW50ZXJzZWN0czpmdW5jdGlvbihhKXt2YXIgYj0hMSxjLGQ7aWYoIk9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQiPT1hLkNMQVNTX05BTUUpYj10aGlzLmNvbnRhaW5zUG9pbnQoYSk7ZWxzZSBpZigiT3BlbkxheWVycy5HZW9tZXRyeS5MaW5lU3RyaW5nIj09YS5DTEFTU19OQU1FfHwiT3BlbkxheWVycy5HZW9tZXRyeS5MaW5lYXJSaW5nIj09YS5DTEFTU19OQU1FKXtjPTA7Zm9yKGQ9CnRoaXMuY29tcG9uZW50cy5sZW5ndGg7YzxkJiYhKGI9YS5pbnRlcnNlY3RzKHRoaXMuY29tcG9uZW50c1tjXSkpOysrYyk7aWYoIWIpZm9yKGM9MCxkPWEuY29tcG9uZW50cy5sZW5ndGg7YzxkJiYhKGI9dGhpcy5jb250YWluc1BvaW50KGEuY29tcG9uZW50c1tjXSkpOysrYyk7fWVsc2UgZm9yKGM9MCxkPWEuY29tcG9uZW50cy5sZW5ndGg7YzxkJiYhKGI9dGhpcy5pbnRlcnNlY3RzKGEuY29tcG9uZW50c1tjXSkpOysrYyk7aWYoIWImJiJPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvbHlnb24iPT1hLkNMQVNTX05BTUUpe3ZhciBlPXRoaXMuY29tcG9uZW50c1swXTtjPTA7Zm9yKGQ9ZS5jb21wb25lbnRzLmxlbmd0aDtjPGQmJiEoYj1hLmNvbnRhaW5zUG9pbnQoZS5jb21wb25lbnRzW2NdKSk7KytjKTt9cmV0dXJuIGJ9LGRpc3RhbmNlVG86ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYiYmITE9PT1iLmVkZ2UmJnRoaXMuaW50ZXJzZWN0cyhhKT8wOk9wZW5MYXllcnMuR2VvbWV0cnkuQ29sbGVjdGlvbi5wcm90b3R5cGUuZGlzdGFuY2VUby5hcHBseSh0aGlzLApbYSxiXSl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuR2VvbWV0cnkuUG9seWdvbiJ9KTtPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvbHlnb24uY3JlYXRlUmVndWxhclBvbHlnb249ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9TWF0aC5QSSooMS9jLTAuNSk7ZCYmKGUrPWQvMTgwKk1hdGguUEkpO2Zvcih2YXIgZixnPVtdLGg9MDtoPGM7KytoKWY9ZSsyKmgqTWF0aC5QSS9jLGQ9YS54K2IqTWF0aC5jb3MoZiksZj1hLnkrYipNYXRoLnNpbihmKSxnLnB1c2gobmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoZCxmKSk7YT1uZXcgT3BlbkxheWVycy5HZW9tZXRyeS5MaW5lYXJSaW5nKGcpO3JldHVybiBuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2x5Z29uKFthXSl9O09wZW5MYXllcnMuR2VvbWV0cnkuTXVsdGlQb2x5Z29uPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5HZW9tZXRyeS5Db2xsZWN0aW9uLHtjb21wb25lbnRUeXBlczpbIk9wZW5MYXllcnMuR2VvbWV0cnkuUG9seWdvbiJdLENMQVNTX05BTUU6Ik9wZW5MYXllcnMuR2VvbWV0cnkuTXVsdGlQb2x5Z29uIn0pO09wZW5MYXllcnMuRmVhdHVyZT1PcGVuTGF5ZXJzLkNsYXNzKHtsYXllcjpudWxsLGlkOm51bGwsbG9ubGF0Om51bGwsZGF0YTpudWxsLG1hcmtlcjpudWxsLHBvcHVwQ2xhc3M6bnVsbCxwb3B1cDpudWxsLGluaXRpYWxpemU6ZnVuY3Rpb24oYSxiLGMpe3RoaXMubGF5ZXI9YTt0aGlzLmxvbmxhdD1iO3RoaXMuZGF0YT1udWxsIT1jP2M6e307dGhpcy5pZD1PcGVuTGF5ZXJzLlV0aWwuY3JlYXRlVW5pcXVlSUQodGhpcy5DTEFTU19OQU1FKyJfIil9LGRlc3Ryb3k6ZnVuY3Rpb24oKXtudWxsIT10aGlzLmxheWVyJiZudWxsIT10aGlzLmxheWVyLm1hcCYmbnVsbCE9dGhpcy5wb3B1cCYmdGhpcy5sYXllci5tYXAucmVtb3ZlUG9wdXAodGhpcy5wb3B1cCk7bnVsbCE9dGhpcy5sYXllciYmbnVsbCE9dGhpcy5tYXJrZXImJnRoaXMubGF5ZXIucmVtb3ZlTWFya2VyKHRoaXMubWFya2VyKTt0aGlzLmRhdGE9dGhpcy5sb25sYXQ9dGhpcy5pZD10aGlzLmxheWVyPW51bGw7bnVsbCE9dGhpcy5tYXJrZXImJgoodGhpcy5kZXN0cm95TWFya2VyKHRoaXMubWFya2VyKSx0aGlzLm1hcmtlcj1udWxsKTtudWxsIT10aGlzLnBvcHVwJiYodGhpcy5kZXN0cm95UG9wdXAodGhpcy5wb3B1cCksdGhpcy5wb3B1cD1udWxsKX0sb25TY3JlZW46ZnVuY3Rpb24oKXt2YXIgYT0hMTtudWxsIT10aGlzLmxheWVyJiZudWxsIT10aGlzLmxheWVyLm1hcCYmKGE9dGhpcy5sYXllci5tYXAuZ2V0RXh0ZW50KCkuY29udGFpbnNMb25MYXQodGhpcy5sb25sYXQpKTtyZXR1cm4gYX0sY3JlYXRlTWFya2VyOmZ1bmN0aW9uKCl7bnVsbCE9dGhpcy5sb25sYXQmJih0aGlzLm1hcmtlcj1uZXcgT3BlbkxheWVycy5NYXJrZXIodGhpcy5sb25sYXQsdGhpcy5kYXRhLmljb24pKTtyZXR1cm4gdGhpcy5tYXJrZXJ9LGRlc3Ryb3lNYXJrZXI6ZnVuY3Rpb24oKXt0aGlzLm1hcmtlci5kZXN0cm95KCl9LGNyZWF0ZVBvcHVwOmZ1bmN0aW9uKGEpe251bGwhPXRoaXMubG9ubGF0JiYodGhpcy5wb3B1cHx8KHRoaXMucG9wdXA9bmV3ICh0aGlzLnBvcHVwQ2xhc3M/CnRoaXMucG9wdXBDbGFzczpPcGVuTGF5ZXJzLlBvcHVwLkFuY2hvcmVkKSh0aGlzLmlkKyJfcG9wdXAiLHRoaXMubG9ubGF0LHRoaXMuZGF0YS5wb3B1cFNpemUsdGhpcy5kYXRhLnBvcHVwQ29udGVudEhUTUwsdGhpcy5tYXJrZXI/dGhpcy5tYXJrZXIuaWNvbjpudWxsLGEpKSxudWxsIT10aGlzLmRhdGEub3ZlcmZsb3cmJih0aGlzLnBvcHVwLmNvbnRlbnREaXYuc3R5bGUub3ZlcmZsb3c9dGhpcy5kYXRhLm92ZXJmbG93KSx0aGlzLnBvcHVwLmZlYXR1cmU9dGhpcyk7cmV0dXJuIHRoaXMucG9wdXB9LGRlc3Ryb3lQb3B1cDpmdW5jdGlvbigpe3RoaXMucG9wdXAmJih0aGlzLnBvcHVwLmZlYXR1cmU9bnVsbCx0aGlzLnBvcHVwLmRlc3Ryb3koKSx0aGlzLnBvcHVwPW51bGwpfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkZlYXR1cmUifSk7T3BlbkxheWVycy5TdGF0ZT17VU5LTk9XTjoiVW5rbm93biIsSU5TRVJUOiJJbnNlcnQiLFVQREFURToiVXBkYXRlIixERUxFVEU6IkRlbGV0ZSJ9OwpPcGVuTGF5ZXJzLkZlYXR1cmUuVmVjdG9yPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5GZWF0dXJlLHtmaWQ6bnVsbCxnZW9tZXRyeTpudWxsLGF0dHJpYnV0ZXM6bnVsbCxib3VuZHM6bnVsbCxzdGF0ZTpudWxsLHN0eWxlOm51bGwsdXJsOm51bGwscmVuZGVySW50ZW50OiJkZWZhdWx0Iixtb2RpZmllZDpudWxsLGluaXRpYWxpemU6ZnVuY3Rpb24oYSxiLGMpe09wZW5MYXllcnMuRmVhdHVyZS5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLFtudWxsLG51bGwsYl0pO3RoaXMubG9ubGF0PW51bGw7dGhpcy5nZW9tZXRyeT1hP2E6bnVsbDt0aGlzLnN0YXRlPW51bGw7dGhpcy5hdHRyaWJ1dGVzPXt9O2ImJih0aGlzLmF0dHJpYnV0ZXM9T3BlbkxheWVycy5VdGlsLmV4dGVuZCh0aGlzLmF0dHJpYnV0ZXMsYikpO3RoaXMuc3R5bGU9Yz9jOm51bGx9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmxheWVyJiYodGhpcy5sYXllci5yZW1vdmVGZWF0dXJlcyh0aGlzKSx0aGlzLmxheWVyPQpudWxsKTt0aGlzLm1vZGlmaWVkPXRoaXMuZ2VvbWV0cnk9bnVsbDtPcGVuTGF5ZXJzLkZlYXR1cmUucHJvdG90eXBlLmRlc3Ryb3kuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxjbG9uZTpmdW5jdGlvbigpe3JldHVybiBuZXcgT3BlbkxheWVycy5GZWF0dXJlLlZlY3Rvcih0aGlzLmdlb21ldHJ5P3RoaXMuZ2VvbWV0cnkuY2xvbmUoKTpudWxsLHRoaXMuYXR0cmlidXRlcyx0aGlzLnN0eWxlKX0sb25TY3JlZW46ZnVuY3Rpb24oYSl7dmFyIGI9ITE7dGhpcy5sYXllciYmdGhpcy5sYXllci5tYXAmJihiPXRoaXMubGF5ZXIubWFwLmdldEV4dGVudCgpLGE/KGE9dGhpcy5nZW9tZXRyeS5nZXRCb3VuZHMoKSxiPWIuaW50ZXJzZWN0c0JvdW5kcyhhKSk6Yj1iLnRvR2VvbWV0cnkoKS5pbnRlcnNlY3RzKHRoaXMuZ2VvbWV0cnkpKTtyZXR1cm4gYn0sZ2V0VmlzaWJpbGl0eTpmdW5jdGlvbigpe3JldHVybiEodGhpcy5zdHlsZSYmIm5vbmUiPT10aGlzLnN0eWxlLmRpc3BsYXl8fCF0aGlzLmxheWVyfHwKdGhpcy5sYXllciYmdGhpcy5sYXllci5zdHlsZU1hcCYmIm5vbmUiPT10aGlzLmxheWVyLnN0eWxlTWFwLmNyZWF0ZVN5bWJvbGl6ZXIodGhpcyx0aGlzLnJlbmRlckludGVudCkuZGlzcGxheXx8dGhpcy5sYXllciYmIXRoaXMubGF5ZXIuZ2V0VmlzaWJpbGl0eSgpKX0sY3JlYXRlTWFya2VyOmZ1bmN0aW9uKCl7cmV0dXJuIG51bGx9LGRlc3Ryb3lNYXJrZXI6ZnVuY3Rpb24oKXt9LGNyZWF0ZVBvcHVwOmZ1bmN0aW9uKCl7cmV0dXJuIG51bGx9LGF0UG9pbnQ6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPSExO3RoaXMuZ2VvbWV0cnkmJihkPXRoaXMuZ2VvbWV0cnkuYXRQb2ludChhLGIsYykpO3JldHVybiBkfSxkZXN0cm95UG9wdXA6ZnVuY3Rpb24oKXt9LG1vdmU6ZnVuY3Rpb24oYSl7aWYodGhpcy5sYXllciYmdGhpcy5nZW9tZXRyeS5tb3ZlKXthPSJPcGVuTGF5ZXJzLkxvbkxhdCI9PWEuQ0xBU1NfTkFNRT90aGlzLmxheWVyLmdldFZpZXdQb3J0UHhGcm9tTG9uTGF0KGEpOmE7dmFyIGI9CnRoaXMubGF5ZXIuZ2V0Vmlld1BvcnRQeEZyb21Mb25MYXQodGhpcy5nZW9tZXRyeS5nZXRCb3VuZHMoKS5nZXRDZW50ZXJMb25MYXQoKSksYz10aGlzLmxheWVyLm1hcC5nZXRSZXNvbHV0aW9uKCk7dGhpcy5nZW9tZXRyeS5tb3ZlKGMqKGEueC1iLngpLGMqKGIueS1hLnkpKTt0aGlzLmxheWVyLmRyYXdGZWF0dXJlKHRoaXMpO3JldHVybiBifX0sdG9TdGF0ZTpmdW5jdGlvbihhKXtpZihhPT1PcGVuTGF5ZXJzLlN0YXRlLlVQREFURSlzd2l0Y2godGhpcy5zdGF0ZSl7Y2FzZSBPcGVuTGF5ZXJzLlN0YXRlLlVOS05PV046Y2FzZSBPcGVuTGF5ZXJzLlN0YXRlLkRFTEVURTp0aGlzLnN0YXRlPWF9ZWxzZSBpZihhPT1PcGVuTGF5ZXJzLlN0YXRlLklOU0VSVClzd2l0Y2godGhpcy5zdGF0ZSl7Y2FzZSBPcGVuTGF5ZXJzLlN0YXRlLlVOS05PV046YnJlYWs7ZGVmYXVsdDp0aGlzLnN0YXRlPWF9ZWxzZSBpZihhPT1PcGVuTGF5ZXJzLlN0YXRlLkRFTEVURSlzd2l0Y2godGhpcy5zdGF0ZSl7Y2FzZSBPcGVuTGF5ZXJzLlN0YXRlLlVOS05PV046Y2FzZSBPcGVuTGF5ZXJzLlN0YXRlLlVQREFURTp0aGlzLnN0YXRlPQphfWVsc2UgYT09T3BlbkxheWVycy5TdGF0ZS5VTktOT1dOJiYodGhpcy5zdGF0ZT1hKX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5GZWF0dXJlLlZlY3RvciJ9KTsKT3BlbkxheWVycy5GZWF0dXJlLlZlY3Rvci5zdHlsZT17ImRlZmF1bHQiOntmaWxsQ29sb3I6IiNlZTk5MDAiLGZpbGxPcGFjaXR5OjAuNCxob3ZlckZpbGxDb2xvcjoid2hpdGUiLGhvdmVyRmlsbE9wYWNpdHk6MC44LHN0cm9rZUNvbG9yOiIjZWU5OTAwIixzdHJva2VPcGFjaXR5OjEsc3Ryb2tlV2lkdGg6MSxzdHJva2VMaW5lY2FwOiJyb3VuZCIsc3Ryb2tlRGFzaHN0eWxlOiJzb2xpZCIsaG92ZXJTdHJva2VDb2xvcjoicmVkIixob3ZlclN0cm9rZU9wYWNpdHk6MSxob3ZlclN0cm9rZVdpZHRoOjAuMixwb2ludFJhZGl1czo2LGhvdmVyUG9pbnRSYWRpdXM6MSxob3ZlclBvaW50VW5pdDoiJSIscG9pbnRlckV2ZW50czoidmlzaWJsZVBhaW50ZWQiLGN1cnNvcjoiaW5oZXJpdCIsZm9udENvbG9yOiIjMDAwMDAwIixsYWJlbEFsaWduOiJjbSIsbGFiZWxPdXRsaW5lQ29sb3I6IndoaXRlIixsYWJlbE91dGxpbmVXaWR0aDozfSxzZWxlY3Q6e2ZpbGxDb2xvcjoiYmx1ZSIsZmlsbE9wYWNpdHk6MC40LApob3ZlckZpbGxDb2xvcjoid2hpdGUiLGhvdmVyRmlsbE9wYWNpdHk6MC44LHN0cm9rZUNvbG9yOiJibHVlIixzdHJva2VPcGFjaXR5OjEsc3Ryb2tlV2lkdGg6MixzdHJva2VMaW5lY2FwOiJyb3VuZCIsc3Ryb2tlRGFzaHN0eWxlOiJzb2xpZCIsaG92ZXJTdHJva2VDb2xvcjoicmVkIixob3ZlclN0cm9rZU9wYWNpdHk6MSxob3ZlclN0cm9rZVdpZHRoOjAuMixwb2ludFJhZGl1czo2LGhvdmVyUG9pbnRSYWRpdXM6MSxob3ZlclBvaW50VW5pdDoiJSIscG9pbnRlckV2ZW50czoidmlzaWJsZVBhaW50ZWQiLGN1cnNvcjoicG9pbnRlciIsZm9udENvbG9yOiIjMDAwMDAwIixsYWJlbEFsaWduOiJjbSIsbGFiZWxPdXRsaW5lQ29sb3I6IndoaXRlIixsYWJlbE91dGxpbmVXaWR0aDozfSx0ZW1wb3Jhcnk6e2ZpbGxDb2xvcjoiIzY2Y2NjYyIsZmlsbE9wYWNpdHk6MC4yLGhvdmVyRmlsbENvbG9yOiJ3aGl0ZSIsaG92ZXJGaWxsT3BhY2l0eTowLjgsc3Ryb2tlQ29sb3I6IiM2NmNjY2MiLHN0cm9rZU9wYWNpdHk6MSwKc3Ryb2tlTGluZWNhcDoicm91bmQiLHN0cm9rZVdpZHRoOjIsc3Ryb2tlRGFzaHN0eWxlOiJzb2xpZCIsaG92ZXJTdHJva2VDb2xvcjoicmVkIixob3ZlclN0cm9rZU9wYWNpdHk6MSxob3ZlclN0cm9rZVdpZHRoOjAuMixwb2ludFJhZGl1czo2LGhvdmVyUG9pbnRSYWRpdXM6MSxob3ZlclBvaW50VW5pdDoiJSIscG9pbnRlckV2ZW50czoidmlzaWJsZVBhaW50ZWQiLGN1cnNvcjoiaW5oZXJpdCIsZm9udENvbG9yOiIjMDAwMDAwIixsYWJlbEFsaWduOiJjbSIsbGFiZWxPdXRsaW5lQ29sb3I6IndoaXRlIixsYWJlbE91dGxpbmVXaWR0aDozfSwiZGVsZXRlIjp7ZGlzcGxheToibm9uZSJ9fTtPcGVuTGF5ZXJzLlN0eWxlPU9wZW5MYXllcnMuQ2xhc3Moe2lkOm51bGwsbmFtZTpudWxsLHRpdGxlOm51bGwsZGVzY3JpcHRpb246bnVsbCxsYXllck5hbWU6bnVsbCxpc0RlZmF1bHQ6ITEscnVsZXM6bnVsbCxjb250ZXh0Om51bGwsZGVmYXVsdFN0eWxlOm51bGwsZGVmYXVsdHNQZXJTeW1ib2xpemVyOiExLHByb3BlcnR5U3R5bGVzOm51bGwsaW5pdGlhbGl6ZTpmdW5jdGlvbihhLGIpe09wZW5MYXllcnMuVXRpbC5leHRlbmQodGhpcyxiKTt0aGlzLnJ1bGVzPVtdO2ImJmIucnVsZXMmJnRoaXMuYWRkUnVsZXMoYi5ydWxlcyk7dGhpcy5zZXREZWZhdWx0U3R5bGUoYXx8T3BlbkxheWVycy5GZWF0dXJlLlZlY3Rvci5zdHlsZVsiZGVmYXVsdCJdKTt0aGlzLmlkPU9wZW5MYXllcnMuVXRpbC5jcmVhdGVVbmlxdWVJRCh0aGlzLkNMQVNTX05BTUUrIl8iKX0sZGVzdHJveTpmdW5jdGlvbigpe2Zvcih2YXIgYT0wLGI9dGhpcy5ydWxlcy5sZW5ndGg7YTxiO2ErKyl0aGlzLnJ1bGVzW2FdLmRlc3Ryb3koKSwKdGhpcy5ydWxlc1thXT1udWxsO3RoaXMuZGVmYXVsdFN0eWxlPXRoaXMucnVsZXM9bnVsbH0sY3JlYXRlU3ltYm9saXplcjpmdW5jdGlvbihhKXtmb3IodmFyIGI9dGhpcy5kZWZhdWx0c1BlclN5bWJvbGl6ZXI/e306dGhpcy5jcmVhdGVMaXRlcmFscyhPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHt9LHRoaXMuZGVmYXVsdFN0eWxlKSxhKSxjPXRoaXMucnVsZXMsZCxlPVtdLGY9ITEsZz0wLGg9Yy5sZW5ndGg7ZzxoO2crKylkPWNbZ10sZC5ldmFsdWF0ZShhKSYmKGQgaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLlJ1bGUmJmQuZWxzZUZpbHRlcj9lLnB1c2goZCk6KGY9ITAsdGhpcy5hcHBseVN5bWJvbGl6ZXIoZCxiLGEpKSk7aWYoITE9PWYmJjA8ZS5sZW5ndGgpZm9yKGY9ITAsZz0wLGg9ZS5sZW5ndGg7ZzxoO2crKyl0aGlzLmFwcGx5U3ltYm9saXplcihlW2ddLGIsYSk7MDxjLmxlbmd0aCYmITE9PWYmJihiLmRpc3BsYXk9Im5vbmUiKTtudWxsIT1iLmxhYmVsJiYic3RyaW5nIiE9PXR5cGVvZiBiLmxhYmVsJiYKKGIubGFiZWw9U3RyaW5nKGIubGFiZWwpKTtyZXR1cm4gYn0sYXBwbHlTeW1ib2xpemVyOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD1jLmdlb21ldHJ5P3RoaXMuZ2V0U3ltYm9saXplclByZWZpeChjLmdlb21ldHJ5KTpPcGVuTGF5ZXJzLlN0eWxlLlNZTUJPTElaRVJfUFJFRklYRVNbMF07YT1hLnN5bWJvbGl6ZXJbZF18fGEuc3ltYm9saXplcjshMD09PXRoaXMuZGVmYXVsdHNQZXJTeW1ib2xpemVyJiYoZD10aGlzLmRlZmF1bHRTdHlsZSxPcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyhhLHtwb2ludFJhZGl1czpkLnBvaW50UmFkaXVzfSksITAhPT1hLnN0cm9rZSYmITAhPT1hLmdyYXBoaWN8fE9wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKGEse3N0cm9rZVdpZHRoOmQuc3Ryb2tlV2lkdGgsc3Ryb2tlQ29sb3I6ZC5zdHJva2VDb2xvcixzdHJva2VPcGFjaXR5OmQuc3Ryb2tlT3BhY2l0eSxzdHJva2VEYXNoc3R5bGU6ZC5zdHJva2VEYXNoc3R5bGUsc3Ryb2tlTGluZWNhcDpkLnN0cm9rZUxpbmVjYXB9KSwKITAhPT1hLmZpbGwmJiEwIT09YS5ncmFwaGljfHxPcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyhhLHtmaWxsQ29sb3I6ZC5maWxsQ29sb3IsZmlsbE9wYWNpdHk6ZC5maWxsT3BhY2l0eX0pLCEwPT09YS5ncmFwaGljJiZPcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyhhLHtwb2ludFJhZGl1czp0aGlzLmRlZmF1bHRTdHlsZS5wb2ludFJhZGl1cyxleHRlcm5hbEdyYXBoaWM6dGhpcy5kZWZhdWx0U3R5bGUuZXh0ZXJuYWxHcmFwaGljLGdyYXBoaWNOYW1lOnRoaXMuZGVmYXVsdFN0eWxlLmdyYXBoaWNOYW1lLGdyYXBoaWNPcGFjaXR5OnRoaXMuZGVmYXVsdFN0eWxlLmdyYXBoaWNPcGFjaXR5LGdyYXBoaWNXaWR0aDp0aGlzLmRlZmF1bHRTdHlsZS5ncmFwaGljV2lkdGgsZ3JhcGhpY0hlaWdodDp0aGlzLmRlZmF1bHRTdHlsZS5ncmFwaGljSGVpZ2h0LGdyYXBoaWNYT2Zmc2V0OnRoaXMuZGVmYXVsdFN0eWxlLmdyYXBoaWNYT2Zmc2V0LGdyYXBoaWNZT2Zmc2V0OnRoaXMuZGVmYXVsdFN0eWxlLmdyYXBoaWNZT2Zmc2V0fSkpOwpyZXR1cm4gdGhpcy5jcmVhdGVMaXRlcmFscyhPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKGIsYSksYyl9LGNyZWF0ZUxpdGVyYWxzOmZ1bmN0aW9uKGEsYil7dmFyIGM9T3BlbkxheWVycy5VdGlsLmV4dGVuZCh7fSxiLmF0dHJpYnV0ZXN8fGIuZGF0YSk7T3BlbkxheWVycy5VdGlsLmV4dGVuZChjLHRoaXMuY29udGV4dCk7Zm9yKHZhciBkIGluIHRoaXMucHJvcGVydHlTdHlsZXMpYVtkXT1PcGVuTGF5ZXJzLlN0eWxlLmNyZWF0ZUxpdGVyYWwoYVtkXSxjLGIsZCk7cmV0dXJuIGF9LGZpbmRQcm9wZXJ0eVN0eWxlczpmdW5jdGlvbigpe3ZhciBhPXt9O3RoaXMuYWRkUHJvcGVydHlTdHlsZXMoYSx0aGlzLmRlZmF1bHRTdHlsZSk7Zm9yKHZhciBiPXRoaXMucnVsZXMsYyxkLGU9MCxmPWIubGVuZ3RoO2U8ZjtlKyspe2M9YltlXS5zeW1ib2xpemVyO2Zvcih2YXIgZyBpbiBjKWlmKGQ9Y1tnXSwib2JqZWN0Ij09dHlwZW9mIGQpdGhpcy5hZGRQcm9wZXJ0eVN0eWxlcyhhLGQpO2Vsc2V7dGhpcy5hZGRQcm9wZXJ0eVN0eWxlcyhhLApjKTticmVha319cmV0dXJuIGF9LGFkZFByb3BlcnR5U3R5bGVzOmZ1bmN0aW9uKGEsYil7dmFyIGMsZDtmb3IoZCBpbiBiKWM9YltkXSwic3RyaW5nIj09dHlwZW9mIGMmJmMubWF0Y2goL1wkXHtcdytcfS8pJiYoYVtkXT0hMCk7cmV0dXJuIGF9LGFkZFJ1bGVzOmZ1bmN0aW9uKGEpe0FycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KHRoaXMucnVsZXMsYSk7dGhpcy5wcm9wZXJ0eVN0eWxlcz10aGlzLmZpbmRQcm9wZXJ0eVN0eWxlcygpfSxzZXREZWZhdWx0U3R5bGU6ZnVuY3Rpb24oYSl7dGhpcy5kZWZhdWx0U3R5bGU9YTt0aGlzLnByb3BlcnR5U3R5bGVzPXRoaXMuZmluZFByb3BlcnR5U3R5bGVzKCl9LGdldFN5bWJvbGl6ZXJQcmVmaXg6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPU9wZW5MYXllcnMuU3R5bGUuU1lNQk9MSVpFUl9QUkVGSVhFUyxjPTAsZD1iLmxlbmd0aDtjPGQ7YysrKWlmKC0xIT1hLkNMQVNTX05BTUUuaW5kZXhPZihiW2NdKSlyZXR1cm4gYltjXX0sY2xvbmU6ZnVuY3Rpb24oKXt2YXIgYT0KT3BlbkxheWVycy5VdGlsLmV4dGVuZCh7fSx0aGlzKTtpZih0aGlzLnJ1bGVzKXthLnJ1bGVzPVtdO2Zvcih2YXIgYj0wLGM9dGhpcy5ydWxlcy5sZW5ndGg7YjxjOysrYilhLnJ1bGVzLnB1c2godGhpcy5ydWxlc1tiXS5jbG9uZSgpKX1hLmNvbnRleHQ9dGhpcy5jb250ZXh0JiZPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHt9LHRoaXMuY29udGV4dCk7Yj1PcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHt9LHRoaXMuZGVmYXVsdFN0eWxlKTtyZXR1cm4gbmV3IE9wZW5MYXllcnMuU3R5bGUoYixhKX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5TdHlsZSJ9KTtPcGVuTGF5ZXJzLlN0eWxlLmNyZWF0ZUxpdGVyYWw9ZnVuY3Rpb24oYSxiLGMsZCl7InN0cmluZyI9PXR5cGVvZiBhJiYtMSE9YS5pbmRleE9mKCIkeyIpJiYoYT1PcGVuTGF5ZXJzLlN0cmluZy5mb3JtYXQoYSxiLFtjLGRdKSxhPWlzTmFOKGEpfHwhYT9hOnBhcnNlRmxvYXQoYSkpO3JldHVybiBhfTsKT3BlbkxheWVycy5TdHlsZS5TWU1CT0xJWkVSX1BSRUZJWEVTPVsiUG9pbnQiLCJMaW5lIiwiUG9seWdvbiIsIlRleHQiLCJSYXN0ZXIiXTtPcGVuTGF5ZXJzLkZpbHRlcj1PcGVuTGF5ZXJzLkNsYXNzKHtpbml0aWFsaXplOmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuVXRpbC5leHRlbmQodGhpcyxhKX0sZGVzdHJveTpmdW5jdGlvbigpe30sZXZhbHVhdGU6ZnVuY3Rpb24oYSl7cmV0dXJuITB9LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuIG51bGx9LHRvU3RyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIE9wZW5MYXllcnMuRm9ybWF0JiZPcGVuTGF5ZXJzLkZvcm1hdC5DUUw/T3BlbkxheWVycy5Gb3JtYXQuQ1FMLnByb3RvdHlwZS53cml0ZSh0aGlzKTpPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodGhpcyl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuRmlsdGVyIn0pO09wZW5MYXllcnMuRmlsdGVyLlNwYXRpYWw9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkZpbHRlcix7dHlwZTpudWxsLHByb3BlcnR5Om51bGwsdmFsdWU6bnVsbCxkaXN0YW5jZTpudWxsLGRpc3RhbmNlVW5pdHM6bnVsbCxldmFsdWF0ZTpmdW5jdGlvbihhKXt2YXIgYj0hMTtzd2l0Y2godGhpcy50eXBlKXtjYXNlIE9wZW5MYXllcnMuRmlsdGVyLlNwYXRpYWwuQkJPWDpjYXNlIE9wZW5MYXllcnMuRmlsdGVyLlNwYXRpYWwuSU5URVJTRUNUUzppZihhLmdlb21ldHJ5KXt2YXIgYz10aGlzLnZhbHVlOyJPcGVuTGF5ZXJzLkJvdW5kcyI9PXRoaXMudmFsdWUuQ0xBU1NfTkFNRSYmKGM9dGhpcy52YWx1ZS50b0dlb21ldHJ5KCkpO2EuZ2VvbWV0cnkuaW50ZXJzZWN0cyhjKSYmKGI9ITApfWJyZWFrO2RlZmF1bHQ6dGhyb3cgRXJyb3IoImV2YWx1YXRlIGlzIG5vdCBpbXBsZW1lbnRlZCBmb3IgdGhpcyBmaWx0ZXIgdHlwZS4iKTt9cmV0dXJuIGJ9LGNsb25lOmZ1bmN0aW9uKCl7dmFyIGE9Ck9wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKHt2YWx1ZTp0aGlzLnZhbHVlJiZ0aGlzLnZhbHVlLmNsb25lJiZ0aGlzLnZhbHVlLmNsb25lKCl9LHRoaXMpO3JldHVybiBuZXcgT3BlbkxheWVycy5GaWx0ZXIuU3BhdGlhbChhKX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5GaWx0ZXIuU3BhdGlhbCJ9KTtPcGVuTGF5ZXJzLkZpbHRlci5TcGF0aWFsLkJCT1g9IkJCT1giO09wZW5MYXllcnMuRmlsdGVyLlNwYXRpYWwuSU5URVJTRUNUUz0iSU5URVJTRUNUUyI7T3BlbkxheWVycy5GaWx0ZXIuU3BhdGlhbC5EV0lUSElOPSJEV0lUSElOIjtPcGVuTGF5ZXJzLkZpbHRlci5TcGF0aWFsLldJVEhJTj0iV0lUSElOIjtPcGVuTGF5ZXJzLkZpbHRlci5TcGF0aWFsLkNPTlRBSU5TPSJDT05UQUlOUyI7T3BlbkxheWVycy5TdHJhdGVneS5CQk9YPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5TdHJhdGVneSx7Ym91bmRzOm51bGwscmVzb2x1dGlvbjpudWxsLHJhdGlvOjIscmVzRmFjdG9yOm51bGwscmVzcG9uc2U6bnVsbCxhY3RpdmF0ZTpmdW5jdGlvbigpe3ZhciBhPU9wZW5MYXllcnMuU3RyYXRlZ3kucHJvdG90eXBlLmFjdGl2YXRlLmNhbGwodGhpcyk7YSYmKHRoaXMubGF5ZXIuZXZlbnRzLm9uKHttb3ZlZW5kOnRoaXMudXBkYXRlLHJlZnJlc2g6dGhpcy51cGRhdGUsdmlzaWJpbGl0eWNoYW5nZWQ6dGhpcy51cGRhdGUsc2NvcGU6dGhpc30pLHRoaXMudXBkYXRlKCkpO3JldHVybiBhfSxkZWFjdGl2YXRlOmZ1bmN0aW9uKCl7dmFyIGE9T3BlbkxheWVycy5TdHJhdGVneS5wcm90b3R5cGUuZGVhY3RpdmF0ZS5jYWxsKHRoaXMpO2EmJnRoaXMubGF5ZXIuZXZlbnRzLnVuKHttb3ZlZW5kOnRoaXMudXBkYXRlLHJlZnJlc2g6dGhpcy51cGRhdGUsdmlzaWJpbGl0eWNoYW5nZWQ6dGhpcy51cGRhdGUsCnNjb3BlOnRoaXN9KTtyZXR1cm4gYX0sdXBkYXRlOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZ2V0TWFwQm91bmRzKCk7bnVsbCE9PWImJihhJiZhLmZvcmNlfHx0aGlzLmxheWVyLnZpc2liaWxpdHkmJnRoaXMubGF5ZXIuY2FsY3VsYXRlSW5SYW5nZSgpJiZ0aGlzLmludmFsaWRCb3VuZHMoYikpJiYodGhpcy5jYWxjdWxhdGVCb3VuZHMoYiksdGhpcy5yZXNvbHV0aW9uPXRoaXMubGF5ZXIubWFwLmdldFJlc29sdXRpb24oKSx0aGlzLnRyaWdnZXJSZWFkKGEpKX0sZ2V0TWFwQm91bmRzOmZ1bmN0aW9uKCl7aWYobnVsbD09PXRoaXMubGF5ZXIubWFwKXJldHVybiBudWxsO3ZhciBhPXRoaXMubGF5ZXIubWFwLmdldEV4dGVudCgpO2EmJiF0aGlzLmxheWVyLnByb2plY3Rpb24uZXF1YWxzKHRoaXMubGF5ZXIubWFwLmdldFByb2plY3Rpb25PYmplY3QoKSkmJihhPWEuY2xvbmUoKS50cmFuc2Zvcm0odGhpcy5sYXllci5tYXAuZ2V0UHJvamVjdGlvbk9iamVjdCgpLHRoaXMubGF5ZXIucHJvamVjdGlvbikpOwpyZXR1cm4gYX0saW52YWxpZEJvdW5kczpmdW5jdGlvbihhKXthfHwoYT10aGlzLmdldE1hcEJvdW5kcygpKTthPSF0aGlzLmJvdW5kc3x8IXRoaXMuYm91bmRzLmNvbnRhaW5zQm91bmRzKGEpOyFhJiZ0aGlzLnJlc0ZhY3RvciYmKGE9dGhpcy5yZXNvbHV0aW9uL3RoaXMubGF5ZXIubWFwLmdldFJlc29sdXRpb24oKSxhPWE+PXRoaXMucmVzRmFjdG9yfHxhPD0xL3RoaXMucmVzRmFjdG9yKTtyZXR1cm4gYX0sY2FsY3VsYXRlQm91bmRzOmZ1bmN0aW9uKGEpe2F8fChhPXRoaXMuZ2V0TWFwQm91bmRzKCkpO3ZhciBiPWEuZ2V0Q2VudGVyTG9uTGF0KCksYz1hLmdldFdpZHRoKCkqdGhpcy5yYXRpbzthPWEuZ2V0SGVpZ2h0KCkqdGhpcy5yYXRpbzt0aGlzLmJvdW5kcz1uZXcgT3BlbkxheWVycy5Cb3VuZHMoYi5sb24tYy8yLGIubGF0LWEvMixiLmxvbitjLzIsYi5sYXQrYS8yKX0sdHJpZ2dlclJlYWQ6ZnVuY3Rpb24oYSl7IXRoaXMucmVzcG9uc2V8fGEmJiEwPT09YS5ub0Fib3J0fHwKKHRoaXMubGF5ZXIucHJvdG9jb2wuYWJvcnQodGhpcy5yZXNwb25zZSksdGhpcy5sYXllci5ldmVudHMudHJpZ2dlckV2ZW50KCJsb2FkZW5kIikpO3ZhciBiPXtmaWx0ZXI6dGhpcy5jcmVhdGVGaWx0ZXIoKX07dGhpcy5sYXllci5ldmVudHMudHJpZ2dlckV2ZW50KCJsb2Fkc3RhcnQiLGIpO3RoaXMucmVzcG9uc2U9dGhpcy5sYXllci5wcm90b2NvbC5yZWFkKE9wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKHtmaWx0ZXI6Yi5maWx0ZXIsY2FsbGJhY2s6dGhpcy5tZXJnZSxzY29wZTp0aGlzfSxhKSl9LGNyZWF0ZUZpbHRlcjpmdW5jdGlvbigpe3ZhciBhPW5ldyBPcGVuTGF5ZXJzLkZpbHRlci5TcGF0aWFsKHt0eXBlOk9wZW5MYXllcnMuRmlsdGVyLlNwYXRpYWwuQkJPWCx2YWx1ZTp0aGlzLmJvdW5kcyxwcm9qZWN0aW9uOnRoaXMubGF5ZXIucHJvamVjdGlvbn0pO3RoaXMubGF5ZXIuZmlsdGVyJiYoYT1uZXcgT3BlbkxheWVycy5GaWx0ZXIuTG9naWNhbCh7dHlwZTpPcGVuTGF5ZXJzLkZpbHRlci5Mb2dpY2FsLkFORCwKZmlsdGVyczpbdGhpcy5sYXllci5maWx0ZXIsYV19KSk7cmV0dXJuIGF9LG1lcmdlOmZ1bmN0aW9uKGEpe3RoaXMubGF5ZXIuZGVzdHJveUZlYXR1cmVzKCk7aWYoYS5zdWNjZXNzKCkpe3ZhciBiPWEuZmVhdHVyZXM7aWYoYiYmMDxiLmxlbmd0aCl7dmFyIGM9dGhpcy5sYXllci5wcm9qZWN0aW9uLGQ9dGhpcy5sYXllci5tYXAuZ2V0UHJvamVjdGlvbk9iamVjdCgpO2lmKCFkLmVxdWFscyhjKSlmb3IodmFyIGUsZj0wLGc9Yi5sZW5ndGg7ZjxnOysrZikoZT1iW2ZdLmdlb21ldHJ5KSYmZS50cmFuc2Zvcm0oYyxkKTt0aGlzLmxheWVyLmFkZEZlYXR1cmVzKGIpfX1lbHNlIHRoaXMuYm91bmRzPW51bGw7dGhpcy5yZXNwb25zZT1udWxsO3RoaXMubGF5ZXIuZXZlbnRzLnRyaWdnZXJFdmVudCgibG9hZGVuZCIse3Jlc3BvbnNlOmF9KX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5TdHJhdGVneS5CQk9YIn0pO09wZW5MYXllcnMuSGFuZGxlci5GZWF0dXJlPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5IYW5kbGVyLHtFVkVOVE1BUDp7Y2xpY2s6eyJpbiI6ImNsaWNrIixvdXQ6ImNsaWNrb3V0In0sbW91c2Vtb3ZlOnsiaW4iOiJvdmVyIixvdXQ6Im91dCJ9LGRibGNsaWNrOnsiaW4iOiJkYmxjbGljayIsb3V0Om51bGx9LG1vdXNlZG93bjp7ImluIjpudWxsLG91dDpudWxsfSxtb3VzZXVwOnsiaW4iOm51bGwsb3V0Om51bGx9LHRvdWNoc3RhcnQ6eyJpbiI6ImNsaWNrIixvdXQ6ImNsaWNrb3V0In19LGZlYXR1cmU6bnVsbCxsYXN0RmVhdHVyZTpudWxsLGRvd246bnVsbCx1cDpudWxsLGNsaWNrVG9sZXJhbmNlOjQsZ2VvbWV0cnlUeXBlczpudWxsLHN0b3BDbGljazohMCxzdG9wRG93bjohMCxzdG9wVXA6ITEsaW5pdGlhbGl6ZTpmdW5jdGlvbihhLGIsYyxkKXtPcGVuTGF5ZXJzLkhhbmRsZXIucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxbYSxjLGRdKTt0aGlzLmxheWVyPQpifSx0b3VjaHN0YXJ0OmZ1bmN0aW9uKGEpe3RoaXMuc3RhcnRUb3VjaCgpO3JldHVybiBPcGVuTGF5ZXJzLkV2ZW50LmlzTXVsdGlUb3VjaChhKT8hMDp0aGlzLm1vdXNlZG93bihhKX0sdG91Y2htb3ZlOmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuRXZlbnQucHJldmVudERlZmF1bHQoYSl9LG1vdXNlZG93bjpmdW5jdGlvbihhKXtpZihPcGVuTGF5ZXJzLkV2ZW50LmlzTGVmdENsaWNrKGEpfHxPcGVuTGF5ZXJzLkV2ZW50LmlzU2luZ2xlVG91Y2goYSkpdGhpcy5kb3duPWEueHk7cmV0dXJuIHRoaXMuaGFuZGxlKGEpPyF0aGlzLnN0b3BEb3duOiEwfSxtb3VzZXVwOmZ1bmN0aW9uKGEpe3RoaXMudXA9YS54eTtyZXR1cm4gdGhpcy5oYW5kbGUoYSk/IXRoaXMuc3RvcFVwOiEwfSxjbGljazpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5oYW5kbGUoYSk/IXRoaXMuc3RvcENsaWNrOiEwfSxtb3VzZW1vdmU6ZnVuY3Rpb24oYSl7aWYoIXRoaXMuY2FsbGJhY2tzLm92ZXImJiF0aGlzLmNhbGxiYWNrcy5vdXQpcmV0dXJuITA7CnRoaXMuaGFuZGxlKGEpO3JldHVybiEwfSxkYmxjbGljazpmdW5jdGlvbihhKXtyZXR1cm4hdGhpcy5oYW5kbGUoYSl9LGdlb21ldHJ5VHlwZU1hdGNoZXM6ZnVuY3Rpb24oYSl7cmV0dXJuIG51bGw9PXRoaXMuZ2VvbWV0cnlUeXBlc3x8LTE8T3BlbkxheWVycy5VdGlsLmluZGV4T2YodGhpcy5nZW9tZXRyeVR5cGVzLGEuZ2VvbWV0cnkuQ0xBU1NfTkFNRSl9LGhhbmRsZTpmdW5jdGlvbihhKXt0aGlzLmZlYXR1cmUmJiF0aGlzLmZlYXR1cmUubGF5ZXImJih0aGlzLmZlYXR1cmU9bnVsbCk7dmFyIGI9YS50eXBlLGM9ITEsZD0hIXRoaXMuZmVhdHVyZSxlPSJjbGljayI9PWJ8fCJkYmxjbGljayI9PWJ8fCJ0b3VjaHN0YXJ0Ij09YjsodGhpcy5mZWF0dXJlPXRoaXMubGF5ZXIuZ2V0RmVhdHVyZUZyb21FdmVudChhKSkmJiF0aGlzLmZlYXR1cmUubGF5ZXImJih0aGlzLmZlYXR1cmU9bnVsbCk7dGhpcy5sYXN0RmVhdHVyZSYmIXRoaXMubGFzdEZlYXR1cmUubGF5ZXImJih0aGlzLmxhc3RGZWF0dXJlPQpudWxsKTt0aGlzLmZlYXR1cmU/KCJ0b3VjaHN0YXJ0Ij09PWImJk9wZW5MYXllcnMuRXZlbnQucHJldmVudERlZmF1bHQoYSksYT10aGlzLmZlYXR1cmUhPXRoaXMubGFzdEZlYXR1cmUsdGhpcy5nZW9tZXRyeVR5cGVNYXRjaGVzKHRoaXMuZmVhdHVyZSk/KGQmJmE/KHRoaXMubGFzdEZlYXR1cmUmJnRoaXMudHJpZ2dlckNhbGxiYWNrKGIsIm91dCIsW3RoaXMubGFzdEZlYXR1cmVdKSx0aGlzLnRyaWdnZXJDYWxsYmFjayhiLCJpbiIsW3RoaXMuZmVhdHVyZV0pKTpkJiYhZXx8dGhpcy50cmlnZ2VyQ2FsbGJhY2soYiwiaW4iLFt0aGlzLmZlYXR1cmVdKSx0aGlzLmxhc3RGZWF0dXJlPXRoaXMuZmVhdHVyZSxjPSEwKToodGhpcy5sYXN0RmVhdHVyZSYmKGQmJmF8fGUpJiZ0aGlzLnRyaWdnZXJDYWxsYmFjayhiLCJvdXQiLFt0aGlzLmxhc3RGZWF0dXJlXSksdGhpcy5mZWF0dXJlPW51bGwpKTp0aGlzLmxhc3RGZWF0dXJlJiYoZHx8ZSkmJnRoaXMudHJpZ2dlckNhbGxiYWNrKGIsIm91dCIsClt0aGlzLmxhc3RGZWF0dXJlXSk7cmV0dXJuIGN9LHRyaWdnZXJDYWxsYmFjazpmdW5jdGlvbihhLGIsYyl7aWYoYj10aGlzLkVWRU5UTUFQW2FdW2JdKSJjbGljayI9PWEmJnRoaXMudXAmJnRoaXMuZG93bj8oTWF0aC5zcXJ0KE1hdGgucG93KHRoaXMudXAueC10aGlzLmRvd24ueCwyKStNYXRoLnBvdyh0aGlzLnVwLnktdGhpcy5kb3duLnksMikpPD10aGlzLmNsaWNrVG9sZXJhbmNlJiZ0aGlzLmNhbGxiYWNrKGIsYyksdGhpcy51cD10aGlzLmRvd249bnVsbCk6dGhpcy5jYWxsYmFjayhiLGMpfSxhY3RpdmF0ZTpmdW5jdGlvbigpe3ZhciBhPSExO09wZW5MYXllcnMuSGFuZGxlci5wcm90b3R5cGUuYWN0aXZhdGUuYXBwbHkodGhpcyxhcmd1bWVudHMpJiYodGhpcy5tb3ZlTGF5ZXJUb1RvcCgpLHRoaXMubWFwLmV2ZW50cy5vbih7cmVtb3ZlbGF5ZXI6dGhpcy5oYW5kbGVNYXBFdmVudHMsY2hhbmdlbGF5ZXI6dGhpcy5oYW5kbGVNYXBFdmVudHMsc2NvcGU6dGhpc30pLGE9ITApOwpyZXR1cm4gYX0sZGVhY3RpdmF0ZTpmdW5jdGlvbigpe3ZhciBhPSExO09wZW5MYXllcnMuSGFuZGxlci5wcm90b3R5cGUuZGVhY3RpdmF0ZS5hcHBseSh0aGlzLGFyZ3VtZW50cykmJih0aGlzLm1vdmVMYXllckJhY2soKSx0aGlzLnVwPXRoaXMuZG93bj10aGlzLmxhc3RGZWF0dXJlPXRoaXMuZmVhdHVyZT1udWxsLHRoaXMubWFwLmV2ZW50cy51bih7cmVtb3ZlbGF5ZXI6dGhpcy5oYW5kbGVNYXBFdmVudHMsY2hhbmdlbGF5ZXI6dGhpcy5oYW5kbGVNYXBFdmVudHMsc2NvcGU6dGhpc30pLGE9ITApO3JldHVybiBhfSxoYW5kbGVNYXBFdmVudHM6ZnVuY3Rpb24oYSl7InJlbW92ZWxheWVyIiE9YS50eXBlJiYib3JkZXIiIT1hLnByb3BlcnR5fHx0aGlzLm1vdmVMYXllclRvVG9wKCl9LG1vdmVMYXllclRvVG9wOmZ1bmN0aW9uKCl7dmFyIGE9TWF0aC5tYXgodGhpcy5tYXAuWl9JTkRFWF9CQVNFLkZlYXR1cmUtMSx0aGlzLmxheWVyLmdldFpJbmRleCgpKSsxO3RoaXMubGF5ZXIuc2V0WkluZGV4KGEpfSwKbW92ZUxheWVyQmFjazpmdW5jdGlvbigpe3ZhciBhPXRoaXMubGF5ZXIuZ2V0WkluZGV4KCktMTthPj10aGlzLm1hcC5aX0lOREVYX0JBU0UuRmVhdHVyZT90aGlzLmxheWVyLnNldFpJbmRleChhKTp0aGlzLm1hcC5zZXRMYXllclpJbmRleCh0aGlzLmxheWVyLHRoaXMubWFwLmdldExheWVySW5kZXgodGhpcy5sYXllcikpfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkhhbmRsZXIuRmVhdHVyZSJ9KTtPcGVuTGF5ZXJzLlN0eWxlTWFwPU9wZW5MYXllcnMuQ2xhc3Moe3N0eWxlczpudWxsLGV4dGVuZERlZmF1bHQ6ITAsaW5pdGlhbGl6ZTpmdW5jdGlvbihhLGIpe3RoaXMuc3R5bGVzPXsiZGVmYXVsdCI6bmV3IE9wZW5MYXllcnMuU3R5bGUoT3BlbkxheWVycy5GZWF0dXJlLlZlY3Rvci5zdHlsZVsiZGVmYXVsdCJdKSxzZWxlY3Q6bmV3IE9wZW5MYXllcnMuU3R5bGUoT3BlbkxheWVycy5GZWF0dXJlLlZlY3Rvci5zdHlsZS5zZWxlY3QpLHRlbXBvcmFyeTpuZXcgT3BlbkxheWVycy5TdHlsZShPcGVuTGF5ZXJzLkZlYXR1cmUuVmVjdG9yLnN0eWxlLnRlbXBvcmFyeSksImRlbGV0ZSI6bmV3IE9wZW5MYXllcnMuU3R5bGUoT3BlbkxheWVycy5GZWF0dXJlLlZlY3Rvci5zdHlsZVsiZGVsZXRlIl0pfTtpZihhIGluc3RhbmNlb2YgT3BlbkxheWVycy5TdHlsZSl0aGlzLnN0eWxlc1siZGVmYXVsdCJdPWEsdGhpcy5zdHlsZXMuc2VsZWN0PWEsdGhpcy5zdHlsZXMudGVtcG9yYXJ5PWEsdGhpcy5zdHlsZXNbImRlbGV0ZSJdPQphO2Vsc2UgaWYoIm9iamVjdCI9PXR5cGVvZiBhKWZvcih2YXIgYyBpbiBhKWlmKGFbY11pbnN0YW5jZW9mIE9wZW5MYXllcnMuU3R5bGUpdGhpcy5zdHlsZXNbY109YVtjXTtlbHNlIGlmKCJvYmplY3QiPT10eXBlb2YgYVtjXSl0aGlzLnN0eWxlc1tjXT1uZXcgT3BlbkxheWVycy5TdHlsZShhW2NdKTtlbHNle3RoaXMuc3R5bGVzWyJkZWZhdWx0Il09bmV3IE9wZW5MYXllcnMuU3R5bGUoYSk7dGhpcy5zdHlsZXMuc2VsZWN0PW5ldyBPcGVuTGF5ZXJzLlN0eWxlKGEpO3RoaXMuc3R5bGVzLnRlbXBvcmFyeT1uZXcgT3BlbkxheWVycy5TdHlsZShhKTt0aGlzLnN0eWxlc1siZGVsZXRlIl09bmV3IE9wZW5MYXllcnMuU3R5bGUoYSk7YnJlYWt9T3BlbkxheWVycy5VdGlsLmV4dGVuZCh0aGlzLGIpfSxkZXN0cm95OmZ1bmN0aW9uKCl7Zm9yKHZhciBhIGluIHRoaXMuc3R5bGVzKXRoaXMuc3R5bGVzW2FdLmRlc3Ryb3koKTt0aGlzLnN0eWxlcz1udWxsfSxjcmVhdGVTeW1ib2xpemVyOmZ1bmN0aW9uKGEsCmIpe2F8fChhPW5ldyBPcGVuTGF5ZXJzLkZlYXR1cmUuVmVjdG9yKTt0aGlzLnN0eWxlc1tiXXx8KGI9ImRlZmF1bHQiKTthLnJlbmRlckludGVudD1iO3ZhciBjPXt9O3RoaXMuZXh0ZW5kRGVmYXVsdCYmImRlZmF1bHQiIT1iJiYoYz10aGlzLnN0eWxlc1siZGVmYXVsdCJdLmNyZWF0ZVN5bWJvbGl6ZXIoYSkpO3JldHVybiBPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKGMsdGhpcy5zdHlsZXNbYl0uY3JlYXRlU3ltYm9saXplcihhKSl9LGFkZFVuaXF1ZVZhbHVlUnVsZXM6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9W10sZjtmb3IoZiBpbiBjKWUucHVzaChuZXcgT3BlbkxheWVycy5SdWxlKHtzeW1ib2xpemVyOmNbZl0sY29udGV4dDpkLGZpbHRlcjpuZXcgT3BlbkxheWVycy5GaWx0ZXIuQ29tcGFyaXNvbih7dHlwZTpPcGVuTGF5ZXJzLkZpbHRlci5Db21wYXJpc29uLkVRVUFMX1RPLHByb3BlcnR5OmIsdmFsdWU6Zn0pfSkpO3RoaXMuc3R5bGVzW2FdLmFkZFJ1bGVzKGUpfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLlN0eWxlTWFwIn0pO09wZW5MYXllcnMuTGF5ZXIuVmVjdG9yPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5MYXllcix7aXNCYXNlTGF5ZXI6ITEsaXNGaXhlZDohMSxmZWF0dXJlczpudWxsLGZpbHRlcjpudWxsLHNlbGVjdGVkRmVhdHVyZXM6bnVsbCx1bnJlbmRlcmVkRmVhdHVyZXM6bnVsbCxyZXBvcnRFcnJvcjohMCxzdHlsZTpudWxsLHN0eWxlTWFwOm51bGwsc3RyYXRlZ2llczpudWxsLHByb3RvY29sOm51bGwscmVuZGVyZXJzOlsiU1ZHIiwiVk1MIiwiQ2FudmFzIl0scmVuZGVyZXI6bnVsbCxyZW5kZXJlck9wdGlvbnM6bnVsbCxnZW9tZXRyeVR5cGU6bnVsbCxkcmF3bjohMSxyYXRpbzoxLGluaXRpYWxpemU6ZnVuY3Rpb24oYSxiKXtPcGVuTGF5ZXJzLkxheWVyLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLnJlbmRlcmVyJiZ0aGlzLnJlbmRlcmVyLnN1cHBvcnRlZCgpfHx0aGlzLmFzc2lnblJlbmRlcmVyKCk7dGhpcy5yZW5kZXJlciYmdGhpcy5yZW5kZXJlci5zdXBwb3J0ZWQoKXx8Cih0aGlzLnJlbmRlcmVyPW51bGwsdGhpcy5kaXNwbGF5RXJyb3IoKSk7dGhpcy5zdHlsZU1hcHx8KHRoaXMuc3R5bGVNYXA9bmV3IE9wZW5MYXllcnMuU3R5bGVNYXApO3RoaXMuZmVhdHVyZXM9W107dGhpcy5zZWxlY3RlZEZlYXR1cmVzPVtdO3RoaXMudW5yZW5kZXJlZEZlYXR1cmVzPXt9O2lmKHRoaXMuc3RyYXRlZ2llcylmb3IodmFyIGM9MCxkPXRoaXMuc3RyYXRlZ2llcy5sZW5ndGg7YzxkO2MrKyl0aGlzLnN0cmF0ZWdpZXNbY10uc2V0TGF5ZXIodGhpcyl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXtpZih0aGlzLnN0cmF0ZWdpZXMpe3ZhciBhLGIsYztiPTA7Zm9yKGM9dGhpcy5zdHJhdGVnaWVzLmxlbmd0aDtiPGM7YisrKWE9dGhpcy5zdHJhdGVnaWVzW2JdLGEuYXV0b0Rlc3Ryb3kmJmEuZGVzdHJveSgpO3RoaXMuc3RyYXRlZ2llcz1udWxsfXRoaXMucHJvdG9jb2wmJih0aGlzLnByb3RvY29sLmF1dG9EZXN0cm95JiZ0aGlzLnByb3RvY29sLmRlc3Ryb3koKSx0aGlzLnByb3RvY29sPQpudWxsKTt0aGlzLmRlc3Ryb3lGZWF0dXJlcygpO3RoaXMudW5yZW5kZXJlZEZlYXR1cmVzPXRoaXMuc2VsZWN0ZWRGZWF0dXJlcz10aGlzLmZlYXR1cmVzPW51bGw7dGhpcy5yZW5kZXJlciYmdGhpcy5yZW5kZXJlci5kZXN0cm95KCk7dGhpcy5kcmF3bj10aGlzLmdlb21ldHJ5VHlwZT10aGlzLnJlbmRlcmVyPW51bGw7T3BlbkxheWVycy5MYXllci5wcm90b3R5cGUuZGVzdHJveS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGNsb25lOmZ1bmN0aW9uKGEpe251bGw9PWEmJihhPW5ldyBPcGVuTGF5ZXJzLkxheWVyLlZlY3Rvcih0aGlzLm5hbWUsdGhpcy5nZXRPcHRpb25zKCkpKTthPU9wZW5MYXllcnMuTGF5ZXIucHJvdG90eXBlLmNsb25lLmFwcGx5KHRoaXMsW2FdKTtmb3IodmFyIGI9dGhpcy5mZWF0dXJlcyxjPWIubGVuZ3RoLGQ9QXJyYXkoYyksZT0wO2U8YzsrK2UpZFtlXT1iW2VdLmNsb25lKCk7YS5mZWF0dXJlcz1kO3JldHVybiBhfSxyZWZyZXNoOmZ1bmN0aW9uKGEpe3RoaXMuY2FsY3VsYXRlSW5SYW5nZSgpJiYKdGhpcy52aXNpYmlsaXR5JiZ0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoInJlZnJlc2giLGEpfSxhc3NpZ25SZW5kZXJlcjpmdW5jdGlvbigpe2Zvcih2YXIgYT0wLGI9dGhpcy5yZW5kZXJlcnMubGVuZ3RoO2E8YjthKyspe3ZhciBjPXRoaXMucmVuZGVyZXJzW2FdO2lmKChjPSJmdW5jdGlvbiI9PXR5cGVvZiBjP2M6T3BlbkxheWVycy5SZW5kZXJlcltjXSkmJmMucHJvdG90eXBlLnN1cHBvcnRlZCgpKXt0aGlzLnJlbmRlcmVyPW5ldyBjKHRoaXMuZGl2LHRoaXMucmVuZGVyZXJPcHRpb25zKTticmVha319fSxkaXNwbGF5RXJyb3I6ZnVuY3Rpb24oKXt0aGlzLnJlcG9ydEVycm9yJiZPcGVuTGF5ZXJzLkNvbnNvbGUudXNlckVycm9yKE9wZW5MYXllcnMuaTE4bigiYnJvd3Nlck5vdFN1cHBvcnRlZCIse3JlbmRlcmVyczp0aGlzLnJlbmRlcmVycy5qb2luKCJcbiIpfSkpfSxzZXRNYXA6ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5MYXllci5wcm90b3R5cGUuc2V0TWFwLmFwcGx5KHRoaXMsCmFyZ3VtZW50cyk7aWYodGhpcy5yZW5kZXJlcil7dGhpcy5yZW5kZXJlci5tYXA9dGhpcy5tYXA7dmFyIGI9dGhpcy5tYXAuZ2V0U2l6ZSgpO2Iudyo9dGhpcy5yYXRpbztiLmgqPXRoaXMucmF0aW87dGhpcy5yZW5kZXJlci5zZXRTaXplKGIpfWVsc2UgdGhpcy5tYXAucmVtb3ZlTGF5ZXIodGhpcyl9LGFmdGVyQWRkOmZ1bmN0aW9uKCl7aWYodGhpcy5zdHJhdGVnaWVzKXt2YXIgYSxiLGM7Yj0wO2ZvcihjPXRoaXMuc3RyYXRlZ2llcy5sZW5ndGg7YjxjO2IrKylhPXRoaXMuc3RyYXRlZ2llc1tiXSxhLmF1dG9BY3RpdmF0ZSYmYS5hY3RpdmF0ZSgpfX0scmVtb3ZlTWFwOmZ1bmN0aW9uKGEpe3RoaXMuZHJhd249ITE7aWYodGhpcy5zdHJhdGVnaWVzKXt2YXIgYixjO2I9MDtmb3IoYz10aGlzLnN0cmF0ZWdpZXMubGVuZ3RoO2I8YztiKyspYT10aGlzLnN0cmF0ZWdpZXNbYl0sYS5hdXRvQWN0aXZhdGUmJmEuZGVhY3RpdmF0ZSgpfX0sb25NYXBSZXNpemU6ZnVuY3Rpb24oKXtPcGVuTGF5ZXJzLkxheWVyLnByb3RvdHlwZS5vbk1hcFJlc2l6ZS5hcHBseSh0aGlzLAphcmd1bWVudHMpO3ZhciBhPXRoaXMubWFwLmdldFNpemUoKTthLncqPXRoaXMucmF0aW87YS5oKj10aGlzLnJhdGlvO3RoaXMucmVuZGVyZXIuc2V0U2l6ZShhKX0sbW92ZVRvOmZ1bmN0aW9uKGEsYixjKXtPcGVuTGF5ZXJzLkxheWVyLnByb3RvdHlwZS5tb3ZlVG8uYXBwbHkodGhpcyxhcmd1bWVudHMpO3ZhciBkPSEwO2lmKCFjKXt0aGlzLnJlbmRlcmVyLnJvb3Quc3R5bGUudmlzaWJpbGl0eT0iaGlkZGVuIjt2YXIgZD10aGlzLm1hcC5nZXRTaXplKCksZT1kLncsZD1kLmgsZT1lLzIqdGhpcy5yYXRpby1lLzIsZD1kLzIqdGhpcy5yYXRpby1kLzIsZT1lK3RoaXMubWFwLmxheWVyQ29udGFpbmVyT3JpZ2luUHgueCxlPS1NYXRoLnJvdW5kKGUpLGQ9ZCt0aGlzLm1hcC5sYXllckNvbnRhaW5lck9yaWdpblB4LnksZD0tTWF0aC5yb3VuZChkKTt0aGlzLmRpdi5zdHlsZS5sZWZ0PWUrInB4Ijt0aGlzLmRpdi5zdHlsZS50b3A9ZCsicHgiO2U9dGhpcy5tYXAuZ2V0RXh0ZW50KCkuc2NhbGUodGhpcy5yYXRpbyk7CmQ9dGhpcy5yZW5kZXJlci5zZXRFeHRlbnQoZSxiKTt0aGlzLnJlbmRlcmVyLnJvb3Quc3R5bGUudmlzaWJpbGl0eT0idmlzaWJsZSI7ITA9PT1PcGVuTGF5ZXJzLklTX0dFQ0tPJiYodGhpcy5kaXYuc2Nyb2xsTGVmdD10aGlzLmRpdi5zY3JvbGxMZWZ0KTtpZighYiYmZClmb3IodmFyIGYgaW4gdGhpcy51bnJlbmRlcmVkRmVhdHVyZXMpZT10aGlzLnVucmVuZGVyZWRGZWF0dXJlc1tmXSx0aGlzLmRyYXdGZWF0dXJlKGUpfWlmKCF0aGlzLmRyYXdufHxifHwhZClmb3IodGhpcy5kcmF3bj0hMCxmPTAsZD10aGlzLmZlYXR1cmVzLmxlbmd0aDtmPGQ7ZisrKXRoaXMucmVuZGVyZXIubG9ja2VkPWYhPT1kLTEsZT10aGlzLmZlYXR1cmVzW2ZdLHRoaXMuZHJhd0ZlYXR1cmUoZSl9LGRpc3BsYXk6ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5MYXllci5wcm90b3R5cGUuZGlzcGxheS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dmFyIGI9dGhpcy5kaXYuc3R5bGUuZGlzcGxheTtiIT10aGlzLnJlbmRlcmVyLnJvb3Quc3R5bGUuZGlzcGxheSYmCih0aGlzLnJlbmRlcmVyLnJvb3Quc3R5bGUuZGlzcGxheT1iKX0sYWRkRmVhdHVyZXM6ZnVuY3Rpb24oYSxiKXtPcGVuTGF5ZXJzLlV0aWwuaXNBcnJheShhKXx8KGE9W2FdKTt2YXIgYz0hYnx8IWIuc2lsZW50O2lmKGMpe3ZhciBkPXtmZWF0dXJlczphfTtpZighMT09PXRoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgiYmVmb3JlZmVhdHVyZXNhZGRlZCIsZCkpcmV0dXJuO2E9ZC5mZWF0dXJlc31mb3IodmFyIGQ9W10sZT0wLGY9YS5sZW5ndGg7ZTxmO2UrKyl7dGhpcy5yZW5kZXJlci5sb2NrZWQ9ZSE9YS5sZW5ndGgtMT8hMDohMTt2YXIgZz1hW2VdO2lmKHRoaXMuZ2VvbWV0cnlUeXBlJiYhKGcuZ2VvbWV0cnkgaW5zdGFuY2VvZiB0aGlzLmdlb21ldHJ5VHlwZSkpdGhyb3cgbmV3IFR5cGVFcnJvcigiYWRkRmVhdHVyZXM6IGNvbXBvbmVudCBzaG91bGQgYmUgYW4gIit0aGlzLmdlb21ldHJ5VHlwZS5wcm90b3R5cGUuQ0xBU1NfTkFNRSk7Zy5sYXllcj10aGlzOyFnLnN0eWxlJiZ0aGlzLnN0eWxlJiYKKGcuc3R5bGU9T3BlbkxheWVycy5VdGlsLmV4dGVuZCh7fSx0aGlzLnN0eWxlKSk7aWYoYyl7aWYoITE9PT10aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoImJlZm9yZWZlYXR1cmVhZGRlZCIse2ZlYXR1cmU6Z30pKWNvbnRpbnVlO3RoaXMucHJlRmVhdHVyZUluc2VydChnKX1kLnB1c2goZyk7dGhpcy5mZWF0dXJlcy5wdXNoKGcpO3RoaXMuZHJhd0ZlYXR1cmUoZyk7YyYmKHRoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgiZmVhdHVyZWFkZGVkIix7ZmVhdHVyZTpnfSksdGhpcy5vbkZlYXR1cmVJbnNlcnQoZykpfWMmJnRoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgiZmVhdHVyZXNhZGRlZCIse2ZlYXR1cmVzOmR9KX0scmVtb3ZlRmVhdHVyZXM6ZnVuY3Rpb24oYSxiKXtpZihhJiYwIT09YS5sZW5ndGgpe2lmKGE9PT10aGlzLmZlYXR1cmVzKXJldHVybiB0aGlzLnJlbW92ZUFsbEZlYXR1cmVzKGIpO09wZW5MYXllcnMuVXRpbC5pc0FycmF5KGEpfHwoYT1bYV0pO2E9PT10aGlzLnNlbGVjdGVkRmVhdHVyZXMmJgooYT1hLnNsaWNlKCkpO3ZhciBjPSFifHwhYi5zaWxlbnQ7YyYmdGhpcy5ldmVudHMudHJpZ2dlckV2ZW50KCJiZWZvcmVmZWF0dXJlc3JlbW92ZWQiLHtmZWF0dXJlczphfSk7Zm9yKHZhciBkPWEubGVuZ3RoLTE7MDw9ZDtkLS0pe3RoaXMucmVuZGVyZXIubG9ja2VkPTAhPWQmJmFbZC0xXS5nZW9tZXRyeT8hMDohMTt2YXIgZT1hW2RdO2RlbGV0ZSB0aGlzLnVucmVuZGVyZWRGZWF0dXJlc1tlLmlkXTtjJiZ0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoImJlZm9yZWZlYXR1cmVyZW1vdmVkIix7ZmVhdHVyZTplfSk7dGhpcy5mZWF0dXJlcz1PcGVuTGF5ZXJzLlV0aWwucmVtb3ZlSXRlbSh0aGlzLmZlYXR1cmVzLGUpO2UubGF5ZXI9bnVsbDtlLmdlb21ldHJ5JiZ0aGlzLnJlbmRlcmVyLmVyYXNlRmVhdHVyZXMoZSk7LTEhPU9wZW5MYXllcnMuVXRpbC5pbmRleE9mKHRoaXMuc2VsZWN0ZWRGZWF0dXJlcyxlKSYmT3BlbkxheWVycy5VdGlsLnJlbW92ZUl0ZW0odGhpcy5zZWxlY3RlZEZlYXR1cmVzLAplKTtjJiZ0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoImZlYXR1cmVyZW1vdmVkIix7ZmVhdHVyZTplfSl9YyYmdGhpcy5ldmVudHMudHJpZ2dlckV2ZW50KCJmZWF0dXJlc3JlbW92ZWQiLHtmZWF0dXJlczphfSl9fSxyZW1vdmVBbGxGZWF0dXJlczpmdW5jdGlvbihhKXthPSFhfHwhYS5zaWxlbnQ7dmFyIGI9dGhpcy5mZWF0dXJlczthJiZ0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoImJlZm9yZWZlYXR1cmVzcmVtb3ZlZCIse2ZlYXR1cmVzOmJ9KTtmb3IodmFyIGMsZD1iLmxlbmd0aC0xOzA8PWQ7ZC0tKWM9YltkXSxhJiZ0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoImJlZm9yZWZlYXR1cmVyZW1vdmVkIix7ZmVhdHVyZTpjfSksYy5sYXllcj1udWxsLGEmJnRoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgiZmVhdHVyZXJlbW92ZWQiLHtmZWF0dXJlOmN9KTt0aGlzLnJlbmRlcmVyLmNsZWFyKCk7dGhpcy5mZWF0dXJlcz1bXTt0aGlzLnVucmVuZGVyZWRGZWF0dXJlcz17fTt0aGlzLnNlbGVjdGVkRmVhdHVyZXM9CltdO2EmJnRoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgiZmVhdHVyZXNyZW1vdmVkIix7ZmVhdHVyZXM6Yn0pfSxkZXN0cm95RmVhdHVyZXM6ZnVuY3Rpb24oYSxiKXt2b2lkIDA9PWEmJihhPXRoaXMuZmVhdHVyZXMpO2lmKGEpe3RoaXMucmVtb3ZlRmVhdHVyZXMoYSxiKTtmb3IodmFyIGM9YS5sZW5ndGgtMTswPD1jO2MtLSlhW2NdLmRlc3Ryb3koKX19LGRyYXdGZWF0dXJlOmZ1bmN0aW9uKGEsYil7aWYodGhpcy5kcmF3bil7aWYoIm9iamVjdCIhPXR5cGVvZiBiKXtifHxhLnN0YXRlIT09T3BlbkxheWVycy5TdGF0ZS5ERUxFVEV8fChiPSJkZWxldGUiKTt2YXIgYz1ifHxhLnJlbmRlckludGVudDsoYj1hLnN0eWxlfHx0aGlzLnN0eWxlKXx8KGI9dGhpcy5zdHlsZU1hcC5jcmVhdGVTeW1ib2xpemVyKGEsYykpfWM9dGhpcy5yZW5kZXJlci5kcmF3RmVhdHVyZShhLGIpOyExPT09Y3x8bnVsbD09PWM/dGhpcy51bnJlbmRlcmVkRmVhdHVyZXNbYS5pZF09YTpkZWxldGUgdGhpcy51bnJlbmRlcmVkRmVhdHVyZXNbYS5pZF19fSwKZXJhc2VGZWF0dXJlczpmdW5jdGlvbihhKXt0aGlzLnJlbmRlcmVyLmVyYXNlRmVhdHVyZXMoYSl9LGdldEZlYXR1cmVGcm9tRXZlbnQ6ZnVuY3Rpb24oYSl7aWYoIXRoaXMucmVuZGVyZXIpdGhyb3cgRXJyb3IoImdldEZlYXR1cmVGcm9tRXZlbnQgY2FsbGVkIG9uIGxheWVyIHdpdGggbm8gcmVuZGVyZXIuIFRoaXMgdXN1YWxseSBtZWFucyB5b3UgZGVzdHJveWVkIGEgbGF5ZXIsIGJ1dCBub3Qgc29tZSBoYW5kbGVyIHdoaWNoIGlzIGFzc29jaWF0ZWQgd2l0aCBpdC4iKTt2YXIgYj1udWxsOyhhPXRoaXMucmVuZGVyZXIuZ2V0RmVhdHVyZUlkRnJvbUV2ZW50KGEpKSYmKGI9InN0cmluZyI9PT10eXBlb2YgYT90aGlzLmdldEZlYXR1cmVCeUlkKGEpOmEpO3JldHVybiBifSxnZXRGZWF0dXJlQnk6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9bnVsbCxkPTAsZT10aGlzLmZlYXR1cmVzLmxlbmd0aDtkPGU7KytkKWlmKHRoaXMuZmVhdHVyZXNbZF1bYV09PWIpe2M9dGhpcy5mZWF0dXJlc1tkXTsKYnJlYWt9cmV0dXJuIGN9LGdldEZlYXR1cmVCeUlkOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmdldEZlYXR1cmVCeSgiaWQiLGEpfSxnZXRGZWF0dXJlQnlGaWQ6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZ2V0RmVhdHVyZUJ5KCJmaWQiLGEpfSxnZXRGZWF0dXJlc0J5QXR0cmlidXRlOmZ1bmN0aW9uKGEsYil7dmFyIGMsZCxlPXRoaXMuZmVhdHVyZXMubGVuZ3RoLGY9W107Zm9yKGM9MDtjPGU7YysrKShkPXRoaXMuZmVhdHVyZXNbY10pJiZkLmF0dHJpYnV0ZXMmJmQuYXR0cmlidXRlc1thXT09PWImJmYucHVzaChkKTtyZXR1cm4gZn0sb25GZWF0dXJlSW5zZXJ0OmZ1bmN0aW9uKGEpe30scHJlRmVhdHVyZUluc2VydDpmdW5jdGlvbihhKXt9LGdldERhdGFFeHRlbnQ6ZnVuY3Rpb24oKXt2YXIgYT1udWxsLGI9dGhpcy5mZWF0dXJlcztpZihiJiYwPGIubGVuZ3RoKWZvcih2YXIgYz1udWxsLGQ9MCxlPWIubGVuZ3RoO2Q8ZTtkKyspaWYoYz1iW2RdLmdlb21ldHJ5KW51bGw9PT1hJiYKKGE9bmV3IE9wZW5MYXllcnMuQm91bmRzKSxhLmV4dGVuZChjLmdldEJvdW5kcygpKTtyZXR1cm4gYX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5MYXllci5WZWN0b3IifSk7T3BlbkxheWVycy5MYXllci5WZWN0b3IuUm9vdENvbnRhaW5lcj1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuTGF5ZXIuVmVjdG9yLHtkaXNwbGF5SW5MYXllclN3aXRjaGVyOiExLGxheWVyczpudWxsLGRpc3BsYXk6ZnVuY3Rpb24oKXt9LGdldEZlYXR1cmVGcm9tRXZlbnQ6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPXRoaXMubGF5ZXJzLGMsZD0wO2Q8Yi5sZW5ndGg7ZCsrKWlmKGM9YltkXS5nZXRGZWF0dXJlRnJvbUV2ZW50KGEpKXJldHVybiBjfSxzZXRNYXA6ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5MYXllci5WZWN0b3IucHJvdG90eXBlLnNldE1hcC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5jb2xsZWN0Um9vdHMoKTthLmV2ZW50cy5yZWdpc3RlcigiY2hhbmdlbGF5ZXIiLHRoaXMsdGhpcy5oYW5kbGVDaGFuZ2VMYXllcil9LHJlbW92ZU1hcDpmdW5jdGlvbihhKXthLmV2ZW50cy51bnJlZ2lzdGVyKCJjaGFuZ2VsYXllciIsdGhpcyx0aGlzLmhhbmRsZUNoYW5nZUxheWVyKTsKdGhpcy5yZXNldFJvb3RzKCk7T3BlbkxheWVycy5MYXllci5WZWN0b3IucHJvdG90eXBlLnJlbW92ZU1hcC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGNvbGxlY3RSb290czpmdW5jdGlvbigpe2Zvcih2YXIgYSxiPTA7Yjx0aGlzLm1hcC5sYXllcnMubGVuZ3RoOysrYilhPXRoaXMubWFwLmxheWVyc1tiXSwtMSE9T3BlbkxheWVycy5VdGlsLmluZGV4T2YodGhpcy5sYXllcnMsYSkmJmEucmVuZGVyZXIubW92ZVJvb3QodGhpcy5yZW5kZXJlcil9LHJlc2V0Um9vdHM6ZnVuY3Rpb24oKXtmb3IodmFyIGEsYj0wO2I8dGhpcy5sYXllcnMubGVuZ3RoOysrYilhPXRoaXMubGF5ZXJzW2JdLHRoaXMucmVuZGVyZXImJmEucmVuZGVyZXIuZ2V0UmVuZGVyTGF5ZXJJZCgpPT10aGlzLmlkJiZ0aGlzLnJlbmRlcmVyLm1vdmVSb290KGEucmVuZGVyZXIpfSxoYW5kbGVDaGFuZ2VMYXllcjpmdW5jdGlvbihhKXt2YXIgYj1hLmxheWVyOyJvcmRlciI9PWEucHJvcGVydHkmJi0xIT1PcGVuTGF5ZXJzLlV0aWwuaW5kZXhPZih0aGlzLmxheWVycywKYikmJih0aGlzLnJlc2V0Um9vdHMoKSx0aGlzLmNvbGxlY3RSb290cygpKX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5MYXllci5WZWN0b3IuUm9vdENvbnRhaW5lciJ9KTtPcGVuTGF5ZXJzLkNvbnRyb2wuU2VsZWN0RmVhdHVyZT1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuQ29udHJvbCx7bXVsdGlwbGVLZXk6bnVsbCx0b2dnbGVLZXk6bnVsbCxtdWx0aXBsZTohMSxjbGlja291dDohMCx0b2dnbGU6ITEsaG92ZXI6ITEsaGlnaGxpZ2h0T25seTohMSxib3g6ITEsb25CZWZvcmVTZWxlY3Q6ZnVuY3Rpb24oKXt9LG9uU2VsZWN0OmZ1bmN0aW9uKCl7fSxvblVuc2VsZWN0OmZ1bmN0aW9uKCl7fSxzY29wZTpudWxsLGdlb21ldHJ5VHlwZXM6bnVsbCxsYXllcjpudWxsLGxheWVyczpudWxsLGNhbGxiYWNrczpudWxsLHNlbGVjdFN0eWxlOm51bGwscmVuZGVySW50ZW50OiJzZWxlY3QiLGhhbmRsZXJzOm51bGwsaW5pdGlhbGl6ZTpmdW5jdGlvbihhLGIpe09wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLFtiXSk7bnVsbD09PXRoaXMuc2NvcGUmJih0aGlzLnNjb3BlPXRoaXMpO3RoaXMuaW5pdExheWVyKGEpO3ZhciBjPQp7Y2xpY2s6dGhpcy5jbGlja0ZlYXR1cmUsY2xpY2tvdXQ6dGhpcy5jbGlja291dEZlYXR1cmV9O3RoaXMuaG92ZXImJihjLm92ZXI9dGhpcy5vdmVyRmVhdHVyZSxjLm91dD10aGlzLm91dEZlYXR1cmUpO3RoaXMuY2FsbGJhY2tzPU9wZW5MYXllcnMuVXRpbC5leHRlbmQoYyx0aGlzLmNhbGxiYWNrcyk7dGhpcy5oYW5kbGVycz17ZmVhdHVyZTpuZXcgT3BlbkxheWVycy5IYW5kbGVyLkZlYXR1cmUodGhpcyx0aGlzLmxheWVyLHRoaXMuY2FsbGJhY2tzLHtnZW9tZXRyeVR5cGVzOnRoaXMuZ2VvbWV0cnlUeXBlc30pfTt0aGlzLmJveCYmKHRoaXMuaGFuZGxlcnMuYm94PW5ldyBPcGVuTGF5ZXJzLkhhbmRsZXIuQm94KHRoaXMse2RvbmU6dGhpcy5zZWxlY3RCb3h9LHtib3hEaXZDbGFzc05hbWU6Im9sSGFuZGxlckJveFNlbGVjdEZlYXR1cmUifSkpfSxpbml0TGF5ZXI6ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5VdGlsLmlzQXJyYXkoYSk/KHRoaXMubGF5ZXJzPWEsdGhpcy5sYXllcj0KbmV3IE9wZW5MYXllcnMuTGF5ZXIuVmVjdG9yLlJvb3RDb250YWluZXIodGhpcy5pZCsiX2NvbnRhaW5lciIse2xheWVyczphfSkpOnRoaXMubGF5ZXI9YX0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuYWN0aXZlJiZ0aGlzLmxheWVycyYmdGhpcy5tYXAucmVtb3ZlTGF5ZXIodGhpcy5sYXllcik7T3BlbkxheWVycy5Db250cm9sLnByb3RvdHlwZS5kZXN0cm95LmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLmxheWVycyYmdGhpcy5sYXllci5kZXN0cm95KCl9LGFjdGl2YXRlOmZ1bmN0aW9uKCl7dGhpcy5hY3RpdmV8fCh0aGlzLmxheWVycyYmdGhpcy5tYXAuYWRkTGF5ZXIodGhpcy5sYXllciksdGhpcy5oYW5kbGVycy5mZWF0dXJlLmFjdGl2YXRlKCksdGhpcy5ib3gmJnRoaXMuaGFuZGxlcnMuYm94JiZ0aGlzLmhhbmRsZXJzLmJveC5hY3RpdmF0ZSgpKTtyZXR1cm4gT3BlbkxheWVycy5Db250cm9sLnByb3RvdHlwZS5hY3RpdmF0ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGRlYWN0aXZhdGU6ZnVuY3Rpb24oKXt0aGlzLmFjdGl2ZSYmCih0aGlzLmhhbmRsZXJzLmZlYXR1cmUuZGVhY3RpdmF0ZSgpLHRoaXMuaGFuZGxlcnMuYm94JiZ0aGlzLmhhbmRsZXJzLmJveC5kZWFjdGl2YXRlKCksdGhpcy5sYXllcnMmJnRoaXMubWFwLnJlbW92ZUxheWVyKHRoaXMubGF5ZXIpKTtyZXR1cm4gT3BlbkxheWVycy5Db250cm9sLnByb3RvdHlwZS5kZWFjdGl2YXRlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sdW5zZWxlY3RBbGw6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5sYXllcnN8fFt0aGlzLmxheWVyXSxjLGQsZSxmO2ZvcihlPTA7ZTxiLmxlbmd0aDsrK2UpaWYoYz1iW2VdLGY9MCxudWxsIT1jLnNlbGVjdGVkRmVhdHVyZXMpZm9yKDtjLnNlbGVjdGVkRmVhdHVyZXMubGVuZ3RoPmY7KWQ9Yy5zZWxlY3RlZEZlYXR1cmVzW2ZdLGEmJmEuZXhjZXB0PT1kPysrZjp0aGlzLnVuc2VsZWN0KGQpfSxjbGlja0ZlYXR1cmU6ZnVuY3Rpb24oYSl7dGhpcy5ob3Zlcnx8KC0xPE9wZW5MYXllcnMuVXRpbC5pbmRleE9mKGEubGF5ZXIuc2VsZWN0ZWRGZWF0dXJlcywKYSk/dGhpcy50b2dnbGVTZWxlY3QoKT90aGlzLnVuc2VsZWN0KGEpOnRoaXMubXVsdGlwbGVTZWxlY3QoKXx8dGhpcy51bnNlbGVjdEFsbCh7ZXhjZXB0OmF9KToodGhpcy5tdWx0aXBsZVNlbGVjdCgpfHx0aGlzLnVuc2VsZWN0QWxsKHtleGNlcHQ6YX0pLHRoaXMuc2VsZWN0KGEpKSl9LG11bHRpcGxlU2VsZWN0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubXVsdGlwbGV8fHRoaXMuaGFuZGxlcnMuZmVhdHVyZS5ldnQmJnRoaXMuaGFuZGxlcnMuZmVhdHVyZS5ldnRbdGhpcy5tdWx0aXBsZUtleV19LHRvZ2dsZVNlbGVjdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnRvZ2dsZXx8dGhpcy5oYW5kbGVycy5mZWF0dXJlLmV2dCYmdGhpcy5oYW5kbGVycy5mZWF0dXJlLmV2dFt0aGlzLnRvZ2dsZUtleV19LGNsaWNrb3V0RmVhdHVyZTpmdW5jdGlvbihhKXshdGhpcy5ob3ZlciYmdGhpcy5jbGlja291dCYmdGhpcy51bnNlbGVjdEFsbCgpfSxvdmVyRmVhdHVyZTpmdW5jdGlvbihhKXt2YXIgYj0KYS5sYXllcjt0aGlzLmhvdmVyJiYodGhpcy5oaWdobGlnaHRPbmx5P3RoaXMuaGlnaGxpZ2h0KGEpOi0xPT1PcGVuTGF5ZXJzLlV0aWwuaW5kZXhPZihiLnNlbGVjdGVkRmVhdHVyZXMsYSkmJnRoaXMuc2VsZWN0KGEpKX0sb3V0RmVhdHVyZTpmdW5jdGlvbihhKXtpZih0aGlzLmhvdmVyKWlmKHRoaXMuaGlnaGxpZ2h0T25seSl7aWYoYS5fbGFzdEhpZ2hsaWdodGVyPT10aGlzLmlkKWlmKGEuX3ByZXZIaWdobGlnaHRlciYmYS5fcHJldkhpZ2hsaWdodGVyIT10aGlzLmlkKXtkZWxldGUgYS5fbGFzdEhpZ2hsaWdodGVyO3ZhciBiPXRoaXMubWFwLmdldENvbnRyb2woYS5fcHJldkhpZ2hsaWdodGVyKTtiJiZiLmhpZ2hsaWdodChhKX1lbHNlIHRoaXMudW5oaWdobGlnaHQoYSl9ZWxzZSB0aGlzLnVuc2VsZWN0KGEpfSxoaWdobGlnaHQ6ZnVuY3Rpb24oYSl7dmFyIGI9YS5sYXllcjshMSE9PXRoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgiYmVmb3JlZmVhdHVyZWhpZ2hsaWdodGVkIix7ZmVhdHVyZTphfSkmJgooYS5fcHJldkhpZ2hsaWdodGVyPWEuX2xhc3RIaWdobGlnaHRlcixhLl9sYXN0SGlnaGxpZ2h0ZXI9dGhpcy5pZCxiLmRyYXdGZWF0dXJlKGEsdGhpcy5zZWxlY3RTdHlsZXx8dGhpcy5yZW5kZXJJbnRlbnQpLHRoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgiZmVhdHVyZWhpZ2hsaWdodGVkIix7ZmVhdHVyZTphfSkpfSx1bmhpZ2hsaWdodDpmdW5jdGlvbihhKXt2YXIgYj1hLmxheWVyO3ZvaWQgMD09YS5fcHJldkhpZ2hsaWdodGVyP2RlbGV0ZSBhLl9sYXN0SGlnaGxpZ2h0ZXI6KGEuX3ByZXZIaWdobGlnaHRlciE9dGhpcy5pZCYmKGEuX2xhc3RIaWdobGlnaHRlcj1hLl9wcmV2SGlnaGxpZ2h0ZXIpLGRlbGV0ZSBhLl9wcmV2SGlnaGxpZ2h0ZXIpO2IuZHJhd0ZlYXR1cmUoYSxhLnN0eWxlfHxhLmxheWVyLnN0eWxlfHwiZGVmYXVsdCIpO3RoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgiZmVhdHVyZXVuaGlnaGxpZ2h0ZWQiLHtmZWF0dXJlOmF9KX0sc2VsZWN0OmZ1bmN0aW9uKGEpe3ZhciBiPQp0aGlzLm9uQmVmb3JlU2VsZWN0LmNhbGwodGhpcy5zY29wZSxhKSxjPWEubGF5ZXI7ITEhPT1iJiYoYj1jLmV2ZW50cy50cmlnZ2VyRXZlbnQoImJlZm9yZWZlYXR1cmVzZWxlY3RlZCIse2ZlYXR1cmU6YX0pLCExIT09YiYmKGMuc2VsZWN0ZWRGZWF0dXJlcy5wdXNoKGEpLHRoaXMuaGlnaGxpZ2h0KGEpLHRoaXMuaGFuZGxlcnMuZmVhdHVyZS5sYXN0RmVhdHVyZXx8KHRoaXMuaGFuZGxlcnMuZmVhdHVyZS5sYXN0RmVhdHVyZT1jLnNlbGVjdGVkRmVhdHVyZXNbMF0pLGMuZXZlbnRzLnRyaWdnZXJFdmVudCgiZmVhdHVyZXNlbGVjdGVkIix7ZmVhdHVyZTphfSksdGhpcy5vblNlbGVjdC5jYWxsKHRoaXMuc2NvcGUsYSkpKX0sdW5zZWxlY3Q6ZnVuY3Rpb24oYSl7dmFyIGI9YS5sYXllcjt0aGlzLnVuaGlnaGxpZ2h0KGEpO09wZW5MYXllcnMuVXRpbC5yZW1vdmVJdGVtKGIuc2VsZWN0ZWRGZWF0dXJlcyxhKTtiLmV2ZW50cy50cmlnZ2VyRXZlbnQoImZlYXR1cmV1bnNlbGVjdGVkIiwKe2ZlYXR1cmU6YX0pO3RoaXMub25VbnNlbGVjdC5jYWxsKHRoaXMuc2NvcGUsYSl9LHNlbGVjdEJveDpmdW5jdGlvbihhKXtpZihhIGluc3RhbmNlb2YgT3BlbkxheWVycy5Cb3VuZHMpe3ZhciBiPXRoaXMubWFwLmdldExvbkxhdEZyb21QaXhlbCh7eDphLmxlZnQseTphLmJvdHRvbX0pO2E9dGhpcy5tYXAuZ2V0TG9uTGF0RnJvbVBpeGVsKHt4OmEucmlnaHQseTphLnRvcH0pO2I9bmV3IE9wZW5MYXllcnMuQm91bmRzKGIubG9uLGIubGF0LGEubG9uLGEubGF0KTt0aGlzLm11bHRpcGxlU2VsZWN0KCl8fHRoaXMudW5zZWxlY3RBbGwoKTthPXRoaXMubXVsdGlwbGU7dGhpcy5tdWx0aXBsZT0hMDt2YXIgYz10aGlzLmxheWVyc3x8W3RoaXMubGF5ZXJdO3RoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgiYm94c2VsZWN0aW9uc3RhcnQiLHtsYXllcnM6Y30pO2Zvcih2YXIgZCxlPTA7ZTxjLmxlbmd0aDsrK2Upe2Q9Y1tlXTtmb3IodmFyIGY9MCxnPWQuZmVhdHVyZXMubGVuZ3RoO2Y8ZzsrK2Ype3ZhciBoPQpkLmZlYXR1cmVzW2ZdO2guZ2V0VmlzaWJpbGl0eSgpJiYobnVsbD09dGhpcy5nZW9tZXRyeVR5cGVzfHwtMTxPcGVuTGF5ZXJzLlV0aWwuaW5kZXhPZih0aGlzLmdlb21ldHJ5VHlwZXMsaC5nZW9tZXRyeS5DTEFTU19OQU1FKSkmJmIudG9HZW9tZXRyeSgpLmludGVyc2VjdHMoaC5nZW9tZXRyeSkmJi0xPT1PcGVuTGF5ZXJzLlV0aWwuaW5kZXhPZihkLnNlbGVjdGVkRmVhdHVyZXMsaCkmJnRoaXMuc2VsZWN0KGgpfX10aGlzLm11bHRpcGxlPWE7dGhpcy5ldmVudHMudHJpZ2dlckV2ZW50KCJib3hzZWxlY3Rpb25lbmQiLHtsYXllcnM6Y30pfX0sc2V0TWFwOmZ1bmN0aW9uKGEpe3RoaXMuaGFuZGxlcnMuZmVhdHVyZS5zZXRNYXAoYSk7dGhpcy5ib3gmJnRoaXMuaGFuZGxlcnMuYm94LnNldE1hcChhKTtPcGVuTGF5ZXJzLkNvbnRyb2wucHJvdG90eXBlLnNldE1hcC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LHNldExheWVyOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuYWN0aXZlO3RoaXMudW5zZWxlY3RBbGwoKTsKdGhpcy5kZWFjdGl2YXRlKCk7dGhpcy5sYXllcnMmJih0aGlzLmxheWVyLmRlc3Ryb3koKSx0aGlzLmxheWVycz1udWxsKTt0aGlzLmluaXRMYXllcihhKTt0aGlzLmhhbmRsZXJzLmZlYXR1cmUubGF5ZXI9dGhpcy5sYXllcjtiJiZ0aGlzLmFjdGl2YXRlKCl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuQ29udHJvbC5TZWxlY3RGZWF0dXJlIn0pO09wZW5MYXllcnMuQ29udHJvbC5BdHRyaWJ1dGlvbj1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuQ29udHJvbCx7c2VwYXJhdG9yOiIsICIsdGVtcGxhdGU6IiR7bGF5ZXJzfSIsZGVzdHJveTpmdW5jdGlvbigpe3RoaXMubWFwLmV2ZW50cy51bih7cmVtb3ZlbGF5ZXI6dGhpcy51cGRhdGVBdHRyaWJ1dGlvbixhZGRsYXllcjp0aGlzLnVwZGF0ZUF0dHJpYnV0aW9uLGNoYW5nZWxheWVyOnRoaXMudXBkYXRlQXR0cmlidXRpb24sY2hhbmdlYmFzZWxheWVyOnRoaXMudXBkYXRlQXR0cmlidXRpb24sc2NvcGU6dGhpc30pO09wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuZGVzdHJveS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGRyYXc6ZnVuY3Rpb24oKXtPcGVuTGF5ZXJzLkNvbnRyb2wucHJvdG90eXBlLmRyYXcuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMubWFwLmV2ZW50cy5vbih7Y2hhbmdlYmFzZWxheWVyOnRoaXMudXBkYXRlQXR0cmlidXRpb24sY2hhbmdlbGF5ZXI6dGhpcy51cGRhdGVBdHRyaWJ1dGlvbiwKYWRkbGF5ZXI6dGhpcy51cGRhdGVBdHRyaWJ1dGlvbixyZW1vdmVsYXllcjp0aGlzLnVwZGF0ZUF0dHJpYnV0aW9uLHNjb3BlOnRoaXN9KTt0aGlzLnVwZGF0ZUF0dHJpYnV0aW9uKCk7cmV0dXJuIHRoaXMuZGl2fSx1cGRhdGVBdHRyaWJ1dGlvbjpmdW5jdGlvbigpe3ZhciBhPVtdO2lmKHRoaXMubWFwJiZ0aGlzLm1hcC5sYXllcnMpe2Zvcih2YXIgYj0wLGM9dGhpcy5tYXAubGF5ZXJzLmxlbmd0aDtiPGM7YisrKXt2YXIgZD10aGlzLm1hcC5sYXllcnNbYl07ZC5hdHRyaWJ1dGlvbiYmZC5nZXRWaXNpYmlsaXR5KCkmJi0xPT09T3BlbkxheWVycy5VdGlsLmluZGV4T2YoYSxkLmF0dHJpYnV0aW9uKSYmYS5wdXNoKGQuYXR0cmlidXRpb24pfXRoaXMuZGl2LmlubmVySFRNTD1PcGVuTGF5ZXJzLlN0cmluZy5mb3JtYXQodGhpcy50ZW1wbGF0ZSx7bGF5ZXJzOmEuam9pbih0aGlzLnNlcGFyYXRvcil9KX19LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuQ29udHJvbC5BdHRyaWJ1dGlvbiJ9KTtPcGVuTGF5ZXJzLktpbmV0aWM9T3BlbkxheWVycy5DbGFzcyh7dGhyZXNob2xkOjAsZGVjZWxlcmF0aW9uOjAuMDAzNSxuYlBvaW50czoxMDAsZGVsYXk6MjAwLHBvaW50czp2b2lkIDAsdGltZXJJZDp2b2lkIDAsaW5pdGlhbGl6ZTpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHRoaXMsYSl9LGJlZ2luOmZ1bmN0aW9uKCl7T3BlbkxheWVycy5BbmltYXRpb24uc3RvcCh0aGlzLnRpbWVySWQpO3RoaXMudGltZXJJZD12b2lkIDA7dGhpcy5wb2ludHM9W119LHVwZGF0ZTpmdW5jdGlvbihhKXt0aGlzLnBvaW50cy51bnNoaWZ0KHt4eTphLHRpY2s6KG5ldyBEYXRlKS5nZXRUaW1lKCl9KTt0aGlzLnBvaW50cy5sZW5ndGg+dGhpcy5uYlBvaW50cyYmdGhpcy5wb2ludHMucG9wKCl9LGVuZDpmdW5jdGlvbihhKXtmb3IodmFyIGIsYz0obmV3IERhdGUpLmdldFRpbWUoKSxkPTAsZT10aGlzLnBvaW50cy5sZW5ndGgsZjtkPGU7ZCsrKXtmPXRoaXMucG9pbnRzW2RdO2lmKGMtCmYudGljaz50aGlzLmRlbGF5KWJyZWFrO2I9Zn1pZihiJiYoZD0obmV3IERhdGUpLmdldFRpbWUoKS1iLnRpY2ssYz1NYXRoLnNxcnQoTWF0aC5wb3coYS54LWIueHkueCwyKStNYXRoLnBvdyhhLnktYi54eS55LDIpKSxkPWMvZCwhKDA9PWR8fGQ8dGhpcy50aHJlc2hvbGQpKSlyZXR1cm4gYz1NYXRoLmFzaW4oKGEueS1iLnh5LnkpL2MpLGIueHkueDw9YS54JiYoYz1NYXRoLlBJLWMpLHtzcGVlZDpkLHRoZXRhOmN9fSxtb3ZlOmZ1bmN0aW9uKGEsYil7dmFyIGM9YS5zcGVlZCxkPU1hdGguY29zKGEudGhldGEpLGU9LU1hdGguc2luKGEudGhldGEpLGY9KG5ldyBEYXRlKS5nZXRUaW1lKCksZz0wLGg9MDt0aGlzLnRpbWVySWQ9T3BlbkxheWVycy5BbmltYXRpb24uc3RhcnQoT3BlbkxheWVycy5GdW5jdGlvbi5iaW5kKGZ1bmN0aW9uKCl7aWYobnVsbCE9dGhpcy50aW1lcklkKXt2YXIgYT0obmV3IERhdGUpLmdldFRpbWUoKS1mLGw9LXRoaXMuZGVjZWxlcmF0aW9uKk1hdGgucG93KGEsCjIpLzIrYyphLG09bCpkLGw9bCplLHIscDtyPSExOzA+PS10aGlzLmRlY2VsZXJhdGlvbiphK2MmJihPcGVuTGF5ZXJzLkFuaW1hdGlvbi5zdG9wKHRoaXMudGltZXJJZCksdGhpcy50aW1lcklkPW51bGwscj0hMCk7YT1tLWc7cD1sLWg7Zz1tO2g9bDtiKGEscCxyKX19LHRoaXMpKX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5LaW5ldGljIn0pO09wZW5MYXllcnMuRmlsdGVyLkxvZ2ljYWw9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkZpbHRlcix7ZmlsdGVyczpudWxsLHR5cGU6bnVsbCxpbml0aWFsaXplOmZ1bmN0aW9uKGEpe3RoaXMuZmlsdGVycz1bXTtPcGVuTGF5ZXJzLkZpbHRlci5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLFthXSl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmZpbHRlcnM9bnVsbDtPcGVuTGF5ZXJzLkZpbHRlci5wcm90b3R5cGUuZGVzdHJveS5hcHBseSh0aGlzKX0sZXZhbHVhdGU6ZnVuY3Rpb24oYSl7dmFyIGIsYztzd2l0Y2godGhpcy50eXBlKXtjYXNlIE9wZW5MYXllcnMuRmlsdGVyLkxvZ2ljYWwuQU5EOmI9MDtmb3IoYz10aGlzLmZpbHRlcnMubGVuZ3RoO2I8YztiKyspaWYoITE9PXRoaXMuZmlsdGVyc1tiXS5ldmFsdWF0ZShhKSlyZXR1cm4hMTtyZXR1cm4hMDtjYXNlIE9wZW5MYXllcnMuRmlsdGVyLkxvZ2ljYWwuT1I6Yj0wO2ZvcihjPXRoaXMuZmlsdGVycy5sZW5ndGg7YjwKYztiKyspaWYoITA9PXRoaXMuZmlsdGVyc1tiXS5ldmFsdWF0ZShhKSlyZXR1cm4hMDtyZXR1cm4hMTtjYXNlIE9wZW5MYXllcnMuRmlsdGVyLkxvZ2ljYWwuTk9UOnJldHVybiF0aGlzLmZpbHRlcnNbMF0uZXZhbHVhdGUoYSl9fSxjbG9uZTpmdW5jdGlvbigpe2Zvcih2YXIgYT1bXSxiPTAsYz10aGlzLmZpbHRlcnMubGVuZ3RoO2I8YzsrK2IpYS5wdXNoKHRoaXMuZmlsdGVyc1tiXS5jbG9uZSgpKTtyZXR1cm4gbmV3IE9wZW5MYXllcnMuRmlsdGVyLkxvZ2ljYWwoe3R5cGU6dGhpcy50eXBlLGZpbHRlcnM6YX0pfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkZpbHRlci5Mb2dpY2FsIn0pO09wZW5MYXllcnMuRmlsdGVyLkxvZ2ljYWwuQU5EPSImJiI7T3BlbkxheWVycy5GaWx0ZXIuTG9naWNhbC5PUj0ifHwiO09wZW5MYXllcnMuRmlsdGVyLkxvZ2ljYWwuTk9UPSIhIjtPcGVuTGF5ZXJzLkhhbmRsZXIuRHJhZz1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuSGFuZGxlcix7c3RhcnRlZDohMSxzdG9wRG93bjohMCxkcmFnZ2luZzohMSxsYXN0Om51bGwsc3RhcnQ6bnVsbCxsYXN0TW92ZUV2dDpudWxsLG9sZE9uc2VsZWN0c3RhcnQ6bnVsbCxpbnRlcnZhbDowLHRpbWVvdXRJZDpudWxsLGRvY3VtZW50RHJhZzohMSxkb2N1bWVudEV2ZW50czpudWxsLGluaXRpYWxpemU6ZnVuY3Rpb24oYSxiLGMpe09wZW5MYXllcnMuSGFuZGxlci5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7aWYoITA9PT10aGlzLmRvY3VtZW50RHJhZyl7dmFyIGQ9dGhpczt0aGlzLl9kb2NNb3ZlPWZ1bmN0aW9uKGEpe2QubW91c2Vtb3ZlKHt4eTp7eDphLmNsaWVudFgseTphLmNsaWVudFl9LGVsZW1lbnQ6ZG9jdW1lbnR9KX07dGhpcy5fZG9jVXA9ZnVuY3Rpb24oYSl7ZC5tb3VzZXVwKHt4eTp7eDphLmNsaWVudFgseTphLmNsaWVudFl9fSl9fX0sCmRyYWdzdGFydDpmdW5jdGlvbihhKXt2YXIgYj0hMDt0aGlzLmRyYWdnaW5nPSExO3RoaXMuY2hlY2tNb2RpZmllcnMoYSkmJihPcGVuTGF5ZXJzLkV2ZW50LmlzTGVmdENsaWNrKGEpfHxPcGVuTGF5ZXJzLkV2ZW50LmlzU2luZ2xlVG91Y2goYSkpPyh0aGlzLnN0YXJ0ZWQ9ITAsdGhpcy5sYXN0PXRoaXMuc3RhcnQ9YS54eSxPcGVuTGF5ZXJzLkVsZW1lbnQuYWRkQ2xhc3ModGhpcy5tYXAudmlld1BvcnREaXYsIm9sRHJhZ0Rvd24iKSx0aGlzLmRvd24oYSksdGhpcy5jYWxsYmFjaygiZG93biIsW2EueHldKSxPcGVuTGF5ZXJzLkV2ZW50LnByZXZlbnREZWZhdWx0KGEpLHRoaXMub2xkT25zZWxlY3RzdGFydHx8KHRoaXMub2xkT25zZWxlY3RzdGFydD1kb2N1bWVudC5vbnNlbGVjdHN0YXJ0P2RvY3VtZW50Lm9uc2VsZWN0c3RhcnQ6T3BlbkxheWVycy5GdW5jdGlvbi5UcnVlKSxkb2N1bWVudC5vbnNlbGVjdHN0YXJ0PU9wZW5MYXllcnMuRnVuY3Rpb24uRmFsc2UsYj0hdGhpcy5zdG9wRG93bik6Cih0aGlzLnN0YXJ0ZWQ9ITEsdGhpcy5sYXN0PXRoaXMuc3RhcnQ9bnVsbCk7cmV0dXJuIGJ9LGRyYWdtb3ZlOmZ1bmN0aW9uKGEpe3RoaXMubGFzdE1vdmVFdnQ9YTshdGhpcy5zdGFydGVkfHwodGhpcy50aW1lb3V0SWR8fGEueHkueD09dGhpcy5sYXN0LngmJmEueHkueT09dGhpcy5sYXN0LnkpfHwoITA9PT10aGlzLmRvY3VtZW50RHJhZyYmdGhpcy5kb2N1bWVudEV2ZW50cyYmKGEuZWxlbWVudD09PWRvY3VtZW50Pyh0aGlzLmFkanVzdFhZKGEpLHRoaXMuc2V0RXZlbnQoYSkpOnRoaXMucmVtb3ZlRG9jdW1lbnRFdmVudHMoKSksMDx0aGlzLmludGVydmFsJiYodGhpcy50aW1lb3V0SWQ9c2V0VGltZW91dChPcGVuTGF5ZXJzLkZ1bmN0aW9uLmJpbmQodGhpcy5yZW1vdmVUaW1lb3V0LHRoaXMpLHRoaXMuaW50ZXJ2YWwpKSx0aGlzLmRyYWdnaW5nPSEwLHRoaXMubW92ZShhKSx0aGlzLmNhbGxiYWNrKCJtb3ZlIixbYS54eV0pLHRoaXMub2xkT25zZWxlY3RzdGFydHx8KHRoaXMub2xkT25zZWxlY3RzdGFydD0KZG9jdW1lbnQub25zZWxlY3RzdGFydCxkb2N1bWVudC5vbnNlbGVjdHN0YXJ0PU9wZW5MYXllcnMuRnVuY3Rpb24uRmFsc2UpLHRoaXMubGFzdD1hLnh5KTtyZXR1cm4hMH0sZHJhZ2VuZDpmdW5jdGlvbihhKXtpZih0aGlzLnN0YXJ0ZWQpeyEwPT09dGhpcy5kb2N1bWVudERyYWcmJnRoaXMuZG9jdW1lbnRFdmVudHMmJih0aGlzLmFkanVzdFhZKGEpLHRoaXMucmVtb3ZlRG9jdW1lbnRFdmVudHMoKSk7dmFyIGI9dGhpcy5zdGFydCE9dGhpcy5sYXN0O3RoaXMuZHJhZ2dpbmc9dGhpcy5zdGFydGVkPSExO09wZW5MYXllcnMuRWxlbWVudC5yZW1vdmVDbGFzcyh0aGlzLm1hcC52aWV3UG9ydERpdiwib2xEcmFnRG93biIpO3RoaXMudXAoYSk7dGhpcy5jYWxsYmFjaygidXAiLFthLnh5XSk7YiYmdGhpcy5jYWxsYmFjaygiZG9uZSIsW2EueHldKTtkb2N1bWVudC5vbnNlbGVjdHN0YXJ0PXRoaXMub2xkT25zZWxlY3RzdGFydH1yZXR1cm4hMH0sZG93bjpmdW5jdGlvbihhKXt9LG1vdmU6ZnVuY3Rpb24oYSl7fSwKdXA6ZnVuY3Rpb24oYSl7fSxvdXQ6ZnVuY3Rpb24oYSl7fSxtb3VzZWRvd246ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZHJhZ3N0YXJ0KGEpfSx0b3VjaHN0YXJ0OmZ1bmN0aW9uKGEpe3RoaXMuc3RhcnRUb3VjaCgpO3JldHVybiB0aGlzLmRyYWdzdGFydChhKX0sbW91c2Vtb3ZlOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmRyYWdtb3ZlKGEpfSx0b3VjaG1vdmU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZHJhZ21vdmUoYSl9LHJlbW92ZVRpbWVvdXQ6ZnVuY3Rpb24oKXt0aGlzLnRpbWVvdXRJZD1udWxsO3RoaXMuZHJhZ2dpbmcmJnRoaXMubW91c2Vtb3ZlKHRoaXMubGFzdE1vdmVFdnQpfSxtb3VzZXVwOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmRyYWdlbmQoYSl9LHRvdWNoZW5kOmZ1bmN0aW9uKGEpe2EueHk9dGhpcy5sYXN0O3JldHVybiB0aGlzLmRyYWdlbmQoYSl9LG1vdXNlb3V0OmZ1bmN0aW9uKGEpe2lmKHRoaXMuc3RhcnRlZCYmT3BlbkxheWVycy5VdGlsLm1vdXNlTGVmdChhLAp0aGlzLm1hcC52aWV3UG9ydERpdikpaWYoITA9PT10aGlzLmRvY3VtZW50RHJhZyl0aGlzLmFkZERvY3VtZW50RXZlbnRzKCk7ZWxzZXt2YXIgYj10aGlzLnN0YXJ0IT10aGlzLmxhc3Q7dGhpcy5kcmFnZ2luZz10aGlzLnN0YXJ0ZWQ9ITE7T3BlbkxheWVycy5FbGVtZW50LnJlbW92ZUNsYXNzKHRoaXMubWFwLnZpZXdQb3J0RGl2LCJvbERyYWdEb3duIik7dGhpcy5vdXQoYSk7dGhpcy5jYWxsYmFjaygib3V0IixbXSk7YiYmdGhpcy5jYWxsYmFjaygiZG9uZSIsW2EueHldKTtkb2N1bWVudC5vbnNlbGVjdHN0YXJ0JiYoZG9jdW1lbnQub25zZWxlY3RzdGFydD10aGlzLm9sZE9uc2VsZWN0c3RhcnQpfXJldHVybiEwfSxjbGljazpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5zdGFydD09dGhpcy5sYXN0fSxhY3RpdmF0ZTpmdW5jdGlvbigpe3ZhciBhPSExO09wZW5MYXllcnMuSGFuZGxlci5wcm90b3R5cGUuYWN0aXZhdGUuYXBwbHkodGhpcyxhcmd1bWVudHMpJiYodGhpcy5kcmFnZ2luZz0KITEsYT0hMCk7cmV0dXJuIGF9LGRlYWN0aXZhdGU6ZnVuY3Rpb24oKXt2YXIgYT0hMTtPcGVuTGF5ZXJzLkhhbmRsZXIucHJvdG90eXBlLmRlYWN0aXZhdGUuYXBwbHkodGhpcyxhcmd1bWVudHMpJiYodGhpcy5kcmFnZ2luZz10aGlzLnN0YXJ0ZWQ9ITEsdGhpcy5sYXN0PXRoaXMuc3RhcnQ9bnVsbCxhPSEwLE9wZW5MYXllcnMuRWxlbWVudC5yZW1vdmVDbGFzcyh0aGlzLm1hcC52aWV3UG9ydERpdiwib2xEcmFnRG93biIpKTtyZXR1cm4gYX0sYWRqdXN0WFk6ZnVuY3Rpb24oYSl7dmFyIGI9T3BlbkxheWVycy5VdGlsLnBhZ2VQb3NpdGlvbih0aGlzLm1hcC52aWV3UG9ydERpdik7YS54eS54LT1iWzBdO2EueHkueS09YlsxXX0sYWRkRG9jdW1lbnRFdmVudHM6ZnVuY3Rpb24oKXtPcGVuTGF5ZXJzLkVsZW1lbnQuYWRkQ2xhc3MoZG9jdW1lbnQuYm9keSwib2xEcmFnRG93biIpO3RoaXMuZG9jdW1lbnRFdmVudHM9ITA7T3BlbkxheWVycy5FdmVudC5vYnNlcnZlKGRvY3VtZW50LCJtb3VzZW1vdmUiLAp0aGlzLl9kb2NNb3ZlKTtPcGVuTGF5ZXJzLkV2ZW50Lm9ic2VydmUoZG9jdW1lbnQsIm1vdXNldXAiLHRoaXMuX2RvY1VwKX0scmVtb3ZlRG9jdW1lbnRFdmVudHM6ZnVuY3Rpb24oKXtPcGVuTGF5ZXJzLkVsZW1lbnQucmVtb3ZlQ2xhc3MoZG9jdW1lbnQuYm9keSwib2xEcmFnRG93biIpO3RoaXMuZG9jdW1lbnRFdmVudHM9ITE7T3BlbkxheWVycy5FdmVudC5zdG9wT2JzZXJ2aW5nKGRvY3VtZW50LCJtb3VzZW1vdmUiLHRoaXMuX2RvY01vdmUpO09wZW5MYXllcnMuRXZlbnQuc3RvcE9ic2VydmluZyhkb2N1bWVudCwibW91c2V1cCIsdGhpcy5fZG9jVXApfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkhhbmRsZXIuRHJhZyJ9KTtPcGVuTGF5ZXJzLkhhbmRsZXIuQm94PU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5IYW5kbGVyLHtkcmFnSGFuZGxlcjpudWxsLGJveERpdkNsYXNzTmFtZToib2xIYW5kbGVyQm94Wm9vbUJveCIsYm94T2Zmc2V0czpudWxsLGluaXRpYWxpemU6ZnVuY3Rpb24oYSxiLGMpe09wZW5MYXllcnMuSGFuZGxlci5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5kcmFnSGFuZGxlcj1uZXcgT3BlbkxheWVycy5IYW5kbGVyLkRyYWcodGhpcyx7ZG93bjp0aGlzLnN0YXJ0Qm94LG1vdmU6dGhpcy5tb3ZlQm94LG91dDp0aGlzLnJlbW92ZUJveCx1cDp0aGlzLmVuZEJveH0se2tleU1hc2s6dGhpcy5rZXlNYXNrfSl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXtPcGVuTGF5ZXJzLkhhbmRsZXIucHJvdG90eXBlLmRlc3Ryb3kuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMuZHJhZ0hhbmRsZXImJih0aGlzLmRyYWdIYW5kbGVyLmRlc3Ryb3koKSx0aGlzLmRyYWdIYW5kbGVyPQpudWxsKX0sc2V0TWFwOmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuSGFuZGxlci5wcm90b3R5cGUuc2V0TWFwLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLmRyYWdIYW5kbGVyJiZ0aGlzLmRyYWdIYW5kbGVyLnNldE1hcChhKX0sc3RhcnRCb3g6ZnVuY3Rpb24oYSl7dGhpcy5jYWxsYmFjaygic3RhcnQiLFtdKTt0aGlzLnpvb21Cb3g9T3BlbkxheWVycy5VdGlsLmNyZWF0ZURpdigiem9vbUJveCIse3g6LTk5OTkseTotOTk5OX0pO3RoaXMuem9vbUJveC5jbGFzc05hbWU9dGhpcy5ib3hEaXZDbGFzc05hbWU7dGhpcy56b29tQm94LnN0eWxlLnpJbmRleD10aGlzLm1hcC5aX0lOREVYX0JBU0UuUG9wdXAtMTt0aGlzLm1hcC52aWV3UG9ydERpdi5hcHBlbmRDaGlsZCh0aGlzLnpvb21Cb3gpO09wZW5MYXllcnMuRWxlbWVudC5hZGRDbGFzcyh0aGlzLm1hcC52aWV3UG9ydERpdiwib2xEcmF3Qm94Iil9LG1vdmVCb3g6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5kcmFnSGFuZGxlci5zdGFydC54LApjPXRoaXMuZHJhZ0hhbmRsZXIuc3RhcnQueSxkPU1hdGguYWJzKGItYS54KSxlPU1hdGguYWJzKGMtYS55KSxmPXRoaXMuZ2V0Qm94T2Zmc2V0cygpO3RoaXMuem9vbUJveC5zdHlsZS53aWR0aD1kK2Yud2lkdGgrMSsicHgiO3RoaXMuem9vbUJveC5zdHlsZS5oZWlnaHQ9ZStmLmhlaWdodCsxKyJweCI7dGhpcy56b29tQm94LnN0eWxlLmxlZnQ9KGEueDxiP2ItZC1mLmxlZnQ6Yi1mLmxlZnQpKyJweCI7dGhpcy56b29tQm94LnN0eWxlLnRvcD0oYS55PGM/Yy1lLWYudG9wOmMtZi50b3ApKyJweCJ9LGVuZEJveDpmdW5jdGlvbihhKXt2YXIgYjtpZig1PE1hdGguYWJzKHRoaXMuZHJhZ0hhbmRsZXIuc3RhcnQueC1hLngpfHw1PE1hdGguYWJzKHRoaXMuZHJhZ0hhbmRsZXIuc3RhcnQueS1hLnkpKXt2YXIgYz10aGlzLmRyYWdIYW5kbGVyLnN0YXJ0O2I9TWF0aC5taW4oYy55LGEueSk7dmFyIGQ9TWF0aC5tYXgoYy55LGEueSksZT1NYXRoLm1pbihjLngsYS54KTthPU1hdGgubWF4KGMueCwKYS54KTtiPW5ldyBPcGVuTGF5ZXJzLkJvdW5kcyhlLGQsYSxiKX1lbHNlIGI9dGhpcy5kcmFnSGFuZGxlci5zdGFydC5jbG9uZSgpO3RoaXMucmVtb3ZlQm94KCk7dGhpcy5jYWxsYmFjaygiZG9uZSIsW2JdKX0scmVtb3ZlQm94OmZ1bmN0aW9uKCl7dGhpcy5tYXAudmlld1BvcnREaXYucmVtb3ZlQ2hpbGQodGhpcy56b29tQm94KTt0aGlzLmJveE9mZnNldHM9dGhpcy56b29tQm94PW51bGw7T3BlbkxheWVycy5FbGVtZW50LnJlbW92ZUNsYXNzKHRoaXMubWFwLnZpZXdQb3J0RGl2LCJvbERyYXdCb3giKX0sYWN0aXZhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gT3BlbkxheWVycy5IYW5kbGVyLnByb3RvdHlwZS5hY3RpdmF0ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk/KHRoaXMuZHJhZ0hhbmRsZXIuYWN0aXZhdGUoKSwhMCk6ITF9LGRlYWN0aXZhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gT3BlbkxheWVycy5IYW5kbGVyLnByb3RvdHlwZS5kZWFjdGl2YXRlLmFwcGx5KHRoaXMsYXJndW1lbnRzKT8KKHRoaXMuZHJhZ0hhbmRsZXIuZGVhY3RpdmF0ZSgpJiZ0aGlzLnpvb21Cb3gmJnRoaXMucmVtb3ZlQm94KCksITApOiExfSxnZXRCb3hPZmZzZXRzOmZ1bmN0aW9uKCl7aWYoIXRoaXMuYm94T2Zmc2V0cyl7dmFyIGE9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7YS5zdHlsZS5wb3NpdGlvbj0iYWJzb2x1dGUiO2Euc3R5bGUuYm9yZGVyPSIxcHggc29saWQgYmxhY2siO2Euc3R5bGUud2lkdGg9IjNweCI7ZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChhKTt2YXIgYj0zPT1hLmNsaWVudFdpZHRoO2RvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoYSk7dmFyIGE9cGFyc2VJbnQoT3BlbkxheWVycy5FbGVtZW50LmdldFN0eWxlKHRoaXMuem9vbUJveCwiYm9yZGVyLWxlZnQtd2lkdGgiKSksYz1wYXJzZUludChPcGVuTGF5ZXJzLkVsZW1lbnQuZ2V0U3R5bGUodGhpcy56b29tQm94LCJib3JkZXItcmlnaHQtd2lkdGgiKSksZD1wYXJzZUludChPcGVuTGF5ZXJzLkVsZW1lbnQuZ2V0U3R5bGUodGhpcy56b29tQm94LAoiYm9yZGVyLXRvcC13aWR0aCIpKSxlPXBhcnNlSW50KE9wZW5MYXllcnMuRWxlbWVudC5nZXRTdHlsZSh0aGlzLnpvb21Cb3gsImJvcmRlci1ib3R0b20td2lkdGgiKSk7dGhpcy5ib3hPZmZzZXRzPXtsZWZ0OmEscmlnaHQ6Yyx0b3A6ZCxib3R0b206ZSx3aWR0aDohMT09PWI/YStjOjAsaGVpZ2h0OiExPT09Yj9kK2U6MH19cmV0dXJuIHRoaXMuYm94T2Zmc2V0c30sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5IYW5kbGVyLkJveCJ9KTtPcGVuTGF5ZXJzLkNvbnRyb2wuWm9vbUJveD1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuQ29udHJvbCx7dHlwZTpPcGVuTGF5ZXJzLkNvbnRyb2wuVFlQRV9UT09MLG91dDohMSxrZXlNYXNrOm51bGwsYWx3YXlzWm9vbTohMSx6b29tT25DbGljazohMCxkcmF3OmZ1bmN0aW9uKCl7dGhpcy5oYW5kbGVyPW5ldyBPcGVuTGF5ZXJzLkhhbmRsZXIuQm94KHRoaXMse2RvbmU6dGhpcy56b29tQm94fSx7a2V5TWFzazp0aGlzLmtleU1hc2t9KX0sem9vbUJveDpmdW5jdGlvbihhKXtpZihhIGluc3RhbmNlb2YgT3BlbkxheWVycy5Cb3VuZHMpe3ZhciBiLGM9YS5nZXRDZW50ZXJQaXhlbCgpO2lmKHRoaXMub3V0KXtiPU1hdGgubWluKHRoaXMubWFwLnNpemUuaC8oYS5ib3R0b20tYS50b3ApLHRoaXMubWFwLnNpemUudy8oYS5yaWdodC1hLmxlZnQpKTt2YXIgZD10aGlzLm1hcC5nZXRFeHRlbnQoKSxlPXRoaXMubWFwLmdldExvbkxhdEZyb21QaXhlbChjKSxmPWUubG9uLWQuZ2V0V2lkdGgoKS8KMipiO2E9ZS5sb24rZC5nZXRXaWR0aCgpLzIqYjt2YXIgZz1lLmxhdC1kLmdldEhlaWdodCgpLzIqYjtiPWUubGF0K2QuZ2V0SGVpZ2h0KCkvMipiO2I9bmV3IE9wZW5MYXllcnMuQm91bmRzKGYsZyxhLGIpfWVsc2UgZj10aGlzLm1hcC5nZXRMb25MYXRGcm9tUGl4ZWwoe3g6YS5sZWZ0LHk6YS5ib3R0b219KSxhPXRoaXMubWFwLmdldExvbkxhdEZyb21QaXhlbCh7eDphLnJpZ2h0LHk6YS50b3B9KSxiPW5ldyBPcGVuTGF5ZXJzLkJvdW5kcyhmLmxvbixmLmxhdCxhLmxvbixhLmxhdCk7Zj10aGlzLm1hcC5nZXRab29tKCk7Zz10aGlzLm1hcC5nZXRTaXplKCk7YT1nLncvMjtnPWcuaC8yO2I9dGhpcy5tYXAuZ2V0Wm9vbUZvckV4dGVudChiKTtkPXRoaXMubWFwLmdldFJlc29sdXRpb24oKTtlPXRoaXMubWFwLmdldFJlc29sdXRpb25Gb3Jab29tKGIpO2Q9PWU/dGhpcy5tYXAuc2V0Q2VudGVyKHRoaXMubWFwLmdldExvbkxhdEZyb21QaXhlbChjKSk6dGhpcy5tYXAuem9vbVRvKGIsCnt4OihkKmMueC1lKmEpLyhkLWUpLHk6KGQqYy55LWUqZykvKGQtZSl9KTtmPT10aGlzLm1hcC5nZXRab29tKCkmJiEwPT10aGlzLmFsd2F5c1pvb20mJnRoaXMubWFwLnpvb21UbyhmKyh0aGlzLm91dD8tMToxKSl9ZWxzZSB0aGlzLnpvb21PbkNsaWNrJiYodGhpcy5vdXQ/dGhpcy5tYXAuem9vbVRvKHRoaXMubWFwLmdldFpvb20oKS0xLGEpOnRoaXMubWFwLnpvb21Ubyh0aGlzLm1hcC5nZXRab29tKCkrMSxhKSl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuQ29udHJvbC5ab29tQm94In0pO09wZW5MYXllcnMuQ29udHJvbC5EcmFnUGFuPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Db250cm9sLHt0eXBlOk9wZW5MYXllcnMuQ29udHJvbC5UWVBFX1RPT0wscGFubmVkOiExLGludGVydmFsOjAsZG9jdW1lbnREcmFnOiExLGtpbmV0aWM6bnVsbCxlbmFibGVLaW5ldGljOiEwLGtpbmV0aWNJbnRlcnZhbDoxMCxkcmF3OmZ1bmN0aW9uKCl7aWYodGhpcy5lbmFibGVLaW5ldGljJiZPcGVuTGF5ZXJzLktpbmV0aWMpe3ZhciBhPXtpbnRlcnZhbDp0aGlzLmtpbmV0aWNJbnRlcnZhbH07Im9iamVjdCI9PT10eXBlb2YgdGhpcy5lbmFibGVLaW5ldGljJiYoYT1PcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKGEsdGhpcy5lbmFibGVLaW5ldGljKSk7dGhpcy5raW5ldGljPW5ldyBPcGVuTGF5ZXJzLktpbmV0aWMoYSl9dGhpcy5oYW5kbGVyPW5ldyBPcGVuTGF5ZXJzLkhhbmRsZXIuRHJhZyh0aGlzLHttb3ZlOnRoaXMucGFuTWFwLGRvbmU6dGhpcy5wYW5NYXBEb25lLGRvd246dGhpcy5wYW5NYXBTdGFydH0sCntpbnRlcnZhbDp0aGlzLmludGVydmFsLGRvY3VtZW50RHJhZzp0aGlzLmRvY3VtZW50RHJhZ30pfSxwYW5NYXBTdGFydDpmdW5jdGlvbigpe3RoaXMua2luZXRpYyYmdGhpcy5raW5ldGljLmJlZ2luKCl9LHBhbk1hcDpmdW5jdGlvbihhKXt0aGlzLmtpbmV0aWMmJnRoaXMua2luZXRpYy51cGRhdGUoYSk7dGhpcy5wYW5uZWQ9ITA7dGhpcy5tYXAucGFuKHRoaXMuaGFuZGxlci5sYXN0LngtYS54LHRoaXMuaGFuZGxlci5sYXN0LnktYS55LHtkcmFnZ2luZzohMCxhbmltYXRlOiExfSl9LHBhbk1hcERvbmU6ZnVuY3Rpb24oYSl7aWYodGhpcy5wYW5uZWQpe3ZhciBiPW51bGw7dGhpcy5raW5ldGljJiYoYj10aGlzLmtpbmV0aWMuZW5kKGEpKTt0aGlzLm1hcC5wYW4odGhpcy5oYW5kbGVyLmxhc3QueC1hLngsdGhpcy5oYW5kbGVyLmxhc3QueS1hLnkse2RyYWdnaW5nOiEhYixhbmltYXRlOiExfSk7aWYoYil7dmFyIGM9dGhpczt0aGlzLmtpbmV0aWMubW92ZShiLGZ1bmN0aW9uKGEsYiwKZil7Yy5tYXAucGFuKGEsYix7ZHJhZ2dpbmc6IWYsYW5pbWF0ZTohMX0pfSl9dGhpcy5wYW5uZWQ9ITF9fSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkNvbnRyb2wuRHJhZ1BhbiJ9KTtPcGVuTGF5ZXJzLkhhbmRsZXIuQ2xpY2s9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkhhbmRsZXIse2RlbGF5OjMwMCxzaW5nbGU6ITAsImRvdWJsZSI6ITEscGl4ZWxUb2xlcmFuY2U6MCxkYmxjbGlja1RvbGVyYW5jZToxMyxzdG9wU2luZ2xlOiExLHN0b3BEb3VibGU6ITEsdGltZXJJZDpudWxsLGRvd246bnVsbCxsYXN0Om51bGwsZmlyc3Q6bnVsbCxyaWdodGNsaWNrVGltZXJJZDpudWxsLHRvdWNoc3RhcnQ6ZnVuY3Rpb24oYSl7dGhpcy5zdGFydFRvdWNoKCk7dGhpcy5kb3duPXRoaXMuZ2V0RXZlbnRJbmZvKGEpO3RoaXMubGFzdD10aGlzLmdldEV2ZW50SW5mbyhhKTtyZXR1cm4hMH0sdG91Y2htb3ZlOmZ1bmN0aW9uKGEpe3RoaXMubGFzdD10aGlzLmdldEV2ZW50SW5mbyhhKTtyZXR1cm4hMH0sdG91Y2hlbmQ6ZnVuY3Rpb24oYSl7dGhpcy5kb3duJiYoYS54eT10aGlzLmxhc3QueHksYS5sYXN0VG91Y2hlcz10aGlzLmxhc3QudG91Y2hlcyx0aGlzLmhhbmRsZVNpbmdsZShhKSwKdGhpcy5kb3duPW51bGwpO3JldHVybiEwfSxtb3VzZWRvd246ZnVuY3Rpb24oYSl7dGhpcy5kb3duPXRoaXMuZ2V0RXZlbnRJbmZvKGEpO3RoaXMubGFzdD10aGlzLmdldEV2ZW50SW5mbyhhKTtyZXR1cm4hMH0sbW91c2V1cDpmdW5jdGlvbihhKXt2YXIgYj0hMDt0aGlzLmNoZWNrTW9kaWZpZXJzKGEpJiYodGhpcy5jb250cm9sLmhhbmRsZVJpZ2h0Q2xpY2tzJiZPcGVuTGF5ZXJzLkV2ZW50LmlzUmlnaHRDbGljayhhKSkmJihiPXRoaXMucmlnaHRjbGljayhhKSk7cmV0dXJuIGJ9LHJpZ2h0Y2xpY2s6ZnVuY3Rpb24oYSl7aWYodGhpcy5wYXNzZXNUb2xlcmFuY2UoYSkpe2lmKG51bGwhPXRoaXMucmlnaHRjbGlja1RpbWVySWQpcmV0dXJuIHRoaXMuY2xlYXJUaW1lcigpLHRoaXMuY2FsbGJhY2soImRibHJpZ2h0Y2xpY2siLFthXSksIXRoaXMuc3RvcERvdWJsZTthPXRoaXNbImRvdWJsZSJdP09wZW5MYXllcnMuVXRpbC5leHRlbmQoe30sYSk6dGhpcy5jYWxsYmFjaygicmlnaHRjbGljayIsClthXSk7YT1PcGVuTGF5ZXJzLkZ1bmN0aW9uLmJpbmQodGhpcy5kZWxheWVkUmlnaHRDYWxsLHRoaXMsYSk7dGhpcy5yaWdodGNsaWNrVGltZXJJZD13aW5kb3cuc2V0VGltZW91dChhLHRoaXMuZGVsYXkpfXJldHVybiF0aGlzLnN0b3BTaW5nbGV9LGRlbGF5ZWRSaWdodENhbGw6ZnVuY3Rpb24oYSl7dGhpcy5yaWdodGNsaWNrVGltZXJJZD1udWxsO2EmJnRoaXMuY2FsbGJhY2soInJpZ2h0Y2xpY2siLFthXSl9LGNsaWNrOmZ1bmN0aW9uKGEpe3RoaXMubGFzdHx8KHRoaXMubGFzdD10aGlzLmdldEV2ZW50SW5mbyhhKSk7dGhpcy5oYW5kbGVTaW5nbGUoYSk7cmV0dXJuIXRoaXMuc3RvcFNpbmdsZX0sZGJsY2xpY2s6ZnVuY3Rpb24oYSl7dGhpcy5oYW5kbGVEb3VibGUoYSk7cmV0dXJuIXRoaXMuc3RvcERvdWJsZX0saGFuZGxlRG91YmxlOmZ1bmN0aW9uKGEpe3RoaXMucGFzc2VzRGJsY2xpY2tUb2xlcmFuY2UoYSkmJih0aGlzWyJkb3VibGUiXSYmdGhpcy5jYWxsYmFjaygiZGJsY2xpY2siLApbYV0pLHRoaXMuY2xlYXJUaW1lcigpKX0saGFuZGxlU2luZ2xlOmZ1bmN0aW9uKGEpe3RoaXMucGFzc2VzVG9sZXJhbmNlKGEpJiYobnVsbCE9dGhpcy50aW1lcklkPyh0aGlzLmxhc3QudG91Y2hlcyYmMT09PXRoaXMubGFzdC50b3VjaGVzLmxlbmd0aCYmKHRoaXNbImRvdWJsZSJdJiZPcGVuTGF5ZXJzLkV2ZW50LnByZXZlbnREZWZhdWx0KGEpLHRoaXMuaGFuZGxlRG91YmxlKGEpKSx0aGlzLmxhc3QudG91Y2hlcyYmMj09PXRoaXMubGFzdC50b3VjaGVzLmxlbmd0aHx8dGhpcy5jbGVhclRpbWVyKCkpOih0aGlzLmZpcnN0PXRoaXMuZ2V0RXZlbnRJbmZvKGEpLGE9dGhpcy5zaW5nbGU/T3BlbkxheWVycy5VdGlsLmV4dGVuZCh7fSxhKTpudWxsLHRoaXMucXVldWVQb3RlbnRpYWxDbGljayhhKSkpfSxxdWV1ZVBvdGVudGlhbENsaWNrOmZ1bmN0aW9uKGEpe3RoaXMudGltZXJJZD13aW5kb3cuc2V0VGltZW91dChPcGVuTGF5ZXJzLkZ1bmN0aW9uLmJpbmQodGhpcy5kZWxheWVkQ2FsbCwKdGhpcyxhKSx0aGlzLmRlbGF5KX0scGFzc2VzVG9sZXJhbmNlOmZ1bmN0aW9uKGEpe3ZhciBiPSEwO2lmKG51bGwhPXRoaXMucGl4ZWxUb2xlcmFuY2UmJnRoaXMuZG93biYmdGhpcy5kb3duLnh5JiYoYj10aGlzLnBpeGVsVG9sZXJhbmNlPj10aGlzLmRvd24ueHkuZGlzdGFuY2VUbyhhLnh5KSkmJnRoaXMudG91Y2gmJnRoaXMuZG93bi50b3VjaGVzLmxlbmd0aD09PXRoaXMubGFzdC50b3VjaGVzLmxlbmd0aCl7YT0wO2Zvcih2YXIgYz10aGlzLmRvd24udG91Y2hlcy5sZW5ndGg7YTxjOysrYSlpZih0aGlzLmdldFRvdWNoRGlzdGFuY2UodGhpcy5kb3duLnRvdWNoZXNbYV0sdGhpcy5sYXN0LnRvdWNoZXNbYV0pPnRoaXMucGl4ZWxUb2xlcmFuY2Upe2I9ITE7YnJlYWt9fXJldHVybiBifSxnZXRUb3VjaERpc3RhbmNlOmZ1bmN0aW9uKGEsYil7cmV0dXJuIE1hdGguc3FydChNYXRoLnBvdyhhLmNsaWVudFgtYi5jbGllbnRYLDIpK01hdGgucG93KGEuY2xpZW50WS1iLmNsaWVudFksCjIpKX0scGFzc2VzRGJsY2xpY2tUb2xlcmFuY2U6ZnVuY3Rpb24oYSl7YT0hMDt0aGlzLmRvd24mJnRoaXMuZmlyc3QmJihhPXRoaXMuZG93bi54eS5kaXN0YW5jZVRvKHRoaXMuZmlyc3QueHkpPD10aGlzLmRibGNsaWNrVG9sZXJhbmNlKTtyZXR1cm4gYX0sY2xlYXJUaW1lcjpmdW5jdGlvbigpe251bGwhPXRoaXMudGltZXJJZCYmKHdpbmRvdy5jbGVhclRpbWVvdXQodGhpcy50aW1lcklkKSx0aGlzLnRpbWVySWQ9bnVsbCk7bnVsbCE9dGhpcy5yaWdodGNsaWNrVGltZXJJZCYmKHdpbmRvdy5jbGVhclRpbWVvdXQodGhpcy5yaWdodGNsaWNrVGltZXJJZCksdGhpcy5yaWdodGNsaWNrVGltZXJJZD1udWxsKX0sZGVsYXllZENhbGw6ZnVuY3Rpb24oYSl7dGhpcy50aW1lcklkPW51bGw7YSYmdGhpcy5jYWxsYmFjaygiY2xpY2siLFthXSl9LGdldEV2ZW50SW5mbzpmdW5jdGlvbihhKXt2YXIgYjtpZihhLnRvdWNoZXMpe3ZhciBjPWEudG91Y2hlcy5sZW5ndGg7Yj1BcnJheShjKTtmb3IodmFyIGQsCmU9MDtlPGM7ZSsrKWQ9YS50b3VjaGVzW2VdLGJbZV09e2NsaWVudFg6ZC5vbENsaWVudFgsY2xpZW50WTpkLm9sQ2xpZW50WX19cmV0dXJue3h5OmEueHksdG91Y2hlczpifX0sZGVhY3RpdmF0ZTpmdW5jdGlvbigpe3ZhciBhPSExO09wZW5MYXllcnMuSGFuZGxlci5wcm90b3R5cGUuZGVhY3RpdmF0ZS5hcHBseSh0aGlzLGFyZ3VtZW50cykmJih0aGlzLmNsZWFyVGltZXIoKSx0aGlzLmxhc3Q9dGhpcy5maXJzdD10aGlzLmRvd249bnVsbCxhPSEwKTtyZXR1cm4gYX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5IYW5kbGVyLkNsaWNrIn0pO09wZW5MYXllcnMuQ29udHJvbC5OYXZpZ2F0aW9uPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Db250cm9sLHtkcmFnUGFuOm51bGwsZHJhZ1Bhbk9wdGlvbnM6bnVsbCxwaW5jaFpvb206bnVsbCxwaW5jaFpvb21PcHRpb25zOm51bGwsZG9jdW1lbnREcmFnOiExLHpvb21Cb3g6bnVsbCx6b29tQm94RW5hYmxlZDohMCx6b29tV2hlZWxFbmFibGVkOiEwLG1vdXNlV2hlZWxPcHRpb25zOm51bGwsaGFuZGxlUmlnaHRDbGlja3M6ITEsem9vbUJveEtleU1hc2s6T3BlbkxheWVycy5IYW5kbGVyLk1PRF9TSElGVCxhdXRvQWN0aXZhdGU6ITAsaW5pdGlhbGl6ZTpmdW5jdGlvbihhKXt0aGlzLmhhbmRsZXJzPXt9O09wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmRlYWN0aXZhdGUoKTt0aGlzLmRyYWdQYW4mJnRoaXMuZHJhZ1Bhbi5kZXN0cm95KCk7dGhpcy5kcmFnUGFuPW51bGw7CnRoaXMuem9vbUJveCYmdGhpcy56b29tQm94LmRlc3Ryb3koKTt0aGlzLnpvb21Cb3g9bnVsbDt0aGlzLnBpbmNoWm9vbSYmdGhpcy5waW5jaFpvb20uZGVzdHJveSgpO3RoaXMucGluY2hab29tPW51bGw7T3BlbkxheWVycy5Db250cm9sLnByb3RvdHlwZS5kZXN0cm95LmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sYWN0aXZhdGU6ZnVuY3Rpb24oKXt0aGlzLmRyYWdQYW4uYWN0aXZhdGUoKTt0aGlzLnpvb21XaGVlbEVuYWJsZWQmJnRoaXMuaGFuZGxlcnMud2hlZWwuYWN0aXZhdGUoKTt0aGlzLmhhbmRsZXJzLmNsaWNrLmFjdGl2YXRlKCk7dGhpcy56b29tQm94RW5hYmxlZCYmdGhpcy56b29tQm94LmFjdGl2YXRlKCk7dGhpcy5waW5jaFpvb20mJnRoaXMucGluY2hab29tLmFjdGl2YXRlKCk7cmV0dXJuIE9wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuYWN0aXZhdGUuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxkZWFjdGl2YXRlOmZ1bmN0aW9uKCl7dGhpcy5waW5jaFpvb20mJnRoaXMucGluY2hab29tLmRlYWN0aXZhdGUoKTsKdGhpcy56b29tQm94LmRlYWN0aXZhdGUoKTt0aGlzLmRyYWdQYW4uZGVhY3RpdmF0ZSgpO3RoaXMuaGFuZGxlcnMuY2xpY2suZGVhY3RpdmF0ZSgpO3RoaXMuaGFuZGxlcnMud2hlZWwuZGVhY3RpdmF0ZSgpO3JldHVybiBPcGVuTGF5ZXJzLkNvbnRyb2wucHJvdG90eXBlLmRlYWN0aXZhdGUuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxkcmF3OmZ1bmN0aW9uKCl7dGhpcy5oYW5kbGVSaWdodENsaWNrcyYmKHRoaXMubWFwLnZpZXdQb3J0RGl2Lm9uY29udGV4dG1lbnU9T3BlbkxheWVycy5GdW5jdGlvbi5GYWxzZSk7dGhpcy5oYW5kbGVycy5jbGljaz1uZXcgT3BlbkxheWVycy5IYW5kbGVyLkNsaWNrKHRoaXMse2NsaWNrOnRoaXMuZGVmYXVsdENsaWNrLGRibGNsaWNrOnRoaXMuZGVmYXVsdERibENsaWNrLGRibHJpZ2h0Y2xpY2s6dGhpcy5kZWZhdWx0RGJsUmlnaHRDbGlja30seyJkb3VibGUiOiEwLHN0b3BEb3VibGU6ITB9KTt0aGlzLmRyYWdQYW49bmV3IE9wZW5MYXllcnMuQ29udHJvbC5EcmFnUGFuKE9wZW5MYXllcnMuVXRpbC5leHRlbmQoe21hcDp0aGlzLm1hcCwKZG9jdW1lbnREcmFnOnRoaXMuZG9jdW1lbnREcmFnfSx0aGlzLmRyYWdQYW5PcHRpb25zKSk7dGhpcy56b29tQm94PW5ldyBPcGVuTGF5ZXJzLkNvbnRyb2wuWm9vbUJveCh7bWFwOnRoaXMubWFwLGtleU1hc2s6dGhpcy56b29tQm94S2V5TWFza30pO3RoaXMuZHJhZ1Bhbi5kcmF3KCk7dGhpcy56b29tQm94LmRyYXcoKTt0aGlzLmhhbmRsZXJzLndoZWVsPW5ldyBPcGVuTGF5ZXJzLkhhbmRsZXIuTW91c2VXaGVlbCh0aGlzLHt1cDp0aGlzLndoZWVsVXAsZG93bjp0aGlzLndoZWVsRG93bn0sT3BlbkxheWVycy5VdGlsLmV4dGVuZCh0aGlzLm1hcC5mcmFjdGlvbmFsWm9vbT97fTp7Y3VtdWxhdGl2ZTohMSxpbnRlcnZhbDo1MCxtYXhEZWx0YTo2fSx0aGlzLm1vdXNlV2hlZWxPcHRpb25zKSk7T3BlbkxheWVycy5Db250cm9sLlBpbmNoWm9vbSYmKHRoaXMucGluY2hab29tPW5ldyBPcGVuTGF5ZXJzLkNvbnRyb2wuUGluY2hab29tKE9wZW5MYXllcnMuVXRpbC5leHRlbmQoe21hcDp0aGlzLm1hcH0sCnRoaXMucGluY2hab29tT3B0aW9ucykpKX0sZGVmYXVsdENsaWNrOmZ1bmN0aW9uKGEpe2EubGFzdFRvdWNoZXMmJjI9PWEubGFzdFRvdWNoZXMubGVuZ3RoJiZ0aGlzLm1hcC56b29tT3V0KCl9LGRlZmF1bHREYmxDbGljazpmdW5jdGlvbihhKXt0aGlzLm1hcC56b29tVG8odGhpcy5tYXAuem9vbSsxLGEueHkpfSxkZWZhdWx0RGJsUmlnaHRDbGljazpmdW5jdGlvbihhKXt0aGlzLm1hcC56b29tVG8odGhpcy5tYXAuem9vbS0xLGEueHkpfSx3aGVlbENoYW5nZTpmdW5jdGlvbihhLGIpe3RoaXMubWFwLmZyYWN0aW9uYWxab29tfHwoYj1NYXRoLnJvdW5kKGIpKTt2YXIgYz10aGlzLm1hcC5nZXRab29tKCksZDtkPU1hdGgubWF4KGMrYiwwKTtkPU1hdGgubWluKGQsdGhpcy5tYXAuZ2V0TnVtWm9vbUxldmVscygpKTtkIT09YyYmdGhpcy5tYXAuem9vbVRvKGQsYS54eSl9LHdoZWVsVXA6ZnVuY3Rpb24oYSxiKXt0aGlzLndoZWVsQ2hhbmdlKGEsYnx8MSl9LHdoZWVsRG93bjpmdW5jdGlvbihhLApiKXt0aGlzLndoZWVsQ2hhbmdlKGEsYnx8LTEpfSxkaXNhYmxlWm9vbUJveDpmdW5jdGlvbigpe3RoaXMuem9vbUJveEVuYWJsZWQ9ITE7dGhpcy56b29tQm94LmRlYWN0aXZhdGUoKX0sZW5hYmxlWm9vbUJveDpmdW5jdGlvbigpe3RoaXMuem9vbUJveEVuYWJsZWQ9ITA7dGhpcy5hY3RpdmUmJnRoaXMuem9vbUJveC5hY3RpdmF0ZSgpfSxkaXNhYmxlWm9vbVdoZWVsOmZ1bmN0aW9uKCl7dGhpcy56b29tV2hlZWxFbmFibGVkPSExO3RoaXMuaGFuZGxlcnMud2hlZWwuZGVhY3RpdmF0ZSgpfSxlbmFibGVab29tV2hlZWw6ZnVuY3Rpb24oKXt0aGlzLnpvb21XaGVlbEVuYWJsZWQ9ITA7dGhpcy5hY3RpdmUmJnRoaXMuaGFuZGxlcnMud2hlZWwuYWN0aXZhdGUoKX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Db250cm9sLk5hdmlnYXRpb24ifSk7T3BlbkxheWVycy5MYXllci5XTVM9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkxheWVyLkdyaWQse0RFRkFVTFRfUEFSQU1TOntzZXJ2aWNlOiJXTVMiLHZlcnNpb246IjEuMS4xIixyZXF1ZXN0OiJHZXRNYXAiLHN0eWxlczoiIixmb3JtYXQ6ImltYWdlL2pwZWcifSxpc0Jhc2VMYXllcjohMCxlbmNvZGVCQk9YOiExLG5vTWFnaWM6ITEseXg6e30saW5pdGlhbGl6ZTpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1bXTtjPU9wZW5MYXllcnMuVXRpbC51cHBlckNhc2VPYmplY3QoYyk7MS4zPD1wYXJzZUZsb2F0KGMuVkVSU0lPTikmJiFjLkVYQ0VQVElPTlMmJihjLkVYQ0VQVElPTlM9IklOSU1BR0UiKTtlLnB1c2goYSxiLGMsZCk7T3BlbkxheWVycy5MYXllci5HcmlkLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsZSk7T3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHModGhpcy5wYXJhbXMsT3BlbkxheWVycy5VdGlsLnVwcGVyQ2FzZU9iamVjdCh0aGlzLkRFRkFVTFRfUEFSQU1TKSk7CiF0aGlzLm5vTWFnaWMmJih0aGlzLnBhcmFtcy5UUkFOU1BBUkVOVCYmInRydWUiPT10aGlzLnBhcmFtcy5UUkFOU1BBUkVOVC50b1N0cmluZygpLnRvTG93ZXJDYXNlKCkpJiYobnVsbCE9ZCYmZC5pc0Jhc2VMYXllcnx8KHRoaXMuaXNCYXNlTGF5ZXI9ITEpLCJpbWFnZS9qcGVnIj09dGhpcy5wYXJhbXMuRk9STUFUJiYodGhpcy5wYXJhbXMuRk9STUFUPU9wZW5MYXllcnMuVXRpbC5hbHBoYUhhY2soKT8iaW1hZ2UvZ2lmIjoiaW1hZ2UvcG5nIikpfSxjbG9uZTpmdW5jdGlvbihhKXtudWxsPT1hJiYoYT1uZXcgT3BlbkxheWVycy5MYXllci5XTVModGhpcy5uYW1lLHRoaXMudXJsLHRoaXMucGFyYW1zLHRoaXMuZ2V0T3B0aW9ucygpKSk7cmV0dXJuIGE9T3BlbkxheWVycy5MYXllci5HcmlkLnByb3RvdHlwZS5jbG9uZS5hcHBseSh0aGlzLFthXSl9LHJldmVyc2VBeGlzT3JkZXI6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnByb2plY3Rpb24uZ2V0Q29kZSgpO3JldHVybiAxLjM8PXBhcnNlRmxvYXQodGhpcy5wYXJhbXMuVkVSU0lPTikmJgohISh0aGlzLnl4W2FdfHxPcGVuTGF5ZXJzLlByb2plY3Rpb24uZGVmYXVsdHNbYV0mJk9wZW5MYXllcnMuUHJvamVjdGlvbi5kZWZhdWx0c1thXS55eCl9LGdldFVSTDpmdW5jdGlvbihhKXthPXRoaXMuYWRqdXN0Qm91bmRzKGEpO3ZhciBiPXRoaXMuZ2V0SW1hZ2VTaXplKCksYz17fSxkPXRoaXMucmV2ZXJzZUF4aXNPcmRlcigpO2MuQkJPWD10aGlzLmVuY29kZUJCT1g/YS50b0JCT1gobnVsbCxkKTphLnRvQXJyYXkoZCk7Yy5XSURUSD1iLnc7Yy5IRUlHSFQ9Yi5oO3JldHVybiB0aGlzLmdldEZ1bGxSZXF1ZXN0U3RyaW5nKGMpfSxtZXJnZU5ld1BhcmFtczpmdW5jdGlvbihhKXthPVtPcGVuTGF5ZXJzLlV0aWwudXBwZXJDYXNlT2JqZWN0KGEpXTtyZXR1cm4gT3BlbkxheWVycy5MYXllci5HcmlkLnByb3RvdHlwZS5tZXJnZU5ld1BhcmFtcy5hcHBseSh0aGlzLGEpfSxnZXRGdWxsUmVxdWVzdFN0cmluZzpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMubWFwLmdldFByb2plY3Rpb25PYmplY3QoKSwKYz10aGlzLnByb2plY3Rpb24mJnRoaXMucHJvamVjdGlvbi5lcXVhbHMoYyk/dGhpcy5wcm9qZWN0aW9uLmdldENvZGUoKTpjLmdldENvZGUoKSxjPSJub25lIj09Yz9udWxsOmM7MS4zPD1wYXJzZUZsb2F0KHRoaXMucGFyYW1zLlZFUlNJT04pP3RoaXMucGFyYW1zLkNSUz1jOnRoaXMucGFyYW1zLlNSUz1jOyJib29sZWFuIj09dHlwZW9mIHRoaXMucGFyYW1zLlRSQU5TUEFSRU5UJiYoYS5UUkFOU1BBUkVOVD10aGlzLnBhcmFtcy5UUkFOU1BBUkVOVD8iVFJVRSI6IkZBTFNFIik7cmV0dXJuIE9wZW5MYXllcnMuTGF5ZXIuR3JpZC5wcm90b3R5cGUuZ2V0RnVsbFJlcXVlc3RTdHJpbmcuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkxheWVyLldNUyJ9KTtPcGVuTGF5ZXJzLlJlbmRlcmVyLlNWRz1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuUmVuZGVyZXIuRWxlbWVudHMse3htbG5zOiJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIseGxpbmtuczoiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIsTUFYX1BJWEVMOjE1RTMsdHJhbnNsYXRpb25QYXJhbWV0ZXJzOm51bGwsc3ltYm9sTWV0cmljczpudWxsLGluaXRpYWxpemU6ZnVuY3Rpb24oYSl7dGhpcy5zdXBwb3J0ZWQoKSYmKE9wZW5MYXllcnMuUmVuZGVyZXIuRWxlbWVudHMucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxhcmd1bWVudHMpLHRoaXMudHJhbnNsYXRpb25QYXJhbWV0ZXJzPXt4OjAseTowfSx0aGlzLnN5bWJvbE1ldHJpY3M9e30pfSxzdXBwb3J0ZWQ6ZnVuY3Rpb24oKXtyZXR1cm4gZG9jdW1lbnQuaW1wbGVtZW50YXRpb24mJihkb2N1bWVudC5pbXBsZW1lbnRhdGlvbi5oYXNGZWF0dXJlKCJvcmcudzNjLnN2ZyIsIjEuMCIpfHxkb2N1bWVudC5pbXBsZW1lbnRhdGlvbi5oYXNGZWF0dXJlKCJodHRwOi8vd3d3LnczLm9yZy9UUi9TVkcxMS9mZWF0dXJlI1NWRyIsCiIxLjEiKXx8ZG9jdW1lbnQuaW1wbGVtZW50YXRpb24uaGFzRmVhdHVyZSgiaHR0cDovL3d3dy53My5vcmcvVFIvU1ZHMTEvZmVhdHVyZSNCYXNpY1N0cnVjdHVyZSIsIjEuMSIpKX0saW5WYWxpZFJhbmdlOmZ1bmN0aW9uKGEsYixjKXthKz1jPzA6dGhpcy50cmFuc2xhdGlvblBhcmFtZXRlcnMueDtiKz1jPzA6dGhpcy50cmFuc2xhdGlvblBhcmFtZXRlcnMueTtyZXR1cm4gYT49LXRoaXMuTUFYX1BJWEVMJiZhPD10aGlzLk1BWF9QSVhFTCYmYj49LXRoaXMuTUFYX1BJWEVMJiZiPD10aGlzLk1BWF9QSVhFTH0sc2V0RXh0ZW50OmZ1bmN0aW9uKGEsYil7dmFyIGM9T3BlbkxheWVycy5SZW5kZXJlci5FbGVtZW50cy5wcm90b3R5cGUuc2V0RXh0ZW50LmFwcGx5KHRoaXMsYXJndW1lbnRzKSxkPXRoaXMuZ2V0UmVzb2x1dGlvbigpLGU9LWEubGVmdC9kLGQ9YS50b3AvZDtpZihiKXJldHVybiB0aGlzLmxlZnQ9ZSx0aGlzLnRvcD1kLHRoaXMucmVuZGVyZXJSb290LnNldEF0dHJpYnV0ZU5TKG51bGwsCiJ2aWV3Qm94IiwiMCAwICIrdGhpcy5zaXplLncrIiAiK3RoaXMuc2l6ZS5oKSx0aGlzLnRyYW5zbGF0ZSh0aGlzLnhPZmZzZXQsMCksITA7KGU9dGhpcy50cmFuc2xhdGUoZS10aGlzLmxlZnQrdGhpcy54T2Zmc2V0LGQtdGhpcy50b3ApKXx8dGhpcy5zZXRFeHRlbnQoYSwhMCk7cmV0dXJuIGMmJmV9LHRyYW5zbGF0ZTpmdW5jdGlvbihhLGIpe2lmKHRoaXMuaW5WYWxpZFJhbmdlKGEsYiwhMCkpe3ZhciBjPSIiO2lmKGF8fGIpYz0idHJhbnNsYXRlKCIrYSsiLCIrYisiKSI7dGhpcy5yb290LnNldEF0dHJpYnV0ZU5TKG51bGwsInRyYW5zZm9ybSIsYyk7dGhpcy50cmFuc2xhdGlvblBhcmFtZXRlcnM9e3g6YSx5OmJ9O3JldHVybiEwfXJldHVybiExfSxzZXRTaXplOmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuUmVuZGVyZXIucHJvdG90eXBlLnNldFNpemUuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMucmVuZGVyZXJSb290LnNldEF0dHJpYnV0ZU5TKG51bGwsIndpZHRoIix0aGlzLnNpemUudyk7CnRoaXMucmVuZGVyZXJSb290LnNldEF0dHJpYnV0ZU5TKG51bGwsImhlaWdodCIsdGhpcy5zaXplLmgpfSxnZXROb2RlVHlwZTpmdW5jdGlvbihhLGIpe3ZhciBjPW51bGw7c3dpdGNoKGEuQ0xBU1NfTkFNRSl7Y2FzZSAiT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludCI6Yz1iLmV4dGVybmFsR3JhcGhpYz8iaW1hZ2UiOnRoaXMuaXNDb21wbGV4U3ltYm9sKGIuZ3JhcGhpY05hbWUpPyJzdmciOiJjaXJjbGUiO2JyZWFrO2Nhc2UgIk9wZW5MYXllcnMuR2VvbWV0cnkuUmVjdGFuZ2xlIjpjPSJyZWN0IjticmVhaztjYXNlICJPcGVuTGF5ZXJzLkdlb21ldHJ5LkxpbmVTdHJpbmciOmM9InBvbHlsaW5lIjticmVhaztjYXNlICJPcGVuTGF5ZXJzLkdlb21ldHJ5LkxpbmVhclJpbmciOmM9InBvbHlnb24iO2JyZWFrO2Nhc2UgIk9wZW5MYXllcnMuR2VvbWV0cnkuUG9seWdvbiI6Y2FzZSAiT3BlbkxheWVycy5HZW9tZXRyeS5DdXJ2ZSI6Yz0icGF0aCJ9cmV0dXJuIGN9LHNldFN0eWxlOmZ1bmN0aW9uKGEsCmIsYyl7Yj1ifHxhLl9zdHlsZTtjPWN8fGEuX29wdGlvbnM7dmFyIGQ9Yi50aXRsZXx8Yi5ncmFwaGljVGl0bGU7aWYoZCl7YS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJ0aXRsZSIsZCk7dmFyIGU9YS5nZXRFbGVtZW50c0J5VGFnTmFtZSgidGl0bGUiKTswPGUubGVuZ3RoP2VbMF0uZmlyc3RDaGlsZC50ZXh0Q29udGVudD1kOihlPXRoaXMubm9kZUZhY3RvcnkobnVsbCwidGl0bGUiKSxlLnRleHRDb250ZW50PWQsYS5hcHBlbmRDaGlsZChlKSl9dmFyIGU9cGFyc2VGbG9hdChhLmdldEF0dHJpYnV0ZU5TKG51bGwsInIiKSksZD0xLGY7aWYoIk9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQiPT1hLl9nZW9tZXRyeUNsYXNzJiZlKXthLnN0eWxlLnZpc2liaWxpdHk9IiI7aWYoITE9PT1iLmdyYXBoaWMpYS5zdHlsZS52aXNpYmlsaXR5PSJoaWRkZW4iO2Vsc2UgaWYoYi5leHRlcm5hbEdyYXBoaWMpe2Y9dGhpcy5nZXRQb3NpdGlvbihhKTtiLmdyYXBoaWNXaWR0aCYmYi5ncmFwaGljSGVpZ2h0JiYKYS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJwcmVzZXJ2ZUFzcGVjdFJhdGlvIiwibm9uZSIpO3ZhciBlPWIuZ3JhcGhpY1dpZHRofHxiLmdyYXBoaWNIZWlnaHQsZz1iLmdyYXBoaWNIZWlnaHR8fGIuZ3JhcGhpY1dpZHRoLGU9ZT9lOjIqYi5wb2ludFJhZGl1cyxnPWc/ZzoyKmIucG9pbnRSYWRpdXMsaD12b2lkIDAhPWIuZ3JhcGhpY1lPZmZzZXQ/Yi5ncmFwaGljWU9mZnNldDotKDAuNSpnKSxrPWIuZ3JhcGhpY09wYWNpdHl8fGIuZmlsbE9wYWNpdHk7YS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJ4IiwoZi54Kyh2b2lkIDAhPWIuZ3JhcGhpY1hPZmZzZXQ/Yi5ncmFwaGljWE9mZnNldDotKDAuNSplKSkpLnRvRml4ZWQoKSk7YS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJ5IiwoZi55K2gpLnRvRml4ZWQoKSk7YS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJ3aWR0aCIsZSk7YS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJoZWlnaHQiLGcpO2Euc2V0QXR0cmlidXRlTlModGhpcy54bGlua25zLCJ4bGluazpocmVmIiwKYi5leHRlcm5hbEdyYXBoaWMpO2Euc2V0QXR0cmlidXRlTlMobnVsbCwic3R5bGUiLCJvcGFjaXR5OiAiK2spO2Eub25jbGljaz1PcGVuTGF5ZXJzLkV2ZW50LnByZXZlbnREZWZhdWx0fWVsc2UgaWYodGhpcy5pc0NvbXBsZXhTeW1ib2woYi5ncmFwaGljTmFtZSkpe3ZhciBlPTMqYi5wb2ludFJhZGl1cyxnPTIqZSxsPXRoaXMuaW1wb3J0U3ltYm9sKGIuZ3JhcGhpY05hbWUpO2Y9dGhpcy5nZXRQb3NpdGlvbihhKTtkPTMqdGhpcy5zeW1ib2xNZXRyaWNzW2wuaWRdWzBdL2c7aD1hLnBhcmVudE5vZGU7az1hLm5leHRTaWJsaW5nO2gmJmgucmVtb3ZlQ2hpbGQoYSk7YS5maXJzdENoaWxkJiZhLnJlbW92ZUNoaWxkKGEuZmlyc3RDaGlsZCk7YS5hcHBlbmRDaGlsZChsLmZpcnN0Q2hpbGQuY2xvbmVOb2RlKCEwKSk7YS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJ2aWV3Qm94IixsLmdldEF0dHJpYnV0ZU5TKG51bGwsInZpZXdCb3giKSk7YS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJ3aWR0aCIsCmcpO2Euc2V0QXR0cmlidXRlTlMobnVsbCwiaGVpZ2h0IixnKTthLnNldEF0dHJpYnV0ZU5TKG51bGwsIngiLGYueC1lKTthLnNldEF0dHJpYnV0ZU5TKG51bGwsInkiLGYueS1lKTtrP2guaW5zZXJ0QmVmb3JlKGEsayk6aCYmaC5hcHBlbmRDaGlsZChhKX1lbHNlIGEuc2V0QXR0cmlidXRlTlMobnVsbCwiciIsYi5wb2ludFJhZGl1cyk7ZT1iLnJvdGF0aW9uO3ZvaWQgMD09PWUmJnZvaWQgMD09PWEuX3JvdGF0aW9ufHwhZnx8KGEuX3JvdGF0aW9uPWUsZXw9MCwic3ZnIiE9PWEubm9kZU5hbWU/YS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJ0cmFuc2Zvcm0iLCJyb3RhdGUoIitlKyIgIitmLngrIiAiK2YueSsiKSIpOihmPXRoaXMuc3ltYm9sTWV0cmljc1tsLmlkXSxhLmZpcnN0Q2hpbGQuc2V0QXR0cmlidXRlTlMobnVsbCwidHJhbnNmb3JtIiwicm90YXRlKCIrZSsiICIrZlsxXSsiICIrZlsyXSsiKSIpKSl9Yy5pc0ZpbGxlZD8oYS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJmaWxsIixiLmZpbGxDb2xvciksCmEuc2V0QXR0cmlidXRlTlMobnVsbCwiZmlsbC1vcGFjaXR5IixiLmZpbGxPcGFjaXR5KSk6YS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJmaWxsIiwibm9uZSIpO2MuaXNTdHJva2VkPyhhLnNldEF0dHJpYnV0ZU5TKG51bGwsInN0cm9rZSIsYi5zdHJva2VDb2xvciksYS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJzdHJva2Utb3BhY2l0eSIsYi5zdHJva2VPcGFjaXR5KSxhLnNldEF0dHJpYnV0ZU5TKG51bGwsInN0cm9rZS13aWR0aCIsYi5zdHJva2VXaWR0aCpkKSxhLnNldEF0dHJpYnV0ZU5TKG51bGwsInN0cm9rZS1saW5lY2FwIixiLnN0cm9rZUxpbmVjYXB8fCJyb3VuZCIpLGEuc2V0QXR0cmlidXRlTlMobnVsbCwic3Ryb2tlLWxpbmVqb2luIiwicm91bmQiKSxiLnN0cm9rZURhc2hzdHlsZSYmYS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJzdHJva2UtZGFzaGFycmF5Iix0aGlzLmRhc2hTdHlsZShiLGQpKSk6YS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJzdHJva2UiLCJub25lIik7Yi5wb2ludGVyRXZlbnRzJiYKYS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJwb2ludGVyLWV2ZW50cyIsYi5wb2ludGVyRXZlbnRzKTtudWxsIT1iLmN1cnNvciYmYS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJjdXJzb3IiLGIuY3Vyc29yKTtyZXR1cm4gYX0sZGFzaFN0eWxlOmZ1bmN0aW9uKGEsYil7dmFyIGM9YS5zdHJva2VXaWR0aCpiLGQ9YS5zdHJva2VEYXNoc3R5bGU7c3dpdGNoKGQpe2Nhc2UgInNvbGlkIjpyZXR1cm4ibm9uZSI7Y2FzZSAiZG90IjpyZXR1cm5bMSw0KmNdLmpvaW4oKTtjYXNlICJkYXNoIjpyZXR1cm5bNCpjLDQqY10uam9pbigpO2Nhc2UgImRhc2hkb3QiOnJldHVybls0KmMsNCpjLDEsNCpjXS5qb2luKCk7Y2FzZSAibG9uZ2Rhc2giOnJldHVybls4KmMsNCpjXS5qb2luKCk7Y2FzZSAibG9uZ2Rhc2hkb3QiOnJldHVybls4KmMsNCpjLDEsNCpjXS5qb2luKCk7ZGVmYXVsdDpyZXR1cm4gT3BlbkxheWVycy5TdHJpbmcudHJpbShkKS5yZXBsYWNlKC9ccysvZywiLCIpfX0sY3JlYXRlTm9kZTpmdW5jdGlvbihhLApiKXt2YXIgYz1kb2N1bWVudC5jcmVhdGVFbGVtZW50TlModGhpcy54bWxucyxhKTtiJiZjLnNldEF0dHJpYnV0ZU5TKG51bGwsImlkIixiKTtyZXR1cm4gY30sbm9kZVR5cGVDb21wYXJlOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGI9PWEubm9kZU5hbWV9LGNyZWF0ZVJlbmRlclJvb3Q6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm5vZGVGYWN0b3J5KHRoaXMuY29udGFpbmVyLmlkKyJfc3ZnUm9vdCIsInN2ZyIpO2Euc3R5bGUuZGlzcGxheT0iYmxvY2siO3JldHVybiBhfSxjcmVhdGVSb290OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLm5vZGVGYWN0b3J5KHRoaXMuY29udGFpbmVyLmlkK2EsImciKX0sY3JlYXRlRGVmczpmdW5jdGlvbigpe3ZhciBhPXRoaXMubm9kZUZhY3RvcnkodGhpcy5jb250YWluZXIuaWQrIl9kZWZzIiwiZGVmcyIpO3RoaXMucmVuZGVyZXJSb290LmFwcGVuZENoaWxkKGEpO3JldHVybiBhfSxkcmF3UG9pbnQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5kcmF3Q2lyY2xlKGEsCmIsMSl9LGRyYXdDaXJjbGU6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXRoaXMuZ2V0UmVzb2x1dGlvbigpLGU9KGIueC10aGlzLmZlYXR1cmVEeCkvZCt0aGlzLmxlZnQ7Yj10aGlzLnRvcC1iLnkvZDtyZXR1cm4gdGhpcy5pblZhbGlkUmFuZ2UoZSxiKT8oYS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJjeCIsZSksYS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJjeSIsYiksYS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJyIixjKSxhKTohMX0sZHJhd0xpbmVTdHJpbmc6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmdldENvbXBvbmVudHNTdHJpbmcoYi5jb21wb25lbnRzKTtyZXR1cm4gYy5wYXRoPyhhLnNldEF0dHJpYnV0ZU5TKG51bGwsInBvaW50cyIsYy5wYXRoKSxjLmNvbXBsZXRlP2E6bnVsbCk6ITF9LGRyYXdMaW5lYXJSaW5nOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5nZXRDb21wb25lbnRzU3RyaW5nKGIuY29tcG9uZW50cyk7cmV0dXJuIGMucGF0aD8oYS5zZXRBdHRyaWJ1dGVOUyhudWxsLAoicG9pbnRzIixjLnBhdGgpLGMuY29tcGxldGU/YTpudWxsKTohMX0sZHJhd1BvbHlnb246ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9IiIsZD0hMCxlPSEwLGYsZyxoPTAsaz1iLmNvbXBvbmVudHMubGVuZ3RoO2g8aztoKyspYys9IiBNIixmPXRoaXMuZ2V0Q29tcG9uZW50c1N0cmluZyhiLmNvbXBvbmVudHNbaF0uY29tcG9uZW50cywiICIpLChnPWYucGF0aCk/KGMrPSIgIitnLGU9Zi5jb21wbGV0ZSYmZSk6ZD0hMTtyZXR1cm4gZD8oYS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJkIixjKyIgeiIpLGEuc2V0QXR0cmlidXRlTlMobnVsbCwiZmlsbC1ydWxlIiwiZXZlbm9kZCIpLGU/YTpudWxsKTohMX0sZHJhd1JlY3RhbmdsZTpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuZ2V0UmVzb2x1dGlvbigpLGQ9KGIueC10aGlzLmZlYXR1cmVEeCkvYyt0aGlzLmxlZnQsZT10aGlzLnRvcC1iLnkvYztyZXR1cm4gdGhpcy5pblZhbGlkUmFuZ2UoZCxlKT8oYS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJ4IiwKZCksYS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJ5IixlKSxhLnNldEF0dHJpYnV0ZU5TKG51bGwsIndpZHRoIixiLndpZHRoL2MpLGEuc2V0QXR0cmlidXRlTlMobnVsbCwiaGVpZ2h0IixiLmhlaWdodC9jKSxhKTohMX0sZHJhd1RleHQ6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPSEhYi5sYWJlbE91dGxpbmVXaWR0aDtpZihkKXt2YXIgZT1PcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHt9LGIpO2UuZm9udENvbG9yPWUubGFiZWxPdXRsaW5lQ29sb3I7ZS5mb250U3Ryb2tlQ29sb3I9ZS5sYWJlbE91dGxpbmVDb2xvcjtlLmZvbnRTdHJva2VXaWR0aD1iLmxhYmVsT3V0bGluZVdpZHRoO2IubGFiZWxPdXRsaW5lT3BhY2l0eSYmKGUuZm9udE9wYWNpdHk9Yi5sYWJlbE91dGxpbmVPcGFjaXR5KTtkZWxldGUgZS5sYWJlbE91dGxpbmVXaWR0aDt0aGlzLmRyYXdUZXh0KGEsZSxjKX12YXIgZj10aGlzLmdldFJlc29sdXRpb24oKSxlPShjLngtdGhpcy5mZWF0dXJlRHgpL2YrdGhpcy5sZWZ0LGc9Yy55LwpmLXRoaXMudG9wLGQ9ZD90aGlzLkxBQkVMX09VVExJTkVfU1VGRklYOnRoaXMuTEFCRUxfSURfU1VGRklYLGY9dGhpcy5ub2RlRmFjdG9yeShhK2QsInRleHQiKTtmLnNldEF0dHJpYnV0ZU5TKG51bGwsIngiLGUpO2Yuc2V0QXR0cmlidXRlTlMobnVsbCwieSIsLWcpO2IuZm9udENvbG9yJiZmLnNldEF0dHJpYnV0ZU5TKG51bGwsImZpbGwiLGIuZm9udENvbG9yKTtiLmZvbnRTdHJva2VDb2xvciYmZi5zZXRBdHRyaWJ1dGVOUyhudWxsLCJzdHJva2UiLGIuZm9udFN0cm9rZUNvbG9yKTtiLmZvbnRTdHJva2VXaWR0aCYmZi5zZXRBdHRyaWJ1dGVOUyhudWxsLCJzdHJva2Utd2lkdGgiLGIuZm9udFN0cm9rZVdpZHRoKTtiLmZvbnRPcGFjaXR5JiZmLnNldEF0dHJpYnV0ZU5TKG51bGwsIm9wYWNpdHkiLGIuZm9udE9wYWNpdHkpO2IuZm9udEZhbWlseSYmZi5zZXRBdHRyaWJ1dGVOUyhudWxsLCJmb250LWZhbWlseSIsYi5mb250RmFtaWx5KTtiLmZvbnRTaXplJiZmLnNldEF0dHJpYnV0ZU5TKG51bGwsCiJmb250LXNpemUiLGIuZm9udFNpemUpO2IuZm9udFdlaWdodCYmZi5zZXRBdHRyaWJ1dGVOUyhudWxsLCJmb250LXdlaWdodCIsYi5mb250V2VpZ2h0KTtiLmZvbnRTdHlsZSYmZi5zZXRBdHRyaWJ1dGVOUyhudWxsLCJmb250LXN0eWxlIixiLmZvbnRTdHlsZSk7ITA9PT1iLmxhYmVsU2VsZWN0PyhmLnNldEF0dHJpYnV0ZU5TKG51bGwsInBvaW50ZXItZXZlbnRzIiwidmlzaWJsZSIpLGYuX2ZlYXR1cmVJZD1hKTpmLnNldEF0dHJpYnV0ZU5TKG51bGwsInBvaW50ZXItZXZlbnRzIiwibm9uZSIpO2c9Yi5sYWJlbEFsaWdufHxPcGVuTGF5ZXJzLlJlbmRlcmVyLmRlZmF1bHRTeW1ib2xpemVyLmxhYmVsQWxpZ247Zi5zZXRBdHRyaWJ1dGVOUyhudWxsLCJ0ZXh0LWFuY2hvciIsT3BlbkxheWVycy5SZW5kZXJlci5TVkcuTEFCRUxfQUxJR05bZ1swXV18fCJtaWRkbGUiKTshMD09PU9wZW5MYXllcnMuSVNfR0VDS08mJmYuc2V0QXR0cmlidXRlTlMobnVsbCwiZG9taW5hbnQtYmFzZWxpbmUiLApPcGVuTGF5ZXJzLlJlbmRlcmVyLlNWRy5MQUJFTF9BTElHTltnWzFdXXx8ImNlbnRyYWwiKTtmb3IodmFyIGg9Yi5sYWJlbC5zcGxpdCgiXG4iKSxrPWgubGVuZ3RoO2YuY2hpbGROb2Rlcy5sZW5ndGg+azspZi5yZW1vdmVDaGlsZChmLmxhc3RDaGlsZCk7Zm9yKHZhciBsPTA7bDxrO2wrKyl7dmFyIG09dGhpcy5ub2RlRmFjdG9yeShhK2QrIl90c3Bhbl8iK2wsInRzcGFuIik7ITA9PT1iLmxhYmVsU2VsZWN0JiYobS5fZmVhdHVyZUlkPWEsbS5fZ2VvbWV0cnk9YyxtLl9nZW9tZXRyeUNsYXNzPWMuQ0xBU1NfTkFNRSk7ITE9PT1PcGVuTGF5ZXJzLklTX0dFQ0tPJiZtLnNldEF0dHJpYnV0ZU5TKG51bGwsImJhc2VsaW5lLXNoaWZ0IixPcGVuTGF5ZXJzLlJlbmRlcmVyLlNWRy5MQUJFTF9WU0hJRlRbZ1sxXV18fCItMzUlIik7bS5zZXRBdHRyaWJ1dGUoIngiLGUpO2lmKDA9PWwpe3ZhciByPU9wZW5MYXllcnMuUmVuZGVyZXIuU1ZHLkxBQkVMX1ZGQUNUT1JbZ1sxXV07bnVsbD09ciYmCihyPS0wLjUpO20uc2V0QXR0cmlidXRlKCJkeSIsciooay0xKSsiZW0iKX1lbHNlIG0uc2V0QXR0cmlidXRlKCJkeSIsIjFlbSIpO20udGV4dENvbnRlbnQ9IiI9PT1oW2xdPyIgIjpoW2xdO20ucGFyZW50Tm9kZXx8Zi5hcHBlbmRDaGlsZChtKX1mLnBhcmVudE5vZGV8fHRoaXMudGV4dFJvb3QuYXBwZW5kQ2hpbGQoZil9LGdldENvbXBvbmVudHNTdHJpbmc6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9W10sZD0hMCxlPWEubGVuZ3RoLGY9W10sZyxoPTA7aDxlO2grKylnPWFbaF0sYy5wdXNoKGcpLChnPXRoaXMuZ2V0U2hvcnRTdHJpbmcoZykpP2YucHVzaChnKTooMDxoJiZ0aGlzLmdldFNob3J0U3RyaW5nKGFbaC0xXSkmJmYucHVzaCh0aGlzLmNsaXBMaW5lKGFbaF0sYVtoLTFdKSksaDxlLTEmJnRoaXMuZ2V0U2hvcnRTdHJpbmcoYVtoKzFdKSYmZi5wdXNoKHRoaXMuY2xpcExpbmUoYVtoXSxhW2grMV0pKSxkPSExKTtyZXR1cm57cGF0aDpmLmpvaW4oYnx8IiwiKSxjb21wbGV0ZTpkfX0sCmNsaXBMaW5lOmZ1bmN0aW9uKGEsYil7aWYoYi5lcXVhbHMoYSkpcmV0dXJuIiI7dmFyIGM9dGhpcy5nZXRSZXNvbHV0aW9uKCksZD10aGlzLk1BWF9QSVhFTC10aGlzLnRyYW5zbGF0aW9uUGFyYW1ldGVycy54LGU9dGhpcy5NQVhfUElYRUwtdGhpcy50cmFuc2xhdGlvblBhcmFtZXRlcnMueSxmPShiLngtdGhpcy5mZWF0dXJlRHgpL2MrdGhpcy5sZWZ0LGc9dGhpcy50b3AtYi55L2MsaD0oYS54LXRoaXMuZmVhdHVyZUR4KS9jK3RoaXMubGVmdCxjPXRoaXMudG9wLWEueS9jLGs7aWYoaDwtZHx8aD5kKWs9KGMtZykvKGgtZiksaD0wPmg/LWQ6ZCxjPWcrKGgtZikqaztpZihjPC1lfHxjPmUpaz0oaC1mKS8oYy1nKSxjPTA+Yz8tZTplLGg9ZisoYy1nKSprO3JldHVybiBoKyIsIitjfSxnZXRTaG9ydFN0cmluZzpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmdldFJlc29sdXRpb24oKSxjPShhLngtdGhpcy5mZWF0dXJlRHgpL2IrdGhpcy5sZWZ0O2E9dGhpcy50b3AtYS55L2I7cmV0dXJuIHRoaXMuaW5WYWxpZFJhbmdlKGMsCmEpP2MrIiwiK2E6ITF9LGdldFBvc2l0aW9uOmZ1bmN0aW9uKGEpe3JldHVybnt4OnBhcnNlRmxvYXQoYS5nZXRBdHRyaWJ1dGVOUyhudWxsLCJjeCIpKSx5OnBhcnNlRmxvYXQoYS5nZXRBdHRyaWJ1dGVOUyhudWxsLCJjeSIpKX19LGltcG9ydFN5bWJvbDpmdW5jdGlvbihhKXt0aGlzLmRlZnN8fCh0aGlzLmRlZnM9dGhpcy5jcmVhdGVEZWZzKCkpO3ZhciBiPXRoaXMuY29udGFpbmVyLmlkKyItIithLGM9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYik7aWYobnVsbCE9YylyZXR1cm4gYzt2YXIgZD1PcGVuTGF5ZXJzLlJlbmRlcmVyLnN5bWJvbFthXTtpZighZCl0aHJvdyBFcnJvcihhKyIgaXMgbm90IGEgdmFsaWQgc3ltYm9sIG5hbWUiKTthPXRoaXMubm9kZUZhY3RvcnkoYiwic3ltYm9sIik7dmFyIGU9dGhpcy5ub2RlRmFjdG9yeShudWxsLCJwb2x5Z29uIik7YS5hcHBlbmRDaGlsZChlKTtmb3IodmFyIGM9bmV3IE9wZW5MYXllcnMuQm91bmRzKE51bWJlci5NQVhfVkFMVUUsTnVtYmVyLk1BWF9WQUxVRSwKMCwwKSxmPVtdLGcsaCxrPTA7azxkLmxlbmd0aDtrKz0yKWc9ZFtrXSxoPWRbaysxXSxjLmxlZnQ9TWF0aC5taW4oYy5sZWZ0LGcpLGMuYm90dG9tPU1hdGgubWluKGMuYm90dG9tLGgpLGMucmlnaHQ9TWF0aC5tYXgoYy5yaWdodCxnKSxjLnRvcD1NYXRoLm1heChjLnRvcCxoKSxmLnB1c2goZywiLCIsaCk7ZS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJwb2ludHMiLGYuam9pbigiICIpKTtkPWMuZ2V0V2lkdGgoKTtlPWMuZ2V0SGVpZ2h0KCk7YS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJ2aWV3Qm94IixbYy5sZWZ0LWQsYy5ib3R0b20tZSwzKmQsMyplXS5qb2luKCIgIikpO3RoaXMuc3ltYm9sTWV0cmljc1tiXT1bTWF0aC5tYXgoZCxlKSxjLmdldENlbnRlckxvbkxhdCgpLmxvbixjLmdldENlbnRlckxvbkxhdCgpLmxhdF07dGhpcy5kZWZzLmFwcGVuZENoaWxkKGEpO3JldHVybiBhfSxnZXRGZWF0dXJlSWRGcm9tRXZlbnQ6ZnVuY3Rpb24oYSl7dmFyIGI9T3BlbkxheWVycy5SZW5kZXJlci5FbGVtZW50cy5wcm90b3R5cGUuZ2V0RmVhdHVyZUlkRnJvbUV2ZW50LmFwcGx5KHRoaXMsCmFyZ3VtZW50cyk7Ynx8KGI9YS50YXJnZXQsYj1iLnBhcmVudE5vZGUmJmIhPXRoaXMucmVuZGVyZXJSb290P2IucGFyZW50Tm9kZS5fZmVhdHVyZUlkOnZvaWQgMCk7cmV0dXJuIGJ9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuUmVuZGVyZXIuU1ZHIn0pO09wZW5MYXllcnMuUmVuZGVyZXIuU1ZHLkxBQkVMX0FMSUdOPXtsOiJzdGFydCIscjoiZW5kIixiOiJib3R0b20iLHQ6ImhhbmdpbmcifTtPcGVuTGF5ZXJzLlJlbmRlcmVyLlNWRy5MQUJFTF9WU0hJRlQ9e3Q6Ii03MCUiLGI6IjAifTtPcGVuTGF5ZXJzLlJlbmRlcmVyLlNWRy5MQUJFTF9WRkFDVE9SPXt0OjAsYjotMX07T3BlbkxheWVycy5SZW5kZXJlci5TVkcucHJldmVudERlZmF1bHQ9ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5FdmVudC5wcmV2ZW50RGVmYXVsdChhKX07T3BlbkxheWVycy5Qb3B1cD1PcGVuTGF5ZXJzLkNsYXNzKHtldmVudHM6bnVsbCxpZDoiIixsb25sYXQ6bnVsbCxkaXY6bnVsbCxjb250ZW50U2l6ZTpudWxsLHNpemU6bnVsbCxjb250ZW50SFRNTDpudWxsLGJhY2tncm91bmRDb2xvcjoiIixvcGFjaXR5OiIiLGJvcmRlcjoiIixjb250ZW50RGl2Om51bGwsZ3JvdXBEaXY6bnVsbCxjbG9zZURpdjpudWxsLGF1dG9TaXplOiExLG1pblNpemU6bnVsbCxtYXhTaXplOm51bGwsZGlzcGxheUNsYXNzOiJvbFBvcHVwIixjb250ZW50RGlzcGxheUNsYXNzOiJvbFBvcHVwQ29udGVudCIscGFkZGluZzowLGRpc2FibGVGaXJlZm94T3ZlcmZsb3dIYWNrOiExLGZpeFBhZGRpbmc6ZnVuY3Rpb24oKXsibnVtYmVyIj09dHlwZW9mIHRoaXMucGFkZGluZyYmKHRoaXMucGFkZGluZz1uZXcgT3BlbkxheWVycy5Cb3VuZHModGhpcy5wYWRkaW5nLHRoaXMucGFkZGluZyx0aGlzLnBhZGRpbmcsdGhpcy5wYWRkaW5nKSl9LHBhbk1hcElmT3V0T2ZWaWV3OiExLAprZWVwSW5NYXA6ITEsY2xvc2VPbk1vdmU6ITEsbWFwOm51bGwsaW5pdGlhbGl6ZTpmdW5jdGlvbihhLGIsYyxkLGUsZil7bnVsbD09YSYmKGE9T3BlbkxheWVycy5VdGlsLmNyZWF0ZVVuaXF1ZUlEKHRoaXMuQ0xBU1NfTkFNRSsiXyIpKTt0aGlzLmlkPWE7dGhpcy5sb25sYXQ9Yjt0aGlzLmNvbnRlbnRTaXplPW51bGwhPWM/YzpuZXcgT3BlbkxheWVycy5TaXplKE9wZW5MYXllcnMuUG9wdXAuV0lEVEgsT3BlbkxheWVycy5Qb3B1cC5IRUlHSFQpO251bGwhPWQmJih0aGlzLmNvbnRlbnRIVE1MPWQpO3RoaXMuYmFja2dyb3VuZENvbG9yPU9wZW5MYXllcnMuUG9wdXAuQ09MT1I7dGhpcy5vcGFjaXR5PU9wZW5MYXllcnMuUG9wdXAuT1BBQ0lUWTt0aGlzLmJvcmRlcj1PcGVuTGF5ZXJzLlBvcHVwLkJPUkRFUjt0aGlzLmRpdj1PcGVuTGF5ZXJzLlV0aWwuY3JlYXRlRGl2KHRoaXMuaWQsbnVsbCxudWxsLG51bGwsbnVsbCxudWxsLCJoaWRkZW4iKTt0aGlzLmRpdi5jbGFzc05hbWU9dGhpcy5kaXNwbGF5Q2xhc3M7CnRoaXMuZ3JvdXBEaXY9T3BlbkxheWVycy5VdGlsLmNyZWF0ZURpdih0aGlzLmlkKyJfR3JvdXBEaXYiLG51bGwsbnVsbCxudWxsLCJyZWxhdGl2ZSIsbnVsbCwiaGlkZGVuIik7YT10aGlzLmRpdi5pZCsiX2NvbnRlbnREaXYiO3RoaXMuY29udGVudERpdj1PcGVuTGF5ZXJzLlV0aWwuY3JlYXRlRGl2KGEsbnVsbCx0aGlzLmNvbnRlbnRTaXplLmNsb25lKCksbnVsbCwicmVsYXRpdmUiKTt0aGlzLmNvbnRlbnREaXYuY2xhc3NOYW1lPXRoaXMuY29udGVudERpc3BsYXlDbGFzczt0aGlzLmdyb3VwRGl2LmFwcGVuZENoaWxkKHRoaXMuY29udGVudERpdik7dGhpcy5kaXYuYXBwZW5kQ2hpbGQodGhpcy5ncm91cERpdik7ZSYmdGhpcy5hZGRDbG9zZUJveChmKTt0aGlzLnJlZ2lzdGVyRXZlbnRzKCl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmJvcmRlcj10aGlzLm9wYWNpdHk9dGhpcy5iYWNrZ3JvdW5kQ29sb3I9dGhpcy5jb250ZW50SFRNTD10aGlzLnNpemU9dGhpcy5sb25sYXQ9dGhpcy5pZD0KbnVsbDt0aGlzLmNsb3NlT25Nb3ZlJiZ0aGlzLm1hcCYmdGhpcy5tYXAuZXZlbnRzLnVucmVnaXN0ZXIoIm1vdmVzdGFydCIsdGhpcyx0aGlzLmhpZGUpO3RoaXMuZXZlbnRzLmRlc3Ryb3koKTt0aGlzLmV2ZW50cz1udWxsO3RoaXMuY2xvc2VEaXYmJihPcGVuTGF5ZXJzLkV2ZW50LnN0b3BPYnNlcnZpbmdFbGVtZW50KHRoaXMuY2xvc2VEaXYpLHRoaXMuZ3JvdXBEaXYucmVtb3ZlQ2hpbGQodGhpcy5jbG9zZURpdikpO3RoaXMuY2xvc2VEaXY9bnVsbDt0aGlzLmRpdi5yZW1vdmVDaGlsZCh0aGlzLmdyb3VwRGl2KTt0aGlzLmdyb3VwRGl2PW51bGw7bnVsbCE9dGhpcy5tYXAmJnRoaXMubWFwLnJlbW92ZVBvcHVwKHRoaXMpO3RoaXMucGFuTWFwSWZPdXRPZlZpZXc9dGhpcy5wYWRkaW5nPXRoaXMubWF4U2l6ZT10aGlzLm1pblNpemU9dGhpcy5hdXRvU2l6ZT10aGlzLmRpdj10aGlzLm1hcD1udWxsfSxkcmF3OmZ1bmN0aW9uKGEpe251bGw9PWEmJm51bGwhPXRoaXMubG9ubGF0JiZudWxsIT0KdGhpcy5tYXAmJihhPXRoaXMubWFwLmdldExheWVyUHhGcm9tTG9uTGF0KHRoaXMubG9ubGF0KSk7dGhpcy5jbG9zZU9uTW92ZSYmdGhpcy5tYXAuZXZlbnRzLnJlZ2lzdGVyKCJtb3Zlc3RhcnQiLHRoaXMsdGhpcy5oaWRlKTt0aGlzLmRpc2FibGVGaXJlZm94T3ZlcmZsb3dIYWNrfHwiZmlyZWZveCIhPU9wZW5MYXllcnMuQlJPV1NFUl9OQU1FfHwodGhpcy5tYXAuZXZlbnRzLnJlZ2lzdGVyKCJtb3Zlc3RhcnQiLHRoaXMsZnVuY3Rpb24oKXt2YXIgYT1kb2N1bWVudC5kZWZhdWx0Vmlldy5nZXRDb21wdXRlZFN0eWxlKHRoaXMuY29udGVudERpdixudWxsKS5nZXRQcm9wZXJ0eVZhbHVlKCJvdmVyZmxvdyIpOyJoaWRkZW4iIT1hJiYodGhpcy5jb250ZW50RGl2Ll9vbGRPdmVyZmxvdz1hLHRoaXMuY29udGVudERpdi5zdHlsZS5vdmVyZmxvdz0iaGlkZGVuIil9KSx0aGlzLm1hcC5ldmVudHMucmVnaXN0ZXIoIm1vdmVlbmQiLHRoaXMsZnVuY3Rpb24oKXt2YXIgYT10aGlzLmNvbnRlbnREaXYuX29sZE92ZXJmbG93OwphJiYodGhpcy5jb250ZW50RGl2LnN0eWxlLm92ZXJmbG93PWEsdGhpcy5jb250ZW50RGl2Ll9vbGRPdmVyZmxvdz1udWxsKX0pKTt0aGlzLm1vdmVUbyhhKTt0aGlzLmF1dG9TaXplfHx0aGlzLnNpemV8fHRoaXMuc2V0U2l6ZSh0aGlzLmNvbnRlbnRTaXplKTt0aGlzLnNldEJhY2tncm91bmRDb2xvcigpO3RoaXMuc2V0T3BhY2l0eSgpO3RoaXMuc2V0Qm9yZGVyKCk7dGhpcy5zZXRDb250ZW50SFRNTCgpO3RoaXMucGFuTWFwSWZPdXRPZlZpZXcmJnRoaXMucGFuSW50b1ZpZXcoKTtyZXR1cm4gdGhpcy5kaXZ9LHVwZGF0ZVBvc2l0aW9uOmZ1bmN0aW9uKCl7aWYodGhpcy5sb25sYXQmJnRoaXMubWFwKXt2YXIgYT10aGlzLm1hcC5nZXRMYXllclB4RnJvbUxvbkxhdCh0aGlzLmxvbmxhdCk7YSYmdGhpcy5tb3ZlVG8oYSl9fSxtb3ZlVG86ZnVuY3Rpb24oYSl7bnVsbCE9YSYmbnVsbCE9dGhpcy5kaXYmJih0aGlzLmRpdi5zdHlsZS5sZWZ0PWEueCsicHgiLHRoaXMuZGl2LnN0eWxlLnRvcD0KYS55KyJweCIpfSx2aXNpYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIE9wZW5MYXllcnMuRWxlbWVudC52aXNpYmxlKHRoaXMuZGl2KX0sdG9nZ2xlOmZ1bmN0aW9uKCl7dGhpcy52aXNpYmxlKCk/dGhpcy5oaWRlKCk6dGhpcy5zaG93KCl9LHNob3c6ZnVuY3Rpb24oKXt0aGlzLmRpdi5zdHlsZS5kaXNwbGF5PSIiO3RoaXMucGFuTWFwSWZPdXRPZlZpZXcmJnRoaXMucGFuSW50b1ZpZXcoKX0saGlkZTpmdW5jdGlvbigpe3RoaXMuZGl2LnN0eWxlLmRpc3BsYXk9Im5vbmUifSxzZXRTaXplOmZ1bmN0aW9uKGEpe3RoaXMuc2l6ZT1hLmNsb25lKCk7dmFyIGI9dGhpcy5nZXRDb250ZW50RGl2UGFkZGluZygpLGM9Yi5sZWZ0K2IucmlnaHQsZD1iLnRvcCtiLmJvdHRvbTt0aGlzLmZpeFBhZGRpbmcoKTtjKz10aGlzLnBhZGRpbmcubGVmdCt0aGlzLnBhZGRpbmcucmlnaHQ7ZCs9dGhpcy5wYWRkaW5nLnRvcCt0aGlzLnBhZGRpbmcuYm90dG9tO2lmKHRoaXMuY2xvc2VEaXYpdmFyIGU9cGFyc2VJbnQodGhpcy5jbG9zZURpdi5zdHlsZS53aWR0aCksCmM9YysoZStiLnJpZ2h0KTt0aGlzLnNpemUudys9Yzt0aGlzLnNpemUuaCs9ZDsibXNpZSI9PU9wZW5MYXllcnMuQlJPV1NFUl9OQU1FJiYodGhpcy5jb250ZW50U2l6ZS53Kz1iLmxlZnQrYi5yaWdodCx0aGlzLmNvbnRlbnRTaXplLmgrPWIuYm90dG9tK2IudG9wKTtudWxsIT10aGlzLmRpdiYmKHRoaXMuZGl2LnN0eWxlLndpZHRoPXRoaXMuc2l6ZS53KyJweCIsdGhpcy5kaXYuc3R5bGUuaGVpZ2h0PXRoaXMuc2l6ZS5oKyJweCIpO251bGwhPXRoaXMuY29udGVudERpdiYmKHRoaXMuY29udGVudERpdi5zdHlsZS53aWR0aD1hLncrInB4Iix0aGlzLmNvbnRlbnREaXYuc3R5bGUuaGVpZ2h0PWEuaCsicHgiKX0sdXBkYXRlU2l6ZTpmdW5jdGlvbigpe3ZhciBhPSI8ZGl2IGNsYXNzPSciK3RoaXMuY29udGVudERpc3BsYXlDbGFzcysiJz4iK3RoaXMuY29udGVudERpdi5pbm5lckhUTUwrIjwvZGl2PiIsYj10aGlzLm1hcD90aGlzLm1hcC5kaXY6ZG9jdW1lbnQuYm9keSxjPU9wZW5MYXllcnMuVXRpbC5nZXRSZW5kZXJlZERpbWVuc2lvbnMoYSwKbnVsbCx7ZGlzcGxheUNsYXNzOnRoaXMuZGlzcGxheUNsYXNzLGNvbnRhaW5lckVsZW1lbnQ6Yn0pLGQ9dGhpcy5nZXRTYWZlQ29udGVudFNpemUoYyksZT1udWxsO2QuZXF1YWxzKGMpP2U9YzooYz17dzpkLnc8Yy53P2QudzpudWxsLGg6ZC5oPGMuaD9kLmg6bnVsbH0sYy53JiZjLmg/ZT1kOihhPU9wZW5MYXllcnMuVXRpbC5nZXRSZW5kZXJlZERpbWVuc2lvbnMoYSxjLHtkaXNwbGF5Q2xhc3M6dGhpcy5jb250ZW50RGlzcGxheUNsYXNzLGNvbnRhaW5lckVsZW1lbnQ6Yn0pLCJoaWRkZW4iIT1PcGVuTGF5ZXJzLkVsZW1lbnQuZ2V0U3R5bGUodGhpcy5jb250ZW50RGl2LCJvdmVyZmxvdyIpJiZhLmVxdWFscyhkKSYmKGQ9T3BlbkxheWVycy5VdGlsLmdldFNjcm9sbGJhcldpZHRoKCksYy53P2EuaCs9ZDphLncrPWQpLGU9dGhpcy5nZXRTYWZlQ29udGVudFNpemUoYSkpKTt0aGlzLnNldFNpemUoZSl9LHNldEJhY2tncm91bmRDb2xvcjpmdW5jdGlvbihhKXt2b2lkIDAhPWEmJih0aGlzLmJhY2tncm91bmRDb2xvcj0KYSk7bnVsbCE9dGhpcy5kaXYmJih0aGlzLmRpdi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3I9dGhpcy5iYWNrZ3JvdW5kQ29sb3IpfSxzZXRPcGFjaXR5OmZ1bmN0aW9uKGEpe3ZvaWQgMCE9YSYmKHRoaXMub3BhY2l0eT1hKTtudWxsIT10aGlzLmRpdiYmKHRoaXMuZGl2LnN0eWxlLm9wYWNpdHk9dGhpcy5vcGFjaXR5LHRoaXMuZGl2LnN0eWxlLmZpbHRlcj0iYWxwaGEob3BhY2l0eT0iKzEwMCp0aGlzLm9wYWNpdHkrIikiKX0sc2V0Qm9yZGVyOmZ1bmN0aW9uKGEpe3ZvaWQgMCE9YSYmKHRoaXMuYm9yZGVyPWEpO251bGwhPXRoaXMuZGl2JiYodGhpcy5kaXYuc3R5bGUuYm9yZGVyPXRoaXMuYm9yZGVyKX0sc2V0Q29udGVudEhUTUw6ZnVuY3Rpb24oYSl7bnVsbCE9YSYmKHRoaXMuY29udGVudEhUTUw9YSk7bnVsbCE9dGhpcy5jb250ZW50RGl2JiYobnVsbCE9dGhpcy5jb250ZW50SFRNTCYmdGhpcy5jb250ZW50SFRNTCE9dGhpcy5jb250ZW50RGl2LmlubmVySFRNTCkmJih0aGlzLmNvbnRlbnREaXYuaW5uZXJIVE1MPQp0aGlzLmNvbnRlbnRIVE1MLHRoaXMuYXV0b1NpemUmJih0aGlzLnJlZ2lzdGVySW1hZ2VMaXN0ZW5lcnMoKSx0aGlzLnVwZGF0ZVNpemUoKSkpfSxyZWdpc3RlckltYWdlTGlzdGVuZXJzOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPWZ1bmN0aW9uKCl7bnVsbCE9PXRoaXMucG9wdXAuaWQmJih0aGlzLnBvcHVwLnVwZGF0ZVNpemUoKSx0aGlzLnBvcHVwLnZpc2libGUoKSYmdGhpcy5wb3B1cC5wYW5NYXBJZk91dE9mVmlldyYmdGhpcy5wb3B1cC5wYW5JbnRvVmlldygpLE9wZW5MYXllcnMuRXZlbnQuc3RvcE9ic2VydmluZyh0aGlzLmltZywibG9hZCIsdGhpcy5pbWcuX29uSW1nTG9hZCkpfSxiPXRoaXMuY29udGVudERpdi5nZXRFbGVtZW50c0J5VGFnTmFtZSgiaW1nIiksYz0wLGQ9Yi5sZW5ndGg7YzxkO2MrKyl7dmFyIGU9YltjXTtpZigwPT1lLndpZHRofHwwPT1lLmhlaWdodCllLl9vbkltZ0xvYWQ9T3BlbkxheWVycy5GdW5jdGlvbi5iaW5kKGEse3BvcHVwOnRoaXMsaW1nOmV9KSwKT3BlbkxheWVycy5FdmVudC5vYnNlcnZlKGUsImxvYWQiLGUuX29uSW1nTG9hZCl9fSxnZXRTYWZlQ29udGVudFNpemU6ZnVuY3Rpb24oYSl7YT1hLmNsb25lKCk7dmFyIGI9dGhpcy5nZXRDb250ZW50RGl2UGFkZGluZygpLGM9Yi5sZWZ0K2IucmlnaHQsZD1iLnRvcCtiLmJvdHRvbTt0aGlzLmZpeFBhZGRpbmcoKTtjKz10aGlzLnBhZGRpbmcubGVmdCt0aGlzLnBhZGRpbmcucmlnaHQ7ZCs9dGhpcy5wYWRkaW5nLnRvcCt0aGlzLnBhZGRpbmcuYm90dG9tO2lmKHRoaXMuY2xvc2VEaXYpdmFyIGU9cGFyc2VJbnQodGhpcy5jbG9zZURpdi5zdHlsZS53aWR0aCksYz1jKyhlK2IucmlnaHQpO3RoaXMubWluU2l6ZSYmKGEudz1NYXRoLm1heChhLncsdGhpcy5taW5TaXplLnctYyksYS5oPU1hdGgubWF4KGEuaCx0aGlzLm1pblNpemUuaC1kKSk7dGhpcy5tYXhTaXplJiYoYS53PU1hdGgubWluKGEudyx0aGlzLm1heFNpemUudy1jKSxhLmg9TWF0aC5taW4oYS5oLHRoaXMubWF4U2l6ZS5oLQpkKSk7aWYodGhpcy5tYXAmJnRoaXMubWFwLnNpemUpe2U9Yj0wO2lmKHRoaXMua2VlcEluTWFwJiYhdGhpcy5wYW5NYXBJZk91dE9mVmlldylzd2l0Y2goZT10aGlzLm1hcC5nZXRQaXhlbEZyb21Mb25MYXQodGhpcy5sb25sYXQpLHRoaXMucmVsYXRpdmVQb3NpdGlvbil7Y2FzZSAidHIiOmI9ZS54O2U9dGhpcy5tYXAuc2l6ZS5oLWUueTticmVhaztjYXNlICJ0bCI6Yj10aGlzLm1hcC5zaXplLnctZS54O2U9dGhpcy5tYXAuc2l6ZS5oLWUueTticmVhaztjYXNlICJibCI6Yj10aGlzLm1hcC5zaXplLnctZS54O2U9ZS55O2JyZWFrO2Nhc2UgImJyIjpiPWUueDtlPWUueTticmVhaztkZWZhdWx0OmI9ZS54LGU9dGhpcy5tYXAuc2l6ZS5oLWUueX1kPXRoaXMubWFwLnNpemUuaC10aGlzLm1hcC5wYWRkaW5nRm9yUG9wdXBzLnRvcC10aGlzLm1hcC5wYWRkaW5nRm9yUG9wdXBzLmJvdHRvbS1kLWU7YS53PU1hdGgubWluKGEudyx0aGlzLm1hcC5zaXplLnctdGhpcy5tYXAucGFkZGluZ0ZvclBvcHVwcy5sZWZ0LQp0aGlzLm1hcC5wYWRkaW5nRm9yUG9wdXBzLnJpZ2h0LWMtYik7YS5oPU1hdGgubWluKGEuaCxkKX1yZXR1cm4gYX0sZ2V0Q29udGVudERpdlBhZGRpbmc6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLl9jb250ZW50RGl2UGFkZGluZzthfHwobnVsbD09dGhpcy5kaXYucGFyZW50Tm9kZSYmKHRoaXMuZGl2LnN0eWxlLmRpc3BsYXk9Im5vbmUiLGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGhpcy5kaXYpKSx0aGlzLl9jb250ZW50RGl2UGFkZGluZz1hPW5ldyBPcGVuTGF5ZXJzLkJvdW5kcyhPcGVuTGF5ZXJzLkVsZW1lbnQuZ2V0U3R5bGUodGhpcy5jb250ZW50RGl2LCJwYWRkaW5nLWxlZnQiKSxPcGVuTGF5ZXJzLkVsZW1lbnQuZ2V0U3R5bGUodGhpcy5jb250ZW50RGl2LCJwYWRkaW5nLWJvdHRvbSIpLE9wZW5MYXllcnMuRWxlbWVudC5nZXRTdHlsZSh0aGlzLmNvbnRlbnREaXYsInBhZGRpbmctcmlnaHQiKSxPcGVuTGF5ZXJzLkVsZW1lbnQuZ2V0U3R5bGUodGhpcy5jb250ZW50RGl2LAoicGFkZGluZy10b3AiKSksdGhpcy5kaXYucGFyZW50Tm9kZT09ZG9jdW1lbnQuYm9keSYmKGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQodGhpcy5kaXYpLHRoaXMuZGl2LnN0eWxlLmRpc3BsYXk9IiIpKTtyZXR1cm4gYX0sYWRkQ2xvc2VCb3g6ZnVuY3Rpb24oYSl7dGhpcy5jbG9zZURpdj1PcGVuTGF5ZXJzLlV0aWwuY3JlYXRlRGl2KHRoaXMuaWQrIl9jbG9zZSIsbnVsbCx7dzoxNyxoOjE3fSk7dGhpcy5jbG9zZURpdi5jbGFzc05hbWU9Im9sUG9wdXBDbG9zZUJveCI7dmFyIGI9dGhpcy5nZXRDb250ZW50RGl2UGFkZGluZygpO3RoaXMuY2xvc2VEaXYuc3R5bGUucmlnaHQ9Yi5yaWdodCsicHgiO3RoaXMuY2xvc2VEaXYuc3R5bGUudG9wPWIudG9wKyJweCI7dGhpcy5ncm91cERpdi5hcHBlbmRDaGlsZCh0aGlzLmNsb3NlRGl2KTthPWF8fGZ1bmN0aW9uKGEpe3RoaXMuaGlkZSgpO09wZW5MYXllcnMuRXZlbnQuc3RvcChhKX07T3BlbkxheWVycy5FdmVudC5vYnNlcnZlKHRoaXMuY2xvc2VEaXYsCiJ0b3VjaGVuZCIsT3BlbkxheWVycy5GdW5jdGlvbi5iaW5kQXNFdmVudExpc3RlbmVyKGEsdGhpcykpO09wZW5MYXllcnMuRXZlbnQub2JzZXJ2ZSh0aGlzLmNsb3NlRGl2LCJjbGljayIsT3BlbkxheWVycy5GdW5jdGlvbi5iaW5kQXNFdmVudExpc3RlbmVyKGEsdGhpcykpfSxwYW5JbnRvVmlldzpmdW5jdGlvbigpe3ZhciBhPXRoaXMubWFwLmdldFNpemUoKSxiPXRoaXMubWFwLmdldFZpZXdQb3J0UHhGcm9tTGF5ZXJQeChuZXcgT3BlbkxheWVycy5QaXhlbChwYXJzZUludCh0aGlzLmRpdi5zdHlsZS5sZWZ0KSxwYXJzZUludCh0aGlzLmRpdi5zdHlsZS50b3ApKSksYz1iLmNsb25lKCk7Yi54PHRoaXMubWFwLnBhZGRpbmdGb3JQb3B1cHMubGVmdD9jLng9dGhpcy5tYXAucGFkZGluZ0ZvclBvcHVwcy5sZWZ0OmIueCt0aGlzLnNpemUudz5hLnctdGhpcy5tYXAucGFkZGluZ0ZvclBvcHVwcy5yaWdodCYmKGMueD1hLnctdGhpcy5tYXAucGFkZGluZ0ZvclBvcHVwcy5yaWdodC10aGlzLnNpemUudyk7CmIueTx0aGlzLm1hcC5wYWRkaW5nRm9yUG9wdXBzLnRvcD9jLnk9dGhpcy5tYXAucGFkZGluZ0ZvclBvcHVwcy50b3A6Yi55K3RoaXMuc2l6ZS5oPmEuaC10aGlzLm1hcC5wYWRkaW5nRm9yUG9wdXBzLmJvdHRvbSYmKGMueT1hLmgtdGhpcy5tYXAucGFkZGluZ0ZvclBvcHVwcy5ib3R0b20tdGhpcy5zaXplLmgpO3RoaXMubWFwLnBhbihiLngtYy54LGIueS1jLnkpfSxyZWdpc3RlckV2ZW50czpmdW5jdGlvbigpe3RoaXMuZXZlbnRzPW5ldyBPcGVuTGF5ZXJzLkV2ZW50cyh0aGlzLHRoaXMuZGl2LG51bGwsITApO3RoaXMuZXZlbnRzLm9uKHttb3VzZWRvd246dGhpcy5vbm1vdXNlZG93bixtb3VzZW1vdmU6dGhpcy5vbm1vdXNlbW92ZSxtb3VzZXVwOnRoaXMub25tb3VzZXVwLGNsaWNrOnRoaXMub25jbGljayxtb3VzZW91dDp0aGlzLm9ubW91c2VvdXQsZGJsY2xpY2s6dGhpcy5vbmRibGNsaWNrLHRvdWNoc3RhcnQ6ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5FdmVudC5zdG9wKGEsITApfSwKc2NvcGU6dGhpc30pfSxvbm1vdXNlZG93bjpmdW5jdGlvbihhKXt0aGlzLm1vdXNlZG93bj0hMDtPcGVuTGF5ZXJzLkV2ZW50LnN0b3AoYSwhMCl9LG9ubW91c2Vtb3ZlOmZ1bmN0aW9uKGEpe3RoaXMubW91c2Vkb3duJiZPcGVuTGF5ZXJzLkV2ZW50LnN0b3AoYSwhMCl9LG9ubW91c2V1cDpmdW5jdGlvbihhKXt0aGlzLm1vdXNlZG93biYmKHRoaXMubW91c2Vkb3duPSExLE9wZW5MYXllcnMuRXZlbnQuc3RvcChhLCEwKSl9LG9uY2xpY2s6ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5FdmVudC5zdG9wKGEsITApfSxvbm1vdXNlb3V0OmZ1bmN0aW9uKGEpe3RoaXMubW91c2Vkb3duPSExfSxvbmRibGNsaWNrOmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuRXZlbnQuc3RvcChhLCEwKX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Qb3B1cCJ9KTtPcGVuTGF5ZXJzLlBvcHVwLldJRFRIPTIwMDtPcGVuTGF5ZXJzLlBvcHVwLkhFSUdIVD0yMDA7T3BlbkxheWVycy5Qb3B1cC5DT0xPUj0id2hpdGUiOwpPcGVuTGF5ZXJzLlBvcHVwLk9QQUNJVFk9MTtPcGVuTGF5ZXJzLlBvcHVwLkJPUkRFUj0iMHB4IjtPcGVuTGF5ZXJzLlBvcHVwLkFuY2hvcmVkPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Qb3B1cCx7cmVsYXRpdmVQb3NpdGlvbjpudWxsLGtlZXBJbk1hcDohMCxhbmNob3I6bnVsbCxpbml0aWFsaXplOmZ1bmN0aW9uKGEsYixjLGQsZSxmLGcpe09wZW5MYXllcnMuUG9wdXAucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxbYSxiLGMsZCxmLGddKTt0aGlzLmFuY2hvcj1udWxsIT1lP2U6e3NpemU6bmV3IE9wZW5MYXllcnMuU2l6ZSgwLDApLG9mZnNldDpuZXcgT3BlbkxheWVycy5QaXhlbCgwLDApfX0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMucmVsYXRpdmVQb3NpdGlvbj10aGlzLmFuY2hvcj1udWxsO09wZW5MYXllcnMuUG9wdXAucHJvdG90eXBlLmRlc3Ryb3kuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxzaG93OmZ1bmN0aW9uKCl7dGhpcy51cGRhdGVQb3NpdGlvbigpO09wZW5MYXllcnMuUG9wdXAucHJvdG90eXBlLnNob3cuYXBwbHkodGhpcyxhcmd1bWVudHMpfSwKbW92ZVRvOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMucmVsYXRpdmVQb3NpdGlvbjt0aGlzLnJlbGF0aXZlUG9zaXRpb249dGhpcy5jYWxjdWxhdGVSZWxhdGl2ZVBvc2l0aW9uKGEpO09wZW5MYXllcnMuUG9wdXAucHJvdG90eXBlLm1vdmVUby5jYWxsKHRoaXMsdGhpcy5jYWxjdWxhdGVOZXdQeChhKSk7dGhpcy5yZWxhdGl2ZVBvc2l0aW9uIT1iJiZ0aGlzLnVwZGF0ZVJlbGF0aXZlUG9zaXRpb24oKX0sc2V0U2l6ZTpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLlBvcHVwLnByb3RvdHlwZS5zZXRTaXplLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtpZih0aGlzLmxvbmxhdCYmdGhpcy5tYXApe3ZhciBiPXRoaXMubWFwLmdldExheWVyUHhGcm9tTG9uTGF0KHRoaXMubG9ubGF0KTt0aGlzLm1vdmVUbyhiKX19LGNhbGN1bGF0ZVJlbGF0aXZlUG9zaXRpb246ZnVuY3Rpb24oYSl7YT10aGlzLm1hcC5nZXRMb25MYXRGcm9tTGF5ZXJQeChhKTthPXRoaXMubWFwLmdldEV4dGVudCgpLmRldGVybWluZVF1YWRyYW50KGEpOwpyZXR1cm4gT3BlbkxheWVycy5Cb3VuZHMub3Bwb3NpdGVRdWFkcmFudChhKX0sdXBkYXRlUmVsYXRpdmVQb3NpdGlvbjpmdW5jdGlvbigpe30sY2FsY3VsYXRlTmV3UHg6ZnVuY3Rpb24oYSl7YT1hLm9mZnNldCh0aGlzLmFuY2hvci5vZmZzZXQpO3ZhciBiPXRoaXMuc2l6ZXx8dGhpcy5jb250ZW50U2l6ZSxjPSJ0Ij09dGhpcy5yZWxhdGl2ZVBvc2l0aW9uLmNoYXJBdCgwKTthLnkrPWM/LWIuaDp0aGlzLmFuY2hvci5zaXplLmg7Yz0ibCI9PXRoaXMucmVsYXRpdmVQb3NpdGlvbi5jaGFyQXQoMSk7YS54Kz1jPy1iLnc6dGhpcy5hbmNob3Iuc2l6ZS53O3JldHVybiBhfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLlBvcHVwLkFuY2hvcmVkIn0pO09wZW5MYXllcnMuUG9wdXAuRnJhbWVkPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Qb3B1cC5BbmNob3JlZCx7aW1hZ2VTcmM6bnVsbCxpbWFnZVNpemU6bnVsbCxpc0FscGhhSW1hZ2U6ITEscG9zaXRpb25CbG9ja3M6bnVsbCxibG9ja3M6bnVsbCxmaXhlZFJlbGF0aXZlUG9zaXRpb246ITEsaW5pdGlhbGl6ZTpmdW5jdGlvbihhLGIsYyxkLGUsZixnKXtPcGVuTGF5ZXJzLlBvcHVwLkFuY2hvcmVkLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLmZpeGVkUmVsYXRpdmVQb3NpdGlvbiYmKHRoaXMudXBkYXRlUmVsYXRpdmVQb3NpdGlvbigpLHRoaXMuY2FsY3VsYXRlUmVsYXRpdmVQb3NpdGlvbj1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5yZWxhdGl2ZVBvc2l0aW9ufSk7dGhpcy5jb250ZW50RGl2LnN0eWxlLnBvc2l0aW9uPSJhYnNvbHV0ZSI7dGhpcy5jb250ZW50RGl2LnN0eWxlLnpJbmRleD0xO2YmJih0aGlzLmNsb3NlRGl2LnN0eWxlLnpJbmRleD0KMSk7dGhpcy5ncm91cERpdi5zdHlsZS5wb3NpdGlvbj0iYWJzb2x1dGUiO3RoaXMuZ3JvdXBEaXYuc3R5bGUudG9wPSIwcHgiO3RoaXMuZ3JvdXBEaXYuc3R5bGUubGVmdD0iMHB4Ijt0aGlzLmdyb3VwRGl2LnN0eWxlLmhlaWdodD0iMTAwJSI7dGhpcy5ncm91cERpdi5zdHlsZS53aWR0aD0iMTAwJSJ9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmlzQWxwaGFJbWFnZT10aGlzLmltYWdlU2l6ZT10aGlzLmltYWdlU3JjPW51bGw7dGhpcy5maXhlZFJlbGF0aXZlUG9zaXRpb249ITE7dGhpcy5wb3NpdGlvbkJsb2Nrcz1udWxsO2Zvcih2YXIgYT0wO2E8dGhpcy5ibG9ja3MubGVuZ3RoO2ErKyl7dmFyIGI9dGhpcy5ibG9ja3NbYV07Yi5pbWFnZSYmYi5kaXYucmVtb3ZlQ2hpbGQoYi5pbWFnZSk7Yi5pbWFnZT1udWxsO2IuZGl2JiZ0aGlzLmdyb3VwRGl2LnJlbW92ZUNoaWxkKGIuZGl2KTtiLmRpdj1udWxsfXRoaXMuYmxvY2tzPW51bGw7T3BlbkxheWVycy5Qb3B1cC5BbmNob3JlZC5wcm90b3R5cGUuZGVzdHJveS5hcHBseSh0aGlzLAphcmd1bWVudHMpfSxzZXRCYWNrZ3JvdW5kQ29sb3I6ZnVuY3Rpb24oYSl7fSxzZXRCb3JkZXI6ZnVuY3Rpb24oKXt9LHNldE9wYWNpdHk6ZnVuY3Rpb24oYSl7fSxzZXRTaXplOmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuUG9wdXAuQW5jaG9yZWQucHJvdG90eXBlLnNldFNpemUuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMudXBkYXRlQmxvY2tzKCl9LHVwZGF0ZVJlbGF0aXZlUG9zaXRpb246ZnVuY3Rpb24oKXt0aGlzLnBhZGRpbmc9dGhpcy5wb3NpdGlvbkJsb2Nrc1t0aGlzLnJlbGF0aXZlUG9zaXRpb25dLnBhZGRpbmc7aWYodGhpcy5jbG9zZURpdil7dmFyIGE9dGhpcy5nZXRDb250ZW50RGl2UGFkZGluZygpO3RoaXMuY2xvc2VEaXYuc3R5bGUucmlnaHQ9YS5yaWdodCt0aGlzLnBhZGRpbmcucmlnaHQrInB4Ijt0aGlzLmNsb3NlRGl2LnN0eWxlLnRvcD1hLnRvcCt0aGlzLnBhZGRpbmcudG9wKyJweCJ9dGhpcy51cGRhdGVCbG9ja3MoKX0sY2FsY3VsYXRlTmV3UHg6ZnVuY3Rpb24oYSl7dmFyIGI9Ck9wZW5MYXllcnMuUG9wdXAuQW5jaG9yZWQucHJvdG90eXBlLmNhbGN1bGF0ZU5ld1B4LmFwcGx5KHRoaXMsYXJndW1lbnRzKTtyZXR1cm4gYj1iLm9mZnNldCh0aGlzLnBvc2l0aW9uQmxvY2tzW3RoaXMucmVsYXRpdmVQb3NpdGlvbl0ub2Zmc2V0KX0sY3JlYXRlQmxvY2tzOmZ1bmN0aW9uKCl7dGhpcy5ibG9ja3M9W107dmFyIGE9bnVsbCxiO2ZvcihiIGluIHRoaXMucG9zaXRpb25CbG9ja3Mpe2E9YjticmVha31hPXRoaXMucG9zaXRpb25CbG9ja3NbYV07Zm9yKGI9MDtiPGEuYmxvY2tzLmxlbmd0aDtiKyspe3ZhciBjPXt9O3RoaXMuYmxvY2tzLnB1c2goYyk7Yy5kaXY9T3BlbkxheWVycy5VdGlsLmNyZWF0ZURpdih0aGlzLmlkKyJfRnJhbWVEZWNvcmF0aW9uRGl2XyIrYixudWxsLG51bGwsbnVsbCwiYWJzb2x1dGUiLG51bGwsImhpZGRlbiIsbnVsbCk7Yy5pbWFnZT0odGhpcy5pc0FscGhhSW1hZ2U/T3BlbkxheWVycy5VdGlsLmNyZWF0ZUFscGhhSW1hZ2VEaXY6T3BlbkxheWVycy5VdGlsLmNyZWF0ZUltYWdlKSh0aGlzLmlkKwoiX0ZyYW1lRGVjb3JhdGlvbkltZ18iK2IsbnVsbCx0aGlzLmltYWdlU2l6ZSx0aGlzLmltYWdlU3JjLCJhYnNvbHV0ZSIsbnVsbCxudWxsLG51bGwpO2MuZGl2LmFwcGVuZENoaWxkKGMuaW1hZ2UpO3RoaXMuZ3JvdXBEaXYuYXBwZW5kQ2hpbGQoYy5kaXYpfX0sdXBkYXRlQmxvY2tzOmZ1bmN0aW9uKCl7dGhpcy5ibG9ja3N8fHRoaXMuY3JlYXRlQmxvY2tzKCk7aWYodGhpcy5zaXplJiZ0aGlzLnJlbGF0aXZlUG9zaXRpb24pe2Zvcih2YXIgYT10aGlzLnBvc2l0aW9uQmxvY2tzW3RoaXMucmVsYXRpdmVQb3NpdGlvbl0sYj0wO2I8YS5ibG9ja3MubGVuZ3RoO2IrKyl7dmFyIGM9YS5ibG9ja3NbYl0sZD10aGlzLmJsb2Nrc1tiXSxlPWMuYW5jaG9yLmxlZnQsZj1jLmFuY2hvci5ib3R0b20sZz1jLmFuY2hvci5yaWdodCxoPWMuYW5jaG9yLnRvcCxrPWlzTmFOKGMuc2l6ZS53KT90aGlzLnNpemUudy0oZytlKTpjLnNpemUudyxsPWlzTmFOKGMuc2l6ZS5oKT90aGlzLnNpemUuaC0oZisKaCk6Yy5zaXplLmg7ZC5kaXYuc3R5bGUud2lkdGg9KDA+az8wOmspKyJweCI7ZC5kaXYuc3R5bGUuaGVpZ2h0PSgwPmw/MDpsKSsicHgiO2QuZGl2LnN0eWxlLmxlZnQ9bnVsbCE9ZT9lKyJweCI6IiI7ZC5kaXYuc3R5bGUuYm90dG9tPW51bGwhPWY/ZisicHgiOiIiO2QuZGl2LnN0eWxlLnJpZ2h0PW51bGwhPWc/ZysicHgiOiIiO2QuZGl2LnN0eWxlLnRvcD1udWxsIT1oP2grInB4IjoiIjtkLmltYWdlLnN0eWxlLmxlZnQ9Yy5wb3NpdGlvbi54KyJweCI7ZC5pbWFnZS5zdHlsZS50b3A9Yy5wb3NpdGlvbi55KyJweCJ9dGhpcy5jb250ZW50RGl2LnN0eWxlLmxlZnQ9dGhpcy5wYWRkaW5nLmxlZnQrInB4Ijt0aGlzLmNvbnRlbnREaXYuc3R5bGUudG9wPXRoaXMucGFkZGluZy50b3ArInB4In19LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuUG9wdXAuRnJhbWVkIn0pO09wZW5MYXllcnMuRm9ybWF0PU9wZW5MYXllcnMuQ2xhc3Moe29wdGlvbnM6bnVsbCxleHRlcm5hbFByb2plY3Rpb246bnVsbCxpbnRlcm5hbFByb2plY3Rpb246bnVsbCxkYXRhOm51bGwsa2VlcERhdGE6ITEsaW5pdGlhbGl6ZTpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHRoaXMsYSk7dGhpcy5vcHRpb25zPWF9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt9LHJlYWQ6ZnVuY3Rpb24oYSl7dGhyb3cgRXJyb3IoIlJlYWQgbm90IGltcGxlbWVudGVkLiIpO30sd3JpdGU6ZnVuY3Rpb24oYSl7dGhyb3cgRXJyb3IoIldyaXRlIG5vdCBpbXBsZW1lbnRlZC4iKTt9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuRm9ybWF0In0pO09wZW5MYXllcnMuRm9ybWF0LkpTT049T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkZvcm1hdCx7aW5kZW50OiIgICAgIixzcGFjZToiICIsbmV3bGluZToiXG4iLGxldmVsOjAscHJldHR5OiExLG5hdGl2ZUpTT046ZnVuY3Rpb24oKXtyZXR1cm4hKCF3aW5kb3cuSlNPTnx8ImZ1bmN0aW9uIiE9dHlwZW9mIEpTT04ucGFyc2V8fCJmdW5jdGlvbiIhPXR5cGVvZiBKU09OLnN0cmluZ2lmeSl9KCkscmVhZDpmdW5jdGlvbihhLGIpe3ZhciBjO2lmKHRoaXMubmF0aXZlSlNPTiljPUpTT04ucGFyc2UoYSxiKTtlbHNlIHRyeXtpZigvXltcXSw6e31cc10qJC8udGVzdChhLnJlcGxhY2UoL1xcWyJcXFwvYmZucnR1XS9nLCJAIikucmVwbGFjZSgvIlteIlxcXG5ccl0qInx0cnVlfGZhbHNlfG51bGx8LT9cZCsoPzpcLlxkKik/KD86W2VFXVsrXC1dP1xkKyk/L2csIl0iKS5yZXBsYWNlKC8oPzpefDp8LCkoPzpccypcWykrL2csIiIpKSYmKGM9ZXZhbCgiKCIrYSsiKSIpLCJmdW5jdGlvbiI9PT0KdHlwZW9mIGIpKXt2YXIgZD1mdW5jdGlvbihhLGMpe2lmKGMmJiJvYmplY3QiPT09dHlwZW9mIGMpZm9yKHZhciBlIGluIGMpYy5oYXNPd25Qcm9wZXJ0eShlKSYmKGNbZV09ZChlLGNbZV0pKTtyZXR1cm4gYihhLGMpfTtjPWQoIiIsYyl9fWNhdGNoKGUpe310aGlzLmtlZXBEYXRhJiYodGhpcy5kYXRhPWMpO3JldHVybiBjfSx3cml0ZTpmdW5jdGlvbihhLGIpe3RoaXMucHJldHR5PSEhYjt2YXIgYz1udWxsLGQ9dHlwZW9mIGE7aWYodGhpcy5zZXJpYWxpemVbZF0pdHJ5e2M9IXRoaXMucHJldHR5JiZ0aGlzLm5hdGl2ZUpTT04/SlNPTi5zdHJpbmdpZnkoYSk6dGhpcy5zZXJpYWxpemVbZF0uYXBwbHkodGhpcyxbYV0pfWNhdGNoKGUpe09wZW5MYXllcnMuQ29uc29sZS5lcnJvcigiVHJvdWJsZSBzZXJpYWxpemluZzogIitlKX1yZXR1cm4gY30sd3JpdGVJbmRlbnQ6ZnVuY3Rpb24oKXt2YXIgYT1bXTtpZih0aGlzLnByZXR0eSlmb3IodmFyIGI9MDtiPHRoaXMubGV2ZWw7KytiKWEucHVzaCh0aGlzLmluZGVudCk7CnJldHVybiBhLmpvaW4oIiIpfSx3cml0ZU5ld2xpbmU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wcmV0dHk/dGhpcy5uZXdsaW5lOiIifSx3cml0ZVNwYWNlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHJldHR5P3RoaXMuc3BhY2U6IiJ9LHNlcmlhbGl6ZTp7b2JqZWN0OmZ1bmN0aW9uKGEpe2lmKG51bGw9PWEpcmV0dXJuIm51bGwiO2lmKGEuY29uc3RydWN0b3I9PURhdGUpcmV0dXJuIHRoaXMuc2VyaWFsaXplLmRhdGUuYXBwbHkodGhpcyxbYV0pO2lmKGEuY29uc3RydWN0b3I9PUFycmF5KXJldHVybiB0aGlzLnNlcmlhbGl6ZS5hcnJheS5hcHBseSh0aGlzLFthXSk7dmFyIGI9WyJ7Il07dGhpcy5sZXZlbCs9MTt2YXIgYyxkLGUsZj0hMTtmb3IoYyBpbiBhKWEuaGFzT3duUHJvcGVydHkoYykmJihkPU9wZW5MYXllcnMuRm9ybWF0LkpTT04ucHJvdG90eXBlLndyaXRlLmFwcGx5KHRoaXMsW2MsdGhpcy5wcmV0dHldKSxlPU9wZW5MYXllcnMuRm9ybWF0LkpTT04ucHJvdG90eXBlLndyaXRlLmFwcGx5KHRoaXMsClthW2NdLHRoaXMucHJldHR5XSksbnVsbCE9ZCYmbnVsbCE9ZSYmKGYmJmIucHVzaCgiLCIpLGIucHVzaCh0aGlzLndyaXRlTmV3bGluZSgpLHRoaXMud3JpdGVJbmRlbnQoKSxkLCI6Iix0aGlzLndyaXRlU3BhY2UoKSxlKSxmPSEwKSk7dGhpcy5sZXZlbC09MTtiLnB1c2godGhpcy53cml0ZU5ld2xpbmUoKSx0aGlzLndyaXRlSW5kZW50KCksIn0iKTtyZXR1cm4gYi5qb2luKCIiKX0sYXJyYXk6ZnVuY3Rpb24oYSl7dmFyIGIsYz1bIlsiXTt0aGlzLmxldmVsKz0xO2Zvcih2YXIgZD0wLGU9YS5sZW5ndGg7ZDxlOysrZCliPU9wZW5MYXllcnMuRm9ybWF0LkpTT04ucHJvdG90eXBlLndyaXRlLmFwcGx5KHRoaXMsW2FbZF0sdGhpcy5wcmV0dHldKSxudWxsIT1iJiYoMDxkJiZjLnB1c2goIiwiKSxjLnB1c2godGhpcy53cml0ZU5ld2xpbmUoKSx0aGlzLndyaXRlSW5kZW50KCksYikpO3RoaXMubGV2ZWwtPTE7Yy5wdXNoKHRoaXMud3JpdGVOZXdsaW5lKCksdGhpcy53cml0ZUluZGVudCgpLAoiXSIpO3JldHVybiBjLmpvaW4oIiIpfSxzdHJpbmc6ZnVuY3Rpb24oYSl7dmFyIGI9eyJcYiI6IlxcYiIsIlx0IjoiXFx0IiwiXG4iOiJcXG4iLCJcZiI6IlxcZiIsIlxyIjoiXFxyIiwnIic6J1xcIicsIlxcIjoiXFxcXCJ9O3JldHVybi9bIlxcXHgwMC1ceDFmXS8udGVzdChhKT8nIicrYS5yZXBsYWNlKC8oW1x4MDAtXHgxZlxcIl0pL2csZnVuY3Rpb24oYSxkKXt2YXIgZT1iW2RdO2lmKGUpcmV0dXJuIGU7ZT1kLmNoYXJDb2RlQXQoKTtyZXR1cm4iXFx1MDAiK01hdGguZmxvb3IoZS8xNikudG9TdHJpbmcoMTYpKyhlJTE2KS50b1N0cmluZygxNil9KSsnIic6JyInK2ErJyInfSxudW1iZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIGlzRmluaXRlKGEpP1N0cmluZyhhKToibnVsbCJ9LCJib29sZWFuIjpmdW5jdGlvbihhKXtyZXR1cm4gU3RyaW5nKGEpfSxkYXRlOmZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7cmV0dXJuIDEwPmE/IjAiK2E6YX1yZXR1cm4nIicrYS5nZXRGdWxsWWVhcigpKwoiLSIrYihhLmdldE1vbnRoKCkrMSkrIi0iK2IoYS5nZXREYXRlKCkpKyJUIitiKGEuZ2V0SG91cnMoKSkrIjoiK2IoYS5nZXRNaW51dGVzKCkpKyI6IitiKGEuZ2V0U2Vjb25kcygpKSsnIid9fSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkZvcm1hdC5KU09OIn0pO09wZW5MYXllcnMuRm9ybWF0Lkdlb0pTT049T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkZvcm1hdC5KU09OLHtpZ25vcmVFeHRyYURpbXM6ITEscmVhZDpmdW5jdGlvbihhLGIsYyl7Yj1iP2I6IkZlYXR1cmVDb2xsZWN0aW9uIjt2YXIgZD1udWxsLGU9bnVsbCxlPSJzdHJpbmciPT10eXBlb2YgYT9PcGVuTGF5ZXJzLkZvcm1hdC5KU09OLnByb3RvdHlwZS5yZWFkLmFwcGx5KHRoaXMsW2EsY10pOmE7aWYoIWUpT3BlbkxheWVycy5Db25zb2xlLmVycm9yKCJCYWQgSlNPTjogIithKTtlbHNlIGlmKCJzdHJpbmciIT10eXBlb2YgZS50eXBlKU9wZW5MYXllcnMuQ29uc29sZS5lcnJvcigiQmFkIEdlb0pTT04gLSBubyB0eXBlOiAiK2EpO2Vsc2UgaWYodGhpcy5pc1ZhbGlkVHlwZShlLGIpKXN3aXRjaChiKXtjYXNlICJHZW9tZXRyeSI6dHJ5e2Q9dGhpcy5wYXJzZUdlb21ldHJ5KGUpfWNhdGNoKGYpe09wZW5MYXllcnMuQ29uc29sZS5lcnJvcihmKX1icmVhaztjYXNlICJGZWF0dXJlIjp0cnl7ZD0KdGhpcy5wYXJzZUZlYXR1cmUoZSksZC50eXBlPSJGZWF0dXJlIn1jYXRjaChnKXtPcGVuTGF5ZXJzLkNvbnNvbGUuZXJyb3IoZyl9YnJlYWs7Y2FzZSAiRmVhdHVyZUNvbGxlY3Rpb24iOnN3aXRjaChkPVtdLGUudHlwZSl7Y2FzZSAiRmVhdHVyZSI6dHJ5e2QucHVzaCh0aGlzLnBhcnNlRmVhdHVyZShlKSl9Y2F0Y2goaCl7ZD1udWxsLE9wZW5MYXllcnMuQ29uc29sZS5lcnJvcihoKX1icmVhaztjYXNlICJGZWF0dXJlQ29sbGVjdGlvbiI6YT0wO2ZvcihiPWUuZmVhdHVyZXMubGVuZ3RoO2E8YjsrK2EpdHJ5e2QucHVzaCh0aGlzLnBhcnNlRmVhdHVyZShlLmZlYXR1cmVzW2FdKSl9Y2F0Y2goayl7ZD1udWxsLE9wZW5MYXllcnMuQ29uc29sZS5lcnJvcihrKX1icmVhaztkZWZhdWx0OnRyeXt2YXIgbD10aGlzLnBhcnNlR2VvbWV0cnkoZSk7ZC5wdXNoKG5ldyBPcGVuTGF5ZXJzLkZlYXR1cmUuVmVjdG9yKGwpKX1jYXRjaChtKXtkPW51bGwsT3BlbkxheWVycy5Db25zb2xlLmVycm9yKG0pfX19cmV0dXJuIGR9LAppc1ZhbGlkVHlwZTpmdW5jdGlvbihhLGIpe3ZhciBjPSExO3N3aXRjaChiKXtjYXNlICJHZW9tZXRyeSI6LTE9PU9wZW5MYXllcnMuVXRpbC5pbmRleE9mKCJQb2ludCBNdWx0aVBvaW50IExpbmVTdHJpbmcgTXVsdGlMaW5lU3RyaW5nIFBvbHlnb24gTXVsdGlQb2x5Z29uIEJveCBHZW9tZXRyeUNvbGxlY3Rpb24iLnNwbGl0KCIgIiksYS50eXBlKT9PcGVuTGF5ZXJzLkNvbnNvbGUuZXJyb3IoIlVuc3VwcG9ydGVkIGdlb21ldHJ5IHR5cGU6ICIrYS50eXBlKTpjPSEwO2JyZWFrO2Nhc2UgIkZlYXR1cmVDb2xsZWN0aW9uIjpjPSEwO2JyZWFrO2RlZmF1bHQ6YS50eXBlPT1iP2M9ITA6T3BlbkxheWVycy5Db25zb2xlLmVycm9yKCJDYW5ub3QgY29udmVydCB0eXBlcyBmcm9tICIrYS50eXBlKyIgdG8gIitiKX1yZXR1cm4gY30scGFyc2VGZWF0dXJlOmZ1bmN0aW9uKGEpe3ZhciBiLGMsZDtjPWEucHJvcGVydGllcz9hLnByb3BlcnRpZXM6e307ZD1hLmdlb21ldHJ5JiZhLmdlb21ldHJ5LmJib3h8fAphLmJib3g7dHJ5e2I9dGhpcy5wYXJzZUdlb21ldHJ5KGEuZ2VvbWV0cnkpfWNhdGNoKGUpe3Rocm93IGU7fWI9bmV3IE9wZW5MYXllcnMuRmVhdHVyZS5WZWN0b3IoYixjKTtkJiYoYi5ib3VuZHM9T3BlbkxheWVycy5Cb3VuZHMuZnJvbUFycmF5KGQpKTthLmlkJiYoYi5maWQ9YS5pZCk7cmV0dXJuIGJ9LHBhcnNlR2VvbWV0cnk6ZnVuY3Rpb24oYSl7aWYobnVsbD09YSlyZXR1cm4gbnVsbDt2YXIgYixjPSExO2lmKCJHZW9tZXRyeUNvbGxlY3Rpb24iPT1hLnR5cGUpe2lmKCFPcGVuTGF5ZXJzLlV0aWwuaXNBcnJheShhLmdlb21ldHJpZXMpKXRocm93Ikdlb21ldHJ5Q29sbGVjdGlvbiBtdXN0IGhhdmUgZ2VvbWV0cmllcyBhcnJheTogIithO2I9YS5nZW9tZXRyaWVzLmxlbmd0aDtmb3IodmFyIGM9QXJyYXkoYiksZD0wO2Q8YjsrK2QpY1tkXT10aGlzLnBhcnNlR2VvbWV0cnkuYXBwbHkodGhpcyxbYS5nZW9tZXRyaWVzW2RdXSk7Yj1uZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Db2xsZWN0aW9uKGMpOwpjPSEwfWVsc2V7aWYoIU9wZW5MYXllcnMuVXRpbC5pc0FycmF5KGEuY29vcmRpbmF0ZXMpKXRocm93Ikdlb21ldHJ5IG11c3QgaGF2ZSBjb29yZGluYXRlcyBhcnJheTogIithO2lmKCF0aGlzLnBhcnNlQ29vcmRzW2EudHlwZS50b0xvd2VyQ2FzZSgpXSl0aHJvdyJVbnN1cHBvcnRlZCBnZW9tZXRyeSB0eXBlOiAiK2EudHlwZTt0cnl7Yj10aGlzLnBhcnNlQ29vcmRzW2EudHlwZS50b0xvd2VyQ2FzZSgpXS5hcHBseSh0aGlzLFthLmNvb3JkaW5hdGVzXSl9Y2F0Y2goZSl7dGhyb3cgZTt9fXRoaXMuaW50ZXJuYWxQcm9qZWN0aW9uJiYodGhpcy5leHRlcm5hbFByb2plY3Rpb24mJiFjKSYmYi50cmFuc2Zvcm0odGhpcy5leHRlcm5hbFByb2plY3Rpb24sdGhpcy5pbnRlcm5hbFByb2plY3Rpb24pO3JldHVybiBifSxwYXJzZUNvb3Jkczp7cG9pbnQ6ZnVuY3Rpb24oYSl7aWYoITE9PXRoaXMuaWdub3JlRXh0cmFEaW1zJiYyIT1hLmxlbmd0aCl0aHJvdyJPbmx5IDJEIHBvaW50cyBhcmUgc3VwcG9ydGVkOiAiKwphO3JldHVybiBuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludChhWzBdLGFbMV0pfSxtdWx0aXBvaW50OmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1bXSxjPW51bGwsZD0wLGU9YS5sZW5ndGg7ZDxlOysrZCl7dHJ5e2M9dGhpcy5wYXJzZUNvb3Jkcy5wb2ludC5hcHBseSh0aGlzLFthW2RdXSl9Y2F0Y2goZil7dGhyb3cgZjt9Yi5wdXNoKGMpfXJldHVybiBuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5NdWx0aVBvaW50KGIpfSxsaW5lc3RyaW5nOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1bXSxjPW51bGwsZD0wLGU9YS5sZW5ndGg7ZDxlOysrZCl7dHJ5e2M9dGhpcy5wYXJzZUNvb3Jkcy5wb2ludC5hcHBseSh0aGlzLFthW2RdXSl9Y2F0Y2goZil7dGhyb3cgZjt9Yi5wdXNoKGMpfXJldHVybiBuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5MaW5lU3RyaW5nKGIpfSxtdWx0aWxpbmVzdHJpbmc6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPVtdLGM9bnVsbCxkPTAsZT1hLmxlbmd0aDtkPGU7KytkKXt0cnl7Yz0KdGhpcy5wYXJzZUNvb3Jkcy5saW5lc3RyaW5nLmFwcGx5KHRoaXMsW2FbZF1dKX1jYXRjaChmKXt0aHJvdyBmO31iLnB1c2goYyl9cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5Lk11bHRpTGluZVN0cmluZyhiKX0scG9seWdvbjpmdW5jdGlvbihhKXtmb3IodmFyIGI9W10sYyxkLGU9MCxmPWEubGVuZ3RoO2U8ZjsrK2Upe3RyeXtkPXRoaXMucGFyc2VDb29yZHMubGluZXN0cmluZy5hcHBseSh0aGlzLFthW2VdXSl9Y2F0Y2goZyl7dGhyb3cgZzt9Yz1uZXcgT3BlbkxheWVycy5HZW9tZXRyeS5MaW5lYXJSaW5nKGQuY29tcG9uZW50cyk7Yi5wdXNoKGMpfXJldHVybiBuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2x5Z29uKGIpfSxtdWx0aXBvbHlnb246ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPVtdLGM9bnVsbCxkPTAsZT1hLmxlbmd0aDtkPGU7KytkKXt0cnl7Yz10aGlzLnBhcnNlQ29vcmRzLnBvbHlnb24uYXBwbHkodGhpcyxbYVtkXV0pfWNhdGNoKGYpe3Rocm93IGY7fWIucHVzaChjKX1yZXR1cm4gbmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuTXVsdGlQb2x5Z29uKGIpfSwKYm94OmZ1bmN0aW9uKGEpe2lmKDIhPWEubGVuZ3RoKXRocm93Ikdlb0pTT04gYm94IGNvb3JkaW5hdGVzIG11c3QgaGF2ZSAyIGVsZW1lbnRzIjtyZXR1cm4gbmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9seWdvbihbbmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuTGluZWFyUmluZyhbbmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoYVswXVswXSxhWzBdWzFdKSxuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludChhWzFdWzBdLGFbMF1bMV0pLG5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KGFbMV1bMF0sYVsxXVsxXSksbmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoYVswXVswXSxhWzFdWzFdKSxuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludChhWzBdWzBdLGFbMF1bMV0pXSldKX19LHdyaXRlOmZ1bmN0aW9uKGEsYil7dmFyIGM9e3R5cGU6bnVsbH07aWYoT3BlbkxheWVycy5VdGlsLmlzQXJyYXkoYSkpe2MudHlwZT0iRmVhdHVyZUNvbGxlY3Rpb24iO3ZhciBkPQphLmxlbmd0aDtjLmZlYXR1cmVzPUFycmF5KGQpO2Zvcih2YXIgZT0wO2U8ZDsrK2Upe3ZhciBmPWFbZV07aWYoIWYgaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLkZlYXR1cmUuVmVjdG9yKXRocm93IkZlYXR1cmVDb2xsZWN0aW9uIG9ubHkgc3VwcG9ydHMgY29sbGVjdGlvbnMgb2YgZmVhdHVyZXM6ICIrZjtjLmZlYXR1cmVzW2VdPXRoaXMuZXh0cmFjdC5mZWF0dXJlLmFwcGx5KHRoaXMsW2ZdKX19ZWxzZSAwPT1hLkNMQVNTX05BTUUuaW5kZXhPZigiT3BlbkxheWVycy5HZW9tZXRyeSIpP2M9dGhpcy5leHRyYWN0Lmdlb21ldHJ5LmFwcGx5KHRoaXMsW2FdKTphIGluc3RhbmNlb2YgT3BlbkxheWVycy5GZWF0dXJlLlZlY3RvciYmKGM9dGhpcy5leHRyYWN0LmZlYXR1cmUuYXBwbHkodGhpcyxbYV0pLGEubGF5ZXImJmEubGF5ZXIucHJvamVjdGlvbiYmKGMuY3JzPXRoaXMuY3JlYXRlQ1JTT2JqZWN0KGEpKSk7cmV0dXJuIE9wZW5MYXllcnMuRm9ybWF0LkpTT04ucHJvdG90eXBlLndyaXRlLmFwcGx5KHRoaXMsCltjLGJdKX0sY3JlYXRlQ1JTT2JqZWN0OmZ1bmN0aW9uKGEpe2E9YS5sYXllci5wcm9qZWN0aW9uLnRvU3RyaW5nKCk7dmFyIGI9e307YS5tYXRjaCgvZXBzZzovaSkmJihhPXBhcnNlSW50KGEuc3Vic3RyaW5nKGEuaW5kZXhPZigiOiIpKzEpKSxiPTQzMjY9PWE/e3R5cGU6Im5hbWUiLHByb3BlcnRpZXM6e25hbWU6InVybjpvZ2M6ZGVmOmNyczpPR0M6MS4zOkNSUzg0In19Ont0eXBlOiJuYW1lIixwcm9wZXJ0aWVzOntuYW1lOiJFUFNHOiIrYX19KTtyZXR1cm4gYn0sZXh0cmFjdDp7ZmVhdHVyZTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmV4dHJhY3QuZ2VvbWV0cnkuYXBwbHkodGhpcyxbYS5nZW9tZXRyeV0pLGI9e3R5cGU6IkZlYXR1cmUiLHByb3BlcnRpZXM6YS5hdHRyaWJ1dGVzLGdlb21ldHJ5OmJ9O251bGwhPWEuZmlkJiYoYi5pZD1hLmZpZCk7cmV0dXJuIGJ9LGdlb21ldHJ5OmZ1bmN0aW9uKGEpe2lmKG51bGw9PWEpcmV0dXJuIG51bGw7dGhpcy5pbnRlcm5hbFByb2plY3Rpb24mJgp0aGlzLmV4dGVybmFsUHJvamVjdGlvbiYmKGE9YS5jbG9uZSgpLGEudHJhbnNmb3JtKHRoaXMuaW50ZXJuYWxQcm9qZWN0aW9uLHRoaXMuZXh0ZXJuYWxQcm9qZWN0aW9uKSk7dmFyIGI9YS5DTEFTU19OQU1FLnNwbGl0KCIuIilbMl07YT10aGlzLmV4dHJhY3RbYi50b0xvd2VyQ2FzZSgpXS5hcHBseSh0aGlzLFthXSk7cmV0dXJuIkNvbGxlY3Rpb24iPT1iP3t0eXBlOiJHZW9tZXRyeUNvbGxlY3Rpb24iLGdlb21ldHJpZXM6YX06e3R5cGU6Yixjb29yZGluYXRlczphfX0scG9pbnQ6ZnVuY3Rpb24oYSl7cmV0dXJuW2EueCxhLnldfSxtdWx0aXBvaW50OmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1bXSxjPTAsZD1hLmNvbXBvbmVudHMubGVuZ3RoO2M8ZDsrK2MpYi5wdXNoKHRoaXMuZXh0cmFjdC5wb2ludC5hcHBseSh0aGlzLFthLmNvbXBvbmVudHNbY11dKSk7cmV0dXJuIGJ9LGxpbmVzdHJpbmc6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPVtdLGM9MCxkPWEuY29tcG9uZW50cy5sZW5ndGg7YzwKZDsrK2MpYi5wdXNoKHRoaXMuZXh0cmFjdC5wb2ludC5hcHBseSh0aGlzLFthLmNvbXBvbmVudHNbY11dKSk7cmV0dXJuIGJ9LG11bHRpbGluZXN0cmluZzpmdW5jdGlvbihhKXtmb3IodmFyIGI9W10sYz0wLGQ9YS5jb21wb25lbnRzLmxlbmd0aDtjPGQ7KytjKWIucHVzaCh0aGlzLmV4dHJhY3QubGluZXN0cmluZy5hcHBseSh0aGlzLFthLmNvbXBvbmVudHNbY11dKSk7cmV0dXJuIGJ9LHBvbHlnb246ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPVtdLGM9MCxkPWEuY29tcG9uZW50cy5sZW5ndGg7YzxkOysrYyliLnB1c2godGhpcy5leHRyYWN0LmxpbmVzdHJpbmcuYXBwbHkodGhpcyxbYS5jb21wb25lbnRzW2NdXSkpO3JldHVybiBifSxtdWx0aXBvbHlnb246ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPVtdLGM9MCxkPWEuY29tcG9uZW50cy5sZW5ndGg7YzxkOysrYyliLnB1c2godGhpcy5leHRyYWN0LnBvbHlnb24uYXBwbHkodGhpcyxbYS5jb21wb25lbnRzW2NdXSkpO3JldHVybiBifSxjb2xsZWN0aW9uOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0KYS5jb21wb25lbnRzLmxlbmd0aCxjPUFycmF5KGIpLGQ9MDtkPGI7KytkKWNbZF09dGhpcy5leHRyYWN0Lmdlb21ldHJ5LmFwcGx5KHRoaXMsW2EuY29tcG9uZW50c1tkXV0pO3JldHVybiBjfX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Gb3JtYXQuR2VvSlNPTiJ9KTtPcGVuTGF5ZXJzLkxheWVyLkdvb2dsZS52Mz17REVGQVVMVFM6e3NwaGVyaWNhbE1lcmNhdG9yOiEwLHByb2plY3Rpb246IkVQU0c6OTAwOTEzIn0sYW5pbWF0aW9uRW5hYmxlZDohMCxsb2FkTWFwT2JqZWN0OmZ1bmN0aW9uKCl7dGhpcy50eXBlfHwodGhpcy50eXBlPWdvb2dsZS5tYXBzLk1hcFR5cGVJZC5ST0FETUFQKTt2YXIgYSxiPU9wZW5MYXllcnMuTGF5ZXIuR29vZ2xlLmNhY2hlW3RoaXMubWFwLmlkXTtiPyhhPWIubWFwT2JqZWN0LCsrYi5jb3VudCk6KGE9dGhpcy5tYXAuZ2V0Q2VudGVyKCksYj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKSxiLmNsYXNzTmFtZT0ib2xGb3JlaWduQ29udGFpbmVyIixiLnN0eWxlLndpZHRoPSIxMDAlIixiLnN0eWxlLmhlaWdodD0iMTAwJSIsYT1uZXcgZ29vZ2xlLm1hcHMuTWFwKGIse2NlbnRlcjphP25ldyBnb29nbGUubWFwcy5MYXRMbmcoYS5sYXQsYS5sb24pOm5ldyBnb29nbGUubWFwcy5MYXRMbmcoMCwwKSx6b29tOnRoaXMubWFwLmdldFpvb20oKXx8CjAsbWFwVHlwZUlkOnRoaXMudHlwZSxkaXNhYmxlRGVmYXVsdFVJOiEwLGtleWJvYXJkU2hvcnRjdXRzOiExLGRyYWdnYWJsZTohMSxkaXNhYmxlRG91YmxlQ2xpY2tab29tOiEwLHNjcm9sbHdoZWVsOiExLHN0cmVldFZpZXdDb250cm9sOiExfSksYj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKSxiLnN0eWxlLndpZHRoPSIxMDAlIixiLnN0eWxlLmhlaWdodD0iMTAwJSIsYS5jb250cm9sc1tnb29nbGUubWFwcy5Db250cm9sUG9zaXRpb24uVE9QX0xFRlRdLnB1c2goYiksYj17Z29vZ2xlQ29udHJvbDpiLG1hcE9iamVjdDphLGNvdW50OjF9LE9wZW5MYXllcnMuTGF5ZXIuR29vZ2xlLmNhY2hlW3RoaXMubWFwLmlkXT1iKTt0aGlzLm1hcE9iamVjdD1hO3RoaXMuc2V0R01hcFZpc2liaWxpdHkodGhpcy52aXNpYmlsaXR5KX0sb25NYXBSZXNpemU6ZnVuY3Rpb24oKXt0aGlzLnZpc2liaWxpdHkmJmdvb2dsZS5tYXBzLmV2ZW50LnRyaWdnZXIodGhpcy5tYXBPYmplY3QsInJlc2l6ZSIpfSwKc2V0R01hcFZpc2liaWxpdHk6ZnVuY3Rpb24oYSl7dmFyIGI9T3BlbkxheWVycy5MYXllci5Hb29nbGUuY2FjaGVbdGhpcy5tYXAuaWRdLGM9dGhpcy5tYXA7aWYoYil7Zm9yKHZhciBkPXRoaXMudHlwZSxlPWMubGF5ZXJzLGYsZz1lLmxlbmd0aC0xOzA8PWc7LS1nKWlmKGY9ZVtnXSxmIGluc3RhbmNlb2YgT3BlbkxheWVycy5MYXllci5Hb29nbGUmJiEwPT09Zi52aXNpYmlsaXR5JiYhMD09PWYuaW5SYW5nZSl7ZD1mLnR5cGU7YT0hMDticmVha31lPXRoaXMubWFwT2JqZWN0LmdldERpdigpO2lmKCEwPT09YSl7aWYoZS5wYXJlbnROb2RlIT09Yy5kaXYpaWYoYi5yZW5kZXJlZCljLmRpdi5hcHBlbmRDaGlsZChlKSxiLmdvb2dsZUNvbnRyb2wuYXBwZW5kQ2hpbGQoYy52aWV3UG9ydERpdiksZ29vZ2xlLm1hcHMuZXZlbnQudHJpZ2dlcih0aGlzLm1hcE9iamVjdCwicmVzaXplIik7ZWxzZXt2YXIgaD10aGlzO2dvb2dsZS5tYXBzLmV2ZW50LmFkZExpc3RlbmVyT25jZSh0aGlzLm1hcE9iamVjdCwKInRpbGVzbG9hZGVkIixmdW5jdGlvbigpe2IucmVuZGVyZWQ9ITA7aC5zZXRHTWFwVmlzaWJpbGl0eShoLmdldFZpc2liaWxpdHkoKSk7aC5tb3ZlVG8oaC5tYXAuZ2V0Q2VudGVyKCkpfSl9dGhpcy5tYXBPYmplY3Quc2V0TWFwVHlwZUlkKGQpfWVsc2UgYi5nb29nbGVDb250cm9sLmhhc0NoaWxkTm9kZXMoKSYmKGMuZGl2LmFwcGVuZENoaWxkKGMudmlld1BvcnREaXYpLGMuZGl2LnJlbW92ZUNoaWxkKGUpKX19LGdldE1hcENvbnRhaW5lcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1hcE9iamVjdC5nZXREaXYoKX0sZ2V0TWFwT2JqZWN0Qm91bmRzRnJvbU9MQm91bmRzOmZ1bmN0aW9uKGEpe3ZhciBiPW51bGw7bnVsbCE9YSYmKGI9dGhpcy5zcGhlcmljYWxNZXJjYXRvcj90aGlzLmludmVyc2VNZXJjYXRvcihhLmJvdHRvbSxhLmxlZnQpOm5ldyBPcGVuTGF5ZXJzLkxvbkxhdChhLmJvdHRvbSxhLmxlZnQpLGE9dGhpcy5zcGhlcmljYWxNZXJjYXRvcj90aGlzLmludmVyc2VNZXJjYXRvcihhLnRvcCwKYS5yaWdodCk6bmV3IE9wZW5MYXllcnMuTG9uTGF0KGEudG9wLGEucmlnaHQpLGI9bmV3IGdvb2dsZS5tYXBzLkxhdExuZ0JvdW5kcyhuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nKGIubGF0LGIubG9uKSxuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nKGEubGF0LGEubG9uKSkpO3JldHVybiBifSxnZXRNYXBPYmplY3RMb25MYXRGcm9tTWFwT2JqZWN0UGl4ZWw6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5tYXAuZ2V0U2l6ZSgpLGM9dGhpcy5nZXRMb25naXR1ZGVGcm9tTWFwT2JqZWN0TG9uTGF0KHRoaXMubWFwT2JqZWN0LmNlbnRlciksZD10aGlzLmdldExhdGl0dWRlRnJvbU1hcE9iamVjdExvbkxhdCh0aGlzLm1hcE9iamVjdC5jZW50ZXIpLGU9dGhpcy5tYXAuZ2V0UmVzb2x1dGlvbigpO2E9bmV3IE9wZW5MYXllcnMuTG9uTGF0KGMrKGEueC1iLncvMikqZSxkLShhLnktYi5oLzIpKmUpO3RoaXMud3JhcERhdGVMaW5lJiYoYT1hLndyYXBEYXRlTGluZSh0aGlzLm1heEV4dGVudCkpO3JldHVybiB0aGlzLmdldE1hcE9iamVjdExvbkxhdEZyb21Mb25MYXQoYS5sb24sCmEubGF0KX0sZ2V0TWFwT2JqZWN0UGl4ZWxGcm9tTWFwT2JqZWN0TG9uTGF0OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZ2V0TG9uZ2l0dWRlRnJvbU1hcE9iamVjdExvbkxhdChhKTthPXRoaXMuZ2V0TGF0aXR1ZGVGcm9tTWFwT2JqZWN0TG9uTGF0KGEpO3ZhciBjPXRoaXMubWFwLmdldFJlc29sdXRpb24oKSxkPXRoaXMubWFwLmdldEV4dGVudCgpO3JldHVybiB0aGlzLmdldE1hcE9iamVjdFBpeGVsRnJvbVhZKDEvYyooYi1kLmxlZnQpLDEvYyooZC50b3AtYSkpfSxzZXRNYXBPYmplY3RDZW50ZXI6ZnVuY3Rpb24oYSxiKXtpZighMT09PXRoaXMuYW5pbWF0aW9uRW5hYmxlZCYmYiE9dGhpcy5tYXBPYmplY3Quem9vbSl7dmFyIGM9dGhpcy5nZXRNYXBDb250YWluZXIoKTtnb29nbGUubWFwcy5ldmVudC5hZGRMaXN0ZW5lck9uY2UodGhpcy5tYXBPYmplY3QsImlkbGUiLGZ1bmN0aW9uKCl7Yy5zdHlsZS52aXNpYmlsaXR5PSIifSk7Yy5zdHlsZS52aXNpYmlsaXR5PSJoaWRkZW4ifXRoaXMubWFwT2JqZWN0LnNldE9wdGlvbnMoe2NlbnRlcjphLAp6b29tOmJ9KX0sZ2V0TWFwT2JqZWN0Wm9vbUZyb21NYXBPYmplY3RCb3VuZHM6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMubWFwT2JqZWN0LmdldEJvdW5kc1pvb21MZXZlbChhKX0sZ2V0TWFwT2JqZWN0TG9uTGF0RnJvbUxvbkxhdDpmdW5jdGlvbihhLGIpe3ZhciBjO3RoaXMuc3BoZXJpY2FsTWVyY2F0b3I/KGM9dGhpcy5pbnZlcnNlTWVyY2F0b3IoYSxiKSxjPW5ldyBnb29nbGUubWFwcy5MYXRMbmcoYy5sYXQsYy5sb24pKTpjPW5ldyBnb29nbGUubWFwcy5MYXRMbmcoYixhKTtyZXR1cm4gY30sZ2V0TWFwT2JqZWN0UGl4ZWxGcm9tWFk6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbmV3IGdvb2dsZS5tYXBzLlBvaW50KGEsYil9fTtPcGVuTGF5ZXJzLlByb3h5SG9zdD0iIjtPcGVuTGF5ZXJzLlJlcXVlc3R8fChPcGVuTGF5ZXJzLlJlcXVlc3Q9e30pOwpPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKE9wZW5MYXllcnMuUmVxdWVzdCx7REVGQVVMVF9DT05GSUc6e21ldGhvZDoiR0VUIix1cmw6d2luZG93LmxvY2F0aW9uLmhyZWYsYXN5bmM6ITAsdXNlcjp2b2lkIDAscGFzc3dvcmQ6dm9pZCAwLHBhcmFtczpudWxsLHByb3h5Ok9wZW5MYXllcnMuUHJveHlIb3N0LGhlYWRlcnM6e30sZGF0YTpudWxsLGNhbGxiYWNrOmZ1bmN0aW9uKCl7fSxzdWNjZXNzOm51bGwsZmFpbHVyZTpudWxsLHNjb3BlOm51bGx9LFVSTF9TUExJVF9SRUdFWDovKFteOl0qOilcL1wvKFteOl0qOj9bXkBdKkApPyhbXjpcL1w/XSopOj8oW15cL1w/XSopLyxldmVudHM6bmV3IE9wZW5MYXllcnMuRXZlbnRzKHRoaXMpLG1ha2VTYW1lT3JpZ2luOmZ1bmN0aW9uKGEsYil7dmFyIGM9MCE9PWEuaW5kZXhPZigiaHR0cCIpLGQ9IWMmJmEubWF0Y2godGhpcy5VUkxfU1BMSVRfUkVHRVgpO2lmKGQpe3ZhciBlPXdpbmRvdy5sb2NhdGlvbixjPWRbMV09PWUucHJvdG9jb2wmJmRbM109PQplLmhvc3RuYW1lLGQ9ZFs0XSxlPWUucG9ydDtpZig4MCE9ZCYmIiIhPWR8fCI4MCIhPWUmJiIiIT1lKWM9YyYmZD09ZX1jfHxiJiYoYT0iZnVuY3Rpb24iPT10eXBlb2YgYj9iKGEpOmIrZW5jb2RlVVJJQ29tcG9uZW50KGEpKTtyZXR1cm4gYX0saXNzdWU6ZnVuY3Rpb24oYSl7dmFyIGI9T3BlbkxheWVycy5VdGlsLmV4dGVuZCh0aGlzLkRFRkFVTFRfQ09ORklHLHtwcm94eTpPcGVuTGF5ZXJzLlByb3h5SG9zdH0pO2E9YXx8e307YS5oZWFkZXJzPWEuaGVhZGVyc3x8e307YT1PcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyhhLGIpO2EuaGVhZGVycz1PcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyhhLmhlYWRlcnMsYi5oZWFkZXJzKTt2YXIgYj0hMSxjO2ZvcihjIGluIGEuaGVhZGVycylhLmhlYWRlcnMuaGFzT3duUHJvcGVydHkoYykmJiJ4LXJlcXVlc3RlZC13aXRoIj09PWMudG9Mb3dlckNhc2UoKSYmKGI9ITApOyExPT09YiYmKGEuaGVhZGVyc1siWC1SZXF1ZXN0ZWQtV2l0aCJdPQoiWE1MSHR0cFJlcXVlc3QiKTt2YXIgZD1uZXcgT3BlbkxheWVycy5SZXF1ZXN0LlhNTEh0dHBSZXF1ZXN0LGU9T3BlbkxheWVycy5VdGlsLnVybEFwcGVuZChhLnVybCxPcGVuTGF5ZXJzLlV0aWwuZ2V0UGFyYW1ldGVyU3RyaW5nKGEucGFyYW1zfHx7fSkpLGU9T3BlbkxheWVycy5SZXF1ZXN0Lm1ha2VTYW1lT3JpZ2luKGUsYS5wcm94eSk7ZC5vcGVuKGEubWV0aG9kLGUsYS5hc3luYyxhLnVzZXIsYS5wYXNzd29yZCk7Zm9yKHZhciBmIGluIGEuaGVhZGVycylkLnNldFJlcXVlc3RIZWFkZXIoZixhLmhlYWRlcnNbZl0pO3ZhciBnPXRoaXMuZXZlbnRzLGg9dGhpcztkLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpe2QucmVhZHlTdGF0ZT09T3BlbkxheWVycy5SZXF1ZXN0LlhNTEh0dHBSZXF1ZXN0LkRPTkUmJiExIT09Zy50cmlnZ2VyRXZlbnQoImNvbXBsZXRlIix7cmVxdWVzdDpkLGNvbmZpZzphLHJlcXVlc3RVcmw6ZX0pJiZoLnJ1bkNhbGxiYWNrcyh7cmVxdWVzdDpkLGNvbmZpZzphLApyZXF1ZXN0VXJsOmV9KX07ITE9PT1hLmFzeW5jP2Quc2VuZChhLmRhdGEpOndpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7MCE9PWQucmVhZHlTdGF0ZSYmZC5zZW5kKGEuZGF0YSl9LDApO3JldHVybiBkfSxydW5DYWxsYmFja3M6ZnVuY3Rpb24oYSl7dmFyIGI9YS5yZXF1ZXN0LGM9YS5jb25maWcsZD1jLnNjb3BlP09wZW5MYXllcnMuRnVuY3Rpb24uYmluZChjLmNhbGxiYWNrLGMuc2NvcGUpOmMuY2FsbGJhY2ssZTtjLnN1Y2Nlc3MmJihlPWMuc2NvcGU/T3BlbkxheWVycy5GdW5jdGlvbi5iaW5kKGMuc3VjY2VzcyxjLnNjb3BlKTpjLnN1Y2Nlc3MpO3ZhciBmO2MuZmFpbHVyZSYmKGY9Yy5zY29wZT9PcGVuTGF5ZXJzLkZ1bmN0aW9uLmJpbmQoYy5mYWlsdXJlLGMuc2NvcGUpOmMuZmFpbHVyZSk7ImZpbGU6Ij09T3BlbkxheWVycy5VdGlsLmNyZWF0ZVVybE9iamVjdChjLnVybCkucHJvdG9jb2wmJmIucmVzcG9uc2VUZXh0JiYoYi5zdGF0dXM9MjAwKTtkKGIpO2lmKCFiLnN0YXR1c3x8CjIwMDw9Yi5zdGF0dXMmJjMwMD5iLnN0YXR1cyl0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoInN1Y2Nlc3MiLGEpLGUmJmUoYik7Yi5zdGF0dXMmJigyMDA+Yi5zdGF0dXN8fDMwMDw9Yi5zdGF0dXMpJiYodGhpcy5ldmVudHMudHJpZ2dlckV2ZW50KCJmYWlsdXJlIixhKSxmJiZmKGIpKX0sR0VUOmZ1bmN0aW9uKGEpe2E9T3BlbkxheWVycy5VdGlsLmV4dGVuZChhLHttZXRob2Q6IkdFVCJ9KTtyZXR1cm4gT3BlbkxheWVycy5SZXF1ZXN0Lmlzc3VlKGEpfSxQT1NUOmZ1bmN0aW9uKGEpe2E9T3BlbkxheWVycy5VdGlsLmV4dGVuZChhLHttZXRob2Q6IlBPU1QifSk7YS5oZWFkZXJzPWEuaGVhZGVycz9hLmhlYWRlcnM6e307IkNPTlRFTlQtVFlQRSJpbiBPcGVuTGF5ZXJzLlV0aWwudXBwZXJDYXNlT2JqZWN0KGEuaGVhZGVycyl8fChhLmhlYWRlcnNbIkNvbnRlbnQtVHlwZSJdPSJhcHBsaWNhdGlvbi94bWwiKTtyZXR1cm4gT3BlbkxheWVycy5SZXF1ZXN0Lmlzc3VlKGEpfSxQVVQ6ZnVuY3Rpb24oYSl7YT0KT3BlbkxheWVycy5VdGlsLmV4dGVuZChhLHttZXRob2Q6IlBVVCJ9KTthLmhlYWRlcnM9YS5oZWFkZXJzP2EuaGVhZGVyczp7fTsiQ09OVEVOVC1UWVBFImluIE9wZW5MYXllcnMuVXRpbC51cHBlckNhc2VPYmplY3QoYS5oZWFkZXJzKXx8KGEuaGVhZGVyc1siQ29udGVudC1UeXBlIl09ImFwcGxpY2F0aW9uL3htbCIpO3JldHVybiBPcGVuTGF5ZXJzLlJlcXVlc3QuaXNzdWUoYSl9LERFTEVURTpmdW5jdGlvbihhKXthPU9wZW5MYXllcnMuVXRpbC5leHRlbmQoYSx7bWV0aG9kOiJERUxFVEUifSk7cmV0dXJuIE9wZW5MYXllcnMuUmVxdWVzdC5pc3N1ZShhKX0sSEVBRDpmdW5jdGlvbihhKXthPU9wZW5MYXllcnMuVXRpbC5leHRlbmQoYSx7bWV0aG9kOiJIRUFEIn0pO3JldHVybiBPcGVuTGF5ZXJzLlJlcXVlc3QuaXNzdWUoYSl9LE9QVElPTlM6ZnVuY3Rpb24oYSl7YT1PcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKGEse21ldGhvZDoiT1BUSU9OUyJ9KTtyZXR1cm4gT3BlbkxheWVycy5SZXF1ZXN0Lmlzc3VlKGEpfX0pOyhmdW5jdGlvbigpe2Z1bmN0aW9uIGEoKXt0aGlzLl9vYmplY3Q9ZiYmIWs/bmV3IGY6bmV3IHdpbmRvdy5BY3RpdmVYT2JqZWN0KCJNaWNyb3NvZnQuWE1MSFRUUCIpO3RoaXMuX2xpc3RlbmVycz1bXX1mdW5jdGlvbiBiKCl7cmV0dXJuIG5ldyBhfWZ1bmN0aW9uIGMoYSl7Yi5vbnJlYWR5c3RhdGVjaGFuZ2UmJmIub25yZWFkeXN0YXRlY2hhbmdlLmFwcGx5KGEpO2EuZGlzcGF0Y2hFdmVudCh7dHlwZToicmVhZHlzdGF0ZWNoYW5nZSIsYnViYmxlczohMSxjYW5jZWxhYmxlOiExLHRpbWVTdGFtcDpuZXcgRGF0ZSswfSl9ZnVuY3Rpb24gZChhKXt0cnl7YS5yZXNwb25zZVRleHQ9YS5fb2JqZWN0LnJlc3BvbnNlVGV4dH1jYXRjaChiKXt9dHJ5e3ZhciBjO3ZhciBkPWEuX29iamVjdCxlPWQucmVzcG9uc2VYTUwsZj1kLnJlc3BvbnNlVGV4dDtoJiYoZiYmZSYmIWUuZG9jdW1lbnRFbGVtZW50JiZkLmdldFJlc3BvbnNlSGVhZGVyKCJDb250ZW50LVR5cGUiKS5tYXRjaCgvW15cL10rXC9bXlwrXStcK3htbC8pKSYmCihlPW5ldyB3aW5kb3cuQWN0aXZlWE9iamVjdCgiTWljcm9zb2Z0LlhNTERPTSIpLGUuYXN5bmM9ITEsZS52YWxpZGF0ZU9uUGFyc2U9ITEsZS5sb2FkWE1MKGYpKTtjPWUmJihoJiYwIT1lLnBhcnNlRXJyb3J8fCFlLmRvY3VtZW50RWxlbWVudHx8ZS5kb2N1bWVudEVsZW1lbnQmJiJwYXJzZXJlcnJvciI9PWUuZG9jdW1lbnRFbGVtZW50LnRhZ05hbWUpP251bGw6ZTthLnJlc3BvbnNlWE1MPWN9Y2F0Y2goZyl7fXRyeXthLnN0YXR1cz1hLl9vYmplY3Quc3RhdHVzfWNhdGNoKGspe310cnl7YS5zdGF0dXNUZXh0PWEuX29iamVjdC5zdGF0dXNUZXh0fWNhdGNoKHUpe319ZnVuY3Rpb24gZShhKXthLl9vYmplY3Qub25yZWFkeXN0YXRlY2hhbmdlPW5ldyB3aW5kb3cuRnVuY3Rpb259dmFyIGY9d2luZG93LlhNTEh0dHBSZXF1ZXN0LGc9ISF3aW5kb3cuY29udHJvbGxlcnMsaD13aW5kb3cuZG9jdW1lbnQuYWxsJiYhd2luZG93Lm9wZXJhLGs9aCYmd2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL01TSUUgNy4wLyk7CmIucHJvdG90eXBlPWEucHJvdG90eXBlO2cmJmYud3JhcHBlZCYmKGIud3JhcHBlZD1mLndyYXBwZWQpO2IuVU5TRU5UPTA7Yi5PUEVORUQ9MTtiLkhFQURFUlNfUkVDRUlWRUQ9MjtiLkxPQURJTkc9MztiLkRPTkU9NDtiLnByb3RvdHlwZS5yZWFkeVN0YXRlPWIuVU5TRU5UO2IucHJvdG90eXBlLnJlc3BvbnNlVGV4dD0iIjtiLnByb3RvdHlwZS5yZXNwb25zZVhNTD1udWxsO2IucHJvdG90eXBlLnN0YXR1cz0wO2IucHJvdG90eXBlLnN0YXR1c1RleHQ9IiI7Yi5wcm90b3R5cGUucHJpb3JpdHk9Ik5PUk1BTCI7Yi5wcm90b3R5cGUub25yZWFkeXN0YXRlY2hhbmdlPW51bGw7Yi5vbnJlYWR5c3RhdGVjaGFuZ2U9bnVsbDtiLm9ub3Blbj1udWxsO2Iub25zZW5kPW51bGw7Yi5vbmFib3J0PW51bGw7Yi5wcm90b3R5cGUub3Blbj1mdW5jdGlvbihhLGYsayxwLG4pe2RlbGV0ZSB0aGlzLl9oZWFkZXJzOzM+YXJndW1lbnRzLmxlbmd0aCYmKGs9ITApO3RoaXMuX2FzeW5jPWs7dmFyIHE9dGhpcywKcz10aGlzLnJlYWR5U3RhdGUsdDtoJiZrJiYodD1mdW5jdGlvbigpe3MhPWIuRE9ORSYmKGUocSkscS5hYm9ydCgpKX0sd2luZG93LmF0dGFjaEV2ZW50KCJvbnVubG9hZCIsdCkpO2Iub25vcGVuJiZiLm9ub3Blbi5hcHBseSh0aGlzLGFyZ3VtZW50cyk7NDxhcmd1bWVudHMubGVuZ3RoP3RoaXMuX29iamVjdC5vcGVuKGEsZixrLHAsbik6Mzxhcmd1bWVudHMubGVuZ3RoP3RoaXMuX29iamVjdC5vcGVuKGEsZixrLHApOnRoaXMuX29iamVjdC5vcGVuKGEsZixrKTt0aGlzLnJlYWR5U3RhdGU9Yi5PUEVORUQ7Yyh0aGlzKTt0aGlzLl9vYmplY3Qub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7aWYoIWd8fGspcS5yZWFkeVN0YXRlPXEuX29iamVjdC5yZWFkeVN0YXRlLGQocSkscS5fYWJvcnRlZD9xLnJlYWR5U3RhdGU9Yi5VTlNFTlQ6KHEucmVhZHlTdGF0ZT09Yi5ET05FJiYoZGVsZXRlIHEuX2RhdGEsZShxKSxoJiZrJiZ3aW5kb3cuZGV0YWNoRXZlbnQoIm9udW5sb2FkIix0KSksCnMhPXEucmVhZHlTdGF0ZSYmYyhxKSxzPXEucmVhZHlTdGF0ZSl9fTtiLnByb3RvdHlwZS5zZW5kPWZ1bmN0aW9uKGEpe2Iub25zZW5kJiZiLm9uc2VuZC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7YXJndW1lbnRzLmxlbmd0aHx8KGE9bnVsbCk7YSYmYS5ub2RlVHlwZSYmKGE9d2luZG93LlhNTFNlcmlhbGl6ZXI/KG5ldyB3aW5kb3cuWE1MU2VyaWFsaXplcikuc2VyaWFsaXplVG9TdHJpbmcoYSk6YS54bWwsdGhpcy5faGVhZGVyc1siQ29udGVudC1UeXBlIl18fHRoaXMuX29iamVjdC5zZXRSZXF1ZXN0SGVhZGVyKCJDb250ZW50LVR5cGUiLCJhcHBsaWNhdGlvbi94bWwiKSk7dGhpcy5fZGF0YT1hO2E6aWYodGhpcy5fb2JqZWN0LnNlbmQodGhpcy5fZGF0YSksZyYmIXRoaXMuX2FzeW5jKWZvcih0aGlzLnJlYWR5U3RhdGU9Yi5PUEVORUQsZCh0aGlzKTt0aGlzLnJlYWR5U3RhdGU8Yi5ET05FOylpZih0aGlzLnJlYWR5U3RhdGUrKyxjKHRoaXMpLHRoaXMuX2Fib3J0ZWQpYnJlYWsgYX07CmIucHJvdG90eXBlLmFib3J0PWZ1bmN0aW9uKCl7Yi5vbmFib3J0JiZiLm9uYWJvcnQuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMucmVhZHlTdGF0ZT5iLlVOU0VOVCYmKHRoaXMuX2Fib3J0ZWQ9ITApO3RoaXMuX29iamVjdC5hYm9ydCgpO2UodGhpcyk7dGhpcy5yZWFkeVN0YXRlPWIuVU5TRU5UO2RlbGV0ZSB0aGlzLl9kYXRhfTtiLnByb3RvdHlwZS5nZXRBbGxSZXNwb25zZUhlYWRlcnM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb2JqZWN0LmdldEFsbFJlc3BvbnNlSGVhZGVycygpfTtiLnByb3RvdHlwZS5nZXRSZXNwb25zZUhlYWRlcj1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5fb2JqZWN0LmdldFJlc3BvbnNlSGVhZGVyKGEpfTtiLnByb3RvdHlwZS5zZXRSZXF1ZXN0SGVhZGVyPWZ1bmN0aW9uKGEsYil7dGhpcy5faGVhZGVyc3x8KHRoaXMuX2hlYWRlcnM9e30pO3RoaXMuX2hlYWRlcnNbYV09YjtyZXR1cm4gdGhpcy5fb2JqZWN0LnNldFJlcXVlc3RIZWFkZXIoYSxiKX07CmIucHJvdG90eXBlLmFkZEV2ZW50TGlzdGVuZXI9ZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZD0wLGU7ZT10aGlzLl9saXN0ZW5lcnNbZF07ZCsrKWlmKGVbMF09PWEmJmVbMV09PWImJmVbMl09PWMpcmV0dXJuO3RoaXMuX2xpc3RlbmVycy5wdXNoKFthLGIsY10pfTtiLnByb3RvdHlwZS5yZW1vdmVFdmVudExpc3RlbmVyPWZ1bmN0aW9uKGEsYixjKXtmb3IodmFyIGQ9MCxlOyhlPXRoaXMuX2xpc3RlbmVyc1tkXSkmJihlWzBdIT1hfHxlWzFdIT1ifHxlWzJdIT1jKTtkKyspO2UmJnRoaXMuX2xpc3RlbmVycy5zcGxpY2UoZCwxKX07Yi5wcm90b3R5cGUuZGlzcGF0Y2hFdmVudD1mdW5jdGlvbihhKXthPXt0eXBlOmEudHlwZSx0YXJnZXQ6dGhpcyxjdXJyZW50VGFyZ2V0OnRoaXMsZXZlbnRQaGFzZToyLGJ1YmJsZXM6YS5idWJibGVzLGNhbmNlbGFibGU6YS5jYW5jZWxhYmxlLHRpbWVTdGFtcDphLnRpbWVTdGFtcCxzdG9wUHJvcGFnYXRpb246ZnVuY3Rpb24oKXt9LHByZXZlbnREZWZhdWx0OmZ1bmN0aW9uKCl7fSwKaW5pdEV2ZW50OmZ1bmN0aW9uKCl7fX07InJlYWR5c3RhdGVjaGFuZ2UiPT1hLnR5cGUmJnRoaXMub25yZWFkeXN0YXRlY2hhbmdlJiYodGhpcy5vbnJlYWR5c3RhdGVjaGFuZ2UuaGFuZGxlRXZlbnR8fHRoaXMub25yZWFkeXN0YXRlY2hhbmdlKS5hcHBseSh0aGlzLFthXSk7Zm9yKHZhciBiPTAsYztjPXRoaXMuX2xpc3RlbmVyc1tiXTtiKyspY1swXSE9YS50eXBlfHxjWzJdfHwoY1sxXS5oYW5kbGVFdmVudHx8Y1sxXSkuYXBwbHkodGhpcyxbYV0pfTtiLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiJbb2JqZWN0IFhNTEh0dHBSZXF1ZXN0XSJ9O2IudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4iW1hNTEh0dHBSZXF1ZXN0XSJ9O3dpbmRvdy5GdW5jdGlvbi5wcm90b3R5cGUuYXBwbHl8fCh3aW5kb3cuRnVuY3Rpb24ucHJvdG90eXBlLmFwcGx5PWZ1bmN0aW9uKGEsYil7Ynx8KGI9W10pO2EuX19mdW5jPXRoaXM7YS5fX2Z1bmMoYlswXSxiWzFdLGJbMl0sYlszXSwKYls0XSk7ZGVsZXRlIGEuX19mdW5jfSk7T3BlbkxheWVycy5SZXF1ZXN0fHwoT3BlbkxheWVycy5SZXF1ZXN0PXt9KTtPcGVuTGF5ZXJzLlJlcXVlc3QuWE1MSHR0cFJlcXVlc3Q9Yn0pKCk7T3BlbkxheWVycy5GaWx0ZXIuQ29tcGFyaXNvbj1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuRmlsdGVyLHt0eXBlOm51bGwscHJvcGVydHk6bnVsbCx2YWx1ZTpudWxsLG1hdGNoQ2FzZTohMCxsb3dlckJvdW5kYXJ5Om51bGwsdXBwZXJCb3VuZGFyeTpudWxsLGluaXRpYWxpemU6ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5GaWx0ZXIucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxbYV0pO3RoaXMudHlwZT09PU9wZW5MYXllcnMuRmlsdGVyLkNvbXBhcmlzb24uTElLRSYmdm9pZCAwPT09YS5tYXRjaENhc2UmJih0aGlzLm1hdGNoQ2FzZT1udWxsKX0sZXZhbHVhdGU6ZnVuY3Rpb24oYSl7YSBpbnN0YW5jZW9mIE9wZW5MYXllcnMuRmVhdHVyZS5WZWN0b3ImJihhPWEuYXR0cmlidXRlcyk7dmFyIGI9ITE7YT1hW3RoaXMucHJvcGVydHldO3N3aXRjaCh0aGlzLnR5cGUpe2Nhc2UgT3BlbkxheWVycy5GaWx0ZXIuQ29tcGFyaXNvbi5FUVVBTF9UTzpiPXRoaXMudmFsdWU7CmI9dGhpcy5tYXRjaENhc2V8fCJzdHJpbmciIT10eXBlb2YgYXx8InN0cmluZyIhPXR5cGVvZiBiP2E9PWI6YS50b1VwcGVyQ2FzZSgpPT1iLnRvVXBwZXJDYXNlKCk7YnJlYWs7Y2FzZSBPcGVuTGF5ZXJzLkZpbHRlci5Db21wYXJpc29uLk5PVF9FUVVBTF9UTzpiPXRoaXMudmFsdWU7Yj10aGlzLm1hdGNoQ2FzZXx8InN0cmluZyIhPXR5cGVvZiBhfHwic3RyaW5nIiE9dHlwZW9mIGI/YSE9YjphLnRvVXBwZXJDYXNlKCkhPWIudG9VcHBlckNhc2UoKTticmVhaztjYXNlIE9wZW5MYXllcnMuRmlsdGVyLkNvbXBhcmlzb24uTEVTU19USEFOOmI9YTx0aGlzLnZhbHVlO2JyZWFrO2Nhc2UgT3BlbkxheWVycy5GaWx0ZXIuQ29tcGFyaXNvbi5HUkVBVEVSX1RIQU46Yj1hPnRoaXMudmFsdWU7YnJlYWs7Y2FzZSBPcGVuTGF5ZXJzLkZpbHRlci5Db21wYXJpc29uLkxFU1NfVEhBTl9PUl9FUVVBTF9UTzpiPWE8PXRoaXMudmFsdWU7YnJlYWs7Y2FzZSBPcGVuTGF5ZXJzLkZpbHRlci5Db21wYXJpc29uLkdSRUFURVJfVEhBTl9PUl9FUVVBTF9UTzpiPQphPj10aGlzLnZhbHVlO2JyZWFrO2Nhc2UgT3BlbkxheWVycy5GaWx0ZXIuQ29tcGFyaXNvbi5CRVRXRUVOOmI9YT49dGhpcy5sb3dlckJvdW5kYXJ5JiZhPD10aGlzLnVwcGVyQm91bmRhcnk7YnJlYWs7Y2FzZSBPcGVuTGF5ZXJzLkZpbHRlci5Db21wYXJpc29uLkxJS0U6Yj1SZWdFeHAodGhpcy52YWx1ZSwiZ2kiKS50ZXN0KGEpO2JyZWFrO2Nhc2UgT3BlbkxheWVycy5GaWx0ZXIuQ29tcGFyaXNvbi5JU19OVUxMOmI9bnVsbD09PWF9cmV0dXJuIGJ9LHZhbHVlMnJlZ2V4OmZ1bmN0aW9uKGEsYixjKXtpZigiLiI9PWEpdGhyb3cgRXJyb3IoIicuJyBpcyBhbiB1bnN1cHBvcnRlZCB3aWxkQ2FyZCBjaGFyYWN0ZXIgZm9yIE9wZW5MYXllcnMuRmlsdGVyLkNvbXBhcmlzb24iKTthPWE/YToiKiI7Yj1iP2I6Ii4iO3RoaXMudmFsdWU9dGhpcy52YWx1ZS5yZXBsYWNlKFJlZ0V4cCgiXFwiKyhjP2M6IiEiKSsiKC58JCkiLCJnIiksIlxcJDEiKTt0aGlzLnZhbHVlPXRoaXMudmFsdWUucmVwbGFjZShSZWdFeHAoIlxcIisKYiwiZyIpLCIuIik7dGhpcy52YWx1ZT10aGlzLnZhbHVlLnJlcGxhY2UoUmVnRXhwKCJcXCIrYSwiZyIpLCIuKiIpO3RoaXMudmFsdWU9dGhpcy52YWx1ZS5yZXBsYWNlKFJlZ0V4cCgiXFxcXC5cXCoiLCJnIiksIlxcIithKTtyZXR1cm4gdGhpcy52YWx1ZT10aGlzLnZhbHVlLnJlcGxhY2UoUmVnRXhwKCJcXFxcXFwuIiwiZyIpLCJcXCIrYil9LHJlZ2V4MnZhbHVlOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy52YWx1ZSxhPWEucmVwbGFjZSgvIS9nLCIhISIpLGE9YS5yZXBsYWNlKC8oXFwpP1xcXC4vZyxmdW5jdGlvbihhLGMpe3JldHVybiBjP2E6IiEuIn0pLGE9YS5yZXBsYWNlKC8oXFwpP1xcXCovZyxmdW5jdGlvbihhLGMpe3JldHVybiBjP2E6IiEqIn0pLGE9YS5yZXBsYWNlKC9cXFxcL2csIlxcIik7cmV0dXJuIGE9YS5yZXBsYWNlKC9cLlwqL2csIioiKX0sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gT3BlbkxheWVycy5VdGlsLmV4dGVuZChuZXcgT3BlbkxheWVycy5GaWx0ZXIuQ29tcGFyaXNvbiwKdGhpcyl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuRmlsdGVyLkNvbXBhcmlzb24ifSk7T3BlbkxheWVycy5GaWx0ZXIuQ29tcGFyaXNvbi5FUVVBTF9UTz0iPT0iO09wZW5MYXllcnMuRmlsdGVyLkNvbXBhcmlzb24uTk9UX0VRVUFMX1RPPSIhPSI7T3BlbkxheWVycy5GaWx0ZXIuQ29tcGFyaXNvbi5MRVNTX1RIQU49IjwiO09wZW5MYXllcnMuRmlsdGVyLkNvbXBhcmlzb24uR1JFQVRFUl9USEFOPSI+IjtPcGVuTGF5ZXJzLkZpbHRlci5Db21wYXJpc29uLkxFU1NfVEhBTl9PUl9FUVVBTF9UTz0iPD0iO09wZW5MYXllcnMuRmlsdGVyLkNvbXBhcmlzb24uR1JFQVRFUl9USEFOX09SX0VRVUFMX1RPPSI+PSI7T3BlbkxheWVycy5GaWx0ZXIuQ29tcGFyaXNvbi5CRVRXRUVOPSIuLiI7T3BlbkxheWVycy5GaWx0ZXIuQ29tcGFyaXNvbi5MSUtFPSJ+IjtPcGVuTGF5ZXJzLkZpbHRlci5Db21wYXJpc29uLklTX05VTEw9Ik5VTEwiO09wZW5MYXllcnMuUG9wdXAuRnJhbWVkQ2xvdWQ9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLlBvcHVwLkZyYW1lZCx7Y29udGVudERpc3BsYXlDbGFzczoib2xGcmFtZWRDbG91ZFBvcHVwQ29udGVudCIsYXV0b1NpemU6ITAscGFuTWFwSWZPdXRPZlZpZXc6ITAsaW1hZ2VTaXplOm5ldyBPcGVuTGF5ZXJzLlNpemUoMTI3Niw3MzYpLGlzQWxwaGFJbWFnZTohMSxmaXhlZFJlbGF0aXZlUG9zaXRpb246ITEscG9zaXRpb25CbG9ja3M6e3RsOntvZmZzZXQ6bmV3IE9wZW5MYXllcnMuUGl4ZWwoNDQsMCkscGFkZGluZzpuZXcgT3BlbkxheWVycy5Cb3VuZHMoOCw0MCw4LDkpLGJsb2Nrczpbe3NpemU6bmV3IE9wZW5MYXllcnMuU2l6ZSgiYXV0byIsImF1dG8iKSxhbmNob3I6bmV3IE9wZW5MYXllcnMuQm91bmRzKDAsNTEsMjIsMCkscG9zaXRpb246bmV3IE9wZW5MYXllcnMuUGl4ZWwoMCwwKX0se3NpemU6bmV3IE9wZW5MYXllcnMuU2l6ZSgyMiwiYXV0byIpLGFuY2hvcjpuZXcgT3BlbkxheWVycy5Cb3VuZHMobnVsbCwKNTAsMCwwKSxwb3NpdGlvbjpuZXcgT3BlbkxheWVycy5QaXhlbCgtMTIzOCwwKX0se3NpemU6bmV3IE9wZW5MYXllcnMuU2l6ZSgiYXV0byIsMTkpLGFuY2hvcjpuZXcgT3BlbkxheWVycy5Cb3VuZHMoMCwzMiwyMixudWxsKSxwb3NpdGlvbjpuZXcgT3BlbkxheWVycy5QaXhlbCgwLC02MzEpfSx7c2l6ZTpuZXcgT3BlbkxheWVycy5TaXplKDIyLDE4KSxhbmNob3I6bmV3IE9wZW5MYXllcnMuQm91bmRzKG51bGwsMzIsMCxudWxsKSxwb3NpdGlvbjpuZXcgT3BlbkxheWVycy5QaXhlbCgtMTIzOCwtNjMyKX0se3NpemU6bmV3IE9wZW5MYXllcnMuU2l6ZSg4MSwzNSksYW5jaG9yOm5ldyBPcGVuTGF5ZXJzLkJvdW5kcyhudWxsLDAsMCxudWxsKSxwb3NpdGlvbjpuZXcgT3BlbkxheWVycy5QaXhlbCgwLC02ODgpfV19LHRyOntvZmZzZXQ6bmV3IE9wZW5MYXllcnMuUGl4ZWwoLTQ1LDApLHBhZGRpbmc6bmV3IE9wZW5MYXllcnMuQm91bmRzKDgsNDAsOCw5KSxibG9ja3M6W3tzaXplOm5ldyBPcGVuTGF5ZXJzLlNpemUoImF1dG8iLAoiYXV0byIpLGFuY2hvcjpuZXcgT3BlbkxheWVycy5Cb3VuZHMoMCw1MSwyMiwwKSxwb3NpdGlvbjpuZXcgT3BlbkxheWVycy5QaXhlbCgwLDApfSx7c2l6ZTpuZXcgT3BlbkxheWVycy5TaXplKDIyLCJhdXRvIiksYW5jaG9yOm5ldyBPcGVuTGF5ZXJzLkJvdW5kcyhudWxsLDUwLDAsMCkscG9zaXRpb246bmV3IE9wZW5MYXllcnMuUGl4ZWwoLTEyMzgsMCl9LHtzaXplOm5ldyBPcGVuTGF5ZXJzLlNpemUoImF1dG8iLDE5KSxhbmNob3I6bmV3IE9wZW5MYXllcnMuQm91bmRzKDAsMzIsMjIsbnVsbCkscG9zaXRpb246bmV3IE9wZW5MYXllcnMuUGl4ZWwoMCwtNjMxKX0se3NpemU6bmV3IE9wZW5MYXllcnMuU2l6ZSgyMiwxOSksYW5jaG9yOm5ldyBPcGVuTGF5ZXJzLkJvdW5kcyhudWxsLDMyLDAsbnVsbCkscG9zaXRpb246bmV3IE9wZW5MYXllcnMuUGl4ZWwoLTEyMzgsLTYzMSl9LHtzaXplOm5ldyBPcGVuTGF5ZXJzLlNpemUoODEsMzUpLGFuY2hvcjpuZXcgT3BlbkxheWVycy5Cb3VuZHMoMCwKMCxudWxsLG51bGwpLHBvc2l0aW9uOm5ldyBPcGVuTGF5ZXJzLlBpeGVsKC0yMTUsLTY4Nyl9XX0sYmw6e29mZnNldDpuZXcgT3BlbkxheWVycy5QaXhlbCg0NSwwKSxwYWRkaW5nOm5ldyBPcGVuTGF5ZXJzLkJvdW5kcyg4LDksOCw0MCksYmxvY2tzOlt7c2l6ZTpuZXcgT3BlbkxheWVycy5TaXplKCJhdXRvIiwiYXV0byIpLGFuY2hvcjpuZXcgT3BlbkxheWVycy5Cb3VuZHMoMCwyMSwyMiwzMikscG9zaXRpb246bmV3IE9wZW5MYXllcnMuUGl4ZWwoMCwwKX0se3NpemU6bmV3IE9wZW5MYXllcnMuU2l6ZSgyMiwiYXV0byIpLGFuY2hvcjpuZXcgT3BlbkxheWVycy5Cb3VuZHMobnVsbCwyMSwwLDMyKSxwb3NpdGlvbjpuZXcgT3BlbkxheWVycy5QaXhlbCgtMTIzOCwwKX0se3NpemU6bmV3IE9wZW5MYXllcnMuU2l6ZSgiYXV0byIsMjEpLGFuY2hvcjpuZXcgT3BlbkxheWVycy5Cb3VuZHMoMCwwLDIyLG51bGwpLHBvc2l0aW9uOm5ldyBPcGVuTGF5ZXJzLlBpeGVsKDAsLTYyOSl9LHtzaXplOm5ldyBPcGVuTGF5ZXJzLlNpemUoMjIsCjIxKSxhbmNob3I6bmV3IE9wZW5MYXllcnMuQm91bmRzKG51bGwsMCwwLG51bGwpLHBvc2l0aW9uOm5ldyBPcGVuTGF5ZXJzLlBpeGVsKC0xMjM4LC02MjkpfSx7c2l6ZTpuZXcgT3BlbkxheWVycy5TaXplKDgxLDMzKSxhbmNob3I6bmV3IE9wZW5MYXllcnMuQm91bmRzKG51bGwsbnVsbCwwLDApLHBvc2l0aW9uOm5ldyBPcGVuTGF5ZXJzLlBpeGVsKC0xMDEsLTY3NCl9XX0sYnI6e29mZnNldDpuZXcgT3BlbkxheWVycy5QaXhlbCgtNDQsMCkscGFkZGluZzpuZXcgT3BlbkxheWVycy5Cb3VuZHMoOCw5LDgsNDApLGJsb2Nrczpbe3NpemU6bmV3IE9wZW5MYXllcnMuU2l6ZSgiYXV0byIsImF1dG8iKSxhbmNob3I6bmV3IE9wZW5MYXllcnMuQm91bmRzKDAsMjEsMjIsMzIpLHBvc2l0aW9uOm5ldyBPcGVuTGF5ZXJzLlBpeGVsKDAsMCl9LHtzaXplOm5ldyBPcGVuTGF5ZXJzLlNpemUoMjIsImF1dG8iKSxhbmNob3I6bmV3IE9wZW5MYXllcnMuQm91bmRzKG51bGwsMjEsMCwzMikscG9zaXRpb246bmV3IE9wZW5MYXllcnMuUGl4ZWwoLTEyMzgsCjApfSx7c2l6ZTpuZXcgT3BlbkxheWVycy5TaXplKCJhdXRvIiwyMSksYW5jaG9yOm5ldyBPcGVuTGF5ZXJzLkJvdW5kcygwLDAsMjIsbnVsbCkscG9zaXRpb246bmV3IE9wZW5MYXllcnMuUGl4ZWwoMCwtNjI5KX0se3NpemU6bmV3IE9wZW5MYXllcnMuU2l6ZSgyMiwyMSksYW5jaG9yOm5ldyBPcGVuTGF5ZXJzLkJvdW5kcyhudWxsLDAsMCxudWxsKSxwb3NpdGlvbjpuZXcgT3BlbkxheWVycy5QaXhlbCgtMTIzOCwtNjI5KX0se3NpemU6bmV3IE9wZW5MYXllcnMuU2l6ZSg4MSwzMyksYW5jaG9yOm5ldyBPcGVuTGF5ZXJzLkJvdW5kcygwLG51bGwsbnVsbCwwKSxwb3NpdGlvbjpuZXcgT3BlbkxheWVycy5QaXhlbCgtMzExLC02NzQpfV19fSxtaW5TaXplOm5ldyBPcGVuTGF5ZXJzLlNpemUoMTA1LDEwKSxtYXhTaXplOm5ldyBPcGVuTGF5ZXJzLlNpemUoMTIwMCw2NjApLGluaXRpYWxpemU6ZnVuY3Rpb24oYSxiLGMsZCxlLGYsZyl7dGhpcy5pbWFnZVNyYz1PcGVuTGF5ZXJzLlV0aWwuZ2V0SW1hZ2VMb2NhdGlvbigiY2xvdWQtcG9wdXAtcmVsYXRpdmUucG5nIik7Ck9wZW5MYXllcnMuUG9wdXAuRnJhbWVkLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLmNvbnRlbnREaXYuY2xhc3NOYW1lPXRoaXMuY29udGVudERpc3BsYXlDbGFzc30sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Qb3B1cC5GcmFtZWRDbG91ZCJ9KTtPcGVuTGF5ZXJzLlJ1bGU9T3BlbkxheWVycy5DbGFzcyh7aWQ6bnVsbCxuYW1lOm51bGwsdGl0bGU6bnVsbCxkZXNjcmlwdGlvbjpudWxsLGNvbnRleHQ6bnVsbCxmaWx0ZXI6bnVsbCxlbHNlRmlsdGVyOiExLHN5bWJvbGl6ZXI6bnVsbCxzeW1ib2xpemVyczpudWxsLG1pblNjYWxlRGVub21pbmF0b3I6bnVsbCxtYXhTY2FsZURlbm9taW5hdG9yOm51bGwsaW5pdGlhbGl6ZTpmdW5jdGlvbihhKXt0aGlzLnN5bWJvbGl6ZXI9e307T3BlbkxheWVycy5VdGlsLmV4dGVuZCh0aGlzLGEpO3RoaXMuc3ltYm9saXplcnMmJmRlbGV0ZSB0aGlzLnN5bWJvbGl6ZXI7dGhpcy5pZD1PcGVuTGF5ZXJzLlV0aWwuY3JlYXRlVW5pcXVlSUQodGhpcy5DTEFTU19OQU1FKyJfIil9LGRlc3Ryb3k6ZnVuY3Rpb24oKXtmb3IodmFyIGEgaW4gdGhpcy5zeW1ib2xpemVyKXRoaXMuc3ltYm9saXplclthXT1udWxsO3RoaXMuc3ltYm9saXplcj1udWxsO2RlbGV0ZSB0aGlzLnN5bWJvbGl6ZXJzfSxldmFsdWF0ZTpmdW5jdGlvbihhKXt2YXIgYj0KdGhpcy5nZXRDb250ZXh0KGEpLGM9ITA7aWYodGhpcy5taW5TY2FsZURlbm9taW5hdG9yfHx0aGlzLm1heFNjYWxlRGVub21pbmF0b3IpdmFyIGQ9YS5sYXllci5tYXAuZ2V0U2NhbGUoKTt0aGlzLm1pblNjYWxlRGVub21pbmF0b3ImJihjPWQ+PU9wZW5MYXllcnMuU3R5bGUuY3JlYXRlTGl0ZXJhbCh0aGlzLm1pblNjYWxlRGVub21pbmF0b3IsYikpO2MmJnRoaXMubWF4U2NhbGVEZW5vbWluYXRvciYmKGM9ZDxPcGVuTGF5ZXJzLlN0eWxlLmNyZWF0ZUxpdGVyYWwodGhpcy5tYXhTY2FsZURlbm9taW5hdG9yLGIpKTtjJiZ0aGlzLmZpbHRlciYmKGM9Ik9wZW5MYXllcnMuRmlsdGVyLkZlYXR1cmVJZCI9PXRoaXMuZmlsdGVyLkNMQVNTX05BTUU/dGhpcy5maWx0ZXIuZXZhbHVhdGUoYSk6dGhpcy5maWx0ZXIuZXZhbHVhdGUoYikpO3JldHVybiBjfSxnZXRDb250ZXh0OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY29udGV4dDtifHwoYj1hLmF0dHJpYnV0ZXN8fGEuZGF0YSk7ImZ1bmN0aW9uIj09CnR5cGVvZiB0aGlzLmNvbnRleHQmJihiPXRoaXMuY29udGV4dChhKSk7cmV0dXJuIGJ9LGNsb25lOmZ1bmN0aW9uKCl7dmFyIGE9T3BlbkxheWVycy5VdGlsLmV4dGVuZCh7fSx0aGlzKTtpZih0aGlzLnN5bWJvbGl6ZXJzKXt2YXIgYj10aGlzLnN5bWJvbGl6ZXJzLmxlbmd0aDthLnN5bWJvbGl6ZXJzPUFycmF5KGIpO2Zvcih2YXIgYz0wO2M8YjsrK2MpYS5zeW1ib2xpemVyc1tjXT10aGlzLnN5bWJvbGl6ZXJzW2NdLmNsb25lKCl9ZWxzZXthLnN5bWJvbGl6ZXI9e307Zm9yKHZhciBkIGluIHRoaXMuc3ltYm9saXplciliPXRoaXMuc3ltYm9saXplcltkXSxjPXR5cGVvZiBiLCJvYmplY3QiPT09Yz9hLnN5bWJvbGl6ZXJbZF09T3BlbkxheWVycy5VdGlsLmV4dGVuZCh7fSxiKToic3RyaW5nIj09PWMmJihhLnN5bWJvbGl6ZXJbZF09Yil9YS5maWx0ZXI9dGhpcy5maWx0ZXImJnRoaXMuZmlsdGVyLmNsb25lKCk7YS5jb250ZXh0PXRoaXMuY29udGV4dCYmT3BlbkxheWVycy5VdGlsLmV4dGVuZCh7fSwKdGhpcy5jb250ZXh0KTtyZXR1cm4gbmV3IE9wZW5MYXllcnMuUnVsZShhKX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5SdWxlIn0pO09wZW5MYXllcnMuUmVuZGVyZXIuVk1MPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5SZW5kZXJlci5FbGVtZW50cyx7eG1sbnM6InVybjpzY2hlbWFzLW1pY3Jvc29mdC1jb206dm1sIixzeW1ib2xDYWNoZTp7fSxvZmZzZXQ6bnVsbCxpbml0aWFsaXplOmZ1bmN0aW9uKGEpe2lmKHRoaXMuc3VwcG9ydGVkKCkpe2lmKCFkb2N1bWVudC5uYW1lc3BhY2VzLm9sdil7ZG9jdW1lbnQubmFtZXNwYWNlcy5hZGQoIm9sdiIsdGhpcy54bWxucyk7Zm9yKHZhciBiPWRvY3VtZW50LmNyZWF0ZVN0eWxlU2hlZXQoKSxjPSJzaGFwZSByZWN0IG92YWwgZmlsbCBzdHJva2UgaW1hZ2VkYXRhIGdyb3VwIHRleHRib3giLnNwbGl0KCIgIiksZD0wLGU9Yy5sZW5ndGg7ZDxlO2QrKyliLmFkZFJ1bGUoIm9sdlxcOiIrY1tkXSwiYmVoYXZpb3I6IHVybCgjZGVmYXVsdCNWTUwpOyBwb3NpdGlvbjogYWJzb2x1dGU7IGRpc3BsYXk6IGlubGluZS1ibG9jazsiKX1PcGVuTGF5ZXJzLlJlbmRlcmVyLkVsZW1lbnRzLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsCmFyZ3VtZW50cyl9fSxzdXBwb3J0ZWQ6ZnVuY3Rpb24oKXtyZXR1cm4hIWRvY3VtZW50Lm5hbWVzcGFjZXN9LHNldEV4dGVudDpmdW5jdGlvbihhLGIpe3ZhciBjPU9wZW5MYXllcnMuUmVuZGVyZXIuRWxlbWVudHMucHJvdG90eXBlLnNldEV4dGVudC5hcHBseSh0aGlzLGFyZ3VtZW50cyksZD10aGlzLmdldFJlc29sdXRpb24oKSxlPWEubGVmdC9kfDAsZD1hLnRvcC9kLXRoaXMuc2l6ZS5ofDA7Ynx8IXRoaXMub2Zmc2V0Pyh0aGlzLm9mZnNldD17eDplLHk6ZH0sZD1lPTApOihlLT10aGlzLm9mZnNldC54LGQtPXRoaXMub2Zmc2V0LnkpO3RoaXMucm9vdC5jb29yZG9yaWdpbj1lLXRoaXMueE9mZnNldCsiICIrZDtmb3IodmFyIGU9W3RoaXMucm9vdCx0aGlzLnZlY3RvclJvb3QsdGhpcy50ZXh0Um9vdF0sZj0wLGc9ZS5sZW5ndGg7ZjxnOysrZilkPWVbZl0sZC5jb29yZHNpemU9dGhpcy5zaXplLncrIiAiK3RoaXMuc2l6ZS5oO3RoaXMucm9vdC5zdHlsZS5mbGlwPSJ5IjtyZXR1cm4gY30sCnNldFNpemU6ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5SZW5kZXJlci5wcm90b3R5cGUuc2V0U2l6ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7Zm9yKHZhciBiPVt0aGlzLnJlbmRlcmVyUm9vdCx0aGlzLnJvb3QsdGhpcy52ZWN0b3JSb290LHRoaXMudGV4dFJvb3RdLGM9dGhpcy5zaXplLncrInB4IixkPXRoaXMuc2l6ZS5oKyJweCIsZSxmPTAsZz1iLmxlbmd0aDtmPGc7KytmKWU9YltmXSxlLnN0eWxlLndpZHRoPWMsZS5zdHlsZS5oZWlnaHQ9ZH0sZ2V0Tm9kZVR5cGU6ZnVuY3Rpb24oYSxiKXt2YXIgYz1udWxsO3N3aXRjaChhLkNMQVNTX05BTUUpe2Nhc2UgIk9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQiOmM9Yi5leHRlcm5hbEdyYXBoaWM/Im9sdjpyZWN0Ijp0aGlzLmlzQ29tcGxleFN5bWJvbChiLmdyYXBoaWNOYW1lKT8ib2x2OnNoYXBlIjoib2x2Om92YWwiO2JyZWFrO2Nhc2UgIk9wZW5MYXllcnMuR2VvbWV0cnkuUmVjdGFuZ2xlIjpjPSJvbHY6cmVjdCI7YnJlYWs7Y2FzZSAiT3BlbkxheWVycy5HZW9tZXRyeS5MaW5lU3RyaW5nIjpjYXNlICJPcGVuTGF5ZXJzLkdlb21ldHJ5LkxpbmVhclJpbmciOmNhc2UgIk9wZW5MYXllcnMuR2VvbWV0cnkuUG9seWdvbiI6Y2FzZSAiT3BlbkxheWVycy5HZW9tZXRyeS5DdXJ2ZSI6Yz0KIm9sdjpzaGFwZSJ9cmV0dXJuIGN9LHNldFN0eWxlOmZ1bmN0aW9uKGEsYixjLGQpe2I9Ynx8YS5fc3R5bGU7Yz1jfHxhLl9vcHRpb25zO3ZhciBlPWIuZmlsbENvbG9yLGY9Yi50aXRsZXx8Yi5ncmFwaGljVGl0bGU7ZiYmKGEudGl0bGU9Zik7aWYoIk9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQiPT09YS5fZ2VvbWV0cnlDbGFzcylpZihiLmV4dGVybmFsR3JhcGhpYyl7Yy5pc0ZpbGxlZD0hMDt2YXIgZT1iLmdyYXBoaWNXaWR0aHx8Yi5ncmFwaGljSGVpZ2h0LGY9Yi5ncmFwaGljSGVpZ2h0fHxiLmdyYXBoaWNXaWR0aCxlPWU/ZToyKmIucG9pbnRSYWRpdXMsZj1mP2Y6MipiLnBvaW50UmFkaXVzLGc9dGhpcy5nZXRSZXNvbHV0aW9uKCksaD12b2lkIDAhPWIuZ3JhcGhpY1hPZmZzZXQ/Yi5ncmFwaGljWE9mZnNldDotKDAuNSplKSxrPXZvaWQgMCE9Yi5ncmFwaGljWU9mZnNldD9iLmdyYXBoaWNZT2Zmc2V0Oi0oMC41KmYpO2Euc3R5bGUubGVmdD0oKGQueC10aGlzLmZlYXR1cmVEeCkvCmctdGhpcy5vZmZzZXQueCtofDApKyJweCI7YS5zdHlsZS50b3A9KGQueS9nLXRoaXMub2Zmc2V0LnktKGsrZil8MCkrInB4IjthLnN0eWxlLndpZHRoPWUrInB4IjthLnN0eWxlLmhlaWdodD1mKyJweCI7YS5zdHlsZS5mbGlwPSJ5IjtlPSJub25lIjtjLmlzU3Ryb2tlZD0hMX1lbHNlIHRoaXMuaXNDb21wbGV4U3ltYm9sKGIuZ3JhcGhpY05hbWUpPyhmPXRoaXMuaW1wb3J0U3ltYm9sKGIuZ3JhcGhpY05hbWUpLGEucGF0aD1mLnBhdGgsYS5jb29yZG9yaWdpbj1mLmxlZnQrIiwiK2YuYm90dG9tLGY9Zi5zaXplLGEuY29vcmRzaXplPWYrIiwiK2YsdGhpcy5kcmF3Q2lyY2xlKGEsZCxiLnBvaW50UmFkaXVzKSxhLnN0eWxlLmZsaXA9InkiKTp0aGlzLmRyYXdDaXJjbGUoYSxkLGIucG9pbnRSYWRpdXMpO2MuaXNGaWxsZWQ/YS5maWxsY29sb3I9ZTphLmZpbGxlZD0iZmFsc2UiO2Q9YS5nZXRFbGVtZW50c0J5VGFnTmFtZSgiZmlsbCIpO2Q9MD09ZC5sZW5ndGg/bnVsbDpkWzBdO2MuaXNGaWxsZWQ/CihkfHwoZD10aGlzLmNyZWF0ZU5vZGUoIm9sdjpmaWxsIixhLmlkKyJfZmlsbCIpKSxkLm9wYWNpdHk9Yi5maWxsT3BhY2l0eSwiT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludCI9PT1hLl9nZW9tZXRyeUNsYXNzJiZiLmV4dGVybmFsR3JhcGhpYyYmKGIuZ3JhcGhpY09wYWNpdHkmJihkLm9wYWNpdHk9Yi5ncmFwaGljT3BhY2l0eSksZC5zcmM9Yi5leHRlcm5hbEdyYXBoaWMsZC50eXBlPSJmcmFtZSIsYi5ncmFwaGljV2lkdGgmJmIuZ3JhcGhpY0hlaWdodHx8KGQuYXNwZWN0PSJhdG1vc3QiKSksZC5wYXJlbnROb2RlIT1hJiZhLmFwcGVuZENoaWxkKGQpKTpkJiZhLnJlbW92ZUNoaWxkKGQpO2U9Yi5yb3RhdGlvbjtpZih2b2lkIDAhPT1lfHx2b2lkIDAhPT1hLl9yb3RhdGlvbilhLl9yb3RhdGlvbj1lLGIuZXh0ZXJuYWxHcmFwaGljPyh0aGlzLmdyYXBoaWNSb3RhdGUoYSxoLGssYiksZC5vcGFjaXR5PTApOiJPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50Ij09PWEuX2dlb21ldHJ5Q2xhc3MmJgooYS5zdHlsZS5yb3RhdGlvbj1lfHwwKTtoPWEuZ2V0RWxlbWVudHNCeVRhZ05hbWUoInN0cm9rZSIpO2g9MD09aC5sZW5ndGg/bnVsbDpoWzBdO2MuaXNTdHJva2VkPyhofHwoaD10aGlzLmNyZWF0ZU5vZGUoIm9sdjpzdHJva2UiLGEuaWQrIl9zdHJva2UiKSxhLmFwcGVuZENoaWxkKGgpKSxoLm9uPSEwLGguY29sb3I9Yi5zdHJva2VDb2xvcixoLndlaWdodD1iLnN0cm9rZVdpZHRoKyJweCIsaC5vcGFjaXR5PWIuc3Ryb2tlT3BhY2l0eSxoLmVuZGNhcD0iYnV0dCI9PWIuc3Ryb2tlTGluZWNhcD8iZmxhdCI6Yi5zdHJva2VMaW5lY2FwfHwicm91bmQiLGIuc3Ryb2tlRGFzaHN0eWxlJiYoaC5kYXNoc3R5bGU9dGhpcy5kYXNoU3R5bGUoYikpKTooYS5zdHJva2VkPSExLGgmJihoLm9uPSExKSk7ImluaGVyaXQiIT1iLmN1cnNvciYmbnVsbCE9Yi5jdXJzb3ImJihhLnN0eWxlLmN1cnNvcj1iLmN1cnNvcik7cmV0dXJuIGF9LGdyYXBoaWNSb3RhdGU6ZnVuY3Rpb24oYSxiLGMsZCl7ZD0KZHx8YS5fc3R5bGU7dmFyIGU9ZC5yb3RhdGlvbnx8MCxmLGc7aWYoZC5ncmFwaGljV2lkdGgmJmQuZ3JhcGhpY0hlaWdodCl7Zz1NYXRoLm1heChkLmdyYXBoaWNXaWR0aCxkLmdyYXBoaWNIZWlnaHQpO2Y9ZC5ncmFwaGljV2lkdGgvZC5ncmFwaGljSGVpZ2h0O3ZhciBoPU1hdGgucm91bmQoZC5ncmFwaGljV2lkdGh8fGcqZiksaz1NYXRoLnJvdW5kKGQuZ3JhcGhpY0hlaWdodHx8Zyk7YS5zdHlsZS53aWR0aD1oKyJweCI7YS5zdHlsZS5oZWlnaHQ9aysicHgiO3ZhciBsPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGEuaWQrIl9pbWFnZSIpO2x8fChsPXRoaXMuY3JlYXRlTm9kZSgib2x2OmltYWdlZGF0YSIsYS5pZCsiX2ltYWdlIiksYS5hcHBlbmRDaGlsZChsKSk7bC5zdHlsZS53aWR0aD1oKyJweCI7bC5zdHlsZS5oZWlnaHQ9aysicHgiO2wuc3JjPWQuZXh0ZXJuYWxHcmFwaGljO2wuc3R5bGUuZmlsdGVyPSJwcm9naWQ6RFhJbWFnZVRyYW5zZm9ybS5NaWNyb3NvZnQuQWxwaGFJbWFnZUxvYWRlcihzcmM9JycsIHNpemluZ01ldGhvZD0nc2NhbGUnKSI7Cmw9ZSpNYXRoLlBJLzE4MDtlPU1hdGguc2luKGwpO2w9TWF0aC5jb3MobCk7ZT0icHJvZ2lkOkRYSW1hZ2VUcmFuc2Zvcm0uTWljcm9zb2Z0Lk1hdHJpeChNMTE9IitsKyIsTTEyPSIrLWUrIixNMjE9IitlKyIsTTIyPSIrbCsiLFNpemluZ01ldGhvZD0nYXV0byBleHBhbmQnKVxuIjsobD1kLmdyYXBoaWNPcGFjaXR5fHxkLmZpbGxPcGFjaXR5KSYmMSE9bCYmKGUrPSJwcm9naWQ6RFhJbWFnZVRyYW5zZm9ybS5NaWNyb3NvZnQuQmFzaWNJbWFnZShvcGFjaXR5PSIrbCsiKVxuIik7YS5zdHlsZS5maWx0ZXI9ZTtlPW5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KC1iLC1jKTtoPShuZXcgT3BlbkxheWVycy5Cb3VuZHMoMCwwLGgsaykpLnRvR2VvbWV0cnkoKTtoLnJvdGF0ZShkLnJvdGF0aW9uLGUpO2g9aC5nZXRCb3VuZHMoKTthLnN0eWxlLmxlZnQ9TWF0aC5yb3VuZChwYXJzZUludChhLnN0eWxlLmxlZnQpK2gubGVmdCkrInB4IjthLnN0eWxlLnRvcD1NYXRoLnJvdW5kKHBhcnNlSW50KGEuc3R5bGUudG9wKS0KaC5ib3R0b20pKyJweCJ9ZWxzZXt2YXIgbT1uZXcgSW1hZ2U7bS5vbnJlYWR5c3RhdGVjaGFuZ2U9T3BlbkxheWVycy5GdW5jdGlvbi5iaW5kKGZ1bmN0aW9uKCl7aWYoImNvbXBsZXRlIj09bS5yZWFkeVN0YXRlfHwiaW50ZXJhY3RpdmUiPT1tLnJlYWR5U3RhdGUpZj1tLndpZHRoL20uaGVpZ2h0LGc9TWF0aC5tYXgoMipkLnBvaW50UmFkaXVzLGQuZ3JhcGhpY1dpZHRofHwwLGQuZ3JhcGhpY0hlaWdodHx8MCksYio9ZixkLmdyYXBoaWNXaWR0aD1nKmYsZC5ncmFwaGljSGVpZ2h0PWcsdGhpcy5ncmFwaGljUm90YXRlKGEsYixjLGQpfSx0aGlzKTttLnNyYz1kLmV4dGVybmFsR3JhcGhpY319LHBvc3REcmF3OmZ1bmN0aW9uKGEpe2Euc3R5bGUudmlzaWJpbGl0eT0idmlzaWJsZSI7dmFyIGI9YS5fc3R5bGUuZmlsbENvbG9yLGM9YS5fc3R5bGUuc3Ryb2tlQ29sb3I7Im5vbmUiPT1iJiZhLmZpbGxjb2xvciE9YiYmKGEuZmlsbGNvbG9yPWIpOyJub25lIj09YyYmYS5zdHJva2Vjb2xvciE9CmMmJihhLnN0cm9rZWNvbG9yPWMpfSxzZXROb2RlRGltZW5zaW9uOmZ1bmN0aW9uKGEsYil7dmFyIGM9Yi5nZXRCb3VuZHMoKTtpZihjKXt2YXIgZD10aGlzLmdldFJlc29sdXRpb24oKSxjPW5ldyBPcGVuTGF5ZXJzLkJvdW5kcygoYy5sZWZ0LXRoaXMuZmVhdHVyZUR4KS9kLXRoaXMub2Zmc2V0Lnh8MCxjLmJvdHRvbS9kLXRoaXMub2Zmc2V0Lnl8MCwoYy5yaWdodC10aGlzLmZlYXR1cmVEeCkvZC10aGlzLm9mZnNldC54fDAsYy50b3AvZC10aGlzLm9mZnNldC55fDApO2Euc3R5bGUubGVmdD1jLmxlZnQrInB4IjthLnN0eWxlLnRvcD1jLnRvcCsicHgiO2Euc3R5bGUud2lkdGg9Yy5nZXRXaWR0aCgpKyJweCI7YS5zdHlsZS5oZWlnaHQ9Yy5nZXRIZWlnaHQoKSsicHgiO2EuY29vcmRvcmlnaW49Yy5sZWZ0KyIgIitjLnRvcDthLmNvb3Jkc2l6ZT1jLmdldFdpZHRoKCkrIiAiK2MuZ2V0SGVpZ2h0KCl9fSxkYXNoU3R5bGU6ZnVuY3Rpb24oYSl7YT1hLnN0cm9rZURhc2hzdHlsZTtzd2l0Y2goYSl7Y2FzZSAic29saWQiOmNhc2UgImRvdCI6Y2FzZSAiZGFzaCI6Y2FzZSAiZGFzaGRvdCI6Y2FzZSAibG9uZ2Rhc2giOmNhc2UgImxvbmdkYXNoZG90IjpyZXR1cm4gYTsKZGVmYXVsdDpyZXR1cm4gYT1hLnNwbGl0KC9bICxdLyksMj09YS5sZW5ndGg/MSphWzBdPj0yKmFbMV0/ImxvbmdkYXNoIjoxPT1hWzBdfHwxPT1hWzFdPyJkb3QiOiJkYXNoIjo0PT1hLmxlbmd0aD8xKmFbMF0+PTIqYVsxXT8ibG9uZ2Rhc2hkb3QiOiJkYXNoZG90Ijoic29saWQifX0sY3JlYXRlTm9kZTpmdW5jdGlvbihhLGIpe3ZhciBjPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoYSk7YiYmKGMuaWQ9Yik7Yy51bnNlbGVjdGFibGU9Im9uIjtjLm9uc2VsZWN0c3RhcnQ9T3BlbkxheWVycy5GdW5jdGlvbi5GYWxzZTtyZXR1cm4gY30sbm9kZVR5cGVDb21wYXJlOmZ1bmN0aW9uKGEsYil7dmFyIGM9YixkPWMuaW5kZXhPZigiOiIpOy0xIT1kJiYoYz1jLnN1YnN0cihkKzEpKTt2YXIgZT1hLm5vZGVOYW1lLGQ9ZS5pbmRleE9mKCI6Iik7LTEhPWQmJihlPWUuc3Vic3RyKGQrMSkpO3JldHVybiBjPT1lfSxjcmVhdGVSZW5kZXJSb290OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubm9kZUZhY3RvcnkodGhpcy5jb250YWluZXIuaWQrCiJfdm1sUm9vdCIsImRpdiIpfSxjcmVhdGVSb290OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLm5vZGVGYWN0b3J5KHRoaXMuY29udGFpbmVyLmlkK2EsIm9sdjpncm91cCIpfSxkcmF3UG9pbnQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5kcmF3Q2lyY2xlKGEsYiwxKX0sZHJhd0NpcmNsZTpmdW5jdGlvbihhLGIsYyl7aWYoIWlzTmFOKGIueCkmJiFpc05hTihiLnkpKXt2YXIgZD10aGlzLmdldFJlc29sdXRpb24oKTthLnN0eWxlLmxlZnQ9KChiLngtdGhpcy5mZWF0dXJlRHgpL2QtdGhpcy5vZmZzZXQueHwwKS1jKyJweCI7YS5zdHlsZS50b3A9KGIueS9kLXRoaXMub2Zmc2V0Lnl8MCktYysicHgiO2I9MipjO2Euc3R5bGUud2lkdGg9YisicHgiO2Euc3R5bGUuaGVpZ2h0PWIrInB4IjtyZXR1cm4gYX1yZXR1cm4hMX0sZHJhd0xpbmVTdHJpbmc6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5kcmF3TGluZShhLGIsITEpfSxkcmF3TGluZWFyUmluZzpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLmRyYXdMaW5lKGEsCmIsITApfSxkcmF3TGluZTpmdW5jdGlvbihhLGIsYyl7dGhpcy5zZXROb2RlRGltZW5zaW9uKGEsYik7Zm9yKHZhciBkPXRoaXMuZ2V0UmVzb2x1dGlvbigpLGU9Yi5jb21wb25lbnRzLmxlbmd0aCxmPUFycmF5KGUpLGcsaCxrPTA7azxlO2srKylnPWIuY29tcG9uZW50c1trXSxoPShnLngtdGhpcy5mZWF0dXJlRHgpL2QtdGhpcy5vZmZzZXQueHwwLGc9Zy55L2QtdGhpcy5vZmZzZXQueXwwLGZba109IiAiK2grIiwiK2crIiBsICI7Yj1jPyIgeCBlIjoiIGUiO2EucGF0aD0ibSIrZi5qb2luKCIiKStiO3JldHVybiBhfSxkcmF3UG9seWdvbjpmdW5jdGlvbihhLGIpe3RoaXMuc2V0Tm9kZURpbWVuc2lvbihhLGIpO3ZhciBjPXRoaXMuZ2V0UmVzb2x1dGlvbigpLGQ9W10sZSxmLGcsaCxrLGwsbSxyLHAsbjtlPTA7Zm9yKGY9Yi5jb21wb25lbnRzLmxlbmd0aDtlPGY7ZSsrKXtkLnB1c2goIm0iKTtnPWIuY29tcG9uZW50c1tlXS5jb21wb25lbnRzO2g9MD09PWU7bD1rPW51bGw7bT0wOwpmb3Iocj1nLmxlbmd0aDttPHI7bSsrKXA9Z1ttXSxuPShwLngtdGhpcy5mZWF0dXJlRHgpL2MtdGhpcy5vZmZzZXQueHwwLHA9cC55L2MtdGhpcy5vZmZzZXQueXwwLG49IiAiK24rIiwiK3AsZC5wdXNoKG4pLDA9PW0mJmQucHVzaCgiIGwiKSxofHwoaz9rIT1uJiYobD9sIT1uJiYoaD0hMCk6bD1uKTprPW4pO2QucHVzaChoPyIgeCAiOiIgIil9ZC5wdXNoKCJlIik7YS5wYXRoPWQuam9pbigiIik7cmV0dXJuIGF9LGRyYXdSZWN0YW5nbGU6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmdldFJlc29sdXRpb24oKTthLnN0eWxlLmxlZnQ9KChiLngtdGhpcy5mZWF0dXJlRHgpL2MtdGhpcy5vZmZzZXQueHwwKSsicHgiO2Euc3R5bGUudG9wPShiLnkvYy10aGlzLm9mZnNldC55fDApKyJweCI7YS5zdHlsZS53aWR0aD0oYi53aWR0aC9jfDApKyJweCI7YS5zdHlsZS5oZWlnaHQ9KGIuaGVpZ2h0L2N8MCkrInB4IjtyZXR1cm4gYX0sZHJhd1RleHQ6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXRoaXMubm9kZUZhY3RvcnkoYSsKdGhpcy5MQUJFTF9JRF9TVUZGSVgsIm9sdjpyZWN0IiksZT10aGlzLm5vZGVGYWN0b3J5KGErdGhpcy5MQUJFTF9JRF9TVUZGSVgrIl90ZXh0Ym94Iiwib2x2OnRleHRib3giKSxmPXRoaXMuZ2V0UmVzb2x1dGlvbigpO2Quc3R5bGUubGVmdD0oKGMueC10aGlzLmZlYXR1cmVEeCkvZi10aGlzLm9mZnNldC54fDApKyJweCI7ZC5zdHlsZS50b3A9KGMueS9mLXRoaXMub2Zmc2V0Lnl8MCkrInB4IjtkLnN0eWxlLmZsaXA9InkiO2UuaW5uZXJUZXh0PWIubGFiZWw7ImluaGVyaXQiIT1iLmN1cnNvciYmbnVsbCE9Yi5jdXJzb3ImJihlLnN0eWxlLmN1cnNvcj1iLmN1cnNvcik7Yi5mb250Q29sb3ImJihlLnN0eWxlLmNvbG9yPWIuZm9udENvbG9yKTtiLmZvbnRPcGFjaXR5JiYoZS5zdHlsZS5maWx0ZXI9ImFscGhhKG9wYWNpdHk9IisxMDAqYi5mb250T3BhY2l0eSsiKSIpO2IuZm9udEZhbWlseSYmKGUuc3R5bGUuZm9udEZhbWlseT1iLmZvbnRGYW1pbHkpO2IuZm9udFNpemUmJihlLnN0eWxlLmZvbnRTaXplPQpiLmZvbnRTaXplKTtiLmZvbnRXZWlnaHQmJihlLnN0eWxlLmZvbnRXZWlnaHQ9Yi5mb250V2VpZ2h0KTtiLmZvbnRTdHlsZSYmKGUuc3R5bGUuZm9udFN0eWxlPWIuZm9udFN0eWxlKTshMD09PWIubGFiZWxTZWxlY3QmJihkLl9mZWF0dXJlSWQ9YSxlLl9mZWF0dXJlSWQ9YSxlLl9nZW9tZXRyeT1jLGUuX2dlb21ldHJ5Q2xhc3M9Yy5DTEFTU19OQU1FKTtlLnN0eWxlLndoaXRlU3BhY2U9Im5vd3JhcCI7ZS5pbnNldD0iMXB4LDBweCwwcHgsMHB4IjtkLnBhcmVudE5vZGV8fChkLmFwcGVuZENoaWxkKGUpLHRoaXMudGV4dFJvb3QuYXBwZW5kQ2hpbGQoZCkpO2I9Yi5sYWJlbEFsaWdufHwiY20iOzE9PWIubGVuZ3RoJiYoYis9Im0iKTthPWUuY2xpZW50V2lkdGgqT3BlbkxheWVycy5SZW5kZXJlci5WTUwuTEFCRUxfU0hJRlRbYi5zdWJzdHIoMCwxKV07ZT1lLmNsaWVudEhlaWdodCpPcGVuTGF5ZXJzLlJlbmRlcmVyLlZNTC5MQUJFTF9TSElGVFtiLnN1YnN0cigxLDEpXTtkLnN0eWxlLmxlZnQ9CnBhcnNlSW50KGQuc3R5bGUubGVmdCktYS0xKyJweCI7ZC5zdHlsZS50b3A9cGFyc2VJbnQoZC5zdHlsZS50b3ApK2UrInB4In0sbW92ZVJvb3Q6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5tYXAuZ2V0TGF5ZXIoYS5jb250YWluZXIuaWQpO2IgaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLkxheWVyLlZlY3Rvci5Sb290Q29udGFpbmVyJiYoYj10aGlzLm1hcC5nZXRMYXllcih0aGlzLmNvbnRhaW5lci5pZCkpO2ImJmIucmVuZGVyZXIuY2xlYXIoKTtPcGVuTGF5ZXJzLlJlbmRlcmVyLkVsZW1lbnRzLnByb3RvdHlwZS5tb3ZlUm9vdC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7YiYmYi5yZWRyYXcoKX0saW1wb3J0U3ltYm9sOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY29udGFpbmVyLmlkKyItIithLGM9dGhpcy5zeW1ib2xDYWNoZVtiXTtpZihjKXJldHVybiBjO2M9T3BlbkxheWVycy5SZW5kZXJlci5zeW1ib2xbYV07aWYoIWMpdGhyb3cgRXJyb3IoYSsiIGlzIG5vdCBhIHZhbGlkIHN5bWJvbCBuYW1lIik7CmE9bmV3IE9wZW5MYXllcnMuQm91bmRzKE51bWJlci5NQVhfVkFMVUUsTnVtYmVyLk1BWF9WQUxVRSwwLDApO2Zvcih2YXIgZD1bIm0iXSxlPTA7ZTxjLmxlbmd0aDtlKz0yKXt2YXIgZj1jW2VdLGc9Y1tlKzFdO2EubGVmdD1NYXRoLm1pbihhLmxlZnQsZik7YS5ib3R0b209TWF0aC5taW4oYS5ib3R0b20sZyk7YS5yaWdodD1NYXRoLm1heChhLnJpZ2h0LGYpO2EudG9wPU1hdGgubWF4KGEudG9wLGcpO2QucHVzaChmKTtkLnB1c2goZyk7MD09ZSYmZC5wdXNoKCJsIil9ZC5wdXNoKCJ4IGUiKTtjPWQuam9pbigiICIpO2Q9KGEuZ2V0V2lkdGgoKS1hLmdldEhlaWdodCgpKS8yOzA8ZD8oYS5ib3R0b20tPWQsYS50b3ArPWQpOihhLmxlZnQrPWQsYS5yaWdodC09ZCk7Yz17cGF0aDpjLHNpemU6YS5nZXRXaWR0aCgpLGxlZnQ6YS5sZWZ0LGJvdHRvbTphLmJvdHRvbX07cmV0dXJuIHRoaXMuc3ltYm9sQ2FjaGVbYl09Y30sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5SZW5kZXJlci5WTUwifSk7Ck9wZW5MYXllcnMuUmVuZGVyZXIuVk1MLkxBQkVMX1NISUZUPXtsOjAsYzowLjUscjoxLHQ6MCxtOjAuNSxiOjF9O09wZW5MYXllcnMuUHJvdG9jb2w9T3BlbkxheWVycy5DbGFzcyh7Zm9ybWF0Om51bGwsb3B0aW9uczpudWxsLGF1dG9EZXN0cm95OiEwLGRlZmF1bHRGaWx0ZXI6bnVsbCxpbml0aWFsaXplOmZ1bmN0aW9uKGEpe2E9YXx8e307T3BlbkxheWVycy5VdGlsLmV4dGVuZCh0aGlzLGEpO3RoaXMub3B0aW9ucz1hfSxtZXJnZVdpdGhEZWZhdWx0RmlsdGVyOmZ1bmN0aW9uKGEpe3JldHVybiBhJiZ0aGlzLmRlZmF1bHRGaWx0ZXI/bmV3IE9wZW5MYXllcnMuRmlsdGVyLkxvZ2ljYWwoe3R5cGU6T3BlbkxheWVycy5GaWx0ZXIuTG9naWNhbC5BTkQsZmlsdGVyczpbdGhpcy5kZWZhdWx0RmlsdGVyLGFdfSk6YXx8dGhpcy5kZWZhdWx0RmlsdGVyfHx2b2lkIDB9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmZvcm1hdD10aGlzLm9wdGlvbnM9bnVsbH0scmVhZDpmdW5jdGlvbihhKXthPWF8fHt9O2EuZmlsdGVyPXRoaXMubWVyZ2VXaXRoRGVmYXVsdEZpbHRlcihhLmZpbHRlcil9LGNyZWF0ZTpmdW5jdGlvbigpe30sCnVwZGF0ZTpmdW5jdGlvbigpe30sImRlbGV0ZSI6ZnVuY3Rpb24oKXt9LGNvbW1pdDpmdW5jdGlvbigpe30sYWJvcnQ6ZnVuY3Rpb24oYSl7fSxjcmVhdGVDYWxsYmFjazpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIE9wZW5MYXllcnMuRnVuY3Rpb24uYmluZChmdW5jdGlvbigpe2EuYXBwbHkodGhpcyxbYixjXSl9LHRoaXMpfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLlByb3RvY29sIn0pO09wZW5MYXllcnMuUHJvdG9jb2wuUmVzcG9uc2U9T3BlbkxheWVycy5DbGFzcyh7Y29kZTpudWxsLHJlcXVlc3RUeXBlOm51bGwsbGFzdDohMCxmZWF0dXJlczpudWxsLGRhdGE6bnVsbCxyZXFGZWF0dXJlczpudWxsLHByaXY6bnVsbCxlcnJvcjpudWxsLGluaXRpYWxpemU6ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5VdGlsLmV4dGVuZCh0aGlzLGEpfSxzdWNjZXNzOmZ1bmN0aW9uKCl7cmV0dXJuIDA8dGhpcy5jb2RlfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLlByb3RvY29sLlJlc3BvbnNlIn0pOwpPcGVuTGF5ZXJzLlByb3RvY29sLlJlc3BvbnNlLlNVQ0NFU1M9MTtPcGVuTGF5ZXJzLlByb3RvY29sLlJlc3BvbnNlLkZBSUxVUkU9MDtPcGVuTGF5ZXJzLlByb3RvY29sLkhUVFA9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLlByb3RvY29sLHt1cmw6bnVsbCxoZWFkZXJzOm51bGwscGFyYW1zOm51bGwsY2FsbGJhY2s6bnVsbCxzY29wZTpudWxsLHJlYWRXaXRoUE9TVDohMSx1cGRhdGVXaXRoUE9TVDohMSxkZWxldGVXaXRoUE9TVDohMSx3aWxkY2FyZGVkOiExLHNyc0luQkJPWDohMSxpbml0aWFsaXplOmZ1bmN0aW9uKGEpe2E9YXx8e307dGhpcy5wYXJhbXM9e307dGhpcy5oZWFkZXJzPXt9O09wZW5MYXllcnMuUHJvdG9jb2wucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxhcmd1bWVudHMpO2lmKCF0aGlzLmZpbHRlclRvUGFyYW1zJiZPcGVuTGF5ZXJzLkZvcm1hdC5RdWVyeVN0cmluZ0ZpbHRlcil7dmFyIGI9bmV3IE9wZW5MYXllcnMuRm9ybWF0LlF1ZXJ5U3RyaW5nRmlsdGVyKHt3aWxkY2FyZGVkOnRoaXMud2lsZGNhcmRlZCxzcnNJbkJCT1g6dGhpcy5zcnNJbkJCT1h9KTt0aGlzLmZpbHRlclRvUGFyYW1zPQpmdW5jdGlvbihhLGQpe3JldHVybiBiLndyaXRlKGEsZCl9fX0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuaGVhZGVycz10aGlzLnBhcmFtcz1udWxsO09wZW5MYXllcnMuUHJvdG9jb2wucHJvdG90eXBlLmRlc3Ryb3kuYXBwbHkodGhpcyl9LHJlYWQ6ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5Qcm90b2NvbC5wcm90b3R5cGUucmVhZC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7YT1hfHx7fTthLnBhcmFtcz1PcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyhhLnBhcmFtcyx0aGlzLm9wdGlvbnMucGFyYW1zKTthPU9wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKGEsdGhpcy5vcHRpb25zKTthLmZpbHRlciYmdGhpcy5maWx0ZXJUb1BhcmFtcyYmKGEucGFyYW1zPXRoaXMuZmlsdGVyVG9QYXJhbXMoYS5maWx0ZXIsYS5wYXJhbXMpKTt2YXIgYj12b2lkIDAhPT1hLnJlYWRXaXRoUE9TVD9hLnJlYWRXaXRoUE9TVDp0aGlzLnJlYWRXaXRoUE9TVCxjPW5ldyBPcGVuTGF5ZXJzLlByb3RvY29sLlJlc3BvbnNlKHtyZXF1ZXN0VHlwZToicmVhZCJ9KTsKYj8oYj1hLmhlYWRlcnN8fHt9LGJbIkNvbnRlbnQtVHlwZSJdPSJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiLGMucHJpdj1PcGVuTGF5ZXJzLlJlcXVlc3QuUE9TVCh7dXJsOmEudXJsLGNhbGxiYWNrOnRoaXMuY3JlYXRlQ2FsbGJhY2sodGhpcy5oYW5kbGVSZWFkLGMsYSksZGF0YTpPcGVuTGF5ZXJzLlV0aWwuZ2V0UGFyYW1ldGVyU3RyaW5nKGEucGFyYW1zKSxoZWFkZXJzOmJ9KSk6Yy5wcml2PU9wZW5MYXllcnMuUmVxdWVzdC5HRVQoe3VybDphLnVybCxjYWxsYmFjazp0aGlzLmNyZWF0ZUNhbGxiYWNrKHRoaXMuaGFuZGxlUmVhZCxjLGEpLHBhcmFtczphLnBhcmFtcyxoZWFkZXJzOmEuaGVhZGVyc30pO3JldHVybiBjfSxoYW5kbGVSZWFkOmZ1bmN0aW9uKGEsYil7dGhpcy5oYW5kbGVSZXNwb25zZShhLGIpfSxjcmVhdGU6ZnVuY3Rpb24oYSxiKXtiPU9wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKGIsdGhpcy5vcHRpb25zKTt2YXIgYz1uZXcgT3BlbkxheWVycy5Qcm90b2NvbC5SZXNwb25zZSh7cmVxRmVhdHVyZXM6YSwKcmVxdWVzdFR5cGU6ImNyZWF0ZSJ9KTtjLnByaXY9T3BlbkxheWVycy5SZXF1ZXN0LlBPU1Qoe3VybDpiLnVybCxjYWxsYmFjazp0aGlzLmNyZWF0ZUNhbGxiYWNrKHRoaXMuaGFuZGxlQ3JlYXRlLGMsYiksaGVhZGVyczpiLmhlYWRlcnMsZGF0YTp0aGlzLmZvcm1hdC53cml0ZShhKX0pO3JldHVybiBjfSxoYW5kbGVDcmVhdGU6ZnVuY3Rpb24oYSxiKXt0aGlzLmhhbmRsZVJlc3BvbnNlKGEsYil9LHVwZGF0ZTpmdW5jdGlvbihhLGIpe2I9Ynx8e307dmFyIGM9Yi51cmx8fGEudXJsfHx0aGlzLm9wdGlvbnMudXJsKyIvIithLmZpZDtiPU9wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKGIsdGhpcy5vcHRpb25zKTt2YXIgZD1uZXcgT3BlbkxheWVycy5Qcm90b2NvbC5SZXNwb25zZSh7cmVxRmVhdHVyZXM6YSxyZXF1ZXN0VHlwZToidXBkYXRlIn0pO2QucHJpdj1PcGVuTGF5ZXJzLlJlcXVlc3RbdGhpcy51cGRhdGVXaXRoUE9TVD8iUE9TVCI6IlBVVCJdKHt1cmw6YyxjYWxsYmFjazp0aGlzLmNyZWF0ZUNhbGxiYWNrKHRoaXMuaGFuZGxlVXBkYXRlLApkLGIpLGhlYWRlcnM6Yi5oZWFkZXJzLGRhdGE6dGhpcy5mb3JtYXQud3JpdGUoYSl9KTtyZXR1cm4gZH0saGFuZGxlVXBkYXRlOmZ1bmN0aW9uKGEsYil7dGhpcy5oYW5kbGVSZXNwb25zZShhLGIpfSwiZGVsZXRlIjpmdW5jdGlvbihhLGIpe2I9Ynx8e307dmFyIGM9Yi51cmx8fGEudXJsfHx0aGlzLm9wdGlvbnMudXJsKyIvIithLmZpZDtiPU9wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKGIsdGhpcy5vcHRpb25zKTt2YXIgZD1uZXcgT3BlbkxheWVycy5Qcm90b2NvbC5SZXNwb25zZSh7cmVxRmVhdHVyZXM6YSxyZXF1ZXN0VHlwZToiZGVsZXRlIn0pLGU9dGhpcy5kZWxldGVXaXRoUE9TVD8iUE9TVCI6IkRFTEVURSIsYz17dXJsOmMsY2FsbGJhY2s6dGhpcy5jcmVhdGVDYWxsYmFjayh0aGlzLmhhbmRsZURlbGV0ZSxkLGIpLGhlYWRlcnM6Yi5oZWFkZXJzfTt0aGlzLmRlbGV0ZVdpdGhQT1NUJiYoYy5kYXRhPXRoaXMuZm9ybWF0LndyaXRlKGEpKTtkLnByaXY9T3BlbkxheWVycy5SZXF1ZXN0W2VdKGMpOwpyZXR1cm4gZH0saGFuZGxlRGVsZXRlOmZ1bmN0aW9uKGEsYil7dGhpcy5oYW5kbGVSZXNwb25zZShhLGIpfSxoYW5kbGVSZXNwb25zZTpmdW5jdGlvbihhLGIpe3ZhciBjPWEucHJpdjtiLmNhbGxiYWNrJiYoMjAwPD1jLnN0YXR1cyYmMzAwPmMuc3RhdHVzPygiZGVsZXRlIiE9YS5yZXF1ZXN0VHlwZSYmKGEuZmVhdHVyZXM9dGhpcy5wYXJzZUZlYXR1cmVzKGMpKSxhLmNvZGU9T3BlbkxheWVycy5Qcm90b2NvbC5SZXNwb25zZS5TVUNDRVNTKTphLmNvZGU9T3BlbkxheWVycy5Qcm90b2NvbC5SZXNwb25zZS5GQUlMVVJFLGIuY2FsbGJhY2suY2FsbChiLnNjb3BlLGEpKX0scGFyc2VGZWF0dXJlczpmdW5jdGlvbihhKXt2YXIgYj1hLnJlc3BvbnNlWE1MO2ImJmIuZG9jdW1lbnRFbGVtZW50fHwoYj1hLnJlc3BvbnNlVGV4dCk7cmV0dXJuIWJ8fDA+PWIubGVuZ3RoP251bGw6dGhpcy5mb3JtYXQucmVhZChiKX0sY29tbWl0OmZ1bmN0aW9uKGEsYil7ZnVuY3Rpb24gYyhhKXtmb3IodmFyIGI9CmEuZmVhdHVyZXM/YS5mZWF0dXJlcy5sZW5ndGg6MCxjPUFycmF5KGIpLGU9MDtlPGI7KytlKWNbZV09YS5mZWF0dXJlc1tlXS5maWQ7cS5pbnNlcnRJZHM9YztkLmFwcGx5KHRoaXMsW2FdKX1mdW5jdGlvbiBkKGEpe3RoaXMuY2FsbFVzZXJDYWxsYmFjayhhLGIpO249biYmYS5zdWNjZXNzKCk7ZisrO2Y+PXAmJmIuY2FsbGJhY2smJihxLmNvZGU9bj9PcGVuTGF5ZXJzLlByb3RvY29sLlJlc3BvbnNlLlNVQ0NFU1M6T3BlbkxheWVycy5Qcm90b2NvbC5SZXNwb25zZS5GQUlMVVJFLGIuY2FsbGJhY2suYXBwbHkoYi5zY29wZSxbcV0pKX1iPU9wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKGIsdGhpcy5vcHRpb25zKTt2YXIgZT1bXSxmPTAsZz17fTtnW09wZW5MYXllcnMuU3RhdGUuSU5TRVJUXT1bXTtnW09wZW5MYXllcnMuU3RhdGUuVVBEQVRFXT1bXTtnW09wZW5MYXllcnMuU3RhdGUuREVMRVRFXT1bXTtmb3IodmFyIGgsayxsPVtdLG09MCxyPWEubGVuZ3RoO208cjsrK20paWYoaD0KYVttXSxrPWdbaC5zdGF0ZV0pay5wdXNoKGgpLGwucHVzaChoKTt2YXIgcD0oMDxnW09wZW5MYXllcnMuU3RhdGUuSU5TRVJUXS5sZW5ndGg/MTowKStnW09wZW5MYXllcnMuU3RhdGUuVVBEQVRFXS5sZW5ndGgrZ1tPcGVuTGF5ZXJzLlN0YXRlLkRFTEVURV0ubGVuZ3RoLG49ITAscT1uZXcgT3BlbkxheWVycy5Qcm90b2NvbC5SZXNwb25zZSh7cmVxRmVhdHVyZXM6bH0pO2g9Z1tPcGVuTGF5ZXJzLlN0YXRlLklOU0VSVF07MDxoLmxlbmd0aCYmZS5wdXNoKHRoaXMuY3JlYXRlKGgsT3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoe2NhbGxiYWNrOmMsc2NvcGU6dGhpc30sYi5jcmVhdGUpKSk7aD1nW09wZW5MYXllcnMuU3RhdGUuVVBEQVRFXTtmb3IobT1oLmxlbmd0aC0xOzA8PW07LS1tKWUucHVzaCh0aGlzLnVwZGF0ZShoW21dLE9wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKHtjYWxsYmFjazpkLHNjb3BlOnRoaXN9LGIudXBkYXRlKSkpO2g9Z1tPcGVuTGF5ZXJzLlN0YXRlLkRFTEVURV07CmZvcihtPWgubGVuZ3RoLTE7MDw9bTstLW0pZS5wdXNoKHRoaXNbImRlbGV0ZSJdKGhbbV0sT3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoe2NhbGxiYWNrOmQsc2NvcGU6dGhpc30sYlsiZGVsZXRlIl0pKSk7cmV0dXJuIGV9LGFib3J0OmZ1bmN0aW9uKGEpe2EmJmEucHJpdi5hYm9ydCgpfSxjYWxsVXNlckNhbGxiYWNrOmZ1bmN0aW9uKGEsYil7dmFyIGM9YlthLnJlcXVlc3RUeXBlXTtjJiZjLmNhbGxiYWNrJiZjLmNhbGxiYWNrLmNhbGwoYy5zY29wZSxhKX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Qcm90b2NvbC5IVFRQIn0pO09wZW5MYXllcnMuQ29udHJvbC5MYXllclN3aXRjaGVyPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Db250cm9sLHtsYXllclN0YXRlczpudWxsLGxheWVyc0RpdjpudWxsLGJhc2VMYXllcnNEaXY6bnVsbCxiYXNlTGF5ZXJzOm51bGwsZGF0YUxibDpudWxsLGRhdGFMYXllcnNEaXY6bnVsbCxkYXRhTGF5ZXJzOm51bGwsbWluaW1pemVEaXY6bnVsbCxtYXhpbWl6ZURpdjpudWxsLGFzY2VuZGluZzohMCxpbml0aWFsaXplOmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5sYXllclN0YXRlcz1bXX0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuY2xlYXJMYXllcnNBcnJheSgiYmFzZSIpO3RoaXMuY2xlYXJMYXllcnNBcnJheSgiZGF0YSIpO3RoaXMubWFwLmV2ZW50cy51bih7YnV0dG9uY2xpY2s6dGhpcy5vbkJ1dHRvbkNsaWNrLGFkZGxheWVyOnRoaXMucmVkcmF3LGNoYW5nZWxheWVyOnRoaXMucmVkcmF3LApyZW1vdmVsYXllcjp0aGlzLnJlZHJhdyxjaGFuZ2ViYXNlbGF5ZXI6dGhpcy5yZWRyYXcsc2NvcGU6dGhpc30pO3RoaXMuZXZlbnRzLnVucmVnaXN0ZXIoImJ1dHRvbmNsaWNrIix0aGlzLHRoaXMub25CdXR0b25DbGljayk7T3BlbkxheWVycy5Db250cm9sLnByb3RvdHlwZS5kZXN0cm95LmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sc2V0TWFwOmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuc2V0TWFwLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLm1hcC5ldmVudHMub24oe2FkZGxheWVyOnRoaXMucmVkcmF3LGNoYW5nZWxheWVyOnRoaXMucmVkcmF3LHJlbW92ZWxheWVyOnRoaXMucmVkcmF3LGNoYW5nZWJhc2VsYXllcjp0aGlzLnJlZHJhdyxzY29wZTp0aGlzfSk7dGhpcy5vdXRzaWRlVmlld3BvcnQ/KHRoaXMuZXZlbnRzLmF0dGFjaFRvRWxlbWVudCh0aGlzLmRpdiksdGhpcy5ldmVudHMucmVnaXN0ZXIoImJ1dHRvbmNsaWNrIix0aGlzLHRoaXMub25CdXR0b25DbGljaykpOgp0aGlzLm1hcC5ldmVudHMucmVnaXN0ZXIoImJ1dHRvbmNsaWNrIix0aGlzLHRoaXMub25CdXR0b25DbGljayl9LGRyYXc6ZnVuY3Rpb24oKXtPcGVuTGF5ZXJzLkNvbnRyb2wucHJvdG90eXBlLmRyYXcuYXBwbHkodGhpcyk7dGhpcy5sb2FkQ29udGVudHMoKTt0aGlzLm91dHNpZGVWaWV3cG9ydHx8dGhpcy5taW5pbWl6ZUNvbnRyb2woKTt0aGlzLnJlZHJhdygpO3JldHVybiB0aGlzLmRpdn0sb25CdXR0b25DbGljazpmdW5jdGlvbihhKXthPWEuYnV0dG9uRWxlbWVudDthPT09dGhpcy5taW5pbWl6ZURpdj90aGlzLm1pbmltaXplQ29udHJvbCgpOmE9PT10aGlzLm1heGltaXplRGl2P3RoaXMubWF4aW1pemVDb250cm9sKCk6YS5fbGF5ZXJTd2l0Y2hlcj09PXRoaXMuaWQmJihhWyJmb3IiXSYmKGE9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYVsiZm9yIl0pKSxhLmRpc2FibGVkfHwoInJhZGlvIj09YS50eXBlPyhhLmNoZWNrZWQ9ITAsdGhpcy5tYXAuc2V0QmFzZUxheWVyKHRoaXMubWFwLmdldExheWVyKGEuX2xheWVyKSkpOgooYS5jaGVja2VkPSFhLmNoZWNrZWQsdGhpcy51cGRhdGVNYXAoKSkpKX0sY2xlYXJMYXllcnNBcnJheTpmdW5jdGlvbihhKXt0aGlzW2ErIkxheWVyc0RpdiJdLmlubmVySFRNTD0iIjt0aGlzW2ErIkxheWVycyJdPVtdfSxjaGVja1JlZHJhdzpmdW5jdGlvbigpe2lmKCF0aGlzLmxheWVyU3RhdGVzLmxlbmd0aHx8dGhpcy5tYXAubGF5ZXJzLmxlbmd0aCE9dGhpcy5sYXllclN0YXRlcy5sZW5ndGgpcmV0dXJuITA7Zm9yKHZhciBhPTAsYj10aGlzLmxheWVyU3RhdGVzLmxlbmd0aDthPGI7YSsrKXt2YXIgYz10aGlzLmxheWVyU3RhdGVzW2FdLGQ9dGhpcy5tYXAubGF5ZXJzW2FdO2lmKGMubmFtZSE9ZC5uYW1lfHxjLmluUmFuZ2UhPWQuaW5SYW5nZXx8Yy5pZCE9ZC5pZHx8Yy52aXNpYmlsaXR5IT1kLnZpc2liaWxpdHkpcmV0dXJuITB9cmV0dXJuITF9LHJlZHJhdzpmdW5jdGlvbigpe2lmKCF0aGlzLmNoZWNrUmVkcmF3KCkpcmV0dXJuIHRoaXMuZGl2O3RoaXMuY2xlYXJMYXllcnNBcnJheSgiYmFzZSIpOwp0aGlzLmNsZWFyTGF5ZXJzQXJyYXkoImRhdGEiKTt2YXIgYT0hMSxiPSExLGM9dGhpcy5tYXAubGF5ZXJzLmxlbmd0aDt0aGlzLmxheWVyU3RhdGVzPUFycmF5KGMpO2Zvcih2YXIgZD0wO2Q8YztkKyspe3ZhciBlPXRoaXMubWFwLmxheWVyc1tkXTt0aGlzLmxheWVyU3RhdGVzW2RdPXtuYW1lOmUubmFtZSx2aXNpYmlsaXR5OmUudmlzaWJpbGl0eSxpblJhbmdlOmUuaW5SYW5nZSxpZDplLmlkfX12YXIgZj10aGlzLm1hcC5sYXllcnMuc2xpY2UoKTt0aGlzLmFzY2VuZGluZ3x8Zi5yZXZlcnNlKCk7ZD0wO2ZvcihjPWYubGVuZ3RoO2Q8YztkKyspe3ZhciBlPWZbZF0sZz1lLmlzQmFzZUxheWVyO2lmKGUuZGlzcGxheUluTGF5ZXJTd2l0Y2hlcil7Zz9iPSEwOmE9ITA7dmFyIGg9Zz9lPT10aGlzLm1hcC5iYXNlTGF5ZXI6ZS5nZXRWaXNpYmlsaXR5KCksaz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbnB1dCIpLGw9T3BlbkxheWVycy5VdGlsLmNyZWF0ZVVuaXF1ZUlEKHRoaXMuaWQrCiJfaW5wdXRfIik7ay5pZD1sO2submFtZT1nP3RoaXMuaWQrIl9iYXNlTGF5ZXJzIjplLm5hbWU7ay50eXBlPWc/InJhZGlvIjoiY2hlY2tib3giO2sudmFsdWU9ZS5uYW1lO2suY2hlY2tlZD1oO2suZGVmYXVsdENoZWNrZWQ9aDtrLmNsYXNzTmFtZT0ib2xCdXR0b24iO2suX2xheWVyPWUuaWQ7ay5fbGF5ZXJTd2l0Y2hlcj10aGlzLmlkO2d8fGUuaW5SYW5nZXx8KGsuZGlzYWJsZWQ9ITApO2g9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgibGFiZWwiKTtoWyJmb3IiXT1rLmlkO09wZW5MYXllcnMuRWxlbWVudC5hZGRDbGFzcyhoLCJsYWJlbFNwYW4gb2xCdXR0b24iKTtoLl9sYXllcj1lLmlkO2guX2xheWVyU3dpdGNoZXI9dGhpcy5pZDtnfHxlLmluUmFuZ2V8fChoLnN0eWxlLmNvbG9yPSJncmF5Iik7aC5pbm5lckhUTUw9ZS5uYW1lO2guc3R5bGUudmVydGljYWxBbGlnbj1nPyJib3R0b20iOiJiYXNlbGluZSI7bD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJiciIpOyhnP3RoaXMuYmFzZUxheWVyczoKdGhpcy5kYXRhTGF5ZXJzKS5wdXNoKHtsYXllcjplLGlucHV0RWxlbTprLGxhYmVsU3BhbjpofSk7ZT1nP3RoaXMuYmFzZUxheWVyc0Rpdjp0aGlzLmRhdGFMYXllcnNEaXY7ZS5hcHBlbmRDaGlsZChrKTtlLmFwcGVuZENoaWxkKGgpO2UuYXBwZW5kQ2hpbGQobCl9fXRoaXMuZGF0YUxibC5zdHlsZS5kaXNwbGF5PWE/IiI6Im5vbmUiO3RoaXMuYmFzZUxibC5zdHlsZS5kaXNwbGF5PWI/IiI6Im5vbmUiO3JldHVybiB0aGlzLmRpdn0sdXBkYXRlTWFwOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPTAsYj10aGlzLmJhc2VMYXllcnMubGVuZ3RoO2E8YjthKyspe3ZhciBjPXRoaXMuYmFzZUxheWVyc1thXTtjLmlucHV0RWxlbS5jaGVja2VkJiZ0aGlzLm1hcC5zZXRCYXNlTGF5ZXIoYy5sYXllciwhMSl9YT0wO2ZvcihiPXRoaXMuZGF0YUxheWVycy5sZW5ndGg7YTxiO2ErKyljPXRoaXMuZGF0YUxheWVyc1thXSxjLmxheWVyLnNldFZpc2liaWxpdHkoYy5pbnB1dEVsZW0uY2hlY2tlZCl9LG1heGltaXplQ29udHJvbDpmdW5jdGlvbihhKXt0aGlzLmRpdi5zdHlsZS53aWR0aD0KIiI7dGhpcy5kaXYuc3R5bGUuaGVpZ2h0PSIiO3RoaXMuc2hvd0NvbnRyb2xzKCExKTtudWxsIT1hJiZPcGVuTGF5ZXJzLkV2ZW50LnN0b3AoYSl9LG1pbmltaXplQ29udHJvbDpmdW5jdGlvbihhKXt0aGlzLmRpdi5zdHlsZS53aWR0aD0iMHB4Ijt0aGlzLmRpdi5zdHlsZS5oZWlnaHQ9IjBweCI7dGhpcy5zaG93Q29udHJvbHMoITApO251bGwhPWEmJk9wZW5MYXllcnMuRXZlbnQuc3RvcChhKX0sc2hvd0NvbnRyb2xzOmZ1bmN0aW9uKGEpe3RoaXMubWF4aW1pemVEaXYuc3R5bGUuZGlzcGxheT1hPyIiOiJub25lIjt0aGlzLm1pbmltaXplRGl2LnN0eWxlLmRpc3BsYXk9YT8ibm9uZSI6IiI7dGhpcy5sYXllcnNEaXYuc3R5bGUuZGlzcGxheT1hPyJub25lIjoiIn0sbG9hZENvbnRlbnRzOmZ1bmN0aW9uKCl7dGhpcy5sYXllcnNEaXY9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7dGhpcy5sYXllcnNEaXYuaWQ9dGhpcy5pZCsiX2xheWVyc0RpdiI7T3BlbkxheWVycy5FbGVtZW50LmFkZENsYXNzKHRoaXMubGF5ZXJzRGl2LAoibGF5ZXJzRGl2Iik7dGhpcy5iYXNlTGJsPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO3RoaXMuYmFzZUxibC5pbm5lckhUTUw9T3BlbkxheWVycy5pMThuKCJCYXNlIExheWVyIik7T3BlbkxheWVycy5FbGVtZW50LmFkZENsYXNzKHRoaXMuYmFzZUxibCwiYmFzZUxibCIpO3RoaXMuYmFzZUxheWVyc0Rpdj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTtPcGVuTGF5ZXJzLkVsZW1lbnQuYWRkQ2xhc3ModGhpcy5iYXNlTGF5ZXJzRGl2LCJiYXNlTGF5ZXJzRGl2Iik7dGhpcy5kYXRhTGJsPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO3RoaXMuZGF0YUxibC5pbm5lckhUTUw9T3BlbkxheWVycy5pMThuKCJPdmVybGF5cyIpO09wZW5MYXllcnMuRWxlbWVudC5hZGRDbGFzcyh0aGlzLmRhdGFMYmwsImRhdGFMYmwiKTt0aGlzLmRhdGFMYXllcnNEaXY9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7T3BlbkxheWVycy5FbGVtZW50LmFkZENsYXNzKHRoaXMuZGF0YUxheWVyc0RpdiwKImRhdGFMYXllcnNEaXYiKTt0aGlzLmFzY2VuZGluZz8odGhpcy5sYXllcnNEaXYuYXBwZW5kQ2hpbGQodGhpcy5iYXNlTGJsKSx0aGlzLmxheWVyc0Rpdi5hcHBlbmRDaGlsZCh0aGlzLmJhc2VMYXllcnNEaXYpLHRoaXMubGF5ZXJzRGl2LmFwcGVuZENoaWxkKHRoaXMuZGF0YUxibCksdGhpcy5sYXllcnNEaXYuYXBwZW5kQ2hpbGQodGhpcy5kYXRhTGF5ZXJzRGl2KSk6KHRoaXMubGF5ZXJzRGl2LmFwcGVuZENoaWxkKHRoaXMuZGF0YUxibCksdGhpcy5sYXllcnNEaXYuYXBwZW5kQ2hpbGQodGhpcy5kYXRhTGF5ZXJzRGl2KSx0aGlzLmxheWVyc0Rpdi5hcHBlbmRDaGlsZCh0aGlzLmJhc2VMYmwpLHRoaXMubGF5ZXJzRGl2LmFwcGVuZENoaWxkKHRoaXMuYmFzZUxheWVyc0RpdikpO3RoaXMuZGl2LmFwcGVuZENoaWxkKHRoaXMubGF5ZXJzRGl2KTt2YXIgYT1PcGVuTGF5ZXJzLlV0aWwuZ2V0SW1hZ2VMb2NhdGlvbigibGF5ZXItc3dpdGNoZXItbWF4aW1pemUucG5nIik7dGhpcy5tYXhpbWl6ZURpdj0KT3BlbkxheWVycy5VdGlsLmNyZWF0ZUFscGhhSW1hZ2VEaXYoIk9wZW5MYXllcnNfQ29udHJvbF9NYXhpbWl6ZURpdiIsbnVsbCxudWxsLGEsImFic29sdXRlIik7T3BlbkxheWVycy5FbGVtZW50LmFkZENsYXNzKHRoaXMubWF4aW1pemVEaXYsIm1heGltaXplRGl2IG9sQnV0dG9uIik7dGhpcy5tYXhpbWl6ZURpdi5zdHlsZS5kaXNwbGF5PSJub25lIjt0aGlzLmRpdi5hcHBlbmRDaGlsZCh0aGlzLm1heGltaXplRGl2KTthPU9wZW5MYXllcnMuVXRpbC5nZXRJbWFnZUxvY2F0aW9uKCJsYXllci1zd2l0Y2hlci1taW5pbWl6ZS5wbmciKTt0aGlzLm1pbmltaXplRGl2PU9wZW5MYXllcnMuVXRpbC5jcmVhdGVBbHBoYUltYWdlRGl2KCJPcGVuTGF5ZXJzX0NvbnRyb2xfTWluaW1pemVEaXYiLG51bGwsbnVsbCxhLCJhYnNvbHV0ZSIpO09wZW5MYXllcnMuRWxlbWVudC5hZGRDbGFzcyh0aGlzLm1pbmltaXplRGl2LCJtaW5pbWl6ZURpdiBvbEJ1dHRvbiIpO3RoaXMubWluaW1pemVEaXYuc3R5bGUuZGlzcGxheT0KIm5vbmUiO3RoaXMuZGl2LmFwcGVuZENoaWxkKHRoaXMubWluaW1pemVEaXYpfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkNvbnRyb2wuTGF5ZXJTd2l0Y2hlciJ9KTsK",
                "body": "LyoKCiAgT3BlbkxheWVycy5qcyAtLSBPcGVuTGF5ZXJzIE1hcCBWaWV3ZXIgTGlicmFyeQoKICBDb3B5cmlnaHQgKGMpIDIwMDYtMjAxMyBieSBPcGVuTGF5ZXJzIENvbnRyaWJ1dG9ycwogIFB1Ymxpc2hlZCB1bmRlciB0aGUgMi1jbGF1c2UgQlNEIGxpY2Vuc2UuCiAgU2VlIGh0dHA6Ly9vcGVubGF5ZXJzLm9yZy9kZXYvbGljZW5zZS50eHQgZm9yIHRoZSBmdWxsIHRleHQgb2YgdGhlIGxpY2Vuc2UsIGFuZCBodHRwOi8vb3BlbmxheWVycy5vcmcvZGV2L2F1dGhvcnMudHh0IGZvciBmdWxsIGxpc3Qgb2YgY29udHJpYnV0b3JzLgoKICBJbmNsdWRlcyBjb21wcmVzc2VkIGNvZGUgdW5kZXIgdGhlIGZvbGxvd2luZyBsaWNlbnNlczoKCiAgKEZvciB1bmNvbXByZXNzZWQgdmVyc2lvbnMgb2YgdGhlIGNvZGUgdXNlZCwgcGxlYXNlIHNlZSB0aGUKICBPcGVuTGF5ZXJzIEdpdGh1YiByZXBvc2l0b3J5OiA8aHR0cHM6Ly9naXRodWIuY29tL29wZW5sYXllcnMvb3BlbmxheWVycz4pCgoqLwoKLyoqCiAqIENvbnRhaW5zIFhNTEh0dHBSZXF1ZXN0LmpzIDxodHRwOi8vY29kZS5nb29nbGUuY29tL3AveG1saHR0cHJlcXVlc3QvPgogKiBDb3B5cmlnaHQgMjAwNyBTZXJnZXkgSWxpbnNreSAoaHR0cDovL3d3dy5pbGluc2t5LmNvbSkKICoKICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKi8KCi8qKgogKiBPcGVuTGF5ZXJzLlV0aWwucGFnZVBvc2l0aW9uIGlzIGJhc2VkIG9uIFlhaG9vJ3MgZ2V0WFkgbWV0aG9kLCB3aGljaCBpcwogKiBDb3B5cmlnaHQgKGMpIDIwMDYsIFlhaG9vISBJbmMuCiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuCiAqIAogKiBSZWRpc3RyaWJ1dGlvbiBhbmQgdXNlIG9mIHRoaXMgc29mdHdhcmUgaW4gc291cmNlIGFuZCBiaW5hcnkgZm9ybXMsIHdpdGggb3IKICogd2l0aG91dCBtb2RpZmljYXRpb24sIGFyZSBwZXJtaXR0ZWQgcHJvdmlkZWQgdGhhdCB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnMKICogYXJlIG1ldDoKICogCiAqICogUmVkaXN0cmlidXRpb25zIG9mIHNvdXJjZSBjb2RlIG11c3QgcmV0YWluIHRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlLAogKiAgIHRoaXMgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIuCiAqIAogKiAqIFJlZGlzdHJpYnV0aW9ucyBpbiBiaW5hcnkgZm9ybSBtdXN0IHJlcHJvZHVjZSB0aGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSwKICogICB0aGlzIGxpc3Qgb2YgY29uZGl0aW9ucyBhbmQgdGhlIGZvbGxvd2luZyBkaXNjbGFpbWVyIGluIHRoZSBkb2N1bWVudGF0aW9uCiAqICAgYW5kL29yIG90aGVyIG1hdGVyaWFscyBwcm92aWRlZCB3aXRoIHRoZSBkaXN0cmlidXRpb24uCiAqIAogKiAqIE5laXRoZXIgdGhlIG5hbWUgb2YgWWFob28hIEluYy4gbm9yIHRoZSBuYW1lcyBvZiBpdHMgY29udHJpYnV0b3JzIG1heSBiZQogKiAgIHVzZWQgdG8gZW5kb3JzZSBvciBwcm9tb3RlIHByb2R1Y3RzIGRlcml2ZWQgZnJvbSB0aGlzIHNvZnR3YXJlIHdpdGhvdXQKICogICBzcGVjaWZpYyBwcmlvciB3cml0dGVuIHBlcm1pc3Npb24gb2YgWWFob28hIEluYy4KICogCiAqIFRISVMgU09GVFdBUkUgSVMgUFJPVklERUQgQlkgVEhFIENPUFlSSUdIVCBIT0xERVJTIEFORCBDT05UUklCVVRPUlMgIkFTIElTIgogKiBBTkQgQU5ZIEVYUFJFU1MgT1IgSU1QTElFRCBXQVJSQU5USUVTLCBJTkNMVURJTkcsIEJVVCBOT1QgTElNSVRFRCBUTywgVEhFCiAqIElNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFkgQU5EIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFCiAqIEFSRSBESVNDTEFJTUVELiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQ09QWVJJR0hUIE9XTkVSIE9SIENPTlRSSUJVVE9SUyBCRQogKiBMSUFCTEUgRk9SIEFOWSBESVJFQ1QsIElORElSRUNULCBJTkNJREVOVEFMLCBTUEVDSUFMLCBFWEVNUExBUlksIE9SCiAqIENPTlNFUVVFTlRJQUwgREFNQUdFUyAoSU5DTFVESU5HLCBCVVQgTk9UIExJTUlURUQgVE8sIFBST0NVUkVNRU5UIE9GCiAqIFNVQlNUSVRVVEUgR09PRFMgT1IgU0VSVklDRVM7IExPU1MgT0YgVVNFLCBEQVRBLCBPUiBQUk9GSVRTOyBPUiBCVVNJTkVTUwogKiBJTlRFUlJVUFRJT04pIEhPV0VWRVIgQ0FVU0VEIEFORCBPTiBBTlkgVEhFT1JZIE9GIExJQUJJTElUWSwgV0hFVEhFUiBJTgogKiBDT05UUkFDVCwgU1RSSUNUIExJQUJJTElUWSwgT1IgVE9SVCAoSU5DTFVESU5HIE5FR0xJR0VOQ0UgT1IgT1RIRVJXSVNFKQogKiBBUklTSU5HIElOIEFOWSBXQVkgT1VUIE9GIFRIRSBVU0UgT0YgVEhJUyBTT0ZUV0FSRSwgRVZFTiBJRiBBRFZJU0VEIE9GIFRIRSAKICogUE9TU0lCSUxJVFkgT0YgU1VDSCBEQU1BR0UuCiAqLwp2YXIgT3BlbkxheWVycz17VkVSU0lPTl9OVU1CRVI6IlJlbGVhc2UgMi4xMy4xIixzaW5nbGVGaWxlOiEwLF9nZXRTY3JpcHRMb2NhdGlvbjpmdW5jdGlvbigpe2Zvcih2YXIgYT0vKF58KC4qP1wvKSkoT3BlbkxheWVyc1teXC9dKj9cLmpzKShcP3wkKS8sYj1kb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgic2NyaXB0IiksYyxkPSIiLGU9MCxmPWIubGVuZ3RoO2U8ZjtlKyspaWYoYz1iW2VdLmdldEF0dHJpYnV0ZSgic3JjIikpaWYoYz1jLm1hdGNoKGEpKXtkPWNbMV07YnJlYWt9cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGR9fSgpLEltZ1BhdGg6IiJ9O09wZW5MYXllcnMuU3RyaW5nPXtzdGFydHNXaXRoOmZ1bmN0aW9uKGEsYil7cmV0dXJuIDA9PWEuaW5kZXhPZihiKX0sY29udGFpbnM6ZnVuY3Rpb24oYSxiKXtyZXR1cm4tMSE9YS5pbmRleE9mKGIpfSx0cmltOmZ1bmN0aW9uKGEpe3JldHVybiBhLnJlcGxhY2UoL15cc1xzKi8sIiIpLnJlcGxhY2UoL1xzXHMqJC8sIiIpfSxjYW1lbGl6ZTpmdW5jdGlvbihhKXthPWEuc3BsaXQoIi0iKTtmb3IodmFyIGI9YVswXSxjPTEsZD1hLmxlbmd0aDtjPGQ7YysrKXZhciBlPWFbY10sYj1iKyhlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpK2Uuc3Vic3RyaW5nKDEpKTtyZXR1cm4gYn0sZm9ybWF0OmZ1bmN0aW9uKGEsYixjKXtifHwoYj13aW5kb3cpO3JldHVybiBhLnJlcGxhY2UoT3BlbkxheWVycy5TdHJpbmcudG9rZW5SZWdFeCxmdW5jdGlvbihhLGUpe2Zvcih2YXIgZixnPWUuc3BsaXQoL1wuKy8pLGg9MDtoPGcubGVuZ3RoO2grKyl7MD09aCYmKGY9Yik7aWYodm9pZCAwPT09ZilicmVhazsKZj1mW2dbaF1dfSJmdW5jdGlvbiI9PXR5cGVvZiBmJiYoZj1jP2YuYXBwbHkobnVsbCxjKTpmKCkpO3JldHVybiJ1bmRlZmluZWQiPT10eXBlb2YgZj8idW5kZWZpbmVkIjpmfSl9LHRva2VuUmVnRXg6L1wkXHsoW1x3Ll0rPylcfS9nLG51bWJlclJlZ0V4Oi9eKFsrLV0/KSg/PVxkfFwuXGQpXGQqKFwuXGQqKT8oW0VlXShbKy1dP1xkKykpPyQvLGlzTnVtZXJpYzpmdW5jdGlvbihhKXtyZXR1cm4gT3BlbkxheWVycy5TdHJpbmcubnVtYmVyUmVnRXgudGVzdChhKX0sbnVtZXJpY0lmOmZ1bmN0aW9uKGEsYil7dmFyIGM9YTshMD09PWImJihudWxsIT1hJiZhLnJlcGxhY2UpJiYoYT1hLnJlcGxhY2UoL15ccyp8XHMqJC9nLCIiKSk7cmV0dXJuIE9wZW5MYXllcnMuU3RyaW5nLmlzTnVtZXJpYyhhKT9wYXJzZUZsb2F0KGEpOmN9fTsKT3BlbkxheWVycy5OdW1iZXI9e2RlY2ltYWxTZXBhcmF0b3I6Ii4iLHRob3VzYW5kc1NlcGFyYXRvcjoiLCIsbGltaXRTaWdEaWdzOmZ1bmN0aW9uKGEsYil7dmFyIGM9MDswPGImJihjPXBhcnNlRmxvYXQoYS50b1ByZWNpc2lvbihiKSkpO3JldHVybiBjfSxmb3JtYXQ6ZnVuY3Rpb24oYSxiLGMsZCl7Yj0idW5kZWZpbmVkIiE9dHlwZW9mIGI/YjowO2M9InVuZGVmaW5lZCIhPXR5cGVvZiBjP2M6T3BlbkxheWVycy5OdW1iZXIudGhvdXNhbmRzU2VwYXJhdG9yO2Q9InVuZGVmaW5lZCIhPXR5cGVvZiBkP2Q6T3BlbkxheWVycy5OdW1iZXIuZGVjaW1hbFNlcGFyYXRvcjtudWxsIT1iJiYoYT1wYXJzZUZsb2F0KGEudG9GaXhlZChiKSkpO3ZhciBlPWEudG9TdHJpbmcoKS5zcGxpdCgiLiIpOzE9PWUubGVuZ3RoJiZudWxsPT1iJiYoYj0wKTthPWVbMF07aWYoYylmb3IodmFyIGY9LygtP1swLTldKykoWzAtOV17M30pLztmLnRlc3QoYSk7KWE9YS5yZXBsYWNlKGYsIiQxIitjKyIkMiIpOwowPT1iP2I9YTooYz0xPGUubGVuZ3RoP2VbMV06IjAiLG51bGwhPWImJihjKz1BcnJheShiLWMubGVuZ3RoKzEpLmpvaW4oIjAiKSksYj1hK2QrYyk7cmV0dXJuIGJ9LHplcm9QYWQ6ZnVuY3Rpb24oYSxiLGMpe2ZvcihhPWEudG9TdHJpbmcoY3x8MTApO2EubGVuZ3RoPGI7KWE9IjAiK2E7cmV0dXJuIGF9fTsKT3BlbkxheWVycy5GdW5jdGlvbj17YmluZDpmdW5jdGlvbihhLGIpe3ZhciBjPUFycmF5LnByb3RvdHlwZS5zbGljZS5hcHBseShhcmd1bWVudHMsWzJdKTtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgZD1jLmNvbmNhdChBcnJheS5wcm90b3R5cGUuc2xpY2UuYXBwbHkoYXJndW1lbnRzLFswXSkpO3JldHVybiBhLmFwcGx5KGIsZCl9fSxiaW5kQXNFdmVudExpc3RlbmVyOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGZ1bmN0aW9uKGMpe3JldHVybiBhLmNhbGwoYixjfHx3aW5kb3cuZXZlbnQpfX0sRmFsc2U6ZnVuY3Rpb24oKXtyZXR1cm4hMX0sVHJ1ZTpmdW5jdGlvbigpe3JldHVybiEwfSxWb2lkOmZ1bmN0aW9uKCl7fX07Ck9wZW5MYXllcnMuQXJyYXk9e2ZpbHRlcjpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9W107aWYoQXJyYXkucHJvdG90eXBlLmZpbHRlcilkPWEuZmlsdGVyKGIsYyk7ZWxzZXt2YXIgZT1hLmxlbmd0aDtpZigiZnVuY3Rpb24iIT10eXBlb2YgYil0aHJvdyBuZXcgVHlwZUVycm9yO2Zvcih2YXIgZj0wO2Y8ZTtmKyspaWYoZiBpbiBhKXt2YXIgZz1hW2ZdO2IuY2FsbChjLGcsZixhKSYmZC5wdXNoKGcpfX1yZXR1cm4gZH19O09wZW5MYXllcnMuQ2xhc3M9ZnVuY3Rpb24oKXt2YXIgYT1hcmd1bWVudHMubGVuZ3RoLGI9YXJndW1lbnRzWzBdLGM9YXJndW1lbnRzW2EtMV0sZD0iZnVuY3Rpb24iPT10eXBlb2YgYy5pbml0aWFsaXplP2MuaW5pdGlhbGl6ZTpmdW5jdGlvbigpe2IucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxhcmd1bWVudHMpfTsxPGE/KGE9W2QsYl0uY29uY2F0KEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cykuc2xpY2UoMSxhLTEpLGMpLE9wZW5MYXllcnMuaW5oZXJpdC5hcHBseShudWxsLGEpKTpkLnByb3RvdHlwZT1jO3JldHVybiBkfTsKT3BlbkxheWVycy5pbmhlcml0PWZ1bmN0aW9uKGEsYil7dmFyIGM9ZnVuY3Rpb24oKXt9O2MucHJvdG90eXBlPWIucHJvdG90eXBlO2EucHJvdG90eXBlPW5ldyBjO3ZhciBkLGUsYz0yO2ZvcihkPWFyZ3VtZW50cy5sZW5ndGg7YzxkO2MrKyllPWFyZ3VtZW50c1tjXSwiZnVuY3Rpb24iPT09dHlwZW9mIGUmJihlPWUucHJvdG90eXBlKSxPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKGEucHJvdG90eXBlLGUpfTtPcGVuTGF5ZXJzLlV0aWw9T3BlbkxheWVycy5VdGlsfHx7fTtPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kPWZ1bmN0aW9uKGEsYil7YT1hfHx7fTtpZihiKXtmb3IodmFyIGMgaW4gYil7dmFyIGQ9YltjXTt2b2lkIDAhPT1kJiYoYVtjXT1kKX0iZnVuY3Rpb24iPT10eXBlb2Ygd2luZG93LkV2ZW50JiZiIGluc3RhbmNlb2Ygd2luZG93LkV2ZW50fHwoIWIuaGFzT3duUHJvcGVydHl8fCFiLmhhc093blByb3BlcnR5KCJ0b1N0cmluZyIpKXx8KGEudG9TdHJpbmc9Yi50b1N0cmluZyl9cmV0dXJuIGF9O09wZW5MYXllcnMuQm91bmRzPU9wZW5MYXllcnMuQ2xhc3Moe2xlZnQ6bnVsbCxib3R0b206bnVsbCxyaWdodDpudWxsLHRvcDpudWxsLGNlbnRlckxvbkxhdDpudWxsLGluaXRpYWxpemU6ZnVuY3Rpb24oYSxiLGMsZCl7T3BlbkxheWVycy5VdGlsLmlzQXJyYXkoYSkmJihkPWFbM10sYz1hWzJdLGI9YVsxXSxhPWFbMF0pO251bGwhPWEmJih0aGlzLmxlZnQ9T3BlbkxheWVycy5VdGlsLnRvRmxvYXQoYSkpO251bGwhPWImJih0aGlzLmJvdHRvbT1PcGVuTGF5ZXJzLlV0aWwudG9GbG9hdChiKSk7bnVsbCE9YyYmKHRoaXMucmlnaHQ9T3BlbkxheWVycy5VdGlsLnRvRmxvYXQoYykpO251bGwhPWQmJih0aGlzLnRvcD1PcGVuTGF5ZXJzLlV0aWwudG9GbG9hdChkKSl9LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLkJvdW5kcyh0aGlzLmxlZnQsdGhpcy5ib3R0b20sdGhpcy5yaWdodCx0aGlzLnRvcCl9LGVxdWFsczpmdW5jdGlvbihhKXt2YXIgYj0hMTtudWxsIT0KYSYmKGI9dGhpcy5sZWZ0PT1hLmxlZnQmJnRoaXMucmlnaHQ9PWEucmlnaHQmJnRoaXMudG9wPT1hLnRvcCYmdGhpcy5ib3R0b209PWEuYm90dG9tKTtyZXR1cm4gYn0sdG9TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm5bdGhpcy5sZWZ0LHRoaXMuYm90dG9tLHRoaXMucmlnaHQsdGhpcy50b3BdLmpvaW4oKX0sdG9BcnJheTpmdW5jdGlvbihhKXtyZXR1cm4hMD09PWE/W3RoaXMuYm90dG9tLHRoaXMubGVmdCx0aGlzLnRvcCx0aGlzLnJpZ2h0XTpbdGhpcy5sZWZ0LHRoaXMuYm90dG9tLHRoaXMucmlnaHQsdGhpcy50b3BdfSx0b0JCT1g6ZnVuY3Rpb24oYSxiKXtudWxsPT1hJiYoYT02KTt2YXIgYz1NYXRoLnBvdygxMCxhKSxkPU1hdGgucm91bmQodGhpcy5sZWZ0KmMpL2MsZT1NYXRoLnJvdW5kKHRoaXMuYm90dG9tKmMpL2MsZj1NYXRoLnJvdW5kKHRoaXMucmlnaHQqYykvYyxjPU1hdGgucm91bmQodGhpcy50b3AqYykvYztyZXR1cm4hMD09PWI/ZSsiLCIrZCsiLCIrYysiLCIrZjpkKwoiLCIrZSsiLCIrZisiLCIrY30sdG9HZW9tZXRyeTpmdW5jdGlvbigpe3JldHVybiBuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2x5Z29uKFtuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5MaW5lYXJSaW5nKFtuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludCh0aGlzLmxlZnQsdGhpcy5ib3R0b20pLG5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KHRoaXMucmlnaHQsdGhpcy5ib3R0b20pLG5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KHRoaXMucmlnaHQsdGhpcy50b3ApLG5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KHRoaXMubGVmdCx0aGlzLnRvcCldKV0pfSxnZXRXaWR0aDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnJpZ2h0LXRoaXMubGVmdH0sZ2V0SGVpZ2h0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudG9wLXRoaXMuYm90dG9tfSxnZXRTaXplOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLlNpemUodGhpcy5nZXRXaWR0aCgpLHRoaXMuZ2V0SGVpZ2h0KCkpfSwKZ2V0Q2VudGVyUGl4ZWw6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IE9wZW5MYXllcnMuUGl4ZWwoKHRoaXMubGVmdCt0aGlzLnJpZ2h0KS8yLCh0aGlzLmJvdHRvbSt0aGlzLnRvcCkvMil9LGdldENlbnRlckxvbkxhdDpmdW5jdGlvbigpe3RoaXMuY2VudGVyTG9uTGF0fHwodGhpcy5jZW50ZXJMb25MYXQ9bmV3IE9wZW5MYXllcnMuTG9uTGF0KCh0aGlzLmxlZnQrdGhpcy5yaWdodCkvMiwodGhpcy5ib3R0b20rdGhpcy50b3ApLzIpKTtyZXR1cm4gdGhpcy5jZW50ZXJMb25MYXR9LHNjYWxlOmZ1bmN0aW9uKGEsYil7bnVsbD09YiYmKGI9dGhpcy5nZXRDZW50ZXJMb25MYXQoKSk7dmFyIGMsZDsiT3BlbkxheWVycy5Mb25MYXQiPT1iLkNMQVNTX05BTUU/KGM9Yi5sb24sZD1iLmxhdCk6KGM9Yi54LGQ9Yi55KTtyZXR1cm4gbmV3IE9wZW5MYXllcnMuQm91bmRzKCh0aGlzLmxlZnQtYykqYStjLCh0aGlzLmJvdHRvbS1kKSphK2QsKHRoaXMucmlnaHQtYykqYStjLCh0aGlzLnRvcC1kKSphKwpkKX0sYWRkOmZ1bmN0aW9uKGEsYil7aWYobnVsbD09YXx8bnVsbD09Yil0aHJvdyBuZXcgVHlwZUVycm9yKCJCb3VuZHMuYWRkIGNhbm5vdCByZWNlaXZlIG51bGwgdmFsdWVzIik7cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLkJvdW5kcyh0aGlzLmxlZnQrYSx0aGlzLmJvdHRvbStiLHRoaXMucmlnaHQrYSx0aGlzLnRvcCtiKX0sZXh0ZW5kOmZ1bmN0aW9uKGEpe2lmKGEpc3dpdGNoKGEuQ0xBU1NfTkFNRSl7Y2FzZSAiT3BlbkxheWVycy5Mb25MYXQiOnRoaXMuZXh0ZW5kWFkoYS5sb24sYS5sYXQpO2JyZWFrO2Nhc2UgIk9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQiOnRoaXMuZXh0ZW5kWFkoYS54LGEueSk7YnJlYWs7Y2FzZSAiT3BlbkxheWVycy5Cb3VuZHMiOnRoaXMuY2VudGVyTG9uTGF0PW51bGw7aWYobnVsbD09dGhpcy5sZWZ0fHxhLmxlZnQ8dGhpcy5sZWZ0KXRoaXMubGVmdD1hLmxlZnQ7aWYobnVsbD09dGhpcy5ib3R0b218fGEuYm90dG9tPHRoaXMuYm90dG9tKXRoaXMuYm90dG9tPQphLmJvdHRvbTtpZihudWxsPT10aGlzLnJpZ2h0fHxhLnJpZ2h0PnRoaXMucmlnaHQpdGhpcy5yaWdodD1hLnJpZ2h0O2lmKG51bGw9PXRoaXMudG9wfHxhLnRvcD50aGlzLnRvcCl0aGlzLnRvcD1hLnRvcH19LGV4dGVuZFhZOmZ1bmN0aW9uKGEsYil7dGhpcy5jZW50ZXJMb25MYXQ9bnVsbDtpZihudWxsPT10aGlzLmxlZnR8fGE8dGhpcy5sZWZ0KXRoaXMubGVmdD1hO2lmKG51bGw9PXRoaXMuYm90dG9tfHxiPHRoaXMuYm90dG9tKXRoaXMuYm90dG9tPWI7aWYobnVsbD09dGhpcy5yaWdodHx8YT50aGlzLnJpZ2h0KXRoaXMucmlnaHQ9YTtpZihudWxsPT10aGlzLnRvcHx8Yj50aGlzLnRvcCl0aGlzLnRvcD1ifSxjb250YWluc0xvbkxhdDpmdW5jdGlvbihhLGIpeyJib29sZWFuIj09PXR5cGVvZiBiJiYoYj17aW5jbHVzaXZlOmJ9KTtiPWJ8fHt9O3ZhciBjPXRoaXMuY29udGFpbnMoYS5sb24sYS5sYXQsYi5pbmNsdXNpdmUpLGQ9Yi53b3JsZEJvdW5kcztkJiYhYyYmKGM9ZC5nZXRXaWR0aCgpLApkPU1hdGgucm91bmQoKGEubG9uLShkLmxlZnQrZC5yaWdodCkvMikvYyksYz10aGlzLmNvbnRhaW5zTG9uTGF0KHtsb246YS5sb24tZCpjLGxhdDphLmxhdH0se2luY2x1c2l2ZTpiLmluY2x1c2l2ZX0pKTtyZXR1cm4gY30sY29udGFpbnNQaXhlbDpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLmNvbnRhaW5zKGEueCxhLnksYil9LGNvbnRhaW5zOmZ1bmN0aW9uKGEsYixjKXtudWxsPT1jJiYoYz0hMCk7aWYobnVsbD09YXx8bnVsbD09YilyZXR1cm4hMTthPU9wZW5MYXllcnMuVXRpbC50b0Zsb2F0KGEpO2I9T3BlbkxheWVycy5VdGlsLnRvRmxvYXQoYik7dmFyIGQ9ITE7cmV0dXJuIGQ9Yz9hPj10aGlzLmxlZnQmJmE8PXRoaXMucmlnaHQmJmI+PXRoaXMuYm90dG9tJiZiPD10aGlzLnRvcDphPnRoaXMubGVmdCYmYTx0aGlzLnJpZ2h0JiZiPnRoaXMuYm90dG9tJiZiPHRoaXMudG9wfSxpbnRlcnNlY3RzQm91bmRzOmZ1bmN0aW9uKGEsYil7ImJvb2xlYW4iPT09dHlwZW9mIGImJihiPQp7aW5jbHVzaXZlOmJ9KTtiPWJ8fHt9O2lmKGIud29ybGRCb3VuZHMpe3ZhciBjPXRoaXMud3JhcERhdGVMaW5lKGIud29ybGRCb3VuZHMpO2E9YS53cmFwRGF0ZUxpbmUoYi53b3JsZEJvdW5kcyl9ZWxzZSBjPXRoaXM7bnVsbD09Yi5pbmNsdXNpdmUmJihiLmluY2x1c2l2ZT0hMCk7dmFyIGQ9ITEsZT1jLmxlZnQ9PWEucmlnaHR8fGMucmlnaHQ9PWEubGVmdHx8Yy50b3A9PWEuYm90dG9tfHxjLmJvdHRvbT09YS50b3A7aWYoYi5pbmNsdXNpdmV8fCFlKXZhciBkPWEudG9wPj1jLmJvdHRvbSYmYS50b3A8PWMudG9wfHxjLnRvcD5hLmJvdHRvbSYmYy50b3A8YS50b3AsZT1hLmxlZnQ+PWMubGVmdCYmYS5sZWZ0PD1jLnJpZ2h0fHxjLmxlZnQ+PWEubGVmdCYmYy5sZWZ0PD1hLnJpZ2h0LGY9YS5yaWdodD49Yy5sZWZ0JiZhLnJpZ2h0PD1jLnJpZ2h0fHxjLnJpZ2h0Pj1hLmxlZnQmJmMucmlnaHQ8PWEucmlnaHQsZD0oYS5ib3R0b20+PWMuYm90dG9tJiZhLmJvdHRvbTw9Yy50b3B8fGMuYm90dG9tPj0KYS5ib3R0b20mJmMuYm90dG9tPD1hLnRvcHx8ZCkmJihlfHxmKTtpZihiLndvcmxkQm91bmRzJiYhZCl7dmFyIGc9Yi53b3JsZEJvdW5kcyxlPWcuZ2V0V2lkdGgoKSxmPSFnLmNvbnRhaW5zQm91bmRzKGMpLGc9IWcuY29udGFpbnNCb3VuZHMoYSk7ZiYmIWc/KGE9YS5hZGQoLWUsMCksZD1jLmludGVyc2VjdHNCb3VuZHMoYSx7aW5jbHVzaXZlOmIuaW5jbHVzaXZlfSkpOmcmJiFmJiYoYz1jLmFkZCgtZSwwKSxkPWEuaW50ZXJzZWN0c0JvdW5kcyhjLHtpbmNsdXNpdmU6Yi5pbmNsdXNpdmV9KSl9cmV0dXJuIGR9LGNvbnRhaW5zQm91bmRzOmZ1bmN0aW9uKGEsYixjKXtudWxsPT1iJiYoYj0hMSk7bnVsbD09YyYmKGM9ITApO3ZhciBkPXRoaXMuY29udGFpbnMoYS5sZWZ0LGEuYm90dG9tLGMpLGU9dGhpcy5jb250YWlucyhhLnJpZ2h0LGEuYm90dG9tLGMpLGY9dGhpcy5jb250YWlucyhhLmxlZnQsYS50b3AsYyk7YT10aGlzLmNvbnRhaW5zKGEucmlnaHQsYS50b3AsYyk7cmV0dXJuIGI/CmR8fGV8fGZ8fGE6ZCYmZSYmZiYmYX0sZGV0ZXJtaW5lUXVhZHJhbnQ6ZnVuY3Rpb24oYSl7dmFyIGI9IiIsYz10aGlzLmdldENlbnRlckxvbkxhdCgpLGI9YisoYS5sYXQ8Yy5sYXQ/ImIiOiJ0Iik7cmV0dXJuIGIrPWEubG9uPGMubG9uPyJsIjoiciJ9LHRyYW5zZm9ybTpmdW5jdGlvbihhLGIpe3RoaXMuY2VudGVyTG9uTGF0PW51bGw7dmFyIGM9T3BlbkxheWVycy5Qcm9qZWN0aW9uLnRyYW5zZm9ybSh7eDp0aGlzLmxlZnQseTp0aGlzLmJvdHRvbX0sYSxiKSxkPU9wZW5MYXllcnMuUHJvamVjdGlvbi50cmFuc2Zvcm0oe3g6dGhpcy5yaWdodCx5OnRoaXMuYm90dG9tfSxhLGIpLGU9T3BlbkxheWVycy5Qcm9qZWN0aW9uLnRyYW5zZm9ybSh7eDp0aGlzLmxlZnQseTp0aGlzLnRvcH0sYSxiKSxmPU9wZW5MYXllcnMuUHJvamVjdGlvbi50cmFuc2Zvcm0oe3g6dGhpcy5yaWdodCx5OnRoaXMudG9wfSxhLGIpO3RoaXMubGVmdD1NYXRoLm1pbihjLngsZS54KTt0aGlzLmJvdHRvbT1NYXRoLm1pbihjLnksCmQueSk7dGhpcy5yaWdodD1NYXRoLm1heChkLngsZi54KTt0aGlzLnRvcD1NYXRoLm1heChlLnksZi55KTtyZXR1cm4gdGhpc30sd3JhcERhdGVMaW5lOmZ1bmN0aW9uKGEsYil7Yj1ifHx7fTt2YXIgYz1iLmxlZnRUb2xlcmFuY2V8fDAsZD1iLnJpZ2h0VG9sZXJhbmNlfHwwLGU9dGhpcy5jbG9uZSgpO2lmKGEpe2Zvcih2YXIgZj1hLmdldFdpZHRoKCk7ZS5sZWZ0PGEubGVmdCYmZS5yaWdodC1kPD1hLmxlZnQ7KWU9ZS5hZGQoZiwwKTtmb3IoO2UubGVmdCtjPj1hLnJpZ2h0JiZlLnJpZ2h0PmEucmlnaHQ7KWU9ZS5hZGQoLWYsMCk7Yz1lLmxlZnQrYztjPGEucmlnaHQmJihjPmEubGVmdCYmZS5yaWdodC1kPmEucmlnaHQpJiYoZT1lLmFkZCgtZiwwKSl9cmV0dXJuIGV9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuQm91bmRzIn0pOwpPcGVuTGF5ZXJzLkJvdW5kcy5mcm9tU3RyaW5nPWZ1bmN0aW9uKGEsYil7dmFyIGM9YS5zcGxpdCgiLCIpO3JldHVybiBPcGVuTGF5ZXJzLkJvdW5kcy5mcm9tQXJyYXkoYyxiKX07T3BlbkxheWVycy5Cb3VuZHMuZnJvbUFycmF5PWZ1bmN0aW9uKGEsYil7cmV0dXJuITA9PT1iP25ldyBPcGVuTGF5ZXJzLkJvdW5kcyhhWzFdLGFbMF0sYVszXSxhWzJdKTpuZXcgT3BlbkxheWVycy5Cb3VuZHMoYVswXSxhWzFdLGFbMl0sYVszXSl9O09wZW5MYXllcnMuQm91bmRzLmZyb21TaXplPWZ1bmN0aW9uKGEpe3JldHVybiBuZXcgT3BlbkxheWVycy5Cb3VuZHMoMCxhLmgsYS53LDApfTtPcGVuTGF5ZXJzLkJvdW5kcy5vcHBvc2l0ZVF1YWRyYW50PWZ1bmN0aW9uKGEpe3ZhciBiO2I9IiIrKCJ0Ij09YS5jaGFyQXQoMCk/ImIiOiJ0Iik7cmV0dXJuIGIrPSJsIj09YS5jaGFyQXQoMSk/InIiOiJsIn07T3BlbkxheWVycy5FbGVtZW50PXt2aXNpYmxlOmZ1bmN0aW9uKGEpe3JldHVybiJub25lIiE9T3BlbkxheWVycy5VdGlsLmdldEVsZW1lbnQoYSkuc3R5bGUuZGlzcGxheX0sdG9nZ2xlOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPTAsYj1hcmd1bWVudHMubGVuZ3RoO2E8YjthKyspe3ZhciBjPU9wZW5MYXllcnMuVXRpbC5nZXRFbGVtZW50KGFyZ3VtZW50c1thXSksZD1PcGVuTGF5ZXJzLkVsZW1lbnQudmlzaWJsZShjKT8ibm9uZSI6IiI7Yy5zdHlsZS5kaXNwbGF5PWR9fSxyZW1vdmU6ZnVuY3Rpb24oYSl7YT1PcGVuTGF5ZXJzLlV0aWwuZ2V0RWxlbWVudChhKTthLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYSl9LGdldEhlaWdodDpmdW5jdGlvbihhKXthPU9wZW5MYXllcnMuVXRpbC5nZXRFbGVtZW50KGEpO3JldHVybiBhLm9mZnNldEhlaWdodH0saGFzQ2xhc3M6ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLmNsYXNzTmFtZTtyZXR1cm4hIWMmJlJlZ0V4cCgiKF58XFxzKSIrYisiKFxcc3wkKSIpLnRlc3QoYyl9LAphZGRDbGFzczpmdW5jdGlvbihhLGIpe09wZW5MYXllcnMuRWxlbWVudC5oYXNDbGFzcyhhLGIpfHwoYS5jbGFzc05hbWUrPShhLmNsYXNzTmFtZT8iICI6IiIpK2IpO3JldHVybiBhfSxyZW1vdmVDbGFzczpmdW5jdGlvbihhLGIpe3ZhciBjPWEuY2xhc3NOYW1lO2MmJihhLmNsYXNzTmFtZT1PcGVuTGF5ZXJzLlN0cmluZy50cmltKGMucmVwbGFjZShSZWdFeHAoIihefFxccyspIitiKyIoXFxzK3wkKSIpLCIgIikpKTtyZXR1cm4gYX0sdG9nZ2xlQ2xhc3M6ZnVuY3Rpb24oYSxiKXtPcGVuTGF5ZXJzLkVsZW1lbnQuaGFzQ2xhc3MoYSxiKT9PcGVuTGF5ZXJzLkVsZW1lbnQucmVtb3ZlQ2xhc3MoYSxiKTpPcGVuTGF5ZXJzLkVsZW1lbnQuYWRkQ2xhc3MoYSxiKTtyZXR1cm4gYX0sZ2V0U3R5bGU6ZnVuY3Rpb24oYSxiKXthPU9wZW5MYXllcnMuVXRpbC5nZXRFbGVtZW50KGEpO3ZhciBjPW51bGw7aWYoYSYmYS5zdHlsZSl7Yz1hLnN0eWxlW09wZW5MYXllcnMuU3RyaW5nLmNhbWVsaXplKGIpXTsKY3x8KGRvY3VtZW50LmRlZmF1bHRWaWV3JiZkb2N1bWVudC5kZWZhdWx0Vmlldy5nZXRDb21wdXRlZFN0eWxlP2M9KGM9ZG9jdW1lbnQuZGVmYXVsdFZpZXcuZ2V0Q29tcHV0ZWRTdHlsZShhLG51bGwpKT9jLmdldFByb3BlcnR5VmFsdWUoYik6bnVsbDphLmN1cnJlbnRTdHlsZSYmKGM9YS5jdXJyZW50U3R5bGVbT3BlbkxheWVycy5TdHJpbmcuY2FtZWxpemUoYildKSk7dmFyIGQ9WyJsZWZ0IiwidG9wIiwicmlnaHQiLCJib3R0b20iXTt3aW5kb3cub3BlcmEmJigtMSE9T3BlbkxheWVycy5VdGlsLmluZGV4T2YoZCxiKSYmInN0YXRpYyI9PU9wZW5MYXllcnMuRWxlbWVudC5nZXRTdHlsZShhLCJwb3NpdGlvbiIpKSYmKGM9ImF1dG8iKX1yZXR1cm4iYXV0byI9PWM/bnVsbDpjfX07T3BlbkxheWVycy5Mb25MYXQ9T3BlbkxheWVycy5DbGFzcyh7bG9uOjAsbGF0OjAsaW5pdGlhbGl6ZTpmdW5jdGlvbihhLGIpe09wZW5MYXllcnMuVXRpbC5pc0FycmF5KGEpJiYoYj1hWzFdLGE9YVswXSk7dGhpcy5sb249T3BlbkxheWVycy5VdGlsLnRvRmxvYXQoYSk7dGhpcy5sYXQ9T3BlbkxheWVycy5VdGlsLnRvRmxvYXQoYil9LHRvU3RyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuImxvbj0iK3RoaXMubG9uKyIsbGF0PSIrdGhpcy5sYXR9LHRvU2hvcnRTdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sb24rIiwgIit0aGlzLmxhdH0sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IE9wZW5MYXllcnMuTG9uTGF0KHRoaXMubG9uLHRoaXMubGF0KX0sYWRkOmZ1bmN0aW9uKGEsYil7aWYobnVsbD09YXx8bnVsbD09Yil0aHJvdyBuZXcgVHlwZUVycm9yKCJMb25MYXQuYWRkIGNhbm5vdCByZWNlaXZlIG51bGwgdmFsdWVzIik7cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLkxvbkxhdCh0aGlzLmxvbisKT3BlbkxheWVycy5VdGlsLnRvRmxvYXQoYSksdGhpcy5sYXQrT3BlbkxheWVycy5VdGlsLnRvRmxvYXQoYikpfSxlcXVhbHM6ZnVuY3Rpb24oYSl7dmFyIGI9ITE7bnVsbCE9YSYmKGI9dGhpcy5sb249PWEubG9uJiZ0aGlzLmxhdD09YS5sYXR8fGlzTmFOKHRoaXMubG9uKSYmaXNOYU4odGhpcy5sYXQpJiZpc05hTihhLmxvbikmJmlzTmFOKGEubGF0KSk7cmV0dXJuIGJ9LHRyYW5zZm9ybTpmdW5jdGlvbihhLGIpe3ZhciBjPU9wZW5MYXllcnMuUHJvamVjdGlvbi50cmFuc2Zvcm0oe3g6dGhpcy5sb24seTp0aGlzLmxhdH0sYSxiKTt0aGlzLmxvbj1jLng7dGhpcy5sYXQ9Yy55O3JldHVybiB0aGlzfSx3cmFwRGF0ZUxpbmU6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jbG9uZSgpO2lmKGEpe2Zvcig7Yi5sb248YS5sZWZ0OyliLmxvbis9YS5nZXRXaWR0aCgpO2Zvcig7Yi5sb24+YS5yaWdodDspYi5sb24tPWEuZ2V0V2lkdGgoKX1yZXR1cm4gYn0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Mb25MYXQifSk7Ck9wZW5MYXllcnMuTG9uTGF0LmZyb21TdHJpbmc9ZnVuY3Rpb24oYSl7YT1hLnNwbGl0KCIsIik7cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLkxvbkxhdChhWzBdLGFbMV0pfTtPcGVuTGF5ZXJzLkxvbkxhdC5mcm9tQXJyYXk9ZnVuY3Rpb24oYSl7dmFyIGI9T3BlbkxheWVycy5VdGlsLmlzQXJyYXkoYSk7cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLkxvbkxhdChiJiZhWzBdLGImJmFbMV0pfTtPcGVuTGF5ZXJzLlBpeGVsPU9wZW5MYXllcnMuQ2xhc3Moe3g6MCx5OjAsaW5pdGlhbGl6ZTpmdW5jdGlvbihhLGIpe3RoaXMueD1wYXJzZUZsb2F0KGEpO3RoaXMueT1wYXJzZUZsb2F0KGIpfSx0b1N0cmluZzpmdW5jdGlvbigpe3JldHVybiJ4PSIrdGhpcy54KyIseT0iK3RoaXMueX0sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IE9wZW5MYXllcnMuUGl4ZWwodGhpcy54LHRoaXMueSl9LGVxdWFsczpmdW5jdGlvbihhKXt2YXIgYj0hMTtudWxsIT1hJiYoYj10aGlzLng9PWEueCYmdGhpcy55PT1hLnl8fGlzTmFOKHRoaXMueCkmJmlzTmFOKHRoaXMueSkmJmlzTmFOKGEueCkmJmlzTmFOKGEueSkpO3JldHVybiBifSxkaXN0YW5jZVRvOmZ1bmN0aW9uKGEpe3JldHVybiBNYXRoLnNxcnQoTWF0aC5wb3codGhpcy54LWEueCwyKStNYXRoLnBvdyh0aGlzLnktYS55LDIpKX0sYWRkOmZ1bmN0aW9uKGEsYil7aWYobnVsbD09YXx8bnVsbD09Yil0aHJvdyBuZXcgVHlwZUVycm9yKCJQaXhlbC5hZGQgY2Fubm90IHJlY2VpdmUgbnVsbCB2YWx1ZXMiKTsKcmV0dXJuIG5ldyBPcGVuTGF5ZXJzLlBpeGVsKHRoaXMueCthLHRoaXMueStiKX0sb2Zmc2V0OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY2xvbmUoKTthJiYoYj10aGlzLmFkZChhLngsYS55KSk7cmV0dXJuIGJ9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuUGl4ZWwifSk7T3BlbkxheWVycy5TaXplPU9wZW5MYXllcnMuQ2xhc3Moe3c6MCxoOjAsaW5pdGlhbGl6ZTpmdW5jdGlvbihhLGIpe3RoaXMudz1wYXJzZUZsb2F0KGEpO3RoaXMuaD1wYXJzZUZsb2F0KGIpfSx0b1N0cmluZzpmdW5jdGlvbigpe3JldHVybiJ3PSIrdGhpcy53KyIsaD0iK3RoaXMuaH0sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IE9wZW5MYXllcnMuU2l6ZSh0aGlzLncsdGhpcy5oKX0sZXF1YWxzOmZ1bmN0aW9uKGEpe3ZhciBiPSExO251bGwhPWEmJihiPXRoaXMudz09YS53JiZ0aGlzLmg9PWEuaHx8aXNOYU4odGhpcy53KSYmaXNOYU4odGhpcy5oKSYmaXNOYU4oYS53KSYmaXNOYU4oYS5oKSk7cmV0dXJuIGJ9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuU2l6ZSJ9KTtPcGVuTGF5ZXJzLkNvbnNvbGU9e2xvZzpmdW5jdGlvbigpe30sZGVidWc6ZnVuY3Rpb24oKXt9LGluZm86ZnVuY3Rpb24oKXt9LHdhcm46ZnVuY3Rpb24oKXt9LGVycm9yOmZ1bmN0aW9uKCl7fSx1c2VyRXJyb3I6ZnVuY3Rpb24oYSl7YWxlcnQoYSl9LGFzc2VydDpmdW5jdGlvbigpe30sZGlyOmZ1bmN0aW9uKCl7fSxkaXJ4bWw6ZnVuY3Rpb24oKXt9LHRyYWNlOmZ1bmN0aW9uKCl7fSxncm91cDpmdW5jdGlvbigpe30sZ3JvdXBFbmQ6ZnVuY3Rpb24oKXt9LHRpbWU6ZnVuY3Rpb24oKXt9LHRpbWVFbmQ6ZnVuY3Rpb24oKXt9LHByb2ZpbGU6ZnVuY3Rpb24oKXt9LHByb2ZpbGVFbmQ6ZnVuY3Rpb24oKXt9LGNvdW50OmZ1bmN0aW9uKCl7fSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkNvbnNvbGUifTsKKGZ1bmN0aW9uKCl7Zm9yKHZhciBhPWRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJzY3JpcHQiKSxiPTAsYz1hLmxlbmd0aDtiPGM7KytiKWlmKC0xIT1hW2JdLnNyYy5pbmRleE9mKCJmaXJlYnVnLmpzIikmJmNvbnNvbGUpe09wZW5MYXllcnMuVXRpbC5leHRlbmQoT3BlbkxheWVycy5Db25zb2xlLGNvbnNvbGUpO2JyZWFrfX0pKCk7T3BlbkxheWVycy5MYW5nPXtjb2RlOm51bGwsZGVmYXVsdENvZGU6ImVuIixnZXRDb2RlOmZ1bmN0aW9uKCl7T3BlbkxheWVycy5MYW5nLmNvZGV8fE9wZW5MYXllcnMuTGFuZy5zZXRDb2RlKCk7cmV0dXJuIE9wZW5MYXllcnMuTGFuZy5jb2RlfSxzZXRDb2RlOmZ1bmN0aW9uKGEpe3ZhciBiO2F8fChhPSJtc2llIj09T3BlbkxheWVycy5CUk9XU0VSX05BTUU/bmF2aWdhdG9yLnVzZXJMYW5ndWFnZTpuYXZpZ2F0b3IubGFuZ3VhZ2UpO2E9YS5zcGxpdCgiLSIpO2FbMF09YVswXS50b0xvd2VyQ2FzZSgpOyJvYmplY3QiPT10eXBlb2YgT3BlbkxheWVycy5MYW5nW2FbMF1dJiYoYj1hWzBdKTtpZihhWzFdKXt2YXIgYz1hWzBdKyItIithWzFdLnRvVXBwZXJDYXNlKCk7Im9iamVjdCI9PXR5cGVvZiBPcGVuTGF5ZXJzLkxhbmdbY10mJihiPWMpfWJ8fChPcGVuTGF5ZXJzLkNvbnNvbGUud2FybigiRmFpbGVkIHRvIGZpbmQgT3BlbkxheWVycy5MYW5nLiIrYS5qb2luKCItIikrIiBkaWN0aW9uYXJ5LCBmYWxsaW5nIGJhY2sgdG8gZGVmYXVsdCBsYW5ndWFnZSIpLApiPU9wZW5MYXllcnMuTGFuZy5kZWZhdWx0Q29kZSk7T3BlbkxheWVycy5MYW5nLmNvZGU9Yn0sdHJhbnNsYXRlOmZ1bmN0aW9uKGEsYil7dmFyIGM9T3BlbkxheWVycy5MYW5nW09wZW5MYXllcnMuTGFuZy5nZXRDb2RlKCldOyhjPWMmJmNbYV0pfHwoYz1hKTtiJiYoYz1PcGVuTGF5ZXJzLlN0cmluZy5mb3JtYXQoYyxiKSk7cmV0dXJuIGN9fTtPcGVuTGF5ZXJzLmkxOG49T3BlbkxheWVycy5MYW5nLnRyYW5zbGF0ZTtPcGVuTGF5ZXJzLlV0aWw9T3BlbkxheWVycy5VdGlsfHx7fTtPcGVuTGF5ZXJzLlV0aWwuZ2V0RWxlbWVudD1mdW5jdGlvbigpe2Zvcih2YXIgYT1bXSxiPTAsYz1hcmd1bWVudHMubGVuZ3RoO2I8YztiKyspe3ZhciBkPWFyZ3VtZW50c1tiXTsic3RyaW5nIj09dHlwZW9mIGQmJihkPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGQpKTtpZigxPT1hcmd1bWVudHMubGVuZ3RoKXJldHVybiBkO2EucHVzaChkKX1yZXR1cm4gYX07T3BlbkxheWVycy5VdGlsLmlzRWxlbWVudD1mdW5jdGlvbihhKXtyZXR1cm4hKCFhfHwxIT09YS5ub2RlVHlwZSl9O09wZW5MYXllcnMuVXRpbC5pc0FycmF5PWZ1bmN0aW9uKGEpe3JldHVybiJbb2JqZWN0IEFycmF5XSI9PT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoYSl9O09wZW5MYXllcnMuVXRpbC5yZW1vdmVJdGVtPWZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPWEubGVuZ3RoLTE7MDw9YztjLS0pYVtjXT09YiYmYS5zcGxpY2UoYywxKTtyZXR1cm4gYX07Ck9wZW5MYXllcnMuVXRpbC5pbmRleE9mPWZ1bmN0aW9uKGEsYil7aWYoImZ1bmN0aW9uIj09dHlwZW9mIGEuaW5kZXhPZilyZXR1cm4gYS5pbmRleE9mKGIpO2Zvcih2YXIgYz0wLGQ9YS5sZW5ndGg7YzxkO2MrKylpZihhW2NdPT1iKXJldHVybiBjO3JldHVybi0xfTtPcGVuTGF5ZXJzLlV0aWwuZG90bGVzcz0vXC4vZzsKT3BlbkxheWVycy5VdGlsLm1vZGlmeURPTUVsZW1lbnQ9ZnVuY3Rpb24oYSxiLGMsZCxlLGYsZyxoKXtiJiYoYS5pZD1iLnJlcGxhY2UoT3BlbkxheWVycy5VdGlsLmRvdGxlc3MsIl8iKSk7YyYmKGEuc3R5bGUubGVmdD1jLngrInB4IixhLnN0eWxlLnRvcD1jLnkrInB4Iik7ZCYmKGEuc3R5bGUud2lkdGg9ZC53KyJweCIsYS5zdHlsZS5oZWlnaHQ9ZC5oKyJweCIpO2UmJihhLnN0eWxlLnBvc2l0aW9uPWUpO2YmJihhLnN0eWxlLmJvcmRlcj1mKTtnJiYoYS5zdHlsZS5vdmVyZmxvdz1nKTswPD1wYXJzZUZsb2F0KGgpJiYxPnBhcnNlRmxvYXQoaCk/KGEuc3R5bGUuZmlsdGVyPSJhbHBoYShvcGFjaXR5PSIrMTAwKmgrIikiLGEuc3R5bGUub3BhY2l0eT1oKToxPT1wYXJzZUZsb2F0KGgpJiYoYS5zdHlsZS5maWx0ZXI9IiIsYS5zdHlsZS5vcGFjaXR5PSIiKX07Ck9wZW5MYXllcnMuVXRpbC5jcmVhdGVEaXY9ZnVuY3Rpb24oYSxiLGMsZCxlLGYsZyxoKXt2YXIgaz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTtkJiYoay5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2U9InVybCgiK2QrIikiKTthfHwoYT1PcGVuTGF5ZXJzLlV0aWwuY3JlYXRlVW5pcXVlSUQoIk9wZW5MYXllcnNEaXYiKSk7ZXx8KGU9ImFic29sdXRlIik7T3BlbkxheWVycy5VdGlsLm1vZGlmeURPTUVsZW1lbnQoayxhLGIsYyxlLGYsZyxoKTtyZXR1cm4ga307Ck9wZW5MYXllcnMuVXRpbC5jcmVhdGVJbWFnZT1mdW5jdGlvbihhLGIsYyxkLGUsZixnLGgpe3ZhciBrPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImltZyIpO2F8fChhPU9wZW5MYXllcnMuVXRpbC5jcmVhdGVVbmlxdWVJRCgiT3BlbkxheWVyc0RpdiIpKTtlfHwoZT0icmVsYXRpdmUiKTtPcGVuTGF5ZXJzLlV0aWwubW9kaWZ5RE9NRWxlbWVudChrLGEsYixjLGUsZixudWxsLGcpO2gmJihrLnN0eWxlLmRpc3BsYXk9Im5vbmUiLGI9ZnVuY3Rpb24oKXtrLnN0eWxlLmRpc3BsYXk9IiI7T3BlbkxheWVycy5FdmVudC5zdG9wT2JzZXJ2aW5nRWxlbWVudChrKX0sT3BlbkxheWVycy5FdmVudC5vYnNlcnZlKGssImxvYWQiLGIpLE9wZW5MYXllcnMuRXZlbnQub2JzZXJ2ZShrLCJlcnJvciIsYikpO2suc3R5bGUuYWx0PWE7ay5nYWxsZXJ5SW1nPSJubyI7ZCYmKGsuc3JjPWQpO3JldHVybiBrfTtPcGVuTGF5ZXJzLklNQUdFX1JFTE9BRF9BVFRFTVBUUz0wOwpPcGVuTGF5ZXJzLlV0aWwuYWxwaGFIYWNrTmVlZGVkPW51bGw7T3BlbkxheWVycy5VdGlsLmFscGhhSGFjaz1mdW5jdGlvbigpe2lmKG51bGw9PU9wZW5MYXllcnMuVXRpbC5hbHBoYUhhY2tOZWVkZWQpe3ZhciBhPW5hdmlnYXRvci5hcHBWZXJzaW9uLnNwbGl0KCJNU0lFIiksYT1wYXJzZUZsb2F0KGFbMV0pLGI9ITE7dHJ5e2I9ISFkb2N1bWVudC5ib2R5LmZpbHRlcnN9Y2F0Y2goYyl7fU9wZW5MYXllcnMuVXRpbC5hbHBoYUhhY2tOZWVkZWQ9YiYmNS41PD1hJiY3PmF9cmV0dXJuIE9wZW5MYXllcnMuVXRpbC5hbHBoYUhhY2tOZWVkZWR9OwpPcGVuTGF5ZXJzLlV0aWwubW9kaWZ5QWxwaGFJbWFnZURpdj1mdW5jdGlvbihhLGIsYyxkLGUsZixnLGgsayl7T3BlbkxheWVycy5VdGlsLm1vZGlmeURPTUVsZW1lbnQoYSxiLGMsZCxmLG51bGwsbnVsbCxrKTtiPWEuY2hpbGROb2Rlc1swXTtlJiYoYi5zcmM9ZSk7T3BlbkxheWVycy5VdGlsLm1vZGlmeURPTUVsZW1lbnQoYixhLmlkKyJfaW5uZXJJbWFnZSIsbnVsbCxkLCJyZWxhdGl2ZSIsZyk7T3BlbkxheWVycy5VdGlsLmFscGhhSGFjaygpJiYoIm5vbmUiIT1hLnN0eWxlLmRpc3BsYXkmJihhLnN0eWxlLmRpc3BsYXk9ImlubGluZS1ibG9jayIpLG51bGw9PWgmJihoPSJzY2FsZSIpLGEuc3R5bGUuZmlsdGVyPSJwcm9naWQ6RFhJbWFnZVRyYW5zZm9ybS5NaWNyb3NvZnQuQWxwaGFJbWFnZUxvYWRlcihzcmM9JyIrYi5zcmMrIicsIHNpemluZ01ldGhvZD0nIitoKyInKSIsMDw9cGFyc2VGbG9hdChhLnN0eWxlLm9wYWNpdHkpJiYxPnBhcnNlRmxvYXQoYS5zdHlsZS5vcGFjaXR5KSYmCihhLnN0eWxlLmZpbHRlcis9IiBhbHBoYShvcGFjaXR5PSIrMTAwKmEuc3R5bGUub3BhY2l0eSsiKSIpLGIuc3R5bGUuZmlsdGVyPSJhbHBoYShvcGFjaXR5PTApIil9O09wZW5MYXllcnMuVXRpbC5jcmVhdGVBbHBoYUltYWdlRGl2PWZ1bmN0aW9uKGEsYixjLGQsZSxmLGcsaCxrKXt2YXIgbD1PcGVuTGF5ZXJzLlV0aWwuY3JlYXRlRGl2KCk7az1PcGVuTGF5ZXJzLlV0aWwuY3JlYXRlSW1hZ2UobnVsbCxudWxsLG51bGwsbnVsbCxudWxsLG51bGwsbnVsbCxrKTtrLmNsYXNzTmFtZT0ib2xBbHBoYUltZyI7bC5hcHBlbmRDaGlsZChrKTtPcGVuTGF5ZXJzLlV0aWwubW9kaWZ5QWxwaGFJbWFnZURpdihsLGEsYixjLGQsZSxmLGcsaCk7cmV0dXJuIGx9O09wZW5MYXllcnMuVXRpbC51cHBlckNhc2VPYmplY3Q9ZnVuY3Rpb24oYSl7dmFyIGI9e30sYztmb3IoYyBpbiBhKWJbYy50b1VwcGVyQ2FzZSgpXT1hW2NdO3JldHVybiBifTsKT3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHM9ZnVuY3Rpb24oYSxiKXthPWF8fHt9O3ZhciBjPSJmdW5jdGlvbiI9PXR5cGVvZiB3aW5kb3cuRXZlbnQmJmIgaW5zdGFuY2VvZiB3aW5kb3cuRXZlbnQsZDtmb3IoZCBpbiBiKWlmKHZvaWQgMD09PWFbZF18fCFjJiZiLmhhc093blByb3BlcnR5JiZiLmhhc093blByb3BlcnR5KGQpJiYhYS5oYXNPd25Qcm9wZXJ0eShkKSlhW2RdPWJbZF07IWMmJihiJiZiLmhhc093blByb3BlcnR5JiZiLmhhc093blByb3BlcnR5KCJ0b1N0cmluZyIpJiYhYS5oYXNPd25Qcm9wZXJ0eSgidG9TdHJpbmciKSkmJihhLnRvU3RyaW5nPWIudG9TdHJpbmcpO3JldHVybiBhfTsKT3BlbkxheWVycy5VdGlsLmdldFBhcmFtZXRlclN0cmluZz1mdW5jdGlvbihhKXt2YXIgYj1bXSxjO2ZvcihjIGluIGEpe3ZhciBkPWFbY107aWYobnVsbCE9ZCYmImZ1bmN0aW9uIiE9dHlwZW9mIGQpe2lmKCJvYmplY3QiPT10eXBlb2YgZCYmZC5jb25zdHJ1Y3Rvcj09QXJyYXkpe2Zvcih2YXIgZT1bXSxmLGc9MCxoPWQubGVuZ3RoO2c8aDtnKyspZj1kW2ddLGUucHVzaChlbmNvZGVVUklDb21wb25lbnQobnVsbD09PWZ8fHZvaWQgMD09PWY/IiI6ZikpO2Q9ZS5qb2luKCIsIil9ZWxzZSBkPWVuY29kZVVSSUNvbXBvbmVudChkKTtiLnB1c2goZW5jb2RlVVJJQ29tcG9uZW50KGMpKyI9IitkKX19cmV0dXJuIGIuam9pbigiJiIpfTtPcGVuTGF5ZXJzLlV0aWwudXJsQXBwZW5kPWZ1bmN0aW9uKGEsYil7dmFyIGM9YTtpZihiKXZhciBkPShhKyIgIikuc3BsaXQoL1s/Jl0vKSxjPWMrKCIgIj09PWQucG9wKCk/YjpkLmxlbmd0aD8iJiIrYjoiPyIrYik7cmV0dXJuIGN9OwpPcGVuTGF5ZXJzLlV0aWwuZ2V0SW1hZ2VzTG9jYXRpb249ZnVuY3Rpb24oKXtyZXR1cm4gT3BlbkxheWVycy5JbWdQYXRofHxPcGVuTGF5ZXJzLl9nZXRTY3JpcHRMb2NhdGlvbigpKyJpbWcvIn07T3BlbkxheWVycy5VdGlsLmdldEltYWdlTG9jYXRpb249ZnVuY3Rpb24oYSl7cmV0dXJuIE9wZW5MYXllcnMuVXRpbC5nZXRJbWFnZXNMb2NhdGlvbigpK2F9O09wZW5MYXllcnMuVXRpbC5Ucnk9ZnVuY3Rpb24oKXtmb3IodmFyIGE9bnVsbCxiPTAsYz1hcmd1bWVudHMubGVuZ3RoO2I8YztiKyspe3ZhciBkPWFyZ3VtZW50c1tiXTt0cnl7YT1kKCk7YnJlYWt9Y2F0Y2goZSl7fX1yZXR1cm4gYX07Ck9wZW5MYXllcnMuVXRpbC5nZXRYbWxOb2RlVmFsdWU9ZnVuY3Rpb24oYSl7dmFyIGI9bnVsbDtPcGVuTGF5ZXJzLlV0aWwuVHJ5KGZ1bmN0aW9uKCl7Yj1hLnRleHQ7Ynx8KGI9YS50ZXh0Q29udGVudCk7Ynx8KGI9YS5maXJzdENoaWxkLm5vZGVWYWx1ZSl9LGZ1bmN0aW9uKCl7Yj1hLnRleHRDb250ZW50fSk7cmV0dXJuIGJ9O09wZW5MYXllcnMuVXRpbC5tb3VzZUxlZnQ9ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9YS5yZWxhdGVkVGFyZ2V0P2EucmVsYXRlZFRhcmdldDphLnRvRWxlbWVudDtjIT1iJiZudWxsIT1jOyljPWMucGFyZW50Tm9kZTtyZXR1cm4gYyE9Yn07T3BlbkxheWVycy5VdGlsLkRFRkFVTFRfUFJFQ0lTSU9OPTE0O09wZW5MYXllcnMuVXRpbC50b0Zsb2F0PWZ1bmN0aW9uKGEsYil7bnVsbD09YiYmKGI9T3BlbkxheWVycy5VdGlsLkRFRkFVTFRfUFJFQ0lTSU9OKTsibnVtYmVyIiE9PXR5cGVvZiBhJiYoYT1wYXJzZUZsb2F0KGEpKTtyZXR1cm4gMD09PWI/YTpwYXJzZUZsb2F0KGEudG9QcmVjaXNpb24oYikpfTsKT3BlbkxheWVycy5VdGlsLnJhZD1mdW5jdGlvbihhKXtyZXR1cm4gYSpNYXRoLlBJLzE4MH07T3BlbkxheWVycy5VdGlsLmRlZz1mdW5jdGlvbihhKXtyZXR1cm4gMTgwKmEvTWF0aC5QSX07T3BlbkxheWVycy5VdGlsLlZpbmNlbnR5Q29uc3RhbnRzPXthOjYzNzgxMzcsYjo2MzU2NzUyLjMxNDIsZjoxLzI5OC4yNTcyMjM1NjN9OwpPcGVuTGF5ZXJzLlV0aWwuZGlzdFZpbmNlbnR5PWZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPU9wZW5MYXllcnMuVXRpbC5WaW5jZW50eUNvbnN0YW50cyxkPWMuYSxlPWMuYixjPWMuZixmPU9wZW5MYXllcnMuVXRpbC5yYWQoYi5sb24tYS5sb24pLGc9TWF0aC5hdGFuKCgxLWMpKk1hdGgudGFuKE9wZW5MYXllcnMuVXRpbC5yYWQoYS5sYXQpKSksaD1NYXRoLmF0YW4oKDEtYykqTWF0aC50YW4oT3BlbkxheWVycy5VdGlsLnJhZChiLmxhdCkpKSxrPU1hdGguc2luKGcpLGc9TWF0aC5jb3MoZyksbD1NYXRoLnNpbihoKSxoPU1hdGguY29zKGgpLG09ZixyPTIqTWF0aC5QSSxwPTIwOzFFLTEyPE1hdGguYWJzKG0tcikmJjA8LS1wOyl7dmFyIG49TWF0aC5zaW4obSkscT1NYXRoLmNvcyhtKSxzPU1hdGguc3FydChoKm4qaCpuKyhnKmwtaypoKnEpKihnKmwtaypoKnEpKTtpZigwPT1zKXJldHVybiAwO3ZhciBxPWsqbCtnKmgqcSx0PU1hdGguYXRhbjIocyxxKSx1PU1hdGguYXNpbihnKmgqCm4vcyksdj1NYXRoLmNvcyh1KSpNYXRoLmNvcyh1KSxuPXEtMiprKmwvdix3PWMvMTYqdiooNCtjKig0LTMqdikpLHI9bSxtPWYrKDEtdykqYypNYXRoLnNpbih1KSoodCt3KnMqKG4rdypxKigtMSsyKm4qbikpKX1pZigwPT1wKXJldHVybiBOYU47ZD12KihkKmQtZSplKS8oZSplKTtjPWQvMTAyNCooMjU2K2QqKC0xMjgrZCooNzQtNDcqZCkpKTtyZXR1cm4oZSooMStkLzE2Mzg0Kig0MDk2K2QqKC03NjgrZCooMzIwLTE3NSpkKSkpKSoodC1jKnMqKG4rYy80KihxKigtMSsyKm4qbiktYy82Km4qKC0zKzQqcypzKSooLTMrNCpuKm4pKSkpKS50b0ZpeGVkKDMpLzFFM307Ck9wZW5MYXllcnMuVXRpbC5kZXN0aW5hdGlvblZpbmNlbnR5PWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1PcGVuTGF5ZXJzLlV0aWwsZT1kLlZpbmNlbnR5Q29uc3RhbnRzLGY9ZS5hLGc9ZS5iLGg9ZS5mLGU9YS5sb247YT1hLmxhdDt2YXIgaz1kLnJhZChiKTtiPU1hdGguc2luKGspO2s9TWF0aC5jb3Moayk7YT0oMS1oKSpNYXRoLnRhbihkLnJhZChhKSk7dmFyIGw9MS9NYXRoLnNxcnQoMSthKmEpLG09YSpsLHI9TWF0aC5hdGFuMihhLGspO2E9bCpiO2Zvcih2YXIgcD0xLWEqYSxmPXAqKGYqZi1nKmcpLyhnKmcpLG49MStmLzE2Mzg0Kig0MDk2K2YqKC03NjgrZiooMzIwLTE3NSpmKSkpLHE9Zi8xMDI0KigyNTYrZiooLTEyOCtmKig3NC00NypmKSkpLGY9Yy8oZypuKSxzPTIqTWF0aC5QSTsxRS0xMjxNYXRoLmFicyhmLXMpOyl2YXIgdD1NYXRoLmNvcygyKnIrZiksdT1NYXRoLnNpbihmKSx2PU1hdGguY29zKGYpLHc9cSp1Kih0K3EvNCoodiooLTErMip0KnQpLXEvNip0KigtMys0Kgp1KnUpKigtMys0KnQqdCkpKSxzPWYsZj1jLyhnKm4pK3c7Yz1tKnUtbCp2Kms7Zz1NYXRoLmF0YW4yKG0qditsKnUqaywoMS1oKSpNYXRoLnNxcnQoYSphK2MqYykpO2I9TWF0aC5hdGFuMih1KmIsbCp2LW0qdSprKTtrPWgvMTYqcCooNCtoKig0LTMqcCkpO3Q9Yi0oMS1rKSpoKmEqKGYrayp1Kih0K2sqdiooLTErMip0KnQpKSk7TWF0aC5hdGFuMihhLC1jKTtyZXR1cm4gbmV3IE9wZW5MYXllcnMuTG9uTGF0KGUrZC5kZWcodCksZC5kZWcoZykpfTsKT3BlbkxheWVycy5VdGlsLmdldFBhcmFtZXRlcnM9ZnVuY3Rpb24oYSxiKXtiPWJ8fHt9O2E9bnVsbD09PWF8fHZvaWQgMD09PWE/d2luZG93LmxvY2F0aW9uLmhyZWY6YTt2YXIgYz0iIjtpZihPcGVuTGF5ZXJzLlN0cmluZy5jb250YWlucyhhLCI/IikpdmFyIGQ9YS5pbmRleE9mKCI/IikrMSxjPU9wZW5MYXllcnMuU3RyaW5nLmNvbnRhaW5zKGEsIiMiKT9hLmluZGV4T2YoIiMiKTphLmxlbmd0aCxjPWEuc3Vic3RyaW5nKGQsYyk7Zm9yKHZhciBkPXt9LGM9Yy5zcGxpdCgvWyY7XS8pLGU9MCxmPWMubGVuZ3RoO2U8ZjsrK2Upe3ZhciBnPWNbZV0uc3BsaXQoIj0iKTtpZihnWzBdKXt2YXIgaD1nWzBdO3RyeXtoPWRlY29kZVVSSUNvbXBvbmVudChoKX1jYXRjaChrKXtoPXVuZXNjYXBlKGgpfWc9KGdbMV18fCIiKS5yZXBsYWNlKC9cKy9nLCIgIik7dHJ5e2c9ZGVjb2RlVVJJQ29tcG9uZW50KGcpfWNhdGNoKGwpe2c9dW5lc2NhcGUoZyl9ITEhPT1iLnNwbGl0QXJncyYmKGc9Zy5zcGxpdCgiLCIpKTsKMT09Zy5sZW5ndGgmJihnPWdbMF0pO2RbaF09Z319cmV0dXJuIGR9O09wZW5MYXllcnMuVXRpbC5sYXN0U2VxSUQ9MDtPcGVuTGF5ZXJzLlV0aWwuY3JlYXRlVW5pcXVlSUQ9ZnVuY3Rpb24oYSl7YT1udWxsPT1hPyJpZF8iOmEucmVwbGFjZShPcGVuTGF5ZXJzLlV0aWwuZG90bGVzcywiXyIpO09wZW5MYXllcnMuVXRpbC5sYXN0U2VxSUQrPTE7cmV0dXJuIGErT3BlbkxheWVycy5VdGlsLmxhc3RTZXFJRH07T3BlbkxheWVycy5JTkNIRVNfUEVSX1VOSVQ9e2luY2hlczoxLGZ0OjEyLG1pOjYzMzYwLG06MzkuMzcsa206MzkzNzAsZGQ6NDM3NDc1NCx5ZDozNn07T3BlbkxheWVycy5JTkNIRVNfUEVSX1VOSVRbImluIl09T3BlbkxheWVycy5JTkNIRVNfUEVSX1VOSVQuaW5jaGVzO09wZW5MYXllcnMuSU5DSEVTX1BFUl9VTklULmRlZ3JlZXM9T3BlbkxheWVycy5JTkNIRVNfUEVSX1VOSVQuZGQ7T3BlbkxheWVycy5JTkNIRVNfUEVSX1VOSVQubm1pPTE4NTIqT3BlbkxheWVycy5JTkNIRVNfUEVSX1VOSVQubTsKT3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0g9MC4wMjU0MDAwNTA4MDAxMDE2OwpPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKE9wZW5MYXllcnMuSU5DSEVTX1BFUl9VTklULHtJbmNoOk9wZW5MYXllcnMuSU5DSEVTX1BFUl9VTklULmluY2hlcyxNZXRlcjoxL09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILEZvb3Q6MC4zMDQ4MDA2MDk2MDEyMTkyL09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILElGb290OjAuMzA0OC9PcGVuTGF5ZXJzLk1FVEVSU19QRVJfSU5DSCxDbGFya2VGb290OjAuMzA0Nzk3MjY1MTE1MS9PcGVuTGF5ZXJzLk1FVEVSU19QRVJfSU5DSCxTZWFyc0Zvb3Q6MC4zMDQ3OTk0NzE1Mzg2NzYyNi9PcGVuTGF5ZXJzLk1FVEVSU19QRVJfSU5DSCxHb2xkQ29hc3RGb290OjAuMzA0Nzk5NzEwMTgxNTA4OC9PcGVuTGF5ZXJzLk1FVEVSU19QRVJfSU5DSCxJSW5jaDowLjAyNTQvT3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0gsTWljcm9JbmNoOjIuNTRFLTUvT3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0gsTWlsOjIuNTRFLTgvT3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0gsCkNlbnRpbWV0ZXI6MC4wMS9PcGVuTGF5ZXJzLk1FVEVSU19QRVJfSU5DSCxLaWxvbWV0ZXI6MUUzL09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILFlhcmQ6MC45MTQ0MDE4Mjg4MDM2NTc2L09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILFNlYXJzWWFyZDowLjkxNDM5ODQxNDYxNjAyOS9PcGVuTGF5ZXJzLk1FVEVSU19QRVJfSU5DSCxJbmRpYW5ZYXJkOjAuOTE0Mzk4NTMwNzQ0NDQwOC9PcGVuTGF5ZXJzLk1FVEVSU19QRVJfSU5DSCxJbmRpYW5ZZDM3OjAuOTE0Mzk1MjMvT3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0gsSW5kaWFuWWQ2MjowLjkxNDM5ODgvT3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0gsSW5kaWFuWWQ3NTowLjkxNDM5ODUvT3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0gsSW5kaWFuRm9vdDowLjMwNDc5OTUxL09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILEluZGlhbkZ0Mzc6MC4zMDQ3OTg0MS9PcGVuTGF5ZXJzLk1FVEVSU19QRVJfSU5DSCxJbmRpYW5GdDYyOjAuMzA0Nzk5Ni8KT3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0gsSW5kaWFuRnQ3NTowLjMwNDc5OTUvT3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0gsTWlsZToxNjA5LjM0NzIxODY5NDQzNzMvT3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0gsSVlhcmQ6MC45MTQ0L09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILElNaWxlOjE2MDkuMzQ0L09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILE5hdXRNOjE4NTIvT3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0gsIkxhdC02NiI6MTEwOTQzLjMxNjQ4ODkzMjczL09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILCJMYXQtODMiOjExMDk0Ni4yNTczNjg3MjIzNS9PcGVuTGF5ZXJzLk1FVEVSU19QRVJfSU5DSCxEZWNpbWV0ZXI6MC4xL09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILE1pbGxpbWV0ZXI6MC4wMDEvT3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0gsRGVrYW1ldGVyOjEwL09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILERlY2FtZXRlcjoxMC9PcGVuTGF5ZXJzLk1FVEVSU19QRVJfSU5DSCwKSGVjdG9tZXRlcjoxMDAvT3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0gsR2VybWFuTWV0ZXI6MS4wMDAwMTM1OTY1L09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILENhR3JpZDowLjk5OTczOC9PcGVuTGF5ZXJzLk1FVEVSU19QRVJfSU5DSCxDbGFya2VDaGFpbjoyMC4xMTY2MTk0OTc2L09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILEd1bnRlckNoYWluOjIwLjExNjg0MDIzMzY4MDQ3L09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILEJlbm9pdENoYWluOjIwLjExNjc4MjQ5NDM3NTg3Mi9PcGVuTGF5ZXJzLk1FVEVSU19QRVJfSU5DSCxTZWFyc0NoYWluOjIwLjExNjc2NTEyMTU1L09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILENsYXJrZUxpbms6MC4yMDExNjYxOTQ5NzYvT3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0gsR3VudGVyTGluazowLjIwMTE2ODQwMjMzNjgwNDcvT3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0gsQmVub2l0TGluazowLjIwMTE2NzgyNDk0Mzc1ODczL09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILApTZWFyc0xpbms6MC4yMDExNjc2NTEyMTU1L09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILFJvZDo1LjAyOTIxMDA1ODQyMDEyL09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILEludG5sQ2hhaW46MjAuMTE2OC9PcGVuTGF5ZXJzLk1FVEVSU19QRVJfSU5DSCxJbnRubExpbms6MC4yMDExNjgvT3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0gsUGVyY2g6NS4wMjkyMTAwNTg0MjAxMi9PcGVuTGF5ZXJzLk1FVEVSU19QRVJfSU5DSCxQb2xlOjUuMDI5MjEwMDU4NDIwMTIvT3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0gsRnVybG9uZzoyMDEuMTY4NDAyMzM2ODA0Ni9PcGVuTGF5ZXJzLk1FVEVSU19QRVJfSU5DSCxSb29kOjMuNzc4MjY2ODk4L09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILENhcGVGb290OjAuMzA0Nzk3MjYxNS9PcGVuTGF5ZXJzLk1FVEVSU19QRVJfSU5DSCxCcmVhbGV5OjM3NS9PcGVuTGF5ZXJzLk1FVEVSU19QRVJfSU5DSCxNb2RBbUZ0OjAuMzA0ODEyMjUyOTg0NTA2LwpPcGVuTGF5ZXJzLk1FVEVSU19QRVJfSU5DSCxGYXRob206MS44Mjg4L09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILCJOYXV0TS1VSyI6MTg1My4xODQvT3BlbkxheWVycy5NRVRFUlNfUEVSX0lOQ0gsIjUwa2lsb21ldGVycyI6NUU0L09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNILCIxNTBraWxvbWV0ZXJzIjoxNUU0L09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNIfSk7Ck9wZW5MYXllcnMuVXRpbC5leHRlbmQoT3BlbkxheWVycy5JTkNIRVNfUEVSX1VOSVQse21tOk9wZW5MYXllcnMuSU5DSEVTX1BFUl9VTklULk1ldGVyLzFFMyxjbTpPcGVuTGF5ZXJzLklOQ0hFU19QRVJfVU5JVC5NZXRlci8xMDAsZG06MTAwKk9wZW5MYXllcnMuSU5DSEVTX1BFUl9VTklULk1ldGVyLGttOjFFMypPcGVuTGF5ZXJzLklOQ0hFU19QRVJfVU5JVC5NZXRlcixrbWk6T3BlbkxheWVycy5JTkNIRVNfUEVSX1VOSVQubm1pLGZhdGg6T3BlbkxheWVycy5JTkNIRVNfUEVSX1VOSVQuRmF0aG9tLGNoOk9wZW5MYXllcnMuSU5DSEVTX1BFUl9VTklULkludG5sQ2hhaW4sbGluazpPcGVuTGF5ZXJzLklOQ0hFU19QRVJfVU5JVC5JbnRubExpbmssInVzLWluIjpPcGVuTGF5ZXJzLklOQ0hFU19QRVJfVU5JVC5pbmNoZXMsInVzLWZ0IjpPcGVuTGF5ZXJzLklOQ0hFU19QRVJfVU5JVC5Gb290LCJ1cy15ZCI6T3BlbkxheWVycy5JTkNIRVNfUEVSX1VOSVQuWWFyZCwidXMtY2giOk9wZW5MYXllcnMuSU5DSEVTX1BFUl9VTklULkd1bnRlckNoYWluLAoidXMtbWkiOk9wZW5MYXllcnMuSU5DSEVTX1BFUl9VTklULk1pbGUsImluZC15ZCI6T3BlbkxheWVycy5JTkNIRVNfUEVSX1VOSVQuSW5kaWFuWWQzNywiaW5kLWZ0IjpPcGVuTGF5ZXJzLklOQ0hFU19QRVJfVU5JVC5JbmRpYW5GdDM3LCJpbmQtY2giOjIwLjExNjY5NTA2L09wZW5MYXllcnMuTUVURVJTX1BFUl9JTkNIfSk7T3BlbkxheWVycy5ET1RTX1BFUl9JTkNIPTcyO09wZW5MYXllcnMuVXRpbC5ub3JtYWxpemVTY2FsZT1mdW5jdGlvbihhKXtyZXR1cm4gMTxhPzEvYTphfTtPcGVuTGF5ZXJzLlV0aWwuZ2V0UmVzb2x1dGlvbkZyb21TY2FsZT1mdW5jdGlvbihhLGIpe3ZhciBjO2EmJihudWxsPT1iJiYoYj0iZGVncmVlcyIpLGM9MS8oT3BlbkxheWVycy5VdGlsLm5vcm1hbGl6ZVNjYWxlKGEpKk9wZW5MYXllcnMuSU5DSEVTX1BFUl9VTklUW2JdKk9wZW5MYXllcnMuRE9UU19QRVJfSU5DSCkpO3JldHVybiBjfTsKT3BlbkxheWVycy5VdGlsLmdldFNjYWxlRnJvbVJlc29sdXRpb249ZnVuY3Rpb24oYSxiKXtudWxsPT1iJiYoYj0iZGVncmVlcyIpO3JldHVybiBhKk9wZW5MYXllcnMuSU5DSEVTX1BFUl9VTklUW2JdKk9wZW5MYXllcnMuRE9UU19QRVJfSU5DSH07Ck9wZW5MYXllcnMuVXRpbC5wYWdlUG9zaXRpb249ZnVuY3Rpb24oYSl7dmFyIGI9WzAsMF0sYz1PcGVuTGF5ZXJzLlV0aWwuZ2V0Vmlld3BvcnRFbGVtZW50KCk7aWYoIWF8fGE9PXdpbmRvd3x8YT09YylyZXR1cm4gYjt2YXIgZD1PcGVuTGF5ZXJzLklTX0dFQ0tPJiZkb2N1bWVudC5nZXRCb3hPYmplY3RGb3ImJiJhYnNvbHV0ZSI9PU9wZW5MYXllcnMuRWxlbWVudC5nZXRTdHlsZShhLCJwb3NpdGlvbiIpJiYoIiI9PWEuc3R5bGUudG9wfHwiIj09YS5zdHlsZS5sZWZ0KSxlPW51bGw7aWYoYS5nZXRCb3VuZGluZ0NsaWVudFJlY3QpYT1hLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLGU9d2luZG93LnBhZ2VZT2Zmc2V0fHxjLnNjcm9sbFRvcCxiWzBdPWEubGVmdCsod2luZG93LnBhZ2VYT2Zmc2V0fHxjLnNjcm9sbExlZnQpLGJbMV09YS50b3ArZTtlbHNlIGlmKGRvY3VtZW50LmdldEJveE9iamVjdEZvciYmIWQpYT1kb2N1bWVudC5nZXRCb3hPYmplY3RGb3IoYSksYz1kb2N1bWVudC5nZXRCb3hPYmplY3RGb3IoYyksCmJbMF09YS5zY3JlZW5YLWMuc2NyZWVuWCxiWzFdPWEuc2NyZWVuWS1jLnNjcmVlblk7ZWxzZXtiWzBdPWEub2Zmc2V0TGVmdDtiWzFdPWEub2Zmc2V0VG9wO2U9YS5vZmZzZXRQYXJlbnQ7aWYoZSE9YSlmb3IoO2U7KWJbMF0rPWUub2Zmc2V0TGVmdCxiWzFdKz1lLm9mZnNldFRvcCxlPWUub2Zmc2V0UGFyZW50O2M9T3BlbkxheWVycy5CUk9XU0VSX05BTUU7aWYoIm9wZXJhIj09Y3x8InNhZmFyaSI9PWMmJiJhYnNvbHV0ZSI9PU9wZW5MYXllcnMuRWxlbWVudC5nZXRTdHlsZShhLCJwb3NpdGlvbiIpKWJbMV0tPWRvY3VtZW50LmJvZHkub2Zmc2V0VG9wO2ZvcihlPWEub2Zmc2V0UGFyZW50O2UmJmUhPWRvY3VtZW50LmJvZHk7KXtiWzBdLT1lLnNjcm9sbExlZnQ7aWYoIm9wZXJhIiE9Y3x8IlRSIiE9ZS50YWdOYW1lKWJbMV0tPWUuc2Nyb2xsVG9wO2U9ZS5vZmZzZXRQYXJlbnR9fXJldHVybiBifTsKT3BlbkxheWVycy5VdGlsLmdldFZpZXdwb3J0RWxlbWVudD1mdW5jdGlvbigpe3ZhciBhPWFyZ3VtZW50cy5jYWxsZWUudmlld3BvcnRFbGVtZW50O3ZvaWQgMD09YSYmKGE9Im1zaWUiPT1PcGVuTGF5ZXJzLkJST1dTRVJfTkFNRSYmIkNTUzFDb21wYXQiIT1kb2N1bWVudC5jb21wYXRNb2RlP2RvY3VtZW50LmJvZHk6ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LGFyZ3VtZW50cy5jYWxsZWUudmlld3BvcnRFbGVtZW50PWEpO3JldHVybiBhfTsKT3BlbkxheWVycy5VdGlsLmlzRXF1aXZhbGVudFVybD1mdW5jdGlvbihhLGIsYyl7Yz1jfHx7fTtPcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyhjLHtpZ25vcmVDYXNlOiEwLGlnbm9yZVBvcnQ4MDohMCxpZ25vcmVIYXNoOiEwLHNwbGl0QXJnczohMX0pO2E9T3BlbkxheWVycy5VdGlsLmNyZWF0ZVVybE9iamVjdChhLGMpO2I9T3BlbkxheWVycy5VdGlsLmNyZWF0ZVVybE9iamVjdChiLGMpO2Zvcih2YXIgZCBpbiBhKWlmKCJhcmdzIiE9PWQmJmFbZF0hPWJbZF0pcmV0dXJuITE7Zm9yKGQgaW4gYS5hcmdzKXtpZihhLmFyZ3NbZF0hPWIuYXJnc1tkXSlyZXR1cm4hMTtkZWxldGUgYi5hcmdzW2RdfWZvcihkIGluIGIuYXJncylyZXR1cm4hMTtyZXR1cm4hMH07Ck9wZW5MYXllcnMuVXRpbC5jcmVhdGVVcmxPYmplY3Q9ZnVuY3Rpb24oYSxiKXtiPWJ8fHt9O2lmKCEvXlx3KzpcL1wvLy50ZXN0KGEpKXt2YXIgYz13aW5kb3cubG9jYXRpb24sZD1jLnBvcnQ/IjoiK2MucG9ydDoiIixkPWMucHJvdG9jb2wrIi8vIitjLmhvc3Quc3BsaXQoIjoiKS5zaGlmdCgpK2Q7MD09PWEuaW5kZXhPZigiLyIpP2E9ZCthOihjPWMucGF0aG5hbWUuc3BsaXQoIi8iKSxjLnBvcCgpLGE9ZCtjLmpvaW4oIi8iKSsiLyIrYSl9Yi5pZ25vcmVDYXNlJiYoYT1hLnRvTG93ZXJDYXNlKCkpO2M9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYSIpO2MuaHJlZj1hO2Q9e307ZC5ob3N0PWMuaG9zdC5zcGxpdCgiOiIpLnNoaWZ0KCk7ZC5wcm90b2NvbD1jLnByb3RvY29sO2QucG9ydD1iLmlnbm9yZVBvcnQ4MD8iODAiPT1jLnBvcnR8fCIwIj09Yy5wb3J0PyIiOmMucG9ydDoiIj09Yy5wb3J0fHwiMCI9PWMucG9ydD8iODAiOmMucG9ydDtkLmhhc2g9Yi5pZ25vcmVIYXNofHwiIyI9PT0KYy5oYXNoPyIiOmMuaGFzaDt2YXIgZT1jLnNlYXJjaDtlfHwoZT1hLmluZGV4T2YoIj8iKSxlPS0xIT1lP2Euc3Vic3RyKGUpOiIiKTtkLmFyZ3M9T3BlbkxheWVycy5VdGlsLmdldFBhcmFtZXRlcnMoZSx7c3BsaXRBcmdzOmIuc3BsaXRBcmdzfSk7ZC5wYXRobmFtZT0iLyI9PWMucGF0aG5hbWUuY2hhckF0KDApP2MucGF0aG5hbWU6Ii8iK2MucGF0aG5hbWU7cmV0dXJuIGR9O09wZW5MYXllcnMuVXRpbC5yZW1vdmVUYWlsPWZ1bmN0aW9uKGEpe3ZhciBiPW51bGwsYj1hLmluZGV4T2YoIj8iKSxjPWEuaW5kZXhPZigiIyIpO3JldHVybiBiPS0xPT1iPy0xIT1jP2Euc3Vic3RyKDAsYyk6YTotMSE9Yz9hLnN1YnN0cigwLE1hdGgubWluKGIsYykpOmEuc3Vic3RyKDAsYil9O09wZW5MYXllcnMuSVNfR0VDS089ZnVuY3Rpb24oKXt2YXIgYT1uYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCk7cmV0dXJuLTE9PWEuaW5kZXhPZigid2Via2l0IikmJi0xIT1hLmluZGV4T2YoImdlY2tvIil9KCk7Ck9wZW5MYXllcnMuQ0FOVkFTX1NVUFBPUlRFRD1mdW5jdGlvbigpe3ZhciBhPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImNhbnZhcyIpO3JldHVybiEoIWEuZ2V0Q29udGV4dHx8IWEuZ2V0Q29udGV4dCgiMmQiKSl9KCk7T3BlbkxheWVycy5CUk9XU0VSX05BTUU9ZnVuY3Rpb24oKXt2YXIgYT0iIixiPW5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKTstMSE9Yi5pbmRleE9mKCJvcGVyYSIpP2E9Im9wZXJhIjotMSE9Yi5pbmRleE9mKCJtc2llIik/YT0ibXNpZSI6LTEhPWIuaW5kZXhPZigic2FmYXJpIik/YT0ic2FmYXJpIjotMSE9Yi5pbmRleE9mKCJtb3ppbGxhIikmJihhPS0xIT1iLmluZGV4T2YoImZpcmVmb3giKT8iZmlyZWZveCI6Im1vemlsbGEiKTtyZXR1cm4gYX0oKTtPcGVuTGF5ZXJzLlV0aWwuZ2V0QnJvd3Nlck5hbWU9ZnVuY3Rpb24oKXtyZXR1cm4gT3BlbkxheWVycy5CUk9XU0VSX05BTUV9OwpPcGVuTGF5ZXJzLlV0aWwuZ2V0UmVuZGVyZWREaW1lbnNpb25zPWZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGY9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7Zi5zdHlsZS52aXNpYmlsaXR5PSJoaWRkZW4iO2Zvcih2YXIgZz1jJiZjLmNvbnRhaW5lckVsZW1lbnQ/Yy5jb250YWluZXJFbGVtZW50OmRvY3VtZW50LmJvZHksaD0hMSxrPW51bGwsbD1nO2wmJiJib2R5IiE9bC50YWdOYW1lLnRvTG93ZXJDYXNlKCk7KXt2YXIgbT1PcGVuTGF5ZXJzLkVsZW1lbnQuZ2V0U3R5bGUobCwicG9zaXRpb24iKTtpZigiYWJzb2x1dGUiPT1tKXtoPSEwO2JyZWFrfWVsc2UgaWYobSYmInN0YXRpYyIhPW0pYnJlYWs7bD1sLnBhcmVudE5vZGV9IWh8fDAhPT1nLmNsaWVudEhlaWdodCYmMCE9PWcuY2xpZW50V2lkdGh8fChrPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpLGsuc3R5bGUudmlzaWJpbGl0eT0iaGlkZGVuIixrLnN0eWxlLnBvc2l0aW9uPSJhYnNvbHV0ZSIsay5zdHlsZS5vdmVyZmxvdz0KInZpc2libGUiLGsuc3R5bGUud2lkdGg9ZG9jdW1lbnQuYm9keS5jbGllbnRXaWR0aCsicHgiLGsuc3R5bGUuaGVpZ2h0PWRvY3VtZW50LmJvZHkuY2xpZW50SGVpZ2h0KyJweCIsay5hcHBlbmRDaGlsZChmKSk7Zi5zdHlsZS5wb3NpdGlvbj0iYWJzb2x1dGUiO2ImJihiLnc/KGQ9Yi53LGYuc3R5bGUud2lkdGg9ZCsicHgiKTpiLmgmJihlPWIuaCxmLnN0eWxlLmhlaWdodD1lKyJweCIpKTtjJiZjLmRpc3BsYXlDbGFzcyYmKGYuY2xhc3NOYW1lPWMuZGlzcGxheUNsYXNzKTtiPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO2IuaW5uZXJIVE1MPWE7Yi5zdHlsZS5vdmVyZmxvdz0idmlzaWJsZSI7aWYoYi5jaGlsZE5vZGVzKWZvcihhPTAsYz1iLmNoaWxkTm9kZXMubGVuZ3RoO2E8YzthKyspYi5jaGlsZE5vZGVzW2FdLnN0eWxlJiYoYi5jaGlsZE5vZGVzW2FdLnN0eWxlLm92ZXJmbG93PSJ2aXNpYmxlIik7Zi5hcHBlbmRDaGlsZChiKTtrP2cuYXBwZW5kQ2hpbGQoayk6Zy5hcHBlbmRDaGlsZChmKTsKZHx8KGQ9cGFyc2VJbnQoYi5zY3JvbGxXaWR0aCksZi5zdHlsZS53aWR0aD1kKyJweCIpO2V8fChlPXBhcnNlSW50KGIuc2Nyb2xsSGVpZ2h0KSk7Zi5yZW1vdmVDaGlsZChiKTtrPyhrLnJlbW92ZUNoaWxkKGYpLGcucmVtb3ZlQ2hpbGQoaykpOmcucmVtb3ZlQ2hpbGQoZik7cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLlNpemUoZCxlKX07Ck9wZW5MYXllcnMuVXRpbC5nZXRTY3JvbGxiYXJXaWR0aD1mdW5jdGlvbigpe3ZhciBhPU9wZW5MYXllcnMuVXRpbC5fc2Nyb2xsYmFyV2lkdGg7aWYobnVsbD09YSl7dmFyIGI9bnVsbCxjPW51bGwsYj1hPTAsYj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTtiLnN0eWxlLnBvc2l0aW9uPSJhYnNvbHV0ZSI7Yi5zdHlsZS50b3A9Ii0xMDAwcHgiO2Iuc3R5bGUubGVmdD0iLTEwMDBweCI7Yi5zdHlsZS53aWR0aD0iMTAwcHgiO2Iuc3R5bGUuaGVpZ2h0PSI1MHB4IjtiLnN0eWxlLm92ZXJmbG93PSJoaWRkZW4iO2M9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7Yy5zdHlsZS53aWR0aD0iMTAwJSI7Yy5zdHlsZS5oZWlnaHQ9IjIwMHB4IjtiLmFwcGVuZENoaWxkKGMpO2RvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYik7YT1jLm9mZnNldFdpZHRoO2Iuc3R5bGUub3ZlcmZsb3c9InNjcm9sbCI7Yj1jLm9mZnNldFdpZHRoO2RvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoZG9jdW1lbnQuYm9keS5sYXN0Q2hpbGQpOwpPcGVuTGF5ZXJzLlV0aWwuX3Njcm9sbGJhcldpZHRoPWEtYjthPU9wZW5MYXllcnMuVXRpbC5fc2Nyb2xsYmFyV2lkdGh9cmV0dXJuIGF9OwpPcGVuTGF5ZXJzLlV0aWwuZ2V0Rm9ybWF0dGVkTG9uTGF0PWZ1bmN0aW9uKGEsYixjKXtjfHwoYz0iZG1zIik7YT0oYSs1NDApJTM2MC0xODA7dmFyIGQ9TWF0aC5hYnMoYSksZT1NYXRoLmZsb29yKGQpLGY9ZD0oZC1lKS8oMS82MCksZD1NYXRoLmZsb29yKGQpLGY9TWF0aC5yb3VuZCgxMCooKGYtZCkvKDEvNjApKSksZj1mLzEwOzYwPD1mJiYoZi09NjAsZCs9MSw2MDw9ZCYmKGQtPTYwLGUrPTEpKTsxMD5lJiYoZT0iMCIrZSk7ZSs9Ilx1MDBiMCI7MDw9Yy5pbmRleE9mKCJkbSIpJiYoMTA+ZCYmKGQ9IjAiK2QpLGUrPWQrIiciLDA8PWMuaW5kZXhPZigiZG1zIikmJigxMD5mJiYoZj0iMCIrZiksZSs9ZisnIicpKTtyZXR1cm4gZT0ibG9uIj09Yj9lKygwPmE/T3BlbkxheWVycy5pMThuKCJXIik6T3BlbkxheWVycy5pMThuKCJFIikpOmUrKDA+YT9PcGVuTGF5ZXJzLmkxOG4oIlMiKTpPcGVuTGF5ZXJzLmkxOG4oIk4iKSl9O09wZW5MYXllcnMuRXZlbnQ9e29ic2VydmVyczohMSxLRVlfU1BBQ0U6MzIsS0VZX0JBQ0tTUEFDRTo4LEtFWV9UQUI6OSxLRVlfUkVUVVJOOjEzLEtFWV9FU0M6MjcsS0VZX0xFRlQ6MzcsS0VZX1VQOjM4LEtFWV9SSUdIVDozOSxLRVlfRE9XTjo0MCxLRVlfREVMRVRFOjQ2LGVsZW1lbnQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGEudGFyZ2V0fHxhLnNyY0VsZW1lbnR9LGlzU2luZ2xlVG91Y2g6ZnVuY3Rpb24oYSl7cmV0dXJuIGEudG91Y2hlcyYmMT09YS50b3VjaGVzLmxlbmd0aH0saXNNdWx0aVRvdWNoOmZ1bmN0aW9uKGEpe3JldHVybiBhLnRvdWNoZXMmJjE8YS50b3VjaGVzLmxlbmd0aH0saXNMZWZ0Q2xpY2s6ZnVuY3Rpb24oYSl7cmV0dXJuIGEud2hpY2gmJjE9PWEud2hpY2h8fGEuYnV0dG9uJiYxPT1hLmJ1dHRvbn0saXNSaWdodENsaWNrOmZ1bmN0aW9uKGEpe3JldHVybiBhLndoaWNoJiYzPT1hLndoaWNofHxhLmJ1dHRvbiYmMj09YS5idXR0b259LHN0b3A6ZnVuY3Rpb24oYSwKYil7Ynx8T3BlbkxheWVycy5FdmVudC5wcmV2ZW50RGVmYXVsdChhKTthLnN0b3BQcm9wYWdhdGlvbj9hLnN0b3BQcm9wYWdhdGlvbigpOmEuY2FuY2VsQnViYmxlPSEwfSxwcmV2ZW50RGVmYXVsdDpmdW5jdGlvbihhKXthLnByZXZlbnREZWZhdWx0P2EucHJldmVudERlZmF1bHQoKTphLnJldHVyblZhbHVlPSExfSxmaW5kRWxlbWVudDpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz1PcGVuTGF5ZXJzLkV2ZW50LmVsZW1lbnQoYSk7Yy5wYXJlbnROb2RlJiYoIWMudGFnTmFtZXx8Yy50YWdOYW1lLnRvVXBwZXJDYXNlKCkhPWIudG9VcHBlckNhc2UoKSk7KWM9Yy5wYXJlbnROb2RlO3JldHVybiBjfSxvYnNlcnZlOmZ1bmN0aW9uKGEsYixjLGQpe2E9T3BlbkxheWVycy5VdGlsLmdldEVsZW1lbnQoYSk7ZD1kfHwhMTsia2V5cHJlc3MiPT1iJiYobmF2aWdhdG9yLmFwcFZlcnNpb24ubWF0Y2goL0tvbnF1ZXJvcnxTYWZhcml8S0hUTUwvKXx8YS5hdHRhY2hFdmVudCkmJihiPSJrZXlkb3duIik7CnRoaXMub2JzZXJ2ZXJzfHwodGhpcy5vYnNlcnZlcnM9e30pO2lmKCFhLl9ldmVudENhY2hlSUQpe3ZhciBlPSJldmVudENhY2hlSURfIjthLmlkJiYoZT1hLmlkKyJfIitlKTthLl9ldmVudENhY2hlSUQ9T3BlbkxheWVycy5VdGlsLmNyZWF0ZVVuaXF1ZUlEKGUpfWU9YS5fZXZlbnRDYWNoZUlEO3RoaXMub2JzZXJ2ZXJzW2VdfHwodGhpcy5vYnNlcnZlcnNbZV09W10pO3RoaXMub2JzZXJ2ZXJzW2VdLnB1c2goe2VsZW1lbnQ6YSxuYW1lOmIsb2JzZXJ2ZXI6Yyx1c2VDYXB0dXJlOmR9KTthLmFkZEV2ZW50TGlzdGVuZXI/YS5hZGRFdmVudExpc3RlbmVyKGIsYyxkKTphLmF0dGFjaEV2ZW50JiZhLmF0dGFjaEV2ZW50KCJvbiIrYixjKX0sc3RvcE9ic2VydmluZ0VsZW1lbnQ6ZnVuY3Rpb24oYSl7YT1PcGVuTGF5ZXJzLlV0aWwuZ2V0RWxlbWVudChhKS5fZXZlbnRDYWNoZUlEO3RoaXMuX3JlbW92ZUVsZW1lbnRPYnNlcnZlcnMoT3BlbkxheWVycy5FdmVudC5vYnNlcnZlcnNbYV0pfSwKX3JlbW92ZUVsZW1lbnRPYnNlcnZlcnM6ZnVuY3Rpb24oYSl7aWYoYSlmb3IodmFyIGI9YS5sZW5ndGgtMTswPD1iO2ItLSl7dmFyIGM9YVtiXTtPcGVuTGF5ZXJzLkV2ZW50LnN0b3BPYnNlcnZpbmcuYXBwbHkodGhpcyxbYy5lbGVtZW50LGMubmFtZSxjLm9ic2VydmVyLGMudXNlQ2FwdHVyZV0pfX0sc3RvcE9ic2VydmluZzpmdW5jdGlvbihhLGIsYyxkKXtkPWR8fCExO2E9T3BlbkxheWVycy5VdGlsLmdldEVsZW1lbnQoYSk7dmFyIGU9YS5fZXZlbnRDYWNoZUlEOyJrZXlwcmVzcyI9PWImJihuYXZpZ2F0b3IuYXBwVmVyc2lvbi5tYXRjaCgvS29ucXVlcm9yfFNhZmFyaXxLSFRNTC8pfHxhLmRldGFjaEV2ZW50KSYmKGI9ImtleWRvd24iKTt2YXIgZj0hMSxnPU9wZW5MYXllcnMuRXZlbnQub2JzZXJ2ZXJzW2VdO2lmKGcpZm9yKHZhciBoPTA7IWYmJmg8Zy5sZW5ndGg7KXt2YXIgaz1nW2hdO2lmKGsubmFtZT09YiYmay5vYnNlcnZlcj09YyYmay51c2VDYXB0dXJlPT1kKXtnLnNwbGljZShoLAoxKTswPT1nLmxlbmd0aCYmZGVsZXRlIE9wZW5MYXllcnMuRXZlbnQub2JzZXJ2ZXJzW2VdO2Y9ITA7YnJlYWt9aCsrfWYmJihhLnJlbW92ZUV2ZW50TGlzdGVuZXI/YS5yZW1vdmVFdmVudExpc3RlbmVyKGIsYyxkKTphJiZhLmRldGFjaEV2ZW50JiZhLmRldGFjaEV2ZW50KCJvbiIrYixjKSk7cmV0dXJuIGZ9LHVubG9hZENhY2hlOmZ1bmN0aW9uKCl7aWYoT3BlbkxheWVycy5FdmVudCYmT3BlbkxheWVycy5FdmVudC5vYnNlcnZlcnMpe2Zvcih2YXIgYSBpbiBPcGVuTGF5ZXJzLkV2ZW50Lm9ic2VydmVycylPcGVuTGF5ZXJzLkV2ZW50Ll9yZW1vdmVFbGVtZW50T2JzZXJ2ZXJzLmFwcGx5KHRoaXMsW09wZW5MYXllcnMuRXZlbnQub2JzZXJ2ZXJzW2FdXSk7T3BlbkxheWVycy5FdmVudC5vYnNlcnZlcnM9ITF9fSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkV2ZW50In07Ck9wZW5MYXllcnMuRXZlbnQub2JzZXJ2ZSh3aW5kb3csInVubG9hZCIsT3BlbkxheWVycy5FdmVudC51bmxvYWRDYWNoZSwhMSk7Ck9wZW5MYXllcnMuRXZlbnRzPU9wZW5MYXllcnMuQ2xhc3Moe0JST1dTRVJfRVZFTlRTOiJtb3VzZW92ZXIgbW91c2VvdXQgbW91c2Vkb3duIG1vdXNldXAgbW91c2Vtb3ZlIGNsaWNrIGRibGNsaWNrIHJpZ2h0Y2xpY2sgZGJscmlnaHRjbGljayByZXNpemUgZm9jdXMgYmx1ciB0b3VjaHN0YXJ0IHRvdWNobW92ZSB0b3VjaGVuZCBrZXlkb3duIi5zcGxpdCgiICIpLGxpc3RlbmVyczpudWxsLG9iamVjdDpudWxsLGVsZW1lbnQ6bnVsbCxldmVudEhhbmRsZXI6bnVsbCxmYWxsVGhyb3VnaDpudWxsLGluY2x1ZGVYWTohMSxleHRlbnNpb25zOm51bGwsZXh0ZW5zaW9uQ291bnQ6bnVsbCxjbGVhck1vdXNlTGlzdGVuZXI6bnVsbCxpbml0aWFsaXplOmZ1bmN0aW9uKGEsYixjLGQsZSl7T3BlbkxheWVycy5VdGlsLmV4dGVuZCh0aGlzLGUpO3RoaXMub2JqZWN0PWE7dGhpcy5mYWxsVGhyb3VnaD1kO3RoaXMubGlzdGVuZXJzPXt9O3RoaXMuZXh0ZW5zaW9ucz17fTt0aGlzLmV4dGVuc2lvbkNvdW50PQp7fTt0aGlzLl9tc1RvdWNoZXM9W107bnVsbCE9YiYmdGhpcy5hdHRhY2hUb0VsZW1lbnQoYil9LGRlc3Ryb3k6ZnVuY3Rpb24oKXtmb3IodmFyIGEgaW4gdGhpcy5leHRlbnNpb25zKSJib29sZWFuIiE9PXR5cGVvZiB0aGlzLmV4dGVuc2lvbnNbYV0mJnRoaXMuZXh0ZW5zaW9uc1thXS5kZXN0cm95KCk7dGhpcy5leHRlbnNpb25zPW51bGw7dGhpcy5lbGVtZW50JiYoT3BlbkxheWVycy5FdmVudC5zdG9wT2JzZXJ2aW5nRWxlbWVudCh0aGlzLmVsZW1lbnQpLHRoaXMuZWxlbWVudC5oYXNTY3JvbGxFdmVudCYmT3BlbkxheWVycy5FdmVudC5zdG9wT2JzZXJ2aW5nKHdpbmRvdywic2Nyb2xsIix0aGlzLmNsZWFyTW91c2VMaXN0ZW5lcikpO3RoaXMuZXZlbnRIYW5kbGVyPXRoaXMuZmFsbFRocm91Z2g9dGhpcy5vYmplY3Q9dGhpcy5saXN0ZW5lcnM9dGhpcy5lbGVtZW50PW51bGx9LGFkZEV2ZW50VHlwZTpmdW5jdGlvbihhKXt9LGF0dGFjaFRvRWxlbWVudDpmdW5jdGlvbihhKXt0aGlzLmVsZW1lbnQ/Ck9wZW5MYXllcnMuRXZlbnQuc3RvcE9ic2VydmluZ0VsZW1lbnQodGhpcy5lbGVtZW50KToodGhpcy5ldmVudEhhbmRsZXI9T3BlbkxheWVycy5GdW5jdGlvbi5iaW5kQXNFdmVudExpc3RlbmVyKHRoaXMuaGFuZGxlQnJvd3NlckV2ZW50LHRoaXMpLHRoaXMuY2xlYXJNb3VzZUxpc3RlbmVyPU9wZW5MYXllcnMuRnVuY3Rpb24uYmluZCh0aGlzLmNsZWFyTW91c2VDYWNoZSx0aGlzKSk7dGhpcy5lbGVtZW50PWE7Zm9yKHZhciBiPSEhd2luZG93Lm5hdmlnYXRvci5tc01heFRvdWNoUG9pbnRzLGMsZD0wLGU9dGhpcy5CUk9XU0VSX0VWRU5UUy5sZW5ndGg7ZDxlO2QrKyljPXRoaXMuQlJPV1NFUl9FVkVOVFNbZF0sT3BlbkxheWVycy5FdmVudC5vYnNlcnZlKGEsYyx0aGlzLmV2ZW50SGFuZGxlciksYiYmMD09PWMuaW5kZXhPZigidG91Y2giKSYmdGhpcy5hZGRNc1RvdWNoTGlzdGVuZXIoYSxjLHRoaXMuZXZlbnRIYW5kbGVyKTtPcGVuTGF5ZXJzLkV2ZW50Lm9ic2VydmUoYSwiZHJhZ3N0YXJ0IiwKT3BlbkxheWVycy5FdmVudC5zdG9wKX0sb246ZnVuY3Rpb24oYSl7Zm9yKHZhciBiIGluIGEpInNjb3BlIiE9YiYmYS5oYXNPd25Qcm9wZXJ0eShiKSYmdGhpcy5yZWdpc3RlcihiLGEuc2NvcGUsYVtiXSl9LHJlZ2lzdGVyOmZ1bmN0aW9uKGEsYixjLGQpe2EgaW4gT3BlbkxheWVycy5FdmVudHMmJiF0aGlzLmV4dGVuc2lvbnNbYV0mJih0aGlzLmV4dGVuc2lvbnNbYV09bmV3IE9wZW5MYXllcnMuRXZlbnRzW2FdKHRoaXMpKTtpZihudWxsIT1jKXtudWxsPT1iJiYoYj10aGlzLm9iamVjdCk7dmFyIGU9dGhpcy5saXN0ZW5lcnNbYV07ZXx8KGU9W10sdGhpcy5saXN0ZW5lcnNbYV09ZSx0aGlzLmV4dGVuc2lvbkNvdW50W2FdPTApO2I9e29iajpiLGZ1bmM6Y307ZD8oZS5zcGxpY2UodGhpcy5leHRlbnNpb25Db3VudFthXSwwLGIpLCJvYmplY3QiPT09dHlwZW9mIGQmJmQuZXh0ZW5zaW9uJiZ0aGlzLmV4dGVuc2lvbkNvdW50W2FdKyspOmUucHVzaChiKX19LHJlZ2lzdGVyUHJpb3JpdHk6ZnVuY3Rpb24oYSwKYixjKXt0aGlzLnJlZ2lzdGVyKGEsYixjLCEwKX0sdW46ZnVuY3Rpb24oYSl7Zm9yKHZhciBiIGluIGEpInNjb3BlIiE9YiYmYS5oYXNPd25Qcm9wZXJ0eShiKSYmdGhpcy51bnJlZ2lzdGVyKGIsYS5zY29wZSxhW2JdKX0sdW5yZWdpc3RlcjpmdW5jdGlvbihhLGIsYyl7bnVsbD09YiYmKGI9dGhpcy5vYmplY3QpO2E9dGhpcy5saXN0ZW5lcnNbYV07aWYobnVsbCE9YSlmb3IodmFyIGQ9MCxlPWEubGVuZ3RoO2Q8ZTtkKyspaWYoYVtkXS5vYmo9PWImJmFbZF0uZnVuYz09Yyl7YS5zcGxpY2UoZCwxKTticmVha319LHJlbW92ZTpmdW5jdGlvbihhKXtudWxsIT10aGlzLmxpc3RlbmVyc1thXSYmKHRoaXMubGlzdGVuZXJzW2FdPVtdKX0sdHJpZ2dlckV2ZW50OmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5saXN0ZW5lcnNbYV07aWYoYyYmMCE9Yy5sZW5ndGgpe251bGw9PWImJihiPXt9KTtiLm9iamVjdD10aGlzLm9iamVjdDtiLmVsZW1lbnQ9dGhpcy5lbGVtZW50O2IudHlwZXx8KGIudHlwZT0KYSk7Zm9yKHZhciBjPWMuc2xpY2UoKSxkLGU9MCxmPWMubGVuZ3RoO2U8ZiYmKGQ9Y1tlXSxkPWQuZnVuYy5hcHBseShkLm9iaixbYl0pLHZvaWQgMD09ZHx8ITEhPWQpO2UrKyk7dGhpcy5mYWxsVGhyb3VnaHx8T3BlbkxheWVycy5FdmVudC5zdG9wKGIsITApO3JldHVybiBkfX0saGFuZGxlQnJvd3NlckV2ZW50OmZ1bmN0aW9uKGEpe3ZhciBiPWEudHlwZSxjPXRoaXMubGlzdGVuZXJzW2JdO2lmKGMmJjAhPWMubGVuZ3RoKXtpZigoYz1hLnRvdWNoZXMpJiZjWzBdKXtmb3IodmFyIGQ9MCxlPTAsZj1jLmxlbmd0aCxnLGg9MDtoPGY7KytoKWc9dGhpcy5nZXRUb3VjaENsaWVudFhZKGNbaF0pLGQrPWcuY2xpZW50WCxlKz1nLmNsaWVudFk7YS5jbGllbnRYPWQvZjthLmNsaWVudFk9ZS9mfXRoaXMuaW5jbHVkZVhZJiYoYS54eT10aGlzLmdldE1vdXNlUG9zaXRpb24oYSkpO3RoaXMudHJpZ2dlckV2ZW50KGIsYSl9fSxnZXRUb3VjaENsaWVudFhZOmZ1bmN0aW9uKGEpe3ZhciBiPXdpbmRvdy5vbE1vY2tXaW58fAp3aW5kb3csYz1iLnBhZ2VYT2Zmc2V0LGI9Yi5wYWdlWU9mZnNldCxkPWEuY2xpZW50WCxlPWEuY2xpZW50WTtpZigwPT09YS5wYWdlWSYmTWF0aC5mbG9vcihlKT5NYXRoLmZsb29yKGEucGFnZVkpfHwwPT09YS5wYWdlWCYmTWF0aC5mbG9vcihkKT5NYXRoLmZsb29yKGEucGFnZVgpKWQtPWMsZS09YjtlbHNlIGlmKGU8YS5wYWdlWS1ifHxkPGEucGFnZVgtYylkPWEucGFnZVgtYyxlPWEucGFnZVktYjthLm9sQ2xpZW50WD1kO2Eub2xDbGllbnRZPWU7cmV0dXJue2NsaWVudFg6ZCxjbGllbnRZOmV9fSxjbGVhck1vdXNlQ2FjaGU6ZnVuY3Rpb24oKXt0aGlzLmVsZW1lbnQuc2Nyb2xscz1udWxsO3RoaXMuZWxlbWVudC5sZWZ0dG9wPW51bGw7dGhpcy5lbGVtZW50Lm9mZnNldHM9bnVsbH0sZ2V0TW91c2VQb3NpdGlvbjpmdW5jdGlvbihhKXt0aGlzLmluY2x1ZGVYWT90aGlzLmVsZW1lbnQuaGFzU2Nyb2xsRXZlbnR8fChPcGVuTGF5ZXJzLkV2ZW50Lm9ic2VydmUod2luZG93LCJzY3JvbGwiLAp0aGlzLmNsZWFyTW91c2VMaXN0ZW5lciksdGhpcy5lbGVtZW50Lmhhc1Njcm9sbEV2ZW50PSEwKTp0aGlzLmNsZWFyTW91c2VDYWNoZSgpO2lmKCF0aGlzLmVsZW1lbnQuc2Nyb2xscyl7dmFyIGI9T3BlbkxheWVycy5VdGlsLmdldFZpZXdwb3J0RWxlbWVudCgpO3RoaXMuZWxlbWVudC5zY3JvbGxzPVt3aW5kb3cucGFnZVhPZmZzZXR8fGIuc2Nyb2xsTGVmdCx3aW5kb3cucGFnZVlPZmZzZXR8fGIuc2Nyb2xsVG9wXX10aGlzLmVsZW1lbnQubGVmdHRvcHx8KHRoaXMuZWxlbWVudC5sZWZ0dG9wPVtkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50TGVmdHx8MCxkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50VG9wfHwwXSk7dGhpcy5lbGVtZW50Lm9mZnNldHN8fCh0aGlzLmVsZW1lbnQub2Zmc2V0cz1PcGVuTGF5ZXJzLlV0aWwucGFnZVBvc2l0aW9uKHRoaXMuZWxlbWVudCkpO3JldHVybiBuZXcgT3BlbkxheWVycy5QaXhlbChhLmNsaWVudFgrdGhpcy5lbGVtZW50LnNjcm9sbHNbMF0tCnRoaXMuZWxlbWVudC5vZmZzZXRzWzBdLXRoaXMuZWxlbWVudC5sZWZ0dG9wWzBdLGEuY2xpZW50WSt0aGlzLmVsZW1lbnQuc2Nyb2xsc1sxXS10aGlzLmVsZW1lbnQub2Zmc2V0c1sxXS10aGlzLmVsZW1lbnQubGVmdHRvcFsxXSl9LGFkZE1zVG91Y2hMaXN0ZW5lcjpmdW5jdGlvbihhLGIsYyl7ZnVuY3Rpb24gZChhKXtjKE9wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKHtzdG9wUHJvcGFnYXRpb246ZnVuY3Rpb24oKXtmb3IodmFyIGE9ZS5sZW5ndGgtMTswPD1hOy0tYSllW2FdLnN0b3BQcm9wYWdhdGlvbigpfSxwcmV2ZW50RGVmYXVsdDpmdW5jdGlvbigpe2Zvcih2YXIgYT1lLmxlbmd0aC0xOzA8PWE7LS1hKWVbYV0ucHJldmVudERlZmF1bHQoKX0sdHlwZTpifSxhKSl9dmFyIGU9dGhpcy5fbXNUb3VjaGVzO3N3aXRjaChiKXtjYXNlICJ0b3VjaHN0YXJ0IjpyZXR1cm4gdGhpcy5hZGRNc1RvdWNoTGlzdGVuZXJTdGFydChhLGIsZCk7Y2FzZSAidG91Y2hlbmQiOnJldHVybiB0aGlzLmFkZE1zVG91Y2hMaXN0ZW5lckVuZChhLApiLGQpO2Nhc2UgInRvdWNobW92ZSI6cmV0dXJuIHRoaXMuYWRkTXNUb3VjaExpc3RlbmVyTW92ZShhLGIsZCk7ZGVmYXVsdDp0aHJvdyJVbmtub3duIHRvdWNoIGV2ZW50IHR5cGUiO319LGFkZE1zVG91Y2hMaXN0ZW5lclN0YXJ0OmZ1bmN0aW9uKGEsYixjKXt2YXIgZD10aGlzLl9tc1RvdWNoZXM7T3BlbkxheWVycy5FdmVudC5vYnNlcnZlKGEsIk1TUG9pbnRlckRvd24iLGZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0hMSxnPTAsaD1kLmxlbmd0aDtnPGg7KytnKWlmKGRbZ10ucG9pbnRlcklkPT1hLnBvaW50ZXJJZCl7Yj0hMDticmVha31ifHxkLnB1c2goYSk7YS50b3VjaGVzPWQuc2xpY2UoKTtjKGEpfSk7T3BlbkxheWVycy5FdmVudC5vYnNlcnZlKGEsIk1TUG9pbnRlclVwIixmdW5jdGlvbihhKXtmb3IodmFyIGI9MCxjPWQubGVuZ3RoO2I8YzsrK2IpaWYoZFtiXS5wb2ludGVySWQ9PWEucG9pbnRlcklkKXtkLnNwbGljZShiLDEpO2JyZWFrfX0pfSxhZGRNc1RvdWNoTGlzdGVuZXJNb3ZlOmZ1bmN0aW9uKGEsCmIsYyl7dmFyIGQ9dGhpcy5fbXNUb3VjaGVzO09wZW5MYXllcnMuRXZlbnQub2JzZXJ2ZShhLCJNU1BvaW50ZXJNb3ZlIixmdW5jdGlvbihhKXtpZihhLnBvaW50ZXJUeXBlIT1hLk1TUE9JTlRFUl9UWVBFX01PVVNFfHwwIT1hLmJ1dHRvbnMpaWYoMSE9ZC5sZW5ndGh8fGRbMF0ucGFnZVghPWEucGFnZVh8fGRbMF0ucGFnZVkhPWEucGFnZVkpe2Zvcih2YXIgYj0wLGc9ZC5sZW5ndGg7YjxnOysrYilpZihkW2JdLnBvaW50ZXJJZD09YS5wb2ludGVySWQpe2RbYl09YTticmVha31hLnRvdWNoZXM9ZC5zbGljZSgpO2MoYSl9fSl9LGFkZE1zVG91Y2hMaXN0ZW5lckVuZDpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9dGhpcy5fbXNUb3VjaGVzO09wZW5MYXllcnMuRXZlbnQub2JzZXJ2ZShhLCJNU1BvaW50ZXJVcCIsZnVuY3Rpb24oYSl7Zm9yKHZhciBiPTAsZz1kLmxlbmd0aDtiPGc7KytiKWlmKGRbYl0ucG9pbnRlcklkPT1hLnBvaW50ZXJJZCl7ZC5zcGxpY2UoYiwxKTticmVha31hLnRvdWNoZXM9CmQuc2xpY2UoKTtjKGEpfSl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuRXZlbnRzIn0pO09wZW5MYXllcnMuRXZlbnRzLmJ1dHRvbmNsaWNrPU9wZW5MYXllcnMuQ2xhc3Moe3RhcmdldDpudWxsLGV2ZW50czoibW91c2Vkb3duIG1vdXNldXAgY2xpY2sgZGJsY2xpY2sgdG91Y2hzdGFydCB0b3VjaG1vdmUgdG91Y2hlbmQga2V5ZG93biIuc3BsaXQoIiAiKSxzdGFydFJlZ0V4Oi9ebW91c2Vkb3dufHRvdWNoc3RhcnQkLyxjYW5jZWxSZWdFeDovXnRvdWNobW92ZSQvLGNvbXBsZXRlUmVnRXg6L15tb3VzZXVwfHRvdWNoZW5kJC8saW5pdGlhbGl6ZTpmdW5jdGlvbihhKXt0aGlzLnRhcmdldD1hO2ZvcihhPXRoaXMuZXZlbnRzLmxlbmd0aC0xOzA8PWE7LS1hKXRoaXMudGFyZ2V0LnJlZ2lzdGVyKHRoaXMuZXZlbnRzW2FdLHRoaXMsdGhpcy5idXR0b25DbGljayx7ZXh0ZW5zaW9uOiEwfSl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXtmb3IodmFyIGE9dGhpcy5ldmVudHMubGVuZ3RoLTE7MDw9YTstLWEpdGhpcy50YXJnZXQudW5yZWdpc3Rlcih0aGlzLmV2ZW50c1thXSx0aGlzLHRoaXMuYnV0dG9uQ2xpY2spOwpkZWxldGUgdGhpcy50YXJnZXR9LGdldFByZXNzZWRCdXR0b246ZnVuY3Rpb24oYSl7dmFyIGI9MyxjO2Rve2lmKE9wZW5MYXllcnMuRWxlbWVudC5oYXNDbGFzcyhhLCJvbEJ1dHRvbiIpKXtjPWE7YnJlYWt9YT1hLnBhcmVudE5vZGV9d2hpbGUoMDwtLWImJmEpO3JldHVybiBjfSxpZ25vcmU6ZnVuY3Rpb24oYSl7dmFyIGI9MyxjPSExO2Rve2lmKCJhIj09PWEubm9kZU5hbWUudG9Mb3dlckNhc2UoKSl7Yz0hMDticmVha31hPWEucGFyZW50Tm9kZX13aGlsZSgwPC0tYiYmYSk7cmV0dXJuIGN9LGJ1dHRvbkNsaWNrOmZ1bmN0aW9uKGEpe3ZhciBiPSEwLGM9T3BlbkxheWVycy5FdmVudC5lbGVtZW50KGEpO2lmKGMmJihPcGVuTGF5ZXJzLkV2ZW50LmlzTGVmdENsaWNrKGEpfHwhfmEudHlwZS5pbmRleE9mKCJtb3VzZSIpKSlpZihjPXRoaXMuZ2V0UHJlc3NlZEJ1dHRvbihjKSl7aWYoImtleWRvd24iPT09YS50eXBlKXN3aXRjaChhLmtleUNvZGUpe2Nhc2UgT3BlbkxheWVycy5FdmVudC5LRVlfUkVUVVJOOmNhc2UgT3BlbkxheWVycy5FdmVudC5LRVlfU1BBQ0U6dGhpcy50YXJnZXQudHJpZ2dlckV2ZW50KCJidXR0b25jbGljayIsCntidXR0b25FbGVtZW50OmN9KSxPcGVuTGF5ZXJzLkV2ZW50LnN0b3AoYSksYj0hMX1lbHNlIGlmKHRoaXMuc3RhcnRFdnQpe2lmKHRoaXMuY29tcGxldGVSZWdFeC50ZXN0KGEudHlwZSkpe3ZhciBiPU9wZW5MYXllcnMuVXRpbC5wYWdlUG9zaXRpb24oYyksZD1PcGVuTGF5ZXJzLlV0aWwuZ2V0Vmlld3BvcnRFbGVtZW50KCksZT13aW5kb3cucGFnZVlPZmZzZXR8fGQuc2Nyb2xsVG9wO2JbMF0tPXdpbmRvdy5wYWdlWE9mZnNldHx8ZC5zY3JvbGxMZWZ0O2JbMV0tPWU7dGhpcy50YXJnZXQudHJpZ2dlckV2ZW50KCJidXR0b25jbGljayIse2J1dHRvbkVsZW1lbnQ6YyxidXR0b25YWTp7eDp0aGlzLnN0YXJ0RXZ0LmNsaWVudFgtYlswXSx5OnRoaXMuc3RhcnRFdnQuY2xpZW50WS1iWzFdfX0pfXRoaXMuY2FuY2VsUmVnRXgudGVzdChhLnR5cGUpJiZkZWxldGUgdGhpcy5zdGFydEV2dDtPcGVuTGF5ZXJzLkV2ZW50LnN0b3AoYSk7Yj0hMX10aGlzLnN0YXJ0UmVnRXgudGVzdChhLnR5cGUpJiYKKHRoaXMuc3RhcnRFdnQ9YSxPcGVuTGF5ZXJzLkV2ZW50LnN0b3AoYSksYj0hMSl9ZWxzZSBiPSF0aGlzLmlnbm9yZShPcGVuTGF5ZXJzLkV2ZW50LmVsZW1lbnQoYSkpLGRlbGV0ZSB0aGlzLnN0YXJ0RXZ0O3JldHVybiBifX0pO09wZW5MYXllcnMuVXRpbD1PcGVuTGF5ZXJzLlV0aWx8fHt9OwpPcGVuTGF5ZXJzLlV0aWwudmVuZG9yUHJlZml4PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhKXtyZXR1cm4gYT9hLnJlcGxhY2UoLyhbQS1aXSkvZyxmdW5jdGlvbihhKXtyZXR1cm4iLSIrYS50b0xvd2VyQ2FzZSgpfSkucmVwbGFjZSgvXm1zLS8sIi1tcy0iKTpudWxsfWZ1bmN0aW9uIGIoYSxiKXtpZih2b2lkIDA9PT1nW2JdKXt2YXIgYyxlPTAsZj1kLmxlbmd0aCxwPSJ1bmRlZmluZWQiIT09dHlwZW9mIGEuY3NzVGV4dDtmb3IoZ1tiXT1udWxsO2U8ZjtlKyspaWYoKGM9ZFtlXSk/KHB8fChjPWMudG9Mb3dlckNhc2UoKSksYz1jK2IuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrYi5zbGljZSgxKSk6Yz1iLHZvaWQgMCE9PWFbY10pe2dbYl09YzticmVha319cmV0dXJuIGdbYl19ZnVuY3Rpb24gYyhhKXtyZXR1cm4gYihlLGEpfXZhciBkPVsiIiwiTyIsIm1zIiwiTW96IiwiV2Via2l0Il0sZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKS5zdHlsZSxmPXt9LGc9e307cmV0dXJue2NzczpmdW5jdGlvbihiKXtpZih2b2lkIDA9PT0KZltiXSl7dmFyIGQ9Yi5yZXBsYWNlKC8oLVtcc1xTXSkvZyxmdW5jdGlvbihhKXtyZXR1cm4gYS5jaGFyQXQoMSkudG9VcHBlckNhc2UoKX0pLGQ9YyhkKTtmW2JdPWEoZCl9cmV0dXJuIGZbYl19LGpzOmIsc3R5bGU6Yyxjc3NDYWNoZTpmLGpzQ2FjaGU6Z319KCk7T3BlbkxheWVycy5BbmltYXRpb249ZnVuY3Rpb24oYSl7dmFyIGI9T3BlbkxheWVycy5VdGlsLnZlbmRvclByZWZpeC5qcyhhLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiKSxjPSEhYixkPWZ1bmN0aW9uKCl7dmFyIGM9YVtiXXx8ZnVuY3Rpb24oYixjKXthLnNldFRpbWVvdXQoYiwxNil9O3JldHVybiBmdW5jdGlvbihiLGQpe2MuYXBwbHkoYSxbYixkXSl9fSgpLGU9MCxmPXt9O3JldHVybntpc05hdGl2ZTpjLHJlcXVlc3RGcmFtZTpkLHN0YXJ0OmZ1bmN0aW9uKGEsYixjKXtiPTA8Yj9iOk51bWJlci5QT1NJVElWRV9JTkZJTklUWTt2YXIgbD0rK2UsbT0rbmV3IERhdGU7ZltsXT1mdW5jdGlvbigpe2ZbbF0mJituZXcgRGF0ZS1tPD1iPyhhKCksZltsXSYmZChmW2xdLGMpKTpkZWxldGUgZltsXX07ZChmW2xdLGMpO3JldHVybiBsfSxzdG9wOmZ1bmN0aW9uKGEpe2RlbGV0ZSBmW2FdfX19KHdpbmRvdyk7T3BlbkxheWVycy5Ud2Vlbj1PcGVuTGF5ZXJzLkNsYXNzKHtlYXNpbmc6bnVsbCxiZWdpbjpudWxsLGZpbmlzaDpudWxsLGR1cmF0aW9uOm51bGwsY2FsbGJhY2tzOm51bGwsdGltZTpudWxsLG1pbkZyYW1lUmF0ZTpudWxsLHN0YXJ0VGltZTpudWxsLGFuaW1hdGlvbklkOm51bGwscGxheWluZzohMSxpbml0aWFsaXplOmZ1bmN0aW9uKGEpe3RoaXMuZWFzaW5nPWE/YTpPcGVuTGF5ZXJzLkVhc2luZy5FeHBvLmVhc2VPdXR9LHN0YXJ0OmZ1bmN0aW9uKGEsYixjLGQpe3RoaXMucGxheWluZz0hMDt0aGlzLmJlZ2luPWE7dGhpcy5maW5pc2g9Yjt0aGlzLmR1cmF0aW9uPWM7dGhpcy5jYWxsYmFja3M9ZC5jYWxsYmFja3M7dGhpcy5taW5GcmFtZVJhdGU9ZC5taW5GcmFtZVJhdGV8fDMwO3RoaXMudGltZT0wO3RoaXMuc3RhcnRUaW1lPShuZXcgRGF0ZSkuZ2V0VGltZSgpO09wZW5MYXllcnMuQW5pbWF0aW9uLnN0b3AodGhpcy5hbmltYXRpb25JZCk7dGhpcy5hbmltYXRpb25JZD1udWxsOwp0aGlzLmNhbGxiYWNrcyYmdGhpcy5jYWxsYmFja3Muc3RhcnQmJnRoaXMuY2FsbGJhY2tzLnN0YXJ0LmNhbGwodGhpcyx0aGlzLmJlZ2luKTt0aGlzLmFuaW1hdGlvbklkPU9wZW5MYXllcnMuQW5pbWF0aW9uLnN0YXJ0KE9wZW5MYXllcnMuRnVuY3Rpb24uYmluZCh0aGlzLnBsYXksdGhpcykpfSxzdG9wOmZ1bmN0aW9uKCl7dGhpcy5wbGF5aW5nJiYodGhpcy5jYWxsYmFja3MmJnRoaXMuY2FsbGJhY2tzLmRvbmUmJnRoaXMuY2FsbGJhY2tzLmRvbmUuY2FsbCh0aGlzLHRoaXMuZmluaXNoKSxPcGVuTGF5ZXJzLkFuaW1hdGlvbi5zdG9wKHRoaXMuYW5pbWF0aW9uSWQpLHRoaXMuYW5pbWF0aW9uSWQ9bnVsbCx0aGlzLnBsYXlpbmc9ITEpfSxwbGF5OmZ1bmN0aW9uKCl7dmFyIGE9e30sYjtmb3IoYiBpbiB0aGlzLmJlZ2luKXt2YXIgYz10aGlzLmJlZ2luW2JdLGQ9dGhpcy5maW5pc2hbYl07aWYobnVsbD09Y3x8bnVsbD09ZHx8aXNOYU4oYyl8fGlzTmFOKGQpKXRocm93IG5ldyBUeXBlRXJyb3IoImludmFsaWQgdmFsdWUgZm9yIFR3ZWVuIik7CmFbYl09dGhpcy5lYXNpbmcuYXBwbHkodGhpcyxbdGhpcy50aW1lLGMsZC1jLHRoaXMuZHVyYXRpb25dKX10aGlzLnRpbWUrKzt0aGlzLmNhbGxiYWNrcyYmdGhpcy5jYWxsYmFja3MuZWFjaFN0ZXAmJigobmV3IERhdGUpLmdldFRpbWUoKS10aGlzLnN0YXJ0VGltZSkvdGhpcy50aW1lPD0xRTMvdGhpcy5taW5GcmFtZVJhdGUmJnRoaXMuY2FsbGJhY2tzLmVhY2hTdGVwLmNhbGwodGhpcyxhKTt0aGlzLnRpbWU+dGhpcy5kdXJhdGlvbiYmdGhpcy5zdG9wKCl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuVHdlZW4ifSk7T3BlbkxheWVycy5FYXNpbmc9e0NMQVNTX05BTUU6Ik9wZW5MYXllcnMuRWFzaW5nIn07T3BlbkxheWVycy5FYXNpbmcuTGluZWFyPXtlYXNlSW46ZnVuY3Rpb24oYSxiLGMsZCl7cmV0dXJuIGMqYS9kK2J9LGVhc2VPdXQ6ZnVuY3Rpb24oYSxiLGMsZCl7cmV0dXJuIGMqYS9kK2J9LGVhc2VJbk91dDpmdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gYyphL2QrYn0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5FYXNpbmcuTGluZWFyIn07Ck9wZW5MYXllcnMuRWFzaW5nLkV4cG89e2Vhc2VJbjpmdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gMD09YT9iOmMqTWF0aC5wb3coMiwxMCooYS9kLTEpKStifSxlYXNlT3V0OmZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiBhPT1kP2IrYzpjKigtTWF0aC5wb3coMiwtMTAqYS9kKSsxKStifSxlYXNlSW5PdXQ6ZnVuY3Rpb24oYSxiLGMsZCl7cmV0dXJuIDA9PWE/YjphPT1kP2IrYzoxPihhLz1kLzIpP2MvMipNYXRoLnBvdygyLDEwKihhLTEpKStiOmMvMiooLU1hdGgucG93KDIsLTEwKi0tYSkrMikrYn0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5FYXNpbmcuRXhwbyJ9OwpPcGVuTGF5ZXJzLkVhc2luZy5RdWFkPXtlYXNlSW46ZnVuY3Rpb24oYSxiLGMsZCl7cmV0dXJuIGMqKGEvPWQpKmErYn0sZWFzZU91dDpmdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4tYyooYS89ZCkqKGEtMikrYn0sZWFzZUluT3V0OmZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiAxPihhLz1kLzIpP2MvMiphKmErYjotYy8yKigtLWEqKGEtMiktMSkrYn0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5FYXNpbmcuUXVhZCJ9O09wZW5MYXllcnMuUHJvamVjdGlvbj1PcGVuTGF5ZXJzLkNsYXNzKHtwcm9qOm51bGwscHJvakNvZGU6bnVsbCx0aXRsZVJlZ0V4Oi9cK3RpdGxlPVteXCtdKi8saW5pdGlhbGl6ZTpmdW5jdGlvbihhLGIpe09wZW5MYXllcnMuVXRpbC5leHRlbmQodGhpcyxiKTt0aGlzLnByb2pDb2RlPWE7Im9iamVjdCI9PXR5cGVvZiBQcm9qNGpzJiYodGhpcy5wcm9qPW5ldyBQcm9qNGpzLlByb2ooYSkpfSxnZXRDb2RlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHJvaj90aGlzLnByb2ouc3JzQ29kZTp0aGlzLnByb2pDb2RlfSxnZXRVbml0czpmdW5jdGlvbigpe3JldHVybiB0aGlzLnByb2o/dGhpcy5wcm9qLnVuaXRzOm51bGx9LHRvU3RyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0Q29kZSgpfSxlcXVhbHM6ZnVuY3Rpb24oYSl7dmFyIGI9ITE7YSYmKGEgaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLlByb2plY3Rpb258fChhPW5ldyBPcGVuTGF5ZXJzLlByb2plY3Rpb24oYSkpLCJvYmplY3QiPT0KdHlwZW9mIFByb2o0anMmJnRoaXMucHJvai5kZWZEYXRhJiZhLnByb2ouZGVmRGF0YT9iPXRoaXMucHJvai5kZWZEYXRhLnJlcGxhY2UodGhpcy50aXRsZVJlZ0V4LCIiKT09YS5wcm9qLmRlZkRhdGEucmVwbGFjZSh0aGlzLnRpdGxlUmVnRXgsIiIpOmEuZ2V0Q29kZSYmKGI9dGhpcy5nZXRDb2RlKCksYT1hLmdldENvZGUoKSxiPWI9PWF8fCEhT3BlbkxheWVycy5Qcm9qZWN0aW9uLnRyYW5zZm9ybXNbYl0mJk9wZW5MYXllcnMuUHJvamVjdGlvbi50cmFuc2Zvcm1zW2JdW2FdPT09T3BlbkxheWVycy5Qcm9qZWN0aW9uLm51bGxUcmFuc2Zvcm0pKTtyZXR1cm4gYn0sZGVzdHJveTpmdW5jdGlvbigpe2RlbGV0ZSB0aGlzLnByb2o7ZGVsZXRlIHRoaXMucHJvakNvZGV9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuUHJvamVjdGlvbiJ9KTtPcGVuTGF5ZXJzLlByb2plY3Rpb24udHJhbnNmb3Jtcz17fTsKT3BlbkxheWVycy5Qcm9qZWN0aW9uLmRlZmF1bHRzPXsiRVBTRzo0MzI2Ijp7dW5pdHM6ImRlZ3JlZXMiLG1heEV4dGVudDpbLTE4MCwtOTAsMTgwLDkwXSx5eDohMH0sIkNSUzo4NCI6e3VuaXRzOiJkZWdyZWVzIixtYXhFeHRlbnQ6Wy0xODAsLTkwLDE4MCw5MF19LCJFUFNHOjkwMDkxMyI6e3VuaXRzOiJtIixtYXhFeHRlbnQ6Wy0yLjAwMzc1MDgzNEU3LC0yLjAwMzc1MDgzNEU3LDIuMDAzNzUwODM0RTcsMi4wMDM3NTA4MzRFN119fTsKT3BlbkxheWVycy5Qcm9qZWN0aW9uLmFkZFRyYW5zZm9ybT1mdW5jdGlvbihhLGIsYyl7aWYoYz09PU9wZW5MYXllcnMuUHJvamVjdGlvbi5udWxsVHJhbnNmb3JtKXt2YXIgZD1PcGVuTGF5ZXJzLlByb2plY3Rpb24uZGVmYXVsdHNbYV07ZCYmIU9wZW5MYXllcnMuUHJvamVjdGlvbi5kZWZhdWx0c1tiXSYmKE9wZW5MYXllcnMuUHJvamVjdGlvbi5kZWZhdWx0c1tiXT1kKX1PcGVuTGF5ZXJzLlByb2plY3Rpb24udHJhbnNmb3Jtc1thXXx8KE9wZW5MYXllcnMuUHJvamVjdGlvbi50cmFuc2Zvcm1zW2FdPXt9KTtPcGVuTGF5ZXJzLlByb2plY3Rpb24udHJhbnNmb3Jtc1thXVtiXT1jfTsKT3BlbkxheWVycy5Qcm9qZWN0aW9uLnRyYW5zZm9ybT1mdW5jdGlvbihhLGIsYyl7aWYoYiYmYylpZihiIGluc3RhbmNlb2YgT3BlbkxheWVycy5Qcm9qZWN0aW9ufHwoYj1uZXcgT3BlbkxheWVycy5Qcm9qZWN0aW9uKGIpKSxjIGluc3RhbmNlb2YgT3BlbkxheWVycy5Qcm9qZWN0aW9ufHwoYz1uZXcgT3BlbkxheWVycy5Qcm9qZWN0aW9uKGMpKSxiLnByb2omJmMucHJvailhPVByb2o0anMudHJhbnNmb3JtKGIucHJvaixjLnByb2osYSk7ZWxzZXtiPWIuZ2V0Q29kZSgpO2M9Yy5nZXRDb2RlKCk7dmFyIGQ9T3BlbkxheWVycy5Qcm9qZWN0aW9uLnRyYW5zZm9ybXM7aWYoZFtiXSYmZFtiXVtjXSlkW2JdW2NdKGEpfXJldHVybiBhfTtPcGVuTGF5ZXJzLlByb2plY3Rpb24ubnVsbFRyYW5zZm9ybT1mdW5jdGlvbihhKXtyZXR1cm4gYX07CihmdW5jdGlvbigpe2Z1bmN0aW9uIGEoYSl7YS54PTE4MCphLngvZDthLnk9MTgwL01hdGguUEkqKDIqTWF0aC5hdGFuKE1hdGguZXhwKGEueS9kKk1hdGguUEkpKS1NYXRoLlBJLzIpO3JldHVybiBhfWZ1bmN0aW9uIGIoYSl7YS54PWEueCpkLzE4MDt2YXIgYj1NYXRoLmxvZyhNYXRoLnRhbigoOTArYS55KSpNYXRoLlBJLzM2MCkpL01hdGguUEkqZDthLnk9TWF0aC5tYXgoLTIuMDAzNzUwODM0RTcsTWF0aC5taW4oYiwyLjAwMzc1MDgzNEU3KSk7cmV0dXJuIGF9ZnVuY3Rpb24gYyhjLGQpe3ZhciBlPU9wZW5MYXllcnMuUHJvamVjdGlvbi5hZGRUcmFuc2Zvcm0sZj1PcGVuTGF5ZXJzLlByb2plY3Rpb24ubnVsbFRyYW5zZm9ybSxnLHAsbixxLHM7Zz0wO2ZvcihwPWQubGVuZ3RoO2c8cDsrK2cpZm9yKG49ZFtnXSxlKGMsbixiKSxlKG4sYyxhKSxzPWcrMTtzPHA7KytzKXE9ZFtzXSxlKG4scSxmKSxlKHEsbixmKX12YXIgZD0yLjAwMzc1MDgzNEU3LGU9WyJFUFNHOjkwMDkxMyIsIkVQU0c6Mzg1NyIsCiJFUFNHOjEwMjExMyIsIkVQU0c6MTAyMTAwIl0sZj1bIkNSUzo4NCIsInVybjpvZ2M6ZGVmOmNyczpFUFNHOjYuNjo0MzI2IiwiRVBTRzo0MzI2Il0sZztmb3IoZz1lLmxlbmd0aC0xOzA8PWc7LS1nKWMoZVtnXSxmKTtmb3IoZz1mLmxlbmd0aC0xOzA8PWc7LS1nKWMoZltnXSxlKX0pKCk7T3BlbkxheWVycy5NYXA9T3BlbkxheWVycy5DbGFzcyh7Wl9JTkRFWF9CQVNFOntCYXNlTGF5ZXI6MTAwLE92ZXJsYXk6MzI1LEZlYXR1cmU6NzI1LFBvcHVwOjc1MCxDb250cm9sOjFFM30saWQ6bnVsbCxmcmFjdGlvbmFsWm9vbTohMSxldmVudHM6bnVsbCxhbGxPdmVybGF5czohMSxkaXY6bnVsbCxkcmFnZ2luZzohMSxzaXplOm51bGwsdmlld1BvcnREaXY6bnVsbCxsYXllckNvbnRhaW5lck9yaWdpbjpudWxsLGxheWVyQ29udGFpbmVyRGl2Om51bGwsbGF5ZXJzOm51bGwsY29udHJvbHM6bnVsbCxwb3B1cHM6bnVsbCxiYXNlTGF5ZXI6bnVsbCxjZW50ZXI6bnVsbCxyZXNvbHV0aW9uOm51bGwsem9vbTowLHBhblJhdGlvOjEuNSxvcHRpb25zOm51bGwsdGlsZVNpemU6bnVsbCxwcm9qZWN0aW9uOiJFUFNHOjQzMjYiLHVuaXRzOm51bGwscmVzb2x1dGlvbnM6bnVsbCxtYXhSZXNvbHV0aW9uOm51bGwsbWluUmVzb2x1dGlvbjpudWxsLG1heFNjYWxlOm51bGwsbWluU2NhbGU6bnVsbCwKbWF4RXh0ZW50Om51bGwsbWluRXh0ZW50Om51bGwscmVzdHJpY3RlZEV4dGVudDpudWxsLG51bVpvb21MZXZlbHM6MTYsdGhlbWU6bnVsbCxkaXNwbGF5UHJvamVjdGlvbjpudWxsLGZhbGxUaHJvdWdoOiExLGF1dG9VcGRhdGVTaXplOiEwLGV2ZW50TGlzdGVuZXJzOm51bGwscGFuVHdlZW46bnVsbCxwYW5NZXRob2Q6T3BlbkxheWVycy5FYXNpbmcuRXhwby5lYXNlT3V0LHBhbkR1cmF0aW9uOjUwLHpvb21Ud2VlbjpudWxsLHpvb21NZXRob2Q6T3BlbkxheWVycy5FYXNpbmcuUXVhZC5lYXNlT3V0LHpvb21EdXJhdGlvbjoyMCxwYWRkaW5nRm9yUG9wdXBzOm51bGwsbGF5ZXJDb250YWluZXJPcmlnaW5QeDpudWxsLG1pblB4Om51bGwsbWF4UHg6bnVsbCxpbml0aWFsaXplOmZ1bmN0aW9uKGEsYil7MT09PWFyZ3VtZW50cy5sZW5ndGgmJiJvYmplY3QiPT09dHlwZW9mIGEmJihhPShiPWEpJiZiLmRpdik7dGhpcy50aWxlU2l6ZT1uZXcgT3BlbkxheWVycy5TaXplKE9wZW5MYXllcnMuTWFwLlRJTEVfV0lEVEgsCk9wZW5MYXllcnMuTWFwLlRJTEVfSEVJR0hUKTt0aGlzLnBhZGRpbmdGb3JQb3B1cHM9bmV3IE9wZW5MYXllcnMuQm91bmRzKDE1LDE1LDE1LDE1KTt0aGlzLnRoZW1lPU9wZW5MYXllcnMuX2dldFNjcmlwdExvY2F0aW9uKCkrInRoZW1lL2RlZmF1bHQvc3R5bGUuY3NzIjt0aGlzLm9wdGlvbnM9T3BlbkxheWVycy5VdGlsLmV4dGVuZCh7fSxiKTtPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHRoaXMsYik7T3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHModGhpcyxPcGVuTGF5ZXJzLlByb2plY3Rpb24uZGVmYXVsdHNbdGhpcy5wcm9qZWN0aW9uIGluc3RhbmNlb2YgT3BlbkxheWVycy5Qcm9qZWN0aW9uP3RoaXMucHJvamVjdGlvbi5wcm9qQ29kZTp0aGlzLnByb2plY3Rpb25dKTshdGhpcy5tYXhFeHRlbnR8fHRoaXMubWF4RXh0ZW50IGluc3RhbmNlb2YgT3BlbkxheWVycy5Cb3VuZHN8fCh0aGlzLm1heEV4dGVudD1uZXcgT3BlbkxheWVycy5Cb3VuZHModGhpcy5tYXhFeHRlbnQpKTsKIXRoaXMubWluRXh0ZW50fHx0aGlzLm1pbkV4dGVudCBpbnN0YW5jZW9mIE9wZW5MYXllcnMuQm91bmRzfHwodGhpcy5taW5FeHRlbnQ9bmV3IE9wZW5MYXllcnMuQm91bmRzKHRoaXMubWluRXh0ZW50KSk7IXRoaXMucmVzdHJpY3RlZEV4dGVudHx8dGhpcy5yZXN0cmljdGVkRXh0ZW50IGluc3RhbmNlb2YgT3BlbkxheWVycy5Cb3VuZHN8fCh0aGlzLnJlc3RyaWN0ZWRFeHRlbnQ9bmV3IE9wZW5MYXllcnMuQm91bmRzKHRoaXMucmVzdHJpY3RlZEV4dGVudCkpOyF0aGlzLmNlbnRlcnx8dGhpcy5jZW50ZXIgaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLkxvbkxhdHx8KHRoaXMuY2VudGVyPW5ldyBPcGVuTGF5ZXJzLkxvbkxhdCh0aGlzLmNlbnRlcikpO3RoaXMubGF5ZXJzPVtdO3RoaXMuaWQ9T3BlbkxheWVycy5VdGlsLmNyZWF0ZVVuaXF1ZUlEKCJPcGVuTGF5ZXJzLk1hcF8iKTt0aGlzLmRpdj1PcGVuTGF5ZXJzLlV0aWwuZ2V0RWxlbWVudChhKTt0aGlzLmRpdnx8KHRoaXMuZGl2PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpLAp0aGlzLmRpdi5zdHlsZS5oZWlnaHQ9IjFweCIsdGhpcy5kaXYuc3R5bGUud2lkdGg9IjFweCIpO09wZW5MYXllcnMuRWxlbWVudC5hZGRDbGFzcyh0aGlzLmRpdiwib2xNYXAiKTt2YXIgYz10aGlzLmlkKyJfT3BlbkxheWVyc19WaWV3UG9ydCI7dGhpcy52aWV3UG9ydERpdj1PcGVuTGF5ZXJzLlV0aWwuY3JlYXRlRGl2KGMsbnVsbCxudWxsLG51bGwsInJlbGF0aXZlIixudWxsLCJoaWRkZW4iKTt0aGlzLnZpZXdQb3J0RGl2LnN0eWxlLndpZHRoPSIxMDAlIjt0aGlzLnZpZXdQb3J0RGl2LnN0eWxlLmhlaWdodD0iMTAwJSI7dGhpcy52aWV3UG9ydERpdi5jbGFzc05hbWU9Im9sTWFwVmlld3BvcnQiO3RoaXMuZGl2LmFwcGVuZENoaWxkKHRoaXMudmlld1BvcnREaXYpO3RoaXMuZXZlbnRzPW5ldyBPcGVuTGF5ZXJzLkV2ZW50cyh0aGlzLHRoaXMudmlld1BvcnREaXYsbnVsbCx0aGlzLmZhbGxUaHJvdWdoLHtpbmNsdWRlWFk6ITB9KTtPcGVuTGF5ZXJzLlRpbGVNYW5hZ2VyJiZudWxsIT09CnRoaXMudGlsZU1hbmFnZXImJih0aGlzLnRpbGVNYW5hZ2VyIGluc3RhbmNlb2YgT3BlbkxheWVycy5UaWxlTWFuYWdlcnx8KHRoaXMudGlsZU1hbmFnZXI9bmV3IE9wZW5MYXllcnMuVGlsZU1hbmFnZXIodGhpcy50aWxlTWFuYWdlcikpLHRoaXMudGlsZU1hbmFnZXIuYWRkTWFwKHRoaXMpKTtjPXRoaXMuaWQrIl9PcGVuTGF5ZXJzX0NvbnRhaW5lciI7dGhpcy5sYXllckNvbnRhaW5lckRpdj1PcGVuTGF5ZXJzLlV0aWwuY3JlYXRlRGl2KGMpO3RoaXMubGF5ZXJDb250YWluZXJEaXYuc3R5bGUuekluZGV4PXRoaXMuWl9JTkRFWF9CQVNFLlBvcHVwLTE7dGhpcy5sYXllckNvbnRhaW5lck9yaWdpblB4PXt4OjAseTowfTt0aGlzLmFwcGx5VHJhbnNmb3JtKCk7dGhpcy52aWV3UG9ydERpdi5hcHBlbmRDaGlsZCh0aGlzLmxheWVyQ29udGFpbmVyRGl2KTt0aGlzLnVwZGF0ZVNpemUoKTtpZih0aGlzLmV2ZW50TGlzdGVuZXJzIGluc3RhbmNlb2YgT2JqZWN0KXRoaXMuZXZlbnRzLm9uKHRoaXMuZXZlbnRMaXN0ZW5lcnMpOwohMD09PXRoaXMuYXV0b1VwZGF0ZVNpemUmJih0aGlzLnVwZGF0ZVNpemVEZXN0cm95PU9wZW5MYXllcnMuRnVuY3Rpb24uYmluZCh0aGlzLnVwZGF0ZVNpemUsdGhpcyksT3BlbkxheWVycy5FdmVudC5vYnNlcnZlKHdpbmRvdywicmVzaXplIix0aGlzLnVwZGF0ZVNpemVEZXN0cm95KSk7aWYodGhpcy50aGVtZSl7Zm9yKHZhciBjPSEwLGQ9ZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImxpbmsiKSxlPTAsZj1kLmxlbmd0aDtlPGY7KytlKWlmKE9wZW5MYXllcnMuVXRpbC5pc0VxdWl2YWxlbnRVcmwoZC5pdGVtKGUpLmhyZWYsdGhpcy50aGVtZSkpe2M9ITE7YnJlYWt9YyYmKGM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgibGluayIpLGMuc2V0QXR0cmlidXRlKCJyZWwiLCJzdHlsZXNoZWV0IiksYy5zZXRBdHRyaWJ1dGUoInR5cGUiLCJ0ZXh0L2NzcyIpLGMuc2V0QXR0cmlidXRlKCJocmVmIix0aGlzLnRoZW1lKSxkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgiaGVhZCIpWzBdLmFwcGVuZENoaWxkKGMpKX1udWxsPT0KdGhpcy5jb250cm9scyYmKHRoaXMuY29udHJvbHM9W10sbnVsbCE9T3BlbkxheWVycy5Db250cm9sJiYoT3BlbkxheWVycy5Db250cm9sLk5hdmlnYXRpb24/dGhpcy5jb250cm9scy5wdXNoKG5ldyBPcGVuTGF5ZXJzLkNvbnRyb2wuTmF2aWdhdGlvbik6T3BlbkxheWVycy5Db250cm9sLlRvdWNoTmF2aWdhdGlvbiYmdGhpcy5jb250cm9scy5wdXNoKG5ldyBPcGVuTGF5ZXJzLkNvbnRyb2wuVG91Y2hOYXZpZ2F0aW9uKSxPcGVuTGF5ZXJzLkNvbnRyb2wuWm9vbT90aGlzLmNvbnRyb2xzLnB1c2gobmV3IE9wZW5MYXllcnMuQ29udHJvbC5ab29tKTpPcGVuTGF5ZXJzLkNvbnRyb2wuUGFuWm9vbSYmdGhpcy5jb250cm9scy5wdXNoKG5ldyBPcGVuTGF5ZXJzLkNvbnRyb2wuUGFuWm9vbSksT3BlbkxheWVycy5Db250cm9sLkFyZ1BhcnNlciYmdGhpcy5jb250cm9scy5wdXNoKG5ldyBPcGVuTGF5ZXJzLkNvbnRyb2wuQXJnUGFyc2VyKSxPcGVuTGF5ZXJzLkNvbnRyb2wuQXR0cmlidXRpb24mJgp0aGlzLmNvbnRyb2xzLnB1c2gobmV3IE9wZW5MYXllcnMuQ29udHJvbC5BdHRyaWJ1dGlvbikpKTtlPTA7Zm9yKGY9dGhpcy5jb250cm9scy5sZW5ndGg7ZTxmO2UrKyl0aGlzLmFkZENvbnRyb2xUb01hcCh0aGlzLmNvbnRyb2xzW2VdKTt0aGlzLnBvcHVwcz1bXTt0aGlzLnVubG9hZERlc3Ryb3k9T3BlbkxheWVycy5GdW5jdGlvbi5iaW5kKHRoaXMuZGVzdHJveSx0aGlzKTtPcGVuTGF5ZXJzLkV2ZW50Lm9ic2VydmUod2luZG93LCJ1bmxvYWQiLHRoaXMudW5sb2FkRGVzdHJveSk7YiYmYi5sYXllcnMmJihkZWxldGUgdGhpcy5jZW50ZXIsZGVsZXRlIHRoaXMuem9vbSx0aGlzLmFkZExheWVycyhiLmxheWVycyksYi5jZW50ZXImJiF0aGlzLmdldENlbnRlcigpJiZ0aGlzLnNldENlbnRlcihiLmNlbnRlcixiLnpvb20pKTt0aGlzLnBhbk1ldGhvZCYmKHRoaXMucGFuVHdlZW49bmV3IE9wZW5MYXllcnMuVHdlZW4odGhpcy5wYW5NZXRob2QpKTt0aGlzLnpvb21NZXRob2QmJnRoaXMuYXBwbHlUcmFuc2Zvcm0udHJhbnNmb3JtJiYKKHRoaXMuem9vbVR3ZWVuPW5ldyBPcGVuTGF5ZXJzLlR3ZWVuKHRoaXMuem9vbU1ldGhvZCkpfSxnZXRWaWV3cG9ydDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnZpZXdQb3J0RGl2fSxyZW5kZXI6ZnVuY3Rpb24oYSl7dGhpcy5kaXY9T3BlbkxheWVycy5VdGlsLmdldEVsZW1lbnQoYSk7T3BlbkxheWVycy5FbGVtZW50LmFkZENsYXNzKHRoaXMuZGl2LCJvbE1hcCIpO3RoaXMudmlld1BvcnREaXYucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLnZpZXdQb3J0RGl2KTt0aGlzLmRpdi5hcHBlbmRDaGlsZCh0aGlzLnZpZXdQb3J0RGl2KTt0aGlzLnVwZGF0ZVNpemUoKX0sdW5sb2FkRGVzdHJveTpudWxsLHVwZGF0ZVNpemVEZXN0cm95Om51bGwsZGVzdHJveTpmdW5jdGlvbigpe2lmKCF0aGlzLnVubG9hZERlc3Ryb3kpcmV0dXJuITE7dGhpcy5wYW5Ud2VlbiYmKHRoaXMucGFuVHdlZW4uc3RvcCgpLHRoaXMucGFuVHdlZW49bnVsbCk7dGhpcy56b29tVHdlZW4mJih0aGlzLnpvb21Ud2Vlbi5zdG9wKCksCnRoaXMuem9vbVR3ZWVuPW51bGwpO09wZW5MYXllcnMuRXZlbnQuc3RvcE9ic2VydmluZyh3aW5kb3csInVubG9hZCIsdGhpcy51bmxvYWREZXN0cm95KTt0aGlzLnVubG9hZERlc3Ryb3k9bnVsbDt0aGlzLnVwZGF0ZVNpemVEZXN0cm95JiZPcGVuTGF5ZXJzLkV2ZW50LnN0b3BPYnNlcnZpbmcod2luZG93LCJyZXNpemUiLHRoaXMudXBkYXRlU2l6ZURlc3Ryb3kpO3RoaXMucGFkZGluZ0ZvclBvcHVwcz1udWxsO2lmKG51bGwhPXRoaXMuY29udHJvbHMpe2Zvcih2YXIgYT10aGlzLmNvbnRyb2xzLmxlbmd0aC0xOzA8PWE7LS1hKXRoaXMuY29udHJvbHNbYV0uZGVzdHJveSgpO3RoaXMuY29udHJvbHM9bnVsbH1pZihudWxsIT10aGlzLmxheWVycyl7Zm9yKGE9dGhpcy5sYXllcnMubGVuZ3RoLTE7MDw9YTstLWEpdGhpcy5sYXllcnNbYV0uZGVzdHJveSghMSk7dGhpcy5sYXllcnM9bnVsbH10aGlzLnZpZXdQb3J0RGl2JiZ0aGlzLnZpZXdQb3J0RGl2LnBhcmVudE5vZGUmJnRoaXMudmlld1BvcnREaXYucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLnZpZXdQb3J0RGl2KTsKdGhpcy52aWV3UG9ydERpdj1udWxsO3RoaXMudGlsZU1hbmFnZXImJih0aGlzLnRpbGVNYW5hZ2VyLnJlbW92ZU1hcCh0aGlzKSx0aGlzLnRpbGVNYW5hZ2VyPW51bGwpO3RoaXMuZXZlbnRMaXN0ZW5lcnMmJih0aGlzLmV2ZW50cy51bih0aGlzLmV2ZW50TGlzdGVuZXJzKSx0aGlzLmV2ZW50TGlzdGVuZXJzPW51bGwpO3RoaXMuZXZlbnRzLmRlc3Ryb3koKTt0aGlzLm9wdGlvbnM9dGhpcy5ldmVudHM9bnVsbH0sc2V0T3B0aW9uczpmdW5jdGlvbihhKXt2YXIgYj10aGlzLm1pblB4JiZhLnJlc3RyaWN0ZWRFeHRlbnQhPXRoaXMucmVzdHJpY3RlZEV4dGVudDtPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHRoaXMsYSk7YiYmdGhpcy5tb3ZlVG8odGhpcy5nZXRDYWNoZWRDZW50ZXIoKSx0aGlzLnpvb20se2ZvcmNlWm9vbUNoYW5nZTohMH0pfSxnZXRUaWxlU2l6ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnRpbGVTaXplfSxnZXRCeTpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9ImZ1bmN0aW9uIj09CnR5cGVvZiBjLnRlc3Q7cmV0dXJuIE9wZW5MYXllcnMuQXJyYXkuZmlsdGVyKHRoaXNbYV0sZnVuY3Rpb24oYSl7cmV0dXJuIGFbYl09PWN8fGQmJmMudGVzdChhW2JdKX0pfSxnZXRMYXllcnNCeTpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLmdldEJ5KCJsYXllcnMiLGEsYil9LGdldExheWVyc0J5TmFtZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5nZXRMYXllcnNCeSgibmFtZSIsYSl9LGdldExheWVyc0J5Q2xhc3M6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZ2V0TGF5ZXJzQnkoIkNMQVNTX05BTUUiLGEpfSxnZXRDb250cm9sc0J5OmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuZ2V0QnkoImNvbnRyb2xzIixhLGIpfSxnZXRDb250cm9sc0J5Q2xhc3M6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZ2V0Q29udHJvbHNCeSgiQ0xBU1NfTkFNRSIsYSl9LGdldExheWVyOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1udWxsLGM9MCxkPXRoaXMubGF5ZXJzLmxlbmd0aDtjPGQ7YysrKXt2YXIgZT0KdGhpcy5sYXllcnNbY107aWYoZS5pZD09YSl7Yj1lO2JyZWFrfX1yZXR1cm4gYn0sc2V0TGF5ZXJaSW5kZXg6ZnVuY3Rpb24oYSxiKXthLnNldFpJbmRleCh0aGlzLlpfSU5ERVhfQkFTRVthLmlzQmFzZUxheWVyPyJCYXNlTGF5ZXIiOiJPdmVybGF5Il0rNSpiKX0scmVzZXRMYXllcnNaSW5kZXg6ZnVuY3Rpb24oKXtmb3IodmFyIGE9MCxiPXRoaXMubGF5ZXJzLmxlbmd0aDthPGI7YSsrKXRoaXMuc2V0TGF5ZXJaSW5kZXgodGhpcy5sYXllcnNbYV0sYSl9LGFkZExheWVyOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0wLGM9dGhpcy5sYXllcnMubGVuZ3RoO2I8YztiKyspaWYodGhpcy5sYXllcnNbYl09PWEpcmV0dXJuITE7aWYoITE9PT10aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoInByZWFkZGxheWVyIix7bGF5ZXI6YX0pKXJldHVybiExO3RoaXMuYWxsT3ZlcmxheXMmJihhLmlzQmFzZUxheWVyPSExKTthLmRpdi5jbGFzc05hbWU9Im9sTGF5ZXJEaXYiO2EuZGl2LnN0eWxlLm92ZXJmbG93PQoiIjt0aGlzLnNldExheWVyWkluZGV4KGEsdGhpcy5sYXllcnMubGVuZ3RoKTthLmlzRml4ZWQ/dGhpcy52aWV3UG9ydERpdi5hcHBlbmRDaGlsZChhLmRpdik6dGhpcy5sYXllckNvbnRhaW5lckRpdi5hcHBlbmRDaGlsZChhLmRpdik7dGhpcy5sYXllcnMucHVzaChhKTthLnNldE1hcCh0aGlzKTthLmlzQmFzZUxheWVyfHx0aGlzLmFsbE92ZXJsYXlzJiYhdGhpcy5iYXNlTGF5ZXI/bnVsbD09dGhpcy5iYXNlTGF5ZXI/dGhpcy5zZXRCYXNlTGF5ZXIoYSk6YS5zZXRWaXNpYmlsaXR5KCExKTphLnJlZHJhdygpO3RoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgiYWRkbGF5ZXIiLHtsYXllcjphfSk7YS5ldmVudHMudHJpZ2dlckV2ZW50KCJhZGRlZCIse21hcDp0aGlzLGxheWVyOmF9KTthLmFmdGVyQWRkKCk7cmV0dXJuITB9LGFkZExheWVyczpmdW5jdGlvbihhKXtmb3IodmFyIGI9MCxjPWEubGVuZ3RoO2I8YztiKyspdGhpcy5hZGRMYXllcihhW2JdKX0scmVtb3ZlTGF5ZXI6ZnVuY3Rpb24oYSwKYil7aWYoITEhPT10aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoInByZXJlbW92ZWxheWVyIix7bGF5ZXI6YX0pKXtudWxsPT1iJiYoYj0hMCk7YS5pc0ZpeGVkP3RoaXMudmlld1BvcnREaXYucmVtb3ZlQ2hpbGQoYS5kaXYpOnRoaXMubGF5ZXJDb250YWluZXJEaXYucmVtb3ZlQ2hpbGQoYS5kaXYpO09wZW5MYXllcnMuVXRpbC5yZW1vdmVJdGVtKHRoaXMubGF5ZXJzLGEpO2EucmVtb3ZlTWFwKHRoaXMpO2EubWFwPW51bGw7aWYodGhpcy5iYXNlTGF5ZXI9PWEmJih0aGlzLmJhc2VMYXllcj1udWxsLGIpKWZvcih2YXIgYz0wLGQ9dGhpcy5sYXllcnMubGVuZ3RoO2M8ZDtjKyspe3ZhciBlPXRoaXMubGF5ZXJzW2NdO2lmKGUuaXNCYXNlTGF5ZXJ8fHRoaXMuYWxsT3ZlcmxheXMpe3RoaXMuc2V0QmFzZUxheWVyKGUpO2JyZWFrfX10aGlzLnJlc2V0TGF5ZXJzWkluZGV4KCk7dGhpcy5ldmVudHMudHJpZ2dlckV2ZW50KCJyZW1vdmVsYXllciIse2xheWVyOmF9KTthLmV2ZW50cy50cmlnZ2VyRXZlbnQoInJlbW92ZWQiLAp7bWFwOnRoaXMsbGF5ZXI6YX0pfX0sZ2V0TnVtTGF5ZXJzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubGF5ZXJzLmxlbmd0aH0sZ2V0TGF5ZXJJbmRleDpmdW5jdGlvbihhKXtyZXR1cm4gT3BlbkxheWVycy5VdGlsLmluZGV4T2YodGhpcy5sYXllcnMsYSl9LHNldExheWVySW5kZXg6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmdldExheWVySW5kZXgoYSk7MD5iP2I9MDpiPnRoaXMubGF5ZXJzLmxlbmd0aCYmKGI9dGhpcy5sYXllcnMubGVuZ3RoKTtpZihjIT1iKXt0aGlzLmxheWVycy5zcGxpY2UoYywxKTt0aGlzLmxheWVycy5zcGxpY2UoYiwwLGEpO2Zvcih2YXIgYz0wLGQ9dGhpcy5sYXllcnMubGVuZ3RoO2M8ZDtjKyspdGhpcy5zZXRMYXllclpJbmRleCh0aGlzLmxheWVyc1tjXSxjKTt0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoImNoYW5nZWxheWVyIix7bGF5ZXI6YSxwcm9wZXJ0eToib3JkZXIifSk7dGhpcy5hbGxPdmVybGF5cyYmKDA9PT1iP3RoaXMuc2V0QmFzZUxheWVyKGEpOgp0aGlzLmJhc2VMYXllciE9PXRoaXMubGF5ZXJzWzBdJiZ0aGlzLnNldEJhc2VMYXllcih0aGlzLmxheWVyc1swXSkpfX0scmFpc2VMYXllcjpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuZ2V0TGF5ZXJJbmRleChhKStiO3RoaXMuc2V0TGF5ZXJJbmRleChhLGMpfSxzZXRCYXNlTGF5ZXI6ZnVuY3Rpb24oYSl7aWYoYSE9dGhpcy5iYXNlTGF5ZXImJi0xIT1PcGVuTGF5ZXJzLlV0aWwuaW5kZXhPZih0aGlzLmxheWVycyxhKSl7dmFyIGI9dGhpcy5nZXRDYWNoZWRDZW50ZXIoKSxjPU9wZW5MYXllcnMuVXRpbC5nZXRSZXNvbHV0aW9uRnJvbVNjYWxlKHRoaXMuZ2V0U2NhbGUoKSxhLnVuaXRzKTtudWxsPT10aGlzLmJhc2VMYXllcnx8dGhpcy5hbGxPdmVybGF5c3x8dGhpcy5iYXNlTGF5ZXIuc2V0VmlzaWJpbGl0eSghMSk7dGhpcy5iYXNlTGF5ZXI9YTtpZighdGhpcy5hbGxPdmVybGF5c3x8dGhpcy5iYXNlTGF5ZXIudmlzaWJpbGl0eSl0aGlzLmJhc2VMYXllci5zZXRWaXNpYmlsaXR5KCEwKSwKITE9PT10aGlzLmJhc2VMYXllci5pblJhbmdlJiZ0aGlzLmJhc2VMYXllci5yZWRyYXcoKTtudWxsIT1iJiYoYT10aGlzLmdldFpvb21Gb3JSZXNvbHV0aW9uKGN8fHRoaXMucmVzb2x1dGlvbiwhMCksdGhpcy5zZXRDZW50ZXIoYixhLCExLCEwKSk7dGhpcy5ldmVudHMudHJpZ2dlckV2ZW50KCJjaGFuZ2ViYXNlbGF5ZXIiLHtsYXllcjp0aGlzLmJhc2VMYXllcn0pfX0sYWRkQ29udHJvbDpmdW5jdGlvbihhLGIpe3RoaXMuY29udHJvbHMucHVzaChhKTt0aGlzLmFkZENvbnRyb2xUb01hcChhLGIpfSxhZGRDb250cm9sczpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz0xPT09YXJndW1lbnRzLmxlbmd0aD9bXTpiLGQ9MCxlPWEubGVuZ3RoO2Q8ZTtkKyspdGhpcy5hZGRDb250cm9sKGFbZF0sY1tkXT9jW2RdOm51bGwpfSxhZGRDb250cm9sVG9NYXA6ZnVuY3Rpb24oYSxiKXthLm91dHNpZGVWaWV3cG9ydD1udWxsIT1hLmRpdjt0aGlzLmRpc3BsYXlQcm9qZWN0aW9uJiYhYS5kaXNwbGF5UHJvamVjdGlvbiYmCihhLmRpc3BsYXlQcm9qZWN0aW9uPXRoaXMuZGlzcGxheVByb2plY3Rpb24pO2Euc2V0TWFwKHRoaXMpO3ZhciBjPWEuZHJhdyhiKTtjJiYhYS5vdXRzaWRlVmlld3BvcnQmJihjLnN0eWxlLnpJbmRleD10aGlzLlpfSU5ERVhfQkFTRS5Db250cm9sK3RoaXMuY29udHJvbHMubGVuZ3RoLHRoaXMudmlld1BvcnREaXYuYXBwZW5kQ2hpbGQoYykpO2EuYXV0b0FjdGl2YXRlJiZhLmFjdGl2YXRlKCl9LGdldENvbnRyb2w6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPW51bGwsYz0wLGQ9dGhpcy5jb250cm9scy5sZW5ndGg7YzxkO2MrKyl7dmFyIGU9dGhpcy5jb250cm9sc1tjXTtpZihlLmlkPT1hKXtiPWU7YnJlYWt9fXJldHVybiBifSxyZW1vdmVDb250cm9sOmZ1bmN0aW9uKGEpe2EmJmE9PXRoaXMuZ2V0Q29udHJvbChhLmlkKSYmKGEuZGl2JiZhLmRpdi5wYXJlbnROb2RlPT10aGlzLnZpZXdQb3J0RGl2JiZ0aGlzLnZpZXdQb3J0RGl2LnJlbW92ZUNoaWxkKGEuZGl2KSxPcGVuTGF5ZXJzLlV0aWwucmVtb3ZlSXRlbSh0aGlzLmNvbnRyb2xzLAphKSl9LGFkZFBvcHVwOmZ1bmN0aW9uKGEsYil7aWYoYilmb3IodmFyIGM9dGhpcy5wb3B1cHMubGVuZ3RoLTE7MDw9YzstLWMpdGhpcy5yZW1vdmVQb3B1cCh0aGlzLnBvcHVwc1tjXSk7YS5tYXA9dGhpczt0aGlzLnBvcHVwcy5wdXNoKGEpO2lmKGM9YS5kcmF3KCkpYy5zdHlsZS56SW5kZXg9dGhpcy5aX0lOREVYX0JBU0UuUG9wdXArdGhpcy5wb3B1cHMubGVuZ3RoLHRoaXMubGF5ZXJDb250YWluZXJEaXYuYXBwZW5kQ2hpbGQoYyl9LHJlbW92ZVBvcHVwOmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuVXRpbC5yZW1vdmVJdGVtKHRoaXMucG9wdXBzLGEpO2lmKGEuZGl2KXRyeXt0aGlzLmxheWVyQ29udGFpbmVyRGl2LnJlbW92ZUNoaWxkKGEuZGl2KX1jYXRjaChiKXt9YS5tYXA9bnVsbH0sZ2V0U2l6ZTpmdW5jdGlvbigpe3ZhciBhPW51bGw7bnVsbCE9dGhpcy5zaXplJiYoYT10aGlzLnNpemUuY2xvbmUoKSk7cmV0dXJuIGF9LHVwZGF0ZVNpemU6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmdldEN1cnJlbnRTaXplKCk7CmlmKGEmJiFpc05hTihhLmgpJiYhaXNOYU4oYS53KSl7dGhpcy5ldmVudHMuY2xlYXJNb3VzZUNhY2hlKCk7dmFyIGI9dGhpcy5nZXRTaXplKCk7bnVsbD09YiYmKHRoaXMuc2l6ZT1iPWEpO2lmKCFhLmVxdWFscyhiKSl7dGhpcy5zaXplPWE7YT0wO2ZvcihiPXRoaXMubGF5ZXJzLmxlbmd0aDthPGI7YSsrKXRoaXMubGF5ZXJzW2FdLm9uTWFwUmVzaXplKCk7YT10aGlzLmdldENhY2hlZENlbnRlcigpO251bGwhPXRoaXMuYmFzZUxheWVyJiZudWxsIT1hJiYoYj10aGlzLmdldFpvb20oKSx0aGlzLnpvb209bnVsbCx0aGlzLnNldENlbnRlcihhLGIpKX19dGhpcy5ldmVudHMudHJpZ2dlckV2ZW50KCJ1cGRhdGVzaXplIil9LGdldEN1cnJlbnRTaXplOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IE9wZW5MYXllcnMuU2l6ZSh0aGlzLmRpdi5jbGllbnRXaWR0aCx0aGlzLmRpdi5jbGllbnRIZWlnaHQpO2lmKDA9PWEudyYmMD09YS5ofHxpc05hTihhLncpJiZpc05hTihhLmgpKWEudz10aGlzLmRpdi5vZmZzZXRXaWR0aCwKYS5oPXRoaXMuZGl2Lm9mZnNldEhlaWdodDtpZigwPT1hLncmJjA9PWEuaHx8aXNOYU4oYS53KSYmaXNOYU4oYS5oKSlhLnc9cGFyc2VJbnQodGhpcy5kaXYuc3R5bGUud2lkdGgpLGEuaD1wYXJzZUludCh0aGlzLmRpdi5zdHlsZS5oZWlnaHQpO3JldHVybiBhfSxjYWxjdWxhdGVCb3VuZHM6ZnVuY3Rpb24oYSxiKXt2YXIgYz1udWxsO251bGw9PWEmJihhPXRoaXMuZ2V0Q2FjaGVkQ2VudGVyKCkpO251bGw9PWImJihiPXRoaXMuZ2V0UmVzb2x1dGlvbigpKTtpZihudWxsIT1hJiZudWxsIT1iKXZhciBjPXRoaXMuc2l6ZS53KmIvMixkPXRoaXMuc2l6ZS5oKmIvMixjPW5ldyBPcGVuTGF5ZXJzLkJvdW5kcyhhLmxvbi1jLGEubGF0LWQsYS5sb24rYyxhLmxhdCtkKTtyZXR1cm4gY30sZ2V0Q2VudGVyOmZ1bmN0aW9uKCl7dmFyIGE9bnVsbCxiPXRoaXMuZ2V0Q2FjaGVkQ2VudGVyKCk7YiYmKGE9Yi5jbG9uZSgpKTtyZXR1cm4gYX0sZ2V0Q2FjaGVkQ2VudGVyOmZ1bmN0aW9uKCl7IXRoaXMuY2VudGVyJiYKdGhpcy5zaXplJiYodGhpcy5jZW50ZXI9dGhpcy5nZXRMb25MYXRGcm9tVmlld1BvcnRQeCh7eDp0aGlzLnNpemUudy8yLHk6dGhpcy5zaXplLmgvMn0pKTtyZXR1cm4gdGhpcy5jZW50ZXJ9LGdldFpvb206ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy56b29tfSxwYW46ZnVuY3Rpb24oYSxiLGMpe2M9T3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoYyx7YW5pbWF0ZTohMCxkcmFnZ2luZzohMX0pO2lmKGMuZHJhZ2dpbmcpMD09YSYmMD09Ynx8dGhpcy5tb3ZlQnlQeChhLGIpO2Vsc2V7dmFyIGQ9dGhpcy5nZXRWaWV3UG9ydFB4RnJvbUxvbkxhdCh0aGlzLmdldENhY2hlZENlbnRlcigpKTthPWQuYWRkKGEsYik7aWYodGhpcy5kcmFnZ2luZ3x8IWEuZXF1YWxzKGQpKWQ9dGhpcy5nZXRMb25MYXRGcm9tVmlld1BvcnRQeChhKSxjLmFuaW1hdGU/dGhpcy5wYW5UbyhkKToodGhpcy5tb3ZlVG8oZCksdGhpcy5kcmFnZ2luZyYmKHRoaXMuZHJhZ2dpbmc9ITEsdGhpcy5ldmVudHMudHJpZ2dlckV2ZW50KCJtb3ZlZW5kIikpKX19LApwYW5UbzpmdW5jdGlvbihhKXtpZih0aGlzLnBhblR3ZWVuJiZ0aGlzLmdldEV4dGVudCgpLnNjYWxlKHRoaXMucGFuUmF0aW8pLmNvbnRhaW5zTG9uTGF0KGEpKXt2YXIgYj10aGlzLmdldENhY2hlZENlbnRlcigpO2lmKCFhLmVxdWFscyhiKSl7dmFyIGI9dGhpcy5nZXRQaXhlbEZyb21Mb25MYXQoYiksYz10aGlzLmdldFBpeGVsRnJvbUxvbkxhdChhKSxkPTAsZT0wO3RoaXMucGFuVHdlZW4uc3RhcnQoe3g6MCx5OjB9LHt4OmMueC1iLngseTpjLnktYi55fSx0aGlzLnBhbkR1cmF0aW9uLHtjYWxsYmFja3M6e2VhY2hTdGVwOk9wZW5MYXllcnMuRnVuY3Rpb24uYmluZChmdW5jdGlvbihhKXt0aGlzLm1vdmVCeVB4KGEueC1kLGEueS1lKTtkPU1hdGgucm91bmQoYS54KTtlPU1hdGgucm91bmQoYS55KX0sdGhpcyksZG9uZTpPcGVuTGF5ZXJzLkZ1bmN0aW9uLmJpbmQoZnVuY3Rpb24oYil7dGhpcy5tb3ZlVG8oYSk7dGhpcy5kcmFnZ2luZz0hMTt0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoIm1vdmVlbmQiKX0sCnRoaXMpfX0pfX1lbHNlIHRoaXMuc2V0Q2VudGVyKGEpfSxzZXRDZW50ZXI6ZnVuY3Rpb24oYSxiLGMsZCl7dGhpcy5wYW5Ud2VlbiYmdGhpcy5wYW5Ud2Vlbi5zdG9wKCk7dGhpcy56b29tVHdlZW4mJnRoaXMuem9vbVR3ZWVuLnN0b3AoKTt0aGlzLm1vdmVUbyhhLGIse2RyYWdnaW5nOmMsZm9yY2Vab29tQ2hhbmdlOmR9KX0sbW92ZUJ5UHg6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLnNpemUudy8yLGQ9dGhpcy5zaXplLmgvMixlPWMrYSxmPWQrYixnPXRoaXMuYmFzZUxheWVyLndyYXBEYXRlTGluZSxoPTAsaz0wO3RoaXMucmVzdHJpY3RlZEV4dGVudCYmKGg9YyxrPWQsZz0hMSk7YT1nfHxlPD10aGlzLm1heFB4LngtaCYmZT49dGhpcy5taW5QeC54K2g/TWF0aC5yb3VuZChhKTowO2I9Zjw9dGhpcy5tYXhQeC55LWsmJmY+PXRoaXMubWluUHgueStrP01hdGgucm91bmQoYik6MDtpZihhfHxiKXt0aGlzLmRyYWdnaW5nfHwodGhpcy5kcmFnZ2luZz0hMCx0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoIm1vdmVzdGFydCIpKTsKdGhpcy5jZW50ZXI9bnVsbDthJiYodGhpcy5sYXllckNvbnRhaW5lck9yaWdpblB4LngtPWEsdGhpcy5taW5QeC54LT1hLHRoaXMubWF4UHgueC09YSk7YiYmKHRoaXMubGF5ZXJDb250YWluZXJPcmlnaW5QeC55LT1iLHRoaXMubWluUHgueS09Yix0aGlzLm1heFB4LnktPWIpO3RoaXMuYXBwbHlUcmFuc2Zvcm0oKTtkPTA7Zm9yKGU9dGhpcy5sYXllcnMubGVuZ3RoO2Q8ZTsrK2QpYz10aGlzLmxheWVyc1tkXSxjLnZpc2liaWxpdHkmJihjPT09dGhpcy5iYXNlTGF5ZXJ8fGMuaW5SYW5nZSkmJihjLm1vdmVCeVB4KGEsYiksYy5ldmVudHMudHJpZ2dlckV2ZW50KCJtb3ZlIikpO3RoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgibW92ZSIpfX0sYWRqdXN0Wm9vbTpmdW5jdGlvbihhKXtpZih0aGlzLmJhc2VMYXllciYmdGhpcy5iYXNlTGF5ZXIud3JhcERhdGVMaW5lKXt2YXIgYj10aGlzLmJhc2VMYXllci5yZXNvbHV0aW9ucyxjPXRoaXMuZ2V0TWF4RXh0ZW50KCkuZ2V0V2lkdGgoKS90aGlzLnNpemUudzsKaWYodGhpcy5nZXRSZXNvbHV0aW9uRm9yWm9vbShhKT5jKWlmKHRoaXMuZnJhY3Rpb25hbFpvb20pYT10aGlzLmdldFpvb21Gb3JSZXNvbHV0aW9uKGMpO2Vsc2UgZm9yKHZhciBkPWF8MCxlPWIubGVuZ3RoO2Q8ZTsrK2QpaWYoYltkXTw9Yyl7YT1kO2JyZWFrfX1yZXR1cm4gYX0sZ2V0TWluWm9vbTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmFkanVzdFpvb20oMCl9LG1vdmVUbzpmdW5jdGlvbihhLGIsYyl7bnVsbD09YXx8YSBpbnN0YW5jZW9mIE9wZW5MYXllcnMuTG9uTGF0fHwoYT1uZXcgT3BlbkxheWVycy5Mb25MYXQoYSkpO2N8fChjPXt9KTtudWxsIT1iJiYoYj1wYXJzZUZsb2F0KGIpLHRoaXMuZnJhY3Rpb25hbFpvb218fChiPU1hdGgucm91bmQoYikpKTt2YXIgZD1iO2I9dGhpcy5hZGp1c3Rab29tKGIpO2IhPT1kJiYoYT10aGlzLmdldENlbnRlcigpKTt2YXIgZD1jLmRyYWdnaW5nfHx0aGlzLmRyYWdnaW5nLGU9Yy5mb3JjZVpvb21DaGFuZ2U7dGhpcy5nZXRDYWNoZWRDZW50ZXIoKXx8CnRoaXMuaXNWYWxpZExvbkxhdChhKXx8KGE9dGhpcy5tYXhFeHRlbnQuZ2V0Q2VudGVyTG9uTGF0KCksdGhpcy5jZW50ZXI9YS5jbG9uZSgpKTtpZihudWxsIT10aGlzLnJlc3RyaWN0ZWRFeHRlbnQpe251bGw9PWEmJihhPXRoaXMuY2VudGVyKTtudWxsPT1iJiYoYj10aGlzLmdldFpvb20oKSk7dmFyIGY9dGhpcy5nZXRSZXNvbHV0aW9uRm9yWm9vbShiKSxmPXRoaXMuY2FsY3VsYXRlQm91bmRzKGEsZik7aWYoIXRoaXMucmVzdHJpY3RlZEV4dGVudC5jb250YWluc0JvdW5kcyhmKSl7dmFyIGc9dGhpcy5yZXN0cmljdGVkRXh0ZW50LmdldENlbnRlckxvbkxhdCgpO2YuZ2V0V2lkdGgoKT50aGlzLnJlc3RyaWN0ZWRFeHRlbnQuZ2V0V2lkdGgoKT9hPW5ldyBPcGVuTGF5ZXJzLkxvbkxhdChnLmxvbixhLmxhdCk6Zi5sZWZ0PHRoaXMucmVzdHJpY3RlZEV4dGVudC5sZWZ0P2E9YS5hZGQodGhpcy5yZXN0cmljdGVkRXh0ZW50LmxlZnQtZi5sZWZ0LDApOmYucmlnaHQ+dGhpcy5yZXN0cmljdGVkRXh0ZW50LnJpZ2h0JiYKKGE9YS5hZGQodGhpcy5yZXN0cmljdGVkRXh0ZW50LnJpZ2h0LWYucmlnaHQsMCkpO2YuZ2V0SGVpZ2h0KCk+dGhpcy5yZXN0cmljdGVkRXh0ZW50LmdldEhlaWdodCgpP2E9bmV3IE9wZW5MYXllcnMuTG9uTGF0KGEubG9uLGcubGF0KTpmLmJvdHRvbTx0aGlzLnJlc3RyaWN0ZWRFeHRlbnQuYm90dG9tP2E9YS5hZGQoMCx0aGlzLnJlc3RyaWN0ZWRFeHRlbnQuYm90dG9tLWYuYm90dG9tKTpmLnRvcD50aGlzLnJlc3RyaWN0ZWRFeHRlbnQudG9wJiYoYT1hLmFkZCgwLHRoaXMucmVzdHJpY3RlZEV4dGVudC50b3AtZi50b3ApKX19ZT1lfHx0aGlzLmlzVmFsaWRab29tTGV2ZWwoYikmJmIhPXRoaXMuZ2V0Wm9vbSgpO2Y9dGhpcy5pc1ZhbGlkTG9uTGF0KGEpJiYhYS5lcXVhbHModGhpcy5jZW50ZXIpO2lmKGV8fGZ8fGQpe2R8fHRoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgibW92ZXN0YXJ0Iix7em9vbUNoYW5nZWQ6ZX0pO2YmJighZSYmdGhpcy5jZW50ZXImJnRoaXMuY2VudGVyTGF5ZXJDb250YWluZXIoYSksCnRoaXMuY2VudGVyPWEuY2xvbmUoKSk7YT1lP3RoaXMuZ2V0UmVzb2x1dGlvbkZvclpvb20oYik6dGhpcy5nZXRSZXNvbHV0aW9uKCk7aWYoZXx8bnVsbD09dGhpcy5sYXllckNvbnRhaW5lck9yaWdpbil7dGhpcy5sYXllckNvbnRhaW5lck9yaWdpbj10aGlzLmdldENhY2hlZENlbnRlcigpO3RoaXMubGF5ZXJDb250YWluZXJPcmlnaW5QeC54PTA7dGhpcy5sYXllckNvbnRhaW5lck9yaWdpblB4Lnk9MDt0aGlzLmFwcGx5VHJhbnNmb3JtKCk7dmFyIGY9dGhpcy5nZXRNYXhFeHRlbnQoe3Jlc3RyaWN0ZWQ6ITB9KSxoPWYuZ2V0Q2VudGVyTG9uTGF0KCksZz10aGlzLmNlbnRlci5sb24taC5sb24saD1oLmxhdC10aGlzLmNlbnRlci5sYXQsaz1NYXRoLnJvdW5kKGYuZ2V0V2lkdGgoKS9hKSxsPU1hdGgucm91bmQoZi5nZXRIZWlnaHQoKS9hKTt0aGlzLm1pblB4PXt4Oih0aGlzLnNpemUudy1rKS8yLWcvYSx5Oih0aGlzLnNpemUuaC1sKS8yLWgvYX07dGhpcy5tYXhQeD17eDp0aGlzLm1pblB4LngrCk1hdGgucm91bmQoZi5nZXRXaWR0aCgpL2EpLHk6dGhpcy5taW5QeC55K01hdGgucm91bmQoZi5nZXRIZWlnaHQoKS9hKX19ZSYmKHRoaXMuem9vbT1iLHRoaXMucmVzb2x1dGlvbj1hKTthPXRoaXMuZ2V0RXh0ZW50KCk7dGhpcy5iYXNlTGF5ZXIudmlzaWJpbGl0eSYmKHRoaXMuYmFzZUxheWVyLm1vdmVUbyhhLGUsYy5kcmFnZ2luZyksYy5kcmFnZ2luZ3x8dGhpcy5iYXNlTGF5ZXIuZXZlbnRzLnRyaWdnZXJFdmVudCgibW92ZWVuZCIse3pvb21DaGFuZ2VkOmV9KSk7YT10aGlzLmJhc2VMYXllci5nZXRFeHRlbnQoKTtmb3IoYj10aGlzLmxheWVycy5sZW5ndGgtMTswPD1iOy0tYilmPXRoaXMubGF5ZXJzW2JdLGY9PT10aGlzLmJhc2VMYXllcnx8Zi5pc0Jhc2VMYXllcnx8KGc9Zi5jYWxjdWxhdGVJblJhbmdlKCksZi5pblJhbmdlIT1nJiYoKGYuaW5SYW5nZT1nKXx8Zi5kaXNwbGF5KCExKSx0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoImNoYW5nZWxheWVyIix7bGF5ZXI6Zixwcm9wZXJ0eToidmlzaWJpbGl0eSJ9KSksCmcmJmYudmlzaWJpbGl0eSYmKGYubW92ZVRvKGEsZSxjLmRyYWdnaW5nKSxjLmRyYWdnaW5nfHxmLmV2ZW50cy50cmlnZ2VyRXZlbnQoIm1vdmVlbmQiLHt6b29tQ2hhbmdlZDplfSkpKTt0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoIm1vdmUiKTtkfHx0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoIm1vdmVlbmQiKTtpZihlKXtiPTA7Zm9yKGM9dGhpcy5wb3B1cHMubGVuZ3RoO2I8YztiKyspdGhpcy5wb3B1cHNbYl0udXBkYXRlUG9zaXRpb24oKTt0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoInpvb21lbmQiKX19fSxjZW50ZXJMYXllckNvbnRhaW5lcjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmdldFZpZXdQb3J0UHhGcm9tTG9uTGF0KHRoaXMubGF5ZXJDb250YWluZXJPcmlnaW4pLGM9dGhpcy5nZXRWaWV3UG9ydFB4RnJvbUxvbkxhdChhKTtpZihudWxsIT1iJiZudWxsIT1jKXt2YXIgZD10aGlzLmxheWVyQ29udGFpbmVyT3JpZ2luUHgueDthPXRoaXMubGF5ZXJDb250YWluZXJPcmlnaW5QeC55Owp2YXIgZT1NYXRoLnJvdW5kKGIueC1jLngpLGI9TWF0aC5yb3VuZChiLnktYy55KTt0aGlzLmFwcGx5VHJhbnNmb3JtKHRoaXMubGF5ZXJDb250YWluZXJPcmlnaW5QeC54PWUsdGhpcy5sYXllckNvbnRhaW5lck9yaWdpblB4Lnk9Yik7ZC09ZTthLT1iO3RoaXMubWluUHgueC09ZDt0aGlzLm1heFB4LngtPWQ7dGhpcy5taW5QeC55LT1hO3RoaXMubWF4UHgueS09YX19LGlzVmFsaWRab29tTGV2ZWw6ZnVuY3Rpb24oYSl7cmV0dXJuIG51bGwhPWEmJjA8PWEmJmE8dGhpcy5nZXROdW1ab29tTGV2ZWxzKCl9LGlzVmFsaWRMb25MYXQ6ZnVuY3Rpb24oYSl7dmFyIGI9ITE7bnVsbCE9YSYmKGI9dGhpcy5nZXRNYXhFeHRlbnQoKSxiPWIuY29udGFpbnNMb25MYXQoYSx7d29ybGRCb3VuZHM6dGhpcy5iYXNlTGF5ZXIud3JhcERhdGVMaW5lJiZifSkpO3JldHVybiBifSxnZXRQcm9qZWN0aW9uOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5nZXRQcm9qZWN0aW9uT2JqZWN0KCk7cmV0dXJuIGE/YS5nZXRDb2RlKCk6Cm51bGx9LGdldFByb2plY3Rpb25PYmplY3Q6ZnVuY3Rpb24oKXt2YXIgYT1udWxsO251bGwhPXRoaXMuYmFzZUxheWVyJiYoYT10aGlzLmJhc2VMYXllci5wcm9qZWN0aW9uKTtyZXR1cm4gYX0sZ2V0TWF4UmVzb2x1dGlvbjpmdW5jdGlvbigpe3ZhciBhPW51bGw7bnVsbCE9dGhpcy5iYXNlTGF5ZXImJihhPXRoaXMuYmFzZUxheWVyLm1heFJlc29sdXRpb24pO3JldHVybiBhfSxnZXRNYXhFeHRlbnQ6ZnVuY3Rpb24oYSl7dmFyIGI9bnVsbDthJiZhLnJlc3RyaWN0ZWQmJnRoaXMucmVzdHJpY3RlZEV4dGVudD9iPXRoaXMucmVzdHJpY3RlZEV4dGVudDpudWxsIT10aGlzLmJhc2VMYXllciYmKGI9dGhpcy5iYXNlTGF5ZXIubWF4RXh0ZW50KTtyZXR1cm4gYn0sZ2V0TnVtWm9vbUxldmVsczpmdW5jdGlvbigpe3ZhciBhPW51bGw7bnVsbCE9dGhpcy5iYXNlTGF5ZXImJihhPXRoaXMuYmFzZUxheWVyLm51bVpvb21MZXZlbHMpO3JldHVybiBhfSxnZXRFeHRlbnQ6ZnVuY3Rpb24oKXt2YXIgYT0KbnVsbDtudWxsIT10aGlzLmJhc2VMYXllciYmKGE9dGhpcy5iYXNlTGF5ZXIuZ2V0RXh0ZW50KCkpO3JldHVybiBhfSxnZXRSZXNvbHV0aW9uOmZ1bmN0aW9uKCl7dmFyIGE9bnVsbDtudWxsIT10aGlzLmJhc2VMYXllcj9hPXRoaXMuYmFzZUxheWVyLmdldFJlc29sdXRpb24oKTohMD09PXRoaXMuYWxsT3ZlcmxheXMmJjA8dGhpcy5sYXllcnMubGVuZ3RoJiYoYT10aGlzLmxheWVyc1swXS5nZXRSZXNvbHV0aW9uKCkpO3JldHVybiBhfSxnZXRVbml0czpmdW5jdGlvbigpe3ZhciBhPW51bGw7bnVsbCE9dGhpcy5iYXNlTGF5ZXImJihhPXRoaXMuYmFzZUxheWVyLnVuaXRzKTtyZXR1cm4gYX0sZ2V0U2NhbGU6ZnVuY3Rpb24oKXt2YXIgYT1udWxsO251bGwhPXRoaXMuYmFzZUxheWVyJiYoYT10aGlzLmdldFJlc29sdXRpb24oKSxhPU9wZW5MYXllcnMuVXRpbC5nZXRTY2FsZUZyb21SZXNvbHV0aW9uKGEsdGhpcy5iYXNlTGF5ZXIudW5pdHMpKTtyZXR1cm4gYX0sZ2V0Wm9vbUZvckV4dGVudDpmdW5jdGlvbihhLApiKXt2YXIgYz1udWxsO251bGwhPXRoaXMuYmFzZUxheWVyJiYoYz10aGlzLmJhc2VMYXllci5nZXRab29tRm9yRXh0ZW50KGEsYikpO3JldHVybiBjfSxnZXRSZXNvbHV0aW9uRm9yWm9vbTpmdW5jdGlvbihhKXt2YXIgYj1udWxsO3RoaXMuYmFzZUxheWVyJiYoYj10aGlzLmJhc2VMYXllci5nZXRSZXNvbHV0aW9uRm9yWm9vbShhKSk7cmV0dXJuIGJ9LGdldFpvb21Gb3JSZXNvbHV0aW9uOmZ1bmN0aW9uKGEsYil7dmFyIGM9bnVsbDtudWxsIT10aGlzLmJhc2VMYXllciYmKGM9dGhpcy5iYXNlTGF5ZXIuZ2V0Wm9vbUZvclJlc29sdXRpb24oYSxiKSk7cmV0dXJuIGN9LHpvb21UbzpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXM7aWYoYy5pc1ZhbGlkWm9vbUxldmVsKGEpKWlmKGMuYmFzZUxheWVyLndyYXBEYXRlTGluZSYmKGE9Yy5hZGp1c3Rab29tKGEpKSxjLnpvb21Ud2Vlbil7dmFyIGQ9Yy5nZXRSZXNvbHV0aW9uKCksZT1jLmdldFJlc29sdXRpb25Gb3Jab29tKGEpLGY9e3NjYWxlOjF9LApkPXtzY2FsZTpkL2V9O2Muem9vbVR3ZWVuLnBsYXlpbmcmJmMuem9vbVR3ZWVuLmR1cmF0aW9uPDMqYy56b29tRHVyYXRpb24/Yy56b29tVHdlZW4uZmluaXNoPXtzY2FsZTpjLnpvb21Ud2Vlbi5maW5pc2guc2NhbGUqZC5zY2FsZX06KGJ8fChlPWMuZ2V0U2l6ZSgpLGI9e3g6ZS53LzIseTplLmgvMn0pLGMuem9vbVR3ZWVuLnN0YXJ0KGYsZCxjLnpvb21EdXJhdGlvbix7bWluRnJhbWVSYXRlOjUwLGNhbGxiYWNrczp7ZWFjaFN0ZXA6ZnVuY3Rpb24oYSl7dmFyIGQ9Yy5sYXllckNvbnRhaW5lck9yaWdpblB4O2E9YS5zY2FsZTtjLmFwcGx5VHJhbnNmb3JtKGQueCsoKGEtMSkqKGQueC1iLngpfDApLGQueSsoKGEtMSkqKGQueS1iLnkpfDApLGEpfSxkb25lOmZ1bmN0aW9uKGEpe2MuYXBwbHlUcmFuc2Zvcm0oKTthPWMuZ2V0UmVzb2x1dGlvbigpL2Euc2NhbGU7dmFyIGQ9Yy5nZXRab29tRm9yUmVzb2x1dGlvbihhLCEwKTtjLm1vdmVUbyhjLmdldFpvb21UYXJnZXRDZW50ZXIoYiwKYSksZCwhMCl9fX0pKX1lbHNlIGY9Yj9jLmdldFpvb21UYXJnZXRDZW50ZXIoYixjLmdldFJlc29sdXRpb25Gb3Jab29tKGEpKTpudWxsLGMuc2V0Q2VudGVyKGYsYSl9LHpvb21JbjpmdW5jdGlvbigpe3RoaXMuem9vbVRvKHRoaXMuZ2V0Wm9vbSgpKzEpfSx6b29tT3V0OmZ1bmN0aW9uKCl7dGhpcy56b29tVG8odGhpcy5nZXRab29tKCktMSl9LHpvb21Ub0V4dGVudDpmdW5jdGlvbihhLGIpe2EgaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLkJvdW5kc3x8KGE9bmV3IE9wZW5MYXllcnMuQm91bmRzKGEpKTt2YXIgYz1hLmdldENlbnRlckxvbkxhdCgpO2lmKHRoaXMuYmFzZUxheWVyLndyYXBEYXRlTGluZSl7Yz10aGlzLmdldE1heEV4dGVudCgpO2ZvcihhPWEuY2xvbmUoKTthLnJpZ2h0PGEubGVmdDspYS5yaWdodCs9Yy5nZXRXaWR0aCgpO2M9YS5nZXRDZW50ZXJMb25MYXQoKS53cmFwRGF0ZUxpbmUoYyl9dGhpcy5zZXRDZW50ZXIoYyx0aGlzLmdldFpvb21Gb3JFeHRlbnQoYSxiKSl9LAp6b29tVG9NYXhFeHRlbnQ6ZnVuY3Rpb24oYSl7YT10aGlzLmdldE1heEV4dGVudCh7cmVzdHJpY3RlZDphP2EucmVzdHJpY3RlZDohMH0pO3RoaXMuem9vbVRvRXh0ZW50KGEpfSx6b29tVG9TY2FsZTpmdW5jdGlvbihhLGIpe3ZhciBjPU9wZW5MYXllcnMuVXRpbC5nZXRSZXNvbHV0aW9uRnJvbVNjYWxlKGEsdGhpcy5iYXNlTGF5ZXIudW5pdHMpLGQ9dGhpcy5zaXplLncqYy8yLGM9dGhpcy5zaXplLmgqYy8yLGU9dGhpcy5nZXRDYWNoZWRDZW50ZXIoKSxkPW5ldyBPcGVuTGF5ZXJzLkJvdW5kcyhlLmxvbi1kLGUubGF0LWMsZS5sb24rZCxlLmxhdCtjKTt0aGlzLnpvb21Ub0V4dGVudChkLGIpfSxnZXRMb25MYXRGcm9tVmlld1BvcnRQeDpmdW5jdGlvbihhKXt2YXIgYj1udWxsO251bGwhPXRoaXMuYmFzZUxheWVyJiYoYj10aGlzLmJhc2VMYXllci5nZXRMb25MYXRGcm9tVmlld1BvcnRQeChhKSk7cmV0dXJuIGJ9LGdldFZpZXdQb3J0UHhGcm9tTG9uTGF0OmZ1bmN0aW9uKGEpe3ZhciBiPQpudWxsO251bGwhPXRoaXMuYmFzZUxheWVyJiYoYj10aGlzLmJhc2VMYXllci5nZXRWaWV3UG9ydFB4RnJvbUxvbkxhdChhKSk7cmV0dXJuIGJ9LGdldFpvb21UYXJnZXRDZW50ZXI6ZnVuY3Rpb24oYSxiKXt2YXIgYz1udWxsLGQ9dGhpcy5nZXRTaXplKCksZT1kLncvMi1hLngsZD1hLnktZC5oLzIsZj10aGlzLmdldExvbkxhdEZyb21QaXhlbChhKTtmJiYoYz1uZXcgT3BlbkxheWVycy5Mb25MYXQoZi5sb24rZSpiLGYubGF0K2QqYikpO3JldHVybiBjfSxnZXRMb25MYXRGcm9tUGl4ZWw6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZ2V0TG9uTGF0RnJvbVZpZXdQb3J0UHgoYSl9LGdldFBpeGVsRnJvbUxvbkxhdDpmdW5jdGlvbihhKXthPXRoaXMuZ2V0Vmlld1BvcnRQeEZyb21Mb25MYXQoYSk7YS54PU1hdGgucm91bmQoYS54KTthLnk9TWF0aC5yb3VuZChhLnkpO3JldHVybiBhfSxnZXRHZW9kZXNpY1BpeGVsU2l6ZTpmdW5jdGlvbihhKXt2YXIgYj1hP3RoaXMuZ2V0TG9uTGF0RnJvbVBpeGVsKGEpOgp0aGlzLmdldENhY2hlZENlbnRlcigpfHxuZXcgT3BlbkxheWVycy5Mb25MYXQoMCwwKSxjPXRoaXMuZ2V0UmVzb2x1dGlvbigpO2E9Yi5hZGQoLWMvMiwwKTt2YXIgZD1iLmFkZChjLzIsMCksZT1iLmFkZCgwLC1jLzIpLGI9Yi5hZGQoMCxjLzIpLGM9bmV3IE9wZW5MYXllcnMuUHJvamVjdGlvbigiRVBTRzo0MzI2IiksZj10aGlzLmdldFByb2plY3Rpb25PYmplY3QoKXx8YztmLmVxdWFscyhjKXx8KGEudHJhbnNmb3JtKGYsYyksZC50cmFuc2Zvcm0oZixjKSxlLnRyYW5zZm9ybShmLGMpLGIudHJhbnNmb3JtKGYsYykpO3JldHVybiBuZXcgT3BlbkxheWVycy5TaXplKE9wZW5MYXllcnMuVXRpbC5kaXN0VmluY2VudHkoYSxkKSxPcGVuTGF5ZXJzLlV0aWwuZGlzdFZpbmNlbnR5KGUsYikpfSxnZXRWaWV3UG9ydFB4RnJvbUxheWVyUHg6ZnVuY3Rpb24oYSl7dmFyIGI9bnVsbDtudWxsIT1hJiYoYj1hLmFkZCh0aGlzLmxheWVyQ29udGFpbmVyT3JpZ2luUHgueCx0aGlzLmxheWVyQ29udGFpbmVyT3JpZ2luUHgueSkpOwpyZXR1cm4gYn0sZ2V0TGF5ZXJQeEZyb21WaWV3UG9ydFB4OmZ1bmN0aW9uKGEpe3ZhciBiPW51bGw7bnVsbCE9YSYmKGI9YS5hZGQoLXRoaXMubGF5ZXJDb250YWluZXJPcmlnaW5QeC54LC10aGlzLmxheWVyQ29udGFpbmVyT3JpZ2luUHgueSksaXNOYU4oYi54KXx8aXNOYU4oYi55KSkmJihiPW51bGwpO3JldHVybiBifSxnZXRMb25MYXRGcm9tTGF5ZXJQeDpmdW5jdGlvbihhKXthPXRoaXMuZ2V0Vmlld1BvcnRQeEZyb21MYXllclB4KGEpO3JldHVybiB0aGlzLmdldExvbkxhdEZyb21WaWV3UG9ydFB4KGEpfSxnZXRMYXllclB4RnJvbUxvbkxhdDpmdW5jdGlvbihhKXthPXRoaXMuZ2V0UGl4ZWxGcm9tTG9uTGF0KGEpO3JldHVybiB0aGlzLmdldExheWVyUHhGcm9tVmlld1BvcnRQeChhKX0sYXBwbHlUcmFuc2Zvcm06ZnVuY3Rpb24oYSxiLGMpe2M9Y3x8MTt2YXIgZD10aGlzLmxheWVyQ29udGFpbmVyT3JpZ2luUHgsZT0xIT09YzthPWF8fGQueDtiPWJ8fGQueTt2YXIgZj10aGlzLmxheWVyQ29udGFpbmVyRGl2LnN0eWxlLApnPXRoaXMuYXBwbHlUcmFuc2Zvcm0udHJhbnNmb3JtLGg9dGhpcy5hcHBseVRyYW5zZm9ybS50ZW1wbGF0ZTtpZih2b2lkIDA9PT1nJiYoZz1PcGVuTGF5ZXJzLlV0aWwudmVuZG9yUHJlZml4LnN0eWxlKCJ0cmFuc2Zvcm0iKSx0aGlzLmFwcGx5VHJhbnNmb3JtLnRyYW5zZm9ybT1nKSl7dmFyIGs9T3BlbkxheWVycy5FbGVtZW50LmdldFN0eWxlKHRoaXMudmlld1BvcnREaXYsT3BlbkxheWVycy5VdGlsLnZlbmRvclByZWZpeC5jc3MoInRyYW5zZm9ybSIpKTtrJiYibm9uZSI9PT1rfHwoaD1bInRyYW5zbGF0ZTNkKCIsIiwwKSAiLCJzY2FsZTNkKCIsIiwxKSJdLGZbZ109W2hbMF0sIjAsMCIsaFsxXV0uam9pbigiIikpO2gmJn5mW2ddLmluZGV4T2YoaFswXSl8fChoPVsidHJhbnNsYXRlKCIsIikgIiwic2NhbGUoIiwiKSJdKTt0aGlzLmFwcGx5VHJhbnNmb3JtLnRlbXBsYXRlPWh9bnVsbD09PWd8fCJ0cmFuc2xhdGUzZCgiIT09aFswXSYmITAhPT1lPyhmLmxlZnQ9YSsicHgiLGYudG9wPQpiKyJweCIsbnVsbCE9PWcmJihmW2ddPSIiKSk6KCEwPT09ZSYmInRyYW5zbGF0ZSgiPT09aFswXSYmKGEtPWQueCxiLT1kLnksZi5sZWZ0PWQueCsicHgiLGYudG9wPWQueSsicHgiKSxmW2ddPVtoWzBdLGEsInB4LCIsYiwicHgiLGhbMV0saFsyXSxjLCIsIixjLGhbM11dLmpvaW4oIiIpKX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5NYXAifSk7T3BlbkxheWVycy5NYXAuVElMRV9XSURUSD0yNTY7T3BlbkxheWVycy5NYXAuVElMRV9IRUlHSFQ9MjU2O09wZW5MYXllcnMuTGF5ZXI9T3BlbkxheWVycy5DbGFzcyh7aWQ6bnVsbCxuYW1lOm51bGwsZGl2Om51bGwsb3BhY2l0eToxLGFsd2F5c0luUmFuZ2U6bnVsbCxSRVNPTFVUSU9OX1BST1BFUlRJRVM6InNjYWxlcyByZXNvbHV0aW9ucyBtYXhTY2FsZSBtaW5TY2FsZSBtYXhSZXNvbHV0aW9uIG1pblJlc29sdXRpb24gbnVtWm9vbUxldmVscyBtYXhab29tTGV2ZWwiLnNwbGl0KCIgIiksZXZlbnRzOm51bGwsbWFwOm51bGwsaXNCYXNlTGF5ZXI6ITEsYWxwaGE6ITEsZGlzcGxheUluTGF5ZXJTd2l0Y2hlcjohMCx2aXNpYmlsaXR5OiEwLGF0dHJpYnV0aW9uOm51bGwsaW5SYW5nZTohMSxpbWFnZVNpemU6bnVsbCxvcHRpb25zOm51bGwsZXZlbnRMaXN0ZW5lcnM6bnVsbCxndXR0ZXI6MCxwcm9qZWN0aW9uOm51bGwsdW5pdHM6bnVsbCxzY2FsZXM6bnVsbCxyZXNvbHV0aW9uczpudWxsLG1heEV4dGVudDpudWxsLG1pbkV4dGVudDpudWxsLG1heFJlc29sdXRpb246bnVsbCxtaW5SZXNvbHV0aW9uOm51bGwsCm51bVpvb21MZXZlbHM6bnVsbCxtaW5TY2FsZTpudWxsLG1heFNjYWxlOm51bGwsZGlzcGxheU91dHNpZGVNYXhFeHRlbnQ6ITEsd3JhcERhdGVMaW5lOiExLG1ldGFkYXRhOm51bGwsaW5pdGlhbGl6ZTpmdW5jdGlvbihhLGIpe3RoaXMubWV0YWRhdGE9e307Yj1PcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHt9LGIpO251bGwhPXRoaXMuYWx3YXlzSW5SYW5nZSYmKGIuYWx3YXlzSW5SYW5nZT10aGlzLmFsd2F5c0luUmFuZ2UpO3RoaXMuYWRkT3B0aW9ucyhiKTt0aGlzLm5hbWU9YTtpZihudWxsPT10aGlzLmlkJiYodGhpcy5pZD1PcGVuTGF5ZXJzLlV0aWwuY3JlYXRlVW5pcXVlSUQodGhpcy5DTEFTU19OQU1FKyJfIiksdGhpcy5kaXY9T3BlbkxheWVycy5VdGlsLmNyZWF0ZURpdih0aGlzLmlkKSx0aGlzLmRpdi5zdHlsZS53aWR0aD0iMTAwJSIsdGhpcy5kaXYuc3R5bGUuaGVpZ2h0PSIxMDAlIix0aGlzLmRpdi5kaXI9Imx0ciIsdGhpcy5ldmVudHM9bmV3IE9wZW5MYXllcnMuRXZlbnRzKHRoaXMsCnRoaXMuZGl2KSx0aGlzLmV2ZW50TGlzdGVuZXJzIGluc3RhbmNlb2YgT2JqZWN0KSl0aGlzLmV2ZW50cy5vbih0aGlzLmV2ZW50TGlzdGVuZXJzKX0sZGVzdHJveTpmdW5jdGlvbihhKXtudWxsPT1hJiYoYT0hMCk7bnVsbCE9dGhpcy5tYXAmJnRoaXMubWFwLnJlbW92ZUxheWVyKHRoaXMsYSk7dGhpcy5vcHRpb25zPXRoaXMuZGl2PXRoaXMubmFtZT10aGlzLm1hcD10aGlzLnByb2plY3Rpb249bnVsbDt0aGlzLmV2ZW50cyYmKHRoaXMuZXZlbnRMaXN0ZW5lcnMmJnRoaXMuZXZlbnRzLnVuKHRoaXMuZXZlbnRMaXN0ZW5lcnMpLHRoaXMuZXZlbnRzLmRlc3Ryb3koKSk7dGhpcy5ldmVudHM9dGhpcy5ldmVudExpc3RlbmVycz1udWxsfSxjbG9uZTpmdW5jdGlvbihhKXtudWxsPT1hJiYoYT1uZXcgT3BlbkxheWVycy5MYXllcih0aGlzLm5hbWUsdGhpcy5nZXRPcHRpb25zKCkpKTtPcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyhhLHRoaXMpO2EubWFwPW51bGw7cmV0dXJuIGF9LApnZXRPcHRpb25zOmZ1bmN0aW9uKCl7dmFyIGE9e30sYjtmb3IoYiBpbiB0aGlzLm9wdGlvbnMpYVtiXT10aGlzW2JdO3JldHVybiBhfSxzZXROYW1lOmZ1bmN0aW9uKGEpe2EhPXRoaXMubmFtZSYmKHRoaXMubmFtZT1hLG51bGwhPXRoaXMubWFwJiZ0aGlzLm1hcC5ldmVudHMudHJpZ2dlckV2ZW50KCJjaGFuZ2VsYXllciIse2xheWVyOnRoaXMscHJvcGVydHk6Im5hbWUifSkpfSxhZGRPcHRpb25zOmZ1bmN0aW9uKGEsYil7bnVsbD09dGhpcy5vcHRpb25zJiYodGhpcy5vcHRpb25zPXt9KTthJiYoInN0cmluZyI9PXR5cGVvZiBhLnByb2plY3Rpb24mJihhLnByb2plY3Rpb249bmV3IE9wZW5MYXllcnMuUHJvamVjdGlvbihhLnByb2plY3Rpb24pKSxhLnByb2plY3Rpb24mJk9wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKGEsT3BlbkxheWVycy5Qcm9qZWN0aW9uLmRlZmF1bHRzW2EucHJvamVjdGlvbi5nZXRDb2RlKCldKSwhYS5tYXhFeHRlbnR8fGEubWF4RXh0ZW50IGluc3RhbmNlb2YKT3BlbkxheWVycy5Cb3VuZHN8fChhLm1heEV4dGVudD1uZXcgT3BlbkxheWVycy5Cb3VuZHMoYS5tYXhFeHRlbnQpKSwhYS5taW5FeHRlbnR8fGEubWluRXh0ZW50IGluc3RhbmNlb2YgT3BlbkxheWVycy5Cb3VuZHN8fChhLm1pbkV4dGVudD1uZXcgT3BlbkxheWVycy5Cb3VuZHMoYS5taW5FeHRlbnQpKSk7T3BlbkxheWVycy5VdGlsLmV4dGVuZCh0aGlzLm9wdGlvbnMsYSk7T3BlbkxheWVycy5VdGlsLmV4dGVuZCh0aGlzLGEpO3RoaXMucHJvamVjdGlvbiYmdGhpcy5wcm9qZWN0aW9uLmdldFVuaXRzKCkmJih0aGlzLnVuaXRzPXRoaXMucHJvamVjdGlvbi5nZXRVbml0cygpKTtpZih0aGlzLm1hcCl7dmFyIGM9dGhpcy5tYXAuZ2V0UmVzb2x1dGlvbigpLGQ9dGhpcy5SRVNPTFVUSU9OX1BST1BFUlRJRVMuY29uY2F0KFsicHJvamVjdGlvbiIsInVuaXRzIiwibWluRXh0ZW50IiwibWF4RXh0ZW50Il0pLGU7Zm9yKGUgaW4gYSlpZihhLmhhc093blByb3BlcnR5KGUpJiYwPD1PcGVuTGF5ZXJzLlV0aWwuaW5kZXhPZihkLAplKSl7dGhpcy5pbml0UmVzb2x1dGlvbnMoKTtiJiZ0aGlzLm1hcC5iYXNlTGF5ZXI9PT10aGlzJiYodGhpcy5tYXAuc2V0Q2VudGVyKHRoaXMubWFwLmdldENlbnRlcigpLHRoaXMubWFwLmdldFpvb21Gb3JSZXNvbHV0aW9uKGMpLCExLCEwKSx0aGlzLm1hcC5ldmVudHMudHJpZ2dlckV2ZW50KCJjaGFuZ2ViYXNlbGF5ZXIiLHtsYXllcjp0aGlzfSkpO2JyZWFrfX19LG9uTWFwUmVzaXplOmZ1bmN0aW9uKCl7fSxyZWRyYXc6ZnVuY3Rpb24oKXt2YXIgYT0hMTtpZih0aGlzLm1hcCl7dGhpcy5pblJhbmdlPXRoaXMuY2FsY3VsYXRlSW5SYW5nZSgpO3ZhciBiPXRoaXMuZ2V0RXh0ZW50KCk7YiYmKHRoaXMuaW5SYW5nZSYmdGhpcy52aXNpYmlsaXR5KSYmKHRoaXMubW92ZVRvKGIsITAsITEpLHRoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgibW92ZWVuZCIse3pvb21DaGFuZ2VkOiEwfSksYT0hMCl9cmV0dXJuIGF9LG1vdmVUbzpmdW5jdGlvbihhLGIsYyl7YT10aGlzLnZpc2liaWxpdHk7CnRoaXMuaXNCYXNlTGF5ZXJ8fChhPWEmJnRoaXMuaW5SYW5nZSk7dGhpcy5kaXNwbGF5KGEpfSxtb3ZlQnlQeDpmdW5jdGlvbihhLGIpe30sc2V0TWFwOmZ1bmN0aW9uKGEpe251bGw9PXRoaXMubWFwJiYodGhpcy5tYXA9YSx0aGlzLm1heEV4dGVudD10aGlzLm1heEV4dGVudHx8dGhpcy5tYXAubWF4RXh0ZW50LHRoaXMubWluRXh0ZW50PXRoaXMubWluRXh0ZW50fHx0aGlzLm1hcC5taW5FeHRlbnQsdGhpcy5wcm9qZWN0aW9uPXRoaXMucHJvamVjdGlvbnx8dGhpcy5tYXAucHJvamVjdGlvbiwic3RyaW5nIj09dHlwZW9mIHRoaXMucHJvamVjdGlvbiYmKHRoaXMucHJvamVjdGlvbj1uZXcgT3BlbkxheWVycy5Qcm9qZWN0aW9uKHRoaXMucHJvamVjdGlvbikpLHRoaXMudW5pdHM9dGhpcy5wcm9qZWN0aW9uLmdldFVuaXRzKCl8fHRoaXMudW5pdHN8fHRoaXMubWFwLnVuaXRzLHRoaXMuaW5pdFJlc29sdXRpb25zKCksdGhpcy5pc0Jhc2VMYXllcnx8KHRoaXMuaW5SYW5nZT10aGlzLmNhbGN1bGF0ZUluUmFuZ2UoKSwKdGhpcy5kaXYuc3R5bGUuZGlzcGxheT10aGlzLnZpc2liaWxpdHkmJnRoaXMuaW5SYW5nZT8iIjoibm9uZSIpLHRoaXMuc2V0VGlsZVNpemUoKSl9LGFmdGVyQWRkOmZ1bmN0aW9uKCl7fSxyZW1vdmVNYXA6ZnVuY3Rpb24oYSl7fSxnZXRJbWFnZVNpemU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuaW1hZ2VTaXplfHx0aGlzLnRpbGVTaXplfSxzZXRUaWxlU2l6ZTpmdW5jdGlvbihhKXt0aGlzLnRpbGVTaXplPWE9YT9hOnRoaXMudGlsZVNpemU/dGhpcy50aWxlU2l6ZTp0aGlzLm1hcC5nZXRUaWxlU2l6ZSgpO3RoaXMuZ3V0dGVyJiYodGhpcy5pbWFnZVNpemU9bmV3IE9wZW5MYXllcnMuU2l6ZShhLncrMip0aGlzLmd1dHRlcixhLmgrMip0aGlzLmd1dHRlcikpfSxnZXRWaXNpYmlsaXR5OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudmlzaWJpbGl0eX0sc2V0VmlzaWJpbGl0eTpmdW5jdGlvbihhKXthIT10aGlzLnZpc2liaWxpdHkmJih0aGlzLnZpc2liaWxpdHk9YSx0aGlzLmRpc3BsYXkoYSksCnRoaXMucmVkcmF3KCksbnVsbCE9dGhpcy5tYXAmJnRoaXMubWFwLmV2ZW50cy50cmlnZ2VyRXZlbnQoImNoYW5nZWxheWVyIix7bGF5ZXI6dGhpcyxwcm9wZXJ0eToidmlzaWJpbGl0eSJ9KSx0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoInZpc2liaWxpdHljaGFuZ2VkIikpfSxkaXNwbGF5OmZ1bmN0aW9uKGEpe2EhPSgibm9uZSIhPXRoaXMuZGl2LnN0eWxlLmRpc3BsYXkpJiYodGhpcy5kaXYuc3R5bGUuZGlzcGxheT1hJiZ0aGlzLmNhbGN1bGF0ZUluUmFuZ2UoKT8iYmxvY2siOiJub25lIil9LGNhbGN1bGF0ZUluUmFuZ2U6ZnVuY3Rpb24oKXt2YXIgYT0hMTt0aGlzLmFsd2F5c0luUmFuZ2U/YT0hMDp0aGlzLm1hcCYmKGE9dGhpcy5tYXAuZ2V0UmVzb2x1dGlvbigpLGE9YT49dGhpcy5taW5SZXNvbHV0aW9uJiZhPD10aGlzLm1heFJlc29sdXRpb24pO3JldHVybiBhfSxzZXRJc0Jhc2VMYXllcjpmdW5jdGlvbihhKXthIT10aGlzLmlzQmFzZUxheWVyJiYodGhpcy5pc0Jhc2VMYXllcj0KYSxudWxsIT10aGlzLm1hcCYmdGhpcy5tYXAuZXZlbnRzLnRyaWdnZXJFdmVudCgiY2hhbmdlYmFzZWxheWVyIix7bGF5ZXI6dGhpc30pKX0saW5pdFJlc29sdXRpb25zOmZ1bmN0aW9uKCl7dmFyIGEsYixjLGQ9e30sZT0hMDthPTA7Zm9yKGI9dGhpcy5SRVNPTFVUSU9OX1BST1BFUlRJRVMubGVuZ3RoO2E8YjthKyspYz10aGlzLlJFU09MVVRJT05fUFJPUEVSVElFU1thXSxkW2NdPXRoaXMub3B0aW9uc1tjXSxlJiZ0aGlzLm9wdGlvbnNbY10mJihlPSExKTtudWxsPT10aGlzLm9wdGlvbnMuYWx3YXlzSW5SYW5nZSYmKHRoaXMuYWx3YXlzSW5SYW5nZT1lKTtudWxsPT1kLnJlc29sdXRpb25zJiYoZC5yZXNvbHV0aW9ucz10aGlzLnJlc29sdXRpb25zRnJvbVNjYWxlcyhkLnNjYWxlcykpO251bGw9PWQucmVzb2x1dGlvbnMmJihkLnJlc29sdXRpb25zPXRoaXMuY2FsY3VsYXRlUmVzb2x1dGlvbnMoZCkpO2lmKG51bGw9PWQucmVzb2x1dGlvbnMpe2E9MDtmb3IoYj10aGlzLlJFU09MVVRJT05fUFJPUEVSVElFUy5sZW5ndGg7YTwKYjthKyspYz10aGlzLlJFU09MVVRJT05fUFJPUEVSVElFU1thXSxkW2NdPW51bGwhPXRoaXMub3B0aW9uc1tjXT90aGlzLm9wdGlvbnNbY106dGhpcy5tYXBbY107bnVsbD09ZC5yZXNvbHV0aW9ucyYmKGQucmVzb2x1dGlvbnM9dGhpcy5yZXNvbHV0aW9uc0Zyb21TY2FsZXMoZC5zY2FsZXMpKTtudWxsPT1kLnJlc29sdXRpb25zJiYoZC5yZXNvbHV0aW9ucz10aGlzLmNhbGN1bGF0ZVJlc29sdXRpb25zKGQpKX12YXIgZjt0aGlzLm9wdGlvbnMubWF4UmVzb2x1dGlvbiYmImF1dG8iIT09dGhpcy5vcHRpb25zLm1heFJlc29sdXRpb24mJihmPXRoaXMub3B0aW9ucy5tYXhSZXNvbHV0aW9uKTt0aGlzLm9wdGlvbnMubWluU2NhbGUmJihmPU9wZW5MYXllcnMuVXRpbC5nZXRSZXNvbHV0aW9uRnJvbVNjYWxlKHRoaXMub3B0aW9ucy5taW5TY2FsZSx0aGlzLnVuaXRzKSk7dmFyIGc7dGhpcy5vcHRpb25zLm1pblJlc29sdXRpb24mJiJhdXRvIiE9PXRoaXMub3B0aW9ucy5taW5SZXNvbHV0aW9uJiYKKGc9dGhpcy5vcHRpb25zLm1pblJlc29sdXRpb24pO3RoaXMub3B0aW9ucy5tYXhTY2FsZSYmKGc9T3BlbkxheWVycy5VdGlsLmdldFJlc29sdXRpb25Gcm9tU2NhbGUodGhpcy5vcHRpb25zLm1heFNjYWxlLHRoaXMudW5pdHMpKTtkLnJlc29sdXRpb25zJiYoZC5yZXNvbHV0aW9ucy5zb3J0KGZ1bmN0aW9uKGEsYil7cmV0dXJuIGItYX0pLGZ8fChmPWQucmVzb2x1dGlvbnNbMF0pLGd8fChnPWQucmVzb2x1dGlvbnNbZC5yZXNvbHV0aW9ucy5sZW5ndGgtMV0pKTtpZih0aGlzLnJlc29sdXRpb25zPWQucmVzb2x1dGlvbnMpe2I9dGhpcy5yZXNvbHV0aW9ucy5sZW5ndGg7dGhpcy5zY2FsZXM9QXJyYXkoYik7Zm9yKGE9MDthPGI7YSsrKXRoaXMuc2NhbGVzW2FdPU9wZW5MYXllcnMuVXRpbC5nZXRTY2FsZUZyb21SZXNvbHV0aW9uKHRoaXMucmVzb2x1dGlvbnNbYV0sdGhpcy51bml0cyk7dGhpcy5udW1ab29tTGV2ZWxzPWJ9aWYodGhpcy5taW5SZXNvbHV0aW9uPWcpdGhpcy5tYXhTY2FsZT0KT3BlbkxheWVycy5VdGlsLmdldFNjYWxlRnJvbVJlc29sdXRpb24oZyx0aGlzLnVuaXRzKTtpZih0aGlzLm1heFJlc29sdXRpb249Zil0aGlzLm1pblNjYWxlPU9wZW5MYXllcnMuVXRpbC5nZXRTY2FsZUZyb21SZXNvbHV0aW9uKGYsdGhpcy51bml0cyl9LHJlc29sdXRpb25zRnJvbVNjYWxlczpmdW5jdGlvbihhKXtpZihudWxsIT1hKXt2YXIgYixjLGQ7ZD1hLmxlbmd0aDtiPUFycmF5KGQpO2ZvcihjPTA7YzxkO2MrKyliW2NdPU9wZW5MYXllcnMuVXRpbC5nZXRSZXNvbHV0aW9uRnJvbVNjYWxlKGFbY10sdGhpcy51bml0cyk7cmV0dXJuIGJ9fSxjYWxjdWxhdGVSZXNvbHV0aW9uczpmdW5jdGlvbihhKXt2YXIgYixjLGQ9YS5tYXhSZXNvbHV0aW9uO251bGwhPWEubWluU2NhbGU/ZD1PcGVuTGF5ZXJzLlV0aWwuZ2V0UmVzb2x1dGlvbkZyb21TY2FsZShhLm1pblNjYWxlLHRoaXMudW5pdHMpOiJhdXRvIj09ZCYmbnVsbCE9dGhpcy5tYXhFeHRlbnQmJihiPXRoaXMubWFwLmdldFNpemUoKSwKYz10aGlzLm1heEV4dGVudC5nZXRXaWR0aCgpL2IudyxiPXRoaXMubWF4RXh0ZW50LmdldEhlaWdodCgpL2IuaCxkPU1hdGgubWF4KGMsYikpO2M9YS5taW5SZXNvbHV0aW9uO251bGwhPWEubWF4U2NhbGU/Yz1PcGVuTGF5ZXJzLlV0aWwuZ2V0UmVzb2x1dGlvbkZyb21TY2FsZShhLm1heFNjYWxlLHRoaXMudW5pdHMpOiJhdXRvIj09YS5taW5SZXNvbHV0aW9uJiZudWxsIT10aGlzLm1pbkV4dGVudCYmKGI9dGhpcy5tYXAuZ2V0U2l6ZSgpLGM9dGhpcy5taW5FeHRlbnQuZ2V0V2lkdGgoKS9iLncsYj10aGlzLm1pbkV4dGVudC5nZXRIZWlnaHQoKS9iLmgsYz1NYXRoLm1heChjLGIpKTsibnVtYmVyIiE9PXR5cGVvZiBkJiYoIm51bWJlciIhPT10eXBlb2YgYyYmbnVsbCE9dGhpcy5tYXhFeHRlbnQpJiYoZD10aGlzLm1hcC5nZXRUaWxlU2l6ZSgpLGQ9TWF0aC5tYXgodGhpcy5tYXhFeHRlbnQuZ2V0V2lkdGgoKS9kLncsdGhpcy5tYXhFeHRlbnQuZ2V0SGVpZ2h0KCkvZC5oKSk7Yj1hLm1heFpvb21MZXZlbDsKYT1hLm51bVpvb21MZXZlbHM7Im51bWJlciI9PT10eXBlb2YgYyYmIm51bWJlciI9PT10eXBlb2YgZCYmdm9pZCAwPT09YT9hPU1hdGguZmxvb3IoTWF0aC5sb2coZC9jKS9NYXRoLmxvZygyKSkrMTp2b2lkIDA9PT1hJiZudWxsIT1iJiYoYT1iKzEpO2lmKCEoIm51bWJlciIhPT10eXBlb2YgYXx8MD49YXx8Im51bWJlciIhPT10eXBlb2YgZCYmIm51bWJlciIhPT10eXBlb2YgYykpe2I9QXJyYXkoYSk7dmFyIGU9MjsibnVtYmVyIj09dHlwZW9mIGMmJiJudW1iZXIiPT10eXBlb2YgZCYmKGU9TWF0aC5wb3coZC9jLDEvKGEtMSkpKTt2YXIgZjtpZigibnVtYmVyIj09PXR5cGVvZiBkKWZvcihmPTA7ZjxhO2YrKyliW2ZdPWQvTWF0aC5wb3coZSxmKTtlbHNlIGZvcihmPTA7ZjxhO2YrKyliW2EtMS1mXT1jKk1hdGgucG93KGUsZik7cmV0dXJuIGJ9fSxnZXRSZXNvbHV0aW9uOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5tYXAuZ2V0Wm9vbSgpO3JldHVybiB0aGlzLmdldFJlc29sdXRpb25Gb3Jab29tKGEpfSwKZ2V0RXh0ZW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWFwLmNhbGN1bGF0ZUJvdW5kcygpfSxnZXRab29tRm9yRXh0ZW50OmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5tYXAuZ2V0U2l6ZSgpLGM9TWF0aC5tYXgoYS5nZXRXaWR0aCgpL2MudyxhLmdldEhlaWdodCgpL2MuaCk7cmV0dXJuIHRoaXMuZ2V0Wm9vbUZvclJlc29sdXRpb24oYyxiKX0sZ2V0RGF0YUV4dGVudDpmdW5jdGlvbigpe30sZ2V0UmVzb2x1dGlvbkZvclpvb206ZnVuY3Rpb24oYSl7YT1NYXRoLm1heCgwLE1hdGgubWluKGEsdGhpcy5yZXNvbHV0aW9ucy5sZW5ndGgtMSkpO2lmKHRoaXMubWFwLmZyYWN0aW9uYWxab29tKXt2YXIgYj1NYXRoLmZsb29yKGEpLGM9TWF0aC5jZWlsKGEpO2E9dGhpcy5yZXNvbHV0aW9uc1tiXS0oYS1iKSoodGhpcy5yZXNvbHV0aW9uc1tiXS10aGlzLnJlc29sdXRpb25zW2NdKX1lbHNlIGE9dGhpcy5yZXNvbHV0aW9uc1tNYXRoLnJvdW5kKGEpXTtyZXR1cm4gYX0sZ2V0Wm9vbUZvclJlc29sdXRpb246ZnVuY3Rpb24oYSwKYil7dmFyIGMsZDtpZih0aGlzLm1hcC5mcmFjdGlvbmFsWm9vbSl7dmFyIGU9MCxmPXRoaXMucmVzb2x1dGlvbnNbZV0sZz10aGlzLnJlc29sdXRpb25zW3RoaXMucmVzb2x1dGlvbnMubGVuZ3RoLTFdLGg7Yz0wO2ZvcihkPXRoaXMucmVzb2x1dGlvbnMubGVuZ3RoO2M8ZDsrK2MpaWYoaD10aGlzLnJlc29sdXRpb25zW2NdLGg+PWEmJihmPWgsZT1jKSxoPD1hKXtnPWg7YnJlYWt9Yz1mLWc7Yz0wPGM/ZSsoZi1hKS9jOmV9ZWxzZXtmPU51bWJlci5QT1NJVElWRV9JTkZJTklUWTtjPTA7Zm9yKGQ9dGhpcy5yZXNvbHV0aW9ucy5sZW5ndGg7YzxkO2MrKylpZihiKXtlPU1hdGguYWJzKHRoaXMucmVzb2x1dGlvbnNbY10tYSk7aWYoZT5mKWJyZWFrO2Y9ZX1lbHNlIGlmKHRoaXMucmVzb2x1dGlvbnNbY108YSlicmVhaztjPU1hdGgubWF4KDAsYy0xKX1yZXR1cm4gY30sZ2V0TG9uTGF0RnJvbVZpZXdQb3J0UHg6ZnVuY3Rpb24oYSl7dmFyIGI9bnVsbCxjPXRoaXMubWFwO2lmKG51bGwhPQphJiZjLm1pblB4KXt2YXIgYj1jLmdldFJlc29sdXRpb24oKSxkPWMuZ2V0TWF4RXh0ZW50KHtyZXN0cmljdGVkOiEwfSksYj1uZXcgT3BlbkxheWVycy5Mb25MYXQoKGEueC1jLm1pblB4LngpKmIrZC5sZWZ0LChjLm1pblB4LnktYS55KSpiK2QudG9wKTt0aGlzLndyYXBEYXRlTGluZSYmKGI9Yi53cmFwRGF0ZUxpbmUodGhpcy5tYXhFeHRlbnQpKX1yZXR1cm4gYn0sZ2V0Vmlld1BvcnRQeEZyb21Mb25MYXQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz1udWxsO251bGwhPWEmJihiPWJ8fHRoaXMubWFwLmdldFJlc29sdXRpb24oKSxjPXRoaXMubWFwLmNhbGN1bGF0ZUJvdW5kcyhudWxsLGIpLGM9bmV3IE9wZW5MYXllcnMuUGl4ZWwoMS9iKihhLmxvbi1jLmxlZnQpLDEvYiooYy50b3AtYS5sYXQpKSk7cmV0dXJuIGN9LHNldE9wYWNpdHk6ZnVuY3Rpb24oYSl7aWYoYSE9dGhpcy5vcGFjaXR5KXt0aGlzLm9wYWNpdHk9YTtmb3IodmFyIGI9dGhpcy5kaXYuY2hpbGROb2RlcyxjPTAsZD1iLmxlbmd0aDtjPApkOysrYyl7dmFyIGU9YltjXS5maXJzdENoaWxkfHxiW2NdLGY9YltjXS5sYXN0Q2hpbGQ7ZiYmImlmcmFtZSI9PT1mLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkmJihlPWYucGFyZW50Tm9kZSk7T3BlbkxheWVycy5VdGlsLm1vZGlmeURPTUVsZW1lbnQoZSxudWxsLG51bGwsbnVsbCxudWxsLG51bGwsbnVsbCxhKX1udWxsIT10aGlzLm1hcCYmdGhpcy5tYXAuZXZlbnRzLnRyaWdnZXJFdmVudCgiY2hhbmdlbGF5ZXIiLHtsYXllcjp0aGlzLHByb3BlcnR5OiJvcGFjaXR5In0pfX0sZ2V0WkluZGV4OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGl2LnN0eWxlLnpJbmRleH0sc2V0WkluZGV4OmZ1bmN0aW9uKGEpe3RoaXMuZGl2LnN0eWxlLnpJbmRleD1hfSxhZGp1c3RCb3VuZHM6ZnVuY3Rpb24oYSl7aWYodGhpcy5ndXR0ZXIpe3ZhciBiPXRoaXMuZ3V0dGVyKnRoaXMubWFwLmdldFJlc29sdXRpb24oKTthPW5ldyBPcGVuTGF5ZXJzLkJvdW5kcyhhLmxlZnQtYixhLmJvdHRvbS1iLGEucmlnaHQrCmIsYS50b3ArYil9dGhpcy53cmFwRGF0ZUxpbmUmJihiPXtyaWdodFRvbGVyYW5jZTp0aGlzLmdldFJlc29sdXRpb24oKSxsZWZ0VG9sZXJhbmNlOnRoaXMuZ2V0UmVzb2x1dGlvbigpfSxhPWEud3JhcERhdGVMaW5lKHRoaXMubWF4RXh0ZW50LGIpKTtyZXR1cm4gYX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5MYXllciJ9KTtPcGVuTGF5ZXJzLkxheWVyLlNwaGVyaWNhbE1lcmNhdG9yPXtnZXRFeHRlbnQ6ZnVuY3Rpb24oKXt2YXIgYT1udWxsO3JldHVybiBhPXRoaXMuc3BoZXJpY2FsTWVyY2F0b3I/dGhpcy5tYXAuY2FsY3VsYXRlQm91bmRzKCk6T3BlbkxheWVycy5MYXllci5GaXhlZFpvb21MZXZlbHMucHJvdG90eXBlLmdldEV4dGVudC5hcHBseSh0aGlzKX0sZ2V0TG9uTGF0RnJvbVZpZXdQb3J0UHg6ZnVuY3Rpb24oYSl7cmV0dXJuIE9wZW5MYXllcnMuTGF5ZXIucHJvdG90eXBlLmdldExvbkxhdEZyb21WaWV3UG9ydFB4LmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sZ2V0Vmlld1BvcnRQeEZyb21Mb25MYXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIE9wZW5MYXllcnMuTGF5ZXIucHJvdG90eXBlLmdldFZpZXdQb3J0UHhGcm9tTG9uTGF0LmFwcGx5KHRoaXMsYXJndW1lbnRzKX0saW5pdE1lcmNhdG9yUGFyYW1ldGVyczpmdW5jdGlvbigpe3RoaXMuUkVTT0xVVElPTlM9W107Zm9yKHZhciBhPTA7YTw9dGhpcy5NQVhfWk9PTV9MRVZFTDsrK2EpdGhpcy5SRVNPTFVUSU9OU1thXT0KMTU2NTQzLjAzMzkwNjI1L01hdGgucG93KDIsYSk7dGhpcy51bml0cz0ibSI7dGhpcy5wcm9qZWN0aW9uPXRoaXMucHJvamVjdGlvbnx8IkVQU0c6OTAwOTEzIn0sZm9yd2FyZE1lcmNhdG9yOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IE9wZW5MYXllcnMuUHJvamVjdGlvbigiRVBTRzo0MzI2IiksYj1uZXcgT3BlbkxheWVycy5Qcm9qZWN0aW9uKCJFUFNHOjkwMDkxMyIpO3JldHVybiBmdW5jdGlvbihjLGQpe3ZhciBlPU9wZW5MYXllcnMuUHJvamVjdGlvbi50cmFuc2Zvcm0oe3g6Yyx5OmR9LGEsYik7cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLkxvbkxhdChlLngsZS55KX19KCksaW52ZXJzZU1lcmNhdG9yOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IE9wZW5MYXllcnMuUHJvamVjdGlvbigiRVBTRzo0MzI2IiksYj1uZXcgT3BlbkxheWVycy5Qcm9qZWN0aW9uKCJFUFNHOjkwMDkxMyIpO3JldHVybiBmdW5jdGlvbihjLGQpe3ZhciBlPU9wZW5MYXllcnMuUHJvamVjdGlvbi50cmFuc2Zvcm0oe3g6YywKeTpkfSxiLGEpO3JldHVybiBuZXcgT3BlbkxheWVycy5Mb25MYXQoZS54LGUueSl9fSgpfTtPcGVuTGF5ZXJzLkxheWVyLkV2ZW50UGFuZT1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuTGF5ZXIse3Ntb290aERyYWdQYW46ITAsaXNCYXNlTGF5ZXI6ITAsaXNGaXhlZDohMCxwYW5lOm51bGwsbWFwT2JqZWN0Om51bGwsaW5pdGlhbGl6ZTpmdW5jdGlvbihhLGIpe09wZW5MYXllcnMuTGF5ZXIucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxhcmd1bWVudHMpO251bGw9PXRoaXMucGFuZSYmKHRoaXMucGFuZT1PcGVuTGF5ZXJzLlV0aWwuY3JlYXRlRGl2KHRoaXMuZGl2LmlkKyJfRXZlbnRQYW5lIikpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5wYW5lPXRoaXMubWFwT2JqZWN0PW51bGw7T3BlbkxheWVycy5MYXllci5wcm90b3R5cGUuZGVzdHJveS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LHNldE1hcDpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLkxheWVyLnByb3RvdHlwZS5zZXRNYXAuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMucGFuZS5zdHlsZS56SW5kZXg9CnBhcnNlSW50KHRoaXMuZGl2LnN0eWxlLnpJbmRleCkrMTt0aGlzLnBhbmUuc3R5bGUuZGlzcGxheT10aGlzLmRpdi5zdHlsZS5kaXNwbGF5O3RoaXMucGFuZS5zdHlsZS53aWR0aD0iMTAwJSI7dGhpcy5wYW5lLnN0eWxlLmhlaWdodD0iMTAwJSI7Im1zaWUiPT1PcGVuTGF5ZXJzLkJST1dTRVJfTkFNRSYmKHRoaXMucGFuZS5zdHlsZS5iYWNrZ3JvdW5kPSJ1cmwoIitPcGVuTGF5ZXJzLlV0aWwuZ2V0SW1hZ2VMb2NhdGlvbigiYmxhbmsuZ2lmIikrIikiKTt0aGlzLmlzRml4ZWQ/dGhpcy5tYXAudmlld1BvcnREaXYuYXBwZW5kQ2hpbGQodGhpcy5wYW5lKTp0aGlzLm1hcC5sYXllckNvbnRhaW5lckRpdi5hcHBlbmRDaGlsZCh0aGlzLnBhbmUpO3RoaXMubG9hZE1hcE9iamVjdCgpO251bGw9PXRoaXMubWFwT2JqZWN0JiZ0aGlzLmxvYWRXYXJuaW5nTWVzc2FnZSgpfSxyZW1vdmVNYXA6ZnVuY3Rpb24oYSl7dGhpcy5wYW5lJiZ0aGlzLnBhbmUucGFyZW50Tm9kZSYmdGhpcy5wYW5lLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5wYW5lKTsKT3BlbkxheWVycy5MYXllci5wcm90b3R5cGUucmVtb3ZlTWFwLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sbG9hZFdhcm5pbmdNZXNzYWdlOmZ1bmN0aW9uKCl7dGhpcy5kaXYuc3R5bGUuYmFja2dyb3VuZENvbG9yPSJkYXJrYmx1ZSI7dmFyIGE9dGhpcy5tYXAuZ2V0U2l6ZSgpLGI9TWF0aC5taW4oYS53LDMwMCksYz1NYXRoLm1pbihhLmgsMjAwKSxiPW5ldyBPcGVuTGF5ZXJzLlNpemUoYixjKSxhPShuZXcgT3BlbkxheWVycy5QaXhlbChhLncvMixhLmgvMikpLmFkZCgtYi53LzIsLWIuaC8yKSxhPU9wZW5MYXllcnMuVXRpbC5jcmVhdGVEaXYodGhpcy5uYW1lKyJfd2FybmluZyIsYSxiLG51bGwsbnVsbCxudWxsLCJhdXRvIik7YS5zdHlsZS5wYWRkaW5nPSI3cHgiO2Euc3R5bGUuYmFja2dyb3VuZENvbG9yPSJ5ZWxsb3ciO2EuaW5uZXJIVE1MPXRoaXMuZ2V0V2FybmluZ0hUTUwoKTt0aGlzLmRpdi5hcHBlbmRDaGlsZChhKX0sZ2V0V2FybmluZ0hUTUw6ZnVuY3Rpb24oKXtyZXR1cm4iIn0sCmRpc3BsYXk6ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5MYXllci5wcm90b3R5cGUuZGlzcGxheS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5wYW5lLnN0eWxlLmRpc3BsYXk9dGhpcy5kaXYuc3R5bGUuZGlzcGxheX0sc2V0WkluZGV4OmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuTGF5ZXIucHJvdG90eXBlLnNldFpJbmRleC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5wYW5lLnN0eWxlLnpJbmRleD1wYXJzZUludCh0aGlzLmRpdi5zdHlsZS56SW5kZXgpKzF9LG1vdmVCeVB4OmZ1bmN0aW9uKGEsYil7T3BlbkxheWVycy5MYXllci5wcm90b3R5cGUubW92ZUJ5UHguYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMuZHJhZ1Bhbk1hcE9iamVjdD90aGlzLmRyYWdQYW5NYXBPYmplY3QoYSwtYik6dGhpcy5tb3ZlVG8odGhpcy5tYXAuZ2V0Q2FjaGVkQ2VudGVyKCkpfSxtb3ZlVG86ZnVuY3Rpb24oYSxiLGMpe09wZW5MYXllcnMuTGF5ZXIucHJvdG90eXBlLm1vdmVUby5hcHBseSh0aGlzLAphcmd1bWVudHMpO2lmKG51bGwhPXRoaXMubWFwT2JqZWN0KXt2YXIgZD10aGlzLm1hcC5nZXRDZW50ZXIoKSxlPXRoaXMubWFwLmdldFpvb20oKTtpZihudWxsIT1kKXt2YXIgZj10aGlzLmdldE1hcE9iamVjdENlbnRlcigpLGY9dGhpcy5nZXRPTExvbkxhdEZyb21NYXBPYmplY3RMb25MYXQoZiksZz10aGlzLmdldE1hcE9iamVjdFpvb20oKSxnPXRoaXMuZ2V0T0xab29tRnJvbU1hcE9iamVjdFpvb20oZyk7ZC5lcXVhbHMoZikmJmU9PWd8fCghYiYmZiYmdGhpcy5kcmFnUGFuTWFwT2JqZWN0JiZ0aGlzLnNtb290aERyYWdQYW4/KGU9dGhpcy5tYXAuZ2V0Vmlld1BvcnRQeEZyb21Mb25MYXQoZiksZD10aGlzLm1hcC5nZXRWaWV3UG9ydFB4RnJvbUxvbkxhdChkKSx0aGlzLmRyYWdQYW5NYXBPYmplY3QoZC54LWUueCxlLnktZC55KSk6KGQ9dGhpcy5nZXRNYXBPYmplY3RMb25MYXRGcm9tT0xMb25MYXQoZCksZT10aGlzLmdldE1hcE9iamVjdFpvb21Gcm9tT0xab29tKGUpLHRoaXMuc2V0TWFwT2JqZWN0Q2VudGVyKGQsCmUsYykpKX19fSxnZXRMb25MYXRGcm9tVmlld1BvcnRQeDpmdW5jdGlvbihhKXt2YXIgYj1udWxsO251bGwhPXRoaXMubWFwT2JqZWN0JiZudWxsIT10aGlzLmdldE1hcE9iamVjdENlbnRlcigpJiYoYT10aGlzLmdldE1hcE9iamVjdFBpeGVsRnJvbU9MUGl4ZWwoYSksYT10aGlzLmdldE1hcE9iamVjdExvbkxhdEZyb21NYXBPYmplY3RQaXhlbChhKSxiPXRoaXMuZ2V0T0xMb25MYXRGcm9tTWFwT2JqZWN0TG9uTGF0KGEpKTtyZXR1cm4gYn0sZ2V0Vmlld1BvcnRQeEZyb21Mb25MYXQ6ZnVuY3Rpb24oYSl7dmFyIGI9bnVsbDtudWxsIT10aGlzLm1hcE9iamVjdCYmbnVsbCE9dGhpcy5nZXRNYXBPYmplY3RDZW50ZXIoKSYmKGE9dGhpcy5nZXRNYXBPYmplY3RMb25MYXRGcm9tT0xMb25MYXQoYSksYT10aGlzLmdldE1hcE9iamVjdFBpeGVsRnJvbU1hcE9iamVjdExvbkxhdChhKSxiPXRoaXMuZ2V0T0xQaXhlbEZyb21NYXBPYmplY3RQaXhlbChhKSk7cmV0dXJuIGJ9LGdldE9MTG9uTGF0RnJvbU1hcE9iamVjdExvbkxhdDpmdW5jdGlvbihhKXt2YXIgYj0KbnVsbDtudWxsIT1hJiYoYj10aGlzLmdldExvbmdpdHVkZUZyb21NYXBPYmplY3RMb25MYXQoYSksYT10aGlzLmdldExhdGl0dWRlRnJvbU1hcE9iamVjdExvbkxhdChhKSxiPW5ldyBPcGVuTGF5ZXJzLkxvbkxhdChiLGEpKTtyZXR1cm4gYn0sZ2V0TWFwT2JqZWN0TG9uTGF0RnJvbU9MTG9uTGF0OmZ1bmN0aW9uKGEpe3ZhciBiPW51bGw7bnVsbCE9YSYmKGI9dGhpcy5nZXRNYXBPYmplY3RMb25MYXRGcm9tTG9uTGF0KGEubG9uLGEubGF0KSk7cmV0dXJuIGJ9LGdldE9MUGl4ZWxGcm9tTWFwT2JqZWN0UGl4ZWw6ZnVuY3Rpb24oYSl7dmFyIGI9bnVsbDtudWxsIT1hJiYoYj10aGlzLmdldFhGcm9tTWFwT2JqZWN0UGl4ZWwoYSksYT10aGlzLmdldFlGcm9tTWFwT2JqZWN0UGl4ZWwoYSksYj1uZXcgT3BlbkxheWVycy5QaXhlbChiLGEpKTtyZXR1cm4gYn0sZ2V0TWFwT2JqZWN0UGl4ZWxGcm9tT0xQaXhlbDpmdW5jdGlvbihhKXt2YXIgYj1udWxsO251bGwhPWEmJihiPXRoaXMuZ2V0TWFwT2JqZWN0UGl4ZWxGcm9tWFkoYS54LAphLnkpKTtyZXR1cm4gYn0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5MYXllci5FdmVudFBhbmUifSk7T3BlbkxheWVycy5MYXllci5GaXhlZFpvb21MZXZlbHM9T3BlbkxheWVycy5DbGFzcyh7aW5pdGlhbGl6ZTpmdW5jdGlvbigpe30saW5pdFJlc29sdXRpb25zOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPVsibWluWm9vbUxldmVsIiwibWF4Wm9vbUxldmVsIiwibnVtWm9vbUxldmVscyJdLGI9MCxjPWEubGVuZ3RoO2I8YztiKyspe3ZhciBkPWFbYl07dGhpc1tkXT1udWxsIT10aGlzLm9wdGlvbnNbZF0/dGhpcy5vcHRpb25zW2RdOnRoaXMubWFwW2RdfWlmKG51bGw9PXRoaXMubWluWm9vbUxldmVsfHx0aGlzLm1pblpvb21MZXZlbDx0aGlzLk1JTl9aT09NX0xFVkVMKXRoaXMubWluWm9vbUxldmVsPXRoaXMuTUlOX1pPT01fTEVWRUw7YT10aGlzLk1BWF9aT09NX0xFVkVMLXRoaXMubWluWm9vbUxldmVsKzE7Yj1udWxsPT10aGlzLm9wdGlvbnMubnVtWm9vbUxldmVscyYmbnVsbCE9dGhpcy5vcHRpb25zLm1heFpvb21MZXZlbHx8bnVsbD09dGhpcy5udW1ab29tTGV2ZWxzJiZudWxsIT10aGlzLm1heFpvb21MZXZlbD8KdGhpcy5tYXhab29tTGV2ZWwtdGhpcy5taW5ab29tTGV2ZWwrMTp0aGlzLm51bVpvb21MZXZlbHM7dGhpcy5udW1ab29tTGV2ZWxzPW51bGwhPWI/TWF0aC5taW4oYixhKTphO3RoaXMubWF4Wm9vbUxldmVsPXRoaXMubWluWm9vbUxldmVsK3RoaXMubnVtWm9vbUxldmVscy0xO2lmKG51bGwhPXRoaXMuUkVTT0xVVElPTlMpe2E9MDt0aGlzLnJlc29sdXRpb25zPVtdO2ZvcihiPXRoaXMubWluWm9vbUxldmVsO2I8PXRoaXMubWF4Wm9vbUxldmVsO2IrKyl0aGlzLnJlc29sdXRpb25zW2ErK109dGhpcy5SRVNPTFVUSU9OU1tiXTt0aGlzLm1heFJlc29sdXRpb249dGhpcy5yZXNvbHV0aW9uc1swXTt0aGlzLm1pblJlc29sdXRpb249dGhpcy5yZXNvbHV0aW9uc1t0aGlzLnJlc29sdXRpb25zLmxlbmd0aC0xXX19LGdldFJlc29sdXRpb246ZnVuY3Rpb24oKXtpZihudWxsIT10aGlzLnJlc29sdXRpb25zKXJldHVybiBPcGVuTGF5ZXJzLkxheWVyLnByb3RvdHlwZS5nZXRSZXNvbHV0aW9uLmFwcGx5KHRoaXMsCmFyZ3VtZW50cyk7dmFyIGE9bnVsbCxiPXRoaXMubWFwLmdldFNpemUoKSxjPXRoaXMuZ2V0RXh0ZW50KCk7bnVsbCE9YiYmbnVsbCE9YyYmKGE9TWF0aC5tYXgoYy5nZXRXaWR0aCgpL2IudyxjLmdldEhlaWdodCgpL2IuaCkpO3JldHVybiBhfSxnZXRFeHRlbnQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm1hcC5nZXRTaXplKCksYj10aGlzLmdldExvbkxhdEZyb21WaWV3UG9ydFB4KHt4OjAseTowfSksYT10aGlzLmdldExvbkxhdEZyb21WaWV3UG9ydFB4KHt4OmEudyx5OmEuaH0pO3JldHVybiBudWxsIT1iJiZudWxsIT1hP25ldyBPcGVuTGF5ZXJzLkJvdW5kcyhiLmxvbixhLmxhdCxhLmxvbixiLmxhdCk6bnVsbH0sZ2V0Wm9vbUZvclJlc29sdXRpb246ZnVuY3Rpb24oYSl7aWYobnVsbCE9dGhpcy5yZXNvbHV0aW9ucylyZXR1cm4gT3BlbkxheWVycy5MYXllci5wcm90b3R5cGUuZ2V0Wm9vbUZvclJlc29sdXRpb24uYXBwbHkodGhpcyxhcmd1bWVudHMpO3ZhciBiPU9wZW5MYXllcnMuTGF5ZXIucHJvdG90eXBlLmdldEV4dGVudC5hcHBseSh0aGlzLApbXSk7cmV0dXJuIHRoaXMuZ2V0Wm9vbUZvckV4dGVudChiKX0sZ2V0T0xab29tRnJvbU1hcE9iamVjdFpvb206ZnVuY3Rpb24oYSl7dmFyIGI9bnVsbDtudWxsIT1hJiYoYj1hLXRoaXMubWluWm9vbUxldmVsLHRoaXMubWFwLmJhc2VMYXllciE9PXRoaXMmJihiPXRoaXMubWFwLmJhc2VMYXllci5nZXRab29tRm9yUmVzb2x1dGlvbih0aGlzLmdldFJlc29sdXRpb25Gb3Jab29tKGIpKSkpO3JldHVybiBifSxnZXRNYXBPYmplY3Rab29tRnJvbU9MWm9vbTpmdW5jdGlvbihhKXt2YXIgYj1udWxsO251bGwhPWEmJihiPWErdGhpcy5taW5ab29tTGV2ZWwsdGhpcy5tYXAuYmFzZUxheWVyIT09dGhpcyYmKGI9dGhpcy5nZXRab29tRm9yUmVzb2x1dGlvbih0aGlzLm1hcC5iYXNlTGF5ZXIuZ2V0UmVzb2x1dGlvbkZvclpvb20oYikpKSk7cmV0dXJuIGJ9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuTGF5ZXIuRml4ZWRab29tTGV2ZWxzIn0pO09wZW5MYXllcnMuTGF5ZXIuR29vZ2xlPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5MYXllci5FdmVudFBhbmUsT3BlbkxheWVycy5MYXllci5GaXhlZFpvb21MZXZlbHMse01JTl9aT09NX0xFVkVMOjAsTUFYX1pPT01fTEVWRUw6MjEsUkVTT0xVVElPTlM6WzEuNDA2MjUsMC43MDMxMjUsMC4zNTE1NjI1LDAuMTc1NzgxMjUsMC4wODc4OTA2MjUsMC4wNDM5NDUzMTI1LDAuMDIxOTcyNjU2MjUsMC4wMTA5ODYzMjgxMjUsMC4wMDU0OTMxNjQwNjI1LDAuMDAyNzQ2NTgyMDMxMjUsMC4wMDEzNzMyOTEwMTU2MjUsNi44NjY0NTUwNzgxMjVFLTQsMy40MzMyMjc1MzkwNjI1RS00LDEuNzE2NjEzNzY5NTMxMjVFLTQsOC41ODMwNjg4NDc2NTYyNUUtNSw0LjI5MTUzNDQyMzgyODEyNUUtNSwyLjE0NTc2NzIxMTkxNDA2MkUtNSwxLjA3Mjg4MzYwNTk1NzAzMUUtNSw1LjM2NDQxODAyOTc4NTE1RS02LDIuNjgyMjA5MDE0ODkyNTdFLTYsMS4zNDExMDQ1MDc0NDYyODlFLTYsNi43MDU1MjI1MzcyMzE0NDVFLTddLAp0eXBlOm51bGwsd3JhcERhdGVMaW5lOiEwLHNwaGVyaWNhbE1lcmNhdG9yOiExLHZlcnNpb246bnVsbCxpbml0aWFsaXplOmZ1bmN0aW9uKGEsYil7Yj1ifHx7fTtiLnZlcnNpb258fChiLnZlcnNpb249ImZ1bmN0aW9uIj09PXR5cGVvZiBHTWFwMj8iMiI6IjMiKTt2YXIgYz1PcGVuTGF5ZXJzLkxheWVyLkdvb2dsZVsidiIrYi52ZXJzaW9uLnJlcGxhY2UoL1wuL2csIl8iKV07aWYoYylPcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyhiLGMpO2Vsc2UgdGhyb3ciVW5zdXBwb3J0ZWQgR29vZ2xlIE1hcHMgQVBJIHZlcnNpb246ICIrYi52ZXJzaW9uO09wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKGIsYy5ERUZBVUxUUyk7Yi5tYXhFeHRlbnQmJihiLm1heEV4dGVudD1iLm1heEV4dGVudC5jbG9uZSgpKTtPcGVuTGF5ZXJzLkxheWVyLkV2ZW50UGFuZS5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLFthLGJdKTtPcGVuTGF5ZXJzLkxheWVyLkZpeGVkWm9vbUxldmVscy5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLApbYSxiXSk7dGhpcy5zcGhlcmljYWxNZXJjYXRvciYmKE9wZW5MYXllcnMuVXRpbC5leHRlbmQodGhpcyxPcGVuTGF5ZXJzLkxheWVyLlNwaGVyaWNhbE1lcmNhdG9yKSx0aGlzLmluaXRNZXJjYXRvclBhcmFtZXRlcnMoKSl9LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLkxheWVyLkdvb2dsZSh0aGlzLm5hbWUsdGhpcy5nZXRPcHRpb25zKCkpfSxzZXRWaXNpYmlsaXR5OmZ1bmN0aW9uKGEpe3ZhciBiPW51bGw9PXRoaXMub3BhY2l0eT8xOnRoaXMub3BhY2l0eTtPcGVuTGF5ZXJzLkxheWVyLkV2ZW50UGFuZS5wcm90b3R5cGUuc2V0VmlzaWJpbGl0eS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5zZXRPcGFjaXR5KGIpfSxkaXNwbGF5OmZ1bmN0aW9uKGEpe3RoaXMuX2RyYWdnaW5nfHx0aGlzLnNldEdNYXBWaXNpYmlsaXR5KGEpO09wZW5MYXllcnMuTGF5ZXIuRXZlbnRQYW5lLnByb3RvdHlwZS5kaXNwbGF5LmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sbW92ZVRvOmZ1bmN0aW9uKGEsCmIsYyl7dGhpcy5fZHJhZ2dpbmc9YztPcGVuTGF5ZXJzLkxheWVyLkV2ZW50UGFuZS5wcm90b3R5cGUubW92ZVRvLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtkZWxldGUgdGhpcy5fZHJhZ2dpbmd9LHNldE9wYWNpdHk6ZnVuY3Rpb24oYSl7YSE9PXRoaXMub3BhY2l0eSYmKG51bGwhPXRoaXMubWFwJiZ0aGlzLm1hcC5ldmVudHMudHJpZ2dlckV2ZW50KCJjaGFuZ2VsYXllciIse2xheWVyOnRoaXMscHJvcGVydHk6Im9wYWNpdHkifSksdGhpcy5vcGFjaXR5PWEpO2lmKHRoaXMuZ2V0VmlzaWJpbGl0eSgpKXt2YXIgYj10aGlzLmdldE1hcENvbnRhaW5lcigpO09wZW5MYXllcnMuVXRpbC5tb2RpZnlET01FbGVtZW50KGIsbnVsbCxudWxsLG51bGwsbnVsbCxudWxsLG51bGwsYSl9fSxkZXN0cm95OmZ1bmN0aW9uKCl7aWYodGhpcy5tYXApe3RoaXMuc2V0R01hcFZpc2liaWxpdHkoITEpO3ZhciBhPU9wZW5MYXllcnMuTGF5ZXIuR29vZ2xlLmNhY2hlW3RoaXMubWFwLmlkXTthJiYxPj1hLmNvdW50JiYKdGhpcy5yZW1vdmVHTWFwRWxlbWVudHMoKX1PcGVuTGF5ZXJzLkxheWVyLkV2ZW50UGFuZS5wcm90b3R5cGUuZGVzdHJveS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LHJlbW92ZUdNYXBFbGVtZW50czpmdW5jdGlvbigpe3ZhciBhPU9wZW5MYXllcnMuTGF5ZXIuR29vZ2xlLmNhY2hlW3RoaXMubWFwLmlkXTtpZihhKXt2YXIgYj10aGlzLm1hcE9iamVjdCYmdGhpcy5nZXRNYXBDb250YWluZXIoKTtiJiZiLnBhcmVudE5vZGUmJmIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChiKTsoYj1hLnRlcm1zT2ZVc2UpJiZiLnBhcmVudE5vZGUmJmIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChiKTsoYT1hLnBvd2VyZWRCeSkmJmEucGFyZW50Tm9kZSYmYS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGEpO3RoaXMubWFwT2JqZWN0JiYod2luZG93Lmdvb2dsZSYmZ29vZ2xlLm1hcHMmJmdvb2dsZS5tYXBzLmV2ZW50JiZnb29nbGUubWFwcy5ldmVudC5jbGVhckxpc3RlbmVycykmJmdvb2dsZS5tYXBzLmV2ZW50LmNsZWFyTGlzdGVuZXJzKHRoaXMubWFwT2JqZWN0LAoidGlsZXNsb2FkZWQiKX19LHJlbW92ZU1hcDpmdW5jdGlvbihhKXt0aGlzLnZpc2liaWxpdHkmJnRoaXMubWFwT2JqZWN0JiZ0aGlzLnNldEdNYXBWaXNpYmlsaXR5KCExKTt2YXIgYj1PcGVuTGF5ZXJzLkxheWVyLkdvb2dsZS5jYWNoZVthLmlkXTtiJiYoMT49Yi5jb3VudD8odGhpcy5yZW1vdmVHTWFwRWxlbWVudHMoKSxkZWxldGUgT3BlbkxheWVycy5MYXllci5Hb29nbGUuY2FjaGVbYS5pZF0pOi0tYi5jb3VudCk7ZGVsZXRlIHRoaXMudGVybXNPZlVzZTtkZWxldGUgdGhpcy5wb3dlcmVkQnk7ZGVsZXRlIHRoaXMubWFwT2JqZWN0O2RlbGV0ZSB0aGlzLmRyYWdPYmplY3Q7T3BlbkxheWVycy5MYXllci5FdmVudFBhbmUucHJvdG90eXBlLnJlbW92ZU1hcC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGdldE9MQm91bmRzRnJvbU1hcE9iamVjdEJvdW5kczpmdW5jdGlvbihhKXt2YXIgYj1udWxsO251bGwhPWEmJihiPWEuZ2V0U291dGhXZXN0KCksYT1hLmdldE5vcnRoRWFzdCgpLHRoaXMuc3BoZXJpY2FsTWVyY2F0b3I/CihiPXRoaXMuZm9yd2FyZE1lcmNhdG9yKGIubG5nKCksYi5sYXQoKSksYT10aGlzLmZvcndhcmRNZXJjYXRvcihhLmxuZygpLGEubGF0KCkpKTooYj1uZXcgT3BlbkxheWVycy5Mb25MYXQoYi5sbmcoKSxiLmxhdCgpKSxhPW5ldyBPcGVuTGF5ZXJzLkxvbkxhdChhLmxuZygpLGEubGF0KCkpKSxiPW5ldyBPcGVuTGF5ZXJzLkJvdW5kcyhiLmxvbixiLmxhdCxhLmxvbixhLmxhdCkpO3JldHVybiBifSxnZXRXYXJuaW5nSFRNTDpmdW5jdGlvbigpe3JldHVybiBPcGVuTGF5ZXJzLmkxOG4oImdvb2dsZVdhcm5pbmciKX0sZ2V0TWFwT2JqZWN0Q2VudGVyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWFwT2JqZWN0LmdldENlbnRlcigpfSxnZXRNYXBPYmplY3Rab29tOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWFwT2JqZWN0LmdldFpvb20oKX0sZ2V0TG9uZ2l0dWRlRnJvbU1hcE9iamVjdExvbkxhdDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5zcGhlcmljYWxNZXJjYXRvcj90aGlzLmZvcndhcmRNZXJjYXRvcihhLmxuZygpLAphLmxhdCgpKS5sb246YS5sbmcoKX0sZ2V0TGF0aXR1ZGVGcm9tTWFwT2JqZWN0TG9uTGF0OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnNwaGVyaWNhbE1lcmNhdG9yP3RoaXMuZm9yd2FyZE1lcmNhdG9yKGEubG5nKCksYS5sYXQoKSkubGF0OmEubGF0KCl9LGdldFhGcm9tTWFwT2JqZWN0UGl4ZWw6ZnVuY3Rpb24oYSl7cmV0dXJuIGEueH0sZ2V0WUZyb21NYXBPYmplY3RQaXhlbDpmdW5jdGlvbihhKXtyZXR1cm4gYS55fSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkxheWVyLkdvb2dsZSJ9KTtPcGVuTGF5ZXJzLkxheWVyLkdvb2dsZS5jYWNoZT17fTsKT3BlbkxheWVycy5MYXllci5Hb29nbGUudjI9e3Rlcm1zT2ZVc2U6bnVsbCxwb3dlcmVkQnk6bnVsbCxkcmFnT2JqZWN0Om51bGwsbG9hZE1hcE9iamVjdDpmdW5jdGlvbigpe3RoaXMudHlwZXx8KHRoaXMudHlwZT1HX05PUk1BTF9NQVApO3ZhciBhLGIsYyxkPU9wZW5MYXllcnMuTGF5ZXIuR29vZ2xlLmNhY2hlW3RoaXMubWFwLmlkXTtpZihkKWE9ZC5tYXBPYmplY3QsYj1kLnRlcm1zT2ZVc2UsYz1kLnBvd2VyZWRCeSwrK2QuY291bnQ7ZWxzZXt2YXIgZD10aGlzLm1hcC52aWV3UG9ydERpdixlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO2UuaWQ9dGhpcy5tYXAuaWQrIl9HTWFwMkNvbnRhaW5lciI7ZS5zdHlsZS5wb3NpdGlvbj0iYWJzb2x1dGUiO2Uuc3R5bGUud2lkdGg9IjEwMCUiO2Uuc3R5bGUuaGVpZ2h0PSIxMDAlIjtkLmFwcGVuZENoaWxkKGUpO3RyeXthPW5ldyBHTWFwMihlKSxiPWUubGFzdENoaWxkLGQuYXBwZW5kQ2hpbGQoYiksYi5zdHlsZS56SW5kZXg9CiIxMTAwIixiLnN0eWxlLnJpZ2h0PSIiLGIuc3R5bGUuYm90dG9tPSIiLGIuY2xhc3NOYW1lPSJvbExheWVyR29vZ2xlQ29weXJpZ2h0IixjPWUubGFzdENoaWxkLGQuYXBwZW5kQ2hpbGQoYyksYy5zdHlsZS56SW5kZXg9IjExMDAiLGMuc3R5bGUucmlnaHQ9IiIsYy5zdHlsZS5ib3R0b209IiIsYy5jbGFzc05hbWU9Im9sTGF5ZXJHb29nbGVQb3dlcmVkQnkgZ21ub3ByaW50In1jYXRjaChmKXt0aHJvdyBmO31PcGVuTGF5ZXJzLkxheWVyLkdvb2dsZS5jYWNoZVt0aGlzLm1hcC5pZF09e21hcE9iamVjdDphLHRlcm1zT2ZVc2U6Yixwb3dlcmVkQnk6Yyxjb3VudDoxfX10aGlzLm1hcE9iamVjdD1hO3RoaXMudGVybXNPZlVzZT1iO3RoaXMucG93ZXJlZEJ5PWM7LTE9PT1PcGVuTGF5ZXJzLlV0aWwuaW5kZXhPZih0aGlzLm1hcE9iamVjdC5nZXRNYXBUeXBlcygpLHRoaXMudHlwZSkmJnRoaXMubWFwT2JqZWN0LmFkZE1hcFR5cGUodGhpcy50eXBlKTsiZnVuY3Rpb24iPT10eXBlb2YgYS5nZXREcmFnT2JqZWN0Pwp0aGlzLmRyYWdPYmplY3Q9YS5nZXREcmFnT2JqZWN0KCk6dGhpcy5kcmFnUGFuTWFwT2JqZWN0PW51bGw7ITE9PT10aGlzLmlzQmFzZUxheWVyJiZ0aGlzLnNldEdNYXBWaXNpYmlsaXR5KCJub25lIiE9PXRoaXMuZGl2LnN0eWxlLmRpc3BsYXkpfSxvbk1hcFJlc2l6ZTpmdW5jdGlvbigpe2lmKHRoaXMudmlzaWJpbGl0eSYmdGhpcy5tYXBPYmplY3QuaXNMb2FkZWQoKSl0aGlzLm1hcE9iamVjdC5jaGVja1Jlc2l6ZSgpO2Vsc2V7aWYoIXRoaXMuX3Jlc2l6ZWQpdmFyIGE9dGhpcyxiPUdFdmVudC5hZGRMaXN0ZW5lcih0aGlzLm1hcE9iamVjdCwibG9hZCIsZnVuY3Rpb24oKXtHRXZlbnQucmVtb3ZlTGlzdGVuZXIoYik7ZGVsZXRlIGEuX3Jlc2l6ZWQ7YS5tYXBPYmplY3QuY2hlY2tSZXNpemUoKTthLm1vdmVUbyhhLm1hcC5nZXRDZW50ZXIoKSxhLm1hcC5nZXRab29tKCkpfSk7dGhpcy5fcmVzaXplZD0hMH19LHNldEdNYXBWaXNpYmlsaXR5OmZ1bmN0aW9uKGEpe3ZhciBiPU9wZW5MYXllcnMuTGF5ZXIuR29vZ2xlLmNhY2hlW3RoaXMubWFwLmlkXTsKaWYoYil7dmFyIGM9dGhpcy5tYXBPYmplY3QuZ2V0Q29udGFpbmVyKCk7ITA9PT1hPyh0aGlzLm1hcE9iamVjdC5zZXRNYXBUeXBlKHRoaXMudHlwZSksYy5zdHlsZS5kaXNwbGF5PSIiLHRoaXMudGVybXNPZlVzZS5zdHlsZS5sZWZ0PSIiLHRoaXMudGVybXNPZlVzZS5zdHlsZS5kaXNwbGF5PSIiLHRoaXMucG93ZXJlZEJ5LnN0eWxlLmRpc3BsYXk9IiIsYi5kaXNwbGF5ZWQ9dGhpcy5pZCk6KGIuZGlzcGxheWVkPT09dGhpcy5pZCYmZGVsZXRlIGIuZGlzcGxheWVkLGIuZGlzcGxheWVkfHwoYy5zdHlsZS5kaXNwbGF5PSJub25lIix0aGlzLnRlcm1zT2ZVc2Uuc3R5bGUuZGlzcGxheT0ibm9uZSIsdGhpcy50ZXJtc09mVXNlLnN0eWxlLmxlZnQ9Ii05OTk5cHgiLHRoaXMucG93ZXJlZEJ5LnN0eWxlLmRpc3BsYXk9Im5vbmUiKSl9fSxnZXRNYXBDb250YWluZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tYXBPYmplY3QuZ2V0Q29udGFpbmVyKCl9LGdldE1hcE9iamVjdEJvdW5kc0Zyb21PTEJvdW5kczpmdW5jdGlvbihhKXt2YXIgYj0KbnVsbDtudWxsIT1hJiYoYj10aGlzLnNwaGVyaWNhbE1lcmNhdG9yP3RoaXMuaW52ZXJzZU1lcmNhdG9yKGEuYm90dG9tLGEubGVmdCk6bmV3IE9wZW5MYXllcnMuTG9uTGF0KGEuYm90dG9tLGEubGVmdCksYT10aGlzLnNwaGVyaWNhbE1lcmNhdG9yP3RoaXMuaW52ZXJzZU1lcmNhdG9yKGEudG9wLGEucmlnaHQpOm5ldyBPcGVuTGF5ZXJzLkxvbkxhdChhLnRvcCxhLnJpZ2h0KSxiPW5ldyBHTGF0TG5nQm91bmRzKG5ldyBHTGF0TG5nKGIubGF0LGIubG9uKSxuZXcgR0xhdExuZyhhLmxhdCxhLmxvbikpKTtyZXR1cm4gYn0sc2V0TWFwT2JqZWN0Q2VudGVyOmZ1bmN0aW9uKGEsYil7dGhpcy5tYXBPYmplY3Quc2V0Q2VudGVyKGEsYil9LGRyYWdQYW5NYXBPYmplY3Q6ZnVuY3Rpb24oYSxiKXt0aGlzLmRyYWdPYmplY3QubW92ZUJ5KG5ldyBHU2l6ZSgtYSxiKSl9LGdldE1hcE9iamVjdExvbkxhdEZyb21NYXBPYmplY3RQaXhlbDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5tYXBPYmplY3QuZnJvbUNvbnRhaW5lclBpeGVsVG9MYXRMbmcoYSl9LApnZXRNYXBPYmplY3RQaXhlbEZyb21NYXBPYmplY3RMb25MYXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMubWFwT2JqZWN0LmZyb21MYXRMbmdUb0NvbnRhaW5lclBpeGVsKGEpfSxnZXRNYXBPYmplY3Rab29tRnJvbU1hcE9iamVjdEJvdW5kczpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5tYXBPYmplY3QuZ2V0Qm91bmRzWm9vbUxldmVsKGEpfSxnZXRNYXBPYmplY3RMb25MYXRGcm9tTG9uTGF0OmZ1bmN0aW9uKGEsYil7dmFyIGM7dGhpcy5zcGhlcmljYWxNZXJjYXRvcj8oYz10aGlzLmludmVyc2VNZXJjYXRvcihhLGIpLGM9bmV3IEdMYXRMbmcoYy5sYXQsYy5sb24pKTpjPW5ldyBHTGF0TG5nKGIsYSk7cmV0dXJuIGN9LGdldE1hcE9iamVjdFBpeGVsRnJvbVhZOmZ1bmN0aW9uKGEsYil7cmV0dXJuIG5ldyBHUG9pbnQoYSxiKX19O09wZW5MYXllcnMuR2VvbWV0cnk9T3BlbkxheWVycy5DbGFzcyh7aWQ6bnVsbCxwYXJlbnQ6bnVsbCxib3VuZHM6bnVsbCxpbml0aWFsaXplOmZ1bmN0aW9uKCl7dGhpcy5pZD1PcGVuTGF5ZXJzLlV0aWwuY3JlYXRlVW5pcXVlSUQodGhpcy5DTEFTU19OQU1FKyJfIil9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmJvdW5kcz10aGlzLmlkPW51bGx9LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5fSxzZXRCb3VuZHM6ZnVuY3Rpb24oYSl7YSYmKHRoaXMuYm91bmRzPWEuY2xvbmUoKSl9LGNsZWFyQm91bmRzOmZ1bmN0aW9uKCl7dGhpcy5ib3VuZHM9bnVsbDt0aGlzLnBhcmVudCYmdGhpcy5wYXJlbnQuY2xlYXJCb3VuZHMoKX0sZXh0ZW5kQm91bmRzOmZ1bmN0aW9uKGEpe3RoaXMuZ2V0Qm91bmRzKCk/dGhpcy5ib3VuZHMuZXh0ZW5kKGEpOnRoaXMuc2V0Qm91bmRzKGEpfSxnZXRCb3VuZHM6ZnVuY3Rpb24oKXtudWxsPT10aGlzLmJvdW5kcyYmdGhpcy5jYWxjdWxhdGVCb3VuZHMoKTsKcmV0dXJuIHRoaXMuYm91bmRzfSxjYWxjdWxhdGVCb3VuZHM6ZnVuY3Rpb24oKXt9LGRpc3RhbmNlVG86ZnVuY3Rpb24oYSxiKXt9LGdldFZlcnRpY2VzOmZ1bmN0aW9uKGEpe30sYXRQb2ludDpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9ITE7bnVsbCE9dGhpcy5nZXRCb3VuZHMoKSYmbnVsbCE9YSYmKGI9bnVsbCE9Yj9iOjAsYz1udWxsIT1jP2M6MCxkPShuZXcgT3BlbkxheWVycy5Cb3VuZHModGhpcy5ib3VuZHMubGVmdC1iLHRoaXMuYm91bmRzLmJvdHRvbS1jLHRoaXMuYm91bmRzLnJpZ2h0K2IsdGhpcy5ib3VuZHMudG9wK2MpKS5jb250YWluc0xvbkxhdChhKSk7cmV0dXJuIGR9LGdldExlbmd0aDpmdW5jdGlvbigpe3JldHVybiAwfSxnZXRBcmVhOmZ1bmN0aW9uKCl7cmV0dXJuIDB9LGdldENlbnRyb2lkOmZ1bmN0aW9uKCl7cmV0dXJuIG51bGx9LHRvU3RyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIE9wZW5MYXllcnMuRm9ybWF0JiZPcGVuTGF5ZXJzLkZvcm1hdC5XS1Q/T3BlbkxheWVycy5Gb3JtYXQuV0tULnByb3RvdHlwZS53cml0ZShuZXcgT3BlbkxheWVycy5GZWF0dXJlLlZlY3Rvcih0aGlzKSk6Ck9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0aGlzKX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5HZW9tZXRyeSJ9KTtPcGVuTGF5ZXJzLkdlb21ldHJ5LmZyb21XS1Q9ZnVuY3Rpb24oYSl7dmFyIGI7aWYoT3BlbkxheWVycy5Gb3JtYXQmJk9wZW5MYXllcnMuRm9ybWF0LldLVCl7dmFyIGM9T3BlbkxheWVycy5HZW9tZXRyeS5mcm9tV0tULmZvcm1hdDtjfHwoYz1uZXcgT3BlbkxheWVycy5Gb3JtYXQuV0tULE9wZW5MYXllcnMuR2VvbWV0cnkuZnJvbVdLVC5mb3JtYXQ9Yyk7YT1jLnJlYWQoYSk7aWYoYSBpbnN0YW5jZW9mIE9wZW5MYXllcnMuRmVhdHVyZS5WZWN0b3IpYj1hLmdlb21ldHJ5O2Vsc2UgaWYoT3BlbkxheWVycy5VdGlsLmlzQXJyYXkoYSkpe2I9YS5sZW5ndGg7Zm9yKHZhciBjPUFycmF5KGIpLGQ9MDtkPGI7KytkKWNbZF09YVtkXS5nZW9tZXRyeTtiPW5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LkNvbGxlY3Rpb24oYyl9fXJldHVybiBifTsKT3BlbkxheWVycy5HZW9tZXRyeS5zZWdtZW50c0ludGVyc2VjdD1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9YyYmYy5wb2ludDtjPWMmJmMudG9sZXJhbmNlO3ZhciBlPSExLGY9YS54MS1iLngxLGc9YS55MS1iLnkxLGg9YS54Mi1hLngxLGs9YS55Mi1hLnkxLGw9Yi55Mi1iLnkxLG09Yi54Mi1iLngxLHI9bCpoLW0qayxsPW0qZy1sKmYsZz1oKmctaypmOzA9PXI/MD09bCYmMD09ZyYmKGU9ITApOihmPWwvcixyPWcvciwwPD1mJiYoMT49ZiYmMDw9ciYmMT49cikmJihkPyhoPWEueDErZipoLHI9YS55MStmKmssZT1uZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludChoLHIpKTplPSEwKSk7aWYoYylpZihlKXtpZihkKWE6Zm9yKGE9W2EsYl0sYj0wOzI+YjsrK2IpZm9yKGY9YVtiXSxrPTE7Mz5rOysraylpZihoPWZbIngiK2tdLHI9ZlsieSIra10sZD1NYXRoLnNxcnQoTWF0aC5wb3coaC1lLngsMikrTWF0aC5wb3coci1lLnksMikpLGQ8Yyl7ZS54PWg7ZS55PXI7YnJlYWsgYX19ZWxzZSBhOmZvcihhPQpbYSxiXSxiPTA7Mj5iOysrYilmb3IoaD1hW2JdLHI9YVsoYisxKSUyXSxrPTE7Mz5rOysraylpZihmPXt4OmhbIngiK2tdLHk6aFsieSIra119LGc9T3BlbkxheWVycy5HZW9tZXRyeS5kaXN0YW5jZVRvU2VnbWVudChmLHIpLGcuZGlzdGFuY2U8Yyl7ZT1kP25ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KGYueCxmLnkpOiEwO2JyZWFrIGF9cmV0dXJuIGV9O09wZW5MYXllcnMuR2VvbWV0cnkuZGlzdGFuY2VUb1NlZ21lbnQ9ZnVuY3Rpb24oYSxiKXt2YXIgYz1PcGVuTGF5ZXJzLkdlb21ldHJ5LmRpc3RhbmNlU3F1YXJlZFRvU2VnbWVudChhLGIpO2MuZGlzdGFuY2U9TWF0aC5zcXJ0KGMuZGlzdGFuY2UpO3JldHVybiBjfTsKT3BlbkxheWVycy5HZW9tZXRyeS5kaXN0YW5jZVNxdWFyZWRUb1NlZ21lbnQ9ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLngsZD1hLnksZT1iLngxLGY9Yi55MSxnPWIueDIsaD1iLnkyLGs9Zy1lLGw9aC1mLG09KGsqKGMtZSkrbCooZC1mKSkvKE1hdGgucG93KGssMikrTWF0aC5wb3cobCwyKSk7MD49bXx8KDE8PW0/KGU9ZyxmPWgpOihlKz1tKmssZis9bSpsKSk7cmV0dXJue2Rpc3RhbmNlOk1hdGgucG93KGUtYywyKStNYXRoLnBvdyhmLWQsMikseDplLHk6ZixhbG9uZzptfX07T3BlbkxheWVycy5HZW9tZXRyeS5Db2xsZWN0aW9uPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5HZW9tZXRyeSx7Y29tcG9uZW50czpudWxsLGNvbXBvbmVudFR5cGVzOm51bGwsaW5pdGlhbGl6ZTpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLkdlb21ldHJ5LnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLmNvbXBvbmVudHM9W107bnVsbCE9YSYmdGhpcy5hZGRDb21wb25lbnRzKGEpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5jb21wb25lbnRzLmxlbmd0aD0wO3RoaXMuY29tcG9uZW50cz1udWxsO09wZW5MYXllcnMuR2VvbWV0cnkucHJvdG90eXBlLmRlc3Ryb3kuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxjbG9uZTpmdW5jdGlvbigpe2Zvcih2YXIgYT1ldmFsKCJuZXcgIit0aGlzLkNMQVNTX05BTUUrIigpIiksYj0wLGM9dGhpcy5jb21wb25lbnRzLmxlbmd0aDtiPGM7YisrKWEuYWRkQ29tcG9uZW50KHRoaXMuY29tcG9uZW50c1tiXS5jbG9uZSgpKTsKT3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoYSx0aGlzKTtyZXR1cm4gYX0sZ2V0Q29tcG9uZW50c1N0cmluZzpmdW5jdGlvbigpe2Zvcih2YXIgYT1bXSxiPTAsYz10aGlzLmNvbXBvbmVudHMubGVuZ3RoO2I8YztiKyspYS5wdXNoKHRoaXMuY29tcG9uZW50c1tiXS50b1Nob3J0U3RyaW5nKCkpO3JldHVybiBhLmpvaW4oIiwiKX0sY2FsY3VsYXRlQm91bmRzOmZ1bmN0aW9uKCl7dGhpcy5ib3VuZHM9bnVsbDt2YXIgYT1uZXcgT3BlbkxheWVycy5Cb3VuZHMsYj10aGlzLmNvbXBvbmVudHM7aWYoYilmb3IodmFyIGM9MCxkPWIubGVuZ3RoO2M8ZDtjKyspYS5leHRlbmQoYltjXS5nZXRCb3VuZHMoKSk7bnVsbCE9YS5sZWZ0JiYobnVsbCE9YS5ib3R0b20mJm51bGwhPWEucmlnaHQmJm51bGwhPWEudG9wKSYmdGhpcy5zZXRCb3VuZHMoYSl9LGFkZENvbXBvbmVudHM6ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5VdGlsLmlzQXJyYXkoYSl8fChhPVthXSk7Zm9yKHZhciBiPTAsYz1hLmxlbmd0aDtiPApjO2IrKyl0aGlzLmFkZENvbXBvbmVudChhW2JdKX0sYWRkQ29tcG9uZW50OmZ1bmN0aW9uKGEsYil7dmFyIGM9ITE7aWYoYSYmKG51bGw9PXRoaXMuY29tcG9uZW50VHlwZXN8fC0xPE9wZW5MYXllcnMuVXRpbC5pbmRleE9mKHRoaXMuY29tcG9uZW50VHlwZXMsYS5DTEFTU19OQU1FKSkpe2lmKG51bGwhPWImJmI8dGhpcy5jb21wb25lbnRzLmxlbmd0aCl7dmFyIGM9dGhpcy5jb21wb25lbnRzLnNsaWNlKDAsYiksZD10aGlzLmNvbXBvbmVudHMuc2xpY2UoYix0aGlzLmNvbXBvbmVudHMubGVuZ3RoKTtjLnB1c2goYSk7dGhpcy5jb21wb25lbnRzPWMuY29uY2F0KGQpfWVsc2UgdGhpcy5jb21wb25lbnRzLnB1c2goYSk7YS5wYXJlbnQ9dGhpczt0aGlzLmNsZWFyQm91bmRzKCk7Yz0hMH1yZXR1cm4gY30scmVtb3ZlQ29tcG9uZW50czpmdW5jdGlvbihhKXt2YXIgYj0hMTtPcGVuTGF5ZXJzLlV0aWwuaXNBcnJheShhKXx8KGE9W2FdKTtmb3IodmFyIGM9YS5sZW5ndGgtMTswPD1jOy0tYyliPQp0aGlzLnJlbW92ZUNvbXBvbmVudChhW2NdKXx8YjtyZXR1cm4gYn0scmVtb3ZlQ29tcG9uZW50OmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuVXRpbC5yZW1vdmVJdGVtKHRoaXMuY29tcG9uZW50cyxhKTt0aGlzLmNsZWFyQm91bmRzKCk7cmV0dXJuITB9LGdldExlbmd0aDpmdW5jdGlvbigpe2Zvcih2YXIgYT0wLGI9MCxjPXRoaXMuY29tcG9uZW50cy5sZW5ndGg7YjxjO2IrKylhKz10aGlzLmNvbXBvbmVudHNbYl0uZ2V0TGVuZ3RoKCk7cmV0dXJuIGF9LGdldEFyZWE6ZnVuY3Rpb24oKXtmb3IodmFyIGE9MCxiPTAsYz10aGlzLmNvbXBvbmVudHMubGVuZ3RoO2I8YztiKyspYSs9dGhpcy5jb21wb25lbnRzW2JdLmdldEFyZWEoKTtyZXR1cm4gYX0sZ2V0R2VvZGVzaWNBcmVhOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0wLGM9MCxkPXRoaXMuY29tcG9uZW50cy5sZW5ndGg7YzxkO2MrKyliKz10aGlzLmNvbXBvbmVudHNbY10uZ2V0R2VvZGVzaWNBcmVhKGEpO3JldHVybiBifSxnZXRDZW50cm9pZDpmdW5jdGlvbihhKXtpZighYSlyZXR1cm4gdGhpcy5jb21wb25lbnRzLmxlbmd0aCYmCnRoaXMuY29tcG9uZW50c1swXS5nZXRDZW50cm9pZCgpO2E9dGhpcy5jb21wb25lbnRzLmxlbmd0aDtpZighYSlyZXR1cm4hMTtmb3IodmFyIGI9W10sYz1bXSxkPTAsZT1OdW1iZXIuTUFYX1ZBTFVFLGYsZz0wO2c8YTsrK2cpe2Y9dGhpcy5jb21wb25lbnRzW2ddO3ZhciBoPWYuZ2V0QXJlYSgpO2Y9Zi5nZXRDZW50cm9pZCghMCk7aXNOYU4oaCl8fChpc05hTihmLngpfHxpc05hTihmLnkpKXx8KGIucHVzaChoKSxkKz1oLGU9aDxlJiYwPGg/aDplLGMucHVzaChmKSl9YT1iLmxlbmd0aDtpZigwPT09ZCl7Zm9yKGc9MDtnPGE7KytnKWJbZ109MTtkPWIubGVuZ3RofWVsc2V7Zm9yKGc9MDtnPGE7KytnKWJbZ10vPWU7ZC89ZX1mb3IodmFyIGs9ZT0wLGc9MDtnPGE7KytnKWY9Y1tnXSxoPWJbZ10sZSs9Zi54Kmgsays9Zi55Kmg7cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KGUvZCxrL2QpfSxnZXRHZW9kZXNpY0xlbmd0aDpmdW5jdGlvbihhKXtmb3IodmFyIGI9MCwKYz0wLGQ9dGhpcy5jb21wb25lbnRzLmxlbmd0aDtjPGQ7YysrKWIrPXRoaXMuY29tcG9uZW50c1tjXS5nZXRHZW9kZXNpY0xlbmd0aChhKTtyZXR1cm4gYn0sbW92ZTpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz0wLGQ9dGhpcy5jb21wb25lbnRzLmxlbmd0aDtjPGQ7YysrKXRoaXMuY29tcG9uZW50c1tjXS5tb3ZlKGEsYil9LHJvdGF0ZTpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz0wLGQ9dGhpcy5jb21wb25lbnRzLmxlbmd0aDtjPGQ7KytjKXRoaXMuY29tcG9uZW50c1tjXS5yb3RhdGUoYSxiKX0scmVzaXplOmZ1bmN0aW9uKGEsYixjKXtmb3IodmFyIGQ9MDtkPHRoaXMuY29tcG9uZW50cy5sZW5ndGg7KytkKXRoaXMuY29tcG9uZW50c1tkXS5yZXNpemUoYSxiLGMpO3JldHVybiB0aGlzfSxkaXN0YW5jZVRvOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPSEoYiYmITE9PT1iLmVkZ2UpJiZiJiZiLmRldGFpbHMsZCxlLGYsZz1OdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFksaD0wLGs9dGhpcy5jb21wb25lbnRzLmxlbmd0aDtoPAprJiYhKGQ9dGhpcy5jb21wb25lbnRzW2hdLmRpc3RhbmNlVG8oYSxiKSxmPWM/ZC5kaXN0YW5jZTpkLGY8ZyYmKGc9ZixlPWQsMD09ZykpOysraCk7cmV0dXJuIGV9LGVxdWFsczpmdW5jdGlvbihhKXt2YXIgYj0hMDtpZihhJiZhLkNMQVNTX05BTUUmJnRoaXMuQ0xBU1NfTkFNRT09YS5DTEFTU19OQU1FKWlmKE9wZW5MYXllcnMuVXRpbC5pc0FycmF5KGEuY29tcG9uZW50cykmJmEuY29tcG9uZW50cy5sZW5ndGg9PXRoaXMuY29tcG9uZW50cy5sZW5ndGgpZm9yKHZhciBjPTAsZD10aGlzLmNvbXBvbmVudHMubGVuZ3RoO2M8ZDsrK2Mpe2lmKCF0aGlzLmNvbXBvbmVudHNbY10uZXF1YWxzKGEuY29tcG9uZW50c1tjXSkpe2I9ITE7YnJlYWt9fWVsc2UgYj0hMTtlbHNlIGI9ITE7cmV0dXJuIGJ9LHRyYW5zZm9ybTpmdW5jdGlvbihhLGIpe2lmKGEmJmIpe2Zvcih2YXIgYz0wLGQ9dGhpcy5jb21wb25lbnRzLmxlbmd0aDtjPGQ7YysrKXRoaXMuY29tcG9uZW50c1tjXS50cmFuc2Zvcm0oYSwKYik7dGhpcy5ib3VuZHM9bnVsbH1yZXR1cm4gdGhpc30saW50ZXJzZWN0czpmdW5jdGlvbihhKXtmb3IodmFyIGI9ITEsYz0wLGQ9dGhpcy5jb21wb25lbnRzLmxlbmd0aDtjPGQmJiEoYj1hLmludGVyc2VjdHModGhpcy5jb21wb25lbnRzW2NdKSk7KytjKTtyZXR1cm4gYn0sZ2V0VmVydGljZXM6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPVtdLGM9MCxkPXRoaXMuY29tcG9uZW50cy5sZW5ndGg7YzxkOysrYylBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShiLHRoaXMuY29tcG9uZW50c1tjXS5nZXRWZXJ0aWNlcyhhKSk7cmV0dXJuIGJ9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuR2VvbWV0cnkuQ29sbGVjdGlvbiJ9KTtPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50PU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5HZW9tZXRyeSx7eDpudWxsLHk6bnVsbCxpbml0aWFsaXplOmZ1bmN0aW9uKGEsYil7T3BlbkxheWVycy5HZW9tZXRyeS5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy54PXBhcnNlRmxvYXQoYSk7dGhpcy55PXBhcnNlRmxvYXQoYil9LGNsb25lOmZ1bmN0aW9uKGEpe251bGw9PWEmJihhPW5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KHRoaXMueCx0aGlzLnkpKTtPcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyhhLHRoaXMpO3JldHVybiBhfSxjYWxjdWxhdGVCb3VuZHM6ZnVuY3Rpb24oKXt0aGlzLmJvdW5kcz1uZXcgT3BlbkxheWVycy5Cb3VuZHModGhpcy54LHRoaXMueSx0aGlzLngsdGhpcy55KX0sZGlzdGFuY2VUbzpmdW5jdGlvbihhLGIpe3ZhciBjPSEoYiYmITE9PT1iLmVkZ2UpJiZiJiZiLmRldGFpbHMsZCxlLGYsZyxoO2EgaW5zdGFuY2VvZgpPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50PyhlPXRoaXMueCxmPXRoaXMueSxnPWEueCxoPWEueSxkPU1hdGguc3FydChNYXRoLnBvdyhlLWcsMikrTWF0aC5wb3coZi1oLDIpKSxkPWM/e3gwOmUseTA6Zix4MTpnLHkxOmgsZGlzdGFuY2U6ZH06ZCk6KGQ9YS5kaXN0YW5jZVRvKHRoaXMsYiksYyYmKGQ9e3gwOmQueDEseTA6ZC55MSx4MTpkLngwLHkxOmQueTAsZGlzdGFuY2U6ZC5kaXN0YW5jZX0pKTtyZXR1cm4gZH0sZXF1YWxzOmZ1bmN0aW9uKGEpe3ZhciBiPSExO251bGwhPWEmJihiPXRoaXMueD09YS54JiZ0aGlzLnk9PWEueXx8aXNOYU4odGhpcy54KSYmaXNOYU4odGhpcy55KSYmaXNOYU4oYS54KSYmaXNOYU4oYS55KSk7cmV0dXJuIGJ9LHRvU2hvcnRTdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy54KyIsICIrdGhpcy55fSxtb3ZlOmZ1bmN0aW9uKGEsYil7dGhpcy54Kz1hO3RoaXMueSs9Yjt0aGlzLmNsZWFyQm91bmRzKCl9LHJvdGF0ZTpmdW5jdGlvbihhLGIpe2EqPQpNYXRoLlBJLzE4MDt2YXIgYz10aGlzLmRpc3RhbmNlVG8oYiksZD1hK01hdGguYXRhbjIodGhpcy55LWIueSx0aGlzLngtYi54KTt0aGlzLng9Yi54K2MqTWF0aC5jb3MoZCk7dGhpcy55PWIueStjKk1hdGguc2luKGQpO3RoaXMuY2xlYXJCb3VuZHMoKX0sZ2V0Q2VudHJvaWQ6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQodGhpcy54LHRoaXMueSl9LHJlc2l6ZTpmdW5jdGlvbihhLGIsYyl7dGhpcy54PWIueCthKih2b2lkIDA9PWM/MTpjKSoodGhpcy54LWIueCk7dGhpcy55PWIueSthKih0aGlzLnktYi55KTt0aGlzLmNsZWFyQm91bmRzKCk7cmV0dXJuIHRoaXN9LGludGVyc2VjdHM6ZnVuY3Rpb24oYSl7dmFyIGI9ITE7cmV0dXJuIGI9Ik9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQiPT1hLkNMQVNTX05BTUU/dGhpcy5lcXVhbHMoYSk6YS5pbnRlcnNlY3RzKHRoaXMpfSx0cmFuc2Zvcm06ZnVuY3Rpb24oYSxiKXthJiZiJiYoT3BlbkxheWVycy5Qcm9qZWN0aW9uLnRyYW5zZm9ybSh0aGlzLAphLGIpLHRoaXMuYm91bmRzPW51bGwpO3JldHVybiB0aGlzfSxnZXRWZXJ0aWNlczpmdW5jdGlvbihhKXtyZXR1cm5bdGhpc119LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQifSk7T3BlbkxheWVycy5HZW9tZXRyeS5NdWx0aVBvaW50PU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5HZW9tZXRyeS5Db2xsZWN0aW9uLHtjb21wb25lbnRUeXBlczpbIk9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQiXSxhZGRQb2ludDpmdW5jdGlvbihhLGIpe3RoaXMuYWRkQ29tcG9uZW50KGEsYil9LHJlbW92ZVBvaW50OmZ1bmN0aW9uKGEpe3RoaXMucmVtb3ZlQ29tcG9uZW50KGEpfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkdlb21ldHJ5Lk11bHRpUG9pbnQifSk7T3BlbkxheWVycy5HZW9tZXRyeS5DdXJ2ZT1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuR2VvbWV0cnkuTXVsdGlQb2ludCx7Y29tcG9uZW50VHlwZXM6WyJPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50Il0sZ2V0TGVuZ3RoOmZ1bmN0aW9uKCl7dmFyIGE9MDtpZih0aGlzLmNvbXBvbmVudHMmJjE8dGhpcy5jb21wb25lbnRzLmxlbmd0aClmb3IodmFyIGI9MSxjPXRoaXMuY29tcG9uZW50cy5sZW5ndGg7YjxjO2IrKylhKz10aGlzLmNvbXBvbmVudHNbYi0xXS5kaXN0YW5jZVRvKHRoaXMuY29tcG9uZW50c1tiXSk7cmV0dXJuIGF9LGdldEdlb2Rlc2ljTGVuZ3RoOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXM7aWYoYSl7dmFyIGM9bmV3IE9wZW5MYXllcnMuUHJvamVjdGlvbigiRVBTRzo0MzI2Iik7Yy5lcXVhbHMoYSl8fChiPXRoaXMuY2xvbmUoKS50cmFuc2Zvcm0oYSxjKSl9YT0wO2lmKGIuY29tcG9uZW50cyYmMTxiLmNvbXBvbmVudHMubGVuZ3RoKWZvcih2YXIgZCxlPTEsZj1iLmNvbXBvbmVudHMubGVuZ3RoO2U8CmY7ZSsrKWM9Yi5jb21wb25lbnRzW2UtMV0sZD1iLmNvbXBvbmVudHNbZV0sYSs9T3BlbkxheWVycy5VdGlsLmRpc3RWaW5jZW50eSh7bG9uOmMueCxsYXQ6Yy55fSx7bG9uOmQueCxsYXQ6ZC55fSk7cmV0dXJuIDFFMyphfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkdlb21ldHJ5LkN1cnZlIn0pO09wZW5MYXllcnMuR2VvbWV0cnkuTGluZVN0cmluZz1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuR2VvbWV0cnkuQ3VydmUse3JlbW92ZUNvbXBvbmVudDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNvbXBvbmVudHMmJjI8dGhpcy5jb21wb25lbnRzLmxlbmd0aDtiJiZPcGVuTGF5ZXJzLkdlb21ldHJ5LkNvbGxlY3Rpb24ucHJvdG90eXBlLnJlbW92ZUNvbXBvbmVudC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7cmV0dXJuIGJ9LGludGVyc2VjdHM6ZnVuY3Rpb24oYSl7dmFyIGI9ITEsYz1hLkNMQVNTX05BTUU7aWYoIk9wZW5MYXllcnMuR2VvbWV0cnkuTGluZVN0cmluZyI9PWN8fCJPcGVuTGF5ZXJzLkdlb21ldHJ5LkxpbmVhclJpbmciPT1jfHwiT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludCI9PWMpe3ZhciBkPXRoaXMuZ2V0U29ydGVkU2VnbWVudHMoKTthPSJPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50Ij09Yz9be3gxOmEueCx5MTphLnkseDI6YS54LHkyOmEueX1dOmEuZ2V0U29ydGVkU2VnbWVudHMoKTsKdmFyIGUsZixnLGgsayxsLG0scj0wLHA9ZC5sZW5ndGg7YTpmb3IoO3I8cDsrK3Ipe2M9ZFtyXTtlPWMueDE7Zj1jLngyO2c9Yy55MTtoPWMueTI7dmFyIG49MCxxPWEubGVuZ3RoO2Zvcig7bjxxOysrbil7az1hW25dO2lmKGsueDE+ZilicmVhaztpZighKGsueDI8ZXx8KGw9ay55MSxtPWsueTIsTWF0aC5taW4obCxtKT5NYXRoLm1heChnLGgpfHxNYXRoLm1heChsLG0pPE1hdGgubWluKGcsaCl8fCFPcGVuTGF5ZXJzLkdlb21ldHJ5LnNlZ21lbnRzSW50ZXJzZWN0KGMsaykpKSl7Yj0hMDticmVhayBhfX19fWVsc2UgYj1hLmludGVyc2VjdHModGhpcyk7cmV0dXJuIGJ9LGdldFNvcnRlZFNlZ21lbnRzOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPXRoaXMuY29tcG9uZW50cy5sZW5ndGgtMSxiPUFycmF5KGEpLGMsZCxlPTA7ZTxhOysrZSljPXRoaXMuY29tcG9uZW50c1tlXSxkPXRoaXMuY29tcG9uZW50c1tlKzFdLGJbZV09Yy54PGQueD97eDE6Yy54LHkxOmMueSx4MjpkLngseTI6ZC55fToKe3gxOmQueCx5MTpkLnkseDI6Yy54LHkyOmMueX07cmV0dXJuIGIuc29ydChmdW5jdGlvbihhLGIpe3JldHVybiBhLngxLWIueDF9KX0sc3BsaXRXaXRoU2VnbWVudDpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz0hKGImJiExPT09Yi5lZGdlKSxkPWImJmIudG9sZXJhbmNlLGU9W10sZj10aGlzLmdldFZlcnRpY2VzKCksZz1bXSxoPVtdLGs9ITEsbCxtLHIscD17cG9pbnQ6ITAsdG9sZXJhbmNlOmR9LG49bnVsbCxxPTAscz1mLmxlbmd0aC0yO3E8PXM7KytxKWlmKGQ9ZltxXSxnLnB1c2goZC5jbG9uZSgpKSxsPWZbcSsxXSxtPXt4MTpkLngseTE6ZC55LHgyOmwueCx5MjpsLnl9LG09T3BlbkxheWVycy5HZW9tZXRyeS5zZWdtZW50c0ludGVyc2VjdChhLG0scCksbSBpbnN0YW5jZW9mIE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQmJigocj1tLng9PT1hLngxJiZtLnk9PT1hLnkxfHxtLng9PT1hLngyJiZtLnk9PT1hLnkyfHxtLmVxdWFscyhkKXx8bS5lcXVhbHMobCk/ITA6ITEpfHxjKSltLmVxdWFscyhoW2gubGVuZ3RoLQoxXSl8fGgucHVzaChtLmNsb25lKCkpLDA9PT1xJiZtLmVxdWFscyhkKXx8bS5lcXVhbHMobCl8fChrPSEwLG0uZXF1YWxzKGQpfHxnLnB1c2gobSksZS5wdXNoKG5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LkxpbmVTdHJpbmcoZykpLGc9W20uY2xvbmUoKV0pO2smJihnLnB1c2gobC5jbG9uZSgpKSxlLnB1c2gobmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuTGluZVN0cmluZyhnKSkpO2lmKDA8aC5sZW5ndGgpdmFyIHQ9YS54MTxhLngyPzE6LTEsdT1hLnkxPGEueTI/MTotMSxuPXtsaW5lczplLHBvaW50czpoLnNvcnQoZnVuY3Rpb24oYSxiKXtyZXR1cm4gdCphLngtdCpiLnh8fHUqYS55LXUqYi55fSl9O3JldHVybiBufSxzcGxpdDpmdW5jdGlvbihhLGIpe3ZhciBjPW51bGwsZD1iJiZiLm11dHVhbCxlLGYsZyxoO2lmKGEgaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLkdlb21ldHJ5LkxpbmVTdHJpbmcpe3ZhciBrPXRoaXMuZ2V0VmVydGljZXMoKSxsLG0scixwLG4scT1bXTtnPVtdO2Zvcih2YXIgcz0KMCx0PWsubGVuZ3RoLTI7czw9dDsrK3Mpe2w9a1tzXTttPWtbcysxXTtyPXt4MTpsLngseTE6bC55LHgyOm0ueCx5MjptLnl9O2g9aHx8W2FdO2QmJnEucHVzaChsLmNsb25lKCkpO2Zvcih2YXIgdT0wO3U8aC5sZW5ndGg7Kyt1KWlmKHA9aFt1XS5zcGxpdFdpdGhTZWdtZW50KHIsYikpaWYobj1wLmxpbmVzLDA8bi5sZW5ndGgmJihuLnVuc2hpZnQodSwxKSxBcnJheS5wcm90b3R5cGUuc3BsaWNlLmFwcGx5KGgsbiksdSs9bi5sZW5ndGgtMiksZClmb3IodmFyIHY9MCx3PXAucG9pbnRzLmxlbmd0aDt2PHc7Kyt2KW49cC5wb2ludHNbdl0sbi5lcXVhbHMobCl8fChxLnB1c2gobiksZy5wdXNoKG5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LkxpbmVTdHJpbmcocSkpLHE9bi5lcXVhbHMobSk/W106W24uY2xvbmUoKV0pfWQmJigwPGcubGVuZ3RoJiYwPHEubGVuZ3RoKSYmKHEucHVzaChtLmNsb25lKCkpLGcucHVzaChuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5MaW5lU3RyaW5nKHEpKSl9ZWxzZSBjPQphLnNwbGl0V2l0aCh0aGlzLGIpO2gmJjE8aC5sZW5ndGg/Zj0hMDpoPVtdO2cmJjE8Zy5sZW5ndGg/ZT0hMDpnPVtdO2lmKGZ8fGUpYz1kP1tnLGhdOmg7cmV0dXJuIGN9LHNwbGl0V2l0aDpmdW5jdGlvbihhLGIpe3JldHVybiBhLnNwbGl0KHRoaXMsYil9LGdldFZlcnRpY2VzOmZ1bmN0aW9uKGEpe3JldHVybiEwPT09YT9bdGhpcy5jb21wb25lbnRzWzBdLHRoaXMuY29tcG9uZW50c1t0aGlzLmNvbXBvbmVudHMubGVuZ3RoLTFdXTohMT09PWE/dGhpcy5jb21wb25lbnRzLnNsaWNlKDEsdGhpcy5jb21wb25lbnRzLmxlbmd0aC0xKTp0aGlzLmNvbXBvbmVudHMuc2xpY2UoKX0sZGlzdGFuY2VUbzpmdW5jdGlvbihhLGIpe3ZhciBjPSEoYiYmITE9PT1iLmVkZ2UpJiZiJiZiLmRldGFpbHMsZCxlPXt9LGY9TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZO2lmKGEgaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KXtmb3IodmFyIGc9dGhpcy5nZXRTb3J0ZWRTZWdtZW50cygpLApoPWEueCxrPWEueSxsLG09MCxyPWcubGVuZ3RoO208cjsrK20paWYobD1nW21dLGQ9T3BlbkxheWVycy5HZW9tZXRyeS5kaXN0YW5jZVRvU2VnbWVudChhLGwpLGQuZGlzdGFuY2U8Zil7aWYoZj1kLmRpc3RhbmNlLGU9ZCwwPT09ZilicmVha31lbHNlIGlmKGwueDI+aCYmKGs+bC55MSYmazxsLnkyfHxrPGwueTEmJms+bC55MikpYnJlYWs7ZT1jP3tkaXN0YW5jZTplLmRpc3RhbmNlLHgwOmUueCx5MDplLnkseDE6aCx5MTprfTplLmRpc3RhbmNlfWVsc2UgaWYoYSBpbnN0YW5jZW9mIE9wZW5MYXllcnMuR2VvbWV0cnkuTGluZVN0cmluZyl7dmFyIGc9dGhpcy5nZXRTb3J0ZWRTZWdtZW50cygpLGg9YS5nZXRTb3J0ZWRTZWdtZW50cygpLHAsbixxPWgubGVuZ3RoLHM9e3BvaW50OiEwfSxtPTAscj1nLmxlbmd0aDthOmZvcig7bTxyOysrbSl7az1nW21dO2w9ay54MTtuPWsueTE7Zm9yKHZhciB0PTA7dDxxOysrdClpZihkPWhbdF0scD1PcGVuTGF5ZXJzLkdlb21ldHJ5LnNlZ21lbnRzSW50ZXJzZWN0KGssCmQscykpe2Y9MDtlPXtkaXN0YW5jZTowLHgwOnAueCx5MDpwLnkseDE6cC54LHkxOnAueX07YnJlYWsgYX1lbHNlIGQ9T3BlbkxheWVycy5HZW9tZXRyeS5kaXN0YW5jZVRvU2VnbWVudCh7eDpsLHk6bn0sZCksZC5kaXN0YW5jZTxmJiYoZj1kLmRpc3RhbmNlLGU9e2Rpc3RhbmNlOmYseDA6bCx5MDpuLHgxOmQueCx5MTpkLnl9KX1jfHwoZT1lLmRpc3RhbmNlKTswIT09ZiYmayYmKGQ9YS5kaXN0YW5jZVRvKG5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KGsueDIsay55MiksYiksbT1jP2QuZGlzdGFuY2U6ZCxtPGYmJihlPWM/e2Rpc3RhbmNlOmYseDA6ZC54MSx5MDpkLnkxLHgxOmQueDAseTE6ZC55MH06bSkpfWVsc2UgZT1hLmRpc3RhbmNlVG8odGhpcyxiKSxjJiYoZT17ZGlzdGFuY2U6ZS5kaXN0YW5jZSx4MDplLngxLHkwOmUueTEseDE6ZS54MCx5MTplLnkwfSk7cmV0dXJuIGV9LHNpbXBsaWZ5OmZ1bmN0aW9uKGEpe2lmKHRoaXMmJm51bGwhPT10aGlzKXt2YXIgYj10aGlzLmdldFZlcnRpY2VzKCk7CmlmKDM+Yi5sZW5ndGgpcmV0dXJuIHRoaXM7dmFyIGM9ZnVuY3Rpb24oYSxiLGQsayl7Zm9yKHZhciBsPTAsbT0wLHI9YixwO3I8ZDtyKyspe3A9YVtiXTt2YXIgbj1hW2RdLHE9YVtyXSxxPU1hdGguYWJzKDAuNSoocC54Km4ueStuLngqcS55K3EueCpwLnktbi54KnAueS1xLngqbi55LXAueCpxLnkpKTtwPU1hdGguc3FydChNYXRoLnBvdyhwLngtbi54LDIpK01hdGgucG93KHAueS1uLnksMikpO3A9MioocS9wKTtwPmwmJihsPXAsbT1yKX1sPmsmJm0hPWImJihlLnB1c2gobSksYyhhLGIsbSxrKSxjKGEsbSxkLGspKX0sZD1iLmxlbmd0aC0xLGU9W107ZS5wdXNoKDApO2ZvcihlLnB1c2goZCk7YlswXS5lcXVhbHMoYltkXSk7KWQtLSxlLnB1c2goZCk7YyhiLDAsZCxhKTthPVtdO2Uuc29ydChmdW5jdGlvbihhLGIpe3JldHVybiBhLWJ9KTtmb3IoZD0wO2Q8ZS5sZW5ndGg7ZCsrKWEucHVzaChiW2VbZF1dKTtyZXR1cm4gbmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuTGluZVN0cmluZyhhKX1yZXR1cm4gdGhpc30sCkNMQVNTX05BTUU6Ik9wZW5MYXllcnMuR2VvbWV0cnkuTGluZVN0cmluZyJ9KTtPcGVuTGF5ZXJzLkdlb21ldHJ5LkxpbmVhclJpbmc9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkdlb21ldHJ5LkxpbmVTdHJpbmcse2NvbXBvbmVudFR5cGVzOlsiT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludCJdLGFkZENvbXBvbmVudDpmdW5jdGlvbihhLGIpe3ZhciBjPSExLGQ9dGhpcy5jb21wb25lbnRzLnBvcCgpO251bGw9PWImJmEuZXF1YWxzKGQpfHwoYz1PcGVuTGF5ZXJzLkdlb21ldHJ5LkNvbGxlY3Rpb24ucHJvdG90eXBlLmFkZENvbXBvbmVudC5hcHBseSh0aGlzLGFyZ3VtZW50cykpO09wZW5MYXllcnMuR2VvbWV0cnkuQ29sbGVjdGlvbi5wcm90b3R5cGUuYWRkQ29tcG9uZW50LmFwcGx5KHRoaXMsW3RoaXMuY29tcG9uZW50c1swXV0pO3JldHVybiBjfSxyZW1vdmVDb21wb25lbnQ6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jb21wb25lbnRzJiYzPHRoaXMuY29tcG9uZW50cy5sZW5ndGg7YiYmKHRoaXMuY29tcG9uZW50cy5wb3AoKSxPcGVuTGF5ZXJzLkdlb21ldHJ5LkNvbGxlY3Rpb24ucHJvdG90eXBlLnJlbW92ZUNvbXBvbmVudC5hcHBseSh0aGlzLAphcmd1bWVudHMpLE9wZW5MYXllcnMuR2VvbWV0cnkuQ29sbGVjdGlvbi5wcm90b3R5cGUuYWRkQ29tcG9uZW50LmFwcGx5KHRoaXMsW3RoaXMuY29tcG9uZW50c1swXV0pKTtyZXR1cm4gYn0sbW92ZTpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz0wLGQ9dGhpcy5jb21wb25lbnRzLmxlbmd0aDtjPGQtMTtjKyspdGhpcy5jb21wb25lbnRzW2NdLm1vdmUoYSxiKX0scm90YXRlOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTAsZD10aGlzLmNvbXBvbmVudHMubGVuZ3RoO2M8ZC0xOysrYyl0aGlzLmNvbXBvbmVudHNbY10ucm90YXRlKGEsYil9LHJlc2l6ZTpmdW5jdGlvbihhLGIsYyl7Zm9yKHZhciBkPTAsZT10aGlzLmNvbXBvbmVudHMubGVuZ3RoO2Q8ZS0xOysrZCl0aGlzLmNvbXBvbmVudHNbZF0ucmVzaXplKGEsYixjKTtyZXR1cm4gdGhpc30sdHJhbnNmb3JtOmZ1bmN0aW9uKGEsYil7aWYoYSYmYil7Zm9yKHZhciBjPTAsZD10aGlzLmNvbXBvbmVudHMubGVuZ3RoO2M8ZC0xO2MrKyl0aGlzLmNvbXBvbmVudHNbY10udHJhbnNmb3JtKGEsCmIpO3RoaXMuYm91bmRzPW51bGx9cmV0dXJuIHRoaXN9LGdldENlbnRyb2lkOmZ1bmN0aW9uKCl7aWYodGhpcy5jb21wb25lbnRzKXt2YXIgYT10aGlzLmNvbXBvbmVudHMubGVuZ3RoO2lmKDA8YSYmMj49YSlyZXR1cm4gdGhpcy5jb21wb25lbnRzWzBdLmNsb25lKCk7aWYoMjxhKXt2YXIgYj0wLGM9MCxkPXRoaXMuY29tcG9uZW50c1swXS54LGU9dGhpcy5jb21wb25lbnRzWzBdLnksZj0tMSp0aGlzLmdldEFyZWEoKTtpZigwIT1mKXtmb3IodmFyIGc9MDtnPGEtMTtnKyspdmFyIGg9dGhpcy5jb21wb25lbnRzW2ddLGs9dGhpcy5jb21wb25lbnRzW2crMV0sYj1iKyhoLngray54LTIqZCkqKChoLngtZCkqKGsueS1lKS0oay54LWQpKihoLnktZSkpLGM9YysoaC55K2sueS0yKmUpKigoaC54LWQpKihrLnktZSktKGsueC1kKSooaC55LWUpKTtiPWQrYi8oNipmKTthPWUrYy8oNipmKX1lbHNle2ZvcihnPTA7ZzxhLTE7ZysrKWIrPXRoaXMuY29tcG9uZW50c1tnXS54LGMrPXRoaXMuY29tcG9uZW50c1tnXS55OwpiLz1hLTE7YT1jLyhhLTEpfXJldHVybiBuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludChiLGEpfXJldHVybiBudWxsfX0sZ2V0QXJlYTpmdW5jdGlvbigpe3ZhciBhPTA7aWYodGhpcy5jb21wb25lbnRzJiYyPHRoaXMuY29tcG9uZW50cy5sZW5ndGgpe2Zvcih2YXIgYj1hPTAsYz10aGlzLmNvbXBvbmVudHMubGVuZ3RoO2I8Yy0xO2IrKyl2YXIgZD10aGlzLmNvbXBvbmVudHNbYl0sZT10aGlzLmNvbXBvbmVudHNbYisxXSxhPWErKGQueCtlLngpKihlLnktZC55KTthPS1hLzJ9cmV0dXJuIGF9LGdldEdlb2Rlc2ljQXJlYTpmdW5jdGlvbihhKXt2YXIgYj10aGlzO2lmKGEpe3ZhciBjPW5ldyBPcGVuTGF5ZXJzLlByb2plY3Rpb24oIkVQU0c6NDMyNiIpO2MuZXF1YWxzKGEpfHwoYj10aGlzLmNsb25lKCkudHJhbnNmb3JtKGEsYykpfWE9MDtjPWIuY29tcG9uZW50cyYmYi5jb21wb25lbnRzLmxlbmd0aDtpZigyPGMpe2Zvcih2YXIgZCxlLGY9MDtmPGMtMTtmKyspZD1iLmNvbXBvbmVudHNbZl0sCmU9Yi5jb21wb25lbnRzW2YrMV0sYSs9T3BlbkxheWVycy5VdGlsLnJhZChlLngtZC54KSooMitNYXRoLnNpbihPcGVuTGF5ZXJzLlV0aWwucmFkKGQueSkpK01hdGguc2luKE9wZW5MYXllcnMuVXRpbC5yYWQoZS55KSkpO2E9NDA2ODA2MzE1OTA3NjkqYS8yfXJldHVybiBhfSxjb250YWluc1BvaW50OmZ1bmN0aW9uKGEpe3ZhciBiPU9wZW5MYXllcnMuTnVtYmVyLmxpbWl0U2lnRGlncyxjPWIoYS54LDE0KTthPWIoYS55LDE0KTtmb3IodmFyIGQ9dGhpcy5jb21wb25lbnRzLmxlbmd0aC0xLGUsZixnLGgsayxsPTAsbT0wO208ZDsrK20paWYoZT10aGlzLmNvbXBvbmVudHNbbV0sZz1iKGUueCwxNCksZT1iKGUueSwxNCksZj10aGlzLmNvbXBvbmVudHNbbSsxXSxoPWIoZi54LDE0KSxmPWIoZi55LDE0KSxlPT1mKXtpZihhPT1lJiYoZzw9aCYmYz49ZyYmYzw9aHx8Zz49aCYmYzw9ZyYmYz49aCkpe2w9LTE7YnJlYWt9fWVsc2V7az1iKChhLWYpKigoaC1nKS8oZi1lKSkraCwxNCk7aWYoaz09CmMmJihlPGYmJmE+PWUmJmE8PWZ8fGU+ZiYmYTw9ZSYmYT49Zikpe2w9LTE7YnJlYWt9azw9Y3x8ZyE9aCYmKGs8TWF0aC5taW4oZyxoKXx8az5NYXRoLm1heChnLGgpKXx8KGU8ZiYmYT49ZSYmYTxmfHxlPmYmJmE8ZSYmYT49ZikmJisrbH1yZXR1cm4tMT09bD8xOiEhKGwmMSl9LGludGVyc2VjdHM6ZnVuY3Rpb24oYSl7dmFyIGI9ITE7aWYoIk9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQiPT1hLkNMQVNTX05BTUUpYj10aGlzLmNvbnRhaW5zUG9pbnQoYSk7ZWxzZSBpZigiT3BlbkxheWVycy5HZW9tZXRyeS5MaW5lU3RyaW5nIj09YS5DTEFTU19OQU1FKWI9YS5pbnRlcnNlY3RzKHRoaXMpO2Vsc2UgaWYoIk9wZW5MYXllcnMuR2VvbWV0cnkuTGluZWFyUmluZyI9PWEuQ0xBU1NfTkFNRSliPU9wZW5MYXllcnMuR2VvbWV0cnkuTGluZVN0cmluZy5wcm90b3R5cGUuaW50ZXJzZWN0cy5hcHBseSh0aGlzLFthXSk7ZWxzZSBmb3IodmFyIGM9MCxkPWEuY29tcG9uZW50cy5sZW5ndGg7YzwKZCYmIShiPWEuY29tcG9uZW50c1tjXS5pbnRlcnNlY3RzKHRoaXMpKTsrK2MpO3JldHVybiBifSxnZXRWZXJ0aWNlczpmdW5jdGlvbihhKXtyZXR1cm4hMD09PWE/W106dGhpcy5jb21wb25lbnRzLnNsaWNlKDAsdGhpcy5jb21wb25lbnRzLmxlbmd0aC0xKX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5HZW9tZXRyeS5MaW5lYXJSaW5nIn0pO09wZW5MYXllcnMuTGF5ZXIuSFRUUFJlcXVlc3Q9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkxheWVyLHtVUkxfSEFTSF9GQUNUT1I6KE1hdGguc3FydCg1KS0xKS8yLHVybDpudWxsLHBhcmFtczpudWxsLHJlcHJvamVjdDohMSxpbml0aWFsaXplOmZ1bmN0aW9uKGEsYixjLGQpe09wZW5MYXllcnMuTGF5ZXIucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxbYSxkXSk7dGhpcy51cmw9Yjt0aGlzLnBhcmFtc3x8KHRoaXMucGFyYW1zPU9wZW5MYXllcnMuVXRpbC5leHRlbmQoe30sYykpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5wYXJhbXM9dGhpcy51cmw9bnVsbDtPcGVuTGF5ZXJzLkxheWVyLnByb3RvdHlwZS5kZXN0cm95LmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sY2xvbmU6ZnVuY3Rpb24oYSl7bnVsbD09YSYmKGE9bmV3IE9wZW5MYXllcnMuTGF5ZXIuSFRUUFJlcXVlc3QodGhpcy5uYW1lLHRoaXMudXJsLHRoaXMucGFyYW1zLHRoaXMuZ2V0T3B0aW9ucygpKSk7CnJldHVybiBhPU9wZW5MYXllcnMuTGF5ZXIucHJvdG90eXBlLmNsb25lLmFwcGx5KHRoaXMsW2FdKX0sc2V0VXJsOmZ1bmN0aW9uKGEpe3RoaXMudXJsPWF9LG1lcmdlTmV3UGFyYW1zOmZ1bmN0aW9uKGEpe3RoaXMucGFyYW1zPU9wZW5MYXllcnMuVXRpbC5leHRlbmQodGhpcy5wYXJhbXMsYSk7YT10aGlzLnJlZHJhdygpO251bGwhPXRoaXMubWFwJiZ0aGlzLm1hcC5ldmVudHMudHJpZ2dlckV2ZW50KCJjaGFuZ2VsYXllciIse2xheWVyOnRoaXMscHJvcGVydHk6InBhcmFtcyJ9KTtyZXR1cm4gYX0scmVkcmF3OmZ1bmN0aW9uKGEpe3JldHVybiBhP3RoaXMubWVyZ2VOZXdQYXJhbXMoe19vbFNhbHQ6TWF0aC5yYW5kb20oKX0pOk9wZW5MYXllcnMuTGF5ZXIucHJvdG90eXBlLnJlZHJhdy5hcHBseSh0aGlzLFtdKX0sc2VsZWN0VXJsOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTEsZD0wLGU9YS5sZW5ndGg7ZDxlO2QrKyljKj1hLmNoYXJDb2RlQXQoZCkqdGhpcy5VUkxfSEFTSF9GQUNUT1IsCmMtPU1hdGguZmxvb3IoYyk7cmV0dXJuIGJbTWF0aC5mbG9vcihjKmIubGVuZ3RoKV19LGdldEZ1bGxSZXF1ZXN0U3RyaW5nOmZ1bmN0aW9uKGEsYil7dmFyIGM9Ynx8dGhpcy51cmwsZD1PcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHt9LHRoaXMucGFyYW1zKSxkPU9wZW5MYXllcnMuVXRpbC5leHRlbmQoZCxhKSxlPU9wZW5MYXllcnMuVXRpbC5nZXRQYXJhbWV0ZXJTdHJpbmcoZCk7T3BlbkxheWVycy5VdGlsLmlzQXJyYXkoYykmJihjPXRoaXMuc2VsZWN0VXJsKGUsYykpO3ZhciBlPU9wZW5MYXllcnMuVXRpbC51cHBlckNhc2VPYmplY3QoT3BlbkxheWVycy5VdGlsLmdldFBhcmFtZXRlcnMoYykpLGY7Zm9yKGYgaW4gZClmLnRvVXBwZXJDYXNlKClpbiBlJiZkZWxldGUgZFtmXTtlPU9wZW5MYXllcnMuVXRpbC5nZXRQYXJhbWV0ZXJTdHJpbmcoZCk7cmV0dXJuIE9wZW5MYXllcnMuVXRpbC51cmxBcHBlbmQoYyxlKX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5MYXllci5IVFRQUmVxdWVzdCJ9KTtPcGVuTGF5ZXJzLlRpbGU9T3BlbkxheWVycy5DbGFzcyh7ZXZlbnRzOm51bGwsZXZlbnRMaXN0ZW5lcnM6bnVsbCxpZDpudWxsLGxheWVyOm51bGwsdXJsOm51bGwsYm91bmRzOm51bGwsc2l6ZTpudWxsLHBvc2l0aW9uOm51bGwsaXNMb2FkaW5nOiExLGluaXRpYWxpemU6ZnVuY3Rpb24oYSxiLGMsZCxlLGYpe3RoaXMubGF5ZXI9YTt0aGlzLnBvc2l0aW9uPWIuY2xvbmUoKTt0aGlzLnNldEJvdW5kcyhjKTt0aGlzLnVybD1kO2UmJih0aGlzLnNpemU9ZS5jbG9uZSgpKTt0aGlzLmlkPU9wZW5MYXllcnMuVXRpbC5jcmVhdGVVbmlxdWVJRCgiVGlsZV8iKTtPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHRoaXMsZik7dGhpcy5ldmVudHM9bmV3IE9wZW5MYXllcnMuRXZlbnRzKHRoaXMpO2lmKHRoaXMuZXZlbnRMaXN0ZW5lcnMgaW5zdGFuY2VvZiBPYmplY3QpdGhpcy5ldmVudHMub24odGhpcy5ldmVudExpc3RlbmVycyl9LHVubG9hZDpmdW5jdGlvbigpe3RoaXMuaXNMb2FkaW5nJiYodGhpcy5pc0xvYWRpbmc9CiExLHRoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgidW5sb2FkIikpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5wb3NpdGlvbj10aGlzLnNpemU9dGhpcy5ib3VuZHM9dGhpcy5sYXllcj1udWxsO3RoaXMuZXZlbnRMaXN0ZW5lcnMmJnRoaXMuZXZlbnRzLnVuKHRoaXMuZXZlbnRMaXN0ZW5lcnMpO3RoaXMuZXZlbnRzLmRlc3Ryb3koKTt0aGlzLmV2ZW50cz10aGlzLmV2ZW50TGlzdGVuZXJzPW51bGx9LGRyYXc6ZnVuY3Rpb24oYSl7YXx8dGhpcy5jbGVhcigpO3ZhciBiPXRoaXMuc2hvdWxkRHJhdygpO2ImJighYSYmITE9PT10aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoImJlZm9yZWRyYXciKSkmJihiPW51bGwpO3JldHVybiBifSxzaG91bGREcmF3OmZ1bmN0aW9uKCl7dmFyIGE9ITEsYj10aGlzLmxheWVyLm1heEV4dGVudDtpZihiKXt2YXIgYz10aGlzLmxheWVyLm1hcCxjPWMuYmFzZUxheWVyLndyYXBEYXRlTGluZSYmYy5nZXRNYXhFeHRlbnQoKTt0aGlzLmJvdW5kcy5pbnRlcnNlY3RzQm91bmRzKGIsCntpbmNsdXNpdmU6ITEsd29ybGRCb3VuZHM6Y30pJiYoYT0hMCl9cmV0dXJuIGF8fHRoaXMubGF5ZXIuZGlzcGxheU91dHNpZGVNYXhFeHRlbnR9LHNldEJvdW5kczpmdW5jdGlvbihhKXthPWEuY2xvbmUoKTtpZih0aGlzLmxheWVyLm1hcC5iYXNlTGF5ZXIud3JhcERhdGVMaW5lKXt2YXIgYj10aGlzLmxheWVyLm1hcC5nZXRNYXhFeHRlbnQoKSxjPXRoaXMubGF5ZXIubWFwLmdldFJlc29sdXRpb24oKTthPWEud3JhcERhdGVMaW5lKGIse2xlZnRUb2xlcmFuY2U6YyxyaWdodFRvbGVyYW5jZTpjfSl9dGhpcy5ib3VuZHM9YX0sbW92ZVRvOmZ1bmN0aW9uKGEsYixjKXtudWxsPT1jJiYoYz0hMCk7dGhpcy5zZXRCb3VuZHMoYSk7dGhpcy5wb3NpdGlvbj1iLmNsb25lKCk7YyYmdGhpcy5kcmF3KCl9LGNsZWFyOmZ1bmN0aW9uKGEpe30sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5UaWxlIn0pO09wZW5MYXllcnMuVGlsZS5JbWFnZT1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuVGlsZSx7dXJsOm51bGwsaW1nRGl2Om51bGwsZnJhbWU6bnVsbCxpbWFnZVJlbG9hZEF0dGVtcHRzOm51bGwsbGF5ZXJBbHBoYUhhY2s6bnVsbCxhc3luY1JlcXVlc3RJZDpudWxsLG1heEdldFVybExlbmd0aDpudWxsLGNhbnZhc0NvbnRleHQ6bnVsbCxjcm9zc09yaWdpbktleXdvcmQ6bnVsbCxpbml0aWFsaXplOmZ1bmN0aW9uKGEsYixjLGQsZSxmKXtPcGVuTGF5ZXJzLlRpbGUucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMudXJsPWQ7dGhpcy5sYXllckFscGhhSGFjaz10aGlzLmxheWVyLmFscGhhJiZPcGVuTGF5ZXJzLlV0aWwuYWxwaGFIYWNrKCk7aWYobnVsbCE9dGhpcy5tYXhHZXRVcmxMZW5ndGh8fHRoaXMubGF5ZXIuZ3V0dGVyfHx0aGlzLmxheWVyQWxwaGFIYWNrKXRoaXMuZnJhbWU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2IiksdGhpcy5mcmFtZS5zdHlsZS5wb3NpdGlvbj0KImFic29sdXRlIix0aGlzLmZyYW1lLnN0eWxlLm92ZXJmbG93PSJoaWRkZW4iO251bGwhPXRoaXMubWF4R2V0VXJsTGVuZ3RoJiZPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHRoaXMsT3BlbkxheWVycy5UaWxlLkltYWdlLklGcmFtZSl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmltZ0RpdiYmKHRoaXMuY2xlYXIoKSx0aGlzLmZyYW1lPXRoaXMuaW1nRGl2PW51bGwpO3RoaXMuYXN5bmNSZXF1ZXN0SWQ9bnVsbDtPcGVuTGF5ZXJzLlRpbGUucHJvdG90eXBlLmRlc3Ryb3kuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxkcmF3OmZ1bmN0aW9uKCl7dmFyIGE9T3BlbkxheWVycy5UaWxlLnByb3RvdHlwZS5kcmF3LmFwcGx5KHRoaXMsYXJndW1lbnRzKTthPyh0aGlzLmxheWVyIT10aGlzLmxheWVyLm1hcC5iYXNlTGF5ZXImJnRoaXMubGF5ZXIucmVwcm9qZWN0JiYodGhpcy5ib3VuZHM9dGhpcy5nZXRCb3VuZHNGcm9tQmFzZUxheWVyKHRoaXMucG9zaXRpb24pKSx0aGlzLmlzTG9hZGluZz90aGlzLl9sb2FkRXZlbnQ9CiJyZWxvYWQiOih0aGlzLmlzTG9hZGluZz0hMCx0aGlzLl9sb2FkRXZlbnQ9ImxvYWRzdGFydCIpLHRoaXMucmVuZGVyVGlsZSgpLHRoaXMucG9zaXRpb25UaWxlKCkpOiExPT09YSYmdGhpcy51bmxvYWQoKTtyZXR1cm4gYX0scmVuZGVyVGlsZTpmdW5jdGlvbigpe2lmKHRoaXMubGF5ZXIuYXN5bmMpe3ZhciBhPXRoaXMuYXN5bmNSZXF1ZXN0SWQ9KHRoaXMuYXN5bmNSZXF1ZXN0SWR8fDApKzE7dGhpcy5sYXllci5nZXRVUkxhc3luYyh0aGlzLmJvdW5kcyxmdW5jdGlvbihiKXthPT10aGlzLmFzeW5jUmVxdWVzdElkJiYodGhpcy51cmw9Yix0aGlzLmluaXRJbWFnZSgpKX0sdGhpcyl9ZWxzZSB0aGlzLnVybD10aGlzLmxheWVyLmdldFVSTCh0aGlzLmJvdW5kcyksdGhpcy5pbml0SW1hZ2UoKX0scG9zaXRpb25UaWxlOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5nZXRUaWxlKCkuc3R5bGUsYj10aGlzLmZyYW1lP3RoaXMuc2l6ZTp0aGlzLmxheWVyLmdldEltYWdlU2l6ZSh0aGlzLmJvdW5kcyksCmM9MTt0aGlzLmxheWVyIGluc3RhbmNlb2YgT3BlbkxheWVycy5MYXllci5HcmlkJiYoYz10aGlzLmxheWVyLmdldFNlcnZlclJlc29sdXRpb24oKS90aGlzLmxheWVyLm1hcC5nZXRSZXNvbHV0aW9uKCkpO2EubGVmdD10aGlzLnBvc2l0aW9uLngrInB4IjthLnRvcD10aGlzLnBvc2l0aW9uLnkrInB4IjthLndpZHRoPU1hdGgucm91bmQoYypiLncpKyJweCI7YS5oZWlnaHQ9TWF0aC5yb3VuZChjKmIuaCkrInB4In0sY2xlYXI6ZnVuY3Rpb24oKXtPcGVuTGF5ZXJzLlRpbGUucHJvdG90eXBlLmNsZWFyLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt2YXIgYT10aGlzLmltZ0RpdjtpZihhKXt2YXIgYj10aGlzLmdldFRpbGUoKTtiLnBhcmVudE5vZGU9PT10aGlzLmxheWVyLmRpdiYmdGhpcy5sYXllci5kaXYucmVtb3ZlQ2hpbGQoYik7dGhpcy5zZXRJbWdTcmMoKTshMD09PXRoaXMubGF5ZXJBbHBoYUhhY2smJihhLnN0eWxlLmZpbHRlcj0iIik7T3BlbkxheWVycy5FbGVtZW50LnJlbW92ZUNsYXNzKGEsCiJvbEltYWdlTG9hZEVycm9yIil9dGhpcy5jYW52YXNDb250ZXh0PW51bGx9LGdldEltYWdlOmZ1bmN0aW9uKCl7aWYoIXRoaXMuaW1nRGl2KXt0aGlzLmltZ0Rpdj1PcGVuTGF5ZXJzLlRpbGUuSW1hZ2UuSU1BR0UuY2xvbmVOb2RlKCExKTt2YXIgYT10aGlzLmltZ0Rpdi5zdHlsZTtpZih0aGlzLmZyYW1lKXt2YXIgYj0wLGM9MDt0aGlzLmxheWVyLmd1dHRlciYmKGI9MTAwKih0aGlzLmxheWVyLmd1dHRlci90aGlzLmxheWVyLnRpbGVTaXplLncpLGM9MTAwKih0aGlzLmxheWVyLmd1dHRlci90aGlzLmxheWVyLnRpbGVTaXplLmgpKTthLmxlZnQ9LWIrIiUiO2EudG9wPS1jKyIlIjthLndpZHRoPTIqYisxMDArIiUiO2EuaGVpZ2h0PTIqYysxMDArIiUifWEudmlzaWJpbGl0eT0iaGlkZGVuIjthLm9wYWNpdHk9MDsxPnRoaXMubGF5ZXIub3BhY2l0eSYmKGEuZmlsdGVyPSJhbHBoYShvcGFjaXR5PSIrMTAwKnRoaXMubGF5ZXIub3BhY2l0eSsiKSIpO2EucG9zaXRpb249ImFic29sdXRlIjsKdGhpcy5sYXllckFscGhhSGFjayYmKGEucGFkZGluZ1RvcD1hLmhlaWdodCxhLmhlaWdodD0iMCIsYS53aWR0aD0iMTAwJSIpO3RoaXMuZnJhbWUmJnRoaXMuZnJhbWUuYXBwZW5kQ2hpbGQodGhpcy5pbWdEaXYpfXJldHVybiB0aGlzLmltZ0Rpdn0sc2V0SW1hZ2U6ZnVuY3Rpb24oYSl7dGhpcy5pbWdEaXY9YX0saW5pdEltYWdlOmZ1bmN0aW9uKCl7aWYodGhpcy51cmx8fHRoaXMuaW1nRGl2KXt0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoImJlZm9yZWxvYWQiKTt0aGlzLmxheWVyLmRpdi5hcHBlbmRDaGlsZCh0aGlzLmdldFRpbGUoKSk7dGhpcy5ldmVudHMudHJpZ2dlckV2ZW50KHRoaXMuX2xvYWRFdmVudCk7dmFyIGE9dGhpcy5nZXRJbWFnZSgpLGI9YS5nZXRBdHRyaWJ1dGUoInNyYyIpfHwiIjt0aGlzLnVybCYmT3BlbkxheWVycy5VdGlsLmlzRXF1aXZhbGVudFVybChiLHRoaXMudXJsKT90aGlzLl9sb2FkVGltZW91dD13aW5kb3cuc2V0VGltZW91dChPcGVuTGF5ZXJzLkZ1bmN0aW9uLmJpbmQodGhpcy5vbkltYWdlTG9hZCwKdGhpcyksMCk6KHRoaXMuc3RvcExvYWRpbmcoKSx0aGlzLmNyb3NzT3JpZ2luS2V5d29yZCYmYS5yZW1vdmVBdHRyaWJ1dGUoImNyb3Nzb3JpZ2luIiksT3BlbkxheWVycy5FdmVudC5vYnNlcnZlKGEsImxvYWQiLE9wZW5MYXllcnMuRnVuY3Rpb24uYmluZCh0aGlzLm9uSW1hZ2VMb2FkLHRoaXMpKSxPcGVuTGF5ZXJzLkV2ZW50Lm9ic2VydmUoYSwiZXJyb3IiLE9wZW5MYXllcnMuRnVuY3Rpb24uYmluZCh0aGlzLm9uSW1hZ2VFcnJvcix0aGlzKSksdGhpcy5pbWFnZVJlbG9hZEF0dGVtcHRzPTAsdGhpcy5zZXRJbWdTcmModGhpcy51cmwpKX1lbHNlIHRoaXMuaXNMb2FkaW5nPSExfSxzZXRJbWdTcmM6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5pbWdEaXY7YT8oYi5zdHlsZS52aXNpYmlsaXR5PSJoaWRkZW4iLGIuc3R5bGUub3BhY2l0eT0wLHRoaXMuY3Jvc3NPcmlnaW5LZXl3b3JkJiYoImRhdGE6IiE9PWEuc3Vic3RyKDAsNSk/Yi5zZXRBdHRyaWJ1dGUoImNyb3Nzb3JpZ2luIix0aGlzLmNyb3NzT3JpZ2luS2V5d29yZCk6CmIucmVtb3ZlQXR0cmlidXRlKCJjcm9zc29yaWdpbiIpKSxiLnNyYz1hKToodGhpcy5zdG9wTG9hZGluZygpLHRoaXMuaW1nRGl2PW51bGwsYi5wYXJlbnROb2RlJiZiLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYikpfSxnZXRUaWxlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZnJhbWU/dGhpcy5mcmFtZTp0aGlzLmdldEltYWdlKCl9LGNyZWF0ZUJhY2tCdWZmZXI6ZnVuY3Rpb24oKXtpZih0aGlzLmltZ0RpdiYmIXRoaXMuaXNMb2FkaW5nKXt2YXIgYTt0aGlzLmZyYW1lPyhhPXRoaXMuZnJhbWUuY2xvbmVOb2RlKCExKSxhLmFwcGVuZENoaWxkKHRoaXMuaW1nRGl2KSk6YT10aGlzLmltZ0Rpdjt0aGlzLmltZ0Rpdj1udWxsO3JldHVybiBhfX0sb25JbWFnZUxvYWQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmltZ0Rpdjt0aGlzLnN0b3BMb2FkaW5nKCk7YS5zdHlsZS52aXNpYmlsaXR5PSJpbmhlcml0IjthLnN0eWxlLm9wYWNpdHk9dGhpcy5sYXllci5vcGFjaXR5O3RoaXMuaXNMb2FkaW5nPQohMTt0aGlzLmNhbnZhc0NvbnRleHQ9bnVsbDt0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoImxvYWRlbmQiKTshMD09PXRoaXMubGF5ZXJBbHBoYUhhY2smJihhLnN0eWxlLmZpbHRlcj0icHJvZ2lkOkRYSW1hZ2VUcmFuc2Zvcm0uTWljcm9zb2Z0LkFscGhhSW1hZ2VMb2FkZXIoc3JjPSciK2Euc3JjKyInLCBzaXppbmdNZXRob2Q9J3NjYWxlJykiKX0sb25JbWFnZUVycm9yOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5pbWdEaXY7bnVsbCE9YS5zcmMmJih0aGlzLmltYWdlUmVsb2FkQXR0ZW1wdHMrKyx0aGlzLmltYWdlUmVsb2FkQXR0ZW1wdHM8PU9wZW5MYXllcnMuSU1BR0VfUkVMT0FEX0FUVEVNUFRTP3RoaXMuc2V0SW1nU3JjKHRoaXMubGF5ZXIuZ2V0VVJMKHRoaXMuYm91bmRzKSk6KE9wZW5MYXllcnMuRWxlbWVudC5hZGRDbGFzcyhhLCJvbEltYWdlTG9hZEVycm9yIiksdGhpcy5ldmVudHMudHJpZ2dlckV2ZW50KCJsb2FkZXJyb3IiKSx0aGlzLm9uSW1hZ2VMb2FkKCkpKX0sc3RvcExvYWRpbmc6ZnVuY3Rpb24oKXtPcGVuTGF5ZXJzLkV2ZW50LnN0b3BPYnNlcnZpbmdFbGVtZW50KHRoaXMuaW1nRGl2KTsKd2luZG93LmNsZWFyVGltZW91dCh0aGlzLl9sb2FkVGltZW91dCk7ZGVsZXRlIHRoaXMuX2xvYWRUaW1lb3V0fSxnZXRDYW52YXNDb250ZXh0OmZ1bmN0aW9uKCl7aWYoT3BlbkxheWVycy5DQU5WQVNfU1VQUE9SVEVEJiZ0aGlzLmltZ0RpdiYmIXRoaXMuaXNMb2FkaW5nKXtpZighdGhpcy5jYW52YXNDb250ZXh0KXt2YXIgYT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJjYW52YXMiKTthLndpZHRoPXRoaXMuc2l6ZS53O2EuaGVpZ2h0PXRoaXMuc2l6ZS5oO3RoaXMuY2FudmFzQ29udGV4dD1hLmdldENvbnRleHQoIjJkIik7dGhpcy5jYW52YXNDb250ZXh0LmRyYXdJbWFnZSh0aGlzLmltZ0RpdiwwLDApfXJldHVybiB0aGlzLmNhbnZhc0NvbnRleHR9fSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLlRpbGUuSW1hZ2UifSk7Ck9wZW5MYXllcnMuVGlsZS5JbWFnZS5JTUFHRT1mdW5jdGlvbigpe3ZhciBhPW5ldyBJbWFnZTthLmNsYXNzTmFtZT0ib2xUaWxlSW1hZ2UiO2EuZ2FsbGVyeUltZz0ibm8iO3JldHVybiBhfSgpO09wZW5MYXllcnMuTGF5ZXIuR3JpZD1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuTGF5ZXIuSFRUUFJlcXVlc3Qse3RpbGVTaXplOm51bGwsdGlsZU9yaWdpbkNvcm5lcjoiYmwiLHRpbGVPcmlnaW46bnVsbCx0aWxlT3B0aW9uczpudWxsLHRpbGVDbGFzczpPcGVuTGF5ZXJzLlRpbGUuSW1hZ2UsZ3JpZDpudWxsLHNpbmdsZVRpbGU6ITEscmF0aW86MS41LGJ1ZmZlcjowLHRyYW5zaXRpb25FZmZlY3Q6InJlc2l6ZSIsbnVtTG9hZGluZ1RpbGVzOjAsc2VydmVyUmVzb2x1dGlvbnM6bnVsbCxsb2FkaW5nOiExLGJhY2tCdWZmZXI6bnVsbCxncmlkUmVzb2x1dGlvbjpudWxsLGJhY2tCdWZmZXJSZXNvbHV0aW9uOm51bGwsYmFja0J1ZmZlckxvbkxhdDpudWxsLGJhY2tCdWZmZXJUaW1lcklkOm51bGwscmVtb3ZlQmFja0J1ZmZlckRlbGF5Om51bGwsY2xhc3NOYW1lOm51bGwsZ3JpZExheW91dDpudWxsLHJvd1NpZ246bnVsbCx0cmFuc2l0aW9uZW5kRXZlbnRzOlsidHJhbnNpdGlvbmVuZCIsCiJ3ZWJraXRUcmFuc2l0aW9uRW5kIiwib3RyYW5zaXRpb25lbmQiLCJvVHJhbnNpdGlvbkVuZCJdLGluaXRpYWxpemU6ZnVuY3Rpb24oYSxiLGMsZCl7T3BlbkxheWVycy5MYXllci5IVFRQUmVxdWVzdC5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5ncmlkPVtdO3RoaXMuX3JlbW92ZUJhY2tCdWZmZXI9T3BlbkxheWVycy5GdW5jdGlvbi5iaW5kKHRoaXMucmVtb3ZlQmFja0J1ZmZlcix0aGlzKTt0aGlzLmluaXRQcm9wZXJ0aWVzKCk7dGhpcy5yb3dTaWduPSJ0Ij09PXRoaXMudGlsZU9yaWdpbkNvcm5lci5zdWJzdHIoMCwxKT8xOi0xfSxpbml0UHJvcGVydGllczpmdW5jdGlvbigpe3ZvaWQgMD09PXRoaXMub3B0aW9ucy5yZW1vdmVCYWNrQnVmZmVyRGVsYXkmJih0aGlzLnJlbW92ZUJhY2tCdWZmZXJEZWxheT10aGlzLnNpbmdsZVRpbGU/MDoyNTAwKTt2b2lkIDA9PT10aGlzLm9wdGlvbnMuY2xhc3NOYW1lJiYodGhpcy5jbGFzc05hbWU9dGhpcy5zaW5nbGVUaWxlPwoib2xMYXllckdyaWRTaW5nbGVUaWxlIjoib2xMYXllckdyaWQiKX0sc2V0TWFwOmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuTGF5ZXIuSFRUUFJlcXVlc3QucHJvdG90eXBlLnNldE1hcC5jYWxsKHRoaXMsYSk7T3BlbkxheWVycy5FbGVtZW50LmFkZENsYXNzKHRoaXMuZGl2LHRoaXMuY2xhc3NOYW1lKX0scmVtb3ZlTWFwOmZ1bmN0aW9uKGEpe3RoaXMucmVtb3ZlQmFja0J1ZmZlcigpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5yZW1vdmVCYWNrQnVmZmVyKCk7dGhpcy5jbGVhckdyaWQoKTt0aGlzLnRpbGVTaXplPXRoaXMuZ3JpZD1udWxsO09wZW5MYXllcnMuTGF5ZXIuSFRUUFJlcXVlc3QucHJvdG90eXBlLmRlc3Ryb3kuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxjbGVhckdyaWQ6ZnVuY3Rpb24oKXtpZih0aGlzLmdyaWQpe2Zvcih2YXIgYT0wLGI9dGhpcy5ncmlkLmxlbmd0aDthPGI7YSsrKWZvcih2YXIgYz10aGlzLmdyaWRbYV0sZD0wLGU9Yy5sZW5ndGg7ZDxlO2QrKyl0aGlzLmRlc3Ryb3lUaWxlKGNbZF0pOwp0aGlzLmdyaWQ9W107dGhpcy5ncmlkTGF5b3V0PXRoaXMuZ3JpZFJlc29sdXRpb249bnVsbH19LGFkZE9wdGlvbnM6ZnVuY3Rpb24oYSxiKXt2YXIgYz12b2lkIDAhPT1hLnNpbmdsZVRpbGUmJmEuc2luZ2xlVGlsZSE9PXRoaXMuc2luZ2xlVGlsZTtPcGVuTGF5ZXJzLkxheWVyLkhUVFBSZXF1ZXN0LnByb3RvdHlwZS5hZGRPcHRpb25zLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLm1hcCYmYyYmKHRoaXMuaW5pdFByb3BlcnRpZXMoKSx0aGlzLmNsZWFyR3JpZCgpLHRoaXMudGlsZVNpemU9dGhpcy5vcHRpb25zLnRpbGVTaXplLHRoaXMuc2V0VGlsZVNpemUoKSx0aGlzLm1vdmVUbyhudWxsLCEwKSl9LGNsb25lOmZ1bmN0aW9uKGEpe251bGw9PWEmJihhPW5ldyBPcGVuTGF5ZXJzLkxheWVyLkdyaWQodGhpcy5uYW1lLHRoaXMudXJsLHRoaXMucGFyYW1zLHRoaXMuZ2V0T3B0aW9ucygpKSk7YT1PcGVuTGF5ZXJzLkxheWVyLkhUVFBSZXF1ZXN0LnByb3RvdHlwZS5jbG9uZS5hcHBseSh0aGlzLApbYV0pO251bGwhPXRoaXMudGlsZVNpemUmJihhLnRpbGVTaXplPXRoaXMudGlsZVNpemUuY2xvbmUoKSk7YS5ncmlkPVtdO2EuZ3JpZFJlc29sdXRpb249bnVsbDthLmJhY2tCdWZmZXI9bnVsbDthLmJhY2tCdWZmZXJUaW1lcklkPW51bGw7YS5sb2FkaW5nPSExO2EubnVtTG9hZGluZ1RpbGVzPTA7cmV0dXJuIGF9LG1vdmVUbzpmdW5jdGlvbihhLGIsYyl7T3BlbkxheWVycy5MYXllci5IVFRQUmVxdWVzdC5wcm90b3R5cGUubW92ZVRvLmFwcGx5KHRoaXMsYXJndW1lbnRzKTthPWF8fHRoaXMubWFwLmdldEV4dGVudCgpO2lmKG51bGwhPWEpe3ZhciBkPSF0aGlzLmdyaWQubGVuZ3RofHxiLGU9dGhpcy5nZXRUaWxlc0JvdW5kcygpLGY9dGhpcy5tYXAuZ2V0UmVzb2x1dGlvbigpO3RoaXMuZ2V0U2VydmVyUmVzb2x1dGlvbihmKTtpZih0aGlzLnNpbmdsZVRpbGUpe2lmKGR8fCFjJiYhZS5jb250YWluc0JvdW5kcyhhKSliJiYicmVzaXplIiE9PXRoaXMudHJhbnNpdGlvbkVmZmVjdCYmCnRoaXMucmVtb3ZlQmFja0J1ZmZlcigpLGImJiJyZXNpemUiIT09dGhpcy50cmFuc2l0aW9uRWZmZWN0fHx0aGlzLmFwcGx5QmFja0J1ZmZlcihmKSx0aGlzLmluaXRTaW5nbGVUaWxlKGEpfWVsc2UoZD1kfHwhZS5pbnRlcnNlY3RzQm91bmRzKGEse3dvcmxkQm91bmRzOnRoaXMubWFwLmJhc2VMYXllci53cmFwRGF0ZUxpbmUmJnRoaXMubWFwLmdldE1heEV4dGVudCgpfSkpPyghYnx8InJlc2l6ZSIhPT10aGlzLnRyYW5zaXRpb25FZmZlY3QmJnRoaXMuZ3JpZFJlc29sdXRpb24hPT1mfHx0aGlzLmFwcGx5QmFja0J1ZmZlcihmKSx0aGlzLmluaXRHcmlkZGVkVGlsZXMoYSkpOnRoaXMubW92ZUdyaWRkZWRUaWxlcygpfX0sZ2V0VGlsZURhdGE6ZnVuY3Rpb24oYSl7dmFyIGI9bnVsbCxjPWEubG9uLGQ9YS5sYXQsZT10aGlzLmdyaWQubGVuZ3RoO2lmKHRoaXMubWFwJiZlKXt2YXIgZj10aGlzLm1hcC5nZXRSZXNvbHV0aW9uKCk7YT10aGlzLnRpbGVTaXplLnc7dmFyIGc9dGhpcy50aWxlU2l6ZS5oLApoPXRoaXMuZ3JpZFswXVswXS5ib3VuZHMsaz1oLmxlZnQsaD1oLnRvcDtpZihjPGsmJnRoaXMubWFwLmJhc2VMYXllci53cmFwRGF0ZUxpbmUpdmFyIGw9dGhpcy5tYXAuZ2V0TWF4RXh0ZW50KCkuZ2V0V2lkdGgoKSxtPU1hdGguY2VpbCgoay1jKS9sKSxjPWMrbCptO2M9KGMtaykvKGYqYSk7ZD0oaC1kKS8oZipnKTtmPU1hdGguZmxvb3IoYyk7az1NYXRoLmZsb29yKGQpOzA8PWsmJms8ZSYmKGU9dGhpcy5ncmlkW2tdW2ZdKSYmKGI9e3RpbGU6ZSxpOk1hdGguZmxvb3IoKGMtZikqYSksajpNYXRoLmZsb29yKChkLWspKmcpfSl9cmV0dXJuIGJ9LGRlc3Ryb3lUaWxlOmZ1bmN0aW9uKGEpe3RoaXMucmVtb3ZlVGlsZU1vbml0b3JpbmdIb29rcyhhKTthLmRlc3Ryb3koKX0sZ2V0U2VydmVyUmVzb2x1dGlvbjpmdW5jdGlvbihhKXt2YXIgYj1OdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk7YT1hfHx0aGlzLm1hcC5nZXRSZXNvbHV0aW9uKCk7aWYodGhpcy5zZXJ2ZXJSZXNvbHV0aW9ucyYmCi0xPT09T3BlbkxheWVycy5VdGlsLmluZGV4T2YodGhpcy5zZXJ2ZXJSZXNvbHV0aW9ucyxhKSl7dmFyIGMsZCxlLGY7Zm9yKGM9dGhpcy5zZXJ2ZXJSZXNvbHV0aW9ucy5sZW5ndGgtMTswPD1jO2MtLSl7ZT10aGlzLnNlcnZlclJlc29sdXRpb25zW2NdO2Q9TWF0aC5hYnMoZS1hKTtpZihkPmIpYnJlYWs7Yj1kO2Y9ZX1hPWZ9cmV0dXJuIGF9LGdldFNlcnZlclpvb206ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmdldFNlcnZlclJlc29sdXRpb24oKTtyZXR1cm4gdGhpcy5zZXJ2ZXJSZXNvbHV0aW9ucz9PcGVuTGF5ZXJzLlV0aWwuaW5kZXhPZih0aGlzLnNlcnZlclJlc29sdXRpb25zLGEpOnRoaXMubWFwLmdldFpvb21Gb3JSZXNvbHV0aW9uKGEpKyh0aGlzLnpvb21PZmZzZXR8fDApfSxhcHBseUJhY2tCdWZmZXI6ZnVuY3Rpb24oYSl7bnVsbCE9PXRoaXMuYmFja0J1ZmZlclRpbWVySWQmJnRoaXMucmVtb3ZlQmFja0J1ZmZlcigpO3ZhciBiPXRoaXMuYmFja0J1ZmZlcjtpZighYil7Yj0KdGhpcy5jcmVhdGVCYWNrQnVmZmVyKCk7aWYoIWIpcmV0dXJuO2E9PT10aGlzLmdyaWRSZXNvbHV0aW9uP3RoaXMuZGl2Lmluc2VydEJlZm9yZShiLHRoaXMuZGl2LmZpcnN0Q2hpbGQpOnRoaXMubWFwLmJhc2VMYXllci5kaXYucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoYix0aGlzLm1hcC5iYXNlTGF5ZXIuZGl2KTt0aGlzLmJhY2tCdWZmZXI9Yjt2YXIgYz10aGlzLmdyaWRbMF1bMF0uYm91bmRzO3RoaXMuYmFja0J1ZmZlckxvbkxhdD17bG9uOmMubGVmdCxsYXQ6Yy50b3B9O3RoaXMuYmFja0J1ZmZlclJlc29sdXRpb249dGhpcy5ncmlkUmVzb2x1dGlvbn1mb3IodmFyIGM9dGhpcy5iYWNrQnVmZmVyUmVzb2x1dGlvbi9hLGQ9Yi5jaGlsZE5vZGVzLGUsZj1kLmxlbmd0aC0xOzA8PWY7LS1mKWU9ZFtmXSxlLnN0eWxlLnRvcD0oYyplLl9pKmUuX2h8MCkrInB4IixlLnN0eWxlLmxlZnQ9KGMqZS5faiplLl93fDApKyJweCIsZS5zdHlsZS53aWR0aD1NYXRoLnJvdW5kKGMqZS5fdykrCiJweCIsZS5zdHlsZS5oZWlnaHQ9TWF0aC5yb3VuZChjKmUuX2gpKyJweCI7YT10aGlzLmdldFZpZXdQb3J0UHhGcm9tTG9uTGF0KHRoaXMuYmFja0J1ZmZlckxvbkxhdCxhKTtjPXRoaXMubWFwLmxheWVyQ29udGFpbmVyT3JpZ2luUHgueTtiLnN0eWxlLmxlZnQ9TWF0aC5yb3VuZChhLngtdGhpcy5tYXAubGF5ZXJDb250YWluZXJPcmlnaW5QeC54KSsicHgiO2Iuc3R5bGUudG9wPU1hdGgucm91bmQoYS55LWMpKyJweCJ9LGNyZWF0ZUJhY2tCdWZmZXI6ZnVuY3Rpb24oKXt2YXIgYTtpZigwPHRoaXMuZ3JpZC5sZW5ndGgpe2E9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7YS5pZD10aGlzLmRpdi5pZCsiX2JiIjthLmNsYXNzTmFtZT0ib2xCYWNrQnVmZmVyIjthLnN0eWxlLnBvc2l0aW9uPSJhYnNvbHV0ZSI7dmFyIGI9dGhpcy5tYXA7YS5zdHlsZS56SW5kZXg9InJlc2l6ZSI9PT10aGlzLnRyYW5zaXRpb25FZmZlY3Q/dGhpcy5nZXRaSW5kZXgoKS0xOmIuWl9JTkRFWF9CQVNFLkJhc2VMYXllci0KKGIuZ2V0TnVtTGF5ZXJzKCktYi5nZXRMYXllckluZGV4KHRoaXMpKTtmb3IodmFyIGI9MCxjPXRoaXMuZ3JpZC5sZW5ndGg7YjxjO2IrKylmb3IodmFyIGQ9MCxlPXRoaXMuZ3JpZFtiXS5sZW5ndGg7ZDxlO2QrKyl7dmFyIGY9dGhpcy5ncmlkW2JdW2RdLGc9dGhpcy5ncmlkW2JdW2RdLmNyZWF0ZUJhY2tCdWZmZXIoKTtnJiYoZy5faT1iLGcuX2o9ZCxnLl93PWYuc2l6ZS53LGcuX2g9Zi5zaXplLmgsZy5pZD1mLmlkKyJfYmIiLGEuYXBwZW5kQ2hpbGQoZykpfX1yZXR1cm4gYX0scmVtb3ZlQmFja0J1ZmZlcjpmdW5jdGlvbigpe2lmKHRoaXMuX3RyYW5zaXRpb25FbGVtZW50KXtmb3IodmFyIGE9dGhpcy50cmFuc2l0aW9uZW5kRXZlbnRzLmxlbmd0aC0xOzA8PWE7LS1hKU9wZW5MYXllcnMuRXZlbnQuc3RvcE9ic2VydmluZyh0aGlzLl90cmFuc2l0aW9uRWxlbWVudCx0aGlzLnRyYW5zaXRpb25lbmRFdmVudHNbYV0sdGhpcy5fcmVtb3ZlQmFja0J1ZmZlcik7ZGVsZXRlIHRoaXMuX3RyYW5zaXRpb25FbGVtZW50fXRoaXMuYmFja0J1ZmZlciYmCih0aGlzLmJhY2tCdWZmZXIucGFyZW50Tm9kZSYmdGhpcy5iYWNrQnVmZmVyLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5iYWNrQnVmZmVyKSx0aGlzLmJhY2tCdWZmZXJSZXNvbHV0aW9uPXRoaXMuYmFja0J1ZmZlcj1udWxsLG51bGwhPT10aGlzLmJhY2tCdWZmZXJUaW1lcklkJiYod2luZG93LmNsZWFyVGltZW91dCh0aGlzLmJhY2tCdWZmZXJUaW1lcklkKSx0aGlzLmJhY2tCdWZmZXJUaW1lcklkPW51bGwpKX0sbW92ZUJ5UHg6ZnVuY3Rpb24oYSxiKXt0aGlzLnNpbmdsZVRpbGV8fHRoaXMubW92ZUdyaWRkZWRUaWxlcygpfSxzZXRUaWxlU2l6ZTpmdW5jdGlvbihhKXt0aGlzLnNpbmdsZVRpbGUmJihhPXRoaXMubWFwLmdldFNpemUoKSxhLmg9cGFyc2VJbnQoYS5oKnRoaXMucmF0aW8sMTApLGEudz1wYXJzZUludChhLncqdGhpcy5yYXRpbywxMCkpO09wZW5MYXllcnMuTGF5ZXIuSFRUUFJlcXVlc3QucHJvdG90eXBlLnNldFRpbGVTaXplLmFwcGx5KHRoaXMsW2FdKX0sZ2V0VGlsZXNCb3VuZHM6ZnVuY3Rpb24oKXt2YXIgYT0KbnVsbCxiPXRoaXMuZ3JpZC5sZW5ndGg7aWYoYil2YXIgYT10aGlzLmdyaWRbYi0xXVswXS5ib3VuZHMsYj10aGlzLmdyaWRbMF0ubGVuZ3RoKmEuZ2V0V2lkdGgoKSxjPXRoaXMuZ3JpZC5sZW5ndGgqYS5nZXRIZWlnaHQoKSxhPW5ldyBPcGVuTGF5ZXJzLkJvdW5kcyhhLmxlZnQsYS5ib3R0b20sYS5sZWZ0K2IsYS5ib3R0b20rYyk7cmV0dXJuIGF9LGluaXRTaW5nbGVUaWxlOmZ1bmN0aW9uKGEpe3RoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgicmV0aWxlIik7dmFyIGI9YS5nZXRDZW50ZXJMb25MYXQoKSxjPWEuZ2V0V2lkdGgoKSp0aGlzLnJhdGlvO2E9YS5nZXRIZWlnaHQoKSp0aGlzLnJhdGlvO2I9bmV3IE9wZW5MYXllcnMuQm91bmRzKGIubG9uLWMvMixiLmxhdC1hLzIsYi5sb24rYy8yLGIubGF0K2EvMik7Yz10aGlzLm1hcC5nZXRMYXllclB4RnJvbUxvbkxhdCh7bG9uOmIubGVmdCxsYXQ6Yi50b3B9KTt0aGlzLmdyaWQubGVuZ3RofHwodGhpcy5ncmlkWzBdPVtdKTsoYT10aGlzLmdyaWRbMF1bMF0pPwphLm1vdmVUbyhiLGMpOihhPXRoaXMuYWRkVGlsZShiLGMpLHRoaXMuYWRkVGlsZU1vbml0b3JpbmdIb29rcyhhKSxhLmRyYXcoKSx0aGlzLmdyaWRbMF1bMF09YSk7dGhpcy5yZW1vdmVFeGNlc3NUaWxlcygxLDEpO3RoaXMuZ3JpZFJlc29sdXRpb249dGhpcy5nZXRTZXJ2ZXJSZXNvbHV0aW9uKCl9LGNhbGN1bGF0ZUdyaWRMYXlvdXQ6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWMqdGhpcy50aWxlU2l6ZS53O2MqPXRoaXMudGlsZVNpemUuaDt2YXIgZT1NYXRoLmZsb29yKChhLmxlZnQtYi5sb24pL2QpLXRoaXMuYnVmZmVyLGY9dGhpcy5yb3dTaWduO2E9TWF0aFt+Zj8iZmxvb3IiOiJjZWlsIl0oZiooYi5sYXQtYS50b3ArYykvYyktdGhpcy5idWZmZXIqZjtyZXR1cm57dGlsZWxvbjpkLHRpbGVsYXQ6YyxzdGFydGNvbDplLHN0YXJ0cm93OmF9fSxnZXRUaWxlT3JpZ2luOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy50aWxlT3JpZ2luO2lmKCFhKXZhciBhPXRoaXMuZ2V0TWF4RXh0ZW50KCksCmI9e3RsOlsibGVmdCIsInRvcCJdLHRyOlsicmlnaHQiLCJ0b3AiXSxibDpbImxlZnQiLCJib3R0b20iXSxicjpbInJpZ2h0IiwiYm90dG9tIl19W3RoaXMudGlsZU9yaWdpbkNvcm5lcl0sYT1uZXcgT3BlbkxheWVycy5Mb25MYXQoYVtiWzBdXSxhW2JbMV1dKTtyZXR1cm4gYX0sZ2V0VGlsZUJvdW5kc0ZvckdyaWRJbmRleDpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuZ2V0VGlsZU9yaWdpbigpLGQ9dGhpcy5ncmlkTGF5b3V0LGU9ZC50aWxlbG9uLGY9ZC50aWxlbGF0LGc9ZC5zdGFydGNvbCxkPWQuc3RhcnRyb3csaD10aGlzLnJvd1NpZ247cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLkJvdW5kcyhjLmxvbisoZytiKSplLGMubGF0LShkK2EqaCkqZipoLGMubG9uKyhnK2IrMSkqZSxjLmxhdC0oZCsoYS0xKSpoKSpmKmgpfSxpbml0R3JpZGRlZFRpbGVzOmZ1bmN0aW9uKGEpe3RoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgicmV0aWxlIik7dmFyIGI9dGhpcy5tYXAuZ2V0U2l6ZSgpLGM9dGhpcy5nZXRUaWxlT3JpZ2luKCksCmQ9dGhpcy5tYXAuZ2V0UmVzb2x1dGlvbigpLGU9dGhpcy5nZXRTZXJ2ZXJSZXNvbHV0aW9uKCksZj1kL2UsZD10aGlzLnRpbGVTaXplLncvZixmPXRoaXMudGlsZVNpemUuaC9mLGc9TWF0aC5jZWlsKGIuaC9mKSsyKnRoaXMuYnVmZmVyKzEsYj1NYXRoLmNlaWwoYi53L2QpKzIqdGhpcy5idWZmZXIrMTt0aGlzLmdyaWRMYXlvdXQ9ZT10aGlzLmNhbGN1bGF0ZUdyaWRMYXlvdXQoYSxjLGUpO3ZhciBjPWUudGlsZWxvbixoPWUudGlsZWxhdCxlPXRoaXMubWFwLmxheWVyQ29udGFpbmVyT3JpZ2luUHgueCxrPXRoaXMubWFwLmxheWVyQ29udGFpbmVyT3JpZ2luUHgueSxsPXRoaXMuZ2V0VGlsZUJvdW5kc0ZvckdyaWRJbmRleCgwLDApLG09dGhpcy5tYXAuZ2V0Vmlld1BvcnRQeEZyb21Mb25MYXQobmV3IE9wZW5MYXllcnMuTG9uTGF0KGwubGVmdCxsLnRvcCkpO20ueD1NYXRoLnJvdW5kKG0ueCktZTttLnk9TWF0aC5yb3VuZChtLnkpLWs7dmFyIGU9W10saz10aGlzLm1hcC5nZXRDZW50ZXIoKSwKcj0wO2Rve3ZhciBwPXRoaXMuZ3JpZFtyXTtwfHwocD1bXSx0aGlzLmdyaWQucHVzaChwKSk7dmFyIG49MDtkb3t2YXIgbD10aGlzLmdldFRpbGVCb3VuZHNGb3JHcmlkSW5kZXgocixuKSxxPW0uY2xvbmUoKTtxLngrPW4qTWF0aC5yb3VuZChkKTtxLnkrPXIqTWF0aC5yb3VuZChmKTt2YXIgcz1wW25dO3M/cy5tb3ZlVG8obCxxLCExKToocz10aGlzLmFkZFRpbGUobCxxKSx0aGlzLmFkZFRpbGVNb25pdG9yaW5nSG9va3MocykscC5wdXNoKHMpKTtxPWwuZ2V0Q2VudGVyTG9uTGF0KCk7ZS5wdXNoKHt0aWxlOnMsZGlzdGFuY2U6TWF0aC5wb3cocS5sb24tay5sb24sMikrTWF0aC5wb3cocS5sYXQtay5sYXQsMil9KTtuKz0xfXdoaWxlKGwucmlnaHQ8PWEucmlnaHQrYyp0aGlzLmJ1ZmZlcnx8bjxiKTtyKz0xfXdoaWxlKGwuYm90dG9tPj1hLmJvdHRvbS1oKnRoaXMuYnVmZmVyfHxyPGcpO3RoaXMucmVtb3ZlRXhjZXNzVGlsZXMocixuKTt0aGlzLmdyaWRSZXNvbHV0aW9uPWQ9dGhpcy5nZXRTZXJ2ZXJSZXNvbHV0aW9uKCk7CmUuc29ydChmdW5jdGlvbihhLGIpe3JldHVybiBhLmRpc3RhbmNlLWIuZGlzdGFuY2V9KTthPTA7Zm9yKGQ9ZS5sZW5ndGg7YTxkOysrYSllW2FdLnRpbGUuZHJhdygpfSxnZXRNYXhFeHRlbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tYXhFeHRlbnR9LGFkZFRpbGU6ZnVuY3Rpb24oYSxiKXt2YXIgYz1uZXcgdGhpcy50aWxlQ2xhc3ModGhpcyxiLGEsbnVsbCx0aGlzLnRpbGVTaXplLHRoaXMudGlsZU9wdGlvbnMpO3RoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgiYWRkdGlsZSIse3RpbGU6Y30pO3JldHVybiBjfSxhZGRUaWxlTW9uaXRvcmluZ0hvb2tzOmZ1bmN0aW9uKGEpe2Eub25Mb2FkU3RhcnQ9ZnVuY3Rpb24oKXshMT09PXRoaXMubG9hZGluZyYmKHRoaXMubG9hZGluZz0hMCx0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoImxvYWRzdGFydCIpKTt0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoInRpbGVsb2Fkc3RhcnQiLHt0aWxlOmF9KTt0aGlzLm51bUxvYWRpbmdUaWxlcysrOwohdGhpcy5zaW5nbGVUaWxlJiYodGhpcy5iYWNrQnVmZmVyJiZ0aGlzLmdyaWRSZXNvbHV0aW9uPT09dGhpcy5iYWNrQnVmZmVyUmVzb2x1dGlvbikmJk9wZW5MYXllcnMuRWxlbWVudC5hZGRDbGFzcyhhLmdldFRpbGUoKSwib2xUaWxlUmVwbGFjaW5nIil9O2Eub25Mb2FkRW5kPWZ1bmN0aW9uKGIpe3RoaXMubnVtTG9hZGluZ1RpbGVzLS07Yj0idW5sb2FkIj09PWIudHlwZTt0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoInRpbGVsb2FkZWQiLHt0aWxlOmEsYWJvcnRlZDpifSk7aWYoIXRoaXMuc2luZ2xlVGlsZSYmIWImJnRoaXMuYmFja0J1ZmZlciYmdGhpcy5ncmlkUmVzb2x1dGlvbj09PXRoaXMuYmFja0J1ZmZlclJlc29sdXRpb24pe3ZhciBjPWEuZ2V0VGlsZSgpO2lmKCJub25lIj09PU9wZW5MYXllcnMuRWxlbWVudC5nZXRTdHlsZShjLCJkaXNwbGF5Iikpe3ZhciBkPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGEuaWQrIl9iYiIpO2QmJmQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChkKX1PcGVuTGF5ZXJzLkVsZW1lbnQucmVtb3ZlQ2xhc3MoYywKIm9sVGlsZVJlcGxhY2luZyIpfWlmKDA9PT10aGlzLm51bUxvYWRpbmdUaWxlcyl7aWYodGhpcy5iYWNrQnVmZmVyKWlmKDA9PT10aGlzLmJhY2tCdWZmZXIuY2hpbGROb2Rlcy5sZW5ndGgpdGhpcy5yZW1vdmVCYWNrQnVmZmVyKCk7ZWxzZXt0aGlzLl90cmFuc2l0aW9uRWxlbWVudD1iP3RoaXMuZGl2Lmxhc3RDaGlsZDphLmltZ0RpdjtiPXRoaXMudHJhbnNpdGlvbmVuZEV2ZW50cztmb3IoYz1iLmxlbmd0aC0xOzA8PWM7LS1jKU9wZW5MYXllcnMuRXZlbnQub2JzZXJ2ZSh0aGlzLl90cmFuc2l0aW9uRWxlbWVudCxiW2NdLHRoaXMuX3JlbW92ZUJhY2tCdWZmZXIpO3RoaXMuYmFja0J1ZmZlclRpbWVySWQ9d2luZG93LnNldFRpbWVvdXQodGhpcy5fcmVtb3ZlQmFja0J1ZmZlcix0aGlzLnJlbW92ZUJhY2tCdWZmZXJEZWxheSl9dGhpcy5sb2FkaW5nPSExO3RoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgibG9hZGVuZCIpfX07YS5vbkxvYWRFcnJvcj1mdW5jdGlvbigpe3RoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgidGlsZWVycm9yIiwKe3RpbGU6YX0pfTthLmV2ZW50cy5vbih7bG9hZHN0YXJ0OmEub25Mb2FkU3RhcnQsbG9hZGVuZDphLm9uTG9hZEVuZCx1bmxvYWQ6YS5vbkxvYWRFbmQsbG9hZGVycm9yOmEub25Mb2FkRXJyb3Isc2NvcGU6dGhpc30pfSxyZW1vdmVUaWxlTW9uaXRvcmluZ0hvb2tzOmZ1bmN0aW9uKGEpe2EudW5sb2FkKCk7YS5ldmVudHMudW4oe2xvYWRzdGFydDphLm9uTG9hZFN0YXJ0LGxvYWRlbmQ6YS5vbkxvYWRFbmQsdW5sb2FkOmEub25Mb2FkRW5kLGxvYWRlcnJvcjphLm9uTG9hZEVycm9yLHNjb3BlOnRoaXN9KX0sbW92ZUdyaWRkZWRUaWxlczpmdW5jdGlvbigpe2Zvcih2YXIgYT10aGlzLmJ1ZmZlcisxOzspe3ZhciBiPXRoaXMuZ3JpZFswXVswXSxjPWIucG9zaXRpb24ueCt0aGlzLm1hcC5sYXllckNvbnRhaW5lck9yaWdpblB4LngsYj1iLnBvc2l0aW9uLnkrdGhpcy5tYXAubGF5ZXJDb250YWluZXJPcmlnaW5QeC55LGQ9dGhpcy5nZXRTZXJ2ZXJSZXNvbHV0aW9uKCkvdGhpcy5tYXAuZ2V0UmVzb2x1dGlvbigpLApkPXt3Ok1hdGgucm91bmQodGhpcy50aWxlU2l6ZS53KmQpLGg6TWF0aC5yb3VuZCh0aGlzLnRpbGVTaXplLmgqZCl9O2lmKGM+LWQudyooYS0xKSl0aGlzLnNoaWZ0Q29sdW1uKCEwLGQpO2Vsc2UgaWYoYzwtZC53KmEpdGhpcy5zaGlmdENvbHVtbighMSxkKTtlbHNlIGlmKGI+LWQuaCooYS0xKSl0aGlzLnNoaWZ0Um93KCEwLGQpO2Vsc2UgaWYoYjwtZC5oKmEpdGhpcy5zaGlmdFJvdyghMSxkKTtlbHNlIGJyZWFrfX0sc2hpZnRSb3c6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmdyaWQsZD1hPzA6Yy5sZW5ndGgtMSxlPWE/LTE6MTt0aGlzLmdyaWRMYXlvdXQuc3RhcnRyb3crPWUqdGhpcy5yb3dTaWduO2Zvcih2YXIgZj1jW2RdLGc9Y1thPyJwb3AiOiJzaGlmdCJdKCksaD0wLGs9Zy5sZW5ndGg7aDxrO2grKyl7dmFyIGw9Z1toXSxtPWZbaF0ucG9zaXRpb24uY2xvbmUoKTttLnkrPWIuaCplO2wubW92ZVRvKHRoaXMuZ2V0VGlsZUJvdW5kc0ZvckdyaWRJbmRleChkLGgpLG0pfWNbYT8KInVuc2hpZnQiOiJwdXNoIl0oZyl9LHNoaWZ0Q29sdW1uOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5ncmlkLGQ9YT8wOmNbMF0ubGVuZ3RoLTEsZT1hPy0xOjE7dGhpcy5ncmlkTGF5b3V0LnN0YXJ0Y29sKz1lO2Zvcih2YXIgZj0wLGc9Yy5sZW5ndGg7ZjxnO2YrKyl7dmFyIGg9Y1tmXSxrPWhbZF0ucG9zaXRpb24uY2xvbmUoKSxsPWhbYT8icG9wIjoic2hpZnQiXSgpO2sueCs9Yi53KmU7bC5tb3ZlVG8odGhpcy5nZXRUaWxlQm91bmRzRm9yR3JpZEluZGV4KGYsZCksayk7aFthPyJ1bnNoaWZ0IjoicHVzaCJdKGwpfX0scmVtb3ZlRXhjZXNzVGlsZXM6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGMsZDt0aGlzLmdyaWQubGVuZ3RoPmE7KXt2YXIgZT10aGlzLmdyaWQucG9wKCk7Yz0wO2ZvcihkPWUubGVuZ3RoO2M8ZDtjKyspe3ZhciBmPWVbY107dGhpcy5kZXN0cm95VGlsZShmKX19Yz0wO2ZvcihkPXRoaXMuZ3JpZC5sZW5ndGg7YzxkO2MrKylmb3IoO3RoaXMuZ3JpZFtjXS5sZW5ndGg+CmI7KWU9dGhpcy5ncmlkW2NdLGY9ZS5wb3AoKSx0aGlzLmRlc3Ryb3lUaWxlKGYpfSxvbk1hcFJlc2l6ZTpmdW5jdGlvbigpe3RoaXMuc2luZ2xlVGlsZSYmKHRoaXMuY2xlYXJHcmlkKCksdGhpcy5zZXRUaWxlU2l6ZSgpKX0sZ2V0VGlsZUJvdW5kczpmdW5jdGlvbihhKXt2YXIgYj10aGlzLm1heEV4dGVudCxjPXRoaXMuZ2V0UmVzb2x1dGlvbigpLGQ9Yyp0aGlzLnRpbGVTaXplLncsYz1jKnRoaXMudGlsZVNpemUuaCxlPXRoaXMuZ2V0TG9uTGF0RnJvbVZpZXdQb3J0UHgoYSk7YT1iLmxlZnQrZCpNYXRoLmZsb29yKChlLmxvbi1iLmxlZnQpL2QpO2I9Yi5ib3R0b20rYypNYXRoLmZsb29yKChlLmxhdC1iLmJvdHRvbSkvYyk7cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLkJvdW5kcyhhLGIsYStkLGIrYyl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuTGF5ZXIuR3JpZCJ9KTtPcGVuTGF5ZXJzLkxheWVyLlhZWj1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuTGF5ZXIuR3JpZCx7aXNCYXNlTGF5ZXI6ITAsc3BoZXJpY2FsTWVyY2F0b3I6ITEsem9vbU9mZnNldDowLHNlcnZlclJlc29sdXRpb25zOm51bGwsaW5pdGlhbGl6ZTpmdW5jdGlvbihhLGIsYyl7aWYoYyYmYy5zcGhlcmljYWxNZXJjYXRvcnx8dGhpcy5zcGhlcmljYWxNZXJjYXRvciljPU9wZW5MYXllcnMuVXRpbC5leHRlbmQoe3Byb2plY3Rpb246IkVQU0c6OTAwOTEzIixudW1ab29tTGV2ZWxzOjE5fSxjKTtPcGVuTGF5ZXJzLkxheWVyLkdyaWQucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxbYXx8dGhpcy5uYW1lLGJ8fHRoaXMudXJsLHt9LGNdKX0sY2xvbmU6ZnVuY3Rpb24oYSl7bnVsbD09YSYmKGE9bmV3IE9wZW5MYXllcnMuTGF5ZXIuWFlaKHRoaXMubmFtZSx0aGlzLnVybCx0aGlzLmdldE9wdGlvbnMoKSkpO3JldHVybiBhPU9wZW5MYXllcnMuTGF5ZXIuR3JpZC5wcm90b3R5cGUuY2xvbmUuYXBwbHkodGhpcywKW2FdKX0sZ2V0VVJMOmZ1bmN0aW9uKGEpe2E9dGhpcy5nZXRYWVooYSk7dmFyIGI9dGhpcy51cmw7T3BlbkxheWVycy5VdGlsLmlzQXJyYXkoYikmJihiPXRoaXMuc2VsZWN0VXJsKCIiK2EueCthLnkrYS56LGIpKTtyZXR1cm4gT3BlbkxheWVycy5TdHJpbmcuZm9ybWF0KGIsYSl9LGdldFhZWjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmdldFNlcnZlclJlc29sdXRpb24oKSxjPU1hdGgucm91bmQoKGEubGVmdC10aGlzLm1heEV4dGVudC5sZWZ0KS8oYip0aGlzLnRpbGVTaXplLncpKTthPU1hdGgucm91bmQoKHRoaXMubWF4RXh0ZW50LnRvcC1hLnRvcCkvKGIqdGhpcy50aWxlU2l6ZS5oKSk7Yj10aGlzLmdldFNlcnZlclpvb20oKTtpZih0aGlzLndyYXBEYXRlTGluZSl2YXIgZD1NYXRoLnBvdygyLGIpLGM9KGMlZCtkKSVkO3JldHVybnt4OmMseTphLHo6Yn19LHNldE1hcDpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLkxheWVyLkdyaWQucHJvdG90eXBlLnNldE1hcC5hcHBseSh0aGlzLAphcmd1bWVudHMpO3RoaXMudGlsZU9yaWdpbnx8KHRoaXMudGlsZU9yaWdpbj1uZXcgT3BlbkxheWVycy5Mb25MYXQodGhpcy5tYXhFeHRlbnQubGVmdCx0aGlzLm1heEV4dGVudC5ib3R0b20pKX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5MYXllci5YWVoifSk7T3BlbkxheWVycy5MYXllci5PU009T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkxheWVyLlhZWix7bmFtZToiT3BlblN0cmVldE1hcCIsdXJsOlsiaHR0cDovL2EudGlsZS5vcGVuc3RyZWV0bWFwLm9yZy8ke3p9LyR7eH0vJHt5fS5wbmciLCJodHRwOi8vYi50aWxlLm9wZW5zdHJlZXRtYXAub3JnLyR7en0vJHt4fS8ke3l9LnBuZyIsImh0dHA6Ly9jLnRpbGUub3BlbnN0cmVldG1hcC5vcmcvJHt6fS8ke3h9LyR7eX0ucG5nIl0sYXR0cmlidXRpb246IiZjb3B5OyA8YSBocmVmPSdodHRwOi8vd3d3Lm9wZW5zdHJlZXRtYXAub3JnL2NvcHlyaWdodCc+T3BlblN0cmVldE1hcDwvYT4gY29udHJpYnV0b3JzIixzcGhlcmljYWxNZXJjYXRvcjohMCx3cmFwRGF0ZUxpbmU6ITAsdGlsZU9wdGlvbnM6bnVsbCxpbml0aWFsaXplOmZ1bmN0aW9uKGEsYixjKXtPcGVuTGF5ZXJzLkxheWVyLlhZWi5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy50aWxlT3B0aW9ucz0KT3BlbkxheWVycy5VdGlsLmV4dGVuZCh7Y3Jvc3NPcmlnaW5LZXl3b3JkOiJhbm9ueW1vdXMifSx0aGlzLm9wdGlvbnMmJnRoaXMub3B0aW9ucy50aWxlT3B0aW9ucyl9LGNsb25lOmZ1bmN0aW9uKGEpe251bGw9PWEmJihhPW5ldyBPcGVuTGF5ZXJzLkxheWVyLk9TTSh0aGlzLm5hbWUsdGhpcy51cmwsdGhpcy5nZXRPcHRpb25zKCkpKTtyZXR1cm4gYT1PcGVuTGF5ZXJzLkxheWVyLlhZWi5wcm90b3R5cGUuY2xvbmUuYXBwbHkodGhpcyxbYV0pfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkxheWVyLk9TTSJ9KTtPcGVuTGF5ZXJzLkxheWVyLkJpbmc9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkxheWVyLlhZWix7a2V5Om51bGwsc2VydmVyUmVzb2x1dGlvbnM6WzE1NjU0My4wMzM5MDYyNSw3ODI3MS41MTY5NTMxMjUsMzkxMzUuNzU4NDc2NTYyNSwxOTU2Ny44NzkyMzgyODEyNSw5NzgzLjkzOTYxOTE0MDYyNSw0ODkxLjk2OTgwOTU3MDMxMjUsMjQ0NS45ODQ5MDQ3ODUxNTYyLDEyMjIuOTkyNDUyMzkyNTc4MSw2MTEuNDk2MjI2MTk2Mjg5MSwzMDUuNzQ4MTEzMDk4MTQ0NTMsMTUyLjg3NDA1NjU0OTA3MjI2LDc2LjQzNzAyODI3NDUzNjEzLDM4LjIxODUxNDEzNzI2ODA2NiwxOS4xMDkyNTcwNjg2MzQwMzMsOS41NTQ2Mjg1MzQzMTcwMTcsNC43NzczMTQyNjcxNTg1MDgsMi4zODg2NTcxMzM1NzkyNTQsMS4xOTQzMjg1NjY3ODk2MjcsMC41OTcxNjQyODMzOTQ4MTM1LDAuMjk4NTgyMTQxNjk3NDA2NzcsMC4xNDkyOTEwNzA4NDg3MDMzOCwwLjA3NDY0NTUzNTQyNDM1MTY5XSxhdHRyaWJ1dGlvblRlbXBsYXRlOic8c3BhbiBjbGFzcz0ib2xCaW5nQXR0cmlidXRpb24gJHt0eXBlfSI+PGRpdj48YSB0YXJnZXQ9Il9ibGFuayIgaHJlZj0iaHR0cDovL3d3dy5iaW5nLmNvbS9tYXBzLyI+PGltZyBzcmM9IiR7bG9nb30iIC8+PC9hPjwvZGl2PiR7Y29weXJpZ2h0c308YSBzdHlsZT0id2hpdGUtc3BhY2U6IG5vd3JhcCIgdGFyZ2V0PSJfYmxhbmsiIGhyZWY9Imh0dHA6Ly93d3cubWljcm9zb2Z0LmNvbS9tYXBzL3Byb2R1Y3QvdGVybXMuaHRtbCI+VGVybXMgb2YgVXNlPC9hPjwvc3Bhbj4nLAptZXRhZGF0YTpudWxsLHByb3RvY29sUmVnZXg6L15odHRwOi9pLHR5cGU6IlJvYWQiLGN1bHR1cmU6ImVuLVVTIixtZXRhZGF0YVBhcmFtczpudWxsLHRpbGVPcHRpb25zOm51bGwscHJvdG9jb2w6fndpbmRvdy5sb2NhdGlvbi5ocmVmLmluZGV4T2YoImh0dHAiKT8iIjoiaHR0cDoiLGluaXRpYWxpemU6ZnVuY3Rpb24oYSl7YT1PcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyh7c3BoZXJpY2FsTWVyY2F0b3I6ITB9LGEpO09wZW5MYXllcnMuTGF5ZXIuWFlaLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsW2EubmFtZXx8IkJpbmcgIisoYS50eXBlfHx0aGlzLnR5cGUpLG51bGwsYV0pO3RoaXMudGlsZU9wdGlvbnM9T3BlbkxheWVycy5VdGlsLmV4dGVuZCh7Y3Jvc3NPcmlnaW5LZXl3b3JkOiJhbm9ueW1vdXMifSx0aGlzLm9wdGlvbnMudGlsZU9wdGlvbnMpO3RoaXMubG9hZE1ldGFkYXRhKCl9LGxvYWRNZXRhZGF0YTpmdW5jdGlvbigpe3RoaXMuX2NhbGxiYWNrSWQ9CiJfY2FsbGJhY2tfIit0aGlzLmlkLnJlcGxhY2UoL1wuL2csIl8iKTt3aW5kb3dbdGhpcy5fY2FsbGJhY2tJZF09T3BlbkxheWVycy5GdW5jdGlvbi5iaW5kKE9wZW5MYXllcnMuTGF5ZXIuQmluZy5wcm9jZXNzTWV0YWRhdGEsdGhpcyk7dmFyIGE9T3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoe2tleTp0aGlzLmtleSxqc29ucDp0aGlzLl9jYWxsYmFja0lkLGluY2x1ZGU6IkltYWdlcnlQcm92aWRlcnMifSx0aGlzLm1ldGFkYXRhUGFyYW1zKSxhPXRoaXMucHJvdG9jb2wrIi8vZGV2LnZpcnR1YWxlYXJ0aC5uZXQvUkVTVC92MS9JbWFnZXJ5L01ldGFkYXRhLyIrdGhpcy50eXBlKyI/IitPcGVuTGF5ZXJzLlV0aWwuZ2V0UGFyYW1ldGVyU3RyaW5nKGEpLGI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic2NyaXB0Iik7Yi50eXBlPSJ0ZXh0L2phdmFzY3JpcHQiO2Iuc3JjPWE7Yi5pZD10aGlzLl9jYWxsYmFja0lkO2RvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJoZWFkIilbMF0uYXBwZW5kQ2hpbGQoYil9LAppbml0TGF5ZXI6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm1ldGFkYXRhLnJlc291cmNlU2V0c1swXS5yZXNvdXJjZXNbMF0sYj1hLmltYWdlVXJsLnJlcGxhY2UoIntxdWFka2V5fSIsIiR7cXVhZGtleX0iKSxiPWIucmVwbGFjZSgie2N1bHR1cmV9Iix0aGlzLmN1bHR1cmUpLGI9Yi5yZXBsYWNlKHRoaXMucHJvdG9jb2xSZWdleCx0aGlzLnByb3RvY29sKTt0aGlzLnVybD1bXTtmb3IodmFyIGM9MDtjPGEuaW1hZ2VVcmxTdWJkb21haW5zLmxlbmd0aDsrK2MpdGhpcy51cmwucHVzaChiLnJlcGxhY2UoIntzdWJkb21haW59IixhLmltYWdlVXJsU3ViZG9tYWluc1tjXSkpO3RoaXMuYWRkT3B0aW9ucyh7bWF4UmVzb2x1dGlvbjpNYXRoLm1pbih0aGlzLnNlcnZlclJlc29sdXRpb25zW2Euem9vbU1pbl0sdGhpcy5tYXhSZXNvbHV0aW9ufHxOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkpLG51bVpvb21MZXZlbHM6TWF0aC5taW4oYS56b29tTWF4KzEtYS56b29tTWluLHRoaXMubnVtWm9vbUxldmVscyl9LAohMCk7dGhpcy5pc0Jhc2VMYXllcnx8dGhpcy5yZWRyYXcoKTt0aGlzLnVwZGF0ZUF0dHJpYnV0aW9uKCl9LGdldFVSTDpmdW5jdGlvbihhKXtpZih0aGlzLnVybCl7dmFyIGI9dGhpcy5nZXRYWVooYSk7YT1iLng7Zm9yKHZhciBjPWIueSxiPWIueixkPVtdLGU9YjswPGU7LS1lKXt2YXIgZj0iMCIsZz0xPDxlLTE7MCE9KGEmZykmJmYrKzswIT0oYyZnKSYmKGYrKyxmKyspO2QucHVzaChmKX1kPWQuam9pbigiIik7YT10aGlzLnNlbGVjdFVybCgiIithK2MrYix0aGlzLnVybCk7cmV0dXJuIE9wZW5MYXllcnMuU3RyaW5nLmZvcm1hdChhLHtxdWFka2V5OmR9KX19LHVwZGF0ZUF0dHJpYnV0aW9uOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5tZXRhZGF0YTtpZihhLnJlc291cmNlU2V0cyYmdGhpcy5tYXAmJnRoaXMubWFwLmNlbnRlcil7dmFyIGI9YS5yZXNvdXJjZVNldHNbMF0ucmVzb3VyY2VzWzBdLGM9dGhpcy5tYXAuZ2V0RXh0ZW50KCkudHJhbnNmb3JtKHRoaXMubWFwLmdldFByb2plY3Rpb25PYmplY3QoKSwKbmV3IE9wZW5MYXllcnMuUHJvamVjdGlvbigiRVBTRzo0MzI2IikpLGQ9Yi5pbWFnZXJ5UHJvdmlkZXJzfHxbXSxlPU9wZW5MYXllcnMuVXRpbC5pbmRleE9mKHRoaXMuc2VydmVyUmVzb2x1dGlvbnMsdGhpcy5nZXRTZXJ2ZXJSZXNvbHV0aW9uKCkpLGI9IiIsZixnLGgsayxsLG0scjtnPTA7Zm9yKGg9ZC5sZW5ndGg7ZzxoOysrZylmb3IoZj1kW2ddLGs9MCxsPWYuY292ZXJhZ2VBcmVhcy5sZW5ndGg7azxsOysraylyPWYuY292ZXJhZ2VBcmVhc1trXSxtPU9wZW5MYXllcnMuQm91bmRzLmZyb21BcnJheShyLmJib3gsITApLGMuaW50ZXJzZWN0c0JvdW5kcyhtKSYmKGU8PXIuem9vbU1heCYmZT49ci56b29tTWluKSYmKGIrPWYuYXR0cmlidXRpb24rIiAiKTthPWEuYnJhbmRMb2dvVXJpLnJlcGxhY2UodGhpcy5wcm90b2NvbFJlZ2V4LHRoaXMucHJvdG9jb2wpO3RoaXMuYXR0cmlidXRpb249T3BlbkxheWVycy5TdHJpbmcuZm9ybWF0KHRoaXMuYXR0cmlidXRpb25UZW1wbGF0ZSx7dHlwZTp0aGlzLnR5cGUudG9Mb3dlckNhc2UoKSwKbG9nbzphLGNvcHlyaWdodHM6Yn0pO3RoaXMubWFwJiZ0aGlzLm1hcC5ldmVudHMudHJpZ2dlckV2ZW50KCJjaGFuZ2VsYXllciIse2xheWVyOnRoaXMscHJvcGVydHk6ImF0dHJpYnV0aW9uIn0pfX0sc2V0TWFwOmZ1bmN0aW9uKCl7T3BlbkxheWVycy5MYXllci5YWVoucHJvdG90eXBlLnNldE1hcC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5tYXAuZXZlbnRzLnJlZ2lzdGVyKCJtb3ZlZW5kIix0aGlzLHRoaXMudXBkYXRlQXR0cmlidXRpb24pfSxjbG9uZTpmdW5jdGlvbihhKXtudWxsPT1hJiYoYT1uZXcgT3BlbkxheWVycy5MYXllci5CaW5nKHRoaXMub3B0aW9ucykpO3JldHVybiBhPU9wZW5MYXllcnMuTGF5ZXIuWFlaLnByb3RvdHlwZS5jbG9uZS5hcHBseSh0aGlzLFthXSl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLm1hcCYmdGhpcy5tYXAuZXZlbnRzLnVucmVnaXN0ZXIoIm1vdmVlbmQiLHRoaXMsdGhpcy51cGRhdGVBdHRyaWJ1dGlvbik7T3BlbkxheWVycy5MYXllci5YWVoucHJvdG90eXBlLmRlc3Ryb3kuYXBwbHkodGhpcywKYXJndW1lbnRzKX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5MYXllci5CaW5nIn0pO09wZW5MYXllcnMuTGF5ZXIuQmluZy5wcm9jZXNzTWV0YWRhdGE9ZnVuY3Rpb24oYSl7dGhpcy5tZXRhZGF0YT1hO3RoaXMuaW5pdExheWVyKCk7YT1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLl9jYWxsYmFja0lkKTthLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYSk7d2luZG93W3RoaXMuX2NhbGxiYWNrSWRdPXZvaWQgMDtkZWxldGUgdGhpcy5fY2FsbGJhY2tJZH07T3BlbkxheWVycy5IYW5kbGVyPU9wZW5MYXllcnMuQ2xhc3Moe2lkOm51bGwsY29udHJvbDpudWxsLG1hcDpudWxsLGtleU1hc2s6bnVsbCxhY3RpdmU6ITEsZXZ0Om51bGwsdG91Y2g6ITEsaW5pdGlhbGl6ZTpmdW5jdGlvbihhLGIsYyl7T3BlbkxheWVycy5VdGlsLmV4dGVuZCh0aGlzLGMpO3RoaXMuY29udHJvbD1hO3RoaXMuY2FsbGJhY2tzPWI7KGE9dGhpcy5tYXB8fGEubWFwKSYmdGhpcy5zZXRNYXAoYSk7dGhpcy5pZD1PcGVuTGF5ZXJzLlV0aWwuY3JlYXRlVW5pcXVlSUQodGhpcy5DTEFTU19OQU1FKyJfIil9LHNldE1hcDpmdW5jdGlvbihhKXt0aGlzLm1hcD1hfSxjaGVja01vZGlmaWVyczpmdW5jdGlvbihhKXtyZXR1cm4gbnVsbD09dGhpcy5rZXlNYXNrPyEwOigoYS5zaGlmdEtleT9PcGVuTGF5ZXJzLkhhbmRsZXIuTU9EX1NISUZUOjApfChhLmN0cmxLZXk/T3BlbkxheWVycy5IYW5kbGVyLk1PRF9DVFJMOjApfChhLmFsdEtleT9PcGVuTGF5ZXJzLkhhbmRsZXIuTU9EX0FMVDoKMCl8KGEubWV0YUtleT9PcGVuTGF5ZXJzLkhhbmRsZXIuTU9EX01FVEE6MCkpPT10aGlzLmtleU1hc2t9LGFjdGl2YXRlOmZ1bmN0aW9uKCl7aWYodGhpcy5hY3RpdmUpcmV0dXJuITE7Zm9yKHZhciBhPU9wZW5MYXllcnMuRXZlbnRzLnByb3RvdHlwZS5CUk9XU0VSX0VWRU5UUyxiPTAsYz1hLmxlbmd0aDtiPGM7YisrKXRoaXNbYVtiXV0mJnRoaXMucmVnaXN0ZXIoYVtiXSx0aGlzW2FbYl1dKTtyZXR1cm4gdGhpcy5hY3RpdmU9ITB9LGRlYWN0aXZhdGU6ZnVuY3Rpb24oKXtpZighdGhpcy5hY3RpdmUpcmV0dXJuITE7Zm9yKHZhciBhPU9wZW5MYXllcnMuRXZlbnRzLnByb3RvdHlwZS5CUk9XU0VSX0VWRU5UUyxiPTAsYz1hLmxlbmd0aDtiPGM7YisrKXRoaXNbYVtiXV0mJnRoaXMudW5yZWdpc3RlcihhW2JdLHRoaXNbYVtiXV0pO3RoaXMuYWN0aXZlPXRoaXMudG91Y2g9ITE7cmV0dXJuITB9LHN0YXJ0VG91Y2g6ZnVuY3Rpb24oKXtpZighdGhpcy50b3VjaCl7dGhpcy50b3VjaD0hMDsKZm9yKHZhciBhPSJtb3VzZWRvd24gbW91c2V1cCBtb3VzZW1vdmUgY2xpY2sgZGJsY2xpY2sgbW91c2VvdXQiLnNwbGl0KCIgIiksYj0wLGM9YS5sZW5ndGg7YjxjO2IrKyl0aGlzW2FbYl1dJiZ0aGlzLnVucmVnaXN0ZXIoYVtiXSx0aGlzW2FbYl1dKX19LGNhbGxiYWNrOmZ1bmN0aW9uKGEsYil7YSYmdGhpcy5jYWxsYmFja3NbYV0mJnRoaXMuY2FsbGJhY2tzW2FdLmFwcGx5KHRoaXMuY29udHJvbCxiKX0scmVnaXN0ZXI6ZnVuY3Rpb24oYSxiKXt0aGlzLm1hcC5ldmVudHMucmVnaXN0ZXJQcmlvcml0eShhLHRoaXMsYik7dGhpcy5tYXAuZXZlbnRzLnJlZ2lzdGVyUHJpb3JpdHkoYSx0aGlzLHRoaXMuc2V0RXZlbnQpfSx1bnJlZ2lzdGVyOmZ1bmN0aW9uKGEsYil7dGhpcy5tYXAuZXZlbnRzLnVucmVnaXN0ZXIoYSx0aGlzLGIpO3RoaXMubWFwLmV2ZW50cy51bnJlZ2lzdGVyKGEsdGhpcyx0aGlzLnNldEV2ZW50KX0sc2V0RXZlbnQ6ZnVuY3Rpb24oYSl7dGhpcy5ldnQ9YTtyZXR1cm4hMH0sCmRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmRlYWN0aXZhdGUoKTt0aGlzLmNvbnRyb2w9dGhpcy5tYXA9bnVsbH0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5IYW5kbGVyIn0pO09wZW5MYXllcnMuSGFuZGxlci5NT0RfTk9ORT0wO09wZW5MYXllcnMuSGFuZGxlci5NT0RfU0hJRlQ9MTtPcGVuTGF5ZXJzLkhhbmRsZXIuTU9EX0NUUkw9MjtPcGVuTGF5ZXJzLkhhbmRsZXIuTU9EX0FMVD00O09wZW5MYXllcnMuSGFuZGxlci5NT0RfTUVUQT04O09wZW5MYXllcnMuSGFuZGxlci5Nb3VzZVdoZWVsPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5IYW5kbGVyLHt3aGVlbExpc3RlbmVyOm51bGwsaW50ZXJ2YWw6MCxtYXhEZWx0YTpOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFksZGVsdGE6MCxjdW11bGF0aXZlOiEwLGluaXRpYWxpemU6ZnVuY3Rpb24oYSxiLGMpe09wZW5MYXllcnMuSGFuZGxlci5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy53aGVlbExpc3RlbmVyPU9wZW5MYXllcnMuRnVuY3Rpb24uYmluZEFzRXZlbnRMaXN0ZW5lcih0aGlzLm9uV2hlZWxFdmVudCx0aGlzKX0sZGVzdHJveTpmdW5jdGlvbigpe09wZW5MYXllcnMuSGFuZGxlci5wcm90b3R5cGUuZGVzdHJveS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy53aGVlbExpc3RlbmVyPW51bGx9LG9uV2hlZWxFdmVudDpmdW5jdGlvbihhKXtpZih0aGlzLm1hcCYmdGhpcy5jaGVja01vZGlmaWVycyhhKSl7Zm9yKHZhciBiPQohMSxjPSExLGQ9ITEsZT1PcGVuTGF5ZXJzLkV2ZW50LmVsZW1lbnQoYSk7bnVsbCE9ZSYmIWQmJiFiOyl7aWYoIWIpdHJ5e3ZhciBmLGI9KGY9ZS5jdXJyZW50U3R5bGU/ZS5jdXJyZW50U3R5bGUub3ZlcmZsb3c6ZG9jdW1lbnQuZGVmYXVsdFZpZXcuZ2V0Q29tcHV0ZWRTdHlsZShlLG51bGwpLmdldFByb3BlcnR5VmFsdWUoIm92ZXJmbG93IikpJiYiYXV0byI9PWZ8fCJzY3JvbGwiPT1mfWNhdGNoKGcpe31pZighYyYmKGM9T3BlbkxheWVycy5FbGVtZW50Lmhhc0NsYXNzKGUsIm9sU2Nyb2xsYWJsZSIpLCFjKSlmb3IodmFyIGQ9MCxoPXRoaXMubWFwLmxheWVycy5sZW5ndGg7ZDxoO2QrKyl7dmFyIGs9dGhpcy5tYXAubGF5ZXJzW2RdO2lmKGU9PWsuZGl2fHxlPT1rLnBhbmUpe2M9ITA7YnJlYWt9fWQ9ZT09dGhpcy5tYXAuZGl2O2U9ZS5wYXJlbnROb2RlfWlmKCFiJiZkKXtpZihjKWlmKGI9MCxhLndoZWVsRGVsdGE/KGI9YS53aGVlbERlbHRhLDA9PT1iJTE2MCYmKGIqPTAuNzUpLApiLz0xMjApOmEuZGV0YWlsJiYoYj0tKGEuZGV0YWlsL01hdGguYWJzKGEuZGV0YWlsKSkpLHRoaXMuZGVsdGErPWIsd2luZG93LmNsZWFyVGltZW91dCh0aGlzLl90aW1lb3V0SWQpLHRoaXMuaW50ZXJ2YWwmJk1hdGguYWJzKHRoaXMuZGVsdGEpPHRoaXMubWF4RGVsdGEpe3ZhciBsPU9wZW5MYXllcnMuVXRpbC5leHRlbmQoe30sYSk7dGhpcy5fdGltZW91dElkPXdpbmRvdy5zZXRUaW1lb3V0KE9wZW5MYXllcnMuRnVuY3Rpb24uYmluZChmdW5jdGlvbigpe3RoaXMud2hlZWxab29tKGwpfSx0aGlzKSx0aGlzLmludGVydmFsKX1lbHNlIHRoaXMud2hlZWxab29tKGEpO09wZW5MYXllcnMuRXZlbnQuc3RvcChhKX19fSx3aGVlbFpvb206ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5kZWx0YTt0aGlzLmRlbHRhPTA7YiYmKGEueHk9dGhpcy5tYXAuZXZlbnRzLmdldE1vdXNlUG9zaXRpb24oYSksMD5iP3RoaXMuY2FsbGJhY2soImRvd24iLFthLHRoaXMuY3VtdWxhdGl2ZT9NYXRoLm1heCgtdGhpcy5tYXhEZWx0YSwKYik6LTFdKTp0aGlzLmNhbGxiYWNrKCJ1cCIsW2EsdGhpcy5jdW11bGF0aXZlP01hdGgubWluKHRoaXMubWF4RGVsdGEsYik6MV0pKX0sYWN0aXZhdGU6ZnVuY3Rpb24oYSl7aWYoT3BlbkxheWVycy5IYW5kbGVyLnByb3RvdHlwZS5hY3RpdmF0ZS5hcHBseSh0aGlzLGFyZ3VtZW50cykpe3ZhciBiPXRoaXMud2hlZWxMaXN0ZW5lcjtPcGVuTGF5ZXJzLkV2ZW50Lm9ic2VydmUod2luZG93LCJET01Nb3VzZVNjcm9sbCIsYik7T3BlbkxheWVycy5FdmVudC5vYnNlcnZlKHdpbmRvdywibW91c2V3aGVlbCIsYik7T3BlbkxheWVycy5FdmVudC5vYnNlcnZlKGRvY3VtZW50LCJtb3VzZXdoZWVsIixiKTtyZXR1cm4hMH1yZXR1cm4hMX0sZGVhY3RpdmF0ZTpmdW5jdGlvbihhKXtpZihPcGVuTGF5ZXJzLkhhbmRsZXIucHJvdG90eXBlLmRlYWN0aXZhdGUuYXBwbHkodGhpcyxhcmd1bWVudHMpKXt2YXIgYj10aGlzLndoZWVsTGlzdGVuZXI7T3BlbkxheWVycy5FdmVudC5zdG9wT2JzZXJ2aW5nKHdpbmRvdywKIkRPTU1vdXNlU2Nyb2xsIixiKTtPcGVuTGF5ZXJzLkV2ZW50LnN0b3BPYnNlcnZpbmcod2luZG93LCJtb3VzZXdoZWVsIixiKTtPcGVuTGF5ZXJzLkV2ZW50LnN0b3BPYnNlcnZpbmcoZG9jdW1lbnQsIm1vdXNld2hlZWwiLGIpO3JldHVybiEwfXJldHVybiExfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkhhbmRsZXIuTW91c2VXaGVlbCJ9KTtPcGVuTGF5ZXJzLkdlb21ldHJ5Lk11bHRpTGluZVN0cmluZz1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuR2VvbWV0cnkuQ29sbGVjdGlvbix7Y29tcG9uZW50VHlwZXM6WyJPcGVuTGF5ZXJzLkdlb21ldHJ5LkxpbmVTdHJpbmciXSxzcGxpdDpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz1udWxsLGQ9YiYmYi5tdXR1YWwsZSxmLGcsaCxrPVtdLGw9W2FdLG09MCxyPXRoaXMuY29tcG9uZW50cy5sZW5ndGg7bTxyOysrbSl7Zj10aGlzLmNvbXBvbmVudHNbbV07Zz0hMTtmb3IodmFyIHA9MDtwPGwubGVuZ3RoOysrcClpZihlPWYuc3BsaXQobFtwXSxiKSl7aWYoZCl7Zz1lWzBdO2Zvcih2YXIgbj0wLHE9Zy5sZW5ndGg7bjxxOysrbikwPT09biYmay5sZW5ndGg/a1trLmxlbmd0aC0xXS5hZGRDb21wb25lbnQoZ1tuXSk6ay5wdXNoKG5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5Lk11bHRpTGluZVN0cmluZyhbZ1tuXV0pKTtnPSEwO2U9ZVsxXX1pZihlLmxlbmd0aCl7ZS51bnNoaWZ0KHAsCjEpO0FycmF5LnByb3RvdHlwZS5zcGxpY2UuYXBwbHkobCxlKTticmVha319Z3x8KGsubGVuZ3RoP2tbay5sZW5ndGgtMV0uYWRkQ29tcG9uZW50KGYuY2xvbmUoKSk6az1bbmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuTXVsdGlMaW5lU3RyaW5nKGYuY2xvbmUoKSldKX1rJiYxPGsubGVuZ3RoP2c9ITA6az1bXTtsJiYxPGwubGVuZ3RoP2g9ITA6bD1bXTtpZihnfHxoKWM9ZD9bayxsXTpsO3JldHVybiBjfSxzcGxpdFdpdGg6ZnVuY3Rpb24oYSxiKXt2YXIgYz1udWxsLGQ9YiYmYi5tdXR1YWwsZSxmLGcsaCxrLGw7aWYoYSBpbnN0YW5jZW9mIE9wZW5MYXllcnMuR2VvbWV0cnkuTGluZVN0cmluZyl7bD1bXTtrPVthXTtmb3IodmFyIG09MCxyPXRoaXMuY29tcG9uZW50cy5sZW5ndGg7bTxyOysrbSl7Zz0hMTtmPXRoaXMuY29tcG9uZW50c1ttXTtmb3IodmFyIHA9MDtwPGsubGVuZ3RoOysrcClpZihlPWtbcF0uc3BsaXQoZixiKSl7ZCYmKGc9ZVswXSxnLmxlbmd0aCYmKGcudW5zaGlmdChwLAoxKSxBcnJheS5wcm90b3R5cGUuc3BsaWNlLmFwcGx5KGssZykscCs9Zy5sZW5ndGgtMiksZT1lWzFdLDA9PT1lLmxlbmd0aCYmKGU9W2YuY2xvbmUoKV0pKTtnPTA7Zm9yKHZhciBuPWUubGVuZ3RoO2c8bjsrK2cpMD09PWcmJmwubGVuZ3RoP2xbbC5sZW5ndGgtMV0uYWRkQ29tcG9uZW50KGVbZ10pOmwucHVzaChuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5NdWx0aUxpbmVTdHJpbmcoW2VbZ11dKSk7Zz0hMH1nfHwobC5sZW5ndGg/bFtsLmxlbmd0aC0xXS5hZGRDb21wb25lbnQoZi5jbG9uZSgpKTpsPVtuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5NdWx0aUxpbmVTdHJpbmcoW2YuY2xvbmUoKV0pXSl9fWVsc2UgYz1hLnNwbGl0KHRoaXMpO2smJjE8ay5sZW5ndGg/aD0hMDprPVtdO2wmJjE8bC5sZW5ndGg/Zz0hMDpsPVtdO2lmKGh8fGcpYz1kP1trLGxdOmw7cmV0dXJuIGN9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuR2VvbWV0cnkuTXVsdGlMaW5lU3RyaW5nIn0pO09wZW5MYXllcnMuUmVuZGVyZXI9T3BlbkxheWVycy5DbGFzcyh7Y29udGFpbmVyOm51bGwscm9vdDpudWxsLGV4dGVudDpudWxsLGxvY2tlZDohMSxzaXplOm51bGwscmVzb2x1dGlvbjpudWxsLG1hcDpudWxsLGZlYXR1cmVEeDowLGluaXRpYWxpemU6ZnVuY3Rpb24oYSxiKXt0aGlzLmNvbnRhaW5lcj1PcGVuTGF5ZXJzLlV0aWwuZ2V0RWxlbWVudChhKTtPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHRoaXMsYil9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLm1hcD10aGlzLnJlc29sdXRpb249dGhpcy5zaXplPXRoaXMuZXh0ZW50PXRoaXMuY29udGFpbmVyPW51bGx9LHN1cHBvcnRlZDpmdW5jdGlvbigpe3JldHVybiExfSxzZXRFeHRlbnQ6ZnVuY3Rpb24oYSxiKXt0aGlzLmV4dGVudD1hLmNsb25lKCk7aWYodGhpcy5tYXAuYmFzZUxheWVyJiZ0aGlzLm1hcC5iYXNlTGF5ZXIud3JhcERhdGVMaW5lKXt2YXIgYz1hLmdldFdpZHRoKCkvdGhpcy5tYXAuZ2V0RXh0ZW50KCkuZ2V0V2lkdGgoKTsKYT1hLnNjYWxlKDEvYyk7dGhpcy5leHRlbnQ9YS53cmFwRGF0ZUxpbmUodGhpcy5tYXAuZ2V0TWF4RXh0ZW50KCkpLnNjYWxlKGMpfWImJih0aGlzLnJlc29sdXRpb249bnVsbCk7cmV0dXJuITB9LHNldFNpemU6ZnVuY3Rpb24oYSl7dGhpcy5zaXplPWEuY2xvbmUoKTt0aGlzLnJlc29sdXRpb249bnVsbH0sZ2V0UmVzb2x1dGlvbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLnJlc29sdXRpb249dGhpcy5yZXNvbHV0aW9ufHx0aGlzLm1hcC5nZXRSZXNvbHV0aW9uKCl9LGRyYXdGZWF0dXJlOmZ1bmN0aW9uKGEsYil7bnVsbD09YiYmKGI9YS5zdHlsZSk7aWYoYS5nZW9tZXRyeSl7dmFyIGM9YS5nZW9tZXRyeS5nZXRCb3VuZHMoKTtpZihjKXt2YXIgZDt0aGlzLm1hcC5iYXNlTGF5ZXImJnRoaXMubWFwLmJhc2VMYXllci53cmFwRGF0ZUxpbmUmJihkPXRoaXMubWFwLmdldE1heEV4dGVudCgpKTtjLmludGVyc2VjdHNCb3VuZHModGhpcy5leHRlbnQse3dvcmxkQm91bmRzOmR9KT90aGlzLmNhbGN1bGF0ZUZlYXR1cmVEeChjLApkKTpiPXtkaXNwbGF5OiJub25lIn07Yz10aGlzLmRyYXdHZW9tZXRyeShhLmdlb21ldHJ5LGIsYS5pZCk7aWYoIm5vbmUiIT1iLmRpc3BsYXkmJmIubGFiZWwmJiExIT09Yyl7ZD1hLmdlb21ldHJ5LmdldENlbnRyb2lkKCk7aWYoYi5sYWJlbFhPZmZzZXR8fGIubGFiZWxZT2Zmc2V0KXt2YXIgZT1pc05hTihiLmxhYmVsWE9mZnNldCk/MDpiLmxhYmVsWE9mZnNldCxmPWlzTmFOKGIubGFiZWxZT2Zmc2V0KT8wOmIubGFiZWxZT2Zmc2V0LGc9dGhpcy5nZXRSZXNvbHV0aW9uKCk7ZC5tb3ZlKGUqZyxmKmcpfXRoaXMuZHJhd1RleHQoYS5pZCxiLGQpfWVsc2UgdGhpcy5yZW1vdmVUZXh0KGEuaWQpO3JldHVybiBjfX19LGNhbGN1bGF0ZUZlYXR1cmVEeDpmdW5jdGlvbihhLGIpe3RoaXMuZmVhdHVyZUR4PTA7aWYoYil7dmFyIGM9Yi5nZXRXaWR0aCgpO3RoaXMuZmVhdHVyZUR4PU1hdGgucm91bmQoKChhLmxlZnQrYS5yaWdodCkvMi0odGhpcy5leHRlbnQubGVmdCt0aGlzLmV4dGVudC5yaWdodCkvCjIpL2MpKmN9fSxkcmF3R2VvbWV0cnk6ZnVuY3Rpb24oYSxiLGMpe30sZHJhd1RleHQ6ZnVuY3Rpb24oYSxiLGMpe30scmVtb3ZlVGV4dDpmdW5jdGlvbihhKXt9LGNsZWFyOmZ1bmN0aW9uKCl7fSxnZXRGZWF0dXJlSWRGcm9tRXZlbnQ6ZnVuY3Rpb24oYSl7fSxlcmFzZUZlYXR1cmVzOmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuVXRpbC5pc0FycmF5KGEpfHwoYT1bYV0pO2Zvcih2YXIgYj0wLGM9YS5sZW5ndGg7YjxjOysrYil7dmFyIGQ9YVtiXTt0aGlzLmVyYXNlR2VvbWV0cnkoZC5nZW9tZXRyeSxkLmlkKTt0aGlzLnJlbW92ZVRleHQoZC5pZCl9fSxlcmFzZUdlb21ldHJ5OmZ1bmN0aW9uKGEsYil7fSxtb3ZlUm9vdDpmdW5jdGlvbihhKXt9LGdldFJlbmRlckxheWVySWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250YWluZXIuaWR9LGFwcGx5RGVmYXVsdFN5bWJvbGl6ZXI6ZnVuY3Rpb24oYSl7dmFyIGI9T3BlbkxheWVycy5VdGlsLmV4dGVuZCh7fSxPcGVuTGF5ZXJzLlJlbmRlcmVyLmRlZmF1bHRTeW1ib2xpemVyKTsKITE9PT1hLnN0cm9rZSYmKGRlbGV0ZSBiLnN0cm9rZVdpZHRoLGRlbGV0ZSBiLnN0cm9rZUNvbG9yKTshMT09PWEuZmlsbCYmZGVsZXRlIGIuZmlsbENvbG9yO09wZW5MYXllcnMuVXRpbC5leHRlbmQoYixhKTtyZXR1cm4gYn0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5SZW5kZXJlciJ9KTtPcGVuTGF5ZXJzLlJlbmRlcmVyLmRlZmF1bHRTeW1ib2xpemVyPXtmaWxsQ29sb3I6IiMwMDAwMDAiLHN0cm9rZUNvbG9yOiIjMDAwMDAwIixzdHJva2VXaWR0aDoyLGZpbGxPcGFjaXR5OjEsc3Ryb2tlT3BhY2l0eToxLHBvaW50UmFkaXVzOjAsbGFiZWxBbGlnbjoiY20ifTsKT3BlbkxheWVycy5SZW5kZXJlci5zeW1ib2w9e3N0YXI6WzM1MCw3NSwzNzksMTYxLDQ2OSwxNjEsMzk3LDIxNSw0MjMsMzAxLDM1MCwyNTAsMjc3LDMwMSwzMDMsMjE1LDIzMSwxNjEsMzIxLDE2MSwzNTAsNzVdLGNyb3NzOls0LDAsNiwwLDYsNCwxMCw0LDEwLDYsNiw2LDYsMTAsNCwxMCw0LDYsMCw2LDAsNCw0LDQsNCwwXSx4OlswLDAsMjUsMCw1MCwzNSw3NSwwLDEwMCwwLDY1LDUwLDEwMCwxMDAsNzUsMTAwLDUwLDY1LDI1LDEwMCwwLDEwMCwzNSw1MCwwLDBdLHNxdWFyZTpbMCwwLDAsMSwxLDEsMSwwLDAsMF0sdHJpYW5nbGU6WzAsMTAsMTAsMTAsNSwwLDAsMTBdfTtPcGVuTGF5ZXJzLkVsZW1lbnRzSW5kZXhlcj1PcGVuTGF5ZXJzLkNsYXNzKHttYXhaSW5kZXg6bnVsbCxvcmRlcjpudWxsLGluZGljZXM6bnVsbCxjb21wYXJlOm51bGwsaW5pdGlhbGl6ZTpmdW5jdGlvbihhKXt0aGlzLmNvbXBhcmU9YT9PcGVuTGF5ZXJzLkVsZW1lbnRzSW5kZXhlci5JbmRleGluZ01ldGhvZHMuWl9PUkRFUl9ZX09SREVSOk9wZW5MYXllcnMuRWxlbWVudHNJbmRleGVyLkluZGV4aW5nTWV0aG9kcy5aX09SREVSX0RSQVdJTkdfT1JERVI7dGhpcy5jbGVhcigpfSxpbnNlcnQ6ZnVuY3Rpb24oYSl7dGhpcy5leGlzdHMoYSkmJnRoaXMucmVtb3ZlKGEpO3ZhciBiPWEuaWQ7dGhpcy5kZXRlcm1pbmVaSW5kZXgoYSk7Zm9yKHZhciBjPS0xLGQ9dGhpcy5vcmRlci5sZW5ndGgsZTsxPGQtYzspZT1wYXJzZUludCgoYytkKS8yKSwwPHRoaXMuY29tcGFyZSh0aGlzLGEsT3BlbkxheWVycy5VdGlsLmdldEVsZW1lbnQodGhpcy5vcmRlcltlXSkpP2M9ZTpkPWU7dGhpcy5vcmRlci5zcGxpY2UoZCwKMCxiKTt0aGlzLmluZGljZXNbYl09dGhpcy5nZXRaSW5kZXgoYSk7cmV0dXJuIHRoaXMuZ2V0TmV4dEVsZW1lbnQoZCl9LHJlbW92ZTpmdW5jdGlvbihhKXthPWEuaWQ7dmFyIGI9T3BlbkxheWVycy5VdGlsLmluZGV4T2YodGhpcy5vcmRlcixhKTswPD1iJiYodGhpcy5vcmRlci5zcGxpY2UoYiwxKSxkZWxldGUgdGhpcy5pbmRpY2VzW2FdLHRoaXMubWF4WkluZGV4PTA8dGhpcy5vcmRlci5sZW5ndGg/dGhpcy5pbmRpY2VzW3RoaXMub3JkZXJbdGhpcy5vcmRlci5sZW5ndGgtMV1dOjApfSxjbGVhcjpmdW5jdGlvbigpe3RoaXMub3JkZXI9W107dGhpcy5pbmRpY2VzPXt9O3RoaXMubWF4WkluZGV4PTB9LGV4aXN0czpmdW5jdGlvbihhKXtyZXR1cm4gbnVsbCE9dGhpcy5pbmRpY2VzW2EuaWRdfSxnZXRaSW5kZXg6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuX3N0eWxlLmdyYXBoaWNaSW5kZXh9LGRldGVybWluZVpJbmRleDpmdW5jdGlvbihhKXt2YXIgYj1hLl9zdHlsZS5ncmFwaGljWkluZGV4OwpudWxsPT1iPyhiPXRoaXMubWF4WkluZGV4LGEuX3N0eWxlLmdyYXBoaWNaSW5kZXg9Yik6Yj50aGlzLm1heFpJbmRleCYmKHRoaXMubWF4WkluZGV4PWIpfSxnZXROZXh0RWxlbWVudDpmdW5jdGlvbihhKXthKz0xO2lmKGE8dGhpcy5vcmRlci5sZW5ndGgpe3ZhciBiPU9wZW5MYXllcnMuVXRpbC5nZXRFbGVtZW50KHRoaXMub3JkZXJbYV0pO3ZvaWQgMD09YiYmKGI9dGhpcy5nZXROZXh0RWxlbWVudChhKSk7cmV0dXJuIGJ9cmV0dXJuIG51bGx9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuRWxlbWVudHNJbmRleGVyIn0pOwpPcGVuTGF5ZXJzLkVsZW1lbnRzSW5kZXhlci5JbmRleGluZ01ldGhvZHM9e1pfT1JERVI6ZnVuY3Rpb24oYSxiLGMpe2I9YS5nZXRaSW5kZXgoYik7dmFyIGQ9MDtjJiYoYT1hLmdldFpJbmRleChjKSxkPWItYSk7cmV0dXJuIGR9LFpfT1JERVJfRFJBV0lOR19PUkRFUjpmdW5jdGlvbihhLGIsYyl7YT1PcGVuTGF5ZXJzLkVsZW1lbnRzSW5kZXhlci5JbmRleGluZ01ldGhvZHMuWl9PUkRFUihhLGIsYyk7YyYmMD09YSYmKGE9MSk7cmV0dXJuIGF9LFpfT1JERVJfWV9PUkRFUjpmdW5jdGlvbihhLGIsYyl7YT1PcGVuTGF5ZXJzLkVsZW1lbnRzSW5kZXhlci5JbmRleGluZ01ldGhvZHMuWl9PUkRFUihhLGIsYyk7YyYmMD09PWEmJihiPWMuX2JvdW5kc0JvdHRvbS1iLl9ib3VuZHNCb3R0b20sYT0wPT09Yj8xOmIpO3JldHVybiBhfX07Ck9wZW5MYXllcnMuUmVuZGVyZXIuRWxlbWVudHM9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLlJlbmRlcmVyLHtyZW5kZXJlclJvb3Q6bnVsbCxyb290Om51bGwsdmVjdG9yUm9vdDpudWxsLHRleHRSb290Om51bGwseG1sbnM6bnVsbCx4T2Zmc2V0OjAsaW5kZXhlcjpudWxsLEJBQ0tHUk9VTkRfSURfU1VGRklYOiJfYmFja2dyb3VuZCIsTEFCRUxfSURfU1VGRklYOiJfbGFiZWwiLExBQkVMX09VVExJTkVfU1VGRklYOiJfb3V0bGluZSIsaW5pdGlhbGl6ZTpmdW5jdGlvbihhLGIpe09wZW5MYXllcnMuUmVuZGVyZXIucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMucmVuZGVyZXJSb290PXRoaXMuY3JlYXRlUmVuZGVyUm9vdCgpO3RoaXMucm9vdD10aGlzLmNyZWF0ZVJvb3QoIl9yb290Iik7dGhpcy52ZWN0b3JSb290PXRoaXMuY3JlYXRlUm9vdCgiX3Zyb290Iik7dGhpcy50ZXh0Um9vdD10aGlzLmNyZWF0ZVJvb3QoIl90cm9vdCIpO3RoaXMucm9vdC5hcHBlbmRDaGlsZCh0aGlzLnZlY3RvclJvb3QpOwp0aGlzLnJvb3QuYXBwZW5kQ2hpbGQodGhpcy50ZXh0Um9vdCk7dGhpcy5yZW5kZXJlclJvb3QuYXBwZW5kQ2hpbGQodGhpcy5yb290KTt0aGlzLmNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLnJlbmRlcmVyUm9vdCk7YiYmKGIuekluZGV4aW5nfHxiLnlPcmRlcmluZykmJih0aGlzLmluZGV4ZXI9bmV3IE9wZW5MYXllcnMuRWxlbWVudHNJbmRleGVyKGIueU9yZGVyaW5nKSl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmNsZWFyKCk7dGhpcy54bWxucz10aGlzLnJvb3Q9dGhpcy5yZW5kZXJlclJvb3Q9bnVsbDtPcGVuTGF5ZXJzLlJlbmRlcmVyLnByb3RvdHlwZS5kZXN0cm95LmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sY2xlYXI6ZnVuY3Rpb24oKXt2YXIgYSxiPXRoaXMudmVjdG9yUm9vdDtpZihiKWZvcig7YT1iLmZpcnN0Q2hpbGQ7KWIucmVtb3ZlQ2hpbGQoYSk7aWYoYj10aGlzLnRleHRSb290KWZvcig7YT1iLmZpcnN0Q2hpbGQ7KWIucmVtb3ZlQ2hpbGQoYSk7dGhpcy5pbmRleGVyJiYKdGhpcy5pbmRleGVyLmNsZWFyKCl9LHNldEV4dGVudDpmdW5jdGlvbihhLGIpe3ZhciBjPU9wZW5MYXllcnMuUmVuZGVyZXIucHJvdG90eXBlLnNldEV4dGVudC5hcHBseSh0aGlzLGFyZ3VtZW50cyksZD10aGlzLmdldFJlc29sdXRpb24oKTtpZih0aGlzLm1hcC5iYXNlTGF5ZXImJnRoaXMubWFwLmJhc2VMYXllci53cmFwRGF0ZUxpbmUpe3ZhciBlLGY9YS5nZXRXaWR0aCgpL3RoaXMubWFwLmdldEV4dGVudCgpLmdldFdpZHRoKCk7YT1hLnNjYWxlKDEvZik7Zj10aGlzLm1hcC5nZXRNYXhFeHRlbnQoKTtmLnJpZ2h0PmEubGVmdCYmZi5yaWdodDxhLnJpZ2h0P2U9ITA6Zi5sZWZ0PmEubGVmdCYmZi5sZWZ0PGEucmlnaHQmJihlPSExKTtpZihlIT09dGhpcy5yaWdodE9mRGF0ZUxpbmV8fGIpYz0hMSx0aGlzLnhPZmZzZXQ9ITA9PT1lP2YuZ2V0V2lkdGgoKS9kOjA7dGhpcy5yaWdodE9mRGF0ZUxpbmU9ZX1yZXR1cm4gY30sZ2V0Tm9kZVR5cGU6ZnVuY3Rpb24oYSxiKXt9LGRyYXdHZW9tZXRyeTpmdW5jdGlvbihhLApiLGMpe3ZhciBkPWEuQ0xBU1NfTkFNRSxlPSEwO2lmKCJPcGVuTGF5ZXJzLkdlb21ldHJ5LkNvbGxlY3Rpb24iPT1kfHwiT3BlbkxheWVycy5HZW9tZXRyeS5NdWx0aVBvaW50Ij09ZHx8Ik9wZW5MYXllcnMuR2VvbWV0cnkuTXVsdGlMaW5lU3RyaW5nIj09ZHx8Ik9wZW5MYXllcnMuR2VvbWV0cnkuTXVsdGlQb2x5Z29uIj09ZCl7Zm9yKHZhciBkPTAsZj1hLmNvbXBvbmVudHMubGVuZ3RoO2Q8ZjtkKyspZT10aGlzLmRyYXdHZW9tZXRyeShhLmNvbXBvbmVudHNbZF0sYixjKSYmZTtyZXR1cm4gZX1kPWU9ITE7Im5vbmUiIT1iLmRpc3BsYXkmJihiLmJhY2tncm91bmRHcmFwaGljP3RoaXMucmVkcmF3QmFja2dyb3VuZE5vZGUoYS5pZCxhLGIsYyk6ZD0hMCxlPXRoaXMucmVkcmF3Tm9kZShhLmlkLGEsYixjKSk7ITE9PWUmJihiPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGEuaWQpKSYmKGIuX3N0eWxlLmJhY2tncm91bmRHcmFwaGljJiYoZD0hMCksYi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGIpKTsKZCYmKGI9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYS5pZCt0aGlzLkJBQ0tHUk9VTkRfSURfU1VGRklYKSkmJmIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChiKTtyZXR1cm4gZX0scmVkcmF3Tm9kZTpmdW5jdGlvbihhLGIsYyxkKXtjPXRoaXMuYXBwbHlEZWZhdWx0U3ltYm9saXplcihjKTthPXRoaXMubm9kZUZhY3RvcnkoYSx0aGlzLmdldE5vZGVUeXBlKGIsYykpO2EuX2ZlYXR1cmVJZD1kO2EuX2JvdW5kc0JvdHRvbT1iLmdldEJvdW5kcygpLmJvdHRvbTthLl9nZW9tZXRyeUNsYXNzPWIuQ0xBU1NfTkFNRTthLl9zdHlsZT1jO2I9dGhpcy5kcmF3R2VvbWV0cnlOb2RlKGEsYixjKTtpZighMT09PWIpcmV0dXJuITE7YT1iLm5vZGU7dGhpcy5pbmRleGVyPyhjPXRoaXMuaW5kZXhlci5pbnNlcnQoYSkpP3RoaXMudmVjdG9yUm9vdC5pbnNlcnRCZWZvcmUoYSxjKTp0aGlzLnZlY3RvclJvb3QuYXBwZW5kQ2hpbGQoYSk6YS5wYXJlbnROb2RlIT09dGhpcy52ZWN0b3JSb290JiZ0aGlzLnZlY3RvclJvb3QuYXBwZW5kQ2hpbGQoYSk7CnRoaXMucG9zdERyYXcoYSk7cmV0dXJuIGIuY29tcGxldGV9LHJlZHJhd0JhY2tncm91bmROb2RlOmZ1bmN0aW9uKGEsYixjLGQpe2M9T3BlbkxheWVycy5VdGlsLmV4dGVuZCh7fSxjKTtjLmV4dGVybmFsR3JhcGhpYz1jLmJhY2tncm91bmRHcmFwaGljO2MuZ3JhcGhpY1hPZmZzZXQ9Yy5iYWNrZ3JvdW5kWE9mZnNldDtjLmdyYXBoaWNZT2Zmc2V0PWMuYmFja2dyb3VuZFlPZmZzZXQ7Yy5ncmFwaGljWkluZGV4PWMuYmFja2dyb3VuZEdyYXBoaWNaSW5kZXg7Yy5ncmFwaGljV2lkdGg9Yy5iYWNrZ3JvdW5kV2lkdGh8fGMuZ3JhcGhpY1dpZHRoO2MuZ3JhcGhpY0hlaWdodD1jLmJhY2tncm91bmRIZWlnaHR8fGMuZ3JhcGhpY0hlaWdodDtjLmJhY2tncm91bmRHcmFwaGljPW51bGw7Yy5iYWNrZ3JvdW5kWE9mZnNldD1udWxsO2MuYmFja2dyb3VuZFlPZmZzZXQ9bnVsbDtjLmJhY2tncm91bmRHcmFwaGljWkluZGV4PW51bGw7cmV0dXJuIHRoaXMucmVkcmF3Tm9kZShhK3RoaXMuQkFDS0dST1VORF9JRF9TVUZGSVgsCmIsYyxudWxsKX0sZHJhd0dlb21ldHJ5Tm9kZTpmdW5jdGlvbihhLGIsYyl7Yz1jfHxhLl9zdHlsZTt2YXIgZD17aXNGaWxsZWQ6dm9pZCAwPT09Yy5maWxsPyEwOmMuZmlsbCxpc1N0cm9rZWQ6dm9pZCAwPT09Yy5zdHJva2U/ISFjLnN0cm9rZVdpZHRoOmMuc3Ryb2tlfSxlO3N3aXRjaChiLkNMQVNTX05BTUUpe2Nhc2UgIk9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQiOiExPT09Yy5ncmFwaGljJiYoZC5pc0ZpbGxlZD0hMSxkLmlzU3Ryb2tlZD0hMSk7ZT10aGlzLmRyYXdQb2ludChhLGIpO2JyZWFrO2Nhc2UgIk9wZW5MYXllcnMuR2VvbWV0cnkuTGluZVN0cmluZyI6ZC5pc0ZpbGxlZD0hMTtlPXRoaXMuZHJhd0xpbmVTdHJpbmcoYSxiKTticmVhaztjYXNlICJPcGVuTGF5ZXJzLkdlb21ldHJ5LkxpbmVhclJpbmciOmU9dGhpcy5kcmF3TGluZWFyUmluZyhhLGIpO2JyZWFrO2Nhc2UgIk9wZW5MYXllcnMuR2VvbWV0cnkuUG9seWdvbiI6ZT10aGlzLmRyYXdQb2x5Z29uKGEsYik7YnJlYWs7CmNhc2UgIk9wZW5MYXllcnMuR2VvbWV0cnkuUmVjdGFuZ2xlIjplPXRoaXMuZHJhd1JlY3RhbmdsZShhLGIpfWEuX29wdGlvbnM9ZDtyZXR1cm4hMSE9ZT97bm9kZTp0aGlzLnNldFN0eWxlKGEsYyxkLGIpLGNvbXBsZXRlOmV9OiExfSxwb3N0RHJhdzpmdW5jdGlvbihhKXt9LGRyYXdQb2ludDpmdW5jdGlvbihhLGIpe30sZHJhd0xpbmVTdHJpbmc6ZnVuY3Rpb24oYSxiKXt9LGRyYXdMaW5lYXJSaW5nOmZ1bmN0aW9uKGEsYil7fSxkcmF3UG9seWdvbjpmdW5jdGlvbihhLGIpe30sZHJhd1JlY3RhbmdsZTpmdW5jdGlvbihhLGIpe30sZHJhd0NpcmNsZTpmdW5jdGlvbihhLGIpe30scmVtb3ZlVGV4dDpmdW5jdGlvbihhKXt2YXIgYj1kb2N1bWVudC5nZXRFbGVtZW50QnlJZChhK3RoaXMuTEFCRUxfSURfU1VGRklYKTtiJiZ0aGlzLnRleHRSb290LnJlbW92ZUNoaWxkKGIpOyhhPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGErdGhpcy5MQUJFTF9PVVRMSU5FX1NVRkZJWCkpJiZ0aGlzLnRleHRSb290LnJlbW92ZUNoaWxkKGEpfSwKZ2V0RmVhdHVyZUlkRnJvbUV2ZW50OmZ1bmN0aW9uKGEpe3ZhciBiPWEudGFyZ2V0LGM9YiYmYi5jb3JyZXNwb25kaW5nVXNlRWxlbWVudDtyZXR1cm4oYz9jOmJ8fGEuc3JjRWxlbWVudCkuX2ZlYXR1cmVJZH0sZXJhc2VHZW9tZXRyeTpmdW5jdGlvbihhLGIpe2lmKCJPcGVuTGF5ZXJzLkdlb21ldHJ5Lk11bHRpUG9pbnQiPT1hLkNMQVNTX05BTUV8fCJPcGVuTGF5ZXJzLkdlb21ldHJ5Lk11bHRpTGluZVN0cmluZyI9PWEuQ0xBU1NfTkFNRXx8Ik9wZW5MYXllcnMuR2VvbWV0cnkuTXVsdGlQb2x5Z29uIj09YS5DTEFTU19OQU1FfHwiT3BlbkxheWVycy5HZW9tZXRyeS5Db2xsZWN0aW9uIj09YS5DTEFTU19OQU1FKWZvcih2YXIgYz0wLGQ9YS5jb21wb25lbnRzLmxlbmd0aDtjPGQ7YysrKXRoaXMuZXJhc2VHZW9tZXRyeShhLmNvbXBvbmVudHNbY10sYik7ZWxzZShjPU9wZW5MYXllcnMuVXRpbC5nZXRFbGVtZW50KGEuaWQpKSYmYy5wYXJlbnROb2RlJiYoYy5nZW9tZXRyeSYmKGMuZ2VvbWV0cnkuZGVzdHJveSgpLApjLmdlb21ldHJ5PW51bGwpLGMucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChjKSx0aGlzLmluZGV4ZXImJnRoaXMuaW5kZXhlci5yZW1vdmUoYyksYy5fc3R5bGUuYmFja2dyb3VuZEdyYXBoaWMmJihjPU9wZW5MYXllcnMuVXRpbC5nZXRFbGVtZW50KGEuaWQrdGhpcy5CQUNLR1JPVU5EX0lEX1NVRkZJWCkpJiZjLnBhcmVudE5vZGUmJmMucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChjKSl9LG5vZGVGYWN0b3J5OmZ1bmN0aW9uKGEsYil7dmFyIGM9T3BlbkxheWVycy5VdGlsLmdldEVsZW1lbnQoYSk7Yz90aGlzLm5vZGVUeXBlQ29tcGFyZShjLGIpfHwoYy5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGMpLGM9dGhpcy5ub2RlRmFjdG9yeShhLGIpKTpjPXRoaXMuY3JlYXRlTm9kZShiLGEpO3JldHVybiBjfSxub2RlVHlwZUNvbXBhcmU6ZnVuY3Rpb24oYSxiKXt9LGNyZWF0ZU5vZGU6ZnVuY3Rpb24oYSxiKXt9LG1vdmVSb290OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMucm9vdDthLnJvb3QucGFyZW50Tm9kZT09CnRoaXMucmVuZGVyZXJSb290JiYoYj1hLnJvb3QpO2IucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChiKTthLnJlbmRlcmVyUm9vdC5hcHBlbmRDaGlsZChiKX0sZ2V0UmVuZGVyTGF5ZXJJZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnJvb3QucGFyZW50Tm9kZS5wYXJlbnROb2RlLmlkfSxpc0NvbXBsZXhTeW1ib2w6ZnVuY3Rpb24oYSl7cmV0dXJuImNpcmNsZSIhPWEmJiEhYX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5SZW5kZXJlci5FbGVtZW50cyJ9KTtPcGVuTGF5ZXJzLkNvbnRyb2w9T3BlbkxheWVycy5DbGFzcyh7aWQ6bnVsbCxtYXA6bnVsbCxkaXY6bnVsbCx0eXBlOm51bGwsYWxsb3dTZWxlY3Rpb246ITEsZGlzcGxheUNsYXNzOiIiLHRpdGxlOiIiLGF1dG9BY3RpdmF0ZTohMSxhY3RpdmU6bnVsbCxoYW5kbGVyT3B0aW9uczpudWxsLGhhbmRsZXI6bnVsbCxldmVudExpc3RlbmVyczpudWxsLGV2ZW50czpudWxsLGluaXRpYWxpemU6ZnVuY3Rpb24oYSl7dGhpcy5kaXNwbGF5Q2xhc3M9dGhpcy5DTEFTU19OQU1FLnJlcGxhY2UoIk9wZW5MYXllcnMuIiwib2wiKS5yZXBsYWNlKC9cLi9nLCIiKTtPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHRoaXMsYSk7dGhpcy5ldmVudHM9bmV3IE9wZW5MYXllcnMuRXZlbnRzKHRoaXMpO2lmKHRoaXMuZXZlbnRMaXN0ZW5lcnMgaW5zdGFuY2VvZiBPYmplY3QpdGhpcy5ldmVudHMub24odGhpcy5ldmVudExpc3RlbmVycyk7bnVsbD09dGhpcy5pZCYmKHRoaXMuaWQ9T3BlbkxheWVycy5VdGlsLmNyZWF0ZVVuaXF1ZUlEKHRoaXMuQ0xBU1NfTkFNRSsKIl8iKSl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmV2ZW50cyYmKHRoaXMuZXZlbnRMaXN0ZW5lcnMmJnRoaXMuZXZlbnRzLnVuKHRoaXMuZXZlbnRMaXN0ZW5lcnMpLHRoaXMuZXZlbnRzLmRlc3Ryb3koKSx0aGlzLmV2ZW50cz1udWxsKTt0aGlzLmV2ZW50TGlzdGVuZXJzPW51bGw7dGhpcy5oYW5kbGVyJiYodGhpcy5oYW5kbGVyLmRlc3Ryb3koKSx0aGlzLmhhbmRsZXI9bnVsbCk7aWYodGhpcy5oYW5kbGVycyl7Zm9yKHZhciBhIGluIHRoaXMuaGFuZGxlcnMpdGhpcy5oYW5kbGVycy5oYXNPd25Qcm9wZXJ0eShhKSYmImZ1bmN0aW9uIj09dHlwZW9mIHRoaXMuaGFuZGxlcnNbYV0uZGVzdHJveSYmdGhpcy5oYW5kbGVyc1thXS5kZXN0cm95KCk7dGhpcy5oYW5kbGVycz1udWxsfXRoaXMubWFwJiYodGhpcy5tYXAucmVtb3ZlQ29udHJvbCh0aGlzKSx0aGlzLm1hcD1udWxsKTt0aGlzLmRpdj1udWxsfSxzZXRNYXA6ZnVuY3Rpb24oYSl7dGhpcy5tYXA9YTt0aGlzLmhhbmRsZXImJgp0aGlzLmhhbmRsZXIuc2V0TWFwKGEpfSxkcmF3OmZ1bmN0aW9uKGEpe251bGw9PXRoaXMuZGl2JiYodGhpcy5kaXY9T3BlbkxheWVycy5VdGlsLmNyZWF0ZURpdih0aGlzLmlkKSx0aGlzLmRpdi5jbGFzc05hbWU9dGhpcy5kaXNwbGF5Q2xhc3MsdGhpcy5hbGxvd1NlbGVjdGlvbnx8KHRoaXMuZGl2LmNsYXNzTmFtZSs9IiBvbENvbnRyb2xOb1NlbGVjdCIsdGhpcy5kaXYuc2V0QXR0cmlidXRlKCJ1bnNlbGVjdGFibGUiLCJvbiIsMCksdGhpcy5kaXYub25zZWxlY3RzdGFydD1PcGVuTGF5ZXJzLkZ1bmN0aW9uLkZhbHNlKSwiIiE9dGhpcy50aXRsZSYmKHRoaXMuZGl2LnRpdGxlPXRoaXMudGl0bGUpKTtudWxsIT1hJiYodGhpcy5wb3NpdGlvbj1hLmNsb25lKCkpO3RoaXMubW92ZVRvKHRoaXMucG9zaXRpb24pO3JldHVybiB0aGlzLmRpdn0sbW92ZVRvOmZ1bmN0aW9uKGEpe251bGwhPWEmJm51bGwhPXRoaXMuZGl2JiYodGhpcy5kaXYuc3R5bGUubGVmdD1hLngrInB4Iix0aGlzLmRpdi5zdHlsZS50b3A9CmEueSsicHgiKX0sYWN0aXZhdGU6ZnVuY3Rpb24oKXtpZih0aGlzLmFjdGl2ZSlyZXR1cm4hMTt0aGlzLmhhbmRsZXImJnRoaXMuaGFuZGxlci5hY3RpdmF0ZSgpO3RoaXMuYWN0aXZlPSEwO3RoaXMubWFwJiZPcGVuTGF5ZXJzLkVsZW1lbnQuYWRkQ2xhc3ModGhpcy5tYXAudmlld1BvcnREaXYsdGhpcy5kaXNwbGF5Q2xhc3MucmVwbGFjZSgvIC9nLCIiKSsiQWN0aXZlIik7dGhpcy5ldmVudHMudHJpZ2dlckV2ZW50KCJhY3RpdmF0ZSIpO3JldHVybiEwfSxkZWFjdGl2YXRlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYWN0aXZlPyh0aGlzLmhhbmRsZXImJnRoaXMuaGFuZGxlci5kZWFjdGl2YXRlKCksdGhpcy5hY3RpdmU9ITEsdGhpcy5tYXAmJk9wZW5MYXllcnMuRWxlbWVudC5yZW1vdmVDbGFzcyh0aGlzLm1hcC52aWV3UG9ydERpdix0aGlzLmRpc3BsYXlDbGFzcy5yZXBsYWNlKC8gL2csIiIpKyJBY3RpdmUiKSx0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoImRlYWN0aXZhdGUiKSwKITApOiExfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkNvbnRyb2wifSk7T3BlbkxheWVycy5Db250cm9sLlRZUEVfQlVUVE9OPTE7T3BlbkxheWVycy5Db250cm9sLlRZUEVfVE9HR0xFPTI7T3BlbkxheWVycy5Db250cm9sLlRZUEVfVE9PTD0zO09wZW5MYXllcnMuQ29udHJvbC5QYW5lbD1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuQ29udHJvbCx7Y29udHJvbHM6bnVsbCxhdXRvQWN0aXZhdGU6ITAsZGVmYXVsdENvbnRyb2w6bnVsbCxzYXZlU3RhdGU6ITEsYWxsb3dEZXByZXNzOiExLGFjdGl2ZVN0YXRlOm51bGwsaW5pdGlhbGl6ZTpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLkNvbnRyb2wucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxbYV0pO3RoaXMuY29udHJvbHM9W107dGhpcy5hY3RpdmVTdGF0ZT17fX0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMubWFwJiZ0aGlzLm1hcC5ldmVudHMudW5yZWdpc3RlcigiYnV0dG9uY2xpY2siLHRoaXMsdGhpcy5vbkJ1dHRvbkNsaWNrKTtPcGVuTGF5ZXJzLkNvbnRyb2wucHJvdG90eXBlLmRlc3Ryb3kuYXBwbHkodGhpcyxhcmd1bWVudHMpO2Zvcih2YXIgYSxiPXRoaXMuY29udHJvbHMubGVuZ3RoLTE7MDw9YjtiLS0pYT10aGlzLmNvbnRyb2xzW2JdLGEuZXZlbnRzJiYKYS5ldmVudHMudW4oe2FjdGl2YXRlOnRoaXMuaWNvbk9uLGRlYWN0aXZhdGU6dGhpcy5pY29uT2ZmfSksYS5wYW5lbF9kaXY9bnVsbDt0aGlzLmFjdGl2ZVN0YXRlPW51bGx9LGFjdGl2YXRlOmZ1bmN0aW9uKCl7aWYoT3BlbkxheWVycy5Db250cm9sLnByb3RvdHlwZS5hY3RpdmF0ZS5hcHBseSh0aGlzLGFyZ3VtZW50cykpe2Zvcih2YXIgYSxiPTAsYz10aGlzLmNvbnRyb2xzLmxlbmd0aDtiPGM7YisrKWE9dGhpcy5jb250cm9sc1tiXSwoYT09PXRoaXMuZGVmYXVsdENvbnRyb2x8fHRoaXMuc2F2ZVN0YXRlJiZ0aGlzLmFjdGl2ZVN0YXRlW2EuaWRdKSYmYS5hY3RpdmF0ZSgpOyEwPT09dGhpcy5zYXZlU3RhdGUmJih0aGlzLmRlZmF1bHRDb250cm9sPW51bGwpO3RoaXMucmVkcmF3KCk7cmV0dXJuITB9cmV0dXJuITF9LGRlYWN0aXZhdGU6ZnVuY3Rpb24oKXtpZihPcGVuTGF5ZXJzLkNvbnRyb2wucHJvdG90eXBlLmRlYWN0aXZhdGUuYXBwbHkodGhpcyxhcmd1bWVudHMpKXtmb3IodmFyIGEsCmI9MCxjPXRoaXMuY29udHJvbHMubGVuZ3RoO2I8YztiKyspYT10aGlzLmNvbnRyb2xzW2JdLHRoaXMuYWN0aXZlU3RhdGVbYS5pZF09YS5kZWFjdGl2YXRlKCk7dGhpcy5yZWRyYXcoKTtyZXR1cm4hMH1yZXR1cm4hMX0sZHJhdzpmdW5jdGlvbigpe09wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuZHJhdy5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5vdXRzaWRlVmlld3BvcnQ/KHRoaXMuZXZlbnRzLmF0dGFjaFRvRWxlbWVudCh0aGlzLmRpdiksdGhpcy5ldmVudHMucmVnaXN0ZXIoImJ1dHRvbmNsaWNrIix0aGlzLHRoaXMub25CdXR0b25DbGljaykpOnRoaXMubWFwLmV2ZW50cy5yZWdpc3RlcigiYnV0dG9uY2xpY2siLHRoaXMsdGhpcy5vbkJ1dHRvbkNsaWNrKTt0aGlzLmFkZENvbnRyb2xzVG9NYXAodGhpcy5jb250cm9scyk7cmV0dXJuIHRoaXMuZGl2fSxyZWRyYXc6ZnVuY3Rpb24oKXtmb3IodmFyIGE9dGhpcy5kaXYuY2hpbGROb2Rlcy5sZW5ndGgtMTswPD1hO2EtLSl0aGlzLmRpdi5yZW1vdmVDaGlsZCh0aGlzLmRpdi5jaGlsZE5vZGVzW2FdKTsKdGhpcy5kaXYuaW5uZXJIVE1MPSIiO2lmKHRoaXMuYWN0aXZlKWZvcih2YXIgYT0wLGI9dGhpcy5jb250cm9scy5sZW5ndGg7YTxiO2ErKyl0aGlzLmRpdi5hcHBlbmRDaGlsZCh0aGlzLmNvbnRyb2xzW2FdLnBhbmVsX2Rpdil9LGFjdGl2YXRlQ29udHJvbDpmdW5jdGlvbihhKXtpZighdGhpcy5hY3RpdmUpcmV0dXJuITE7aWYoYS50eXBlPT1PcGVuTGF5ZXJzLkNvbnRyb2wuVFlQRV9CVVRUT04pYS50cmlnZ2VyKCk7ZWxzZSBpZihhLnR5cGU9PU9wZW5MYXllcnMuQ29udHJvbC5UWVBFX1RPR0dMRSlhLmFjdGl2ZT9hLmRlYWN0aXZhdGUoKTphLmFjdGl2YXRlKCk7ZWxzZSBpZih0aGlzLmFsbG93RGVwcmVzcyYmYS5hY3RpdmUpYS5kZWFjdGl2YXRlKCk7ZWxzZXtmb3IodmFyIGIsYz0wLGQ9dGhpcy5jb250cm9scy5sZW5ndGg7YzxkO2MrKyliPXRoaXMuY29udHJvbHNbY10sYj09YXx8Yi50eXBlIT09T3BlbkxheWVycy5Db250cm9sLlRZUEVfVE9PTCYmbnVsbCE9Yi50eXBlfHxiLmRlYWN0aXZhdGUoKTsKYS5hY3RpdmF0ZSgpfX0sYWRkQ29udHJvbHM6ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5VdGlsLmlzQXJyYXkoYSl8fChhPVthXSk7dGhpcy5jb250cm9scz10aGlzLmNvbnRyb2xzLmNvbmNhdChhKTtmb3IodmFyIGI9MCxjPWEubGVuZ3RoO2I8YztiKyspe3ZhciBkPWFbYl0sZT10aGlzLmNyZWF0ZUNvbnRyb2xNYXJrdXAoZCk7T3BlbkxheWVycy5FbGVtZW50LmFkZENsYXNzKGUsZC5kaXNwbGF5Q2xhc3MrIkl0ZW1JbmFjdGl2ZSIpO09wZW5MYXllcnMuRWxlbWVudC5hZGRDbGFzcyhlLCJvbEJ1dHRvbiIpOyIiPT1kLnRpdGxlfHxlLnRpdGxlfHwoZS50aXRsZT1kLnRpdGxlKTtkLnBhbmVsX2Rpdj1lfXRoaXMubWFwJiYodGhpcy5hZGRDb250cm9sc1RvTWFwKGEpLHRoaXMucmVkcmF3KCkpfSxjcmVhdGVDb250cm9sTWFya3VwOmZ1bmN0aW9uKGEpe3JldHVybiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKX0sYWRkQ29udHJvbHNUb01hcDpmdW5jdGlvbihhKXtmb3IodmFyIGIsCmM9MCxkPWEubGVuZ3RoO2M8ZDtjKyspYj1hW2NdLCEwPT09Yi5hdXRvQWN0aXZhdGU/KGIuYXV0b0FjdGl2YXRlPSExLHRoaXMubWFwLmFkZENvbnRyb2woYiksYi5hdXRvQWN0aXZhdGU9ITApOih0aGlzLm1hcC5hZGRDb250cm9sKGIpLGIuZGVhY3RpdmF0ZSgpKSxiLmV2ZW50cy5vbih7YWN0aXZhdGU6dGhpcy5pY29uT24sZGVhY3RpdmF0ZTp0aGlzLmljb25PZmZ9KX0saWNvbk9uOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5wYW5lbF9kaXY7YS5jbGFzc05hbWU9YS5jbGFzc05hbWUucmVwbGFjZShSZWdFeHAoIlxcYigiK3RoaXMuZGlzcGxheUNsYXNzKyJJdGVtKUluYWN0aXZlXFxiIiksIiQxQWN0aXZlIil9LGljb25PZmY6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnBhbmVsX2RpdjthLmNsYXNzTmFtZT1hLmNsYXNzTmFtZS5yZXBsYWNlKFJlZ0V4cCgiXFxiKCIrdGhpcy5kaXNwbGF5Q2xhc3MrIkl0ZW0pQWN0aXZlXFxiIiksIiQxSW5hY3RpdmUiKX0sb25CdXR0b25DbGljazpmdW5jdGlvbihhKXt2YXIgYj0KdGhpcy5jb250cm9sczthPWEuYnV0dG9uRWxlbWVudDtmb3IodmFyIGM9Yi5sZW5ndGgtMTswPD1jOy0tYylpZihiW2NdLnBhbmVsX2Rpdj09PWEpe3RoaXMuYWN0aXZhdGVDb250cm9sKGJbY10pO2JyZWFrfX0sZ2V0Q29udHJvbHNCeTpmdW5jdGlvbihhLGIpe3ZhciBjPSJmdW5jdGlvbiI9PXR5cGVvZiBiLnRlc3Q7cmV0dXJuIE9wZW5MYXllcnMuQXJyYXkuZmlsdGVyKHRoaXMuY29udHJvbHMsZnVuY3Rpb24oZCl7cmV0dXJuIGRbYV09PWJ8fGMmJmIudGVzdChkW2FdKX0pfSxnZXRDb250cm9sc0J5TmFtZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5nZXRDb250cm9sc0J5KCJuYW1lIixhKX0sZ2V0Q29udHJvbHNCeUNsYXNzOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmdldENvbnRyb2xzQnkoIkNMQVNTX05BTUUiLGEpfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkNvbnRyb2wuUGFuZWwifSk7T3BlbkxheWVycy5TdHJhdGVneT1PcGVuTGF5ZXJzLkNsYXNzKHtsYXllcjpudWxsLG9wdGlvbnM6bnVsbCxhY3RpdmU6bnVsbCxhdXRvQWN0aXZhdGU6ITAsYXV0b0Rlc3Ryb3k6ITAsaW5pdGlhbGl6ZTpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHRoaXMsYSk7dGhpcy5vcHRpb25zPWE7dGhpcy5hY3RpdmU9ITF9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmRlYWN0aXZhdGUoKTt0aGlzLm9wdGlvbnM9dGhpcy5sYXllcj1udWxsfSxzZXRMYXllcjpmdW5jdGlvbihhKXt0aGlzLmxheWVyPWF9LGFjdGl2YXRlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYWN0aXZlPyExOnRoaXMuYWN0aXZlPSEwfSxkZWFjdGl2YXRlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYWN0aXZlPyh0aGlzLmFjdGl2ZT0hMSwhMCk6ITF9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuU3RyYXRlZ3kifSk7T3BlbkxheWVycy5TdHJhdGVneS5GaXhlZD1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuU3RyYXRlZ3kse3ByZWxvYWQ6ITEsYWN0aXZhdGU6ZnVuY3Rpb24oKXt2YXIgYT1PcGVuTGF5ZXJzLlN0cmF0ZWd5LnByb3RvdHlwZS5hY3RpdmF0ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7aWYoYSlpZih0aGlzLmxheWVyLmV2ZW50cy5vbih7cmVmcmVzaDp0aGlzLmxvYWQsc2NvcGU6dGhpc30pLCEwPT10aGlzLmxheWVyLnZpc2liaWxpdHl8fHRoaXMucHJlbG9hZCl0aGlzLmxvYWQoKTtlbHNlIHRoaXMubGF5ZXIuZXZlbnRzLm9uKHt2aXNpYmlsaXR5Y2hhbmdlZDp0aGlzLmxvYWQsc2NvcGU6dGhpc30pO3JldHVybiBhfSxkZWFjdGl2YXRlOmZ1bmN0aW9uKCl7dmFyIGE9T3BlbkxheWVycy5TdHJhdGVneS5wcm90b3R5cGUuZGVhY3RpdmF0ZS5jYWxsKHRoaXMpO2EmJnRoaXMubGF5ZXIuZXZlbnRzLnVuKHtyZWZyZXNoOnRoaXMubG9hZCx2aXNpYmlsaXR5Y2hhbmdlZDp0aGlzLmxvYWQsCnNjb3BlOnRoaXN9KTtyZXR1cm4gYX0sbG9hZDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmxheWVyO2IuZXZlbnRzLnRyaWdnZXJFdmVudCgibG9hZHN0YXJ0Iix7ZmlsdGVyOmIuZmlsdGVyfSk7Yi5wcm90b2NvbC5yZWFkKE9wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKHtjYWxsYmFjazp0aGlzLm1lcmdlLGZpbHRlcjpiLmZpbHRlcixzY29wZTp0aGlzfSxhKSk7Yi5ldmVudHMudW4oe3Zpc2liaWxpdHljaGFuZ2VkOnRoaXMubG9hZCxzY29wZTp0aGlzfSl9LG1lcmdlOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMubGF5ZXI7Yi5kZXN0cm95RmVhdHVyZXMoKTt2YXIgYz1hLmZlYXR1cmVzO2lmKGMmJjA8Yy5sZW5ndGgpe3ZhciBkPWIucHJvamVjdGlvbixlPWIubWFwLmdldFByb2plY3Rpb25PYmplY3QoKTtpZighZS5lcXVhbHMoZCkpZm9yKHZhciBmLGc9MCxoPWMubGVuZ3RoO2c8aDsrK2cpKGY9Y1tnXS5nZW9tZXRyeSkmJmYudHJhbnNmb3JtKGQsZSk7Yi5hZGRGZWF0dXJlcyhjKX1iLmV2ZW50cy50cmlnZ2VyRXZlbnQoImxvYWRlbmQiLAp7cmVzcG9uc2U6YX0pfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLlN0cmF0ZWd5LkZpeGVkIn0pO09wZW5MYXllcnMuQ29udHJvbC5ab29tPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Db250cm9sLHt6b29tSW5UZXh0OiIrIix6b29tSW5JZDoib2xab29tSW5MaW5rIix6b29tT3V0VGV4dDoiXHUyMjEyIix6b29tT3V0SWQ6Im9sWm9vbU91dExpbmsiLGRyYXc6ZnVuY3Rpb24oKXt2YXIgYT1PcGVuTGF5ZXJzLkNvbnRyb2wucHJvdG90eXBlLmRyYXcuYXBwbHkodGhpcyksYj10aGlzLmdldE9yQ3JlYXRlTGlua3MoYSksYz1iLnpvb21JbixiPWIuem9vbU91dCxkPXRoaXMubWFwLmV2ZW50cztiLnBhcmVudE5vZGUhPT1hJiYoZD10aGlzLmV2ZW50cyxkLmF0dGFjaFRvRWxlbWVudChiLnBhcmVudE5vZGUpKTtkLnJlZ2lzdGVyKCJidXR0b25jbGljayIsdGhpcyx0aGlzLm9uWm9vbUNsaWNrKTt0aGlzLnpvb21Jbkxpbms9Yzt0aGlzLnpvb21PdXRMaW5rPWI7cmV0dXJuIGF9LGdldE9yQ3JlYXRlTGlua3M6ZnVuY3Rpb24oYSl7dmFyIGI9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy56b29tSW5JZCksCmM9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy56b29tT3V0SWQpO2J8fChiPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImEiKSxiLmhyZWY9IiN6b29tSW4iLGIuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodGhpcy56b29tSW5UZXh0KSksYi5jbGFzc05hbWU9Im9sQ29udHJvbFpvb21JbiIsYS5hcHBlbmRDaGlsZChiKSk7T3BlbkxheWVycy5FbGVtZW50LmFkZENsYXNzKGIsIm9sQnV0dG9uIik7Y3x8KGM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYSIpLGMuaHJlZj0iI3pvb21PdXQiLGMuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodGhpcy56b29tT3V0VGV4dCkpLGMuY2xhc3NOYW1lPSJvbENvbnRyb2xab29tT3V0IixhLmFwcGVuZENoaWxkKGMpKTtPcGVuTGF5ZXJzLkVsZW1lbnQuYWRkQ2xhc3MoYywib2xCdXR0b24iKTtyZXR1cm57em9vbUluOmIsem9vbU91dDpjfX0sb25ab29tQ2xpY2s6ZnVuY3Rpb24oYSl7YT1hLmJ1dHRvbkVsZW1lbnQ7CmE9PT10aGlzLnpvb21Jbkxpbms/dGhpcy5tYXAuem9vbUluKCk6YT09PXRoaXMuem9vbU91dExpbmsmJnRoaXMubWFwLnpvb21PdXQoKX0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMubWFwJiZ0aGlzLm1hcC5ldmVudHMudW5yZWdpc3RlcigiYnV0dG9uY2xpY2siLHRoaXMsdGhpcy5vblpvb21DbGljayk7ZGVsZXRlIHRoaXMuem9vbUluTGluaztkZWxldGUgdGhpcy56b29tT3V0TGluaztPcGVuTGF5ZXJzLkNvbnRyb2wucHJvdG90eXBlLmRlc3Ryb3kuYXBwbHkodGhpcyl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuQ29udHJvbC5ab29tIn0pO09wZW5MYXllcnMuR2VvbWV0cnkuUG9seWdvbj1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuR2VvbWV0cnkuQ29sbGVjdGlvbix7Y29tcG9uZW50VHlwZXM6WyJPcGVuTGF5ZXJzLkdlb21ldHJ5LkxpbmVhclJpbmciXSxnZXRBcmVhOmZ1bmN0aW9uKCl7dmFyIGE9MDtpZih0aGlzLmNvbXBvbmVudHMmJjA8dGhpcy5jb21wb25lbnRzLmxlbmd0aClmb3IodmFyIGE9YStNYXRoLmFicyh0aGlzLmNvbXBvbmVudHNbMF0uZ2V0QXJlYSgpKSxiPTEsYz10aGlzLmNvbXBvbmVudHMubGVuZ3RoO2I8YztiKyspYS09TWF0aC5hYnModGhpcy5jb21wb25lbnRzW2JdLmdldEFyZWEoKSk7cmV0dXJuIGF9LGdldEdlb2Rlc2ljQXJlYTpmdW5jdGlvbihhKXt2YXIgYj0wO2lmKHRoaXMuY29tcG9uZW50cyYmMDx0aGlzLmNvbXBvbmVudHMubGVuZ3RoKWZvcih2YXIgYj1iK01hdGguYWJzKHRoaXMuY29tcG9uZW50c1swXS5nZXRHZW9kZXNpY0FyZWEoYSkpLGM9MSxkPXRoaXMuY29tcG9uZW50cy5sZW5ndGg7YzwKZDtjKyspYi09TWF0aC5hYnModGhpcy5jb21wb25lbnRzW2NdLmdldEdlb2Rlc2ljQXJlYShhKSk7cmV0dXJuIGJ9LGNvbnRhaW5zUG9pbnQ6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jb21wb25lbnRzLmxlbmd0aCxjPSExO2lmKDA8YiYmKGM9dGhpcy5jb21wb25lbnRzWzBdLmNvbnRhaW5zUG9pbnQoYSksMSE9PWMmJmMmJjE8YikpZm9yKHZhciBkLGU9MTtlPGI7KytlKWlmKGQ9dGhpcy5jb21wb25lbnRzW2VdLmNvbnRhaW5zUG9pbnQoYSkpe2M9MT09PWQ/MTohMTticmVha31yZXR1cm4gY30saW50ZXJzZWN0czpmdW5jdGlvbihhKXt2YXIgYj0hMSxjLGQ7aWYoIk9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQiPT1hLkNMQVNTX05BTUUpYj10aGlzLmNvbnRhaW5zUG9pbnQoYSk7ZWxzZSBpZigiT3BlbkxheWVycy5HZW9tZXRyeS5MaW5lU3RyaW5nIj09YS5DTEFTU19OQU1FfHwiT3BlbkxheWVycy5HZW9tZXRyeS5MaW5lYXJSaW5nIj09YS5DTEFTU19OQU1FKXtjPTA7Zm9yKGQ9CnRoaXMuY29tcG9uZW50cy5sZW5ndGg7YzxkJiYhKGI9YS5pbnRlcnNlY3RzKHRoaXMuY29tcG9uZW50c1tjXSkpOysrYyk7aWYoIWIpZm9yKGM9MCxkPWEuY29tcG9uZW50cy5sZW5ndGg7YzxkJiYhKGI9dGhpcy5jb250YWluc1BvaW50KGEuY29tcG9uZW50c1tjXSkpOysrYyk7fWVsc2UgZm9yKGM9MCxkPWEuY29tcG9uZW50cy5sZW5ndGg7YzxkJiYhKGI9dGhpcy5pbnRlcnNlY3RzKGEuY29tcG9uZW50c1tjXSkpOysrYyk7aWYoIWImJiJPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvbHlnb24iPT1hLkNMQVNTX05BTUUpe3ZhciBlPXRoaXMuY29tcG9uZW50c1swXTtjPTA7Zm9yKGQ9ZS5jb21wb25lbnRzLmxlbmd0aDtjPGQmJiEoYj1hLmNvbnRhaW5zUG9pbnQoZS5jb21wb25lbnRzW2NdKSk7KytjKTt9cmV0dXJuIGJ9LGRpc3RhbmNlVG86ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYiYmITE9PT1iLmVkZ2UmJnRoaXMuaW50ZXJzZWN0cyhhKT8wOk9wZW5MYXllcnMuR2VvbWV0cnkuQ29sbGVjdGlvbi5wcm90b3R5cGUuZGlzdGFuY2VUby5hcHBseSh0aGlzLApbYSxiXSl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuR2VvbWV0cnkuUG9seWdvbiJ9KTtPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvbHlnb24uY3JlYXRlUmVndWxhclBvbHlnb249ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9TWF0aC5QSSooMS9jLTAuNSk7ZCYmKGUrPWQvMTgwKk1hdGguUEkpO2Zvcih2YXIgZixnPVtdLGg9MDtoPGM7KytoKWY9ZSsyKmgqTWF0aC5QSS9jLGQ9YS54K2IqTWF0aC5jb3MoZiksZj1hLnkrYipNYXRoLnNpbihmKSxnLnB1c2gobmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoZCxmKSk7YT1uZXcgT3BlbkxheWVycy5HZW9tZXRyeS5MaW5lYXJSaW5nKGcpO3JldHVybiBuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2x5Z29uKFthXSl9O09wZW5MYXllcnMuR2VvbWV0cnkuTXVsdGlQb2x5Z29uPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5HZW9tZXRyeS5Db2xsZWN0aW9uLHtjb21wb25lbnRUeXBlczpbIk9wZW5MYXllcnMuR2VvbWV0cnkuUG9seWdvbiJdLENMQVNTX05BTUU6Ik9wZW5MYXllcnMuR2VvbWV0cnkuTXVsdGlQb2x5Z29uIn0pO09wZW5MYXllcnMuRmVhdHVyZT1PcGVuTGF5ZXJzLkNsYXNzKHtsYXllcjpudWxsLGlkOm51bGwsbG9ubGF0Om51bGwsZGF0YTpudWxsLG1hcmtlcjpudWxsLHBvcHVwQ2xhc3M6bnVsbCxwb3B1cDpudWxsLGluaXRpYWxpemU6ZnVuY3Rpb24oYSxiLGMpe3RoaXMubGF5ZXI9YTt0aGlzLmxvbmxhdD1iO3RoaXMuZGF0YT1udWxsIT1jP2M6e307dGhpcy5pZD1PcGVuTGF5ZXJzLlV0aWwuY3JlYXRlVW5pcXVlSUQodGhpcy5DTEFTU19OQU1FKyJfIil9LGRlc3Ryb3k6ZnVuY3Rpb24oKXtudWxsIT10aGlzLmxheWVyJiZudWxsIT10aGlzLmxheWVyLm1hcCYmbnVsbCE9dGhpcy5wb3B1cCYmdGhpcy5sYXllci5tYXAucmVtb3ZlUG9wdXAodGhpcy5wb3B1cCk7bnVsbCE9dGhpcy5sYXllciYmbnVsbCE9dGhpcy5tYXJrZXImJnRoaXMubGF5ZXIucmVtb3ZlTWFya2VyKHRoaXMubWFya2VyKTt0aGlzLmRhdGE9dGhpcy5sb25sYXQ9dGhpcy5pZD10aGlzLmxheWVyPW51bGw7bnVsbCE9dGhpcy5tYXJrZXImJgoodGhpcy5kZXN0cm95TWFya2VyKHRoaXMubWFya2VyKSx0aGlzLm1hcmtlcj1udWxsKTtudWxsIT10aGlzLnBvcHVwJiYodGhpcy5kZXN0cm95UG9wdXAodGhpcy5wb3B1cCksdGhpcy5wb3B1cD1udWxsKX0sb25TY3JlZW46ZnVuY3Rpb24oKXt2YXIgYT0hMTtudWxsIT10aGlzLmxheWVyJiZudWxsIT10aGlzLmxheWVyLm1hcCYmKGE9dGhpcy5sYXllci5tYXAuZ2V0RXh0ZW50KCkuY29udGFpbnNMb25MYXQodGhpcy5sb25sYXQpKTtyZXR1cm4gYX0sY3JlYXRlTWFya2VyOmZ1bmN0aW9uKCl7bnVsbCE9dGhpcy5sb25sYXQmJih0aGlzLm1hcmtlcj1uZXcgT3BlbkxheWVycy5NYXJrZXIodGhpcy5sb25sYXQsdGhpcy5kYXRhLmljb24pKTtyZXR1cm4gdGhpcy5tYXJrZXJ9LGRlc3Ryb3lNYXJrZXI6ZnVuY3Rpb24oKXt0aGlzLm1hcmtlci5kZXN0cm95KCl9LGNyZWF0ZVBvcHVwOmZ1bmN0aW9uKGEpe251bGwhPXRoaXMubG9ubGF0JiYodGhpcy5wb3B1cHx8KHRoaXMucG9wdXA9bmV3ICh0aGlzLnBvcHVwQ2xhc3M/CnRoaXMucG9wdXBDbGFzczpPcGVuTGF5ZXJzLlBvcHVwLkFuY2hvcmVkKSh0aGlzLmlkKyJfcG9wdXAiLHRoaXMubG9ubGF0LHRoaXMuZGF0YS5wb3B1cFNpemUsdGhpcy5kYXRhLnBvcHVwQ29udGVudEhUTUwsdGhpcy5tYXJrZXI/dGhpcy5tYXJrZXIuaWNvbjpudWxsLGEpKSxudWxsIT10aGlzLmRhdGEub3ZlcmZsb3cmJih0aGlzLnBvcHVwLmNvbnRlbnREaXYuc3R5bGUub3ZlcmZsb3c9dGhpcy5kYXRhLm92ZXJmbG93KSx0aGlzLnBvcHVwLmZlYXR1cmU9dGhpcyk7cmV0dXJuIHRoaXMucG9wdXB9LGRlc3Ryb3lQb3B1cDpmdW5jdGlvbigpe3RoaXMucG9wdXAmJih0aGlzLnBvcHVwLmZlYXR1cmU9bnVsbCx0aGlzLnBvcHVwLmRlc3Ryb3koKSx0aGlzLnBvcHVwPW51bGwpfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkZlYXR1cmUifSk7T3BlbkxheWVycy5TdGF0ZT17VU5LTk9XTjoiVW5rbm93biIsSU5TRVJUOiJJbnNlcnQiLFVQREFURToiVXBkYXRlIixERUxFVEU6IkRlbGV0ZSJ9OwpPcGVuTGF5ZXJzLkZlYXR1cmUuVmVjdG9yPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5GZWF0dXJlLHtmaWQ6bnVsbCxnZW9tZXRyeTpudWxsLGF0dHJpYnV0ZXM6bnVsbCxib3VuZHM6bnVsbCxzdGF0ZTpudWxsLHN0eWxlOm51bGwsdXJsOm51bGwscmVuZGVySW50ZW50OiJkZWZhdWx0Iixtb2RpZmllZDpudWxsLGluaXRpYWxpemU6ZnVuY3Rpb24oYSxiLGMpe09wZW5MYXllcnMuRmVhdHVyZS5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLFtudWxsLG51bGwsYl0pO3RoaXMubG9ubGF0PW51bGw7dGhpcy5nZW9tZXRyeT1hP2E6bnVsbDt0aGlzLnN0YXRlPW51bGw7dGhpcy5hdHRyaWJ1dGVzPXt9O2ImJih0aGlzLmF0dHJpYnV0ZXM9T3BlbkxheWVycy5VdGlsLmV4dGVuZCh0aGlzLmF0dHJpYnV0ZXMsYikpO3RoaXMuc3R5bGU9Yz9jOm51bGx9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmxheWVyJiYodGhpcy5sYXllci5yZW1vdmVGZWF0dXJlcyh0aGlzKSx0aGlzLmxheWVyPQpudWxsKTt0aGlzLm1vZGlmaWVkPXRoaXMuZ2VvbWV0cnk9bnVsbDtPcGVuTGF5ZXJzLkZlYXR1cmUucHJvdG90eXBlLmRlc3Ryb3kuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxjbG9uZTpmdW5jdGlvbigpe3JldHVybiBuZXcgT3BlbkxheWVycy5GZWF0dXJlLlZlY3Rvcih0aGlzLmdlb21ldHJ5P3RoaXMuZ2VvbWV0cnkuY2xvbmUoKTpudWxsLHRoaXMuYXR0cmlidXRlcyx0aGlzLnN0eWxlKX0sb25TY3JlZW46ZnVuY3Rpb24oYSl7dmFyIGI9ITE7dGhpcy5sYXllciYmdGhpcy5sYXllci5tYXAmJihiPXRoaXMubGF5ZXIubWFwLmdldEV4dGVudCgpLGE/KGE9dGhpcy5nZW9tZXRyeS5nZXRCb3VuZHMoKSxiPWIuaW50ZXJzZWN0c0JvdW5kcyhhKSk6Yj1iLnRvR2VvbWV0cnkoKS5pbnRlcnNlY3RzKHRoaXMuZ2VvbWV0cnkpKTtyZXR1cm4gYn0sZ2V0VmlzaWJpbGl0eTpmdW5jdGlvbigpe3JldHVybiEodGhpcy5zdHlsZSYmIm5vbmUiPT10aGlzLnN0eWxlLmRpc3BsYXl8fCF0aGlzLmxheWVyfHwKdGhpcy5sYXllciYmdGhpcy5sYXllci5zdHlsZU1hcCYmIm5vbmUiPT10aGlzLmxheWVyLnN0eWxlTWFwLmNyZWF0ZVN5bWJvbGl6ZXIodGhpcyx0aGlzLnJlbmRlckludGVudCkuZGlzcGxheXx8dGhpcy5sYXllciYmIXRoaXMubGF5ZXIuZ2V0VmlzaWJpbGl0eSgpKX0sY3JlYXRlTWFya2VyOmZ1bmN0aW9uKCl7cmV0dXJuIG51bGx9LGRlc3Ryb3lNYXJrZXI6ZnVuY3Rpb24oKXt9LGNyZWF0ZVBvcHVwOmZ1bmN0aW9uKCl7cmV0dXJuIG51bGx9LGF0UG9pbnQ6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPSExO3RoaXMuZ2VvbWV0cnkmJihkPXRoaXMuZ2VvbWV0cnkuYXRQb2ludChhLGIsYykpO3JldHVybiBkfSxkZXN0cm95UG9wdXA6ZnVuY3Rpb24oKXt9LG1vdmU6ZnVuY3Rpb24oYSl7aWYodGhpcy5sYXllciYmdGhpcy5nZW9tZXRyeS5tb3ZlKXthPSJPcGVuTGF5ZXJzLkxvbkxhdCI9PWEuQ0xBU1NfTkFNRT90aGlzLmxheWVyLmdldFZpZXdQb3J0UHhGcm9tTG9uTGF0KGEpOmE7dmFyIGI9CnRoaXMubGF5ZXIuZ2V0Vmlld1BvcnRQeEZyb21Mb25MYXQodGhpcy5nZW9tZXRyeS5nZXRCb3VuZHMoKS5nZXRDZW50ZXJMb25MYXQoKSksYz10aGlzLmxheWVyLm1hcC5nZXRSZXNvbHV0aW9uKCk7dGhpcy5nZW9tZXRyeS5tb3ZlKGMqKGEueC1iLngpLGMqKGIueS1hLnkpKTt0aGlzLmxheWVyLmRyYXdGZWF0dXJlKHRoaXMpO3JldHVybiBifX0sdG9TdGF0ZTpmdW5jdGlvbihhKXtpZihhPT1PcGVuTGF5ZXJzLlN0YXRlLlVQREFURSlzd2l0Y2godGhpcy5zdGF0ZSl7Y2FzZSBPcGVuTGF5ZXJzLlN0YXRlLlVOS05PV046Y2FzZSBPcGVuTGF5ZXJzLlN0YXRlLkRFTEVURTp0aGlzLnN0YXRlPWF9ZWxzZSBpZihhPT1PcGVuTGF5ZXJzLlN0YXRlLklOU0VSVClzd2l0Y2godGhpcy5zdGF0ZSl7Y2FzZSBPcGVuTGF5ZXJzLlN0YXRlLlVOS05PV046YnJlYWs7ZGVmYXVsdDp0aGlzLnN0YXRlPWF9ZWxzZSBpZihhPT1PcGVuTGF5ZXJzLlN0YXRlLkRFTEVURSlzd2l0Y2godGhpcy5zdGF0ZSl7Y2FzZSBPcGVuTGF5ZXJzLlN0YXRlLlVOS05PV046Y2FzZSBPcGVuTGF5ZXJzLlN0YXRlLlVQREFURTp0aGlzLnN0YXRlPQphfWVsc2UgYT09T3BlbkxheWVycy5TdGF0ZS5VTktOT1dOJiYodGhpcy5zdGF0ZT1hKX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5GZWF0dXJlLlZlY3RvciJ9KTsKT3BlbkxheWVycy5GZWF0dXJlLlZlY3Rvci5zdHlsZT17ImRlZmF1bHQiOntmaWxsQ29sb3I6IiNlZTk5MDAiLGZpbGxPcGFjaXR5OjAuNCxob3ZlckZpbGxDb2xvcjoid2hpdGUiLGhvdmVyRmlsbE9wYWNpdHk6MC44LHN0cm9rZUNvbG9yOiIjZWU5OTAwIixzdHJva2VPcGFjaXR5OjEsc3Ryb2tlV2lkdGg6MSxzdHJva2VMaW5lY2FwOiJyb3VuZCIsc3Ryb2tlRGFzaHN0eWxlOiJzb2xpZCIsaG92ZXJTdHJva2VDb2xvcjoicmVkIixob3ZlclN0cm9rZU9wYWNpdHk6MSxob3ZlclN0cm9rZVdpZHRoOjAuMixwb2ludFJhZGl1czo2LGhvdmVyUG9pbnRSYWRpdXM6MSxob3ZlclBvaW50VW5pdDoiJSIscG9pbnRlckV2ZW50czoidmlzaWJsZVBhaW50ZWQiLGN1cnNvcjoiaW5oZXJpdCIsZm9udENvbG9yOiIjMDAwMDAwIixsYWJlbEFsaWduOiJjbSIsbGFiZWxPdXRsaW5lQ29sb3I6IndoaXRlIixsYWJlbE91dGxpbmVXaWR0aDozfSxzZWxlY3Q6e2ZpbGxDb2xvcjoiYmx1ZSIsZmlsbE9wYWNpdHk6MC40LApob3ZlckZpbGxDb2xvcjoid2hpdGUiLGhvdmVyRmlsbE9wYWNpdHk6MC44LHN0cm9rZUNvbG9yOiJibHVlIixzdHJva2VPcGFjaXR5OjEsc3Ryb2tlV2lkdGg6MixzdHJva2VMaW5lY2FwOiJyb3VuZCIsc3Ryb2tlRGFzaHN0eWxlOiJzb2xpZCIsaG92ZXJTdHJva2VDb2xvcjoicmVkIixob3ZlclN0cm9rZU9wYWNpdHk6MSxob3ZlclN0cm9rZVdpZHRoOjAuMixwb2ludFJhZGl1czo2LGhvdmVyUG9pbnRSYWRpdXM6MSxob3ZlclBvaW50VW5pdDoiJSIscG9pbnRlckV2ZW50czoidmlzaWJsZVBhaW50ZWQiLGN1cnNvcjoicG9pbnRlciIsZm9udENvbG9yOiIjMDAwMDAwIixsYWJlbEFsaWduOiJjbSIsbGFiZWxPdXRsaW5lQ29sb3I6IndoaXRlIixsYWJlbE91dGxpbmVXaWR0aDozfSx0ZW1wb3Jhcnk6e2ZpbGxDb2xvcjoiIzY2Y2NjYyIsZmlsbE9wYWNpdHk6MC4yLGhvdmVyRmlsbENvbG9yOiJ3aGl0ZSIsaG92ZXJGaWxsT3BhY2l0eTowLjgsc3Ryb2tlQ29sb3I6IiM2NmNjY2MiLHN0cm9rZU9wYWNpdHk6MSwKc3Ryb2tlTGluZWNhcDoicm91bmQiLHN0cm9rZVdpZHRoOjIsc3Ryb2tlRGFzaHN0eWxlOiJzb2xpZCIsaG92ZXJTdHJva2VDb2xvcjoicmVkIixob3ZlclN0cm9rZU9wYWNpdHk6MSxob3ZlclN0cm9rZVdpZHRoOjAuMixwb2ludFJhZGl1czo2LGhvdmVyUG9pbnRSYWRpdXM6MSxob3ZlclBvaW50VW5pdDoiJSIscG9pbnRlckV2ZW50czoidmlzaWJsZVBhaW50ZWQiLGN1cnNvcjoiaW5oZXJpdCIsZm9udENvbG9yOiIjMDAwMDAwIixsYWJlbEFsaWduOiJjbSIsbGFiZWxPdXRsaW5lQ29sb3I6IndoaXRlIixsYWJlbE91dGxpbmVXaWR0aDozfSwiZGVsZXRlIjp7ZGlzcGxheToibm9uZSJ9fTtPcGVuTGF5ZXJzLlN0eWxlPU9wZW5MYXllcnMuQ2xhc3Moe2lkOm51bGwsbmFtZTpudWxsLHRpdGxlOm51bGwsZGVzY3JpcHRpb246bnVsbCxsYXllck5hbWU6bnVsbCxpc0RlZmF1bHQ6ITEscnVsZXM6bnVsbCxjb250ZXh0Om51bGwsZGVmYXVsdFN0eWxlOm51bGwsZGVmYXVsdHNQZXJTeW1ib2xpemVyOiExLHByb3BlcnR5U3R5bGVzOm51bGwsaW5pdGlhbGl6ZTpmdW5jdGlvbihhLGIpe09wZW5MYXllcnMuVXRpbC5leHRlbmQodGhpcyxiKTt0aGlzLnJ1bGVzPVtdO2ImJmIucnVsZXMmJnRoaXMuYWRkUnVsZXMoYi5ydWxlcyk7dGhpcy5zZXREZWZhdWx0U3R5bGUoYXx8T3BlbkxheWVycy5GZWF0dXJlLlZlY3Rvci5zdHlsZVsiZGVmYXVsdCJdKTt0aGlzLmlkPU9wZW5MYXllcnMuVXRpbC5jcmVhdGVVbmlxdWVJRCh0aGlzLkNMQVNTX05BTUUrIl8iKX0sZGVzdHJveTpmdW5jdGlvbigpe2Zvcih2YXIgYT0wLGI9dGhpcy5ydWxlcy5sZW5ndGg7YTxiO2ErKyl0aGlzLnJ1bGVzW2FdLmRlc3Ryb3koKSwKdGhpcy5ydWxlc1thXT1udWxsO3RoaXMuZGVmYXVsdFN0eWxlPXRoaXMucnVsZXM9bnVsbH0sY3JlYXRlU3ltYm9saXplcjpmdW5jdGlvbihhKXtmb3IodmFyIGI9dGhpcy5kZWZhdWx0c1BlclN5bWJvbGl6ZXI/e306dGhpcy5jcmVhdGVMaXRlcmFscyhPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHt9LHRoaXMuZGVmYXVsdFN0eWxlKSxhKSxjPXRoaXMucnVsZXMsZCxlPVtdLGY9ITEsZz0wLGg9Yy5sZW5ndGg7ZzxoO2crKylkPWNbZ10sZC5ldmFsdWF0ZShhKSYmKGQgaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLlJ1bGUmJmQuZWxzZUZpbHRlcj9lLnB1c2goZCk6KGY9ITAsdGhpcy5hcHBseVN5bWJvbGl6ZXIoZCxiLGEpKSk7aWYoITE9PWYmJjA8ZS5sZW5ndGgpZm9yKGY9ITAsZz0wLGg9ZS5sZW5ndGg7ZzxoO2crKyl0aGlzLmFwcGx5U3ltYm9saXplcihlW2ddLGIsYSk7MDxjLmxlbmd0aCYmITE9PWYmJihiLmRpc3BsYXk9Im5vbmUiKTtudWxsIT1iLmxhYmVsJiYic3RyaW5nIiE9PXR5cGVvZiBiLmxhYmVsJiYKKGIubGFiZWw9U3RyaW5nKGIubGFiZWwpKTtyZXR1cm4gYn0sYXBwbHlTeW1ib2xpemVyOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD1jLmdlb21ldHJ5P3RoaXMuZ2V0U3ltYm9saXplclByZWZpeChjLmdlb21ldHJ5KTpPcGVuTGF5ZXJzLlN0eWxlLlNZTUJPTElaRVJfUFJFRklYRVNbMF07YT1hLnN5bWJvbGl6ZXJbZF18fGEuc3ltYm9saXplcjshMD09PXRoaXMuZGVmYXVsdHNQZXJTeW1ib2xpemVyJiYoZD10aGlzLmRlZmF1bHRTdHlsZSxPcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyhhLHtwb2ludFJhZGl1czpkLnBvaW50UmFkaXVzfSksITAhPT1hLnN0cm9rZSYmITAhPT1hLmdyYXBoaWN8fE9wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKGEse3N0cm9rZVdpZHRoOmQuc3Ryb2tlV2lkdGgsc3Ryb2tlQ29sb3I6ZC5zdHJva2VDb2xvcixzdHJva2VPcGFjaXR5OmQuc3Ryb2tlT3BhY2l0eSxzdHJva2VEYXNoc3R5bGU6ZC5zdHJva2VEYXNoc3R5bGUsc3Ryb2tlTGluZWNhcDpkLnN0cm9rZUxpbmVjYXB9KSwKITAhPT1hLmZpbGwmJiEwIT09YS5ncmFwaGljfHxPcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyhhLHtmaWxsQ29sb3I6ZC5maWxsQ29sb3IsZmlsbE9wYWNpdHk6ZC5maWxsT3BhY2l0eX0pLCEwPT09YS5ncmFwaGljJiZPcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyhhLHtwb2ludFJhZGl1czp0aGlzLmRlZmF1bHRTdHlsZS5wb2ludFJhZGl1cyxleHRlcm5hbEdyYXBoaWM6dGhpcy5kZWZhdWx0U3R5bGUuZXh0ZXJuYWxHcmFwaGljLGdyYXBoaWNOYW1lOnRoaXMuZGVmYXVsdFN0eWxlLmdyYXBoaWNOYW1lLGdyYXBoaWNPcGFjaXR5OnRoaXMuZGVmYXVsdFN0eWxlLmdyYXBoaWNPcGFjaXR5LGdyYXBoaWNXaWR0aDp0aGlzLmRlZmF1bHRTdHlsZS5ncmFwaGljV2lkdGgsZ3JhcGhpY0hlaWdodDp0aGlzLmRlZmF1bHRTdHlsZS5ncmFwaGljSGVpZ2h0LGdyYXBoaWNYT2Zmc2V0OnRoaXMuZGVmYXVsdFN0eWxlLmdyYXBoaWNYT2Zmc2V0LGdyYXBoaWNZT2Zmc2V0OnRoaXMuZGVmYXVsdFN0eWxlLmdyYXBoaWNZT2Zmc2V0fSkpOwpyZXR1cm4gdGhpcy5jcmVhdGVMaXRlcmFscyhPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKGIsYSksYyl9LGNyZWF0ZUxpdGVyYWxzOmZ1bmN0aW9uKGEsYil7dmFyIGM9T3BlbkxheWVycy5VdGlsLmV4dGVuZCh7fSxiLmF0dHJpYnV0ZXN8fGIuZGF0YSk7T3BlbkxheWVycy5VdGlsLmV4dGVuZChjLHRoaXMuY29udGV4dCk7Zm9yKHZhciBkIGluIHRoaXMucHJvcGVydHlTdHlsZXMpYVtkXT1PcGVuTGF5ZXJzLlN0eWxlLmNyZWF0ZUxpdGVyYWwoYVtkXSxjLGIsZCk7cmV0dXJuIGF9LGZpbmRQcm9wZXJ0eVN0eWxlczpmdW5jdGlvbigpe3ZhciBhPXt9O3RoaXMuYWRkUHJvcGVydHlTdHlsZXMoYSx0aGlzLmRlZmF1bHRTdHlsZSk7Zm9yKHZhciBiPXRoaXMucnVsZXMsYyxkLGU9MCxmPWIubGVuZ3RoO2U8ZjtlKyspe2M9YltlXS5zeW1ib2xpemVyO2Zvcih2YXIgZyBpbiBjKWlmKGQ9Y1tnXSwib2JqZWN0Ij09dHlwZW9mIGQpdGhpcy5hZGRQcm9wZXJ0eVN0eWxlcyhhLGQpO2Vsc2V7dGhpcy5hZGRQcm9wZXJ0eVN0eWxlcyhhLApjKTticmVha319cmV0dXJuIGF9LGFkZFByb3BlcnR5U3R5bGVzOmZ1bmN0aW9uKGEsYil7dmFyIGMsZDtmb3IoZCBpbiBiKWM9YltkXSwic3RyaW5nIj09dHlwZW9mIGMmJmMubWF0Y2goL1wkXHtcdytcfS8pJiYoYVtkXT0hMCk7cmV0dXJuIGF9LGFkZFJ1bGVzOmZ1bmN0aW9uKGEpe0FycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KHRoaXMucnVsZXMsYSk7dGhpcy5wcm9wZXJ0eVN0eWxlcz10aGlzLmZpbmRQcm9wZXJ0eVN0eWxlcygpfSxzZXREZWZhdWx0U3R5bGU6ZnVuY3Rpb24oYSl7dGhpcy5kZWZhdWx0U3R5bGU9YTt0aGlzLnByb3BlcnR5U3R5bGVzPXRoaXMuZmluZFByb3BlcnR5U3R5bGVzKCl9LGdldFN5bWJvbGl6ZXJQcmVmaXg6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPU9wZW5MYXllcnMuU3R5bGUuU1lNQk9MSVpFUl9QUkVGSVhFUyxjPTAsZD1iLmxlbmd0aDtjPGQ7YysrKWlmKC0xIT1hLkNMQVNTX05BTUUuaW5kZXhPZihiW2NdKSlyZXR1cm4gYltjXX0sY2xvbmU6ZnVuY3Rpb24oKXt2YXIgYT0KT3BlbkxheWVycy5VdGlsLmV4dGVuZCh7fSx0aGlzKTtpZih0aGlzLnJ1bGVzKXthLnJ1bGVzPVtdO2Zvcih2YXIgYj0wLGM9dGhpcy5ydWxlcy5sZW5ndGg7YjxjOysrYilhLnJ1bGVzLnB1c2godGhpcy5ydWxlc1tiXS5jbG9uZSgpKX1hLmNvbnRleHQ9dGhpcy5jb250ZXh0JiZPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHt9LHRoaXMuY29udGV4dCk7Yj1PcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHt9LHRoaXMuZGVmYXVsdFN0eWxlKTtyZXR1cm4gbmV3IE9wZW5MYXllcnMuU3R5bGUoYixhKX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5TdHlsZSJ9KTtPcGVuTGF5ZXJzLlN0eWxlLmNyZWF0ZUxpdGVyYWw9ZnVuY3Rpb24oYSxiLGMsZCl7InN0cmluZyI9PXR5cGVvZiBhJiYtMSE9YS5pbmRleE9mKCIkeyIpJiYoYT1PcGVuTGF5ZXJzLlN0cmluZy5mb3JtYXQoYSxiLFtjLGRdKSxhPWlzTmFOKGEpfHwhYT9hOnBhcnNlRmxvYXQoYSkpO3JldHVybiBhfTsKT3BlbkxheWVycy5TdHlsZS5TWU1CT0xJWkVSX1BSRUZJWEVTPVsiUG9pbnQiLCJMaW5lIiwiUG9seWdvbiIsIlRleHQiLCJSYXN0ZXIiXTtPcGVuTGF5ZXJzLkZpbHRlcj1PcGVuTGF5ZXJzLkNsYXNzKHtpbml0aWFsaXplOmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuVXRpbC5leHRlbmQodGhpcyxhKX0sZGVzdHJveTpmdW5jdGlvbigpe30sZXZhbHVhdGU6ZnVuY3Rpb24oYSl7cmV0dXJuITB9LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuIG51bGx9LHRvU3RyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIE9wZW5MYXllcnMuRm9ybWF0JiZPcGVuTGF5ZXJzLkZvcm1hdC5DUUw/T3BlbkxheWVycy5Gb3JtYXQuQ1FMLnByb3RvdHlwZS53cml0ZSh0aGlzKTpPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodGhpcyl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuRmlsdGVyIn0pO09wZW5MYXllcnMuRmlsdGVyLlNwYXRpYWw9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkZpbHRlcix7dHlwZTpudWxsLHByb3BlcnR5Om51bGwsdmFsdWU6bnVsbCxkaXN0YW5jZTpudWxsLGRpc3RhbmNlVW5pdHM6bnVsbCxldmFsdWF0ZTpmdW5jdGlvbihhKXt2YXIgYj0hMTtzd2l0Y2godGhpcy50eXBlKXtjYXNlIE9wZW5MYXllcnMuRmlsdGVyLlNwYXRpYWwuQkJPWDpjYXNlIE9wZW5MYXllcnMuRmlsdGVyLlNwYXRpYWwuSU5URVJTRUNUUzppZihhLmdlb21ldHJ5KXt2YXIgYz10aGlzLnZhbHVlOyJPcGVuTGF5ZXJzLkJvdW5kcyI9PXRoaXMudmFsdWUuQ0xBU1NfTkFNRSYmKGM9dGhpcy52YWx1ZS50b0dlb21ldHJ5KCkpO2EuZ2VvbWV0cnkuaW50ZXJzZWN0cyhjKSYmKGI9ITApfWJyZWFrO2RlZmF1bHQ6dGhyb3cgRXJyb3IoImV2YWx1YXRlIGlzIG5vdCBpbXBsZW1lbnRlZCBmb3IgdGhpcyBmaWx0ZXIgdHlwZS4iKTt9cmV0dXJuIGJ9LGNsb25lOmZ1bmN0aW9uKCl7dmFyIGE9Ck9wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKHt2YWx1ZTp0aGlzLnZhbHVlJiZ0aGlzLnZhbHVlLmNsb25lJiZ0aGlzLnZhbHVlLmNsb25lKCl9LHRoaXMpO3JldHVybiBuZXcgT3BlbkxheWVycy5GaWx0ZXIuU3BhdGlhbChhKX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5GaWx0ZXIuU3BhdGlhbCJ9KTtPcGVuTGF5ZXJzLkZpbHRlci5TcGF0aWFsLkJCT1g9IkJCT1giO09wZW5MYXllcnMuRmlsdGVyLlNwYXRpYWwuSU5URVJTRUNUUz0iSU5URVJTRUNUUyI7T3BlbkxheWVycy5GaWx0ZXIuU3BhdGlhbC5EV0lUSElOPSJEV0lUSElOIjtPcGVuTGF5ZXJzLkZpbHRlci5TcGF0aWFsLldJVEhJTj0iV0lUSElOIjtPcGVuTGF5ZXJzLkZpbHRlci5TcGF0aWFsLkNPTlRBSU5TPSJDT05UQUlOUyI7T3BlbkxheWVycy5TdHJhdGVneS5CQk9YPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5TdHJhdGVneSx7Ym91bmRzOm51bGwscmVzb2x1dGlvbjpudWxsLHJhdGlvOjIscmVzRmFjdG9yOm51bGwscmVzcG9uc2U6bnVsbCxhY3RpdmF0ZTpmdW5jdGlvbigpe3ZhciBhPU9wZW5MYXllcnMuU3RyYXRlZ3kucHJvdG90eXBlLmFjdGl2YXRlLmNhbGwodGhpcyk7YSYmKHRoaXMubGF5ZXIuZXZlbnRzLm9uKHttb3ZlZW5kOnRoaXMudXBkYXRlLHJlZnJlc2g6dGhpcy51cGRhdGUsdmlzaWJpbGl0eWNoYW5nZWQ6dGhpcy51cGRhdGUsc2NvcGU6dGhpc30pLHRoaXMudXBkYXRlKCkpO3JldHVybiBhfSxkZWFjdGl2YXRlOmZ1bmN0aW9uKCl7dmFyIGE9T3BlbkxheWVycy5TdHJhdGVneS5wcm90b3R5cGUuZGVhY3RpdmF0ZS5jYWxsKHRoaXMpO2EmJnRoaXMubGF5ZXIuZXZlbnRzLnVuKHttb3ZlZW5kOnRoaXMudXBkYXRlLHJlZnJlc2g6dGhpcy51cGRhdGUsdmlzaWJpbGl0eWNoYW5nZWQ6dGhpcy51cGRhdGUsCnNjb3BlOnRoaXN9KTtyZXR1cm4gYX0sdXBkYXRlOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZ2V0TWFwQm91bmRzKCk7bnVsbCE9PWImJihhJiZhLmZvcmNlfHx0aGlzLmxheWVyLnZpc2liaWxpdHkmJnRoaXMubGF5ZXIuY2FsY3VsYXRlSW5SYW5nZSgpJiZ0aGlzLmludmFsaWRCb3VuZHMoYikpJiYodGhpcy5jYWxjdWxhdGVCb3VuZHMoYiksdGhpcy5yZXNvbHV0aW9uPXRoaXMubGF5ZXIubWFwLmdldFJlc29sdXRpb24oKSx0aGlzLnRyaWdnZXJSZWFkKGEpKX0sZ2V0TWFwQm91bmRzOmZ1bmN0aW9uKCl7aWYobnVsbD09PXRoaXMubGF5ZXIubWFwKXJldHVybiBudWxsO3ZhciBhPXRoaXMubGF5ZXIubWFwLmdldEV4dGVudCgpO2EmJiF0aGlzLmxheWVyLnByb2plY3Rpb24uZXF1YWxzKHRoaXMubGF5ZXIubWFwLmdldFByb2plY3Rpb25PYmplY3QoKSkmJihhPWEuY2xvbmUoKS50cmFuc2Zvcm0odGhpcy5sYXllci5tYXAuZ2V0UHJvamVjdGlvbk9iamVjdCgpLHRoaXMubGF5ZXIucHJvamVjdGlvbikpOwpyZXR1cm4gYX0saW52YWxpZEJvdW5kczpmdW5jdGlvbihhKXthfHwoYT10aGlzLmdldE1hcEJvdW5kcygpKTthPSF0aGlzLmJvdW5kc3x8IXRoaXMuYm91bmRzLmNvbnRhaW5zQm91bmRzKGEpOyFhJiZ0aGlzLnJlc0ZhY3RvciYmKGE9dGhpcy5yZXNvbHV0aW9uL3RoaXMubGF5ZXIubWFwLmdldFJlc29sdXRpb24oKSxhPWE+PXRoaXMucmVzRmFjdG9yfHxhPD0xL3RoaXMucmVzRmFjdG9yKTtyZXR1cm4gYX0sY2FsY3VsYXRlQm91bmRzOmZ1bmN0aW9uKGEpe2F8fChhPXRoaXMuZ2V0TWFwQm91bmRzKCkpO3ZhciBiPWEuZ2V0Q2VudGVyTG9uTGF0KCksYz1hLmdldFdpZHRoKCkqdGhpcy5yYXRpbzthPWEuZ2V0SGVpZ2h0KCkqdGhpcy5yYXRpbzt0aGlzLmJvdW5kcz1uZXcgT3BlbkxheWVycy5Cb3VuZHMoYi5sb24tYy8yLGIubGF0LWEvMixiLmxvbitjLzIsYi5sYXQrYS8yKX0sdHJpZ2dlclJlYWQ6ZnVuY3Rpb24oYSl7IXRoaXMucmVzcG9uc2V8fGEmJiEwPT09YS5ub0Fib3J0fHwKKHRoaXMubGF5ZXIucHJvdG9jb2wuYWJvcnQodGhpcy5yZXNwb25zZSksdGhpcy5sYXllci5ldmVudHMudHJpZ2dlckV2ZW50KCJsb2FkZW5kIikpO3ZhciBiPXtmaWx0ZXI6dGhpcy5jcmVhdGVGaWx0ZXIoKX07dGhpcy5sYXllci5ldmVudHMudHJpZ2dlckV2ZW50KCJsb2Fkc3RhcnQiLGIpO3RoaXMucmVzcG9uc2U9dGhpcy5sYXllci5wcm90b2NvbC5yZWFkKE9wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKHtmaWx0ZXI6Yi5maWx0ZXIsY2FsbGJhY2s6dGhpcy5tZXJnZSxzY29wZTp0aGlzfSxhKSl9LGNyZWF0ZUZpbHRlcjpmdW5jdGlvbigpe3ZhciBhPW5ldyBPcGVuTGF5ZXJzLkZpbHRlci5TcGF0aWFsKHt0eXBlOk9wZW5MYXllcnMuRmlsdGVyLlNwYXRpYWwuQkJPWCx2YWx1ZTp0aGlzLmJvdW5kcyxwcm9qZWN0aW9uOnRoaXMubGF5ZXIucHJvamVjdGlvbn0pO3RoaXMubGF5ZXIuZmlsdGVyJiYoYT1uZXcgT3BlbkxheWVycy5GaWx0ZXIuTG9naWNhbCh7dHlwZTpPcGVuTGF5ZXJzLkZpbHRlci5Mb2dpY2FsLkFORCwKZmlsdGVyczpbdGhpcy5sYXllci5maWx0ZXIsYV19KSk7cmV0dXJuIGF9LG1lcmdlOmZ1bmN0aW9uKGEpe3RoaXMubGF5ZXIuZGVzdHJveUZlYXR1cmVzKCk7aWYoYS5zdWNjZXNzKCkpe3ZhciBiPWEuZmVhdHVyZXM7aWYoYiYmMDxiLmxlbmd0aCl7dmFyIGM9dGhpcy5sYXllci5wcm9qZWN0aW9uLGQ9dGhpcy5sYXllci5tYXAuZ2V0UHJvamVjdGlvbk9iamVjdCgpO2lmKCFkLmVxdWFscyhjKSlmb3IodmFyIGUsZj0wLGc9Yi5sZW5ndGg7ZjxnOysrZikoZT1iW2ZdLmdlb21ldHJ5KSYmZS50cmFuc2Zvcm0oYyxkKTt0aGlzLmxheWVyLmFkZEZlYXR1cmVzKGIpfX1lbHNlIHRoaXMuYm91bmRzPW51bGw7dGhpcy5yZXNwb25zZT1udWxsO3RoaXMubGF5ZXIuZXZlbnRzLnRyaWdnZXJFdmVudCgibG9hZGVuZCIse3Jlc3BvbnNlOmF9KX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5TdHJhdGVneS5CQk9YIn0pO09wZW5MYXllcnMuSGFuZGxlci5GZWF0dXJlPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5IYW5kbGVyLHtFVkVOVE1BUDp7Y2xpY2s6eyJpbiI6ImNsaWNrIixvdXQ6ImNsaWNrb3V0In0sbW91c2Vtb3ZlOnsiaW4iOiJvdmVyIixvdXQ6Im91dCJ9LGRibGNsaWNrOnsiaW4iOiJkYmxjbGljayIsb3V0Om51bGx9LG1vdXNlZG93bjp7ImluIjpudWxsLG91dDpudWxsfSxtb3VzZXVwOnsiaW4iOm51bGwsb3V0Om51bGx9LHRvdWNoc3RhcnQ6eyJpbiI6ImNsaWNrIixvdXQ6ImNsaWNrb3V0In19LGZlYXR1cmU6bnVsbCxsYXN0RmVhdHVyZTpudWxsLGRvd246bnVsbCx1cDpudWxsLGNsaWNrVG9sZXJhbmNlOjQsZ2VvbWV0cnlUeXBlczpudWxsLHN0b3BDbGljazohMCxzdG9wRG93bjohMCxzdG9wVXA6ITEsaW5pdGlhbGl6ZTpmdW5jdGlvbihhLGIsYyxkKXtPcGVuTGF5ZXJzLkhhbmRsZXIucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxbYSxjLGRdKTt0aGlzLmxheWVyPQpifSx0b3VjaHN0YXJ0OmZ1bmN0aW9uKGEpe3RoaXMuc3RhcnRUb3VjaCgpO3JldHVybiBPcGVuTGF5ZXJzLkV2ZW50LmlzTXVsdGlUb3VjaChhKT8hMDp0aGlzLm1vdXNlZG93bihhKX0sdG91Y2htb3ZlOmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuRXZlbnQucHJldmVudERlZmF1bHQoYSl9LG1vdXNlZG93bjpmdW5jdGlvbihhKXtpZihPcGVuTGF5ZXJzLkV2ZW50LmlzTGVmdENsaWNrKGEpfHxPcGVuTGF5ZXJzLkV2ZW50LmlzU2luZ2xlVG91Y2goYSkpdGhpcy5kb3duPWEueHk7cmV0dXJuIHRoaXMuaGFuZGxlKGEpPyF0aGlzLnN0b3BEb3duOiEwfSxtb3VzZXVwOmZ1bmN0aW9uKGEpe3RoaXMudXA9YS54eTtyZXR1cm4gdGhpcy5oYW5kbGUoYSk/IXRoaXMuc3RvcFVwOiEwfSxjbGljazpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5oYW5kbGUoYSk/IXRoaXMuc3RvcENsaWNrOiEwfSxtb3VzZW1vdmU6ZnVuY3Rpb24oYSl7aWYoIXRoaXMuY2FsbGJhY2tzLm92ZXImJiF0aGlzLmNhbGxiYWNrcy5vdXQpcmV0dXJuITA7CnRoaXMuaGFuZGxlKGEpO3JldHVybiEwfSxkYmxjbGljazpmdW5jdGlvbihhKXtyZXR1cm4hdGhpcy5oYW5kbGUoYSl9LGdlb21ldHJ5VHlwZU1hdGNoZXM6ZnVuY3Rpb24oYSl7cmV0dXJuIG51bGw9PXRoaXMuZ2VvbWV0cnlUeXBlc3x8LTE8T3BlbkxheWVycy5VdGlsLmluZGV4T2YodGhpcy5nZW9tZXRyeVR5cGVzLGEuZ2VvbWV0cnkuQ0xBU1NfTkFNRSl9LGhhbmRsZTpmdW5jdGlvbihhKXt0aGlzLmZlYXR1cmUmJiF0aGlzLmZlYXR1cmUubGF5ZXImJih0aGlzLmZlYXR1cmU9bnVsbCk7dmFyIGI9YS50eXBlLGM9ITEsZD0hIXRoaXMuZmVhdHVyZSxlPSJjbGljayI9PWJ8fCJkYmxjbGljayI9PWJ8fCJ0b3VjaHN0YXJ0Ij09YjsodGhpcy5mZWF0dXJlPXRoaXMubGF5ZXIuZ2V0RmVhdHVyZUZyb21FdmVudChhKSkmJiF0aGlzLmZlYXR1cmUubGF5ZXImJih0aGlzLmZlYXR1cmU9bnVsbCk7dGhpcy5sYXN0RmVhdHVyZSYmIXRoaXMubGFzdEZlYXR1cmUubGF5ZXImJih0aGlzLmxhc3RGZWF0dXJlPQpudWxsKTt0aGlzLmZlYXR1cmU/KCJ0b3VjaHN0YXJ0Ij09PWImJk9wZW5MYXllcnMuRXZlbnQucHJldmVudERlZmF1bHQoYSksYT10aGlzLmZlYXR1cmUhPXRoaXMubGFzdEZlYXR1cmUsdGhpcy5nZW9tZXRyeVR5cGVNYXRjaGVzKHRoaXMuZmVhdHVyZSk/KGQmJmE/KHRoaXMubGFzdEZlYXR1cmUmJnRoaXMudHJpZ2dlckNhbGxiYWNrKGIsIm91dCIsW3RoaXMubGFzdEZlYXR1cmVdKSx0aGlzLnRyaWdnZXJDYWxsYmFjayhiLCJpbiIsW3RoaXMuZmVhdHVyZV0pKTpkJiYhZXx8dGhpcy50cmlnZ2VyQ2FsbGJhY2soYiwiaW4iLFt0aGlzLmZlYXR1cmVdKSx0aGlzLmxhc3RGZWF0dXJlPXRoaXMuZmVhdHVyZSxjPSEwKToodGhpcy5sYXN0RmVhdHVyZSYmKGQmJmF8fGUpJiZ0aGlzLnRyaWdnZXJDYWxsYmFjayhiLCJvdXQiLFt0aGlzLmxhc3RGZWF0dXJlXSksdGhpcy5mZWF0dXJlPW51bGwpKTp0aGlzLmxhc3RGZWF0dXJlJiYoZHx8ZSkmJnRoaXMudHJpZ2dlckNhbGxiYWNrKGIsIm91dCIsClt0aGlzLmxhc3RGZWF0dXJlXSk7cmV0dXJuIGN9LHRyaWdnZXJDYWxsYmFjazpmdW5jdGlvbihhLGIsYyl7aWYoYj10aGlzLkVWRU5UTUFQW2FdW2JdKSJjbGljayI9PWEmJnRoaXMudXAmJnRoaXMuZG93bj8oTWF0aC5zcXJ0KE1hdGgucG93KHRoaXMudXAueC10aGlzLmRvd24ueCwyKStNYXRoLnBvdyh0aGlzLnVwLnktdGhpcy5kb3duLnksMikpPD10aGlzLmNsaWNrVG9sZXJhbmNlJiZ0aGlzLmNhbGxiYWNrKGIsYyksdGhpcy51cD10aGlzLmRvd249bnVsbCk6dGhpcy5jYWxsYmFjayhiLGMpfSxhY3RpdmF0ZTpmdW5jdGlvbigpe3ZhciBhPSExO09wZW5MYXllcnMuSGFuZGxlci5wcm90b3R5cGUuYWN0aXZhdGUuYXBwbHkodGhpcyxhcmd1bWVudHMpJiYodGhpcy5tb3ZlTGF5ZXJUb1RvcCgpLHRoaXMubWFwLmV2ZW50cy5vbih7cmVtb3ZlbGF5ZXI6dGhpcy5oYW5kbGVNYXBFdmVudHMsY2hhbmdlbGF5ZXI6dGhpcy5oYW5kbGVNYXBFdmVudHMsc2NvcGU6dGhpc30pLGE9ITApOwpyZXR1cm4gYX0sZGVhY3RpdmF0ZTpmdW5jdGlvbigpe3ZhciBhPSExO09wZW5MYXllcnMuSGFuZGxlci5wcm90b3R5cGUuZGVhY3RpdmF0ZS5hcHBseSh0aGlzLGFyZ3VtZW50cykmJih0aGlzLm1vdmVMYXllckJhY2soKSx0aGlzLnVwPXRoaXMuZG93bj10aGlzLmxhc3RGZWF0dXJlPXRoaXMuZmVhdHVyZT1udWxsLHRoaXMubWFwLmV2ZW50cy51bih7cmVtb3ZlbGF5ZXI6dGhpcy5oYW5kbGVNYXBFdmVudHMsY2hhbmdlbGF5ZXI6dGhpcy5oYW5kbGVNYXBFdmVudHMsc2NvcGU6dGhpc30pLGE9ITApO3JldHVybiBhfSxoYW5kbGVNYXBFdmVudHM6ZnVuY3Rpb24oYSl7InJlbW92ZWxheWVyIiE9YS50eXBlJiYib3JkZXIiIT1hLnByb3BlcnR5fHx0aGlzLm1vdmVMYXllclRvVG9wKCl9LG1vdmVMYXllclRvVG9wOmZ1bmN0aW9uKCl7dmFyIGE9TWF0aC5tYXgodGhpcy5tYXAuWl9JTkRFWF9CQVNFLkZlYXR1cmUtMSx0aGlzLmxheWVyLmdldFpJbmRleCgpKSsxO3RoaXMubGF5ZXIuc2V0WkluZGV4KGEpfSwKbW92ZUxheWVyQmFjazpmdW5jdGlvbigpe3ZhciBhPXRoaXMubGF5ZXIuZ2V0WkluZGV4KCktMTthPj10aGlzLm1hcC5aX0lOREVYX0JBU0UuRmVhdHVyZT90aGlzLmxheWVyLnNldFpJbmRleChhKTp0aGlzLm1hcC5zZXRMYXllclpJbmRleCh0aGlzLmxheWVyLHRoaXMubWFwLmdldExheWVySW5kZXgodGhpcy5sYXllcikpfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkhhbmRsZXIuRmVhdHVyZSJ9KTtPcGVuTGF5ZXJzLlN0eWxlTWFwPU9wZW5MYXllcnMuQ2xhc3Moe3N0eWxlczpudWxsLGV4dGVuZERlZmF1bHQ6ITAsaW5pdGlhbGl6ZTpmdW5jdGlvbihhLGIpe3RoaXMuc3R5bGVzPXsiZGVmYXVsdCI6bmV3IE9wZW5MYXllcnMuU3R5bGUoT3BlbkxheWVycy5GZWF0dXJlLlZlY3Rvci5zdHlsZVsiZGVmYXVsdCJdKSxzZWxlY3Q6bmV3IE9wZW5MYXllcnMuU3R5bGUoT3BlbkxheWVycy5GZWF0dXJlLlZlY3Rvci5zdHlsZS5zZWxlY3QpLHRlbXBvcmFyeTpuZXcgT3BlbkxheWVycy5TdHlsZShPcGVuTGF5ZXJzLkZlYXR1cmUuVmVjdG9yLnN0eWxlLnRlbXBvcmFyeSksImRlbGV0ZSI6bmV3IE9wZW5MYXllcnMuU3R5bGUoT3BlbkxheWVycy5GZWF0dXJlLlZlY3Rvci5zdHlsZVsiZGVsZXRlIl0pfTtpZihhIGluc3RhbmNlb2YgT3BlbkxheWVycy5TdHlsZSl0aGlzLnN0eWxlc1siZGVmYXVsdCJdPWEsdGhpcy5zdHlsZXMuc2VsZWN0PWEsdGhpcy5zdHlsZXMudGVtcG9yYXJ5PWEsdGhpcy5zdHlsZXNbImRlbGV0ZSJdPQphO2Vsc2UgaWYoIm9iamVjdCI9PXR5cGVvZiBhKWZvcih2YXIgYyBpbiBhKWlmKGFbY11pbnN0YW5jZW9mIE9wZW5MYXllcnMuU3R5bGUpdGhpcy5zdHlsZXNbY109YVtjXTtlbHNlIGlmKCJvYmplY3QiPT10eXBlb2YgYVtjXSl0aGlzLnN0eWxlc1tjXT1uZXcgT3BlbkxheWVycy5TdHlsZShhW2NdKTtlbHNle3RoaXMuc3R5bGVzWyJkZWZhdWx0Il09bmV3IE9wZW5MYXllcnMuU3R5bGUoYSk7dGhpcy5zdHlsZXMuc2VsZWN0PW5ldyBPcGVuTGF5ZXJzLlN0eWxlKGEpO3RoaXMuc3R5bGVzLnRlbXBvcmFyeT1uZXcgT3BlbkxheWVycy5TdHlsZShhKTt0aGlzLnN0eWxlc1siZGVsZXRlIl09bmV3IE9wZW5MYXllcnMuU3R5bGUoYSk7YnJlYWt9T3BlbkxheWVycy5VdGlsLmV4dGVuZCh0aGlzLGIpfSxkZXN0cm95OmZ1bmN0aW9uKCl7Zm9yKHZhciBhIGluIHRoaXMuc3R5bGVzKXRoaXMuc3R5bGVzW2FdLmRlc3Ryb3koKTt0aGlzLnN0eWxlcz1udWxsfSxjcmVhdGVTeW1ib2xpemVyOmZ1bmN0aW9uKGEsCmIpe2F8fChhPW5ldyBPcGVuTGF5ZXJzLkZlYXR1cmUuVmVjdG9yKTt0aGlzLnN0eWxlc1tiXXx8KGI9ImRlZmF1bHQiKTthLnJlbmRlckludGVudD1iO3ZhciBjPXt9O3RoaXMuZXh0ZW5kRGVmYXVsdCYmImRlZmF1bHQiIT1iJiYoYz10aGlzLnN0eWxlc1siZGVmYXVsdCJdLmNyZWF0ZVN5bWJvbGl6ZXIoYSkpO3JldHVybiBPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKGMsdGhpcy5zdHlsZXNbYl0uY3JlYXRlU3ltYm9saXplcihhKSl9LGFkZFVuaXF1ZVZhbHVlUnVsZXM6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9W10sZjtmb3IoZiBpbiBjKWUucHVzaChuZXcgT3BlbkxheWVycy5SdWxlKHtzeW1ib2xpemVyOmNbZl0sY29udGV4dDpkLGZpbHRlcjpuZXcgT3BlbkxheWVycy5GaWx0ZXIuQ29tcGFyaXNvbih7dHlwZTpPcGVuTGF5ZXJzLkZpbHRlci5Db21wYXJpc29uLkVRVUFMX1RPLHByb3BlcnR5OmIsdmFsdWU6Zn0pfSkpO3RoaXMuc3R5bGVzW2FdLmFkZFJ1bGVzKGUpfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLlN0eWxlTWFwIn0pO09wZW5MYXllcnMuTGF5ZXIuVmVjdG9yPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5MYXllcix7aXNCYXNlTGF5ZXI6ITEsaXNGaXhlZDohMSxmZWF0dXJlczpudWxsLGZpbHRlcjpudWxsLHNlbGVjdGVkRmVhdHVyZXM6bnVsbCx1bnJlbmRlcmVkRmVhdHVyZXM6bnVsbCxyZXBvcnRFcnJvcjohMCxzdHlsZTpudWxsLHN0eWxlTWFwOm51bGwsc3RyYXRlZ2llczpudWxsLHByb3RvY29sOm51bGwscmVuZGVyZXJzOlsiU1ZHIiwiVk1MIiwiQ2FudmFzIl0scmVuZGVyZXI6bnVsbCxyZW5kZXJlck9wdGlvbnM6bnVsbCxnZW9tZXRyeVR5cGU6bnVsbCxkcmF3bjohMSxyYXRpbzoxLGluaXRpYWxpemU6ZnVuY3Rpb24oYSxiKXtPcGVuTGF5ZXJzLkxheWVyLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLnJlbmRlcmVyJiZ0aGlzLnJlbmRlcmVyLnN1cHBvcnRlZCgpfHx0aGlzLmFzc2lnblJlbmRlcmVyKCk7dGhpcy5yZW5kZXJlciYmdGhpcy5yZW5kZXJlci5zdXBwb3J0ZWQoKXx8Cih0aGlzLnJlbmRlcmVyPW51bGwsdGhpcy5kaXNwbGF5RXJyb3IoKSk7dGhpcy5zdHlsZU1hcHx8KHRoaXMuc3R5bGVNYXA9bmV3IE9wZW5MYXllcnMuU3R5bGVNYXApO3RoaXMuZmVhdHVyZXM9W107dGhpcy5zZWxlY3RlZEZlYXR1cmVzPVtdO3RoaXMudW5yZW5kZXJlZEZlYXR1cmVzPXt9O2lmKHRoaXMuc3RyYXRlZ2llcylmb3IodmFyIGM9MCxkPXRoaXMuc3RyYXRlZ2llcy5sZW5ndGg7YzxkO2MrKyl0aGlzLnN0cmF0ZWdpZXNbY10uc2V0TGF5ZXIodGhpcyl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXtpZih0aGlzLnN0cmF0ZWdpZXMpe3ZhciBhLGIsYztiPTA7Zm9yKGM9dGhpcy5zdHJhdGVnaWVzLmxlbmd0aDtiPGM7YisrKWE9dGhpcy5zdHJhdGVnaWVzW2JdLGEuYXV0b0Rlc3Ryb3kmJmEuZGVzdHJveSgpO3RoaXMuc3RyYXRlZ2llcz1udWxsfXRoaXMucHJvdG9jb2wmJih0aGlzLnByb3RvY29sLmF1dG9EZXN0cm95JiZ0aGlzLnByb3RvY29sLmRlc3Ryb3koKSx0aGlzLnByb3RvY29sPQpudWxsKTt0aGlzLmRlc3Ryb3lGZWF0dXJlcygpO3RoaXMudW5yZW5kZXJlZEZlYXR1cmVzPXRoaXMuc2VsZWN0ZWRGZWF0dXJlcz10aGlzLmZlYXR1cmVzPW51bGw7dGhpcy5yZW5kZXJlciYmdGhpcy5yZW5kZXJlci5kZXN0cm95KCk7dGhpcy5kcmF3bj10aGlzLmdlb21ldHJ5VHlwZT10aGlzLnJlbmRlcmVyPW51bGw7T3BlbkxheWVycy5MYXllci5wcm90b3R5cGUuZGVzdHJveS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGNsb25lOmZ1bmN0aW9uKGEpe251bGw9PWEmJihhPW5ldyBPcGVuTGF5ZXJzLkxheWVyLlZlY3Rvcih0aGlzLm5hbWUsdGhpcy5nZXRPcHRpb25zKCkpKTthPU9wZW5MYXllcnMuTGF5ZXIucHJvdG90eXBlLmNsb25lLmFwcGx5KHRoaXMsW2FdKTtmb3IodmFyIGI9dGhpcy5mZWF0dXJlcyxjPWIubGVuZ3RoLGQ9QXJyYXkoYyksZT0wO2U8YzsrK2UpZFtlXT1iW2VdLmNsb25lKCk7YS5mZWF0dXJlcz1kO3JldHVybiBhfSxyZWZyZXNoOmZ1bmN0aW9uKGEpe3RoaXMuY2FsY3VsYXRlSW5SYW5nZSgpJiYKdGhpcy52aXNpYmlsaXR5JiZ0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoInJlZnJlc2giLGEpfSxhc3NpZ25SZW5kZXJlcjpmdW5jdGlvbigpe2Zvcih2YXIgYT0wLGI9dGhpcy5yZW5kZXJlcnMubGVuZ3RoO2E8YjthKyspe3ZhciBjPXRoaXMucmVuZGVyZXJzW2FdO2lmKChjPSJmdW5jdGlvbiI9PXR5cGVvZiBjP2M6T3BlbkxheWVycy5SZW5kZXJlcltjXSkmJmMucHJvdG90eXBlLnN1cHBvcnRlZCgpKXt0aGlzLnJlbmRlcmVyPW5ldyBjKHRoaXMuZGl2LHRoaXMucmVuZGVyZXJPcHRpb25zKTticmVha319fSxkaXNwbGF5RXJyb3I6ZnVuY3Rpb24oKXt0aGlzLnJlcG9ydEVycm9yJiZPcGVuTGF5ZXJzLkNvbnNvbGUudXNlckVycm9yKE9wZW5MYXllcnMuaTE4bigiYnJvd3Nlck5vdFN1cHBvcnRlZCIse3JlbmRlcmVyczp0aGlzLnJlbmRlcmVycy5qb2luKCJcbiIpfSkpfSxzZXRNYXA6ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5MYXllci5wcm90b3R5cGUuc2V0TWFwLmFwcGx5KHRoaXMsCmFyZ3VtZW50cyk7aWYodGhpcy5yZW5kZXJlcil7dGhpcy5yZW5kZXJlci5tYXA9dGhpcy5tYXA7dmFyIGI9dGhpcy5tYXAuZ2V0U2l6ZSgpO2Iudyo9dGhpcy5yYXRpbztiLmgqPXRoaXMucmF0aW87dGhpcy5yZW5kZXJlci5zZXRTaXplKGIpfWVsc2UgdGhpcy5tYXAucmVtb3ZlTGF5ZXIodGhpcyl9LGFmdGVyQWRkOmZ1bmN0aW9uKCl7aWYodGhpcy5zdHJhdGVnaWVzKXt2YXIgYSxiLGM7Yj0wO2ZvcihjPXRoaXMuc3RyYXRlZ2llcy5sZW5ndGg7YjxjO2IrKylhPXRoaXMuc3RyYXRlZ2llc1tiXSxhLmF1dG9BY3RpdmF0ZSYmYS5hY3RpdmF0ZSgpfX0scmVtb3ZlTWFwOmZ1bmN0aW9uKGEpe3RoaXMuZHJhd249ITE7aWYodGhpcy5zdHJhdGVnaWVzKXt2YXIgYixjO2I9MDtmb3IoYz10aGlzLnN0cmF0ZWdpZXMubGVuZ3RoO2I8YztiKyspYT10aGlzLnN0cmF0ZWdpZXNbYl0sYS5hdXRvQWN0aXZhdGUmJmEuZGVhY3RpdmF0ZSgpfX0sb25NYXBSZXNpemU6ZnVuY3Rpb24oKXtPcGVuTGF5ZXJzLkxheWVyLnByb3RvdHlwZS5vbk1hcFJlc2l6ZS5hcHBseSh0aGlzLAphcmd1bWVudHMpO3ZhciBhPXRoaXMubWFwLmdldFNpemUoKTthLncqPXRoaXMucmF0aW87YS5oKj10aGlzLnJhdGlvO3RoaXMucmVuZGVyZXIuc2V0U2l6ZShhKX0sbW92ZVRvOmZ1bmN0aW9uKGEsYixjKXtPcGVuTGF5ZXJzLkxheWVyLnByb3RvdHlwZS5tb3ZlVG8uYXBwbHkodGhpcyxhcmd1bWVudHMpO3ZhciBkPSEwO2lmKCFjKXt0aGlzLnJlbmRlcmVyLnJvb3Quc3R5bGUudmlzaWJpbGl0eT0iaGlkZGVuIjt2YXIgZD10aGlzLm1hcC5nZXRTaXplKCksZT1kLncsZD1kLmgsZT1lLzIqdGhpcy5yYXRpby1lLzIsZD1kLzIqdGhpcy5yYXRpby1kLzIsZT1lK3RoaXMubWFwLmxheWVyQ29udGFpbmVyT3JpZ2luUHgueCxlPS1NYXRoLnJvdW5kKGUpLGQ9ZCt0aGlzLm1hcC5sYXllckNvbnRhaW5lck9yaWdpblB4LnksZD0tTWF0aC5yb3VuZChkKTt0aGlzLmRpdi5zdHlsZS5sZWZ0PWUrInB4Ijt0aGlzLmRpdi5zdHlsZS50b3A9ZCsicHgiO2U9dGhpcy5tYXAuZ2V0RXh0ZW50KCkuc2NhbGUodGhpcy5yYXRpbyk7CmQ9dGhpcy5yZW5kZXJlci5zZXRFeHRlbnQoZSxiKTt0aGlzLnJlbmRlcmVyLnJvb3Quc3R5bGUudmlzaWJpbGl0eT0idmlzaWJsZSI7ITA9PT1PcGVuTGF5ZXJzLklTX0dFQ0tPJiYodGhpcy5kaXYuc2Nyb2xsTGVmdD10aGlzLmRpdi5zY3JvbGxMZWZ0KTtpZighYiYmZClmb3IodmFyIGYgaW4gdGhpcy51bnJlbmRlcmVkRmVhdHVyZXMpZT10aGlzLnVucmVuZGVyZWRGZWF0dXJlc1tmXSx0aGlzLmRyYXdGZWF0dXJlKGUpfWlmKCF0aGlzLmRyYXdufHxifHwhZClmb3IodGhpcy5kcmF3bj0hMCxmPTAsZD10aGlzLmZlYXR1cmVzLmxlbmd0aDtmPGQ7ZisrKXRoaXMucmVuZGVyZXIubG9ja2VkPWYhPT1kLTEsZT10aGlzLmZlYXR1cmVzW2ZdLHRoaXMuZHJhd0ZlYXR1cmUoZSl9LGRpc3BsYXk6ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5MYXllci5wcm90b3R5cGUuZGlzcGxheS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dmFyIGI9dGhpcy5kaXYuc3R5bGUuZGlzcGxheTtiIT10aGlzLnJlbmRlcmVyLnJvb3Quc3R5bGUuZGlzcGxheSYmCih0aGlzLnJlbmRlcmVyLnJvb3Quc3R5bGUuZGlzcGxheT1iKX0sYWRkRmVhdHVyZXM6ZnVuY3Rpb24oYSxiKXtPcGVuTGF5ZXJzLlV0aWwuaXNBcnJheShhKXx8KGE9W2FdKTt2YXIgYz0hYnx8IWIuc2lsZW50O2lmKGMpe3ZhciBkPXtmZWF0dXJlczphfTtpZighMT09PXRoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgiYmVmb3JlZmVhdHVyZXNhZGRlZCIsZCkpcmV0dXJuO2E9ZC5mZWF0dXJlc31mb3IodmFyIGQ9W10sZT0wLGY9YS5sZW5ndGg7ZTxmO2UrKyl7dGhpcy5yZW5kZXJlci5sb2NrZWQ9ZSE9YS5sZW5ndGgtMT8hMDohMTt2YXIgZz1hW2VdO2lmKHRoaXMuZ2VvbWV0cnlUeXBlJiYhKGcuZ2VvbWV0cnkgaW5zdGFuY2VvZiB0aGlzLmdlb21ldHJ5VHlwZSkpdGhyb3cgbmV3IFR5cGVFcnJvcigiYWRkRmVhdHVyZXM6IGNvbXBvbmVudCBzaG91bGQgYmUgYW4gIit0aGlzLmdlb21ldHJ5VHlwZS5wcm90b3R5cGUuQ0xBU1NfTkFNRSk7Zy5sYXllcj10aGlzOyFnLnN0eWxlJiZ0aGlzLnN0eWxlJiYKKGcuc3R5bGU9T3BlbkxheWVycy5VdGlsLmV4dGVuZCh7fSx0aGlzLnN0eWxlKSk7aWYoYyl7aWYoITE9PT10aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoImJlZm9yZWZlYXR1cmVhZGRlZCIse2ZlYXR1cmU6Z30pKWNvbnRpbnVlO3RoaXMucHJlRmVhdHVyZUluc2VydChnKX1kLnB1c2goZyk7dGhpcy5mZWF0dXJlcy5wdXNoKGcpO3RoaXMuZHJhd0ZlYXR1cmUoZyk7YyYmKHRoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgiZmVhdHVyZWFkZGVkIix7ZmVhdHVyZTpnfSksdGhpcy5vbkZlYXR1cmVJbnNlcnQoZykpfWMmJnRoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgiZmVhdHVyZXNhZGRlZCIse2ZlYXR1cmVzOmR9KX0scmVtb3ZlRmVhdHVyZXM6ZnVuY3Rpb24oYSxiKXtpZihhJiYwIT09YS5sZW5ndGgpe2lmKGE9PT10aGlzLmZlYXR1cmVzKXJldHVybiB0aGlzLnJlbW92ZUFsbEZlYXR1cmVzKGIpO09wZW5MYXllcnMuVXRpbC5pc0FycmF5KGEpfHwoYT1bYV0pO2E9PT10aGlzLnNlbGVjdGVkRmVhdHVyZXMmJgooYT1hLnNsaWNlKCkpO3ZhciBjPSFifHwhYi5zaWxlbnQ7YyYmdGhpcy5ldmVudHMudHJpZ2dlckV2ZW50KCJiZWZvcmVmZWF0dXJlc3JlbW92ZWQiLHtmZWF0dXJlczphfSk7Zm9yKHZhciBkPWEubGVuZ3RoLTE7MDw9ZDtkLS0pe3RoaXMucmVuZGVyZXIubG9ja2VkPTAhPWQmJmFbZC0xXS5nZW9tZXRyeT8hMDohMTt2YXIgZT1hW2RdO2RlbGV0ZSB0aGlzLnVucmVuZGVyZWRGZWF0dXJlc1tlLmlkXTtjJiZ0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoImJlZm9yZWZlYXR1cmVyZW1vdmVkIix7ZmVhdHVyZTplfSk7dGhpcy5mZWF0dXJlcz1PcGVuTGF5ZXJzLlV0aWwucmVtb3ZlSXRlbSh0aGlzLmZlYXR1cmVzLGUpO2UubGF5ZXI9bnVsbDtlLmdlb21ldHJ5JiZ0aGlzLnJlbmRlcmVyLmVyYXNlRmVhdHVyZXMoZSk7LTEhPU9wZW5MYXllcnMuVXRpbC5pbmRleE9mKHRoaXMuc2VsZWN0ZWRGZWF0dXJlcyxlKSYmT3BlbkxheWVycy5VdGlsLnJlbW92ZUl0ZW0odGhpcy5zZWxlY3RlZEZlYXR1cmVzLAplKTtjJiZ0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoImZlYXR1cmVyZW1vdmVkIix7ZmVhdHVyZTplfSl9YyYmdGhpcy5ldmVudHMudHJpZ2dlckV2ZW50KCJmZWF0dXJlc3JlbW92ZWQiLHtmZWF0dXJlczphfSl9fSxyZW1vdmVBbGxGZWF0dXJlczpmdW5jdGlvbihhKXthPSFhfHwhYS5zaWxlbnQ7dmFyIGI9dGhpcy5mZWF0dXJlczthJiZ0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoImJlZm9yZWZlYXR1cmVzcmVtb3ZlZCIse2ZlYXR1cmVzOmJ9KTtmb3IodmFyIGMsZD1iLmxlbmd0aC0xOzA8PWQ7ZC0tKWM9YltkXSxhJiZ0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoImJlZm9yZWZlYXR1cmVyZW1vdmVkIix7ZmVhdHVyZTpjfSksYy5sYXllcj1udWxsLGEmJnRoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgiZmVhdHVyZXJlbW92ZWQiLHtmZWF0dXJlOmN9KTt0aGlzLnJlbmRlcmVyLmNsZWFyKCk7dGhpcy5mZWF0dXJlcz1bXTt0aGlzLnVucmVuZGVyZWRGZWF0dXJlcz17fTt0aGlzLnNlbGVjdGVkRmVhdHVyZXM9CltdO2EmJnRoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgiZmVhdHVyZXNyZW1vdmVkIix7ZmVhdHVyZXM6Yn0pfSxkZXN0cm95RmVhdHVyZXM6ZnVuY3Rpb24oYSxiKXt2b2lkIDA9PWEmJihhPXRoaXMuZmVhdHVyZXMpO2lmKGEpe3RoaXMucmVtb3ZlRmVhdHVyZXMoYSxiKTtmb3IodmFyIGM9YS5sZW5ndGgtMTswPD1jO2MtLSlhW2NdLmRlc3Ryb3koKX19LGRyYXdGZWF0dXJlOmZ1bmN0aW9uKGEsYil7aWYodGhpcy5kcmF3bil7aWYoIm9iamVjdCIhPXR5cGVvZiBiKXtifHxhLnN0YXRlIT09T3BlbkxheWVycy5TdGF0ZS5ERUxFVEV8fChiPSJkZWxldGUiKTt2YXIgYz1ifHxhLnJlbmRlckludGVudDsoYj1hLnN0eWxlfHx0aGlzLnN0eWxlKXx8KGI9dGhpcy5zdHlsZU1hcC5jcmVhdGVTeW1ib2xpemVyKGEsYykpfWM9dGhpcy5yZW5kZXJlci5kcmF3RmVhdHVyZShhLGIpOyExPT09Y3x8bnVsbD09PWM/dGhpcy51bnJlbmRlcmVkRmVhdHVyZXNbYS5pZF09YTpkZWxldGUgdGhpcy51bnJlbmRlcmVkRmVhdHVyZXNbYS5pZF19fSwKZXJhc2VGZWF0dXJlczpmdW5jdGlvbihhKXt0aGlzLnJlbmRlcmVyLmVyYXNlRmVhdHVyZXMoYSl9LGdldEZlYXR1cmVGcm9tRXZlbnQ6ZnVuY3Rpb24oYSl7aWYoIXRoaXMucmVuZGVyZXIpdGhyb3cgRXJyb3IoImdldEZlYXR1cmVGcm9tRXZlbnQgY2FsbGVkIG9uIGxheWVyIHdpdGggbm8gcmVuZGVyZXIuIFRoaXMgdXN1YWxseSBtZWFucyB5b3UgZGVzdHJveWVkIGEgbGF5ZXIsIGJ1dCBub3Qgc29tZSBoYW5kbGVyIHdoaWNoIGlzIGFzc29jaWF0ZWQgd2l0aCBpdC4iKTt2YXIgYj1udWxsOyhhPXRoaXMucmVuZGVyZXIuZ2V0RmVhdHVyZUlkRnJvbUV2ZW50KGEpKSYmKGI9InN0cmluZyI9PT10eXBlb2YgYT90aGlzLmdldEZlYXR1cmVCeUlkKGEpOmEpO3JldHVybiBifSxnZXRGZWF0dXJlQnk6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9bnVsbCxkPTAsZT10aGlzLmZlYXR1cmVzLmxlbmd0aDtkPGU7KytkKWlmKHRoaXMuZmVhdHVyZXNbZF1bYV09PWIpe2M9dGhpcy5mZWF0dXJlc1tkXTsKYnJlYWt9cmV0dXJuIGN9LGdldEZlYXR1cmVCeUlkOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmdldEZlYXR1cmVCeSgiaWQiLGEpfSxnZXRGZWF0dXJlQnlGaWQ6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZ2V0RmVhdHVyZUJ5KCJmaWQiLGEpfSxnZXRGZWF0dXJlc0J5QXR0cmlidXRlOmZ1bmN0aW9uKGEsYil7dmFyIGMsZCxlPXRoaXMuZmVhdHVyZXMubGVuZ3RoLGY9W107Zm9yKGM9MDtjPGU7YysrKShkPXRoaXMuZmVhdHVyZXNbY10pJiZkLmF0dHJpYnV0ZXMmJmQuYXR0cmlidXRlc1thXT09PWImJmYucHVzaChkKTtyZXR1cm4gZn0sb25GZWF0dXJlSW5zZXJ0OmZ1bmN0aW9uKGEpe30scHJlRmVhdHVyZUluc2VydDpmdW5jdGlvbihhKXt9LGdldERhdGFFeHRlbnQ6ZnVuY3Rpb24oKXt2YXIgYT1udWxsLGI9dGhpcy5mZWF0dXJlcztpZihiJiYwPGIubGVuZ3RoKWZvcih2YXIgYz1udWxsLGQ9MCxlPWIubGVuZ3RoO2Q8ZTtkKyspaWYoYz1iW2RdLmdlb21ldHJ5KW51bGw9PT1hJiYKKGE9bmV3IE9wZW5MYXllcnMuQm91bmRzKSxhLmV4dGVuZChjLmdldEJvdW5kcygpKTtyZXR1cm4gYX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5MYXllci5WZWN0b3IifSk7T3BlbkxheWVycy5MYXllci5WZWN0b3IuUm9vdENvbnRhaW5lcj1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuTGF5ZXIuVmVjdG9yLHtkaXNwbGF5SW5MYXllclN3aXRjaGVyOiExLGxheWVyczpudWxsLGRpc3BsYXk6ZnVuY3Rpb24oKXt9LGdldEZlYXR1cmVGcm9tRXZlbnQ6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPXRoaXMubGF5ZXJzLGMsZD0wO2Q8Yi5sZW5ndGg7ZCsrKWlmKGM9YltkXS5nZXRGZWF0dXJlRnJvbUV2ZW50KGEpKXJldHVybiBjfSxzZXRNYXA6ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5MYXllci5WZWN0b3IucHJvdG90eXBlLnNldE1hcC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5jb2xsZWN0Um9vdHMoKTthLmV2ZW50cy5yZWdpc3RlcigiY2hhbmdlbGF5ZXIiLHRoaXMsdGhpcy5oYW5kbGVDaGFuZ2VMYXllcil9LHJlbW92ZU1hcDpmdW5jdGlvbihhKXthLmV2ZW50cy51bnJlZ2lzdGVyKCJjaGFuZ2VsYXllciIsdGhpcyx0aGlzLmhhbmRsZUNoYW5nZUxheWVyKTsKdGhpcy5yZXNldFJvb3RzKCk7T3BlbkxheWVycy5MYXllci5WZWN0b3IucHJvdG90eXBlLnJlbW92ZU1hcC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGNvbGxlY3RSb290czpmdW5jdGlvbigpe2Zvcih2YXIgYSxiPTA7Yjx0aGlzLm1hcC5sYXllcnMubGVuZ3RoOysrYilhPXRoaXMubWFwLmxheWVyc1tiXSwtMSE9T3BlbkxheWVycy5VdGlsLmluZGV4T2YodGhpcy5sYXllcnMsYSkmJmEucmVuZGVyZXIubW92ZVJvb3QodGhpcy5yZW5kZXJlcil9LHJlc2V0Um9vdHM6ZnVuY3Rpb24oKXtmb3IodmFyIGEsYj0wO2I8dGhpcy5sYXllcnMubGVuZ3RoOysrYilhPXRoaXMubGF5ZXJzW2JdLHRoaXMucmVuZGVyZXImJmEucmVuZGVyZXIuZ2V0UmVuZGVyTGF5ZXJJZCgpPT10aGlzLmlkJiZ0aGlzLnJlbmRlcmVyLm1vdmVSb290KGEucmVuZGVyZXIpfSxoYW5kbGVDaGFuZ2VMYXllcjpmdW5jdGlvbihhKXt2YXIgYj1hLmxheWVyOyJvcmRlciI9PWEucHJvcGVydHkmJi0xIT1PcGVuTGF5ZXJzLlV0aWwuaW5kZXhPZih0aGlzLmxheWVycywKYikmJih0aGlzLnJlc2V0Um9vdHMoKSx0aGlzLmNvbGxlY3RSb290cygpKX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5MYXllci5WZWN0b3IuUm9vdENvbnRhaW5lciJ9KTtPcGVuTGF5ZXJzLkNvbnRyb2wuU2VsZWN0RmVhdHVyZT1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuQ29udHJvbCx7bXVsdGlwbGVLZXk6bnVsbCx0b2dnbGVLZXk6bnVsbCxtdWx0aXBsZTohMSxjbGlja291dDohMCx0b2dnbGU6ITEsaG92ZXI6ITEsaGlnaGxpZ2h0T25seTohMSxib3g6ITEsb25CZWZvcmVTZWxlY3Q6ZnVuY3Rpb24oKXt9LG9uU2VsZWN0OmZ1bmN0aW9uKCl7fSxvblVuc2VsZWN0OmZ1bmN0aW9uKCl7fSxzY29wZTpudWxsLGdlb21ldHJ5VHlwZXM6bnVsbCxsYXllcjpudWxsLGxheWVyczpudWxsLGNhbGxiYWNrczpudWxsLHNlbGVjdFN0eWxlOm51bGwscmVuZGVySW50ZW50OiJzZWxlY3QiLGhhbmRsZXJzOm51bGwsaW5pdGlhbGl6ZTpmdW5jdGlvbihhLGIpe09wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLFtiXSk7bnVsbD09PXRoaXMuc2NvcGUmJih0aGlzLnNjb3BlPXRoaXMpO3RoaXMuaW5pdExheWVyKGEpO3ZhciBjPQp7Y2xpY2s6dGhpcy5jbGlja0ZlYXR1cmUsY2xpY2tvdXQ6dGhpcy5jbGlja291dEZlYXR1cmV9O3RoaXMuaG92ZXImJihjLm92ZXI9dGhpcy5vdmVyRmVhdHVyZSxjLm91dD10aGlzLm91dEZlYXR1cmUpO3RoaXMuY2FsbGJhY2tzPU9wZW5MYXllcnMuVXRpbC5leHRlbmQoYyx0aGlzLmNhbGxiYWNrcyk7dGhpcy5oYW5kbGVycz17ZmVhdHVyZTpuZXcgT3BlbkxheWVycy5IYW5kbGVyLkZlYXR1cmUodGhpcyx0aGlzLmxheWVyLHRoaXMuY2FsbGJhY2tzLHtnZW9tZXRyeVR5cGVzOnRoaXMuZ2VvbWV0cnlUeXBlc30pfTt0aGlzLmJveCYmKHRoaXMuaGFuZGxlcnMuYm94PW5ldyBPcGVuTGF5ZXJzLkhhbmRsZXIuQm94KHRoaXMse2RvbmU6dGhpcy5zZWxlY3RCb3h9LHtib3hEaXZDbGFzc05hbWU6Im9sSGFuZGxlckJveFNlbGVjdEZlYXR1cmUifSkpfSxpbml0TGF5ZXI6ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5VdGlsLmlzQXJyYXkoYSk/KHRoaXMubGF5ZXJzPWEsdGhpcy5sYXllcj0KbmV3IE9wZW5MYXllcnMuTGF5ZXIuVmVjdG9yLlJvb3RDb250YWluZXIodGhpcy5pZCsiX2NvbnRhaW5lciIse2xheWVyczphfSkpOnRoaXMubGF5ZXI9YX0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuYWN0aXZlJiZ0aGlzLmxheWVycyYmdGhpcy5tYXAucmVtb3ZlTGF5ZXIodGhpcy5sYXllcik7T3BlbkxheWVycy5Db250cm9sLnByb3RvdHlwZS5kZXN0cm95LmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLmxheWVycyYmdGhpcy5sYXllci5kZXN0cm95KCl9LGFjdGl2YXRlOmZ1bmN0aW9uKCl7dGhpcy5hY3RpdmV8fCh0aGlzLmxheWVycyYmdGhpcy5tYXAuYWRkTGF5ZXIodGhpcy5sYXllciksdGhpcy5oYW5kbGVycy5mZWF0dXJlLmFjdGl2YXRlKCksdGhpcy5ib3gmJnRoaXMuaGFuZGxlcnMuYm94JiZ0aGlzLmhhbmRsZXJzLmJveC5hY3RpdmF0ZSgpKTtyZXR1cm4gT3BlbkxheWVycy5Db250cm9sLnByb3RvdHlwZS5hY3RpdmF0ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGRlYWN0aXZhdGU6ZnVuY3Rpb24oKXt0aGlzLmFjdGl2ZSYmCih0aGlzLmhhbmRsZXJzLmZlYXR1cmUuZGVhY3RpdmF0ZSgpLHRoaXMuaGFuZGxlcnMuYm94JiZ0aGlzLmhhbmRsZXJzLmJveC5kZWFjdGl2YXRlKCksdGhpcy5sYXllcnMmJnRoaXMubWFwLnJlbW92ZUxheWVyKHRoaXMubGF5ZXIpKTtyZXR1cm4gT3BlbkxheWVycy5Db250cm9sLnByb3RvdHlwZS5kZWFjdGl2YXRlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sdW5zZWxlY3RBbGw6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5sYXllcnN8fFt0aGlzLmxheWVyXSxjLGQsZSxmO2ZvcihlPTA7ZTxiLmxlbmd0aDsrK2UpaWYoYz1iW2VdLGY9MCxudWxsIT1jLnNlbGVjdGVkRmVhdHVyZXMpZm9yKDtjLnNlbGVjdGVkRmVhdHVyZXMubGVuZ3RoPmY7KWQ9Yy5zZWxlY3RlZEZlYXR1cmVzW2ZdLGEmJmEuZXhjZXB0PT1kPysrZjp0aGlzLnVuc2VsZWN0KGQpfSxjbGlja0ZlYXR1cmU6ZnVuY3Rpb24oYSl7dGhpcy5ob3Zlcnx8KC0xPE9wZW5MYXllcnMuVXRpbC5pbmRleE9mKGEubGF5ZXIuc2VsZWN0ZWRGZWF0dXJlcywKYSk/dGhpcy50b2dnbGVTZWxlY3QoKT90aGlzLnVuc2VsZWN0KGEpOnRoaXMubXVsdGlwbGVTZWxlY3QoKXx8dGhpcy51bnNlbGVjdEFsbCh7ZXhjZXB0OmF9KToodGhpcy5tdWx0aXBsZVNlbGVjdCgpfHx0aGlzLnVuc2VsZWN0QWxsKHtleGNlcHQ6YX0pLHRoaXMuc2VsZWN0KGEpKSl9LG11bHRpcGxlU2VsZWN0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubXVsdGlwbGV8fHRoaXMuaGFuZGxlcnMuZmVhdHVyZS5ldnQmJnRoaXMuaGFuZGxlcnMuZmVhdHVyZS5ldnRbdGhpcy5tdWx0aXBsZUtleV19LHRvZ2dsZVNlbGVjdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnRvZ2dsZXx8dGhpcy5oYW5kbGVycy5mZWF0dXJlLmV2dCYmdGhpcy5oYW5kbGVycy5mZWF0dXJlLmV2dFt0aGlzLnRvZ2dsZUtleV19LGNsaWNrb3V0RmVhdHVyZTpmdW5jdGlvbihhKXshdGhpcy5ob3ZlciYmdGhpcy5jbGlja291dCYmdGhpcy51bnNlbGVjdEFsbCgpfSxvdmVyRmVhdHVyZTpmdW5jdGlvbihhKXt2YXIgYj0KYS5sYXllcjt0aGlzLmhvdmVyJiYodGhpcy5oaWdobGlnaHRPbmx5P3RoaXMuaGlnaGxpZ2h0KGEpOi0xPT1PcGVuTGF5ZXJzLlV0aWwuaW5kZXhPZihiLnNlbGVjdGVkRmVhdHVyZXMsYSkmJnRoaXMuc2VsZWN0KGEpKX0sb3V0RmVhdHVyZTpmdW5jdGlvbihhKXtpZih0aGlzLmhvdmVyKWlmKHRoaXMuaGlnaGxpZ2h0T25seSl7aWYoYS5fbGFzdEhpZ2hsaWdodGVyPT10aGlzLmlkKWlmKGEuX3ByZXZIaWdobGlnaHRlciYmYS5fcHJldkhpZ2hsaWdodGVyIT10aGlzLmlkKXtkZWxldGUgYS5fbGFzdEhpZ2hsaWdodGVyO3ZhciBiPXRoaXMubWFwLmdldENvbnRyb2woYS5fcHJldkhpZ2hsaWdodGVyKTtiJiZiLmhpZ2hsaWdodChhKX1lbHNlIHRoaXMudW5oaWdobGlnaHQoYSl9ZWxzZSB0aGlzLnVuc2VsZWN0KGEpfSxoaWdobGlnaHQ6ZnVuY3Rpb24oYSl7dmFyIGI9YS5sYXllcjshMSE9PXRoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgiYmVmb3JlZmVhdHVyZWhpZ2hsaWdodGVkIix7ZmVhdHVyZTphfSkmJgooYS5fcHJldkhpZ2hsaWdodGVyPWEuX2xhc3RIaWdobGlnaHRlcixhLl9sYXN0SGlnaGxpZ2h0ZXI9dGhpcy5pZCxiLmRyYXdGZWF0dXJlKGEsdGhpcy5zZWxlY3RTdHlsZXx8dGhpcy5yZW5kZXJJbnRlbnQpLHRoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgiZmVhdHVyZWhpZ2hsaWdodGVkIix7ZmVhdHVyZTphfSkpfSx1bmhpZ2hsaWdodDpmdW5jdGlvbihhKXt2YXIgYj1hLmxheWVyO3ZvaWQgMD09YS5fcHJldkhpZ2hsaWdodGVyP2RlbGV0ZSBhLl9sYXN0SGlnaGxpZ2h0ZXI6KGEuX3ByZXZIaWdobGlnaHRlciE9dGhpcy5pZCYmKGEuX2xhc3RIaWdobGlnaHRlcj1hLl9wcmV2SGlnaGxpZ2h0ZXIpLGRlbGV0ZSBhLl9wcmV2SGlnaGxpZ2h0ZXIpO2IuZHJhd0ZlYXR1cmUoYSxhLnN0eWxlfHxhLmxheWVyLnN0eWxlfHwiZGVmYXVsdCIpO3RoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgiZmVhdHVyZXVuaGlnaGxpZ2h0ZWQiLHtmZWF0dXJlOmF9KX0sc2VsZWN0OmZ1bmN0aW9uKGEpe3ZhciBiPQp0aGlzLm9uQmVmb3JlU2VsZWN0LmNhbGwodGhpcy5zY29wZSxhKSxjPWEubGF5ZXI7ITEhPT1iJiYoYj1jLmV2ZW50cy50cmlnZ2VyRXZlbnQoImJlZm9yZWZlYXR1cmVzZWxlY3RlZCIse2ZlYXR1cmU6YX0pLCExIT09YiYmKGMuc2VsZWN0ZWRGZWF0dXJlcy5wdXNoKGEpLHRoaXMuaGlnaGxpZ2h0KGEpLHRoaXMuaGFuZGxlcnMuZmVhdHVyZS5sYXN0RmVhdHVyZXx8KHRoaXMuaGFuZGxlcnMuZmVhdHVyZS5sYXN0RmVhdHVyZT1jLnNlbGVjdGVkRmVhdHVyZXNbMF0pLGMuZXZlbnRzLnRyaWdnZXJFdmVudCgiZmVhdHVyZXNlbGVjdGVkIix7ZmVhdHVyZTphfSksdGhpcy5vblNlbGVjdC5jYWxsKHRoaXMuc2NvcGUsYSkpKX0sdW5zZWxlY3Q6ZnVuY3Rpb24oYSl7dmFyIGI9YS5sYXllcjt0aGlzLnVuaGlnaGxpZ2h0KGEpO09wZW5MYXllcnMuVXRpbC5yZW1vdmVJdGVtKGIuc2VsZWN0ZWRGZWF0dXJlcyxhKTtiLmV2ZW50cy50cmlnZ2VyRXZlbnQoImZlYXR1cmV1bnNlbGVjdGVkIiwKe2ZlYXR1cmU6YX0pO3RoaXMub25VbnNlbGVjdC5jYWxsKHRoaXMuc2NvcGUsYSl9LHNlbGVjdEJveDpmdW5jdGlvbihhKXtpZihhIGluc3RhbmNlb2YgT3BlbkxheWVycy5Cb3VuZHMpe3ZhciBiPXRoaXMubWFwLmdldExvbkxhdEZyb21QaXhlbCh7eDphLmxlZnQseTphLmJvdHRvbX0pO2E9dGhpcy5tYXAuZ2V0TG9uTGF0RnJvbVBpeGVsKHt4OmEucmlnaHQseTphLnRvcH0pO2I9bmV3IE9wZW5MYXllcnMuQm91bmRzKGIubG9uLGIubGF0LGEubG9uLGEubGF0KTt0aGlzLm11bHRpcGxlU2VsZWN0KCl8fHRoaXMudW5zZWxlY3RBbGwoKTthPXRoaXMubXVsdGlwbGU7dGhpcy5tdWx0aXBsZT0hMDt2YXIgYz10aGlzLmxheWVyc3x8W3RoaXMubGF5ZXJdO3RoaXMuZXZlbnRzLnRyaWdnZXJFdmVudCgiYm94c2VsZWN0aW9uc3RhcnQiLHtsYXllcnM6Y30pO2Zvcih2YXIgZCxlPTA7ZTxjLmxlbmd0aDsrK2Upe2Q9Y1tlXTtmb3IodmFyIGY9MCxnPWQuZmVhdHVyZXMubGVuZ3RoO2Y8ZzsrK2Ype3ZhciBoPQpkLmZlYXR1cmVzW2ZdO2guZ2V0VmlzaWJpbGl0eSgpJiYobnVsbD09dGhpcy5nZW9tZXRyeVR5cGVzfHwtMTxPcGVuTGF5ZXJzLlV0aWwuaW5kZXhPZih0aGlzLmdlb21ldHJ5VHlwZXMsaC5nZW9tZXRyeS5DTEFTU19OQU1FKSkmJmIudG9HZW9tZXRyeSgpLmludGVyc2VjdHMoaC5nZW9tZXRyeSkmJi0xPT1PcGVuTGF5ZXJzLlV0aWwuaW5kZXhPZihkLnNlbGVjdGVkRmVhdHVyZXMsaCkmJnRoaXMuc2VsZWN0KGgpfX10aGlzLm11bHRpcGxlPWE7dGhpcy5ldmVudHMudHJpZ2dlckV2ZW50KCJib3hzZWxlY3Rpb25lbmQiLHtsYXllcnM6Y30pfX0sc2V0TWFwOmZ1bmN0aW9uKGEpe3RoaXMuaGFuZGxlcnMuZmVhdHVyZS5zZXRNYXAoYSk7dGhpcy5ib3gmJnRoaXMuaGFuZGxlcnMuYm94LnNldE1hcChhKTtPcGVuTGF5ZXJzLkNvbnRyb2wucHJvdG90eXBlLnNldE1hcC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LHNldExheWVyOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuYWN0aXZlO3RoaXMudW5zZWxlY3RBbGwoKTsKdGhpcy5kZWFjdGl2YXRlKCk7dGhpcy5sYXllcnMmJih0aGlzLmxheWVyLmRlc3Ryb3koKSx0aGlzLmxheWVycz1udWxsKTt0aGlzLmluaXRMYXllcihhKTt0aGlzLmhhbmRsZXJzLmZlYXR1cmUubGF5ZXI9dGhpcy5sYXllcjtiJiZ0aGlzLmFjdGl2YXRlKCl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuQ29udHJvbC5TZWxlY3RGZWF0dXJlIn0pO09wZW5MYXllcnMuQ29udHJvbC5BdHRyaWJ1dGlvbj1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuQ29udHJvbCx7c2VwYXJhdG9yOiIsICIsdGVtcGxhdGU6IiR7bGF5ZXJzfSIsZGVzdHJveTpmdW5jdGlvbigpe3RoaXMubWFwLmV2ZW50cy51bih7cmVtb3ZlbGF5ZXI6dGhpcy51cGRhdGVBdHRyaWJ1dGlvbixhZGRsYXllcjp0aGlzLnVwZGF0ZUF0dHJpYnV0aW9uLGNoYW5nZWxheWVyOnRoaXMudXBkYXRlQXR0cmlidXRpb24sY2hhbmdlYmFzZWxheWVyOnRoaXMudXBkYXRlQXR0cmlidXRpb24sc2NvcGU6dGhpc30pO09wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuZGVzdHJveS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGRyYXc6ZnVuY3Rpb24oKXtPcGVuTGF5ZXJzLkNvbnRyb2wucHJvdG90eXBlLmRyYXcuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMubWFwLmV2ZW50cy5vbih7Y2hhbmdlYmFzZWxheWVyOnRoaXMudXBkYXRlQXR0cmlidXRpb24sY2hhbmdlbGF5ZXI6dGhpcy51cGRhdGVBdHRyaWJ1dGlvbiwKYWRkbGF5ZXI6dGhpcy51cGRhdGVBdHRyaWJ1dGlvbixyZW1vdmVsYXllcjp0aGlzLnVwZGF0ZUF0dHJpYnV0aW9uLHNjb3BlOnRoaXN9KTt0aGlzLnVwZGF0ZUF0dHJpYnV0aW9uKCk7cmV0dXJuIHRoaXMuZGl2fSx1cGRhdGVBdHRyaWJ1dGlvbjpmdW5jdGlvbigpe3ZhciBhPVtdO2lmKHRoaXMubWFwJiZ0aGlzLm1hcC5sYXllcnMpe2Zvcih2YXIgYj0wLGM9dGhpcy5tYXAubGF5ZXJzLmxlbmd0aDtiPGM7YisrKXt2YXIgZD10aGlzLm1hcC5sYXllcnNbYl07ZC5hdHRyaWJ1dGlvbiYmZC5nZXRWaXNpYmlsaXR5KCkmJi0xPT09T3BlbkxheWVycy5VdGlsLmluZGV4T2YoYSxkLmF0dHJpYnV0aW9uKSYmYS5wdXNoKGQuYXR0cmlidXRpb24pfXRoaXMuZGl2LmlubmVySFRNTD1PcGVuTGF5ZXJzLlN0cmluZy5mb3JtYXQodGhpcy50ZW1wbGF0ZSx7bGF5ZXJzOmEuam9pbih0aGlzLnNlcGFyYXRvcil9KX19LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuQ29udHJvbC5BdHRyaWJ1dGlvbiJ9KTtPcGVuTGF5ZXJzLktpbmV0aWM9T3BlbkxheWVycy5DbGFzcyh7dGhyZXNob2xkOjAsZGVjZWxlcmF0aW9uOjAuMDAzNSxuYlBvaW50czoxMDAsZGVsYXk6MjAwLHBvaW50czp2b2lkIDAsdGltZXJJZDp2b2lkIDAsaW5pdGlhbGl6ZTpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHRoaXMsYSl9LGJlZ2luOmZ1bmN0aW9uKCl7T3BlbkxheWVycy5BbmltYXRpb24uc3RvcCh0aGlzLnRpbWVySWQpO3RoaXMudGltZXJJZD12b2lkIDA7dGhpcy5wb2ludHM9W119LHVwZGF0ZTpmdW5jdGlvbihhKXt0aGlzLnBvaW50cy51bnNoaWZ0KHt4eTphLHRpY2s6KG5ldyBEYXRlKS5nZXRUaW1lKCl9KTt0aGlzLnBvaW50cy5sZW5ndGg+dGhpcy5uYlBvaW50cyYmdGhpcy5wb2ludHMucG9wKCl9LGVuZDpmdW5jdGlvbihhKXtmb3IodmFyIGIsYz0obmV3IERhdGUpLmdldFRpbWUoKSxkPTAsZT10aGlzLnBvaW50cy5sZW5ndGgsZjtkPGU7ZCsrKXtmPXRoaXMucG9pbnRzW2RdO2lmKGMtCmYudGljaz50aGlzLmRlbGF5KWJyZWFrO2I9Zn1pZihiJiYoZD0obmV3IERhdGUpLmdldFRpbWUoKS1iLnRpY2ssYz1NYXRoLnNxcnQoTWF0aC5wb3coYS54LWIueHkueCwyKStNYXRoLnBvdyhhLnktYi54eS55LDIpKSxkPWMvZCwhKDA9PWR8fGQ8dGhpcy50aHJlc2hvbGQpKSlyZXR1cm4gYz1NYXRoLmFzaW4oKGEueS1iLnh5LnkpL2MpLGIueHkueDw9YS54JiYoYz1NYXRoLlBJLWMpLHtzcGVlZDpkLHRoZXRhOmN9fSxtb3ZlOmZ1bmN0aW9uKGEsYil7dmFyIGM9YS5zcGVlZCxkPU1hdGguY29zKGEudGhldGEpLGU9LU1hdGguc2luKGEudGhldGEpLGY9KG5ldyBEYXRlKS5nZXRUaW1lKCksZz0wLGg9MDt0aGlzLnRpbWVySWQ9T3BlbkxheWVycy5BbmltYXRpb24uc3RhcnQoT3BlbkxheWVycy5GdW5jdGlvbi5iaW5kKGZ1bmN0aW9uKCl7aWYobnVsbCE9dGhpcy50aW1lcklkKXt2YXIgYT0obmV3IERhdGUpLmdldFRpbWUoKS1mLGw9LXRoaXMuZGVjZWxlcmF0aW9uKk1hdGgucG93KGEsCjIpLzIrYyphLG09bCpkLGw9bCplLHIscDtyPSExOzA+PS10aGlzLmRlY2VsZXJhdGlvbiphK2MmJihPcGVuTGF5ZXJzLkFuaW1hdGlvbi5zdG9wKHRoaXMudGltZXJJZCksdGhpcy50aW1lcklkPW51bGwscj0hMCk7YT1tLWc7cD1sLWg7Zz1tO2g9bDtiKGEscCxyKX19LHRoaXMpKX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5LaW5ldGljIn0pO09wZW5MYXllcnMuRmlsdGVyLkxvZ2ljYWw9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkZpbHRlcix7ZmlsdGVyczpudWxsLHR5cGU6bnVsbCxpbml0aWFsaXplOmZ1bmN0aW9uKGEpe3RoaXMuZmlsdGVycz1bXTtPcGVuTGF5ZXJzLkZpbHRlci5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLFthXSl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmZpbHRlcnM9bnVsbDtPcGVuTGF5ZXJzLkZpbHRlci5wcm90b3R5cGUuZGVzdHJveS5hcHBseSh0aGlzKX0sZXZhbHVhdGU6ZnVuY3Rpb24oYSl7dmFyIGIsYztzd2l0Y2godGhpcy50eXBlKXtjYXNlIE9wZW5MYXllcnMuRmlsdGVyLkxvZ2ljYWwuQU5EOmI9MDtmb3IoYz10aGlzLmZpbHRlcnMubGVuZ3RoO2I8YztiKyspaWYoITE9PXRoaXMuZmlsdGVyc1tiXS5ldmFsdWF0ZShhKSlyZXR1cm4hMTtyZXR1cm4hMDtjYXNlIE9wZW5MYXllcnMuRmlsdGVyLkxvZ2ljYWwuT1I6Yj0wO2ZvcihjPXRoaXMuZmlsdGVycy5sZW5ndGg7YjwKYztiKyspaWYoITA9PXRoaXMuZmlsdGVyc1tiXS5ldmFsdWF0ZShhKSlyZXR1cm4hMDtyZXR1cm4hMTtjYXNlIE9wZW5MYXllcnMuRmlsdGVyLkxvZ2ljYWwuTk9UOnJldHVybiF0aGlzLmZpbHRlcnNbMF0uZXZhbHVhdGUoYSl9fSxjbG9uZTpmdW5jdGlvbigpe2Zvcih2YXIgYT1bXSxiPTAsYz10aGlzLmZpbHRlcnMubGVuZ3RoO2I8YzsrK2IpYS5wdXNoKHRoaXMuZmlsdGVyc1tiXS5jbG9uZSgpKTtyZXR1cm4gbmV3IE9wZW5MYXllcnMuRmlsdGVyLkxvZ2ljYWwoe3R5cGU6dGhpcy50eXBlLGZpbHRlcnM6YX0pfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkZpbHRlci5Mb2dpY2FsIn0pO09wZW5MYXllcnMuRmlsdGVyLkxvZ2ljYWwuQU5EPSImJiI7T3BlbkxheWVycy5GaWx0ZXIuTG9naWNhbC5PUj0ifHwiO09wZW5MYXllcnMuRmlsdGVyLkxvZ2ljYWwuTk9UPSIhIjtPcGVuTGF5ZXJzLkhhbmRsZXIuRHJhZz1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuSGFuZGxlcix7c3RhcnRlZDohMSxzdG9wRG93bjohMCxkcmFnZ2luZzohMSxsYXN0Om51bGwsc3RhcnQ6bnVsbCxsYXN0TW92ZUV2dDpudWxsLG9sZE9uc2VsZWN0c3RhcnQ6bnVsbCxpbnRlcnZhbDowLHRpbWVvdXRJZDpudWxsLGRvY3VtZW50RHJhZzohMSxkb2N1bWVudEV2ZW50czpudWxsLGluaXRpYWxpemU6ZnVuY3Rpb24oYSxiLGMpe09wZW5MYXllcnMuSGFuZGxlci5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7aWYoITA9PT10aGlzLmRvY3VtZW50RHJhZyl7dmFyIGQ9dGhpczt0aGlzLl9kb2NNb3ZlPWZ1bmN0aW9uKGEpe2QubW91c2Vtb3ZlKHt4eTp7eDphLmNsaWVudFgseTphLmNsaWVudFl9LGVsZW1lbnQ6ZG9jdW1lbnR9KX07dGhpcy5fZG9jVXA9ZnVuY3Rpb24oYSl7ZC5tb3VzZXVwKHt4eTp7eDphLmNsaWVudFgseTphLmNsaWVudFl9fSl9fX0sCmRyYWdzdGFydDpmdW5jdGlvbihhKXt2YXIgYj0hMDt0aGlzLmRyYWdnaW5nPSExO3RoaXMuY2hlY2tNb2RpZmllcnMoYSkmJihPcGVuTGF5ZXJzLkV2ZW50LmlzTGVmdENsaWNrKGEpfHxPcGVuTGF5ZXJzLkV2ZW50LmlzU2luZ2xlVG91Y2goYSkpPyh0aGlzLnN0YXJ0ZWQ9ITAsdGhpcy5sYXN0PXRoaXMuc3RhcnQ9YS54eSxPcGVuTGF5ZXJzLkVsZW1lbnQuYWRkQ2xhc3ModGhpcy5tYXAudmlld1BvcnREaXYsIm9sRHJhZ0Rvd24iKSx0aGlzLmRvd24oYSksdGhpcy5jYWxsYmFjaygiZG93biIsW2EueHldKSxPcGVuTGF5ZXJzLkV2ZW50LnByZXZlbnREZWZhdWx0KGEpLHRoaXMub2xkT25zZWxlY3RzdGFydHx8KHRoaXMub2xkT25zZWxlY3RzdGFydD1kb2N1bWVudC5vbnNlbGVjdHN0YXJ0P2RvY3VtZW50Lm9uc2VsZWN0c3RhcnQ6T3BlbkxheWVycy5GdW5jdGlvbi5UcnVlKSxkb2N1bWVudC5vbnNlbGVjdHN0YXJ0PU9wZW5MYXllcnMuRnVuY3Rpb24uRmFsc2UsYj0hdGhpcy5zdG9wRG93bik6Cih0aGlzLnN0YXJ0ZWQ9ITEsdGhpcy5sYXN0PXRoaXMuc3RhcnQ9bnVsbCk7cmV0dXJuIGJ9LGRyYWdtb3ZlOmZ1bmN0aW9uKGEpe3RoaXMubGFzdE1vdmVFdnQ9YTshdGhpcy5zdGFydGVkfHwodGhpcy50aW1lb3V0SWR8fGEueHkueD09dGhpcy5sYXN0LngmJmEueHkueT09dGhpcy5sYXN0LnkpfHwoITA9PT10aGlzLmRvY3VtZW50RHJhZyYmdGhpcy5kb2N1bWVudEV2ZW50cyYmKGEuZWxlbWVudD09PWRvY3VtZW50Pyh0aGlzLmFkanVzdFhZKGEpLHRoaXMuc2V0RXZlbnQoYSkpOnRoaXMucmVtb3ZlRG9jdW1lbnRFdmVudHMoKSksMDx0aGlzLmludGVydmFsJiYodGhpcy50aW1lb3V0SWQ9c2V0VGltZW91dChPcGVuTGF5ZXJzLkZ1bmN0aW9uLmJpbmQodGhpcy5yZW1vdmVUaW1lb3V0LHRoaXMpLHRoaXMuaW50ZXJ2YWwpKSx0aGlzLmRyYWdnaW5nPSEwLHRoaXMubW92ZShhKSx0aGlzLmNhbGxiYWNrKCJtb3ZlIixbYS54eV0pLHRoaXMub2xkT25zZWxlY3RzdGFydHx8KHRoaXMub2xkT25zZWxlY3RzdGFydD0KZG9jdW1lbnQub25zZWxlY3RzdGFydCxkb2N1bWVudC5vbnNlbGVjdHN0YXJ0PU9wZW5MYXllcnMuRnVuY3Rpb24uRmFsc2UpLHRoaXMubGFzdD1hLnh5KTtyZXR1cm4hMH0sZHJhZ2VuZDpmdW5jdGlvbihhKXtpZih0aGlzLnN0YXJ0ZWQpeyEwPT09dGhpcy5kb2N1bWVudERyYWcmJnRoaXMuZG9jdW1lbnRFdmVudHMmJih0aGlzLmFkanVzdFhZKGEpLHRoaXMucmVtb3ZlRG9jdW1lbnRFdmVudHMoKSk7dmFyIGI9dGhpcy5zdGFydCE9dGhpcy5sYXN0O3RoaXMuZHJhZ2dpbmc9dGhpcy5zdGFydGVkPSExO09wZW5MYXllcnMuRWxlbWVudC5yZW1vdmVDbGFzcyh0aGlzLm1hcC52aWV3UG9ydERpdiwib2xEcmFnRG93biIpO3RoaXMudXAoYSk7dGhpcy5jYWxsYmFjaygidXAiLFthLnh5XSk7YiYmdGhpcy5jYWxsYmFjaygiZG9uZSIsW2EueHldKTtkb2N1bWVudC5vbnNlbGVjdHN0YXJ0PXRoaXMub2xkT25zZWxlY3RzdGFydH1yZXR1cm4hMH0sZG93bjpmdW5jdGlvbihhKXt9LG1vdmU6ZnVuY3Rpb24oYSl7fSwKdXA6ZnVuY3Rpb24oYSl7fSxvdXQ6ZnVuY3Rpb24oYSl7fSxtb3VzZWRvd246ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZHJhZ3N0YXJ0KGEpfSx0b3VjaHN0YXJ0OmZ1bmN0aW9uKGEpe3RoaXMuc3RhcnRUb3VjaCgpO3JldHVybiB0aGlzLmRyYWdzdGFydChhKX0sbW91c2Vtb3ZlOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmRyYWdtb3ZlKGEpfSx0b3VjaG1vdmU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZHJhZ21vdmUoYSl9LHJlbW92ZVRpbWVvdXQ6ZnVuY3Rpb24oKXt0aGlzLnRpbWVvdXRJZD1udWxsO3RoaXMuZHJhZ2dpbmcmJnRoaXMubW91c2Vtb3ZlKHRoaXMubGFzdE1vdmVFdnQpfSxtb3VzZXVwOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmRyYWdlbmQoYSl9LHRvdWNoZW5kOmZ1bmN0aW9uKGEpe2EueHk9dGhpcy5sYXN0O3JldHVybiB0aGlzLmRyYWdlbmQoYSl9LG1vdXNlb3V0OmZ1bmN0aW9uKGEpe2lmKHRoaXMuc3RhcnRlZCYmT3BlbkxheWVycy5VdGlsLm1vdXNlTGVmdChhLAp0aGlzLm1hcC52aWV3UG9ydERpdikpaWYoITA9PT10aGlzLmRvY3VtZW50RHJhZyl0aGlzLmFkZERvY3VtZW50RXZlbnRzKCk7ZWxzZXt2YXIgYj10aGlzLnN0YXJ0IT10aGlzLmxhc3Q7dGhpcy5kcmFnZ2luZz10aGlzLnN0YXJ0ZWQ9ITE7T3BlbkxheWVycy5FbGVtZW50LnJlbW92ZUNsYXNzKHRoaXMubWFwLnZpZXdQb3J0RGl2LCJvbERyYWdEb3duIik7dGhpcy5vdXQoYSk7dGhpcy5jYWxsYmFjaygib3V0IixbXSk7YiYmdGhpcy5jYWxsYmFjaygiZG9uZSIsW2EueHldKTtkb2N1bWVudC5vbnNlbGVjdHN0YXJ0JiYoZG9jdW1lbnQub25zZWxlY3RzdGFydD10aGlzLm9sZE9uc2VsZWN0c3RhcnQpfXJldHVybiEwfSxjbGljazpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5zdGFydD09dGhpcy5sYXN0fSxhY3RpdmF0ZTpmdW5jdGlvbigpe3ZhciBhPSExO09wZW5MYXllcnMuSGFuZGxlci5wcm90b3R5cGUuYWN0aXZhdGUuYXBwbHkodGhpcyxhcmd1bWVudHMpJiYodGhpcy5kcmFnZ2luZz0KITEsYT0hMCk7cmV0dXJuIGF9LGRlYWN0aXZhdGU6ZnVuY3Rpb24oKXt2YXIgYT0hMTtPcGVuTGF5ZXJzLkhhbmRsZXIucHJvdG90eXBlLmRlYWN0aXZhdGUuYXBwbHkodGhpcyxhcmd1bWVudHMpJiYodGhpcy5kcmFnZ2luZz10aGlzLnN0YXJ0ZWQ9ITEsdGhpcy5sYXN0PXRoaXMuc3RhcnQ9bnVsbCxhPSEwLE9wZW5MYXllcnMuRWxlbWVudC5yZW1vdmVDbGFzcyh0aGlzLm1hcC52aWV3UG9ydERpdiwib2xEcmFnRG93biIpKTtyZXR1cm4gYX0sYWRqdXN0WFk6ZnVuY3Rpb24oYSl7dmFyIGI9T3BlbkxheWVycy5VdGlsLnBhZ2VQb3NpdGlvbih0aGlzLm1hcC52aWV3UG9ydERpdik7YS54eS54LT1iWzBdO2EueHkueS09YlsxXX0sYWRkRG9jdW1lbnRFdmVudHM6ZnVuY3Rpb24oKXtPcGVuTGF5ZXJzLkVsZW1lbnQuYWRkQ2xhc3MoZG9jdW1lbnQuYm9keSwib2xEcmFnRG93biIpO3RoaXMuZG9jdW1lbnRFdmVudHM9ITA7T3BlbkxheWVycy5FdmVudC5vYnNlcnZlKGRvY3VtZW50LCJtb3VzZW1vdmUiLAp0aGlzLl9kb2NNb3ZlKTtPcGVuTGF5ZXJzLkV2ZW50Lm9ic2VydmUoZG9jdW1lbnQsIm1vdXNldXAiLHRoaXMuX2RvY1VwKX0scmVtb3ZlRG9jdW1lbnRFdmVudHM6ZnVuY3Rpb24oKXtPcGVuTGF5ZXJzLkVsZW1lbnQucmVtb3ZlQ2xhc3MoZG9jdW1lbnQuYm9keSwib2xEcmFnRG93biIpO3RoaXMuZG9jdW1lbnRFdmVudHM9ITE7T3BlbkxheWVycy5FdmVudC5zdG9wT2JzZXJ2aW5nKGRvY3VtZW50LCJtb3VzZW1vdmUiLHRoaXMuX2RvY01vdmUpO09wZW5MYXllcnMuRXZlbnQuc3RvcE9ic2VydmluZyhkb2N1bWVudCwibW91c2V1cCIsdGhpcy5fZG9jVXApfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkhhbmRsZXIuRHJhZyJ9KTtPcGVuTGF5ZXJzLkhhbmRsZXIuQm94PU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5IYW5kbGVyLHtkcmFnSGFuZGxlcjpudWxsLGJveERpdkNsYXNzTmFtZToib2xIYW5kbGVyQm94Wm9vbUJveCIsYm94T2Zmc2V0czpudWxsLGluaXRpYWxpemU6ZnVuY3Rpb24oYSxiLGMpe09wZW5MYXllcnMuSGFuZGxlci5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5kcmFnSGFuZGxlcj1uZXcgT3BlbkxheWVycy5IYW5kbGVyLkRyYWcodGhpcyx7ZG93bjp0aGlzLnN0YXJ0Qm94LG1vdmU6dGhpcy5tb3ZlQm94LG91dDp0aGlzLnJlbW92ZUJveCx1cDp0aGlzLmVuZEJveH0se2tleU1hc2s6dGhpcy5rZXlNYXNrfSl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXtPcGVuTGF5ZXJzLkhhbmRsZXIucHJvdG90eXBlLmRlc3Ryb3kuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMuZHJhZ0hhbmRsZXImJih0aGlzLmRyYWdIYW5kbGVyLmRlc3Ryb3koKSx0aGlzLmRyYWdIYW5kbGVyPQpudWxsKX0sc2V0TWFwOmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuSGFuZGxlci5wcm90b3R5cGUuc2V0TWFwLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLmRyYWdIYW5kbGVyJiZ0aGlzLmRyYWdIYW5kbGVyLnNldE1hcChhKX0sc3RhcnRCb3g6ZnVuY3Rpb24oYSl7dGhpcy5jYWxsYmFjaygic3RhcnQiLFtdKTt0aGlzLnpvb21Cb3g9T3BlbkxheWVycy5VdGlsLmNyZWF0ZURpdigiem9vbUJveCIse3g6LTk5OTkseTotOTk5OX0pO3RoaXMuem9vbUJveC5jbGFzc05hbWU9dGhpcy5ib3hEaXZDbGFzc05hbWU7dGhpcy56b29tQm94LnN0eWxlLnpJbmRleD10aGlzLm1hcC5aX0lOREVYX0JBU0UuUG9wdXAtMTt0aGlzLm1hcC52aWV3UG9ydERpdi5hcHBlbmRDaGlsZCh0aGlzLnpvb21Cb3gpO09wZW5MYXllcnMuRWxlbWVudC5hZGRDbGFzcyh0aGlzLm1hcC52aWV3UG9ydERpdiwib2xEcmF3Qm94Iil9LG1vdmVCb3g6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5kcmFnSGFuZGxlci5zdGFydC54LApjPXRoaXMuZHJhZ0hhbmRsZXIuc3RhcnQueSxkPU1hdGguYWJzKGItYS54KSxlPU1hdGguYWJzKGMtYS55KSxmPXRoaXMuZ2V0Qm94T2Zmc2V0cygpO3RoaXMuem9vbUJveC5zdHlsZS53aWR0aD1kK2Yud2lkdGgrMSsicHgiO3RoaXMuem9vbUJveC5zdHlsZS5oZWlnaHQ9ZStmLmhlaWdodCsxKyJweCI7dGhpcy56b29tQm94LnN0eWxlLmxlZnQ9KGEueDxiP2ItZC1mLmxlZnQ6Yi1mLmxlZnQpKyJweCI7dGhpcy56b29tQm94LnN0eWxlLnRvcD0oYS55PGM/Yy1lLWYudG9wOmMtZi50b3ApKyJweCJ9LGVuZEJveDpmdW5jdGlvbihhKXt2YXIgYjtpZig1PE1hdGguYWJzKHRoaXMuZHJhZ0hhbmRsZXIuc3RhcnQueC1hLngpfHw1PE1hdGguYWJzKHRoaXMuZHJhZ0hhbmRsZXIuc3RhcnQueS1hLnkpKXt2YXIgYz10aGlzLmRyYWdIYW5kbGVyLnN0YXJ0O2I9TWF0aC5taW4oYy55LGEueSk7dmFyIGQ9TWF0aC5tYXgoYy55LGEueSksZT1NYXRoLm1pbihjLngsYS54KTthPU1hdGgubWF4KGMueCwKYS54KTtiPW5ldyBPcGVuTGF5ZXJzLkJvdW5kcyhlLGQsYSxiKX1lbHNlIGI9dGhpcy5kcmFnSGFuZGxlci5zdGFydC5jbG9uZSgpO3RoaXMucmVtb3ZlQm94KCk7dGhpcy5jYWxsYmFjaygiZG9uZSIsW2JdKX0scmVtb3ZlQm94OmZ1bmN0aW9uKCl7dGhpcy5tYXAudmlld1BvcnREaXYucmVtb3ZlQ2hpbGQodGhpcy56b29tQm94KTt0aGlzLmJveE9mZnNldHM9dGhpcy56b29tQm94PW51bGw7T3BlbkxheWVycy5FbGVtZW50LnJlbW92ZUNsYXNzKHRoaXMubWFwLnZpZXdQb3J0RGl2LCJvbERyYXdCb3giKX0sYWN0aXZhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gT3BlbkxheWVycy5IYW5kbGVyLnByb3RvdHlwZS5hY3RpdmF0ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk/KHRoaXMuZHJhZ0hhbmRsZXIuYWN0aXZhdGUoKSwhMCk6ITF9LGRlYWN0aXZhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gT3BlbkxheWVycy5IYW5kbGVyLnByb3RvdHlwZS5kZWFjdGl2YXRlLmFwcGx5KHRoaXMsYXJndW1lbnRzKT8KKHRoaXMuZHJhZ0hhbmRsZXIuZGVhY3RpdmF0ZSgpJiZ0aGlzLnpvb21Cb3gmJnRoaXMucmVtb3ZlQm94KCksITApOiExfSxnZXRCb3hPZmZzZXRzOmZ1bmN0aW9uKCl7aWYoIXRoaXMuYm94T2Zmc2V0cyl7dmFyIGE9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7YS5zdHlsZS5wb3NpdGlvbj0iYWJzb2x1dGUiO2Euc3R5bGUuYm9yZGVyPSIxcHggc29saWQgYmxhY2siO2Euc3R5bGUud2lkdGg9IjNweCI7ZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChhKTt2YXIgYj0zPT1hLmNsaWVudFdpZHRoO2RvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoYSk7dmFyIGE9cGFyc2VJbnQoT3BlbkxheWVycy5FbGVtZW50LmdldFN0eWxlKHRoaXMuem9vbUJveCwiYm9yZGVyLWxlZnQtd2lkdGgiKSksYz1wYXJzZUludChPcGVuTGF5ZXJzLkVsZW1lbnQuZ2V0U3R5bGUodGhpcy56b29tQm94LCJib3JkZXItcmlnaHQtd2lkdGgiKSksZD1wYXJzZUludChPcGVuTGF5ZXJzLkVsZW1lbnQuZ2V0U3R5bGUodGhpcy56b29tQm94LAoiYm9yZGVyLXRvcC13aWR0aCIpKSxlPXBhcnNlSW50KE9wZW5MYXllcnMuRWxlbWVudC5nZXRTdHlsZSh0aGlzLnpvb21Cb3gsImJvcmRlci1ib3R0b20td2lkdGgiKSk7dGhpcy5ib3hPZmZzZXRzPXtsZWZ0OmEscmlnaHQ6Yyx0b3A6ZCxib3R0b206ZSx3aWR0aDohMT09PWI/YStjOjAsaGVpZ2h0OiExPT09Yj9kK2U6MH19cmV0dXJuIHRoaXMuYm94T2Zmc2V0c30sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5IYW5kbGVyLkJveCJ9KTtPcGVuTGF5ZXJzLkNvbnRyb2wuWm9vbUJveD1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuQ29udHJvbCx7dHlwZTpPcGVuTGF5ZXJzLkNvbnRyb2wuVFlQRV9UT09MLG91dDohMSxrZXlNYXNrOm51bGwsYWx3YXlzWm9vbTohMSx6b29tT25DbGljazohMCxkcmF3OmZ1bmN0aW9uKCl7dGhpcy5oYW5kbGVyPW5ldyBPcGVuTGF5ZXJzLkhhbmRsZXIuQm94KHRoaXMse2RvbmU6dGhpcy56b29tQm94fSx7a2V5TWFzazp0aGlzLmtleU1hc2t9KX0sem9vbUJveDpmdW5jdGlvbihhKXtpZihhIGluc3RhbmNlb2YgT3BlbkxheWVycy5Cb3VuZHMpe3ZhciBiLGM9YS5nZXRDZW50ZXJQaXhlbCgpO2lmKHRoaXMub3V0KXtiPU1hdGgubWluKHRoaXMubWFwLnNpemUuaC8oYS5ib3R0b20tYS50b3ApLHRoaXMubWFwLnNpemUudy8oYS5yaWdodC1hLmxlZnQpKTt2YXIgZD10aGlzLm1hcC5nZXRFeHRlbnQoKSxlPXRoaXMubWFwLmdldExvbkxhdEZyb21QaXhlbChjKSxmPWUubG9uLWQuZ2V0V2lkdGgoKS8KMipiO2E9ZS5sb24rZC5nZXRXaWR0aCgpLzIqYjt2YXIgZz1lLmxhdC1kLmdldEhlaWdodCgpLzIqYjtiPWUubGF0K2QuZ2V0SGVpZ2h0KCkvMipiO2I9bmV3IE9wZW5MYXllcnMuQm91bmRzKGYsZyxhLGIpfWVsc2UgZj10aGlzLm1hcC5nZXRMb25MYXRGcm9tUGl4ZWwoe3g6YS5sZWZ0LHk6YS5ib3R0b219KSxhPXRoaXMubWFwLmdldExvbkxhdEZyb21QaXhlbCh7eDphLnJpZ2h0LHk6YS50b3B9KSxiPW5ldyBPcGVuTGF5ZXJzLkJvdW5kcyhmLmxvbixmLmxhdCxhLmxvbixhLmxhdCk7Zj10aGlzLm1hcC5nZXRab29tKCk7Zz10aGlzLm1hcC5nZXRTaXplKCk7YT1nLncvMjtnPWcuaC8yO2I9dGhpcy5tYXAuZ2V0Wm9vbUZvckV4dGVudChiKTtkPXRoaXMubWFwLmdldFJlc29sdXRpb24oKTtlPXRoaXMubWFwLmdldFJlc29sdXRpb25Gb3Jab29tKGIpO2Q9PWU/dGhpcy5tYXAuc2V0Q2VudGVyKHRoaXMubWFwLmdldExvbkxhdEZyb21QaXhlbChjKSk6dGhpcy5tYXAuem9vbVRvKGIsCnt4OihkKmMueC1lKmEpLyhkLWUpLHk6KGQqYy55LWUqZykvKGQtZSl9KTtmPT10aGlzLm1hcC5nZXRab29tKCkmJiEwPT10aGlzLmFsd2F5c1pvb20mJnRoaXMubWFwLnpvb21UbyhmKyh0aGlzLm91dD8tMToxKSl9ZWxzZSB0aGlzLnpvb21PbkNsaWNrJiYodGhpcy5vdXQ/dGhpcy5tYXAuem9vbVRvKHRoaXMubWFwLmdldFpvb20oKS0xLGEpOnRoaXMubWFwLnpvb21Ubyh0aGlzLm1hcC5nZXRab29tKCkrMSxhKSl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuQ29udHJvbC5ab29tQm94In0pO09wZW5MYXllcnMuQ29udHJvbC5EcmFnUGFuPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Db250cm9sLHt0eXBlOk9wZW5MYXllcnMuQ29udHJvbC5UWVBFX1RPT0wscGFubmVkOiExLGludGVydmFsOjAsZG9jdW1lbnREcmFnOiExLGtpbmV0aWM6bnVsbCxlbmFibGVLaW5ldGljOiEwLGtpbmV0aWNJbnRlcnZhbDoxMCxkcmF3OmZ1bmN0aW9uKCl7aWYodGhpcy5lbmFibGVLaW5ldGljJiZPcGVuTGF5ZXJzLktpbmV0aWMpe3ZhciBhPXtpbnRlcnZhbDp0aGlzLmtpbmV0aWNJbnRlcnZhbH07Im9iamVjdCI9PT10eXBlb2YgdGhpcy5lbmFibGVLaW5ldGljJiYoYT1PcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKGEsdGhpcy5lbmFibGVLaW5ldGljKSk7dGhpcy5raW5ldGljPW5ldyBPcGVuTGF5ZXJzLktpbmV0aWMoYSl9dGhpcy5oYW5kbGVyPW5ldyBPcGVuTGF5ZXJzLkhhbmRsZXIuRHJhZyh0aGlzLHttb3ZlOnRoaXMucGFuTWFwLGRvbmU6dGhpcy5wYW5NYXBEb25lLGRvd246dGhpcy5wYW5NYXBTdGFydH0sCntpbnRlcnZhbDp0aGlzLmludGVydmFsLGRvY3VtZW50RHJhZzp0aGlzLmRvY3VtZW50RHJhZ30pfSxwYW5NYXBTdGFydDpmdW5jdGlvbigpe3RoaXMua2luZXRpYyYmdGhpcy5raW5ldGljLmJlZ2luKCl9LHBhbk1hcDpmdW5jdGlvbihhKXt0aGlzLmtpbmV0aWMmJnRoaXMua2luZXRpYy51cGRhdGUoYSk7dGhpcy5wYW5uZWQ9ITA7dGhpcy5tYXAucGFuKHRoaXMuaGFuZGxlci5sYXN0LngtYS54LHRoaXMuaGFuZGxlci5sYXN0LnktYS55LHtkcmFnZ2luZzohMCxhbmltYXRlOiExfSl9LHBhbk1hcERvbmU6ZnVuY3Rpb24oYSl7aWYodGhpcy5wYW5uZWQpe3ZhciBiPW51bGw7dGhpcy5raW5ldGljJiYoYj10aGlzLmtpbmV0aWMuZW5kKGEpKTt0aGlzLm1hcC5wYW4odGhpcy5oYW5kbGVyLmxhc3QueC1hLngsdGhpcy5oYW5kbGVyLmxhc3QueS1hLnkse2RyYWdnaW5nOiEhYixhbmltYXRlOiExfSk7aWYoYil7dmFyIGM9dGhpczt0aGlzLmtpbmV0aWMubW92ZShiLGZ1bmN0aW9uKGEsYiwKZil7Yy5tYXAucGFuKGEsYix7ZHJhZ2dpbmc6IWYsYW5pbWF0ZTohMX0pfSl9dGhpcy5wYW5uZWQ9ITF9fSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkNvbnRyb2wuRHJhZ1BhbiJ9KTtPcGVuTGF5ZXJzLkhhbmRsZXIuQ2xpY2s9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkhhbmRsZXIse2RlbGF5OjMwMCxzaW5nbGU6ITAsImRvdWJsZSI6ITEscGl4ZWxUb2xlcmFuY2U6MCxkYmxjbGlja1RvbGVyYW5jZToxMyxzdG9wU2luZ2xlOiExLHN0b3BEb3VibGU6ITEsdGltZXJJZDpudWxsLGRvd246bnVsbCxsYXN0Om51bGwsZmlyc3Q6bnVsbCxyaWdodGNsaWNrVGltZXJJZDpudWxsLHRvdWNoc3RhcnQ6ZnVuY3Rpb24oYSl7dGhpcy5zdGFydFRvdWNoKCk7dGhpcy5kb3duPXRoaXMuZ2V0RXZlbnRJbmZvKGEpO3RoaXMubGFzdD10aGlzLmdldEV2ZW50SW5mbyhhKTtyZXR1cm4hMH0sdG91Y2htb3ZlOmZ1bmN0aW9uKGEpe3RoaXMubGFzdD10aGlzLmdldEV2ZW50SW5mbyhhKTtyZXR1cm4hMH0sdG91Y2hlbmQ6ZnVuY3Rpb24oYSl7dGhpcy5kb3duJiYoYS54eT10aGlzLmxhc3QueHksYS5sYXN0VG91Y2hlcz10aGlzLmxhc3QudG91Y2hlcyx0aGlzLmhhbmRsZVNpbmdsZShhKSwKdGhpcy5kb3duPW51bGwpO3JldHVybiEwfSxtb3VzZWRvd246ZnVuY3Rpb24oYSl7dGhpcy5kb3duPXRoaXMuZ2V0RXZlbnRJbmZvKGEpO3RoaXMubGFzdD10aGlzLmdldEV2ZW50SW5mbyhhKTtyZXR1cm4hMH0sbW91c2V1cDpmdW5jdGlvbihhKXt2YXIgYj0hMDt0aGlzLmNoZWNrTW9kaWZpZXJzKGEpJiYodGhpcy5jb250cm9sLmhhbmRsZVJpZ2h0Q2xpY2tzJiZPcGVuTGF5ZXJzLkV2ZW50LmlzUmlnaHRDbGljayhhKSkmJihiPXRoaXMucmlnaHRjbGljayhhKSk7cmV0dXJuIGJ9LHJpZ2h0Y2xpY2s6ZnVuY3Rpb24oYSl7aWYodGhpcy5wYXNzZXNUb2xlcmFuY2UoYSkpe2lmKG51bGwhPXRoaXMucmlnaHRjbGlja1RpbWVySWQpcmV0dXJuIHRoaXMuY2xlYXJUaW1lcigpLHRoaXMuY2FsbGJhY2soImRibHJpZ2h0Y2xpY2siLFthXSksIXRoaXMuc3RvcERvdWJsZTthPXRoaXNbImRvdWJsZSJdP09wZW5MYXllcnMuVXRpbC5leHRlbmQoe30sYSk6dGhpcy5jYWxsYmFjaygicmlnaHRjbGljayIsClthXSk7YT1PcGVuTGF5ZXJzLkZ1bmN0aW9uLmJpbmQodGhpcy5kZWxheWVkUmlnaHRDYWxsLHRoaXMsYSk7dGhpcy5yaWdodGNsaWNrVGltZXJJZD13aW5kb3cuc2V0VGltZW91dChhLHRoaXMuZGVsYXkpfXJldHVybiF0aGlzLnN0b3BTaW5nbGV9LGRlbGF5ZWRSaWdodENhbGw6ZnVuY3Rpb24oYSl7dGhpcy5yaWdodGNsaWNrVGltZXJJZD1udWxsO2EmJnRoaXMuY2FsbGJhY2soInJpZ2h0Y2xpY2siLFthXSl9LGNsaWNrOmZ1bmN0aW9uKGEpe3RoaXMubGFzdHx8KHRoaXMubGFzdD10aGlzLmdldEV2ZW50SW5mbyhhKSk7dGhpcy5oYW5kbGVTaW5nbGUoYSk7cmV0dXJuIXRoaXMuc3RvcFNpbmdsZX0sZGJsY2xpY2s6ZnVuY3Rpb24oYSl7dGhpcy5oYW5kbGVEb3VibGUoYSk7cmV0dXJuIXRoaXMuc3RvcERvdWJsZX0saGFuZGxlRG91YmxlOmZ1bmN0aW9uKGEpe3RoaXMucGFzc2VzRGJsY2xpY2tUb2xlcmFuY2UoYSkmJih0aGlzWyJkb3VibGUiXSYmdGhpcy5jYWxsYmFjaygiZGJsY2xpY2siLApbYV0pLHRoaXMuY2xlYXJUaW1lcigpKX0saGFuZGxlU2luZ2xlOmZ1bmN0aW9uKGEpe3RoaXMucGFzc2VzVG9sZXJhbmNlKGEpJiYobnVsbCE9dGhpcy50aW1lcklkPyh0aGlzLmxhc3QudG91Y2hlcyYmMT09PXRoaXMubGFzdC50b3VjaGVzLmxlbmd0aCYmKHRoaXNbImRvdWJsZSJdJiZPcGVuTGF5ZXJzLkV2ZW50LnByZXZlbnREZWZhdWx0KGEpLHRoaXMuaGFuZGxlRG91YmxlKGEpKSx0aGlzLmxhc3QudG91Y2hlcyYmMj09PXRoaXMubGFzdC50b3VjaGVzLmxlbmd0aHx8dGhpcy5jbGVhclRpbWVyKCkpOih0aGlzLmZpcnN0PXRoaXMuZ2V0RXZlbnRJbmZvKGEpLGE9dGhpcy5zaW5nbGU/T3BlbkxheWVycy5VdGlsLmV4dGVuZCh7fSxhKTpudWxsLHRoaXMucXVldWVQb3RlbnRpYWxDbGljayhhKSkpfSxxdWV1ZVBvdGVudGlhbENsaWNrOmZ1bmN0aW9uKGEpe3RoaXMudGltZXJJZD13aW5kb3cuc2V0VGltZW91dChPcGVuTGF5ZXJzLkZ1bmN0aW9uLmJpbmQodGhpcy5kZWxheWVkQ2FsbCwKdGhpcyxhKSx0aGlzLmRlbGF5KX0scGFzc2VzVG9sZXJhbmNlOmZ1bmN0aW9uKGEpe3ZhciBiPSEwO2lmKG51bGwhPXRoaXMucGl4ZWxUb2xlcmFuY2UmJnRoaXMuZG93biYmdGhpcy5kb3duLnh5JiYoYj10aGlzLnBpeGVsVG9sZXJhbmNlPj10aGlzLmRvd24ueHkuZGlzdGFuY2VUbyhhLnh5KSkmJnRoaXMudG91Y2gmJnRoaXMuZG93bi50b3VjaGVzLmxlbmd0aD09PXRoaXMubGFzdC50b3VjaGVzLmxlbmd0aCl7YT0wO2Zvcih2YXIgYz10aGlzLmRvd24udG91Y2hlcy5sZW5ndGg7YTxjOysrYSlpZih0aGlzLmdldFRvdWNoRGlzdGFuY2UodGhpcy5kb3duLnRvdWNoZXNbYV0sdGhpcy5sYXN0LnRvdWNoZXNbYV0pPnRoaXMucGl4ZWxUb2xlcmFuY2Upe2I9ITE7YnJlYWt9fXJldHVybiBifSxnZXRUb3VjaERpc3RhbmNlOmZ1bmN0aW9uKGEsYil7cmV0dXJuIE1hdGguc3FydChNYXRoLnBvdyhhLmNsaWVudFgtYi5jbGllbnRYLDIpK01hdGgucG93KGEuY2xpZW50WS1iLmNsaWVudFksCjIpKX0scGFzc2VzRGJsY2xpY2tUb2xlcmFuY2U6ZnVuY3Rpb24oYSl7YT0hMDt0aGlzLmRvd24mJnRoaXMuZmlyc3QmJihhPXRoaXMuZG93bi54eS5kaXN0YW5jZVRvKHRoaXMuZmlyc3QueHkpPD10aGlzLmRibGNsaWNrVG9sZXJhbmNlKTtyZXR1cm4gYX0sY2xlYXJUaW1lcjpmdW5jdGlvbigpe251bGwhPXRoaXMudGltZXJJZCYmKHdpbmRvdy5jbGVhclRpbWVvdXQodGhpcy50aW1lcklkKSx0aGlzLnRpbWVySWQ9bnVsbCk7bnVsbCE9dGhpcy5yaWdodGNsaWNrVGltZXJJZCYmKHdpbmRvdy5jbGVhclRpbWVvdXQodGhpcy5yaWdodGNsaWNrVGltZXJJZCksdGhpcy5yaWdodGNsaWNrVGltZXJJZD1udWxsKX0sZGVsYXllZENhbGw6ZnVuY3Rpb24oYSl7dGhpcy50aW1lcklkPW51bGw7YSYmdGhpcy5jYWxsYmFjaygiY2xpY2siLFthXSl9LGdldEV2ZW50SW5mbzpmdW5jdGlvbihhKXt2YXIgYjtpZihhLnRvdWNoZXMpe3ZhciBjPWEudG91Y2hlcy5sZW5ndGg7Yj1BcnJheShjKTtmb3IodmFyIGQsCmU9MDtlPGM7ZSsrKWQ9YS50b3VjaGVzW2VdLGJbZV09e2NsaWVudFg6ZC5vbENsaWVudFgsY2xpZW50WTpkLm9sQ2xpZW50WX19cmV0dXJue3h5OmEueHksdG91Y2hlczpifX0sZGVhY3RpdmF0ZTpmdW5jdGlvbigpe3ZhciBhPSExO09wZW5MYXllcnMuSGFuZGxlci5wcm90b3R5cGUuZGVhY3RpdmF0ZS5hcHBseSh0aGlzLGFyZ3VtZW50cykmJih0aGlzLmNsZWFyVGltZXIoKSx0aGlzLmxhc3Q9dGhpcy5maXJzdD10aGlzLmRvd249bnVsbCxhPSEwKTtyZXR1cm4gYX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5IYW5kbGVyLkNsaWNrIn0pO09wZW5MYXllcnMuQ29udHJvbC5OYXZpZ2F0aW9uPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Db250cm9sLHtkcmFnUGFuOm51bGwsZHJhZ1Bhbk9wdGlvbnM6bnVsbCxwaW5jaFpvb206bnVsbCxwaW5jaFpvb21PcHRpb25zOm51bGwsZG9jdW1lbnREcmFnOiExLHpvb21Cb3g6bnVsbCx6b29tQm94RW5hYmxlZDohMCx6b29tV2hlZWxFbmFibGVkOiEwLG1vdXNlV2hlZWxPcHRpb25zOm51bGwsaGFuZGxlUmlnaHRDbGlja3M6ITEsem9vbUJveEtleU1hc2s6T3BlbkxheWVycy5IYW5kbGVyLk1PRF9TSElGVCxhdXRvQWN0aXZhdGU6ITAsaW5pdGlhbGl6ZTpmdW5jdGlvbihhKXt0aGlzLmhhbmRsZXJzPXt9O09wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmRlYWN0aXZhdGUoKTt0aGlzLmRyYWdQYW4mJnRoaXMuZHJhZ1Bhbi5kZXN0cm95KCk7dGhpcy5kcmFnUGFuPW51bGw7CnRoaXMuem9vbUJveCYmdGhpcy56b29tQm94LmRlc3Ryb3koKTt0aGlzLnpvb21Cb3g9bnVsbDt0aGlzLnBpbmNoWm9vbSYmdGhpcy5waW5jaFpvb20uZGVzdHJveSgpO3RoaXMucGluY2hab29tPW51bGw7T3BlbkxheWVycy5Db250cm9sLnByb3RvdHlwZS5kZXN0cm95LmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sYWN0aXZhdGU6ZnVuY3Rpb24oKXt0aGlzLmRyYWdQYW4uYWN0aXZhdGUoKTt0aGlzLnpvb21XaGVlbEVuYWJsZWQmJnRoaXMuaGFuZGxlcnMud2hlZWwuYWN0aXZhdGUoKTt0aGlzLmhhbmRsZXJzLmNsaWNrLmFjdGl2YXRlKCk7dGhpcy56b29tQm94RW5hYmxlZCYmdGhpcy56b29tQm94LmFjdGl2YXRlKCk7dGhpcy5waW5jaFpvb20mJnRoaXMucGluY2hab29tLmFjdGl2YXRlKCk7cmV0dXJuIE9wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuYWN0aXZhdGUuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxkZWFjdGl2YXRlOmZ1bmN0aW9uKCl7dGhpcy5waW5jaFpvb20mJnRoaXMucGluY2hab29tLmRlYWN0aXZhdGUoKTsKdGhpcy56b29tQm94LmRlYWN0aXZhdGUoKTt0aGlzLmRyYWdQYW4uZGVhY3RpdmF0ZSgpO3RoaXMuaGFuZGxlcnMuY2xpY2suZGVhY3RpdmF0ZSgpO3RoaXMuaGFuZGxlcnMud2hlZWwuZGVhY3RpdmF0ZSgpO3JldHVybiBPcGVuTGF5ZXJzLkNvbnRyb2wucHJvdG90eXBlLmRlYWN0aXZhdGUuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxkcmF3OmZ1bmN0aW9uKCl7dGhpcy5oYW5kbGVSaWdodENsaWNrcyYmKHRoaXMubWFwLnZpZXdQb3J0RGl2Lm9uY29udGV4dG1lbnU9T3BlbkxheWVycy5GdW5jdGlvbi5GYWxzZSk7dGhpcy5oYW5kbGVycy5jbGljaz1uZXcgT3BlbkxheWVycy5IYW5kbGVyLkNsaWNrKHRoaXMse2NsaWNrOnRoaXMuZGVmYXVsdENsaWNrLGRibGNsaWNrOnRoaXMuZGVmYXVsdERibENsaWNrLGRibHJpZ2h0Y2xpY2s6dGhpcy5kZWZhdWx0RGJsUmlnaHRDbGlja30seyJkb3VibGUiOiEwLHN0b3BEb3VibGU6ITB9KTt0aGlzLmRyYWdQYW49bmV3IE9wZW5MYXllcnMuQ29udHJvbC5EcmFnUGFuKE9wZW5MYXllcnMuVXRpbC5leHRlbmQoe21hcDp0aGlzLm1hcCwKZG9jdW1lbnREcmFnOnRoaXMuZG9jdW1lbnREcmFnfSx0aGlzLmRyYWdQYW5PcHRpb25zKSk7dGhpcy56b29tQm94PW5ldyBPcGVuTGF5ZXJzLkNvbnRyb2wuWm9vbUJveCh7bWFwOnRoaXMubWFwLGtleU1hc2s6dGhpcy56b29tQm94S2V5TWFza30pO3RoaXMuZHJhZ1Bhbi5kcmF3KCk7dGhpcy56b29tQm94LmRyYXcoKTt0aGlzLmhhbmRsZXJzLndoZWVsPW5ldyBPcGVuTGF5ZXJzLkhhbmRsZXIuTW91c2VXaGVlbCh0aGlzLHt1cDp0aGlzLndoZWVsVXAsZG93bjp0aGlzLndoZWVsRG93bn0sT3BlbkxheWVycy5VdGlsLmV4dGVuZCh0aGlzLm1hcC5mcmFjdGlvbmFsWm9vbT97fTp7Y3VtdWxhdGl2ZTohMSxpbnRlcnZhbDo1MCxtYXhEZWx0YTo2fSx0aGlzLm1vdXNlV2hlZWxPcHRpb25zKSk7T3BlbkxheWVycy5Db250cm9sLlBpbmNoWm9vbSYmKHRoaXMucGluY2hab29tPW5ldyBPcGVuTGF5ZXJzLkNvbnRyb2wuUGluY2hab29tKE9wZW5MYXllcnMuVXRpbC5leHRlbmQoe21hcDp0aGlzLm1hcH0sCnRoaXMucGluY2hab29tT3B0aW9ucykpKX0sZGVmYXVsdENsaWNrOmZ1bmN0aW9uKGEpe2EubGFzdFRvdWNoZXMmJjI9PWEubGFzdFRvdWNoZXMubGVuZ3RoJiZ0aGlzLm1hcC56b29tT3V0KCl9LGRlZmF1bHREYmxDbGljazpmdW5jdGlvbihhKXt0aGlzLm1hcC56b29tVG8odGhpcy5tYXAuem9vbSsxLGEueHkpfSxkZWZhdWx0RGJsUmlnaHRDbGljazpmdW5jdGlvbihhKXt0aGlzLm1hcC56b29tVG8odGhpcy5tYXAuem9vbS0xLGEueHkpfSx3aGVlbENoYW5nZTpmdW5jdGlvbihhLGIpe3RoaXMubWFwLmZyYWN0aW9uYWxab29tfHwoYj1NYXRoLnJvdW5kKGIpKTt2YXIgYz10aGlzLm1hcC5nZXRab29tKCksZDtkPU1hdGgubWF4KGMrYiwwKTtkPU1hdGgubWluKGQsdGhpcy5tYXAuZ2V0TnVtWm9vbUxldmVscygpKTtkIT09YyYmdGhpcy5tYXAuem9vbVRvKGQsYS54eSl9LHdoZWVsVXA6ZnVuY3Rpb24oYSxiKXt0aGlzLndoZWVsQ2hhbmdlKGEsYnx8MSl9LHdoZWVsRG93bjpmdW5jdGlvbihhLApiKXt0aGlzLndoZWVsQ2hhbmdlKGEsYnx8LTEpfSxkaXNhYmxlWm9vbUJveDpmdW5jdGlvbigpe3RoaXMuem9vbUJveEVuYWJsZWQ9ITE7dGhpcy56b29tQm94LmRlYWN0aXZhdGUoKX0sZW5hYmxlWm9vbUJveDpmdW5jdGlvbigpe3RoaXMuem9vbUJveEVuYWJsZWQ9ITA7dGhpcy5hY3RpdmUmJnRoaXMuem9vbUJveC5hY3RpdmF0ZSgpfSxkaXNhYmxlWm9vbVdoZWVsOmZ1bmN0aW9uKCl7dGhpcy56b29tV2hlZWxFbmFibGVkPSExO3RoaXMuaGFuZGxlcnMud2hlZWwuZGVhY3RpdmF0ZSgpfSxlbmFibGVab29tV2hlZWw6ZnVuY3Rpb24oKXt0aGlzLnpvb21XaGVlbEVuYWJsZWQ9ITA7dGhpcy5hY3RpdmUmJnRoaXMuaGFuZGxlcnMud2hlZWwuYWN0aXZhdGUoKX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Db250cm9sLk5hdmlnYXRpb24ifSk7T3BlbkxheWVycy5MYXllci5XTVM9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkxheWVyLkdyaWQse0RFRkFVTFRfUEFSQU1TOntzZXJ2aWNlOiJXTVMiLHZlcnNpb246IjEuMS4xIixyZXF1ZXN0OiJHZXRNYXAiLHN0eWxlczoiIixmb3JtYXQ6ImltYWdlL2pwZWcifSxpc0Jhc2VMYXllcjohMCxlbmNvZGVCQk9YOiExLG5vTWFnaWM6ITEseXg6e30saW5pdGlhbGl6ZTpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1bXTtjPU9wZW5MYXllcnMuVXRpbC51cHBlckNhc2VPYmplY3QoYyk7MS4zPD1wYXJzZUZsb2F0KGMuVkVSU0lPTikmJiFjLkVYQ0VQVElPTlMmJihjLkVYQ0VQVElPTlM9IklOSU1BR0UiKTtlLnB1c2goYSxiLGMsZCk7T3BlbkxheWVycy5MYXllci5HcmlkLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsZSk7T3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHModGhpcy5wYXJhbXMsT3BlbkxheWVycy5VdGlsLnVwcGVyQ2FzZU9iamVjdCh0aGlzLkRFRkFVTFRfUEFSQU1TKSk7CiF0aGlzLm5vTWFnaWMmJih0aGlzLnBhcmFtcy5UUkFOU1BBUkVOVCYmInRydWUiPT10aGlzLnBhcmFtcy5UUkFOU1BBUkVOVC50b1N0cmluZygpLnRvTG93ZXJDYXNlKCkpJiYobnVsbCE9ZCYmZC5pc0Jhc2VMYXllcnx8KHRoaXMuaXNCYXNlTGF5ZXI9ITEpLCJpbWFnZS9qcGVnIj09dGhpcy5wYXJhbXMuRk9STUFUJiYodGhpcy5wYXJhbXMuRk9STUFUPU9wZW5MYXllcnMuVXRpbC5hbHBoYUhhY2soKT8iaW1hZ2UvZ2lmIjoiaW1hZ2UvcG5nIikpfSxjbG9uZTpmdW5jdGlvbihhKXtudWxsPT1hJiYoYT1uZXcgT3BlbkxheWVycy5MYXllci5XTVModGhpcy5uYW1lLHRoaXMudXJsLHRoaXMucGFyYW1zLHRoaXMuZ2V0T3B0aW9ucygpKSk7cmV0dXJuIGE9T3BlbkxheWVycy5MYXllci5HcmlkLnByb3RvdHlwZS5jbG9uZS5hcHBseSh0aGlzLFthXSl9LHJldmVyc2VBeGlzT3JkZXI6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnByb2plY3Rpb24uZ2V0Q29kZSgpO3JldHVybiAxLjM8PXBhcnNlRmxvYXQodGhpcy5wYXJhbXMuVkVSU0lPTikmJgohISh0aGlzLnl4W2FdfHxPcGVuTGF5ZXJzLlByb2plY3Rpb24uZGVmYXVsdHNbYV0mJk9wZW5MYXllcnMuUHJvamVjdGlvbi5kZWZhdWx0c1thXS55eCl9LGdldFVSTDpmdW5jdGlvbihhKXthPXRoaXMuYWRqdXN0Qm91bmRzKGEpO3ZhciBiPXRoaXMuZ2V0SW1hZ2VTaXplKCksYz17fSxkPXRoaXMucmV2ZXJzZUF4aXNPcmRlcigpO2MuQkJPWD10aGlzLmVuY29kZUJCT1g/YS50b0JCT1gobnVsbCxkKTphLnRvQXJyYXkoZCk7Yy5XSURUSD1iLnc7Yy5IRUlHSFQ9Yi5oO3JldHVybiB0aGlzLmdldEZ1bGxSZXF1ZXN0U3RyaW5nKGMpfSxtZXJnZU5ld1BhcmFtczpmdW5jdGlvbihhKXthPVtPcGVuTGF5ZXJzLlV0aWwudXBwZXJDYXNlT2JqZWN0KGEpXTtyZXR1cm4gT3BlbkxheWVycy5MYXllci5HcmlkLnByb3RvdHlwZS5tZXJnZU5ld1BhcmFtcy5hcHBseSh0aGlzLGEpfSxnZXRGdWxsUmVxdWVzdFN0cmluZzpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMubWFwLmdldFByb2plY3Rpb25PYmplY3QoKSwKYz10aGlzLnByb2plY3Rpb24mJnRoaXMucHJvamVjdGlvbi5lcXVhbHMoYyk/dGhpcy5wcm9qZWN0aW9uLmdldENvZGUoKTpjLmdldENvZGUoKSxjPSJub25lIj09Yz9udWxsOmM7MS4zPD1wYXJzZUZsb2F0KHRoaXMucGFyYW1zLlZFUlNJT04pP3RoaXMucGFyYW1zLkNSUz1jOnRoaXMucGFyYW1zLlNSUz1jOyJib29sZWFuIj09dHlwZW9mIHRoaXMucGFyYW1zLlRSQU5TUEFSRU5UJiYoYS5UUkFOU1BBUkVOVD10aGlzLnBhcmFtcy5UUkFOU1BBUkVOVD8iVFJVRSI6IkZBTFNFIik7cmV0dXJuIE9wZW5MYXllcnMuTGF5ZXIuR3JpZC5wcm90b3R5cGUuZ2V0RnVsbFJlcXVlc3RTdHJpbmcuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkxheWVyLldNUyJ9KTtPcGVuTGF5ZXJzLlJlbmRlcmVyLlNWRz1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuUmVuZGVyZXIuRWxlbWVudHMse3htbG5zOiJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIseGxpbmtuczoiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIsTUFYX1BJWEVMOjE1RTMsdHJhbnNsYXRpb25QYXJhbWV0ZXJzOm51bGwsc3ltYm9sTWV0cmljczpudWxsLGluaXRpYWxpemU6ZnVuY3Rpb24oYSl7dGhpcy5zdXBwb3J0ZWQoKSYmKE9wZW5MYXllcnMuUmVuZGVyZXIuRWxlbWVudHMucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxhcmd1bWVudHMpLHRoaXMudHJhbnNsYXRpb25QYXJhbWV0ZXJzPXt4OjAseTowfSx0aGlzLnN5bWJvbE1ldHJpY3M9e30pfSxzdXBwb3J0ZWQ6ZnVuY3Rpb24oKXtyZXR1cm4gZG9jdW1lbnQuaW1wbGVtZW50YXRpb24mJihkb2N1bWVudC5pbXBsZW1lbnRhdGlvbi5oYXNGZWF0dXJlKCJvcmcudzNjLnN2ZyIsIjEuMCIpfHxkb2N1bWVudC5pbXBsZW1lbnRhdGlvbi5oYXNGZWF0dXJlKCJodHRwOi8vd3d3LnczLm9yZy9UUi9TVkcxMS9mZWF0dXJlI1NWRyIsCiIxLjEiKXx8ZG9jdW1lbnQuaW1wbGVtZW50YXRpb24uaGFzRmVhdHVyZSgiaHR0cDovL3d3dy53My5vcmcvVFIvU1ZHMTEvZmVhdHVyZSNCYXNpY1N0cnVjdHVyZSIsIjEuMSIpKX0saW5WYWxpZFJhbmdlOmZ1bmN0aW9uKGEsYixjKXthKz1jPzA6dGhpcy50cmFuc2xhdGlvblBhcmFtZXRlcnMueDtiKz1jPzA6dGhpcy50cmFuc2xhdGlvblBhcmFtZXRlcnMueTtyZXR1cm4gYT49LXRoaXMuTUFYX1BJWEVMJiZhPD10aGlzLk1BWF9QSVhFTCYmYj49LXRoaXMuTUFYX1BJWEVMJiZiPD10aGlzLk1BWF9QSVhFTH0sc2V0RXh0ZW50OmZ1bmN0aW9uKGEsYil7dmFyIGM9T3BlbkxheWVycy5SZW5kZXJlci5FbGVtZW50cy5wcm90b3R5cGUuc2V0RXh0ZW50LmFwcGx5KHRoaXMsYXJndW1lbnRzKSxkPXRoaXMuZ2V0UmVzb2x1dGlvbigpLGU9LWEubGVmdC9kLGQ9YS50b3AvZDtpZihiKXJldHVybiB0aGlzLmxlZnQ9ZSx0aGlzLnRvcD1kLHRoaXMucmVuZGVyZXJSb290LnNldEF0dHJpYnV0ZU5TKG51bGwsCiJ2aWV3Qm94IiwiMCAwICIrdGhpcy5zaXplLncrIiAiK3RoaXMuc2l6ZS5oKSx0aGlzLnRyYW5zbGF0ZSh0aGlzLnhPZmZzZXQsMCksITA7KGU9dGhpcy50cmFuc2xhdGUoZS10aGlzLmxlZnQrdGhpcy54T2Zmc2V0LGQtdGhpcy50b3ApKXx8dGhpcy5zZXRFeHRlbnQoYSwhMCk7cmV0dXJuIGMmJmV9LHRyYW5zbGF0ZTpmdW5jdGlvbihhLGIpe2lmKHRoaXMuaW5WYWxpZFJhbmdlKGEsYiwhMCkpe3ZhciBjPSIiO2lmKGF8fGIpYz0idHJhbnNsYXRlKCIrYSsiLCIrYisiKSI7dGhpcy5yb290LnNldEF0dHJpYnV0ZU5TKG51bGwsInRyYW5zZm9ybSIsYyk7dGhpcy50cmFuc2xhdGlvblBhcmFtZXRlcnM9e3g6YSx5OmJ9O3JldHVybiEwfXJldHVybiExfSxzZXRTaXplOmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuUmVuZGVyZXIucHJvdG90eXBlLnNldFNpemUuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMucmVuZGVyZXJSb290LnNldEF0dHJpYnV0ZU5TKG51bGwsIndpZHRoIix0aGlzLnNpemUudyk7CnRoaXMucmVuZGVyZXJSb290LnNldEF0dHJpYnV0ZU5TKG51bGwsImhlaWdodCIsdGhpcy5zaXplLmgpfSxnZXROb2RlVHlwZTpmdW5jdGlvbihhLGIpe3ZhciBjPW51bGw7c3dpdGNoKGEuQ0xBU1NfTkFNRSl7Y2FzZSAiT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludCI6Yz1iLmV4dGVybmFsR3JhcGhpYz8iaW1hZ2UiOnRoaXMuaXNDb21wbGV4U3ltYm9sKGIuZ3JhcGhpY05hbWUpPyJzdmciOiJjaXJjbGUiO2JyZWFrO2Nhc2UgIk9wZW5MYXllcnMuR2VvbWV0cnkuUmVjdGFuZ2xlIjpjPSJyZWN0IjticmVhaztjYXNlICJPcGVuTGF5ZXJzLkdlb21ldHJ5LkxpbmVTdHJpbmciOmM9InBvbHlsaW5lIjticmVhaztjYXNlICJPcGVuTGF5ZXJzLkdlb21ldHJ5LkxpbmVhclJpbmciOmM9InBvbHlnb24iO2JyZWFrO2Nhc2UgIk9wZW5MYXllcnMuR2VvbWV0cnkuUG9seWdvbiI6Y2FzZSAiT3BlbkxheWVycy5HZW9tZXRyeS5DdXJ2ZSI6Yz0icGF0aCJ9cmV0dXJuIGN9LHNldFN0eWxlOmZ1bmN0aW9uKGEsCmIsYyl7Yj1ifHxhLl9zdHlsZTtjPWN8fGEuX29wdGlvbnM7dmFyIGQ9Yi50aXRsZXx8Yi5ncmFwaGljVGl0bGU7aWYoZCl7YS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJ0aXRsZSIsZCk7dmFyIGU9YS5nZXRFbGVtZW50c0J5VGFnTmFtZSgidGl0bGUiKTswPGUubGVuZ3RoP2VbMF0uZmlyc3RDaGlsZC50ZXh0Q29udGVudD1kOihlPXRoaXMubm9kZUZhY3RvcnkobnVsbCwidGl0bGUiKSxlLnRleHRDb250ZW50PWQsYS5hcHBlbmRDaGlsZChlKSl9dmFyIGU9cGFyc2VGbG9hdChhLmdldEF0dHJpYnV0ZU5TKG51bGwsInIiKSksZD0xLGY7aWYoIk9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQiPT1hLl9nZW9tZXRyeUNsYXNzJiZlKXthLnN0eWxlLnZpc2liaWxpdHk9IiI7aWYoITE9PT1iLmdyYXBoaWMpYS5zdHlsZS52aXNpYmlsaXR5PSJoaWRkZW4iO2Vsc2UgaWYoYi5leHRlcm5hbEdyYXBoaWMpe2Y9dGhpcy5nZXRQb3NpdGlvbihhKTtiLmdyYXBoaWNXaWR0aCYmYi5ncmFwaGljSGVpZ2h0JiYKYS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJwcmVzZXJ2ZUFzcGVjdFJhdGlvIiwibm9uZSIpO3ZhciBlPWIuZ3JhcGhpY1dpZHRofHxiLmdyYXBoaWNIZWlnaHQsZz1iLmdyYXBoaWNIZWlnaHR8fGIuZ3JhcGhpY1dpZHRoLGU9ZT9lOjIqYi5wb2ludFJhZGl1cyxnPWc/ZzoyKmIucG9pbnRSYWRpdXMsaD12b2lkIDAhPWIuZ3JhcGhpY1lPZmZzZXQ/Yi5ncmFwaGljWU9mZnNldDotKDAuNSpnKSxrPWIuZ3JhcGhpY09wYWNpdHl8fGIuZmlsbE9wYWNpdHk7YS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJ4IiwoZi54Kyh2b2lkIDAhPWIuZ3JhcGhpY1hPZmZzZXQ/Yi5ncmFwaGljWE9mZnNldDotKDAuNSplKSkpLnRvRml4ZWQoKSk7YS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJ5IiwoZi55K2gpLnRvRml4ZWQoKSk7YS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJ3aWR0aCIsZSk7YS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJoZWlnaHQiLGcpO2Euc2V0QXR0cmlidXRlTlModGhpcy54bGlua25zLCJ4bGluazpocmVmIiwKYi5leHRlcm5hbEdyYXBoaWMpO2Euc2V0QXR0cmlidXRlTlMobnVsbCwic3R5bGUiLCJvcGFjaXR5OiAiK2spO2Eub25jbGljaz1PcGVuTGF5ZXJzLkV2ZW50LnByZXZlbnREZWZhdWx0fWVsc2UgaWYodGhpcy5pc0NvbXBsZXhTeW1ib2woYi5ncmFwaGljTmFtZSkpe3ZhciBlPTMqYi5wb2ludFJhZGl1cyxnPTIqZSxsPXRoaXMuaW1wb3J0U3ltYm9sKGIuZ3JhcGhpY05hbWUpO2Y9dGhpcy5nZXRQb3NpdGlvbihhKTtkPTMqdGhpcy5zeW1ib2xNZXRyaWNzW2wuaWRdWzBdL2c7aD1hLnBhcmVudE5vZGU7az1hLm5leHRTaWJsaW5nO2gmJmgucmVtb3ZlQ2hpbGQoYSk7YS5maXJzdENoaWxkJiZhLnJlbW92ZUNoaWxkKGEuZmlyc3RDaGlsZCk7YS5hcHBlbmRDaGlsZChsLmZpcnN0Q2hpbGQuY2xvbmVOb2RlKCEwKSk7YS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJ2aWV3Qm94IixsLmdldEF0dHJpYnV0ZU5TKG51bGwsInZpZXdCb3giKSk7YS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJ3aWR0aCIsCmcpO2Euc2V0QXR0cmlidXRlTlMobnVsbCwiaGVpZ2h0IixnKTthLnNldEF0dHJpYnV0ZU5TKG51bGwsIngiLGYueC1lKTthLnNldEF0dHJpYnV0ZU5TKG51bGwsInkiLGYueS1lKTtrP2guaW5zZXJ0QmVmb3JlKGEsayk6aCYmaC5hcHBlbmRDaGlsZChhKX1lbHNlIGEuc2V0QXR0cmlidXRlTlMobnVsbCwiciIsYi5wb2ludFJhZGl1cyk7ZT1iLnJvdGF0aW9uO3ZvaWQgMD09PWUmJnZvaWQgMD09PWEuX3JvdGF0aW9ufHwhZnx8KGEuX3JvdGF0aW9uPWUsZXw9MCwic3ZnIiE9PWEubm9kZU5hbWU/YS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJ0cmFuc2Zvcm0iLCJyb3RhdGUoIitlKyIgIitmLngrIiAiK2YueSsiKSIpOihmPXRoaXMuc3ltYm9sTWV0cmljc1tsLmlkXSxhLmZpcnN0Q2hpbGQuc2V0QXR0cmlidXRlTlMobnVsbCwidHJhbnNmb3JtIiwicm90YXRlKCIrZSsiICIrZlsxXSsiICIrZlsyXSsiKSIpKSl9Yy5pc0ZpbGxlZD8oYS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJmaWxsIixiLmZpbGxDb2xvciksCmEuc2V0QXR0cmlidXRlTlMobnVsbCwiZmlsbC1vcGFjaXR5IixiLmZpbGxPcGFjaXR5KSk6YS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJmaWxsIiwibm9uZSIpO2MuaXNTdHJva2VkPyhhLnNldEF0dHJpYnV0ZU5TKG51bGwsInN0cm9rZSIsYi5zdHJva2VDb2xvciksYS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJzdHJva2Utb3BhY2l0eSIsYi5zdHJva2VPcGFjaXR5KSxhLnNldEF0dHJpYnV0ZU5TKG51bGwsInN0cm9rZS13aWR0aCIsYi5zdHJva2VXaWR0aCpkKSxhLnNldEF0dHJpYnV0ZU5TKG51bGwsInN0cm9rZS1saW5lY2FwIixiLnN0cm9rZUxpbmVjYXB8fCJyb3VuZCIpLGEuc2V0QXR0cmlidXRlTlMobnVsbCwic3Ryb2tlLWxpbmVqb2luIiwicm91bmQiKSxiLnN0cm9rZURhc2hzdHlsZSYmYS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJzdHJva2UtZGFzaGFycmF5Iix0aGlzLmRhc2hTdHlsZShiLGQpKSk6YS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJzdHJva2UiLCJub25lIik7Yi5wb2ludGVyRXZlbnRzJiYKYS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJwb2ludGVyLWV2ZW50cyIsYi5wb2ludGVyRXZlbnRzKTtudWxsIT1iLmN1cnNvciYmYS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJjdXJzb3IiLGIuY3Vyc29yKTtyZXR1cm4gYX0sZGFzaFN0eWxlOmZ1bmN0aW9uKGEsYil7dmFyIGM9YS5zdHJva2VXaWR0aCpiLGQ9YS5zdHJva2VEYXNoc3R5bGU7c3dpdGNoKGQpe2Nhc2UgInNvbGlkIjpyZXR1cm4ibm9uZSI7Y2FzZSAiZG90IjpyZXR1cm5bMSw0KmNdLmpvaW4oKTtjYXNlICJkYXNoIjpyZXR1cm5bNCpjLDQqY10uam9pbigpO2Nhc2UgImRhc2hkb3QiOnJldHVybls0KmMsNCpjLDEsNCpjXS5qb2luKCk7Y2FzZSAibG9uZ2Rhc2giOnJldHVybls4KmMsNCpjXS5qb2luKCk7Y2FzZSAibG9uZ2Rhc2hkb3QiOnJldHVybls4KmMsNCpjLDEsNCpjXS5qb2luKCk7ZGVmYXVsdDpyZXR1cm4gT3BlbkxheWVycy5TdHJpbmcudHJpbShkKS5yZXBsYWNlKC9ccysvZywiLCIpfX0sY3JlYXRlTm9kZTpmdW5jdGlvbihhLApiKXt2YXIgYz1kb2N1bWVudC5jcmVhdGVFbGVtZW50TlModGhpcy54bWxucyxhKTtiJiZjLnNldEF0dHJpYnV0ZU5TKG51bGwsImlkIixiKTtyZXR1cm4gY30sbm9kZVR5cGVDb21wYXJlOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGI9PWEubm9kZU5hbWV9LGNyZWF0ZVJlbmRlclJvb3Q6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm5vZGVGYWN0b3J5KHRoaXMuY29udGFpbmVyLmlkKyJfc3ZnUm9vdCIsInN2ZyIpO2Euc3R5bGUuZGlzcGxheT0iYmxvY2siO3JldHVybiBhfSxjcmVhdGVSb290OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLm5vZGVGYWN0b3J5KHRoaXMuY29udGFpbmVyLmlkK2EsImciKX0sY3JlYXRlRGVmczpmdW5jdGlvbigpe3ZhciBhPXRoaXMubm9kZUZhY3RvcnkodGhpcy5jb250YWluZXIuaWQrIl9kZWZzIiwiZGVmcyIpO3RoaXMucmVuZGVyZXJSb290LmFwcGVuZENoaWxkKGEpO3JldHVybiBhfSxkcmF3UG9pbnQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5kcmF3Q2lyY2xlKGEsCmIsMSl9LGRyYXdDaXJjbGU6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXRoaXMuZ2V0UmVzb2x1dGlvbigpLGU9KGIueC10aGlzLmZlYXR1cmVEeCkvZCt0aGlzLmxlZnQ7Yj10aGlzLnRvcC1iLnkvZDtyZXR1cm4gdGhpcy5pblZhbGlkUmFuZ2UoZSxiKT8oYS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJjeCIsZSksYS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJjeSIsYiksYS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJyIixjKSxhKTohMX0sZHJhd0xpbmVTdHJpbmc6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmdldENvbXBvbmVudHNTdHJpbmcoYi5jb21wb25lbnRzKTtyZXR1cm4gYy5wYXRoPyhhLnNldEF0dHJpYnV0ZU5TKG51bGwsInBvaW50cyIsYy5wYXRoKSxjLmNvbXBsZXRlP2E6bnVsbCk6ITF9LGRyYXdMaW5lYXJSaW5nOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5nZXRDb21wb25lbnRzU3RyaW5nKGIuY29tcG9uZW50cyk7cmV0dXJuIGMucGF0aD8oYS5zZXRBdHRyaWJ1dGVOUyhudWxsLAoicG9pbnRzIixjLnBhdGgpLGMuY29tcGxldGU/YTpudWxsKTohMX0sZHJhd1BvbHlnb246ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9IiIsZD0hMCxlPSEwLGYsZyxoPTAsaz1iLmNvbXBvbmVudHMubGVuZ3RoO2g8aztoKyspYys9IiBNIixmPXRoaXMuZ2V0Q29tcG9uZW50c1N0cmluZyhiLmNvbXBvbmVudHNbaF0uY29tcG9uZW50cywiICIpLChnPWYucGF0aCk/KGMrPSIgIitnLGU9Zi5jb21wbGV0ZSYmZSk6ZD0hMTtyZXR1cm4gZD8oYS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJkIixjKyIgeiIpLGEuc2V0QXR0cmlidXRlTlMobnVsbCwiZmlsbC1ydWxlIiwiZXZlbm9kZCIpLGU/YTpudWxsKTohMX0sZHJhd1JlY3RhbmdsZTpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuZ2V0UmVzb2x1dGlvbigpLGQ9KGIueC10aGlzLmZlYXR1cmVEeCkvYyt0aGlzLmxlZnQsZT10aGlzLnRvcC1iLnkvYztyZXR1cm4gdGhpcy5pblZhbGlkUmFuZ2UoZCxlKT8oYS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJ4IiwKZCksYS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJ5IixlKSxhLnNldEF0dHJpYnV0ZU5TKG51bGwsIndpZHRoIixiLndpZHRoL2MpLGEuc2V0QXR0cmlidXRlTlMobnVsbCwiaGVpZ2h0IixiLmhlaWdodC9jKSxhKTohMX0sZHJhd1RleHQ6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPSEhYi5sYWJlbE91dGxpbmVXaWR0aDtpZihkKXt2YXIgZT1PcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHt9LGIpO2UuZm9udENvbG9yPWUubGFiZWxPdXRsaW5lQ29sb3I7ZS5mb250U3Ryb2tlQ29sb3I9ZS5sYWJlbE91dGxpbmVDb2xvcjtlLmZvbnRTdHJva2VXaWR0aD1iLmxhYmVsT3V0bGluZVdpZHRoO2IubGFiZWxPdXRsaW5lT3BhY2l0eSYmKGUuZm9udE9wYWNpdHk9Yi5sYWJlbE91dGxpbmVPcGFjaXR5KTtkZWxldGUgZS5sYWJlbE91dGxpbmVXaWR0aDt0aGlzLmRyYXdUZXh0KGEsZSxjKX12YXIgZj10aGlzLmdldFJlc29sdXRpb24oKSxlPShjLngtdGhpcy5mZWF0dXJlRHgpL2YrdGhpcy5sZWZ0LGc9Yy55LwpmLXRoaXMudG9wLGQ9ZD90aGlzLkxBQkVMX09VVExJTkVfU1VGRklYOnRoaXMuTEFCRUxfSURfU1VGRklYLGY9dGhpcy5ub2RlRmFjdG9yeShhK2QsInRleHQiKTtmLnNldEF0dHJpYnV0ZU5TKG51bGwsIngiLGUpO2Yuc2V0QXR0cmlidXRlTlMobnVsbCwieSIsLWcpO2IuZm9udENvbG9yJiZmLnNldEF0dHJpYnV0ZU5TKG51bGwsImZpbGwiLGIuZm9udENvbG9yKTtiLmZvbnRTdHJva2VDb2xvciYmZi5zZXRBdHRyaWJ1dGVOUyhudWxsLCJzdHJva2UiLGIuZm9udFN0cm9rZUNvbG9yKTtiLmZvbnRTdHJva2VXaWR0aCYmZi5zZXRBdHRyaWJ1dGVOUyhudWxsLCJzdHJva2Utd2lkdGgiLGIuZm9udFN0cm9rZVdpZHRoKTtiLmZvbnRPcGFjaXR5JiZmLnNldEF0dHJpYnV0ZU5TKG51bGwsIm9wYWNpdHkiLGIuZm9udE9wYWNpdHkpO2IuZm9udEZhbWlseSYmZi5zZXRBdHRyaWJ1dGVOUyhudWxsLCJmb250LWZhbWlseSIsYi5mb250RmFtaWx5KTtiLmZvbnRTaXplJiZmLnNldEF0dHJpYnV0ZU5TKG51bGwsCiJmb250LXNpemUiLGIuZm9udFNpemUpO2IuZm9udFdlaWdodCYmZi5zZXRBdHRyaWJ1dGVOUyhudWxsLCJmb250LXdlaWdodCIsYi5mb250V2VpZ2h0KTtiLmZvbnRTdHlsZSYmZi5zZXRBdHRyaWJ1dGVOUyhudWxsLCJmb250LXN0eWxlIixiLmZvbnRTdHlsZSk7ITA9PT1iLmxhYmVsU2VsZWN0PyhmLnNldEF0dHJpYnV0ZU5TKG51bGwsInBvaW50ZXItZXZlbnRzIiwidmlzaWJsZSIpLGYuX2ZlYXR1cmVJZD1hKTpmLnNldEF0dHJpYnV0ZU5TKG51bGwsInBvaW50ZXItZXZlbnRzIiwibm9uZSIpO2c9Yi5sYWJlbEFsaWdufHxPcGVuTGF5ZXJzLlJlbmRlcmVyLmRlZmF1bHRTeW1ib2xpemVyLmxhYmVsQWxpZ247Zi5zZXRBdHRyaWJ1dGVOUyhudWxsLCJ0ZXh0LWFuY2hvciIsT3BlbkxheWVycy5SZW5kZXJlci5TVkcuTEFCRUxfQUxJR05bZ1swXV18fCJtaWRkbGUiKTshMD09PU9wZW5MYXllcnMuSVNfR0VDS08mJmYuc2V0QXR0cmlidXRlTlMobnVsbCwiZG9taW5hbnQtYmFzZWxpbmUiLApPcGVuTGF5ZXJzLlJlbmRlcmVyLlNWRy5MQUJFTF9BTElHTltnWzFdXXx8ImNlbnRyYWwiKTtmb3IodmFyIGg9Yi5sYWJlbC5zcGxpdCgiXG4iKSxrPWgubGVuZ3RoO2YuY2hpbGROb2Rlcy5sZW5ndGg+azspZi5yZW1vdmVDaGlsZChmLmxhc3RDaGlsZCk7Zm9yKHZhciBsPTA7bDxrO2wrKyl7dmFyIG09dGhpcy5ub2RlRmFjdG9yeShhK2QrIl90c3Bhbl8iK2wsInRzcGFuIik7ITA9PT1iLmxhYmVsU2VsZWN0JiYobS5fZmVhdHVyZUlkPWEsbS5fZ2VvbWV0cnk9YyxtLl9nZW9tZXRyeUNsYXNzPWMuQ0xBU1NfTkFNRSk7ITE9PT1PcGVuTGF5ZXJzLklTX0dFQ0tPJiZtLnNldEF0dHJpYnV0ZU5TKG51bGwsImJhc2VsaW5lLXNoaWZ0IixPcGVuTGF5ZXJzLlJlbmRlcmVyLlNWRy5MQUJFTF9WU0hJRlRbZ1sxXV18fCItMzUlIik7bS5zZXRBdHRyaWJ1dGUoIngiLGUpO2lmKDA9PWwpe3ZhciByPU9wZW5MYXllcnMuUmVuZGVyZXIuU1ZHLkxBQkVMX1ZGQUNUT1JbZ1sxXV07bnVsbD09ciYmCihyPS0wLjUpO20uc2V0QXR0cmlidXRlKCJkeSIsciooay0xKSsiZW0iKX1lbHNlIG0uc2V0QXR0cmlidXRlKCJkeSIsIjFlbSIpO20udGV4dENvbnRlbnQ9IiI9PT1oW2xdPyIgIjpoW2xdO20ucGFyZW50Tm9kZXx8Zi5hcHBlbmRDaGlsZChtKX1mLnBhcmVudE5vZGV8fHRoaXMudGV4dFJvb3QuYXBwZW5kQ2hpbGQoZil9LGdldENvbXBvbmVudHNTdHJpbmc6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9W10sZD0hMCxlPWEubGVuZ3RoLGY9W10sZyxoPTA7aDxlO2grKylnPWFbaF0sYy5wdXNoKGcpLChnPXRoaXMuZ2V0U2hvcnRTdHJpbmcoZykpP2YucHVzaChnKTooMDxoJiZ0aGlzLmdldFNob3J0U3RyaW5nKGFbaC0xXSkmJmYucHVzaCh0aGlzLmNsaXBMaW5lKGFbaF0sYVtoLTFdKSksaDxlLTEmJnRoaXMuZ2V0U2hvcnRTdHJpbmcoYVtoKzFdKSYmZi5wdXNoKHRoaXMuY2xpcExpbmUoYVtoXSxhW2grMV0pKSxkPSExKTtyZXR1cm57cGF0aDpmLmpvaW4oYnx8IiwiKSxjb21wbGV0ZTpkfX0sCmNsaXBMaW5lOmZ1bmN0aW9uKGEsYil7aWYoYi5lcXVhbHMoYSkpcmV0dXJuIiI7dmFyIGM9dGhpcy5nZXRSZXNvbHV0aW9uKCksZD10aGlzLk1BWF9QSVhFTC10aGlzLnRyYW5zbGF0aW9uUGFyYW1ldGVycy54LGU9dGhpcy5NQVhfUElYRUwtdGhpcy50cmFuc2xhdGlvblBhcmFtZXRlcnMueSxmPShiLngtdGhpcy5mZWF0dXJlRHgpL2MrdGhpcy5sZWZ0LGc9dGhpcy50b3AtYi55L2MsaD0oYS54LXRoaXMuZmVhdHVyZUR4KS9jK3RoaXMubGVmdCxjPXRoaXMudG9wLWEueS9jLGs7aWYoaDwtZHx8aD5kKWs9KGMtZykvKGgtZiksaD0wPmg/LWQ6ZCxjPWcrKGgtZikqaztpZihjPC1lfHxjPmUpaz0oaC1mKS8oYy1nKSxjPTA+Yz8tZTplLGg9ZisoYy1nKSprO3JldHVybiBoKyIsIitjfSxnZXRTaG9ydFN0cmluZzpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmdldFJlc29sdXRpb24oKSxjPShhLngtdGhpcy5mZWF0dXJlRHgpL2IrdGhpcy5sZWZ0O2E9dGhpcy50b3AtYS55L2I7cmV0dXJuIHRoaXMuaW5WYWxpZFJhbmdlKGMsCmEpP2MrIiwiK2E6ITF9LGdldFBvc2l0aW9uOmZ1bmN0aW9uKGEpe3JldHVybnt4OnBhcnNlRmxvYXQoYS5nZXRBdHRyaWJ1dGVOUyhudWxsLCJjeCIpKSx5OnBhcnNlRmxvYXQoYS5nZXRBdHRyaWJ1dGVOUyhudWxsLCJjeSIpKX19LGltcG9ydFN5bWJvbDpmdW5jdGlvbihhKXt0aGlzLmRlZnN8fCh0aGlzLmRlZnM9dGhpcy5jcmVhdGVEZWZzKCkpO3ZhciBiPXRoaXMuY29udGFpbmVyLmlkKyItIithLGM9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYik7aWYobnVsbCE9YylyZXR1cm4gYzt2YXIgZD1PcGVuTGF5ZXJzLlJlbmRlcmVyLnN5bWJvbFthXTtpZighZCl0aHJvdyBFcnJvcihhKyIgaXMgbm90IGEgdmFsaWQgc3ltYm9sIG5hbWUiKTthPXRoaXMubm9kZUZhY3RvcnkoYiwic3ltYm9sIik7dmFyIGU9dGhpcy5ub2RlRmFjdG9yeShudWxsLCJwb2x5Z29uIik7YS5hcHBlbmRDaGlsZChlKTtmb3IodmFyIGM9bmV3IE9wZW5MYXllcnMuQm91bmRzKE51bWJlci5NQVhfVkFMVUUsTnVtYmVyLk1BWF9WQUxVRSwKMCwwKSxmPVtdLGcsaCxrPTA7azxkLmxlbmd0aDtrKz0yKWc9ZFtrXSxoPWRbaysxXSxjLmxlZnQ9TWF0aC5taW4oYy5sZWZ0LGcpLGMuYm90dG9tPU1hdGgubWluKGMuYm90dG9tLGgpLGMucmlnaHQ9TWF0aC5tYXgoYy5yaWdodCxnKSxjLnRvcD1NYXRoLm1heChjLnRvcCxoKSxmLnB1c2goZywiLCIsaCk7ZS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJwb2ludHMiLGYuam9pbigiICIpKTtkPWMuZ2V0V2lkdGgoKTtlPWMuZ2V0SGVpZ2h0KCk7YS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJ2aWV3Qm94IixbYy5sZWZ0LWQsYy5ib3R0b20tZSwzKmQsMyplXS5qb2luKCIgIikpO3RoaXMuc3ltYm9sTWV0cmljc1tiXT1bTWF0aC5tYXgoZCxlKSxjLmdldENlbnRlckxvbkxhdCgpLmxvbixjLmdldENlbnRlckxvbkxhdCgpLmxhdF07dGhpcy5kZWZzLmFwcGVuZENoaWxkKGEpO3JldHVybiBhfSxnZXRGZWF0dXJlSWRGcm9tRXZlbnQ6ZnVuY3Rpb24oYSl7dmFyIGI9T3BlbkxheWVycy5SZW5kZXJlci5FbGVtZW50cy5wcm90b3R5cGUuZ2V0RmVhdHVyZUlkRnJvbUV2ZW50LmFwcGx5KHRoaXMsCmFyZ3VtZW50cyk7Ynx8KGI9YS50YXJnZXQsYj1iLnBhcmVudE5vZGUmJmIhPXRoaXMucmVuZGVyZXJSb290P2IucGFyZW50Tm9kZS5fZmVhdHVyZUlkOnZvaWQgMCk7cmV0dXJuIGJ9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuUmVuZGVyZXIuU1ZHIn0pO09wZW5MYXllcnMuUmVuZGVyZXIuU1ZHLkxBQkVMX0FMSUdOPXtsOiJzdGFydCIscjoiZW5kIixiOiJib3R0b20iLHQ6ImhhbmdpbmcifTtPcGVuTGF5ZXJzLlJlbmRlcmVyLlNWRy5MQUJFTF9WU0hJRlQ9e3Q6Ii03MCUiLGI6IjAifTtPcGVuTGF5ZXJzLlJlbmRlcmVyLlNWRy5MQUJFTF9WRkFDVE9SPXt0OjAsYjotMX07T3BlbkxheWVycy5SZW5kZXJlci5TVkcucHJldmVudERlZmF1bHQ9ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5FdmVudC5wcmV2ZW50RGVmYXVsdChhKX07T3BlbkxheWVycy5Qb3B1cD1PcGVuTGF5ZXJzLkNsYXNzKHtldmVudHM6bnVsbCxpZDoiIixsb25sYXQ6bnVsbCxkaXY6bnVsbCxjb250ZW50U2l6ZTpudWxsLHNpemU6bnVsbCxjb250ZW50SFRNTDpudWxsLGJhY2tncm91bmRDb2xvcjoiIixvcGFjaXR5OiIiLGJvcmRlcjoiIixjb250ZW50RGl2Om51bGwsZ3JvdXBEaXY6bnVsbCxjbG9zZURpdjpudWxsLGF1dG9TaXplOiExLG1pblNpemU6bnVsbCxtYXhTaXplOm51bGwsZGlzcGxheUNsYXNzOiJvbFBvcHVwIixjb250ZW50RGlzcGxheUNsYXNzOiJvbFBvcHVwQ29udGVudCIscGFkZGluZzowLGRpc2FibGVGaXJlZm94T3ZlcmZsb3dIYWNrOiExLGZpeFBhZGRpbmc6ZnVuY3Rpb24oKXsibnVtYmVyIj09dHlwZW9mIHRoaXMucGFkZGluZyYmKHRoaXMucGFkZGluZz1uZXcgT3BlbkxheWVycy5Cb3VuZHModGhpcy5wYWRkaW5nLHRoaXMucGFkZGluZyx0aGlzLnBhZGRpbmcsdGhpcy5wYWRkaW5nKSl9LHBhbk1hcElmT3V0T2ZWaWV3OiExLAprZWVwSW5NYXA6ITEsY2xvc2VPbk1vdmU6ITEsbWFwOm51bGwsaW5pdGlhbGl6ZTpmdW5jdGlvbihhLGIsYyxkLGUsZil7bnVsbD09YSYmKGE9T3BlbkxheWVycy5VdGlsLmNyZWF0ZVVuaXF1ZUlEKHRoaXMuQ0xBU1NfTkFNRSsiXyIpKTt0aGlzLmlkPWE7dGhpcy5sb25sYXQ9Yjt0aGlzLmNvbnRlbnRTaXplPW51bGwhPWM/YzpuZXcgT3BlbkxheWVycy5TaXplKE9wZW5MYXllcnMuUG9wdXAuV0lEVEgsT3BlbkxheWVycy5Qb3B1cC5IRUlHSFQpO251bGwhPWQmJih0aGlzLmNvbnRlbnRIVE1MPWQpO3RoaXMuYmFja2dyb3VuZENvbG9yPU9wZW5MYXllcnMuUG9wdXAuQ09MT1I7dGhpcy5vcGFjaXR5PU9wZW5MYXllcnMuUG9wdXAuT1BBQ0lUWTt0aGlzLmJvcmRlcj1PcGVuTGF5ZXJzLlBvcHVwLkJPUkRFUjt0aGlzLmRpdj1PcGVuTGF5ZXJzLlV0aWwuY3JlYXRlRGl2KHRoaXMuaWQsbnVsbCxudWxsLG51bGwsbnVsbCxudWxsLCJoaWRkZW4iKTt0aGlzLmRpdi5jbGFzc05hbWU9dGhpcy5kaXNwbGF5Q2xhc3M7CnRoaXMuZ3JvdXBEaXY9T3BlbkxheWVycy5VdGlsLmNyZWF0ZURpdih0aGlzLmlkKyJfR3JvdXBEaXYiLG51bGwsbnVsbCxudWxsLCJyZWxhdGl2ZSIsbnVsbCwiaGlkZGVuIik7YT10aGlzLmRpdi5pZCsiX2NvbnRlbnREaXYiO3RoaXMuY29udGVudERpdj1PcGVuTGF5ZXJzLlV0aWwuY3JlYXRlRGl2KGEsbnVsbCx0aGlzLmNvbnRlbnRTaXplLmNsb25lKCksbnVsbCwicmVsYXRpdmUiKTt0aGlzLmNvbnRlbnREaXYuY2xhc3NOYW1lPXRoaXMuY29udGVudERpc3BsYXlDbGFzczt0aGlzLmdyb3VwRGl2LmFwcGVuZENoaWxkKHRoaXMuY29udGVudERpdik7dGhpcy5kaXYuYXBwZW5kQ2hpbGQodGhpcy5ncm91cERpdik7ZSYmdGhpcy5hZGRDbG9zZUJveChmKTt0aGlzLnJlZ2lzdGVyRXZlbnRzKCl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmJvcmRlcj10aGlzLm9wYWNpdHk9dGhpcy5iYWNrZ3JvdW5kQ29sb3I9dGhpcy5jb250ZW50SFRNTD10aGlzLnNpemU9dGhpcy5sb25sYXQ9dGhpcy5pZD0KbnVsbDt0aGlzLmNsb3NlT25Nb3ZlJiZ0aGlzLm1hcCYmdGhpcy5tYXAuZXZlbnRzLnVucmVnaXN0ZXIoIm1vdmVzdGFydCIsdGhpcyx0aGlzLmhpZGUpO3RoaXMuZXZlbnRzLmRlc3Ryb3koKTt0aGlzLmV2ZW50cz1udWxsO3RoaXMuY2xvc2VEaXYmJihPcGVuTGF5ZXJzLkV2ZW50LnN0b3BPYnNlcnZpbmdFbGVtZW50KHRoaXMuY2xvc2VEaXYpLHRoaXMuZ3JvdXBEaXYucmVtb3ZlQ2hpbGQodGhpcy5jbG9zZURpdikpO3RoaXMuY2xvc2VEaXY9bnVsbDt0aGlzLmRpdi5yZW1vdmVDaGlsZCh0aGlzLmdyb3VwRGl2KTt0aGlzLmdyb3VwRGl2PW51bGw7bnVsbCE9dGhpcy5tYXAmJnRoaXMubWFwLnJlbW92ZVBvcHVwKHRoaXMpO3RoaXMucGFuTWFwSWZPdXRPZlZpZXc9dGhpcy5wYWRkaW5nPXRoaXMubWF4U2l6ZT10aGlzLm1pblNpemU9dGhpcy5hdXRvU2l6ZT10aGlzLmRpdj10aGlzLm1hcD1udWxsfSxkcmF3OmZ1bmN0aW9uKGEpe251bGw9PWEmJm51bGwhPXRoaXMubG9ubGF0JiZudWxsIT0KdGhpcy5tYXAmJihhPXRoaXMubWFwLmdldExheWVyUHhGcm9tTG9uTGF0KHRoaXMubG9ubGF0KSk7dGhpcy5jbG9zZU9uTW92ZSYmdGhpcy5tYXAuZXZlbnRzLnJlZ2lzdGVyKCJtb3Zlc3RhcnQiLHRoaXMsdGhpcy5oaWRlKTt0aGlzLmRpc2FibGVGaXJlZm94T3ZlcmZsb3dIYWNrfHwiZmlyZWZveCIhPU9wZW5MYXllcnMuQlJPV1NFUl9OQU1FfHwodGhpcy5tYXAuZXZlbnRzLnJlZ2lzdGVyKCJtb3Zlc3RhcnQiLHRoaXMsZnVuY3Rpb24oKXt2YXIgYT1kb2N1bWVudC5kZWZhdWx0Vmlldy5nZXRDb21wdXRlZFN0eWxlKHRoaXMuY29udGVudERpdixudWxsKS5nZXRQcm9wZXJ0eVZhbHVlKCJvdmVyZmxvdyIpOyJoaWRkZW4iIT1hJiYodGhpcy5jb250ZW50RGl2Ll9vbGRPdmVyZmxvdz1hLHRoaXMuY29udGVudERpdi5zdHlsZS5vdmVyZmxvdz0iaGlkZGVuIil9KSx0aGlzLm1hcC5ldmVudHMucmVnaXN0ZXIoIm1vdmVlbmQiLHRoaXMsZnVuY3Rpb24oKXt2YXIgYT10aGlzLmNvbnRlbnREaXYuX29sZE92ZXJmbG93OwphJiYodGhpcy5jb250ZW50RGl2LnN0eWxlLm92ZXJmbG93PWEsdGhpcy5jb250ZW50RGl2Ll9vbGRPdmVyZmxvdz1udWxsKX0pKTt0aGlzLm1vdmVUbyhhKTt0aGlzLmF1dG9TaXplfHx0aGlzLnNpemV8fHRoaXMuc2V0U2l6ZSh0aGlzLmNvbnRlbnRTaXplKTt0aGlzLnNldEJhY2tncm91bmRDb2xvcigpO3RoaXMuc2V0T3BhY2l0eSgpO3RoaXMuc2V0Qm9yZGVyKCk7dGhpcy5zZXRDb250ZW50SFRNTCgpO3RoaXMucGFuTWFwSWZPdXRPZlZpZXcmJnRoaXMucGFuSW50b1ZpZXcoKTtyZXR1cm4gdGhpcy5kaXZ9LHVwZGF0ZVBvc2l0aW9uOmZ1bmN0aW9uKCl7aWYodGhpcy5sb25sYXQmJnRoaXMubWFwKXt2YXIgYT10aGlzLm1hcC5nZXRMYXllclB4RnJvbUxvbkxhdCh0aGlzLmxvbmxhdCk7YSYmdGhpcy5tb3ZlVG8oYSl9fSxtb3ZlVG86ZnVuY3Rpb24oYSl7bnVsbCE9YSYmbnVsbCE9dGhpcy5kaXYmJih0aGlzLmRpdi5zdHlsZS5sZWZ0PWEueCsicHgiLHRoaXMuZGl2LnN0eWxlLnRvcD0KYS55KyJweCIpfSx2aXNpYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIE9wZW5MYXllcnMuRWxlbWVudC52aXNpYmxlKHRoaXMuZGl2KX0sdG9nZ2xlOmZ1bmN0aW9uKCl7dGhpcy52aXNpYmxlKCk/dGhpcy5oaWRlKCk6dGhpcy5zaG93KCl9LHNob3c6ZnVuY3Rpb24oKXt0aGlzLmRpdi5zdHlsZS5kaXNwbGF5PSIiO3RoaXMucGFuTWFwSWZPdXRPZlZpZXcmJnRoaXMucGFuSW50b1ZpZXcoKX0saGlkZTpmdW5jdGlvbigpe3RoaXMuZGl2LnN0eWxlLmRpc3BsYXk9Im5vbmUifSxzZXRTaXplOmZ1bmN0aW9uKGEpe3RoaXMuc2l6ZT1hLmNsb25lKCk7dmFyIGI9dGhpcy5nZXRDb250ZW50RGl2UGFkZGluZygpLGM9Yi5sZWZ0K2IucmlnaHQsZD1iLnRvcCtiLmJvdHRvbTt0aGlzLmZpeFBhZGRpbmcoKTtjKz10aGlzLnBhZGRpbmcubGVmdCt0aGlzLnBhZGRpbmcucmlnaHQ7ZCs9dGhpcy5wYWRkaW5nLnRvcCt0aGlzLnBhZGRpbmcuYm90dG9tO2lmKHRoaXMuY2xvc2VEaXYpdmFyIGU9cGFyc2VJbnQodGhpcy5jbG9zZURpdi5zdHlsZS53aWR0aCksCmM9YysoZStiLnJpZ2h0KTt0aGlzLnNpemUudys9Yzt0aGlzLnNpemUuaCs9ZDsibXNpZSI9PU9wZW5MYXllcnMuQlJPV1NFUl9OQU1FJiYodGhpcy5jb250ZW50U2l6ZS53Kz1iLmxlZnQrYi5yaWdodCx0aGlzLmNvbnRlbnRTaXplLmgrPWIuYm90dG9tK2IudG9wKTtudWxsIT10aGlzLmRpdiYmKHRoaXMuZGl2LnN0eWxlLndpZHRoPXRoaXMuc2l6ZS53KyJweCIsdGhpcy5kaXYuc3R5bGUuaGVpZ2h0PXRoaXMuc2l6ZS5oKyJweCIpO251bGwhPXRoaXMuY29udGVudERpdiYmKHRoaXMuY29udGVudERpdi5zdHlsZS53aWR0aD1hLncrInB4Iix0aGlzLmNvbnRlbnREaXYuc3R5bGUuaGVpZ2h0PWEuaCsicHgiKX0sdXBkYXRlU2l6ZTpmdW5jdGlvbigpe3ZhciBhPSI8ZGl2IGNsYXNzPSciK3RoaXMuY29udGVudERpc3BsYXlDbGFzcysiJz4iK3RoaXMuY29udGVudERpdi5pbm5lckhUTUwrIjwvZGl2PiIsYj10aGlzLm1hcD90aGlzLm1hcC5kaXY6ZG9jdW1lbnQuYm9keSxjPU9wZW5MYXllcnMuVXRpbC5nZXRSZW5kZXJlZERpbWVuc2lvbnMoYSwKbnVsbCx7ZGlzcGxheUNsYXNzOnRoaXMuZGlzcGxheUNsYXNzLGNvbnRhaW5lckVsZW1lbnQ6Yn0pLGQ9dGhpcy5nZXRTYWZlQ29udGVudFNpemUoYyksZT1udWxsO2QuZXF1YWxzKGMpP2U9YzooYz17dzpkLnc8Yy53P2QudzpudWxsLGg6ZC5oPGMuaD9kLmg6bnVsbH0sYy53JiZjLmg/ZT1kOihhPU9wZW5MYXllcnMuVXRpbC5nZXRSZW5kZXJlZERpbWVuc2lvbnMoYSxjLHtkaXNwbGF5Q2xhc3M6dGhpcy5jb250ZW50RGlzcGxheUNsYXNzLGNvbnRhaW5lckVsZW1lbnQ6Yn0pLCJoaWRkZW4iIT1PcGVuTGF5ZXJzLkVsZW1lbnQuZ2V0U3R5bGUodGhpcy5jb250ZW50RGl2LCJvdmVyZmxvdyIpJiZhLmVxdWFscyhkKSYmKGQ9T3BlbkxheWVycy5VdGlsLmdldFNjcm9sbGJhcldpZHRoKCksYy53P2EuaCs9ZDphLncrPWQpLGU9dGhpcy5nZXRTYWZlQ29udGVudFNpemUoYSkpKTt0aGlzLnNldFNpemUoZSl9LHNldEJhY2tncm91bmRDb2xvcjpmdW5jdGlvbihhKXt2b2lkIDAhPWEmJih0aGlzLmJhY2tncm91bmRDb2xvcj0KYSk7bnVsbCE9dGhpcy5kaXYmJih0aGlzLmRpdi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3I9dGhpcy5iYWNrZ3JvdW5kQ29sb3IpfSxzZXRPcGFjaXR5OmZ1bmN0aW9uKGEpe3ZvaWQgMCE9YSYmKHRoaXMub3BhY2l0eT1hKTtudWxsIT10aGlzLmRpdiYmKHRoaXMuZGl2LnN0eWxlLm9wYWNpdHk9dGhpcy5vcGFjaXR5LHRoaXMuZGl2LnN0eWxlLmZpbHRlcj0iYWxwaGEob3BhY2l0eT0iKzEwMCp0aGlzLm9wYWNpdHkrIikiKX0sc2V0Qm9yZGVyOmZ1bmN0aW9uKGEpe3ZvaWQgMCE9YSYmKHRoaXMuYm9yZGVyPWEpO251bGwhPXRoaXMuZGl2JiYodGhpcy5kaXYuc3R5bGUuYm9yZGVyPXRoaXMuYm9yZGVyKX0sc2V0Q29udGVudEhUTUw6ZnVuY3Rpb24oYSl7bnVsbCE9YSYmKHRoaXMuY29udGVudEhUTUw9YSk7bnVsbCE9dGhpcy5jb250ZW50RGl2JiYobnVsbCE9dGhpcy5jb250ZW50SFRNTCYmdGhpcy5jb250ZW50SFRNTCE9dGhpcy5jb250ZW50RGl2LmlubmVySFRNTCkmJih0aGlzLmNvbnRlbnREaXYuaW5uZXJIVE1MPQp0aGlzLmNvbnRlbnRIVE1MLHRoaXMuYXV0b1NpemUmJih0aGlzLnJlZ2lzdGVySW1hZ2VMaXN0ZW5lcnMoKSx0aGlzLnVwZGF0ZVNpemUoKSkpfSxyZWdpc3RlckltYWdlTGlzdGVuZXJzOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPWZ1bmN0aW9uKCl7bnVsbCE9PXRoaXMucG9wdXAuaWQmJih0aGlzLnBvcHVwLnVwZGF0ZVNpemUoKSx0aGlzLnBvcHVwLnZpc2libGUoKSYmdGhpcy5wb3B1cC5wYW5NYXBJZk91dE9mVmlldyYmdGhpcy5wb3B1cC5wYW5JbnRvVmlldygpLE9wZW5MYXllcnMuRXZlbnQuc3RvcE9ic2VydmluZyh0aGlzLmltZywibG9hZCIsdGhpcy5pbWcuX29uSW1nTG9hZCkpfSxiPXRoaXMuY29udGVudERpdi5nZXRFbGVtZW50c0J5VGFnTmFtZSgiaW1nIiksYz0wLGQ9Yi5sZW5ndGg7YzxkO2MrKyl7dmFyIGU9YltjXTtpZigwPT1lLndpZHRofHwwPT1lLmhlaWdodCllLl9vbkltZ0xvYWQ9T3BlbkxheWVycy5GdW5jdGlvbi5iaW5kKGEse3BvcHVwOnRoaXMsaW1nOmV9KSwKT3BlbkxheWVycy5FdmVudC5vYnNlcnZlKGUsImxvYWQiLGUuX29uSW1nTG9hZCl9fSxnZXRTYWZlQ29udGVudFNpemU6ZnVuY3Rpb24oYSl7YT1hLmNsb25lKCk7dmFyIGI9dGhpcy5nZXRDb250ZW50RGl2UGFkZGluZygpLGM9Yi5sZWZ0K2IucmlnaHQsZD1iLnRvcCtiLmJvdHRvbTt0aGlzLmZpeFBhZGRpbmcoKTtjKz10aGlzLnBhZGRpbmcubGVmdCt0aGlzLnBhZGRpbmcucmlnaHQ7ZCs9dGhpcy5wYWRkaW5nLnRvcCt0aGlzLnBhZGRpbmcuYm90dG9tO2lmKHRoaXMuY2xvc2VEaXYpdmFyIGU9cGFyc2VJbnQodGhpcy5jbG9zZURpdi5zdHlsZS53aWR0aCksYz1jKyhlK2IucmlnaHQpO3RoaXMubWluU2l6ZSYmKGEudz1NYXRoLm1heChhLncsdGhpcy5taW5TaXplLnctYyksYS5oPU1hdGgubWF4KGEuaCx0aGlzLm1pblNpemUuaC1kKSk7dGhpcy5tYXhTaXplJiYoYS53PU1hdGgubWluKGEudyx0aGlzLm1heFNpemUudy1jKSxhLmg9TWF0aC5taW4oYS5oLHRoaXMubWF4U2l6ZS5oLQpkKSk7aWYodGhpcy5tYXAmJnRoaXMubWFwLnNpemUpe2U9Yj0wO2lmKHRoaXMua2VlcEluTWFwJiYhdGhpcy5wYW5NYXBJZk91dE9mVmlldylzd2l0Y2goZT10aGlzLm1hcC5nZXRQaXhlbEZyb21Mb25MYXQodGhpcy5sb25sYXQpLHRoaXMucmVsYXRpdmVQb3NpdGlvbil7Y2FzZSAidHIiOmI9ZS54O2U9dGhpcy5tYXAuc2l6ZS5oLWUueTticmVhaztjYXNlICJ0bCI6Yj10aGlzLm1hcC5zaXplLnctZS54O2U9dGhpcy5tYXAuc2l6ZS5oLWUueTticmVhaztjYXNlICJibCI6Yj10aGlzLm1hcC5zaXplLnctZS54O2U9ZS55O2JyZWFrO2Nhc2UgImJyIjpiPWUueDtlPWUueTticmVhaztkZWZhdWx0OmI9ZS54LGU9dGhpcy5tYXAuc2l6ZS5oLWUueX1kPXRoaXMubWFwLnNpemUuaC10aGlzLm1hcC5wYWRkaW5nRm9yUG9wdXBzLnRvcC10aGlzLm1hcC5wYWRkaW5nRm9yUG9wdXBzLmJvdHRvbS1kLWU7YS53PU1hdGgubWluKGEudyx0aGlzLm1hcC5zaXplLnctdGhpcy5tYXAucGFkZGluZ0ZvclBvcHVwcy5sZWZ0LQp0aGlzLm1hcC5wYWRkaW5nRm9yUG9wdXBzLnJpZ2h0LWMtYik7YS5oPU1hdGgubWluKGEuaCxkKX1yZXR1cm4gYX0sZ2V0Q29udGVudERpdlBhZGRpbmc6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLl9jb250ZW50RGl2UGFkZGluZzthfHwobnVsbD09dGhpcy5kaXYucGFyZW50Tm9kZSYmKHRoaXMuZGl2LnN0eWxlLmRpc3BsYXk9Im5vbmUiLGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGhpcy5kaXYpKSx0aGlzLl9jb250ZW50RGl2UGFkZGluZz1hPW5ldyBPcGVuTGF5ZXJzLkJvdW5kcyhPcGVuTGF5ZXJzLkVsZW1lbnQuZ2V0U3R5bGUodGhpcy5jb250ZW50RGl2LCJwYWRkaW5nLWxlZnQiKSxPcGVuTGF5ZXJzLkVsZW1lbnQuZ2V0U3R5bGUodGhpcy5jb250ZW50RGl2LCJwYWRkaW5nLWJvdHRvbSIpLE9wZW5MYXllcnMuRWxlbWVudC5nZXRTdHlsZSh0aGlzLmNvbnRlbnREaXYsInBhZGRpbmctcmlnaHQiKSxPcGVuTGF5ZXJzLkVsZW1lbnQuZ2V0U3R5bGUodGhpcy5jb250ZW50RGl2LAoicGFkZGluZy10b3AiKSksdGhpcy5kaXYucGFyZW50Tm9kZT09ZG9jdW1lbnQuYm9keSYmKGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQodGhpcy5kaXYpLHRoaXMuZGl2LnN0eWxlLmRpc3BsYXk9IiIpKTtyZXR1cm4gYX0sYWRkQ2xvc2VCb3g6ZnVuY3Rpb24oYSl7dGhpcy5jbG9zZURpdj1PcGVuTGF5ZXJzLlV0aWwuY3JlYXRlRGl2KHRoaXMuaWQrIl9jbG9zZSIsbnVsbCx7dzoxNyxoOjE3fSk7dGhpcy5jbG9zZURpdi5jbGFzc05hbWU9Im9sUG9wdXBDbG9zZUJveCI7dmFyIGI9dGhpcy5nZXRDb250ZW50RGl2UGFkZGluZygpO3RoaXMuY2xvc2VEaXYuc3R5bGUucmlnaHQ9Yi5yaWdodCsicHgiO3RoaXMuY2xvc2VEaXYuc3R5bGUudG9wPWIudG9wKyJweCI7dGhpcy5ncm91cERpdi5hcHBlbmRDaGlsZCh0aGlzLmNsb3NlRGl2KTthPWF8fGZ1bmN0aW9uKGEpe3RoaXMuaGlkZSgpO09wZW5MYXllcnMuRXZlbnQuc3RvcChhKX07T3BlbkxheWVycy5FdmVudC5vYnNlcnZlKHRoaXMuY2xvc2VEaXYsCiJ0b3VjaGVuZCIsT3BlbkxheWVycy5GdW5jdGlvbi5iaW5kQXNFdmVudExpc3RlbmVyKGEsdGhpcykpO09wZW5MYXllcnMuRXZlbnQub2JzZXJ2ZSh0aGlzLmNsb3NlRGl2LCJjbGljayIsT3BlbkxheWVycy5GdW5jdGlvbi5iaW5kQXNFdmVudExpc3RlbmVyKGEsdGhpcykpfSxwYW5JbnRvVmlldzpmdW5jdGlvbigpe3ZhciBhPXRoaXMubWFwLmdldFNpemUoKSxiPXRoaXMubWFwLmdldFZpZXdQb3J0UHhGcm9tTGF5ZXJQeChuZXcgT3BlbkxheWVycy5QaXhlbChwYXJzZUludCh0aGlzLmRpdi5zdHlsZS5sZWZ0KSxwYXJzZUludCh0aGlzLmRpdi5zdHlsZS50b3ApKSksYz1iLmNsb25lKCk7Yi54PHRoaXMubWFwLnBhZGRpbmdGb3JQb3B1cHMubGVmdD9jLng9dGhpcy5tYXAucGFkZGluZ0ZvclBvcHVwcy5sZWZ0OmIueCt0aGlzLnNpemUudz5hLnctdGhpcy5tYXAucGFkZGluZ0ZvclBvcHVwcy5yaWdodCYmKGMueD1hLnctdGhpcy5tYXAucGFkZGluZ0ZvclBvcHVwcy5yaWdodC10aGlzLnNpemUudyk7CmIueTx0aGlzLm1hcC5wYWRkaW5nRm9yUG9wdXBzLnRvcD9jLnk9dGhpcy5tYXAucGFkZGluZ0ZvclBvcHVwcy50b3A6Yi55K3RoaXMuc2l6ZS5oPmEuaC10aGlzLm1hcC5wYWRkaW5nRm9yUG9wdXBzLmJvdHRvbSYmKGMueT1hLmgtdGhpcy5tYXAucGFkZGluZ0ZvclBvcHVwcy5ib3R0b20tdGhpcy5zaXplLmgpO3RoaXMubWFwLnBhbihiLngtYy54LGIueS1jLnkpfSxyZWdpc3RlckV2ZW50czpmdW5jdGlvbigpe3RoaXMuZXZlbnRzPW5ldyBPcGVuTGF5ZXJzLkV2ZW50cyh0aGlzLHRoaXMuZGl2LG51bGwsITApO3RoaXMuZXZlbnRzLm9uKHttb3VzZWRvd246dGhpcy5vbm1vdXNlZG93bixtb3VzZW1vdmU6dGhpcy5vbm1vdXNlbW92ZSxtb3VzZXVwOnRoaXMub25tb3VzZXVwLGNsaWNrOnRoaXMub25jbGljayxtb3VzZW91dDp0aGlzLm9ubW91c2VvdXQsZGJsY2xpY2s6dGhpcy5vbmRibGNsaWNrLHRvdWNoc3RhcnQ6ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5FdmVudC5zdG9wKGEsITApfSwKc2NvcGU6dGhpc30pfSxvbm1vdXNlZG93bjpmdW5jdGlvbihhKXt0aGlzLm1vdXNlZG93bj0hMDtPcGVuTGF5ZXJzLkV2ZW50LnN0b3AoYSwhMCl9LG9ubW91c2Vtb3ZlOmZ1bmN0aW9uKGEpe3RoaXMubW91c2Vkb3duJiZPcGVuTGF5ZXJzLkV2ZW50LnN0b3AoYSwhMCl9LG9ubW91c2V1cDpmdW5jdGlvbihhKXt0aGlzLm1vdXNlZG93biYmKHRoaXMubW91c2Vkb3duPSExLE9wZW5MYXllcnMuRXZlbnQuc3RvcChhLCEwKSl9LG9uY2xpY2s6ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5FdmVudC5zdG9wKGEsITApfSxvbm1vdXNlb3V0OmZ1bmN0aW9uKGEpe3RoaXMubW91c2Vkb3duPSExfSxvbmRibGNsaWNrOmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuRXZlbnQuc3RvcChhLCEwKX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Qb3B1cCJ9KTtPcGVuTGF5ZXJzLlBvcHVwLldJRFRIPTIwMDtPcGVuTGF5ZXJzLlBvcHVwLkhFSUdIVD0yMDA7T3BlbkxheWVycy5Qb3B1cC5DT0xPUj0id2hpdGUiOwpPcGVuTGF5ZXJzLlBvcHVwLk9QQUNJVFk9MTtPcGVuTGF5ZXJzLlBvcHVwLkJPUkRFUj0iMHB4IjtPcGVuTGF5ZXJzLlBvcHVwLkFuY2hvcmVkPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Qb3B1cCx7cmVsYXRpdmVQb3NpdGlvbjpudWxsLGtlZXBJbk1hcDohMCxhbmNob3I6bnVsbCxpbml0aWFsaXplOmZ1bmN0aW9uKGEsYixjLGQsZSxmLGcpe09wZW5MYXllcnMuUG9wdXAucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxbYSxiLGMsZCxmLGddKTt0aGlzLmFuY2hvcj1udWxsIT1lP2U6e3NpemU6bmV3IE9wZW5MYXllcnMuU2l6ZSgwLDApLG9mZnNldDpuZXcgT3BlbkxheWVycy5QaXhlbCgwLDApfX0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMucmVsYXRpdmVQb3NpdGlvbj10aGlzLmFuY2hvcj1udWxsO09wZW5MYXllcnMuUG9wdXAucHJvdG90eXBlLmRlc3Ryb3kuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxzaG93OmZ1bmN0aW9uKCl7dGhpcy51cGRhdGVQb3NpdGlvbigpO09wZW5MYXllcnMuUG9wdXAucHJvdG90eXBlLnNob3cuYXBwbHkodGhpcyxhcmd1bWVudHMpfSwKbW92ZVRvOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMucmVsYXRpdmVQb3NpdGlvbjt0aGlzLnJlbGF0aXZlUG9zaXRpb249dGhpcy5jYWxjdWxhdGVSZWxhdGl2ZVBvc2l0aW9uKGEpO09wZW5MYXllcnMuUG9wdXAucHJvdG90eXBlLm1vdmVUby5jYWxsKHRoaXMsdGhpcy5jYWxjdWxhdGVOZXdQeChhKSk7dGhpcy5yZWxhdGl2ZVBvc2l0aW9uIT1iJiZ0aGlzLnVwZGF0ZVJlbGF0aXZlUG9zaXRpb24oKX0sc2V0U2l6ZTpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLlBvcHVwLnByb3RvdHlwZS5zZXRTaXplLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtpZih0aGlzLmxvbmxhdCYmdGhpcy5tYXApe3ZhciBiPXRoaXMubWFwLmdldExheWVyUHhGcm9tTG9uTGF0KHRoaXMubG9ubGF0KTt0aGlzLm1vdmVUbyhiKX19LGNhbGN1bGF0ZVJlbGF0aXZlUG9zaXRpb246ZnVuY3Rpb24oYSl7YT10aGlzLm1hcC5nZXRMb25MYXRGcm9tTGF5ZXJQeChhKTthPXRoaXMubWFwLmdldEV4dGVudCgpLmRldGVybWluZVF1YWRyYW50KGEpOwpyZXR1cm4gT3BlbkxheWVycy5Cb3VuZHMub3Bwb3NpdGVRdWFkcmFudChhKX0sdXBkYXRlUmVsYXRpdmVQb3NpdGlvbjpmdW5jdGlvbigpe30sY2FsY3VsYXRlTmV3UHg6ZnVuY3Rpb24oYSl7YT1hLm9mZnNldCh0aGlzLmFuY2hvci5vZmZzZXQpO3ZhciBiPXRoaXMuc2l6ZXx8dGhpcy5jb250ZW50U2l6ZSxjPSJ0Ij09dGhpcy5yZWxhdGl2ZVBvc2l0aW9uLmNoYXJBdCgwKTthLnkrPWM/LWIuaDp0aGlzLmFuY2hvci5zaXplLmg7Yz0ibCI9PXRoaXMucmVsYXRpdmVQb3NpdGlvbi5jaGFyQXQoMSk7YS54Kz1jPy1iLnc6dGhpcy5hbmNob3Iuc2l6ZS53O3JldHVybiBhfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLlBvcHVwLkFuY2hvcmVkIn0pO09wZW5MYXllcnMuUG9wdXAuRnJhbWVkPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Qb3B1cC5BbmNob3JlZCx7aW1hZ2VTcmM6bnVsbCxpbWFnZVNpemU6bnVsbCxpc0FscGhhSW1hZ2U6ITEscG9zaXRpb25CbG9ja3M6bnVsbCxibG9ja3M6bnVsbCxmaXhlZFJlbGF0aXZlUG9zaXRpb246ITEsaW5pdGlhbGl6ZTpmdW5jdGlvbihhLGIsYyxkLGUsZixnKXtPcGVuTGF5ZXJzLlBvcHVwLkFuY2hvcmVkLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLmZpeGVkUmVsYXRpdmVQb3NpdGlvbiYmKHRoaXMudXBkYXRlUmVsYXRpdmVQb3NpdGlvbigpLHRoaXMuY2FsY3VsYXRlUmVsYXRpdmVQb3NpdGlvbj1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5yZWxhdGl2ZVBvc2l0aW9ufSk7dGhpcy5jb250ZW50RGl2LnN0eWxlLnBvc2l0aW9uPSJhYnNvbHV0ZSI7dGhpcy5jb250ZW50RGl2LnN0eWxlLnpJbmRleD0xO2YmJih0aGlzLmNsb3NlRGl2LnN0eWxlLnpJbmRleD0KMSk7dGhpcy5ncm91cERpdi5zdHlsZS5wb3NpdGlvbj0iYWJzb2x1dGUiO3RoaXMuZ3JvdXBEaXYuc3R5bGUudG9wPSIwcHgiO3RoaXMuZ3JvdXBEaXYuc3R5bGUubGVmdD0iMHB4Ijt0aGlzLmdyb3VwRGl2LnN0eWxlLmhlaWdodD0iMTAwJSI7dGhpcy5ncm91cERpdi5zdHlsZS53aWR0aD0iMTAwJSJ9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmlzQWxwaGFJbWFnZT10aGlzLmltYWdlU2l6ZT10aGlzLmltYWdlU3JjPW51bGw7dGhpcy5maXhlZFJlbGF0aXZlUG9zaXRpb249ITE7dGhpcy5wb3NpdGlvbkJsb2Nrcz1udWxsO2Zvcih2YXIgYT0wO2E8dGhpcy5ibG9ja3MubGVuZ3RoO2ErKyl7dmFyIGI9dGhpcy5ibG9ja3NbYV07Yi5pbWFnZSYmYi5kaXYucmVtb3ZlQ2hpbGQoYi5pbWFnZSk7Yi5pbWFnZT1udWxsO2IuZGl2JiZ0aGlzLmdyb3VwRGl2LnJlbW92ZUNoaWxkKGIuZGl2KTtiLmRpdj1udWxsfXRoaXMuYmxvY2tzPW51bGw7T3BlbkxheWVycy5Qb3B1cC5BbmNob3JlZC5wcm90b3R5cGUuZGVzdHJveS5hcHBseSh0aGlzLAphcmd1bWVudHMpfSxzZXRCYWNrZ3JvdW5kQ29sb3I6ZnVuY3Rpb24oYSl7fSxzZXRCb3JkZXI6ZnVuY3Rpb24oKXt9LHNldE9wYWNpdHk6ZnVuY3Rpb24oYSl7fSxzZXRTaXplOmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuUG9wdXAuQW5jaG9yZWQucHJvdG90eXBlLnNldFNpemUuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMudXBkYXRlQmxvY2tzKCl9LHVwZGF0ZVJlbGF0aXZlUG9zaXRpb246ZnVuY3Rpb24oKXt0aGlzLnBhZGRpbmc9dGhpcy5wb3NpdGlvbkJsb2Nrc1t0aGlzLnJlbGF0aXZlUG9zaXRpb25dLnBhZGRpbmc7aWYodGhpcy5jbG9zZURpdil7dmFyIGE9dGhpcy5nZXRDb250ZW50RGl2UGFkZGluZygpO3RoaXMuY2xvc2VEaXYuc3R5bGUucmlnaHQ9YS5yaWdodCt0aGlzLnBhZGRpbmcucmlnaHQrInB4Ijt0aGlzLmNsb3NlRGl2LnN0eWxlLnRvcD1hLnRvcCt0aGlzLnBhZGRpbmcudG9wKyJweCJ9dGhpcy51cGRhdGVCbG9ja3MoKX0sY2FsY3VsYXRlTmV3UHg6ZnVuY3Rpb24oYSl7dmFyIGI9Ck9wZW5MYXllcnMuUG9wdXAuQW5jaG9yZWQucHJvdG90eXBlLmNhbGN1bGF0ZU5ld1B4LmFwcGx5KHRoaXMsYXJndW1lbnRzKTtyZXR1cm4gYj1iLm9mZnNldCh0aGlzLnBvc2l0aW9uQmxvY2tzW3RoaXMucmVsYXRpdmVQb3NpdGlvbl0ub2Zmc2V0KX0sY3JlYXRlQmxvY2tzOmZ1bmN0aW9uKCl7dGhpcy5ibG9ja3M9W107dmFyIGE9bnVsbCxiO2ZvcihiIGluIHRoaXMucG9zaXRpb25CbG9ja3Mpe2E9YjticmVha31hPXRoaXMucG9zaXRpb25CbG9ja3NbYV07Zm9yKGI9MDtiPGEuYmxvY2tzLmxlbmd0aDtiKyspe3ZhciBjPXt9O3RoaXMuYmxvY2tzLnB1c2goYyk7Yy5kaXY9T3BlbkxheWVycy5VdGlsLmNyZWF0ZURpdih0aGlzLmlkKyJfRnJhbWVEZWNvcmF0aW9uRGl2XyIrYixudWxsLG51bGwsbnVsbCwiYWJzb2x1dGUiLG51bGwsImhpZGRlbiIsbnVsbCk7Yy5pbWFnZT0odGhpcy5pc0FscGhhSW1hZ2U/T3BlbkxheWVycy5VdGlsLmNyZWF0ZUFscGhhSW1hZ2VEaXY6T3BlbkxheWVycy5VdGlsLmNyZWF0ZUltYWdlKSh0aGlzLmlkKwoiX0ZyYW1lRGVjb3JhdGlvbkltZ18iK2IsbnVsbCx0aGlzLmltYWdlU2l6ZSx0aGlzLmltYWdlU3JjLCJhYnNvbHV0ZSIsbnVsbCxudWxsLG51bGwpO2MuZGl2LmFwcGVuZENoaWxkKGMuaW1hZ2UpO3RoaXMuZ3JvdXBEaXYuYXBwZW5kQ2hpbGQoYy5kaXYpfX0sdXBkYXRlQmxvY2tzOmZ1bmN0aW9uKCl7dGhpcy5ibG9ja3N8fHRoaXMuY3JlYXRlQmxvY2tzKCk7aWYodGhpcy5zaXplJiZ0aGlzLnJlbGF0aXZlUG9zaXRpb24pe2Zvcih2YXIgYT10aGlzLnBvc2l0aW9uQmxvY2tzW3RoaXMucmVsYXRpdmVQb3NpdGlvbl0sYj0wO2I8YS5ibG9ja3MubGVuZ3RoO2IrKyl7dmFyIGM9YS5ibG9ja3NbYl0sZD10aGlzLmJsb2Nrc1tiXSxlPWMuYW5jaG9yLmxlZnQsZj1jLmFuY2hvci5ib3R0b20sZz1jLmFuY2hvci5yaWdodCxoPWMuYW5jaG9yLnRvcCxrPWlzTmFOKGMuc2l6ZS53KT90aGlzLnNpemUudy0oZytlKTpjLnNpemUudyxsPWlzTmFOKGMuc2l6ZS5oKT90aGlzLnNpemUuaC0oZisKaCk6Yy5zaXplLmg7ZC5kaXYuc3R5bGUud2lkdGg9KDA+az8wOmspKyJweCI7ZC5kaXYuc3R5bGUuaGVpZ2h0PSgwPmw/MDpsKSsicHgiO2QuZGl2LnN0eWxlLmxlZnQ9bnVsbCE9ZT9lKyJweCI6IiI7ZC5kaXYuc3R5bGUuYm90dG9tPW51bGwhPWY/ZisicHgiOiIiO2QuZGl2LnN0eWxlLnJpZ2h0PW51bGwhPWc/ZysicHgiOiIiO2QuZGl2LnN0eWxlLnRvcD1udWxsIT1oP2grInB4IjoiIjtkLmltYWdlLnN0eWxlLmxlZnQ9Yy5wb3NpdGlvbi54KyJweCI7ZC5pbWFnZS5zdHlsZS50b3A9Yy5wb3NpdGlvbi55KyJweCJ9dGhpcy5jb250ZW50RGl2LnN0eWxlLmxlZnQ9dGhpcy5wYWRkaW5nLmxlZnQrInB4Ijt0aGlzLmNvbnRlbnREaXYuc3R5bGUudG9wPXRoaXMucGFkZGluZy50b3ArInB4In19LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuUG9wdXAuRnJhbWVkIn0pO09wZW5MYXllcnMuRm9ybWF0PU9wZW5MYXllcnMuQ2xhc3Moe29wdGlvbnM6bnVsbCxleHRlcm5hbFByb2plY3Rpb246bnVsbCxpbnRlcm5hbFByb2plY3Rpb246bnVsbCxkYXRhOm51bGwsa2VlcERhdGE6ITEsaW5pdGlhbGl6ZTpmdW5jdGlvbihhKXtPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKHRoaXMsYSk7dGhpcy5vcHRpb25zPWF9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt9LHJlYWQ6ZnVuY3Rpb24oYSl7dGhyb3cgRXJyb3IoIlJlYWQgbm90IGltcGxlbWVudGVkLiIpO30sd3JpdGU6ZnVuY3Rpb24oYSl7dGhyb3cgRXJyb3IoIldyaXRlIG5vdCBpbXBsZW1lbnRlZC4iKTt9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuRm9ybWF0In0pO09wZW5MYXllcnMuRm9ybWF0LkpTT049T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkZvcm1hdCx7aW5kZW50OiIgICAgIixzcGFjZToiICIsbmV3bGluZToiXG4iLGxldmVsOjAscHJldHR5OiExLG5hdGl2ZUpTT046ZnVuY3Rpb24oKXtyZXR1cm4hKCF3aW5kb3cuSlNPTnx8ImZ1bmN0aW9uIiE9dHlwZW9mIEpTT04ucGFyc2V8fCJmdW5jdGlvbiIhPXR5cGVvZiBKU09OLnN0cmluZ2lmeSl9KCkscmVhZDpmdW5jdGlvbihhLGIpe3ZhciBjO2lmKHRoaXMubmF0aXZlSlNPTiljPUpTT04ucGFyc2UoYSxiKTtlbHNlIHRyeXtpZigvXltcXSw6e31cc10qJC8udGVzdChhLnJlcGxhY2UoL1xcWyJcXFwvYmZucnR1XS9nLCJAIikucmVwbGFjZSgvIlteIlxcXG5ccl0qInx0cnVlfGZhbHNlfG51bGx8LT9cZCsoPzpcLlxkKik/KD86W2VFXVsrXC1dP1xkKyk/L2csIl0iKS5yZXBsYWNlKC8oPzpefDp8LCkoPzpccypcWykrL2csIiIpKSYmKGM9ZXZhbCgiKCIrYSsiKSIpLCJmdW5jdGlvbiI9PT0KdHlwZW9mIGIpKXt2YXIgZD1mdW5jdGlvbihhLGMpe2lmKGMmJiJvYmplY3QiPT09dHlwZW9mIGMpZm9yKHZhciBlIGluIGMpYy5oYXNPd25Qcm9wZXJ0eShlKSYmKGNbZV09ZChlLGNbZV0pKTtyZXR1cm4gYihhLGMpfTtjPWQoIiIsYyl9fWNhdGNoKGUpe310aGlzLmtlZXBEYXRhJiYodGhpcy5kYXRhPWMpO3JldHVybiBjfSx3cml0ZTpmdW5jdGlvbihhLGIpe3RoaXMucHJldHR5PSEhYjt2YXIgYz1udWxsLGQ9dHlwZW9mIGE7aWYodGhpcy5zZXJpYWxpemVbZF0pdHJ5e2M9IXRoaXMucHJldHR5JiZ0aGlzLm5hdGl2ZUpTT04/SlNPTi5zdHJpbmdpZnkoYSk6dGhpcy5zZXJpYWxpemVbZF0uYXBwbHkodGhpcyxbYV0pfWNhdGNoKGUpe09wZW5MYXllcnMuQ29uc29sZS5lcnJvcigiVHJvdWJsZSBzZXJpYWxpemluZzogIitlKX1yZXR1cm4gY30sd3JpdGVJbmRlbnQ6ZnVuY3Rpb24oKXt2YXIgYT1bXTtpZih0aGlzLnByZXR0eSlmb3IodmFyIGI9MDtiPHRoaXMubGV2ZWw7KytiKWEucHVzaCh0aGlzLmluZGVudCk7CnJldHVybiBhLmpvaW4oIiIpfSx3cml0ZU5ld2xpbmU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wcmV0dHk/dGhpcy5uZXdsaW5lOiIifSx3cml0ZVNwYWNlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHJldHR5P3RoaXMuc3BhY2U6IiJ9LHNlcmlhbGl6ZTp7b2JqZWN0OmZ1bmN0aW9uKGEpe2lmKG51bGw9PWEpcmV0dXJuIm51bGwiO2lmKGEuY29uc3RydWN0b3I9PURhdGUpcmV0dXJuIHRoaXMuc2VyaWFsaXplLmRhdGUuYXBwbHkodGhpcyxbYV0pO2lmKGEuY29uc3RydWN0b3I9PUFycmF5KXJldHVybiB0aGlzLnNlcmlhbGl6ZS5hcnJheS5hcHBseSh0aGlzLFthXSk7dmFyIGI9WyJ7Il07dGhpcy5sZXZlbCs9MTt2YXIgYyxkLGUsZj0hMTtmb3IoYyBpbiBhKWEuaGFzT3duUHJvcGVydHkoYykmJihkPU9wZW5MYXllcnMuRm9ybWF0LkpTT04ucHJvdG90eXBlLndyaXRlLmFwcGx5KHRoaXMsW2MsdGhpcy5wcmV0dHldKSxlPU9wZW5MYXllcnMuRm9ybWF0LkpTT04ucHJvdG90eXBlLndyaXRlLmFwcGx5KHRoaXMsClthW2NdLHRoaXMucHJldHR5XSksbnVsbCE9ZCYmbnVsbCE9ZSYmKGYmJmIucHVzaCgiLCIpLGIucHVzaCh0aGlzLndyaXRlTmV3bGluZSgpLHRoaXMud3JpdGVJbmRlbnQoKSxkLCI6Iix0aGlzLndyaXRlU3BhY2UoKSxlKSxmPSEwKSk7dGhpcy5sZXZlbC09MTtiLnB1c2godGhpcy53cml0ZU5ld2xpbmUoKSx0aGlzLndyaXRlSW5kZW50KCksIn0iKTtyZXR1cm4gYi5qb2luKCIiKX0sYXJyYXk6ZnVuY3Rpb24oYSl7dmFyIGIsYz1bIlsiXTt0aGlzLmxldmVsKz0xO2Zvcih2YXIgZD0wLGU9YS5sZW5ndGg7ZDxlOysrZCliPU9wZW5MYXllcnMuRm9ybWF0LkpTT04ucHJvdG90eXBlLndyaXRlLmFwcGx5KHRoaXMsW2FbZF0sdGhpcy5wcmV0dHldKSxudWxsIT1iJiYoMDxkJiZjLnB1c2goIiwiKSxjLnB1c2godGhpcy53cml0ZU5ld2xpbmUoKSx0aGlzLndyaXRlSW5kZW50KCksYikpO3RoaXMubGV2ZWwtPTE7Yy5wdXNoKHRoaXMud3JpdGVOZXdsaW5lKCksdGhpcy53cml0ZUluZGVudCgpLAoiXSIpO3JldHVybiBjLmpvaW4oIiIpfSxzdHJpbmc6ZnVuY3Rpb24oYSl7dmFyIGI9eyJcYiI6IlxcYiIsIlx0IjoiXFx0IiwiXG4iOiJcXG4iLCJcZiI6IlxcZiIsIlxyIjoiXFxyIiwnIic6J1xcIicsIlxcIjoiXFxcXCJ9O3JldHVybi9bIlxcXHgwMC1ceDFmXS8udGVzdChhKT8nIicrYS5yZXBsYWNlKC8oW1x4MDAtXHgxZlxcIl0pL2csZnVuY3Rpb24oYSxkKXt2YXIgZT1iW2RdO2lmKGUpcmV0dXJuIGU7ZT1kLmNoYXJDb2RlQXQoKTtyZXR1cm4iXFx1MDAiK01hdGguZmxvb3IoZS8xNikudG9TdHJpbmcoMTYpKyhlJTE2KS50b1N0cmluZygxNil9KSsnIic6JyInK2ErJyInfSxudW1iZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIGlzRmluaXRlKGEpP1N0cmluZyhhKToibnVsbCJ9LCJib29sZWFuIjpmdW5jdGlvbihhKXtyZXR1cm4gU3RyaW5nKGEpfSxkYXRlOmZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7cmV0dXJuIDEwPmE/IjAiK2E6YX1yZXR1cm4nIicrYS5nZXRGdWxsWWVhcigpKwoiLSIrYihhLmdldE1vbnRoKCkrMSkrIi0iK2IoYS5nZXREYXRlKCkpKyJUIitiKGEuZ2V0SG91cnMoKSkrIjoiK2IoYS5nZXRNaW51dGVzKCkpKyI6IitiKGEuZ2V0U2Vjb25kcygpKSsnIid9fSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkZvcm1hdC5KU09OIn0pO09wZW5MYXllcnMuRm9ybWF0Lkdlb0pTT049T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLkZvcm1hdC5KU09OLHtpZ25vcmVFeHRyYURpbXM6ITEscmVhZDpmdW5jdGlvbihhLGIsYyl7Yj1iP2I6IkZlYXR1cmVDb2xsZWN0aW9uIjt2YXIgZD1udWxsLGU9bnVsbCxlPSJzdHJpbmciPT10eXBlb2YgYT9PcGVuTGF5ZXJzLkZvcm1hdC5KU09OLnByb3RvdHlwZS5yZWFkLmFwcGx5KHRoaXMsW2EsY10pOmE7aWYoIWUpT3BlbkxheWVycy5Db25zb2xlLmVycm9yKCJCYWQgSlNPTjogIithKTtlbHNlIGlmKCJzdHJpbmciIT10eXBlb2YgZS50eXBlKU9wZW5MYXllcnMuQ29uc29sZS5lcnJvcigiQmFkIEdlb0pTT04gLSBubyB0eXBlOiAiK2EpO2Vsc2UgaWYodGhpcy5pc1ZhbGlkVHlwZShlLGIpKXN3aXRjaChiKXtjYXNlICJHZW9tZXRyeSI6dHJ5e2Q9dGhpcy5wYXJzZUdlb21ldHJ5KGUpfWNhdGNoKGYpe09wZW5MYXllcnMuQ29uc29sZS5lcnJvcihmKX1icmVhaztjYXNlICJGZWF0dXJlIjp0cnl7ZD0KdGhpcy5wYXJzZUZlYXR1cmUoZSksZC50eXBlPSJGZWF0dXJlIn1jYXRjaChnKXtPcGVuTGF5ZXJzLkNvbnNvbGUuZXJyb3IoZyl9YnJlYWs7Y2FzZSAiRmVhdHVyZUNvbGxlY3Rpb24iOnN3aXRjaChkPVtdLGUudHlwZSl7Y2FzZSAiRmVhdHVyZSI6dHJ5e2QucHVzaCh0aGlzLnBhcnNlRmVhdHVyZShlKSl9Y2F0Y2goaCl7ZD1udWxsLE9wZW5MYXllcnMuQ29uc29sZS5lcnJvcihoKX1icmVhaztjYXNlICJGZWF0dXJlQ29sbGVjdGlvbiI6YT0wO2ZvcihiPWUuZmVhdHVyZXMubGVuZ3RoO2E8YjsrK2EpdHJ5e2QucHVzaCh0aGlzLnBhcnNlRmVhdHVyZShlLmZlYXR1cmVzW2FdKSl9Y2F0Y2goayl7ZD1udWxsLE9wZW5MYXllcnMuQ29uc29sZS5lcnJvcihrKX1icmVhaztkZWZhdWx0OnRyeXt2YXIgbD10aGlzLnBhcnNlR2VvbWV0cnkoZSk7ZC5wdXNoKG5ldyBPcGVuTGF5ZXJzLkZlYXR1cmUuVmVjdG9yKGwpKX1jYXRjaChtKXtkPW51bGwsT3BlbkxheWVycy5Db25zb2xlLmVycm9yKG0pfX19cmV0dXJuIGR9LAppc1ZhbGlkVHlwZTpmdW5jdGlvbihhLGIpe3ZhciBjPSExO3N3aXRjaChiKXtjYXNlICJHZW9tZXRyeSI6LTE9PU9wZW5MYXllcnMuVXRpbC5pbmRleE9mKCJQb2ludCBNdWx0aVBvaW50IExpbmVTdHJpbmcgTXVsdGlMaW5lU3RyaW5nIFBvbHlnb24gTXVsdGlQb2x5Z29uIEJveCBHZW9tZXRyeUNvbGxlY3Rpb24iLnNwbGl0KCIgIiksYS50eXBlKT9PcGVuTGF5ZXJzLkNvbnNvbGUuZXJyb3IoIlVuc3VwcG9ydGVkIGdlb21ldHJ5IHR5cGU6ICIrYS50eXBlKTpjPSEwO2JyZWFrO2Nhc2UgIkZlYXR1cmVDb2xsZWN0aW9uIjpjPSEwO2JyZWFrO2RlZmF1bHQ6YS50eXBlPT1iP2M9ITA6T3BlbkxheWVycy5Db25zb2xlLmVycm9yKCJDYW5ub3QgY29udmVydCB0eXBlcyBmcm9tICIrYS50eXBlKyIgdG8gIitiKX1yZXR1cm4gY30scGFyc2VGZWF0dXJlOmZ1bmN0aW9uKGEpe3ZhciBiLGMsZDtjPWEucHJvcGVydGllcz9hLnByb3BlcnRpZXM6e307ZD1hLmdlb21ldHJ5JiZhLmdlb21ldHJ5LmJib3h8fAphLmJib3g7dHJ5e2I9dGhpcy5wYXJzZUdlb21ldHJ5KGEuZ2VvbWV0cnkpfWNhdGNoKGUpe3Rocm93IGU7fWI9bmV3IE9wZW5MYXllcnMuRmVhdHVyZS5WZWN0b3IoYixjKTtkJiYoYi5ib3VuZHM9T3BlbkxheWVycy5Cb3VuZHMuZnJvbUFycmF5KGQpKTthLmlkJiYoYi5maWQ9YS5pZCk7cmV0dXJuIGJ9LHBhcnNlR2VvbWV0cnk6ZnVuY3Rpb24oYSl7aWYobnVsbD09YSlyZXR1cm4gbnVsbDt2YXIgYixjPSExO2lmKCJHZW9tZXRyeUNvbGxlY3Rpb24iPT1hLnR5cGUpe2lmKCFPcGVuTGF5ZXJzLlV0aWwuaXNBcnJheShhLmdlb21ldHJpZXMpKXRocm93Ikdlb21ldHJ5Q29sbGVjdGlvbiBtdXN0IGhhdmUgZ2VvbWV0cmllcyBhcnJheTogIithO2I9YS5nZW9tZXRyaWVzLmxlbmd0aDtmb3IodmFyIGM9QXJyYXkoYiksZD0wO2Q8YjsrK2QpY1tkXT10aGlzLnBhcnNlR2VvbWV0cnkuYXBwbHkodGhpcyxbYS5nZW9tZXRyaWVzW2RdXSk7Yj1uZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Db2xsZWN0aW9uKGMpOwpjPSEwfWVsc2V7aWYoIU9wZW5MYXllcnMuVXRpbC5pc0FycmF5KGEuY29vcmRpbmF0ZXMpKXRocm93Ikdlb21ldHJ5IG11c3QgaGF2ZSBjb29yZGluYXRlcyBhcnJheTogIithO2lmKCF0aGlzLnBhcnNlQ29vcmRzW2EudHlwZS50b0xvd2VyQ2FzZSgpXSl0aHJvdyJVbnN1cHBvcnRlZCBnZW9tZXRyeSB0eXBlOiAiK2EudHlwZTt0cnl7Yj10aGlzLnBhcnNlQ29vcmRzW2EudHlwZS50b0xvd2VyQ2FzZSgpXS5hcHBseSh0aGlzLFthLmNvb3JkaW5hdGVzXSl9Y2F0Y2goZSl7dGhyb3cgZTt9fXRoaXMuaW50ZXJuYWxQcm9qZWN0aW9uJiYodGhpcy5leHRlcm5hbFByb2plY3Rpb24mJiFjKSYmYi50cmFuc2Zvcm0odGhpcy5leHRlcm5hbFByb2plY3Rpb24sdGhpcy5pbnRlcm5hbFByb2plY3Rpb24pO3JldHVybiBifSxwYXJzZUNvb3Jkczp7cG9pbnQ6ZnVuY3Rpb24oYSl7aWYoITE9PXRoaXMuaWdub3JlRXh0cmFEaW1zJiYyIT1hLmxlbmd0aCl0aHJvdyJPbmx5IDJEIHBvaW50cyBhcmUgc3VwcG9ydGVkOiAiKwphO3JldHVybiBuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludChhWzBdLGFbMV0pfSxtdWx0aXBvaW50OmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1bXSxjPW51bGwsZD0wLGU9YS5sZW5ndGg7ZDxlOysrZCl7dHJ5e2M9dGhpcy5wYXJzZUNvb3Jkcy5wb2ludC5hcHBseSh0aGlzLFthW2RdXSl9Y2F0Y2goZil7dGhyb3cgZjt9Yi5wdXNoKGMpfXJldHVybiBuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5NdWx0aVBvaW50KGIpfSxsaW5lc3RyaW5nOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1bXSxjPW51bGwsZD0wLGU9YS5sZW5ndGg7ZDxlOysrZCl7dHJ5e2M9dGhpcy5wYXJzZUNvb3Jkcy5wb2ludC5hcHBseSh0aGlzLFthW2RdXSl9Y2F0Y2goZil7dGhyb3cgZjt9Yi5wdXNoKGMpfXJldHVybiBuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5MaW5lU3RyaW5nKGIpfSxtdWx0aWxpbmVzdHJpbmc6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPVtdLGM9bnVsbCxkPTAsZT1hLmxlbmd0aDtkPGU7KytkKXt0cnl7Yz0KdGhpcy5wYXJzZUNvb3Jkcy5saW5lc3RyaW5nLmFwcGx5KHRoaXMsW2FbZF1dKX1jYXRjaChmKXt0aHJvdyBmO31iLnB1c2goYyl9cmV0dXJuIG5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5Lk11bHRpTGluZVN0cmluZyhiKX0scG9seWdvbjpmdW5jdGlvbihhKXtmb3IodmFyIGI9W10sYyxkLGU9MCxmPWEubGVuZ3RoO2U8ZjsrK2Upe3RyeXtkPXRoaXMucGFyc2VDb29yZHMubGluZXN0cmluZy5hcHBseSh0aGlzLFthW2VdXSl9Y2F0Y2goZyl7dGhyb3cgZzt9Yz1uZXcgT3BlbkxheWVycy5HZW9tZXRyeS5MaW5lYXJSaW5nKGQuY29tcG9uZW50cyk7Yi5wdXNoKGMpfXJldHVybiBuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2x5Z29uKGIpfSxtdWx0aXBvbHlnb246ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPVtdLGM9bnVsbCxkPTAsZT1hLmxlbmd0aDtkPGU7KytkKXt0cnl7Yz10aGlzLnBhcnNlQ29vcmRzLnBvbHlnb24uYXBwbHkodGhpcyxbYVtkXV0pfWNhdGNoKGYpe3Rocm93IGY7fWIucHVzaChjKX1yZXR1cm4gbmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuTXVsdGlQb2x5Z29uKGIpfSwKYm94OmZ1bmN0aW9uKGEpe2lmKDIhPWEubGVuZ3RoKXRocm93Ikdlb0pTT04gYm94IGNvb3JkaW5hdGVzIG11c3QgaGF2ZSAyIGVsZW1lbnRzIjtyZXR1cm4gbmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9seWdvbihbbmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuTGluZWFyUmluZyhbbmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoYVswXVswXSxhWzBdWzFdKSxuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludChhWzFdWzBdLGFbMF1bMV0pLG5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KGFbMV1bMF0sYVsxXVsxXSksbmV3IE9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQoYVswXVswXSxhWzFdWzFdKSxuZXcgT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludChhWzBdWzBdLGFbMF1bMV0pXSldKX19LHdyaXRlOmZ1bmN0aW9uKGEsYil7dmFyIGM9e3R5cGU6bnVsbH07aWYoT3BlbkxheWVycy5VdGlsLmlzQXJyYXkoYSkpe2MudHlwZT0iRmVhdHVyZUNvbGxlY3Rpb24iO3ZhciBkPQphLmxlbmd0aDtjLmZlYXR1cmVzPUFycmF5KGQpO2Zvcih2YXIgZT0wO2U8ZDsrK2Upe3ZhciBmPWFbZV07aWYoIWYgaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLkZlYXR1cmUuVmVjdG9yKXRocm93IkZlYXR1cmVDb2xsZWN0aW9uIG9ubHkgc3VwcG9ydHMgY29sbGVjdGlvbnMgb2YgZmVhdHVyZXM6ICIrZjtjLmZlYXR1cmVzW2VdPXRoaXMuZXh0cmFjdC5mZWF0dXJlLmFwcGx5KHRoaXMsW2ZdKX19ZWxzZSAwPT1hLkNMQVNTX05BTUUuaW5kZXhPZigiT3BlbkxheWVycy5HZW9tZXRyeSIpP2M9dGhpcy5leHRyYWN0Lmdlb21ldHJ5LmFwcGx5KHRoaXMsW2FdKTphIGluc3RhbmNlb2YgT3BlbkxheWVycy5GZWF0dXJlLlZlY3RvciYmKGM9dGhpcy5leHRyYWN0LmZlYXR1cmUuYXBwbHkodGhpcyxbYV0pLGEubGF5ZXImJmEubGF5ZXIucHJvamVjdGlvbiYmKGMuY3JzPXRoaXMuY3JlYXRlQ1JTT2JqZWN0KGEpKSk7cmV0dXJuIE9wZW5MYXllcnMuRm9ybWF0LkpTT04ucHJvdG90eXBlLndyaXRlLmFwcGx5KHRoaXMsCltjLGJdKX0sY3JlYXRlQ1JTT2JqZWN0OmZ1bmN0aW9uKGEpe2E9YS5sYXllci5wcm9qZWN0aW9uLnRvU3RyaW5nKCk7dmFyIGI9e307YS5tYXRjaCgvZXBzZzovaSkmJihhPXBhcnNlSW50KGEuc3Vic3RyaW5nKGEuaW5kZXhPZigiOiIpKzEpKSxiPTQzMjY9PWE/e3R5cGU6Im5hbWUiLHByb3BlcnRpZXM6e25hbWU6InVybjpvZ2M6ZGVmOmNyczpPR0M6MS4zOkNSUzg0In19Ont0eXBlOiJuYW1lIixwcm9wZXJ0aWVzOntuYW1lOiJFUFNHOiIrYX19KTtyZXR1cm4gYn0sZXh0cmFjdDp7ZmVhdHVyZTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmV4dHJhY3QuZ2VvbWV0cnkuYXBwbHkodGhpcyxbYS5nZW9tZXRyeV0pLGI9e3R5cGU6IkZlYXR1cmUiLHByb3BlcnRpZXM6YS5hdHRyaWJ1dGVzLGdlb21ldHJ5OmJ9O251bGwhPWEuZmlkJiYoYi5pZD1hLmZpZCk7cmV0dXJuIGJ9LGdlb21ldHJ5OmZ1bmN0aW9uKGEpe2lmKG51bGw9PWEpcmV0dXJuIG51bGw7dGhpcy5pbnRlcm5hbFByb2plY3Rpb24mJgp0aGlzLmV4dGVybmFsUHJvamVjdGlvbiYmKGE9YS5jbG9uZSgpLGEudHJhbnNmb3JtKHRoaXMuaW50ZXJuYWxQcm9qZWN0aW9uLHRoaXMuZXh0ZXJuYWxQcm9qZWN0aW9uKSk7dmFyIGI9YS5DTEFTU19OQU1FLnNwbGl0KCIuIilbMl07YT10aGlzLmV4dHJhY3RbYi50b0xvd2VyQ2FzZSgpXS5hcHBseSh0aGlzLFthXSk7cmV0dXJuIkNvbGxlY3Rpb24iPT1iP3t0eXBlOiJHZW9tZXRyeUNvbGxlY3Rpb24iLGdlb21ldHJpZXM6YX06e3R5cGU6Yixjb29yZGluYXRlczphfX0scG9pbnQ6ZnVuY3Rpb24oYSl7cmV0dXJuW2EueCxhLnldfSxtdWx0aXBvaW50OmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1bXSxjPTAsZD1hLmNvbXBvbmVudHMubGVuZ3RoO2M8ZDsrK2MpYi5wdXNoKHRoaXMuZXh0cmFjdC5wb2ludC5hcHBseSh0aGlzLFthLmNvbXBvbmVudHNbY11dKSk7cmV0dXJuIGJ9LGxpbmVzdHJpbmc6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPVtdLGM9MCxkPWEuY29tcG9uZW50cy5sZW5ndGg7YzwKZDsrK2MpYi5wdXNoKHRoaXMuZXh0cmFjdC5wb2ludC5hcHBseSh0aGlzLFthLmNvbXBvbmVudHNbY11dKSk7cmV0dXJuIGJ9LG11bHRpbGluZXN0cmluZzpmdW5jdGlvbihhKXtmb3IodmFyIGI9W10sYz0wLGQ9YS5jb21wb25lbnRzLmxlbmd0aDtjPGQ7KytjKWIucHVzaCh0aGlzLmV4dHJhY3QubGluZXN0cmluZy5hcHBseSh0aGlzLFthLmNvbXBvbmVudHNbY11dKSk7cmV0dXJuIGJ9LHBvbHlnb246ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPVtdLGM9MCxkPWEuY29tcG9uZW50cy5sZW5ndGg7YzxkOysrYyliLnB1c2godGhpcy5leHRyYWN0LmxpbmVzdHJpbmcuYXBwbHkodGhpcyxbYS5jb21wb25lbnRzW2NdXSkpO3JldHVybiBifSxtdWx0aXBvbHlnb246ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPVtdLGM9MCxkPWEuY29tcG9uZW50cy5sZW5ndGg7YzxkOysrYyliLnB1c2godGhpcy5leHRyYWN0LnBvbHlnb24uYXBwbHkodGhpcyxbYS5jb21wb25lbnRzW2NdXSkpO3JldHVybiBifSxjb2xsZWN0aW9uOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0KYS5jb21wb25lbnRzLmxlbmd0aCxjPUFycmF5KGIpLGQ9MDtkPGI7KytkKWNbZF09dGhpcy5leHRyYWN0Lmdlb21ldHJ5LmFwcGx5KHRoaXMsW2EuY29tcG9uZW50c1tkXV0pO3JldHVybiBjfX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Gb3JtYXQuR2VvSlNPTiJ9KTtPcGVuTGF5ZXJzLkxheWVyLkdvb2dsZS52Mz17REVGQVVMVFM6e3NwaGVyaWNhbE1lcmNhdG9yOiEwLHByb2plY3Rpb246IkVQU0c6OTAwOTEzIn0sYW5pbWF0aW9uRW5hYmxlZDohMCxsb2FkTWFwT2JqZWN0OmZ1bmN0aW9uKCl7dGhpcy50eXBlfHwodGhpcy50eXBlPWdvb2dsZS5tYXBzLk1hcFR5cGVJZC5ST0FETUFQKTt2YXIgYSxiPU9wZW5MYXllcnMuTGF5ZXIuR29vZ2xlLmNhY2hlW3RoaXMubWFwLmlkXTtiPyhhPWIubWFwT2JqZWN0LCsrYi5jb3VudCk6KGE9dGhpcy5tYXAuZ2V0Q2VudGVyKCksYj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKSxiLmNsYXNzTmFtZT0ib2xGb3JlaWduQ29udGFpbmVyIixiLnN0eWxlLndpZHRoPSIxMDAlIixiLnN0eWxlLmhlaWdodD0iMTAwJSIsYT1uZXcgZ29vZ2xlLm1hcHMuTWFwKGIse2NlbnRlcjphP25ldyBnb29nbGUubWFwcy5MYXRMbmcoYS5sYXQsYS5sb24pOm5ldyBnb29nbGUubWFwcy5MYXRMbmcoMCwwKSx6b29tOnRoaXMubWFwLmdldFpvb20oKXx8CjAsbWFwVHlwZUlkOnRoaXMudHlwZSxkaXNhYmxlRGVmYXVsdFVJOiEwLGtleWJvYXJkU2hvcnRjdXRzOiExLGRyYWdnYWJsZTohMSxkaXNhYmxlRG91YmxlQ2xpY2tab29tOiEwLHNjcm9sbHdoZWVsOiExLHN0cmVldFZpZXdDb250cm9sOiExfSksYj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKSxiLnN0eWxlLndpZHRoPSIxMDAlIixiLnN0eWxlLmhlaWdodD0iMTAwJSIsYS5jb250cm9sc1tnb29nbGUubWFwcy5Db250cm9sUG9zaXRpb24uVE9QX0xFRlRdLnB1c2goYiksYj17Z29vZ2xlQ29udHJvbDpiLG1hcE9iamVjdDphLGNvdW50OjF9LE9wZW5MYXllcnMuTGF5ZXIuR29vZ2xlLmNhY2hlW3RoaXMubWFwLmlkXT1iKTt0aGlzLm1hcE9iamVjdD1hO3RoaXMuc2V0R01hcFZpc2liaWxpdHkodGhpcy52aXNpYmlsaXR5KX0sb25NYXBSZXNpemU6ZnVuY3Rpb24oKXt0aGlzLnZpc2liaWxpdHkmJmdvb2dsZS5tYXBzLmV2ZW50LnRyaWdnZXIodGhpcy5tYXBPYmplY3QsInJlc2l6ZSIpfSwKc2V0R01hcFZpc2liaWxpdHk6ZnVuY3Rpb24oYSl7dmFyIGI9T3BlbkxheWVycy5MYXllci5Hb29nbGUuY2FjaGVbdGhpcy5tYXAuaWRdLGM9dGhpcy5tYXA7aWYoYil7Zm9yKHZhciBkPXRoaXMudHlwZSxlPWMubGF5ZXJzLGYsZz1lLmxlbmd0aC0xOzA8PWc7LS1nKWlmKGY9ZVtnXSxmIGluc3RhbmNlb2YgT3BlbkxheWVycy5MYXllci5Hb29nbGUmJiEwPT09Zi52aXNpYmlsaXR5JiYhMD09PWYuaW5SYW5nZSl7ZD1mLnR5cGU7YT0hMDticmVha31lPXRoaXMubWFwT2JqZWN0LmdldERpdigpO2lmKCEwPT09YSl7aWYoZS5wYXJlbnROb2RlIT09Yy5kaXYpaWYoYi5yZW5kZXJlZCljLmRpdi5hcHBlbmRDaGlsZChlKSxiLmdvb2dsZUNvbnRyb2wuYXBwZW5kQ2hpbGQoYy52aWV3UG9ydERpdiksZ29vZ2xlLm1hcHMuZXZlbnQudHJpZ2dlcih0aGlzLm1hcE9iamVjdCwicmVzaXplIik7ZWxzZXt2YXIgaD10aGlzO2dvb2dsZS5tYXBzLmV2ZW50LmFkZExpc3RlbmVyT25jZSh0aGlzLm1hcE9iamVjdCwKInRpbGVzbG9hZGVkIixmdW5jdGlvbigpe2IucmVuZGVyZWQ9ITA7aC5zZXRHTWFwVmlzaWJpbGl0eShoLmdldFZpc2liaWxpdHkoKSk7aC5tb3ZlVG8oaC5tYXAuZ2V0Q2VudGVyKCkpfSl9dGhpcy5tYXBPYmplY3Quc2V0TWFwVHlwZUlkKGQpfWVsc2UgYi5nb29nbGVDb250cm9sLmhhc0NoaWxkTm9kZXMoKSYmKGMuZGl2LmFwcGVuZENoaWxkKGMudmlld1BvcnREaXYpLGMuZGl2LnJlbW92ZUNoaWxkKGUpKX19LGdldE1hcENvbnRhaW5lcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1hcE9iamVjdC5nZXREaXYoKX0sZ2V0TWFwT2JqZWN0Qm91bmRzRnJvbU9MQm91bmRzOmZ1bmN0aW9uKGEpe3ZhciBiPW51bGw7bnVsbCE9YSYmKGI9dGhpcy5zcGhlcmljYWxNZXJjYXRvcj90aGlzLmludmVyc2VNZXJjYXRvcihhLmJvdHRvbSxhLmxlZnQpOm5ldyBPcGVuTGF5ZXJzLkxvbkxhdChhLmJvdHRvbSxhLmxlZnQpLGE9dGhpcy5zcGhlcmljYWxNZXJjYXRvcj90aGlzLmludmVyc2VNZXJjYXRvcihhLnRvcCwKYS5yaWdodCk6bmV3IE9wZW5MYXllcnMuTG9uTGF0KGEudG9wLGEucmlnaHQpLGI9bmV3IGdvb2dsZS5tYXBzLkxhdExuZ0JvdW5kcyhuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nKGIubGF0LGIubG9uKSxuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nKGEubGF0LGEubG9uKSkpO3JldHVybiBifSxnZXRNYXBPYmplY3RMb25MYXRGcm9tTWFwT2JqZWN0UGl4ZWw6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5tYXAuZ2V0U2l6ZSgpLGM9dGhpcy5nZXRMb25naXR1ZGVGcm9tTWFwT2JqZWN0TG9uTGF0KHRoaXMubWFwT2JqZWN0LmNlbnRlciksZD10aGlzLmdldExhdGl0dWRlRnJvbU1hcE9iamVjdExvbkxhdCh0aGlzLm1hcE9iamVjdC5jZW50ZXIpLGU9dGhpcy5tYXAuZ2V0UmVzb2x1dGlvbigpO2E9bmV3IE9wZW5MYXllcnMuTG9uTGF0KGMrKGEueC1iLncvMikqZSxkLShhLnktYi5oLzIpKmUpO3RoaXMud3JhcERhdGVMaW5lJiYoYT1hLndyYXBEYXRlTGluZSh0aGlzLm1heEV4dGVudCkpO3JldHVybiB0aGlzLmdldE1hcE9iamVjdExvbkxhdEZyb21Mb25MYXQoYS5sb24sCmEubGF0KX0sZ2V0TWFwT2JqZWN0UGl4ZWxGcm9tTWFwT2JqZWN0TG9uTGF0OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZ2V0TG9uZ2l0dWRlRnJvbU1hcE9iamVjdExvbkxhdChhKTthPXRoaXMuZ2V0TGF0aXR1ZGVGcm9tTWFwT2JqZWN0TG9uTGF0KGEpO3ZhciBjPXRoaXMubWFwLmdldFJlc29sdXRpb24oKSxkPXRoaXMubWFwLmdldEV4dGVudCgpO3JldHVybiB0aGlzLmdldE1hcE9iamVjdFBpeGVsRnJvbVhZKDEvYyooYi1kLmxlZnQpLDEvYyooZC50b3AtYSkpfSxzZXRNYXBPYmplY3RDZW50ZXI6ZnVuY3Rpb24oYSxiKXtpZighMT09PXRoaXMuYW5pbWF0aW9uRW5hYmxlZCYmYiE9dGhpcy5tYXBPYmplY3Quem9vbSl7dmFyIGM9dGhpcy5nZXRNYXBDb250YWluZXIoKTtnb29nbGUubWFwcy5ldmVudC5hZGRMaXN0ZW5lck9uY2UodGhpcy5tYXBPYmplY3QsImlkbGUiLGZ1bmN0aW9uKCl7Yy5zdHlsZS52aXNpYmlsaXR5PSIifSk7Yy5zdHlsZS52aXNpYmlsaXR5PSJoaWRkZW4ifXRoaXMubWFwT2JqZWN0LnNldE9wdGlvbnMoe2NlbnRlcjphLAp6b29tOmJ9KX0sZ2V0TWFwT2JqZWN0Wm9vbUZyb21NYXBPYmplY3RCb3VuZHM6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMubWFwT2JqZWN0LmdldEJvdW5kc1pvb21MZXZlbChhKX0sZ2V0TWFwT2JqZWN0TG9uTGF0RnJvbUxvbkxhdDpmdW5jdGlvbihhLGIpe3ZhciBjO3RoaXMuc3BoZXJpY2FsTWVyY2F0b3I/KGM9dGhpcy5pbnZlcnNlTWVyY2F0b3IoYSxiKSxjPW5ldyBnb29nbGUubWFwcy5MYXRMbmcoYy5sYXQsYy5sb24pKTpjPW5ldyBnb29nbGUubWFwcy5MYXRMbmcoYixhKTtyZXR1cm4gY30sZ2V0TWFwT2JqZWN0UGl4ZWxGcm9tWFk6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbmV3IGdvb2dsZS5tYXBzLlBvaW50KGEsYil9fTtPcGVuTGF5ZXJzLlByb3h5SG9zdD0iIjtPcGVuTGF5ZXJzLlJlcXVlc3R8fChPcGVuTGF5ZXJzLlJlcXVlc3Q9e30pOwpPcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKE9wZW5MYXllcnMuUmVxdWVzdCx7REVGQVVMVF9DT05GSUc6e21ldGhvZDoiR0VUIix1cmw6d2luZG93LmxvY2F0aW9uLmhyZWYsYXN5bmM6ITAsdXNlcjp2b2lkIDAscGFzc3dvcmQ6dm9pZCAwLHBhcmFtczpudWxsLHByb3h5Ok9wZW5MYXllcnMuUHJveHlIb3N0LGhlYWRlcnM6e30sZGF0YTpudWxsLGNhbGxiYWNrOmZ1bmN0aW9uKCl7fSxzdWNjZXNzOm51bGwsZmFpbHVyZTpudWxsLHNjb3BlOm51bGx9LFVSTF9TUExJVF9SRUdFWDovKFteOl0qOilcL1wvKFteOl0qOj9bXkBdKkApPyhbXjpcL1w/XSopOj8oW15cL1w/XSopLyxldmVudHM6bmV3IE9wZW5MYXllcnMuRXZlbnRzKHRoaXMpLG1ha2VTYW1lT3JpZ2luOmZ1bmN0aW9uKGEsYil7dmFyIGM9MCE9PWEuaW5kZXhPZigiaHR0cCIpLGQ9IWMmJmEubWF0Y2godGhpcy5VUkxfU1BMSVRfUkVHRVgpO2lmKGQpe3ZhciBlPXdpbmRvdy5sb2NhdGlvbixjPWRbMV09PWUucHJvdG9jb2wmJmRbM109PQplLmhvc3RuYW1lLGQ9ZFs0XSxlPWUucG9ydDtpZig4MCE9ZCYmIiIhPWR8fCI4MCIhPWUmJiIiIT1lKWM9YyYmZD09ZX1jfHxiJiYoYT0iZnVuY3Rpb24iPT10eXBlb2YgYj9iKGEpOmIrZW5jb2RlVVJJQ29tcG9uZW50KGEpKTtyZXR1cm4gYX0saXNzdWU6ZnVuY3Rpb24oYSl7dmFyIGI9T3BlbkxheWVycy5VdGlsLmV4dGVuZCh0aGlzLkRFRkFVTFRfQ09ORklHLHtwcm94eTpPcGVuTGF5ZXJzLlByb3h5SG9zdH0pO2E9YXx8e307YS5oZWFkZXJzPWEuaGVhZGVyc3x8e307YT1PcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyhhLGIpO2EuaGVhZGVycz1PcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyhhLmhlYWRlcnMsYi5oZWFkZXJzKTt2YXIgYj0hMSxjO2ZvcihjIGluIGEuaGVhZGVycylhLmhlYWRlcnMuaGFzT3duUHJvcGVydHkoYykmJiJ4LXJlcXVlc3RlZC13aXRoIj09PWMudG9Mb3dlckNhc2UoKSYmKGI9ITApOyExPT09YiYmKGEuaGVhZGVyc1siWC1SZXF1ZXN0ZWQtV2l0aCJdPQoiWE1MSHR0cFJlcXVlc3QiKTt2YXIgZD1uZXcgT3BlbkxheWVycy5SZXF1ZXN0LlhNTEh0dHBSZXF1ZXN0LGU9T3BlbkxheWVycy5VdGlsLnVybEFwcGVuZChhLnVybCxPcGVuTGF5ZXJzLlV0aWwuZ2V0UGFyYW1ldGVyU3RyaW5nKGEucGFyYW1zfHx7fSkpLGU9T3BlbkxheWVycy5SZXF1ZXN0Lm1ha2VTYW1lT3JpZ2luKGUsYS5wcm94eSk7ZC5vcGVuKGEubWV0aG9kLGUsYS5hc3luYyxhLnVzZXIsYS5wYXNzd29yZCk7Zm9yKHZhciBmIGluIGEuaGVhZGVycylkLnNldFJlcXVlc3RIZWFkZXIoZixhLmhlYWRlcnNbZl0pO3ZhciBnPXRoaXMuZXZlbnRzLGg9dGhpcztkLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpe2QucmVhZHlTdGF0ZT09T3BlbkxheWVycy5SZXF1ZXN0LlhNTEh0dHBSZXF1ZXN0LkRPTkUmJiExIT09Zy50cmlnZ2VyRXZlbnQoImNvbXBsZXRlIix7cmVxdWVzdDpkLGNvbmZpZzphLHJlcXVlc3RVcmw6ZX0pJiZoLnJ1bkNhbGxiYWNrcyh7cmVxdWVzdDpkLGNvbmZpZzphLApyZXF1ZXN0VXJsOmV9KX07ITE9PT1hLmFzeW5jP2Quc2VuZChhLmRhdGEpOndpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7MCE9PWQucmVhZHlTdGF0ZSYmZC5zZW5kKGEuZGF0YSl9LDApO3JldHVybiBkfSxydW5DYWxsYmFja3M6ZnVuY3Rpb24oYSl7dmFyIGI9YS5yZXF1ZXN0LGM9YS5jb25maWcsZD1jLnNjb3BlP09wZW5MYXllcnMuRnVuY3Rpb24uYmluZChjLmNhbGxiYWNrLGMuc2NvcGUpOmMuY2FsbGJhY2ssZTtjLnN1Y2Nlc3MmJihlPWMuc2NvcGU/T3BlbkxheWVycy5GdW5jdGlvbi5iaW5kKGMuc3VjY2VzcyxjLnNjb3BlKTpjLnN1Y2Nlc3MpO3ZhciBmO2MuZmFpbHVyZSYmKGY9Yy5zY29wZT9PcGVuTGF5ZXJzLkZ1bmN0aW9uLmJpbmQoYy5mYWlsdXJlLGMuc2NvcGUpOmMuZmFpbHVyZSk7ImZpbGU6Ij09T3BlbkxheWVycy5VdGlsLmNyZWF0ZVVybE9iamVjdChjLnVybCkucHJvdG9jb2wmJmIucmVzcG9uc2VUZXh0JiYoYi5zdGF0dXM9MjAwKTtkKGIpO2lmKCFiLnN0YXR1c3x8CjIwMDw9Yi5zdGF0dXMmJjMwMD5iLnN0YXR1cyl0aGlzLmV2ZW50cy50cmlnZ2VyRXZlbnQoInN1Y2Nlc3MiLGEpLGUmJmUoYik7Yi5zdGF0dXMmJigyMDA+Yi5zdGF0dXN8fDMwMDw9Yi5zdGF0dXMpJiYodGhpcy5ldmVudHMudHJpZ2dlckV2ZW50KCJmYWlsdXJlIixhKSxmJiZmKGIpKX0sR0VUOmZ1bmN0aW9uKGEpe2E9T3BlbkxheWVycy5VdGlsLmV4dGVuZChhLHttZXRob2Q6IkdFVCJ9KTtyZXR1cm4gT3BlbkxheWVycy5SZXF1ZXN0Lmlzc3VlKGEpfSxQT1NUOmZ1bmN0aW9uKGEpe2E9T3BlbkxheWVycy5VdGlsLmV4dGVuZChhLHttZXRob2Q6IlBPU1QifSk7YS5oZWFkZXJzPWEuaGVhZGVycz9hLmhlYWRlcnM6e307IkNPTlRFTlQtVFlQRSJpbiBPcGVuTGF5ZXJzLlV0aWwudXBwZXJDYXNlT2JqZWN0KGEuaGVhZGVycyl8fChhLmhlYWRlcnNbIkNvbnRlbnQtVHlwZSJdPSJhcHBsaWNhdGlvbi94bWwiKTtyZXR1cm4gT3BlbkxheWVycy5SZXF1ZXN0Lmlzc3VlKGEpfSxQVVQ6ZnVuY3Rpb24oYSl7YT0KT3BlbkxheWVycy5VdGlsLmV4dGVuZChhLHttZXRob2Q6IlBVVCJ9KTthLmhlYWRlcnM9YS5oZWFkZXJzP2EuaGVhZGVyczp7fTsiQ09OVEVOVC1UWVBFImluIE9wZW5MYXllcnMuVXRpbC51cHBlckNhc2VPYmplY3QoYS5oZWFkZXJzKXx8KGEuaGVhZGVyc1siQ29udGVudC1UeXBlIl09ImFwcGxpY2F0aW9uL3htbCIpO3JldHVybiBPcGVuTGF5ZXJzLlJlcXVlc3QuaXNzdWUoYSl9LERFTEVURTpmdW5jdGlvbihhKXthPU9wZW5MYXllcnMuVXRpbC5leHRlbmQoYSx7bWV0aG9kOiJERUxFVEUifSk7cmV0dXJuIE9wZW5MYXllcnMuUmVxdWVzdC5pc3N1ZShhKX0sSEVBRDpmdW5jdGlvbihhKXthPU9wZW5MYXllcnMuVXRpbC5leHRlbmQoYSx7bWV0aG9kOiJIRUFEIn0pO3JldHVybiBPcGVuTGF5ZXJzLlJlcXVlc3QuaXNzdWUoYSl9LE9QVElPTlM6ZnVuY3Rpb24oYSl7YT1PcGVuTGF5ZXJzLlV0aWwuZXh0ZW5kKGEse21ldGhvZDoiT1BUSU9OUyJ9KTtyZXR1cm4gT3BlbkxheWVycy5SZXF1ZXN0Lmlzc3VlKGEpfX0pOyhmdW5jdGlvbigpe2Z1bmN0aW9uIGEoKXt0aGlzLl9vYmplY3Q9ZiYmIWs/bmV3IGY6bmV3IHdpbmRvdy5BY3RpdmVYT2JqZWN0KCJNaWNyb3NvZnQuWE1MSFRUUCIpO3RoaXMuX2xpc3RlbmVycz1bXX1mdW5jdGlvbiBiKCl7cmV0dXJuIG5ldyBhfWZ1bmN0aW9uIGMoYSl7Yi5vbnJlYWR5c3RhdGVjaGFuZ2UmJmIub25yZWFkeXN0YXRlY2hhbmdlLmFwcGx5KGEpO2EuZGlzcGF0Y2hFdmVudCh7dHlwZToicmVhZHlzdGF0ZWNoYW5nZSIsYnViYmxlczohMSxjYW5jZWxhYmxlOiExLHRpbWVTdGFtcDpuZXcgRGF0ZSswfSl9ZnVuY3Rpb24gZChhKXt0cnl7YS5yZXNwb25zZVRleHQ9YS5fb2JqZWN0LnJlc3BvbnNlVGV4dH1jYXRjaChiKXt9dHJ5e3ZhciBjO3ZhciBkPWEuX29iamVjdCxlPWQucmVzcG9uc2VYTUwsZj1kLnJlc3BvbnNlVGV4dDtoJiYoZiYmZSYmIWUuZG9jdW1lbnRFbGVtZW50JiZkLmdldFJlc3BvbnNlSGVhZGVyKCJDb250ZW50LVR5cGUiKS5tYXRjaCgvW15cL10rXC9bXlwrXStcK3htbC8pKSYmCihlPW5ldyB3aW5kb3cuQWN0aXZlWE9iamVjdCgiTWljcm9zb2Z0LlhNTERPTSIpLGUuYXN5bmM9ITEsZS52YWxpZGF0ZU9uUGFyc2U9ITEsZS5sb2FkWE1MKGYpKTtjPWUmJihoJiYwIT1lLnBhcnNlRXJyb3J8fCFlLmRvY3VtZW50RWxlbWVudHx8ZS5kb2N1bWVudEVsZW1lbnQmJiJwYXJzZXJlcnJvciI9PWUuZG9jdW1lbnRFbGVtZW50LnRhZ05hbWUpP251bGw6ZTthLnJlc3BvbnNlWE1MPWN9Y2F0Y2goZyl7fXRyeXthLnN0YXR1cz1hLl9vYmplY3Quc3RhdHVzfWNhdGNoKGspe310cnl7YS5zdGF0dXNUZXh0PWEuX29iamVjdC5zdGF0dXNUZXh0fWNhdGNoKHUpe319ZnVuY3Rpb24gZShhKXthLl9vYmplY3Qub25yZWFkeXN0YXRlY2hhbmdlPW5ldyB3aW5kb3cuRnVuY3Rpb259dmFyIGY9d2luZG93LlhNTEh0dHBSZXF1ZXN0LGc9ISF3aW5kb3cuY29udHJvbGxlcnMsaD13aW5kb3cuZG9jdW1lbnQuYWxsJiYhd2luZG93Lm9wZXJhLGs9aCYmd2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL01TSUUgNy4wLyk7CmIucHJvdG90eXBlPWEucHJvdG90eXBlO2cmJmYud3JhcHBlZCYmKGIud3JhcHBlZD1mLndyYXBwZWQpO2IuVU5TRU5UPTA7Yi5PUEVORUQ9MTtiLkhFQURFUlNfUkVDRUlWRUQ9MjtiLkxPQURJTkc9MztiLkRPTkU9NDtiLnByb3RvdHlwZS5yZWFkeVN0YXRlPWIuVU5TRU5UO2IucHJvdG90eXBlLnJlc3BvbnNlVGV4dD0iIjtiLnByb3RvdHlwZS5yZXNwb25zZVhNTD1udWxsO2IucHJvdG90eXBlLnN0YXR1cz0wO2IucHJvdG90eXBlLnN0YXR1c1RleHQ9IiI7Yi5wcm90b3R5cGUucHJpb3JpdHk9Ik5PUk1BTCI7Yi5wcm90b3R5cGUub25yZWFkeXN0YXRlY2hhbmdlPW51bGw7Yi5vbnJlYWR5c3RhdGVjaGFuZ2U9bnVsbDtiLm9ub3Blbj1udWxsO2Iub25zZW5kPW51bGw7Yi5vbmFib3J0PW51bGw7Yi5wcm90b3R5cGUub3Blbj1mdW5jdGlvbihhLGYsayxwLG4pe2RlbGV0ZSB0aGlzLl9oZWFkZXJzOzM+YXJndW1lbnRzLmxlbmd0aCYmKGs9ITApO3RoaXMuX2FzeW5jPWs7dmFyIHE9dGhpcywKcz10aGlzLnJlYWR5U3RhdGUsdDtoJiZrJiYodD1mdW5jdGlvbigpe3MhPWIuRE9ORSYmKGUocSkscS5hYm9ydCgpKX0sd2luZG93LmF0dGFjaEV2ZW50KCJvbnVubG9hZCIsdCkpO2Iub25vcGVuJiZiLm9ub3Blbi5hcHBseSh0aGlzLGFyZ3VtZW50cyk7NDxhcmd1bWVudHMubGVuZ3RoP3RoaXMuX29iamVjdC5vcGVuKGEsZixrLHAsbik6Mzxhcmd1bWVudHMubGVuZ3RoP3RoaXMuX29iamVjdC5vcGVuKGEsZixrLHApOnRoaXMuX29iamVjdC5vcGVuKGEsZixrKTt0aGlzLnJlYWR5U3RhdGU9Yi5PUEVORUQ7Yyh0aGlzKTt0aGlzLl9vYmplY3Qub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7aWYoIWd8fGspcS5yZWFkeVN0YXRlPXEuX29iamVjdC5yZWFkeVN0YXRlLGQocSkscS5fYWJvcnRlZD9xLnJlYWR5U3RhdGU9Yi5VTlNFTlQ6KHEucmVhZHlTdGF0ZT09Yi5ET05FJiYoZGVsZXRlIHEuX2RhdGEsZShxKSxoJiZrJiZ3aW5kb3cuZGV0YWNoRXZlbnQoIm9udW5sb2FkIix0KSksCnMhPXEucmVhZHlTdGF0ZSYmYyhxKSxzPXEucmVhZHlTdGF0ZSl9fTtiLnByb3RvdHlwZS5zZW5kPWZ1bmN0aW9uKGEpe2Iub25zZW5kJiZiLm9uc2VuZC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7YXJndW1lbnRzLmxlbmd0aHx8KGE9bnVsbCk7YSYmYS5ub2RlVHlwZSYmKGE9d2luZG93LlhNTFNlcmlhbGl6ZXI/KG5ldyB3aW5kb3cuWE1MU2VyaWFsaXplcikuc2VyaWFsaXplVG9TdHJpbmcoYSk6YS54bWwsdGhpcy5faGVhZGVyc1siQ29udGVudC1UeXBlIl18fHRoaXMuX29iamVjdC5zZXRSZXF1ZXN0SGVhZGVyKCJDb250ZW50LVR5cGUiLCJhcHBsaWNhdGlvbi94bWwiKSk7dGhpcy5fZGF0YT1hO2E6aWYodGhpcy5fb2JqZWN0LnNlbmQodGhpcy5fZGF0YSksZyYmIXRoaXMuX2FzeW5jKWZvcih0aGlzLnJlYWR5U3RhdGU9Yi5PUEVORUQsZCh0aGlzKTt0aGlzLnJlYWR5U3RhdGU8Yi5ET05FOylpZih0aGlzLnJlYWR5U3RhdGUrKyxjKHRoaXMpLHRoaXMuX2Fib3J0ZWQpYnJlYWsgYX07CmIucHJvdG90eXBlLmFib3J0PWZ1bmN0aW9uKCl7Yi5vbmFib3J0JiZiLm9uYWJvcnQuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMucmVhZHlTdGF0ZT5iLlVOU0VOVCYmKHRoaXMuX2Fib3J0ZWQ9ITApO3RoaXMuX29iamVjdC5hYm9ydCgpO2UodGhpcyk7dGhpcy5yZWFkeVN0YXRlPWIuVU5TRU5UO2RlbGV0ZSB0aGlzLl9kYXRhfTtiLnByb3RvdHlwZS5nZXRBbGxSZXNwb25zZUhlYWRlcnM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb2JqZWN0LmdldEFsbFJlc3BvbnNlSGVhZGVycygpfTtiLnByb3RvdHlwZS5nZXRSZXNwb25zZUhlYWRlcj1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5fb2JqZWN0LmdldFJlc3BvbnNlSGVhZGVyKGEpfTtiLnByb3RvdHlwZS5zZXRSZXF1ZXN0SGVhZGVyPWZ1bmN0aW9uKGEsYil7dGhpcy5faGVhZGVyc3x8KHRoaXMuX2hlYWRlcnM9e30pO3RoaXMuX2hlYWRlcnNbYV09YjtyZXR1cm4gdGhpcy5fb2JqZWN0LnNldFJlcXVlc3RIZWFkZXIoYSxiKX07CmIucHJvdG90eXBlLmFkZEV2ZW50TGlzdGVuZXI9ZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZD0wLGU7ZT10aGlzLl9saXN0ZW5lcnNbZF07ZCsrKWlmKGVbMF09PWEmJmVbMV09PWImJmVbMl09PWMpcmV0dXJuO3RoaXMuX2xpc3RlbmVycy5wdXNoKFthLGIsY10pfTtiLnByb3RvdHlwZS5yZW1vdmVFdmVudExpc3RlbmVyPWZ1bmN0aW9uKGEsYixjKXtmb3IodmFyIGQ9MCxlOyhlPXRoaXMuX2xpc3RlbmVyc1tkXSkmJihlWzBdIT1hfHxlWzFdIT1ifHxlWzJdIT1jKTtkKyspO2UmJnRoaXMuX2xpc3RlbmVycy5zcGxpY2UoZCwxKX07Yi5wcm90b3R5cGUuZGlzcGF0Y2hFdmVudD1mdW5jdGlvbihhKXthPXt0eXBlOmEudHlwZSx0YXJnZXQ6dGhpcyxjdXJyZW50VGFyZ2V0OnRoaXMsZXZlbnRQaGFzZToyLGJ1YmJsZXM6YS5idWJibGVzLGNhbmNlbGFibGU6YS5jYW5jZWxhYmxlLHRpbWVTdGFtcDphLnRpbWVTdGFtcCxzdG9wUHJvcGFnYXRpb246ZnVuY3Rpb24oKXt9LHByZXZlbnREZWZhdWx0OmZ1bmN0aW9uKCl7fSwKaW5pdEV2ZW50OmZ1bmN0aW9uKCl7fX07InJlYWR5c3RhdGVjaGFuZ2UiPT1hLnR5cGUmJnRoaXMub25yZWFkeXN0YXRlY2hhbmdlJiYodGhpcy5vbnJlYWR5c3RhdGVjaGFuZ2UuaGFuZGxlRXZlbnR8fHRoaXMub25yZWFkeXN0YXRlY2hhbmdlKS5hcHBseSh0aGlzLFthXSk7Zm9yKHZhciBiPTAsYztjPXRoaXMuX2xpc3RlbmVyc1tiXTtiKyspY1swXSE9YS50eXBlfHxjWzJdfHwoY1sxXS5oYW5kbGVFdmVudHx8Y1sxXSkuYXBwbHkodGhpcyxbYV0pfTtiLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiJbb2JqZWN0IFhNTEh0dHBSZXF1ZXN0XSJ9O2IudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4iW1hNTEh0dHBSZXF1ZXN0XSJ9O3dpbmRvdy5GdW5jdGlvbi5wcm90b3R5cGUuYXBwbHl8fCh3aW5kb3cuRnVuY3Rpb24ucHJvdG90eXBlLmFwcGx5PWZ1bmN0aW9uKGEsYil7Ynx8KGI9W10pO2EuX19mdW5jPXRoaXM7YS5fX2Z1bmMoYlswXSxiWzFdLGJbMl0sYlszXSwKYls0XSk7ZGVsZXRlIGEuX19mdW5jfSk7T3BlbkxheWVycy5SZXF1ZXN0fHwoT3BlbkxheWVycy5SZXF1ZXN0PXt9KTtPcGVuTGF5ZXJzLlJlcXVlc3QuWE1MSHR0cFJlcXVlc3Q9Yn0pKCk7T3BlbkxheWVycy5GaWx0ZXIuQ29tcGFyaXNvbj1PcGVuTGF5ZXJzLkNsYXNzKE9wZW5MYXllcnMuRmlsdGVyLHt0eXBlOm51bGwscHJvcGVydHk6bnVsbCx2YWx1ZTpudWxsLG1hdGNoQ2FzZTohMCxsb3dlckJvdW5kYXJ5Om51bGwsdXBwZXJCb3VuZGFyeTpudWxsLGluaXRpYWxpemU6ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5GaWx0ZXIucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxbYV0pO3RoaXMudHlwZT09PU9wZW5MYXllcnMuRmlsdGVyLkNvbXBhcmlzb24uTElLRSYmdm9pZCAwPT09YS5tYXRjaENhc2UmJih0aGlzLm1hdGNoQ2FzZT1udWxsKX0sZXZhbHVhdGU6ZnVuY3Rpb24oYSl7YSBpbnN0YW5jZW9mIE9wZW5MYXllcnMuRmVhdHVyZS5WZWN0b3ImJihhPWEuYXR0cmlidXRlcyk7dmFyIGI9ITE7YT1hW3RoaXMucHJvcGVydHldO3N3aXRjaCh0aGlzLnR5cGUpe2Nhc2UgT3BlbkxheWVycy5GaWx0ZXIuQ29tcGFyaXNvbi5FUVVBTF9UTzpiPXRoaXMudmFsdWU7CmI9dGhpcy5tYXRjaENhc2V8fCJzdHJpbmciIT10eXBlb2YgYXx8InN0cmluZyIhPXR5cGVvZiBiP2E9PWI6YS50b1VwcGVyQ2FzZSgpPT1iLnRvVXBwZXJDYXNlKCk7YnJlYWs7Y2FzZSBPcGVuTGF5ZXJzLkZpbHRlci5Db21wYXJpc29uLk5PVF9FUVVBTF9UTzpiPXRoaXMudmFsdWU7Yj10aGlzLm1hdGNoQ2FzZXx8InN0cmluZyIhPXR5cGVvZiBhfHwic3RyaW5nIiE9dHlwZW9mIGI/YSE9YjphLnRvVXBwZXJDYXNlKCkhPWIudG9VcHBlckNhc2UoKTticmVhaztjYXNlIE9wZW5MYXllcnMuRmlsdGVyLkNvbXBhcmlzb24uTEVTU19USEFOOmI9YTx0aGlzLnZhbHVlO2JyZWFrO2Nhc2UgT3BlbkxheWVycy5GaWx0ZXIuQ29tcGFyaXNvbi5HUkVBVEVSX1RIQU46Yj1hPnRoaXMudmFsdWU7YnJlYWs7Y2FzZSBPcGVuTGF5ZXJzLkZpbHRlci5Db21wYXJpc29uLkxFU1NfVEhBTl9PUl9FUVVBTF9UTzpiPWE8PXRoaXMudmFsdWU7YnJlYWs7Y2FzZSBPcGVuTGF5ZXJzLkZpbHRlci5Db21wYXJpc29uLkdSRUFURVJfVEhBTl9PUl9FUVVBTF9UTzpiPQphPj10aGlzLnZhbHVlO2JyZWFrO2Nhc2UgT3BlbkxheWVycy5GaWx0ZXIuQ29tcGFyaXNvbi5CRVRXRUVOOmI9YT49dGhpcy5sb3dlckJvdW5kYXJ5JiZhPD10aGlzLnVwcGVyQm91bmRhcnk7YnJlYWs7Y2FzZSBPcGVuTGF5ZXJzLkZpbHRlci5Db21wYXJpc29uLkxJS0U6Yj1SZWdFeHAodGhpcy52YWx1ZSwiZ2kiKS50ZXN0KGEpO2JyZWFrO2Nhc2UgT3BlbkxheWVycy5GaWx0ZXIuQ29tcGFyaXNvbi5JU19OVUxMOmI9bnVsbD09PWF9cmV0dXJuIGJ9LHZhbHVlMnJlZ2V4OmZ1bmN0aW9uKGEsYixjKXtpZigiLiI9PWEpdGhyb3cgRXJyb3IoIicuJyBpcyBhbiB1bnN1cHBvcnRlZCB3aWxkQ2FyZCBjaGFyYWN0ZXIgZm9yIE9wZW5MYXllcnMuRmlsdGVyLkNvbXBhcmlzb24iKTthPWE/YToiKiI7Yj1iP2I6Ii4iO3RoaXMudmFsdWU9dGhpcy52YWx1ZS5yZXBsYWNlKFJlZ0V4cCgiXFwiKyhjP2M6IiEiKSsiKC58JCkiLCJnIiksIlxcJDEiKTt0aGlzLnZhbHVlPXRoaXMudmFsdWUucmVwbGFjZShSZWdFeHAoIlxcIisKYiwiZyIpLCIuIik7dGhpcy52YWx1ZT10aGlzLnZhbHVlLnJlcGxhY2UoUmVnRXhwKCJcXCIrYSwiZyIpLCIuKiIpO3RoaXMudmFsdWU9dGhpcy52YWx1ZS5yZXBsYWNlKFJlZ0V4cCgiXFxcXC5cXCoiLCJnIiksIlxcIithKTtyZXR1cm4gdGhpcy52YWx1ZT10aGlzLnZhbHVlLnJlcGxhY2UoUmVnRXhwKCJcXFxcXFwuIiwiZyIpLCJcXCIrYil9LHJlZ2V4MnZhbHVlOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy52YWx1ZSxhPWEucmVwbGFjZSgvIS9nLCIhISIpLGE9YS5yZXBsYWNlKC8oXFwpP1xcXC4vZyxmdW5jdGlvbihhLGMpe3JldHVybiBjP2E6IiEuIn0pLGE9YS5yZXBsYWNlKC8oXFwpP1xcXCovZyxmdW5jdGlvbihhLGMpe3JldHVybiBjP2E6IiEqIn0pLGE9YS5yZXBsYWNlKC9cXFxcL2csIlxcIik7cmV0dXJuIGE9YS5yZXBsYWNlKC9cLlwqL2csIioiKX0sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gT3BlbkxheWVycy5VdGlsLmV4dGVuZChuZXcgT3BlbkxheWVycy5GaWx0ZXIuQ29tcGFyaXNvbiwKdGhpcyl9LENMQVNTX05BTUU6Ik9wZW5MYXllcnMuRmlsdGVyLkNvbXBhcmlzb24ifSk7T3BlbkxheWVycy5GaWx0ZXIuQ29tcGFyaXNvbi5FUVVBTF9UTz0iPT0iO09wZW5MYXllcnMuRmlsdGVyLkNvbXBhcmlzb24uTk9UX0VRVUFMX1RPPSIhPSI7T3BlbkxheWVycy5GaWx0ZXIuQ29tcGFyaXNvbi5MRVNTX1RIQU49IjwiO09wZW5MYXllcnMuRmlsdGVyLkNvbXBhcmlzb24uR1JFQVRFUl9USEFOPSI+IjtPcGVuTGF5ZXJzLkZpbHRlci5Db21wYXJpc29uLkxFU1NfVEhBTl9PUl9FUVVBTF9UTz0iPD0iO09wZW5MYXllcnMuRmlsdGVyLkNvbXBhcmlzb24uR1JFQVRFUl9USEFOX09SX0VRVUFMX1RPPSI+PSI7T3BlbkxheWVycy5GaWx0ZXIuQ29tcGFyaXNvbi5CRVRXRUVOPSIuLiI7T3BlbkxheWVycy5GaWx0ZXIuQ29tcGFyaXNvbi5MSUtFPSJ+IjtPcGVuTGF5ZXJzLkZpbHRlci5Db21wYXJpc29uLklTX05VTEw9Ik5VTEwiO09wZW5MYXllcnMuUG9wdXAuRnJhbWVkQ2xvdWQ9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLlBvcHVwLkZyYW1lZCx7Y29udGVudERpc3BsYXlDbGFzczoib2xGcmFtZWRDbG91ZFBvcHVwQ29udGVudCIsYXV0b1NpemU6ITAscGFuTWFwSWZPdXRPZlZpZXc6ITAsaW1hZ2VTaXplOm5ldyBPcGVuTGF5ZXJzLlNpemUoMTI3Niw3MzYpLGlzQWxwaGFJbWFnZTohMSxmaXhlZFJlbGF0aXZlUG9zaXRpb246ITEscG9zaXRpb25CbG9ja3M6e3RsOntvZmZzZXQ6bmV3IE9wZW5MYXllcnMuUGl4ZWwoNDQsMCkscGFkZGluZzpuZXcgT3BlbkxheWVycy5Cb3VuZHMoOCw0MCw4LDkpLGJsb2Nrczpbe3NpemU6bmV3IE9wZW5MYXllcnMuU2l6ZSgiYXV0byIsImF1dG8iKSxhbmNob3I6bmV3IE9wZW5MYXllcnMuQm91bmRzKDAsNTEsMjIsMCkscG9zaXRpb246bmV3IE9wZW5MYXllcnMuUGl4ZWwoMCwwKX0se3NpemU6bmV3IE9wZW5MYXllcnMuU2l6ZSgyMiwiYXV0byIpLGFuY2hvcjpuZXcgT3BlbkxheWVycy5Cb3VuZHMobnVsbCwKNTAsMCwwKSxwb3NpdGlvbjpuZXcgT3BlbkxheWVycy5QaXhlbCgtMTIzOCwwKX0se3NpemU6bmV3IE9wZW5MYXllcnMuU2l6ZSgiYXV0byIsMTkpLGFuY2hvcjpuZXcgT3BlbkxheWVycy5Cb3VuZHMoMCwzMiwyMixudWxsKSxwb3NpdGlvbjpuZXcgT3BlbkxheWVycy5QaXhlbCgwLC02MzEpfSx7c2l6ZTpuZXcgT3BlbkxheWVycy5TaXplKDIyLDE4KSxhbmNob3I6bmV3IE9wZW5MYXllcnMuQm91bmRzKG51bGwsMzIsMCxudWxsKSxwb3NpdGlvbjpuZXcgT3BlbkxheWVycy5QaXhlbCgtMTIzOCwtNjMyKX0se3NpemU6bmV3IE9wZW5MYXllcnMuU2l6ZSg4MSwzNSksYW5jaG9yOm5ldyBPcGVuTGF5ZXJzLkJvdW5kcyhudWxsLDAsMCxudWxsKSxwb3NpdGlvbjpuZXcgT3BlbkxheWVycy5QaXhlbCgwLC02ODgpfV19LHRyOntvZmZzZXQ6bmV3IE9wZW5MYXllcnMuUGl4ZWwoLTQ1LDApLHBhZGRpbmc6bmV3IE9wZW5MYXllcnMuQm91bmRzKDgsNDAsOCw5KSxibG9ja3M6W3tzaXplOm5ldyBPcGVuTGF5ZXJzLlNpemUoImF1dG8iLAoiYXV0byIpLGFuY2hvcjpuZXcgT3BlbkxheWVycy5Cb3VuZHMoMCw1MSwyMiwwKSxwb3NpdGlvbjpuZXcgT3BlbkxheWVycy5QaXhlbCgwLDApfSx7c2l6ZTpuZXcgT3BlbkxheWVycy5TaXplKDIyLCJhdXRvIiksYW5jaG9yOm5ldyBPcGVuTGF5ZXJzLkJvdW5kcyhudWxsLDUwLDAsMCkscG9zaXRpb246bmV3IE9wZW5MYXllcnMuUGl4ZWwoLTEyMzgsMCl9LHtzaXplOm5ldyBPcGVuTGF5ZXJzLlNpemUoImF1dG8iLDE5KSxhbmNob3I6bmV3IE9wZW5MYXllcnMuQm91bmRzKDAsMzIsMjIsbnVsbCkscG9zaXRpb246bmV3IE9wZW5MYXllcnMuUGl4ZWwoMCwtNjMxKX0se3NpemU6bmV3IE9wZW5MYXllcnMuU2l6ZSgyMiwxOSksYW5jaG9yOm5ldyBPcGVuTGF5ZXJzLkJvdW5kcyhudWxsLDMyLDAsbnVsbCkscG9zaXRpb246bmV3IE9wZW5MYXllcnMuUGl4ZWwoLTEyMzgsLTYzMSl9LHtzaXplOm5ldyBPcGVuTGF5ZXJzLlNpemUoODEsMzUpLGFuY2hvcjpuZXcgT3BlbkxheWVycy5Cb3VuZHMoMCwKMCxudWxsLG51bGwpLHBvc2l0aW9uOm5ldyBPcGVuTGF5ZXJzLlBpeGVsKC0yMTUsLTY4Nyl9XX0sYmw6e29mZnNldDpuZXcgT3BlbkxheWVycy5QaXhlbCg0NSwwKSxwYWRkaW5nOm5ldyBPcGVuTGF5ZXJzLkJvdW5kcyg4LDksOCw0MCksYmxvY2tzOlt7c2l6ZTpuZXcgT3BlbkxheWVycy5TaXplKCJhdXRvIiwiYXV0byIpLGFuY2hvcjpuZXcgT3BlbkxheWVycy5Cb3VuZHMoMCwyMSwyMiwzMikscG9zaXRpb246bmV3IE9wZW5MYXllcnMuUGl4ZWwoMCwwKX0se3NpemU6bmV3IE9wZW5MYXllcnMuU2l6ZSgyMiwiYXV0byIpLGFuY2hvcjpuZXcgT3BlbkxheWVycy5Cb3VuZHMobnVsbCwyMSwwLDMyKSxwb3NpdGlvbjpuZXcgT3BlbkxheWVycy5QaXhlbCgtMTIzOCwwKX0se3NpemU6bmV3IE9wZW5MYXllcnMuU2l6ZSgiYXV0byIsMjEpLGFuY2hvcjpuZXcgT3BlbkxheWVycy5Cb3VuZHMoMCwwLDIyLG51bGwpLHBvc2l0aW9uOm5ldyBPcGVuTGF5ZXJzLlBpeGVsKDAsLTYyOSl9LHtzaXplOm5ldyBPcGVuTGF5ZXJzLlNpemUoMjIsCjIxKSxhbmNob3I6bmV3IE9wZW5MYXllcnMuQm91bmRzKG51bGwsMCwwLG51bGwpLHBvc2l0aW9uOm5ldyBPcGVuTGF5ZXJzLlBpeGVsKC0xMjM4LC02MjkpfSx7c2l6ZTpuZXcgT3BlbkxheWVycy5TaXplKDgxLDMzKSxhbmNob3I6bmV3IE9wZW5MYXllcnMuQm91bmRzKG51bGwsbnVsbCwwLDApLHBvc2l0aW9uOm5ldyBPcGVuTGF5ZXJzLlBpeGVsKC0xMDEsLTY3NCl9XX0sYnI6e29mZnNldDpuZXcgT3BlbkxheWVycy5QaXhlbCgtNDQsMCkscGFkZGluZzpuZXcgT3BlbkxheWVycy5Cb3VuZHMoOCw5LDgsNDApLGJsb2Nrczpbe3NpemU6bmV3IE9wZW5MYXllcnMuU2l6ZSgiYXV0byIsImF1dG8iKSxhbmNob3I6bmV3IE9wZW5MYXllcnMuQm91bmRzKDAsMjEsMjIsMzIpLHBvc2l0aW9uOm5ldyBPcGVuTGF5ZXJzLlBpeGVsKDAsMCl9LHtzaXplOm5ldyBPcGVuTGF5ZXJzLlNpemUoMjIsImF1dG8iKSxhbmNob3I6bmV3IE9wZW5MYXllcnMuQm91bmRzKG51bGwsMjEsMCwzMikscG9zaXRpb246bmV3IE9wZW5MYXllcnMuUGl4ZWwoLTEyMzgsCjApfSx7c2l6ZTpuZXcgT3BlbkxheWVycy5TaXplKCJhdXRvIiwyMSksYW5jaG9yOm5ldyBPcGVuTGF5ZXJzLkJvdW5kcygwLDAsMjIsbnVsbCkscG9zaXRpb246bmV3IE9wZW5MYXllcnMuUGl4ZWwoMCwtNjI5KX0se3NpemU6bmV3IE9wZW5MYXllcnMuU2l6ZSgyMiwyMSksYW5jaG9yOm5ldyBPcGVuTGF5ZXJzLkJvdW5kcyhudWxsLDAsMCxudWxsKSxwb3NpdGlvbjpuZXcgT3BlbkxheWVycy5QaXhlbCgtMTIzOCwtNjI5KX0se3NpemU6bmV3IE9wZW5MYXllcnMuU2l6ZSg4MSwzMyksYW5jaG9yOm5ldyBPcGVuTGF5ZXJzLkJvdW5kcygwLG51bGwsbnVsbCwwKSxwb3NpdGlvbjpuZXcgT3BlbkxheWVycy5QaXhlbCgtMzExLC02NzQpfV19fSxtaW5TaXplOm5ldyBPcGVuTGF5ZXJzLlNpemUoMTA1LDEwKSxtYXhTaXplOm5ldyBPcGVuTGF5ZXJzLlNpemUoMTIwMCw2NjApLGluaXRpYWxpemU6ZnVuY3Rpb24oYSxiLGMsZCxlLGYsZyl7dGhpcy5pbWFnZVNyYz1PcGVuTGF5ZXJzLlV0aWwuZ2V0SW1hZ2VMb2NhdGlvbigiY2xvdWQtcG9wdXAtcmVsYXRpdmUucG5nIik7Ck9wZW5MYXllcnMuUG9wdXAuRnJhbWVkLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLmNvbnRlbnREaXYuY2xhc3NOYW1lPXRoaXMuY29udGVudERpc3BsYXlDbGFzc30sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Qb3B1cC5GcmFtZWRDbG91ZCJ9KTtPcGVuTGF5ZXJzLlJ1bGU9T3BlbkxheWVycy5DbGFzcyh7aWQ6bnVsbCxuYW1lOm51bGwsdGl0bGU6bnVsbCxkZXNjcmlwdGlvbjpudWxsLGNvbnRleHQ6bnVsbCxmaWx0ZXI6bnVsbCxlbHNlRmlsdGVyOiExLHN5bWJvbGl6ZXI6bnVsbCxzeW1ib2xpemVyczpudWxsLG1pblNjYWxlRGVub21pbmF0b3I6bnVsbCxtYXhTY2FsZURlbm9taW5hdG9yOm51bGwsaW5pdGlhbGl6ZTpmdW5jdGlvbihhKXt0aGlzLnN5bWJvbGl6ZXI9e307T3BlbkxheWVycy5VdGlsLmV4dGVuZCh0aGlzLGEpO3RoaXMuc3ltYm9saXplcnMmJmRlbGV0ZSB0aGlzLnN5bWJvbGl6ZXI7dGhpcy5pZD1PcGVuTGF5ZXJzLlV0aWwuY3JlYXRlVW5pcXVlSUQodGhpcy5DTEFTU19OQU1FKyJfIil9LGRlc3Ryb3k6ZnVuY3Rpb24oKXtmb3IodmFyIGEgaW4gdGhpcy5zeW1ib2xpemVyKXRoaXMuc3ltYm9saXplclthXT1udWxsO3RoaXMuc3ltYm9saXplcj1udWxsO2RlbGV0ZSB0aGlzLnN5bWJvbGl6ZXJzfSxldmFsdWF0ZTpmdW5jdGlvbihhKXt2YXIgYj0KdGhpcy5nZXRDb250ZXh0KGEpLGM9ITA7aWYodGhpcy5taW5TY2FsZURlbm9taW5hdG9yfHx0aGlzLm1heFNjYWxlRGVub21pbmF0b3IpdmFyIGQ9YS5sYXllci5tYXAuZ2V0U2NhbGUoKTt0aGlzLm1pblNjYWxlRGVub21pbmF0b3ImJihjPWQ+PU9wZW5MYXllcnMuU3R5bGUuY3JlYXRlTGl0ZXJhbCh0aGlzLm1pblNjYWxlRGVub21pbmF0b3IsYikpO2MmJnRoaXMubWF4U2NhbGVEZW5vbWluYXRvciYmKGM9ZDxPcGVuTGF5ZXJzLlN0eWxlLmNyZWF0ZUxpdGVyYWwodGhpcy5tYXhTY2FsZURlbm9taW5hdG9yLGIpKTtjJiZ0aGlzLmZpbHRlciYmKGM9Ik9wZW5MYXllcnMuRmlsdGVyLkZlYXR1cmVJZCI9PXRoaXMuZmlsdGVyLkNMQVNTX05BTUU/dGhpcy5maWx0ZXIuZXZhbHVhdGUoYSk6dGhpcy5maWx0ZXIuZXZhbHVhdGUoYikpO3JldHVybiBjfSxnZXRDb250ZXh0OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY29udGV4dDtifHwoYj1hLmF0dHJpYnV0ZXN8fGEuZGF0YSk7ImZ1bmN0aW9uIj09CnR5cGVvZiB0aGlzLmNvbnRleHQmJihiPXRoaXMuY29udGV4dChhKSk7cmV0dXJuIGJ9LGNsb25lOmZ1bmN0aW9uKCl7dmFyIGE9T3BlbkxheWVycy5VdGlsLmV4dGVuZCh7fSx0aGlzKTtpZih0aGlzLnN5bWJvbGl6ZXJzKXt2YXIgYj10aGlzLnN5bWJvbGl6ZXJzLmxlbmd0aDthLnN5bWJvbGl6ZXJzPUFycmF5KGIpO2Zvcih2YXIgYz0wO2M8YjsrK2MpYS5zeW1ib2xpemVyc1tjXT10aGlzLnN5bWJvbGl6ZXJzW2NdLmNsb25lKCl9ZWxzZXthLnN5bWJvbGl6ZXI9e307Zm9yKHZhciBkIGluIHRoaXMuc3ltYm9saXplciliPXRoaXMuc3ltYm9saXplcltkXSxjPXR5cGVvZiBiLCJvYmplY3QiPT09Yz9hLnN5bWJvbGl6ZXJbZF09T3BlbkxheWVycy5VdGlsLmV4dGVuZCh7fSxiKToic3RyaW5nIj09PWMmJihhLnN5bWJvbGl6ZXJbZF09Yil9YS5maWx0ZXI9dGhpcy5maWx0ZXImJnRoaXMuZmlsdGVyLmNsb25lKCk7YS5jb250ZXh0PXRoaXMuY29udGV4dCYmT3BlbkxheWVycy5VdGlsLmV4dGVuZCh7fSwKdGhpcy5jb250ZXh0KTtyZXR1cm4gbmV3IE9wZW5MYXllcnMuUnVsZShhKX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5SdWxlIn0pO09wZW5MYXllcnMuUmVuZGVyZXIuVk1MPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5SZW5kZXJlci5FbGVtZW50cyx7eG1sbnM6InVybjpzY2hlbWFzLW1pY3Jvc29mdC1jb206dm1sIixzeW1ib2xDYWNoZTp7fSxvZmZzZXQ6bnVsbCxpbml0aWFsaXplOmZ1bmN0aW9uKGEpe2lmKHRoaXMuc3VwcG9ydGVkKCkpe2lmKCFkb2N1bWVudC5uYW1lc3BhY2VzLm9sdil7ZG9jdW1lbnQubmFtZXNwYWNlcy5hZGQoIm9sdiIsdGhpcy54bWxucyk7Zm9yKHZhciBiPWRvY3VtZW50LmNyZWF0ZVN0eWxlU2hlZXQoKSxjPSJzaGFwZSByZWN0IG92YWwgZmlsbCBzdHJva2UgaW1hZ2VkYXRhIGdyb3VwIHRleHRib3giLnNwbGl0KCIgIiksZD0wLGU9Yy5sZW5ndGg7ZDxlO2QrKyliLmFkZFJ1bGUoIm9sdlxcOiIrY1tkXSwiYmVoYXZpb3I6IHVybCgjZGVmYXVsdCNWTUwpOyBwb3NpdGlvbjogYWJzb2x1dGU7IGRpc3BsYXk6IGlubGluZS1ibG9jazsiKX1PcGVuTGF5ZXJzLlJlbmRlcmVyLkVsZW1lbnRzLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsCmFyZ3VtZW50cyl9fSxzdXBwb3J0ZWQ6ZnVuY3Rpb24oKXtyZXR1cm4hIWRvY3VtZW50Lm5hbWVzcGFjZXN9LHNldEV4dGVudDpmdW5jdGlvbihhLGIpe3ZhciBjPU9wZW5MYXllcnMuUmVuZGVyZXIuRWxlbWVudHMucHJvdG90eXBlLnNldEV4dGVudC5hcHBseSh0aGlzLGFyZ3VtZW50cyksZD10aGlzLmdldFJlc29sdXRpb24oKSxlPWEubGVmdC9kfDAsZD1hLnRvcC9kLXRoaXMuc2l6ZS5ofDA7Ynx8IXRoaXMub2Zmc2V0Pyh0aGlzLm9mZnNldD17eDplLHk6ZH0sZD1lPTApOihlLT10aGlzLm9mZnNldC54LGQtPXRoaXMub2Zmc2V0LnkpO3RoaXMucm9vdC5jb29yZG9yaWdpbj1lLXRoaXMueE9mZnNldCsiICIrZDtmb3IodmFyIGU9W3RoaXMucm9vdCx0aGlzLnZlY3RvclJvb3QsdGhpcy50ZXh0Um9vdF0sZj0wLGc9ZS5sZW5ndGg7ZjxnOysrZilkPWVbZl0sZC5jb29yZHNpemU9dGhpcy5zaXplLncrIiAiK3RoaXMuc2l6ZS5oO3RoaXMucm9vdC5zdHlsZS5mbGlwPSJ5IjtyZXR1cm4gY30sCnNldFNpemU6ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5SZW5kZXJlci5wcm90b3R5cGUuc2V0U2l6ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7Zm9yKHZhciBiPVt0aGlzLnJlbmRlcmVyUm9vdCx0aGlzLnJvb3QsdGhpcy52ZWN0b3JSb290LHRoaXMudGV4dFJvb3RdLGM9dGhpcy5zaXplLncrInB4IixkPXRoaXMuc2l6ZS5oKyJweCIsZSxmPTAsZz1iLmxlbmd0aDtmPGc7KytmKWU9YltmXSxlLnN0eWxlLndpZHRoPWMsZS5zdHlsZS5oZWlnaHQ9ZH0sZ2V0Tm9kZVR5cGU6ZnVuY3Rpb24oYSxiKXt2YXIgYz1udWxsO3N3aXRjaChhLkNMQVNTX05BTUUpe2Nhc2UgIk9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQiOmM9Yi5leHRlcm5hbEdyYXBoaWM/Im9sdjpyZWN0Ijp0aGlzLmlzQ29tcGxleFN5bWJvbChiLmdyYXBoaWNOYW1lKT8ib2x2OnNoYXBlIjoib2x2Om92YWwiO2JyZWFrO2Nhc2UgIk9wZW5MYXllcnMuR2VvbWV0cnkuUmVjdGFuZ2xlIjpjPSJvbHY6cmVjdCI7YnJlYWs7Y2FzZSAiT3BlbkxheWVycy5HZW9tZXRyeS5MaW5lU3RyaW5nIjpjYXNlICJPcGVuTGF5ZXJzLkdlb21ldHJ5LkxpbmVhclJpbmciOmNhc2UgIk9wZW5MYXllcnMuR2VvbWV0cnkuUG9seWdvbiI6Y2FzZSAiT3BlbkxheWVycy5HZW9tZXRyeS5DdXJ2ZSI6Yz0KIm9sdjpzaGFwZSJ9cmV0dXJuIGN9LHNldFN0eWxlOmZ1bmN0aW9uKGEsYixjLGQpe2I9Ynx8YS5fc3R5bGU7Yz1jfHxhLl9vcHRpb25zO3ZhciBlPWIuZmlsbENvbG9yLGY9Yi50aXRsZXx8Yi5ncmFwaGljVGl0bGU7ZiYmKGEudGl0bGU9Zik7aWYoIk9wZW5MYXllcnMuR2VvbWV0cnkuUG9pbnQiPT09YS5fZ2VvbWV0cnlDbGFzcylpZihiLmV4dGVybmFsR3JhcGhpYyl7Yy5pc0ZpbGxlZD0hMDt2YXIgZT1iLmdyYXBoaWNXaWR0aHx8Yi5ncmFwaGljSGVpZ2h0LGY9Yi5ncmFwaGljSGVpZ2h0fHxiLmdyYXBoaWNXaWR0aCxlPWU/ZToyKmIucG9pbnRSYWRpdXMsZj1mP2Y6MipiLnBvaW50UmFkaXVzLGc9dGhpcy5nZXRSZXNvbHV0aW9uKCksaD12b2lkIDAhPWIuZ3JhcGhpY1hPZmZzZXQ/Yi5ncmFwaGljWE9mZnNldDotKDAuNSplKSxrPXZvaWQgMCE9Yi5ncmFwaGljWU9mZnNldD9iLmdyYXBoaWNZT2Zmc2V0Oi0oMC41KmYpO2Euc3R5bGUubGVmdD0oKGQueC10aGlzLmZlYXR1cmVEeCkvCmctdGhpcy5vZmZzZXQueCtofDApKyJweCI7YS5zdHlsZS50b3A9KGQueS9nLXRoaXMub2Zmc2V0LnktKGsrZil8MCkrInB4IjthLnN0eWxlLndpZHRoPWUrInB4IjthLnN0eWxlLmhlaWdodD1mKyJweCI7YS5zdHlsZS5mbGlwPSJ5IjtlPSJub25lIjtjLmlzU3Ryb2tlZD0hMX1lbHNlIHRoaXMuaXNDb21wbGV4U3ltYm9sKGIuZ3JhcGhpY05hbWUpPyhmPXRoaXMuaW1wb3J0U3ltYm9sKGIuZ3JhcGhpY05hbWUpLGEucGF0aD1mLnBhdGgsYS5jb29yZG9yaWdpbj1mLmxlZnQrIiwiK2YuYm90dG9tLGY9Zi5zaXplLGEuY29vcmRzaXplPWYrIiwiK2YsdGhpcy5kcmF3Q2lyY2xlKGEsZCxiLnBvaW50UmFkaXVzKSxhLnN0eWxlLmZsaXA9InkiKTp0aGlzLmRyYXdDaXJjbGUoYSxkLGIucG9pbnRSYWRpdXMpO2MuaXNGaWxsZWQ/YS5maWxsY29sb3I9ZTphLmZpbGxlZD0iZmFsc2UiO2Q9YS5nZXRFbGVtZW50c0J5VGFnTmFtZSgiZmlsbCIpO2Q9MD09ZC5sZW5ndGg/bnVsbDpkWzBdO2MuaXNGaWxsZWQ/CihkfHwoZD10aGlzLmNyZWF0ZU5vZGUoIm9sdjpmaWxsIixhLmlkKyJfZmlsbCIpKSxkLm9wYWNpdHk9Yi5maWxsT3BhY2l0eSwiT3BlbkxheWVycy5HZW9tZXRyeS5Qb2ludCI9PT1hLl9nZW9tZXRyeUNsYXNzJiZiLmV4dGVybmFsR3JhcGhpYyYmKGIuZ3JhcGhpY09wYWNpdHkmJihkLm9wYWNpdHk9Yi5ncmFwaGljT3BhY2l0eSksZC5zcmM9Yi5leHRlcm5hbEdyYXBoaWMsZC50eXBlPSJmcmFtZSIsYi5ncmFwaGljV2lkdGgmJmIuZ3JhcGhpY0hlaWdodHx8KGQuYXNwZWN0PSJhdG1vc3QiKSksZC5wYXJlbnROb2RlIT1hJiZhLmFwcGVuZENoaWxkKGQpKTpkJiZhLnJlbW92ZUNoaWxkKGQpO2U9Yi5yb3RhdGlvbjtpZih2b2lkIDAhPT1lfHx2b2lkIDAhPT1hLl9yb3RhdGlvbilhLl9yb3RhdGlvbj1lLGIuZXh0ZXJuYWxHcmFwaGljPyh0aGlzLmdyYXBoaWNSb3RhdGUoYSxoLGssYiksZC5vcGFjaXR5PTApOiJPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50Ij09PWEuX2dlb21ldHJ5Q2xhc3MmJgooYS5zdHlsZS5yb3RhdGlvbj1lfHwwKTtoPWEuZ2V0RWxlbWVudHNCeVRhZ05hbWUoInN0cm9rZSIpO2g9MD09aC5sZW5ndGg/bnVsbDpoWzBdO2MuaXNTdHJva2VkPyhofHwoaD10aGlzLmNyZWF0ZU5vZGUoIm9sdjpzdHJva2UiLGEuaWQrIl9zdHJva2UiKSxhLmFwcGVuZENoaWxkKGgpKSxoLm9uPSEwLGguY29sb3I9Yi5zdHJva2VDb2xvcixoLndlaWdodD1iLnN0cm9rZVdpZHRoKyJweCIsaC5vcGFjaXR5PWIuc3Ryb2tlT3BhY2l0eSxoLmVuZGNhcD0iYnV0dCI9PWIuc3Ryb2tlTGluZWNhcD8iZmxhdCI6Yi5zdHJva2VMaW5lY2FwfHwicm91bmQiLGIuc3Ryb2tlRGFzaHN0eWxlJiYoaC5kYXNoc3R5bGU9dGhpcy5kYXNoU3R5bGUoYikpKTooYS5zdHJva2VkPSExLGgmJihoLm9uPSExKSk7ImluaGVyaXQiIT1iLmN1cnNvciYmbnVsbCE9Yi5jdXJzb3ImJihhLnN0eWxlLmN1cnNvcj1iLmN1cnNvcik7cmV0dXJuIGF9LGdyYXBoaWNSb3RhdGU6ZnVuY3Rpb24oYSxiLGMsZCl7ZD0KZHx8YS5fc3R5bGU7dmFyIGU9ZC5yb3RhdGlvbnx8MCxmLGc7aWYoZC5ncmFwaGljV2lkdGgmJmQuZ3JhcGhpY0hlaWdodCl7Zz1NYXRoLm1heChkLmdyYXBoaWNXaWR0aCxkLmdyYXBoaWNIZWlnaHQpO2Y9ZC5ncmFwaGljV2lkdGgvZC5ncmFwaGljSGVpZ2h0O3ZhciBoPU1hdGgucm91bmQoZC5ncmFwaGljV2lkdGh8fGcqZiksaz1NYXRoLnJvdW5kKGQuZ3JhcGhpY0hlaWdodHx8Zyk7YS5zdHlsZS53aWR0aD1oKyJweCI7YS5zdHlsZS5oZWlnaHQ9aysicHgiO3ZhciBsPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGEuaWQrIl9pbWFnZSIpO2x8fChsPXRoaXMuY3JlYXRlTm9kZSgib2x2OmltYWdlZGF0YSIsYS5pZCsiX2ltYWdlIiksYS5hcHBlbmRDaGlsZChsKSk7bC5zdHlsZS53aWR0aD1oKyJweCI7bC5zdHlsZS5oZWlnaHQ9aysicHgiO2wuc3JjPWQuZXh0ZXJuYWxHcmFwaGljO2wuc3R5bGUuZmlsdGVyPSJwcm9naWQ6RFhJbWFnZVRyYW5zZm9ybS5NaWNyb3NvZnQuQWxwaGFJbWFnZUxvYWRlcihzcmM9JycsIHNpemluZ01ldGhvZD0nc2NhbGUnKSI7Cmw9ZSpNYXRoLlBJLzE4MDtlPU1hdGguc2luKGwpO2w9TWF0aC5jb3MobCk7ZT0icHJvZ2lkOkRYSW1hZ2VUcmFuc2Zvcm0uTWljcm9zb2Z0Lk1hdHJpeChNMTE9IitsKyIsTTEyPSIrLWUrIixNMjE9IitlKyIsTTIyPSIrbCsiLFNpemluZ01ldGhvZD0nYXV0byBleHBhbmQnKVxuIjsobD1kLmdyYXBoaWNPcGFjaXR5fHxkLmZpbGxPcGFjaXR5KSYmMSE9bCYmKGUrPSJwcm9naWQ6RFhJbWFnZVRyYW5zZm9ybS5NaWNyb3NvZnQuQmFzaWNJbWFnZShvcGFjaXR5PSIrbCsiKVxuIik7YS5zdHlsZS5maWx0ZXI9ZTtlPW5ldyBPcGVuTGF5ZXJzLkdlb21ldHJ5LlBvaW50KC1iLC1jKTtoPShuZXcgT3BlbkxheWVycy5Cb3VuZHMoMCwwLGgsaykpLnRvR2VvbWV0cnkoKTtoLnJvdGF0ZShkLnJvdGF0aW9uLGUpO2g9aC5nZXRCb3VuZHMoKTthLnN0eWxlLmxlZnQ9TWF0aC5yb3VuZChwYXJzZUludChhLnN0eWxlLmxlZnQpK2gubGVmdCkrInB4IjthLnN0eWxlLnRvcD1NYXRoLnJvdW5kKHBhcnNlSW50KGEuc3R5bGUudG9wKS0KaC5ib3R0b20pKyJweCJ9ZWxzZXt2YXIgbT1uZXcgSW1hZ2U7bS5vbnJlYWR5c3RhdGVjaGFuZ2U9T3BlbkxheWVycy5GdW5jdGlvbi5iaW5kKGZ1bmN0aW9uKCl7aWYoImNvbXBsZXRlIj09bS5yZWFkeVN0YXRlfHwiaW50ZXJhY3RpdmUiPT1tLnJlYWR5U3RhdGUpZj1tLndpZHRoL20uaGVpZ2h0LGc9TWF0aC5tYXgoMipkLnBvaW50UmFkaXVzLGQuZ3JhcGhpY1dpZHRofHwwLGQuZ3JhcGhpY0hlaWdodHx8MCksYio9ZixkLmdyYXBoaWNXaWR0aD1nKmYsZC5ncmFwaGljSGVpZ2h0PWcsdGhpcy5ncmFwaGljUm90YXRlKGEsYixjLGQpfSx0aGlzKTttLnNyYz1kLmV4dGVybmFsR3JhcGhpY319LHBvc3REcmF3OmZ1bmN0aW9uKGEpe2Euc3R5bGUudmlzaWJpbGl0eT0idmlzaWJsZSI7dmFyIGI9YS5fc3R5bGUuZmlsbENvbG9yLGM9YS5fc3R5bGUuc3Ryb2tlQ29sb3I7Im5vbmUiPT1iJiZhLmZpbGxjb2xvciE9YiYmKGEuZmlsbGNvbG9yPWIpOyJub25lIj09YyYmYS5zdHJva2Vjb2xvciE9CmMmJihhLnN0cm9rZWNvbG9yPWMpfSxzZXROb2RlRGltZW5zaW9uOmZ1bmN0aW9uKGEsYil7dmFyIGM9Yi5nZXRCb3VuZHMoKTtpZihjKXt2YXIgZD10aGlzLmdldFJlc29sdXRpb24oKSxjPW5ldyBPcGVuTGF5ZXJzLkJvdW5kcygoYy5sZWZ0LXRoaXMuZmVhdHVyZUR4KS9kLXRoaXMub2Zmc2V0Lnh8MCxjLmJvdHRvbS9kLXRoaXMub2Zmc2V0Lnl8MCwoYy5yaWdodC10aGlzLmZlYXR1cmVEeCkvZC10aGlzLm9mZnNldC54fDAsYy50b3AvZC10aGlzLm9mZnNldC55fDApO2Euc3R5bGUubGVmdD1jLmxlZnQrInB4IjthLnN0eWxlLnRvcD1jLnRvcCsicHgiO2Euc3R5bGUud2lkdGg9Yy5nZXRXaWR0aCgpKyJweCI7YS5zdHlsZS5oZWlnaHQ9Yy5nZXRIZWlnaHQoKSsicHgiO2EuY29vcmRvcmlnaW49Yy5sZWZ0KyIgIitjLnRvcDthLmNvb3Jkc2l6ZT1jLmdldFdpZHRoKCkrIiAiK2MuZ2V0SGVpZ2h0KCl9fSxkYXNoU3R5bGU6ZnVuY3Rpb24oYSl7YT1hLnN0cm9rZURhc2hzdHlsZTtzd2l0Y2goYSl7Y2FzZSAic29saWQiOmNhc2UgImRvdCI6Y2FzZSAiZGFzaCI6Y2FzZSAiZGFzaGRvdCI6Y2FzZSAibG9uZ2Rhc2giOmNhc2UgImxvbmdkYXNoZG90IjpyZXR1cm4gYTsKZGVmYXVsdDpyZXR1cm4gYT1hLnNwbGl0KC9bICxdLyksMj09YS5sZW5ndGg/MSphWzBdPj0yKmFbMV0/ImxvbmdkYXNoIjoxPT1hWzBdfHwxPT1hWzFdPyJkb3QiOiJkYXNoIjo0PT1hLmxlbmd0aD8xKmFbMF0+PTIqYVsxXT8ibG9uZ2Rhc2hkb3QiOiJkYXNoZG90Ijoic29saWQifX0sY3JlYXRlTm9kZTpmdW5jdGlvbihhLGIpe3ZhciBjPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoYSk7YiYmKGMuaWQ9Yik7Yy51bnNlbGVjdGFibGU9Im9uIjtjLm9uc2VsZWN0c3RhcnQ9T3BlbkxheWVycy5GdW5jdGlvbi5GYWxzZTtyZXR1cm4gY30sbm9kZVR5cGVDb21wYXJlOmZ1bmN0aW9uKGEsYil7dmFyIGM9YixkPWMuaW5kZXhPZigiOiIpOy0xIT1kJiYoYz1jLnN1YnN0cihkKzEpKTt2YXIgZT1hLm5vZGVOYW1lLGQ9ZS5pbmRleE9mKCI6Iik7LTEhPWQmJihlPWUuc3Vic3RyKGQrMSkpO3JldHVybiBjPT1lfSxjcmVhdGVSZW5kZXJSb290OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubm9kZUZhY3RvcnkodGhpcy5jb250YWluZXIuaWQrCiJfdm1sUm9vdCIsImRpdiIpfSxjcmVhdGVSb290OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLm5vZGVGYWN0b3J5KHRoaXMuY29udGFpbmVyLmlkK2EsIm9sdjpncm91cCIpfSxkcmF3UG9pbnQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5kcmF3Q2lyY2xlKGEsYiwxKX0sZHJhd0NpcmNsZTpmdW5jdGlvbihhLGIsYyl7aWYoIWlzTmFOKGIueCkmJiFpc05hTihiLnkpKXt2YXIgZD10aGlzLmdldFJlc29sdXRpb24oKTthLnN0eWxlLmxlZnQ9KChiLngtdGhpcy5mZWF0dXJlRHgpL2QtdGhpcy5vZmZzZXQueHwwKS1jKyJweCI7YS5zdHlsZS50b3A9KGIueS9kLXRoaXMub2Zmc2V0Lnl8MCktYysicHgiO2I9MipjO2Euc3R5bGUud2lkdGg9YisicHgiO2Euc3R5bGUuaGVpZ2h0PWIrInB4IjtyZXR1cm4gYX1yZXR1cm4hMX0sZHJhd0xpbmVTdHJpbmc6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5kcmF3TGluZShhLGIsITEpfSxkcmF3TGluZWFyUmluZzpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLmRyYXdMaW5lKGEsCmIsITApfSxkcmF3TGluZTpmdW5jdGlvbihhLGIsYyl7dGhpcy5zZXROb2RlRGltZW5zaW9uKGEsYik7Zm9yKHZhciBkPXRoaXMuZ2V0UmVzb2x1dGlvbigpLGU9Yi5jb21wb25lbnRzLmxlbmd0aCxmPUFycmF5KGUpLGcsaCxrPTA7azxlO2srKylnPWIuY29tcG9uZW50c1trXSxoPShnLngtdGhpcy5mZWF0dXJlRHgpL2QtdGhpcy5vZmZzZXQueHwwLGc9Zy55L2QtdGhpcy5vZmZzZXQueXwwLGZba109IiAiK2grIiwiK2crIiBsICI7Yj1jPyIgeCBlIjoiIGUiO2EucGF0aD0ibSIrZi5qb2luKCIiKStiO3JldHVybiBhfSxkcmF3UG9seWdvbjpmdW5jdGlvbihhLGIpe3RoaXMuc2V0Tm9kZURpbWVuc2lvbihhLGIpO3ZhciBjPXRoaXMuZ2V0UmVzb2x1dGlvbigpLGQ9W10sZSxmLGcsaCxrLGwsbSxyLHAsbjtlPTA7Zm9yKGY9Yi5jb21wb25lbnRzLmxlbmd0aDtlPGY7ZSsrKXtkLnB1c2goIm0iKTtnPWIuY29tcG9uZW50c1tlXS5jb21wb25lbnRzO2g9MD09PWU7bD1rPW51bGw7bT0wOwpmb3Iocj1nLmxlbmd0aDttPHI7bSsrKXA9Z1ttXSxuPShwLngtdGhpcy5mZWF0dXJlRHgpL2MtdGhpcy5vZmZzZXQueHwwLHA9cC55L2MtdGhpcy5vZmZzZXQueXwwLG49IiAiK24rIiwiK3AsZC5wdXNoKG4pLDA9PW0mJmQucHVzaCgiIGwiKSxofHwoaz9rIT1uJiYobD9sIT1uJiYoaD0hMCk6bD1uKTprPW4pO2QucHVzaChoPyIgeCAiOiIgIil9ZC5wdXNoKCJlIik7YS5wYXRoPWQuam9pbigiIik7cmV0dXJuIGF9LGRyYXdSZWN0YW5nbGU6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmdldFJlc29sdXRpb24oKTthLnN0eWxlLmxlZnQ9KChiLngtdGhpcy5mZWF0dXJlRHgpL2MtdGhpcy5vZmZzZXQueHwwKSsicHgiO2Euc3R5bGUudG9wPShiLnkvYy10aGlzLm9mZnNldC55fDApKyJweCI7YS5zdHlsZS53aWR0aD0oYi53aWR0aC9jfDApKyJweCI7YS5zdHlsZS5oZWlnaHQ9KGIuaGVpZ2h0L2N8MCkrInB4IjtyZXR1cm4gYX0sZHJhd1RleHQ6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXRoaXMubm9kZUZhY3RvcnkoYSsKdGhpcy5MQUJFTF9JRF9TVUZGSVgsIm9sdjpyZWN0IiksZT10aGlzLm5vZGVGYWN0b3J5KGErdGhpcy5MQUJFTF9JRF9TVUZGSVgrIl90ZXh0Ym94Iiwib2x2OnRleHRib3giKSxmPXRoaXMuZ2V0UmVzb2x1dGlvbigpO2Quc3R5bGUubGVmdD0oKGMueC10aGlzLmZlYXR1cmVEeCkvZi10aGlzLm9mZnNldC54fDApKyJweCI7ZC5zdHlsZS50b3A9KGMueS9mLXRoaXMub2Zmc2V0Lnl8MCkrInB4IjtkLnN0eWxlLmZsaXA9InkiO2UuaW5uZXJUZXh0PWIubGFiZWw7ImluaGVyaXQiIT1iLmN1cnNvciYmbnVsbCE9Yi5jdXJzb3ImJihlLnN0eWxlLmN1cnNvcj1iLmN1cnNvcik7Yi5mb250Q29sb3ImJihlLnN0eWxlLmNvbG9yPWIuZm9udENvbG9yKTtiLmZvbnRPcGFjaXR5JiYoZS5zdHlsZS5maWx0ZXI9ImFscGhhKG9wYWNpdHk9IisxMDAqYi5mb250T3BhY2l0eSsiKSIpO2IuZm9udEZhbWlseSYmKGUuc3R5bGUuZm9udEZhbWlseT1iLmZvbnRGYW1pbHkpO2IuZm9udFNpemUmJihlLnN0eWxlLmZvbnRTaXplPQpiLmZvbnRTaXplKTtiLmZvbnRXZWlnaHQmJihlLnN0eWxlLmZvbnRXZWlnaHQ9Yi5mb250V2VpZ2h0KTtiLmZvbnRTdHlsZSYmKGUuc3R5bGUuZm9udFN0eWxlPWIuZm9udFN0eWxlKTshMD09PWIubGFiZWxTZWxlY3QmJihkLl9mZWF0dXJlSWQ9YSxlLl9mZWF0dXJlSWQ9YSxlLl9nZW9tZXRyeT1jLGUuX2dlb21ldHJ5Q2xhc3M9Yy5DTEFTU19OQU1FKTtlLnN0eWxlLndoaXRlU3BhY2U9Im5vd3JhcCI7ZS5pbnNldD0iMXB4LDBweCwwcHgsMHB4IjtkLnBhcmVudE5vZGV8fChkLmFwcGVuZENoaWxkKGUpLHRoaXMudGV4dFJvb3QuYXBwZW5kQ2hpbGQoZCkpO2I9Yi5sYWJlbEFsaWdufHwiY20iOzE9PWIubGVuZ3RoJiYoYis9Im0iKTthPWUuY2xpZW50V2lkdGgqT3BlbkxheWVycy5SZW5kZXJlci5WTUwuTEFCRUxfU0hJRlRbYi5zdWJzdHIoMCwxKV07ZT1lLmNsaWVudEhlaWdodCpPcGVuTGF5ZXJzLlJlbmRlcmVyLlZNTC5MQUJFTF9TSElGVFtiLnN1YnN0cigxLDEpXTtkLnN0eWxlLmxlZnQ9CnBhcnNlSW50KGQuc3R5bGUubGVmdCktYS0xKyJweCI7ZC5zdHlsZS50b3A9cGFyc2VJbnQoZC5zdHlsZS50b3ApK2UrInB4In0sbW92ZVJvb3Q6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5tYXAuZ2V0TGF5ZXIoYS5jb250YWluZXIuaWQpO2IgaW5zdGFuY2VvZiBPcGVuTGF5ZXJzLkxheWVyLlZlY3Rvci5Sb290Q29udGFpbmVyJiYoYj10aGlzLm1hcC5nZXRMYXllcih0aGlzLmNvbnRhaW5lci5pZCkpO2ImJmIucmVuZGVyZXIuY2xlYXIoKTtPcGVuTGF5ZXJzLlJlbmRlcmVyLkVsZW1lbnRzLnByb3RvdHlwZS5tb3ZlUm9vdC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7YiYmYi5yZWRyYXcoKX0saW1wb3J0U3ltYm9sOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY29udGFpbmVyLmlkKyItIithLGM9dGhpcy5zeW1ib2xDYWNoZVtiXTtpZihjKXJldHVybiBjO2M9T3BlbkxheWVycy5SZW5kZXJlci5zeW1ib2xbYV07aWYoIWMpdGhyb3cgRXJyb3IoYSsiIGlzIG5vdCBhIHZhbGlkIHN5bWJvbCBuYW1lIik7CmE9bmV3IE9wZW5MYXllcnMuQm91bmRzKE51bWJlci5NQVhfVkFMVUUsTnVtYmVyLk1BWF9WQUxVRSwwLDApO2Zvcih2YXIgZD1bIm0iXSxlPTA7ZTxjLmxlbmd0aDtlKz0yKXt2YXIgZj1jW2VdLGc9Y1tlKzFdO2EubGVmdD1NYXRoLm1pbihhLmxlZnQsZik7YS5ib3R0b209TWF0aC5taW4oYS5ib3R0b20sZyk7YS5yaWdodD1NYXRoLm1heChhLnJpZ2h0LGYpO2EudG9wPU1hdGgubWF4KGEudG9wLGcpO2QucHVzaChmKTtkLnB1c2goZyk7MD09ZSYmZC5wdXNoKCJsIil9ZC5wdXNoKCJ4IGUiKTtjPWQuam9pbigiICIpO2Q9KGEuZ2V0V2lkdGgoKS1hLmdldEhlaWdodCgpKS8yOzA8ZD8oYS5ib3R0b20tPWQsYS50b3ArPWQpOihhLmxlZnQrPWQsYS5yaWdodC09ZCk7Yz17cGF0aDpjLHNpemU6YS5nZXRXaWR0aCgpLGxlZnQ6YS5sZWZ0LGJvdHRvbTphLmJvdHRvbX07cmV0dXJuIHRoaXMuc3ltYm9sQ2FjaGVbYl09Y30sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5SZW5kZXJlci5WTUwifSk7Ck9wZW5MYXllcnMuUmVuZGVyZXIuVk1MLkxBQkVMX1NISUZUPXtsOjAsYzowLjUscjoxLHQ6MCxtOjAuNSxiOjF9O09wZW5MYXllcnMuUHJvdG9jb2w9T3BlbkxheWVycy5DbGFzcyh7Zm9ybWF0Om51bGwsb3B0aW9uczpudWxsLGF1dG9EZXN0cm95OiEwLGRlZmF1bHRGaWx0ZXI6bnVsbCxpbml0aWFsaXplOmZ1bmN0aW9uKGEpe2E9YXx8e307T3BlbkxheWVycy5VdGlsLmV4dGVuZCh0aGlzLGEpO3RoaXMub3B0aW9ucz1hfSxtZXJnZVdpdGhEZWZhdWx0RmlsdGVyOmZ1bmN0aW9uKGEpe3JldHVybiBhJiZ0aGlzLmRlZmF1bHRGaWx0ZXI/bmV3IE9wZW5MYXllcnMuRmlsdGVyLkxvZ2ljYWwoe3R5cGU6T3BlbkxheWVycy5GaWx0ZXIuTG9naWNhbC5BTkQsZmlsdGVyczpbdGhpcy5kZWZhdWx0RmlsdGVyLGFdfSk6YXx8dGhpcy5kZWZhdWx0RmlsdGVyfHx2b2lkIDB9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmZvcm1hdD10aGlzLm9wdGlvbnM9bnVsbH0scmVhZDpmdW5jdGlvbihhKXthPWF8fHt9O2EuZmlsdGVyPXRoaXMubWVyZ2VXaXRoRGVmYXVsdEZpbHRlcihhLmZpbHRlcil9LGNyZWF0ZTpmdW5jdGlvbigpe30sCnVwZGF0ZTpmdW5jdGlvbigpe30sImRlbGV0ZSI6ZnVuY3Rpb24oKXt9LGNvbW1pdDpmdW5jdGlvbigpe30sYWJvcnQ6ZnVuY3Rpb24oYSl7fSxjcmVhdGVDYWxsYmFjazpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIE9wZW5MYXllcnMuRnVuY3Rpb24uYmluZChmdW5jdGlvbigpe2EuYXBwbHkodGhpcyxbYixjXSl9LHRoaXMpfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLlByb3RvY29sIn0pO09wZW5MYXllcnMuUHJvdG9jb2wuUmVzcG9uc2U9T3BlbkxheWVycy5DbGFzcyh7Y29kZTpudWxsLHJlcXVlc3RUeXBlOm51bGwsbGFzdDohMCxmZWF0dXJlczpudWxsLGRhdGE6bnVsbCxyZXFGZWF0dXJlczpudWxsLHByaXY6bnVsbCxlcnJvcjpudWxsLGluaXRpYWxpemU6ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5VdGlsLmV4dGVuZCh0aGlzLGEpfSxzdWNjZXNzOmZ1bmN0aW9uKCl7cmV0dXJuIDA8dGhpcy5jb2RlfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLlByb3RvY29sLlJlc3BvbnNlIn0pOwpPcGVuTGF5ZXJzLlByb3RvY29sLlJlc3BvbnNlLlNVQ0NFU1M9MTtPcGVuTGF5ZXJzLlByb3RvY29sLlJlc3BvbnNlLkZBSUxVUkU9MDtPcGVuTGF5ZXJzLlByb3RvY29sLkhUVFA9T3BlbkxheWVycy5DbGFzcyhPcGVuTGF5ZXJzLlByb3RvY29sLHt1cmw6bnVsbCxoZWFkZXJzOm51bGwscGFyYW1zOm51bGwsY2FsbGJhY2s6bnVsbCxzY29wZTpudWxsLHJlYWRXaXRoUE9TVDohMSx1cGRhdGVXaXRoUE9TVDohMSxkZWxldGVXaXRoUE9TVDohMSx3aWxkY2FyZGVkOiExLHNyc0luQkJPWDohMSxpbml0aWFsaXplOmZ1bmN0aW9uKGEpe2E9YXx8e307dGhpcy5wYXJhbXM9e307dGhpcy5oZWFkZXJzPXt9O09wZW5MYXllcnMuUHJvdG9jb2wucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcyxhcmd1bWVudHMpO2lmKCF0aGlzLmZpbHRlclRvUGFyYW1zJiZPcGVuTGF5ZXJzLkZvcm1hdC5RdWVyeVN0cmluZ0ZpbHRlcil7dmFyIGI9bmV3IE9wZW5MYXllcnMuRm9ybWF0LlF1ZXJ5U3RyaW5nRmlsdGVyKHt3aWxkY2FyZGVkOnRoaXMud2lsZGNhcmRlZCxzcnNJbkJCT1g6dGhpcy5zcnNJbkJCT1h9KTt0aGlzLmZpbHRlclRvUGFyYW1zPQpmdW5jdGlvbihhLGQpe3JldHVybiBiLndyaXRlKGEsZCl9fX0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuaGVhZGVycz10aGlzLnBhcmFtcz1udWxsO09wZW5MYXllcnMuUHJvdG9jb2wucHJvdG90eXBlLmRlc3Ryb3kuYXBwbHkodGhpcyl9LHJlYWQ6ZnVuY3Rpb24oYSl7T3BlbkxheWVycy5Qcm90b2NvbC5wcm90b3R5cGUucmVhZC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7YT1hfHx7fTthLnBhcmFtcz1PcGVuTGF5ZXJzLlV0aWwuYXBwbHlEZWZhdWx0cyhhLnBhcmFtcyx0aGlzLm9wdGlvbnMucGFyYW1zKTthPU9wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKGEsdGhpcy5vcHRpb25zKTthLmZpbHRlciYmdGhpcy5maWx0ZXJUb1BhcmFtcyYmKGEucGFyYW1zPXRoaXMuZmlsdGVyVG9QYXJhbXMoYS5maWx0ZXIsYS5wYXJhbXMpKTt2YXIgYj12b2lkIDAhPT1hLnJlYWRXaXRoUE9TVD9hLnJlYWRXaXRoUE9TVDp0aGlzLnJlYWRXaXRoUE9TVCxjPW5ldyBPcGVuTGF5ZXJzLlByb3RvY29sLlJlc3BvbnNlKHtyZXF1ZXN0VHlwZToicmVhZCJ9KTsKYj8oYj1hLmhlYWRlcnN8fHt9LGJbIkNvbnRlbnQtVHlwZSJdPSJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiLGMucHJpdj1PcGVuTGF5ZXJzLlJlcXVlc3QuUE9TVCh7dXJsOmEudXJsLGNhbGxiYWNrOnRoaXMuY3JlYXRlQ2FsbGJhY2sodGhpcy5oYW5kbGVSZWFkLGMsYSksZGF0YTpPcGVuTGF5ZXJzLlV0aWwuZ2V0UGFyYW1ldGVyU3RyaW5nKGEucGFyYW1zKSxoZWFkZXJzOmJ9KSk6Yy5wcml2PU9wZW5MYXllcnMuUmVxdWVzdC5HRVQoe3VybDphLnVybCxjYWxsYmFjazp0aGlzLmNyZWF0ZUNhbGxiYWNrKHRoaXMuaGFuZGxlUmVhZCxjLGEpLHBhcmFtczphLnBhcmFtcyxoZWFkZXJzOmEuaGVhZGVyc30pO3JldHVybiBjfSxoYW5kbGVSZWFkOmZ1bmN0aW9uKGEsYil7dGhpcy5oYW5kbGVSZXNwb25zZShhLGIpfSxjcmVhdGU6ZnVuY3Rpb24oYSxiKXtiPU9wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKGIsdGhpcy5vcHRpb25zKTt2YXIgYz1uZXcgT3BlbkxheWVycy5Qcm90b2NvbC5SZXNwb25zZSh7cmVxRmVhdHVyZXM6YSwKcmVxdWVzdFR5cGU6ImNyZWF0ZSJ9KTtjLnByaXY9T3BlbkxheWVycy5SZXF1ZXN0LlBPU1Qoe3VybDpiLnVybCxjYWxsYmFjazp0aGlzLmNyZWF0ZUNhbGxiYWNrKHRoaXMuaGFuZGxlQ3JlYXRlLGMsYiksaGVhZGVyczpiLmhlYWRlcnMsZGF0YTp0aGlzLmZvcm1hdC53cml0ZShhKX0pO3JldHVybiBjfSxoYW5kbGVDcmVhdGU6ZnVuY3Rpb24oYSxiKXt0aGlzLmhhbmRsZVJlc3BvbnNlKGEsYil9LHVwZGF0ZTpmdW5jdGlvbihhLGIpe2I9Ynx8e307dmFyIGM9Yi51cmx8fGEudXJsfHx0aGlzLm9wdGlvbnMudXJsKyIvIithLmZpZDtiPU9wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKGIsdGhpcy5vcHRpb25zKTt2YXIgZD1uZXcgT3BlbkxheWVycy5Qcm90b2NvbC5SZXNwb25zZSh7cmVxRmVhdHVyZXM6YSxyZXF1ZXN0VHlwZToidXBkYXRlIn0pO2QucHJpdj1PcGVuTGF5ZXJzLlJlcXVlc3RbdGhpcy51cGRhdGVXaXRoUE9TVD8iUE9TVCI6IlBVVCJdKHt1cmw6YyxjYWxsYmFjazp0aGlzLmNyZWF0ZUNhbGxiYWNrKHRoaXMuaGFuZGxlVXBkYXRlLApkLGIpLGhlYWRlcnM6Yi5oZWFkZXJzLGRhdGE6dGhpcy5mb3JtYXQud3JpdGUoYSl9KTtyZXR1cm4gZH0saGFuZGxlVXBkYXRlOmZ1bmN0aW9uKGEsYil7dGhpcy5oYW5kbGVSZXNwb25zZShhLGIpfSwiZGVsZXRlIjpmdW5jdGlvbihhLGIpe2I9Ynx8e307dmFyIGM9Yi51cmx8fGEudXJsfHx0aGlzLm9wdGlvbnMudXJsKyIvIithLmZpZDtiPU9wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKGIsdGhpcy5vcHRpb25zKTt2YXIgZD1uZXcgT3BlbkxheWVycy5Qcm90b2NvbC5SZXNwb25zZSh7cmVxRmVhdHVyZXM6YSxyZXF1ZXN0VHlwZToiZGVsZXRlIn0pLGU9dGhpcy5kZWxldGVXaXRoUE9TVD8iUE9TVCI6IkRFTEVURSIsYz17dXJsOmMsY2FsbGJhY2s6dGhpcy5jcmVhdGVDYWxsYmFjayh0aGlzLmhhbmRsZURlbGV0ZSxkLGIpLGhlYWRlcnM6Yi5oZWFkZXJzfTt0aGlzLmRlbGV0ZVdpdGhQT1NUJiYoYy5kYXRhPXRoaXMuZm9ybWF0LndyaXRlKGEpKTtkLnByaXY9T3BlbkxheWVycy5SZXF1ZXN0W2VdKGMpOwpyZXR1cm4gZH0saGFuZGxlRGVsZXRlOmZ1bmN0aW9uKGEsYil7dGhpcy5oYW5kbGVSZXNwb25zZShhLGIpfSxoYW5kbGVSZXNwb25zZTpmdW5jdGlvbihhLGIpe3ZhciBjPWEucHJpdjtiLmNhbGxiYWNrJiYoMjAwPD1jLnN0YXR1cyYmMzAwPmMuc3RhdHVzPygiZGVsZXRlIiE9YS5yZXF1ZXN0VHlwZSYmKGEuZmVhdHVyZXM9dGhpcy5wYXJzZUZlYXR1cmVzKGMpKSxhLmNvZGU9T3BlbkxheWVycy5Qcm90b2NvbC5SZXNwb25zZS5TVUNDRVNTKTphLmNvZGU9T3BlbkxheWVycy5Qcm90b2NvbC5SZXNwb25zZS5GQUlMVVJFLGIuY2FsbGJhY2suY2FsbChiLnNjb3BlLGEpKX0scGFyc2VGZWF0dXJlczpmdW5jdGlvbihhKXt2YXIgYj1hLnJlc3BvbnNlWE1MO2ImJmIuZG9jdW1lbnRFbGVtZW50fHwoYj1hLnJlc3BvbnNlVGV4dCk7cmV0dXJuIWJ8fDA+PWIubGVuZ3RoP251bGw6dGhpcy5mb3JtYXQucmVhZChiKX0sY29tbWl0OmZ1bmN0aW9uKGEsYil7ZnVuY3Rpb24gYyhhKXtmb3IodmFyIGI9CmEuZmVhdHVyZXM/YS5mZWF0dXJlcy5sZW5ndGg6MCxjPUFycmF5KGIpLGU9MDtlPGI7KytlKWNbZV09YS5mZWF0dXJlc1tlXS5maWQ7cS5pbnNlcnRJZHM9YztkLmFwcGx5KHRoaXMsW2FdKX1mdW5jdGlvbiBkKGEpe3RoaXMuY2FsbFVzZXJDYWxsYmFjayhhLGIpO249biYmYS5zdWNjZXNzKCk7ZisrO2Y+PXAmJmIuY2FsbGJhY2smJihxLmNvZGU9bj9PcGVuTGF5ZXJzLlByb3RvY29sLlJlc3BvbnNlLlNVQ0NFU1M6T3BlbkxheWVycy5Qcm90b2NvbC5SZXNwb25zZS5GQUlMVVJFLGIuY2FsbGJhY2suYXBwbHkoYi5zY29wZSxbcV0pKX1iPU9wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKGIsdGhpcy5vcHRpb25zKTt2YXIgZT1bXSxmPTAsZz17fTtnW09wZW5MYXllcnMuU3RhdGUuSU5TRVJUXT1bXTtnW09wZW5MYXllcnMuU3RhdGUuVVBEQVRFXT1bXTtnW09wZW5MYXllcnMuU3RhdGUuREVMRVRFXT1bXTtmb3IodmFyIGgsayxsPVtdLG09MCxyPWEubGVuZ3RoO208cjsrK20paWYoaD0KYVttXSxrPWdbaC5zdGF0ZV0pay5wdXNoKGgpLGwucHVzaChoKTt2YXIgcD0oMDxnW09wZW5MYXllcnMuU3RhdGUuSU5TRVJUXS5sZW5ndGg/MTowKStnW09wZW5MYXllcnMuU3RhdGUuVVBEQVRFXS5sZW5ndGgrZ1tPcGVuTGF5ZXJzLlN0YXRlLkRFTEVURV0ubGVuZ3RoLG49ITAscT1uZXcgT3BlbkxheWVycy5Qcm90b2NvbC5SZXNwb25zZSh7cmVxRmVhdHVyZXM6bH0pO2g9Z1tPcGVuTGF5ZXJzLlN0YXRlLklOU0VSVF07MDxoLmxlbmd0aCYmZS5wdXNoKHRoaXMuY3JlYXRlKGgsT3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoe2NhbGxiYWNrOmMsc2NvcGU6dGhpc30sYi5jcmVhdGUpKSk7aD1nW09wZW5MYXllcnMuU3RhdGUuVVBEQVRFXTtmb3IobT1oLmxlbmd0aC0xOzA8PW07LS1tKWUucHVzaCh0aGlzLnVwZGF0ZShoW21dLE9wZW5MYXllcnMuVXRpbC5hcHBseURlZmF1bHRzKHtjYWxsYmFjazpkLHNjb3BlOnRoaXN9LGIudXBkYXRlKSkpO2g9Z1tPcGVuTGF5ZXJzLlN0YXRlLkRFTEVURV07CmZvcihtPWgubGVuZ3RoLTE7MDw9bTstLW0pZS5wdXNoKHRoaXNbImRlbGV0ZSJdKGhbbV0sT3BlbkxheWVycy5VdGlsLmFwcGx5RGVmYXVsdHMoe2NhbGxiYWNrOmQsc2NvcGU6dGhpc30sYlsiZGVsZXRlIl0pKSk7cmV0dXJuIGV9LGFib3J0OmZ1bmN0aW9uKGEpe2EmJmEucHJpdi5hYm9ydCgpfSxjYWxsVXNlckNhbGxiYWNrOmZ1bmN0aW9uKGEsYil7dmFyIGM9YlthLnJlcXVlc3RUeXBlXTtjJiZjLmNhbGxiYWNrJiZjLmNhbGxiYWNrLmNhbGwoYy5zY29wZSxhKX0sQ0xBU1NfTkFNRToiT3BlbkxheWVycy5Qcm90b2NvbC5IVFRQIn0pO09wZW5MYXllcnMuQ29udHJvbC5MYXllclN3aXRjaGVyPU9wZW5MYXllcnMuQ2xhc3MoT3BlbkxheWVycy5Db250cm9sLHtsYXllclN0YXRlczpudWxsLGxheWVyc0RpdjpudWxsLGJhc2VMYXllcnNEaXY6bnVsbCxiYXNlTGF5ZXJzOm51bGwsZGF0YUxibDpudWxsLGRhdGFMYXllcnNEaXY6bnVsbCxkYXRhTGF5ZXJzOm51bGwsbWluaW1pemVEaXY6bnVsbCxtYXhpbWl6ZURpdjpudWxsLGFzY2VuZGluZzohMCxpbml0aWFsaXplOmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5sYXllclN0YXRlcz1bXX0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuY2xlYXJMYXllcnNBcnJheSgiYmFzZSIpO3RoaXMuY2xlYXJMYXllcnNBcnJheSgiZGF0YSIpO3RoaXMubWFwLmV2ZW50cy51bih7YnV0dG9uY2xpY2s6dGhpcy5vbkJ1dHRvbkNsaWNrLGFkZGxheWVyOnRoaXMucmVkcmF3LGNoYW5nZWxheWVyOnRoaXMucmVkcmF3LApyZW1vdmVsYXllcjp0aGlzLnJlZHJhdyxjaGFuZ2ViYXNlbGF5ZXI6dGhpcy5yZWRyYXcsc2NvcGU6dGhpc30pO3RoaXMuZXZlbnRzLnVucmVnaXN0ZXIoImJ1dHRvbmNsaWNrIix0aGlzLHRoaXMub25CdXR0b25DbGljayk7T3BlbkxheWVycy5Db250cm9sLnByb3RvdHlwZS5kZXN0cm95LmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sc2V0TWFwOmZ1bmN0aW9uKGEpe09wZW5MYXllcnMuQ29udHJvbC5wcm90b3R5cGUuc2V0TWFwLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLm1hcC5ldmVudHMub24oe2FkZGxheWVyOnRoaXMucmVkcmF3LGNoYW5nZWxheWVyOnRoaXMucmVkcmF3LHJlbW92ZWxheWVyOnRoaXMucmVkcmF3LGNoYW5nZWJhc2VsYXllcjp0aGlzLnJlZHJhdyxzY29wZTp0aGlzfSk7dGhpcy5vdXRzaWRlVmlld3BvcnQ/KHRoaXMuZXZlbnRzLmF0dGFjaFRvRWxlbWVudCh0aGlzLmRpdiksdGhpcy5ldmVudHMucmVnaXN0ZXIoImJ1dHRvbmNsaWNrIix0aGlzLHRoaXMub25CdXR0b25DbGljaykpOgp0aGlzLm1hcC5ldmVudHMucmVnaXN0ZXIoImJ1dHRvbmNsaWNrIix0aGlzLHRoaXMub25CdXR0b25DbGljayl9LGRyYXc6ZnVuY3Rpb24oKXtPcGVuTGF5ZXJzLkNvbnRyb2wucHJvdG90eXBlLmRyYXcuYXBwbHkodGhpcyk7dGhpcy5sb2FkQ29udGVudHMoKTt0aGlzLm91dHNpZGVWaWV3cG9ydHx8dGhpcy5taW5pbWl6ZUNvbnRyb2woKTt0aGlzLnJlZHJhdygpO3JldHVybiB0aGlzLmRpdn0sb25CdXR0b25DbGljazpmdW5jdGlvbihhKXthPWEuYnV0dG9uRWxlbWVudDthPT09dGhpcy5taW5pbWl6ZURpdj90aGlzLm1pbmltaXplQ29udHJvbCgpOmE9PT10aGlzLm1heGltaXplRGl2P3RoaXMubWF4aW1pemVDb250cm9sKCk6YS5fbGF5ZXJTd2l0Y2hlcj09PXRoaXMuaWQmJihhWyJmb3IiXSYmKGE9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYVsiZm9yIl0pKSxhLmRpc2FibGVkfHwoInJhZGlvIj09YS50eXBlPyhhLmNoZWNrZWQ9ITAsdGhpcy5tYXAuc2V0QmFzZUxheWVyKHRoaXMubWFwLmdldExheWVyKGEuX2xheWVyKSkpOgooYS5jaGVja2VkPSFhLmNoZWNrZWQsdGhpcy51cGRhdGVNYXAoKSkpKX0sY2xlYXJMYXllcnNBcnJheTpmdW5jdGlvbihhKXt0aGlzW2ErIkxheWVyc0RpdiJdLmlubmVySFRNTD0iIjt0aGlzW2ErIkxheWVycyJdPVtdfSxjaGVja1JlZHJhdzpmdW5jdGlvbigpe2lmKCF0aGlzLmxheWVyU3RhdGVzLmxlbmd0aHx8dGhpcy5tYXAubGF5ZXJzLmxlbmd0aCE9dGhpcy5sYXllclN0YXRlcy5sZW5ndGgpcmV0dXJuITA7Zm9yKHZhciBhPTAsYj10aGlzLmxheWVyU3RhdGVzLmxlbmd0aDthPGI7YSsrKXt2YXIgYz10aGlzLmxheWVyU3RhdGVzW2FdLGQ9dGhpcy5tYXAubGF5ZXJzW2FdO2lmKGMubmFtZSE9ZC5uYW1lfHxjLmluUmFuZ2UhPWQuaW5SYW5nZXx8Yy5pZCE9ZC5pZHx8Yy52aXNpYmlsaXR5IT1kLnZpc2liaWxpdHkpcmV0dXJuITB9cmV0dXJuITF9LHJlZHJhdzpmdW5jdGlvbigpe2lmKCF0aGlzLmNoZWNrUmVkcmF3KCkpcmV0dXJuIHRoaXMuZGl2O3RoaXMuY2xlYXJMYXllcnNBcnJheSgiYmFzZSIpOwp0aGlzLmNsZWFyTGF5ZXJzQXJyYXkoImRhdGEiKTt2YXIgYT0hMSxiPSExLGM9dGhpcy5tYXAubGF5ZXJzLmxlbmd0aDt0aGlzLmxheWVyU3RhdGVzPUFycmF5KGMpO2Zvcih2YXIgZD0wO2Q8YztkKyspe3ZhciBlPXRoaXMubWFwLmxheWVyc1tkXTt0aGlzLmxheWVyU3RhdGVzW2RdPXtuYW1lOmUubmFtZSx2aXNpYmlsaXR5OmUudmlzaWJpbGl0eSxpblJhbmdlOmUuaW5SYW5nZSxpZDplLmlkfX12YXIgZj10aGlzLm1hcC5sYXllcnMuc2xpY2UoKTt0aGlzLmFzY2VuZGluZ3x8Zi5yZXZlcnNlKCk7ZD0wO2ZvcihjPWYubGVuZ3RoO2Q8YztkKyspe3ZhciBlPWZbZF0sZz1lLmlzQmFzZUxheWVyO2lmKGUuZGlzcGxheUluTGF5ZXJTd2l0Y2hlcil7Zz9iPSEwOmE9ITA7dmFyIGg9Zz9lPT10aGlzLm1hcC5iYXNlTGF5ZXI6ZS5nZXRWaXNpYmlsaXR5KCksaz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbnB1dCIpLGw9T3BlbkxheWVycy5VdGlsLmNyZWF0ZVVuaXF1ZUlEKHRoaXMuaWQrCiJfaW5wdXRfIik7ay5pZD1sO2submFtZT1nP3RoaXMuaWQrIl9iYXNlTGF5ZXJzIjplLm5hbWU7ay50eXBlPWc/InJhZGlvIjoiY2hlY2tib3giO2sudmFsdWU9ZS5uYW1lO2suY2hlY2tlZD1oO2suZGVmYXVsdENoZWNrZWQ9aDtrLmNsYXNzTmFtZT0ib2xCdXR0b24iO2suX2xheWVyPWUuaWQ7ay5fbGF5ZXJTd2l0Y2hlcj10aGlzLmlkO2d8fGUuaW5SYW5nZXx8KGsuZGlzYWJsZWQ9ITApO2g9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgibGFiZWwiKTtoWyJmb3IiXT1rLmlkO09wZW5MYXllcnMuRWxlbWVudC5hZGRDbGFzcyhoLCJsYWJlbFNwYW4gb2xCdXR0b24iKTtoLl9sYXllcj1lLmlkO2guX2xheWVyU3dpdGNoZXI9dGhpcy5pZDtnfHxlLmluUmFuZ2V8fChoLnN0eWxlLmNvbG9yPSJncmF5Iik7aC5pbm5lckhUTUw9ZS5uYW1lO2guc3R5bGUudmVydGljYWxBbGlnbj1nPyJib3R0b20iOiJiYXNlbGluZSI7bD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJiciIpOyhnP3RoaXMuYmFzZUxheWVyczoKdGhpcy5kYXRhTGF5ZXJzKS5wdXNoKHtsYXllcjplLGlucHV0RWxlbTprLGxhYmVsU3BhbjpofSk7ZT1nP3RoaXMuYmFzZUxheWVyc0Rpdjp0aGlzLmRhdGFMYXllcnNEaXY7ZS5hcHBlbmRDaGlsZChrKTtlLmFwcGVuZENoaWxkKGgpO2UuYXBwZW5kQ2hpbGQobCl9fXRoaXMuZGF0YUxibC5zdHlsZS5kaXNwbGF5PWE/IiI6Im5vbmUiO3RoaXMuYmFzZUxibC5zdHlsZS5kaXNwbGF5PWI/IiI6Im5vbmUiO3JldHVybiB0aGlzLmRpdn0sdXBkYXRlTWFwOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPTAsYj10aGlzLmJhc2VMYXllcnMubGVuZ3RoO2E8YjthKyspe3ZhciBjPXRoaXMuYmFzZUxheWVyc1thXTtjLmlucHV0RWxlbS5jaGVja2VkJiZ0aGlzLm1hcC5zZXRCYXNlTGF5ZXIoYy5sYXllciwhMSl9YT0wO2ZvcihiPXRoaXMuZGF0YUxheWVycy5sZW5ndGg7YTxiO2ErKyljPXRoaXMuZGF0YUxheWVyc1thXSxjLmxheWVyLnNldFZpc2liaWxpdHkoYy5pbnB1dEVsZW0uY2hlY2tlZCl9LG1heGltaXplQ29udHJvbDpmdW5jdGlvbihhKXt0aGlzLmRpdi5zdHlsZS53aWR0aD0KIiI7dGhpcy5kaXYuc3R5bGUuaGVpZ2h0PSIiO3RoaXMuc2hvd0NvbnRyb2xzKCExKTtudWxsIT1hJiZPcGVuTGF5ZXJzLkV2ZW50LnN0b3AoYSl9LG1pbmltaXplQ29udHJvbDpmdW5jdGlvbihhKXt0aGlzLmRpdi5zdHlsZS53aWR0aD0iMHB4Ijt0aGlzLmRpdi5zdHlsZS5oZWlnaHQ9IjBweCI7dGhpcy5zaG93Q29udHJvbHMoITApO251bGwhPWEmJk9wZW5MYXllcnMuRXZlbnQuc3RvcChhKX0sc2hvd0NvbnRyb2xzOmZ1bmN0aW9uKGEpe3RoaXMubWF4aW1pemVEaXYuc3R5bGUuZGlzcGxheT1hPyIiOiJub25lIjt0aGlzLm1pbmltaXplRGl2LnN0eWxlLmRpc3BsYXk9YT8ibm9uZSI6IiI7dGhpcy5sYXllcnNEaXYuc3R5bGUuZGlzcGxheT1hPyJub25lIjoiIn0sbG9hZENvbnRlbnRzOmZ1bmN0aW9uKCl7dGhpcy5sYXllcnNEaXY9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7dGhpcy5sYXllcnNEaXYuaWQ9dGhpcy5pZCsiX2xheWVyc0RpdiI7T3BlbkxheWVycy5FbGVtZW50LmFkZENsYXNzKHRoaXMubGF5ZXJzRGl2LAoibGF5ZXJzRGl2Iik7dGhpcy5iYXNlTGJsPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO3RoaXMuYmFzZUxibC5pbm5lckhUTUw9T3BlbkxheWVycy5pMThuKCJCYXNlIExheWVyIik7T3BlbkxheWVycy5FbGVtZW50LmFkZENsYXNzKHRoaXMuYmFzZUxibCwiYmFzZUxibCIpO3RoaXMuYmFzZUxheWVyc0Rpdj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTtPcGVuTGF5ZXJzLkVsZW1lbnQuYWRkQ2xhc3ModGhpcy5iYXNlTGF5ZXJzRGl2LCJiYXNlTGF5ZXJzRGl2Iik7dGhpcy5kYXRhTGJsPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO3RoaXMuZGF0YUxibC5pbm5lckhUTUw9T3BlbkxheWVycy5pMThuKCJPdmVybGF5cyIpO09wZW5MYXllcnMuRWxlbWVudC5hZGRDbGFzcyh0aGlzLmRhdGFMYmwsImRhdGFMYmwiKTt0aGlzLmRhdGFMYXllcnNEaXY9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7T3BlbkxheWVycy5FbGVtZW50LmFkZENsYXNzKHRoaXMuZGF0YUxheWVyc0RpdiwKImRhdGFMYXllcnNEaXYiKTt0aGlzLmFzY2VuZGluZz8odGhpcy5sYXllcnNEaXYuYXBwZW5kQ2hpbGQodGhpcy5iYXNlTGJsKSx0aGlzLmxheWVyc0Rpdi5hcHBlbmRDaGlsZCh0aGlzLmJhc2VMYXllcnNEaXYpLHRoaXMubGF5ZXJzRGl2LmFwcGVuZENoaWxkKHRoaXMuZGF0YUxibCksdGhpcy5sYXllcnNEaXYuYXBwZW5kQ2hpbGQodGhpcy5kYXRhTGF5ZXJzRGl2KSk6KHRoaXMubGF5ZXJzRGl2LmFwcGVuZENoaWxkKHRoaXMuZGF0YUxibCksdGhpcy5sYXllcnNEaXYuYXBwZW5kQ2hpbGQodGhpcy5kYXRhTGF5ZXJzRGl2KSx0aGlzLmxheWVyc0Rpdi5hcHBlbmRDaGlsZCh0aGlzLmJhc2VMYmwpLHRoaXMubGF5ZXJzRGl2LmFwcGVuZENoaWxkKHRoaXMuYmFzZUxheWVyc0RpdikpO3RoaXMuZGl2LmFwcGVuZENoaWxkKHRoaXMubGF5ZXJzRGl2KTt2YXIgYT1PcGVuTGF5ZXJzLlV0aWwuZ2V0SW1hZ2VMb2NhdGlvbigibGF5ZXItc3dpdGNoZXItbWF4aW1pemUucG5nIik7dGhpcy5tYXhpbWl6ZURpdj0KT3BlbkxheWVycy5VdGlsLmNyZWF0ZUFscGhhSW1hZ2VEaXYoIk9wZW5MYXllcnNfQ29udHJvbF9NYXhpbWl6ZURpdiIsbnVsbCxudWxsLGEsImFic29sdXRlIik7T3BlbkxheWVycy5FbGVtZW50LmFkZENsYXNzKHRoaXMubWF4aW1pemVEaXYsIm1heGltaXplRGl2IG9sQnV0dG9uIik7dGhpcy5tYXhpbWl6ZURpdi5zdHlsZS5kaXNwbGF5PSJub25lIjt0aGlzLmRpdi5hcHBlbmRDaGlsZCh0aGlzLm1heGltaXplRGl2KTthPU9wZW5MYXllcnMuVXRpbC5nZXRJbWFnZUxvY2F0aW9uKCJsYXllci1zd2l0Y2hlci1taW5pbWl6ZS5wbmciKTt0aGlzLm1pbmltaXplRGl2PU9wZW5MYXllcnMuVXRpbC5jcmVhdGVBbHBoYUltYWdlRGl2KCJPcGVuTGF5ZXJzX0NvbnRyb2xfTWluaW1pemVEaXYiLG51bGwsbnVsbCxhLCJhYnNvbHV0ZSIpO09wZW5MYXllcnMuRWxlbWVudC5hZGRDbGFzcyh0aGlzLm1pbmltaXplRGl2LCJtaW5pbWl6ZURpdiBvbEJ1dHRvbiIpO3RoaXMubWluaW1pemVEaXYuc3R5bGUuZGlzcGxheT0KIm5vbmUiO3RoaXMuZGl2LmFwcGVuZENoaWxkKHRoaXMubWluaW1pemVEaXYpfSxDTEFTU19OQU1FOiJPcGVuTGF5ZXJzLkNvbnRyb2wuTGF5ZXJTd2l0Y2hlciJ9KTsK",
                "headers": {
                    "Accept-Ranges": "bytes",
                    "Last-Modified": "Fri, 07 Nov 2014 21:19:49 GMT",
                    "Content-Length": "292536",
                    "Date": "Fri, 07 Nov 2014 21:19:49 GMT",
                    "Content-Type": "application/javascript"
                },
                "cookies": [],
                "mimeType": "script",
                "host": "localhost",
                "protocol": "http",
                "port": 9999,
                "inScope": false,
                "toolFlag": 16962,
                "referenceID": 0,
                "messageType": "response"
            },
            "messageType": "requestResponse"
        }
    ],
    "inScope": true,
    "messageType": "scanIssue"
}