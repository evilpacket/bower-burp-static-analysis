{
    "url": "http://localhost:9999/charbelrami/material-jekyll/bower_components/polymer/polymer.js",
    "host": "localhost",
    "port": 9999,
    "protocol": "http",
    "name": "Link manipulation (DOM-based)",
    "issueType": 5246976,
    "severity": "Low",
    "confidence": "Firm",
    "issueBackground": "DOM-based link manipulation vulnerabilities arise when a client-side script within an application's response reads data from a controllable part of the DOM (for example, the URL), and writes this to a navigation target within the current page, such as a clickable link or the submission URL of a form. An attacker may be able to use the vulnerability to construct a URL which, if visited by another application user, will modify the target of links within the response. An attacker may be able to leverage this to perform various attacks, including:<ul><li>Causing the user to redirect to an arbitrary external URL, to facilitate a phishing attack.</li><li>Causing the user to submit sensitive form data to a server controlled by the attacker.</li><li>Causing the user to perform an unintended action within the application, by changing the file or query string associated with a link.</li><li>Bypassing browser anti-XSS defenses by injecting on-site links containing XSS exploits, since browser anti-XSS defenses typically do not operate on on-site links.</li></ul>",
    "remediationBackground": "Static analysis of code to identify vulnerabilities of this kind may lead to false positives that are not actually exploitable. You should review the highlighted code and related execution paths to determine whether the application is indeed vulnerable, or whether mitigations are in place that would prevent exploitation.<br><br>The most effective way to avoid DOM-based link manipulation vulnerabilities is not to dynamically set the target URLs of links or forms using data that originated from any untrusted source. If the desired functionality of the application means that this behavior is unavoidable, then defenses must be implemented within the client-side code to prevent malicious data from introducing an arbitrary URL as a link target. In general, this is best achieved by using a whitelist of URLs that are permitted link targets, and strictly validating the target against this list before setting the link target.",
    "issueDetail": "The application may be vulnerable to DOM-based link manipulation. Data is read from <b>the 'baseURI' property of a DOM element</b> and written to <b>the 'href' property of a DOM element</b> via the following statement:<ul><li>c.href=document.baseURI,b.stagingDocument_.head.appendChild(c),b.stagingDocument_.stagingDocument_=b.stagingDocument_</li></ul>",
    "requestResponses": [
        {
            "request": {
                "host": "localhost",
                "port": 9999,
                "protocol": "http",
                "url": "http://localhost:9999/charbelrami/material-jekyll/bower_components/polymer/polymer.js",
                "path": "/charbelrami/material-jekyll/bower_components/polymer/polymer.js",
                "httpVersion": "HTTP/1.1",
                "method": "GET",
                "headers": {
                    "Host": "localhost:9999"
                },
                "body": "",
                "raw": "R0VUIC9jaGFyYmVscmFtaS9tYXRlcmlhbC1qZWt5bGwvYm93ZXJfY29tcG9uZW50cy9wb2x5bWVyL3BvbHltZXIuanMgSFRUUC8xLjENCkhvc3Q6IGxvY2FsaG9zdDo5OTk5DQoNCg==",
                "inScope": true,
                "toolFlag": 16962,
                "referenceID": 0,
                "messageType": "request"
            },
            "response": {
                "statusCode": 200,
                "raw": "SFRUUC8xLjEgMjAwIE9LDQpDb250ZW50LUxlbmd0aDogMTEyNzM0DQpBY2NlcHQtUmFuZ2VzOiBieXRlcw0KQ29udGVudC1UeXBlOiBhcHBsaWNhdGlvbi9qYXZhc2NyaXB0DQpEYXRlOiBGcmksIDA3IE5vdiAyMDE0IDA5OjI2OjQyIEdNVA0KTGFzdC1Nb2RpZmllZDogRnJpLCAwNyBOb3YgMjAxNCAwOToyNjo0MCBHTVQNCg0KLyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAoYykgMjAxNCBUaGUgUG9seW1lciBQcm9qZWN0IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuCiAqIFRoaXMgY29kZSBtYXkgb25seSBiZSB1c2VkIHVuZGVyIHRoZSBCU0Qgc3R5bGUgbGljZW5zZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vTElDRU5TRS50eHQKICogVGhlIGNvbXBsZXRlIHNldCBvZiBhdXRob3JzIG1heSBiZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQVVUSE9SUy50eHQKICogVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9DT05UUklCVVRPUlMudHh0CiAqIENvZGUgZGlzdHJpYnV0ZWQgYnkgR29vZ2xlIGFzIHBhcnQgb2YgdGhlIHBvbHltZXIgcHJvamVjdCBpcyBhbHNvCiAqIHN1YmplY3QgdG8gYW4gYWRkaXRpb25hbCBJUCByaWdodHMgZ3JhbnQgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL1BBVEVOVFMudHh0CiAqLwovLyBAdmVyc2lvbjogMC40LjIKd2luZG93LlBvbHltZXJHZXN0dXJlcz17fSxmdW5jdGlvbihhKXt2YXIgYj0hMSxjPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIm1ldGEiKTtpZihjLmNyZWF0ZVNoYWRvd1Jvb3Qpe3ZhciBkPWMuY3JlYXRlU2hhZG93Um9vdCgpLGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3BhbiIpO2QuYXBwZW5kQ2hpbGQoZSksYy5hZGRFdmVudExpc3RlbmVyKCJ0ZXN0cGF0aCIsZnVuY3Rpb24oYSl7YS5wYXRoJiYoYj1hLnBhdGhbMF09PT1lKSxhLnN0b3BQcm9wYWdhdGlvbigpfSk7dmFyIGY9bmV3IEN1c3RvbUV2ZW50KCJ0ZXN0cGF0aCIse2J1YmJsZXM6ITB9KTtkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKGMpLGUuZGlzcGF0Y2hFdmVudChmKSxjLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYyksZD1lPW51bGx9Yz1udWxsO3ZhciBnPXtzaGFkb3c6ZnVuY3Rpb24oYSl7cmV0dXJuIGE/YS5zaGFkb3dSb290fHxhLndlYmtpdFNoYWRvd1Jvb3Q6dm9pZCAwfSxjYW5UYXJnZXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGEmJkJvb2xlYW4oYS5lbGVtZW50RnJvbVBvaW50KX0sdGFyZ2V0aW5nU2hhZG93OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuc2hhZG93KGEpO3JldHVybiB0aGlzLmNhblRhcmdldChiKT9iOnZvaWQgMH0sb2xkZXJTaGFkb3c6ZnVuY3Rpb24oYSl7dmFyIGI9YS5vbGRlclNoYWRvd1Jvb3Q7aWYoIWIpe3ZhciBjPWEucXVlcnlTZWxlY3Rvcigic2hhZG93Iik7YyYmKGI9Yy5vbGRlclNoYWRvd1Jvb3QpfXJldHVybiBifSxhbGxTaGFkb3dzOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1bXSxjPXRoaXMuc2hhZG93KGEpO2M7KWIucHVzaChjKSxjPXRoaXMub2xkZXJTaGFkb3coYyk7cmV0dXJuIGJ9LHNlYXJjaFJvb3Q6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGU7cmV0dXJuIGE/KGQ9YS5lbGVtZW50RnJvbVBvaW50KGIsYyksZD9lPXRoaXMudGFyZ2V0aW5nU2hhZG93KGQpOmEhPT1kb2N1bWVudCYmKGU9dGhpcy5vbGRlclNoYWRvdyhhKSksdGhpcy5zZWFyY2hSb290KGUsYixjKXx8ZCk6dm9pZCAwfSxvd25lcjpmdW5jdGlvbihhKXtpZighYSlyZXR1cm4gZG9jdW1lbnQ7Zm9yKHZhciBiPWE7Yi5wYXJlbnROb2RlOyliPWIucGFyZW50Tm9kZTtyZXR1cm4gYi5ub2RlVHlwZSE9Tm9kZS5ET0NVTUVOVF9OT0RFJiZiLm5vZGVUeXBlIT1Ob2RlLkRPQ1VNRU5UX0ZSQUdNRU5UX05PREUmJihiPWRvY3VtZW50KSxifSxmaW5kVGFyZ2V0OmZ1bmN0aW9uKGEpe2lmKGImJmEucGF0aCYmYS5wYXRoLmxlbmd0aClyZXR1cm4gYS5wYXRoWzBdO3ZhciBjPWEuY2xpZW50WCxkPWEuY2xpZW50WSxlPXRoaXMub3duZXIoYS50YXJnZXQpO3JldHVybiBlLmVsZW1lbnRGcm9tUG9pbnQoYyxkKXx8KGU9ZG9jdW1lbnQpLHRoaXMuc2VhcmNoUm9vdChlLGMsZCl9LGZpbmRUb3VjaEFjdGlvbjpmdW5jdGlvbihhKXt2YXIgYztpZihiJiZhLnBhdGgmJmEucGF0aC5sZW5ndGgpe2Zvcih2YXIgZD1hLnBhdGgsZT0wO2U8ZC5sZW5ndGg7ZSsrKWlmKGM9ZFtlXSxjLm5vZGVUeXBlPT09Tm9kZS5FTEVNRU5UX05PREUmJmMuaGFzQXR0cmlidXRlKCJ0b3VjaC1hY3Rpb24iKSlyZXR1cm4gYy5nZXRBdHRyaWJ1dGUoInRvdWNoLWFjdGlvbiIpfWVsc2UgZm9yKGM9YS50YXJnZXQ7Yzspe2lmKGMubm9kZVR5cGU9PT1Ob2RlLkVMRU1FTlRfTk9ERSYmYy5oYXNBdHRyaWJ1dGUoInRvdWNoLWFjdGlvbiIpKXJldHVybiBjLmdldEF0dHJpYnV0ZSgidG91Y2gtYWN0aW9uIik7Yz1jLnBhcmVudE5vZGV8fGMuaG9zdH1yZXR1cm4iYXV0byJ9LExDQTpmdW5jdGlvbihhLGIpe2lmKGE9PT1iKXJldHVybiBhO2lmKGEmJiFiKXJldHVybiBhO2lmKGImJiFhKXJldHVybiBiO2lmKCFiJiYhYSlyZXR1cm4gZG9jdW1lbnQ7aWYoYS5jb250YWlucyYmYS5jb250YWlucyhiKSlyZXR1cm4gYTtpZihiLmNvbnRhaW5zJiZiLmNvbnRhaW5zKGEpKXJldHVybiBiO3ZhciBjPXRoaXMuZGVwdGgoYSksZD10aGlzLmRlcHRoKGIpLGU9Yy1kO2ZvcihlPj0wP2E9dGhpcy53YWxrKGEsZSk6Yj10aGlzLndhbGsoYiwtZSk7YSYmYiYmYSE9PWI7KWE9YS5wYXJlbnROb2RlfHxhLmhvc3QsYj1iLnBhcmVudE5vZGV8fGIuaG9zdDtyZXR1cm4gYX0sd2FsazpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz0wO2EmJmI+YztjKyspYT1hLnBhcmVudE5vZGV8fGEuaG9zdDtyZXR1cm4gYX0sZGVwdGg6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPTA7YTspYisrLGE9YS5wYXJlbnROb2RlfHxhLmhvc3Q7cmV0dXJuIGJ9LGRlZXBDb250YWluczpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuTENBKGEsYik7cmV0dXJuIGM9PT1hfSxpbnNpZGVOb2RlOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD1hLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO3JldHVybiBkLmxlZnQ8PWImJmI8PWQucmlnaHQmJmQudG9wPD1jJiZjPD1kLmJvdHRvbX0scGF0aDpmdW5jdGlvbihhKXt2YXIgYztpZihiJiZhLnBhdGgmJmEucGF0aC5sZW5ndGgpYz1hLnBhdGg7ZWxzZXtjPVtdO2Zvcih2YXIgZD10aGlzLmZpbmRUYXJnZXQoYSk7ZDspYy5wdXNoKGQpLGQ9ZC5wYXJlbnROb2RlfHxkLmhvc3R9cmV0dXJuIGN9fTthLnRhcmdldEZpbmRpbmc9ZyxhLmZpbmRUYXJnZXQ9Zy5maW5kVGFyZ2V0LmJpbmQoZyksYS5kZWVwQ29udGFpbnM9Zy5kZWVwQ29udGFpbnMuYmluZChnKSxhLmluc2lkZU5vZGU9Zy5pbnNpZGVOb2RlfSh3aW5kb3cuUG9seW1lckdlc3R1cmVzKSxmdW5jdGlvbigpe2Z1bmN0aW9uIGEoYSl7cmV0dXJuImh0bWwgL2RlZXAvICIrYihhKX1mdW5jdGlvbiBiKGEpe3JldHVybidbdG91Y2gtYWN0aW9uPSInK2ErJyJdJ31mdW5jdGlvbiBjKGEpe3JldHVybiJ7IC1tcy10b3VjaC1hY3Rpb246ICIrYSsiOyB0b3VjaC1hY3Rpb246ICIrYSsiO30ifXZhciBkPVsibm9uZSIsImF1dG8iLCJwYW4teCIsInBhbi15Iix7cnVsZToicGFuLXggcGFuLXkiLHNlbGVjdG9yczpbInBhbi14IHBhbi15IiwicGFuLXkgcGFuLXgiXX0sIm1hbmlwdWxhdGlvbiJdLGU9IiIsZj0ic3RyaW5nIj09dHlwZW9mIGRvY3VtZW50LmhlYWQuc3R5bGUudG91Y2hBY3Rpb24sZz0hd2luZG93LlNoYWRvd0RPTVBvbHlmaWxsJiZkb2N1bWVudC5oZWFkLmNyZWF0ZVNoYWRvd1Jvb3Q7aWYoZil7ZC5mb3JFYWNoKGZ1bmN0aW9uKGQpe1N0cmluZyhkKT09PWQ/KGUrPWIoZCkrYyhkKSsiXG4iLGcmJihlKz1hKGQpK2MoZCkrIlxuIikpOihlKz1kLnNlbGVjdG9ycy5tYXAoYikrYyhkLnJ1bGUpKyJcbiIsZyYmKGUrPWQuc2VsZWN0b3JzLm1hcChhKStjKGQucnVsZSkrIlxuIikpfSk7dmFyIGg9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3R5bGUiKTtoLnRleHRDb250ZW50PWUsZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChoKX19KCksZnVuY3Rpb24oYSl7dmFyIGI9WyJidWJibGVzIiwiY2FuY2VsYWJsZSIsInZpZXciLCJkZXRhaWwiLCJzY3JlZW5YIiwic2NyZWVuWSIsImNsaWVudFgiLCJjbGllbnRZIiwiY3RybEtleSIsImFsdEtleSIsInNoaWZ0S2V5IiwibWV0YUtleSIsImJ1dHRvbiIsInJlbGF0ZWRUYXJnZXQiLCJwYWdlWCIsInBhZ2VZIl0sYz1bITEsITEsbnVsbCxudWxsLDAsMCwwLDAsITEsITEsITEsITEsMCxudWxsLDAsMF0sZD1mdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbigpe319LGU9e3ByZXZlbnRUYXA6ZCxtYWtlQmFzZUV2ZW50OmZ1bmN0aW9uKGEsYil7dmFyIGM9ZG9jdW1lbnQuY3JlYXRlRXZlbnQoIkV2ZW50Iik7cmV0dXJuIGMuaW5pdEV2ZW50KGEsYi5idWJibGVzfHwhMSxiLmNhbmNlbGFibGV8fCExKSxjLnByZXZlbnRUYXA9ZS5wcmV2ZW50VGFwKGMpLGN9LG1ha2VHZXN0dXJlRXZlbnQ6ZnVuY3Rpb24oYSxiKXtiPWJ8fE9iamVjdC5jcmVhdGUobnVsbCk7Zm9yKHZhciBjLGQ9dGhpcy5tYWtlQmFzZUV2ZW50KGEsYiksZT0wLGY9T2JqZWN0LmtleXMoYik7ZTxmLmxlbmd0aDtlKyspYz1mW2VdLGRbY109YltjXTtyZXR1cm4gZH0sbWFrZVBvaW50ZXJFdmVudDpmdW5jdGlvbihhLGQpe2Q9ZHx8T2JqZWN0LmNyZWF0ZShudWxsKTtmb3IodmFyIGUsZj10aGlzLm1ha2VCYXNlRXZlbnQoYSxkKSxnPTA7ZzxiLmxlbmd0aDtnKyspZT1iW2ddLGZbZV09ZFtlXXx8Y1tnXTtmLmJ1dHRvbnM9ZC5idXR0b25zfHwwO3ZhciBoPTA7cmV0dXJuIGg9ZC5wcmVzc3VyZT9kLnByZXNzdXJlOmYuYnV0dG9ucz8uNTowLGYueD1mLmNsaWVudFgsZi55PWYuY2xpZW50WSxmLnBvaW50ZXJJZD1kLnBvaW50ZXJJZHx8MCxmLndpZHRoPWQud2lkdGh8fDAsZi5oZWlnaHQ9ZC5oZWlnaHR8fDAsZi5wcmVzc3VyZT1oLGYudGlsdFg9ZC50aWx0WHx8MCxmLnRpbHRZPWQudGlsdFl8fDAsZi5wb2ludGVyVHlwZT1kLnBvaW50ZXJUeXBlfHwiIixmLmh3VGltZXN0YW1wPWQuaHdUaW1lc3RhbXB8fDAsZi5pc1ByaW1hcnk9ZC5pc1ByaW1hcnl8fCExLGYuX3NvdXJjZT1kLl9zb3VyY2V8fCIiLGZ9fTthLmV2ZW50RmFjdG9yeT1lfSh3aW5kb3cuUG9seW1lckdlc3R1cmVzKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKCl7aWYoYyl7dmFyIGE9bmV3IE1hcDtyZXR1cm4gYS5wb2ludGVycz1kLGF9dGhpcy5rZXlzPVtdLHRoaXMudmFsdWVzPVtdfXZhciBjPXdpbmRvdy5NYXAmJndpbmRvdy5NYXAucHJvdG90eXBlLmZvckVhY2gsZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnNpemV9O2IucHJvdG90eXBlPXtzZXQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmtleXMuaW5kZXhPZihhKTtjPi0xP3RoaXMudmFsdWVzW2NdPWI6KHRoaXMua2V5cy5wdXNoKGEpLHRoaXMudmFsdWVzLnB1c2goYikpfSxoYXM6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMua2V5cy5pbmRleE9mKGEpPi0xfSwiZGVsZXRlIjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmtleXMuaW5kZXhPZihhKTtiPi0xJiYodGhpcy5rZXlzLnNwbGljZShiLDEpLHRoaXMudmFsdWVzLnNwbGljZShiLDEpKX0sZ2V0OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMua2V5cy5pbmRleE9mKGEpO3JldHVybiB0aGlzLnZhbHVlc1tiXX0sY2xlYXI6ZnVuY3Rpb24oKXt0aGlzLmtleXMubGVuZ3RoPTAsdGhpcy52YWx1ZXMubGVuZ3RoPTB9LGZvckVhY2g6ZnVuY3Rpb24oYSxiKXt0aGlzLnZhbHVlcy5mb3JFYWNoKGZ1bmN0aW9uKGMsZCl7YS5jYWxsKGIsYyx0aGlzLmtleXNbZF0sdGhpcyl9LHRoaXMpfSxwb2ludGVyczpmdW5jdGlvbigpe3JldHVybiB0aGlzLmtleXMubGVuZ3RofX0sYS5Qb2ludGVyTWFwPWJ9KHdpbmRvdy5Qb2x5bWVyR2VzdHVyZXMpLGZ1bmN0aW9uKGEpe3ZhciBiLGM9WyJidWJibGVzIiwiY2FuY2VsYWJsZSIsInZpZXciLCJkZXRhaWwiLCJzY3JlZW5YIiwic2NyZWVuWSIsImNsaWVudFgiLCJjbGllbnRZIiwiY3RybEtleSIsImFsdEtleSIsInNoaWZ0S2V5IiwibWV0YUtleSIsImJ1dHRvbiIsInJlbGF0ZWRUYXJnZXQiLCJidXR0b25zIiwicG9pbnRlcklkIiwid2lkdGgiLCJoZWlnaHQiLCJwcmVzc3VyZSIsInRpbHRYIiwidGlsdFkiLCJwb2ludGVyVHlwZSIsImh3VGltZXN0YW1wIiwiaXNQcmltYXJ5IiwidHlwZSIsInRhcmdldCIsImN1cnJlbnRUYXJnZXQiLCJ3aGljaCIsInBhZ2VYIiwicGFnZVkiLCJ0aW1lU3RhbXAiLCJwcmV2ZW50VGFwIiwidGFwUHJldmVudGVkIiwiX3NvdXJjZSJdLGQ9WyExLCExLG51bGwsbnVsbCwwLDAsMCwwLCExLCExLCExLCExLDAsbnVsbCwwLDAsMCwwLDAsMCwwLCIiLDAsITEsIiIsbnVsbCxudWxsLDAsMCwwLDAsZnVuY3Rpb24oKXt9LCExXSxlPSJ1bmRlZmluZWQiIT10eXBlb2YgU1ZHRWxlbWVudEluc3RhbmNlLGY9YS5ldmVudEZhY3RvcnksZz17SVNfSU9TOiExLHBvaW50ZXJtYXA6bmV3IGEuUG9pbnRlck1hcCxyZXF1aXJlZEdlc3R1cmVzOm5ldyBhLlBvaW50ZXJNYXAsZXZlbnRNYXA6T2JqZWN0LmNyZWF0ZShudWxsKSxldmVudFNvdXJjZXM6T2JqZWN0LmNyZWF0ZShudWxsKSxldmVudFNvdXJjZUxpc3Q6W10sZ2VzdHVyZXM6W10sZGVwZW5kZW5jeU1hcDp7ZG93bjp7bGlzdGVuZXJzOjAsaW5kZXg6LTF9LHVwOntsaXN0ZW5lcnM6MCxpbmRleDotMX19LGdlc3R1cmVRdWV1ZTpbXSxyZWdpc3RlclNvdXJjZTpmdW5jdGlvbihhLGIpe3ZhciBjPWIsZD1jLmV2ZW50cztkJiYoZC5mb3JFYWNoKGZ1bmN0aW9uKGEpe2NbYV0mJih0aGlzLmV2ZW50TWFwW2FdPWNbYV0uYmluZChjKSl9LHRoaXMpLHRoaXMuZXZlbnRTb3VyY2VzW2FdPWMsdGhpcy5ldmVudFNvdXJjZUxpc3QucHVzaChjKSl9LHJlZ2lzdGVyR2VzdHVyZTpmdW5jdGlvbihhLGIpe3ZhciBjPU9iamVjdC5jcmVhdGUobnVsbCk7Yy5saXN0ZW5lcnM9MCxjLmluZGV4PXRoaXMuZ2VzdHVyZXMubGVuZ3RoO2Zvcih2YXIgZCxlPTA7ZTxiLmV4cG9zZXMubGVuZ3RoO2UrKylkPWIuZXhwb3Nlc1tlXS50b0xvd2VyQ2FzZSgpLHRoaXMuZGVwZW5kZW5jeU1hcFtkXT1jO3RoaXMuZ2VzdHVyZXMucHVzaChiKX0scmVnaXN0ZXI6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGMsZD10aGlzLmV2ZW50U291cmNlTGlzdC5sZW5ndGgsZT0wO2Q+ZSYmKGM9dGhpcy5ldmVudFNvdXJjZUxpc3RbZV0pO2UrKyljLnJlZ2lzdGVyLmNhbGwoYyxhLGIpfSx1bnJlZ2lzdGVyOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYixjPXRoaXMuZXZlbnRTb3VyY2VMaXN0Lmxlbmd0aCxkPTA7Yz5kJiYoYj10aGlzLmV2ZW50U291cmNlTGlzdFtkXSk7ZCsrKWIudW5yZWdpc3Rlci5jYWxsKGIsYSl9LGRvd246ZnVuY3Rpb24oYSl7dGhpcy5yZXF1aXJlZEdlc3R1cmVzLnNldChhLnBvaW50ZXJJZCxiKSx0aGlzLmZpcmVFdmVudCgiZG93biIsYSl9LG1vdmU6ZnVuY3Rpb24oYSl7YS50eXBlPSJtb3ZlIix0aGlzLmZpbGxHZXN0dXJlUXVldWUoYSl9LHVwOmZ1bmN0aW9uKGEpe3RoaXMuZmlyZUV2ZW50KCJ1cCIsYSksdGhpcy5yZXF1aXJlZEdlc3R1cmVzLmRlbGV0ZShhLnBvaW50ZXJJZCl9LGNhbmNlbDpmdW5jdGlvbihhKXthLnRhcFByZXZlbnRlZD0hMCx0aGlzLmZpcmVFdmVudCgidXAiLGEpLHRoaXMucmVxdWlyZWRHZXN0dXJlcy5kZWxldGUoYS5wb2ludGVySWQpfSxhZGRHZXN0dXJlRGVwZW5kZW5jeTpmdW5jdGlvbihhLGIpe3ZhciBjPWEuX3BnRXZlbnRzO2lmKGMpZm9yKHZhciBkLGUsZixnPU9iamVjdC5rZXlzKGMpLGg9MDtoPGcubGVuZ3RoO2grKylmPWdbaF0sY1tmXT4wJiYoZD10aGlzLmRlcGVuZGVuY3lNYXBbZl0sZT1kP2QuaW5kZXg6LTEsYltlXT0hMCl9LGV2ZW50SGFuZGxlcjpmdW5jdGlvbihjKXt2YXIgZD1jLnR5cGU7aWYoInRvdWNoc3RhcnQiPT09ZHx8Im1vdXNlZG93biI9PT1kfHwicG9pbnRlcmRvd24iPT09ZHx8Ik1TUG9pbnRlckRvd24iPT09ZClpZihjLl9oYW5kbGVkQnlQR3x8KGI9e30pLHRoaXMuSVNfSU9TKWZvcih2YXIgZSxmPWEudGFyZ2V0RmluZGluZy5wYXRoKGMpLGc9MDtnPGYubGVuZ3RoO2crKyllPWZbZ10sdGhpcy5hZGRHZXN0dXJlRGVwZW5kZW5jeShlLGIpO2Vsc2UgdGhpcy5hZGRHZXN0dXJlRGVwZW5kZW5jeShjLmN1cnJlbnRUYXJnZXQsYik7aWYoIWMuX2hhbmRsZWRCeVBHKXt2YXIgaD10aGlzLmV2ZW50TWFwJiZ0aGlzLmV2ZW50TWFwW2RdO2gmJmgoYyksYy5faGFuZGxlZEJ5UEc9ITB9fSxsaXN0ZW46ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGMsZD0wLGU9Yi5sZW5ndGg7ZT5kJiYoYz1iW2RdKTtkKyspdGhpcy5hZGRFdmVudChhLGMpfSx1bmxpc3RlbjpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYyxkPTAsZT1iLmxlbmd0aDtlPmQmJihjPWJbZF0pO2QrKyl0aGlzLnJlbW92ZUV2ZW50KGEsYyl9LGFkZEV2ZW50OmZ1bmN0aW9uKGEsYil7YS5hZGRFdmVudExpc3RlbmVyKGIsdGhpcy5ib3VuZEhhbmRsZXIpfSxyZW1vdmVFdmVudDpmdW5jdGlvbihhLGIpe2EucmVtb3ZlRXZlbnRMaXN0ZW5lcihiLHRoaXMuYm91bmRIYW5kbGVyKX0sbWFrZUV2ZW50OmZ1bmN0aW9uKGEsYil7dmFyIGM9Zi5tYWtlUG9pbnRlckV2ZW50KGEsYik7cmV0dXJuIGMucHJldmVudERlZmF1bHQ9Yi5wcmV2ZW50RGVmYXVsdCxjLnRhcFByZXZlbnRlZD1iLnRhcFByZXZlbnRlZCxjLl90YXJnZXQ9Yy5fdGFyZ2V0fHxiLnRhcmdldCxjfSxmaXJlRXZlbnQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLm1ha2VFdmVudChhLGIpO3JldHVybiB0aGlzLmRpc3BhdGNoRXZlbnQoYyl9LGNsb25lRXZlbnQ6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiLGY9T2JqZWN0LmNyZWF0ZShudWxsKSxnPTA7ZzxjLmxlbmd0aDtnKyspYj1jW2ddLGZbYl09YVtiXXx8ZFtnXSwoInRhcmdldCI9PT1ifHwicmVsYXRlZFRhcmdldCI9PT1iKSYmZSYmZltiXWluc3RhbmNlb2YgU1ZHRWxlbWVudEluc3RhbmNlJiYoZltiXT1mW2JdLmNvcnJlc3BvbmRpbmdVc2VFbGVtZW50KTtyZXR1cm4gZi5wcmV2ZW50RGVmYXVsdD1mdW5jdGlvbigpe2EucHJldmVudERlZmF1bHQoKX0sZn0sZGlzcGF0Y2hFdmVudDpmdW5jdGlvbihhKXt2YXIgYj1hLl90YXJnZXQ7aWYoYil7Yi5kaXNwYXRjaEV2ZW50KGEpO3ZhciBjPXRoaXMuY2xvbmVFdmVudChhKTtjLnRhcmdldD1iLHRoaXMuZmlsbEdlc3R1cmVRdWV1ZShjKX19LGdlc3R1cmVUcmlnZ2VyOmZ1bmN0aW9uKCl7Zm9yKHZhciBhLGIsYz0wO2M8dGhpcy5nZXN0dXJlUXVldWUubGVuZ3RoO2MrKyl7YT10aGlzLmdlc3R1cmVRdWV1ZVtjXSxiPWEuX3JlcXVpcmVkR2VzdHVyZXM7Zm9yKHZhciBkLGUsZj0wO2Y8dGhpcy5nZXN0dXJlcy5sZW5ndGg7ZisrKWJbZl0mJihkPXRoaXMuZ2VzdHVyZXNbZl0sZT1kW2EudHlwZV0sZSYmZS5jYWxsKGQsYSkpfXRoaXMuZ2VzdHVyZVF1ZXVlLmxlbmd0aD0wfSxmaWxsR2VzdHVyZVF1ZXVlOmZ1bmN0aW9uKGEpe3RoaXMuZ2VzdHVyZVF1ZXVlLmxlbmd0aHx8cmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRoaXMuYm91bmRHZXN0dXJlVHJpZ2dlciksYS5fcmVxdWlyZWRHZXN0dXJlcz10aGlzLnJlcXVpcmVkR2VzdHVyZXMuZ2V0KGEucG9pbnRlcklkKSx0aGlzLmdlc3R1cmVRdWV1ZS5wdXNoKGEpfX07Zy5ib3VuZEhhbmRsZXI9Zy5ldmVudEhhbmRsZXIuYmluZChnKSxnLmJvdW5kR2VzdHVyZVRyaWdnZXI9Zy5nZXN0dXJlVHJpZ2dlci5iaW5kKGcpLGEuZGlzcGF0Y2hlcj1nLGEuYWN0aXZhdGVHZXN0dXJlPWZ1bmN0aW9uKGEsYil7dmFyIGM9Yi50b0xvd2VyQ2FzZSgpLGQ9Zy5kZXBlbmRlbmN5TWFwW2NdO2lmKGQpe3ZhciBlPWcuZ2VzdHVyZXNbZC5pbmRleF07aWYoYS5fcGdMaXN0ZW5lcnN8fChnLnJlZ2lzdGVyKGEpLGEuX3BnTGlzdGVuZXJzPTApLGUpe3ZhciBmLGg9ZS5kZWZhdWx0QWN0aW9ucyYmZS5kZWZhdWx0QWN0aW9uc1tjXTtzd2l0Y2goYS5ub2RlVHlwZSl7Y2FzZSBOb2RlLkVMRU1FTlRfTk9ERTpmPWE7YnJlYWs7Y2FzZSBOb2RlLkRPQ1VNRU5UX0ZSQUdNRU5UX05PREU6Zj1hLmhvc3Q7YnJlYWs7ZGVmYXVsdDpmPW51bGx9aCYmZiYmIWYuaGFzQXR0cmlidXRlKCJ0b3VjaC1hY3Rpb24iKSYmZi5zZXRBdHRyaWJ1dGUoInRvdWNoLWFjdGlvbiIsaCl9YS5fcGdFdmVudHN8fChhLl9wZ0V2ZW50cz17fSksYS5fcGdFdmVudHNbY109KGEuX3BnRXZlbnRzW2NdfHwwKSsxLGEuX3BnTGlzdGVuZXJzKyt9cmV0dXJuIEJvb2xlYW4oZCl9LGEuYWRkRXZlbnRMaXN0ZW5lcj1mdW5jdGlvbihiLGMsZCxlKXtkJiYoYS5hY3RpdmF0ZUdlc3R1cmUoYixjKSxiLmFkZEV2ZW50TGlzdGVuZXIoYyxkLGUpKX0sYS5kZWFjdGl2YXRlR2VzdHVyZT1mdW5jdGlvbihhLGIpe3ZhciBjPWIudG9Mb3dlckNhc2UoKSxkPWcuZGVwZW5kZW5jeU1hcFtjXTtyZXR1cm4gZCYmKGEuX3BnTGlzdGVuZXJzPjAmJmEuX3BnTGlzdGVuZXJzLS0sMD09PWEuX3BnTGlzdGVuZXJzJiZnLnVucmVnaXN0ZXIoYSksYS5fcGdFdmVudHMmJihhLl9wZ0V2ZW50c1tjXT4wP2EuX3BnRXZlbnRzW2NdLS06YS5fcGdFdmVudHNbY109MCkpLEJvb2xlYW4oZCl9LGEucmVtb3ZlRXZlbnRMaXN0ZW5lcj1mdW5jdGlvbihiLGMsZCxlKXtkJiYoYS5kZWFjdGl2YXRlR2VzdHVyZShiLGMpLGIucmVtb3ZlRXZlbnRMaXN0ZW5lcihjLGQsZSkpfX0od2luZG93LlBvbHltZXJHZXN0dXJlcyksZnVuY3Rpb24oYSl7dmFyIGI9YS5kaXNwYXRjaGVyLGM9Yi5wb2ludGVybWFwLGQ9MjUsZT1bMCwxLDQsMl0sZj0hMTt0cnl7Zj0xPT09bmV3IE1vdXNlRXZlbnQoInRlc3QiLHtidXR0b25zOjF9KS5idXR0b25zfWNhdGNoKGcpe312YXIgaD17UE9JTlRFUl9JRDoxLFBPSU5URVJfVFlQRToibW91c2UiLGV2ZW50czpbIm1vdXNlZG93biIsIm1vdXNlbW92ZSIsIm1vdXNldXAiXSxleHBvc2VzOlsiZG93biIsInVwIiwibW92ZSJdLHJlZ2lzdGVyOmZ1bmN0aW9uKGEpe2IubGlzdGVuKGEsdGhpcy5ldmVudHMpfSx1bnJlZ2lzdGVyOmZ1bmN0aW9uKGEpe2EhPT1kb2N1bWVudCYmYi51bmxpc3RlbihhLHRoaXMuZXZlbnRzKX0sbGFzdFRvdWNoZXM6W10saXNFdmVudFNpbXVsYXRlZEZyb21Ub3VjaDpmdW5jdGlvbihhKXtmb3IodmFyIGIsYz10aGlzLmxhc3RUb3VjaGVzLGU9YS5jbGllbnRYLGY9YS5jbGllbnRZLGc9MCxoPWMubGVuZ3RoO2g+ZyYmKGI9Y1tnXSk7ZysrKXt2YXIgaT1NYXRoLmFicyhlLWIueCksaj1NYXRoLmFicyhmLWIueSk7aWYoZD49aSYmZD49ailyZXR1cm4hMH19LHByZXBhcmVFdmVudDpmdW5jdGlvbihhKXt2YXIgYz1iLmNsb25lRXZlbnQoYSk7cmV0dXJuIGMucG9pbnRlcklkPXRoaXMuUE9JTlRFUl9JRCxjLmlzUHJpbWFyeT0hMCxjLnBvaW50ZXJUeXBlPXRoaXMuUE9JTlRFUl9UWVBFLGMuX3NvdXJjZT0ibW91c2UiLGZ8fChjLmJ1dHRvbnM9ZVtjLndoaWNoXXx8MCksY30sbW91c2Vkb3duOmZ1bmN0aW9uKGQpe2lmKCF0aGlzLmlzRXZlbnRTaW11bGF0ZWRGcm9tVG91Y2goZCkpe3ZhciBlPWMuaGFzKHRoaXMuUE9JTlRFUl9JRCk7ZSYmdGhpcy5tb3VzZXVwKGQpO3ZhciBmPXRoaXMucHJlcGFyZUV2ZW50KGQpO2YudGFyZ2V0PWEuZmluZFRhcmdldChkKSxjLnNldCh0aGlzLlBPSU5URVJfSUQsZi50YXJnZXQpLGIuZG93bihmKX19LG1vdXNlbW92ZTpmdW5jdGlvbihhKXtpZighdGhpcy5pc0V2ZW50U2ltdWxhdGVkRnJvbVRvdWNoKGEpKXt2YXIgZD1jLmdldCh0aGlzLlBPSU5URVJfSUQpO2lmKGQpe3ZhciBlPXRoaXMucHJlcGFyZUV2ZW50KGEpO2UudGFyZ2V0PWQsMD09PWUuYnV0dG9ucz8oYi5jYW5jZWwoZSksdGhpcy5jbGVhbnVwTW91c2UoKSk6Yi5tb3ZlKGUpfX19LG1vdXNldXA6ZnVuY3Rpb24oZCl7aWYoIXRoaXMuaXNFdmVudFNpbXVsYXRlZEZyb21Ub3VjaChkKSl7dmFyIGU9dGhpcy5wcmVwYXJlRXZlbnQoZCk7ZS5yZWxhdGVkVGFyZ2V0PWEuZmluZFRhcmdldChkKSxlLnRhcmdldD1jLmdldCh0aGlzLlBPSU5URVJfSUQpLGIudXAoZSksdGhpcy5jbGVhbnVwTW91c2UoKX19LGNsZWFudXBNb3VzZTpmdW5jdGlvbigpe2NbImRlbGV0ZSJdKHRoaXMuUE9JTlRFUl9JRCl9fTthLm1vdXNlRXZlbnRzPWh9KHdpbmRvdy5Qb2x5bWVyR2VzdHVyZXMpLGZ1bmN0aW9uKGEpe3ZhciBiPWEuZGlzcGF0Y2hlcixjPShhLnRhcmdldEZpbmRpbmcuYWxsU2hhZG93cy5iaW5kKGEudGFyZ2V0RmluZGluZyksYi5wb2ludGVybWFwKSxkPShBcnJheS5wcm90b3R5cGUubWFwLmNhbGwuYmluZChBcnJheS5wcm90b3R5cGUubWFwKSwyNTAwKSxlPTIwMCxmPTIwLGc9ITEsaD17SVNfSU9TOiExLGV2ZW50czpbInRvdWNoc3RhcnQiLCJ0b3VjaG1vdmUiLCJ0b3VjaGVuZCIsInRvdWNoY2FuY2VsIl0sZXhwb3NlczpbImRvd24iLCJ1cCIsIm1vdmUiXSxyZWdpc3RlcjpmdW5jdGlvbihhLGMpeyh0aGlzLklTX0lPUz9jOiFjKSYmYi5saXN0ZW4oYSx0aGlzLmV2ZW50cyl9LHVucmVnaXN0ZXI6ZnVuY3Rpb24oYSl7dGhpcy5JU19JT1N8fGIudW5saXN0ZW4oYSx0aGlzLmV2ZW50cyl9LHNjcm9sbFR5cGVzOntFTUlUVEVSOiJub25lIixYU0NST0xMRVI6InBhbi14IixZU0NST0xMRVI6InBhbi15In0sdG91Y2hBY3Rpb25Ub1Njcm9sbFR5cGU6ZnVuY3Rpb24oYSl7dmFyIGI9YSxjPXRoaXMuc2Nyb2xsVHlwZXM7cmV0dXJuIGI9PT1jLkVNSVRURVI/Im5vbmUiOmI9PT1jLlhTQ1JPTExFUj8iWCI6Yj09PWMuWVNDUk9MTEVSPyJZIjoiWFkifSxQT0lOVEVSX1RZUEU6InRvdWNoIixmaXJzdFRvdWNoOm51bGwsaXNQcmltYXJ5VG91Y2g6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZmlyc3RUb3VjaD09PWEuaWRlbnRpZmllcn0sc2V0UHJpbWFyeVRvdWNoOmZ1bmN0aW9uKGEpeygwPT09Yy5wb2ludGVycygpfHwxPT09Yy5wb2ludGVycygpJiZjLmhhcygxKSkmJih0aGlzLmZpcnN0VG91Y2g9YS5pZGVudGlmaWVyLHRoaXMuZmlyc3RYWT17WDphLmNsaWVudFgsWTphLmNsaWVudFl9LHRoaXMuc2Nyb2xsaW5nPW51bGwsdGhpcy5jYW5jZWxSZXNldENsaWNrQ291bnQoKSl9LHJlbW92ZVByaW1hcnlQb2ludGVyOmZ1bmN0aW9uKGEpe2EuaXNQcmltYXJ5JiYodGhpcy5maXJzdFRvdWNoPW51bGwsdGhpcy5maXJzdFhZPW51bGwsdGhpcy5yZXNldENsaWNrQ291bnQoKSl9LGNsaWNrQ291bnQ6MCxyZXNldElkOm51bGwscmVzZXRDbGlja0NvdW50OmZ1bmN0aW9uKCl7dmFyIGE9ZnVuY3Rpb24oKXt0aGlzLmNsaWNrQ291bnQ9MCx0aGlzLnJlc2V0SWQ9bnVsbH0uYmluZCh0aGlzKTt0aGlzLnJlc2V0SWQ9c2V0VGltZW91dChhLGUpfSxjYW5jZWxSZXNldENsaWNrQ291bnQ6ZnVuY3Rpb24oKXt0aGlzLnJlc2V0SWQmJmNsZWFyVGltZW91dCh0aGlzLnJlc2V0SWQpfSx0eXBlVG9CdXR0b25zOmZ1bmN0aW9uKGEpe3ZhciBiPTA7cmV0dXJuKCJ0b3VjaHN0YXJ0Ij09PWF8fCJ0b3VjaG1vdmUiPT09YSkmJihiPTEpLGJ9LGZpbmRUYXJnZXQ6ZnVuY3Rpb24oYixkKXtpZigidG91Y2hzdGFydCI9PT10aGlzLmN1cnJlbnRUb3VjaEV2ZW50LnR5cGUpe2lmKHRoaXMuaXNQcmltYXJ5VG91Y2goYikpe3ZhciBlPXtjbGllbnRYOmIuY2xpZW50WCxjbGllbnRZOmIuY2xpZW50WSxwYXRoOnRoaXMuY3VycmVudFRvdWNoRXZlbnQucGF0aCx0YXJnZXQ6dGhpcy5jdXJyZW50VG91Y2hFdmVudC50YXJnZXR9O3JldHVybiBhLmZpbmRUYXJnZXQoZSl9cmV0dXJuIGEuZmluZFRhcmdldChiKX1yZXR1cm4gYy5nZXQoZCl9LHRvdWNoVG9Qb2ludGVyOmZ1bmN0aW9uKGEpe3ZhciBjPXRoaXMuY3VycmVudFRvdWNoRXZlbnQsZD1iLmNsb25lRXZlbnQoYSksZT1kLnBvaW50ZXJJZD1hLmlkZW50aWZpZXIrMjtkLnRhcmdldD10aGlzLmZpbmRUYXJnZXQoYSxlKSxkLmJ1YmJsZXM9ITAsZC5jYW5jZWxhYmxlPSEwLGQuZGV0YWlsPXRoaXMuY2xpY2tDb3VudCxkLmJ1dHRvbnM9dGhpcy50eXBlVG9CdXR0b25zKGMudHlwZSksZC53aWR0aD1hLndlYmtpdFJhZGl1c1h8fGEucmFkaXVzWHx8MCxkLmhlaWdodD1hLndlYmtpdFJhZGl1c1l8fGEucmFkaXVzWXx8MCxkLnByZXNzdXJlPWEud2Via2l0Rm9yY2V8fGEuZm9yY2V8fC41LGQuaXNQcmltYXJ5PXRoaXMuaXNQcmltYXJ5VG91Y2goYSksZC5wb2ludGVyVHlwZT10aGlzLlBPSU5URVJfVFlQRSxkLl9zb3VyY2U9InRvdWNoIjt2YXIgZj10aGlzO3JldHVybiBkLnByZXZlbnREZWZhdWx0PWZ1bmN0aW9uKCl7Zi5zY3JvbGxpbmc9ITEsZi5maXJzdFhZPW51bGwsYy5wcmV2ZW50RGVmYXVsdCgpfSxkfSxwcm9jZXNzVG91Y2hlczpmdW5jdGlvbihhLGIpe3ZhciBkPWEuY2hhbmdlZFRvdWNoZXM7dGhpcy5jdXJyZW50VG91Y2hFdmVudD1hO2Zvcih2YXIgZSxmLGc9MDtnPGQubGVuZ3RoO2crKyllPWRbZ10sZj10aGlzLnRvdWNoVG9Qb2ludGVyKGUpLCJ0b3VjaHN0YXJ0Ij09PWEudHlwZSYmYy5zZXQoZi5wb2ludGVySWQsZi50YXJnZXQpLGMuaGFzKGYucG9pbnRlcklkKSYmYi5jYWxsKHRoaXMsZiksKCJ0b3VjaGVuZCI9PT1hLnR5cGV8fGEuX2NhbmNlbCkmJnRoaXMuY2xlYW5VcFBvaW50ZXIoZil9LHNob3VsZFNjcm9sbDpmdW5jdGlvbihiKXtpZih0aGlzLmZpcnN0WFkpe3ZhciBjLGQ9YS50YXJnZXRGaW5kaW5nLmZpbmRUb3VjaEFjdGlvbihiKSxlPXRoaXMudG91Y2hBY3Rpb25Ub1Njcm9sbFR5cGUoZCk7aWYoIm5vbmUiPT09ZSljPSExO2Vsc2UgaWYoIlhZIj09PWUpYz0hMDtlbHNle3ZhciBmPWIuY2hhbmdlZFRvdWNoZXNbMF0sZz1lLGg9IlkiPT09ZT8iWCI6IlkiLGk9TWF0aC5hYnMoZlsiY2xpZW50IitnXS10aGlzLmZpcnN0WFlbZ10pLGo9TWF0aC5hYnMoZlsiY2xpZW50IitoXS10aGlzLmZpcnN0WFlbaF0pO2M9aT49an1yZXR1cm4gY319LGZpbmRUb3VjaDpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYyxkPTAsZT1hLmxlbmd0aDtlPmQmJihjPWFbZF0pO2QrKylpZihjLmlkZW50aWZpZXI9PT1iKXJldHVybiEwfSx2YWN1dW1Ub3VjaGVzOmZ1bmN0aW9uKGEpe3ZhciBiPWEudG91Y2hlcztpZihjLnBvaW50ZXJzKCk+PWIubGVuZ3RoKXt2YXIgZD1bXTtjLmZvckVhY2goZnVuY3Rpb24oYSxjKXtpZigxIT09YyYmIXRoaXMuZmluZFRvdWNoKGIsYy0yKSl7dmFyIGU9YTtkLnB1c2goZSl9fSx0aGlzKSxkLmZvckVhY2goZnVuY3Rpb24oYSl7dGhpcy5jYW5jZWwoYSksYy5kZWxldGUoYS5wb2ludGVySWQpfSl9fSx0b3VjaHN0YXJ0OmZ1bmN0aW9uKGEpe3RoaXMudmFjdXVtVG91Y2hlcyhhKSx0aGlzLnNldFByaW1hcnlUb3VjaChhLmNoYW5nZWRUb3VjaGVzWzBdKSx0aGlzLmRlZHVwU3ludGhNb3VzZShhKSx0aGlzLnNjcm9sbGluZ3x8KHRoaXMuY2xpY2tDb3VudCsrLHRoaXMucHJvY2Vzc1RvdWNoZXMoYSx0aGlzLmRvd24pKX0sZG93bjpmdW5jdGlvbihhKXtiLmRvd24oYSl9LHRvdWNobW92ZTpmdW5jdGlvbihhKXtpZihnKWEuY2FuY2VsYWJsZSYmdGhpcy5wcm9jZXNzVG91Y2hlcyhhLHRoaXMubW92ZSk7ZWxzZSBpZih0aGlzLnNjcm9sbGluZyl7aWYodGhpcy5maXJzdFhZKXt2YXIgYj1hLmNoYW5nZWRUb3VjaGVzWzBdLGM9Yi5jbGllbnRYLXRoaXMuZmlyc3RYWS5YLGQ9Yi5jbGllbnRZLXRoaXMuZmlyc3RYWS5ZLGU9TWF0aC5zcXJ0KGMqYytkKmQpO2U+PWYmJih0aGlzLnRvdWNoY2FuY2VsKGEpLHRoaXMuc2Nyb2xsaW5nPSEwLHRoaXMuZmlyc3RYWT1udWxsKX19ZWxzZSBudWxsPT09dGhpcy5zY3JvbGxpbmcmJnRoaXMuc2hvdWxkU2Nyb2xsKGEpP3RoaXMuc2Nyb2xsaW5nPSEwOih0aGlzLnNjcm9sbGluZz0hMSxhLnByZXZlbnREZWZhdWx0KCksdGhpcy5wcm9jZXNzVG91Y2hlcyhhLHRoaXMubW92ZSkpfSxtb3ZlOmZ1bmN0aW9uKGEpe2IubW92ZShhKX0sdG91Y2hlbmQ6ZnVuY3Rpb24oYSl7dGhpcy5kZWR1cFN5bnRoTW91c2UoYSksdGhpcy5wcm9jZXNzVG91Y2hlcyhhLHRoaXMudXApfSx1cDpmdW5jdGlvbihjKXtjLnJlbGF0ZWRUYXJnZXQ9YS5maW5kVGFyZ2V0KGMpLGIudXAoYyl9LGNhbmNlbDpmdW5jdGlvbihhKXtiLmNhbmNlbChhKX0sdG91Y2hjYW5jZWw6ZnVuY3Rpb24oYSl7YS5fY2FuY2VsPSEwLHRoaXMucHJvY2Vzc1RvdWNoZXMoYSx0aGlzLmNhbmNlbCl9LGNsZWFuVXBQb2ludGVyOmZ1bmN0aW9uKGEpe2NbImRlbGV0ZSJdKGEucG9pbnRlcklkKSx0aGlzLnJlbW92ZVByaW1hcnlQb2ludGVyKGEpfSxkZWR1cFN5bnRoTW91c2U6ZnVuY3Rpb24oYil7dmFyIGM9YS5tb3VzZUV2ZW50cy5sYXN0VG91Y2hlcyxlPWIuY2hhbmdlZFRvdWNoZXNbMF07aWYodGhpcy5pc1ByaW1hcnlUb3VjaChlKSl7dmFyIGY9e3g6ZS5jbGllbnRYLHk6ZS5jbGllbnRZfTtjLnB1c2goZik7dmFyIGc9ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLmluZGV4T2YoYik7Yz4tMSYmYS5zcGxpY2UoYywxKX0uYmluZChudWxsLGMsZik7c2V0VGltZW91dChnLGQpfX19O2EudG91Y2hFdmVudHM9aH0od2luZG93LlBvbHltZXJHZXN0dXJlcyksZnVuY3Rpb24oYSl7dmFyIGI9YS5kaXNwYXRjaGVyLGM9Yi5wb2ludGVybWFwLGQ9d2luZG93Lk1TUG9pbnRlckV2ZW50JiYibnVtYmVyIj09dHlwZW9mIHdpbmRvdy5NU1BvaW50ZXJFdmVudC5NU1BPSU5URVJfVFlQRV9NT1VTRSxlPXtldmVudHM6WyJNU1BvaW50ZXJEb3duIiwiTVNQb2ludGVyTW92ZSIsIk1TUG9pbnRlclVwIiwiTVNQb2ludGVyQ2FuY2VsIl0scmVnaXN0ZXI6ZnVuY3Rpb24oYSl7Yi5saXN0ZW4oYSx0aGlzLmV2ZW50cyl9LHVucmVnaXN0ZXI6ZnVuY3Rpb24oYSl7YSE9PWRvY3VtZW50JiZiLnVubGlzdGVuKGEsdGhpcy5ldmVudHMpfSxQT0lOVEVSX1RZUEVTOlsiIiwidW5hdmFpbGFibGUiLCJ0b3VjaCIsInBlbiIsIm1vdXNlIl0scHJlcGFyZUV2ZW50OmZ1bmN0aW9uKGEpe3ZhciBjPWE7cmV0dXJuIGM9Yi5jbG9uZUV2ZW50KGEpLGQmJihjLnBvaW50ZXJUeXBlPXRoaXMuUE9JTlRFUl9UWVBFU1thLnBvaW50ZXJUeXBlXSksYy5fc291cmNlPSJtcyIsY30sY2xlYW51cDpmdW5jdGlvbihhKXtjWyJkZWxldGUiXShhKX0sTVNQb2ludGVyRG93bjpmdW5jdGlvbihkKXt2YXIgZT10aGlzLnByZXBhcmVFdmVudChkKTtlLnRhcmdldD1hLmZpbmRUYXJnZXQoZCksYy5zZXQoZC5wb2ludGVySWQsZS50YXJnZXQpLGIuZG93bihlKX0sTVNQb2ludGVyTW92ZTpmdW5jdGlvbihhKXt2YXIgZD1jLmdldChhLnBvaW50ZXJJZCk7aWYoZCl7dmFyIGU9dGhpcy5wcmVwYXJlRXZlbnQoYSk7ZS50YXJnZXQ9ZCxiLm1vdmUoZSl9fSxNU1BvaW50ZXJVcDpmdW5jdGlvbihkKXt2YXIgZT10aGlzLnByZXBhcmVFdmVudChkKTtlLnJlbGF0ZWRUYXJnZXQ9YS5maW5kVGFyZ2V0KGQpLGUudGFyZ2V0PWMuZ2V0KGUucG9pbnRlcklkKSxiLnVwKGUpLHRoaXMuY2xlYW51cChkLnBvaW50ZXJJZCl9LE1TUG9pbnRlckNhbmNlbDpmdW5jdGlvbihkKXt2YXIgZT10aGlzLnByZXBhcmVFdmVudChkKTtlLnJlbGF0ZWRUYXJnZXQ9YS5maW5kVGFyZ2V0KGQpLGUudGFyZ2V0PWMuZ2V0KGUucG9pbnRlcklkKSxiLmNhbmNlbChlKSx0aGlzLmNsZWFudXAoZC5wb2ludGVySWQpfX07YS5tc0V2ZW50cz1lfSh3aW5kb3cuUG9seW1lckdlc3R1cmVzKSxmdW5jdGlvbihhKXt2YXIgYj1hLmRpc3BhdGNoZXIsYz1iLnBvaW50ZXJtYXAsZD17ZXZlbnRzOlsicG9pbnRlcmRvd24iLCJwb2ludGVybW92ZSIsInBvaW50ZXJ1cCIsInBvaW50ZXJjYW5jZWwiXSxwcmVwYXJlRXZlbnQ6ZnVuY3Rpb24oYSl7dmFyIGM9Yi5jbG9uZUV2ZW50KGEpO3JldHVybiBjLl9zb3VyY2U9InBvaW50ZXIiLGN9LHJlZ2lzdGVyOmZ1bmN0aW9uKGEpe2IubGlzdGVuKGEsdGhpcy5ldmVudHMpfSx1bnJlZ2lzdGVyOmZ1bmN0aW9uKGEpe2EhPT1kb2N1bWVudCYmYi51bmxpc3RlbihhLHRoaXMuZXZlbnRzKX0sY2xlYW51cDpmdW5jdGlvbihhKXtjWyJkZWxldGUiXShhKX0scG9pbnRlcmRvd246ZnVuY3Rpb24oZCl7dmFyIGU9dGhpcy5wcmVwYXJlRXZlbnQoZCk7ZS50YXJnZXQ9YS5maW5kVGFyZ2V0KGQpLGMuc2V0KGUucG9pbnRlcklkLGUudGFyZ2V0KSxiLmRvd24oZSl9LHBvaW50ZXJtb3ZlOmZ1bmN0aW9uKGEpe3ZhciBkPWMuZ2V0KGEucG9pbnRlcklkKTtpZihkKXt2YXIgZT10aGlzLnByZXBhcmVFdmVudChhKTtlLnRhcmdldD1kLGIubW92ZShlKX19LHBvaW50ZXJ1cDpmdW5jdGlvbihkKXt2YXIgZT10aGlzLnByZXBhcmVFdmVudChkKTtlLnJlbGF0ZWRUYXJnZXQ9YS5maW5kVGFyZ2V0KGQpLGUudGFyZ2V0PWMuZ2V0KGUucG9pbnRlcklkKSxiLnVwKGUpLHRoaXMuY2xlYW51cChkLnBvaW50ZXJJZCl9LHBvaW50ZXJjYW5jZWw6ZnVuY3Rpb24oZCl7dmFyIGU9dGhpcy5wcmVwYXJlRXZlbnQoZCk7ZS5yZWxhdGVkVGFyZ2V0PWEuZmluZFRhcmdldChkKSxlLnRhcmdldD1jLmdldChlLnBvaW50ZXJJZCksYi5jYW5jZWwoZSksdGhpcy5jbGVhbnVwKGQucG9pbnRlcklkKX19O2EucG9pbnRlckV2ZW50cz1kfSh3aW5kb3cuUG9seW1lckdlc3R1cmVzKSxmdW5jdGlvbihhKXt2YXIgYj1hLmRpc3BhdGNoZXIsYz13aW5kb3cubmF2aWdhdG9yO3dpbmRvdy5Qb2ludGVyRXZlbnQ/Yi5yZWdpc3RlclNvdXJjZSgicG9pbnRlciIsYS5wb2ludGVyRXZlbnRzKTpjLm1zUG9pbnRlckVuYWJsZWQ/Yi5yZWdpc3RlclNvdXJjZSgibXMiLGEubXNFdmVudHMpOihiLnJlZ2lzdGVyU291cmNlKCJtb3VzZSIsYS5tb3VzZUV2ZW50cyksdm9pZCAwIT09d2luZG93Lm9udG91Y2hzdGFydCYmYi5yZWdpc3RlclNvdXJjZSgidG91Y2giLGEudG91Y2hFdmVudHMpKTt2YXIgZD1uYXZpZ2F0b3IudXNlckFnZW50LGU9ZC5tYXRjaCgvaVBhZHxpUGhvbmV8aVBvZC8pJiYib250b3VjaHN0YXJ0ImluIHdpbmRvdztiLklTX0lPUz1lLGEudG91Y2hFdmVudHMuSVNfSU9TPWUsYi5yZWdpc3Rlcihkb2N1bWVudCwhMCl9KHdpbmRvdy5Qb2x5bWVyR2VzdHVyZXMpLGZ1bmN0aW9uKGEpe3ZhciBiPWEuZGlzcGF0Y2hlcixjPWEuZXZlbnRGYWN0b3J5LGQ9bmV3IGEuUG9pbnRlck1hcCxlPXtldmVudHM6WyJkb3duIiwibW92ZSIsInVwIl0sZXhwb3NlczpbInRyYWNrc3RhcnQiLCJ0cmFjayIsInRyYWNreCIsInRyYWNreSIsInRyYWNrZW5kIl0sZGVmYXVsdEFjdGlvbnM6e3RyYWNrOiJub25lIix0cmFja3g6InBhbi15Iix0cmFja3k6InBhbi14In0sV0lHR0xFX1RIUkVTSE9MRDo0LGNsYW1wRGlyOmZ1bmN0aW9uKGEpe3JldHVybiBhPjA/MTotMX0sY2FsY1Bvc2l0aW9uRGVsdGE6ZnVuY3Rpb24oYSxiKXt2YXIgYz0wLGQ9MDtyZXR1cm4gYSYmYiYmKGM9Yi5wYWdlWC1hLnBhZ2VYLGQ9Yi5wYWdlWS1hLnBhZ2VZKSx7eDpjLHk6ZH19LGZpcmVUcmFjazpmdW5jdGlvbihhLGIsZCl7dmFyIGU9ZCxmPXRoaXMuY2FsY1Bvc2l0aW9uRGVsdGEoZS5kb3duRXZlbnQsYiksZz10aGlzLmNhbGNQb3NpdGlvbkRlbHRhKGUubGFzdE1vdmVFdmVudCxiKTtpZihnLngpZS54RGlyZWN0aW9uPXRoaXMuY2xhbXBEaXIoZy54KTtlbHNlIGlmKCJ0cmFja3giPT09YSlyZXR1cm47aWYoZy55KWUueURpcmVjdGlvbj10aGlzLmNsYW1wRGlyKGcueSk7ZWxzZSBpZigidHJhY2t5Ij09PWEpcmV0dXJuO3ZhciBoPXtidWJibGVzOiEwLGNhbmNlbGFibGU6ITAsdHJhY2tJbmZvOmUudHJhY2tJbmZvLHJlbGF0ZWRUYXJnZXQ6Yi5yZWxhdGVkVGFyZ2V0LHBvaW50ZXJUeXBlOmIucG9pbnRlclR5cGUscG9pbnRlcklkOmIucG9pbnRlcklkLF9zb3VyY2U6InRyYWNrIn07InRyYWNreSIhPT1hJiYoaC54PWIueCxoLmR4PWYueCxoLmRkeD1nLngsaC5jbGllbnRYPWIuY2xpZW50WCxoLnBhZ2VYPWIucGFnZVgsaC5zY3JlZW5YPWIuc2NyZWVuWCxoLnhEaXJlY3Rpb249ZS54RGlyZWN0aW9uKSwidHJhY2t4IiE9PWEmJihoLmR5PWYueSxoLmRkeT1nLnksaC55PWIueSxoLmNsaWVudFk9Yi5jbGllbnRZLGgucGFnZVk9Yi5wYWdlWSxoLnNjcmVlblk9Yi5zY3JlZW5ZLGgueURpcmVjdGlvbj1lLnlEaXJlY3Rpb24pO3ZhciBpPWMubWFrZUdlc3R1cmVFdmVudChhLGgpO2UuZG93blRhcmdldC5kaXNwYXRjaEV2ZW50KGkpfSxkb3duOmZ1bmN0aW9uKGEpe2lmKGEuaXNQcmltYXJ5JiYoIm1vdXNlIj09PWEucG9pbnRlclR5cGU/MT09PWEuYnV0dG9uczohMCkpe3ZhciBiPXtkb3duRXZlbnQ6YSxkb3duVGFyZ2V0OmEudGFyZ2V0LHRyYWNrSW5mbzp7fSxsYXN0TW92ZUV2ZW50Om51bGwseERpcmVjdGlvbjowLHlEaXJlY3Rpb246MCx0cmFja2luZzohMX07ZC5zZXQoYS5wb2ludGVySWQsYil9fSxtb3ZlOmZ1bmN0aW9uKGEpe3ZhciBiPWQuZ2V0KGEucG9pbnRlcklkKTtpZihiKXtpZighYi50cmFja2luZyl7dmFyIGM9dGhpcy5jYWxjUG9zaXRpb25EZWx0YShiLmRvd25FdmVudCxhKSxlPWMueCpjLngrYy55KmMueTtlPnRoaXMuV0lHR0xFX1RIUkVTSE9MRCYmKGIudHJhY2tpbmc9ITAsYi5sYXN0TW92ZUV2ZW50PWIuZG93bkV2ZW50LHRoaXMuZmlyZVRyYWNrKCJ0cmFja3N0YXJ0IixhLGIpKX1iLnRyYWNraW5nJiYodGhpcy5maXJlVHJhY2soInRyYWNrIixhLGIpLHRoaXMuZmlyZVRyYWNrKCJ0cmFja3giLGEsYiksdGhpcy5maXJlVHJhY2soInRyYWNreSIsYSxiKSksYi5sYXN0TW92ZUV2ZW50PWF9fSx1cDpmdW5jdGlvbihhKXt2YXIgYj1kLmdldChhLnBvaW50ZXJJZCk7YiYmKGIudHJhY2tpbmcmJnRoaXMuZmlyZVRyYWNrKCJ0cmFja2VuZCIsYSxiKSxkLmRlbGV0ZShhLnBvaW50ZXJJZCkpfX07Yi5yZWdpc3Rlckdlc3R1cmUoInRyYWNrIixlKX0od2luZG93LlBvbHltZXJHZXN0dXJlcyksZnVuY3Rpb24oYSl7dmFyIGI9YS5kaXNwYXRjaGVyLGM9YS5ldmVudEZhY3RvcnksZD17SE9MRF9ERUxBWToyMDAsV0lHR0xFX1RIUkVTSE9MRDoxNixldmVudHM6WyJkb3duIiwibW92ZSIsInVwIl0sZXhwb3NlczpbImhvbGQiLCJob2xkcHVsc2UiLCJyZWxlYXNlIl0saGVsZFBvaW50ZXI6bnVsbCxob2xkSm9iOm51bGwscHVsc2U6ZnVuY3Rpb24oKXt2YXIgYT1EYXRlLm5vdygpLXRoaXMuaGVsZFBvaW50ZXIudGltZVN0YW1wLGI9dGhpcy5oZWxkPyJob2xkcHVsc2UiOiJob2xkIjt0aGlzLmZpcmVIb2xkKGIsYSksdGhpcy5oZWxkPSEwfSxjYW5jZWw6ZnVuY3Rpb24oKXtjbGVhckludGVydmFsKHRoaXMuaG9sZEpvYiksdGhpcy5oZWxkJiZ0aGlzLmZpcmVIb2xkKCJyZWxlYXNlIiksdGhpcy5oZWxkPSExLHRoaXMuaGVsZFBvaW50ZXI9bnVsbCx0aGlzLnRhcmdldD1udWxsLHRoaXMuaG9sZEpvYj1udWxsfSxkb3duOmZ1bmN0aW9uKGEpe2EuaXNQcmltYXJ5JiYhdGhpcy5oZWxkUG9pbnRlciYmKHRoaXMuaGVsZFBvaW50ZXI9YSx0aGlzLnRhcmdldD1hLnRhcmdldCx0aGlzLmhvbGRKb2I9c2V0SW50ZXJ2YWwodGhpcy5wdWxzZS5iaW5kKHRoaXMpLHRoaXMuSE9MRF9ERUxBWSkpfSx1cDpmdW5jdGlvbihhKXt0aGlzLmhlbGRQb2ludGVyJiZ0aGlzLmhlbGRQb2ludGVyLnBvaW50ZXJJZD09PWEucG9pbnRlcklkJiZ0aGlzLmNhbmNlbCgpfSxtb3ZlOmZ1bmN0aW9uKGEpe2lmKHRoaXMuaGVsZFBvaW50ZXImJnRoaXMuaGVsZFBvaW50ZXIucG9pbnRlcklkPT09YS5wb2ludGVySWQpe3ZhciBiPWEuY2xpZW50WC10aGlzLmhlbGRQb2ludGVyLmNsaWVudFgsYz1hLmNsaWVudFktdGhpcy5oZWxkUG9pbnRlci5jbGllbnRZO2IqYitjKmM+dGhpcy5XSUdHTEVfVEhSRVNIT0xEJiZ0aGlzLmNhbmNlbCgpfX0sZmlyZUhvbGQ6ZnVuY3Rpb24oYSxiKXt2YXIgZD17YnViYmxlczohMCxjYW5jZWxhYmxlOiEwLHBvaW50ZXJUeXBlOnRoaXMuaGVsZFBvaW50ZXIucG9pbnRlclR5cGUscG9pbnRlcklkOnRoaXMuaGVsZFBvaW50ZXIucG9pbnRlcklkLHg6dGhpcy5oZWxkUG9pbnRlci5jbGllbnRYLHk6dGhpcy5oZWxkUG9pbnRlci5jbGllbnRZLF9zb3VyY2U6ImhvbGQifTtiJiYoZC5ob2xkVGltZT1iKTt2YXIgZT1jLm1ha2VHZXN0dXJlRXZlbnQoYSxkKTt0aGlzLnRhcmdldC5kaXNwYXRjaEV2ZW50KGUpfX07Yi5yZWdpc3Rlckdlc3R1cmUoImhvbGQiLGQpfSh3aW5kb3cuUG9seW1lckdlc3R1cmVzKSxmdW5jdGlvbihhKXt2YXIgYj1hLmRpc3BhdGNoZXIsYz1hLmV2ZW50RmFjdG9yeSxkPW5ldyBhLlBvaW50ZXJNYXAsZT17ZXZlbnRzOlsiZG93biIsInVwIl0sZXhwb3NlczpbInRhcCJdLGRvd246ZnVuY3Rpb24oYSl7YS5pc1ByaW1hcnkmJiFhLnRhcFByZXZlbnRlZCYmZC5zZXQoYS5wb2ludGVySWQse3RhcmdldDphLnRhcmdldCxidXR0b25zOmEuYnV0dG9ucyx4OmEuY2xpZW50WCx5OmEuY2xpZW50WX0pfSxzaG91bGRUYXA6ZnVuY3Rpb24oYSxiKXtyZXR1cm4ibW91c2UiPT09YS5wb2ludGVyVHlwZT8xPT09Yi5idXR0b25zOiFhLnRhcFByZXZlbnRlZH0sdXA6ZnVuY3Rpb24oYil7dmFyIGU9ZC5nZXQoYi5wb2ludGVySWQpO2lmKGUmJnRoaXMuc2hvdWxkVGFwKGIsZSkpe3ZhciBmPWEudGFyZ2V0RmluZGluZy5MQ0EoZS50YXJnZXQsYi5yZWxhdGVkVGFyZ2V0KTtpZihmKXt2YXIgZz1jLm1ha2VHZXN0dXJlRXZlbnQoInRhcCIse2J1YmJsZXM6ITAsY2FuY2VsYWJsZTohMCx4OmIuY2xpZW50WCx5OmIuY2xpZW50WSxkZXRhaWw6Yi5kZXRhaWwscG9pbnRlclR5cGU6Yi5wb2ludGVyVHlwZSxwb2ludGVySWQ6Yi5wb2ludGVySWQsYWx0S2V5OmIuYWx0S2V5LGN0cmxLZXk6Yi5jdHJsS2V5LG1ldGFLZXk6Yi5tZXRhS2V5LHNoaWZ0S2V5OmIuc2hpZnRLZXksX3NvdXJjZToidGFwIn0pO2YuZGlzcGF0Y2hFdmVudChnKX19ZC5kZWxldGUoYi5wb2ludGVySWQpfX07Yy5wcmV2ZW50VGFwPWZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbigpe2EudGFwUHJldmVudGVkPSEwLGQuZGVsZXRlKGEucG9pbnRlcklkKX19LGIucmVnaXN0ZXJHZXN0dXJlKCJ0YXAiLGUpfSh3aW5kb3cuUG9seW1lckdlc3R1cmVzKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhLGIpe2lmKCFhKXRocm93IG5ldyBFcnJvcigiQVNTRVJUOiAiK2IpfWZ1bmN0aW9uIGMoYSl7cmV0dXJuIGE+PTQ4JiY1Nz49YX1mdW5jdGlvbiBkKGEpe3JldHVybiAzMj09PWF8fDk9PT1hfHwxMT09PWF8fDEyPT09YXx8MTYwPT09YXx8YT49NTc2MCYmIlx1MTY4MFx1MTgwZVx1MjAwMFx1MjAwMVx1MjAwMlx1MjAwM1x1MjAwNFx1MjAwNVx1MjAwNlx1MjAwN1x1MjAwOFx1MjAwOVx1MjAwYVx1MjAyZlx1MjA1Zlx1MzAwMFx1ZmVmZiIuaW5kZXhPZihTdHJpbmcuZnJvbUNoYXJDb2RlKGEpKT4wfWZ1bmN0aW9uIGUoYSl7cmV0dXJuIDEwPT09YXx8MTM9PT1hfHw4MjMyPT09YXx8ODIzMz09PWF9ZnVuY3Rpb24gZihhKXtyZXR1cm4gMzY9PT1hfHw5NT09PWF8fGE+PTY1JiY5MD49YXx8YT49OTcmJjEyMj49YX1mdW5jdGlvbiBnKGEpe3JldHVybiAzNj09PWF8fDk1PT09YXx8YT49NjUmJjkwPj1hfHxhPj05NyYmMTIyPj1hfHxhPj00OCYmNTc+PWF9ZnVuY3Rpb24gaChhKXtyZXR1cm4idGhpcyI9PT1hfWZ1bmN0aW9uIGkoKXtmb3IoO1k+WCYmZChXLmNoYXJDb2RlQXQoWCkpOykrK1h9ZnVuY3Rpb24gaigpe3ZhciBhLGI7Zm9yKGE9WCsrO1k+WCYmKGI9Vy5jaGFyQ29kZUF0KFgpLGcoYikpOykrK1g7cmV0dXJuIFcuc2xpY2UoYSxYKX1mdW5jdGlvbiBrKCl7dmFyIGEsYixjO3JldHVybiBhPVgsYj1qKCksYz0xPT09Yi5sZW5ndGg/Uy5JZGVudGlmaWVyOmgoYik/Uy5LZXl3b3JkOiJudWxsIj09PWI/Uy5OdWxsTGl0ZXJhbDoidHJ1ZSI9PT1ifHwiZmFsc2UiPT09Yj9TLkJvb2xlYW5MaXRlcmFsOlMuSWRlbnRpZmllcix7dHlwZTpjLHZhbHVlOmIscmFuZ2U6W2EsWF19fWZ1bmN0aW9uIGwoKXt2YXIgYSxiLGM9WCxkPVcuY2hhckNvZGVBdChYKSxlPVdbWF07c3dpdGNoKGQpe2Nhc2UgNDY6Y2FzZSA0MDpjYXNlIDQxOmNhc2UgNTk6Y2FzZSA0NDpjYXNlIDEyMzpjYXNlIDEyNTpjYXNlIDkxOmNhc2UgOTM6Y2FzZSA1ODpjYXNlIDYzOnJldHVybisrWCx7dHlwZTpTLlB1bmN0dWF0b3IsdmFsdWU6U3RyaW5nLmZyb21DaGFyQ29kZShkKSxyYW5nZTpbYyxYXX07ZGVmYXVsdDppZihhPVcuY2hhckNvZGVBdChYKzEpLDYxPT09YSlzd2l0Y2goZCl7Y2FzZSAzNzpjYXNlIDM4OmNhc2UgNDI6Y2FzZSA0MzpjYXNlIDQ1OmNhc2UgNDc6Y2FzZSA2MDpjYXNlIDYyOmNhc2UgMTI0OnJldHVybiBYKz0yLHt0eXBlOlMuUHVuY3R1YXRvcix2YWx1ZTpTdHJpbmcuZnJvbUNoYXJDb2RlKGQpK1N0cmluZy5mcm9tQ2hhckNvZGUoYSkscmFuZ2U6W2MsWF19O2Nhc2UgMzM6Y2FzZSA2MTpyZXR1cm4gWCs9Miw2MT09PVcuY2hhckNvZGVBdChYKSYmKytYLHt0eXBlOlMuUHVuY3R1YXRvcix2YWx1ZTpXLnNsaWNlKGMsWCkscmFuZ2U6W2MsWF19fX1yZXR1cm4gYj1XW1grMV0sZT09PWImJiImfCIuaW5kZXhPZihlKT49MD8oWCs9Mix7dHlwZTpTLlB1bmN0dWF0b3IsdmFsdWU6ZStiLHJhbmdlOltjLFhdfSk6Ijw+PSErLSolJnxeLyIuaW5kZXhPZihlKT49MD8oKytYLHt0eXBlOlMuUHVuY3R1YXRvcix2YWx1ZTplLHJhbmdlOltjLFhdfSk6dm9pZCBzKHt9LFYuVW5leHBlY3RlZFRva2VuLCJJTExFR0FMIil9ZnVuY3Rpb24gbSgpe3ZhciBhLGQsZTtpZihlPVdbWF0sYihjKGUuY2hhckNvZGVBdCgwKSl8fCIuIj09PWUsIk51bWVyaWMgbGl0ZXJhbCBtdXN0IHN0YXJ0IHdpdGggYSBkZWNpbWFsIGRpZ2l0IG9yIGEgZGVjaW1hbCBwb2ludCIpLGQ9WCxhPSIiLCIuIiE9PWUpe2ZvcihhPVdbWCsrXSxlPVdbWF0sIjAiPT09YSYmZSYmYyhlLmNoYXJDb2RlQXQoMCkpJiZzKHt9LFYuVW5leHBlY3RlZFRva2VuLCJJTExFR0FMIik7YyhXLmNoYXJDb2RlQXQoWCkpOylhKz1XW1grK107ZT1XW1hdfWlmKCIuIj09PWUpe2ZvcihhKz1XW1grK107YyhXLmNoYXJDb2RlQXQoWCkpOylhKz1XW1grK107ZT1XW1hdfWlmKCJlIj09PWV8fCJFIj09PWUpaWYoYSs9V1tYKytdLGU9V1tYXSwoIisiPT09ZXx8Ii0iPT09ZSkmJihhKz1XW1grK10pLGMoVy5jaGFyQ29kZUF0KFgpKSlmb3IoO2MoVy5jaGFyQ29kZUF0KFgpKTspYSs9V1tYKytdO2Vsc2Ugcyh7fSxWLlVuZXhwZWN0ZWRUb2tlbiwiSUxMRUdBTCIpO3JldHVybiBmKFcuY2hhckNvZGVBdChYKSkmJnMoe30sVi5VbmV4cGVjdGVkVG9rZW4sIklMTEVHQUwiKSx7dHlwZTpTLk51bWVyaWNMaXRlcmFsLHZhbHVlOnBhcnNlRmxvYXQoYSkscmFuZ2U6W2QsWF19fWZ1bmN0aW9uIG4oKXt2YXIgYSxjLGQsZj0iIixnPSExO2ZvcihhPVdbWF0sYigiJyI9PT1hfHwnIic9PT1hLCJTdHJpbmcgbGl0ZXJhbCBtdXN0IHN0YXJ0cyB3aXRoIGEgcXVvdGUiKSxjPVgsKytYO1k+WDspe2lmKGQ9V1tYKytdLGQ9PT1hKXthPSIiO2JyZWFrfWlmKCJcXCI9PT1kKWlmKGQ9V1tYKytdLGQmJmUoZC5jaGFyQ29kZUF0KDApKSkiXHIiPT09ZCYmIlxuIj09PVdbWF0mJisrWDtlbHNlIHN3aXRjaChkKXtjYXNlIm4iOmYrPSJcbiI7YnJlYWs7Y2FzZSJyIjpmKz0iXHIiO2JyZWFrO2Nhc2UidCI6Zis9IgkiO2JyZWFrO2Nhc2UiYiI6Zis9IlxiIjticmVhaztjYXNlImYiOmYrPSJcZiI7YnJlYWs7Y2FzZSJ2IjpmKz0iCyI7YnJlYWs7ZGVmYXVsdDpmKz1kfWVsc2V7aWYoZShkLmNoYXJDb2RlQXQoMCkpKWJyZWFrO2YrPWR9fXJldHVybiIiIT09YSYmcyh7fSxWLlVuZXhwZWN0ZWRUb2tlbiwiSUxMRUdBTCIpLHt0eXBlOlMuU3RyaW5nTGl0ZXJhbCx2YWx1ZTpmLG9jdGFsOmcscmFuZ2U6W2MsWF19fWZ1bmN0aW9uIG8oYSl7cmV0dXJuIGEudHlwZT09PVMuSWRlbnRpZmllcnx8YS50eXBlPT09Uy5LZXl3b3JkfHxhLnR5cGU9PT1TLkJvb2xlYW5MaXRlcmFsfHxhLnR5cGU9PT1TLk51bGxMaXRlcmFsfWZ1bmN0aW9uIHAoKXt2YXIgYTtyZXR1cm4gaSgpLFg+PVk/e3R5cGU6Uy5FT0YscmFuZ2U6W1gsWF19OihhPVcuY2hhckNvZGVBdChYKSw0MD09PWF8fDQxPT09YXx8NTg9PT1hP2woKTozOT09PWF8fDM0PT09YT9uKCk6ZihhKT9rKCk6NDY9PT1hP2MoVy5jaGFyQ29kZUF0KFgrMSkpP20oKTpsKCk6YyhhKT9tKCk6bCgpKX1mdW5jdGlvbiBxKCl7dmFyIGE7cmV0dXJuIGE9JCxYPWEucmFuZ2VbMV0sJD1wKCksWD1hLnJhbmdlWzFdLGF9ZnVuY3Rpb24gcigpe3ZhciBhO2E9WCwkPXAoKSxYPWF9ZnVuY3Rpb24gcyhhLGMpe3ZhciBkLGU9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDIpLGY9Yy5yZXBsYWNlKC8lKFxkKS9nLGZ1bmN0aW9uKGEsYyl7cmV0dXJuIGIoYzxlLmxlbmd0aCwiTWVzc2FnZSByZWZlcmVuY2UgbXVzdCBiZSBpbiByYW5nZSIpLGVbY119KTt0aHJvdyBkPW5ldyBFcnJvcihmKSxkLmluZGV4PVgsZC5kZXNjcmlwdGlvbj1mLGR9ZnVuY3Rpb24gdChhKXtzKGEsVi5VbmV4cGVjdGVkVG9rZW4sYS52YWx1ZSl9ZnVuY3Rpb24gdShhKXt2YXIgYj1xKCk7KGIudHlwZSE9PVMuUHVuY3R1YXRvcnx8Yi52YWx1ZSE9PWEpJiZ0KGIpfWZ1bmN0aW9uIHYoYSl7cmV0dXJuICQudHlwZT09PVMuUHVuY3R1YXRvciYmJC52YWx1ZT09PWF9ZnVuY3Rpb24gdyhhKXtyZXR1cm4gJC50eXBlPT09Uy5LZXl3b3JkJiYkLnZhbHVlPT09YX1mdW5jdGlvbiB4KCl7dmFyIGE9W107Zm9yKHUoIlsiKTshdigiXSIpOyl2KCIsIik/KHEoKSxhLnB1c2gobnVsbCkpOihhLnB1c2goYmIoKSksdigiXSIpfHx1KCIsIikpO3JldHVybiB1KCJdIiksWi5jcmVhdGVBcnJheUV4cHJlc3Npb24oYSl9ZnVuY3Rpb24geSgpe3ZhciBhO3JldHVybiBpKCksYT1xKCksYS50eXBlPT09Uy5TdHJpbmdMaXRlcmFsfHxhLnR5cGU9PT1TLk51bWVyaWNMaXRlcmFsP1ouY3JlYXRlTGl0ZXJhbChhKTpaLmNyZWF0ZUlkZW50aWZpZXIoYS52YWx1ZSl9ZnVuY3Rpb24geigpe3ZhciBhLGI7cmV0dXJuIGE9JCxpKCksKGEudHlwZT09PVMuRU9GfHxhLnR5cGU9PT1TLlB1bmN0dWF0b3IpJiZ0KGEpLGI9eSgpLHUoIjoiKSxaLmNyZWF0ZVByb3BlcnR5KCJpbml0IixiLGJiKCkpfWZ1bmN0aW9uIEEoKXt2YXIgYT1bXTtmb3IodSgieyIpOyF2KCJ9Iik7KWEucHVzaCh6KCkpLHYoIn0iKXx8dSgiLCIpO3JldHVybiB1KCJ9IiksWi5jcmVhdGVPYmplY3RFeHByZXNzaW9uKGEpfWZ1bmN0aW9uIEIoKXt2YXIgYTtyZXR1cm4gdSgiKCIpLGE9YmIoKSx1KCIpIiksYX1mdW5jdGlvbiBDKCl7dmFyIGEsYixjO3JldHVybiB2KCIoIik/QigpOihhPSQudHlwZSxhPT09Uy5JZGVudGlmaWVyP2M9Wi5jcmVhdGVJZGVudGlmaWVyKHEoKS52YWx1ZSk6YT09PVMuU3RyaW5nTGl0ZXJhbHx8YT09PVMuTnVtZXJpY0xpdGVyYWw/Yz1aLmNyZWF0ZUxpdGVyYWwocSgpKTphPT09Uy5LZXl3b3JkP3coInRoaXMiKSYmKHEoKSxjPVouY3JlYXRlVGhpc0V4cHJlc3Npb24oKSk6YT09PVMuQm9vbGVhbkxpdGVyYWw/KGI9cSgpLGIudmFsdWU9InRydWUiPT09Yi52YWx1ZSxjPVouY3JlYXRlTGl0ZXJhbChiKSk6YT09PVMuTnVsbExpdGVyYWw/KGI9cSgpLGIudmFsdWU9bnVsbCxjPVouY3JlYXRlTGl0ZXJhbChiKSk6digiWyIpP2M9eCgpOnYoInsiKSYmKGM9QSgpKSxjP2M6dm9pZCB0KHEoKSkpfWZ1bmN0aW9uIEQoKXt2YXIgYT1bXTtpZih1KCIoIiksIXYoIikiKSlmb3IoO1k+WCYmKGEucHVzaChiYigpKSwhdigiKSIpKTspdSgiLCIpO3JldHVybiB1KCIpIiksYX1mdW5jdGlvbiBFKCl7dmFyIGE7cmV0dXJuIGE9cSgpLG8oYSl8fHQoYSksWi5jcmVhdGVJZGVudGlmaWVyKGEudmFsdWUpfWZ1bmN0aW9uIEYoKXtyZXR1cm4gdSgiLiIpLEUoKX1mdW5jdGlvbiBHKCl7dmFyIGE7cmV0dXJuIHUoIlsiKSxhPWJiKCksdSgiXSIpLGF9ZnVuY3Rpb24gSCgpe3ZhciBhLGIsYztmb3IoYT1DKCk7OylpZih2KCJbIikpYz1HKCksYT1aLmNyZWF0ZU1lbWJlckV4cHJlc3Npb24oIlsiLGEsYyk7ZWxzZSBpZih2KCIuIikpYz1GKCksYT1aLmNyZWF0ZU1lbWJlckV4cHJlc3Npb24oIi4iLGEsYyk7ZWxzZXtpZighdigiKCIpKWJyZWFrO2I9RCgpLGE9Wi5jcmVhdGVDYWxsRXhwcmVzc2lvbihhLGIpfXJldHVybiBhfWZ1bmN0aW9uIEkoKXt2YXIgYSxiO3JldHVybiAkLnR5cGUhPT1TLlB1bmN0dWF0b3ImJiQudHlwZSE9PVMuS2V5d29yZD9iPWFiKCk6digiKyIpfHx2KCItIil8fHYoIiEiKT8oYT1xKCksYj1JKCksYj1aLmNyZWF0ZVVuYXJ5RXhwcmVzc2lvbihhLnZhbHVlLGIpKTp3KCJkZWxldGUiKXx8dygidm9pZCIpfHx3KCJ0eXBlb2YiKT9zKHt9LFYuVW5leHBlY3RlZFRva2VuKTpiPWFiKCksYn1mdW5jdGlvbiBKKGEpe3ZhciBiPTA7aWYoYS50eXBlIT09Uy5QdW5jdHVhdG9yJiZhLnR5cGUhPT1TLktleXdvcmQpcmV0dXJuIDA7c3dpdGNoKGEudmFsdWUpe2Nhc2UifHwiOmI9MTticmVhaztjYXNlIiYmIjpiPTI7YnJlYWs7Y2FzZSI9PSI6Y2FzZSIhPSI6Y2FzZSI9PT0iOmNhc2UiIT09IjpiPTY7YnJlYWs7Y2FzZSI8IjpjYXNlIj4iOmNhc2UiPD0iOmNhc2UiPj0iOmNhc2UiaW5zdGFuY2VvZiI6Yj03O2JyZWFrO2Nhc2UiaW4iOmI9NzticmVhaztjYXNlIisiOmNhc2UiLSI6Yj05O2JyZWFrO2Nhc2UiKiI6Y2FzZSIvIjpjYXNlIiUiOmI9MTF9cmV0dXJuIGJ9ZnVuY3Rpb24gSygpe3ZhciBhLGIsYyxkLGUsZixnLGg7aWYoZz1JKCksYj0kLGM9SihiKSwwPT09YylyZXR1cm4gZztmb3IoYi5wcmVjPWMscSgpLGU9SSgpLGQ9W2csYixlXTsoYz1KKCQpKT4wOyl7Zm9yKDtkLmxlbmd0aD4yJiZjPD1kW2QubGVuZ3RoLTJdLnByZWM7KWU9ZC5wb3AoKSxmPWQucG9wKCkudmFsdWUsZz1kLnBvcCgpLGE9Wi5jcmVhdGVCaW5hcnlFeHByZXNzaW9uKGYsZyxlKSxkLnB1c2goYSk7Yj1xKCksYi5wcmVjPWMsZC5wdXNoKGIpLGE9SSgpLGQucHVzaChhKX1mb3IoaD1kLmxlbmd0aC0xLGE9ZFtoXTtoPjE7KWE9Wi5jcmVhdGVCaW5hcnlFeHByZXNzaW9uKGRbaC0xXS52YWx1ZSxkW2gtMl0sYSksaC09MjtyZXR1cm4gYX1mdW5jdGlvbiBMKCl7dmFyIGEsYixjO3JldHVybiBhPUsoKSx2KCI/IikmJihxKCksYj1MKCksdSgiOiIpLGM9TCgpLGE9Wi5jcmVhdGVDb25kaXRpb25hbEV4cHJlc3Npb24oYSxiLGMpKSxhfWZ1bmN0aW9uIE0oKXt2YXIgYSxiO3JldHVybiBhPXEoKSxhLnR5cGUhPT1TLklkZW50aWZpZXImJnQoYSksYj12KCIoIik/RCgpOltdLFouY3JlYXRlRmlsdGVyKGEudmFsdWUsYil9ZnVuY3Rpb24gTigpe2Zvcig7digifCIpOylxKCksTSgpfWZ1bmN0aW9uIE8oKXtpKCkscigpO3ZhciBhPWJiKCk7YSYmKCIsIj09PSQudmFsdWV8fCJpbiI9PSQudmFsdWUmJmEudHlwZT09PVUuSWRlbnRpZmllcj9RKGEpOihOKCksImFzIj09PSQudmFsdWU/UChhKTpaLmNyZWF0ZVRvcExldmVsKGEpKSksJC50eXBlIT09Uy5FT0YmJnQoJCl9ZnVuY3Rpb24gUChhKXtxKCk7dmFyIGI9cSgpLnZhbHVlO1ouY3JlYXRlQXNFeHByZXNzaW9uKGEsYil9ZnVuY3Rpb24gUShhKXt2YXIgYjsiLCI9PT0kLnZhbHVlJiYocSgpLCQudHlwZSE9PVMuSWRlbnRpZmllciYmdCgkKSxiPXEoKS52YWx1ZSkscSgpO3ZhciBjPWJiKCk7TigpLFouY3JlYXRlSW5FeHByZXNzaW9uKGEubmFtZSxiLGMpfWZ1bmN0aW9uIFIoYSxiKXtyZXR1cm4gWj1iLFc9YSxYPTAsWT1XLmxlbmd0aCwkPW51bGwsXz17bGFiZWxTZXQ6e319LE8oKX12YXIgUyxULFUsVixXLFgsWSxaLCQsXztTPXtCb29sZWFuTGl0ZXJhbDoxLEVPRjoyLElkZW50aWZpZXI6MyxLZXl3b3JkOjQsTnVsbExpdGVyYWw6NSxOdW1lcmljTGl0ZXJhbDo2LFB1bmN0dWF0b3I6NyxTdHJpbmdMaXRlcmFsOjh9LFQ9e30sVFtTLkJvb2xlYW5MaXRlcmFsXT0iQm9vbGVhbiIsVFtTLkVPRl09IjxlbmQ+IixUW1MuSWRlbnRpZmllcl09IklkZW50aWZpZXIiLFRbUy5LZXl3b3JkXT0iS2V5d29yZCIsVFtTLk51bGxMaXRlcmFsXT0iTnVsbCIsVFtTLk51bWVyaWNMaXRlcmFsXT0iTnVtZXJpYyIsVFtTLlB1bmN0dWF0b3JdPSJQdW5jdHVhdG9yIixUW1MuU3RyaW5nTGl0ZXJhbF09IlN0cmluZyIsVT17QXJyYXlFeHByZXNzaW9uOiJBcnJheUV4cHJlc3Npb24iLEJpbmFyeUV4cHJlc3Npb246IkJpbmFyeUV4cHJlc3Npb24iLENhbGxFeHByZXNzaW9uOiJDYWxsRXhwcmVzc2lvbiIsQ29uZGl0aW9uYWxFeHByZXNzaW9uOiJDb25kaXRpb25hbEV4cHJlc3Npb24iLEVtcHR5U3RhdGVtZW50OiJFbXB0eVN0YXRlbWVudCIsRXhwcmVzc2lvblN0YXRlbWVudDoiRXhwcmVzc2lvblN0YXRlbWVudCIsSWRlbnRpZmllcjoiSWRlbnRpZmllciIsTGl0ZXJhbDoiTGl0ZXJhbCIsTGFiZWxlZFN0YXRlbWVudDoiTGFiZWxlZFN0YXRlbWVudCIsTG9naWNhbEV4cHJlc3Npb246IkxvZ2ljYWxFeHByZXNzaW9uIixNZW1iZXJFeHByZXNzaW9uOiJNZW1iZXJFeHByZXNzaW9uIixPYmplY3RFeHByZXNzaW9uOiJPYmplY3RFeHByZXNzaW9uIixQcm9ncmFtOiJQcm9ncmFtIixQcm9wZXJ0eToiUHJvcGVydHkiLFRoaXNFeHByZXNzaW9uOiJUaGlzRXhwcmVzc2lvbiIsVW5hcnlFeHByZXNzaW9uOiJVbmFyeUV4cHJlc3Npb24ifSxWPXtVbmV4cGVjdGVkVG9rZW46IlVuZXhwZWN0ZWQgdG9rZW4gJTAiLFVua25vd25MYWJlbDoiVW5kZWZpbmVkIGxhYmVsICclMCciLFJlZGVjbGFyYXRpb246IiUwICclMScgaGFzIGFscmVhZHkgYmVlbiBkZWNsYXJlZCJ9O3ZhciBhYj1ILGJiPUw7YS5lc3ByaW1hPXtwYXJzZTpSfX0odGhpcyksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSxiLGQsZSl7dmFyIGY7dHJ5e2lmKGY9YyhhKSxmLnNjb3BlSWRlbnQmJihkLm5vZGVUeXBlIT09Tm9kZS5FTEVNRU5UX05PREV8fCJURU1QTEFURSIhPT1kLnRhZ05hbWV8fCJiaW5kIiE9PWImJiJyZXBlYXQiIT09YikpdGhyb3cgRXJyb3IoImFzIGFuZCBpbiBjYW4gb25seSBiZSB1c2VkIHdpdGhpbiA8dGVtcGxhdGUgYmluZC9yZXBlYXQ+Iil9Y2F0Y2goZyl7cmV0dXJuIHZvaWQgY29uc29sZS5lcnJvcigiSW52YWxpZCBleHByZXNzaW9uIHN5bnRheDogIithLGcpfXJldHVybiBmdW5jdGlvbihhLGIsYyl7dmFyIGQ9Zi5nZXRCaW5kaW5nKGEsZSxjKTtyZXR1cm4gZi5zY29wZUlkZW50JiZkJiYoYi5wb2x5bWVyRXhwcmVzc2lvblNjb3BlSWRlbnRfPWYuc2NvcGVJZGVudCxmLmluZGV4SWRlbnQmJihiLnBvbHltZXJFeHByZXNzaW9uSW5kZXhJZGVudF89Zi5pbmRleElkZW50KSksZH19ZnVuY3Rpb24gYyhhKXt2YXIgYj1xW2FdO2lmKCFiKXt2YXIgYz1uZXcgajtlc3ByaW1hLnBhcnNlKGEsYyksYj1uZXcgbChjKSxxW2FdPWJ9cmV0dXJuIGJ9ZnVuY3Rpb24gZChhKXt0aGlzLnZhbHVlPWEsdGhpcy52YWx1ZUZuXz12b2lkIDB9ZnVuY3Rpb24gZShhKXt0aGlzLm5hbWU9YSx0aGlzLnBhdGg9UGF0aC5nZXQoYSl9ZnVuY3Rpb24gZihhLGIsYyl7dGhpcy5jb21wdXRlZD0iWyI9PWMsdGhpcy5keW5hbWljRGVwcz0iZnVuY3Rpb24iPT10eXBlb2YgYXx8YS5keW5hbWljRGVwc3x8dGhpcy5jb21wdXRlZCYmIShiIGluc3RhbmNlb2YgZCksdGhpcy5zaW1wbGVQYXRoPSF0aGlzLmR5bmFtaWNEZXBzJiYoYiBpbnN0YW5jZW9mIGV8fGIgaW5zdGFuY2VvZiBkKSYmKGEgaW5zdGFuY2VvZiBmfHxhIGluc3RhbmNlb2YgZSksdGhpcy5vYmplY3Q9dGhpcy5zaW1wbGVQYXRoP2E6aShhKSx0aGlzLnByb3BlcnR5PSF0aGlzLmNvbXB1dGVkfHx0aGlzLnNpbXBsZVBhdGg/YjppKGIpfWZ1bmN0aW9uIGcoYSxiKXt0aGlzLm5hbWU9YSx0aGlzLmFyZ3M9W107Zm9yKHZhciBjPTA7YzxiLmxlbmd0aDtjKyspdGhpcy5hcmdzW2NdPWkoYltjXSl9ZnVuY3Rpb24gaCgpe3Rocm93IEVycm9yKCJOb3QgSW1wbGVtZW50ZWQiKX1mdW5jdGlvbiBpKGEpe3JldHVybiJmdW5jdGlvbiI9PXR5cGVvZiBhP2E6YS52YWx1ZUZuKCl9ZnVuY3Rpb24gaigpe3RoaXMuZXhwcmVzc2lvbj1udWxsLHRoaXMuZmlsdGVycz1bXSx0aGlzLmRlcHM9e30sdGhpcy5jdXJyZW50UGF0aD12b2lkIDAsdGhpcy5zY29wZUlkZW50PXZvaWQgMCx0aGlzLmluZGV4SWRlbnQ9dm9pZCAwLHRoaXMuZHluYW1pY0RlcHM9ITF9ZnVuY3Rpb24gayhhKXt0aGlzLnZhbHVlXz1hfWZ1bmN0aW9uIGwoYSl7aWYodGhpcy5zY29wZUlkZW50PWEuc2NvcGVJZGVudCx0aGlzLmluZGV4SWRlbnQ9YS5pbmRleElkZW50LCFhLmV4cHJlc3Npb24pdGhyb3cgRXJyb3IoIk5vIGV4cHJlc3Npb24gZm91bmQuIik7dGhpcy5leHByZXNzaW9uPWEuZXhwcmVzc2lvbixpKHRoaXMuZXhwcmVzc2lvbiksdGhpcy5maWx0ZXJzPWEuZmlsdGVycyx0aGlzLmR5bmFtaWNEZXBzPWEuZHluYW1pY0RlcHN9ZnVuY3Rpb24gbShhKXtyZXR1cm4gU3RyaW5nKGEpLnJlcGxhY2UoL1tBLVpdL2csZnVuY3Rpb24oYSl7cmV0dXJuIi0iK2EudG9Mb3dlckNhc2UoKX0pfWZ1bmN0aW9uIG4oYSxiKXtmb3IoO2FbdF0mJiFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYSxiKTspYT1hW3RdO3JldHVybiBhfWZ1bmN0aW9uIG8oYSl7c3dpdGNoKGEpe2Nhc2UiIjpyZXR1cm4hMTtjYXNlImZhbHNlIjpjYXNlIm51bGwiOmNhc2UidHJ1ZSI6cmV0dXJuITB9cmV0dXJuIGlzTmFOKE51bWJlcihhKSk/ITE6ITB9ZnVuY3Rpb24gcCgpe312YXIgcT1PYmplY3QuY3JlYXRlKG51bGwpO2QucHJvdG90eXBlPXt2YWx1ZUZuOmZ1bmN0aW9uKCl7aWYoIXRoaXMudmFsdWVGbl8pe3ZhciBhPXRoaXMudmFsdWU7dGhpcy52YWx1ZUZuXz1mdW5jdGlvbigpe3JldHVybiBhfX1yZXR1cm4gdGhpcy52YWx1ZUZuX319LGUucHJvdG90eXBlPXt2YWx1ZUZuOmZ1bmN0aW9uKCl7aWYoIXRoaXMudmFsdWVGbl8pe3ZhciBhPSh0aGlzLm5hbWUsdGhpcy5wYXRoKTt0aGlzLnZhbHVlRm5fPWZ1bmN0aW9uKGIsYyl7cmV0dXJuIGMmJmMuYWRkUGF0aChiLGEpLGEuZ2V0VmFsdWVGcm9tKGIpfX1yZXR1cm4gdGhpcy52YWx1ZUZuX30sc2V0VmFsdWU6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gMT09dGhpcy5wYXRoLmxlbmd0aCxhPW4oYSx0aGlzLnBhdGhbMF0pLHRoaXMucGF0aC5zZXRWYWx1ZUZyb20oYSxiKX19LGYucHJvdG90eXBlPXtnZXQgZnVsbFBhdGgoKXtpZighdGhpcy5mdWxsUGF0aF8pe3ZhciBhPXRoaXMub2JqZWN0IGluc3RhbmNlb2YgZj90aGlzLm9iamVjdC5mdWxsUGF0aC5zbGljZSgpOlt0aGlzLm9iamVjdC5uYW1lXTsKYS5wdXNoKHRoaXMucHJvcGVydHkgaW5zdGFuY2VvZiBlP3RoaXMucHJvcGVydHkubmFtZTp0aGlzLnByb3BlcnR5LnZhbHVlKSx0aGlzLmZ1bGxQYXRoXz1QYXRoLmdldChhKX1yZXR1cm4gdGhpcy5mdWxsUGF0aF99LHZhbHVlRm46ZnVuY3Rpb24oKXtpZighdGhpcy52YWx1ZUZuXyl7dmFyIGE9dGhpcy5vYmplY3Q7aWYodGhpcy5zaW1wbGVQYXRoKXt2YXIgYj10aGlzLmZ1bGxQYXRoO3RoaXMudmFsdWVGbl89ZnVuY3Rpb24oYSxjKXtyZXR1cm4gYyYmYy5hZGRQYXRoKGEsYiksYi5nZXRWYWx1ZUZyb20oYSl9fWVsc2UgaWYodGhpcy5jb21wdXRlZCl7dmFyIGM9dGhpcy5wcm9wZXJ0eTt0aGlzLnZhbHVlRm5fPWZ1bmN0aW9uKGIsZCxlKXt2YXIgZj1hKGIsZCxlKSxnPWMoYixkLGUpO3JldHVybiBkJiZkLmFkZFBhdGgoZixbZ10pLGY/ZltnXTp2b2lkIDB9fWVsc2V7dmFyIGI9UGF0aC5nZXQodGhpcy5wcm9wZXJ0eS5uYW1lKTt0aGlzLnZhbHVlRm5fPWZ1bmN0aW9uKGMsZCxlKXt2YXIgZj1hKGMsZCxlKTtyZXR1cm4gZCYmZC5hZGRQYXRoKGYsYiksYi5nZXRWYWx1ZUZyb20oZil9fX1yZXR1cm4gdGhpcy52YWx1ZUZuX30sc2V0VmFsdWU6ZnVuY3Rpb24oYSxiKXtpZih0aGlzLnNpbXBsZVBhdGgpcmV0dXJuIHRoaXMuZnVsbFBhdGguc2V0VmFsdWVGcm9tKGEsYiksYjt2YXIgYz10aGlzLm9iamVjdChhKSxkPXRoaXMucHJvcGVydHkgaW5zdGFuY2VvZiBlP3RoaXMucHJvcGVydHkubmFtZTp0aGlzLnByb3BlcnR5KGEpO3JldHVybiBjW2RdPWJ9fSxnLnByb3RvdHlwZT17dHJhbnNmb3JtOmZ1bmN0aW9uKGEsYixjLGQsZSl7dmFyIGY9Y1t0aGlzLm5hbWVdLGc9YTtpZihmKWc9dm9pZCAwO2Vsc2UgaWYoZj1nW3RoaXMubmFtZV0sIWYpcmV0dXJuIHZvaWQgY29uc29sZS5lcnJvcigiQ2Fubm90IGZpbmQgZnVuY3Rpb24gb3IgZmlsdGVyOiAiK3RoaXMubmFtZSk7aWYoZD9mPWYudG9Nb2RlbDoiZnVuY3Rpb24iPT10eXBlb2YgZi50b0RPTSYmKGY9Zi50b0RPTSksImZ1bmN0aW9uIiE9dHlwZW9mIGYpcmV0dXJuIHZvaWQgY29uc29sZS5lcnJvcigiQ2Fubm90IGZpbmQgZnVuY3Rpb24gb3IgZmlsdGVyOiAiK3RoaXMubmFtZSk7Zm9yKHZhciBoPWV8fFtdLGo9MDtqPHRoaXMuYXJncy5sZW5ndGg7aisrKWgucHVzaChpKHRoaXMuYXJnc1tqXSkoYSxiLGMpKTtyZXR1cm4gZi5hcHBseShnLGgpfX07dmFyIHI9eyIrIjpmdW5jdGlvbihhKXtyZXR1cm4rYX0sIi0iOmZ1bmN0aW9uKGEpe3JldHVybi1hfSwiISI6ZnVuY3Rpb24oYSl7cmV0dXJuIWF9fSxzPXsiKyI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYStifSwiLSI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYS1ifSwiKiI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYSpifSwiLyI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYS9ifSwiJSI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYSVifSwiPCI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYj5hfSwiPiI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT5ifSwiPD0iOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGI+PWF9LCI+PSI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT49Yn0sIj09IjpmdW5jdGlvbihhLGIpe3JldHVybiBhPT1ifSwiIT0iOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGEhPWJ9LCI9PT0iOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGE9PT1ifSwiIT09IjpmdW5jdGlvbihhLGIpe3JldHVybiBhIT09Yn0sIiYmIjpmdW5jdGlvbihhLGIpe3JldHVybiBhJiZifSwifHwiOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGF8fGJ9fTtqLnByb3RvdHlwZT17Y3JlYXRlVW5hcnlFeHByZXNzaW9uOmZ1bmN0aW9uKGEsYil7aWYoIXJbYV0pdGhyb3cgRXJyb3IoIkRpc2FsbG93ZWQgb3BlcmF0b3I6ICIrYSk7cmV0dXJuIGI9aShiKSxmdW5jdGlvbihjLGQsZSl7cmV0dXJuIHJbYV0oYihjLGQsZSkpfX0sY3JlYXRlQmluYXJ5RXhwcmVzc2lvbjpmdW5jdGlvbihhLGIsYyl7aWYoIXNbYV0pdGhyb3cgRXJyb3IoIkRpc2FsbG93ZWQgb3BlcmF0b3I6ICIrYSk7c3dpdGNoKGI9aShiKSxjPWkoYyksYSl7Y2FzZSJ8fCI6cmV0dXJuIHRoaXMuZHluYW1pY0RlcHM9ITAsZnVuY3Rpb24oYSxkLGUpe3JldHVybiBiKGEsZCxlKXx8YyhhLGQsZSl9O2Nhc2UiJiYiOnJldHVybiB0aGlzLmR5bmFtaWNEZXBzPSEwLGZ1bmN0aW9uKGEsZCxlKXtyZXR1cm4gYihhLGQsZSkmJmMoYSxkLGUpfX1yZXR1cm4gZnVuY3Rpb24oZCxlLGYpe3JldHVybiBzW2FdKGIoZCxlLGYpLGMoZCxlLGYpKX19LGNyZWF0ZUNvbmRpdGlvbmFsRXhwcmVzc2lvbjpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGE9aShhKSxiPWkoYiksYz1pKGMpLHRoaXMuZHluYW1pY0RlcHM9ITAsZnVuY3Rpb24oZCxlLGYpe3JldHVybiBhKGQsZSxmKT9iKGQsZSxmKTpjKGQsZSxmKX19LGNyZWF0ZUlkZW50aWZpZXI6ZnVuY3Rpb24oYSl7dmFyIGI9bmV3IGUoYSk7cmV0dXJuIGIudHlwZT0iSWRlbnRpZmllciIsYn0sY3JlYXRlTWVtYmVyRXhwcmVzc2lvbjpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9bmV3IGYoYixjLGEpO3JldHVybiBkLmR5bmFtaWNEZXBzJiYodGhpcy5keW5hbWljRGVwcz0hMCksZH0sY3JlYXRlQ2FsbEV4cHJlc3Npb246ZnVuY3Rpb24oYSxiKXtpZighKGEgaW5zdGFuY2VvZiBlKSl0aHJvdyBFcnJvcigiT25seSBpZGVudGlmaWVyIGZ1bmN0aW9uIGludm9jYXRpb25zIGFyZSBhbGxvd2VkIik7dmFyIGM9bmV3IGcoYS5uYW1lLGIpO3JldHVybiBmdW5jdGlvbihhLGIsZCl7cmV0dXJuIGMudHJhbnNmb3JtKGEsYixkLCExKX19LGNyZWF0ZUxpdGVyYWw6ZnVuY3Rpb24oYSl7cmV0dXJuIG5ldyBkKGEudmFsdWUpfSxjcmVhdGVBcnJheUV4cHJlc3Npb246ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPTA7YjxhLmxlbmd0aDtiKyspYVtiXT1pKGFbYl0pO3JldHVybiBmdW5jdGlvbihiLGMsZCl7Zm9yKHZhciBlPVtdLGY9MDtmPGEubGVuZ3RoO2YrKyllLnB1c2goYVtmXShiLGMsZCkpO3JldHVybiBlfX0sY3JlYXRlUHJvcGVydHk6ZnVuY3Rpb24oYSxiLGMpe3JldHVybntrZXk6YiBpbnN0YW5jZW9mIGU/Yi5uYW1lOmIudmFsdWUsdmFsdWU6Y319LGNyZWF0ZU9iamVjdEV4cHJlc3Npb246ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPTA7YjxhLmxlbmd0aDtiKyspYVtiXS52YWx1ZT1pKGFbYl0udmFsdWUpO3JldHVybiBmdW5jdGlvbihiLGMsZCl7Zm9yKHZhciBlPXt9LGY9MDtmPGEubGVuZ3RoO2YrKyllW2FbZl0ua2V5XT1hW2ZdLnZhbHVlKGIsYyxkKTtyZXR1cm4gZX19LGNyZWF0ZUZpbHRlcjpmdW5jdGlvbihhLGIpe3RoaXMuZmlsdGVycy5wdXNoKG5ldyBnKGEsYikpfSxjcmVhdGVBc0V4cHJlc3Npb246ZnVuY3Rpb24oYSxiKXt0aGlzLmV4cHJlc3Npb249YSx0aGlzLnNjb3BlSWRlbnQ9Yn0sY3JlYXRlSW5FeHByZXNzaW9uOmZ1bmN0aW9uKGEsYixjKXt0aGlzLmV4cHJlc3Npb249Yyx0aGlzLnNjb3BlSWRlbnQ9YSx0aGlzLmluZGV4SWRlbnQ9Yn0sY3JlYXRlVG9wTGV2ZWw6ZnVuY3Rpb24oYSl7dGhpcy5leHByZXNzaW9uPWF9LGNyZWF0ZVRoaXNFeHByZXNzaW9uOmh9LGsucHJvdG90eXBlPXtvcGVuOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudmFsdWVffSxkaXNjYXJkQ2hhbmdlczpmdW5jdGlvbigpe3JldHVybiB0aGlzLnZhbHVlX30sZGVsaXZlcjpmdW5jdGlvbigpe30sY2xvc2U6ZnVuY3Rpb24oKXt9fSxsLnByb3RvdHlwZT17Z2V0QmluZGluZzpmdW5jdGlvbihhLGIsYyl7ZnVuY3Rpb24gZCgpe2lmKGgpcmV0dXJuIGg9ITEsZztpLmR5bmFtaWNEZXBzJiZmLnN0YXJ0UmVzZXQoKTt2YXIgYz1pLmdldFZhbHVlKGEsaS5keW5hbWljRGVwcz9mOnZvaWQgMCxiKTtyZXR1cm4gaS5keW5hbWljRGVwcyYmZi5maW5pc2hSZXNldCgpLGN9ZnVuY3Rpb24gZShjKXtyZXR1cm4gaS5zZXRWYWx1ZShhLGMsYiksY31pZihjKXJldHVybiB0aGlzLmdldFZhbHVlKGEsdm9pZCAwLGIpO3ZhciBmPW5ldyBDb21wb3VuZE9ic2VydmVyLGc9dGhpcy5nZXRWYWx1ZShhLGYsYiksaD0hMCxpPXRoaXM7cmV0dXJuIG5ldyBPYnNlcnZlclRyYW5zZm9ybShmLGQsZSwhMCl9LGdldFZhbHVlOmZ1bmN0aW9uKGEsYixjKXtmb3IodmFyIGQ9aSh0aGlzLmV4cHJlc3Npb24pKGEsYixjKSxlPTA7ZTx0aGlzLmZpbHRlcnMubGVuZ3RoO2UrKylkPXRoaXMuZmlsdGVyc1tlXS50cmFuc2Zvcm0oYSxiLGMsITEsW2RdKTtyZXR1cm4gZH0sc2V0VmFsdWU6ZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZD10aGlzLmZpbHRlcnM/dGhpcy5maWx0ZXJzLmxlbmd0aDowO2QtLT4wOyliPXRoaXMuZmlsdGVyc1tkXS50cmFuc2Zvcm0oYSx2b2lkIDAsYywhMCxbYl0pO3JldHVybiB0aGlzLmV4cHJlc3Npb24uc2V0VmFsdWU/dGhpcy5leHByZXNzaW9uLnNldFZhbHVlKGEsYik6dm9pZCAwfX07dmFyIHQ9IkAiK01hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnNsaWNlKDIpO3AucHJvdG90eXBlPXtzdHlsZU9iamVjdDpmdW5jdGlvbihhKXt2YXIgYj1bXTtmb3IodmFyIGMgaW4gYSliLnB1c2gobShjKSsiOiAiK2FbY10pO3JldHVybiBiLmpvaW4oIjsgIil9LHRva2VuTGlzdDpmdW5jdGlvbihhKXt2YXIgYj1bXTtmb3IodmFyIGMgaW4gYSlhW2NdJiZiLnB1c2goYyk7cmV0dXJuIGIuam9pbigiICIpfSxwcmVwYXJlSW5zdGFuY2VQb3NpdGlvbkNoYW5nZWQ6ZnVuY3Rpb24oYSl7dmFyIGI9YS5wb2x5bWVyRXhwcmVzc2lvbkluZGV4SWRlbnRfO2lmKGIpcmV0dXJuIGZ1bmN0aW9uKGEsYyl7YS5tb2RlbFtiXT1jfX0scHJlcGFyZUJpbmRpbmc6ZnVuY3Rpb24oYSxjLGQpe3ZhciBlPVBhdGguZ2V0KGEpO3tpZihvKGEpfHwhZS52YWxpZClyZXR1cm4gYihhLGMsZCx0aGlzKTtpZigxPT1lLmxlbmd0aClyZXR1cm4gZnVuY3Rpb24oYSxiLGMpe2lmKGMpcmV0dXJuIGUuZ2V0VmFsdWVGcm9tKGEpO3ZhciBkPW4oYSxlWzBdKTtyZXR1cm4gbmV3IFBhdGhPYnNlcnZlcihkLGUpfX19LHByZXBhcmVJbnN0YW5jZU1vZGVsOmZ1bmN0aW9uKGEpe3ZhciBiPWEucG9seW1lckV4cHJlc3Npb25TY29wZUlkZW50XztpZihiKXt2YXIgYz1hLnRlbXBsYXRlSW5zdGFuY2U/YS50ZW1wbGF0ZUluc3RhbmNlLm1vZGVsOmEubW9kZWwsZD1hLnBvbHltZXJFeHByZXNzaW9uSW5kZXhJZGVudF87cmV0dXJuIGZ1bmN0aW9uKGEpe3JldHVybiB1KGMsYSxiLGQpfX19fTt2YXIgdT0iX19wcm90b19fImlue30/ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9e307cmV0dXJuIGVbY109YixlW2RdPXZvaWQgMCxlW3RdPWEsZS5fX3Byb3RvX189YSxlfTpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1PYmplY3QuY3JlYXRlKGEpO3JldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxjLHt2YWx1ZTpiLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLGQse3ZhbHVlOnZvaWQgMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSx0LHt2YWx1ZTphLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMH0pLGV9O2EuUG9seW1lckV4cHJlc3Npb25zPXAscC5nZXRFeHByZXNzaW9uPWN9KHRoaXMpLFBvbHltZXI9e3ZlcnNpb246IjAuNC4yIn0sImZ1bmN0aW9uIj09dHlwZW9mIHdpbmRvdy5Qb2x5bWVyJiYoUG9seW1lcj17fSksd2luZG93LlBsYXRmb3JtfHwobG9nRmxhZ3M9d2luZG93LmxvZ0ZsYWdzfHx7fSxQbGF0Zm9ybT17Zmx1c2g6ZnVuY3Rpb24oKXt9fSxDdXN0b21FbGVtZW50cz17dXNlTmF0aXZlOiEwLHJlYWR5OiEwLHRha2VSZWNvcmRzOmZ1bmN0aW9uKCl7fSwiaW5zdGFuY2VvZiI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYSBpbnN0YW5jZW9mIGJ9fSxIVE1MSW1wb3J0cz17dXNlTmF0aXZlOiEwfSxhZGRFdmVudExpc3RlbmVyKCJIVE1MSW1wb3J0c0xvYWRlZCIsZnVuY3Rpb24oKXtkb2N1bWVudC5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgiV2ViQ29tcG9uZW50c1JlYWR5Iix7YnViYmxlczohMH0pKX0pLFNoYWRvd0RPTVBvbHlmaWxsPW51bGwsd3JhcD11bndyYXA9ZnVuY3Rpb24oYSl7cmV0dXJuIGF9KSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEsYil7Yj1ifHxxLGQoZnVuY3Rpb24oKXtmKGEsYil9LGIpfWZ1bmN0aW9uIGMoYSl7cmV0dXJuImNvbXBsZXRlIj09PWEucmVhZHlTdGF0ZXx8YS5yZWFkeVN0YXRlPT09c31mdW5jdGlvbiBkKGEsYil7aWYoYyhiKSlhJiZhKCk7ZWxzZXt2YXIgZT1mdW5jdGlvbigpeygiY29tcGxldGUiPT09Yi5yZWFkeVN0YXRlfHxiLnJlYWR5U3RhdGU9PT1zKSYmKGIucmVtb3ZlRXZlbnRMaXN0ZW5lcih0LGUpLGQoYSxiKSl9O2IuYWRkRXZlbnRMaXN0ZW5lcih0LGUpfX1mdW5jdGlvbiBlKGEpe2EudGFyZ2V0Ll9fbG9hZGVkPSEwfWZ1bmN0aW9uIGYoYSxiKXtmdW5jdGlvbiBjKCl7aD09aSYmYSYmYSgpfWZ1bmN0aW9uIGQoYSl7ZShhKSxoKyssYygpfXZhciBmPWIucXVlcnlTZWxlY3RvckFsbCgibGlua1tyZWw9aW1wb3J0XSIpLGg9MCxpPWYubGVuZ3RoO2lmKGkpZm9yKHZhciBqLGs9MDtpPmsmJihqPWZba10pO2srKylnKGopP2QuY2FsbChqLHt0YXJnZXQ6an0pOihqLmFkZEV2ZW50TGlzdGVuZXIoImxvYWQiLGQpLGouYWRkRXZlbnRMaXN0ZW5lcigiZXJyb3IiLGQpKTtlbHNlIGMoKX1mdW5jdGlvbiBnKGEpe3JldHVybiBtP2EuX19sb2FkZWR8fGEuaW1wb3J0JiYibG9hZGluZyIhPT1hLmltcG9ydC5yZWFkeVN0YXRlOmEuX19pbXBvcnRQYXJzZWR9ZnVuY3Rpb24gaChhKXtmb3IodmFyIGIsYz0wLGQ9YS5sZW5ndGg7ZD5jJiYoYj1hW2NdKTtjKyspaShiKSYmaihiKX1mdW5jdGlvbiBpKGEpe3JldHVybiJsaW5rIj09PWEubG9jYWxOYW1lJiYiaW1wb3J0Ij09PWEucmVsfWZ1bmN0aW9uIGooYSl7dmFyIGI9YS5pbXBvcnQ7Yj9lKHt0YXJnZXQ6YX0pOihhLmFkZEV2ZW50TGlzdGVuZXIoImxvYWQiLGUpLGEuYWRkRXZlbnRMaXN0ZW5lcigiZXJyb3IiLGUpKX12YXIgaz0iaW1wb3J0IixsPWsgaW4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgibGluayIpLG09bCxuPS9UcmlkZW50Ly50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpLG89Qm9vbGVhbih3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLHA9ZnVuY3Rpb24oYSl7cmV0dXJuIG8/U2hhZG93RE9NUG9seWZpbGwud3JhcElmTmVlZGVkKGEpOmF9LHE9cChkb2N1bWVudCkscj17Z2V0OmZ1bmN0aW9uKCl7dmFyIGE9SFRNTEltcG9ydHMuY3VycmVudFNjcmlwdHx8ZG9jdW1lbnQuY3VycmVudFNjcmlwdHx8KCJjb21wbGV0ZSIhPT1kb2N1bWVudC5yZWFkeVN0YXRlP2RvY3VtZW50LnNjcmlwdHNbZG9jdW1lbnQuc2NyaXB0cy5sZW5ndGgtMV06bnVsbCk7cmV0dXJuIHAoYSl9LGNvbmZpZ3VyYWJsZTohMH07T2JqZWN0LmRlZmluZVByb3BlcnR5KGRvY3VtZW50LCJfY3VycmVudFNjcmlwdCIsciksT2JqZWN0LmRlZmluZVByb3BlcnR5KHEsIl9jdXJyZW50U2NyaXB0IixyKTt2YXIgcz1uPyJjb21wbGV0ZSI6ImludGVyYWN0aXZlIix0PSJyZWFkeXN0YXRlY2hhbmdlIjttJiYobmV3IE11dGF0aW9uT2JzZXJ2ZXIoZnVuY3Rpb24oYSl7Zm9yKHZhciBiLGM9MCxkPWEubGVuZ3RoO2Q+YyYmKGI9YVtjXSk7YysrKWIuYWRkZWROb2RlcyYmaChiLmFkZGVkTm9kZXMpfSkub2JzZXJ2ZShkb2N1bWVudC5oZWFkLHtjaGlsZExpc3Q6ITB9KSxmdW5jdGlvbigpe2lmKCJsb2FkaW5nIj09PWRvY3VtZW50LnJlYWR5U3RhdGUpZm9yKHZhciBhLGI9ZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgibGlua1tyZWw9aW1wb3J0XSIpLGM9MCxkPWIubGVuZ3RoO2Q+YyYmKGE9YltjXSk7YysrKWooYSl9KCkpLGIoZnVuY3Rpb24oKXtIVE1MSW1wb3J0cy5yZWFkeT0hMCxIVE1MSW1wb3J0cy5yZWFkeVRpbWU9KG5ldyBEYXRlKS5nZXRUaW1lKCkscS5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgiSFRNTEltcG9ydHNMb2FkZWQiLHtidWJibGVzOiEwfSkpfSksYS51c2VOYXRpdmU9bSxhLmlzSW1wb3J0TG9hZGVkPWcsYS53aGVuUmVhZHk9YixhLnJvb3REb2N1bWVudD1xLGEuSU1QT1JUX0xJTktfVFlQRT1rLGEuaXNJRT1ufSh3aW5kb3cuSFRNTEltcG9ydHMpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSxiKXtyZXR1cm4gYj1ifHxbXSxiLm1hcHx8KGI9W2JdKSxhLmFwcGx5KHRoaXMsYi5tYXAoZCkpfWZ1bmN0aW9uIGMoYSxjLGQpe3ZhciBlO3N3aXRjaChhcmd1bWVudHMubGVuZ3RoKXtjYXNlIDA6cmV0dXJuO2Nhc2UgMTplPW51bGw7YnJlYWs7Y2FzZSAyOmU9Yy5hcHBseSh0aGlzKTticmVhaztkZWZhdWx0OmU9YihkLGMpfWZbYV09ZX1mdW5jdGlvbiBkKGEpe3JldHVybiBmW2FdfWZ1bmN0aW9uIGUoYSxjKXtIVE1MSW1wb3J0cy53aGVuSW1wb3J0c1JlYWR5KGZ1bmN0aW9uKCl7YihjLGEpfSl9dmFyIGY9e307YS5tYXJzaGFsPWQsYS5tb2R1bGFyaXplPWMsYS51c2luZz1lfSh3aW5kb3cpLGZ1bmN0aW9uKCl7dmFyIGE9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3R5bGUiKTthLnRleHRDb250ZW50PSJib2R5IHt0cmFuc2l0aW9uOiBvcGFjaXR5IGVhc2UtaW4gMC4yczsgfSBcbmJvZHlbdW5yZXNvbHZlZF0ge29wYWNpdHk6IDA7IGRpc3BsYXk6IGJsb2NrOyBvdmVyZmxvdzogaGlkZGVuOyB9IFxuIjt2YXIgYj1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCJoZWFkIik7Yi5pbnNlcnRCZWZvcmUoYSxiLmZpcnN0Q2hpbGQpfShQbGF0Zm9ybSksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoKXtmdW5jdGlvbiBhKGEpe2I9YX1pZigiZnVuY3Rpb24iIT10eXBlb2YgT2JqZWN0Lm9ic2VydmV8fCJmdW5jdGlvbiIhPXR5cGVvZiBBcnJheS5vYnNlcnZlKXJldHVybiExO3ZhciBiPVtdLGM9e30sZD1bXTtyZXR1cm4gT2JqZWN0Lm9ic2VydmUoYyxhKSxBcnJheS5vYnNlcnZlKGQsYSksYy5pZD0xLGMuaWQ9MixkZWxldGUgYy5pZCxkLnB1c2goMSwyKSxkLmxlbmd0aD0wLE9iamVjdC5kZWxpdmVyQ2hhbmdlUmVjb3JkcyhhKSw1IT09Yi5sZW5ndGg/ITE6ImFkZCIhPWJbMF0udHlwZXx8InVwZGF0ZSIhPWJbMV0udHlwZXx8ImRlbGV0ZSIhPWJbMl0udHlwZXx8InNwbGljZSIhPWJbM10udHlwZXx8InNwbGljZSIhPWJbNF0udHlwZT8hMTooT2JqZWN0LnVub2JzZXJ2ZShjLGEpLEFycmF5LnVub2JzZXJ2ZShkLGEpLCEwKX1mdW5jdGlvbiBjKCl7aWYoInVuZGVmaW5lZCIhPXR5cGVvZiBjaHJvbWUmJmNocm9tZS5hcHAmJmNocm9tZS5hcHAucnVudGltZSlyZXR1cm4hMTtpZigidW5kZWZpbmVkIiE9dHlwZW9mIG5hdmlnYXRvciYmbmF2aWdhdG9yLmdldERldmljZVN0b3JhZ2UpcmV0dXJuITE7dHJ5e3ZhciBhPW5ldyBGdW5jdGlvbigiIiwicmV0dXJuIHRydWU7Iik7cmV0dXJuIGEoKX1jYXRjaChiKXtyZXR1cm4hMX19ZnVuY3Rpb24gZChhKXtyZXR1cm4rYT09PWE+Pj4wJiYiIiE9PWF9ZnVuY3Rpb24gZShhKXtyZXR1cm4rYX1mdW5jdGlvbiBmKGEpe3JldHVybiBhPT09T2JqZWN0KGEpfWZ1bmN0aW9uIGcoYSxiKXtyZXR1cm4gYT09PWI/MCE9PWF8fDEvYT09PTEvYjpSKGEpJiZSKGIpPyEwOmEhPT1hJiZiIT09Yn1mdW5jdGlvbiBoKGEpe2lmKHZvaWQgMD09PWEpcmV0dXJuImVvZiI7dmFyIGI9YS5jaGFyQ29kZUF0KDApO3N3aXRjaChiKXtjYXNlIDkxOmNhc2UgOTM6Y2FzZSA0NjpjYXNlIDM0OmNhc2UgMzk6Y2FzZSA0ODpyZXR1cm4gYTtjYXNlIDk1OmNhc2UgMzY6cmV0dXJuImlkZW50IjtjYXNlIDMyOmNhc2UgOTpjYXNlIDEwOmNhc2UgMTM6Y2FzZSAxNjA6Y2FzZSA2NTI3OTpjYXNlIDgyMzI6Y2FzZSA4MjMzOnJldHVybiJ3cyJ9cmV0dXJuIGI+PTk3JiYxMjI+PWJ8fGI+PTY1JiY5MD49Yj8iaWRlbnQiOmI+PTQ5JiY1Nz49Yj8ibnVtYmVyIjoiZWxzZSJ9ZnVuY3Rpb24gaSgpe31mdW5jdGlvbiBqKGEpe2Z1bmN0aW9uIGIoKXtpZighKG0+PWEubGVuZ3RoKSl7dmFyIGI9YVttKzFdO3JldHVybiJpblNpbmdsZVF1b3RlIj09biYmIiciPT1ifHwiaW5Eb3VibGVRdW90ZSI9PW4mJiciJz09Yj8obSsrLGQ9YixvLmFwcGVuZCgpLCEwKTp2b2lkIDB9fWZvcih2YXIgYyxkLGUsZixnLGosayxsPVtdLG09LTEsbj0iYmVmb3JlUGF0aCIsbz17cHVzaDpmdW5jdGlvbigpe3ZvaWQgMCE9PWUmJihsLnB1c2goZSksZT12b2lkIDApfSxhcHBlbmQ6ZnVuY3Rpb24oKXt2b2lkIDA9PT1lP2U9ZDplKz1kfX07bjspaWYobSsrLGM9YVttXSwiXFwiIT1jfHwhYihuKSl7aWYoZj1oKGMpLGs9V1tuXSxnPWtbZl18fGtbImVsc2UiXXx8ImVycm9yIiwiZXJyb3IiPT1nKXJldHVybjtpZihuPWdbMF0saj1vW2dbMV1dfHxpLGQ9dm9pZCAwPT09Z1syXT9jOmdbMl0saigpLCJhZnRlclBhdGgiPT09bilyZXR1cm4gbH19ZnVuY3Rpb24gayhhKXtyZXR1cm4gVi50ZXN0KGEpfWZ1bmN0aW9uIGwoYSxiKXtpZihiIT09WCl0aHJvdyBFcnJvcigiVXNlIFBhdGguZ2V0IHRvIHJldHJpZXZlIHBhdGggb2JqZWN0cyIpO2Zvcih2YXIgYz0wO2M8YS5sZW5ndGg7YysrKXRoaXMucHVzaChTdHJpbmcoYVtjXSkpO1EmJnRoaXMubGVuZ3RoJiYodGhpcy5nZXRWYWx1ZUZyb209dGhpcy5jb21waWxlZEdldFZhbHVlRnJvbUZuKCkpfWZ1bmN0aW9uIG0oYSl7aWYoYSBpbnN0YW5jZW9mIGwpcmV0dXJuIGE7aWYoKG51bGw9PWF8fDA9PWEubGVuZ3RoKSYmKGE9IiIpLCJzdHJpbmciIT10eXBlb2YgYSl7aWYoZChhLmxlbmd0aCkpcmV0dXJuIG5ldyBsKGEsWCk7YT1TdHJpbmcoYSl9dmFyIGI9WVthXTtpZihiKXJldHVybiBiO3ZhciBjPWooYSk7aWYoIWMpcmV0dXJuIFo7dmFyIGI9bmV3IGwoYyxYKTtyZXR1cm4gWVthXT1iLGJ9ZnVuY3Rpb24gbihhKXtyZXR1cm4gZChhKT8iWyIrYSsiXSI6J1siJythLnJlcGxhY2UoLyIvZywnXFwiJykrJyJdJ31mdW5jdGlvbiBvKGIpe2Zvcih2YXIgYz0wO18+YyYmYi5jaGVja18oKTspYysrO3JldHVybiBPJiYoYS5kaXJ0eUNoZWNrQ3ljbGVDb3VudD1jKSxjPjB9ZnVuY3Rpb24gcChhKXtmb3IodmFyIGIgaW4gYSlyZXR1cm4hMTtyZXR1cm4hMH1mdW5jdGlvbiBxKGEpe3JldHVybiBwKGEuYWRkZWQpJiZwKGEucmVtb3ZlZCkmJnAoYS5jaGFuZ2VkKX1mdW5jdGlvbiByKGEsYil7dmFyIGM9e30sZD17fSxlPXt9O2Zvcih2YXIgZiBpbiBiKXt2YXIgZz1hW2ZdOyh2b2lkIDA9PT1nfHxnIT09YltmXSkmJihmIGluIGE/ZyE9PWJbZl0mJihlW2ZdPWcpOmRbZl09dm9pZCAwKX1mb3IodmFyIGYgaW4gYSlmIGluIGJ8fChjW2ZdPWFbZl0pO3JldHVybiBBcnJheS5pc0FycmF5KGEpJiZhLmxlbmd0aCE9PWIubGVuZ3RoJiYoZS5sZW5ndGg9YS5sZW5ndGgpLHthZGRlZDpjLHJlbW92ZWQ6ZCxjaGFuZ2VkOmV9fWZ1bmN0aW9uIHMoKXtpZighYWIubGVuZ3RoKXJldHVybiExO2Zvcih2YXIgYT0wO2E8YWIubGVuZ3RoO2ErKylhYlthXSgpO3JldHVybiBhYi5sZW5ndGg9MCwhMH1mdW5jdGlvbiB0KCl7ZnVuY3Rpb24gYShhKXtiJiZiLnN0YXRlXz09PWZiJiYhZCYmYi5jaGVja18oYSl9dmFyIGIsYyxkPSExLGU9ITA7cmV0dXJue29wZW46ZnVuY3Rpb24oYyl7aWYoYil0aHJvdyBFcnJvcigiT2JzZXJ2ZWRPYmplY3QgaW4gdXNlIik7ZXx8T2JqZWN0LmRlbGl2ZXJDaGFuZ2VSZWNvcmRzKGEpLGI9YyxlPSExfSxvYnNlcnZlOmZ1bmN0aW9uKGIsZCl7Yz1iLGQ/QXJyYXkub2JzZXJ2ZShjLGEpOk9iamVjdC5vYnNlcnZlKGMsYSl9LGRlbGl2ZXI6ZnVuY3Rpb24oYil7ZD1iLE9iamVjdC5kZWxpdmVyQ2hhbmdlUmVjb3JkcyhhKSxkPSExfSxjbG9zZTpmdW5jdGlvbigpe2I9dm9pZCAwLE9iamVjdC51bm9ic2VydmUoYyxhKSxjYi5wdXNoKHRoaXMpfX19ZnVuY3Rpb24gdShhLGIsYyl7dmFyIGQ9Y2IucG9wKCl8fHQoKTtyZXR1cm4gZC5vcGVuKGEpLGQub2JzZXJ2ZShiLGMpLGR9ZnVuY3Rpb24gdigpe2Z1bmN0aW9uIGEoYixmKXtiJiYoYj09PWQmJihlW2ZdPSEwKSxoLmluZGV4T2YoYik8MCYmKGgucHVzaChiKSxPYmplY3Qub2JzZXJ2ZShiLGMpKSxhKE9iamVjdC5nZXRQcm90b3R5cGVPZihiKSxmKSl9ZnVuY3Rpb24gYihhKXtmb3IodmFyIGI9MDtiPGEubGVuZ3RoO2IrKyl7dmFyIGM9YVtiXTtpZihjLm9iamVjdCE9PWR8fGVbYy5uYW1lXXx8InNldFByb3RvdHlwZSI9PT1jLnR5cGUpcmV0dXJuITF9cmV0dXJuITB9ZnVuY3Rpb24gYyhjKXtpZighYihjKSl7Zm9yKHZhciBkLGU9MDtlPGcubGVuZ3RoO2UrKylkPWdbZV0sZC5zdGF0ZV89PWZiJiZkLml0ZXJhdGVPYmplY3RzXyhhKTtmb3IodmFyIGU9MDtlPGcubGVuZ3RoO2UrKylkPWdbZV0sZC5zdGF0ZV89PWZiJiZkLmNoZWNrXygpfX12YXIgZCxlLGY9MCxnPVtdLGg9W10saT17b2JqZWN0OnZvaWQgMCxvYmplY3RzOmgsb3BlbjpmdW5jdGlvbihiLGMpe2R8fChkPWMsZT17fSksZy5wdXNoKGIpLGYrKyxiLml0ZXJhdGVPYmplY3RzXyhhKX0sY2xvc2U6ZnVuY3Rpb24oKXtpZihmLS0sIShmPjApKXtmb3IodmFyIGE9MDthPGgubGVuZ3RoO2ErKylPYmplY3QudW5vYnNlcnZlKGhbYV0sYykseC51bm9ic2VydmVkQ291bnQrKztnLmxlbmd0aD0wLGgubGVuZ3RoPTAsZD12b2lkIDAsZT12b2lkIDAsZGIucHVzaCh0aGlzKX19fTtyZXR1cm4gaX1mdW5jdGlvbiB3KGEsYil7cmV0dXJuICQmJiQub2JqZWN0PT09Ynx8KCQ9ZGIucG9wKCl8fHYoKSwkLm9iamVjdD1iKSwkLm9wZW4oYSxiKSwkfWZ1bmN0aW9uIHgoKXt0aGlzLnN0YXRlXz1lYix0aGlzLmNhbGxiYWNrXz12b2lkIDAsdGhpcy50YXJnZXRfPXZvaWQgMCx0aGlzLmRpcmVjdE9ic2VydmVyXz12b2lkIDAsdGhpcy52YWx1ZV89dm9pZCAwLHRoaXMuaWRfPWliKyt9ZnVuY3Rpb24geShhKXt4Ll9hbGxPYnNlcnZlcnNDb3VudCsrLGtiJiZqYi5wdXNoKGEpfWZ1bmN0aW9uIHooKXt4Ll9hbGxPYnNlcnZlcnNDb3VudC0tfWZ1bmN0aW9uIEEoYSl7eC5jYWxsKHRoaXMpLHRoaXMudmFsdWVfPWEsdGhpcy5vbGRPYmplY3RfPXZvaWQgMH1mdW5jdGlvbiBCKGEpe2lmKCFBcnJheS5pc0FycmF5KGEpKXRocm93IEVycm9yKCJQcm92aWRlZCBvYmplY3QgaXMgbm90IGFuIEFycmF5Iik7QS5jYWxsKHRoaXMsYSl9ZnVuY3Rpb24gQyhhLGIpe3guY2FsbCh0aGlzKSx0aGlzLm9iamVjdF89YSx0aGlzLnBhdGhfPW0oYiksdGhpcy5kaXJlY3RPYnNlcnZlcl89dm9pZCAwfWZ1bmN0aW9uIEQoYSl7eC5jYWxsKHRoaXMpLHRoaXMucmVwb3J0Q2hhbmdlc09uT3Blbl89YSx0aGlzLnZhbHVlXz1bXSx0aGlzLmRpcmVjdE9ic2VydmVyXz12b2lkIDAsdGhpcy5vYnNlcnZlZF89W119ZnVuY3Rpb24gRShhKXtyZXR1cm4gYX1mdW5jdGlvbiBGKGEsYixjLGQpe3RoaXMuY2FsbGJhY2tfPXZvaWQgMCx0aGlzLnRhcmdldF89dm9pZCAwLHRoaXMudmFsdWVfPXZvaWQgMCx0aGlzLm9ic2VydmFibGVfPWEsdGhpcy5nZXRWYWx1ZUZuXz1ifHxFLHRoaXMuc2V0VmFsdWVGbl89Y3x8RSx0aGlzLmRvbnRQYXNzVGhyb3VnaFNldF89ZH1mdW5jdGlvbiBHKGEsYixjKXtmb3IodmFyIGQ9e30sZT17fSxmPTA7ZjxiLmxlbmd0aDtmKyspe3ZhciBnPWJbZl07bmJbZy50eXBlXT8oZy5uYW1lIGluIGN8fChjW2cubmFtZV09Zy5vbGRWYWx1ZSksInVwZGF0ZSIhPWcudHlwZSYmKCJhZGQiIT1nLnR5cGU/Zy5uYW1lIGluIGQ/KGRlbGV0ZSBkW2cubmFtZV0sZGVsZXRlIGNbZy5uYW1lXSk6ZVtnLm5hbWVdPSEwOmcubmFtZSBpbiBlP2RlbGV0ZSBlW2cubmFtZV06ZFtnLm5hbWVdPSEwKSk6KGNvbnNvbGUuZXJyb3IoIlVua25vd24gY2hhbmdlUmVjb3JkIHR5cGU6ICIrZy50eXBlKSxjb25zb2xlLmVycm9yKGcpKX1mb3IodmFyIGggaW4gZClkW2hdPWFbaF07Zm9yKHZhciBoIGluIGUpZVtoXT12b2lkIDA7dmFyIGk9e307Zm9yKHZhciBoIGluIGMpaWYoIShoIGluIGR8fGggaW4gZSkpe3ZhciBqPWFbaF07Y1toXSE9PWomJihpW2hdPWopfXJldHVybnthZGRlZDpkLHJlbW92ZWQ6ZSxjaGFuZ2VkOml9fWZ1bmN0aW9uIEgoYSxiLGMpe3JldHVybntpbmRleDphLHJlbW92ZWQ6YixhZGRlZENvdW50OmN9fWZ1bmN0aW9uIEkoKXt9ZnVuY3Rpb24gSihhLGIsYyxkLGUsZil7cmV0dXJuIHNiLmNhbGNTcGxpY2VzKGEsYixjLGQsZSxmKX1mdW5jdGlvbiBLKGEsYixjLGQpe3JldHVybiBjPmJ8fGE+ZD8tMTpiPT1jfHxkPT1hPzA6Yz5hP2Q+Yj9iLWM6ZC1jOmI+ZD9kLWE6Yi1hfWZ1bmN0aW9uIEwoYSxiLGMsZCl7Zm9yKHZhciBlPUgoYixjLGQpLGY9ITEsZz0wLGg9MDtoPGEubGVuZ3RoO2grKyl7dmFyIGk9YVtoXTtpZihpLmluZGV4Kz1nLCFmKXt2YXIgaj1LKGUuaW5kZXgsZS5pbmRleCtlLnJlbW92ZWQubGVuZ3RoLGkuaW5kZXgsaS5pbmRleCtpLmFkZGVkQ291bnQpO2lmKGo+PTApe2Euc3BsaWNlKGgsMSksaC0tLGctPWkuYWRkZWRDb3VudC1pLnJlbW92ZWQubGVuZ3RoLGUuYWRkZWRDb3VudCs9aS5hZGRlZENvdW50LWo7dmFyIGs9ZS5yZW1vdmVkLmxlbmd0aCtpLnJlbW92ZWQubGVuZ3RoLWo7aWYoZS5hZGRlZENvdW50fHxrKXt2YXIgYz1pLnJlbW92ZWQ7aWYoZS5pbmRleDxpLmluZGV4KXt2YXIgbD1lLnJlbW92ZWQuc2xpY2UoMCxpLmluZGV4LWUuaW5kZXgpO0FycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KGwsYyksYz1sfWlmKGUuaW5kZXgrZS5yZW1vdmVkLmxlbmd0aD5pLmluZGV4K2kuYWRkZWRDb3VudCl7dmFyIG09ZS5yZW1vdmVkLnNsaWNlKGkuaW5kZXgraS5hZGRlZENvdW50LWUuaW5kZXgpO0FycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KGMsbSl9ZS5yZW1vdmVkPWMsaS5pbmRleDxlLmluZGV4JiYoZS5pbmRleD1pLmluZGV4KX1lbHNlIGY9ITB9ZWxzZSBpZihlLmluZGV4PGkuaW5kZXgpe2Y9ITAsYS5zcGxpY2UoaCwwLGUpLGgrKzt2YXIgbj1lLmFkZGVkQ291bnQtZS5yZW1vdmVkLmxlbmd0aDtpLmluZGV4Kz1uLGcrPW59fX1mfHxhLnB1c2goZSl9ZnVuY3Rpb24gTShhLGIpe2Zvcih2YXIgYz1bXSxmPTA7ZjxiLmxlbmd0aDtmKyspe3ZhciBnPWJbZl07c3dpdGNoKGcudHlwZSl7Y2FzZSJzcGxpY2UiOkwoYyxnLmluZGV4LGcucmVtb3ZlZC5zbGljZSgpLGcuYWRkZWRDb3VudCk7YnJlYWs7Y2FzZSJhZGQiOmNhc2UidXBkYXRlIjpjYXNlImRlbGV0ZSI6aWYoIWQoZy5uYW1lKSljb250aW51ZTt2YXIgaD1lKGcubmFtZSk7aWYoMD5oKWNvbnRpbnVlO0woYyxoLFtnLm9sZFZhbHVlXSwxKTticmVhaztkZWZhdWx0OmNvbnNvbGUuZXJyb3IoIlVuZXhwZWN0ZWQgcmVjb3JkIHR5cGU6ICIrSlNPTi5zdHJpbmdpZnkoZykpfX1yZXR1cm4gY31mdW5jdGlvbiBOKGEsYil7dmFyIGM9W107cmV0dXJuIE0oYSxiKS5mb3JFYWNoKGZ1bmN0aW9uKGIpe3JldHVybiAxPT1iLmFkZGVkQ291bnQmJjE9PWIucmVtb3ZlZC5sZW5ndGg/dm9pZChiLnJlbW92ZWRbMF0hPT1hW2IuaW5kZXhdJiZjLnB1c2goYikpOnZvaWQoYz1jLmNvbmNhdChKKGEsYi5pbmRleCxiLmluZGV4K2IuYWRkZWRDb3VudCxiLnJlbW92ZWQsMCxiLnJlbW92ZWQubGVuZ3RoKSkpfSksY312YXIgTz1hLnRlc3RpbmdFeHBvc2VDeWNsZUNvdW50LFA9YigpLFE9YygpLFI9YS5OdW1iZXIuaXNOYU58fGZ1bmN0aW9uKGIpe3JldHVybiJudW1iZXIiPT10eXBlb2YgYiYmYS5pc05hTihiKX0sUz0iX19wcm90b19fImlue30/ZnVuY3Rpb24oYSl7cmV0dXJuIGF9OmZ1bmN0aW9uKGEpe3ZhciBiPWEuX19wcm90b19fO2lmKCFiKXJldHVybiBhO3ZhciBjPU9iamVjdC5jcmVhdGUoYik7cmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGEpLmZvckVhY2goZnVuY3Rpb24oYil7T2JqZWN0LmRlZmluZVByb3BlcnR5KGMsYixPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGEsYikpfSksY30sVD0iWyRfYS16QS1aXSIsVT0iWyRfYS16QS1aMC05XSIsVj1uZXcgUmVnRXhwKCJeIitUKyIrIitVKyIqJCIpLFc9e2JlZm9yZVBhdGg6e3dzOlsiYmVmb3JlUGF0aCJdLGlkZW50OlsiaW5JZGVudCIsImFwcGVuZCJdLCJbIjpbImJlZm9yZUVsZW1lbnQiXSxlb2Y6WyJhZnRlclBhdGgiXX0saW5QYXRoOnt3czpbImluUGF0aCJdLCIuIjpbImJlZm9yZUlkZW50Il0sIlsiOlsiYmVmb3JlRWxlbWVudCJdLGVvZjpbImFmdGVyUGF0aCJdfSxiZWZvcmVJZGVudDp7d3M6WyJiZWZvcmVJZGVudCJdLGlkZW50OlsiaW5JZGVudCIsImFwcGVuZCJdfSxpbklkZW50OntpZGVudDpbImluSWRlbnQiLCJhcHBlbmQiXSwwOlsiaW5JZGVudCIsImFwcGVuZCJdLG51bWJlcjpbImluSWRlbnQiLCJhcHBlbmQiXSx3czpbImluUGF0aCIsInB1c2giXSwiLiI6WyJiZWZvcmVJZGVudCIsInB1c2giXSwiWyI6WyJiZWZvcmVFbGVtZW50IiwicHVzaCJdLGVvZjpbImFmdGVyUGF0aCIsInB1c2giXX0sYmVmb3JlRWxlbWVudDp7d3M6WyJiZWZvcmVFbGVtZW50Il0sMDpbImFmdGVyWmVybyIsImFwcGVuZCJdLG51bWJlcjpbImluSW5kZXgiLCJhcHBlbmQiXSwiJyI6WyJpblNpbmdsZVF1b3RlIiwiYXBwZW5kIiwiIl0sJyInOlsiaW5Eb3VibGVRdW90ZSIsImFwcGVuZCIsIiJdfSxhZnRlclplcm86e3dzOlsiYWZ0ZXJFbGVtZW50IiwicHVzaCJdLCJdIjpbImluUGF0aCIsInB1c2giXX0saW5JbmRleDp7MDpbImluSW5kZXgiLCJhcHBlbmQiXSxudW1iZXI6WyJpbkluZGV4IiwiYXBwZW5kIl0sd3M6WyJhZnRlckVsZW1lbnQiXSwiXSI6WyJpblBhdGgiLCJwdXNoIl19LGluU2luZ2xlUXVvdGU6eyInIjpbImFmdGVyRWxlbWVudCJdLGVvZjpbImVycm9yIl0sImVsc2UiOlsiaW5TaW5nbGVRdW90ZSIsImFwcGVuZCJdfSxpbkRvdWJsZVF1b3RlOnsnIic6WyJhZnRlckVsZW1lbnQiXSxlb2Y6WyJlcnJvciJdLCJlbHNlIjpbImluRG91YmxlUXVvdGUiLCJhcHBlbmQiXX0sYWZ0ZXJFbGVtZW50Ont3czpbImFmdGVyRWxlbWVudCJdLCJdIjpbImluUGF0aCIsInB1c2giXX19LFg9e30sWT17fTtsLmdldD1tLGwucHJvdG90eXBlPVMoe19fcHJvdG9fXzpbXSx2YWxpZDohMCx0b1N0cmluZzpmdW5jdGlvbigpe2Zvcih2YXIgYT0iIixiPTA7Yjx0aGlzLmxlbmd0aDtiKyspe3ZhciBjPXRoaXNbYl07YSs9ayhjKT9iPyIuIitjOmM6bihjKX1yZXR1cm4gYX0sZ2V0VmFsdWVGcm9tOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0wO2I8dGhpcy5sZW5ndGg7YisrKXtpZihudWxsPT1hKXJldHVybjthPWFbdGhpc1tiXV19cmV0dXJuIGF9LGl0ZXJhdGVPYmplY3RzOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTA7Yzx0aGlzLmxlbmd0aDtjKyspe2lmKGMmJihhPWFbdGhpc1tjLTFdXSksIWYoYSkpcmV0dXJuO2IoYSx0aGlzWzBdKX19LGNvbXBpbGVkR2V0VmFsdWVGcm9tRm46ZnVuY3Rpb24oKXt2YXIgYT0iIixiPSJvYmoiO2ErPSJpZiAob2JqICE9IG51bGwiO2Zvcih2YXIgYyxkPTA7ZDx0aGlzLmxlbmd0aC0xO2QrKyljPXRoaXNbZF0sYis9ayhjKT8iLiIrYzpuKGMpLGErPSIgJiZcbiAgICAgIitiKyIgIT0gbnVsbCI7YSs9IilcbiI7dmFyIGM9dGhpc1tkXTtyZXR1cm4gYis9ayhjKT8iLiIrYzpuKGMpLGErPSIgIHJldHVybiAiK2IrIjtcbmVsc2VcbiAgcmV0dXJuIHVuZGVmaW5lZDsiLG5ldyBGdW5jdGlvbigib2JqIixhKX0sc2V0VmFsdWVGcm9tOmZ1bmN0aW9uKGEsYil7aWYoIXRoaXMubGVuZ3RoKXJldHVybiExO2Zvcih2YXIgYz0wO2M8dGhpcy5sZW5ndGgtMTtjKyspe2lmKCFmKGEpKXJldHVybiExO2E9YVt0aGlzW2NdXX1yZXR1cm4gZihhKT8oYVt0aGlzW2NdXT1iLCEwKTohMX19KTt2YXIgWj1uZXcgbCgiIixYKTtaLnZhbGlkPSExLFouZ2V0VmFsdWVGcm9tPVouc2V0VmFsdWVGcm9tPWZ1bmN0aW9uKCl7fTt2YXIgJCxfPTFlMyxhYj1bXSxiYj1QP2Z1bmN0aW9uKCl7dmFyIGE9e3BpbmdQb25nOiEwfSxiPSExO3JldHVybiBPYmplY3Qub2JzZXJ2ZShhLGZ1bmN0aW9uKCl7cygpLGI9ITF9KSxmdW5jdGlvbihjKXthYi5wdXNoKGMpLGJ8fChiPSEwLGEucGluZ1Bvbmc9IWEucGluZ1BvbmcpfX0oKTpmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihhKXthYi5wdXNoKGEpfX0oKSxjYj1bXSxkYj1bXSxlYj0wLGZiPTEsZ2I9MixoYj0zLGliPTE7eC5wcm90b3R5cGU9e29wZW46ZnVuY3Rpb24oYSxiKXtpZih0aGlzLnN0YXRlXyE9ZWIpdGhyb3cgRXJyb3IoIk9ic2VydmVyIGhhcyBhbHJlYWR5IGJlZW4gb3BlbmVkLiIpO3JldHVybiB5KHRoaXMpLHRoaXMuY2FsbGJhY2tfPWEsdGhpcy50YXJnZXRfPWIsdGhpcy5jb25uZWN0XygpLHRoaXMuc3RhdGVfPWZiLHRoaXMudmFsdWVffSxjbG9zZTpmdW5jdGlvbigpe3RoaXMuc3RhdGVfPT1mYiYmKHoodGhpcyksdGhpcy5kaXNjb25uZWN0XygpLHRoaXMudmFsdWVfPXZvaWQgMCx0aGlzLmNhbGxiYWNrXz12b2lkIDAsdGhpcy50YXJnZXRfPXZvaWQgMCx0aGlzLnN0YXRlXz1nYil9LGRlbGl2ZXI6ZnVuY3Rpb24oKXt0aGlzLnN0YXRlXz09ZmImJm8odGhpcyl9LHJlcG9ydF86ZnVuY3Rpb24oYSl7dHJ5e3RoaXMuY2FsbGJhY2tfLmFwcGx5KHRoaXMudGFyZ2V0XyxhKX1jYXRjaChiKXt4Ll9lcnJvclRocm93bkR1cmluZ0NhbGxiYWNrPSEwLGNvbnNvbGUuZXJyb3IoIkV4Y2VwdGlvbiBjYXVnaHQgZHVyaW5nIG9ic2VydmVyIGNhbGxiYWNrOiAiKyhiLnN0YWNrfHxiKSl9fSxkaXNjYXJkQ2hhbmdlczpmdW5jdGlvbigpe3JldHVybiB0aGlzLmNoZWNrXyh2b2lkIDAsITApLHRoaXMudmFsdWVffX07dmFyIGpiLGtiPSFQO3guX2FsbE9ic2VydmVyc0NvdW50PTAsa2ImJihqYj1bXSk7dmFyIGxiPSExO2EuUGxhdGZvcm09YS5QbGF0Zm9ybXx8e30sYS5QbGF0Zm9ybS5wZXJmb3JtTWljcm90YXNrQ2hlY2twb2ludD1mdW5jdGlvbigpe2lmKCFsYiYma2Ipe2xiPSEwO3ZhciBiLGMsZD0wO2Rve2QrKyxjPWpiLGpiPVtdLGI9ITE7Zm9yKHZhciBlPTA7ZTxjLmxlbmd0aDtlKyspe3ZhciBmPWNbZV07Zi5zdGF0ZV89PWZiJiYoZi5jaGVja18oKSYmKGI9ITApLGpiLnB1c2goZikpfXMoKSYmKGI9ITApfXdoaWxlKF8+ZCYmYik7TyYmKGEuZGlydHlDaGVja0N5Y2xlQ291bnQ9ZCksbGI9ITF9fSxrYiYmKGEuUGxhdGZvcm0uY2xlYXJPYnNlcnZlcnM9ZnVuY3Rpb24oKXtqYj1bXX0pLEEucHJvdG90eXBlPVMoe19fcHJvdG9fXzp4LnByb3RvdHlwZSxhcnJheU9ic2VydmU6ITEsY29ubmVjdF86ZnVuY3Rpb24oKXtQP3RoaXMuZGlyZWN0T2JzZXJ2ZXJfPXUodGhpcyx0aGlzLnZhbHVlXyx0aGlzLmFycmF5T2JzZXJ2ZSk6dGhpcy5vbGRPYmplY3RfPXRoaXMuY29weU9iamVjdCh0aGlzLnZhbHVlXyl9LGNvcHlPYmplY3Q6ZnVuY3Rpb24oYSl7dmFyIGI9QXJyYXkuaXNBcnJheShhKT9bXTp7fTtmb3IodmFyIGMgaW4gYSliW2NdPWFbY107cmV0dXJuIEFycmF5LmlzQXJyYXkoYSkmJihiLmxlbmd0aD1hLmxlbmd0aCksYn0sY2hlY2tfOmZ1bmN0aW9uKGEpe3ZhciBiLGM7aWYoUCl7aWYoIWEpcmV0dXJuITE7Yz17fSxiPUcodGhpcy52YWx1ZV8sYSxjKX1lbHNlIGM9dGhpcy5vbGRPYmplY3RfLGI9cih0aGlzLnZhbHVlXyx0aGlzLm9sZE9iamVjdF8pO3JldHVybiBxKGIpPyExOihQfHwodGhpcy5vbGRPYmplY3RfPXRoaXMuY29weU9iamVjdCh0aGlzLnZhbHVlXykpLHRoaXMucmVwb3J0XyhbYi5hZGRlZHx8e30sYi5yZW1vdmVkfHx7fSxiLmNoYW5nZWR8fHt9LGZ1bmN0aW9uKGEpe3JldHVybiBjW2FdfV0pLCEwKX0sZGlzY29ubmVjdF86ZnVuY3Rpb24oKXtQPyh0aGlzLmRpcmVjdE9ic2VydmVyXy5jbG9zZSgpLHRoaXMuZGlyZWN0T2JzZXJ2ZXJfPXZvaWQgMCk6dGhpcy5vbGRPYmplY3RfPXZvaWQgMH0sZGVsaXZlcjpmdW5jdGlvbigpe3RoaXMuc3RhdGVfPT1mYiYmKFA/dGhpcy5kaXJlY3RPYnNlcnZlcl8uZGVsaXZlcighMSk6byh0aGlzKSl9LGRpc2NhcmRDaGFuZ2VzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGlyZWN0T2JzZXJ2ZXJfP3RoaXMuZGlyZWN0T2JzZXJ2ZXJfLmRlbGl2ZXIoITApOnRoaXMub2xkT2JqZWN0Xz10aGlzLmNvcHlPYmplY3QodGhpcy52YWx1ZV8pLHRoaXMudmFsdWVffX0pLEIucHJvdG90eXBlPVMoe19fcHJvdG9fXzpBLnByb3RvdHlwZSxhcnJheU9ic2VydmU6ITAsY29weU9iamVjdDpmdW5jdGlvbihhKXtyZXR1cm4gYS5zbGljZSgpfSxjaGVja186ZnVuY3Rpb24oYSl7dmFyIGI7aWYoUCl7aWYoIWEpcmV0dXJuITE7Yj1OKHRoaXMudmFsdWVfLGEpfWVsc2UgYj1KKHRoaXMudmFsdWVfLDAsdGhpcy52YWx1ZV8ubGVuZ3RoLHRoaXMub2xkT2JqZWN0XywwLHRoaXMub2xkT2JqZWN0Xy5sZW5ndGgpO3JldHVybiBiJiZiLmxlbmd0aD8oUHx8KHRoaXMub2xkT2JqZWN0Xz10aGlzLmNvcHlPYmplY3QodGhpcy52YWx1ZV8pKSx0aGlzLnJlcG9ydF8oW2JdKSwhMCk6ITF9fSksQi5hcHBseVNwbGljZXM9ZnVuY3Rpb24oYSxiLGMpe2MuZm9yRWFjaChmdW5jdGlvbihjKXtmb3IodmFyIGQ9W2MuaW5kZXgsYy5yZW1vdmVkLmxlbmd0aF0sZT1jLmluZGV4O2U8Yy5pbmRleCtjLmFkZGVkQ291bnQ7KWQucHVzaChiW2VdKSxlKys7QXJyYXkucHJvdG90eXBlLnNwbGljZS5hcHBseShhLGQpfSl9LEMucHJvdG90eXBlPVMoe19fcHJvdG9fXzp4LnByb3RvdHlwZSxnZXQgcGF0aCgpe3JldHVybiB0aGlzLnBhdGhffSxjb25uZWN0XzpmdW5jdGlvbigpe1AmJih0aGlzLmRpcmVjdE9ic2VydmVyXz13KHRoaXMsdGhpcy5vYmplY3RfKSksdGhpcy5jaGVja18odm9pZCAwLCEwKX0sZGlzY29ubmVjdF86ZnVuY3Rpb24oKXt0aGlzLnZhbHVlXz12b2lkIDAsdGhpcy5kaXJlY3RPYnNlcnZlcl8mJih0aGlzLmRpcmVjdE9ic2VydmVyXy5jbG9zZSh0aGlzKSx0aGlzLmRpcmVjdE9ic2VydmVyXz12b2lkIDApfSxpdGVyYXRlT2JqZWN0c186ZnVuY3Rpb24oYSl7dGhpcy5wYXRoXy5pdGVyYXRlT2JqZWN0cyh0aGlzLm9iamVjdF8sYSl9LGNoZWNrXzpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMudmFsdWVfO3JldHVybiB0aGlzLnZhbHVlXz10aGlzLnBhdGhfLmdldFZhbHVlRnJvbSh0aGlzLm9iamVjdF8pLGJ8fGcodGhpcy52YWx1ZV8sYyk/ITE6KHRoaXMucmVwb3J0XyhbdGhpcy52YWx1ZV8sYyx0aGlzXSksITApfSxzZXRWYWx1ZTpmdW5jdGlvbihhKXt0aGlzLnBhdGhfJiZ0aGlzLnBhdGhfLnNldFZhbHVlRnJvbSh0aGlzLm9iamVjdF8sYSl9fSk7dmFyIG1iPXt9O0QucHJvdG90eXBlPVMoe19fcHJvdG9fXzp4LnByb3RvdHlwZSxjb25uZWN0XzpmdW5jdGlvbigpe2lmKFApe2Zvcih2YXIgYSxiPSExLGM9MDtjPHRoaXMub2JzZXJ2ZWRfLmxlbmd0aDtjKz0yKWlmKGE9dGhpcy5vYnNlcnZlZF9bY10sYSE9PW1iKXtiPSEwO2JyZWFrfWImJih0aGlzLmRpcmVjdE9ic2VydmVyXz13KHRoaXMsYSkpfXRoaXMuY2hlY2tfKHZvaWQgMCwhdGhpcy5yZXBvcnRDaGFuZ2VzT25PcGVuXyl9LGRpc2Nvbm5lY3RfOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPTA7YTx0aGlzLm9ic2VydmVkXy5sZW5ndGg7YSs9Mil0aGlzLm9ic2VydmVkX1thXT09PW1iJiZ0aGlzLm9ic2VydmVkX1thKzFdLmNsb3NlKCk7dGhpcy5vYnNlcnZlZF8ubGVuZ3RoPTAsdGhpcy52YWx1ZV8ubGVuZ3RoPTAsdGhpcy5kaXJlY3RPYnNlcnZlcl8mJih0aGlzLmRpcmVjdE9ic2VydmVyXy5jbG9zZSh0aGlzKSx0aGlzLmRpcmVjdE9ic2VydmVyXz12b2lkIDApfSxhZGRQYXRoOmZ1bmN0aW9uKGEsYil7aWYodGhpcy5zdGF0ZV8hPWViJiZ0aGlzLnN0YXRlXyE9aGIpdGhyb3cgRXJyb3IoIkNhbm5vdCBhZGQgcGF0aHMgb25jZSBzdGFydGVkLiIpO3ZhciBiPW0oYik7aWYodGhpcy5vYnNlcnZlZF8ucHVzaChhLGIpLHRoaXMucmVwb3J0Q2hhbmdlc09uT3Blbl8pe3ZhciBjPXRoaXMub2JzZXJ2ZWRfLmxlbmd0aC8yLTE7dGhpcy52YWx1ZV9bY109Yi5nZXRWYWx1ZUZyb20oYSl9fSxhZGRPYnNlcnZlcjpmdW5jdGlvbihhKXtpZih0aGlzLnN0YXRlXyE9ZWImJnRoaXMuc3RhdGVfIT1oYil0aHJvdyBFcnJvcigiQ2Fubm90IGFkZCBvYnNlcnZlcnMgb25jZSBzdGFydGVkLiIpO2lmKHRoaXMub2JzZXJ2ZWRfLnB1c2gobWIsYSksdGhpcy5yZXBvcnRDaGFuZ2VzT25PcGVuXyl7dmFyIGI9dGhpcy5vYnNlcnZlZF8ubGVuZ3RoLzItMTt0aGlzLnZhbHVlX1tiXT1hLm9wZW4odGhpcy5kZWxpdmVyLHRoaXMpfX0sc3RhcnRSZXNldDpmdW5jdGlvbigpe2lmKHRoaXMuc3RhdGVfIT1mYil0aHJvdyBFcnJvcigiQ2FuIG9ubHkgcmVzZXQgd2hpbGUgb3BlbiIpO3RoaXMuc3RhdGVfPWhiLHRoaXMuZGlzY29ubmVjdF8oKX0sZmluaXNoUmVzZXQ6ZnVuY3Rpb24oKXtpZih0aGlzLnN0YXRlXyE9aGIpdGhyb3cgRXJyb3IoIkNhbiBvbmx5IGZpbmlzaFJlc2V0IGFmdGVyIHN0YXJ0UmVzZXQiKTtyZXR1cm4gdGhpcy5zdGF0ZV89ZmIsdGhpcy5jb25uZWN0XygpLHRoaXMudmFsdWVffSxpdGVyYXRlT2JqZWN0c186ZnVuY3Rpb24oYSl7Zm9yKHZhciBiLGM9MDtjPHRoaXMub2JzZXJ2ZWRfLmxlbmd0aDtjKz0yKWI9dGhpcy5vYnNlcnZlZF9bY10sYiE9PW1iJiZ0aGlzLm9ic2VydmVkX1tjKzFdLml0ZXJhdGVPYmplY3RzKGIsYSl9LGNoZWNrXzpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYyxkPTA7ZDx0aGlzLm9ic2VydmVkXy5sZW5ndGg7ZCs9Mil7dmFyIGUsZj10aGlzLm9ic2VydmVkX1tkXSxoPXRoaXMub2JzZXJ2ZWRfW2QrMV07aWYoZj09PW1iKXt2YXIgaT1oO2U9dGhpcy5zdGF0ZV89PT1lYj9pLm9wZW4odGhpcy5kZWxpdmVyLHRoaXMpOmkuZGlzY2FyZENoYW5nZXMoKX1lbHNlIGU9aC5nZXRWYWx1ZUZyb20oZik7Yj90aGlzLnZhbHVlX1tkLzJdPWU6ZyhlLHRoaXMudmFsdWVfW2QvMl0pfHwoYz1jfHxbXSxjW2QvMl09dGhpcy52YWx1ZV9bZC8yXSx0aGlzLnZhbHVlX1tkLzJdPWUpfXJldHVybiBjPyh0aGlzLnJlcG9ydF8oW3RoaXMudmFsdWVfLGMsdGhpcy5vYnNlcnZlZF9dKSwhMCk6ITF9fSksRi5wcm90b3R5cGU9e29wZW46ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5jYWxsYmFja189YSx0aGlzLnRhcmdldF89Yix0aGlzLnZhbHVlXz10aGlzLmdldFZhbHVlRm5fKHRoaXMub2JzZXJ2YWJsZV8ub3Blbih0aGlzLm9ic2VydmVkQ2FsbGJhY2tfLHRoaXMpKSx0aGlzLnZhbHVlX30sb2JzZXJ2ZWRDYWxsYmFja186ZnVuY3Rpb24oYSl7aWYoYT10aGlzLmdldFZhbHVlRm5fKGEpLCFnKGEsdGhpcy52YWx1ZV8pKXt2YXIgYj10aGlzLnZhbHVlXzt0aGlzLnZhbHVlXz1hLHRoaXMuY2FsbGJhY2tfLmNhbGwodGhpcy50YXJnZXRfLHRoaXMudmFsdWVfLGIpfX0sZGlzY2FyZENoYW5nZXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy52YWx1ZV89dGhpcy5nZXRWYWx1ZUZuXyh0aGlzLm9ic2VydmFibGVfLmRpc2NhcmRDaGFuZ2VzKCkpLHRoaXMudmFsdWVffSxkZWxpdmVyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub2JzZXJ2YWJsZV8uZGVsaXZlcigpfSxzZXRWYWx1ZTpmdW5jdGlvbihhKXtyZXR1cm4gYT10aGlzLnNldFZhbHVlRm5fKGEpLCF0aGlzLmRvbnRQYXNzVGhyb3VnaFNldF8mJnRoaXMub2JzZXJ2YWJsZV8uc2V0VmFsdWU/dGhpcy5vYnNlcnZhYmxlXy5zZXRWYWx1ZShhKTp2b2lkIDB9LGNsb3NlOmZ1bmN0aW9uKCl7dGhpcy5vYnNlcnZhYmxlXyYmdGhpcy5vYnNlcnZhYmxlXy5jbG9zZSgpLHRoaXMuY2FsbGJhY2tfPXZvaWQgMCx0aGlzLnRhcmdldF89dm9pZCAwLHRoaXMub2JzZXJ2YWJsZV89dm9pZCAwLHRoaXMudmFsdWVfPXZvaWQgMCx0aGlzLmdldFZhbHVlRm5fPXZvaWQgMCx0aGlzLnNldFZhbHVlRm5fPXZvaWQgMH19O3ZhciBuYj17YWRkOiEwLHVwZGF0ZTohMCwiZGVsZXRlIjohMH0sb2I9MCxwYj0xLHFiPTIscmI9MztJLnByb3RvdHlwZT17Y2FsY0VkaXREaXN0YW5jZXM6ZnVuY3Rpb24oYSxiLGMsZCxlLGYpe2Zvcih2YXIgZz1mLWUrMSxoPWMtYisxLGk9bmV3IEFycmF5KGcpLGo9MDtnPmo7aisrKWlbal09bmV3IEFycmF5KGgpLGlbal1bMF09ajtmb3IodmFyIGs9MDtoPms7aysrKWlbMF1ba109aztmb3IodmFyIGo9MTtnPmo7aisrKWZvcih2YXIgaz0xO2g+aztrKyspaWYodGhpcy5lcXVhbHMoYVtiK2stMV0sZFtlK2otMV0pKWlbal1ba109aVtqLTFdW2stMV07ZWxzZXt2YXIgbD1pW2otMV1ba10rMSxtPWlbal1bay0xXSsxO2lbal1ba109bT5sP2w6bX1yZXR1cm4gaX0sc3BsaWNlT3BlcmF0aW9uc0Zyb21FZGl0RGlzdGFuY2VzOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1hLmxlbmd0aC0xLGM9YVswXS5sZW5ndGgtMSxkPWFbYl1bY10sZT1bXTtiPjB8fGM+MDspaWYoMCE9YilpZigwIT1jKXt2YXIgZixnPWFbYi0xXVtjLTFdLGg9YVtiLTFdW2NdLGk9YVtiXVtjLTFdO2Y9aT5oP2c+aD9oOmc6Zz5pP2k6ZyxmPT1nPyhnPT1kP2UucHVzaChvYik6KGUucHVzaChwYiksZD1nKSxiLS0sYy0tKTpmPT1oPyhlLnB1c2gocmIpLGItLSxkPWgpOihlLnB1c2gocWIpLGMtLSxkPWkpfWVsc2UgZS5wdXNoKHJiKSxiLS07ZWxzZSBlLnB1c2gocWIpLGMtLTtyZXR1cm4gZS5yZXZlcnNlKCksZX0sY2FsY1NwbGljZXM6ZnVuY3Rpb24oYSxiLGMsZCxlLGYpe3ZhciBnPTAsaD0wLGk9TWF0aC5taW4oYy1iLGYtZSk7aWYoMD09YiYmMD09ZSYmKGc9dGhpcy5zaGFyZWRQcmVmaXgoYSxkLGkpKSxjPT1hLmxlbmd0aCYmZj09ZC5sZW5ndGgmJihoPXRoaXMuc2hhcmVkU3VmZml4KGEsZCxpLWcpKSxiKz1nLGUrPWcsYy09aCxmLT1oLGMtYj09MCYmZi1lPT0wKXJldHVybltdO2lmKGI9PWMpe2Zvcih2YXIgaj1IKGIsW10sMCk7Zj5lOylqLnJlbW92ZWQucHVzaChkW2UrK10pO3JldHVybltqXX1pZihlPT1mKXJldHVybltIKGIsW10sYy1iKV07Zm9yKHZhciBrPXRoaXMuc3BsaWNlT3BlcmF0aW9uc0Zyb21FZGl0RGlzdGFuY2VzKHRoaXMuY2FsY0VkaXREaXN0YW5jZXMoYSxiLGMsZCxlLGYpKSxqPXZvaWQgMCxsPVtdLG09YixuPWUsbz0wO288ay5sZW5ndGg7bysrKXN3aXRjaChrW29dKXtjYXNlIG9iOmomJihsLnB1c2goaiksaj12b2lkIDApLG0rKyxuKys7YnJlYWs7Y2FzZSBwYjpqfHwoaj1IKG0sW10sMCkpLGouYWRkZWRDb3VudCsrLG0rKyxqLnJlbW92ZWQucHVzaChkW25dKSxuKys7YnJlYWs7Y2FzZSBxYjpqfHwoaj1IKG0sW10sMCkpLGouYWRkZWRDb3VudCsrLG0rKzticmVhaztjYXNlIHJiOmp8fChqPUgobSxbXSwwKSksai5yZW1vdmVkLnB1c2goZFtuXSksbisrfXJldHVybiBqJiZsLnB1c2goaiksbH0sc2hhcmVkUHJlZml4OmZ1bmN0aW9uKGEsYixjKXtmb3IodmFyIGQ9MDtjPmQ7ZCsrKWlmKCF0aGlzLmVxdWFscyhhW2RdLGJbZF0pKXJldHVybiBkO3JldHVybiBjfSxzaGFyZWRTdWZmaXg6ZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZD1hLmxlbmd0aCxlPWIubGVuZ3RoLGY9MDtjPmYmJnRoaXMuZXF1YWxzKGFbLS1kXSxiWy0tZV0pOylmKys7cmV0dXJuIGZ9LGNhbGN1bGF0ZVNwbGljZXM6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5jYWxjU3BsaWNlcyhhLDAsYS5sZW5ndGgsYiwwLGIubGVuZ3RoKX0sZXF1YWxzOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGE9PT1ifX07dmFyIHNiPW5ldyBJO2EuT2JzZXJ2ZXI9eCxhLk9ic2VydmVyLnJ1bkVPTV89YmIsYS5PYnNlcnZlci5vYnNlcnZlclNlbnRpbmVsXz1tYixhLk9ic2VydmVyLmhhc09iamVjdE9ic2VydmU9UCxhLkFycmF5T2JzZXJ2ZXI9QixhLkFycmF5T2JzZXJ2ZXIuY2FsY3VsYXRlU3BsaWNlcz1mdW5jdGlvbihhLGIpe3JldHVybiBzYi5jYWxjdWxhdGVTcGxpY2VzKGEsYil9LGEuQXJyYXlTcGxpY2U9SSxhLk9iamVjdE9ic2VydmVyPUEsYS5QYXRoT2JzZXJ2ZXI9QyxhLkNvbXBvdW5kT2JzZXJ2ZXI9RCxhLlBhdGg9bCxhLk9ic2VydmVyVHJhbnNmb3JtPUZ9KCJ1bmRlZmluZWQiIT10eXBlb2YgZ2xvYmFsJiZnbG9iYWwmJiJ1bmRlZmluZWQiIT10eXBlb2YgbW9kdWxlJiZtb2R1bGU/Z2xvYmFsOnRoaXN8fHdpbmRvdyksZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYShhKXtmb3IoO2EucGFyZW50Tm9kZTspYT1hLnBhcmVudE5vZGU7cmV0dXJuImZ1bmN0aW9uIj09dHlwZW9mIGEuZ2V0RWxlbWVudEJ5SWQ/YTpudWxsfWZ1bmN0aW9uIGIoYSxiLGMpe3ZhciBkPWEuYmluZGluZ3NfO3JldHVybiBkfHwoZD1hLmJpbmRpbmdzXz17fSksZFtiXSYmY1tiXS5jbG9zZSgpLGRbYl09Y31mdW5jdGlvbiBjKGEsYixjKXtyZXR1cm4gY31mdW5jdGlvbiBkKGEpe3JldHVybiBudWxsPT1hPyIiOmF9ZnVuY3Rpb24gZShhLGIpe2EuZGF0YT1kKGIpfWZ1bmN0aW9uIGYoYSl7cmV0dXJuIGZ1bmN0aW9uKGIpe3JldHVybiBlKGEsYil9fWZ1bmN0aW9uIGcoYSxiLGMsZSl7cmV0dXJuIGM/dm9pZChlP2Euc2V0QXR0cmlidXRlKGIsIiIpOmEucmVtb3ZlQXR0cmlidXRlKGIpKTp2b2lkIGEuc2V0QXR0cmlidXRlKGIsZChlKSl9ZnVuY3Rpb24gaChhLGIsYyl7cmV0dXJuIGZ1bmN0aW9uKGQpe2coYSxiLGMsZCl9fWZ1bmN0aW9uIGkoYSl7c3dpdGNoKGEudHlwZSl7Y2FzZSJjaGVja2JveCI6cmV0dXJuIHU7Y2FzZSJyYWRpbyI6Y2FzZSJzZWxlY3QtbXVsdGlwbGUiOmNhc2Uic2VsZWN0LW9uZSI6cmV0dXJuImNoYW5nZSI7Y2FzZSJyYW5nZSI6aWYoL1RyaWRlbnR8TVNJRS8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSlyZXR1cm4iY2hhbmdlIjtkZWZhdWx0OnJldHVybiJpbnB1dCJ9fWZ1bmN0aW9uIGooYSxiLGMsZSl7YVtiXT0oZXx8ZCkoYyl9ZnVuY3Rpb24gayhhLGIsYyl7cmV0dXJuIGZ1bmN0aW9uKGQpe3JldHVybiBqKGEsYixkLGMpfX1mdW5jdGlvbiBsKCl7fWZ1bmN0aW9uIG0oYSxiLGMsZCl7ZnVuY3Rpb24gZSgpe2Muc2V0VmFsdWUoYVtiXSksYy5kaXNjYXJkQ2hhbmdlcygpLChkfHxsKShhKSxQbGF0Zm9ybS5wZXJmb3JtTWljcm90YXNrQ2hlY2twb2ludCgpfXZhciBmPWkoYSk7cmV0dXJuIGEuYWRkRXZlbnRMaXN0ZW5lcihmLGUpLHtjbG9zZTpmdW5jdGlvbigpe2EucmVtb3ZlRXZlbnRMaXN0ZW5lcihmLGUpLGMuY2xvc2UoKX0sb2JzZXJ2YWJsZV86Y319ZnVuY3Rpb24gbihhKXtyZXR1cm4gQm9vbGVhbihhKX1mdW5jdGlvbiBvKGIpe2lmKGIuZm9ybSlyZXR1cm4gcyhiLmZvcm0uZWxlbWVudHMsZnVuY3Rpb24oYSl7cmV0dXJuIGEhPWImJiJJTlBVVCI9PWEudGFnTmFtZSYmInJhZGlvIj09YS50eXBlJiZhLm5hbWU9PWIubmFtZX0pO3ZhciBjPWEoYik7aWYoIWMpcmV0dXJuW107dmFyIGQ9Yy5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dFt0eXBlPSJyYWRpbyJdW25hbWU9IicrYi5uYW1lKyciXScpO3JldHVybiBzKGQsZnVuY3Rpb24oYSl7cmV0dXJuIGEhPWImJiFhLmZvcm19KX1mdW5jdGlvbiBwKGEpeyJJTlBVVCI9PT1hLnRhZ05hbWUmJiJyYWRpbyI9PT1hLnR5cGUmJm8oYSkuZm9yRWFjaChmdW5jdGlvbihhKXt2YXIgYj1hLmJpbmRpbmdzXy5jaGVja2VkO2ImJmIub2JzZXJ2YWJsZV8uc2V0VmFsdWUoITEpfSl9ZnVuY3Rpb24gcShhLGIpe3ZhciBjLGUsZixnPWEucGFyZW50Tm9kZTtnIGluc3RhbmNlb2YgSFRNTFNlbGVjdEVsZW1lbnQmJmcuYmluZGluZ3NfJiZnLmJpbmRpbmdzXy52YWx1ZSYmKGM9ZyxlPWMuYmluZGluZ3NfLnZhbHVlLGY9Yy52YWx1ZSksYS52YWx1ZT1kKGIpLGMmJmMudmFsdWUhPWYmJihlLm9ic2VydmFibGVfLnNldFZhbHVlKGMudmFsdWUpLGUub2JzZXJ2YWJsZV8uZGlzY2FyZENoYW5nZXMoKSxQbGF0Zm9ybS5wZXJmb3JtTWljcm90YXNrQ2hlY2twb2ludCgpKX1mdW5jdGlvbiByKGEpe3JldHVybiBmdW5jdGlvbihiKXtxKGEsYil9fXZhciBzPUFycmF5LnByb3RvdHlwZS5maWx0ZXIuY2FsbC5iaW5kKEFycmF5LnByb3RvdHlwZS5maWx0ZXIpO05vZGUucHJvdG90eXBlLmJpbmQ9ZnVuY3Rpb24oYSxiKXtjb25zb2xlLmVycm9yKCJVbmhhbmRsZWQgYmluZGluZyB0byBOb2RlOiAiLHRoaXMsYSxiKX0sTm9kZS5wcm90b3R5cGUuYmluZEZpbmlzaGVkPWZ1bmN0aW9uKCl7fTt2YXIgdD1jO09iamVjdC5kZWZpbmVQcm9wZXJ0eShQbGF0Zm9ybSwiZW5hYmxlQmluZGluZ3NSZWZsZWN0aW9uIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHQ9PT1ifSxzZXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIHQ9YT9iOmMsYX0sY29uZmlndXJhYmxlOiEwfSksVGV4dC5wcm90b3R5cGUuYmluZD1mdW5jdGlvbihhLGIsYyl7aWYoInRleHRDb250ZW50IiE9PWEpcmV0dXJuIE5vZGUucHJvdG90eXBlLmJpbmQuY2FsbCh0aGlzLGEsYixjKTtpZihjKXJldHVybiBlKHRoaXMsYik7dmFyIGQ9YjtyZXR1cm4gZSh0aGlzLGQub3BlbihmKHRoaXMpKSksdCh0aGlzLGEsZCl9LEVsZW1lbnQucHJvdG90eXBlLmJpbmQ9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPSI/Ij09YVthLmxlbmd0aC0xXTtpZihkJiYodGhpcy5yZW1vdmVBdHRyaWJ1dGUoYSksYT1hLnNsaWNlKDAsLTEpKSxjKXJldHVybiBnKHRoaXMsYSxkLGIpO3ZhciBlPWI7cmV0dXJuIGcodGhpcyxhLGQsZS5vcGVuKGgodGhpcyxhLGQpKSksdCh0aGlzLGEsZSl9O3ZhciB1OyFmdW5jdGlvbigpe3ZhciBhPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpLGI9YS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbnB1dCIpKTtiLnNldEF0dHJpYnV0ZSgidHlwZSIsImNoZWNrYm94Iik7dmFyIGMsZD0wO2IuYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLGZ1bmN0aW9uKCl7ZCsrLGM9Y3x8ImNsaWNrIn0pLGIuYWRkRXZlbnRMaXN0ZW5lcigiY2hhbmdlIixmdW5jdGlvbigpe2QrKyxjPWN8fCJjaGFuZ2UifSk7dmFyIGU9ZG9jdW1lbnQuY3JlYXRlRXZlbnQoIk1vdXNlRXZlbnQiKTtlLmluaXRNb3VzZUV2ZW50KCJjbGljayIsITAsITAsd2luZG93LDAsMCwwLDAsMCwhMSwhMSwhMSwhMSwwLG51bGwpLGIuZGlzcGF0Y2hFdmVudChlKSx1PTE9PWQ/ImNoYW5nZSI6Y30oKSxIVE1MSW5wdXRFbGVtZW50LnByb3RvdHlwZS5iaW5kPWZ1bmN0aW9uKGEsYyxlKXtpZigidmFsdWUiIT09YSYmImNoZWNrZWQiIT09YSlyZXR1cm4gSFRNTEVsZW1lbnQucHJvdG90eXBlLmJpbmQuY2FsbCh0aGlzLGEsYyxlKTt0aGlzLnJlbW92ZUF0dHJpYnV0ZShhKTt2YXIgZj0iY2hlY2tlZCI9PWE/bjpkLGc9ImNoZWNrZWQiPT1hP3A6bDtpZihlKXJldHVybiBqKHRoaXMsYSxjLGYpO3ZhciBoPWMsaT1tKHRoaXMsYSxoLGcpO3JldHVybiBqKHRoaXMsYSxoLm9wZW4oayh0aGlzLGEsZikpLGYpLGIodGhpcyxhLGkpfSxIVE1MVGV4dEFyZWFFbGVtZW50LnByb3RvdHlwZS5iaW5kPWZ1bmN0aW9uKGEsYixjKXtpZigidmFsdWUiIT09YSlyZXR1cm4gSFRNTEVsZW1lbnQucHJvdG90eXBlLmJpbmQuY2FsbCh0aGlzLGEsYixjKTtpZih0aGlzLnJlbW92ZUF0dHJpYnV0ZSgidmFsdWUiKSxjKXJldHVybiBqKHRoaXMsInZhbHVlIixiKTt2YXIgZT1iLGY9bSh0aGlzLCJ2YWx1ZSIsZSk7cmV0dXJuIGoodGhpcywidmFsdWUiLGUub3BlbihrKHRoaXMsInZhbHVlIixkKSkpLHQodGhpcyxhLGYpfSxIVE1MT3B0aW9uRWxlbWVudC5wcm90b3R5cGUuYmluZD1mdW5jdGlvbihhLGIsYyl7aWYoInZhbHVlIiE9PWEpcmV0dXJuIEhUTUxFbGVtZW50LnByb3RvdHlwZS5iaW5kLmNhbGwodGhpcyxhLGIsYyk7aWYodGhpcy5yZW1vdmVBdHRyaWJ1dGUoInZhbHVlIiksYylyZXR1cm4gcSh0aGlzLGIpO3ZhciBkPWIsZT1tKHRoaXMsInZhbHVlIixkKTtyZXR1cm4gcSh0aGlzLGQub3BlbihyKHRoaXMpKSksdCh0aGlzLGEsZSl9LEhUTUxTZWxlY3RFbGVtZW50LnByb3RvdHlwZS5iaW5kPWZ1bmN0aW9uKGEsYyxkKXtpZigic2VsZWN0ZWRpbmRleCI9PT1hJiYoYT0ic2VsZWN0ZWRJbmRleCIpLCJzZWxlY3RlZEluZGV4IiE9PWEmJiJ2YWx1ZSIhPT1hKXJldHVybiBIVE1MRWxlbWVudC5wcm90b3R5cGUuYmluZC5jYWxsKHRoaXMsYSxjLGQpO2lmKHRoaXMucmVtb3ZlQXR0cmlidXRlKGEpLGQpcmV0dXJuIGoodGhpcyxhLGMpO3ZhciBlPWMsZj1tKHRoaXMsYSxlKTtyZXR1cm4gaih0aGlzLGEsZS5vcGVuKGsodGhpcyxhKSkpLGIodGhpcyxhLGYpfX0odGhpcyksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7aWYoIWEpdGhyb3cgbmV3IEVycm9yKCJBc3NlcnRpb24gZmFpbGVkIil9ZnVuY3Rpb24gYyhhKXtmb3IodmFyIGI7Yj1hLnBhcmVudE5vZGU7KWE9YjtyZXR1cm4gYX1mdW5jdGlvbiBkKGEsYil7aWYoYil7Zm9yKHZhciBkLGU9IiMiK2I7IWQmJihhPWMoYSksYS5wcm90b0NvbnRlbnRfP2Q9YS5wcm90b0NvbnRlbnRfLnF1ZXJ5U2VsZWN0b3IoZSk6YS5nZXRFbGVtZW50QnlJZCYmKGQ9YS5nZXRFbGVtZW50QnlJZChiKSksIWQmJmEudGVtcGxhdGVDcmVhdG9yXyk7KWE9YS50ZW1wbGF0ZUNyZWF0b3JfO3JldHVybiBkfX1mdW5jdGlvbiBlKGEpe3JldHVybiJ0ZW1wbGF0ZSI9PWEudGFnTmFtZSYmImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj09YS5uYW1lc3BhY2VVUkl9ZnVuY3Rpb24gZihhKXtyZXR1cm4iVEVNUExBVEUiPT1hLnRhZ05hbWUmJiJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sIj09YS5uYW1lc3BhY2VVUkl9ZnVuY3Rpb24gZyhhKXtyZXR1cm4gQm9vbGVhbihMW2EudGFnTmFtZV0mJmEuaGFzQXR0cmlidXRlKCJ0ZW1wbGF0ZSIpKX1mdW5jdGlvbiBoKGEpe3JldHVybiB2b2lkIDA9PT1hLmlzVGVtcGxhdGVfJiYoYS5pc1RlbXBsYXRlXz0iVEVNUExBVEUiPT1hLnRhZ05hbWV8fGcoYSkpLGEuaXNUZW1wbGF0ZV99ZnVuY3Rpb24gaShhLGIpe3ZhciBjPWEucXVlcnlTZWxlY3RvckFsbChOKTtoKGEpJiZiKGEpLEcoYyxiKX1mdW5jdGlvbiBqKGEpe2Z1bmN0aW9uIGIoYSl7SFRNTFRlbXBsYXRlRWxlbWVudC5kZWNvcmF0ZShhKXx8aihhLmNvbnRlbnQpfWkoYSxiKX1mdW5jdGlvbiBrKGEsYil7T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoYikuZm9yRWFjaChmdW5jdGlvbihjKXtPYmplY3QuZGVmaW5lUHJvcGVydHkoYSxjLE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoYixjKSl9KX1mdW5jdGlvbiBsKGEpe3ZhciBiPWEub3duZXJEb2N1bWVudDtpZighYi5kZWZhdWx0VmlldylyZXR1cm4gYjt2YXIgYz1iLnRlbXBsYXRlQ29udGVudHNPd25lcl87aWYoIWMpe2ZvcihjPWIuaW1wbGVtZW50YXRpb24uY3JlYXRlSFRNTERvY3VtZW50KCIiKTtjLmxhc3RDaGlsZDspYy5yZW1vdmVDaGlsZChjLmxhc3RDaGlsZCk7Yi50ZW1wbGF0ZUNvbnRlbnRzT3duZXJfPWN9cmV0dXJuIGN9ZnVuY3Rpb24gbShhKXtpZighYS5zdGFnaW5nRG9jdW1lbnRfKXt2YXIgYj1hLm93bmVyRG9jdW1lbnQ7aWYoIWIuc3RhZ2luZ0RvY3VtZW50Xyl7Yi5zdGFnaW5nRG9jdW1lbnRfPWIuaW1wbGVtZW50YXRpb24uY3JlYXRlSFRNTERvY3VtZW50KCIiKSxiLnN0YWdpbmdEb2N1bWVudF8uaXNTdGFnaW5nRG9jdW1lbnQ9ITA7dmFyIGM9Yi5zdGFnaW5nRG9jdW1lbnRfLmNyZWF0ZUVsZW1lbnQoImJhc2UiKTtjLmhyZWY9ZG9jdW1lbnQuYmFzZVVSSSxiLnN0YWdpbmdEb2N1bWVudF8uaGVhZC5hcHBlbmRDaGlsZChjKSxiLnN0YWdpbmdEb2N1bWVudF8uc3RhZ2luZ0RvY3VtZW50Xz1iLnN0YWdpbmdEb2N1bWVudF99YS5zdGFnaW5nRG9jdW1lbnRfPWIuc3RhZ2luZ0RvY3VtZW50X31yZXR1cm4gYS5zdGFnaW5nRG9jdW1lbnRffWZ1bmN0aW9uIG4oYSl7dmFyIGI9YS5vd25lckRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInRlbXBsYXRlIik7YS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShiLGEpO2Zvcih2YXIgYz1hLmF0dHJpYnV0ZXMsZD1jLmxlbmd0aDtkLS0+MDspe3ZhciBlPWNbZF07S1tlLm5hbWVdJiYoInRlbXBsYXRlIiE9PWUubmFtZSYmYi5zZXRBdHRyaWJ1dGUoZS5uYW1lLGUudmFsdWUpLGEucmVtb3ZlQXR0cmlidXRlKGUubmFtZSkpfXJldHVybiBifWZ1bmN0aW9uIG8oYSl7dmFyIGI9YS5vd25lckRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInRlbXBsYXRlIik7YS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShiLGEpO2Zvcih2YXIgYz1hLmF0dHJpYnV0ZXMsZD1jLmxlbmd0aDtkLS0+MDspe3ZhciBlPWNbZF07Yi5zZXRBdHRyaWJ1dGUoZS5uYW1lLGUudmFsdWUpLGEucmVtb3ZlQXR0cmlidXRlKGUubmFtZSl9cmV0dXJuIGEucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChhKSxifWZ1bmN0aW9uIHAoYSxiLGMpe3ZhciBkPWEuY29udGVudDtpZihjKXJldHVybiB2b2lkIGQuYXBwZW5kQ2hpbGQoYik7Zm9yKHZhciBlO2U9Yi5maXJzdENoaWxkOylkLmFwcGVuZENoaWxkKGUpfWZ1bmN0aW9uIHEoYSl7UD9hLl9fcHJvdG9fXz1IVE1MVGVtcGxhdGVFbGVtZW50LnByb3RvdHlwZTprKGEsSFRNTFRlbXBsYXRlRWxlbWVudC5wcm90b3R5cGUpfWZ1bmN0aW9uIHIoYSl7YS5zZXRNb2RlbEZuX3x8KGEuc2V0TW9kZWxGbl89ZnVuY3Rpb24oKXthLnNldE1vZGVsRm5TY2hlZHVsZWRfPSExOwp2YXIgYj16KGEsYS5kZWxlZ2F0ZV8mJmEuZGVsZWdhdGVfLnByZXBhcmVCaW5kaW5nKTt3KGEsYixhLm1vZGVsXyl9KSxhLnNldE1vZGVsRm5TY2hlZHVsZWRffHwoYS5zZXRNb2RlbEZuU2NoZWR1bGVkXz0hMCxPYnNlcnZlci5ydW5FT01fKGEuc2V0TW9kZWxGbl8pKX1mdW5jdGlvbiBzKGEsYixjLGQpe2lmKGEmJmEubGVuZ3RoKXtmb3IodmFyIGUsZj1hLmxlbmd0aCxnPTAsaD0wLGk9MCxqPSEwO2Y+aDspe3ZhciBnPWEuaW5kZXhPZigie3siLGgpLGs9YS5pbmRleE9mKCJbWyIsaCksbD0hMSxtPSJ9fSI7aWYoaz49MCYmKDA+Z3x8Zz5rKSYmKGc9ayxsPSEwLG09Il1dIiksaT0wPmc/LTE6YS5pbmRleE9mKG0sZysyKSwwPmkpe2lmKCFlKXJldHVybjtlLnB1c2goYS5zbGljZShoKSk7YnJlYWt9ZT1lfHxbXSxlLnB1c2goYS5zbGljZShoLGcpKTt2YXIgbj1hLnNsaWNlKGcrMixpKS50cmltKCk7ZS5wdXNoKGwpLGo9aiYmbDt2YXIgbz1kJiZkKG4sYixjKTtlLnB1c2gobnVsbD09bz9QYXRoLmdldChuKTpudWxsKSxlLnB1c2gobyksaD1pKzJ9cmV0dXJuIGg9PT1mJiZlLnB1c2goIiIpLGUuaGFzT25lUGF0aD01PT09ZS5sZW5ndGgsZS5pc1NpbXBsZVBhdGg9ZS5oYXNPbmVQYXRoJiYiIj09ZVswXSYmIiI9PWVbNF0sZS5vbmx5T25lVGltZT1qLGUuY29tYmluYXRvcj1mdW5jdGlvbihhKXtmb3IodmFyIGI9ZVswXSxjPTE7YzxlLmxlbmd0aDtjKz00KXt2YXIgZD1lLmhhc09uZVBhdGg/YTphWyhjLTEpLzRdO3ZvaWQgMCE9PWQmJihiKz1kKSxiKz1lW2MrM119cmV0dXJuIGJ9LGV9fWZ1bmN0aW9uIHQoYSxiLGMsZCl7aWYoYi5oYXNPbmVQYXRoKXt2YXIgZT1iWzNdLGY9ZT9lKGQsYywhMCk6YlsyXS5nZXRWYWx1ZUZyb20oZCk7cmV0dXJuIGIuaXNTaW1wbGVQYXRoP2Y6Yi5jb21iaW5hdG9yKGYpfWZvcih2YXIgZz1bXSxoPTE7aDxiLmxlbmd0aDtoKz00KXt2YXIgZT1iW2grMl07Z1soaC0xKS80XT1lP2UoZCxjKTpiW2grMV0uZ2V0VmFsdWVGcm9tKGQpfXJldHVybiBiLmNvbWJpbmF0b3IoZyl9ZnVuY3Rpb24gdShhLGIsYyxkKXt2YXIgZT1iWzNdLGY9ZT9lKGQsYywhMSk6bmV3IFBhdGhPYnNlcnZlcihkLGJbMl0pO3JldHVybiBiLmlzU2ltcGxlUGF0aD9mOm5ldyBPYnNlcnZlclRyYW5zZm9ybShmLGIuY29tYmluYXRvcil9ZnVuY3Rpb24gdihhLGIsYyxkKXtpZihiLm9ubHlPbmVUaW1lKXJldHVybiB0KGEsYixjLGQpO2lmKGIuaGFzT25lUGF0aClyZXR1cm4gdShhLGIsYyxkKTtmb3IodmFyIGU9bmV3IENvbXBvdW5kT2JzZXJ2ZXIsZj0xO2Y8Yi5sZW5ndGg7Zis9NCl7dmFyIGc9YltmXSxoPWJbZisyXTtpZihoKXt2YXIgaT1oKGQsYyxnKTtnP2UuYWRkUGF0aChpKTplLmFkZE9ic2VydmVyKGkpfWVsc2V7dmFyIGo9YltmKzFdO2c/ZS5hZGRQYXRoKGouZ2V0VmFsdWVGcm9tKGQpKTplLmFkZFBhdGgoZCxqKX19cmV0dXJuIG5ldyBPYnNlcnZlclRyYW5zZm9ybShlLGIuY29tYmluYXRvcil9ZnVuY3Rpb24gdyhhLGIsYyxkKXtmb3IodmFyIGU9MDtlPGIubGVuZ3RoO2UrPTIpe3ZhciBmPWJbZV0sZz1iW2UrMV0saD12KGYsZyxhLGMpLGk9YS5iaW5kKGYsaCxnLm9ubHlPbmVUaW1lKTtpJiZkJiZkLnB1c2goaSl9aWYoYS5iaW5kRmluaXNoZWQoKSxiLmlzVGVtcGxhdGUpe2EubW9kZWxfPWM7dmFyIGo9YS5wcm9jZXNzQmluZGluZ0RpcmVjdGl2ZXNfKGIpO2QmJmomJmQucHVzaChqKX19ZnVuY3Rpb24geChhLGIsYyl7dmFyIGQ9YS5nZXRBdHRyaWJ1dGUoYik7cmV0dXJuIHMoIiI9PWQ/Int7fX0iOmQsYixhLGMpfWZ1bmN0aW9uIHkoYSxjKXtiKGEpO2Zvcih2YXIgZD1bXSxlPTA7ZTxhLmF0dHJpYnV0ZXMubGVuZ3RoO2UrKyl7Zm9yKHZhciBmPWEuYXR0cmlidXRlc1tlXSxnPWYubmFtZSxpPWYudmFsdWU7Il8iPT09Z1swXTspZz1nLnN1YnN0cmluZygxKTtpZighaChhKXx8ZyE9PUomJmchPT1IJiZnIT09SSl7dmFyIGo9cyhpLGcsYSxjKTtqJiZkLnB1c2goZyxqKX19cmV0dXJuIGgoYSkmJihkLmlzVGVtcGxhdGU9ITAsZC5pZj14KGEsSixjKSxkLmJpbmQ9eChhLEgsYyksZC5yZXBlYXQ9eChhLEksYyksIWQuaWZ8fGQuYmluZHx8ZC5yZXBlYXR8fChkLmJpbmQ9cygie3t9fSIsSCxhLGMpKSksZH1mdW5jdGlvbiB6KGEsYil7aWYoYS5ub2RlVHlwZT09PU5vZGUuRUxFTUVOVF9OT0RFKXJldHVybiB5KGEsYik7aWYoYS5ub2RlVHlwZT09PU5vZGUuVEVYVF9OT0RFKXt2YXIgYz1zKGEuZGF0YSwidGV4dENvbnRlbnQiLGEsYik7aWYoYylyZXR1cm5bInRleHRDb250ZW50IixjXX1yZXR1cm5bXX1mdW5jdGlvbiBBKGEsYixjLGQsZSxmLGcpe2Zvcih2YXIgaD1iLmFwcGVuZENoaWxkKGMuaW1wb3J0Tm9kZShhLCExKSksaT0wLGo9YS5maXJzdENoaWxkO2o7aj1qLm5leHRTaWJsaW5nKUEoaixoLGMsZC5jaGlsZHJlbltpKytdLGUsZixnKTtyZXR1cm4gZC5pc1RlbXBsYXRlJiYoSFRNTFRlbXBsYXRlRWxlbWVudC5kZWNvcmF0ZShoLGEpLGYmJmguc2V0RGVsZWdhdGVfKGYpKSx3KGgsZCxlLGcpLGh9ZnVuY3Rpb24gQihhLGIpe3ZhciBjPXooYSxiKTtjLmNoaWxkcmVuPXt9O2Zvcih2YXIgZD0wLGU9YS5maXJzdENoaWxkO2U7ZT1lLm5leHRTaWJsaW5nKWMuY2hpbGRyZW5bZCsrXT1CKGUsYik7cmV0dXJuIGN9ZnVuY3Rpb24gQyhhKXt2YXIgYj1hLmlkXztyZXR1cm4gYnx8KGI9YS5pZF89UysrKSxifWZ1bmN0aW9uIEQoYSxiKXt2YXIgYz1DKGEpO2lmKGIpe3ZhciBkPWIuYmluZGluZ01hcHNbY107cmV0dXJuIGR8fChkPWIuYmluZGluZ01hcHNbY109QihhLGIucHJlcGFyZUJpbmRpbmcpfHxbXSksZH12YXIgZD1hLmJpbmRpbmdNYXBfO3JldHVybiBkfHwoZD1hLmJpbmRpbmdNYXBfPUIoYSx2b2lkIDApfHxbXSksZH1mdW5jdGlvbiBFKGEpe3RoaXMuY2xvc2VkPSExLHRoaXMudGVtcGxhdGVFbGVtZW50Xz1hLHRoaXMuaW5zdGFuY2VzPVtdLHRoaXMuZGVwcz12b2lkIDAsdGhpcy5pdGVyYXRlZFZhbHVlPVtdLHRoaXMucHJlc2VudFZhbHVlPXZvaWQgMCx0aGlzLmFycmF5T2JzZXJ2ZXI9dm9pZCAwfXZhciBGLEc9QXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbC5iaW5kKEFycmF5LnByb3RvdHlwZS5mb3JFYWNoKTthLk1hcCYmImZ1bmN0aW9uIj09dHlwZW9mIGEuTWFwLnByb3RvdHlwZS5mb3JFYWNoP0Y9YS5NYXA6KEY9ZnVuY3Rpb24oKXt0aGlzLmtleXM9W10sdGhpcy52YWx1ZXM9W119LEYucHJvdG90eXBlPXtzZXQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmtleXMuaW5kZXhPZihhKTswPmM/KHRoaXMua2V5cy5wdXNoKGEpLHRoaXMudmFsdWVzLnB1c2goYikpOnRoaXMudmFsdWVzW2NdPWJ9LGdldDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmtleXMuaW5kZXhPZihhKTtpZighKDA+YikpcmV0dXJuIHRoaXMudmFsdWVzW2JdfSwiZGVsZXRlIjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmtleXMuaW5kZXhPZihhKTtyZXR1cm4gMD5iPyExOih0aGlzLmtleXMuc3BsaWNlKGIsMSksdGhpcy52YWx1ZXMuc3BsaWNlKGIsMSksITApfSxmb3JFYWNoOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTA7Yzx0aGlzLmtleXMubGVuZ3RoO2MrKylhLmNhbGwoYnx8dGhpcyx0aGlzLnZhbHVlc1tjXSx0aGlzLmtleXNbY10sdGhpcyl9fSk7ImZ1bmN0aW9uIiE9dHlwZW9mIGRvY3VtZW50LmNvbnRhaW5zJiYoRG9jdW1lbnQucHJvdG90eXBlLmNvbnRhaW5zPWZ1bmN0aW9uKGEpe3JldHVybiBhPT09dGhpc3x8YS5wYXJlbnROb2RlPT09dGhpcz8hMDp0aGlzLmRvY3VtZW50RWxlbWVudC5jb250YWlucyhhKX0pO3ZhciBIPSJiaW5kIixJPSJyZXBlYXQiLEo9ImlmIixLPXt0ZW1wbGF0ZTohMCxyZXBlYXQ6ITAsYmluZDohMCxyZWY6ITB9LEw9e1RIRUFEOiEwLFRCT0RZOiEwLFRGT09UOiEwLFRIOiEwLFRSOiEwLFREOiEwLENPTEdST1VQOiEwLENPTDohMCxDQVBUSU9OOiEwLE9QVElPTjohMCxPUFRHUk9VUDohMH0sTT0idW5kZWZpbmVkIiE9dHlwZW9mIEhUTUxUZW1wbGF0ZUVsZW1lbnQ7TSYmIWZ1bmN0aW9uKCl7dmFyIGE9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidGVtcGxhdGUiKSxiPWEuY29udGVudC5vd25lckRvY3VtZW50LGM9Yi5hcHBlbmRDaGlsZChiLmNyZWF0ZUVsZW1lbnQoImh0bWwiKSksZD1jLmFwcGVuZENoaWxkKGIuY3JlYXRlRWxlbWVudCgiaGVhZCIpKSxlPWIuY3JlYXRlRWxlbWVudCgiYmFzZSIpO2UuaHJlZj1kb2N1bWVudC5iYXNlVVJJLGQuYXBwZW5kQ2hpbGQoZSl9KCk7dmFyIE49InRlbXBsYXRlLCAiK09iamVjdC5rZXlzKEwpLm1hcChmdW5jdGlvbihhKXtyZXR1cm4gYS50b0xvd2VyQ2FzZSgpKyJbdGVtcGxhdGVdIn0pLmpvaW4oIiwgIik7ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsZnVuY3Rpb24oKXtqKGRvY3VtZW50KSxQbGF0Zm9ybS5wZXJmb3JtTWljcm90YXNrQ2hlY2twb2ludCgpfSwhMSksTXx8KGEuSFRNTFRlbXBsYXRlRWxlbWVudD1mdW5jdGlvbigpe3Rocm93IFR5cGVFcnJvcigiSWxsZWdhbCBjb25zdHJ1Y3RvciIpfSk7dmFyIE8sUD0iX19wcm90b19fImlue307ImZ1bmN0aW9uIj09dHlwZW9mIE11dGF0aW9uT2JzZXJ2ZXImJihPPW5ldyBNdXRhdGlvbk9ic2VydmVyKGZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0wO2I8YS5sZW5ndGg7YisrKWFbYl0udGFyZ2V0LnJlZkNoYW5nZWRfKCl9KSksSFRNTFRlbXBsYXRlRWxlbWVudC5kZWNvcmF0ZT1mdW5jdGlvbihhLGMpe2lmKGEudGVtcGxhdGVJc0RlY29yYXRlZF8pcmV0dXJuITE7dmFyIGQ9YTtkLnRlbXBsYXRlSXNEZWNvcmF0ZWRfPSEwO3ZhciBoPWYoZCkmJk0saT1oLGs9IWgsbT0hMTtpZihofHwoZyhkKT8oYighYyksZD1uKGEpLGQudGVtcGxhdGVJc0RlY29yYXRlZF89ITAsaD1NLG09ITApOmUoZCkmJihkPW8oYSksZC50ZW1wbGF0ZUlzRGVjb3JhdGVkXz0hMCxoPU0pKSwhaCl7cShkKTt2YXIgcj1sKGQpO2QuY29udGVudF89ci5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCl9cmV0dXJuIGM/ZC5pbnN0YW5jZVJlZl89YzprP3AoZCxhLG0pOmkmJmooZC5jb250ZW50KSwhMH0sSFRNTFRlbXBsYXRlRWxlbWVudC5ib290c3RyYXA9ajt2YXIgUT1hLkhUTUxVbmtub3duRWxlbWVudHx8SFRNTEVsZW1lbnQsUj17Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudF99LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfTtNfHwoSFRNTFRlbXBsYXRlRWxlbWVudC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShRLnByb3RvdHlwZSksT2JqZWN0LmRlZmluZVByb3BlcnR5KEhUTUxUZW1wbGF0ZUVsZW1lbnQucHJvdG90eXBlLCJjb250ZW50IixSKSksayhIVE1MVGVtcGxhdGVFbGVtZW50LnByb3RvdHlwZSx7YmluZDpmdW5jdGlvbihhLGIsYyl7aWYoInJlZiIhPWEpcmV0dXJuIEVsZW1lbnQucHJvdG90eXBlLmJpbmQuY2FsbCh0aGlzLGEsYixjKTt2YXIgZD10aGlzLGU9Yz9iOmIub3BlbihmdW5jdGlvbihhKXtkLnNldEF0dHJpYnV0ZSgicmVmIixhKSxkLnJlZkNoYW5nZWRfKCl9KTtyZXR1cm4gdGhpcy5zZXRBdHRyaWJ1dGUoInJlZiIsZSksdGhpcy5yZWZDaGFuZ2VkXygpLGM/dm9pZCAwOih0aGlzLmJpbmRpbmdzXz90aGlzLmJpbmRpbmdzXy5yZWY9Yjp0aGlzLmJpbmRpbmdzXz17cmVmOmJ9LGIpfSxwcm9jZXNzQmluZGluZ0RpcmVjdGl2ZXNfOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLml0ZXJhdG9yXyYmdGhpcy5pdGVyYXRvcl8uY2xvc2VEZXBzKCksYS5pZnx8YS5iaW5kfHxhLnJlcGVhdD8odGhpcy5pdGVyYXRvcl98fCh0aGlzLml0ZXJhdG9yXz1uZXcgRSh0aGlzKSksdGhpcy5pdGVyYXRvcl8udXBkYXRlRGVwZW5kZW5jaWVzKGEsdGhpcy5tb2RlbF8pLE8mJk8ub2JzZXJ2ZSh0aGlzLHthdHRyaWJ1dGVzOiEwLGF0dHJpYnV0ZUZpbHRlcjpbInJlZiJdfSksdGhpcy5pdGVyYXRvcl8pOnZvaWQodGhpcy5pdGVyYXRvcl8mJih0aGlzLml0ZXJhdG9yXy5jbG9zZSgpLHRoaXMuaXRlcmF0b3JfPXZvaWQgMCkpfSxjcmVhdGVJbnN0YW5jZTpmdW5jdGlvbihhLGIsYyl7Yj9jPXRoaXMubmV3RGVsZWdhdGVfKGIpOmN8fChjPXRoaXMuZGVsZWdhdGVfKSx0aGlzLnJlZkNvbnRlbnRffHwodGhpcy5yZWZDb250ZW50Xz10aGlzLnJlZl8uY29udGVudCk7dmFyIGQ9dGhpcy5yZWZDb250ZW50XztpZihudWxsPT09ZC5maXJzdENoaWxkKXJldHVybiBUO3ZhciBlPUQoZCxjKSxmPW0odGhpcyksZz1mLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtnLnRlbXBsYXRlQ3JlYXRvcl89dGhpcyxnLnByb3RvQ29udGVudF89ZCxnLmJpbmRpbmdzXz1bXSxnLnRlcm1pbmF0b3JfPW51bGw7Zm9yKHZhciBoPWcudGVtcGxhdGVJbnN0YW5jZV89e2ZpcnN0Tm9kZTpudWxsLGxhc3ROb2RlOm51bGwsbW9kZWw6YX0saT0wLGo9ITEsaz1kLmZpcnN0Q2hpbGQ7aztrPWsubmV4dFNpYmxpbmcpe251bGw9PT1rLm5leHRTaWJsaW5nJiYoaj0hMCk7dmFyIGw9QShrLGcsZixlLmNoaWxkcmVuW2krK10sYSxjLGcuYmluZGluZ3NfKTtsLnRlbXBsYXRlSW5zdGFuY2VfPWgsaiYmKGcudGVybWluYXRvcl89bCl9cmV0dXJuIGguZmlyc3ROb2RlPWcuZmlyc3RDaGlsZCxoLmxhc3ROb2RlPWcubGFzdENoaWxkLGcudGVtcGxhdGVDcmVhdG9yXz12b2lkIDAsZy5wcm90b0NvbnRlbnRfPXZvaWQgMCxnfSxnZXQgbW9kZWwoKXtyZXR1cm4gdGhpcy5tb2RlbF99LHNldCBtb2RlbChhKXt0aGlzLm1vZGVsXz1hLHIodGhpcyl9LGdldCBiaW5kaW5nRGVsZWdhdGUoKXtyZXR1cm4gdGhpcy5kZWxlZ2F0ZV8mJnRoaXMuZGVsZWdhdGVfLnJhd30scmVmQ2hhbmdlZF86ZnVuY3Rpb24oKXt0aGlzLml0ZXJhdG9yXyYmdGhpcy5yZWZDb250ZW50XyE9PXRoaXMucmVmXy5jb250ZW50JiYodGhpcy5yZWZDb250ZW50Xz12b2lkIDAsdGhpcy5pdGVyYXRvcl8udmFsdWVDaGFuZ2VkKCksdGhpcy5pdGVyYXRvcl8udXBkYXRlSXRlcmF0ZWRWYWx1ZSh0aGlzLml0ZXJhdG9yXy5nZXRVcGRhdGVkVmFsdWUoKSkpfSxjbGVhcjpmdW5jdGlvbigpe3RoaXMubW9kZWxfPXZvaWQgMCx0aGlzLmRlbGVnYXRlXz12b2lkIDAsdGhpcy5iaW5kaW5nc18mJnRoaXMuYmluZGluZ3NfLnJlZiYmdGhpcy5iaW5kaW5nc18ucmVmLmNsb3NlKCksdGhpcy5yZWZDb250ZW50Xz12b2lkIDAsdGhpcy5pdGVyYXRvcl8mJih0aGlzLml0ZXJhdG9yXy52YWx1ZUNoYW5nZWQoKSx0aGlzLml0ZXJhdG9yXy5jbG9zZSgpLHRoaXMuaXRlcmF0b3JfPXZvaWQgMCl9LHNldERlbGVnYXRlXzpmdW5jdGlvbihhKXt0aGlzLmRlbGVnYXRlXz1hLHRoaXMuYmluZGluZ01hcF89dm9pZCAwLHRoaXMuaXRlcmF0b3JfJiYodGhpcy5pdGVyYXRvcl8uaW5zdGFuY2VQb3NpdGlvbkNoYW5nZWRGbl89dm9pZCAwLHRoaXMuaXRlcmF0b3JfLmluc3RhbmNlTW9kZWxGbl89dm9pZCAwKX0sbmV3RGVsZWdhdGVfOmZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYil7dmFyIGM9YSYmYVtiXTtpZigiZnVuY3Rpb24iPT10eXBlb2YgYylyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gYy5hcHBseShhLGFyZ3VtZW50cyl9fWlmKGEpcmV0dXJue2JpbmRpbmdNYXBzOnt9LHJhdzphLHByZXBhcmVCaW5kaW5nOmIoInByZXBhcmVCaW5kaW5nIikscHJlcGFyZUluc3RhbmNlTW9kZWw6YigicHJlcGFyZUluc3RhbmNlTW9kZWwiKSxwcmVwYXJlSW5zdGFuY2VQb3NpdGlvbkNoYW5nZWQ6YigicHJlcGFyZUluc3RhbmNlUG9zaXRpb25DaGFuZ2VkIil9fSxzZXQgYmluZGluZ0RlbGVnYXRlKGEpe2lmKHRoaXMuZGVsZWdhdGVfKXRocm93IEVycm9yKCJUZW1wbGF0ZSBtdXN0IGJlIGNsZWFyZWQgYmVmb3JlIGEgbmV3IGJpbmRpbmdEZWxlZ2F0ZSBjYW4gYmUgYXNzaWduZWQiKTt0aGlzLnNldERlbGVnYXRlXyh0aGlzLm5ld0RlbGVnYXRlXyhhKSl9LGdldCByZWZfKCl7dmFyIGE9ZCh0aGlzLHRoaXMuZ2V0QXR0cmlidXRlKCJyZWYiKSk7aWYoYXx8KGE9dGhpcy5pbnN0YW5jZVJlZl8pLCFhKXJldHVybiB0aGlzO3ZhciBiPWEucmVmXztyZXR1cm4gYj9iOmF9fSk7dmFyIFM9MTtPYmplY3QuZGVmaW5lUHJvcGVydHkoTm9kZS5wcm90b3R5cGUsInRlbXBsYXRlSW5zdGFuY2UiLHtnZXQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnRlbXBsYXRlSW5zdGFuY2VfO3JldHVybiBhP2E6dGhpcy5wYXJlbnROb2RlP3RoaXMucGFyZW50Tm9kZS50ZW1wbGF0ZUluc3RhbmNlOnZvaWQgMH19KTt2YXIgVD1kb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7VC5iaW5kaW5nc189W10sVC50ZXJtaW5hdG9yXz1udWxsLEUucHJvdG90eXBlPXtjbG9zZURlcHM6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmRlcHM7YSYmKGEuaWZPbmVUaW1lPT09ITEmJmEuaWZWYWx1ZS5jbG9zZSgpLGEub25lVGltZT09PSExJiZhLnZhbHVlLmNsb3NlKCkpfSx1cGRhdGVEZXBlbmRlbmNpZXM6ZnVuY3Rpb24oYSxiKXt0aGlzLmNsb3NlRGVwcygpO3ZhciBjPXRoaXMuZGVwcz17fSxkPXRoaXMudGVtcGxhdGVFbGVtZW50XyxlPSEwO2lmKGEuaWYpe2lmKGMuaGFzSWY9ITAsYy5pZk9uZVRpbWU9YS5pZi5vbmx5T25lVGltZSxjLmlmVmFsdWU9dihKLGEuaWYsZCxiKSxlPWMuaWZWYWx1ZSxjLmlmT25lVGltZSYmIWUpcmV0dXJuIHZvaWQgdGhpcy52YWx1ZUNoYW5nZWQoKTtjLmlmT25lVGltZXx8KGU9ZS5vcGVuKHRoaXMudXBkYXRlSWZWYWx1ZSx0aGlzKSl9YS5yZXBlYXQ/KGMucmVwZWF0PSEwLGMub25lVGltZT1hLnJlcGVhdC5vbmx5T25lVGltZSxjLnZhbHVlPXYoSSxhLnJlcGVhdCxkLGIpKTooYy5yZXBlYXQ9ITEsYy5vbmVUaW1lPWEuYmluZC5vbmx5T25lVGltZSxjLnZhbHVlPXYoSCxhLmJpbmQsZCxiKSk7dmFyIGY9Yy52YWx1ZTtyZXR1cm4gYy5vbmVUaW1lfHwoZj1mLm9wZW4odGhpcy51cGRhdGVJdGVyYXRlZFZhbHVlLHRoaXMpKSxlP3ZvaWQgdGhpcy51cGRhdGVWYWx1ZShmKTp2b2lkIHRoaXMudmFsdWVDaGFuZ2VkKCl9LGdldFVwZGF0ZWRWYWx1ZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZGVwcy52YWx1ZTtyZXR1cm4gdGhpcy5kZXBzLm9uZVRpbWV8fChhPWEuZGlzY2FyZENoYW5nZXMoKSksYX0sdXBkYXRlSWZWYWx1ZTpmdW5jdGlvbihhKXtyZXR1cm4gYT92b2lkIHRoaXMudXBkYXRlVmFsdWUodGhpcy5nZXRVcGRhdGVkVmFsdWUoKSk6dm9pZCB0aGlzLnZhbHVlQ2hhbmdlZCgpfSx1cGRhdGVJdGVyYXRlZFZhbHVlOmZ1bmN0aW9uKGEpe2lmKHRoaXMuZGVwcy5oYXNJZil7dmFyIGI9dGhpcy5kZXBzLmlmVmFsdWU7aWYodGhpcy5kZXBzLmlmT25lVGltZXx8KGI9Yi5kaXNjYXJkQ2hhbmdlcygpKSwhYilyZXR1cm4gdm9pZCB0aGlzLnZhbHVlQ2hhbmdlZCgpfXRoaXMudXBkYXRlVmFsdWUoYSl9LHVwZGF0ZVZhbHVlOmZ1bmN0aW9uKGEpe3RoaXMuZGVwcy5yZXBlYXR8fChhPVthXSk7dmFyIGI9dGhpcy5kZXBzLnJlcGVhdCYmIXRoaXMuZGVwcy5vbmVUaW1lJiZBcnJheS5pc0FycmF5KGEpO3RoaXMudmFsdWVDaGFuZ2VkKGEsYil9LHZhbHVlQ2hhbmdlZDpmdW5jdGlvbihhLGIpe0FycmF5LmlzQXJyYXkoYSl8fChhPVtdKSxhIT09dGhpcy5pdGVyYXRlZFZhbHVlJiYodGhpcy51bm9ic2VydmUoKSx0aGlzLnByZXNlbnRWYWx1ZT1hLGImJih0aGlzLmFycmF5T2JzZXJ2ZXI9bmV3IEFycmF5T2JzZXJ2ZXIodGhpcy5wcmVzZW50VmFsdWUpLHRoaXMuYXJyYXlPYnNlcnZlci5vcGVuKHRoaXMuaGFuZGxlU3BsaWNlcyx0aGlzKSksdGhpcy5oYW5kbGVTcGxpY2VzKEFycmF5T2JzZXJ2ZXIuY2FsY3VsYXRlU3BsaWNlcyh0aGlzLnByZXNlbnRWYWx1ZSx0aGlzLml0ZXJhdGVkVmFsdWUpKSl9LGdldExhc3RJbnN0YW5jZU5vZGU6ZnVuY3Rpb24oYSl7aWYoLTE9PWEpcmV0dXJuIHRoaXMudGVtcGxhdGVFbGVtZW50Xzt2YXIgYj10aGlzLmluc3RhbmNlc1thXSxjPWIudGVybWluYXRvcl87aWYoIWMpcmV0dXJuIHRoaXMuZ2V0TGFzdEluc3RhbmNlTm9kZShhLTEpO2lmKGMubm9kZVR5cGUhPT1Ob2RlLkVMRU1FTlRfTk9ERXx8dGhpcy50ZW1wbGF0ZUVsZW1lbnRfPT09YylyZXR1cm4gYzt2YXIgZD1jLml0ZXJhdG9yXztyZXR1cm4gZD9kLmdldExhc3RUZW1wbGF0ZU5vZGUoKTpjfSxnZXRMYXN0VGVtcGxhdGVOb2RlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0TGFzdEluc3RhbmNlTm9kZSh0aGlzLmluc3RhbmNlcy5sZW5ndGgtMSl9LGluc2VydEluc3RhbmNlQXQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmdldExhc3RJbnN0YW5jZU5vZGUoYS0xKSxkPXRoaXMudGVtcGxhdGVFbGVtZW50Xy5wYXJlbnROb2RlO3RoaXMuaW5zdGFuY2VzLnNwbGljZShhLDAsYiksZC5pbnNlcnRCZWZvcmUoYixjLm5leHRTaWJsaW5nKX0sZXh0cmFjdEluc3RhbmNlQXQ6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPXRoaXMuZ2V0TGFzdEluc3RhbmNlTm9kZShhLTEpLGM9dGhpcy5nZXRMYXN0SW5zdGFuY2VOb2RlKGEpLGQ9dGhpcy50ZW1wbGF0ZUVsZW1lbnRfLnBhcmVudE5vZGUsZT10aGlzLmluc3RhbmNlcy5zcGxpY2UoYSwxKVswXTtjIT09Yjspe3ZhciBmPWIubmV4dFNpYmxpbmc7Zj09YyYmKGM9YiksZS5hcHBlbmRDaGlsZChkLnJlbW92ZUNoaWxkKGYpKX1yZXR1cm4gZX0sZ2V0RGVsZWdhdGVGbjpmdW5jdGlvbihhKXtyZXR1cm4gYT1hJiZhKHRoaXMudGVtcGxhdGVFbGVtZW50XyksImZ1bmN0aW9uIj09dHlwZW9mIGE/YTpudWxsfSxoYW5kbGVTcGxpY2VzOmZ1bmN0aW9uKGEpe2lmKCF0aGlzLmNsb3NlZCYmYS5sZW5ndGgpe3ZhciBiPXRoaXMudGVtcGxhdGVFbGVtZW50XztpZighYi5wYXJlbnROb2RlKXJldHVybiB2b2lkIHRoaXMuY2xvc2UoKTtBcnJheU9ic2VydmVyLmFwcGx5U3BsaWNlcyh0aGlzLml0ZXJhdGVkVmFsdWUsdGhpcy5wcmVzZW50VmFsdWUsYSk7dmFyIGM9Yi5kZWxlZ2F0ZV87dm9pZCAwPT09dGhpcy5pbnN0YW5jZU1vZGVsRm5fJiYodGhpcy5pbnN0YW5jZU1vZGVsRm5fPXRoaXMuZ2V0RGVsZWdhdGVGbihjJiZjLnByZXBhcmVJbnN0YW5jZU1vZGVsKSksdm9pZCAwPT09dGhpcy5pbnN0YW5jZVBvc2l0aW9uQ2hhbmdlZEZuXyYmKHRoaXMuaW5zdGFuY2VQb3NpdGlvbkNoYW5nZWRGbl89dGhpcy5nZXREZWxlZ2F0ZUZuKGMmJmMucHJlcGFyZUluc3RhbmNlUG9zaXRpb25DaGFuZ2VkKSk7Zm9yKHZhciBkPW5ldyBGLGU9MCxmPTA7ZjxhLmxlbmd0aDtmKyspe2Zvcih2YXIgZz1hW2ZdLGg9Zy5yZW1vdmVkLGk9MDtpPGgubGVuZ3RoO2krKyl7dmFyIGo9aFtpXSxrPXRoaXMuZXh0cmFjdEluc3RhbmNlQXQoZy5pbmRleCtlKTtrIT09VCYmZC5zZXQoaixrKX1lLT1nLmFkZGVkQ291bnR9Zm9yKHZhciBmPTA7ZjxhLmxlbmd0aDtmKyspZm9yKHZhciBnPWFbZl0sbD1nLmluZGV4O2w8Zy5pbmRleCtnLmFkZGVkQ291bnQ7bCsrKXt2YXIgaj10aGlzLml0ZXJhdGVkVmFsdWVbbF0saz1kLmdldChqKTtrP2QuZGVsZXRlKGopOih0aGlzLmluc3RhbmNlTW9kZWxGbl8mJihqPXRoaXMuaW5zdGFuY2VNb2RlbEZuXyhqKSksaz12b2lkIDA9PT1qP1Q6Yi5jcmVhdGVJbnN0YW5jZShqLHZvaWQgMCxjKSksdGhpcy5pbnNlcnRJbnN0YW5jZUF0KGwsayl9ZC5mb3JFYWNoKGZ1bmN0aW9uKGEpe3RoaXMuY2xvc2VJbnN0YW5jZUJpbmRpbmdzKGEpfSx0aGlzKSx0aGlzLmluc3RhbmNlUG9zaXRpb25DaGFuZ2VkRm5fJiZ0aGlzLnJlcG9ydEluc3RhbmNlc01vdmVkKGEpfX0scmVwb3J0SW5zdGFuY2VNb3ZlZDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmluc3RhbmNlc1thXTtiIT09VCYmdGhpcy5pbnN0YW5jZVBvc2l0aW9uQ2hhbmdlZEZuXyhiLnRlbXBsYXRlSW5zdGFuY2VfLGEpfSxyZXBvcnRJbnN0YW5jZXNNb3ZlZDpmdW5jdGlvbihhKXtmb3IodmFyIGI9MCxjPTAsZD0wO2Q8YS5sZW5ndGg7ZCsrKXt2YXIgZT1hW2RdO2lmKDAhPWMpZm9yKDtiPGUuaW5kZXg7KXRoaXMucmVwb3J0SW5zdGFuY2VNb3ZlZChiKSxiKys7ZWxzZSBiPWUuaW5kZXg7Zm9yKDtiPGUuaW5kZXgrZS5hZGRlZENvdW50Oyl0aGlzLnJlcG9ydEluc3RhbmNlTW92ZWQoYiksYisrO2MrPWUuYWRkZWRDb3VudC1lLnJlbW92ZWQubGVuZ3RofWlmKDAhPWMpZm9yKHZhciBmPXRoaXMuaW5zdGFuY2VzLmxlbmd0aDtmPmI7KXRoaXMucmVwb3J0SW5zdGFuY2VNb3ZlZChiKSxiKyt9LGNsb3NlSW5zdGFuY2VCaW5kaW5nczpmdW5jdGlvbihhKXtmb3IodmFyIGI9YS5iaW5kaW5nc18sYz0wO2M8Yi5sZW5ndGg7YysrKWJbY10uY2xvc2UoKX0sdW5vYnNlcnZlOmZ1bmN0aW9uKCl7dGhpcy5hcnJheU9ic2VydmVyJiYodGhpcy5hcnJheU9ic2VydmVyLmNsb3NlKCksdGhpcy5hcnJheU9ic2VydmVyPXZvaWQgMCl9LGNsb3NlOmZ1bmN0aW9uKCl7aWYoIXRoaXMuY2xvc2VkKXt0aGlzLnVub2JzZXJ2ZSgpO2Zvcih2YXIgYT0wO2E8dGhpcy5pbnN0YW5jZXMubGVuZ3RoO2ErKyl0aGlzLmNsb3NlSW5zdGFuY2VCaW5kaW5ncyh0aGlzLmluc3RhbmNlc1thXSk7dGhpcy5pbnN0YW5jZXMubGVuZ3RoPTAsdGhpcy5jbG9zZURlcHMoKSx0aGlzLnRlbXBsYXRlRWxlbWVudF8uaXRlcmF0b3JfPXZvaWQgMCx0aGlzLmNsb3NlZD0hMH19fSxIVE1MVGVtcGxhdGVFbGVtZW50LmZvckFsbFRlbXBsYXRlc0Zyb21fPWl9KHRoaXMpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7Zi50ZXh0Q29udGVudD1kKyssZS5wdXNoKGEpfWZ1bmN0aW9uIGMoKXtmb3IoO2UubGVuZ3RoOyllLnNoaWZ0KCkoKX12YXIgZD0wLGU9W10sZj1kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgiIik7bmV3KHdpbmRvdy5NdXRhdGlvbk9ic2VydmVyfHxKc011dGF0aW9uT2JzZXJ2ZXIpKGMpLm9ic2VydmUoZix7Y2hhcmFjdGVyRGF0YTohMH0pLGEuZW5kT2ZNaWNyb3Rhc2s9Yn0oUGxhdGZvcm0pLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoKXtlfHwoZT0hMCxhLmVuZE9mTWljcm90YXNrKGZ1bmN0aW9uKCl7ZT0hMSxsb2dGbGFncy5kYXRhJiZjb25zb2xlLmdyb3VwKCJQbGF0Zm9ybS5mbHVzaCgpIiksYS5wZXJmb3JtTWljcm90YXNrQ2hlY2twb2ludCgpLGxvZ0ZsYWdzLmRhdGEmJmNvbnNvbGUuZ3JvdXBFbmQoKX0pKX12YXIgYz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzdHlsZSIpO2MudGV4dENvbnRlbnQ9InRlbXBsYXRlIHtkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7fSAvKiBpbmplY3RlZCBieSBwbGF0Zm9ybS5qcyAqLyI7dmFyIGQ9ZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiaGVhZCIpO2QuaW5zZXJ0QmVmb3JlKGMsZC5maXJzdENoaWxkKTt2YXIgZTtpZihPYnNlcnZlci5oYXNPYmplY3RPYnNlcnZlKWI9ZnVuY3Rpb24oKXt9O2Vsc2V7dmFyIGY9MTI1O3dpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJXZWJDb21wb25lbnRzUmVhZHkiLGZ1bmN0aW9uKCl7YigpLGEuZmx1c2hQb2xsPXNldEludGVydmFsKGIsZil9KX1pZih3aW5kb3cuQ3VzdG9tRWxlbWVudHMmJiFDdXN0b21FbGVtZW50cy51c2VOYXRpdmUpe3ZhciBnPURvY3VtZW50LnByb3RvdHlwZS5pbXBvcnROb2RlO0RvY3VtZW50LnByb3RvdHlwZS5pbXBvcnROb2RlPWZ1bmN0aW9uKGEsYil7dmFyIGM9Zy5jYWxsKHRoaXMsYSxiKTtyZXR1cm4gQ3VzdG9tRWxlbWVudHMudXBncmFkZUFsbChjKSxjfX1hLmZsdXNoPWJ9KHdpbmRvdy5QbGF0Zm9ybSksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhLGIsZCxlKXtyZXR1cm4gYS5yZXBsYWNlKGUsZnVuY3Rpb24oYSxlLGYsZyl7dmFyIGg9Zi5yZXBsYWNlKC9bIiddL2csIiIpO3JldHVybiBoPWMoYixoLGQpLGUrIiciK2grIiciK2d9KX1mdW5jdGlvbiBjKGEsYixjKXtpZihiJiYiLyI9PT1iWzBdKXJldHVybiBiO3ZhciBlPW5ldyBVUkwoYixhKTtyZXR1cm4gYz9lLmhyZWY6ZChlLmhyZWYpfWZ1bmN0aW9uIGQoYSl7dmFyIGI9bmV3IFVSTChkb2N1bWVudC5iYXNlVVJJKSxjPW5ldyBVUkwoYSxiKTtyZXR1cm4gYy5ob3N0PT09Yi5ob3N0JiZjLnBvcnQ9PT1iLnBvcnQmJmMucHJvdG9jb2w9PT1iLnByb3RvY29sP2UoYixjKTphfWZ1bmN0aW9uIGUoYSxiKXtmb3IodmFyIGM9YS5wYXRobmFtZSxkPWIucGF0aG5hbWUsZT1jLnNwbGl0KCIvIiksZj1kLnNwbGl0KCIvIik7ZS5sZW5ndGgmJmVbMF09PT1mWzBdOyllLnNoaWZ0KCksZi5zaGlmdCgpO2Zvcih2YXIgZz0wLGg9ZS5sZW5ndGgtMTtoPmc7ZysrKWYudW5zaGlmdCgiLi4iKTtyZXR1cm4gZi5qb2luKCIvIikrYi5zZWFyY2grYi5oYXNofXZhciBmPXtyZXNvbHZlRG9tOmZ1bmN0aW9uKGEsYil7Yj1ifHxhLm93bmVyRG9jdW1lbnQuYmFzZVVSSSx0aGlzLnJlc29sdmVBdHRyaWJ1dGVzKGEsYiksdGhpcy5yZXNvbHZlU3R5bGVzKGEsYik7dmFyIGM9YS5xdWVyeVNlbGVjdG9yQWxsKCJ0ZW1wbGF0ZSIpO2lmKGMpZm9yKHZhciBkLGU9MCxmPWMubGVuZ3RoO2Y+ZSYmKGQ9Y1tlXSk7ZSsrKWQuY29udGVudCYmdGhpcy5yZXNvbHZlRG9tKGQuY29udGVudCxiKX0scmVzb2x2ZVRlbXBsYXRlOmZ1bmN0aW9uKGEpe3RoaXMucmVzb2x2ZURvbShhLmNvbnRlbnQsYS5vd25lckRvY3VtZW50LmJhc2VVUkkpfSxyZXNvbHZlU3R5bGVzOmZ1bmN0aW9uKGEsYil7dmFyIGM9YS5xdWVyeVNlbGVjdG9yQWxsKCJzdHlsZSIpO2lmKGMpZm9yKHZhciBkLGU9MCxmPWMubGVuZ3RoO2Y+ZSYmKGQ9Y1tlXSk7ZSsrKXRoaXMucmVzb2x2ZVN0eWxlKGQsYil9LHJlc29sdmVTdHlsZTpmdW5jdGlvbihhLGIpe2I9Ynx8YS5vd25lckRvY3VtZW50LmJhc2VVUkksYS50ZXh0Q29udGVudD10aGlzLnJlc29sdmVDc3NUZXh0KGEudGV4dENvbnRlbnQsYil9LHJlc29sdmVDc3NUZXh0OmZ1bmN0aW9uKGEsYyxkKXtyZXR1cm4gYT1iKGEsYyxkLGcpLGIoYSxjLGQsaCl9LHJlc29sdmVBdHRyaWJ1dGVzOmZ1bmN0aW9uKGEsYil7YS5oYXNBdHRyaWJ1dGVzJiZhLmhhc0F0dHJpYnV0ZXMoKSYmdGhpcy5yZXNvbHZlRWxlbWVudEF0dHJpYnV0ZXMoYSxiKTt2YXIgYz1hJiZhLnF1ZXJ5U2VsZWN0b3JBbGwoaik7aWYoYylmb3IodmFyIGQsZT0wLGY9Yy5sZW5ndGg7Zj5lJiYoZD1jW2VdKTtlKyspdGhpcy5yZXNvbHZlRWxlbWVudEF0dHJpYnV0ZXMoZCxiKX0scmVzb2x2ZUVsZW1lbnRBdHRyaWJ1dGVzOmZ1bmN0aW9uKGEsZCl7ZD1kfHxhLm93bmVyRG9jdW1lbnQuYmFzZVVSSSxpLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIGYsaD1hLmF0dHJpYnV0ZXNbZV0saT1oJiZoLnZhbHVlO2kmJmkuc2VhcmNoKGspPDAmJihmPSJzdHlsZSI9PT1lP2IoaSxkLCExLGcpOmMoZCxpKSxoLnZhbHVlPWYpfSl9fSxnPS8odXJsXCgpKFteKV0qKShcKSkvZyxoPS8oQGltcG9ydFtcc10rKD8hdXJsXCgpKShbXjtdKikoOykvZyxpPVsiaHJlZiIsInNyYyIsImFjdGlvbiIsInN0eWxlIiwidXJsIl0saj0iWyIraS5qb2luKCJdLFsiKSsiXSIsaz0ie3suKn19IjthLnVybFJlc29sdmVyPWZ9KFBvbHltZXIpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7dGhpcy5jYWNoZT1PYmplY3QuY3JlYXRlKG51bGwpLHRoaXMubWFwPU9iamVjdC5jcmVhdGUobnVsbCksdGhpcy5yZXF1ZXN0cz0wLHRoaXMucmVnZXg9YX12YXIgYz1QbGF0Zm9ybS5lbmRPZk1pY3JvdGFzaztiLnByb3RvdHlwZT17ZXh0cmFjdFVybHM6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGMsZCxlPVtdO2M9dGhpcy5yZWdleC5leGVjKGEpOylkPW5ldyBVUkwoY1sxXSxiKSxlLnB1c2goe21hdGNoZWQ6Y1swXSx1cmw6ZC5ocmVmfSk7cmV0dXJuIGV9LHByb2Nlc3M6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXRoaXMuZXh0cmFjdFVybHMoYSxiKSxlPWMuYmluZChudWxsLHRoaXMubWFwKTt0aGlzLmZldGNoKGQsZSl9LGZldGNoOmZ1bmN0aW9uKGEsYil7dmFyIGM9YS5sZW5ndGg7aWYoIWMpcmV0dXJuIGIoKTtmb3IodmFyIGQsZSxmLGc9ZnVuY3Rpb24oKXswPT09LS1jJiZiKCl9LGg9MDtjPmg7aCsrKWQ9YVtoXSxmPWQudXJsLGU9dGhpcy5jYWNoZVtmXSxlfHwoZT10aGlzLnhocihmKSxlLm1hdGNoPWQsdGhpcy5jYWNoZVtmXT1lKSxlLndhaXQoZyl9LGhhbmRsZVhocjpmdW5jdGlvbihhKXt2YXIgYj1hLm1hdGNoLGM9Yi51cmwsZD1hLnJlc3BvbnNlfHxhLnJlc3BvbnNlVGV4dHx8IiI7dGhpcy5tYXBbY109ZCx0aGlzLmZldGNoKHRoaXMuZXh0cmFjdFVybHMoZCxjKSxhLnJlc29sdmUpfSx4aHI6ZnVuY3Rpb24oYSl7dGhpcy5yZXF1ZXN0cysrO3ZhciBiPW5ldyBYTUxIdHRwUmVxdWVzdDtyZXR1cm4gYi5vcGVuKCJHRVQiLGEsITApLGIuc2VuZCgpLGIub25lcnJvcj1iLm9ubG9hZD10aGlzLmhhbmRsZVhoci5iaW5kKHRoaXMsYiksYi5wZW5kaW5nPVtdLGIucmVzb2x2ZT1mdW5jdGlvbigpe2Zvcih2YXIgYT1iLnBlbmRpbmcsYz0wO2M8YS5sZW5ndGg7YysrKWFbY10oKTtiLnBlbmRpbmc9bnVsbH0sYi53YWl0PWZ1bmN0aW9uKGEpe2IucGVuZGluZz9iLnBlbmRpbmcucHVzaChhKTpjKGEpfSxifX0sYS5Mb2FkZXI9Yn0oUG9seW1lciksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYigpe3RoaXMubG9hZGVyPW5ldyBkKHRoaXMucmVnZXgpfXZhciBjPWEudXJsUmVzb2x2ZXIsZD1hLkxvYWRlcjtiLnByb3RvdHlwZT17cmVnZXg6L0BpbXBvcnRccysoPzp1cmwpP1siJ1woXSooW14nIlwpXSopWyciXCldKjsvZyxyZXNvbHZlOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD1mdW5jdGlvbihkKXtjKHRoaXMuZmxhdHRlbihhLGIsZCkpfS5iaW5kKHRoaXMpO3RoaXMubG9hZGVyLnByb2Nlc3MoYSxiLGQpfSxyZXNvbHZlTm9kZTpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9YS50ZXh0Q29udGVudCxlPWZ1bmN0aW9uKGIpe2EudGV4dENvbnRlbnQ9YixjKGEpfTt0aGlzLnJlc29sdmUoZCxiLGUpfSxmbGF0dGVuOmZ1bmN0aW9uKGEsYixkKXtmb3IodmFyIGUsZixnLGg9dGhpcy5sb2FkZXIuZXh0cmFjdFVybHMoYSxiKSxpPTA7aTxoLmxlbmd0aDtpKyspZT1oW2ldLGY9ZS51cmwsZz1jLnJlc29sdmVDc3NUZXh0KGRbZl0sZiwhMCksZz10aGlzLmZsYXR0ZW4oZyxiLGQpLGE9YS5yZXBsYWNlKGUubWF0Y2hlZCxnKTtyZXR1cm4gYX0sbG9hZFN0eWxlczpmdW5jdGlvbihhLGIsYyl7ZnVuY3Rpb24gZCgpe2YrKyxmPT09ZyYmYyYmYygpfWZvcih2YXIgZSxmPTAsZz1hLmxlbmd0aCxoPTA7Zz5oJiYoZT1hW2hdKTtoKyspdGhpcy5yZXNvbHZlTm9kZShlLGIsZCl9fTt2YXIgZT1uZXcgYjthLnN0eWxlUmVzb2x2ZXI9ZX0oUG9seW1lciksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhLGIpe3JldHVybiBhJiZiJiZPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhiKS5mb3JFYWNoKGZ1bmN0aW9uKGMpe3ZhciBkPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoYixjKTtkJiYoT2JqZWN0LmRlZmluZVByb3BlcnR5KGEsYyxkKSwiZnVuY3Rpb24iPT10eXBlb2YgZC52YWx1ZSYmKGQudmFsdWUubm9tPWMpKX0pLGF9ZnVuY3Rpb24gYyhhKXtmb3IodmFyIGI9YXx8e30sYz0xO2M8YXJndW1lbnRzLmxlbmd0aDtjKyspe3ZhciBlPWFyZ3VtZW50c1tjXTt0cnl7Zm9yKHZhciBmIGluIGUpZChmLGUsYil9Y2F0Y2goZyl7fX1yZXR1cm4gYn1mdW5jdGlvbiBkKGEsYixjKXt2YXIgZD1lKGIsYSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGMsYSxkKX1mdW5jdGlvbiBlKGEsYil7aWYoYSl7dmFyIGM9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihhLGIpO3JldHVybiBjfHxlKE9iamVjdC5nZXRQcm90b3R5cGVPZihhKSxiKX19YS5leHRlbmQ9YixhLm1peGluPWMsUGxhdGZvcm0ubWl4aW49Y30oUG9seW1lciksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhLGIsZCl7cmV0dXJuIGE/YS5zdG9wKCk6YT1uZXcgYyh0aGlzKSxhLmdvKGIsZCksYX12YXIgYz1mdW5jdGlvbihhKXt0aGlzLmNvbnRleHQ9YSx0aGlzLmJvdW5kQ29tcGxldGU9dGhpcy5jb21wbGV0ZS5iaW5kKHRoaXMpfTtjLnByb3RvdHlwZT17Z286ZnVuY3Rpb24oYSxiKXt0aGlzLmNhbGxiYWNrPWE7dmFyIGM7Yj8oYz1zZXRUaW1lb3V0KHRoaXMuYm91bmRDb21wbGV0ZSxiKSx0aGlzLmhhbmRsZT1mdW5jdGlvbigpe2NsZWFyVGltZW91dChjKX0pOihjPXJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLmJvdW5kQ29tcGxldGUpLHRoaXMuaGFuZGxlPWZ1bmN0aW9uKCl7Y2FuY2VsQW5pbWF0aW9uRnJhbWUoYyl9KX0sc3RvcDpmdW5jdGlvbigpe3RoaXMuaGFuZGxlJiYodGhpcy5oYW5kbGUoKSx0aGlzLmhhbmRsZT1udWxsKX0sY29tcGxldGU6ZnVuY3Rpb24oKXt0aGlzLmhhbmRsZSYmKHRoaXMuc3RvcCgpLHRoaXMuY2FsbGJhY2suY2FsbCh0aGlzLmNvbnRleHQpKX19LGEuam9iPWJ9KFBvbHltZXIpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSxiLGMpe3ZhciBkPSJzdHJpbmciPT10eXBlb2YgYT9kb2N1bWVudC5jcmVhdGVFbGVtZW50KGEpOmEuY2xvbmVOb2RlKCEwKTtpZihkLmlubmVySFRNTD1iLGMpZm9yKHZhciBlIGluIGMpZC5zZXRBdHRyaWJ1dGUoZSxjW2VdKTtyZXR1cm4gZH12YXIgYz17fTtIVE1MRWxlbWVudC5yZWdpc3Rlcj1mdW5jdGlvbihhLGIpe2NbYV09Yn0sSFRNTEVsZW1lbnQuZ2V0UHJvdG90eXBlRm9yVGFnPWZ1bmN0aW9uKGEpe3ZhciBiPWE/Y1thXTpIVE1MRWxlbWVudC5wcm90b3R5cGU7cmV0dXJuIGJ8fE9iamVjdC5nZXRQcm90b3R5cGVPZihkb2N1bWVudC5jcmVhdGVFbGVtZW50KGEpKX07dmFyIGQ9RXZlbnQucHJvdG90eXBlLnN0b3BQcm9wYWdhdGlvbjtFdmVudC5wcm90b3R5cGUuc3RvcFByb3BhZ2F0aW9uPWZ1bmN0aW9uKCl7dGhpcy5jYW5jZWxCdWJibGU9ITAsZC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9O3ZhciBlPURPTVRva2VuTGlzdC5wcm90b3R5cGUuYWRkLGY9RE9NVG9rZW5MaXN0LnByb3RvdHlwZS5yZW1vdmU7RE9NVG9rZW5MaXN0LnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24oKXtmb3IodmFyIGE9MDthPGFyZ3VtZW50cy5sZW5ndGg7YSsrKWUuY2FsbCh0aGlzLGFyZ3VtZW50c1thXSl9LERPTVRva2VuTGlzdC5wcm90b3R5cGUucmVtb3ZlPWZ1bmN0aW9uKCl7Zm9yKHZhciBhPTA7YTxhcmd1bWVudHMubGVuZ3RoO2ErKylmLmNhbGwodGhpcyxhcmd1bWVudHNbYV0pfSxET01Ub2tlbkxpc3QucHJvdG90eXBlLnRvZ2dsZT1mdW5jdGlvbihhLGIpezE9PWFyZ3VtZW50cy5sZW5ndGgmJihiPSF0aGlzLmNvbnRhaW5zKGEpKSxiP3RoaXMuYWRkKGEpOnRoaXMucmVtb3ZlKGEpfSxET01Ub2tlbkxpc3QucHJvdG90eXBlLnN3aXRjaD1mdW5jdGlvbihhLGIpe2EmJnRoaXMucmVtb3ZlKGEpLGImJnRoaXMuYWRkKGIpfTt2YXIgZz1mdW5jdGlvbigpe3JldHVybiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh0aGlzKX0saD13aW5kb3cuTmFtZWROb2RlTWFwfHx3aW5kb3cuTW96TmFtZWRBdHRyTWFwfHx7fTtOb2RlTGlzdC5wcm90b3R5cGUuYXJyYXk9ZyxoLnByb3RvdHlwZS5hcnJheT1nLEhUTUxDb2xsZWN0aW9uLnByb3RvdHlwZS5hcnJheT1nLGEuY3JlYXRlRE9NPWJ9KFBvbHltZXIpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7dmFyIGU9Yi5jYWxsZXIsZz1lLm5vbSxoPWUuX3N1cGVyO2h8fChnfHwoZz1lLm5vbT1jLmNhbGwodGhpcyxlKSksZ3x8Y29uc29sZS53YXJuKCJjYWxsZWQgc3VwZXIoKSBvbiBhIG1ldGhvZCBub3QgaW5zdGFsbGVkIGRlY2xhcmF0aXZlbHkgKGhhcyBubyAubm9tIHByb3BlcnR5KSIpLGg9ZChlLGcsZih0aGlzKSkpO3ZhciBpPWhbZ107cmV0dXJuIGk/KGkuX3N1cGVyfHxkKGksZyxoKSxpLmFwcGx5KHRoaXMsYXx8W10pKTp2b2lkIDB9ZnVuY3Rpb24gYyhhKXtmb3IodmFyIGI9dGhpcy5fX3Byb3RvX187YiYmYiE9PUhUTUxFbGVtZW50LnByb3RvdHlwZTspe2Zvcih2YXIgYyxkPU9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGIpLGU9MCxmPWQubGVuZ3RoO2Y+ZSYmKGM9ZFtlXSk7ZSsrKXt2YXIgZz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGIsYyk7aWYoImZ1bmN0aW9uIj09dHlwZW9mIGcudmFsdWUmJmcudmFsdWU9PT1hKXJldHVybiBjfWI9Yi5fX3Byb3RvX199fWZ1bmN0aW9uIGQoYSxiLGMpe3ZhciBkPWUoYyxiLGEpO3JldHVybiBkW2JdJiYoZFtiXS5ub209YiksYS5fc3VwZXI9ZH1mdW5jdGlvbiBlKGEsYixjKXtmb3IoO2E7KXtpZihhW2JdIT09YyYmYVtiXSlyZXR1cm4gYTthPWYoYSl9cmV0dXJuIE9iamVjdH1mdW5jdGlvbiBmKGEpe3JldHVybiBhLl9fcHJvdG9fX31hLnN1cGVyPWJ9KFBvbHltZXIpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7cmV0dXJuIGF9ZnVuY3Rpb24gYyhhLGIpe3ZhciBjPXR5cGVvZiBiO3JldHVybiBiIGluc3RhbmNlb2YgRGF0ZSYmKGM9ImRhdGUiKSxkW2NdKGEsYil9dmFyIGQ9e3N0cmluZzpiLHVuZGVmaW5lZDpiLGRhdGU6ZnVuY3Rpb24oYSl7cmV0dXJuIG5ldyBEYXRlKERhdGUucGFyc2UoYSl8fERhdGUubm93KCkpfSwiYm9vbGVhbiI6ZnVuY3Rpb24oYSl7cmV0dXJuIiI9PT1hPyEwOiJmYWxzZSI9PT1hPyExOiEhYX0sbnVtYmVyOmZ1bmN0aW9uKGEpe3ZhciBiPXBhcnNlRmxvYXQoYSk7cmV0dXJuIDA9PT1iJiYoYj1wYXJzZUludChhKSksaXNOYU4oYik/YTpifSxvYmplY3Q6ZnVuY3Rpb24oYSxiKXtpZihudWxsPT09YilyZXR1cm4gYTt0cnl7cmV0dXJuIEpTT04ucGFyc2UoYS5yZXBsYWNlKC8nL2csJyInKSl9Y2F0Y2goYyl7cmV0dXJuIGF9fSwiZnVuY3Rpb24iOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGJ9fTthLmRlc2VyaWFsaXplVmFsdWU9Y30oUG9seW1lciksZnVuY3Rpb24oYSl7dmFyIGI9YS5leHRlbmQsYz17fTtjLmRlY2xhcmF0aW9uPXt9LGMuaW5zdGFuY2U9e30sYy5wdWJsaXNoPWZ1bmN0aW9uKGEsYyl7Zm9yKHZhciBkIGluIGEpYihjLGFbZF0pfSxhLmFwaT1jfShQb2x5bWVyKSxmdW5jdGlvbihhKXt2YXIgYj17YXN5bmM6ZnVuY3Rpb24oYSxiLGMpe1BsYXRmb3JtLmZsdXNoKCksYj1iJiZiLmxlbmd0aD9iOltiXTt2YXIgZD1mdW5jdGlvbigpeyh0aGlzW2FdfHxhKS5hcHBseSh0aGlzLGIpfS5iaW5kKHRoaXMpLGU9Yz9zZXRUaW1lb3V0KGQsYyk6cmVxdWVzdEFuaW1hdGlvbkZyYW1lKGQpO3JldHVybiBjP2U6fmV9LGNhbmNlbEFzeW5jOmZ1bmN0aW9uKGEpezA+YT9jYW5jZWxBbmltYXRpb25GcmFtZSh+YSk6Y2xlYXJUaW1lb3V0KGEpfSxmaXJlOmZ1bmN0aW9uKGEsYixjLGQsZSl7dmFyIGY9Y3x8dGhpcyxiPW51bGw9PT1ifHx2b2lkIDA9PT1iP3t9OmIsZz1uZXcgQ3VzdG9tRXZlbnQoYSx7YnViYmxlczp2b2lkIDAhPT1kP2Q6ITAsY2FuY2VsYWJsZTp2b2lkIDAhPT1lP2U6ITAsZGV0YWlsOmJ9KTtyZXR1cm4gZi5kaXNwYXRjaEV2ZW50KGcpLGd9LGFzeW5jRmlyZTpmdW5jdGlvbigpe3RoaXMuYXN5bmMoImZpcmUiLGFyZ3VtZW50cyl9LGNsYXNzRm9sbG93czpmdW5jdGlvbihhLGIsYyl7YiYmYi5jbGFzc0xpc3QucmVtb3ZlKGMpLGEmJmEuY2xhc3NMaXN0LmFkZChjKX0saW5qZWN0Qm91bmRIVE1MOmZ1bmN0aW9uKGEsYil7dmFyIGM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidGVtcGxhdGUiKTtjLmlubmVySFRNTD1hO3ZhciBkPXRoaXMuaW5zdGFuY2VUZW1wbGF0ZShjKTtyZXR1cm4gYiYmKGIudGV4dENvbnRlbnQ9IiIsYi5hcHBlbmRDaGlsZChkKSksZH19LGM9ZnVuY3Rpb24oKXt9LGQ9e307Yi5hc3luY01ldGhvZD1iLmFzeW5jLGEuYXBpLmluc3RhbmNlLnV0aWxzPWIsYS5ub3A9YyxhLm5vYj1kfShQb2x5bWVyKSxmdW5jdGlvbihhKXt2YXIgYj13aW5kb3cubG9nRmxhZ3N8fHt9LGM9Im9uLSIsZD17RVZFTlRfUFJFRklYOmMsYWRkSG9zdExpc3RlbmVyczpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZXZlbnREZWxlZ2F0ZXM7Yi5ldmVudHMmJk9iamVjdC5rZXlzKGEpLmxlbmd0aD4wJiZjb25zb2xlLmxvZygiWyVzXSBhZGRIb3N0TGlzdGVuZXJzOiIsdGhpcy5sb2NhbE5hbWUsYSk7Zm9yKHZhciBjIGluIGEpe3ZhciBkPWFbY107UG9seW1lckdlc3R1cmVzLmFkZEV2ZW50TGlzdGVuZXIodGhpcyxjLHRoaXMuZWxlbWVudC5nZXRFdmVudEhhbmRsZXIodGhpcyx0aGlzLGQpKX19LGRpc3BhdGNoTWV0aG9kOmZ1bmN0aW9uKGEsYyxkKXtpZihhKXtiLmV2ZW50cyYmY29uc29sZS5ncm91cCgiWyVzXSBkaXNwYXRjaCBbJXNdIixhLmxvY2FsTmFtZSxjKTt2YXIgZT0iZnVuY3Rpb24iPT10eXBlb2YgYz9jOmFbY107ZSYmZVtkPyJhcHBseSI6ImNhbGwiXShhLGQpLGIuZXZlbnRzJiZjb25zb2xlLmdyb3VwRW5kKCksUGxhdGZvcm0uZmx1c2goKX19fTthLmFwaS5pbnN0YW5jZS5ldmVudHM9ZCxhLmFkZEV2ZW50TGlzdGVuZXI9ZnVuY3Rpb24oYSxiLGMsZCl7UG9seW1lckdlc3R1cmVzLmFkZEV2ZW50TGlzdGVuZXIod3JhcChhKSxiLGMsZCl9LGEucmVtb3ZlRXZlbnRMaXN0ZW5lcj1mdW5jdGlvbihhLGIsYyxkKXtQb2x5bWVyR2VzdHVyZXMucmVtb3ZlRXZlbnRMaXN0ZW5lcih3cmFwKGEpLGIsYyxkKX19KFBvbHltZXIpLGZ1bmN0aW9uKGEpe3ZhciBiPXtjb3B5SW5zdGFuY2VBdHRyaWJ1dGVzOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5faW5zdGFuY2VBdHRyaWJ1dGVzO2Zvcih2YXIgYiBpbiBhKXRoaXMuaGFzQXR0cmlidXRlKGIpfHx0aGlzLnNldEF0dHJpYnV0ZShiLGFbYl0pfSx0YWtlQXR0cmlidXRlczpmdW5jdGlvbigpe2lmKHRoaXMuX3B1Ymxpc2hMQylmb3IodmFyIGEsYj0wLGM9dGhpcy5hdHRyaWJ1dGVzLGQ9Yy5sZW5ndGg7KGE9Y1tiXSkmJmQ+YjtiKyspdGhpcy5hdHRyaWJ1dGVUb1Byb3BlcnR5KGEubmFtZSxhLnZhbHVlKX0sYXR0cmlidXRlVG9Qcm9wZXJ0eTpmdW5jdGlvbihiLGMpe3ZhciBiPXRoaXMucHJvcGVydHlGb3JBdHRyaWJ1dGUoYik7aWYoYil7aWYoYyYmYy5zZWFyY2goYS5iaW5kUGF0dGVybik+PTApcmV0dXJuO3ZhciBkPXRoaXNbYl0sYz10aGlzLmRlc2VyaWFsaXplVmFsdWUoYyxkKTtjIT09ZCYmKHRoaXNbYl09Yyl9fSxwcm9wZXJ0eUZvckF0dHJpYnV0ZTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLl9wdWJsaXNoTEMmJnRoaXMuX3B1Ymxpc2hMQ1thXTtyZXR1cm4gYn0sZGVzZXJpYWxpemVWYWx1ZTpmdW5jdGlvbihiLGMpe3JldHVybiBhLmRlc2VyaWFsaXplVmFsdWUoYixjKX0sc2VyaWFsaXplVmFsdWU6ZnVuY3Rpb24oYSxiKXtyZXR1cm4iYm9vbGVhbiI9PT1iP2E/IiI6dm9pZCAwOiJvYmplY3QiIT09YiYmImZ1bmN0aW9uIiE9PWImJnZvaWQgMCE9PWE/YTp2b2lkIDB9LHJlZmxlY3RQcm9wZXJ0eVRvQXR0cmlidXRlOmZ1bmN0aW9uKGEpe3ZhciBiPXR5cGVvZiB0aGlzW2FdLGM9dGhpcy5zZXJpYWxpemVWYWx1ZSh0aGlzW2FdLGIpO3ZvaWQgMCE9PWM/dGhpcy5zZXRBdHRyaWJ1dGUoYSxjKToiYm9vbGVhbiI9PT1iJiZ0aGlzLnJlbW92ZUF0dHJpYnV0ZShhKX19O2EuYXBpLmluc3RhbmNlLmF0dHJpYnV0ZXM9Yn0oUG9seW1lciksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhLGIpe3JldHVybiBhPT09Yj8wIT09YXx8MS9hPT09MS9iOmYoYSkmJmYoYik/ITA6YSE9PWEmJmIhPT1ifWZ1bmN0aW9uIGMoYSxiKXtyZXR1cm4gdm9pZCAwPT09YiYmbnVsbD09PWE/YjpudWxsPT09Ynx8dm9pZCAwPT09Yj9hOmJ9dmFyIGQ9d2luZG93LmxvZ0ZsYWdzfHx7fSxlPXtvYmplY3Q6dm9pZCAwLHR5cGU6InVwZGF0ZSIsbmFtZTp2b2lkIDAsb2xkVmFsdWU6dm9pZCAwfSxmPU51bWJlci5pc05hTnx8ZnVuY3Rpb24oYSl7cmV0dXJuIm51bWJlciI9PXR5cGVvZiBhJiZpc05hTihhKX0sZz17Y3JlYXRlUHJvcGVydHlPYnNlcnZlcjpmdW5jdGlvbigpe3ZhciBhPXRoaXMuX29ic2VydmVOYW1lcztpZihhJiZhLmxlbmd0aCl7dmFyIGI9dGhpcy5fcHJvcGVydHlPYnNlcnZlcj1uZXcgQ29tcG91bmRPYnNlcnZlcighMCk7dGhpcy5yZWdpc3Rlck9ic2VydmVyKGIpO2Zvcih2YXIgYyxkPTAsZT1hLmxlbmd0aDtlPmQmJihjPWFbZF0pO2QrKyliLmFkZFBhdGgodGhpcyxjKSx0aGlzLm9ic2VydmVBcnJheVZhbHVlKGMsdGhpc1tjXSxudWxsKX19LG9wZW5Qcm9wZXJ0eU9ic2VydmVyOmZ1bmN0aW9uKCl7dGhpcy5fcHJvcGVydHlPYnNlcnZlciYmdGhpcy5fcHJvcGVydHlPYnNlcnZlci5vcGVuKHRoaXMubm90aWZ5UHJvcGVydHlDaGFuZ2VzLHRoaXMpfSxub3RpZnlQcm9wZXJ0eUNoYW5nZXM6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGUsZj17fTtmb3IodmFyIGcgaW4gYilpZihkPWNbMipnKzFdLGU9dGhpcy5vYnNlcnZlW2RdKXt2YXIgaD1iW2ddLGk9YVtnXTt0aGlzLm9ic2VydmVBcnJheVZhbHVlKGQsaSxoKSxmW2VdfHwodm9pZCAwIT09aCYmbnVsbCE9PWh8fHZvaWQgMCE9PWkmJm51bGwhPT1pKSYmKGZbZV09ITAsdGhpcy5pbnZva2VNZXRob2QoZSxbaCxpLGFyZ3VtZW50c10pKX19LGRlbGl2ZXJDaGFuZ2VzOmZ1bmN0aW9uKCl7dGhpcy5fcHJvcGVydHlPYnNlcnZlciYmdGhpcy5fcHJvcGVydHlPYnNlcnZlci5kZWxpdmVyKCl9LHByb3BlcnR5Q2hhbmdlZF86ZnVuY3Rpb24oYSl7dGhpcy5yZWZsZWN0W2FdJiZ0aGlzLnJlZmxlY3RQcm9wZXJ0eVRvQXR0cmlidXRlKGEpfSxvYnNlcnZlQXJyYXlWYWx1ZTpmdW5jdGlvbihhLGIsYyl7dmFyIGU9dGhpcy5vYnNlcnZlW2FdO2lmKGUmJihBcnJheS5pc0FycmF5KGMpJiYoZC5vYnNlcnZlJiZjb25zb2xlLmxvZygiWyVzXSBvYnNlcnZlQXJyYXlWYWx1ZTogdW5yZWdpc3RlciBvYnNlcnZlciBbJXNdIix0aGlzLmxvY2FsTmFtZSxhKSx0aGlzLmNsb3NlTmFtZWRPYnNlcnZlcihhKyJfX2FycmF5IikpLEFycmF5LmlzQXJyYXkoYikpKXtkLm9ic2VydmUmJmNvbnNvbGUubG9nKCJbJXNdIG9ic2VydmVBcnJheVZhbHVlOiByZWdpc3RlciBvYnNlcnZlciBbJXNdIix0aGlzLmxvY2FsTmFtZSxhLGIpO3ZhciBmPW5ldyBBcnJheU9ic2VydmVyKGIpO2Yub3BlbihmdW5jdGlvbihhKXt0aGlzLmludm9rZU1ldGhvZChlLFthXSl9LHRoaXMpLHRoaXMucmVnaXN0ZXJOYW1lZE9ic2VydmVyKGErIl9fYXJyYXkiLGYpfX0sZW1pdFByb3BlcnR5Q2hhbmdlUmVjb3JkOmZ1bmN0aW9uKGEsYyxkKXtpZighYihjLGQpJiYodGhpcy5wcm9wZXJ0eUNoYW5nZWRfKGEsYyxkKSxPYnNlcnZlci5oYXNPYmplY3RPYnNlcnZlKSl7dmFyIGY9dGhpcy5ub3RpZmllcl87Znx8KGY9dGhpcy5ub3RpZmllcl89T2JqZWN0LmdldE5vdGlmaWVyKHRoaXMpKSxlLm9iamVjdD10aGlzLGUubmFtZT1hLGUub2xkVmFsdWU9ZCxmLm5vdGlmeShlKX19LGJpbmRUb0FjY2Vzc29yOmZ1bmN0aW9uKGEsYyxkKXtmdW5jdGlvbiBlKGIsYyl7altmXT1iO3ZhciBkPWpbaF07ZCYmImZ1bmN0aW9uIj09dHlwZW9mIGQuc2V0VmFsdWUmJmQuc2V0VmFsdWUoYiksai5lbWl0UHJvcGVydHlDaGFuZ2VSZWNvcmQoYSxiLGMpfXZhciBmPWErIl8iLGc9YSsiT2JzZXJ2YWJsZV8iLGg9YSsiQ29tcHV0ZWRCb3VuZE9ic2VydmFibGVfIjt0aGlzW2ddPWM7dmFyIGk9dGhpc1tmXSxqPXRoaXMsaz1jLm9wZW4oZSk7aWYoZCYmIWIoaSxrKSl7dmFyIGw9ZChpLGspO2IoayxsKXx8KGs9bCxjLnNldFZhbHVlJiZjLnNldFZhbHVlKGspKX1lKGssaSk7dmFyIG09e2Nsb3NlOmZ1bmN0aW9uKCl7Yy5jbG9zZSgpLGpbZ109dm9pZCAwLGpbaF09dm9pZCAwfX07cmV0dXJuIHRoaXMucmVnaXN0ZXJPYnNlcnZlcihtKSxtfSxjcmVhdGVDb21wdXRlZFByb3BlcnRpZXM6ZnVuY3Rpb24oKXtpZih0aGlzLl9jb21wdXRlZE5hbWVzKWZvcih2YXIgYT0wO2E8dGhpcy5fY29tcHV0ZWROYW1lcy5sZW5ndGg7YSsrKXt2YXIgYj10aGlzLl9jb21wdXRlZE5hbWVzW2FdLGM9dGhpcy5jb21wdXRlZFtiXTt0cnl7dmFyIGQ9UG9seW1lckV4cHJlc3Npb25zLmdldEV4cHJlc3Npb24oYyksZT1kLmdldEJpbmRpbmcodGhpcyx0aGlzLmVsZW1lbnQuc3ludGF4KTt0aGlzLmJpbmRUb0FjY2Vzc29yKGIsZSl9Y2F0Y2goZil7Y29uc29sZS5lcnJvcigiRmFpbGVkIHRvIGNyZWF0ZSBjb21wdXRlZCBwcm9wZXJ0eSIsZil9fX0sYmluZFByb3BlcnR5OmZ1bmN0aW9uKGEsYixkKXtpZihkKXJldHVybiB2b2lkKHRoaXNbYV09Yik7dmFyIGU9dGhpcy5lbGVtZW50LnByb3RvdHlwZS5jb21wdXRlZDtpZihlJiZlW2FdKXt2YXIgZj1hKyJDb21wdXRlZEJvdW5kT2JzZXJ2YWJsZV8iO3JldHVybiB2b2lkKHRoaXNbZl09Yil9cmV0dXJuIHRoaXMuYmluZFRvQWNjZXNzb3IoYSxiLGMpfSxpbnZva2VNZXRob2Q6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzW2FdfHxhOyJmdW5jdGlvbiI9PXR5cGVvZiBjJiZjLmFwcGx5KHRoaXMsYil9LHJlZ2lzdGVyT2JzZXJ2ZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuX29ic2VydmVycz92b2lkIHRoaXMuX29ic2VydmVycy5wdXNoKGEpOnZvaWQodGhpcy5fb2JzZXJ2ZXJzPVthXSl9LGNsb3NlT2JzZXJ2ZXJzOmZ1bmN0aW9uKCl7aWYodGhpcy5fb2JzZXJ2ZXJzKXtmb3IodmFyIGE9dGhpcy5fb2JzZXJ2ZXJzLGI9MDtiPGEubGVuZ3RoO2IrKyl7dmFyIGM9YVtiXTtjJiYiZnVuY3Rpb24iPT10eXBlb2YgYy5jbG9zZSYmYy5jbG9zZSgpfXRoaXMuX29ic2VydmVycz1bXX19LHJlZ2lzdGVyTmFtZWRPYnNlcnZlcjpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuX25hbWVkT2JzZXJ2ZXJzfHwodGhpcy5fbmFtZWRPYnNlcnZlcnM9e30pO2NbYV09Yn0sY2xvc2VOYW1lZE9ic2VydmVyOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuX25hbWVkT2JzZXJ2ZXJzO3JldHVybiBiJiZiW2FdPyhiW2FdLmNsb3NlKCksYlthXT1udWxsLCEwKTp2b2lkIDB9LGNsb3NlTmFtZWRPYnNlcnZlcnM6ZnVuY3Rpb24oKXtpZih0aGlzLl9uYW1lZE9ic2VydmVycyl7Zm9yKHZhciBhIGluIHRoaXMuX25hbWVkT2JzZXJ2ZXJzKXRoaXMuY2xvc2VOYW1lZE9ic2VydmVyKGEpO3RoaXMuX25hbWVkT2JzZXJ2ZXJzPXt9fX19O2EuYXBpLmluc3RhbmNlLnByb3BlcnRpZXM9Z30oUG9seW1lciksZnVuY3Rpb24oYSl7dmFyIGI9d2luZG93LmxvZ0ZsYWdzfHwwLGM9e2luc3RhbmNlVGVtcGxhdGU6ZnVuY3Rpb24oYSl7SFRNTFRlbXBsYXRlRWxlbWVudC5kZWNvcmF0ZShhKTtmb3IodmFyIGI9dGhpcy5zeW50YXh8fCFhLmJpbmRpbmdEZWxlZ2F0ZSYmdGhpcy5lbGVtZW50LnN5bnRheCxjPWEuY3JlYXRlSW5zdGFuY2UodGhpcyxiKSxkPWMuYmluZGluZ3NfLGU9MDtlPGQubGVuZ3RoO2UrKyl0aGlzLnJlZ2lzdGVyT2JzZXJ2ZXIoZFtlXSk7cmV0dXJuIGN9LGJpbmQ6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXRoaXMucHJvcGVydHlGb3JBdHRyaWJ1dGUoYSk7aWYoZCl7dmFyIGU9dGhpcy5iaW5kUHJvcGVydHkoZCxiLGMpO3JldHVybiBQbGF0Zm9ybS5lbmFibGVCaW5kaW5nc1JlZmxlY3Rpb24mJmUmJihlLnBhdGg9Yi5wYXRoXyx0aGlzLl9yZWNvcmRCaW5kaW5nKGQsZSkpLHRoaXMucmVmbGVjdFtkXSYmdGhpcy5yZWZsZWN0UHJvcGVydHlUb0F0dHJpYnV0ZShkKSxlfXJldHVybiB0aGlzLm1peGluU3VwZXIoYXJndW1lbnRzKX0sYmluZEZpbmlzaGVkOmZ1bmN0aW9uKCl7dGhpcy5tYWtlRWxlbWVudFJlYWR5KCl9LF9yZWNvcmRCaW5kaW5nOmZ1bmN0aW9uKGEsYil7dGhpcy5iaW5kaW5nc189dGhpcy5iaW5kaW5nc198fHt9LHRoaXMuYmluZGluZ3NfW2FdPWJ9LGFzeW5jVW5iaW5kQWxsOmZ1bmN0aW9uKCl7dGhpcy5fdW5ib3VuZHx8KGIudW5iaW5kJiZjb25zb2xlLmxvZygiWyVzXSBhc3luY1VuYmluZEFsbCIsdGhpcy5sb2NhbE5hbWUpLHRoaXMuX3VuYmluZEFsbEpvYj10aGlzLmpvYih0aGlzLl91bmJpbmRBbGxKb2IsdGhpcy51bmJpbmRBbGwsMCkpfSx1bmJpbmRBbGw6ZnVuY3Rpb24oKXt0aGlzLl91bmJvdW5kfHwodGhpcy5jbG9zZU9ic2VydmVycygpLHRoaXMuY2xvc2VOYW1lZE9ic2VydmVycygpLHRoaXMuX3VuYm91bmQ9ITApfSxjYW5jZWxVbmJpbmRBbGw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdW5ib3VuZD92b2lkKGIudW5iaW5kJiZjb25zb2xlLndhcm4oIlslc10gYWxyZWFkeSB1bmJvdW5kLCBjYW5ub3QgY2FuY2VsIHVuYmluZEFsbCIsdGhpcy5sb2NhbE5hbWUpKTooYi51bmJpbmQmJmNvbnNvbGUubG9nKCJbJXNdIGNhbmNlbFVuYmluZEFsbCIsdGhpcy5sb2NhbE5hbWUpLHZvaWQodGhpcy5fdW5iaW5kQWxsSm9iJiYodGhpcy5fdW5iaW5kQWxsSm9iPXRoaXMuX3VuYmluZEFsbEpvYi5zdG9wKCkpKSl9fSxkPS9ce1x7KFtee31dKil9fS87YS5iaW5kUGF0dGVybj1kLGEuYXBpLmluc3RhbmNlLm1kdj1jfShQb2x5bWVyKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEpe3JldHVybiBhLmhhc093blByb3BlcnR5KCJQb2x5bWVyQmFzZSIpfWZ1bmN0aW9uIGMoKXt9dmFyIGQ9e1BvbHltZXJCYXNlOiEwLGpvYjpmdW5jdGlvbihhLGIsYyl7aWYoInN0cmluZyIhPXR5cGVvZiBhKXJldHVybiBQb2x5bWVyLmpvYi5jYWxsKHRoaXMsYSxiLGMpO3ZhciBkPSJfX18iK2E7dGhpc1tkXT1Qb2x5bWVyLmpvYi5jYWxsKHRoaXMsdGhpc1tkXSxiLGMpfSwic3VwZXIiOlBvbHltZXIuc3VwZXIsY3JlYXRlZDpmdW5jdGlvbigpe30scmVhZHk6ZnVuY3Rpb24oKXt9LGNyZWF0ZWRDYWxsYmFjazpmdW5jdGlvbigpe3RoaXMudGVtcGxhdGVJbnN0YW5jZSYmdGhpcy50ZW1wbGF0ZUluc3RhbmNlLm1vZGVsJiZjb25zb2xlLndhcm4oIkF0dHJpYnV0ZXMgb24gIit0aGlzLmxvY2FsTmFtZSsiIHdlcmUgZGF0YSBib3VuZCBwcmlvciB0byBQb2x5bWVyIHVwZ3JhZGluZyB0aGUgZWxlbWVudC4gVGhpcyBtYXkgcmVzdWx0IGluIGluY29ycmVjdCBiaW5kaW5nIHR5cGVzLiIpLHRoaXMuY3JlYXRlZCgpLHRoaXMucHJlcGFyZUVsZW1lbnQoKSx0aGlzLm93bmVyRG9jdW1lbnQuaXNTdGFnaW5nRG9jdW1lbnR8fHRoaXMubWFrZUVsZW1lbnRSZWFkeSgpfSxwcmVwYXJlRWxlbWVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9lbGVtZW50UHJlcGFyZWQ/dm9pZCBjb25zb2xlLndhcm4oIkVsZW1lbnQgYWxyZWFkeSBwcmVwYXJlZCIsdGhpcy5sb2NhbE5hbWUpOih0aGlzLl9lbGVtZW50UHJlcGFyZWQ9ITAsdGhpcy5zaGFkb3dSb290cz17fSx0aGlzLmNyZWF0ZVByb3BlcnR5T2JzZXJ2ZXIoKSx0aGlzLm9wZW5Qcm9wZXJ0eU9ic2VydmVyKCksdGhpcy5jb3B5SW5zdGFuY2VBdHRyaWJ1dGVzKCksdGhpcy50YWtlQXR0cmlidXRlcygpLHZvaWQgdGhpcy5hZGRIb3N0TGlzdGVuZXJzKCkpfSxtYWtlRWxlbWVudFJlYWR5OmZ1bmN0aW9uKCl7dGhpcy5fcmVhZGllZHx8KHRoaXMuX3JlYWRpZWQ9ITAsdGhpcy5jcmVhdGVDb21wdXRlZFByb3BlcnRpZXMoKSx0aGlzLnBhcnNlRGVjbGFyYXRpb25zKHRoaXMuX19wcm90b19fKSx0aGlzLnJlbW92ZUF0dHJpYnV0ZSgidW5yZXNvbHZlZCIpLHRoaXMucmVhZHkoKSl9LGF0dGFjaGVkQ2FsbGJhY2s6ZnVuY3Rpb24oKXt0aGlzLmNhbmNlbFVuYmluZEFsbCgpLHRoaXMuYXR0YWNoZWQmJnRoaXMuYXR0YWNoZWQoKSx0aGlzLmVudGVyZWRWaWV3JiZ0aGlzLmVudGVyZWRWaWV3KCksdGhpcy5oYXNCZWVuQXR0YWNoZWR8fCh0aGlzLmhhc0JlZW5BdHRhY2hlZD0hMCx0aGlzLmRvbVJlYWR5JiZ0aGlzLmFzeW5jKCJkb21SZWFkeSIpKX0sZGV0YWNoZWRDYWxsYmFjazpmdW5jdGlvbigpe3RoaXMucHJldmVudERpc3Bvc2V8fHRoaXMuYXN5bmNVbmJpbmRBbGwoKSx0aGlzLmRldGFjaGVkJiZ0aGlzLmRldGFjaGVkKCksdGhpcy5sZWZ0VmlldyYmdGhpcy5sZWZ0VmlldygpfSxlbnRlcmVkVmlld0NhbGxiYWNrOmZ1bmN0aW9uKCl7dGhpcy5hdHRhY2hlZENhbGxiYWNrKCl9LGxlZnRWaWV3Q2FsbGJhY2s6ZnVuY3Rpb24oKXt0aGlzLmRldGFjaGVkQ2FsbGJhY2soKX0sZW50ZXJlZERvY3VtZW50Q2FsbGJhY2s6ZnVuY3Rpb24oKXt0aGlzLmF0dGFjaGVkQ2FsbGJhY2soKX0sbGVmdERvY3VtZW50Q2FsbGJhY2s6ZnVuY3Rpb24oKXt0aGlzLmRldGFjaGVkQ2FsbGJhY2soKX0scGFyc2VEZWNsYXJhdGlvbnM6ZnVuY3Rpb24oYSl7YSYmYS5lbGVtZW50JiYodGhpcy5wYXJzZURlY2xhcmF0aW9ucyhhLl9fcHJvdG9fXyksYS5wYXJzZURlY2xhcmF0aW9uLmNhbGwodGhpcyxhLmVsZW1lbnQpKX0scGFyc2VEZWNsYXJhdGlvbjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmZldGNoVGVtcGxhdGUoYSk7aWYoYil7dmFyIGM9dGhpcy5zaGFkb3dGcm9tVGVtcGxhdGUoYik7dGhpcy5zaGFkb3dSb290c1thLm5hbWVdPWN9fSxmZXRjaFRlbXBsYXRlOmZ1bmN0aW9uKGEpe3JldHVybiBhLnF1ZXJ5U2VsZWN0b3IoInRlbXBsYXRlIil9LHNoYWRvd0Zyb21UZW1wbGF0ZTpmdW5jdGlvbihhKXtpZihhKXt2YXIgYj10aGlzLmNyZWF0ZVNoYWRvd1Jvb3QoKSxjPXRoaXMuaW5zdGFuY2VUZW1wbGF0ZShhKTtyZXR1cm4gYi5hcHBlbmRDaGlsZChjKSx0aGlzLnNoYWRvd1Jvb3RSZWFkeShiLGEpLGJ9fSxsaWdodEZyb21UZW1wbGF0ZTpmdW5jdGlvbihhLGIpe2lmKGEpe3RoaXMuZXZlbnRDb250cm9sbGVyPXRoaXM7dmFyIGM9dGhpcy5pbnN0YW5jZVRlbXBsYXRlKGEpO3JldHVybiBiP3RoaXMuaW5zZXJ0QmVmb3JlKGMsYik6dGhpcy5hcHBlbmRDaGlsZChjKSx0aGlzLnNoYWRvd1Jvb3RSZWFkeSh0aGlzKSxjfX0sc2hhZG93Um9vdFJlYWR5OmZ1bmN0aW9uKGEpe3RoaXMubWFyc2hhbE5vZGVSZWZlcmVuY2VzKGEpfSxtYXJzaGFsTm9kZVJlZmVyZW5jZXM6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy4kPXRoaXMuJHx8e307aWYoYSlmb3IodmFyIGMsZD1hLnF1ZXJ5U2VsZWN0b3JBbGwoIltpZF0iKSxlPTAsZj1kLmxlbmd0aDtmPmUmJihjPWRbZV0pO2UrKyliW2MuaWRdPWN9LGF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjazpmdW5jdGlvbihhKXsiY2xhc3MiIT09YSYmInN0eWxlIiE9PWEmJnRoaXMuYXR0cmlidXRlVG9Qcm9wZXJ0eShhLHRoaXMuZ2V0QXR0cmlidXRlKGEpKSx0aGlzLmF0dHJpYnV0ZUNoYW5nZWQmJnRoaXMuYXR0cmlidXRlQ2hhbmdlZC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LG9uTXV0YXRpb246ZnVuY3Rpb24oYSxiKXt2YXIgYz1uZXcgTXV0YXRpb25PYnNlcnZlcihmdW5jdGlvbihhKXtiLmNhbGwodGhpcyxjLGEpLGMuZGlzY29ubmVjdCgpfS5iaW5kKHRoaXMpKTtjLm9ic2VydmUoYSx7Y2hpbGRMaXN0OiEwLHN1YnRyZWU6ITB9KX19O2MucHJvdG90eXBlPWQsZC5jb25zdHJ1Y3Rvcj1jLGEuQmFzZT1jLGEuaXNCYXNlPWIsYS5hcGkuaW5zdGFuY2UuYmFzZT1kfShQb2x5bWVyKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEpe3JldHVybiBhLl9fcHJvdG9fX31mdW5jdGlvbiBjKGEsYil7dmFyIGM9IiIsZD0hMTtiJiYoYz1iLmxvY2FsTmFtZSxkPWIuaGFzQXR0cmlidXRlKCJpcyIpKTt2YXIgZT1QbGF0Zm9ybS5TaGFkb3dDU1MubWFrZVNjb3BlU2VsZWN0b3IoYyxkKTtyZXR1cm4gUGxhdGZvcm0uU2hhZG93Q1NTLnNoaW1Dc3NUZXh0KGEsZSl9dmFyIGQ9KHdpbmRvdy5sb2dGbGFnc3x8e30sd2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxlPSJlbGVtZW50IixmPSJjb250cm9sbGVyIixnPXtTVFlMRV9TQ09QRV9BVFRSSUJVVEU6ZSxpbnN0YWxsQ29udHJvbGxlclN0eWxlczpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZmluZFN0eWxlU2NvcGUoKTtpZihhJiYhdGhpcy5zY29wZUhhc05hbWVkU3R5bGUoYSx0aGlzLmxvY2FsTmFtZSkpe2Zvcih2YXIgYz1iKHRoaXMpLGQ9IiI7YyYmYy5lbGVtZW50OylkKz1jLmVsZW1lbnQuY3NzVGV4dEZvclNjb3BlKGYpLGM9YihjKTtkJiZ0aGlzLmluc3RhbGxTY29wZUNzc1RleHQoZCxhKX19LGluc3RhbGxTY29wZVN0eWxlOmZ1bmN0aW9uKGEsYixjKXt2YXIgYz1jfHx0aGlzLmZpbmRTdHlsZVNjb3BlKCksYj1ifHwiIjtpZihjJiYhdGhpcy5zY29wZUhhc05hbWVkU3R5bGUoYyx0aGlzLmxvY2FsTmFtZStiKSl7dmFyIGQ9IiI7aWYoYSBpbnN0YW5jZW9mIEFycmF5KWZvcih2YXIgZSxmPTAsZz1hLmxlbmd0aDtnPmYmJihlPWFbZl0pO2YrKylkKz1lLnRleHRDb250ZW50KyJcblxuIjtlbHNlIGQ9YS50ZXh0Q29udGVudDt0aGlzLmluc3RhbGxTY29wZUNzc1RleHQoZCxjLGIpfX0saW5zdGFsbFNjb3BlQ3NzVGV4dDpmdW5jdGlvbihhLGIsZSl7aWYoYj1ifHx0aGlzLmZpbmRTdHlsZVNjb3BlKCksZT1lfHwiIixiKXtkJiYoYT1jKGEsYi5ob3N0KSk7dmFyIGc9dGhpcy5lbGVtZW50LmNzc1RleHRUb1Njb3BlU3R5bGUoYSxmKTtQb2x5bWVyLmFwcGx5U3R5bGVUb1Njb3BlKGcsYiksdGhpcy5zdHlsZUNhY2hlRm9yU2NvcGUoYilbdGhpcy5sb2NhbE5hbWUrZV09ITB9fSxmaW5kU3R5bGVTY29wZTpmdW5jdGlvbihhKXtmb3IodmFyIGI9YXx8dGhpcztiLnBhcmVudE5vZGU7KWI9Yi5wYXJlbnROb2RlO3JldHVybiBifSxzY29wZUhhc05hbWVkU3R5bGU6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLnN0eWxlQ2FjaGVGb3JTY29wZShhKTsKcmV0dXJuIGNbYl19LHN0eWxlQ2FjaGVGb3JTY29wZTpmdW5jdGlvbihhKXtpZihkKXt2YXIgYj1hLmhvc3Q/YS5ob3N0LmxvY2FsTmFtZTphLmxvY2FsTmFtZTtyZXR1cm4gaFtiXXx8KGhbYl09e30pfXJldHVybiBhLl9zY29wZVN0eWxlcz1hLl9zY29wZVN0eWxlc3x8e319fSxoPXt9O2EuYXBpLmluc3RhbmNlLnN0eWxlcz1nfShQb2x5bWVyKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEsYil7aWYoInN0cmluZyIhPXR5cGVvZiBhKXt2YXIgYz1ifHxkb2N1bWVudC5fY3VycmVudFNjcmlwdDtpZihiPWEsYT1jJiZjLnBhcmVudE5vZGUmJmMucGFyZW50Tm9kZS5nZXRBdHRyaWJ1dGU/Yy5wYXJlbnROb2RlLmdldEF0dHJpYnV0ZSgibmFtZSIpOiIiLCFhKXRocm93IkVsZW1lbnQgbmFtZSBjb3VsZCBub3QgYmUgaW5mZXJyZWQuIn1pZihmKGEpKXRocm93IkFscmVhZHkgcmVnaXN0ZXJlZCAoUG9seW1lcikgcHJvdG90eXBlIGZvciBlbGVtZW50ICIrYTtlKGEsYiksZChhKX1mdW5jdGlvbiBjKGEsYil7aVthXT1ifWZ1bmN0aW9uIGQoYSl7aVthXSYmKGlbYV0ucmVnaXN0ZXJXaGVuUmVhZHkoKSxkZWxldGUgaVthXSl9ZnVuY3Rpb24gZShhLGIpe3JldHVybiBqW2FdPWJ8fHt9fWZ1bmN0aW9uIGYoYSl7cmV0dXJuIGpbYV19ZnVuY3Rpb24gZyhhLGIpe2lmKCJzdHJpbmciIT10eXBlb2YgYilyZXR1cm4hMTt2YXIgYz1IVE1MRWxlbWVudC5nZXRQcm90b3R5cGVGb3JUYWcoYiksZD1jJiZjLmNvbnN0cnVjdG9yO3JldHVybiBkP0N1c3RvbUVsZW1lbnRzLmluc3RhbmNlb2Y/Q3VzdG9tRWxlbWVudHMuaW5zdGFuY2VvZihhLGQpOmEgaW5zdGFuY2VvZiBkOiExfXZhciBoPWEuZXh0ZW5kLGk9KGEuYXBpLHt9KSxqPXt9O2EuZ2V0UmVnaXN0ZXJlZFByb3RvdHlwZT1mLGEud2FpdGluZ0ZvclByb3RvdHlwZT1jLGEuaW5zdGFuY2VPZlR5cGU9Zyx3aW5kb3cuUG9seW1lcj1iLGgoUG9seW1lcixhKSxQbGF0Zm9ybS5jb25zdW1lRGVjbGFyYXRpb25zJiZQbGF0Zm9ybS5jb25zdW1lRGVjbGFyYXRpb25zKGZ1bmN0aW9uKGEpe2lmKGEpZm9yKHZhciBjLGQ9MCxlPWEubGVuZ3RoO2U+ZCYmKGM9YVtkXSk7ZCsrKWIuYXBwbHkobnVsbCxjKX0pfShQb2x5bWVyKSxmdW5jdGlvbihhKXt2YXIgYj17cmVzb2x2ZUVsZW1lbnRQYXRoczpmdW5jdGlvbihhKXtQb2x5bWVyLnVybFJlc29sdmVyLnJlc29sdmVEb20oYSl9LGFkZFJlc29sdmVQYXRoQXBpOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5nZXRBdHRyaWJ1dGUoImFzc2V0cGF0aCIpfHwiIixiPW5ldyBVUkwoYSx0aGlzLm93bmVyRG9jdW1lbnQuYmFzZVVSSSk7dGhpcy5wcm90b3R5cGUucmVzb2x2ZVBhdGg9ZnVuY3Rpb24oYSxjKXt2YXIgZD1uZXcgVVJMKGEsY3x8Yik7cmV0dXJuIGQuaHJlZn19fTthLmFwaS5kZWNsYXJhdGlvbi5wYXRoPWJ9KFBvbHltZXIpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSxiKXt2YXIgYz1uZXcgVVJMKGEuZ2V0QXR0cmlidXRlKCJocmVmIiksYikuaHJlZjtyZXR1cm4iQGltcG9ydCAnIitjKyInOyJ9ZnVuY3Rpb24gYyhhLGIpe2lmKGEpe2I9PT1kb2N1bWVudCYmKGI9ZG9jdW1lbnQuaGVhZCksaSYmKGI9ZG9jdW1lbnQuaGVhZCk7dmFyIGM9ZChhLnRleHRDb250ZW50KSxlPWEuZ2V0QXR0cmlidXRlKGgpO2UmJmMuc2V0QXR0cmlidXRlKGgsZSk7dmFyIGY9Yi5maXJzdEVsZW1lbnRDaGlsZDtpZihiPT09ZG9jdW1lbnQuaGVhZCl7dmFyIGc9InN0eWxlWyIraCsiXSIsaj1kb2N1bWVudC5oZWFkLnF1ZXJ5U2VsZWN0b3JBbGwoZyk7ai5sZW5ndGgmJihmPWpbai5sZW5ndGgtMV0ubmV4dEVsZW1lbnRTaWJsaW5nKX1iLmluc2VydEJlZm9yZShjLGYpfX1mdW5jdGlvbiBkKGEsYil7Yj1ifHxkb2N1bWVudCxiPWIuY3JlYXRlRWxlbWVudD9iOmIub3duZXJEb2N1bWVudDt2YXIgYz1iLmNyZWF0ZUVsZW1lbnQoInN0eWxlIik7cmV0dXJuIGMudGV4dENvbnRlbnQ9YSxjfWZ1bmN0aW9uIGUoYSl7cmV0dXJuIGEmJmEuX19yZXNvdXJjZXx8IiJ9ZnVuY3Rpb24gZihhLGIpe3JldHVybiBxP3EuY2FsbChhLGIpOnZvaWQgMH12YXIgZz0od2luZG93LmxvZ0ZsYWdzfHx7fSxhLmFwaS5pbnN0YW5jZS5zdHlsZXMpLGg9Zy5TVFlMRV9TQ09QRV9BVFRSSUJVVEUsaT13aW5kb3cuU2hhZG93RE9NUG9seWZpbGwsaj0ic3R5bGUiLGs9IkBpbXBvcnQiLGw9ImxpbmtbcmVsPXN0eWxlc2hlZXRdIixtPSJnbG9iYWwiLG49InBvbHltZXItc2NvcGUiLG89e2xvYWRTdHlsZXM6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5mZXRjaFRlbXBsYXRlKCksYz1iJiZ0aGlzLnRlbXBsYXRlQ29udGVudCgpO2lmKGMpe3RoaXMuY29udmVydFNoZWV0c1RvU3R5bGVzKGMpO3ZhciBkPXRoaXMuZmluZExvYWRhYmxlU3R5bGVzKGMpO2lmKGQubGVuZ3RoKXt2YXIgZT1iLm93bmVyRG9jdW1lbnQuYmFzZVVSSTtyZXR1cm4gUG9seW1lci5zdHlsZVJlc29sdmVyLmxvYWRTdHlsZXMoZCxlLGEpfX1hJiZhKCl9LGNvbnZlcnRTaGVldHNUb1N0eWxlczpmdW5jdGlvbihhKXtmb3IodmFyIGMsZSxmPWEucXVlcnlTZWxlY3RvckFsbChsKSxnPTAsaD1mLmxlbmd0aDtoPmcmJihjPWZbZ10pO2crKyllPWQoYihjLHRoaXMub3duZXJEb2N1bWVudC5iYXNlVVJJKSx0aGlzLm93bmVyRG9jdW1lbnQpLHRoaXMuY29weVNoZWV0QXR0cmlidXRlcyhlLGMpLGMucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQoZSxjKX0sY29weVNoZWV0QXR0cmlidXRlczpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYyxkPTAsZT1iLmF0dHJpYnV0ZXMsZj1lLmxlbmd0aDsoYz1lW2RdKSYmZj5kO2QrKykicmVsIiE9PWMubmFtZSYmImhyZWYiIT09Yy5uYW1lJiZhLnNldEF0dHJpYnV0ZShjLm5hbWUsYy52YWx1ZSl9LGZpbmRMb2FkYWJsZVN0eWxlczpmdW5jdGlvbihhKXt2YXIgYj1bXTtpZihhKWZvcih2YXIgYyxkPWEucXVlcnlTZWxlY3RvckFsbChqKSxlPTAsZj1kLmxlbmd0aDtmPmUmJihjPWRbZV0pO2UrKyljLnRleHRDb250ZW50Lm1hdGNoKGspJiZiLnB1c2goYyk7cmV0dXJuIGJ9LGluc3RhbGxTaGVldHM6ZnVuY3Rpb24oKXt0aGlzLmNhY2hlU2hlZXRzKCksdGhpcy5jYWNoZVN0eWxlcygpLHRoaXMuaW5zdGFsbExvY2FsU2hlZXRzKCksdGhpcy5pbnN0YWxsR2xvYmFsU3R5bGVzKCl9LGNhY2hlU2hlZXRzOmZ1bmN0aW9uKCl7dGhpcy5zaGVldHM9dGhpcy5maW5kTm9kZXMobCksdGhpcy5zaGVldHMuZm9yRWFjaChmdW5jdGlvbihhKXthLnBhcmVudE5vZGUmJmEucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChhKX0pfSxjYWNoZVN0eWxlczpmdW5jdGlvbigpe3RoaXMuc3R5bGVzPXRoaXMuZmluZE5vZGVzKGorIlsiK24rIl0iKSx0aGlzLnN0eWxlcy5mb3JFYWNoKGZ1bmN0aW9uKGEpe2EucGFyZW50Tm9kZSYmYS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGEpfSl9LGluc3RhbGxMb2NhbFNoZWV0czpmdW5jdGlvbigpe3ZhciBhPXRoaXMuc2hlZXRzLmZpbHRlcihmdW5jdGlvbihhKXtyZXR1cm4hYS5oYXNBdHRyaWJ1dGUobil9KSxiPXRoaXMudGVtcGxhdGVDb250ZW50KCk7aWYoYil7dmFyIGM9IiI7aWYoYS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2MrPWUoYSkrIlxuIn0pLGMpe3ZhciBmPWQoYyx0aGlzLm93bmVyRG9jdW1lbnQpO2IuaW5zZXJ0QmVmb3JlKGYsYi5maXJzdENoaWxkKX19fSxmaW5kTm9kZXM6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLnF1ZXJ5U2VsZWN0b3JBbGwoYSkuYXJyYXkoKSxkPXRoaXMudGVtcGxhdGVDb250ZW50KCk7aWYoZCl7dmFyIGU9ZC5xdWVyeVNlbGVjdG9yQWxsKGEpLmFycmF5KCk7Yz1jLmNvbmNhdChlKX1yZXR1cm4gYj9jLmZpbHRlcihiKTpjfSxpbnN0YWxsR2xvYmFsU3R5bGVzOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5zdHlsZUZvclNjb3BlKG0pO2MoYSxkb2N1bWVudC5oZWFkKX0sY3NzVGV4dEZvclNjb3BlOmZ1bmN0aW9uKGEpe3ZhciBiPSIiLGM9IlsiK24rIj0iK2ErIl0iLGQ9ZnVuY3Rpb24oYSl7cmV0dXJuIGYoYSxjKX0sZz10aGlzLnNoZWV0cy5maWx0ZXIoZCk7Zy5mb3JFYWNoKGZ1bmN0aW9uKGEpe2IrPWUoYSkrIlxuXG4ifSk7dmFyIGg9dGhpcy5zdHlsZXMuZmlsdGVyKGQpO3JldHVybiBoLmZvckVhY2goZnVuY3Rpb24oYSl7Yis9YS50ZXh0Q29udGVudCsiXG5cbiJ9KSxifSxzdHlsZUZvclNjb3BlOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3NzVGV4dEZvclNjb3BlKGEpO3JldHVybiB0aGlzLmNzc1RleHRUb1Njb3BlU3R5bGUoYixhKX0sY3NzVGV4dFRvU2NvcGVTdHlsZTpmdW5jdGlvbihhLGIpe2lmKGEpe3ZhciBjPWQoYSk7cmV0dXJuIGMuc2V0QXR0cmlidXRlKGgsdGhpcy5nZXRBdHRyaWJ1dGUoIm5hbWUiKSsiLSIrYiksY319fSxwPUhUTUxFbGVtZW50LnByb3RvdHlwZSxxPXAubWF0Y2hlc3x8cC5tYXRjaGVzU2VsZWN0b3J8fHAud2Via2l0TWF0Y2hlc1NlbGVjdG9yfHxwLm1vek1hdGNoZXNTZWxlY3RvcjthLmFwaS5kZWNsYXJhdGlvbi5zdHlsZXM9byxhLmFwcGx5U3R5bGVUb1Njb3BlPWN9KFBvbHltZXIpLGZ1bmN0aW9uKGEpe3ZhciBiPSh3aW5kb3cubG9nRmxhZ3N8fHt9LGEuYXBpLmluc3RhbmNlLmV2ZW50cyksYz1iLkVWRU5UX1BSRUZJWCxkPXt9O1sid2Via2l0QW5pbWF0aW9uU3RhcnQiLCJ3ZWJraXRBbmltYXRpb25FbmQiLCJ3ZWJraXRUcmFuc2l0aW9uRW5kIiwiRE9NRm9jdXNPdXQiLCJET01Gb2N1c0luIiwiRE9NTW91c2VTY3JvbGwiXS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2RbYS50b0xvd2VyQ2FzZSgpXT1hfSk7dmFyIGU9e3BhcnNlSG9zdEV2ZW50czpmdW5jdGlvbigpe3ZhciBhPXRoaXMucHJvdG90eXBlLmV2ZW50RGVsZWdhdGVzO3RoaXMuYWRkQXR0cmlidXRlRGVsZWdhdGVzKGEpfSxhZGRBdHRyaWJ1dGVEZWxlZ2F0ZXM6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiLGM9MDtiPXRoaXMuYXR0cmlidXRlc1tjXTtjKyspdGhpcy5oYXNFdmVudFByZWZpeChiLm5hbWUpJiYoYVt0aGlzLnJlbW92ZUV2ZW50UHJlZml4KGIubmFtZSldPWIudmFsdWUucmVwbGFjZSgie3siLCIiKS5yZXBsYWNlKCJ9fSIsIiIpLnRyaW0oKSl9LGhhc0V2ZW50UHJlZml4OmZ1bmN0aW9uKGEpe3JldHVybiBhJiYibyI9PT1hWzBdJiYibiI9PT1hWzFdJiYiLSI9PT1hWzJdfSxyZW1vdmVFdmVudFByZWZpeDpmdW5jdGlvbihhKXtyZXR1cm4gYS5zbGljZShmKX0sZmluZENvbnRyb2xsZXI6ZnVuY3Rpb24oYSl7Zm9yKDthLnBhcmVudE5vZGU7KXtpZihhLmV2ZW50Q29udHJvbGxlcilyZXR1cm4gYS5ldmVudENvbnRyb2xsZXI7YT1hLnBhcmVudE5vZGV9cmV0dXJuIGEuaG9zdH0sZ2V0RXZlbnRIYW5kbGVyOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD10aGlzO3JldHVybiBmdW5jdGlvbihlKXthJiZhLlBvbHltZXJCYXNlfHwoYT1kLmZpbmRDb250cm9sbGVyKGIpKTt2YXIgZj1bZSxlLmRldGFpbCxlLmN1cnJlbnRUYXJnZXRdO2EuZGlzcGF0Y2hNZXRob2QoYSxjLGYpfX0scHJlcGFyZUV2ZW50QmluZGluZzpmdW5jdGlvbihhLGIpe2lmKHRoaXMuaGFzRXZlbnRQcmVmaXgoYikpe3ZhciBjPXRoaXMucmVtb3ZlRXZlbnRQcmVmaXgoYik7Yz1kW2NdfHxjO3ZhciBlPXRoaXM7cmV0dXJuIGZ1bmN0aW9uKGIsZCxmKXtmdW5jdGlvbiBnKCl7cmV0dXJuInt7ICIrYSsiIH19In12YXIgaD1lLmdldEV2ZW50SGFuZGxlcih2b2lkIDAsZCxhKTtyZXR1cm4gUG9seW1lckdlc3R1cmVzLmFkZEV2ZW50TGlzdGVuZXIoZCxjLGgpLGY/dm9pZCAwOntvcGVuOmcsZGlzY2FyZENoYW5nZXM6ZyxjbG9zZTpmdW5jdGlvbigpe1BvbHltZXJHZXN0dXJlcy5yZW1vdmVFdmVudExpc3RlbmVyKGQsYyxoKX19fX19fSxmPWMubGVuZ3RoO2EuYXBpLmRlY2xhcmF0aW9uLmV2ZW50cz1lfShQb2x5bWVyKSxmdW5jdGlvbihhKXt2YXIgYj17aW5mZXJPYnNlcnZlcnM6ZnVuY3Rpb24oYSl7dmFyIGIsYz1hLm9ic2VydmU7Zm9yKHZhciBkIGluIGEpIkNoYW5nZWQiPT09ZC5zbGljZSgtNykmJihjfHwoYz1hLm9ic2VydmU9e30pLGI9ZC5zbGljZSgwLC03KSxjW2JdPWNbYl18fGQpfSxleHBsb2RlT2JzZXJ2ZXJzOmZ1bmN0aW9uKGEpe3ZhciBiPWEub2JzZXJ2ZTtpZihiKXt2YXIgYz17fTtmb3IodmFyIGQgaW4gYilmb3IodmFyIGUsZj1kLnNwbGl0KCIgIiksZz0wO2U9ZltnXTtnKyspY1tlXT1iW2RdO2Eub2JzZXJ2ZT1jfX0sb3B0aW1pemVQcm9wZXJ0eU1hcHM6ZnVuY3Rpb24oYSl7aWYoYS5vYnNlcnZlKXt2YXIgYj1hLl9vYnNlcnZlTmFtZXM9W107Zm9yKHZhciBjIGluIGEub2JzZXJ2ZSlmb3IodmFyIGQsZT1jLnNwbGl0KCIgIiksZj0wO2Q9ZVtmXTtmKyspYi5wdXNoKGQpfWlmKGEucHVibGlzaCl7dmFyIGI9YS5fcHVibGlzaE5hbWVzPVtdO2Zvcih2YXIgYyBpbiBhLnB1Ymxpc2gpYi5wdXNoKGMpfWlmKGEuY29tcHV0ZWQpe3ZhciBiPWEuX2NvbXB1dGVkTmFtZXM9W107Zm9yKHZhciBjIGluIGEuY29tcHV0ZWQpYi5wdXNoKGMpfX0scHVibGlzaFByb3BlcnRpZXM6ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLnB1Ymxpc2g7YyYmKHRoaXMucmVxdWlyZVByb3BlcnRpZXMoYyxhLGIpLGEuX3B1Ymxpc2hMQz10aGlzLmxvd2VyQ2FzZU1hcChjKSl9LHJlcXVpcmVQcm9wZXJ0aWVzOmZ1bmN0aW9uKGEsYil7Yi5yZWZsZWN0PWIucmVmbGVjdHx8e307Zm9yKHZhciBjIGluIGEpe3ZhciBkPWFbY107ZCYmdm9pZCAwIT09ZC5yZWZsZWN0JiYoYi5yZWZsZWN0W2NdPUJvb2xlYW4oZC5yZWZsZWN0KSxkPWQudmFsdWUpLHZvaWQgMCE9PWQmJihiW2NdPWQpfX0sbG93ZXJDYXNlTWFwOmZ1bmN0aW9uKGEpe3ZhciBiPXt9O2Zvcih2YXIgYyBpbiBhKWJbYy50b0xvd2VyQ2FzZSgpXT1jO3JldHVybiBifSxjcmVhdGVQcm9wZXJ0eUFjY2Vzc29yOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5wcm90b3R5cGUsZD1hKyJfIixlPWErIk9ic2VydmFibGVfIjtjW2RdPWNbYV0sT2JqZWN0LmRlZmluZVByb3BlcnR5KGMsYSx7Z2V0OmZ1bmN0aW9uKCl7dmFyIGE9dGhpc1tlXTtyZXR1cm4gYSYmYS5kZWxpdmVyKCksdGhpc1tkXX0sc2V0OmZ1bmN0aW9uKGMpe2lmKGIpcmV0dXJuIHRoaXNbZF07dmFyIGY9dGhpc1tlXTtpZihmKXJldHVybiB2b2lkIGYuc2V0VmFsdWUoYyk7dmFyIGc9dGhpc1tkXTtyZXR1cm4gdGhpc1tkXT1jLHRoaXMuZW1pdFByb3BlcnR5Q2hhbmdlUmVjb3JkKGEsYyxnKSxjfSxjb25maWd1cmFibGU6ITB9KX0sY3JlYXRlUHJvcGVydHlBY2Nlc3NvcnM6ZnVuY3Rpb24oYSl7dmFyIGI9YS5fY29tcHV0ZWROYW1lcztpZihiJiZiLmxlbmd0aClmb3IodmFyIGMsZD0wLGU9Yi5sZW5ndGg7ZT5kJiYoYz1iW2RdKTtkKyspdGhpcy5jcmVhdGVQcm9wZXJ0eUFjY2Vzc29yKGMsITApO3ZhciBiPWEuX3B1Ymxpc2hOYW1lcztpZihiJiZiLmxlbmd0aClmb3IodmFyIGMsZD0wLGU9Yi5sZW5ndGg7ZT5kJiYoYz1iW2RdKTtkKyspYS5jb21wdXRlZCYmYS5jb21wdXRlZFtjXXx8dGhpcy5jcmVhdGVQcm9wZXJ0eUFjY2Vzc29yKGMpfX07YS5hcGkuZGVjbGFyYXRpb24ucHJvcGVydGllcz1ifShQb2x5bWVyKSxmdW5jdGlvbihhKXt2YXIgYj0iYXR0cmlidXRlcyIsYz0vXHN8LC8sZD17aW5oZXJpdEF0dHJpYnV0ZXNPYmplY3RzOmZ1bmN0aW9uKGEpe3RoaXMuaW5oZXJpdE9iamVjdChhLCJwdWJsaXNoTEMiKSx0aGlzLmluaGVyaXRPYmplY3QoYSwiX2luc3RhbmNlQXR0cmlidXRlcyIpfSxwdWJsaXNoQXR0cmlidXRlczpmdW5jdGlvbihhKXt2YXIgZD10aGlzLmdldEF0dHJpYnV0ZShiKTtpZihkKWZvcih2YXIgZSxmPWEucHVibGlzaHx8KGEucHVibGlzaD17fSksZz1kLnNwbGl0KGMpLGg9MCxpPWcubGVuZ3RoO2k+aDtoKyspZT1nW2hdLnRyaW0oKSxlJiZ2b2lkIDA9PT1mW2VdJiYoZltlXT12b2lkIDApfSxhY2N1bXVsYXRlSW5zdGFuY2VBdHRyaWJ1dGVzOmZ1bmN0aW9uKCl7Zm9yKHZhciBhLGI9dGhpcy5wcm90b3R5cGUuX2luc3RhbmNlQXR0cmlidXRlcyxjPXRoaXMuYXR0cmlidXRlcyxkPTAsZT1jLmxlbmd0aDtlPmQmJihhPWNbZF0pO2QrKyl0aGlzLmlzSW5zdGFuY2VBdHRyaWJ1dGUoYS5uYW1lKSYmKGJbYS5uYW1lXT1hLnZhbHVlKX0saXNJbnN0YW5jZUF0dHJpYnV0ZTpmdW5jdGlvbihhKXtyZXR1cm4hdGhpcy5ibGFja0xpc3RbYV0mJiJvbi0iIT09YS5zbGljZSgwLDMpfSxibGFja0xpc3Q6e25hbWU6MSwiZXh0ZW5kcyI6MSxjb25zdHJ1Y3RvcjoxLG5vc2NyaXB0OjEsYXNzZXRwYXRoOjEsImNhY2hlLWNzc3RleHQiOjF9fTtkLmJsYWNrTGlzdFtiXT0xLGEuYXBpLmRlY2xhcmF0aW9uLmF0dHJpYnV0ZXM9ZH0oUG9seW1lciksZnVuY3Rpb24oYSl7dmFyIGI9YS5hcGkuZGVjbGFyYXRpb24uZXZlbnRzLGM9bmV3IFBvbHltZXJFeHByZXNzaW9ucyxkPWMucHJlcGFyZUJpbmRpbmc7Yy5wcmVwYXJlQmluZGluZz1mdW5jdGlvbihhLGUsZil7cmV0dXJuIGIucHJlcGFyZUV2ZW50QmluZGluZyhhLGUsZil8fGQuY2FsbChjLGEsZSxmKX07dmFyIGU9e3N5bnRheDpjLGZldGNoVGVtcGxhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5xdWVyeVNlbGVjdG9yKCJ0ZW1wbGF0ZSIpfSx0ZW1wbGF0ZUNvbnRlbnQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmZldGNoVGVtcGxhdGUoKTtyZXR1cm4gYSYmYS5jb250ZW50fSxpbnN0YWxsQmluZGluZ0RlbGVnYXRlOmZ1bmN0aW9uKGEpe2EmJihhLmJpbmRpbmdEZWxlZ2F0ZT10aGlzLnN5bnRheCl9fTthLmFwaS5kZWNsYXJhdGlvbi5tZHY9ZX0oUG9seW1lciksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhKXtpZighT2JqZWN0Ll9fcHJvdG9fXyl7dmFyIGI9T2JqZWN0LmdldFByb3RvdHlwZU9mKGEpO2EuX19wcm90b19fPWIsZChiKSYmKGIuX19wcm90b19fPU9iamVjdC5nZXRQcm90b3R5cGVPZihiKSl9fXZhciBjPWEuYXBpLGQ9YS5pc0Jhc2UsZT1hLmV4dGVuZCxmPXdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCxnPXtyZWdpc3RlcjpmdW5jdGlvbihhLGIpe3RoaXMuYnVpbGRQcm90b3R5cGUoYSxiKSx0aGlzLnJlZ2lzdGVyUHJvdG90eXBlKGEsYiksdGhpcy5wdWJsaXNoQ29uc3RydWN0b3IoKX0sYnVpbGRQcm90b3R5cGU6ZnVuY3Rpb24oYixjKXt2YXIgZD1hLmdldFJlZ2lzdGVyZWRQcm90b3R5cGUoYiksZT10aGlzLmdlbmVyYXRlQmFzZVByb3RvdHlwZShjKTt0aGlzLmRlc3VnYXJCZWZvcmVDaGFpbmluZyhkLGUpLHRoaXMucHJvdG90eXBlPXRoaXMuY2hhaW5Qcm90b3R5cGVzKGQsZSksdGhpcy5kZXN1Z2FyQWZ0ZXJDaGFpbmluZyhiLGMpfSxkZXN1Z2FyQmVmb3JlQ2hhaW5pbmc6ZnVuY3Rpb24oYSxiKXthLmVsZW1lbnQ9dGhpcyx0aGlzLnB1Ymxpc2hBdHRyaWJ1dGVzKGEsYiksdGhpcy5wdWJsaXNoUHJvcGVydGllcyhhLGIpLHRoaXMuaW5mZXJPYnNlcnZlcnMoYSksdGhpcy5leHBsb2RlT2JzZXJ2ZXJzKGEpfSxjaGFpblByb3RvdHlwZXM6ZnVuY3Rpb24oYSxjKXt0aGlzLmluaGVyaXRNZXRhRGF0YShhLGMpO3ZhciBkPXRoaXMuY2hhaW5PYmplY3QoYSxjKTtyZXR1cm4gYihkKSxkfSxpbmhlcml0TWV0YURhdGE6ZnVuY3Rpb24oYSxiKXt0aGlzLmluaGVyaXRPYmplY3QoIm9ic2VydmUiLGEsYiksdGhpcy5pbmhlcml0T2JqZWN0KCJwdWJsaXNoIixhLGIpLHRoaXMuaW5oZXJpdE9iamVjdCgicmVmbGVjdCIsYSxiKSx0aGlzLmluaGVyaXRPYmplY3QoIl9wdWJsaXNoTEMiLGEsYiksdGhpcy5pbmhlcml0T2JqZWN0KCJfaW5zdGFuY2VBdHRyaWJ1dGVzIixhLGIpLHRoaXMuaW5oZXJpdE9iamVjdCgiZXZlbnREZWxlZ2F0ZXMiLGEsYil9LGRlc3VnYXJBZnRlckNoYWluaW5nOmZ1bmN0aW9uKGEsYil7dGhpcy5vcHRpbWl6ZVByb3BlcnR5TWFwcyh0aGlzLnByb3RvdHlwZSksdGhpcy5jcmVhdGVQcm9wZXJ0eUFjY2Vzc29ycyh0aGlzLnByb3RvdHlwZSksdGhpcy5pbnN0YWxsQmluZGluZ0RlbGVnYXRlKHRoaXMuZmV0Y2hUZW1wbGF0ZSgpKSx0aGlzLmluc3RhbGxTaGVldHMoKSx0aGlzLnJlc29sdmVFbGVtZW50UGF0aHModGhpcyksdGhpcy5hY2N1bXVsYXRlSW5zdGFuY2VBdHRyaWJ1dGVzKCksdGhpcy5wYXJzZUhvc3RFdmVudHMoKSx0aGlzLmFkZFJlc29sdmVQYXRoQXBpKCksZiYmUGxhdGZvcm0uU2hhZG93Q1NTLnNoaW1TdHlsaW5nKHRoaXMudGVtcGxhdGVDb250ZW50KCksYSxiKSx0aGlzLnByb3RvdHlwZS5yZWdpc3RlckNhbGxiYWNrJiZ0aGlzLnByb3RvdHlwZS5yZWdpc3RlckNhbGxiYWNrKHRoaXMpfSxwdWJsaXNoQ29uc3RydWN0b3I6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmdldEF0dHJpYnV0ZSgiY29uc3RydWN0b3IiKTthJiYod2luZG93W2FdPXRoaXMuY3Rvcil9LGdlbmVyYXRlQmFzZVByb3RvdHlwZTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmZpbmRCYXNlUHJvdG90eXBlKGEpO2lmKCFiKXt2YXIgYj1IVE1MRWxlbWVudC5nZXRQcm90b3R5cGVGb3JUYWcoYSk7Yj10aGlzLmVuc3VyZUJhc2VBcGkoYiksaFthXT1ifXJldHVybiBifSxmaW5kQmFzZVByb3RvdHlwZTpmdW5jdGlvbihhKXtyZXR1cm4gaFthXX0sZW5zdXJlQmFzZUFwaTpmdW5jdGlvbihhKXtpZihhLlBvbHltZXJCYXNlKXJldHVybiBhO3ZhciBiPU9iamVjdC5jcmVhdGUoYSk7cmV0dXJuIGMucHVibGlzaChjLmluc3RhbmNlLGIpLHRoaXMubWl4aW5NZXRob2QoYixhLGMuaW5zdGFuY2UubWR2LCJiaW5kIiksYn0sbWl4aW5NZXRob2Q6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9ZnVuY3Rpb24oYSl7cmV0dXJuIGJbZF0uYXBwbHkodGhpcyxhKX07YVtkXT1mdW5jdGlvbigpe3JldHVybiB0aGlzLm1peGluU3VwZXI9ZSxjW2RdLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19LGluaGVyaXRPYmplY3Q6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWJbYV18fHt9O2JbYV09dGhpcy5jaGFpbk9iamVjdChkLGNbYV0pfSxyZWdpc3RlclByb3RvdHlwZTpmdW5jdGlvbihhLGIpe3ZhciBjPXtwcm90b3R5cGU6dGhpcy5wcm90b3R5cGV9LGQ9dGhpcy5maW5kVHlwZUV4dGVuc2lvbihiKTtkJiYoYy5leHRlbmRzPWQpLEhUTUxFbGVtZW50LnJlZ2lzdGVyKGEsdGhpcy5wcm90b3R5cGUpLHRoaXMuY3Rvcj1kb2N1bWVudC5yZWdpc3RlckVsZW1lbnQoYSxjKX0sZmluZFR5cGVFeHRlbnNpb246ZnVuY3Rpb24oYSl7aWYoYSYmYS5pbmRleE9mKCItIik8MClyZXR1cm4gYTt2YXIgYj10aGlzLmZpbmRCYXNlUHJvdG90eXBlKGEpO3JldHVybiBiLmVsZW1lbnQ/dGhpcy5maW5kVHlwZUV4dGVuc2lvbihiLmVsZW1lbnQuZXh0ZW5kcyk6dm9pZCAwfX0saD17fTtnLmNoYWluT2JqZWN0PU9iamVjdC5fX3Byb3RvX18/ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYSYmYiYmYSE9PWImJihhLl9fcHJvdG9fXz1iKSxhfTpmdW5jdGlvbihhLGIpe2lmKGEmJmImJmEhPT1iKXt2YXIgYz1PYmplY3QuY3JlYXRlKGIpO2E9ZShjLGEpfXJldHVybiBhfSxjLmRlY2xhcmF0aW9uLnByb3RvdHlwZT1nfShQb2x5bWVyKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEpe3JldHVybiBkb2N1bWVudC5jb250YWlucyhhKT9qOml9ZnVuY3Rpb24gYygpe3JldHVybiBpLmxlbmd0aD9pWzBdOmpbMF19ZnVuY3Rpb24gZChhKXtmLndhaXRUb1JlYWR5PSEwLFBsYXRmb3JtLmVuZE9mTWljcm90YXNrKGZ1bmN0aW9uKCl7SFRNTEltcG9ydHMud2hlblJlYWR5KGZ1bmN0aW9uKCl7Zi5hZGRSZWFkeUNhbGxiYWNrKGEpLGYud2FpdFRvUmVhZHk9ITEsZi5jaGVjaygpfSl9KX1mdW5jdGlvbiBlKGEpe2lmKHZvaWQgMD09PWEpcmV0dXJuIHZvaWQgZi5yZWFkeSgpO3ZhciBiPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtmLnJlYWR5KCl9LGEpO1BvbHltZXIud2hlblJlYWR5KGZ1bmN0aW9uKCl7Y2xlYXJUaW1lb3V0KGIpfSl9dmFyIGY9e3dhaXQ6ZnVuY3Rpb24oYSl7YS5fX3F1ZXVlfHwoYS5fX3F1ZXVlPXt9LGcucHVzaChhKSl9LGVucXVldWU6ZnVuY3Rpb24oYSxjLGQpe3ZhciBlPWEuX19xdWV1ZSYmIWEuX19xdWV1ZS5jaGVjaztyZXR1cm4gZSYmKGIoYSkucHVzaChhKSxhLl9fcXVldWUuY2hlY2s9YyxhLl9fcXVldWUuZ289ZCksMCE9PXRoaXMuaW5kZXhPZihhKX0saW5kZXhPZjpmdW5jdGlvbihhKXt2YXIgYz1iKGEpLmluZGV4T2YoYSk7cmV0dXJuIGM+PTAmJmRvY3VtZW50LmNvbnRhaW5zKGEpJiYoYys9SFRNTEltcG9ydHMudXNlTmF0aXZlfHxIVE1MSW1wb3J0cy5yZWFkeT9pLmxlbmd0aDoxZTkpLGN9LGdvOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMucmVtb3ZlKGEpO2ImJihhLl9fcXVldWUuZmx1c2hhYmxlPSEwLHRoaXMuYWRkVG9GbHVzaFF1ZXVlKGIpLHRoaXMuY2hlY2soKSl9LHJlbW92ZTpmdW5jdGlvbihhKXt2YXIgYz10aGlzLmluZGV4T2YoYSk7aWYoMD09PWMpcmV0dXJuIGIoYSkuc2hpZnQoKX0sY2hlY2s6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm5leHRFbGVtZW50KCk7cmV0dXJuIGEmJmEuX19xdWV1ZS5jaGVjay5jYWxsKGEpLHRoaXMuY2FuUmVhZHkoKT8odGhpcy5yZWFkeSgpLCEwKTp2b2lkIDB9LG5leHRFbGVtZW50OmZ1bmN0aW9uKCl7cmV0dXJuIGMoKX0sY2FuUmVhZHk6ZnVuY3Rpb24oKXtyZXR1cm4hdGhpcy53YWl0VG9SZWFkeSYmdGhpcy5pc0VtcHR5KCl9LGlzRW1wdHk6ZnVuY3Rpb24oKXtmb3IodmFyIGEsYj0wLGM9Zy5sZW5ndGg7Yz5iJiYoYT1nW2JdKTtiKyspaWYoYS5fX3F1ZXVlJiYhYS5fX3F1ZXVlLmZsdXNoYWJsZSlyZXR1cm47cmV0dXJuITB9LGFkZFRvRmx1c2hRdWV1ZTpmdW5jdGlvbihhKXtoLnB1c2goYSl9LGZsdXNoOmZ1bmN0aW9uKCl7aWYoIXRoaXMuZmx1c2hpbmcpe3RoaXMuZmx1c2hpbmc9ITA7Zm9yKHZhciBhO2gubGVuZ3RoOylhPWguc2hpZnQoKSxhLl9fcXVldWUuZ28uY2FsbChhKSxhLl9fcXVldWU9bnVsbDt0aGlzLmZsdXNoaW5nPSExfX0scmVhZHk6ZnVuY3Rpb24oKXt2YXIgYT1DdXN0b21FbGVtZW50cy5yZWFkeTtDdXN0b21FbGVtZW50cy5yZWFkeT0hMSx0aGlzLmZsdXNoKCksQ3VzdG9tRWxlbWVudHMudXNlTmF0aXZlfHxDdXN0b21FbGVtZW50cy51cGdyYWRlRG9jdW1lbnRUcmVlKGRvY3VtZW50KSxDdXN0b21FbGVtZW50cy5yZWFkeT1hLFBsYXRmb3JtLmZsdXNoKCkscmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRoaXMuZmx1c2hSZWFkeUNhbGxiYWNrcyl9LGFkZFJlYWR5Q2FsbGJhY2s6ZnVuY3Rpb24oYSl7YSYmay5wdXNoKGEpfSxmbHVzaFJlYWR5Q2FsbGJhY2tzOmZ1bmN0aW9uKCl7aWYoaylmb3IodmFyIGE7ay5sZW5ndGg7KShhPWsuc2hpZnQoKSkoKX0sd2FpdGluZ0ZvcjpmdW5jdGlvbigpe2Zvcih2YXIgYSxiPVtdLGM9MCxkPWcubGVuZ3RoO2Q+YyYmKGE9Z1tjXSk7YysrKWEuX19xdWV1ZSYmIWEuX19xdWV1ZS5mbHVzaGFibGUmJmIucHVzaChhKTtyZXR1cm4gYn0sd2FpdFRvUmVhZHk6ITB9LGc9W10saD1bXSxpPVtdLGo9W10saz1bXTthLmVsZW1lbnRzPWcsYS53YWl0aW5nRm9yPWYud2FpdGluZ0Zvci5iaW5kKGYpLGEuZm9yY2VSZWFkeT1lLGEucXVldWU9ZixhLndoZW5SZWFkeT1hLndoZW5Qb2x5bWVyUmVhZHk9ZH0oUG9seW1lciksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhKXtyZXR1cm4gQm9vbGVhbihIVE1MRWxlbWVudC5nZXRQcm90b3R5cGVGb3JUYWcoYSkpfWZ1bmN0aW9uIGMoYSl7cmV0dXJuIGEmJmEuaW5kZXhPZigiLSIpPj0wfXZhciBkPWEuZXh0ZW5kLGU9YS5hcGksZj1hLnF1ZXVlLGc9YS53aGVuUmVhZHksaD1hLmdldFJlZ2lzdGVyZWRQcm90b3R5cGUsaT1hLndhaXRpbmdGb3JQcm90b3R5cGUsaj1kKE9iamVjdC5jcmVhdGUoSFRNTEVsZW1lbnQucHJvdG90eXBlKSx7Y3JlYXRlZENhbGxiYWNrOmZ1bmN0aW9uKCl7dGhpcy5nZXRBdHRyaWJ1dGUoIm5hbWUiKSYmdGhpcy5pbml0KCl9LGluaXQ6ZnVuY3Rpb24oKXt0aGlzLm5hbWU9dGhpcy5nZXRBdHRyaWJ1dGUoIm5hbWUiKSx0aGlzLmV4dGVuZHM9dGhpcy5nZXRBdHRyaWJ1dGUoImV4dGVuZHMiKSxmLndhaXQodGhpcyksdGhpcy5sb2FkUmVzb3VyY2VzKCksdGhpcy5yZWdpc3RlcldoZW5SZWFkeSgpfSxyZWdpc3RlcldoZW5SZWFkeTpmdW5jdGlvbigpe3RoaXMucmVnaXN0ZXJlZHx8dGhpcy53YWl0aW5nRm9yUHJvdG90eXBlKHRoaXMubmFtZSl8fHRoaXMud2FpdGluZ0ZvclF1ZXVlKCl8fHRoaXMud2FpdGluZ0ZvclJlc291cmNlcygpfHxmLmdvKHRoaXMpfSxfcmVnaXN0ZXI6ZnVuY3Rpb24oKXtjKHRoaXMuZXh0ZW5kcykmJiFiKHRoaXMuZXh0ZW5kcykmJmNvbnNvbGUud2FybigiJXMgaXMgYXR0ZW1wdGluZyB0byBleHRlbmQgJXMsIGFuIHVucmVnaXN0ZXJlZCBlbGVtZW50IG9yIG9uZSB0aGF0IHdhcyBub3QgcmVnaXN0ZXJlZCB3aXRoIFBvbHltZXIuIix0aGlzLm5hbWUsdGhpcy5leHRlbmRzKSx0aGlzLnJlZ2lzdGVyKHRoaXMubmFtZSx0aGlzLmV4dGVuZHMpLHRoaXMucmVnaXN0ZXJlZD0hMH0sd2FpdGluZ0ZvclByb3RvdHlwZTpmdW5jdGlvbihhKXtyZXR1cm4gaChhKT92b2lkIDA6KGkoYSx0aGlzKSx0aGlzLmhhbmRsZU5vU2NyaXB0KGEpLCEwKX0saGFuZGxlTm9TY3JpcHQ6ZnVuY3Rpb24oYSl7dGhpcy5oYXNBdHRyaWJ1dGUoIm5vc2NyaXB0IikmJiF0aGlzLm5vc2NyaXB0JiYodGhpcy5ub3NjcmlwdD0hMCxQb2x5bWVyKGEpKX0sd2FpdGluZ0ZvclJlc291cmNlczpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9uZWVkc1Jlc291cmNlc30sd2FpdGluZ0ZvclF1ZXVlOmZ1bmN0aW9uKCl7cmV0dXJuIGYuZW5xdWV1ZSh0aGlzLHRoaXMucmVnaXN0ZXJXaGVuUmVhZHksdGhpcy5fcmVnaXN0ZXIpfSxsb2FkUmVzb3VyY2VzOmZ1bmN0aW9uKCl7dGhpcy5fbmVlZHNSZXNvdXJjZXM9ITAsdGhpcy5sb2FkU3R5bGVzKGZ1bmN0aW9uKCl7dGhpcy5fbmVlZHNSZXNvdXJjZXM9ITEsdGhpcy5yZWdpc3RlcldoZW5SZWFkeSgpfS5iaW5kKHRoaXMpKX19KTtlLnB1Ymxpc2goZS5kZWNsYXJhdGlvbixqKSxnKGZ1bmN0aW9uKCl7ZG9jdW1lbnQuYm9keS5yZW1vdmVBdHRyaWJ1dGUoInVucmVzb2x2ZWQiKSxkb2N1bWVudC5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgicG9seW1lci1yZWFkeSIse2J1YmJsZXM6ITB9KSl9KSxkb2N1bWVudC5yZWdpc3RlckVsZW1lbnQoInBvbHltZXItZWxlbWVudCIse3Byb3RvdHlwZTpqfSl9KFBvbHltZXIpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSxiKXthPyhkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKGEpLGQoYikpOmImJmIoKX1mdW5jdGlvbiBjKGEsYyl7aWYoYSYmYS5sZW5ndGgpe2Zvcih2YXIgZCxlLGY9ZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLGc9MCxoPWEubGVuZ3RoO2g+ZyYmKGQ9YVtnXSk7ZysrKWU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgibGluayIpLGUucmVsPSJpbXBvcnQiLGUuaHJlZj1kLGYuYXBwZW5kQ2hpbGQoZSk7YihmLGMpfWVsc2UgYyYmYygpfXZhciBkPWEud2hlblBvbHltZXJSZWFkeTthLmltcG9ydD1jLGEuaW1wb3J0RWxlbWVudHM9Yn0oUG9seW1lciksZnVuY3Rpb24oKXt2YXIgYT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJwb2x5bWVyLWVsZW1lbnQiKTthLnNldEF0dHJpYnV0ZSgibmFtZSIsImF1dG8tYmluZGluZyIpLGEuc2V0QXR0cmlidXRlKCJleHRlbmRzIiwidGVtcGxhdGUiKSxhLmluaXQoKSxQb2x5bWVyKCJhdXRvLWJpbmRpbmciLHtjcmVhdGVkQ2FsbGJhY2s6ZnVuY3Rpb24oKXt0aGlzLnN5bnRheD10aGlzLmJpbmRpbmdEZWxlZ2F0ZT10aGlzLm1ha2VTeW50YXgoKSxQb2x5bWVyLndoZW5Qb2x5bWVyUmVhZHkoZnVuY3Rpb24oKXt0aGlzLm1vZGVsPXRoaXMsdGhpcy5zZXRBdHRyaWJ1dGUoImJpbmQiLCIiKSx0aGlzLmFzeW5jKGZ1bmN0aW9uKCl7dGhpcy5tYXJzaGFsTm9kZVJlZmVyZW5jZXModGhpcy5wYXJlbnROb2RlKSx0aGlzLmZpcmUoInRlbXBsYXRlLWJvdW5kIil9KX0uYmluZCh0aGlzKSl9LG1ha2VTeW50YXg6ZnVuY3Rpb24oKXt2YXIgYT1PYmplY3QuY3JlYXRlKFBvbHltZXIuYXBpLmRlY2xhcmF0aW9uLmV2ZW50cyksYj10aGlzO2EuZmluZENvbnRyb2xsZXI9ZnVuY3Rpb24oKXtyZXR1cm4gYi5tb2RlbH07dmFyIGM9bmV3IFBvbHltZXJFeHByZXNzaW9ucyxkPWMucHJlcGFyZUJpbmRpbmc7cmV0dXJuIGMucHJlcGFyZUJpbmRpbmc9ZnVuY3Rpb24oYixlLGYpe3JldHVybiBhLnByZXBhcmVFdmVudEJpbmRpbmcoYixlLGYpfHxkLmNhbGwoYyxiLGUsZil9LGN9fSl9KCk7Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPXBvbHltZXIuanMubWFw",
                "body": "LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAoYykgMjAxNCBUaGUgUG9seW1lciBQcm9qZWN0IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuCiAqIFRoaXMgY29kZSBtYXkgb25seSBiZSB1c2VkIHVuZGVyIHRoZSBCU0Qgc3R5bGUgbGljZW5zZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vTElDRU5TRS50eHQKICogVGhlIGNvbXBsZXRlIHNldCBvZiBhdXRob3JzIG1heSBiZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQVVUSE9SUy50eHQKICogVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9DT05UUklCVVRPUlMudHh0CiAqIENvZGUgZGlzdHJpYnV0ZWQgYnkgR29vZ2xlIGFzIHBhcnQgb2YgdGhlIHBvbHltZXIgcHJvamVjdCBpcyBhbHNvCiAqIHN1YmplY3QgdG8gYW4gYWRkaXRpb25hbCBJUCByaWdodHMgZ3JhbnQgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL1BBVEVOVFMudHh0CiAqLwovLyBAdmVyc2lvbjogMC40LjIKd2luZG93LlBvbHltZXJHZXN0dXJlcz17fSxmdW5jdGlvbihhKXt2YXIgYj0hMSxjPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIm1ldGEiKTtpZihjLmNyZWF0ZVNoYWRvd1Jvb3Qpe3ZhciBkPWMuY3JlYXRlU2hhZG93Um9vdCgpLGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3BhbiIpO2QuYXBwZW5kQ2hpbGQoZSksYy5hZGRFdmVudExpc3RlbmVyKCJ0ZXN0cGF0aCIsZnVuY3Rpb24oYSl7YS5wYXRoJiYoYj1hLnBhdGhbMF09PT1lKSxhLnN0b3BQcm9wYWdhdGlvbigpfSk7dmFyIGY9bmV3IEN1c3RvbUV2ZW50KCJ0ZXN0cGF0aCIse2J1YmJsZXM6ITB9KTtkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKGMpLGUuZGlzcGF0Y2hFdmVudChmKSxjLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYyksZD1lPW51bGx9Yz1udWxsO3ZhciBnPXtzaGFkb3c6ZnVuY3Rpb24oYSl7cmV0dXJuIGE/YS5zaGFkb3dSb290fHxhLndlYmtpdFNoYWRvd1Jvb3Q6dm9pZCAwfSxjYW5UYXJnZXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGEmJkJvb2xlYW4oYS5lbGVtZW50RnJvbVBvaW50KX0sdGFyZ2V0aW5nU2hhZG93OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuc2hhZG93KGEpO3JldHVybiB0aGlzLmNhblRhcmdldChiKT9iOnZvaWQgMH0sb2xkZXJTaGFkb3c6ZnVuY3Rpb24oYSl7dmFyIGI9YS5vbGRlclNoYWRvd1Jvb3Q7aWYoIWIpe3ZhciBjPWEucXVlcnlTZWxlY3Rvcigic2hhZG93Iik7YyYmKGI9Yy5vbGRlclNoYWRvd1Jvb3QpfXJldHVybiBifSxhbGxTaGFkb3dzOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1bXSxjPXRoaXMuc2hhZG93KGEpO2M7KWIucHVzaChjKSxjPXRoaXMub2xkZXJTaGFkb3coYyk7cmV0dXJuIGJ9LHNlYXJjaFJvb3Q6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGU7cmV0dXJuIGE/KGQ9YS5lbGVtZW50RnJvbVBvaW50KGIsYyksZD9lPXRoaXMudGFyZ2V0aW5nU2hhZG93KGQpOmEhPT1kb2N1bWVudCYmKGU9dGhpcy5vbGRlclNoYWRvdyhhKSksdGhpcy5zZWFyY2hSb290KGUsYixjKXx8ZCk6dm9pZCAwfSxvd25lcjpmdW5jdGlvbihhKXtpZighYSlyZXR1cm4gZG9jdW1lbnQ7Zm9yKHZhciBiPWE7Yi5wYXJlbnROb2RlOyliPWIucGFyZW50Tm9kZTtyZXR1cm4gYi5ub2RlVHlwZSE9Tm9kZS5ET0NVTUVOVF9OT0RFJiZiLm5vZGVUeXBlIT1Ob2RlLkRPQ1VNRU5UX0ZSQUdNRU5UX05PREUmJihiPWRvY3VtZW50KSxifSxmaW5kVGFyZ2V0OmZ1bmN0aW9uKGEpe2lmKGImJmEucGF0aCYmYS5wYXRoLmxlbmd0aClyZXR1cm4gYS5wYXRoWzBdO3ZhciBjPWEuY2xpZW50WCxkPWEuY2xpZW50WSxlPXRoaXMub3duZXIoYS50YXJnZXQpO3JldHVybiBlLmVsZW1lbnRGcm9tUG9pbnQoYyxkKXx8KGU9ZG9jdW1lbnQpLHRoaXMuc2VhcmNoUm9vdChlLGMsZCl9LGZpbmRUb3VjaEFjdGlvbjpmdW5jdGlvbihhKXt2YXIgYztpZihiJiZhLnBhdGgmJmEucGF0aC5sZW5ndGgpe2Zvcih2YXIgZD1hLnBhdGgsZT0wO2U8ZC5sZW5ndGg7ZSsrKWlmKGM9ZFtlXSxjLm5vZGVUeXBlPT09Tm9kZS5FTEVNRU5UX05PREUmJmMuaGFzQXR0cmlidXRlKCJ0b3VjaC1hY3Rpb24iKSlyZXR1cm4gYy5nZXRBdHRyaWJ1dGUoInRvdWNoLWFjdGlvbiIpfWVsc2UgZm9yKGM9YS50YXJnZXQ7Yzspe2lmKGMubm9kZVR5cGU9PT1Ob2RlLkVMRU1FTlRfTk9ERSYmYy5oYXNBdHRyaWJ1dGUoInRvdWNoLWFjdGlvbiIpKXJldHVybiBjLmdldEF0dHJpYnV0ZSgidG91Y2gtYWN0aW9uIik7Yz1jLnBhcmVudE5vZGV8fGMuaG9zdH1yZXR1cm4iYXV0byJ9LExDQTpmdW5jdGlvbihhLGIpe2lmKGE9PT1iKXJldHVybiBhO2lmKGEmJiFiKXJldHVybiBhO2lmKGImJiFhKXJldHVybiBiO2lmKCFiJiYhYSlyZXR1cm4gZG9jdW1lbnQ7aWYoYS5jb250YWlucyYmYS5jb250YWlucyhiKSlyZXR1cm4gYTtpZihiLmNvbnRhaW5zJiZiLmNvbnRhaW5zKGEpKXJldHVybiBiO3ZhciBjPXRoaXMuZGVwdGgoYSksZD10aGlzLmRlcHRoKGIpLGU9Yy1kO2ZvcihlPj0wP2E9dGhpcy53YWxrKGEsZSk6Yj10aGlzLndhbGsoYiwtZSk7YSYmYiYmYSE9PWI7KWE9YS5wYXJlbnROb2RlfHxhLmhvc3QsYj1iLnBhcmVudE5vZGV8fGIuaG9zdDtyZXR1cm4gYX0sd2FsazpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz0wO2EmJmI+YztjKyspYT1hLnBhcmVudE5vZGV8fGEuaG9zdDtyZXR1cm4gYX0sZGVwdGg6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPTA7YTspYisrLGE9YS5wYXJlbnROb2RlfHxhLmhvc3Q7cmV0dXJuIGJ9LGRlZXBDb250YWluczpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuTENBKGEsYik7cmV0dXJuIGM9PT1hfSxpbnNpZGVOb2RlOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD1hLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO3JldHVybiBkLmxlZnQ8PWImJmI8PWQucmlnaHQmJmQudG9wPD1jJiZjPD1kLmJvdHRvbX0scGF0aDpmdW5jdGlvbihhKXt2YXIgYztpZihiJiZhLnBhdGgmJmEucGF0aC5sZW5ndGgpYz1hLnBhdGg7ZWxzZXtjPVtdO2Zvcih2YXIgZD10aGlzLmZpbmRUYXJnZXQoYSk7ZDspYy5wdXNoKGQpLGQ9ZC5wYXJlbnROb2RlfHxkLmhvc3R9cmV0dXJuIGN9fTthLnRhcmdldEZpbmRpbmc9ZyxhLmZpbmRUYXJnZXQ9Zy5maW5kVGFyZ2V0LmJpbmQoZyksYS5kZWVwQ29udGFpbnM9Zy5kZWVwQ29udGFpbnMuYmluZChnKSxhLmluc2lkZU5vZGU9Zy5pbnNpZGVOb2RlfSh3aW5kb3cuUG9seW1lckdlc3R1cmVzKSxmdW5jdGlvbigpe2Z1bmN0aW9uIGEoYSl7cmV0dXJuImh0bWwgL2RlZXAvICIrYihhKX1mdW5jdGlvbiBiKGEpe3JldHVybidbdG91Y2gtYWN0aW9uPSInK2ErJyJdJ31mdW5jdGlvbiBjKGEpe3JldHVybiJ7IC1tcy10b3VjaC1hY3Rpb246ICIrYSsiOyB0b3VjaC1hY3Rpb246ICIrYSsiO30ifXZhciBkPVsibm9uZSIsImF1dG8iLCJwYW4teCIsInBhbi15Iix7cnVsZToicGFuLXggcGFuLXkiLHNlbGVjdG9yczpbInBhbi14IHBhbi15IiwicGFuLXkgcGFuLXgiXX0sIm1hbmlwdWxhdGlvbiJdLGU9IiIsZj0ic3RyaW5nIj09dHlwZW9mIGRvY3VtZW50LmhlYWQuc3R5bGUudG91Y2hBY3Rpb24sZz0hd2luZG93LlNoYWRvd0RPTVBvbHlmaWxsJiZkb2N1bWVudC5oZWFkLmNyZWF0ZVNoYWRvd1Jvb3Q7aWYoZil7ZC5mb3JFYWNoKGZ1bmN0aW9uKGQpe1N0cmluZyhkKT09PWQ/KGUrPWIoZCkrYyhkKSsiXG4iLGcmJihlKz1hKGQpK2MoZCkrIlxuIikpOihlKz1kLnNlbGVjdG9ycy5tYXAoYikrYyhkLnJ1bGUpKyJcbiIsZyYmKGUrPWQuc2VsZWN0b3JzLm1hcChhKStjKGQucnVsZSkrIlxuIikpfSk7dmFyIGg9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3R5bGUiKTtoLnRleHRDb250ZW50PWUsZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChoKX19KCksZnVuY3Rpb24oYSl7dmFyIGI9WyJidWJibGVzIiwiY2FuY2VsYWJsZSIsInZpZXciLCJkZXRhaWwiLCJzY3JlZW5YIiwic2NyZWVuWSIsImNsaWVudFgiLCJjbGllbnRZIiwiY3RybEtleSIsImFsdEtleSIsInNoaWZ0S2V5IiwibWV0YUtleSIsImJ1dHRvbiIsInJlbGF0ZWRUYXJnZXQiLCJwYWdlWCIsInBhZ2VZIl0sYz1bITEsITEsbnVsbCxudWxsLDAsMCwwLDAsITEsITEsITEsITEsMCxudWxsLDAsMF0sZD1mdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbigpe319LGU9e3ByZXZlbnRUYXA6ZCxtYWtlQmFzZUV2ZW50OmZ1bmN0aW9uKGEsYil7dmFyIGM9ZG9jdW1lbnQuY3JlYXRlRXZlbnQoIkV2ZW50Iik7cmV0dXJuIGMuaW5pdEV2ZW50KGEsYi5idWJibGVzfHwhMSxiLmNhbmNlbGFibGV8fCExKSxjLnByZXZlbnRUYXA9ZS5wcmV2ZW50VGFwKGMpLGN9LG1ha2VHZXN0dXJlRXZlbnQ6ZnVuY3Rpb24oYSxiKXtiPWJ8fE9iamVjdC5jcmVhdGUobnVsbCk7Zm9yKHZhciBjLGQ9dGhpcy5tYWtlQmFzZUV2ZW50KGEsYiksZT0wLGY9T2JqZWN0LmtleXMoYik7ZTxmLmxlbmd0aDtlKyspYz1mW2VdLGRbY109YltjXTtyZXR1cm4gZH0sbWFrZVBvaW50ZXJFdmVudDpmdW5jdGlvbihhLGQpe2Q9ZHx8T2JqZWN0LmNyZWF0ZShudWxsKTtmb3IodmFyIGUsZj10aGlzLm1ha2VCYXNlRXZlbnQoYSxkKSxnPTA7ZzxiLmxlbmd0aDtnKyspZT1iW2ddLGZbZV09ZFtlXXx8Y1tnXTtmLmJ1dHRvbnM9ZC5idXR0b25zfHwwO3ZhciBoPTA7cmV0dXJuIGg9ZC5wcmVzc3VyZT9kLnByZXNzdXJlOmYuYnV0dG9ucz8uNTowLGYueD1mLmNsaWVudFgsZi55PWYuY2xpZW50WSxmLnBvaW50ZXJJZD1kLnBvaW50ZXJJZHx8MCxmLndpZHRoPWQud2lkdGh8fDAsZi5oZWlnaHQ9ZC5oZWlnaHR8fDAsZi5wcmVzc3VyZT1oLGYudGlsdFg9ZC50aWx0WHx8MCxmLnRpbHRZPWQudGlsdFl8fDAsZi5wb2ludGVyVHlwZT1kLnBvaW50ZXJUeXBlfHwiIixmLmh3VGltZXN0YW1wPWQuaHdUaW1lc3RhbXB8fDAsZi5pc1ByaW1hcnk9ZC5pc1ByaW1hcnl8fCExLGYuX3NvdXJjZT1kLl9zb3VyY2V8fCIiLGZ9fTthLmV2ZW50RmFjdG9yeT1lfSh3aW5kb3cuUG9seW1lckdlc3R1cmVzKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKCl7aWYoYyl7dmFyIGE9bmV3IE1hcDtyZXR1cm4gYS5wb2ludGVycz1kLGF9dGhpcy5rZXlzPVtdLHRoaXMudmFsdWVzPVtdfXZhciBjPXdpbmRvdy5NYXAmJndpbmRvdy5NYXAucHJvdG90eXBlLmZvckVhY2gsZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnNpemV9O2IucHJvdG90eXBlPXtzZXQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmtleXMuaW5kZXhPZihhKTtjPi0xP3RoaXMudmFsdWVzW2NdPWI6KHRoaXMua2V5cy5wdXNoKGEpLHRoaXMudmFsdWVzLnB1c2goYikpfSxoYXM6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMua2V5cy5pbmRleE9mKGEpPi0xfSwiZGVsZXRlIjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmtleXMuaW5kZXhPZihhKTtiPi0xJiYodGhpcy5rZXlzLnNwbGljZShiLDEpLHRoaXMudmFsdWVzLnNwbGljZShiLDEpKX0sZ2V0OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMua2V5cy5pbmRleE9mKGEpO3JldHVybiB0aGlzLnZhbHVlc1tiXX0sY2xlYXI6ZnVuY3Rpb24oKXt0aGlzLmtleXMubGVuZ3RoPTAsdGhpcy52YWx1ZXMubGVuZ3RoPTB9LGZvckVhY2g6ZnVuY3Rpb24oYSxiKXt0aGlzLnZhbHVlcy5mb3JFYWNoKGZ1bmN0aW9uKGMsZCl7YS5jYWxsKGIsYyx0aGlzLmtleXNbZF0sdGhpcyl9LHRoaXMpfSxwb2ludGVyczpmdW5jdGlvbigpe3JldHVybiB0aGlzLmtleXMubGVuZ3RofX0sYS5Qb2ludGVyTWFwPWJ9KHdpbmRvdy5Qb2x5bWVyR2VzdHVyZXMpLGZ1bmN0aW9uKGEpe3ZhciBiLGM9WyJidWJibGVzIiwiY2FuY2VsYWJsZSIsInZpZXciLCJkZXRhaWwiLCJzY3JlZW5YIiwic2NyZWVuWSIsImNsaWVudFgiLCJjbGllbnRZIiwiY3RybEtleSIsImFsdEtleSIsInNoaWZ0S2V5IiwibWV0YUtleSIsImJ1dHRvbiIsInJlbGF0ZWRUYXJnZXQiLCJidXR0b25zIiwicG9pbnRlcklkIiwid2lkdGgiLCJoZWlnaHQiLCJwcmVzc3VyZSIsInRpbHRYIiwidGlsdFkiLCJwb2ludGVyVHlwZSIsImh3VGltZXN0YW1wIiwiaXNQcmltYXJ5IiwidHlwZSIsInRhcmdldCIsImN1cnJlbnRUYXJnZXQiLCJ3aGljaCIsInBhZ2VYIiwicGFnZVkiLCJ0aW1lU3RhbXAiLCJwcmV2ZW50VGFwIiwidGFwUHJldmVudGVkIiwiX3NvdXJjZSJdLGQ9WyExLCExLG51bGwsbnVsbCwwLDAsMCwwLCExLCExLCExLCExLDAsbnVsbCwwLDAsMCwwLDAsMCwwLCIiLDAsITEsIiIsbnVsbCxudWxsLDAsMCwwLDAsZnVuY3Rpb24oKXt9LCExXSxlPSJ1bmRlZmluZWQiIT10eXBlb2YgU1ZHRWxlbWVudEluc3RhbmNlLGY9YS5ldmVudEZhY3RvcnksZz17SVNfSU9TOiExLHBvaW50ZXJtYXA6bmV3IGEuUG9pbnRlck1hcCxyZXF1aXJlZEdlc3R1cmVzOm5ldyBhLlBvaW50ZXJNYXAsZXZlbnRNYXA6T2JqZWN0LmNyZWF0ZShudWxsKSxldmVudFNvdXJjZXM6T2JqZWN0LmNyZWF0ZShudWxsKSxldmVudFNvdXJjZUxpc3Q6W10sZ2VzdHVyZXM6W10sZGVwZW5kZW5jeU1hcDp7ZG93bjp7bGlzdGVuZXJzOjAsaW5kZXg6LTF9LHVwOntsaXN0ZW5lcnM6MCxpbmRleDotMX19LGdlc3R1cmVRdWV1ZTpbXSxyZWdpc3RlclNvdXJjZTpmdW5jdGlvbihhLGIpe3ZhciBjPWIsZD1jLmV2ZW50cztkJiYoZC5mb3JFYWNoKGZ1bmN0aW9uKGEpe2NbYV0mJih0aGlzLmV2ZW50TWFwW2FdPWNbYV0uYmluZChjKSl9LHRoaXMpLHRoaXMuZXZlbnRTb3VyY2VzW2FdPWMsdGhpcy5ldmVudFNvdXJjZUxpc3QucHVzaChjKSl9LHJlZ2lzdGVyR2VzdHVyZTpmdW5jdGlvbihhLGIpe3ZhciBjPU9iamVjdC5jcmVhdGUobnVsbCk7Yy5saXN0ZW5lcnM9MCxjLmluZGV4PXRoaXMuZ2VzdHVyZXMubGVuZ3RoO2Zvcih2YXIgZCxlPTA7ZTxiLmV4cG9zZXMubGVuZ3RoO2UrKylkPWIuZXhwb3Nlc1tlXS50b0xvd2VyQ2FzZSgpLHRoaXMuZGVwZW5kZW5jeU1hcFtkXT1jO3RoaXMuZ2VzdHVyZXMucHVzaChiKX0scmVnaXN0ZXI6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGMsZD10aGlzLmV2ZW50U291cmNlTGlzdC5sZW5ndGgsZT0wO2Q+ZSYmKGM9dGhpcy5ldmVudFNvdXJjZUxpc3RbZV0pO2UrKyljLnJlZ2lzdGVyLmNhbGwoYyxhLGIpfSx1bnJlZ2lzdGVyOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYixjPXRoaXMuZXZlbnRTb3VyY2VMaXN0Lmxlbmd0aCxkPTA7Yz5kJiYoYj10aGlzLmV2ZW50U291cmNlTGlzdFtkXSk7ZCsrKWIudW5yZWdpc3Rlci5jYWxsKGIsYSl9LGRvd246ZnVuY3Rpb24oYSl7dGhpcy5yZXF1aXJlZEdlc3R1cmVzLnNldChhLnBvaW50ZXJJZCxiKSx0aGlzLmZpcmVFdmVudCgiZG93biIsYSl9LG1vdmU6ZnVuY3Rpb24oYSl7YS50eXBlPSJtb3ZlIix0aGlzLmZpbGxHZXN0dXJlUXVldWUoYSl9LHVwOmZ1bmN0aW9uKGEpe3RoaXMuZmlyZUV2ZW50KCJ1cCIsYSksdGhpcy5yZXF1aXJlZEdlc3R1cmVzLmRlbGV0ZShhLnBvaW50ZXJJZCl9LGNhbmNlbDpmdW5jdGlvbihhKXthLnRhcFByZXZlbnRlZD0hMCx0aGlzLmZpcmVFdmVudCgidXAiLGEpLHRoaXMucmVxdWlyZWRHZXN0dXJlcy5kZWxldGUoYS5wb2ludGVySWQpfSxhZGRHZXN0dXJlRGVwZW5kZW5jeTpmdW5jdGlvbihhLGIpe3ZhciBjPWEuX3BnRXZlbnRzO2lmKGMpZm9yKHZhciBkLGUsZixnPU9iamVjdC5rZXlzKGMpLGg9MDtoPGcubGVuZ3RoO2grKylmPWdbaF0sY1tmXT4wJiYoZD10aGlzLmRlcGVuZGVuY3lNYXBbZl0sZT1kP2QuaW5kZXg6LTEsYltlXT0hMCl9LGV2ZW50SGFuZGxlcjpmdW5jdGlvbihjKXt2YXIgZD1jLnR5cGU7aWYoInRvdWNoc3RhcnQiPT09ZHx8Im1vdXNlZG93biI9PT1kfHwicG9pbnRlcmRvd24iPT09ZHx8Ik1TUG9pbnRlckRvd24iPT09ZClpZihjLl9oYW5kbGVkQnlQR3x8KGI9e30pLHRoaXMuSVNfSU9TKWZvcih2YXIgZSxmPWEudGFyZ2V0RmluZGluZy5wYXRoKGMpLGc9MDtnPGYubGVuZ3RoO2crKyllPWZbZ10sdGhpcy5hZGRHZXN0dXJlRGVwZW5kZW5jeShlLGIpO2Vsc2UgdGhpcy5hZGRHZXN0dXJlRGVwZW5kZW5jeShjLmN1cnJlbnRUYXJnZXQsYik7aWYoIWMuX2hhbmRsZWRCeVBHKXt2YXIgaD10aGlzLmV2ZW50TWFwJiZ0aGlzLmV2ZW50TWFwW2RdO2gmJmgoYyksYy5faGFuZGxlZEJ5UEc9ITB9fSxsaXN0ZW46ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGMsZD0wLGU9Yi5sZW5ndGg7ZT5kJiYoYz1iW2RdKTtkKyspdGhpcy5hZGRFdmVudChhLGMpfSx1bmxpc3RlbjpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYyxkPTAsZT1iLmxlbmd0aDtlPmQmJihjPWJbZF0pO2QrKyl0aGlzLnJlbW92ZUV2ZW50KGEsYyl9LGFkZEV2ZW50OmZ1bmN0aW9uKGEsYil7YS5hZGRFdmVudExpc3RlbmVyKGIsdGhpcy5ib3VuZEhhbmRsZXIpfSxyZW1vdmVFdmVudDpmdW5jdGlvbihhLGIpe2EucmVtb3ZlRXZlbnRMaXN0ZW5lcihiLHRoaXMuYm91bmRIYW5kbGVyKX0sbWFrZUV2ZW50OmZ1bmN0aW9uKGEsYil7dmFyIGM9Zi5tYWtlUG9pbnRlckV2ZW50KGEsYik7cmV0dXJuIGMucHJldmVudERlZmF1bHQ9Yi5wcmV2ZW50RGVmYXVsdCxjLnRhcFByZXZlbnRlZD1iLnRhcFByZXZlbnRlZCxjLl90YXJnZXQ9Yy5fdGFyZ2V0fHxiLnRhcmdldCxjfSxmaXJlRXZlbnQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLm1ha2VFdmVudChhLGIpO3JldHVybiB0aGlzLmRpc3BhdGNoRXZlbnQoYyl9LGNsb25lRXZlbnQ6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiLGY9T2JqZWN0LmNyZWF0ZShudWxsKSxnPTA7ZzxjLmxlbmd0aDtnKyspYj1jW2ddLGZbYl09YVtiXXx8ZFtnXSwoInRhcmdldCI9PT1ifHwicmVsYXRlZFRhcmdldCI9PT1iKSYmZSYmZltiXWluc3RhbmNlb2YgU1ZHRWxlbWVudEluc3RhbmNlJiYoZltiXT1mW2JdLmNvcnJlc3BvbmRpbmdVc2VFbGVtZW50KTtyZXR1cm4gZi5wcmV2ZW50RGVmYXVsdD1mdW5jdGlvbigpe2EucHJldmVudERlZmF1bHQoKX0sZn0sZGlzcGF0Y2hFdmVudDpmdW5jdGlvbihhKXt2YXIgYj1hLl90YXJnZXQ7aWYoYil7Yi5kaXNwYXRjaEV2ZW50KGEpO3ZhciBjPXRoaXMuY2xvbmVFdmVudChhKTtjLnRhcmdldD1iLHRoaXMuZmlsbEdlc3R1cmVRdWV1ZShjKX19LGdlc3R1cmVUcmlnZ2VyOmZ1bmN0aW9uKCl7Zm9yKHZhciBhLGIsYz0wO2M8dGhpcy5nZXN0dXJlUXVldWUubGVuZ3RoO2MrKyl7YT10aGlzLmdlc3R1cmVRdWV1ZVtjXSxiPWEuX3JlcXVpcmVkR2VzdHVyZXM7Zm9yKHZhciBkLGUsZj0wO2Y8dGhpcy5nZXN0dXJlcy5sZW5ndGg7ZisrKWJbZl0mJihkPXRoaXMuZ2VzdHVyZXNbZl0sZT1kW2EudHlwZV0sZSYmZS5jYWxsKGQsYSkpfXRoaXMuZ2VzdHVyZVF1ZXVlLmxlbmd0aD0wfSxmaWxsR2VzdHVyZVF1ZXVlOmZ1bmN0aW9uKGEpe3RoaXMuZ2VzdHVyZVF1ZXVlLmxlbmd0aHx8cmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRoaXMuYm91bmRHZXN0dXJlVHJpZ2dlciksYS5fcmVxdWlyZWRHZXN0dXJlcz10aGlzLnJlcXVpcmVkR2VzdHVyZXMuZ2V0KGEucG9pbnRlcklkKSx0aGlzLmdlc3R1cmVRdWV1ZS5wdXNoKGEpfX07Zy5ib3VuZEhhbmRsZXI9Zy5ldmVudEhhbmRsZXIuYmluZChnKSxnLmJvdW5kR2VzdHVyZVRyaWdnZXI9Zy5nZXN0dXJlVHJpZ2dlci5iaW5kKGcpLGEuZGlzcGF0Y2hlcj1nLGEuYWN0aXZhdGVHZXN0dXJlPWZ1bmN0aW9uKGEsYil7dmFyIGM9Yi50b0xvd2VyQ2FzZSgpLGQ9Zy5kZXBlbmRlbmN5TWFwW2NdO2lmKGQpe3ZhciBlPWcuZ2VzdHVyZXNbZC5pbmRleF07aWYoYS5fcGdMaXN0ZW5lcnN8fChnLnJlZ2lzdGVyKGEpLGEuX3BnTGlzdGVuZXJzPTApLGUpe3ZhciBmLGg9ZS5kZWZhdWx0QWN0aW9ucyYmZS5kZWZhdWx0QWN0aW9uc1tjXTtzd2l0Y2goYS5ub2RlVHlwZSl7Y2FzZSBOb2RlLkVMRU1FTlRfTk9ERTpmPWE7YnJlYWs7Y2FzZSBOb2RlLkRPQ1VNRU5UX0ZSQUdNRU5UX05PREU6Zj1hLmhvc3Q7YnJlYWs7ZGVmYXVsdDpmPW51bGx9aCYmZiYmIWYuaGFzQXR0cmlidXRlKCJ0b3VjaC1hY3Rpb24iKSYmZi5zZXRBdHRyaWJ1dGUoInRvdWNoLWFjdGlvbiIsaCl9YS5fcGdFdmVudHN8fChhLl9wZ0V2ZW50cz17fSksYS5fcGdFdmVudHNbY109KGEuX3BnRXZlbnRzW2NdfHwwKSsxLGEuX3BnTGlzdGVuZXJzKyt9cmV0dXJuIEJvb2xlYW4oZCl9LGEuYWRkRXZlbnRMaXN0ZW5lcj1mdW5jdGlvbihiLGMsZCxlKXtkJiYoYS5hY3RpdmF0ZUdlc3R1cmUoYixjKSxiLmFkZEV2ZW50TGlzdGVuZXIoYyxkLGUpKX0sYS5kZWFjdGl2YXRlR2VzdHVyZT1mdW5jdGlvbihhLGIpe3ZhciBjPWIudG9Mb3dlckNhc2UoKSxkPWcuZGVwZW5kZW5jeU1hcFtjXTtyZXR1cm4gZCYmKGEuX3BnTGlzdGVuZXJzPjAmJmEuX3BnTGlzdGVuZXJzLS0sMD09PWEuX3BnTGlzdGVuZXJzJiZnLnVucmVnaXN0ZXIoYSksYS5fcGdFdmVudHMmJihhLl9wZ0V2ZW50c1tjXT4wP2EuX3BnRXZlbnRzW2NdLS06YS5fcGdFdmVudHNbY109MCkpLEJvb2xlYW4oZCl9LGEucmVtb3ZlRXZlbnRMaXN0ZW5lcj1mdW5jdGlvbihiLGMsZCxlKXtkJiYoYS5kZWFjdGl2YXRlR2VzdHVyZShiLGMpLGIucmVtb3ZlRXZlbnRMaXN0ZW5lcihjLGQsZSkpfX0od2luZG93LlBvbHltZXJHZXN0dXJlcyksZnVuY3Rpb24oYSl7dmFyIGI9YS5kaXNwYXRjaGVyLGM9Yi5wb2ludGVybWFwLGQ9MjUsZT1bMCwxLDQsMl0sZj0hMTt0cnl7Zj0xPT09bmV3IE1vdXNlRXZlbnQoInRlc3QiLHtidXR0b25zOjF9KS5idXR0b25zfWNhdGNoKGcpe312YXIgaD17UE9JTlRFUl9JRDoxLFBPSU5URVJfVFlQRToibW91c2UiLGV2ZW50czpbIm1vdXNlZG93biIsIm1vdXNlbW92ZSIsIm1vdXNldXAiXSxleHBvc2VzOlsiZG93biIsInVwIiwibW92ZSJdLHJlZ2lzdGVyOmZ1bmN0aW9uKGEpe2IubGlzdGVuKGEsdGhpcy5ldmVudHMpfSx1bnJlZ2lzdGVyOmZ1bmN0aW9uKGEpe2EhPT1kb2N1bWVudCYmYi51bmxpc3RlbihhLHRoaXMuZXZlbnRzKX0sbGFzdFRvdWNoZXM6W10saXNFdmVudFNpbXVsYXRlZEZyb21Ub3VjaDpmdW5jdGlvbihhKXtmb3IodmFyIGIsYz10aGlzLmxhc3RUb3VjaGVzLGU9YS5jbGllbnRYLGY9YS5jbGllbnRZLGc9MCxoPWMubGVuZ3RoO2g+ZyYmKGI9Y1tnXSk7ZysrKXt2YXIgaT1NYXRoLmFicyhlLWIueCksaj1NYXRoLmFicyhmLWIueSk7aWYoZD49aSYmZD49ailyZXR1cm4hMH19LHByZXBhcmVFdmVudDpmdW5jdGlvbihhKXt2YXIgYz1iLmNsb25lRXZlbnQoYSk7cmV0dXJuIGMucG9pbnRlcklkPXRoaXMuUE9JTlRFUl9JRCxjLmlzUHJpbWFyeT0hMCxjLnBvaW50ZXJUeXBlPXRoaXMuUE9JTlRFUl9UWVBFLGMuX3NvdXJjZT0ibW91c2UiLGZ8fChjLmJ1dHRvbnM9ZVtjLndoaWNoXXx8MCksY30sbW91c2Vkb3duOmZ1bmN0aW9uKGQpe2lmKCF0aGlzLmlzRXZlbnRTaW11bGF0ZWRGcm9tVG91Y2goZCkpe3ZhciBlPWMuaGFzKHRoaXMuUE9JTlRFUl9JRCk7ZSYmdGhpcy5tb3VzZXVwKGQpO3ZhciBmPXRoaXMucHJlcGFyZUV2ZW50KGQpO2YudGFyZ2V0PWEuZmluZFRhcmdldChkKSxjLnNldCh0aGlzLlBPSU5URVJfSUQsZi50YXJnZXQpLGIuZG93bihmKX19LG1vdXNlbW92ZTpmdW5jdGlvbihhKXtpZighdGhpcy5pc0V2ZW50U2ltdWxhdGVkRnJvbVRvdWNoKGEpKXt2YXIgZD1jLmdldCh0aGlzLlBPSU5URVJfSUQpO2lmKGQpe3ZhciBlPXRoaXMucHJlcGFyZUV2ZW50KGEpO2UudGFyZ2V0PWQsMD09PWUuYnV0dG9ucz8oYi5jYW5jZWwoZSksdGhpcy5jbGVhbnVwTW91c2UoKSk6Yi5tb3ZlKGUpfX19LG1vdXNldXA6ZnVuY3Rpb24oZCl7aWYoIXRoaXMuaXNFdmVudFNpbXVsYXRlZEZyb21Ub3VjaChkKSl7dmFyIGU9dGhpcy5wcmVwYXJlRXZlbnQoZCk7ZS5yZWxhdGVkVGFyZ2V0PWEuZmluZFRhcmdldChkKSxlLnRhcmdldD1jLmdldCh0aGlzLlBPSU5URVJfSUQpLGIudXAoZSksdGhpcy5jbGVhbnVwTW91c2UoKX19LGNsZWFudXBNb3VzZTpmdW5jdGlvbigpe2NbImRlbGV0ZSJdKHRoaXMuUE9JTlRFUl9JRCl9fTthLm1vdXNlRXZlbnRzPWh9KHdpbmRvdy5Qb2x5bWVyR2VzdHVyZXMpLGZ1bmN0aW9uKGEpe3ZhciBiPWEuZGlzcGF0Y2hlcixjPShhLnRhcmdldEZpbmRpbmcuYWxsU2hhZG93cy5iaW5kKGEudGFyZ2V0RmluZGluZyksYi5wb2ludGVybWFwKSxkPShBcnJheS5wcm90b3R5cGUubWFwLmNhbGwuYmluZChBcnJheS5wcm90b3R5cGUubWFwKSwyNTAwKSxlPTIwMCxmPTIwLGc9ITEsaD17SVNfSU9TOiExLGV2ZW50czpbInRvdWNoc3RhcnQiLCJ0b3VjaG1vdmUiLCJ0b3VjaGVuZCIsInRvdWNoY2FuY2VsIl0sZXhwb3NlczpbImRvd24iLCJ1cCIsIm1vdmUiXSxyZWdpc3RlcjpmdW5jdGlvbihhLGMpeyh0aGlzLklTX0lPUz9jOiFjKSYmYi5saXN0ZW4oYSx0aGlzLmV2ZW50cyl9LHVucmVnaXN0ZXI6ZnVuY3Rpb24oYSl7dGhpcy5JU19JT1N8fGIudW5saXN0ZW4oYSx0aGlzLmV2ZW50cyl9LHNjcm9sbFR5cGVzOntFTUlUVEVSOiJub25lIixYU0NST0xMRVI6InBhbi14IixZU0NST0xMRVI6InBhbi15In0sdG91Y2hBY3Rpb25Ub1Njcm9sbFR5cGU6ZnVuY3Rpb24oYSl7dmFyIGI9YSxjPXRoaXMuc2Nyb2xsVHlwZXM7cmV0dXJuIGI9PT1jLkVNSVRURVI/Im5vbmUiOmI9PT1jLlhTQ1JPTExFUj8iWCI6Yj09PWMuWVNDUk9MTEVSPyJZIjoiWFkifSxQT0lOVEVSX1RZUEU6InRvdWNoIixmaXJzdFRvdWNoOm51bGwsaXNQcmltYXJ5VG91Y2g6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZmlyc3RUb3VjaD09PWEuaWRlbnRpZmllcn0sc2V0UHJpbWFyeVRvdWNoOmZ1bmN0aW9uKGEpeygwPT09Yy5wb2ludGVycygpfHwxPT09Yy5wb2ludGVycygpJiZjLmhhcygxKSkmJih0aGlzLmZpcnN0VG91Y2g9YS5pZGVudGlmaWVyLHRoaXMuZmlyc3RYWT17WDphLmNsaWVudFgsWTphLmNsaWVudFl9LHRoaXMuc2Nyb2xsaW5nPW51bGwsdGhpcy5jYW5jZWxSZXNldENsaWNrQ291bnQoKSl9LHJlbW92ZVByaW1hcnlQb2ludGVyOmZ1bmN0aW9uKGEpe2EuaXNQcmltYXJ5JiYodGhpcy5maXJzdFRvdWNoPW51bGwsdGhpcy5maXJzdFhZPW51bGwsdGhpcy5yZXNldENsaWNrQ291bnQoKSl9LGNsaWNrQ291bnQ6MCxyZXNldElkOm51bGwscmVzZXRDbGlja0NvdW50OmZ1bmN0aW9uKCl7dmFyIGE9ZnVuY3Rpb24oKXt0aGlzLmNsaWNrQ291bnQ9MCx0aGlzLnJlc2V0SWQ9bnVsbH0uYmluZCh0aGlzKTt0aGlzLnJlc2V0SWQ9c2V0VGltZW91dChhLGUpfSxjYW5jZWxSZXNldENsaWNrQ291bnQ6ZnVuY3Rpb24oKXt0aGlzLnJlc2V0SWQmJmNsZWFyVGltZW91dCh0aGlzLnJlc2V0SWQpfSx0eXBlVG9CdXR0b25zOmZ1bmN0aW9uKGEpe3ZhciBiPTA7cmV0dXJuKCJ0b3VjaHN0YXJ0Ij09PWF8fCJ0b3VjaG1vdmUiPT09YSkmJihiPTEpLGJ9LGZpbmRUYXJnZXQ6ZnVuY3Rpb24oYixkKXtpZigidG91Y2hzdGFydCI9PT10aGlzLmN1cnJlbnRUb3VjaEV2ZW50LnR5cGUpe2lmKHRoaXMuaXNQcmltYXJ5VG91Y2goYikpe3ZhciBlPXtjbGllbnRYOmIuY2xpZW50WCxjbGllbnRZOmIuY2xpZW50WSxwYXRoOnRoaXMuY3VycmVudFRvdWNoRXZlbnQucGF0aCx0YXJnZXQ6dGhpcy5jdXJyZW50VG91Y2hFdmVudC50YXJnZXR9O3JldHVybiBhLmZpbmRUYXJnZXQoZSl9cmV0dXJuIGEuZmluZFRhcmdldChiKX1yZXR1cm4gYy5nZXQoZCl9LHRvdWNoVG9Qb2ludGVyOmZ1bmN0aW9uKGEpe3ZhciBjPXRoaXMuY3VycmVudFRvdWNoRXZlbnQsZD1iLmNsb25lRXZlbnQoYSksZT1kLnBvaW50ZXJJZD1hLmlkZW50aWZpZXIrMjtkLnRhcmdldD10aGlzLmZpbmRUYXJnZXQoYSxlKSxkLmJ1YmJsZXM9ITAsZC5jYW5jZWxhYmxlPSEwLGQuZGV0YWlsPXRoaXMuY2xpY2tDb3VudCxkLmJ1dHRvbnM9dGhpcy50eXBlVG9CdXR0b25zKGMudHlwZSksZC53aWR0aD1hLndlYmtpdFJhZGl1c1h8fGEucmFkaXVzWHx8MCxkLmhlaWdodD1hLndlYmtpdFJhZGl1c1l8fGEucmFkaXVzWXx8MCxkLnByZXNzdXJlPWEud2Via2l0Rm9yY2V8fGEuZm9yY2V8fC41LGQuaXNQcmltYXJ5PXRoaXMuaXNQcmltYXJ5VG91Y2goYSksZC5wb2ludGVyVHlwZT10aGlzLlBPSU5URVJfVFlQRSxkLl9zb3VyY2U9InRvdWNoIjt2YXIgZj10aGlzO3JldHVybiBkLnByZXZlbnREZWZhdWx0PWZ1bmN0aW9uKCl7Zi5zY3JvbGxpbmc9ITEsZi5maXJzdFhZPW51bGwsYy5wcmV2ZW50RGVmYXVsdCgpfSxkfSxwcm9jZXNzVG91Y2hlczpmdW5jdGlvbihhLGIpe3ZhciBkPWEuY2hhbmdlZFRvdWNoZXM7dGhpcy5jdXJyZW50VG91Y2hFdmVudD1hO2Zvcih2YXIgZSxmLGc9MDtnPGQubGVuZ3RoO2crKyllPWRbZ10sZj10aGlzLnRvdWNoVG9Qb2ludGVyKGUpLCJ0b3VjaHN0YXJ0Ij09PWEudHlwZSYmYy5zZXQoZi5wb2ludGVySWQsZi50YXJnZXQpLGMuaGFzKGYucG9pbnRlcklkKSYmYi5jYWxsKHRoaXMsZiksKCJ0b3VjaGVuZCI9PT1hLnR5cGV8fGEuX2NhbmNlbCkmJnRoaXMuY2xlYW5VcFBvaW50ZXIoZil9LHNob3VsZFNjcm9sbDpmdW5jdGlvbihiKXtpZih0aGlzLmZpcnN0WFkpe3ZhciBjLGQ9YS50YXJnZXRGaW5kaW5nLmZpbmRUb3VjaEFjdGlvbihiKSxlPXRoaXMudG91Y2hBY3Rpb25Ub1Njcm9sbFR5cGUoZCk7aWYoIm5vbmUiPT09ZSljPSExO2Vsc2UgaWYoIlhZIj09PWUpYz0hMDtlbHNle3ZhciBmPWIuY2hhbmdlZFRvdWNoZXNbMF0sZz1lLGg9IlkiPT09ZT8iWCI6IlkiLGk9TWF0aC5hYnMoZlsiY2xpZW50IitnXS10aGlzLmZpcnN0WFlbZ10pLGo9TWF0aC5hYnMoZlsiY2xpZW50IitoXS10aGlzLmZpcnN0WFlbaF0pO2M9aT49an1yZXR1cm4gY319LGZpbmRUb3VjaDpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYyxkPTAsZT1hLmxlbmd0aDtlPmQmJihjPWFbZF0pO2QrKylpZihjLmlkZW50aWZpZXI9PT1iKXJldHVybiEwfSx2YWN1dW1Ub3VjaGVzOmZ1bmN0aW9uKGEpe3ZhciBiPWEudG91Y2hlcztpZihjLnBvaW50ZXJzKCk+PWIubGVuZ3RoKXt2YXIgZD1bXTtjLmZvckVhY2goZnVuY3Rpb24oYSxjKXtpZigxIT09YyYmIXRoaXMuZmluZFRvdWNoKGIsYy0yKSl7dmFyIGU9YTtkLnB1c2goZSl9fSx0aGlzKSxkLmZvckVhY2goZnVuY3Rpb24oYSl7dGhpcy5jYW5jZWwoYSksYy5kZWxldGUoYS5wb2ludGVySWQpfSl9fSx0b3VjaHN0YXJ0OmZ1bmN0aW9uKGEpe3RoaXMudmFjdXVtVG91Y2hlcyhhKSx0aGlzLnNldFByaW1hcnlUb3VjaChhLmNoYW5nZWRUb3VjaGVzWzBdKSx0aGlzLmRlZHVwU3ludGhNb3VzZShhKSx0aGlzLnNjcm9sbGluZ3x8KHRoaXMuY2xpY2tDb3VudCsrLHRoaXMucHJvY2Vzc1RvdWNoZXMoYSx0aGlzLmRvd24pKX0sZG93bjpmdW5jdGlvbihhKXtiLmRvd24oYSl9LHRvdWNobW92ZTpmdW5jdGlvbihhKXtpZihnKWEuY2FuY2VsYWJsZSYmdGhpcy5wcm9jZXNzVG91Y2hlcyhhLHRoaXMubW92ZSk7ZWxzZSBpZih0aGlzLnNjcm9sbGluZyl7aWYodGhpcy5maXJzdFhZKXt2YXIgYj1hLmNoYW5nZWRUb3VjaGVzWzBdLGM9Yi5jbGllbnRYLXRoaXMuZmlyc3RYWS5YLGQ9Yi5jbGllbnRZLXRoaXMuZmlyc3RYWS5ZLGU9TWF0aC5zcXJ0KGMqYytkKmQpO2U+PWYmJih0aGlzLnRvdWNoY2FuY2VsKGEpLHRoaXMuc2Nyb2xsaW5nPSEwLHRoaXMuZmlyc3RYWT1udWxsKX19ZWxzZSBudWxsPT09dGhpcy5zY3JvbGxpbmcmJnRoaXMuc2hvdWxkU2Nyb2xsKGEpP3RoaXMuc2Nyb2xsaW5nPSEwOih0aGlzLnNjcm9sbGluZz0hMSxhLnByZXZlbnREZWZhdWx0KCksdGhpcy5wcm9jZXNzVG91Y2hlcyhhLHRoaXMubW92ZSkpfSxtb3ZlOmZ1bmN0aW9uKGEpe2IubW92ZShhKX0sdG91Y2hlbmQ6ZnVuY3Rpb24oYSl7dGhpcy5kZWR1cFN5bnRoTW91c2UoYSksdGhpcy5wcm9jZXNzVG91Y2hlcyhhLHRoaXMudXApfSx1cDpmdW5jdGlvbihjKXtjLnJlbGF0ZWRUYXJnZXQ9YS5maW5kVGFyZ2V0KGMpLGIudXAoYyl9LGNhbmNlbDpmdW5jdGlvbihhKXtiLmNhbmNlbChhKX0sdG91Y2hjYW5jZWw6ZnVuY3Rpb24oYSl7YS5fY2FuY2VsPSEwLHRoaXMucHJvY2Vzc1RvdWNoZXMoYSx0aGlzLmNhbmNlbCl9LGNsZWFuVXBQb2ludGVyOmZ1bmN0aW9uKGEpe2NbImRlbGV0ZSJdKGEucG9pbnRlcklkKSx0aGlzLnJlbW92ZVByaW1hcnlQb2ludGVyKGEpfSxkZWR1cFN5bnRoTW91c2U6ZnVuY3Rpb24oYil7dmFyIGM9YS5tb3VzZUV2ZW50cy5sYXN0VG91Y2hlcyxlPWIuY2hhbmdlZFRvdWNoZXNbMF07aWYodGhpcy5pc1ByaW1hcnlUb3VjaChlKSl7dmFyIGY9e3g6ZS5jbGllbnRYLHk6ZS5jbGllbnRZfTtjLnB1c2goZik7dmFyIGc9ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLmluZGV4T2YoYik7Yz4tMSYmYS5zcGxpY2UoYywxKX0uYmluZChudWxsLGMsZik7c2V0VGltZW91dChnLGQpfX19O2EudG91Y2hFdmVudHM9aH0od2luZG93LlBvbHltZXJHZXN0dXJlcyksZnVuY3Rpb24oYSl7dmFyIGI9YS5kaXNwYXRjaGVyLGM9Yi5wb2ludGVybWFwLGQ9d2luZG93Lk1TUG9pbnRlckV2ZW50JiYibnVtYmVyIj09dHlwZW9mIHdpbmRvdy5NU1BvaW50ZXJFdmVudC5NU1BPSU5URVJfVFlQRV9NT1VTRSxlPXtldmVudHM6WyJNU1BvaW50ZXJEb3duIiwiTVNQb2ludGVyTW92ZSIsIk1TUG9pbnRlclVwIiwiTVNQb2ludGVyQ2FuY2VsIl0scmVnaXN0ZXI6ZnVuY3Rpb24oYSl7Yi5saXN0ZW4oYSx0aGlzLmV2ZW50cyl9LHVucmVnaXN0ZXI6ZnVuY3Rpb24oYSl7YSE9PWRvY3VtZW50JiZiLnVubGlzdGVuKGEsdGhpcy5ldmVudHMpfSxQT0lOVEVSX1RZUEVTOlsiIiwidW5hdmFpbGFibGUiLCJ0b3VjaCIsInBlbiIsIm1vdXNlIl0scHJlcGFyZUV2ZW50OmZ1bmN0aW9uKGEpe3ZhciBjPWE7cmV0dXJuIGM9Yi5jbG9uZUV2ZW50KGEpLGQmJihjLnBvaW50ZXJUeXBlPXRoaXMuUE9JTlRFUl9UWVBFU1thLnBvaW50ZXJUeXBlXSksYy5fc291cmNlPSJtcyIsY30sY2xlYW51cDpmdW5jdGlvbihhKXtjWyJkZWxldGUiXShhKX0sTVNQb2ludGVyRG93bjpmdW5jdGlvbihkKXt2YXIgZT10aGlzLnByZXBhcmVFdmVudChkKTtlLnRhcmdldD1hLmZpbmRUYXJnZXQoZCksYy5zZXQoZC5wb2ludGVySWQsZS50YXJnZXQpLGIuZG93bihlKX0sTVNQb2ludGVyTW92ZTpmdW5jdGlvbihhKXt2YXIgZD1jLmdldChhLnBvaW50ZXJJZCk7aWYoZCl7dmFyIGU9dGhpcy5wcmVwYXJlRXZlbnQoYSk7ZS50YXJnZXQ9ZCxiLm1vdmUoZSl9fSxNU1BvaW50ZXJVcDpmdW5jdGlvbihkKXt2YXIgZT10aGlzLnByZXBhcmVFdmVudChkKTtlLnJlbGF0ZWRUYXJnZXQ9YS5maW5kVGFyZ2V0KGQpLGUudGFyZ2V0PWMuZ2V0KGUucG9pbnRlcklkKSxiLnVwKGUpLHRoaXMuY2xlYW51cChkLnBvaW50ZXJJZCl9LE1TUG9pbnRlckNhbmNlbDpmdW5jdGlvbihkKXt2YXIgZT10aGlzLnByZXBhcmVFdmVudChkKTtlLnJlbGF0ZWRUYXJnZXQ9YS5maW5kVGFyZ2V0KGQpLGUudGFyZ2V0PWMuZ2V0KGUucG9pbnRlcklkKSxiLmNhbmNlbChlKSx0aGlzLmNsZWFudXAoZC5wb2ludGVySWQpfX07YS5tc0V2ZW50cz1lfSh3aW5kb3cuUG9seW1lckdlc3R1cmVzKSxmdW5jdGlvbihhKXt2YXIgYj1hLmRpc3BhdGNoZXIsYz1iLnBvaW50ZXJtYXAsZD17ZXZlbnRzOlsicG9pbnRlcmRvd24iLCJwb2ludGVybW92ZSIsInBvaW50ZXJ1cCIsInBvaW50ZXJjYW5jZWwiXSxwcmVwYXJlRXZlbnQ6ZnVuY3Rpb24oYSl7dmFyIGM9Yi5jbG9uZUV2ZW50KGEpO3JldHVybiBjLl9zb3VyY2U9InBvaW50ZXIiLGN9LHJlZ2lzdGVyOmZ1bmN0aW9uKGEpe2IubGlzdGVuKGEsdGhpcy5ldmVudHMpfSx1bnJlZ2lzdGVyOmZ1bmN0aW9uKGEpe2EhPT1kb2N1bWVudCYmYi51bmxpc3RlbihhLHRoaXMuZXZlbnRzKX0sY2xlYW51cDpmdW5jdGlvbihhKXtjWyJkZWxldGUiXShhKX0scG9pbnRlcmRvd246ZnVuY3Rpb24oZCl7dmFyIGU9dGhpcy5wcmVwYXJlRXZlbnQoZCk7ZS50YXJnZXQ9YS5maW5kVGFyZ2V0KGQpLGMuc2V0KGUucG9pbnRlcklkLGUudGFyZ2V0KSxiLmRvd24oZSl9LHBvaW50ZXJtb3ZlOmZ1bmN0aW9uKGEpe3ZhciBkPWMuZ2V0KGEucG9pbnRlcklkKTtpZihkKXt2YXIgZT10aGlzLnByZXBhcmVFdmVudChhKTtlLnRhcmdldD1kLGIubW92ZShlKX19LHBvaW50ZXJ1cDpmdW5jdGlvbihkKXt2YXIgZT10aGlzLnByZXBhcmVFdmVudChkKTtlLnJlbGF0ZWRUYXJnZXQ9YS5maW5kVGFyZ2V0KGQpLGUudGFyZ2V0PWMuZ2V0KGUucG9pbnRlcklkKSxiLnVwKGUpLHRoaXMuY2xlYW51cChkLnBvaW50ZXJJZCl9LHBvaW50ZXJjYW5jZWw6ZnVuY3Rpb24oZCl7dmFyIGU9dGhpcy5wcmVwYXJlRXZlbnQoZCk7ZS5yZWxhdGVkVGFyZ2V0PWEuZmluZFRhcmdldChkKSxlLnRhcmdldD1jLmdldChlLnBvaW50ZXJJZCksYi5jYW5jZWwoZSksdGhpcy5jbGVhbnVwKGQucG9pbnRlcklkKX19O2EucG9pbnRlckV2ZW50cz1kfSh3aW5kb3cuUG9seW1lckdlc3R1cmVzKSxmdW5jdGlvbihhKXt2YXIgYj1hLmRpc3BhdGNoZXIsYz13aW5kb3cubmF2aWdhdG9yO3dpbmRvdy5Qb2ludGVyRXZlbnQ/Yi5yZWdpc3RlclNvdXJjZSgicG9pbnRlciIsYS5wb2ludGVyRXZlbnRzKTpjLm1zUG9pbnRlckVuYWJsZWQ/Yi5yZWdpc3RlclNvdXJjZSgibXMiLGEubXNFdmVudHMpOihiLnJlZ2lzdGVyU291cmNlKCJtb3VzZSIsYS5tb3VzZUV2ZW50cyksdm9pZCAwIT09d2luZG93Lm9udG91Y2hzdGFydCYmYi5yZWdpc3RlclNvdXJjZSgidG91Y2giLGEudG91Y2hFdmVudHMpKTt2YXIgZD1uYXZpZ2F0b3IudXNlckFnZW50LGU9ZC5tYXRjaCgvaVBhZHxpUGhvbmV8aVBvZC8pJiYib250b3VjaHN0YXJ0ImluIHdpbmRvdztiLklTX0lPUz1lLGEudG91Y2hFdmVudHMuSVNfSU9TPWUsYi5yZWdpc3Rlcihkb2N1bWVudCwhMCl9KHdpbmRvdy5Qb2x5bWVyR2VzdHVyZXMpLGZ1bmN0aW9uKGEpe3ZhciBiPWEuZGlzcGF0Y2hlcixjPWEuZXZlbnRGYWN0b3J5LGQ9bmV3IGEuUG9pbnRlck1hcCxlPXtldmVudHM6WyJkb3duIiwibW92ZSIsInVwIl0sZXhwb3NlczpbInRyYWNrc3RhcnQiLCJ0cmFjayIsInRyYWNreCIsInRyYWNreSIsInRyYWNrZW5kIl0sZGVmYXVsdEFjdGlvbnM6e3RyYWNrOiJub25lIix0cmFja3g6InBhbi15Iix0cmFja3k6InBhbi14In0sV0lHR0xFX1RIUkVTSE9MRDo0LGNsYW1wRGlyOmZ1bmN0aW9uKGEpe3JldHVybiBhPjA/MTotMX0sY2FsY1Bvc2l0aW9uRGVsdGE6ZnVuY3Rpb24oYSxiKXt2YXIgYz0wLGQ9MDtyZXR1cm4gYSYmYiYmKGM9Yi5wYWdlWC1hLnBhZ2VYLGQ9Yi5wYWdlWS1hLnBhZ2VZKSx7eDpjLHk6ZH19LGZpcmVUcmFjazpmdW5jdGlvbihhLGIsZCl7dmFyIGU9ZCxmPXRoaXMuY2FsY1Bvc2l0aW9uRGVsdGEoZS5kb3duRXZlbnQsYiksZz10aGlzLmNhbGNQb3NpdGlvbkRlbHRhKGUubGFzdE1vdmVFdmVudCxiKTtpZihnLngpZS54RGlyZWN0aW9uPXRoaXMuY2xhbXBEaXIoZy54KTtlbHNlIGlmKCJ0cmFja3giPT09YSlyZXR1cm47aWYoZy55KWUueURpcmVjdGlvbj10aGlzLmNsYW1wRGlyKGcueSk7ZWxzZSBpZigidHJhY2t5Ij09PWEpcmV0dXJuO3ZhciBoPXtidWJibGVzOiEwLGNhbmNlbGFibGU6ITAsdHJhY2tJbmZvOmUudHJhY2tJbmZvLHJlbGF0ZWRUYXJnZXQ6Yi5yZWxhdGVkVGFyZ2V0LHBvaW50ZXJUeXBlOmIucG9pbnRlclR5cGUscG9pbnRlcklkOmIucG9pbnRlcklkLF9zb3VyY2U6InRyYWNrIn07InRyYWNreSIhPT1hJiYoaC54PWIueCxoLmR4PWYueCxoLmRkeD1nLngsaC5jbGllbnRYPWIuY2xpZW50WCxoLnBhZ2VYPWIucGFnZVgsaC5zY3JlZW5YPWIuc2NyZWVuWCxoLnhEaXJlY3Rpb249ZS54RGlyZWN0aW9uKSwidHJhY2t4IiE9PWEmJihoLmR5PWYueSxoLmRkeT1nLnksaC55PWIueSxoLmNsaWVudFk9Yi5jbGllbnRZLGgucGFnZVk9Yi5wYWdlWSxoLnNjcmVlblk9Yi5zY3JlZW5ZLGgueURpcmVjdGlvbj1lLnlEaXJlY3Rpb24pO3ZhciBpPWMubWFrZUdlc3R1cmVFdmVudChhLGgpO2UuZG93blRhcmdldC5kaXNwYXRjaEV2ZW50KGkpfSxkb3duOmZ1bmN0aW9uKGEpe2lmKGEuaXNQcmltYXJ5JiYoIm1vdXNlIj09PWEucG9pbnRlclR5cGU/MT09PWEuYnV0dG9uczohMCkpe3ZhciBiPXtkb3duRXZlbnQ6YSxkb3duVGFyZ2V0OmEudGFyZ2V0LHRyYWNrSW5mbzp7fSxsYXN0TW92ZUV2ZW50Om51bGwseERpcmVjdGlvbjowLHlEaXJlY3Rpb246MCx0cmFja2luZzohMX07ZC5zZXQoYS5wb2ludGVySWQsYil9fSxtb3ZlOmZ1bmN0aW9uKGEpe3ZhciBiPWQuZ2V0KGEucG9pbnRlcklkKTtpZihiKXtpZighYi50cmFja2luZyl7dmFyIGM9dGhpcy5jYWxjUG9zaXRpb25EZWx0YShiLmRvd25FdmVudCxhKSxlPWMueCpjLngrYy55KmMueTtlPnRoaXMuV0lHR0xFX1RIUkVTSE9MRCYmKGIudHJhY2tpbmc9ITAsYi5sYXN0TW92ZUV2ZW50PWIuZG93bkV2ZW50LHRoaXMuZmlyZVRyYWNrKCJ0cmFja3N0YXJ0IixhLGIpKX1iLnRyYWNraW5nJiYodGhpcy5maXJlVHJhY2soInRyYWNrIixhLGIpLHRoaXMuZmlyZVRyYWNrKCJ0cmFja3giLGEsYiksdGhpcy5maXJlVHJhY2soInRyYWNreSIsYSxiKSksYi5sYXN0TW92ZUV2ZW50PWF9fSx1cDpmdW5jdGlvbihhKXt2YXIgYj1kLmdldChhLnBvaW50ZXJJZCk7YiYmKGIudHJhY2tpbmcmJnRoaXMuZmlyZVRyYWNrKCJ0cmFja2VuZCIsYSxiKSxkLmRlbGV0ZShhLnBvaW50ZXJJZCkpfX07Yi5yZWdpc3Rlckdlc3R1cmUoInRyYWNrIixlKX0od2luZG93LlBvbHltZXJHZXN0dXJlcyksZnVuY3Rpb24oYSl7dmFyIGI9YS5kaXNwYXRjaGVyLGM9YS5ldmVudEZhY3RvcnksZD17SE9MRF9ERUxBWToyMDAsV0lHR0xFX1RIUkVTSE9MRDoxNixldmVudHM6WyJkb3duIiwibW92ZSIsInVwIl0sZXhwb3NlczpbImhvbGQiLCJob2xkcHVsc2UiLCJyZWxlYXNlIl0saGVsZFBvaW50ZXI6bnVsbCxob2xkSm9iOm51bGwscHVsc2U6ZnVuY3Rpb24oKXt2YXIgYT1EYXRlLm5vdygpLXRoaXMuaGVsZFBvaW50ZXIudGltZVN0YW1wLGI9dGhpcy5oZWxkPyJob2xkcHVsc2UiOiJob2xkIjt0aGlzLmZpcmVIb2xkKGIsYSksdGhpcy5oZWxkPSEwfSxjYW5jZWw6ZnVuY3Rpb24oKXtjbGVhckludGVydmFsKHRoaXMuaG9sZEpvYiksdGhpcy5oZWxkJiZ0aGlzLmZpcmVIb2xkKCJyZWxlYXNlIiksdGhpcy5oZWxkPSExLHRoaXMuaGVsZFBvaW50ZXI9bnVsbCx0aGlzLnRhcmdldD1udWxsLHRoaXMuaG9sZEpvYj1udWxsfSxkb3duOmZ1bmN0aW9uKGEpe2EuaXNQcmltYXJ5JiYhdGhpcy5oZWxkUG9pbnRlciYmKHRoaXMuaGVsZFBvaW50ZXI9YSx0aGlzLnRhcmdldD1hLnRhcmdldCx0aGlzLmhvbGRKb2I9c2V0SW50ZXJ2YWwodGhpcy5wdWxzZS5iaW5kKHRoaXMpLHRoaXMuSE9MRF9ERUxBWSkpfSx1cDpmdW5jdGlvbihhKXt0aGlzLmhlbGRQb2ludGVyJiZ0aGlzLmhlbGRQb2ludGVyLnBvaW50ZXJJZD09PWEucG9pbnRlcklkJiZ0aGlzLmNhbmNlbCgpfSxtb3ZlOmZ1bmN0aW9uKGEpe2lmKHRoaXMuaGVsZFBvaW50ZXImJnRoaXMuaGVsZFBvaW50ZXIucG9pbnRlcklkPT09YS5wb2ludGVySWQpe3ZhciBiPWEuY2xpZW50WC10aGlzLmhlbGRQb2ludGVyLmNsaWVudFgsYz1hLmNsaWVudFktdGhpcy5oZWxkUG9pbnRlci5jbGllbnRZO2IqYitjKmM+dGhpcy5XSUdHTEVfVEhSRVNIT0xEJiZ0aGlzLmNhbmNlbCgpfX0sZmlyZUhvbGQ6ZnVuY3Rpb24oYSxiKXt2YXIgZD17YnViYmxlczohMCxjYW5jZWxhYmxlOiEwLHBvaW50ZXJUeXBlOnRoaXMuaGVsZFBvaW50ZXIucG9pbnRlclR5cGUscG9pbnRlcklkOnRoaXMuaGVsZFBvaW50ZXIucG9pbnRlcklkLHg6dGhpcy5oZWxkUG9pbnRlci5jbGllbnRYLHk6dGhpcy5oZWxkUG9pbnRlci5jbGllbnRZLF9zb3VyY2U6ImhvbGQifTtiJiYoZC5ob2xkVGltZT1iKTt2YXIgZT1jLm1ha2VHZXN0dXJlRXZlbnQoYSxkKTt0aGlzLnRhcmdldC5kaXNwYXRjaEV2ZW50KGUpfX07Yi5yZWdpc3Rlckdlc3R1cmUoImhvbGQiLGQpfSh3aW5kb3cuUG9seW1lckdlc3R1cmVzKSxmdW5jdGlvbihhKXt2YXIgYj1hLmRpc3BhdGNoZXIsYz1hLmV2ZW50RmFjdG9yeSxkPW5ldyBhLlBvaW50ZXJNYXAsZT17ZXZlbnRzOlsiZG93biIsInVwIl0sZXhwb3NlczpbInRhcCJdLGRvd246ZnVuY3Rpb24oYSl7YS5pc1ByaW1hcnkmJiFhLnRhcFByZXZlbnRlZCYmZC5zZXQoYS5wb2ludGVySWQse3RhcmdldDphLnRhcmdldCxidXR0b25zOmEuYnV0dG9ucyx4OmEuY2xpZW50WCx5OmEuY2xpZW50WX0pfSxzaG91bGRUYXA6ZnVuY3Rpb24oYSxiKXtyZXR1cm4ibW91c2UiPT09YS5wb2ludGVyVHlwZT8xPT09Yi5idXR0b25zOiFhLnRhcFByZXZlbnRlZH0sdXA6ZnVuY3Rpb24oYil7dmFyIGU9ZC5nZXQoYi5wb2ludGVySWQpO2lmKGUmJnRoaXMuc2hvdWxkVGFwKGIsZSkpe3ZhciBmPWEudGFyZ2V0RmluZGluZy5MQ0EoZS50YXJnZXQsYi5yZWxhdGVkVGFyZ2V0KTtpZihmKXt2YXIgZz1jLm1ha2VHZXN0dXJlRXZlbnQoInRhcCIse2J1YmJsZXM6ITAsY2FuY2VsYWJsZTohMCx4OmIuY2xpZW50WCx5OmIuY2xpZW50WSxkZXRhaWw6Yi5kZXRhaWwscG9pbnRlclR5cGU6Yi5wb2ludGVyVHlwZSxwb2ludGVySWQ6Yi5wb2ludGVySWQsYWx0S2V5OmIuYWx0S2V5LGN0cmxLZXk6Yi5jdHJsS2V5LG1ldGFLZXk6Yi5tZXRhS2V5LHNoaWZ0S2V5OmIuc2hpZnRLZXksX3NvdXJjZToidGFwIn0pO2YuZGlzcGF0Y2hFdmVudChnKX19ZC5kZWxldGUoYi5wb2ludGVySWQpfX07Yy5wcmV2ZW50VGFwPWZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbigpe2EudGFwUHJldmVudGVkPSEwLGQuZGVsZXRlKGEucG9pbnRlcklkKX19LGIucmVnaXN0ZXJHZXN0dXJlKCJ0YXAiLGUpfSh3aW5kb3cuUG9seW1lckdlc3R1cmVzKSxmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhLGIpe2lmKCFhKXRocm93IG5ldyBFcnJvcigiQVNTRVJUOiAiK2IpfWZ1bmN0aW9uIGMoYSl7cmV0dXJuIGE+PTQ4JiY1Nz49YX1mdW5jdGlvbiBkKGEpe3JldHVybiAzMj09PWF8fDk9PT1hfHwxMT09PWF8fDEyPT09YXx8MTYwPT09YXx8YT49NTc2MCYmIlx1MTY4MFx1MTgwZVx1MjAwMFx1MjAwMVx1MjAwMlx1MjAwM1x1MjAwNFx1MjAwNVx1MjAwNlx1MjAwN1x1MjAwOFx1MjAwOVx1MjAwYVx1MjAyZlx1MjA1Zlx1MzAwMFx1ZmVmZiIuaW5kZXhPZihTdHJpbmcuZnJvbUNoYXJDb2RlKGEpKT4wfWZ1bmN0aW9uIGUoYSl7cmV0dXJuIDEwPT09YXx8MTM9PT1hfHw4MjMyPT09YXx8ODIzMz09PWF9ZnVuY3Rpb24gZihhKXtyZXR1cm4gMzY9PT1hfHw5NT09PWF8fGE+PTY1JiY5MD49YXx8YT49OTcmJjEyMj49YX1mdW5jdGlvbiBnKGEpe3JldHVybiAzNj09PWF8fDk1PT09YXx8YT49NjUmJjkwPj1hfHxhPj05NyYmMTIyPj1hfHxhPj00OCYmNTc+PWF9ZnVuY3Rpb24gaChhKXtyZXR1cm4idGhpcyI9PT1hfWZ1bmN0aW9uIGkoKXtmb3IoO1k+WCYmZChXLmNoYXJDb2RlQXQoWCkpOykrK1h9ZnVuY3Rpb24gaigpe3ZhciBhLGI7Zm9yKGE9WCsrO1k+WCYmKGI9Vy5jaGFyQ29kZUF0KFgpLGcoYikpOykrK1g7cmV0dXJuIFcuc2xpY2UoYSxYKX1mdW5jdGlvbiBrKCl7dmFyIGEsYixjO3JldHVybiBhPVgsYj1qKCksYz0xPT09Yi5sZW5ndGg/Uy5JZGVudGlmaWVyOmgoYik/Uy5LZXl3b3JkOiJudWxsIj09PWI/Uy5OdWxsTGl0ZXJhbDoidHJ1ZSI9PT1ifHwiZmFsc2UiPT09Yj9TLkJvb2xlYW5MaXRlcmFsOlMuSWRlbnRpZmllcix7dHlwZTpjLHZhbHVlOmIscmFuZ2U6W2EsWF19fWZ1bmN0aW9uIGwoKXt2YXIgYSxiLGM9WCxkPVcuY2hhckNvZGVBdChYKSxlPVdbWF07c3dpdGNoKGQpe2Nhc2UgNDY6Y2FzZSA0MDpjYXNlIDQxOmNhc2UgNTk6Y2FzZSA0NDpjYXNlIDEyMzpjYXNlIDEyNTpjYXNlIDkxOmNhc2UgOTM6Y2FzZSA1ODpjYXNlIDYzOnJldHVybisrWCx7dHlwZTpTLlB1bmN0dWF0b3IsdmFsdWU6U3RyaW5nLmZyb21DaGFyQ29kZShkKSxyYW5nZTpbYyxYXX07ZGVmYXVsdDppZihhPVcuY2hhckNvZGVBdChYKzEpLDYxPT09YSlzd2l0Y2goZCl7Y2FzZSAzNzpjYXNlIDM4OmNhc2UgNDI6Y2FzZSA0MzpjYXNlIDQ1OmNhc2UgNDc6Y2FzZSA2MDpjYXNlIDYyOmNhc2UgMTI0OnJldHVybiBYKz0yLHt0eXBlOlMuUHVuY3R1YXRvcix2YWx1ZTpTdHJpbmcuZnJvbUNoYXJDb2RlKGQpK1N0cmluZy5mcm9tQ2hhckNvZGUoYSkscmFuZ2U6W2MsWF19O2Nhc2UgMzM6Y2FzZSA2MTpyZXR1cm4gWCs9Miw2MT09PVcuY2hhckNvZGVBdChYKSYmKytYLHt0eXBlOlMuUHVuY3R1YXRvcix2YWx1ZTpXLnNsaWNlKGMsWCkscmFuZ2U6W2MsWF19fX1yZXR1cm4gYj1XW1grMV0sZT09PWImJiImfCIuaW5kZXhPZihlKT49MD8oWCs9Mix7dHlwZTpTLlB1bmN0dWF0b3IsdmFsdWU6ZStiLHJhbmdlOltjLFhdfSk6Ijw+PSErLSolJnxeLyIuaW5kZXhPZihlKT49MD8oKytYLHt0eXBlOlMuUHVuY3R1YXRvcix2YWx1ZTplLHJhbmdlOltjLFhdfSk6dm9pZCBzKHt9LFYuVW5leHBlY3RlZFRva2VuLCJJTExFR0FMIil9ZnVuY3Rpb24gbSgpe3ZhciBhLGQsZTtpZihlPVdbWF0sYihjKGUuY2hhckNvZGVBdCgwKSl8fCIuIj09PWUsIk51bWVyaWMgbGl0ZXJhbCBtdXN0IHN0YXJ0IHdpdGggYSBkZWNpbWFsIGRpZ2l0IG9yIGEgZGVjaW1hbCBwb2ludCIpLGQ9WCxhPSIiLCIuIiE9PWUpe2ZvcihhPVdbWCsrXSxlPVdbWF0sIjAiPT09YSYmZSYmYyhlLmNoYXJDb2RlQXQoMCkpJiZzKHt9LFYuVW5leHBlY3RlZFRva2VuLCJJTExFR0FMIik7YyhXLmNoYXJDb2RlQXQoWCkpOylhKz1XW1grK107ZT1XW1hdfWlmKCIuIj09PWUpe2ZvcihhKz1XW1grK107YyhXLmNoYXJDb2RlQXQoWCkpOylhKz1XW1grK107ZT1XW1hdfWlmKCJlIj09PWV8fCJFIj09PWUpaWYoYSs9V1tYKytdLGU9V1tYXSwoIisiPT09ZXx8Ii0iPT09ZSkmJihhKz1XW1grK10pLGMoVy5jaGFyQ29kZUF0KFgpKSlmb3IoO2MoVy5jaGFyQ29kZUF0KFgpKTspYSs9V1tYKytdO2Vsc2Ugcyh7fSxWLlVuZXhwZWN0ZWRUb2tlbiwiSUxMRUdBTCIpO3JldHVybiBmKFcuY2hhckNvZGVBdChYKSkmJnMoe30sVi5VbmV4cGVjdGVkVG9rZW4sIklMTEVHQUwiKSx7dHlwZTpTLk51bWVyaWNMaXRlcmFsLHZhbHVlOnBhcnNlRmxvYXQoYSkscmFuZ2U6W2QsWF19fWZ1bmN0aW9uIG4oKXt2YXIgYSxjLGQsZj0iIixnPSExO2ZvcihhPVdbWF0sYigiJyI9PT1hfHwnIic9PT1hLCJTdHJpbmcgbGl0ZXJhbCBtdXN0IHN0YXJ0cyB3aXRoIGEgcXVvdGUiKSxjPVgsKytYO1k+WDspe2lmKGQ9V1tYKytdLGQ9PT1hKXthPSIiO2JyZWFrfWlmKCJcXCI9PT1kKWlmKGQ9V1tYKytdLGQmJmUoZC5jaGFyQ29kZUF0KDApKSkiXHIiPT09ZCYmIlxuIj09PVdbWF0mJisrWDtlbHNlIHN3aXRjaChkKXtjYXNlIm4iOmYrPSJcbiI7YnJlYWs7Y2FzZSJyIjpmKz0iXHIiO2JyZWFrO2Nhc2UidCI6Zis9IgkiO2JyZWFrO2Nhc2UiYiI6Zis9IlxiIjticmVhaztjYXNlImYiOmYrPSJcZiI7YnJlYWs7Y2FzZSJ2IjpmKz0iCyI7YnJlYWs7ZGVmYXVsdDpmKz1kfWVsc2V7aWYoZShkLmNoYXJDb2RlQXQoMCkpKWJyZWFrO2YrPWR9fXJldHVybiIiIT09YSYmcyh7fSxWLlVuZXhwZWN0ZWRUb2tlbiwiSUxMRUdBTCIpLHt0eXBlOlMuU3RyaW5nTGl0ZXJhbCx2YWx1ZTpmLG9jdGFsOmcscmFuZ2U6W2MsWF19fWZ1bmN0aW9uIG8oYSl7cmV0dXJuIGEudHlwZT09PVMuSWRlbnRpZmllcnx8YS50eXBlPT09Uy5LZXl3b3JkfHxhLnR5cGU9PT1TLkJvb2xlYW5MaXRlcmFsfHxhLnR5cGU9PT1TLk51bGxMaXRlcmFsfWZ1bmN0aW9uIHAoKXt2YXIgYTtyZXR1cm4gaSgpLFg+PVk/e3R5cGU6Uy5FT0YscmFuZ2U6W1gsWF19OihhPVcuY2hhckNvZGVBdChYKSw0MD09PWF8fDQxPT09YXx8NTg9PT1hP2woKTozOT09PWF8fDM0PT09YT9uKCk6ZihhKT9rKCk6NDY9PT1hP2MoVy5jaGFyQ29kZUF0KFgrMSkpP20oKTpsKCk6YyhhKT9tKCk6bCgpKX1mdW5jdGlvbiBxKCl7dmFyIGE7cmV0dXJuIGE9JCxYPWEucmFuZ2VbMV0sJD1wKCksWD1hLnJhbmdlWzFdLGF9ZnVuY3Rpb24gcigpe3ZhciBhO2E9WCwkPXAoKSxYPWF9ZnVuY3Rpb24gcyhhLGMpe3ZhciBkLGU9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDIpLGY9Yy5yZXBsYWNlKC8lKFxkKS9nLGZ1bmN0aW9uKGEsYyl7cmV0dXJuIGIoYzxlLmxlbmd0aCwiTWVzc2FnZSByZWZlcmVuY2UgbXVzdCBiZSBpbiByYW5nZSIpLGVbY119KTt0aHJvdyBkPW5ldyBFcnJvcihmKSxkLmluZGV4PVgsZC5kZXNjcmlwdGlvbj1mLGR9ZnVuY3Rpb24gdChhKXtzKGEsVi5VbmV4cGVjdGVkVG9rZW4sYS52YWx1ZSl9ZnVuY3Rpb24gdShhKXt2YXIgYj1xKCk7KGIudHlwZSE9PVMuUHVuY3R1YXRvcnx8Yi52YWx1ZSE9PWEpJiZ0KGIpfWZ1bmN0aW9uIHYoYSl7cmV0dXJuICQudHlwZT09PVMuUHVuY3R1YXRvciYmJC52YWx1ZT09PWF9ZnVuY3Rpb24gdyhhKXtyZXR1cm4gJC50eXBlPT09Uy5LZXl3b3JkJiYkLnZhbHVlPT09YX1mdW5jdGlvbiB4KCl7dmFyIGE9W107Zm9yKHUoIlsiKTshdigiXSIpOyl2KCIsIik/KHEoKSxhLnB1c2gobnVsbCkpOihhLnB1c2goYmIoKSksdigiXSIpfHx1KCIsIikpO3JldHVybiB1KCJdIiksWi5jcmVhdGVBcnJheUV4cHJlc3Npb24oYSl9ZnVuY3Rpb24geSgpe3ZhciBhO3JldHVybiBpKCksYT1xKCksYS50eXBlPT09Uy5TdHJpbmdMaXRlcmFsfHxhLnR5cGU9PT1TLk51bWVyaWNMaXRlcmFsP1ouY3JlYXRlTGl0ZXJhbChhKTpaLmNyZWF0ZUlkZW50aWZpZXIoYS52YWx1ZSl9ZnVuY3Rpb24geigpe3ZhciBhLGI7cmV0dXJuIGE9JCxpKCksKGEudHlwZT09PVMuRU9GfHxhLnR5cGU9PT1TLlB1bmN0dWF0b3IpJiZ0KGEpLGI9eSgpLHUoIjoiKSxaLmNyZWF0ZVByb3BlcnR5KCJpbml0IixiLGJiKCkpfWZ1bmN0aW9uIEEoKXt2YXIgYT1bXTtmb3IodSgieyIpOyF2KCJ9Iik7KWEucHVzaCh6KCkpLHYoIn0iKXx8dSgiLCIpO3JldHVybiB1KCJ9IiksWi5jcmVhdGVPYmplY3RFeHByZXNzaW9uKGEpfWZ1bmN0aW9uIEIoKXt2YXIgYTtyZXR1cm4gdSgiKCIpLGE9YmIoKSx1KCIpIiksYX1mdW5jdGlvbiBDKCl7dmFyIGEsYixjO3JldHVybiB2KCIoIik/QigpOihhPSQudHlwZSxhPT09Uy5JZGVudGlmaWVyP2M9Wi5jcmVhdGVJZGVudGlmaWVyKHEoKS52YWx1ZSk6YT09PVMuU3RyaW5nTGl0ZXJhbHx8YT09PVMuTnVtZXJpY0xpdGVyYWw/Yz1aLmNyZWF0ZUxpdGVyYWwocSgpKTphPT09Uy5LZXl3b3JkP3coInRoaXMiKSYmKHEoKSxjPVouY3JlYXRlVGhpc0V4cHJlc3Npb24oKSk6YT09PVMuQm9vbGVhbkxpdGVyYWw/KGI9cSgpLGIudmFsdWU9InRydWUiPT09Yi52YWx1ZSxjPVouY3JlYXRlTGl0ZXJhbChiKSk6YT09PVMuTnVsbExpdGVyYWw/KGI9cSgpLGIudmFsdWU9bnVsbCxjPVouY3JlYXRlTGl0ZXJhbChiKSk6digiWyIpP2M9eCgpOnYoInsiKSYmKGM9QSgpKSxjP2M6dm9pZCB0KHEoKSkpfWZ1bmN0aW9uIEQoKXt2YXIgYT1bXTtpZih1KCIoIiksIXYoIikiKSlmb3IoO1k+WCYmKGEucHVzaChiYigpKSwhdigiKSIpKTspdSgiLCIpO3JldHVybiB1KCIpIiksYX1mdW5jdGlvbiBFKCl7dmFyIGE7cmV0dXJuIGE9cSgpLG8oYSl8fHQoYSksWi5jcmVhdGVJZGVudGlmaWVyKGEudmFsdWUpfWZ1bmN0aW9uIEYoKXtyZXR1cm4gdSgiLiIpLEUoKX1mdW5jdGlvbiBHKCl7dmFyIGE7cmV0dXJuIHUoIlsiKSxhPWJiKCksdSgiXSIpLGF9ZnVuY3Rpb24gSCgpe3ZhciBhLGIsYztmb3IoYT1DKCk7OylpZih2KCJbIikpYz1HKCksYT1aLmNyZWF0ZU1lbWJlckV4cHJlc3Npb24oIlsiLGEsYyk7ZWxzZSBpZih2KCIuIikpYz1GKCksYT1aLmNyZWF0ZU1lbWJlckV4cHJlc3Npb24oIi4iLGEsYyk7ZWxzZXtpZighdigiKCIpKWJyZWFrO2I9RCgpLGE9Wi5jcmVhdGVDYWxsRXhwcmVzc2lvbihhLGIpfXJldHVybiBhfWZ1bmN0aW9uIEkoKXt2YXIgYSxiO3JldHVybiAkLnR5cGUhPT1TLlB1bmN0dWF0b3ImJiQudHlwZSE9PVMuS2V5d29yZD9iPWFiKCk6digiKyIpfHx2KCItIil8fHYoIiEiKT8oYT1xKCksYj1JKCksYj1aLmNyZWF0ZVVuYXJ5RXhwcmVzc2lvbihhLnZhbHVlLGIpKTp3KCJkZWxldGUiKXx8dygidm9pZCIpfHx3KCJ0eXBlb2YiKT9zKHt9LFYuVW5leHBlY3RlZFRva2VuKTpiPWFiKCksYn1mdW5jdGlvbiBKKGEpe3ZhciBiPTA7aWYoYS50eXBlIT09Uy5QdW5jdHVhdG9yJiZhLnR5cGUhPT1TLktleXdvcmQpcmV0dXJuIDA7c3dpdGNoKGEudmFsdWUpe2Nhc2UifHwiOmI9MTticmVhaztjYXNlIiYmIjpiPTI7YnJlYWs7Y2FzZSI9PSI6Y2FzZSIhPSI6Y2FzZSI9PT0iOmNhc2UiIT09IjpiPTY7YnJlYWs7Y2FzZSI8IjpjYXNlIj4iOmNhc2UiPD0iOmNhc2UiPj0iOmNhc2UiaW5zdGFuY2VvZiI6Yj03O2JyZWFrO2Nhc2UiaW4iOmI9NzticmVhaztjYXNlIisiOmNhc2UiLSI6Yj05O2JyZWFrO2Nhc2UiKiI6Y2FzZSIvIjpjYXNlIiUiOmI9MTF9cmV0dXJuIGJ9ZnVuY3Rpb24gSygpe3ZhciBhLGIsYyxkLGUsZixnLGg7aWYoZz1JKCksYj0kLGM9SihiKSwwPT09YylyZXR1cm4gZztmb3IoYi5wcmVjPWMscSgpLGU9SSgpLGQ9W2csYixlXTsoYz1KKCQpKT4wOyl7Zm9yKDtkLmxlbmd0aD4yJiZjPD1kW2QubGVuZ3RoLTJdLnByZWM7KWU9ZC5wb3AoKSxmPWQucG9wKCkudmFsdWUsZz1kLnBvcCgpLGE9Wi5jcmVhdGVCaW5hcnlFeHByZXNzaW9uKGYsZyxlKSxkLnB1c2goYSk7Yj1xKCksYi5wcmVjPWMsZC5wdXNoKGIpLGE9SSgpLGQucHVzaChhKX1mb3IoaD1kLmxlbmd0aC0xLGE9ZFtoXTtoPjE7KWE9Wi5jcmVhdGVCaW5hcnlFeHByZXNzaW9uKGRbaC0xXS52YWx1ZSxkW2gtMl0sYSksaC09MjtyZXR1cm4gYX1mdW5jdGlvbiBMKCl7dmFyIGEsYixjO3JldHVybiBhPUsoKSx2KCI/IikmJihxKCksYj1MKCksdSgiOiIpLGM9TCgpLGE9Wi5jcmVhdGVDb25kaXRpb25hbEV4cHJlc3Npb24oYSxiLGMpKSxhfWZ1bmN0aW9uIE0oKXt2YXIgYSxiO3JldHVybiBhPXEoKSxhLnR5cGUhPT1TLklkZW50aWZpZXImJnQoYSksYj12KCIoIik/RCgpOltdLFouY3JlYXRlRmlsdGVyKGEudmFsdWUsYil9ZnVuY3Rpb24gTigpe2Zvcig7digifCIpOylxKCksTSgpfWZ1bmN0aW9uIE8oKXtpKCkscigpO3ZhciBhPWJiKCk7YSYmKCIsIj09PSQudmFsdWV8fCJpbiI9PSQudmFsdWUmJmEudHlwZT09PVUuSWRlbnRpZmllcj9RKGEpOihOKCksImFzIj09PSQudmFsdWU/UChhKTpaLmNyZWF0ZVRvcExldmVsKGEpKSksJC50eXBlIT09Uy5FT0YmJnQoJCl9ZnVuY3Rpb24gUChhKXtxKCk7dmFyIGI9cSgpLnZhbHVlO1ouY3JlYXRlQXNFeHByZXNzaW9uKGEsYil9ZnVuY3Rpb24gUShhKXt2YXIgYjsiLCI9PT0kLnZhbHVlJiYocSgpLCQudHlwZSE9PVMuSWRlbnRpZmllciYmdCgkKSxiPXEoKS52YWx1ZSkscSgpO3ZhciBjPWJiKCk7TigpLFouY3JlYXRlSW5FeHByZXNzaW9uKGEubmFtZSxiLGMpfWZ1bmN0aW9uIFIoYSxiKXtyZXR1cm4gWj1iLFc9YSxYPTAsWT1XLmxlbmd0aCwkPW51bGwsXz17bGFiZWxTZXQ6e319LE8oKX12YXIgUyxULFUsVixXLFgsWSxaLCQsXztTPXtCb29sZWFuTGl0ZXJhbDoxLEVPRjoyLElkZW50aWZpZXI6MyxLZXl3b3JkOjQsTnVsbExpdGVyYWw6NSxOdW1lcmljTGl0ZXJhbDo2LFB1bmN0dWF0b3I6NyxTdHJpbmdMaXRlcmFsOjh9LFQ9e30sVFtTLkJvb2xlYW5MaXRlcmFsXT0iQm9vbGVhbiIsVFtTLkVPRl09IjxlbmQ+IixUW1MuSWRlbnRpZmllcl09IklkZW50aWZpZXIiLFRbUy5LZXl3b3JkXT0iS2V5d29yZCIsVFtTLk51bGxMaXRlcmFsXT0iTnVsbCIsVFtTLk51bWVyaWNMaXRlcmFsXT0iTnVtZXJpYyIsVFtTLlB1bmN0dWF0b3JdPSJQdW5jdHVhdG9yIixUW1MuU3RyaW5nTGl0ZXJhbF09IlN0cmluZyIsVT17QXJyYXlFeHByZXNzaW9uOiJBcnJheUV4cHJlc3Npb24iLEJpbmFyeUV4cHJlc3Npb246IkJpbmFyeUV4cHJlc3Npb24iLENhbGxFeHByZXNzaW9uOiJDYWxsRXhwcmVzc2lvbiIsQ29uZGl0aW9uYWxFeHByZXNzaW9uOiJDb25kaXRpb25hbEV4cHJlc3Npb24iLEVtcHR5U3RhdGVtZW50OiJFbXB0eVN0YXRlbWVudCIsRXhwcmVzc2lvblN0YXRlbWVudDoiRXhwcmVzc2lvblN0YXRlbWVudCIsSWRlbnRpZmllcjoiSWRlbnRpZmllciIsTGl0ZXJhbDoiTGl0ZXJhbCIsTGFiZWxlZFN0YXRlbWVudDoiTGFiZWxlZFN0YXRlbWVudCIsTG9naWNhbEV4cHJlc3Npb246IkxvZ2ljYWxFeHByZXNzaW9uIixNZW1iZXJFeHByZXNzaW9uOiJNZW1iZXJFeHByZXNzaW9uIixPYmplY3RFeHByZXNzaW9uOiJPYmplY3RFeHByZXNzaW9uIixQcm9ncmFtOiJQcm9ncmFtIixQcm9wZXJ0eToiUHJvcGVydHkiLFRoaXNFeHByZXNzaW9uOiJUaGlzRXhwcmVzc2lvbiIsVW5hcnlFeHByZXNzaW9uOiJVbmFyeUV4cHJlc3Npb24ifSxWPXtVbmV4cGVjdGVkVG9rZW46IlVuZXhwZWN0ZWQgdG9rZW4gJTAiLFVua25vd25MYWJlbDoiVW5kZWZpbmVkIGxhYmVsICclMCciLFJlZGVjbGFyYXRpb246IiUwICclMScgaGFzIGFscmVhZHkgYmVlbiBkZWNsYXJlZCJ9O3ZhciBhYj1ILGJiPUw7YS5lc3ByaW1hPXtwYXJzZTpSfX0odGhpcyksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSxiLGQsZSl7dmFyIGY7dHJ5e2lmKGY9YyhhKSxmLnNjb3BlSWRlbnQmJihkLm5vZGVUeXBlIT09Tm9kZS5FTEVNRU5UX05PREV8fCJURU1QTEFURSIhPT1kLnRhZ05hbWV8fCJiaW5kIiE9PWImJiJyZXBlYXQiIT09YikpdGhyb3cgRXJyb3IoImFzIGFuZCBpbiBjYW4gb25seSBiZSB1c2VkIHdpdGhpbiA8dGVtcGxhdGUgYmluZC9yZXBlYXQ+Iil9Y2F0Y2goZyl7cmV0dXJuIHZvaWQgY29uc29sZS5lcnJvcigiSW52YWxpZCBleHByZXNzaW9uIHN5bnRheDogIithLGcpfXJldHVybiBmdW5jdGlvbihhLGIsYyl7dmFyIGQ9Zi5nZXRCaW5kaW5nKGEsZSxjKTtyZXR1cm4gZi5zY29wZUlkZW50JiZkJiYoYi5wb2x5bWVyRXhwcmVzc2lvblNjb3BlSWRlbnRfPWYuc2NvcGVJZGVudCxmLmluZGV4SWRlbnQmJihiLnBvbHltZXJFeHByZXNzaW9uSW5kZXhJZGVudF89Zi5pbmRleElkZW50KSksZH19ZnVuY3Rpb24gYyhhKXt2YXIgYj1xW2FdO2lmKCFiKXt2YXIgYz1uZXcgajtlc3ByaW1hLnBhcnNlKGEsYyksYj1uZXcgbChjKSxxW2FdPWJ9cmV0dXJuIGJ9ZnVuY3Rpb24gZChhKXt0aGlzLnZhbHVlPWEsdGhpcy52YWx1ZUZuXz12b2lkIDB9ZnVuY3Rpb24gZShhKXt0aGlzLm5hbWU9YSx0aGlzLnBhdGg9UGF0aC5nZXQoYSl9ZnVuY3Rpb24gZihhLGIsYyl7dGhpcy5jb21wdXRlZD0iWyI9PWMsdGhpcy5keW5hbWljRGVwcz0iZnVuY3Rpb24iPT10eXBlb2YgYXx8YS5keW5hbWljRGVwc3x8dGhpcy5jb21wdXRlZCYmIShiIGluc3RhbmNlb2YgZCksdGhpcy5zaW1wbGVQYXRoPSF0aGlzLmR5bmFtaWNEZXBzJiYoYiBpbnN0YW5jZW9mIGV8fGIgaW5zdGFuY2VvZiBkKSYmKGEgaW5zdGFuY2VvZiBmfHxhIGluc3RhbmNlb2YgZSksdGhpcy5vYmplY3Q9dGhpcy5zaW1wbGVQYXRoP2E6aShhKSx0aGlzLnByb3BlcnR5PSF0aGlzLmNvbXB1dGVkfHx0aGlzLnNpbXBsZVBhdGg/YjppKGIpfWZ1bmN0aW9uIGcoYSxiKXt0aGlzLm5hbWU9YSx0aGlzLmFyZ3M9W107Zm9yKHZhciBjPTA7YzxiLmxlbmd0aDtjKyspdGhpcy5hcmdzW2NdPWkoYltjXSl9ZnVuY3Rpb24gaCgpe3Rocm93IEVycm9yKCJOb3QgSW1wbGVtZW50ZWQiKX1mdW5jdGlvbiBpKGEpe3JldHVybiJmdW5jdGlvbiI9PXR5cGVvZiBhP2E6YS52YWx1ZUZuKCl9ZnVuY3Rpb24gaigpe3RoaXMuZXhwcmVzc2lvbj1udWxsLHRoaXMuZmlsdGVycz1bXSx0aGlzLmRlcHM9e30sdGhpcy5jdXJyZW50UGF0aD12b2lkIDAsdGhpcy5zY29wZUlkZW50PXZvaWQgMCx0aGlzLmluZGV4SWRlbnQ9dm9pZCAwLHRoaXMuZHluYW1pY0RlcHM9ITF9ZnVuY3Rpb24gayhhKXt0aGlzLnZhbHVlXz1hfWZ1bmN0aW9uIGwoYSl7aWYodGhpcy5zY29wZUlkZW50PWEuc2NvcGVJZGVudCx0aGlzLmluZGV4SWRlbnQ9YS5pbmRleElkZW50LCFhLmV4cHJlc3Npb24pdGhyb3cgRXJyb3IoIk5vIGV4cHJlc3Npb24gZm91bmQuIik7dGhpcy5leHByZXNzaW9uPWEuZXhwcmVzc2lvbixpKHRoaXMuZXhwcmVzc2lvbiksdGhpcy5maWx0ZXJzPWEuZmlsdGVycyx0aGlzLmR5bmFtaWNEZXBzPWEuZHluYW1pY0RlcHN9ZnVuY3Rpb24gbShhKXtyZXR1cm4gU3RyaW5nKGEpLnJlcGxhY2UoL1tBLVpdL2csZnVuY3Rpb24oYSl7cmV0dXJuIi0iK2EudG9Mb3dlckNhc2UoKX0pfWZ1bmN0aW9uIG4oYSxiKXtmb3IoO2FbdF0mJiFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYSxiKTspYT1hW3RdO3JldHVybiBhfWZ1bmN0aW9uIG8oYSl7c3dpdGNoKGEpe2Nhc2UiIjpyZXR1cm4hMTtjYXNlImZhbHNlIjpjYXNlIm51bGwiOmNhc2UidHJ1ZSI6cmV0dXJuITB9cmV0dXJuIGlzTmFOKE51bWJlcihhKSk/ITE6ITB9ZnVuY3Rpb24gcCgpe312YXIgcT1PYmplY3QuY3JlYXRlKG51bGwpO2QucHJvdG90eXBlPXt2YWx1ZUZuOmZ1bmN0aW9uKCl7aWYoIXRoaXMudmFsdWVGbl8pe3ZhciBhPXRoaXMudmFsdWU7dGhpcy52YWx1ZUZuXz1mdW5jdGlvbigpe3JldHVybiBhfX1yZXR1cm4gdGhpcy52YWx1ZUZuX319LGUucHJvdG90eXBlPXt2YWx1ZUZuOmZ1bmN0aW9uKCl7aWYoIXRoaXMudmFsdWVGbl8pe3ZhciBhPSh0aGlzLm5hbWUsdGhpcy5wYXRoKTt0aGlzLnZhbHVlRm5fPWZ1bmN0aW9uKGIsYyl7cmV0dXJuIGMmJmMuYWRkUGF0aChiLGEpLGEuZ2V0VmFsdWVGcm9tKGIpfX1yZXR1cm4gdGhpcy52YWx1ZUZuX30sc2V0VmFsdWU6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gMT09dGhpcy5wYXRoLmxlbmd0aCxhPW4oYSx0aGlzLnBhdGhbMF0pLHRoaXMucGF0aC5zZXRWYWx1ZUZyb20oYSxiKX19LGYucHJvdG90eXBlPXtnZXQgZnVsbFBhdGgoKXtpZighdGhpcy5mdWxsUGF0aF8pe3ZhciBhPXRoaXMub2JqZWN0IGluc3RhbmNlb2YgZj90aGlzLm9iamVjdC5mdWxsUGF0aC5zbGljZSgpOlt0aGlzLm9iamVjdC5uYW1lXTsKYS5wdXNoKHRoaXMucHJvcGVydHkgaW5zdGFuY2VvZiBlP3RoaXMucHJvcGVydHkubmFtZTp0aGlzLnByb3BlcnR5LnZhbHVlKSx0aGlzLmZ1bGxQYXRoXz1QYXRoLmdldChhKX1yZXR1cm4gdGhpcy5mdWxsUGF0aF99LHZhbHVlRm46ZnVuY3Rpb24oKXtpZighdGhpcy52YWx1ZUZuXyl7dmFyIGE9dGhpcy5vYmplY3Q7aWYodGhpcy5zaW1wbGVQYXRoKXt2YXIgYj10aGlzLmZ1bGxQYXRoO3RoaXMudmFsdWVGbl89ZnVuY3Rpb24oYSxjKXtyZXR1cm4gYyYmYy5hZGRQYXRoKGEsYiksYi5nZXRWYWx1ZUZyb20oYSl9fWVsc2UgaWYodGhpcy5jb21wdXRlZCl7dmFyIGM9dGhpcy5wcm9wZXJ0eTt0aGlzLnZhbHVlRm5fPWZ1bmN0aW9uKGIsZCxlKXt2YXIgZj1hKGIsZCxlKSxnPWMoYixkLGUpO3JldHVybiBkJiZkLmFkZFBhdGgoZixbZ10pLGY/ZltnXTp2b2lkIDB9fWVsc2V7dmFyIGI9UGF0aC5nZXQodGhpcy5wcm9wZXJ0eS5uYW1lKTt0aGlzLnZhbHVlRm5fPWZ1bmN0aW9uKGMsZCxlKXt2YXIgZj1hKGMsZCxlKTtyZXR1cm4gZCYmZC5hZGRQYXRoKGYsYiksYi5nZXRWYWx1ZUZyb20oZil9fX1yZXR1cm4gdGhpcy52YWx1ZUZuX30sc2V0VmFsdWU6ZnVuY3Rpb24oYSxiKXtpZih0aGlzLnNpbXBsZVBhdGgpcmV0dXJuIHRoaXMuZnVsbFBhdGguc2V0VmFsdWVGcm9tKGEsYiksYjt2YXIgYz10aGlzLm9iamVjdChhKSxkPXRoaXMucHJvcGVydHkgaW5zdGFuY2VvZiBlP3RoaXMucHJvcGVydHkubmFtZTp0aGlzLnByb3BlcnR5KGEpO3JldHVybiBjW2RdPWJ9fSxnLnByb3RvdHlwZT17dHJhbnNmb3JtOmZ1bmN0aW9uKGEsYixjLGQsZSl7dmFyIGY9Y1t0aGlzLm5hbWVdLGc9YTtpZihmKWc9dm9pZCAwO2Vsc2UgaWYoZj1nW3RoaXMubmFtZV0sIWYpcmV0dXJuIHZvaWQgY29uc29sZS5lcnJvcigiQ2Fubm90IGZpbmQgZnVuY3Rpb24gb3IgZmlsdGVyOiAiK3RoaXMubmFtZSk7aWYoZD9mPWYudG9Nb2RlbDoiZnVuY3Rpb24iPT10eXBlb2YgZi50b0RPTSYmKGY9Zi50b0RPTSksImZ1bmN0aW9uIiE9dHlwZW9mIGYpcmV0dXJuIHZvaWQgY29uc29sZS5lcnJvcigiQ2Fubm90IGZpbmQgZnVuY3Rpb24gb3IgZmlsdGVyOiAiK3RoaXMubmFtZSk7Zm9yKHZhciBoPWV8fFtdLGo9MDtqPHRoaXMuYXJncy5sZW5ndGg7aisrKWgucHVzaChpKHRoaXMuYXJnc1tqXSkoYSxiLGMpKTtyZXR1cm4gZi5hcHBseShnLGgpfX07dmFyIHI9eyIrIjpmdW5jdGlvbihhKXtyZXR1cm4rYX0sIi0iOmZ1bmN0aW9uKGEpe3JldHVybi1hfSwiISI6ZnVuY3Rpb24oYSl7cmV0dXJuIWF9fSxzPXsiKyI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYStifSwiLSI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYS1ifSwiKiI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYSpifSwiLyI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYS9ifSwiJSI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYSVifSwiPCI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYj5hfSwiPiI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT5ifSwiPD0iOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGI+PWF9LCI+PSI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT49Yn0sIj09IjpmdW5jdGlvbihhLGIpe3JldHVybiBhPT1ifSwiIT0iOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGEhPWJ9LCI9PT0iOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGE9PT1ifSwiIT09IjpmdW5jdGlvbihhLGIpe3JldHVybiBhIT09Yn0sIiYmIjpmdW5jdGlvbihhLGIpe3JldHVybiBhJiZifSwifHwiOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGF8fGJ9fTtqLnByb3RvdHlwZT17Y3JlYXRlVW5hcnlFeHByZXNzaW9uOmZ1bmN0aW9uKGEsYil7aWYoIXJbYV0pdGhyb3cgRXJyb3IoIkRpc2FsbG93ZWQgb3BlcmF0b3I6ICIrYSk7cmV0dXJuIGI9aShiKSxmdW5jdGlvbihjLGQsZSl7cmV0dXJuIHJbYV0oYihjLGQsZSkpfX0sY3JlYXRlQmluYXJ5RXhwcmVzc2lvbjpmdW5jdGlvbihhLGIsYyl7aWYoIXNbYV0pdGhyb3cgRXJyb3IoIkRpc2FsbG93ZWQgb3BlcmF0b3I6ICIrYSk7c3dpdGNoKGI9aShiKSxjPWkoYyksYSl7Y2FzZSJ8fCI6cmV0dXJuIHRoaXMuZHluYW1pY0RlcHM9ITAsZnVuY3Rpb24oYSxkLGUpe3JldHVybiBiKGEsZCxlKXx8YyhhLGQsZSl9O2Nhc2UiJiYiOnJldHVybiB0aGlzLmR5bmFtaWNEZXBzPSEwLGZ1bmN0aW9uKGEsZCxlKXtyZXR1cm4gYihhLGQsZSkmJmMoYSxkLGUpfX1yZXR1cm4gZnVuY3Rpb24oZCxlLGYpe3JldHVybiBzW2FdKGIoZCxlLGYpLGMoZCxlLGYpKX19LGNyZWF0ZUNvbmRpdGlvbmFsRXhwcmVzc2lvbjpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGE9aShhKSxiPWkoYiksYz1pKGMpLHRoaXMuZHluYW1pY0RlcHM9ITAsZnVuY3Rpb24oZCxlLGYpe3JldHVybiBhKGQsZSxmKT9iKGQsZSxmKTpjKGQsZSxmKX19LGNyZWF0ZUlkZW50aWZpZXI6ZnVuY3Rpb24oYSl7dmFyIGI9bmV3IGUoYSk7cmV0dXJuIGIudHlwZT0iSWRlbnRpZmllciIsYn0sY3JlYXRlTWVtYmVyRXhwcmVzc2lvbjpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9bmV3IGYoYixjLGEpO3JldHVybiBkLmR5bmFtaWNEZXBzJiYodGhpcy5keW5hbWljRGVwcz0hMCksZH0sY3JlYXRlQ2FsbEV4cHJlc3Npb246ZnVuY3Rpb24oYSxiKXtpZighKGEgaW5zdGFuY2VvZiBlKSl0aHJvdyBFcnJvcigiT25seSBpZGVudGlmaWVyIGZ1bmN0aW9uIGludm9jYXRpb25zIGFyZSBhbGxvd2VkIik7dmFyIGM9bmV3IGcoYS5uYW1lLGIpO3JldHVybiBmdW5jdGlvbihhLGIsZCl7cmV0dXJuIGMudHJhbnNmb3JtKGEsYixkLCExKX19LGNyZWF0ZUxpdGVyYWw6ZnVuY3Rpb24oYSl7cmV0dXJuIG5ldyBkKGEudmFsdWUpfSxjcmVhdGVBcnJheUV4cHJlc3Npb246ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPTA7YjxhLmxlbmd0aDtiKyspYVtiXT1pKGFbYl0pO3JldHVybiBmdW5jdGlvbihiLGMsZCl7Zm9yKHZhciBlPVtdLGY9MDtmPGEubGVuZ3RoO2YrKyllLnB1c2goYVtmXShiLGMsZCkpO3JldHVybiBlfX0sY3JlYXRlUHJvcGVydHk6ZnVuY3Rpb24oYSxiLGMpe3JldHVybntrZXk6YiBpbnN0YW5jZW9mIGU/Yi5uYW1lOmIudmFsdWUsdmFsdWU6Y319LGNyZWF0ZU9iamVjdEV4cHJlc3Npb246ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPTA7YjxhLmxlbmd0aDtiKyspYVtiXS52YWx1ZT1pKGFbYl0udmFsdWUpO3JldHVybiBmdW5jdGlvbihiLGMsZCl7Zm9yKHZhciBlPXt9LGY9MDtmPGEubGVuZ3RoO2YrKyllW2FbZl0ua2V5XT1hW2ZdLnZhbHVlKGIsYyxkKTtyZXR1cm4gZX19LGNyZWF0ZUZpbHRlcjpmdW5jdGlvbihhLGIpe3RoaXMuZmlsdGVycy5wdXNoKG5ldyBnKGEsYikpfSxjcmVhdGVBc0V4cHJlc3Npb246ZnVuY3Rpb24oYSxiKXt0aGlzLmV4cHJlc3Npb249YSx0aGlzLnNjb3BlSWRlbnQ9Yn0sY3JlYXRlSW5FeHByZXNzaW9uOmZ1bmN0aW9uKGEsYixjKXt0aGlzLmV4cHJlc3Npb249Yyx0aGlzLnNjb3BlSWRlbnQ9YSx0aGlzLmluZGV4SWRlbnQ9Yn0sY3JlYXRlVG9wTGV2ZWw6ZnVuY3Rpb24oYSl7dGhpcy5leHByZXNzaW9uPWF9LGNyZWF0ZVRoaXNFeHByZXNzaW9uOmh9LGsucHJvdG90eXBlPXtvcGVuOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudmFsdWVffSxkaXNjYXJkQ2hhbmdlczpmdW5jdGlvbigpe3JldHVybiB0aGlzLnZhbHVlX30sZGVsaXZlcjpmdW5jdGlvbigpe30sY2xvc2U6ZnVuY3Rpb24oKXt9fSxsLnByb3RvdHlwZT17Z2V0QmluZGluZzpmdW5jdGlvbihhLGIsYyl7ZnVuY3Rpb24gZCgpe2lmKGgpcmV0dXJuIGg9ITEsZztpLmR5bmFtaWNEZXBzJiZmLnN0YXJ0UmVzZXQoKTt2YXIgYz1pLmdldFZhbHVlKGEsaS5keW5hbWljRGVwcz9mOnZvaWQgMCxiKTtyZXR1cm4gaS5keW5hbWljRGVwcyYmZi5maW5pc2hSZXNldCgpLGN9ZnVuY3Rpb24gZShjKXtyZXR1cm4gaS5zZXRWYWx1ZShhLGMsYiksY31pZihjKXJldHVybiB0aGlzLmdldFZhbHVlKGEsdm9pZCAwLGIpO3ZhciBmPW5ldyBDb21wb3VuZE9ic2VydmVyLGc9dGhpcy5nZXRWYWx1ZShhLGYsYiksaD0hMCxpPXRoaXM7cmV0dXJuIG5ldyBPYnNlcnZlclRyYW5zZm9ybShmLGQsZSwhMCl9LGdldFZhbHVlOmZ1bmN0aW9uKGEsYixjKXtmb3IodmFyIGQ9aSh0aGlzLmV4cHJlc3Npb24pKGEsYixjKSxlPTA7ZTx0aGlzLmZpbHRlcnMubGVuZ3RoO2UrKylkPXRoaXMuZmlsdGVyc1tlXS50cmFuc2Zvcm0oYSxiLGMsITEsW2RdKTtyZXR1cm4gZH0sc2V0VmFsdWU6ZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZD10aGlzLmZpbHRlcnM/dGhpcy5maWx0ZXJzLmxlbmd0aDowO2QtLT4wOyliPXRoaXMuZmlsdGVyc1tkXS50cmFuc2Zvcm0oYSx2b2lkIDAsYywhMCxbYl0pO3JldHVybiB0aGlzLmV4cHJlc3Npb24uc2V0VmFsdWU/dGhpcy5leHByZXNzaW9uLnNldFZhbHVlKGEsYik6dm9pZCAwfX07dmFyIHQ9IkAiK01hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnNsaWNlKDIpO3AucHJvdG90eXBlPXtzdHlsZU9iamVjdDpmdW5jdGlvbihhKXt2YXIgYj1bXTtmb3IodmFyIGMgaW4gYSliLnB1c2gobShjKSsiOiAiK2FbY10pO3JldHVybiBiLmpvaW4oIjsgIil9LHRva2VuTGlzdDpmdW5jdGlvbihhKXt2YXIgYj1bXTtmb3IodmFyIGMgaW4gYSlhW2NdJiZiLnB1c2goYyk7cmV0dXJuIGIuam9pbigiICIpfSxwcmVwYXJlSW5zdGFuY2VQb3NpdGlvbkNoYW5nZWQ6ZnVuY3Rpb24oYSl7dmFyIGI9YS5wb2x5bWVyRXhwcmVzc2lvbkluZGV4SWRlbnRfO2lmKGIpcmV0dXJuIGZ1bmN0aW9uKGEsYyl7YS5tb2RlbFtiXT1jfX0scHJlcGFyZUJpbmRpbmc6ZnVuY3Rpb24oYSxjLGQpe3ZhciBlPVBhdGguZ2V0KGEpO3tpZihvKGEpfHwhZS52YWxpZClyZXR1cm4gYihhLGMsZCx0aGlzKTtpZigxPT1lLmxlbmd0aClyZXR1cm4gZnVuY3Rpb24oYSxiLGMpe2lmKGMpcmV0dXJuIGUuZ2V0VmFsdWVGcm9tKGEpO3ZhciBkPW4oYSxlWzBdKTtyZXR1cm4gbmV3IFBhdGhPYnNlcnZlcihkLGUpfX19LHByZXBhcmVJbnN0YW5jZU1vZGVsOmZ1bmN0aW9uKGEpe3ZhciBiPWEucG9seW1lckV4cHJlc3Npb25TY29wZUlkZW50XztpZihiKXt2YXIgYz1hLnRlbXBsYXRlSW5zdGFuY2U/YS50ZW1wbGF0ZUluc3RhbmNlLm1vZGVsOmEubW9kZWwsZD1hLnBvbHltZXJFeHByZXNzaW9uSW5kZXhJZGVudF87cmV0dXJuIGZ1bmN0aW9uKGEpe3JldHVybiB1KGMsYSxiLGQpfX19fTt2YXIgdT0iX19wcm90b19fImlue30/ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9e307cmV0dXJuIGVbY109YixlW2RdPXZvaWQgMCxlW3RdPWEsZS5fX3Byb3RvX189YSxlfTpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1PYmplY3QuY3JlYXRlKGEpO3JldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxjLHt2YWx1ZTpiLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLGQse3ZhbHVlOnZvaWQgMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSx0LHt2YWx1ZTphLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMH0pLGV9O2EuUG9seW1lckV4cHJlc3Npb25zPXAscC5nZXRFeHByZXNzaW9uPWN9KHRoaXMpLFBvbHltZXI9e3ZlcnNpb246IjAuNC4yIn0sImZ1bmN0aW9uIj09dHlwZW9mIHdpbmRvdy5Qb2x5bWVyJiYoUG9seW1lcj17fSksd2luZG93LlBsYXRmb3JtfHwobG9nRmxhZ3M9d2luZG93LmxvZ0ZsYWdzfHx7fSxQbGF0Zm9ybT17Zmx1c2g6ZnVuY3Rpb24oKXt9fSxDdXN0b21FbGVtZW50cz17dXNlTmF0aXZlOiEwLHJlYWR5OiEwLHRha2VSZWNvcmRzOmZ1bmN0aW9uKCl7fSwiaW5zdGFuY2VvZiI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYSBpbnN0YW5jZW9mIGJ9fSxIVE1MSW1wb3J0cz17dXNlTmF0aXZlOiEwfSxhZGRFdmVudExpc3RlbmVyKCJIVE1MSW1wb3J0c0xvYWRlZCIsZnVuY3Rpb24oKXtkb2N1bWVudC5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgiV2ViQ29tcG9uZW50c1JlYWR5Iix7YnViYmxlczohMH0pKX0pLFNoYWRvd0RPTVBvbHlmaWxsPW51bGwsd3JhcD11bndyYXA9ZnVuY3Rpb24oYSl7cmV0dXJuIGF9KSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEsYil7Yj1ifHxxLGQoZnVuY3Rpb24oKXtmKGEsYil9LGIpfWZ1bmN0aW9uIGMoYSl7cmV0dXJuImNvbXBsZXRlIj09PWEucmVhZHlTdGF0ZXx8YS5yZWFkeVN0YXRlPT09c31mdW5jdGlvbiBkKGEsYil7aWYoYyhiKSlhJiZhKCk7ZWxzZXt2YXIgZT1mdW5jdGlvbigpeygiY29tcGxldGUiPT09Yi5yZWFkeVN0YXRlfHxiLnJlYWR5U3RhdGU9PT1zKSYmKGIucmVtb3ZlRXZlbnRMaXN0ZW5lcih0LGUpLGQoYSxiKSl9O2IuYWRkRXZlbnRMaXN0ZW5lcih0LGUpfX1mdW5jdGlvbiBlKGEpe2EudGFyZ2V0Ll9fbG9hZGVkPSEwfWZ1bmN0aW9uIGYoYSxiKXtmdW5jdGlvbiBjKCl7aD09aSYmYSYmYSgpfWZ1bmN0aW9uIGQoYSl7ZShhKSxoKyssYygpfXZhciBmPWIucXVlcnlTZWxlY3RvckFsbCgibGlua1tyZWw9aW1wb3J0XSIpLGg9MCxpPWYubGVuZ3RoO2lmKGkpZm9yKHZhciBqLGs9MDtpPmsmJihqPWZba10pO2srKylnKGopP2QuY2FsbChqLHt0YXJnZXQ6an0pOihqLmFkZEV2ZW50TGlzdGVuZXIoImxvYWQiLGQpLGouYWRkRXZlbnRMaXN0ZW5lcigiZXJyb3IiLGQpKTtlbHNlIGMoKX1mdW5jdGlvbiBnKGEpe3JldHVybiBtP2EuX19sb2FkZWR8fGEuaW1wb3J0JiYibG9hZGluZyIhPT1hLmltcG9ydC5yZWFkeVN0YXRlOmEuX19pbXBvcnRQYXJzZWR9ZnVuY3Rpb24gaChhKXtmb3IodmFyIGIsYz0wLGQ9YS5sZW5ndGg7ZD5jJiYoYj1hW2NdKTtjKyspaShiKSYmaihiKX1mdW5jdGlvbiBpKGEpe3JldHVybiJsaW5rIj09PWEubG9jYWxOYW1lJiYiaW1wb3J0Ij09PWEucmVsfWZ1bmN0aW9uIGooYSl7dmFyIGI9YS5pbXBvcnQ7Yj9lKHt0YXJnZXQ6YX0pOihhLmFkZEV2ZW50TGlzdGVuZXIoImxvYWQiLGUpLGEuYWRkRXZlbnRMaXN0ZW5lcigiZXJyb3IiLGUpKX12YXIgaz0iaW1wb3J0IixsPWsgaW4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgibGluayIpLG09bCxuPS9UcmlkZW50Ly50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpLG89Qm9vbGVhbih3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLHA9ZnVuY3Rpb24oYSl7cmV0dXJuIG8/U2hhZG93RE9NUG9seWZpbGwud3JhcElmTmVlZGVkKGEpOmF9LHE9cChkb2N1bWVudCkscj17Z2V0OmZ1bmN0aW9uKCl7dmFyIGE9SFRNTEltcG9ydHMuY3VycmVudFNjcmlwdHx8ZG9jdW1lbnQuY3VycmVudFNjcmlwdHx8KCJjb21wbGV0ZSIhPT1kb2N1bWVudC5yZWFkeVN0YXRlP2RvY3VtZW50LnNjcmlwdHNbZG9jdW1lbnQuc2NyaXB0cy5sZW5ndGgtMV06bnVsbCk7cmV0dXJuIHAoYSl9LGNvbmZpZ3VyYWJsZTohMH07T2JqZWN0LmRlZmluZVByb3BlcnR5KGRvY3VtZW50LCJfY3VycmVudFNjcmlwdCIsciksT2JqZWN0LmRlZmluZVByb3BlcnR5KHEsIl9jdXJyZW50U2NyaXB0IixyKTt2YXIgcz1uPyJjb21wbGV0ZSI6ImludGVyYWN0aXZlIix0PSJyZWFkeXN0YXRlY2hhbmdlIjttJiYobmV3IE11dGF0aW9uT2JzZXJ2ZXIoZnVuY3Rpb24oYSl7Zm9yKHZhciBiLGM9MCxkPWEubGVuZ3RoO2Q+YyYmKGI9YVtjXSk7YysrKWIuYWRkZWROb2RlcyYmaChiLmFkZGVkTm9kZXMpfSkub2JzZXJ2ZShkb2N1bWVudC5oZWFkLHtjaGlsZExpc3Q6ITB9KSxmdW5jdGlvbigpe2lmKCJsb2FkaW5nIj09PWRvY3VtZW50LnJlYWR5U3RhdGUpZm9yKHZhciBhLGI9ZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgibGlua1tyZWw9aW1wb3J0XSIpLGM9MCxkPWIubGVuZ3RoO2Q+YyYmKGE9YltjXSk7YysrKWooYSl9KCkpLGIoZnVuY3Rpb24oKXtIVE1MSW1wb3J0cy5yZWFkeT0hMCxIVE1MSW1wb3J0cy5yZWFkeVRpbWU9KG5ldyBEYXRlKS5nZXRUaW1lKCkscS5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgiSFRNTEltcG9ydHNMb2FkZWQiLHtidWJibGVzOiEwfSkpfSksYS51c2VOYXRpdmU9bSxhLmlzSW1wb3J0TG9hZGVkPWcsYS53aGVuUmVhZHk9YixhLnJvb3REb2N1bWVudD1xLGEuSU1QT1JUX0xJTktfVFlQRT1rLGEuaXNJRT1ufSh3aW5kb3cuSFRNTEltcG9ydHMpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSxiKXtyZXR1cm4gYj1ifHxbXSxiLm1hcHx8KGI9W2JdKSxhLmFwcGx5KHRoaXMsYi5tYXAoZCkpfWZ1bmN0aW9uIGMoYSxjLGQpe3ZhciBlO3N3aXRjaChhcmd1bWVudHMubGVuZ3RoKXtjYXNlIDA6cmV0dXJuO2Nhc2UgMTplPW51bGw7YnJlYWs7Y2FzZSAyOmU9Yy5hcHBseSh0aGlzKTticmVhaztkZWZhdWx0OmU9YihkLGMpfWZbYV09ZX1mdW5jdGlvbiBkKGEpe3JldHVybiBmW2FdfWZ1bmN0aW9uIGUoYSxjKXtIVE1MSW1wb3J0cy53aGVuSW1wb3J0c1JlYWR5KGZ1bmN0aW9uKCl7YihjLGEpfSl9dmFyIGY9e307YS5tYXJzaGFsPWQsYS5tb2R1bGFyaXplPWMsYS51c2luZz1lfSh3aW5kb3cpLGZ1bmN0aW9uKCl7dmFyIGE9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3R5bGUiKTthLnRleHRDb250ZW50PSJib2R5IHt0cmFuc2l0aW9uOiBvcGFjaXR5IGVhc2UtaW4gMC4yczsgfSBcbmJvZHlbdW5yZXNvbHZlZF0ge29wYWNpdHk6IDA7IGRpc3BsYXk6IGJsb2NrOyBvdmVyZmxvdzogaGlkZGVuOyB9IFxuIjt2YXIgYj1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCJoZWFkIik7Yi5pbnNlcnRCZWZvcmUoYSxiLmZpcnN0Q2hpbGQpfShQbGF0Zm9ybSksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoKXtmdW5jdGlvbiBhKGEpe2I9YX1pZigiZnVuY3Rpb24iIT10eXBlb2YgT2JqZWN0Lm9ic2VydmV8fCJmdW5jdGlvbiIhPXR5cGVvZiBBcnJheS5vYnNlcnZlKXJldHVybiExO3ZhciBiPVtdLGM9e30sZD1bXTtyZXR1cm4gT2JqZWN0Lm9ic2VydmUoYyxhKSxBcnJheS5vYnNlcnZlKGQsYSksYy5pZD0xLGMuaWQ9MixkZWxldGUgYy5pZCxkLnB1c2goMSwyKSxkLmxlbmd0aD0wLE9iamVjdC5kZWxpdmVyQ2hhbmdlUmVjb3JkcyhhKSw1IT09Yi5sZW5ndGg/ITE6ImFkZCIhPWJbMF0udHlwZXx8InVwZGF0ZSIhPWJbMV0udHlwZXx8ImRlbGV0ZSIhPWJbMl0udHlwZXx8InNwbGljZSIhPWJbM10udHlwZXx8InNwbGljZSIhPWJbNF0udHlwZT8hMTooT2JqZWN0LnVub2JzZXJ2ZShjLGEpLEFycmF5LnVub2JzZXJ2ZShkLGEpLCEwKX1mdW5jdGlvbiBjKCl7aWYoInVuZGVmaW5lZCIhPXR5cGVvZiBjaHJvbWUmJmNocm9tZS5hcHAmJmNocm9tZS5hcHAucnVudGltZSlyZXR1cm4hMTtpZigidW5kZWZpbmVkIiE9dHlwZW9mIG5hdmlnYXRvciYmbmF2aWdhdG9yLmdldERldmljZVN0b3JhZ2UpcmV0dXJuITE7dHJ5e3ZhciBhPW5ldyBGdW5jdGlvbigiIiwicmV0dXJuIHRydWU7Iik7cmV0dXJuIGEoKX1jYXRjaChiKXtyZXR1cm4hMX19ZnVuY3Rpb24gZChhKXtyZXR1cm4rYT09PWE+Pj4wJiYiIiE9PWF9ZnVuY3Rpb24gZShhKXtyZXR1cm4rYX1mdW5jdGlvbiBmKGEpe3JldHVybiBhPT09T2JqZWN0KGEpfWZ1bmN0aW9uIGcoYSxiKXtyZXR1cm4gYT09PWI/MCE9PWF8fDEvYT09PTEvYjpSKGEpJiZSKGIpPyEwOmEhPT1hJiZiIT09Yn1mdW5jdGlvbiBoKGEpe2lmKHZvaWQgMD09PWEpcmV0dXJuImVvZiI7dmFyIGI9YS5jaGFyQ29kZUF0KDApO3N3aXRjaChiKXtjYXNlIDkxOmNhc2UgOTM6Y2FzZSA0NjpjYXNlIDM0OmNhc2UgMzk6Y2FzZSA0ODpyZXR1cm4gYTtjYXNlIDk1OmNhc2UgMzY6cmV0dXJuImlkZW50IjtjYXNlIDMyOmNhc2UgOTpjYXNlIDEwOmNhc2UgMTM6Y2FzZSAxNjA6Y2FzZSA2NTI3OTpjYXNlIDgyMzI6Y2FzZSA4MjMzOnJldHVybiJ3cyJ9cmV0dXJuIGI+PTk3JiYxMjI+PWJ8fGI+PTY1JiY5MD49Yj8iaWRlbnQiOmI+PTQ5JiY1Nz49Yj8ibnVtYmVyIjoiZWxzZSJ9ZnVuY3Rpb24gaSgpe31mdW5jdGlvbiBqKGEpe2Z1bmN0aW9uIGIoKXtpZighKG0+PWEubGVuZ3RoKSl7dmFyIGI9YVttKzFdO3JldHVybiJpblNpbmdsZVF1b3RlIj09biYmIiciPT1ifHwiaW5Eb3VibGVRdW90ZSI9PW4mJiciJz09Yj8obSsrLGQ9YixvLmFwcGVuZCgpLCEwKTp2b2lkIDB9fWZvcih2YXIgYyxkLGUsZixnLGosayxsPVtdLG09LTEsbj0iYmVmb3JlUGF0aCIsbz17cHVzaDpmdW5jdGlvbigpe3ZvaWQgMCE9PWUmJihsLnB1c2goZSksZT12b2lkIDApfSxhcHBlbmQ6ZnVuY3Rpb24oKXt2b2lkIDA9PT1lP2U9ZDplKz1kfX07bjspaWYobSsrLGM9YVttXSwiXFwiIT1jfHwhYihuKSl7aWYoZj1oKGMpLGs9V1tuXSxnPWtbZl18fGtbImVsc2UiXXx8ImVycm9yIiwiZXJyb3IiPT1nKXJldHVybjtpZihuPWdbMF0saj1vW2dbMV1dfHxpLGQ9dm9pZCAwPT09Z1syXT9jOmdbMl0saigpLCJhZnRlclBhdGgiPT09bilyZXR1cm4gbH19ZnVuY3Rpb24gayhhKXtyZXR1cm4gVi50ZXN0KGEpfWZ1bmN0aW9uIGwoYSxiKXtpZihiIT09WCl0aHJvdyBFcnJvcigiVXNlIFBhdGguZ2V0IHRvIHJldHJpZXZlIHBhdGggb2JqZWN0cyIpO2Zvcih2YXIgYz0wO2M8YS5sZW5ndGg7YysrKXRoaXMucHVzaChTdHJpbmcoYVtjXSkpO1EmJnRoaXMubGVuZ3RoJiYodGhpcy5nZXRWYWx1ZUZyb209dGhpcy5jb21waWxlZEdldFZhbHVlRnJvbUZuKCkpfWZ1bmN0aW9uIG0oYSl7aWYoYSBpbnN0YW5jZW9mIGwpcmV0dXJuIGE7aWYoKG51bGw9PWF8fDA9PWEubGVuZ3RoKSYmKGE9IiIpLCJzdHJpbmciIT10eXBlb2YgYSl7aWYoZChhLmxlbmd0aCkpcmV0dXJuIG5ldyBsKGEsWCk7YT1TdHJpbmcoYSl9dmFyIGI9WVthXTtpZihiKXJldHVybiBiO3ZhciBjPWooYSk7aWYoIWMpcmV0dXJuIFo7dmFyIGI9bmV3IGwoYyxYKTtyZXR1cm4gWVthXT1iLGJ9ZnVuY3Rpb24gbihhKXtyZXR1cm4gZChhKT8iWyIrYSsiXSI6J1siJythLnJlcGxhY2UoLyIvZywnXFwiJykrJyJdJ31mdW5jdGlvbiBvKGIpe2Zvcih2YXIgYz0wO18+YyYmYi5jaGVja18oKTspYysrO3JldHVybiBPJiYoYS5kaXJ0eUNoZWNrQ3ljbGVDb3VudD1jKSxjPjB9ZnVuY3Rpb24gcChhKXtmb3IodmFyIGIgaW4gYSlyZXR1cm4hMTtyZXR1cm4hMH1mdW5jdGlvbiBxKGEpe3JldHVybiBwKGEuYWRkZWQpJiZwKGEucmVtb3ZlZCkmJnAoYS5jaGFuZ2VkKX1mdW5jdGlvbiByKGEsYil7dmFyIGM9e30sZD17fSxlPXt9O2Zvcih2YXIgZiBpbiBiKXt2YXIgZz1hW2ZdOyh2b2lkIDA9PT1nfHxnIT09YltmXSkmJihmIGluIGE/ZyE9PWJbZl0mJihlW2ZdPWcpOmRbZl09dm9pZCAwKX1mb3IodmFyIGYgaW4gYSlmIGluIGJ8fChjW2ZdPWFbZl0pO3JldHVybiBBcnJheS5pc0FycmF5KGEpJiZhLmxlbmd0aCE9PWIubGVuZ3RoJiYoZS5sZW5ndGg9YS5sZW5ndGgpLHthZGRlZDpjLHJlbW92ZWQ6ZCxjaGFuZ2VkOmV9fWZ1bmN0aW9uIHMoKXtpZighYWIubGVuZ3RoKXJldHVybiExO2Zvcih2YXIgYT0wO2E8YWIubGVuZ3RoO2ErKylhYlthXSgpO3JldHVybiBhYi5sZW5ndGg9MCwhMH1mdW5jdGlvbiB0KCl7ZnVuY3Rpb24gYShhKXtiJiZiLnN0YXRlXz09PWZiJiYhZCYmYi5jaGVja18oYSl9dmFyIGIsYyxkPSExLGU9ITA7cmV0dXJue29wZW46ZnVuY3Rpb24oYyl7aWYoYil0aHJvdyBFcnJvcigiT2JzZXJ2ZWRPYmplY3QgaW4gdXNlIik7ZXx8T2JqZWN0LmRlbGl2ZXJDaGFuZ2VSZWNvcmRzKGEpLGI9YyxlPSExfSxvYnNlcnZlOmZ1bmN0aW9uKGIsZCl7Yz1iLGQ/QXJyYXkub2JzZXJ2ZShjLGEpOk9iamVjdC5vYnNlcnZlKGMsYSl9LGRlbGl2ZXI6ZnVuY3Rpb24oYil7ZD1iLE9iamVjdC5kZWxpdmVyQ2hhbmdlUmVjb3JkcyhhKSxkPSExfSxjbG9zZTpmdW5jdGlvbigpe2I9dm9pZCAwLE9iamVjdC51bm9ic2VydmUoYyxhKSxjYi5wdXNoKHRoaXMpfX19ZnVuY3Rpb24gdShhLGIsYyl7dmFyIGQ9Y2IucG9wKCl8fHQoKTtyZXR1cm4gZC5vcGVuKGEpLGQub2JzZXJ2ZShiLGMpLGR9ZnVuY3Rpb24gdigpe2Z1bmN0aW9uIGEoYixmKXtiJiYoYj09PWQmJihlW2ZdPSEwKSxoLmluZGV4T2YoYik8MCYmKGgucHVzaChiKSxPYmplY3Qub2JzZXJ2ZShiLGMpKSxhKE9iamVjdC5nZXRQcm90b3R5cGVPZihiKSxmKSl9ZnVuY3Rpb24gYihhKXtmb3IodmFyIGI9MDtiPGEubGVuZ3RoO2IrKyl7dmFyIGM9YVtiXTtpZihjLm9iamVjdCE9PWR8fGVbYy5uYW1lXXx8InNldFByb3RvdHlwZSI9PT1jLnR5cGUpcmV0dXJuITF9cmV0dXJuITB9ZnVuY3Rpb24gYyhjKXtpZighYihjKSl7Zm9yKHZhciBkLGU9MDtlPGcubGVuZ3RoO2UrKylkPWdbZV0sZC5zdGF0ZV89PWZiJiZkLml0ZXJhdGVPYmplY3RzXyhhKTtmb3IodmFyIGU9MDtlPGcubGVuZ3RoO2UrKylkPWdbZV0sZC5zdGF0ZV89PWZiJiZkLmNoZWNrXygpfX12YXIgZCxlLGY9MCxnPVtdLGg9W10saT17b2JqZWN0OnZvaWQgMCxvYmplY3RzOmgsb3BlbjpmdW5jdGlvbihiLGMpe2R8fChkPWMsZT17fSksZy5wdXNoKGIpLGYrKyxiLml0ZXJhdGVPYmplY3RzXyhhKX0sY2xvc2U6ZnVuY3Rpb24oKXtpZihmLS0sIShmPjApKXtmb3IodmFyIGE9MDthPGgubGVuZ3RoO2ErKylPYmplY3QudW5vYnNlcnZlKGhbYV0sYykseC51bm9ic2VydmVkQ291bnQrKztnLmxlbmd0aD0wLGgubGVuZ3RoPTAsZD12b2lkIDAsZT12b2lkIDAsZGIucHVzaCh0aGlzKX19fTtyZXR1cm4gaX1mdW5jdGlvbiB3KGEsYil7cmV0dXJuICQmJiQub2JqZWN0PT09Ynx8KCQ9ZGIucG9wKCl8fHYoKSwkLm9iamVjdD1iKSwkLm9wZW4oYSxiKSwkfWZ1bmN0aW9uIHgoKXt0aGlzLnN0YXRlXz1lYix0aGlzLmNhbGxiYWNrXz12b2lkIDAsdGhpcy50YXJnZXRfPXZvaWQgMCx0aGlzLmRpcmVjdE9ic2VydmVyXz12b2lkIDAsdGhpcy52YWx1ZV89dm9pZCAwLHRoaXMuaWRfPWliKyt9ZnVuY3Rpb24geShhKXt4Ll9hbGxPYnNlcnZlcnNDb3VudCsrLGtiJiZqYi5wdXNoKGEpfWZ1bmN0aW9uIHooKXt4Ll9hbGxPYnNlcnZlcnNDb3VudC0tfWZ1bmN0aW9uIEEoYSl7eC5jYWxsKHRoaXMpLHRoaXMudmFsdWVfPWEsdGhpcy5vbGRPYmplY3RfPXZvaWQgMH1mdW5jdGlvbiBCKGEpe2lmKCFBcnJheS5pc0FycmF5KGEpKXRocm93IEVycm9yKCJQcm92aWRlZCBvYmplY3QgaXMgbm90IGFuIEFycmF5Iik7QS5jYWxsKHRoaXMsYSl9ZnVuY3Rpb24gQyhhLGIpe3guY2FsbCh0aGlzKSx0aGlzLm9iamVjdF89YSx0aGlzLnBhdGhfPW0oYiksdGhpcy5kaXJlY3RPYnNlcnZlcl89dm9pZCAwfWZ1bmN0aW9uIEQoYSl7eC5jYWxsKHRoaXMpLHRoaXMucmVwb3J0Q2hhbmdlc09uT3Blbl89YSx0aGlzLnZhbHVlXz1bXSx0aGlzLmRpcmVjdE9ic2VydmVyXz12b2lkIDAsdGhpcy5vYnNlcnZlZF89W119ZnVuY3Rpb24gRShhKXtyZXR1cm4gYX1mdW5jdGlvbiBGKGEsYixjLGQpe3RoaXMuY2FsbGJhY2tfPXZvaWQgMCx0aGlzLnRhcmdldF89dm9pZCAwLHRoaXMudmFsdWVfPXZvaWQgMCx0aGlzLm9ic2VydmFibGVfPWEsdGhpcy5nZXRWYWx1ZUZuXz1ifHxFLHRoaXMuc2V0VmFsdWVGbl89Y3x8RSx0aGlzLmRvbnRQYXNzVGhyb3VnaFNldF89ZH1mdW5jdGlvbiBHKGEsYixjKXtmb3IodmFyIGQ9e30sZT17fSxmPTA7ZjxiLmxlbmd0aDtmKyspe3ZhciBnPWJbZl07bmJbZy50eXBlXT8oZy5uYW1lIGluIGN8fChjW2cubmFtZV09Zy5vbGRWYWx1ZSksInVwZGF0ZSIhPWcudHlwZSYmKCJhZGQiIT1nLnR5cGU/Zy5uYW1lIGluIGQ/KGRlbGV0ZSBkW2cubmFtZV0sZGVsZXRlIGNbZy5uYW1lXSk6ZVtnLm5hbWVdPSEwOmcubmFtZSBpbiBlP2RlbGV0ZSBlW2cubmFtZV06ZFtnLm5hbWVdPSEwKSk6KGNvbnNvbGUuZXJyb3IoIlVua25vd24gY2hhbmdlUmVjb3JkIHR5cGU6ICIrZy50eXBlKSxjb25zb2xlLmVycm9yKGcpKX1mb3IodmFyIGggaW4gZClkW2hdPWFbaF07Zm9yKHZhciBoIGluIGUpZVtoXT12b2lkIDA7dmFyIGk9e307Zm9yKHZhciBoIGluIGMpaWYoIShoIGluIGR8fGggaW4gZSkpe3ZhciBqPWFbaF07Y1toXSE9PWomJihpW2hdPWopfXJldHVybnthZGRlZDpkLHJlbW92ZWQ6ZSxjaGFuZ2VkOml9fWZ1bmN0aW9uIEgoYSxiLGMpe3JldHVybntpbmRleDphLHJlbW92ZWQ6YixhZGRlZENvdW50OmN9fWZ1bmN0aW9uIEkoKXt9ZnVuY3Rpb24gSihhLGIsYyxkLGUsZil7cmV0dXJuIHNiLmNhbGNTcGxpY2VzKGEsYixjLGQsZSxmKX1mdW5jdGlvbiBLKGEsYixjLGQpe3JldHVybiBjPmJ8fGE+ZD8tMTpiPT1jfHxkPT1hPzA6Yz5hP2Q+Yj9iLWM6ZC1jOmI+ZD9kLWE6Yi1hfWZ1bmN0aW9uIEwoYSxiLGMsZCl7Zm9yKHZhciBlPUgoYixjLGQpLGY9ITEsZz0wLGg9MDtoPGEubGVuZ3RoO2grKyl7dmFyIGk9YVtoXTtpZihpLmluZGV4Kz1nLCFmKXt2YXIgaj1LKGUuaW5kZXgsZS5pbmRleCtlLnJlbW92ZWQubGVuZ3RoLGkuaW5kZXgsaS5pbmRleCtpLmFkZGVkQ291bnQpO2lmKGo+PTApe2Euc3BsaWNlKGgsMSksaC0tLGctPWkuYWRkZWRDb3VudC1pLnJlbW92ZWQubGVuZ3RoLGUuYWRkZWRDb3VudCs9aS5hZGRlZENvdW50LWo7dmFyIGs9ZS5yZW1vdmVkLmxlbmd0aCtpLnJlbW92ZWQubGVuZ3RoLWo7aWYoZS5hZGRlZENvdW50fHxrKXt2YXIgYz1pLnJlbW92ZWQ7aWYoZS5pbmRleDxpLmluZGV4KXt2YXIgbD1lLnJlbW92ZWQuc2xpY2UoMCxpLmluZGV4LWUuaW5kZXgpO0FycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KGwsYyksYz1sfWlmKGUuaW5kZXgrZS5yZW1vdmVkLmxlbmd0aD5pLmluZGV4K2kuYWRkZWRDb3VudCl7dmFyIG09ZS5yZW1vdmVkLnNsaWNlKGkuaW5kZXgraS5hZGRlZENvdW50LWUuaW5kZXgpO0FycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KGMsbSl9ZS5yZW1vdmVkPWMsaS5pbmRleDxlLmluZGV4JiYoZS5pbmRleD1pLmluZGV4KX1lbHNlIGY9ITB9ZWxzZSBpZihlLmluZGV4PGkuaW5kZXgpe2Y9ITAsYS5zcGxpY2UoaCwwLGUpLGgrKzt2YXIgbj1lLmFkZGVkQ291bnQtZS5yZW1vdmVkLmxlbmd0aDtpLmluZGV4Kz1uLGcrPW59fX1mfHxhLnB1c2goZSl9ZnVuY3Rpb24gTShhLGIpe2Zvcih2YXIgYz1bXSxmPTA7ZjxiLmxlbmd0aDtmKyspe3ZhciBnPWJbZl07c3dpdGNoKGcudHlwZSl7Y2FzZSJzcGxpY2UiOkwoYyxnLmluZGV4LGcucmVtb3ZlZC5zbGljZSgpLGcuYWRkZWRDb3VudCk7YnJlYWs7Y2FzZSJhZGQiOmNhc2UidXBkYXRlIjpjYXNlImRlbGV0ZSI6aWYoIWQoZy5uYW1lKSljb250aW51ZTt2YXIgaD1lKGcubmFtZSk7aWYoMD5oKWNvbnRpbnVlO0woYyxoLFtnLm9sZFZhbHVlXSwxKTticmVhaztkZWZhdWx0OmNvbnNvbGUuZXJyb3IoIlVuZXhwZWN0ZWQgcmVjb3JkIHR5cGU6ICIrSlNPTi5zdHJpbmdpZnkoZykpfX1yZXR1cm4gY31mdW5jdGlvbiBOKGEsYil7dmFyIGM9W107cmV0dXJuIE0oYSxiKS5mb3JFYWNoKGZ1bmN0aW9uKGIpe3JldHVybiAxPT1iLmFkZGVkQ291bnQmJjE9PWIucmVtb3ZlZC5sZW5ndGg/dm9pZChiLnJlbW92ZWRbMF0hPT1hW2IuaW5kZXhdJiZjLnB1c2goYikpOnZvaWQoYz1jLmNvbmNhdChKKGEsYi5pbmRleCxiLmluZGV4K2IuYWRkZWRDb3VudCxiLnJlbW92ZWQsMCxiLnJlbW92ZWQubGVuZ3RoKSkpfSksY312YXIgTz1hLnRlc3RpbmdFeHBvc2VDeWNsZUNvdW50LFA9YigpLFE9YygpLFI9YS5OdW1iZXIuaXNOYU58fGZ1bmN0aW9uKGIpe3JldHVybiJudW1iZXIiPT10eXBlb2YgYiYmYS5pc05hTihiKX0sUz0iX19wcm90b19fImlue30/ZnVuY3Rpb24oYSl7cmV0dXJuIGF9OmZ1bmN0aW9uKGEpe3ZhciBiPWEuX19wcm90b19fO2lmKCFiKXJldHVybiBhO3ZhciBjPU9iamVjdC5jcmVhdGUoYik7cmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGEpLmZvckVhY2goZnVuY3Rpb24oYil7T2JqZWN0LmRlZmluZVByb3BlcnR5KGMsYixPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGEsYikpfSksY30sVD0iWyRfYS16QS1aXSIsVT0iWyRfYS16QS1aMC05XSIsVj1uZXcgUmVnRXhwKCJeIitUKyIrIitVKyIqJCIpLFc9e2JlZm9yZVBhdGg6e3dzOlsiYmVmb3JlUGF0aCJdLGlkZW50OlsiaW5JZGVudCIsImFwcGVuZCJdLCJbIjpbImJlZm9yZUVsZW1lbnQiXSxlb2Y6WyJhZnRlclBhdGgiXX0saW5QYXRoOnt3czpbImluUGF0aCJdLCIuIjpbImJlZm9yZUlkZW50Il0sIlsiOlsiYmVmb3JlRWxlbWVudCJdLGVvZjpbImFmdGVyUGF0aCJdfSxiZWZvcmVJZGVudDp7d3M6WyJiZWZvcmVJZGVudCJdLGlkZW50OlsiaW5JZGVudCIsImFwcGVuZCJdfSxpbklkZW50OntpZGVudDpbImluSWRlbnQiLCJhcHBlbmQiXSwwOlsiaW5JZGVudCIsImFwcGVuZCJdLG51bWJlcjpbImluSWRlbnQiLCJhcHBlbmQiXSx3czpbImluUGF0aCIsInB1c2giXSwiLiI6WyJiZWZvcmVJZGVudCIsInB1c2giXSwiWyI6WyJiZWZvcmVFbGVtZW50IiwicHVzaCJdLGVvZjpbImFmdGVyUGF0aCIsInB1c2giXX0sYmVmb3JlRWxlbWVudDp7d3M6WyJiZWZvcmVFbGVtZW50Il0sMDpbImFmdGVyWmVybyIsImFwcGVuZCJdLG51bWJlcjpbImluSW5kZXgiLCJhcHBlbmQiXSwiJyI6WyJpblNpbmdsZVF1b3RlIiwiYXBwZW5kIiwiIl0sJyInOlsiaW5Eb3VibGVRdW90ZSIsImFwcGVuZCIsIiJdfSxhZnRlclplcm86e3dzOlsiYWZ0ZXJFbGVtZW50IiwicHVzaCJdLCJdIjpbImluUGF0aCIsInB1c2giXX0saW5JbmRleDp7MDpbImluSW5kZXgiLCJhcHBlbmQiXSxudW1iZXI6WyJpbkluZGV4IiwiYXBwZW5kIl0sd3M6WyJhZnRlckVsZW1lbnQiXSwiXSI6WyJpblBhdGgiLCJwdXNoIl19LGluU2luZ2xlUXVvdGU6eyInIjpbImFmdGVyRWxlbWVudCJdLGVvZjpbImVycm9yIl0sImVsc2UiOlsiaW5TaW5nbGVRdW90ZSIsImFwcGVuZCJdfSxpbkRvdWJsZVF1b3RlOnsnIic6WyJhZnRlckVsZW1lbnQiXSxlb2Y6WyJlcnJvciJdLCJlbHNlIjpbImluRG91YmxlUXVvdGUiLCJhcHBlbmQiXX0sYWZ0ZXJFbGVtZW50Ont3czpbImFmdGVyRWxlbWVudCJdLCJdIjpbImluUGF0aCIsInB1c2giXX19LFg9e30sWT17fTtsLmdldD1tLGwucHJvdG90eXBlPVMoe19fcHJvdG9fXzpbXSx2YWxpZDohMCx0b1N0cmluZzpmdW5jdGlvbigpe2Zvcih2YXIgYT0iIixiPTA7Yjx0aGlzLmxlbmd0aDtiKyspe3ZhciBjPXRoaXNbYl07YSs9ayhjKT9iPyIuIitjOmM6bihjKX1yZXR1cm4gYX0sZ2V0VmFsdWVGcm9tOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0wO2I8dGhpcy5sZW5ndGg7YisrKXtpZihudWxsPT1hKXJldHVybjthPWFbdGhpc1tiXV19cmV0dXJuIGF9LGl0ZXJhdGVPYmplY3RzOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTA7Yzx0aGlzLmxlbmd0aDtjKyspe2lmKGMmJihhPWFbdGhpc1tjLTFdXSksIWYoYSkpcmV0dXJuO2IoYSx0aGlzWzBdKX19LGNvbXBpbGVkR2V0VmFsdWVGcm9tRm46ZnVuY3Rpb24oKXt2YXIgYT0iIixiPSJvYmoiO2ErPSJpZiAob2JqICE9IG51bGwiO2Zvcih2YXIgYyxkPTA7ZDx0aGlzLmxlbmd0aC0xO2QrKyljPXRoaXNbZF0sYis9ayhjKT8iLiIrYzpuKGMpLGErPSIgJiZcbiAgICAgIitiKyIgIT0gbnVsbCI7YSs9IilcbiI7dmFyIGM9dGhpc1tkXTtyZXR1cm4gYis9ayhjKT8iLiIrYzpuKGMpLGErPSIgIHJldHVybiAiK2IrIjtcbmVsc2VcbiAgcmV0dXJuIHVuZGVmaW5lZDsiLG5ldyBGdW5jdGlvbigib2JqIixhKX0sc2V0VmFsdWVGcm9tOmZ1bmN0aW9uKGEsYil7aWYoIXRoaXMubGVuZ3RoKXJldHVybiExO2Zvcih2YXIgYz0wO2M8dGhpcy5sZW5ndGgtMTtjKyspe2lmKCFmKGEpKXJldHVybiExO2E9YVt0aGlzW2NdXX1yZXR1cm4gZihhKT8oYVt0aGlzW2NdXT1iLCEwKTohMX19KTt2YXIgWj1uZXcgbCgiIixYKTtaLnZhbGlkPSExLFouZ2V0VmFsdWVGcm9tPVouc2V0VmFsdWVGcm9tPWZ1bmN0aW9uKCl7fTt2YXIgJCxfPTFlMyxhYj1bXSxiYj1QP2Z1bmN0aW9uKCl7dmFyIGE9e3BpbmdQb25nOiEwfSxiPSExO3JldHVybiBPYmplY3Qub2JzZXJ2ZShhLGZ1bmN0aW9uKCl7cygpLGI9ITF9KSxmdW5jdGlvbihjKXthYi5wdXNoKGMpLGJ8fChiPSEwLGEucGluZ1Bvbmc9IWEucGluZ1BvbmcpfX0oKTpmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihhKXthYi5wdXNoKGEpfX0oKSxjYj1bXSxkYj1bXSxlYj0wLGZiPTEsZ2I9MixoYj0zLGliPTE7eC5wcm90b3R5cGU9e29wZW46ZnVuY3Rpb24oYSxiKXtpZih0aGlzLnN0YXRlXyE9ZWIpdGhyb3cgRXJyb3IoIk9ic2VydmVyIGhhcyBhbHJlYWR5IGJlZW4gb3BlbmVkLiIpO3JldHVybiB5KHRoaXMpLHRoaXMuY2FsbGJhY2tfPWEsdGhpcy50YXJnZXRfPWIsdGhpcy5jb25uZWN0XygpLHRoaXMuc3RhdGVfPWZiLHRoaXMudmFsdWVffSxjbG9zZTpmdW5jdGlvbigpe3RoaXMuc3RhdGVfPT1mYiYmKHoodGhpcyksdGhpcy5kaXNjb25uZWN0XygpLHRoaXMudmFsdWVfPXZvaWQgMCx0aGlzLmNhbGxiYWNrXz12b2lkIDAsdGhpcy50YXJnZXRfPXZvaWQgMCx0aGlzLnN0YXRlXz1nYil9LGRlbGl2ZXI6ZnVuY3Rpb24oKXt0aGlzLnN0YXRlXz09ZmImJm8odGhpcyl9LHJlcG9ydF86ZnVuY3Rpb24oYSl7dHJ5e3RoaXMuY2FsbGJhY2tfLmFwcGx5KHRoaXMudGFyZ2V0XyxhKX1jYXRjaChiKXt4Ll9lcnJvclRocm93bkR1cmluZ0NhbGxiYWNrPSEwLGNvbnNvbGUuZXJyb3IoIkV4Y2VwdGlvbiBjYXVnaHQgZHVyaW5nIG9ic2VydmVyIGNhbGxiYWNrOiAiKyhiLnN0YWNrfHxiKSl9fSxkaXNjYXJkQ2hhbmdlczpmdW5jdGlvbigpe3JldHVybiB0aGlzLmNoZWNrXyh2b2lkIDAsITApLHRoaXMudmFsdWVffX07dmFyIGpiLGtiPSFQO3guX2FsbE9ic2VydmVyc0NvdW50PTAsa2ImJihqYj1bXSk7dmFyIGxiPSExO2EuUGxhdGZvcm09YS5QbGF0Zm9ybXx8e30sYS5QbGF0Zm9ybS5wZXJmb3JtTWljcm90YXNrQ2hlY2twb2ludD1mdW5jdGlvbigpe2lmKCFsYiYma2Ipe2xiPSEwO3ZhciBiLGMsZD0wO2Rve2QrKyxjPWpiLGpiPVtdLGI9ITE7Zm9yKHZhciBlPTA7ZTxjLmxlbmd0aDtlKyspe3ZhciBmPWNbZV07Zi5zdGF0ZV89PWZiJiYoZi5jaGVja18oKSYmKGI9ITApLGpiLnB1c2goZikpfXMoKSYmKGI9ITApfXdoaWxlKF8+ZCYmYik7TyYmKGEuZGlydHlDaGVja0N5Y2xlQ291bnQ9ZCksbGI9ITF9fSxrYiYmKGEuUGxhdGZvcm0uY2xlYXJPYnNlcnZlcnM9ZnVuY3Rpb24oKXtqYj1bXX0pLEEucHJvdG90eXBlPVMoe19fcHJvdG9fXzp4LnByb3RvdHlwZSxhcnJheU9ic2VydmU6ITEsY29ubmVjdF86ZnVuY3Rpb24oKXtQP3RoaXMuZGlyZWN0T2JzZXJ2ZXJfPXUodGhpcyx0aGlzLnZhbHVlXyx0aGlzLmFycmF5T2JzZXJ2ZSk6dGhpcy5vbGRPYmplY3RfPXRoaXMuY29weU9iamVjdCh0aGlzLnZhbHVlXyl9LGNvcHlPYmplY3Q6ZnVuY3Rpb24oYSl7dmFyIGI9QXJyYXkuaXNBcnJheShhKT9bXTp7fTtmb3IodmFyIGMgaW4gYSliW2NdPWFbY107cmV0dXJuIEFycmF5LmlzQXJyYXkoYSkmJihiLmxlbmd0aD1hLmxlbmd0aCksYn0sY2hlY2tfOmZ1bmN0aW9uKGEpe3ZhciBiLGM7aWYoUCl7aWYoIWEpcmV0dXJuITE7Yz17fSxiPUcodGhpcy52YWx1ZV8sYSxjKX1lbHNlIGM9dGhpcy5vbGRPYmplY3RfLGI9cih0aGlzLnZhbHVlXyx0aGlzLm9sZE9iamVjdF8pO3JldHVybiBxKGIpPyExOihQfHwodGhpcy5vbGRPYmplY3RfPXRoaXMuY29weU9iamVjdCh0aGlzLnZhbHVlXykpLHRoaXMucmVwb3J0XyhbYi5hZGRlZHx8e30sYi5yZW1vdmVkfHx7fSxiLmNoYW5nZWR8fHt9LGZ1bmN0aW9uKGEpe3JldHVybiBjW2FdfV0pLCEwKX0sZGlzY29ubmVjdF86ZnVuY3Rpb24oKXtQPyh0aGlzLmRpcmVjdE9ic2VydmVyXy5jbG9zZSgpLHRoaXMuZGlyZWN0T2JzZXJ2ZXJfPXZvaWQgMCk6dGhpcy5vbGRPYmplY3RfPXZvaWQgMH0sZGVsaXZlcjpmdW5jdGlvbigpe3RoaXMuc3RhdGVfPT1mYiYmKFA/dGhpcy5kaXJlY3RPYnNlcnZlcl8uZGVsaXZlcighMSk6byh0aGlzKSl9LGRpc2NhcmRDaGFuZ2VzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGlyZWN0T2JzZXJ2ZXJfP3RoaXMuZGlyZWN0T2JzZXJ2ZXJfLmRlbGl2ZXIoITApOnRoaXMub2xkT2JqZWN0Xz10aGlzLmNvcHlPYmplY3QodGhpcy52YWx1ZV8pLHRoaXMudmFsdWVffX0pLEIucHJvdG90eXBlPVMoe19fcHJvdG9fXzpBLnByb3RvdHlwZSxhcnJheU9ic2VydmU6ITAsY29weU9iamVjdDpmdW5jdGlvbihhKXtyZXR1cm4gYS5zbGljZSgpfSxjaGVja186ZnVuY3Rpb24oYSl7dmFyIGI7aWYoUCl7aWYoIWEpcmV0dXJuITE7Yj1OKHRoaXMudmFsdWVfLGEpfWVsc2UgYj1KKHRoaXMudmFsdWVfLDAsdGhpcy52YWx1ZV8ubGVuZ3RoLHRoaXMub2xkT2JqZWN0XywwLHRoaXMub2xkT2JqZWN0Xy5sZW5ndGgpO3JldHVybiBiJiZiLmxlbmd0aD8oUHx8KHRoaXMub2xkT2JqZWN0Xz10aGlzLmNvcHlPYmplY3QodGhpcy52YWx1ZV8pKSx0aGlzLnJlcG9ydF8oW2JdKSwhMCk6ITF9fSksQi5hcHBseVNwbGljZXM9ZnVuY3Rpb24oYSxiLGMpe2MuZm9yRWFjaChmdW5jdGlvbihjKXtmb3IodmFyIGQ9W2MuaW5kZXgsYy5yZW1vdmVkLmxlbmd0aF0sZT1jLmluZGV4O2U8Yy5pbmRleCtjLmFkZGVkQ291bnQ7KWQucHVzaChiW2VdKSxlKys7QXJyYXkucHJvdG90eXBlLnNwbGljZS5hcHBseShhLGQpfSl9LEMucHJvdG90eXBlPVMoe19fcHJvdG9fXzp4LnByb3RvdHlwZSxnZXQgcGF0aCgpe3JldHVybiB0aGlzLnBhdGhffSxjb25uZWN0XzpmdW5jdGlvbigpe1AmJih0aGlzLmRpcmVjdE9ic2VydmVyXz13KHRoaXMsdGhpcy5vYmplY3RfKSksdGhpcy5jaGVja18odm9pZCAwLCEwKX0sZGlzY29ubmVjdF86ZnVuY3Rpb24oKXt0aGlzLnZhbHVlXz12b2lkIDAsdGhpcy5kaXJlY3RPYnNlcnZlcl8mJih0aGlzLmRpcmVjdE9ic2VydmVyXy5jbG9zZSh0aGlzKSx0aGlzLmRpcmVjdE9ic2VydmVyXz12b2lkIDApfSxpdGVyYXRlT2JqZWN0c186ZnVuY3Rpb24oYSl7dGhpcy5wYXRoXy5pdGVyYXRlT2JqZWN0cyh0aGlzLm9iamVjdF8sYSl9LGNoZWNrXzpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMudmFsdWVfO3JldHVybiB0aGlzLnZhbHVlXz10aGlzLnBhdGhfLmdldFZhbHVlRnJvbSh0aGlzLm9iamVjdF8pLGJ8fGcodGhpcy52YWx1ZV8sYyk/ITE6KHRoaXMucmVwb3J0XyhbdGhpcy52YWx1ZV8sYyx0aGlzXSksITApfSxzZXRWYWx1ZTpmdW5jdGlvbihhKXt0aGlzLnBhdGhfJiZ0aGlzLnBhdGhfLnNldFZhbHVlRnJvbSh0aGlzLm9iamVjdF8sYSl9fSk7dmFyIG1iPXt9O0QucHJvdG90eXBlPVMoe19fcHJvdG9fXzp4LnByb3RvdHlwZSxjb25uZWN0XzpmdW5jdGlvbigpe2lmKFApe2Zvcih2YXIgYSxiPSExLGM9MDtjPHRoaXMub2JzZXJ2ZWRfLmxlbmd0aDtjKz0yKWlmKGE9dGhpcy5vYnNlcnZlZF9bY10sYSE9PW1iKXtiPSEwO2JyZWFrfWImJih0aGlzLmRpcmVjdE9ic2VydmVyXz13KHRoaXMsYSkpfXRoaXMuY2hlY2tfKHZvaWQgMCwhdGhpcy5yZXBvcnRDaGFuZ2VzT25PcGVuXyl9LGRpc2Nvbm5lY3RfOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPTA7YTx0aGlzLm9ic2VydmVkXy5sZW5ndGg7YSs9Mil0aGlzLm9ic2VydmVkX1thXT09PW1iJiZ0aGlzLm9ic2VydmVkX1thKzFdLmNsb3NlKCk7dGhpcy5vYnNlcnZlZF8ubGVuZ3RoPTAsdGhpcy52YWx1ZV8ubGVuZ3RoPTAsdGhpcy5kaXJlY3RPYnNlcnZlcl8mJih0aGlzLmRpcmVjdE9ic2VydmVyXy5jbG9zZSh0aGlzKSx0aGlzLmRpcmVjdE9ic2VydmVyXz12b2lkIDApfSxhZGRQYXRoOmZ1bmN0aW9uKGEsYil7aWYodGhpcy5zdGF0ZV8hPWViJiZ0aGlzLnN0YXRlXyE9aGIpdGhyb3cgRXJyb3IoIkNhbm5vdCBhZGQgcGF0aHMgb25jZSBzdGFydGVkLiIpO3ZhciBiPW0oYik7aWYodGhpcy5vYnNlcnZlZF8ucHVzaChhLGIpLHRoaXMucmVwb3J0Q2hhbmdlc09uT3Blbl8pe3ZhciBjPXRoaXMub2JzZXJ2ZWRfLmxlbmd0aC8yLTE7dGhpcy52YWx1ZV9bY109Yi5nZXRWYWx1ZUZyb20oYSl9fSxhZGRPYnNlcnZlcjpmdW5jdGlvbihhKXtpZih0aGlzLnN0YXRlXyE9ZWImJnRoaXMuc3RhdGVfIT1oYil0aHJvdyBFcnJvcigiQ2Fubm90IGFkZCBvYnNlcnZlcnMgb25jZSBzdGFydGVkLiIpO2lmKHRoaXMub2JzZXJ2ZWRfLnB1c2gobWIsYSksdGhpcy5yZXBvcnRDaGFuZ2VzT25PcGVuXyl7dmFyIGI9dGhpcy5vYnNlcnZlZF8ubGVuZ3RoLzItMTt0aGlzLnZhbHVlX1tiXT1hLm9wZW4odGhpcy5kZWxpdmVyLHRoaXMpfX0sc3RhcnRSZXNldDpmdW5jdGlvbigpe2lmKHRoaXMuc3RhdGVfIT1mYil0aHJvdyBFcnJvcigiQ2FuIG9ubHkgcmVzZXQgd2hpbGUgb3BlbiIpO3RoaXMuc3RhdGVfPWhiLHRoaXMuZGlzY29ubmVjdF8oKX0sZmluaXNoUmVzZXQ6ZnVuY3Rpb24oKXtpZih0aGlzLnN0YXRlXyE9aGIpdGhyb3cgRXJyb3IoIkNhbiBvbmx5IGZpbmlzaFJlc2V0IGFmdGVyIHN0YXJ0UmVzZXQiKTtyZXR1cm4gdGhpcy5zdGF0ZV89ZmIsdGhpcy5jb25uZWN0XygpLHRoaXMudmFsdWVffSxpdGVyYXRlT2JqZWN0c186ZnVuY3Rpb24oYSl7Zm9yKHZhciBiLGM9MDtjPHRoaXMub2JzZXJ2ZWRfLmxlbmd0aDtjKz0yKWI9dGhpcy5vYnNlcnZlZF9bY10sYiE9PW1iJiZ0aGlzLm9ic2VydmVkX1tjKzFdLml0ZXJhdGVPYmplY3RzKGIsYSl9LGNoZWNrXzpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYyxkPTA7ZDx0aGlzLm9ic2VydmVkXy5sZW5ndGg7ZCs9Mil7dmFyIGUsZj10aGlzLm9ic2VydmVkX1tkXSxoPXRoaXMub2JzZXJ2ZWRfW2QrMV07aWYoZj09PW1iKXt2YXIgaT1oO2U9dGhpcy5zdGF0ZV89PT1lYj9pLm9wZW4odGhpcy5kZWxpdmVyLHRoaXMpOmkuZGlzY2FyZENoYW5nZXMoKX1lbHNlIGU9aC5nZXRWYWx1ZUZyb20oZik7Yj90aGlzLnZhbHVlX1tkLzJdPWU6ZyhlLHRoaXMudmFsdWVfW2QvMl0pfHwoYz1jfHxbXSxjW2QvMl09dGhpcy52YWx1ZV9bZC8yXSx0aGlzLnZhbHVlX1tkLzJdPWUpfXJldHVybiBjPyh0aGlzLnJlcG9ydF8oW3RoaXMudmFsdWVfLGMsdGhpcy5vYnNlcnZlZF9dKSwhMCk6ITF9fSksRi5wcm90b3R5cGU9e29wZW46ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5jYWxsYmFja189YSx0aGlzLnRhcmdldF89Yix0aGlzLnZhbHVlXz10aGlzLmdldFZhbHVlRm5fKHRoaXMub2JzZXJ2YWJsZV8ub3Blbih0aGlzLm9ic2VydmVkQ2FsbGJhY2tfLHRoaXMpKSx0aGlzLnZhbHVlX30sb2JzZXJ2ZWRDYWxsYmFja186ZnVuY3Rpb24oYSl7aWYoYT10aGlzLmdldFZhbHVlRm5fKGEpLCFnKGEsdGhpcy52YWx1ZV8pKXt2YXIgYj10aGlzLnZhbHVlXzt0aGlzLnZhbHVlXz1hLHRoaXMuY2FsbGJhY2tfLmNhbGwodGhpcy50YXJnZXRfLHRoaXMudmFsdWVfLGIpfX0sZGlzY2FyZENoYW5nZXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy52YWx1ZV89dGhpcy5nZXRWYWx1ZUZuXyh0aGlzLm9ic2VydmFibGVfLmRpc2NhcmRDaGFuZ2VzKCkpLHRoaXMudmFsdWVffSxkZWxpdmVyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub2JzZXJ2YWJsZV8uZGVsaXZlcigpfSxzZXRWYWx1ZTpmdW5jdGlvbihhKXtyZXR1cm4gYT10aGlzLnNldFZhbHVlRm5fKGEpLCF0aGlzLmRvbnRQYXNzVGhyb3VnaFNldF8mJnRoaXMub2JzZXJ2YWJsZV8uc2V0VmFsdWU/dGhpcy5vYnNlcnZhYmxlXy5zZXRWYWx1ZShhKTp2b2lkIDB9LGNsb3NlOmZ1bmN0aW9uKCl7dGhpcy5vYnNlcnZhYmxlXyYmdGhpcy5vYnNlcnZhYmxlXy5jbG9zZSgpLHRoaXMuY2FsbGJhY2tfPXZvaWQgMCx0aGlzLnRhcmdldF89dm9pZCAwLHRoaXMub2JzZXJ2YWJsZV89dm9pZCAwLHRoaXMudmFsdWVfPXZvaWQgMCx0aGlzLmdldFZhbHVlRm5fPXZvaWQgMCx0aGlzLnNldFZhbHVlRm5fPXZvaWQgMH19O3ZhciBuYj17YWRkOiEwLHVwZGF0ZTohMCwiZGVsZXRlIjohMH0sb2I9MCxwYj0xLHFiPTIscmI9MztJLnByb3RvdHlwZT17Y2FsY0VkaXREaXN0YW5jZXM6ZnVuY3Rpb24oYSxiLGMsZCxlLGYpe2Zvcih2YXIgZz1mLWUrMSxoPWMtYisxLGk9bmV3IEFycmF5KGcpLGo9MDtnPmo7aisrKWlbal09bmV3IEFycmF5KGgpLGlbal1bMF09ajtmb3IodmFyIGs9MDtoPms7aysrKWlbMF1ba109aztmb3IodmFyIGo9MTtnPmo7aisrKWZvcih2YXIgaz0xO2g+aztrKyspaWYodGhpcy5lcXVhbHMoYVtiK2stMV0sZFtlK2otMV0pKWlbal1ba109aVtqLTFdW2stMV07ZWxzZXt2YXIgbD1pW2otMV1ba10rMSxtPWlbal1bay0xXSsxO2lbal1ba109bT5sP2w6bX1yZXR1cm4gaX0sc3BsaWNlT3BlcmF0aW9uc0Zyb21FZGl0RGlzdGFuY2VzOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1hLmxlbmd0aC0xLGM9YVswXS5sZW5ndGgtMSxkPWFbYl1bY10sZT1bXTtiPjB8fGM+MDspaWYoMCE9YilpZigwIT1jKXt2YXIgZixnPWFbYi0xXVtjLTFdLGg9YVtiLTFdW2NdLGk9YVtiXVtjLTFdO2Y9aT5oP2c+aD9oOmc6Zz5pP2k6ZyxmPT1nPyhnPT1kP2UucHVzaChvYik6KGUucHVzaChwYiksZD1nKSxiLS0sYy0tKTpmPT1oPyhlLnB1c2gocmIpLGItLSxkPWgpOihlLnB1c2gocWIpLGMtLSxkPWkpfWVsc2UgZS5wdXNoKHJiKSxiLS07ZWxzZSBlLnB1c2gocWIpLGMtLTtyZXR1cm4gZS5yZXZlcnNlKCksZX0sY2FsY1NwbGljZXM6ZnVuY3Rpb24oYSxiLGMsZCxlLGYpe3ZhciBnPTAsaD0wLGk9TWF0aC5taW4oYy1iLGYtZSk7aWYoMD09YiYmMD09ZSYmKGc9dGhpcy5zaGFyZWRQcmVmaXgoYSxkLGkpKSxjPT1hLmxlbmd0aCYmZj09ZC5sZW5ndGgmJihoPXRoaXMuc2hhcmVkU3VmZml4KGEsZCxpLWcpKSxiKz1nLGUrPWcsYy09aCxmLT1oLGMtYj09MCYmZi1lPT0wKXJldHVybltdO2lmKGI9PWMpe2Zvcih2YXIgaj1IKGIsW10sMCk7Zj5lOylqLnJlbW92ZWQucHVzaChkW2UrK10pO3JldHVybltqXX1pZihlPT1mKXJldHVybltIKGIsW10sYy1iKV07Zm9yKHZhciBrPXRoaXMuc3BsaWNlT3BlcmF0aW9uc0Zyb21FZGl0RGlzdGFuY2VzKHRoaXMuY2FsY0VkaXREaXN0YW5jZXMoYSxiLGMsZCxlLGYpKSxqPXZvaWQgMCxsPVtdLG09YixuPWUsbz0wO288ay5sZW5ndGg7bysrKXN3aXRjaChrW29dKXtjYXNlIG9iOmomJihsLnB1c2goaiksaj12b2lkIDApLG0rKyxuKys7YnJlYWs7Y2FzZSBwYjpqfHwoaj1IKG0sW10sMCkpLGouYWRkZWRDb3VudCsrLG0rKyxqLnJlbW92ZWQucHVzaChkW25dKSxuKys7YnJlYWs7Y2FzZSBxYjpqfHwoaj1IKG0sW10sMCkpLGouYWRkZWRDb3VudCsrLG0rKzticmVhaztjYXNlIHJiOmp8fChqPUgobSxbXSwwKSksai5yZW1vdmVkLnB1c2goZFtuXSksbisrfXJldHVybiBqJiZsLnB1c2goaiksbH0sc2hhcmVkUHJlZml4OmZ1bmN0aW9uKGEsYixjKXtmb3IodmFyIGQ9MDtjPmQ7ZCsrKWlmKCF0aGlzLmVxdWFscyhhW2RdLGJbZF0pKXJldHVybiBkO3JldHVybiBjfSxzaGFyZWRTdWZmaXg6ZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZD1hLmxlbmd0aCxlPWIubGVuZ3RoLGY9MDtjPmYmJnRoaXMuZXF1YWxzKGFbLS1kXSxiWy0tZV0pOylmKys7cmV0dXJuIGZ9LGNhbGN1bGF0ZVNwbGljZXM6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5jYWxjU3BsaWNlcyhhLDAsYS5sZW5ndGgsYiwwLGIubGVuZ3RoKX0sZXF1YWxzOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGE9PT1ifX07dmFyIHNiPW5ldyBJO2EuT2JzZXJ2ZXI9eCxhLk9ic2VydmVyLnJ1bkVPTV89YmIsYS5PYnNlcnZlci5vYnNlcnZlclNlbnRpbmVsXz1tYixhLk9ic2VydmVyLmhhc09iamVjdE9ic2VydmU9UCxhLkFycmF5T2JzZXJ2ZXI9QixhLkFycmF5T2JzZXJ2ZXIuY2FsY3VsYXRlU3BsaWNlcz1mdW5jdGlvbihhLGIpe3JldHVybiBzYi5jYWxjdWxhdGVTcGxpY2VzKGEsYil9LGEuQXJyYXlTcGxpY2U9SSxhLk9iamVjdE9ic2VydmVyPUEsYS5QYXRoT2JzZXJ2ZXI9QyxhLkNvbXBvdW5kT2JzZXJ2ZXI9RCxhLlBhdGg9bCxhLk9ic2VydmVyVHJhbnNmb3JtPUZ9KCJ1bmRlZmluZWQiIT10eXBlb2YgZ2xvYmFsJiZnbG9iYWwmJiJ1bmRlZmluZWQiIT10eXBlb2YgbW9kdWxlJiZtb2R1bGU/Z2xvYmFsOnRoaXN8fHdpbmRvdyksZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYShhKXtmb3IoO2EucGFyZW50Tm9kZTspYT1hLnBhcmVudE5vZGU7cmV0dXJuImZ1bmN0aW9uIj09dHlwZW9mIGEuZ2V0RWxlbWVudEJ5SWQ/YTpudWxsfWZ1bmN0aW9uIGIoYSxiLGMpe3ZhciBkPWEuYmluZGluZ3NfO3JldHVybiBkfHwoZD1hLmJpbmRpbmdzXz17fSksZFtiXSYmY1tiXS5jbG9zZSgpLGRbYl09Y31mdW5jdGlvbiBjKGEsYixjKXtyZXR1cm4gY31mdW5jdGlvbiBkKGEpe3JldHVybiBudWxsPT1hPyIiOmF9ZnVuY3Rpb24gZShhLGIpe2EuZGF0YT1kKGIpfWZ1bmN0aW9uIGYoYSl7cmV0dXJuIGZ1bmN0aW9uKGIpe3JldHVybiBlKGEsYil9fWZ1bmN0aW9uIGcoYSxiLGMsZSl7cmV0dXJuIGM/dm9pZChlP2Euc2V0QXR0cmlidXRlKGIsIiIpOmEucmVtb3ZlQXR0cmlidXRlKGIpKTp2b2lkIGEuc2V0QXR0cmlidXRlKGIsZChlKSl9ZnVuY3Rpb24gaChhLGIsYyl7cmV0dXJuIGZ1bmN0aW9uKGQpe2coYSxiLGMsZCl9fWZ1bmN0aW9uIGkoYSl7c3dpdGNoKGEudHlwZSl7Y2FzZSJjaGVja2JveCI6cmV0dXJuIHU7Y2FzZSJyYWRpbyI6Y2FzZSJzZWxlY3QtbXVsdGlwbGUiOmNhc2Uic2VsZWN0LW9uZSI6cmV0dXJuImNoYW5nZSI7Y2FzZSJyYW5nZSI6aWYoL1RyaWRlbnR8TVNJRS8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSlyZXR1cm4iY2hhbmdlIjtkZWZhdWx0OnJldHVybiJpbnB1dCJ9fWZ1bmN0aW9uIGooYSxiLGMsZSl7YVtiXT0oZXx8ZCkoYyl9ZnVuY3Rpb24gayhhLGIsYyl7cmV0dXJuIGZ1bmN0aW9uKGQpe3JldHVybiBqKGEsYixkLGMpfX1mdW5jdGlvbiBsKCl7fWZ1bmN0aW9uIG0oYSxiLGMsZCl7ZnVuY3Rpb24gZSgpe2Muc2V0VmFsdWUoYVtiXSksYy5kaXNjYXJkQ2hhbmdlcygpLChkfHxsKShhKSxQbGF0Zm9ybS5wZXJmb3JtTWljcm90YXNrQ2hlY2twb2ludCgpfXZhciBmPWkoYSk7cmV0dXJuIGEuYWRkRXZlbnRMaXN0ZW5lcihmLGUpLHtjbG9zZTpmdW5jdGlvbigpe2EucmVtb3ZlRXZlbnRMaXN0ZW5lcihmLGUpLGMuY2xvc2UoKX0sb2JzZXJ2YWJsZV86Y319ZnVuY3Rpb24gbihhKXtyZXR1cm4gQm9vbGVhbihhKX1mdW5jdGlvbiBvKGIpe2lmKGIuZm9ybSlyZXR1cm4gcyhiLmZvcm0uZWxlbWVudHMsZnVuY3Rpb24oYSl7cmV0dXJuIGEhPWImJiJJTlBVVCI9PWEudGFnTmFtZSYmInJhZGlvIj09YS50eXBlJiZhLm5hbWU9PWIubmFtZX0pO3ZhciBjPWEoYik7aWYoIWMpcmV0dXJuW107dmFyIGQ9Yy5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dFt0eXBlPSJyYWRpbyJdW25hbWU9IicrYi5uYW1lKyciXScpO3JldHVybiBzKGQsZnVuY3Rpb24oYSl7cmV0dXJuIGEhPWImJiFhLmZvcm19KX1mdW5jdGlvbiBwKGEpeyJJTlBVVCI9PT1hLnRhZ05hbWUmJiJyYWRpbyI9PT1hLnR5cGUmJm8oYSkuZm9yRWFjaChmdW5jdGlvbihhKXt2YXIgYj1hLmJpbmRpbmdzXy5jaGVja2VkO2ImJmIub2JzZXJ2YWJsZV8uc2V0VmFsdWUoITEpfSl9ZnVuY3Rpb24gcShhLGIpe3ZhciBjLGUsZixnPWEucGFyZW50Tm9kZTtnIGluc3RhbmNlb2YgSFRNTFNlbGVjdEVsZW1lbnQmJmcuYmluZGluZ3NfJiZnLmJpbmRpbmdzXy52YWx1ZSYmKGM9ZyxlPWMuYmluZGluZ3NfLnZhbHVlLGY9Yy52YWx1ZSksYS52YWx1ZT1kKGIpLGMmJmMudmFsdWUhPWYmJihlLm9ic2VydmFibGVfLnNldFZhbHVlKGMudmFsdWUpLGUub2JzZXJ2YWJsZV8uZGlzY2FyZENoYW5nZXMoKSxQbGF0Zm9ybS5wZXJmb3JtTWljcm90YXNrQ2hlY2twb2ludCgpKX1mdW5jdGlvbiByKGEpe3JldHVybiBmdW5jdGlvbihiKXtxKGEsYil9fXZhciBzPUFycmF5LnByb3RvdHlwZS5maWx0ZXIuY2FsbC5iaW5kKEFycmF5LnByb3RvdHlwZS5maWx0ZXIpO05vZGUucHJvdG90eXBlLmJpbmQ9ZnVuY3Rpb24oYSxiKXtjb25zb2xlLmVycm9yKCJVbmhhbmRsZWQgYmluZGluZyB0byBOb2RlOiAiLHRoaXMsYSxiKX0sTm9kZS5wcm90b3R5cGUuYmluZEZpbmlzaGVkPWZ1bmN0aW9uKCl7fTt2YXIgdD1jO09iamVjdC5kZWZpbmVQcm9wZXJ0eShQbGF0Zm9ybSwiZW5hYmxlQmluZGluZ3NSZWZsZWN0aW9uIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHQ9PT1ifSxzZXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIHQ9YT9iOmMsYX0sY29uZmlndXJhYmxlOiEwfSksVGV4dC5wcm90b3R5cGUuYmluZD1mdW5jdGlvbihhLGIsYyl7aWYoInRleHRDb250ZW50IiE9PWEpcmV0dXJuIE5vZGUucHJvdG90eXBlLmJpbmQuY2FsbCh0aGlzLGEsYixjKTtpZihjKXJldHVybiBlKHRoaXMsYik7dmFyIGQ9YjtyZXR1cm4gZSh0aGlzLGQub3BlbihmKHRoaXMpKSksdCh0aGlzLGEsZCl9LEVsZW1lbnQucHJvdG90eXBlLmJpbmQ9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPSI/Ij09YVthLmxlbmd0aC0xXTtpZihkJiYodGhpcy5yZW1vdmVBdHRyaWJ1dGUoYSksYT1hLnNsaWNlKDAsLTEpKSxjKXJldHVybiBnKHRoaXMsYSxkLGIpO3ZhciBlPWI7cmV0dXJuIGcodGhpcyxhLGQsZS5vcGVuKGgodGhpcyxhLGQpKSksdCh0aGlzLGEsZSl9O3ZhciB1OyFmdW5jdGlvbigpe3ZhciBhPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpLGI9YS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbnB1dCIpKTtiLnNldEF0dHJpYnV0ZSgidHlwZSIsImNoZWNrYm94Iik7dmFyIGMsZD0wO2IuYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLGZ1bmN0aW9uKCl7ZCsrLGM9Y3x8ImNsaWNrIn0pLGIuYWRkRXZlbnRMaXN0ZW5lcigiY2hhbmdlIixmdW5jdGlvbigpe2QrKyxjPWN8fCJjaGFuZ2UifSk7dmFyIGU9ZG9jdW1lbnQuY3JlYXRlRXZlbnQoIk1vdXNlRXZlbnQiKTtlLmluaXRNb3VzZUV2ZW50KCJjbGljayIsITAsITAsd2luZG93LDAsMCwwLDAsMCwhMSwhMSwhMSwhMSwwLG51bGwpLGIuZGlzcGF0Y2hFdmVudChlKSx1PTE9PWQ/ImNoYW5nZSI6Y30oKSxIVE1MSW5wdXRFbGVtZW50LnByb3RvdHlwZS5iaW5kPWZ1bmN0aW9uKGEsYyxlKXtpZigidmFsdWUiIT09YSYmImNoZWNrZWQiIT09YSlyZXR1cm4gSFRNTEVsZW1lbnQucHJvdG90eXBlLmJpbmQuY2FsbCh0aGlzLGEsYyxlKTt0aGlzLnJlbW92ZUF0dHJpYnV0ZShhKTt2YXIgZj0iY2hlY2tlZCI9PWE/bjpkLGc9ImNoZWNrZWQiPT1hP3A6bDtpZihlKXJldHVybiBqKHRoaXMsYSxjLGYpO3ZhciBoPWMsaT1tKHRoaXMsYSxoLGcpO3JldHVybiBqKHRoaXMsYSxoLm9wZW4oayh0aGlzLGEsZikpLGYpLGIodGhpcyxhLGkpfSxIVE1MVGV4dEFyZWFFbGVtZW50LnByb3RvdHlwZS5iaW5kPWZ1bmN0aW9uKGEsYixjKXtpZigidmFsdWUiIT09YSlyZXR1cm4gSFRNTEVsZW1lbnQucHJvdG90eXBlLmJpbmQuY2FsbCh0aGlzLGEsYixjKTtpZih0aGlzLnJlbW92ZUF0dHJpYnV0ZSgidmFsdWUiKSxjKXJldHVybiBqKHRoaXMsInZhbHVlIixiKTt2YXIgZT1iLGY9bSh0aGlzLCJ2YWx1ZSIsZSk7cmV0dXJuIGoodGhpcywidmFsdWUiLGUub3BlbihrKHRoaXMsInZhbHVlIixkKSkpLHQodGhpcyxhLGYpfSxIVE1MT3B0aW9uRWxlbWVudC5wcm90b3R5cGUuYmluZD1mdW5jdGlvbihhLGIsYyl7aWYoInZhbHVlIiE9PWEpcmV0dXJuIEhUTUxFbGVtZW50LnByb3RvdHlwZS5iaW5kLmNhbGwodGhpcyxhLGIsYyk7aWYodGhpcy5yZW1vdmVBdHRyaWJ1dGUoInZhbHVlIiksYylyZXR1cm4gcSh0aGlzLGIpO3ZhciBkPWIsZT1tKHRoaXMsInZhbHVlIixkKTtyZXR1cm4gcSh0aGlzLGQub3BlbihyKHRoaXMpKSksdCh0aGlzLGEsZSl9LEhUTUxTZWxlY3RFbGVtZW50LnByb3RvdHlwZS5iaW5kPWZ1bmN0aW9uKGEsYyxkKXtpZigic2VsZWN0ZWRpbmRleCI9PT1hJiYoYT0ic2VsZWN0ZWRJbmRleCIpLCJzZWxlY3RlZEluZGV4IiE9PWEmJiJ2YWx1ZSIhPT1hKXJldHVybiBIVE1MRWxlbWVudC5wcm90b3R5cGUuYmluZC5jYWxsKHRoaXMsYSxjLGQpO2lmKHRoaXMucmVtb3ZlQXR0cmlidXRlKGEpLGQpcmV0dXJuIGoodGhpcyxhLGMpO3ZhciBlPWMsZj1tKHRoaXMsYSxlKTtyZXR1cm4gaih0aGlzLGEsZS5vcGVuKGsodGhpcyxhKSkpLGIodGhpcyxhLGYpfX0odGhpcyksZnVuY3Rpb24oYSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGIoYSl7aWYoIWEpdGhyb3cgbmV3IEVycm9yKCJBc3NlcnRpb24gZmFpbGVkIil9ZnVuY3Rpb24gYyhhKXtmb3IodmFyIGI7Yj1hLnBhcmVudE5vZGU7KWE9YjtyZXR1cm4gYX1mdW5jdGlvbiBkKGEsYil7aWYoYil7Zm9yKHZhciBkLGU9IiMiK2I7IWQmJihhPWMoYSksYS5wcm90b0NvbnRlbnRfP2Q9YS5wcm90b0NvbnRlbnRfLnF1ZXJ5U2VsZWN0b3IoZSk6YS5nZXRFbGVtZW50QnlJZCYmKGQ9YS5nZXRFbGVtZW50QnlJZChiKSksIWQmJmEudGVtcGxhdGVDcmVhdG9yXyk7KWE9YS50ZW1wbGF0ZUNyZWF0b3JfO3JldHVybiBkfX1mdW5jdGlvbiBlKGEpe3JldHVybiJ0ZW1wbGF0ZSI9PWEudGFnTmFtZSYmImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj09YS5uYW1lc3BhY2VVUkl9ZnVuY3Rpb24gZihhKXtyZXR1cm4iVEVNUExBVEUiPT1hLnRhZ05hbWUmJiJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sIj09YS5uYW1lc3BhY2VVUkl9ZnVuY3Rpb24gZyhhKXtyZXR1cm4gQm9vbGVhbihMW2EudGFnTmFtZV0mJmEuaGFzQXR0cmlidXRlKCJ0ZW1wbGF0ZSIpKX1mdW5jdGlvbiBoKGEpe3JldHVybiB2b2lkIDA9PT1hLmlzVGVtcGxhdGVfJiYoYS5pc1RlbXBsYXRlXz0iVEVNUExBVEUiPT1hLnRhZ05hbWV8fGcoYSkpLGEuaXNUZW1wbGF0ZV99ZnVuY3Rpb24gaShhLGIpe3ZhciBjPWEucXVlcnlTZWxlY3RvckFsbChOKTtoKGEpJiZiKGEpLEcoYyxiKX1mdW5jdGlvbiBqKGEpe2Z1bmN0aW9uIGIoYSl7SFRNTFRlbXBsYXRlRWxlbWVudC5kZWNvcmF0ZShhKXx8aihhLmNvbnRlbnQpfWkoYSxiKX1mdW5jdGlvbiBrKGEsYil7T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoYikuZm9yRWFjaChmdW5jdGlvbihjKXtPYmplY3QuZGVmaW5lUHJvcGVydHkoYSxjLE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoYixjKSl9KX1mdW5jdGlvbiBsKGEpe3ZhciBiPWEub3duZXJEb2N1bWVudDtpZighYi5kZWZhdWx0VmlldylyZXR1cm4gYjt2YXIgYz1iLnRlbXBsYXRlQ29udGVudHNPd25lcl87aWYoIWMpe2ZvcihjPWIuaW1wbGVtZW50YXRpb24uY3JlYXRlSFRNTERvY3VtZW50KCIiKTtjLmxhc3RDaGlsZDspYy5yZW1vdmVDaGlsZChjLmxhc3RDaGlsZCk7Yi50ZW1wbGF0ZUNvbnRlbnRzT3duZXJfPWN9cmV0dXJuIGN9ZnVuY3Rpb24gbShhKXtpZighYS5zdGFnaW5nRG9jdW1lbnRfKXt2YXIgYj1hLm93bmVyRG9jdW1lbnQ7aWYoIWIuc3RhZ2luZ0RvY3VtZW50Xyl7Yi5zdGFnaW5nRG9jdW1lbnRfPWIuaW1wbGVtZW50YXRpb24uY3JlYXRlSFRNTERvY3VtZW50KCIiKSxiLnN0YWdpbmdEb2N1bWVudF8uaXNTdGFnaW5nRG9jdW1lbnQ9ITA7dmFyIGM9Yi5zdGFnaW5nRG9jdW1lbnRfLmNyZWF0ZUVsZW1lbnQoImJhc2UiKTtjLmhyZWY9ZG9jdW1lbnQuYmFzZVVSSSxiLnN0YWdpbmdEb2N1bWVudF8uaGVhZC5hcHBlbmRDaGlsZChjKSxiLnN0YWdpbmdEb2N1bWVudF8uc3RhZ2luZ0RvY3VtZW50Xz1iLnN0YWdpbmdEb2N1bWVudF99YS5zdGFnaW5nRG9jdW1lbnRfPWIuc3RhZ2luZ0RvY3VtZW50X31yZXR1cm4gYS5zdGFnaW5nRG9jdW1lbnRffWZ1bmN0aW9uIG4oYSl7dmFyIGI9YS5vd25lckRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInRlbXBsYXRlIik7YS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShiLGEpO2Zvcih2YXIgYz1hLmF0dHJpYnV0ZXMsZD1jLmxlbmd0aDtkLS0+MDspe3ZhciBlPWNbZF07S1tlLm5hbWVdJiYoInRlbXBsYXRlIiE9PWUubmFtZSYmYi5zZXRBdHRyaWJ1dGUoZS5uYW1lLGUudmFsdWUpLGEucmVtb3ZlQXR0cmlidXRlKGUubmFtZSkpfXJldHVybiBifWZ1bmN0aW9uIG8oYSl7dmFyIGI9YS5vd25lckRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInRlbXBsYXRlIik7YS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShiLGEpO2Zvcih2YXIgYz1hLmF0dHJpYnV0ZXMsZD1jLmxlbmd0aDtkLS0+MDspe3ZhciBlPWNbZF07Yi5zZXRBdHRyaWJ1dGUoZS5uYW1lLGUudmFsdWUpLGEucmVtb3ZlQXR0cmlidXRlKGUubmFtZSl9cmV0dXJuIGEucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChhKSxifWZ1bmN0aW9uIHAoYSxiLGMpe3ZhciBkPWEuY29udGVudDtpZihjKXJldHVybiB2b2lkIGQuYXBwZW5kQ2hpbGQoYik7Zm9yKHZhciBlO2U9Yi5maXJzdENoaWxkOylkLmFwcGVuZENoaWxkKGUpfWZ1bmN0aW9uIHEoYSl7UD9hLl9fcHJvdG9fXz1IVE1MVGVtcGxhdGVFbGVtZW50LnByb3RvdHlwZTprKGEsSFRNTFRlbXBsYXRlRWxlbWVudC5wcm90b3R5cGUpfWZ1bmN0aW9uIHIoYSl7YS5zZXRNb2RlbEZuX3x8KGEuc2V0TW9kZWxGbl89ZnVuY3Rpb24oKXthLnNldE1vZGVsRm5TY2hlZHVsZWRfPSExOwp2YXIgYj16KGEsYS5kZWxlZ2F0ZV8mJmEuZGVsZWdhdGVfLnByZXBhcmVCaW5kaW5nKTt3KGEsYixhLm1vZGVsXyl9KSxhLnNldE1vZGVsRm5TY2hlZHVsZWRffHwoYS5zZXRNb2RlbEZuU2NoZWR1bGVkXz0hMCxPYnNlcnZlci5ydW5FT01fKGEuc2V0TW9kZWxGbl8pKX1mdW5jdGlvbiBzKGEsYixjLGQpe2lmKGEmJmEubGVuZ3RoKXtmb3IodmFyIGUsZj1hLmxlbmd0aCxnPTAsaD0wLGk9MCxqPSEwO2Y+aDspe3ZhciBnPWEuaW5kZXhPZigie3siLGgpLGs9YS5pbmRleE9mKCJbWyIsaCksbD0hMSxtPSJ9fSI7aWYoaz49MCYmKDA+Z3x8Zz5rKSYmKGc9ayxsPSEwLG09Il1dIiksaT0wPmc/LTE6YS5pbmRleE9mKG0sZysyKSwwPmkpe2lmKCFlKXJldHVybjtlLnB1c2goYS5zbGljZShoKSk7YnJlYWt9ZT1lfHxbXSxlLnB1c2goYS5zbGljZShoLGcpKTt2YXIgbj1hLnNsaWNlKGcrMixpKS50cmltKCk7ZS5wdXNoKGwpLGo9aiYmbDt2YXIgbz1kJiZkKG4sYixjKTtlLnB1c2gobnVsbD09bz9QYXRoLmdldChuKTpudWxsKSxlLnB1c2gobyksaD1pKzJ9cmV0dXJuIGg9PT1mJiZlLnB1c2goIiIpLGUuaGFzT25lUGF0aD01PT09ZS5sZW5ndGgsZS5pc1NpbXBsZVBhdGg9ZS5oYXNPbmVQYXRoJiYiIj09ZVswXSYmIiI9PWVbNF0sZS5vbmx5T25lVGltZT1qLGUuY29tYmluYXRvcj1mdW5jdGlvbihhKXtmb3IodmFyIGI9ZVswXSxjPTE7YzxlLmxlbmd0aDtjKz00KXt2YXIgZD1lLmhhc09uZVBhdGg/YTphWyhjLTEpLzRdO3ZvaWQgMCE9PWQmJihiKz1kKSxiKz1lW2MrM119cmV0dXJuIGJ9LGV9fWZ1bmN0aW9uIHQoYSxiLGMsZCl7aWYoYi5oYXNPbmVQYXRoKXt2YXIgZT1iWzNdLGY9ZT9lKGQsYywhMCk6YlsyXS5nZXRWYWx1ZUZyb20oZCk7cmV0dXJuIGIuaXNTaW1wbGVQYXRoP2Y6Yi5jb21iaW5hdG9yKGYpfWZvcih2YXIgZz1bXSxoPTE7aDxiLmxlbmd0aDtoKz00KXt2YXIgZT1iW2grMl07Z1soaC0xKS80XT1lP2UoZCxjKTpiW2grMV0uZ2V0VmFsdWVGcm9tKGQpfXJldHVybiBiLmNvbWJpbmF0b3IoZyl9ZnVuY3Rpb24gdShhLGIsYyxkKXt2YXIgZT1iWzNdLGY9ZT9lKGQsYywhMSk6bmV3IFBhdGhPYnNlcnZlcihkLGJbMl0pO3JldHVybiBiLmlzU2ltcGxlUGF0aD9mOm5ldyBPYnNlcnZlclRyYW5zZm9ybShmLGIuY29tYmluYXRvcil9ZnVuY3Rpb24gdihhLGIsYyxkKXtpZihiLm9ubHlPbmVUaW1lKXJldHVybiB0KGEsYixjLGQpO2lmKGIuaGFzT25lUGF0aClyZXR1cm4gdShhLGIsYyxkKTtmb3IodmFyIGU9bmV3IENvbXBvdW5kT2JzZXJ2ZXIsZj0xO2Y8Yi5sZW5ndGg7Zis9NCl7dmFyIGc9YltmXSxoPWJbZisyXTtpZihoKXt2YXIgaT1oKGQsYyxnKTtnP2UuYWRkUGF0aChpKTplLmFkZE9ic2VydmVyKGkpfWVsc2V7dmFyIGo9YltmKzFdO2c/ZS5hZGRQYXRoKGouZ2V0VmFsdWVGcm9tKGQpKTplLmFkZFBhdGgoZCxqKX19cmV0dXJuIG5ldyBPYnNlcnZlclRyYW5zZm9ybShlLGIuY29tYmluYXRvcil9ZnVuY3Rpb24gdyhhLGIsYyxkKXtmb3IodmFyIGU9MDtlPGIubGVuZ3RoO2UrPTIpe3ZhciBmPWJbZV0sZz1iW2UrMV0saD12KGYsZyxhLGMpLGk9YS5iaW5kKGYsaCxnLm9ubHlPbmVUaW1lKTtpJiZkJiZkLnB1c2goaSl9aWYoYS5iaW5kRmluaXNoZWQoKSxiLmlzVGVtcGxhdGUpe2EubW9kZWxfPWM7dmFyIGo9YS5wcm9jZXNzQmluZGluZ0RpcmVjdGl2ZXNfKGIpO2QmJmomJmQucHVzaChqKX19ZnVuY3Rpb24geChhLGIsYyl7dmFyIGQ9YS5nZXRBdHRyaWJ1dGUoYik7cmV0dXJuIHMoIiI9PWQ/Int7fX0iOmQsYixhLGMpfWZ1bmN0aW9uIHkoYSxjKXtiKGEpO2Zvcih2YXIgZD1bXSxlPTA7ZTxhLmF0dHJpYnV0ZXMubGVuZ3RoO2UrKyl7Zm9yKHZhciBmPWEuYXR0cmlidXRlc1tlXSxnPWYubmFtZSxpPWYudmFsdWU7Il8iPT09Z1swXTspZz1nLnN1YnN0cmluZygxKTtpZighaChhKXx8ZyE9PUomJmchPT1IJiZnIT09SSl7dmFyIGo9cyhpLGcsYSxjKTtqJiZkLnB1c2goZyxqKX19cmV0dXJuIGgoYSkmJihkLmlzVGVtcGxhdGU9ITAsZC5pZj14KGEsSixjKSxkLmJpbmQ9eChhLEgsYyksZC5yZXBlYXQ9eChhLEksYyksIWQuaWZ8fGQuYmluZHx8ZC5yZXBlYXR8fChkLmJpbmQ9cygie3t9fSIsSCxhLGMpKSksZH1mdW5jdGlvbiB6KGEsYil7aWYoYS5ub2RlVHlwZT09PU5vZGUuRUxFTUVOVF9OT0RFKXJldHVybiB5KGEsYik7aWYoYS5ub2RlVHlwZT09PU5vZGUuVEVYVF9OT0RFKXt2YXIgYz1zKGEuZGF0YSwidGV4dENvbnRlbnQiLGEsYik7aWYoYylyZXR1cm5bInRleHRDb250ZW50IixjXX1yZXR1cm5bXX1mdW5jdGlvbiBBKGEsYixjLGQsZSxmLGcpe2Zvcih2YXIgaD1iLmFwcGVuZENoaWxkKGMuaW1wb3J0Tm9kZShhLCExKSksaT0wLGo9YS5maXJzdENoaWxkO2o7aj1qLm5leHRTaWJsaW5nKUEoaixoLGMsZC5jaGlsZHJlbltpKytdLGUsZixnKTtyZXR1cm4gZC5pc1RlbXBsYXRlJiYoSFRNTFRlbXBsYXRlRWxlbWVudC5kZWNvcmF0ZShoLGEpLGYmJmguc2V0RGVsZWdhdGVfKGYpKSx3KGgsZCxlLGcpLGh9ZnVuY3Rpb24gQihhLGIpe3ZhciBjPXooYSxiKTtjLmNoaWxkcmVuPXt9O2Zvcih2YXIgZD0wLGU9YS5maXJzdENoaWxkO2U7ZT1lLm5leHRTaWJsaW5nKWMuY2hpbGRyZW5bZCsrXT1CKGUsYik7cmV0dXJuIGN9ZnVuY3Rpb24gQyhhKXt2YXIgYj1hLmlkXztyZXR1cm4gYnx8KGI9YS5pZF89UysrKSxifWZ1bmN0aW9uIEQoYSxiKXt2YXIgYz1DKGEpO2lmKGIpe3ZhciBkPWIuYmluZGluZ01hcHNbY107cmV0dXJuIGR8fChkPWIuYmluZGluZ01hcHNbY109QihhLGIucHJlcGFyZUJpbmRpbmcpfHxbXSksZH12YXIgZD1hLmJpbmRpbmdNYXBfO3JldHVybiBkfHwoZD1hLmJpbmRpbmdNYXBfPUIoYSx2b2lkIDApfHxbXSksZH1mdW5jdGlvbiBFKGEpe3RoaXMuY2xvc2VkPSExLHRoaXMudGVtcGxhdGVFbGVtZW50Xz1hLHRoaXMuaW5zdGFuY2VzPVtdLHRoaXMuZGVwcz12b2lkIDAsdGhpcy5pdGVyYXRlZFZhbHVlPVtdLHRoaXMucHJlc2VudFZhbHVlPXZvaWQgMCx0aGlzLmFycmF5T2JzZXJ2ZXI9dm9pZCAwfXZhciBGLEc9QXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbC5iaW5kKEFycmF5LnByb3RvdHlwZS5mb3JFYWNoKTthLk1hcCYmImZ1bmN0aW9uIj09dHlwZW9mIGEuTWFwLnByb3RvdHlwZS5mb3JFYWNoP0Y9YS5NYXA6KEY9ZnVuY3Rpb24oKXt0aGlzLmtleXM9W10sdGhpcy52YWx1ZXM9W119LEYucHJvdG90eXBlPXtzZXQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmtleXMuaW5kZXhPZihhKTswPmM/KHRoaXMua2V5cy5wdXNoKGEpLHRoaXMudmFsdWVzLnB1c2goYikpOnRoaXMudmFsdWVzW2NdPWJ9LGdldDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmtleXMuaW5kZXhPZihhKTtpZighKDA+YikpcmV0dXJuIHRoaXMudmFsdWVzW2JdfSwiZGVsZXRlIjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmtleXMuaW5kZXhPZihhKTtyZXR1cm4gMD5iPyExOih0aGlzLmtleXMuc3BsaWNlKGIsMSksdGhpcy52YWx1ZXMuc3BsaWNlKGIsMSksITApfSxmb3JFYWNoOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTA7Yzx0aGlzLmtleXMubGVuZ3RoO2MrKylhLmNhbGwoYnx8dGhpcyx0aGlzLnZhbHVlc1tjXSx0aGlzLmtleXNbY10sdGhpcyl9fSk7ImZ1bmN0aW9uIiE9dHlwZW9mIGRvY3VtZW50LmNvbnRhaW5zJiYoRG9jdW1lbnQucHJvdG90eXBlLmNvbnRhaW5zPWZ1bmN0aW9uKGEpe3JldHVybiBhPT09dGhpc3x8YS5wYXJlbnROb2RlPT09dGhpcz8hMDp0aGlzLmRvY3VtZW50RWxlbWVudC5jb250YWlucyhhKX0pO3ZhciBIPSJiaW5kIixJPSJyZXBlYXQiLEo9ImlmIixLPXt0ZW1wbGF0ZTohMCxyZXBlYXQ6ITAsYmluZDohMCxyZWY6ITB9LEw9e1RIRUFEOiEwLFRCT0RZOiEwLFRGT09UOiEwLFRIOiEwLFRSOiEwLFREOiEwLENPTEdST1VQOiEwLENPTDohMCxDQVBUSU9OOiEwLE9QVElPTjohMCxPUFRHUk9VUDohMH0sTT0idW5kZWZpbmVkIiE9dHlwZW9mIEhUTUxUZW1wbGF0ZUVsZW1lbnQ7TSYmIWZ1bmN0aW9uKCl7dmFyIGE9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidGVtcGxhdGUiKSxiPWEuY29udGVudC5vd25lckRvY3VtZW50LGM9Yi5hcHBlbmRDaGlsZChiLmNyZWF0ZUVsZW1lbnQoImh0bWwiKSksZD1jLmFwcGVuZENoaWxkKGIuY3JlYXRlRWxlbWVudCgiaGVhZCIpKSxlPWIuY3JlYXRlRWxlbWVudCgiYmFzZSIpO2UuaHJlZj1kb2N1bWVudC5iYXNlVVJJLGQuYXBwZW5kQ2hpbGQoZSl9KCk7dmFyIE49InRlbXBsYXRlLCAiK09iamVjdC5rZXlzKEwpLm1hcChmdW5jdGlvbihhKXtyZXR1cm4gYS50b0xvd2VyQ2FzZSgpKyJbdGVtcGxhdGVdIn0pLmpvaW4oIiwgIik7ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsZnVuY3Rpb24oKXtqKGRvY3VtZW50KSxQbGF0Zm9ybS5wZXJmb3JtTWljcm90YXNrQ2hlY2twb2ludCgpfSwhMSksTXx8KGEuSFRNTFRlbXBsYXRlRWxlbWVudD1mdW5jdGlvbigpe3Rocm93IFR5cGVFcnJvcigiSWxsZWdhbCBjb25zdHJ1Y3RvciIpfSk7dmFyIE8sUD0iX19wcm90b19fImlue307ImZ1bmN0aW9uIj09dHlwZW9mIE11dGF0aW9uT2JzZXJ2ZXImJihPPW5ldyBNdXRhdGlvbk9ic2VydmVyKGZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0wO2I8YS5sZW5ndGg7YisrKWFbYl0udGFyZ2V0LnJlZkNoYW5nZWRfKCl9KSksSFRNTFRlbXBsYXRlRWxlbWVudC5kZWNvcmF0ZT1mdW5jdGlvbihhLGMpe2lmKGEudGVtcGxhdGVJc0RlY29yYXRlZF8pcmV0dXJuITE7dmFyIGQ9YTtkLnRlbXBsYXRlSXNEZWNvcmF0ZWRfPSEwO3ZhciBoPWYoZCkmJk0saT1oLGs9IWgsbT0hMTtpZihofHwoZyhkKT8oYighYyksZD1uKGEpLGQudGVtcGxhdGVJc0RlY29yYXRlZF89ITAsaD1NLG09ITApOmUoZCkmJihkPW8oYSksZC50ZW1wbGF0ZUlzRGVjb3JhdGVkXz0hMCxoPU0pKSwhaCl7cShkKTt2YXIgcj1sKGQpO2QuY29udGVudF89ci5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCl9cmV0dXJuIGM/ZC5pbnN0YW5jZVJlZl89YzprP3AoZCxhLG0pOmkmJmooZC5jb250ZW50KSwhMH0sSFRNTFRlbXBsYXRlRWxlbWVudC5ib290c3RyYXA9ajt2YXIgUT1hLkhUTUxVbmtub3duRWxlbWVudHx8SFRNTEVsZW1lbnQsUj17Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudF99LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfTtNfHwoSFRNTFRlbXBsYXRlRWxlbWVudC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShRLnByb3RvdHlwZSksT2JqZWN0LmRlZmluZVByb3BlcnR5KEhUTUxUZW1wbGF0ZUVsZW1lbnQucHJvdG90eXBlLCJjb250ZW50IixSKSksayhIVE1MVGVtcGxhdGVFbGVtZW50LnByb3RvdHlwZSx7YmluZDpmdW5jdGlvbihhLGIsYyl7aWYoInJlZiIhPWEpcmV0dXJuIEVsZW1lbnQucHJvdG90eXBlLmJpbmQuY2FsbCh0aGlzLGEsYixjKTt2YXIgZD10aGlzLGU9Yz9iOmIub3BlbihmdW5jdGlvbihhKXtkLnNldEF0dHJpYnV0ZSgicmVmIixhKSxkLnJlZkNoYW5nZWRfKCl9KTtyZXR1cm4gdGhpcy5zZXRBdHRyaWJ1dGUoInJlZiIsZSksdGhpcy5yZWZDaGFuZ2VkXygpLGM/dm9pZCAwOih0aGlzLmJpbmRpbmdzXz90aGlzLmJpbmRpbmdzXy5yZWY9Yjp0aGlzLmJpbmRpbmdzXz17cmVmOmJ9LGIpfSxwcm9jZXNzQmluZGluZ0RpcmVjdGl2ZXNfOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLml0ZXJhdG9yXyYmdGhpcy5pdGVyYXRvcl8uY2xvc2VEZXBzKCksYS5pZnx8YS5iaW5kfHxhLnJlcGVhdD8odGhpcy5pdGVyYXRvcl98fCh0aGlzLml0ZXJhdG9yXz1uZXcgRSh0aGlzKSksdGhpcy5pdGVyYXRvcl8udXBkYXRlRGVwZW5kZW5jaWVzKGEsdGhpcy5tb2RlbF8pLE8mJk8ub2JzZXJ2ZSh0aGlzLHthdHRyaWJ1dGVzOiEwLGF0dHJpYnV0ZUZpbHRlcjpbInJlZiJdfSksdGhpcy5pdGVyYXRvcl8pOnZvaWQodGhpcy5pdGVyYXRvcl8mJih0aGlzLml0ZXJhdG9yXy5jbG9zZSgpLHRoaXMuaXRlcmF0b3JfPXZvaWQgMCkpfSxjcmVhdGVJbnN0YW5jZTpmdW5jdGlvbihhLGIsYyl7Yj9jPXRoaXMubmV3RGVsZWdhdGVfKGIpOmN8fChjPXRoaXMuZGVsZWdhdGVfKSx0aGlzLnJlZkNvbnRlbnRffHwodGhpcy5yZWZDb250ZW50Xz10aGlzLnJlZl8uY29udGVudCk7dmFyIGQ9dGhpcy5yZWZDb250ZW50XztpZihudWxsPT09ZC5maXJzdENoaWxkKXJldHVybiBUO3ZhciBlPUQoZCxjKSxmPW0odGhpcyksZz1mLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtnLnRlbXBsYXRlQ3JlYXRvcl89dGhpcyxnLnByb3RvQ29udGVudF89ZCxnLmJpbmRpbmdzXz1bXSxnLnRlcm1pbmF0b3JfPW51bGw7Zm9yKHZhciBoPWcudGVtcGxhdGVJbnN0YW5jZV89e2ZpcnN0Tm9kZTpudWxsLGxhc3ROb2RlOm51bGwsbW9kZWw6YX0saT0wLGo9ITEsaz1kLmZpcnN0Q2hpbGQ7aztrPWsubmV4dFNpYmxpbmcpe251bGw9PT1rLm5leHRTaWJsaW5nJiYoaj0hMCk7dmFyIGw9QShrLGcsZixlLmNoaWxkcmVuW2krK10sYSxjLGcuYmluZGluZ3NfKTtsLnRlbXBsYXRlSW5zdGFuY2VfPWgsaiYmKGcudGVybWluYXRvcl89bCl9cmV0dXJuIGguZmlyc3ROb2RlPWcuZmlyc3RDaGlsZCxoLmxhc3ROb2RlPWcubGFzdENoaWxkLGcudGVtcGxhdGVDcmVhdG9yXz12b2lkIDAsZy5wcm90b0NvbnRlbnRfPXZvaWQgMCxnfSxnZXQgbW9kZWwoKXtyZXR1cm4gdGhpcy5tb2RlbF99LHNldCBtb2RlbChhKXt0aGlzLm1vZGVsXz1hLHIodGhpcyl9LGdldCBiaW5kaW5nRGVsZWdhdGUoKXtyZXR1cm4gdGhpcy5kZWxlZ2F0ZV8mJnRoaXMuZGVsZWdhdGVfLnJhd30scmVmQ2hhbmdlZF86ZnVuY3Rpb24oKXt0aGlzLml0ZXJhdG9yXyYmdGhpcy5yZWZDb250ZW50XyE9PXRoaXMucmVmXy5jb250ZW50JiYodGhpcy5yZWZDb250ZW50Xz12b2lkIDAsdGhpcy5pdGVyYXRvcl8udmFsdWVDaGFuZ2VkKCksdGhpcy5pdGVyYXRvcl8udXBkYXRlSXRlcmF0ZWRWYWx1ZSh0aGlzLml0ZXJhdG9yXy5nZXRVcGRhdGVkVmFsdWUoKSkpfSxjbGVhcjpmdW5jdGlvbigpe3RoaXMubW9kZWxfPXZvaWQgMCx0aGlzLmRlbGVnYXRlXz12b2lkIDAsdGhpcy5iaW5kaW5nc18mJnRoaXMuYmluZGluZ3NfLnJlZiYmdGhpcy5iaW5kaW5nc18ucmVmLmNsb3NlKCksdGhpcy5yZWZDb250ZW50Xz12b2lkIDAsdGhpcy5pdGVyYXRvcl8mJih0aGlzLml0ZXJhdG9yXy52YWx1ZUNoYW5nZWQoKSx0aGlzLml0ZXJhdG9yXy5jbG9zZSgpLHRoaXMuaXRlcmF0b3JfPXZvaWQgMCl9LHNldERlbGVnYXRlXzpmdW5jdGlvbihhKXt0aGlzLmRlbGVnYXRlXz1hLHRoaXMuYmluZGluZ01hcF89dm9pZCAwLHRoaXMuaXRlcmF0b3JfJiYodGhpcy5pdGVyYXRvcl8uaW5zdGFuY2VQb3NpdGlvbkNoYW5nZWRGbl89dm9pZCAwLHRoaXMuaXRlcmF0b3JfLmluc3RhbmNlTW9kZWxGbl89dm9pZCAwKX0sbmV3RGVsZWdhdGVfOmZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYil7dmFyIGM9YSYmYVtiXTtpZigiZnVuY3Rpb24iPT10eXBlb2YgYylyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gYy5hcHBseShhLGFyZ3VtZW50cyl9fWlmKGEpcmV0dXJue2JpbmRpbmdNYXBzOnt9LHJhdzphLHByZXBhcmVCaW5kaW5nOmIoInByZXBhcmVCaW5kaW5nIikscHJlcGFyZUluc3RhbmNlTW9kZWw6YigicHJlcGFyZUluc3RhbmNlTW9kZWwiKSxwcmVwYXJlSW5zdGFuY2VQb3NpdGlvbkNoYW5nZWQ6YigicHJlcGFyZUluc3RhbmNlUG9zaXRpb25DaGFuZ2VkIil9fSxzZXQgYmluZGluZ0RlbGVnYXRlKGEpe2lmKHRoaXMuZGVsZWdhdGVfKXRocm93IEVycm9yKCJUZW1wbGF0ZSBtdXN0IGJlIGNsZWFyZWQgYmVmb3JlIGEgbmV3IGJpbmRpbmdEZWxlZ2F0ZSBjYW4gYmUgYXNzaWduZWQiKTt0aGlzLnNldERlbGVnYXRlXyh0aGlzLm5ld0RlbGVnYXRlXyhhKSl9LGdldCByZWZfKCl7dmFyIGE9ZCh0aGlzLHRoaXMuZ2V0QXR0cmlidXRlKCJyZWYiKSk7aWYoYXx8KGE9dGhpcy5pbnN0YW5jZVJlZl8pLCFhKXJldHVybiB0aGlzO3ZhciBiPWEucmVmXztyZXR1cm4gYj9iOmF9fSk7dmFyIFM9MTtPYmplY3QuZGVmaW5lUHJvcGVydHkoTm9kZS5wcm90b3R5cGUsInRlbXBsYXRlSW5zdGFuY2UiLHtnZXQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnRlbXBsYXRlSW5zdGFuY2VfO3JldHVybiBhP2E6dGhpcy5wYXJlbnROb2RlP3RoaXMucGFyZW50Tm9kZS50ZW1wbGF0ZUluc3RhbmNlOnZvaWQgMH19KTt2YXIgVD1kb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7VC5iaW5kaW5nc189W10sVC50ZXJtaW5hdG9yXz1udWxsLEUucHJvdG90eXBlPXtjbG9zZURlcHM6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmRlcHM7YSYmKGEuaWZPbmVUaW1lPT09ITEmJmEuaWZWYWx1ZS5jbG9zZSgpLGEub25lVGltZT09PSExJiZhLnZhbHVlLmNsb3NlKCkpfSx1cGRhdGVEZXBlbmRlbmNpZXM6ZnVuY3Rpb24oYSxiKXt0aGlzLmNsb3NlRGVwcygpO3ZhciBjPXRoaXMuZGVwcz17fSxkPXRoaXMudGVtcGxhdGVFbGVtZW50XyxlPSEwO2lmKGEuaWYpe2lmKGMuaGFzSWY9ITAsYy5pZk9uZVRpbWU9YS5pZi5vbmx5T25lVGltZSxjLmlmVmFsdWU9dihKLGEuaWYsZCxiKSxlPWMuaWZWYWx1ZSxjLmlmT25lVGltZSYmIWUpcmV0dXJuIHZvaWQgdGhpcy52YWx1ZUNoYW5nZWQoKTtjLmlmT25lVGltZXx8KGU9ZS5vcGVuKHRoaXMudXBkYXRlSWZWYWx1ZSx0aGlzKSl9YS5yZXBlYXQ/KGMucmVwZWF0PSEwLGMub25lVGltZT1hLnJlcGVhdC5vbmx5T25lVGltZSxjLnZhbHVlPXYoSSxhLnJlcGVhdCxkLGIpKTooYy5yZXBlYXQ9ITEsYy5vbmVUaW1lPWEuYmluZC5vbmx5T25lVGltZSxjLnZhbHVlPXYoSCxhLmJpbmQsZCxiKSk7dmFyIGY9Yy52YWx1ZTtyZXR1cm4gYy5vbmVUaW1lfHwoZj1mLm9wZW4odGhpcy51cGRhdGVJdGVyYXRlZFZhbHVlLHRoaXMpKSxlP3ZvaWQgdGhpcy51cGRhdGVWYWx1ZShmKTp2b2lkIHRoaXMudmFsdWVDaGFuZ2VkKCl9LGdldFVwZGF0ZWRWYWx1ZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZGVwcy52YWx1ZTtyZXR1cm4gdGhpcy5kZXBzLm9uZVRpbWV8fChhPWEuZGlzY2FyZENoYW5nZXMoKSksYX0sdXBkYXRlSWZWYWx1ZTpmdW5jdGlvbihhKXtyZXR1cm4gYT92b2lkIHRoaXMudXBkYXRlVmFsdWUodGhpcy5nZXRVcGRhdGVkVmFsdWUoKSk6dm9pZCB0aGlzLnZhbHVlQ2hhbmdlZCgpfSx1cGRhdGVJdGVyYXRlZFZhbHVlOmZ1bmN0aW9uKGEpe2lmKHRoaXMuZGVwcy5oYXNJZil7dmFyIGI9dGhpcy5kZXBzLmlmVmFsdWU7aWYodGhpcy5kZXBzLmlmT25lVGltZXx8KGI9Yi5kaXNjYXJkQ2hhbmdlcygpKSwhYilyZXR1cm4gdm9pZCB0aGlzLnZhbHVlQ2hhbmdlZCgpfXRoaXMudXBkYXRlVmFsdWUoYSl9LHVwZGF0ZVZhbHVlOmZ1bmN0aW9uKGEpe3RoaXMuZGVwcy5yZXBlYXR8fChhPVthXSk7dmFyIGI9dGhpcy5kZXBzLnJlcGVhdCYmIXRoaXMuZGVwcy5vbmVUaW1lJiZBcnJheS5pc0FycmF5KGEpO3RoaXMudmFsdWVDaGFuZ2VkKGEsYil9LHZhbHVlQ2hhbmdlZDpmdW5jdGlvbihhLGIpe0FycmF5LmlzQXJyYXkoYSl8fChhPVtdKSxhIT09dGhpcy5pdGVyYXRlZFZhbHVlJiYodGhpcy51bm9ic2VydmUoKSx0aGlzLnByZXNlbnRWYWx1ZT1hLGImJih0aGlzLmFycmF5T2JzZXJ2ZXI9bmV3IEFycmF5T2JzZXJ2ZXIodGhpcy5wcmVzZW50VmFsdWUpLHRoaXMuYXJyYXlPYnNlcnZlci5vcGVuKHRoaXMuaGFuZGxlU3BsaWNlcyx0aGlzKSksdGhpcy5oYW5kbGVTcGxpY2VzKEFycmF5T2JzZXJ2ZXIuY2FsY3VsYXRlU3BsaWNlcyh0aGlzLnByZXNlbnRWYWx1ZSx0aGlzLml0ZXJhdGVkVmFsdWUpKSl9LGdldExhc3RJbnN0YW5jZU5vZGU6ZnVuY3Rpb24oYSl7aWYoLTE9PWEpcmV0dXJuIHRoaXMudGVtcGxhdGVFbGVtZW50Xzt2YXIgYj10aGlzLmluc3RhbmNlc1thXSxjPWIudGVybWluYXRvcl87aWYoIWMpcmV0dXJuIHRoaXMuZ2V0TGFzdEluc3RhbmNlTm9kZShhLTEpO2lmKGMubm9kZVR5cGUhPT1Ob2RlLkVMRU1FTlRfTk9ERXx8dGhpcy50ZW1wbGF0ZUVsZW1lbnRfPT09YylyZXR1cm4gYzt2YXIgZD1jLml0ZXJhdG9yXztyZXR1cm4gZD9kLmdldExhc3RUZW1wbGF0ZU5vZGUoKTpjfSxnZXRMYXN0VGVtcGxhdGVOb2RlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0TGFzdEluc3RhbmNlTm9kZSh0aGlzLmluc3RhbmNlcy5sZW5ndGgtMSl9LGluc2VydEluc3RhbmNlQXQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmdldExhc3RJbnN0YW5jZU5vZGUoYS0xKSxkPXRoaXMudGVtcGxhdGVFbGVtZW50Xy5wYXJlbnROb2RlO3RoaXMuaW5zdGFuY2VzLnNwbGljZShhLDAsYiksZC5pbnNlcnRCZWZvcmUoYixjLm5leHRTaWJsaW5nKX0sZXh0cmFjdEluc3RhbmNlQXQ6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPXRoaXMuZ2V0TGFzdEluc3RhbmNlTm9kZShhLTEpLGM9dGhpcy5nZXRMYXN0SW5zdGFuY2VOb2RlKGEpLGQ9dGhpcy50ZW1wbGF0ZUVsZW1lbnRfLnBhcmVudE5vZGUsZT10aGlzLmluc3RhbmNlcy5zcGxpY2UoYSwxKVswXTtjIT09Yjspe3ZhciBmPWIubmV4dFNpYmxpbmc7Zj09YyYmKGM9YiksZS5hcHBlbmRDaGlsZChkLnJlbW92ZUNoaWxkKGYpKX1yZXR1cm4gZX0sZ2V0RGVsZWdhdGVGbjpmdW5jdGlvbihhKXtyZXR1cm4gYT1hJiZhKHRoaXMudGVtcGxhdGVFbGVtZW50XyksImZ1bmN0aW9uIj09dHlwZW9mIGE/YTpudWxsfSxoYW5kbGVTcGxpY2VzOmZ1bmN0aW9uKGEpe2lmKCF0aGlzLmNsb3NlZCYmYS5sZW5ndGgpe3ZhciBiPXRoaXMudGVtcGxhdGVFbGVtZW50XztpZighYi5wYXJlbnROb2RlKXJldHVybiB2b2lkIHRoaXMuY2xvc2UoKTtBcnJheU9ic2VydmVyLmFwcGx5U3BsaWNlcyh0aGlzLml0ZXJhdGVkVmFsdWUsdGhpcy5wcmVzZW50VmFsdWUsYSk7dmFyIGM9Yi5kZWxlZ2F0ZV87dm9pZCAwPT09dGhpcy5pbnN0YW5jZU1vZGVsRm5fJiYodGhpcy5pbnN0YW5jZU1vZGVsRm5fPXRoaXMuZ2V0RGVsZWdhdGVGbihjJiZjLnByZXBhcmVJbnN0YW5jZU1vZGVsKSksdm9pZCAwPT09dGhpcy5pbnN0YW5jZVBvc2l0aW9uQ2hhbmdlZEZuXyYmKHRoaXMuaW5zdGFuY2VQb3NpdGlvbkNoYW5nZWRGbl89dGhpcy5nZXREZWxlZ2F0ZUZuKGMmJmMucHJlcGFyZUluc3RhbmNlUG9zaXRpb25DaGFuZ2VkKSk7Zm9yKHZhciBkPW5ldyBGLGU9MCxmPTA7ZjxhLmxlbmd0aDtmKyspe2Zvcih2YXIgZz1hW2ZdLGg9Zy5yZW1vdmVkLGk9MDtpPGgubGVuZ3RoO2krKyl7dmFyIGo9aFtpXSxrPXRoaXMuZXh0cmFjdEluc3RhbmNlQXQoZy5pbmRleCtlKTtrIT09VCYmZC5zZXQoaixrKX1lLT1nLmFkZGVkQ291bnR9Zm9yKHZhciBmPTA7ZjxhLmxlbmd0aDtmKyspZm9yKHZhciBnPWFbZl0sbD1nLmluZGV4O2w8Zy5pbmRleCtnLmFkZGVkQ291bnQ7bCsrKXt2YXIgaj10aGlzLml0ZXJhdGVkVmFsdWVbbF0saz1kLmdldChqKTtrP2QuZGVsZXRlKGopOih0aGlzLmluc3RhbmNlTW9kZWxGbl8mJihqPXRoaXMuaW5zdGFuY2VNb2RlbEZuXyhqKSksaz12b2lkIDA9PT1qP1Q6Yi5jcmVhdGVJbnN0YW5jZShqLHZvaWQgMCxjKSksdGhpcy5pbnNlcnRJbnN0YW5jZUF0KGwsayl9ZC5mb3JFYWNoKGZ1bmN0aW9uKGEpe3RoaXMuY2xvc2VJbnN0YW5jZUJpbmRpbmdzKGEpfSx0aGlzKSx0aGlzLmluc3RhbmNlUG9zaXRpb25DaGFuZ2VkRm5fJiZ0aGlzLnJlcG9ydEluc3RhbmNlc01vdmVkKGEpfX0scmVwb3J0SW5zdGFuY2VNb3ZlZDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmluc3RhbmNlc1thXTtiIT09VCYmdGhpcy5pbnN0YW5jZVBvc2l0aW9uQ2hhbmdlZEZuXyhiLnRlbXBsYXRlSW5zdGFuY2VfLGEpfSxyZXBvcnRJbnN0YW5jZXNNb3ZlZDpmdW5jdGlvbihhKXtmb3IodmFyIGI9MCxjPTAsZD0wO2Q8YS5sZW5ndGg7ZCsrKXt2YXIgZT1hW2RdO2lmKDAhPWMpZm9yKDtiPGUuaW5kZXg7KXRoaXMucmVwb3J0SW5zdGFuY2VNb3ZlZChiKSxiKys7ZWxzZSBiPWUuaW5kZXg7Zm9yKDtiPGUuaW5kZXgrZS5hZGRlZENvdW50Oyl0aGlzLnJlcG9ydEluc3RhbmNlTW92ZWQoYiksYisrO2MrPWUuYWRkZWRDb3VudC1lLnJlbW92ZWQubGVuZ3RofWlmKDAhPWMpZm9yKHZhciBmPXRoaXMuaW5zdGFuY2VzLmxlbmd0aDtmPmI7KXRoaXMucmVwb3J0SW5zdGFuY2VNb3ZlZChiKSxiKyt9LGNsb3NlSW5zdGFuY2VCaW5kaW5nczpmdW5jdGlvbihhKXtmb3IodmFyIGI9YS5iaW5kaW5nc18sYz0wO2M8Yi5sZW5ndGg7YysrKWJbY10uY2xvc2UoKX0sdW5vYnNlcnZlOmZ1bmN0aW9uKCl7dGhpcy5hcnJheU9ic2VydmVyJiYodGhpcy5hcnJheU9ic2VydmVyLmNsb3NlKCksdGhpcy5hcnJheU9ic2VydmVyPXZvaWQgMCl9LGNsb3NlOmZ1bmN0aW9uKCl7aWYoIXRoaXMuY2xvc2VkKXt0aGlzLnVub2JzZXJ2ZSgpO2Zvcih2YXIgYT0wO2E8dGhpcy5pbnN0YW5jZXMubGVuZ3RoO2ErKyl0aGlzLmNsb3NlSW5zdGFuY2VCaW5kaW5ncyh0aGlzLmluc3RhbmNlc1thXSk7dGhpcy5pbnN0YW5jZXMubGVuZ3RoPTAsdGhpcy5jbG9zZURlcHMoKSx0aGlzLnRlbXBsYXRlRWxlbWVudF8uaXRlcmF0b3JfPXZvaWQgMCx0aGlzLmNsb3NlZD0hMH19fSxIVE1MVGVtcGxhdGVFbGVtZW50LmZvckFsbFRlbXBsYXRlc0Zyb21fPWl9KHRoaXMpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7Zi50ZXh0Q29udGVudD1kKyssZS5wdXNoKGEpfWZ1bmN0aW9uIGMoKXtmb3IoO2UubGVuZ3RoOyllLnNoaWZ0KCkoKX12YXIgZD0wLGU9W10sZj1kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgiIik7bmV3KHdpbmRvdy5NdXRhdGlvbk9ic2VydmVyfHxKc011dGF0aW9uT2JzZXJ2ZXIpKGMpLm9ic2VydmUoZix7Y2hhcmFjdGVyRGF0YTohMH0pLGEuZW5kT2ZNaWNyb3Rhc2s9Yn0oUGxhdGZvcm0pLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoKXtlfHwoZT0hMCxhLmVuZE9mTWljcm90YXNrKGZ1bmN0aW9uKCl7ZT0hMSxsb2dGbGFncy5kYXRhJiZjb25zb2xlLmdyb3VwKCJQbGF0Zm9ybS5mbHVzaCgpIiksYS5wZXJmb3JtTWljcm90YXNrQ2hlY2twb2ludCgpLGxvZ0ZsYWdzLmRhdGEmJmNvbnNvbGUuZ3JvdXBFbmQoKX0pKX12YXIgYz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzdHlsZSIpO2MudGV4dENvbnRlbnQ9InRlbXBsYXRlIHtkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7fSAvKiBpbmplY3RlZCBieSBwbGF0Zm9ybS5qcyAqLyI7dmFyIGQ9ZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiaGVhZCIpO2QuaW5zZXJ0QmVmb3JlKGMsZC5maXJzdENoaWxkKTt2YXIgZTtpZihPYnNlcnZlci5oYXNPYmplY3RPYnNlcnZlKWI9ZnVuY3Rpb24oKXt9O2Vsc2V7dmFyIGY9MTI1O3dpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJXZWJDb21wb25lbnRzUmVhZHkiLGZ1bmN0aW9uKCl7YigpLGEuZmx1c2hQb2xsPXNldEludGVydmFsKGIsZil9KX1pZih3aW5kb3cuQ3VzdG9tRWxlbWVudHMmJiFDdXN0b21FbGVtZW50cy51c2VOYXRpdmUpe3ZhciBnPURvY3VtZW50LnByb3RvdHlwZS5pbXBvcnROb2RlO0RvY3VtZW50LnByb3RvdHlwZS5pbXBvcnROb2RlPWZ1bmN0aW9uKGEsYil7dmFyIGM9Zy5jYWxsKHRoaXMsYSxiKTtyZXR1cm4gQ3VzdG9tRWxlbWVudHMudXBncmFkZUFsbChjKSxjfX1hLmZsdXNoPWJ9KHdpbmRvdy5QbGF0Zm9ybSksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhLGIsZCxlKXtyZXR1cm4gYS5yZXBsYWNlKGUsZnVuY3Rpb24oYSxlLGYsZyl7dmFyIGg9Zi5yZXBsYWNlKC9bIiddL2csIiIpO3JldHVybiBoPWMoYixoLGQpLGUrIiciK2grIiciK2d9KX1mdW5jdGlvbiBjKGEsYixjKXtpZihiJiYiLyI9PT1iWzBdKXJldHVybiBiO3ZhciBlPW5ldyBVUkwoYixhKTtyZXR1cm4gYz9lLmhyZWY6ZChlLmhyZWYpfWZ1bmN0aW9uIGQoYSl7dmFyIGI9bmV3IFVSTChkb2N1bWVudC5iYXNlVVJJKSxjPW5ldyBVUkwoYSxiKTtyZXR1cm4gYy5ob3N0PT09Yi5ob3N0JiZjLnBvcnQ9PT1iLnBvcnQmJmMucHJvdG9jb2w9PT1iLnByb3RvY29sP2UoYixjKTphfWZ1bmN0aW9uIGUoYSxiKXtmb3IodmFyIGM9YS5wYXRobmFtZSxkPWIucGF0aG5hbWUsZT1jLnNwbGl0KCIvIiksZj1kLnNwbGl0KCIvIik7ZS5sZW5ndGgmJmVbMF09PT1mWzBdOyllLnNoaWZ0KCksZi5zaGlmdCgpO2Zvcih2YXIgZz0wLGg9ZS5sZW5ndGgtMTtoPmc7ZysrKWYudW5zaGlmdCgiLi4iKTtyZXR1cm4gZi5qb2luKCIvIikrYi5zZWFyY2grYi5oYXNofXZhciBmPXtyZXNvbHZlRG9tOmZ1bmN0aW9uKGEsYil7Yj1ifHxhLm93bmVyRG9jdW1lbnQuYmFzZVVSSSx0aGlzLnJlc29sdmVBdHRyaWJ1dGVzKGEsYiksdGhpcy5yZXNvbHZlU3R5bGVzKGEsYik7dmFyIGM9YS5xdWVyeVNlbGVjdG9yQWxsKCJ0ZW1wbGF0ZSIpO2lmKGMpZm9yKHZhciBkLGU9MCxmPWMubGVuZ3RoO2Y+ZSYmKGQ9Y1tlXSk7ZSsrKWQuY29udGVudCYmdGhpcy5yZXNvbHZlRG9tKGQuY29udGVudCxiKX0scmVzb2x2ZVRlbXBsYXRlOmZ1bmN0aW9uKGEpe3RoaXMucmVzb2x2ZURvbShhLmNvbnRlbnQsYS5vd25lckRvY3VtZW50LmJhc2VVUkkpfSxyZXNvbHZlU3R5bGVzOmZ1bmN0aW9uKGEsYil7dmFyIGM9YS5xdWVyeVNlbGVjdG9yQWxsKCJzdHlsZSIpO2lmKGMpZm9yKHZhciBkLGU9MCxmPWMubGVuZ3RoO2Y+ZSYmKGQ9Y1tlXSk7ZSsrKXRoaXMucmVzb2x2ZVN0eWxlKGQsYil9LHJlc29sdmVTdHlsZTpmdW5jdGlvbihhLGIpe2I9Ynx8YS5vd25lckRvY3VtZW50LmJhc2VVUkksYS50ZXh0Q29udGVudD10aGlzLnJlc29sdmVDc3NUZXh0KGEudGV4dENvbnRlbnQsYil9LHJlc29sdmVDc3NUZXh0OmZ1bmN0aW9uKGEsYyxkKXtyZXR1cm4gYT1iKGEsYyxkLGcpLGIoYSxjLGQsaCl9LHJlc29sdmVBdHRyaWJ1dGVzOmZ1bmN0aW9uKGEsYil7YS5oYXNBdHRyaWJ1dGVzJiZhLmhhc0F0dHJpYnV0ZXMoKSYmdGhpcy5yZXNvbHZlRWxlbWVudEF0dHJpYnV0ZXMoYSxiKTt2YXIgYz1hJiZhLnF1ZXJ5U2VsZWN0b3JBbGwoaik7aWYoYylmb3IodmFyIGQsZT0wLGY9Yy5sZW5ndGg7Zj5lJiYoZD1jW2VdKTtlKyspdGhpcy5yZXNvbHZlRWxlbWVudEF0dHJpYnV0ZXMoZCxiKX0scmVzb2x2ZUVsZW1lbnRBdHRyaWJ1dGVzOmZ1bmN0aW9uKGEsZCl7ZD1kfHxhLm93bmVyRG9jdW1lbnQuYmFzZVVSSSxpLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIGYsaD1hLmF0dHJpYnV0ZXNbZV0saT1oJiZoLnZhbHVlO2kmJmkuc2VhcmNoKGspPDAmJihmPSJzdHlsZSI9PT1lP2IoaSxkLCExLGcpOmMoZCxpKSxoLnZhbHVlPWYpfSl9fSxnPS8odXJsXCgpKFteKV0qKShcKSkvZyxoPS8oQGltcG9ydFtcc10rKD8hdXJsXCgpKShbXjtdKikoOykvZyxpPVsiaHJlZiIsInNyYyIsImFjdGlvbiIsInN0eWxlIiwidXJsIl0saj0iWyIraS5qb2luKCJdLFsiKSsiXSIsaz0ie3suKn19IjthLnVybFJlc29sdmVyPWZ9KFBvbHltZXIpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7dGhpcy5jYWNoZT1PYmplY3QuY3JlYXRlKG51bGwpLHRoaXMubWFwPU9iamVjdC5jcmVhdGUobnVsbCksdGhpcy5yZXF1ZXN0cz0wLHRoaXMucmVnZXg9YX12YXIgYz1QbGF0Zm9ybS5lbmRPZk1pY3JvdGFzaztiLnByb3RvdHlwZT17ZXh0cmFjdFVybHM6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGMsZCxlPVtdO2M9dGhpcy5yZWdleC5leGVjKGEpOylkPW5ldyBVUkwoY1sxXSxiKSxlLnB1c2goe21hdGNoZWQ6Y1swXSx1cmw6ZC5ocmVmfSk7cmV0dXJuIGV9LHByb2Nlc3M6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXRoaXMuZXh0cmFjdFVybHMoYSxiKSxlPWMuYmluZChudWxsLHRoaXMubWFwKTt0aGlzLmZldGNoKGQsZSl9LGZldGNoOmZ1bmN0aW9uKGEsYil7dmFyIGM9YS5sZW5ndGg7aWYoIWMpcmV0dXJuIGIoKTtmb3IodmFyIGQsZSxmLGc9ZnVuY3Rpb24oKXswPT09LS1jJiZiKCl9LGg9MDtjPmg7aCsrKWQ9YVtoXSxmPWQudXJsLGU9dGhpcy5jYWNoZVtmXSxlfHwoZT10aGlzLnhocihmKSxlLm1hdGNoPWQsdGhpcy5jYWNoZVtmXT1lKSxlLndhaXQoZyl9LGhhbmRsZVhocjpmdW5jdGlvbihhKXt2YXIgYj1hLm1hdGNoLGM9Yi51cmwsZD1hLnJlc3BvbnNlfHxhLnJlc3BvbnNlVGV4dHx8IiI7dGhpcy5tYXBbY109ZCx0aGlzLmZldGNoKHRoaXMuZXh0cmFjdFVybHMoZCxjKSxhLnJlc29sdmUpfSx4aHI6ZnVuY3Rpb24oYSl7dGhpcy5yZXF1ZXN0cysrO3ZhciBiPW5ldyBYTUxIdHRwUmVxdWVzdDtyZXR1cm4gYi5vcGVuKCJHRVQiLGEsITApLGIuc2VuZCgpLGIub25lcnJvcj1iLm9ubG9hZD10aGlzLmhhbmRsZVhoci5iaW5kKHRoaXMsYiksYi5wZW5kaW5nPVtdLGIucmVzb2x2ZT1mdW5jdGlvbigpe2Zvcih2YXIgYT1iLnBlbmRpbmcsYz0wO2M8YS5sZW5ndGg7YysrKWFbY10oKTtiLnBlbmRpbmc9bnVsbH0sYi53YWl0PWZ1bmN0aW9uKGEpe2IucGVuZGluZz9iLnBlbmRpbmcucHVzaChhKTpjKGEpfSxifX0sYS5Mb2FkZXI9Yn0oUG9seW1lciksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYigpe3RoaXMubG9hZGVyPW5ldyBkKHRoaXMucmVnZXgpfXZhciBjPWEudXJsUmVzb2x2ZXIsZD1hLkxvYWRlcjtiLnByb3RvdHlwZT17cmVnZXg6L0BpbXBvcnRccysoPzp1cmwpP1siJ1woXSooW14nIlwpXSopWyciXCldKjsvZyxyZXNvbHZlOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD1mdW5jdGlvbihkKXtjKHRoaXMuZmxhdHRlbihhLGIsZCkpfS5iaW5kKHRoaXMpO3RoaXMubG9hZGVyLnByb2Nlc3MoYSxiLGQpfSxyZXNvbHZlTm9kZTpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9YS50ZXh0Q29udGVudCxlPWZ1bmN0aW9uKGIpe2EudGV4dENvbnRlbnQ9YixjKGEpfTt0aGlzLnJlc29sdmUoZCxiLGUpfSxmbGF0dGVuOmZ1bmN0aW9uKGEsYixkKXtmb3IodmFyIGUsZixnLGg9dGhpcy5sb2FkZXIuZXh0cmFjdFVybHMoYSxiKSxpPTA7aTxoLmxlbmd0aDtpKyspZT1oW2ldLGY9ZS51cmwsZz1jLnJlc29sdmVDc3NUZXh0KGRbZl0sZiwhMCksZz10aGlzLmZsYXR0ZW4oZyxiLGQpLGE9YS5yZXBsYWNlKGUubWF0Y2hlZCxnKTtyZXR1cm4gYX0sbG9hZFN0eWxlczpmdW5jdGlvbihhLGIsYyl7ZnVuY3Rpb24gZCgpe2YrKyxmPT09ZyYmYyYmYygpfWZvcih2YXIgZSxmPTAsZz1hLmxlbmd0aCxoPTA7Zz5oJiYoZT1hW2hdKTtoKyspdGhpcy5yZXNvbHZlTm9kZShlLGIsZCl9fTt2YXIgZT1uZXcgYjthLnN0eWxlUmVzb2x2ZXI9ZX0oUG9seW1lciksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhLGIpe3JldHVybiBhJiZiJiZPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhiKS5mb3JFYWNoKGZ1bmN0aW9uKGMpe3ZhciBkPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoYixjKTtkJiYoT2JqZWN0LmRlZmluZVByb3BlcnR5KGEsYyxkKSwiZnVuY3Rpb24iPT10eXBlb2YgZC52YWx1ZSYmKGQudmFsdWUubm9tPWMpKX0pLGF9ZnVuY3Rpb24gYyhhKXtmb3IodmFyIGI9YXx8e30sYz0xO2M8YXJndW1lbnRzLmxlbmd0aDtjKyspe3ZhciBlPWFyZ3VtZW50c1tjXTt0cnl7Zm9yKHZhciBmIGluIGUpZChmLGUsYil9Y2F0Y2goZyl7fX1yZXR1cm4gYn1mdW5jdGlvbiBkKGEsYixjKXt2YXIgZD1lKGIsYSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGMsYSxkKX1mdW5jdGlvbiBlKGEsYil7aWYoYSl7dmFyIGM9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihhLGIpO3JldHVybiBjfHxlKE9iamVjdC5nZXRQcm90b3R5cGVPZihhKSxiKX19YS5leHRlbmQ9YixhLm1peGluPWMsUGxhdGZvcm0ubWl4aW49Y30oUG9seW1lciksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhLGIsZCl7cmV0dXJuIGE/YS5zdG9wKCk6YT1uZXcgYyh0aGlzKSxhLmdvKGIsZCksYX12YXIgYz1mdW5jdGlvbihhKXt0aGlzLmNvbnRleHQ9YSx0aGlzLmJvdW5kQ29tcGxldGU9dGhpcy5jb21wbGV0ZS5iaW5kKHRoaXMpfTtjLnByb3RvdHlwZT17Z286ZnVuY3Rpb24oYSxiKXt0aGlzLmNhbGxiYWNrPWE7dmFyIGM7Yj8oYz1zZXRUaW1lb3V0KHRoaXMuYm91bmRDb21wbGV0ZSxiKSx0aGlzLmhhbmRsZT1mdW5jdGlvbigpe2NsZWFyVGltZW91dChjKX0pOihjPXJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLmJvdW5kQ29tcGxldGUpLHRoaXMuaGFuZGxlPWZ1bmN0aW9uKCl7Y2FuY2VsQW5pbWF0aW9uRnJhbWUoYyl9KX0sc3RvcDpmdW5jdGlvbigpe3RoaXMuaGFuZGxlJiYodGhpcy5oYW5kbGUoKSx0aGlzLmhhbmRsZT1udWxsKX0sY29tcGxldGU6ZnVuY3Rpb24oKXt0aGlzLmhhbmRsZSYmKHRoaXMuc3RvcCgpLHRoaXMuY2FsbGJhY2suY2FsbCh0aGlzLmNvbnRleHQpKX19LGEuam9iPWJ9KFBvbHltZXIpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSxiLGMpe3ZhciBkPSJzdHJpbmciPT10eXBlb2YgYT9kb2N1bWVudC5jcmVhdGVFbGVtZW50KGEpOmEuY2xvbmVOb2RlKCEwKTtpZihkLmlubmVySFRNTD1iLGMpZm9yKHZhciBlIGluIGMpZC5zZXRBdHRyaWJ1dGUoZSxjW2VdKTtyZXR1cm4gZH12YXIgYz17fTtIVE1MRWxlbWVudC5yZWdpc3Rlcj1mdW5jdGlvbihhLGIpe2NbYV09Yn0sSFRNTEVsZW1lbnQuZ2V0UHJvdG90eXBlRm9yVGFnPWZ1bmN0aW9uKGEpe3ZhciBiPWE/Y1thXTpIVE1MRWxlbWVudC5wcm90b3R5cGU7cmV0dXJuIGJ8fE9iamVjdC5nZXRQcm90b3R5cGVPZihkb2N1bWVudC5jcmVhdGVFbGVtZW50KGEpKX07dmFyIGQ9RXZlbnQucHJvdG90eXBlLnN0b3BQcm9wYWdhdGlvbjtFdmVudC5wcm90b3R5cGUuc3RvcFByb3BhZ2F0aW9uPWZ1bmN0aW9uKCl7dGhpcy5jYW5jZWxCdWJibGU9ITAsZC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9O3ZhciBlPURPTVRva2VuTGlzdC5wcm90b3R5cGUuYWRkLGY9RE9NVG9rZW5MaXN0LnByb3RvdHlwZS5yZW1vdmU7RE9NVG9rZW5MaXN0LnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24oKXtmb3IodmFyIGE9MDthPGFyZ3VtZW50cy5sZW5ndGg7YSsrKWUuY2FsbCh0aGlzLGFyZ3VtZW50c1thXSl9LERPTVRva2VuTGlzdC5wcm90b3R5cGUucmVtb3ZlPWZ1bmN0aW9uKCl7Zm9yKHZhciBhPTA7YTxhcmd1bWVudHMubGVuZ3RoO2ErKylmLmNhbGwodGhpcyxhcmd1bWVudHNbYV0pfSxET01Ub2tlbkxpc3QucHJvdG90eXBlLnRvZ2dsZT1mdW5jdGlvbihhLGIpezE9PWFyZ3VtZW50cy5sZW5ndGgmJihiPSF0aGlzLmNvbnRhaW5zKGEpKSxiP3RoaXMuYWRkKGEpOnRoaXMucmVtb3ZlKGEpfSxET01Ub2tlbkxpc3QucHJvdG90eXBlLnN3aXRjaD1mdW5jdGlvbihhLGIpe2EmJnRoaXMucmVtb3ZlKGEpLGImJnRoaXMuYWRkKGIpfTt2YXIgZz1mdW5jdGlvbigpe3JldHVybiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh0aGlzKX0saD13aW5kb3cuTmFtZWROb2RlTWFwfHx3aW5kb3cuTW96TmFtZWRBdHRyTWFwfHx7fTtOb2RlTGlzdC5wcm90b3R5cGUuYXJyYXk9ZyxoLnByb3RvdHlwZS5hcnJheT1nLEhUTUxDb2xsZWN0aW9uLnByb3RvdHlwZS5hcnJheT1nLGEuY3JlYXRlRE9NPWJ9KFBvbHltZXIpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7dmFyIGU9Yi5jYWxsZXIsZz1lLm5vbSxoPWUuX3N1cGVyO2h8fChnfHwoZz1lLm5vbT1jLmNhbGwodGhpcyxlKSksZ3x8Y29uc29sZS53YXJuKCJjYWxsZWQgc3VwZXIoKSBvbiBhIG1ldGhvZCBub3QgaW5zdGFsbGVkIGRlY2xhcmF0aXZlbHkgKGhhcyBubyAubm9tIHByb3BlcnR5KSIpLGg9ZChlLGcsZih0aGlzKSkpO3ZhciBpPWhbZ107cmV0dXJuIGk/KGkuX3N1cGVyfHxkKGksZyxoKSxpLmFwcGx5KHRoaXMsYXx8W10pKTp2b2lkIDB9ZnVuY3Rpb24gYyhhKXtmb3IodmFyIGI9dGhpcy5fX3Byb3RvX187YiYmYiE9PUhUTUxFbGVtZW50LnByb3RvdHlwZTspe2Zvcih2YXIgYyxkPU9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGIpLGU9MCxmPWQubGVuZ3RoO2Y+ZSYmKGM9ZFtlXSk7ZSsrKXt2YXIgZz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGIsYyk7aWYoImZ1bmN0aW9uIj09dHlwZW9mIGcudmFsdWUmJmcudmFsdWU9PT1hKXJldHVybiBjfWI9Yi5fX3Byb3RvX199fWZ1bmN0aW9uIGQoYSxiLGMpe3ZhciBkPWUoYyxiLGEpO3JldHVybiBkW2JdJiYoZFtiXS5ub209YiksYS5fc3VwZXI9ZH1mdW5jdGlvbiBlKGEsYixjKXtmb3IoO2E7KXtpZihhW2JdIT09YyYmYVtiXSlyZXR1cm4gYTthPWYoYSl9cmV0dXJuIE9iamVjdH1mdW5jdGlvbiBmKGEpe3JldHVybiBhLl9fcHJvdG9fX31hLnN1cGVyPWJ9KFBvbHltZXIpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7cmV0dXJuIGF9ZnVuY3Rpb24gYyhhLGIpe3ZhciBjPXR5cGVvZiBiO3JldHVybiBiIGluc3RhbmNlb2YgRGF0ZSYmKGM9ImRhdGUiKSxkW2NdKGEsYil9dmFyIGQ9e3N0cmluZzpiLHVuZGVmaW5lZDpiLGRhdGU6ZnVuY3Rpb24oYSl7cmV0dXJuIG5ldyBEYXRlKERhdGUucGFyc2UoYSl8fERhdGUubm93KCkpfSwiYm9vbGVhbiI6ZnVuY3Rpb24oYSl7cmV0dXJuIiI9PT1hPyEwOiJmYWxzZSI9PT1hPyExOiEhYX0sbnVtYmVyOmZ1bmN0aW9uKGEpe3ZhciBiPXBhcnNlRmxvYXQoYSk7cmV0dXJuIDA9PT1iJiYoYj1wYXJzZUludChhKSksaXNOYU4oYik/YTpifSxvYmplY3Q6ZnVuY3Rpb24oYSxiKXtpZihudWxsPT09YilyZXR1cm4gYTt0cnl7cmV0dXJuIEpTT04ucGFyc2UoYS5yZXBsYWNlKC8nL2csJyInKSl9Y2F0Y2goYyl7cmV0dXJuIGF9fSwiZnVuY3Rpb24iOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGJ9fTthLmRlc2VyaWFsaXplVmFsdWU9Y30oUG9seW1lciksZnVuY3Rpb24oYSl7dmFyIGI9YS5leHRlbmQsYz17fTtjLmRlY2xhcmF0aW9uPXt9LGMuaW5zdGFuY2U9e30sYy5wdWJsaXNoPWZ1bmN0aW9uKGEsYyl7Zm9yKHZhciBkIGluIGEpYihjLGFbZF0pfSxhLmFwaT1jfShQb2x5bWVyKSxmdW5jdGlvbihhKXt2YXIgYj17YXN5bmM6ZnVuY3Rpb24oYSxiLGMpe1BsYXRmb3JtLmZsdXNoKCksYj1iJiZiLmxlbmd0aD9iOltiXTt2YXIgZD1mdW5jdGlvbigpeyh0aGlzW2FdfHxhKS5hcHBseSh0aGlzLGIpfS5iaW5kKHRoaXMpLGU9Yz9zZXRUaW1lb3V0KGQsYyk6cmVxdWVzdEFuaW1hdGlvbkZyYW1lKGQpO3JldHVybiBjP2U6fmV9LGNhbmNlbEFzeW5jOmZ1bmN0aW9uKGEpezA+YT9jYW5jZWxBbmltYXRpb25GcmFtZSh+YSk6Y2xlYXJUaW1lb3V0KGEpfSxmaXJlOmZ1bmN0aW9uKGEsYixjLGQsZSl7dmFyIGY9Y3x8dGhpcyxiPW51bGw9PT1ifHx2b2lkIDA9PT1iP3t9OmIsZz1uZXcgQ3VzdG9tRXZlbnQoYSx7YnViYmxlczp2b2lkIDAhPT1kP2Q6ITAsY2FuY2VsYWJsZTp2b2lkIDAhPT1lP2U6ITAsZGV0YWlsOmJ9KTtyZXR1cm4gZi5kaXNwYXRjaEV2ZW50KGcpLGd9LGFzeW5jRmlyZTpmdW5jdGlvbigpe3RoaXMuYXN5bmMoImZpcmUiLGFyZ3VtZW50cyl9LGNsYXNzRm9sbG93czpmdW5jdGlvbihhLGIsYyl7YiYmYi5jbGFzc0xpc3QucmVtb3ZlKGMpLGEmJmEuY2xhc3NMaXN0LmFkZChjKX0saW5qZWN0Qm91bmRIVE1MOmZ1bmN0aW9uKGEsYil7dmFyIGM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidGVtcGxhdGUiKTtjLmlubmVySFRNTD1hO3ZhciBkPXRoaXMuaW5zdGFuY2VUZW1wbGF0ZShjKTtyZXR1cm4gYiYmKGIudGV4dENvbnRlbnQ9IiIsYi5hcHBlbmRDaGlsZChkKSksZH19LGM9ZnVuY3Rpb24oKXt9LGQ9e307Yi5hc3luY01ldGhvZD1iLmFzeW5jLGEuYXBpLmluc3RhbmNlLnV0aWxzPWIsYS5ub3A9YyxhLm5vYj1kfShQb2x5bWVyKSxmdW5jdGlvbihhKXt2YXIgYj13aW5kb3cubG9nRmxhZ3N8fHt9LGM9Im9uLSIsZD17RVZFTlRfUFJFRklYOmMsYWRkSG9zdExpc3RlbmVyczpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZXZlbnREZWxlZ2F0ZXM7Yi5ldmVudHMmJk9iamVjdC5rZXlzKGEpLmxlbmd0aD4wJiZjb25zb2xlLmxvZygiWyVzXSBhZGRIb3N0TGlzdGVuZXJzOiIsdGhpcy5sb2NhbE5hbWUsYSk7Zm9yKHZhciBjIGluIGEpe3ZhciBkPWFbY107UG9seW1lckdlc3R1cmVzLmFkZEV2ZW50TGlzdGVuZXIodGhpcyxjLHRoaXMuZWxlbWVudC5nZXRFdmVudEhhbmRsZXIodGhpcyx0aGlzLGQpKX19LGRpc3BhdGNoTWV0aG9kOmZ1bmN0aW9uKGEsYyxkKXtpZihhKXtiLmV2ZW50cyYmY29uc29sZS5ncm91cCgiWyVzXSBkaXNwYXRjaCBbJXNdIixhLmxvY2FsTmFtZSxjKTt2YXIgZT0iZnVuY3Rpb24iPT10eXBlb2YgYz9jOmFbY107ZSYmZVtkPyJhcHBseSI6ImNhbGwiXShhLGQpLGIuZXZlbnRzJiZjb25zb2xlLmdyb3VwRW5kKCksUGxhdGZvcm0uZmx1c2goKX19fTthLmFwaS5pbnN0YW5jZS5ldmVudHM9ZCxhLmFkZEV2ZW50TGlzdGVuZXI9ZnVuY3Rpb24oYSxiLGMsZCl7UG9seW1lckdlc3R1cmVzLmFkZEV2ZW50TGlzdGVuZXIod3JhcChhKSxiLGMsZCl9LGEucmVtb3ZlRXZlbnRMaXN0ZW5lcj1mdW5jdGlvbihhLGIsYyxkKXtQb2x5bWVyR2VzdHVyZXMucmVtb3ZlRXZlbnRMaXN0ZW5lcih3cmFwKGEpLGIsYyxkKX19KFBvbHltZXIpLGZ1bmN0aW9uKGEpe3ZhciBiPXtjb3B5SW5zdGFuY2VBdHRyaWJ1dGVzOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5faW5zdGFuY2VBdHRyaWJ1dGVzO2Zvcih2YXIgYiBpbiBhKXRoaXMuaGFzQXR0cmlidXRlKGIpfHx0aGlzLnNldEF0dHJpYnV0ZShiLGFbYl0pfSx0YWtlQXR0cmlidXRlczpmdW5jdGlvbigpe2lmKHRoaXMuX3B1Ymxpc2hMQylmb3IodmFyIGEsYj0wLGM9dGhpcy5hdHRyaWJ1dGVzLGQ9Yy5sZW5ndGg7KGE9Y1tiXSkmJmQ+YjtiKyspdGhpcy5hdHRyaWJ1dGVUb1Byb3BlcnR5KGEubmFtZSxhLnZhbHVlKX0sYXR0cmlidXRlVG9Qcm9wZXJ0eTpmdW5jdGlvbihiLGMpe3ZhciBiPXRoaXMucHJvcGVydHlGb3JBdHRyaWJ1dGUoYik7aWYoYil7aWYoYyYmYy5zZWFyY2goYS5iaW5kUGF0dGVybik+PTApcmV0dXJuO3ZhciBkPXRoaXNbYl0sYz10aGlzLmRlc2VyaWFsaXplVmFsdWUoYyxkKTtjIT09ZCYmKHRoaXNbYl09Yyl9fSxwcm9wZXJ0eUZvckF0dHJpYnV0ZTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLl9wdWJsaXNoTEMmJnRoaXMuX3B1Ymxpc2hMQ1thXTtyZXR1cm4gYn0sZGVzZXJpYWxpemVWYWx1ZTpmdW5jdGlvbihiLGMpe3JldHVybiBhLmRlc2VyaWFsaXplVmFsdWUoYixjKX0sc2VyaWFsaXplVmFsdWU6ZnVuY3Rpb24oYSxiKXtyZXR1cm4iYm9vbGVhbiI9PT1iP2E/IiI6dm9pZCAwOiJvYmplY3QiIT09YiYmImZ1bmN0aW9uIiE9PWImJnZvaWQgMCE9PWE/YTp2b2lkIDB9LHJlZmxlY3RQcm9wZXJ0eVRvQXR0cmlidXRlOmZ1bmN0aW9uKGEpe3ZhciBiPXR5cGVvZiB0aGlzW2FdLGM9dGhpcy5zZXJpYWxpemVWYWx1ZSh0aGlzW2FdLGIpO3ZvaWQgMCE9PWM/dGhpcy5zZXRBdHRyaWJ1dGUoYSxjKToiYm9vbGVhbiI9PT1iJiZ0aGlzLnJlbW92ZUF0dHJpYnV0ZShhKX19O2EuYXBpLmluc3RhbmNlLmF0dHJpYnV0ZXM9Yn0oUG9seW1lciksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhLGIpe3JldHVybiBhPT09Yj8wIT09YXx8MS9hPT09MS9iOmYoYSkmJmYoYik/ITA6YSE9PWEmJmIhPT1ifWZ1bmN0aW9uIGMoYSxiKXtyZXR1cm4gdm9pZCAwPT09YiYmbnVsbD09PWE/YjpudWxsPT09Ynx8dm9pZCAwPT09Yj9hOmJ9dmFyIGQ9d2luZG93LmxvZ0ZsYWdzfHx7fSxlPXtvYmplY3Q6dm9pZCAwLHR5cGU6InVwZGF0ZSIsbmFtZTp2b2lkIDAsb2xkVmFsdWU6dm9pZCAwfSxmPU51bWJlci5pc05hTnx8ZnVuY3Rpb24oYSl7cmV0dXJuIm51bWJlciI9PXR5cGVvZiBhJiZpc05hTihhKX0sZz17Y3JlYXRlUHJvcGVydHlPYnNlcnZlcjpmdW5jdGlvbigpe3ZhciBhPXRoaXMuX29ic2VydmVOYW1lcztpZihhJiZhLmxlbmd0aCl7dmFyIGI9dGhpcy5fcHJvcGVydHlPYnNlcnZlcj1uZXcgQ29tcG91bmRPYnNlcnZlcighMCk7dGhpcy5yZWdpc3Rlck9ic2VydmVyKGIpO2Zvcih2YXIgYyxkPTAsZT1hLmxlbmd0aDtlPmQmJihjPWFbZF0pO2QrKyliLmFkZFBhdGgodGhpcyxjKSx0aGlzLm9ic2VydmVBcnJheVZhbHVlKGMsdGhpc1tjXSxudWxsKX19LG9wZW5Qcm9wZXJ0eU9ic2VydmVyOmZ1bmN0aW9uKCl7dGhpcy5fcHJvcGVydHlPYnNlcnZlciYmdGhpcy5fcHJvcGVydHlPYnNlcnZlci5vcGVuKHRoaXMubm90aWZ5UHJvcGVydHlDaGFuZ2VzLHRoaXMpfSxub3RpZnlQcm9wZXJ0eUNoYW5nZXM6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGUsZj17fTtmb3IodmFyIGcgaW4gYilpZihkPWNbMipnKzFdLGU9dGhpcy5vYnNlcnZlW2RdKXt2YXIgaD1iW2ddLGk9YVtnXTt0aGlzLm9ic2VydmVBcnJheVZhbHVlKGQsaSxoKSxmW2VdfHwodm9pZCAwIT09aCYmbnVsbCE9PWh8fHZvaWQgMCE9PWkmJm51bGwhPT1pKSYmKGZbZV09ITAsdGhpcy5pbnZva2VNZXRob2QoZSxbaCxpLGFyZ3VtZW50c10pKX19LGRlbGl2ZXJDaGFuZ2VzOmZ1bmN0aW9uKCl7dGhpcy5fcHJvcGVydHlPYnNlcnZlciYmdGhpcy5fcHJvcGVydHlPYnNlcnZlci5kZWxpdmVyKCl9LHByb3BlcnR5Q2hhbmdlZF86ZnVuY3Rpb24oYSl7dGhpcy5yZWZsZWN0W2FdJiZ0aGlzLnJlZmxlY3RQcm9wZXJ0eVRvQXR0cmlidXRlKGEpfSxvYnNlcnZlQXJyYXlWYWx1ZTpmdW5jdGlvbihhLGIsYyl7dmFyIGU9dGhpcy5vYnNlcnZlW2FdO2lmKGUmJihBcnJheS5pc0FycmF5KGMpJiYoZC5vYnNlcnZlJiZjb25zb2xlLmxvZygiWyVzXSBvYnNlcnZlQXJyYXlWYWx1ZTogdW5yZWdpc3RlciBvYnNlcnZlciBbJXNdIix0aGlzLmxvY2FsTmFtZSxhKSx0aGlzLmNsb3NlTmFtZWRPYnNlcnZlcihhKyJfX2FycmF5IikpLEFycmF5LmlzQXJyYXkoYikpKXtkLm9ic2VydmUmJmNvbnNvbGUubG9nKCJbJXNdIG9ic2VydmVBcnJheVZhbHVlOiByZWdpc3RlciBvYnNlcnZlciBbJXNdIix0aGlzLmxvY2FsTmFtZSxhLGIpO3ZhciBmPW5ldyBBcnJheU9ic2VydmVyKGIpO2Yub3BlbihmdW5jdGlvbihhKXt0aGlzLmludm9rZU1ldGhvZChlLFthXSl9LHRoaXMpLHRoaXMucmVnaXN0ZXJOYW1lZE9ic2VydmVyKGErIl9fYXJyYXkiLGYpfX0sZW1pdFByb3BlcnR5Q2hhbmdlUmVjb3JkOmZ1bmN0aW9uKGEsYyxkKXtpZighYihjLGQpJiYodGhpcy5wcm9wZXJ0eUNoYW5nZWRfKGEsYyxkKSxPYnNlcnZlci5oYXNPYmplY3RPYnNlcnZlKSl7dmFyIGY9dGhpcy5ub3RpZmllcl87Znx8KGY9dGhpcy5ub3RpZmllcl89T2JqZWN0LmdldE5vdGlmaWVyKHRoaXMpKSxlLm9iamVjdD10aGlzLGUubmFtZT1hLGUub2xkVmFsdWU9ZCxmLm5vdGlmeShlKX19LGJpbmRUb0FjY2Vzc29yOmZ1bmN0aW9uKGEsYyxkKXtmdW5jdGlvbiBlKGIsYyl7altmXT1iO3ZhciBkPWpbaF07ZCYmImZ1bmN0aW9uIj09dHlwZW9mIGQuc2V0VmFsdWUmJmQuc2V0VmFsdWUoYiksai5lbWl0UHJvcGVydHlDaGFuZ2VSZWNvcmQoYSxiLGMpfXZhciBmPWErIl8iLGc9YSsiT2JzZXJ2YWJsZV8iLGg9YSsiQ29tcHV0ZWRCb3VuZE9ic2VydmFibGVfIjt0aGlzW2ddPWM7dmFyIGk9dGhpc1tmXSxqPXRoaXMsaz1jLm9wZW4oZSk7aWYoZCYmIWIoaSxrKSl7dmFyIGw9ZChpLGspO2IoayxsKXx8KGs9bCxjLnNldFZhbHVlJiZjLnNldFZhbHVlKGspKX1lKGssaSk7dmFyIG09e2Nsb3NlOmZ1bmN0aW9uKCl7Yy5jbG9zZSgpLGpbZ109dm9pZCAwLGpbaF09dm9pZCAwfX07cmV0dXJuIHRoaXMucmVnaXN0ZXJPYnNlcnZlcihtKSxtfSxjcmVhdGVDb21wdXRlZFByb3BlcnRpZXM6ZnVuY3Rpb24oKXtpZih0aGlzLl9jb21wdXRlZE5hbWVzKWZvcih2YXIgYT0wO2E8dGhpcy5fY29tcHV0ZWROYW1lcy5sZW5ndGg7YSsrKXt2YXIgYj10aGlzLl9jb21wdXRlZE5hbWVzW2FdLGM9dGhpcy5jb21wdXRlZFtiXTt0cnl7dmFyIGQ9UG9seW1lckV4cHJlc3Npb25zLmdldEV4cHJlc3Npb24oYyksZT1kLmdldEJpbmRpbmcodGhpcyx0aGlzLmVsZW1lbnQuc3ludGF4KTt0aGlzLmJpbmRUb0FjY2Vzc29yKGIsZSl9Y2F0Y2goZil7Y29uc29sZS5lcnJvcigiRmFpbGVkIHRvIGNyZWF0ZSBjb21wdXRlZCBwcm9wZXJ0eSIsZil9fX0sYmluZFByb3BlcnR5OmZ1bmN0aW9uKGEsYixkKXtpZihkKXJldHVybiB2b2lkKHRoaXNbYV09Yik7dmFyIGU9dGhpcy5lbGVtZW50LnByb3RvdHlwZS5jb21wdXRlZDtpZihlJiZlW2FdKXt2YXIgZj1hKyJDb21wdXRlZEJvdW5kT2JzZXJ2YWJsZV8iO3JldHVybiB2b2lkKHRoaXNbZl09Yil9cmV0dXJuIHRoaXMuYmluZFRvQWNjZXNzb3IoYSxiLGMpfSxpbnZva2VNZXRob2Q6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzW2FdfHxhOyJmdW5jdGlvbiI9PXR5cGVvZiBjJiZjLmFwcGx5KHRoaXMsYil9LHJlZ2lzdGVyT2JzZXJ2ZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuX29ic2VydmVycz92b2lkIHRoaXMuX29ic2VydmVycy5wdXNoKGEpOnZvaWQodGhpcy5fb2JzZXJ2ZXJzPVthXSl9LGNsb3NlT2JzZXJ2ZXJzOmZ1bmN0aW9uKCl7aWYodGhpcy5fb2JzZXJ2ZXJzKXtmb3IodmFyIGE9dGhpcy5fb2JzZXJ2ZXJzLGI9MDtiPGEubGVuZ3RoO2IrKyl7dmFyIGM9YVtiXTtjJiYiZnVuY3Rpb24iPT10eXBlb2YgYy5jbG9zZSYmYy5jbG9zZSgpfXRoaXMuX29ic2VydmVycz1bXX19LHJlZ2lzdGVyTmFtZWRPYnNlcnZlcjpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuX25hbWVkT2JzZXJ2ZXJzfHwodGhpcy5fbmFtZWRPYnNlcnZlcnM9e30pO2NbYV09Yn0sY2xvc2VOYW1lZE9ic2VydmVyOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuX25hbWVkT2JzZXJ2ZXJzO3JldHVybiBiJiZiW2FdPyhiW2FdLmNsb3NlKCksYlthXT1udWxsLCEwKTp2b2lkIDB9LGNsb3NlTmFtZWRPYnNlcnZlcnM6ZnVuY3Rpb24oKXtpZih0aGlzLl9uYW1lZE9ic2VydmVycyl7Zm9yKHZhciBhIGluIHRoaXMuX25hbWVkT2JzZXJ2ZXJzKXRoaXMuY2xvc2VOYW1lZE9ic2VydmVyKGEpO3RoaXMuX25hbWVkT2JzZXJ2ZXJzPXt9fX19O2EuYXBpLmluc3RhbmNlLnByb3BlcnRpZXM9Z30oUG9seW1lciksZnVuY3Rpb24oYSl7dmFyIGI9d2luZG93LmxvZ0ZsYWdzfHwwLGM9e2luc3RhbmNlVGVtcGxhdGU6ZnVuY3Rpb24oYSl7SFRNTFRlbXBsYXRlRWxlbWVudC5kZWNvcmF0ZShhKTtmb3IodmFyIGI9dGhpcy5zeW50YXh8fCFhLmJpbmRpbmdEZWxlZ2F0ZSYmdGhpcy5lbGVtZW50LnN5bnRheCxjPWEuY3JlYXRlSW5zdGFuY2UodGhpcyxiKSxkPWMuYmluZGluZ3NfLGU9MDtlPGQubGVuZ3RoO2UrKyl0aGlzLnJlZ2lzdGVyT2JzZXJ2ZXIoZFtlXSk7cmV0dXJuIGN9LGJpbmQ6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXRoaXMucHJvcGVydHlGb3JBdHRyaWJ1dGUoYSk7aWYoZCl7dmFyIGU9dGhpcy5iaW5kUHJvcGVydHkoZCxiLGMpO3JldHVybiBQbGF0Zm9ybS5lbmFibGVCaW5kaW5nc1JlZmxlY3Rpb24mJmUmJihlLnBhdGg9Yi5wYXRoXyx0aGlzLl9yZWNvcmRCaW5kaW5nKGQsZSkpLHRoaXMucmVmbGVjdFtkXSYmdGhpcy5yZWZsZWN0UHJvcGVydHlUb0F0dHJpYnV0ZShkKSxlfXJldHVybiB0aGlzLm1peGluU3VwZXIoYXJndW1lbnRzKX0sYmluZEZpbmlzaGVkOmZ1bmN0aW9uKCl7dGhpcy5tYWtlRWxlbWVudFJlYWR5KCl9LF9yZWNvcmRCaW5kaW5nOmZ1bmN0aW9uKGEsYil7dGhpcy5iaW5kaW5nc189dGhpcy5iaW5kaW5nc198fHt9LHRoaXMuYmluZGluZ3NfW2FdPWJ9LGFzeW5jVW5iaW5kQWxsOmZ1bmN0aW9uKCl7dGhpcy5fdW5ib3VuZHx8KGIudW5iaW5kJiZjb25zb2xlLmxvZygiWyVzXSBhc3luY1VuYmluZEFsbCIsdGhpcy5sb2NhbE5hbWUpLHRoaXMuX3VuYmluZEFsbEpvYj10aGlzLmpvYih0aGlzLl91bmJpbmRBbGxKb2IsdGhpcy51bmJpbmRBbGwsMCkpfSx1bmJpbmRBbGw6ZnVuY3Rpb24oKXt0aGlzLl91bmJvdW5kfHwodGhpcy5jbG9zZU9ic2VydmVycygpLHRoaXMuY2xvc2VOYW1lZE9ic2VydmVycygpLHRoaXMuX3VuYm91bmQ9ITApfSxjYW5jZWxVbmJpbmRBbGw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdW5ib3VuZD92b2lkKGIudW5iaW5kJiZjb25zb2xlLndhcm4oIlslc10gYWxyZWFkeSB1bmJvdW5kLCBjYW5ub3QgY2FuY2VsIHVuYmluZEFsbCIsdGhpcy5sb2NhbE5hbWUpKTooYi51bmJpbmQmJmNvbnNvbGUubG9nKCJbJXNdIGNhbmNlbFVuYmluZEFsbCIsdGhpcy5sb2NhbE5hbWUpLHZvaWQodGhpcy5fdW5iaW5kQWxsSm9iJiYodGhpcy5fdW5iaW5kQWxsSm9iPXRoaXMuX3VuYmluZEFsbEpvYi5zdG9wKCkpKSl9fSxkPS9ce1x7KFtee31dKil9fS87YS5iaW5kUGF0dGVybj1kLGEuYXBpLmluc3RhbmNlLm1kdj1jfShQb2x5bWVyKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEpe3JldHVybiBhLmhhc093blByb3BlcnR5KCJQb2x5bWVyQmFzZSIpfWZ1bmN0aW9uIGMoKXt9dmFyIGQ9e1BvbHltZXJCYXNlOiEwLGpvYjpmdW5jdGlvbihhLGIsYyl7aWYoInN0cmluZyIhPXR5cGVvZiBhKXJldHVybiBQb2x5bWVyLmpvYi5jYWxsKHRoaXMsYSxiLGMpO3ZhciBkPSJfX18iK2E7dGhpc1tkXT1Qb2x5bWVyLmpvYi5jYWxsKHRoaXMsdGhpc1tkXSxiLGMpfSwic3VwZXIiOlBvbHltZXIuc3VwZXIsY3JlYXRlZDpmdW5jdGlvbigpe30scmVhZHk6ZnVuY3Rpb24oKXt9LGNyZWF0ZWRDYWxsYmFjazpmdW5jdGlvbigpe3RoaXMudGVtcGxhdGVJbnN0YW5jZSYmdGhpcy50ZW1wbGF0ZUluc3RhbmNlLm1vZGVsJiZjb25zb2xlLndhcm4oIkF0dHJpYnV0ZXMgb24gIit0aGlzLmxvY2FsTmFtZSsiIHdlcmUgZGF0YSBib3VuZCBwcmlvciB0byBQb2x5bWVyIHVwZ3JhZGluZyB0aGUgZWxlbWVudC4gVGhpcyBtYXkgcmVzdWx0IGluIGluY29ycmVjdCBiaW5kaW5nIHR5cGVzLiIpLHRoaXMuY3JlYXRlZCgpLHRoaXMucHJlcGFyZUVsZW1lbnQoKSx0aGlzLm93bmVyRG9jdW1lbnQuaXNTdGFnaW5nRG9jdW1lbnR8fHRoaXMubWFrZUVsZW1lbnRSZWFkeSgpfSxwcmVwYXJlRWxlbWVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9lbGVtZW50UHJlcGFyZWQ/dm9pZCBjb25zb2xlLndhcm4oIkVsZW1lbnQgYWxyZWFkeSBwcmVwYXJlZCIsdGhpcy5sb2NhbE5hbWUpOih0aGlzLl9lbGVtZW50UHJlcGFyZWQ9ITAsdGhpcy5zaGFkb3dSb290cz17fSx0aGlzLmNyZWF0ZVByb3BlcnR5T2JzZXJ2ZXIoKSx0aGlzLm9wZW5Qcm9wZXJ0eU9ic2VydmVyKCksdGhpcy5jb3B5SW5zdGFuY2VBdHRyaWJ1dGVzKCksdGhpcy50YWtlQXR0cmlidXRlcygpLHZvaWQgdGhpcy5hZGRIb3N0TGlzdGVuZXJzKCkpfSxtYWtlRWxlbWVudFJlYWR5OmZ1bmN0aW9uKCl7dGhpcy5fcmVhZGllZHx8KHRoaXMuX3JlYWRpZWQ9ITAsdGhpcy5jcmVhdGVDb21wdXRlZFByb3BlcnRpZXMoKSx0aGlzLnBhcnNlRGVjbGFyYXRpb25zKHRoaXMuX19wcm90b19fKSx0aGlzLnJlbW92ZUF0dHJpYnV0ZSgidW5yZXNvbHZlZCIpLHRoaXMucmVhZHkoKSl9LGF0dGFjaGVkQ2FsbGJhY2s6ZnVuY3Rpb24oKXt0aGlzLmNhbmNlbFVuYmluZEFsbCgpLHRoaXMuYXR0YWNoZWQmJnRoaXMuYXR0YWNoZWQoKSx0aGlzLmVudGVyZWRWaWV3JiZ0aGlzLmVudGVyZWRWaWV3KCksdGhpcy5oYXNCZWVuQXR0YWNoZWR8fCh0aGlzLmhhc0JlZW5BdHRhY2hlZD0hMCx0aGlzLmRvbVJlYWR5JiZ0aGlzLmFzeW5jKCJkb21SZWFkeSIpKX0sZGV0YWNoZWRDYWxsYmFjazpmdW5jdGlvbigpe3RoaXMucHJldmVudERpc3Bvc2V8fHRoaXMuYXN5bmNVbmJpbmRBbGwoKSx0aGlzLmRldGFjaGVkJiZ0aGlzLmRldGFjaGVkKCksdGhpcy5sZWZ0VmlldyYmdGhpcy5sZWZ0VmlldygpfSxlbnRlcmVkVmlld0NhbGxiYWNrOmZ1bmN0aW9uKCl7dGhpcy5hdHRhY2hlZENhbGxiYWNrKCl9LGxlZnRWaWV3Q2FsbGJhY2s6ZnVuY3Rpb24oKXt0aGlzLmRldGFjaGVkQ2FsbGJhY2soKX0sZW50ZXJlZERvY3VtZW50Q2FsbGJhY2s6ZnVuY3Rpb24oKXt0aGlzLmF0dGFjaGVkQ2FsbGJhY2soKX0sbGVmdERvY3VtZW50Q2FsbGJhY2s6ZnVuY3Rpb24oKXt0aGlzLmRldGFjaGVkQ2FsbGJhY2soKX0scGFyc2VEZWNsYXJhdGlvbnM6ZnVuY3Rpb24oYSl7YSYmYS5lbGVtZW50JiYodGhpcy5wYXJzZURlY2xhcmF0aW9ucyhhLl9fcHJvdG9fXyksYS5wYXJzZURlY2xhcmF0aW9uLmNhbGwodGhpcyxhLmVsZW1lbnQpKX0scGFyc2VEZWNsYXJhdGlvbjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmZldGNoVGVtcGxhdGUoYSk7aWYoYil7dmFyIGM9dGhpcy5zaGFkb3dGcm9tVGVtcGxhdGUoYik7dGhpcy5zaGFkb3dSb290c1thLm5hbWVdPWN9fSxmZXRjaFRlbXBsYXRlOmZ1bmN0aW9uKGEpe3JldHVybiBhLnF1ZXJ5U2VsZWN0b3IoInRlbXBsYXRlIil9LHNoYWRvd0Zyb21UZW1wbGF0ZTpmdW5jdGlvbihhKXtpZihhKXt2YXIgYj10aGlzLmNyZWF0ZVNoYWRvd1Jvb3QoKSxjPXRoaXMuaW5zdGFuY2VUZW1wbGF0ZShhKTtyZXR1cm4gYi5hcHBlbmRDaGlsZChjKSx0aGlzLnNoYWRvd1Jvb3RSZWFkeShiLGEpLGJ9fSxsaWdodEZyb21UZW1wbGF0ZTpmdW5jdGlvbihhLGIpe2lmKGEpe3RoaXMuZXZlbnRDb250cm9sbGVyPXRoaXM7dmFyIGM9dGhpcy5pbnN0YW5jZVRlbXBsYXRlKGEpO3JldHVybiBiP3RoaXMuaW5zZXJ0QmVmb3JlKGMsYik6dGhpcy5hcHBlbmRDaGlsZChjKSx0aGlzLnNoYWRvd1Jvb3RSZWFkeSh0aGlzKSxjfX0sc2hhZG93Um9vdFJlYWR5OmZ1bmN0aW9uKGEpe3RoaXMubWFyc2hhbE5vZGVSZWZlcmVuY2VzKGEpfSxtYXJzaGFsTm9kZVJlZmVyZW5jZXM6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy4kPXRoaXMuJHx8e307aWYoYSlmb3IodmFyIGMsZD1hLnF1ZXJ5U2VsZWN0b3JBbGwoIltpZF0iKSxlPTAsZj1kLmxlbmd0aDtmPmUmJihjPWRbZV0pO2UrKyliW2MuaWRdPWN9LGF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjazpmdW5jdGlvbihhKXsiY2xhc3MiIT09YSYmInN0eWxlIiE9PWEmJnRoaXMuYXR0cmlidXRlVG9Qcm9wZXJ0eShhLHRoaXMuZ2V0QXR0cmlidXRlKGEpKSx0aGlzLmF0dHJpYnV0ZUNoYW5nZWQmJnRoaXMuYXR0cmlidXRlQ2hhbmdlZC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LG9uTXV0YXRpb246ZnVuY3Rpb24oYSxiKXt2YXIgYz1uZXcgTXV0YXRpb25PYnNlcnZlcihmdW5jdGlvbihhKXtiLmNhbGwodGhpcyxjLGEpLGMuZGlzY29ubmVjdCgpfS5iaW5kKHRoaXMpKTtjLm9ic2VydmUoYSx7Y2hpbGRMaXN0OiEwLHN1YnRyZWU6ITB9KX19O2MucHJvdG90eXBlPWQsZC5jb25zdHJ1Y3Rvcj1jLGEuQmFzZT1jLGEuaXNCYXNlPWIsYS5hcGkuaW5zdGFuY2UuYmFzZT1kfShQb2x5bWVyKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEpe3JldHVybiBhLl9fcHJvdG9fX31mdW5jdGlvbiBjKGEsYil7dmFyIGM9IiIsZD0hMTtiJiYoYz1iLmxvY2FsTmFtZSxkPWIuaGFzQXR0cmlidXRlKCJpcyIpKTt2YXIgZT1QbGF0Zm9ybS5TaGFkb3dDU1MubWFrZVNjb3BlU2VsZWN0b3IoYyxkKTtyZXR1cm4gUGxhdGZvcm0uU2hhZG93Q1NTLnNoaW1Dc3NUZXh0KGEsZSl9dmFyIGQ9KHdpbmRvdy5sb2dGbGFnc3x8e30sd2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxlPSJlbGVtZW50IixmPSJjb250cm9sbGVyIixnPXtTVFlMRV9TQ09QRV9BVFRSSUJVVEU6ZSxpbnN0YWxsQ29udHJvbGxlclN0eWxlczpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZmluZFN0eWxlU2NvcGUoKTtpZihhJiYhdGhpcy5zY29wZUhhc05hbWVkU3R5bGUoYSx0aGlzLmxvY2FsTmFtZSkpe2Zvcih2YXIgYz1iKHRoaXMpLGQ9IiI7YyYmYy5lbGVtZW50OylkKz1jLmVsZW1lbnQuY3NzVGV4dEZvclNjb3BlKGYpLGM9YihjKTtkJiZ0aGlzLmluc3RhbGxTY29wZUNzc1RleHQoZCxhKX19LGluc3RhbGxTY29wZVN0eWxlOmZ1bmN0aW9uKGEsYixjKXt2YXIgYz1jfHx0aGlzLmZpbmRTdHlsZVNjb3BlKCksYj1ifHwiIjtpZihjJiYhdGhpcy5zY29wZUhhc05hbWVkU3R5bGUoYyx0aGlzLmxvY2FsTmFtZStiKSl7dmFyIGQ9IiI7aWYoYSBpbnN0YW5jZW9mIEFycmF5KWZvcih2YXIgZSxmPTAsZz1hLmxlbmd0aDtnPmYmJihlPWFbZl0pO2YrKylkKz1lLnRleHRDb250ZW50KyJcblxuIjtlbHNlIGQ9YS50ZXh0Q29udGVudDt0aGlzLmluc3RhbGxTY29wZUNzc1RleHQoZCxjLGIpfX0saW5zdGFsbFNjb3BlQ3NzVGV4dDpmdW5jdGlvbihhLGIsZSl7aWYoYj1ifHx0aGlzLmZpbmRTdHlsZVNjb3BlKCksZT1lfHwiIixiKXtkJiYoYT1jKGEsYi5ob3N0KSk7dmFyIGc9dGhpcy5lbGVtZW50LmNzc1RleHRUb1Njb3BlU3R5bGUoYSxmKTtQb2x5bWVyLmFwcGx5U3R5bGVUb1Njb3BlKGcsYiksdGhpcy5zdHlsZUNhY2hlRm9yU2NvcGUoYilbdGhpcy5sb2NhbE5hbWUrZV09ITB9fSxmaW5kU3R5bGVTY29wZTpmdW5jdGlvbihhKXtmb3IodmFyIGI9YXx8dGhpcztiLnBhcmVudE5vZGU7KWI9Yi5wYXJlbnROb2RlO3JldHVybiBifSxzY29wZUhhc05hbWVkU3R5bGU6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLnN0eWxlQ2FjaGVGb3JTY29wZShhKTsKcmV0dXJuIGNbYl19LHN0eWxlQ2FjaGVGb3JTY29wZTpmdW5jdGlvbihhKXtpZihkKXt2YXIgYj1hLmhvc3Q/YS5ob3N0LmxvY2FsTmFtZTphLmxvY2FsTmFtZTtyZXR1cm4gaFtiXXx8KGhbYl09e30pfXJldHVybiBhLl9zY29wZVN0eWxlcz1hLl9zY29wZVN0eWxlc3x8e319fSxoPXt9O2EuYXBpLmluc3RhbmNlLnN0eWxlcz1nfShQb2x5bWVyKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEsYil7aWYoInN0cmluZyIhPXR5cGVvZiBhKXt2YXIgYz1ifHxkb2N1bWVudC5fY3VycmVudFNjcmlwdDtpZihiPWEsYT1jJiZjLnBhcmVudE5vZGUmJmMucGFyZW50Tm9kZS5nZXRBdHRyaWJ1dGU/Yy5wYXJlbnROb2RlLmdldEF0dHJpYnV0ZSgibmFtZSIpOiIiLCFhKXRocm93IkVsZW1lbnQgbmFtZSBjb3VsZCBub3QgYmUgaW5mZXJyZWQuIn1pZihmKGEpKXRocm93IkFscmVhZHkgcmVnaXN0ZXJlZCAoUG9seW1lcikgcHJvdG90eXBlIGZvciBlbGVtZW50ICIrYTtlKGEsYiksZChhKX1mdW5jdGlvbiBjKGEsYil7aVthXT1ifWZ1bmN0aW9uIGQoYSl7aVthXSYmKGlbYV0ucmVnaXN0ZXJXaGVuUmVhZHkoKSxkZWxldGUgaVthXSl9ZnVuY3Rpb24gZShhLGIpe3JldHVybiBqW2FdPWJ8fHt9fWZ1bmN0aW9uIGYoYSl7cmV0dXJuIGpbYV19ZnVuY3Rpb24gZyhhLGIpe2lmKCJzdHJpbmciIT10eXBlb2YgYilyZXR1cm4hMTt2YXIgYz1IVE1MRWxlbWVudC5nZXRQcm90b3R5cGVGb3JUYWcoYiksZD1jJiZjLmNvbnN0cnVjdG9yO3JldHVybiBkP0N1c3RvbUVsZW1lbnRzLmluc3RhbmNlb2Y/Q3VzdG9tRWxlbWVudHMuaW5zdGFuY2VvZihhLGQpOmEgaW5zdGFuY2VvZiBkOiExfXZhciBoPWEuZXh0ZW5kLGk9KGEuYXBpLHt9KSxqPXt9O2EuZ2V0UmVnaXN0ZXJlZFByb3RvdHlwZT1mLGEud2FpdGluZ0ZvclByb3RvdHlwZT1jLGEuaW5zdGFuY2VPZlR5cGU9Zyx3aW5kb3cuUG9seW1lcj1iLGgoUG9seW1lcixhKSxQbGF0Zm9ybS5jb25zdW1lRGVjbGFyYXRpb25zJiZQbGF0Zm9ybS5jb25zdW1lRGVjbGFyYXRpb25zKGZ1bmN0aW9uKGEpe2lmKGEpZm9yKHZhciBjLGQ9MCxlPWEubGVuZ3RoO2U+ZCYmKGM9YVtkXSk7ZCsrKWIuYXBwbHkobnVsbCxjKX0pfShQb2x5bWVyKSxmdW5jdGlvbihhKXt2YXIgYj17cmVzb2x2ZUVsZW1lbnRQYXRoczpmdW5jdGlvbihhKXtQb2x5bWVyLnVybFJlc29sdmVyLnJlc29sdmVEb20oYSl9LGFkZFJlc29sdmVQYXRoQXBpOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5nZXRBdHRyaWJ1dGUoImFzc2V0cGF0aCIpfHwiIixiPW5ldyBVUkwoYSx0aGlzLm93bmVyRG9jdW1lbnQuYmFzZVVSSSk7dGhpcy5wcm90b3R5cGUucmVzb2x2ZVBhdGg9ZnVuY3Rpb24oYSxjKXt2YXIgZD1uZXcgVVJMKGEsY3x8Yik7cmV0dXJuIGQuaHJlZn19fTthLmFwaS5kZWNsYXJhdGlvbi5wYXRoPWJ9KFBvbHltZXIpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSxiKXt2YXIgYz1uZXcgVVJMKGEuZ2V0QXR0cmlidXRlKCJocmVmIiksYikuaHJlZjtyZXR1cm4iQGltcG9ydCAnIitjKyInOyJ9ZnVuY3Rpb24gYyhhLGIpe2lmKGEpe2I9PT1kb2N1bWVudCYmKGI9ZG9jdW1lbnQuaGVhZCksaSYmKGI9ZG9jdW1lbnQuaGVhZCk7dmFyIGM9ZChhLnRleHRDb250ZW50KSxlPWEuZ2V0QXR0cmlidXRlKGgpO2UmJmMuc2V0QXR0cmlidXRlKGgsZSk7dmFyIGY9Yi5maXJzdEVsZW1lbnRDaGlsZDtpZihiPT09ZG9jdW1lbnQuaGVhZCl7dmFyIGc9InN0eWxlWyIraCsiXSIsaj1kb2N1bWVudC5oZWFkLnF1ZXJ5U2VsZWN0b3JBbGwoZyk7ai5sZW5ndGgmJihmPWpbai5sZW5ndGgtMV0ubmV4dEVsZW1lbnRTaWJsaW5nKX1iLmluc2VydEJlZm9yZShjLGYpfX1mdW5jdGlvbiBkKGEsYil7Yj1ifHxkb2N1bWVudCxiPWIuY3JlYXRlRWxlbWVudD9iOmIub3duZXJEb2N1bWVudDt2YXIgYz1iLmNyZWF0ZUVsZW1lbnQoInN0eWxlIik7cmV0dXJuIGMudGV4dENvbnRlbnQ9YSxjfWZ1bmN0aW9uIGUoYSl7cmV0dXJuIGEmJmEuX19yZXNvdXJjZXx8IiJ9ZnVuY3Rpb24gZihhLGIpe3JldHVybiBxP3EuY2FsbChhLGIpOnZvaWQgMH12YXIgZz0od2luZG93LmxvZ0ZsYWdzfHx7fSxhLmFwaS5pbnN0YW5jZS5zdHlsZXMpLGg9Zy5TVFlMRV9TQ09QRV9BVFRSSUJVVEUsaT13aW5kb3cuU2hhZG93RE9NUG9seWZpbGwsaj0ic3R5bGUiLGs9IkBpbXBvcnQiLGw9ImxpbmtbcmVsPXN0eWxlc2hlZXRdIixtPSJnbG9iYWwiLG49InBvbHltZXItc2NvcGUiLG89e2xvYWRTdHlsZXM6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5mZXRjaFRlbXBsYXRlKCksYz1iJiZ0aGlzLnRlbXBsYXRlQ29udGVudCgpO2lmKGMpe3RoaXMuY29udmVydFNoZWV0c1RvU3R5bGVzKGMpO3ZhciBkPXRoaXMuZmluZExvYWRhYmxlU3R5bGVzKGMpO2lmKGQubGVuZ3RoKXt2YXIgZT1iLm93bmVyRG9jdW1lbnQuYmFzZVVSSTtyZXR1cm4gUG9seW1lci5zdHlsZVJlc29sdmVyLmxvYWRTdHlsZXMoZCxlLGEpfX1hJiZhKCl9LGNvbnZlcnRTaGVldHNUb1N0eWxlczpmdW5jdGlvbihhKXtmb3IodmFyIGMsZSxmPWEucXVlcnlTZWxlY3RvckFsbChsKSxnPTAsaD1mLmxlbmd0aDtoPmcmJihjPWZbZ10pO2crKyllPWQoYihjLHRoaXMub3duZXJEb2N1bWVudC5iYXNlVVJJKSx0aGlzLm93bmVyRG9jdW1lbnQpLHRoaXMuY29weVNoZWV0QXR0cmlidXRlcyhlLGMpLGMucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQoZSxjKX0sY29weVNoZWV0QXR0cmlidXRlczpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYyxkPTAsZT1iLmF0dHJpYnV0ZXMsZj1lLmxlbmd0aDsoYz1lW2RdKSYmZj5kO2QrKykicmVsIiE9PWMubmFtZSYmImhyZWYiIT09Yy5uYW1lJiZhLnNldEF0dHJpYnV0ZShjLm5hbWUsYy52YWx1ZSl9LGZpbmRMb2FkYWJsZVN0eWxlczpmdW5jdGlvbihhKXt2YXIgYj1bXTtpZihhKWZvcih2YXIgYyxkPWEucXVlcnlTZWxlY3RvckFsbChqKSxlPTAsZj1kLmxlbmd0aDtmPmUmJihjPWRbZV0pO2UrKyljLnRleHRDb250ZW50Lm1hdGNoKGspJiZiLnB1c2goYyk7cmV0dXJuIGJ9LGluc3RhbGxTaGVldHM6ZnVuY3Rpb24oKXt0aGlzLmNhY2hlU2hlZXRzKCksdGhpcy5jYWNoZVN0eWxlcygpLHRoaXMuaW5zdGFsbExvY2FsU2hlZXRzKCksdGhpcy5pbnN0YWxsR2xvYmFsU3R5bGVzKCl9LGNhY2hlU2hlZXRzOmZ1bmN0aW9uKCl7dGhpcy5zaGVldHM9dGhpcy5maW5kTm9kZXMobCksdGhpcy5zaGVldHMuZm9yRWFjaChmdW5jdGlvbihhKXthLnBhcmVudE5vZGUmJmEucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChhKX0pfSxjYWNoZVN0eWxlczpmdW5jdGlvbigpe3RoaXMuc3R5bGVzPXRoaXMuZmluZE5vZGVzKGorIlsiK24rIl0iKSx0aGlzLnN0eWxlcy5mb3JFYWNoKGZ1bmN0aW9uKGEpe2EucGFyZW50Tm9kZSYmYS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGEpfSl9LGluc3RhbGxMb2NhbFNoZWV0czpmdW5jdGlvbigpe3ZhciBhPXRoaXMuc2hlZXRzLmZpbHRlcihmdW5jdGlvbihhKXtyZXR1cm4hYS5oYXNBdHRyaWJ1dGUobil9KSxiPXRoaXMudGVtcGxhdGVDb250ZW50KCk7aWYoYil7dmFyIGM9IiI7aWYoYS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2MrPWUoYSkrIlxuIn0pLGMpe3ZhciBmPWQoYyx0aGlzLm93bmVyRG9jdW1lbnQpO2IuaW5zZXJ0QmVmb3JlKGYsYi5maXJzdENoaWxkKX19fSxmaW5kTm9kZXM6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLnF1ZXJ5U2VsZWN0b3JBbGwoYSkuYXJyYXkoKSxkPXRoaXMudGVtcGxhdGVDb250ZW50KCk7aWYoZCl7dmFyIGU9ZC5xdWVyeVNlbGVjdG9yQWxsKGEpLmFycmF5KCk7Yz1jLmNvbmNhdChlKX1yZXR1cm4gYj9jLmZpbHRlcihiKTpjfSxpbnN0YWxsR2xvYmFsU3R5bGVzOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5zdHlsZUZvclNjb3BlKG0pO2MoYSxkb2N1bWVudC5oZWFkKX0sY3NzVGV4dEZvclNjb3BlOmZ1bmN0aW9uKGEpe3ZhciBiPSIiLGM9IlsiK24rIj0iK2ErIl0iLGQ9ZnVuY3Rpb24oYSl7cmV0dXJuIGYoYSxjKX0sZz10aGlzLnNoZWV0cy5maWx0ZXIoZCk7Zy5mb3JFYWNoKGZ1bmN0aW9uKGEpe2IrPWUoYSkrIlxuXG4ifSk7dmFyIGg9dGhpcy5zdHlsZXMuZmlsdGVyKGQpO3JldHVybiBoLmZvckVhY2goZnVuY3Rpb24oYSl7Yis9YS50ZXh0Q29udGVudCsiXG5cbiJ9KSxifSxzdHlsZUZvclNjb3BlOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3NzVGV4dEZvclNjb3BlKGEpO3JldHVybiB0aGlzLmNzc1RleHRUb1Njb3BlU3R5bGUoYixhKX0sY3NzVGV4dFRvU2NvcGVTdHlsZTpmdW5jdGlvbihhLGIpe2lmKGEpe3ZhciBjPWQoYSk7cmV0dXJuIGMuc2V0QXR0cmlidXRlKGgsdGhpcy5nZXRBdHRyaWJ1dGUoIm5hbWUiKSsiLSIrYiksY319fSxwPUhUTUxFbGVtZW50LnByb3RvdHlwZSxxPXAubWF0Y2hlc3x8cC5tYXRjaGVzU2VsZWN0b3J8fHAud2Via2l0TWF0Y2hlc1NlbGVjdG9yfHxwLm1vek1hdGNoZXNTZWxlY3RvcjthLmFwaS5kZWNsYXJhdGlvbi5zdHlsZXM9byxhLmFwcGx5U3R5bGVUb1Njb3BlPWN9KFBvbHltZXIpLGZ1bmN0aW9uKGEpe3ZhciBiPSh3aW5kb3cubG9nRmxhZ3N8fHt9LGEuYXBpLmluc3RhbmNlLmV2ZW50cyksYz1iLkVWRU5UX1BSRUZJWCxkPXt9O1sid2Via2l0QW5pbWF0aW9uU3RhcnQiLCJ3ZWJraXRBbmltYXRpb25FbmQiLCJ3ZWJraXRUcmFuc2l0aW9uRW5kIiwiRE9NRm9jdXNPdXQiLCJET01Gb2N1c0luIiwiRE9NTW91c2VTY3JvbGwiXS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2RbYS50b0xvd2VyQ2FzZSgpXT1hfSk7dmFyIGU9e3BhcnNlSG9zdEV2ZW50czpmdW5jdGlvbigpe3ZhciBhPXRoaXMucHJvdG90eXBlLmV2ZW50RGVsZWdhdGVzO3RoaXMuYWRkQXR0cmlidXRlRGVsZWdhdGVzKGEpfSxhZGRBdHRyaWJ1dGVEZWxlZ2F0ZXM6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiLGM9MDtiPXRoaXMuYXR0cmlidXRlc1tjXTtjKyspdGhpcy5oYXNFdmVudFByZWZpeChiLm5hbWUpJiYoYVt0aGlzLnJlbW92ZUV2ZW50UHJlZml4KGIubmFtZSldPWIudmFsdWUucmVwbGFjZSgie3siLCIiKS5yZXBsYWNlKCJ9fSIsIiIpLnRyaW0oKSl9LGhhc0V2ZW50UHJlZml4OmZ1bmN0aW9uKGEpe3JldHVybiBhJiYibyI9PT1hWzBdJiYibiI9PT1hWzFdJiYiLSI9PT1hWzJdfSxyZW1vdmVFdmVudFByZWZpeDpmdW5jdGlvbihhKXtyZXR1cm4gYS5zbGljZShmKX0sZmluZENvbnRyb2xsZXI6ZnVuY3Rpb24oYSl7Zm9yKDthLnBhcmVudE5vZGU7KXtpZihhLmV2ZW50Q29udHJvbGxlcilyZXR1cm4gYS5ldmVudENvbnRyb2xsZXI7YT1hLnBhcmVudE5vZGV9cmV0dXJuIGEuaG9zdH0sZ2V0RXZlbnRIYW5kbGVyOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD10aGlzO3JldHVybiBmdW5jdGlvbihlKXthJiZhLlBvbHltZXJCYXNlfHwoYT1kLmZpbmRDb250cm9sbGVyKGIpKTt2YXIgZj1bZSxlLmRldGFpbCxlLmN1cnJlbnRUYXJnZXRdO2EuZGlzcGF0Y2hNZXRob2QoYSxjLGYpfX0scHJlcGFyZUV2ZW50QmluZGluZzpmdW5jdGlvbihhLGIpe2lmKHRoaXMuaGFzRXZlbnRQcmVmaXgoYikpe3ZhciBjPXRoaXMucmVtb3ZlRXZlbnRQcmVmaXgoYik7Yz1kW2NdfHxjO3ZhciBlPXRoaXM7cmV0dXJuIGZ1bmN0aW9uKGIsZCxmKXtmdW5jdGlvbiBnKCl7cmV0dXJuInt7ICIrYSsiIH19In12YXIgaD1lLmdldEV2ZW50SGFuZGxlcih2b2lkIDAsZCxhKTtyZXR1cm4gUG9seW1lckdlc3R1cmVzLmFkZEV2ZW50TGlzdGVuZXIoZCxjLGgpLGY/dm9pZCAwOntvcGVuOmcsZGlzY2FyZENoYW5nZXM6ZyxjbG9zZTpmdW5jdGlvbigpe1BvbHltZXJHZXN0dXJlcy5yZW1vdmVFdmVudExpc3RlbmVyKGQsYyxoKX19fX19fSxmPWMubGVuZ3RoO2EuYXBpLmRlY2xhcmF0aW9uLmV2ZW50cz1lfShQb2x5bWVyKSxmdW5jdGlvbihhKXt2YXIgYj17aW5mZXJPYnNlcnZlcnM6ZnVuY3Rpb24oYSl7dmFyIGIsYz1hLm9ic2VydmU7Zm9yKHZhciBkIGluIGEpIkNoYW5nZWQiPT09ZC5zbGljZSgtNykmJihjfHwoYz1hLm9ic2VydmU9e30pLGI9ZC5zbGljZSgwLC03KSxjW2JdPWNbYl18fGQpfSxleHBsb2RlT2JzZXJ2ZXJzOmZ1bmN0aW9uKGEpe3ZhciBiPWEub2JzZXJ2ZTtpZihiKXt2YXIgYz17fTtmb3IodmFyIGQgaW4gYilmb3IodmFyIGUsZj1kLnNwbGl0KCIgIiksZz0wO2U9ZltnXTtnKyspY1tlXT1iW2RdO2Eub2JzZXJ2ZT1jfX0sb3B0aW1pemVQcm9wZXJ0eU1hcHM6ZnVuY3Rpb24oYSl7aWYoYS5vYnNlcnZlKXt2YXIgYj1hLl9vYnNlcnZlTmFtZXM9W107Zm9yKHZhciBjIGluIGEub2JzZXJ2ZSlmb3IodmFyIGQsZT1jLnNwbGl0KCIgIiksZj0wO2Q9ZVtmXTtmKyspYi5wdXNoKGQpfWlmKGEucHVibGlzaCl7dmFyIGI9YS5fcHVibGlzaE5hbWVzPVtdO2Zvcih2YXIgYyBpbiBhLnB1Ymxpc2gpYi5wdXNoKGMpfWlmKGEuY29tcHV0ZWQpe3ZhciBiPWEuX2NvbXB1dGVkTmFtZXM9W107Zm9yKHZhciBjIGluIGEuY29tcHV0ZWQpYi5wdXNoKGMpfX0scHVibGlzaFByb3BlcnRpZXM6ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLnB1Ymxpc2g7YyYmKHRoaXMucmVxdWlyZVByb3BlcnRpZXMoYyxhLGIpLGEuX3B1Ymxpc2hMQz10aGlzLmxvd2VyQ2FzZU1hcChjKSl9LHJlcXVpcmVQcm9wZXJ0aWVzOmZ1bmN0aW9uKGEsYil7Yi5yZWZsZWN0PWIucmVmbGVjdHx8e307Zm9yKHZhciBjIGluIGEpe3ZhciBkPWFbY107ZCYmdm9pZCAwIT09ZC5yZWZsZWN0JiYoYi5yZWZsZWN0W2NdPUJvb2xlYW4oZC5yZWZsZWN0KSxkPWQudmFsdWUpLHZvaWQgMCE9PWQmJihiW2NdPWQpfX0sbG93ZXJDYXNlTWFwOmZ1bmN0aW9uKGEpe3ZhciBiPXt9O2Zvcih2YXIgYyBpbiBhKWJbYy50b0xvd2VyQ2FzZSgpXT1jO3JldHVybiBifSxjcmVhdGVQcm9wZXJ0eUFjY2Vzc29yOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5wcm90b3R5cGUsZD1hKyJfIixlPWErIk9ic2VydmFibGVfIjtjW2RdPWNbYV0sT2JqZWN0LmRlZmluZVByb3BlcnR5KGMsYSx7Z2V0OmZ1bmN0aW9uKCl7dmFyIGE9dGhpc1tlXTtyZXR1cm4gYSYmYS5kZWxpdmVyKCksdGhpc1tkXX0sc2V0OmZ1bmN0aW9uKGMpe2lmKGIpcmV0dXJuIHRoaXNbZF07dmFyIGY9dGhpc1tlXTtpZihmKXJldHVybiB2b2lkIGYuc2V0VmFsdWUoYyk7dmFyIGc9dGhpc1tkXTtyZXR1cm4gdGhpc1tkXT1jLHRoaXMuZW1pdFByb3BlcnR5Q2hhbmdlUmVjb3JkKGEsYyxnKSxjfSxjb25maWd1cmFibGU6ITB9KX0sY3JlYXRlUHJvcGVydHlBY2Nlc3NvcnM6ZnVuY3Rpb24oYSl7dmFyIGI9YS5fY29tcHV0ZWROYW1lcztpZihiJiZiLmxlbmd0aClmb3IodmFyIGMsZD0wLGU9Yi5sZW5ndGg7ZT5kJiYoYz1iW2RdKTtkKyspdGhpcy5jcmVhdGVQcm9wZXJ0eUFjY2Vzc29yKGMsITApO3ZhciBiPWEuX3B1Ymxpc2hOYW1lcztpZihiJiZiLmxlbmd0aClmb3IodmFyIGMsZD0wLGU9Yi5sZW5ndGg7ZT5kJiYoYz1iW2RdKTtkKyspYS5jb21wdXRlZCYmYS5jb21wdXRlZFtjXXx8dGhpcy5jcmVhdGVQcm9wZXJ0eUFjY2Vzc29yKGMpfX07YS5hcGkuZGVjbGFyYXRpb24ucHJvcGVydGllcz1ifShQb2x5bWVyKSxmdW5jdGlvbihhKXt2YXIgYj0iYXR0cmlidXRlcyIsYz0vXHN8LC8sZD17aW5oZXJpdEF0dHJpYnV0ZXNPYmplY3RzOmZ1bmN0aW9uKGEpe3RoaXMuaW5oZXJpdE9iamVjdChhLCJwdWJsaXNoTEMiKSx0aGlzLmluaGVyaXRPYmplY3QoYSwiX2luc3RhbmNlQXR0cmlidXRlcyIpfSxwdWJsaXNoQXR0cmlidXRlczpmdW5jdGlvbihhKXt2YXIgZD10aGlzLmdldEF0dHJpYnV0ZShiKTtpZihkKWZvcih2YXIgZSxmPWEucHVibGlzaHx8KGEucHVibGlzaD17fSksZz1kLnNwbGl0KGMpLGg9MCxpPWcubGVuZ3RoO2k+aDtoKyspZT1nW2hdLnRyaW0oKSxlJiZ2b2lkIDA9PT1mW2VdJiYoZltlXT12b2lkIDApfSxhY2N1bXVsYXRlSW5zdGFuY2VBdHRyaWJ1dGVzOmZ1bmN0aW9uKCl7Zm9yKHZhciBhLGI9dGhpcy5wcm90b3R5cGUuX2luc3RhbmNlQXR0cmlidXRlcyxjPXRoaXMuYXR0cmlidXRlcyxkPTAsZT1jLmxlbmd0aDtlPmQmJihhPWNbZF0pO2QrKyl0aGlzLmlzSW5zdGFuY2VBdHRyaWJ1dGUoYS5uYW1lKSYmKGJbYS5uYW1lXT1hLnZhbHVlKX0saXNJbnN0YW5jZUF0dHJpYnV0ZTpmdW5jdGlvbihhKXtyZXR1cm4hdGhpcy5ibGFja0xpc3RbYV0mJiJvbi0iIT09YS5zbGljZSgwLDMpfSxibGFja0xpc3Q6e25hbWU6MSwiZXh0ZW5kcyI6MSxjb25zdHJ1Y3RvcjoxLG5vc2NyaXB0OjEsYXNzZXRwYXRoOjEsImNhY2hlLWNzc3RleHQiOjF9fTtkLmJsYWNrTGlzdFtiXT0xLGEuYXBpLmRlY2xhcmF0aW9uLmF0dHJpYnV0ZXM9ZH0oUG9seW1lciksZnVuY3Rpb24oYSl7dmFyIGI9YS5hcGkuZGVjbGFyYXRpb24uZXZlbnRzLGM9bmV3IFBvbHltZXJFeHByZXNzaW9ucyxkPWMucHJlcGFyZUJpbmRpbmc7Yy5wcmVwYXJlQmluZGluZz1mdW5jdGlvbihhLGUsZil7cmV0dXJuIGIucHJlcGFyZUV2ZW50QmluZGluZyhhLGUsZil8fGQuY2FsbChjLGEsZSxmKX07dmFyIGU9e3N5bnRheDpjLGZldGNoVGVtcGxhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5xdWVyeVNlbGVjdG9yKCJ0ZW1wbGF0ZSIpfSx0ZW1wbGF0ZUNvbnRlbnQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmZldGNoVGVtcGxhdGUoKTtyZXR1cm4gYSYmYS5jb250ZW50fSxpbnN0YWxsQmluZGluZ0RlbGVnYXRlOmZ1bmN0aW9uKGEpe2EmJihhLmJpbmRpbmdEZWxlZ2F0ZT10aGlzLnN5bnRheCl9fTthLmFwaS5kZWNsYXJhdGlvbi5tZHY9ZX0oUG9seW1lciksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhKXtpZighT2JqZWN0Ll9fcHJvdG9fXyl7dmFyIGI9T2JqZWN0LmdldFByb3RvdHlwZU9mKGEpO2EuX19wcm90b19fPWIsZChiKSYmKGIuX19wcm90b19fPU9iamVjdC5nZXRQcm90b3R5cGVPZihiKSl9fXZhciBjPWEuYXBpLGQ9YS5pc0Jhc2UsZT1hLmV4dGVuZCxmPXdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCxnPXtyZWdpc3RlcjpmdW5jdGlvbihhLGIpe3RoaXMuYnVpbGRQcm90b3R5cGUoYSxiKSx0aGlzLnJlZ2lzdGVyUHJvdG90eXBlKGEsYiksdGhpcy5wdWJsaXNoQ29uc3RydWN0b3IoKX0sYnVpbGRQcm90b3R5cGU6ZnVuY3Rpb24oYixjKXt2YXIgZD1hLmdldFJlZ2lzdGVyZWRQcm90b3R5cGUoYiksZT10aGlzLmdlbmVyYXRlQmFzZVByb3RvdHlwZShjKTt0aGlzLmRlc3VnYXJCZWZvcmVDaGFpbmluZyhkLGUpLHRoaXMucHJvdG90eXBlPXRoaXMuY2hhaW5Qcm90b3R5cGVzKGQsZSksdGhpcy5kZXN1Z2FyQWZ0ZXJDaGFpbmluZyhiLGMpfSxkZXN1Z2FyQmVmb3JlQ2hhaW5pbmc6ZnVuY3Rpb24oYSxiKXthLmVsZW1lbnQ9dGhpcyx0aGlzLnB1Ymxpc2hBdHRyaWJ1dGVzKGEsYiksdGhpcy5wdWJsaXNoUHJvcGVydGllcyhhLGIpLHRoaXMuaW5mZXJPYnNlcnZlcnMoYSksdGhpcy5leHBsb2RlT2JzZXJ2ZXJzKGEpfSxjaGFpblByb3RvdHlwZXM6ZnVuY3Rpb24oYSxjKXt0aGlzLmluaGVyaXRNZXRhRGF0YShhLGMpO3ZhciBkPXRoaXMuY2hhaW5PYmplY3QoYSxjKTtyZXR1cm4gYihkKSxkfSxpbmhlcml0TWV0YURhdGE6ZnVuY3Rpb24oYSxiKXt0aGlzLmluaGVyaXRPYmplY3QoIm9ic2VydmUiLGEsYiksdGhpcy5pbmhlcml0T2JqZWN0KCJwdWJsaXNoIixhLGIpLHRoaXMuaW5oZXJpdE9iamVjdCgicmVmbGVjdCIsYSxiKSx0aGlzLmluaGVyaXRPYmplY3QoIl9wdWJsaXNoTEMiLGEsYiksdGhpcy5pbmhlcml0T2JqZWN0KCJfaW5zdGFuY2VBdHRyaWJ1dGVzIixhLGIpLHRoaXMuaW5oZXJpdE9iamVjdCgiZXZlbnREZWxlZ2F0ZXMiLGEsYil9LGRlc3VnYXJBZnRlckNoYWluaW5nOmZ1bmN0aW9uKGEsYil7dGhpcy5vcHRpbWl6ZVByb3BlcnR5TWFwcyh0aGlzLnByb3RvdHlwZSksdGhpcy5jcmVhdGVQcm9wZXJ0eUFjY2Vzc29ycyh0aGlzLnByb3RvdHlwZSksdGhpcy5pbnN0YWxsQmluZGluZ0RlbGVnYXRlKHRoaXMuZmV0Y2hUZW1wbGF0ZSgpKSx0aGlzLmluc3RhbGxTaGVldHMoKSx0aGlzLnJlc29sdmVFbGVtZW50UGF0aHModGhpcyksdGhpcy5hY2N1bXVsYXRlSW5zdGFuY2VBdHRyaWJ1dGVzKCksdGhpcy5wYXJzZUhvc3RFdmVudHMoKSx0aGlzLmFkZFJlc29sdmVQYXRoQXBpKCksZiYmUGxhdGZvcm0uU2hhZG93Q1NTLnNoaW1TdHlsaW5nKHRoaXMudGVtcGxhdGVDb250ZW50KCksYSxiKSx0aGlzLnByb3RvdHlwZS5yZWdpc3RlckNhbGxiYWNrJiZ0aGlzLnByb3RvdHlwZS5yZWdpc3RlckNhbGxiYWNrKHRoaXMpfSxwdWJsaXNoQ29uc3RydWN0b3I6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmdldEF0dHJpYnV0ZSgiY29uc3RydWN0b3IiKTthJiYod2luZG93W2FdPXRoaXMuY3Rvcil9LGdlbmVyYXRlQmFzZVByb3RvdHlwZTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmZpbmRCYXNlUHJvdG90eXBlKGEpO2lmKCFiKXt2YXIgYj1IVE1MRWxlbWVudC5nZXRQcm90b3R5cGVGb3JUYWcoYSk7Yj10aGlzLmVuc3VyZUJhc2VBcGkoYiksaFthXT1ifXJldHVybiBifSxmaW5kQmFzZVByb3RvdHlwZTpmdW5jdGlvbihhKXtyZXR1cm4gaFthXX0sZW5zdXJlQmFzZUFwaTpmdW5jdGlvbihhKXtpZihhLlBvbHltZXJCYXNlKXJldHVybiBhO3ZhciBiPU9iamVjdC5jcmVhdGUoYSk7cmV0dXJuIGMucHVibGlzaChjLmluc3RhbmNlLGIpLHRoaXMubWl4aW5NZXRob2QoYixhLGMuaW5zdGFuY2UubWR2LCJiaW5kIiksYn0sbWl4aW5NZXRob2Q6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9ZnVuY3Rpb24oYSl7cmV0dXJuIGJbZF0uYXBwbHkodGhpcyxhKX07YVtkXT1mdW5jdGlvbigpe3JldHVybiB0aGlzLm1peGluU3VwZXI9ZSxjW2RdLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19LGluaGVyaXRPYmplY3Q6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWJbYV18fHt9O2JbYV09dGhpcy5jaGFpbk9iamVjdChkLGNbYV0pfSxyZWdpc3RlclByb3RvdHlwZTpmdW5jdGlvbihhLGIpe3ZhciBjPXtwcm90b3R5cGU6dGhpcy5wcm90b3R5cGV9LGQ9dGhpcy5maW5kVHlwZUV4dGVuc2lvbihiKTtkJiYoYy5leHRlbmRzPWQpLEhUTUxFbGVtZW50LnJlZ2lzdGVyKGEsdGhpcy5wcm90b3R5cGUpLHRoaXMuY3Rvcj1kb2N1bWVudC5yZWdpc3RlckVsZW1lbnQoYSxjKX0sZmluZFR5cGVFeHRlbnNpb246ZnVuY3Rpb24oYSl7aWYoYSYmYS5pbmRleE9mKCItIik8MClyZXR1cm4gYTt2YXIgYj10aGlzLmZpbmRCYXNlUHJvdG90eXBlKGEpO3JldHVybiBiLmVsZW1lbnQ/dGhpcy5maW5kVHlwZUV4dGVuc2lvbihiLmVsZW1lbnQuZXh0ZW5kcyk6dm9pZCAwfX0saD17fTtnLmNoYWluT2JqZWN0PU9iamVjdC5fX3Byb3RvX18/ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYSYmYiYmYSE9PWImJihhLl9fcHJvdG9fXz1iKSxhfTpmdW5jdGlvbihhLGIpe2lmKGEmJmImJmEhPT1iKXt2YXIgYz1PYmplY3QuY3JlYXRlKGIpO2E9ZShjLGEpfXJldHVybiBhfSxjLmRlY2xhcmF0aW9uLnByb3RvdHlwZT1nfShQb2x5bWVyKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEpe3JldHVybiBkb2N1bWVudC5jb250YWlucyhhKT9qOml9ZnVuY3Rpb24gYygpe3JldHVybiBpLmxlbmd0aD9pWzBdOmpbMF19ZnVuY3Rpb24gZChhKXtmLndhaXRUb1JlYWR5PSEwLFBsYXRmb3JtLmVuZE9mTWljcm90YXNrKGZ1bmN0aW9uKCl7SFRNTEltcG9ydHMud2hlblJlYWR5KGZ1bmN0aW9uKCl7Zi5hZGRSZWFkeUNhbGxiYWNrKGEpLGYud2FpdFRvUmVhZHk9ITEsZi5jaGVjaygpfSl9KX1mdW5jdGlvbiBlKGEpe2lmKHZvaWQgMD09PWEpcmV0dXJuIHZvaWQgZi5yZWFkeSgpO3ZhciBiPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtmLnJlYWR5KCl9LGEpO1BvbHltZXIud2hlblJlYWR5KGZ1bmN0aW9uKCl7Y2xlYXJUaW1lb3V0KGIpfSl9dmFyIGY9e3dhaXQ6ZnVuY3Rpb24oYSl7YS5fX3F1ZXVlfHwoYS5fX3F1ZXVlPXt9LGcucHVzaChhKSl9LGVucXVldWU6ZnVuY3Rpb24oYSxjLGQpe3ZhciBlPWEuX19xdWV1ZSYmIWEuX19xdWV1ZS5jaGVjaztyZXR1cm4gZSYmKGIoYSkucHVzaChhKSxhLl9fcXVldWUuY2hlY2s9YyxhLl9fcXVldWUuZ289ZCksMCE9PXRoaXMuaW5kZXhPZihhKX0saW5kZXhPZjpmdW5jdGlvbihhKXt2YXIgYz1iKGEpLmluZGV4T2YoYSk7cmV0dXJuIGM+PTAmJmRvY3VtZW50LmNvbnRhaW5zKGEpJiYoYys9SFRNTEltcG9ydHMudXNlTmF0aXZlfHxIVE1MSW1wb3J0cy5yZWFkeT9pLmxlbmd0aDoxZTkpLGN9LGdvOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMucmVtb3ZlKGEpO2ImJihhLl9fcXVldWUuZmx1c2hhYmxlPSEwLHRoaXMuYWRkVG9GbHVzaFF1ZXVlKGIpLHRoaXMuY2hlY2soKSl9LHJlbW92ZTpmdW5jdGlvbihhKXt2YXIgYz10aGlzLmluZGV4T2YoYSk7aWYoMD09PWMpcmV0dXJuIGIoYSkuc2hpZnQoKX0sY2hlY2s6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm5leHRFbGVtZW50KCk7cmV0dXJuIGEmJmEuX19xdWV1ZS5jaGVjay5jYWxsKGEpLHRoaXMuY2FuUmVhZHkoKT8odGhpcy5yZWFkeSgpLCEwKTp2b2lkIDB9LG5leHRFbGVtZW50OmZ1bmN0aW9uKCl7cmV0dXJuIGMoKX0sY2FuUmVhZHk6ZnVuY3Rpb24oKXtyZXR1cm4hdGhpcy53YWl0VG9SZWFkeSYmdGhpcy5pc0VtcHR5KCl9LGlzRW1wdHk6ZnVuY3Rpb24oKXtmb3IodmFyIGEsYj0wLGM9Zy5sZW5ndGg7Yz5iJiYoYT1nW2JdKTtiKyspaWYoYS5fX3F1ZXVlJiYhYS5fX3F1ZXVlLmZsdXNoYWJsZSlyZXR1cm47cmV0dXJuITB9LGFkZFRvRmx1c2hRdWV1ZTpmdW5jdGlvbihhKXtoLnB1c2goYSl9LGZsdXNoOmZ1bmN0aW9uKCl7aWYoIXRoaXMuZmx1c2hpbmcpe3RoaXMuZmx1c2hpbmc9ITA7Zm9yKHZhciBhO2gubGVuZ3RoOylhPWguc2hpZnQoKSxhLl9fcXVldWUuZ28uY2FsbChhKSxhLl9fcXVldWU9bnVsbDt0aGlzLmZsdXNoaW5nPSExfX0scmVhZHk6ZnVuY3Rpb24oKXt2YXIgYT1DdXN0b21FbGVtZW50cy5yZWFkeTtDdXN0b21FbGVtZW50cy5yZWFkeT0hMSx0aGlzLmZsdXNoKCksQ3VzdG9tRWxlbWVudHMudXNlTmF0aXZlfHxDdXN0b21FbGVtZW50cy51cGdyYWRlRG9jdW1lbnRUcmVlKGRvY3VtZW50KSxDdXN0b21FbGVtZW50cy5yZWFkeT1hLFBsYXRmb3JtLmZsdXNoKCkscmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRoaXMuZmx1c2hSZWFkeUNhbGxiYWNrcyl9LGFkZFJlYWR5Q2FsbGJhY2s6ZnVuY3Rpb24oYSl7YSYmay5wdXNoKGEpfSxmbHVzaFJlYWR5Q2FsbGJhY2tzOmZ1bmN0aW9uKCl7aWYoaylmb3IodmFyIGE7ay5sZW5ndGg7KShhPWsuc2hpZnQoKSkoKX0sd2FpdGluZ0ZvcjpmdW5jdGlvbigpe2Zvcih2YXIgYSxiPVtdLGM9MCxkPWcubGVuZ3RoO2Q+YyYmKGE9Z1tjXSk7YysrKWEuX19xdWV1ZSYmIWEuX19xdWV1ZS5mbHVzaGFibGUmJmIucHVzaChhKTtyZXR1cm4gYn0sd2FpdFRvUmVhZHk6ITB9LGc9W10saD1bXSxpPVtdLGo9W10saz1bXTthLmVsZW1lbnRzPWcsYS53YWl0aW5nRm9yPWYud2FpdGluZ0Zvci5iaW5kKGYpLGEuZm9yY2VSZWFkeT1lLGEucXVldWU9ZixhLndoZW5SZWFkeT1hLndoZW5Qb2x5bWVyUmVhZHk9ZH0oUG9seW1lciksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhKXtyZXR1cm4gQm9vbGVhbihIVE1MRWxlbWVudC5nZXRQcm90b3R5cGVGb3JUYWcoYSkpfWZ1bmN0aW9uIGMoYSl7cmV0dXJuIGEmJmEuaW5kZXhPZigiLSIpPj0wfXZhciBkPWEuZXh0ZW5kLGU9YS5hcGksZj1hLnF1ZXVlLGc9YS53aGVuUmVhZHksaD1hLmdldFJlZ2lzdGVyZWRQcm90b3R5cGUsaT1hLndhaXRpbmdGb3JQcm90b3R5cGUsaj1kKE9iamVjdC5jcmVhdGUoSFRNTEVsZW1lbnQucHJvdG90eXBlKSx7Y3JlYXRlZENhbGxiYWNrOmZ1bmN0aW9uKCl7dGhpcy5nZXRBdHRyaWJ1dGUoIm5hbWUiKSYmdGhpcy5pbml0KCl9LGluaXQ6ZnVuY3Rpb24oKXt0aGlzLm5hbWU9dGhpcy5nZXRBdHRyaWJ1dGUoIm5hbWUiKSx0aGlzLmV4dGVuZHM9dGhpcy5nZXRBdHRyaWJ1dGUoImV4dGVuZHMiKSxmLndhaXQodGhpcyksdGhpcy5sb2FkUmVzb3VyY2VzKCksdGhpcy5yZWdpc3RlcldoZW5SZWFkeSgpfSxyZWdpc3RlcldoZW5SZWFkeTpmdW5jdGlvbigpe3RoaXMucmVnaXN0ZXJlZHx8dGhpcy53YWl0aW5nRm9yUHJvdG90eXBlKHRoaXMubmFtZSl8fHRoaXMud2FpdGluZ0ZvclF1ZXVlKCl8fHRoaXMud2FpdGluZ0ZvclJlc291cmNlcygpfHxmLmdvKHRoaXMpfSxfcmVnaXN0ZXI6ZnVuY3Rpb24oKXtjKHRoaXMuZXh0ZW5kcykmJiFiKHRoaXMuZXh0ZW5kcykmJmNvbnNvbGUud2FybigiJXMgaXMgYXR0ZW1wdGluZyB0byBleHRlbmQgJXMsIGFuIHVucmVnaXN0ZXJlZCBlbGVtZW50IG9yIG9uZSB0aGF0IHdhcyBub3QgcmVnaXN0ZXJlZCB3aXRoIFBvbHltZXIuIix0aGlzLm5hbWUsdGhpcy5leHRlbmRzKSx0aGlzLnJlZ2lzdGVyKHRoaXMubmFtZSx0aGlzLmV4dGVuZHMpLHRoaXMucmVnaXN0ZXJlZD0hMH0sd2FpdGluZ0ZvclByb3RvdHlwZTpmdW5jdGlvbihhKXtyZXR1cm4gaChhKT92b2lkIDA6KGkoYSx0aGlzKSx0aGlzLmhhbmRsZU5vU2NyaXB0KGEpLCEwKX0saGFuZGxlTm9TY3JpcHQ6ZnVuY3Rpb24oYSl7dGhpcy5oYXNBdHRyaWJ1dGUoIm5vc2NyaXB0IikmJiF0aGlzLm5vc2NyaXB0JiYodGhpcy5ub3NjcmlwdD0hMCxQb2x5bWVyKGEpKX0sd2FpdGluZ0ZvclJlc291cmNlczpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9uZWVkc1Jlc291cmNlc30sd2FpdGluZ0ZvclF1ZXVlOmZ1bmN0aW9uKCl7cmV0dXJuIGYuZW5xdWV1ZSh0aGlzLHRoaXMucmVnaXN0ZXJXaGVuUmVhZHksdGhpcy5fcmVnaXN0ZXIpfSxsb2FkUmVzb3VyY2VzOmZ1bmN0aW9uKCl7dGhpcy5fbmVlZHNSZXNvdXJjZXM9ITAsdGhpcy5sb2FkU3R5bGVzKGZ1bmN0aW9uKCl7dGhpcy5fbmVlZHNSZXNvdXJjZXM9ITEsdGhpcy5yZWdpc3RlcldoZW5SZWFkeSgpfS5iaW5kKHRoaXMpKX19KTtlLnB1Ymxpc2goZS5kZWNsYXJhdGlvbixqKSxnKGZ1bmN0aW9uKCl7ZG9jdW1lbnQuYm9keS5yZW1vdmVBdHRyaWJ1dGUoInVucmVzb2x2ZWQiKSxkb2N1bWVudC5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgicG9seW1lci1yZWFkeSIse2J1YmJsZXM6ITB9KSl9KSxkb2N1bWVudC5yZWdpc3RlckVsZW1lbnQoInBvbHltZXItZWxlbWVudCIse3Byb3RvdHlwZTpqfSl9KFBvbHltZXIpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSxiKXthPyhkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKGEpLGQoYikpOmImJmIoKX1mdW5jdGlvbiBjKGEsYyl7aWYoYSYmYS5sZW5ndGgpe2Zvcih2YXIgZCxlLGY9ZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLGc9MCxoPWEubGVuZ3RoO2g+ZyYmKGQ9YVtnXSk7ZysrKWU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgibGluayIpLGUucmVsPSJpbXBvcnQiLGUuaHJlZj1kLGYuYXBwZW5kQ2hpbGQoZSk7YihmLGMpfWVsc2UgYyYmYygpfXZhciBkPWEud2hlblBvbHltZXJSZWFkeTthLmltcG9ydD1jLGEuaW1wb3J0RWxlbWVudHM9Yn0oUG9seW1lciksZnVuY3Rpb24oKXt2YXIgYT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJwb2x5bWVyLWVsZW1lbnQiKTthLnNldEF0dHJpYnV0ZSgibmFtZSIsImF1dG8tYmluZGluZyIpLGEuc2V0QXR0cmlidXRlKCJleHRlbmRzIiwidGVtcGxhdGUiKSxhLmluaXQoKSxQb2x5bWVyKCJhdXRvLWJpbmRpbmciLHtjcmVhdGVkQ2FsbGJhY2s6ZnVuY3Rpb24oKXt0aGlzLnN5bnRheD10aGlzLmJpbmRpbmdEZWxlZ2F0ZT10aGlzLm1ha2VTeW50YXgoKSxQb2x5bWVyLndoZW5Qb2x5bWVyUmVhZHkoZnVuY3Rpb24oKXt0aGlzLm1vZGVsPXRoaXMsdGhpcy5zZXRBdHRyaWJ1dGUoImJpbmQiLCIiKSx0aGlzLmFzeW5jKGZ1bmN0aW9uKCl7dGhpcy5tYXJzaGFsTm9kZVJlZmVyZW5jZXModGhpcy5wYXJlbnROb2RlKSx0aGlzLmZpcmUoInRlbXBsYXRlLWJvdW5kIil9KX0uYmluZCh0aGlzKSl9LG1ha2VTeW50YXg6ZnVuY3Rpb24oKXt2YXIgYT1PYmplY3QuY3JlYXRlKFBvbHltZXIuYXBpLmRlY2xhcmF0aW9uLmV2ZW50cyksYj10aGlzO2EuZmluZENvbnRyb2xsZXI9ZnVuY3Rpb24oKXtyZXR1cm4gYi5tb2RlbH07dmFyIGM9bmV3IFBvbHltZXJFeHByZXNzaW9ucyxkPWMucHJlcGFyZUJpbmRpbmc7cmV0dXJuIGMucHJlcGFyZUJpbmRpbmc9ZnVuY3Rpb24oYixlLGYpe3JldHVybiBhLnByZXBhcmVFdmVudEJpbmRpbmcoYixlLGYpfHxkLmNhbGwoYyxiLGUsZil9LGN9fSl9KCk7Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPXBvbHltZXIuanMubWFw",
                "headers": {
                    "Accept-Ranges": "bytes",
                    "Last-Modified": "Fri, 07 Nov 2014 09:26:40 GMT",
                    "Content-Length": "112734",
                    "Date": "Fri, 07 Nov 2014 09:26:42 GMT",
                    "Content-Type": "application/javascript"
                },
                "cookies": [],
                "mimeType": "script",
                "host": "localhost",
                "protocol": "http",
                "port": 9999,
                "inScope": false,
                "toolFlag": 16962,
                "referenceID": 0,
                "messageType": "response"
            },
            "messageType": "requestResponse"
        }
    ],
    "inScope": true,
    "messageType": "scanIssue"
}